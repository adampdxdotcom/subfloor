var UEe=Object.defineProperty;var WH=e=>{throw TypeError(e)};var $Ee=(e,t,r)=>t in e?UEe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var AR=(e,t,r)=>$Ee(e,typeof t!="symbol"?t+"":t,r),TR=(e,t,r)=>t.has(e)||WH("Cannot "+r);var Le=(e,t,r)=>(TR(e,t,"read from private field"),r?r.call(e):t.get(e)),hr=(e,t,r)=>t.has(e)?WH("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Vt=(e,t,r,n)=>(TR(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),ln=(e,t,r)=>(TR(e,t,"access private method"),r);var Fk=(e,t,r,n)=>({set _(i){Vt(e,t,i,r)},get _(){return Le(e,t,n)}});function AF(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Ve=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Us(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function zEe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var ote={exports:{}},xO={},lte={exports:{}},Cn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pE=Symbol.for("react.element"),HEe=Symbol.for("react.portal"),WEe=Symbol.for("react.fragment"),VEe=Symbol.for("react.strict_mode"),qEe=Symbol.for("react.profiler"),GEe=Symbol.for("react.provider"),KEe=Symbol.for("react.context"),XEe=Symbol.for("react.forward_ref"),YEe=Symbol.for("react.suspense"),QEe=Symbol.for("react.memo"),JEe=Symbol.for("react.lazy"),VH=Symbol.iterator;function ZEe(e){return e===null||typeof e!="object"?null:(e=VH&&e[VH]||e["@@iterator"],typeof e=="function"?e:null)}var cte={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ute=Object.assign,dte={};function $y(e,t,r){this.props=e,this.context=t,this.refs=dte,this.updater=r||cte}$y.prototype.isReactComponent={};$y.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};$y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fte(){}fte.prototype=$y.prototype;function TF(e,t,r){this.props=e,this.context=t,this.refs=dte,this.updater=r||cte}var IF=TF.prototype=new fte;IF.constructor=TF;ute(IF,$y.prototype);IF.isPureReactComponent=!0;var qH=Array.isArray,hte=Object.prototype.hasOwnProperty,OF={current:null},pte={key:!0,ref:!0,__self:!0,__source:!0};function mte(e,t,r){var n,i={},a=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(a=""+t.key),t)hte.call(t,n)&&!pte.hasOwnProperty(n)&&(i[n]=t[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:pE,type:e,key:a,ref:s,props:i,_owner:OF.current}}function eCe(e,t){return{$$typeof:pE,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function PF(e){return typeof e=="object"&&e!==null&&e.$$typeof===pE}function tCe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var GH=/\/+/g;function IR(e,t){return typeof e=="object"&&e!==null&&e.key!=null?tCe(""+e.key):t.toString(36)}function bN(e,t,r,n,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case pE:case HEe:s=!0}}if(s)return s=e,i=i(s),e=n===""?"."+IR(s,0):n,qH(i)?(r="",e!=null&&(r=e.replace(GH,"$&/")+"/"),bN(i,t,r,"",function(c){return c})):i!=null&&(PF(i)&&(i=eCe(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(GH,"$&/")+"/")+e)),t.push(i)),1;if(s=0,n=n===""?".":n+":",qH(e))for(var o=0;o<e.length;o++){a=e[o];var l=n+IR(a,o);s+=bN(a,t,r,l,i)}else if(l=ZEe(e),typeof l=="function")for(e=l.call(e),o=0;!(a=e.next()).done;)a=a.value,l=n+IR(a,o++),s+=bN(a,t,r,l,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Lk(e,t,r){if(e==null)return e;var n=[],i=0;return bN(e,n,"","",function(a){return t.call(r,a,i++)}),n}function rCe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Go={current:null},wN={transition:null},nCe={ReactCurrentDispatcher:Go,ReactCurrentBatchConfig:wN,ReactCurrentOwner:OF};function gte(){throw Error("act(...) is not supported in production builds of React.")}Cn.Children={map:Lk,forEach:function(e,t,r){Lk(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Lk(e,function(){t++}),t},toArray:function(e){return Lk(e,function(t){return t})||[]},only:function(e){if(!PF(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Cn.Component=$y;Cn.Fragment=WEe;Cn.Profiler=qEe;Cn.PureComponent=TF;Cn.StrictMode=VEe;Cn.Suspense=YEe;Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nCe;Cn.act=gte;Cn.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=ute({},e.props),i=e.key,a=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,s=OF.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)hte.call(t,l)&&!pte.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:pE,type:e.type,key:i,ref:a,props:n,_owner:s}};Cn.createContext=function(e){return e={$$typeof:KEe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:GEe,_context:e},e.Consumer=e};Cn.createElement=mte;Cn.createFactory=function(e){var t=mte.bind(null,e);return t.type=e,t};Cn.createRef=function(){return{current:null}};Cn.forwardRef=function(e){return{$$typeof:XEe,render:e}};Cn.isValidElement=PF;Cn.lazy=function(e){return{$$typeof:JEe,_payload:{_status:-1,_result:e},_init:rCe}};Cn.memo=function(e,t){return{$$typeof:QEe,type:e,compare:t===void 0?null:t}};Cn.startTransition=function(e){var t=wN.transition;wN.transition={};try{e()}finally{wN.transition=t}};Cn.unstable_act=gte;Cn.useCallback=function(e,t){return Go.current.useCallback(e,t)};Cn.useContext=function(e){return Go.current.useContext(e)};Cn.useDebugValue=function(){};Cn.useDeferredValue=function(e){return Go.current.useDeferredValue(e)};Cn.useEffect=function(e,t){return Go.current.useEffect(e,t)};Cn.useId=function(){return Go.current.useId()};Cn.useImperativeHandle=function(e,t,r){return Go.current.useImperativeHandle(e,t,r)};Cn.useInsertionEffect=function(e,t){return Go.current.useInsertionEffect(e,t)};Cn.useLayoutEffect=function(e,t){return Go.current.useLayoutEffect(e,t)};Cn.useMemo=function(e,t){return Go.current.useMemo(e,t)};Cn.useReducer=function(e,t,r){return Go.current.useReducer(e,t,r)};Cn.useRef=function(e){return Go.current.useRef(e)};Cn.useState=function(e){return Go.current.useState(e)};Cn.useSyncExternalStore=function(e,t,r){return Go.current.useSyncExternalStore(e,t,r)};Cn.useTransition=function(){return Go.current.useTransition()};Cn.version="18.3.1";lte.exports=Cn;var I=lte.exports;const Hr=Us(I),Gv=AF({__proto__:null,default:Hr},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iCe=I,aCe=Symbol.for("react.element"),sCe=Symbol.for("react.fragment"),oCe=Object.prototype.hasOwnProperty,lCe=iCe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cCe={key:!0,ref:!0,__self:!0,__source:!0};function xte(e,t,r){var n,i={},a=null,s=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)oCe.call(t,n)&&!cCe.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:aCe,type:e,key:a,ref:s,props:i,_owner:lCe.current}}xO.Fragment=sCe;xO.jsx=xte;xO.jsxs=xte;ote.exports=xO;var u=ote.exports,NM={},vte={exports:{}},dc={},yte={exports:{}},bte={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Q,X){var fe=Q.length;Q.push(X);e:for(;0<fe;){var Se=fe-1>>>1,Y=Q[Se];if(0<i(Y,X))Q[Se]=X,Q[fe]=Y,fe=Se;else break e}}function r(Q){return Q.length===0?null:Q[0]}function n(Q){if(Q.length===0)return null;var X=Q[0],fe=Q.pop();if(fe!==X){Q[0]=fe;e:for(var Se=0,Y=Q.length,ce=Y>>>1;Se<ce;){var W=2*(Se+1)-1,G=Q[W],ie=W+1,Ce=Q[ie];if(0>i(G,fe))ie<Y&&0>i(Ce,G)?(Q[Se]=Ce,Q[ie]=fe,Se=ie):(Q[Se]=G,Q[W]=fe,Se=W);else if(ie<Y&&0>i(Ce,fe))Q[Se]=Ce,Q[ie]=fe,Se=ie;else break e}}return X}function i(Q,X){var fe=Q.sortIndex-X.sortIndex;return fe!==0?fe:Q.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],c=[],d=1,f=null,p=3,m=!1,x=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(Q){for(var X=r(c);X!==null;){if(X.callback===null)n(c);else if(X.startTime<=Q)n(c),X.sortIndex=X.expirationTime,t(l,X);else break;X=r(c)}}function N(Q){if(v=!1,C(Q),!x)if(r(l)!==null)x=!0,te(R);else{var X=r(c);X!==null&&se(N,X.startTime-Q)}}function R(Q,X){x=!1,v&&(v=!1,w(D),D=-1),m=!0;var fe=p;try{for(C(X),f=r(l);f!==null&&(!(f.expirationTime>X)||Q&&!U());){var Se=f.callback;if(typeof Se=="function"){f.callback=null,p=f.priorityLevel;var Y=Se(f.expirationTime<=X);X=e.unstable_now(),typeof Y=="function"?f.callback=Y:f===r(l)&&n(l),C(X)}else n(l);f=r(l)}if(f!==null)var ce=!0;else{var W=r(c);W!==null&&se(N,W.startTime-X),ce=!1}return ce}finally{f=null,p=fe,m=!1}}var P=!1,O=null,D=-1,M=5,B=-1;function U(){return!(e.unstable_now()-B<M)}function H(){if(O!==null){var Q=e.unstable_now();B=Q;var X=!0;try{X=O(!0,Q)}finally{X?Z():(P=!1,O=null)}}else P=!1}var Z;if(typeof _=="function")Z=function(){_(H)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,V=ee.port2;ee.port1.onmessage=H,Z=function(){V.postMessage(null)}}else Z=function(){b(H,0)};function te(Q){O=Q,P||(P=!0,Z())}function se(Q,X){D=b(function(){Q(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Q){Q.callback=null},e.unstable_continueExecution=function(){x||m||(x=!0,te(R))},e.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<Q?Math.floor(1e3/Q):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(Q){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var fe=p;p=X;try{return Q()}finally{p=fe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Q,X){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var fe=p;p=Q;try{return X()}finally{p=fe}},e.unstable_scheduleCallback=function(Q,X,fe){var Se=e.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Se+fe:Se):fe=Se,Q){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=fe+Y,Q={id:d++,callback:X,priorityLevel:Q,startTime:fe,expirationTime:Y,sortIndex:-1},fe>Se?(Q.sortIndex=fe,t(c,Q),r(l)===null&&Q===r(c)&&(v?(w(D),D=-1):v=!0,se(N,fe-Se))):(Q.sortIndex=Y,t(l,Q),x||m||(x=!0,te(R))),Q},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(Q){var X=p;return function(){var fe=p;p=X;try{return Q.apply(this,arguments)}finally{p=fe}}}})(bte);yte.exports=bte;var uCe=yte.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dCe=I,sc=uCe;function jt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wte=new Set,q2={};function wx(e,t){Kv(e,t),Kv(e+"Capture",t)}function Kv(e,t){for(q2[e]=t,e=0;e<t.length;e++)wte.add(t[e])}var Ih=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),AM=Object.prototype.hasOwnProperty,fCe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,KH={},XH={};function hCe(e){return AM.call(XH,e)?!0:AM.call(KH,e)?!1:fCe.test(e)?XH[e]=!0:(KH[e]=!0,!1)}function pCe(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function mCe(e,t,r,n){if(t===null||typeof t>"u"||pCe(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ko(e,t,r,n,i,a,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var Ls={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ls[e]=new Ko(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ls[t]=new Ko(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ls[e]=new Ko(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ls[e]=new Ko(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ls[e]=new Ko(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ls[e]=new Ko(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ls[e]=new Ko(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ls[e]=new Ko(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ls[e]=new Ko(e,5,!1,e.toLowerCase(),null,!1,!1)});var RF=/[\-:]([a-z])/g;function jF(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(RF,jF);Ls[t]=new Ko(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(RF,jF);Ls[t]=new Ko(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(RF,jF);Ls[t]=new Ko(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ls[e]=new Ko(e,1,!1,e.toLowerCase(),null,!1,!1)});Ls.xlinkHref=new Ko("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ls[e]=new Ko(e,1,!1,e.toLowerCase(),null,!0,!0)});function DF(e,t,r,n){var i=Ls.hasOwnProperty(t)?Ls[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(mCe(t,r,i,n)&&(r=null),n||i===null?hCe(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Xh=dCe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bk=Symbol.for("react.element"),Y1=Symbol.for("react.portal"),Q1=Symbol.for("react.fragment"),MF=Symbol.for("react.strict_mode"),TM=Symbol.for("react.profiler"),Ste=Symbol.for("react.provider"),Ete=Symbol.for("react.context"),FF=Symbol.for("react.forward_ref"),IM=Symbol.for("react.suspense"),OM=Symbol.for("react.suspense_list"),LF=Symbol.for("react.memo"),Dp=Symbol.for("react.lazy"),Cte=Symbol.for("react.offscreen"),YH=Symbol.iterator;function tw(e){return e===null||typeof e!="object"?null:(e=YH&&e[YH]||e["@@iterator"],typeof e=="function"?e:null)}var Hi=Object.assign,OR;function $w(e){if(OR===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);OR=t&&t[1]||""}return`
`+OR+e}var PR=!1;function RR(e,t){if(!e||PR)return"";PR=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),a=n.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=o);break}}}finally{PR=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?$w(e):""}function gCe(e){switch(e.tag){case 5:return $w(e.type);case 16:return $w("Lazy");case 13:return $w("Suspense");case 19:return $w("SuspenseList");case 0:case 2:case 15:return e=RR(e.type,!1),e;case 11:return e=RR(e.type.render,!1),e;case 1:return e=RR(e.type,!0),e;default:return""}}function PM(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Q1:return"Fragment";case Y1:return"Portal";case TM:return"Profiler";case MF:return"StrictMode";case IM:return"Suspense";case OM:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ete:return(e.displayName||"Context")+".Consumer";case Ste:return(e._context.displayName||"Context")+".Provider";case FF:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case LF:return t=e.displayName||null,t!==null?t:PM(e.type)||"Memo";case Dp:t=e._payload,e=e._init;try{return PM(e(t))}catch{}}return null}function xCe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return PM(t);case 8:return t===MF?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function _0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kte(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function vCe(e){var t=kte(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,a.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Uk(e){e._valueTracker||(e._valueTracker=vCe(e))}function _te(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=kte(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function iA(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function RM(e,t){var r=t.checked;return Hi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function QH(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=_0(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Nte(e,t){t=t.checked,t!=null&&DF(e,"checked",t,!1)}function jM(e,t){Nte(e,t);var r=_0(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?DM(e,t.type,r):t.hasOwnProperty("defaultValue")&&DM(e,t.type,_0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function JH(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function DM(e,t,r){(t!=="number"||iA(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var zw=Array.isArray;function pv(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+_0(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function MM(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(jt(91));return Hi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ZH(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(jt(92));if(zw(r)){if(1<r.length)throw Error(jt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:_0(r)}}function Ate(e,t){var r=_0(t.value),n=_0(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function eW(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Tte(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function FM(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Tte(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $k,Ite=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($k=$k||document.createElement("div"),$k.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$k.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function G2(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var s2={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yCe=["Webkit","ms","Moz","O"];Object.keys(s2).forEach(function(e){yCe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),s2[t]=s2[e]})});function Ote(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||s2.hasOwnProperty(e)&&s2[e]?(""+t).trim():t+"px"}function Pte(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Ote(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var bCe=Hi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function LM(e,t){if(t){if(bCe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(jt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(jt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(jt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(jt(62))}}function BM(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var UM=null;function BF(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $M=null,mv=null,gv=null;function tW(e){if(e=xE(e)){if(typeof $M!="function")throw Error(jt(280));var t=e.stateNode;t&&(t=SO(t),$M(e.stateNode,e.type,t))}}function Rte(e){mv?gv?gv.push(e):gv=[e]:mv=e}function jte(){if(mv){var e=mv,t=gv;if(gv=mv=null,tW(e),t)for(e=0;e<t.length;e++)tW(t[e])}}function Dte(e,t){return e(t)}function Mte(){}var jR=!1;function Fte(e,t,r){if(jR)return e(t,r);jR=!0;try{return Dte(e,t,r)}finally{jR=!1,(mv!==null||gv!==null)&&(Mte(),jte())}}function K2(e,t){var r=e.stateNode;if(r===null)return null;var n=SO(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(jt(231,t,typeof r));return r}var zM=!1;if(Ih)try{var rw={};Object.defineProperty(rw,"passive",{get:function(){zM=!0}}),window.addEventListener("test",rw,rw),window.removeEventListener("test",rw,rw)}catch{zM=!1}function wCe(e,t,r,n,i,a,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var o2=!1,aA=null,sA=!1,HM=null,SCe={onError:function(e){o2=!0,aA=e}};function ECe(e,t,r,n,i,a,s,o,l){o2=!1,aA=null,wCe.apply(SCe,arguments)}function CCe(e,t,r,n,i,a,s,o,l){if(ECe.apply(this,arguments),o2){if(o2){var c=aA;o2=!1,aA=null}else throw Error(jt(198));sA||(sA=!0,HM=c)}}function Sx(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Lte(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function rW(e){if(Sx(e)!==e)throw Error(jt(188))}function kCe(e){var t=e.alternate;if(!t){if(t=Sx(e),t===null)throw Error(jt(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return rW(i),e;if(a===n)return rW(i),t;a=a.sibling}throw Error(jt(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,o=i.child;o;){if(o===r){s=!0,r=i,n=a;break}if(o===n){s=!0,n=i,r=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===r){s=!0,r=a,n=i;break}if(o===n){s=!0,n=a,r=i;break}o=o.sibling}if(!s)throw Error(jt(189))}}if(r.alternate!==n)throw Error(jt(190))}if(r.tag!==3)throw Error(jt(188));return r.stateNode.current===r?e:t}function Bte(e){return e=kCe(e),e!==null?Ute(e):null}function Ute(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ute(e);if(t!==null)return t;e=e.sibling}return null}var $te=sc.unstable_scheduleCallback,nW=sc.unstable_cancelCallback,_Ce=sc.unstable_shouldYield,NCe=sc.unstable_requestPaint,ma=sc.unstable_now,ACe=sc.unstable_getCurrentPriorityLevel,UF=sc.unstable_ImmediatePriority,zte=sc.unstable_UserBlockingPriority,oA=sc.unstable_NormalPriority,TCe=sc.unstable_LowPriority,Hte=sc.unstable_IdlePriority,vO=null,Xd=null;function ICe(e){if(Xd&&typeof Xd.onCommitFiberRoot=="function")try{Xd.onCommitFiberRoot(vO,e,void 0,(e.current.flags&128)===128)}catch{}}var Zu=Math.clz32?Math.clz32:RCe,OCe=Math.log,PCe=Math.LN2;function RCe(e){return e>>>=0,e===0?32:31-(OCe(e)/PCe|0)|0}var zk=64,Hk=4194304;function Hw(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function lA(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,s=r&268435455;if(s!==0){var o=s&~i;o!==0?n=Hw(o):(a&=s,a!==0&&(n=Hw(a)))}else s=r&~i,s!==0?n=Hw(s):a!==0&&(n=Hw(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Zu(t),i=1<<r,n|=e[r],t&=~i;return n}function jCe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DCe(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-Zu(a),o=1<<s,l=i[s];l===-1?(!(o&r)||o&n)&&(i[s]=jCe(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}function WM(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Wte(){var e=zk;return zk<<=1,!(zk&4194240)&&(zk=64),e}function DR(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function mE(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Zu(t),e[t]=r}function MCe(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Zu(r),a=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~a}}function $F(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Zu(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var ri=0;function Vte(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var qte,zF,Gte,Kte,Xte,VM=!1,Wk=[],f0=null,h0=null,p0=null,X2=new Map,Y2=new Map,Hp=[],FCe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iW(e,t){switch(e){case"focusin":case"focusout":f0=null;break;case"dragenter":case"dragleave":h0=null;break;case"mouseover":case"mouseout":p0=null;break;case"pointerover":case"pointerout":X2.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Y2.delete(t.pointerId)}}function nw(e,t,r,n,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},t!==null&&(t=xE(t),t!==null&&zF(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function LCe(e,t,r,n,i){switch(t){case"focusin":return f0=nw(f0,e,t,r,n,i),!0;case"dragenter":return h0=nw(h0,e,t,r,n,i),!0;case"mouseover":return p0=nw(p0,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return X2.set(a,nw(X2.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Y2.set(a,nw(Y2.get(a)||null,e,t,r,n,i)),!0}return!1}function Yte(e){var t=Gm(e.target);if(t!==null){var r=Sx(t);if(r!==null){if(t=r.tag,t===13){if(t=Lte(r),t!==null){e.blockedOn=t,Xte(e.priority,function(){Gte(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function SN(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=qM(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);UM=n,r.target.dispatchEvent(n),UM=null}else return t=xE(r),t!==null&&zF(t),e.blockedOn=r,!1;t.shift()}return!0}function aW(e,t,r){SN(e)&&r.delete(t)}function BCe(){VM=!1,f0!==null&&SN(f0)&&(f0=null),h0!==null&&SN(h0)&&(h0=null),p0!==null&&SN(p0)&&(p0=null),X2.forEach(aW),Y2.forEach(aW)}function iw(e,t){e.blockedOn===t&&(e.blockedOn=null,VM||(VM=!0,sc.unstable_scheduleCallback(sc.unstable_NormalPriority,BCe)))}function Q2(e){function t(i){return iw(i,e)}if(0<Wk.length){iw(Wk[0],e);for(var r=1;r<Wk.length;r++){var n=Wk[r];n.blockedOn===e&&(n.blockedOn=null)}}for(f0!==null&&iw(f0,e),h0!==null&&iw(h0,e),p0!==null&&iw(p0,e),X2.forEach(t),Y2.forEach(t),r=0;r<Hp.length;r++)n=Hp[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Hp.length&&(r=Hp[0],r.blockedOn===null);)Yte(r),r.blockedOn===null&&Hp.shift()}var xv=Xh.ReactCurrentBatchConfig,cA=!0;function UCe(e,t,r,n){var i=ri,a=xv.transition;xv.transition=null;try{ri=1,HF(e,t,r,n)}finally{ri=i,xv.transition=a}}function $Ce(e,t,r,n){var i=ri,a=xv.transition;xv.transition=null;try{ri=4,HF(e,t,r,n)}finally{ri=i,xv.transition=a}}function HF(e,t,r,n){if(cA){var i=qM(e,t,r,n);if(i===null)VR(e,t,n,uA,r),iW(e,n);else if(LCe(i,e,t,r,n))n.stopPropagation();else if(iW(e,n),t&4&&-1<FCe.indexOf(e)){for(;i!==null;){var a=xE(i);if(a!==null&&qte(a),a=qM(e,t,r,n),a===null&&VR(e,t,n,uA,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else VR(e,t,n,null,r)}}var uA=null;function qM(e,t,r,n){if(uA=null,e=BF(n),e=Gm(e),e!==null)if(t=Sx(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Lte(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return uA=e,null}function Qte(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ACe()){case UF:return 1;case zte:return 4;case oA:case TCe:return 16;case Hte:return 536870912;default:return 16}default:return 16}}var i0=null,WF=null,EN=null;function Jte(){if(EN)return EN;var e,t=WF,r=t.length,n,i="value"in i0?i0.value:i0.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===i[a-n];n++);return EN=i.slice(e,1<n?1-n:void 0)}function CN(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Vk(){return!0}function sW(){return!1}function fc(e){function t(r,n,i,a,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Vk:sW,this.isPropagationStopped=sW,this}return Hi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Vk)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Vk)},persist:function(){},isPersistent:Vk}),t}var zy={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},VF=fc(zy),gE=Hi({},zy,{view:0,detail:0}),zCe=fc(gE),MR,FR,aw,yO=Hi({},gE,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qF,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==aw&&(aw&&e.type==="mousemove"?(MR=e.screenX-aw.screenX,FR=e.screenY-aw.screenY):FR=MR=0,aw=e),MR)},movementY:function(e){return"movementY"in e?e.movementY:FR}}),oW=fc(yO),HCe=Hi({},yO,{dataTransfer:0}),WCe=fc(HCe),VCe=Hi({},gE,{relatedTarget:0}),LR=fc(VCe),qCe=Hi({},zy,{animationName:0,elapsedTime:0,pseudoElement:0}),GCe=fc(qCe),KCe=Hi({},zy,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),XCe=fc(KCe),YCe=Hi({},zy,{data:0}),lW=fc(YCe),QCe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JCe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZCe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eke(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ZCe[e])?!!t[e]:!1}function qF(){return eke}var tke=Hi({},gE,{key:function(e){if(e.key){var t=QCe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=CN(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?JCe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qF,charCode:function(e){return e.type==="keypress"?CN(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?CN(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),rke=fc(tke),nke=Hi({},yO,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cW=fc(nke),ike=Hi({},gE,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qF}),ake=fc(ike),ske=Hi({},zy,{propertyName:0,elapsedTime:0,pseudoElement:0}),oke=fc(ske),lke=Hi({},yO,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cke=fc(lke),uke=[9,13,27,32],GF=Ih&&"CompositionEvent"in window,l2=null;Ih&&"documentMode"in document&&(l2=document.documentMode);var dke=Ih&&"TextEvent"in window&&!l2,Zte=Ih&&(!GF||l2&&8<l2&&11>=l2),uW=" ",dW=!1;function ere(e,t){switch(e){case"keyup":return uke.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tre(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var J1=!1;function fke(e,t){switch(e){case"compositionend":return tre(t);case"keypress":return t.which!==32?null:(dW=!0,uW);case"textInput":return e=t.data,e===uW&&dW?null:e;default:return null}}function hke(e,t){if(J1)return e==="compositionend"||!GF&&ere(e,t)?(e=Jte(),EN=WF=i0=null,J1=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Zte&&t.locale!=="ko"?null:t.data;default:return null}}var pke={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fW(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!pke[e.type]:t==="textarea"}function rre(e,t,r,n){Rte(n),t=dA(t,"onChange"),0<t.length&&(r=new VF("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var c2=null,J2=null;function mke(e){hre(e,0)}function bO(e){var t=tv(e);if(_te(t))return e}function gke(e,t){if(e==="change")return t}var nre=!1;if(Ih){var BR;if(Ih){var UR="oninput"in document;if(!UR){var hW=document.createElement("div");hW.setAttribute("oninput","return;"),UR=typeof hW.oninput=="function"}BR=UR}else BR=!1;nre=BR&&(!document.documentMode||9<document.documentMode)}function pW(){c2&&(c2.detachEvent("onpropertychange",ire),J2=c2=null)}function ire(e){if(e.propertyName==="value"&&bO(J2)){var t=[];rre(t,J2,e,BF(e)),Fte(mke,t)}}function xke(e,t,r){e==="focusin"?(pW(),c2=t,J2=r,c2.attachEvent("onpropertychange",ire)):e==="focusout"&&pW()}function vke(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bO(J2)}function yke(e,t){if(e==="click")return bO(t)}function bke(e,t){if(e==="input"||e==="change")return bO(t)}function wke(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ad=typeof Object.is=="function"?Object.is:wke;function Z2(e,t){if(ad(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!AM.call(t,i)||!ad(e[i],t[i]))return!1}return!0}function mW(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gW(e,t){var r=mW(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=mW(r)}}function are(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?are(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function sre(){for(var e=window,t=iA();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=iA(e.document)}return t}function KF(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ske(e){var t=sre(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&are(r.ownerDocument.documentElement,r)){if(n!==null&&KF(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!e.extend&&a>n&&(i=n,n=a,a=i),i=gW(r,a);var s=gW(r,n);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Eke=Ih&&"documentMode"in document&&11>=document.documentMode,Z1=null,GM=null,u2=null,KM=!1;function xW(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;KM||Z1==null||Z1!==iA(n)||(n=Z1,"selectionStart"in n&&KF(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),u2&&Z2(u2,n)||(u2=n,n=dA(GM,"onSelect"),0<n.length&&(t=new VF("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Z1)))}function qk(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ev={animationend:qk("Animation","AnimationEnd"),animationiteration:qk("Animation","AnimationIteration"),animationstart:qk("Animation","AnimationStart"),transitionend:qk("Transition","TransitionEnd")},$R={},ore={};Ih&&(ore=document.createElement("div").style,"AnimationEvent"in window||(delete ev.animationend.animation,delete ev.animationiteration.animation,delete ev.animationstart.animation),"TransitionEvent"in window||delete ev.transitionend.transition);function wO(e){if($R[e])return $R[e];if(!ev[e])return e;var t=ev[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in ore)return $R[e]=t[r];return e}var lre=wO("animationend"),cre=wO("animationiteration"),ure=wO("animationstart"),dre=wO("transitionend"),fre=new Map,vW="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $0(e,t){fre.set(e,t),wx(t,[e])}for(var zR=0;zR<vW.length;zR++){var HR=vW[zR],Cke=HR.toLowerCase(),kke=HR[0].toUpperCase()+HR.slice(1);$0(Cke,"on"+kke)}$0(lre,"onAnimationEnd");$0(cre,"onAnimationIteration");$0(ure,"onAnimationStart");$0("dblclick","onDoubleClick");$0("focusin","onFocus");$0("focusout","onBlur");$0(dre,"onTransitionEnd");Kv("onMouseEnter",["mouseout","mouseover"]);Kv("onMouseLeave",["mouseout","mouseover"]);Kv("onPointerEnter",["pointerout","pointerover"]);Kv("onPointerLeave",["pointerout","pointerover"]);wx("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wx("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wx("onBeforeInput",["compositionend","keypress","textInput","paste"]);wx("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wx("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wx("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ww="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_ke=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ww));function yW(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,CCe(n,t,void 0,e),e.currentTarget=null}function hre(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var s=n.length-1;0<=s;s--){var o=n[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;yW(i,o,c),a=l}else for(s=0;s<n.length;s++){if(o=n[s],l=o.instance,c=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;yW(i,o,c),a=l}}}if(sA)throw e=HM,sA=!1,HM=null,e}function xi(e,t){var r=t[ZM];r===void 0&&(r=t[ZM]=new Set);var n=e+"__bubble";r.has(n)||(pre(t,e,2,!1),r.add(n))}function WR(e,t,r){var n=0;t&&(n|=4),pre(r,e,n,t)}var Gk="_reactListening"+Math.random().toString(36).slice(2);function eS(e){if(!e[Gk]){e[Gk]=!0,wte.forEach(function(r){r!=="selectionchange"&&(_ke.has(r)||WR(r,!1,e),WR(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Gk]||(t[Gk]=!0,WR("selectionchange",!1,t))}}function pre(e,t,r,n){switch(Qte(t)){case 1:var i=UCe;break;case 4:i=$Ce;break;default:i=HF}r=i.bind(null,t,r,e),i=void 0,!zM||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function VR(e,t,r,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;o!==null;){if(s=Gm(o),s===null)return;if(l=s.tag,l===5||l===6){n=a=s;continue e}o=o.parentNode}}n=n.return}Fte(function(){var c=a,d=BF(r),f=[];e:{var p=fre.get(e);if(p!==void 0){var m=VF,x=e;switch(e){case"keypress":if(CN(r)===0)break e;case"keydown":case"keyup":m=rke;break;case"focusin":x="focus",m=LR;break;case"focusout":x="blur",m=LR;break;case"beforeblur":case"afterblur":m=LR;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=oW;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=WCe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=ake;break;case lre:case cre:case ure:m=GCe;break;case dre:m=oke;break;case"scroll":m=zCe;break;case"wheel":m=cke;break;case"copy":case"cut":case"paste":m=XCe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=cW}var v=(t&4)!==0,b=!v&&e==="scroll",w=v?p!==null?p+"Capture":null:p;v=[];for(var _=c,C;_!==null;){C=_;var N=C.stateNode;if(C.tag===5&&N!==null&&(C=N,w!==null&&(N=K2(_,w),N!=null&&v.push(tS(_,N,C)))),b)break;_=_.return}0<v.length&&(p=new m(p,x,null,r,d),f.push({event:p,listeners:v}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&r!==UM&&(x=r.relatedTarget||r.fromElement)&&(Gm(x)||x[Oh]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(x=r.relatedTarget||r.toElement,m=c,x=x?Gm(x):null,x!==null&&(b=Sx(x),x!==b||x.tag!==5&&x.tag!==6)&&(x=null)):(m=null,x=c),m!==x)){if(v=oW,N="onMouseLeave",w="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(v=cW,N="onPointerLeave",w="onPointerEnter",_="pointer"),b=m==null?p:tv(m),C=x==null?p:tv(x),p=new v(N,_+"leave",m,r,d),p.target=b,p.relatedTarget=C,N=null,Gm(d)===c&&(v=new v(w,_+"enter",x,r,d),v.target=C,v.relatedTarget=b,N=v),b=N,m&&x)t:{for(v=m,w=x,_=0,C=v;C;C=y1(C))_++;for(C=0,N=w;N;N=y1(N))C++;for(;0<_-C;)v=y1(v),_--;for(;0<C-_;)w=y1(w),C--;for(;_--;){if(v===w||w!==null&&v===w.alternate)break t;v=y1(v),w=y1(w)}v=null}else v=null;m!==null&&bW(f,p,m,v,!1),x!==null&&b!==null&&bW(f,b,x,v,!0)}}e:{if(p=c?tv(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var R=gke;else if(fW(p))if(nre)R=bke;else{R=vke;var P=xke}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=yke);if(R&&(R=R(e,c))){rre(f,R,r,d);break e}P&&P(e,p,c),e==="focusout"&&(P=p._wrapperState)&&P.controlled&&p.type==="number"&&DM(p,"number",p.value)}switch(P=c?tv(c):window,e){case"focusin":(fW(P)||P.contentEditable==="true")&&(Z1=P,GM=c,u2=null);break;case"focusout":u2=GM=Z1=null;break;case"mousedown":KM=!0;break;case"contextmenu":case"mouseup":case"dragend":KM=!1,xW(f,r,d);break;case"selectionchange":if(Eke)break;case"keydown":case"keyup":xW(f,r,d)}var O;if(GF)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else J1?ere(e,r)&&(D="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(D="onCompositionStart");D&&(Zte&&r.locale!=="ko"&&(J1||D!=="onCompositionStart"?D==="onCompositionEnd"&&J1&&(O=Jte()):(i0=d,WF="value"in i0?i0.value:i0.textContent,J1=!0)),P=dA(c,D),0<P.length&&(D=new lW(D,e,null,r,d),f.push({event:D,listeners:P}),O?D.data=O:(O=tre(r),O!==null&&(D.data=O)))),(O=dke?fke(e,r):hke(e,r))&&(c=dA(c,"onBeforeInput"),0<c.length&&(d=new lW("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:c}),d.data=O))}hre(f,t)})}function tS(e,t,r){return{instance:e,listener:t,currentTarget:r}}function dA(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=K2(e,r),a!=null&&n.unshift(tS(e,a,i)),a=K2(e,t),a!=null&&n.push(tS(e,a,i))),e=e.return}return n}function y1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function bW(e,t,r,n,i){for(var a=t._reactName,s=[];r!==null&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&c!==null&&(o=c,i?(l=K2(r,a),l!=null&&s.unshift(tS(r,l,o))):i||(l=K2(r,a),l!=null&&s.push(tS(r,l,o)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var Nke=/\r\n?/g,Ake=/\u0000|\uFFFD/g;function wW(e){return(typeof e=="string"?e:""+e).replace(Nke,`
`).replace(Ake,"")}function Kk(e,t,r){if(t=wW(t),wW(e)!==t&&r)throw Error(jt(425))}function fA(){}var XM=null,YM=null;function QM(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var JM=typeof setTimeout=="function"?setTimeout:void 0,Tke=typeof clearTimeout=="function"?clearTimeout:void 0,SW=typeof Promise=="function"?Promise:void 0,Ike=typeof queueMicrotask=="function"?queueMicrotask:typeof SW<"u"?function(e){return SW.resolve(null).then(e).catch(Oke)}:JM;function Oke(e){setTimeout(function(){throw e})}function qR(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),Q2(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Q2(t)}function m0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function EW(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Hy=Math.random().toString(36).slice(2),$d="__reactFiber$"+Hy,rS="__reactProps$"+Hy,Oh="__reactContainer$"+Hy,ZM="__reactEvents$"+Hy,Pke="__reactListeners$"+Hy,Rke="__reactHandles$"+Hy;function Gm(e){var t=e[$d];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Oh]||r[$d]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=EW(e);e!==null;){if(r=e[$d])return r;e=EW(e)}return t}e=r,r=e.parentNode}return null}function xE(e){return e=e[$d]||e[Oh],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function tv(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(jt(33))}function SO(e){return e[rS]||null}var e6=[],rv=-1;function z0(e){return{current:e}}function Ei(e){0>rv||(e.current=e6[rv],e6[rv]=null,rv--)}function mi(e,t){rv++,e6[rv]=e.current,e.current=t}var N0={},mo=z0(N0),pl=z0(!1),Ug=N0;function Xv(e,t){var r=e.type.contextTypes;if(!r)return N0;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ml(e){return e=e.childContextTypes,e!=null}function hA(){Ei(pl),Ei(mo)}function CW(e,t,r){if(mo.current!==N0)throw Error(jt(168));mi(mo,t),mi(pl,r)}function mre(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(jt(108,xCe(e)||"Unknown",i));return Hi({},r,n)}function pA(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||N0,Ug=mo.current,mi(mo,e),mi(pl,pl.current),!0}function kW(e,t,r){var n=e.stateNode;if(!n)throw Error(jt(169));r?(e=mre(e,t,Ug),n.__reactInternalMemoizedMergedChildContext=e,Ei(pl),Ei(mo),mi(mo,e)):Ei(pl),mi(pl,r)}var eh=null,EO=!1,GR=!1;function gre(e){eh===null?eh=[e]:eh.push(e)}function jke(e){EO=!0,gre(e)}function H0(){if(!GR&&eh!==null){GR=!0;var e=0,t=ri;try{var r=eh;for(ri=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}eh=null,EO=!1}catch(i){throw eh!==null&&(eh=eh.slice(e+1)),$te(UF,H0),i}finally{ri=t,GR=!1}}return null}var nv=[],iv=0,mA=null,gA=0,Wc=[],Vc=0,$g=null,lh=1,ch="";function jm(e,t){nv[iv++]=gA,nv[iv++]=mA,mA=e,gA=t}function xre(e,t,r){Wc[Vc++]=lh,Wc[Vc++]=ch,Wc[Vc++]=$g,$g=e;var n=lh;e=ch;var i=32-Zu(n)-1;n&=~(1<<i),r+=1;var a=32-Zu(t)+i;if(30<a){var s=i-i%5;a=(n&(1<<s)-1).toString(32),n>>=s,i-=s,lh=1<<32-Zu(t)+i|r<<i|n,ch=a+e}else lh=1<<a|r<<i|n,ch=e}function XF(e){e.return!==null&&(jm(e,1),xre(e,1,0))}function YF(e){for(;e===mA;)mA=nv[--iv],nv[iv]=null,gA=nv[--iv],nv[iv]=null;for(;e===$g;)$g=Wc[--Vc],Wc[Vc]=null,ch=Wc[--Vc],Wc[Vc]=null,lh=Wc[--Vc],Wc[Vc]=null}var ec=null,Ql=null,ji=!1,$u=null;function vre(e,t){var r=Kc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function _W(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ec=e,Ql=m0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ec=e,Ql=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=$g!==null?{id:lh,overflow:ch}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Kc(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ec=e,Ql=null,!0):!1;default:return!1}}function t6(e){return(e.mode&1)!==0&&(e.flags&128)===0}function r6(e){if(ji){var t=Ql;if(t){var r=t;if(!_W(e,t)){if(t6(e))throw Error(jt(418));t=m0(r.nextSibling);var n=ec;t&&_W(e,t)?vre(n,r):(e.flags=e.flags&-4097|2,ji=!1,ec=e)}}else{if(t6(e))throw Error(jt(418));e.flags=e.flags&-4097|2,ji=!1,ec=e}}}function NW(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ec=e}function Xk(e){if(e!==ec)return!1;if(!ji)return NW(e),ji=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!QM(e.type,e.memoizedProps)),t&&(t=Ql)){if(t6(e))throw yre(),Error(jt(418));for(;t;)vre(e,t),t=m0(t.nextSibling)}if(NW(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(jt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ql=m0(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ql=null}}else Ql=ec?m0(e.stateNode.nextSibling):null;return!0}function yre(){for(var e=Ql;e;)e=m0(e.nextSibling)}function Yv(){Ql=ec=null,ji=!1}function QF(e){$u===null?$u=[e]:$u.push(e)}var Dke=Xh.ReactCurrentBatchConfig;function sw(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(jt(309));var n=r.stateNode}if(!n)throw Error(jt(147,e));var i=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},t._stringRef=a,t)}if(typeof e!="string")throw Error(jt(284));if(!r._owner)throw Error(jt(290,e))}return e}function Yk(e,t){throw e=Object.prototype.toString.call(t),Error(jt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function AW(e){var t=e._init;return t(e._payload)}function bre(e){function t(w,_){if(e){var C=w.deletions;C===null?(w.deletions=[_],w.flags|=16):C.push(_)}}function r(w,_){if(!e)return null;for(;_!==null;)t(w,_),_=_.sibling;return null}function n(w,_){for(w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function i(w,_){return w=y0(w,_),w.index=0,w.sibling=null,w}function a(w,_,C){return w.index=C,e?(C=w.alternate,C!==null?(C=C.index,C<_?(w.flags|=2,_):C):(w.flags|=2,_)):(w.flags|=1048576,_)}function s(w){return e&&w.alternate===null&&(w.flags|=2),w}function o(w,_,C,N){return _===null||_.tag!==6?(_=ej(C,w.mode,N),_.return=w,_):(_=i(_,C),_.return=w,_)}function l(w,_,C,N){var R=C.type;return R===Q1?d(w,_,C.props.children,N,C.key):_!==null&&(_.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Dp&&AW(R)===_.type)?(N=i(_,C.props),N.ref=sw(w,_,C),N.return=w,N):(N=ON(C.type,C.key,C.props,null,w.mode,N),N.ref=sw(w,_,C),N.return=w,N)}function c(w,_,C,N){return _===null||_.tag!==4||_.stateNode.containerInfo!==C.containerInfo||_.stateNode.implementation!==C.implementation?(_=tj(C,w.mode,N),_.return=w,_):(_=i(_,C.children||[]),_.return=w,_)}function d(w,_,C,N,R){return _===null||_.tag!==7?(_=wg(C,w.mode,N,R),_.return=w,_):(_=i(_,C),_.return=w,_)}function f(w,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return _=ej(""+_,w.mode,C),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Bk:return C=ON(_.type,_.key,_.props,null,w.mode,C),C.ref=sw(w,null,_),C.return=w,C;case Y1:return _=tj(_,w.mode,C),_.return=w,_;case Dp:var N=_._init;return f(w,N(_._payload),C)}if(zw(_)||tw(_))return _=wg(_,w.mode,C,null),_.return=w,_;Yk(w,_)}return null}function p(w,_,C,N){var R=_!==null?_.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return R!==null?null:o(w,_,""+C,N);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Bk:return C.key===R?l(w,_,C,N):null;case Y1:return C.key===R?c(w,_,C,N):null;case Dp:return R=C._init,p(w,_,R(C._payload),N)}if(zw(C)||tw(C))return R!==null?null:d(w,_,C,N,null);Yk(w,C)}return null}function m(w,_,C,N,R){if(typeof N=="string"&&N!==""||typeof N=="number")return w=w.get(C)||null,o(_,w,""+N,R);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Bk:return w=w.get(N.key===null?C:N.key)||null,l(_,w,N,R);case Y1:return w=w.get(N.key===null?C:N.key)||null,c(_,w,N,R);case Dp:var P=N._init;return m(w,_,C,P(N._payload),R)}if(zw(N)||tw(N))return w=w.get(C)||null,d(_,w,N,R,null);Yk(_,N)}return null}function x(w,_,C,N){for(var R=null,P=null,O=_,D=_=0,M=null;O!==null&&D<C.length;D++){O.index>D?(M=O,O=null):M=O.sibling;var B=p(w,O,C[D],N);if(B===null){O===null&&(O=M);break}e&&O&&B.alternate===null&&t(w,O),_=a(B,_,D),P===null?R=B:P.sibling=B,P=B,O=M}if(D===C.length)return r(w,O),ji&&jm(w,D),R;if(O===null){for(;D<C.length;D++)O=f(w,C[D],N),O!==null&&(_=a(O,_,D),P===null?R=O:P.sibling=O,P=O);return ji&&jm(w,D),R}for(O=n(w,O);D<C.length;D++)M=m(O,w,D,C[D],N),M!==null&&(e&&M.alternate!==null&&O.delete(M.key===null?D:M.key),_=a(M,_,D),P===null?R=M:P.sibling=M,P=M);return e&&O.forEach(function(U){return t(w,U)}),ji&&jm(w,D),R}function v(w,_,C,N){var R=tw(C);if(typeof R!="function")throw Error(jt(150));if(C=R.call(C),C==null)throw Error(jt(151));for(var P=R=null,O=_,D=_=0,M=null,B=C.next();O!==null&&!B.done;D++,B=C.next()){O.index>D?(M=O,O=null):M=O.sibling;var U=p(w,O,B.value,N);if(U===null){O===null&&(O=M);break}e&&O&&U.alternate===null&&t(w,O),_=a(U,_,D),P===null?R=U:P.sibling=U,P=U,O=M}if(B.done)return r(w,O),ji&&jm(w,D),R;if(O===null){for(;!B.done;D++,B=C.next())B=f(w,B.value,N),B!==null&&(_=a(B,_,D),P===null?R=B:P.sibling=B,P=B);return ji&&jm(w,D),R}for(O=n(w,O);!B.done;D++,B=C.next())B=m(O,w,D,B.value,N),B!==null&&(e&&B.alternate!==null&&O.delete(B.key===null?D:B.key),_=a(B,_,D),P===null?R=B:P.sibling=B,P=B);return e&&O.forEach(function(H){return t(w,H)}),ji&&jm(w,D),R}function b(w,_,C,N){if(typeof C=="object"&&C!==null&&C.type===Q1&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Bk:e:{for(var R=C.key,P=_;P!==null;){if(P.key===R){if(R=C.type,R===Q1){if(P.tag===7){r(w,P.sibling),_=i(P,C.props.children),_.return=w,w=_;break e}}else if(P.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Dp&&AW(R)===P.type){r(w,P.sibling),_=i(P,C.props),_.ref=sw(w,P,C),_.return=w,w=_;break e}r(w,P);break}else t(w,P);P=P.sibling}C.type===Q1?(_=wg(C.props.children,w.mode,N,C.key),_.return=w,w=_):(N=ON(C.type,C.key,C.props,null,w.mode,N),N.ref=sw(w,_,C),N.return=w,w=N)}return s(w);case Y1:e:{for(P=C.key;_!==null;){if(_.key===P)if(_.tag===4&&_.stateNode.containerInfo===C.containerInfo&&_.stateNode.implementation===C.implementation){r(w,_.sibling),_=i(_,C.children||[]),_.return=w,w=_;break e}else{r(w,_);break}else t(w,_);_=_.sibling}_=tj(C,w.mode,N),_.return=w,w=_}return s(w);case Dp:return P=C._init,b(w,_,P(C._payload),N)}if(zw(C))return x(w,_,C,N);if(tw(C))return v(w,_,C,N);Yk(w,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,_!==null&&_.tag===6?(r(w,_.sibling),_=i(_,C),_.return=w,w=_):(r(w,_),_=ej(C,w.mode,N),_.return=w,w=_),s(w)):r(w,_)}return b}var Qv=bre(!0),wre=bre(!1),xA=z0(null),vA=null,av=null,JF=null;function ZF(){JF=av=vA=null}function eL(e){var t=xA.current;Ei(xA),e._currentValue=t}function n6(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function vv(e,t){vA=e,JF=av=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(dl=!0),e.firstContext=null)}function au(e){var t=e._currentValue;if(JF!==e)if(e={context:e,memoizedValue:t,next:null},av===null){if(vA===null)throw Error(jt(308));av=e,vA.dependencies={lanes:0,firstContext:e}}else av=av.next=e;return t}var Km=null;function tL(e){Km===null?Km=[e]:Km.push(e)}function Sre(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,tL(t)):(r.next=i.next,i.next=r),t.interleaved=r,Ph(e,n)}function Ph(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Mp=!1;function rL(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ere(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mh(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function g0(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,On&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Ph(e,r)}return i=n.interleaved,i===null?(t.next=t,tL(n)):(t.next=i.next,i.next=t),n.interleaved=t,Ph(e,r)}function kN(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,$F(e,r)}}function TW(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=s:a=a.next=s,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function yA(e,t,r,n){var i=e.updateQueue;Mp=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,s===null?a=c:s.next=c,s=l;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==s&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(a!==null){var f=i.baseState;s=0,d=c=l=null,o=a;do{var p=o.lane,m=o.eventTime;if((n&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var x=e,v=o;switch(p=t,m=r,v.tag){case 1:if(x=v.payload,typeof x=="function"){f=x.call(m,f,p);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=v.payload,p=typeof x=="function"?x.call(m,f,p):x,p==null)break e;f=Hi({},f,p);break e;case 2:Mp=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,p=i.effects,p===null?i.effects=[o]:p.push(o))}else m={eventTime:m,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=m,l=f):d=d.next=m,s|=p;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;p=o,o=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Hg|=s,e.lanes=s,e.memoizedState=f}}function IW(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(jt(191,i));i.call(n)}}}var vE={},Yd=z0(vE),nS=z0(vE),iS=z0(vE);function Xm(e){if(e===vE)throw Error(jt(174));return e}function nL(e,t){switch(mi(iS,t),mi(nS,e),mi(Yd,vE),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:FM(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=FM(t,e)}Ei(Yd),mi(Yd,t)}function Jv(){Ei(Yd),Ei(nS),Ei(iS)}function Cre(e){Xm(iS.current);var t=Xm(Yd.current),r=FM(t,e.type);t!==r&&(mi(nS,e),mi(Yd,r))}function iL(e){nS.current===e&&(Ei(Yd),Ei(nS))}var Bi=z0(0);function bA(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var KR=[];function aL(){for(var e=0;e<KR.length;e++)KR[e]._workInProgressVersionPrimary=null;KR.length=0}var _N=Xh.ReactCurrentDispatcher,XR=Xh.ReactCurrentBatchConfig,zg=0,zi=null,Ba=null,ls=null,wA=!1,d2=!1,aS=0,Mke=0;function Gs(){throw Error(jt(321))}function sL(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ad(e[r],t[r]))return!1;return!0}function oL(e,t,r,n,i,a){if(zg=a,zi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_N.current=e===null||e.memoizedState===null?Uke:$ke,e=r(n,i),d2){a=0;do{if(d2=!1,aS=0,25<=a)throw Error(jt(301));a+=1,ls=Ba=null,t.updateQueue=null,_N.current=zke,e=r(n,i)}while(d2)}if(_N.current=SA,t=Ba!==null&&Ba.next!==null,zg=0,ls=Ba=zi=null,wA=!1,t)throw Error(jt(300));return e}function lL(){var e=aS!==0;return aS=0,e}function Ad(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ls===null?zi.memoizedState=ls=e:ls=ls.next=e,ls}function su(){if(Ba===null){var e=zi.alternate;e=e!==null?e.memoizedState:null}else e=Ba.next;var t=ls===null?zi.memoizedState:ls.next;if(t!==null)ls=t,Ba=e;else{if(e===null)throw Error(jt(310));Ba=e,e={memoizedState:Ba.memoizedState,baseState:Ba.baseState,baseQueue:Ba.baseQueue,queue:Ba.queue,next:null},ls===null?zi.memoizedState=ls=e:ls=ls.next=e}return ls}function sS(e,t){return typeof t=="function"?t(e):t}function YR(e){var t=su(),r=t.queue;if(r===null)throw Error(jt(311));r.lastRenderedReducer=e;var n=Ba,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var o=s=null,l=null,c=a;do{var d=c.lane;if((zg&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=f,s=n):l=l.next=f,zi.lanes|=d,Hg|=d}c=c.next}while(c!==null&&c!==a);l===null?s=n:l.next=o,ad(n,t.memoizedState)||(dl=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do a=i.lane,zi.lanes|=a,Hg|=a,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function QR(e){var t=su(),r=t.queue;if(r===null)throw Error(jt(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do a=e(a,s.action),s=s.next;while(s!==i);ad(a,t.memoizedState)||(dl=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function kre(){}function _re(e,t){var r=zi,n=su(),i=t(),a=!ad(n.memoizedState,i);if(a&&(n.memoizedState=i,dl=!0),n=n.queue,cL(Tre.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||ls!==null&&ls.memoizedState.tag&1){if(r.flags|=2048,oS(9,Are.bind(null,r,n,i,t),void 0,null),ms===null)throw Error(jt(349));zg&30||Nre(r,t,i)}return i}function Nre(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=zi.updateQueue,t===null?(t={lastEffect:null,stores:null},zi.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Are(e,t,r,n){t.value=r,t.getSnapshot=n,Ire(t)&&Ore(e)}function Tre(e,t,r){return r(function(){Ire(t)&&Ore(e)})}function Ire(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ad(e,r)}catch{return!0}}function Ore(e){var t=Ph(e,1);t!==null&&ed(t,e,1,-1)}function OW(e){var t=Ad();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sS,lastRenderedState:e},t.queue=e,e=e.dispatch=Bke.bind(null,zi,e),[t.memoizedState,e]}function oS(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=zi.updateQueue,t===null?(t={lastEffect:null,stores:null},zi.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Pre(){return su().memoizedState}function NN(e,t,r,n){var i=Ad();zi.flags|=e,i.memoizedState=oS(1|t,r,void 0,n===void 0?null:n)}function CO(e,t,r,n){var i=su();n=n===void 0?null:n;var a=void 0;if(Ba!==null){var s=Ba.memoizedState;if(a=s.destroy,n!==null&&sL(n,s.deps)){i.memoizedState=oS(t,r,a,n);return}}zi.flags|=e,i.memoizedState=oS(1|t,r,a,n)}function PW(e,t){return NN(8390656,8,e,t)}function cL(e,t){return CO(2048,8,e,t)}function Rre(e,t){return CO(4,2,e,t)}function jre(e,t){return CO(4,4,e,t)}function Dre(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Mre(e,t,r){return r=r!=null?r.concat([e]):null,CO(4,4,Dre.bind(null,t,e),r)}function uL(){}function Fre(e,t){var r=su();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&sL(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Lre(e,t){var r=su();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&sL(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Bre(e,t,r){return zg&21?(ad(r,t)||(r=Wte(),zi.lanes|=r,Hg|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,dl=!0),e.memoizedState=r)}function Fke(e,t){var r=ri;ri=r!==0&&4>r?r:4,e(!0);var n=XR.transition;XR.transition={};try{e(!1),t()}finally{ri=r,XR.transition=n}}function Ure(){return su().memoizedState}function Lke(e,t,r){var n=v0(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},$re(e))zre(t,r);else if(r=Sre(e,t,r,n),r!==null){var i=zo();ed(r,e,n,i),Hre(r,t,n)}}function Bke(e,t,r){var n=v0(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if($re(e))zre(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,o=a(s,r);if(i.hasEagerState=!0,i.eagerState=o,ad(o,s)){var l=t.interleaved;l===null?(i.next=i,tL(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}r=Sre(e,t,i,n),r!==null&&(i=zo(),ed(r,e,n,i),Hre(r,t,n))}}function $re(e){var t=e.alternate;return e===zi||t!==null&&t===zi}function zre(e,t){d2=wA=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Hre(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,$F(e,r)}}var SA={readContext:au,useCallback:Gs,useContext:Gs,useEffect:Gs,useImperativeHandle:Gs,useInsertionEffect:Gs,useLayoutEffect:Gs,useMemo:Gs,useReducer:Gs,useRef:Gs,useState:Gs,useDebugValue:Gs,useDeferredValue:Gs,useTransition:Gs,useMutableSource:Gs,useSyncExternalStore:Gs,useId:Gs,unstable_isNewReconciler:!1},Uke={readContext:au,useCallback:function(e,t){return Ad().memoizedState=[e,t===void 0?null:t],e},useContext:au,useEffect:PW,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,NN(4194308,4,Dre.bind(null,t,e),r)},useLayoutEffect:function(e,t){return NN(4194308,4,e,t)},useInsertionEffect:function(e,t){return NN(4,2,e,t)},useMemo:function(e,t){var r=Ad();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ad();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Lke.bind(null,zi,e),[n.memoizedState,e]},useRef:function(e){var t=Ad();return e={current:e},t.memoizedState=e},useState:OW,useDebugValue:uL,useDeferredValue:function(e){return Ad().memoizedState=e},useTransition:function(){var e=OW(!1),t=e[0];return e=Fke.bind(null,e[1]),Ad().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=zi,i=Ad();if(ji){if(r===void 0)throw Error(jt(407));r=r()}else{if(r=t(),ms===null)throw Error(jt(349));zg&30||Nre(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,PW(Tre.bind(null,n,a,e),[e]),n.flags|=2048,oS(9,Are.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=Ad(),t=ms.identifierPrefix;if(ji){var r=ch,n=lh;r=(n&~(1<<32-Zu(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=aS++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Mke++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$ke={readContext:au,useCallback:Fre,useContext:au,useEffect:cL,useImperativeHandle:Mre,useInsertionEffect:Rre,useLayoutEffect:jre,useMemo:Lre,useReducer:YR,useRef:Pre,useState:function(){return YR(sS)},useDebugValue:uL,useDeferredValue:function(e){var t=su();return Bre(t,Ba.memoizedState,e)},useTransition:function(){var e=YR(sS)[0],t=su().memoizedState;return[e,t]},useMutableSource:kre,useSyncExternalStore:_re,useId:Ure,unstable_isNewReconciler:!1},zke={readContext:au,useCallback:Fre,useContext:au,useEffect:cL,useImperativeHandle:Mre,useInsertionEffect:Rre,useLayoutEffect:jre,useMemo:Lre,useReducer:QR,useRef:Pre,useState:function(){return QR(sS)},useDebugValue:uL,useDeferredValue:function(e){var t=su();return Ba===null?t.memoizedState=e:Bre(t,Ba.memoizedState,e)},useTransition:function(){var e=QR(sS)[0],t=su().memoizedState;return[e,t]},useMutableSource:kre,useSyncExternalStore:_re,useId:Ure,unstable_isNewReconciler:!1};function Mu(e,t){if(e&&e.defaultProps){t=Hi({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function i6(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Hi({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var kO={isMounted:function(e){return(e=e._reactInternals)?Sx(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=zo(),i=v0(e),a=mh(n,i);a.payload=t,r!=null&&(a.callback=r),t=g0(e,a,i),t!==null&&(ed(t,e,i,n),kN(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=zo(),i=v0(e),a=mh(n,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=g0(e,a,i),t!==null&&(ed(t,e,i,n),kN(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=zo(),n=v0(e),i=mh(r,n);i.tag=2,t!=null&&(i.callback=t),t=g0(e,i,n),t!==null&&(ed(t,e,n,r),kN(t,e,n))}};function RW(e,t,r,n,i,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,s):t.prototype&&t.prototype.isPureReactComponent?!Z2(r,n)||!Z2(i,a):!0}function Wre(e,t,r){var n=!1,i=N0,a=t.contextType;return typeof a=="object"&&a!==null?a=au(a):(i=ml(t)?Ug:mo.current,n=t.contextTypes,a=(n=n!=null)?Xv(e,i):N0),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=kO,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function jW(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&kO.enqueueReplaceState(t,t.state,null)}function a6(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},rL(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=au(a):(a=ml(t)?Ug:mo.current,i.context=Xv(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(i6(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&kO.enqueueReplaceState(i,i.state,null),yA(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Zv(e,t){try{var r="",n=t;do r+=gCe(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function JR(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function s6(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Hke=typeof WeakMap=="function"?WeakMap:Map;function Vre(e,t,r){r=mh(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){CA||(CA=!0,g6=n),s6(e,t)},r}function qre(e,t,r){r=mh(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){s6(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){s6(e,t),typeof n!="function"&&(x0===null?x0=new Set([this]):x0.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function DW(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Hke;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=n_e.bind(null,e,t,r),t.then(e,e))}function MW(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function FW(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=mh(-1,1),t.tag=2,g0(r,t,1))),r.lanes|=1),e)}var Wke=Xh.ReactCurrentOwner,dl=!1;function Po(e,t,r,n){t.child=e===null?wre(t,null,r,n):Qv(t,e.child,r,n)}function LW(e,t,r,n,i){r=r.render;var a=t.ref;return vv(t,i),n=oL(e,t,r,n,a,i),r=lL(),e!==null&&!dl?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Rh(e,t,i)):(ji&&r&&XF(t),t.flags|=1,Po(e,t,n,i),t.child)}function BW(e,t,r,n,i){if(e===null){var a=r.type;return typeof a=="function"&&!vL(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Gre(e,t,a,n,i)):(e=ON(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var s=a.memoizedProps;if(r=r.compare,r=r!==null?r:Z2,r(s,n)&&e.ref===t.ref)return Rh(e,t,i)}return t.flags|=1,e=y0(a,n),e.ref=t.ref,e.return=t,t.child=e}function Gre(e,t,r,n,i){if(e!==null){var a=e.memoizedProps;if(Z2(a,n)&&e.ref===t.ref)if(dl=!1,t.pendingProps=n=a,(e.lanes&i)!==0)e.flags&131072&&(dl=!0);else return t.lanes=e.lanes,Rh(e,t,i)}return o6(e,t,r,n,i)}function Kre(e,t,r){var n=t.pendingProps,i=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},mi(ov,Hl),Hl|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,mi(ov,Hl),Hl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,mi(ov,Hl),Hl|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,mi(ov,Hl),Hl|=n;return Po(e,t,i,r),t.child}function Xre(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function o6(e,t,r,n,i){var a=ml(r)?Ug:mo.current;return a=Xv(t,a),vv(t,i),r=oL(e,t,r,n,a,i),n=lL(),e!==null&&!dl?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Rh(e,t,i)):(ji&&n&&XF(t),t.flags|=1,Po(e,t,r,i),t.child)}function UW(e,t,r,n,i){if(ml(r)){var a=!0;pA(t)}else a=!1;if(vv(t,i),t.stateNode===null)AN(e,t),Wre(t,r,n),a6(t,r,n,i),n=!0;else if(e===null){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=r.contextType;typeof c=="object"&&c!==null?c=au(c):(c=ml(r)?Ug:mo.current,c=Xv(t,c));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==n||l!==c)&&jW(t,s,n,c),Mp=!1;var p=t.memoizedState;s.state=p,yA(t,n,s,i),l=t.memoizedState,o!==n||p!==l||pl.current||Mp?(typeof d=="function"&&(i6(t,r,d,n),l=t.memoizedState),(o=Mp||RW(t,r,o,n,p,l,c))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),s.props=n,s.state=l,s.context=c,n=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,Ere(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:Mu(t.type,o),s.props=c,f=t.pendingProps,p=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=au(l):(l=ml(r)?Ug:mo.current,l=Xv(t,l));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||p!==l)&&jW(t,s,n,l),Mp=!1,p=t.memoizedState,s.state=p,yA(t,n,s,i);var x=t.memoizedState;o!==f||p!==x||pl.current||Mp?(typeof m=="function"&&(i6(t,r,m,n),x=t.memoizedState),(c=Mp||RW(t,r,c,n,p,x,l)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,x,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,x,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=x),s.props=n,s.state=x,s.context=l,n=c):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return l6(e,t,r,n,a,i)}function l6(e,t,r,n,i,a){Xre(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return i&&kW(t,r,!1),Rh(e,t,a);n=t.stateNode,Wke.current=t;var o=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=Qv(t,e.child,null,a),t.child=Qv(t,null,o,a)):Po(e,t,o,a),t.memoizedState=n.state,i&&kW(t,r,!0),t.child}function Yre(e){var t=e.stateNode;t.pendingContext?CW(e,t.pendingContext,t.pendingContext!==t.context):t.context&&CW(e,t.context,!1),nL(e,t.containerInfo)}function $W(e,t,r,n,i){return Yv(),QF(i),t.flags|=256,Po(e,t,r,n),t.child}var c6={dehydrated:null,treeContext:null,retryLane:0};function u6(e){return{baseLanes:e,cachePool:null,transitions:null}}function Qre(e,t,r){var n=t.pendingProps,i=Bi.current,a=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),mi(Bi,i&1),e===null)return r6(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,a?(n=t.mode,a=t.child,s={mode:"hidden",children:s},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=AO(s,n,0,null),e=wg(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=u6(r),t.memoizedState=c6,e):dL(t,s));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Vke(e,t,s,n,o,i,r);if(a){a=n.fallback,s=t.mode,i=e.child,o=i.sibling;var l={mode:"hidden",children:n.children};return!(s&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=y0(i,l),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=y0(o,a):(a=wg(a,s,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,s=e.child.memoizedState,s=s===null?u6(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~r,t.memoizedState=c6,n}return a=e.child,e=a.sibling,n=y0(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function dL(e,t){return t=AO({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Qk(e,t,r,n){return n!==null&&QF(n),Qv(t,e.child,null,r),e=dL(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Vke(e,t,r,n,i,a,s){if(r)return t.flags&256?(t.flags&=-257,n=JR(Error(jt(422))),Qk(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=AO({mode:"visible",children:n.children},i,0,null),a=wg(a,i,s,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Qv(t,e.child,null,s),t.child.memoizedState=u6(s),t.memoizedState=c6,a);if(!(t.mode&1))return Qk(e,t,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,a=Error(jt(419)),n=JR(a,n,void 0),Qk(e,t,s,n)}if(o=(s&e.childLanes)!==0,dl||o){if(n=ms,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Ph(e,i),ed(n,e,i,-1))}return xL(),n=JR(Error(jt(421))),Qk(e,t,s,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=i_e.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Ql=m0(i.nextSibling),ec=t,ji=!0,$u=null,e!==null&&(Wc[Vc++]=lh,Wc[Vc++]=ch,Wc[Vc++]=$g,lh=e.id,ch=e.overflow,$g=t),t=dL(t,n.children),t.flags|=4096,t)}function zW(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),n6(e.return,t,r)}function ZR(e,t,r,n,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function Jre(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(Po(e,t,n.children,r),n=Bi.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zW(e,r,t);else if(e.tag===19)zW(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(mi(Bi,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&bA(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),ZR(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&bA(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}ZR(t,!0,r,null,a);break;case"together":ZR(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function AN(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Rh(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Hg|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(jt(153));if(t.child!==null){for(e=t.child,r=y0(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=y0(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function qke(e,t,r){switch(t.tag){case 3:Yre(t),Yv();break;case 5:Cre(t);break;case 1:ml(t.type)&&pA(t);break;case 4:nL(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;mi(xA,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(mi(Bi,Bi.current&1),t.flags|=128,null):r&t.child.childLanes?Qre(e,t,r):(mi(Bi,Bi.current&1),e=Rh(e,t,r),e!==null?e.sibling:null);mi(Bi,Bi.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Jre(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),mi(Bi,Bi.current),n)break;return null;case 22:case 23:return t.lanes=0,Kre(e,t,r)}return Rh(e,t,r)}var Zre,d6,ene,tne;Zre=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};d6=function(){};ene=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Xm(Yd.current);var a=null;switch(r){case"input":i=RM(e,i),n=RM(e,n),a=[];break;case"select":i=Hi({},i,{value:void 0}),n=Hi({},n,{value:void 0}),a=[];break;case"textarea":i=MM(e,i),n=MM(e,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=fA)}LM(r,n);var s;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var o=i[c];for(s in o)o.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(q2.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in n){var l=n[c];if(o=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(a||(a=[]),a.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(q2.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&xi("scroll",e),a||o===l||(a=[])):(a=a||[]).push(c,l))}r&&(a=a||[]).push("style",r);var c=a;(t.updateQueue=c)&&(t.flags|=4)}};tne=function(e,t,r,n){r!==n&&(t.flags|=4)};function ow(e,t){if(!ji)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ks(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Gke(e,t,r){var n=t.pendingProps;switch(YF(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:return ml(t.type)&&hA(),Ks(t),null;case 3:return n=t.stateNode,Jv(),Ei(pl),Ei(mo),aL(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Xk(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,$u!==null&&(y6($u),$u=null))),d6(e,t),Ks(t),null;case 5:iL(t);var i=Xm(iS.current);if(r=t.type,e!==null&&t.stateNode!=null)ene(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(jt(166));return Ks(t),null}if(e=Xm(Yd.current),Xk(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[$d]=t,n[rS]=a,e=(t.mode&1)!==0,r){case"dialog":xi("cancel",n),xi("close",n);break;case"iframe":case"object":case"embed":xi("load",n);break;case"video":case"audio":for(i=0;i<Ww.length;i++)xi(Ww[i],n);break;case"source":xi("error",n);break;case"img":case"image":case"link":xi("error",n),xi("load",n);break;case"details":xi("toggle",n);break;case"input":QH(n,a),xi("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},xi("invalid",n);break;case"textarea":ZH(n,a),xi("invalid",n)}LM(r,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?n.textContent!==o&&(a.suppressHydrationWarning!==!0&&Kk(n.textContent,o,e),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Kk(n.textContent,o,e),i=["children",""+o]):q2.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&xi("scroll",n)}switch(r){case"input":Uk(n),JH(n,a,!0);break;case"textarea":Uk(n),eW(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=fA)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Tte(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[$d]=t,e[rS]=n,Zre(e,t,!1,!1),t.stateNode=e;e:{switch(s=BM(r,n),r){case"dialog":xi("cancel",e),xi("close",e),i=n;break;case"iframe":case"object":case"embed":xi("load",e),i=n;break;case"video":case"audio":for(i=0;i<Ww.length;i++)xi(Ww[i],e);i=n;break;case"source":xi("error",e),i=n;break;case"img":case"image":case"link":xi("error",e),xi("load",e),i=n;break;case"details":xi("toggle",e),i=n;break;case"input":QH(e,n),i=RM(e,n),xi("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Hi({},n,{value:void 0}),xi("invalid",e);break;case"textarea":ZH(e,n),i=MM(e,n),xi("invalid",e);break;default:i=n}LM(r,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?Pte(e,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ite(e,l)):a==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&G2(e,l):typeof l=="number"&&G2(e,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(q2.hasOwnProperty(a)?l!=null&&a==="onScroll"&&xi("scroll",e):l!=null&&DF(e,a,l,s))}switch(r){case"input":Uk(e),JH(e,n,!1);break;case"textarea":Uk(e),eW(e);break;case"option":n.value!=null&&e.setAttribute("value",""+_0(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?pv(e,!!n.multiple,a,!1):n.defaultValue!=null&&pv(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=fA)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&t.stateNode!=null)tne(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(jt(166));if(r=Xm(iS.current),Xm(Yd.current),Xk(t)){if(n=t.stateNode,r=t.memoizedProps,n[$d]=t,(a=n.nodeValue!==r)&&(e=ec,e!==null))switch(e.tag){case 3:Kk(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Kk(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[$d]=t,t.stateNode=n}return Ks(t),null;case 13:if(Ei(Bi),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ji&&Ql!==null&&t.mode&1&&!(t.flags&128))yre(),Yv(),t.flags|=98560,a=!1;else if(a=Xk(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(jt(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(jt(317));a[$d]=t}else Yv(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ks(t),a=!1}else $u!==null&&(y6($u),$u=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Bi.current&1?Ha===0&&(Ha=3):xL())),t.updateQueue!==null&&(t.flags|=4),Ks(t),null);case 4:return Jv(),d6(e,t),e===null&&eS(t.stateNode.containerInfo),Ks(t),null;case 10:return eL(t.type._context),Ks(t),null;case 17:return ml(t.type)&&hA(),Ks(t),null;case 19:if(Ei(Bi),a=t.memoizedState,a===null)return Ks(t),null;if(n=(t.flags&128)!==0,s=a.rendering,s===null)if(n)ow(a,!1);else{if(Ha!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=bA(e),s!==null){for(t.flags|=128,ow(a,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return mi(Bi,Bi.current&1|2),t.child}e=e.sibling}a.tail!==null&&ma()>ey&&(t.flags|=128,n=!0,ow(a,!1),t.lanes=4194304)}else{if(!n)if(e=bA(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ow(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!ji)return Ks(t),null}else 2*ma()-a.renderingStartTime>ey&&r!==1073741824&&(t.flags|=128,n=!0,ow(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(r=a.last,r!==null?r.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=ma(),t.sibling=null,r=Bi.current,mi(Bi,n?r&1|2:r&1),t):(Ks(t),null);case 22:case 23:return gL(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Hl&1073741824&&(Ks(t),t.subtreeFlags&6&&(t.flags|=8192)):Ks(t),null;case 24:return null;case 25:return null}throw Error(jt(156,t.tag))}function Kke(e,t){switch(YF(t),t.tag){case 1:return ml(t.type)&&hA(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Jv(),Ei(pl),Ei(mo),aL(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return iL(t),null;case 13:if(Ei(Bi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(jt(340));Yv()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ei(Bi),null;case 4:return Jv(),null;case 10:return eL(t.type._context),null;case 22:case 23:return gL(),null;case 24:return null;default:return null}}var Jk=!1,ao=!1,Xke=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function sv(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Zi(e,t,n)}else r.current=null}function f6(e,t,r){try{r()}catch(n){Zi(e,t,n)}}var HW=!1;function Yke(e,t){if(XM=cA,e=sre(),KF(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var s=0,o=-1,l=-1,c=0,d=0,f=e,p=null;t:for(;;){for(var m;f!==r||i!==0&&f.nodeType!==3||(o=s+i),f!==a||n!==0&&f.nodeType!==3||(l=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break t;if(p===r&&++c===i&&(o=s),p===a&&++d===n&&(l=s),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(YM={focusedElem:e,selectionRange:r},cA=!1,Yt=t;Yt!==null;)if(t=Yt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Yt=e;else for(;Yt!==null;){t=Yt;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var v=x.memoizedProps,b=x.memoizedState,w=t.stateNode,_=w.getSnapshotBeforeUpdate(t.elementType===t.type?v:Mu(t.type,v),b);w.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var C=t.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(jt(163))}}catch(N){Zi(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,Yt=e;break}Yt=t.return}return x=HW,HW=!1,x}function f2(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&f6(t,r,a)}i=i.next}while(i!==n)}}function _O(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function h6(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function rne(e){var t=e.alternate;t!==null&&(e.alternate=null,rne(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[$d],delete t[rS],delete t[ZM],delete t[Pke],delete t[Rke])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function nne(e){return e.tag===5||e.tag===3||e.tag===4}function WW(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||nne(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function p6(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=fA));else if(n!==4&&(e=e.child,e!==null))for(p6(e,t,r),e=e.sibling;e!==null;)p6(e,t,r),e=e.sibling}function m6(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(m6(e,t,r),e=e.sibling;e!==null;)m6(e,t,r),e=e.sibling}var As=null,Bu=!1;function wp(e,t,r){for(r=r.child;r!==null;)ine(e,t,r),r=r.sibling}function ine(e,t,r){if(Xd&&typeof Xd.onCommitFiberUnmount=="function")try{Xd.onCommitFiberUnmount(vO,r)}catch{}switch(r.tag){case 5:ao||sv(r,t);case 6:var n=As,i=Bu;As=null,wp(e,t,r),As=n,Bu=i,As!==null&&(Bu?(e=As,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):As.removeChild(r.stateNode));break;case 18:As!==null&&(Bu?(e=As,r=r.stateNode,e.nodeType===8?qR(e.parentNode,r):e.nodeType===1&&qR(e,r),Q2(e)):qR(As,r.stateNode));break;case 4:n=As,i=Bu,As=r.stateNode.containerInfo,Bu=!0,wp(e,t,r),As=n,Bu=i;break;case 0:case 11:case 14:case 15:if(!ao&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&f6(r,t,s),i=i.next}while(i!==n)}wp(e,t,r);break;case 1:if(!ao&&(sv(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Zi(r,t,o)}wp(e,t,r);break;case 21:wp(e,t,r);break;case 22:r.mode&1?(ao=(n=ao)||r.memoizedState!==null,wp(e,t,r),ao=n):wp(e,t,r);break;default:wp(e,t,r)}}function VW(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Xke),t.forEach(function(n){var i=a_e.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Tu(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,s=t,o=s;e:for(;o!==null;){switch(o.tag){case 5:As=o.stateNode,Bu=!1;break e;case 3:As=o.stateNode.containerInfo,Bu=!0;break e;case 4:As=o.stateNode.containerInfo,Bu=!0;break e}o=o.return}if(As===null)throw Error(jt(160));ine(a,s,i),As=null,Bu=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Zi(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ane(t,e),t=t.sibling}function ane(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Tu(t,e),wd(e),n&4){try{f2(3,e,e.return),_O(3,e)}catch(v){Zi(e,e.return,v)}try{f2(5,e,e.return)}catch(v){Zi(e,e.return,v)}}break;case 1:Tu(t,e),wd(e),n&512&&r!==null&&sv(r,r.return);break;case 5:if(Tu(t,e),wd(e),n&512&&r!==null&&sv(r,r.return),e.flags&32){var i=e.stateNode;try{G2(i,"")}catch(v){Zi(e,e.return,v)}}if(n&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,s=r!==null?r.memoizedProps:a,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&Nte(i,a),BM(o,s);var c=BM(o,a);for(s=0;s<l.length;s+=2){var d=l[s],f=l[s+1];d==="style"?Pte(i,f):d==="dangerouslySetInnerHTML"?Ite(i,f):d==="children"?G2(i,f):DF(i,d,f,c)}switch(o){case"input":jM(i,a);break;case"textarea":Ate(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?pv(i,!!a.multiple,m,!1):p!==!!a.multiple&&(a.defaultValue!=null?pv(i,!!a.multiple,a.defaultValue,!0):pv(i,!!a.multiple,a.multiple?[]:"",!1))}i[rS]=a}catch(v){Zi(e,e.return,v)}}break;case 6:if(Tu(t,e),wd(e),n&4){if(e.stateNode===null)throw Error(jt(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(v){Zi(e,e.return,v)}}break;case 3:if(Tu(t,e),wd(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Q2(t.containerInfo)}catch(v){Zi(e,e.return,v)}break;case 4:Tu(t,e),wd(e);break;case 13:Tu(t,e),wd(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(pL=ma())),n&4&&VW(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(ao=(c=ao)||d,Tu(t,e),ao=c):Tu(t,e),wd(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(Yt=e,d=e.child;d!==null;){for(f=Yt=d;Yt!==null;){switch(p=Yt,m=p.child,p.tag){case 0:case 11:case 14:case 15:f2(4,p,p.return);break;case 1:sv(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(v){Zi(n,r,v)}}break;case 5:sv(p,p.return);break;case 22:if(p.memoizedState!==null){GW(f);continue}}m!==null?(m.return=p,Yt=m):GW(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=Ote("display",s))}catch(v){Zi(e,e.return,v)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){Zi(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Tu(t,e),wd(e),n&4&&VW(e);break;case 21:break;default:Tu(t,e),wd(e)}}function wd(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(nne(r)){var n=r;break e}r=r.return}throw Error(jt(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(G2(i,""),n.flags&=-33);var a=WW(e);m6(e,a,i);break;case 3:case 4:var s=n.stateNode.containerInfo,o=WW(e);p6(e,o,s);break;default:throw Error(jt(161))}}catch(l){Zi(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Qke(e,t,r){Yt=e,sne(e)}function sne(e,t,r){for(var n=(e.mode&1)!==0;Yt!==null;){var i=Yt,a=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||Jk;if(!s){var o=i.alternate,l=o!==null&&o.memoizedState!==null||ao;o=Jk;var c=ao;if(Jk=s,(ao=l)&&!c)for(Yt=i;Yt!==null;)s=Yt,l=s.child,s.tag===22&&s.memoizedState!==null?KW(i):l!==null?(l.return=s,Yt=l):KW(i);for(;a!==null;)Yt=a,sne(a),a=a.sibling;Yt=i,Jk=o,ao=c}qW(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Yt=a):qW(e)}}function qW(e){for(;Yt!==null;){var t=Yt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ao||_O(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ao)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Mu(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&IW(t,a,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}IW(t,s,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Q2(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(jt(163))}ao||t.flags&512&&h6(t)}catch(p){Zi(t,t.return,p)}}if(t===e){Yt=null;break}if(r=t.sibling,r!==null){r.return=t.return,Yt=r;break}Yt=t.return}}function GW(e){for(;Yt!==null;){var t=Yt;if(t===e){Yt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Yt=r;break}Yt=t.return}}function KW(e){for(;Yt!==null;){var t=Yt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{_O(4,t)}catch(l){Zi(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(l){Zi(t,i,l)}}var a=t.return;try{h6(t)}catch(l){Zi(t,a,l)}break;case 5:var s=t.return;try{h6(t)}catch(l){Zi(t,s,l)}}}catch(l){Zi(t,t.return,l)}if(t===e){Yt=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Yt=o;break}Yt=t.return}}var Jke=Math.ceil,EA=Xh.ReactCurrentDispatcher,fL=Xh.ReactCurrentOwner,Qc=Xh.ReactCurrentBatchConfig,On=0,ms=null,Ta=null,Fs=0,Hl=0,ov=z0(0),Ha=0,lS=null,Hg=0,NO=0,hL=0,h2=null,cl=null,pL=0,ey=1/0,Jf=null,CA=!1,g6=null,x0=null,Zk=!1,a0=null,kA=0,p2=0,x6=null,TN=-1,IN=0;function zo(){return On&6?ma():TN!==-1?TN:TN=ma()}function v0(e){return e.mode&1?On&2&&Fs!==0?Fs&-Fs:Dke.transition!==null?(IN===0&&(IN=Wte()),IN):(e=ri,e!==0||(e=window.event,e=e===void 0?16:Qte(e.type)),e):1}function ed(e,t,r,n){if(50<p2)throw p2=0,x6=null,Error(jt(185));mE(e,r,n),(!(On&2)||e!==ms)&&(e===ms&&(!(On&2)&&(NO|=r),Ha===4&&Wp(e,Fs)),gl(e,n),r===1&&On===0&&!(t.mode&1)&&(ey=ma()+500,EO&&H0()))}function gl(e,t){var r=e.callbackNode;DCe(e,t);var n=lA(e,e===ms?Fs:0);if(n===0)r!==null&&nW(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&nW(r),t===1)e.tag===0?jke(XW.bind(null,e)):gre(XW.bind(null,e)),Ike(function(){!(On&6)&&H0()}),r=null;else{switch(Vte(n)){case 1:r=UF;break;case 4:r=zte;break;case 16:r=oA;break;case 536870912:r=Hte;break;default:r=oA}r=pne(r,one.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function one(e,t){if(TN=-1,IN=0,On&6)throw Error(jt(327));var r=e.callbackNode;if(yv()&&e.callbackNode!==r)return null;var n=lA(e,e===ms?Fs:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=_A(e,n);else{t=n;var i=On;On|=2;var a=cne();(ms!==e||Fs!==t)&&(Jf=null,ey=ma()+500,bg(e,t));do try{t_e();break}catch(o){lne(e,o)}while(!0);ZF(),EA.current=a,On=i,Ta!==null?t=0:(ms=null,Fs=0,t=Ha)}if(t!==0){if(t===2&&(i=WM(e),i!==0&&(n=i,t=v6(e,i))),t===1)throw r=lS,bg(e,0),Wp(e,n),gl(e,ma()),r;if(t===6)Wp(e,n);else{if(i=e.current.alternate,!(n&30)&&!Zke(i)&&(t=_A(e,n),t===2&&(a=WM(e),a!==0&&(n=a,t=v6(e,a))),t===1))throw r=lS,bg(e,0),Wp(e,n),gl(e,ma()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(jt(345));case 2:Dm(e,cl,Jf);break;case 3:if(Wp(e,n),(n&130023424)===n&&(t=pL+500-ma(),10<t)){if(lA(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){zo(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=JM(Dm.bind(null,e,cl,Jf),t);break}Dm(e,cl,Jf);break;case 4:if(Wp(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var s=31-Zu(n);a=1<<s,s=t[s],s>i&&(i=s),n&=~a}if(n=i,n=ma()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Jke(n/1960))-n,10<n){e.timeoutHandle=JM(Dm.bind(null,e,cl,Jf),n);break}Dm(e,cl,Jf);break;case 5:Dm(e,cl,Jf);break;default:throw Error(jt(329))}}}return gl(e,ma()),e.callbackNode===r?one.bind(null,e):null}function v6(e,t){var r=h2;return e.current.memoizedState.isDehydrated&&(bg(e,t).flags|=256),e=_A(e,t),e!==2&&(t=cl,cl=r,t!==null&&y6(t)),e}function y6(e){cl===null?cl=e:cl.push.apply(cl,e)}function Zke(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!ad(a(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wp(e,t){for(t&=~hL,t&=~NO,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Zu(t),n=1<<r;e[r]=-1,t&=~n}}function XW(e){if(On&6)throw Error(jt(327));yv();var t=lA(e,0);if(!(t&1))return gl(e,ma()),null;var r=_A(e,t);if(e.tag!==0&&r===2){var n=WM(e);n!==0&&(t=n,r=v6(e,n))}if(r===1)throw r=lS,bg(e,0),Wp(e,t),gl(e,ma()),r;if(r===6)throw Error(jt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Dm(e,cl,Jf),gl(e,ma()),null}function mL(e,t){var r=On;On|=1;try{return e(t)}finally{On=r,On===0&&(ey=ma()+500,EO&&H0())}}function Wg(e){a0!==null&&a0.tag===0&&!(On&6)&&yv();var t=On;On|=1;var r=Qc.transition,n=ri;try{if(Qc.transition=null,ri=1,e)return e()}finally{ri=n,Qc.transition=r,On=t,!(On&6)&&H0()}}function gL(){Hl=ov.current,Ei(ov)}function bg(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Tke(r)),Ta!==null)for(r=Ta.return;r!==null;){var n=r;switch(YF(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&hA();break;case 3:Jv(),Ei(pl),Ei(mo),aL();break;case 5:iL(n);break;case 4:Jv();break;case 13:Ei(Bi);break;case 19:Ei(Bi);break;case 10:eL(n.type._context);break;case 22:case 23:gL()}r=r.return}if(ms=e,Ta=e=y0(e.current,null),Fs=Hl=t,Ha=0,lS=null,hL=NO=Hg=0,cl=h2=null,Km!==null){for(t=0;t<Km.length;t++)if(r=Km[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var s=a.next;a.next=i,n.next=s}r.pending=n}Km=null}return e}function lne(e,t){do{var r=Ta;try{if(ZF(),_N.current=SA,wA){for(var n=zi.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}wA=!1}if(zg=0,ls=Ba=zi=null,d2=!1,aS=0,fL.current=null,r===null||r.return===null){Ha=1,lS=t,Ta=null;break}e:{var a=e,s=r.return,o=r,l=t;if(t=Fs,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=MW(s);if(m!==null){m.flags&=-257,FW(m,s,o,a,t),m.mode&1&&DW(a,c,t),t=m,l=c;var x=t.updateQueue;if(x===null){var v=new Set;v.add(l),t.updateQueue=v}else x.add(l);break e}else{if(!(t&1)){DW(a,c,t),xL();break e}l=Error(jt(426))}}else if(ji&&o.mode&1){var b=MW(s);if(b!==null){!(b.flags&65536)&&(b.flags|=256),FW(b,s,o,a,t),QF(Zv(l,o));break e}}a=l=Zv(l,o),Ha!==4&&(Ha=2),h2===null?h2=[a]:h2.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var w=Vre(a,l,t);TW(a,w);break e;case 1:o=l;var _=a.type,C=a.stateNode;if(!(a.flags&128)&&(typeof _.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(x0===null||!x0.has(C)))){a.flags|=65536,t&=-t,a.lanes|=t;var N=qre(a,o,t);TW(a,N);break e}}a=a.return}while(a!==null)}dne(r)}catch(R){t=R,Ta===r&&r!==null&&(Ta=r=r.return);continue}break}while(!0)}function cne(){var e=EA.current;return EA.current=SA,e===null?SA:e}function xL(){(Ha===0||Ha===3||Ha===2)&&(Ha=4),ms===null||!(Hg&268435455)&&!(NO&268435455)||Wp(ms,Fs)}function _A(e,t){var r=On;On|=2;var n=cne();(ms!==e||Fs!==t)&&(Jf=null,bg(e,t));do try{e_e();break}catch(i){lne(e,i)}while(!0);if(ZF(),On=r,EA.current=n,Ta!==null)throw Error(jt(261));return ms=null,Fs=0,Ha}function e_e(){for(;Ta!==null;)une(Ta)}function t_e(){for(;Ta!==null&&!_Ce();)une(Ta)}function une(e){var t=hne(e.alternate,e,Hl);e.memoizedProps=e.pendingProps,t===null?dne(e):Ta=t,fL.current=null}function dne(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Kke(r,t),r!==null){r.flags&=32767,Ta=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ha=6,Ta=null;return}}else if(r=Gke(r,t,Hl),r!==null){Ta=r;return}if(t=t.sibling,t!==null){Ta=t;return}Ta=t=e}while(t!==null);Ha===0&&(Ha=5)}function Dm(e,t,r){var n=ri,i=Qc.transition;try{Qc.transition=null,ri=1,r_e(e,t,r,n)}finally{Qc.transition=i,ri=n}return null}function r_e(e,t,r,n){do yv();while(a0!==null);if(On&6)throw Error(jt(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(jt(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(MCe(e,a),e===ms&&(Ta=ms=null,Fs=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Zk||(Zk=!0,pne(oA,function(){return yv(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Qc.transition,Qc.transition=null;var s=ri;ri=1;var o=On;On|=4,fL.current=null,Yke(e,r),ane(r,e),Ske(YM),cA=!!XM,YM=XM=null,e.current=r,Qke(r),NCe(),On=o,ri=s,Qc.transition=a}else e.current=r;if(Zk&&(Zk=!1,a0=e,kA=i),a=e.pendingLanes,a===0&&(x0=null),ICe(r.stateNode),gl(e,ma()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(CA)throw CA=!1,e=g6,g6=null,e;return kA&1&&e.tag!==0&&yv(),a=e.pendingLanes,a&1?e===x6?p2++:(p2=0,x6=e):p2=0,H0(),null}function yv(){if(a0!==null){var e=Vte(kA),t=Qc.transition,r=ri;try{if(Qc.transition=null,ri=16>e?16:e,a0===null)var n=!1;else{if(e=a0,a0=null,kA=0,On&6)throw Error(jt(331));var i=On;for(On|=4,Yt=e.current;Yt!==null;){var a=Yt,s=a.child;if(Yt.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(Yt=c;Yt!==null;){var d=Yt;switch(d.tag){case 0:case 11:case 15:f2(8,d,a)}var f=d.child;if(f!==null)f.return=d,Yt=f;else for(;Yt!==null;){d=Yt;var p=d.sibling,m=d.return;if(rne(d),d===c){Yt=null;break}if(p!==null){p.return=m,Yt=p;break}Yt=m}}}var x=a.alternate;if(x!==null){var v=x.child;if(v!==null){x.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}Yt=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,Yt=s;else e:for(;Yt!==null;){if(a=Yt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:f2(9,a,a.return)}var w=a.sibling;if(w!==null){w.return=a.return,Yt=w;break e}Yt=a.return}}var _=e.current;for(Yt=_;Yt!==null;){s=Yt;var C=s.child;if(s.subtreeFlags&2064&&C!==null)C.return=s,Yt=C;else e:for(s=_;Yt!==null;){if(o=Yt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:_O(9,o)}}catch(R){Zi(o,o.return,R)}if(o===s){Yt=null;break e}var N=o.sibling;if(N!==null){N.return=o.return,Yt=N;break e}Yt=o.return}}if(On=i,H0(),Xd&&typeof Xd.onPostCommitFiberRoot=="function")try{Xd.onPostCommitFiberRoot(vO,e)}catch{}n=!0}return n}finally{ri=r,Qc.transition=t}}return!1}function YW(e,t,r){t=Zv(r,t),t=Vre(e,t,1),e=g0(e,t,1),t=zo(),e!==null&&(mE(e,1,t),gl(e,t))}function Zi(e,t,r){if(e.tag===3)YW(e,e,r);else for(;t!==null;){if(t.tag===3){YW(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(x0===null||!x0.has(n))){e=Zv(r,e),e=qre(t,e,1),t=g0(t,e,1),e=zo(),t!==null&&(mE(t,1,e),gl(t,e));break}}t=t.return}}function n_e(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=zo(),e.pingedLanes|=e.suspendedLanes&r,ms===e&&(Fs&r)===r&&(Ha===4||Ha===3&&(Fs&130023424)===Fs&&500>ma()-pL?bg(e,0):hL|=r),gl(e,t)}function fne(e,t){t===0&&(e.mode&1?(t=Hk,Hk<<=1,!(Hk&130023424)&&(Hk=4194304)):t=1);var r=zo();e=Ph(e,t),e!==null&&(mE(e,t,r),gl(e,r))}function i_e(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),fne(e,r)}function a_e(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(jt(314))}n!==null&&n.delete(t),fne(e,r)}var hne;hne=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||pl.current)dl=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return dl=!1,qke(e,t,r);dl=!!(e.flags&131072)}else dl=!1,ji&&t.flags&1048576&&xre(t,gA,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;AN(e,t),e=t.pendingProps;var i=Xv(t,mo.current);vv(t,r),i=oL(null,t,n,e,i,r);var a=lL();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ml(n)?(a=!0,pA(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,rL(t),i.updater=kO,t.stateNode=i,i._reactInternals=t,a6(t,n,e,r),t=l6(null,t,n,!0,a,r)):(t.tag=0,ji&&a&&XF(t),Po(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(AN(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=o_e(n),e=Mu(n,e),i){case 0:t=o6(null,t,n,e,r);break e;case 1:t=UW(null,t,n,e,r);break e;case 11:t=LW(null,t,n,e,r);break e;case 14:t=BW(null,t,n,Mu(n.type,e),r);break e}throw Error(jt(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Mu(n,i),o6(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Mu(n,i),UW(e,t,n,i,r);case 3:e:{if(Yre(t),e===null)throw Error(jt(387));n=t.pendingProps,a=t.memoizedState,i=a.element,Ere(e,t),yA(t,n,null,r);var s=t.memoizedState;if(n=s.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Zv(Error(jt(423)),t),t=$W(e,t,n,r,i);break e}else if(n!==i){i=Zv(Error(jt(424)),t),t=$W(e,t,n,r,i);break e}else for(Ql=m0(t.stateNode.containerInfo.firstChild),ec=t,ji=!0,$u=null,r=wre(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Yv(),n===i){t=Rh(e,t,r);break e}Po(e,t,n,r)}t=t.child}return t;case 5:return Cre(t),e===null&&r6(t),n=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,s=i.children,QM(n,i)?s=null:a!==null&&QM(n,a)&&(t.flags|=32),Xre(e,t),Po(e,t,s,r),t.child;case 6:return e===null&&r6(t),null;case 13:return Qre(e,t,r);case 4:return nL(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Qv(t,null,n,r):Po(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Mu(n,i),LW(e,t,n,i,r);case 7:return Po(e,t,t.pendingProps,r),t.child;case 8:return Po(e,t,t.pendingProps.children,r),t.child;case 12:return Po(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,mi(xA,n._currentValue),n._currentValue=s,a!==null)if(ad(a.value,s)){if(a.children===i.children&&!pl.current){t=Rh(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(a.tag===1){l=mh(-1,r&-r),l.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),n6(a.return,r,t),o.lanes|=r;break}l=l.next}}else if(a.tag===10)s=a.type===t.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(jt(341));s.lanes|=r,o=s.alternate,o!==null&&(o.lanes|=r),n6(s,r,t),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Po(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,vv(t,r),i=au(i),n=n(i),t.flags|=1,Po(e,t,n,r),t.child;case 14:return n=t.type,i=Mu(n,t.pendingProps),i=Mu(n.type,i),BW(e,t,n,i,r);case 15:return Gre(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Mu(n,i),AN(e,t),t.tag=1,ml(n)?(e=!0,pA(t)):e=!1,vv(t,r),Wre(t,n,i),a6(t,n,i,r),l6(null,t,n,!0,e,r);case 19:return Jre(e,t,r);case 22:return Kre(e,t,r)}throw Error(jt(156,t.tag))};function pne(e,t){return $te(e,t)}function s_e(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kc(e,t,r,n){return new s_e(e,t,r,n)}function vL(e){return e=e.prototype,!(!e||!e.isReactComponent)}function o_e(e){if(typeof e=="function")return vL(e)?1:0;if(e!=null){if(e=e.$$typeof,e===FF)return 11;if(e===LF)return 14}return 2}function y0(e,t){var r=e.alternate;return r===null?(r=Kc(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ON(e,t,r,n,i,a){var s=2;if(n=e,typeof e=="function")vL(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Q1:return wg(r.children,i,a,t);case MF:s=8,i|=8;break;case TM:return e=Kc(12,r,t,i|2),e.elementType=TM,e.lanes=a,e;case IM:return e=Kc(13,r,t,i),e.elementType=IM,e.lanes=a,e;case OM:return e=Kc(19,r,t,i),e.elementType=OM,e.lanes=a,e;case Cte:return AO(r,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ste:s=10;break e;case Ete:s=9;break e;case FF:s=11;break e;case LF:s=14;break e;case Dp:s=16,n=null;break e}throw Error(jt(130,e==null?e:typeof e,""))}return t=Kc(s,r,t,i),t.elementType=e,t.type=n,t.lanes=a,t}function wg(e,t,r,n){return e=Kc(7,e,n,t),e.lanes=r,e}function AO(e,t,r,n){return e=Kc(22,e,n,t),e.elementType=Cte,e.lanes=r,e.stateNode={isHidden:!1},e}function ej(e,t,r){return e=Kc(6,e,null,t),e.lanes=r,e}function tj(e,t,r){return t=Kc(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function l_e(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=DR(0),this.expirationTimes=DR(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=DR(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function yL(e,t,r,n,i,a,s,o,l){return e=new l_e(e,t,r,o,l),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Kc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},rL(a),e}function c_e(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Y1,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function mne(e){if(!e)return N0;e=e._reactInternals;e:{if(Sx(e)!==e||e.tag!==1)throw Error(jt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ml(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(jt(171))}if(e.tag===1){var r=e.type;if(ml(r))return mre(e,r,t)}return t}function gne(e,t,r,n,i,a,s,o,l){return e=yL(r,n,!0,e,i,a,s,o,l),e.context=mne(null),r=e.current,n=zo(),i=v0(r),a=mh(n,i),a.callback=t??null,g0(r,a,i),e.current.lanes=i,mE(e,i,n),gl(e,n),e}function TO(e,t,r,n){var i=t.current,a=zo(),s=v0(i);return r=mne(r),t.context===null?t.context=r:t.pendingContext=r,t=mh(a,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=g0(i,t,s),e!==null&&(ed(e,i,s,a),kN(e,i,s)),s}function NA(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function QW(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function bL(e,t){QW(e,t),(e=e.alternate)&&QW(e,t)}function u_e(){return null}var xne=typeof reportError=="function"?reportError:function(e){console.error(e)};function wL(e){this._internalRoot=e}IO.prototype.render=wL.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(jt(409));TO(e,t,null,null)};IO.prototype.unmount=wL.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wg(function(){TO(null,e,null,null)}),t[Oh]=null}};function IO(e){this._internalRoot=e}IO.prototype.unstable_scheduleHydration=function(e){if(e){var t=Kte();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Hp.length&&t!==0&&t<Hp[r].priority;r++);Hp.splice(r,0,e),r===0&&Yte(e)}};function SL(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function OO(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function JW(){}function d_e(e,t,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var c=NA(s);a.call(c)}}var s=gne(t,n,e,0,null,!1,!1,"",JW);return e._reactRootContainer=s,e[Oh]=s.current,eS(e.nodeType===8?e.parentNode:e),Wg(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var c=NA(l);o.call(c)}}var l=yL(e,0,!1,null,null,!1,!1,"",JW);return e._reactRootContainer=l,e[Oh]=l.current,eS(e.nodeType===8?e.parentNode:e),Wg(function(){TO(t,l,r,n)}),l}function PO(e,t,r,n,i){var a=r._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var l=NA(s);o.call(l)}}TO(t,s,e,i)}else s=d_e(r,t,e,i,n);return NA(s)}qte=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Hw(t.pendingLanes);r!==0&&($F(t,r|1),gl(t,ma()),!(On&6)&&(ey=ma()+500,H0()))}break;case 13:Wg(function(){var n=Ph(e,1);if(n!==null){var i=zo();ed(n,e,1,i)}}),bL(e,1)}};zF=function(e){if(e.tag===13){var t=Ph(e,134217728);if(t!==null){var r=zo();ed(t,e,134217728,r)}bL(e,134217728)}};Gte=function(e){if(e.tag===13){var t=v0(e),r=Ph(e,t);if(r!==null){var n=zo();ed(r,e,t,n)}bL(e,t)}};Kte=function(){return ri};Xte=function(e,t){var r=ri;try{return ri=e,t()}finally{ri=r}};$M=function(e,t,r){switch(t){case"input":if(jM(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=SO(n);if(!i)throw Error(jt(90));_te(n),jM(n,i)}}}break;case"textarea":Ate(e,r);break;case"select":t=r.value,t!=null&&pv(e,!!r.multiple,t,!1)}};Dte=mL;Mte=Wg;var f_e={usingClientEntryPoint:!1,Events:[xE,tv,SO,Rte,jte,mL]},lw={findFiberByHostInstance:Gm,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},h_e={bundleType:lw.bundleType,version:lw.version,rendererPackageName:lw.rendererPackageName,rendererConfig:lw.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xh.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Bte(e),e===null?null:e.stateNode},findFiberByHostInstance:lw.findFiberByHostInstance||u_e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var e_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!e_.isDisabled&&e_.supportsFiber)try{vO=e_.inject(h_e),Xd=e_}catch{}}dc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f_e;dc.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!SL(t))throw Error(jt(200));return c_e(e,t,null,r)};dc.createRoot=function(e,t){if(!SL(e))throw Error(jt(299));var r=!1,n="",i=xne;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=yL(e,1,!1,null,null,r,!1,n,i),e[Oh]=t.current,eS(e.nodeType===8?e.parentNode:e),new wL(t)};dc.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(jt(188)):(e=Object.keys(e).join(","),Error(jt(268,e)));return e=Bte(t),e=e===null?null:e.stateNode,e};dc.flushSync=function(e){return Wg(e)};dc.hydrate=function(e,t,r){if(!OO(t))throw Error(jt(200));return PO(null,e,t,!0,r)};dc.hydrateRoot=function(e,t,r){if(!SL(e))throw Error(jt(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",s=xne;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=gne(t,null,e,1,r??null,i,!1,a,s),e[Oh]=t.current,eS(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new IO(t)};dc.render=function(e,t,r){if(!OO(t))throw Error(jt(200));return PO(null,e,t,!1,r)};dc.unmountComponentAtNode=function(e){if(!OO(e))throw Error(jt(40));return e._reactRootContainer?(Wg(function(){PO(null,null,e,!1,function(){e._reactRootContainer=null,e[Oh]=null})}),!0):!1};dc.unstable_batchedUpdates=mL;dc.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!OO(r))throw Error(jt(200));if(e==null||e._reactInternals===void 0)throw Error(jt(38));return PO(e,t,r,!1,n)};dc.version="18.3.1-next-f1338f8080-20240426";function vne(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vne)}catch(e){console.error(e)}}vne(),vte.exports=dc;var Tl=vte.exports;const EL=Us(Tl),p_e=AF({__proto__:null,default:EL},[Tl]);var ZW=Tl;NM.createRoot=ZW.createRoot,NM.hydrateRoot=ZW.hydrateRoot;/**
 * @remix-run/router v1.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bi(){return bi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bi.apply(this,arguments)}var fi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(fi||(fi={}));const eV="popstate";function yne(e){e===void 0&&(e={});let{initialEntries:t=["/"],initialIndex:r,v5Compat:n=!1}=e,i;i=t.map((m,x)=>d(m,typeof m=="string"?null:m.state,x===0?"default":void 0));let a=l(r??i.length-1),s=fi.Pop,o=null;function l(m){return Math.min(Math.max(m,0),i.length-1)}function c(){return i[a]}function d(m,x,v){x===void 0&&(x=null);let b=Vg(i?c().pathname:"/",m,x,v);return jh(b.pathname.charAt(0)==="/","relative pathnames are not supported in memory history: "+JSON.stringify(m)),b}function f(m){return typeof m=="string"?m:sd(m)}return{get index(){return a},get action(){return s},get location(){return c()},createHref:f,createURL(m){return new URL(f(m),"http://localhost")},encodeLocation(m){let x=typeof m=="string"?mu(m):m;return{pathname:x.pathname||"",search:x.search||"",hash:x.hash||""}},push(m,x){s=fi.Push;let v=d(m,x);a+=1,i.splice(a,i.length,v),n&&o&&o({action:s,location:v,delta:1})},replace(m,x){s=fi.Replace;let v=d(m,x);i[a]=v,n&&o&&o({action:s,location:v,delta:0})},go(m){s=fi.Pop;let x=l(a+m),v=i[x];a=x,o&&o({action:s,location:v,delta:m})},listen(m){return o=m,()=>{o=null}}}}function bne(e){e===void 0&&(e={});function t(n,i){let{pathname:a,search:s,hash:o}=n.location;return Vg("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:sd(i)}return Sne(t,r,null,e)}function wne(e){e===void 0&&(e={});function t(i,a){let{pathname:s="/",search:o="",hash:l=""}=mu(i.location.hash.substr(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),Vg("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(i,a){let s=i.document.querySelector("base"),o="";if(s&&s.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");o=c===-1?l:l.slice(0,c)}return o+"#"+(typeof a=="string"?a:sd(a))}function n(i,a){jh(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return Sne(t,r,n,e)}function Sr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function jh(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function m_e(){return Math.random().toString(36).substr(2,8)}function tV(e,t){return{usr:e.state,key:e.key,idx:t}}function Vg(e,t,r,n){return r===void 0&&(r=null),bi({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?mu(t):t,{state:r,key:t&&t.key||n||m_e()})}function sd(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function mu(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Sne(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,s=i.history,o=fi.Pop,l=null,c=d();c==null&&(c=0,s.replaceState(bi({},s.state,{idx:c}),""));function d(){return(s.state||{idx:null}).idx}function f(){o=fi.Pop;let b=d(),w=b==null?null:b-c;c=b,l&&l({action:o,location:v.location,delta:w})}function p(b,w){o=fi.Push;let _=Vg(v.location,b,w);r&&r(_,b),c=d()+1;let C=tV(_,c),N=v.createHref(_);try{s.pushState(C,"",N)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(N)}a&&l&&l({action:o,location:v.location,delta:1})}function m(b,w){o=fi.Replace;let _=Vg(v.location,b,w);r&&r(_,b),c=d();let C=tV(_,c),N=v.createHref(_);s.replaceState(C,"",N),a&&l&&l({action:o,location:v.location,delta:0})}function x(b){let w=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof b=="string"?b:sd(b);return _=_.replace(/ $/,"%20"),Sr(w,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,w)}let v={get action(){return o},get location(){return e(i,s)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(eV,f),l=b,()=>{i.removeEventListener(eV,f),l=null}},createHref(b){return t(i,b)},createURL:x,encodeLocation(b){let w=x(b);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:m,go(b){return s.go(b)}};return v}var Pi;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Pi||(Pi={}));const g_e=new Set(["lazy","caseSensitive","path","id","index","children"]);function x_e(e){return e.index===!0}function b6(e,t,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),e.map((i,a)=>{let s=[...r,a],o=typeof i.id=="string"?i.id:s.join("-");if(Sr(i.index!==!0||!i.children,"Cannot specify children on an index route"),Sr(!n[o],'Found a route id collision on id "'+o+`".  Route id's must be globally unique within Data Router usages`),x_e(i)){let l=bi({},i,t(i),{id:o});return n[o]=l,l}else{let l=bi({},i,t(i),{id:o,children:void 0});return n[o]=l,i.children&&(l.children=b6(i.children,t,s,n)),l}})}function Ym(e,t,r){r===void 0&&(r="/");let n=typeof t=="string"?mu(t):t,i=kl(n.pathname||"/",r);if(i==null)return null;let a=Cne(e);v_e(a);let s=null;for(let o=0;s==null&&o<a.length;++o){let l=I_e(i);s=N_e(a[o],l)}return s}function Ene(e,t){let{route:r,pathname:n,params:i}=e;return{id:r.id,pathname:n,params:i,data:t[r.id],handle:r.handle}}function Cne(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(a,s,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};l.relativePath.startsWith("/")&&(Sr(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=Qd([n,l.relativePath]),d=r.concat(l);a.children&&a.children.length>0&&(Sr(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Cne(a.children,t,d,c)),!(a.path==null&&!a.index)&&t.push({path:c,score:k_e(c,a.index),routesMeta:d})};return e.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,s);else for(let l of kne(a.path))i(a,s,l)}),t}function kne(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let s=kne(n.join("/")),o=[];return o.push(...s.map(l=>l===""?a:[a,l].join("/"))),i&&o.push(...s),o.map(l=>e.startsWith("/")&&l===""?"/":l)}function v_e(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:__e(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const y_e=/^:[\w-]+$/,b_e=3,w_e=2,S_e=1,E_e=10,C_e=-2,rV=e=>e==="*";function k_e(e,t){let r=e.split("/"),n=r.length;return r.some(rV)&&(n+=C_e),t&&(n+=w_e),r.filter(i=>!rV(i)).reduce((i,a)=>i+(y_e.test(a)?b_e:a===""?S_e:E_e),n)}function __e(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function N_e(e,t){let{routesMeta:r}=e,n={},i="/",a=[];for(let s=0;s<r.length;++s){let o=r[s],l=s===r.length-1,c=i==="/"?t:t.slice(i.length)||"/",d=cS({path:o.relativePath,caseSensitive:o.caseSensitive,end:l},c);if(!d)return null;Object.assign(n,d.params);let f=o.route;a.push({params:n,pathname:Qd([i,d.pathname]),pathnameBase:P_e(Qd([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=Qd([i,d.pathnameBase]))}return a}function A_e(e,t){t===void 0&&(t={});let r=e;r.endsWith("*")&&r!=="*"&&!r.endsWith("/*")&&(jh(!1,'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".')),r=r.replace(/\*$/,"/*"));const n=r.startsWith("/")?"/":"",i=s=>s==null?"":typeof s=="string"?s:String(s),a=r.split(/\/+/).map((s,o,l)=>{if(o===l.length-1&&s==="*")return i(t["*"]);const d=s.match(/^:([\w-]+)(\??)$/);if(d){const[,f,p]=d;let m=t[f];return Sr(p==="?"||m!=null,'Missing ":'+f+'" param'),i(m)}return s.replace(/\?$/g,"")}).filter(s=>!!s);return n+a.join("/")}function cS(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=T_e(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((c,d,f)=>{let{paramName:p,isOptional:m}=d;if(p==="*"){let v=o[f]||"";s=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const x=o[f];return m&&!x?c[p]=void 0:c[p]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:s,pattern:e}}function T_e(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),jh(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function I_e(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return jh(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function kl(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function _ne(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?mu(e):e;return{pathname:r?r.startsWith("/")?r:O_e(r,t):t,search:R_e(n),hash:j_e(i)}}function O_e(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function rj(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Nne(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function RO(e,t){let r=Nne(e);return t?r.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function jO(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=mu(e):(i=bi({},e),Sr(!i.pathname||!i.pathname.includes("?"),rj("?","pathname","search",i)),Sr(!i.pathname||!i.pathname.includes("#"),rj("#","pathname","hash",i)),Sr(!i.search||!i.search.includes("#"),rj("#","search","hash",i)));let a=e===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=r;else{let f=t.length-1;if(!n&&s.startsWith("..")){let p=s.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}o=f>=0?t[f]:"/"}let l=_ne(i,o),c=s&&s!=="/"&&s.endsWith("/"),d=(a||s===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Qd=e=>e.join("/").replace(/\/\/+/g,"/"),P_e=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),R_e=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,j_e=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,D_e=function(t,r){r===void 0&&(r={});let n=typeof r=="number"?{status:r}:r,i=new Headers(n.headers);return i.has("Content-Type")||i.set("Content-Type","application/json; charset=utf-8"),new Response(JSON.stringify(t),bi({},n,{headers:i}))};class AA extends Error{}class M_e{constructor(t,r){this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],Sr(t&&typeof t=="object"&&!Array.isArray(t),"defer() only accepts plain objects");let n;this.abortPromise=new Promise((a,s)=>n=s),this.controller=new AbortController;let i=()=>n(new AA("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",i),this.controller.signal.addEventListener("abort",i),this.data=Object.entries(t).reduce((a,s)=>{let[o,l]=s;return Object.assign(a,{[o]:this.trackPromise(o,l)})},{}),this.done&&this.unlistenAbortSignal(),this.init=r}trackPromise(t,r){if(!(r instanceof Promise))return r;this.deferredKeys.push(t),this.pendingKeysSet.add(t);let n=Promise.race([r,this.abortPromise]).then(i=>this.onSettle(n,t,void 0,i),i=>this.onSettle(n,t,i));return n.catch(()=>{}),Object.defineProperty(n,"_tracked",{get:()=>!0}),n}onSettle(t,r,n,i){if(this.controller.signal.aborted&&n instanceof AA)return this.unlistenAbortSignal(),Object.defineProperty(t,"_error",{get:()=>n}),Promise.reject(n);if(this.pendingKeysSet.delete(r),this.done&&this.unlistenAbortSignal(),n===void 0&&i===void 0){let a=new Error('Deferred data for key "'+r+'" resolved/rejected with `undefined`, you must resolve/reject with a value or `null`.');return Object.defineProperty(t,"_error",{get:()=>a}),this.emit(!1,r),Promise.reject(a)}return i===void 0?(Object.defineProperty(t,"_error",{get:()=>n}),this.emit(!1,r),Promise.reject(n)):(Object.defineProperty(t,"_data",{get:()=>i}),this.emit(!1,r),i)}emit(t,r){this.subscribers.forEach(n=>n(t,r))}subscribe(t){return this.subscribers.add(t),()=>this.subscribers.delete(t)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach((t,r)=>this.pendingKeysSet.delete(r)),this.emit(!0)}async resolveData(t){let r=!1;if(!this.done){let n=()=>this.cancel();t.addEventListener("abort",n),r=await new Promise(i=>{this.subscribe(a=>{t.removeEventListener("abort",n),(a||this.done)&&i(a)})})}return r}get done(){return this.pendingKeysSet.size===0}get unwrappedData(){return Sr(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((t,r)=>{let[n,i]=r;return Object.assign(t,{[n]:L_e(i)})},{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}function F_e(e){return e instanceof Promise&&e._tracked===!0}function L_e(e){if(!F_e(e))return e;if(e._error)throw e._error;return e._data}const B_e=function(t,r){r===void 0&&(r={});let n=typeof r=="number"?{status:r}:r;return new M_e(t,n)},Ane=function(t,r){r===void 0&&(r=302);let n=r;typeof n=="number"?n={status:n}:typeof n.status>"u"&&(n.status=302);let i=new Headers(n.headers);return i.set("Location",t),new Response(null,bi({},n,{headers:i}))},U_e=(e,t)=>{let r=Ane(e,t);return r.headers.set("X-Remix-Reload-Document","true"),r};class DO{constructor(t,r,n,i){i===void 0&&(i=!1),this.status=t,this.statusText=r||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function MO(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Tne=["post","put","patch","delete"],$_e=new Set(Tne),z_e=["get",...Tne],H_e=new Set(z_e),W_e=new Set([301,302,303,307,308]),V_e=new Set([307,308]),nj={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ine={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},$1={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},CL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,q_e=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),One="remix-router-transitions";function kL(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",n=!r;Sr(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(e.mapRouteProperties)i=e.mapRouteProperties;else if(e.detectErrorBoundary){let We=e.detectErrorBoundary;i=Qe=>({hasErrorBoundary:We(Qe)})}else i=q_e;let a={},s=b6(e.routes,i,void 0,a),o,l=e.basename||"/",c=e.unstable_dataStrategy||Y_e,d=bi({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},e.future),f=null,p=new Set,m=null,x=null,v=null,b=e.hydrationData!=null,w=Ym(s,e.history.location,l),_=null;if(w==null){let We=Uc(404,{pathname:e.history.location.pathname}),{matches:Qe,route:tt}=fV(s);w=Qe,_={[tt.id]:We}}let C,N=w.some(We=>We.route.lazy),R=w.some(We=>We.route.loader);if(N)C=!1;else if(!R)C=!0;else if(d.v7_partialHydration){let We=e.hydrationData?e.hydrationData.loaderData:null,Qe=e.hydrationData?e.hydrationData.errors:null,tt=_t=>_t.route.loader?typeof _t.route.loader=="function"&&_t.route.loader.hydrate===!0?!1:We&&We[_t.route.id]!==void 0||Qe&&Qe[_t.route.id]!==void 0:!0;if(Qe){let _t=w.findIndex(Ut=>Qe[Ut.route.id]!==void 0);C=w.slice(0,_t+1).every(tt)}else C=w.every(tt)}else C=e.hydrationData!=null;let P,O={historyAction:e.history.action,location:e.history.location,matches:w,initialized:C,navigation:nj,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||_,fetchers:new Map,blockers:new Map},D=fi.Pop,M=!1,B,U=!1,H=new Map,Z=null,ee=!1,V=!1,te=[],se=[],Q=new Map,X=0,fe=-1,Se=new Map,Y=new Set,ce=new Map,W=new Map,G=new Set,ie=new Map,Ce=new Map,re=!1;function ne(){if(f=e.history.listen(We=>{let{action:Qe,location:tt,delta:_t}=We;if(re){re=!1;return}jh(Ce.size===0||_t!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ut=Pt({currentLocation:O.location,nextLocation:tt,historyAction:Qe});if(Ut&&_t!=null){re=!0,e.history.go(_t*-1),Dt(Ut,{state:"blocked",location:tt,proceed(){Dt(Ut,{state:"proceeding",proceed:void 0,reset:void 0,location:tt}),e.history.go(_t)},reset(){let nr=new Map(O.blockers);nr.set(Ut,$1),q({blockers:nr})}});return}return je(Qe,tt)}),r){lNe(t,H);let We=()=>cNe(t,H);t.addEventListener("pagehide",We),Z=()=>t.removeEventListener("pagehide",We)}return O.initialized||je(fi.Pop,O.location,{initialHydration:!0}),P}function ge(){f&&f(),Z&&Z(),p.clear(),B&&B.abort(),O.fetchers.forEach((We,Qe)=>ye(Qe)),O.blockers.forEach((We,Qe)=>xt(Qe))}function we(We){return p.add(We),()=>p.delete(We)}function q(We,Qe){Qe===void 0&&(Qe={}),O=bi({},O,We);let tt=[],_t=[];d.v7_fetcherPersist&&O.fetchers.forEach((Ut,nr)=>{Ut.state==="idle"&&(G.has(nr)?_t.push(nr):tt.push(nr))}),[...p].forEach(Ut=>Ut(O,{deletedFetchers:_t,unstable_viewTransitionOpts:Qe.viewTransitionOpts,unstable_flushSync:Qe.flushSync===!0})),d.v7_fetcherPersist&&(tt.forEach(Ut=>O.fetchers.delete(Ut)),_t.forEach(Ut=>ye(Ut)))}function Ae(We,Qe,tt){var _t,Ut;let{flushSync:nr}=tt===void 0?{}:tt,tr=O.actionData!=null&&O.navigation.formMethod!=null&&Uu(O.navigation.formMethod)&&O.navigation.state==="loading"&&((_t=We.state)==null?void 0:_t._isRedirect)!==!0,$t;Qe.actionData?Object.keys(Qe.actionData).length>0?$t=Qe.actionData:$t=null:tr?$t=O.actionData:$t=null;let kr=Qe.loaderData?uV(O.loaderData,Qe.loaderData,Qe.matches||[],Qe.errors):O.loaderData,Jt=O.blockers;Jt.size>0&&(Jt=new Map(Jt),Jt.forEach((he,be)=>Jt.set(be,$1)));let Un=M===!0||O.navigation.formMethod!=null&&Uu(O.navigation.formMethod)&&((Ut=We.state)==null?void 0:Ut._isRedirect)!==!0;o&&(s=o,o=void 0),ee||D===fi.Pop||(D===fi.Push?e.history.push(We,We.state):D===fi.Replace&&e.history.replace(We,We.state));let de;if(D===fi.Pop){let he=H.get(O.location.pathname);he&&he.has(We.pathname)?de={currentLocation:O.location,nextLocation:We}:H.has(We.pathname)&&(de={currentLocation:We,nextLocation:O.location})}else if(U){let he=H.get(O.location.pathname);he?he.add(We.pathname):(he=new Set([We.pathname]),H.set(O.location.pathname,he)),de={currentLocation:O.location,nextLocation:We}}q(bi({},Qe,{actionData:$t,loaderData:kr,historyAction:D,location:We,initialized:!0,navigation:nj,revalidation:"idle",restoreScrollPosition:jn(We,Qe.matches||O.matches),preventScrollReset:Un,blockers:Jt}),{viewTransitionOpts:de,flushSync:nr===!0}),D=fi.Pop,M=!1,U=!1,ee=!1,V=!1,te=[],se=[]}async function Pe(We,Qe){if(typeof We=="number"){e.history.go(We);return}let tt=w6(O.location,O.matches,l,d.v7_prependBasename,We,d.v7_relativeSplatPath,Qe==null?void 0:Qe.fromRouteId,Qe==null?void 0:Qe.relative),{path:_t,submission:Ut,error:nr}=nV(d.v7_normalizeFormMethod,!1,tt,Qe),tr=O.location,$t=Vg(O.location,_t,Qe&&Qe.state);$t=bi({},$t,e.history.encodeLocation($t));let kr=Qe&&Qe.replace!=null?Qe.replace:void 0,Jt=fi.Push;kr===!0?Jt=fi.Replace:kr===!1||Ut!=null&&Uu(Ut.formMethod)&&Ut.formAction===O.location.pathname+O.location.search&&(Jt=fi.Replace);let Un=Qe&&"preventScrollReset"in Qe?Qe.preventScrollReset===!0:void 0,de=(Qe&&Qe.unstable_flushSync)===!0,he=Pt({currentLocation:tr,nextLocation:$t,historyAction:Jt});if(he){Dt(he,{state:"blocked",location:$t,proceed(){Dt(he,{state:"proceeding",proceed:void 0,reset:void 0,location:$t}),Pe(We,Qe)},reset(){let be=new Map(O.blockers);be.set(he,$1),q({blockers:be})}});return}return await je(Jt,$t,{submission:Ut,pendingError:nr,preventScrollReset:Un,replace:Qe&&Qe.replace,enableViewTransition:Qe&&Qe.unstable_viewTransition,flushSync:de})}function He(){if(Gt(),q({revalidation:"loading"}),O.navigation.state!=="submitting"){if(O.navigation.state==="idle"){je(O.historyAction,O.location,{startUninterruptedRevalidation:!0});return}je(D||O.historyAction,O.navigation.location,{overrideNavigation:O.navigation})}}async function je(We,Qe,tt){B&&B.abort(),B=null,D=We,ee=(tt&&tt.startUninterruptedRevalidation)===!0,Vi(O.location,O.matches),M=(tt&&tt.preventScrollReset)===!0,U=(tt&&tt.enableViewTransition)===!0;let _t=o||s,Ut=tt&&tt.overrideNavigation,nr=Ym(_t,Qe,l),tr=(tt&&tt.flushSync)===!0;if(!nr){let he=Uc(404,{pathname:Qe.pathname}),{matches:be,route:Ne}=fV(_t);Cr(),Ae(Qe,{matches:be,loaderData:{},errors:{[Ne.id]:he}},{flushSync:tr});return}if(O.initialized&&!V&&rNe(O.location,Qe)&&!(tt&&tt.submission&&Uu(tt.submission.formMethod))){Ae(Qe,{matches:nr},{flushSync:tr});return}B=new AbortController;let $t=b1(e.history,Qe,B.signal,tt&&tt.submission),kr;if(tt&&tt.pendingError)kr=[m2(nr).route.id,{type:Pi.error,error:tt.pendingError}];else if(tt&&tt.submission&&Uu(tt.submission.formMethod)){let he=await $e($t,Qe,tt.submission,nr,{replace:tt.replace,flushSync:tr});if(he.shortCircuited)return;kr=he.pendingActionResult,Ut=ij(Qe,tt.submission),tr=!1,$t=b1(e.history,$t.url,$t.signal)}let{shortCircuited:Jt,loaderData:Un,errors:de}=await Ze($t,Qe,nr,Ut,tt&&tt.submission,tt&&tt.fetcherSubmission,tt&&tt.replace,tt&&tt.initialHydration===!0,tr,kr);Jt||(B=null,Ae(Qe,bi({matches:nr},dV(kr),{loaderData:Un,errors:de})))}async function $e(We,Qe,tt,_t,Ut){Ut===void 0&&(Ut={}),Gt();let nr=sNe(Qe,tt);q({navigation:nr},{flushSync:Ut.flushSync===!0});let tr,$t=E6(_t,Qe);if(!$t.route.action&&!$t.route.lazy)tr={type:Pi.error,error:Uc(405,{method:We.method,pathname:Qe.pathname,routeId:$t.route.id})};else if(tr=(await er("action",We,[$t],_t))[0],We.signal.aborted)return{shortCircuited:!0};if(Jm(tr)){let kr;return Ut&&Ut.replace!=null?kr=Ut.replace:kr=oV(tr.response.headers.get("Location"),new URL(We.url),l)===O.location.pathname+O.location.search,await _r(We,tr,{submission:tt,replace:kr}),{shortCircuited:!0}}if(Qm(tr))throw Uc(400,{type:"defer-action"});if(qc(tr)){let kr=m2(_t,$t.route.id);return(Ut&&Ut.replace)!==!0&&(D=fi.Push),{pendingActionResult:[kr.route.id,tr]}}return{pendingActionResult:[$t.route.id,tr]}}async function Ze(We,Qe,tt,_t,Ut,nr,tr,$t,kr,Jt){let Un=_t||ij(Qe,Ut),de=Ut||nr||mV(Un),he=o||s,[be,Ne]=iV(e.history,O,tt,de,Qe,d.v7_partialHydration&&$t===!0,d.unstable_skipActionErrorRevalidation,V,te,se,G,ce,Y,he,l,Jt);if(Cr(dt=>!(tt&&tt.some(St=>St.route.id===dt))||be&&be.some(St=>St.route.id===dt)),fe=++X,be.length===0&&Ne.length===0){let dt=ze();return Ae(Qe,bi({matches:tt,loaderData:{},errors:Jt&&qc(Jt[1])?{[Jt[0]]:Jt[1].error}:null},dV(Jt),dt?{fetchers:new Map(O.fetchers)}:{}),{flushSync:kr}),{shortCircuited:!0}}if(!ee&&(!d.v7_partialHydration||!$t)){Ne.forEach(St=>{let Ot=O.fetchers.get(St.key),Kt=cw(void 0,Ot?Ot.data:void 0);O.fetchers.set(St.key,Kt)});let dt;Jt&&!qc(Jt[1])?dt={[Jt[0]]:Jt[1].data}:O.actionData&&(Object.keys(O.actionData).length===0?dt=null:dt=O.actionData),q(bi({navigation:Un},dt!==void 0?{actionData:dt}:{},Ne.length>0?{fetchers:new Map(O.fetchers)}:{}),{flushSync:kr})}Ne.forEach(dt=>{Q.has(dt.key)&&qe(dt.key),dt.controller&&Q.set(dt.key,dt.controller)});let pe=()=>Ne.forEach(dt=>qe(dt.key));B&&B.signal.addEventListener("abort",pe);let{loaderResults:me,fetcherResults:Fe}=await ct(O.matches,tt,be,Ne,We);if(We.signal.aborted)return{shortCircuited:!0};B&&B.signal.removeEventListener("abort",pe),Ne.forEach(dt=>Q.delete(dt.key));let nt=hV([...me,...Fe]);if(nt){if(nt.idx>=be.length){let dt=Ne[nt.idx-be.length].key;Y.add(dt)}return await _r(We,nt.result,{replace:tr}),{shortCircuited:!0}}let{loaderData:Ge,errors:Xe}=cV(O,tt,be,me,Jt,Ne,Fe,ie);ie.forEach((dt,St)=>{dt.subscribe(Ot=>{(Ot||dt.done)&&ie.delete(St)})}),d.v7_partialHydration&&$t&&O.errors&&Object.entries(O.errors).filter(dt=>{let[St]=dt;return!be.some(Ot=>Ot.route.id===St)}).forEach(dt=>{let[St,Ot]=dt;Xe=Object.assign(Xe||{},{[St]:Ot})});let Je=ze(),wt=_e(fe),At=Je||wt||Ne.length>0;return bi({loaderData:Ge,errors:Xe},At?{fetchers:new Map(O.fetchers)}:{})}function lt(We,Qe,tt,_t){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Q.has(We)&&qe(We);let Ut=(_t&&_t.unstable_flushSync)===!0,nr=o||s,tr=w6(O.location,O.matches,l,d.v7_prependBasename,tt,d.v7_relativeSplatPath,Qe,_t==null?void 0:_t.relative),$t=Ym(nr,tr,l);if(!$t){dr(We,Qe,Uc(404,{pathname:tr}),{flushSync:Ut});return}let{path:kr,submission:Jt,error:Un}=nV(d.v7_normalizeFormMethod,!0,tr,_t);if(Un){dr(We,Qe,Un,{flushSync:Ut});return}let de=E6($t,kr);if(M=(_t&&_t.preventScrollReset)===!0,Jt&&Uu(Jt.formMethod)){kt(We,Qe,kr,de,$t,Ut,Jt);return}ce.set(We,{routeId:Qe,path:kr}),ht(We,Qe,kr,de,$t,Ut,Jt)}async function kt(We,Qe,tt,_t,Ut,nr,tr){if(Gt(),ce.delete(We),!_t.route.action&&!_t.route.lazy){let Kt=Uc(405,{method:tr.formMethod,pathname:tt,routeId:Qe});dr(We,Qe,Kt,{flushSync:nr});return}let $t=O.fetchers.get(We);Lt(We,oNe(tr,$t),{flushSync:nr});let kr=new AbortController,Jt=b1(e.history,tt,kr.signal,tr);Q.set(We,kr);let Un=X,he=(await er("action",Jt,[_t],Ut))[0];if(Jt.signal.aborted){Q.get(We)===kr&&Q.delete(We);return}if(d.v7_fetcherPersist&&G.has(We)){if(Jm(he)||qc(he)){Lt(We,Ip(void 0));return}}else{if(Jm(he))if(Q.delete(We),fe>Un){Lt(We,Ip(void 0));return}else return Y.add(We),Lt(We,cw(tr)),_r(Jt,he,{fetcherSubmission:tr});if(qc(he)){dr(We,Qe,he.error);return}}if(Qm(he))throw Uc(400,{type:"defer-action"});let be=O.navigation.location||O.location,Ne=b1(e.history,be,kr.signal),pe=o||s,me=O.navigation.state!=="idle"?Ym(pe,O.navigation.location,l):O.matches;Sr(me,"Didn't find any matches after fetcher action");let Fe=++X;Se.set(We,Fe);let nt=cw(tr,he.data);O.fetchers.set(We,nt);let[Ge,Xe]=iV(e.history,O,me,tr,be,!1,d.unstable_skipActionErrorRevalidation,V,te,se,G,ce,Y,pe,l,[_t.route.id,he]);Xe.filter(Kt=>Kt.key!==We).forEach(Kt=>{let at=Kt.key,Vn=O.fetchers.get(at),$r=cw(void 0,Vn?Vn.data:void 0);O.fetchers.set(at,$r),Q.has(at)&&qe(at),Kt.controller&&Q.set(at,Kt.controller)}),q({fetchers:new Map(O.fetchers)});let Je=()=>Xe.forEach(Kt=>qe(Kt.key));kr.signal.addEventListener("abort",Je);let{loaderResults:wt,fetcherResults:At}=await ct(O.matches,me,Ge,Xe,Ne);if(kr.signal.aborted)return;kr.signal.removeEventListener("abort",Je),Se.delete(We),Q.delete(We),Xe.forEach(Kt=>Q.delete(Kt.key));let dt=hV([...wt,...At]);if(dt){if(dt.idx>=Ge.length){let Kt=Xe[dt.idx-Ge.length].key;Y.add(Kt)}return _r(Ne,dt.result)}let{loaderData:St,errors:Ot}=cV(O,O.matches,Ge,wt,void 0,Xe,At,ie);if(O.fetchers.has(We)){let Kt=Ip(he.data);O.fetchers.set(We,Kt)}_e(Fe),O.navigation.state==="loading"&&Fe>fe?(Sr(D,"Expected pending action"),B&&B.abort(),Ae(O.navigation.location,{matches:me,loaderData:St,errors:Ot,fetchers:new Map(O.fetchers)})):(q({errors:Ot,loaderData:uV(O.loaderData,St,me,Ot),fetchers:new Map(O.fetchers)}),V=!1)}async function ht(We,Qe,tt,_t,Ut,nr,tr){let $t=O.fetchers.get(We);Lt(We,cw(tr,$t?$t.data:void 0),{flushSync:nr});let kr=new AbortController,Jt=b1(e.history,tt,kr.signal);Q.set(We,kr);let Un=X,he=(await er("loader",Jt,[_t],Ut))[0];if(Qm(he)&&(he=await Dne(he,Jt.signal,!0)||he),Q.get(We)===kr&&Q.delete(We),!Jt.signal.aborted){if(G.has(We)){Lt(We,Ip(void 0));return}if(Jm(he))if(fe>Un){Lt(We,Ip(void 0));return}else{Y.add(We),await _r(Jt,he);return}if(qc(he)){dr(We,Qe,he.error);return}Sr(!Qm(he),"Unhandled fetcher deferred data"),Lt(We,Ip(he.data))}}async function _r(We,Qe,tt){let{submission:_t,fetcherSubmission:Ut,replace:nr}=tt===void 0?{}:tt;Qe.response.headers.has("X-Remix-Revalidate")&&(V=!0);let tr=Qe.response.headers.get("Location");Sr(tr,"Expected a Location header on the redirect Response"),tr=oV(tr,new URL(We.url),l);let $t=Vg(O.location,tr,{_isRedirect:!0});if(r){let be=!1;if(Qe.response.headers.has("X-Remix-Reload-Document"))be=!0;else if(CL.test(tr)){const Ne=e.history.createURL(tr);be=Ne.origin!==t.location.origin||kl(Ne.pathname,l)==null}if(be){nr?t.location.replace(tr):t.location.assign(tr);return}}B=null;let kr=nr===!0?fi.Replace:fi.Push,{formMethod:Jt,formAction:Un,formEncType:de}=O.navigation;!_t&&!Ut&&Jt&&Un&&de&&(_t=mV(O.navigation));let he=_t||Ut;if(V_e.has(Qe.response.status)&&he&&Uu(he.formMethod))await je(kr,$t,{submission:bi({},he,{formAction:tr}),preventScrollReset:M});else{let be=ij($t,_t);await je(kr,$t,{overrideNavigation:be,fetcherSubmission:Ut,preventScrollReset:M})}}async function er(We,Qe,tt,_t){try{let Ut=await Q_e(c,We,Qe,tt,_t,a,i);return await Promise.all(Ut.map((nr,tr)=>{if(nNe(nr)){let $t=nr.result;return{type:Pi.redirect,response:eNe($t,Qe,tt[tr].route.id,_t,l,d.v7_relativeSplatPath)}}return Z_e(nr)}))}catch(Ut){return tt.map(()=>({type:Pi.error,error:Ut}))}}async function ct(We,Qe,tt,_t,Ut){let[nr,...tr]=await Promise.all([tt.length?er("loader",Ut,tt,Qe):[],..._t.map($t=>{if($t.matches&&$t.match&&$t.controller){let kr=b1(e.history,$t.path,$t.controller.signal);return er("loader",kr,[$t.match],$t.matches).then(Jt=>Jt[0])}else return Promise.resolve({type:Pi.error,error:Uc(404,{pathname:$t.path})})})]);return await Promise.all([pV(We,tt,nr,nr.map(()=>Ut.signal),!1,O.loaderData),pV(We,_t.map($t=>$t.match),tr,_t.map($t=>$t.controller?$t.controller.signal:null),!0)]),{loaderResults:nr,fetcherResults:tr}}function Gt(){V=!0,te.push(...Cr()),ce.forEach((We,Qe)=>{Q.has(Qe)&&(se.push(Qe),qe(Qe))})}function Lt(We,Qe,tt){tt===void 0&&(tt={}),O.fetchers.set(We,Qe),q({fetchers:new Map(O.fetchers)},{flushSync:(tt&&tt.flushSync)===!0})}function dr(We,Qe,tt,_t){_t===void 0&&(_t={});let Ut=m2(O.matches,Qe);ye(We),q({errors:{[Ut.route.id]:tt},fetchers:new Map(O.fetchers)},{flushSync:(_t&&_t.flushSync)===!0})}function Ht(We){return d.v7_fetcherPersist&&(W.set(We,(W.get(We)||0)+1),G.has(We)&&G.delete(We)),O.fetchers.get(We)||Ine}function ye(We){let Qe=O.fetchers.get(We);Q.has(We)&&!(Qe&&Qe.state==="loading"&&Se.has(We))&&qe(We),ce.delete(We),Se.delete(We),Y.delete(We),G.delete(We),O.fetchers.delete(We)}function Me(We){if(d.v7_fetcherPersist){let Qe=(W.get(We)||0)-1;Qe<=0?(W.delete(We),G.add(We)):W.set(We,Qe)}else ye(We);q({fetchers:new Map(O.fetchers)})}function qe(We){let Qe=Q.get(We);Sr(Qe,"Expected fetch controller: "+We),Qe.abort(),Q.delete(We)}function it(We){for(let Qe of We){let tt=Ht(Qe),_t=Ip(tt.data);O.fetchers.set(Qe,_t)}}function ze(){let We=[],Qe=!1;for(let tt of Y){let _t=O.fetchers.get(tt);Sr(_t,"Expected fetcher: "+tt),_t.state==="loading"&&(Y.delete(tt),We.push(tt),Qe=!0)}return it(We),Qe}function _e(We){let Qe=[];for(let[tt,_t]of Se)if(_t<We){let Ut=O.fetchers.get(tt);Sr(Ut,"Expected fetcher: "+tt),Ut.state==="loading"&&(qe(tt),Se.delete(tt),Qe.push(tt))}return it(Qe),Qe.length>0}function ut(We,Qe){let tt=O.blockers.get(We)||$1;return Ce.get(We)!==Qe&&Ce.set(We,Qe),tt}function xt(We){O.blockers.delete(We),Ce.delete(We)}function Dt(We,Qe){let tt=O.blockers.get(We)||$1;Sr(tt.state==="unblocked"&&Qe.state==="blocked"||tt.state==="blocked"&&Qe.state==="blocked"||tt.state==="blocked"&&Qe.state==="proceeding"||tt.state==="blocked"&&Qe.state==="unblocked"||tt.state==="proceeding"&&Qe.state==="unblocked","Invalid blocker state transition: "+tt.state+" -> "+Qe.state);let _t=new Map(O.blockers);_t.set(We,Qe),q({blockers:_t})}function Pt(We){let{currentLocation:Qe,nextLocation:tt,historyAction:_t}=We;if(Ce.size===0)return;Ce.size>1&&jh(!1,"A router only supports one blocker at a time");let Ut=Array.from(Ce.entries()),[nr,tr]=Ut[Ut.length-1],$t=O.blockers.get(nr);if(!($t&&$t.state==="proceeding")&&tr({currentLocation:Qe,nextLocation:tt,historyAction:_t}))return nr}function Cr(We){let Qe=[];return ie.forEach((tt,_t)=>{(!We||We(_t))&&(tt.cancel(),Qe.push(_t),ie.delete(_t))}),Qe}function wn(We,Qe,tt){if(m=We,v=Qe,x=tt||null,!b&&O.navigation===nj){b=!0;let _t=jn(O.location,O.matches);_t!=null&&q({restoreScrollPosition:_t})}return()=>{m=null,v=null,x=null}}function fr(We,Qe){return x&&x(We,Qe.map(_t=>Ene(_t,O.loaderData)))||We.key}function Vi(We,Qe){if(m&&v){let tt=fr(We,Qe);m[tt]=v()}}function jn(We,Qe){if(m){let tt=fr(We,Qe),_t=m[tt];if(typeof _t=="number")return _t}return null}function Qo(We){a={},o=b6(We,i,void 0,a)}return P={get basename(){return l},get future(){return d},get state(){return O},get routes(){return s},get window(){return t},initialize:ne,subscribe:we,enableScrollRestoration:wn,navigate:Pe,fetch:lt,revalidate:He,createHref:We=>e.history.createHref(We),encodeLocation:We=>e.history.encodeLocation(We),getFetcher:Ht,deleteFetcher:Me,dispose:ge,getBlocker:ut,deleteBlocker:xt,_internalFetchControllers:Q,_internalActiveDeferreds:ie,_internalSetRoutes:Qo},P}function G_e(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function w6(e,t,r,n,i,a,s,o){let l,c;if(s){l=[];for(let f of t)if(l.push(f),f.route.id===s){c=f;break}}else l=t,c=t[t.length-1];let d=jO(i||".",RO(l,a),kl(e.pathname,r)||e.pathname,o==="path");return i==null&&(d.search=e.search,d.hash=e.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!_L(d.search)&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),n&&r!=="/"&&(d.pathname=d.pathname==="/"?r:Qd([r,d.pathname])),sd(d)}function nV(e,t,r,n){if(!n||!G_e(n))return{path:r};if(n.formMethod&&!aNe(n.formMethod))return{path:r,error:Uc(405,{method:n.formMethod})};let i=()=>({path:r,error:Uc(400,{type:"invalid-body"})}),a=n.formMethod||"get",s=e?a.toUpperCase():a.toLowerCase(),o=Rne(r);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!Uu(s))return i();let p=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((m,x)=>{let[v,b]=x;return""+m+v+"="+b+`
`},""):String(n.body);return{path:r,submission:{formMethod:s,formAction:o,formEncType:n.formEncType,formData:void 0,json:void 0,text:p}}}else if(n.formEncType==="application/json"){if(!Uu(s))return i();try{let p=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:r,submission:{formMethod:s,formAction:o,formEncType:n.formEncType,formData:void 0,json:p,text:void 0}}}catch{return i()}}}Sr(typeof FormData=="function","FormData is not available in this environment");let l,c;if(n.formData)l=S6(n.formData),c=n.formData;else if(n.body instanceof FormData)l=S6(n.body),c=n.body;else if(n.body instanceof URLSearchParams)l=n.body,c=lV(l);else if(n.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(n.body),c=lV(l)}catch{return i()}let d={formMethod:s,formAction:o,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Uu(d.formMethod))return{path:r,submission:d};let f=mu(r);return t&&f.search&&_L(f.search)&&l.append("index",""),f.search="?"+l,{path:sd(f),submission:d}}function K_e(e,t){let r=e;if(t){let n=e.findIndex(i=>i.route.id===t);n>=0&&(r=e.slice(0,n))}return r}function iV(e,t,r,n,i,a,s,o,l,c,d,f,p,m,x,v){let b=v?qc(v[1])?v[1].error:v[1].data:void 0,w=e.createURL(t.location),_=e.createURL(i),C=v&&qc(v[1])?v[0]:void 0,N=C?K_e(r,C):r,R=v?v[1].statusCode:void 0,P=s&&R&&R>=400,O=N.filter((M,B)=>{let{route:U}=M;if(U.lazy)return!0;if(U.loader==null)return!1;if(a)return typeof U.loader!="function"||U.loader.hydrate?!0:t.loaderData[U.id]===void 0&&(!t.errors||t.errors[U.id]===void 0);if(X_e(t.loaderData,t.matches[B],M)||l.some(ee=>ee===M.route.id))return!0;let H=t.matches[B],Z=M;return aV(M,bi({currentUrl:w,currentParams:H.params,nextUrl:_,nextParams:Z.params},n,{actionResult:b,unstable_actionStatus:R,defaultShouldRevalidate:P?!1:o||w.pathname+w.search===_.pathname+_.search||w.search!==_.search||Pne(H,Z)}))}),D=[];return f.forEach((M,B)=>{if(a||!r.some(V=>V.route.id===M.routeId)||d.has(B))return;let U=Ym(m,M.path,x);if(!U){D.push({key:B,routeId:M.routeId,path:M.path,matches:null,match:null,controller:null});return}let H=t.fetchers.get(B),Z=E6(U,M.path),ee=!1;p.has(B)?ee=!1:c.includes(B)?ee=!0:H&&H.state!=="idle"&&H.data===void 0?ee=o:ee=aV(Z,bi({currentUrl:w,currentParams:t.matches[t.matches.length-1].params,nextUrl:_,nextParams:r[r.length-1].params},n,{actionResult:b,unstable_actionStatus:R,defaultShouldRevalidate:P?!1:o})),ee&&D.push({key:B,routeId:M.routeId,path:M.path,matches:U,match:Z,controller:new AbortController})}),[O,D]}function X_e(e,t,r){let n=!t||r.route.id!==t.route.id,i=e[r.route.id]===void 0;return n||i}function Pne(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function aV(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}async function sV(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let i=r[e.id];Sr(i,"No route found in manifest");let a={};for(let s in n){let l=i[s]!==void 0&&s!=="hasErrorBoundary";jh(!l,'Route "'+i.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+s+'" will be ignored.')),!l&&!g_e.has(s)&&(a[s]=n[s])}Object.assign(i,a),Object.assign(i,bi({},t(i),{lazy:void 0}))}function Y_e(e){return Promise.all(e.matches.map(t=>t.resolve()))}async function Q_e(e,t,r,n,i,a,s,o){let l=n.reduce((f,p)=>f.add(p.route.id),new Set),c=new Set,d=await e({matches:i.map(f=>{let p=l.has(f.route.id);return bi({},f,{shouldLoad:p,resolve:x=>(c.add(f.route.id),p?J_e(t,r,f,a,s,x,o):Promise.resolve({type:Pi.data,result:void 0}))})}),request:r,params:i[0].params,context:o});return i.forEach(f=>Sr(c.has(f.route.id),'`match.resolve()` was not called for route id "'+f.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),d.filter((f,p)=>l.has(i[p].route.id))}async function J_e(e,t,r,n,i,a,s){let o,l,c=d=>{let f,p=new Promise((v,b)=>f=b);l=()=>f(),t.signal.addEventListener("abort",l);let m=v=>typeof d!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+r.route.id+"]"))):d({request:t,params:r.params,context:s},...v!==void 0?[v]:[]),x;return a?x=a(v=>m(v)):x=(async()=>{try{return{type:"data",result:await m()}}catch(v){return{type:"error",result:v}}})(),Promise.race([x,p])};try{let d=r.route[e];if(r.route.lazy)if(d){let f,[p]=await Promise.all([c(d).catch(m=>{f=m}),sV(r.route,i,n)]);if(f!==void 0)throw f;o=p}else if(await sV(r.route,i,n),d=r.route[e],d)o=await c(d);else if(e==="action"){let f=new URL(t.url),p=f.pathname+f.search;throw Uc(405,{method:t.method,pathname:p,routeId:r.route.id})}else return{type:Pi.data,result:void 0};else if(d)o=await c(d);else{let f=new URL(t.url),p=f.pathname+f.search;throw Uc(404,{pathname:p})}Sr(o.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(d){return{type:Pi.error,result:d}}finally{l&&t.signal.removeEventListener("abort",l)}return o}async function Z_e(e){let{result:t,type:r,status:n}=e;if(jne(t)){let s;try{let o=t.headers.get("Content-Type");o&&/\bapplication\/json\b/.test(o)?t.body==null?s=null:s=await t.json():s=await t.text()}catch(o){return{type:Pi.error,error:o}}return r===Pi.error?{type:Pi.error,error:new DO(t.status,t.statusText,s),statusCode:t.status,headers:t.headers}:{type:Pi.data,data:s,statusCode:t.status,headers:t.headers}}if(r===Pi.error)return{type:Pi.error,error:t,statusCode:MO(t)?t.status:n};if(iNe(t)){var i,a;return{type:Pi.deferred,deferredData:t,statusCode:(i=t.init)==null?void 0:i.status,headers:((a=t.init)==null?void 0:a.headers)&&new Headers(t.init.headers)}}return{type:Pi.data,data:t,statusCode:n}}function eNe(e,t,r,n,i,a){let s=e.headers.get("Location");if(Sr(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!CL.test(s)){let o=n.slice(0,n.findIndex(l=>l.route.id===r)+1);s=w6(new URL(t.url),o,i,!0,s,a),e.headers.set("Location",s)}return e}function oV(e,t,r){if(CL.test(e)){let n=e,i=n.startsWith("//")?new URL(t.protocol+n):new URL(n),a=kl(i.pathname,r)!=null;if(i.origin===t.origin&&a)return i.pathname+i.search+i.hash}return e}function b1(e,t,r,n){let i=e.createURL(Rne(t)).toString(),a={signal:r};if(n&&Uu(n.formMethod)){let{formMethod:s,formEncType:o}=n;a.method=s.toUpperCase(),o==="application/json"?(a.headers=new Headers({"Content-Type":o}),a.body=JSON.stringify(n.json)):o==="text/plain"?a.body=n.text:o==="application/x-www-form-urlencoded"&&n.formData?a.body=S6(n.formData):a.body=n.formData}return new Request(i,a)}function S6(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,typeof n=="string"?n:n.name);return t}function lV(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function tNe(e,t,r,n,i,a){let s={},o=null,l,c=!1,d={},f=n&&qc(n[1])?n[1].error:void 0;return r.forEach((p,m)=>{let x=t[m].route.id;if(Sr(!Jm(p),"Cannot handle redirect results in processLoaderData"),qc(p)){let v=p.error;f!==void 0&&(v=f,f=void 0),o=o||{};{let b=m2(e,x);o[b.route.id]==null&&(o[b.route.id]=v)}s[x]=void 0,c||(c=!0,l=MO(p.error)?p.error.status:500),p.headers&&(d[x]=p.headers)}else Qm(p)?(i.set(x,p.deferredData),s[x]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(d[x]=p.headers)):(s[x]=p.data,p.statusCode&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(d[x]=p.headers))}),f!==void 0&&n&&(o={[n[0]]:f},s[n[0]]=void 0),{loaderData:s,errors:o,statusCode:l||200,loaderHeaders:d}}function cV(e,t,r,n,i,a,s,o){let{loaderData:l,errors:c}=tNe(t,r,n,i,o);for(let d=0;d<a.length;d++){let{key:f,match:p,controller:m}=a[d];Sr(s!==void 0&&s[d]!==void 0,"Did not find corresponding fetcher result");let x=s[d];if(!(m&&m.signal.aborted))if(qc(x)){let v=m2(e.matches,p==null?void 0:p.route.id);c&&c[v.route.id]||(c=bi({},c,{[v.route.id]:x.error})),e.fetchers.delete(f)}else if(Jm(x))Sr(!1,"Unhandled fetcher revalidation redirect");else if(Qm(x))Sr(!1,"Unhandled fetcher deferred data");else{let v=Ip(x.data);e.fetchers.set(f,v)}}return{loaderData:l,errors:c}}function uV(e,t,r,n){let i=bi({},t);for(let a of r){let s=a.route.id;if(t.hasOwnProperty(s)?t[s]!==void 0&&(i[s]=t[s]):e[s]!==void 0&&a.route.loader&&(i[s]=e[s]),n&&n.hasOwnProperty(s))break}return i}function dV(e){return e?qc(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function m2(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function fV(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Uc(e,t){let{pathname:r,routeId:n,method:i,type:a}=t===void 0?{}:t,s="Unknown Server Error",o="Unknown @remix-run/router error";return e===400?(s="Bad Request",i&&r&&n?o="You made a "+i+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":a==="defer-action"?o="defer() is not supported in actions":a==="invalid-body"&&(o="Unable to encode submission body")):e===403?(s="Forbidden",o='Route "'+n+'" does not match URL "'+r+'"'):e===404?(s="Not Found",o='No route matches URL "'+r+'"'):e===405&&(s="Method Not Allowed",i&&r&&n?o="You made a "+i.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":i&&(o='Invalid request method "'+i.toUpperCase()+'"')),new DO(e||500,s,new Error(o),!0)}function hV(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(Jm(r))return{result:r,idx:t}}}function Rne(e){let t=typeof e=="string"?mu(e):e;return sd(bi({},t,{hash:""}))}function rNe(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function nNe(e){return jne(e.result)&&W_e.has(e.result.status)}function Qm(e){return e.type===Pi.deferred}function qc(e){return e.type===Pi.error}function Jm(e){return(e&&e.type)===Pi.redirect}function iNe(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function jne(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function aNe(e){return H_e.has(e.toLowerCase())}function Uu(e){return $_e.has(e.toLowerCase())}async function pV(e,t,r,n,i,a){for(let s=0;s<r.length;s++){let o=r[s],l=t[s];if(!l)continue;let c=e.find(f=>f.route.id===l.route.id),d=c!=null&&!Pne(c,l)&&(a&&a[l.route.id])!==void 0;if(Qm(o)&&(i||d)){let f=n[s];Sr(f,"Expected an AbortSignal for revalidating fetcher deferred result"),await Dne(o,f,i).then(p=>{p&&(r[s]=p||r[s])})}}}async function Dne(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:Pi.data,data:e.deferredData.unwrappedData}}catch(i){return{type:Pi.error,error:i}}return{type:Pi.data,data:e.deferredData.data}}}function _L(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function E6(e,t){let r=typeof t=="string"?mu(t).search:t.search;if(e[e.length-1].route.index&&_L(r||""))return e[e.length-1];let n=Nne(e);return n[n.length-1]}function mV(e){let{formMethod:t,formAction:r,formEncType:n,text:i,formData:a,json:s}=e;if(!(!t||!r||!n)){if(i!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:i};if(a!=null)return{formMethod:t,formAction:r,formEncType:n,formData:a,json:void 0,text:void 0};if(s!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:s,text:void 0}}}function ij(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function sNe(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function cw(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function oNe(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Ip(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function lNe(e,t){try{let r=e.sessionStorage.getItem(One);if(r){let n=JSON.parse(r);for(let[i,a]of Object.entries(n||{}))a&&Array.isArray(a)&&t.set(i,new Set(a||[]))}}catch{}}function cNe(e,t){if(t.size>0){let r={};for(let[n,i]of t)r[n]=[...i];try{e.sessionStorage.setItem(One,JSON.stringify(r))}catch(n){jh(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}/**
 * React Router v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function A0(){return A0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A0.apply(this,arguments)}const Wy=I.createContext(null),yE=I.createContext(null),TA=I.createContext(null),hc=I.createContext(null),Vy=I.createContext(null),pc=I.createContext({outlet:null,matches:[],isDataRoute:!1}),Mne=I.createContext(null);function Fne(e,t){let{relative:r}=t===void 0?{}:t;W0()||Sr(!1);let{basename:n,navigator:i}=I.useContext(hc),{hash:a,pathname:s,search:o}=qy(e,{relative:r}),l=s;return n!=="/"&&(l=s==="/"?n:Qd([n,s])),i.createHref({pathname:l,search:o,hash:a})}function W0(){return I.useContext(Vy)!=null}function Il(){return W0()||Sr(!1),I.useContext(Vy).location}function uNe(){return I.useContext(Vy).navigationType}function dNe(e){W0()||Sr(!1);let{pathname:t}=Il();return I.useMemo(()=>cS(e,t),[t,e])}function Lne(e){I.useContext(hc).static||I.useLayoutEffect(e)}function gu(){let{isDataRoute:e}=I.useContext(pc);return e?kNe():fNe()}function fNe(){W0()||Sr(!1);let e=I.useContext(Wy),{basename:t,future:r,navigator:n}=I.useContext(hc),{matches:i}=I.useContext(pc),{pathname:a}=Il(),s=JSON.stringify(RO(i,r.v7_relativeSplatPath)),o=I.useRef(!1);return Lne(()=>{o.current=!0}),I.useCallback(function(c,d){if(d===void 0&&(d={}),!o.current)return;if(typeof c=="number"){n.go(c);return}let f=jO(c,JSON.parse(s),a,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Qd([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,s,a,e])}const Bne=I.createContext(null);function hNe(){return I.useContext(Bne)}function Une(e){let t=I.useContext(pc).outlet;return t&&I.createElement(Bne.Provider,{value:e},t)}function Ex(){let{matches:e}=I.useContext(pc),t=e[e.length-1];return t?t.params:{}}function qy(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=I.useContext(hc),{matches:i}=I.useContext(pc),{pathname:a}=Il(),s=JSON.stringify(RO(i,n.v7_relativeSplatPath));return I.useMemo(()=>jO(e,JSON.parse(s),a,r==="path"),[e,s,a,r])}function $ne(e,t){return zne(e,t)}function zne(e,t,r,n){W0()||Sr(!1);let{navigator:i}=I.useContext(hc),{matches:a}=I.useContext(pc),s=a[a.length-1],o=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let c=Il(),d;if(t){var f;let b=typeof t=="string"?mu(t):t;l==="/"||(f=b.pathname)!=null&&f.startsWith(l)||Sr(!1),d=b}else d=c;let p=d.pathname||"/",m=p;if(l!=="/"){let b=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(b.length).join("/")}let x=Ym(e,{pathname:m}),v=Hne(x&&x.map(b=>Object.assign({},b,{params:Object.assign({},o,b.params),pathname:Qd([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:Qd([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,r,n);return t&&v?I.createElement(Vy.Provider,{value:{location:A0({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:fi.Pop}},v):v}function pNe(){let e=Kne(),t=MO(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),r?I.createElement("pre",{style:i},r):null,null)}const mNe=I.createElement(pNe,null);class gNe extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?I.createElement(pc.Provider,{value:this.props.routeContext},I.createElement(Mne.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xNe(e){let{routeContext:t,match:r,children:n}=e,i=I.useContext(Wy);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),I.createElement(pc.Provider,{value:t},n)}function Hne(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if((a=r)!=null&&a.errors)e=r.matches;else return null}let s=e,o=(i=r)==null?void 0:i.errors;if(o!=null){let d=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);d>=0||Sr(!1),s=s.slice(0,Math.min(s.length,d+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:p,errors:m}=r,x=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||x){l=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((d,f,p)=>{let m,x=!1,v=null,b=null;r&&(m=o&&f.route.id?o[f.route.id]:void 0,v=f.route.errorElement||mNe,l&&(c<0&&p===0?(_Ne("route-fallback"),x=!0,b=null):c===p&&(x=!0,b=f.route.hydrateFallbackElement||null)));let w=t.concat(s.slice(0,p+1)),_=()=>{let C;return m?C=v:x?C=b:f.route.Component?C=I.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=d,I.createElement(xNe,{match:f,routeContext:{outlet:d,matches:w,isDataRoute:r!=null},children:C})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?I.createElement(gNe,{location:r.location,revalidation:r.revalidation,component:v,error:m,children:_(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):_()},null)}var Wne=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Wne||{}),_l=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(_l||{});function NL(e){let t=I.useContext(Wy);return t||Sr(!1),t}function V0(e){let t=I.useContext(yE);return t||Sr(!1),t}function vNe(e){let t=I.useContext(pc);return t||Sr(!1),t}function bE(e){let t=vNe(),r=t.matches[t.matches.length-1];return r.route.id||Sr(!1),r.route.id}function Vne(){return bE(_l.UseRouteId)}function qne(){return V0(_l.UseNavigation).navigation}function yNe(){let e=NL(),t=V0(_l.UseRevalidator);return I.useMemo(()=>({revalidate:e.router.revalidate,state:t.revalidation}),[e.router.revalidate,t.revalidation])}function Gne(){let{matches:e,loaderData:t}=V0(_l.UseMatches);return I.useMemo(()=>e.map(r=>Ene(r,t)),[e,t])}function bNe(){let e=V0(_l.UseLoaderData),t=bE(_l.UseLoaderData);if(e.errors&&e.errors[t]!=null){console.error("You cannot `useLoaderData` in an errorElement (routeId: "+t+")");return}return e.loaderData[t]}function wNe(e){return V0(_l.UseRouteLoaderData).loaderData[e]}function SNe(){let e=V0(_l.UseActionData),t=bE(_l.UseLoaderData);return e.actionData?e.actionData[t]:void 0}function Kne(){var e;let t=I.useContext(Mne),r=V0(_l.UseRouteError),n=bE(_l.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Xne(){let e=I.useContext(TA);return e==null?void 0:e._data}function ENe(){let e=I.useContext(TA);return e==null?void 0:e._error}let CNe=0;function Yne(e){let{router:t,basename:r}=NL(Wne.UseBlocker),n=V0(_l.UseBlocker),[i,a]=I.useState(""),s=I.useCallback(o=>{if(typeof e!="function")return!!e;if(r==="/")return e(o);let{currentLocation:l,nextLocation:c,historyAction:d}=o;return e({currentLocation:A0({},l,{pathname:kl(l.pathname,r)||l.pathname}),nextLocation:A0({},c,{pathname:kl(c.pathname,r)||c.pathname}),historyAction:d})},[r,e]);return I.useEffect(()=>{let o=String(++CNe);return a(o),()=>t.deleteBlocker(o)},[t]),I.useEffect(()=>{i!==""&&t.getBlocker(i,s)},[t,i,s]),i&&n.blockers.has(i)?n.blockers.get(i):$1}function kNe(){let{router:e}=NL(),t=bE(_l.UseNavigateStable),r=I.useRef(!1);return Lne(()=>{r.current=!0}),I.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,A0({fromRouteId:t},a)))},[e,t])}const gV={};function _Ne(e,t,r){gV[e]||(gV[e]=!0)}const NNe="startTransition",xV=Gv[NNe];function ANe(e){let{basename:t,children:r,initialEntries:n,initialIndex:i,future:a}=e,s=I.useRef();s.current==null&&(s.current=yne({initialEntries:n,initialIndex:i,v5Compat:!0}));let o=s.current,[l,c]=I.useState({action:o.action,location:o.location}),{v7_startTransition:d}=a||{},f=I.useCallback(p=>{d&&xV?xV(()=>c(p)):c(p)},[c,d]);return I.useLayoutEffect(()=>o.listen(f),[o,f]),I.createElement(Gy,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:a})}function TNe(e){let{to:t,replace:r,state:n,relative:i}=e;W0()||Sr(!1);let{future:a,static:s}=I.useContext(hc),{matches:o}=I.useContext(pc),{pathname:l}=Il(),c=gu(),d=jO(t,RO(o,a.v7_relativeSplatPath),l,i==="path"),f=JSON.stringify(d);return I.useEffect(()=>c(JSON.parse(f),{replace:r,state:n,relative:i}),[c,f,i,r,n]),null}function Qne(e){return Une(e.context)}function da(e){Sr(!1)}function Gy(e){let{basename:t="/",children:r=null,location:n,navigationType:i=fi.Pop,navigator:a,static:s=!1,future:o}=e;W0()&&Sr(!1);let l=t.replace(/^\/*/,"/"),c=I.useMemo(()=>({basename:l,navigator:a,static:s,future:A0({v7_relativeSplatPath:!1},o)}),[l,o,a,s]);typeof n=="string"&&(n=mu(n));let{pathname:d="/",search:f="",hash:p="",state:m=null,key:x="default"}=n,v=I.useMemo(()=>{let b=kl(d,l);return b==null?null:{location:{pathname:b,search:f,hash:p,state:m,key:x},navigationType:i}},[l,d,f,p,m,x,i]);return v==null?null:I.createElement(hc.Provider,{value:c},I.createElement(Vy.Provider,{children:r,value:v}))}function Jne(e){let{children:t,location:r}=e;return $ne(uS(t),r)}function INe(e){let{children:t,errorElement:r,resolve:n}=e;return I.createElement(PNe,{resolve:n,errorElement:r},I.createElement(RNe,null,t))}var Oc=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(Oc||{});const ONe=new Promise(()=>{});class PNe extends I.Component{constructor(t){super(t),this.state={error:null}}static getDerivedStateFromError(t){return{error:t}}componentDidCatch(t,r){console.error("<Await> caught the following error during render",t,r)}render(){let{children:t,errorElement:r,resolve:n}=this.props,i=null,a=Oc.pending;if(!(n instanceof Promise))a=Oc.success,i=Promise.resolve(),Object.defineProperty(i,"_tracked",{get:()=>!0}),Object.defineProperty(i,"_data",{get:()=>n});else if(this.state.error){a=Oc.error;let s=this.state.error;i=Promise.reject().catch(()=>{}),Object.defineProperty(i,"_tracked",{get:()=>!0}),Object.defineProperty(i,"_error",{get:()=>s})}else n._tracked?(i=n,a=i._error!==void 0?Oc.error:i._data!==void 0?Oc.success:Oc.pending):(a=Oc.pending,Object.defineProperty(n,"_tracked",{get:()=>!0}),i=n.then(s=>Object.defineProperty(n,"_data",{get:()=>s}),s=>Object.defineProperty(n,"_error",{get:()=>s})));if(a===Oc.error&&i._error instanceof AA)throw ONe;if(a===Oc.error&&!r)throw i._error;if(a===Oc.error)return I.createElement(TA.Provider,{value:i,children:r});if(a===Oc.success)return I.createElement(TA.Provider,{value:i,children:t});throw i}}function RNe(e){let{children:t}=e,r=Xne(),n=typeof t=="function"?t(r):t;return I.createElement(I.Fragment,null,n)}function uS(e,t){t===void 0&&(t=[]);let r=[];return I.Children.forEach(e,(n,i)=>{if(!I.isValidElement(n))return;let a=[...t,i];if(n.type===I.Fragment){r.push.apply(r,uS(n.props.children,a));return}n.type!==da&&Sr(!1),!n.props.index||!n.props.children||Sr(!1);let s={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=uS(n.props.children,a)),r.push(s)}),r}function jNe(e){return Hne(e)}function AL(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:I.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:I.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:I.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}function DNe(e,t){return kL({basename:t==null?void 0:t.basename,future:A0({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:yne({initialEntries:t==null?void 0:t.initialEntries,initialIndex:t==null?void 0:t.initialIndex}),hydrationData:t==null?void 0:t.hydrationData,routes:e,mapRouteProperties:AL,unstable_dataStrategy:t==null?void 0:t.unstable_dataStrategy}).initialize()}/**
 * React Router DOM v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xl(){return xl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xl.apply(this,arguments)}function TL(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}const PN="get",aj="application/x-www-form-urlencoded";function FO(e){return e!=null&&typeof e.tagName=="string"}function MNe(e){return FO(e)&&e.tagName.toLowerCase()==="button"}function FNe(e){return FO(e)&&e.tagName.toLowerCase()==="form"}function LNe(e){return FO(e)&&e.tagName.toLowerCase()==="input"}function BNe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function UNe(e,t){return e.button===0&&(!t||t==="_self")&&!BNe(e)}function IA(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function $Ne(e,t){let r=IA(e);return t&&t.forEach((n,i)=>{r.has(i)||t.getAll(i).forEach(a=>{r.append(i,a)})}),r}let t_=null;function zNe(){if(t_===null)try{new FormData(document.createElement("form"),0),t_=!1}catch{t_=!0}return t_}const HNe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function sj(e){return e!=null&&!HNe.has(e)?null:e}function WNe(e,t){let r,n,i,a,s;if(FNe(e)){let o=e.getAttribute("action");n=o?kl(o,t):null,r=e.getAttribute("method")||PN,i=sj(e.getAttribute("enctype"))||aj,a=new FormData(e)}else if(MNe(e)||LNe(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||o.getAttribute("action");if(n=l?kl(l,t):null,r=e.getAttribute("formmethod")||o.getAttribute("method")||PN,i=sj(e.getAttribute("formenctype"))||sj(o.getAttribute("enctype"))||aj,a=new FormData(o,e),!zNe()){let{name:c,type:d,value:f}=e;if(d==="image"){let p=c?c+".":"";a.append(p+"x","0"),a.append(p+"y","0")}else c&&a.append(c,f)}}else{if(FO(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=PN,n=null,i=aj,s=e}return a&&i==="text/plain"&&(s=a,a=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:a,body:s}}const VNe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],qNe=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],GNe=["fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","unstable_viewTransition"],KNe="6";try{window.__reactRouterVersion=KNe}catch{}function XNe(e,t){return kL({basename:t==null?void 0:t.basename,future:xl({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:bne({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||Zne(),routes:e,mapRouteProperties:AL,unstable_dataStrategy:t==null?void 0:t.unstable_dataStrategy,window:t==null?void 0:t.window}).initialize()}function YNe(e,t){return kL({basename:t==null?void 0:t.basename,future:xl({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:wne({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||Zne(),routes:e,mapRouteProperties:AL,unstable_dataStrategy:t==null?void 0:t.unstable_dataStrategy,window:t==null?void 0:t.window}).initialize()}function Zne(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=xl({},t,{errors:QNe(t.errors)})),t}function QNe(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,i]of t)if(i&&i.__type==="RouteErrorResponse")r[n]=new DO(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let a=window[i.__subType];if(typeof a=="function")try{let s=new a(i.message);s.stack="",r[n]=s}catch{}}if(r[n]==null){let a=new Error(i.message);a.stack="",r[n]=a}}else r[n]=i;return r}const IL=I.createContext({isTransitioning:!1}),OL=I.createContext(new Map),JNe="startTransition",T0=Gv[JNe],ZNe="flushSync",vV=p_e[ZNe],eAe="useId",yV=Gv[eAe];function tAe(e){T0?T0(e):e()}function uw(e){vV?vV(e):e()}class rAe{constructor(){this.status="pending",this.promise=new Promise((t,r)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",r(n))}})}}function nAe(e){let{fallbackElement:t,router:r,future:n}=e,[i,a]=I.useState(r.state),[s,o]=I.useState(),[l,c]=I.useState({isTransitioning:!1}),[d,f]=I.useState(),[p,m]=I.useState(),[x,v]=I.useState(),b=I.useRef(new Map),{v7_startTransition:w}=n||{},_=I.useCallback(O=>{w?tAe(O):O()},[w]),C=I.useCallback((O,D)=>{let{deletedFetchers:M,unstable_flushSync:B,unstable_viewTransitionOpts:U}=D;M.forEach(Z=>b.current.delete(Z)),O.fetchers.forEach((Z,ee)=>{Z.data!==void 0&&b.current.set(ee,Z.data)});let H=r.window==null||typeof r.window.document.startViewTransition!="function";if(!U||H){B?uw(()=>a(O)):_(()=>a(O));return}if(B){uw(()=>{p&&(d&&d.resolve(),p.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:U.currentLocation,nextLocation:U.nextLocation})});let Z=r.window.document.startViewTransition(()=>{uw(()=>a(O))});Z.finished.finally(()=>{uw(()=>{f(void 0),m(void 0),o(void 0),c({isTransitioning:!1})})}),uw(()=>m(Z));return}p?(d&&d.resolve(),p.skipTransition(),v({state:O,currentLocation:U.currentLocation,nextLocation:U.nextLocation})):(o(O),c({isTransitioning:!0,flushSync:!1,currentLocation:U.currentLocation,nextLocation:U.nextLocation}))},[r.window,p,d,b,_]);I.useLayoutEffect(()=>r.subscribe(C),[r,C]),I.useEffect(()=>{l.isTransitioning&&!l.flushSync&&f(new rAe)},[l]),I.useEffect(()=>{if(d&&s&&r.window){let O=s,D=d.promise,M=r.window.document.startViewTransition(async()=>{_(()=>a(O)),await D});M.finished.finally(()=>{f(void 0),m(void 0),o(void 0),c({isTransitioning:!1})}),m(M)}},[_,s,d,r.window]),I.useEffect(()=>{d&&s&&i.location.key===s.location.key&&d.resolve()},[d,p,i.location,s]),I.useEffect(()=>{!l.isTransitioning&&x&&(o(x.state),c({isTransitioning:!0,flushSync:!1,currentLocation:x.currentLocation,nextLocation:x.nextLocation}),v(void 0))},[l.isTransitioning,x]),I.useEffect(()=>{},[]);let N=I.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:O=>r.navigate(O),push:(O,D,M)=>r.navigate(O,{state:D,preventScrollReset:M==null?void 0:M.preventScrollReset}),replace:(O,D,M)=>r.navigate(O,{replace:!0,state:D,preventScrollReset:M==null?void 0:M.preventScrollReset})}),[r]),R=r.basename||"/",P=I.useMemo(()=>({router:r,navigator:N,static:!1,basename:R}),[r,N,R]);return I.createElement(I.Fragment,null,I.createElement(Wy.Provider,{value:P},I.createElement(yE.Provider,{value:i},I.createElement(OL.Provider,{value:b.current},I.createElement(IL.Provider,{value:l},I.createElement(Gy,{basename:R,location:i.location,navigationType:i.historyAction,navigator:N,future:{v7_relativeSplatPath:r.future.v7_relativeSplatPath}},i.initialized||r.future.v7_partialHydration?I.createElement(iAe,{routes:r.routes,future:r.future,state:i}):t))))),null)}function iAe(e){let{routes:t,future:r,state:n}=e;return zne(t,void 0,n,r)}function eie(e){let{basename:t,children:r,future:n,window:i}=e,a=I.useRef();a.current==null&&(a.current=bne({window:i,v5Compat:!0}));let s=a.current,[o,l]=I.useState({action:s.action,location:s.location}),{v7_startTransition:c}=n||{},d=I.useCallback(f=>{c&&T0?T0(()=>l(f)):l(f)},[l,c]);return I.useLayoutEffect(()=>s.listen(d),[s,d]),I.createElement(Gy,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:s,future:n})}function aAe(e){let{basename:t,children:r,future:n,window:i}=e,a=I.useRef();a.current==null&&(a.current=wne({window:i,v5Compat:!0}));let s=a.current,[o,l]=I.useState({action:s.action,location:s.location}),{v7_startTransition:c}=n||{},d=I.useCallback(f=>{c&&T0?T0(()=>l(f)):l(f)},[l,c]);return I.useLayoutEffect(()=>s.listen(d),[s,d]),I.createElement(Gy,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:s,future:n})}function sAe(e){let{basename:t,children:r,future:n,history:i}=e,[a,s]=I.useState({action:i.action,location:i.location}),{v7_startTransition:o}=n||{},l=I.useCallback(c=>{o&&T0?T0(()=>s(c)):s(c)},[s,o]);return I.useLayoutEffect(()=>i.listen(l),[i,l]),I.createElement(Gy,{basename:t,children:r,location:a.location,navigationType:a.action,navigator:i,future:n})}const oAe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lAe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ai=I.forwardRef(function(t,r){let{onClick:n,relative:i,reloadDocument:a,replace:s,state:o,target:l,to:c,preventScrollReset:d,unstable_viewTransition:f}=t,p=TL(t,VNe),{basename:m}=I.useContext(hc),x,v=!1;if(typeof c=="string"&&lAe.test(c)&&(x=c,oAe))try{let C=new URL(window.location.href),N=c.startsWith("//")?new URL(C.protocol+c):new URL(c),R=kl(N.pathname,m);N.origin===C.origin&&R!=null?c=R+N.search+N.hash:v=!0}catch{}let b=Fne(c,{relative:i}),w=rie(c,{replace:s,state:o,target:l,preventScrollReset:d,relative:i,unstable_viewTransition:f});function _(C){n&&n(C),C.defaultPrevented||w(C)}return I.createElement("a",xl({},p,{href:x||b,onClick:v||a?n:_,ref:r,target:l}))}),Ul=I.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:i=!1,className:a="",end:s=!1,style:o,to:l,unstable_viewTransition:c,children:d}=t,f=TL(t,qNe),p=qy(l,{relative:f.relative}),m=Il(),x=I.useContext(yE),{navigator:v,basename:b}=I.useContext(hc),w=x!=null&&oie(p)&&c===!0,_=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,C=m.pathname,N=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;i||(C=C.toLowerCase(),N=N?N.toLowerCase():null,_=_.toLowerCase()),N&&b&&(N=kl(N,b)||N);const R=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let P=C===_||!s&&C.startsWith(_)&&C.charAt(R)==="/",O=N!=null&&(N===_||!s&&N.startsWith(_)&&N.charAt(_.length)==="/"),D={isActive:P,isPending:O,isTransitioning:w},M=P?n:void 0,B;typeof a=="function"?B=a(D):B=[a,P?"active":null,O?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let U=typeof o=="function"?o(D):o;return I.createElement(ai,xl({},f,{"aria-current":M,className:B,ref:r,style:U,to:l,unstable_viewTransition:c}),typeof d=="function"?d(D):d)}),tie=I.forwardRef((e,t)=>{let{fetcherKey:r,navigate:n,reloadDocument:i,replace:a,state:s,method:o=PN,action:l,onSubmit:c,relative:d,preventScrollReset:f,unstable_viewTransition:p}=e,m=TL(e,GNe),x=RL(),v=aie(l,{relative:d}),b=o.toLowerCase()==="get"?"get":"post",w=_=>{if(c&&c(_),_.defaultPrevented)return;_.preventDefault();let C=_.nativeEvent.submitter,N=(C==null?void 0:C.getAttribute("formmethod"))||o;x(C||_.currentTarget,{fetcherKey:r,method:N,navigate:n,replace:a,state:s,relative:d,preventScrollReset:f,unstable_viewTransition:p})};return I.createElement("form",xl({ref:t,method:b,action:v,onSubmit:i?c:w},m))});function cAe(e){let{getKey:t,storageKey:r}=e;return sie({getKey:t,storageKey:r}),null}var ty;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ty||(ty={}));var dS;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(dS||(dS={}));function LO(e){let t=I.useContext(Wy);return t||Sr(!1),t}function PL(e){let t=I.useContext(yE);return t||Sr(!1),t}function rie(e,t){let{target:r,replace:n,state:i,preventScrollReset:a,relative:s,unstable_viewTransition:o}=t===void 0?{}:t,l=gu(),c=Il(),d=qy(e,{relative:s});return I.useCallback(f=>{if(UNe(f,r)){f.preventDefault();let p=n!==void 0?n:sd(c)===sd(d);l(e,{replace:p,state:i,preventScrollReset:a,relative:s,unstable_viewTransition:o})}},[c,l,d,n,i,r,e,a,s,o])}function nie(e){let t=I.useRef(IA(e)),r=I.useRef(!1),n=Il(),i=I.useMemo(()=>$Ne(n.search,r.current?null:t.current),[n.search]),a=gu(),s=I.useCallback((o,l)=>{const c=IA(typeof o=="function"?o(i):o);r.current=!0,a("?"+c,l)},[a,i]);return[i,s]}function uAe(){if(typeof document>"u")throw new Error("You are calling submit during the server render. Try calling submit within a `useEffect` or callback instead.")}let dAe=0,iie=()=>"__"+String(++dAe)+"__";function RL(){let{router:e}=LO(ty.UseSubmit),{basename:t}=I.useContext(hc),r=Vne();return I.useCallback(function(n,i){i===void 0&&(i={}),uAe();let{action:a,method:s,encType:o,formData:l,body:c}=WNe(n,t);if(i.navigate===!1){let d=i.fetcherKey||iie();e.fetch(d,r,i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||s,formEncType:i.encType||o,unstable_flushSync:i.unstable_flushSync})}else e.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||s,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:r,unstable_flushSync:i.unstable_flushSync,unstable_viewTransition:i.unstable_viewTransition})},[e,t,r])}function aie(e,t){let{relative:r}=t===void 0?{}:t,{basename:n}=I.useContext(hc),i=I.useContext(pc);i||Sr(!1);let[a]=i.matches.slice(-1),s=xl({},qy(e||".",{relative:r})),o=Il();if(e==null){s.search=o.search;let l=new URLSearchParams(s.search);l.has("index")&&l.get("index")===""&&(l.delete("index"),s.search=l.toString()?"?"+l.toString():"")}return(!e||e===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Qd([n,s.pathname])),sd(s)}function fAe(e){var t;let{key:r}=e===void 0?{}:e,{router:n}=LO(ty.UseFetcher),i=PL(dS.UseFetcher),a=I.useContext(OL),s=I.useContext(pc),o=(t=s.matches[s.matches.length-1])==null?void 0:t.route.id;a||Sr(!1),s||Sr(!1),o==null&&Sr(!1);let l=yV?yV():"",[c,d]=I.useState(r||l);r&&r!==c?d(r):c||d(iie()),I.useEffect(()=>(n.getFetcher(c),()=>{n.deleteFetcher(c)}),[n,c]);let f=I.useCallback((_,C)=>{o||Sr(!1),n.fetch(c,o,_,C)},[c,o,n]),p=RL(),m=I.useCallback((_,C)=>{p(_,xl({},C,{navigate:!1,fetcherKey:c}))},[c,p]),x=I.useMemo(()=>I.forwardRef((C,N)=>I.createElement(tie,xl({},C,{navigate:!1,fetcherKey:c,ref:N}))),[c]),v=i.fetchers.get(c)||Ine,b=a.get(c);return I.useMemo(()=>xl({Form:x,submit:m,load:f},v,{data:b}),[x,m,f,v,b])}function hAe(){let e=PL(dS.UseFetchers);return Array.from(e.fetchers.entries()).map(t=>{let[r,n]=t;return xl({},n,{key:r})})}const bV="react-router-scroll-positions";let r_={};function sie(e){let{getKey:t,storageKey:r}=e===void 0?{}:e,{router:n}=LO(ty.UseScrollRestoration),{restoreScrollPosition:i,preventScrollReset:a}=PL(dS.UseScrollRestoration),{basename:s}=I.useContext(hc),o=Il(),l=Gne(),c=qne();I.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),mAe(I.useCallback(()=>{if(c.state==="idle"){let d=(t?t(o,l):null)||o.key;r_[d]=window.scrollY}try{sessionStorage.setItem(r||bV,JSON.stringify(r_))}catch{}window.history.scrollRestoration="auto"},[r,t,c.state,o,l])),typeof document<"u"&&(I.useLayoutEffect(()=>{try{let d=sessionStorage.getItem(r||bV);d&&(r_=JSON.parse(d))}catch{}},[r]),I.useLayoutEffect(()=>{let d=t&&s!=="/"?(p,m)=>t(xl({},p,{pathname:kl(p.pathname,s)||p.pathname}),m):t,f=n==null?void 0:n.enableScrollRestoration(r_,()=>window.scrollY,d);return()=>f&&f()},[n,s,t]),I.useLayoutEffect(()=>{if(i!==!1){if(typeof i=="number"){window.scrollTo(0,i);return}if(o.hash){let d=document.getElementById(decodeURIComponent(o.hash.slice(1)));if(d){d.scrollIntoView();return}}a!==!0&&window.scrollTo(0,0)}},[o,i,a]))}function pAe(e,t){let{capture:r}=t||{};I.useEffect(()=>{let n=r!=null?{capture:r}:void 0;return window.addEventListener("beforeunload",e,n),()=>{window.removeEventListener("beforeunload",e,n)}},[e,r])}function mAe(e,t){let{capture:r}={};I.useEffect(()=>{let n=r!=null?{capture:r}:void 0;return window.addEventListener("pagehide",e,n),()=>{window.removeEventListener("pagehide",e,n)}},[e,r])}function gAe(e){let{when:t,message:r}=e,n=Yne(t);I.useEffect(()=>{n.state==="blocked"&&(window.confirm(r)?setTimeout(n.proceed,0):n.reset())},[n,r]),I.useEffect(()=>{n.state==="blocked"&&!t&&n.reset()},[n,t])}function oie(e,t){t===void 0&&(t={});let r=I.useContext(IL);r==null&&Sr(!1);let{basename:n}=LO(ty.useViewTransitionState),i=qy(e,{relative:t.relative});if(!r.isTransitioning)return!1;let a=kl(r.currentLocation.pathname,n)||r.currentLocation.pathname,s=kl(r.nextLocation.pathname,n)||r.nextLocation.pathname;return cS(i.pathname,s)!=null||cS(i.pathname,a)!=null}const xAe=Object.freeze(Object.defineProperty({__proto__:null,AbortedDeferredError:AA,Await:INe,BrowserRouter:eie,Form:tie,HashRouter:aAe,Link:ai,MemoryRouter:ANe,NavLink:Ul,Navigate:TNe,get NavigationType(){return fi},Outlet:Qne,Route:da,Router:Gy,RouterProvider:nAe,Routes:Jne,ScrollRestoration:cAe,UNSAFE_DataRouterContext:Wy,UNSAFE_DataRouterStateContext:yE,UNSAFE_ErrorResponseImpl:DO,UNSAFE_FetchersContext:OL,UNSAFE_LocationContext:Vy,UNSAFE_NavigationContext:hc,UNSAFE_RouteContext:pc,UNSAFE_ViewTransitionContext:IL,UNSAFE_useRouteId:Vne,UNSAFE_useScrollRestoration:sie,createBrowserRouter:XNe,createHashRouter:YNe,createMemoryRouter:DNe,createPath:sd,createRoutesFromChildren:uS,createRoutesFromElements:uS,createSearchParams:IA,defer:B_e,generatePath:A_e,isRouteErrorResponse:MO,json:D_e,matchPath:cS,matchRoutes:Ym,parsePath:mu,redirect:Ane,redirectDocument:U_e,renderMatches:jNe,resolvePath:_ne,unstable_HistoryRouter:sAe,unstable_usePrompt:gAe,unstable_useViewTransitionState:oie,useActionData:SNe,useAsyncError:ENe,useAsyncValue:Xne,useBeforeUnload:pAe,useBlocker:Yne,useFetcher:fAe,useFetchers:hAe,useFormAction:aie,useHref:Fne,useInRouterContext:W0,useLinkClickHandler:rie,useLoaderData:bNe,useLocation:Il,useMatch:dNe,useMatches:Gne,useNavigate:gu,useNavigation:qne,useNavigationType:uNe,useOutlet:Une,useOutletContext:hNe,useParams:Ex,useResolvedPath:qy,useRevalidator:yNe,useRouteError:Kne,useRouteLoaderData:wNe,useRoutes:$ne,useSearchParams:nie,useSubmit:RL},Symbol.toStringTag,{value:"Module"}));var q0={},Wi={},Mi={},Ky={},lie={},wE={},vAe=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(wE,"__esModule",{value:!0});wE.STGeneralError=void 0;var yAe=function(e){vAe(t,e);function t(r){var n=e.call(this,r)||this;return n.isSuperTokensGeneralError=!0,n}return t.isThisError=function(r){return r.isSuperTokensGeneralError===!0},t}(Error);wE.STGeneralError=yAe;(function(e){function t(n){for(var i in n)e.hasOwnProperty(i)||(e[i]=n[i])}e.__esModule=!0;let r=wE;r.default!==void 0?t(r):t({default:r,...r})})(lie);Object.defineProperty(Ky,"__esModule",{value:!0});var bAe=lie;Ky.default=bAe.STGeneralError;var jL={},DL={},cie={},Cx={},BO={},xu={},UO={},zd=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},Hd=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(UO,"__esModule",{value:!0});UO.defaultWindowHandlerImplementation=void 0;function In(){if(typeof window>"u")throw Error("If you are using this package with server-side rendering, please make sure that you are checking if the window object is defined.");return window}var wAe={key:function(e){return zd(this,void 0,void 0,function(){return Hd(this,function(t){return[2,In().localStorage.key(e)]})})},clear:function(){return zd(this,void 0,void 0,function(){return Hd(this,function(e){return[2,In().localStorage.clear()]})})},getItem:function(e){return zd(this,void 0,void 0,function(){return Hd(this,function(t){return[2,In().localStorage.getItem(e)]})})},removeItem:function(e){return zd(this,void 0,void 0,function(){return Hd(this,function(t){return[2,In().localStorage.removeItem(e)]})})},setItem:function(e,t){return zd(this,void 0,void 0,function(){return Hd(this,function(r){return[2,In().localStorage.setItem(e,t)]})})},keySync:function(e){return In().localStorage.key(e)},clearSync:function(){return In().localStorage.clear()},getItemSync:function(e){return In().localStorage.getItem(e)},removeItemSync:function(e){return In().localStorage.removeItem(e)},setItemSync:function(e,t){return In().localStorage.setItem(e,t)}},SAe={key:function(e){return zd(this,void 0,void 0,function(){return Hd(this,function(t){return[2,In().sessionStorage.key(e)]})})},clear:function(){return zd(this,void 0,void 0,function(){return Hd(this,function(e){return[2,In().sessionStorage.clear()]})})},getItem:function(e){return zd(this,void 0,void 0,function(){return Hd(this,function(t){return[2,In().sessionStorage.getItem(e)]})})},removeItem:function(e){return zd(this,void 0,void 0,function(){return Hd(this,function(t){return[2,In().sessionStorage.removeItem(e)]})})},setItem:function(e,t){return zd(this,void 0,void 0,function(){return Hd(this,function(r){return[2,In().sessionStorage.setItem(e,t)]})})},keySync:function(e){return In().sessionStorage.key(e)},clearSync:function(){return In().sessionStorage.clear()},getItemSync:function(e){return In().sessionStorage.getItem(e)},removeItemSync:function(e){return In().sessionStorage.removeItem(e)},setItemSync:function(e,t){return In().sessionStorage.setItem(e,t)}};UO.defaultWindowHandlerImplementation={history:{replaceState:function(e,t,r){return In().history.replaceState(e,t,r)},getState:function(){return In().history.state}},location:{getHref:function(){return In().location.href},setHref:function(e){In().location.href=e},getSearch:function(){return In().location.search},getHash:function(){return In().location.hash},getPathName:function(){return In().location.pathname},assign:function(e){In().location.assign(e)},getHostName:function(){return In().location.hostname},getHost:function(){return In().location.host},getOrigin:function(){return In().location.origin}},getDocument:function(){return In().document},getWindowUnsafe:function(){return In().window},localStorage:wAe,sessionStorage:SAe};Object.defineProperty(xu,"__esModule",{value:!0});xu.WindowHandlerReference=void 0;var EAe=UO,uie=function(){function e(t){var r=function(n){return n};t!==void 0&&(r=t),this.windowHandler=r(EAe.defaultWindowHandlerImplementation)}return e.init=function(t){e.instance===void 0&&(e.instance=new e(t))},e.getReferenceOrThrow=function(){if(e.instance===void 0)throw new Error("SuperTokensWindowHandler must be initialized before calling this method.");return e.instance},e}();xu.WindowHandlerReference=uie;xu.default=uie;var wV=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},SV=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(BO,"__esModule",{value:!0});BO.defaultCookieHandlerImplementation=void 0;var EV=xu;BO.defaultCookieHandlerImplementation={getCookie:function(){return wV(this,void 0,void 0,function(){return SV(this,function(e){return[2,EV.default.getReferenceOrThrow().windowHandler.getWindowUnsafe().document.cookie]})})},setCookie:function(e){return wV(this,void 0,void 0,function(){return SV(this,function(t){return EV.default.getReferenceOrThrow().windowHandler.getWindowUnsafe().document.cookie=e,[2]})})}};Object.defineProperty(Cx,"__esModule",{value:!0});Cx.CookieHandlerReference=void 0;var CAe=BO,die=function(){function e(t){var r=function(n){return n};t!==void 0&&(r=t),this.cookieHandler=r(CAe.defaultCookieHandlerImplementation)}return e.init=function(t){e.instance===void 0&&(e.instance=new e(t))},e.getReferenceOrThrow=function(){if(e.instance===void 0)throw new Error("SuperTokensCookieHandler must be initialized before calling this method.");return e.instance},e}();Cx.CookieHandlerReference=die;Cx.default=die;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(Cx)})(cie);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CookieHandlerReference=void 0;var t=cie;Object.defineProperty(e,"CookieHandlerReference",{enumerable:!0,get:function(){return t.CookieHandlerReference}})})(DL);(function(e){function t(n){for(var i in n)e.hasOwnProperty(i)||(e[i]=n[i])}e.__esModule=!0;let r=DL;r.default!==void 0?t(r):t({default:r,...r})})(jL);var fie={},$O={};Object.defineProperty($O,"__esModule",{value:!0});var kAe=function(){function e(t){var r=this;this.getAsStringDangerous=function(){return r.value},this.value=hie(t)}return e}();$O.default=kAe;function hie(e,t){t===void 0&&(t=!1);function r(i){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(i)}e=e.trim();try{if(!e.startsWith("http://")&&!e.startsWith("https://"))throw new Error("Error converting to proper URL");var n=new URL(e);return t?n.hostname.startsWith("localhost")||r(n.hostname)?e="http://"+n.host:e="https://"+n.host:e=n.protocol+"//"+n.host,e}catch{}if(e.startsWith("/"))throw new Error("Please provide a valid domain name");if(e.indexOf(".")===0&&(e=e.substr(1)),(e.indexOf(".")!==-1||e.startsWith("localhost"))&&!e.startsWith("http://")&&!e.startsWith("https://")){e="https://"+e;try{return new URL(e),hie(e,!0)}catch{}}throw new Error("Please provide a valid domain name")}(function(e){function t(n){for(var i in n)e.hasOwnProperty(i)||(e[i]=n[i])}e.__esModule=!0;let r=$O;r.default!==void 0?t(r):t({default:r,...r})})(fie);var zO={},Xy={};Object.defineProperty(Xy,"__esModule",{value:!0});var _Ae=function(){function e(t){var r=this;this.startsWith=function(n){return r.value.startsWith(n.value)},this.appendPath=function(n){return new e(r.value+n.value)},this.getAsStringDangerous=function(){return r.value},this.value=C6(t)}return e}();Xy.default=_Ae;function C6(e){e=e.trim();try{if(!e.startsWith("http://")&&!e.startsWith("https://"))throw new Error("Error converting to proper URL");var t=new URL(e);return e=t.pathname,e.charAt(e.length-1)==="/"?e.substr(0,e.length-1):e}catch{}if((NAe(e)||e.startsWith("localhost"))&&!e.startsWith("http://")&&!e.startsWith("https://"))return e="http://"+e,C6(e);e.charAt(0)!=="/"&&(e="/"+e);try{return new URL("http://example.com"+e),C6("http://example.com"+e)}catch{throw new Error("Please provide a valid URL path")}}function NAe(e){if(e.indexOf(".")===-1||e.startsWith("/"))return!1;try{var t=new URL(e);return t.hostname.indexOf(".")!==-1}catch{}try{var t=new URL("http://"+e);return t.hostname.indexOf(".")!==-1}catch{}return!1}(function(e){function t(n){for(var i in n)e.hasOwnProperty(i)||(e[i]=n[i])}e.__esModule=!0;let r=Xy;r.default!==void 0?t(r):t({default:r,...r})})(zO);var Yy={},HO={},ML={};(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(xu)})(ML);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WindowHandlerReference=void 0;var t=ML;Object.defineProperty(e,"WindowHandlerReference",{enumerable:!0,get:function(){return t.WindowHandlerReference}})})(HO);(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(HO)})(Yy);(function(e){var t={},r=I,n=Ky,i=jL,a=fie,s=zO,o=Yy;function l(ye){return ye&&ye.__esModule?ye:{default:ye}}var c=l(n),d=l(a),f=l(s),p=function(ye,Me){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(qe,it){qe.__proto__=it}||function(qe,it){for(var ze in it)Object.prototype.hasOwnProperty.call(it,ze)&&(qe[ze]=it[ze])},p(ye,Me)};function m(ye,Me){if(typeof Me!="function"&&Me!==null)throw new TypeError("Class extends value "+String(Me)+" is not a constructor or null");p(ye,Me);function qe(){this.constructor=ye}ye.prototype=Me===null?Object.create(Me):(qe.prototype=Me.prototype,new qe)}e.__assign=function(){return e.__assign=Object.assign||function(Me){for(var qe,it=1,ze=arguments.length;it<ze;it++){qe=arguments[it];for(var _e in qe)Object.prototype.hasOwnProperty.call(qe,_e)&&(Me[_e]=qe[_e])}return Me},e.__assign.apply(this,arguments)};function x(ye,Me){var qe={};for(var it in ye)Object.prototype.hasOwnProperty.call(ye,it)&&Me.indexOf(it)<0&&(qe[it]=ye[it]);if(ye!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ze=0,it=Object.getOwnPropertySymbols(ye);ze<it.length;ze++)Me.indexOf(it[ze])<0&&Object.prototype.propertyIsEnumerable.call(ye,it[ze])&&(qe[it[ze]]=ye[it[ze]]);return qe}function v(ye,Me,qe,it){function ze(_e){return _e instanceof qe?_e:new qe(function(ut){ut(_e)})}return new(qe||(qe=Promise))(function(_e,ut){function xt(Cr){try{Pt(it.next(Cr))}catch(wn){ut(wn)}}function Dt(Cr){try{Pt(it.throw(Cr))}catch(wn){ut(wn)}}function Pt(Cr){Cr.done?_e(Cr.value):ze(Cr.value).then(xt,Dt)}Pt((it=it.apply(ye,Me||[])).next())})}function b(ye,Me){var qe={label:0,sent:function(){if(_e[0]&1)throw _e[1];return _e[1]},trys:[],ops:[]},it,ze,_e,ut=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return ut.next=xt(0),ut.throw=xt(1),ut.return=xt(2),typeof Symbol=="function"&&(ut[Symbol.iterator]=function(){return this}),ut;function xt(Pt){return function(Cr){return Dt([Pt,Cr])}}function Dt(Pt){if(it)throw new TypeError("Generator is already executing.");for(;ut&&(ut=0,Pt[0]&&(qe=0)),qe;)try{if(it=1,ze&&(_e=Pt[0]&2?ze.return:Pt[0]?ze.throw||((_e=ze.return)&&_e.call(ze),0):ze.next)&&!(_e=_e.call(ze,Pt[1])).done)return _e;switch(ze=0,_e&&(Pt=[Pt[0]&2,_e.value]),Pt[0]){case 0:case 1:_e=Pt;break;case 4:return qe.label++,{value:Pt[1],done:!1};case 5:qe.label++,ze=Pt[1],Pt=[0];continue;case 7:Pt=qe.ops.pop(),qe.trys.pop();continue;default:if(_e=qe.trys,!(_e=_e.length>0&&_e[_e.length-1])&&(Pt[0]===6||Pt[0]===2)){qe=0;continue}if(Pt[0]===3&&(!_e||Pt[1]>_e[0]&&Pt[1]<_e[3])){qe.label=Pt[1];break}if(Pt[0]===6&&qe.label<_e[1]){qe.label=_e[1],_e=Pt;break}if(_e&&qe.label<_e[2]){qe.label=_e[2],qe.ops.push(Pt);break}_e[2]&&qe.ops.pop(),qe.trys.pop();continue}Pt=Me.call(ye,qe)}catch(Cr){Pt=[6,Cr],ze=0}finally{it=_e=0}if(Pt[0]&5)throw Pt[1];return{value:Pt[0]?Pt[1]:void 0,done:!0}}}function w(ye,Me,qe){if(qe||arguments.length===2)for(var it=0,ze=Me.length,_e;it<ze;it++)(_e||!(it in Me))&&(_e||(_e=Array.prototype.slice.call(Me,0,it)),_e[it]=Me[it]);return ye.concat(_e||Array.prototype.slice.call(Me))}typeof SuppressedError=="function"&&SuppressedError;var _="rid",C="tenantId",N="/auth",R="/auth",P="supertokens-root",O=`
If you are trying to use this method doing server-side-rendering, please make sure you move this method inside a componentDidMount method or useEffect hook.`,D="0.51.0",M="com.supertokens.auth-react",B=!1;function U(){B=!0}function H(ye){B&&console.log("".concat(M,' {t: "').concat(new Date().toISOString(),'", message: "').concat(ye,'", supertokens-auth-react-ver: "').concat(D,'"}'))}var Z=["experimental"];function ee(ye){var Me=new URLSearchParams(ye);return Me.get(_)}function V(ye){for(var Me=new URL(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHref()),qe=0,it=ye;qe<it.length;qe++){var ze=it[qe];Me.searchParams.delete(ze)}o.WindowHandlerReference.getReferenceOrThrow().windowHandler.history.replaceState(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.history.getState(),"",Me.toString())}function te(ye,Me){var qe=new URL(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHref());qe.searchParams.set(ye,Me),o.WindowHandlerReference.getReferenceOrThrow().windowHandler.history.replaceState(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.history.getState(),"",qe.toString())}function se(){V(["error","message"])}function Q(ye){var Me=new URLSearchParams(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getSearch());return Me.get(ye)}function X(){return o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHash().substring(1)}function fe(){var ye=Q("redirectToPath");if(ye!==null)try{var Me=void 0;try{Me=new URL(ye)}catch{var qe=ye.startsWith("/")?"http://localhost":"http://localhost/";Me=new URL("".concat(qe).concat(ye))}var it=new f.default(ye).getAsStringDangerous(),ze=Me.search||"",_e=Me.hash||"",ut=it+ze+_e;return it.length===0&&ut.length>0&&!ut.startsWith("/")?"/"+ut:ut}catch{return}}function Se(){var ye;return(ye=Q(C))!==null&&ye!==void 0?ye:void 0}function Y(ye,Me,qe,it){var ze=ye.appInfo.websiteBasePath.appendPath(new f.default(Me)).getAsStringDangerous(),_e=new URLSearchParams;return qe.tenantIdFromQueryParams!==void 0&&_e.set(C,qe.tenantIdFromQueryParams),it!==void 0&&Object.entries(it).forEach(function(ut){var xt=ut[0],Dt=ut[1];Dt!==void 0&&_e.set(xt,Dt)}),_e.toString()!==""?"".concat(ze,"?").concat(_e.toString()):ze}function ce(){try{return t.TEST_MODE==="testing"||t.REACT_APP_TEST_MODE==="testing"}catch{return!1}}function W(ye){if(ye===void 0)throw new Error("Please provide the appInfo object when calling supertokens.init");if(ye.apiDomain===void 0)throw new Error("Please provide your apiDomain inside the appInfo object when calling supertokens.init");if(ye.appName===void 0)throw new Error("Please provide your appName inside the appInfo object when calling supertokens.init");if(ye.websiteDomain===void 0)throw new Error("Please provide your websiteDomain inside the appInfo object when calling supertokens.init");var Me=new f.default("");return ye.apiGatewayPath!==void 0&&(Me=new f.default(ye.apiGatewayPath)),{appName:ye.appName,apiDomain:new d.default(ye.apiDomain),websiteDomain:new d.default(ye.websiteDomain),apiBasePath:Me.appendPath(G(N,ye.apiBasePath)),websiteBasePath:G(R,ye.websiteBasePath)}}function G(ye,Me){return Me!==void 0?new f.default(Me):new f.default(ye)}function ie(ye,Me){return v(this,void 0,void 0,function(){var qe,it,ze;return b(this,function(_e){switch(_e.label){case 0:if(qe=[],Me.length!==ye.length)throw Error("Are you sending too many / too few formFields?");it=function(ut){var xt,Dt,Pt,Cr;return b(this,function(wn){switch(wn.label){case 0:return xt=Me[ut],Dt=ye.find(function(fr){return fr.id===xt.id}),Pt=Dt.value,Dt.id==="email"&&(Pt=Pt.trim()),[4,xt.validate(Pt)];case 1:return Cr=wn.sent(),Cr!==void 0&&qe.push({error:Cr,id:xt.id}),[2]}})},ze=0,_e.label=1;case 1:return ze<Me.length?[5,it(ze)]:[3,4];case 2:_e.sent(),_e.label=3;case 3:return ze++,[3,1];case 4:return[2,qe]}})})}function Ce(){return new f.default(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getPathName())}function re(){var ye=Ce().getAsStringDangerous();return ye+o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getSearch()+o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHash()}function ne(ye,Me){if(Me===void 0)return ye;try{var qe=new URL(ye);return Object.entries(Me).forEach(function(_e){var ut=_e[0],xt=_e[1];qe.searchParams.set(ut,xt)}),qe.href}catch{var it=ye.startsWith("/")?"http://localhost":"http://localhost/",ze=new URL("".concat(it).concat(ye));return Object.entries(Me).forEach(function(ut){var xt=ut[0],Dt=ut[1];ze.searchParams.set(xt,Dt)}),"".concat(ze.pathname).concat(ze.search).concat(ze.hash)}}function ge(ye){return ye.endsWith("/")?ye:ye+"/"}function we(ye){return function(){var Me=ee(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getSearch());return Me===ye}}function q(ye){ye.trim()===""&&(ye="/"),o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.setHref(ye)}function Ae(ye,Me){ye.trim()===""&&(ye="/"),"push"in Me?Me.push(ye):Me(ye)}function Pe(){return new d.default(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getOrigin())}function He(ye){return v(this,void 0,void 0,function(){var Me;return b(this,function(qe){return Me=o.WindowHandlerReference.getReferenceOrThrow().windowHandler.localStorage.getItem(ye),Me==null?[2,null]:[2,Me]})})}function je(ye,Me){return v(this,void 0,void 0,function(){return b(this,function(qe){switch(qe.label){case 0:return[4,o.WindowHandlerReference.getReferenceOrThrow().windowHandler.localStorage.setItem(ye,Me)];case 1:return qe.sent(),[2]}})})}function $e(ye){return v(this,void 0,void 0,function(){return b(this,function(Me){switch(Me.label){case 0:return[4,o.WindowHandlerReference.getReferenceOrThrow().windowHandler.localStorage.removeItem(ye)];case 1:return Me.sent(),[2]}})})}function Ze(ye,Me){var qe=e.__assign({},ye);for(var it in Me)typeof qe[it]=="object"&&typeof Me[it]=="object"?qe[it]=Ze(qe[it],Me[it]):qe[it]=Me[it];return qe}function lt(ye){function Me(ze){ze=ze.trim().toLowerCase(),ze.startsWith(".")&&(ze=ze.substring(1)),!ze.startsWith("http://")&&!ze.startsWith("https://")&&(ze="http://"+ze);try{var _e=new URL(ze);return ze=_e.hostname,ze.startsWith(".")&&(ze=ze.substring(1)),ze}catch{throw new Error("Please provide a valid cookie scope")}}function qe(ze){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(ze)}var it=Me(ye);return it==="localhost"||qe(it)?it:ye.startsWith(".")?"."+it:it}function kt(){try{return lt(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHostName())}catch{return}}function ht(ye){return v(this,void 0,void 0,function(){var Me,qe,it,ze,_e;return b(this,function(ut){switch(ut.label){case 0:return qe="; ",[4,i.CookieHandlerReference.getReferenceOrThrow().cookieHandler.getCookie()];case 1:return Me=qe+ut.sent(),it=Me.split("; "+ye+"="),it.length>=2&&(ze=it.pop(),ze!==void 0)?(_e=ze.split(";").shift(),_e===void 0?[2,null]:[2,_e]):[2,null]}})})}function _r(ye,Me,qe){return v(this,void 0,void 0,function(){var it,ze;return b(this,function(_e){switch(_e.label){case 0:return it="Thu, 01 Jan 1970 00:00:01 GMT",ze="",Me!==void 0&&(ze=Me,it=void 0),qe==="localhost"||qe===o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHostName()||qe===void 0?it===void 0?[3,2]:[4,i.CookieHandlerReference.getReferenceOrThrow().cookieHandler.setCookie("".concat(ye,"=").concat(ze,";expires=").concat(it,";path=/;samesite=lax"))]:[3,5];case 1:return _e.sent(),[3,4];case 2:return[4,i.CookieHandlerReference.getReferenceOrThrow().cookieHandler.setCookie("".concat(ye,"=").concat(ze,";expires=Fri, 31 Dec 9999 23:59:59 GMT;path=/;samesite=lax"))];case 3:_e.sent(),_e.label=4;case 4:return[3,9];case 5:return it===void 0?[3,7]:[4,i.CookieHandlerReference.getReferenceOrThrow().cookieHandler.setCookie("".concat(ye,"=").concat(ze,";expires=").concat(it,";domain=").concat(qe,";path=/;samesite=lax"))];case 6:return _e.sent(),[3,9];case 7:return[4,i.CookieHandlerReference.getReferenceOrThrow().cookieHandler.setCookie("".concat(ye,"=").concat(ze,";domain=").concat(qe,";expires=Fri, 31 Dec 9999 23:59:59 GMT;path=/;samesite=lax"))];case 8:_e.sent(),_e.label=9;case 9:return[2]}})})}function er(ye){return ye===void 0?{}:ye}var ct=function(ye,Me,qe,it){it===void 0&&(it=!0);var ze=r.useRef(),_e=r.useState(void 0),ut=_e[0],xt=_e[1];if(r.useEffect(function(){var Dt=function(Cr){return v(void 0,void 0,void 0,function(){var wn,fr,Vi;return b(this,function(jn){switch(jn.label){case 0:return jn.trys.push([0,2,,9]),ze.current===void 0&&(ze.current=ye()),[4,ze.current];case 1:return wn=jn.sent(),Cr.aborted||Me(wn),[3,9];case 2:if(fr=jn.sent(),Cr.aborted)return[3,8];if(qe===void 0)return[3,7];jn.label=3;case 3:return jn.trys.push([3,5,,6]),[4,qe(fr,wn)];case 4:return jn.sent(),[3,6];case 5:return Vi=jn.sent(),xt(Vi),[3,6];case 6:return[3,8];case 7:xt(fr),jn.label=8;case 8:return[3,9];case 9:return[2]}})})};if(it){var Pt=new AbortController;return Dt(Pt.signal),function(){Pt.abort()}}},[xt,ze,ye,Me,qe,it]),ut)throw ut};function Gt(){var ye=r.useState(void 0),Me=ye[0],qe=ye[1];if(Me)throw Me;return qe}var Lt=function(ye){var Me=ye.apiFields,qe=ye.fieldUpdates,it=ye.callAPI;return v(void 0,void 0,void 0,function(){var ze,_e,ut,xt;return b(this,function(Dt){switch(Dt.label){case 0:return Dt.trys.push([0,2,,3]),[4,it(Me||[],function(Pt,Cr){return qe.push({id:Pt,value:Cr})})];case 1:return ze=Dt.sent(),[3,3];case 2:if(xt=Dt.sent(),c.default.isThisError(xt))_e=xt;else if(xt instanceof Response)ut=xt;else throw xt;return[3,3];case 3:return[2,{result:ze,generalError:_e,fetchError:ut}]}})})};function dr(ye){return{id:ye.id,initialized:!ye.init,version:ye.version,exports:ye.exports,compatibleAuthReactSDKVersions:ye.compatibleAuthReactSDKVersions,compatibleWebJSSDKVersions:ye.compatibleWebJSSDKVersions}}function Ht(ye){var Me=Object.keys(ye),qe=Me.reduce(function(it,ze){var _e;return Z.includes(ze)?it:e.__assign(e.__assign({},it),(_e={},_e[ze]=ye[ze],_e))},{});return qe}e.SSR_ERROR=O,e.ST_ROOT_ID=P,e.TENANT_ID_QUERY_PARAM=C,e.__awaiter=v,e.__extends=m,e.__generator=b,e.__rest=x,e.__spreadArray=w,e.appendQueryParamsToURL=ne,e.appendTrailingSlashToURL=ge,e.clearErrorQueryParam=se,e.clearQueryParams=V,e.enableLogging=U,e.getCookieValue=ht,e.getCurrentNormalisedUrlPath=Ce,e.getCurrentNormalisedUrlPathWithQueryParamsAndFragments=re,e.getDefaultCookieScope=kt,e.getDefaultRedirectionURLForPath=Y,e.getLocalStorage=He,e.getNormalisedUserContext=er,e.getOriginOfPage=Pe,e.getPublicConfig=Ht,e.getPublicPlugin=dr,e.getQueryParams=Q,e.getRedirectToPathFromURL=fe,e.getTenantIdFromQueryParams=Se,e.getURLHash=X,e.handleCallAPI=Lt,e.isTest=ce,e.logDebugMessage=H,e.matchRecipeIdUsingQueryParams=we,e.mergeObjects=Ze,e.normaliseCookieScopeOrThrowError=lt,e.normaliseInputAppInfoOrThrowError=W,e.package_version=D,e.redirectWithFullPageReload=q,e.redirectWithNavigate=Ae,e.removeFromLocalStorage=$e,e.setFrontendCookie=_r,e.setLocalStorage=je,e.updateQueryParam=te,e.useOnMountAPICall=ct,e.useRethrowInRender=Gt,e.validateForm=ie})(Mi);var FL={},WO={},Br={},ry={};Object.defineProperty(ry,"__esModule",{value:!0});ry.SSR_ERROR=ry.DEFAULT_API_BASE_PATH=void 0;ry.DEFAULT_API_BASE_PATH="/auth";ry.SSR_ERROR=`
If you are trying to use this method doing server-side-rendering, please make sure you move this method inside a componentDidMount method or useEffect hook.`;var VO={};Object.defineProperty(VO,"__esModule",{value:!0});VO.nonPublicConfigProperties=void 0;VO.nonPublicConfigProperties=["experimental"];var pie={},qO={},so={},SE={};Object.defineProperty(SE,"__esModule",{value:!0});SE.isAnIpAddress=void 0;function mie(e){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)}SE.isAnIpAddress=mie;var AAe=function(){function e(t){var r=this;this.getAsStringDangerous=function(){return r.value},this.value=gie(t)}return e}();SE.default=AAe;function gie(e,t){t===void 0&&(t=!1),e=e.trim();try{if(!e.startsWith("http://")&&!e.startsWith("https://"))throw new Error("converting to proper URL");var r=new URL(e);return t?r.hostname.startsWith("localhost")||mie(r.hostname)?e="http://"+r.host:e="https://"+r.host:e=r.protocol+"//"+r.host,e}catch{}if(e.startsWith("/"))throw new Error("Please provide a valid domain name");if(e.indexOf(".")===0&&(e=e.substr(1)),(e.indexOf(".")!==-1||e.startsWith("localhost"))&&!e.startsWith("http://")&&!e.startsWith("https://")){e="https://"+e;try{return new URL(e),gie(e,!0)}catch{}}throw new Error("Please provide a valid domain name")}var LL={};Object.defineProperty(LL,"__esModule",{value:!0});var TAe=function(){function e(t){var r=this;this.startsWith=function(n){return r.value.startsWith(n.value)},this.appendPath=function(n){return new e(r.value+n.value)},this.getAsStringDangerous=function(){return r.value},this.value=k6(t)}return e}();LL.default=TAe;function k6(e){e=e.trim();try{if(!e.startsWith("http://")&&!e.startsWith("https://"))throw new Error("converting to proper URL");var t=new URL(e);return e=t.pathname,e.charAt(e.length-1)==="/"?e.substr(0,e.length-1):e}catch{}if((IAe(e)||e.startsWith("localhost"))&&!e.startsWith("http://")&&!e.startsWith("https://"))return e="http://"+e,k6(e);e.charAt(0)!=="/"&&(e="/"+e);try{return new URL("http://example.com"+e),k6("http://example.com"+e)}catch{throw new Error("Please provide a valid URL path")}}function IAe(e){if(e.indexOf(".")===-1||e.startsWith("/"))return!1;try{var t=new URL(e);return t.hostname.indexOf(".")!==-1}catch{}try{var t=new URL("http://"+e);return t.hostname.indexOf(".")!==-1}catch{}return!1}var _6=Ve&&Ve.__assign||function(){return _6=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},_6.apply(this,arguments)},CV=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},kV=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(so,"__esModule",{value:!0});so.matchesDomainOrSubdomain=so.getNormalisedUserContext=so.validateAndNormaliseInputOrThrowError=so.normaliseSessionScopeOrThrowError=so.normaliseURLPathOrThrowError=so.normaliseURLDomainOrThrowError=void 0;var xie=SE,OAe=LL,PAe=xu;function vie(e){var t=new xie.default(e).getAsStringDangerous();return t}so.normaliseURLDomainOrThrowError=vie;function N6(e){return new OAe.default(e).getAsStringDangerous()}so.normaliseURLPathOrThrowError=N6;function A6(e){function t(n){n=n.trim().toLowerCase(),n.startsWith(".")&&(n=n.substr(1)),!n.startsWith("http://")&&!n.startsWith("https://")&&(n="http://"+n);try{var i=new URL(n);return n=i.hostname,n}catch{throw new Error("Please provide a valid sessionScope")}}var r=t(e);return r==="localhost"||(0,xie.isAnIpAddress)(r)?r:e.startsWith(".")?"."+r:r}so.normaliseSessionScopeOrThrowError=A6;function RAe(e){var t=this,r=vie(e.apiDomain),n=N6("/auth");e.apiBasePath!==void 0&&(n=N6(e.apiBasePath));var i=PAe.default.getReferenceOrThrow().windowHandler.location.getHostName(),a=A6(e!==void 0&&e.sessionTokenFrontendDomain!==void 0?e.sessionTokenFrontendDomain:i),s=401;e.sessionExpiredStatusCode!==void 0&&(s=e.sessionExpiredStatusCode);var o=403;if(e.invalidClaimStatusCode!==void 0&&(o=e.invalidClaimStatusCode),s===o)throw new Error("sessionExpiredStatusCode and invalidClaimStatusCode cannot be the same.");var l=!0;e.autoAddCredentials!==void 0&&(l=e.autoAddCredentials);var c=!1;e.isInIframe!==void 0&&(c=e.isInIframe);var d=void 0;e.sessionTokenBackendDomain!==void 0&&(d=A6(e.sessionTokenBackendDomain));var f=10;if(e.maxRetryAttemptsForSessionRefresh!==void 0){if(e.maxRetryAttemptsForSessionRefresh<0)throw new Error("maxRetryAttemptsForSessionRefresh must be greater than or equal to 0.");f=e.maxRetryAttemptsForSessionRefresh}var p=function(b){return CV(t,void 0,void 0,function(){return kV(this,function(w){return[2,{url:b.url,requestInit:b.requestInit}]})})};e.preAPIHook!==void 0&&(p=e.preAPIHook);var m=function(){return CV(t,void 0,void 0,function(){return kV(this,function(b){return[2]})})};e.postAPIHook!==void 0&&(m=e.postAPIHook);var x=function(){};e.onHandleEvent!==void 0&&(x=e.onHandleEvent);var v=_6({functions:function(b){return b}},e.override);return{apiDomain:r,apiBasePath:n,sessionTokenFrontendDomain:a,sessionExpiredStatusCode:s,invalidClaimStatusCode:o,autoAddCredentials:l,isInIframe:c,tokenTransferMethod:e.tokenTransferMethod!==void 0?e.tokenTransferMethod:"cookie",sessionTokenBackendDomain:d,maxRetryAttemptsForSessionRefresh:f,preAPIHook:p,postAPIHook:m,onHandleEvent:x,override:v}}so.validateAndNormaliseInputOrThrowError=RAe;function jAe(e){return e===void 0?{}:e}so.getNormalisedUserContext=jAe;function DAe(e,t){for(var r=e.split("."),n=0;n<r.length;n++){var i=r.slice(n).join(".");if(i===t||".".concat(i)===t)return!0}return!1}so.matchesDomainOrSubdomain=DAe;var Qy={},GO={};(function(e){var t={},r=Ve&&Ve.__awaiter||function(a,s,o,l){function c(d){return d instanceof o?d:new o(function(f){f(d)})}return new(o||(o=Promise))(function(d,f){function p(v){try{x(l.next(v))}catch(b){f(b)}}function m(v){try{x(l.throw(v))}catch(b){f(b)}}function x(v){v.done?d(v.value):c(v.value).then(p,m)}x((l=l.apply(a,s||[])).next())})},n=Ve&&Ve.__generator||function(a,s){var o={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},l,c,d,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(x){return function(v){return m([x,v])}}function m(x){if(l)throw new TypeError("Generator is already executing.");for(;o;)try{if(l=1,c&&(d=x[0]&2?c.return:x[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,x[1])).done)return d;switch(c=0,d&&(x=[x[0]&2,d.value]),x[0]){case 0:case 1:d=x;break;case 4:return o.label++,{value:x[1],done:!1};case 5:o.label++,c=x[1],x=[0];continue;case 7:x=o.ops.pop(),o.trys.pop();continue;default:if(d=o.trys,!(d=d.length>0&&d[d.length-1])&&(x[0]===6||x[0]===2)){o=0;continue}if(x[0]===3&&(!d||x[1]>d[0]&&x[1]<d[3])){o.label=x[1];break}if(x[0]===6&&o.label<d[1]){o.label=d[1],d=x;break}if(d&&o.label<d[2]){o.label=d[2],o.ops.push(x);break}d[2]&&o.ops.pop(),o.trys.pop();continue}x=s.call(a,o)}catch(v){x=[6,v],c=0}finally{l=d=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ProcessState=e.PROCESS_STATE=void 0,function(a){a[a.CALLING_INTERCEPTION_REQUEST=0]="CALLING_INTERCEPTION_REQUEST",a[a.CALLING_INTERCEPTION_RESPONSE=1]="CALLING_INTERCEPTION_RESPONSE"}(e.PROCESS_STATE||(e.PROCESS_STATE={}));var i=function(){function a(){var s=this;this.history=[],this.addState=function(o){try{process!==void 0&&t!==void 0&&t.TEST_MODE==="testing"&&s.history.push(o)}catch{}},this.getEventByLastEventByName=function(o){for(var l=s.history.length-1;l>=0;l--)if(s.history[l]==o)return s.history[l]},this.reset=function(){s.history=[]},this.waitForEvent=function(o,l){return l===void 0&&(l=7e3),r(s,void 0,void 0,function(){var c,d=this;return n(this,function(f){return c=Date.now(),[2,new Promise(function(p){var m=d;function x(){var v=m.getEventByLastEventByName(o);v===void 0?Date.now()-c>l?p(void 0):setTimeout(x,1e3):p(v)}x()})]})})}}return a.getInstance=function(){return a.instance==null&&(a.instance=new a),a.instance},a}();e.ProcessState=i})(GO);var I0={};Object.defineProperty(I0,"__esModule",{value:!0});I0.supported_fdi=I0.package_version=void 0;I0.package_version="20.1.6";I0.supported_fdi=["1.16","1.17","1.18","1.19","2.0","3.0","3.1","4.0","4.1"];var kx={},BL={},UL={};Object.defineProperty(UL,"__esModule",{value:!0});var MAe=function(){function e(){var t=this;this.locked=new Map,this.addToLocked=function(r,n){var i=t.locked.get(r);i===void 0?n===void 0?t.locked.set(r,[]):t.locked.set(r,[n]):n!==void 0&&(i.unshift(n),t.locked.set(r,i))},this.isLocked=function(r){return t.locked.has(r)},this.lock=function(r){return new Promise(function(n,i){t.isLocked(r)?t.addToLocked(r,n):(t.addToLocked(r),n())})},this.unlock=function(r){var n=t.locked.get(r);if(n===void 0||n.length===0){t.locked.delete(r);return}var i=n.pop();t.locked.set(r,n),i!==void 0&&setTimeout(i,0)}}return e.getInstance=function(){return e.instance===void 0&&(e.instance=new e),e.instance},e}();function FAe(){return MAe.getInstance()}UL.default=FAe;var zu=Ve&&Ve.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function o(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):new r(function(d){d(c.value)}).then(s,o)}l((n=n.apply(e,t||[])).next())})},Hu=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},dw=Ve;Object.defineProperty(BL,"__esModule",{value:!0});var w1=UL,oj="browser-tabs-lock-key",n_={key:function(e){return zu(dw,void 0,void 0,function(){return Hu(this,function(t){throw new Error("Unsupported")})})},getItem:function(e){return zu(dw,void 0,void 0,function(){return Hu(this,function(t){throw new Error("Unsupported")})})},clear:function(){return zu(dw,void 0,void 0,function(){return Hu(this,function(e){return[2,window.localStorage.clear()]})})},removeItem:function(e){return zu(dw,void 0,void 0,function(){return Hu(this,function(t){throw new Error("Unsupported")})})},setItem:function(e,t){return zu(dw,void 0,void 0,function(){return Hu(this,function(r){throw new Error("Unsupported")})})},keySync:function(e){return window.localStorage.key(e)},getItemSync:function(e){return window.localStorage.getItem(e)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(e){return window.localStorage.removeItem(e)},setItemSync:function(e,t){return window.localStorage.setItem(e,t)}};function lj(e){return new Promise(function(t){return setTimeout(t,e)})}function T6(e){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",r="",n=0;n<e;n++){var i=Math.floor(Math.random()*t.length);r+=t[i]}return r}function LAe(){return Date.now().toString()+T6(15)}var BAe=function(){function e(t){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=LAe(),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=t,e.waiters===void 0&&(e.waiters=[])}return e.prototype.acquireLock=function(t,r){return r===void 0&&(r=5e3),zu(this,void 0,void 0,function(){var n,i,a,s,o,l,c,d;return Hu(this,function(f){switch(f.label){case 0:n=Date.now()+T6(4),i=Date.now()+r,a=oj+"-"+t,s=this.storageHandler===void 0?n_:this.storageHandler,f.label=1;case 1:return Date.now()<i?[4,lj(30)]:[3,8];case 2:return f.sent(),o=s.getItemSync(a),o!==null?[3,5]:(l=this.id+"-"+t+"-"+n,[4,lj(Math.floor(Math.random()*25))]);case 3:return f.sent(),s.setItemSync(a,JSON.stringify({id:this.id,iat:n,timeoutKey:l,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,lj(30)];case 4:return f.sent(),c=s.getItemSync(a),c!==null&&(d=JSON.parse(c),d.id===this.id&&d.iat===n)?(this.acquiredIatSet.add(n),this.refreshLockWhileAcquired(a,n),[2,!0]):[3,7];case 5:return e.lockCorrector(this.storageHandler===void 0?n_:this.storageHandler),[4,this.waitForSomethingToChange(i)];case 6:f.sent(),f.label=7;case 7:return n=Date.now()+T6(4),[3,1];case 8:return[2,!1]}})})},e.prototype.refreshLockWhileAcquired=function(t,r){return zu(this,void 0,void 0,function(){var n=this;return Hu(this,function(i){return setTimeout(function(){return zu(n,void 0,void 0,function(){var a,s,o;return Hu(this,function(l){switch(l.label){case 0:return[4,w1.default().lock(r)];case 1:if(l.sent(),!this.acquiredIatSet.has(r))return w1.default().unlock(r),[2];if(a=this.storageHandler===void 0?n_:this.storageHandler,s=a.getItemSync(t),s!==null)o=JSON.parse(s),o.timeRefreshed=Date.now(),a.setItemSync(t,JSON.stringify(o)),w1.default().unlock(r);else return w1.default().unlock(r),[2];return this.refreshLockWhileAcquired(t,r),[2]}})})},1e3),[2]})})},e.prototype.waitForSomethingToChange=function(t){return zu(this,void 0,void 0,function(){return Hu(this,function(r){switch(r.label){case 0:return[4,new Promise(function(n){var i=!1,a=Date.now(),s=50,o=!1;function l(){if(o||(window.removeEventListener("storage",l),e.removeFromWaiting(l),clearTimeout(c),o=!0),!i){i=!0;var d=s-(Date.now()-a);d>0?setTimeout(n,d):n(null)}}window.addEventListener("storage",l),e.addToWaiting(l);var c=setTimeout(l,Math.max(0,t-Date.now()))})];case 1:return r.sent(),[2]}})})},e.addToWaiting=function(t){this.removeFromWaiting(t),e.waiters!==void 0&&e.waiters.push(t)},e.removeFromWaiting=function(t){e.waiters!==void 0&&(e.waiters=e.waiters.filter(function(r){return r!==t}))},e.notifyWaiters=function(){if(e.waiters!==void 0){var t=e.waiters.slice();t.forEach(function(r){return r()})}},e.prototype.releaseLock=function(t){return zu(this,void 0,void 0,function(){return Hu(this,function(r){switch(r.label){case 0:return[4,this.releaseLock__private__(t)];case 1:return[2,r.sent()]}})})},e.prototype.releaseLock__private__=function(t){return zu(this,void 0,void 0,function(){var r,n,i,a;return Hu(this,function(s){switch(s.label){case 0:return r=this.storageHandler===void 0?n_:this.storageHandler,n=oj+"-"+t,i=r.getItemSync(n),i===null?[2]:(a=JSON.parse(i),a.id!==this.id?[3,2]:[4,w1.default().lock(a.iat)]);case 1:s.sent(),this.acquiredIatSet.delete(a.iat),r.removeItemSync(n),w1.default().unlock(a.iat),e.notifyWaiters(),s.label=2;case 2:return[2]}})})},e.lockCorrector=function(t){for(var r=Date.now()-5e3,n=t,i=[],a=0;;){var s=n.keySync(a);if(s===null)break;i.push(s),a++}for(var o=!1,l=0;l<i.length;l++){var c=i[l];if(c.includes(oj)){var d=n.getItemSync(c);if(d!==null){var f=JSON.parse(d);(f.timeRefreshed===void 0&&f.timeAcquired<r||f.timeRefreshed!==void 0&&f.timeRefreshed<r)&&(n.removeItemSync(c),o=!0)}}}o&&e.notifyWaiters()},e.waiters=void 0,e}();BL.default=BAe;Object.defineProperty(kx,"__esModule",{value:!0});kx.LockFactoryReference=void 0;var UAe=BL,$Ae=function(e){return function(){return Promise.resolve(new UAe.default(e))}},yie=function(){function e(t){this.lockFactory=t}return e.init=function(t,r){this.instance===void 0&&(this.instance=new e(t??$Ae(r)))},e.getReferenceOrThrow=function(){if(e.instance===void 0)throw new Error("SuperTokensLockReference must be initialized before calling this method.");return e.instance},e}();kx.LockFactoryReference=yie;kx.default=yie;var Jc={};Object.defineProperty(Jc,"__esModule",{value:!0});Jc.logDebugMessage=Jc.disableLogging=Jc.enableLogging=void 0;var zAe=I0,HAe="com.supertokens",$L=!1;function WAe(){$L=!0}Jc.enableLogging=WAe;function VAe(){$L=!1}Jc.disableLogging=VAe;function qAe(e){$L&&console.log("".concat(HAe,' {t: "').concat(new Date().toISOString(),'", message: "').concat(e,'", supertokens-website-ver: "').concat(zAe.package_version,'"}'))}Jc.logDebugMessage=qAe;var hf={},KO={};Object.defineProperty(KO,"__esModule",{value:!0});KO.DateProvider=void 0;var _V=xu,GAe=function(){function e(){this.clockSkewInMillis=0,this.thresholdInSeconds=7}return e.init=function(){if(e.instance===void 0){e.instance=new e;var t=_V.default.getReferenceOrThrow().windowHandler.localStorage,r=t.getItemSync(e.CLOCK_SKEW_KEY),n=r!==null?parseInt(r,10):0;e.instance.setClientClockSkewInMillis(n)}},e.getReferenceOrThrow=function(){if(e.instance===void 0)throw new Error("DateProvider must be initialized before calling this method.");return e.instance},e.prototype.getThresholdInSeconds=function(){return this.thresholdInSeconds},e.prototype.setThresholdInSeconds=function(t){this.thresholdInSeconds=t},e.prototype.setClientClockSkewInMillis=function(t){this.clockSkewInMillis=Math.abs(t)>=this.thresholdInSeconds*1e3?t:0;var r=_V.default.getReferenceOrThrow().windowHandler.localStorage;r.setItemSync(e.CLOCK_SKEW_KEY,String(t))},e.prototype.getClientClockSkewInMillis=function(){return this.clockSkewInMillis},e.prototype.now=function(){return Date.now()+this.getClientClockSkewInMillis()},e.CLOCK_SKEW_KEY="__st_clockSkewInMillis",e}();KO.DateProvider=GAe;Object.defineProperty(hf,"__esModule",{value:!0});hf.DateProviderReference=void 0;var NV=KO,bie=function(){function e(t){t!==void 0?this.dateProvider=t():(NV.DateProvider.init(),this.dateProvider=NV.DateProvider.getReferenceOrThrow())}return e.init=function(t){e.instance===void 0&&(e.instance=new e(t))},e.getReferenceOrThrow=function(){if(e.instance===void 0)throw new Error("SuperTokensDateProvider must be initialized before calling this method.");return e.instance},e}();hf.DateProviderReference=bie;hf.default=bie;(function(e){var t=Ve&&Ve.__assign||function(){return t=Object.assign||function(W){for(var G,ie=1,Ce=arguments.length;ie<Ce;ie++){G=arguments[ie];for(var re in G)Object.prototype.hasOwnProperty.call(G,re)&&(W[re]=G[re])}return W},t.apply(this,arguments)},r=Ve&&Ve.__awaiter||function(W,G,ie,Ce){function re(ne){return ne instanceof ie?ne:new ie(function(ge){ge(ne)})}return new(ie||(ie=Promise))(function(ne,ge){function we(Pe){try{Ae(Ce.next(Pe))}catch(He){ge(He)}}function q(Pe){try{Ae(Ce.throw(Pe))}catch(He){ge(He)}}function Ae(Pe){Pe.done?ne(Pe.value):re(Pe.value).then(we,q)}Ae((Ce=Ce.apply(W,G||[])).next())})},n=Ve&&Ve.__generator||function(W,G){var ie={label:0,sent:function(){if(ne[0]&1)throw ne[1];return ne[1]},trys:[],ops:[]},Ce,re,ne,ge;return ge={next:we(0),throw:we(1),return:we(2)},typeof Symbol=="function"&&(ge[Symbol.iterator]=function(){return this}),ge;function we(Ae){return function(Pe){return q([Ae,Pe])}}function q(Ae){if(Ce)throw new TypeError("Generator is already executing.");for(;ie;)try{if(Ce=1,re&&(ne=Ae[0]&2?re.return:Ae[0]?re.throw||((ne=re.return)&&ne.call(re),0):re.next)&&!(ne=ne.call(re,Ae[1])).done)return ne;switch(re=0,ne&&(Ae=[Ae[0]&2,ne.value]),Ae[0]){case 0:case 1:ne=Ae;break;case 4:return ie.label++,{value:Ae[1],done:!1};case 5:ie.label++,re=Ae[1],Ae=[0];continue;case 7:Ae=ie.ops.pop(),ie.trys.pop();continue;default:if(ne=ie.trys,!(ne=ne.length>0&&ne[ne.length-1])&&(Ae[0]===6||Ae[0]===2)){ie=0;continue}if(Ae[0]===3&&(!ne||Ae[1]>ne[0]&&Ae[1]<ne[3])){ie.label=Ae[1];break}if(Ae[0]===6&&ie.label<ne[1]){ie.label=ne[1],ne=Ae;break}if(ne&&ie.label<ne[2]){ie.label=ne[2],ie.ops.push(Ae);break}ne[2]&&ie.ops.pop(),ie.trys.pop();continue}Ae=G.call(W,ie)}catch(Pe){Ae=[6,Pe],re=0}finally{Ce=ne=0}if(Ae[0]&5)throw Ae[1];return{value:Ae[0]?Ae[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.updateClockSkewUsingFrontToken=e.fireSessionUpdateEventsIfNecessary=e.setFrontToken=e.getFrontToken=e.setAntiCSRF=e.saveLastAccessTokenUpdate=e.getTokenForHeaderAuth=e.setToken=e.getStorageNameForToken=e.getLocalSessionState=e.onInvalidClaimResponse=e.onTokenUpdate=e.onUnauthorisedResponse=e.FrontToken=e.AntiCsrfToken=void 0;var i=GO,a=I0,s=Cx,o=xu,l=kx,c=Jc,d=hf,f=function(){function W(){}return W.getToken=function(G){return r(this,void 0,void 0,function(){var ie;return n(this,function(Ce){switch(Ce.label){case 0:return(0,c.logDebugMessage)("AntiCsrfToken.getToken: called"),G===void 0?(W.tokenInfo=void 0,(0,c.logDebugMessage)("AntiCsrfToken.getToken: returning undefined"),[2,void 0]):W.tokenInfo!==void 0?[3,2]:[4,te()];case 1:return ie=Ce.sent(),ie===null?((0,c.logDebugMessage)("AntiCsrfToken.getToken: returning undefined"),[2,void 0]):(W.tokenInfo={antiCsrf:ie,associatedAccessTokenUpdate:G},[3,4]);case 2:return W.tokenInfo.associatedAccessTokenUpdate===G?[3,4]:(W.tokenInfo=void 0,[4,W.getToken(G)]);case 3:return[2,Ce.sent()];case 4:return(0,c.logDebugMessage)("AntiCsrfToken.getToken: returning: "+W.tokenInfo.antiCsrf),[2,W.tokenInfo.antiCsrf]}})})},W.removeToken=function(){return r(this,void 0,void 0,function(){return n(this,function(G){switch(G.label){case 0:return(0,c.logDebugMessage)("AntiCsrfToken.removeToken: called"),W.tokenInfo=void 0,[4,se(void 0)];case 1:return G.sent(),[2]}})})},W.setItem=function(G,ie){return r(this,void 0,void 0,function(){return n(this,function(Ce){switch(Ce.label){case 0:return G===void 0?(W.tokenInfo=void 0,[2]):((0,c.logDebugMessage)("AntiCsrfToken.setItem: called"),[4,se(ie)]);case 1:return Ce.sent(),W.tokenInfo={antiCsrf:ie,associatedAccessTokenUpdate:G},[2]}})})},W}();e.AntiCsrfToken=f;var p=function(){function W(){}return W.getTokenInfo=function(){return r(this,void 0,void 0,function(){var G,ie;return n(this,function(Ce){switch(Ce.label){case 0:return(0,c.logDebugMessage)("FrontToken.getTokenInfo: called"),[4,fe()];case 1:return G=Ce.sent(),G!==null?[3,5]:[4,P(!1)];case 2:return Ce.sent().status!=="EXISTS"?[3,4]:[4,new Promise(function(re){W.waiters.push(re)})];case 3:return Ce.sent(),[2,W.getTokenInfo()];case 4:return[2,void 0];case 5:return ie=X(G),(0,c.logDebugMessage)("FrontToken.getTokenInfo: returning ate: "+ie.ate),(0,c.logDebugMessage)("FrontToken.getTokenInfo: returning uid: "+ie.uid),(0,c.logDebugMessage)("FrontToken.getTokenInfo: returning up: "+ie.up),[2,ie]}})})},W.removeToken=function(){return r(this,void 0,void 0,function(){return n(this,function(G){switch(G.label){case 0:return(0,c.logDebugMessage)("FrontToken.removeToken: called"),[4,Se(void 0)];case 1:return G.sent(),[4,D("access","")];case 2:return G.sent(),[4,D("refresh","")];case 3:return G.sent(),[4,f.removeToken()];case 4:return G.sent(),W.waiters.forEach(function(ie){return ie(void 0)}),W.waiters=[],[2]}})})},W.setItem=function(G){return r(this,void 0,void 0,function(){return n(this,function(ie){switch(ie.label){case 0:return[4,V()];case 1:return ie.sent(),G==="remove"?[2,W.removeToken()]:((0,c.logDebugMessage)("FrontToken.setItem: called"),[4,Se(G)]);case 2:return ie.sent(),W.waiters.forEach(function(Ce){return Ce(void 0)}),W.waiters=[],[2]}})})},W.doesTokenExists=function(){return r(this,void 0,void 0,function(){var G;return n(this,function(ie){switch(ie.label){case 0:return[4,Q()];case 1:return G=ie.sent(),[2,G!==null]}})})},W.waiters=[],W}();e.FrontToken=p;var m=function(){function W(){}W.init=function(ie,Ce){(0,c.logDebugMessage)("init: called"),(0,c.logDebugMessage)("init: Input apiBasePath: "+ie.apiBasePath),(0,c.logDebugMessage)("init: Input apiDomain: "+ie.apiDomain),(0,c.logDebugMessage)("init: Input autoAddCredentials: "+ie.autoAddCredentials),(0,c.logDebugMessage)("init: Input sessionTokenBackendDomain: "+ie.sessionTokenBackendDomain),(0,c.logDebugMessage)("init: Input isInIframe: "+ie.isInIframe),(0,c.logDebugMessage)("init: Input sessionExpiredStatusCode: "+ie.sessionExpiredStatusCode),(0,c.logDebugMessage)("init: Input sessionTokenFrontendDomain: "+ie.sessionTokenFrontendDomain),(0,c.logDebugMessage)("init: Input tokenTransferMethod: "+ie.tokenTransferMethod);var re=o.default.getReferenceOrThrow().windowHandler.getWindowUnsafe();W.env=re===void 0||re.fetch===void 0?Ve:re,W.refreshTokenUrl=ie.apiDomain+ie.apiBasePath+"/session/refresh",W.signOutUrl=ie.apiDomain+ie.apiBasePath+"/signout",W.rid="session",W.config=ie,W.env.__supertokensOriginalFetch===void 0&&((0,c.logDebugMessage)("init: __supertokensOriginalFetch is undefined"),W.env.__supertokensOriginalFetch=W.env.fetch.bind(W.env),W.env.__supertokensSessionRecipe=Ce,W.env.fetch=W.env.__supertokensSessionRecipe.addFetchInterceptorsAndReturnModifiedFetch({originalFetch:W.env.__supertokensOriginalFetch,userContext:{}}),W.env.__supertokensSessionRecipe.addXMLHttpRequestInterceptor({userContext:{}})),W.recipeImpl=W.env.__supertokensSessionRecipe,W.initCalled=!0};var G;return G=W,W.initCalled=!1,W.doRequest=function(ie,Ce,re){return r(void 0,void 0,void 0,function(){var ne,ge,we,q,Ae,Pe,He,je,$e,Ze,lt,kt,ht,_r,er;return n(G,function(ct){switch(ct.label){case 0:if(!W.initCalled)throw Error("init function not called");(0,c.logDebugMessage)("doRequest: start of fetch interception"),ne=!1;try{ge=void 0,typeof re=="string"?ge=re:typeof re=="object"&&(typeof re.url=="string"?ge=re.url:typeof re.href=="string"&&(ge=re.href)),ne=!W.recipeImpl.shouldDoInterceptionBasedOnUrl(ge,W.config.apiDomain,W.config.sessionTokenBackendDomain)}catch(Gt){if(Gt.message==="Please provide a valid domain name")(0,c.logDebugMessage)("doRequest: Trying shouldDoInterceptionBasedOnUrl with location.origin"),ne=!W.recipeImpl.shouldDoInterceptionBasedOnUrl(o.default.getReferenceOrThrow().windowHandler.location.getOrigin(),W.config.apiDomain,W.config.sessionTokenBackendDomain);else throw Gt}return(0,c.logDebugMessage)("doRequest: Value of doNotDoInterception: "+ne),ne?((0,c.logDebugMessage)("doRequest: Returning without interception"),[4,ie(Ce)]):[3,2];case 1:return[2,ct.sent()];case 2:return we=new Headers(Ce!==void 0&&Ce.headers!==void 0?Ce.headers:re.headers),we.has("Authorization")?[4,B("access")]:[3,5];case 3:return q=ct.sent(),[4,B("refresh")];case 4:Ae=ct.sent(),q!==void 0&&Ae!==void 0&&we.get("Authorization")==="Bearer ".concat(q)&&((0,c.logDebugMessage)("doRequest: Removing Authorization from user provided headers because it contains our access token"),we.delete("Authorization")),ct.label=5;case 5:(0,c.logDebugMessage)("doRequest: Interception started"),i.ProcessState.getInstance().addState(i.PROCESS_STATE.CALLING_INTERCEPTION_REQUEST),Pe=0,He=void 0,ct.label=6;case 6:return[4,P(!0)];case 7:return je=ct.sent(),$e=new Headers(we),Ze=t(t({},Ce),{headers:$e}),je.status!=="EXISTS"?[3,9]:[4,f.getToken(je.lastAccessTokenUpdate)];case 8:lt=ct.sent(),lt!==void 0&&((0,c.logDebugMessage)("doRequest: Adding anti-csrf token to request"),$e.set("anti-csrf",lt)),ct.label=9;case 9:return W.config.autoAddCredentials&&((0,c.logDebugMessage)("doRequest: Adding credentials include"),Ze===void 0?Ze={credentials:"include"}:Ze.credentials===void 0&&(Ze=t(t({},Ze),{credentials:"include"}))),$e.has("rid")?(0,c.logDebugMessage)("doRequest: rid header was already there in request"):((0,c.logDebugMessage)("doRequest: Adding rid header: anti-csrf"),$e.set("rid","anti-csrf")),kt=W.config.tokenTransferMethod,(0,c.logDebugMessage)("doRequest: Adding st-auth-mode header: "+kt),$e.set("st-auth-mode",kt),[4,H($e)];case 10:return ct.sent(),(0,c.logDebugMessage)("doRequest: Making user's http call"),[4,ie(Ze)];case 11:return ht=ct.sent(),(0,c.logDebugMessage)("doRequest: User's http call ended"),[4,Z(ht)];case 12:if(ct.sent(),Y(je.status==="EXISTS",ht.status,ht.headers.get("front-token")),ht.status!==W.config.sessionExpiredStatusCode)return[3,14];if((0,c.logDebugMessage)("doRequest: Status code is: "+ht.status),Pe>=W.config.maxRetryAttemptsForSessionRefresh)throw(0,c.logDebugMessage)("doRequest: Maximum session refresh attempts reached. sessionRefreshAttempts: ".concat(Pe,", maxRetryAttemptsForSessionRefresh: ").concat(W.config.maxRetryAttemptsForSessionRefresh)),_r="Received a 401 response from ".concat(re,". Attempted to refresh the session and retry the request with the updated session tokens ").concat(W.config.maxRetryAttemptsForSessionRefresh," times, but each attempt resulted in a 401 error. The maximum session refresh limit has been reached. Please investigate your API. To increase the session refresh attempts, update maxRetryAttemptsForSessionRefresh in the config."),console.error(_r),new Error(_r);return[4,C(je)];case 13:if(er=ct.sent(),Pe++,(0,c.logDebugMessage)("doRequest: sessionRefreshAttempts: "+Pe),er.result!=="RETRY"){if((0,c.logDebugMessage)("doRequest: Not retrying original request"),er.error!==void 0)if(er.error instanceof Response)He=er.error;else throw er.error;else He=ht;return[3,18]}return(0,c.logDebugMessage)("doRequest: Retrying original request"),[3,17];case 14:return ht.status!==W.config.invalidClaimStatusCode?[3,16]:[4,R(ht)];case 15:ct.sent(),ct.label=16;case 16:return[2,ht];case 17:return[3,6];case 18:return[2,He]}})})},W.attemptRefreshingSession=function(){return r(void 0,void 0,void 0,function(){var ie,Ce;return n(G,function(re){switch(re.label){case 0:if(!W.initCalled)throw Error("init function not called");return[4,P(!1)];case 1:return ie=re.sent(),[4,C(ie)];case 2:if(Ce=re.sent(),Ce.result==="API_ERROR")throw Ce.error;return[2,Ce.result==="RETRY"]}})})},W}();e.default=m;var x="st-last-access-token-update",v="st-refresh-token",b="st-access-token",w="sAntiCsrf",_="sFrontToken";function C(W){return r(this,void 0,void 0,function(){var G,ie,Ce,re,ne,ge,we,q,Ae,Pe,He,je,$e,Ze,lt;return n(this,function(kt){switch(kt.label){case 0:return[4,l.default.getReferenceOrThrow().lockFactory()];case 1:G=kt.sent(),kt.label=2;case 2:return(0,c.logDebugMessage)("onUnauthorisedResponse: trying to acquire lock"),[4,G.acquireLock("REFRESH_TOKEN_USE",1e3)];case 3:if(!kt.sent())return[3,21];(0,c.logDebugMessage)("onUnauthorisedResponse: lock acquired"),kt.label=4;case 4:return kt.trys.push([4,17,19,21]),[4,P(!1)];case 5:return ie=kt.sent(),ie.status==="NOT_EXISTS"?((0,c.logDebugMessage)("onUnauthorisedResponse: Not refreshing because local session state is NOT_EXISTS"),m.config.onHandleEvent({action:"UNAUTHORISED",sessionExpiredOrRevoked:!1,userContext:{}}),[2,{result:"SESSION_EXPIRED"}]):(Ce=ie.status==="EXISTS",re=W.status==="EXISTS",ne=ie.status!==W.status,ge="lastAccessTokenUpdate"in ie&&"lastAccessTokenUpdate"in W&&ie.lastAccessTokenUpdate!==W.lastAccessTokenUpdate,ne&&Ce?((0,c.logDebugMessage)("onUnauthorisedResponse: Retrying early because session status has changed and postLockLSS.status is EXISTS"),[2,{result:"RETRY"}]):Ce&&re&&ge?((0,c.logDebugMessage)("onUnauthorisedResponse: Retrying early because pre and post lastAccessTokenUpdate don't match"),[2,{result:"RETRY"}]):(we=new Headers,W.status!=="EXISTS"?[3,7]:[4,f.getToken(W.lastAccessTokenUpdate)]));case 6:q=kt.sent(),q!==void 0&&((0,c.logDebugMessage)("onUnauthorisedResponse: Adding anti-csrf token to refresh API call"),we.set("anti-csrf",q)),kt.label=7;case 7:return(0,c.logDebugMessage)("onUnauthorisedResponse: Adding rid and fdi-versions to refresh call header"),we.set("rid",m.rid),we.set("fdi-version",a.supported_fdi.join(",")),Ae=m.config.tokenTransferMethod,(0,c.logDebugMessage)("onUnauthorisedResponse: Adding st-auth-mode header: "+Ae),we.set("st-auth-mode",Ae),[4,H(we,!0)];case 8:return kt.sent(),(0,c.logDebugMessage)("onUnauthorisedResponse: Calling refresh pre API hook"),[4,m.config.preAPIHook({action:"REFRESH_SESSION",requestInit:{method:"post",credentials:"include",headers:we},url:m.refreshTokenUrl,userContext:{}})];case 9:return Pe=kt.sent(),(0,c.logDebugMessage)("onUnauthorisedResponse: Making refresh call"),[4,m.env.__supertokensOriginalFetch(Pe.url,Pe.requestInit)];case 10:return He=kt.sent(),(0,c.logDebugMessage)("onUnauthorisedResponse: Refresh call ended"),[4,Z(He)];case 11:return kt.sent(),(0,c.logDebugMessage)("onUnauthorisedResponse: Refresh status code is: "+He.status),je=He.status===m.config.sessionExpiredStatusCode,He.headers.get("front-token")!==null?[3,14]:je?[4,p.setItem("remove")]:[3,13];case 12:return kt.sent(),[3,14];case 13:if(He.status===200)throw $e="The 'front-token' header is missing from a successful refresh-session response. The most likely causes are proxy settings (e.g.: 'front-token' missing from 'access-control-expose-headers' or a proxy stripping this header). Please investigate your API.",console.error($e),new Error($e);kt.label=14;case 14:if(Y(W.status==="EXISTS",He.status,je&&He.headers.get("front-token")===null?"remove":He.headers.get("front-token")),He.status>=300)throw He;return[4,m.config.postAPIHook({action:"REFRESH_SESSION",fetchResponse:He.clone(),requestInit:Pe.requestInit,url:Pe.url,userContext:{}})];case 15:return kt.sent(),[4,P(!1)];case 16:return kt.sent().status==="NOT_EXISTS"?((0,c.logDebugMessage)("onUnauthorisedResponse: local session doesn't exist, so returning session expired"),[2,{result:"SESSION_EXPIRED"}]):(m.config.onHandleEvent({action:"REFRESH_SESSION",userContext:{}}),(0,c.logDebugMessage)("onUnauthorisedResponse: Sending RETRY signal"),[2,{result:"RETRY"}]);case 17:return Ze=kt.sent(),[4,P(!1)];case 18:return kt.sent().status==="NOT_EXISTS"?((0,c.logDebugMessage)("onUnauthorisedResponse: local session doesn't exist, so returning session expired"),[2,{result:"SESSION_EXPIRED",error:Ze}]):((0,c.logDebugMessage)("onUnauthorisedResponse: sending API_ERROR"),[2,{result:"API_ERROR",error:Ze}]);case 19:return[4,G.releaseLock("REFRESH_TOKEN_USE")];case 20:return kt.sent(),(0,c.logDebugMessage)("onUnauthorisedResponse: Released lock"),[7];case 21:return[4,P(!1)];case 22:return lt=kt.sent(),lt.status==="NOT_EXISTS"?((0,c.logDebugMessage)("onUnauthorisedResponse: lock acquired failed and local session doesn't exist, so sending SESSION_EXPIRED"),[2,{result:"SESSION_EXPIRED"}]):lt.status!==W.status||lt.status==="EXISTS"&&W.status==="EXISTS"&&lt.lastAccessTokenUpdate!==W.lastAccessTokenUpdate?((0,c.logDebugMessage)("onUnauthorisedResponse: lock acquired failed and retrying early because pre and post lastAccessTokenUpdate don't match"),[2,{result:"RETRY"}]):[3,2];case 23:return[2]}})})}e.onUnauthorisedResponse=C;function N(){(0,c.logDebugMessage)("onTokenUpdate: firing ACCESS_TOKEN_PAYLOAD_UPDATED event"),m.config.onHandleEvent({action:"ACCESS_TOKEN_PAYLOAD_UPDATED",userContext:{}})}e.onTokenUpdate=N;function R(W){return r(this,void 0,void 0,function(){var G;return n(this,function(ie){switch(ie.label){case 0:return ie.trys.push([0,2,,3]),[4,m.recipeImpl.getInvalidClaimsFromResponse({response:W,userContext:{}})];case 1:return G=ie.sent(),G&&m.config.onHandleEvent({action:"API_INVALID_CLAIM",claimValidationErrors:G,userContext:{}}),[3,3];case 2:return ie.sent(),[3,3];case 3:return[2]}})})}e.onInvalidClaimResponse=R;function P(W){return r(this,void 0,void 0,function(){var G,ie,Ce,re,ne,ge,we;return n(this,function(q){switch(q.label){case 0:return(0,c.logDebugMessage)("getLocalSessionState: called"),[4,U(x)];case 1:return G=q.sent(),[4,p.doesTokenExists()];case 2:return ie=q.sent(),ie&&G!==void 0?((0,c.logDebugMessage)("getLocalSessionState: returning EXISTS since both frontToken and lastAccessTokenUpdate exists"),[2,{status:"EXISTS",lastAccessTokenUpdate:G}]):[3,3];case 3:return G?((0,c.logDebugMessage)("getLocalSessionState: returning NOT_EXISTS since frontToken was cleared but lastAccessTokenUpdate exists"),[2,{status:"NOT_EXISTS"}]):[3,4];case 4:return Ce={status:"MAY_EXIST"},W?((0,c.logDebugMessage)("getLocalSessionState: trying to refresh"),[4,C(Ce)]):[3,8];case 5:return re=q.sent(),re.result!=="RETRY"?((0,c.logDebugMessage)("getLocalSessionState: return NOT_EXISTS in case error from backend"+re.result),[2,{status:"NOT_EXISTS"}]):[4,U(x)];case 6:return ne=q.sent(),[4,p.doesTokenExists()];case 7:if(ge=q.sent(),!ge||ne===void 0)throw we="Failed to retrieve local session state from cookies after a successful session refresh. This indicates a configuration error or that the browser is preventing cookie writes.",console.error(we),new Error(we);return(0,c.logDebugMessage)("getLocalSessionState: returning EXISTS since both frontToken and lastAccessTokenUpdate exists post refresh"),[2,{status:"EXISTS",lastAccessTokenUpdate:ne}];case 8:return(0,c.logDebugMessage)("getLocalSessionState: returning: "+Ce.status),[2,Ce]}})})}e.getLocalSessionState=P;function O(W){switch(W){case"access":return b;case"refresh":return v}}e.getStorageNameForToken=O;function D(W,G){var ie=O(W);return G!==""?((0,c.logDebugMessage)("setToken: saved ".concat(W," token into cookies")),M(ie,G,Date.now()+31536e5)):((0,c.logDebugMessage)("setToken: cleared ".concat(W," token from cookies")),M(ie,G,0))}e.setToken=D;function M(W,G,ie){var Ce="Fri, 31 Dec 9999 23:59:59 GMT";ie!==Number.MAX_SAFE_INTEGER&&(Ce=new Date(ie).toUTCString());var re=m.config.sessionTokenFrontendDomain;return re==="localhost"||re===o.default.getReferenceOrThrow().windowHandler.location.getHostName()?s.default.getReferenceOrThrow().cookieHandler.setCookie("".concat(W,"=").concat(G,";expires=").concat(Ce,";path=/;samesite=").concat(m.config.isInIframe?"none;secure":"lax")):s.default.getReferenceOrThrow().cookieHandler.setCookie("".concat(W,"=").concat(G,";expires=").concat(Ce,";domain=").concat(re,";path=/;samesite=").concat(m.config.isInIframe?"none;secure":"lax"))}function B(W){return r(this,void 0,void 0,function(){var G;return n(this,function(ie){return G=O(W),[2,U(G)]})})}e.getTokenForHeaderAuth=B;function U(W){return r(this,void 0,void 0,function(){var G,ie,Ce,re;return n(this,function(ne){switch(ne.label){case 0:return ie="; ",[4,s.default.getReferenceOrThrow().cookieHandler.getCookie()];case 1:return G=ie+ne.sent(),Ce=G.split("; "+W+"="),Ce.length>=2&&(re=Ce.pop(),re!==void 0)?[2,re.split(";").shift()]:[2,void 0]}})})}function H(W,G){return G===void 0&&(G=!1),r(this,void 0,void 0,function(){var ie,Ce;return n(this,function(re){switch(re.label){case 0:return(0,c.logDebugMessage)("setTokenHeaders: adding existing tokens as header"),[4,B("access")];case 1:return ie=re.sent(),[4,B("refresh")];case 2:return Ce=re.sent(),(G||ie!==void 0)&&Ce!==void 0?W.has("Authorization")?(0,c.logDebugMessage)("setAuthorizationHeaderIfRequired: Authorization header defined by the user, not adding"):((0,c.logDebugMessage)("setAuthorizationHeaderIfRequired: added authorization header"),W.set("Authorization","Bearer ".concat(G?Ce:ie))):(0,c.logDebugMessage)("setAuthorizationHeaderIfRequired: token for header based auth not found"),[2]}})})}function Z(W){return r(this,void 0,void 0,function(){var G,ie,Ce,re,ne;return n(this,function(ge){switch(ge.label){case 0:return(0,c.logDebugMessage)("saveTokensFromHeaders: Saving updated tokens from the response headers"),G=W.headers.get("st-refresh-token"),G===null?[3,2]:((0,c.logDebugMessage)("saveTokensFromHeaders: saving new refresh token"),[4,D("refresh",G)]);case 1:ge.sent(),ge.label=2;case 2:return ie=W.headers.get("st-access-token"),ie===null?[3,4]:((0,c.logDebugMessage)("saveTokensFromHeaders: saving new access token"),[4,D("access",ie)]);case 3:ge.sent(),ge.label=4;case 4:return Ce=W.headers.get("front-token"),Ce===null?[3,6]:((0,c.logDebugMessage)("saveTokensFromHeaders: Setting sFrontToken: "+Ce),[4,p.setItem(Ce)]);case 5:ge.sent(),(0,e.updateClockSkewUsingFrontToken)({frontToken:Ce,responseHeaders:W.headers}),ge.label=6;case 6:return re=W.headers.get("anti-csrf"),re===null?[3,9]:[4,P(!1)];case 7:return ne=ge.sent(),ne.status!=="EXISTS"?[3,9]:((0,c.logDebugMessage)("saveTokensFromHeaders: Setting anti-csrf token"),[4,f.setItem(ne.lastAccessTokenUpdate,re)]);case 8:ge.sent(),ge.label=9;case 9:return[2]}})})}var ee=void 0;function V(){return r(this,void 0,void 0,function(){var W;return n(this,function(G){switch(G.label){case 0:return(0,c.logDebugMessage)("saveLastAccessTokenUpdate: called"),W=Date.now().toString(),(0,c.logDebugMessage)("saveLastAccessTokenUpdate: setting "+W),[4,M(x,W,Number.MAX_SAFE_INTEGER)];case 1:return G.sent(),ee!==void 0?[3,3]:[4,U(x)];case 2:ee=G.sent()===W,G.label=3;case 3:return ee===!1&&console.warn("Saving to cookies was not successful, this indicates a configuration error or the browser preventing us from writing the cookies."),[4,M("sIRTFrontend","",0)];case 4:return G.sent(),[2]}})})}e.saveLastAccessTokenUpdate=V;function te(){return r(this,void 0,void 0,function(){function W(){return r(this,void 0,void 0,function(){var ie,Ce,re,ne,ge;return n(this,function(we){switch(we.label){case 0:return Ce="; ",[4,s.default.getReferenceOrThrow().cookieHandler.getCookie()];case 1:return ie=Ce+we.sent(),re=ie.split("; "+w+"="),re.length>=2&&(ne=re.pop(),ne!==void 0)?(ge=ne.split(";").shift(),ge===void 0?[2,null]:[2,ge]):[2,null]}})})}var G;return n(this,function(ie){switch(ie.label){case 0:return(0,c.logDebugMessage)("getAntiCSRFToken: called"),[4,P(!0)];case 1:return ie.sent().status!=="EXISTS"?((0,c.logDebugMessage)("getAntiCSRFToken: Returning because local session state != EXISTS"),[2,null]):[4,W()];case 2:return G=ie.sent(),(0,c.logDebugMessage)("getAntiCSRFToken: returning: "+G),[2,G]}})})}function se(W){return r(this,void 0,void 0,function(){return n(this,function(G){switch(G.label){case 0:return(0,c.logDebugMessage)("setAntiCSRF: called: "+W),W===void 0?[3,2]:[4,M(w,W,Number.MAX_SAFE_INTEGER)];case 1:return G.sent(),[3,4];case 2:return[4,M(w,"",0)];case 3:G.sent(),G.label=4;case 4:return[2]}})})}e.setAntiCSRF=se;function Q(){return r(this,void 0,void 0,function(){var W;return n(this,function(G){switch(G.label){case 0:return(0,c.logDebugMessage)("getFrontTokenFromCookie: called"),[4,U(_)];case 1:return W=G.sent(),[2,W===void 0?null:W]}})})}function X(W){return JSON.parse(decodeURIComponent(escape(atob(W))))}function fe(){return r(this,void 0,void 0,function(){var W;return n(this,function(G){switch(G.label){case 0:return(0,c.logDebugMessage)("getFrontToken: called"),[4,P(!0)];case 1:return G.sent().status!=="EXISTS"?((0,c.logDebugMessage)("getFrontToken: Returning because sIRTFrontend != EXISTS"),[2,null]):[4,Q()];case 2:return W=G.sent(),(0,c.logDebugMessage)("getFrontToken: returning: "+W),[2,W]}})})}e.getFrontToken=fe;function Se(W){return r(this,void 0,void 0,function(){var G,ie,Ce;return n(this,function(re){switch(re.label){case 0:return(0,c.logDebugMessage)("setFrontToken: called"),[4,Q()];case 1:return G=re.sent(),G!==null&&W!==void 0&&(ie=X(G).up,Ce=X(W).up,JSON.stringify(ie)!==JSON.stringify(Ce)&&N()),W!==void 0?[3,3]:[4,M(_,"",0)];case 2:return re.sent(),[3,5];case 3:return[4,M(_,W,Number.MAX_SAFE_INTEGER)];case 4:re.sent(),re.label=5;case 5:return[2]}})})}e.setFrontToken=Se;function Y(W,G,ie){if(ie==null){(0,c.logDebugMessage)("fireSessionUpdateEventsIfNecessary returning early because the front token was not updated");return}var Ce=ie!=="remove";(0,c.logDebugMessage)("fireSessionUpdateEventsIfNecessary wasLoggedIn: ".concat(W," frontTokenExistsAfter: ").concat(Ce," status: ").concat(G)),W?Ce||(G===m.config.sessionExpiredStatusCode?((0,c.logDebugMessage)("onUnauthorisedResponse: firing UNAUTHORISED event"),m.config.onHandleEvent({action:"UNAUTHORISED",sessionExpiredOrRevoked:!0,userContext:{}})):((0,c.logDebugMessage)("onUnauthorisedResponse: firing SIGN_OUT event"),m.config.onHandleEvent({action:"SIGN_OUT",userContext:{}}))):Ce&&((0,c.logDebugMessage)("onUnauthorisedResponse: firing SESSION_CREATED event"),m.config.onHandleEvent({action:"SESSION_CREATED",userContext:{}}))}e.fireSessionUpdateEventsIfNecessary=Y;var ce=function(W){var G=W.frontToken,ie=W.responseHeaders;if((0,c.logDebugMessage)("updateClockSkewUsingFrontToken: frontToken: "+G),G==null||G==="remove"){(0,c.logDebugMessage)("updateClockSkewUsingFrontToken: the access token payload wasn't updated or is being removed, skipping clock skew update");return}var Ce=X(G),re=m.recipeImpl.calculateClockSkewInMillis({accessTokenPayload:Ce.up,responseHeaders:ie});d.default.getReferenceOrThrow().dateProvider.setClientClockSkewInMillis(re),(0,c.logDebugMessage)("updateClockSkewUsingFrontToken: Client clock synchronized successfully")};e.updateClockSkewUsingFrontToken=ce})(Qy);var _x={};Object.defineProperty(_x,"__esModule",{value:!0});_x.SessionClaimValidatorStore=void 0;var wie=function(){function e(){}return e.claimValidatorsAddedByOtherRecipes=[],e.addClaimValidatorFromOtherRecipe=function(t){e.claimValidatorsAddedByOtherRecipes.push(t)},e.getClaimValidatorsAddedByOtherRecipes=function(){return e.claimValidatorsAddedByOtherRecipes},e}();_x.SessionClaimValidatorStore=wie;_x.default=wie;Object.defineProperty(qO,"__esModule",{value:!0});qO.getGlobalClaimValidators=void 0;var KAe=so,XAe=Qy,YAe=_x;function QAe(e,t){var r=(0,KAe.getNormalisedUserContext)(t),n=YAe.default.getClaimValidatorsAddedByOtherRecipes(),i=XAe.default.recipeImpl.getGlobalClaimValidators({claimValidatorsAddedByOtherRecipes:n,userContext:r}),a=e!==void 0?e(i,r):i;return a}qO.getGlobalClaimValidators=QAe;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(qO)})(pie);var JAe={},s0=Ve&&Ve.__assign||function(){return s0=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},s0.apply(this,arguments)};Object.defineProperty(Br,"__esModule",{value:!0});Br.getPublicConfig=Br.getPublicPlugin=Br.applyPlugins=Br.normaliseUser=Br.normaliseUserResponse=Br.getGlobalClaimValidators=Br.getHashFromLocation=Br.getNormalisedUserContext=Br.checkForSSRErrorAndAppendIfNeeded=Br.getAllQueryParams=Br.getQueryParams=Br.isTest=Br.normaliseInputAppInfoOrThrowError=Br.appendQueryParamsToURL=void 0;var zL=HO,Sie=ry,ZAe=$O,OA=Xy,eTe=VO,tTe=pie;function rTe(e,t){if(t===void 0)return e;try{var r=new URL(e);return Object.entries(t).forEach(function(a){var s=a[0],o=a[1];r.searchParams.set(s,o)}),r.href}catch{var n=e.startsWith("/")?"http:localhost":"http://localhost/",i=new URL("".concat(n).concat(e));return Object.entries(t).forEach(function(s){var o=s[0],l=s[1];i.searchParams.set(o,l)}),"".concat(i.pathname).concat(i.search)}}Br.appendQueryParamsToURL=rTe;function nTe(e,t){return t!==void 0?new OA.default(t):new OA.default(e)}function iTe(e){if(e===void 0)throw new Error("Please provide the appInfo object when calling supertokens.init");if(e.apiDomain===void 0)throw new Error("Please provide your apiDomain inside the appInfo object when calling supertokens.init");if(e.appName===void 0)throw new Error("Please provide your appName inside the appInfo object when calling supertokens.init");var t=new OA.default("");return e.apiGatewayPath!==void 0&&(t=new OA.default(e.apiGatewayPath)),{appName:e.appName,apiDomain:new ZAe.default(e.apiDomain),apiBasePath:t.appendPath(nTe(Sie.DEFAULT_API_BASE_PATH,e.apiBasePath))}}Br.normaliseInputAppInfoOrThrowError=iTe;function aTe(){try{return JAe.TEST_MODE==="testing"}catch{return!1}}Br.isTest=aTe;function sTe(e){var t=new URLSearchParams(zL.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getSearch()),r=t.get(e);if(r!==null)return r}Br.getQueryParams=sTe;function oTe(){return new URLSearchParams(zL.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getSearch())}Br.getAllQueryParams=oTe;function lTe(e){return typeof window>"u"&&(e=e+Sie.SSR_ERROR),e}Br.checkForSSRErrorAndAppendIfNeeded=lTe;function cTe(e){return e===void 0?{}:e}Br.getNormalisedUserContext=cTe;function uTe(){return zL.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHash().substring(1)}Br.getHashFromLocation=uTe;function dTe(e){var t=e.overrideGlobalClaimValidators,r=e.userContext;return(0,tTe.getGlobalClaimValidators)(t,r)}Br.getGlobalClaimValidators=dTe;function fTe(e,t){return"createdNewRecipeUser"in t?t:{createdNewRecipeUser:t.createdNewUser,user:Eie(e,t.user)}}Br.normaliseUserResponse=fTe;function Eie(e,t){if("loginMethods"in t)return t;var r=t.email!==void 0?[t.email]:[],n=t.phoneNumber!==void 0?[t.phoneNumber]:[],i=t.thirdParty!==void 0?[t.thirdParty]:[],a=t.webauthn!==void 0?t.webauthn:{credentialIds:[]};return{id:t.id,emails:r,phoneNumbers:n,thirdParty:i,webauthn:a,isPrimaryUser:!1,tenantIds:t.tenantIds,timeJoined:t.timeJoined,loginMethods:[{recipeId:e,recipeUserId:t.id,timeJoined:t.timeJoined,tenantIds:t.tenantIds,email:t.email,phoneNumber:t.email}]}}Br.normaliseUser=Eie;function hTe(e,t,r){for(var n,i=s0({},t??{}),a=[(n=i.override)===null||n===void 0?void 0:n.functions],s=0,o=r;s<o.length;s++){var l=o[s],c=l[e];c&&(i=s0({},c.config?c.config(i):i),c.functions!==void 0&&a.push(c.functions))}return a=a.reverse().filter(function(d){return d!==void 0}),a.length>0&&(i.override=s0(s0({},i.override),{functions:function(d,f){for(var p=0,m=a;p<m.length;p++){var x=m[p];f.override(x)}return d}})),i}Br.applyPlugins=hTe;function pTe(e){return{id:e.id,initialized:!e.init,version:e.version,exports:e.exports,compatibleWebJSSDKVersions:e.compatibleWebJSSDKVersions}}Br.getPublicPlugin=pTe;function mTe(e){var t=Object.keys(e),r=t.reduce(function(n,i){var a;return eTe.nonPublicConfigProperties.includes(i)?n:s0(s0({},n),(a={},a[i]=e[i],a))},{});return r}Br.getPublicConfig=mTe;var Jy={},XO={};Object.defineProperty(XO,"__esModule",{value:!0});var gTe=function(){function e(t){this.config=t}return e}();XO.default=gTe;var cj={},uj={},i_={},Sd={},fw={},AV;function xTe(){if(AV)return fw;AV=1;var e=Ve&&Ve.__awaiter||function(i,a,s,o){function l(c){return c instanceof s?c:new s(function(d){d(c)})}return new(s||(s=Promise))(function(c,d){function f(x){try{m(o.next(x))}catch(v){d(v)}}function p(x){try{m(o.throw(x))}catch(v){d(v)}}function m(x){x.done?c(x.value):l(x.value).then(f,p)}m((o=o.apply(i,a||[])).next())})},t=Ve&&Ve.__generator||function(i,a){var s={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,l,c,d;return d={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(m){return function(x){return p([m,x])}}function p(m){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,l&&(c=m[0]&2?l.return:m[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,m[1])).done)return c;switch(l=0,c&&(m=[m[0]&2,c.value]),m[0]){case 0:case 1:c=m;break;case 4:return s.label++,{value:m[1],done:!1};case 5:s.label++,l=m[1],m=[0];continue;case 7:m=s.ops.pop(),s.trys.pop();continue;default:if(c=s.trys,!(c=c.length>0&&c[c.length-1])&&(m[0]===6||m[0]===2)){s=0;continue}if(m[0]===3&&(!c||m[1]>c[0]&&m[1]<c[3])){s.label=m[1];break}if(m[0]===6&&s.label<c[1]){s.label=c[1],c=m;break}if(c&&s.label<c[2]){s.label=c[2],s.ops.push(m);break}c[2]&&s.ops.pop(),s.trys.pop();continue}m=a.call(i,s)}catch(x){m=[6,x],l=0}finally{o=c=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}};Object.defineProperty(fw,"__esModule",{value:!0}),fw.createAxiosErrorFromFetchResp=void 0;function r(i,a,s,o,l){return i.config=a,s&&(i.code=s),i.request=o,i.response=l,i.isAxiosError=!0,i.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},i}function n(i){return e(this,void 0,void 0,function(){var a,s,o,l,c;return t(this,function(d){switch(d.label){case 0:if(a={url:i.url,headers:i.headers},s="status"in i,!s)return[3,12];if(l=i.headers.get("content-type"),c=void 0,l!==null)return[3,5];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,i.text()];case 2:return c=d.sent(),[3,4];case 3:return d.sent(),c="",[3,4];case 4:return[3,11];case 5:return l.includes("application/json")?[4,i.json()]:[3,7];case 6:return c=d.sent(),[3,11];case 7:return l.includes("text/")?[4,i.text()]:[3,9];case 8:return c=d.sent(),[3,11];case 9:return[4,i.blob()];case 10:c=d.sent(),d.label=11;case 11:o={data:c,status:i.status,statusText:i.statusText,headers:i.headers,config:a,request:void 0},d.label=12;case 12:return[2,r(s?new Error("Request failed with status code "+i.status):i,a,i.code,void 0,o)]}})})}return fw.createAxiosErrorFromFetchResp=n,fw}var TV;function vTe(){if(TV)return Sd;TV=1;var e=Ve&&Ve.__assign||function(){return e=Object.assign||function(_){for(var C,N=1,R=arguments.length;N<R;N++){C=arguments[N];for(var P in C)Object.prototype.hasOwnProperty.call(C,P)&&(_[P]=C[P])}return _},e.apply(this,arguments)},t=Ve&&Ve.__awaiter||function(_,C,N,R){function P(O){return O instanceof N?O:new N(function(D){D(O)})}return new(N||(N=Promise))(function(O,D){function M(H){try{U(R.next(H))}catch(Z){D(Z)}}function B(H){try{U(R.throw(H))}catch(Z){D(Z)}}function U(H){H.done?O(H.value):P(H.value).then(M,B)}U((R=R.apply(_,C||[])).next())})},r=Ve&&Ve.__generator||function(_,C){var N={label:0,sent:function(){if(O[0]&1)throw O[1];return O[1]},trys:[],ops:[]},R,P,O,D;return D={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(D[Symbol.iterator]=function(){return this}),D;function M(U){return function(H){return B([U,H])}}function B(U){if(R)throw new TypeError("Generator is already executing.");for(;N;)try{if(R=1,P&&(O=U[0]&2?P.return:U[0]?P.throw||((O=P.return)&&O.call(P),0):P.next)&&!(O=O.call(P,U[1])).done)return O;switch(P=0,O&&(U=[U[0]&2,O.value]),U[0]){case 0:case 1:O=U;break;case 4:return N.label++,{value:U[1],done:!1};case 5:N.label++,P=U[1],U=[0];continue;case 7:U=N.ops.pop(),N.trys.pop();continue;default:if(O=N.trys,!(O=O.length>0&&O[O.length-1])&&(U[0]===6||U[0]===2)){N=0;continue}if(U[0]===3&&(!O||U[1]>O[0]&&U[1]<O[3])){N.label=U[1];break}if(U[0]===6&&N.label<O[1]){N.label=O[1],O=U;break}if(O&&N.label<O[2]){N.label=O[2],N.ops.push(U);break}O[2]&&N.ops.pop(),N.trys.pop();continue}U=C.call(_,N)}catch(H){U=[6,H],P=0}finally{R=O=0}if(U[0]&5)throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}};Object.defineProperty(Sd,"__esModule",{value:!0}),Sd.responseErrorInterceptor=Sd.responseInterceptor=Sd.interceptorFunctionRequestFulfilled=void 0;var n=xTe(),i=Qy,a=GO,s=xu,o=Jc;function l(_){_.__supertokensSessionRefreshAttempts===void 0&&(_.__supertokensSessionRefreshAttempts=0),_.__supertokensSessionRefreshAttempts++}function c(_){return _.__supertokensSessionRefreshAttempts===void 0&&(_.__supertokensSessionRefreshAttempts=0),_.__supertokensSessionRefreshAttempts>=i.default.config.maxRetryAttemptsForSessionRefresh}function d(_){var C=_.url===void 0?"":_.url,N=_.baseURL;return N!==void 0&&(C.charAt(0)==="/"&&N.charAt(N.length-1)==="/"?C=N+C.substr(1):C.charAt(0)!=="/"&&N.charAt(N.length-1)!=="/"?C=N+"/"+C:C=N+C),C}function f(_){return t(this,void 0,void 0,function(){var C,N,R,P,O,D;return r(this,function(M){switch(M.label){case 0:(0,o.logDebugMessage)("interceptorFunctionRequestFulfilled: started axios interception"),C=d(_),N=!1;try{N=typeof C=="string"&&!i.default.recipeImpl.shouldDoInterceptionBasedOnUrl(C,i.default.config.apiDomain,i.default.config.sessionTokenBackendDomain)}catch(B){if(B.message==="Please provide a valid domain name")(0,o.logDebugMessage)("interceptorFunctionRequestFulfilled: Trying shouldDoInterceptionBasedOnUrl with location.origin"),N=!i.default.recipeImpl.shouldDoInterceptionBasedOnUrl(s.default.getReferenceOrThrow().windowHandler.location.getOrigin(),i.default.config.apiDomain,i.default.config.sessionTokenBackendDomain);else throw B}return(0,o.logDebugMessage)("interceptorFunctionRequestFulfilled: Value of doNotDoInterception: "+N),N?((0,o.logDebugMessage)("interceptorFunctionRequestFulfilled: Returning config unchanged"),[2,_]):((0,o.logDebugMessage)("interceptorFunctionRequestFulfilled: Modifying config"),a.ProcessState.getInstance().addState(a.PROCESS_STATE.CALLING_INTERCEPTION_REQUEST),[4,(0,i.getLocalSessionState)(!0)]);case 1:return R=M.sent(),P=_,R.status!=="EXISTS"?[3,3]:[4,i.AntiCsrfToken.getToken(R.lastAccessTokenUpdate)];case 2:O=M.sent(),O!==void 0&&((0,o.logDebugMessage)("interceptorFunctionRequestFulfilled: Adding anti-csrf token to request"),P=e(e({},P),{headers:P===void 0?{"anti-csrf":O}:e(e({},P.headers),{"anti-csrf":O})})),M.label=3;case 3:return i.default.config.autoAddCredentials&&P.withCredentials===void 0&&((0,o.logDebugMessage)("interceptorFunctionRequestFulfilled: Adding credentials include"),P=e(e({},P),{withCredentials:!0})),(0,o.logDebugMessage)("interceptorFunctionRequestFulfilled: Adding rid header: anti-csrf (it may be overriden by the user's provided rid)"),P=e(e({},P),{headers:P===void 0?{rid:"anti-csrf"}:e({rid:"anti-csrf"},P.headers)}),D=i.default.config.tokenTransferMethod,(0,o.logDebugMessage)("interceptorFunctionRequestFulfilled: Adding st-auth-mode header: "+D),P.headers["st-auth-mode"]=D,[4,w(P)];case 4:return P=M.sent(),[4,v(P)];case 5:return M.sent(),(0,o.logDebugMessage)("interceptorFunctionRequestFulfilled: returning modified config"),[2,P]}})})}Sd.interceptorFunctionRequestFulfilled=f;function p(_){var C=this;return function(N){return t(C,void 0,void 0,function(){var R,P,O,D;return r(this,function(M){switch(M.label){case 0:if(R=!1,!i.default.initCalled)throw new Error("init function not called");(0,o.logDebugMessage)("responseInterceptor: started"),(0,o.logDebugMessage)("responseInterceptor: already intercepted: "+N.headers["x-supertokens-xhr-intercepted"]),P=d(N.config);try{R=typeof P=="string"&&!i.default.recipeImpl.shouldDoInterceptionBasedOnUrl(P,i.default.config.apiDomain,i.default.config.sessionTokenBackendDomain)||!!N.headers["x-supertokens-xhr-intercepted"]}catch(B){if(B.message==="Please provide a valid domain name")(0,o.logDebugMessage)("responseInterceptor: Trying shouldDoInterceptionBasedOnUrl with location.origin"),R=!i.default.recipeImpl.shouldDoInterceptionBasedOnUrl(s.default.getReferenceOrThrow().windowHandler.location.getOrigin(),i.default.config.apiDomain,i.default.config.sessionTokenBackendDomain)||!!N.headers["x-supertokens-xhr-intercepted"];else throw B}return(0,o.logDebugMessage)("responseInterceptor: Value of doNotDoInterception: "+R),R?((0,o.logDebugMessage)("responseInterceptor: Returning without interception"),[2,N]):((0,o.logDebugMessage)("responseInterceptor: Interception started"),a.ProcessState.getInstance().addState(a.PROCESS_STATE.CALLING_INTERCEPTION_RESPONSE),[4,(0,i.getLocalSessionState)(!1)]);case 1:return O=M.sent(),[4,b(N)];case 2:return M.sent(),(0,i.fireSessionUpdateEventsIfNecessary)(O.status==="EXISTS",N.status,N.headers["front-token"]),N.status!==i.default.config.sessionExpiredStatusCode?[3,3]:((0,o.logDebugMessage)("responseInterceptor: Status code is: "+N.status),D=N.config,[2,x.doRequest(function(B){return _(B)},D,P,N,void 0,!0)]);case 3:return N.status!==i.default.config.invalidClaimStatusCode?[3,5]:[4,(0,i.onInvalidClaimResponse)(N)];case 4:M.sent(),M.label=5;case 5:return[2,N]}})})}}Sd.responseInterceptor=p;function m(_){var C=this;return function(N){return t(C,void 0,void 0,function(){var R;return r(this,function(P){switch(P.label){case 0:if((0,o.logDebugMessage)("responseErrorInterceptor: called"),(0,o.logDebugMessage)("responseErrorInterceptor: already intercepted: "+(N.response&&N.response.headers["x-supertokens-xhr-intercepted"])),N.response===void 0||N.response.headers["x-supertokens-xhr-intercepted"])throw N;return N.response!==void 0&&N.response.status===i.default.config.sessionExpiredStatusCode?((0,o.logDebugMessage)("responseErrorInterceptor: Status code is: "+N.response.status),R=N.config,[2,x.doRequest(function(O){return _(O)},R,d(R),void 0,N,!0)]):[3,1];case 1:return N.response!==void 0&&N.response.status===i.default.config.invalidClaimStatusCode?[4,(0,i.onInvalidClaimResponse)(N.response)]:[3,3];case 2:P.sent(),P.label=3;case 3:throw N}})})}}Sd.responseErrorInterceptor=m;var x=function(){function _(){}var C;return C=_,_.doRequest=function(N,R,P,O,D,M){return M===void 0&&(M=!1),t(void 0,void 0,void 0,function(){var B,U,H,Z,ee,V,te,se,fe,Q,X,fe,Se,Y,ce;return r(C,function(W){switch(W.label){case 0:if(!i.default.initCalled)throw Error("init function not called");(0,o.logDebugMessage)("doRequest: called"),B=!1;try{B=typeof P=="string"&&!i.default.recipeImpl.shouldDoInterceptionBasedOnUrl(P,i.default.config.apiDomain,i.default.config.sessionTokenBackendDomain)&&M}catch(G){if(G.message==="Please provide a valid domain name")(0,o.logDebugMessage)("doRequest: Trying shouldDoInterceptionBasedOnUrl with location.origin"),B=!i.default.recipeImpl.shouldDoInterceptionBasedOnUrl(s.default.getReferenceOrThrow().windowHandler.location.getOrigin(),i.default.config.apiDomain,i.default.config.sessionTokenBackendDomain)&&M;else throw G}if((0,o.logDebugMessage)("doRequest: Value of doNotDoInterception: "+B),!B)return[3,2];if((0,o.logDebugMessage)("doRequest: Returning without interception"),D!==void 0)throw D;return O!==void 0?[2,O]:[4,N(R)];case 1:return[2,W.sent()];case 2:return(0,o.logDebugMessage)("doRequest: Interception started"),[4,w(R)];case 3:R=W.sent(),U=void 0,W.label=4;case 4:return[4,(0,i.getLocalSessionState)(!0)];case 5:return H=W.sent(),Z=R,H.status!=="EXISTS"?[3,7]:[4,i.AntiCsrfToken.getToken(H.lastAccessTokenUpdate)];case 6:ee=W.sent(),ee!==void 0&&((0,o.logDebugMessage)("doRequest: Adding anti-csrf token to request"),Z=e(e({},Z),{headers:Z===void 0?{"anti-csrf":ee}:e(e({},Z.headers),{"anti-csrf":ee})})),W.label=7;case 7:return i.default.config.autoAddCredentials&&Z.withCredentials===void 0&&((0,o.logDebugMessage)("doRequest: Adding credentials include"),Z=e(e({},Z),{withCredentials:!0})),(0,o.logDebugMessage)("doRequest: Adding rid header: anti-csrf (May get overriden by user's rid)"),Z=e(e({},Z),{headers:Z===void 0?{rid:"anti-csrf"}:e({rid:"anti-csrf"},Z.headers)}),V=i.default.config.tokenTransferMethod,(0,o.logDebugMessage)("doRequest: Adding st-auth-mode header: "+V),Z.headers["st-auth-mode"]=V,[4,v(Z)];case 8:W.sent(),W.label=9;case 9:if(W.trys.push([9,14,,27]),te=D,se=O,D=void 0,O=void 0,te!==void 0)throw(0,o.logDebugMessage)("doRequest: Not making call because localPrevError is not undefined"),te;return se!==void 0?(0,o.logDebugMessage)("doRequest: Not making call because localPrevResponse is not undefined"):(0,o.logDebugMessage)("doRequest: Making user's http call"),se!==void 0?[3,11]:[4,N(Z)];case 10:return Q=W.sent(),[3,12];case 11:Q=se,W.label=12;case 12:return fe=Q,(0,o.logDebugMessage)("doRequest: User's http call ended"),[4,b(fe)];case 13:return W.sent(),(0,i.fireSessionUpdateEventsIfNecessary)(H.status==="EXISTS",fe.status,fe.headers["front-token"]),[2,fe];case 14:return X=W.sent(),fe=X.response,fe===void 0?[3,25]:[4,b(fe)];case 15:if(W.sent(),(0,i.fireSessionUpdateEventsIfNecessary)(H.status==="EXISTS",fe.status,fe.headers["front-token"]),fe.status!==i.default.config.sessionExpiredStatusCode)return[3,21];if((0,o.logDebugMessage)("doRequest: Status code is: "+fe.status),c(R))throw(0,o.logDebugMessage)("doRequest: Maximum session refresh attempts reached. sessionRefreshAttempts: ".concat(R.__supertokensSessionRefreshAttempts,", maxRetryAttemptsForSessionRefresh: ").concat(i.default.config.maxRetryAttemptsForSessionRefresh)),Se="Received a 401 response from ".concat(P,". Attempted to refresh the session and retry the request with the updated session tokens ").concat(i.default.config.maxRetryAttemptsForSessionRefresh," times, but each attempt resulted in a 401 error. The maximum session refresh limit has been reached. Please investigate your API. To increase the session refresh attempts, update maxRetryAttemptsForSessionRefresh in the config."),console.error(Se),new Error(Se);return[4,(0,i.onUnauthorisedResponse)(H)];case 16:return Y=W.sent(),l(R),(0,o.logDebugMessage)("doRequest: sessionRefreshAttempts: "+R.__supertokensSessionRefreshAttempts),Y.result==="RETRY"?[3,20]:((0,o.logDebugMessage)("doRequest: Not retrying original request"),Y.error===void 0?[3,18]:[4,(0,n.createAxiosErrorFromFetchResp)(Y.error)]);case 17:return ce=W.sent(),[3,19];case 18:ce=X,W.label=19;case 19:return U=ce,[3,28];case 20:return(0,o.logDebugMessage)("doRequest: Retrying original request"),[3,24];case 21:return fe.status!==i.default.config.invalidClaimStatusCode?[3,23]:[4,(0,i.onInvalidClaimResponse)(fe)];case 22:W.sent(),W.label=23;case 23:throw X;case 24:return[3,26];case 25:throw X;case 26:return[3,27];case 27:return[3,4];case 28:throw U}})})},_}();Sd.default=x;function v(_){return t(this,void 0,void 0,function(){var C,N;return r(this,function(R){switch(R.label){case 0:return _.headers===void 0&&(_.headers={}),(0,o.logDebugMessage)("setAuthorizationHeaderIfRequired: adding existing tokens as header"),[4,(0,i.getTokenForHeaderAuth)("access")];case 1:return C=R.sent(),[4,(0,i.getTokenForHeaderAuth)("refresh")];case 2:return N=R.sent(),C!==void 0&&N!==void 0?_.headers.Authorization!==void 0||_.headers.authorization!==void 0?(0,o.logDebugMessage)("setAuthorizationHeaderIfRequired: Authorization header defined by the user, not adding"):((0,o.logDebugMessage)("setAuthorizationHeaderIfRequired: added authorization header"),_.headers=e(e({},_.headers),{Authorization:"Bearer ".concat(C)}),_.__supertokensAddedAuthHeader=!0):(0,o.logDebugMessage)("setAuthorizationHeaderIfRequired: token for header based auth not found"),[2]}})})}function b(_){return t(this,void 0,void 0,function(){var C,N,R,P,O,D;return r(this,function(M){switch(M.label){case 0:return(0,o.logDebugMessage)("saveTokensFromHeaders: Saving updated tokens from the response"),C=_.headers["st-refresh-token"],C===void 0?[3,2]:((0,o.logDebugMessage)("saveTokensFromHeaders: saving new refresh token"),[4,(0,i.setToken)("refresh",C)]);case 1:M.sent(),M.label=2;case 2:return N=_.headers["st-access-token"],N===void 0?[3,4]:((0,o.logDebugMessage)("saveTokensFromHeaders: saving new access token"),[4,(0,i.setToken)("access",N)]);case 3:M.sent(),M.label=4;case 4:return R=_.headers["front-token"],R===void 0?[3,6]:((0,o.logDebugMessage)("doRequest: Setting sFrontToken: "+R),[4,i.FrontToken.setItem(R)]);case 5:M.sent(),P=new Headers,Object.entries(_.headers).forEach(function(B){var U=B[0],H=B[1];Array.isArray(H)?H.forEach(function(Z){return P.append(U,Z)}):P.append(U,H)}),(0,i.updateClockSkewUsingFrontToken)({frontToken:R,responseHeaders:P}),M.label=6;case 6:return O=_.headers["anti-csrf"],O===void 0?[3,9]:[4,(0,i.getLocalSessionState)(!1)];case 7:return D=M.sent(),D.status!=="EXISTS"?[3,9]:((0,o.logDebugMessage)("doRequest: Setting anti-csrf token"),[4,i.AntiCsrfToken.setItem(D.lastAccessTokenUpdate,O)]);case 8:M.sent(),M.label=9;case 9:return[2]}})})}function w(_){return t(this,void 0,void 0,function(){var C,N,R,P;return r(this,function(O){switch(O.label){case 0:return[4,(0,i.getTokenForHeaderAuth)("access")];case 1:return C=O.sent(),[4,(0,i.getTokenForHeaderAuth)("refresh")];case 2:return N=O.sent(),R=_.headers.Authorization||_.headers.authorization,C!==void 0&&N!==void 0&&(R==="Bearer ".concat(C)||"__supertokensAddedAuthHeader"in _)?((0,o.logDebugMessage)("removeAuthHeaderIfMatchesLocalToken: Removing Authorization from user provided headers because it contains our access token"),P=e(e({},_),{headers:e({},_.headers)}),delete P.headers.authorization,delete P.headers.Authorization,[2,P]):[2,_]}})})}return Sd}var hw={},IV;function yTe(){if(IV)return hw;IV=1;var e=Ve&&Ve.__awaiter||function(p,m,x,v){function b(w){return w instanceof x?w:new x(function(_){_(w)})}return new(x||(x=Promise))(function(w,_){function C(P){try{R(v.next(P))}catch(O){_(O)}}function N(P){try{R(v.throw(P))}catch(O){_(O)}}function R(P){P.done?w(P.value):b(P.value).then(C,N)}R((v=v.apply(p,m||[])).next())})},t=Ve&&Ve.__generator||function(p,m){var x={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},v,b,w,_;return _={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function C(R){return function(P){return N([R,P])}}function N(R){if(v)throw new TypeError("Generator is already executing.");for(;x;)try{if(v=1,b&&(w=R[0]&2?b.return:R[0]?b.throw||((w=b.return)&&w.call(b),0):b.next)&&!(w=w.call(b,R[1])).done)return w;switch(b=0,w&&(R=[R[0]&2,w.value]),R[0]){case 0:case 1:w=R;break;case 4:return x.label++,{value:R[1],done:!1};case 5:x.label++,b=R[1],R=[0];continue;case 7:R=x.ops.pop(),x.trys.pop();continue;default:if(w=x.trys,!(w=w.length>0&&w[w.length-1])&&(R[0]===6||R[0]===2)){x=0;continue}if(R[0]===3&&(!w||R[1]>w[0]&&R[1]<w[3])){x.label=R[1];break}if(R[0]===6&&x.label<w[1]){x.label=w[1],w=R;break}if(w&&x.label<w[2]){x.label=w[2],x.ops.push(R);break}w[2]&&x.ops.pop(),x.trys.pop();continue}R=m.call(p,x)}catch(P){R=[6,P],b=0}finally{v=w=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}};Object.defineProperty(hw,"__esModule",{value:!0}),hw.addInterceptorsToXMLHttpRequest=void 0;var r=Qy,n=Jc,i=xu,a=GO,s=["readystatechange","abort","error","load","loadend","loadstart","progress","timeout"];function o(){var p=new Promise(function(x){return setTimeout(x,0)}),m=XMLHttpRequest;(0,n.logDebugMessage)("addInterceptorsToXMLHttpRequest called"),XMLHttpRequest=function(){var x=new m,v=this,b=[],w=[],_={},C,N=new Map,R=p;function P(Q){R=R.finally(function(){var X;return(X=Q())===null||X===void 0?void 0:X.catch(function(fe){var Se=new ProgressEvent("error");Se.error=fe,v.onerror!==void 0&&v.onerror!==null&&v.onerror(Se),H("error",Se)})})}var O="",D=!1,M=void 0,B,U=0;v.onload=null,v.onreadystatechange=null,v.onloadend=null,v.addEventListener=function(Q,X,fe){var Se=N.get(Q);Se===void 0&&(Se=new Set,N.set(Q,Se)),Se.add(X)},v.removeEventListener=function(Q,X){var fe=N.get(Q);fe===void 0&&(fe=new Set,N.set(Q,fe)),fe.delete(X)};function H(Q,X){var fe=N.get(Q);(0,n.logDebugMessage)("XHRInterceptor dispatching ".concat(X.type," to ").concat(fe?fe.size:0," listeners")),fe&&Array.from(fe).forEach(function(Se){return Se.apply(v,[X])})}function Z(){return e(this,void 0,void 0,function(){var Q,X,fe;return t(this,function(Se){switch(Se.label){case 0:if(M===void 0)throw new Error("Should never come here..");if((0,n.logDebugMessage)("XHRInterceptor.handleRetryPostRefreshing: preRequestLSS "+M.status),U>=r.default.config.maxRetryAttemptsForSessionRefresh)throw(0,n.logDebugMessage)("XHRInterceptor.handleRetryPostRefreshing: Maximum session refresh attempts reached. sessionRefreshAttempts: ".concat(U,", maxRetryAttemptsForSessionRefresh: ").concat(r.default.config.maxRetryAttemptsForSessionRefresh)),_.status=0,_.statusText="",_.responseType="",Q="Received a 401 response from ".concat(O,". Attempted to refresh the session and retry the request with the updated session tokens ").concat(r.default.config.maxRetryAttemptsForSessionRefresh," times, but each attempt resulted in a 401 error. The maximum session refresh limit has been reached. Please investigate your API. To increase the session refresh attempts, update maxRetryAttemptsForSessionRefresh in the config."),console.error(Q),new Error(Q);return[4,(0,r.onUnauthorisedResponse)(M)];case 1:if(X=Se.sent(),U++,(0,n.logDebugMessage)("XHRInterceptor.handleRetryPostRefreshing: sessionRefreshAttempts: "+U),X.result!=="RETRY"){if((0,n.logDebugMessage)("XHRInterceptor.handleRetryPostRefreshing: Not retrying original request "+!!X.error),X.error!==void 0)throw X.error;return[2,!0]}return(0,n.logDebugMessage)("XHRInterceptor.handleRetryPostRefreshing: Retrying original request"),fe=new m,te(v,fe,!0),b.forEach(function(Y){Y(fe)}),se(fe,B),[2,!1]}})})}function ee(Q){return e(this,void 0,void 0,function(){var X,fe,Se,Y,ce;return t(this,function(W){switch(W.label){case 0:if(D)return(0,n.logDebugMessage)("XHRInterceptor.handleResponse: Returning without interception"),[2,!0];W.label=1;case 1:return W.trys.push([1,7,,11]),(0,n.logDebugMessage)("XHRInterceptor.handleResponse: Interception started"),a.ProcessState.getInstance().addState(a.PROCESS_STATE.CALLING_INTERCEPTION_RESPONSE),X=Q.status,fe=f(Q),[4,d(fe)];case 2:return W.sent(),(0,r.fireSessionUpdateEventsIfNecessary)(M.status==="EXISTS",X,fe.get("front-token")),X!==r.default.config.sessionExpiredStatusCode?[3,4]:((0,n.logDebugMessage)("responseInterceptor: Status code is: "+X),[4,Z()]);case 3:return[2,W.sent()];case 4:return X!==r.default.config.invalidClaimStatusCode?[3,6]:[4,(0,r.onInvalidClaimResponse)({data:Q.responseText})];case 5:W.sent(),W.label=6;case 6:return[2,!0];case 7:return Se=W.sent(),(0,n.logDebugMessage)("XHRInterceptor.handleResponse: caught error"),Se.status===void 0?[3,9]:[4,l(Se)];case 8:if(Y=W.sent(),_.status=Y.status,_.statusText=Y.statusText,_.responseType=Y.responseType,C=Y.headers,Y.responseType==="json")try{_.response=JSON.parse(Y.responseText)}catch{_.response=Y.responseText}else _.response=Y.responseText;return _.responseText=Y.responseText,[3,10];case 9:ce=new ProgressEvent("error"),ce.error=Se,v.onerror!==void 0&&v.onerror!==null&&v.onerror(ce),H("error",ce),W.label=10;case 10:return[2,!0];case 11:return[2]}})})}v.open=function(Q,X){(0,n.logDebugMessage)("XHRInterceptor.open called");var fe=arguments;O=X;try{D=typeof O=="string"&&!r.default.recipeImpl.shouldDoInterceptionBasedOnUrl(O,r.default.config.apiDomain,r.default.config.sessionTokenBackendDomain)||typeof O!="string"&&!r.default.recipeImpl.shouldDoInterceptionBasedOnUrl(O.toString(),r.default.config.apiDomain,r.default.config.sessionTokenBackendDomain)}catch(Se){if(Se.message==="Please provide a valid domain name")(0,n.logDebugMessage)("XHRInterceptor.open: Trying shouldDoInterceptionBasedOnUrl with location.origin"),D=!r.default.recipeImpl.shouldDoInterceptionBasedOnUrl(i.default.getReferenceOrThrow().windowHandler.location.getOrigin(),r.default.config.apiDomain,r.default.config.sessionTokenBackendDomain);else throw Se}P(function(){b.push(function(Se){Se.open.apply(Se,fe)}),x.open.apply(x,fe)})},v.send=function(Q){B=Q,se(x,B)},v.setRequestHeader=function(Q,X){var fe=this;if((0,n.logDebugMessage)("XHRInterceptor.setRequestHeader: Called with ".concat(Q)),D){P(function(){return x.setRequestHeader(Q,X)});return}Q!=="anti-csrf"&&P(function(){return e(fe,void 0,void 0,function(){var Se,Y;return t(this,function(ce){switch(ce.label){case 0:return Q.toLowerCase()!=="authorization"?[3,3]:((0,n.logDebugMessage)("XHRInterceptor.setRequestHeader: checking if user provided auth header matches local token"),[4,(0,r.getTokenForHeaderAuth)("access")]);case 1:return Se=ce.sent(),[4,(0,r.getTokenForHeaderAuth)("refresh")];case 2:if(Y=ce.sent(),Se!==void 0&&Y!==void 0&&X==="Bearer ".concat(Se))return(0,n.logDebugMessage)("XHRInterceptor.setRequestHeader: skipping Authorization from user provided headers because it contains our access token"),[2];ce.label=3;case 3:return b.push(function(W){W.setRequestHeader(Q,X)}),w.push({name:Q,value:X}),x.setRequestHeader(Q,X),[2]}})})})};var V=void 0;te(v,x,!1);function te(Q,X,fe){var Se,Y=["load","loadend","readystatechange"];(0,n.logDebugMessage)("XHRInterceptor.setUpXHR called");for(var ce=function(we){(0,n.logDebugMessage)("XHRInterceptor added listener for event ".concat(we)),X.addEventListener(we,function(q){(0,n.logDebugMessage)("XHRInterceptor got event ".concat(we)),Y.includes(we)||H(we,q)})},W=0,G=s;W<G.length;W++){var ie=G[W];ce(ie)}if(X.onload=function(we){Se===void 0&&(Se=ee(X)),Se.then(function(q){q&&(Q.onload&&Q.onload(we),H("load",we))})},X.onreadystatechange=function(we){X.readyState===m.DONE?(Se===void 0&&(Se=ee(X)),Se.then(function(q){q&&(Q.onreadystatechange&&Q.onreadystatechange(we),H("readystatechange",we))})):(Q.onreadystatechange&&Q.onreadystatechange(we),H("readystatechange",we))},X.onloadend=function(we){Se===void 0&&(Se=ee(X)),Se.then(function(q){q&&(Q.onloadend&&Q.onloadend(we),H("loadend",we))})},Q.getAllResponseHeaders=function(){var we;return C?(we="",C.forEach(function(q,Ae){return we+="".concat(Ae,": ").concat(q,`\r
`)})):we=X.getAllResponseHeaders(),we+`x-supertokens-xhr-intercepted: true\r
`},Q.getResponseHeader=function(we){return we==="x-supertokens-xhr-intercepted"?"true":C?C.get(we):X.getResponseHeader(we)},V===void 0){V=[];for(var Ce in X)Ce in Q||V.push(Ce)}for(var re=function(we){typeof X[we]=="function"?Object.defineProperty(Q,we,{configurable:!0,value:function(){var q=arguments;return fe||b.push(function(Ae){Ae[we].apply(Ae,q)}),X[we].apply(X,q)}}):Object.defineProperty(Q,we,{configurable:!0,get:function(){return _[we]!==void 0?_[we]:X[we]},set:function(q){fe||b.push(function(Ae){Ae[we]=q}),(0,n.logDebugMessage)("XHRInterceptor.set[".concat(we,"] = ").concat(q)),X[we]=q}})},ne=0,ge=V;ne<ge.length;ne++){var Ce=ge[ne];re(Ce)}}function se(Q,X){var fe=this;if((0,n.logDebugMessage)("XHRInterceptor.send: called"),(0,n.logDebugMessage)("XHRInterceptor.send: Value of doNotDoInterception: "+D),D){(0,n.logDebugMessage)("XHRInterceptor.send: Returning without interception"),P(function(){return Q.send(X)});return}(0,n.logDebugMessage)("XHRInterceptor.send: Interception started"),a.ProcessState.getInstance().addState(a.PROCESS_STATE.CALLING_INTERCEPTION_REQUEST),P(function(){return e(fe,void 0,void 0,function(){var Se,Y;return t(this,function(ce){switch(ce.label){case 0:return[4,(0,r.getLocalSessionState)(!0)];case 1:return M=ce.sent(),M.status!=="EXISTS"?[3,3]:[4,r.AntiCsrfToken.getToken(M.lastAccessTokenUpdate)];case 2:Se=ce.sent(),Se!==void 0&&((0,n.logDebugMessage)("XHRInterceptor.send: Adding anti-csrf token to request"),Q.setRequestHeader("anti-csrf",Se)),ce.label=3;case 3:return r.default.config.autoAddCredentials&&((0,n.logDebugMessage)("XHRInterceptor.send: Adding credentials include"),v.withCredentials=!0),w.some(function(W){return W.name==="rid"})?(0,n.logDebugMessage)("XHRInterceptor.send: rid header was already there in request"):((0,n.logDebugMessage)("XHRInterceptor.send: Adding rid header: anti-csrf"),Q.setRequestHeader("rid","anti-csrf")),Y=r.default.config.tokenTransferMethod,w.some(function(W){return W.name==="st-auth-mode"})?(0,n.logDebugMessage)("XHRInterceptor.send: st-auth-mode header was already there in request"):((0,n.logDebugMessage)("XHRInterceptor.send: Adding st-auth-mode header: "+Y),Q.setRequestHeader("st-auth-mode",Y)),[4,c(Q,w)];case 4:return ce.sent(),(0,n.logDebugMessage)("XHRInterceptor.send: Making user's http call"),[2,Q.send(X)]}})})})}},XMLHttpRequest.__interceptedBySuperTokens=!0,XMLHttpRequest.__original=m}hw.addInterceptorsToXMLHttpRequest=o;function l(p){return e(this,void 0,void 0,function(){var m,x,v,b,w;return t(this,function(_){switch(_.label){case 0:if(m=p.headers.get("content-type"),x="",v="text",m!==null)return[3,5];_.label=1;case 1:return _.trys.push([1,3,,4]),[4,p.text()];case 2:return x=_.sent(),[3,4];case 3:return _.sent(),x="",[3,4];case 4:return[3,9];case 5:return m.includes("application/json")?(v="json",w=(b=JSON).stringify,[4,p.json()]):[3,7];case 6:return x=w.apply(b,[_.sent()]),[3,9];case 7:return m.includes("text/")?[4,p.text()]:[3,9];case 8:x=_.sent(),_.label=9;case 9:return[2,{status:p.status,responseText:x,statusText:p.statusText,responseType:v,headers:p.headers}]}})})}function c(p,m){return e(this,void 0,void 0,function(){var x,v;return t(this,function(b){switch(b.label){case 0:return(0,n.logDebugMessage)("setAuthorizationHeaderIfRequired: adding existing tokens as header"),[4,(0,r.getTokenForHeaderAuth)("access")];case 1:return x=b.sent(),[4,(0,r.getTokenForHeaderAuth)("refresh")];case 2:return v=b.sent(),x!==void 0&&v!==void 0?m.some(function(w){var _=w.name;return _.toLowerCase()==="authorization"})?(0,n.logDebugMessage)("setAuthorizationHeaderIfRequired: Authorization header defined by the user, not adding"):x!==void 0&&((0,n.logDebugMessage)("setAuthorizationHeaderIfRequired: added authorization header"),p.setRequestHeader("Authorization","Bearer ".concat(x))):(0,n.logDebugMessage)("setAuthorizationHeaderIfRequired: token for header based auth not found"),[2]}})})}function d(p){return e(this,void 0,void 0,function(){var m,x,v,b,w;return t(this,function(_){switch(_.label){case 0:return(0,n.logDebugMessage)("saveTokensFromHeaders: Saving updated tokens from the response"),m=p.get("st-refresh-token"),m===null?[3,2]:((0,n.logDebugMessage)("saveTokensFromHeaders: saving new refresh token"),[4,(0,r.setToken)("refresh",m)]);case 1:_.sent(),_.label=2;case 2:return x=p.get("st-access-token"),x===null?[3,4]:((0,n.logDebugMessage)("saveTokensFromHeaders: saving new access token"),[4,(0,r.setToken)("access",x)]);case 3:_.sent(),_.label=4;case 4:return v=p.get("front-token"),v===null?[3,6]:((0,n.logDebugMessage)("saveTokensFromHeaders: Setting sFrontToken: "+v),[4,r.FrontToken.setItem(v)]);case 5:_.sent(),(0,r.updateClockSkewUsingFrontToken)({frontToken:v,responseHeaders:p}),_.label=6;case 6:return b=p.get("anti-csrf"),b===null?[3,9]:[4,(0,r.getLocalSessionState)(!1)];case 7:return w=_.sent(),w.status!=="EXISTS"?[3,9]:((0,n.logDebugMessage)("saveTokensFromHeaders: Setting anti-csrf token"),[4,r.AntiCsrfToken.setItem(w.lastAccessTokenUpdate,b)]);case 8:_.sent(),_.label=9;case 9:return[2]}})})}function f(p){return new Headers(p.getAllResponseHeaders().split(`\r
`).map(function(m){var x=m.indexOf(": ");return x===-1?["",""]:[m.slice(0,x),m.slice(x+2)]}).filter(function(m){return m[0].length!==0}))}return hw}var OV;function bTe(){if(OV)return i_;OV=1;var e=Ve&&Ve.__assign||function(){return e=Object.assign||function(v){for(var b,w=1,_=arguments.length;w<_;w++){b=arguments[w];for(var C in b)Object.prototype.hasOwnProperty.call(b,C)&&(v[C]=b[C])}return v},e.apply(this,arguments)},t=Ve&&Ve.__awaiter||function(v,b,w,_){function C(N){return N instanceof w?N:new w(function(R){R(N)})}return new(w||(w=Promise))(function(N,R){function P(M){try{D(_.next(M))}catch(B){R(B)}}function O(M){try{D(_.throw(M))}catch(B){R(B)}}function D(M){M.done?N(M.value):C(M.value).then(P,O)}D((_=_.apply(v,b||[])).next())})},r=Ve&&Ve.__generator||function(v,b){var w={label:0,sent:function(){if(N[0]&1)throw N[1];return N[1]},trys:[],ops:[]},_,C,N,R;return R={next:P(0),throw:P(1),return:P(2)},typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R;function P(D){return function(M){return O([D,M])}}function O(D){if(_)throw new TypeError("Generator is already executing.");for(;w;)try{if(_=1,C&&(N=D[0]&2?C.return:D[0]?C.throw||((N=C.return)&&N.call(C),0):C.next)&&!(N=N.call(C,D[1])).done)return N;switch(C=0,N&&(D=[D[0]&2,N.value]),D[0]){case 0:case 1:N=D;break;case 4:return w.label++,{value:D[1],done:!1};case 5:w.label++,C=D[1],D=[0];continue;case 7:D=w.ops.pop(),w.trys.pop();continue;default:if(N=w.trys,!(N=N.length>0&&N[N.length-1])&&(D[0]===6||D[0]===2)){w=0;continue}if(D[0]===3&&(!N||D[1]>N[0]&&D[1]<N[3])){w.label=D[1];break}if(D[0]===6&&w.label<N[1]){w.label=N[1],N=D;break}if(N&&w.label<N[2]){w.label=N[2],w.ops.push(D);break}N[2]&&w.ops.pop(),w.trys.pop();continue}D=b.call(v,w)}catch(M){D=[6,M],C=0}finally{_=N=0}if(D[0]&5)throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}};Object.defineProperty(i_,"__esModule",{value:!0});var n=Qy,i=vTe(),a=I0,s=Jc,o=wE,l=yTe(),c=so,d=hf,f=kx,p=100,m="CLAIM_REFRESH_LOCK";function x(v){return{addXMLHttpRequestInterceptor:function(b){(0,s.logDebugMessage)("addXMLHttpRequestInterceptorAndReturnModified: called"),(0,l.addInterceptorsToXMLHttpRequest)()},addFetchInterceptorsAndReturnModifiedFetch:function(b){return(0,s.logDebugMessage)("addFetchInterceptorsAndReturnModifiedFetch: called"),function(w,_){return t(this,void 0,void 0,function(){return r(this,function(C){switch(C.label){case 0:return[4,n.default.doRequest(function(N){return b.originalFetch(typeof w=="object"&&"clone"in w?w.clone():w,e({},N))},_,w)];case 1:return[2,C.sent()]}})})}},addAxiosInterceptors:function(b){if((0,s.logDebugMessage)("addAxiosInterceptors: called"),XMLHttpRequest.__interceptedBySuperTokens){console.warn("Not adding axios interceptor since XMLHttpRequest is already added. This is just a warning."),console.warn("Our axios and XMLHttpRequest interceptors cannot be used at the same time."),console.warn("Since XMLHttpRequest is added automatically and supports axios by default, you can just remove addAxiosInterceptors from your code."),console.warn("If you want to continue using our axios interceptor, you can override addXMLHttpRequestInterceptor with an empty function."),(0,s.logDebugMessage)("addAxiosInterceptors: not adding, because XHR interceptors are already in place");return}for(var w=b.axiosInstance.interceptors.request,_=0;_<w.handlers.length;_++)if(w.handlers[_].fulfilled===i.interceptorFunctionRequestFulfilled){(0,s.logDebugMessage)("addAxiosInterceptors: not adding because already added on this instance");return}b.axiosInstance.interceptors.request.use(i.interceptorFunctionRequestFulfilled,function(C){return t(this,void 0,void 0,function(){return r(this,function(N){throw C})})}),b.axiosInstance.interceptors.response.use((0,i.responseInterceptor)(b.axiosInstance),(0,i.responseErrorInterceptor)(b.axiosInstance))},getUserId:function(b){return t(this,void 0,void 0,function(){var w;return r(this,function(_){switch(_.label){case 0:return(0,s.logDebugMessage)("getUserId: called"),[4,n.FrontToken.getTokenInfo()];case 1:if(w=_.sent(),w===void 0)throw new Error("No session exists");return(0,s.logDebugMessage)("getUserId: returning: "+w.uid),[2,w.uid]}})})},getAccessTokenPayloadSecurely:function(b){return t(this,void 0,void 0,function(){var w,_;return r(this,function(C){switch(C.label){case 0:return(0,s.logDebugMessage)("getAccessTokenPayloadSecurely: called"),[4,n.FrontToken.getTokenInfo()];case 1:if(w=C.sent(),w===void 0)throw new Error("No session exists");return w.ate<d.default.getReferenceOrThrow().dateProvider.now()?((0,s.logDebugMessage)("getAccessTokenPayloadSecurely: access token expired. Refreshing session"),[4,n.default.attemptRefreshingSession()]):[3,5];case 2:return _=C.sent(),_?[4,this.getAccessTokenPayloadSecurely({userContext:b.userContext})]:[3,4];case 3:return[2,C.sent()];case 4:throw new Error("Could not refresh session");case 5:return(0,s.logDebugMessage)("getAccessTokenPayloadSecurely: returning: "+JSON.stringify(w.up)),[2,w.up]}})})},doesSessionExist:function(b){return t(this,void 0,void 0,function(){var w,_,C;return r(this,function(N){switch(N.label){case 0:return(0,s.logDebugMessage)("doesSessionExist: called"),[4,n.FrontToken.getTokenInfo()];case 1:return w=N.sent(),w===void 0?((0,s.logDebugMessage)("doesSessionExist: access token does not exist locally"),[2,!1]):w.ate<d.default.getReferenceOrThrow().dateProvider.now()?((0,s.logDebugMessage)("doesSessionExist: access token expired. Refreshing session"),[4,(0,n.getLocalSessionState)(!1)]):[3,4];case 2:return _=N.sent(),[4,(0,n.onUnauthorisedResponse)(_)];case 3:return C=N.sent(),[2,C.result==="RETRY"];case 4:return[2,!0]}})})},signOut:function(b){return t(this,void 0,void 0,function(){var w,_,C,N;return r(this,function(R){switch(R.label){case 0:return(0,s.logDebugMessage)("signOut: called"),[4,this.doesSessionExist(b)];case 1:return R.sent()?((0,s.logDebugMessage)("signOut: Calling refresh pre API hook"),[4,v.preAPIHook({action:"SIGN_OUT",requestInit:{method:"post",headers:{"fdi-version":a.supported_fdi.join(","),rid:n.default.rid}},url:n.default.signOutUrl,userContext:b.userContext})]):((0,s.logDebugMessage)("signOut: exiting early because session does not exist"),(0,s.logDebugMessage)("signOut: firing SIGN_OUT event"),v.onHandleEvent({action:"SIGN_OUT",userContext:b.userContext}),[2]);case 2:return w=R.sent(),(0,s.logDebugMessage)("signOut: Calling API"),[4,fetch(w.url,w.requestInit)];case 3:if(_=R.sent(),(0,s.logDebugMessage)("signOut: API ended"),(0,s.logDebugMessage)("signOut: API responded with status code: "+_.status),_.status===v.sessionExpiredStatusCode)return[2];if(_.status>=300)throw _;return[4,v.postAPIHook({action:"SIGN_OUT",requestInit:w.requestInit,url:w.url,fetchResponse:_.clone(),userContext:b.userContext})];case 4:return R.sent(),[4,_.clone().json()];case 5:if(C=R.sent(),C.status==="GENERAL_ERROR")throw(0,s.logDebugMessage)("doRequest: Throwing general error"),N=C.message===void 0?"No Error Message Provided":C.message,new o.STGeneralError(N);return[2]}})})},getInvalidClaimsFromResponse:function(b){return t(this,void 0,void 0,function(){var w;return r(this,function(_){switch(_.label){case 0:return"body"in b.response?[4,b.response.clone().json()]:[3,2];case 1:return w=_.sent(),[3,3];case 2:typeof b.response.data=="string"?w=JSON.parse(b.response.data):w=b.response.data,_.label=3;case 3:return[2,w.claimValidationErrors]}})})},getGlobalClaimValidators:function(b){return b.claimValidatorsAddedByOtherRecipes},validateClaims:function(b){return t(this,void 0,void 0,function(){var w,_,C,N,R,P,U,O,D,M,B,U,H;return r(this,function(Z){switch(Z.label){case 0:_=0,Z.label=1;case 1:return++_<p?[4,f.default.getReferenceOrThrow().lockFactory()]:[3,20];case 2:return C=Z.sent(),(0,s.logDebugMessage)("validateClaims: trying to acquire claim refresh lock"),[4,C.acquireLock(m)];case 3:if(N=Z.sent(),!N)return[3,18];Z.label=4;case 4:return Z.trys.push([4,,15,17]),[4,this.getAccessTokenPayloadSecurely({userContext:b.userContext})];case 5:w=Z.sent(),(0,s.logDebugMessage)("validateClaims: claim refresh lock acquired"),R=0,P=b.claimValidators,Z.label=6;case 6:return R<P.length?(U=P[R],[4,U.shouldRefresh(w,b.userContext)]):[3,14];case 7:if(!Z.sent())return[3,13];Z.label=8;case 8:return Z.trys.push([8,10,,11]),[4,U.refresh(b.userContext)];case 9:return Z.sent(),[3,11];case 10:return O=Z.sent(),console.error("Encountered an error while refreshing validator ".concat(U.id),O),[3,11];case 11:return[4,this.getAccessTokenPayloadSecurely({userContext:b.userContext})];case 12:w=Z.sent(),Z.label=13;case 13:return R++,[3,6];case 14:return[3,17];case 15:return(0,s.logDebugMessage)("validateClaims: releasing claim refresh lock"),[4,C.releaseLock(m)];case 16:return Z.sent(),[7];case 17:return[3,20];case 18:(0,s.logDebugMessage)("validateClaims: Retrying refresh lock ".concat(_,"/").concat(p)),Z.label=19;case 19:return[3,1];case 20:return _!==p?[3,22]:((0,s.logDebugMessage)("validateClaims: ran out of retries while trying to acquire claim refresh lock"),[4,this.getAccessTokenPayloadSecurely({userContext:b.userContext})]);case 21:w=Z.sent(),Z.label=22;case 22:D=[],M=0,B=b.claimValidators,Z.label=23;case 23:return M<B.length?(U=B[M],[4,U.validate(w,b.userContext)]):[3,26];case 24:H=Z.sent(),H.isValid||D.push({id:U.id,reason:H.reason}),Z.label=25;case 25:return M++,[3,23];case 26:return[2,D]}})})},shouldDoInterceptionBasedOnUrl:function(b,w,_){if((0,s.logDebugMessage)("shouldDoInterceptionBasedOnUrl: toCheckUrl: "+b+" apiDomain: "+w+" sessionTokenBackendDomain: "+_),b.includes("superTokensDoNotDoInterception"))return!1;b=(0,c.normaliseURLDomainOrThrowError)(b);var C=new URL(b),N=C.hostname,R=!1;if(w!==""){w=(0,c.normaliseURLDomainOrThrowError)(w);var P=new URL(w);R=N===P.hostname}if(_===void 0||R)return R;var O=(0,c.normaliseSessionScopeOrThrowError)(_);return(0,c.matchesDomainOrSubdomain)(N,O)},calculateClockSkewInMillis:function(b){var w=b.accessTokenPayload;(0,s.logDebugMessage)("calculateClockSkewInMillis: called");var _=w==null?void 0:w.iat;if(_===void 0||typeof _!="number")return(0,s.logDebugMessage)("calculateClockSkewInMillis: payload iat is undefined or not a number. This may happen due to an unsupported backend sdk. Returning 0"),0;var C=_*1e3,N=C-Date.now();return(0,s.logDebugMessage)("calculateClockSkewInMillis: returning "+N),N}}}return i_.default=x,i_}var pf={},YO={},PA=Ve&&Ve.__assign||function(){return PA=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},PA.apply(this,arguments)};Object.defineProperty(YO,"__esModule",{value:!0});YO.getProxyObject=void 0;function wTe(e){for(var t=PA(PA({},e),{_call:function(o,l){throw new Error("This function should only be called through the recipe object")}}),r=Object.keys(t),n=function(o){o!=="_call"&&(t[o]=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return this._call(o,l)})},i=0,a=r;i<a.length;i++){var s=a[i];n(s)}return t}YO.getProxyObject=wTe;Object.defineProperty(pf,"__esModule",{value:!0});pf.OverrideableBuilder=void 0;var STe=YO,Cie=function(){function e(t){this.layers=[t],this.proxies=[]}return e.prototype.override=function(t){for(var r=(0,STe.getProxyObject)(this.layers[0]),n=t(r,this),i=0,a=Object.keys(this.layers[0]);i<a.length;i++){var s=a[i];n[s]===r[s]||s==="_call"?delete n[s]:n[s]===void 0&&(n[s]=null)}return this.layers.push(n),this.proxies.push(r),this},e.prototype.build=function(){var t=this;if(this.result)return this.result;this.result={};for(var r=0,n=this.layers;r<n.length;r++)for(var i=n[r],a=0,s=Object.keys(i);a<s.length;a++){var o=s[a],l=i[o];l!==void 0&&(l===null?this.result[o]=void 0:typeof l=="function"?this.result[o]=l.bind(this.result):this.result[o]=l)}for(var c=function(p){var m=d.proxies[p];m._call=function(x,v){for(var b=p;b>=0;--b){var w=t.layers[b][x];if(w!=null)return w.bind(t.result).apply(void 0,v)}}},d=this,f=0;f<this.proxies.length;++f)c(f);return this.result},e}();pf.OverrideableBuilder=Cie;pf.default=Cie;var pw={},PV;function kie(){if(PV)return pw;PV=1,Object.defineProperty(pw,"__esModule",{value:!0}),pw.PrimitiveClaim=void 0;var e=hf,t=function(){function r(n){var i=this;this.validators={hasValue:function(a,s,o){s===void 0&&(s=i.defaultMaxAgeInSeconds);var l=e.default.getReferenceOrThrow().dateProvider;return{id:o!==void 0?o:i.id,refresh:function(c){return i.refresh(c)},shouldRefresh:function(c,d){if(s!==void 0&&s<l.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(l.getThresholdInSeconds()));return i.getValueFromPayload(c,d)===void 0||s!==void 0&&c[i.id].t<l.now()-s*1e3},validate:function(c,d){var f=i.getValueFromPayload(c,d);if(f===void 0)return{isValid:!1,reason:{message:"value does not exist",expectedValue:a,actualValue:f}};var p=(l.now()-i.getLastFetchedTime(c,d))/1e3;return s!==void 0&&p>s?{isValid:!1,reason:{message:"expired",ageInSeconds:p,maxAgeInSeconds:s}}:f!==a?{isValid:!1,reason:{message:"wrong value",expectedValue:a,actualValue:f}}:{isValid:!0}}}}},this.id=n.id,this.refresh=n.refresh,this.defaultMaxAgeInSeconds=n.defaultMaxAgeInSeconds}return r.prototype.getValueFromPayload=function(n,i){return n[this.id]!==void 0?n[this.id].v:void 0},r.prototype.getLastFetchedTime=function(n,i){return n[this.id]!==void 0?n[this.id].t:void 0},r}();return pw.PrimitiveClaim=t,pw}var mw={},RV;function ETe(){if(RV)return mw;RV=1;var e=Ve&&Ve.__awaiter||function(i,a,s,o){function l(c){return c instanceof s?c:new s(function(d){d(c)})}return new(s||(s=Promise))(function(c,d){function f(x){try{m(o.next(x))}catch(v){d(v)}}function p(x){try{m(o.throw(x))}catch(v){d(v)}}function m(x){x.done?c(x.value):l(x.value).then(f,p)}m((o=o.apply(i,a||[])).next())})},t=Ve&&Ve.__generator||function(i,a){var s={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,l,c,d;return d={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(m){return function(x){return p([m,x])}}function p(m){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,l&&(c=m[0]&2?l.return:m[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,m[1])).done)return c;switch(l=0,c&&(m=[m[0]&2,c.value]),m[0]){case 0:case 1:c=m;break;case 4:return s.label++,{value:m[1],done:!1};case 5:s.label++,l=m[1],m=[0];continue;case 7:m=s.ops.pop(),s.trys.pop();continue;default:if(c=s.trys,!(c=c.length>0&&c[c.length-1])&&(m[0]===6||m[0]===2)){s=0;continue}if(m[0]===3&&(!c||m[1]>c[0]&&m[1]<c[3])){s.label=m[1];break}if(m[0]===6&&s.label<c[1]){s.label=c[1],c=m;break}if(c&&s.label<c[2]){s.label=c[2],s.ops.push(m);break}c[2]&&s.ops.pop(),s.trys.pop();continue}m=a.call(i,s)}catch(x){m=[6,x],l=0}finally{o=c=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}};Object.defineProperty(mw,"__esModule",{value:!0}),mw.PrimitiveArrayClaim=void 0;var r=hf,n=function(){function i(a){var s=this;this.validators={includes:function(o,l,c){l===void 0&&(l=s.defaultMaxAgeInSeconds);var d=r.default.getReferenceOrThrow().dateProvider;return{id:c!==void 0?c:s.id,refresh:function(f){return s.refresh(f)},shouldRefresh:function(f,p){if(l!==void 0&&l<d.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(d.getThresholdInSeconds()));return s.getValueFromPayload(f,p)===void 0||l!==void 0&&f[s.id].t<d.now()-l*1e3},validate:function(f,p){return e(s,void 0,void 0,function(){var m,x;return t(this,function(v){return m=this.getValueFromPayload(f,p),m===void 0?[2,{isValid:!1,reason:{message:"value does not exist",expectedToInclude:o,actualValue:m}}]:(x=(d.now()-this.getLastFetchedTime(f,p))/1e3,l!==void 0&&x>l?[2,{isValid:!1,reason:{message:"expired",ageInSeconds:x,maxAgeInSeconds:l}}]:m.includes(o)?[2,{isValid:!0}]:[2,{isValid:!1,reason:{message:"wrong value",expectedToInclude:o,actualValue:m}}])})})}}},excludes:function(o,l,c){l===void 0&&(l=s.defaultMaxAgeInSeconds);var d=r.default.getReferenceOrThrow().dateProvider;return{id:c!==void 0?c:s.id,refresh:function(f){return s.refresh(f)},shouldRefresh:function(f,p){if(l!==void 0&&l<d.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(d.getThresholdInSeconds()));return s.getValueFromPayload(f,p)===void 0||l!==void 0&&f[s.id].t<d.now()-l*1e3},validate:function(f,p){return e(s,void 0,void 0,function(){var m,x;return t(this,function(v){return m=this.getValueFromPayload(f,p),m===void 0?[2,{isValid:!1,reason:{message:"value does not exist",expectedToNotInclude:o,actualValue:m}}]:(x=(d.now()-this.getLastFetchedTime(f,p))/1e3,l!==void 0&&x>l?[2,{isValid:!1,reason:{message:"expired",ageInSeconds:x,maxAgeInSeconds:l}}]:m.includes(o)?[2,{isValid:!1,reason:{message:"wrong value",expectedToNotInclude:o,actualValue:m}}]:[2,{isValid:!0}])})})}}},includesAll:function(o,l,c){l===void 0&&(l=s.defaultMaxAgeInSeconds);var d=r.default.getReferenceOrThrow().dateProvider;return{id:c!==void 0?c:s.id,refresh:function(f){return s.refresh(f)},shouldRefresh:function(f,p){if(l!==void 0&&l<d.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(d.getThresholdInSeconds()));return s.getValueFromPayload(f,p)===void 0||l!==void 0&&f[s.id].t<d.now()-l*1e3},validate:function(f,p){return e(s,void 0,void 0,function(){var m,x,v,b;return t(this,function(w){return m=this.getValueFromPayload(f,p),m===void 0?[2,{isValid:!1,reason:{message:"value does not exist",expectedToInclude:o,actualValue:m}}]:(x=(d.now()-this.getLastFetchedTime(f,p))/1e3,l!==void 0&&x>l?[2,{isValid:!1,reason:{message:"expired",ageInSeconds:x,maxAgeInSeconds:l}}]:(v=new Set(m),b=o.every(function(_){return v.has(_)}),[2,b?{isValid:b}:{isValid:b,reason:{message:"wrong value",expectedToInclude:o,actualValue:m}}]))})})}}},includesAny:function(o,l,c){l===void 0&&(l=s.defaultMaxAgeInSeconds);var d=r.default.getReferenceOrThrow().dateProvider;return{id:c!==void 0?c:s.id,refresh:function(f){return s.refresh(f)},shouldRefresh:function(f,p){if(l!==void 0&&l<d.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(d.getThresholdInSeconds()));return s.getValueFromPayload(f,p)===void 0||l!==void 0&&f[s.id].t<d.now()-l*1e3},validate:function(f,p){return e(s,void 0,void 0,function(){var m,x,v,b;return t(this,function(w){return m=this.getValueFromPayload(f,p),m===void 0?[2,{isValid:!1,reason:{message:"value does not exist",expectedToInclude:o,actualValue:m}}]:(x=(d.now()-this.getLastFetchedTime(f,p))/1e3,l!==void 0&&x>l?[2,{isValid:!1,reason:{message:"expired",ageInSeconds:x,maxAgeInSeconds:l}}]:(v=new Set(m),b=o.some(function(_){return v.has(_)}),[2,b?{isValid:b}:{isValid:b,reason:{message:"wrong value",expectedToIncludeAtLeastOneOf:o,actualValue:m}}]))})})}}},excludesAll:function(o,l,c){l===void 0&&(l=s.defaultMaxAgeInSeconds);var d=r.default.getReferenceOrThrow().dateProvider;return{id:c!==void 0?c:s.id,refresh:function(f){return s.refresh(f)},shouldRefresh:function(f,p){if(l!==void 0&&l<d.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(d.getThresholdInSeconds()));return s.getValueFromPayload(f,p)===void 0||l!==void 0&&f[s.id].t<d.now()-l*1e3},validate:function(f,p){return e(s,void 0,void 0,function(){var m,x,v,b;return t(this,function(w){return m=this.getValueFromPayload(f,p),m===void 0?[2,{isValid:!1,reason:{message:"value does not exist",expectedToNotInclude:o,actualValue:m}}]:(x=(d.now()-this.getLastFetchedTime(f,p))/1e3,l!==void 0&&x>l?[2,{isValid:!1,reason:{message:"expired",ageInSeconds:x,maxAgeInSeconds:l}}]:(v=new Set(m),b=o.every(function(_){return!v.has(_)}),[2,b?{isValid:b}:{isValid:b,reason:{message:"wrong value",expectedToNotInclude:o,actualValue:m}}]))})})}}}},this.id=a.id,this.refresh=a.refresh,this.defaultMaxAgeInSeconds=a.defaultMaxAgeInSeconds}return i.prototype.getValueFromPayload=function(a,s){return a[this.id]!==void 0?a[this.id].v:void 0},i.prototype.getLastFetchedTime=function(a,s){return a[this.id]!==void 0?a[this.id].t:void 0},i}();return mw.PrimitiveArrayClaim=n,mw}var gw={},jV;function CTe(){if(jV)return gw;jV=1;var e=Ve&&Ve.__extends||function(){var i=function(a,s){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(o[c]=l[c])},i(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");i(a,s);function o(){this.constructor=a}a.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}(),t=Ve&&Ve.__assign||function(){return t=Object.assign||function(i){for(var a,s=1,o=arguments.length;s<o;s++){a=arguments[s];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])}return i},t.apply(this,arguments)};Object.defineProperty(gw,"__esModule",{value:!0}),gw.BooleanClaim=void 0;var r=kie(),n=function(i){e(a,i);function a(s){var o=i.call(this,s)||this;return o.validators=t(t({},o.validators),{isTrue:function(l){return o.validators.hasValue(!0,l)},isFalse:function(l){return o.validators.hasValue(!1,l)}}),o}return a}(r.PrimitiveClaim);return gw.BooleanClaim=n,gw}var DV;function kTe(){return DV||(DV=1,function(e){var t=Ve&&Ve.__awaiter||function(w,_,C,N){function R(P){return P instanceof C?P:new C(function(O){O(P)})}return new(C||(C=Promise))(function(P,O){function D(U){try{B(N.next(U))}catch(H){O(H)}}function M(U){try{B(N.throw(U))}catch(H){O(H)}}function B(U){U.done?P(U.value):R(U.value).then(D,M)}B((N=N.apply(w,_||[])).next())})},r=Ve&&Ve.__generator||function(w,_){var C={label:0,sent:function(){if(P[0]&1)throw P[1];return P[1]},trys:[],ops:[]},N,R,P,O;return O={next:D(0),throw:D(1),return:D(2)},typeof Symbol=="function"&&(O[Symbol.iterator]=function(){return this}),O;function D(B){return function(U){return M([B,U])}}function M(B){if(N)throw new TypeError("Generator is already executing.");for(;C;)try{if(N=1,R&&(P=B[0]&2?R.return:B[0]?R.throw||((P=R.return)&&P.call(R),0):R.next)&&!(P=P.call(R,B[1])).done)return P;switch(R=0,P&&(B=[B[0]&2,P.value]),B[0]){case 0:case 1:P=B;break;case 4:return C.label++,{value:B[1],done:!1};case 5:C.label++,R=B[1],B=[0];continue;case 7:B=C.ops.pop(),C.trys.pop();continue;default:if(P=C.trys,!(P=P.length>0&&P[P.length-1])&&(B[0]===6||B[0]===2)){C=0;continue}if(B[0]===3&&(!P||B[1]>P[0]&&B[1]<P[3])){C.label=B[1];break}if(B[0]===6&&C.label<P[1]){C.label=P[1],P=B;break}if(P&&C.label<P[2]){C.label=P[2],C.ops.push(B);break}P[2]&&C.ops.pop(),C.trys.pop();continue}B=_.call(w,C)}catch(U){B=[6,U],R=0}finally{N=P=0}if(B[0]&5)throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.BooleanClaim=e.PrimitiveArrayClaim=e.PrimitiveClaim=e.getInvalidClaimsFromResponse=e.getClaimValue=e.validateClaims=e.signOut=e.addAxiosInterceptors=e.doesSessionExist=e.attemptRefreshingSession=e.getAccessToken=e.getAccessTokenPayloadSecurely=e.getUserId=e.init=void 0;var n=Qy,i=bTe(),a=pf,s=so,o=Cx,l=xu,c=kx,d=_x,f=Jc,p=hf,m=function(){function w(){}w.init=function(C){o.default.init(C.cookieHandler),l.default.init(C.windowHandler),p.default.init(C.dateProvider),c.default.init(C.lockFactory,l.default.getReferenceOrThrow().windowHandler.localStorage);var N=(0,s.validateAndNormaliseInputOrThrowError)(C);C.enableDebugLogs!==void 0&&C.enableDebugLogs&&(0,f.enableLogging)();var R=new a.default((0,i.default)({onHandleEvent:N.onHandleEvent,preAPIHook:N.preAPIHook,postAPIHook:N.postAPIHook,sessionExpiredStatusCode:N.sessionExpiredStatusCode})).override(N.override.functions).build();n.default.init(N,R),w.axiosInterceptorQueue.forEach(function(P){P()}),w.axiosInterceptorQueue=[]},w.getUserId=function(C){return n.default.recipeImpl.getUserId({userContext:(0,s.getNormalisedUserContext)(C===void 0?void 0:C.userContext)})},w.getAccessTokenPayloadSecurely=function(C){return t(this,void 0,void 0,function(){return r(this,function(N){return[2,n.default.recipeImpl.getAccessTokenPayloadSecurely({userContext:(0,s.getNormalisedUserContext)(C===void 0?void 0:C.userContext)})]})})};var _;return _=w,w.axiosInterceptorQueue=[],w.attemptRefreshingSession=function(){return t(void 0,void 0,void 0,function(){return r(_,function(C){return[2,n.default.attemptRefreshingSession()]})})},w.doesSessionExist=function(C){return n.default.recipeImpl.doesSessionExist({userContext:(0,s.getNormalisedUserContext)(C===void 0?void 0:C.userContext)})},w.addAxiosInterceptors=function(C,N){n.default.initCalled?n.default.recipeImpl.addAxiosInterceptors({axiosInstance:C,userContext:(0,s.getNormalisedUserContext)(N)}):w.axiosInterceptorQueue.push(function(){n.default.recipeImpl.addAxiosInterceptors({axiosInstance:C,userContext:(0,s.getNormalisedUserContext)(N)})})},w.signOut=function(C){return n.default.recipeImpl.signOut({userContext:(0,s.getNormalisedUserContext)(C===void 0?void 0:C.userContext)})},w.getInvalidClaimsFromResponse=function(C){return t(this,void 0,void 0,function(){return r(this,function(N){return[2,n.default.recipeImpl.getInvalidClaimsFromResponse({response:C.response,userContext:(0,s.getNormalisedUserContext)(C.userContext)})]})})},w.getClaimValue=function(C){return t(this,void 0,void 0,function(){var N,R;return r(this,function(P){switch(P.label){case 0:return N=(0,s.getNormalisedUserContext)(C===void 0?void 0:C.userContext),[4,w.getAccessTokenPayloadSecurely({userContext:N})];case 1:return R=P.sent(),[2,C.claim.getValueFromPayload(R,N)]}})})},w.validateClaims=function(C,N){var R=(0,s.getNormalisedUserContext)(N),P=d.SessionClaimValidatorStore.getClaimValidatorsAddedByOtherRecipes(),O=n.default.recipeImpl.getGlobalClaimValidators({claimValidatorsAddedByOtherRecipes:P,userContext:R}),D=C!==void 0?C(O,R):O;return D.length===0?[]:n.default.recipeImpl.validateClaims({claimValidators:D,userContext:(0,s.getNormalisedUserContext)(N)})},w.getAccessToken=function(C){return t(void 0,void 0,void 0,function(){return r(_,function(N){switch(N.label){case 0:return[4,n.default.recipeImpl.doesSessionExist({userContext:(0,s.getNormalisedUserContext)(C===void 0?void 0:C.userContext)})];case 1:return N.sent()?[2,(0,n.getTokenForHeaderAuth)("access")]:[2,void 0]}})})},w}();e.default=m,e.init=m.init,e.getUserId=m.getUserId,e.getAccessTokenPayloadSecurely=m.getAccessTokenPayloadSecurely,e.getAccessToken=m.getAccessToken,e.attemptRefreshingSession=m.attemptRefreshingSession,e.doesSessionExist=m.doesSessionExist,e.addAxiosInterceptors=m.addAxiosInterceptors,e.signOut=m.signOut,e.validateClaims=m.validateClaims,e.getClaimValue=m.getClaimValue,e.getInvalidClaimsFromResponse=m.getInvalidClaimsFromResponse;var x=kie();Object.defineProperty(e,"PrimitiveClaim",{enumerable:!0,get:function(){return x.PrimitiveClaim}});var v=ETe();Object.defineProperty(e,"PrimitiveArrayClaim",{enumerable:!0,get:function(){return v.PrimitiveArrayClaim}});var b=CTe();Object.defineProperty(e,"BooleanClaim",{enumerable:!0,get:function(){return b.BooleanClaim}})}(uj)),uj}var MV;function _ie(){return MV||(MV=1,function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(kTe())}(cj)),cj}var EE={};Object.defineProperty(EE,"__esModule",{value:!0});EE.EMAILVERIFICATION_CLAIM_ID=void 0;EE.EMAILVERIFICATION_CLAIM_ID="st-ev";var _Te=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mc=Ve&&Ve.__assign||function(){return Mc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Mc.apply(this,arguments)},a_=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},s_=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},FV=Ve&&Ve.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(Jy,"__esModule",{value:!0});Jy.Recipe=void 0;var NTe=XO,Iu=_ie(),dj=Br,ATe=EE,LV=[ATe.EMAILVERIFICATION_CLAIM_ID],Nie=function(e){_Te(t,e);function t(r){var n=e.call(this,r)||this;return n.getUserId=function(i){return Iu.default.getUserId({userContext:i.userContext})},n.getAccessToken=function(i){return a_(n,void 0,void 0,function(){return s_(this,function(a){return[2,Iu.default.getAccessToken({userContext:i.userContext})]})})},n.getAccessTokenPayloadSecurely=function(i){return a_(n,void 0,void 0,function(){return s_(this,function(a){return[2,Iu.default.getAccessTokenPayloadSecurely({userContext:i.userContext})]})})},n.doesSessionExist=function(i){return Iu.default.doesSessionExist({userContext:i.userContext})},n.signOut=function(i){return Iu.default.signOut({userContext:i.userContext})},n.attemptRefreshingSession=function(){return a_(n,void 0,void 0,function(){return s_(this,function(i){return[2,Iu.default.attemptRefreshingSession()]})})},n.validateClaims=function(i){return Iu.default.validateClaims(i.overrideGlobalClaimValidators,i.userContext)},Iu.default.init(Mc(Mc({},r),{override:{functions:function(i,a){var s;return a.override(function(o){return Mc(Mc({},o),{getGlobalClaimValidators:function(l){var c=o.getGlobalClaimValidators(l);return FV(FV([],c.filter(function(d){return LV.includes(d.id)}),!0),c.filter(function(d){return!LV.includes(d.id)}),!0)}})}),!((s=r.override)===null||s===void 0)&&s.functions&&a.override(r.override.functions),i}},preAPIHook:function(i){return a_(n,void 0,void 0,function(){var a,s;return s_(this,function(o){return a=new Headers(i.requestInit.headers),a.set("rid",r.recipeId),s=Mc(Mc({},i),{requestInit:Mc(Mc({},i.requestInit),{headers:a})}),r.preAPIHook===void 0?[2,s]:[2,r.preAPIHook(i)]})})},apiDomain:r.appInfo.apiDomain.getAsStringDangerous(),apiBasePath:r.appInfo.apiBasePath.getAsStringDangerous()})),n}return t.init=function(r){return function(n,i,a,s){return t.instance=new t(Mc(Mc({},(0,dj.applyPlugins)(t.RECIPE_ID,r,s??[])),{appInfo:n,recipeId:t.RECIPE_ID,enableDebugLogs:a})),t.instance}},t.prototype.getClaimValue=function(r){return Iu.default.getClaimValue(r)},t.prototype.getInvalidClaimsFromResponse=function(r){return Iu.default.getInvalidClaimsFromResponse(r)},t.addAxiosInterceptors=function(r,n){return Iu.default.addAxiosInterceptors(r,n)},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of Session found. Ensure that the 'Session.init' method is called within the 'SuperTokens.init' recipeList.";throw r=(0,dj.checkForSSRErrorAndAppendIfNeeded)(r),Error(r)}return t.instance},t.reset=function(){(0,dj.isTest)()&&(t.instance=void 0)},t.RECIPE_ID="session",t}(NTe.default);Jy.Recipe=Nie;Jy.default=Nie;(function(e){var t=Ve&&Ve.__awaiter||function(_,C,N,R){function P(O){return O instanceof N?O:new N(function(D){D(O)})}return new(N||(N=Promise))(function(O,D){function M(H){try{U(R.next(H))}catch(Z){D(Z)}}function B(H){try{U(R.throw(H))}catch(Z){D(Z)}}function U(H){H.done?O(H.value):P(H.value).then(M,B)}U((R=R.apply(_,C||[])).next())})},r=Ve&&Ve.__generator||function(_,C){var N={label:0,sent:function(){if(O[0]&1)throw O[1];return O[1]},trys:[],ops:[]},R,P,O,D;return D={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(D[Symbol.iterator]=function(){return this}),D;function M(U){return function(H){return B([U,H])}}function B(U){if(R)throw new TypeError("Generator is already executing.");for(;N;)try{if(R=1,P&&(O=U[0]&2?P.return:U[0]?P.throw||((O=P.return)&&O.call(P),0):P.next)&&!(O=O.call(P,U[1])).done)return O;switch(P=0,O&&(U=[U[0]&2,O.value]),U[0]){case 0:case 1:O=U;break;case 4:return N.label++,{value:U[1],done:!1};case 5:N.label++,P=U[1],U=[0];continue;case 7:U=N.ops.pop(),N.trys.pop();continue;default:if(O=N.trys,!(O=O.length>0&&O[O.length-1])&&(U[0]===6||U[0]===2)){N=0;continue}if(U[0]===3&&(!O||U[1]>O[0]&&U[1]<O[3])){N.label=U[1];break}if(U[0]===6&&N.label<O[1]){N.label=O[1],O=U;break}if(O&&N.label<O[2]){N.label=O[2],N.ops.push(U);break}O[2]&&N.ops.pop(),N.trys.pop();continue}U=C.call(_,N)}catch(H){U=[6,H],P=0}finally{R=O=0}if(U[0]&5)throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.getInvalidClaimsFromResponse=e.getClaimValue=e.validateClaims=e.signOut=e.addAxiosInterceptors=e.doesSessionExist=e.attemptRefreshingSession=e.getAccessToken=e.getAccessTokenPayloadSecurely=e.getUserId=e.init=e.BooleanClaim=e.PrimitiveArrayClaim=e.PrimitiveClaim=void 0;var n=Br,i=Jy,a=function(){function _(){}return _.init=function(C){return i.default.init(C)},_.getUserId=function(C){return i.default.getInstanceOrThrow().getUserId({userContext:(0,n.getNormalisedUserContext)(C==null?void 0:C.userContext)})},_.getAccessToken=function(C){return i.default.getInstanceOrThrow().getAccessToken({userContext:(0,n.getNormalisedUserContext)(C==null?void 0:C.userContext)})},_.getAccessTokenPayloadSecurely=function(C){return t(this,void 0,void 0,function(){return r(this,function(N){return[2,i.default.getInstanceOrThrow().getAccessTokenPayloadSecurely({userContext:(0,n.getNormalisedUserContext)(C==null?void 0:C.userContext)})]})})},_.attemptRefreshingSession=function(){return t(this,void 0,void 0,function(){return r(this,function(C){return[2,i.default.getInstanceOrThrow().attemptRefreshingSession()]})})},_.doesSessionExist=function(C){return i.default.getInstanceOrThrow().doesSessionExist({userContext:(0,n.getNormalisedUserContext)(C==null?void 0:C.userContext)})},_.addAxiosInterceptors=function(C,N){return i.default.addAxiosInterceptors(C,(0,n.getNormalisedUserContext)(N))},_.signOut=function(C){return i.default.getInstanceOrThrow().signOut({userContext:(0,n.getNormalisedUserContext)(C==null?void 0:C.userContext)})},_.getClaimValue=function(C){return i.default.getInstanceOrThrow().getClaimValue({claim:C.claim,userContext:(0,n.getNormalisedUserContext)(C==null?void 0:C.userContext)})},_.validateClaims=function(C){return i.default.getInstanceOrThrow().validateClaims({overrideGlobalClaimValidators:C==null?void 0:C.overrideGlobalClaimValidators,userContext:(0,n.getNormalisedUserContext)(C==null?void 0:C.userContext)})},_.getInvalidClaimsFromResponse=function(C){return i.default.getInstanceOrThrow().getInvalidClaimsFromResponse({response:C.response,userContext:(0,n.getNormalisedUserContext)(C==null?void 0:C.userContext)})},_}();e.default=a;var s=a.init;e.init=s;var o=a.getUserId;e.getUserId=o;var l=a.getAccessTokenPayloadSecurely;e.getAccessTokenPayloadSecurely=l;var c=a.getAccessToken;e.getAccessToken=c;var d=a.attemptRefreshingSession;e.attemptRefreshingSession=d;var f=a.doesSessionExist;e.doesSessionExist=f;var p=a.addAxiosInterceptors;e.addAxiosInterceptors=p;var m=a.signOut;e.signOut=m;var x=a.validateClaims;e.validateClaims=x;var v=a.getClaimValue;e.getClaimValue=v;var b=a.getInvalidClaimsFromResponse;e.getInvalidClaimsFromResponse=b;var w=_ie();Object.defineProperty(e,"PrimitiveClaim",{enumerable:!0,get:function(){return w.PrimitiveClaim}}),Object.defineProperty(e,"PrimitiveArrayClaim",{enumerable:!0,get:function(){return w.PrimitiveArrayClaim}}),Object.defineProperty(e,"BooleanClaim",{enumerable:!0,get:function(){return w.BooleanClaim}})})(WO);(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(WO)})(FL);var HL={},Nx={},Ra={},Aie={},CE={},WL={},Ax={};Object.defineProperty(Ax,"__esModule",{value:!0});Ax.PostSuperTokensInitCallbacks=void 0;var TTe=function(){function e(){}return e.addPostInitCallback=function(t){e.postInitCallbacks.push(t)},e.runPostInitCallbacks=function(){for(var t=0,r=e.postInitCallbacks;t<r.length;t++){var n=r[t];n()}},e.postInitCallbacks=[],e}();Ax.PostSuperTokensInitCallbacks=TTe;var Tx={},QO={},Ix={},kE={},BV=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},UV=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(kE,"__esModule",{value:!0});kE.normaliseRecipeModuleConfig=void 0;function ITe(e){var t=this,r=e.preAPIHook;r===void 0&&(r=function(i){return BV(t,void 0,void 0,function(){return UV(this,function(a){return[2,i]})})});var n=e.postAPIHook;return n===void 0&&(n=function(){return BV(t,void 0,void 0,function(){return UV(this,function(i){return[2]})})}),{recipeId:e.recipeId,appInfo:e.appInfo,clientType:e.clientType,preAPIHook:r,postAPIHook:n}}kE.normaliseRecipeModuleConfig=ITe;Object.defineProperty(Ix,"__esModule",{value:!0});Ix.normaliseAuthRecipe=void 0;var OTe=kE;function PTe(e){return(0,OTe.normaliseRecipeModuleConfig)(e)}Ix.normaliseAuthRecipe=PTe;var g2=Ve&&Ve.__assign||function(){return g2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},g2.apply(this,arguments)};Object.defineProperty(QO,"__esModule",{value:!0});QO.normaliseUserInput=void 0;var RTe=Ix;function jTe(e){var t=g2({functions:function(r){return r}},e.override);return g2(g2({},(0,RTe.normaliseAuthRecipe)(e)),{override:t})}QO.normaliseUserInput=jTe;var _E={},Ox={},qg={};Object.defineProperty(qg,"__esModule",{value:!0});qg.supported_fdi=qg.package_version=void 0;qg.package_version="0.16.0";qg.supported_fdi=["3.1","4.0","4.1","4.2"];var es=Ve&&Ve.__assign||function(){return es=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},es.apply(this,arguments)},Uf=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},$f=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Ox,"__esModule",{value:!0});var DTe=Xy,MTe=qg,FTe=Ky,LTe=function(){function e(r,n){var i=this;this.recipeId=r,this.appInfo=n,this.getPath=function(a){for(var s,o,l=typeof a=="string"?a:a.path,c=typeof a=="string"?{}:(s=a.pathParams)!==null&&s!==void 0?s:{},d=typeof a=="string"?{}:(o=a.queryParams)!==null&&o!==void 0?o:{},f=String(l),p=0,m=Object.entries(c);p<m.length;p++){var x=m[p],v=x[0],b=x[1];f=f.replace(new RegExp("<".concat(v,">"),"g"),String(b))}f=new DTe.default(f).getAsStringDangerous(),f.startsWith("/public/")&&(f=f.substring(7));var w=new URLSearchParams(d),_=w.toString();return _.length>0&&(f+="?"+w.toString()),f},this.safelyStringifyBody=function(a){return a?JSON.stringify(a):"{}"},this.get=function(a,s,o,l){return Uf(i,void 0,void 0,function(){var c,d,f;return $f(this,function(p){switch(p.label){case 0:return c=this.getFullUrl(a),[4,this.fetch(c,es(es({method:"GET"},s),{body:void 0}),o,l)];case 1:return d=p.sent(),[4,this.getResponseJsonOrThrowGeneralError(d)];case 2:return f=p.sent(),[2,{jsonBody:f,fetchResponse:d}]}})})},this.post=function(a,s,o,l){return Uf(i,void 0,void 0,function(){var c,d;return $f(this,function(f){switch(f.label){case 0:return[4,this.fetch(this.getFullUrl(a),es(es({method:"POST"},s),{body:this.safelyStringifyBody(s.body)}),o,l)];case 1:return c=f.sent(),[4,this.getResponseJsonOrThrowGeneralError(c)];case 2:return d=f.sent(),[2,{jsonBody:d,fetchResponse:c}]}})})},this.delete=function(a,s,o,l){return Uf(i,void 0,void 0,function(){var c,d;return $f(this,function(f){switch(f.label){case 0:return[4,this.fetch(this.getFullUrl(a),es(es({method:"DELETE"},s),{body:this.safelyStringifyBody(s.body)}),o,l)];case 1:return c=f.sent(),[4,this.getResponseJsonOrThrowGeneralError(c)];case 2:return d=f.sent(),[2,{jsonBody:d,fetchResponse:c}]}})})},this.put=function(a,s,o,l){return Uf(i,void 0,void 0,function(){var c,d;return $f(this,function(f){switch(f.label){case 0:return[4,this.fetch(this.getFullUrl(a),es(es({method:"PUT"},s),{body:this.safelyStringifyBody(s.body)}),o,l)];case 1:return c=f.sent(),[4,this.getResponseJsonOrThrowGeneralError(c)];case 2:return d=f.sent(),[2,{jsonBody:d,fetchResponse:c}]}})})},this.fetch=function(a,s,o,l){return Uf(i,void 0,void 0,function(){var c,d,f,p,m,x;return $f(this,function(v){switch(v.label){case 0:return s===void 0?c={}:c=s.headers,[4,this.callPreAPIHook({preAPIHook:o,url:a,requestInit:es(es({},s),{headers:es(es({},c),{"fdi-version":MTe.supported_fdi.join(","),"Content-Type":"application/json",rid:this.recipeId})})})];case 1:return d=v.sent(),f=d.requestInit,p=d.url,[4,fetch(p,f)];case 2:if(m=v.sent(),m.status>=300)throw m;return l===void 0?[3,4]:(x=m.clone(),[4,l({requestInit:f,url:a,fetchResponse:x})]);case 3:v.sent(),v.label=4;case 4:return[2,m]}})})},this.callPreAPIHook=function(a){return Uf(i,void 0,void 0,function(){var s;return $f(this,function(o){switch(o.label){case 0:return a.preAPIHook===void 0?[2,{url:a.url,requestInit:a.requestInit}]:[4,a.preAPIHook({url:a.url,requestInit:a.requestInit})];case 1:return s=o.sent(),[2,s]}})})},this.getFullUrl=function(a){var s=i.appInfo.apiBasePath.getAsStringDangerous(),o=i.getPath(a);return"".concat(i.appInfo.apiDomain.getAsStringDangerous()).concat(s).concat(o)},this.getResponseJsonOrThrowGeneralError=function(a){return Uf(i,void 0,void 0,function(){var s,o;return $f(this,function(l){switch(l.label){case 0:return[4,a.clone().json()];case 1:if(s=l.sent(),s.status==="GENERAL_ERROR")throw o=s.message===void 0?"No Error Message Provided":s.message,new FTe.default(o);return[2,s]}})})}}var t;return t=e,e.preparePreAPIHook=function(r){var n=r.recipePreAPIHook,i=r.action,a=r.options,s=r.userContext;return function(o){return Uf(void 0,void 0,void 0,function(){var l;return $f(t,function(c){switch(c.label){case 0:return[4,n(es(es({},o),{action:i,userContext:s}))];case 1:return l=c.sent(),a===void 0||a.preAPIHook===void 0?[2,l]:[2,a.preAPIHook({url:l.url,requestInit:l.requestInit,userContext:s})]}})})}},e.preparePostAPIHook=function(r){var n=r.recipePostAPIHook,i=r.action,a=r.userContext;return function(s){return Uf(void 0,void 0,void 0,function(){return $f(t,function(o){switch(o.label){case 0:return[4,n(es(es({},s),{userContext:a,action:i}))];case 1:return o.sent(),[2]}})})}},e}();Ox.default=LTe;var BTe=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},UTe=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(_E,"__esModule",{value:!0});_E.getRecipeImplementation=void 0;var fj=Ox,$Te=Br;function Tie(e){var t=new fj.default(e.recipeId,e.appInfo);return{getTenantId:function(){var r=(0,$Te.getQueryParams)("tenantId");if((r==null?void 0:r.trim())!=="")return r},getLoginMethods:function(r){var n=r.tenantId,i=r.options,a=r.userContext;return BTe(this,void 0,void 0,function(){var s,o,l,c,d;return UTe(this,function(f){switch(f.label){case 0:return s={},e.clientType!==void 0&&(s.clientType=e.clientType),[4,t.get({path:"/<tenantId>/loginmethods",pathParams:{tenantId:n||"public"},queryParams:s},{},fj.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"GET_LOGIN_METHODS",options:i,userContext:a}),fj.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"GET_LOGIN_METHODS",userContext:a}))];case 1:return o=f.sent(),l=o.jsonBody,c=o.fetchResponse,l.firstFactors===void 0?(d=[],l.emailPassword.enabled&&d.push("emailpassword"),l.thirdParty.enabled&&d.push("thirdparty"),l.passwordless.enabled&&(d.push("otp-email"),d.push("otp-phone"),d.push("link-email"),d.push("link-phone"))):d=l.firstFactors,[2,{status:"OK",thirdParty:{providers:l.thirdParty.providers},firstFactors:d,fetchResponse:c}]}})})}}}_E.default=Tie;_E.getRecipeImplementation=Tie;var Zy={},zTe=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),HTe=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},WTe=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Zy,"__esModule",{value:!0});var VTe=XO,qTe=Jy,GTe=function(e){zTe(t,e);function t(r){var n=e.call(this,r)||this;return n.signOut=function(i){return HTe(n,void 0,void 0,function(){return WTe(this,function(a){switch(a.label){case 0:return[4,qTe.default.getInstanceOrThrow().signOut({userContext:i.userContext})];case 1:return[2,a.sent()]}})})},n}return t}(VTe.default);Zy.default=GTe;var KTe=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),RA=Ve&&Ve.__assign||function(){return RA=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},RA.apply(this,arguments)};Object.defineProperty(Tx,"__esModule",{value:!0});Tx.Recipe=void 0;var XTe=QO,YTe=pf,QTe=_E,hj=Br,JTe=Zy,Iie=function(e){KTe(t,e);function t(r){var n=e.call(this,(0,XTe.normaliseUserInput)(r))||this,i=new YTe.default((0,QTe.default)({recipeId:n.config.recipeId,appInfo:n.config.appInfo,clientType:n.config.clientType,preAPIHook:n.config.preAPIHook,postAPIHook:n.config.postAPIHook}));return n.recipeImplementation=i.override(n.config.override.functions).build(),n}return t.init=function(r){return function(n,i,a,s){return t.instance=new t(RA(RA({},(0,hj.applyPlugins)(t.RECIPE_ID,r,s??[])),{recipeId:t.RECIPE_ID,appInfo:n,clientType:i})),t.instance}},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of Multitenancy found. Ensure that 'SuperTokens.init' method has been called.";throw r=(0,hj.checkForSSRErrorAndAppendIfNeeded)(r),Error(r)}return t.instance},t.reset=function(){(0,hj.isTest)()&&(t.instance=void 0)},t.RECIPE_ID="multitenancy",t}(JTe.default);Tx.Recipe=Iie;Tx.default=Iie;var Oie={},VL={};(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(hf)})(VL);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DateProviderReference=void 0;var t=VL;Object.defineProperty(e,"DateProviderReference",{enumerable:!0,get:function(){return t.DateProviderReference}})})(Oie);var JO={};Object.defineProperty(JO,"__esModule",{value:!0});JO.isVersionCompatible=void 0;var pj=function(e){var t=e.match(/^(\d+)\.(\d+)\.(\d+)(?:-(.+))?$/);if(!t)throw new Error("Invalid version format: ".concat(e));return{major:parseInt(t[1]),minor:parseInt(t[2]),patch:parseInt(t[3]),prerelease:t[4]}},$V=function(e,t){return e.major!==t.major?e.major-t.major:e.minor!==t.minor?e.minor-t.minor:e.patch!==t.patch?e.patch-t.patch:e.prerelease&&!t.prerelease?-1:!e.prerelease&&t.prerelease?1:e.prerelease&&t.prerelease?e.prerelease.localeCompare(t.prerelease):0},ZTe=function(e,t){var r=pj(e);if(t===e)return!0;var n=t.match(/^([<>=~^]+)\s*(.+)$/);if(n){var i=n[1],a=n[2],s=pj(a),o=$V(r,s);switch(i){case">=":return o>=0;case">":return o>0;case"<=":return o<=0;case"<":return o<0;case"=":case"==":return o===0;case"~":return r.major===s.major&&r.minor===s.minor&&r.patch>=s.patch;case"^":return s.major===0?r.major===0&&r.minor===s.minor&&r.patch>=s.patch:r.major===s.major&&r.minor>=s.minor;default:return!1}}var l=t.match(/^(\d+)\.(\d+)\.x$/);if(l)return r.major===parseInt(l[1],10)&&r.minor===parseInt(l[2],10);var c=t.match(/^(\d+)\.x$/);if(c)return r.major===parseInt(c[1],10);var d=pj(t);return $V(r,d)===0},eIe=function(e,t){for(var r=Array.isArray(t)?t:[t],n=0,i=r;n<i.length;n++){var a=i[n];if(ZTe(e,a))return!0}return!1};JO.isVersionCompatible=eIe;var Td=Ve&&Ve.__assign||function(){return Td=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Td.apply(this,arguments)},tIe=Ve&&Ve.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};Object.defineProperty(WL,"__esModule",{value:!0});var Sp=Br,rIe=DL,nIe=HO,zV=Ax,mj=Tx,iIe=Oie,o_=qg,aIe=JO,sIe=function(){function e(t){var r=this,n;if(this.recipeList=[],this.pluginList=[],this.appInfo=(0,Sp.normaliseInputAppInfoOrThrowError)(t.appInfo),t.recipeList===void 0||t.recipeList.length===0)throw new Error("Please provide at least one recipe to the supertokens.init function call. See https://supertokens.io/docs/emailpassword/quick-setup/frontend");var i=[];if(!((n=t.experimental)===null||n===void 0)&&n.plugins)for(var a=0,s=t.experimental.plugins;a<s.length;a++){var o=s[a];if(o.compatibleWebJSSDKVersions){var l=(0,aIe.isVersionCompatible)(o_.package_version,o.compatibleWebJSSDKVersions);if(!l)throw new Error("Incompatible SDK version for plugin ".concat(o.id,'. Version "').concat(o_.package_version,'" not found in compatible versions: ').concat(JSON.stringify(o.compatibleWebJSSDKVersions)))}if(o.dependencies){var c=o.dependencies((0,Sp.getPublicConfig)(Td(Td({},t),{appInfo:this.appInfo})),i.map(Sp.getPublicPlugin),o_.package_version);if(c.status==="ERROR")throw new Error(c.message);c.pluginsToAdd&&i.push.apply(i,c.pluginsToAdd)}i.push(o)}var d=i.filter(function(w,_){return i.some(function(C,N){return C.id===w.id&&N!==_})});if(d.length>0)throw new Error("Duplicate plugin IDs: ".concat(d.map(function(w){return w.id}).join(", ")));this.pluginList=i.map(Sp.getPublicPlugin);for(var f=function(w){var _=i[w];if(_.config){var C=_.config((0,Sp.getPublicConfig)(Td(Td({},t),{appInfo:p.appInfo})))||{};C.appInfo;var N=tIe(C,["appInfo"]);t=Td(Td({},t),N)}var R=i[w].init;R&&zV.PostSuperTokensInitCallbacks.addPostInitCallback(function(){R((0,Sp.getPublicConfig)(Td(Td({},t),{appInfo:r.appInfo})),r.pluginList,o_.package_version),r.pluginList[w].initialized=!0})},p=this,m=0;m<this.pluginList.length;m+=1)f(m);var x=i.filter(function(w){return w.overrideMap!==void 0}).map(function(w){return w.overrideMap}),v=!1;t.enableDebugLogs!==void 0&&(v=t.enableDebugLogs);var b=!1;this.recipeList=t.recipeList.map(function(w){var _=w(r.appInfo,t.clientType,v,x);return _.config.recipeId===mj.Recipe.RECIPE_ID&&(b=!0),_}),b||this.recipeList.push(mj.Recipe.init()(this.appInfo,t.clientType,v,x))}return e.init=function(t){if(rIe.CookieHandlerReference.init(t.cookieHandler),nIe.WindowHandlerReference.init(t.windowHandler),iIe.DateProviderReference.init(t.dateProvider),e.instance!==void 0){console.warn("SuperTokens was already initialized");return}e.instance=new e(t),zV.PostSuperTokensInitCallbacks.runPostInitCallbacks()},e.getInstanceOrThrow=function(){if(e.instance===void 0){var t="SuperTokens must be initialized before calling this method.";throw t=(0,Sp.checkForSSRErrorAndAppendIfNeeded)(t),new Error(t)}return e.instance},e.reset=function(){if(!(0,Sp.isTest)()){console.warn("Calling reset() is only supported during testing");return}mj.Recipe.reset(),e.instance=void 0},e}();WL.default=sIe;Object.defineProperty(CE,"__esModule",{value:!0});CE.init=void 0;var oIe=WL,Pie=function(){function e(){}return e.init=function(t){oIe.default.init(t)},e}();CE.default=Pie;CE.init=Pie.init;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(CE)})(Aie);var ZO={};(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(Ax)})(ZO);var Rie={},jie={},ny={},lIe=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jA=Ve&&Ve.__assign||function(){return jA=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},jA.apply(this,arguments)},HV=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},WV=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(ny,"__esModule",{value:!0});ny.AllowedDomainsClaim=ny.AllowedDomainsClaimClass=void 0;var cIe=ML,uIe=WO,Die=function(e){lIe(t,e);function t(){var r=e.call(this,{id:"st-t-dmns",refresh:function(){return HV(r,void 0,void 0,function(){return WV(this,function(n){return[2]})})},defaultMaxAgeInSeconds:Number.MAX_SAFE_INTEGER})||this;return r.validators=jA(jA({},r.validators),{hasAccessToCurrentDomain:function(){return{id:r.id,refresh:r.refresh,shouldRefresh:function(){return!1},validate:function(n,i){return HV(r,void 0,void 0,function(){var a,s;return WV(this,function(o){return a=cIe.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHostName(),s=this.validators.includes(a,Number.MAX_SAFE_INTEGER,this.id),[2,s.validate(n,i)]})})}}}}),r}return t}(uIe.PrimitiveArrayClaim);ny.AllowedDomainsClaimClass=Die;ny.AllowedDomainsClaim=new Die;(function(e){var t=Ve&&Ve.__assign||function(){return t=Object.assign||function(c){for(var d,f=1,p=arguments.length;f<p;f++){d=arguments[f];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(c[m]=d[m])}return c},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AllowedDomainsClaim=e.getTenantId=e.getLoginMethods=e.init=void 0;var r=Br,n=ny;Object.defineProperty(e,"AllowedDomainsClaim",{enumerable:!0,get:function(){return n.AllowedDomainsClaim}});var i=Tx,a=function(){function c(){}return c.init=function(d){return i.default.init(d)},c.getLoginMethods=function(d){return i.default.getInstanceOrThrow().recipeImplementation.getLoginMethods(t(t({},d),{userContext:(0,r.getNormalisedUserContext)(d==null?void 0:d.userContext)}))},c.getTenantId=function(d){return i.default.getInstanceOrThrow().recipeImplementation.getTenantId(t(t({},d),{userContext:(0,r.getNormalisedUserContext)(d==null?void 0:d.userContext)}))},c.AllowedDomainsClaim=n.AllowedDomainsClaim,c}();e.default=a;var s=a.init;e.init=s;var o=a.getLoginMethods;e.getLoginMethods=o;var l=a.getTenantId;e.getTenantId=l})(jie);(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(jie)})(Rie);var e4={};(function(e){function t(n){for(var i in n)e.hasOwnProperty(i)||(e[i]=n[i])}e.__esModule=!0;let r=Br;r.default!==void 0?t(r):t({default:r,...r})})(e4);var Mt=Mi,dIe=Aie,fIe=jL,VV=ZO,hIe=Yy,pIe=Rie,mIe=e4;function Mie(e){return e&&e.__esModule?e:{default:e}}var gIe=Mie(dIe),gj=Mie(pIe),Fie=function(){function e(t){this.config=t}return e}();function Lie(e){var t=this;e===void 0&&(e={});var r=e.onHandleEvent,n=e.getRedirectionURL,i=e.preAPIHook,a=e.postAPIHook;r===void 0&&(r=function(o){}),n===void 0&&(n=function(o){return Mt.__awaiter(t,void 0,void 0,function(){return Mt.__generator(this,function(l){return[2,void 0]})})}),i===void 0&&(i=function(o){return Mt.__awaiter(t,void 0,void 0,function(){return Mt.__generator(this,function(l){return[2,o]})})}),a===void 0&&(a=function(){return Mt.__awaiter(t,void 0,void 0,function(){return Mt.__generator(this,function(o){return[2]})})});var s=e.style===void 0?"":e.style;return Mt.__assign(Mt.__assign({},e),{getRedirectionURL:n,onHandleEvent:r,preAPIHook:i,postAPIHook:a,recipeRootStyle:s})}function xIe(e){return Mt.__assign(Mt.__assign({},Lie(e)),{override:Mt.__assign({functions:function(t){return t}},e==null?void 0:e.override)})}function vIe(e,t){return e.firstFactors.some(function(r){return t.some(function(n){return n.firstFactorIds.includes(r)})})}var I6=function(e){Mt.__extends(t,e);function t(r,n){n===void 0&&(n=gj.default);var i=e.call(this,r)||this;return i.webJSRecipe=n,i.recipeID=t.RECIPE_ID,i.dynamicLoginMethodsCache={},i}return t.prototype.getCurrentDynamicLoginMethods=function(r){var n;return Mt.__awaiter(this,void 0,void 0,function(){var i,a,s;return Mt.__generator(this,function(o){switch(o.label){case 0:return DA.usesDynamicLoginMethods===!1?[2,void 0]:(i=mIe.getNormalisedUserContext(r.userContext),[4,t.getInstanceOrThrow().webJSRecipe.getTenantId()]);case 1:return a=(n=o.sent())!==null&&n!==void 0?n:"public",this.dynamicLoginMethodsCache[a]===void 0&&(this.dynamicLoginMethodsCache[a]=t.getDynamicLoginMethods({tenantId:a,userContext:i})),[4,this.dynamicLoginMethodsCache[a]];case 2:if(s=o.sent(),!vIe(s,DA.getInstanceOrThrow().recipeList.filter(function(l){return"firstFactorIds"in l})))throw new Error("Initialized recipes have no overlap with core recipes or could not load login methods");return[2,s]}})})},t.getDynamicLoginMethods=function(r){return Mt.__awaiter(this,void 0,void 0,function(){var n,i,a;return Mt.__generator(this,function(s){switch(s.label){case 0:return[4,gj.default.getLoginMethods(r)];case 1:return n=s.sent(),i=n.thirdParty,a=n.firstFactors,[2,{thirdparty:i,firstFactors:a}]}})})},t.init=function(r){var n=xIe(r);return{recipeID:t.RECIPE_ID,authReact:function(i){return t.instance=new t(Mt.__assign(Mt.__assign({},n),{appInfo:i,recipeId:t.RECIPE_ID})),t.instance},webJS:gj.default.init(Mt.__assign({},n))}},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of Multitenancy found. Make sure to call the Multitenancy.init method.See https://supertokens.io/docs/multitenancy/quick-setup/frontend";throw typeof window>"u"&&(r=r+Mt.SSR_ERROR),Error(r)}return t.instance},t.reset=function(){Mt.isTest()&&(t.instance=void 0)},t.RECIPE_ID="multitenancy",t}(Fie),Bie={en:{AUTH_PAGE_HEADER_TITLE_SIGN_IN_AND_UP:"Sign Up / Sign In",AUTH_PAGE_HEADER_TITLE_SIGN_IN:"Sign In",AUTH_PAGE_HEADER_TITLE_SIGN_UP:"Sign Up",AUTH_PAGE_HEADER_TITLE_SIGN_IN_UP_TO_APP:" to continue to ",AUTH_PAGE_HEADER_SUBTITLE_SIGN_IN_START:"Not registered yet?",AUTH_PAGE_HEADER_SUBTITLE_SIGN_IN_SIGN_UP_LINK:"Sign Up",AUTH_PAGE_HEADER_SUBTITLE_SIGN_IN_END:"",AUTH_PAGE_HEADER_SUBTITLE_SIGN_UP_START:"Already have an account?",AUTH_PAGE_HEADER_SUBTITLE_SIGN_UP_SIGN_IN_LINK:"Sign In",AUTH_PAGE_HEADER_SUBTITLE_SIGN_UP_END:"",AUTH_PAGE_FOOTER_START:"By continuing, you agree to our ",AUTH_PAGE_FOOTER_TOS:"Terms of Service",AUTH_PAGE_FOOTER_AND:" and ",AUTH_PAGE_FOOTER_PP:"Privacy Policy",AUTH_PAGE_FOOTER_END:"",DIVIDER_OR:"or",BRANDING_POWERED_BY_START:"Powered by ",BRANDING_POWERED_BY_END:"",SOMETHING_WENT_WRONG_ERROR:"Something went wrong. Please try again.",SOMETHING_WENT_WRONG_ERROR_RELOAD:"Something went wrong. Please try again later or reload the page."}},yIe=function(){function e(){this.handlers=new Map}return e.prototype.emit=function(t,r){for(var n=this.handlers.get(t)||[],i=0,a=n;i<a.length;i++){var s=a[i];s(t,r)}},e.prototype.on=function(t,r){var n=this.handlers.get(t)||[];this.handlers.set(t,n.concat(r))},e.prototype.off=function(t,r){var n=this.handlers.get(t)||[];this.handlers.set(t,n.filter(function(i){return i!==r}))},e}(),Uie="sCurrLanguage";function bIe(e,t){return Mt.__awaiter(this,void 0,void 0,function(){return Mt.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Mt.setFrontendCookie(Uie,e,t)];case 1:return r.sent(),[3,3];case 2:return r.sent(),[3,3];case 3:return[2]}})})}function $ie(){return Mt.__awaiter(this,void 0,void 0,function(){return Mt.__generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Mt.getCookieValue(Uie)];case 1:return[2,e.sent()];case 2:return e.sent(),[2,null];case 3:return[2]}})})}var wIe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=DA.getInstanceOrThrow().languageTranslations,n=r.translationEventSource,i=r.userTranslationFunc,a=r.defaultLanguage,s=r.userTranslationStore,o=Mt.__spreadArray(Mt.__spreadArray([Bie],e,!0),[s],!1).reduce(Mt.mergeObjects,{}),l=function(){return o},c=function(b){o=b},d=a,f=function(){return d},p=function(b){d=b},m=function(b,w){p(w)},x=function(b,w){c(Mt.mergeObjects(o,w))};n.off("LanguageChange",m),n.off("TranslationLoaded",x),n.on("LanguageChange",m),n.on("TranslationLoaded",x),$ie().then(function(b){b&&p(b)});var v=function(b,w){if(w===void 0&&(w={}),i)return i(b);if(f()!==void 0){var _=l()[f()]&&l()[f()][b],C=l()[a]&&l()[a][b];return _===void 0?C!==void 0?C:b:_.replace(/{(\w+)}/g,function(N,R){return w[R]||N})}throw new Error("Should never come here")};return v},xj=function(e){var t=e.match(/^(\d+)\.(\d+)\.(\d+)(?:-(.+))?$/);if(!t)throw new Error("Invalid version format: ".concat(e));return{major:parseInt(t[1]),minor:parseInt(t[2]),patch:parseInt(t[3]),prerelease:t[4]}},qV=function(e,t){return e.major!==t.major?e.major-t.major:e.minor!==t.minor?e.minor-t.minor:e.patch!==t.patch?e.patch-t.patch:e.prerelease&&!t.prerelease?-1:!e.prerelease&&t.prerelease?1:e.prerelease&&t.prerelease?e.prerelease.localeCompare(t.prerelease):0},SIe=function(e,t){var r=xj(e);if(t===e)return!0;var n=t.match(/^([<>=~^]+)\s*(.+)$/);if(n){var i=n[1],a=n[2],s=xj(a),o=qV(r,s);switch(i){case">=":return o>=0;case">":return o>0;case"<=":return o<=0;case"<":return o<0;case"=":case"==":return o===0;case"~":return r.major===s.major&&r.minor===s.minor&&r.patch>=s.patch;case"^":return s.major===0?r.major===0&&r.minor===s.minor&&r.patch>=s.patch:r.major===s.major&&r.minor>=s.minor;default:return!1}}var l=t.match(/^(\d+)\.(\d+)\.x$/);if(l)return r.major===parseInt(l[1],10)&&r.minor===parseInt(l[2],10);var c=t.match(/^(\d+)\.x$/);if(c)return r.major===parseInt(c[1],10);var d=xj(t);return qV(r,d)===0},EIe=function(e,t){for(var r=Array.isArray(t)?t:[t],n=0,i=r;n<i.length;n++){var a=i[n];if(SIe(e,a))return!0}return!1},DA=function(){function e(t,r){var n=this,i,a,s,o,l,c,d,f;if(this.pluginList=[],this.recipeList=[],this.componentOverrides={},this.pluginRouteHandlers=[],this.changeLanguage=function(D){return Mt.__awaiter(n,void 0,void 0,function(){return Mt.__generator(this,function(M){switch(M.label){case 0:return[4,bIe(D,this.languageTranslations.currentLanguageCookieScope)];case 1:return M.sent(),this.languageTranslations.translationEventSource.emit("LanguageChange",D),[2]}})})},this.redirectToAuth=function(D){return Mt.__awaiter(n,void 0,void 0,function(){var M,B;return Mt.__generator(this,function(U){switch(U.label){case 0:return M=D.queryParams===void 0?{}:D.queryParams,D.show!==void 0&&(M.show=D.show),D.redirectBack===!0&&(M.redirectToPath=Mt.getCurrentNormalisedUrlPathWithQueryParamsAndFragments()),[4,this.getRedirectUrl({action:"TO_AUTH",showSignIn:D.show==="signin",tenantIdFromQueryParams:Mt.getTenantIdFromQueryParams()},D.userContext)];case 1:return B=U.sent(),B===null?(Mt.logDebugMessage("Skipping redirection because the user override returned null"),[2]):(B=Mt.appendQueryParamsToURL(B,M),[2,this.redirectToUrl(B,D.navigate)])}})})},this.redirectToUrl=function(D,M){return Mt.__awaiter(n,void 0,void 0,function(){return Mt.__generator(this,function(B){return CIe(this.appInfo,D,M),[2]})})},this.redirect=function(D,M,B,U){return Mt.__awaiter(n,void 0,void 0,function(){var H;return Mt.__generator(this,function(Z){switch(Z.label){case 0:return[4,this.getRedirectUrl(D,Mt.getNormalisedUserContext(U))];case 1:return H=Z.sent(),H===null?(Mt.logDebugMessage("Skipping redirection because the user override returned null for context ".concat(JSON.stringify(D,null,2))),[2]):(H=Mt.appendQueryParamsToURL(H,B),[2,e.getInstanceOrThrow().redirectToUrl(H,M)])}})})},this.appInfo=Mt.normaliseInputAppInfoOrThrowError(t.appInfo),t.recipeList===void 0||t.recipeList.length===0)throw new Error("Please provide at least one recipe to the supertokens.init function call. See https://supertokens.io/docs/emailpassword/quick-setup/frontend");this.componentOverrides={};for(var p=0,m=r;p<m.length;p++){var x=m[p];if(x.overrideMap!==void 0)for(var v=0,b=Object.keys(x.overrideMap);v<b.length;v++){var w=b[v];this.componentOverrides[w]=Mt.__assign(Mt.__assign({},this.componentOverrides[w]),(a=(i=x.overrideMap[w])===null||i===void 0?void 0:i.components)!==null&&a!==void 0?a:{})}this.componentOverrides.authRecipe=Mt.__assign(Mt.__assign({},(s=this.componentOverrides.authRecipe)!==null&&s!==void 0?s:{}),(o=x.generalAuthRecipeComponentOverrides)!==null&&o!==void 0?o:{})}this.pluginList=r.map(Mt.getPublicPlugin);for(var _=Mt.getPublicConfig(Mt.__assign(Mt.__assign({},t),{appInfo:this.appInfo})),C=function(D){var M,B=r[D].init;B&&!N.pluginList[D].initialized&&VV.PostSuperTokensInitCallbacks.addPostInitCallback(function(){B(_,n.pluginList,Mt.package_version),n.pluginList[D].initialized=!0});var U=r[D].routeHandlers;if(U){var H=[];if(typeof U=="function"){var Z=U(_,N.pluginList,Mt.package_version);if(Z.status==="ERROR")throw new Error(Z.message);H=Z.routeHandlers}else H=U;(M=N.pluginRouteHandlers).push.apply(M,H)}},N=this,R=0;R<this.pluginList.length;R+=1)C(R);var P=t.languageTranslations===void 0?{}:t.languageTranslations;this.languageTranslations={defaultLanguage:P.defaultLanguage===void 0?"en":P.defaultLanguage,currentLanguageCookieScope:P.currentLanguageCookieScope!==void 0?Mt.normaliseCookieScopeOrThrowError(P.currentLanguageCookieScope):Mt.getDefaultCookieScope(),userTranslationStore:P.translations!==void 0?P.translations:{},translationEventSource:new yIe,userTranslationFunc:P.translationFunc};var O=!!(t!=null&&t.enableDebugLogs);O&&Mt.enableLogging(),this.userGetRedirectionURL=t.getRedirectionURL,this.recipeList=t.recipeList.map(function(D){var M=D.authReact;return M(n.appInfo,O)}),this.rootStyle=(l=t.style)!==null&&l!==void 0?l:"",this.privacyPolicyLink=t.privacyPolicyLink,this.termsOfServiceLink=t.termsOfServiceLink,this.useShadowDom=(c=t.useShadowDom)!==null&&c!==void 0?c:!0,this.defaultToSignUp=(d=t.defaultToSignUp)!==null&&d!==void 0?d:!1,this.disableAuthRoute=(f=t.disableAuthRoute)!==null&&f!==void 0?f:!1}return e.init=function(t){var r,n;if(fIe.CookieHandlerReference.init(t.cookieHandler),hIe.WindowHandlerReference.init(t.windowHandler),e.instance!==void 0){console.warn("SuperTokens was already initialized");return}e.usesDynamicLoginMethods=(r=t.usesDynamicLoginMethods)!==null&&r!==void 0?r:!1;var i=t.recipeList.find(function(w){return w.recipeID===I6.RECIPE_ID})!==void 0?t.recipeList:t.recipeList.concat(I6.init({})),a=Mt.normaliseInputAppInfoOrThrowError(t.appInfo),s=Mt.getPublicConfig(Mt.__assign(Mt.__assign({},t),{appInfo:a})),o=[];if(!((n=t.experimental)===null||n===void 0)&&n.plugins)for(var l=0,c=t.experimental.plugins;l<c.length;l++){var d=c[l];if(d.compatibleAuthReactSDKVersions){var f=EIe(Mt.package_version,d.compatibleAuthReactSDKVersions);if(!f)throw new Error("Incompatible SDK version for plugin ".concat(d.id,'. Version "').concat(Mt.package_version,'" not found in compatible versions: ').concat(JSON.stringify(d.compatibleAuthReactSDKVersions)))}if(d.dependencies){var p=d.dependencies(s,o.map(Mt.getPublicPlugin),Mt.package_version);if(p.status==="ERROR")throw new Error(p.message);p.pluginsToAdd&&o.push.apply(o,p.pluginsToAdd)}o.push(d)}var m=o.filter(function(w,_){return o.some(function(C,N){return C.id===w.id&&N!==_})});if(m.length>0)throw new Error("Duplicate plugin IDs: ".concat(m.map(function(w){return w.id}).join(", ")));for(var x=0,v=o;x<v.length;x++){var d=v[x];if(d.config){var b=d.config(Mt.getPublicConfig(Mt.__assign(Mt.__assign({},t),{appInfo:a})))||{};delete b.appInfo,t=Mt.__assign(Mt.__assign({},t),b)}}gIe.default.init(Mt.__assign(Mt.__assign({},t),{recipeList:i.map(function(w){var _=w.webJS;return _}),experimental:{plugins:o.map(function(w){return{id:w.id,overrideMap:w.overrideMap}})}})),e.instance=new e(Mt.__assign(Mt.__assign({},t),{recipeList:i}),o),VV.PostSuperTokensInitCallbacks.runPostInitCallbacks()},e.getInstance=function(){return e.instance},e.getInstanceOrThrow=function(){if(e.instance===void 0){var t="SuperTokens must be initialized before calling this method.";throw typeof window>"u"&&(t=t+Mt.SSR_ERROR),new Error(t)}return e.instance},e.prototype.getRecipeOrThrow=function(t){var r=this.recipeList.find(function(n){return n.config.recipeId===t});if(r===void 0)throw new Error("Missing recipe: ".concat(t));return r},e.prototype.loadTranslation=function(t){this.languageTranslations.translationEventSource.emit("TranslationLoaded",t)},e.prototype.getRedirectUrl=function(t,r){var n;return Mt.__awaiter(this,void 0,void 0,function(){var i,a,s,o;return Mt.__generator(this,function(l){switch(l.label){case 0:return this.userGetRedirectionURL?[4,this.userGetRedirectionURL(t,r)]:[3,2];case 1:if(i=l.sent(),i!==void 0)return[2,i];l.label=2;case 2:if(t.action==="TO_AUTH")return a=this.appInfo.websiteBasePath.getAsStringDangerous(),s=Mt.appendTrailingSlashToURL(a),t.tenantIdFromQueryParams?[2,Mt.appendQueryParamsToURL(s,(o={},o[Mt.TENANT_ID_QUERY_PARAM]=t.tenantIdFromQueryParams,o))]:[2,s];if(t.action==="SUCCESS")return[2,(n=t.redirectToPath)!==null&&n!==void 0?n:"/"];throw new Error("Should never come here: unexpected redirection context")}})})},e.reset=function(){Mt.isTest()&&(e.instance=void 0)},e.usesDynamicLoginMethods=!1,e}();function CIe(e,t,r){try{new URL(t)}catch{var n=Mt.getOriginOfPage().getAsStringDangerous();if(n!==e.websiteDomain.getAsStringDangerous()){t="".concat(e.websiteDomain.getAsStringDangerous()).concat(t),Mt.redirectWithFullPageReload(t);return}if(r!==void 0){Mt.redirectWithNavigate(t,r);return}}Mt.redirectWithFullPageReload(t)}Ra.BaseRecipeModule=Fie;Ra.Multitenancy=I6;Ra.SuperTokens=DA;Ra.defaultTranslationsCommon=Bie;Ra.getCurrentLanguageFromCookie=$ie;Ra.getTranslationFunction=wIe;Ra.normaliseRecipeModuleConfig=Lie;var vj=Mi,kIe=u,_Ie=I,NIe=Ra;function AIe(e){return e&&e.__esModule?e:{default:e}}var GV=AIe(_Ie),TIe=function(e,t){e===void 0&&(e={});var r=GV.default.createContext(e),n=function(){var a,s=GV.default.useContext(r);return vj.__assign(vj.__assign({},(a=NIe.SuperTokens.getInstance())===null||a===void 0?void 0:a.componentOverrides[t]),s)},i=function(a){var s=a.children,o=a.components;return kIe.jsx(r.Provider,vj.__assign({value:o},{children:s}))};return[n,i,r.Consumer]};Nx.createGenericComponentsOverrideContext=TIe;var vu={},qL={},zie={},Ku={},NE={},t4={},x2=Ve&&Ve.__assign||function(){return x2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},x2.apply(this,arguments)};Object.defineProperty(t4,"__esModule",{value:!0});t4.normaliseUserInput=void 0;var IIe=Ix;function OIe(e){var t=x2({functions:function(r){return r}},e.override);return x2(x2({},(0,IIe.normaliseAuthRecipe)(e)),{override:t})}t4.normaliseUserInput=OIe;var AE={},yj=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},bj=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(AE,"__esModule",{value:!0});AE.getRecipeImplementation=void 0;var Am=Ox;function Hie(e){var t=new Am.default(e.recipeId,e.appInfo);return{getLoginChallengeInfo:function(r){var n=r.loginChallenge,i=r.options,a=r.userContext;return yj(this,void 0,void 0,function(){var s,o,l;return bj(this,function(c){switch(c.label){case 0:return[4,t.get({path:"/oauth/login/info",pathParams:void 0,queryParams:{loginChallenge:n}},{},Am.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"GET_LOGIN_CHALLENGE_INFO",options:i,userContext:a}),Am.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"GET_LOGIN_CHALLENGE_INFO",userContext:a}))];case 1:return s=c.sent(),o=s.jsonBody,l=s.fetchResponse,[2,{status:"OK",info:o.info,fetchResponse:l}]}})})},getRedirectURLToContinueOAuthFlow:function(r){var n=r.loginChallenge,i=r.options,a=r.userContext;return yj(this,void 0,void 0,function(){var s,o,l;return bj(this,function(c){switch(c.label){case 0:return[4,t.get({path:"/oauth/login",pathParams:void 0,queryParams:{loginChallenge:n}},{},Am.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"GET_REDIRECT_URL_TO_CONTINUE_OAUTH_FLOW",options:i,userContext:a}),Am.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"GET_REDIRECT_URL_TO_CONTINUE_OAUTH_FLOW",userContext:a}))];case 1:return s=c.sent(),o=s.jsonBody,l=s.fetchResponse,[2,{status:"OK",frontendRedirectTo:o.frontendRedirectTo,fetchResponse:l}]}})})},logOut:function(r){var n=r.logoutChallenge,i=r.options,a=r.userContext;return yj(this,void 0,void 0,function(){var s,o,l;return bj(this,function(c){switch(c.label){case 0:return[4,t.post("/oauth/logout",{body:{logoutChallenge:n}},Am.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"LOG_OUT",options:i,userContext:a}),Am.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"LOG_OUT",userContext:a}))];case 1:return s=c.sent(),o=s.jsonBody,l=s.fetchResponse,[2,{status:"OK",frontendRedirectTo:o.frontendRedirectTo,fetchResponse:l}]}})})}}}AE.default=Hie;AE.getRecipeImplementation=Hie;var PIe=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),MA=Ve&&Ve.__assign||function(){return MA=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},MA.apply(this,arguments)};Object.defineProperty(NE,"__esModule",{value:!0});NE.Recipe=void 0;var RIe=t4,jIe=pf,DIe=AE,wj=Br,MIe=Zy,Wie=function(e){PIe(t,e);function t(r){var n=e.call(this,(0,RIe.normaliseUserInput)(r))||this,i=new jIe.default((0,DIe.default)({recipeId:n.config.recipeId,appInfo:n.config.appInfo,clientType:n.config.clientType,preAPIHook:n.config.preAPIHook,postAPIHook:n.config.postAPIHook}));return n.recipeImplementation=i.override(n.config.override.functions).build(),n}return t.init=function(r){return function(n,i,a,s){return t.instance=new t(MA(MA({},(0,wj.applyPlugins)(t.RECIPE_ID,r,s??[])),{recipeId:t.RECIPE_ID,appInfo:n,clientType:i})),t.instance}},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of OAuth2Provider found. Ensure that the 'OAuth2Provider.init' method is called within the 'SuperTokens.init' recipeList.";throw r=(0,wj.checkForSSRErrorAndAppendIfNeeded)(r),Error(r)}return t.instance},t.reset=function(){(0,wj.isTest)()&&(t.instance=void 0)},t.RECIPE_ID="oauth2provider",t}(MIe.default);NE.Recipe=Wie;NE.default=Wie;var Fp=Ve&&Ve.__assign||function(){return Fp=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Fp.apply(this,arguments)};Object.defineProperty(Ku,"__esModule",{value:!0});Ku.logOut=Ku.getRedirectURLToContinueOAuthFlow=Ku.getLoginChallengeInfo=Ku.init=void 0;var Sj=Br,l_=NE,TE=function(){function e(){}return e.init=function(t){return l_.default.init(t)},e.getLoginChallengeInfo=function(t){return l_.default.getInstanceOrThrow().recipeImplementation.getLoginChallengeInfo(Fp(Fp({},t),{userContext:(0,Sj.getNormalisedUserContext)(t.userContext)}))},e.getRedirectURLToContinueOAuthFlow=function(t){return l_.default.getInstanceOrThrow().recipeImplementation.getRedirectURLToContinueOAuthFlow(Fp(Fp({},t),{userContext:(0,Sj.getNormalisedUserContext)(t.userContext)}))},e.logOut=function(t){return l_.default.getInstanceOrThrow().recipeImplementation.logOut(Fp(Fp({},t),{userContext:(0,Sj.getNormalisedUserContext)(t.userContext)}))},e}();Ku.default=TE;var FIe=TE.init;Ku.init=FIe;var LIe=TE.getLoginChallengeInfo;Ku.getLoginChallengeInfo=LIe;var BIe=TE.getRedirectURLToContinueOAuthFlow;Ku.getRedirectURLToContinueOAuthFlow=BIe;var UIe=TE.logOut;Ku.logOut=UIe;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(Ku)})(zie);var eb={},Ed=Mi,KV=Ra,$Ie=function(e){Ed.__extends(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.redirect=function(n,i,a,s){return Ed.__awaiter(r,void 0,void 0,function(){var o;return Ed.__generator(this,function(l){switch(l.label){case 0:return[4,this.getRedirectUrl(n,Ed.getNormalisedUserContext(s))];case 1:return o=l.sent(),o===null?(Ed.logDebugMessage("Skipping redirection because the user override returned null for context ".concat(JSON.stringify(n,null,2))),[2]):(o=Ed.appendQueryParamsToURL(o,a),[2,KV.SuperTokens.getInstanceOrThrow().redirectToUrl(o,i)])}})})},r.getRedirectUrl=function(n,i){return Ed.__awaiter(r,void 0,void 0,function(){var a;return Ed.__generator(this,function(s){switch(s.label){case 0:return[4,this.config.getRedirectionURL(n,i)];case 1:return a=s.sent(),a!==void 0?[2,a]:[4,this.getDefaultRedirectionURL(n,i)];case 2:return[2,s.sent()]}})})},r}return t.prototype.getDefaultRedirectionURL=function(r,n){return Ed.__awaiter(this,void 0,void 0,function(){return Ed.__generator(this,function(i){throw new Error("getDefaultRedirectionURL is not implemented.")})})},t}(KV.BaseRecipeModule);eb.RecipeModule=$Ie;var _a=Mi,zIe=zie,HIe=eb,WIe=Ra;function VIe(e){return e&&e.__esModule?e:{default:e}}var XV=VIe(zIe),qIe=function(e){return function(t){return _a.__assign(_a.__assign({},t),{getLoginChallengeInfo:function(r){return _a.__awaiter(this,void 0,void 0,function(){var n;return _a.__generator(this,function(i){switch(i.label){case 0:return[4,t.getLoginChallengeInfo(r)];case 1:return n=i.sent(),e({action:"LOADED_LOGIN_CHALLENGE",loginChallenge:r.loginChallenge,loginInfo:n.info,userContext:r.userContext}),[2,n]}})})},logOut:function(r){return _a.__awaiter(this,void 0,void 0,function(){var n;return _a.__generator(this,function(i){switch(i.label){case 0:return[4,t.logOut(r)];case 1:return n=i.sent(),e({action:"OAUTH2_LOGOUT_SUCCESS",frontendRedirectTo:n.frontendRedirectTo,userContext:r.userContext}),[2,n]}})})}})}};function GIe(e){var t;return _a.__assign(_a.__assign({},WIe.normaliseRecipeModuleConfig(e)),{disableDefaultUI:(t=e==null?void 0:e.disableDefaultUI)!==null&&t!==void 0?t:!1,tryRefreshPage:_a.__assign({disableDefaultUI:!1},e==null?void 0:e.tryRefreshPage),oauth2LogoutScreen:_a.__assign({disableDefaultUI:!1,style:""},e==null?void 0:e.oauth2LogoutScreen),override:_a.__assign({functions:function(r){return r}},e==null?void 0:e.override)})}var KIe=function(e){_a.__extends(t,e);function t(r,n){n===void 0&&(n=XV.default);var i=e.call(this,r)||this;return i.webJSRecipe=n,i.recipeID=t.RECIPE_ID,i}return t.init=function(r){var n=GIe(r);return{recipeID:t.RECIPE_ID,authReact:function(i){return t.instance=new t(_a.__assign(_a.__assign({},n),{appInfo:i,recipeId:t.RECIPE_ID})),t.instance},webJS:XV.default.init(_a.__assign(_a.__assign({},n),{override:{functions:function(i,a){var s=qIe(n.onHandleEvent);return a.override(s),a.override(n.override.functions),i}}}))}},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of OAuth2Provider found. Make sure to call the OAuth2Provider.init method.See https://supertokens.io/docs/oauth2/quick-setup/frontend";throw typeof window>"u"&&(r=r+_a.SSR_ERROR),Error(r)}return t.instance},t.getInstance=function(){return t.instance},t.prototype.getDefaultRedirectionURL=function(r){return _a.__awaiter(this,void 0,void 0,function(){return _a.__generator(this,function(n){if(r.action==="SUCCESS_OAUTH2"||r.action==="CONTINUE_OAUTH2_AFTER_REFRESH"||r.action==="POST_OAUTH2_LOGOUT_REDIRECT")return[2,r.frontendRedirectTo];throw new Error("Should never come here: unknown action in OAuth2Provider.getDefaultRedirectionURL")})})},t.reset=function(){_a.isTest()&&(t.instance=void 0)},t.RECIPE_ID="oauth2provider",t}(HIe.RecipeModule);qL.OAuth2Provider=KIe;var vn=Mi,XIe=FL,v2=Ra,YIe=qL,QIe=eb,JIe=e4,ZIe=Yy;function eOe(e){return e&&e.__esModule?e:{default:e}}var Ej=eOe(XIe);function tOe(e){var t,r,n;e===void 0&&(e={});var i=(r=(t=e.accessDeniedScreen)===null||t===void 0?void 0:t.style)!==null&&r!==void 0?r:"",a={style:i},s=vn.__assign({functions:function(o){return o}},e.override);return vn.__assign(vn.__assign({},v2.normaliseRecipeModuleConfig(e)),{invalidClaimStatusCode:(n=e.invalidClaimStatusCode)!==null&&n!==void 0?n:403,accessDeniedScreen:a,override:s})}var Vie=function(e){var t=e.invalidClaims,r=e.overrideGlobalClaimValidators,n=e.userContext;return vn.__awaiter(void 0,void 0,void 0,function(){var i,a,s,o,l,c,d;return vn.__generator(this,function(f){switch(f.label){case 0:i=JIe.getGlobalClaimValidators({overrideGlobalClaimValidators:r,userContext:n}),a=void 0,s=function(p){var m,x,v;return vn.__generator(this,function(b){switch(b.label){case 0:return m=t.find(function(w){return w.id===p.id}),m===void 0?[3,2]:(x=p.onFailureRedirection,x?[4,x({reason:m.reason,userContext:n})]:[3,2]);case 1:if(v=b.sent(),v!==void 0)return[2,{value:{redirectPath:v,failedClaim:m}}];b.label=2;case 2:return p.showAccessDeniedOnFailure!==!1&&a===void 0&&(a=m),[2]}})},o=0,l=i,f.label=1;case 1:return o<l.length?(c=l[o],[5,s(c)]):[3,4];case 2:if(d=f.sent(),typeof d=="object")return[2,d.value];f.label=3;case 3:return o++,[3,1];case 4:return[2,{redirectPath:void 0,failedClaim:a}]}})})};function qie(e){var t=ZIe.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHref(),r;try{new URL(e),r=e}catch{if(!e.startsWith("/"))throw new Error("onFailureRedirectionURL returned a relative url: ".concat(e));var n=v2.SuperTokens.getInstanceOrThrow().appInfo;r="".concat(n.websiteDomain.getAsStringDangerous()).concat(e)}return t===r}var rOe=function(e){vn.__extends(t,e);function t(r,n){n===void 0&&(n=Ej.default);var i=e.call(this,r)||this;return i.webJSRecipe=n,i.recipeID=t.RECIPE_ID,i.eventListeners=new Set,i.getUserId=function(a){return i.webJSRecipe.getUserId(a)},i.getAccessToken=function(a){return i.webJSRecipe.getAccessToken(a)},i.getClaimValue=function(a){return i.webJSRecipe.getClaimValue(a)},i.getAccessTokenPayloadSecurely=function(a){return vn.__awaiter(i,void 0,void 0,function(){return vn.__generator(this,function(s){return[2,this.webJSRecipe.getAccessTokenPayloadSecurely(a)]})})},i.doesSessionExist=function(a){return i.webJSRecipe.doesSessionExist(a)},i.signOut=function(a){return i.webJSRecipe.signOut(a)},i.attemptRefreshingSession=function(){return vn.__awaiter(i,void 0,void 0,function(){return vn.__generator(this,function(a){return[2,this.webJSRecipe.attemptRefreshingSession()]})})},i.validateClaims=function(a){return i.webJSRecipe.validateClaims(a)},i.getInvalidClaimsFromResponse=function(a){return i.webJSRecipe.getInvalidClaimsFromResponse(a)},i.addEventListener=function(a){return i.eventListeners.add(a),function(){return i.eventListeners.delete(a)}},i.validateGlobalClaimsAndHandleSuccessRedirection=function(a,s,o,l,c){return vn.__awaiter(i,void 0,void 0,function(){var d,f,p,m,x;return vn.__generator(this,function(v){switch(v.label){case 0:return l=vn.getNormalisedUserContext(l),[4,this.doesSessionExist({userContext:l})];case 1:return v.sent()?[4,this.validateClaims({userContext:l})]:[2,v2.SuperTokens.getInstanceOrThrow().redirectToAuth({navigate:c,redirectBack:!1,userContext:l})];case 2:return d=v.sent(),d.length>0?a===void 0?[3,4]:(f=JSON.stringify({successRedirectContext:a,redirectToPath:o}),[4,vn.setLocalStorage("supertokens-success-redirection-context",f)]):[3,6];case 3:v.sent(),v.label=4;case 4:return[4,Vie({invalidClaims:d,userContext:l})];case 5:if(p=v.sent(),p.redirectPath!==void 0){if(qie(p.redirectPath))throw new Error("onFailureRedirectionURL returned the current URL (".concat(p.redirectPath,") during success redirection. This indicates that the user is in a stuck state."));return[2,v2.SuperTokens.getInstanceOrThrow().redirectToUrl(p.redirectPath,c)]}v.label=6;case 6:return a!==void 0?[3,13]:[4,vn.getLocalStorage("supertokens-success-redirection-context")];case 7:if(m=v.sent(),m===null)return[3,12];v.label=8;case 8:return v.trys.push([8,,9,11]),x=JSON.parse(m),a=x.successRedirectContext,o===void 0&&(o=x.redirectToPath),[3,11];case 9:return[4,vn.removeFromLocalStorage("supertokens-success-redirection-context")];case 10:return v.sent(),[7];case 11:return[3,13];case 12:a={recipeId:s,action:"SUCCESS",createdNewUser:!1,isNewRecipeUser:!1,newSessionCreated:!1,tenantIdFromQueryParams:vn.getTenantIdFromQueryParams()},v.label=13;case 13:if(a===void 0)throw new Error("This should never happen: successRedirectContext undefined ");return a.action==="SUCCESS_OAUTH2"?[2,YIe.OAuth2Provider.getInstanceOrThrow().redirect(a,c,{},l)]:(a.action==="SUCCESS"&&o!==void 0&&(a.redirectToPath=o),[2,v2.SuperTokens.getInstanceOrThrow().redirect(a,c,{},l)])}})})},i.getDefaultRedirectionURL=function(){return vn.__awaiter(i,void 0,void 0,function(){return vn.__generator(this,function(a){return[2,"/"]})})},i.notifyListeners=function(a){return vn.__awaiter(i,void 0,void 0,function(){var s;return vn.__generator(this,function(o){switch(o.label){case 0:return[4,this.getSessionContext(a)];case 1:return s=o.sent(),Array.from(this.eventListeners).forEach(function(l){return l(vn.__assign({sessionContext:s},a))}),[2]}})})},i}return t.prototype.getSessionContext=function(r){var n=r.action,i=r.userContext;return vn.__awaiter(this,void 0,void 0,function(){var a,s,o;return vn.__generator(this,function(l){switch(l.label){case 0:return n==="SESSION_CREATED"||n==="REFRESH_SESSION"||n==="API_INVALID_CLAIM"||n==="ACCESS_TOKEN_PAYLOAD_UPDATED"?[4,Promise.all([this.getUserId({userContext:i}),this.getAccessTokenPayloadSecurely({userContext:i})])]:[3,2];case 1:return a=l.sent(),s=a[0],o=a[1],[2,{doesSessionExist:!0,accessTokenPayload:o,userId:s}];case 2:if(n==="SIGN_OUT"||n==="UNAUTHORISED")return[2,{doesSessionExist:!1,accessTokenPayload:{},userId:""}];throw new Error("Unhandled recipe event: ".concat(n))}})})},t.addAxiosInterceptors=function(r,n){return Ej.default.addAxiosInterceptors(r,n)},t.init=function(r){var n=this,i=tOe(r);return{recipeID:t.RECIPE_ID,authReact:function(a){return t.instance=new t(vn.__assign(vn.__assign({},i),{appInfo:a,recipeId:t.RECIPE_ID})),t.instance},webJS:Ej.default.init(vn.__assign(vn.__assign({},i),{onHandleEvent:function(a){i.onHandleEvent!==void 0&&i.onHandleEvent(a),t.getInstanceOrThrow().notifyListeners(a)},preAPIHook:function(a){return vn.__awaiter(n,void 0,void 0,function(){var s;return vn.__generator(this,function(o){return s=vn.__assign(vn.__assign({},a),{requestInit:vn.__assign(vn.__assign({},a.requestInit),{headers:vn.__assign(vn.__assign({},a.requestInit.headers),{rid:t.RECIPE_ID})})}),i.preAPIHook===void 0?[2,s]:[2,i.preAPIHook(a)]})})}}))}},t.getInstanceOrThrow=function(){if(t.instance===void 0)throw Error("No instance of Session found. Make sure to call the Session.init method. See https://supertokens.io/docs/emailpassword/quick-setup/frontend");return t.instance},t.getInstance=function(){return t.instance},t.reset=function(){vn.isTest()&&(t.instance=void 0)},t.RECIPE_ID="session",t}(QIe.RecipeModule),nOe={EMAILPASSWORD:"emailpassword",OTP_EMAIL:"otp-email",OTP_PHONE:"otp-phone",LINK_EMAIL:"link-email",LINK_PHONE:"link-phone",THIRDPARTY:"thirdparty",TOTP:"totp",WEBAUTHN:"webauthn"};vu.FactorIds=nOe;vu.Session=rOe;vu.getFailureRedirectionInfo=Vie;vu.validateAndCompareOnFailureRedirectionURLToCurrent=qie;var iOe=Nx,aOe=vu,Gie=iOe.createGenericComponentsOverrideContext(void 0,aOe.Session.RECIPE_ID),sOe=Gie[0],oOe=Gie[1];HL.Provider=oOe;HL.useContext=sOe;var mn={},Px={},c_=Mi,lOe=u,$m=I,cOe=Ra;function uOe(e){return e&&e.__esModule?e:{default:e}}var dOe=uOe($m),fOe=function(){throw new Error("Cannot use translation func outside TranslationContext provider.")},Kie=dOe.default.createContext({translate:fOe}),hOe=function(){return $m.useContext(Kie).translate},pOe=function(e){var t=e.children,r=e.defaultLanguage,n=e.userTranslationFunc,i=e.defaultStore,a=e.translationControlEventSource,s=$m.useState(i),o=s[0],l=s[1],c=$m.useState(void 0),d=c[0],f=c[1];$m.useEffect(function(){function m(){return c_.__awaiter(this,void 0,void 0,function(){var x,v;return c_.__generator(this,function(b){switch(b.label){case 0:return[4,cOe.getCurrentLanguageFromCookie()];case 1:return x=b.sent(),v=x===null?r:x,f(function(w){return w!==void 0?w:v}),[2]}})})}m()},[r,f]),$m.useEffect(function(){var m=function(v,b){f(b)},x=function(v,b){l(function(w){return c_.mergeObjects(w,b)})};return a.on("LanguageChange",m),a.on("TranslationLoaded",x),function(){a.off("LanguageChange",m),a.off("TranslationLoaded",x)}});var p=$m.useCallback(function(m){if(n!==void 0)return n(m);if(d!==void 0){var x=o[d]&&o[d][m],v=o[r]&&o[r][m];return x===void 0?v!==void 0?v:m:x}throw new Error("Should never come here")},[o,d,r,n]);return d===void 0?null:lOe.jsx(Kie.Provider,c_.__assign({value:{translate:p}},{children:t}))};Px.TranslationContextProvider=pOe;Px.useTranslation=hOe;var GL={},mOe=Nx,gOe=Ra,Xie=mOe.createGenericComponentsOverrideContext(void 0,gOe.Multitenancy.RECIPE_ID),xOe=Xie[0],vOe=Xie[1];GL.Provider=vOe;GL.useContext=xOe;var tb={},Yie={},Qie={},IE={},Gg={},y2=Ve&&Ve.__assign||function(){return y2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},y2.apply(this,arguments)};Object.defineProperty(Gg,"__esModule",{value:!0});Gg.checkFactorRequirement=Gg.normaliseUserInput=void 0;var yOe=Ix;function bOe(e){var t=y2({functions:function(r){return r}},e.override);return y2(y2({},(0,yOe.normaliseAuthRecipe)(e)),{override:t})}Gg.normaliseUserInput=bOe;function wOe(e,t){return{id:e,isValid:t[e]!==void 0,message:"Not completed"}}Gg.checkFactorRequirement=wOe;var YV=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},QV=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(IE,"__esModule",{value:!0});IE.MultiFactorAuthClaimClass=void 0;var Cj=Gg,SOe=function(){function e(t){var r=this;this.getRecipeImpl=t,this.id="st-mfa",this.validators={hasCompletedMFARequirementsForAuth:function(){return{id:r.id,refresh:function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return r.refresh.apply(r,n)},shouldRefresh:function(n,i){var a=r.getValueFromPayload(n,i);return a===void 0},validate:function(n,i){return YV(r,void 0,void 0,function(){var a;return QV(this,function(s){return a=this.getValueFromPayload(n,i),a===void 0?[2,{isValid:!1,reason:{message:"MFA info not available in payload"}}]:a.v?[2,{isValid:!0}]:[2,{isValid:!1,reason:{message:"not all required factors have been completed"}}]})})}}},hasCompletedFactors:function(n){return{id:r.id,shouldRefresh:function(i,a){var s=r.getValueFromPayload(i,a);return s===void 0},refresh:function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return r.refresh.apply(r,i)},validate:function(i,a){var s=r.getValueFromPayload(i,a);if(s===void 0)return{isValid:!1,reason:{message:"MFA info not available in payload"}};for(var o=s.c,l=0,c=n;l<c.length;l++){var d=c[l];if(typeof d=="object"&&"oneOf"in d){var f=d.oneOf.map(function(p){return(0,Cj.checkFactorRequirement)(p,o)}).filter(function(p){return p.isValid===!1});if(f.length===d.oneOf.length)return{isValid:!1,reason:{message:"All factor checkers failed in the list",oneOf:d.oneOf,failures:f}}}else if(typeof d=="object"&&"allOfInAnyOrder"in d){var f=d.allOfInAnyOrder.map(function(m){return(0,Cj.checkFactorRequirement)(m,o)}).filter(function(m){return m.isValid===!1});if(f.length!==0)return{isValid:!1,reason:{message:"Some factor checkers failed in the list",allOfInAnyOrder:d.allOfInAnyOrder,failures:f}}}else{var f=(0,Cj.checkFactorRequirement)(d,o);if(f.isValid!==!0)return{isValid:!1,reason:{message:"Factor validation failed: "+f.message,factorId:f.id}}}}return{isValid:!0}}}}}}return e.prototype.refresh=function(t){return YV(this,void 0,void 0,function(){return QV(this,function(r){switch(r.label){case 0:return[4,this.getRecipeImpl().resyncSessionAndFetchMFAInfo(t)];case 1:return r.sent(),[2]}})})},e.prototype.getValueFromPayload=function(t,r){if(t[this.id]!==void 0)return{c:t[this.id].c,v:t[this.id].v}},e.prototype.getLastFetchedTime=function(t,r){var n;return(n=t[this.id])===null||n===void 0?void 0:n.t},e}();IE.MultiFactorAuthClaimClass=SOe;var OE={},PE={},FA=Ve&&Ve.__assign||function(){return FA=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},FA.apply(this,arguments)},EOe=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},COe=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(PE,"__esModule",{value:!0});PE.getRecipeImplementation=void 0;var kj=Ox;function Jie(e){var t=new kj.default(e.recipeId,e.appInfo);return{resyncSessionAndFetchMFAInfo:function(r){var n=r.options,i=r.userContext;return EOe(this,void 0,void 0,function(){var a,s,o;return COe(this,function(l){switch(l.label){case 0:return[4,t.put("/mfa/info",{},kj.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"GET_MFA_INFO",options:n,userContext:i}),kj.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"GET_MFA_INFO",userContext:i}))];case 1:return a=l.sent(),s=a.jsonBody,o=a.fetchResponse,[2,FA(FA({},s),{fetchResponse:o})]}})})}}}PE.default=Jie;PE.getRecipeImplementation=Jie;var KL={};(function(e){function t(n){for(var i in n)e.hasOwnProperty(i)||(e[i]=n[i])}e.__esModule=!0;let r=_x;r.default!==void 0?t(r):t({default:r,...r})})(KL);var kOe=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),LA=Ve&&Ve.__assign||function(){return LA=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},LA.apply(this,arguments)};Object.defineProperty(OE,"__esModule",{value:!0});OE.Recipe=void 0;var _Oe=Gg,NOe=pf,AOe=PE,_j=Br,TOe=Zy,IOe=Ax,OOe=KL,POe=IE,Zie=function(e){kOe(t,e);function t(r){var n=e.call(this,(0,_Oe.normaliseUserInput)(r))||this,i=new NOe.default((0,AOe.default)({recipeId:n.config.recipeId,appInfo:n.config.appInfo,clientType:n.config.clientType,preAPIHook:n.config.preAPIHook,postAPIHook:n.config.postAPIHook}));return n.recipeImplementation=i.override(n.config.override.functions).build(),IOe.PostSuperTokensInitCallbacks.addPostInitCallback(function(){OOe.SessionClaimValidatorStore.addClaimValidatorFromOtherRecipe(t.MultiFactorAuthClaim.validators.hasCompletedMFARequirementsForAuth())}),n}return t.init=function(r){return function(n,i,a,s){return t.instance=new t(LA(LA({},(0,_j.applyPlugins)(t.RECIPE_ID,r,s??[])),{recipeId:t.RECIPE_ID,appInfo:n,clientType:i})),t.instance}},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of MultiFactorAuth found. Make sure to call the MultiFactorAuth.init method.";throw r=(0,_j.checkForSSRErrorAndAppendIfNeeded)(r),Error(r)}return t.instance},t.reset=function(){(0,_j.isTest)()&&(t.instance=void 0)},t.RECIPE_ID="multifactorauth",t.MultiFactorAuthClaim=new POe.MultiFactorAuthClaimClass(function(){return t.getInstanceOrThrow().recipeImplementation}),t}(TOe.default);OE.Recipe=Zie;OE.default=Zie;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MultiFactorAuthClaimClass=e.MultiFactorAuthClaim=e.resyncSessionAndFetchMFAInfo=e.init=void 0;var t=IE;Object.defineProperty(e,"MultiFactorAuthClaimClass",{enumerable:!0,get:function(){return t.MultiFactorAuthClaimClass}});var r=OE,n=Br,i=function(){function l(){}return l.init=function(c){return r.default.init(c)},l.resyncSessionAndFetchMFAInfo=function(c){var d;return r.default.getInstanceOrThrow().recipeImplementation.resyncSessionAndFetchMFAInfo({options:(d=c==null?void 0:c.options)!==null&&d!==void 0?d:{},userContext:(0,n.getNormalisedUserContext)(c==null?void 0:c.userContext)})},l.MultiFactorAuthClaim=r.default.MultiFactorAuthClaim,l}();e.default=i;var a=i.init;e.init=a;var s=i.resyncSessionAndFetchMFAInfo;e.resyncSessionAndFetchMFAInfo=s;var o=i.MultiFactorAuthClaim;e.MultiFactorAuthClaim=o})(Qie);(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(Qie)})(Yie);var XL={},YL={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SessionClaimValidatorStore=void 0;var t=KL;Object.defineProperty(e,"SessionClaimValidatorStore",{enumerable:!0,get:function(){return t.SessionClaimValidatorStore}})})(YL);(function(e){function t(n){for(var i in n)e.hasOwnProperty(i)||(e[i]=n[i])}e.__esModule=!0;let r=YL;r.default!==void 0?t(r):t({default:r,...r})})(XL);var or=Mi,eae=Yie,JV=e4,ROe=ZO,jOe=XL,tae=Yy,O6=Ra,DOe=eb,MOe=vu;function FOe(e){return e&&e.__esModule?e:{default:e}}var ZV=FOe(eae),rae="/mfa",RN="st-mfa-info-cache",xw=void 0,LOe=function(e){return function(t){return or.__assign(or.__assign({},t),{resyncSessionAndFetchMFAInfo:function(r){return or.__awaiter(this,void 0,void 0,function(){var n,i,o,a,s,o,l;return or.__generator(this,function(c){switch(c.label){case 0:return n=tae.WindowHandlerReference.getReferenceOrThrow(),[4,xw];case 1:return c.sent(),[4,n.windowHandler.sessionStorage.getItem(RN)];case 2:if(i=c.sent(),i!==null&&(o=JSON.parse(i),o.t>Date.now()-1e3))return[2,or.__assign(or.__assign({},o.v),{fetchResponse:new Response(null,{status:304})})];c.label=3;case 3:return xw===void 0?[3,5]:[4,xw];case 4:return c.sent(),[3,3];case 5:xw=new Promise(function(d){return a=d}),c.label=6;case 6:return c.trys.push([6,,11,12]),[4,n.windowHandler.sessionStorage.getItem(RN)];case 7:return s=c.sent(),s!==null&&(o=JSON.parse(s),o.t>Date.now()-1e3)?[2,or.__assign(or.__assign({},o.v),{fetchResponse:new Response(null,{status:304})})]:[4,t.resyncSessionAndFetchMFAInfo(r)];case 8:return l=c.sent(),l.status!=="OK"?[3,10]:[4,n.windowHandler.sessionStorage.setItem(RN,JSON.stringify({t:Date.now(),v:{emails:l.emails,phoneNumbers:l.phoneNumbers,factors:l.factors,status:l.status}}))];case 9:c.sent(),c.label=10;case 10:return[2,l];case 11:return xw=void 0,a(),[7];case 12:return[2]}})})}})}},BOe=function(){function e(t,r,n){var i=this;this.webJSClaim=new eae.MultiFactorAuthClaimClass(function(){return t().webJSRecipe}),this.refresh=this.webJSClaim.refresh,this.getLastFetchedTime=this.webJSClaim.getLastFetchedTime,this.getValueFromPayload=this.webJSClaim.getValueFromPayload,this.id=this.webJSClaim.id;var a=function(s){var o=s.reason,l=s.userContext;return or.__awaiter(i,void 0,void 0,function(){var c,d,p,f,p;return or.__generator(this,function(m){switch(m.label){case 0:return c=t(),d=o.oneOf||o.allOfInAnyOrder||(o.factorId!==void 0?[o.factorId]:void 0),d===void 0?[3,1]:(or.logDebugMessage("Redirecting to MFA on next array from validation failure: "+d.join(", ")),p=c.getSecondaryFactors(l).filter(function(x){return d.factors.next.includes(x.id)}).map(function(x){return x.id}),p.length===1?[2,r({action:"GO_TO_FACTOR",factorId:p[0]},l)]:[2,r({action:"FACTOR_CHOOSER",nextFactorOptions:d},l)]);case 1:return[4,c.webJSRecipe.resyncSessionAndFetchMFAInfo({userContext:l})];case 2:return f=m.sent(),p=c.getSecondaryFactors(l).filter(function(x){return f.factors.next.includes(x.id)}).map(function(x){return x.id}),or.logDebugMessage("Redirecting to MFA on next array from backend: "+p.join(", ")),p.length===1?[2,r({action:"GO_TO_FACTOR",factorId:p[0]},l)]:[2,r({action:"FACTOR_CHOOSER"},l)];case 3:return[2,void 0]}})})};this.validators=or.__assign(or.__assign({},this.webJSClaim.validators),{hasCompletedMFARequirementsForAuth:function(s,o){s===void 0&&(s=!0),o===void 0&&(o=!0);var l=i.webJSClaim.validators.hasCompletedMFARequirementsForAuth();return or.__assign(or.__assign({},l),{showAccessDeniedOnFailure:o,onFailureRedirection:n??function(c){var d=c.reason,f=c.userContext;return s?a({reason:d,userContext:f}):void 0}})},hasCompletedFactors:function(s,o,l){o===void 0&&(o=!0),l===void 0&&(l=!0);var c=i.webJSClaim.validators.hasCompletedFactors(s);return or.__assign(or.__assign({},c),{showAccessDeniedOnFailure:l,onFailureRedirection:n??function(d){var f=d.reason,p=d.userContext;return o?a({reason:f,userContext:p}):void 0}})}})}return e}();function UOe(e){var t;e===void 0&&(e={});var r=e.disableDefaultUI===!0,n=or.__assign({functions:function(i){return i}},e.override);return or.__assign(or.__assign({},O6.normaliseRecipeModuleConfig(e)),{disableDefaultUI:r,firstFactors:e==null?void 0:e.firstFactors,getSecondaryFactorInfo:function(i){return i},factorChooserScreen:(t=e.factorChooserScreen)!==null&&t!==void 0?t:{},override:n})}function $Oe(e,t,r,n){or.logDebugMessage("getAvailableFactors: allowed to setup: ".concat(e.allowedToSetup)),or.logDebugMessage("getAvailableFactors: already setup: ".concat(e.alreadySetup)),or.logDebugMessage("getAvailableFactors: next from factorInfo: ".concat(e.next)),or.logDebugMessage("getAvailableFactors: nextArrayQueryParam: ".concat(t)),or.logDebugMessage("getAvailableFactors: secondary factors: ".concat(r.getSecondaryFactors(n).map(function(s){return s.id})));var i=t!==void 0?t.split(","):e.next,a=r.getSecondaryFactors(n).filter(function(s){var o=s.id;return i.length===0?e.allowedToSetup.includes(o)||e.alreadySetup.includes(o):i.includes(o)});return a}var zOe=function(e){or.__extends(t,e);function t(n,i){i===void 0&&(i=ZV.default);var a=e.call(this,n)||this;return a.webJSRecipe=i,a.recipeID=t.RECIPE_ID,a.secondaryFactors=[],a.getDefaultRedirectionURL=function(s,o){return or.__awaiter(a,void 0,void 0,function(){var l,c;return or.__generator(this,function(d){if(s.action==="FACTOR_CHOOSER")return l=s.nextFactorOptions&&s.nextFactorOptions.length>0?s.nextFactorOptions.join(","):void 0,[2,or.getDefaultRedirectionURLForPath(this.config,rae,s,{n:l,stepUp:s.stepUp?"true":void 0})];if(s.action==="GO_TO_FACTOR"){if(c=this.getSecondaryFactors(o).find(function(f){return f.id===s.factorId}),c!==void 0)return[2,or.getDefaultRedirectionURLForPath(this.config,c.path,s,{setup:s.forceSetup?"true":void 0,stepUp:s.stepUp?"true":void 0})];throw new Error("Requested redirect to unknown factor id: "+s.factorId)}else return[2,"/"]})})},ROe.PostSuperTokensInitCallbacks.addPostInitCallback(function(){var s=t.MultiFactorAuthClaim.validators.hasCompletedMFARequirementsForAuth();jOe.SessionClaimValidatorStore.addClaimValidatorFromOtherRecipe(s),MOe.Session.getInstanceOrThrow().addEventListener(function(){var o=tae.WindowHandlerReference.getReferenceOrThrow();o.windowHandler.sessionStorage.removeItemSync(RN)})}),a}t.init=function(n){var i=UOe(n);return{recipeID:t.RECIPE_ID,authReact:function(a){return t.instance=new t(or.__assign(or.__assign({},i),{appInfo:a,recipeId:t.RECIPE_ID})),t.instance},webJS:ZV.default.init(or.__assign(or.__assign({},i),{override:{functions:function(a,s){var o=LOe(i.onHandleEvent);return s.override(o),s.override(i.override.functions),a}}}))}},t.getInstance=function(){return t.instance},t.getInstanceOrThrow=function(){if(t.instance===void 0){var n="No instance of MultiFactorAuth found. Make sure to call the MultiFactorAuth.init method.";throw typeof window>"u"&&(n=n+or.SSR_ERROR),Error(n)}return t.instance},t.prototype.addMFAFactors=function(n){this.secondaryFactors=or.__spreadArray(or.__spreadArray([],this.secondaryFactors.filter(function(i){return n.every(function(a){return i.id!==a.id})}),!0),n,!0)},t.prototype.isFirstFactorEnabledOnClient=function(n){return this.config.firstFactors===void 0||this.config.firstFactors.includes(n)},t.prototype.getSecondaryFactors=function(n){return this.config.getSecondaryFactorInfo(this.secondaryFactors,n)},t.prototype.redirectToFactor=function(n){var i=n.factorId,a=n.forceSetup,s=n.stepUp,o=n.redirectBack,l=n.navigate,c=n.userContext;return or.__awaiter(this,void 0,void 0,function(){var d,f,f;return or.__generator(this,function(p){switch(p.label){case 0:return[4,this.getRedirectUrl({action:"GO_TO_FACTOR",forceSetup:a,stepUp:s,factorId:i,tenantIdFromQueryParams:or.getTenantIdFromQueryParams()},JV.getNormalisedUserContext(c))];case 1:return d=p.sent(),d===null?[2]:(o?(f=or.getCurrentNormalisedUrlPathWithQueryParamsAndFragments(),d=or.appendQueryParamsToURL(d,{redirectToPath:f})):(f=or.getRedirectToPathFromURL(),f&&(d=or.appendQueryParamsToURL(d,{redirectToPath:f}))),[2,O6.SuperTokens.getInstanceOrThrow().redirectToUrl(d,l)])}})})},t.prototype.redirectToFactorChooser=function(n){var i=n.redirectBack,a=i===void 0?!1:i,s=n.nextFactorOptions,o=s===void 0?[]:s,l=n.stepUp,c=n.navigate,d=n.userContext;return or.__awaiter(this,void 0,void 0,function(){var f,p,p;return or.__generator(this,function(m){switch(m.label){case 0:return[4,this.getRedirectUrl({action:"FACTOR_CHOOSER",nextFactorOptions:o,stepUp:l,tenantIdFromQueryParams:or.getTenantIdFromQueryParams()},JV.getNormalisedUserContext(d))];case 1:return f=m.sent(),f===null?[2]:(a?(p=or.getCurrentNormalisedUrlPathWithQueryParamsAndFragments(),f=or.appendQueryParamsToURL(f,{redirectToPath:p})):(p=or.getRedirectToPathFromURL(),p&&(f=or.appendQueryParamsToURL(f,{redirectToPath:p}))),[2,O6.SuperTokens.getInstanceOrThrow().redirectToUrl(f,c)])}})})},t.reset=function(){or.isTest()&&(t.instance=void 0)};var r;return r=t,t.RECIPE_ID="multifactorauth",t.MultiFactorAuthClaim=new BOe(function(){return t.getInstanceOrThrow()},function(n,i){return or.__awaiter(void 0,void 0,void 0,function(){return or.__generator(r,function(a){switch(a.label){case 0:return[4,this.getInstanceOrThrow().getRedirectUrl(or.__assign(or.__assign({},n),{tenantIdFromQueryParams:or.getTenantIdFromQueryParams()}),i)];case 1:return[2,a.sent()||void 0]}})})}),t}(DOe.RecipeModule);tb.DEFAULT_FACTOR_CHOOSER_PATH=rae;tb.MultiFactorAuth=zOe;tb.getAvailableFactors=$Oe;var r4={},HOe=Mi,WOe=Ra;function VOe(e){return WOe.normaliseRecipeModuleConfig(e)}function nae(e,t){if(t.length!==0)for(var r=function(a){var s=e[a],o=t.filter(function(d){return!s.factorIds.includes(d)});if(o.length===0)return{value:[s]};var l=e.filter(function(d){return d.factorIds.every(function(f){return o.includes(f)})});if(l.length!==0){var c=nae(l,o);if(c!==void 0)return{value:HOe.__spreadArray([s],c,!0)}}},n=0;n<e.length;++n){var i=r(n);if(typeof i=="object")return i.value}}r4.normaliseAuthRecipe=VOe;r4.selectComponentsToCoverAllFirstFactors=nae;var ft=Mi,Et=u,Yr=I,Jr=Ra,qOe=zO,G0=Px,GOe=Yy,KOe=Tl,XOe=GL,jN=tb,Nn=vu,u_=qL,YOe=Nx,QOe=r4,JOe=Xy;function QL(e){return e&&e.__esModule?e:{default:e}}var tc=QL(Yr),ZOe=QL(qOe),iae=QL(JOe),n4=tc.default.createContext("IS_DEFAULT");function aae(){return Et.jsx("svg",ft.__assign({version:"1.1",viewBox:"25 25 50 50","data-supertokens":"spinnerIcon"},{children:Et.jsxs("circle",ft.__assign({cx:"50",cy:"50",r:"20",fill:"none",stroke:"rgb(var(--palette-primary))",strokeWidth:"5",strokeLinecap:"round",strokeDashoffset:"0",strokeDasharray:"100, 200"},{children:[Et.jsx("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"4s",repeatCount:"indefinite"}),Et.jsx("animate",{attributeName:"stroke-dashoffset",values:"0;-30;-124",dur:"2s",repeatCount:"indefinite"}),Et.jsx("animate",{attributeName:"stroke-dasharray",values:"0,200;110,200;110,200",dur:"2s",repeatCount:"indefinite"})]}))}))}var e4e=function(e){var t=Yr.useContext(n4);if(t==="IS_DEFAULT")throw new Error("Cannot use component override outside ComponentOverrideContext provider.");var r=t[e];return r===void 0?null:r},RE=function(e,t){var r=e+"_Override";return t.displayName=r,function(n){var i=e4e(r);return i!==null?Et.jsx(i,ft.__assign({DefaultComponent:t},n)):Et.jsx(t,ft.__assign({},n))}},t4e=`[data-supertokens~="container"] {
    --palette-background: 255, 255, 255;
    --palette-inputBackground: 250, 250, 250;
    --palette-inputBorder: 224, 224, 224;
    --palette-primary: 28, 34, 42;
    --palette-primaryBorder: 45, 54, 68;
    --palette-success: 65, 167, 0;
    --palette-successBackground: 217, 255, 191;
    --palette-error: 255, 23, 23;
    --palette-errorBackground: 255, 241, 235;
    --palette-textTitle: 0, 0, 0;
    --palette-textLabel: 0, 0, 0;
    --palette-textInput: 0, 0, 0;
    --palette-textPrimary: 128, 128, 128;
    --palette-textLink: 0, 122, 255;
    --palette-buttonText: 255, 255, 255;
    --palette-textGray: 54, 54, 54;
    --palette-superTokensBrandingBackground: 242, 245, 246;
    --palette-superTokensBrandingText: 173, 189, 196;
    --palette-buttonGreyedOut: 221, 221, 221;
    --palette-caution: 124, 96, 62;
    --palette-errorDark: 207, 54, 68;

    --font-size-0: 12px;
    --font-size-1: 14px;
    --font-size-2: 16px;
    --font-size-3: 19px;
    --font-size-4: 24px;
    --font-size-5: 28px;
}
/*
 * Default styles.
 */
@keyframes slideTop {
    0% {
        transform: translateY(-5px);
    }
    100% {
        transform: translateY(0px);
    }
}
@keyframes swing-in-top-fwd {
    0% {
        transform: rotateX(-100deg);
        transform-origin: top;
        opacity: 0;
    }
    100% {
        transform: rotateX(0deg);
        transform-origin: top;
        opacity: 1;
    }
}
[data-supertokens~="container"] {
    font-family: "Arial", sans-serif;
    margin: 12px auto;
    margin-top: 26px;
    margin-bottom: 26px;
    width: 420px;
    text-align: center;
    border-radius: 8px;
    box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.16);
    background-color: rgb(var(--palette-background));
}
@media (max-width: 440px) {
    [data-supertokens~="container"] {
        width: 95vw;
    }
}
[data-supertokens~="row"] {
    margin: 0 auto;
    width: 76%;
    padding-top: 30px;
    padding-bottom: 10px;
}
[data-supertokens~="superTokensBranding"] {
    display: block;
    margin: 10px auto 0;
    background: rgb(var(--palette-superTokensBrandingBackground));
    color: rgb(var(--palette-superTokensBrandingText));
    text-decoration: none;
    width: -webkit-fit-content;
    width: -moz-fit-content;
    width: fit-content;
    border-radius: 6px 6px 0 0;
    padding: 4px 9px;
    font-weight: 400;
    font-size: var(--font-size-0);
    letter-spacing: 0.4px;
}
[data-supertokens~="generalError"] {
    background: rgb(var(--palette-errorBackground));
    padding-top: 10px;
    padding-bottom: 10px;
    margin-bottom: 10px;
    margin-top: 24px;
    padding-left: 18px;
    padding-right: 18px;
    letter-spacing: 0.2px;
    font-size: var(--font-size-1);
    border-radius: 8px;
    color: rgb(var(--palette-error));
    animation: swing-in-top-fwd 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
    word-wrap: break-word;
}
[data-supertokens~="headerTitle"] {
    font-size: var(--font-size-4);
    line-height: 27.6px;
    letter-spacing: 0.58px;
    font-weight: 700;
    margin-bottom: 20px;
    color: rgb(var(--palette-textTitle));
}
[data-supertokens~="headerSubtitle"] {
    font-weight: 400;
    color: rgb(var(--palette-textGray));
    margin-bottom: 21px;
}
[data-supertokens~="headerSubtitle"][data-supertokens~="secondaryText"] {
    color: rgb(var(--palette-textGray));
    font-weight: 400;
}
[data-supertokens~="privacyPolicyAndTermsAndConditions"] {
    max-width: 300px;
    margin-top: 10px;
}
[data-supertokens~="privacyPolicyAndTermsAndConditions"] a {
    line-height: 21px;
}
/* TODO: split the link style into separate things*/
/* We add this before primary and secondary text, because if they are applied to the same element the other ones take priority */
[data-supertokens~="link"] {
    padding-left: 3px;
    padding-right: 3px;
    color: rgb(var(--palette-textLink));
    font-size: var(--font-size-1);
    cursor: pointer;
    letter-spacing: 0.16px;
    line-height: 26px;
}
[data-supertokens~="primaryText"] {
    font-size: var(--font-size-2);
    font-weight: 400;
    letter-spacing: 0.4px;
    line-height: 21px;
    color: rgb(var(--palette-textLabel));
}
[data-supertokens~="secondaryText"] {
    font-size: var(--font-size-1);
    font-weight: 400;
    letter-spacing: 0.4px;
    color: rgb(var(--palette-textPrimary));
}
[data-supertokens~="secondaryText"] strong {
    font-weight: 600;
}
[data-supertokens~="divider"] {
    margin-top: 1.5em;
    margin-bottom: 1.5em;
    border-bottom: 0.3px solid #dddddd;
    align-items: center;
    padding-bottom: 5px;
    flex: 3 3;
}
[data-supertokens~="headerTinyTitle"] {
    margin-top: 24px;
    font-size: var(--font-size-5);
    letter-spacing: 1.1px;
    font-weight: 700;
    line-height: 28px;
}
[data-supertokens~="secondaryLinkWithArrow"] {
    margin-top: 10px;
    margin-bottom: 30px;
    cursor: pointer;
}
[data-supertokens~="secondaryLinkWithArrow"]:hover {
    position: relative;
    left: 2px;
    word-spacing: 4px;
}
[data-supertokens~="generalSuccess"] {
    color: rgb(var(--palette-success));
    font-size: var(--font-size-1);
    background: rgb(var(--palette-successBackground));
    animation: swing-in-top-fwd 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
    padding: 9px 15px 9px 15px;
    border-radius: 6px;
    display: inline-block;
}
[data-supertokens~="spinner"] {
    width: 80px;
    height: auto;
    padding-top: 20px;
    padding-bottom: 40px;
    margin: 0 auto;
}
[data-supertokens~="error"] {
    color: rgb(var(--palette-error));
}
[data-supertokens~="linkButton"] {
    font-family: "Arial", sans-serif;
    background-color: transparent;
    border: 0;
}
[data-supertokens~="secondaryLinkWithLeftArrow"] {
    color: rgb(var(--palette-textGray));
    font-weight: 400;
    margin-top: 10px;
    margin-bottom: 40px;
    cursor: pointer;
}
[data-supertokens~="secondaryLinkWithLeftArrow"] svg {
    margin-right: 0.3em;
}
[data-supertokens~="secondaryLinkWithLeftArrow"]:hover svg {
    position: relative;
    left: -4px;
}
[data-supertokens~="button"] {
    font-family: "Arial", sans-serif;
    background-color: rgb(var(--palette-primary));
    color: rgb(var(--palette-buttonText));
    width: 100%;
    height: 34px;
    font-weight: 600;
    border-width: 1px;
    border-style: solid;
    border-radius: 6px;
    border-color: rgb(var(--palette-primaryBorder));
    background-position: center;
    transition: all 0.4s;
    background-size: 12000%;
    cursor: pointer;
}
[data-supertokens~="buttonGreyedOut"] {
    background-color: rgb(var(--palette-buttonGreyedOut));
    border-color: rgb(var(--palette-buttonGreyedOut));
}
[data-supertokens~="buttonWithIcon"] {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}
[data-supertokens~="button"]:disabled {
    border: none;
    cursor: no-drop;
}
[data-supertokens~="button"]:active {
    outline: none;
    transition: all 0s;
    background-size: 100%;
    filter: brightness(0.85);
}
[data-supertokens~="button"]:focus {
    outline: none;
}
[data-supertokens~="backButtonCommon"] {
    width: 16px;
    height: 13px;
}
[data-supertokens~="backButton"] {
    cursor: pointer;
    border: none;
    background-color: transparent;
    padding: 0px;
}
[data-supertokens~="backButtonPlaceholder"] {
    display: block;
}
[data-supertokens~="delayedRender"] {
    animation-duration: 0.1s;
    animation-name: animate-fade;
    animation-delay: 0.2s;
    animation-fill-mode: backwards;
}
@keyframes animate-fade {
    0% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}
[data-supertokens~="footerLinkGroupVert"] {
    display: flex;
    flex-direction: column;
    margin-top: 10px;
    gap: 24px;
}
[data-supertokens~="footerLinkGroupVert"] > div {
    cursor: pointer;
    margin: 0;
}
[data-supertokens~="footerLinkGroupVert"] [data-supertokens~="secondaryText"] {
    font-weight: 400;
}
[data-supertokens~="footerLinkGroupVert"] [data-supertokens~="secondaryLinkWithLeftArrow"] {
    font-weight: 400;
    position: relative;
    left: -6px; /* half the width of the left arrow */
}
@media (max-width: 360px) {
    [data-supertokens~="footerLinkGroupVert"] {
        flex-direction: column;
    }
    [data-supertokens~="footerLinkGroupVert"] > div {
        margin: 0 auto;
    }
}
[data-supertokens~="footerLinkGroupVert"] div:only-child {
    margin-left: auto;
    margin-right: auto;
    margin-top: 14px;
}
[data-supertokens~="withBackButton"] {
    position: relative;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
[data-supertokens~="dividerWithOr"] {
    padding-top: 5px;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    color: rgb(var(--palette-textPrimary));
}
[data-supertokens~="dividerText"] {
    flex: 1 1;
    font-weight: 400;
    font-size: var(--font-size-1);
}
[data-supertokens~="formLabelWithLinkWrapper"] {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
[data-supertokens~="formLabelLinkBtn"] {
    width: auto;
    margin-top: 0;
    line-height: 24px;
    font-size: var(--font-size-0);
}
[data-supertokens~="formLabelLinkBtn"]:hover {
    text-decoration: underline;
}
[data-supertokens~="formLabelLinkBtn"]:disabled {
    color: rgb(var(--palette-textPrimary));
    cursor: default;
    text-decoration: none;
}
[data-supertokens~="authComponentList"] {
    padding-bottom: 20px;
}
[data-supertokens~="authPageTitleOAuthClient"] {
    color: rgb(var(--palette-textGray));
    font-size: var(--font-size-1);
    font-weight: 400;
    margin: 10px 0 25px;
}
[data-supertokens~="authPageTitleOAuthClientUrl"] {
    text-decoration: none;
}
[data-supertokens~="authPageTitleOAuthClientLogo"] {
    width: 44px;
    height: 44px;
    margin-bottom: 10px;
}
[data-supertokens~="authPageTitleOAuthClient"] [data-supertokens~="authPageTitleOAuthClientName"] {
    color: rgb(var(--palette-textTitle));
}
[data-supertokens~="buttonWithArrow"] {
    border-radius: 6px;
    border: 1px solid #d0d5dd;
    width: 100%;
    color: rgb(var(--palette-textGray));
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 5px;
    margin: 24px 0;
    min-height: 48px;
    cursor: pointer;
}
[data-supertokens~="buttonWithArrow"]:hover {
    background-color: rgb(var(--palette-inputBackground));
}
[data-supertokens~="buttonWithArrow"] [data-supertokens~="secondaryText"] {
    font-weight: 700;
    font-size: var(--font-size-2);
    color: rgb(var(--palette-textGray));
    margin: 0;
}
[data-supertokens~="buttonWithArrow"]:hover [data-supertokens~="secondaryLinkWithRightArrow"] ~ svg {
    position: relative;
    left: 2px;
}
[data-supertokens~="buttonWithArrow"]:hover [data-supertokens~="secondaryLinkWithLeftArrow"] svg {
    position: relative;
    left: -2px;
}
[data-supertokens~="buttonWithArrow"] [data-supertokens~="secondaryLinkWithLeftArrow"] {
    display: flex;
    align-items: center;
}
`,r4e=function(e){var t=e.children,r=e.userStyles;return Et.jsxs(Yr.Fragment,{children:[t,Et.jsxs("style",{children:[t4e,r.join(`
`)]})]})},n4e=function(){return Et.jsx("div",ft.__assign({"data-supertokens":"container delayedRender"},{children:Et.jsx("div",ft.__assign({"data-supertokens":"row"},{children:Et.jsx("div",ft.__assign({"data-supertokens":"spinner delayedRender"},{children:Et.jsx(aae,{})}))}))}))},i4e=RE("MultitenancyDynamicLoginMethodsSpinnerTheme",n4e),a4e=function(e){var t=Jr.SuperTokens.getInstanceOrThrow().rootStyle;return Et.jsx(r4e,ft.__assign({userStyles:[t,e.config.recipeRootStyle]},{children:Et.jsx(i4e,{})}))},i4=function(){var e=Jr.Multitenancy.getInstanceOrThrow(),t=XOe.useContext();return Et.jsx(n4.Provider,ft.__assign({value:t},{children:Et.jsx(JL,ft.__assign({useShadowDom:Jr.SuperTokens.getInstanceOrThrow().useShadowDom},{children:Et.jsx(a4e,{config:e.config})}))}))},sae=tc.default.createContext(void 0),s4e=function(){var e=tc.default.useContext(sae);if(e===void 0)throw new Error("useDynamicLoginMethods used outside of a valid provider (FeatureWrapper)");return e},oae=function(e){var t=e.value,r=e.children,n=t===void 0?{loaded:!1}:{loaded:!0,loginMethods:t};return Et.jsx(sae.Provider,ft.__assign({value:n},{children:r}))},a4=tc.default.createContext(void 0),rb=function(){return tc.default.useContext(a4)},P6=function(e){var t=e.children,r=e.userContext,n=Yr.useState(ft.getNormalisedUserContext(r))[0];return Et.jsx(a4.Provider,ft.__assign({value:n},{children:t}))};function o4e(e){var t=e.children,r=e.useShadowDom,n=e.defaultStore,i=rb(),a=ft.useRethrowInRender(),s=Yr.useState(void 0),o=s[0],l=s[1],c=Jr.SuperTokens.getInstanceOrThrow();return Yr.useEffect(function(){o||Jr.Multitenancy.getInstanceOrThrow().getCurrentDynamicLoginMethods({userContext:i}).then(function(d){return l(d)},function(d){return a(d)})},[o,l]),Jr.SuperTokens.usesDynamicLoginMethods&&!o?Et.jsx(i4,{}):Et.jsx(oae,ft.__assign({value:o},{children:Et.jsx(G0.TranslationContextProvider,ft.__assign({defaultLanguage:c.languageTranslations.defaultLanguage,defaultStore:ft.mergeObjects(n,c.languageTranslations.userTranslationStore),translationControlEventSource:c.languageTranslations.translationEventSource,userTranslationFunc:c.languageTranslations.userTranslationFunc},{children:Et.jsx(JL,ft.__assign({useShadowDom:r},{children:t}))}))}))}function l4e(e){var t=e.children,r=Yr.useRef(null),n=Yr.useState(),i=n[0],a=n[1];return Yr.useEffect(function(){r.current&&a(function(s){return s||r.current.shadowRoot||r.current.attachShadow({mode:"open",delegatesFocus:!1})})},[r]),Et.jsx("div",ft.__assign({id:ft.ST_ROOT_ID,ref:r},{children:i&&KOe.createPortal(t,i)}))}function JL(e){var t=e.children,r=e.useShadowDom;return r===!1?Et.jsxs("div",ft.__assign({id:ft.ST_ROOT_ID},{children:[t,Et.jsx(eq,{})]})):Et.jsxs(l4e,{children:[t,Et.jsx(eq,{})]})}function eq(){return Et.jsx("style",ft.__assign({type:"text/css"},{children:"input.supertokens-input:-webkit-autofill,input.supertokens-input:-webkit-autofill:focus,input.supertokens-input:-webkit-autofill:hover,select:-webkit-autofill,select:-webkit-autofill:focus,select:-webkit-autofill:hover,textarea:-webkit-autofill,textarea:-webkit-autofill:focus,textarea:-webkit-autofill:hover{transition:background-color 5000s ease-in-out 0s}"}))}var ZL=tc.default.createContext({loading:!0,isDefault:!0}),lae=function(){var e=tc.default.useContext(ZL);if(e.isDefault===!0)throw new Error("Cannot use useSessionContext outside auth wrapper components.");return e},cae=YOe.createGenericComponentsOverrideContext({},"authRecipe"),c4e=cae[0],uae=cae[1];function dae(){var e=G0.useTranslation();return Et.jsxs("a",ft.__assign({"data-supertokens":"superTokensBranding",href:"https://supertokens.com?utm_campaign=poweredby",target:"_blank"},{children:[e("BRANDING_POWERED_BY_START"),Et.jsx("strong",{children:"SuperTokens"}),e("BRANDING_POWERED_BY_END")]}))}function e7(e){return e.userContext!==void 0?Et.jsx(P6,ft.__assign({userContext:e.userContext},{children:e.children})):Et.jsx(a4.Consumer,{children:function(t){return t===void 0?Et.jsx(P6,{children:e.children}):e.children}})}function fae(e){var t=e.error,r=G0.useTranslation();return Et.jsx("div",ft.__assign({"data-supertokens":"generalError"},{children:r(t)}))}var u4e=`[data-supertokens~="container"] {
    --palette-background: 255, 255, 255;
    --palette-inputBackground: 250, 250, 250;
    --palette-inputBorder: 224, 224, 224;
    --palette-primary: 28, 34, 42;
    --palette-primaryBorder: 45, 54, 68;
    --palette-success: 65, 167, 0;
    --palette-successBackground: 217, 255, 191;
    --palette-error: 255, 23, 23;
    --palette-errorBackground: 255, 241, 235;
    --palette-textTitle: 0, 0, 0;
    --palette-textLabel: 0, 0, 0;
    --palette-textInput: 0, 0, 0;
    --palette-textPrimary: 128, 128, 128;
    --palette-textLink: 0, 122, 255;
    --palette-buttonText: 255, 255, 255;
    --palette-textGray: 54, 54, 54;
    --palette-superTokensBrandingBackground: 242, 245, 246;
    --palette-superTokensBrandingText: 173, 189, 196;
    --palette-buttonGreyedOut: 221, 221, 221;
    --palette-caution: 124, 96, 62;
    --palette-errorDark: 207, 54, 68;

    --font-size-0: 12px;
    --font-size-1: 14px;
    --font-size-2: 16px;
    --font-size-3: 19px;
    --font-size-4: 24px;
    --font-size-5: 28px;
}
/*
 * Default styles.
 */
@keyframes slideTop {
    0% {
        transform: translateY(-5px);
    }
    100% {
        transform: translateY(0px);
    }
}
@keyframes swing-in-top-fwd {
    0% {
        transform: rotateX(-100deg);
        transform-origin: top;
        opacity: 0;
    }
    100% {
        transform: rotateX(0deg);
        transform-origin: top;
        opacity: 1;
    }
}
[data-supertokens~="container"] {
    font-family: "Arial", sans-serif;
    margin: 12px auto;
    margin-top: 26px;
    margin-bottom: 26px;
    width: 420px;
    text-align: center;
    border-radius: 8px;
    box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.16);
    background-color: rgb(var(--palette-background));
}
@media (max-width: 440px) {
    [data-supertokens~="container"] {
        width: 95vw;
    }
}
[data-supertokens~="row"] {
    margin: 0 auto;
    width: 76%;
    padding-top: 30px;
    padding-bottom: 10px;
}
[data-supertokens~="superTokensBranding"] {
    display: block;
    margin: 10px auto 0;
    background: rgb(var(--palette-superTokensBrandingBackground));
    color: rgb(var(--palette-superTokensBrandingText));
    text-decoration: none;
    width: -webkit-fit-content;
    width: -moz-fit-content;
    width: fit-content;
    border-radius: 6px 6px 0 0;
    padding: 4px 9px;
    font-weight: 400;
    font-size: var(--font-size-0);
    letter-spacing: 0.4px;
}
[data-supertokens~="generalError"] {
    background: rgb(var(--palette-errorBackground));
    padding-top: 10px;
    padding-bottom: 10px;
    margin-bottom: 10px;
    margin-top: 24px;
    padding-left: 18px;
    padding-right: 18px;
    letter-spacing: 0.2px;
    font-size: var(--font-size-1);
    border-radius: 8px;
    color: rgb(var(--palette-error));
    animation: swing-in-top-fwd 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
    word-wrap: break-word;
}
[data-supertokens~="headerTitle"] {
    font-size: var(--font-size-4);
    line-height: 27.6px;
    letter-spacing: 0.58px;
    font-weight: 700;
    margin-bottom: 20px;
    color: rgb(var(--palette-textTitle));
}
[data-supertokens~="headerSubtitle"] {
    font-weight: 400;
    color: rgb(var(--palette-textGray));
    margin-bottom: 21px;
}
[data-supertokens~="headerSubtitle"][data-supertokens~="secondaryText"] {
    color: rgb(var(--palette-textGray));
    font-weight: 400;
}
[data-supertokens~="privacyPolicyAndTermsAndConditions"] {
    max-width: 300px;
    margin-top: 10px;
}
[data-supertokens~="privacyPolicyAndTermsAndConditions"] a {
    line-height: 21px;
}
/* TODO: split the link style into separate things*/
/* We add this before primary and secondary text, because if they are applied to the same element the other ones take priority */
[data-supertokens~="link"] {
    padding-left: 3px;
    padding-right: 3px;
    color: rgb(var(--palette-textLink));
    font-size: var(--font-size-1);
    cursor: pointer;
    letter-spacing: 0.16px;
    line-height: 26px;
}
[data-supertokens~="primaryText"] {
    font-size: var(--font-size-2);
    font-weight: 400;
    letter-spacing: 0.4px;
    line-height: 21px;
    color: rgb(var(--palette-textLabel));
}
[data-supertokens~="secondaryText"] {
    font-size: var(--font-size-1);
    font-weight: 400;
    letter-spacing: 0.4px;
    color: rgb(var(--palette-textPrimary));
}
[data-supertokens~="secondaryText"] strong {
    font-weight: 600;
}
[data-supertokens~="divider"] {
    margin-top: 1.5em;
    margin-bottom: 1.5em;
    border-bottom: 0.3px solid #dddddd;
    align-items: center;
    padding-bottom: 5px;
    flex: 3 3;
}
[data-supertokens~="headerTinyTitle"] {
    margin-top: 24px;
    font-size: var(--font-size-5);
    letter-spacing: 1.1px;
    font-weight: 700;
    line-height: 28px;
}
[data-supertokens~="secondaryLinkWithArrow"] {
    margin-top: 10px;
    margin-bottom: 30px;
    cursor: pointer;
}
[data-supertokens~="secondaryLinkWithArrow"]:hover {
    position: relative;
    left: 2px;
    word-spacing: 4px;
}
[data-supertokens~="generalSuccess"] {
    color: rgb(var(--palette-success));
    font-size: var(--font-size-1);
    background: rgb(var(--palette-successBackground));
    animation: swing-in-top-fwd 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
    padding: 9px 15px 9px 15px;
    border-radius: 6px;
    display: inline-block;
}
[data-supertokens~="spinner"] {
    width: 80px;
    height: auto;
    padding-top: 20px;
    padding-bottom: 40px;
    margin: 0 auto;
}
[data-supertokens~="error"] {
    color: rgb(var(--palette-error));
}
[data-supertokens~="linkButton"] {
    font-family: "Arial", sans-serif;
    background-color: transparent;
    border: 0;
}
[data-supertokens~="secondaryLinkWithLeftArrow"] {
    color: rgb(var(--palette-textGray));
    font-weight: 400;
    margin-top: 10px;
    margin-bottom: 40px;
    cursor: pointer;
}
[data-supertokens~="secondaryLinkWithLeftArrow"] svg {
    margin-right: 0.3em;
}
[data-supertokens~="secondaryLinkWithLeftArrow"]:hover svg {
    position: relative;
    left: -4px;
}
[data-supertokens~="button"] {
    font-family: "Arial", sans-serif;
    background-color: rgb(var(--palette-primary));
    color: rgb(var(--palette-buttonText));
    width: 100%;
    height: 34px;
    font-weight: 600;
    border-width: 1px;
    border-style: solid;
    border-radius: 6px;
    border-color: rgb(var(--palette-primaryBorder));
    background-position: center;
    transition: all 0.4s;
    background-size: 12000%;
    cursor: pointer;
}
[data-supertokens~="buttonGreyedOut"] {
    background-color: rgb(var(--palette-buttonGreyedOut));
    border-color: rgb(var(--palette-buttonGreyedOut));
}
[data-supertokens~="buttonWithIcon"] {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}
[data-supertokens~="button"]:disabled {
    border: none;
    cursor: no-drop;
}
[data-supertokens~="button"]:active {
    outline: none;
    transition: all 0s;
    background-size: 100%;
    filter: brightness(0.85);
}
[data-supertokens~="button"]:focus {
    outline: none;
}
[data-supertokens~="backButtonCommon"] {
    width: 16px;
    height: 13px;
}
[data-supertokens~="backButton"] {
    cursor: pointer;
    border: none;
    background-color: transparent;
    padding: 0px;
}
[data-supertokens~="backButtonPlaceholder"] {
    display: block;
}
[data-supertokens~="delayedRender"] {
    animation-duration: 0.1s;
    animation-name: animate-fade;
    animation-delay: 0.2s;
    animation-fill-mode: backwards;
}
@keyframes animate-fade {
    0% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}
[data-supertokens~="footerLinkGroupVert"] {
    display: flex;
    flex-direction: column;
    margin-top: 10px;
    gap: 24px;
}
[data-supertokens~="footerLinkGroupVert"] > div {
    cursor: pointer;
    margin: 0;
}
[data-supertokens~="footerLinkGroupVert"] [data-supertokens~="secondaryText"] {
    font-weight: 400;
}
[data-supertokens~="footerLinkGroupVert"] [data-supertokens~="secondaryLinkWithLeftArrow"] {
    font-weight: 400;
    position: relative;
    left: -6px; /* half the width of the left arrow */
}
@media (max-width: 360px) {
    [data-supertokens~="footerLinkGroupVert"] {
        flex-direction: column;
    }
    [data-supertokens~="footerLinkGroupVert"] > div {
        margin: 0 auto;
    }
}
[data-supertokens~="footerLinkGroupVert"] div:only-child {
    margin-left: auto;
    margin-right: auto;
    margin-top: 14px;
}
[data-supertokens~="withBackButton"] {
    position: relative;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
[data-supertokens~="dividerWithOr"] {
    padding-top: 5px;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    color: rgb(var(--palette-textPrimary));
}
[data-supertokens~="dividerText"] {
    flex: 1 1;
    font-weight: 400;
    font-size: var(--font-size-1);
}
[data-supertokens~="formLabelWithLinkWrapper"] {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
[data-supertokens~="formLabelLinkBtn"] {
    width: auto;
    margin-top: 0;
    line-height: 24px;
    font-size: var(--font-size-0);
}
[data-supertokens~="formLabelLinkBtn"]:hover {
    text-decoration: underline;
}
[data-supertokens~="formLabelLinkBtn"]:disabled {
    color: rgb(var(--palette-textPrimary));
    cursor: default;
    text-decoration: none;
}
[data-supertokens~="authComponentList"] {
    padding-bottom: 20px;
}
[data-supertokens~="authPageTitleOAuthClient"] {
    color: rgb(var(--palette-textGray));
    font-size: var(--font-size-1);
    font-weight: 400;
    margin: 10px 0 25px;
}
[data-supertokens~="authPageTitleOAuthClientUrl"] {
    text-decoration: none;
}
[data-supertokens~="authPageTitleOAuthClientLogo"] {
    width: 44px;
    height: 44px;
    margin-bottom: 10px;
}
[data-supertokens~="authPageTitleOAuthClient"] [data-supertokens~="authPageTitleOAuthClientName"] {
    color: rgb(var(--palette-textTitle));
}
[data-supertokens~="buttonWithArrow"] {
    border-radius: 6px;
    border: 1px solid #d0d5dd;
    width: 100%;
    color: rgb(var(--palette-textGray));
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 5px;
    margin: 24px 0;
    min-height: 48px;
    cursor: pointer;
}
[data-supertokens~="buttonWithArrow"]:hover {
    background-color: rgb(var(--palette-inputBackground));
}
[data-supertokens~="buttonWithArrow"] [data-supertokens~="secondaryText"] {
    font-weight: 700;
    font-size: var(--font-size-2);
    color: rgb(var(--palette-textGray));
    margin: 0;
}
[data-supertokens~="buttonWithArrow"]:hover [data-supertokens~="secondaryLinkWithRightArrow"] ~ svg {
    position: relative;
    left: 2px;
}
[data-supertokens~="buttonWithArrow"]:hover [data-supertokens~="secondaryLinkWithLeftArrow"] svg {
    position: relative;
    left: -2px;
}
[data-supertokens~="buttonWithArrow"] [data-supertokens~="secondaryLinkWithLeftArrow"] {
    display: flex;
    align-items: center;
}
`,d4e=function(e){var t=e.children,r=e.userStyles;return Et.jsxs(Yr.Fragment,{children:[t,Et.jsxs("style",{children:[u4e,r.join(`
`)]})]})},t7=RE("AuthPageComponentList",function(t){for(var r=G0.useTranslation(),n=[t.authComponents[0]],i=function(s){n.push(function(){return Et.jsxs("div",ft.__assign({"data-supertokens":"dividerWithOr"},{children:[Et.jsx("div",{"data-supertokens":"divider"}),Et.jsx("div",ft.__assign({"data-supertokens":"dividerText"},{children:r("DIVIDER_OR")})),Et.jsx("div",{"data-supertokens":"divider"})]}),"divider-".concat(s))}),n.push(t.authComponents[s])},a=1;a<t.authComponents.length;++a)i(a);return Et.jsx("div",ft.__assign({"data-supertokens":"authComponentList"},{children:n.map(function(s){return s(ft.__assign({},t))})}))}),r7=RE("AuthPageFooter",function(t){var r=t.hasSeparateSignUpView,n=t.isSignUp,i=t.termsOfServiceLink,a=t.privacyPolicyLink,s=G0.useTranslation();return i===void 0&&a===void 0||r&&!n?null:Et.jsxs("div",ft.__assign({"data-supertokens":"secondaryText privacyPolicyAndTermsAndConditions"},{children:[s("AUTH_PAGE_FOOTER_START"),i!==void 0&&Et.jsx("a",ft.__assign({"data-supertokens":"link",href:i,target:"_blank",rel:"noopener noreferer"},{children:s("AUTH_PAGE_FOOTER_TOS")})),i!==void 0&&a!==void 0&&s("AUTH_PAGE_FOOTER_AND"),a!==void 0&&Et.jsx("a",ft.__assign({"data-supertokens":"link",href:a,target:"_blank",rel:"noopener noreferer"},{children:s("AUTH_PAGE_FOOTER_PP")})),s("AUTH_PAGE_FOOTER_END")]}))});function f4e(e){var t=e.color;return Et.jsx("svg",ft.__assign({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"13",viewBox:"0 0 16 13","data-supertokens":"heavyArrowLeftIcon"},{children:Et.jsx("path",{fill:t,d:"M13 6.8h.022H3.8l2.9 2.9a.761.761 0 0 1 0 1.07l-.451.451a.754.754 0 0 1-1.064 0L.22 6.254a.759.759 0 0 1 0-1.068L5.186.22a.755.755 0 0 1 1.064 0l.45.451a.746.746 0 0 1 .22.532.724.724 0 0 1-.22.522l-2.93 2.92h9.24a.781.781 0 0 1 .764.773v.638A.766.766 0 0 1 13 6.8z",transform:"translate(1.182 .708)"})}))}function hae(e){var t=e.onClick;return Et.jsx("button",ft.__assign({onClick:t,"data-supertokens":"backButton backButtonCommon"},{children:Et.jsx(f4e,{color:"rgb(var(--palette-textTitle))"})}))}var n7=RE("AuthPageHeader",function(t){var r=t.onSignInUpSwitcherClick,n=t.hasSeparateSignUpView,i=t.isSignUp,a=t.showBackButton,s=t.resetFactorList,o=t.oauth2ClientInfo,l=t.headerLabel,c=t.hideSignInSwitcher,d=c===void 0?!1:c,f=G0.useTranslation();return Et.jsxs(Yr.Fragment,{children:[(o==null?void 0:o.logoUri)&&Et.jsx("img",{src:o.logoUri,alt:o.clientName,"data-supertokens":"authPageTitleOAuthClientLogo"}),Et.jsxs("div",ft.__assign({"data-supertokens":"headerTitle withBackButton"},{children:[a?Et.jsx(hae,{onClick:s}):Et.jsx("span",{"data-supertokens":"backButtonPlaceholder backButtonCommon"}),f(l!==void 0?l:n?i?"AUTH_PAGE_HEADER_TITLE_SIGN_UP":"AUTH_PAGE_HEADER_TITLE_SIGN_IN":"AUTH_PAGE_HEADER_TITLE_SIGN_IN_AND_UP"),Et.jsx("span",{"data-supertokens":"backButtonPlaceholder backButtonCommon"})]})),o&&o.clientName!==void 0&&o.clientName.length>0&&Et.jsxs("div",ft.__assign({"data-supertokens":"authPageTitleOAuthClient"},{children:[f("AUTH_PAGE_HEADER_TITLE_SIGN_IN_UP_TO_APP"),o.clientUri!==void 0?Et.jsx("a",ft.__assign({"data-supertokens":"authPageTitleOAuthClientUrl link",href:o.clientUri},{children:o.clientName})):Et.jsx("span",ft.__assign({"data-supertokens":"authPageTitleOAuthClientName"},{children:o.clientName}))]})),!d&&n&&(i?Et.jsxs("div",ft.__assign({"data-supertokens":"headerSubtitle secondaryText"},{children:[f("AUTH_PAGE_HEADER_SUBTITLE_SIGN_UP_START"),Et.jsx("span",ft.__assign({"data-supertokens":"link",onClick:r},{children:f("AUTH_PAGE_HEADER_SUBTITLE_SIGN_UP_SIGN_IN_LINK")})),f("AUTH_PAGE_HEADER_SUBTITLE_SIGN_UP_END")]})):Et.jsxs("div",ft.__assign({"data-supertokens":"headerSubtitle secondaryText"},{children:[f("AUTH_PAGE_HEADER_SUBTITLE_SIGN_IN_START"),Et.jsx("span",ft.__assign({"data-supertokens":"link",onClick:r},{children:f("AUTH_PAGE_HEADER_SUBTITLE_SIGN_IN_SIGN_UP_LINK")})),f("AUTH_PAGE_HEADER_SUBTITLE_SIGN_IN_END")]}))),Et.jsx("div",{"data-supertokens":"divider"})]})});function i7(e){return e.fullPageCompWithPreloadedInfo?Et.jsx(Et.Fragment,{children:e.fullPageCompWithPreloadedInfo.component(ft.__assign(ft.__assign({},e),{preloadInfo:e.fullPageCompWithPreloadedInfo.preloadInfo,showBackButton:e.showBackButton}))}):Et.jsxs("div",ft.__assign({"data-supertokens":"container authPage ".concat(e.factorIds.length>1?"multiFactor":"singleFactor")},{children:[Et.jsxs("div",ft.__assign({"data-supertokens":"row"},{children:[Et.jsx(n7,{factorIds:e.factorIds,isSignUp:e.isSignUp,onSignInUpSwitcherClick:e.onSignInUpSwitcherClick,hasSeparateSignUpView:e.hasSeparateSignUpView,resetFactorList:e.resetFactorList,showBackButton:e.showBackButton,oauth2ClientInfo:e.oauth2ClientInfo}),e.error!==void 0&&Et.jsx(fae,{error:e.error}),Et.jsx(t7,ft.__assign({},e)),Et.jsx(r7,{factorIds:e.factorIds,isSignUp:e.isSignUp,hasSeparateSignUpView:e.hasSeparateSignUpView,privacyPolicyLink:e.privacyPolicyLink,termsOfServiceLink:e.termsOfServiceLink})]})),Et.jsx(dae,{})]}))}function h4e(e){var t=Jr.SuperTokens.getInstanceOrThrow().rootStyle;return Et.jsx(e7,ft.__assign({userContext:e.userContext},{children:Et.jsx(d4e,ft.__assign({userStyles:[t]},{children:Et.jsx(i7,ft.__assign({},e))}))}))}var p4e={signin:"SOMETHING_WENT_WRONG_ERROR",no_email_present:"THIRD_PARTY_ERROR_NO_EMAIL",restart_link:"ERROR_SIGN_IN_UP_LINK"},pae=function(e){var t=c4e();return Et.jsx(P6,ft.__assign({userContext:e.userContext},{children:Et.jsx(s7,ft.__assign({requireAuth:!1,doRedirection:!1},{children:Et.jsx(n4.Provider,ft.__assign({value:t},{children:Et.jsx(m4e,ft.__assign({},e))}))}))}))},m4e=function(e){var t,r,n,i,a;if(e.factors!==void 0&&e.factors.length===0)throw new Error("The factors array cannot be empty");var s=GOe.WindowHandlerReference.getReferenceOrThrow().windowHandler,o=new URLSearchParams(s.location.getSearch()),l=o.get("show"),c=e.useSignUpStateFromQueryString!==!0||l===null?void 0:l==="signup",d=o.get("error")!==null&&(r=(t=o.get("message"))!==null&&t!==void 0?t:o.get("error"))!==null&&r!==void 0?r:void 0;d=d!==void 0?(n=p4e[d])!==null&&n!==void 0?n:d:void 0;var f=Yr.useRef(l),p=Yr.useRef(d),m=o.get("loginChallenge"),x=o.get("forceFreshAuth")==="true",v=lae(),b=rb(),w=ft.useRethrowInRender(),_=Yr.useState(void 0),C=_[0],N=_[1],R=Yr.useState(void 0),P=R[0],O=R[1],D=Yr.useState(d),M=D[0],B=D[1],U=Yr.useState(!1),H=U[0],Z=U[1],ee=Jr.SuperTokens.getInstanceOrThrow(),V=Yr.useState(e.factors),te=V[0],se=V[1],Q=Yr.useState((a=(i=e.isSignUp)!==null&&i!==void 0?i:c)!==null&&a!==void 0?a:ee.defaultToSignUp),X=Q[0],fe=Q[1],Se=Yr.useState(0),Y=Se[0],ce=Se[1],W=Yr.useRef({buildReq:void 0});Yr.useEffect(function(){if(e.useSignUpStateFromQueryString&&f.current!==l){var je=e.useSignUpStateFromQueryString!==!0||l===null?void 0:l==="signup";f.current=l;var $e=je??ee.defaultToSignUp;X!==$e&&(fe($e),ce(function(Ze){return Ze+1}))}}),Yr.useEffect(function(){p.current!==d&&(p.current=d,B(d))});var G=Yr.useCallback(function(){e.useSignUpStateFromQueryString===!0&&ft.updateQueryParam("show",X?"signin":"signup"),B(void 0),fe(!X),ce(function(je){return je+1})},[X,fe,ce,B,e.useSignUpStateFromQueryString]);Yr.useEffect(function(){C||Jr.Multitenancy.getInstanceOrThrow().getCurrentDynamicLoginMethods({userContext:b}).then(function(je){return N(je)},function(je){return w(je)})},[C,N]),ft.useOnMountAPICall(function(){return ft.__awaiter(void 0,void 0,void 0,function(){var je;return ft.__generator(this,function($e){return P?[2]:(je=u_.OAuth2Provider.getInstance(),je!==void 0&&m!==null?[2,je.webJSRecipe.getLoginChallengeInfo({loginChallenge:m,userContext:b})]:[2,void 0])})})},function(je){return ft.__awaiter(void 0,void 0,void 0,function(){return ft.__generator(this,function($e){return je!==void 0&&(je.status==="OK"?O(je.info):B("SOMETHING_WENT_WRONG_ERROR")),[2]})})},function(){ft.clearQueryParams(["loginChallenge"]),B("SOMETHING_WENT_WRONG_ERROR")}),Yr.useEffect(function(){if(!H&&v.loading===!1)if(v.doesSessionExist)if(e.onSessionAlreadyExists!==void 0)e.onSessionAlreadyExists();else if(e.redirectOnSessionExists!==!1&&!x){Nn.Session.getInstanceOrThrow().config.onHandleEvent({action:"SESSION_ALREADY_EXISTS"});var je=u_.OAuth2Provider.getInstance();m!==null&&je!==void 0?function(){return ft.__awaiter(this,void 0,void 0,function(){var $e;return ft.__generator(this,function(Ze){switch(Ze.label){case 0:return[4,je.webJSRecipe.getRedirectURLToContinueOAuthFlow({loginChallenge:m,userContext:b})];case 1:return $e=Ze.sent().frontendRedirectTo,[2,Nn.Session.getInstanceOrThrow().validateGlobalClaimsAndHandleSuccessRedirection({action:"SUCCESS_OAUTH2",frontendRedirectTo:$e,createdNewUser:!1,isNewRecipeUser:!1,newSessionCreated:!1,tenantIdFromQueryParams:ft.getTenantIdFromQueryParams(),recipeId:Nn.Session.RECIPE_ID},Nn.Session.RECIPE_ID,ft.getRedirectToPathFromURL(),b,e.navigate)]}})})}().catch(w):Nn.Session.getInstanceOrThrow().validateGlobalClaimsAndHandleSuccessRedirection(void 0,Nn.Session.RECIPE_ID,ft.getRedirectToPathFromURL(),b,e.navigate).catch(w)}else Z(!0);else Z(!0)},[v.loading]);var ie=Yr.useState(),Ce=ie[0],re=ie[1],ne=te!==void 0&&(e.factors===void 0||e.factors.some(function(je){return!te.includes(je)})),ge=Jr.SuperTokens.getInstanceOrThrow(),we=ge.privacyPolicyLink,q=ge.termsOfServiceLink;Yr.useEffect(function(){var je=new AbortController;if(W.current.buildReq!==Y)return H&&(C!==void 0||!Jr.SuperTokens.usesDynamicLoginMethods)&&g4e(e.preBuiltUIList,C,b,te,X,re,je.signal).then(function(){W.current.buildReq=Y},w),function(){je.abort()}},[H,Y,ce,e.preBuiltUIList,C,b,te,X,re,w]);var Ae=Yr.useCallback(function(je){return ft.__awaiter(void 0,void 0,void 0,function(){var $e,Ze;return ft.__generator(this,function(lt){switch(lt.label){case 0:return $e=u_.OAuth2Provider.getInstance(),m===null||$e===void 0?[2,Nn.Session.getInstanceOrThrow().validateGlobalClaimsAndHandleSuccessRedirection(ft.__assign(ft.__assign({},je),{action:"SUCCESS",tenantIdFromQueryParams:ft.getTenantIdFromQueryParams(),redirectToPath:ft.getRedirectToPathFromURL()}),je.recipeId,ft.getRedirectToPathFromURL(),b,e.navigate)]:[4,$e.webJSRecipe.getRedirectURLToContinueOAuthFlow({loginChallenge:m,userContext:b})];case 1:return Ze=lt.sent().frontendRedirectTo,[2,Nn.Session.getInstanceOrThrow().validateGlobalClaimsAndHandleSuccessRedirection(ft.__assign(ft.__assign({},je),{action:"SUCCESS_OAUTH2",tenantIdFromQueryParams:ft.getTenantIdFromQueryParams(),frontendRedirectTo:Ze}),je.recipeId,ft.getRedirectToPathFromURL(),b,e.navigate)]}})})},[m]),Pe=Ce!==void 0&&(m===null||P!==void 0||u_.OAuth2Provider.getInstance()===void 0)?ft.__assign(ft.__assign({},Ce),{oauth2ClientInfo:P,onAuthSuccess:Ae,error:M,onError:function(je){B(je)},clearError:function(){return B(void 0)},navigate:e.navigate,onSignInUpSwitcherClick:G,privacyPolicyLink:we,rebuildAuthPage:function(){return ce(function(je){return je+1})},setFactorList:function(je){se(je),ce(function($e){return $e+1})},resetFactorList:function(){se(e.factors),ce(function(je){return je+1})},showBackButton:ne,termsOfServiceLink:q,userContext:b}):void 0,He=Yr.useMemo(function(){var je=Jr.defaultTranslationsCommon;if(Ce!==void 0)for(var $e=0,Ze=e.preBuiltUIList;$e<Ze.length;$e++){var lt=Ze[$e];je=ft.mergeObjects(je,lt.languageTranslations)}return je=ft.mergeObjects(je,ee.languageTranslations.userTranslationStore),je},[ee.languageTranslations.userTranslationStore,Ce]);return Pe===void 0?Et.jsx(i4,{}):Et.jsx(oae,ft.__assign({value:C},{children:Et.jsx(G0.TranslationContextProvider,ft.__assign({defaultLanguage:ee.languageTranslations.defaultLanguage,defaultStore:He,translationControlEventSource:ee.languageTranslations.translationEventSource,userTranslationFunc:ee.languageTranslations.userTranslationFunc},{children:Et.jsx(JL,ft.__assign({useShadowDom:ee.useShadowDom},{children:Et.jsxs(Yr.Fragment,{children:[e.children===void 0&&Et.jsx(h4e,ft.__assign({},Pe)),e.children&&tc.default.Children.map(e.children,function(je){return tc.default.isValidElement(je)?tc.default.cloneElement(je,Pe):je})]})}))}))}))};function g4e(e,t,r,n,i,a,s){var o,l,c,d,f;return ft.__awaiter(this,void 0,void 0,function(){var p,m,x,v,b,w,_,C,N,R,P,O,D,M,B,U,H,Z,ee,V,te,se,Q,X;return ft.__generator(this,function(fe){switch(fe.label){case 0:if(p=Jr.SuperTokens.getInstanceOrThrow().recipeList.filter(function(Se){return"firstFactorIds"in Se}),m=(c=(o=n??(t==null?void 0:t.firstFactors))!==null&&o!==void 0?o:(l=jN.MultiFactorAuth.getInstance())===null||l===void 0?void 0:l.config.firstFactors)!==null&&c!==void 0?c:p.reduce(function(Se,Y){return ft.__spreadArray(ft.__spreadArray([],Se,!0),Y.getFirstFactorsForAuthPage(),!0)},[]),n===void 0&&(t==null?void 0:t.firstFactors)===void 0&&((d=jN.MultiFactorAuth.getInstance())===null||d===void 0?void 0:d.config.firstFactors)===void 0&&(x=p.filter(function(Se){return!e.some(function(Y){return Y.recipeInstance.recipeID===Se.recipeID})}),x.length>0))throw new Error("Factor list not set but PreBuiltUI not added for ".concat(x.map(function(Se){return Se.recipeID})));if(m.length===0)throw new Error("There are no enabled factors to show");if(m.includes(Nn.FactorIds.THIRDPARTY)&&(v=e.find(function(Se){return Se.recipeInstance.recipeID===Nn.FactorIds.THIRDPARTY}),v!==void 0&&v.recipeInstance.config.signInAndUpFeature.providers.length===0&&(!Jr.SuperTokens.usesDynamicLoginMethods||t.thirdparty.providers.length===0)&&(m=m.filter(function(Se){return Se!==Nn.FactorIds.THIRDPARTY}),m.length===0)))throw new Error("The only enabled first factor is thirdparty, but no providers were defined. Please define at least one provider.");for(b=e.some(function(Se){return Se.requiresSignUpPage&&Se.recipeInstance.firstFactorIds.some(function(Y){return m.includes(Y)})}),w=b&&i,_=[],C=0,N=e;C<N.length;C++)R=N[C],_.push.apply(_,R.getAuthComponents());P=0,O=_,fe.label=1;case 1:return P<O.length?(D=O[P],D.type!=="FULL_PAGE"?[3,3]:[4,D.preloadInfoAndRunChecks(m,r,w)]):[3,4];case 2:if(M=fe.sent(),s.aborted)return[2];if(M.shouldDisplay)return a({authComponents:[],fullPageCompWithPreloadedInfo:{component:D.component,preloadInfo:M.preloadInfo},isSignUp:w,hasSeparateSignUpView:b,factorIds:m}),[2];fe.label=3;case 3:return P++,[3,1];case 4:if(s.aborted)return[2];if(B=_.filter(function(Se){return Se.type!=="FULL_PAGE"&&Se.factorIds.every(function(Y){return m.includes(Y)})}),B=B.filter(function(Se){return Se.type==="SIGN_IN_UP"||(w?Se.type==="SIGN_UP":Se.type==="SIGN_IN")}),B.sort(function(Se,Y){return Y.factorIds.length-Se.factorIds.length}),U=QOe.selectComponentsToCoverAllFirstFactors(B,m),U===void 0){for(H=new Set,Z=0,ee=B;Z<ee.length;Z++)for(V=ee[Z],te=0,se=V.factorIds;te<se.length;te++)Q=se[te],H.add(Q);throw X=n!==void 0?"local state or props":(t==null?void 0:t.firstFactors)!==void 0?"dynamic tenant configuration":((f=jN.MultiFactorAuth.getInstance())===null||f===void 0?void 0:f.config.firstFactors)!==void 0?"the config passed to the MFA recipe":"all recipes initialized",new Error("Couldn't cover all first factors: ".concat(m.join(", ")," (from ").concat(X,"), available components: ").concat(Array.from(H).join(", "),`.
`)+`You may have missed adding a recipe into the list of prebuiltUIs passed to list of prebuiltUIs passed to getSuperTokensRoutesForReactRouterDom, canHandleRoute, handleRoute functions or the AuthPage component.
Another common error is adding a non-existent factor id into the list, e.g.: passwordless instead of otp-email/phone`)}return a({authComponents:U.sort(function(Se,Y){return Se.displayOrder-Y.displayOrder}).map(function(Se){return Se.component}),factorIds:m,hasSeparateSignUpView:b,isSignUp:w}),[2]}})})}var bv=[{rid:"thirdpartyemailpassword",includes:["thirdparty","emailpassword"],factorsProvided:[Nn.FactorIds.THIRDPARTY,Nn.FactorIds.EMAILPASSWORD]},{rid:"thirdpartypasswordless",includes:["thirdparty","passwordless"],factorsProvided:[Nn.FactorIds.THIRDPARTY,Nn.FactorIds.OTP_PHONE,Nn.FactorIds.OTP_EMAIL,Nn.FactorIds.LINK_PHONE,Nn.FactorIds.LINK_EMAIL]},{rid:"emailpassword",includes:["emailpassword"],factorsProvided:[Nn.FactorIds.EMAILPASSWORD]},{rid:"passwordless",includes:["passwordless"],factorsProvided:[Nn.FactorIds.OTP_PHONE,Nn.FactorIds.OTP_EMAIL,Nn.FactorIds.LINK_PHONE,Nn.FactorIds.LINK_EMAIL]},{rid:"thirdparty",includes:["thirdparty"],factorsProvided:[Nn.FactorIds.THIRDPARTY]}];function tq(e,t){for(var r,n,i=function(D,M){if(e.every(function(U){return M.includes(U)})){var B=t.find(function(U){return U.recipeID===D});if(B&&(r=D,n=B,e.length===M.length))return ft.logDebugMessage("Rendering ".concat(D," because it matches factors: ").concat(e," exactly")),{value:B}}},a=0,s=bv;a<s.length;a++){var o=s[a],l=o.rid,c=o.factorsProvided,d=i(l,c);if(typeof d=="object")return d.value}if(n!==void 0)return ft.logDebugMessage("Rendering ".concat(r," to cover ").concat(e," as a fallback")),n;var f=[];e.includes(Nn.FactorIds.EMAILPASSWORD)&&f.push("emailpassword"),e.includes(Nn.FactorIds.THIRDPARTY)&&f.push("thirdparty"),[Nn.FactorIds.OTP_PHONE,Nn.FactorIds.OTP_EMAIL,Nn.FactorIds.LINK_PHONE,Nn.FactorIds.LINK_EMAIL].some(function(D){return e.includes(D)})&&f.push("passwordless"),ft.logDebugMessage("Choosing component using fallback logic w/ ".concat(f.join(", ")," enabled"));for(var p=f.length,m=function(D,M){if(p===M.length&&M.every(function(U){return f.includes(U)})){var B=t.find(function(U){return U.recipeID===D});if(B)return{value:B}}},x=0,v=bv;x<v.length;x++){var b=v[x],l=b.rid,w=b.includes,_=m(l,w);if(typeof _=="object")return _.value}for(var C=function(D,M){if(M.some(function(U){return f.includes(U)})){var B=t.find(function(U){return U.recipeID===D});if(B)return{value:B}}},N=0,R=bv;N<R.length;N++){var P=R[N],l=P.rid,w=P.includes,O=C(l,w);if(typeof O=="object")return O.value}throw new Error("No enabled recipes overlap with the requested firstFactors: "+e)}var a7=function(){function e(){var t=this;this.getPathsToFeatureComponentWithRecipeIdMap=function(){if(t.pathsToFeatureComponentWithRecipeIdMap!==void 0)return t.pathsToFeatureComponentWithRecipeIdMap;for(var r={},n=t.getFeatures(),i=Object.keys(n),a=0;a<i.length;a++){var s=i[a];r[s]===void 0&&(r[s]=[]),r[s].push(n[s])}return t.pathsToFeatureComponentWithRecipeIdMap=r,t.pathsToFeatureComponentWithRecipeIdMap},this.requiresSignUpPage=!1}return e.getMatchingComponentForRouteAndRecipeIdFromPreBuiltUIList=function(t,r,n,i){var a=t.getAsStringDangerous(),s=a===Jr.SuperTokens.getInstanceOrThrow().appInfo.websiteBasePath.getAsStringDangerous(),o=r.reduce(function(p,m){for(var x=m.getPathsToFeatureComponentWithRecipeIdMap(),v=function(R,P){(R===a||new RegExp("^"+R.replace(/:\w+/g,"[^/]+").replace(/\/\*/g,"/[^/]+")+"$").test(a))&&(p=p.concat(P.map(function(O){return{comp:O,route:R}})))},b=0,w=Object.entries(x);b<w.length;b++){var _=w[b],C=_[0],N=_[1];v(C,N)}return p},[]),l=o.find(function(p){return p.comp.matches()}),c;o.length===0?c=void 0:l!==void 0?c=l.comp:c=o[0].comp;var d=o.find(function(p){var m=bv.map(function(x){return x.rid});return!m.includes(p.comp.recipeID)||p.route!==Jr.SuperTokens.getInstanceOrThrow().appInfo.websiteBasePath.getAsStringDangerous()});if(d)return d.comp;if(n)return c;var f=jN.MultiFactorAuth.getInstance();if(Jr.SuperTokens.usesDynamicLoginMethods===!1)return l?l.comp:s&&f&&f.config.firstFactors!==void 0?tq(f.config.firstFactors,o.map(function(p){return p.comp})):c;if(i===void 0)throw new Error("Should never come here: dynamic login methods info has not been loaded but recipeRouter rendered");if(l&&(!bv.map(function(p){return p.rid}).includes(l.comp.recipeID)||bv.some(function(p){return p.rid===l.comp.recipeID&&p.factorsProvided.some(function(m){return i.firstFactors.includes(m)})})))return l.comp;if(s)return tq(i.firstFactors,o.map(function(p){return p.comp}))},e}();function Sg(e){var t,r,n=rb(),i=ft.useRethrowInRender(),a=Yr.useState(void 0),s=a[0],o=a[1],l=(t=e.getReactRouterDomWithCustomHistory())===null||t===void 0?void 0:t.useHistoryCustom(),c=e.path,d=c===Jr.SuperTokens.getInstanceOrThrow().appInfo.websiteBasePath.getAsStringDangerous(),f=Jr.SuperTokens.getInstanceOrThrow().pluginRouteHandlers,p=(r=e.getReactRouterDomWithCustomHistory())===null||r===void 0?void 0:r.useLocation(),m=tc.default.useMemo(function(){if(!d){var x=new ZOe.default(c),v=f.find(function(w){return w.path===c});if(v)return{component:v.handler,recipeId:void 0};if(s!==void 0||Jr.SuperTokens.usesDynamicLoginMethods===!1){var b=a7.getMatchingComponentForRouteAndRecipeIdFromPreBuiltUIList(x,e.preBuiltUIList,!1,s);return b===void 0&&Jr.SuperTokens.usesDynamicLoginMethods===!0&&gae({navigate:l,redirectBack:!1}),b}}},[c,p,s,e.preBuiltUIList]);return Yr.useEffect(function(){s||Jr.Multitenancy.getInstanceOrThrow().getCurrentDynamicLoginMethods({userContext:n}).then(function(x){return o(x)},function(x){return i(x)})},[s,o]),d?Et.jsx(pae,{preBuiltUIList:e.preBuiltUIList,navigate:l,useSignUpStateFromQueryString:!0}):Jr.SuperTokens.usesDynamicLoginMethods&&s===void 0?Et.jsx(i4,{}):m===void 0||s===void 0&&Jr.SuperTokens.usesDynamicLoginMethods?null:Et.jsx(m.component,{navigate:l})}function x4e(e){var t=e.getReactRouterDomWithCustomHistory,r=e.recipeList,n=e.basePath,i=t();if(i===void 0)return[];for(var a=i.router.Route,s=Object.values(r.reduce(function(p,m){var x=m.getPathsToFeatureComponentWithRecipeIdMap();return Object.keys(x).forEach(function(v){v=v===""?"/":v;var b=rq(n,v);v in p||(p[v]=Et.jsx(a,ft.__assign({exact:!0,path:b},{children:Et.jsx(Sg,{getReactRouterDomWithCustomHistory:t,preBuiltUIList:r,path:v})}),"st-".concat(v)))}),p},{})),o=Jr.SuperTokens.getInstanceOrThrow().pluginRouteHandlers,l=0,c=o;l<c.length;l++){var d=c[l],f=d.path;s.push(Et.jsx(a,ft.__assign({exact:!0,path:f},{children:Et.jsx(Sg,{getReactRouterDomWithCustomHistory:t,preBuiltUIList:r,path:f})}),"st-plugin-".concat(f)))}if(!Jr.SuperTokens.getInstanceOrThrow().disableAuthRoute&&r.some(function(p){return p.getAuthComponents().length!==0})){var f=Jr.SuperTokens.getInstanceOrThrow().appInfo.websiteBasePath.appendPath(new iae.default("/")).getAsStringDangerous();s.push(Et.jsx(a,ft.__assign({exact:!0,path:rq(n,f)},{children:Et.jsx(Sg,{getReactRouterDomWithCustomHistory:t,preBuiltUIList:r,path:f})}),"st-/auth"))}return s}function rq(e,t){var r=t;if(e!==void 0)if(r.startsWith(e))r=r.slice(e.length),r.startsWith("/")||(r="/"+r);else throw new Error("basePath has to be a prefix of websiteBasePath passed to SuperTokens.init");return r}function v4e(e){var t=e.getReactRouterDomWithCustomHistory,r=e.recipeList,n=e.basePath,i=t();if(i===void 0)return[];for(var a=i.router.Route,s=Object.values(r.reduce(function(p,m){var x=m.getPathsToFeatureComponentWithRecipeIdMap();return Object.keys(x).forEach(function(v){v=v===""?"/":v;var b=nq(n,v);v in p||(p[v]=Et.jsx(a,{path:b,element:Et.jsx(Sg,{getReactRouterDomWithCustomHistory:t,preBuiltUIList:r,path:v})},"st-".concat(v)))}),p},{})),o=Jr.SuperTokens.getInstanceOrThrow().pluginRouteHandlers,l=0,c=o;l<c.length;l++){var d=c[l],f=d.path;s.push(Et.jsx(a,{path:f,element:Et.jsx(Sg,{getReactRouterDomWithCustomHistory:t,preBuiltUIList:r,path:f})},"st-plugin-".concat(f)))}if(!Jr.SuperTokens.getInstanceOrThrow().disableAuthRoute&&r.some(function(p){return p.getAuthComponents().length!==0})){var f=Jr.SuperTokens.getInstanceOrThrow().appInfo.websiteBasePath.appendPath(new iae.default("/")).getAsStringDangerous();s.push(Et.jsx(a,{path:nq(n,f),element:Et.jsx(Sg,{getReactRouterDomWithCustomHistory:t,preBuiltUIList:r,path:f})},"st-/auth"))}return s}function nq(e,t){if(e!==void 0)if(t.startsWith(e))t=t.slice(e.length),t.startsWith("/")||(t="/"+t);else throw new Error("basePath has to be a prefix of websiteBasePath passed to SuperTokens.init");return t}var Rx=function(){function e(){}return e.getSuperTokensRoutesForReactRouterDom=function(t,r,n){if(r===void 0&&(r=[]),t===void 0||r.length===0)throw new Error('Please use getSuperTokensRoutesForReactRouterDom like getSuperTokensRoutesForReactRouterDom(require("react-router-dom"), [EmailPasswordPreBuiltUI]) in your render function');var i=r.map(function(s){return s.getInstanceOrInitAndGetInstance()});if(e.reactRouterDomIsV6===void 0&&(e.reactRouterDomIsV6=t.withRouter===void 0),e.reactRouterDomIsV6){if(e.reactRouterDom===void 0){var a=function(){var s=t.useNavigate(),o=tc.default.useState(void 0),l=o[0],c=o[1];return tc.default.useEffect(function(){l!==void 0&&(c(void 0),s(l))},[l,s,c]),c};e.reactRouterDom={router:t,useHistoryCustom:a,useLocation:t.useLocation}}return v4e({getReactRouterDomWithCustomHistory:e.getReactRouterDomWithCustomHistory,recipeList:i,basePath:n})}return e.reactRouterDom===void 0&&(e.reactRouterDom={router:t,useHistoryCustom:t.useHistory,useLocation:t.useLocation}),x4e({getReactRouterDomWithCustomHistory:e.getReactRouterDomWithCustomHistory,recipeList:i,basePath:n})},e.canHandleRoute=function(t){var r=t.map(function(a){return a.getInstanceOrInitAndGetInstance()}),n=ft.getCurrentNormalisedUrlPath().getAsStringDangerous(),i=n===Jr.SuperTokens.getInstanceOrThrow().appInfo.websiteBasePath.getAsStringDangerous();return i?!Jr.SuperTokens.getInstanceOrThrow().disableAuthRoute:a7.getMatchingComponentForRouteAndRecipeIdFromPreBuiltUIList(ft.getCurrentNormalisedUrlPath(),r,!0)!==void 0},e.getRoutingComponent=function(t){var r=t.map(function(n){return n.getInstanceOrInitAndGetInstance()});return Et.jsx(Sg,{getReactRouterDomWithCustomHistory:e.getReactRouterDomWithCustomHistory,path:ft.getCurrentNormalisedUrlPath().getAsStringDangerous(),preBuiltUIList:r})},e.languageTranslations=Jr.defaultTranslationsCommon,e.getReactRouterDomWithCustomHistory=function(){return e.reactRouterDom},e.AuthPage=function(t){return Et.jsx(pae,ft.__assign({},t,{preBuiltUIList:t.preBuiltUIList.map(function(r){return r.getInstanceOrInitAndGetInstance()})}))},e.AuthPageTheme=i7,e.AuthPageFooter=r7,e.AuthPageHeader=n7,e.AuthPageComponentList=t7,e.AuthRecipeComponentsOverrideContextProvider=uae,e}(),y4e=Rx.languageTranslations,b4e=Rx.getSuperTokensRoutesForReactRouterDom,w4e=Rx.canHandleRoute,S4e=Rx.getRoutingComponent,E4e=Rx.AuthPage,C4e=function(e){var t,r=e.children,n=ft.__rest(e,["children"]),i=Yr.useRef(n.requireAuth);if(n.requireAuth!==i.current)throw new Error('requireAuth prop should not change. If you are seeing this, it probably means that you are using SessionAuth in multiple routes with different values for requireAuth. To solve this, try adding the "key" prop to all uses of SessionAuth like <SessionAuth key="someUniqueKeyPerRoute" requireAuth={...}>');var a=Yr.useState({loading:!0}),s=a[0],o=a[1],l=Yr.useCallback(function(w){o(function(_){return JSON.stringify(_)!==JSON.stringify(w)?w:_})},[o]),c=Yr.useRef(),d=Yr.useRef((t=Rx.getReactRouterDomWithCustomHistory())===null||t===void 0?void 0:t.useHistoryCustom),f;try{d.current&&(f=d.current())}catch{}var p=rb(),m=ft.useRethrowInRender(),x=Yr.useCallback(function(){Jr.SuperTokens.getInstanceOrThrow().redirectToAuth({navigate:f,userContext:p,redirectBack:!0})},[]),v=Yr.useCallback(function(){return ft.__awaiter(void 0,void 0,void 0,function(){var w,_,C,N,R;return ft.__generator(this,function(P){switch(P.label){case 0:return c.current===void 0&&(c.current=Nn.Session.getInstanceOrThrow()),[4,c.current.doesSessionExist({userContext:p})];case 1:if(w=P.sent(),w===!1)return[2,{loading:!1,doesSessionExist:!1,accessTokenPayload:{},invalidClaims:[],userId:""}];P.label=2;case 2:return P.trys.push([2,4,,6]),[4,c.current.validateClaims({overrideGlobalClaimValidators:n.overrideGlobalClaimValidators,userContext:p})];case 3:return _=P.sent(),[3,6];case 4:return C=P.sent(),[4,c.current.doesSessionExist({userContext:p})];case 5:if(P.sent())throw C;return[2,{loading:!1,doesSessionExist:!1,accessTokenPayload:{},invalidClaims:[],userId:""}];case 6:return P.trys.push([6,9,,11]),R={loading:!1,doesSessionExist:!0,invalidClaims:_},[4,c.current.getAccessTokenPayloadSecurely({userContext:p})];case 7:return R.accessTokenPayload=P.sent(),[4,c.current.getUserId({userContext:p})];case 8:return[2,(R.userId=P.sent(),R)];case 9:return N=P.sent(),[4,c.current.doesSessionExist({userContext:p})];case 10:if(P.sent())throw N;return[2,{loading:!1,doesSessionExist:!1,accessTokenPayload:{},invalidClaims:[],userId:""}];case 11:return[2]}})})},[]),b=Yr.useCallback(function(w){return ft.__awaiter(void 0,void 0,void 0,function(){var _,C;return ft.__generator(this,function(N){switch(N.label){case 0:if(s.loading===!1)return[2];if(n.doRedirection===!1)return[3,8];if(!w.doesSessionExist&&n.requireAuth!==!1)return x(),[2];if(w.invalidClaims.length===0)return[3,8];_=void 0,N.label=1;case 1:return N.trys.push([1,6,,7]),[4,Nn.getFailureRedirectionInfo({invalidClaims:w.invalidClaims,overrideGlobalClaimValidators:n.overrideGlobalClaimValidators,userContext:p})];case 2:return _=N.sent(),_.redirectPath===void 0?[3,5]:Nn.validateAndCompareOnFailureRedirectionURLToCurrent(_.redirectPath)?(l(w),[2]):[3,3];case 3:return[4,Jr.SuperTokens.getInstanceOrThrow().redirectToUrl(_.redirectPath,f)];case 4:return[2,N.sent()];case 5:return[3,7];case 6:throw C=N.sent(),m(C),C;case 7:if(n.accessDeniedScreen!==void 0&&_.failedClaim!==void 0)return console.warn({message:"Showing access denied screen because a claim validator failed",claimValidationError:_.failedClaim}),[2,l(ft.__assign(ft.__assign({},w),{accessDeniedValidatorError:_.failedClaim}))];N.label=8;case 8:return l(w),[2]}})})},[s.loading,n.doRedirection,n.requireAuth,n.overrideGlobalClaimValidators,n.accessDeniedScreen,x,p,f]);return ft.useOnMountAPICall(v,b),Yr.useEffect(function(){function w(_){return ft.__awaiter(this,void 0,void 0,function(){var C,N,R,P;return ft.__generator(this,function(O){switch(O.label){case 0:switch(C=_.action,C){case"SESSION_CREATED":return[3,1];case"REFRESH_SESSION":return[3,1];case"ACCESS_TOKEN_PAYLOAD_UPDATED":return[3,1];case"API_INVALID_CLAIM":return[3,1];case"SIGN_OUT":return[3,11];case"UNAUTHORISED":return[3,12]}return[3,13];case 1:return[4,c.current.validateClaims({overrideGlobalClaimValidators:n.overrideGlobalClaimValidators,userContext:p})];case 2:if(N=O.sent(),n.doRedirection===!1)return[3,10];R=void 0,O.label=3;case 3:return O.trys.push([3,8,,9]),[4,Nn.getFailureRedirectionInfo({invalidClaims:N,overrideGlobalClaimValidators:n.overrideGlobalClaimValidators,userContext:p})];case 4:return R=O.sent(),R.redirectPath?Nn.validateAndCompareOnFailureRedirectionURLToCurrent(R.redirectPath)?(l(ft.__assign(ft.__assign({},_.sessionContext),{loading:!1,invalidClaims:N})),[3,7]):[3,5]:[3,7];case 5:return[4,Jr.SuperTokens.getInstanceOrThrow().redirectToUrl(R.redirectPath,f)];case 6:return[2,O.sent()];case 7:return[3,9];case 8:throw P=O.sent(),m(P),P;case 9:if(n.accessDeniedScreen!==void 0&&R.failedClaim!==void 0)return console.warn({message:"Showing access denied screen because a claim validator failed",claimValidationError:R.failedClaim}),[2,l(ft.__assign(ft.__assign({},_.sessionContext),{loading:!1,invalidClaims:N,accessDeniedValidatorError:R.failedClaim}))];O.label=10;case 10:return l(ft.__assign(ft.__assign({},_.sessionContext),{loading:!1,invalidClaims:N})),[2];case 11:return l(ft.__assign(ft.__assign({},_.sessionContext),{loading:!1,invalidClaims:[]})),[2];case 12:return l(ft.__assign(ft.__assign({},_.sessionContext),{loading:!1,invalidClaims:[]})),n.onSessionExpired!==void 0?n.onSessionExpired():n.requireAuth!==!1&&n.doRedirection!==!1&&x(),[2];case 13:return[2]}})})}if(c.current===void 0&&(c.current=Nn.Session.getInstanceOrThrow()),s.loading===!1)return c.current.addEventListener(w)},[n,l,s.loading,p,f,x]),n.requireAuth!==!1&&(s.loading||!s.doesSessionExist)?null:!s.loading&&s.accessDeniedValidatorError&&n.accessDeniedScreen?Et.jsx(n.accessDeniedScreen,{userContext:p,navigate:f,validationError:s.accessDeniedValidatorError}):Et.jsx(ZL.Provider,ft.__assign({value:s},{children:r}))},s7=function(e){return Et.jsx(e7,ft.__assign({userContext:e.userContext},{children:Et.jsx(C4e,ft.__assign({},e))}))},mae=function(e){return Et.jsx(s7,ft.__assign({},e,{requireAuth:!1,doRedirection:!1}))},nb=function(){function e(){}e.init=function(r){Jr.SuperTokens.init(r)},e.changeLanguage=function(r){return Jr.SuperTokens.getInstanceOrThrow().changeLanguage(r)},e.loadTranslation=function(r){return Jr.SuperTokens.getInstanceOrThrow().loadTranslation(r)},e.isRecipeInitialized=function(r){return Jr.SuperTokens.getInstanceOrThrow().recipeList.map(function(n){return n.recipeID}).includes(r)};var t;return t=e,e.SuperTokensWrapper=mae,e.redirectToAuth=function(r){return ft.__awaiter(void 0,void 0,void 0,function(){var n;return ft.__generator(t,function(i){return[2,Jr.SuperTokens.getInstanceOrThrow().redirectToAuth(ft.__assign(ft.__assign({},r),{redirectBack:(n=r==null?void 0:r.redirectBack)!==null&&n!==void 0?n:!0,userContext:ft.getNormalisedUserContext(r==null?void 0:r.userContext)}))]})})},e.useTranslation=G0.useTranslation,e.getTranslationFunction=Jr.getTranslationFunction,e.useUserContext=rb,e}(),k4e=nb.init,_4e=nb.changeLanguage,N4e=nb.loadTranslation,gae=nb.redirectToAuth,A4e=nb.isRecipeInitialized;mn.AuthPage=E4e;mn.AuthPageComponentList=t7;mn.AuthPageFooter=r7;mn.AuthPageHeader=n7;mn.AuthPageTheme=i7;mn.BackButton=hae;mn.ComponentOverrideContext=n4;mn.DynamicLoginMethodsSpinner=i4;mn.FeatureWrapper=o4e;mn.GeneralError=fae;mn.Provider=uae;mn.RecipeRouter=a7;mn.SessionAuthWrapper=s7;mn.SessionContext=ZL;mn.SpinnerIcon=aae;mn.SuperTokensAPIWrapper=nb;mn.SuperTokensBranding=dae;mn.SuperTokensWrapper=mae;mn.UI=Rx;mn.UserContextContext=a4;mn.UserContextWrapper=e7;mn.canHandleRoute=w4e;mn.changeLanguage=_4e;mn.getRoutingComponent=S4e;mn.getSuperTokensRoutesForReactRouterDom=b4e;mn.init=k4e;mn.isRecipeInitialized=A4e;mn.languageTranslations=y4e;mn.loadTranslation=N4e;mn.redirectToAuth=gae;mn.useDynamicLoginMethods=s4e;mn.useSessionContext=lae;mn.useUserContext=rb;mn.withOverride=RE;Object.defineProperty(Wi,"__esModule",{value:!0});var Fn=Mi,o7=FL,T4e=HL,Ou=vu,BA=mn,I4e=function(e){Fn.__extends(t,e);function t(r){var n=e.call(this,r)||this,i=Fn.__assign({},n.validators),a=function(o){var l=i[o];i[o]=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return Fn.__assign(Fn.__assign({},l.apply(void 0,c)),{onFailureRedirection:r.onFailureRedirection,showAccessDeniedOnFailure:r.showAccessDeniedOnFailure})}};for(var s in i)a(s);return n.validators=i,n}return t}(o7.BooleanClaim),O4e=function(e){Fn.__extends(t,e);function t(r){var n=e.call(this,r)||this,i=Fn.__assign({},n.validators),a=function(o){var l=i[o];i[o]=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return Fn.__assign(Fn.__assign({},l.apply(void 0,c)),{onFailureRedirection:r.onFailureRedirection,showAccessDeniedOnFailure:r.showAccessDeniedOnFailure})}};for(var s in i)a(s);return n.validators=i,n}return t}(o7.PrimitiveArrayClaim),P4e=function(e){Fn.__extends(t,e);function t(r){var n=e.call(this,r)||this,i=Fn.__assign({},n.validators),a=function(o){var l=i[o];i[o]=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return Fn.__assign(Fn.__assign({},l.apply(void 0,c)),{onFailureRedirection:r.onFailureRedirection,showAccessDeniedOnFailure:r.showAccessDeniedOnFailure})}};for(var s in i)a(s);return n.validators=i,n}return t}(o7.PrimitiveClaim),R4e=function(e){var t=BA.useSessionContext();return t.loading?{loading:!0}:t.doesSessionExist===!1?{loading:!1,doesSessionExist:!1,value:void 0}:{loading:!1,doesSessionExist:!0,value:e.getValueFromPayload(t.accessTokenPayload)}},vo=function(){function e(){}return e.init=function(t){return Ou.Session.init(t)},e.getUserId=function(t){return Fn.__awaiter(this,void 0,void 0,function(){return Fn.__generator(this,function(r){return[2,Ou.Session.getInstanceOrThrow().getUserId({userContext:Fn.getNormalisedUserContext(t==null?void 0:t.userContext)})]})})},e.getAccessToken=function(t){return Fn.__awaiter(this,void 0,void 0,function(){return Fn.__generator(this,function(r){return[2,Ou.Session.getInstanceOrThrow().getAccessToken({userContext:Fn.getNormalisedUserContext(t==null?void 0:t.userContext)})]})})},e.getAccessTokenPayloadSecurely=function(t){return Fn.__awaiter(this,void 0,void 0,function(){return Fn.__generator(this,function(r){return[2,Ou.Session.getInstanceOrThrow().getAccessTokenPayloadSecurely({userContext:Fn.getNormalisedUserContext(t==null?void 0:t.userContext)})]})})},e.attemptRefreshingSession=function(){return Fn.__awaiter(this,void 0,void 0,function(){return Fn.__generator(this,function(t){return[2,Ou.Session.getInstanceOrThrow().attemptRefreshingSession()]})})},e.doesSessionExist=function(t){return Fn.__awaiter(this,void 0,void 0,function(){return Fn.__generator(this,function(r){return[2,Ou.Session.getInstanceOrThrow().doesSessionExist({userContext:Fn.getNormalisedUserContext(t==null?void 0:t.userContext)})]})})},e.addAxiosInterceptors=function(t,r){return Ou.Session.addAxiosInterceptors(t,Fn.getNormalisedUserContext(r))},e.signOut=function(t){return Fn.__awaiter(this,void 0,void 0,function(){return Fn.__generator(this,function(r){return[2,Ou.Session.getInstanceOrThrow().signOut({userContext:Fn.getNormalisedUserContext(t==null?void 0:t.userContext)})]})})},e.validateClaims=function(t){return Ou.Session.getInstanceOrThrow().validateClaims({overrideGlobalClaimValidators:t==null?void 0:t.overrideGlobalClaimValidators,userContext:Fn.getNormalisedUserContext(t==null?void 0:t.userContext)})},e.getInvalidClaimsFromResponse=function(t){return Ou.Session.getInstanceOrThrow().getInvalidClaimsFromResponse(t)},e.getClaimValue=function(t){return Ou.Session.getInstanceOrThrow().getClaimValue({claim:t.claim,userContext:Fn.getNormalisedUserContext(t==null?void 0:t.userContext)})},e.useSessionContext=BA.useSessionContext,e.useClaimValue=R4e,e.SessionAuth=BA.SessionAuthWrapper,e.ComponentsOverrideProvider=T4e.Provider,e}(),j4e=vo.useSessionContext,D4e=vo.useClaimValue,M4e=vo.SessionAuth,F4e=vo.init,L4e=vo.getUserId,B4e=vo.getAccessToken,U4e=vo.getAccessTokenPayloadSecurely,$4e=vo.attemptRefreshingSession,z4e=vo.doesSessionExist,H4e=vo.addAxiosInterceptors,W4e=vo.signOut,V4e=vo.validateClaims,q4e=vo.getInvalidClaimsFromResponse,G4e=vo.getClaimValue,K4e=vo.ComponentsOverrideProvider;Wi.SessionContext=BA.SessionContext;Wi.BooleanClaim=I4e;Wi.PrimitiveArrayClaim=O4e;Wi.PrimitiveClaim=P4e;Wi.SessionAuth=M4e;Wi.SessionComponentsOverrideProvider=K4e;Wi.addAxiosInterceptors=H4e;Wi.attemptRefreshingSession=$4e;Wi.default=vo;Wi.doesSessionExist=z4e;Wi.getAccessToken=B4e;Wi.getAccessTokenPayloadSecurely=U4e;Wi.getClaimValue=G4e;Wi.getInvalidClaimsFromResponse=q4e;Wi.getUserId=L4e;Wi.init=F4e;Wi.signOut=W4e;Wi.useClaimValue=D4e;Wi.useSessionContext=j4e;Wi.validateClaims=V4e;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(Wi)})(q0);const X4e=Us(q0);var xae={},mc={};Object.defineProperty(mc,"__esModule",{value:!0});var dd=mn;mc.AuthPage=dd.AuthPage;mc.AuthPageComponentList=dd.AuthPageComponentList;mc.AuthPageFooter=dd.AuthPageFooter;mc.AuthPageHeader=dd.AuthPageHeader;mc.AuthPageTheme=dd.AuthPageTheme;mc.AuthRecipeComponentsOverrideContextProvider=dd.Provider;mc.canHandleRoute=dd.canHandleRoute;mc.default=dd.UI;mc.getRoutingComponent=dd.getRoutingComponent;mc.getSuperTokensRoutesForReactRouterDom=dd.getSuperTokensRoutesForReactRouterDom;mc.languageTranslations=dd.languageTranslations;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(mc)})(xae);var vae={},s4={},mf={},l7={},Y4e=Nx,Q4e=tb,yae=Y4e.createGenericComponentsOverrideContext(void 0,Q4e.MultiFactorAuth.RECIPE_ID),J4e=yae[0],Z4e=yae[1];l7.Provider=Z4e;l7.useContext=J4e;Object.defineProperty(mf,"__esModule",{value:!0});var S1=Mi,e3e=l7,Mm=tb,bae=vu,jx=function(){function e(){}return e.init=function(t){return Mm.MultiFactorAuth.init(t)},e.resyncSessionAndFetchMFAInfo=function(t){return Mm.MultiFactorAuth.getInstanceOrThrow().webJSRecipe.resyncSessionAndFetchMFAInfo(S1.__assign(S1.__assign({},t),{userContext:S1.getNormalisedUserContext(t==null?void 0:t.userContext)}))},e.redirectToFactor=function(t){var r,n,i;return Mm.MultiFactorAuth.getInstanceOrThrow().redirectToFactor({factorId:t.factorId,forceSetup:(r=t.forceSetup)!==null&&r!==void 0?r:!1,redirectBack:(n=t.redirectBack)!==null&&n!==void 0?n:!0,stepUp:(i=t.stepUp)!==null&&i!==void 0?i:!1,navigate:t.navigate,userContext:S1.getNormalisedUserContext(t.userContext)})},e.redirectToFactorChooser=function(t){var r,n,i;return Mm.MultiFactorAuth.getInstanceOrThrow().redirectToFactorChooser({nextFactorOptions:(r=t.nextFactorOptions)!==null&&r!==void 0?r:[],redirectBack:(n=t.redirectBack)!==null&&n!==void 0?n:!0,stepUp:(i=t.stepUp)!==null&&i!==void 0?i:!1,navigate:t.navigate,userContext:S1.getNormalisedUserContext(t.userContext)})},e.getSecondaryFactors=function(t){return Mm.MultiFactorAuth.getInstanceOrThrow().getSecondaryFactors(S1.getNormalisedUserContext(t.userContext))},e.MultiFactorAuthClaim=Mm.MultiFactorAuth.MultiFactorAuthClaim,e.FactorIds=bae.FactorIds,e.ComponentsOverrideProvider=e3e.Provider,e}(),t3e=jx.init,r3e=jx.resyncSessionAndFetchMFAInfo,n3e=jx.redirectToFactor,i3e=jx.redirectToFactorChooser,a3e=jx.getSecondaryFactors,s3e=jx.ComponentsOverrideProvider,o3e=Mm.MultiFactorAuth.MultiFactorAuthClaim;mf.FactorIds=bae.FactorIds;mf.MultiFactorAuthClaim=o3e;mf.MultiFactorAuthComponentsOverrideProvider=s3e;mf.default=jx;mf.getSecondaryFactors=a3e;mf.init=t3e;mf.redirectToFactor=n3e;mf.redirectToFactorChooser=i3e;mf.resyncSessionAndFetchMFAInfo=r3e;var o4={},l4={},wae={},pa={},jE={},c4={},b2=Ve&&Ve.__assign||function(){return b2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},b2.apply(this,arguments)};Object.defineProperty(c4,"__esModule",{value:!0});c4.normaliseUserInput=void 0;var l3e=Ix;function c3e(e){var t=b2({functions:function(r){return r}},e.override);return b2(b2({},(0,l3e.normaliseAuthRecipe)(e)),{override:t})}c4.normaliseUserInput=c3e;var DE={},UA=Ve&&Ve.__assign||function(){return UA=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},UA.apply(this,arguments)},vw=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},yw=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(DE,"__esModule",{value:!0});DE.getRecipeImplementation=void 0;var Pu=Ox,d_=Tx,f_=Br;function Sae(e){var t=new Pu.default(e.recipeId,e.appInfo);return{submitNewPassword:function(r){var n=r.formFields,i=r.options,a=r.userContext;return vw(this,void 0,void 0,function(){var s,o,l,c,d;return yw(this,function(f){switch(f.label){case 0:return s=this.getTenantIdFromURL({userContext:a}),o=this.getResetPasswordTokenFromURL({userContext:a}),[4,t.post({path:"/<tenantId>/user/password/reset",pathParams:{tenantId:s||"public"}},{body:{formFields:n,token:o,method:"token"}},Pu.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"SUBMIT_NEW_PASSWORD",options:i,userContext:a}),Pu.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"SUBMIT_NEW_PASSWORD",userContext:a}))];case 1:return l=f.sent(),c=l.jsonBody,d=l.fetchResponse,c.status==="FIELD_ERROR"?[2,{status:"FIELD_ERROR",formFields:c.formFields,fetchResponse:d}]:c.status==="RESET_PASSWORD_INVALID_TOKEN_ERROR"?[2,{status:c.status,fetchResponse:d}]:[2,UA(UA({},c),{fetchResponse:d})]}})})},sendPasswordResetEmail:function(r){var n=r.formFields,i=r.options,a=r.userContext;return vw(this,void 0,void 0,function(){var s,o,l,c,d,f,p;return yw(this,function(m){switch(m.label){case 0:return d=(c=t).post,f={path:"/<tenantId>/user/password/reset/token"},p={},[4,d_.default.getInstanceOrThrow().recipeImplementation.getTenantId({userContext:a})];case 1:return[4,d.apply(c,[(f.pathParams=(p.tenantId=m.sent()||"public",p),f),{body:{formFields:n}},Pu.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"SEND_RESET_PASSWORD_EMAIL",options:i,userContext:a}),Pu.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"SEND_RESET_PASSWORD_EMAIL",userContext:a})])];case 2:return s=m.sent(),o=s.jsonBody,l=s.fetchResponse,o.status==="FIELD_ERROR"?[2,{status:"FIELD_ERROR",formFields:o.formFields,fetchResponse:l}]:o.status==="PASSWORD_RESET_NOT_ALLOWED"?[2,{status:o.status,reason:o.reason,fetchResponse:l}]:[2,{status:o.status,fetchResponse:l}]}})})},signUp:function(r){var n=r.formFields,i=r.shouldTryLinkingWithSessionUser,a=r.options,s=r.userContext;return vw(this,void 0,void 0,function(){var o,l,c,d,f,p,m;return yw(this,function(x){switch(x.label){case 0:return f=(d=t).post,p={path:"/<tenantId>/signup"},m={},[4,d_.default.getInstanceOrThrow().recipeImplementation.getTenantId({userContext:s})];case 1:return[4,f.apply(d,[(p.pathParams=(m.tenantId=x.sent()||"public",m),p),{body:{formFields:n,shouldTryLinkingWithSessionUser:i}},Pu.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"EMAIL_PASSWORD_SIGN_UP",options:a,userContext:s}),Pu.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"EMAIL_PASSWORD_SIGN_UP",userContext:s})])];case 2:return o=x.sent(),l=o.jsonBody,c=o.fetchResponse,l.status==="FIELD_ERROR"?[2,{status:"FIELD_ERROR",formFields:l.formFields,fetchResponse:c}]:l.status==="SIGN_UP_NOT_ALLOWED"?[2,{status:"SIGN_UP_NOT_ALLOWED",reason:l.reason,fetchResponse:c}]:[2,{status:l.status,user:(0,f_.normaliseUser)("emailpassword",l.user),fetchResponse:c}]}})})},signIn:function(r){var n=r.formFields,i=r.shouldTryLinkingWithSessionUser,a=r.options,s=r.userContext;return vw(this,void 0,void 0,function(){var o,l,c,d,f,p,m;return yw(this,function(x){switch(x.label){case 0:return f=(d=t).post,p={path:"/<tenantId>/signin"},m={},[4,d_.default.getInstanceOrThrow().recipeImplementation.getTenantId({userContext:s})];case 1:return[4,f.apply(d,[(p.pathParams=(m.tenantId=x.sent()||"public",m),p),{body:{formFields:n,shouldTryLinkingWithSessionUser:i}},Pu.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"EMAIL_PASSWORD_SIGN_IN",options:a,userContext:s}),Pu.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"EMAIL_PASSWORD_SIGN_IN",userContext:s})])];case 2:return o=x.sent(),l=o.jsonBody,c=o.fetchResponse,l.status==="FIELD_ERROR"?[2,{status:"FIELD_ERROR",formFields:l.formFields,fetchResponse:c}]:l.status==="WRONG_CREDENTIALS_ERROR"?[2,{status:"WRONG_CREDENTIALS_ERROR",fetchResponse:c}]:l.status==="SIGN_IN_NOT_ALLOWED"?[2,{status:"SIGN_IN_NOT_ALLOWED",reason:l.reason,fetchResponse:c}]:[2,{status:"OK",user:(0,f_.normaliseUser)("emailpassword",l.user),fetchResponse:c}]}})})},doesEmailExist:function(r){var n=r.email,i=r.options,a=r.userContext;return vw(this,void 0,void 0,function(){var s,o,l,c,d,f,p;return yw(this,function(m){switch(m.label){case 0:return d=(c=t).get,f={path:"/<tenantId>/emailpassword/email/exists"},p={},[4,d_.default.getInstanceOrThrow().recipeImplementation.getTenantId({userContext:a})];case 1:return[4,d.apply(c,[(f.pathParams=(p.tenantId=m.sent()||"public",p),f.queryParams={email:n},f),{},Pu.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"EMAIL_EXISTS",options:i,userContext:a}),Pu.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"EMAIL_EXISTS",userContext:a})])];case 2:return s=m.sent(),o=s.jsonBody,l=s.fetchResponse,[2,{status:o.status,doesExist:o.exists,fetchResponse:l}]}})})},getResetPasswordTokenFromURL:function(){var r=(0,f_.getQueryParams)("token");return r===void 0?"":r},getTenantIdFromURL:function(){return(0,f_.getQueryParams)("tenantId")}}}DE.default=Sae;DE.getRecipeImplementation=Sae;var u3e=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$A=Ve&&Ve.__assign||function(){return $A=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},$A.apply(this,arguments)};Object.defineProperty(jE,"__esModule",{value:!0});jE.Recipe=void 0;var d3e=c4,f3e=DE,h3e=pf,Nj=Br,p3e=Zy,Eae=function(e){u3e(t,e);function t(r){var n=e.call(this,(0,d3e.normaliseUserInput)(r))||this,i=new h3e.default((0,f3e.default)({recipeId:n.config.recipeId,appInfo:n.config.appInfo,clientType:n.config.clientType,preAPIHook:n.config.preAPIHook,postAPIHook:n.config.postAPIHook}));return n.recipeImplementation=i.override(n.config.override.functions).build(),n}return t.init=function(r){return function(n,i,a,s){return t.instance=new t($A($A({},(0,Nj.applyPlugins)(t.RECIPE_ID,r,s??[])),{recipeId:t.RECIPE_ID,clientType:i,appInfo:n})),t.instance}},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of EmailPassword found. Ensure that the 'EmailPassword.init' method is called within the 'SuperTokens.init' recipeList.";throw r=(0,Nj.checkForSSRErrorAndAppendIfNeeded)(r),Error(r)}return t.instance},t.reset=function(){(0,Nj.isTest)()&&(t.instance=void 0)},t.RECIPE_ID="emailpassword",t}(p3e.default);jE.Recipe=Eae;jE.default=Eae;var Js=Ve&&Ve.__assign||function(){return Js=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Js.apply(this,arguments)};Object.defineProperty(pa,"__esModule",{value:!0});pa.signOut=pa.getTenantIdFromURL=pa.getResetPasswordTokenFromURL=pa.doesEmailExist=pa.signIn=pa.signUp=pa.sendPasswordResetEmail=pa.submitNewPassword=pa.init=void 0;var zf=jE,Ep=Br,gf=function(){function e(){}return e.init=function(t){return zf.default.init(t)},e.signOut=function(t){return zf.default.getInstanceOrThrow().signOut({userContext:(0,Ep.getNormalisedUserContext)(t==null?void 0:t.userContext)})},e.submitNewPassword=function(t){return zf.default.getInstanceOrThrow().recipeImplementation.submitNewPassword(Js(Js({},t),{userContext:(0,Ep.getNormalisedUserContext)(t.userContext)}))},e.sendPasswordResetEmail=function(t){return zf.default.getInstanceOrThrow().recipeImplementation.sendPasswordResetEmail(Js(Js({},t),{userContext:(0,Ep.getNormalisedUserContext)(t.userContext)}))},e.signUp=function(t){return zf.default.getInstanceOrThrow().recipeImplementation.signUp(Js(Js({},t),{shouldTryLinkingWithSessionUser:t==null?void 0:t.shouldTryLinkingWithSessionUser,userContext:(0,Ep.getNormalisedUserContext)(t.userContext)}))},e.signIn=function(t){return zf.default.getInstanceOrThrow().recipeImplementation.signIn(Js(Js({},t),{shouldTryLinkingWithSessionUser:t==null?void 0:t.shouldTryLinkingWithSessionUser,userContext:(0,Ep.getNormalisedUserContext)(t.userContext)}))},e.doesEmailExist=function(t){return zf.default.getInstanceOrThrow().recipeImplementation.doesEmailExist(Js(Js({},t),{userContext:(0,Ep.getNormalisedUserContext)(t.userContext)}))},e.getResetPasswordTokenFromURL=function(t){return zf.default.getInstanceOrThrow().recipeImplementation.getResetPasswordTokenFromURL(Js(Js({},t),{userContext:(0,Ep.getNormalisedUserContext)(t==null?void 0:t.userContext)}))},e.getTenantIdFromURL=function(t){return zf.default.getInstanceOrThrow().recipeImplementation.getTenantIdFromURL(Js(Js({},t),{userContext:(0,Ep.getNormalisedUserContext)(t==null?void 0:t.userContext)}))},e}();pa.default=gf;var m3e=gf.init;pa.init=m3e;var g3e=gf.submitNewPassword;pa.submitNewPassword=g3e;var x3e=gf.sendPasswordResetEmail;pa.sendPasswordResetEmail=x3e;var v3e=gf.signUp;pa.signUp=v3e;var y3e=gf.signIn;pa.signIn=y3e;var b3e=gf.doesEmailExist;pa.doesEmailExist=b3e;var w3e=gf.signOut;pa.signOut=w3e;var S3e=gf.getResetPasswordTokenFromURL;pa.getResetPasswordTokenFromURL=S3e;var E3e=gf.getTenantIdFromURL;pa.getTenantIdFromURL=E3e;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(pa)})(wae);var Cae={},Hf=Mi,C3e=eb,iq=vu,k3e=function(e){Hf.__extends(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.getAuthRecipeDefaultRedirectionURL=function(n){return Hf.__awaiter(r,void 0,void 0,function(){return Hf.__generator(this,function(i){throw new Error("Should never come here")})})},r.signOut=function(n){return Hf.__awaiter(r,void 0,void 0,function(){return Hf.__generator(this,function(i){switch(i.label){case 0:return[4,iq.Session.getInstanceOrThrow().signOut({userContext:Hf.getNormalisedUserContext(n==null?void 0:n.userContext)})];case 1:return[2,i.sent()]}})})},r.doesSessionExist=function(n){return Hf.__awaiter(r,void 0,void 0,function(){return Hf.__generator(this,function(i){switch(i.label){case 0:return[4,iq.Session.getInstanceOrThrow().doesSessionExist({userContext:Hf.getNormalisedUserContext(n==null?void 0:n.userContext)})];case 1:return[2,i.sent()]}})})},r}return t}(C3e.RecipeModule);Cae.AuthRecipe=k3e;var ME={},_3e=["email","password"],N3e="/reset-password";ME.DEFAULT_RESET_PASSWORD_PATH=N3e;ME.MANDATORY_FORM_FIELDS_ID_ARRAY=_3e;var FE={},O0=Mi;function A3e(e){return O0.__awaiter(this,void 0,void 0,function(){var t;return O0.__generator(this,function(r){return typeof e!="string"?[2,"ERROR_EMAIL_NON_STRING"]:(e=e.trim(),t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,e.match(t)===null?[2,"ERROR_EMAIL_INVALID"]:[2,void 0])})})}function T3e(e){return O0.__awaiter(this,void 0,void 0,function(){return O0.__generator(this,function(t){return typeof e!="string"?[2,"ERROR_PASSWORD_NON_STRING"]:e.length<8?[2,"ERROR_PASSWORD_TOO_SHORT"]:e.length>=100?[2,"ERROR_PASSWORD_TOO_LONG"]:e.match(/^.*[A-Za-z]+.*$/)===null?[2,"ERROR_PASSWORD_NO_ALPHA"]:e.match(/^.*[0-9]+.*$/)===null?[2,"ERROR_PASSWORD_NO_NUM"]:[2,void 0]})})}function I3e(e){return O0.__awaiter(this,void 0,void 0,function(){return O0.__generator(this,function(t){return typeof e!="string"?[2,"ERROR_PASSWORD_NON_STRING"]:[2,void 0]})})}function O3e(e){return O0.__awaiter(this,void 0,void 0,function(){return O0.__generator(this,function(t){return[2,void 0]})})}FE.defaultEmailValidator=A3e;FE.defaultLoginPasswordValidator=I3e;FE.defaultPasswordValidator=T3e;FE.defaultValidate=O3e;var Vr=Mi,P3e=wae,R3e=Cae,Vw=vu,c7=ME,j3e=r4,u4=FE;function D3e(e){return e&&e.__esModule?e:{default:e}}var aq=D3e(P3e),M3e=function(e){return function(t){return Vr.__assign(Vr.__assign({},t),{submitNewPassword:function(r){return Vr.__awaiter(this,void 0,void 0,function(){var n;return Vr.__generator(this,function(i){switch(i.label){case 0:return[4,t.submitNewPassword(Vr.__assign(Vr.__assign({},r),{formFields:[r.formFields[0]]}))];case 1:return n=i.sent(),n.status==="OK"&&e({action:"PASSWORD_RESET_SUCCESSFUL",userContext:r.userContext}),[2,n]}})})},sendPasswordResetEmail:function(r){return Vr.__awaiter(this,void 0,void 0,function(){var n;return Vr.__generator(this,function(i){switch(i.label){case 0:return[4,t.sendPasswordResetEmail(r)];case 1:return n=i.sent(),n.status==="OK"&&e({action:"RESET_PASSWORD_EMAIL_SENT",email:r.formFields.find(function(a){var s=a.id;return s==="email"}).value,userContext:r.userContext}),[2,n]}})})},signUp:function(r){return Vr.__awaiter(this,void 0,void 0,function(){var n,i,a;return Vr.__generator(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,Vw.Session.getInstanceOrThrow().getAccessTokenPayloadSecurely({userContext:r.userContext})];case 1:return n=s.sent(),[3,3];case 2:return s.sent(),n=void 0,[3,3];case 3:return[4,t.signUp(r)];case 4:if(i=s.sent(),i.status!=="OK")return[3,9];a=void 0,s.label=5;case 5:return s.trys.push([5,7,,8]),[4,Vw.Session.getInstanceOrThrow().getAccessTokenPayloadSecurely({userContext:r.userContext})];case 6:return a=s.sent(),[3,8];case 7:return s.sent(),a=void 0,[3,8];case 8:e({action:"SUCCESS",isNewRecipeUser:!0,createdNewSession:a!==void 0&&(n===void 0||n.sessionHandle!==a.sessionHandle),user:i.user,userContext:r.userContext}),s.label=9;case 9:return[2,i]}})})},signIn:function(r){return Vr.__awaiter(this,void 0,void 0,function(){var n,i,a;return Vr.__generator(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,Vw.Session.getInstanceOrThrow().getAccessTokenPayloadSecurely({userContext:r.userContext})];case 1:return n=s.sent(),[3,3];case 2:return s.sent(),n=void 0,[3,3];case 3:return[4,t.signIn(r)];case 4:if(i=s.sent(),i.status!=="OK")return[3,9];a=void 0,s.label=5;case 5:return s.trys.push([5,7,,8]),[4,Vw.Session.getInstanceOrThrow().getAccessTokenPayloadSecurely({userContext:r.userContext})];case 6:return a=s.sent(),[3,8];case 7:return s.sent(),a=void 0,[3,8];case 8:e({action:"SUCCESS",isNewRecipeUser:!1,createdNewSession:a!==void 0&&(n===void 0||n.sessionHandle!==a.sessionHandle),user:i.user,userContext:r.userContext}),s.label=9;case 9:return[2,i]}})})}})}};function F3e(e){e===void 0&&(e={});var t=L3e(e.signInAndUpFeature),r=t.signUpForm.formFields.find(function(s){return s.id==="password"}),n=t.signUpForm.formFields.find(function(s){return s.id==="email"}),i=H3e(r.validate,n,e.resetPasswordUsingTokenFeature),a=Vr.__assign({functions:function(s){return s}},e.override);return Vr.__assign(Vr.__assign({},j3e.normaliseAuthRecipe(e)),{signInAndUpFeature:t,resetPasswordUsingTokenFeature:i,override:a})}function L3e(e){e===void 0&&(e={});var t=B3e(e.signUpForm),r=t.formFields.reduce(function(i,a){return a.id==="email"?Vr.__spreadArray(Vr.__spreadArray([],i,!0),[a],!1):a.id==="password"?Vr.__spreadArray(Vr.__spreadArray([],i,!0),[Vr.__assign(Vr.__assign({},a),{autoComplete:"current-password",validate:u4.defaultLoginPasswordValidator})],!1):i},[]),n=U3e(r,e.signInForm);return{signUpForm:t,signInForm:n}}function B3e(e){e===void 0&&(e={});var t=$3e(),r=[];e.formFields!==void 0&&(r=e.formFields);var n=_ae(t,r),i=e.style!==void 0?e.style:"";return{style:i,formFields:n}}function U3e(e,t){t===void 0&&(t={});var r=[];t.formFields!==void 0&&(r=t.formFields.filter(function(a){return c7.MANDATORY_FORM_FIELDS_ID_ARRAY.includes(a.id)}).map(function(a){return Vr.__assign(Vr.__assign({},a),{optional:!1})}));var n=_ae(e,r),i=t.style!==void 0?t.style:"";return{style:i,formFields:n}}function $3e(){return[kae(),z3e()]}function kae(){return{id:"email",label:"EMAIL_PASSWORD_EMAIL_LABEL",placeholder:"EMAIL_PASSWORD_EMAIL_PLACEHOLDER",validate:u4.defaultEmailValidator,optional:!1,autoComplete:"email"}}function z3e(){return{id:"password",label:"EMAIL_PASSWORD_PASSWORD_LABEL",placeholder:"EMAIL_PASSWORD_PASSWORD_PLACEHOLDER",validate:u4.defaultPasswordValidator,optional:!1,autoComplete:"new-password"}}function H3e(e,t,r){r===void 0&&(r={});var n=r.disableDefaultUI===!0,i=r.submitNewPasswordForm!==void 0&&r.submitNewPasswordForm.style!==void 0?r.submitNewPasswordForm.style:"",a={style:i,formFields:[{id:"password",label:"EMAIL_PASSWORD_NEW_PASSWORD_LABEL",placeholder:"EMAIL_PASSWORD_NEW_PASSWORD_PLACEHOLDER",validate:e,optional:!1,autoComplete:"new-password"},{id:"confirm-password",label:"EMAIL_PASSWORD_CONFIRM_PASSWORD_LABEL",placeholder:"EMAIL_PASSWORD_CONFIRM_PASSWORD_PLACEHOLDER",validate:e,optional:!1,autoComplete:"new-password"}]},s=r.enterEmailForm!==void 0&&r.enterEmailForm.style!==void 0?r.enterEmailForm.style:"",o={style:s,formFields:[Vr.__assign(Vr.__assign({},kae()),{validate:t.validate,placeholder:"",autofocus:!0})]};return{disableDefaultUI:n,submitNewPasswordForm:a,enterEmailForm:o}}function _ae(e,t){for(var r=e,n=0;n<t.length;n++){for(var i=t[n],a=!0,s=0;s<r.length;s++){var o=r[s];if(i.id===o.id){var l=o.optional;i.optional!==void 0&&(l=i.optional),c7.MANDATORY_FORM_FIELDS_ID_ARRAY.includes(i.id)&&(l=!1),r[s]=Vr.__assign(Vr.__assign(Vr.__assign({},r[s]),i),{optional:l}),a=!1;break}}a&&r.push(Vr.__assign({optional:!1,placeholder:i.label,validate:u4.defaultValidate},i))}return r.map(function(c){return W3e(c)})}function W3e(e){var t=this;if(e.optional===!1&&e.nonOptionalErrorMsg==="")throw new Error("nonOptionalErrorMsg for field ".concat(e.id," cannot be an empty string"));return Vr.__assign(Vr.__assign({},e),{validate:function(r){return Vr.__awaiter(t,void 0,void 0,function(){return Vr.__generator(this,function(n){switch(n.label){case 0:return r===""&&e.optional===!1?e.nonOptionalErrorMsg!==void 0?[2,e.nonOptionalErrorMsg]:[2,"ERROR_NON_OPTIONAL"]:[4,e.validate(r)];case 1:return[2,n.sent()]}})})}})}var V3e=function(e){Vr.__extends(t,e);function t(r,n){n===void 0&&(n=aq.default);var i=e.call(this,r)||this;return i.webJSRecipe=n,i.recipeID=t.RECIPE_ID,i.firstFactorIds=[Vw.FactorIds.EMAILPASSWORD],i.getDefaultRedirectionURL=function(a){return Vr.__awaiter(i,void 0,void 0,function(){return Vr.__generator(this,function(s){return a.action==="RESET_PASSWORD"?[2,Vr.getDefaultRedirectionURLForPath(this.config,c7.DEFAULT_RESET_PASSWORD_PATH,a)]:[2,this.getAuthRecipeDefaultRedirectionURL(a)]})})},i}return t.prototype.getFirstFactorsForAuthPage=function(){return this.firstFactorIds},t.init=function(r){var n=F3e(r);return{recipeID:t.RECIPE_ID,authReact:function(i){return t.instance=new t(Vr.__assign(Vr.__assign({},n),{appInfo:i,recipeId:t.RECIPE_ID})),t.instance},webJS:aq.default.init(Vr.__assign(Vr.__assign({},n),{override:{functions:function(i,a){var s=M3e(n.onHandleEvent);return a.override(s),a.override(n.override.functions),i}}}))}},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of EmailPassword found. Make sure to call the EmailPassword.init method.See https://supertokens.io/docs/emailpassword/quick-setup/frontend";throw typeof window>"u"&&(r=r+Vr.SSR_ERROR),Error(r)}return t.instance},t.reset=function(){Vr.isTest()&&(t.instance=void 0)},t.RECIPE_ID="emailpassword",t}(R3e.AuthRecipe);l4.EmailPassword=V3e;var q3e=Nx,G3e=l4,Nae=q3e.createGenericComponentsOverrideContext(void 0,G3e.EmailPassword.RECIPE_ID),K3e=Nae[0],X3e=Nae[1];o4.Provider=X3e;o4.useContext=K3e;var u7={},sq=u,Y3e=I,oq=Mi,Q3e=Ra,J3e=`/* Copyright (c) 2021, VRAI Labs and/or its affiliates. All rights reserved.
 *
 * This software is licensed under the Apache License, Version 2.0 (the
 * "License") as published by the Apache Software Foundation.
 *
 * You may not use this file except in compliance with the License. You may
 * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations
 * under the License.
 */

[data-supertokens~="container"] {
    --palette-background: 255, 255, 255;
    --palette-inputBackground: 250, 250, 250;
    --palette-inputBorder: 224, 224, 224;
    --palette-primary: 28, 34, 42;
    --palette-primaryBorder: 45, 54, 68;
    --palette-success: 65, 167, 0;
    --palette-successBackground: 217, 255, 191;
    --palette-error: 255, 23, 23;
    --palette-errorBackground: 255, 241, 235;
    --palette-textTitle: 0, 0, 0;
    --palette-textLabel: 0, 0, 0;
    --palette-textInput: 0, 0, 0;
    --palette-textPrimary: 128, 128, 128;
    --palette-textLink: 0, 122, 255;
    --palette-buttonText: 255, 255, 255;
    --palette-textGray: 54, 54, 54;
    --palette-superTokensBrandingBackground: 242, 245, 246;
    --palette-superTokensBrandingText: 173, 189, 196;
    --palette-buttonGreyedOut: 221, 221, 221;
    --palette-caution: 124, 96, 62;
    --palette-errorDark: 207, 54, 68;

    --font-size-0: 12px;
    --font-size-1: 14px;
    --font-size-2: 16px;
    --font-size-3: 19px;
    --font-size-4: 24px;
    --font-size-5: 28px;
}

/*
 * Default styles.
 */

@keyframes slideTop {
    0% {
        transform: translateY(-5px);
    }
    100% {
        transform: translateY(0px);
    }
}

@keyframes swing-in-top-fwd {
    0% {
        transform: rotateX(-100deg);
        transform-origin: top;
        opacity: 0;
    }
    100% {
        transform: rotateX(0deg);
        transform-origin: top;
        opacity: 1;
    }
}

[data-supertokens~="container"] {
    font-family: "Arial", sans-serif;
    margin: 12px auto;
    margin-top: 26px;
    margin-bottom: 26px;
    width: 420px;
    text-align: center;
    border-radius: 8px;
    box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.16);
    background-color: rgb(var(--palette-background));
}

@media (max-width: 440px) {
    [data-supertokens~="container"] {
        width: 95vw;
    }
}

[data-supertokens~="row"] {
    margin: 0 auto;
    width: 76%;
    padding-top: 30px;
    padding-bottom: 10px;
}

[data-supertokens~="superTokensBranding"] {
    display: block;
    margin: 10px auto 0;
    background: rgb(var(--palette-superTokensBrandingBackground));
    color: rgb(var(--palette-superTokensBrandingText));
    text-decoration: none;
    width: -webkit-fit-content;
    width: -moz-fit-content;
    width: fit-content;
    border-radius: 6px 6px 0 0;
    padding: 4px 9px;
    font-weight: 400;
    font-size: var(--font-size-0);
    letter-spacing: 0.4px;
}

[data-supertokens~="generalError"] {
    background: rgb(var(--palette-errorBackground));
    padding-top: 10px;
    padding-bottom: 10px;
    margin-bottom: 10px;
    margin-top: 24px;
    padding-left: 18px;
    padding-right: 18px;
    letter-spacing: 0.2px;
    font-size: var(--font-size-1);
    border-radius: 8px;
    color: rgb(var(--palette-error));
    animation: swing-in-top-fwd 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
    word-wrap: break-word;
}

[data-supertokens~="headerTitle"] {
    font-size: var(--font-size-4);
    line-height: 27.6px;
    letter-spacing: 0.58px;
    font-weight: 700;
    margin-bottom: 20px;
    color: rgb(var(--palette-textTitle));
}

[data-supertokens~="headerSubtitle"] {
    font-weight: 400;
    color: rgb(var(--palette-textGray));
    margin-bottom: 21px;
}

[data-supertokens~="headerSubtitle"][data-supertokens~="secondaryText"] {
    color: rgb(var(--palette-textGray));
    font-weight: 400;
}

[data-supertokens~="privacyPolicyAndTermsAndConditions"] {
    max-width: 300px;
    margin-top: 10px;
}

[data-supertokens~="privacyPolicyAndTermsAndConditions"] a {
    line-height: 21px;
}

/* TODO: split the link style into separate things*/

/* We add this before primary and secondary text, because if they are applied to the same element the other ones take priority */

[data-supertokens~="link"] {
    padding-left: 3px;
    padding-right: 3px;
    color: rgb(var(--palette-textLink));
    font-size: var(--font-size-1);
    cursor: pointer;
    letter-spacing: 0.16px;
    line-height: 26px;
}

[data-supertokens~="primaryText"] {
    font-size: var(--font-size-2);
    font-weight: 400;
    letter-spacing: 0.4px;
    line-height: 21px;
    color: rgb(var(--palette-textLabel));
}

[data-supertokens~="secondaryText"] {
    font-size: var(--font-size-1);
    font-weight: 400;
    letter-spacing: 0.4px;
    color: rgb(var(--palette-textPrimary));
}

[data-supertokens~="secondaryText"] strong {
    font-weight: 600;
}

[data-supertokens~="divider"] {
    margin-top: 1.5em;
    margin-bottom: 1.5em;
    border-bottom: 0.3px solid #dddddd;
    align-items: center;
    padding-bottom: 5px;
    flex: 3 3;
}

[data-supertokens~="headerTinyTitle"] {
    margin-top: 24px;
    font-size: var(--font-size-5);
    letter-spacing: 1.1px;
    font-weight: 700;
    line-height: 28px;
}

[data-supertokens~="secondaryLinkWithArrow"] {
    margin-top: 10px;
    margin-bottom: 30px;
    cursor: pointer;
}

[data-supertokens~="secondaryLinkWithArrow"]:hover {
    position: relative;
    left: 2px;
    word-spacing: 4px;
}

[data-supertokens~="generalSuccess"] {
    color: rgb(var(--palette-success));
    font-size: var(--font-size-1);
    background: rgb(var(--palette-successBackground));
    animation: swing-in-top-fwd 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
    padding: 9px 15px 9px 15px;
    border-radius: 6px;
    display: inline-block;
}

[data-supertokens~="spinner"] {
    width: 80px;
    height: auto;
    padding-top: 20px;
    padding-bottom: 40px;
    margin: 0 auto;
}

[data-supertokens~="error"] {
    color: rgb(var(--palette-error));
}

[data-supertokens~="linkButton"] {
    font-family: "Arial", sans-serif;
    background-color: transparent;
    border: 0;
}

[data-supertokens~="secondaryLinkWithLeftArrow"] {
    color: rgb(var(--palette-textGray));
    font-weight: 400;
    margin-top: 10px;
    margin-bottom: 40px;
    cursor: pointer;
}

[data-supertokens~="secondaryLinkWithLeftArrow"] svg {
    margin-right: 0.3em;
}

[data-supertokens~="secondaryLinkWithLeftArrow"]:hover svg {
    position: relative;
    left: -4px;
}

[data-supertokens~="button"] {
    font-family: "Arial", sans-serif;
    background-color: rgb(var(--palette-primary));
    color: rgb(var(--palette-buttonText));
    width: 100%;
    height: 34px;
    font-weight: 600;
    border-width: 1px;
    border-style: solid;
    border-radius: 6px;
    border-color: rgb(var(--palette-primaryBorder));
    background-position: center;
    transition: all 0.4s;
    background-size: 12000%;
    cursor: pointer;
}

[data-supertokens~="buttonGreyedOut"] {
    background-color: rgb(var(--palette-buttonGreyedOut));
    border-color: rgb(var(--palette-buttonGreyedOut));
}

[data-supertokens~="buttonWithIcon"] {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

[data-supertokens~="button"]:disabled {
    border: none;
    cursor: no-drop;
}

[data-supertokens~="button"]:active {
    outline: none;
    transition: all 0s;
    background-size: 100%;
    filter: brightness(0.85);
}

[data-supertokens~="button"]:focus {
    outline: none;
}

[data-supertokens~="backButtonCommon"] {
    width: 16px;
    height: 13px;
}

[data-supertokens~="backButton"] {
    cursor: pointer;
    border: none;
    background-color: transparent;
    padding: 0px;
}

[data-supertokens~="backButtonPlaceholder"] {
    display: block;
}

[data-supertokens~="delayedRender"] {
    animation-duration: 0.1s;
    animation-name: animate-fade;
    animation-delay: 0.2s;
    animation-fill-mode: backwards;
}

@keyframes animate-fade {
    0% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}

[data-supertokens~="footerLinkGroupVert"] {
    display: flex;
    flex-direction: column;
    margin-top: 10px;
    gap: 24px;
}

[data-supertokens~="footerLinkGroupVert"] > div {
    cursor: pointer;
    margin: 0;
}

[data-supertokens~="footerLinkGroupVert"] [data-supertokens~="secondaryText"] {
    font-weight: 400;
}

[data-supertokens~="footerLinkGroupVert"] [data-supertokens~="secondaryLinkWithLeftArrow"] {
    font-weight: 400;
    position: relative;
    left: -6px; /* half the width of the left arrow */
}

@media (max-width: 360px) {
    [data-supertokens~="footerLinkGroupVert"] {
        flex-direction: column;
    }
    [data-supertokens~="footerLinkGroupVert"] > div {
        margin: 0 auto;
    }
}

[data-supertokens~="footerLinkGroupVert"] div:only-child {
    margin-left: auto;
    margin-right: auto;
    margin-top: 14px;
}

[data-supertokens~="withBackButton"] {
    position: relative;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

[data-supertokens~="dividerWithOr"] {
    padding-top: 5px;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    color: rgb(var(--palette-textPrimary));
}

[data-supertokens~="dividerText"] {
    flex: 1 1;
    font-weight: 400;
    font-size: var(--font-size-1);
}

[data-supertokens~="formLabelWithLinkWrapper"] {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

[data-supertokens~="formLabelLinkBtn"] {
    width: auto;
    margin-top: 0;
    line-height: 24px;
    font-size: var(--font-size-0);
}

[data-supertokens~="formLabelLinkBtn"]:hover {
    text-decoration: underline;
}

[data-supertokens~="formLabelLinkBtn"]:disabled {
    color: rgb(var(--palette-textPrimary));
    cursor: default;
    text-decoration: none;
}

[data-supertokens~="authComponentList"] {
    padding-bottom: 20px;
}

[data-supertokens~="authPageTitleOAuthClient"] {
    color: rgb(var(--palette-textGray));
    font-size: var(--font-size-1);
    font-weight: 400;
    margin: 10px 0 25px;
}

[data-supertokens~="authPageTitleOAuthClientUrl"] {
    text-decoration: none;
}

[data-supertokens~="authPageTitleOAuthClientLogo"] {
    width: 44px;
    height: 44px;
    margin-bottom: 10px;
}

[data-supertokens~="authPageTitleOAuthClient"] [data-supertokens~="authPageTitleOAuthClientName"] {
    color: rgb(var(--palette-textTitle));
}

[data-supertokens~="buttonWithArrow"] {
    border-radius: 6px;
    border: 1px solid #d0d5dd;
    width: 100%;
    color: rgb(var(--palette-textGray));
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 5px;
    margin: 24px 0;
    min-height: 48px;
    cursor: pointer;
}

[data-supertokens~="buttonWithArrow"]:hover {
    background-color: rgb(var(--palette-inputBackground));
}

[data-supertokens~="buttonWithArrow"] [data-supertokens~="secondaryText"] {
    font-weight: 700;
    font-size: var(--font-size-2);
    color: rgb(var(--palette-textGray));
    margin: 0;
}

[data-supertokens~="buttonWithArrow"]:hover [data-supertokens~="secondaryLinkWithRightArrow"] ~ svg {
    position: relative;
    left: 2px;
}

[data-supertokens~="buttonWithArrow"]:hover [data-supertokens~="secondaryLinkWithLeftArrow"] svg {
    position: relative;
    left: -2px;
}

[data-supertokens~="buttonWithArrow"] [data-supertokens~="secondaryLinkWithLeftArrow"] {
    display: flex;
    align-items: center;
}

[data-supertokens~="inputContainer"] {
    margin-top: 6px;
}

[data-supertokens~="inputWrapper"] {
    box-sizing: border-box;
    width: 100%;
    display: flex;
    align-items: center;
    background-color: rgb(var(--palette-inputBackground));
    height: 34px;
    border-radius: 6px;
    border: 1px solid rgb(var(--palette-inputBorder));
}

[data-supertokens~="inputWrapper"][focus-within] {
    background-color: rgba(var(--palette-inputBackground), 0.25);
    border: 1px solid rgb(var(--palette-primary));
    box-shadow: 0 0 0 0.2rem rgba(var(--palette-primary), 0.25);
    outline: none;
}

[data-supertokens~="inputWrapper"]:focus-within {
    background-color: rgba(var(--palette-inputBackground), 0.25);
    border: 1px solid rgb(var(--palette-primary));
    box-shadow: 0 0 0 0.2rem rgba(var(--palette-primary), 0.25);
    outline: none;
}

[data-supertokens~="inputError"] {
    border: 1px solid rgb(var(--palette-error));
    box-shadow: 0 0 0 0.2rem rgba(var(--palette-error), 0.25);
    outline: none;
}

[data-supertokens~="inputError"][focus-within] {
    border: 1px solid rgb(var(--palette-error));
    box-shadow: 0 0 0 0.2rem rgba(var(--palette-error), 0.25);
    outline: none;
}

[data-supertokens~="inputError"]:focus-within {
    border: 1px solid rgb(var(--palette-error));
    box-shadow: 0 0 0 0.2rem rgba(var(--palette-error), 0.25);
    outline: none;
}

[data-supertokens~="input"] {
    box-sizing: border-box;
    padding-left: 15px;
    filter: none;
    color: rgb(var(--palette-textInput));
    background-color: transparent;
    border-radius: 6px;
    font-size: var(--font-size-1);
    border: none;
    padding-right: 25px;
    letter-spacing: 1.2px;
    flex: 9 1 75%;
    width: 75%;
    height: 32px;
}

[data-supertokens~="input"]:focus {
    border: none;
    outline: none;
}

[data-supertokens~="input"]:-webkit-autofill,
[data-supertokens~="input"]:-webkit-autofill:hover,
[data-supertokens~="input"]:-webkit-autofill:focus,
[data-supertokens~="input"]:-webkit-autofill:active {
    -webkit-text-fill-color: rgb(var(--palette-textInput));
    box-shadow: 0 0 0 30px rgb(var(--palette-inputBackground)) inset;
}

[data-supertokens~="inputAdornment"] {
    justify-content: center;
    margin-right: 5px;
}

[data-supertokens~="showPassword"] {
    cursor: pointer;
}

[data-supertokens~="enterEmailSuccessMessage"] {
    margin-top: 15px;
    margin-bottom: 15px;
    word-break: break-word;
}

[data-supertokens~="submitNewPasswordSuccessMessage"] {
    margin-top: 15px;
    margin-bottom: 15px;
}

[data-supertokens~="inputErrorMessage"] {
    padding-top: 5px;
    padding-bottom: 5px;
    color: rgb(var(--palette-error));
    line-height: 24px;
    font-weight: 400;
    font-size: var(--font-size-1);
    text-align: left;
    animation: slideTop 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
    max-width: 330px;
}

@media (max-width: 440px) {
    [data-supertokens~="inputErrorMessage"] {
        max-width: 250px;
    }
}

[data-supertokens~="inputErrorSymbol"] {
    margin-right: 5px;
    top: 1px;
    position: relative;
    left: 2px;
}

[data-supertokens~="label"] {
    text-align: left;
    font-weight: 700;
    font-size: var(--font-size-0);
    line-height: 24px;
    color: rgb(var(--palette-textLabel));
}

[data-supertokens~="formRow"] {
    display: flex;
    flex-direction: column;
    padding-top: 0px;
    padding-bottom: 20px;
}

[data-supertokens~="formRow"][data-supertokens~="hasError"] {
    padding-bottom: 0;
}

[data-supertokens~="formRow"]:last-child {
    padding-bottom: 0;
}

[data-supertokens~="sendVerifyEmailIcon"] {
    margin-top: 11px;
}

[data-supertokens~="primaryText"][data-supertokens~="sendVerifyEmailText"] {
    text-align: center;
    letter-spacing: 0.8px;
    color: rgb(var(--palette-textPrimary));
}

[data-supertokens~="secondaryLinkWithArrow"] {
    margin-top: 10px;
    margin-bottom: 30px;
    cursor: pointer;
    font-weight: 700;
}

[data-supertokens~="sendVerifyEmailResend"] {
    margin-top: 13px;
    font-weight: 400;
}

[data-supertokens~="sendVerifyEmailResend"]:hover {
    text-decoration: underline;
}

[data-supertokens~="noFormRow"] {
    padding-bottom: 25px;
}

[data-supertokens~="emailVerificationButtonWrapper"] {
    padding-top: 25px;
    max-width: 96px;
    margin: 0 auto;
}

[data-supertokens~="resendEmailLink"] {
    display: inline-block;
}

[data-supertokens~="resetPasswordEmailForm"] {
    padding-bottom: 20px;
}

[data-supertokens~="resetPasswordPasswordForm"] {
    padding-bottom: 20px;
}
`,Z3e=function(e){var t=e.children,r=e.userStyles;return sq.jsxs(Y3e.Fragment,{children:[t,sq.jsxs("style",{children:[J3e,r.join(`
`)]})]})},ePe={en:oq.__assign(oq.__assign({},Q3e.defaultTranslationsCommon.en),{EMAIL_VERIFICATION_RESEND_SUCCESS:"Email resent",EMAIL_VERIFICATION_SEND_TITLE:"Verify your email!",EMAIL_VERIFICATION_SEND_DESC_START:"",EMAIL_VERIFICATION_SEND_DESC_STRONG:"Please click on the link",EMAIL_VERIFICATION_SEND_DESC_END:" in the email we just sent you to confirm your email address.",EMAIL_VERIFICATION_RESEND_BTN:"Resend Email",EMAIL_VERIFICATION_LOGOUT:"Logout ",EMAIL_VERIFICATION_SUCCESS:"Email verification successful!",EMAIL_VERIFICATION_CONTINUE_BTN:"CONTINUE",EMAIL_VERIFICATION_CONTINUE_LINK:"Continue",EMAIL_VERIFICATION_EXPIRED:"The email verification link has expired",EMAIL_VERIFICATION_ERROR_TITLE:"Something went wrong",EMAIL_VERIFICATION_ERROR_DESC:"We encountered an unexpected error. Please contact support for assistance",EMAIL_VERIFICATION_LINK_CLICKED_HEADER:"Verify your email address",EMAIL_VERIFICATION_LINK_CLICKED_DESC:"Please click on the button below to verify your email address",EMAIL_VERIFICATION_LINK_CLICKED_CONTINUE_BUTTON:"CONTINUE"})};u7.ThemeBase=Z3e;u7.defaultTranslationsEmailVerification=ePe;var Aae={},tPe=Mi,lq=u;function rPe(e){var t=e.color;return lq.jsx("svg",tPe.__assign({width:"6",height:"8",viewBox:"0 0 6 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:lq.jsx("path",{d:"M0.372871 3.24407C-0.0875903 3.64284 -0.0875899 4.35716 0.372872 4.75593L3.84535 7.76318C4.49299 8.32406 5.5 7.864 5.5 7.00725L5.5 0.992749C5.5 0.135997 4.49299 -0.324056 3.84535 0.23682L0.372871 3.24407Z",fill:"".concat(t)})}))}Aae.ArrowLeftIcon=rPe;var ib={},d7={},nPe=Mi,Aj=u,iPe=Px;function aPe(e){var t=e.type,r=e.label,n=e.disabled,i=e.isLoading,a=e.onClick,s=e.isGreyedOut,o=e.icon,l=iPe.useTranslation();n===void 0&&(n=!1);var c="button";return s&&(c+=" buttonGreyedOut"),o&&(c+=" buttonWithIcon"),Aj.jsxs("button",nPe.__assign({type:t,disabled:n,onClick:a,"data-supertokens":c},{children:[o&&Aj.jsx("div",{children:o()}),Aj.jsxs("div",{children:[l(r),i&&"..."]})]}))}d7.Button=aPe;var an=Mi,wr=u,is=I,sPe=ME,oPe=d7,f7=Px;function lPe(e){return e&&e.__esModule?e:{default:e}}var cPe=lPe(is);function R6(e){var t=e.children,r=e.hasError;return wr.jsx("div",an.__assign({"data-supertokens":["formRow",r?"hasError":""].join(" ")},{children:t}))}function uPe(){return wr.jsx("svg",an.__assign({xmlns:"http://www.w3.org/2000/svg",width:"14.862",height:"12.033",viewBox:"0 0 14.862 12.033","data-supertokens":"checkedIcon"},{children:wr.jsx("path",{fill:"rgb(var(--palette-primary))",d:"M12.629 49L5.06 56.572l-2.829-2.829L0 55.977l5.057 5.057.654-.651 9.152-9.152z",transform:"translate(0 -49)"})}))}function Tae(){return wr.jsx("svg",an.__assign({xmlns:"http://www.w3.org/2000/svg",width:"17",height:"15",viewBox:"0 0 17 15","data-supertokens":"errorIcon"},{children:wr.jsxs("g",{children:[wr.jsx("g",an.__assign({className:"Asdf",fill:"rgb(var(--palette-error))"},{children:wr.jsx("path",{d:"M13.568 14.75H3.432c-.63 0-1.195-.325-1.512-.869-.317-.544-.32-1.196-.01-1.744l5.067-8.943c.315-.556.884-.887 1.523-.887.639 0 1.208.331 1.523.887l5.067 8.943c.31.548.307 1.2-.01 1.744s-.882.869-1.512.869z",transform:"translate(-824.894 -352.829) translate(824.894 352.829)"})})),wr.jsx("text",an.__assign({fill:"#fff",fontSize:"10px",fontWeight:"700",transform:"translate(-824.894 -352.829) translate(832.014 365.198)"},{children:wr.jsx("tspan",an.__assign({x:"0",y:"0"},{children:"!"}))}))]})}))}function dPe(e){var t=e.showPassword;return t===!0?wr.jsx("div",{children:wr.jsx("svg",an.__assign({xmlns:"http://www.w3.org/2000/svg",width:"18.391",height:"16.276",viewBox:"0 0 18.391 16.276","data-supertokens":"showPasswordIcon show"},{children:wr.jsxs("g",{children:[wr.jsx("g",{children:wr.jsx("g",{children:wr.jsx("g",{children:wr.jsx("path",{fill:"rgb(var(--palette-textPrimary))",d:"M29.289 100.33c-2.4-3.63-5.619-5.63-9.069-5.63s-6.67 2-9.069 5.63a.767.767 0 0 0 0 .845c2.4 3.63 5.619 5.63 9.069 5.63s6.67-2 9.069-5.63a.767.767 0 0 0 0-.845zm-9.069 4.944c-2.785 0-5.435-1.6-7.5-4.519 2.065-2.92 4.715-4.519 7.5-4.519s5.435 1.6 7.5 4.519c-2.064 2.92-4.711 4.519-7.5 4.519z",transform:"translate(-822 -420.048) translate(822 422.035) translate(-11.025 -94.7)"})})})}),wr.jsxs("g",an.__assign({fill:"rgb(var(--palette-textPrimary))",stroke:"rgb(var(--palette-inputBackground))",transform:"translate(-822 -420.048) translate(827.164 424.055)"},{children:[wr.jsx("circle",{cx:"4.036",cy:"4.036",r:"4.036",stroke:"none"}),wr.jsx("circle",{cx:"4.036",cy:"4.036",r:"3.536",fill:"none"})]})),wr.jsx("path",{fill:"none",stroke:"#707070",strokeLinecap:"round",strokeWidth:"2.25px",d:"M11.981 0L0 11.981",transform:"translate(-822 -420.048) translate(825.084 421.639)"}),wr.jsx("path",{fill:"none",stroke:"rgb(var(--palette-inputBackground))",strokeLinecap:"round",d:"M13.978 0L0 13.978",transform:"translate(-822 -420.048) translate(825.084 421.639)"})]})}))}):wr.jsx("div",{children:wr.jsx("svg",an.__assign({xmlns:"http://www.w3.org/2000/svg",width:"18.281",height:"12.033",viewBox:"0 0 18.281 12.033","data-supertokens":"showPasswordIcon hide"},{children:wr.jsxs("g",{children:[wr.jsx("g",{children:wr.jsx("g",{children:wr.jsx("g",{children:wr.jsx("path",{fill:"rgb(var(--palette-textPrimary))",d:"M29.18 100.3c-2.384-3.608-5.586-5.6-9.015-5.6s-6.63 1.989-9.015 5.6a.763.763 0 0 0 0 .84c2.384 3.608 5.586 5.6 9.015 5.6s6.63-1.989 9.015-5.6a.763.763 0 0 0 0-.84zm-9.015 4.914c-2.769 0-5.4-1.589-7.459-4.492 2.052-2.9 4.686-4.492 7.459-4.492s5.4 1.589 7.459 4.492c-2.056 2.899-4.686 4.489-7.458 4.489z",transform:"translate(-822 -422.088) translate(822 422.088) translate(-11.025 -94.7)"})})})}),wr.jsxs("g",an.__assign({fill:"rgb(var(--palette-textPrimary))",stroke:"rgb(var(--palette-inputBackground))",transform:"translate(-822 -422.088) translate(827.133 424.096)"},{children:[wr.jsx("circle",{cx:"4.012",cy:"4.012",r:"4.012",stroke:"none"}),wr.jsx("circle",{cx:"4.012",cy:"4.012",r:"3.512",fill:"none"})]}))]})}))})}var fPe=function(e){var t=e.type,r=e.name,n=e.hasError,i=e.autoComplete,a=e.onInputFocus,s=e.onInputBlur,o=e.onChange,l=e.value,c=e.placeholder,d=e.validated,f=e.autofocus,p=f7.useTranslation(),m=is.useState(!1),x=m[0],v=m[1];function b(){a!==void 0&&a(l)}function w(){s!==void 0&&s(l)}function _(N){o&&o(N.target.value)}i===void 0&&(i="off");var C=t;return t==="password"&&x===!0&&(C="text"),wr.jsx("div",an.__assign({"data-supertokens":"inputContainer"},{children:wr.jsxs("div",an.__assign({"data-supertokens":["inputWrapper",n?"inputError":""].join(" ")},{children:[wr.jsx("input",{autoFocus:f,autoComplete:i,"data-supertokens":"input input-".concat(r),className:"supertokens-input",onFocus:b,onBlur:w,type:C,name:r,placeholder:p(c),onChange:_,value:l}),n===!0&&wr.jsx("div",an.__assign({"data-supertokens":"inputAdornment inputAdornmentError"},{children:wr.jsx(Tae,{})})),d===!0&&n===!1&&wr.jsx("div",an.__assign({"data-supertokens":"inputAdornment inputAdornmentSuccess"},{children:wr.jsx(uPe,{})})),t==="password"&&l.length>0&&wr.jsx("div",an.__assign({onClick:function(){return v(x===!1)},"data-supertokens":"inputAdornment showPassword"},{children:wr.jsx(dPe,{showPassword:x})}))]}))}))};function hPe(e){var t=e.error,r=f7.useTranslation();return wr.jsx("div",an.__assign({"data-supertokens":"inputErrorMessage"},{children:r(t)}))}function Iae(e){var t=e.value,r=e.showIsRequired,n=f7.useTranslation();return wr.jsxs("div",an.__assign({"data-supertokens":"label"},{children:[n(t),r&&t&&t.trim()!==""&&" *"]}))}var Tj=function(e){if(e.getDefaultValue!==void 0){var t=e.getDefaultValue();if(typeof t!="string")throw new Error("getDefaultValue for ".concat(e.id," must return a string"));return t}return""};function pPe(e){var t=e.field,r=e.type,n=e.fstate,i=e.onInputFocus,a=e.onInputBlur,s=e.onInputChange,o=is.useCallback(function(d){i({id:t.id,value:d})},[i,t.id]),l=is.useCallback(function(d){a({id:t.id,value:d})},[a,t.id]),c=is.useCallback(function(d){s({id:t.id,value:d})},[s,t.id]);return t.inputComponent!==void 0?wr.jsx(t.inputComponent,{type:r,name:t.id,validated:n.validated===!0,placeholder:t.placeholder,value:n.value,autoComplete:t.autoComplete,autofocus:t.autofocus,onInputFocus:o,onInputBlur:l,onChange:c,hasError:n.error!==void 0},t.id):wr.jsx(fPe,{type:r,name:t.id,validated:n.validated===!0,placeholder:t.placeholder,value:n.value,autoComplete:t.autoComplete,onInputFocus:o,onInputBlur:l,onChange:c,autofocus:t.autofocus,hasError:n.error!==void 0},t.id)}var mPe=function(e){var t=e.footer,r=e.buttonLabel,n=e.showLabels,i=e.validateOnBlur,a=e.formFields,s=is.useRef(new AbortController);is.useEffect(function(){return s.current=new AbortController,function(){s.current.abort()}},[s]);var o=is.useState(e.formFields.map(function(_){return{id:_.id,value:Tj(_)}})),l=o[0],c=o[1];is.useEffect(function(){c(function(_){var C=_,N=e.formFields.filter(function(R){return!l.some(function(P){return R.id===P.id})});return N.length>0&&(_=an.__spreadArray(an.__spreadArray([],_,!0),N.map(function(R){return{id:R.id,value:Tj(R)}}),!0)),l.some(function(R){return!e.formFields.some(function(P){return P.id===R.id})})&&(C=_.filter(function(R){return e.formFields.some(function(P){return P.id===R.id})})),C})},[e.formFields,c]);var d=is.useState(!1),f=d[0],p=d[1],m=is.useCallback(function(_,C){c(function(N){var R=N.find(function(P){return P.id===_});return R===void 0?an.__spreadArray(an.__spreadArray([],N,!0),[C({id:_,value:""})],!1):N.filter(function(P){return P.id!==R.id}).concat(C(R))})},[c]),x=is.useCallback(function(_){m(_.id,function(C){return an.__assign(an.__assign({},C),{validated:!1})})},[m]),v=is.useCallback(function(_){return an.__awaiter(void 0,void 0,void 0,function(){var C,N,R;return an.__generator(this,function(P){switch(P.label){case 0:return i?(C=e.formFields.find(function(O){return O.id===_.id}),C&&_.value!==""?[4,C.validate(_.value)]:[3,2]):[2];case 1:return R=P.sent(),[3,3];case 2:R=void 0,P.label=3;case 3:return N=R,m(_.id,function(O){return an.__assign(an.__assign({},O),{error:N,validated:N===void 0&&_.value.length!==0})}),[2]}})})},[i,m,e.formFields]),b=is.useCallback(function(_){if(typeof _.value!="string")throw new Error("".concat(_.id," value must be a string"));m(_.id,function(C){return an.__assign(an.__assign({},C),{value:_.value,error:void 0})}),e.clearError()},[m]),w=is.useCallback(function(_){return an.__awaiter(void 0,void 0,void 0,function(){var C,N,R,P,O,D,M,B,U,H,Z,ee,V;return an.__generator(this,function(te){switch(te.label){case 0:_.preventDefault(),p(!0),c(function(se){return se.map(function(Q){return an.__assign(an.__assign({},Q),{error:void 0})})}),C=a==null?void 0:a.map(function(se){var Q=l==null?void 0:l.find(function(X){return X.id===se.id});return{id:se.id,value:Q===void 0?"":Q.value}}),N=[],te.label=1;case 1:return te.trys.push([1,3,4,5]),[4,an.handleCallAPI({apiFields:C,fieldUpdates:N,callAPI:e.callAPI})];case 2:if(R=te.sent(),P=R.result,O=R.generalError,D=R.fetchError,s!=null&&s.current.signal.aborted)return[2];if(O!==void 0||P!==void 0&&P.status!=="OK")for(M=function(se){var Q=N.find(function(X){return X.id===se.id});(Q||se.clearOnSubmit===!0)&&m&&m(se.id,function(X){return an.__assign(an.__assign({},X),{value:Q?Q.value:""})})},B=0,U=a||[];B<U.length;B++)H=U[B],M(H);if(O!==void 0)e.onError(O.message);else if(D!==void 0)if(e.onFetchError)e.onFetchError(D);else throw D;else{if(P.status==="OK"&&(p(!1),e.clearError(),e.onSuccess!==void 0&&e.onSuccess(P)),s!=null&&s.current.signal.aborted)return[2];P.status==="FIELD_ERROR"&&(Z=P.formFields,ee=function(se){var Q,X=(Q=Z.find(function(Se){return Se.id===se.id}))===null||Q===void 0?void 0:Q.error;if(X==="Field is not optional"){var fe=a==null?void 0:a.find(function(Se){return Se.id===se.id});if((fe==null?void 0:fe.nonOptionalErrorMsg)!==void 0)return fe==null?void 0:fe.nonOptionalErrorMsg}return X},c(function(se){return se.map(function(Q){return an.__assign(an.__assign({},Q),{error:ee(Q)})})}))}return[3,5];case 3:return V=te.sent(),console.error(V),e.onError("SOMETHING_WENT_WRONG_ERROR"),[3,5];case 4:return p(!1),[7];case 5:return[2]}})})},[p,c,e,a,l,m]);return wr.jsx(Oae.Provider,an.__assign({value:l},{children:wr.jsxs("form",an.__assign({autoComplete:"on",noValidate:!0,onSubmit:w,"data-supertokens":e.formDataSupertokens},{children:[a.filter(function(_){return _.hidden!==!0}).map(function(_){var C="text";sPe.MANDATORY_FORM_FIELDS_ID_ARRAY.includes(_.id)&&(C=_.id),_.id==="confirm-password"&&(C="password");var N=l.find(function(R){return R.id===_.id})||{id:_.id,value:Tj(_)};return wr.jsx(R6,an.__assign({hasError:N.error!==void 0},{children:wr.jsxs(is.Fragment,{children:[n&&(_.labelComponent!==void 0?_.labelComponent:wr.jsx(Iae,{value:_.label,showIsRequired:_.showIsRequired})),wr.jsx(pPe,{type:C,field:_,fstate:N,onInputFocus:x,onInputBlur:v,onInputChange:b}),N.error&&wr.jsx(hPe,{error:N.error})]})}),_.id)}),wr.jsx(R6,{children:wr.jsxs(is.Fragment,{children:[wr.jsx(oPe.Button,{disabled:f,isLoading:f,type:"submit",label:r}),t]})},"form-button")]}))}))},Oae=cPe.default.createContext(void 0),gPe=function(){var e=is.useContext(Oae);if(e===void 0)throw new Error("useFormState used outside FormBase");return e};ib.ErrorIcon=Tae;ib.FormBase=mPe;ib.FormRow=R6;ib.Label=Iae;ib.useFormFields=gPe;var Pae={};(function(e){function t(n){for(var i in n)e.hasOwnProperty(i)||(e[i]=n[i])}e.__esModule=!0;let r=Ky;r.default!==void 0?t(r):t({default:r,...r})})(Pae);var Rae={},xPe=Mi,vPe=u,yPe=mn;function bPe(e){var t=e.children,r=e.recipeComponentOverrides;return vPe.jsx(yPe.ComponentOverrideContext.Provider,xPe.__assign({value:r},{children:t}))}Rae.AuthComponentWrapper=bPe;var xf={},ab={},jae={},Dae={},LE={},d4={},w2=Ve&&Ve.__assign||function(){return w2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},w2.apply(this,arguments)};Object.defineProperty(d4,"__esModule",{value:!0});d4.normaliseUserInput=void 0;var wPe=kE;function SPe(e){var t=w2({functions:function(r){return r}},e.override);return w2(w2({},(0,wPe.normaliseRecipeModuleConfig)(e)),{override:t})}d4.normaliseUserInput=SPe;var BE={},Ij=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},Oj=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(BE,"__esModule",{value:!0});BE.getRecipeImplementation=void 0;var Tm=Ox,cq=Br;function Mae(e){var t=new Tm.default(e.recipeId,e.appInfo);return{verifyEmail:function(r){var n=r.options,i=r.userContext;return Ij(this,void 0,void 0,function(){var a,s,o,l,c;return Oj(this,function(d){switch(d.label){case 0:return a=this.getEmailVerificationTokenFromURL({userContext:i}),s=this.getTenantIdFromURL({userContext:i}),[4,t.post({path:"/<tenantId>/user/email/verify",pathParams:{tenantId:s||"public"}},{body:{method:"token",token:a}},Tm.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"VERIFY_EMAIL",options:n,userContext:i}),Tm.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,userContext:i,action:"VERIFY_EMAIL"}))];case 1:return o=d.sent(),l=o.jsonBody,c=o.fetchResponse,[2,{status:l.status,fetchResponse:c}]}})})},isEmailVerified:function(r){var n=r.options,i=r.userContext;return Ij(this,void 0,void 0,function(){var a,s,o;return Oj(this,function(l){switch(l.label){case 0:return[4,t.get("/user/email/verify",{},Tm.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"IS_EMAIL_VERIFIED",options:n,userContext:i}),Tm.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,userContext:i,action:"IS_EMAIL_VERIFIED"}))];case 1:return a=l.sent(),s=a.jsonBody,o=a.fetchResponse,[2,{status:"OK",isVerified:s.isVerified,fetchResponse:o}]}})})},sendVerificationEmail:function(r){var n=r.options,i=r.userContext;return Ij(this,void 0,void 0,function(){var a,s,o;return Oj(this,function(l){switch(l.label){case 0:return[4,t.post("/user/email/verify/token",{body:void 0},Tm.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"SEND_VERIFY_EMAIL",options:n,userContext:i}),Tm.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,userContext:i,action:"SEND_VERIFY_EMAIL"}))];case 1:return a=l.sent(),s=a.jsonBody,o=a.fetchResponse,[2,{status:s.status,fetchResponse:o}]}})})},getEmailVerificationTokenFromURL:function(){var r=(0,cq.getQueryParams)("token");return r===void 0?"":r},getTenantIdFromURL:function(){return(0,cq.getQueryParams)("tenantId")}}}BE.default=Mae;BE.getRecipeImplementation=Mae;var UE={},EPe=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zA=Ve&&Ve.__assign||function(){return zA=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},zA.apply(this,arguments)},uq=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},dq=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(UE,"__esModule",{value:!0});UE.EmailVerificationClaimClass=void 0;var Fae=VL,CPe=WO,kPe=EE;function _Pe(e){return Math.max(e,Fae.DateProviderReference.getReferenceOrThrow().dateProvider.getThresholdInSeconds())}var NPe=function(e){EPe(t,e);function t(r){var n=e.call(this,{id:kPe.EMAILVERIFICATION_CLAIM_ID,refresh:function(i){return uq(n,void 0,void 0,function(){return dq(this,function(a){switch(a.label){case 0:return[4,r().isEmailVerified({userContext:i})];case 1:return a.sent(),[2]}})})}})||this;return n.validators=zA(zA({},n.validators),{isVerified:function(i,a){return{id:n.id,refresh:n.refresh,shouldRefresh:function(s,o){var l=Fae.DateProviderReference.getReferenceOrThrow().dateProvider;if(i=i??_Pe(10),a!==void 0&&a<l.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(l.getThresholdInSeconds()));if(i<l.getThresholdInSeconds())throw new Error("refetchTimeOnFalseInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(l.getThresholdInSeconds()));var c=n.getValueFromPayload(s,o);if(c===void 0)return!0;var d=l.now(),f=n.getLastFetchedTime(s,o);return a!==void 0&&f<d-a*1e3||c===!1&&f<d-i*1e3},validate:function(s,o){return uq(n,void 0,void 0,function(){var l;return dq(this,function(c){return l=this.getValueFromPayload(s,o),[2,l===!0?{isValid:!0}:{isValid:!1,reason:{message:"wrong value",expectedValue:!0,actualValue:l}}]})})}}}}),n}return t}(CPe.BooleanClaim);UE.EmailVerificationClaimClass=NPe;var HA=Ve&&Ve.__assign||function(){return HA=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},HA.apply(this,arguments)};Object.defineProperty(LE,"__esModule",{value:!0});LE.Recipe=void 0;var APe=YL,TPe=d4,IPe=BE,OPe=pf,Pj=Br,PPe=UE,RPe=Ax,Lae=function(){function e(t){this.config=(0,TPe.normaliseUserInput)(t);var r=new OPe.default((0,IPe.default)({recipeId:this.config.recipeId,appInfo:this.config.appInfo,clientType:this.config.clientType,preAPIHook:this.config.preAPIHook,postAPIHook:this.config.postAPIHook}));this.recipeImplementation=r.override(this.config.override.functions).build(),RPe.PostSuperTokensInitCallbacks.addPostInitCallback(function(){APe.SessionClaimValidatorStore.addClaimValidatorFromOtherRecipe(e.EmailVerificationClaim.validators.isVerified(10))})}return e.init=function(t){return function(r,n,i,a){return e.instance=new e(HA(HA({},(0,Pj.applyPlugins)(e.RECIPE_ID,t,a??[])),{appInfo:r,clientType:n,recipeId:e.RECIPE_ID})),e.instance}},e.getInstanceOrThrow=function(){if(e.instance===void 0){var t="No instance of EmailVerification found. Ensure that the 'EmailVerification.init' method is called within the 'SuperTokens.init' recipeList.";throw t=(0,Pj.checkForSSRErrorAndAppendIfNeeded)(t),Error(t)}return e.instance},e.reset=function(){(0,Pj.isTest)()&&(e.instance=void 0)},e.RECIPE_ID="emailverification",e.EmailVerificationClaim=new PPe.EmailVerificationClaimClass(function(){return e.getInstanceOrThrow().recipeImplementation}),e}();LE.Recipe=Lae;LE.default=Lae;(function(e){var t=Ve&&Ve.__assign||function(){return t=Object.assign||function(m){for(var x,v=1,b=arguments.length;v<b;v++){x=arguments[v];for(var w in x)Object.prototype.hasOwnProperty.call(x,w)&&(m[w]=x[w])}return m},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.EmailVerificationClaimClass=e.EmailVerificationClaim=e.getTenantIdFromURL=e.getEmailVerificationTokenFromURL=e.isEmailVerified=e.sendVerificationEmail=e.verifyEmail=e.init=void 0;var r=LE,n=Br,i=UE;Object.defineProperty(e,"EmailVerificationClaimClass",{enumerable:!0,get:function(){return i.EmailVerificationClaimClass}});var a=function(){function m(){}return m.init=function(x){return r.default.init(x)},m.verifyEmail=function(x){return r.default.getInstanceOrThrow().recipeImplementation.verifyEmail(t(t({},x),{userContext:(0,n.getNormalisedUserContext)(x==null?void 0:x.userContext)}))},m.sendVerificationEmail=function(x){return r.default.getInstanceOrThrow().recipeImplementation.sendVerificationEmail(t(t({},x),{userContext:(0,n.getNormalisedUserContext)(x==null?void 0:x.userContext)}))},m.isEmailVerified=function(x){return r.default.getInstanceOrThrow().recipeImplementation.isEmailVerified(t(t({},x),{userContext:(0,n.getNormalisedUserContext)(x==null?void 0:x.userContext)}))},m.getEmailVerificationTokenFromURL=function(x){return r.default.getInstanceOrThrow().recipeImplementation.getEmailVerificationTokenFromURL(t(t({},x),{userContext:(0,n.getNormalisedUserContext)(x==null?void 0:x.userContext)}))},m.getTenantIdFromURL=function(x){return r.default.getInstanceOrThrow().recipeImplementation.getTenantIdFromURL(t(t({},x),{userContext:(0,n.getNormalisedUserContext)(x==null?void 0:x.userContext)}))},m.EmailVerificationClaim=r.default.EmailVerificationClaim,m}();e.default=a;var s=a.init;e.init=s;var o=a.verifyEmail;e.verifyEmail=o;var l=a.sendVerificationEmail;e.sendVerificationEmail=l;var c=a.isEmailVerified;e.isEmailVerified=c;var d=a.getEmailVerificationTokenFromURL;e.getEmailVerificationTokenFromURL=d;var f=a.getTenantIdFromURL;e.getTenantIdFromURL=f;var p=a.EmailVerificationClaim;e.EmailVerificationClaim=p})(Dae);(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(Dae)})(jae);var jPe=Nx,hi=Mi,Bae=jae,DPe=ZO,MPe=XL,FPe=eb,LPe=Ra;function BPe(e){return e&&e.__esModule?e:{default:e}}var fq=BPe(Bae),Uae="/verify-email",UPe=function(e){hi.__extends(t,e);function t(r,n){var i=e.call(this,r)||this,a=hi.__assign({},i.validators),s=function(l){var c=a[l];a[l]=function(){for(var d=[],f=0;f<arguments.length;f++)d[f]=arguments[f];return hi.__assign(hi.__assign({},c.apply(void 0,d)),{onFailureRedirection:function(p){if(n!==void 0)return n(p);var m=h7.getInstanceOrThrow();if(m.config.mode==="REQUIRED")return m.getRedirectUrl({action:"VERIFY_EMAIL",tenantIdFromQueryParams:hi.getTenantIdFromQueryParams()},p.userContext)},showAccessDeniedOnFailure:!1})}};for(var o in a)s(o);return i.validators=a,i}return t}(Bae.EmailVerificationClaimClass),$Pe=function(e){return function(t){return hi.__assign(hi.__assign({},t),{verifyEmail:function(r){return hi.__awaiter(this,void 0,void 0,function(){var n;return hi.__generator(this,function(i){switch(i.label){case 0:return[4,t.verifyEmail(r)];case 1:return n=i.sent(),n.status==="OK"&&e({action:"EMAIL_VERIFIED_SUCCESSFUL",userContext:r.userContext}),[2,n]}})})},sendVerificationEmail:function(r){return hi.__awaiter(this,void 0,void 0,function(){var n;return hi.__generator(this,function(i){switch(i.label){case 0:return[4,t.sendVerificationEmail(r)];case 1:return n=i.sent(),n.status==="OK"&&e({action:"VERIFY_EMAIL_SENT",userContext:r.userContext}),[2,n]}})})}})}};function zPe(e){e===void 0&&(e={});var t=e.disableDefaultUI===!0,r=e.mode===void 0?"REQUIRED":e.mode,n=e.sendVerifyEmailScreen!==void 0&&e.sendVerifyEmailScreen.style!==void 0?e.sendVerifyEmailScreen.style:"",i={style:n},a=e.verifyEmailLinkClickedScreen!==void 0&&e.verifyEmailLinkClickedScreen.style!==void 0?e.verifyEmailLinkClickedScreen.style:"",s={style:a},o=hi.__assign({functions:function(l){return l}},e.override);return hi.__assign(hi.__assign({},LPe.normaliseRecipeModuleConfig(e)),{disableDefaultUI:t,mode:r,sendVerifyEmailScreen:i,verifyEmailLinkClickedScreen:s,override:o})}var h7=function(e){hi.__extends(t,e);function t(r,n){n===void 0&&(n=fq.default);var i=e.call(this,r)||this;return i.webJSRecipe=n,i.recipeID=t.RECIPE_ID,i.getDefaultRedirectionURL=function(a){return hi.__awaiter(i,void 0,void 0,function(){return hi.__generator(this,function(s){return a.action==="VERIFY_EMAIL"?[2,hi.getDefaultRedirectionURLForPath(this.config,Uae,a)]:[2,"/"]})})},DPe.PostSuperTokensInitCallbacks.addPostInitCallback(function(){var a=t.EmailVerificationClaim.validators.isVerified(10);MPe.SessionClaimValidatorStore.addClaimValidatorFromOtherRecipe(a)}),i}return t.init=function(r){var n=zPe(r);return{recipeID:t.RECIPE_ID,authReact:function(i){return t.instance=new t(hi.__assign(hi.__assign({},n),{appInfo:i,recipeId:t.RECIPE_ID})),t.instance},webJS:fq.default.init(hi.__assign(hi.__assign({},n),{override:{functions:function(i,a){var s=$Pe(n.onHandleEvent);return a.override(s),a.override(n.override.functions),i}}}))}},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of EmailVerification found. Make sure to call the EmailVerification.init method.";throw typeof window>"u"&&(r=r+hi.SSR_ERROR),Error(r)}return t.instance},t.prototype.isEmailVerified=function(r){return hi.__awaiter(this,void 0,void 0,function(){return hi.__generator(this,function(n){switch(n.label){case 0:return[4,this.webJSRecipe.isEmailVerified({userContext:r})];case 1:return[2,n.sent()]}})})},t.reset=function(){hi.isTest()&&(t.instance=void 0)},t.RECIPE_ID="emailverification",t.EmailVerificationClaim=new UPe(function(){return t.getInstanceOrThrow().webJSRecipe}),t}(FPe.RecipeModule),$ae=jPe.createGenericComponentsOverrideContext(void 0,h7.RECIPE_ID),HPe=$ae[0],WPe=$ae[1];ab.DEFAULT_VERIFY_EMAIL_PATH=Uae;ab.EmailVerification=h7;ab.Provider=WPe;ab.useContext=HPe;Object.defineProperty(xf,"__esModule",{value:!0});var Za=Mi,Op=ab,Dx=function(){function e(){}return e.init=function(t){return Op.EmailVerification.init(t)},e.isEmailVerified=function(t){return Za.__awaiter(this,void 0,void 0,function(){return Za.__generator(this,function(r){return[2,Op.EmailVerification.getInstanceOrThrow().webJSRecipe.isEmailVerified(Za.__assign(Za.__assign({},t),{userContext:Za.getNormalisedUserContext(t==null?void 0:t.userContext)}))]})})},e.verifyEmail=function(t){return Za.__awaiter(this,void 0,void 0,function(){return Za.__generator(this,function(r){return[2,Op.EmailVerification.getInstanceOrThrow().webJSRecipe.verifyEmail(Za.__assign(Za.__assign({},t),{userContext:Za.getNormalisedUserContext(t==null?void 0:t.userContext)}))]})})},e.sendVerificationEmail=function(t){return Za.__awaiter(this,void 0,void 0,function(){return Za.__generator(this,function(r){return[2,Op.EmailVerification.getInstanceOrThrow().webJSRecipe.sendVerificationEmail(Za.__assign(Za.__assign({},t),{userContext:Za.getNormalisedUserContext(t==null?void 0:t.userContext)}))]})})},e.getEmailVerificationTokenFromURL=function(t){return Op.EmailVerification.getInstanceOrThrow().webJSRecipe.getEmailVerificationTokenFromURL(Za.__assign(Za.__assign({},t),{userContext:Za.getNormalisedUserContext(t==null?void 0:t.userContext)}))},e.EmailVerificationClaim=Op.EmailVerification.EmailVerificationClaim,e.ComponentsOverrideProvider=Op.Provider,e}(),VPe=Dx.init,qPe=Dx.isEmailVerified,GPe=Dx.verifyEmail,KPe=Dx.sendVerificationEmail,XPe=Dx.getEmailVerificationTokenFromURL,YPe=Dx.ComponentsOverrideProvider,QPe=Op.EmailVerification.EmailVerificationClaim;xf.EmailVerificationClaim=QPe;xf.EmailVerificationComponentsOverrideProvider=YPe;xf.default=Dx;xf.getEmailVerificationTokenFromURL=XPe;xf.init=VPe;xf.isEmailVerified=qPe;xf.sendVerificationEmail=KPe;xf.verifyEmail=GPe;var Tt=Mi,lr=u,JPe=zO,ra=mn,E1=o4,vl=I,Eg=Ra,f4=u7,h4=Px,ZPe=Aae,iy=ib,eRe=Pae,tRe=d7,zae=Rae,Hae=xf,Wae=ab,Vae=Wi,ay=vu,j6=l4,rRe=Ky,nRe=ME;function p7(e){return e&&e.__esModule?e:{default:e}}function iRe(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}var aRe=p7(JPe),Wd=iRe(vl),WA=p7(eRe),sRe=p7(rRe);function oRe(e){var t=e.onClick,r=h4.useTranslation();return lr.jsxs("div",Tt.__assign({"data-supertokens":"secondaryText secondaryLinkWithLeftArrow",onClick:t},{children:[lr.jsx(ZPe.ArrowLeftIcon,{color:"rgb(var(--palette-secondaryText))"}),r("EMAIL_PASSWORD_RESET_SIGN_IN_LINK")]}))}var lRe=function(e){var t=h4.useTranslation(),r=ra.useUserContext(),n=vl.useState("READY"),i=n[0],a=n[1],s=vl.useState(""),o=s[0],l=s[1],c=function(){a("SENT")},d=function(){a("READY")},f=e.formFields,p=t("EMAIL_PASSWORD_RESET_SEND_BEFORE_EMAIL")+(o!==void 0&&o.length>0?o:t("EMAIL_PASSWORD_RESET_SEND_FALLBACK_EMAIL"))+t("EMAIL_PASSWORD_RESET_SEND_AFTER_EMAIL");return i==="SENT"?lr.jsx("div",Tt.__assign({"data-supertokens":"container"},{children:lr.jsxs("div",Tt.__assign({"data-supertokens":"row"},{children:[lr.jsxs("div",Tt.__assign({"data-supertokens":"primaryText enterEmailSuccessMessage"},{children:[p,lr.jsx("span",Tt.__assign({"data-supertokens":"link resendEmailLink",onClick:d},{children:t("EMAIL_PASSWORD_RESET_RESEND_LINK")}))]})),lr.jsx(oRe,{onClick:e.onBackButtonClicked})]}))})):lr.jsx("div",Tt.__assign({"data-supertokens":"container resetPasswordEmailForm"},{children:lr.jsxs("div",Tt.__assign({"data-supertokens":"row"},{children:[lr.jsxs("div",Tt.__assign({"data-supertokens":"headerTitle withBackButton"},{children:[lr.jsx(ra.BackButton,{onClick:e.onBackButtonClicked}),t("EMAIL_PASSWORD_RESET_HEADER_TITLE"),lr.jsx("span",{"data-supertokens":"backButtonPlaceholder backButtonCommon"})]})),lr.jsx("div",Tt.__assign({"data-supertokens":"headerSubtitle secondaryText"},{children:t("EMAIL_PASSWORD_RESET_HEADER_SUBTITLE")})),e.error!==void 0&&lr.jsx(ra.GeneralError,{error:e.error}),lr.jsx(iy.FormBase,{clearError:e.clearError,onError:e.onError,formFields:f,buttonLabel:"EMAIL_PASSWORD_RESET_SEND_BTN",onSuccess:c,callAPI:function(m){return Tt.__awaiter(void 0,void 0,void 0,function(){var x,v,b;return Tt.__generator(this,function(w){switch(w.label){case 0:return[4,Tt.validateForm(m,e.config.resetPasswordUsingTokenFeature.enterEmailForm.formFields)];case 1:return x=w.sent(),x.length>0?[2,{status:"FIELD_ERROR",formFields:x}]:(v=m.find(function(_){return _.id==="email"}),v!==void 0&&l(v.value),[4,e.recipeImplementation.sendPasswordResetEmail({formFields:m,userContext:r})]);case 2:return b=w.sent(),b.status==="PASSWORD_RESET_NOT_ALLOWED"?[2,{status:"FIELD_ERROR",formFields:[{id:"email",error:b.reason}]}]:[2,b]}})})},showLabels:!0,validateOnBlur:!0,footer:e.footer})]}))}))},cRe=ra.withOverride("EmailPasswordResetPasswordEmail",lRe),uRe=function(e){var t=h4.useTranslation(),r=ra.useUserContext(),n=vl.useState("READY"),i=n[0],a=n[1],s=function(){a("SUCCESS")},o=e.formFields,l=e.onSignInClicked;return i==="SUCCESS"?lr.jsx("div",Tt.__assign({"data-supertokens":"container"},{children:lr.jsxs("div",Tt.__assign({"data-supertokens":"row"},{children:[lr.jsx("div",Tt.__assign({"data-supertokens":"headerTitle"},{children:t("EMAIL_PASSWORD_RESET_SUBMIT_PW_SUCCESS_HEADER_TITLE")})),lr.jsx(iy.FormRow,{children:lr.jsxs(vl.Fragment,{children:[lr.jsx("div",Tt.__assign({"data-supertokens":"primaryText submitNewPasswordSuccessMessage"},{children:t("EMAIL_PASSWORD_RESET_SUBMIT_PW_SUCCESS_DESC")})),lr.jsx(tRe.Button,{disabled:!1,isLoading:!1,type:"button",onClick:l,label:"EMAIL_PASSWORD_RESET_SUBMIT_PW_SUCCESS_SIGN_IN_BTN"})]})},"form-button")]}))})):lr.jsx("div",Tt.__assign({"data-supertokens":"container resetPasswordPasswordForm"},{children:lr.jsxs("div",Tt.__assign({"data-supertokens":"row"},{children:[lr.jsx("div",Tt.__assign({"data-supertokens":"headerTitle"},{children:t("EMAIL_PASSWORD_RESET_SUBMIT_PW_HEADER_TITLE")})),lr.jsx("div",Tt.__assign({"data-supertokens":"headerSubtitle secondaryText"},{children:t("EMAIL_PASSWORD_RESET_SUBMIT_PW_HEADER_SUBTITLE")})),e.error!==void 0&&lr.jsx(ra.GeneralError,{error:e.error}),lr.jsx(iy.FormBase,{formFields:o,clearError:e.clearError,onError:e.onError,buttonLabel:"EMAIL_PASSWORD_RESET_SUBMIT_PW_CHANGE_PW_BTN",onSuccess:s,validateOnBlur:!0,callAPI:function(c){return Tt.__awaiter(void 0,void 0,void 0,function(){var d,f;return Tt.__generator(this,function(p){switch(p.label){case 0:return[4,Tt.validateForm(c,e.config.resetPasswordUsingTokenFeature.submitNewPasswordForm.formFields)];case 1:return d=p.sent(),d.length>0?[2,{status:"FIELD_ERROR",formFields:d}]:c[0].value!==c[1].value?[2,{status:"FIELD_ERROR",formFields:[{id:c[1].id,error:"ERROR_CONFIRM_PASSWORD_NO_MATCH"}]}]:[4,e.recipeImplementation.submitNewPassword({formFields:c,userContext:r})];case 2:if(f=p.sent(),f.status==="RESET_PASSWORD_INVALID_TOKEN_ERROR")throw new WA.default("EMAIL_PASSWORD_RESET_PASSWORD_INVALID_TOKEN_ERROR");return[2,f.status==="FIELD_ERROR"?f:{status:"OK"}]}})})},showLabels:!0,footer:e.footer})]}))}))},dRe=ra.withOverride("EmailPasswordSubmitNewPassword",uRe);function fRe(e){return e.submitNewPasswordForm!==void 0?lr.jsx(dRe,Tt.__assign({},e.submitNewPasswordForm)):lr.jsx(cRe,Tt.__assign({},e.enterEmailForm))}function m7(e){var t=Eg.SuperTokens.getInstanceOrThrow().rootStyle,r=e.submitNewPasswordForm?e.config.resetPasswordUsingTokenFeature.submitNewPasswordForm.style:e.config.resetPasswordUsingTokenFeature.enterEmailForm.style;return lr.jsx(ra.UserContextWrapper,Tt.__assign({userContext:e.userContext},{children:lr.jsx(f4.ThemeBase,Tt.__assign({userStyles:[t,e.config.recipeRootStyle,r]},{children:lr.jsx(fRe,Tt.__assign({},e))}))}))}var D6={en:Tt.__assign(Tt.__assign(Tt.__assign({},Eg.defaultTranslationsCommon.en),f4.defaultTranslationsEmailVerification.en),{EMAIL_PASSWORD_EMAIL_LABEL:"Email",EMAIL_PASSWORD_EMAIL_PLACEHOLDER:"Email address",EMAIL_PASSWORD_PASSWORD_LABEL:"Password",EMAIL_PASSWORD_PASSWORD_PLACEHOLDER:"Password",EMAIL_PASSWORD_SIGN_IN_FORGOT_PW_LINK:"Forgot password?",EMAIL_PASSWORD_SIGN_IN_SUBMIT_BTN:"SIGN IN",EMAIL_PASSWORD_SIGN_IN_WRONG_CREDENTIALS_ERROR:"Incorrect email and password combination",EMAIL_PASSWORD_SIGN_UP_SUBMIT_BTN:"SIGN UP",EMAIL_PASSWORD_EMAIL_ALREADY_EXISTS:"This email already exists. Please sign in instead",EMAIL_PASSWORD_RESET_HEADER_TITLE:"Reset your password",EMAIL_PASSWORD_RESET_HEADER_SUBTITLE:"We will send you an email to reset your password",EMAIL_PASSWORD_RESET_SEND_FALLBACK_EMAIL:"your account",EMAIL_PASSWORD_RESET_SEND_BEFORE_EMAIL:"A password reset email has been sent to ",EMAIL_PASSWORD_RESET_SEND_AFTER_EMAIL:", if it exists in our system. ",EMAIL_PASSWORD_RESET_RESEND_LINK:"Resend or change email",EMAIL_PASSWORD_RESET_SEND_BTN:"Email me",EMAIL_PASSWORD_RESET_SIGN_IN_LINK:"Sign In",EMAIL_PASSWORD_RESET_SUBMIT_PW_SUCCESS_HEADER_TITLE:"Success!",EMAIL_PASSWORD_RESET_SUBMIT_PW_SUCCESS_DESC:"Your password has been updated successfully",EMAIL_PASSWORD_RESET_SUBMIT_PW_SUCCESS_SIGN_IN_BTN:"SIGN IN",EMAIL_PASSWORD_NEW_PASSWORD_LABEL:"New password",EMAIL_PASSWORD_NEW_PASSWORD_PLACEHOLDER:"New password",EMAIL_PASSWORD_CONFIRM_PASSWORD_LABEL:"Confirm password",EMAIL_PASSWORD_CONFIRM_PASSWORD_PLACEHOLDER:"Confirm your password",EMAIL_PASSWORD_RESET_SUBMIT_PW_HEADER_TITLE:"Change your password",EMAIL_PASSWORD_RESET_SUBMIT_PW_HEADER_SUBTITLE:"Enter a new password below to change your password",EMAIL_PASSWORD_RESET_SUBMIT_PW_CHANGE_PW_BTN:"CHANGE PASSWORD",EMAIL_PASSWORD_RESET_PASSWORD_INVALID_TOKEN_ERROR:"Invalid password reset token",ERROR_EMAIL_NON_STRING:"Email must be of type string",ERROR_EMAIL_INVALID:"Email is invalid",ERROR_PASSWORD_NON_STRING:"Password must be of type string",ERROR_PASSWORD_TOO_SHORT:"Password must contain at least 8 characters, including a number",ERROR_PASSWORD_TOO_LONG:"Password's length must be lesser than 100 characters",ERROR_PASSWORD_NO_ALPHA:"Password must contain at least one alphabet",ERROR_PASSWORD_NO_NUM:"Password must contain at least one number",ERROR_CONFIRM_PASSWORD_NO_MATCH:"Confirmation password doesn't match",ERROR_NON_OPTIONAL:"Field is not optional","This email already exists. Please sign in instead.":void 0,"Field is not optional":void 0,"Password must contain at least 8 characters, including a number":void 0,"Password's length must be lesser than 100 characters":void 0,"Password must contain at least one alphabet":void 0,"Password must contain at least one number":void 0,"Email is invalid":void 0,"Reset password link was not created because of account take over risk. Please contact support. (ERR_CODE_001)":void 0,"Cannot sign up due to security reasons. Please try logging in, use a different login method or contact support. (ERR_CODE_007)":void 0,"Cannot sign in due to security reasons. Please try resetting your password, use a different login method or contact support. (ERR_CODE_008)":void 0,"Cannot sign in / up due to security reasons. Please contact support. (ERR_CODE_009)":void 0,"Cannot sign in / up due to security reasons. Please contact support. (ERR_CODE_010)":void 0,"Cannot sign in / up due to security reasons. Please contact support. (ERR_CODE_011)":void 0,"Cannot sign in / up due to security reasons. Please contact support. (ERR_CODE_012)":void 0,"Cannot sign in / up due to security reasons. Please contact support. (ERR_CODE_013)":void 0,"Cannot sign in / up due to security reasons. Please contact support. (ERR_CODE_014)":void 0,"Cannot sign in / up due to security reasons. Please contact support. (ERR_CODE_015)":void 0,"Cannot sign in / up due to security reasons. Please contact support. (ERR_CODE_016)":void 0})},hRe=function(e){var t=Tt.getQueryParams("token"),r=ra.useUserContext();e.userContext!==void 0&&(r=e.userContext);var n=Wd.useState(),i=n[0],a=n[1],s=e.recipe.config.resetPasswordUsingTokenFeature.enterEmailForm,o=e.recipe.config.resetPasswordUsingTokenFeature.submitNewPasswordForm,l=t==null?void 0:{error:i,onError:function(p){return a(p)},clearError:function(){return a(void 0)},styleFromInit:o.style,formFields:o.formFields,recipeImplementation:e.recipe.webJSRecipe,config:e.recipe.config,onSignInClicked:function(){Eg.SuperTokens.getInstanceOrThrow().redirectToAuth({show:"signin",navigate:e.navigate,redirectBack:!1,userContext:r})},token:t},c={onBackButtonClicked:function(){return Eg.SuperTokens.getInstanceOrThrow().redirectToAuth({show:"signin",navigate:e.navigate,redirectBack:!1,userContext:r})},error:i,onError:function(p){return a(p)},clearError:function(){return a(void 0)},styleFromInit:s.style,formFields:s.formFields,recipeImplementation:e.recipe.webJSRecipe,config:e.recipe.config},d={config:e.recipe.config,submitNewPasswordForm:l,enterEmailForm:c},f=e.useComponentOverrides();return lr.jsx(ra.ComponentOverrideContext.Provider,Tt.__assign({value:f},{children:lr.jsx(ra.FeatureWrapper,Tt.__assign({useShadowDom:Eg.SuperTokens.getInstanceOrThrow().useShadowDom,defaultStore:D6},{children:lr.jsxs(vl.Fragment,{children:[e.children===void 0&&lr.jsx(m7,Tt.__assign({},d)),e.children&&Wd.Children.map(e.children,function(p){return Wd.isValidElement(p)?Wd.cloneElement(p,d):p})]})}))}))},pRe=ra.withOverride("EmailPasswordSignInForm",function(t){var r=this,n=ra.useUserContext();return lr.jsx(iy.FormBase,{formFields:t.formFields,clearError:t.clearError,onError:t.onError,onFetchError:t.onFetchError,buttonLabel:"EMAIL_PASSWORD_SIGN_IN_SUBMIT_BTN",onSuccess:t.onSuccess,callAPI:function(i){return Tt.__awaiter(r,void 0,void 0,function(){var a,s;return Tt.__generator(this,function(o){switch(o.label){case 0:return[4,Tt.validateForm(i,t.config.signInAndUpFeature.signInForm.formFields)];case 1:return a=o.sent(),a.length>0?[2,{status:"FIELD_ERROR",formFields:a}]:[4,t.recipeImplementation.signIn({formFields:i,shouldTryLinkingWithSessionUser:!1,userContext:n})];case 2:if(s=o.sent(),s.status==="WRONG_CREDENTIALS_ERROR")throw new WA.default("EMAIL_PASSWORD_SIGN_IN_WRONG_CREDENTIALS_ERROR");if(s.status==="SIGN_IN_NOT_ALLOWED")throw new WA.default(s.reason);return[2,s]}})})},validateOnBlur:!1,showLabels:!0,footer:t.footer})});function mRe(e){var t=Eg.SuperTokens.getInstanceOrThrow().rootStyle,r=e.config.signInAndUpFeature.signInForm.style;return lr.jsx(ra.UserContextWrapper,Tt.__assign({userContext:e.userContext},{children:lr.jsx(f4.ThemeBase,Tt.__assign({userStyles:[t,e.config.recipeRootStyle,r]},{children:lr.jsx(pRe,Tt.__assign({},e))}))}))}function gRe(e,t,r,n,i,a,s){var o=this,l=ra.useSessionContext(),c=vl.useMemo(function(){return vRe(e.webJSRecipe)},[e]),d=Tt.useRethrowInRender(),f=h4.useTranslation(),p=vl.useCallback(function(){return Tt.__awaiter(o,void 0,void 0,function(){var m;return Tt.__generator(this,function(x){switch(x.label){case 0:return x.trys.push([0,2,,3]),[4,ay.Session.getInstanceOrThrow().getAccessTokenPayloadSecurely({userContext:a})];case 1:return m=x.sent(),[3,3];case 2:return x.sent(),m=void 0,[3,3];case 3:return[2,t({createdNewUser:!1,isNewRecipeUser:!1,newSessionCreated:l.loading||!l.doesSessionExist||m!==void 0&&l.accessTokenPayload.sessionHandle!==m.sessionHandle,recipeId:j6.EmailPassword.RECIPE_ID}).catch(d)]}})})},[e,a,s]);return vl.useMemo(function(){var m=function(){return e.redirect({action:"RESET_PASSWORD",tenantIdFromQueryParams:Tt.getTenantIdFromQueryParams()},s,void 0,a)},x=e.config.signInAndUpFeature,v=x.signInForm,b=v.formFields.map(function(w){return w.id!=="password"?w:Tt.__assign(Tt.__assign({},w),{labelComponent:lr.jsxs("div",Tt.__assign({"data-supertokens":"formLabelWithLinkWrapper"},{children:[lr.jsx(iy.Label,{value:w.label,"data-supertokens":"passwordInputLabel"}),lr.jsx("a",Tt.__assign({onClick:m,"data-supertokens":"link linkButton formLabelLinkBtn forgotPasswordLink"},{children:f("EMAIL_PASSWORD_SIGN_IN_FORGOT_PW_LINK")}))]}))})});return{recipeImplementation:c,config:e.config,styleFromInit:v.style,formFields:b,error:r,clearError:i,onError:n,onFetchError:function(w){return Tt.__awaiter(o,void 0,void 0,function(){var _,C;return Tt.__generator(this,function(N){switch(N.label){case 0:return w.status!==ay.Session.getInstanceOrThrow().config.invalidClaimStatusCode?[3,5]:[4,Vae.getInvalidClaimsFromResponse({response:w,userContext:a})];case 1:if(_=N.sent(),!_.some(function(R){return R.id===Hae.EmailVerificationClaim.id}))return[3,5];N.label=2;case 2:return N.trys.push([2,4,,5]),C=Wae.EmailVerification.getInstanceOrThrow(),[4,C.redirect({action:"VERIFY_EMAIL",tenantIdFromQueryParams:Tt.getTenantIdFromQueryParams()},s,void 0,a)];case 3:return N.sent(),[2];case 4:return N.sent(),[3,5];case 5:return n("SOMETHING_WENT_WRONG_ERROR"),[2]}})})},onSuccess:p,onForgotPasswordClick:m,userContext:a}},[e,r,a])}var xRe=function(e){var t=gRe(e.recipe,e.onAuthSuccess,e.error,e.onError,e.clearError,e.userContext,e.navigate),r=e.useComponentOverrides();return lr.jsx(zae.AuthComponentWrapper,Tt.__assign({recipeComponentOverrides:r},{children:lr.jsxs(vl.Fragment,{children:[e.children===void 0&&lr.jsx(mRe,Tt.__assign({},t)),e.children&&Wd.Children.map(e.children,function(n){return Wd.isValidElement(n)?Wd.cloneElement(n,Tt.__assign({},t)):n})]})}))},vRe=function(e){return Tt.__assign(Tt.__assign({},e),{signIn:function(t){return Tt.__awaiter(this,void 0,void 0,function(){var r;return Tt.__generator(this,function(n){switch(n.label){case 0:return[4,e.signIn(Tt.__assign(Tt.__assign({},t),{shouldTryLinkingWithSessionUser:!1}))];case 1:return r=n.sent(),[2,r]}})})},signUp:function(t){return Tt.__awaiter(this,void 0,void 0,function(){var r;return Tt.__generator(this,function(n){switch(n.label){case 0:return[4,e.signUp(Tt.__assign(Tt.__assign({},t),{shouldTryLinkingWithSessionUser:!1}))];case 1:return r=n.sent(),[2,r]}})})}})},yRe=ra.withOverride("EmailPasswordSignUpForm",function(t){var r=this,n=ra.useUserContext();return lr.jsx(iy.FormBase,{formFields:t.formFields,clearError:t.clearError,onError:t.onError,onFetchError:t.onFetchError,buttonLabel:"EMAIL_PASSWORD_SIGN_UP_SUBMIT_BTN",onSuccess:t.onSuccess,callAPI:function(i){return Tt.__awaiter(r,void 0,void 0,function(){var a,s;return Tt.__generator(this,function(o){switch(o.label){case 0:return[4,Tt.validateForm(i,t.config.signInAndUpFeature.signUpForm.formFields)];case 1:return a=o.sent(),a.length>0?[2,{status:"FIELD_ERROR",formFields:a}]:[4,t.recipeImplementation.signUp({formFields:i,shouldTryLinkingWithSessionUser:!1,userContext:n})];case 2:if(s=o.sent(),s.status==="SIGN_UP_NOT_ALLOWED")throw new sRe.default(s.reason);return[2,s]}})})},validateOnBlur:!0,showLabels:!0,footer:t.footer})});function bRe(e){var t=Eg.SuperTokens.getInstanceOrThrow().rootStyle,r=e.config.signInAndUpFeature.signUpForm.style;return lr.jsx(ra.UserContextWrapper,Tt.__assign({userContext:e.userContext},{children:lr.jsx(f4.ThemeBase,Tt.__assign({userStyles:[t,e.config.recipeRootStyle,r]},{children:lr.jsx(yRe,Tt.__assign({},e))}))}))}function wRe(e,t,r,n,i,a,s){var o=this,l=ra.useSessionContext(),c=vl.useMemo(function(){return e&&ERe(e.webJSRecipe)},[e]),d=Tt.useRethrowInRender(),f=vl.useCallback(function(p){return Tt.__awaiter(o,void 0,void 0,function(){var m;return Tt.__generator(this,function(x){switch(x.label){case 0:return x.trys.push([0,2,,3]),[4,ay.Session.getInstanceOrThrow().getAccessTokenPayloadSecurely({userContext:a})];case 1:return m=x.sent(),[3,3];case 2:return x.sent(),m=void 0,[3,3];case 3:return[2,t({createdNewUser:p.user.loginMethods.length===1,isNewRecipeUser:!0,newSessionCreated:l.loading||!l.doesSessionExist||m!==void 0&&l.accessTokenPayload.sessionHandle!==m.sessionHandle,recipeId:e.recipeID}).catch(d)]}})})},[e,a,s]);return vl.useMemo(function(){var p=e.config.signInAndUpFeature,m=p.signUpForm;return{recipeImplementation:c,config:e.config,styleFromInit:m.style,formFields:CRe(m.formFields,e,a),onFetchError:function(x){return Tt.__awaiter(o,void 0,void 0,function(){var v,b;return Tt.__generator(this,function(w){switch(w.label){case 0:return x.status!==ay.Session.getInstanceOrThrow().config.invalidClaimStatusCode?[3,5]:[4,Vae.getInvalidClaimsFromResponse({response:x,userContext:a})];case 1:if(v=w.sent(),!v.some(function(_){return _.id===Hae.EmailVerificationClaim.id}))return[3,5];w.label=2;case 2:return w.trys.push([2,4,,5]),b=Wae.EmailVerification.getInstanceOrThrow(),[4,b.redirect({action:"VERIFY_EMAIL",tenantIdFromQueryParams:Tt.getTenantIdFromQueryParams()},s,void 0,a)];case 3:return w.sent(),[2];case 4:return w.sent(),[3,5];case 5:return n("SOMETHING_WENT_WRONG_ERROR"),[2]}})})},onSuccess:f,userContext:a,error:r,onError:n,clearError:i}},[e,r,a])}var SRe=function(e){var t=ra.useUserContext();e.userContext!==void 0&&(t=e.userContext);var r=wRe(e.recipe,e.onAuthSuccess,e.error,e.onError,e.clearError,t,e.navigate),n=e.useComponentOverrides();return lr.jsx(zae.AuthComponentWrapper,Tt.__assign({recipeComponentOverrides:n},{children:lr.jsxs(vl.Fragment,{children:[e.children===void 0&&lr.jsx(bRe,Tt.__assign({},r)),e.children&&Wd.Children.map(e.children,function(i){return Wd.isValidElement(i)?Wd.cloneElement(i,Tt.__assign({},r)):i})]})}))},ERe=function(e){return Tt.__assign(Tt.__assign({},e),{signIn:function(t){return Tt.__awaiter(this,void 0,void 0,function(){var r;return Tt.__generator(this,function(n){switch(n.label){case 0:return[4,e.signIn(Tt.__assign(Tt.__assign({},t),{shouldTryLinkingWithSessionUser:!1}))];case 1:return r=n.sent(),[2,r]}})})},signUp:function(t){return Tt.__awaiter(this,void 0,void 0,function(){var r;return Tt.__generator(this,function(n){switch(n.label){case 0:return[4,e.signUp(Tt.__assign(Tt.__assign({},t),{shouldTryLinkingWithSessionUser:!1}))];case 1:return r=n.sent(),[2,r]}})})}})};function CRe(e,t,r){var n=this,i=e.length===2;return e.map(function(a){return Tt.__assign(Tt.__assign({},a),{showIsRequired:function(){return i?!1:a.optional===!1}(),validate:function(){return a.id!=="email"?a.validate:function(s){return Tt.__awaiter(n,void 0,void 0,function(){var o,l,c;return Tt.__generator(this,function(d){switch(d.label){case 0:return[4,a.validate(s)];case 1:if(o=d.sent(),o!==void 0)return[2,o];if(typeof s!="string")return[2,"GENERAL_ERROR_EMAIL_NON_STRING"];d.label=2;case 2:return d.trys.push([2,4,,5]),[4,t.webJSRecipe.doesEmailExist({email:s,userContext:r})];case 3:return l=d.sent().doesExist,l?[2,"EMAIL_PASSWORD_EMAIL_ALREADY_EXISTS"]:[3,5];case 4:return c=d.sent(),WA.default.isThisError(c)?[2,c.message]:[3,5];case 5:return[2,void 0]}})})}}()})})}var qae=function(e){Tt.__extends(t,e);function t(r){var n=e.call(this)||this;return n.recipeInstance=r,n.languageTranslations=D6,n.getFeatures=function(i){i===void 0&&(i=E1.useContext);var a={};if(n.recipeInstance.config.resetPasswordUsingTokenFeature.disableDefaultUI!==!0){var s=n.recipeInstance.config.appInfo.websiteBasePath.appendPath(new aRe.default(nRe.DEFAULT_RESET_PASSWORD_PATH));a[s.getAsStringDangerous()]={matches:Tt.matchRecipeIdUsingQueryParams(n.recipeInstance.config.recipeId),component:function(o){return n.getFeatureComponent("resetpassword",o,i)},recipeID:j6.EmailPassword.RECIPE_ID}}return a},n.getFeatureComponent=function(i,a,s){if(s===void 0&&(s=E1.useContext),i==="resetpassword")return lr.jsx(ra.UserContextWrapper,Tt.__assign({userContext:a.userContext},{children:lr.jsx(hRe,Tt.__assign({recipe:n.recipeInstance},a,{useComponentOverrides:s}))}));throw new Error("Should never come here.")},n.requiresSignUpPage=!0,n}return t.getInstanceOrInitAndGetInstance=function(){if(t.instance===void 0){var r=j6.EmailPassword.getInstanceOrThrow();t.instance=new t(r)}return t.instance},t.getFeatures=function(r){return r===void 0&&(r=E1.useContext),t.getInstanceOrInitAndGetInstance().getFeatures(r)},t.getFeatureComponent=function(r,n,i){return i===void 0&&(i=E1.useContext),t.getInstanceOrInitAndGetInstance().getFeatureComponent(r,n,i)},t.prototype.getAuthComponents=function(){var r=this;return[{factorIds:[ay.FactorIds.EMAILPASSWORD],displayOrder:2,type:"SIGN_UP",component:function(n){return lr.jsx(SRe,Tt.__assign({recipe:r.recipeInstance,useComponentOverrides:E1.useContext},n),"emailpassword-sign-up")}},{factorIds:[ay.FactorIds.EMAILPASSWORD],displayOrder:2,type:"SIGN_IN",component:function(n){return lr.jsx(xRe,Tt.__assign({recipe:r.recipeInstance,useComponentOverrides:E1.useContext},n),"emailpassword-sign-in")}}]},t.reset=function(){Tt.isTest()&&(t.instance=void 0)},t.languageTranslations=D6,t.ResetPasswordUsingToken=function(r){return t.getInstanceOrInitAndGetInstance().getFeatureComponent("resetpassword",r)},t.ResetPasswordUsingTokenTheme=m7,t}(ra.RecipeRouter),kRe=qae.ResetPasswordUsingToken;s4.EmailPasswordPreBuiltUI=qae;s4.ResetPasswordUsingToken=kRe;s4.ResetPasswordUsingTokenTheme=m7;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(s4)})(vae);let _Re={data:""},NRe=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||_Re},ARe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,TRe=/\/\*[^]*?\*\/|  +/g,hq=/\n+/g,Vp=(e,t)=>{let r="",n="",i="";for(let a in e){let s=e[a];a[0]=="@"?a[1]=="i"?r=a+" "+s+";":n+=a[1]=="f"?Vp(s,a):a+"{"+Vp(s,a[1]=="k"?"":t)+"}":typeof s=="object"?n+=Vp(s,t?t.replace(/([^,])+/g,o=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,o):o?o+" "+l:l)):a):s!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Vp.p?Vp.p(a,s):a+":"+s+";")}return r+(t&&i?t+"{"+i+"}":i)+n},Wf={},Gae=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+Gae(e[r]);return t}return e},IRe=(e,t,r,n,i)=>{let a=Gae(e),s=Wf[a]||(Wf[a]=(l=>{let c=0,d=11;for(;c<l.length;)d=101*d+l.charCodeAt(c++)>>>0;return"go"+d})(a));if(!Wf[s]){let l=a!==e?e:(c=>{let d,f,p=[{}];for(;d=ARe.exec(c.replace(TRe,""));)d[4]?p.shift():d[3]?(f=d[3].replace(hq," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][d[1]]=d[2].replace(hq," ").trim();return p[0]})(e);Wf[s]=Vp(i?{["@keyframes "+s]:l}:l,r?"":"."+s)}let o=r&&Wf.g?Wf.g:null;return r&&(Wf.g=Wf[s]),((l,c,d,f)=>{f?c.data=c.data.replace(f,l):c.data.indexOf(l)===-1&&(c.data=d?l+c.data:c.data+l)})(Wf[s],t,n,o),s},ORe=(e,t,r)=>e.reduce((n,i,a)=>{let s=t[a];if(s&&s.call){let o=s(r),l=o&&o.props&&o.props.className||/^go/.test(o)&&o;s=l?"."+l:o&&typeof o=="object"?o.props?"":Vp(o,""):o===!1?"":o}return n+i+(s??"")},"");function p4(e){let t=this||{},r=e.call?e(t.p):e;return IRe(r.unshift?r.raw?ORe(r,[].slice.call(arguments,1),t.p):r.reduce((n,i)=>Object.assign(n,i&&i.call?i(t.p):i),{}):r,NRe(t.target),t.g,t.o,t.k)}let Kae,M6,F6;p4.bind({g:1});let Dh=p4.bind({k:1});function PRe(e,t,r,n){Vp.p=t,Kae=e,M6=r,F6=n}function K0(e,t){let r=this||{};return function(){let n=arguments;function i(a,s){let o=Object.assign({},a),l=o.className||i.className;r.p=Object.assign({theme:M6&&M6()},o),r.o=/ *go\d+/.test(l),o.className=p4.apply(r,n)+(l?" "+l:"");let c=e;return e[0]&&(c=o.as||e,delete o.as),F6&&c[0]&&F6(o),Kae(c,o)}return i}}var RRe=e=>typeof e=="function",VA=(e,t)=>RRe(e)?e(t):e,jRe=(()=>{let e=0;return()=>(++e).toString()})(),Xae=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),DRe=20,g7="default",Yae=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case 2:let{toast:n}=t;return Yae(e,{type:e.toasts.find(s=>s.id===n.id)?1:0,toast:n});case 3:let{toastId:i}=t;return{...e,toasts:e.toasts.map(s=>s.id===i||i===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+a}))}}},DN=[],Qae={toasts:[],pausedAt:void 0,settings:{toastLimit:DRe}},Vd={},Jae=(e,t=g7)=>{Vd[t]=Yae(Vd[t]||Qae,e),DN.forEach(([r,n])=>{r===t&&n(Vd[t])})},Zae=e=>Object.keys(Vd).forEach(t=>Jae(e,t)),MRe=e=>Object.keys(Vd).find(t=>Vd[t].toasts.some(r=>r.id===e)),m4=(e=g7)=>t=>{Jae(t,e)},FRe={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},LRe=(e={},t=g7)=>{let[r,n]=I.useState(Vd[t]||Qae),i=I.useRef(Vd[t]);I.useEffect(()=>(i.current!==Vd[t]&&n(Vd[t]),DN.push([t,n]),()=>{let s=DN.findIndex(([o])=>o===t);s>-1&&DN.splice(s,1)}),[t]);let a=r.toasts.map(s=>{var o,l,c;return{...e,...e[s.type],...s,removeDelay:s.removeDelay||((o=e[s.type])==null?void 0:o.removeDelay)||(e==null?void 0:e.removeDelay),duration:s.duration||((l=e[s.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||FRe[s.type],style:{...e.style,...(c=e[s.type])==null?void 0:c.style,...s.style}}});return{...r,toasts:a}},BRe=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||jRe()}),$E=e=>(t,r)=>{let n=BRe(t,e,r);return m4(n.toasterId||MRe(n.id))({type:2,toast:n}),n.id},Re=(e,t)=>$E("blank")(e,t);Re.error=$E("error");Re.success=$E("success");Re.loading=$E("loading");Re.custom=$E("custom");Re.dismiss=(e,t)=>{let r={type:3,toastId:e};t?m4(t)(r):Zae(r)};Re.dismissAll=e=>Re.dismiss(void 0,e);Re.remove=(e,t)=>{let r={type:4,toastId:e};t?m4(t)(r):Zae(r)};Re.removeAll=e=>Re.remove(void 0,e);Re.promise=(e,t,r)=>{let n=Re.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(i=>{let a=t.success?VA(t.success,i):void 0;return a?Re.success(a,{id:n,...r,...r==null?void 0:r.success}):Re.dismiss(n),i}).catch(i=>{let a=t.error?VA(t.error,i):void 0;a?Re.error(a,{id:n,...r,...r==null?void 0:r.error}):Re.dismiss(n)}),e};var URe=1e3,ese=(e,t="default")=>{let{toasts:r,pausedAt:n}=LRe(e,t),i=I.useRef(new Map).current,a=I.useCallback((f,p=URe)=>{if(i.has(f))return;let m=setTimeout(()=>{i.delete(f),s({type:4,toastId:f})},p);i.set(f,m)},[]);I.useEffect(()=>{if(n)return;let f=Date.now(),p=r.map(m=>{if(m.duration===1/0)return;let x=(m.duration||0)+m.pauseDuration-(f-m.createdAt);if(x<0){m.visible&&Re.dismiss(m.id);return}return setTimeout(()=>Re.dismiss(m.id,t),x)});return()=>{p.forEach(m=>m&&clearTimeout(m))}},[r,n,t]);let s=I.useCallback(m4(t),[t]),o=I.useCallback(()=>{s({type:5,time:Date.now()})},[s]),l=I.useCallback((f,p)=>{s({type:1,toast:{id:f,height:p}})},[s]),c=I.useCallback(()=>{n&&s({type:6,time:Date.now()})},[n,s]),d=I.useCallback((f,p)=>{let{reverseOrder:m=!1,gutter:x=8,defaultPosition:v}=p||{},b=r.filter(C=>(C.position||v)===(f.position||v)&&C.height),w=b.findIndex(C=>C.id===f.id),_=b.filter((C,N)=>N<w&&C.visible).length;return b.filter(C=>C.visible).slice(...m?[_+1]:[0,_]).reduce((C,N)=>C+(N.height||0)+x,0)},[r]);return I.useEffect(()=>{r.forEach(f=>{if(f.dismissed)a(f.id,f.removeDelay);else{let p=i.get(f.id);p&&(clearTimeout(p),i.delete(f.id))}})},[r,a]),{toasts:r,handlers:{updateHeight:l,startPause:o,endPause:c,calculateOffset:d}}},$Re=Dh`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,zRe=Dh`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,HRe=Dh`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,WRe=K0("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${$Re} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${zRe} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${HRe} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,VRe=Dh`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,qRe=K0("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${VRe} 1s linear infinite;
`,GRe=Dh`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,KRe=Dh`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,XRe=K0("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${GRe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${KRe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,YRe=K0("div")`
  position: absolute;
`,QRe=K0("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,JRe=Dh`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ZRe=K0("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${JRe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,eje=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?I.createElement(ZRe,null,t):t:r==="blank"?null:I.createElement(QRe,null,I.createElement(qRe,{...n}),r!=="loading"&&I.createElement(YRe,null,r==="error"?I.createElement(WRe,{...n}):I.createElement(XRe,{...n})))},tje=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,rje=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,nje="0%{opacity:0;} 100%{opacity:1;}",ije="0%{opacity:1;} 100%{opacity:0;}",aje=K0("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,sje=K0("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,oje=(e,t)=>{let r=e.includes("top")?1:-1,[n,i]=Xae()?[nje,ije]:[tje(r),rje(r)];return{animation:t?`${Dh(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Dh(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},lje=I.memo(({toast:e,position:t,style:r,children:n})=>{let i=e.height?oje(e.position||t||"top-center",e.visible):{opacity:0},a=I.createElement(eje,{toast:e}),s=I.createElement(sje,{...e.ariaProps},VA(e.message,e));return I.createElement(aje,{className:e.className,style:{...i,...r,...e.style}},typeof n=="function"?n({icon:a,message:s}):I.createElement(I.Fragment,null,a,s))});PRe(I.createElement);var cje=({id:e,className:t,style:r,onHeightUpdate:n,children:i})=>{let a=I.useCallback(s=>{if(s){let o=()=>{let l=s.getBoundingClientRect().height;n(e,l)};o(),new MutationObserver(o).observe(s,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return I.createElement("div",{ref:a,className:t,style:r},i)},uje=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Xae()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...i}},dje=p4`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,h_=16,fje=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:i,toasterId:a,containerStyle:s,containerClassName:o})=>{let{toasts:l,handlers:c}=ese(r,a);return I.createElement("div",{"data-rht-toaster":a||"",style:{position:"fixed",zIndex:9999,top:h_,left:h_,right:h_,bottom:h_,pointerEvents:"none",...s},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(d=>{let f=d.position||t,p=c.calculateOffset(d,{reverseOrder:e,gutter:n,defaultPosition:t}),m=uje(f,p);return I.createElement(cje,{id:d.id,key:d.id,onHeightUpdate:c.updateHeight,className:d.visible?dje:"",style:m},d.type==="custom"?VA(d.message,d):i?i(d):I.createElement(lje,{toast:d,position:f}))}))},qr=Re,sb=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},hje={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Xp,NF,Yee,pje=(Yee=class{constructor(){hr(this,Xp,hje);hr(this,NF,!1)}setTimeoutProvider(e){Vt(this,Xp,e)}setTimeout(e,t){return Le(this,Xp).setTimeout(e,t)}clearTimeout(e){Le(this,Xp).clearTimeout(e)}setInterval(e,t){return Le(this,Xp).setInterval(e,t)}clearInterval(e){Le(this,Xp).clearInterval(e)}},Xp=new WeakMap,NF=new WeakMap,Yee),Zm=new pje;function mje(e){setTimeout(e,0)}var Kg=typeof window>"u"||"Deno"in globalThis;function Ro(){}function gje(e,t){return typeof e=="function"?e(t):e}function L6(e){return typeof e=="number"&&e>=0&&e!==1/0}function tse(e,t){return Math.max(e+(t||0)-Date.now(),0)}function b0(e,t){return typeof e=="function"?e(t):e}function zc(e,t){return typeof e=="function"?e(t):e}function pq(e,t){const{type:r="all",exact:n,fetchStatus:i,predicate:a,queryKey:s,stale:o}=e;if(s){if(n){if(t.queryHash!==x7(s,t.options))return!1}else if(!fS(t.queryKey,s))return!1}if(r!=="all"){const l=t.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||i&&i!==t.state.fetchStatus||a&&!a(t))}function mq(e,t){const{exact:r,status:n,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(r){if(Xg(t.options.mutationKey)!==Xg(a))return!1}else if(!fS(t.options.mutationKey,a))return!1}return!(n&&t.state.status!==n||i&&!i(t))}function x7(e,t){return((t==null?void 0:t.queryKeyHashFn)||Xg)(e)}function Xg(e){return JSON.stringify(e,(t,r)=>B6(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function fS(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>fS(e[r],t[r])):!1}var xje=Object.prototype.hasOwnProperty;function rse(e,t){if(e===t)return e;const r=gq(e)&&gq(t);if(!r&&!(B6(e)&&B6(t)))return t;const i=(r?e:Object.keys(e)).length,a=r?t:Object.keys(t),s=a.length,o=r?new Array(s):{};let l=0;for(let c=0;c<s;c++){const d=r?c:a[c],f=e[d],p=t[d];if(f===p){o[d]=f,(r?c<i:xje.call(e,d))&&l++;continue}if(f===null||p===null||typeof f!="object"||typeof p!="object"){o[d]=p;continue}const m=rse(f,p);o[d]=m,m===f&&l++}return i===s&&l===i?e:o}function qA(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function gq(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function B6(e){if(!xq(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!xq(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function xq(e){return Object.prototype.toString.call(e)==="[object Object]"}function vje(e){return new Promise(t=>{Zm.setTimeout(t,e)})}function U6(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?rse(e,t):t}function yje(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function bje(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var v7=Symbol();function nse(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===v7?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function ise(e,t){return typeof e=="function"?e(...t):!!e}var dg,Yp,Dv,Qee,wje=(Qee=class extends sb{constructor(){super();hr(this,dg);hr(this,Yp);hr(this,Dv);Vt(this,Dv,t=>{if(!Kg&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Le(this,Yp)||this.setEventListener(Le(this,Dv))}onUnsubscribe(){var t;this.hasListeners()||((t=Le(this,Yp))==null||t.call(this),Vt(this,Yp,void 0))}setEventListener(t){var r;Vt(this,Dv,t),(r=Le(this,Yp))==null||r.call(this),Vt(this,Yp,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){Le(this,dg)!==t&&(Vt(this,dg,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Le(this,dg)=="boolean"?Le(this,dg):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},dg=new WeakMap,Yp=new WeakMap,Dv=new WeakMap,Qee),y7=new wje;function $6(){let e,t;const r=new Promise((i,a)=>{e=i,t=a});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),e(i)},r.reject=i=>{n({status:"rejected",reason:i}),t(i)},r}var Sje=mje;function Eje(){let e=[],t=0,r=o=>{o()},n=o=>{o()},i=Sje;const a=o=>{t?e.push(o):i(()=>{r(o)})},s=()=>{const o=e;e=[],o.length&&i(()=>{n(()=>{o.forEach(l=>{r(l)})})})};return{batch:o=>{let l;t++;try{l=o()}finally{t--,t||s()}return l},batchCalls:o=>(...l)=>{a(()=>{o(...l)})},schedule:a,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{i=o}}}var $a=Eje(),Mv,Qp,Fv,Jee,Cje=(Jee=class extends sb{constructor(){super();hr(this,Mv,!0);hr(this,Qp);hr(this,Fv);Vt(this,Fv,t=>{if(!Kg&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){Le(this,Qp)||this.setEventListener(Le(this,Fv))}onUnsubscribe(){var t;this.hasListeners()||((t=Le(this,Qp))==null||t.call(this),Vt(this,Qp,void 0))}setEventListener(t){var r;Vt(this,Fv,t),(r=Le(this,Qp))==null||r.call(this),Vt(this,Qp,t(this.setOnline.bind(this)))}setOnline(t){Le(this,Mv)!==t&&(Vt(this,Mv,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return Le(this,Mv)}},Mv=new WeakMap,Qp=new WeakMap,Fv=new WeakMap,Jee),GA=new Cje;function kje(e){return Math.min(1e3*2**e,3e4)}function ase(e){return(e??"online")==="online"?GA.isOnline():!0}var z6=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function sse(e){let t=!1,r=0,n;const i=$6(),a=()=>i.status!=="pending",s=v=>{var b;if(!a()){const w=new z6(v);p(w),(b=e.onCancel)==null||b.call(e,w)}},o=()=>{t=!0},l=()=>{t=!1},c=()=>y7.isFocused()&&(e.networkMode==="always"||GA.isOnline())&&e.canRun(),d=()=>ase(e.networkMode)&&e.canRun(),f=v=>{a()||(n==null||n(),i.resolve(v))},p=v=>{a()||(n==null||n(),i.reject(v))},m=()=>new Promise(v=>{var b;n=w=>{(a()||c())&&v(w)},(b=e.onPause)==null||b.call(e)}).then(()=>{var v;n=void 0,a()||(v=e.onContinue)==null||v.call(e)}),x=()=>{if(a())return;let v;const b=r===0?e.initialPromise:void 0;try{v=b??e.fn()}catch(w){v=Promise.reject(w)}Promise.resolve(v).then(f).catch(w=>{var P;if(a())return;const _=e.retry??(Kg?0:3),C=e.retryDelay??kje,N=typeof C=="function"?C(r,w):C,R=_===!0||typeof _=="number"&&r<_||typeof _=="function"&&_(r,w);if(t||!R){p(w);return}r++,(P=e.onFail)==null||P.call(e,r,w),vje(N).then(()=>c()?void 0:m()).then(()=>{t?p(w):x()})})};return{promise:i,status:()=>i.status,cancel:s,continue:()=>(n==null||n(),i),cancelRetry:o,continueRetry:l,canStart:d,start:()=>(d()?x():m().then(x),i)}}var fg,Zee,ose=(Zee=class{constructor(){hr(this,fg)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),L6(this.gcTime)&&Vt(this,fg,Zm.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Kg?1/0:5*60*1e3))}clearGcTimeout(){Le(this,fg)&&(Zm.clearTimeout(Le(this,fg)),Vt(this,fg,void 0))}},fg=new WeakMap,Zee),hg,Lv,Bc,pg,ns,cE,mg,Fu,Xf,ete,_je=(ete=class extends ose{constructor(t){super();hr(this,Fu);hr(this,hg);hr(this,Lv);hr(this,Bc);hr(this,pg);hr(this,ns);hr(this,cE);hr(this,mg);Vt(this,mg,!1),Vt(this,cE,t.defaultOptions),this.setOptions(t.options),this.observers=[],Vt(this,pg,t.client),Vt(this,Bc,Le(this,pg).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Vt(this,hg,yq(this.options)),this.state=t.state??Le(this,hg),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Le(this,ns))==null?void 0:t.promise}setOptions(t){if(this.options={...Le(this,cE),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=yq(this.options);r.data!==void 0&&(this.setState(vq(r.data,r.dataUpdatedAt)),Vt(this,hg,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Le(this,Bc).remove(this)}setData(t,r){const n=U6(this.state.data,t,this.options);return ln(this,Fu,Xf).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){ln(this,Fu,Xf).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,i;const r=(n=Le(this,ns))==null?void 0:n.promise;return(i=Le(this,ns))==null||i.cancel(t),r?r.then(Ro).catch(Ro):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Le(this,hg))}isActive(){return this.observers.some(t=>zc(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===v7||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>b0(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!tse(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Le(this,ns))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Le(this,ns))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Le(this,Bc).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Le(this,ns)&&(Le(this,mg)?Le(this,ns).cancel({revert:!0}):Le(this,ns).cancelRetry()),this.scheduleGc()),Le(this,Bc).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ln(this,Fu,Xf).call(this,{type:"invalidate"})}async fetch(t,r){var l,c,d,f,p,m,x,v,b,w,_,C;if(this.state.fetchStatus!=="idle"&&((l=Le(this,ns))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Le(this,ns))return Le(this,ns).continueRetry(),Le(this,ns).promise}if(t&&this.setOptions(t),!this.options.queryFn){const N=this.observers.find(R=>R.options.queryFn);N&&this.setOptions(N.options)}const n=new AbortController,i=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(Vt(this,mg,!0),n.signal)})},a=()=>{const N=nse(this.options,r),P=(()=>{const O={client:Le(this,pg),queryKey:this.queryKey,meta:this.meta};return i(O),O})();return Vt(this,mg,!1),this.options.persister?this.options.persister(N,P,this):N(P)},o=(()=>{const N={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Le(this,pg),state:this.state,fetchFn:a};return i(N),N})();(c=this.options.behavior)==null||c.onFetch(o,this),Vt(this,Lv,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&ln(this,Fu,Xf).call(this,{type:"fetch",meta:(f=o.fetchOptions)==null?void 0:f.meta}),Vt(this,ns,sse({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,onCancel:N=>{N instanceof z6&&N.revert&&this.setState({...Le(this,Lv),fetchStatus:"idle"}),n.abort()},onFail:(N,R)=>{ln(this,Fu,Xf).call(this,{type:"failed",failureCount:N,error:R})},onPause:()=>{ln(this,Fu,Xf).call(this,{type:"pause"})},onContinue:()=>{ln(this,Fu,Xf).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const N=await Le(this,ns).start();if(N===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(N),(m=(p=Le(this,Bc).config).onSuccess)==null||m.call(p,N,this),(v=(x=Le(this,Bc).config).onSettled)==null||v.call(x,N,this.state.error,this),N}catch(N){if(N instanceof z6){if(N.silent)return Le(this,ns).promise;if(N.revert){if(this.state.data===void 0)throw N;return this.state.data}}throw ln(this,Fu,Xf).call(this,{type:"error",error:N}),(w=(b=Le(this,Bc).config).onError)==null||w.call(b,N,this),(C=(_=Le(this,Bc).config).onSettled)==null||C.call(_,this.state.data,N,this),N}finally{this.scheduleGc()}}},hg=new WeakMap,Lv=new WeakMap,Bc=new WeakMap,pg=new WeakMap,ns=new WeakMap,cE=new WeakMap,mg=new WeakMap,Fu=new WeakSet,Xf=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...lse(n.data,this.options),fetchMeta:t.meta??null};case"success":const i={...n,...vq(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Vt(this,Lv,t.manual?i:void 0),i;case"error":const a=t.error;return{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),$a.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),Le(this,Bc).notify({query:this,type:"updated",action:t})})},ete);function lse(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ase(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function vq(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function yq(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var il,Tn,uE,Io,gg,Bv,rh,Jp,dE,Uv,$v,xg,vg,Zp,zv,Gn,qw,H6,W6,V6,q6,G6,K6,X6,cse,tte,Nje=(tte=class extends sb{constructor(t,r){super();hr(this,Gn);hr(this,il);hr(this,Tn);hr(this,uE);hr(this,Io);hr(this,gg);hr(this,Bv);hr(this,rh);hr(this,Jp);hr(this,dE);hr(this,Uv);hr(this,$v);hr(this,xg);hr(this,vg);hr(this,Zp);hr(this,zv,new Set);this.options=r,Vt(this,il,t),Vt(this,Jp,null),Vt(this,rh,$6()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Le(this,Tn).addObserver(this),bq(Le(this,Tn),this.options)?ln(this,Gn,qw).call(this):this.updateResult(),ln(this,Gn,q6).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Y6(Le(this,Tn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Y6(Le(this,Tn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ln(this,Gn,G6).call(this),ln(this,Gn,K6).call(this),Le(this,Tn).removeObserver(this)}setOptions(t){const r=this.options,n=Le(this,Tn);if(this.options=Le(this,il).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof zc(this.options.enabled,Le(this,Tn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ln(this,Gn,X6).call(this),Le(this,Tn).setOptions(this.options),r._defaulted&&!qA(this.options,r)&&Le(this,il).getQueryCache().notify({type:"observerOptionsUpdated",query:Le(this,Tn),observer:this});const i=this.hasListeners();i&&wq(Le(this,Tn),n,this.options,r)&&ln(this,Gn,qw).call(this),this.updateResult(),i&&(Le(this,Tn)!==n||zc(this.options.enabled,Le(this,Tn))!==zc(r.enabled,Le(this,Tn))||b0(this.options.staleTime,Le(this,Tn))!==b0(r.staleTime,Le(this,Tn)))&&ln(this,Gn,H6).call(this);const a=ln(this,Gn,W6).call(this);i&&(Le(this,Tn)!==n||zc(this.options.enabled,Le(this,Tn))!==zc(r.enabled,Le(this,Tn))||a!==Le(this,Zp))&&ln(this,Gn,V6).call(this,a)}getOptimisticResult(t){const r=Le(this,il).getQueryCache().build(Le(this,il),t),n=this.createResult(r,t);return Tje(this,n)&&(Vt(this,Io,n),Vt(this,Bv,this.options),Vt(this,gg,Le(this,Tn).state)),n}getCurrentResult(){return Le(this,Io)}trackResult(t,r){return new Proxy(t,{get:(n,i)=>(this.trackProp(i),r==null||r(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&Le(this,rh).status==="pending"&&Le(this,rh).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(t){Le(this,zv).add(t)}getCurrentQuery(){return Le(this,Tn)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=Le(this,il).defaultQueryOptions(t),n=Le(this,il).getQueryCache().build(Le(this,il),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return ln(this,Gn,qw).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),Le(this,Io)))}createResult(t,r){var M;const n=Le(this,Tn),i=this.options,a=Le(this,Io),s=Le(this,gg),o=Le(this,Bv),c=t!==n?t.state:Le(this,uE),{state:d}=t;let f={...d},p=!1,m;if(r._optimisticResults){const B=this.hasListeners(),U=!B&&bq(t,r),H=B&&wq(t,n,r,i);(U||H)&&(f={...f,...lse(d.data,t.options)}),r._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:x,errorUpdatedAt:v,status:b}=f;m=f.data;let w=!1;if(r.placeholderData!==void 0&&m===void 0&&b==="pending"){let B;a!=null&&a.isPlaceholderData&&r.placeholderData===(o==null?void 0:o.placeholderData)?(B=a.data,w=!0):B=typeof r.placeholderData=="function"?r.placeholderData((M=Le(this,$v))==null?void 0:M.state.data,Le(this,$v)):r.placeholderData,B!==void 0&&(b="success",m=U6(a==null?void 0:a.data,B,r),p=!0)}if(r.select&&m!==void 0&&!w)if(a&&m===(s==null?void 0:s.data)&&r.select===Le(this,dE))m=Le(this,Uv);else try{Vt(this,dE,r.select),m=r.select(m),m=U6(a==null?void 0:a.data,m,r),Vt(this,Uv,m),Vt(this,Jp,null)}catch(B){Vt(this,Jp,B)}Le(this,Jp)&&(x=Le(this,Jp),m=Le(this,Uv),v=Date.now(),b="error");const _=f.fetchStatus==="fetching",C=b==="pending",N=b==="error",R=C&&_,P=m!==void 0,D={status:b,fetchStatus:f.fetchStatus,isPending:C,isSuccess:b==="success",isError:N,isInitialLoading:R,isLoading:R,data:m,dataUpdatedAt:f.dataUpdatedAt,error:x,errorUpdatedAt:v,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>c.dataUpdateCount||f.errorUpdateCount>c.errorUpdateCount,isFetching:_,isRefetching:_&&!C,isLoadingError:N&&!P,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:N&&P,isStale:b7(t,r),refetch:this.refetch,promise:Le(this,rh),isEnabled:zc(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const B=Z=>{D.status==="error"?Z.reject(D.error):D.data!==void 0&&Z.resolve(D.data)},U=()=>{const Z=Vt(this,rh,D.promise=$6());B(Z)},H=Le(this,rh);switch(H.status){case"pending":t.queryHash===n.queryHash&&B(H);break;case"fulfilled":(D.status==="error"||D.data!==H.value)&&U();break;case"rejected":(D.status!=="error"||D.error!==H.reason)&&U();break}}return D}updateResult(){const t=Le(this,Io),r=this.createResult(Le(this,Tn),this.options);if(Vt(this,gg,Le(this,Tn).state),Vt(this,Bv,this.options),Le(this,gg).data!==void 0&&Vt(this,$v,Le(this,Tn)),qA(r,t))return;Vt(this,Io,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!Le(this,zv).size)return!0;const s=new Set(a??Le(this,zv));return this.options.throwOnError&&s.add("error"),Object.keys(Le(this,Io)).some(o=>{const l=o;return Le(this,Io)[l]!==t[l]&&s.has(l)})};ln(this,Gn,cse).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ln(this,Gn,q6).call(this)}},il=new WeakMap,Tn=new WeakMap,uE=new WeakMap,Io=new WeakMap,gg=new WeakMap,Bv=new WeakMap,rh=new WeakMap,Jp=new WeakMap,dE=new WeakMap,Uv=new WeakMap,$v=new WeakMap,xg=new WeakMap,vg=new WeakMap,Zp=new WeakMap,zv=new WeakMap,Gn=new WeakSet,qw=function(t){ln(this,Gn,X6).call(this);let r=Le(this,Tn).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Ro)),r},H6=function(){ln(this,Gn,G6).call(this);const t=b0(this.options.staleTime,Le(this,Tn));if(Kg||Le(this,Io).isStale||!L6(t))return;const n=tse(Le(this,Io).dataUpdatedAt,t)+1;Vt(this,xg,Zm.setTimeout(()=>{Le(this,Io).isStale||this.updateResult()},n))},W6=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Le(this,Tn)):this.options.refetchInterval)??!1},V6=function(t){ln(this,Gn,K6).call(this),Vt(this,Zp,t),!(Kg||zc(this.options.enabled,Le(this,Tn))===!1||!L6(Le(this,Zp))||Le(this,Zp)===0)&&Vt(this,vg,Zm.setInterval(()=>{(this.options.refetchIntervalInBackground||y7.isFocused())&&ln(this,Gn,qw).call(this)},Le(this,Zp)))},q6=function(){ln(this,Gn,H6).call(this),ln(this,Gn,V6).call(this,ln(this,Gn,W6).call(this))},G6=function(){Le(this,xg)&&(Zm.clearTimeout(Le(this,xg)),Vt(this,xg,void 0))},K6=function(){Le(this,vg)&&(Zm.clearInterval(Le(this,vg)),Vt(this,vg,void 0))},X6=function(){const t=Le(this,il).getQueryCache().build(Le(this,il),this.options);if(t===Le(this,Tn))return;const r=Le(this,Tn);Vt(this,Tn,t),Vt(this,uE,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},cse=function(t){$a.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(Le(this,Io))}),Le(this,il).getQueryCache().notify({query:Le(this,Tn),type:"observerResultsUpdated"})})},tte);function Aje(e,t){return zc(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function bq(e,t){return Aje(e,t)||e.state.data!==void 0&&Y6(e,t,t.refetchOnMount)}function Y6(e,t,r){if(zc(t.enabled,e)!==!1&&b0(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&b7(e,t)}return!1}function wq(e,t,r,n){return(e!==t||zc(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&b7(e,r)}function b7(e,t){return zc(t.enabled,e)!==!1&&e.isStaleByTime(b0(t.staleTime,e))}function Tje(e,t){return!qA(e.getCurrentResult(),t)}function Sq(e){return{onFetch:(t,r)=>{var d,f,p,m,x;const n=t.options,i=(p=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,a=((m=t.state.data)==null?void 0:m.pages)||[],s=((x=t.state.data)==null?void 0:x.pageParams)||[];let o={pages:[],pageParams:[]},l=0;const c=async()=>{let v=!1;const b=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},w=nse(t.options,t.fetchOptions),_=async(C,N,R)=>{if(v)return Promise.reject();if(N==null&&C.pages.length)return Promise.resolve(C);const O=(()=>{const U={client:t.client,queryKey:t.queryKey,pageParam:N,direction:R?"backward":"forward",meta:t.options.meta};return b(U),U})(),D=await w(O),{maxPages:M}=t.options,B=R?bje:yje;return{pages:B(C.pages,D,M),pageParams:B(C.pageParams,N,M)}};if(i&&a.length){const C=i==="backward",N=C?Ije:Eq,R={pages:a,pageParams:s},P=N(n,R);o=await _(R,P,C)}else{const C=e??a.length;do{const N=l===0?s[0]??n.initialPageParam:Eq(n,o);if(l>0&&N==null)break;o=await _(o,N),l++}while(l<C)}return o};t.options.persister?t.fetchFn=()=>{var v,b;return(b=(v=t.options).persister)==null?void 0:b.call(v,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=c}}}function Eq(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function Ije(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var fE,jd,Oo,yg,Dd,Pp,rte,Oje=(rte=class extends ose{constructor(t){super();hr(this,Dd);hr(this,fE);hr(this,jd);hr(this,Oo);hr(this,yg);Vt(this,fE,t.client),this.mutationId=t.mutationId,Vt(this,Oo,t.mutationCache),Vt(this,jd,[]),this.state=t.state||use(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Le(this,jd).includes(t)||(Le(this,jd).push(t),this.clearGcTimeout(),Le(this,Oo).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Vt(this,jd,Le(this,jd).filter(r=>r!==t)),this.scheduleGc(),Le(this,Oo).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Le(this,jd).length||(this.state.status==="pending"?this.scheduleGc():Le(this,Oo).remove(this))}continue(){var t;return((t=Le(this,yg))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,o,l,c,d,f,p,m,x,v,b,w,_,C,N,R,P,O,D,M;const r=()=>{ln(this,Dd,Pp).call(this,{type:"continue"})},n={client:Le(this,fE),meta:this.options.meta,mutationKey:this.options.mutationKey};Vt(this,yg,sse({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(B,U)=>{ln(this,Dd,Pp).call(this,{type:"failed",failureCount:B,error:U})},onPause:()=>{ln(this,Dd,Pp).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Le(this,Oo).canRun(this)}));const i=this.state.status==="pending",a=!Le(this,yg).canStart();try{if(i)r();else{ln(this,Dd,Pp).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(s=Le(this,Oo).config).onMutate)==null?void 0:o.call(s,t,this,n));const U=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t,n));U!==this.state.context&&ln(this,Dd,Pp).call(this,{type:"pending",context:U,variables:t,isPaused:a})}const B=await Le(this,yg).start();return await((f=(d=Le(this,Oo).config).onSuccess)==null?void 0:f.call(d,B,t,this.state.context,this,n)),await((m=(p=this.options).onSuccess)==null?void 0:m.call(p,B,t,this.state.context,n)),await((v=(x=Le(this,Oo).config).onSettled)==null?void 0:v.call(x,B,null,this.state.variables,this.state.context,this,n)),await((w=(b=this.options).onSettled)==null?void 0:w.call(b,B,null,t,this.state.context,n)),ln(this,Dd,Pp).call(this,{type:"success",data:B}),B}catch(B){try{throw await((C=(_=Le(this,Oo).config).onError)==null?void 0:C.call(_,B,t,this.state.context,this,n)),await((R=(N=this.options).onError)==null?void 0:R.call(N,B,t,this.state.context,n)),await((O=(P=Le(this,Oo).config).onSettled)==null?void 0:O.call(P,void 0,B,this.state.variables,this.state.context,this,n)),await((M=(D=this.options).onSettled)==null?void 0:M.call(D,void 0,B,t,this.state.context,n)),B}finally{ln(this,Dd,Pp).call(this,{type:"error",error:B})}}finally{Le(this,Oo).runNext(this)}}},fE=new WeakMap,jd=new WeakMap,Oo=new WeakMap,yg=new WeakMap,Dd=new WeakSet,Pp=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),$a.batch(()=>{Le(this,jd).forEach(n=>{n.onMutationUpdate(t)}),Le(this,Oo).notify({mutation:this,type:"updated",action:t})})},rte);function use(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var nh,Lu,hE,nte,Pje=(nte=class extends sb{constructor(t={}){super();hr(this,nh);hr(this,Lu);hr(this,hE);this.config=t,Vt(this,nh,new Set),Vt(this,Lu,new Map),Vt(this,hE,0)}build(t,r,n){const i=new Oje({client:t,mutationCache:this,mutationId:++Fk(this,hE)._,options:t.defaultMutationOptions(r),state:n});return this.add(i),i}add(t){Le(this,nh).add(t);const r=p_(t);if(typeof r=="string"){const n=Le(this,Lu).get(r);n?n.push(t):Le(this,Lu).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Le(this,nh).delete(t)){const r=p_(t);if(typeof r=="string"){const n=Le(this,Lu).get(r);if(n)if(n.length>1){const i=n.indexOf(t);i!==-1&&n.splice(i,1)}else n[0]===t&&Le(this,Lu).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=p_(t);if(typeof r=="string"){const n=Le(this,Lu).get(r),i=n==null?void 0:n.find(a=>a.state.status==="pending");return!i||i===t}else return!0}runNext(t){var n;const r=p_(t);if(typeof r=="string"){const i=(n=Le(this,Lu).get(r))==null?void 0:n.find(a=>a!==t&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){$a.batch(()=>{Le(this,nh).forEach(t=>{this.notify({type:"removed",mutation:t})}),Le(this,nh).clear(),Le(this,Lu).clear()})}getAll(){return Array.from(Le(this,nh))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>mq(r,n))}findAll(t={}){return this.getAll().filter(r=>mq(t,r))}notify(t){$a.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return $a.batch(()=>Promise.all(t.map(r=>r.continue().catch(Ro))))}},nh=new WeakMap,Lu=new WeakMap,hE=new WeakMap,nte);function p_(e){var t;return(t=e.options.scope)==null?void 0:t.id}var ih,e0,al,ah,Th,MN,Q6,ite,Rje=(ite=class extends sb{constructor(r,n){super();hr(this,Th);hr(this,ih);hr(this,e0);hr(this,al);hr(this,ah);Vt(this,ih,r),this.setOptions(n),this.bindMethods(),ln(this,Th,MN).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var i;const n=this.options;this.options=Le(this,ih).defaultMutationOptions(r),qA(this.options,n)||Le(this,ih).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Le(this,al),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Xg(n.mutationKey)!==Xg(this.options.mutationKey)?this.reset():((i=Le(this,al))==null?void 0:i.state.status)==="pending"&&Le(this,al).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=Le(this,al))==null||r.removeObserver(this)}onMutationUpdate(r){ln(this,Th,MN).call(this),ln(this,Th,Q6).call(this,r)}getCurrentResult(){return Le(this,e0)}reset(){var r;(r=Le(this,al))==null||r.removeObserver(this),Vt(this,al,void 0),ln(this,Th,MN).call(this),ln(this,Th,Q6).call(this)}mutate(r,n){var i;return Vt(this,ah,n),(i=Le(this,al))==null||i.removeObserver(this),Vt(this,al,Le(this,ih).getMutationCache().build(Le(this,ih),this.options)),Le(this,al).addObserver(this),Le(this,al).execute(r)}},ih=new WeakMap,e0=new WeakMap,al=new WeakMap,ah=new WeakMap,Th=new WeakSet,MN=function(){var n;const r=((n=Le(this,al))==null?void 0:n.state)??use();Vt(this,e0,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Q6=function(r){$a.batch(()=>{var n,i,a,s,o,l,c,d;if(Le(this,ah)&&this.hasListeners()){const f=Le(this,e0).variables,p=Le(this,e0).context,m={client:Le(this,ih),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((i=(n=Le(this,ah)).onSuccess)==null||i.call(n,r.data,f,p,m),(s=(a=Le(this,ah)).onSettled)==null||s.call(a,r.data,null,f,p,m)):(r==null?void 0:r.type)==="error"&&((l=(o=Le(this,ah)).onError)==null||l.call(o,r.error,f,p,m),(d=(c=Le(this,ah)).onSettled)==null||d.call(c,void 0,r.error,f,p,m))}this.listeners.forEach(f=>{f(Le(this,e0))})})},ite),Md,ate,jje=(ate=class extends sb{constructor(t={}){super();hr(this,Md);this.config=t,Vt(this,Md,new Map)}build(t,r,n){const i=r.queryKey,a=r.queryHash??x7(i,r);let s=this.get(a);return s||(s=new _je({client:t,queryKey:i,queryHash:a,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(i)}),this.add(s)),s}add(t){Le(this,Md).has(t.queryHash)||(Le(this,Md).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Le(this,Md).get(t.queryHash);r&&(t.destroy(),r===t&&Le(this,Md).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){$a.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Le(this,Md).get(t)}getAll(){return[...Le(this,Md).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>pq(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>pq(t,n)):r}notify(t){$a.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){$a.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){$a.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Md=new WeakMap,ate),Qi,t0,r0,Hv,Wv,n0,Vv,qv,ste,Dje=(ste=class{constructor(e={}){hr(this,Qi);hr(this,t0);hr(this,r0);hr(this,Hv);hr(this,Wv);hr(this,n0);hr(this,Vv);hr(this,qv);Vt(this,Qi,e.queryCache||new jje),Vt(this,t0,e.mutationCache||new Pje),Vt(this,r0,e.defaultOptions||{}),Vt(this,Hv,new Map),Vt(this,Wv,new Map),Vt(this,n0,0)}mount(){Fk(this,n0)._++,Le(this,n0)===1&&(Vt(this,Vv,y7.subscribe(async e=>{e&&(await this.resumePausedMutations(),Le(this,Qi).onFocus())})),Vt(this,qv,GA.subscribe(async e=>{e&&(await this.resumePausedMutations(),Le(this,Qi).onOnline())})))}unmount(){var e,t;Fk(this,n0)._--,Le(this,n0)===0&&((e=Le(this,Vv))==null||e.call(this),Vt(this,Vv,void 0),(t=Le(this,qv))==null||t.call(this),Vt(this,qv,void 0))}isFetching(e){return Le(this,Qi).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Le(this,t0).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Le(this,Qi).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=Le(this,Qi).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(b0(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return Le(this,Qi).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),i=Le(this,Qi).get(n.queryHash),a=i==null?void 0:i.state.data,s=gje(t,a);if(s!==void 0)return Le(this,Qi).build(this,n).setData(s,{...r,manual:!0})}setQueriesData(e,t,r){return $a.batch(()=>Le(this,Qi).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Le(this,Qi).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Le(this,Qi);$a.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Le(this,Qi);return $a.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=$a.batch(()=>Le(this,Qi).findAll(e).map(i=>i.cancel(r)));return Promise.all(n).then(Ro).catch(Ro)}invalidateQueries(e,t={}){return $a.batch(()=>(Le(this,Qi).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=$a.batch(()=>Le(this,Qi).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,r);return r.throwOnError||(a=a.catch(Ro)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(Ro)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Le(this,Qi).build(this,t);return r.isStaleByTime(b0(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ro).catch(Ro)}fetchInfiniteQuery(e){return e.behavior=Sq(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ro).catch(Ro)}ensureInfiniteQueryData(e){return e.behavior=Sq(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return GA.isOnline()?Le(this,t0).resumePausedMutations():Promise.resolve()}getQueryCache(){return Le(this,Qi)}getMutationCache(){return Le(this,t0)}getDefaultOptions(){return Le(this,r0)}setDefaultOptions(e){Vt(this,r0,e)}setQueryDefaults(e,t){Le(this,Hv).set(Xg(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Le(this,Hv).values()],r={};return t.forEach(n=>{fS(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){Le(this,Wv).set(Xg(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Le(this,Wv).values()],r={};return t.forEach(n=>{fS(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Le(this,r0).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=x7(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===v7&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Le(this,r0).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Le(this,Qi).clear(),Le(this,t0).clear()}},Qi=new WeakMap,t0=new WeakMap,r0=new WeakMap,Hv=new WeakMap,Wv=new WeakMap,n0=new WeakMap,Vv=new WeakMap,qv=new WeakMap,ste),dse=I.createContext(void 0),ja=e=>{const t=I.useContext(dse);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Mje=({client:e,children:t})=>(I.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),u.jsx(dse.Provider,{value:e,children:t})),fse=I.createContext(!1),Fje=()=>I.useContext(fse);fse.Provider;function Lje(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Bje=I.createContext(Lje()),Uje=()=>I.useContext(Bje),$je=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},zje=e=>{I.useEffect(()=>{e.clearReset()},[e])},Hje=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(i&&e.data===void 0||ise(r,[e.error,n])),Wje=e=>{if(e.suspense){const r=i=>i==="static"?i:Math.max(i??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...i)=>r(n(...i)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Vje=(e,t)=>e.isLoading&&e.isFetching&&!t,qje=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Cq=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function Gje(e,t,r){var f,p,m,x,v;const n=Fje(),i=Uje(),a=ja(),s=a.defaultQueryOptions(e);(p=(f=a.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,s),s._optimisticResults=n?"isRestoring":"optimistic",Wje(s),$je(s,i),zje(i);const o=!a.getQueryCache().get(s.queryHash),[l]=I.useState(()=>new t(a,s)),c=l.getOptimisticResult(s),d=!n&&e.subscribed!==!1;if(I.useSyncExternalStore(I.useCallback(b=>{const w=d?l.subscribe($a.batchCalls(b)):Ro;return l.updateResult(),w},[l,d]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),I.useEffect(()=>{l.setOptions(s)},[s,l]),qje(s,c))throw Cq(s,l,i);if(Hje({result:c,errorResetBoundary:i,throwOnError:s.throwOnError,query:a.getQueryCache().get(s.queryHash),suspense:s.suspense}))throw c.error;if((x=(m=a.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||x.call(m,s,c),s.experimental_prefetchInRender&&!Kg&&Vje(c,n)){const b=o?Cq(s,l,i):(v=a.getQueryCache().get(s.queryHash))==null?void 0:v.promise;b==null||b.catch(Ro).finally(()=>{l.updateResult()})}return s.notifyOnChangeProps?c:l.trackResult(c)}function $s(e,t){return Gje(e,Nje)}function Ir(e,t){const r=ja(),[n]=I.useState(()=>new Rje(r,e));I.useEffect(()=>{n.setOptions(e)},[n,e]);const i=I.useSyncExternalStore(I.useCallback(s=>n.subscribe($a.batchCalls(s)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),a=I.useCallback((s,o)=>{n.mutate(s,o).catch(Ro)},[n]);if(i.error&&ise(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}function hse(e,t){return function(){return e.apply(t,arguments)}}const{toString:Kje}=Object.prototype,{getPrototypeOf:w7}=Object,{iterator:g4,toStringTag:pse}=Symbol,x4=(e=>t=>{const r=Kje.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),fd=e=>(e=e.toLowerCase(),t=>x4(t)===e),v4=e=>t=>typeof t===e,{isArray:ob}=Array,sy=v4("undefined");function zE(e){return e!==null&&!sy(e)&&e.constructor!==null&&!sy(e.constructor)&&yl(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const mse=fd("ArrayBuffer");function Xje(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&mse(e.buffer),t}const Yje=v4("string"),yl=v4("function"),gse=v4("number"),HE=e=>e!==null&&typeof e=="object",Qje=e=>e===!0||e===!1,FN=e=>{if(x4(e)!=="object")return!1;const t=w7(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(pse in e)&&!(g4 in e)},Jje=e=>{if(!HE(e)||zE(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Zje=fd("Date"),eDe=fd("File"),tDe=fd("Blob"),rDe=fd("FileList"),nDe=e=>HE(e)&&yl(e.pipe),iDe=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||yl(e.append)&&((t=x4(e))==="formdata"||t==="object"&&yl(e.toString)&&e.toString()==="[object FormData]"))},aDe=fd("URLSearchParams"),[sDe,oDe,lDe,cDe]=["ReadableStream","Request","Response","Headers"].map(fd),uDe=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function WE(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),ob(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{if(zE(e))return;const a=r?Object.getOwnPropertyNames(e):Object.keys(e),s=a.length;let o;for(n=0;n<s;n++)o=a[n],t.call(null,e[o],o,e)}}function xse(e,t){if(zE(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,i;for(;n-- >0;)if(i=r[n],t===i.toLowerCase())return i;return null}const eg=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,vse=e=>!sy(e)&&e!==eg;function J6(){const{caseless:e,skipUndefined:t}=vse(this)&&this||{},r={},n=(i,a)=>{const s=e&&xse(r,a)||a;FN(r[s])&&FN(i)?r[s]=J6(r[s],i):FN(i)?r[s]=J6({},i):ob(i)?r[s]=i.slice():(!t||!sy(i))&&(r[s]=i)};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&WE(arguments[i],n);return r}const dDe=(e,t,r,{allOwnKeys:n}={})=>(WE(t,(i,a)=>{r&&yl(i)?e[a]=hse(i,r):e[a]=i},{allOwnKeys:n}),e),fDe=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),hDe=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},pDe=(e,t,r,n)=>{let i,a,s;const o={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)s=i[a],(!n||n(s,e,t))&&!o[s]&&(t[s]=e[s],o[s]=!0);e=r!==!1&&w7(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},mDe=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},gDe=e=>{if(!e)return null;if(ob(e))return e;let t=e.length;if(!gse(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},xDe=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&w7(Uint8Array)),vDe=(e,t)=>{const n=(e&&e[g4]).call(e);let i;for(;(i=n.next())&&!i.done;){const a=i.value;t.call(e,a[0],a[1])}},yDe=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},bDe=fd("HTMLFormElement"),wDe=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),kq=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),SDe=fd("RegExp"),yse=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};WE(r,(i,a)=>{let s;(s=t(i,a,e))!==!1&&(n[a]=s||i)}),Object.defineProperties(e,n)},EDe=e=>{yse(e,(t,r)=>{if(yl(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(yl(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},CDe=(e,t)=>{const r={},n=i=>{i.forEach(a=>{r[a]=!0})};return ob(e)?n(e):n(String(e).split(t)),r},kDe=()=>{},_De=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function NDe(e){return!!(e&&yl(e.append)&&e[pse]==="FormData"&&e[g4])}const ADe=e=>{const t=new Array(10),r=(n,i)=>{if(HE(n)){if(t.indexOf(n)>=0)return;if(zE(n))return n;if(!("toJSON"in n)){t[i]=n;const a=ob(n)?[]:{};return WE(n,(s,o)=>{const l=r(s,i+1);!sy(l)&&(a[o]=l)}),t[i]=void 0,a}}return n};return r(e,0)},TDe=fd("AsyncFunction"),IDe=e=>e&&(HE(e)||yl(e))&&yl(e.then)&&yl(e.catch),bse=((e,t)=>e?setImmediate:t?((r,n)=>(eg.addEventListener("message",({source:i,data:a})=>{i===eg&&a===r&&n.length&&n.shift()()},!1),i=>{n.push(i),eg.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",yl(eg.postMessage)),ODe=typeof queueMicrotask<"u"?queueMicrotask.bind(eg):typeof process<"u"&&process.nextTick||bse,PDe=e=>e!=null&&yl(e[g4]),rt={isArray:ob,isArrayBuffer:mse,isBuffer:zE,isFormData:iDe,isArrayBufferView:Xje,isString:Yje,isNumber:gse,isBoolean:Qje,isObject:HE,isPlainObject:FN,isEmptyObject:Jje,isReadableStream:sDe,isRequest:oDe,isResponse:lDe,isHeaders:cDe,isUndefined:sy,isDate:Zje,isFile:eDe,isBlob:tDe,isRegExp:SDe,isFunction:yl,isStream:nDe,isURLSearchParams:aDe,isTypedArray:xDe,isFileList:rDe,forEach:WE,merge:J6,extend:dDe,trim:uDe,stripBOM:fDe,inherits:hDe,toFlatObject:pDe,kindOf:x4,kindOfTest:fd,endsWith:mDe,toArray:gDe,forEachEntry:vDe,matchAll:yDe,isHTMLForm:bDe,hasOwnProperty:kq,hasOwnProp:kq,reduceDescriptors:yse,freezeMethods:EDe,toObjectSet:CDe,toCamelCase:wDe,noop:kDe,toFiniteNumber:_De,findKey:xse,global:eg,isContextDefined:vse,isSpecCompliantForm:NDe,toJSONObject:ADe,isAsyncFn:TDe,isThenable:IDe,setImmediate:bse,asap:ODe,isIterable:PDe};function Qr(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}rt.inherits(Qr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:rt.toJSONObject(this.config),code:this.code,status:this.status}}});const wse=Qr.prototype,Sse={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Sse[e]={value:e}});Object.defineProperties(Qr,Sse);Object.defineProperty(wse,"isAxiosError",{value:!0});Qr.from=(e,t,r,n,i,a)=>{const s=Object.create(wse);rt.toFlatObject(e,s,function(d){return d!==Error.prototype},c=>c!=="isAxiosError");const o=e&&e.message?e.message:"Error",l=t==null&&e?e.code:t;return Qr.call(s,o,l,r,n,i),e&&s.cause==null&&Object.defineProperty(s,"cause",{value:e,configurable:!0}),s.name=e&&e.name||"Error",a&&Object.assign(s,a),s};const RDe=null;function Z6(e){return rt.isPlainObject(e)||rt.isArray(e)}function Ese(e){return rt.endsWith(e,"[]")?e.slice(0,-2):e}function _q(e,t,r){return e?e.concat(t).map(function(i,a){return i=Ese(i),!r&&a?"["+i+"]":i}).join(r?".":""):t}function jDe(e){return rt.isArray(e)&&!e.some(Z6)}const DDe=rt.toFlatObject(rt,{},null,function(t){return/^is[A-Z]/.test(t)});function y4(e,t,r){if(!rt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=rt.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,b){return!rt.isUndefined(b[v])});const n=r.metaTokens,i=r.visitor||d,a=r.dots,s=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&rt.isSpecCompliantForm(t);if(!rt.isFunction(i))throw new TypeError("visitor must be a function");function c(x){if(x===null)return"";if(rt.isDate(x))return x.toISOString();if(rt.isBoolean(x))return x.toString();if(!l&&rt.isBlob(x))throw new Qr("Blob is not supported. Use a Buffer instead.");return rt.isArrayBuffer(x)||rt.isTypedArray(x)?l&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function d(x,v,b){let w=x;if(x&&!b&&typeof x=="object"){if(rt.endsWith(v,"{}"))v=n?v:v.slice(0,-2),x=JSON.stringify(x);else if(rt.isArray(x)&&jDe(x)||(rt.isFileList(x)||rt.endsWith(v,"[]"))&&(w=rt.toArray(x)))return v=Ese(v),w.forEach(function(C,N){!(rt.isUndefined(C)||C===null)&&t.append(s===!0?_q([v],N,a):s===null?v:v+"[]",c(C))}),!1}return Z6(x)?!0:(t.append(_q(b,v,a),c(x)),!1)}const f=[],p=Object.assign(DDe,{defaultVisitor:d,convertValue:c,isVisitable:Z6});function m(x,v){if(!rt.isUndefined(x)){if(f.indexOf(x)!==-1)throw Error("Circular reference detected in "+v.join("."));f.push(x),rt.forEach(x,function(w,_){(!(rt.isUndefined(w)||w===null)&&i.call(t,w,rt.isString(_)?_.trim():_,v,p))===!0&&m(w,v?v.concat(_):[_])}),f.pop()}}if(!rt.isObject(e))throw new TypeError("data must be an object");return m(e),t}function Nq(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function S7(e,t){this._pairs=[],e&&y4(e,this,t)}const Cse=S7.prototype;Cse.append=function(t,r){this._pairs.push([t,r])};Cse.toString=function(t){const r=t?function(n){return t.call(this,n,Nq)}:Nq;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function MDe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function kse(e,t,r){if(!t)return e;const n=r&&r.encode||MDe;rt.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let a;if(i?a=i(t,r):a=rt.isURLSearchParams(t)?t.toString():new S7(t,r).toString(n),a){const s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class Aq{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){rt.forEach(this.handlers,function(n){n!==null&&t(n)})}}const _se={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},FDe=typeof URLSearchParams<"u"?URLSearchParams:S7,LDe=typeof FormData<"u"?FormData:null,BDe=typeof Blob<"u"?Blob:null,UDe={isBrowser:!0,classes:{URLSearchParams:FDe,FormData:LDe,Blob:BDe},protocols:["http","https","file","blob","url","data"]},E7=typeof window<"u"&&typeof document<"u",e8=typeof navigator=="object"&&navigator||void 0,$De=E7&&(!e8||["ReactNative","NativeScript","NS"].indexOf(e8.product)<0),zDe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",HDe=E7&&window.location.href||"http://localhost",WDe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:E7,hasStandardBrowserEnv:$De,hasStandardBrowserWebWorkerEnv:zDe,navigator:e8,origin:HDe},Symbol.toStringTag,{value:"Module"})),co={...WDe,...UDe};function VDe(e,t){return y4(e,new co.classes.URLSearchParams,{visitor:function(r,n,i,a){return co.isNode&&rt.isBuffer(r)?(this.append(n,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}function qDe(e){return rt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function GDe(e){const t={},r=Object.keys(e);let n;const i=r.length;let a;for(n=0;n<i;n++)a=r[n],t[a]=e[a];return t}function Nse(e){function t(r,n,i,a){let s=r[a++];if(s==="__proto__")return!0;const o=Number.isFinite(+s),l=a>=r.length;return s=!s&&rt.isArray(i)?i.length:s,l?(rt.hasOwnProp(i,s)?i[s]=[i[s],n]:i[s]=n,!o):((!i[s]||!rt.isObject(i[s]))&&(i[s]=[]),t(r,n,i[s],a)&&rt.isArray(i[s])&&(i[s]=GDe(i[s])),!o)}if(rt.isFormData(e)&&rt.isFunction(e.entries)){const r={};return rt.forEachEntry(e,(n,i)=>{t(qDe(n),i,r,0)}),r}return null}function KDe(e,t,r){if(rt.isString(e))try{return(t||JSON.parse)(e),rt.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const VE={transitional:_se,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,a=rt.isObject(t);if(a&&rt.isHTMLForm(t)&&(t=new FormData(t)),rt.isFormData(t))return i?JSON.stringify(Nse(t)):t;if(rt.isArrayBuffer(t)||rt.isBuffer(t)||rt.isStream(t)||rt.isFile(t)||rt.isBlob(t)||rt.isReadableStream(t))return t;if(rt.isArrayBufferView(t))return t.buffer;if(rt.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return VDe(t,this.formSerializer).toString();if((o=rt.isFileList(t))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return y4(o?{"files[]":t}:t,l&&new l,this.formSerializer)}}return a||i?(r.setContentType("application/json",!1),KDe(t)):t}],transformResponse:[function(t){const r=this.transitional||VE.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(rt.isResponse(t)||rt.isReadableStream(t))return t;if(t&&rt.isString(t)&&(n&&!this.responseType||i)){const s=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(o){if(s)throw o.name==="SyntaxError"?Qr.from(o,Qr.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:co.classes.FormData,Blob:co.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};rt.forEach(["delete","get","head","post","put","patch"],e=>{VE.headers[e]={}});const XDe=rt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),YDe=e=>{const t={};let r,n,i;return e&&e.split(`
`).forEach(function(s){i=s.indexOf(":"),r=s.substring(0,i).trim().toLowerCase(),n=s.substring(i+1).trim(),!(!r||t[r]&&XDe[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},Tq=Symbol("internals");function bw(e){return e&&String(e).trim().toLowerCase()}function LN(e){return e===!1||e==null?e:rt.isArray(e)?e.map(LN):String(e)}function QDe(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const JDe=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Rj(e,t,r,n,i){if(rt.isFunction(n))return n.call(this,t,r);if(i&&(t=r),!!rt.isString(t)){if(rt.isString(n))return t.indexOf(n)!==-1;if(rt.isRegExp(n))return n.test(t)}}function ZDe(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function eMe(e,t){const r=rt.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(i,a,s){return this[n].call(this,t,i,a,s)},configurable:!0})})}let bl=class{constructor(t){t&&this.set(t)}set(t,r,n){const i=this;function a(o,l,c){const d=bw(l);if(!d)throw new Error("header name must be a non-empty string");const f=rt.findKey(i,d);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||l]=LN(o))}const s=(o,l)=>rt.forEach(o,(c,d)=>a(c,d,l));if(rt.isPlainObject(t)||t instanceof this.constructor)s(t,r);else if(rt.isString(t)&&(t=t.trim())&&!JDe(t))s(YDe(t),r);else if(rt.isObject(t)&&rt.isIterable(t)){let o={},l,c;for(const d of t){if(!rt.isArray(d))throw TypeError("Object iterator must return a key-value pair");o[c=d[0]]=(l=o[c])?rt.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}s(o,r)}else t!=null&&a(r,t,n);return this}get(t,r){if(t=bw(t),t){const n=rt.findKey(this,t);if(n){const i=this[n];if(!r)return i;if(r===!0)return QDe(i);if(rt.isFunction(r))return r.call(this,i,n);if(rt.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=bw(t),t){const n=rt.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Rj(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let i=!1;function a(s){if(s=bw(s),s){const o=rt.findKey(n,s);o&&(!r||Rj(n,n[o],o,r))&&(delete n[o],i=!0)}}return rt.isArray(t)?t.forEach(a):a(t),i}clear(t){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const a=r[n];(!t||Rj(this,this[a],a,t,!0))&&(delete this[a],i=!0)}return i}normalize(t){const r=this,n={};return rt.forEach(this,(i,a)=>{const s=rt.findKey(n,a);if(s){r[s]=LN(i),delete r[a];return}const o=t?ZDe(a):String(a).trim();o!==a&&delete r[a],r[o]=LN(i),n[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return rt.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=t&&rt.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[Tq]=this[Tq]={accessors:{}}).accessors,i=this.prototype;function a(s){const o=bw(s);n[o]||(eMe(i,s),n[o]=!0)}return rt.isArray(t)?t.forEach(a):a(t),this}};bl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);rt.reduceDescriptors(bl.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});rt.freezeMethods(bl);function jj(e,t){const r=this||VE,n=t||r,i=bl.from(n.headers);let a=n.data;return rt.forEach(e,function(o){a=o.call(r,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function Ase(e){return!!(e&&e.__CANCEL__)}function lb(e,t,r){Qr.call(this,e??"canceled",Qr.ERR_CANCELED,t,r),this.name="CanceledError"}rt.inherits(lb,Qr,{__CANCEL__:!0});function Tse(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Qr("Request failed with status code "+r.status,[Qr.ERR_BAD_REQUEST,Qr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function tMe(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function rMe(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i=0,a=0,s;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),d=n[a];s||(s=c),r[i]=l,n[i]=c;let f=a,p=0;for(;f!==i;)p+=r[f++],f=f%e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),c-s<t)return;const m=d&&c-d;return m?Math.round(p*1e3/m):void 0}}function nMe(e,t){let r=0,n=1e3/t,i,a;const s=(c,d=Date.now())=>{r=d,i=null,a&&(clearTimeout(a),a=null),e(...c)};return[(...c)=>{const d=Date.now(),f=d-r;f>=n?s(c,d):(i=c,a||(a=setTimeout(()=>{a=null,s(i)},n-f)))},()=>i&&s(i)]}const KA=(e,t,r=3)=>{let n=0;const i=rMe(50,250);return nMe(a=>{const s=a.loaded,o=a.lengthComputable?a.total:void 0,l=s-n,c=i(l),d=s<=o;n=s;const f={loaded:s,total:o,progress:o?s/o:void 0,bytes:l,rate:c||void 0,estimated:c&&o&&d?(o-s)/c:void 0,event:a,lengthComputable:o!=null,[t?"download":"upload"]:!0};e(f)},r)},Iq=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Oq=e=>(...t)=>rt.asap(()=>e(...t)),iMe=co.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,co.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(co.origin),co.navigator&&/(msie|trident)/i.test(co.navigator.userAgent)):()=>!0,aMe=co.hasStandardBrowserEnv?{write(e,t,r,n,i,a,s){if(typeof document>"u")return;const o=[`${e}=${encodeURIComponent(t)}`];rt.isNumber(r)&&o.push(`expires=${new Date(r).toUTCString()}`),rt.isString(n)&&o.push(`path=${n}`),rt.isString(i)&&o.push(`domain=${i}`),a===!0&&o.push("secure"),rt.isString(s)&&o.push(`SameSite=${s}`),document.cookie=o.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function sMe(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function oMe(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Ise(e,t,r){let n=!sMe(t);return e&&(n||r==!1)?oMe(e,t):t}const Pq=e=>e instanceof bl?{...e}:e;function Yg(e,t){t=t||{};const r={};function n(c,d,f,p){return rt.isPlainObject(c)&&rt.isPlainObject(d)?rt.merge.call({caseless:p},c,d):rt.isPlainObject(d)?rt.merge({},d):rt.isArray(d)?d.slice():d}function i(c,d,f,p){if(rt.isUndefined(d)){if(!rt.isUndefined(c))return n(void 0,c,f,p)}else return n(c,d,f,p)}function a(c,d){if(!rt.isUndefined(d))return n(void 0,d)}function s(c,d){if(rt.isUndefined(d)){if(!rt.isUndefined(c))return n(void 0,c)}else return n(void 0,d)}function o(c,d,f){if(f in t)return n(c,d);if(f in e)return n(void 0,c)}const l={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(c,d,f)=>i(Pq(c),Pq(d),f,!0)};return rt.forEach(Object.keys({...e,...t}),function(d){const f=l[d]||i,p=f(e[d],t[d],d);rt.isUndefined(p)&&f!==o||(r[d]=p)}),r}const Ose=e=>{const t=Yg({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:a,headers:s,auth:o}=t;if(t.headers=s=bl.from(s),t.url=kse(Ise(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&s.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),rt.isFormData(r)){if(co.hasStandardBrowserEnv||co.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(rt.isFunction(r.getHeaders)){const l=r.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([d,f])=>{c.includes(d.toLowerCase())&&s.set(d,f)})}}if(co.hasStandardBrowserEnv&&(n&&rt.isFunction(n)&&(n=n(t)),n||n!==!1&&iMe(t.url))){const l=i&&a&&aMe.read(a);l&&s.set(i,l)}return t},lMe=typeof XMLHttpRequest<"u",cMe=lMe&&function(e){return new Promise(function(r,n){const i=Ose(e);let a=i.data;const s=bl.from(i.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:c}=i,d,f,p,m,x;function v(){m&&m(),x&&x(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function w(){if(!b)return;const C=bl.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),R={data:!o||o==="text"||o==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:C,config:e,request:b};Tse(function(O){r(O),v()},function(O){n(O),v()},R),b=null}"onloadend"in b?b.onloadend=w:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(w)},b.onabort=function(){b&&(n(new Qr("Request aborted",Qr.ECONNABORTED,e,b)),b=null)},b.onerror=function(N){const R=N&&N.message?N.message:"Network Error",P=new Qr(R,Qr.ERR_NETWORK,e,b);P.event=N||null,n(P),b=null},b.ontimeout=function(){let N=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const R=i.transitional||_se;i.timeoutErrorMessage&&(N=i.timeoutErrorMessage),n(new Qr(N,R.clarifyTimeoutError?Qr.ETIMEDOUT:Qr.ECONNABORTED,e,b)),b=null},a===void 0&&s.setContentType(null),"setRequestHeader"in b&&rt.forEach(s.toJSON(),function(N,R){b.setRequestHeader(R,N)}),rt.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),o&&o!=="json"&&(b.responseType=i.responseType),c&&([p,x]=KA(c,!0),b.addEventListener("progress",p)),l&&b.upload&&([f,m]=KA(l),b.upload.addEventListener("progress",f),b.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(d=C=>{b&&(n(!C||C.type?new lb(null,e,b):C),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const _=tMe(i.url);if(_&&co.protocols.indexOf(_)===-1){n(new Qr("Unsupported protocol "+_+":",Qr.ERR_BAD_REQUEST,e));return}b.send(a||null)})},uMe=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,i;const a=function(c){if(!i){i=!0,o();const d=c instanceof Error?c:this.reason;n.abort(d instanceof Qr?d:new lb(d instanceof Error?d.message:d))}};let s=t&&setTimeout(()=>{s=null,a(new Qr(`timeout ${t} of ms exceeded`,Qr.ETIMEDOUT))},t);const o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(a):c.removeEventListener("abort",a)}),e=null)};e.forEach(c=>c.addEventListener("abort",a));const{signal:l}=n;return l.unsubscribe=()=>rt.asap(o),l}},dMe=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,i;for(;n<r;)i=n+t,yield e.slice(n,i),n=i},fMe=async function*(e,t){for await(const r of hMe(e))yield*dMe(r,t)},hMe=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},Rq=(e,t,r,n)=>{const i=fMe(e,t);let a=0,s,o=l=>{s||(s=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await i.next();if(c){o(),l.close();return}let f=d.byteLength;if(r){let p=a+=f;r(p)}l.enqueue(new Uint8Array(d))}catch(c){throw o(c),c}},cancel(l){return o(l),i.return()}},{highWaterMark:2})},jq=64*1024,{isFunction:m_}=rt,pMe=(({Request:e,Response:t})=>({Request:e,Response:t}))(rt.global),{ReadableStream:Dq,TextEncoder:Mq}=rt.global,Fq=(e,...t)=>{try{return!!e(...t)}catch{return!1}},mMe=e=>{e=rt.merge.call({skipUndefined:!0},pMe,e);const{fetch:t,Request:r,Response:n}=e,i=t?m_(t):typeof fetch=="function",a=m_(r),s=m_(n);if(!i)return!1;const o=i&&m_(Dq),l=i&&(typeof Mq=="function"?(x=>v=>x.encode(v))(new Mq):async x=>new Uint8Array(await new r(x).arrayBuffer())),c=a&&o&&Fq(()=>{let x=!1;const v=new r(co.origin,{body:new Dq,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!v}),d=s&&o&&Fq(()=>rt.isReadableStream(new n("").body)),f={stream:d&&(x=>x.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!f[x]&&(f[x]=(v,b)=>{let w=v&&v[x];if(w)return w.call(v);throw new Qr(`Response type '${x}' is not supported`,Qr.ERR_NOT_SUPPORT,b)})});const p=async x=>{if(x==null)return 0;if(rt.isBlob(x))return x.size;if(rt.isSpecCompliantForm(x))return(await new r(co.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(rt.isArrayBufferView(x)||rt.isArrayBuffer(x))return x.byteLength;if(rt.isURLSearchParams(x)&&(x=x+""),rt.isString(x))return(await l(x)).byteLength},m=async(x,v)=>{const b=rt.toFiniteNumber(x.getContentLength());return b??p(v)};return async x=>{let{url:v,method:b,data:w,signal:_,cancelToken:C,timeout:N,onDownloadProgress:R,onUploadProgress:P,responseType:O,headers:D,withCredentials:M="same-origin",fetchOptions:B}=Ose(x),U=t||fetch;O=O?(O+"").toLowerCase():"text";let H=uMe([_,C&&C.toAbortSignal()],N),Z=null;const ee=H&&H.unsubscribe&&(()=>{H.unsubscribe()});let V;try{if(P&&c&&b!=="get"&&b!=="head"&&(V=await m(D,w))!==0){let Se=new r(v,{method:"POST",body:w,duplex:"half"}),Y;if(rt.isFormData(w)&&(Y=Se.headers.get("content-type"))&&D.setContentType(Y),Se.body){const[ce,W]=Iq(V,KA(Oq(P)));w=Rq(Se.body,jq,ce,W)}}rt.isString(M)||(M=M?"include":"omit");const te=a&&"credentials"in r.prototype,se={...B,signal:H,method:b.toUpperCase(),headers:D.normalize().toJSON(),body:w,duplex:"half",credentials:te?M:void 0};Z=a&&new r(v,se);let Q=await(a?U(Z,B):U(v,se));const X=d&&(O==="stream"||O==="response");if(d&&(R||X&&ee)){const Se={};["status","statusText","headers"].forEach(G=>{Se[G]=Q[G]});const Y=rt.toFiniteNumber(Q.headers.get("content-length")),[ce,W]=R&&Iq(Y,KA(Oq(R),!0))||[];Q=new n(Rq(Q.body,jq,ce,()=>{W&&W(),ee&&ee()}),Se)}O=O||"text";let fe=await f[rt.findKey(f,O)||"text"](Q,x);return!X&&ee&&ee(),await new Promise((Se,Y)=>{Tse(Se,Y,{data:fe,headers:bl.from(Q.headers),status:Q.status,statusText:Q.statusText,config:x,request:Z})})}catch(te){throw ee&&ee(),te&&te.name==="TypeError"&&/Load failed|fetch/i.test(te.message)?Object.assign(new Qr("Network Error",Qr.ERR_NETWORK,x,Z),{cause:te.cause||te}):Qr.from(te,te&&te.code,x,Z)}}},gMe=new Map,Pse=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:i}=t,a=[n,i,r];let s=a.length,o=s,l,c,d=gMe;for(;o--;)l=a[o],c=d.get(l),c===void 0&&d.set(l,c=o?new Map:mMe(t)),d=c;return c};Pse();const C7={http:RDe,xhr:cMe,fetch:{get:Pse}};rt.forEach(C7,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Lq=e=>`- ${e}`,xMe=e=>rt.isFunction(e)||e===null||e===!1;function vMe(e,t){e=rt.isArray(e)?e:[e];const{length:r}=e;let n,i;const a={};for(let s=0;s<r;s++){n=e[s];let o;if(i=n,!xMe(n)&&(i=C7[(o=String(n)).toLowerCase()],i===void 0))throw new Qr(`Unknown adapter '${o}'`);if(i&&(rt.isFunction(i)||(i=i.get(t))))break;a[o||"#"+s]=i}if(!i){const s=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=r?s.length>1?`since :
`+s.map(Lq).join(`
`):" "+Lq(s[0]):"as no adapter specified";throw new Qr("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i}const Rse={getAdapter:vMe,adapters:C7};function Dj(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new lb(null,e)}function Bq(e){return Dj(e),e.headers=bl.from(e.headers),e.data=jj.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Rse.getAdapter(e.adapter||VE.adapter,e)(e).then(function(n){return Dj(e),n.data=jj.call(e,e.transformResponse,n),n.headers=bl.from(n.headers),n},function(n){return Ase(n)||(Dj(e),n&&n.response&&(n.response.data=jj.call(e,e.transformResponse,n.response),n.response.headers=bl.from(n.response.headers))),Promise.reject(n)})}const jse="1.13.2",b4={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{b4[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Uq={};b4.transitional=function(t,r,n){function i(a,s){return"[Axios v"+jse+"] Transitional option '"+a+"'"+s+(n?". "+n:"")}return(a,s,o)=>{if(t===!1)throw new Qr(i(s," has been removed"+(r?" in "+r:"")),Qr.ERR_DEPRECATED);return r&&!Uq[s]&&(Uq[s]=!0,console.warn(i(s," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,s,o):!0}};b4.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function yMe(e,t,r){if(typeof e!="object")throw new Qr("options must be an object",Qr.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const a=n[i],s=t[a];if(s){const o=e[a],l=o===void 0||s(o,a,e);if(l!==!0)throw new Qr("option "+a+" must be "+l,Qr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Qr("Unknown option "+a,Qr.ERR_BAD_OPTION)}}const BN={assertOptions:yMe,validators:b4},Cd=BN.validators;let Cg=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Aq,response:new Aq}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?a&&!String(n.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+a):n.stack=a}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Yg(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:a}=r;n!==void 0&&BN.assertOptions(n,{silentJSONParsing:Cd.transitional(Cd.boolean),forcedJSONParsing:Cd.transitional(Cd.boolean),clarifyTimeoutError:Cd.transitional(Cd.boolean)},!1),i!=null&&(rt.isFunction(i)?r.paramsSerializer={serialize:i}:BN.assertOptions(i,{encode:Cd.function,serialize:Cd.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),BN.assertOptions(r,{baseUrl:Cd.spelling("baseURL"),withXsrfToken:Cd.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let s=a&&rt.merge(a.common,a[r.method]);a&&rt.forEach(["delete","get","head","post","put","patch","common"],x=>{delete a[x]}),r.headers=bl.concat(s,a);const o=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(l=l&&v.synchronous,o.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let d,f=0,p;if(!l){const x=[Bq.bind(this),void 0];for(x.unshift(...o),x.push(...c),p=x.length,d=Promise.resolve(r);f<p;)d=d.then(x[f++],x[f++]);return d}p=o.length;let m=r;for(;f<p;){const x=o[f++],v=o[f++];try{m=x(m)}catch(b){v.call(this,b);break}}try{d=Bq.call(this,m)}catch(x){return Promise.reject(x)}for(f=0,p=c.length;f<p;)d=d.then(c[f++],c[f++]);return d}getUri(t){t=Yg(this.defaults,t);const r=Ise(t.baseURL,t.url,t.allowAbsoluteUrls);return kse(r,t.params,t.paramsSerializer)}};rt.forEach(["delete","get","head","options"],function(t){Cg.prototype[t]=function(r,n){return this.request(Yg(n||{},{method:t,url:r,data:(n||{}).data}))}});rt.forEach(["post","put","patch"],function(t){function r(n){return function(a,s,o){return this.request(Yg(o||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:s}))}}Cg.prototype[t]=r(),Cg.prototype[t+"Form"]=r(!0)});let bMe=class Dse{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});const n=this;this.promise.then(i=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](i);n._listeners=null}),this.promise.then=i=>{let a;const s=new Promise(o=>{n.subscribe(o),a=o}).then(i);return s.cancel=function(){n.unsubscribe(a)},s},t(function(a,s,o){n.reason||(n.reason=new lb(a,s,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Dse(function(i){t=i}),cancel:t}}};function wMe(e){return function(r){return e.apply(null,r)}}function SMe(e){return rt.isObject(e)&&e.isAxiosError===!0}const t8={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(t8).forEach(([e,t])=>{t8[t]=e});function Mse(e){const t=new Cg(e),r=hse(Cg.prototype.request,t);return rt.extend(r,Cg.prototype,t,{allOwnKeys:!0}),rt.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return Mse(Yg(e,i))},r}const cr=Mse(VE);cr.Axios=Cg;cr.CanceledError=lb;cr.CancelToken=bMe;cr.isCancel=Ase;cr.VERSION=jse;cr.toFormData=y4;cr.AxiosError=Qr;cr.Cancel=cr.CanceledError;cr.all=function(t){return Promise.all(t)};cr.spread=wMe;cr.isAxiosError=SMe;cr.mergeConfig=Yg;cr.AxiosHeaders=bl;cr.formToJSON=e=>Nse(rt.isHTMLForm(e)?new FormData(e):e);cr.getAdapter=Rse.getAdapter;cr.HttpStatusCode=t8;cr.default=cr;const{Axios:ENt,AxiosError:CNt,CanceledError:kNt,isCancel:_Nt,CancelToken:NNt,VERSION:ANt,all:TNt,Cancel:INt,isAxiosError:ONt,spread:PNt,toFormData:RNt,AxiosHeaders:jNt,HttpStatusCode:DNt,formToJSON:MNt,getAdapter:FNt,mergeConfig:LNt}=cr,r8="subfloor_server_url",k7=()=>{var r;if(!((r=window.Capacitor)==null?void 0:r.isNativePlatform()))return"";const t=localStorage.getItem(r8);return t?t.replace(/\/$/,""):""},sr=e=>{const t=k7(),r=e.startsWith("/")?e:`/${e}`;return`${t}${r}`},ds=e=>{if(!e)return"";if(e.startsWith("http"))return e;let t=e.startsWith("/")?e:`/${e}`;return!t.startsWith("/uploads/")&&!t.startsWith("/api/")&&(t=`/uploads${t}`),`${k7()}${t}`},EMe=async()=>(await cr.get(sr("/api/notifications"))).data,CMe=async()=>(await cr.get(sr("/api/notifications/unread-count"))).data.count,kMe=async e=>{await cr.patch(sr(`/api/notifications/${e}/read`))},_Me=async()=>{await cr.patch(sr("/api/notifications/read-all"))},NMe=async e=>{await cr.patch(sr(`/api/notifications/mark-reference/${e}`))},AMe=e=>$s({queryKey:["notifications","unreadCount"],queryFn:CMe,refetchInterval:1e4,enabled:e,initialData:0}),hd=()=>sr("/api/products"),TMe=async()=>{const e=await fetch(hd());if(!e.ok)throw new Error("Failed to fetch products");return e.json()},IMe=async e=>{const t=await fetch(`${hd()}/${e}/history`);if(!t.ok)throw new Error("Failed to fetch product history");return t.json()},OMe=async e=>{const t=await fetch(hd(),{method:"POST",body:e});if(!t.ok){const r=await t.json().catch(()=>({error:"Failed to create product"}));throw new Error(r.error||"Failed to create product")}return t.json()},PMe=async(e,t)=>{const r=await fetch(`${hd()}/${e}`,{method:"PATCH",body:t});if(!r.ok){const n=await r.json().catch(()=>({error:"Failed to update product"}));throw new Error(n.error||"Failed to update product")}return r.json()},RMe=async e=>{const t=await fetch(`${hd()}/${e}/duplicate`,{method:"POST"});if(!t.ok){const r=await t.json().catch(()=>({error:"Failed to duplicate product"}));throw new Error(r.error||"Failed to duplicate product")}return t.json()},jMe=async e=>{const t=await fetch(`${hd()}/${e}`,{method:"DELETE"});if(!t.ok){const r=await t.json().catch(()=>({error:"Failed to delete product"}));throw new Error(r.error||"Failed to delete product")}},DMe=async(e,t)=>{const r=await fetch(`${hd()}/${e}/variants`,{method:"POST",body:t});if(!r.ok){const n=await r.json().catch(()=>({error:"Failed to add variant"}));throw new Error(n.error||"Failed to add variant")}return r.json()},MMe=async(e,t)=>{const r=await fetch(`${hd()}/${e}/variants/batch`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({variants:t})});if(!r.ok){const n=await r.json().catch(()=>({error:"Failed to batch create variants."}));throw new Error(n.error||"Failed to batch create variants.")}return r.json()},FMe=async(e,t)=>{const r=await fetch(`${hd()}/variants/${e}`,{method:"PATCH",body:t});if(!r.ok){const n=await r.json().catch(()=>({error:"Failed to update variant"}));throw new Error(n.error||"Failed to update variant")}return r.json()},LMe=async(e,t)=>{const r=await fetch(`${hd()}/variants/batch-update`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:e,updates:t})});if(!r.ok){const n=await r.json().catch(()=>({error:"Failed to batch update variants"}));throw new Error(n.error||"Failed to batch update variants")}},Fse=async e=>{const t=await fetch(`${hd()}/variants/${e}`,{method:"DELETE"});if(!t.ok){const r=await t.json().catch(()=>({error:"Failed to delete variant"}));throw new Error(r.error||"Failed to delete variant")}},cb=(e=!0)=>$s({queryKey:["products"],queryFn:TMe,enabled:e}),_7=()=>{const e=ja(),t=()=>e.invalidateQueries({queryKey:["products"]});return{addProduct:Ir({mutationFn:OMe,onSuccess:t}),updateProduct:Ir({mutationFn:({id:r,formData:n})=>PMe(r,n),onSuccess:t}),duplicateProduct:Ir({mutationFn:RMe,onSuccess:t}),deleteProduct:Ir({mutationFn:jMe,onSuccess:t}),addVariant:Ir({mutationFn:({productId:r,formData:n})=>DMe(r,n),onSuccess:t}),addVariantsBatch:Ir({mutationFn:({productId:r,variants:n})=>MMe(r,n),onSuccess:t}),updateVariant:Ir({mutationFn:({variantId:r,formData:n})=>FMe(r,n),onSuccess:t}),batchUpdateVariants:Ir({mutationFn:({ids:r,updates:n})=>LMe(r,n),onSuccess:t}),deleteVariant:Ir({mutationFn:Fse,onSuccess:t})}},qE=()=>sr("/api/customers"),BMe=async()=>{const e=await fetch(qE());if(!e.ok)throw new Error("Failed to fetch customers.");return e.json()},UMe=async e=>{const t=await fetch(qE(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create customer.");return t.json()},$Me=async e=>{const t=await fetch(`${qE()}/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update customer.");return t.json()},zMe=async e=>{const t=await fetch(`${qE()}/${e}`,{method:"DELETE"});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to delete customer.")}},HMe=async e=>{const t=await fetch(`${qE()}/${e}/history`);if(!t.ok)throw new Error("Failed to fetch customer history.");return t.json()},Mx=()=>$s({queryKey:["customers"],queryFn:BMe}),Lse=()=>{const e=ja(),t=Ir({mutationFn:UMe,onSuccess:()=>{e.invalidateQueries({queryKey:["customers"]})}}),r=Ir({mutationFn:$Me,onSuccess:i=>{e.invalidateQueries({queryKey:["customers"]}),e.invalidateQueries({queryKey:["customer",i.id]})}}),n=Ir({mutationFn:zMe,onSuccess:()=>{e.invalidateQueries({queryKey:["customers"]})}});return{createCustomer:t,updateCustomer:r,deleteCustomer:n}},GE=()=>sr("/api/projects"),WMe=async e=>{const r=GE(),n=await fetch(r);if(!n.ok)throw new Error("Failed to fetch projects.");return n.json()},VMe=async e=>{const t=await fetch(GE(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create project.");return t.json()},qMe=async e=>{const t=await fetch(`${GE()}/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update project.");return t.json()},GMe=async e=>{const t=await fetch(`${GE()}/${e}`,{method:"DELETE"});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to delete project.")}},KMe=async e=>{const t=await fetch(`${GE()}/${e}/history`);if(!t.ok)throw new Error("Failed to fetch project history.");return t.json()},Yh=(e=!0)=>$s({queryKey:["projects"],queryFn:()=>WMe(),enabled:e}),Bse=()=>{const e=ja();return{addProject:Ir({mutationFn:VMe,onSuccess:()=>e.invalidateQueries({queryKey:["projects"]})}),updateProject:Ir({mutationFn:qMe,onSuccess:()=>e.invalidateQueries({queryKey:["projects"]})}),deleteProject:Ir({mutationFn:GMe,onSuccess:()=>e.invalidateQueries({queryKey:["projects"]})})}},KE=()=>sr("/api/installers"),XMe=async()=>{const e=await fetch(KE());if(!e.ok)throw new Error("Failed to fetch installers.");return e.json()},Use=async e=>{const t=await fetch(KE(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create installer.");return t.json()},$se=async e=>{const t=await fetch(`${KE()}/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update installer.");return t.json()},zse=async e=>{const t=await fetch(`${KE()}/${e}`,{method:"DELETE"});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to delete installer.")}},YMe=async e=>{const t=await fetch(`${KE()}/${e}/history`);if(!t.ok)throw new Error("Failed to fetch installer history.");return t.json()},vf=(e=!0)=>$s({queryKey:["installers"],queryFn:XMe,enabled:e}),N7=()=>{const e=ja(),t=Ir({mutationFn:Use,onSuccess:()=>{e.invalidateQueries({queryKey:["installers"]})}}),r=Ir({mutationFn:$se,onSuccess:()=>{e.invalidateQueries({queryKey:["installers"]})}}),n=Ir({mutationFn:zse,onSuccess:()=>{e.invalidateQueries({queryKey:["installers"]})}});return{createInstaller:t,updateInstaller:r,deleteInstaller:n}},XE=()=>sr("/api/vendors"),QMe=async()=>{const e=await fetch(XE());if(!e.ok)throw new Error("Failed to fetch vendors.");return e.json()},Hse=async e=>{const t=await fetch(XE(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to create vendor")}return t.json()},Wse=async e=>{const{id:t,...r}=e,n=await fetch(`${XE()}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!n.ok){const i=await n.json();throw new Error(i.error||"Failed to update vendor")}return n.json()},Vse=async e=>{const t=await fetch(`${XE()}/${e}`,{method:"DELETE"});if(!t.ok){if(t.status===409)throw new Error("Cannot delete vendor because it is currently in use.");const r=await t.json().catch(()=>({}));throw new Error(r.error||"Failed to delete vendor")}},JMe=async e=>{const t=await fetch(`${XE()}/${e}/history`);if(!t.ok)throw new Error("Failed to fetch vendor history.");return t.json()},w4=(e=!0)=>$s({queryKey:["vendors"],queryFn:QMe,enabled:e}),ZMe=e=>{const t=ja(),r=Ir({mutationFn:Hse,onSuccess:()=>{t.invalidateQueries({queryKey:["vendors"]})}}),n=Ir({mutationFn:Wse,onSuccess:()=>{t.invalidateQueries({queryKey:["vendors"]})}}),i=Ir({mutationFn:Vse,onSuccess:()=>{t.invalidateQueries({queryKey:["vendors"]})}});return{createVendor:r,updateVendor:n,deleteVendor:i}},YE=()=>sr("/api/quotes"),e6e=async()=>{const e=await fetch(YE());if(!e.ok)throw new Error("Failed to fetch quotes.");return e.json()},t6e=async e=>{const t=await fetch(YE(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to add quote.");return t.json()},r6e=async e=>{const t=await fetch(`${YE()}/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update quote.");return t.json()},n6e=async e=>{const t=await fetch(`${YE()}/${e.id}/accept`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const r=await t.json().catch(()=>({message:"Failed to accept quote."}));throw new Error(r.message)}return t.json()},qse=async e=>{const t=await fetch(`${YE()}/project/${e}/history`);if(!t.ok)throw new Error("Failed to fetch quote history.");return t.json()},S4=e=>$s({queryKey:["quotes"],queryFn:()=>e6e(),select:t=>e?t.filter(r=>r.projectId===e):t}),A7=()=>{const e=ja(),t=Ir({mutationFn:i=>t6e(i),onSuccess:(i,a)=>{e.invalidateQueries({queryKey:["quotes"]}),e.invalidateQueries({queryKey:["quotes",a.projectId]}),e.invalidateQueries({queryKey:["quotes","history",a.projectId]}),e.invalidateQueries({queryKey:["projects"]})}}),r=Ir({mutationFn:i=>r6e(i),onSuccess:i=>{e.invalidateQueries({queryKey:["quotes"]}),e.invalidateQueries({queryKey:["quotes",i.projectId]}),e.invalidateQueries({queryKey:["quotes","history",i.projectId]})}}),n=Ir({mutationFn:i=>n6e(i),onSuccess:i=>{const{updatedQuote:a}=i;e.invalidateQueries({queryKey:["quotes"]}),e.invalidateQueries({queryKey:["quotes",a.projectId]}),e.invalidateQueries({queryKey:["quotes","history",a.projectId]}),e.invalidateQueries({queryKey:["projects"]}),e.invalidateQueries({queryKey:["jobs"]})}});return{addQuote:t.mutateAsync,updateQuote:r.mutateAsync,acceptQuote:n.mutateAsync}},T7=()=>sr("/api/jobs"),i6e=async()=>{const e=await fetch(T7());if(!e.ok)throw new Error("Failed to fetch jobs.");return(await e.json()).map(r=>({...r,appointments:r.appointments||[]}))},a6e=async e=>{const t=await fetch(`${T7()}/project/${e}`);if(t.status===404)return null;if(!t.ok)throw new Error(`Failed to fetch job for project ${e}. Status: ${t.status}`);return t.json()},Gse=async e=>{const t=await fetch(T7(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const r=await t.json().catch(()=>({error:"Failed to save job details."}));throw new Error(r.error||"Failed to save job details.")}return t.json()},s6e=async e=>{const{id:t,...r}=e,n=await fetch(sr(`/api/projects/${t}`),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!n.ok){const i=await n.json().catch(()=>({error:"Failed to update project."}));throw new Error(i.error||"Failed to update project.")}},Kse=()=>$s({queryKey:["jobs"],queryFn:i6e}),Xse=()=>{const e=ja();return{saveJobDetails:Ir({mutationFn:Gse,onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["jobs"]}),e.invalidateQueries({queryKey:["job"]}),e.invalidateQueries({queryKey:["projects"]}),r.projectId&&(e.invalidateQueries({queryKey:["project",r.projectId]}),e.invalidateQueries({queryKey:["job",r.projectId]})),e.invalidateQueries({queryKey:["material_orders"]})}})}},E4=()=>sr("/api/change-orders"),o6e=async()=>{const e=await fetch(E4());if(!e.ok)throw new Error("Failed to fetch change orders.");return e.json()},l6e=async e=>{const t=await fetch(E4(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to add change order.");return t.json()},c6e=async(e,t)=>{const r=await fetch(`${E4()}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to update change order.");return r.json()},u6e=async e=>{const t=await fetch(`${E4()}/${e}`,{method:"DELETE"});if(!t.ok){if(t.status===403||t.status===404){const r=await t.json();throw new Error(r.error||"Failed to delete change order.")}throw new Error("Failed to delete change order.")}},Yse=(e=!0)=>$s({queryKey:["changeOrders"],queryFn:o6e,enabled:e}),I7=()=>{const e=ja(),t=Ir({mutationFn:i=>l6e(i),onSuccess:(i,a)=>{e.invalidateQueries({queryKey:["change_orders",a.projectId]}),e.invalidateQueries({queryKey:["projects"]})}}),r=Ir({mutationFn:({id:i,data:a})=>c6e(i,a),onSuccess:i=>{e.invalidateQueries({queryKey:["change_orders",i.projectId]}),e.invalidateQueries({queryKey:["projects"]})}}),n=Ir({mutationFn:i=>u6e(i),onSuccess:()=>{e.invalidateQueries({queryKey:["change_orders"]}),e.invalidateQueries({queryKey:["projects"]})}});return{addChangeOrder:t.mutateAsync,updateChangeOrder:r.mutateAsync,deleteChangeOrder:n.mutateAsync}},Fx=()=>sr("/api/orders"),d6e=async()=>{const e=await fetch(Fx());if(!e.ok)throw new Error("Failed to fetch material orders.");return e.json()},f6e=async e=>{const t=await fetch(Fx(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to create material order")}return t.json()},h6e=async(e,t)=>{const r=await fetch(`${Fx()}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to update material order")}return r.json()},p6e=async e=>{const t=await fetch(`${Fx()}/${e}`,{method:"DELETE"});if(!t.ok){const r=await t.json().catch(()=>({}));throw new Error(r.error||"Failed to delete material order")}},Qse=async e=>{const t=await fetch(`${Fx()}/${e}/history`);if(!t.ok)throw new Error("Failed to fetch material order history.");return t.json()},m6e=async(e,t)=>{const r=new FormData;r.append("dateReceived",t.dateReceived),r.append("notes",t.notes),r.append("sendEmailNotification",String(t.sendEmailNotification)),t.files&&t.files.length>0&&Array.from(t.files).forEach(i=>{r.append("paperwork",i)});const n=await fetch(`${Fx()}/${e}/receive`,{method:"POST",body:r});if(!n.ok){const i=await n.json().catch(()=>({}));throw new Error(i.error||"Failed to receive material order")}return n.json()},g6e=async(e,t)=>{const r=new FormData;r.append("items",JSON.stringify(t.items)),r.append("replacementEta",t.replacementEta),r.append("notes",t.notes),r.append("sendEmailNotification",String(t.sendEmailNotification)),t.files&&t.files.length>0&&Array.from(t.files).forEach(i=>{r.append("damagePhotos",i)});const n=await fetch(`${Fx()}/${e}/damage`,{method:"POST",body:r});if(!n.ok){const i=await n.json().catch(()=>({}));throw new Error(i.error||"Failed to report damage")}return n.json()},C4=e=>$s({queryKey:["material_orders"],queryFn:()=>d6e(),select:t=>t}),k4=()=>{const e=ja(),t=Ir({mutationFn:s=>f6e(s),onSuccess:s=>{s.projectId&&e.invalidateQueries({queryKey:["material_orders",s.projectId]}),e.invalidateQueries({queryKey:["material_orders"]}),e.invalidateQueries({queryKey:["orders"]})}}),r=Ir({mutationFn:({id:s,data:o})=>h6e(s,o),onSuccess:s=>{s.projectId&&e.invalidateQueries({queryKey:["material_orders",s.projectId]}),e.invalidateQueries({queryKey:["material_orders"]}),e.invalidateQueries({queryKey:["orders"]}),e.invalidateQueries({queryKey:["material_orders","history",s.id]})}}),n=Ir({mutationFn:s=>p6e(s),onSuccess:()=>{e.invalidateQueries({queryKey:["material_orders"]}),e.invalidateQueries({queryKey:["orders"]})}}),i=Ir({mutationFn:({id:s,data:o})=>m6e(s,o),onSuccess:s=>{s.projectId&&e.invalidateQueries({queryKey:["material_orders",s.projectId]}),e.invalidateQueries({queryKey:["orders"]}),e.invalidateQueries({queryKey:["material_orders","history",s.id]})}}),a=Ir({mutationFn:({id:s,data:o})=>g6e(s,o),onSuccess:s=>{const{originalOrder:o,replacementOrder:l}=s;o.projectId&&e.invalidateQueries({queryKey:["material_orders",o.projectId]}),e.invalidateQueries({queryKey:["material_orders"]}),e.invalidateQueries({queryKey:["orders"]}),e.invalidateQueries({queryKey:["material_orders","history",o.id]}),l&&e.invalidateQueries({queryKey:["material_orders","history",l.id]})}});return{addMaterialOrder:t.mutateAsync,updateMaterialOrder:r.mutateAsync,deleteMaterialOrder:n.mutateAsync,receiveMaterialOrder:i.mutateAsync,reportMaterialOrderDamage:a.mutateAsync}},X0=()=>sr("/api/sample-checkouts"),x6e=async e=>{const t=X0(),r=e?`${t}?projectId=${e}`:t,n=await fetch(r,{credentials:"include"});if(!n.ok)throw new Error("Failed to fetch sample checkouts.");return n.json()},v6e=async e=>{const t=await fetch(`${X0()}?customerId=${e}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch customer samples.");return t.json()},y6e=async e=>{const t=await fetch(`${X0()}?installerId=${e}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch installer samples.");return t.json()},b6e=async e=>{const t=await fetch(X0(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!t.ok)throw new Error("Failed to check out sample.");return t.json()},w6e=async e=>{const t=await fetch(`${X0()}/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({}),credentials:"include"});if(!t.ok)throw new Error("Failed to return sample.");return t.json()},S6e=async(e,t)=>{const r=await fetch(`${X0()}/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});if(!r.ok)throw new Error("Failed to update sample checkout.");return r.json()},E6e=async e=>{const t=await fetch(`${X0()}/${e}/extend`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!t.ok)throw new Error("Failed to extend sample checkout.");return t.json()},Jse=async(e,t)=>{await fetch(`${X0()}/transfer`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({checkoutIds:e,projectId:t}),credentials:"include"})},QE=e=>$s({queryKey:e?["sample_checkouts","project",e]:["sample_checkouts"],queryFn:()=>x6e(e)}),Zse=()=>{const e=ja(),t=o=>{e.invalidateQueries({queryKey:["sample_checkouts"]}),o!=null&&o.projectId&&e.invalidateQueries({queryKey:["sample_checkouts","project",o.projectId]}),o!=null&&o.customerId&&e.invalidateQueries({queryKey:["sample_checkouts","customer",o.customerId]}),o!=null&&o.installerId&&e.invalidateQueries({queryKey:["sample_checkouts","installer",o.installerId]}),e.invalidateQueries({queryKey:["samples"]}),e.invalidateQueries({queryKey:["products"]})},r=Ir({mutationFn:o=>b6e(o),onSuccess:o=>{t(o)}}),n=Ir({mutationFn:o=>w6e(o),onSuccess:o=>{t(o)}}),i=Ir({mutationFn:({id:o,data:l})=>S6e(o,l),onSuccess:o=>{t(o)}}),a=Ir({mutationFn:o=>E6e(o),onSuccess:o=>{t(o)}}),s=Ir({mutationFn:({checkoutIds:o,projectId:l})=>Jse(o,l),onSuccess:(o,l)=>{e.invalidateQueries({queryKey:["sample_checkouts"]}),e.invalidateQueries({queryKey:["sample_checkouts","project",l.projectId]})}});return{addSampleCheckout:r.mutateAsync,returnSampleCheckout:n.mutateAsync,updateSampleCheckout:i.mutateAsync,patchSampleCheckout:i.mutateAsync,extendSampleCheckout:a.mutateAsync,transferCheckouts:s.mutateAsync}},C6e=()=>{const[e,t]=I.useState([]),[r,n]=I.useState([]),[i,a]=I.useState([]),[s,o]=I.useState([]),[l,c]=I.useState([]),[d,f]=I.useState([]),[p,m]=I.useState([]),x=I.useCallback(async(P,O,D,M)=>{try{const B=await O(M);D(B)}catch(B){console.error(`Error fetching ${P} history:`,B),Re.error(`Could not load ${P} history.`),D([])}},[]),v=I.useCallback(P=>x("customer",HMe,t,P),[x]),b=I.useCallback(P=>x("project",KMe,n,P),[x]),w=I.useCallback(P=>x("quote",qse,a,P),[x]),_=I.useCallback(P=>x("installer",YMe,o,P),[x]),C=I.useCallback(P=>x("vendor",JMe,c,P),[x]),N=I.useCallback(P=>x("product",O=>IMe(String(O)),f,P),[x]),R=I.useCallback(P=>x("order",Qse,m,P),[x]);return{customerHistory:e,fetchCustomerHistory:v,projectHistory:r,fetchProjectHistory:b,quotesHistory:i,fetchQuotesHistory:w,installerHistory:s,fetchInstallerHistory:_,vendorHistory:l,fetchVendorHistory:C,sampleHistory:d,fetchSampleHistory:N,materialOrderHistory:p,fetchMaterialOrderHistory:R}},O7=async()=>{const e=await fetch(sr("/api/users"));if(!e.ok)throw new Error("Failed to fetch users");return e.json()},k6e=async(e,t,r,n)=>{const i=await fetch(sr("/api/users"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,firstName:t,lastName:r,role:n})});if(!i.ok){const a=await i.json();throw new Error(a.message||"Failed to create user")}return i.json()},_6e=async e=>{const t=await fetch(sr(`/api/users/${e}`),{method:"DELETE"});if(!t.ok){const r=await t.json();throw new Error(r.message||"Failed to delete user")}},eoe=async()=>{const e=await fetch(sr("/api/users/me"));if(!e.ok)throw new Error("Failed to fetch current user");return e.json()},N6e=async(e,t)=>{const r=await fetch(sr("/api/users/me/profile"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:e,lastName:t})});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to update profile")}return r.json()},A6e=async e=>{const t=new FormData;t.append("avatar",e);const r=await fetch(sr("/api/users/me/avatar"),{method:"POST",body:t});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to upload avatar")}return r.json()},T6e=async()=>{if(!(await fetch(sr("/api/users/me/avatar"),{method:"DELETE"})).ok)throw new Error("Failed to delete avatar")},I6e=async(e,t)=>{const r=await fetch(sr("/api/users/me/password"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:e,newPassword:t})});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to change password")}},O6e=async()=>{const e=await fetch(sr("/api/roles"));if(!e.ok)throw new Error("Failed to fetch roles");return e.json()},P6e=async(e,t)=>{const r=await fetch(sr(`/api/users/${e}/roles`),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({roles:t})});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to update user roles")}},toe=()=>sr("/api/preferences"),JE=()=>sr("/api/preferences/system"),R6e=async()=>{try{const e=await fetch(toe());if(!e.ok)throw new Error(`Failed to fetch preferences with status: ${e.status}`);return e.json()}catch(e){return console.error("Failed to fetch user preferences:",e),{}}},j6e=async e=>{try{const t=await fetch(toe(),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to save preferences.")}return t.json()}catch(t){throw console.error("Failed to save user preferences:",t),t}},XA=async e=>{const t=await fetch(`${JE()}/${e}`);if(!t.ok)throw new Error(`Failed to fetch system preference: ${e}`);return t.json()},n8=async(e,t)=>{if(!(await fetch(`${JE()}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw new Error(`Failed to save system preference: ${e}`)},D6e=async()=>{if(!(await fetch(`${JE()}/email_test`,{method:"POST"})).ok)throw new Error("Failed to send test email.")},Lx=async()=>XA("pricing"),M6e=async e=>n8("pricing",e),F6e=async e=>{const t=await fetch(`${JE()}/branding`,{method:"POST",body:e});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to upload branding files.")}return t.json()},L6e=XA,B6e=async e=>{const t=await fetch(`${JE()}/branding/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Failed to delete ${e}.`);return t.json()};var YA={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */YA.exports;(function(e,t){(function(){var r,n="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",o="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,d="__lodash_placeholder__",f=1,p=2,m=4,x=1,v=2,b=1,w=2,_=4,C=8,N=16,R=32,P=64,O=128,D=256,M=512,B=30,U="...",H=800,Z=16,ee=1,V=2,te=3,se=1/0,Q=9007199254740991,X=17976931348623157e292,fe=NaN,Se=4294967295,Y=Se-1,ce=Se>>>1,W=[["ary",O],["bind",b],["bindKey",w],["curry",C],["curryRight",N],["flip",M],["partial",R],["partialRight",P],["rearg",D]],G="[object Arguments]",ie="[object Array]",Ce="[object AsyncFunction]",re="[object Boolean]",ne="[object Date]",ge="[object DOMException]",we="[object Error]",q="[object Function]",Ae="[object GeneratorFunction]",Pe="[object Map]",He="[object Number]",je="[object Null]",$e="[object Object]",Ze="[object Promise]",lt="[object Proxy]",kt="[object RegExp]",ht="[object Set]",_r="[object String]",er="[object Symbol]",ct="[object Undefined]",Gt="[object WeakMap]",Lt="[object WeakSet]",dr="[object ArrayBuffer]",Ht="[object DataView]",ye="[object Float32Array]",Me="[object Float64Array]",qe="[object Int8Array]",it="[object Int16Array]",ze="[object Int32Array]",_e="[object Uint8Array]",ut="[object Uint8ClampedArray]",xt="[object Uint16Array]",Dt="[object Uint32Array]",Pt=/\b__p \+= '';/g,Cr=/\b(__p \+=) '' \+/g,wn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,fr=/&(?:amp|lt|gt|quot|#39);/g,Vi=/[&<>"']/g,jn=RegExp(fr.source),Qo=RegExp(Vi.source),We=/<%-([\s\S]+?)%>/g,Qe=/<%([\s\S]+?)%>/g,tt=/<%=([\s\S]+?)%>/g,_t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ut=/^\w*$/,nr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tr=/[\\^$.*+?()[\]{}|]/g,$t=RegExp(tr.source),kr=/^\s+/,Jt=/\s/,Un=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,de=/\{\n\/\* \[wrapped with (.+)\] \*/,he=/,? & /,be=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ne=/[()=,{}\[\]\/\s]/,pe=/\\(\\)?/g,me=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Fe=/\w*$/,nt=/^[-+]0x[0-9a-f]+$/i,Ge=/^0b[01]+$/i,Xe=/^\[object .+?Constructor\]$/,Je=/^0o[0-7]+$/i,wt=/^(?:0|[1-9]\d*)$/,At=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,dt=/($^)/,St=/['\n\r\u2028\u2029\\]/g,Ot="\\ud800-\\udfff",Kt="\\u0300-\\u036f",at="\\ufe20-\\ufe2f",Vn="\\u20d0-\\u20ff",$r=Kt+at+Vn,wo="\\u2700-\\u27bf",gd="a-z\\xdf-\\xf6\\xf8-\\xff",gn="\\xac\\xb1\\xd7\\xf7",en="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",tn="\\u2000-\\u206f",So=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",r1="A-Z\\xc0-\\xd6\\xd8-\\xde",n1="\\ufe0e\\ufe0f",qi=gn+en+tn+So,yc="[']",_P="["+Ot+"]",Ni="["+qi+"]",Rl="["+$r+"]",VC="\\d+",up="["+wo+"]",Kn="["+gd+"]",Da="[^"+Ot+qi+VC+wo+gd+r1+"]",Ye="\\ud83c[\\udffb-\\udfff]",Ie="(?:"+Rl+"|"+Ye+")",ir="[^"+Ot+"]",Gi="(?:\\ud83c[\\udde6-\\uddff]){2}",zs="[\\ud800-\\udbff][\\udc00-\\udfff]",dp="["+r1+"]",i1="\\u200d",Eo="(?:"+Kn+"|"+Da+")",mr="(?:"+dp+"|"+Da+")",di="(?:"+yc+"(?:d|ll|m|re|s|t|ve))?",Ib="(?:"+yc+"(?:D|LL|M|RE|S|T|VE))?",qC=Ie+"?",a1="["+n1+"]?",s1="(?:"+i1+"(?:"+[ir,Gi,zs].join("|")+")"+a1+qC+")*",Ob="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",NP="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",la=a1+qC+s1,cm="(?:"+[up,Gi,zs].join("|")+")"+la,xd="(?:"+[ir+Rl+"?",Rl,Gi,zs,_P].join("|")+")",Nr=RegExp(yc,"g"),AP=RegExp(Rl,"g"),zr=RegExp(Ye+"(?="+Ye+")|"+xd+la,"g"),Ma=RegExp([dp+"?"+Kn+"+"+di+"(?="+[Ni,dp,"$"].join("|")+")",mr+"+"+Ib+"(?="+[Ni,dp+Eo,"$"].join("|")+")",dp+"?"+Eo+"+"+di,dp+"+"+Ib,NP,Ob,VC,cm].join("|"),"g"),TP=RegExp("["+i1+Ot+$r+n1+"]"),Pb=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,GC=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Nf=-1,oi={};oi[ye]=oi[Me]=oi[qe]=oi[it]=oi[ze]=oi[_e]=oi[ut]=oi[xt]=oi[Dt]=!0,oi[G]=oi[ie]=oi[dr]=oi[re]=oi[Ht]=oi[ne]=oi[we]=oi[q]=oi[Pe]=oi[He]=oi[$e]=oi[kt]=oi[ht]=oi[_r]=oi[Gt]=!1;var Dn={};Dn[G]=Dn[ie]=Dn[dr]=Dn[Ht]=Dn[re]=Dn[ne]=Dn[ye]=Dn[Me]=Dn[qe]=Dn[it]=Dn[ze]=Dn[Pe]=Dn[He]=Dn[$e]=Dn[kt]=Dn[ht]=Dn[_r]=Dn[er]=Dn[_e]=Dn[ut]=Dn[xt]=Dn[Dt]=!0,Dn[we]=Dn[q]=Dn[Gt]=!1;var um={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},dm={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},KC={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},fm={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},hm=parseFloat,Hs=parseInt,Rb=typeof Ve=="object"&&Ve&&Ve.Object===Object&&Ve,XC=typeof self=="object"&&self&&self.Object===Object&&self,wa=Rb||XC||Function("return this")(),jb=t&&!t.nodeType&&t,Af=jb&&!0&&e&&!e.nodeType&&e,YC=Af&&Af.exports===jb,Mn=YC&&Rb.process,Co=function(){try{var ue=Af&&Af.require&&Af.require("util").types;return ue||Mn&&Mn.binding&&Mn.binding("util")}catch{}}(),pm=Co&&Co.isArrayBuffer,Eu=Co&&Co.isDate,QC=Co&&Co.isMap,et=Co&&Co.isRegExp,Xr=Co&&Co.isSet,Sa=Co&&Co.isTypedArray;function Xa(ue,Ee,Te){switch(Te.length){case 0:return ue.call(Ee);case 1:return ue.call(Ee,Te[0]);case 2:return ue.call(Ee,Te[0],Te[1]);case 3:return ue.call(Ee,Te[0],Te[1],Te[2])}return ue.apply(Ee,Te)}function JC(ue,Ee,Te,Be){for(var ot=-1,gt=ue==null?0:ue.length;++ot<gt;){var vt=ue[ot];Ee(Be,vt,Te(vt),ue)}return Be}function Jo(ue,Ee){for(var Te=-1,Be=ue==null?0:ue.length;++Te<Be&&Ee(ue[Te],Te,ue)!==!1;);return ue}function IP(ue,Ee){for(var Te=ue==null?0:ue.length;Te--&&Ee(ue[Te],Te,ue)!==!1;);return ue}function ZC(ue,Ee){for(var Te=-1,Be=ue==null?0:ue.length;++Te<Be;)if(!Ee(ue[Te],Te,ue))return!1;return!0}function bc(ue,Ee){for(var Te=-1,Be=ue==null?0:ue.length,ot=0,gt=[];++Te<Be;){var vt=ue[Te];Ee(vt,Te,ue)&&(gt[ot++]=vt)}return gt}function Ai(ue,Ee){var Te=ue==null?0:ue.length;return!!Te&&Es(ue,Ee,0)>-1}function mm(ue,Ee,Te){for(var Be=-1,ot=ue==null?0:ue.length;++Be<ot;)if(Te(Ee,ue[Be]))return!0;return!1}function Mr(ue,Ee){for(var Te=-1,Be=ue==null?0:ue.length,ot=Array(Be);++Te<Be;)ot[Te]=Ee(ue[Te],Te,ue);return ot}function jl(ue,Ee){for(var Te=-1,Be=Ee.length,ot=ue.length;++Te<Be;)ue[ot+Te]=Ee[Te];return ue}function Cu(ue,Ee,Te,Be){var ot=-1,gt=ue==null?0:ue.length;for(Be&&gt&&(Te=ue[++ot]);++ot<gt;)Te=Ee(Te,ue[ot],ot,ue);return Te}function Xn(ue,Ee,Te,Be){var ot=ue==null?0:ue.length;for(Be&&ot&&(Te=ue[--ot]);ot--;)Te=Ee(Te,ue[ot],ot,ue);return Te}function gr(ue,Ee){for(var Te=-1,Be=ue==null?0:ue.length;++Te<Be;)if(Ee(ue[Te],Te,ue))return!0;return!1}var OP=c1("length");function li(ue){return ue.split("")}function Tf(ue){return ue.match(be)||[]}function If(ue,Ee,Te){var Be;return Te(ue,function(ot,gt,vt){if(Ee(ot,gt,vt))return Be=gt,!1}),Be}function o1(ue,Ee,Te,Be){for(var ot=ue.length,gt=Te+(Be?1:-1);Be?gt--:++gt<ot;)if(Ee(ue[gt],gt,ue))return gt;return-1}function Es(ue,Ee,Te){return Ee===Ee?y(ue,Ee,Te):o1(ue,Mb,Te)}function Db(ue,Ee,Te,Be){for(var ot=Te-1,gt=ue.length;++ot<gt;)if(Be(ue[ot],Ee))return ot;return-1}function Mb(ue){return ue!==ue}function l1(ue,Ee){var Te=ue==null?0:ue.length;return Te?gm(ue,Ee)/Te:fe}function c1(ue){return function(Ee){return Ee==null?r:Ee[ue]}}function u1(ue){return function(Ee){return ue==null?r:ue[Ee]}}function ek(ue,Ee,Te,Be,ot){return ot(ue,function(gt,vt,Zt){Te=Be?(Be=!1,gt):Ee(Te,gt,vt,Zt)}),Te}function fp(ue,Ee){var Te=ue.length;for(ue.sort(Ee);Te--;)ue[Te]=ue[Te].value;return ue}function gm(ue,Ee){for(var Te,Be=-1,ot=ue.length;++Be<ot;){var gt=Ee(ue[Be]);gt!==r&&(Te=Te===r?gt:Te+gt)}return Te}function Fb(ue,Ee){for(var Te=-1,Be=Array(ue);++Te<ue;)Be[Te]=Ee(Te);return Be}function xm(ue,Ee){return Mr(Ee,function(Te){return[Te,ue[Te]]})}function tk(ue){return ue&&ue.slice(0,j(ue)+1).replace(kr,"")}function Ki(ue){return function(Ee){return ue(Ee)}}function hp(ue,Ee){return Mr(Ee,function(Te){return ue[Te]})}function Ya(ue,Ee){return ue.has(Ee)}function Lb(ue,Ee){for(var Te=-1,Be=ue.length;++Te<Be&&Es(Ee,ue[Te],0)>-1;);return Te}function Dl(ue,Ee){for(var Te=ue.length;Te--&&Es(Ee,ue[Te],0)>-1;);return Te}function PP(ue,Ee){for(var Te=ue.length,Be=0;Te--;)ue[Te]===Ee&&++Be;return Be}var Bb=u1(um),RP=u1(dm);function rk(ue){return"\\"+fm[ue]}function wc(ue,Ee){return ue==null?r:ue[Ee]}function pp(ue){return TP.test(ue)}function Ub(ue){return Pb.test(ue)}function vm(ue){for(var Ee,Te=[];!(Ee=ue.next()).done;)Te.push(Ee.value);return Te}function Sn(ue){var Ee=-1,Te=Array(ue.size);return ue.forEach(function(Be,ot){Te[++Ee]=[ot,Be]}),Te}function ym(ue,Ee){return function(Te){return ue(Ee(Te))}}function ae(ue,Ee){for(var Te=-1,Be=ue.length,ot=0,gt=[];++Te<Be;){var vt=ue[Te];(vt===Ee||vt===d)&&(ue[Te]=d,gt[ot++]=Te)}return gt}function h(ue){var Ee=-1,Te=Array(ue.size);return ue.forEach(function(Be){Te[++Ee]=Be}),Te}function g(ue){var Ee=-1,Te=Array(ue.size);return ue.forEach(function(Be){Te[++Ee]=[Be,Be]}),Te}function y(ue,Ee,Te){for(var Be=Te-1,ot=ue.length;++Be<ot;)if(ue[Be]===Ee)return Be;return-1}function E(ue,Ee,Te){for(var Be=Te+1;Be--;)if(ue[Be]===Ee)return Be;return Be}function k(ue){return pp(ue)?z(ue):OP(ue)}function T(ue){return pp(ue)?J(ue):li(ue)}function j(ue){for(var Ee=ue.length;Ee--&&Jt.test(ue.charAt(Ee)););return Ee}var L=u1(KC);function z(ue){for(var Ee=zr.lastIndex=0;zr.test(ue);)++Ee;return Ee}function J(ue){return ue.match(zr)||[]}function oe(ue){return ue.match(Ma)||[]}var xe=function ue(Ee){Ee=Ee==null?wa:Oe.defaults(wa.Object(),Ee,Oe.pick(wa,GC));var Te=Ee.Array,Be=Ee.Date,ot=Ee.Error,gt=Ee.Function,vt=Ee.Math,Zt=Ee.Object,Fr=Ee.RegExp,Ws=Ee.String,Ti=Ee.TypeError,Fa=Te.prototype,Yn=gt.prototype,Ii=Zt.prototype,Qa=Ee["__core-js_shared__"],ku=Yn.toString,kn=Ii.hasOwnProperty,jP=0,nk=function(){var S=/[^.]+$/.exec(Qa&&Qa.keys&&Qa.keys.IE_PROTO||"");return S?"Symbol(src)_1."+S:""}(),ik=Ii.toString,Mve=ku.call(Zt),Fve=wa._,Lve=Fr("^"+ku.call(kn).replace(tr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ak=YC?Ee.Buffer:r,mp=Ee.Symbol,sk=Ee.Uint8Array,rz=ak?ak.allocUnsafe:r,ok=ym(Zt.getPrototypeOf,Zt),nz=Zt.create,iz=Ii.propertyIsEnumerable,lk=Fa.splice,az=mp?mp.isConcatSpreadable:r,$b=mp?mp.iterator:r,bm=mp?mp.toStringTag:r,ck=function(){try{var S=km(Zt,"defineProperty");return S({},"",{}),S}catch{}}(),Bve=Ee.clearTimeout!==wa.clearTimeout&&Ee.clearTimeout,Uve=Be&&Be.now!==wa.Date.now&&Be.now,$ve=Ee.setTimeout!==wa.setTimeout&&Ee.setTimeout,uk=vt.ceil,dk=vt.floor,DP=Zt.getOwnPropertySymbols,zve=ak?ak.isBuffer:r,sz=Ee.isFinite,Hve=Fa.join,Wve=ym(Zt.keys,Zt),La=vt.max,Vs=vt.min,Vve=Be.now,qve=Ee.parseInt,oz=vt.random,Gve=Fa.reverse,MP=km(Ee,"DataView"),zb=km(Ee,"Map"),FP=km(Ee,"Promise"),d1=km(Ee,"Set"),Hb=km(Ee,"WeakMap"),Wb=km(Zt,"create"),fk=Hb&&new Hb,f1={},Kve=_m(MP),Xve=_m(zb),Yve=_m(FP),Qve=_m(d1),Jve=_m(Hb),hk=mp?mp.prototype:r,Vb=hk?hk.valueOf:r,lz=hk?hk.toString:r;function ve(S){if(Xi(S)&&!Wr(S)&&!(S instanceof _n)){if(S instanceof Sc)return S;if(kn.call(S,"__wrapped__"))return cH(S)}return new Sc(S)}var h1=function(){function S(){}return function(A){if(!Li(A))return{};if(nz)return nz(A);S.prototype=A;var F=new S;return S.prototype=r,F}}();function pk(){}function Sc(S,A){this.__wrapped__=S,this.__actions__=[],this.__chain__=!!A,this.__index__=0,this.__values__=r}ve.templateSettings={escape:We,evaluate:Qe,interpolate:tt,variable:"",imports:{_:ve}},ve.prototype=pk.prototype,ve.prototype.constructor=ve,Sc.prototype=h1(pk.prototype),Sc.prototype.constructor=Sc;function _n(S){this.__wrapped__=S,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Se,this.__views__=[]}function Zve(){var S=new _n(this.__wrapped__);return S.__actions__=Zo(this.__actions__),S.__dir__=this.__dir__,S.__filtered__=this.__filtered__,S.__iteratees__=Zo(this.__iteratees__),S.__takeCount__=this.__takeCount__,S.__views__=Zo(this.__views__),S}function eye(){if(this.__filtered__){var S=new _n(this);S.__dir__=-1,S.__filtered__=!0}else S=this.clone(),S.__dir__*=-1;return S}function tye(){var S=this.__wrapped__.value(),A=this.__dir__,F=Wr(S),K=A<0,le=F?S.length:0,ke=hbe(0,le,this.__views__),De=ke.start,Ue=ke.end,Ke=Ue-De,yt=K?Ue:De-1,bt=this.__iteratees__,Nt=bt.length,Wt=0,rr=Vs(Ke,this.__takeCount__);if(!F||!K&&le==Ke&&rr==Ke)return Pz(S,this.__actions__);var Or=[];e:for(;Ke--&&Wt<rr;){yt+=A;for(var on=-1,Pr=S[yt];++on<Nt;){var En=bt[on],An=En.iteratee,Ll=En.type,No=An(Pr);if(Ll==V)Pr=No;else if(!No){if(Ll==ee)continue e;break e}}Or[Wt++]=Pr}return Or}_n.prototype=h1(pk.prototype),_n.prototype.constructor=_n;function wm(S){var A=-1,F=S==null?0:S.length;for(this.clear();++A<F;){var K=S[A];this.set(K[0],K[1])}}function rye(){this.__data__=Wb?Wb(null):{},this.size=0}function nye(S){var A=this.has(S)&&delete this.__data__[S];return this.size-=A?1:0,A}function iye(S){var A=this.__data__;if(Wb){var F=A[S];return F===l?r:F}return kn.call(A,S)?A[S]:r}function aye(S){var A=this.__data__;return Wb?A[S]!==r:kn.call(A,S)}function sye(S,A){var F=this.__data__;return this.size+=this.has(S)?0:1,F[S]=Wb&&A===r?l:A,this}wm.prototype.clear=rye,wm.prototype.delete=nye,wm.prototype.get=iye,wm.prototype.has=aye,wm.prototype.set=sye;function Of(S){var A=-1,F=S==null?0:S.length;for(this.clear();++A<F;){var K=S[A];this.set(K[0],K[1])}}function oye(){this.__data__=[],this.size=0}function lye(S){var A=this.__data__,F=mk(A,S);if(F<0)return!1;var K=A.length-1;return F==K?A.pop():lk.call(A,F,1),--this.size,!0}function cye(S){var A=this.__data__,F=mk(A,S);return F<0?r:A[F][1]}function uye(S){return mk(this.__data__,S)>-1}function dye(S,A){var F=this.__data__,K=mk(F,S);return K<0?(++this.size,F.push([S,A])):F[K][1]=A,this}Of.prototype.clear=oye,Of.prototype.delete=lye,Of.prototype.get=cye,Of.prototype.has=uye,Of.prototype.set=dye;function Pf(S){var A=-1,F=S==null?0:S.length;for(this.clear();++A<F;){var K=S[A];this.set(K[0],K[1])}}function fye(){this.size=0,this.__data__={hash:new wm,map:new(zb||Of),string:new wm}}function hye(S){var A=Nk(this,S).delete(S);return this.size-=A?1:0,A}function pye(S){return Nk(this,S).get(S)}function mye(S){return Nk(this,S).has(S)}function gye(S,A){var F=Nk(this,S),K=F.size;return F.set(S,A),this.size+=F.size==K?0:1,this}Pf.prototype.clear=fye,Pf.prototype.delete=hye,Pf.prototype.get=pye,Pf.prototype.has=mye,Pf.prototype.set=gye;function Sm(S){var A=-1,F=S==null?0:S.length;for(this.__data__=new Pf;++A<F;)this.add(S[A])}function xye(S){return this.__data__.set(S,l),this}function vye(S){return this.__data__.has(S)}Sm.prototype.add=Sm.prototype.push=xye,Sm.prototype.has=vye;function _u(S){var A=this.__data__=new Of(S);this.size=A.size}function yye(){this.__data__=new Of,this.size=0}function bye(S){var A=this.__data__,F=A.delete(S);return this.size=A.size,F}function wye(S){return this.__data__.get(S)}function Sye(S){return this.__data__.has(S)}function Eye(S,A){var F=this.__data__;if(F instanceof Of){var K=F.__data__;if(!zb||K.length<i-1)return K.push([S,A]),this.size=++F.size,this;F=this.__data__=new Pf(K)}return F.set(S,A),this.size=F.size,this}_u.prototype.clear=yye,_u.prototype.delete=bye,_u.prototype.get=wye,_u.prototype.has=Sye,_u.prototype.set=Eye;function cz(S,A){var F=Wr(S),K=!F&&Nm(S),le=!F&&!K&&bp(S),ke=!F&&!K&&!le&&x1(S),De=F||K||le||ke,Ue=De?Fb(S.length,Ws):[],Ke=Ue.length;for(var yt in S)(A||kn.call(S,yt))&&!(De&&(yt=="length"||le&&(yt=="offset"||yt=="parent")||ke&&(yt=="buffer"||yt=="byteLength"||yt=="byteOffset")||Mf(yt,Ke)))&&Ue.push(yt);return Ue}function uz(S){var A=S.length;return A?S[KP(0,A-1)]:r}function Cye(S,A){return Ak(Zo(S),Em(A,0,S.length))}function kye(S){return Ak(Zo(S))}function LP(S,A,F){(F!==r&&!Nu(S[A],F)||F===r&&!(A in S))&&Rf(S,A,F)}function qb(S,A,F){var K=S[A];(!(kn.call(S,A)&&Nu(K,F))||F===r&&!(A in S))&&Rf(S,A,F)}function mk(S,A){for(var F=S.length;F--;)if(Nu(S[F][0],A))return F;return-1}function _ye(S,A,F,K){return gp(S,function(le,ke,De){A(K,le,F(le),De)}),K}function dz(S,A){return S&&yd(A,Ja(A),S)}function Nye(S,A){return S&&yd(A,tl(A),S)}function Rf(S,A,F){A=="__proto__"&&ck?ck(S,A,{configurable:!0,enumerable:!0,value:F,writable:!0}):S[A]=F}function BP(S,A){for(var F=-1,K=A.length,le=Te(K),ke=S==null;++F<K;)le[F]=ke?r:yR(S,A[F]);return le}function Em(S,A,F){return S===S&&(F!==r&&(S=S<=F?S:F),A!==r&&(S=S>=A?S:A)),S}function Ec(S,A,F,K,le,ke){var De,Ue=A&f,Ke=A&p,yt=A&m;if(F&&(De=le?F(S,K,le,ke):F(S)),De!==r)return De;if(!Li(S))return S;var bt=Wr(S);if(bt){if(De=mbe(S),!Ue)return Zo(S,De)}else{var Nt=qs(S),Wt=Nt==q||Nt==Ae;if(bp(S))return Dz(S,Ue);if(Nt==$e||Nt==G||Wt&&!le){if(De=Ke||Wt?{}:eH(S),!Ue)return Ke?ibe(S,Nye(De,S)):nbe(S,dz(De,S))}else{if(!Dn[Nt])return le?S:{};De=gbe(S,Nt,Ue)}}ke||(ke=new _u);var rr=ke.get(S);if(rr)return rr;ke.set(S,De),TH(S)?S.forEach(function(Pr){De.add(Ec(Pr,A,F,Pr,S,ke))}):NH(S)&&S.forEach(function(Pr,En){De.set(En,Ec(Pr,A,F,En,S,ke))});var Or=yt?Ke?aR:iR:Ke?tl:Ja,on=bt?r:Or(S);return Jo(on||S,function(Pr,En){on&&(En=Pr,Pr=S[En]),qb(De,En,Ec(Pr,A,F,En,S,ke))}),De}function Aye(S){var A=Ja(S);return function(F){return fz(F,S,A)}}function fz(S,A,F){var K=F.length;if(S==null)return!K;for(S=Zt(S);K--;){var le=F[K],ke=A[le],De=S[le];if(De===r&&!(le in S)||!ke(De))return!1}return!0}function hz(S,A,F){if(typeof S!="function")throw new Ti(s);return Zb(function(){S.apply(r,F)},A)}function Gb(S,A,F,K){var le=-1,ke=Ai,De=!0,Ue=S.length,Ke=[],yt=A.length;if(!Ue)return Ke;F&&(A=Mr(A,Ki(F))),K?(ke=mm,De=!1):A.length>=i&&(ke=Ya,De=!1,A=new Sm(A));e:for(;++le<Ue;){var bt=S[le],Nt=F==null?bt:F(bt);if(bt=K||bt!==0?bt:0,De&&Nt===Nt){for(var Wt=yt;Wt--;)if(A[Wt]===Nt)continue e;Ke.push(bt)}else ke(A,Nt,K)||Ke.push(bt)}return Ke}var gp=Uz(vd),pz=Uz($P,!0);function Tye(S,A){var F=!0;return gp(S,function(K,le,ke){return F=!!A(K,le,ke),F}),F}function gk(S,A,F){for(var K=-1,le=S.length;++K<le;){var ke=S[K],De=A(ke);if(De!=null&&(Ue===r?De===De&&!Fl(De):F(De,Ue)))var Ue=De,Ke=ke}return Ke}function Iye(S,A,F,K){var le=S.length;for(F=rn(F),F<0&&(F=-F>le?0:le+F),K=K===r||K>le?le:rn(K),K<0&&(K+=le),K=F>K?0:OH(K);F<K;)S[F++]=A;return S}function mz(S,A){var F=[];return gp(S,function(K,le,ke){A(K,le,ke)&&F.push(K)}),F}function Cs(S,A,F,K,le){var ke=-1,De=S.length;for(F||(F=vbe),le||(le=[]);++ke<De;){var Ue=S[ke];A>0&&F(Ue)?A>1?Cs(Ue,A-1,F,K,le):jl(le,Ue):K||(le[le.length]=Ue)}return le}var UP=$z(),gz=$z(!0);function vd(S,A){return S&&UP(S,A,Ja)}function $P(S,A){return S&&gz(S,A,Ja)}function xk(S,A){return bc(A,function(F){return Ff(S[F])})}function Cm(S,A){A=vp(A,S);for(var F=0,K=A.length;S!=null&&F<K;)S=S[bd(A[F++])];return F&&F==K?S:r}function xz(S,A,F){var K=A(S);return Wr(S)?K:jl(K,F(S))}function ko(S){return S==null?S===r?ct:je:bm&&bm in Zt(S)?fbe(S):kbe(S)}function zP(S,A){return S>A}function Oye(S,A){return S!=null&&kn.call(S,A)}function Pye(S,A){return S!=null&&A in Zt(S)}function Rye(S,A,F){return S>=Vs(A,F)&&S<La(A,F)}function HP(S,A,F){for(var K=F?mm:Ai,le=S[0].length,ke=S.length,De=ke,Ue=Te(ke),Ke=1/0,yt=[];De--;){var bt=S[De];De&&A&&(bt=Mr(bt,Ki(A))),Ke=Vs(bt.length,Ke),Ue[De]=!F&&(A||le>=120&&bt.length>=120)?new Sm(De&&bt):r}bt=S[0];var Nt=-1,Wt=Ue[0];e:for(;++Nt<le&&yt.length<Ke;){var rr=bt[Nt],Or=A?A(rr):rr;if(rr=F||rr!==0?rr:0,!(Wt?Ya(Wt,Or):K(yt,Or,F))){for(De=ke;--De;){var on=Ue[De];if(!(on?Ya(on,Or):K(S[De],Or,F)))continue e}Wt&&Wt.push(Or),yt.push(rr)}}return yt}function jye(S,A,F,K){return vd(S,function(le,ke,De){A(K,F(le),ke,De)}),K}function Kb(S,A,F){A=vp(A,S),S=iH(S,A);var K=S==null?S:S[bd(kc(A))];return K==null?r:Xa(K,S,F)}function vz(S){return Xi(S)&&ko(S)==G}function Dye(S){return Xi(S)&&ko(S)==dr}function Mye(S){return Xi(S)&&ko(S)==ne}function Xb(S,A,F,K,le){return S===A?!0:S==null||A==null||!Xi(S)&&!Xi(A)?S!==S&&A!==A:Fye(S,A,F,K,Xb,le)}function Fye(S,A,F,K,le,ke){var De=Wr(S),Ue=Wr(A),Ke=De?ie:qs(S),yt=Ue?ie:qs(A);Ke=Ke==G?$e:Ke,yt=yt==G?$e:yt;var bt=Ke==$e,Nt=yt==$e,Wt=Ke==yt;if(Wt&&bp(S)){if(!bp(A))return!1;De=!0,bt=!1}if(Wt&&!bt)return ke||(ke=new _u),De||x1(S)?Qz(S,A,F,K,le,ke):ube(S,A,Ke,F,K,le,ke);if(!(F&x)){var rr=bt&&kn.call(S,"__wrapped__"),Or=Nt&&kn.call(A,"__wrapped__");if(rr||Or){var on=rr?S.value():S,Pr=Or?A.value():A;return ke||(ke=new _u),le(on,Pr,F,K,ke)}}return Wt?(ke||(ke=new _u),dbe(S,A,F,K,le,ke)):!1}function Lye(S){return Xi(S)&&qs(S)==Pe}function WP(S,A,F,K){var le=F.length,ke=le,De=!K;if(S==null)return!ke;for(S=Zt(S);le--;){var Ue=F[le];if(De&&Ue[2]?Ue[1]!==S[Ue[0]]:!(Ue[0]in S))return!1}for(;++le<ke;){Ue=F[le];var Ke=Ue[0],yt=S[Ke],bt=Ue[1];if(De&&Ue[2]){if(yt===r&&!(Ke in S))return!1}else{var Nt=new _u;if(K)var Wt=K(yt,bt,Ke,S,A,Nt);if(!(Wt===r?Xb(bt,yt,x|v,K,Nt):Wt))return!1}}return!0}function yz(S){if(!Li(S)||bbe(S))return!1;var A=Ff(S)?Lve:Xe;return A.test(_m(S))}function Bye(S){return Xi(S)&&ko(S)==kt}function Uye(S){return Xi(S)&&qs(S)==ht}function $ye(S){return Xi(S)&&jk(S.length)&&!!oi[ko(S)]}function bz(S){return typeof S=="function"?S:S==null?rl:typeof S=="object"?Wr(S)?Ez(S[0],S[1]):Sz(S):zH(S)}function VP(S){if(!Jb(S))return Wve(S);var A=[];for(var F in Zt(S))kn.call(S,F)&&F!="constructor"&&A.push(F);return A}function zye(S){if(!Li(S))return Cbe(S);var A=Jb(S),F=[];for(var K in S)K=="constructor"&&(A||!kn.call(S,K))||F.push(K);return F}function qP(S,A){return S<A}function wz(S,A){var F=-1,K=el(S)?Te(S.length):[];return gp(S,function(le,ke,De){K[++F]=A(le,ke,De)}),K}function Sz(S){var A=oR(S);return A.length==1&&A[0][2]?rH(A[0][0],A[0][1]):function(F){return F===S||WP(F,S,A)}}function Ez(S,A){return cR(S)&&tH(A)?rH(bd(S),A):function(F){var K=yR(F,S);return K===r&&K===A?bR(F,S):Xb(A,K,x|v)}}function vk(S,A,F,K,le){S!==A&&UP(A,function(ke,De){if(le||(le=new _u),Li(ke))Hye(S,A,De,F,vk,K,le);else{var Ue=K?K(dR(S,De),ke,De+"",S,A,le):r;Ue===r&&(Ue=ke),LP(S,De,Ue)}},tl)}function Hye(S,A,F,K,le,ke,De){var Ue=dR(S,F),Ke=dR(A,F),yt=De.get(Ke);if(yt){LP(S,F,yt);return}var bt=ke?ke(Ue,Ke,F+"",S,A,De):r,Nt=bt===r;if(Nt){var Wt=Wr(Ke),rr=!Wt&&bp(Ke),Or=!Wt&&!rr&&x1(Ke);bt=Ke,Wt||rr||Or?Wr(Ue)?bt=Ue:ca(Ue)?bt=Zo(Ue):rr?(Nt=!1,bt=Dz(Ke,!0)):Or?(Nt=!1,bt=Mz(Ke,!0)):bt=[]:ew(Ke)||Nm(Ke)?(bt=Ue,Nm(Ue)?bt=PH(Ue):(!Li(Ue)||Ff(Ue))&&(bt=eH(Ke))):Nt=!1}Nt&&(De.set(Ke,bt),le(bt,Ke,K,ke,De),De.delete(Ke)),LP(S,F,bt)}function Cz(S,A){var F=S.length;if(F)return A+=A<0?F:0,Mf(A,F)?S[A]:r}function kz(S,A,F){A.length?A=Mr(A,function(ke){return Wr(ke)?function(De){return Cm(De,ke.length===1?ke[0]:ke)}:ke}):A=[rl];var K=-1;A=Mr(A,Ki(Ar()));var le=wz(S,function(ke,De,Ue){var Ke=Mr(A,function(yt){return yt(ke)});return{criteria:Ke,index:++K,value:ke}});return fp(le,function(ke,De){return rbe(ke,De,F)})}function Wye(S,A){return _z(S,A,function(F,K){return bR(S,K)})}function _z(S,A,F){for(var K=-1,le=A.length,ke={};++K<le;){var De=A[K],Ue=Cm(S,De);F(Ue,De)&&Yb(ke,vp(De,S),Ue)}return ke}function Vye(S){return function(A){return Cm(A,S)}}function GP(S,A,F,K){var le=K?Db:Es,ke=-1,De=A.length,Ue=S;for(S===A&&(A=Zo(A)),F&&(Ue=Mr(S,Ki(F)));++ke<De;)for(var Ke=0,yt=A[ke],bt=F?F(yt):yt;(Ke=le(Ue,bt,Ke,K))>-1;)Ue!==S&&lk.call(Ue,Ke,1),lk.call(S,Ke,1);return S}function Nz(S,A){for(var F=S?A.length:0,K=F-1;F--;){var le=A[F];if(F==K||le!==ke){var ke=le;Mf(le)?lk.call(S,le,1):QP(S,le)}}return S}function KP(S,A){return S+dk(oz()*(A-S+1))}function qye(S,A,F,K){for(var le=-1,ke=La(uk((A-S)/(F||1)),0),De=Te(ke);ke--;)De[K?ke:++le]=S,S+=F;return De}function XP(S,A){var F="";if(!S||A<1||A>Q)return F;do A%2&&(F+=S),A=dk(A/2),A&&(S+=S);while(A);return F}function fn(S,A){return fR(nH(S,A,rl),S+"")}function Gye(S){return uz(v1(S))}function Kye(S,A){var F=v1(S);return Ak(F,Em(A,0,F.length))}function Yb(S,A,F,K){if(!Li(S))return S;A=vp(A,S);for(var le=-1,ke=A.length,De=ke-1,Ue=S;Ue!=null&&++le<ke;){var Ke=bd(A[le]),yt=F;if(Ke==="__proto__"||Ke==="constructor"||Ke==="prototype")return S;if(le!=De){var bt=Ue[Ke];yt=K?K(bt,Ke,Ue):r,yt===r&&(yt=Li(bt)?bt:Mf(A[le+1])?[]:{})}qb(Ue,Ke,yt),Ue=Ue[Ke]}return S}var Az=fk?function(S,A){return fk.set(S,A),S}:rl,Xye=ck?function(S,A){return ck(S,"toString",{configurable:!0,enumerable:!1,value:SR(A),writable:!0})}:rl;function Yye(S){return Ak(v1(S))}function Cc(S,A,F){var K=-1,le=S.length;A<0&&(A=-A>le?0:le+A),F=F>le?le:F,F<0&&(F+=le),le=A>F?0:F-A>>>0,A>>>=0;for(var ke=Te(le);++K<le;)ke[K]=S[K+A];return ke}function Qye(S,A){var F;return gp(S,function(K,le,ke){return F=A(K,le,ke),!F}),!!F}function yk(S,A,F){var K=0,le=S==null?K:S.length;if(typeof A=="number"&&A===A&&le<=ce){for(;K<le;){var ke=K+le>>>1,De=S[ke];De!==null&&!Fl(De)&&(F?De<=A:De<A)?K=ke+1:le=ke}return le}return YP(S,A,rl,F)}function YP(S,A,F,K){var le=0,ke=S==null?0:S.length;if(ke===0)return 0;A=F(A);for(var De=A!==A,Ue=A===null,Ke=Fl(A),yt=A===r;le<ke;){var bt=dk((le+ke)/2),Nt=F(S[bt]),Wt=Nt!==r,rr=Nt===null,Or=Nt===Nt,on=Fl(Nt);if(De)var Pr=K||Or;else yt?Pr=Or&&(K||Wt):Ue?Pr=Or&&Wt&&(K||!rr):Ke?Pr=Or&&Wt&&!rr&&(K||!on):rr||on?Pr=!1:Pr=K?Nt<=A:Nt<A;Pr?le=bt+1:ke=bt}return Vs(ke,Y)}function Tz(S,A){for(var F=-1,K=S.length,le=0,ke=[];++F<K;){var De=S[F],Ue=A?A(De):De;if(!F||!Nu(Ue,Ke)){var Ke=Ue;ke[le++]=De===0?0:De}}return ke}function Iz(S){return typeof S=="number"?S:Fl(S)?fe:+S}function Ml(S){if(typeof S=="string")return S;if(Wr(S))return Mr(S,Ml)+"";if(Fl(S))return lz?lz.call(S):"";var A=S+"";return A=="0"&&1/S==-se?"-0":A}function xp(S,A,F){var K=-1,le=Ai,ke=S.length,De=!0,Ue=[],Ke=Ue;if(F)De=!1,le=mm;else if(ke>=i){var yt=A?null:lbe(S);if(yt)return h(yt);De=!1,le=Ya,Ke=new Sm}else Ke=A?[]:Ue;e:for(;++K<ke;){var bt=S[K],Nt=A?A(bt):bt;if(bt=F||bt!==0?bt:0,De&&Nt===Nt){for(var Wt=Ke.length;Wt--;)if(Ke[Wt]===Nt)continue e;A&&Ke.push(Nt),Ue.push(bt)}else le(Ke,Nt,F)||(Ke!==Ue&&Ke.push(Nt),Ue.push(bt))}return Ue}function QP(S,A){return A=vp(A,S),S=iH(S,A),S==null||delete S[bd(kc(A))]}function Oz(S,A,F,K){return Yb(S,A,F(Cm(S,A)),K)}function bk(S,A,F,K){for(var le=S.length,ke=K?le:-1;(K?ke--:++ke<le)&&A(S[ke],ke,S););return F?Cc(S,K?0:ke,K?ke+1:le):Cc(S,K?ke+1:0,K?le:ke)}function Pz(S,A){var F=S;return F instanceof _n&&(F=F.value()),Cu(A,function(K,le){return le.func.apply(le.thisArg,jl([K],le.args))},F)}function JP(S,A,F){var K=S.length;if(K<2)return K?xp(S[0]):[];for(var le=-1,ke=Te(K);++le<K;)for(var De=S[le],Ue=-1;++Ue<K;)Ue!=le&&(ke[le]=Gb(ke[le]||De,S[Ue],A,F));return xp(Cs(ke,1),A,F)}function Rz(S,A,F){for(var K=-1,le=S.length,ke=A.length,De={};++K<le;){var Ue=K<ke?A[K]:r;F(De,S[K],Ue)}return De}function ZP(S){return ca(S)?S:[]}function eR(S){return typeof S=="function"?S:rl}function vp(S,A){return Wr(S)?S:cR(S,A)?[S]:lH(qn(S))}var Jye=fn;function yp(S,A,F){var K=S.length;return F=F===r?K:F,!A&&F>=K?S:Cc(S,A,F)}var jz=Bve||function(S){return wa.clearTimeout(S)};function Dz(S,A){if(A)return S.slice();var F=S.length,K=rz?rz(F):new S.constructor(F);return S.copy(K),K}function tR(S){var A=new S.constructor(S.byteLength);return new sk(A).set(new sk(S)),A}function Zye(S,A){var F=A?tR(S.buffer):S.buffer;return new S.constructor(F,S.byteOffset,S.byteLength)}function ebe(S){var A=new S.constructor(S.source,Fe.exec(S));return A.lastIndex=S.lastIndex,A}function tbe(S){return Vb?Zt(Vb.call(S)):{}}function Mz(S,A){var F=A?tR(S.buffer):S.buffer;return new S.constructor(F,S.byteOffset,S.length)}function Fz(S,A){if(S!==A){var F=S!==r,K=S===null,le=S===S,ke=Fl(S),De=A!==r,Ue=A===null,Ke=A===A,yt=Fl(A);if(!Ue&&!yt&&!ke&&S>A||ke&&De&&Ke&&!Ue&&!yt||K&&De&&Ke||!F&&Ke||!le)return 1;if(!K&&!ke&&!yt&&S<A||yt&&F&&le&&!K&&!ke||Ue&&F&&le||!De&&le||!Ke)return-1}return 0}function rbe(S,A,F){for(var K=-1,le=S.criteria,ke=A.criteria,De=le.length,Ue=F.length;++K<De;){var Ke=Fz(le[K],ke[K]);if(Ke){if(K>=Ue)return Ke;var yt=F[K];return Ke*(yt=="desc"?-1:1)}}return S.index-A.index}function Lz(S,A,F,K){for(var le=-1,ke=S.length,De=F.length,Ue=-1,Ke=A.length,yt=La(ke-De,0),bt=Te(Ke+yt),Nt=!K;++Ue<Ke;)bt[Ue]=A[Ue];for(;++le<De;)(Nt||le<ke)&&(bt[F[le]]=S[le]);for(;yt--;)bt[Ue++]=S[le++];return bt}function Bz(S,A,F,K){for(var le=-1,ke=S.length,De=-1,Ue=F.length,Ke=-1,yt=A.length,bt=La(ke-Ue,0),Nt=Te(bt+yt),Wt=!K;++le<bt;)Nt[le]=S[le];for(var rr=le;++Ke<yt;)Nt[rr+Ke]=A[Ke];for(;++De<Ue;)(Wt||le<ke)&&(Nt[rr+F[De]]=S[le++]);return Nt}function Zo(S,A){var F=-1,K=S.length;for(A||(A=Te(K));++F<K;)A[F]=S[F];return A}function yd(S,A,F,K){var le=!F;F||(F={});for(var ke=-1,De=A.length;++ke<De;){var Ue=A[ke],Ke=K?K(F[Ue],S[Ue],Ue,F,S):r;Ke===r&&(Ke=S[Ue]),le?Rf(F,Ue,Ke):qb(F,Ue,Ke)}return F}function nbe(S,A){return yd(S,lR(S),A)}function ibe(S,A){return yd(S,Jz(S),A)}function wk(S,A){return function(F,K){var le=Wr(F)?JC:_ye,ke=A?A():{};return le(F,S,Ar(K,2),ke)}}function p1(S){return fn(function(A,F){var K=-1,le=F.length,ke=le>1?F[le-1]:r,De=le>2?F[2]:r;for(ke=S.length>3&&typeof ke=="function"?(le--,ke):r,De&&_o(F[0],F[1],De)&&(ke=le<3?r:ke,le=1),A=Zt(A);++K<le;){var Ue=F[K];Ue&&S(A,Ue,K,ke)}return A})}function Uz(S,A){return function(F,K){if(F==null)return F;if(!el(F))return S(F,K);for(var le=F.length,ke=A?le:-1,De=Zt(F);(A?ke--:++ke<le)&&K(De[ke],ke,De)!==!1;);return F}}function $z(S){return function(A,F,K){for(var le=-1,ke=Zt(A),De=K(A),Ue=De.length;Ue--;){var Ke=De[S?Ue:++le];if(F(ke[Ke],Ke,ke)===!1)break}return A}}function abe(S,A,F){var K=A&b,le=Qb(S);function ke(){var De=this&&this!==wa&&this instanceof ke?le:S;return De.apply(K?F:this,arguments)}return ke}function zz(S){return function(A){A=qn(A);var F=pp(A)?T(A):r,K=F?F[0]:A.charAt(0),le=F?yp(F,1).join(""):A.slice(1);return K[S]()+le}}function m1(S){return function(A){return Cu(UH(BH(A).replace(Nr,"")),S,"")}}function Qb(S){return function(){var A=arguments;switch(A.length){case 0:return new S;case 1:return new S(A[0]);case 2:return new S(A[0],A[1]);case 3:return new S(A[0],A[1],A[2]);case 4:return new S(A[0],A[1],A[2],A[3]);case 5:return new S(A[0],A[1],A[2],A[3],A[4]);case 6:return new S(A[0],A[1],A[2],A[3],A[4],A[5]);case 7:return new S(A[0],A[1],A[2],A[3],A[4],A[5],A[6])}var F=h1(S.prototype),K=S.apply(F,A);return Li(K)?K:F}}function sbe(S,A,F){var K=Qb(S);function le(){for(var ke=arguments.length,De=Te(ke),Ue=ke,Ke=g1(le);Ue--;)De[Ue]=arguments[Ue];var yt=ke<3&&De[0]!==Ke&&De[ke-1]!==Ke?[]:ae(De,Ke);if(ke-=yt.length,ke<F)return Gz(S,A,Sk,le.placeholder,r,De,yt,r,r,F-ke);var bt=this&&this!==wa&&this instanceof le?K:S;return Xa(bt,this,De)}return le}function Hz(S){return function(A,F,K){var le=Zt(A);if(!el(A)){var ke=Ar(F,3);A=Ja(A),F=function(Ue){return ke(le[Ue],Ue,le)}}var De=S(A,F,K);return De>-1?le[ke?A[De]:De]:r}}function Wz(S){return Df(function(A){var F=A.length,K=F,le=Sc.prototype.thru;for(S&&A.reverse();K--;){var ke=A[K];if(typeof ke!="function")throw new Ti(s);if(le&&!De&&_k(ke)=="wrapper")var De=new Sc([],!0)}for(K=De?K:F;++K<F;){ke=A[K];var Ue=_k(ke),Ke=Ue=="wrapper"?sR(ke):r;Ke&&uR(Ke[0])&&Ke[1]==(O|C|R|D)&&!Ke[4].length&&Ke[9]==1?De=De[_k(Ke[0])].apply(De,Ke[3]):De=ke.length==1&&uR(ke)?De[Ue]():De.thru(ke)}return function(){var yt=arguments,bt=yt[0];if(De&&yt.length==1&&Wr(bt))return De.plant(bt).value();for(var Nt=0,Wt=F?A[Nt].apply(this,yt):bt;++Nt<F;)Wt=A[Nt].call(this,Wt);return Wt}})}function Sk(S,A,F,K,le,ke,De,Ue,Ke,yt){var bt=A&O,Nt=A&b,Wt=A&w,rr=A&(C|N),Or=A&M,on=Wt?r:Qb(S);function Pr(){for(var En=arguments.length,An=Te(En),Ll=En;Ll--;)An[Ll]=arguments[Ll];if(rr)var No=g1(Pr),Bl=PP(An,No);if(K&&(An=Lz(An,K,le,rr)),ke&&(An=Bz(An,ke,De,rr)),En-=Bl,rr&&En<yt){var ua=ae(An,No);return Gz(S,A,Sk,Pr.placeholder,F,An,ua,Ue,Ke,yt-En)}var Au=Nt?F:this,Bf=Wt?Au[S]:S;return En=An.length,Ue?An=_be(An,Ue):Or&&En>1&&An.reverse(),bt&&Ke<En&&(An.length=Ke),this&&this!==wa&&this instanceof Pr&&(Bf=on||Qb(Bf)),Bf.apply(Au,An)}return Pr}function Vz(S,A){return function(F,K){return jye(F,S,A(K),{})}}function Ek(S,A){return function(F,K){var le;if(F===r&&K===r)return A;if(F!==r&&(le=F),K!==r){if(le===r)return K;typeof F=="string"||typeof K=="string"?(F=Ml(F),K=Ml(K)):(F=Iz(F),K=Iz(K)),le=S(F,K)}return le}}function rR(S){return Df(function(A){return A=Mr(A,Ki(Ar())),fn(function(F){var K=this;return S(A,function(le){return Xa(le,K,F)})})})}function Ck(S,A){A=A===r?" ":Ml(A);var F=A.length;if(F<2)return F?XP(A,S):A;var K=XP(A,uk(S/k(A)));return pp(A)?yp(T(K),0,S).join(""):K.slice(0,S)}function obe(S,A,F,K){var le=A&b,ke=Qb(S);function De(){for(var Ue=-1,Ke=arguments.length,yt=-1,bt=K.length,Nt=Te(bt+Ke),Wt=this&&this!==wa&&this instanceof De?ke:S;++yt<bt;)Nt[yt]=K[yt];for(;Ke--;)Nt[yt++]=arguments[++Ue];return Xa(Wt,le?F:this,Nt)}return De}function qz(S){return function(A,F,K){return K&&typeof K!="number"&&_o(A,F,K)&&(F=K=r),A=Lf(A),F===r?(F=A,A=0):F=Lf(F),K=K===r?A<F?1:-1:Lf(K),qye(A,F,K,S)}}function kk(S){return function(A,F){return typeof A=="string"&&typeof F=="string"||(A=_c(A),F=_c(F)),S(A,F)}}function Gz(S,A,F,K,le,ke,De,Ue,Ke,yt){var bt=A&C,Nt=bt?De:r,Wt=bt?r:De,rr=bt?ke:r,Or=bt?r:ke;A|=bt?R:P,A&=~(bt?P:R),A&_||(A&=-4);var on=[S,A,le,rr,Nt,Or,Wt,Ue,Ke,yt],Pr=F.apply(r,on);return uR(S)&&aH(Pr,on),Pr.placeholder=K,sH(Pr,S,A)}function nR(S){var A=vt[S];return function(F,K){if(F=_c(F),K=K==null?0:Vs(rn(K),292),K&&sz(F)){var le=(qn(F)+"e").split("e"),ke=A(le[0]+"e"+(+le[1]+K));return le=(qn(ke)+"e").split("e"),+(le[0]+"e"+(+le[1]-K))}return A(F)}}var lbe=d1&&1/h(new d1([,-0]))[1]==se?function(S){return new d1(S)}:kR;function Kz(S){return function(A){var F=qs(A);return F==Pe?Sn(A):F==ht?g(A):xm(A,S(A))}}function jf(S,A,F,K,le,ke,De,Ue){var Ke=A&w;if(!Ke&&typeof S!="function")throw new Ti(s);var yt=K?K.length:0;if(yt||(A&=-97,K=le=r),De=De===r?De:La(rn(De),0),Ue=Ue===r?Ue:rn(Ue),yt-=le?le.length:0,A&P){var bt=K,Nt=le;K=le=r}var Wt=Ke?r:sR(S),rr=[S,A,F,K,le,bt,Nt,ke,De,Ue];if(Wt&&Ebe(rr,Wt),S=rr[0],A=rr[1],F=rr[2],K=rr[3],le=rr[4],Ue=rr[9]=rr[9]===r?Ke?0:S.length:La(rr[9]-yt,0),!Ue&&A&(C|N)&&(A&=-25),!A||A==b)var Or=abe(S,A,F);else A==C||A==N?Or=sbe(S,A,Ue):(A==R||A==(b|R))&&!le.length?Or=obe(S,A,F,K):Or=Sk.apply(r,rr);var on=Wt?Az:aH;return sH(on(Or,rr),S,A)}function Xz(S,A,F,K){return S===r||Nu(S,Ii[F])&&!kn.call(K,F)?A:S}function Yz(S,A,F,K,le,ke){return Li(S)&&Li(A)&&(ke.set(A,S),vk(S,A,r,Yz,ke),ke.delete(A)),S}function cbe(S){return ew(S)?r:S}function Qz(S,A,F,K,le,ke){var De=F&x,Ue=S.length,Ke=A.length;if(Ue!=Ke&&!(De&&Ke>Ue))return!1;var yt=ke.get(S),bt=ke.get(A);if(yt&&bt)return yt==A&&bt==S;var Nt=-1,Wt=!0,rr=F&v?new Sm:r;for(ke.set(S,A),ke.set(A,S);++Nt<Ue;){var Or=S[Nt],on=A[Nt];if(K)var Pr=De?K(on,Or,Nt,A,S,ke):K(Or,on,Nt,S,A,ke);if(Pr!==r){if(Pr)continue;Wt=!1;break}if(rr){if(!gr(A,function(En,An){if(!Ya(rr,An)&&(Or===En||le(Or,En,F,K,ke)))return rr.push(An)})){Wt=!1;break}}else if(!(Or===on||le(Or,on,F,K,ke))){Wt=!1;break}}return ke.delete(S),ke.delete(A),Wt}function ube(S,A,F,K,le,ke,De){switch(F){case Ht:if(S.byteLength!=A.byteLength||S.byteOffset!=A.byteOffset)return!1;S=S.buffer,A=A.buffer;case dr:return!(S.byteLength!=A.byteLength||!ke(new sk(S),new sk(A)));case re:case ne:case He:return Nu(+S,+A);case we:return S.name==A.name&&S.message==A.message;case kt:case _r:return S==A+"";case Pe:var Ue=Sn;case ht:var Ke=K&x;if(Ue||(Ue=h),S.size!=A.size&&!Ke)return!1;var yt=De.get(S);if(yt)return yt==A;K|=v,De.set(S,A);var bt=Qz(Ue(S),Ue(A),K,le,ke,De);return De.delete(S),bt;case er:if(Vb)return Vb.call(S)==Vb.call(A)}return!1}function dbe(S,A,F,K,le,ke){var De=F&x,Ue=iR(S),Ke=Ue.length,yt=iR(A),bt=yt.length;if(Ke!=bt&&!De)return!1;for(var Nt=Ke;Nt--;){var Wt=Ue[Nt];if(!(De?Wt in A:kn.call(A,Wt)))return!1}var rr=ke.get(S),Or=ke.get(A);if(rr&&Or)return rr==A&&Or==S;var on=!0;ke.set(S,A),ke.set(A,S);for(var Pr=De;++Nt<Ke;){Wt=Ue[Nt];var En=S[Wt],An=A[Wt];if(K)var Ll=De?K(An,En,Wt,A,S,ke):K(En,An,Wt,S,A,ke);if(!(Ll===r?En===An||le(En,An,F,K,ke):Ll)){on=!1;break}Pr||(Pr=Wt=="constructor")}if(on&&!Pr){var No=S.constructor,Bl=A.constructor;No!=Bl&&"constructor"in S&&"constructor"in A&&!(typeof No=="function"&&No instanceof No&&typeof Bl=="function"&&Bl instanceof Bl)&&(on=!1)}return ke.delete(S),ke.delete(A),on}function Df(S){return fR(nH(S,r,fH),S+"")}function iR(S){return xz(S,Ja,lR)}function aR(S){return xz(S,tl,Jz)}var sR=fk?function(S){return fk.get(S)}:kR;function _k(S){for(var A=S.name+"",F=f1[A],K=kn.call(f1,A)?F.length:0;K--;){var le=F[K],ke=le.func;if(ke==null||ke==S)return le.name}return A}function g1(S){var A=kn.call(ve,"placeholder")?ve:S;return A.placeholder}function Ar(){var S=ve.iteratee||ER;return S=S===ER?bz:S,arguments.length?S(arguments[0],arguments[1]):S}function Nk(S,A){var F=S.__data__;return ybe(A)?F[typeof A=="string"?"string":"hash"]:F.map}function oR(S){for(var A=Ja(S),F=A.length;F--;){var K=A[F],le=S[K];A[F]=[K,le,tH(le)]}return A}function km(S,A){var F=wc(S,A);return yz(F)?F:r}function fbe(S){var A=kn.call(S,bm),F=S[bm];try{S[bm]=r;var K=!0}catch{}var le=ik.call(S);return K&&(A?S[bm]=F:delete S[bm]),le}var lR=DP?function(S){return S==null?[]:(S=Zt(S),bc(DP(S),function(A){return iz.call(S,A)}))}:_R,Jz=DP?function(S){for(var A=[];S;)jl(A,lR(S)),S=ok(S);return A}:_R,qs=ko;(MP&&qs(new MP(new ArrayBuffer(1)))!=Ht||zb&&qs(new zb)!=Pe||FP&&qs(FP.resolve())!=Ze||d1&&qs(new d1)!=ht||Hb&&qs(new Hb)!=Gt)&&(qs=function(S){var A=ko(S),F=A==$e?S.constructor:r,K=F?_m(F):"";if(K)switch(K){case Kve:return Ht;case Xve:return Pe;case Yve:return Ze;case Qve:return ht;case Jve:return Gt}return A});function hbe(S,A,F){for(var K=-1,le=F.length;++K<le;){var ke=F[K],De=ke.size;switch(ke.type){case"drop":S+=De;break;case"dropRight":A-=De;break;case"take":A=Vs(A,S+De);break;case"takeRight":S=La(S,A-De);break}}return{start:S,end:A}}function pbe(S){var A=S.match(de);return A?A[1].split(he):[]}function Zz(S,A,F){A=vp(A,S);for(var K=-1,le=A.length,ke=!1;++K<le;){var De=bd(A[K]);if(!(ke=S!=null&&F(S,De)))break;S=S[De]}return ke||++K!=le?ke:(le=S==null?0:S.length,!!le&&jk(le)&&Mf(De,le)&&(Wr(S)||Nm(S)))}function mbe(S){var A=S.length,F=new S.constructor(A);return A&&typeof S[0]=="string"&&kn.call(S,"index")&&(F.index=S.index,F.input=S.input),F}function eH(S){return typeof S.constructor=="function"&&!Jb(S)?h1(ok(S)):{}}function gbe(S,A,F){var K=S.constructor;switch(A){case dr:return tR(S);case re:case ne:return new K(+S);case Ht:return Zye(S,F);case ye:case Me:case qe:case it:case ze:case _e:case ut:case xt:case Dt:return Mz(S,F);case Pe:return new K;case He:case _r:return new K(S);case kt:return ebe(S);case ht:return new K;case er:return tbe(S)}}function xbe(S,A){var F=A.length;if(!F)return S;var K=F-1;return A[K]=(F>1?"& ":"")+A[K],A=A.join(F>2?", ":" "),S.replace(Un,`{
/* [wrapped with `+A+`] */
`)}function vbe(S){return Wr(S)||Nm(S)||!!(az&&S&&S[az])}function Mf(S,A){var F=typeof S;return A=A??Q,!!A&&(F=="number"||F!="symbol"&&wt.test(S))&&S>-1&&S%1==0&&S<A}function _o(S,A,F){if(!Li(F))return!1;var K=typeof A;return(K=="number"?el(F)&&Mf(A,F.length):K=="string"&&A in F)?Nu(F[A],S):!1}function cR(S,A){if(Wr(S))return!1;var F=typeof S;return F=="number"||F=="symbol"||F=="boolean"||S==null||Fl(S)?!0:Ut.test(S)||!_t.test(S)||A!=null&&S in Zt(A)}function ybe(S){var A=typeof S;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?S!=="__proto__":S===null}function uR(S){var A=_k(S),F=ve[A];if(typeof F!="function"||!(A in _n.prototype))return!1;if(S===F)return!0;var K=sR(F);return!!K&&S===K[0]}function bbe(S){return!!nk&&nk in S}var wbe=Qa?Ff:NR;function Jb(S){var A=S&&S.constructor,F=typeof A=="function"&&A.prototype||Ii;return S===F}function tH(S){return S===S&&!Li(S)}function rH(S,A){return function(F){return F==null?!1:F[S]===A&&(A!==r||S in Zt(F))}}function Sbe(S){var A=Pk(S,function(K){return F.size===c&&F.clear(),K}),F=A.cache;return A}function Ebe(S,A){var F=S[1],K=A[1],le=F|K,ke=le<(b|w|O),De=K==O&&F==C||K==O&&F==D&&S[7].length<=A[8]||K==(O|D)&&A[7].length<=A[8]&&F==C;if(!(ke||De))return S;K&b&&(S[2]=A[2],le|=F&b?0:_);var Ue=A[3];if(Ue){var Ke=S[3];S[3]=Ke?Lz(Ke,Ue,A[4]):Ue,S[4]=Ke?ae(S[3],d):A[4]}return Ue=A[5],Ue&&(Ke=S[5],S[5]=Ke?Bz(Ke,Ue,A[6]):Ue,S[6]=Ke?ae(S[5],d):A[6]),Ue=A[7],Ue&&(S[7]=Ue),K&O&&(S[8]=S[8]==null?A[8]:Vs(S[8],A[8])),S[9]==null&&(S[9]=A[9]),S[0]=A[0],S[1]=le,S}function Cbe(S){var A=[];if(S!=null)for(var F in Zt(S))A.push(F);return A}function kbe(S){return ik.call(S)}function nH(S,A,F){return A=La(A===r?S.length-1:A,0),function(){for(var K=arguments,le=-1,ke=La(K.length-A,0),De=Te(ke);++le<ke;)De[le]=K[A+le];le=-1;for(var Ue=Te(A+1);++le<A;)Ue[le]=K[le];return Ue[A]=F(De),Xa(S,this,Ue)}}function iH(S,A){return A.length<2?S:Cm(S,Cc(A,0,-1))}function _be(S,A){for(var F=S.length,K=Vs(A.length,F),le=Zo(S);K--;){var ke=A[K];S[K]=Mf(ke,F)?le[ke]:r}return S}function dR(S,A){if(!(A==="constructor"&&typeof S[A]=="function")&&A!="__proto__")return S[A]}var aH=oH(Az),Zb=$ve||function(S,A){return wa.setTimeout(S,A)},fR=oH(Xye);function sH(S,A,F){var K=A+"";return fR(S,xbe(K,Nbe(pbe(K),F)))}function oH(S){var A=0,F=0;return function(){var K=Vve(),le=Z-(K-F);if(F=K,le>0){if(++A>=H)return arguments[0]}else A=0;return S.apply(r,arguments)}}function Ak(S,A){var F=-1,K=S.length,le=K-1;for(A=A===r?K:A;++F<A;){var ke=KP(F,le),De=S[ke];S[ke]=S[F],S[F]=De}return S.length=A,S}var lH=Sbe(function(S){var A=[];return S.charCodeAt(0)===46&&A.push(""),S.replace(nr,function(F,K,le,ke){A.push(le?ke.replace(pe,"$1"):K||F)}),A});function bd(S){if(typeof S=="string"||Fl(S))return S;var A=S+"";return A=="0"&&1/S==-se?"-0":A}function _m(S){if(S!=null){try{return ku.call(S)}catch{}try{return S+""}catch{}}return""}function Nbe(S,A){return Jo(W,function(F){var K="_."+F[0];A&F[1]&&!Ai(S,K)&&S.push(K)}),S.sort()}function cH(S){if(S instanceof _n)return S.clone();var A=new Sc(S.__wrapped__,S.__chain__);return A.__actions__=Zo(S.__actions__),A.__index__=S.__index__,A.__values__=S.__values__,A}function Abe(S,A,F){(F?_o(S,A,F):A===r)?A=1:A=La(rn(A),0);var K=S==null?0:S.length;if(!K||A<1)return[];for(var le=0,ke=0,De=Te(uk(K/A));le<K;)De[ke++]=Cc(S,le,le+=A);return De}function Tbe(S){for(var A=-1,F=S==null?0:S.length,K=0,le=[];++A<F;){var ke=S[A];ke&&(le[K++]=ke)}return le}function Ibe(){var S=arguments.length;if(!S)return[];for(var A=Te(S-1),F=arguments[0],K=S;K--;)A[K-1]=arguments[K];return jl(Wr(F)?Zo(F):[F],Cs(A,1))}var Obe=fn(function(S,A){return ca(S)?Gb(S,Cs(A,1,ca,!0)):[]}),Pbe=fn(function(S,A){var F=kc(A);return ca(F)&&(F=r),ca(S)?Gb(S,Cs(A,1,ca,!0),Ar(F,2)):[]}),Rbe=fn(function(S,A){var F=kc(A);return ca(F)&&(F=r),ca(S)?Gb(S,Cs(A,1,ca,!0),r,F):[]});function jbe(S,A,F){var K=S==null?0:S.length;return K?(A=F||A===r?1:rn(A),Cc(S,A<0?0:A,K)):[]}function Dbe(S,A,F){var K=S==null?0:S.length;return K?(A=F||A===r?1:rn(A),A=K-A,Cc(S,0,A<0?0:A)):[]}function Mbe(S,A){return S&&S.length?bk(S,Ar(A,3),!0,!0):[]}function Fbe(S,A){return S&&S.length?bk(S,Ar(A,3),!0):[]}function Lbe(S,A,F,K){var le=S==null?0:S.length;return le?(F&&typeof F!="number"&&_o(S,A,F)&&(F=0,K=le),Iye(S,A,F,K)):[]}function uH(S,A,F){var K=S==null?0:S.length;if(!K)return-1;var le=F==null?0:rn(F);return le<0&&(le=La(K+le,0)),o1(S,Ar(A,3),le)}function dH(S,A,F){var K=S==null?0:S.length;if(!K)return-1;var le=K-1;return F!==r&&(le=rn(F),le=F<0?La(K+le,0):Vs(le,K-1)),o1(S,Ar(A,3),le,!0)}function fH(S){var A=S==null?0:S.length;return A?Cs(S,1):[]}function Bbe(S){var A=S==null?0:S.length;return A?Cs(S,se):[]}function Ube(S,A){var F=S==null?0:S.length;return F?(A=A===r?1:rn(A),Cs(S,A)):[]}function $be(S){for(var A=-1,F=S==null?0:S.length,K={};++A<F;){var le=S[A];K[le[0]]=le[1]}return K}function hH(S){return S&&S.length?S[0]:r}function zbe(S,A,F){var K=S==null?0:S.length;if(!K)return-1;var le=F==null?0:rn(F);return le<0&&(le=La(K+le,0)),Es(S,A,le)}function Hbe(S){var A=S==null?0:S.length;return A?Cc(S,0,-1):[]}var Wbe=fn(function(S){var A=Mr(S,ZP);return A.length&&A[0]===S[0]?HP(A):[]}),Vbe=fn(function(S){var A=kc(S),F=Mr(S,ZP);return A===kc(F)?A=r:F.pop(),F.length&&F[0]===S[0]?HP(F,Ar(A,2)):[]}),qbe=fn(function(S){var A=kc(S),F=Mr(S,ZP);return A=typeof A=="function"?A:r,A&&F.pop(),F.length&&F[0]===S[0]?HP(F,r,A):[]});function Gbe(S,A){return S==null?"":Hve.call(S,A)}function kc(S){var A=S==null?0:S.length;return A?S[A-1]:r}function Kbe(S,A,F){var K=S==null?0:S.length;if(!K)return-1;var le=K;return F!==r&&(le=rn(F),le=le<0?La(K+le,0):Vs(le,K-1)),A===A?E(S,A,le):o1(S,Mb,le,!0)}function Xbe(S,A){return S&&S.length?Cz(S,rn(A)):r}var Ybe=fn(pH);function pH(S,A){return S&&S.length&&A&&A.length?GP(S,A):S}function Qbe(S,A,F){return S&&S.length&&A&&A.length?GP(S,A,Ar(F,2)):S}function Jbe(S,A,F){return S&&S.length&&A&&A.length?GP(S,A,r,F):S}var Zbe=Df(function(S,A){var F=S==null?0:S.length,K=BP(S,A);return Nz(S,Mr(A,function(le){return Mf(le,F)?+le:le}).sort(Fz)),K});function ewe(S,A){var F=[];if(!(S&&S.length))return F;var K=-1,le=[],ke=S.length;for(A=Ar(A,3);++K<ke;){var De=S[K];A(De,K,S)&&(F.push(De),le.push(K))}return Nz(S,le),F}function hR(S){return S==null?S:Gve.call(S)}function twe(S,A,F){var K=S==null?0:S.length;return K?(F&&typeof F!="number"&&_o(S,A,F)?(A=0,F=K):(A=A==null?0:rn(A),F=F===r?K:rn(F)),Cc(S,A,F)):[]}function rwe(S,A){return yk(S,A)}function nwe(S,A,F){return YP(S,A,Ar(F,2))}function iwe(S,A){var F=S==null?0:S.length;if(F){var K=yk(S,A);if(K<F&&Nu(S[K],A))return K}return-1}function awe(S,A){return yk(S,A,!0)}function swe(S,A,F){return YP(S,A,Ar(F,2),!0)}function owe(S,A){var F=S==null?0:S.length;if(F){var K=yk(S,A,!0)-1;if(Nu(S[K],A))return K}return-1}function lwe(S){return S&&S.length?Tz(S):[]}function cwe(S,A){return S&&S.length?Tz(S,Ar(A,2)):[]}function uwe(S){var A=S==null?0:S.length;return A?Cc(S,1,A):[]}function dwe(S,A,F){return S&&S.length?(A=F||A===r?1:rn(A),Cc(S,0,A<0?0:A)):[]}function fwe(S,A,F){var K=S==null?0:S.length;return K?(A=F||A===r?1:rn(A),A=K-A,Cc(S,A<0?0:A,K)):[]}function hwe(S,A){return S&&S.length?bk(S,Ar(A,3),!1,!0):[]}function pwe(S,A){return S&&S.length?bk(S,Ar(A,3)):[]}var mwe=fn(function(S){return xp(Cs(S,1,ca,!0))}),gwe=fn(function(S){var A=kc(S);return ca(A)&&(A=r),xp(Cs(S,1,ca,!0),Ar(A,2))}),xwe=fn(function(S){var A=kc(S);return A=typeof A=="function"?A:r,xp(Cs(S,1,ca,!0),r,A)});function vwe(S){return S&&S.length?xp(S):[]}function ywe(S,A){return S&&S.length?xp(S,Ar(A,2)):[]}function bwe(S,A){return A=typeof A=="function"?A:r,S&&S.length?xp(S,r,A):[]}function pR(S){if(!(S&&S.length))return[];var A=0;return S=bc(S,function(F){if(ca(F))return A=La(F.length,A),!0}),Fb(A,function(F){return Mr(S,c1(F))})}function mH(S,A){if(!(S&&S.length))return[];var F=pR(S);return A==null?F:Mr(F,function(K){return Xa(A,r,K)})}var wwe=fn(function(S,A){return ca(S)?Gb(S,A):[]}),Swe=fn(function(S){return JP(bc(S,ca))}),Ewe=fn(function(S){var A=kc(S);return ca(A)&&(A=r),JP(bc(S,ca),Ar(A,2))}),Cwe=fn(function(S){var A=kc(S);return A=typeof A=="function"?A:r,JP(bc(S,ca),r,A)}),kwe=fn(pR);function _we(S,A){return Rz(S||[],A||[],qb)}function Nwe(S,A){return Rz(S||[],A||[],Yb)}var Awe=fn(function(S){var A=S.length,F=A>1?S[A-1]:r;return F=typeof F=="function"?(S.pop(),F):r,mH(S,F)});function gH(S){var A=ve(S);return A.__chain__=!0,A}function Twe(S,A){return A(S),S}function Tk(S,A){return A(S)}var Iwe=Df(function(S){var A=S.length,F=A?S[0]:0,K=this.__wrapped__,le=function(ke){return BP(ke,S)};return A>1||this.__actions__.length||!(K instanceof _n)||!Mf(F)?this.thru(le):(K=K.slice(F,+F+(A?1:0)),K.__actions__.push({func:Tk,args:[le],thisArg:r}),new Sc(K,this.__chain__).thru(function(ke){return A&&!ke.length&&ke.push(r),ke}))});function Owe(){return gH(this)}function Pwe(){return new Sc(this.value(),this.__chain__)}function Rwe(){this.__values__===r&&(this.__values__=IH(this.value()));var S=this.__index__>=this.__values__.length,A=S?r:this.__values__[this.__index__++];return{done:S,value:A}}function jwe(){return this}function Dwe(S){for(var A,F=this;F instanceof pk;){var K=cH(F);K.__index__=0,K.__values__=r,A?le.__wrapped__=K:A=K;var le=K;F=F.__wrapped__}return le.__wrapped__=S,A}function Mwe(){var S=this.__wrapped__;if(S instanceof _n){var A=S;return this.__actions__.length&&(A=new _n(this)),A=A.reverse(),A.__actions__.push({func:Tk,args:[hR],thisArg:r}),new Sc(A,this.__chain__)}return this.thru(hR)}function Fwe(){return Pz(this.__wrapped__,this.__actions__)}var Lwe=wk(function(S,A,F){kn.call(S,F)?++S[F]:Rf(S,F,1)});function Bwe(S,A,F){var K=Wr(S)?ZC:Tye;return F&&_o(S,A,F)&&(A=r),K(S,Ar(A,3))}function Uwe(S,A){var F=Wr(S)?bc:mz;return F(S,Ar(A,3))}var $we=Hz(uH),zwe=Hz(dH);function Hwe(S,A){return Cs(Ik(S,A),1)}function Wwe(S,A){return Cs(Ik(S,A),se)}function Vwe(S,A,F){return F=F===r?1:rn(F),Cs(Ik(S,A),F)}function xH(S,A){var F=Wr(S)?Jo:gp;return F(S,Ar(A,3))}function vH(S,A){var F=Wr(S)?IP:pz;return F(S,Ar(A,3))}var qwe=wk(function(S,A,F){kn.call(S,F)?S[F].push(A):Rf(S,F,[A])});function Gwe(S,A,F,K){S=el(S)?S:v1(S),F=F&&!K?rn(F):0;var le=S.length;return F<0&&(F=La(le+F,0)),Dk(S)?F<=le&&S.indexOf(A,F)>-1:!!le&&Es(S,A,F)>-1}var Kwe=fn(function(S,A,F){var K=-1,le=typeof A=="function",ke=el(S)?Te(S.length):[];return gp(S,function(De){ke[++K]=le?Xa(A,De,F):Kb(De,A,F)}),ke}),Xwe=wk(function(S,A,F){Rf(S,F,A)});function Ik(S,A){var F=Wr(S)?Mr:wz;return F(S,Ar(A,3))}function Ywe(S,A,F,K){return S==null?[]:(Wr(A)||(A=A==null?[]:[A]),F=K?r:F,Wr(F)||(F=F==null?[]:[F]),kz(S,A,F))}var Qwe=wk(function(S,A,F){S[F?0:1].push(A)},function(){return[[],[]]});function Jwe(S,A,F){var K=Wr(S)?Cu:ek,le=arguments.length<3;return K(S,Ar(A,4),F,le,gp)}function Zwe(S,A,F){var K=Wr(S)?Xn:ek,le=arguments.length<3;return K(S,Ar(A,4),F,le,pz)}function e2e(S,A){var F=Wr(S)?bc:mz;return F(S,Rk(Ar(A,3)))}function t2e(S){var A=Wr(S)?uz:Gye;return A(S)}function r2e(S,A,F){(F?_o(S,A,F):A===r)?A=1:A=rn(A);var K=Wr(S)?Cye:Kye;return K(S,A)}function n2e(S){var A=Wr(S)?kye:Yye;return A(S)}function i2e(S){if(S==null)return 0;if(el(S))return Dk(S)?k(S):S.length;var A=qs(S);return A==Pe||A==ht?S.size:VP(S).length}function a2e(S,A,F){var K=Wr(S)?gr:Qye;return F&&_o(S,A,F)&&(A=r),K(S,Ar(A,3))}var s2e=fn(function(S,A){if(S==null)return[];var F=A.length;return F>1&&_o(S,A[0],A[1])?A=[]:F>2&&_o(A[0],A[1],A[2])&&(A=[A[0]]),kz(S,Cs(A,1),[])}),Ok=Uve||function(){return wa.Date.now()};function o2e(S,A){if(typeof A!="function")throw new Ti(s);return S=rn(S),function(){if(--S<1)return A.apply(this,arguments)}}function yH(S,A,F){return A=F?r:A,A=S&&A==null?S.length:A,jf(S,O,r,r,r,r,A)}function bH(S,A){var F;if(typeof A!="function")throw new Ti(s);return S=rn(S),function(){return--S>0&&(F=A.apply(this,arguments)),S<=1&&(A=r),F}}var mR=fn(function(S,A,F){var K=b;if(F.length){var le=ae(F,g1(mR));K|=R}return jf(S,K,A,F,le)}),wH=fn(function(S,A,F){var K=b|w;if(F.length){var le=ae(F,g1(wH));K|=R}return jf(A,K,S,F,le)});function SH(S,A,F){A=F?r:A;var K=jf(S,C,r,r,r,r,r,A);return K.placeholder=SH.placeholder,K}function EH(S,A,F){A=F?r:A;var K=jf(S,N,r,r,r,r,r,A);return K.placeholder=EH.placeholder,K}function CH(S,A,F){var K,le,ke,De,Ue,Ke,yt=0,bt=!1,Nt=!1,Wt=!0;if(typeof S!="function")throw new Ti(s);A=_c(A)||0,Li(F)&&(bt=!!F.leading,Nt="maxWait"in F,ke=Nt?La(_c(F.maxWait)||0,A):ke,Wt="trailing"in F?!!F.trailing:Wt);function rr(ua){var Au=K,Bf=le;return K=le=r,yt=ua,De=S.apply(Bf,Au),De}function Or(ua){return yt=ua,Ue=Zb(En,A),bt?rr(ua):De}function on(ua){var Au=ua-Ke,Bf=ua-yt,HH=A-Au;return Nt?Vs(HH,ke-Bf):HH}function Pr(ua){var Au=ua-Ke,Bf=ua-yt;return Ke===r||Au>=A||Au<0||Nt&&Bf>=ke}function En(){var ua=Ok();if(Pr(ua))return An(ua);Ue=Zb(En,on(ua))}function An(ua){return Ue=r,Wt&&K?rr(ua):(K=le=r,De)}function Ll(){Ue!==r&&jz(Ue),yt=0,K=Ke=le=Ue=r}function No(){return Ue===r?De:An(Ok())}function Bl(){var ua=Ok(),Au=Pr(ua);if(K=arguments,le=this,Ke=ua,Au){if(Ue===r)return Or(Ke);if(Nt)return jz(Ue),Ue=Zb(En,A),rr(Ke)}return Ue===r&&(Ue=Zb(En,A)),De}return Bl.cancel=Ll,Bl.flush=No,Bl}var l2e=fn(function(S,A){return hz(S,1,A)}),c2e=fn(function(S,A,F){return hz(S,_c(A)||0,F)});function u2e(S){return jf(S,M)}function Pk(S,A){if(typeof S!="function"||A!=null&&typeof A!="function")throw new Ti(s);var F=function(){var K=arguments,le=A?A.apply(this,K):K[0],ke=F.cache;if(ke.has(le))return ke.get(le);var De=S.apply(this,K);return F.cache=ke.set(le,De)||ke,De};return F.cache=new(Pk.Cache||Pf),F}Pk.Cache=Pf;function Rk(S){if(typeof S!="function")throw new Ti(s);return function(){var A=arguments;switch(A.length){case 0:return!S.call(this);case 1:return!S.call(this,A[0]);case 2:return!S.call(this,A[0],A[1]);case 3:return!S.call(this,A[0],A[1],A[2])}return!S.apply(this,A)}}function d2e(S){return bH(2,S)}var f2e=Jye(function(S,A){A=A.length==1&&Wr(A[0])?Mr(A[0],Ki(Ar())):Mr(Cs(A,1),Ki(Ar()));var F=A.length;return fn(function(K){for(var le=-1,ke=Vs(K.length,F);++le<ke;)K[le]=A[le].call(this,K[le]);return Xa(S,this,K)})}),gR=fn(function(S,A){var F=ae(A,g1(gR));return jf(S,R,r,A,F)}),kH=fn(function(S,A){var F=ae(A,g1(kH));return jf(S,P,r,A,F)}),h2e=Df(function(S,A){return jf(S,D,r,r,r,A)});function p2e(S,A){if(typeof S!="function")throw new Ti(s);return A=A===r?A:rn(A),fn(S,A)}function m2e(S,A){if(typeof S!="function")throw new Ti(s);return A=A==null?0:La(rn(A),0),fn(function(F){var K=F[A],le=yp(F,0,A);return K&&jl(le,K),Xa(S,this,le)})}function g2e(S,A,F){var K=!0,le=!0;if(typeof S!="function")throw new Ti(s);return Li(F)&&(K="leading"in F?!!F.leading:K,le="trailing"in F?!!F.trailing:le),CH(S,A,{leading:K,maxWait:A,trailing:le})}function x2e(S){return yH(S,1)}function v2e(S,A){return gR(eR(A),S)}function y2e(){if(!arguments.length)return[];var S=arguments[0];return Wr(S)?S:[S]}function b2e(S){return Ec(S,m)}function w2e(S,A){return A=typeof A=="function"?A:r,Ec(S,m,A)}function S2e(S){return Ec(S,f|m)}function E2e(S,A){return A=typeof A=="function"?A:r,Ec(S,f|m,A)}function C2e(S,A){return A==null||fz(S,A,Ja(A))}function Nu(S,A){return S===A||S!==S&&A!==A}var k2e=kk(zP),_2e=kk(function(S,A){return S>=A}),Nm=vz(function(){return arguments}())?vz:function(S){return Xi(S)&&kn.call(S,"callee")&&!iz.call(S,"callee")},Wr=Te.isArray,N2e=pm?Ki(pm):Dye;function el(S){return S!=null&&jk(S.length)&&!Ff(S)}function ca(S){return Xi(S)&&el(S)}function A2e(S){return S===!0||S===!1||Xi(S)&&ko(S)==re}var bp=zve||NR,T2e=Eu?Ki(Eu):Mye;function I2e(S){return Xi(S)&&S.nodeType===1&&!ew(S)}function O2e(S){if(S==null)return!0;if(el(S)&&(Wr(S)||typeof S=="string"||typeof S.splice=="function"||bp(S)||x1(S)||Nm(S)))return!S.length;var A=qs(S);if(A==Pe||A==ht)return!S.size;if(Jb(S))return!VP(S).length;for(var F in S)if(kn.call(S,F))return!1;return!0}function P2e(S,A){return Xb(S,A)}function R2e(S,A,F){F=typeof F=="function"?F:r;var K=F?F(S,A):r;return K===r?Xb(S,A,r,F):!!K}function xR(S){if(!Xi(S))return!1;var A=ko(S);return A==we||A==ge||typeof S.message=="string"&&typeof S.name=="string"&&!ew(S)}function j2e(S){return typeof S=="number"&&sz(S)}function Ff(S){if(!Li(S))return!1;var A=ko(S);return A==q||A==Ae||A==Ce||A==lt}function _H(S){return typeof S=="number"&&S==rn(S)}function jk(S){return typeof S=="number"&&S>-1&&S%1==0&&S<=Q}function Li(S){var A=typeof S;return S!=null&&(A=="object"||A=="function")}function Xi(S){return S!=null&&typeof S=="object"}var NH=QC?Ki(QC):Lye;function D2e(S,A){return S===A||WP(S,A,oR(A))}function M2e(S,A,F){return F=typeof F=="function"?F:r,WP(S,A,oR(A),F)}function F2e(S){return AH(S)&&S!=+S}function L2e(S){if(wbe(S))throw new ot(a);return yz(S)}function B2e(S){return S===null}function U2e(S){return S==null}function AH(S){return typeof S=="number"||Xi(S)&&ko(S)==He}function ew(S){if(!Xi(S)||ko(S)!=$e)return!1;var A=ok(S);if(A===null)return!0;var F=kn.call(A,"constructor")&&A.constructor;return typeof F=="function"&&F instanceof F&&ku.call(F)==Mve}var vR=et?Ki(et):Bye;function $2e(S){return _H(S)&&S>=-Q&&S<=Q}var TH=Xr?Ki(Xr):Uye;function Dk(S){return typeof S=="string"||!Wr(S)&&Xi(S)&&ko(S)==_r}function Fl(S){return typeof S=="symbol"||Xi(S)&&ko(S)==er}var x1=Sa?Ki(Sa):$ye;function z2e(S){return S===r}function H2e(S){return Xi(S)&&qs(S)==Gt}function W2e(S){return Xi(S)&&ko(S)==Lt}var V2e=kk(qP),q2e=kk(function(S,A){return S<=A});function IH(S){if(!S)return[];if(el(S))return Dk(S)?T(S):Zo(S);if($b&&S[$b])return vm(S[$b]());var A=qs(S),F=A==Pe?Sn:A==ht?h:v1;return F(S)}function Lf(S){if(!S)return S===0?S:0;if(S=_c(S),S===se||S===-se){var A=S<0?-1:1;return A*X}return S===S?S:0}function rn(S){var A=Lf(S),F=A%1;return A===A?F?A-F:A:0}function OH(S){return S?Em(rn(S),0,Se):0}function _c(S){if(typeof S=="number")return S;if(Fl(S))return fe;if(Li(S)){var A=typeof S.valueOf=="function"?S.valueOf():S;S=Li(A)?A+"":A}if(typeof S!="string")return S===0?S:+S;S=tk(S);var F=Ge.test(S);return F||Je.test(S)?Hs(S.slice(2),F?2:8):nt.test(S)?fe:+S}function PH(S){return yd(S,tl(S))}function G2e(S){return S?Em(rn(S),-Q,Q):S===0?S:0}function qn(S){return S==null?"":Ml(S)}var K2e=p1(function(S,A){if(Jb(A)||el(A)){yd(A,Ja(A),S);return}for(var F in A)kn.call(A,F)&&qb(S,F,A[F])}),RH=p1(function(S,A){yd(A,tl(A),S)}),Mk=p1(function(S,A,F,K){yd(A,tl(A),S,K)}),X2e=p1(function(S,A,F,K){yd(A,Ja(A),S,K)}),Y2e=Df(BP);function Q2e(S,A){var F=h1(S);return A==null?F:dz(F,A)}var J2e=fn(function(S,A){S=Zt(S);var F=-1,K=A.length,le=K>2?A[2]:r;for(le&&_o(A[0],A[1],le)&&(K=1);++F<K;)for(var ke=A[F],De=tl(ke),Ue=-1,Ke=De.length;++Ue<Ke;){var yt=De[Ue],bt=S[yt];(bt===r||Nu(bt,Ii[yt])&&!kn.call(S,yt))&&(S[yt]=ke[yt])}return S}),Z2e=fn(function(S){return S.push(r,Yz),Xa(jH,r,S)});function eSe(S,A){return If(S,Ar(A,3),vd)}function tSe(S,A){return If(S,Ar(A,3),$P)}function rSe(S,A){return S==null?S:UP(S,Ar(A,3),tl)}function nSe(S,A){return S==null?S:gz(S,Ar(A,3),tl)}function iSe(S,A){return S&&vd(S,Ar(A,3))}function aSe(S,A){return S&&$P(S,Ar(A,3))}function sSe(S){return S==null?[]:xk(S,Ja(S))}function oSe(S){return S==null?[]:xk(S,tl(S))}function yR(S,A,F){var K=S==null?r:Cm(S,A);return K===r?F:K}function lSe(S,A){return S!=null&&Zz(S,A,Oye)}function bR(S,A){return S!=null&&Zz(S,A,Pye)}var cSe=Vz(function(S,A,F){A!=null&&typeof A.toString!="function"&&(A=ik.call(A)),S[A]=F},SR(rl)),uSe=Vz(function(S,A,F){A!=null&&typeof A.toString!="function"&&(A=ik.call(A)),kn.call(S,A)?S[A].push(F):S[A]=[F]},Ar),dSe=fn(Kb);function Ja(S){return el(S)?cz(S):VP(S)}function tl(S){return el(S)?cz(S,!0):zye(S)}function fSe(S,A){var F={};return A=Ar(A,3),vd(S,function(K,le,ke){Rf(F,A(K,le,ke),K)}),F}function hSe(S,A){var F={};return A=Ar(A,3),vd(S,function(K,le,ke){Rf(F,le,A(K,le,ke))}),F}var pSe=p1(function(S,A,F){vk(S,A,F)}),jH=p1(function(S,A,F,K){vk(S,A,F,K)}),mSe=Df(function(S,A){var F={};if(S==null)return F;var K=!1;A=Mr(A,function(ke){return ke=vp(ke,S),K||(K=ke.length>1),ke}),yd(S,aR(S),F),K&&(F=Ec(F,f|p|m,cbe));for(var le=A.length;le--;)QP(F,A[le]);return F});function gSe(S,A){return DH(S,Rk(Ar(A)))}var xSe=Df(function(S,A){return S==null?{}:Wye(S,A)});function DH(S,A){if(S==null)return{};var F=Mr(aR(S),function(K){return[K]});return A=Ar(A),_z(S,F,function(K,le){return A(K,le[0])})}function vSe(S,A,F){A=vp(A,S);var K=-1,le=A.length;for(le||(le=1,S=r);++K<le;){var ke=S==null?r:S[bd(A[K])];ke===r&&(K=le,ke=F),S=Ff(ke)?ke.call(S):ke}return S}function ySe(S,A,F){return S==null?S:Yb(S,A,F)}function bSe(S,A,F,K){return K=typeof K=="function"?K:r,S==null?S:Yb(S,A,F,K)}var MH=Kz(Ja),FH=Kz(tl);function wSe(S,A,F){var K=Wr(S),le=K||bp(S)||x1(S);if(A=Ar(A,4),F==null){var ke=S&&S.constructor;le?F=K?new ke:[]:Li(S)?F=Ff(ke)?h1(ok(S)):{}:F={}}return(le?Jo:vd)(S,function(De,Ue,Ke){return A(F,De,Ue,Ke)}),F}function SSe(S,A){return S==null?!0:QP(S,A)}function ESe(S,A,F){return S==null?S:Oz(S,A,eR(F))}function CSe(S,A,F,K){return K=typeof K=="function"?K:r,S==null?S:Oz(S,A,eR(F),K)}function v1(S){return S==null?[]:hp(S,Ja(S))}function kSe(S){return S==null?[]:hp(S,tl(S))}function _Se(S,A,F){return F===r&&(F=A,A=r),F!==r&&(F=_c(F),F=F===F?F:0),A!==r&&(A=_c(A),A=A===A?A:0),Em(_c(S),A,F)}function NSe(S,A,F){return A=Lf(A),F===r?(F=A,A=0):F=Lf(F),S=_c(S),Rye(S,A,F)}function ASe(S,A,F){if(F&&typeof F!="boolean"&&_o(S,A,F)&&(A=F=r),F===r&&(typeof A=="boolean"?(F=A,A=r):typeof S=="boolean"&&(F=S,S=r)),S===r&&A===r?(S=0,A=1):(S=Lf(S),A===r?(A=S,S=0):A=Lf(A)),S>A){var K=S;S=A,A=K}if(F||S%1||A%1){var le=oz();return Vs(S+le*(A-S+hm("1e-"+((le+"").length-1))),A)}return KP(S,A)}var TSe=m1(function(S,A,F){return A=A.toLowerCase(),S+(F?LH(A):A)});function LH(S){return wR(qn(S).toLowerCase())}function BH(S){return S=qn(S),S&&S.replace(At,Bb).replace(AP,"")}function ISe(S,A,F){S=qn(S),A=Ml(A);var K=S.length;F=F===r?K:Em(rn(F),0,K);var le=F;return F-=A.length,F>=0&&S.slice(F,le)==A}function OSe(S){return S=qn(S),S&&Qo.test(S)?S.replace(Vi,RP):S}function PSe(S){return S=qn(S),S&&$t.test(S)?S.replace(tr,"\\$&"):S}var RSe=m1(function(S,A,F){return S+(F?"-":"")+A.toLowerCase()}),jSe=m1(function(S,A,F){return S+(F?" ":"")+A.toLowerCase()}),DSe=zz("toLowerCase");function MSe(S,A,F){S=qn(S),A=rn(A);var K=A?k(S):0;if(!A||K>=A)return S;var le=(A-K)/2;return Ck(dk(le),F)+S+Ck(uk(le),F)}function FSe(S,A,F){S=qn(S),A=rn(A);var K=A?k(S):0;return A&&K<A?S+Ck(A-K,F):S}function LSe(S,A,F){S=qn(S),A=rn(A);var K=A?k(S):0;return A&&K<A?Ck(A-K,F)+S:S}function BSe(S,A,F){return F||A==null?A=0:A&&(A=+A),qve(qn(S).replace(kr,""),A||0)}function USe(S,A,F){return(F?_o(S,A,F):A===r)?A=1:A=rn(A),XP(qn(S),A)}function $Se(){var S=arguments,A=qn(S[0]);return S.length<3?A:A.replace(S[1],S[2])}var zSe=m1(function(S,A,F){return S+(F?"_":"")+A.toLowerCase()});function HSe(S,A,F){return F&&typeof F!="number"&&_o(S,A,F)&&(A=F=r),F=F===r?Se:F>>>0,F?(S=qn(S),S&&(typeof A=="string"||A!=null&&!vR(A))&&(A=Ml(A),!A&&pp(S))?yp(T(S),0,F):S.split(A,F)):[]}var WSe=m1(function(S,A,F){return S+(F?" ":"")+wR(A)});function VSe(S,A,F){return S=qn(S),F=F==null?0:Em(rn(F),0,S.length),A=Ml(A),S.slice(F,F+A.length)==A}function qSe(S,A,F){var K=ve.templateSettings;F&&_o(S,A,F)&&(A=r),S=qn(S),A=Mk({},A,K,Xz);var le=Mk({},A.imports,K.imports,Xz),ke=Ja(le),De=hp(le,ke),Ue,Ke,yt=0,bt=A.interpolate||dt,Nt="__p += '",Wt=Fr((A.escape||dt).source+"|"+bt.source+"|"+(bt===tt?me:dt).source+"|"+(A.evaluate||dt).source+"|$","g"),rr="//# sourceURL="+(kn.call(A,"sourceURL")?(A.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Nf+"]")+`
`;S.replace(Wt,function(Pr,En,An,Ll,No,Bl){return An||(An=Ll),Nt+=S.slice(yt,Bl).replace(St,rk),En&&(Ue=!0,Nt+=`' +
__e(`+En+`) +
'`),No&&(Ke=!0,Nt+=`';
`+No+`;
__p += '`),An&&(Nt+=`' +
((__t = (`+An+`)) == null ? '' : __t) +
'`),yt=Bl+Pr.length,Pr}),Nt+=`';
`;var Or=kn.call(A,"variable")&&A.variable;if(!Or)Nt=`with (obj) {
`+Nt+`
}
`;else if(Ne.test(Or))throw new ot(o);Nt=(Ke?Nt.replace(Pt,""):Nt).replace(Cr,"$1").replace(wn,"$1;"),Nt="function("+(Or||"obj")+`) {
`+(Or?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ue?", __e = _.escape":"")+(Ke?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Nt+`return __p
}`;var on=$H(function(){return gt(ke,rr+"return "+Nt).apply(r,De)});if(on.source=Nt,xR(on))throw on;return on}function GSe(S){return qn(S).toLowerCase()}function KSe(S){return qn(S).toUpperCase()}function XSe(S,A,F){if(S=qn(S),S&&(F||A===r))return tk(S);if(!S||!(A=Ml(A)))return S;var K=T(S),le=T(A),ke=Lb(K,le),De=Dl(K,le)+1;return yp(K,ke,De).join("")}function YSe(S,A,F){if(S=qn(S),S&&(F||A===r))return S.slice(0,j(S)+1);if(!S||!(A=Ml(A)))return S;var K=T(S),le=Dl(K,T(A))+1;return yp(K,0,le).join("")}function QSe(S,A,F){if(S=qn(S),S&&(F||A===r))return S.replace(kr,"");if(!S||!(A=Ml(A)))return S;var K=T(S),le=Lb(K,T(A));return yp(K,le).join("")}function JSe(S,A){var F=B,K=U;if(Li(A)){var le="separator"in A?A.separator:le;F="length"in A?rn(A.length):F,K="omission"in A?Ml(A.omission):K}S=qn(S);var ke=S.length;if(pp(S)){var De=T(S);ke=De.length}if(F>=ke)return S;var Ue=F-k(K);if(Ue<1)return K;var Ke=De?yp(De,0,Ue).join(""):S.slice(0,Ue);if(le===r)return Ke+K;if(De&&(Ue+=Ke.length-Ue),vR(le)){if(S.slice(Ue).search(le)){var yt,bt=Ke;for(le.global||(le=Fr(le.source,qn(Fe.exec(le))+"g")),le.lastIndex=0;yt=le.exec(bt);)var Nt=yt.index;Ke=Ke.slice(0,Nt===r?Ue:Nt)}}else if(S.indexOf(Ml(le),Ue)!=Ue){var Wt=Ke.lastIndexOf(le);Wt>-1&&(Ke=Ke.slice(0,Wt))}return Ke+K}function ZSe(S){return S=qn(S),S&&jn.test(S)?S.replace(fr,L):S}var eEe=m1(function(S,A,F){return S+(F?" ":"")+A.toUpperCase()}),wR=zz("toUpperCase");function UH(S,A,F){return S=qn(S),A=F?r:A,A===r?Ub(S)?oe(S):Tf(S):S.match(A)||[]}var $H=fn(function(S,A){try{return Xa(S,r,A)}catch(F){return xR(F)?F:new ot(F)}}),tEe=Df(function(S,A){return Jo(A,function(F){F=bd(F),Rf(S,F,mR(S[F],S))}),S});function rEe(S){var A=S==null?0:S.length,F=Ar();return S=A?Mr(S,function(K){if(typeof K[1]!="function")throw new Ti(s);return[F(K[0]),K[1]]}):[],fn(function(K){for(var le=-1;++le<A;){var ke=S[le];if(Xa(ke[0],this,K))return Xa(ke[1],this,K)}})}function nEe(S){return Aye(Ec(S,f))}function SR(S){return function(){return S}}function iEe(S,A){return S==null||S!==S?A:S}var aEe=Wz(),sEe=Wz(!0);function rl(S){return S}function ER(S){return bz(typeof S=="function"?S:Ec(S,f))}function oEe(S){return Sz(Ec(S,f))}function lEe(S,A){return Ez(S,Ec(A,f))}var cEe=fn(function(S,A){return function(F){return Kb(F,S,A)}}),uEe=fn(function(S,A){return function(F){return Kb(S,F,A)}});function CR(S,A,F){var K=Ja(A),le=xk(A,K);F==null&&!(Li(A)&&(le.length||!K.length))&&(F=A,A=S,S=this,le=xk(A,Ja(A)));var ke=!(Li(F)&&"chain"in F)||!!F.chain,De=Ff(S);return Jo(le,function(Ue){var Ke=A[Ue];S[Ue]=Ke,De&&(S.prototype[Ue]=function(){var yt=this.__chain__;if(ke||yt){var bt=S(this.__wrapped__),Nt=bt.__actions__=Zo(this.__actions__);return Nt.push({func:Ke,args:arguments,thisArg:S}),bt.__chain__=yt,bt}return Ke.apply(S,jl([this.value()],arguments))})}),S}function dEe(){return wa._===this&&(wa._=Fve),this}function kR(){}function fEe(S){return S=rn(S),fn(function(A){return Cz(A,S)})}var hEe=rR(Mr),pEe=rR(ZC),mEe=rR(gr);function zH(S){return cR(S)?c1(bd(S)):Vye(S)}function gEe(S){return function(A){return S==null?r:Cm(S,A)}}var xEe=qz(),vEe=qz(!0);function _R(){return[]}function NR(){return!1}function yEe(){return{}}function bEe(){return""}function wEe(){return!0}function SEe(S,A){if(S=rn(S),S<1||S>Q)return[];var F=Se,K=Vs(S,Se);A=Ar(A),S-=Se;for(var le=Fb(K,A);++F<S;)A(F);return le}function EEe(S){return Wr(S)?Mr(S,bd):Fl(S)?[S]:Zo(lH(qn(S)))}function CEe(S){var A=++jP;return qn(S)+A}var kEe=Ek(function(S,A){return S+A},0),_Ee=nR("ceil"),NEe=Ek(function(S,A){return S/A},1),AEe=nR("floor");function TEe(S){return S&&S.length?gk(S,rl,zP):r}function IEe(S,A){return S&&S.length?gk(S,Ar(A,2),zP):r}function OEe(S){return l1(S,rl)}function PEe(S,A){return l1(S,Ar(A,2))}function REe(S){return S&&S.length?gk(S,rl,qP):r}function jEe(S,A){return S&&S.length?gk(S,Ar(A,2),qP):r}var DEe=Ek(function(S,A){return S*A},1),MEe=nR("round"),FEe=Ek(function(S,A){return S-A},0);function LEe(S){return S&&S.length?gm(S,rl):0}function BEe(S,A){return S&&S.length?gm(S,Ar(A,2)):0}return ve.after=o2e,ve.ary=yH,ve.assign=K2e,ve.assignIn=RH,ve.assignInWith=Mk,ve.assignWith=X2e,ve.at=Y2e,ve.before=bH,ve.bind=mR,ve.bindAll=tEe,ve.bindKey=wH,ve.castArray=y2e,ve.chain=gH,ve.chunk=Abe,ve.compact=Tbe,ve.concat=Ibe,ve.cond=rEe,ve.conforms=nEe,ve.constant=SR,ve.countBy=Lwe,ve.create=Q2e,ve.curry=SH,ve.curryRight=EH,ve.debounce=CH,ve.defaults=J2e,ve.defaultsDeep=Z2e,ve.defer=l2e,ve.delay=c2e,ve.difference=Obe,ve.differenceBy=Pbe,ve.differenceWith=Rbe,ve.drop=jbe,ve.dropRight=Dbe,ve.dropRightWhile=Mbe,ve.dropWhile=Fbe,ve.fill=Lbe,ve.filter=Uwe,ve.flatMap=Hwe,ve.flatMapDeep=Wwe,ve.flatMapDepth=Vwe,ve.flatten=fH,ve.flattenDeep=Bbe,ve.flattenDepth=Ube,ve.flip=u2e,ve.flow=aEe,ve.flowRight=sEe,ve.fromPairs=$be,ve.functions=sSe,ve.functionsIn=oSe,ve.groupBy=qwe,ve.initial=Hbe,ve.intersection=Wbe,ve.intersectionBy=Vbe,ve.intersectionWith=qbe,ve.invert=cSe,ve.invertBy=uSe,ve.invokeMap=Kwe,ve.iteratee=ER,ve.keyBy=Xwe,ve.keys=Ja,ve.keysIn=tl,ve.map=Ik,ve.mapKeys=fSe,ve.mapValues=hSe,ve.matches=oEe,ve.matchesProperty=lEe,ve.memoize=Pk,ve.merge=pSe,ve.mergeWith=jH,ve.method=cEe,ve.methodOf=uEe,ve.mixin=CR,ve.negate=Rk,ve.nthArg=fEe,ve.omit=mSe,ve.omitBy=gSe,ve.once=d2e,ve.orderBy=Ywe,ve.over=hEe,ve.overArgs=f2e,ve.overEvery=pEe,ve.overSome=mEe,ve.partial=gR,ve.partialRight=kH,ve.partition=Qwe,ve.pick=xSe,ve.pickBy=DH,ve.property=zH,ve.propertyOf=gEe,ve.pull=Ybe,ve.pullAll=pH,ve.pullAllBy=Qbe,ve.pullAllWith=Jbe,ve.pullAt=Zbe,ve.range=xEe,ve.rangeRight=vEe,ve.rearg=h2e,ve.reject=e2e,ve.remove=ewe,ve.rest=p2e,ve.reverse=hR,ve.sampleSize=r2e,ve.set=ySe,ve.setWith=bSe,ve.shuffle=n2e,ve.slice=twe,ve.sortBy=s2e,ve.sortedUniq=lwe,ve.sortedUniqBy=cwe,ve.split=HSe,ve.spread=m2e,ve.tail=uwe,ve.take=dwe,ve.takeRight=fwe,ve.takeRightWhile=hwe,ve.takeWhile=pwe,ve.tap=Twe,ve.throttle=g2e,ve.thru=Tk,ve.toArray=IH,ve.toPairs=MH,ve.toPairsIn=FH,ve.toPath=EEe,ve.toPlainObject=PH,ve.transform=wSe,ve.unary=x2e,ve.union=mwe,ve.unionBy=gwe,ve.unionWith=xwe,ve.uniq=vwe,ve.uniqBy=ywe,ve.uniqWith=bwe,ve.unset=SSe,ve.unzip=pR,ve.unzipWith=mH,ve.update=ESe,ve.updateWith=CSe,ve.values=v1,ve.valuesIn=kSe,ve.without=wwe,ve.words=UH,ve.wrap=v2e,ve.xor=Swe,ve.xorBy=Ewe,ve.xorWith=Cwe,ve.zip=kwe,ve.zipObject=_we,ve.zipObjectDeep=Nwe,ve.zipWith=Awe,ve.entries=MH,ve.entriesIn=FH,ve.extend=RH,ve.extendWith=Mk,CR(ve,ve),ve.add=kEe,ve.attempt=$H,ve.camelCase=TSe,ve.capitalize=LH,ve.ceil=_Ee,ve.clamp=_Se,ve.clone=b2e,ve.cloneDeep=S2e,ve.cloneDeepWith=E2e,ve.cloneWith=w2e,ve.conformsTo=C2e,ve.deburr=BH,ve.defaultTo=iEe,ve.divide=NEe,ve.endsWith=ISe,ve.eq=Nu,ve.escape=OSe,ve.escapeRegExp=PSe,ve.every=Bwe,ve.find=$we,ve.findIndex=uH,ve.findKey=eSe,ve.findLast=zwe,ve.findLastIndex=dH,ve.findLastKey=tSe,ve.floor=AEe,ve.forEach=xH,ve.forEachRight=vH,ve.forIn=rSe,ve.forInRight=nSe,ve.forOwn=iSe,ve.forOwnRight=aSe,ve.get=yR,ve.gt=k2e,ve.gte=_2e,ve.has=lSe,ve.hasIn=bR,ve.head=hH,ve.identity=rl,ve.includes=Gwe,ve.indexOf=zbe,ve.inRange=NSe,ve.invoke=dSe,ve.isArguments=Nm,ve.isArray=Wr,ve.isArrayBuffer=N2e,ve.isArrayLike=el,ve.isArrayLikeObject=ca,ve.isBoolean=A2e,ve.isBuffer=bp,ve.isDate=T2e,ve.isElement=I2e,ve.isEmpty=O2e,ve.isEqual=P2e,ve.isEqualWith=R2e,ve.isError=xR,ve.isFinite=j2e,ve.isFunction=Ff,ve.isInteger=_H,ve.isLength=jk,ve.isMap=NH,ve.isMatch=D2e,ve.isMatchWith=M2e,ve.isNaN=F2e,ve.isNative=L2e,ve.isNil=U2e,ve.isNull=B2e,ve.isNumber=AH,ve.isObject=Li,ve.isObjectLike=Xi,ve.isPlainObject=ew,ve.isRegExp=vR,ve.isSafeInteger=$2e,ve.isSet=TH,ve.isString=Dk,ve.isSymbol=Fl,ve.isTypedArray=x1,ve.isUndefined=z2e,ve.isWeakMap=H2e,ve.isWeakSet=W2e,ve.join=Gbe,ve.kebabCase=RSe,ve.last=kc,ve.lastIndexOf=Kbe,ve.lowerCase=jSe,ve.lowerFirst=DSe,ve.lt=V2e,ve.lte=q2e,ve.max=TEe,ve.maxBy=IEe,ve.mean=OEe,ve.meanBy=PEe,ve.min=REe,ve.minBy=jEe,ve.stubArray=_R,ve.stubFalse=NR,ve.stubObject=yEe,ve.stubString=bEe,ve.stubTrue=wEe,ve.multiply=DEe,ve.nth=Xbe,ve.noConflict=dEe,ve.noop=kR,ve.now=Ok,ve.pad=MSe,ve.padEnd=FSe,ve.padStart=LSe,ve.parseInt=BSe,ve.random=ASe,ve.reduce=Jwe,ve.reduceRight=Zwe,ve.repeat=USe,ve.replace=$Se,ve.result=vSe,ve.round=MEe,ve.runInContext=ue,ve.sample=t2e,ve.size=i2e,ve.snakeCase=zSe,ve.some=a2e,ve.sortedIndex=rwe,ve.sortedIndexBy=nwe,ve.sortedIndexOf=iwe,ve.sortedLastIndex=awe,ve.sortedLastIndexBy=swe,ve.sortedLastIndexOf=owe,ve.startCase=WSe,ve.startsWith=VSe,ve.subtract=FEe,ve.sum=LEe,ve.sumBy=BEe,ve.template=qSe,ve.times=SEe,ve.toFinite=Lf,ve.toInteger=rn,ve.toLength=OH,ve.toLower=GSe,ve.toNumber=_c,ve.toSafeInteger=G2e,ve.toString=qn,ve.toUpper=KSe,ve.trim=XSe,ve.trimEnd=YSe,ve.trimStart=QSe,ve.truncate=JSe,ve.unescape=ZSe,ve.uniqueId=CEe,ve.upperCase=eEe,ve.upperFirst=wR,ve.each=xH,ve.eachRight=vH,ve.first=hH,CR(ve,function(){var S={};return vd(ve,function(A,F){kn.call(ve.prototype,F)||(S[F]=A)}),S}(),{chain:!1}),ve.VERSION=n,Jo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(S){ve[S].placeholder=ve}),Jo(["drop","take"],function(S,A){_n.prototype[S]=function(F){F=F===r?1:La(rn(F),0);var K=this.__filtered__&&!A?new _n(this):this.clone();return K.__filtered__?K.__takeCount__=Vs(F,K.__takeCount__):K.__views__.push({size:Vs(F,Se),type:S+(K.__dir__<0?"Right":"")}),K},_n.prototype[S+"Right"]=function(F){return this.reverse()[S](F).reverse()}}),Jo(["filter","map","takeWhile"],function(S,A){var F=A+1,K=F==ee||F==te;_n.prototype[S]=function(le){var ke=this.clone();return ke.__iteratees__.push({iteratee:Ar(le,3),type:F}),ke.__filtered__=ke.__filtered__||K,ke}}),Jo(["head","last"],function(S,A){var F="take"+(A?"Right":"");_n.prototype[S]=function(){return this[F](1).value()[0]}}),Jo(["initial","tail"],function(S,A){var F="drop"+(A?"":"Right");_n.prototype[S]=function(){return this.__filtered__?new _n(this):this[F](1)}}),_n.prototype.compact=function(){return this.filter(rl)},_n.prototype.find=function(S){return this.filter(S).head()},_n.prototype.findLast=function(S){return this.reverse().find(S)},_n.prototype.invokeMap=fn(function(S,A){return typeof S=="function"?new _n(this):this.map(function(F){return Kb(F,S,A)})}),_n.prototype.reject=function(S){return this.filter(Rk(Ar(S)))},_n.prototype.slice=function(S,A){S=rn(S);var F=this;return F.__filtered__&&(S>0||A<0)?new _n(F):(S<0?F=F.takeRight(-S):S&&(F=F.drop(S)),A!==r&&(A=rn(A),F=A<0?F.dropRight(-A):F.take(A-S)),F)},_n.prototype.takeRightWhile=function(S){return this.reverse().takeWhile(S).reverse()},_n.prototype.toArray=function(){return this.take(Se)},vd(_n.prototype,function(S,A){var F=/^(?:filter|find|map|reject)|While$/.test(A),K=/^(?:head|last)$/.test(A),le=ve[K?"take"+(A=="last"?"Right":""):A],ke=K||/^find/.test(A);le&&(ve.prototype[A]=function(){var De=this.__wrapped__,Ue=K?[1]:arguments,Ke=De instanceof _n,yt=Ue[0],bt=Ke||Wr(De),Nt=function(En){var An=le.apply(ve,jl([En],Ue));return K&&Wt?An[0]:An};bt&&F&&typeof yt=="function"&&yt.length!=1&&(Ke=bt=!1);var Wt=this.__chain__,rr=!!this.__actions__.length,Or=ke&&!Wt,on=Ke&&!rr;if(!ke&&bt){De=on?De:new _n(this);var Pr=S.apply(De,Ue);return Pr.__actions__.push({func:Tk,args:[Nt],thisArg:r}),new Sc(Pr,Wt)}return Or&&on?S.apply(this,Ue):(Pr=this.thru(Nt),Or?K?Pr.value()[0]:Pr.value():Pr)})}),Jo(["pop","push","shift","sort","splice","unshift"],function(S){var A=Fa[S],F=/^(?:push|sort|unshift)$/.test(S)?"tap":"thru",K=/^(?:pop|shift)$/.test(S);ve.prototype[S]=function(){var le=arguments;if(K&&!this.__chain__){var ke=this.value();return A.apply(Wr(ke)?ke:[],le)}return this[F](function(De){return A.apply(Wr(De)?De:[],le)})}}),vd(_n.prototype,function(S,A){var F=ve[A];if(F){var K=F.name+"";kn.call(f1,K)||(f1[K]=[]),f1[K].push({name:A,func:F})}}),f1[Sk(r,w).name]=[{name:"wrapper",func:r}],_n.prototype.clone=Zve,_n.prototype.reverse=eye,_n.prototype.value=tye,ve.prototype.at=Iwe,ve.prototype.chain=Owe,ve.prototype.commit=Pwe,ve.prototype.next=Rwe,ve.prototype.plant=Dwe,ve.prototype.reverse=Mwe,ve.prototype.toJSON=ve.prototype.valueOf=ve.prototype.value=Fwe,ve.prototype.first=ve.prototype.head,$b&&(ve.prototype[$b]=jwe),ve},Oe=xe();Af?((Af.exports=Oe)._=Oe,jb._=Oe):wa._=Oe}).call(Ve)})(YA,YA.exports);var U6e=YA.exports;const roe=I.createContext(void 0),Mj={customers:[],projects:[],samples:[],sampleCheckouts:[],installers:[],quotes:[],jobs:[],changeOrders:[],materialOrders:[],vendors:[],users:[]},$6e=({children:e})=>{const t=q0.useSessionContext(),r=ja(),[n,i]=I.useState(Mj),[a,s]=I.useState(null),[o,l]=I.useState(!0),[c,d]=I.useState(null),[f,p]=I.useState([]),[m,x]=I.useState(!1),{data:v=0}=AMe(!!c),{data:b=[],isLoading:w}=cb(!!c),_=_7(),{data:C=[],isLoading:N}=Mx(),{data:R=[],isLoading:P}=Yh(!!c),{data:O=[],isLoading:D}=vf(!!c),{data:M=[],isLoading:B}=w4(!!c),{data:U=[],isLoading:H}=S4(),Z=A7(),{data:ee=[],isLoading:V}=Kse(),te=Xse(),{data:se=[],isLoading:Q}=Yse(),X=I7(),{data:fe=[],isLoading:Se}=C4(),Y=k4(),{data:ce=[],isLoading:W}=QE(),G=Zse(),{customerHistory:ie,fetchCustomerHistory:Ce,projectHistory:re,fetchProjectHistory:ne,quotesHistory:ge,fetchQuotesHistory:we,installerHistory:q,fetchInstallerHistory:Ae,vendorHistory:Pe,fetchVendorHistory:He,sampleHistory:je,fetchSampleHistory:$e,materialOrderHistory:Ze,fetchMaterialOrderHistory:lt}=C6e(),kt=()=>{x(pe=>!pe)},ht=I.useCallback(U6e.debounce(pe=>{d(me=>{var nt,Ge,Xe,Je;if(!me)return null;const Fe={...me.preferences,...pe,calendarColor:pe.calendarColor||((nt=me.preferences)==null?void 0:nt.calendarColor),dashboardEmail:{...((Ge=me.preferences)==null?void 0:Ge.dashboardEmail)||{},...pe.dashboardEmail||{}},calendar_user_colors:{...((Xe=me.preferences)==null?void 0:Xe.calendar_user_colors)||{},...pe.calendar_user_colors||{}},projectLayouts:pe.projectLayouts||((Je=me.preferences)==null?void 0:Je.projectLayouts)};return j6e(Fe).then(()=>Re.success("Preferences saved!")).catch(wt=>{console.error("Failed to save preferences:",wt),Re.error("Could not save your preferences.")}),{...me,preferences:Fe}})},1e3),[]),_r=I.useCallback(async()=>{try{const pe=await eoe(),me=await R6e();d({...pe,preferences:me})}catch(pe){console.error("Failed to fetch current user:",pe),d(null)}},[]),er=I.useCallback(async()=>{try{const pe=await L6e("branding");s(pe)}catch(pe){console.error("Failed to fetch branding:",pe)}},[]);I.useEffect(()=>{if(a){const pe=document.documentElement;a.primaryColor&&pe.style.setProperty("--color-primary",a.primaryColor),a.secondaryColor&&(pe.style.setProperty("--color-secondary",a.secondaryColor),pe.style.setProperty("--color-border",a.secondaryColor)),a.accentColor&&pe.style.setProperty("--color-accent",a.accentColor),a.backgroundColor&&pe.style.setProperty("--color-background",a.backgroundColor),a.surfaceColor&&pe.style.setProperty("--color-surface",a.surfaceColor),a.textPrimaryColor&&pe.style.setProperty("--color-text-primary",a.textPrimaryColor),a.textSecondaryColor&&pe.style.setProperty("--color-text-secondary",a.textSecondaryColor)}},[a]);const ct=I.useCallback(async()=>{try{const pe=await O7();p(pe)}catch(pe){console.error("Failed to fetch all users:",pe),p([])}},[]),Gt=I.useCallback(async()=>{l(!0);try{await Promise.all([er()]),i({customers:[],projects:[],samples:[],products:[],sampleCheckouts:[],installers:[],quotes:[],jobs:[],changeOrders:[],materialOrders:[],vendors:[],users:[]})}catch(pe){console.error("Initial data fetch failed (likely no session):",pe),i(Mj)}finally{l(!1)}},[er]);I.useEffect(()=>{if(t.loading){l(!0);return}t.doesSessionExist?_r().then(()=>{Gt(),ct()}):(i(Mj),d(null),l(!1))},[t.doesSessionExist,t.loading,Gt,_r,ct]);const Lt=async()=>{await r.invalidateQueries({queryKey:["products"]})},dr=async pe=>{try{const me=await _.addProduct.mutateAsync(pe);return Re.success("Product created successfully"),me}catch(me){throw console.error("Failed to add product",me),Re.error(me.message||"Failed to add product"),me}},Ht=async(pe,me)=>{try{await _.updateProduct.mutateAsync({id:pe,formData:me}),Re.success("Product updated successfully")}catch(Fe){throw console.error("Failed to update product",Fe),Re.error(Fe.message),Fe}},ye=async pe=>{try{await _.deleteProduct.mutateAsync(pe),Re.success("Product deleted successfully")}catch(me){throw console.error("Failed to delete product",me),Re.error(me.message),me}},Me=async(pe,me)=>{try{const Fe=await _.addVariant.mutateAsync({productId:pe,formData:me});return Re.success("Variant added successfully"),Fe}catch(Fe){throw console.error("Failed to add variant",Fe),Re.error(Fe.message),Fe}},qe=I.useCallback(async(pe,me)=>{try{const Fe=await _.addVariantsBatch.mutateAsync({productId:pe,variants:me});Re.success(`Generated ${Fe.length} variants successfully`)}catch(Fe){throw console.error("Failed to batch add variants",Fe),Re.error(Fe.message||"Failed to add variants batch"),Fe}},[_.addVariantsBatch]),it=async(pe,me)=>{try{const Fe=await _.updateVariant.mutateAsync({variantId:pe,formData:me});return Re.success("Variant updated successfully"),Fe}catch(Fe){throw console.error("Failed to update variant",Fe),Re.error(Fe.message),Fe}},ze=async(pe,me)=>{try{await _.deleteVariant.mutateAsync({variantId:pe,productId:me}),Re.success("Variant deleted successfully")}catch(Fe){throw console.error("Failed to delete variant",Fe),Re.error(Fe.message),Fe}},_e=Lt,ut=I.useCallback(async pe=>{throw Re.error("Deprecated function called: Use addProduct."),new Error("Deprecated function called.")},[]),xt=I.useCallback(async(pe,me)=>{Re.error("Deprecated function called: Use updateProduct.")},[]),Dt=I.useCallback(async(pe,me)=>{Re.error("Deprecated function called: Use updateProduct/ProductService.")},[]),Pt=I.useCallback(async pe=>{Re.error("Deprecated function called: Use deleteProduct.")},[]),Cr=I.useCallback(async pe=>{try{await G.addSampleCheckout(pe),Re.success("Sample checked out!")}catch(me){throw console.error("Error adding sample checkout:",me),Re.error(me.message),me}},[G.addSampleCheckout]),wn=I.useCallback(async pe=>{try{await G.returnSampleCheckout(pe),Re.success("Sample returned!")}catch(me){throw console.error("Error updating sample checkout:",me),Re.error(me.message),me}},[G.returnSampleCheckout]),fr=I.useCallback(async pe=>{try{await G.extendSampleCheckout(pe.id),Re.success("Checkout extended by 2 days!")}catch(me){throw console.error("Error extending sample checkout:",me),Re.error(me.message),me}},[G.extendSampleCheckout]),Vi=I.useCallback(async pe=>{try{await G.patchSampleCheckout({id:pe.id,data:{isSelected:!pe.isSelected}}),Re.success(pe.isSelected?"Sample deselected.":"Sample selected!")}catch(me){console.error("Error toggling selection:",me),Re.error("Failed to update selection.")}},[G.patchSampleCheckout]),jn=I.useCallback(async pe=>{try{await Z.addQuote(pe),Re.success("Quote added successfully!")}catch(me){throw console.error("Error adding quote:",me),Re.error(me.message),me}},[Z.addQuote]),Qo=I.useCallback(async pe=>{try{await Z.updateQuote(pe),Re.success("Quote updated!")}catch(me){throw console.error("Error updating quote:",me),Re.error(me.message),me}},[Z.updateQuote]),We=I.useCallback(async pe=>{try{await Z.acceptQuote(pe),Re.success("Quote accepted and project status updated!")}catch(me){throw console.error("Error accepting quote:",me),Re.error(me.message),me}},[Z.acceptQuote]),Qe=I.useCallback(async pe=>{try{await te.saveJobDetails.mutateAsync(pe),Re.success("Job details saved!")}catch(me){throw console.error("Error saving job details:",me),Re.error(me.message),me}},[te.saveJobDetails]),tt=I.useCallback(async pe=>{try{await X.addChangeOrder(pe),Re.success("Change order added!")}catch(me){throw console.error("Error adding change order:",me),Re.error(me.message),me}},[X.addChangeOrder]),_t=I.useCallback(async(pe,me)=>{try{await X.updateChangeOrder({id:pe,data:me}),Re.success("Change order updated!")}catch(Fe){throw console.error("Error updating change order:",Fe),Re.error(Fe.message),Fe}},[X.updateChangeOrder]),Ut=I.useCallback(async pe=>{try{await X.deleteChangeOrder(pe)}catch(me){throw console.error("Error deleting change order:",me),me}},[X.deleteChangeOrder]),nr=I.useCallback(async pe=>{try{await Y.addMaterialOrder(pe),Re.success("Material order created!")}catch(me){throw console.error("Error adding material order:",me),Re.error(me.message),me}},[Y.addMaterialOrder]),tr=I.useCallback(async(pe,me)=>{try{await Y.updateMaterialOrder({id:pe,data:me}),Re.success("Material order updated!")}catch(Fe){throw console.error("Error updating material order:",Fe),Re.error(Fe.message),Fe}},[Y.updateMaterialOrder]),$t=I.useCallback(async pe=>{try{await Y.deleteMaterialOrder(pe),Re.success("Material order deleted!")}catch(me){throw console.error("Error deleting material order:",me),Re.error(me.message),me}},[Y.deleteMaterialOrder]),kr=I.useCallback(async(pe,me)=>{try{await Y.receiveMaterialOrder({id:pe,data:me}),Re.success("Order received!")}catch(Fe){throw console.error("Error receiving material order:",Fe),Re.error(Fe.message),Fe}},[Y.receiveMaterialOrder]),Jt=I.useCallback(async(pe,me)=>{try{await Y.reportMaterialOrderDamage({id:pe,data:me}),Re.success("Damage reported & replacement ordered!")}catch(Fe){throw console.error("Error reporting damage:",Fe),Re.error(Fe.message),Fe}},[Y.reportMaterialOrderDamage]),Un=I.useCallback(pe=>{r.setQueryData(["jobs"],me=>me?me.map(Fe=>Fe.id===pe.id?pe:Fe):[pe])},[r]),de=I.useCallback(async(pe,me)=>{try{const Fe=await N6e(pe,me);d(nt=>nt?{...nt,...Fe}:null),Re.success("Profile updated successfully!")}catch(Fe){throw console.error("Error updating profile:",Fe),Re.error("Failed to update profile."),Fe}},[]),he=I.useCallback(async pe=>{try{const{avatarUrl:me}=await A6e(pe);d(Fe=>Fe?{...Fe,avatarUrl:me}:null),Re.success("Avatar uploaded successfully!")}catch(me){throw console.error("Error uploading avatar:",me),Re.error("Failed to upload avatar."),me}},[]),be=I.useCallback(async()=>{try{await T6e(),d(pe=>pe?{...pe,avatarUrl:null}:null),Re.success("Avatar removed.")}catch(pe){console.error("Error removing avatar:",pe),Re.error("Failed to remove avatar.")}},[]),Ne={customers:C,projects:R,samples:[],sampleCheckouts:ce,installers:O,quotes:U,jobs:ee,changeOrders:se,materialOrders:fe,vendors:M,users:f,products:b,isLoading:o||w||N||P||D||B||H||V||Q||Se||W,currentUser:c,systemBranding:a,refreshBranding:er,isLayoutEditMode:m,toggleLayoutEditMode:kt,updateCurrentUserProfile:de,uploadCurrentUserAvatar:he,deleteCurrentUserAvatar:be,saveCurrentUserPreferences:ht,customerHistory:ie,fetchCustomerHistory:Ce,projectHistory:re,fetchProjectHistory:ne,quotesHistory:ge,fetchQuotesHistory:we,installerHistory:q,fetchInstallerHistory:Ae,vendorHistory:Pe,fetchVendorHistory:He,sampleHistory:je,fetchSampleHistory:$e,materialOrderHistory:Ze,fetchMaterialOrderHistory:lt,fetchSamples:_e,addSample:ut,updateSample:xt,deleteSample:Pt,toggleSampleDiscontinued:Dt,fetchProducts:Lt,addProduct:dr,updateProduct:Ht,deleteProduct:ye,addVariant:Me,addVariantsBatch:qe,updateVariant:it,deleteVariant:ze,addSampleCheckout:Cr,updateSampleCheckout:wn,extendSampleCheckout:fr,toggleSampleSelection:Vi,addQuote:jn,updateQuote:Qo,acceptQuote:We,saveJobDetails:Qe,addChangeOrder:tt,updateChangeOrder:_t,deleteChangeOrder:Ut,addMaterialOrder:nr,updateMaterialOrder:tr,deleteMaterialOrder:$t,receiveMaterialOrder:kr,reportMaterialOrderDamage:Jt,updateJob:Un,unreadCount:v,refreshNotifications:async()=>r.invalidateQueries({queryKey:["notifications","unreadCount"]})};return u.jsx(roe.Provider,{value:Ne,children:e})},Kr=()=>{const e=I.useContext(roe);if(e===void 0)throw new Error("useData must be used within a DataProvider");return e},z6e="modulepreload",H6e=function(e){return"/"+e},$q={},ZE=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(r.map(l=>{if(l=H6e(l),l in $q)return;$q[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":z6e,c||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),c)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */const W6e=e=>{const t=new Map;t.set("web",{name:"web"});const r=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t},n=(a,s)=>{r.platforms.set(a,s)},i=a=>{r.platforms.has(a)&&(r.currentPlatform=r.platforms.get(a))};return r.addPlatform=n,r.setPlatform=i,r},V6e=e=>e.CapacitorPlatforms=W6e(e),noe=V6e(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});noe.addPlatform;noe.setPlatform;var oy;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(oy||(oy={}));let Fj=class extends Error{constructor(t,r){super(t),this.message=t,this.code=r}};const q6e=e=>{var t,r;return e!=null&&e.androidBridge?"android":!((r=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},G6e=e=>{var t,r,n,i,a;const s=e.CapacitorCustomPlatform||null,o=e.Capacitor||{},l=o.Plugins=o.Plugins||{},c=e.CapacitorPlatforms,d=()=>s!==null?s.name:q6e(e),f=((t=c==null?void 0:c.currentPlatform)===null||t===void 0?void 0:t.getPlatform)||d,p=()=>f()!=="web",m=((r=c==null?void 0:c.currentPlatform)===null||r===void 0?void 0:r.isNativePlatform)||p,x=O=>{const D=N.get(O);return!!(D!=null&&D.platforms.has(f())||w(O))},v=((n=c==null?void 0:c.currentPlatform)===null||n===void 0?void 0:n.isPluginAvailable)||x,b=O=>{var D;return(D=o.PluginHeaders)===null||D===void 0?void 0:D.find(M=>M.name===O)},w=((i=c==null?void 0:c.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||b,_=O=>e.console.error(O),C=(O,D,M)=>Promise.reject(`${M} does not have an implementation of "${D}".`),N=new Map,R=(O,D={})=>{const M=N.get(O);if(M)return console.warn(`Capacitor plugin "${O}" already registered. Cannot register plugins twice.`),M.proxy;const B=f(),U=w(O);let H;const Z=async()=>(!H&&B in D?H=typeof D[B]=="function"?H=await D[B]():H=D[B]:s!==null&&!H&&"web"in D&&(H=typeof D.web=="function"?H=await D.web():H=D.web),H),ee=(fe,Se)=>{var Y,ce;if(U){const W=U==null?void 0:U.methods.find(G=>Se===G.name);if(W)return W.rtype==="promise"?G=>o.nativePromise(O,Se.toString(),G):(G,ie)=>o.nativeCallback(O,Se.toString(),G,ie);if(fe)return(Y=fe[Se])===null||Y===void 0?void 0:Y.bind(fe)}else{if(fe)return(ce=fe[Se])===null||ce===void 0?void 0:ce.bind(fe);throw new Fj(`"${O}" plugin is not implemented on ${B}`,oy.Unimplemented)}},V=fe=>{let Se;const Y=(...ce)=>{const W=Z().then(G=>{const ie=ee(G,fe);if(ie){const Ce=ie(...ce);return Se=Ce==null?void 0:Ce.remove,Ce}else throw new Fj(`"${O}.${fe}()" is not implemented on ${B}`,oy.Unimplemented)});return fe==="addListener"&&(W.remove=async()=>Se()),W};return Y.toString=()=>`${fe.toString()}() { [capacitor code] }`,Object.defineProperty(Y,"name",{value:fe,writable:!1,configurable:!1}),Y},te=V("addListener"),se=V("removeListener"),Q=(fe,Se)=>{const Y=te({eventName:fe},Se),ce=async()=>{const G=await Y;se({eventName:fe,callbackId:G},Se)},W=new Promise(G=>Y.then(()=>G({remove:ce})));return W.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await ce()},W},X=new Proxy({},{get(fe,Se){switch(Se){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return U?Q:te;case"removeListener":return se;default:return V(Se)}}});return l[O]=X,N.set(O,{name:O,proxy:X,platforms:new Set([...Object.keys(D),...U?[B]:[]])}),X},P=((a=c==null?void 0:c.currentPlatform)===null||a===void 0?void 0:a.registerPlugin)||R;return o.convertFileSrc||(o.convertFileSrc=O=>O),o.getPlatform=f,o.handleError=_,o.isNativePlatform=m,o.isPluginAvailable=v,o.pluginMethodNoop=C,o.registerPlugin=P,o.Exception=Fj,o.DEBUG=!!o.DEBUG,o.isLoggingEnabled=!!o.isLoggingEnabled,o.platform=o.getPlatform(),o.isNative=o.isNativePlatform(),o},K6e=e=>e.Capacitor=G6e(e),QA=K6e(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),X6e=QA.registerPlugin;QA.Plugins;let UNt=class{constructor(t){this.listeners={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,r){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(r);const i=this.windowListeners[t];i&&!i.registered&&this.addWindowListener(i);const a=async()=>this.removeListener(t,r),s=Promise.resolve({remove:a});return Object.defineProperty(s,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await a()}}),s}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,r){const n=this.listeners[t];n&&n.forEach(i=>i(r))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,r){this.windowListeners[r]={registered:!1,windowEventName:t,pluginEventName:r,handler:n=>{this.notifyListeners(r,n)}}}unimplemented(t="not implemented"){return new QA.Exception(t,oy.Unimplemented)}unavailable(t="not available"){return new QA.Exception(t,oy.Unavailable)}async removeListener(t,r){const n=this.listeners[t];if(!n)return;const i=n.indexOf(r);this.listeners[t].splice(i,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}};var zq;(function(e){e[e.NONE=0]="NONE",e[e.TOUCH_ID=1]="TOUCH_ID",e[e.FACE_ID=2]="FACE_ID",e[e.FINGERPRINT=3]="FINGERPRINT",e[e.FACE_AUTHENTICATION=4]="FACE_AUTHENTICATION",e[e.IRIS_AUTHENTICATION=5]="IRIS_AUTHENTICATION",e[e.MULTIPLE=6]="MULTIPLE"})(zq||(zq={}));var Hq;(function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",e[e.BIOMETRICS_UNAVAILABLE=1]="BIOMETRICS_UNAVAILABLE",e[e.USER_LOCKOUT=2]="USER_LOCKOUT",e[e.BIOMETRICS_NOT_ENROLLED=3]="BIOMETRICS_NOT_ENROLLED",e[e.USER_TEMPORARY_LOCKOUT=4]="USER_TEMPORARY_LOCKOUT",e[e.AUTHENTICATION_FAILED=10]="AUTHENTICATION_FAILED",e[e.APP_CANCEL=11]="APP_CANCEL",e[e.INVALID_CONTEXT=12]="INVALID_CONTEXT",e[e.NOT_INTERACTIVE=13]="NOT_INTERACTIVE",e[e.PASSCODE_NOT_SET=14]="PASSCODE_NOT_SET",e[e.SYSTEM_CANCEL=15]="SYSTEM_CANCEL",e[e.USER_CANCEL=16]="USER_CANCEL",e[e.USER_FALLBACK=17]="USER_FALLBACK"})(Hq||(Hq={}));const Wq=X6e("NativeBiometric",{web:()=>ZE(()=>import("./web-Bl03wgtU.js"),[]).then(e=>new e.NativeBiometricWeb)});/*! Capacitor: https://capacitorjs.com/ - MIT License */const Y6e=e=>{const t=new Map;t.set("web",{name:"web"});const r=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t},n=(a,s)=>{r.platforms.set(a,s)},i=a=>{r.platforms.has(a)&&(r.currentPlatform=r.platforms.get(a))};return r.addPlatform=n,r.setPlatform=i,r},Q6e=e=>e.CapacitorPlatforms=Y6e(e),ioe=Q6e(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});ioe.addPlatform;ioe.setPlatform;var ly;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(ly||(ly={}));class Lj extends Error{constructor(t,r,n){super(t),this.message=t,this.code=r,this.data=n}}const J6e=e=>{var t,r;return e!=null&&e.androidBridge?"android":!((r=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},Z6e=e=>{var t,r,n,i,a;const s=e.CapacitorCustomPlatform||null,o=e.Capacitor||{},l=o.Plugins=o.Plugins||{},c=e.CapacitorPlatforms,d=()=>s!==null?s.name:J6e(e),f=((t=c==null?void 0:c.currentPlatform)===null||t===void 0?void 0:t.getPlatform)||d,p=()=>f()!=="web",m=((r=c==null?void 0:c.currentPlatform)===null||r===void 0?void 0:r.isNativePlatform)||p,x=O=>{const D=N.get(O);return!!(D!=null&&D.platforms.has(f())||w(O))},v=((n=c==null?void 0:c.currentPlatform)===null||n===void 0?void 0:n.isPluginAvailable)||x,b=O=>{var D;return(D=o.PluginHeaders)===null||D===void 0?void 0:D.find(M=>M.name===O)},w=((i=c==null?void 0:c.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||b,_=O=>e.console.error(O),C=(O,D,M)=>Promise.reject(`${M} does not have an implementation of "${D}".`),N=new Map,R=(O,D={})=>{const M=N.get(O);if(M)return console.warn(`Capacitor plugin "${O}" already registered. Cannot register plugins twice.`),M.proxy;const B=f(),U=w(O);let H;const Z=async()=>(!H&&B in D?H=typeof D[B]=="function"?H=await D[B]():H=D[B]:s!==null&&!H&&"web"in D&&(H=typeof D.web=="function"?H=await D.web():H=D.web),H),ee=(fe,Se)=>{var Y,ce;if(U){const W=U==null?void 0:U.methods.find(G=>Se===G.name);if(W)return W.rtype==="promise"?G=>o.nativePromise(O,Se.toString(),G):(G,ie)=>o.nativeCallback(O,Se.toString(),G,ie);if(fe)return(Y=fe[Se])===null||Y===void 0?void 0:Y.bind(fe)}else{if(fe)return(ce=fe[Se])===null||ce===void 0?void 0:ce.bind(fe);throw new Lj(`"${O}" plugin is not implemented on ${B}`,ly.Unimplemented)}},V=fe=>{let Se;const Y=(...ce)=>{const W=Z().then(G=>{const ie=ee(G,fe);if(ie){const Ce=ie(...ce);return Se=Ce==null?void 0:Ce.remove,Ce}else throw new Lj(`"${O}.${fe}()" is not implemented on ${B}`,ly.Unimplemented)});return fe==="addListener"&&(W.remove=async()=>Se()),W};return Y.toString=()=>`${fe.toString()}() { [capacitor code] }`,Object.defineProperty(Y,"name",{value:fe,writable:!1,configurable:!1}),Y},te=V("addListener"),se=V("removeListener"),Q=(fe,Se)=>{const Y=te({eventName:fe},Se),ce=async()=>{const G=await Y;se({eventName:fe,callbackId:G},Se)},W=new Promise(G=>Y.then(()=>G({remove:ce})));return W.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await ce()},W},X=new Proxy({},{get(fe,Se){switch(Se){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return U?Q:te;case"removeListener":return se;default:return V(Se)}}});return l[O]=X,N.set(O,{name:O,proxy:X,platforms:new Set([...Object.keys(D),...U?[B]:[]])}),X},P=((a=c==null?void 0:c.currentPlatform)===null||a===void 0?void 0:a.registerPlugin)||R;return o.convertFileSrc||(o.convertFileSrc=O=>O),o.getPlatform=f,o.handleError=_,o.isNativePlatform=m,o.isPluginAvailable=v,o.pluginMethodNoop=C,o.registerPlugin=P,o.Exception=Lj,o.DEBUG=!!o.DEBUG,o.isLoggingEnabled=!!o.isLoggingEnabled,o.platform=o.getPlatform(),o.isNative=o.isNativePlatform(),o},e8e=e=>e.Capacitor=Z6e(e),Qg=e8e(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),_4=Qg.registerPlugin;Qg.Plugins;class aoe{constructor(t){this.listeners={},this.retainedEventArguments={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,r){let n=!1;this.listeners[t]||(this.listeners[t]=[],n=!0),this.listeners[t].push(r);const a=this.windowListeners[t];a&&!a.registered&&this.addWindowListener(a),n&&this.sendRetainedArgumentsForEvent(t);const s=async()=>this.removeListener(t,r);return Promise.resolve({remove:s})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,r,n){const i=this.listeners[t];if(!i){if(n){let a=this.retainedEventArguments[t];a||(a=[]),a.push(r),this.retainedEventArguments[t]=a}return}i.forEach(a=>a(r))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,r){this.windowListeners[r]={registered:!1,windowEventName:t,pluginEventName:r,handler:n=>{this.notifyListeners(r,n)}}}unimplemented(t="not implemented"){return new Qg.Exception(t,ly.Unimplemented)}unavailable(t="not available"){return new Qg.Exception(t,ly.Unavailable)}async removeListener(t,r){const n=this.listeners[t];if(!n)return;const i=n.indexOf(r);this.listeners[t].splice(i,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const r=this.retainedEventArguments[t];r&&(delete this.retainedEventArguments[t],r.forEach(n=>{this.notifyListeners(t,n)}))}}const Vq=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),qq=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class t8e extends aoe{async getCookies(){const t=document.cookie,r={};return t.split(";").forEach(n=>{if(n.length<=0)return;let[i,a]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=qq(i).trim(),a=qq(a).trim(),r[i]=a}),r}async setCookie(t){try{const r=Vq(t.key),n=Vq(t.value),i=`; expires=${(t.expires||"").replace("expires=","")}`,a=(t.path||"/").replace("path=",""),s=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${r}=${n||""}${i}; path=${a}; ${s};`}catch(r){return Promise.reject(r)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const r of t)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}_4("CapacitorCookies",{web:()=>new t8e});const r8e=async e=>new Promise((t,r)=>{const n=new FileReader;n.onload=()=>{const i=n.result;t(i.indexOf(",")>=0?i.split(",")[1]:i)},n.onerror=i=>r(i),n.readAsDataURL(e)}),n8e=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(i=>i.toLocaleLowerCase()).reduce((i,a,s)=>(i[a]=e[t[s]],i),{})},i8e=(e,t=!0)=>e?Object.entries(e).reduce((n,i)=>{const[a,s]=i;let o,l;return Array.isArray(s)?(l="",s.forEach(c=>{o=t?encodeURIComponent(c):c,l+=`${a}=${o}&`}),l.slice(0,-1)):(o=t?encodeURIComponent(s):s,l=`${a}=${o}`),`${n}&${l}`},"").substr(1):null,a8e=(e,t={})=>{const r=Object.assign({method:e.method||"GET",headers:e.headers},t),i=n8e(e.headers)["content-type"]||"";if(typeof e.data=="string")r.body=e.data;else if(i.includes("application/x-www-form-urlencoded")){const a=new URLSearchParams;for(const[s,o]of Object.entries(e.data||{}))a.set(s,o);r.body=a.toString()}else if(i.includes("multipart/form-data")||e.data instanceof FormData){const a=new FormData;if(e.data instanceof FormData)e.data.forEach((o,l)=>{a.append(l,o)});else for(const o of Object.keys(e.data))a.append(o,e.data[o]);r.body=a;const s=new Headers(r.headers);s.delete("content-type"),r.headers=s}else(i.includes("application/json")||typeof e.data=="object")&&(r.body=JSON.stringify(e.data));return r};class s8e extends aoe{async request(t){const r=a8e(t,t.webFetchExtra),n=i8e(t.params,t.shouldEncodeUrlParams),i=n?`${t.url}?${n}`:t.url,a=await fetch(i,r),s=a.headers.get("content-type")||"";let{responseType:o="text"}=a.ok?t:{};s.includes("application/json")&&(o="json");let l,c;switch(o){case"arraybuffer":case"blob":c=await a.blob(),l=await r8e(c);break;case"json":l=await a.json();break;case"document":case"text":default:l=await a.text()}const d={};return a.headers.forEach((f,p)=>{d[p]=f}),{data:l,headers:d,status:a.status,url:a.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}_4("CapacitorHttp",{web:()=>new s8e});const JA=_4("App",{web:()=>ZE(()=>import("./web-C6RmUD9M.js"),[]).then(e=>new e.AppWeb)}),Vf=_4("Preferences",{web:()=>ZE(()=>import("./web-DAnfGAlu.js"),[]).then(e=>new e.PreferencesWeb)});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8e=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),soe=(...e)=>e.filter((t,r,n)=>!!t&&n.indexOf(t)===r).join(" ");/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var l8e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8e=I.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:s,...o},l)=>I.createElement("svg",{ref:l,...l8e,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:soe("lucide",i),...o},[...s.map(([c,d])=>I.createElement(c,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=(e,t)=>{const r=I.forwardRef(({className:n,...i},a)=>I.createElement(c8e,{ref:a,iconNode:t,className:soe(`lucide-${o8e(e)}`,n),...i}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gq=mt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8e=mt("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8e=mt("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8e=mt("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=mt("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8e=mt("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=mt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=mt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8e=mt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=mt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m8e=mt("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g8e=mt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=mt("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ooe=mt("Brush",[["path",{d:"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08",key:"1styjt"}],["path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z",key:"z0l1mu"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x8e=mt("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=mt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=mt("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=mt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8e=mt("CameraOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16",key:"qmtpty"}],["path",{d:"M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5",key:"1ufyfc"}],["path",{d:"M14.121 15.121A3 3 0 1 1 9.88 10.88",key:"11zox6"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=mt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=mt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=mt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=mt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=mt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=mt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8e=mt("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=mt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=mt("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=mt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=mt("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=mt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8e=mt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8e=mt("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=mt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=mt("CloudDownload",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m8 17 4 4 4-4",key:"1ul180"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const loe=mt("CloudUpload",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8e=mt("CopyPlus",[["line",{x1:"15",x2:"15",y1:"12",y2:"18",key:"1p7wdc"}],["line",{x1:"12",x2:"18",y1:"15",y2:"15",key:"1nscbv"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P7=mt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=mt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=mt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=mt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8e=mt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const coe=mt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=mt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C8e=mt("FilePen",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k8e=mt("FileSliders",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M10 11v2",key:"1s651w"}],["path",{d:"M8 17h8",key:"wh5c61"}],["path",{d:"M14 16v2",key:"12fp5e"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uoe=mt("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=mt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const doe=mt("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=mt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=mt("Fingerprint",[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kq=mt("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xq=mt("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8e=mt("GitCommitHorizontal",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=mt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8e=mt("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8e=mt("Hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=mt("HardHat",[["path",{d:"M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z",key:"1dej2m"}],["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8e=mt("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8e=mt("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8e=mt("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=mt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const foe=mt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=mt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yq=mt("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8e=mt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8e=mt("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yf=mt("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hoe=mt("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=mt("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8e=mt("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8e=mt("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8e=mt("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=mt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=mt("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=mt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const poe=mt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qq=mt("MailX",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h9",key:"1j9vog"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m17 17 4 4",key:"1b3523"}],["path",{d:"m21 17-4 4",key:"uinynz"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=mt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=mt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8e=mt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const moe=mt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=mt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8e=mt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B8e=mt("MousePointerClick",[["path",{d:"m9 9 5 12 1.8-5.2L21 14Z",key:"1b76lo"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=mt("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8e=mt("PackagePlus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=mt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const goe=mt("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=mt("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jq=mt("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=mt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8e=mt("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8e=mt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=mt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=mt("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=mt("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=mt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=mt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=mt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8e=mt("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=mt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=mt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8e=mt("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V8e=mt("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=mt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8e=mt("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xoe=mt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=mt("SquareCheckBig",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=mt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const voe=mt("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yoe=mt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=mt("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8e=mt("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=mt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=mt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=mt("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=mt("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=mt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8e=mt("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X8e=mt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=mt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=mt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=mt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8e=mt("ZapOff",[["path",{d:"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317",key:"193nxd"}],["path",{d:"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773",key:"27a7lr"}],["path",{d:"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643",key:"1e0qe9"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const boe=mt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Q8e=({onUnlock:e})=>{const t=async()=>{await q0.signOut(),window.location.href="/auth"},r=document.title||"Subfloor";return u.jsxs("div",{className:"fixed inset-0 z-[9999] bg-slate-900 flex flex-col items-center justify-center p-6 text-white",children:[u.jsx("div",{className:"w-24 h-24 bg-slate-800 rounded-full flex items-center justify-center mb-8 shadow-xl border border-slate-700",children:u.jsx(s8,{className:"w-12 h-12 text-blue-500"})}),u.jsxs("h1",{className:"text-2xl font-bold mb-2",children:[r," is Locked"]}),u.jsx("p",{className:"text-slate-400 mb-12 text-center",children:"Verify your identity to resume your session"}),u.jsxs("button",{onClick:e,className:"w-full max-w-xs bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-6 rounded-xl shadow-lg transition-all active:scale-95 flex items-center justify-center gap-3 mb-4",children:[u.jsx(s8,{className:"w-6 h-6"}),u.jsx("span",{children:"Unlock with Biometrics"})]}),u.jsxs("button",{onClick:t,className:"text-slate-400 hover:text-white flex items-center gap-2 py-4",children:[u.jsx(poe,{className:"w-4 h-4"}),u.jsx("span",{children:"Log Out"})]})]})},woe=I.createContext({}),Bj=5*60*1e3,Uj="biometrics_enabled",C1="bio_last_active_timestamp",J8e=({children:e})=>{const{user:t}=Kr(),[r,n]=I.useState(!1),[i,a]=I.useState(!1),s=I.useRef(null);I.useEffect(()=>{(async()=>{const{value:p}=await Vf.get({key:Uj}),m=p==="true";if(a(m),m){const{value:x}=await Vf.get({key:C1});if(x){const v=parseInt(x,10),b=Date.now()-v;b>Bj&&(console.log(`[Bio] Boot Lock: Inactive for ${Math.round(b/1e3)}s`),n(!0))}}})()},[]),I.useEffect(()=>{if(!Qg.isNativePlatform())return;const f=JA.addListener("appStateChange",async({isActive:p})=>{if(i)if(!p)await Vf.set({key:C1,value:Date.now().toString()});else{const{value:m}=await Vf.get({key:C1});if(m){const x=Date.now()-parseInt(m,10);x>Bj&&(console.log(`[Bio] Resume Lock: Inactive for ${Math.round(x/1e3)}s`),n(!0))}}});return()=>{f.then(p=>p.remove())}},[i]);const o=()=>{!i||r||(s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{console.log("[Bio] Idle Lock: Screen left on too long"),n(!0)},Bj),Vf.set({key:C1,value:Date.now().toString()}))};I.useEffect(()=>{if(i)return window.addEventListener("touchstart",o),window.addEventListener("click",o),window.addEventListener("keypress",o),o(),()=>{window.removeEventListener("touchstart",o),window.removeEventListener("click",o),window.removeEventListener("keypress",o),s.current&&clearTimeout(s.current)}},[i,r]);const l=async()=>{try{await Wq.verifyIdentity({reason:"Unlock Subfloor",title:"Verify Identity",subtitle:"Unlock App",description:"Please authenticate to continue"}),n(!1),o(),Vf.set({key:C1,value:Date.now().toString()})}catch(f){console.error("[Bio] Scan failed or cancelled",f)}},c=async()=>{try{return(await Wq.isAvailable()).isAvailable?(await Vf.set({key:Uj,value:"true"}),await Vf.set({key:C1,value:Date.now().toString()}),a(!0),!0):(alert("Biometrics not available on this device"),!1)}catch(f){return console.error(f),!1}},d=async()=>{await Vf.set({key:Uj,value:"false"}),a(!1),n(!1)};return I.useEffect(()=>{r&&l()},[r]),u.jsxs(woe.Provider,{value:{isEnabled:i,enableBiometrics:c,disableBiometrics:d},children:[r&&u.jsx(Q8e,{onUnlock:l}),e]})},Z8e=()=>I.useContext(woe),e5e=()=>{const[e,t]=I.useState([]),r=n=>{t(i=>[n,...i].slice(0,4))};return I.useEffect(()=>{if(!Qg.isNativePlatform())return;(async()=>{try{const{PushNotifications:i}=await ZE(async()=>{const{PushNotifications:s}=await import("./index-CXYO-3ce.js");return{PushNotifications:s}},[]);if(r("Checking Perms..."),(await i.checkPermissions()).receive!=="granted"&&(await i.requestPermissions()).receive!=="granted"){r("User DENIED");return}r("Registering..."),await i.register(),await i.removeAllListeners(),await i.addListener("registration",async s=>{r(`TOKEN: ${s.value.substring(0,6)}...`);try{await fetch(sr("/api/notifications/register-device"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s.value,platform:"android",model:navigator.userAgent}),credentials:"include"}),r("SERVER SENT OK")}catch(o){r(`API FAIL: ${o.message}`)}}),await i.addListener("registrationError",s=>{r(`REG FAIL: ${JSON.stringify(s)}`)})}catch(i){console.error("Push Init Failed:",i),r(`INIT ERR: ${i.message}`)}})()},[]),e.length===0?null:u.jsx("div",{style:{position:"fixed",top:60,left:10,zIndex:999999,backgroundColor:"rgba(200, 0, 0, 0.8)",color:"white",padding:8,fontSize:10,fontWeight:"bold",pointerEvents:"none",borderRadius:4},children:e.map((n,i)=>u.jsx("div",{children:n},i))})},Zq=e=>{switch(e){case"customers":return u.jsx(oc,{className:"w-6 h-6 text-gray-400"});case"projects":return u.jsx(Mh,{className:"w-6 h-6 text-gray-400"});case"installers":return u.jsx(ub,{className:"w-6 h-6 text-gray-400"});case"samples":return u.jsx(yf,{className:"w-6 h-6 text-gray-400"});default:return null}},t5e=(e,t)=>{const r=encodeURIComponent(t);switch(e){case"customers":return`/customers?search=${r}`;case"installers":return`/installers?search=${r}`;case"samples":return`/samples?search=${r}`;case"projects":return`/dashboard?search=${r}`;default:return"#"}},r5e=()=>{const[e,t]=I.useState(""),[r,n]=I.useState(null),[i,a]=I.useState(!1),[s,o]=I.useState(!1),l=I.useRef(null);gu(),I.useEffect(()=>{if(e.length<2){n(null),o(!1);return}a(!0);const f=setTimeout(()=>{fetch(sr(`/api/search?q=${e}`),{credentials:"include"}).then(p=>p.json()).then(p=>{n(p),o(!0)}).catch(console.error).finally(()=>a(!1))},300);return()=>clearTimeout(f)},[e]),I.useEffect(()=>{const f=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const c=()=>{t(""),n(null),o(!1)},d=r?Object.values(r).reduce((f,p)=>f+(Array.isArray(p)?p.length:0),0):0;return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"relative w-full md:w-64",ref:l,children:[u.jsxs("div",{className:"relative",children:[u.jsx(gc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),u.jsx("input",{type:"text",placeholder:"Search anything...",value:e,onChange:f=>t(f.target.value),onFocus:()=>e.length>1&&o(!0),className:"w-full bg-background text-text-primary pl-10 pr-4 py-2 rounded-lg border border-border focus:outline-none focus:ring-2 focus:ring-primary"})]}),s&&u.jsx("div",{className:"fixed inset-x-0 bottom-0 top-[72px] md:absolute md:top-full md:bottom-auto md:mt-2 w-full md:w-96 bg-surface md:rounded-lg shadow-lg border-t md:border border-border z-50 overflow-y-auto",children:i?u.jsxs("div",{className:"p-8 text-center text-gray-400 flex flex-col items-center gap-2",children:[u.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"}),u.jsx("span",{children:"Searching..."})]}):d>0&&r?u.jsx("div",{children:Object.entries(r).map(([f,p])=>{if(!Array.isArray(p)||p.length===0)return null;const m=p.slice(0,3),x=p.length>3;return u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-bold uppercase text-text-secondary px-4 pt-4 pb-2 border-b border-border bg-background/50",children:f}),u.jsx("ul",{children:m.map(v=>u.jsx("li",{children:f==="samples"?u.jsxs(ai,{to:`/samples?open=${v.id}`,onClick:c,className:"flex items-center gap-4 p-5 md:p-3 hover:bg-background transition-colors border-b border-border/50",children:[v.image?u.jsx("div",{className:"w-10 h-10 rounded-md bg-background border border-border shrink-0 overflow-hidden",children:u.jsx("img",{src:ds(v.image),alt:v.title,className:"w-full h-full object-cover"})}):Zq(f),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-lg md:text-base text-text-primary",children:v.title}),v.subtitle&&u.jsx("p",{className:"text-sm md:text-xs text-text-secondary",children:v.subtitle})]})]}):u.jsxs(ai,{to:v.path,onClick:c,className:"flex items-center gap-4 p-5 md:p-3 hover:bg-background transition-colors border-b border-border/50",children:[Zq(f),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-lg md:text-base text-text-primary",children:v.title}),v.subtitle&&u.jsx("p",{className:"text-sm md:text-xs text-text-secondary",children:v.subtitle})]})]})},`${f}-${v.id}`))}),x&&u.jsxs(ai,{to:t5e(f,e),onClick:c,className:"flex items-center justify-center gap-2 p-3 text-sm font-bold text-primary hover:bg-background/50 transition-colors border-b border-border/50",children:["View All ",f," ",u.jsx(Y0,{className:"w-4 h-4"})]})]},f)})}):u.jsxs("div",{className:"p-4 text-center text-gray-400",children:['No results found for "',e,'".']})})]})})};var Soe={exports:{}},Eoe={exports:{}};(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(r,n){return r<<n|r>>>32-n},rotr:function(r,n){return r<<32-n|r>>>n},endian:function(r){if(r.constructor==Number)return t.rotl(r,8)&16711935|t.rotl(r,24)&4278255360;for(var n=0;n<r.length;n++)r[n]=t.endian(r[n]);return r},randomBytes:function(r){for(var n=[];r>0;r--)n.push(Math.floor(Math.random()*256));return n},bytesToWords:function(r){for(var n=[],i=0,a=0;i<r.length;i++,a+=8)n[a>>>5]|=r[i]<<24-a%32;return n},wordsToBytes:function(r){for(var n=[],i=0;i<r.length*32;i+=8)n.push(r[i>>>5]>>>24-i%32&255);return n},bytesToHex:function(r){for(var n=[],i=0;i<r.length;i++)n.push((r[i]>>>4).toString(16)),n.push((r[i]&15).toString(16));return n.join("")},hexToBytes:function(r){for(var n=[],i=0;i<r.length;i+=2)n.push(parseInt(r.substr(i,2),16));return n},bytesToBase64:function(r){for(var n=[],i=0;i<r.length;i+=3)for(var a=r[i]<<16|r[i+1]<<8|r[i+2],s=0;s<4;s++)i*8+s*6<=r.length*8?n.push(e.charAt(a>>>6*(3-s)&63)):n.push("=");return n.join("")},base64ToBytes:function(r){r=r.replace(/[^A-Z0-9+\/]/ig,"");for(var n=[],i=0,a=0;i<r.length;a=++i%4)a!=0&&n.push((e.indexOf(r.charAt(i-1))&Math.pow(2,-2*a+8)-1)<<a*2|e.indexOf(r.charAt(i))>>>6-a*2);return n}};Eoe.exports=t})();var n5e=Eoe.exports,c8={utf8:{stringToBytes:function(e){return c8.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(c8.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(e.charCodeAt(r)&255);return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}},eG=c8;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var i5e=function(e){return e!=null&&(Coe(e)||a5e(e)||!!e._isBuffer)};function Coe(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function a5e(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&Coe(e.slice(0,0))}(function(){var e=n5e,t=eG.utf8,r=i5e,n=eG.bin,i=function(a,s){a.constructor==String?s&&s.encoding==="binary"?a=n.stringToBytes(a):a=t.stringToBytes(a):r(a)?a=Array.prototype.slice.call(a,0):!Array.isArray(a)&&a.constructor!==Uint8Array&&(a=a.toString());for(var o=e.bytesToWords(a),l=a.length*8,c=1732584193,d=-271733879,f=-1732584194,p=271733878,m=0;m<o.length;m++)o[m]=(o[m]<<8|o[m]>>>24)&16711935|(o[m]<<24|o[m]>>>8)&4278255360;o[l>>>5]|=128<<l%32,o[(l+64>>>9<<4)+14]=l;for(var x=i._ff,v=i._gg,b=i._hh,w=i._ii,m=0;m<o.length;m+=16){var _=c,C=d,N=f,R=p;c=x(c,d,f,p,o[m+0],7,-680876936),p=x(p,c,d,f,o[m+1],12,-389564586),f=x(f,p,c,d,o[m+2],17,606105819),d=x(d,f,p,c,o[m+3],22,-1044525330),c=x(c,d,f,p,o[m+4],7,-176418897),p=x(p,c,d,f,o[m+5],12,1200080426),f=x(f,p,c,d,o[m+6],17,-1473231341),d=x(d,f,p,c,o[m+7],22,-45705983),c=x(c,d,f,p,o[m+8],7,1770035416),p=x(p,c,d,f,o[m+9],12,-1958414417),f=x(f,p,c,d,o[m+10],17,-42063),d=x(d,f,p,c,o[m+11],22,-1990404162),c=x(c,d,f,p,o[m+12],7,1804603682),p=x(p,c,d,f,o[m+13],12,-40341101),f=x(f,p,c,d,o[m+14],17,-1502002290),d=x(d,f,p,c,o[m+15],22,1236535329),c=v(c,d,f,p,o[m+1],5,-165796510),p=v(p,c,d,f,o[m+6],9,-1069501632),f=v(f,p,c,d,o[m+11],14,643717713),d=v(d,f,p,c,o[m+0],20,-373897302),c=v(c,d,f,p,o[m+5],5,-701558691),p=v(p,c,d,f,o[m+10],9,38016083),f=v(f,p,c,d,o[m+15],14,-660478335),d=v(d,f,p,c,o[m+4],20,-405537848),c=v(c,d,f,p,o[m+9],5,568446438),p=v(p,c,d,f,o[m+14],9,-1019803690),f=v(f,p,c,d,o[m+3],14,-187363961),d=v(d,f,p,c,o[m+8],20,1163531501),c=v(c,d,f,p,o[m+13],5,-1444681467),p=v(p,c,d,f,o[m+2],9,-51403784),f=v(f,p,c,d,o[m+7],14,1735328473),d=v(d,f,p,c,o[m+12],20,-1926607734),c=b(c,d,f,p,o[m+5],4,-378558),p=b(p,c,d,f,o[m+8],11,-2022574463),f=b(f,p,c,d,o[m+11],16,1839030562),d=b(d,f,p,c,o[m+14],23,-35309556),c=b(c,d,f,p,o[m+1],4,-1530992060),p=b(p,c,d,f,o[m+4],11,1272893353),f=b(f,p,c,d,o[m+7],16,-155497632),d=b(d,f,p,c,o[m+10],23,-1094730640),c=b(c,d,f,p,o[m+13],4,681279174),p=b(p,c,d,f,o[m+0],11,-358537222),f=b(f,p,c,d,o[m+3],16,-722521979),d=b(d,f,p,c,o[m+6],23,76029189),c=b(c,d,f,p,o[m+9],4,-640364487),p=b(p,c,d,f,o[m+12],11,-421815835),f=b(f,p,c,d,o[m+15],16,530742520),d=b(d,f,p,c,o[m+2],23,-995338651),c=w(c,d,f,p,o[m+0],6,-198630844),p=w(p,c,d,f,o[m+7],10,1126891415),f=w(f,p,c,d,o[m+14],15,-1416354905),d=w(d,f,p,c,o[m+5],21,-57434055),c=w(c,d,f,p,o[m+12],6,1700485571),p=w(p,c,d,f,o[m+3],10,-1894986606),f=w(f,p,c,d,o[m+10],15,-1051523),d=w(d,f,p,c,o[m+1],21,-2054922799),c=w(c,d,f,p,o[m+8],6,1873313359),p=w(p,c,d,f,o[m+15],10,-30611744),f=w(f,p,c,d,o[m+6],15,-1560198380),d=w(d,f,p,c,o[m+13],21,1309151649),c=w(c,d,f,p,o[m+4],6,-145523070),p=w(p,c,d,f,o[m+11],10,-1120210379),f=w(f,p,c,d,o[m+2],15,718787259),d=w(d,f,p,c,o[m+9],21,-343485551),c=c+_>>>0,d=d+C>>>0,f=f+N>>>0,p=p+R>>>0}return e.endian([c,d,f,p])};i._ff=function(a,s,o,l,c,d,f){var p=a+(s&o|~s&l)+(c>>>0)+f;return(p<<d|p>>>32-d)+s},i._gg=function(a,s,o,l,c,d,f){var p=a+(s&l|o&~l)+(c>>>0)+f;return(p<<d|p>>>32-d)+s},i._hh=function(a,s,o,l,c,d,f){var p=a+(s^o^l)+(c>>>0)+f;return(p<<d|p>>>32-d)+s},i._ii=function(a,s,o,l,c,d,f){var p=a+(o^(s|~l))+(c>>>0)+f;return(p<<d|p>>>32-d)+s},i._blocksize=16,i._digestsize=16,Soe.exports=function(a,s){if(a==null)throw new Error("Illegal argument "+a);var o=e.wordsToBytes(i(a,s));return s&&s.asBytes?o:s&&s.asString?n.bytesToString(o):e.bytesToHex(o)}})();var s5e=Soe.exports;const o5e=Us(s5e);function xS(e){const t=e.trim().toLowerCase();return o5e(t)}const l5e=()=>{const{currentUser:e,isLayoutEditMode:t,toggleLayoutEditMode:r,unreadCount:n,refreshNotifications:i}=Kr(),a=Il(),[s,o]=I.useState(""),[l,c]=I.useState(!1),[d,f]=I.useState([]),p=I.useRef(null),m=a.pathname.startsWith("/projects/");I.useEffect(()=>{if(e!=null&&e.avatarUrl)o(ds(e.avatarUrl));else if(e!=null&&e.email){const w=xS(e.email);o(`https://www.gravatar.com/avatar/${w}?s=40&d=mp`)}},[e,e==null?void 0:e.avatarUrl]),I.useEffect(()=>{const w=_=>{p.current&&!p.current.contains(_.target)&&c(!1)};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[]),I.useEffect(()=>{l&&(EMe().then(f),i())},[l,i]);const x=async()=>{await q0.signOut(),window.location.href="/auth"};if(!e)return null;const v=e.firstName?`${e.firstName} ${e.lastName||""}`:e.email,b=async w=>{w.isRead||(await kMe(w.id),i()),c(!1)};return u.jsxs("div",{className:"relative",ref:p,children:[u.jsxs("button",{onClick:()=>c(!l),className:"flex items-center space-x-3 text-text-primary hover:text-primary p-1 pr-3 rounded-full hover:bg-surface-container-high transition-colors border border-transparent hover:border-outline/10 group",children:[n>0&&u.jsx("span",{className:"absolute top-0 left-0 -mt-1 -ml-1 w-5 h-5 bg-error-container text-error rounded-full text-[10px] flex items-center justify-center font-bold border border-surface z-10 shadow-sm",children:n>9?"9+":n}),u.jsx("img",{src:s,alt:"User Avatar",className:"w-8 h-8 rounded-full bg-surface-container-highest border border-outline/20 object-cover"}),u.jsx("span",{className:"hidden sm:inline text-sm font-bold group-hover:text-primary transition-colors",children:v})]}),l&&u.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-surface-container-high rounded-xl shadow-xl z-50 border border-outline/10 overflow-hidden ring-1 ring-black/5",children:[u.jsxs("div",{className:"p-3 border-b border-outline/10 bg-surface-container-low flex justify-between items-center",children:[u.jsx("span",{className:"text-xs font-bold text-text-secondary uppercase tracking-wider",children:"Notifications"}),n>0&&u.jsxs("button",{onClick:async()=>{await _Me(),i(),c(!1)},className:"text-xs text-primary hover:text-primary-hover font-medium flex items-center gap-1",children:[u.jsx(nf,{size:12})," Mark all read"]})]}),u.jsx("div",{className:"max-h-60 overflow-y-auto",children:d.length===0?u.jsx("div",{className:"p-8 text-center text-text-secondary text-sm italic opacity-70",children:"No notifications"}):d.map(w=>u.jsx(ai,{to:w.linkUrl,onClick:()=>b(w),className:`block p-3 border-b border-outline/10 hover:bg-surface-container-highest transition-colors ${w.isRead?"border-l-4 border-l-transparent":"bg-primary-container/10 border-l-4 border-l-primary"}`,children:u.jsxs("div",{className:"flex gap-3",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-primary text-on-primary flex items-center justify-center text-xs font-bold flex-shrink-0 shadow-sm",children:w.senderInitial||"?"}),u.jsxs("div",{children:[u.jsx("p",{className:`text-sm text-text-primary line-clamp-2 ${w.isRead?"":"font-medium"}`,children:w.message}),u.jsx("p",{className:"text-[10px] text-text-tertiary mt-1",children:new Date(w.createdAt).toLocaleDateString()})]})]})},w.id))}),u.jsxs("div",{className:"p-2 border-t border-outline/10 bg-surface-container-low",children:[m&&u.jsx("button",{onClick:()=>{r(),c(!1)},className:"w-full flex items-center px-3 py-2 text-sm text-text-primary rounded-lg hover:bg-surface-container-highest transition-colors",children:t?u.jsxs(u.Fragment,{children:[u.jsx(T4,{size:16,className:"mr-3 text-error"}),u.jsx("span",{children:"Exit Edit Mode"})]}):u.jsxs(u.Fragment,{children:[u.jsx(rC,{size:16,className:"mr-3 text-primary"}),u.jsx("span",{children:"Edit Page Layout"})]})}),u.jsxs("button",{onClick:x,className:"w-full flex items-center px-3 py-2 text-sm text-text-primary rounded-lg hover:bg-surface-container-highest transition-colors mt-1",children:[u.jsx(poe,{size:16,className:"mr-3"}),u.jsx("span",{children:"Logout"})]})]})]})]})},c5e=()=>{const e=Il(),{isLayoutEditMode:t,toggleLayoutEditMode:r}=Kr();return I.useEffect(()=>{t&&r()},[e.pathname]),null},u5e=20,d5e=()=>{var v;const{currentUser:e}=Kr(),t=(v=e==null?void 0:e.roles)==null?void 0:v.includes("Admin"),{toasts:r,handlers:n}=ese(),{startPause:i,endPause:a}=n,[s,o]=I.useState([]),[l,c]=I.useState(!1),[d,f]=I.useState(null);I.useEffect(()=>{if(!t)return;(async()=>{try{const w=await fetch(sr("/api/system/check-remote"),{credentials:"include"});if(w.ok){const _=await w.json();_.isUpdateAvailable&&f({version:_.latestVersion,url:_.releaseNotesUrl})}}catch(w){console.error("Failed to check for updates:",w)}})()},[t]),I.useEffect(()=>{r.forEach(b=>{o(w=>{if(w.find(C=>C.id===b.id))return w;let _=b.message;return typeof _=="function"&&(_="Custom Component Message"),[{id:b.id,message:_,type:b.type,time:new Date},...w].slice(0,u5e)})})},[r]);const p=r.filter(b=>b.visible)[0],m=b=>{switch(b){case"success":return"text-green-500";case"error":return"text-red-500";case"loading":return"text-blue-500";default:return"text-text-secondary"}},x=b=>{switch(b){case"success":return u.jsx(A4,{size:14,className:"text-green-500"});case"error":return u.jsx(eC,{size:14,className:"text-red-500"});case"loading":return u.jsx(Gq,{size:14,className:"text-blue-500 animate-pulse"});default:return u.jsx(P8e,{size:14,className:"text-text-secondary"})}};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"hidden md:flex relative z-50 mr-4",onMouseEnter:i,onMouseLeave:a,children:[u.jsxs("div",{onClick:()=>c(!l),className:`
                        cursor-pointer flex items-center gap-3 px-4 py-2 rounded-lg border transition-all duration-300 w-80 h-10 overflow-hidden relative
                        ${p?"bg-surface border-primary shadow-sm":"bg-surface/50 border-transparent hover:bg-surface hover:border-border"}
                    `,children:[u.jsx("div",{className:"flex-shrink-0",children:p?x(p.type):d?u.jsx(mS,{size:14,className:"text-blue-500 animate-bounce"}):u.jsx(Gq,{size:14,className:"text-text-tertiary"})}),u.jsx("div",{className:"flex-1 text-sm font-medium truncate relative",children:u.jsx("div",{className:"animate-in slide-in-from-bottom-2 fade-in duration-300",children:p?u.jsx("span",{className:m(p.type),children:p.message}):d?u.jsxs("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline font-bold flex items-center gap-1",onClick:b=>b.stopPropagation(),children:["Update Available: v",d.version]}):u.jsx("span",{className:"text-text-tertiary",children:"System Ready"})},(p==null?void 0:p.id)||(d?"update":"idle"))}),u.jsx(cs,{size:14,className:`text-text-tertiary transition-transform ${l?"rotate-180":""}`})]}),l&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1)}),u.jsxs("div",{className:"absolute top-full right-0 mt-2 w-96 bg-surface border border-border rounded-lg shadow-xl z-50 overflow-hidden flex flex-col max-h-[500px]",children:[u.jsxs("div",{className:"p-3 border-b border-border bg-background flex justify-between items-center",children:[u.jsx("span",{className:"text-xs font-bold text-text-secondary uppercase tracking-wider",children:"System Log"}),u.jsx("button",{onClick:()=>o([]),className:"text-xs text-text-tertiary hover:text-red-500",children:"Clear"})]}),u.jsx("div",{className:"overflow-y-auto flex-1",children:s.length===0?u.jsx("div",{className:"p-8 text-center text-text-tertiary text-sm",children:"No recent activity"}):s.map(b=>u.jsxs("div",{className:"p-3 border-b border-border last:border-0 hover:bg-background/50 flex gap-3",children:[u.jsx("div",{className:"mt-0.5",children:x(b.type)}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"text-sm text-text-primary break-words",children:b.message}),u.jsxs("div",{className:"text-[10px] text-text-tertiary mt-1 flex items-center gap-1",children:[u.jsx(od,{size:10}),b.time.toLocaleTimeString()]})]})]},b.id))})]})]})]}),u.jsxs("div",{className:"md:hidden fixed top-0 left-0 right-0 z-[100] p-4 flex flex-col gap-2 pointer-events-none",children:[d&&!p&&u.jsxs("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"pointer-events-auto bg-blue-600 text-white shadow-lg rounded-lg p-3 flex items-center gap-3 animate-in slide-in-from-top-2 fade-in",children:[u.jsx(mS,{size:16}),u.jsxs("div",{className:"text-sm font-bold flex-1",children:["New Version v",d.version," is available!"]})]}),r.filter(b=>b.visible).map(b=>u.jsxs("div",{className:"pointer-events-auto bg-surface shadow-lg border border-border rounded-lg p-3 flex items-center gap-3 animate-in slide-in-from-top-2 fade-in",children:[x(b.type),u.jsx("div",{className:"text-sm font-medium flex-1 text-text-primary",children:b.message})]},b.id))]})]})},f5e=()=>{const[e,t]=I.useState(!1),{systemBranding:r}=Kr(),n=()=>u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"mb-8 flex items-center justify-between h-16 px-2",children:[r!=null&&r.logoUrl?u.jsx("img",{src:ds(r.logoUrl),alt:"Company Logo",className:"max-h-16 lg:max-h-12 max-w-full object-contain"}):u.jsx("h1",{className:"text-3xl lg:text-2xl font-bold text-primary",children:"Subfloor"}),u.jsx("button",{onClick:()=>t(!1),className:"lg:hidden p-2 text-text-secondary hover:text-text-primary",children:u.jsx(Gr,{className:"w-8 h-8"})})]}),u.jsxs("nav",{className:"flex flex-col space-y-4 lg:space-y-2 flex-grow",children:[u.jsxs(Ul,{to:"/",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,end:!0,children:[u.jsx(foe,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Dashboard"})]}),u.jsxs(Ul,{to:"/customers",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(rx,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Customers"})]}),u.jsxs(Ul,{to:"/installers",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(ub,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Installers"})]}),u.jsxs(Ul,{to:"/samples",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(yf,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Sample Library"})]}),u.jsxs(Ul,{to:"/vendors",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(Jg,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Vendor Directory"})]}),u.jsxs(Ul,{to:"/orders",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(R0,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Orders"})]}),u.jsxs(Ul,{to:"/import",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(ZA,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Import Data"})]}),u.jsxs(Ul,{to:"/kb",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(g8e,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Knowledge Base"})]}),u.jsxs(Ul,{to:"/calendar",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(pd,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Calendar"})]}),u.jsxs(Ul,{to:"/reports",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(w8e,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Reports"})]}),u.jsxs(Ul,{to:"/messages",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(o8,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Messages"})]})]}),u.jsx("div",{className:"mt-auto",children:u.jsxs(Ul,{to:"/settings",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(rC,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Settings"})]})})]});return u.jsxs("div",{className:"flex h-screen bg-background text-text-primary",children:[u.jsx(c5e,{}),u.jsx("aside",{className:"hidden lg:flex w-64 bg-background p-6 flex-col shrink-0",children:u.jsx(n,{})}),e&&u.jsxs(u.Fragment,{children:[u.jsx("div",{id:"sidebar-overlay",className:"fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden",onClick:()=>t(!1)}),u.jsx("aside",{className:"fixed top-0 left-0 w-full h-full bg-background p-6 flex flex-col z-30 lg:hidden overflow-y-auto",children:u.jsx(n,{})})]}),u.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[u.jsxs("header",{className:"bg-background border-b border-surface-container-high/50 p-4 flex justify-between items-center z-10 text-text-primary",children:[u.jsx("button",{className:"p-2 rounded-md hover:bg-background lg:hidden",onClick:()=>t(!0),children:u.jsx(moe,{className:"w-6 h-6"})}),u.jsx("div",{className:"flex-1 flex justify-center lg:justify-start md:ml-4 min-w-0 px-2",children:u.jsx(r5e,{})}),u.jsxs("div",{className:"flex items-center gap-2 md:gap-4 flex-shrink-0",children:[u.jsx("div",{className:"hidden xl:block",children:u.jsx(d5e,{})}),u.jsx(l5e,{})]})]}),u.jsx("main",{className:"flex-1 overflow-y-auto lg:p-8",children:u.jsx(Qne,{})})]})]})},Sv=["Flooring","Tile","Kitchen Remodel","Bathroom Remodel","New Construction","Other"],h5e=["Managed Installation","Materials Only Sale","Unmanaged Installer"],uh=["SF","SY","LF","Carton","Sheet","Roll","Piece","Box","Each"],dy=["Tile","LVP","LVT","Laminate","Sheet Product","Carpet","Quartz","Dekton"];var ar=(e=>(e.NEW="New",e.SAMPLE_CHECKOUT="Sample Checkout",e.AWAITING_DECISION="Awaiting Decision",e.QUOTING="Quoting",e.ACCEPTED="Accepted",e.SCHEDULED="Scheduled",e.COMPLETED="Completed",e.CANCELLED="Cancelled",e.CLOSED="Closed",e))(ar||{}),ll=(e=>(e.SENT="Sent",e.ACCEPTED="Accepted",e.REJECTED="Rejected",e))(ll||{});const koe=({onCustomerSelect:e,onRequestNewCustomer:t})=>{const{data:r=[],isLoading:n}=Mx(),[i,a]=I.useState(""),s=I.useMemo(()=>i.length<1||!r?[]:r.filter(l=>l.fullName.toLowerCase().includes(i.toLowerCase())||l.email&&l.email.toLowerCase().includes(i.toLowerCase())),[i,r]),o=l=>{e(l),a("")};return u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",placeholder:"Search by name or email...",value:i,onChange:l=>a(l.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"}),i.length>0&&u.jsxs("div",{className:"absolute z-10 w-full bg-surface-container-high border border-outline/20 rounded-lg mt-1 shadow-xl max-h-60 overflow-y-auto",children:[n&&u.jsxs("div",{className:"p-3 text-text-secondary flex items-center gap-2",children:[u.jsx(O4,{size:16,className:"animate-spin"})," Searching..."]}),!n&&s.map(l=>u.jsxs("div",{onClick:()=>o(l),className:"px-4 py-3 hover:bg-primary-container/30 cursor-pointer border-b border-outline/10 text-text-primary",children:[u.jsx("p",{className:"font-semibold",children:l.fullName}),u.jsx("p",{className:"text-sm text-text-secondary",children:l.email})]},l.id)),u.jsxs("div",{onClick:()=>t(i),className:"p-3 hover:bg-primary-container/30 cursor-pointer flex items-center gap-2 text-primary font-semibold",children:[u.jsx(X8e,{size:18}),s.length>0?`Or create new customer "${i}"`:`Create new customer "${i}"`]})]})]})},p5e=({customer:e,onProjectSelect:t})=>{const{projects:r,addProject:n}=Kr(),[i,a]=I.useState(!1),[s,o]=I.useState(""),[l,c]=I.useState(Sv[0]),d=I.useMemo(()=>r.filter(p=>p.customerId===e.id),[r,e.id]),f=async p=>{if(p.preventDefault(),!s){alert("Please provide a name for the new project.");return}try{const m=await n({customerId:e.id,projectName:s,projectType:l,status:ar.NEW});t(m),a(!1)}catch(m){console.error("Failed to create project",m)}};return i?u.jsxs("form",{onSubmit:f,className:"p-4 bg-background rounded-lg border border-border space-y-4",children:[u.jsxs("h4",{className:"font-semibold text-text-primary",children:["Create New Project for ",e.fullName]}),u.jsx("input",{type:"text",placeholder:"Project Name (e.g., 'Master Bedroom')",required:!0,value:s,onChange:p=>o(p.target.value),className:"w-full p-2 bg-surface border-border rounded text-text-primary"}),u.jsx("select",{value:l,onChange:p=>c(p.target.value),className:"w-full p-2 bg-surface border-border rounded text-text-primary",children:Sv.map(p=>u.jsx("option",{value:p,children:p},p))}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:()=>a(!1),className:"py-2 px-4 bg-secondary hover:bg-secondary-hover rounded text-on-secondary",children:"Cancel"}),u.jsx("button",{type:"submit",className:"py-2 px-4 bg-primary hover:bg-primary-hover rounded text-on-primary",children:"Create Project"})]})]}):u.jsxs("div",{className:"space-y-3",children:[d.length>0?d.map(p=>u.jsxs("div",{onClick:()=>t(p),className:"p-3 bg-background rounded-lg border border-transparent hover:border-accent cursor-pointer transition-colors",children:[u.jsx("p",{className:"font-semibold text-text-primary",children:p.projectName}),u.jsxs("p",{className:"text-sm text-text-secondary",children:[p.projectType," - ",u.jsx("span",{className:"italic",children:p.status})]})]},p.id)):u.jsx("p",{className:"text-text-secondary text-center py-4",children:"This customer has no existing projects."}),u.jsxs("button",{onClick:()=>a(!0),className:"w-full p-3 mt-2 bg-background hover:bg-surface rounded-lg flex items-center justify-center gap-2 text-accent font-semibold transition-colors border border-dashed border-border",children:[u.jsx(lu,{size:18}),"Create New Project"]})]})};var Xt;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Xt||(Xt={}));var tG=new Map([[Xt.QR_CODE,"QR_CODE"],[Xt.AZTEC,"AZTEC"],[Xt.CODABAR,"CODABAR"],[Xt.CODE_39,"CODE_39"],[Xt.CODE_93,"CODE_93"],[Xt.CODE_128,"CODE_128"],[Xt.DATA_MATRIX,"DATA_MATRIX"],[Xt.MAXICODE,"MAXICODE"],[Xt.ITF,"ITF"],[Xt.EAN_13,"EAN_13"],[Xt.EAN_8,"EAN_8"],[Xt.PDF_417,"PDF_417"],[Xt.RSS_14,"RSS_14"],[Xt.RSS_EXPANDED,"RSS_EXPANDED"],[Xt.UPC_A,"UPC_A"],[Xt.UPC_E,"UPC_E"],[Xt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),rG;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(rG||(rG={}));function m5e(e){return Object.values(Xt).includes(e)}var tT;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(tT||(tT={}));var g5e=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[tT.SCAN_TYPE_CAMERA,tT.SCAN_TYPE_FILE],e}(),_oe=function(){function e(t,r){this.format=t,this.formatName=r}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!tG.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,tG.get(t))},e}(),nG=function(){function e(){}return e.createFromText=function(t){var r={text:t};return{decodedText:t,result:r}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),u8;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(u8||(u8={}));var x5e=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:u8.UNKWOWN_ERROR}},e}(),v5e=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,r){(this.verbose||r===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function Yf(e){return typeof e>"u"||e===null}var lv=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),Noe=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,r){if(typeof t!="object"){var n=typeof t;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],a=new Set(i),s=Object.keys(t),o=0,l=s;o<l.length;o++){var c=l[o];if(a.has(c))return r.logError("".concat(c," is not supported videoConstaints."),!0),!1}return!0},e}(),d8={exports:{}};(function(e,t){(function(r,n){n(t)})(Ve,function(r){function n(ae){return ae==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ae,h){ae.__proto__=h}||function(ae,h){for(var g in h)h.hasOwnProperty(g)&&(ae[g]=h[g])};function a(ae,h){i(ae,h);function g(){this.constructor=ae}ae.prototype=h===null?Object.create(h):(g.prototype=h.prototype,new g)}function s(ae,h){var g=Object.setPrototypeOf;g?g(ae,h):ae.__proto__=h}function o(ae,h){h===void 0&&(h=ae.constructor);var g=Error.captureStackTrace;g&&g(ae,h)}var l=function(ae){a(h,ae);function h(g){var y=this.constructor,E=ae.call(this,g)||this;return Object.defineProperty(E,"name",{value:y.name,enumerable:!1}),s(E,y.prototype),o(E),E}return h}(Error);class c extends l{constructor(h=void 0){super(h),this.message=h}getKind(){return this.constructor.kind}}c.kind="Exception";class d extends c{}d.kind="ArgumentException";class f extends c{}f.kind="IllegalArgumentException";class p{constructor(h){if(this.binarizer=h,h===null)throw new f("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(h,g){return this.binarizer.getBlackRow(h,g)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(h,g,y,E){const k=this.binarizer.getLuminanceSource().crop(h,g,y,E);return new p(this.binarizer.createBinarizer(k))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const h=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new p(this.binarizer.createBinarizer(h))}rotateCounterClockwise45(){const h=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new p(this.binarizer.createBinarizer(h))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class m extends c{static getChecksumInstance(){return new m}}m.kind="ChecksumException";class x{constructor(h){this.source=h}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class v{static arraycopy(h,g,y,E,k){for(;k--;)y[E++]=h[g++]}static currentTimeMillis(){return Date.now()}}class b extends c{}b.kind="IndexOutOfBoundsException";class w extends b{constructor(h=void 0,g=void 0){super(g),this.index=h,this.message=g}}w.kind="ArrayIndexOutOfBoundsException";class _{static fill(h,g){for(let y=0,E=h.length;y<E;y++)h[y]=g}static fillWithin(h,g,y,E){_.rangeCheck(h.length,g,y);for(let k=g;k<y;k++)h[k]=E}static rangeCheck(h,g,y){if(g>y)throw new f("fromIndex("+g+") > toIndex("+y+")");if(g<0)throw new w(g);if(y>h)throw new w(y)}static asList(...h){return h}static create(h,g,y){return Array.from({length:h}).map(k=>Array.from({length:g}).fill(y))}static createInt32Array(h,g,y){return Array.from({length:h}).map(k=>Int32Array.from({length:g}).fill(y))}static equals(h,g){if(!h||!g||!h.length||!g.length||h.length!==g.length)return!1;for(let y=0,E=h.length;y<E;y++)if(h[y]!==g[y])return!1;return!0}static hashCode(h){if(h===null)return 0;let g=1;for(const y of h)g=31*g+y;return g}static fillUint8Array(h,g){for(let y=0;y!==h.length;y++)h[y]=g}static copyOf(h,g){return h.slice(0,g)}static copyOfUint8Array(h,g){if(h.length<=g){const y=new Uint8Array(g);return y.set(h),y}return h.slice(0,g)}static copyOfRange(h,g,y){const E=y-g,k=new Int32Array(E);return v.arraycopy(h,g,k,0,E),k}static binarySearch(h,g,y){y===void 0&&(y=_.numberComparator);let E=0,k=h.length-1;for(;E<=k;){const T=k+E>>1,j=y(g,h[T]);if(j>0)E=T+1;else if(j<0)k=T-1;else return T}return-E-1}static numberComparator(h,g){return h-g}}class C{static numberOfTrailingZeros(h){let g;if(h===0)return 32;let y=31;return g=h<<16,g!==0&&(y-=16,h=g),g=h<<8,g!==0&&(y-=8,h=g),g=h<<4,g!==0&&(y-=4,h=g),g=h<<2,g!==0&&(y-=2,h=g),y-(h<<1>>>31)}static numberOfLeadingZeros(h){if(h===0)return 32;let g=1;return h>>>16||(g+=16,h<<=16),h>>>24||(g+=8,h<<=8),h>>>28||(g+=4,h<<=4),h>>>30||(g+=2,h<<=2),g-=h>>>31,g}static toHexString(h){return h.toString(16)}static toBinaryString(h){return String(parseInt(String(h),2))}static bitCount(h){return h=h-(h>>>1&1431655765),h=(h&858993459)+(h>>>2&858993459),h=h+(h>>>4)&252645135,h=h+(h>>>8),h=h+(h>>>16),h&63}static truncDivision(h,g){return Math.trunc(h/g)}static parseInt(h,g=void 0){return parseInt(h,g)}}C.MIN_VALUE_32_BITS=-2147483648,C.MAX_VALUE=Number.MAX_SAFE_INTEGER;class N{constructor(h,g){h===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=h,g==null?this.bits=N.makeArray(h):this.bits=g)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(h){if(h>this.bits.length*32){const g=N.makeArray(h);v.arraycopy(this.bits,0,g,0,this.bits.length),this.bits=g}}get(h){return(this.bits[Math.floor(h/32)]&1<<(h&31))!==0}set(h){this.bits[Math.floor(h/32)]|=1<<(h&31)}flip(h){this.bits[Math.floor(h/32)]^=1<<(h&31)}getNextSet(h){const g=this.size;if(h>=g)return g;const y=this.bits;let E=Math.floor(h/32),k=y[E];k&=~((1<<(h&31))-1);const T=y.length;for(;k===0;){if(++E===T)return g;k=y[E]}const j=E*32+C.numberOfTrailingZeros(k);return j>g?g:j}getNextUnset(h){const g=this.size;if(h>=g)return g;const y=this.bits;let E=Math.floor(h/32),k=~y[E];k&=~((1<<(h&31))-1);const T=y.length;for(;k===0;){if(++E===T)return g;k=~y[E]}const j=E*32+C.numberOfTrailingZeros(k);return j>g?g:j}setBulk(h,g){this.bits[Math.floor(h/32)]=g}setRange(h,g){if(g<h||h<0||g>this.size)throw new f;if(g===h)return;g--;const y=Math.floor(h/32),E=Math.floor(g/32),k=this.bits;for(let T=y;T<=E;T++){const j=T>y?0:h&31,z=(2<<(T<E?31:g&31))-(1<<j);k[T]|=z}}clear(){const h=this.bits.length,g=this.bits;for(let y=0;y<h;y++)g[y]=0}isRange(h,g,y){if(g<h||h<0||g>this.size)throw new f;if(g===h)return!0;g--;const E=Math.floor(h/32),k=Math.floor(g/32),T=this.bits;for(let j=E;j<=k;j++){const L=j>E?0:h&31,J=(2<<(j<k?31:g&31))-(1<<L)&4294967295;if((T[j]&J)!==(y?J:0))return!1}return!0}appendBit(h){this.ensureCapacity(this.size+1),h&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(h,g){if(g<0||g>32)throw new f("Num bits must be between 0 and 32");this.ensureCapacity(this.size+g);for(let y=g;y>0;y--)this.appendBit((h>>y-1&1)===1)}appendBitArray(h){const g=h.size;this.ensureCapacity(this.size+g);for(let y=0;y<g;y++)this.appendBit(h.get(y))}xor(h){if(this.size!==h.size)throw new f("Sizes don't match");const g=this.bits;for(let y=0,E=g.length;y<E;y++)g[y]^=h.bits[y]}toBytes(h,g,y,E){for(let k=0;k<E;k++){let T=0;for(let j=0;j<8;j++)this.get(h)&&(T|=1<<7-j),h++;g[y+k]=T}}getBitArray(){return this.bits}reverse(){const h=new Int32Array(this.bits.length),g=Math.floor((this.size-1)/32),y=g+1,E=this.bits;for(let k=0;k<y;k++){let T=E[k];T=T>>1&1431655765|(T&1431655765)<<1,T=T>>2&858993459|(T&858993459)<<2,T=T>>4&252645135|(T&252645135)<<4,T=T>>8&16711935|(T&16711935)<<8,T=T>>16&65535|(T&65535)<<16,h[g-k]=T}if(this.size!==y*32){const k=y*32-this.size;let T=h[0]>>>k;for(let j=1;j<y;j++){const L=h[j];T|=L<<32-k,h[j-1]=T,T=L>>>k}h[y-1]=T}this.bits=h}static makeArray(h){return new Int32Array(Math.floor((h+31)/32))}equals(h){if(!(h instanceof N))return!1;const g=h;return this.size===g.size&&_.equals(this.bits,g.bits)}hashCode(){return 31*this.size+_.hashCode(this.bits)}toString(){let h="";for(let g=0,y=this.size;g<y;g++)g&7||(h+=" "),h+=this.get(g)?"X":".";return h}clone(){return new N(this.size,this.bits.slice())}}var R;(function(ae){ae[ae.OTHER=0]="OTHER",ae[ae.PURE_BARCODE=1]="PURE_BARCODE",ae[ae.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",ae[ae.TRY_HARDER=3]="TRY_HARDER",ae[ae.CHARACTER_SET=4]="CHARACTER_SET",ae[ae.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",ae[ae.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",ae[ae.ASSUME_GS1=7]="ASSUME_GS1",ae[ae.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",ae[ae.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",ae[ae.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(R||(R={}));var P=R;class O extends c{static getFormatInstance(){return new O}}O.kind="FormatException";var D;(function(ae){ae[ae.Cp437=0]="Cp437",ae[ae.ISO8859_1=1]="ISO8859_1",ae[ae.ISO8859_2=2]="ISO8859_2",ae[ae.ISO8859_3=3]="ISO8859_3",ae[ae.ISO8859_4=4]="ISO8859_4",ae[ae.ISO8859_5=5]="ISO8859_5",ae[ae.ISO8859_6=6]="ISO8859_6",ae[ae.ISO8859_7=7]="ISO8859_7",ae[ae.ISO8859_8=8]="ISO8859_8",ae[ae.ISO8859_9=9]="ISO8859_9",ae[ae.ISO8859_10=10]="ISO8859_10",ae[ae.ISO8859_11=11]="ISO8859_11",ae[ae.ISO8859_13=12]="ISO8859_13",ae[ae.ISO8859_14=13]="ISO8859_14",ae[ae.ISO8859_15=14]="ISO8859_15",ae[ae.ISO8859_16=15]="ISO8859_16",ae[ae.SJIS=16]="SJIS",ae[ae.Cp1250=17]="Cp1250",ae[ae.Cp1251=18]="Cp1251",ae[ae.Cp1252=19]="Cp1252",ae[ae.Cp1256=20]="Cp1256",ae[ae.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",ae[ae.UTF8=22]="UTF8",ae[ae.ASCII=23]="ASCII",ae[ae.Big5=24]="Big5",ae[ae.GB18030=25]="GB18030",ae[ae.EUC_KR=26]="EUC_KR"})(D||(D={}));class M{constructor(h,g,y,...E){this.valueIdentifier=h,this.name=y,typeof g=="number"?this.values=Int32Array.from([g]):this.values=g,this.otherEncodingNames=E,M.VALUE_IDENTIFIER_TO_ECI.set(h,this),M.NAME_TO_ECI.set(y,this);const k=this.values;for(let T=0,j=k.length;T!==j;T++){const L=k[T];M.VALUES_TO_ECI.set(L,this)}for(const T of E)M.NAME_TO_ECI.set(T,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(h){if(h<0||h>=900)throw new O("incorect value");const g=M.VALUES_TO_ECI.get(h);if(g===void 0)throw new O("incorect value");return g}static getCharacterSetECIByName(h){const g=M.NAME_TO_ECI.get(h);if(g===void 0)throw new O("incorect value");return g}equals(h){if(!(h instanceof M))return!1;const g=h;return this.getName()===g.getName()}}M.VALUE_IDENTIFIER_TO_ECI=new Map,M.VALUES_TO_ECI=new Map,M.NAME_TO_ECI=new Map,M.Cp437=new M(D.Cp437,Int32Array.from([0,2]),"Cp437"),M.ISO8859_1=new M(D.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),M.ISO8859_2=new M(D.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),M.ISO8859_3=new M(D.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),M.ISO8859_4=new M(D.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),M.ISO8859_5=new M(D.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),M.ISO8859_6=new M(D.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),M.ISO8859_7=new M(D.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),M.ISO8859_8=new M(D.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),M.ISO8859_9=new M(D.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),M.ISO8859_10=new M(D.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),M.ISO8859_11=new M(D.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),M.ISO8859_13=new M(D.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),M.ISO8859_14=new M(D.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),M.ISO8859_15=new M(D.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),M.ISO8859_16=new M(D.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),M.SJIS=new M(D.SJIS,20,"SJIS","Shift_JIS"),M.Cp1250=new M(D.Cp1250,21,"Cp1250","windows-1250"),M.Cp1251=new M(D.Cp1251,22,"Cp1251","windows-1251"),M.Cp1252=new M(D.Cp1252,23,"Cp1252","windows-1252"),M.Cp1256=new M(D.Cp1256,24,"Cp1256","windows-1256"),M.UnicodeBigUnmarked=new M(D.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),M.UTF8=new M(D.UTF8,26,"UTF8","UTF-8"),M.ASCII=new M(D.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),M.Big5=new M(D.Big5,28,"Big5"),M.GB18030=new M(D.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),M.EUC_KR=new M(D.EUC_KR,30,"EUC_KR","EUC-KR");class B extends c{}B.kind="UnsupportedOperationException";class U{static decode(h,g){const y=this.encodingName(g);return this.customDecoder?this.customDecoder(h,y):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(y)?this.decodeFallback(h,y):new TextDecoder(y).decode(h)}static shouldDecodeOnFallback(h){return!U.isBrowser()&&h==="ISO-8859-1"}static encode(h,g){const y=this.encodingName(g);return this.customEncoder?this.customEncoder(h,y):typeof TextEncoder>"u"?this.encodeFallback(h):new TextEncoder().encode(h)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(h){return typeof h=="string"?h:h.getName()}static encodingCharacterSet(h){return h instanceof M?h:M.getCharacterSetECIByName(h)}static decodeFallback(h,g){const y=this.encodingCharacterSet(g);if(U.isDecodeFallbackSupported(y)){let E="";for(let k=0,T=h.length;k<T;k++){let j=h[k].toString(16);j.length<2&&(j="0"+j),E+="%"+j}return decodeURIComponent(E)}if(y.equals(M.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(h.buffer));throw new B(`Encoding ${this.encodingName(g)} not supported by fallback.`)}static isDecodeFallbackSupported(h){return h.equals(M.UTF8)||h.equals(M.ISO8859_1)||h.equals(M.ASCII)}static encodeFallback(h){const y=btoa(unescape(encodeURIComponent(h))).split(""),E=[];for(let k=0;k<y.length;k++)E.push(y[k].charCodeAt(0));return new Uint8Array(E)}}class H{static castAsNonUtf8Char(h,g=null){const y=g?g.getName():this.ISO88591;return U.decode(new Uint8Array([h]),y)}static guessEncoding(h,g){if(g!=null&&g.get(P.CHARACTER_SET)!==void 0)return g.get(P.CHARACTER_SET).toString();const y=h.length;let E=!0,k=!0,T=!0,j=0,L=0,z=0,J=0,oe=0,xe=0,Oe=0,ue=0,Ee=0,Te=0,Be=0;const ot=h.length>3&&h[0]===239&&h[1]===187&&h[2]===191;for(let gt=0;gt<y&&(E||k||T);gt++){const vt=h[gt]&255;T&&(j>0?vt&128?j--:T=!1:vt&128&&(vt&64?(j++,vt&32?(j++,vt&16?(j++,vt&8?T=!1:J++):z++):L++):T=!1)),E&&(vt>127&&vt<160?E=!1:vt>159&&(vt<192||vt===215||vt===247)&&Be++),k&&(oe>0?vt<64||vt===127||vt>252?k=!1:oe--:vt===128||vt===160||vt>239?k=!1:vt>160&&vt<224?(xe++,ue=0,Oe++,Oe>Ee&&(Ee=Oe)):vt>127?(oe++,Oe=0,ue++,ue>Te&&(Te=ue)):(Oe=0,ue=0))}return T&&j>0&&(T=!1),k&&oe>0&&(k=!1),T&&(ot||L+z+J>0)?H.UTF8:k&&(H.ASSUME_SHIFT_JIS||Ee>=3||Te>=3)?H.SHIFT_JIS:E&&k?Ee===2&&xe===2||Be*10>=y?H.SHIFT_JIS:H.ISO88591:E?H.ISO88591:k?H.SHIFT_JIS:T?H.UTF8:H.PLATFORM_DEFAULT_ENCODING}static format(h,...g){let y=-1;function E(T,j,L,z,J,oe){if(T==="%%")return"%";if(g[++y]===void 0)return;T=z?parseInt(z.substr(1)):void 0;let xe=J?parseInt(J.substr(1)):void 0,Oe;switch(oe){case"s":Oe=g[y];break;case"c":Oe=g[y][0];break;case"f":Oe=parseFloat(g[y]).toFixed(T);break;case"p":Oe=parseFloat(g[y]).toPrecision(T);break;case"e":Oe=parseFloat(g[y]).toExponential(T);break;case"x":Oe=parseInt(g[y]).toString(xe||16);break;case"d":Oe=parseFloat(parseInt(g[y],xe||10).toPrecision(T)).toFixed(0);break}Oe=typeof Oe=="object"?JSON.stringify(Oe):(+Oe).toString(xe);let ue=parseInt(L),Ee=L&&L[0]+""=="0"?"0":" ";for(;Oe.length<ue;)Oe=j!==void 0?Oe+Ee:Ee+Oe;return Oe}let k=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return h.replace(k,E)}static getBytes(h,g){return U.encode(h,g)}static getCharCode(h,g=0){return h.charCodeAt(g)}static getCharAt(h){return String.fromCharCode(h)}}H.SHIFT_JIS=M.SJIS.getName(),H.GB2312="GB2312",H.ISO88591=M.ISO8859_1.getName(),H.EUC_JP="EUC_JP",H.UTF8=M.UTF8.getName(),H.PLATFORM_DEFAULT_ENCODING=H.UTF8,H.ASSUME_SHIFT_JIS=!1;class Z{constructor(h=""){this.value=h}enableDecoding(h){return this.encoding=h,this}append(h){return typeof h=="string"?this.value+=h.toString():this.encoding?this.value+=H.castAsNonUtf8Char(h,this.encoding):this.value+=String.fromCharCode(h),this}appendChars(h,g,y){for(let E=g;g<g+y;E++)this.append(h[E]);return this}length(){return this.value.length}charAt(h){return this.value.charAt(h)}deleteCharAt(h){this.value=this.value.substr(0,h)+this.value.substring(h+1)}setCharAt(h,g){this.value=this.value.substr(0,h)+g+this.value.substr(h+1)}substring(h,g){return this.value.substring(h,g)}setLengthToZero(){this.value=""}toString(){return this.value}insert(h,g){this.value=this.value.substr(0,h)+g+this.value.substr(h+g.length)}}class ee{constructor(h,g,y,E){if(this.width=h,this.height=g,this.rowSize=y,this.bits=E,g==null&&(g=h),this.height=g,h<1||g<1)throw new f("Both dimensions must be greater than 0");y==null&&(y=Math.floor((h+31)/32)),this.rowSize=y,E==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(h){const g=h.length,y=h[0].length,E=new ee(y,g);for(let k=0;k<g;k++){const T=h[k];for(let j=0;j<y;j++)T[j]&&E.set(j,k)}return E}static parseFromString(h,g,y){if(h===null)throw new f("stringRepresentation cannot be null");const E=new Array(h.length);let k=0,T=0,j=-1,L=0,z=0;for(;z<h.length;)if(h.charAt(z)===`
`||h.charAt(z)==="\r"){if(k>T){if(j===-1)j=k-T;else if(k-T!==j)throw new f("row lengths do not match");T=k,L++}z++}else if(h.substring(z,z+g.length)===g)z+=g.length,E[k]=!0,k++;else if(h.substring(z,z+y.length)===y)z+=y.length,E[k]=!1,k++;else throw new f("illegal character encountered: "+h.substring(z));if(k>T){if(j===-1)j=k-T;else if(k-T!==j)throw new f("row lengths do not match");L++}const J=new ee(j,L);for(let oe=0;oe<k;oe++)E[oe]&&J.set(Math.floor(oe%j),Math.floor(oe/j));return J}get(h,g){const y=g*this.rowSize+Math.floor(h/32);return(this.bits[y]>>>(h&31)&1)!==0}set(h,g){const y=g*this.rowSize+Math.floor(h/32);this.bits[y]|=1<<(h&31)&4294967295}unset(h,g){const y=g*this.rowSize+Math.floor(h/32);this.bits[y]&=~(1<<(h&31)&4294967295)}flip(h,g){const y=g*this.rowSize+Math.floor(h/32);this.bits[y]^=1<<(h&31)&4294967295}xor(h){if(this.width!==h.getWidth()||this.height!==h.getHeight()||this.rowSize!==h.getRowSize())throw new f("input matrix dimensions do not match");const g=new N(Math.floor(this.width/32)+1),y=this.rowSize,E=this.bits;for(let k=0,T=this.height;k<T;k++){const j=k*y,L=h.getRow(k,g).getBitArray();for(let z=0;z<y;z++)E[j+z]^=L[z]}}clear(){const h=this.bits,g=h.length;for(let y=0;y<g;y++)h[y]=0}setRegion(h,g,y,E){if(g<0||h<0)throw new f("Left and top must be nonnegative");if(E<1||y<1)throw new f("Height and width must be at least 1");const k=h+y,T=g+E;if(T>this.height||k>this.width)throw new f("The region must fit inside the matrix");const j=this.rowSize,L=this.bits;for(let z=g;z<T;z++){const J=z*j;for(let oe=h;oe<k;oe++)L[J+Math.floor(oe/32)]|=1<<(oe&31)&4294967295}}getRow(h,g){g==null||g.getSize()<this.width?g=new N(this.width):g.clear();const y=this.rowSize,E=this.bits,k=h*y;for(let T=0;T<y;T++)g.setBulk(T*32,E[k+T]);return g}setRow(h,g){v.arraycopy(g.getBitArray(),0,this.bits,h*this.rowSize,this.rowSize)}rotate180(){const h=this.getWidth(),g=this.getHeight();let y=new N(h),E=new N(h);for(let k=0,T=Math.floor((g+1)/2);k<T;k++)y=this.getRow(k,y),E=this.getRow(g-1-k,E),y.reverse(),E.reverse(),this.setRow(k,E),this.setRow(g-1-k,y)}getEnclosingRectangle(){const h=this.width,g=this.height,y=this.rowSize,E=this.bits;let k=h,T=g,j=-1,L=-1;for(let z=0;z<g;z++)for(let J=0;J<y;J++){const oe=E[z*y+J];if(oe!==0){if(z<T&&(T=z),z>L&&(L=z),J*32<k){let xe=0;for(;!(oe<<31-xe&4294967295);)xe++;J*32+xe<k&&(k=J*32+xe)}if(J*32+31>j){let xe=31;for(;!(oe>>>xe);)xe--;J*32+xe>j&&(j=J*32+xe)}}}return j<k||L<T?null:Int32Array.from([k,T,j-k+1,L-T+1])}getTopLeftOnBit(){const h=this.rowSize,g=this.bits;let y=0;for(;y<g.length&&g[y]===0;)y++;if(y===g.length)return null;const E=y/h;let k=y%h*32;const T=g[y];let j=0;for(;!(T<<31-j&4294967295);)j++;return k+=j,Int32Array.from([k,E])}getBottomRightOnBit(){const h=this.rowSize,g=this.bits;let y=g.length-1;for(;y>=0&&g[y]===0;)y--;if(y<0)return null;const E=Math.floor(y/h);let k=Math.floor(y%h)*32;const T=g[y];let j=31;for(;!(T>>>j);)j--;return k+=j,Int32Array.from([k,E])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(h){if(!(h instanceof ee))return!1;const g=h;return this.width===g.width&&this.height===g.height&&this.rowSize===g.rowSize&&_.equals(this.bits,g.bits)}hashCode(){let h=this.width;return h=31*h+this.width,h=31*h+this.height,h=31*h+this.rowSize,h=31*h+_.hashCode(this.bits),h}toString(h="X ",g="  ",y=`
`){return this.buildToString(h,g,y)}buildToString(h,g,y){let E=new Z;for(let k=0,T=this.height;k<T;k++){for(let j=0,L=this.width;j<L;j++)E.append(this.get(j,k)?h:g);E.append(y)}return E.toString()}clone(){return new ee(this.width,this.height,this.rowSize,this.bits.slice())}}class V extends c{static getNotFoundInstance(){return new V}}V.kind="NotFoundException";class te extends x{constructor(h){super(h),this.luminances=te.EMPTY,this.buckets=new Int32Array(te.LUMINANCE_BUCKETS)}getBlackRow(h,g){const y=this.getLuminanceSource(),E=y.getWidth();g==null||g.getSize()<E?g=new N(E):g.clear(),this.initArrays(E);const k=y.getRow(h,this.luminances),T=this.buckets;for(let L=0;L<E;L++)T[(k[L]&255)>>te.LUMINANCE_SHIFT]++;const j=te.estimateBlackPoint(T);if(E<3)for(let L=0;L<E;L++)(k[L]&255)<j&&g.set(L);else{let L=k[0]&255,z=k[1]&255;for(let J=1;J<E-1;J++){const oe=k[J+1]&255;(z*4-L-oe)/2<j&&g.set(J),L=z,z=oe}}return g}getBlackMatrix(){const h=this.getLuminanceSource(),g=h.getWidth(),y=h.getHeight(),E=new ee(g,y);this.initArrays(g);const k=this.buckets;for(let L=1;L<5;L++){const z=Math.floor(y*L/5),J=h.getRow(z,this.luminances),oe=Math.floor(g*4/5);for(let xe=Math.floor(g/5);xe<oe;xe++){const Oe=J[xe]&255;k[Oe>>te.LUMINANCE_SHIFT]++}}const T=te.estimateBlackPoint(k),j=h.getMatrix();for(let L=0;L<y;L++){const z=L*g;for(let J=0;J<g;J++)(j[z+J]&255)<T&&E.set(J,L)}return E}createBinarizer(h){return new te(h)}initArrays(h){this.luminances.length<h&&(this.luminances=new Uint8ClampedArray(h));const g=this.buckets;for(let y=0;y<te.LUMINANCE_BUCKETS;y++)g[y]=0}static estimateBlackPoint(h){const g=h.length;let y=0,E=0,k=0;for(let J=0;J<g;J++)h[J]>k&&(E=J,k=h[J]),h[J]>y&&(y=h[J]);let T=0,j=0;for(let J=0;J<g;J++){const oe=J-E,xe=h[J]*oe*oe;xe>j&&(T=J,j=xe)}if(E>T){const J=E;E=T,T=J}if(T-E<=g/16)throw new V;let L=T-1,z=-1;for(let J=T-1;J>E;J--){const oe=J-E,xe=oe*oe*(T-J)*(y-h[J]);xe>z&&(L=J,z=xe)}return L<<te.LUMINANCE_SHIFT}}te.LUMINANCE_BITS=5,te.LUMINANCE_SHIFT=8-te.LUMINANCE_BITS,te.LUMINANCE_BUCKETS=1<<te.LUMINANCE_BITS,te.EMPTY=Uint8ClampedArray.from([0]);class se extends te{constructor(h){super(h),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const h=this.getLuminanceSource(),g=h.getWidth(),y=h.getHeight();if(g>=se.MINIMUM_DIMENSION&&y>=se.MINIMUM_DIMENSION){const E=h.getMatrix();let k=g>>se.BLOCK_SIZE_POWER;g&se.BLOCK_SIZE_MASK&&k++;let T=y>>se.BLOCK_SIZE_POWER;y&se.BLOCK_SIZE_MASK&&T++;const j=se.calculateBlackPoints(E,k,T,g,y),L=new ee(g,y);se.calculateThresholdForBlock(E,k,T,g,y,j,L),this.matrix=L}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(h){return new se(h)}static calculateThresholdForBlock(h,g,y,E,k,T,j){const L=k-se.BLOCK_SIZE,z=E-se.BLOCK_SIZE;for(let J=0;J<y;J++){let oe=J<<se.BLOCK_SIZE_POWER;oe>L&&(oe=L);const xe=se.cap(J,2,y-3);for(let Oe=0;Oe<g;Oe++){let ue=Oe<<se.BLOCK_SIZE_POWER;ue>z&&(ue=z);const Ee=se.cap(Oe,2,g-3);let Te=0;for(let ot=-2;ot<=2;ot++){const gt=T[xe+ot];Te+=gt[Ee-2]+gt[Ee-1]+gt[Ee]+gt[Ee+1]+gt[Ee+2]}const Be=Te/25;se.thresholdBlock(h,ue,oe,Be,E,j)}}}static cap(h,g,y){return h<g?g:h>y?y:h}static thresholdBlock(h,g,y,E,k,T){for(let j=0,L=y*k+g;j<se.BLOCK_SIZE;j++,L+=k)for(let z=0;z<se.BLOCK_SIZE;z++)(h[L+z]&255)<=E&&T.set(g+z,y+j)}static calculateBlackPoints(h,g,y,E,k){const T=k-se.BLOCK_SIZE,j=E-se.BLOCK_SIZE,L=new Array(y);for(let z=0;z<y;z++){L[z]=new Int32Array(g);let J=z<<se.BLOCK_SIZE_POWER;J>T&&(J=T);for(let oe=0;oe<g;oe++){let xe=oe<<se.BLOCK_SIZE_POWER;xe>j&&(xe=j);let Oe=0,ue=255,Ee=0;for(let Be=0,ot=J*E+xe;Be<se.BLOCK_SIZE;Be++,ot+=E){for(let gt=0;gt<se.BLOCK_SIZE;gt++){const vt=h[ot+gt]&255;Oe+=vt,vt<ue&&(ue=vt),vt>Ee&&(Ee=vt)}if(Ee-ue>se.MIN_DYNAMIC_RANGE)for(Be++,ot+=E;Be<se.BLOCK_SIZE;Be++,ot+=E)for(let gt=0;gt<se.BLOCK_SIZE;gt++)Oe+=h[ot+gt]&255}let Te=Oe>>se.BLOCK_SIZE_POWER*2;if(Ee-ue<=se.MIN_DYNAMIC_RANGE&&(Te=ue/2,z>0&&oe>0)){const Be=(L[z-1][oe]+2*L[z][oe-1]+L[z-1][oe-1])/4;ue<Be&&(Te=Be)}L[z][oe]=Te}}return L}}se.BLOCK_SIZE_POWER=3,se.BLOCK_SIZE=1<<se.BLOCK_SIZE_POWER,se.BLOCK_SIZE_MASK=se.BLOCK_SIZE-1,se.MINIMUM_DIMENSION=se.BLOCK_SIZE*5,se.MIN_DYNAMIC_RANGE=24;class Q{constructor(h,g){this.width=h,this.height=g}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(h,g,y,E){throw new B("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new B("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new B("This luminance source does not support rotation by 45 degrees.")}toString(){const h=new Uint8ClampedArray(this.width);let g=new Z;for(let y=0;y<this.height;y++){const E=this.getRow(y,h);for(let k=0;k<this.width;k++){const T=E[k]&255;let j;T<64?j="#":T<128?j="+":T<192?j=".":j=" ",g.append(j)}g.append(`
`)}return g.toString()}}class X extends Q{constructor(h){super(h.getWidth(),h.getHeight()),this.delegate=h}getRow(h,g){const y=this.delegate.getRow(h,g),E=this.getWidth();for(let k=0;k<E;k++)y[k]=255-(y[k]&255);return y}getMatrix(){const h=this.delegate.getMatrix(),g=this.getWidth()*this.getHeight(),y=new Uint8ClampedArray(g);for(let E=0;E<g;E++)y[E]=255-(h[E]&255);return y}isCropSupported(){return this.delegate.isCropSupported()}crop(h,g,y,E){return new X(this.delegate.crop(h,g,y,E))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new X(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new X(this.delegate.rotateCounterClockwise45())}}class fe extends Q{constructor(h){super(h.width,h.height),this.canvas=h,this.tempCanvasElement=null,this.buffer=fe.makeBufferFromCanvasImageData(h)}static makeBufferFromCanvasImageData(h){const g=h.getContext("2d").getImageData(0,0,h.width,h.height);return fe.toGrayscaleBuffer(g.data,h.width,h.height)}static toGrayscaleBuffer(h,g,y){const E=new Uint8ClampedArray(g*y);for(let k=0,T=0,j=h.length;k<j;k+=4,T++){let L;if(h[k+3]===0)L=255;else{const J=h[k],oe=h[k+1],xe=h[k+2];L=306*J+601*oe+117*xe+512>>10}E[T]=L}return E}getRow(h,g){if(h<0||h>=this.getHeight())throw new f("Requested row is outside the image: "+h);const y=this.getWidth(),E=h*y;return g===null?g=this.buffer.slice(E,E+y):(g.length<y&&(g=new Uint8ClampedArray(y)),g.set(this.buffer.slice(E,E+y))),g}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(h,g,y,E){return super.crop(h,g,y,E),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const h=this.canvas.ownerDocument.createElement("canvas");h.width=this.canvas.width,h.height=this.canvas.height,this.tempCanvasElement=h}return this.tempCanvasElement}rotate(h){const g=this.getTempCanvasElement(),y=g.getContext("2d"),E=h*fe.DEGREE_TO_RADIANS,k=this.canvas.width,T=this.canvas.height,j=Math.ceil(Math.abs(Math.cos(E))*k+Math.abs(Math.sin(E))*T),L=Math.ceil(Math.abs(Math.sin(E))*k+Math.abs(Math.cos(E))*T);return g.width=j,g.height=L,y.translate(j/2,L/2),y.rotate(E),y.drawImage(this.canvas,k/-2,T/-2),this.buffer=fe.makeBufferFromCanvasImageData(g),this}invert(){return new X(this)}}fe.DEGREE_TO_RADIANS=Math.PI/180;class Se{constructor(h,g,y){this.deviceId=h,this.label=g,this.kind="videoinput",this.groupId=y||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Y=(globalThis||Ve||self||window||void 0)&&(globalThis||Ve||self||window||void 0).__awaiter||function(ae,h,g,y){function E(k){return k instanceof g?k:new g(function(T){T(k)})}return new(g||(g=Promise))(function(k,T){function j(J){try{z(y.next(J))}catch(oe){T(oe)}}function L(J){try{z(y.throw(J))}catch(oe){T(oe)}}function z(J){J.done?k(J.value):E(J.value).then(j,L)}z((y=y.apply(ae,h||[])).next())})};class ce{constructor(h,g=500,y){this.reader=h,this.timeBetweenScansMillis=g,this._hints=y,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(h){this._timeBetweenDecodingAttempts=h<0?0:h}set hints(h){this._hints=h||null}get hints(){return this._hints}listVideoInputDevices(){return Y(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const h=yield navigator.mediaDevices.enumerateDevices(),g=[];for(const y of h){const E=y.kind==="video"?"videoinput":y.kind;if(E!=="videoinput")continue;const k=y.deviceId||y.id,T=y.label||`Video device ${g.length+1}`,j=y.groupId,L={deviceId:k,label:T,kind:E,groupId:j};g.push(L)}return g})}getVideoInputDevices(){return Y(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(g=>new Se(g.deviceId,g.label))})}findDeviceById(h){return Y(this,void 0,void 0,function*(){const g=yield this.listVideoInputDevices();return g?g.find(y=>y.deviceId===h):null})}decodeFromInputVideoDevice(h,g){return Y(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(h,g)})}decodeOnceFromVideoDevice(h,g){return Y(this,void 0,void 0,function*(){this.reset();let y;h?y={deviceId:{exact:h}}:y={facingMode:"environment"};const E={video:y};return yield this.decodeOnceFromConstraints(E,g)})}decodeOnceFromConstraints(h,g){return Y(this,void 0,void 0,function*(){const y=yield navigator.mediaDevices.getUserMedia(h);return yield this.decodeOnceFromStream(y,g)})}decodeOnceFromStream(h,g){return Y(this,void 0,void 0,function*(){this.reset();const y=yield this.attachStreamToVideo(h,g);return yield this.decodeOnce(y)})}decodeFromInputVideoDeviceContinuously(h,g,y){return Y(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(h,g,y)})}decodeFromVideoDevice(h,g,y){return Y(this,void 0,void 0,function*(){let E;h?E={deviceId:{exact:h}}:E={facingMode:"environment"};const k={video:E};return yield this.decodeFromConstraints(k,g,y)})}decodeFromConstraints(h,g,y){return Y(this,void 0,void 0,function*(){const E=yield navigator.mediaDevices.getUserMedia(h);return yield this.decodeFromStream(E,g,y)})}decodeFromStream(h,g,y){return Y(this,void 0,void 0,function*(){this.reset();const E=yield this.attachStreamToVideo(h,g);return yield this.decodeContinuously(E,y)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(h,g){return Y(this,void 0,void 0,function*(){const y=this.prepareVideoElement(g);return this.addVideoSource(y,h),this.videoElement=y,this.stream=h,yield this.playVideoOnLoadAsync(y),y})}playVideoOnLoadAsync(h){return new Promise((g,y)=>this.playVideoOnLoad(h,()=>g()))}playVideoOnLoad(h,g){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(h),h.addEventListener("ended",this.videoEndedListener),h.addEventListener("canplay",this.videoCanPlayListener),h.addEventListener("playing",g),this.tryPlayVideo(h)}isVideoPlaying(h){return h.currentTime>0&&!h.paused&&!h.ended&&h.readyState>2}tryPlayVideo(h){return Y(this,void 0,void 0,function*(){if(this.isVideoPlaying(h)){console.warn("Trying to play video that is already playing.");return}try{yield h.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(h,g){const y=document.getElementById(h);if(!y)throw new d(`element with id '${h}' not found`);if(y.nodeName.toLowerCase()!==g.toLowerCase())throw new d(`element with id '${h}' must be an ${g} element`);return y}decodeFromImage(h,g){if(!h&&!g)throw new d("either imageElement with a src set or an url must be provided");return g&&!h?this.decodeFromImageUrl(g):this.decodeFromImageElement(h)}decodeFromVideo(h,g){if(!h&&!g)throw new d("Either an element with a src set or an URL must be provided");return g&&!h?this.decodeFromVideoUrl(g):this.decodeFromVideoElement(h)}decodeFromVideoContinuously(h,g,y){if(h===void 0&&g===void 0)throw new d("Either an element with a src set or an URL must be provided");return g&&!h?this.decodeFromVideoUrlContinuously(g,y):this.decodeFromVideoElementContinuously(h,y)}decodeFromImageElement(h){if(!h)throw new d("An image element must be provided.");this.reset();const g=this.prepareImageElement(h);this.imageElement=g;let y;return this.isImageLoaded(g)?y=this.decodeOnce(g,!1,!0):y=this._decodeOnLoadImage(g),y}decodeFromVideoElement(h){const g=this._decodeFromVideoElementSetup(h);return this._decodeOnLoadVideo(g)}decodeFromVideoElementContinuously(h,g){const y=this._decodeFromVideoElementSetup(h);return this._decodeOnLoadVideoContinuously(y,g)}_decodeFromVideoElementSetup(h){if(!h)throw new d("A video element must be provided.");this.reset();const g=this.prepareVideoElement(h);return this.videoElement=g,g}decodeFromImageUrl(h){if(!h)throw new d("An URL must be provided.");this.reset();const g=this.prepareImageElement();this.imageElement=g;const y=this._decodeOnLoadImage(g);return g.src=h,y}decodeFromVideoUrl(h){if(!h)throw new d("An URL must be provided.");this.reset();const g=this.prepareVideoElement(),y=this.decodeFromVideoElement(g);return g.src=h,y}decodeFromVideoUrlContinuously(h,g){if(!h)throw new d("An URL must be provided.");this.reset();const y=this.prepareVideoElement(),E=this.decodeFromVideoElementContinuously(y,g);return y.src=h,E}_decodeOnLoadImage(h){return new Promise((g,y)=>{this.imageLoadedListener=()=>this.decodeOnce(h,!1,!0).then(g,y),h.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(h){return Y(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(h),yield this.decodeOnce(h)})}_decodeOnLoadVideoContinuously(h,g){return Y(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(h),this.decodeContinuously(h,g)})}isImageLoaded(h){return!(!h.complete||h.naturalWidth===0)}prepareImageElement(h){let g;return typeof h>"u"&&(g=document.createElement("img"),g.width=200,g.height=200),typeof h=="string"&&(g=this.getMediaElement(h,"img")),h instanceof HTMLImageElement&&(g=h),g}prepareVideoElement(h){let g;return!h&&typeof document<"u"&&(g=document.createElement("video"),g.width=200,g.height=200),typeof h=="string"&&(g=this.getMediaElement(h,"video")),h instanceof HTMLVideoElement&&(g=h),g.setAttribute("autoplay","true"),g.setAttribute("muted","true"),g.setAttribute("playsinline","true"),g}decodeOnce(h,g=!0,y=!0){this._stopAsyncDecode=!1;const E=(k,T)=>{if(this._stopAsyncDecode){T(new V("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const j=this.decode(h);k(j)}catch(j){const L=g&&j instanceof V,J=(j instanceof m||j instanceof O)&&y;if(L||J)return setTimeout(E,this._timeBetweenDecodingAttempts,k,T);T(j)}};return new Promise((k,T)=>E(k,T))}decodeContinuously(h,g){this._stopContinuousDecode=!1;const y=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const E=this.decode(h);g(E,null),setTimeout(y,this.timeBetweenScansMillis)}catch(E){g(null,E);const k=E instanceof m||E instanceof O,T=E instanceof V;(k||T)&&setTimeout(y,this._timeBetweenDecodingAttempts)}};y()}decode(h){const g=this.createBinaryBitmap(h);return this.decodeBitmap(g)}_isHTMLVideoElement(h){return h.videoWidth!==0}drawFrameOnCanvas(h,g,y){g||(g={sx:0,sy:0,sWidth:h.videoWidth,sHeight:h.videoHeight,dx:0,dy:0,dWidth:h.videoWidth,dHeight:h.videoHeight}),y||(y=this.captureCanvasContext),y.drawImage(h,g.sx,g.sy,g.sWidth,g.sHeight,g.dx,g.dy,g.dWidth,g.dHeight)}drawImageOnCanvas(h,g,y=this.captureCanvasContext){g||(g={sx:0,sy:0,sWidth:h.naturalWidth,sHeight:h.naturalHeight,dx:0,dy:0,dWidth:h.naturalWidth,dHeight:h.naturalHeight}),y||(y=this.captureCanvasContext),y.drawImage(h,g.sx,g.sy,g.sWidth,g.sHeight,g.dx,g.dy,g.dWidth,g.dHeight)}createBinaryBitmap(h){this.getCaptureCanvasContext(h),this._isHTMLVideoElement(h)?this.drawFrameOnCanvas(h):this.drawImageOnCanvas(h);const g=this.getCaptureCanvas(h),y=new fe(g),E=new se(y);return new p(E)}getCaptureCanvasContext(h){if(!this.captureCanvasContext){const y=this.getCaptureCanvas(h).getContext("2d");this.captureCanvasContext=y}return this.captureCanvasContext}getCaptureCanvas(h){if(!this.captureCanvas){const g=this.createCaptureCanvas(h);this.captureCanvas=g}return this.captureCanvas}decodeBitmap(h){return this.reader.decode(h,this._hints)}createCaptureCanvas(h){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const g=document.createElement("canvas");let y,E;return typeof h<"u"&&(h instanceof HTMLVideoElement?(y=h.videoWidth,E=h.videoHeight):h instanceof HTMLImageElement&&(y=h.naturalWidth||h.width,E=h.naturalHeight||h.height)),g.style.width=y+"px",g.style.height=E+"px",g.width=y,g.height=E,g}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(h=>h.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(h,g){try{h.srcObject=g}catch{h.src=URL.createObjectURL(g)}}cleanVideoSource(h){try{h.srcObject=null}catch{h.src=""}this.videoElement.removeAttribute("src")}}class W{constructor(h,g,y=g==null?0:8*g.length,E,k,T=v.currentTimeMillis()){this.text=h,this.rawBytes=g,this.numBits=y,this.resultPoints=E,this.format=k,this.timestamp=T,this.text=h,this.rawBytes=g,y==null?this.numBits=g==null?0:8*g.length:this.numBits=y,this.resultPoints=E,this.format=k,this.resultMetadata=null,T==null?this.timestamp=v.currentTimeMillis():this.timestamp=T}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(h,g){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(h,g)}putAllMetadata(h){h!==null&&(this.resultMetadata===null?this.resultMetadata=h:this.resultMetadata=new Map(h))}addResultPoints(h){const g=this.resultPoints;if(g===null)this.resultPoints=h;else if(h!==null&&h.length>0){const y=new Array(g.length+h.length);v.arraycopy(g,0,y,0,g.length),v.arraycopy(h,0,y,g.length,h.length),this.resultPoints=y}}getTimestamp(){return this.timestamp}toString(){return this.text}}var G;(function(ae){ae[ae.AZTEC=0]="AZTEC",ae[ae.CODABAR=1]="CODABAR",ae[ae.CODE_39=2]="CODE_39",ae[ae.CODE_93=3]="CODE_93",ae[ae.CODE_128=4]="CODE_128",ae[ae.DATA_MATRIX=5]="DATA_MATRIX",ae[ae.EAN_8=6]="EAN_8",ae[ae.EAN_13=7]="EAN_13",ae[ae.ITF=8]="ITF",ae[ae.MAXICODE=9]="MAXICODE",ae[ae.PDF_417=10]="PDF_417",ae[ae.QR_CODE=11]="QR_CODE",ae[ae.RSS_14=12]="RSS_14",ae[ae.RSS_EXPANDED=13]="RSS_EXPANDED",ae[ae.UPC_A=14]="UPC_A",ae[ae.UPC_E=15]="UPC_E",ae[ae.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(G||(G={}));var ie=G,Ce;(function(ae){ae[ae.OTHER=0]="OTHER",ae[ae.ORIENTATION=1]="ORIENTATION",ae[ae.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",ae[ae.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",ae[ae.ISSUE_NUMBER=4]="ISSUE_NUMBER",ae[ae.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",ae[ae.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",ae[ae.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",ae[ae.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",ae[ae.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",ae[ae.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ce||(Ce={}));var re=Ce;class ne{constructor(h,g,y,E,k=-1,T=-1){this.rawBytes=h,this.text=g,this.byteSegments=y,this.ecLevel=E,this.structuredAppendSequenceNumber=k,this.structuredAppendParity=T,this.numBits=h==null?0:8*h.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(h){this.numBits=h}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(h){this.errorsCorrected=h}getErasures(){return this.erasures}setErasures(h){this.erasures=h}getOther(){return this.other}setOther(h){this.other=h}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ge{exp(h){return this.expTable[h]}log(h){if(h===0)throw new f;return this.logTable[h]}static addOrSubtract(h,g){return h^g}}class we{constructor(h,g){if(g.length===0)throw new f;this.field=h;const y=g.length;if(y>1&&g[0]===0){let E=1;for(;E<y&&g[E]===0;)E++;E===y?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(y-E),v.arraycopy(g,E,this.coefficients,0,this.coefficients.length))}else this.coefficients=g}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(h){return this.coefficients[this.coefficients.length-1-h]}evaluateAt(h){if(h===0)return this.getCoefficient(0);const g=this.coefficients;let y;if(h===1){y=0;for(let T=0,j=g.length;T!==j;T++){const L=g[T];y=ge.addOrSubtract(y,L)}return y}y=g[0];const E=g.length,k=this.field;for(let T=1;T<E;T++)y=ge.addOrSubtract(k.multiply(h,y),g[T]);return y}addOrSubtract(h){if(!this.field.equals(h.field))throw new f("GenericGFPolys do not have same GenericGF field");if(this.isZero())return h;if(h.isZero())return this;let g=this.coefficients,y=h.coefficients;if(g.length>y.length){const T=g;g=y,y=T}let E=new Int32Array(y.length);const k=y.length-g.length;v.arraycopy(y,0,E,0,k);for(let T=k;T<y.length;T++)E[T]=ge.addOrSubtract(g[T-k],y[T]);return new we(this.field,E)}multiply(h){if(!this.field.equals(h.field))throw new f("GenericGFPolys do not have same GenericGF field");if(this.isZero()||h.isZero())return this.field.getZero();const g=this.coefficients,y=g.length,E=h.coefficients,k=E.length,T=new Int32Array(y+k-1),j=this.field;for(let L=0;L<y;L++){const z=g[L];for(let J=0;J<k;J++)T[L+J]=ge.addOrSubtract(T[L+J],j.multiply(z,E[J]))}return new we(j,T)}multiplyScalar(h){if(h===0)return this.field.getZero();if(h===1)return this;const g=this.coefficients.length,y=this.field,E=new Int32Array(g),k=this.coefficients;for(let T=0;T<g;T++)E[T]=y.multiply(k[T],h);return new we(y,E)}multiplyByMonomial(h,g){if(h<0)throw new f;if(g===0)return this.field.getZero();const y=this.coefficients,E=y.length,k=new Int32Array(E+h),T=this.field;for(let j=0;j<E;j++)k[j]=T.multiply(y[j],g);return new we(T,k)}divide(h){if(!this.field.equals(h.field))throw new f("GenericGFPolys do not have same GenericGF field");if(h.isZero())throw new f("Divide by 0");const g=this.field;let y=g.getZero(),E=this;const k=h.getCoefficient(h.getDegree()),T=g.inverse(k);for(;E.getDegree()>=h.getDegree()&&!E.isZero();){const j=E.getDegree()-h.getDegree(),L=g.multiply(E.getCoefficient(E.getDegree()),T),z=h.multiplyByMonomial(j,L),J=g.buildMonomial(j,L);y=y.addOrSubtract(J),E=E.addOrSubtract(z)}return[y,E]}toString(){let h="";for(let g=this.getDegree();g>=0;g--){let y=this.getCoefficient(g);if(y!==0){if(y<0?(h+=" - ",y=-y):h.length>0&&(h+=" + "),g===0||y!==1){const E=this.field.log(y);E===0?h+="1":E===1?h+="a":(h+="a^",h+=E)}g!==0&&(g===1?h+="x":(h+="x^",h+=g))}}return h}}class q extends c{}q.kind="ArithmeticException";class Ae extends ge{constructor(h,g,y){super(),this.primitive=h,this.size=g,this.generatorBase=y;const E=new Int32Array(g);let k=1;for(let j=0;j<g;j++)E[j]=k,k*=2,k>=g&&(k^=h,k&=g-1);this.expTable=E;const T=new Int32Array(g);for(let j=0;j<g-1;j++)T[E[j]]=j;this.logTable=T,this.zero=new we(this,Int32Array.from([0])),this.one=new we(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(h,g){if(h<0)throw new f;if(g===0)return this.zero;const y=new Int32Array(h+1);return y[0]=g,new we(this,y)}inverse(h){if(h===0)throw new q;return this.expTable[this.size-this.logTable[h]-1]}multiply(h,g){return h===0||g===0?0:this.expTable[(this.logTable[h]+this.logTable[g])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+C.toHexString(this.primitive)+","+this.size+")"}equals(h){return h===this}}Ae.AZTEC_DATA_12=new Ae(4201,4096,1),Ae.AZTEC_DATA_10=new Ae(1033,1024,1),Ae.AZTEC_DATA_6=new Ae(67,64,1),Ae.AZTEC_PARAM=new Ae(19,16,1),Ae.QR_CODE_FIELD_256=new Ae(285,256,0),Ae.DATA_MATRIX_FIELD_256=new Ae(301,256,1),Ae.AZTEC_DATA_8=Ae.DATA_MATRIX_FIELD_256,Ae.MAXICODE_FIELD_64=Ae.AZTEC_DATA_6;class Pe extends c{}Pe.kind="ReedSolomonException";class He extends c{}He.kind="IllegalStateException";class je{constructor(h){this.field=h}decode(h,g){const y=this.field,E=new we(y,h),k=new Int32Array(g);let T=!0;for(let Oe=0;Oe<g;Oe++){const ue=E.evaluateAt(y.exp(Oe+y.getGeneratorBase()));k[k.length-1-Oe]=ue,ue!==0&&(T=!1)}if(T)return;const j=new we(y,k),L=this.runEuclideanAlgorithm(y.buildMonomial(g,1),j,g),z=L[0],J=L[1],oe=this.findErrorLocations(z),xe=this.findErrorMagnitudes(J,oe);for(let Oe=0;Oe<oe.length;Oe++){const ue=h.length-1-y.log(oe[Oe]);if(ue<0)throw new Pe("Bad error location");h[ue]=Ae.addOrSubtract(h[ue],xe[Oe])}}runEuclideanAlgorithm(h,g,y){if(h.getDegree()<g.getDegree()){const Oe=h;h=g,g=Oe}const E=this.field;let k=h,T=g,j=E.getZero(),L=E.getOne();for(;T.getDegree()>=(y/2|0);){let Oe=k,ue=j;if(k=T,j=L,k.isZero())throw new Pe("r_{i-1} was zero");T=Oe;let Ee=E.getZero();const Te=k.getCoefficient(k.getDegree()),Be=E.inverse(Te);for(;T.getDegree()>=k.getDegree()&&!T.isZero();){const ot=T.getDegree()-k.getDegree(),gt=E.multiply(T.getCoefficient(T.getDegree()),Be);Ee=Ee.addOrSubtract(E.buildMonomial(ot,gt)),T=T.addOrSubtract(k.multiplyByMonomial(ot,gt))}if(L=Ee.multiply(j).addOrSubtract(ue),T.getDegree()>=k.getDegree())throw new He("Division algorithm failed to reduce polynomial?")}const z=L.getCoefficient(0);if(z===0)throw new Pe("sigmaTilde(0) was zero");const J=E.inverse(z),oe=L.multiplyScalar(J),xe=T.multiplyScalar(J);return[oe,xe]}findErrorLocations(h){const g=h.getDegree();if(g===1)return Int32Array.from([h.getCoefficient(1)]);const y=new Int32Array(g);let E=0;const k=this.field;for(let T=1;T<k.getSize()&&E<g;T++)h.evaluateAt(T)===0&&(y[E]=k.inverse(T),E++);if(E!==g)throw new Pe("Error locator degree does not match number of roots");return y}findErrorMagnitudes(h,g){const y=g.length,E=new Int32Array(y),k=this.field;for(let T=0;T<y;T++){const j=k.inverse(g[T]);let L=1;for(let z=0;z<y;z++)if(T!==z){const J=k.multiply(g[z],j),oe=J&1?J&-2:J|1;L=k.multiply(L,oe)}E[T]=k.multiply(h.evaluateAt(j),k.inverse(L)),k.getGeneratorBase()!==0&&(E[T]=k.multiply(E[T],j))}return E}}var $e;(function(ae){ae[ae.UPPER=0]="UPPER",ae[ae.LOWER=1]="LOWER",ae[ae.MIXED=2]="MIXED",ae[ae.DIGIT=3]="DIGIT",ae[ae.PUNCT=4]="PUNCT",ae[ae.BINARY=5]="BINARY"})($e||($e={}));class Ze{decode(h){this.ddata=h;let g=h.getBits(),y=this.extractBits(g),E=this.correctBits(y),k=Ze.convertBoolArrayToByteArray(E),T=Ze.getEncodedData(E),j=new ne(k,T,null,null);return j.setNumBits(E.length),j}static highLevelDecode(h){return this.getEncodedData(h)}static getEncodedData(h){let g=h.length,y=$e.UPPER,E=$e.UPPER,k="",T=0;for(;T<g;)if(E===$e.BINARY){if(g-T<5)break;let j=Ze.readCode(h,T,5);if(T+=5,j===0){if(g-T<11)break;j=Ze.readCode(h,T,11)+31,T+=11}for(let L=0;L<j;L++){if(g-T<8){T=g;break}const z=Ze.readCode(h,T,8);k+=H.castAsNonUtf8Char(z),T+=8}E=y}else{let j=E===$e.DIGIT?4:5;if(g-T<j)break;let L=Ze.readCode(h,T,j);T+=j;let z=Ze.getCharacter(E,L);z.startsWith("CTRL_")?(y=E,E=Ze.getTable(z.charAt(5)),z.charAt(6)==="L"&&(y=E)):(k+=z,E=y)}return k}static getTable(h){switch(h){case"L":return $e.LOWER;case"P":return $e.PUNCT;case"M":return $e.MIXED;case"D":return $e.DIGIT;case"B":return $e.BINARY;case"U":default:return $e.UPPER}}static getCharacter(h,g){switch(h){case $e.UPPER:return Ze.UPPER_TABLE[g];case $e.LOWER:return Ze.LOWER_TABLE[g];case $e.MIXED:return Ze.MIXED_TABLE[g];case $e.PUNCT:return Ze.PUNCT_TABLE[g];case $e.DIGIT:return Ze.DIGIT_TABLE[g];default:throw new He("Bad table")}}correctBits(h){let g,y;this.ddata.getNbLayers()<=2?(y=6,g=Ae.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(y=8,g=Ae.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(y=10,g=Ae.AZTEC_DATA_10):(y=12,g=Ae.AZTEC_DATA_12);let E=this.ddata.getNbDatablocks(),k=h.length/y;if(k<E)throw new O;let T=h.length%y,j=new Int32Array(k);for(let xe=0;xe<k;xe++,T+=y)j[xe]=Ze.readCode(h,T,y);try{new je(g).decode(j,k-E)}catch(xe){throw new O(xe)}let L=(1<<y)-1,z=0;for(let xe=0;xe<E;xe++){let Oe=j[xe];if(Oe===0||Oe===L)throw new O;(Oe===1||Oe===L-1)&&z++}let J=new Array(E*y-z),oe=0;for(let xe=0;xe<E;xe++){let Oe=j[xe];if(Oe===1||Oe===L-1)J.fill(Oe>1,oe,oe+y-1),oe+=y-1;else for(let ue=y-1;ue>=0;--ue)J[oe++]=(Oe&1<<ue)!==0}return J}extractBits(h){let g=this.ddata.isCompact(),y=this.ddata.getNbLayers(),E=(g?11:14)+y*4,k=new Int32Array(E),T=new Array(this.totalBitsInLayer(y,g));if(g)for(let j=0;j<k.length;j++)k[j]=j;else{let j=E+1+2*C.truncDivision(C.truncDivision(E,2)-1,15),L=E/2,z=C.truncDivision(j,2);for(let J=0;J<L;J++){let oe=J+C.truncDivision(J,15);k[L-J-1]=z-oe-1,k[L+J]=z+oe+1}}for(let j=0,L=0;j<y;j++){let z=(y-j)*4+(g?9:12),J=j*2,oe=E-1-J;for(let xe=0;xe<z;xe++){let Oe=xe*2;for(let ue=0;ue<2;ue++)T[L+Oe+ue]=h.get(k[J+ue],k[J+xe]),T[L+2*z+Oe+ue]=h.get(k[J+xe],k[oe-ue]),T[L+4*z+Oe+ue]=h.get(k[oe-ue],k[oe-xe]),T[L+6*z+Oe+ue]=h.get(k[oe-xe],k[J+ue])}L+=z*8}return T}static readCode(h,g,y){let E=0;for(let k=g;k<g+y;k++)E<<=1,h[k]&&(E|=1);return E}static readByte(h,g){let y=h.length-g;return y>=8?Ze.readCode(h,g,8):Ze.readCode(h,g,y)<<8-y}static convertBoolArrayToByteArray(h){let g=new Uint8Array((h.length+7)/8);for(let y=0;y<g.length;y++)g[y]=Ze.readByte(h,8*y);return g}totalBitsInLayer(h,g){return((g?88:112)+16*h)*h}}Ze.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ze.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ze.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ze.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ze.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class lt{constructor(){}static round(h){return h===NaN?0:h<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:h>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:h+(h<0?-.5:.5)|0}static distance(h,g,y,E){const k=h-y,T=g-E;return Math.sqrt(k*k+T*T)}static sum(h){let g=0;for(let y=0,E=h.length;y!==E;y++){const k=h[y];g+=k}return g}}class kt{static floatToIntBits(h){return h}}kt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ht{constructor(h,g){this.x=h,this.y=g}getX(){return this.x}getY(){return this.y}equals(h){if(h instanceof ht){const g=h;return this.x===g.x&&this.y===g.y}return!1}hashCode(){return 31*kt.floatToIntBits(this.x)+kt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(h){const g=this.distance(h[0],h[1]),y=this.distance(h[1],h[2]),E=this.distance(h[0],h[2]);let k,T,j;if(y>=g&&y>=E?(T=h[0],k=h[1],j=h[2]):E>=y&&E>=g?(T=h[1],k=h[0],j=h[2]):(T=h[2],k=h[0],j=h[1]),this.crossProductZ(k,T,j)<0){const L=k;k=j,j=L}h[0]=k,h[1]=T,h[2]=j}static distance(h,g){return lt.distance(h.x,h.y,g.x,g.y)}static crossProductZ(h,g,y){const E=g.x,k=g.y;return(y.x-E)*(h.y-k)-(y.y-k)*(h.x-E)}}class _r{constructor(h,g){this.bits=h,this.points=g}getBits(){return this.bits}getPoints(){return this.points}}class er extends _r{constructor(h,g,y,E,k){super(h,g),this.compact=y,this.nbDatablocks=E,this.nbLayers=k}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ct{constructor(h,g,y,E){this.image=h,this.height=h.getHeight(),this.width=h.getWidth(),g==null&&(g=ct.INIT_SIZE),y==null&&(y=h.getWidth()/2|0),E==null&&(E=h.getHeight()/2|0);const k=g/2|0;if(this.leftInit=y-k,this.rightInit=y+k,this.upInit=E-k,this.downInit=E+k,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new V}detect(){let h=this.leftInit,g=this.rightInit,y=this.upInit,E=this.downInit,k=!1,T=!0,j=!1,L=!1,z=!1,J=!1,oe=!1;const xe=this.width,Oe=this.height;for(;T;){T=!1;let ue=!0;for(;(ue||!L)&&g<xe;)ue=this.containsBlackPoint(y,E,g,!1),ue?(g++,T=!0,L=!0):L||g++;if(g>=xe){k=!0;break}let Ee=!0;for(;(Ee||!z)&&E<Oe;)Ee=this.containsBlackPoint(h,g,E,!0),Ee?(E++,T=!0,z=!0):z||E++;if(E>=Oe){k=!0;break}let Te=!0;for(;(Te||!J)&&h>=0;)Te=this.containsBlackPoint(y,E,h,!1),Te?(h--,T=!0,J=!0):J||h--;if(h<0){k=!0;break}let Be=!0;for(;(Be||!oe)&&y>=0;)Be=this.containsBlackPoint(h,g,y,!0),Be?(y--,T=!0,oe=!0):oe||y--;if(y<0){k=!0;break}T&&(j=!0)}if(!k&&j){const ue=g-h;let Ee=null;for(let gt=1;Ee===null&&gt<ue;gt++)Ee=this.getBlackPointOnSegment(h,E-gt,h+gt,E);if(Ee==null)throw new V;let Te=null;for(let gt=1;Te===null&&gt<ue;gt++)Te=this.getBlackPointOnSegment(h,y+gt,h+gt,y);if(Te==null)throw new V;let Be=null;for(let gt=1;Be===null&&gt<ue;gt++)Be=this.getBlackPointOnSegment(g,y+gt,g-gt,y);if(Be==null)throw new V;let ot=null;for(let gt=1;ot===null&&gt<ue;gt++)ot=this.getBlackPointOnSegment(g,E-gt,g-gt,E);if(ot==null)throw new V;return this.centerEdges(ot,Ee,Be,Te)}else throw new V}getBlackPointOnSegment(h,g,y,E){const k=lt.round(lt.distance(h,g,y,E)),T=(y-h)/k,j=(E-g)/k,L=this.image;for(let z=0;z<k;z++){const J=lt.round(h+z*T),oe=lt.round(g+z*j);if(L.get(J,oe))return new ht(J,oe)}return null}centerEdges(h,g,y,E){const k=h.getX(),T=h.getY(),j=g.getX(),L=g.getY(),z=y.getX(),J=y.getY(),oe=E.getX(),xe=E.getY(),Oe=ct.CORR;return k<this.width/2?[new ht(oe-Oe,xe+Oe),new ht(j+Oe,L+Oe),new ht(z-Oe,J-Oe),new ht(k+Oe,T-Oe)]:[new ht(oe+Oe,xe+Oe),new ht(j+Oe,L-Oe),new ht(z-Oe,J+Oe),new ht(k-Oe,T-Oe)]}containsBlackPoint(h,g,y,E){const k=this.image;if(E){for(let T=h;T<=g;T++)if(k.get(T,y))return!0}else for(let T=h;T<=g;T++)if(k.get(y,T))return!0;return!1}}ct.INIT_SIZE=10,ct.CORR=1;class Gt{static checkAndNudgePoints(h,g){const y=h.getWidth(),E=h.getHeight();let k=!0;for(let T=0;T<g.length&&k;T+=2){const j=Math.floor(g[T]),L=Math.floor(g[T+1]);if(j<-1||j>y||L<-1||L>E)throw new V;k=!1,j===-1?(g[T]=0,k=!0):j===y&&(g[T]=y-1,k=!0),L===-1?(g[T+1]=0,k=!0):L===E&&(g[T+1]=E-1,k=!0)}k=!0;for(let T=g.length-2;T>=0&&k;T-=2){const j=Math.floor(g[T]),L=Math.floor(g[T+1]);if(j<-1||j>y||L<-1||L>E)throw new V;k=!1,j===-1?(g[T]=0,k=!0):j===y&&(g[T]=y-1,k=!0),L===-1?(g[T+1]=0,k=!0):L===E&&(g[T+1]=E-1,k=!0)}}}class Lt{constructor(h,g,y,E,k,T,j,L,z){this.a11=h,this.a21=g,this.a31=y,this.a12=E,this.a22=k,this.a32=T,this.a13=j,this.a23=L,this.a33=z}static quadrilateralToQuadrilateral(h,g,y,E,k,T,j,L,z,J,oe,xe,Oe,ue,Ee,Te){const Be=Lt.quadrilateralToSquare(h,g,y,E,k,T,j,L);return Lt.squareToQuadrilateral(z,J,oe,xe,Oe,ue,Ee,Te).times(Be)}transformPoints(h){const g=h.length,y=this.a11,E=this.a12,k=this.a13,T=this.a21,j=this.a22,L=this.a23,z=this.a31,J=this.a32,oe=this.a33;for(let xe=0;xe<g;xe+=2){const Oe=h[xe],ue=h[xe+1],Ee=k*Oe+L*ue+oe;h[xe]=(y*Oe+T*ue+z)/Ee,h[xe+1]=(E*Oe+j*ue+J)/Ee}}transformPointsWithValues(h,g){const y=this.a11,E=this.a12,k=this.a13,T=this.a21,j=this.a22,L=this.a23,z=this.a31,J=this.a32,oe=this.a33,xe=h.length;for(let Oe=0;Oe<xe;Oe++){const ue=h[Oe],Ee=g[Oe],Te=k*ue+L*Ee+oe;h[Oe]=(y*ue+T*Ee+z)/Te,g[Oe]=(E*ue+j*Ee+J)/Te}}static squareToQuadrilateral(h,g,y,E,k,T,j,L){const z=h-y+k-j,J=g-E+T-L;if(z===0&&J===0)return new Lt(y-h,k-y,h,E-g,T-E,g,0,0,1);{const oe=y-k,xe=j-k,Oe=E-T,ue=L-T,Ee=oe*ue-xe*Oe,Te=(z*ue-xe*J)/Ee,Be=(oe*J-z*Oe)/Ee;return new Lt(y-h+Te*y,j-h+Be*j,h,E-g+Te*E,L-g+Be*L,g,Te,Be,1)}}static quadrilateralToSquare(h,g,y,E,k,T,j,L){return Lt.squareToQuadrilateral(h,g,y,E,k,T,j,L).buildAdjoint()}buildAdjoint(){return new Lt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(h){return new Lt(this.a11*h.a11+this.a21*h.a12+this.a31*h.a13,this.a11*h.a21+this.a21*h.a22+this.a31*h.a23,this.a11*h.a31+this.a21*h.a32+this.a31*h.a33,this.a12*h.a11+this.a22*h.a12+this.a32*h.a13,this.a12*h.a21+this.a22*h.a22+this.a32*h.a23,this.a12*h.a31+this.a22*h.a32+this.a32*h.a33,this.a13*h.a11+this.a23*h.a12+this.a33*h.a13,this.a13*h.a21+this.a23*h.a22+this.a33*h.a23,this.a13*h.a31+this.a23*h.a32+this.a33*h.a33)}}class dr extends Gt{sampleGrid(h,g,y,E,k,T,j,L,z,J,oe,xe,Oe,ue,Ee,Te,Be,ot,gt){const vt=Lt.quadrilateralToQuadrilateral(E,k,T,j,L,z,J,oe,xe,Oe,ue,Ee,Te,Be,ot,gt);return this.sampleGridWithTransform(h,g,y,vt)}sampleGridWithTransform(h,g,y,E){if(g<=0||y<=0)throw new V;const k=new ee(g,y),T=new Float32Array(2*g);for(let j=0;j<y;j++){const L=T.length,z=j+.5;for(let J=0;J<L;J+=2)T[J]=J/2+.5,T[J+1]=z;E.transformPoints(T),Gt.checkAndNudgePoints(h,T);try{for(let J=0;J<L;J+=2)h.get(Math.floor(T[J]),Math.floor(T[J+1]))&&k.set(J/2,j)}catch{throw new V}}return k}}class Ht{static setGridSampler(h){Ht.gridSampler=h}static getInstance(){return Ht.gridSampler}}Ht.gridSampler=new dr;class ye{constructor(h,g){this.x=h,this.y=g}toResultPoint(){return new ht(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Me{constructor(h){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=h}detect(){return this.detectMirror(!1)}detectMirror(h){let g=this.getMatrixCenter(),y=this.getBullsEyeCorners(g);if(h){let T=y[0];y[0]=y[2],y[2]=T}this.extractParameters(y);let E=this.sampleGrid(this.image,y[this.shift%4],y[(this.shift+1)%4],y[(this.shift+2)%4],y[(this.shift+3)%4]),k=this.getMatrixCornerPoints(y);return new er(E,k,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(h){if(!this.isValidPoint(h[0])||!this.isValidPoint(h[1])||!this.isValidPoint(h[2])||!this.isValidPoint(h[3]))throw new V;let g=2*this.nbCenterLayers,y=new Int32Array([this.sampleLine(h[0],h[1],g),this.sampleLine(h[1],h[2],g),this.sampleLine(h[2],h[3],g),this.sampleLine(h[3],h[0],g)]);this.shift=this.getRotation(y,g);let E=0;for(let T=0;T<4;T++){let j=y[(this.shift+T)%4];this.compact?(E<<=7,E+=j>>1&127):(E<<=10,E+=(j>>2&992)+(j>>1&31))}let k=this.getCorrectedParameterData(E,this.compact);this.compact?(this.nbLayers=(k>>6)+1,this.nbDataBlocks=(k&63)+1):(this.nbLayers=(k>>11)+1,this.nbDataBlocks=(k&2047)+1)}getRotation(h,g){let y=0;h.forEach((E,k,T)=>{let j=(E>>g-2<<1)+(E&1);y=(y<<3)+j}),y=((y&1)<<11)+(y>>1);for(let E=0;E<4;E++)if(C.bitCount(y^this.EXPECTED_CORNER_BITS[E])<=2)return E;throw new V}getCorrectedParameterData(h,g){let y,E;g?(y=7,E=2):(y=10,E=4);let k=y-E,T=new Int32Array(y);for(let L=y-1;L>=0;--L)T[L]=h&15,h>>=4;try{new je(Ae.AZTEC_PARAM).decode(T,k)}catch{throw new V}let j=0;for(let L=0;L<E;L++)j=(j<<4)+T[L];return j}getBullsEyeCorners(h){let g=h,y=h,E=h,k=h,T=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let oe=this.getFirstDifferent(g,T,1,-1),xe=this.getFirstDifferent(y,T,1,1),Oe=this.getFirstDifferent(E,T,-1,1),ue=this.getFirstDifferent(k,T,-1,-1);if(this.nbCenterLayers>2){let Ee=this.distancePoint(ue,oe)*this.nbCenterLayers/(this.distancePoint(k,g)*(this.nbCenterLayers+2));if(Ee<.75||Ee>1.25||!this.isWhiteOrBlackRectangle(oe,xe,Oe,ue))break}g=oe,y=xe,E=Oe,k=ue,T=!T}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new V;this.compact=this.nbCenterLayers===5;let j=new ht(g.getX()+.5,g.getY()-.5),L=new ht(y.getX()+.5,y.getY()+.5),z=new ht(E.getX()-.5,E.getY()+.5),J=new ht(k.getX()-.5,k.getY()-.5);return this.expandSquare([j,L,z,J],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let h,g,y,E;try{let j=new ct(this.image).detect();h=j[0],g=j[1],y=j[2],E=j[3]}catch{let L=this.image.getWidth()/2,z=this.image.getHeight()/2;h=this.getFirstDifferent(new ye(L+7,z-7),!1,1,-1).toResultPoint(),g=this.getFirstDifferent(new ye(L+7,z+7),!1,1,1).toResultPoint(),y=this.getFirstDifferent(new ye(L-7,z+7),!1,-1,1).toResultPoint(),E=this.getFirstDifferent(new ye(L-7,z-7),!1,-1,-1).toResultPoint()}let k=lt.round((h.getX()+E.getX()+g.getX()+y.getX())/4),T=lt.round((h.getY()+E.getY()+g.getY()+y.getY())/4);try{let j=new ct(this.image,15,k,T).detect();h=j[0],g=j[1],y=j[2],E=j[3]}catch{h=this.getFirstDifferent(new ye(k+7,T-7),!1,1,-1).toResultPoint(),g=this.getFirstDifferent(new ye(k+7,T+7),!1,1,1).toResultPoint(),y=this.getFirstDifferent(new ye(k-7,T+7),!1,-1,1).toResultPoint(),E=this.getFirstDifferent(new ye(k-7,T-7),!1,-1,-1).toResultPoint()}return k=lt.round((h.getX()+E.getX()+g.getX()+y.getX())/4),T=lt.round((h.getY()+E.getY()+g.getY()+y.getY())/4),new ye(k,T)}getMatrixCornerPoints(h){return this.expandSquare(h,2*this.nbCenterLayers,this.getDimension())}sampleGrid(h,g,y,E,k){let T=Ht.getInstance(),j=this.getDimension(),L=j/2-this.nbCenterLayers,z=j/2+this.nbCenterLayers;return T.sampleGrid(h,j,j,L,L,z,L,z,z,L,z,g.getX(),g.getY(),y.getX(),y.getY(),E.getX(),E.getY(),k.getX(),k.getY())}sampleLine(h,g,y){let E=0,k=this.distanceResultPoint(h,g),T=k/y,j=h.getX(),L=h.getY(),z=T*(g.getX()-h.getX())/k,J=T*(g.getY()-h.getY())/k;for(let oe=0;oe<y;oe++)this.image.get(lt.round(j+oe*z),lt.round(L+oe*J))&&(E|=1<<y-oe-1);return E}isWhiteOrBlackRectangle(h,g,y,E){let k=3;h=new ye(h.getX()-k,h.getY()+k),g=new ye(g.getX()-k,g.getY()-k),y=new ye(y.getX()+k,y.getY()-k),E=new ye(E.getX()+k,E.getY()+k);let T=this.getColor(E,h);if(T===0)return!1;let j=this.getColor(h,g);return j!==T||(j=this.getColor(g,y),j!==T)?!1:(j=this.getColor(y,E),j===T)}getColor(h,g){let y=this.distancePoint(h,g),E=(g.getX()-h.getX())/y,k=(g.getY()-h.getY())/y,T=0,j=h.getX(),L=h.getY(),z=this.image.get(h.getX(),h.getY()),J=Math.ceil(y);for(let xe=0;xe<J;xe++)j+=E,L+=k,this.image.get(lt.round(j),lt.round(L))!==z&&T++;let oe=T/y;return oe>.1&&oe<.9?0:oe<=.1===z?1:-1}getFirstDifferent(h,g,y,E){let k=h.getX()+y,T=h.getY()+E;for(;this.isValid(k,T)&&this.image.get(k,T)===g;)k+=y,T+=E;for(k-=y,T-=E;this.isValid(k,T)&&this.image.get(k,T)===g;)k+=y;for(k-=y;this.isValid(k,T)&&this.image.get(k,T)===g;)T+=E;return T-=E,new ye(k,T)}expandSquare(h,g,y){let E=y/(2*g),k=h[0].getX()-h[2].getX(),T=h[0].getY()-h[2].getY(),j=(h[0].getX()+h[2].getX())/2,L=(h[0].getY()+h[2].getY())/2,z=new ht(j+E*k,L+E*T),J=new ht(j-E*k,L-E*T);k=h[1].getX()-h[3].getX(),T=h[1].getY()-h[3].getY(),j=(h[1].getX()+h[3].getX())/2,L=(h[1].getY()+h[3].getY())/2;let oe=new ht(j+E*k,L+E*T),xe=new ht(j-E*k,L-E*T);return[z,oe,J,xe]}isValid(h,g){return h>=0&&h<this.image.getWidth()&&g>0&&g<this.image.getHeight()}isValidPoint(h){let g=lt.round(h.getX()),y=lt.round(h.getY());return this.isValid(g,y)}distancePoint(h,g){return lt.distance(h.getX(),h.getY(),g.getX(),g.getY())}distanceResultPoint(h,g){return lt.distance(h.getX(),h.getY(),g.getX(),g.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(C.truncDivision(this.nbLayers-4,8)+1)+15}}class qe{decode(h,g=null){let y=null,E=new Me(h.getBlackMatrix()),k=null,T=null;try{let J=E.detectMirror(!1);k=J.getPoints(),this.reportFoundResultPoints(g,k),T=new Ze().decode(J)}catch(J){y=J}if(T==null)try{let J=E.detectMirror(!0);k=J.getPoints(),this.reportFoundResultPoints(g,k),T=new Ze().decode(J)}catch(J){throw y??J}let j=new W(T.getText(),T.getRawBytes(),T.getNumBits(),k,ie.AZTEC,v.currentTimeMillis()),L=T.getByteSegments();L!=null&&j.putMetadata(re.BYTE_SEGMENTS,L);let z=T.getECLevel();return z!=null&&j.putMetadata(re.ERROR_CORRECTION_LEVEL,z),j}reportFoundResultPoints(h,g){if(h!=null){let y=h.get(P.NEED_RESULT_POINT_CALLBACK);y!=null&&g.forEach((E,k,T)=>{y.foundPossibleResultPoint(E)})}}reset(){}}class it extends ce{constructor(h=500){super(new qe,h)}}class ze{decode(h,g){try{return this.doDecode(h,g)}catch{if(g&&g.get(P.TRY_HARDER)===!0&&h.isRotateSupported()){const k=h.rotateCounterClockwise(),T=this.doDecode(k,g),j=T.getResultMetadata();let L=270;j!==null&&j.get(re.ORIENTATION)===!0&&(L=L+j.get(re.ORIENTATION)%360),T.putMetadata(re.ORIENTATION,L);const z=T.getResultPoints();if(z!==null){const J=k.getHeight();for(let oe=0;oe<z.length;oe++)z[oe]=new ht(J-z[oe].getY()-1,z[oe].getX())}return T}else throw new V}}reset(){}doDecode(h,g){const y=h.getWidth(),E=h.getHeight();let k=new N(y);const T=g&&g.get(P.TRY_HARDER)===!0,j=Math.max(1,E>>(T?8:5));let L;T?L=E:L=15;const z=Math.trunc(E/2);for(let J=0;J<L;J++){const oe=Math.trunc((J+1)/2),xe=(J&1)===0,Oe=z+j*(xe?oe:-oe);if(Oe<0||Oe>=E)break;try{k=h.getBlackRow(Oe,k)}catch{continue}for(let ue=0;ue<2;ue++){if(ue===1&&(k.reverse(),g&&g.get(P.NEED_RESULT_POINT_CALLBACK)===!0)){const Ee=new Map;g.forEach((Te,Be)=>Ee.set(Be,Te)),Ee.delete(P.NEED_RESULT_POINT_CALLBACK),g=Ee}try{const Ee=this.decodeRow(Oe,k,g);if(ue===1){Ee.putMetadata(re.ORIENTATION,180);const Te=Ee.getResultPoints();Te!==null&&(Te[0]=new ht(y-Te[0].getX()-1,Te[0].getY()),Te[1]=new ht(y-Te[1].getX()-1,Te[1].getY()))}return Ee}catch{}}}throw new V}static recordPattern(h,g,y){const E=y.length;for(let z=0;z<E;z++)y[z]=0;const k=h.getSize();if(g>=k)throw new V;let T=!h.get(g),j=0,L=g;for(;L<k;){if(h.get(L)!==T)y[j]++;else{if(++j===E)break;y[j]=1,T=!T}L++}if(!(j===E||j===E-1&&L===k))throw new V}static recordPatternInReverse(h,g,y){let E=y.length,k=h.get(g);for(;g>0&&E>=0;)h.get(--g)!==k&&(E--,k=!k);if(E>=0)throw new V;ze.recordPattern(h,g+1,y)}static patternMatchVariance(h,g,y){const E=h.length;let k=0,T=0;for(let z=0;z<E;z++)k+=h[z],T+=g[z];if(k<T)return Number.POSITIVE_INFINITY;const j=k/T;y*=j;let L=0;for(let z=0;z<E;z++){const J=h[z],oe=g[z]*j,xe=J>oe?J-oe:oe-J;if(xe>y)return Number.POSITIVE_INFINITY;L+=xe}return L/k}}class _e extends ze{static findStartPattern(h){const g=h.getSize(),y=h.getNextSet(0);let E=0,k=Int32Array.from([0,0,0,0,0,0]),T=y,j=!1;const L=6;for(let z=y;z<g;z++)if(h.get(z)!==j)k[E]++;else{if(E===L-1){let J=_e.MAX_AVG_VARIANCE,oe=-1;for(let xe=_e.CODE_START_A;xe<=_e.CODE_START_C;xe++){const Oe=ze.patternMatchVariance(k,_e.CODE_PATTERNS[xe],_e.MAX_INDIVIDUAL_VARIANCE);Oe<J&&(J=Oe,oe=xe)}if(oe>=0&&h.isRange(Math.max(0,T-(z-T)/2),T,!1))return Int32Array.from([T,z,oe]);T+=k[0]+k[1],k=k.slice(2,k.length-1),k[E-1]=0,k[E]=0,E--}else E++;k[E]=1,j=!j}throw new V}static decodeCode(h,g,y){ze.recordPattern(h,y,g);let E=_e.MAX_AVG_VARIANCE,k=-1;for(let T=0;T<_e.CODE_PATTERNS.length;T++){const j=_e.CODE_PATTERNS[T],L=this.patternMatchVariance(g,j,_e.MAX_INDIVIDUAL_VARIANCE);L<E&&(E=L,k=T)}if(k>=0)return k;throw new V}decodeRow(h,g,y){const E=y&&y.get(P.ASSUME_GS1)===!0,k=_e.findStartPattern(g),T=k[2];let j=0;const L=new Uint8Array(20);L[j++]=T;let z;switch(T){case _e.CODE_START_A:z=_e.CODE_CODE_A;break;case _e.CODE_START_B:z=_e.CODE_CODE_B;break;case _e.CODE_START_C:z=_e.CODE_CODE_C;break;default:throw new O}let J=!1,oe=!1,xe="",Oe=k[0],ue=k[1];const Ee=Int32Array.from([0,0,0,0,0,0]);let Te=0,Be=0,ot=T,gt=0,vt=!0,Zt=!1,Fr=!1;for(;!J;){const kn=oe;switch(oe=!1,Te=Be,Be=_e.decodeCode(g,Ee,ue),L[j++]=Be,Be!==_e.CODE_STOP&&(vt=!0),Be!==_e.CODE_STOP&&(gt++,ot+=gt*Be),Oe=ue,ue+=Ee.reduce((jP,nk)=>jP+nk,0),Be){case _e.CODE_START_A:case _e.CODE_START_B:case _e.CODE_START_C:throw new O}switch(z){case _e.CODE_CODE_A:if(Be<64)Fr===Zt?xe+=String.fromCharCode(32+Be):xe+=String.fromCharCode(32+Be+128),Fr=!1;else if(Be<96)Fr===Zt?xe+=String.fromCharCode(Be-64):xe+=String.fromCharCode(Be+64),Fr=!1;else switch(Be!==_e.CODE_STOP&&(vt=!1),Be){case _e.CODE_FNC_1:E&&(xe.length===0?xe+="]C1":xe+="");break;case _e.CODE_FNC_2:case _e.CODE_FNC_3:break;case _e.CODE_FNC_4_A:!Zt&&Fr?(Zt=!0,Fr=!1):Zt&&Fr?(Zt=!1,Fr=!1):Fr=!0;break;case _e.CODE_SHIFT:oe=!0,z=_e.CODE_CODE_B;break;case _e.CODE_CODE_B:z=_e.CODE_CODE_B;break;case _e.CODE_CODE_C:z=_e.CODE_CODE_C;break;case _e.CODE_STOP:J=!0;break}break;case _e.CODE_CODE_B:if(Be<96)Fr===Zt?xe+=String.fromCharCode(32+Be):xe+=String.fromCharCode(32+Be+128),Fr=!1;else switch(Be!==_e.CODE_STOP&&(vt=!1),Be){case _e.CODE_FNC_1:E&&(xe.length===0?xe+="]C1":xe+="");break;case _e.CODE_FNC_2:case _e.CODE_FNC_3:break;case _e.CODE_FNC_4_B:!Zt&&Fr?(Zt=!0,Fr=!1):Zt&&Fr?(Zt=!1,Fr=!1):Fr=!0;break;case _e.CODE_SHIFT:oe=!0,z=_e.CODE_CODE_A;break;case _e.CODE_CODE_A:z=_e.CODE_CODE_A;break;case _e.CODE_CODE_C:z=_e.CODE_CODE_C;break;case _e.CODE_STOP:J=!0;break}break;case _e.CODE_CODE_C:if(Be<100)Be<10&&(xe+="0"),xe+=Be;else switch(Be!==_e.CODE_STOP&&(vt=!1),Be){case _e.CODE_FNC_1:E&&(xe.length===0?xe+="]C1":xe+="");break;case _e.CODE_CODE_A:z=_e.CODE_CODE_A;break;case _e.CODE_CODE_B:z=_e.CODE_CODE_B;break;case _e.CODE_STOP:J=!0;break}break}kn&&(z=z===_e.CODE_CODE_A?_e.CODE_CODE_B:_e.CODE_CODE_A)}const Ws=ue-Oe;if(ue=g.getNextUnset(ue),!g.isRange(ue,Math.min(g.getSize(),ue+(ue-Oe)/2),!1))throw new V;if(ot-=gt*Te,ot%103!==Te)throw new m;const Ti=xe.length;if(Ti===0)throw new V;Ti>0&&vt&&(z===_e.CODE_CODE_C?xe=xe.substring(0,Ti-2):xe=xe.substring(0,Ti-1));const Fa=(k[1]+k[0])/2,Yn=Oe+Ws/2,Ii=L.length,Qa=new Uint8Array(Ii);for(let kn=0;kn<Ii;kn++)Qa[kn]=L[kn];const ku=[new ht(Fa,h),new ht(Yn,h)];return new W(xe,Qa,0,ku,ie.CODE_128,new Date().getTime())}}_e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],_e.MAX_AVG_VARIANCE=.25,_e.MAX_INDIVIDUAL_VARIANCE=.7,_e.CODE_SHIFT=98,_e.CODE_CODE_C=99,_e.CODE_CODE_B=100,_e.CODE_CODE_A=101,_e.CODE_FNC_1=102,_e.CODE_FNC_2=97,_e.CODE_FNC_3=96,_e.CODE_FNC_4_A=101,_e.CODE_FNC_4_B=100,_e.CODE_START_A=103,_e.CODE_START_B=104,_e.CODE_START_C=105,_e.CODE_STOP=106;class ut extends ze{constructor(h=!1,g=!1){super(),this.usingCheckDigit=h,this.extendedMode=g,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(h,g,y){let E=this.counters;E.fill(0),this.decodeRowResult="";let k=ut.findAsteriskPattern(g,E),T=g.getNextSet(k[1]),j=g.getSize(),L,z;do{ut.recordPattern(g,T,E);let Ee=ut.toNarrowWidePattern(E);if(Ee<0)throw new V;L=ut.patternToChar(Ee),this.decodeRowResult+=L,z=T;for(let Te of E)T+=Te;T=g.getNextSet(T)}while(L!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let J=0;for(let Ee of E)J+=Ee;let oe=T-z-J;if(T!==j&&oe*2<J)throw new V;if(this.usingCheckDigit){let Ee=this.decodeRowResult.length-1,Te=0;for(let Be=0;Be<Ee;Be++)Te+=ut.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Be));if(this.decodeRowResult.charAt(Ee)!==ut.ALPHABET_STRING.charAt(Te%43))throw new m;this.decodeRowResult=this.decodeRowResult.substring(0,Ee)}if(this.decodeRowResult.length===0)throw new V;let xe;this.extendedMode?xe=ut.decodeExtended(this.decodeRowResult):xe=this.decodeRowResult;let Oe=(k[1]+k[0])/2,ue=z+J/2;return new W(xe,null,0,[new ht(Oe,h),new ht(ue,h)],ie.CODE_39,new Date().getTime())}static findAsteriskPattern(h,g){let y=h.getSize(),E=h.getNextSet(0),k=0,T=E,j=!1,L=g.length;for(let z=E;z<y;z++)if(h.get(z)!==j)g[k]++;else{if(k===L-1){if(this.toNarrowWidePattern(g)===ut.ASTERISK_ENCODING&&h.isRange(Math.max(0,T-Math.floor((z-T)/2)),T,!1))return[T,z];T+=g[0]+g[1],g.copyWithin(0,2,2+k-1),g[k-1]=0,g[k]=0,k--}else k++;g[k]=1,j=!j}throw new V}static toNarrowWidePattern(h){let g=h.length,y=0,E;do{let k=2147483647;for(let L of h)L<k&&L>y&&(k=L);y=k,E=0;let T=0,j=0;for(let L=0;L<g;L++){let z=h[L];z>y&&(j|=1<<g-1-L,E++,T+=z)}if(E===3){for(let L=0;L<g&&E>0;L++){let z=h[L];if(z>y&&(E--,z*2>=T))return-1}return j}}while(E>3);return-1}static patternToChar(h){for(let g=0;g<ut.CHARACTER_ENCODINGS.length;g++)if(ut.CHARACTER_ENCODINGS[g]===h)return ut.ALPHABET_STRING.charAt(g);if(h===ut.ASTERISK_ENCODING)return"*";throw new V}static decodeExtended(h){let g=h.length,y="";for(let E=0;E<g;E++){let k=h.charAt(E);if(k==="+"||k==="$"||k==="%"||k==="/"){let T=h.charAt(E+1),j="\0";switch(k){case"+":if(T>="A"&&T<="Z")j=String.fromCharCode(T.charCodeAt(0)+32);else throw new O;break;case"$":if(T>="A"&&T<="Z")j=String.fromCharCode(T.charCodeAt(0)-64);else throw new O;break;case"%":if(T>="A"&&T<="E")j=String.fromCharCode(T.charCodeAt(0)-38);else if(T>="F"&&T<="J")j=String.fromCharCode(T.charCodeAt(0)-11);else if(T>="K"&&T<="O")j=String.fromCharCode(T.charCodeAt(0)+16);else if(T>="P"&&T<="T")j=String.fromCharCode(T.charCodeAt(0)+43);else if(T==="U")j="\0";else if(T==="V")j="@";else if(T==="W")j="`";else if(T==="X"||T==="Y"||T==="Z")j="";else throw new O;break;case"/":if(T>="A"&&T<="O")j=String.fromCharCode(T.charCodeAt(0)-32);else if(T==="Z")j=":";else throw new O;break}y+=j,E++}else y+=k}return y}}ut.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ut.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ut.ASTERISK_ENCODING=148;class xt extends ze{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(h,g,y){let E=this.decodeStart(g),k=this.decodeEnd(g),T=new Z;xt.decodeMiddle(g,E[1],k[0],T);let j=T.toString(),L=null;y!=null&&(L=y.get(P.ALLOWED_LENGTHS)),L==null&&(L=xt.DEFAULT_ALLOWED_LENGTHS);let z=j.length,J=!1,oe=0;for(let ue of L){if(z===ue){J=!0;break}ue>oe&&(oe=ue)}if(!J&&z>oe&&(J=!0),!J)throw new O;const xe=[new ht(E[1],h),new ht(k[0],h)];return new W(j,null,0,xe,ie.ITF,new Date().getTime())}static decodeMiddle(h,g,y,E){let k=new Int32Array(10),T=new Int32Array(5),j=new Int32Array(5);for(k.fill(0),T.fill(0),j.fill(0);g<y;){ze.recordPattern(h,g,k);for(let z=0;z<5;z++){let J=2*z;T[z]=k[J],j[z]=k[J+1]}let L=xt.decodeDigit(T);E.append(L.toString()),L=this.decodeDigit(j),E.append(L.toString()),k.forEach(function(z){g+=z})}}decodeStart(h){let g=xt.skipWhiteSpace(h),y=xt.findGuardPattern(h,g,xt.START_PATTERN);return this.narrowLineWidth=(y[1]-y[0])/4,this.validateQuietZone(h,y[0]),y}validateQuietZone(h,g){let y=this.narrowLineWidth*10;y=y<g?y:g;for(let E=g-1;y>0&&E>=0&&!h.get(E);E--)y--;if(y!==0)throw new V}static skipWhiteSpace(h){const g=h.getSize(),y=h.getNextSet(0);if(y===g)throw new V;return y}decodeEnd(h){h.reverse();try{let g=xt.skipWhiteSpace(h),y;try{y=xt.findGuardPattern(h,g,xt.END_PATTERN_REVERSED[0])}catch(k){k instanceof V&&(y=xt.findGuardPattern(h,g,xt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(h,y[0]);let E=y[0];return y[0]=h.getSize()-y[1],y[1]=h.getSize()-E,y}finally{h.reverse()}}static findGuardPattern(h,g,y){let E=y.length,k=new Int32Array(E),T=h.getSize(),j=!1,L=0,z=g;k.fill(0);for(let J=g;J<T;J++)if(h.get(J)!==j)k[L]++;else{if(L===E-1){if(ze.patternMatchVariance(k,y,xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE)return[z,J];z+=k[0]+k[1],v.arraycopy(k,2,k,0,L-1),k[L-1]=0,k[L]=0,L--}else L++;k[L]=1,j=!j}throw new V}static decodeDigit(h){let g=xt.MAX_AVG_VARIANCE,y=-1,E=xt.PATTERNS.length;for(let k=0;k<E;k++){let T=xt.PATTERNS[k],j=ze.patternMatchVariance(h,T,xt.MAX_INDIVIDUAL_VARIANCE);j<g?(g=j,y=k):j===g&&(y=-1)}if(y>=0)return y%10;throw new V}}xt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],xt.MAX_AVG_VARIANCE=.38,xt.MAX_INDIVIDUAL_VARIANCE=.5,xt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],xt.START_PATTERN=Int32Array.from([1,1,1,1]),xt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Dt extends ze{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(h){let g=!1,y,E=0,k=Int32Array.from([0,0,0]);for(;!g;){k=Int32Array.from([0,0,0]),y=Dt.findGuardPattern(h,E,!1,this.START_END_PATTERN,k);let T=y[0];E=y[1];let j=T-(E-T);j>=0&&(g=h.isRange(j,T,!1))}return y}static checkChecksum(h){return Dt.checkStandardUPCEANChecksum(h)}static checkStandardUPCEANChecksum(h){let g=h.length;if(g===0)return!1;let y=parseInt(h.charAt(g-1),10);return Dt.getStandardUPCEANChecksum(h.substring(0,g-1))===y}static getStandardUPCEANChecksum(h){let g=h.length,y=0;for(let E=g-1;E>=0;E-=2){let k=h.charAt(E).charCodeAt(0)-48;if(k<0||k>9)throw new O;y+=k}y*=3;for(let E=g-2;E>=0;E-=2){let k=h.charAt(E).charCodeAt(0)-48;if(k<0||k>9)throw new O;y+=k}return(1e3-y)%10}static decodeEnd(h,g){return Dt.findGuardPattern(h,g,!1,Dt.START_END_PATTERN,new Int32Array(Dt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(h,g,y,E){return this.findGuardPattern(h,g,y,E,new Int32Array(E.length))}static findGuardPattern(h,g,y,E,k){let T=h.getSize();g=y?h.getNextUnset(g):h.getNextSet(g);let j=0,L=g,z=E.length,J=y;for(let oe=g;oe<T;oe++)if(h.get(oe)!==J)k[j]++;else{if(j===z-1){if(ze.patternMatchVariance(k,E,Dt.MAX_INDIVIDUAL_VARIANCE)<Dt.MAX_AVG_VARIANCE)return Int32Array.from([L,oe]);L+=k[0]+k[1];let xe=k.slice(2,k.length-1);for(let Oe=0;Oe<j-1;Oe++)k[Oe]=xe[Oe];k[j-1]=0,k[j]=0,j--}else j++;k[j]=1,J=!J}throw new V}static decodeDigit(h,g,y,E){this.recordPattern(h,y,g);let k=this.MAX_AVG_VARIANCE,T=-1,j=E.length;for(let L=0;L<j;L++){let z=E[L],J=ze.patternMatchVariance(g,z,Dt.MAX_INDIVIDUAL_VARIANCE);J<k&&(k=J,T=L)}if(T>=0)return T;throw new V}}Dt.MAX_AVG_VARIANCE=.48,Dt.MAX_INDIVIDUAL_VARIANCE=.7,Dt.START_END_PATTERN=Int32Array.from([1,1,1]),Dt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Dt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Dt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Pt{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(h,g,y){let E=this.decodeRowStringBuffer,k=this.decodeMiddle(g,y,E),T=E.toString(),j=Pt.parseExtensionString(T),L=[new ht((y[0]+y[1])/2,h),new ht(k,h)],z=new W(T,null,0,L,ie.UPC_EAN_EXTENSION,new Date().getTime());return j!=null&&z.putAllMetadata(j),z}decodeMiddle(h,g,y){let E=this.decodeMiddleCounters;E[0]=0,E[1]=0,E[2]=0,E[3]=0;let k=h.getSize(),T=g[1],j=0;for(let z=0;z<5&&T<k;z++){let J=Dt.decodeDigit(h,E,T,Dt.L_AND_G_PATTERNS);y+=String.fromCharCode(48+J%10);for(let oe of E)T+=oe;J>=10&&(j|=1<<4-z),z!==4&&(T=h.getNextSet(T),T=h.getNextUnset(T))}if(y.length!==5)throw new V;let L=this.determineCheckDigit(j);if(Pt.extensionChecksum(y.toString())!==L)throw new V;return T}static extensionChecksum(h){let g=h.length,y=0;for(let E=g-2;E>=0;E-=2)y+=h.charAt(E).charCodeAt(0)-48;y*=3;for(let E=g-1;E>=0;E-=2)y+=h.charAt(E).charCodeAt(0)-48;return y*=3,y%10}determineCheckDigit(h){for(let g=0;g<10;g++)if(h===this.CHECK_DIGIT_ENCODINGS[g])return g;throw new V}static parseExtensionString(h){if(h.length!==5)return null;let g=Pt.parseExtension5String(h);return g==null?null:new Map([[re.SUGGESTED_PRICE,g]])}static parseExtension5String(h){let g;switch(h.charAt(0)){case"0":g="";break;case"5":g="$";break;case"9":switch(h){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}g="";break;default:g="";break}let y=parseInt(h.substring(1)),E=(y/100).toString(),k=y%100,T=k<10?"0"+k:k.toString();return g+E+"."+T}}class Cr{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(h,g,y){let E=this.decodeRowStringBuffer,k=this.decodeMiddle(g,y,E),T=E.toString(),j=Cr.parseExtensionString(T),L=[new ht((y[0]+y[1])/2,h),new ht(k,h)],z=new W(T,null,0,L,ie.UPC_EAN_EXTENSION,new Date().getTime());return j!=null&&z.putAllMetadata(j),z}decodeMiddle(h,g,y){let E=this.decodeMiddleCounters;E[0]=0,E[1]=0,E[2]=0,E[3]=0;let k=h.getSize(),T=g[1],j=0;for(let L=0;L<2&&T<k;L++){let z=Dt.decodeDigit(h,E,T,Dt.L_AND_G_PATTERNS);y+=String.fromCharCode(48+z%10);for(let J of E)T+=J;z>=10&&(j|=1<<1-L),L!==1&&(T=h.getNextSet(T),T=h.getNextUnset(T))}if(y.length!==2)throw new V;if(parseInt(y.toString())%4!==j)throw new V;return T}static parseExtensionString(h){return h.length!==2?null:new Map([[re.ISSUE_NUMBER,parseInt(h)]])}}class wn{static decodeRow(h,g,y){let E=Dt.findGuardPattern(g,y,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Pt().decodeRow(h,g,E)}catch{return new Cr().decodeRow(h,g,E)}}}wn.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class fr extends Dt{constructor(){super(),this.decodeRowStringBuffer="",fr.L_AND_G_PATTERNS=fr.L_PATTERNS.map(h=>Int32Array.from(h));for(let h=10;h<20;h++){let g=fr.L_PATTERNS[h-10],y=new Int32Array(g.length);for(let E=0;E<g.length;E++)y[E]=g[g.length-E-1];fr.L_AND_G_PATTERNS[h]=y}}decodeRow(h,g,y){let E=fr.findStartGuardPattern(g),k=y==null?null:y.get(P.NEED_RESULT_POINT_CALLBACK);if(k!=null){const vt=new ht((E[0]+E[1])/2,h);k.foundPossibleResultPoint(vt)}let T=this.decodeMiddle(g,E,this.decodeRowStringBuffer),j=T.rowOffset,L=T.resultString;if(k!=null){const vt=new ht(j,h);k.foundPossibleResultPoint(vt)}let z=this.decodeEnd(g,j);if(k!=null){const vt=new ht((z[0]+z[1])/2,h);k.foundPossibleResultPoint(vt)}let J=z[1],oe=J+(J-z[0]);if(oe>=g.getSize()||!g.isRange(J,oe,!1))throw new V;let xe=L.toString();if(xe.length<8)throw new O;if(!fr.checkChecksum(xe))throw new m;let Oe=(E[1]+E[0])/2,ue=(z[1]+z[0])/2,Ee=this.getBarcodeFormat(),Te=[new ht(Oe,h),new ht(ue,h)],Be=new W(xe,null,0,Te,Ee,new Date().getTime()),ot=0;try{let vt=wn.decodeRow(h,g,z[1]);Be.putMetadata(re.UPC_EAN_EXTENSION,vt.getText()),Be.putAllMetadata(vt.getResultMetadata()),Be.addResultPoints(vt.getResultPoints()),ot=vt.getText().length}catch{}let gt=y==null?null:y.get(P.ALLOWED_EAN_EXTENSIONS);if(gt!=null){let vt=!1;for(let Zt in gt)if(ot.toString()===Zt){vt=!0;break}if(!vt)throw new V}return Be}decodeEnd(h,g){return fr.findGuardPattern(h,g,!1,fr.START_END_PATTERN,new Int32Array(fr.START_END_PATTERN.length).fill(0))}static checkChecksum(h){return fr.checkStandardUPCEANChecksum(h)}static checkStandardUPCEANChecksum(h){let g=h.length;if(g===0)return!1;let y=parseInt(h.charAt(g-1),10);return fr.getStandardUPCEANChecksum(h.substring(0,g-1))===y}static getStandardUPCEANChecksum(h){let g=h.length,y=0;for(let E=g-1;E>=0;E-=2){let k=h.charAt(E).charCodeAt(0)-48;if(k<0||k>9)throw new O;y+=k}y*=3;for(let E=g-2;E>=0;E-=2){let k=h.charAt(E).charCodeAt(0)-48;if(k<0||k>9)throw new O;y+=k}return(1e3-y)%10}}class Vi extends fr{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(h,g,y){let E=this.decodeMiddleCounters;E[0]=0,E[1]=0,E[2]=0,E[3]=0;let k=h.getSize(),T=g[1],j=0;for(let z=0;z<6&&T<k;z++){let J=fr.decodeDigit(h,E,T,fr.L_AND_G_PATTERNS);y+=String.fromCharCode(48+J%10);for(let oe of E)T+=oe;J>=10&&(j|=1<<5-z)}y=Vi.determineFirstDigit(y,j),T=fr.findGuardPattern(h,T,!0,fr.MIDDLE_PATTERN,new Int32Array(fr.MIDDLE_PATTERN.length).fill(0))[1];for(let z=0;z<6&&T<k;z++){let J=fr.decodeDigit(h,E,T,fr.L_PATTERNS);y+=String.fromCharCode(48+J);for(let oe of E)T+=oe}return{rowOffset:T,resultString:y}}getBarcodeFormat(){return ie.EAN_13}static determineFirstDigit(h,g){for(let y=0;y<10;y++)if(g===this.FIRST_DIGIT_ENCODINGS[y])return h=String.fromCharCode(48+y)+h,h;throw new V}}Vi.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class jn extends fr{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(h,g,y){const E=this.decodeMiddleCounters;E[0]=0,E[1]=0,E[2]=0,E[3]=0;let k=h.getSize(),T=g[1];for(let L=0;L<4&&T<k;L++){let z=fr.decodeDigit(h,E,T,fr.L_PATTERNS);y+=String.fromCharCode(48+z);for(let J of E)T+=J}T=fr.findGuardPattern(h,T,!0,fr.MIDDLE_PATTERN,new Int32Array(fr.MIDDLE_PATTERN.length).fill(0))[1];for(let L=0;L<4&&T<k;L++){let z=fr.decodeDigit(h,E,T,fr.L_PATTERNS);y+=String.fromCharCode(48+z);for(let J of E)T+=J}return{rowOffset:T,resultString:y}}getBarcodeFormat(){return ie.EAN_8}}class Qo extends fr{constructor(){super(...arguments),this.ean13Reader=new Vi}getBarcodeFormat(){return ie.UPC_A}decode(h,g){return this.maybeReturnResult(this.ean13Reader.decode(h))}decodeRow(h,g,y){return this.maybeReturnResult(this.ean13Reader.decodeRow(h,g,y))}decodeMiddle(h,g,y){return this.ean13Reader.decodeMiddle(h,g,y)}maybeReturnResult(h){let g=h.getText();if(g.charAt(0)==="0"){let y=new W(g.substring(1),null,null,h.getResultPoints(),ie.UPC_A);return h.getResultMetadata()!=null&&y.putAllMetadata(h.getResultMetadata()),y}else throw new V}reset(){this.ean13Reader.reset()}}class We extends fr{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(h,g,y){const E=this.decodeMiddleCounters.map(z=>z);E[0]=0,E[1]=0,E[2]=0,E[3]=0;const k=h.getSize();let T=g[1],j=0;for(let z=0;z<6&&T<k;z++){const J=We.decodeDigit(h,E,T,We.L_AND_G_PATTERNS);y+=String.fromCharCode(48+J%10);for(let oe of E)T+=oe;J>=10&&(j|=1<<5-z)}let L=We.determineNumSysAndCheckDigit(y,j);return{rowOffset:T,resultString:L}}decodeEnd(h,g){return We.findGuardPatternWithoutCounters(h,g,!0,We.MIDDLE_END_PATTERN)}checkChecksum(h){return fr.checkChecksum(We.convertUPCEtoUPCA(h))}static determineNumSysAndCheckDigit(h,g){for(let y=0;y<=1;y++)for(let E=0;E<10;E++)if(g===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[y][E]){let k=String.fromCharCode(48+y),T=String.fromCharCode(48+E);return k+h+T}throw V.getNotFoundInstance()}getBarcodeFormat(){return ie.UPC_E}static convertUPCEtoUPCA(h){const g=h.slice(1,7).split("").map(k=>k.charCodeAt(0)),y=new Z;y.append(h.charAt(0));let E=g[5];switch(E){case 0:case 1:case 2:y.appendChars(g,0,2),y.append(E),y.append("0000"),y.appendChars(g,2,3);break;case 3:y.appendChars(g,0,3),y.append("00000"),y.appendChars(g,3,2);break;case 4:y.appendChars(g,0,4),y.append("00000"),y.append(g[4]);break;default:y.appendChars(g,0,5),y.append("0000"),y.append(E);break}return h.length>=8&&y.append(h.charAt(7)),y.toString()}}We.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),We.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Qe extends ze{constructor(h){super();let g=h==null?null:h.get(P.POSSIBLE_FORMATS),y=[];n(g)?(y.push(new Vi),y.push(new Qo),y.push(new jn),y.push(new We)):(g.indexOf(ie.EAN_13)>-1&&y.push(new Vi),g.indexOf(ie.UPC_A)>-1&&y.push(new Qo),g.indexOf(ie.EAN_8)>-1&&y.push(new jn),g.indexOf(ie.UPC_E)>-1&&y.push(new We)),this.readers=y}decodeRow(h,g,y){for(let E of this.readers)try{const k=E.decodeRow(h,g,y),T=k.getBarcodeFormat()===ie.EAN_13&&k.getText().charAt(0)==="0",j=y==null?null:y.get(P.POSSIBLE_FORMATS),L=j==null||j.includes(ie.UPC_A);if(T&&L){const z=k.getRawBytes(),J=new W(k.getText().substring(1),z,z?z.length:null,k.getResultPoints(),ie.UPC_A);return J.putAllMetadata(k.getResultMetadata()),J}return k}catch{}throw new V}reset(){for(let h of this.readers)h.reset()}}class tt extends ze{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(h,g){for(let y=0;y<g.length;y++)if(ze.patternMatchVariance(h,g[y],tt.MAX_INDIVIDUAL_VARIANCE)<tt.MAX_AVG_VARIANCE)return y;throw new V}static count(h){return lt.sum(new Int32Array(h))}static increment(h,g){let y=0,E=g[0];for(let k=1;k<h.length;k++)g[k]>E&&(E=g[k],y=k);h[y]++}static decrement(h,g){let y=0,E=g[0];for(let k=1;k<h.length;k++)g[k]<E&&(E=g[k],y=k);h[y]--}static isFinderPattern(h){let g=h[0]+h[1],y=g+h[2]+h[3],E=g/y;if(E>=tt.MIN_FINDER_PATTERN_RATIO&&E<=tt.MAX_FINDER_PATTERN_RATIO){let k=Number.MAX_SAFE_INTEGER,T=Number.MIN_SAFE_INTEGER;for(let j of h)j>T&&(T=j),j<k&&(k=j);return T<10*k}return!1}}tt.MAX_AVG_VARIANCE=.2,tt.MAX_INDIVIDUAL_VARIANCE=.45,tt.MIN_FINDER_PATTERN_RATIO=9.5/12,tt.MAX_FINDER_PATTERN_RATIO=12.5/14;class _t{constructor(h,g){this.value=h,this.checksumPortion=g}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(h){if(!(h instanceof _t))return!1;const g=h;return this.value===g.value&&this.checksumPortion===g.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ut{constructor(h,g,y,E,k){this.value=h,this.startEnd=g,this.value=h,this.startEnd=g,this.resultPoints=new Array,this.resultPoints.push(new ht(y,k)),this.resultPoints.push(new ht(E,k))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(h){if(!(h instanceof Ut))return!1;const g=h;return this.value===g.value}hashCode(){return this.value}}class nr{constructor(){}static getRSSvalue(h,g,y){let E=0;for(let L of h)E+=L;let k=0,T=0,j=h.length;for(let L=0;L<j-1;L++){let z;for(z=1,T|=1<<L;z<h[L];z++,T&=~(1<<L)){let J=nr.combins(E-z-1,j-L-2);if(y&&T===0&&E-z-(j-L-1)>=j-L-1&&(J-=nr.combins(E-z-(j-L),j-L-2)),j-L-1>1){let oe=0;for(let xe=E-z-(j-L-2);xe>g;xe--)oe+=nr.combins(E-z-xe-1,j-L-3);J-=oe*(j-1-L)}else E-z>g&&J--;k+=J}E-=z}return k}static combins(h,g){let y,E;h-g>g?(E=g,y=h-g):(E=h-g,y=g);let k=1,T=1;for(let j=h;j>y;j--)k*=j,T<=E&&(k/=T,T++);for(;T<=E;)k/=T,T++;return k}}class tr{static buildBitArray(h){let g=h.length*2-1;h[h.length-1].getRightChar()==null&&(g-=1);let y=12*g,E=new N(y),k=0,j=h[0].getRightChar().getValue();for(let L=11;L>=0;--L)j&1<<L&&E.set(k),k++;for(let L=1;L<h.length;++L){let z=h[L],J=z.getLeftChar().getValue();for(let oe=11;oe>=0;--oe)J&1<<oe&&E.set(k),k++;if(z.getRightChar()!=null){let oe=z.getRightChar().getValue();for(let xe=11;xe>=0;--xe)oe&1<<xe&&E.set(k),k++}}return E}}class $t{constructor(h,g){g?this.decodedInformation=null:(this.finished=h,this.decodedInformation=g)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class kr{constructor(h){this.newPosition=h}getNewPosition(){return this.newPosition}}class Jt extends kr{constructor(h,g){super(h),this.value=g}getValue(){return this.value}isFNC1(){return this.value===Jt.FNC1}}Jt.FNC1="$";class Un extends kr{constructor(h,g,y){super(h),y?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=g}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class de extends kr{constructor(h,g,y){if(super(h),g<0||g>10||y<0||y>10)throw new O;this.firstDigit=g,this.secondDigit=y}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===de.FNC1}isSecondDigitFNC1(){return this.secondDigit===de.FNC1}isAnyFNC1(){return this.firstDigit===de.FNC1||this.secondDigit===de.FNC1}}de.FNC1=10;class he{constructor(){}static parseFieldsInGeneralPurpose(h){if(!h)return null;if(h.length<2)throw new V;let g=h.substring(0,2);for(let k of he.TWO_DIGIT_DATA_LENGTH)if(k[0]===g)return k[1]===he.VARIABLE_LENGTH?he.processVariableAI(2,k[2],h):he.processFixedAI(2,k[1],h);if(h.length<3)throw new V;let y=h.substring(0,3);for(let k of he.THREE_DIGIT_DATA_LENGTH)if(k[0]===y)return k[1]===he.VARIABLE_LENGTH?he.processVariableAI(3,k[2],h):he.processFixedAI(3,k[1],h);for(let k of he.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(k[0]===y)return k[1]===he.VARIABLE_LENGTH?he.processVariableAI(4,k[2],h):he.processFixedAI(4,k[1],h);if(h.length<4)throw new V;let E=h.substring(0,4);for(let k of he.FOUR_DIGIT_DATA_LENGTH)if(k[0]===E)return k[1]===he.VARIABLE_LENGTH?he.processVariableAI(4,k[2],h):he.processFixedAI(4,k[1],h);throw new V}static processFixedAI(h,g,y){if(y.length<h)throw new V;let E=y.substring(0,h);if(y.length<h+g)throw new V;let k=y.substring(h,h+g),T=y.substring(h+g),j="("+E+")"+k,L=he.parseFieldsInGeneralPurpose(T);return L==null?j:j+L}static processVariableAI(h,g,y){let E=y.substring(0,h),k;y.length<h+g?k=y.length:k=h+g;let T=y.substring(h,k),j=y.substring(k),L="("+E+")"+T,z=he.parseFieldsInGeneralPurpose(j);return z==null?L:L+z}}he.VARIABLE_LENGTH=[],he.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",he.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",he.VARIABLE_LENGTH,20],["22",he.VARIABLE_LENGTH,29],["30",he.VARIABLE_LENGTH,8],["37",he.VARIABLE_LENGTH,8],["90",he.VARIABLE_LENGTH,30],["91",he.VARIABLE_LENGTH,30],["92",he.VARIABLE_LENGTH,30],["93",he.VARIABLE_LENGTH,30],["94",he.VARIABLE_LENGTH,30],["95",he.VARIABLE_LENGTH,30],["96",he.VARIABLE_LENGTH,30],["97",he.VARIABLE_LENGTH,3],["98",he.VARIABLE_LENGTH,30],["99",he.VARIABLE_LENGTH,30]],he.THREE_DIGIT_DATA_LENGTH=[["240",he.VARIABLE_LENGTH,30],["241",he.VARIABLE_LENGTH,30],["242",he.VARIABLE_LENGTH,6],["250",he.VARIABLE_LENGTH,30],["251",he.VARIABLE_LENGTH,30],["253",he.VARIABLE_LENGTH,17],["254",he.VARIABLE_LENGTH,20],["400",he.VARIABLE_LENGTH,30],["401",he.VARIABLE_LENGTH,30],["402",17],["403",he.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",he.VARIABLE_LENGTH,20],["421",he.VARIABLE_LENGTH,15],["422",3],["423",he.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],he.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",he.VARIABLE_LENGTH,15],["391",he.VARIABLE_LENGTH,18],["392",he.VARIABLE_LENGTH,15],["393",he.VARIABLE_LENGTH,18],["703",he.VARIABLE_LENGTH,30]],he.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",he.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",he.VARIABLE_LENGTH,20],["8003",he.VARIABLE_LENGTH,30],["8004",he.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",he.VARIABLE_LENGTH,30],["8008",he.VARIABLE_LENGTH,12],["8018",18],["8020",he.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",he.VARIABLE_LENGTH,70],["8200",he.VARIABLE_LENGTH,70]];class be{constructor(h){this.buffer=new Z,this.information=h}decodeAllCodes(h,g){let y=g,E=null;do{let k=this.decodeGeneralPurposeField(y,E),T=he.parseFieldsInGeneralPurpose(k.getNewString());if(T!=null&&h.append(T),k.isRemaining()?E=""+k.getRemainingValue():E=null,y===k.getNewPosition())break;y=k.getNewPosition()}while(!0);return h.toString()}isStillNumeric(h){if(h+7>this.information.getSize())return h+4<=this.information.getSize();for(let g=h;g<h+3;++g)if(this.information.get(g))return!0;return this.information.get(h+3)}decodeNumeric(h){if(h+7>this.information.getSize()){let k=this.extractNumericValueFromBitArray(h,4);return k===0?new de(this.information.getSize(),de.FNC1,de.FNC1):new de(this.information.getSize(),k-1,de.FNC1)}let g=this.extractNumericValueFromBitArray(h,7),y=(g-8)/11,E=(g-8)%11;return new de(h+7,y,E)}extractNumericValueFromBitArray(h,g){return be.extractNumericValueFromBitArray(this.information,h,g)}static extractNumericValueFromBitArray(h,g,y){let E=0;for(let k=0;k<y;++k)h.get(g+k)&&(E|=1<<y-k-1);return E}decodeGeneralPurposeField(h,g){this.buffer.setLengthToZero(),g!=null&&this.buffer.append(g),this.current.setPosition(h);let y=this.parseBlocks();return y!=null&&y.isRemaining()?new Un(this.current.getPosition(),this.buffer.toString(),y.getRemainingValue()):new Un(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let h,g;do{let y=this.current.getPosition();if(this.current.isAlpha()?(g=this.parseAlphaBlock(),h=g.isFinished()):this.current.isIsoIec646()?(g=this.parseIsoIec646Block(),h=g.isFinished()):(g=this.parseNumericBlock(),h=g.isFinished()),!(y!==this.current.getPosition())&&!h)break}while(!h);return g.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let h=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(h.getNewPosition()),h.isFirstDigitFNC1()){let g;return h.isSecondDigitFNC1()?g=new Un(this.current.getPosition(),this.buffer.toString()):g=new Un(this.current.getPosition(),this.buffer.toString(),h.getSecondDigit()),new $t(!0,g)}if(this.buffer.append(h.getFirstDigit()),h.isSecondDigitFNC1()){let g=new Un(this.current.getPosition(),this.buffer.toString());return new $t(!0,g)}this.buffer.append(h.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new $t(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let h=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(h.getNewPosition()),h.isFNC1()){let g=new Un(this.current.getPosition(),this.buffer.toString());return new $t(!0,g)}this.buffer.append(h.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new $t(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let h=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(h.getNewPosition()),h.isFNC1()){let g=new Un(this.current.getPosition(),this.buffer.toString());return new $t(!0,g)}this.buffer.append(h.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new $t(!1)}isStillIsoIec646(h){if(h+5>this.information.getSize())return!1;let g=this.extractNumericValueFromBitArray(h,5);if(g>=5&&g<16)return!0;if(h+7>this.information.getSize())return!1;let y=this.extractNumericValueFromBitArray(h,7);if(y>=64&&y<116)return!0;if(h+8>this.information.getSize())return!1;let E=this.extractNumericValueFromBitArray(h,8);return E>=232&&E<253}decodeIsoIec646(h){let g=this.extractNumericValueFromBitArray(h,5);if(g===15)return new Jt(h+5,Jt.FNC1);if(g>=5&&g<15)return new Jt(h+5,"0"+(g-5));let y=this.extractNumericValueFromBitArray(h,7);if(y>=64&&y<90)return new Jt(h+7,""+(y+1));if(y>=90&&y<116)return new Jt(h+7,""+(y+7));let E=this.extractNumericValueFromBitArray(h,8),k;switch(E){case 232:k="!";break;case 233:k='"';break;case 234:k="%";break;case 235:k="&";break;case 236:k="'";break;case 237:k="(";break;case 238:k=")";break;case 239:k="*";break;case 240:k="+";break;case 241:k=",";break;case 242:k="-";break;case 243:k=".";break;case 244:k="/";break;case 245:k=":";break;case 246:k=";";break;case 247:k="<";break;case 248:k="=";break;case 249:k=">";break;case 250:k="?";break;case 251:k="_";break;case 252:k=" ";break;default:throw new O}return new Jt(h+8,k)}isStillAlpha(h){if(h+5>this.information.getSize())return!1;let g=this.extractNumericValueFromBitArray(h,5);if(g>=5&&g<16)return!0;if(h+6>this.information.getSize())return!1;let y=this.extractNumericValueFromBitArray(h,6);return y>=16&&y<63}decodeAlphanumeric(h){let g=this.extractNumericValueFromBitArray(h,5);if(g===15)return new Jt(h+5,Jt.FNC1);if(g>=5&&g<15)return new Jt(h+5,"0"+(g-5));let y=this.extractNumericValueFromBitArray(h,6);if(y>=32&&y<58)return new Jt(h+6,""+(y+33));let E;switch(y){case 58:E="*";break;case 59:E=",";break;case 60:E="-";break;case 61:E=".";break;case 62:E="/";break;default:throw new He("Decoding invalid alphanumeric value: "+y)}return new Jt(h+6,E)}isAlphaTo646ToAlphaLatch(h){if(h+1>this.information.getSize())return!1;for(let g=0;g<5&&g+h<this.information.getSize();++g)if(g===2){if(!this.information.get(h+2))return!1}else if(this.information.get(h+g))return!1;return!0}isAlphaOr646ToNumericLatch(h){if(h+3>this.information.getSize())return!1;for(let g=h;g<h+3;++g)if(this.information.get(g))return!1;return!0}isNumericToAlphaNumericLatch(h){if(h+1>this.information.getSize())return!1;for(let g=0;g<4&&g+h<this.information.getSize();++g)if(this.information.get(h+g))return!1;return!0}}class Ne{constructor(h){this.information=h,this.generalDecoder=new be(h)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class pe extends Ne{constructor(h){super(h)}encodeCompressedGtin(h,g){h.append("(01)");let y=h.length();h.append("9"),this.encodeCompressedGtinWithoutAI(h,g,y)}encodeCompressedGtinWithoutAI(h,g,y){for(let E=0;E<4;++E){let k=this.getGeneralDecoder().extractNumericValueFromBitArray(g+10*E,10);k/100===0&&h.append("0"),k/10===0&&h.append("0"),h.append(k)}pe.appendCheckDigit(h,y)}static appendCheckDigit(h,g){let y=0;for(let E=0;E<13;E++){let k=h.charAt(E+g).charCodeAt(0)-48;y+=E&1?k:3*k}y=10-y%10,y===10&&(y=0),h.append(y)}}pe.GTIN_SIZE=40;class me extends pe{constructor(h){super(h)}parseInformation(){let h=new Z;h.append("(01)");let g=h.length(),y=this.getGeneralDecoder().extractNumericValueFromBitArray(me.HEADER_SIZE,4);return h.append(y),this.encodeCompressedGtinWithoutAI(h,me.HEADER_SIZE+4,g),this.getGeneralDecoder().decodeAllCodes(h,me.HEADER_SIZE+44)}}me.HEADER_SIZE=4;class Fe extends Ne{constructor(h){super(h)}parseInformation(){let h=new Z;return this.getGeneralDecoder().decodeAllCodes(h,Fe.HEADER_SIZE)}}Fe.HEADER_SIZE=5;class nt extends pe{constructor(h){super(h)}encodeCompressedWeight(h,g,y){let E=this.getGeneralDecoder().extractNumericValueFromBitArray(g,y);this.addWeightCode(h,E);let k=this.checkWeight(E),T=1e5;for(let j=0;j<5;++j)k/T===0&&h.append("0"),T/=10;h.append(k)}}class Ge extends nt{constructor(h){super(h)}parseInformation(){if(this.getInformation().getSize()!=Ge.HEADER_SIZE+nt.GTIN_SIZE+Ge.WEIGHT_SIZE)throw new V;let h=new Z;return this.encodeCompressedGtin(h,Ge.HEADER_SIZE),this.encodeCompressedWeight(h,Ge.HEADER_SIZE+nt.GTIN_SIZE,Ge.WEIGHT_SIZE),h.toString()}}Ge.HEADER_SIZE=5,Ge.WEIGHT_SIZE=15;class Xe extends Ge{constructor(h){super(h)}addWeightCode(h,g){h.append("(3103)")}checkWeight(h){return h}}class Je extends Ge{constructor(h){super(h)}addWeightCode(h,g){g<1e4?h.append("(3202)"):h.append("(3203)")}checkWeight(h){return h<1e4?h:h-1e4}}class wt extends pe{constructor(h){super(h)}parseInformation(){if(this.getInformation().getSize()<wt.HEADER_SIZE+pe.GTIN_SIZE)throw new V;let h=new Z;this.encodeCompressedGtin(h,wt.HEADER_SIZE);let g=this.getGeneralDecoder().extractNumericValueFromBitArray(wt.HEADER_SIZE+pe.GTIN_SIZE,wt.LAST_DIGIT_SIZE);h.append("(392"),h.append(g),h.append(")");let y=this.getGeneralDecoder().decodeGeneralPurposeField(wt.HEADER_SIZE+pe.GTIN_SIZE+wt.LAST_DIGIT_SIZE,null);return h.append(y.getNewString()),h.toString()}}wt.HEADER_SIZE=8,wt.LAST_DIGIT_SIZE=2;class At extends pe{constructor(h){super(h)}parseInformation(){if(this.getInformation().getSize()<At.HEADER_SIZE+pe.GTIN_SIZE)throw new V;let h=new Z;this.encodeCompressedGtin(h,At.HEADER_SIZE);let g=this.getGeneralDecoder().extractNumericValueFromBitArray(At.HEADER_SIZE+pe.GTIN_SIZE,At.LAST_DIGIT_SIZE);h.append("(393"),h.append(g),h.append(")");let y=this.getGeneralDecoder().extractNumericValueFromBitArray(At.HEADER_SIZE+pe.GTIN_SIZE+At.LAST_DIGIT_SIZE,At.FIRST_THREE_DIGITS_SIZE);y/100==0&&h.append("0"),y/10==0&&h.append("0"),h.append(y);let E=this.getGeneralDecoder().decodeGeneralPurposeField(At.HEADER_SIZE+pe.GTIN_SIZE+At.LAST_DIGIT_SIZE+At.FIRST_THREE_DIGITS_SIZE,null);return h.append(E.getNewString()),h.toString()}}At.HEADER_SIZE=8,At.LAST_DIGIT_SIZE=2,At.FIRST_THREE_DIGITS_SIZE=10;class dt extends nt{constructor(h,g,y){super(h),this.dateCode=y,this.firstAIdigits=g}parseInformation(){if(this.getInformation().getSize()!=dt.HEADER_SIZE+dt.GTIN_SIZE+dt.WEIGHT_SIZE+dt.DATE_SIZE)throw new V;let h=new Z;return this.encodeCompressedGtin(h,dt.HEADER_SIZE),this.encodeCompressedWeight(h,dt.HEADER_SIZE+dt.GTIN_SIZE,dt.WEIGHT_SIZE),this.encodeCompressedDate(h,dt.HEADER_SIZE+dt.GTIN_SIZE+dt.WEIGHT_SIZE),h.toString()}encodeCompressedDate(h,g){let y=this.getGeneralDecoder().extractNumericValueFromBitArray(g,dt.DATE_SIZE);if(y==38400)return;h.append("("),h.append(this.dateCode),h.append(")");let E=y%32;y/=32;let k=y%12+1;y/=12;let T=y;T/10==0&&h.append("0"),h.append(T),k/10==0&&h.append("0"),h.append(k),E/10==0&&h.append("0"),h.append(E)}addWeightCode(h,g){h.append("("),h.append(this.firstAIdigits),h.append(g/1e5),h.append(")")}checkWeight(h){return h%1e5}}dt.HEADER_SIZE=8,dt.WEIGHT_SIZE=20,dt.DATE_SIZE=16;function St(ae){try{if(ae.get(1))return new me(ae);if(!ae.get(2))return new Fe(ae);switch(be.extractNumericValueFromBitArray(ae,1,4)){case 4:return new Xe(ae);case 5:return new Je(ae)}switch(be.extractNumericValueFromBitArray(ae,1,5)){case 12:return new wt(ae);case 13:return new At(ae)}switch(be.extractNumericValueFromBitArray(ae,1,7)){case 56:return new dt(ae,"310","11");case 57:return new dt(ae,"320","11");case 58:return new dt(ae,"310","13");case 59:return new dt(ae,"320","13");case 60:return new dt(ae,"310","15");case 61:return new dt(ae,"320","15");case 62:return new dt(ae,"310","17");case 63:return new dt(ae,"320","17")}}catch(h){throw console.log(h),new He("unknown decoder: "+ae)}}class Ot{constructor(h,g,y,E){this.leftchar=h,this.rightchar=g,this.finderpattern=y,this.maybeLast=E}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(h,g){return h instanceof Ot?Ot.equalsOrNull(h.leftchar,g.leftchar)&&Ot.equalsOrNull(h.rightchar,g.rightchar)&&Ot.equalsOrNull(h.finderpattern,g.finderpattern):!1}static equalsOrNull(h,g){return h===null?g===null:Ot.equals(h,g)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Kt{constructor(h,g,y){this.pairs=h,this.rowNumber=g,this.wasReversed=y}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(h){return this.checkEqualitity(this,h)}toString(){return"{ "+this.pairs+" }"}equals(h,g){return h instanceof Kt?this.checkEqualitity(h,g)&&h.wasReversed===g.wasReversed:!1}checkEqualitity(h,g){if(!h||!g)return;let y;return h.forEach((E,k)=>{g.forEach(T=>{E.getLeftChar().getValue()===T.getLeftChar().getValue()&&E.getRightChar().getValue()===T.getRightChar().getValue()&&E.getFinderPatter().getValue()===T.getFinderPatter().getValue()&&(y=!0)})}),y}}class at extends tt{constructor(h){super(...arguments),this.pairs=new Array(at.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=h===!0}decodeRow(h,g,y){this.pairs.length=0,this.startFromEven=!1;try{return at.constructResult(this.decodeRow2pairs(h,g))}catch(E){this.verbose&&console.log(E)}return this.pairs.length=0,this.startFromEven=!0,at.constructResult(this.decodeRow2pairs(h,g))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(h,g){let y=!1;for(;!y;)try{this.pairs.push(this.retrieveNextPair(g,this.pairs,h))}catch(k){if(k instanceof V){if(!this.pairs.length)throw new V;y=!0}}if(this.checkChecksum())return this.pairs;let E;if(this.rows.length?E=!0:E=!1,this.storeRow(h,!1),E){let k=this.checkRowsBoolean(!1);if(k!=null||(k=this.checkRowsBoolean(!0),k!=null))return k}throw new V}checkRowsBoolean(h){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,h&&(this.rows=this.rows.reverse());let g=null;try{g=this.checkRows(new Array,0)}catch(y){this.verbose&&console.log(y)}return h&&(this.rows=this.rows.reverse()),g}checkRows(h,g){for(let y=g;y<this.rows.length;y++){let E=this.rows[y];this.pairs.length=0;for(let T of h)this.pairs.push(T.getPairs());if(this.pairs.push(E.getPairs()),!at.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let k=new Array(h);k.push(E);try{return this.checkRows(k,y+1)}catch(T){this.verbose&&console.log(T)}}throw new V}static isValidSequence(h){for(let g of at.FINDER_PATTERN_SEQUENCES){if(h.length>g.length)continue;let y=!0;for(let E=0;E<h.length;E++)if(h[E].getFinderPattern().getValue()!=g[E]){y=!1;break}if(y)return!0}return!1}storeRow(h,g){let y=0,E=!1,k=!1;for(;y<this.rows.length;){let T=this.rows[y];if(T.getRowNumber()>h){k=T.isEquivalent(this.pairs);break}E=T.isEquivalent(this.pairs),y++}k||E||at.isPartialRow(this.pairs,this.rows)||(this.rows.push(y,new Kt(this.pairs,h,g)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(h,g){for(let y of g)if(y.getPairs().length!==h.length){for(let E of y.getPairs())for(let k of h)if(Ot.equals(E,k))break}}static isPartialRow(h,g){for(let y of g){let E=!0;for(let k of h){let T=!1;for(let j of y.getPairs())if(k.equals(j)){T=!0;break}if(!T){E=!1;break}}if(E)return!0}return!1}getRows(){return this.rows}static constructResult(h){let g=tr.buildBitArray(h),E=St(g).parseInformation(),k=h[0].getFinderPattern().getResultPoints(),T=h[h.length-1].getFinderPattern().getResultPoints(),j=[k[0],k[1],T[0],T[1]];return new W(E,null,null,j,ie.RSS_EXPANDED,null)}checkChecksum(){let h=this.pairs.get(0),g=h.getLeftChar(),y=h.getRightChar();if(y==null)return!1;let E=y.getChecksumPortion(),k=2;for(let j=1;j<this.pairs.size();++j){let L=this.pairs.get(j);E+=L.getLeftChar().getChecksumPortion(),k++;let z=L.getRightChar();z!=null&&(E+=z.getChecksumPortion(),k++)}return E%=211,211*(k-4)+E==g.getValue()}static getNextSecondBar(h,g){let y;return h.get(g)?(y=h.getNextUnset(g),y=h.getNextSet(y)):(y=h.getNextSet(g),y=h.getNextUnset(y)),y}retrieveNextPair(h,g,y){let E=g.length%2==0;this.startFromEven&&(E=!E);let k,T=!0,j=-1;do this.findNextPair(h,g,j),k=this.parseFoundFinderPattern(h,y,E),k==null?j=at.getNextSecondBar(h,this.startEnd[0]):T=!1;while(T);let L=this.decodeDataCharacter(h,k,E,!0);if(!this.isEmptyPair(g)&&g[g.length-1].mustBeLast())throw new V;let z;try{z=this.decodeDataCharacter(h,k,E,!1)}catch(J){z=null,this.verbose&&console.log(J)}return new Ot(L,z,k,!0)}isEmptyPair(h){return h.length===0}findNextPair(h,g,y){let E=this.getDecodeFinderCounters();E[0]=0,E[1]=0,E[2]=0,E[3]=0;let k=h.getSize(),T;y>=0?T=y:this.isEmptyPair(g)?T=0:T=g[g.length-1].getFinderPattern().getStartEnd()[1];let j=g.length%2!=0;this.startFromEven&&(j=!j);let L=!1;for(;T<k&&(L=!h.get(T),!!L);)T++;let z=0,J=T;for(let oe=T;oe<k;oe++)if(h.get(oe)!=L)E[z]++;else{if(z==3){if(j&&at.reverseCounters(E),at.isFinderPattern(E)){this.startEnd[0]=J,this.startEnd[1]=oe;return}j&&at.reverseCounters(E),J+=E[0]+E[1],E[0]=E[2],E[1]=E[3],E[2]=0,E[3]=0,z--}else z++;E[z]=1,L=!L}throw new V}static reverseCounters(h){let g=h.length;for(let y=0;y<g/2;++y){let E=h[y];h[y]=h[g-y-1],h[g-y-1]=E}}parseFoundFinderPattern(h,g,y){let E,k,T;if(y){let z=this.startEnd[0]-1;for(;z>=0&&!h.get(z);)z--;z++,E=this.startEnd[0]-z,k=z,T=this.startEnd[1]}else k=this.startEnd[0],T=h.getNextUnset(this.startEnd[1]+1),E=T-this.startEnd[1];let j=this.getDecodeFinderCounters();v.arraycopy(j,0,j,1,j.length-1),j[0]=E;let L;try{L=this.parseFinderValue(j,at.FINDER_PATTERNS)}catch{return null}return new Ut(L,[k,T],k,T,g)}decodeDataCharacter(h,g,y,E){let k=this.getDataCharacterCounters();for(let Yn=0;Yn<k.length;Yn++)k[Yn]=0;if(E)at.recordPatternInReverse(h,g.getStartEnd()[0],k);else{at.recordPattern(h,g.getStartEnd()[1],k);for(let Yn=0,Ii=k.length-1;Yn<Ii;Yn++,Ii--){let Qa=k[Yn];k[Yn]=k[Ii],k[Ii]=Qa}}let T=17,j=lt.sum(new Int32Array(k))/T,L=(g.getStartEnd()[1]-g.getStartEnd()[0])/15;if(Math.abs(j-L)/L>.3)throw new V;let z=this.getOddCounts(),J=this.getEvenCounts(),oe=this.getOddRoundingErrors(),xe=this.getEvenRoundingErrors();for(let Yn=0;Yn<k.length;Yn++){let Ii=1*k[Yn]/j,Qa=Ii+.5;if(Qa<1){if(Ii<.3)throw new V;Qa=1}else if(Qa>8){if(Ii>8.7)throw new V;Qa=8}let ku=Yn/2;Yn&1?(J[ku]=Qa,xe[ku]=Ii-Qa):(z[ku]=Qa,oe[ku]=Ii-Qa)}this.adjustOddEvenCounts(T);let Oe=4*g.getValue()+(y?0:2)+(E?0:1)-1,ue=0,Ee=0;for(let Yn=z.length-1;Yn>=0;Yn--){if(at.isNotA1left(g,y,E)){let Ii=at.WEIGHTS[Oe][2*Yn];Ee+=z[Yn]*Ii}ue+=z[Yn]}let Te=0;for(let Yn=J.length-1;Yn>=0;Yn--)if(at.isNotA1left(g,y,E)){let Ii=at.WEIGHTS[Oe][2*Yn+1];Te+=J[Yn]*Ii}let Be=Ee+Te;if(ue&1||ue>13||ue<4)throw new V;let ot=(13-ue)/2,gt=at.SYMBOL_WIDEST[ot],vt=9-gt,Zt=nr.getRSSvalue(z,gt,!0),Fr=nr.getRSSvalue(J,vt,!1),Ws=at.EVEN_TOTAL_SUBSET[ot],Ti=at.GSUM[ot],Fa=Zt*Ws+Fr+Ti;return new _t(Fa,Be)}static isNotA1left(h,g,y){return!(h.getValue()==0&&g&&y)}adjustOddEvenCounts(h){let g=lt.sum(new Int32Array(this.getOddCounts())),y=lt.sum(new Int32Array(this.getEvenCounts())),E=!1,k=!1;g>13?k=!0:g<4&&(E=!0);let T=!1,j=!1;y>13?j=!0:y<4&&(T=!0);let L=g+y-h,z=(g&1)==1,J=(y&1)==0;if(L==1)if(z){if(J)throw new V;k=!0}else{if(!J)throw new V;j=!0}else if(L==-1)if(z){if(J)throw new V;E=!0}else{if(!J)throw new V;T=!0}else if(L==0){if(z){if(!J)throw new V;g<y?(E=!0,j=!0):(k=!0,T=!0)}else if(J)throw new V}else throw new V;if(E){if(k)throw new V;at.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(k&&at.decrement(this.getOddCounts(),this.getOddRoundingErrors()),T){if(j)throw new V;at.increment(this.getEvenCounts(),this.getOddRoundingErrors())}j&&at.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}at.SYMBOL_WIDEST=[7,5,4,3,1],at.EVEN_TOTAL_SUBSET=[4,20,52,104,204],at.GSUM=[0,348,1388,2948,3988],at.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],at.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],at.FINDER_PAT_A=0,at.FINDER_PAT_B=1,at.FINDER_PAT_C=2,at.FINDER_PAT_D=3,at.FINDER_PAT_E=4,at.FINDER_PAT_F=5,at.FINDER_PATTERN_SEQUENCES=[[at.FINDER_PAT_A,at.FINDER_PAT_A],[at.FINDER_PAT_A,at.FINDER_PAT_B,at.FINDER_PAT_B],[at.FINDER_PAT_A,at.FINDER_PAT_C,at.FINDER_PAT_B,at.FINDER_PAT_D],[at.FINDER_PAT_A,at.FINDER_PAT_E,at.FINDER_PAT_B,at.FINDER_PAT_D,at.FINDER_PAT_C],[at.FINDER_PAT_A,at.FINDER_PAT_E,at.FINDER_PAT_B,at.FINDER_PAT_D,at.FINDER_PAT_D,at.FINDER_PAT_F],[at.FINDER_PAT_A,at.FINDER_PAT_E,at.FINDER_PAT_B,at.FINDER_PAT_D,at.FINDER_PAT_E,at.FINDER_PAT_F,at.FINDER_PAT_F],[at.FINDER_PAT_A,at.FINDER_PAT_A,at.FINDER_PAT_B,at.FINDER_PAT_B,at.FINDER_PAT_C,at.FINDER_PAT_C,at.FINDER_PAT_D,at.FINDER_PAT_D],[at.FINDER_PAT_A,at.FINDER_PAT_A,at.FINDER_PAT_B,at.FINDER_PAT_B,at.FINDER_PAT_C,at.FINDER_PAT_C,at.FINDER_PAT_D,at.FINDER_PAT_E,at.FINDER_PAT_E],[at.FINDER_PAT_A,at.FINDER_PAT_A,at.FINDER_PAT_B,at.FINDER_PAT_B,at.FINDER_PAT_C,at.FINDER_PAT_C,at.FINDER_PAT_D,at.FINDER_PAT_E,at.FINDER_PAT_F,at.FINDER_PAT_F],[at.FINDER_PAT_A,at.FINDER_PAT_A,at.FINDER_PAT_B,at.FINDER_PAT_B,at.FINDER_PAT_C,at.FINDER_PAT_D,at.FINDER_PAT_D,at.FINDER_PAT_E,at.FINDER_PAT_E,at.FINDER_PAT_F,at.FINDER_PAT_F]],at.MAX_PAIRS=11;class Vn extends _t{constructor(h,g,y){super(h,g),this.count=0,this.finderPattern=y}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class $r extends tt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(h,g,y){const E=this.decodePair(g,!1,h,y);$r.addOrTally(this.possibleLeftPairs,E),g.reverse();let k=this.decodePair(g,!0,h,y);$r.addOrTally(this.possibleRightPairs,k),g.reverse();for(let T of this.possibleLeftPairs)if(T.getCount()>1){for(let j of this.possibleRightPairs)if(j.getCount()>1&&$r.checkChecksum(T,j))return $r.constructResult(T,j)}throw new V}static addOrTally(h,g){if(g==null)return;let y=!1;for(let E of h)if(E.getValue()===g.getValue()){E.incrementCount(),y=!0;break}y||h.push(g)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(h,g){let y=4537077*h.getValue()+g.getValue(),E=new String(y).toString(),k=new Z;for(let z=13-E.length;z>0;z--)k.append("0");k.append(E);let T=0;for(let z=0;z<13;z++){let J=k.charAt(z).charCodeAt(0)-48;T+=z&1?J:3*J}T=10-T%10,T===10&&(T=0),k.append(T.toString());let j=h.getFinderPattern().getResultPoints(),L=g.getFinderPattern().getResultPoints();return new W(k.toString(),null,0,[j[0],j[1],L[0],L[1]],ie.RSS_14,new Date().getTime())}static checkChecksum(h,g){let y=(h.getChecksumPortion()+16*g.getChecksumPortion())%79,E=9*h.getFinderPattern().getValue()+g.getFinderPattern().getValue();return E>72&&E--,E>8&&E--,y===E}decodePair(h,g,y,E){try{let k=this.findFinderPattern(h,g),T=this.parseFoundFinderPattern(h,y,g,k),j=E==null?null:E.get(P.NEED_RESULT_POINT_CALLBACK);if(j!=null){let J=(k[0]+k[1])/2;g&&(J=h.getSize()-1-J),j.foundPossibleResultPoint(new ht(J,y))}let L=this.decodeDataCharacter(h,T,!0),z=this.decodeDataCharacter(h,T,!1);return new Vn(1597*L.getValue()+z.getValue(),L.getChecksumPortion()+4*z.getChecksumPortion(),T)}catch{return null}}decodeDataCharacter(h,g,y){let E=this.getDataCharacterCounters();for(let Te=0;Te<E.length;Te++)E[Te]=0;if(y)ze.recordPatternInReverse(h,g.getStartEnd()[0],E);else{ze.recordPattern(h,g.getStartEnd()[1]+1,E);for(let Te=0,Be=E.length-1;Te<Be;Te++,Be--){let ot=E[Te];E[Te]=E[Be],E[Be]=ot}}let k=y?16:15,T=lt.sum(new Int32Array(E))/k,j=this.getOddCounts(),L=this.getEvenCounts(),z=this.getOddRoundingErrors(),J=this.getEvenRoundingErrors();for(let Te=0;Te<E.length;Te++){let Be=E[Te]/T,ot=Math.floor(Be+.5);ot<1?ot=1:ot>8&&(ot=8);let gt=Math.floor(Te/2);Te&1?(L[gt]=ot,J[gt]=Be-ot):(j[gt]=ot,z[gt]=Be-ot)}this.adjustOddEvenCounts(y,k);let oe=0,xe=0;for(let Te=j.length-1;Te>=0;Te--)xe*=9,xe+=j[Te],oe+=j[Te];let Oe=0,ue=0;for(let Te=L.length-1;Te>=0;Te--)Oe*=9,Oe+=L[Te],ue+=L[Te];let Ee=xe+3*Oe;if(y){if(oe&1||oe>12||oe<4)throw new V;let Te=(12-oe)/2,Be=$r.OUTSIDE_ODD_WIDEST[Te],ot=9-Be,gt=nr.getRSSvalue(j,Be,!1),vt=nr.getRSSvalue(L,ot,!0),Zt=$r.OUTSIDE_EVEN_TOTAL_SUBSET[Te],Fr=$r.OUTSIDE_GSUM[Te];return new _t(gt*Zt+vt+Fr,Ee)}else{if(ue&1||ue>10||ue<4)throw new V;let Te=(10-ue)/2,Be=$r.INSIDE_ODD_WIDEST[Te],ot=9-Be,gt=nr.getRSSvalue(j,Be,!0),vt=nr.getRSSvalue(L,ot,!1),Zt=$r.INSIDE_ODD_TOTAL_SUBSET[Te],Fr=$r.INSIDE_GSUM[Te];return new _t(vt*Zt+gt+Fr,Ee)}}findFinderPattern(h,g){let y=this.getDecodeFinderCounters();y[0]=0,y[1]=0,y[2]=0,y[3]=0;let E=h.getSize(),k=!1,T=0;for(;T<E&&(k=!h.get(T),g!==k);)T++;let j=0,L=T;for(let z=T;z<E;z++)if(h.get(z)!==k)y[j]++;else{if(j===3){if(tt.isFinderPattern(y))return[L,z];L+=y[0]+y[1],y[0]=y[2],y[1]=y[3],y[2]=0,y[3]=0,j--}else j++;y[j]=1,k=!k}throw new V}parseFoundFinderPattern(h,g,y,E){let k=h.get(E[0]),T=E[0]-1;for(;T>=0&&k!==h.get(T);)T--;T++;const j=E[0]-T,L=this.getDecodeFinderCounters(),z=new Int32Array(L.length);v.arraycopy(L,0,z,1,L.length-1),z[0]=j;const J=this.parseFinderValue(z,$r.FINDER_PATTERNS);let oe=T,xe=E[1];return y&&(oe=h.getSize()-1-oe,xe=h.getSize()-1-xe),new Ut(J,[T,E[1]],oe,xe,g)}adjustOddEvenCounts(h,g){let y=lt.sum(new Int32Array(this.getOddCounts())),E=lt.sum(new Int32Array(this.getEvenCounts())),k=!1,T=!1,j=!1,L=!1;h?(y>12?T=!0:y<4&&(k=!0),E>12?L=!0:E<4&&(j=!0)):(y>11?T=!0:y<5&&(k=!0),E>10?L=!0:E<4&&(j=!0));let z=y+E-g,J=(y&1)===(h?1:0),oe=(E&1)===1;if(z===1)if(J){if(oe)throw new V;T=!0}else{if(!oe)throw new V;L=!0}else if(z===-1)if(J){if(oe)throw new V;k=!0}else{if(!oe)throw new V;j=!0}else if(z===0){if(J){if(!oe)throw new V;y<E?(k=!0,L=!0):(T=!0,j=!0)}else if(oe)throw new V}else throw new V;if(k){if(T)throw new V;tt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(T&&tt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),j){if(L)throw new V;tt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}L&&tt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}$r.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],$r.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],$r.OUTSIDE_GSUM=[0,161,961,2015,2715],$r.INSIDE_GSUM=[0,336,1036,1516],$r.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],$r.INSIDE_ODD_WIDEST=[2,4,6,8],$r.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class wo extends ze{constructor(h,g){super(),this.readers=[],this.verbose=g===!0;const y=h?h.get(P.POSSIBLE_FORMATS):null,E=h&&h.get(P.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;y?((y.includes(ie.EAN_13)||y.includes(ie.UPC_A)||y.includes(ie.EAN_8)||y.includes(ie.UPC_E))&&this.readers.push(new Qe(h)),y.includes(ie.CODE_39)&&this.readers.push(new ut(E)),y.includes(ie.CODE_128)&&this.readers.push(new _e),y.includes(ie.ITF)&&this.readers.push(new xt),y.includes(ie.RSS_14)&&this.readers.push(new $r),y.includes(ie.RSS_EXPANDED)&&this.readers.push(new at(this.verbose))):(this.readers.push(new Qe(h)),this.readers.push(new ut),this.readers.push(new Qe(h)),this.readers.push(new _e),this.readers.push(new xt),this.readers.push(new $r),this.readers.push(new at(this.verbose)))}decodeRow(h,g,y){for(let E=0;E<this.readers.length;E++)try{return this.readers[E].decodeRow(h,g,y)}catch{}throw new V}reset(){this.readers.forEach(h=>h.reset())}}class gd extends ce{constructor(h=500,g){super(new wo(g),h,g)}}class gn{constructor(h,g,y){this.ecCodewords=h,this.ecBlocks=[g],y&&this.ecBlocks.push(y)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class en{constructor(h,g){this.count=h,this.dataCodewords=g}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class tn{constructor(h,g,y,E,k,T){this.versionNumber=h,this.symbolSizeRows=g,this.symbolSizeColumns=y,this.dataRegionSizeRows=E,this.dataRegionSizeColumns=k,this.ecBlocks=T;let j=0;const L=T.getECCodewords(),z=T.getECBlocks();for(let J of z)j+=J.getCount()*(J.getDataCodewords()+L);this.totalCodewords=j}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(h,g){if(h&1||g&1)throw new O;for(let y of tn.VERSIONS)if(y.symbolSizeRows===h&&y.symbolSizeColumns===g)return y;throw new O}toString(){return""+this.versionNumber}static buildVersions(){return[new tn(1,10,10,8,8,new gn(5,new en(1,3))),new tn(2,12,12,10,10,new gn(7,new en(1,5))),new tn(3,14,14,12,12,new gn(10,new en(1,8))),new tn(4,16,16,14,14,new gn(12,new en(1,12))),new tn(5,18,18,16,16,new gn(14,new en(1,18))),new tn(6,20,20,18,18,new gn(18,new en(1,22))),new tn(7,22,22,20,20,new gn(20,new en(1,30))),new tn(8,24,24,22,22,new gn(24,new en(1,36))),new tn(9,26,26,24,24,new gn(28,new en(1,44))),new tn(10,32,32,14,14,new gn(36,new en(1,62))),new tn(11,36,36,16,16,new gn(42,new en(1,86))),new tn(12,40,40,18,18,new gn(48,new en(1,114))),new tn(13,44,44,20,20,new gn(56,new en(1,144))),new tn(14,48,48,22,22,new gn(68,new en(1,174))),new tn(15,52,52,24,24,new gn(42,new en(2,102))),new tn(16,64,64,14,14,new gn(56,new en(2,140))),new tn(17,72,72,16,16,new gn(36,new en(4,92))),new tn(18,80,80,18,18,new gn(48,new en(4,114))),new tn(19,88,88,20,20,new gn(56,new en(4,144))),new tn(20,96,96,22,22,new gn(68,new en(4,174))),new tn(21,104,104,24,24,new gn(56,new en(6,136))),new tn(22,120,120,18,18,new gn(68,new en(6,175))),new tn(23,132,132,20,20,new gn(62,new en(8,163))),new tn(24,144,144,22,22,new gn(62,new en(8,156),new en(2,155))),new tn(25,8,18,6,16,new gn(7,new en(1,5))),new tn(26,8,32,6,14,new gn(11,new en(1,10))),new tn(27,12,26,10,24,new gn(14,new en(1,16))),new tn(28,12,36,10,16,new gn(18,new en(1,22))),new tn(29,16,36,14,16,new gn(24,new en(1,32))),new tn(30,16,48,14,22,new gn(28,new en(1,49)))]}}tn.VERSIONS=tn.buildVersions();class So{constructor(h){const g=h.getHeight();if(g<8||g>144||g&1)throw new O;this.version=So.readVersion(h),this.mappingBitMatrix=this.extractDataRegion(h),this.readMappingMatrix=new ee(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(h){const g=h.getHeight(),y=h.getWidth();return tn.getVersionForDimensions(g,y)}readCodewords(){const h=new Int8Array(this.version.getTotalCodewords());let g=0,y=4,E=0;const k=this.mappingBitMatrix.getHeight(),T=this.mappingBitMatrix.getWidth();let j=!1,L=!1,z=!1,J=!1;do if(y===k&&E===0&&!j)h[g++]=this.readCorner1(k,T)&255,y-=2,E+=2,j=!0;else if(y===k-2&&E===0&&T&3&&!L)h[g++]=this.readCorner2(k,T)&255,y-=2,E+=2,L=!0;else if(y===k+4&&E===2&&!(T&7)&&!z)h[g++]=this.readCorner3(k,T)&255,y-=2,E+=2,z=!0;else if(y===k-2&&E===0&&(T&7)===4&&!J)h[g++]=this.readCorner4(k,T)&255,y-=2,E+=2,J=!0;else{do y<k&&E>=0&&!this.readMappingMatrix.get(E,y)&&(h[g++]=this.readUtah(y,E,k,T)&255),y-=2,E+=2;while(y>=0&&E<T);y+=1,E+=3;do y>=0&&E<T&&!this.readMappingMatrix.get(E,y)&&(h[g++]=this.readUtah(y,E,k,T)&255),y+=2,E-=2;while(y<k&&E>=0);y+=3,E+=1}while(y<k||E<T);if(g!==this.version.getTotalCodewords())throw new O;return h}readModule(h,g,y,E){return h<0&&(h+=y,g+=4-(y+4&7)),g<0&&(g+=E,h+=4-(E+4&7)),this.readMappingMatrix.set(g,h),this.mappingBitMatrix.get(g,h)}readUtah(h,g,y,E){let k=0;return this.readModule(h-2,g-2,y,E)&&(k|=1),k<<=1,this.readModule(h-2,g-1,y,E)&&(k|=1),k<<=1,this.readModule(h-1,g-2,y,E)&&(k|=1),k<<=1,this.readModule(h-1,g-1,y,E)&&(k|=1),k<<=1,this.readModule(h-1,g,y,E)&&(k|=1),k<<=1,this.readModule(h,g-2,y,E)&&(k|=1),k<<=1,this.readModule(h,g-1,y,E)&&(k|=1),k<<=1,this.readModule(h,g,y,E)&&(k|=1),k}readCorner1(h,g){let y=0;return this.readModule(h-1,0,h,g)&&(y|=1),y<<=1,this.readModule(h-1,1,h,g)&&(y|=1),y<<=1,this.readModule(h-1,2,h,g)&&(y|=1),y<<=1,this.readModule(0,g-2,h,g)&&(y|=1),y<<=1,this.readModule(0,g-1,h,g)&&(y|=1),y<<=1,this.readModule(1,g-1,h,g)&&(y|=1),y<<=1,this.readModule(2,g-1,h,g)&&(y|=1),y<<=1,this.readModule(3,g-1,h,g)&&(y|=1),y}readCorner2(h,g){let y=0;return this.readModule(h-3,0,h,g)&&(y|=1),y<<=1,this.readModule(h-2,0,h,g)&&(y|=1),y<<=1,this.readModule(h-1,0,h,g)&&(y|=1),y<<=1,this.readModule(0,g-4,h,g)&&(y|=1),y<<=1,this.readModule(0,g-3,h,g)&&(y|=1),y<<=1,this.readModule(0,g-2,h,g)&&(y|=1),y<<=1,this.readModule(0,g-1,h,g)&&(y|=1),y<<=1,this.readModule(1,g-1,h,g)&&(y|=1),y}readCorner3(h,g){let y=0;return this.readModule(h-1,0,h,g)&&(y|=1),y<<=1,this.readModule(h-1,g-1,h,g)&&(y|=1),y<<=1,this.readModule(0,g-3,h,g)&&(y|=1),y<<=1,this.readModule(0,g-2,h,g)&&(y|=1),y<<=1,this.readModule(0,g-1,h,g)&&(y|=1),y<<=1,this.readModule(1,g-3,h,g)&&(y|=1),y<<=1,this.readModule(1,g-2,h,g)&&(y|=1),y<<=1,this.readModule(1,g-1,h,g)&&(y|=1),y}readCorner4(h,g){let y=0;return this.readModule(h-3,0,h,g)&&(y|=1),y<<=1,this.readModule(h-2,0,h,g)&&(y|=1),y<<=1,this.readModule(h-1,0,h,g)&&(y|=1),y<<=1,this.readModule(0,g-2,h,g)&&(y|=1),y<<=1,this.readModule(0,g-1,h,g)&&(y|=1),y<<=1,this.readModule(1,g-1,h,g)&&(y|=1),y<<=1,this.readModule(2,g-1,h,g)&&(y|=1),y<<=1,this.readModule(3,g-1,h,g)&&(y|=1),y}extractDataRegion(h){const g=this.version.getSymbolSizeRows(),y=this.version.getSymbolSizeColumns();if(h.getHeight()!==g)throw new f("Dimension of bitMatrix must match the version size");const E=this.version.getDataRegionSizeRows(),k=this.version.getDataRegionSizeColumns(),T=g/E|0,j=y/k|0,L=T*E,z=j*k,J=new ee(z,L);for(let oe=0;oe<T;++oe){const xe=oe*E;for(let Oe=0;Oe<j;++Oe){const ue=Oe*k;for(let Ee=0;Ee<E;++Ee){const Te=oe*(E+2)+1+Ee,Be=xe+Ee;for(let ot=0;ot<k;++ot){const gt=Oe*(k+2)+1+ot;if(h.get(gt,Te)){const vt=ue+ot;J.set(vt,Be)}}}}}return J}}class r1{constructor(h,g){this.numDataCodewords=h,this.codewords=g}static getDataBlocks(h,g){const y=g.getECBlocks();let E=0;const k=y.getECBlocks();for(let Ee of k)E+=Ee.getCount();const T=new Array(E);let j=0;for(let Ee of k)for(let Te=0;Te<Ee.getCount();Te++){const Be=Ee.getDataCodewords(),ot=y.getECCodewords()+Be;T[j++]=new r1(Be,new Uint8Array(ot))}const z=T[0].codewords.length-y.getECCodewords(),J=z-1;let oe=0;for(let Ee=0;Ee<J;Ee++)for(let Te=0;Te<j;Te++)T[Te].codewords[Ee]=h[oe++];const xe=g.getVersionNumber()===24,Oe=xe?8:j;for(let Ee=0;Ee<Oe;Ee++)T[Ee].codewords[z-1]=h[oe++];const ue=T[0].codewords.length;for(let Ee=z;Ee<ue;Ee++)for(let Te=0;Te<j;Te++){const Be=xe?(Te+8)%j:Te,ot=xe&&Be>7?Ee-1:Ee;T[Be].codewords[ot]=h[oe++]}if(oe!==h.length)throw new f;return T}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class n1{constructor(h){this.bytes=h,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(h){if(h<1||h>32||h>this.available())throw new f(""+h);let g=0,y=this.bitOffset,E=this.byteOffset;const k=this.bytes;if(y>0){const T=8-y,j=h<T?h:T,L=T-j,z=255>>8-j<<L;g=(k[E]&z)>>L,h-=j,y+=j,y===8&&(y=0,E++)}if(h>0){for(;h>=8;)g=g<<8|k[E]&255,E++,h-=8;if(h>0){const T=8-h,j=255>>T<<T;g=g<<h|(k[E]&j)>>T,y+=h}}return this.bitOffset=y,this.byteOffset=E,g}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var qi;(function(ae){ae[ae.PAD_ENCODE=0]="PAD_ENCODE",ae[ae.ASCII_ENCODE=1]="ASCII_ENCODE",ae[ae.C40_ENCODE=2]="C40_ENCODE",ae[ae.TEXT_ENCODE=3]="TEXT_ENCODE",ae[ae.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",ae[ae.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",ae[ae.BASE256_ENCODE=6]="BASE256_ENCODE"})(qi||(qi={}));class yc{static decode(h){const g=new n1(h),y=new Z,E=new Z,k=new Array;let T=qi.ASCII_ENCODE;do if(T===qi.ASCII_ENCODE)T=this.decodeAsciiSegment(g,y,E);else{switch(T){case qi.C40_ENCODE:this.decodeC40Segment(g,y);break;case qi.TEXT_ENCODE:this.decodeTextSegment(g,y);break;case qi.ANSIX12_ENCODE:this.decodeAnsiX12Segment(g,y);break;case qi.EDIFACT_ENCODE:this.decodeEdifactSegment(g,y);break;case qi.BASE256_ENCODE:this.decodeBase256Segment(g,y,k);break;default:throw new O}T=qi.ASCII_ENCODE}while(T!==qi.PAD_ENCODE&&g.available()>0);return E.length()>0&&y.append(E.toString()),new ne(h,y.toString(),k.length===0?null:k,null)}static decodeAsciiSegment(h,g,y){let E=!1;do{let k=h.readBits(8);if(k===0)throw new O;if(k<=128)return E&&(k+=128),g.append(String.fromCharCode(k-1)),qi.ASCII_ENCODE;if(k===129)return qi.PAD_ENCODE;if(k<=229){const T=k-130;T<10&&g.append("0"),g.append(""+T)}else switch(k){case 230:return qi.C40_ENCODE;case 231:return qi.BASE256_ENCODE;case 232:g.append("");break;case 233:case 234:break;case 235:E=!0;break;case 236:g.append("[)>05"),y.insert(0,"");break;case 237:g.append("[)>06"),y.insert(0,"");break;case 238:return qi.ANSIX12_ENCODE;case 239:return qi.TEXT_ENCODE;case 240:return qi.EDIFACT_ENCODE;case 241:break;default:if(k!==254||h.available()!==0)throw new O;break}}while(h.available()>0);return qi.ASCII_ENCODE}static decodeC40Segment(h,g){let y=!1;const E=[];let k=0;do{if(h.available()===8)return;const T=h.readBits(8);if(T===254)return;this.parseTwoBytes(T,h.readBits(8),E);for(let j=0;j<3;j++){const L=E[j];switch(k){case 0:if(L<3)k=L+1;else if(L<this.C40_BASIC_SET_CHARS.length){const z=this.C40_BASIC_SET_CHARS[L];y?(g.append(String.fromCharCode(z.charCodeAt(0)+128)),y=!1):g.append(z)}else throw new O;break;case 1:y?(g.append(String.fromCharCode(L+128)),y=!1):g.append(String.fromCharCode(L)),k=0;break;case 2:if(L<this.C40_SHIFT2_SET_CHARS.length){const z=this.C40_SHIFT2_SET_CHARS[L];y?(g.append(String.fromCharCode(z.charCodeAt(0)+128)),y=!1):g.append(z)}else switch(L){case 27:g.append("");break;case 30:y=!0;break;default:throw new O}k=0;break;case 3:y?(g.append(String.fromCharCode(L+224)),y=!1):g.append(String.fromCharCode(L+96)),k=0;break;default:throw new O}}}while(h.available()>0)}static decodeTextSegment(h,g){let y=!1,E=[],k=0;do{if(h.available()===8)return;const T=h.readBits(8);if(T===254)return;this.parseTwoBytes(T,h.readBits(8),E);for(let j=0;j<3;j++){const L=E[j];switch(k){case 0:if(L<3)k=L+1;else if(L<this.TEXT_BASIC_SET_CHARS.length){const z=this.TEXT_BASIC_SET_CHARS[L];y?(g.append(String.fromCharCode(z.charCodeAt(0)+128)),y=!1):g.append(z)}else throw new O;break;case 1:y?(g.append(String.fromCharCode(L+128)),y=!1):g.append(String.fromCharCode(L)),k=0;break;case 2:if(L<this.TEXT_SHIFT2_SET_CHARS.length){const z=this.TEXT_SHIFT2_SET_CHARS[L];y?(g.append(String.fromCharCode(z.charCodeAt(0)+128)),y=!1):g.append(z)}else switch(L){case 27:g.append("");break;case 30:y=!0;break;default:throw new O}k=0;break;case 3:if(L<this.TEXT_SHIFT3_SET_CHARS.length){const z=this.TEXT_SHIFT3_SET_CHARS[L];y?(g.append(String.fromCharCode(z.charCodeAt(0)+128)),y=!1):g.append(z),k=0}else throw new O;break;default:throw new O}}}while(h.available()>0)}static decodeAnsiX12Segment(h,g){const y=[];do{if(h.available()===8)return;const E=h.readBits(8);if(E===254)return;this.parseTwoBytes(E,h.readBits(8),y);for(let k=0;k<3;k++){const T=y[k];switch(T){case 0:g.append("\r");break;case 1:g.append("*");break;case 2:g.append(">");break;case 3:g.append(" ");break;default:if(T<14)g.append(String.fromCharCode(T+44));else if(T<40)g.append(String.fromCharCode(T+51));else throw new O;break}}}while(h.available()>0)}static parseTwoBytes(h,g,y){let E=(h<<8)+g-1,k=Math.floor(E/1600);y[0]=k,E-=k*1600,k=Math.floor(E/40),y[1]=k,y[2]=E-k*40}static decodeEdifactSegment(h,g){do{if(h.available()<=16)return;for(let y=0;y<4;y++){let E=h.readBits(6);if(E===31){const k=8-h.getBitOffset();k!==8&&h.readBits(k);return}E&32||(E|=64),g.append(String.fromCharCode(E))}}while(h.available()>0)}static decodeBase256Segment(h,g,y){let E=1+h.getByteOffset();const k=this.unrandomize255State(h.readBits(8),E++);let T;if(k===0?T=h.available()/8|0:k<250?T=k:T=250*(k-249)+this.unrandomize255State(h.readBits(8),E++),T<0)throw new O;const j=new Uint8Array(T);for(let L=0;L<T;L++){if(h.available()<8)throw new O;j[L]=this.unrandomize255State(h.readBits(8),E++)}y.push(j);try{g.append(U.decode(j,H.ISO88591))}catch(L){throw new He("Platform does not support required encoding: "+L.message)}}static unrandomize255State(h,g){const y=149*g%255+1,E=h-y;return E>=0?E:E+256}}yc.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],yc.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],yc.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],yc.TEXT_SHIFT2_SET_CHARS=yc.C40_SHIFT2_SET_CHARS,yc.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class _P{constructor(){this.rsDecoder=new je(Ae.DATA_MATRIX_FIELD_256)}decode(h){const g=new So(h),y=g.getVersion(),E=g.readCodewords(),k=r1.getDataBlocks(E,y);let T=0;for(let z of k)T+=z.getNumDataCodewords();const j=new Uint8Array(T),L=k.length;for(let z=0;z<L;z++){const J=k[z],oe=J.getCodewords(),xe=J.getNumDataCodewords();this.correctErrors(oe,xe);for(let Oe=0;Oe<xe;Oe++)j[Oe*L+z]=oe[Oe]}return yc.decode(j)}correctErrors(h,g){const y=new Int32Array(h);try{this.rsDecoder.decode(y,h.length-g)}catch{throw new m}for(let E=0;E<g;E++)h[E]=y[E]}}class Ni{constructor(h){this.image=h,this.rectangleDetector=new ct(this.image)}detect(){const h=this.rectangleDetector.detect();let g=this.detectSolid1(h);if(g=this.detectSolid2(g),g[3]=this.correctTopRight(g),!g[3])throw new V;g=this.shiftToModuleCenter(g);const y=g[0],E=g[1],k=g[2],T=g[3];let j=this.transitionsBetween(y,T)+1,L=this.transitionsBetween(k,T)+1;(j&1)===1&&(j+=1),(L&1)===1&&(L+=1),4*j<7*L&&4*L<7*j&&(j=L=Math.max(j,L));let z=Ni.sampleGrid(this.image,y,E,k,T,j,L);return new _r(z,[y,E,k,T])}static shiftPoint(h,g,y){let E=(g.getX()-h.getX())/(y+1),k=(g.getY()-h.getY())/(y+1);return new ht(h.getX()+E,h.getY()+k)}static moveAway(h,g,y){let E=h.getX(),k=h.getY();return E<g?E-=1:E+=1,k<y?k-=1:k+=1,new ht(E,k)}detectSolid1(h){let g=h[0],y=h[1],E=h[3],k=h[2],T=this.transitionsBetween(g,y),j=this.transitionsBetween(y,E),L=this.transitionsBetween(E,k),z=this.transitionsBetween(k,g),J=T,oe=[k,g,y,E];return J>j&&(J=j,oe[0]=g,oe[1]=y,oe[2]=E,oe[3]=k),J>L&&(J=L,oe[0]=y,oe[1]=E,oe[2]=k,oe[3]=g),J>z&&(oe[0]=E,oe[1]=k,oe[2]=g,oe[3]=y),oe}detectSolid2(h){let g=h[0],y=h[1],E=h[2],k=h[3],T=this.transitionsBetween(g,k),j=Ni.shiftPoint(y,E,(T+1)*4),L=Ni.shiftPoint(E,y,(T+1)*4),z=this.transitionsBetween(j,g),J=this.transitionsBetween(L,k);return z<J?(h[0]=g,h[1]=y,h[2]=E,h[3]=k):(h[0]=y,h[1]=E,h[2]=k,h[3]=g),h}correctTopRight(h){let g=h[0],y=h[1],E=h[2],k=h[3],T=this.transitionsBetween(g,k),j=this.transitionsBetween(y,k),L=Ni.shiftPoint(g,y,(j+1)*4),z=Ni.shiftPoint(E,y,(T+1)*4);T=this.transitionsBetween(L,k),j=this.transitionsBetween(z,k);let J=new ht(k.getX()+(E.getX()-y.getX())/(T+1),k.getY()+(E.getY()-y.getY())/(T+1)),oe=new ht(k.getX()+(g.getX()-y.getX())/(j+1),k.getY()+(g.getY()-y.getY())/(j+1));if(!this.isValid(J))return this.isValid(oe)?oe:null;if(!this.isValid(oe))return J;let xe=this.transitionsBetween(L,J)+this.transitionsBetween(z,J),Oe=this.transitionsBetween(L,oe)+this.transitionsBetween(z,oe);return xe>Oe?J:oe}shiftToModuleCenter(h){let g=h[0],y=h[1],E=h[2],k=h[3],T=this.transitionsBetween(g,k)+1,j=this.transitionsBetween(E,k)+1,L=Ni.shiftPoint(g,y,j*4),z=Ni.shiftPoint(E,y,T*4);T=this.transitionsBetween(L,k)+1,j=this.transitionsBetween(z,k)+1,(T&1)===1&&(T+=1),(j&1)===1&&(j+=1);let J=(g.getX()+y.getX()+E.getX()+k.getX())/4,oe=(g.getY()+y.getY()+E.getY()+k.getY())/4;g=Ni.moveAway(g,J,oe),y=Ni.moveAway(y,J,oe),E=Ni.moveAway(E,J,oe),k=Ni.moveAway(k,J,oe);let xe,Oe;return L=Ni.shiftPoint(g,y,j*4),L=Ni.shiftPoint(L,k,T*4),xe=Ni.shiftPoint(y,g,j*4),xe=Ni.shiftPoint(xe,E,T*4),z=Ni.shiftPoint(E,k,j*4),z=Ni.shiftPoint(z,y,T*4),Oe=Ni.shiftPoint(k,E,j*4),Oe=Ni.shiftPoint(Oe,g,T*4),[L,xe,z,Oe]}isValid(h){return h.getX()>=0&&h.getX()<this.image.getWidth()&&h.getY()>0&&h.getY()<this.image.getHeight()}static sampleGrid(h,g,y,E,k,T,j){return Ht.getInstance().sampleGrid(h,T,j,.5,.5,T-.5,.5,T-.5,j-.5,.5,j-.5,g.getX(),g.getY(),k.getX(),k.getY(),E.getX(),E.getY(),y.getX(),y.getY())}transitionsBetween(h,g){let y=Math.trunc(h.getX()),E=Math.trunc(h.getY()),k=Math.trunc(g.getX()),T=Math.trunc(g.getY()),j=Math.abs(T-E)>Math.abs(k-y);if(j){let Ee=y;y=E,E=Ee,Ee=k,k=T,T=Ee}let L=Math.abs(k-y),z=Math.abs(T-E),J=-L/2,oe=E<T?1:-1,xe=y<k?1:-1,Oe=0,ue=this.image.get(j?E:y,j?y:E);for(let Ee=y,Te=E;Ee!==k;Ee+=xe){let Be=this.image.get(j?Te:Ee,j?Ee:Te);if(Be!==ue&&(Oe++,ue=Be),J+=z,J>0){if(Te===T)break;Te+=oe,J-=L}}return Oe}}class Rl{constructor(){this.decoder=new _P}decode(h,g=null){let y,E;if(g!=null&&g.has(P.PURE_BARCODE)){const z=Rl.extractPureBits(h.getBlackMatrix());y=this.decoder.decode(z),E=Rl.NO_POINTS}else{const z=new Ni(h.getBlackMatrix()).detect();y=this.decoder.decode(z.getBits()),E=z.getPoints()}const k=y.getRawBytes(),T=new W(y.getText(),k,8*k.length,E,ie.DATA_MATRIX,v.currentTimeMillis()),j=y.getByteSegments();j!=null&&T.putMetadata(re.BYTE_SEGMENTS,j);const L=y.getECLevel();return L!=null&&T.putMetadata(re.ERROR_CORRECTION_LEVEL,L),T}reset(){}static extractPureBits(h){const g=h.getTopLeftOnBit(),y=h.getBottomRightOnBit();if(g==null||y==null)throw new V;const E=this.moduleSize(g,h);let k=g[1];const T=y[1];let j=g[0];const z=(y[0]-j+1)/E,J=(T-k+1)/E;if(z<=0||J<=0)throw new V;const oe=E/2;k+=oe,j+=oe;const xe=new ee(z,J);for(let Oe=0;Oe<J;Oe++){const ue=k+Oe*E;for(let Ee=0;Ee<z;Ee++)h.get(j+Ee*E,ue)&&xe.set(Ee,Oe)}return xe}static moduleSize(h,g){const y=g.getWidth();let E=h[0];const k=h[1];for(;E<y&&g.get(E,k);)E++;if(E===y)throw new V;const T=E-h[0];if(T===0)throw new V;return T}}Rl.NO_POINTS=[];class VC extends ce{constructor(h=500){super(new Rl,h)}}var up;(function(ae){ae[ae.L=0]="L",ae[ae.M=1]="M",ae[ae.Q=2]="Q",ae[ae.H=3]="H"})(up||(up={}));class Kn{constructor(h,g,y){this.value=h,this.stringValue=g,this.bits=y,Kn.FOR_BITS.set(y,this),Kn.FOR_VALUE.set(h,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(h){switch(h){case"L":return Kn.L;case"M":return Kn.M;case"Q":return Kn.Q;case"H":return Kn.H;default:throw new d(h+"not available")}}toString(){return this.stringValue}equals(h){if(!(h instanceof Kn))return!1;const g=h;return this.value===g.value}static forBits(h){if(h<0||h>=Kn.FOR_BITS.size)throw new f;return Kn.FOR_BITS.get(h)}}Kn.FOR_BITS=new Map,Kn.FOR_VALUE=new Map,Kn.L=new Kn(up.L,"L",1),Kn.M=new Kn(up.M,"M",0),Kn.Q=new Kn(up.Q,"Q",3),Kn.H=new Kn(up.H,"H",2);class Da{constructor(h){this.errorCorrectionLevel=Kn.forBits(h>>3&3),this.dataMask=h&7}static numBitsDiffering(h,g){return C.bitCount(h^g)}static decodeFormatInformation(h,g){const y=Da.doDecodeFormatInformation(h,g);return y!==null?y:Da.doDecodeFormatInformation(h^Da.FORMAT_INFO_MASK_QR,g^Da.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(h,g){let y=Number.MAX_SAFE_INTEGER,E=0;for(const k of Da.FORMAT_INFO_DECODE_LOOKUP){const T=k[0];if(T===h||T===g)return new Da(k[1]);let j=Da.numBitsDiffering(h,T);j<y&&(E=k[1],y=j),h!==g&&(j=Da.numBitsDiffering(g,T),j<y&&(E=k[1],y=j))}return y<=3?new Da(E):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(h){if(!(h instanceof Da))return!1;const g=h;return this.errorCorrectionLevel===g.errorCorrectionLevel&&this.dataMask===g.dataMask}}Da.FORMAT_INFO_MASK_QR=21522,Da.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Ye{constructor(h,...g){this.ecCodewordsPerBlock=h,this.ecBlocks=g}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let h=0;const g=this.ecBlocks;for(const y of g)h+=y.getCount();return h}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Ie{constructor(h,g){this.count=h,this.dataCodewords=g}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ir{constructor(h,g,...y){this.versionNumber=h,this.alignmentPatternCenters=g,this.ecBlocks=y;let E=0;const k=y[0].getECCodewordsPerBlock(),T=y[0].getECBlocks();for(const j of T)E+=j.getCount()*(j.getDataCodewords()+k);this.totalCodewords=E}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(h){return this.ecBlocks[h.getValue()]}static getProvisionalVersionForDimension(h){if(h%4!==1)throw new O;try{return this.getVersionForNumber((h-17)/4)}catch{throw new O}}static getVersionForNumber(h){if(h<1||h>40)throw new f;return ir.VERSIONS[h-1]}static decodeVersionInformation(h){let g=Number.MAX_SAFE_INTEGER,y=0;for(let E=0;E<ir.VERSION_DECODE_INFO.length;E++){const k=ir.VERSION_DECODE_INFO[E];if(k===h)return ir.getVersionForNumber(E+7);const T=Da.numBitsDiffering(h,k);T<g&&(y=E+7,g=T)}return g<=3?ir.getVersionForNumber(y):null}buildFunctionPattern(){const h=this.getDimensionForVersion(),g=new ee(h);g.setRegion(0,0,9,9),g.setRegion(h-8,0,8,9),g.setRegion(0,h-8,9,8);const y=this.alignmentPatternCenters.length;for(let E=0;E<y;E++){const k=this.alignmentPatternCenters[E]-2;for(let T=0;T<y;T++)E===0&&(T===0||T===y-1)||E===y-1&&T===0||g.setRegion(this.alignmentPatternCenters[T]-2,k,5,5)}return g.setRegion(6,9,1,h-17),g.setRegion(9,6,h-17,1),this.versionNumber>6&&(g.setRegion(h-11,0,3,6),g.setRegion(0,h-11,6,3)),g}toString(){return""+this.versionNumber}}ir.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ir.VERSIONS=[new ir(1,new Int32Array(0),new Ye(7,new Ie(1,19)),new Ye(10,new Ie(1,16)),new Ye(13,new Ie(1,13)),new Ye(17,new Ie(1,9))),new ir(2,Int32Array.from([6,18]),new Ye(10,new Ie(1,34)),new Ye(16,new Ie(1,28)),new Ye(22,new Ie(1,22)),new Ye(28,new Ie(1,16))),new ir(3,Int32Array.from([6,22]),new Ye(15,new Ie(1,55)),new Ye(26,new Ie(1,44)),new Ye(18,new Ie(2,17)),new Ye(22,new Ie(2,13))),new ir(4,Int32Array.from([6,26]),new Ye(20,new Ie(1,80)),new Ye(18,new Ie(2,32)),new Ye(26,new Ie(2,24)),new Ye(16,new Ie(4,9))),new ir(5,Int32Array.from([6,30]),new Ye(26,new Ie(1,108)),new Ye(24,new Ie(2,43)),new Ye(18,new Ie(2,15),new Ie(2,16)),new Ye(22,new Ie(2,11),new Ie(2,12))),new ir(6,Int32Array.from([6,34]),new Ye(18,new Ie(2,68)),new Ye(16,new Ie(4,27)),new Ye(24,new Ie(4,19)),new Ye(28,new Ie(4,15))),new ir(7,Int32Array.from([6,22,38]),new Ye(20,new Ie(2,78)),new Ye(18,new Ie(4,31)),new Ye(18,new Ie(2,14),new Ie(4,15)),new Ye(26,new Ie(4,13),new Ie(1,14))),new ir(8,Int32Array.from([6,24,42]),new Ye(24,new Ie(2,97)),new Ye(22,new Ie(2,38),new Ie(2,39)),new Ye(22,new Ie(4,18),new Ie(2,19)),new Ye(26,new Ie(4,14),new Ie(2,15))),new ir(9,Int32Array.from([6,26,46]),new Ye(30,new Ie(2,116)),new Ye(22,new Ie(3,36),new Ie(2,37)),new Ye(20,new Ie(4,16),new Ie(4,17)),new Ye(24,new Ie(4,12),new Ie(4,13))),new ir(10,Int32Array.from([6,28,50]),new Ye(18,new Ie(2,68),new Ie(2,69)),new Ye(26,new Ie(4,43),new Ie(1,44)),new Ye(24,new Ie(6,19),new Ie(2,20)),new Ye(28,new Ie(6,15),new Ie(2,16))),new ir(11,Int32Array.from([6,30,54]),new Ye(20,new Ie(4,81)),new Ye(30,new Ie(1,50),new Ie(4,51)),new Ye(28,new Ie(4,22),new Ie(4,23)),new Ye(24,new Ie(3,12),new Ie(8,13))),new ir(12,Int32Array.from([6,32,58]),new Ye(24,new Ie(2,92),new Ie(2,93)),new Ye(22,new Ie(6,36),new Ie(2,37)),new Ye(26,new Ie(4,20),new Ie(6,21)),new Ye(28,new Ie(7,14),new Ie(4,15))),new ir(13,Int32Array.from([6,34,62]),new Ye(26,new Ie(4,107)),new Ye(22,new Ie(8,37),new Ie(1,38)),new Ye(24,new Ie(8,20),new Ie(4,21)),new Ye(22,new Ie(12,11),new Ie(4,12))),new ir(14,Int32Array.from([6,26,46,66]),new Ye(30,new Ie(3,115),new Ie(1,116)),new Ye(24,new Ie(4,40),new Ie(5,41)),new Ye(20,new Ie(11,16),new Ie(5,17)),new Ye(24,new Ie(11,12),new Ie(5,13))),new ir(15,Int32Array.from([6,26,48,70]),new Ye(22,new Ie(5,87),new Ie(1,88)),new Ye(24,new Ie(5,41),new Ie(5,42)),new Ye(30,new Ie(5,24),new Ie(7,25)),new Ye(24,new Ie(11,12),new Ie(7,13))),new ir(16,Int32Array.from([6,26,50,74]),new Ye(24,new Ie(5,98),new Ie(1,99)),new Ye(28,new Ie(7,45),new Ie(3,46)),new Ye(24,new Ie(15,19),new Ie(2,20)),new Ye(30,new Ie(3,15),new Ie(13,16))),new ir(17,Int32Array.from([6,30,54,78]),new Ye(28,new Ie(1,107),new Ie(5,108)),new Ye(28,new Ie(10,46),new Ie(1,47)),new Ye(28,new Ie(1,22),new Ie(15,23)),new Ye(28,new Ie(2,14),new Ie(17,15))),new ir(18,Int32Array.from([6,30,56,82]),new Ye(30,new Ie(5,120),new Ie(1,121)),new Ye(26,new Ie(9,43),new Ie(4,44)),new Ye(28,new Ie(17,22),new Ie(1,23)),new Ye(28,new Ie(2,14),new Ie(19,15))),new ir(19,Int32Array.from([6,30,58,86]),new Ye(28,new Ie(3,113),new Ie(4,114)),new Ye(26,new Ie(3,44),new Ie(11,45)),new Ye(26,new Ie(17,21),new Ie(4,22)),new Ye(26,new Ie(9,13),new Ie(16,14))),new ir(20,Int32Array.from([6,34,62,90]),new Ye(28,new Ie(3,107),new Ie(5,108)),new Ye(26,new Ie(3,41),new Ie(13,42)),new Ye(30,new Ie(15,24),new Ie(5,25)),new Ye(28,new Ie(15,15),new Ie(10,16))),new ir(21,Int32Array.from([6,28,50,72,94]),new Ye(28,new Ie(4,116),new Ie(4,117)),new Ye(26,new Ie(17,42)),new Ye(28,new Ie(17,22),new Ie(6,23)),new Ye(30,new Ie(19,16),new Ie(6,17))),new ir(22,Int32Array.from([6,26,50,74,98]),new Ye(28,new Ie(2,111),new Ie(7,112)),new Ye(28,new Ie(17,46)),new Ye(30,new Ie(7,24),new Ie(16,25)),new Ye(24,new Ie(34,13))),new ir(23,Int32Array.from([6,30,54,78,102]),new Ye(30,new Ie(4,121),new Ie(5,122)),new Ye(28,new Ie(4,47),new Ie(14,48)),new Ye(30,new Ie(11,24),new Ie(14,25)),new Ye(30,new Ie(16,15),new Ie(14,16))),new ir(24,Int32Array.from([6,28,54,80,106]),new Ye(30,new Ie(6,117),new Ie(4,118)),new Ye(28,new Ie(6,45),new Ie(14,46)),new Ye(30,new Ie(11,24),new Ie(16,25)),new Ye(30,new Ie(30,16),new Ie(2,17))),new ir(25,Int32Array.from([6,32,58,84,110]),new Ye(26,new Ie(8,106),new Ie(4,107)),new Ye(28,new Ie(8,47),new Ie(13,48)),new Ye(30,new Ie(7,24),new Ie(22,25)),new Ye(30,new Ie(22,15),new Ie(13,16))),new ir(26,Int32Array.from([6,30,58,86,114]),new Ye(28,new Ie(10,114),new Ie(2,115)),new Ye(28,new Ie(19,46),new Ie(4,47)),new Ye(28,new Ie(28,22),new Ie(6,23)),new Ye(30,new Ie(33,16),new Ie(4,17))),new ir(27,Int32Array.from([6,34,62,90,118]),new Ye(30,new Ie(8,122),new Ie(4,123)),new Ye(28,new Ie(22,45),new Ie(3,46)),new Ye(30,new Ie(8,23),new Ie(26,24)),new Ye(30,new Ie(12,15),new Ie(28,16))),new ir(28,Int32Array.from([6,26,50,74,98,122]),new Ye(30,new Ie(3,117),new Ie(10,118)),new Ye(28,new Ie(3,45),new Ie(23,46)),new Ye(30,new Ie(4,24),new Ie(31,25)),new Ye(30,new Ie(11,15),new Ie(31,16))),new ir(29,Int32Array.from([6,30,54,78,102,126]),new Ye(30,new Ie(7,116),new Ie(7,117)),new Ye(28,new Ie(21,45),new Ie(7,46)),new Ye(30,new Ie(1,23),new Ie(37,24)),new Ye(30,new Ie(19,15),new Ie(26,16))),new ir(30,Int32Array.from([6,26,52,78,104,130]),new Ye(30,new Ie(5,115),new Ie(10,116)),new Ye(28,new Ie(19,47),new Ie(10,48)),new Ye(30,new Ie(15,24),new Ie(25,25)),new Ye(30,new Ie(23,15),new Ie(25,16))),new ir(31,Int32Array.from([6,30,56,82,108,134]),new Ye(30,new Ie(13,115),new Ie(3,116)),new Ye(28,new Ie(2,46),new Ie(29,47)),new Ye(30,new Ie(42,24),new Ie(1,25)),new Ye(30,new Ie(23,15),new Ie(28,16))),new ir(32,Int32Array.from([6,34,60,86,112,138]),new Ye(30,new Ie(17,115)),new Ye(28,new Ie(10,46),new Ie(23,47)),new Ye(30,new Ie(10,24),new Ie(35,25)),new Ye(30,new Ie(19,15),new Ie(35,16))),new ir(33,Int32Array.from([6,30,58,86,114,142]),new Ye(30,new Ie(17,115),new Ie(1,116)),new Ye(28,new Ie(14,46),new Ie(21,47)),new Ye(30,new Ie(29,24),new Ie(19,25)),new Ye(30,new Ie(11,15),new Ie(46,16))),new ir(34,Int32Array.from([6,34,62,90,118,146]),new Ye(30,new Ie(13,115),new Ie(6,116)),new Ye(28,new Ie(14,46),new Ie(23,47)),new Ye(30,new Ie(44,24),new Ie(7,25)),new Ye(30,new Ie(59,16),new Ie(1,17))),new ir(35,Int32Array.from([6,30,54,78,102,126,150]),new Ye(30,new Ie(12,121),new Ie(7,122)),new Ye(28,new Ie(12,47),new Ie(26,48)),new Ye(30,new Ie(39,24),new Ie(14,25)),new Ye(30,new Ie(22,15),new Ie(41,16))),new ir(36,Int32Array.from([6,24,50,76,102,128,154]),new Ye(30,new Ie(6,121),new Ie(14,122)),new Ye(28,new Ie(6,47),new Ie(34,48)),new Ye(30,new Ie(46,24),new Ie(10,25)),new Ye(30,new Ie(2,15),new Ie(64,16))),new ir(37,Int32Array.from([6,28,54,80,106,132,158]),new Ye(30,new Ie(17,122),new Ie(4,123)),new Ye(28,new Ie(29,46),new Ie(14,47)),new Ye(30,new Ie(49,24),new Ie(10,25)),new Ye(30,new Ie(24,15),new Ie(46,16))),new ir(38,Int32Array.from([6,32,58,84,110,136,162]),new Ye(30,new Ie(4,122),new Ie(18,123)),new Ye(28,new Ie(13,46),new Ie(32,47)),new Ye(30,new Ie(48,24),new Ie(14,25)),new Ye(30,new Ie(42,15),new Ie(32,16))),new ir(39,Int32Array.from([6,26,54,82,110,138,166]),new Ye(30,new Ie(20,117),new Ie(4,118)),new Ye(28,new Ie(40,47),new Ie(7,48)),new Ye(30,new Ie(43,24),new Ie(22,25)),new Ye(30,new Ie(10,15),new Ie(67,16))),new ir(40,Int32Array.from([6,30,58,86,114,142,170]),new Ye(30,new Ie(19,118),new Ie(6,119)),new Ye(28,new Ie(18,47),new Ie(31,48)),new Ye(30,new Ie(34,24),new Ie(34,25)),new Ye(30,new Ie(20,15),new Ie(61,16)))];var Gi;(function(ae){ae[ae.DATA_MASK_000=0]="DATA_MASK_000",ae[ae.DATA_MASK_001=1]="DATA_MASK_001",ae[ae.DATA_MASK_010=2]="DATA_MASK_010",ae[ae.DATA_MASK_011=3]="DATA_MASK_011",ae[ae.DATA_MASK_100=4]="DATA_MASK_100",ae[ae.DATA_MASK_101=5]="DATA_MASK_101",ae[ae.DATA_MASK_110=6]="DATA_MASK_110",ae[ae.DATA_MASK_111=7]="DATA_MASK_111"})(Gi||(Gi={}));class zs{constructor(h,g){this.value=h,this.isMasked=g}unmaskBitMatrix(h,g){for(let y=0;y<g;y++)for(let E=0;E<g;E++)this.isMasked(y,E)&&h.flip(E,y)}}zs.values=new Map([[Gi.DATA_MASK_000,new zs(Gi.DATA_MASK_000,(ae,h)=>(ae+h&1)===0)],[Gi.DATA_MASK_001,new zs(Gi.DATA_MASK_001,(ae,h)=>(ae&1)===0)],[Gi.DATA_MASK_010,new zs(Gi.DATA_MASK_010,(ae,h)=>h%3===0)],[Gi.DATA_MASK_011,new zs(Gi.DATA_MASK_011,(ae,h)=>(ae+h)%3===0)],[Gi.DATA_MASK_100,new zs(Gi.DATA_MASK_100,(ae,h)=>(Math.floor(ae/2)+Math.floor(h/3)&1)===0)],[Gi.DATA_MASK_101,new zs(Gi.DATA_MASK_101,(ae,h)=>ae*h%6===0)],[Gi.DATA_MASK_110,new zs(Gi.DATA_MASK_110,(ae,h)=>ae*h%6<3)],[Gi.DATA_MASK_111,new zs(Gi.DATA_MASK_111,(ae,h)=>(ae+h+ae*h%3&1)===0)]]);class dp{constructor(h){const g=h.getHeight();if(g<21||(g&3)!==1)throw new O;this.bitMatrix=h}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let h=0;for(let k=0;k<6;k++)h=this.copyBit(k,8,h);h=this.copyBit(7,8,h),h=this.copyBit(8,8,h),h=this.copyBit(8,7,h);for(let k=5;k>=0;k--)h=this.copyBit(8,k,h);const g=this.bitMatrix.getHeight();let y=0;const E=g-7;for(let k=g-1;k>=E;k--)y=this.copyBit(8,k,y);for(let k=g-8;k<g;k++)y=this.copyBit(k,8,y);if(this.parsedFormatInfo=Da.decodeFormatInformation(h,y),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new O}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const h=this.bitMatrix.getHeight(),g=Math.floor((h-17)/4);if(g<=6)return ir.getVersionForNumber(g);let y=0;const E=h-11;for(let T=5;T>=0;T--)for(let j=h-9;j>=E;j--)y=this.copyBit(j,T,y);let k=ir.decodeVersionInformation(y);if(k!==null&&k.getDimensionForVersion()===h)return this.parsedVersion=k,k;y=0;for(let T=5;T>=0;T--)for(let j=h-9;j>=E;j--)y=this.copyBit(T,j,y);if(k=ir.decodeVersionInformation(y),k!==null&&k.getDimensionForVersion()===h)return this.parsedVersion=k,k;throw new O}copyBit(h,g,y){return(this.isMirror?this.bitMatrix.get(g,h):this.bitMatrix.get(h,g))?y<<1|1:y<<1}readCodewords(){const h=this.readFormatInformation(),g=this.readVersion(),y=zs.values.get(h.getDataMask()),E=this.bitMatrix.getHeight();y.unmaskBitMatrix(this.bitMatrix,E);const k=g.buildFunctionPattern();let T=!0;const j=new Uint8Array(g.getTotalCodewords());let L=0,z=0,J=0;for(let oe=E-1;oe>0;oe-=2){oe===6&&oe--;for(let xe=0;xe<E;xe++){const Oe=T?E-1-xe:xe;for(let ue=0;ue<2;ue++)k.get(oe-ue,Oe)||(J++,z<<=1,this.bitMatrix.get(oe-ue,Oe)&&(z|=1),J===8&&(j[L++]=z,J=0,z=0))}T=!T}if(L!==g.getTotalCodewords())throw new O;return j}remask(){if(this.parsedFormatInfo===null)return;const h=zs.values[this.parsedFormatInfo.getDataMask()],g=this.bitMatrix.getHeight();h.unmaskBitMatrix(this.bitMatrix,g)}setMirror(h){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=h}mirror(){const h=this.bitMatrix;for(let g=0,y=h.getWidth();g<y;g++)for(let E=g+1,k=h.getHeight();E<k;E++)h.get(g,E)!==h.get(E,g)&&(h.flip(E,g),h.flip(g,E))}}class i1{constructor(h,g){this.numDataCodewords=h,this.codewords=g}static getDataBlocks(h,g,y){if(h.length!==g.getTotalCodewords())throw new f;const E=g.getECBlocksForLevel(y);let k=0;const T=E.getECBlocks();for(const ue of T)k+=ue.getCount();const j=new Array(k);let L=0;for(const ue of T)for(let Ee=0;Ee<ue.getCount();Ee++){const Te=ue.getDataCodewords(),Be=E.getECCodewordsPerBlock()+Te;j[L++]=new i1(Te,new Uint8Array(Be))}const z=j[0].codewords.length;let J=j.length-1;for(;J>=0&&j[J].codewords.length!==z;)J--;J++;const oe=z-E.getECCodewordsPerBlock();let xe=0;for(let ue=0;ue<oe;ue++)for(let Ee=0;Ee<L;Ee++)j[Ee].codewords[ue]=h[xe++];for(let ue=J;ue<L;ue++)j[ue].codewords[oe]=h[xe++];const Oe=j[0].codewords.length;for(let ue=oe;ue<Oe;ue++)for(let Ee=0;Ee<L;Ee++){const Te=Ee<J?ue:ue+1;j[Ee].codewords[Te]=h[xe++]}return j}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Eo;(function(ae){ae[ae.TERMINATOR=0]="TERMINATOR",ae[ae.NUMERIC=1]="NUMERIC",ae[ae.ALPHANUMERIC=2]="ALPHANUMERIC",ae[ae.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",ae[ae.BYTE=4]="BYTE",ae[ae.ECI=5]="ECI",ae[ae.KANJI=6]="KANJI",ae[ae.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",ae[ae.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",ae[ae.HANZI=9]="HANZI"})(Eo||(Eo={}));class mr{constructor(h,g,y,E){this.value=h,this.stringValue=g,this.characterCountBitsForVersions=y,this.bits=E,mr.FOR_BITS.set(E,this),mr.FOR_VALUE.set(h,this)}static forBits(h){const g=mr.FOR_BITS.get(h);if(g===void 0)throw new f;return g}getCharacterCountBits(h){const g=h.getVersionNumber();let y;return g<=9?y=0:g<=26?y=1:y=2,this.characterCountBitsForVersions[y]}getValue(){return this.value}getBits(){return this.bits}equals(h){if(!(h instanceof mr))return!1;const g=h;return this.value===g.value}toString(){return this.stringValue}}mr.FOR_BITS=new Map,mr.FOR_VALUE=new Map,mr.TERMINATOR=new mr(Eo.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),mr.NUMERIC=new mr(Eo.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),mr.ALPHANUMERIC=new mr(Eo.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),mr.STRUCTURED_APPEND=new mr(Eo.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),mr.BYTE=new mr(Eo.BYTE,"BYTE",Int32Array.from([8,16,16]),4),mr.ECI=new mr(Eo.ECI,"ECI",Int32Array.from([0,0,0]),7),mr.KANJI=new mr(Eo.KANJI,"KANJI",Int32Array.from([8,10,12]),8),mr.FNC1_FIRST_POSITION=new mr(Eo.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),mr.FNC1_SECOND_POSITION=new mr(Eo.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),mr.HANZI=new mr(Eo.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class di{static decode(h,g,y,E){const k=new n1(h);let T=new Z;const j=new Array;let L=-1,z=-1;try{let J=null,oe=!1,xe;do{if(k.available()<4)xe=mr.TERMINATOR;else{const Oe=k.readBits(4);xe=mr.forBits(Oe)}switch(xe){case mr.TERMINATOR:break;case mr.FNC1_FIRST_POSITION:case mr.FNC1_SECOND_POSITION:oe=!0;break;case mr.STRUCTURED_APPEND:if(k.available()<16)throw new O;L=k.readBits(8),z=k.readBits(8);break;case mr.ECI:const Oe=di.parseECIValue(k);if(J=M.getCharacterSetECIByValue(Oe),J===null)throw new O;break;case mr.HANZI:const ue=k.readBits(4),Ee=k.readBits(xe.getCharacterCountBits(g));ue===di.GB2312_SUBSET&&di.decodeHanziSegment(k,T,Ee);break;default:const Te=k.readBits(xe.getCharacterCountBits(g));switch(xe){case mr.NUMERIC:di.decodeNumericSegment(k,T,Te);break;case mr.ALPHANUMERIC:di.decodeAlphanumericSegment(k,T,Te,oe);break;case mr.BYTE:di.decodeByteSegment(k,T,Te,J,j,E);break;case mr.KANJI:di.decodeKanjiSegment(k,T,Te);break;default:throw new O}break}}while(xe!==mr.TERMINATOR)}catch{throw new O}return new ne(h,T.toString(),j.length===0?null:j,y===null?null:y.toString(),L,z)}static decodeHanziSegment(h,g,y){if(y*13>h.available())throw new O;const E=new Uint8Array(2*y);let k=0;for(;y>0;){const T=h.readBits(13);let j=T/96<<8&4294967295|T%96;j<959?j+=41377:j+=42657,E[k]=j>>8&255,E[k+1]=j&255,k+=2,y--}try{g.append(U.decode(E,H.GB2312))}catch(T){throw new O(T)}}static decodeKanjiSegment(h,g,y){if(y*13>h.available())throw new O;const E=new Uint8Array(2*y);let k=0;for(;y>0;){const T=h.readBits(13);let j=T/192<<8&4294967295|T%192;j<7936?j+=33088:j+=49472,E[k]=j>>8,E[k+1]=j,k+=2,y--}try{g.append(U.decode(E,H.SHIFT_JIS))}catch(T){throw new O(T)}}static decodeByteSegment(h,g,y,E,k,T){if(8*y>h.available())throw new O;const j=new Uint8Array(y);for(let z=0;z<y;z++)j[z]=h.readBits(8);let L;E===null?L=H.guessEncoding(j,T):L=E.getName();try{g.append(U.decode(j,L))}catch(z){throw new O(z)}k.push(j)}static toAlphaNumericChar(h){if(h>=di.ALPHANUMERIC_CHARS.length)throw new O;return di.ALPHANUMERIC_CHARS[h]}static decodeAlphanumericSegment(h,g,y,E){const k=g.length();for(;y>1;){if(h.available()<11)throw new O;const T=h.readBits(11);g.append(di.toAlphaNumericChar(Math.floor(T/45))),g.append(di.toAlphaNumericChar(T%45)),y-=2}if(y===1){if(h.available()<6)throw new O;g.append(di.toAlphaNumericChar(h.readBits(6)))}if(E)for(let T=k;T<g.length();T++)g.charAt(T)==="%"&&(T<g.length()-1&&g.charAt(T+1)==="%"?g.deleteCharAt(T+1):g.setCharAt(T,""))}static decodeNumericSegment(h,g,y){for(;y>=3;){if(h.available()<10)throw new O;const E=h.readBits(10);if(E>=1e3)throw new O;g.append(di.toAlphaNumericChar(Math.floor(E/100))),g.append(di.toAlphaNumericChar(Math.floor(E/10)%10)),g.append(di.toAlphaNumericChar(E%10)),y-=3}if(y===2){if(h.available()<7)throw new O;const E=h.readBits(7);if(E>=100)throw new O;g.append(di.toAlphaNumericChar(Math.floor(E/10))),g.append(di.toAlphaNumericChar(E%10))}else if(y===1){if(h.available()<4)throw new O;const E=h.readBits(4);if(E>=10)throw new O;g.append(di.toAlphaNumericChar(E))}}static parseECIValue(h){const g=h.readBits(8);if(!(g&128))return g&127;if((g&192)===128){const y=h.readBits(8);return(g&63)<<8&4294967295|y}if((g&224)===192){const y=h.readBits(16);return(g&31)<<16&4294967295|y}throw new O}}di.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",di.GB2312_SUBSET=1;class Ib{constructor(h){this.mirrored=h}isMirrored(){return this.mirrored}applyMirroredCorrection(h){if(!this.mirrored||h===null||h.length<3)return;const g=h[0];h[0]=h[2],h[2]=g}}class qC{constructor(){this.rsDecoder=new je(Ae.QR_CODE_FIELD_256)}decodeBooleanArray(h,g){return this.decodeBitMatrix(ee.parseFromBooleanArray(h),g)}decodeBitMatrix(h,g){const y=new dp(h);let E=null;try{return this.decodeBitMatrixParser(y,g)}catch(k){E=k}try{y.remask(),y.setMirror(!0),y.readVersion(),y.readFormatInformation(),y.mirror();const k=this.decodeBitMatrixParser(y,g);return k.setOther(new Ib(!0)),k}catch(k){throw E!==null?E:k}}decodeBitMatrixParser(h,g){const y=h.readVersion(),E=h.readFormatInformation().getErrorCorrectionLevel(),k=h.readCodewords(),T=i1.getDataBlocks(k,y,E);let j=0;for(const J of T)j+=J.getNumDataCodewords();const L=new Uint8Array(j);let z=0;for(const J of T){const oe=J.getCodewords(),xe=J.getNumDataCodewords();this.correctErrors(oe,xe);for(let Oe=0;Oe<xe;Oe++)L[z++]=oe[Oe]}return di.decode(L,y,E,g)}correctErrors(h,g){const y=new Int32Array(h);try{this.rsDecoder.decode(y,h.length-g)}catch{throw new m}for(let E=0;E<g;E++)h[E]=y[E]}}class a1 extends ht{constructor(h,g,y){super(h,g),this.estimatedModuleSize=y}aboutEquals(h,g,y){if(Math.abs(g-this.getY())<=h&&Math.abs(y-this.getX())<=h){const E=Math.abs(h-this.estimatedModuleSize);return E<=1||E<=this.estimatedModuleSize}return!1}combineEstimate(h,g,y){const E=(this.getX()+g)/2,k=(this.getY()+h)/2,T=(this.estimatedModuleSize+y)/2;return new a1(E,k,T)}}class s1{constructor(h,g,y,E,k,T,j){this.image=h,this.startX=g,this.startY=y,this.width=E,this.height=k,this.moduleSize=T,this.resultPointCallback=j,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const h=this.startX,g=this.height,y=this.width,E=h+y,k=this.startY+g/2,T=new Int32Array(3),j=this.image;for(let L=0;L<g;L++){const z=k+(L&1?-Math.floor((L+1)/2):Math.floor((L+1)/2));T[0]=0,T[1]=0,T[2]=0;let J=h;for(;J<E&&!j.get(J,z);)J++;let oe=0;for(;J<E;){if(j.get(J,z))if(oe===1)T[1]++;else if(oe===2){if(this.foundPatternCross(T)){const xe=this.handlePossibleCenter(T,z,J);if(xe!==null)return xe}T[0]=T[2],T[1]=1,T[2]=0,oe=1}else T[++oe]++;else oe===1&&oe++,T[oe]++;J++}if(this.foundPatternCross(T)){const xe=this.handlePossibleCenter(T,z,E);if(xe!==null)return xe}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new V}static centerFromEnd(h,g){return g-h[2]-h[1]/2}foundPatternCross(h){const g=this.moduleSize,y=g/2;for(let E=0;E<3;E++)if(Math.abs(g-h[E])>=y)return!1;return!0}crossCheckVertical(h,g,y,E){const k=this.image,T=k.getHeight(),j=this.crossCheckStateCount;j[0]=0,j[1]=0,j[2]=0;let L=h;for(;L>=0&&k.get(g,L)&&j[1]<=y;)j[1]++,L--;if(L<0||j[1]>y)return NaN;for(;L>=0&&!k.get(g,L)&&j[0]<=y;)j[0]++,L--;if(j[0]>y)return NaN;for(L=h+1;L<T&&k.get(g,L)&&j[1]<=y;)j[1]++,L++;if(L===T||j[1]>y)return NaN;for(;L<T&&!k.get(g,L)&&j[2]<=y;)j[2]++,L++;if(j[2]>y)return NaN;const z=j[0]+j[1]+j[2];return 5*Math.abs(z-E)>=2*E?NaN:this.foundPatternCross(j)?s1.centerFromEnd(j,L):NaN}handlePossibleCenter(h,g,y){const E=h[0]+h[1]+h[2],k=s1.centerFromEnd(h,y),T=this.crossCheckVertical(g,k,2*h[1],E);if(!isNaN(T)){const j=(h[0]+h[1]+h[2])/3;for(const z of this.possibleCenters)if(z.aboutEquals(j,T,k))return z.combineEstimate(T,k,j);const L=new a1(k,T,j);this.possibleCenters.push(L),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(L)}return null}}class Ob extends ht{constructor(h,g,y,E){super(h,g),this.estimatedModuleSize=y,this.count=E,E===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(h,g,y){if(Math.abs(g-this.getY())<=h&&Math.abs(y-this.getX())<=h){const E=Math.abs(h-this.estimatedModuleSize);return E<=1||E<=this.estimatedModuleSize}return!1}combineEstimate(h,g,y){const E=this.count+1,k=(this.count*this.getX()+g)/E,T=(this.count*this.getY()+h)/E,j=(this.count*this.estimatedModuleSize+y)/E;return new Ob(k,T,j,E)}}class NP{constructor(h){this.bottomLeft=h[0],this.topLeft=h[1],this.topRight=h[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class la{constructor(h,g){this.image=h,this.resultPointCallback=g,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=g}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(h){const g=h!=null&&h.get(P.TRY_HARDER)!==void 0,y=h!=null&&h.get(P.PURE_BARCODE)!==void 0,E=this.image,k=E.getHeight(),T=E.getWidth();let j=Math.floor(3*k/(4*la.MAX_MODULES));(j<la.MIN_SKIP||g)&&(j=la.MIN_SKIP);let L=!1;const z=new Int32Array(5);for(let oe=j-1;oe<k&&!L;oe+=j){z[0]=0,z[1]=0,z[2]=0,z[3]=0,z[4]=0;let xe=0;for(let Oe=0;Oe<T;Oe++)if(E.get(Oe,oe))(xe&1)===1&&xe++,z[xe]++;else if(xe&1)z[xe]++;else if(xe===4)if(la.foundPatternCross(z)){if(this.handlePossibleCenter(z,oe,Oe,y)===!0)if(j=2,this.hasSkipped===!0)L=this.haveMultiplyConfirmedCenters();else{const Ee=this.findRowSkip();Ee>z[2]&&(oe+=Ee-z[2]-j,Oe=T-1)}else{z[0]=z[2],z[1]=z[3],z[2]=z[4],z[3]=1,z[4]=0,xe=3;continue}xe=0,z[0]=0,z[1]=0,z[2]=0,z[3]=0,z[4]=0}else z[0]=z[2],z[1]=z[3],z[2]=z[4],z[3]=1,z[4]=0,xe=3;else z[++xe]++;la.foundPatternCross(z)&&this.handlePossibleCenter(z,oe,T,y)===!0&&(j=z[0],this.hasSkipped&&(L=this.haveMultiplyConfirmedCenters()))}const J=this.selectBestPatterns();return ht.orderBestPatterns(J),new NP(J)}static centerFromEnd(h,g){return g-h[4]-h[3]-h[2]/2}static foundPatternCross(h){let g=0;for(let k=0;k<5;k++){const T=h[k];if(T===0)return!1;g+=T}if(g<7)return!1;const y=g/7,E=y/2;return Math.abs(y-h[0])<E&&Math.abs(y-h[1])<E&&Math.abs(3*y-h[2])<3*E&&Math.abs(y-h[3])<E&&Math.abs(y-h[4])<E}getCrossCheckStateCount(){const h=this.crossCheckStateCount;return h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h}crossCheckDiagonal(h,g,y,E){const k=this.getCrossCheckStateCount();let T=0;const j=this.image;for(;h>=T&&g>=T&&j.get(g-T,h-T);)k[2]++,T++;if(h<T||g<T)return!1;for(;h>=T&&g>=T&&!j.get(g-T,h-T)&&k[1]<=y;)k[1]++,T++;if(h<T||g<T||k[1]>y)return!1;for(;h>=T&&g>=T&&j.get(g-T,h-T)&&k[0]<=y;)k[0]++,T++;if(k[0]>y)return!1;const L=j.getHeight(),z=j.getWidth();for(T=1;h+T<L&&g+T<z&&j.get(g+T,h+T);)k[2]++,T++;if(h+T>=L||g+T>=z)return!1;for(;h+T<L&&g+T<z&&!j.get(g+T,h+T)&&k[3]<y;)k[3]++,T++;if(h+T>=L||g+T>=z||k[3]>=y)return!1;for(;h+T<L&&g+T<z&&j.get(g+T,h+T)&&k[4]<y;)k[4]++,T++;if(k[4]>=y)return!1;const J=k[0]+k[1]+k[2]+k[3]+k[4];return Math.abs(J-E)<2*E&&la.foundPatternCross(k)}crossCheckVertical(h,g,y,E){const k=this.image,T=k.getHeight(),j=this.getCrossCheckStateCount();let L=h;for(;L>=0&&k.get(g,L);)j[2]++,L--;if(L<0)return NaN;for(;L>=0&&!k.get(g,L)&&j[1]<=y;)j[1]++,L--;if(L<0||j[1]>y)return NaN;for(;L>=0&&k.get(g,L)&&j[0]<=y;)j[0]++,L--;if(j[0]>y)return NaN;for(L=h+1;L<T&&k.get(g,L);)j[2]++,L++;if(L===T)return NaN;for(;L<T&&!k.get(g,L)&&j[3]<y;)j[3]++,L++;if(L===T||j[3]>=y)return NaN;for(;L<T&&k.get(g,L)&&j[4]<y;)j[4]++,L++;if(j[4]>=y)return NaN;const z=j[0]+j[1]+j[2]+j[3]+j[4];return 5*Math.abs(z-E)>=2*E?NaN:la.foundPatternCross(j)?la.centerFromEnd(j,L):NaN}crossCheckHorizontal(h,g,y,E){const k=this.image,T=k.getWidth(),j=this.getCrossCheckStateCount();let L=h;for(;L>=0&&k.get(L,g);)j[2]++,L--;if(L<0)return NaN;for(;L>=0&&!k.get(L,g)&&j[1]<=y;)j[1]++,L--;if(L<0||j[1]>y)return NaN;for(;L>=0&&k.get(L,g)&&j[0]<=y;)j[0]++,L--;if(j[0]>y)return NaN;for(L=h+1;L<T&&k.get(L,g);)j[2]++,L++;if(L===T)return NaN;for(;L<T&&!k.get(L,g)&&j[3]<y;)j[3]++,L++;if(L===T||j[3]>=y)return NaN;for(;L<T&&k.get(L,g)&&j[4]<y;)j[4]++,L++;if(j[4]>=y)return NaN;const z=j[0]+j[1]+j[2]+j[3]+j[4];return 5*Math.abs(z-E)>=E?NaN:la.foundPatternCross(j)?la.centerFromEnd(j,L):NaN}handlePossibleCenter(h,g,y,E){const k=h[0]+h[1]+h[2]+h[3]+h[4];let T=la.centerFromEnd(h,y),j=this.crossCheckVertical(g,Math.floor(T),h[2],k);if(!isNaN(j)&&(T=this.crossCheckHorizontal(Math.floor(T),Math.floor(j),h[2],k),!isNaN(T)&&(!E||this.crossCheckDiagonal(Math.floor(j),Math.floor(T),h[2],k)))){const L=k/7;let z=!1;const J=this.possibleCenters;for(let oe=0,xe=J.length;oe<xe;oe++){const Oe=J[oe];if(Oe.aboutEquals(L,j,T)){J[oe]=Oe.combineEstimate(j,T,L),z=!0;break}}if(!z){const oe=new Ob(T,j,L);J.push(oe),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(oe)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let g=null;for(const y of this.possibleCenters)if(y.getCount()>=la.CENTER_QUORUM)if(g==null)g=y;else return this.hasSkipped=!0,Math.floor((Math.abs(g.getX()-y.getX())-Math.abs(g.getY()-y.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let h=0,g=0;const y=this.possibleCenters.length;for(const T of this.possibleCenters)T.getCount()>=la.CENTER_QUORUM&&(h++,g+=T.getEstimatedModuleSize());if(h<3)return!1;const E=g/y;let k=0;for(const T of this.possibleCenters)k+=Math.abs(T.getEstimatedModuleSize()-E);return k<=.05*g}selectBestPatterns(){const h=this.possibleCenters.length;if(h<3)throw new V;const g=this.possibleCenters;let y;if(h>3){let E=0,k=0;for(const L of this.possibleCenters){const z=L.getEstimatedModuleSize();E+=z,k+=z*z}y=E/h;let T=Math.sqrt(k/h-y*y);g.sort((L,z)=>{const J=Math.abs(z.getEstimatedModuleSize()-y),oe=Math.abs(L.getEstimatedModuleSize()-y);return J<oe?-1:J>oe?1:0});const j=Math.max(.2*y,T);for(let L=0;L<g.length&&g.length>3;L++){const z=g[L];Math.abs(z.getEstimatedModuleSize()-y)>j&&(g.splice(L,1),L--)}}if(g.length>3){let E=0;for(const k of g)E+=k.getEstimatedModuleSize();y=E/g.length,g.sort((k,T)=>{if(T.getCount()===k.getCount()){const j=Math.abs(T.getEstimatedModuleSize()-y),L=Math.abs(k.getEstimatedModuleSize()-y);return j<L?1:j>L?-1:0}else return T.getCount()-k.getCount()}),g.splice(3)}return[g[0],g[1],g[2]]}}la.CENTER_QUORUM=2,la.MIN_SKIP=3,la.MAX_MODULES=57;class cm{constructor(h){this.image=h}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(h){this.resultPointCallback=h==null?null:h.get(P.NEED_RESULT_POINT_CALLBACK);const y=new la(this.image,this.resultPointCallback).find(h);return this.processFinderPatternInfo(y)}processFinderPatternInfo(h){const g=h.getTopLeft(),y=h.getTopRight(),E=h.getBottomLeft(),k=this.calculateModuleSize(g,y,E);if(k<1)throw new V("No pattern found in proccess finder.");const T=cm.computeDimension(g,y,E,k),j=ir.getProvisionalVersionForDimension(T),L=j.getDimensionForVersion()-7;let z=null;if(j.getAlignmentPatternCenters().length>0){const Oe=y.getX()-g.getX()+E.getX(),ue=y.getY()-g.getY()+E.getY(),Ee=1-3/L,Te=Math.floor(g.getX()+Ee*(Oe-g.getX())),Be=Math.floor(g.getY()+Ee*(ue-g.getY()));for(let ot=4;ot<=16;ot<<=1)try{z=this.findAlignmentInRegion(k,Te,Be,ot);break}catch(gt){if(!(gt instanceof V))throw gt}}const J=cm.createTransform(g,y,E,z,T),oe=cm.sampleGrid(this.image,J,T);let xe;return z===null?xe=[E,g,y]:xe=[E,g,y,z],new _r(oe,xe)}static createTransform(h,g,y,E,k){const T=k-3.5;let j,L,z,J;return E!==null?(j=E.getX(),L=E.getY(),z=T-3,J=z):(j=g.getX()-h.getX()+y.getX(),L=g.getY()-h.getY()+y.getY(),z=T,J=T),Lt.quadrilateralToQuadrilateral(3.5,3.5,T,3.5,z,J,3.5,T,h.getX(),h.getY(),g.getX(),g.getY(),j,L,y.getX(),y.getY())}static sampleGrid(h,g,y){return Ht.getInstance().sampleGridWithTransform(h,y,y,g)}static computeDimension(h,g,y,E){const k=lt.round(ht.distance(h,g)/E),T=lt.round(ht.distance(h,y)/E);let j=Math.floor((k+T)/2)+7;switch(j&3){case 0:j++;break;case 2:j--;break;case 3:throw new V("Dimensions could be not found.")}return j}calculateModuleSize(h,g,y){return(this.calculateModuleSizeOneWay(h,g)+this.calculateModuleSizeOneWay(h,y))/2}calculateModuleSizeOneWay(h,g){const y=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(h.getX()),Math.floor(h.getY()),Math.floor(g.getX()),Math.floor(g.getY())),E=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(g.getX()),Math.floor(g.getY()),Math.floor(h.getX()),Math.floor(h.getY()));return isNaN(y)?E/7:isNaN(E)?y/7:(y+E)/14}sizeOfBlackWhiteBlackRunBothWays(h,g,y,E){let k=this.sizeOfBlackWhiteBlackRun(h,g,y,E),T=1,j=h-(y-h);j<0?(T=h/(h-j),j=0):j>=this.image.getWidth()&&(T=(this.image.getWidth()-1-h)/(j-h),j=this.image.getWidth()-1);let L=Math.floor(g-(E-g)*T);return T=1,L<0?(T=g/(g-L),L=0):L>=this.image.getHeight()&&(T=(this.image.getHeight()-1-g)/(L-g),L=this.image.getHeight()-1),j=Math.floor(h+(j-h)*T),k+=this.sizeOfBlackWhiteBlackRun(h,g,j,L),k-1}sizeOfBlackWhiteBlackRun(h,g,y,E){const k=Math.abs(E-g)>Math.abs(y-h);if(k){let Oe=h;h=g,g=Oe,Oe=y,y=E,E=Oe}const T=Math.abs(y-h),j=Math.abs(E-g);let L=-T/2;const z=h<y?1:-1,J=g<E?1:-1;let oe=0;const xe=y+z;for(let Oe=h,ue=g;Oe!==xe;Oe+=z){const Ee=k?ue:Oe,Te=k?Oe:ue;if(oe===1===this.image.get(Ee,Te)){if(oe===2)return lt.distance(Oe,ue,h,g);oe++}if(L+=j,L>0){if(ue===E)break;ue+=J,L-=T}}return oe===2?lt.distance(y+z,E,h,g):NaN}findAlignmentInRegion(h,g,y,E){const k=Math.floor(E*h),T=Math.max(0,g-k),j=Math.min(this.image.getWidth()-1,g+k);if(j-T<h*3)throw new V("Alignment top exceeds estimated module size.");const L=Math.max(0,y-k),z=Math.min(this.image.getHeight()-1,y+k);if(z-L<h*3)throw new V("Alignment bottom exceeds estimated module size.");return new s1(this.image,T,L,j-T,z-L,h,this.resultPointCallback).find()}}class xd{constructor(){this.decoder=new qC}getDecoder(){return this.decoder}decode(h,g){let y,E;if(g!=null&&g.get(P.PURE_BARCODE)!==void 0){const L=xd.extractPureBits(h.getBlackMatrix());y=this.decoder.decodeBitMatrix(L,g),E=xd.NO_POINTS}else{const L=new cm(h.getBlackMatrix()).detect(g);y=this.decoder.decodeBitMatrix(L.getBits(),g),E=L.getPoints()}y.getOther()instanceof Ib&&y.getOther().applyMirroredCorrection(E);const k=new W(y.getText(),y.getRawBytes(),void 0,E,ie.QR_CODE,void 0),T=y.getByteSegments();T!==null&&k.putMetadata(re.BYTE_SEGMENTS,T);const j=y.getECLevel();return j!==null&&k.putMetadata(re.ERROR_CORRECTION_LEVEL,j),y.hasStructuredAppend()&&(k.putMetadata(re.STRUCTURED_APPEND_SEQUENCE,y.getStructuredAppendSequenceNumber()),k.putMetadata(re.STRUCTURED_APPEND_PARITY,y.getStructuredAppendParity())),k}reset(){}static extractPureBits(h){const g=h.getTopLeftOnBit(),y=h.getBottomRightOnBit();if(g===null||y===null)throw new V;const E=this.moduleSize(g,h);let k=g[1],T=y[1],j=g[0],L=y[0];if(j>=L||k>=T)throw new V;if(T-k!==L-j&&(L=j+(T-k),L>=h.getWidth()))throw new V;const z=Math.round((L-j+1)/E),J=Math.round((T-k+1)/E);if(z<=0||J<=0)throw new V;if(J!==z)throw new V;const oe=Math.floor(E/2);k+=oe,j+=oe;const xe=j+Math.floor((z-1)*E)-L;if(xe>0){if(xe>oe)throw new V;j-=xe}const Oe=k+Math.floor((J-1)*E)-T;if(Oe>0){if(Oe>oe)throw new V;k-=Oe}const ue=new ee(z,J);for(let Ee=0;Ee<J;Ee++){const Te=k+Math.floor(Ee*E);for(let Be=0;Be<z;Be++)h.get(j+Math.floor(Be*E),Te)&&ue.set(Be,Ee)}return ue}static moduleSize(h,g){const y=g.getHeight(),E=g.getWidth();let k=h[0],T=h[1],j=!0,L=0;for(;k<E&&T<y;){if(j!==g.get(k,T)){if(++L===5)break;j=!j}k++,T++}if(k===E||T===y)throw new V;return(k-h[0])/7}}xd.NO_POINTS=new Array;class Nr{PDF417Common(){}static getBitCountSum(h){return lt.sum(h)}static toIntArray(h){if(h==null||!h.length)return Nr.EMPTY_INT_ARRAY;const g=new Int32Array(h.length);let y=0;for(const E of h)g[y++]=E;return g}static getCodeword(h){const g=_.binarySearch(Nr.SYMBOL_TABLE,h&262143);return g<0?-1:(Nr.CODEWORD_TABLE[g]-1)%Nr.NUMBER_OF_CODEWORDS}}Nr.NUMBER_OF_CODEWORDS=929,Nr.MAX_CODEWORDS_IN_BARCODE=Nr.NUMBER_OF_CODEWORDS-1,Nr.MIN_ROWS_IN_BARCODE=3,Nr.MAX_ROWS_IN_BARCODE=90,Nr.MODULES_IN_CODEWORD=17,Nr.MODULES_IN_STOP_PATTERN=18,Nr.BARS_IN_MODULE=8,Nr.EMPTY_INT_ARRAY=new Int32Array([]),Nr.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Nr.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class AP{constructor(h,g){this.bits=h,this.points=g}getBits(){return this.bits}getPoints(){return this.points}}class zr{static detectMultiple(h,g,y){let E=h.getBlackMatrix(),k=zr.detect(y,E);return k.length||(E=E.clone(),E.rotate180(),k=zr.detect(y,E)),new AP(E,k)}static detect(h,g){const y=new Array;let E=0,k=0,T=!1;for(;E<g.getHeight();){const j=zr.findVertices(g,E,k);if(j[0]==null&&j[3]==null){if(!T)break;T=!1,k=0;for(const L of y)L[1]!=null&&(E=Math.trunc(Math.max(E,L[1].getY()))),L[3]!=null&&(E=Math.max(E,Math.trunc(L[3].getY())));E+=zr.ROW_STEP;continue}if(T=!0,y.push(j),!h)break;j[2]!=null?(k=Math.trunc(j[2].getX()),E=Math.trunc(j[2].getY())):(k=Math.trunc(j[4].getX()),E=Math.trunc(j[4].getY()))}return y}static findVertices(h,g,y){const E=h.getHeight(),k=h.getWidth(),T=new Array(8);return zr.copyToResult(T,zr.findRowsWithPattern(h,E,k,g,y,zr.START_PATTERN),zr.INDEXES_START_PATTERN),T[4]!=null&&(y=Math.trunc(T[4].getX()),g=Math.trunc(T[4].getY())),zr.copyToResult(T,zr.findRowsWithPattern(h,E,k,g,y,zr.STOP_PATTERN),zr.INDEXES_STOP_PATTERN),T}static copyToResult(h,g,y){for(let E=0;E<y.length;E++)h[y[E]]=g[E]}static findRowsWithPattern(h,g,y,E,k,T){const j=new Array(4);let L=!1;const z=new Int32Array(T.length);for(;E<g;E+=zr.ROW_STEP){let oe=zr.findGuardPattern(h,k,E,y,!1,T,z);if(oe!=null){for(;E>0;){const xe=zr.findGuardPattern(h,k,--E,y,!1,T,z);if(xe!=null)oe=xe;else{E++;break}}j[0]=new ht(oe[0],E),j[1]=new ht(oe[1],E),L=!0;break}}let J=E+1;if(L){let oe=0,xe=Int32Array.from([Math.trunc(j[0].getX()),Math.trunc(j[1].getX())]);for(;J<g;J++){const Oe=zr.findGuardPattern(h,xe[0],J,y,!1,T,z);if(Oe!=null&&Math.abs(xe[0]-Oe[0])<zr.MAX_PATTERN_DRIFT&&Math.abs(xe[1]-Oe[1])<zr.MAX_PATTERN_DRIFT)xe=Oe,oe=0;else{if(oe>zr.SKIPPED_ROW_COUNT_MAX)break;oe++}}J-=oe+1,j[2]=new ht(xe[0],J),j[3]=new ht(xe[1],J)}return J-E<zr.BARCODE_MIN_HEIGHT&&_.fill(j,null),j}static findGuardPattern(h,g,y,E,k,T,j){_.fillWithin(j,0,j.length,0);let L=g,z=0;for(;h.get(L,y)&&L>0&&z++<zr.MAX_PIXEL_DRIFT;)L--;let J=L,oe=0,xe=T.length;for(let Oe=k;J<E;J++)if(h.get(J,y)!==Oe)j[oe]++;else{if(oe===xe-1){if(zr.patternMatchVariance(j,T,zr.MAX_INDIVIDUAL_VARIANCE)<zr.MAX_AVG_VARIANCE)return new Int32Array([L,J]);L+=j[0]+j[1],v.arraycopy(j,2,j,0,oe-1),j[oe-1]=0,j[oe]=0,oe--}else oe++;j[oe]=1,Oe=!Oe}return oe===xe-1&&zr.patternMatchVariance(j,T,zr.MAX_INDIVIDUAL_VARIANCE)<zr.MAX_AVG_VARIANCE?new Int32Array([L,J-1]):null}static patternMatchVariance(h,g,y){let E=h.length,k=0,T=0;for(let z=0;z<E;z++)k+=h[z],T+=g[z];if(k<T)return 1/0;let j=k/T;y*=j;let L=0;for(let z=0;z<E;z++){let J=h[z],oe=g[z]*j,xe=J>oe?J-oe:oe-J;if(xe>y)return 1/0;L+=xe}return L/k}}zr.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),zr.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),zr.MAX_AVG_VARIANCE=.42,zr.MAX_INDIVIDUAL_VARIANCE=.8,zr.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),zr.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),zr.MAX_PIXEL_DRIFT=3,zr.MAX_PATTERN_DRIFT=5,zr.SKIPPED_ROW_COUNT_MAX=25,zr.ROW_STEP=5,zr.BARCODE_MIN_HEIGHT=10;class Ma{constructor(h,g){if(g.length===0)throw new f;this.field=h;let y=g.length;if(y>1&&g[0]===0){let E=1;for(;E<y&&g[E]===0;)E++;E===y?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(y-E),v.arraycopy(g,E,this.coefficients,0,this.coefficients.length))}else this.coefficients=g}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(h){return this.coefficients[this.coefficients.length-1-h]}evaluateAt(h){if(h===0)return this.getCoefficient(0);if(h===1){let E=0;for(let k of this.coefficients)E=this.field.add(E,k);return E}let g=this.coefficients[0],y=this.coefficients.length;for(let E=1;E<y;E++)g=this.field.add(this.field.multiply(h,g),this.coefficients[E]);return g}add(h){if(!this.field.equals(h.field))throw new f("ModulusPolys do not have same ModulusGF field");if(this.isZero())return h;if(h.isZero())return this;let g=this.coefficients,y=h.coefficients;if(g.length>y.length){let T=g;g=y,y=T}let E=new Int32Array(y.length),k=y.length-g.length;v.arraycopy(y,0,E,0,k);for(let T=k;T<y.length;T++)E[T]=this.field.add(g[T-k],y[T]);return new Ma(this.field,E)}subtract(h){if(!this.field.equals(h.field))throw new f("ModulusPolys do not have same ModulusGF field");return h.isZero()?this:this.add(h.negative())}multiply(h){return h instanceof Ma?this.multiplyOther(h):this.multiplyScalar(h)}multiplyOther(h){if(!this.field.equals(h.field))throw new f("ModulusPolys do not have same ModulusGF field");if(this.isZero()||h.isZero())return new Ma(this.field,new Int32Array([0]));let g=this.coefficients,y=g.length,E=h.coefficients,k=E.length,T=new Int32Array(y+k-1);for(let j=0;j<y;j++){let L=g[j];for(let z=0;z<k;z++)T[j+z]=this.field.add(T[j+z],this.field.multiply(L,E[z]))}return new Ma(this.field,T)}negative(){let h=this.coefficients.length,g=new Int32Array(h);for(let y=0;y<h;y++)g[y]=this.field.subtract(0,this.coefficients[y]);return new Ma(this.field,g)}multiplyScalar(h){if(h===0)return new Ma(this.field,new Int32Array([0]));if(h===1)return this;let g=this.coefficients.length,y=new Int32Array(g);for(let E=0;E<g;E++)y[E]=this.field.multiply(this.coefficients[E],h);return new Ma(this.field,y)}multiplyByMonomial(h,g){if(h<0)throw new f;if(g===0)return new Ma(this.field,new Int32Array([0]));let y=this.coefficients.length,E=new Int32Array(y+h);for(let k=0;k<y;k++)E[k]=this.field.multiply(this.coefficients[k],g);return new Ma(this.field,E)}toString(){let h=new Z;for(let g=this.getDegree();g>=0;g--){let y=this.getCoefficient(g);y!==0&&(y<0?(h.append(" - "),y=-y):h.length()>0&&h.append(" + "),(g===0||y!==1)&&h.append(y),g!==0&&(g===1?h.append("x"):(h.append("x^"),h.append(g))))}return h.toString()}}class TP{add(h,g){return(h+g)%this.modulus}subtract(h,g){return(this.modulus+h-g)%this.modulus}exp(h){return this.expTable[h]}log(h){if(h===0)throw new f;return this.logTable[h]}inverse(h){if(h===0)throw new q;return this.expTable[this.modulus-this.logTable[h]-1]}multiply(h,g){return h===0||g===0?0:this.expTable[(this.logTable[h]+this.logTable[g])%(this.modulus-1)]}getSize(){return this.modulus}equals(h){return h===this}}class Pb extends TP{constructor(h,g){super(),this.modulus=h,this.expTable=new Int32Array(h),this.logTable=new Int32Array(h);let y=1;for(let E=0;E<h;E++)this.expTable[E]=y,y=y*g%h;for(let E=0;E<h-1;E++)this.logTable[this.expTable[E]]=E;this.zero=new Ma(this,new Int32Array([0])),this.one=new Ma(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(h,g){if(h<0)throw new f;if(g===0)return this.zero;let y=new Int32Array(h+1);return y[0]=g,new Ma(this,y)}}Pb.PDF417_GF=new Pb(Nr.NUMBER_OF_CODEWORDS,3);class GC{constructor(){this.field=Pb.PDF417_GF}decode(h,g,y){let E=new Ma(this.field,h),k=new Int32Array(g),T=!1;for(let ue=g;ue>0;ue--){let Ee=E.evaluateAt(this.field.exp(ue));k[g-ue]=Ee,Ee!==0&&(T=!0)}if(!T)return 0;let j=this.field.getOne();if(y!=null)for(const ue of y){let Ee=this.field.exp(h.length-1-ue),Te=new Ma(this.field,new Int32Array([this.field.subtract(0,Ee),1]));j=j.multiply(Te)}let L=new Ma(this.field,k),z=this.runEuclideanAlgorithm(this.field.buildMonomial(g,1),L,g),J=z[0],oe=z[1],xe=this.findErrorLocations(J),Oe=this.findErrorMagnitudes(oe,J,xe);for(let ue=0;ue<xe.length;ue++){let Ee=h.length-1-this.field.log(xe[ue]);if(Ee<0)throw m.getChecksumInstance();h[Ee]=this.field.subtract(h[Ee],Oe[ue])}return xe.length}runEuclideanAlgorithm(h,g,y){if(h.getDegree()<g.getDegree()){let xe=h;h=g,g=xe}let E=h,k=g,T=this.field.getZero(),j=this.field.getOne();for(;k.getDegree()>=Math.round(y/2);){let xe=E,Oe=T;if(E=k,T=j,E.isZero())throw m.getChecksumInstance();k=xe;let ue=this.field.getZero(),Ee=E.getCoefficient(E.getDegree()),Te=this.field.inverse(Ee);for(;k.getDegree()>=E.getDegree()&&!k.isZero();){let Be=k.getDegree()-E.getDegree(),ot=this.field.multiply(k.getCoefficient(k.getDegree()),Te);ue=ue.add(this.field.buildMonomial(Be,ot)),k=k.subtract(E.multiplyByMonomial(Be,ot))}j=ue.multiply(T).subtract(Oe).negative()}let L=j.getCoefficient(0);if(L===0)throw m.getChecksumInstance();let z=this.field.inverse(L),J=j.multiply(z),oe=k.multiply(z);return[J,oe]}findErrorLocations(h){let g=h.getDegree(),y=new Int32Array(g),E=0;for(let k=1;k<this.field.getSize()&&E<g;k++)h.evaluateAt(k)===0&&(y[E]=this.field.inverse(k),E++);if(E!==g)throw m.getChecksumInstance();return y}findErrorMagnitudes(h,g,y){let E=g.getDegree(),k=new Int32Array(E);for(let z=1;z<=E;z++)k[E-z]=this.field.multiply(z,g.getCoefficient(z));let T=new Ma(this.field,k),j=y.length,L=new Int32Array(j);for(let z=0;z<j;z++){let J=this.field.inverse(y[z]),oe=this.field.subtract(0,h.evaluateAt(J)),xe=this.field.inverse(T.evaluateAt(J));L[z]=this.field.multiply(oe,xe)}return L}}class Nf{constructor(h,g,y,E,k){h instanceof Nf?this.constructor_2(h):this.constructor_1(h,g,y,E,k)}constructor_1(h,g,y,E,k){const T=g==null||y==null,j=E==null||k==null;if(T&&j)throw new V;T?(g=new ht(0,E.getY()),y=new ht(0,k.getY())):j&&(E=new ht(h.getWidth()-1,g.getY()),k=new ht(h.getWidth()-1,y.getY())),this.image=h,this.topLeft=g,this.bottomLeft=y,this.topRight=E,this.bottomRight=k,this.minX=Math.trunc(Math.min(g.getX(),y.getX())),this.maxX=Math.trunc(Math.max(E.getX(),k.getX())),this.minY=Math.trunc(Math.min(g.getY(),E.getY())),this.maxY=Math.trunc(Math.max(y.getY(),k.getY()))}constructor_2(h){this.image=h.image,this.topLeft=h.getTopLeft(),this.bottomLeft=h.getBottomLeft(),this.topRight=h.getTopRight(),this.bottomRight=h.getBottomRight(),this.minX=h.getMinX(),this.maxX=h.getMaxX(),this.minY=h.getMinY(),this.maxY=h.getMaxY()}static merge(h,g){return h==null?g:g==null?h:new Nf(h.image,h.topLeft,h.bottomLeft,g.topRight,g.bottomRight)}addMissingRows(h,g,y){let E=this.topLeft,k=this.bottomLeft,T=this.topRight,j=this.bottomRight;if(h>0){let L=y?this.topLeft:this.topRight,z=Math.trunc(L.getY()-h);z<0&&(z=0);let J=new ht(L.getX(),z);y?E=J:T=J}if(g>0){let L=y?this.bottomLeft:this.bottomRight,z=Math.trunc(L.getY()+g);z>=this.image.getHeight()&&(z=this.image.getHeight()-1);let J=new ht(L.getX(),z);y?k=J:j=J}return new Nf(this.image,E,k,T,j)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class oi{constructor(h,g,y,E){this.columnCount=h,this.errorCorrectionLevel=E,this.rowCountUpperPart=g,this.rowCountLowerPart=y,this.rowCount=g+y}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Dn{constructor(){this.buffer=""}static form(h,g){let y=-1;function E(T,j,L,z,J,oe){if(T==="%%")return"%";if(g[++y]===void 0)return;T=z?parseInt(z.substr(1)):void 0;let xe=J?parseInt(J.substr(1)):void 0,Oe;switch(oe){case"s":Oe=g[y];break;case"c":Oe=g[y][0];break;case"f":Oe=parseFloat(g[y]).toFixed(T);break;case"p":Oe=parseFloat(g[y]).toPrecision(T);break;case"e":Oe=parseFloat(g[y]).toExponential(T);break;case"x":Oe=parseInt(g[y]).toString(xe||16);break;case"d":Oe=parseFloat(parseInt(g[y],xe||10).toPrecision(T)).toFixed(0);break}Oe=typeof Oe=="object"?JSON.stringify(Oe):(+Oe).toString(xe);let ue=parseInt(L),Ee=L&&L[0]+""=="0"?"0":" ";for(;Oe.length<ue;)Oe=j!==void 0?Oe+Ee:Ee+Oe;return Oe}let k=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return h.replace(k,E)}format(h,...g){this.buffer+=Dn.form(h,g)}toString(){return this.buffer}}class um{constructor(h){this.boundingBox=new Nf(h),this.codewords=new Array(h.getMaxY()-h.getMinY()+1)}getCodewordNearby(h){let g=this.getCodeword(h);if(g!=null)return g;for(let y=1;y<um.MAX_NEARBY_DISTANCE;y++){let E=this.imageRowToCodewordIndex(h)-y;if(E>=0&&(g=this.codewords[E],g!=null)||(E=this.imageRowToCodewordIndex(h)+y,E<this.codewords.length&&(g=this.codewords[E],g!=null)))return g}return null}imageRowToCodewordIndex(h){return h-this.boundingBox.getMinY()}setCodeword(h,g){this.codewords[this.imageRowToCodewordIndex(h)]=g}getCodeword(h){return this.codewords[this.imageRowToCodewordIndex(h)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const h=new Dn;let g=0;for(const y of this.codewords){if(y==null){h.format("%3d:    |   %n",g++);continue}h.format("%3d: %3d|%3d%n",g++,y.getRowNumber(),y.getValue())}return h.toString()}}um.MAX_NEARBY_DISTANCE=5;class dm{constructor(){this.values=new Map}setValue(h){h=Math.trunc(h);let g=this.values.get(h);g==null&&(g=0),g++,this.values.set(h,g)}getValue(){let h=-1,g=new Array;for(const[y,E]of this.values.entries()){const k={getKey:()=>y,getValue:()=>E};k.getValue()>h?(h=k.getValue(),g=[],g.push(k.getKey())):k.getValue()===h&&g.push(k.getKey())}return Nr.toIntArray(g)}getConfidence(h){return this.values.get(h)}}class KC extends um{constructor(h,g){super(h),this._isLeft=g}setRowNumbers(){for(let h of this.getCodewords())h!=null&&h.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(h){let g=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(g,h);let y=this.getBoundingBox(),E=this._isLeft?y.getTopLeft():y.getTopRight(),k=this._isLeft?y.getBottomLeft():y.getBottomRight(),T=this.imageRowToCodewordIndex(Math.trunc(E.getY())),j=this.imageRowToCodewordIndex(Math.trunc(k.getY())),L=-1,z=1,J=0;for(let oe=T;oe<j;oe++){if(g[oe]==null)continue;let xe=g[oe],Oe=xe.getRowNumber()-L;if(Oe===0)J++;else if(Oe===1)z=Math.max(z,J),J=1,L=xe.getRowNumber();else if(Oe<0||xe.getRowNumber()>=h.getRowCount()||Oe>oe)g[oe]=null;else{let ue;z>2?ue=(z-2)*Oe:ue=Oe;let Ee=ue>=oe;for(let Te=1;Te<=ue&&!Ee;Te++)Ee=g[oe-Te]!=null;Ee?g[oe]=null:(L=xe.getRowNumber(),J=1)}}}getRowHeights(){let h=this.getBarcodeMetadata();if(h==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(h);let g=new Int32Array(h.getRowCount());for(let y of this.getCodewords())if(y!=null){let E=y.getRowNumber();if(E>=g.length)continue;g[E]++}return g}adjustIncompleteIndicatorColumnRowNumbers(h){let g=this.getBoundingBox(),y=this._isLeft?g.getTopLeft():g.getTopRight(),E=this._isLeft?g.getBottomLeft():g.getBottomRight(),k=this.imageRowToCodewordIndex(Math.trunc(y.getY())),T=this.imageRowToCodewordIndex(Math.trunc(E.getY())),j=this.getCodewords(),L=-1;for(let z=k;z<T;z++){if(j[z]==null)continue;let J=j[z];J.setRowNumberAsRowIndicatorColumn();let oe=J.getRowNumber()-L;oe===0||(oe===1?L=J.getRowNumber():J.getRowNumber()>=h.getRowCount()?j[z]=null:L=J.getRowNumber())}}getBarcodeMetadata(){let h=this.getCodewords(),g=new dm,y=new dm,E=new dm,k=new dm;for(let j of h){if(j==null)continue;j.setRowNumberAsRowIndicatorColumn();let L=j.getValue()%30,z=j.getRowNumber();switch(this._isLeft||(z+=2),z%3){case 0:y.setValue(L*3+1);break;case 1:k.setValue(L/3),E.setValue(L%3);break;case 2:g.setValue(L+1);break}}if(g.getValue().length===0||y.getValue().length===0||E.getValue().length===0||k.getValue().length===0||g.getValue()[0]<1||y.getValue()[0]+E.getValue()[0]<Nr.MIN_ROWS_IN_BARCODE||y.getValue()[0]+E.getValue()[0]>Nr.MAX_ROWS_IN_BARCODE)return null;let T=new oi(g.getValue()[0],y.getValue()[0],E.getValue()[0],k.getValue()[0]);return this.removeIncorrectCodewords(h,T),T}removeIncorrectCodewords(h,g){for(let y=0;y<h.length;y++){let E=h[y];if(h[y]==null)continue;let k=E.getValue()%30,T=E.getRowNumber();if(T>g.getRowCount()){h[y]=null;continue}switch(this._isLeft||(T+=2),T%3){case 0:k*3+1!==g.getRowCountUpperPart()&&(h[y]=null);break;case 1:(Math.trunc(k/3)!==g.getErrorCorrectionLevel()||k%3!==g.getRowCountLowerPart())&&(h[y]=null);break;case 2:k+1!==g.getColumnCount()&&(h[y]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class fm{constructor(h,g){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=h,this.barcodeColumnCount=h.getColumnCount(),this.boundingBox=g,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let h=Nr.MAX_CODEWORDS_IN_BARCODE,g;do g=h,h=this.adjustRowNumbersAndGetCount();while(h>0&&h<g);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(h){h!=null&&h.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let h=this.adjustRowNumbersByRow();if(h===0)return 0;for(let g=1;g<this.barcodeColumnCount+1;g++){let y=this.detectionResultColumns[g].getCodewords();for(let E=0;E<y.length;E++)y[E]!=null&&(y[E].hasValidRowNumber()||this.adjustRowNumbers(g,E,y))}return h}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let h=this.detectionResultColumns[0].getCodewords(),g=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let y=0;y<h.length;y++)if(h[y]!=null&&g[y]!=null&&h[y].getRowNumber()===g[y].getRowNumber())for(let E=1;E<=this.barcodeColumnCount;E++){let k=this.detectionResultColumns[E].getCodewords()[y];k!=null&&(k.setRowNumber(h[y].getRowNumber()),k.hasValidRowNumber()||(this.detectionResultColumns[E].getCodewords()[y]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let h=0,g=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let y=0;y<g.length;y++){if(g[y]==null)continue;let E=g[y].getRowNumber(),k=0;for(let T=this.barcodeColumnCount+1;T>0&&k<this.ADJUST_ROW_NUMBER_SKIP;T--){let j=this.detectionResultColumns[T].getCodewords()[y];j!=null&&(k=fm.adjustRowNumberIfValid(E,k,j),j.hasValidRowNumber()||h++)}}return h}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let h=0,g=this.detectionResultColumns[0].getCodewords();for(let y=0;y<g.length;y++){if(g[y]==null)continue;let E=g[y].getRowNumber(),k=0;for(let T=1;T<this.barcodeColumnCount+1&&k<this.ADJUST_ROW_NUMBER_SKIP;T++){let j=this.detectionResultColumns[T].getCodewords()[y];j!=null&&(k=fm.adjustRowNumberIfValid(E,k,j),j.hasValidRowNumber()||h++)}}return h}static adjustRowNumberIfValid(h,g,y){return y==null||y.hasValidRowNumber()||(y.isValidRowNumber(h)?(y.setRowNumber(h),g=0):++g),g}adjustRowNumbers(h,g,y){if(!this.detectionResultColumns[h-1])return;let E=y[g],k=this.detectionResultColumns[h-1].getCodewords(),T=k;this.detectionResultColumns[h+1]!=null&&(T=this.detectionResultColumns[h+1].getCodewords());let j=new Array(14);j[2]=k[g],j[3]=T[g],g>0&&(j[0]=y[g-1],j[4]=k[g-1],j[5]=T[g-1]),g>1&&(j[8]=y[g-2],j[10]=k[g-2],j[11]=T[g-2]),g<y.length-1&&(j[1]=y[g+1],j[6]=k[g+1],j[7]=T[g+1]),g<y.length-2&&(j[9]=y[g+2],j[12]=k[g+2],j[13]=T[g+2]);for(let L of j)if(fm.adjustRowNumber(E,L))return}static adjustRowNumber(h,g){return g==null?!1:g.hasValidRowNumber()&&g.getBucket()===h.getBucket()?(h.setRowNumber(g.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(h){this.boundingBox=h}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(h,g){this.detectionResultColumns[h]=g}getDetectionResultColumn(h){return this.detectionResultColumns[h]}toString(){let h=this.detectionResultColumns[0];h==null&&(h=this.detectionResultColumns[this.barcodeColumnCount+1]);let g=new Dn;for(let y=0;y<h.getCodewords().length;y++){g.format("CW %3d:",y);for(let E=0;E<this.barcodeColumnCount+2;E++){if(this.detectionResultColumns[E]==null){g.format("    |   ");continue}let k=this.detectionResultColumns[E].getCodewords()[y];if(k==null){g.format("    |   ");continue}g.format(" %3d|%3d",k.getRowNumber(),k.getValue())}g.format("%n")}return g.toString()}}class hm{constructor(h,g,y,E){this.rowNumber=hm.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(h),this.endX=Math.trunc(g),this.bucket=Math.trunc(y),this.value=Math.trunc(E)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(h){return h!==hm.BARCODE_ROW_UNKNOWN&&this.bucket===h%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(h){this.rowNumber=h}toString(){return this.rowNumber+"|"+this.value}}hm.BARCODE_ROW_UNKNOWN=-1;class Hs{static initialize(){for(let h=0;h<Nr.SYMBOL_TABLE.length;h++){let g=Nr.SYMBOL_TABLE[h],y=g&1;for(let E=0;E<Nr.BARS_IN_MODULE;E++){let k=0;for(;(g&1)===y;)k+=1,g>>=1;y=g&1,Hs.RATIOS_TABLE[h]||(Hs.RATIOS_TABLE[h]=new Array(Nr.BARS_IN_MODULE)),Hs.RATIOS_TABLE[h][Nr.BARS_IN_MODULE-E-1]=Math.fround(k/Nr.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(h){let g=Hs.getDecodedCodewordValue(Hs.sampleBitCounts(h));return g!==-1?g:Hs.getClosestDecodedValue(h)}static sampleBitCounts(h){let g=lt.sum(h),y=new Int32Array(Nr.BARS_IN_MODULE),E=0,k=0;for(let T=0;T<Nr.MODULES_IN_CODEWORD;T++){let j=g/(2*Nr.MODULES_IN_CODEWORD)+T*g/Nr.MODULES_IN_CODEWORD;k+h[E]<=j&&(k+=h[E],E++),y[E]++}return y}static getDecodedCodewordValue(h){let g=Hs.getBitValue(h);return Nr.getCodeword(g)===-1?-1:g}static getBitValue(h){let g=0;for(let y=0;y<h.length;y++)for(let E=0;E<h[y];E++)g=g<<1|(y%2===0?1:0);return Math.trunc(g)}static getClosestDecodedValue(h){let g=lt.sum(h),y=new Array(Nr.BARS_IN_MODULE);if(g>1)for(let T=0;T<y.length;T++)y[T]=Math.fround(h[T]/g);let E=kt.MAX_VALUE,k=-1;this.bSymbolTableReady||Hs.initialize();for(let T=0;T<Hs.RATIOS_TABLE.length;T++){let j=0,L=Hs.RATIOS_TABLE[T];for(let z=0;z<Nr.BARS_IN_MODULE;z++){let J=Math.fround(L[z]-y[z]);if(j+=Math.fround(J*J),j>=E)break}j<E&&(E=j,k=Nr.SYMBOL_TABLE[T])}return k}}Hs.bSymbolTableReady=!1,Hs.RATIOS_TABLE=new Array(Nr.SYMBOL_TABLE.length).map(ae=>new Array(Nr.BARS_IN_MODULE));class Rb{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(h){this.segmentIndex=h}getFileId(){return this.fileId}setFileId(h){this.fileId=h}getOptionalData(){return this.optionalData}setOptionalData(h){this.optionalData=h}isLastSegment(){return this.lastSegment}setLastSegment(h){this.lastSegment=h}getSegmentCount(){return this.segmentCount}setSegmentCount(h){this.segmentCount=h}getSender(){return this.sender||null}setSender(h){this.sender=h}getAddressee(){return this.addressee||null}setAddressee(h){this.addressee=h}getFileName(){return this.fileName}setFileName(h){this.fileName=h}getFileSize(){return this.fileSize}setFileSize(h){this.fileSize=h}getChecksum(){return this.checksum}setChecksum(h){this.checksum=h}getTimestamp(){return this.timestamp}setTimestamp(h){this.timestamp=h}}class XC{static parseLong(h,g=void 0){return parseInt(h,g)}}class wa extends c{}wa.kind="NullPointerException";class jb{writeBytes(h){this.writeBytesOffset(h,0,h.length)}writeBytesOffset(h,g,y){if(h==null)throw new wa;if(g<0||g>h.length||y<0||g+y>h.length||g+y<0)throw new b;if(y===0)return;for(let E=0;E<y;E++)this.write(h[g+E])}flush(){}close(){}}class Af extends c{}class YC extends jb{constructor(h=32){if(super(),this.count=0,h<0)throw new f("Negative initial size: "+h);this.buf=new Uint8Array(h)}ensureCapacity(h){h-this.buf.length>0&&this.grow(h)}grow(h){let y=this.buf.length<<1;if(y-h<0&&(y=h),y<0){if(h<0)throw new Af;y=C.MAX_VALUE}this.buf=_.copyOfUint8Array(this.buf,y)}write(h){this.ensureCapacity(this.count+1),this.buf[this.count]=h,this.count+=1}writeBytesOffset(h,g,y){if(g<0||g>h.length||y<0||g+y-h.length>0)throw new b;this.ensureCapacity(this.count+y),v.arraycopy(h,g,this.buf,this.count,y),this.count+=y}writeTo(h){h.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return _.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(h){return h?typeof h=="string"?this.toString_string(h):this.toString_number(h):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(h){return new String(this.buf).toString()}toString_number(h){return new String(this.buf).toString()}close(){}}var Mn;(function(ae){ae[ae.ALPHA=0]="ALPHA",ae[ae.LOWER=1]="LOWER",ae[ae.MIXED=2]="MIXED",ae[ae.PUNCT=3]="PUNCT",ae[ae.ALPHA_SHIFT=4]="ALPHA_SHIFT",ae[ae.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Mn||(Mn={}));function Co(){if(typeof window<"u")return window.BigInt||null;if(typeof Ve<"u")return Ve.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let pm;function Eu(ae){if(typeof pm>"u"&&(pm=Co()),pm===null)throw new Error("BigInt is not supported!");return pm(ae)}function QC(){let ae=[];ae[0]=Eu(1);let h=Eu(900);ae[1]=h;for(let g=2;g<16;g++)ae[g]=ae[g-1]*h;return ae}class et{static decode(h,g){let y=new Z(""),E=M.ISO8859_1;y.enableDecoding(E);let k=1,T=h[k++],j=new Rb;for(;k<h[0];){switch(T){case et.TEXT_COMPACTION_MODE_LATCH:k=et.textCompaction(h,k,y);break;case et.BYTE_COMPACTION_MODE_LATCH:case et.BYTE_COMPACTION_MODE_LATCH_6:k=et.byteCompaction(T,h,E,k,y);break;case et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(h[k++]);break;case et.NUMERIC_COMPACTION_MODE_LATCH:k=et.numericCompaction(h,k,y);break;case et.ECI_CHARSET:M.getCharacterSetECIByValue(h[k++]);break;case et.ECI_GENERAL_PURPOSE:k+=2;break;case et.ECI_USER_DEFINED:k++;break;case et.BEGIN_MACRO_PDF417_CONTROL_BLOCK:k=et.decodeMacroBlock(h,k,j);break;case et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case et.MACRO_PDF417_TERMINATOR:throw new O;default:k--,k=et.textCompaction(h,k,y);break}if(k<h.length)T=h[k++];else throw O.getFormatInstance()}if(y.length()===0)throw O.getFormatInstance();let L=new ne(null,y.toString(),null,g);return L.setOther(j),L}static decodeMacroBlock(h,g,y){if(g+et.NUMBER_OF_SEQUENCE_CODEWORDS>h[0])throw O.getFormatInstance();let E=new Int32Array(et.NUMBER_OF_SEQUENCE_CODEWORDS);for(let j=0;j<et.NUMBER_OF_SEQUENCE_CODEWORDS;j++,g++)E[j]=h[g];y.setSegmentIndex(C.parseInt(et.decodeBase900toBase10(E,et.NUMBER_OF_SEQUENCE_CODEWORDS)));let k=new Z;g=et.textCompaction(h,g,k),y.setFileId(k.toString());let T=-1;for(h[g]===et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(T=g+1);g<h[0];)switch(h[g]){case et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(g++,h[g]){case et.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let j=new Z;g=et.textCompaction(h,g+1,j),y.setFileName(j.toString());break;case et.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let L=new Z;g=et.textCompaction(h,g+1,L),y.setSender(L.toString());break;case et.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let z=new Z;g=et.textCompaction(h,g+1,z),y.setAddressee(z.toString());break;case et.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let J=new Z;g=et.numericCompaction(h,g+1,J),y.setSegmentCount(C.parseInt(J.toString()));break;case et.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let oe=new Z;g=et.numericCompaction(h,g+1,oe),y.setTimestamp(XC.parseLong(oe.toString()));break;case et.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let xe=new Z;g=et.numericCompaction(h,g+1,xe),y.setChecksum(C.parseInt(xe.toString()));break;case et.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Oe=new Z;g=et.numericCompaction(h,g+1,Oe),y.setFileSize(XC.parseLong(Oe.toString()));break;default:throw O.getFormatInstance()}break;case et.MACRO_PDF417_TERMINATOR:g++,y.setLastSegment(!0);break;default:throw O.getFormatInstance()}if(T!==-1){let j=g-T;y.isLastSegment()&&j--,y.setOptionalData(_.copyOfRange(h,T,T+j))}return g}static textCompaction(h,g,y){let E=new Int32Array((h[0]-g)*2),k=new Int32Array((h[0]-g)*2),T=0,j=!1;for(;g<h[0]&&!j;){let L=h[g++];if(L<et.TEXT_COMPACTION_MODE_LATCH)E[T]=L/30,E[T+1]=L%30,T+=2;else switch(L){case et.TEXT_COMPACTION_MODE_LATCH:E[T++]=et.TEXT_COMPACTION_MODE_LATCH;break;case et.BYTE_COMPACTION_MODE_LATCH:case et.BYTE_COMPACTION_MODE_LATCH_6:case et.NUMERIC_COMPACTION_MODE_LATCH:case et.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case et.MACRO_PDF417_TERMINATOR:g--,j=!0;break;case et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:E[T]=et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,L=h[g++],k[T]=L,T++;break}}return et.decodeTextCompaction(E,k,T,y),g}static decodeTextCompaction(h,g,y,E){let k=Mn.ALPHA,T=Mn.ALPHA,j=0;for(;j<y;){let L=h[j],z="";switch(k){case Mn.ALPHA:if(L<26)z=String.fromCharCode(65+L);else switch(L){case 26:z=" ";break;case et.LL:k=Mn.LOWER;break;case et.ML:k=Mn.MIXED;break;case et.PS:T=k,k=Mn.PUNCT_SHIFT;break;case et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:E.append(g[j]);break;case et.TEXT_COMPACTION_MODE_LATCH:k=Mn.ALPHA;break}break;case Mn.LOWER:if(L<26)z=String.fromCharCode(97+L);else switch(L){case 26:z=" ";break;case et.AS:T=k,k=Mn.ALPHA_SHIFT;break;case et.ML:k=Mn.MIXED;break;case et.PS:T=k,k=Mn.PUNCT_SHIFT;break;case et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:E.append(g[j]);break;case et.TEXT_COMPACTION_MODE_LATCH:k=Mn.ALPHA;break}break;case Mn.MIXED:if(L<et.PL)z=et.MIXED_CHARS[L];else switch(L){case et.PL:k=Mn.PUNCT;break;case 26:z=" ";break;case et.LL:k=Mn.LOWER;break;case et.AL:k=Mn.ALPHA;break;case et.PS:T=k,k=Mn.PUNCT_SHIFT;break;case et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:E.append(g[j]);break;case et.TEXT_COMPACTION_MODE_LATCH:k=Mn.ALPHA;break}break;case Mn.PUNCT:if(L<et.PAL)z=et.PUNCT_CHARS[L];else switch(L){case et.PAL:k=Mn.ALPHA;break;case et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:E.append(g[j]);break;case et.TEXT_COMPACTION_MODE_LATCH:k=Mn.ALPHA;break}break;case Mn.ALPHA_SHIFT:if(k=T,L<26)z=String.fromCharCode(65+L);else switch(L){case 26:z=" ";break;case et.TEXT_COMPACTION_MODE_LATCH:k=Mn.ALPHA;break}break;case Mn.PUNCT_SHIFT:if(k=T,L<et.PAL)z=et.PUNCT_CHARS[L];else switch(L){case et.PAL:k=Mn.ALPHA;break;case et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:E.append(g[j]);break;case et.TEXT_COMPACTION_MODE_LATCH:k=Mn.ALPHA;break}break}z!==""&&E.append(z),j++}}static byteCompaction(h,g,y,E,k){let T=new YC,j=0,L=0,z=!1;switch(h){case et.BYTE_COMPACTION_MODE_LATCH:let J=new Int32Array(6),oe=g[E++];for(;E<g[0]&&!z;)switch(J[j++]=oe,L=900*L+oe,oe=g[E++],oe){case et.TEXT_COMPACTION_MODE_LATCH:case et.BYTE_COMPACTION_MODE_LATCH:case et.NUMERIC_COMPACTION_MODE_LATCH:case et.BYTE_COMPACTION_MODE_LATCH_6:case et.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case et.MACRO_PDF417_TERMINATOR:E--,z=!0;break;default:if(j%5===0&&j>0){for(let xe=0;xe<6;++xe)T.write(Number(Eu(L)>>Eu(8*(5-xe))));L=0,j=0}break}E===g[0]&&oe<et.TEXT_COMPACTION_MODE_LATCH&&(J[j++]=oe);for(let xe=0;xe<j;xe++)T.write(J[xe]);break;case et.BYTE_COMPACTION_MODE_LATCH_6:for(;E<g[0]&&!z;){let xe=g[E++];if(xe<et.TEXT_COMPACTION_MODE_LATCH)j++,L=900*L+xe;else switch(xe){case et.TEXT_COMPACTION_MODE_LATCH:case et.BYTE_COMPACTION_MODE_LATCH:case et.NUMERIC_COMPACTION_MODE_LATCH:case et.BYTE_COMPACTION_MODE_LATCH_6:case et.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case et.MACRO_PDF417_TERMINATOR:E--,z=!0;break}if(j%5===0&&j>0){for(let Oe=0;Oe<6;++Oe)T.write(Number(Eu(L)>>Eu(8*(5-Oe))));L=0,j=0}}break}return k.append(U.decode(T.toByteArray(),y)),E}static numericCompaction(h,g,y){let E=0,k=!1,T=new Int32Array(et.MAX_NUMERIC_CODEWORDS);for(;g<h[0]&&!k;){let j=h[g++];if(g===h[0]&&(k=!0),j<et.TEXT_COMPACTION_MODE_LATCH)T[E]=j,E++;else switch(j){case et.TEXT_COMPACTION_MODE_LATCH:case et.BYTE_COMPACTION_MODE_LATCH:case et.BYTE_COMPACTION_MODE_LATCH_6:case et.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case et.MACRO_PDF417_TERMINATOR:g--,k=!0;break}(E%et.MAX_NUMERIC_CODEWORDS===0||j===et.NUMERIC_COMPACTION_MODE_LATCH||k)&&E>0&&(y.append(et.decodeBase900toBase10(T,E)),E=0)}return g}static decodeBase900toBase10(h,g){let y=Eu(0);for(let k=0;k<g;k++)y+=et.EXP900[g-k-1]*Eu(h[k]);let E=y.toString();if(E.charAt(0)!=="1")throw new O;return E.substring(1)}}et.TEXT_COMPACTION_MODE_LATCH=900,et.BYTE_COMPACTION_MODE_LATCH=901,et.NUMERIC_COMPACTION_MODE_LATCH=902,et.BYTE_COMPACTION_MODE_LATCH_6=924,et.ECI_USER_DEFINED=925,et.ECI_GENERAL_PURPOSE=926,et.ECI_CHARSET=927,et.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,et.MACRO_PDF417_TERMINATOR=922,et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,et.MAX_NUMERIC_CODEWORDS=15,et.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,et.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,et.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,et.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,et.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,et.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,et.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,et.PL=25,et.LL=27,et.AS=27,et.ML=28,et.AL=28,et.PS=29,et.PAL=29,et.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,et.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",et.EXP900=Co()?QC():[],et.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Xr{constructor(){}static decode(h,g,y,E,k,T,j){let L=new Nf(h,g,y,E,k),z=null,J=null,oe;for(let ue=!0;;ue=!1){if(g!=null&&(z=Xr.getRowIndicatorColumn(h,L,g,!0,T,j)),E!=null&&(J=Xr.getRowIndicatorColumn(h,L,E,!1,T,j)),oe=Xr.merge(z,J),oe==null)throw V.getNotFoundInstance();let Ee=oe.getBoundingBox();if(ue&&Ee!=null&&(Ee.getMinY()<L.getMinY()||Ee.getMaxY()>L.getMaxY()))L=Ee;else break}oe.setBoundingBox(L);let xe=oe.getBarcodeColumnCount()+1;oe.setDetectionResultColumn(0,z),oe.setDetectionResultColumn(xe,J);let Oe=z!=null;for(let ue=1;ue<=xe;ue++){let Ee=Oe?ue:xe-ue;if(oe.getDetectionResultColumn(Ee)!==void 0)continue;let Te;Ee===0||Ee===xe?Te=new KC(L,Ee===0):Te=new um(L),oe.setDetectionResultColumn(Ee,Te);let Be=-1,ot=Be;for(let gt=L.getMinY();gt<=L.getMaxY();gt++){if(Be=Xr.getStartColumn(oe,Ee,gt,Oe),Be<0||Be>L.getMaxX()){if(ot===-1)continue;Be=ot}let vt=Xr.detectCodeword(h,L.getMinX(),L.getMaxX(),Oe,Be,gt,T,j);vt!=null&&(Te.setCodeword(gt,vt),ot=Be,T=Math.min(T,vt.getWidth()),j=Math.max(j,vt.getWidth()))}}return Xr.createDecoderResult(oe)}static merge(h,g){if(h==null&&g==null)return null;let y=Xr.getBarcodeMetadata(h,g);if(y==null)return null;let E=Nf.merge(Xr.adjustBoundingBox(h),Xr.adjustBoundingBox(g));return new fm(y,E)}static adjustBoundingBox(h){if(h==null)return null;let g=h.getRowHeights();if(g==null)return null;let y=Xr.getMax(g),E=0;for(let j of g)if(E+=y-j,j>0)break;let k=h.getCodewords();for(let j=0;E>0&&k[j]==null;j++)E--;let T=0;for(let j=g.length-1;j>=0&&(T+=y-g[j],!(g[j]>0));j--);for(let j=k.length-1;T>0&&k[j]==null;j--)T--;return h.getBoundingBox().addMissingRows(E,T,h.isLeft())}static getMax(h){let g=-1;for(let y of h)g=Math.max(g,y);return g}static getBarcodeMetadata(h,g){let y;if(h==null||(y=h.getBarcodeMetadata())==null)return g==null?null:g.getBarcodeMetadata();let E;return g==null||(E=g.getBarcodeMetadata())==null?y:y.getColumnCount()!==E.getColumnCount()&&y.getErrorCorrectionLevel()!==E.getErrorCorrectionLevel()&&y.getRowCount()!==E.getRowCount()?null:y}static getRowIndicatorColumn(h,g,y,E,k,T){let j=new KC(g,E);for(let L=0;L<2;L++){let z=L===0?1:-1,J=Math.trunc(Math.trunc(y.getX()));for(let oe=Math.trunc(Math.trunc(y.getY()));oe<=g.getMaxY()&&oe>=g.getMinY();oe+=z){let xe=Xr.detectCodeword(h,0,h.getWidth(),E,J,oe,k,T);xe!=null&&(j.setCodeword(oe,xe),E?J=xe.getStartX():J=xe.getEndX())}}return j}static adjustCodewordCount(h,g){let y=g[0][1],E=y.getValue(),k=h.getBarcodeColumnCount()*h.getBarcodeRowCount()-Xr.getNumberOfECCodeWords(h.getBarcodeECLevel());if(E.length===0){if(k<1||k>Nr.MAX_CODEWORDS_IN_BARCODE)throw V.getNotFoundInstance();y.setValue(k)}else E[0]!==k&&y.setValue(k)}static createDecoderResult(h){let g=Xr.createBarcodeMatrix(h);Xr.adjustCodewordCount(h,g);let y=new Array,E=new Int32Array(h.getBarcodeRowCount()*h.getBarcodeColumnCount()),k=[],T=new Array;for(let L=0;L<h.getBarcodeRowCount();L++)for(let z=0;z<h.getBarcodeColumnCount();z++){let J=g[L][z+1].getValue(),oe=L*h.getBarcodeColumnCount()+z;J.length===0?y.push(oe):J.length===1?E[oe]=J[0]:(T.push(oe),k.push(J))}let j=new Array(k.length);for(let L=0;L<j.length;L++)j[L]=k[L];return Xr.createDecoderResultFromAmbiguousValues(h.getBarcodeECLevel(),E,Nr.toIntArray(y),Nr.toIntArray(T),j)}static createDecoderResultFromAmbiguousValues(h,g,y,E,k){let T=new Int32Array(E.length),j=100;for(;j-- >0;){for(let L=0;L<T.length;L++)g[E[L]]=k[L][T[L]];try{return Xr.decodeCodewords(g,h,y)}catch(L){if(!(L instanceof m))throw L}if(T.length===0)throw m.getChecksumInstance();for(let L=0;L<T.length;L++)if(T[L]<k[L].length-1){T[L]++;break}else if(T[L]=0,L===T.length-1)throw m.getChecksumInstance()}throw m.getChecksumInstance()}static createBarcodeMatrix(h){let g=Array.from({length:h.getBarcodeRowCount()},()=>new Array(h.getBarcodeColumnCount()+2));for(let E=0;E<g.length;E++)for(let k=0;k<g[E].length;k++)g[E][k]=new dm;let y=0;for(let E of h.getDetectionResultColumns()){if(E!=null){for(let k of E.getCodewords())if(k!=null){let T=k.getRowNumber();if(T>=0){if(T>=g.length)continue;g[T][y].setValue(k.getValue())}}}y++}return g}static isValidBarcodeColumn(h,g){return g>=0&&g<=h.getBarcodeColumnCount()+1}static getStartColumn(h,g,y,E){let k=E?1:-1,T=null;if(Xr.isValidBarcodeColumn(h,g-k)&&(T=h.getDetectionResultColumn(g-k).getCodeword(y)),T!=null)return E?T.getEndX():T.getStartX();if(T=h.getDetectionResultColumn(g).getCodewordNearby(y),T!=null)return E?T.getStartX():T.getEndX();if(Xr.isValidBarcodeColumn(h,g-k)&&(T=h.getDetectionResultColumn(g-k).getCodewordNearby(y)),T!=null)return E?T.getEndX():T.getStartX();let j=0;for(;Xr.isValidBarcodeColumn(h,g-k);){g-=k;for(let L of h.getDetectionResultColumn(g).getCodewords())if(L!=null)return(E?L.getEndX():L.getStartX())+k*j*(L.getEndX()-L.getStartX());j++}return E?h.getBoundingBox().getMinX():h.getBoundingBox().getMaxX()}static detectCodeword(h,g,y,E,k,T,j,L){k=Xr.adjustCodewordStartColumn(h,g,y,E,k,T);let z=Xr.getModuleBitCount(h,g,y,E,k,T);if(z==null)return null;let J,oe=lt.sum(z);if(E)J=k+oe;else{for(let ue=0;ue<z.length/2;ue++){let Ee=z[ue];z[ue]=z[z.length-1-ue],z[z.length-1-ue]=Ee}J=k,k=J-oe}if(!Xr.checkCodewordSkew(oe,j,L))return null;let xe=Hs.getDecodedValue(z),Oe=Nr.getCodeword(xe);return Oe===-1?null:new hm(k,J,Xr.getCodewordBucketNumber(xe),Oe)}static getModuleBitCount(h,g,y,E,k,T){let j=k,L=new Int32Array(8),z=0,J=E?1:-1,oe=E;for(;(E?j<y:j>=g)&&z<L.length;)h.get(j,T)===oe?(L[z]++,j+=J):(z++,oe=!oe);return z===L.length||j===(E?y:g)&&z===L.length-1?L:null}static getNumberOfECCodeWords(h){return 2<<h}static adjustCodewordStartColumn(h,g,y,E,k,T){let j=k,L=E?-1:1;for(let z=0;z<2;z++){for(;(E?j>=g:j<y)&&E===h.get(j,T);){if(Math.abs(k-j)>Xr.CODEWORD_SKEW_SIZE)return k;j+=L}L=-L,E=!E}return j}static checkCodewordSkew(h,g,y){return g-Xr.CODEWORD_SKEW_SIZE<=h&&h<=y+Xr.CODEWORD_SKEW_SIZE}static decodeCodewords(h,g,y){if(h.length===0)throw O.getFormatInstance();let E=1<<g+1,k=Xr.correctErrors(h,y,E);Xr.verifyCodewordCount(h,E);let T=et.decode(h,""+g);return T.setErrorsCorrected(k),T.setErasures(y.length),T}static correctErrors(h,g,y){if(g!=null&&g.length>y/2+Xr.MAX_ERRORS||y<0||y>Xr.MAX_EC_CODEWORDS)throw m.getChecksumInstance();return Xr.errorCorrection.decode(h,y,g)}static verifyCodewordCount(h,g){if(h.length<4)throw O.getFormatInstance();let y=h[0];if(y>h.length)throw O.getFormatInstance();if(y===0)if(g<h.length)h[0]=h.length-g;else throw O.getFormatInstance()}static getBitCountForCodeword(h){let g=new Int32Array(8),y=0,E=g.length-1;for(;!((h&1)!==y&&(y=h&1,E--,E<0));)g[E]++,h>>=1;return g}static getCodewordBucketNumber(h){return h instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(h):this.getCodewordBucketNumber_number(h)}static getCodewordBucketNumber_number(h){return Xr.getCodewordBucketNumber(Xr.getBitCountForCodeword(h))}static getCodewordBucketNumber_Int32Array(h){return(h[0]-h[2]+h[4]-h[6]+9)%9}static toString(h){let g=new Dn;for(let y=0;y<h.length;y++){g.format("Row %2d: ",y);for(let E=0;E<h[y].length;E++){let k=h[y][E];k.getValue().length===0?g.format("        ",null):g.format("%4d(%2d)",k.getValue()[0],k.getConfidence(k.getValue()[0]))}g.format("%n")}return g.toString()}}Xr.CODEWORD_SKEW_SIZE=2,Xr.MAX_ERRORS=3,Xr.MAX_EC_CODEWORDS=512,Xr.errorCorrection=new GC;class Sa{decode(h,g=null){let y=Sa.decode(h,g,!1);if(y==null||y.length===0||y[0]==null)throw V.getNotFoundInstance();return y[0]}decodeMultiple(h,g=null){try{return Sa.decode(h,g,!0)}catch(y){throw y instanceof O||y instanceof m?V.getNotFoundInstance():y}}static decode(h,g,y){const E=new Array,k=zr.detectMultiple(h,g,y);for(const T of k.getPoints()){const j=Xr.decode(k.getBits(),T[4],T[5],T[6],T[7],Sa.getMinCodewordWidth(T),Sa.getMaxCodewordWidth(T)),L=new W(j.getText(),j.getRawBytes(),void 0,T,ie.PDF_417);L.putMetadata(re.ERROR_CORRECTION_LEVEL,j.getECLevel());const z=j.getOther();z!=null&&L.putMetadata(re.PDF417_EXTRA_METADATA,z),E.push(L)}return E.map(T=>T)}static getMaxWidth(h,g){return h==null||g==null?0:Math.trunc(Math.abs(h.getX()-g.getX()))}static getMinWidth(h,g){return h==null||g==null?C.MAX_VALUE:Math.trunc(Math.abs(h.getX()-g.getX()))}static getMaxCodewordWidth(h){return Math.floor(Math.max(Math.max(Sa.getMaxWidth(h[0],h[4]),Sa.getMaxWidth(h[6],h[2])*Nr.MODULES_IN_CODEWORD/Nr.MODULES_IN_STOP_PATTERN),Math.max(Sa.getMaxWidth(h[1],h[5]),Sa.getMaxWidth(h[7],h[3])*Nr.MODULES_IN_CODEWORD/Nr.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(h){return Math.floor(Math.min(Math.min(Sa.getMinWidth(h[0],h[4]),Sa.getMinWidth(h[6],h[2])*Nr.MODULES_IN_CODEWORD/Nr.MODULES_IN_STOP_PATTERN),Math.min(Sa.getMinWidth(h[1],h[5]),Sa.getMinWidth(h[7],h[3])*Nr.MODULES_IN_CODEWORD/Nr.MODULES_IN_STOP_PATTERN)))}reset(){}}class Xa extends c{}Xa.kind="ReaderException";class JC{constructor(h,g){this.verbose=h===!0,g&&this.setHints(g)}decode(h,g){return g&&this.setHints(g),this.decodeInternal(h)}decodeWithState(h){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(h)}setHints(h){this.hints=h;const g=!n(h)&&h.get(P.TRY_HARDER)===!0,y=n(h)?null:h.get(P.POSSIBLE_FORMATS),E=new Array;if(!n(y)){const k=y.some(T=>T===ie.UPC_A||T===ie.UPC_E||T===ie.EAN_13||T===ie.EAN_8||T===ie.CODABAR||T===ie.CODE_39||T===ie.CODE_93||T===ie.CODE_128||T===ie.ITF||T===ie.RSS_14||T===ie.RSS_EXPANDED);k&&!g&&E.push(new wo(h,this.verbose)),y.includes(ie.QR_CODE)&&E.push(new xd),y.includes(ie.DATA_MATRIX)&&E.push(new Rl),y.includes(ie.AZTEC)&&E.push(new qe),y.includes(ie.PDF_417)&&E.push(new Sa),k&&g&&E.push(new wo(h,this.verbose))}E.length===0&&(g||E.push(new wo(h,this.verbose)),E.push(new xd),E.push(new Rl),E.push(new qe),E.push(new Sa),g&&E.push(new wo(h,this.verbose))),this.readers=E}reset(){if(this.readers!==null)for(const h of this.readers)h.reset()}decodeInternal(h){if(this.readers===null)throw new Xa("No readers where selected, nothing can be read.");for(const g of this.readers)try{return g.decode(h,this.hints)}catch(y){if(y instanceof Xa)continue}throw new V("No MultiFormat Readers were able to detect the code.")}}class Jo extends ce{constructor(h=null,g=500){const y=new JC;y.setHints(h),super(y,g)}decodeBitmap(h){return this.reader.decodeWithState(h)}}class IP extends ce{constructor(h=500){super(new Sa,h)}}class ZC extends ce{constructor(h=500){super(new xd,h)}}var bc;(function(ae){ae[ae.ERROR_CORRECTION=0]="ERROR_CORRECTION",ae[ae.CHARACTER_SET=1]="CHARACTER_SET",ae[ae.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",ae[ae.MIN_SIZE=3]="MIN_SIZE",ae[ae.MAX_SIZE=4]="MAX_SIZE",ae[ae.MARGIN=5]="MARGIN",ae[ae.PDF417_COMPACT=6]="PDF417_COMPACT",ae[ae.PDF417_COMPACTION=7]="PDF417_COMPACTION",ae[ae.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",ae[ae.AZTEC_LAYERS=9]="AZTEC_LAYERS",ae[ae.QR_VERSION=10]="QR_VERSION"})(bc||(bc={}));var Ai=bc;class mm{constructor(h){this.field=h,this.cachedGenerators=[],this.cachedGenerators.push(new we(h,Int32Array.from([1])))}buildGenerator(h){const g=this.cachedGenerators;if(h>=g.length){let y=g[g.length-1];const E=this.field;for(let k=g.length;k<=h;k++){const T=y.multiply(new we(E,Int32Array.from([1,E.exp(k-1+E.getGeneratorBase())])));g.push(T),y=T}}return g[h]}encode(h,g){if(g===0)throw new f("No error correction bytes");const y=h.length-g;if(y<=0)throw new f("No data bytes provided");const E=this.buildGenerator(g),k=new Int32Array(y);v.arraycopy(h,0,k,0,y);let T=new we(this.field,k);T=T.multiplyByMonomial(g,1);const L=T.divide(E)[1].getCoefficients(),z=g-L.length;for(let J=0;J<z;J++)h[y+J]=0;v.arraycopy(L,0,h,y+z,L.length)}}class Mr{constructor(){}static applyMaskPenaltyRule1(h){return Mr.applyMaskPenaltyRule1Internal(h,!0)+Mr.applyMaskPenaltyRule1Internal(h,!1)}static applyMaskPenaltyRule2(h){let g=0;const y=h.getArray(),E=h.getWidth(),k=h.getHeight();for(let T=0;T<k-1;T++){const j=y[T];for(let L=0;L<E-1;L++){const z=j[L];z===j[L+1]&&z===y[T+1][L]&&z===y[T+1][L+1]&&g++}}return Mr.N2*g}static applyMaskPenaltyRule3(h){let g=0;const y=h.getArray(),E=h.getWidth(),k=h.getHeight();for(let T=0;T<k;T++)for(let j=0;j<E;j++){const L=y[T];j+6<E&&L[j]===1&&L[j+1]===0&&L[j+2]===1&&L[j+3]===1&&L[j+4]===1&&L[j+5]===0&&L[j+6]===1&&(Mr.isWhiteHorizontal(L,j-4,j)||Mr.isWhiteHorizontal(L,j+7,j+11))&&g++,T+6<k&&y[T][j]===1&&y[T+1][j]===0&&y[T+2][j]===1&&y[T+3][j]===1&&y[T+4][j]===1&&y[T+5][j]===0&&y[T+6][j]===1&&(Mr.isWhiteVertical(y,j,T-4,T)||Mr.isWhiteVertical(y,j,T+7,T+11))&&g++}return g*Mr.N3}static isWhiteHorizontal(h,g,y){g=Math.max(g,0),y=Math.min(y,h.length);for(let E=g;E<y;E++)if(h[E]===1)return!1;return!0}static isWhiteVertical(h,g,y,E){y=Math.max(y,0),E=Math.min(E,h.length);for(let k=y;k<E;k++)if(h[k][g]===1)return!1;return!0}static applyMaskPenaltyRule4(h){let g=0;const y=h.getArray(),E=h.getWidth(),k=h.getHeight();for(let L=0;L<k;L++){const z=y[L];for(let J=0;J<E;J++)z[J]===1&&g++}const T=h.getHeight()*h.getWidth();return Math.floor(Math.abs(g*2-T)*10/T)*Mr.N4}static getDataMaskBit(h,g,y){let E,k;switch(h){case 0:E=y+g&1;break;case 1:E=y&1;break;case 2:E=g%3;break;case 3:E=(y+g)%3;break;case 4:E=Math.floor(y/2)+Math.floor(g/3)&1;break;case 5:k=y*g,E=(k&1)+k%3;break;case 6:k=y*g,E=(k&1)+k%3&1;break;case 7:k=y*g,E=k%3+(y+g&1)&1;break;default:throw new f("Invalid mask pattern: "+h)}return E===0}static applyMaskPenaltyRule1Internal(h,g){let y=0;const E=g?h.getHeight():h.getWidth(),k=g?h.getWidth():h.getHeight(),T=h.getArray();for(let j=0;j<E;j++){let L=0,z=-1;for(let J=0;J<k;J++){const oe=g?T[j][J]:T[J][j];oe===z?L++:(L>=5&&(y+=Mr.N1+(L-5)),L=1,z=oe)}L>=5&&(y+=Mr.N1+(L-5))}return y}}Mr.N1=3,Mr.N2=3,Mr.N3=40,Mr.N4=10;class jl{constructor(h,g){this.width=h,this.height=g;const y=new Array(g);for(let E=0;E!==g;E++)y[E]=new Uint8Array(h);this.bytes=y}getHeight(){return this.height}getWidth(){return this.width}get(h,g){return this.bytes[g][h]}getArray(){return this.bytes}setNumber(h,g,y){this.bytes[g][h]=y}setBoolean(h,g,y){this.bytes[g][h]=y?1:0}clear(h){for(const g of this.bytes)_.fill(g,h)}equals(h){if(!(h instanceof jl))return!1;const g=h;if(this.width!==g.width||this.height!==g.height)return!1;for(let y=0,E=this.height;y<E;++y){const k=this.bytes[y],T=g.bytes[y];for(let j=0,L=this.width;j<L;++j)if(k[j]!==T[j])return!1}return!0}toString(){const h=new Z;for(let g=0,y=this.height;g<y;++g){const E=this.bytes[g];for(let k=0,T=this.width;k<T;++k)switch(E[k]){case 0:h.append(" 0");break;case 1:h.append(" 1");break;default:h.append("  ");break}h.append(`
`)}return h.toString()}}class Cu{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const h=new Z;return h.append(`<<
`),h.append(" mode: "),h.append(this.mode?this.mode.toString():"null"),h.append(`
 ecLevel: `),h.append(this.ecLevel?this.ecLevel.toString():"null"),h.append(`
 version: `),h.append(this.version?this.version.toString():"null"),h.append(`
 maskPattern: `),h.append(this.maskPattern.toString()),this.matrix?(h.append(`
 matrix:
`),h.append(this.matrix.toString())):h.append(`
 matrix: null
`),h.append(`>>
`),h.toString()}setMode(h){this.mode=h}setECLevel(h){this.ecLevel=h}setVersion(h){this.version=h}setMaskPattern(h){this.maskPattern=h}setMatrix(h){this.matrix=h}static isValidMaskPattern(h){return h>=0&&h<Cu.NUM_MASK_PATTERNS}}Cu.NUM_MASK_PATTERNS=8;class Xn extends c{}Xn.kind="WriterException";class gr{constructor(){}static clearMatrix(h){h.clear(255)}static buildMatrix(h,g,y,E,k){gr.clearMatrix(k),gr.embedBasicPatterns(y,k),gr.embedTypeInfo(g,E,k),gr.maybeEmbedVersionInfo(y,k),gr.embedDataBits(h,E,k)}static embedBasicPatterns(h,g){gr.embedPositionDetectionPatternsAndSeparators(g),gr.embedDarkDotAtLeftBottomCorner(g),gr.maybeEmbedPositionAdjustmentPatterns(h,g),gr.embedTimingPatterns(g)}static embedTypeInfo(h,g,y){const E=new N;gr.makeTypeInfoBits(h,g,E);for(let k=0,T=E.getSize();k<T;++k){const j=E.get(E.getSize()-1-k),L=gr.TYPE_INFO_COORDINATES[k],z=L[0],J=L[1];if(y.setBoolean(z,J,j),k<8){const oe=y.getWidth()-k-1;y.setBoolean(oe,8,j)}else{const xe=y.getHeight()-7+(k-8);y.setBoolean(8,xe,j)}}}static maybeEmbedVersionInfo(h,g){if(h.getVersionNumber()<7)return;const y=new N;gr.makeVersionInfoBits(h,y);let E=6*3-1;for(let k=0;k<6;++k)for(let T=0;T<3;++T){const j=y.get(E);E--,g.setBoolean(k,g.getHeight()-11+T,j),g.setBoolean(g.getHeight()-11+T,k,j)}}static embedDataBits(h,g,y){let E=0,k=-1,T=y.getWidth()-1,j=y.getHeight()-1;for(;T>0;){for(T===6&&(T-=1);j>=0&&j<y.getHeight();){for(let L=0;L<2;++L){const z=T-L;if(!gr.isEmpty(y.get(z,j)))continue;let J;E<h.getSize()?(J=h.get(E),++E):J=!1,g!==255&&Mr.getDataMaskBit(g,z,j)&&(J=!J),y.setBoolean(z,j,J)}j+=k}k=-k,j+=k,T-=2}if(E!==h.getSize())throw new Xn("Not all bits consumed: "+E+"/"+h.getSize())}static findMSBSet(h){return 32-C.numberOfLeadingZeros(h)}static calculateBCHCode(h,g){if(g===0)throw new f("0 polynomial");const y=gr.findMSBSet(g);for(h<<=y-1;gr.findMSBSet(h)>=y;)h^=g<<gr.findMSBSet(h)-y;return h}static makeTypeInfoBits(h,g,y){if(!Cu.isValidMaskPattern(g))throw new Xn("Invalid mask pattern");const E=h.getBits()<<3|g;y.appendBits(E,5);const k=gr.calculateBCHCode(E,gr.TYPE_INFO_POLY);y.appendBits(k,10);const T=new N;if(T.appendBits(gr.TYPE_INFO_MASK_PATTERN,15),y.xor(T),y.getSize()!==15)throw new Xn("should not happen but we got: "+y.getSize())}static makeVersionInfoBits(h,g){g.appendBits(h.getVersionNumber(),6);const y=gr.calculateBCHCode(h.getVersionNumber(),gr.VERSION_INFO_POLY);if(g.appendBits(y,12),g.getSize()!==18)throw new Xn("should not happen but we got: "+g.getSize())}static isEmpty(h){return h===255}static embedTimingPatterns(h){for(let g=8;g<h.getWidth()-8;++g){const y=(g+1)%2;gr.isEmpty(h.get(g,6))&&h.setNumber(g,6,y),gr.isEmpty(h.get(6,g))&&h.setNumber(6,g,y)}}static embedDarkDotAtLeftBottomCorner(h){if(h.get(8,h.getHeight()-8)===0)throw new Xn;h.setNumber(8,h.getHeight()-8,1)}static embedHorizontalSeparationPattern(h,g,y){for(let E=0;E<8;++E){if(!gr.isEmpty(y.get(h+E,g)))throw new Xn;y.setNumber(h+E,g,0)}}static embedVerticalSeparationPattern(h,g,y){for(let E=0;E<7;++E){if(!gr.isEmpty(y.get(h,g+E)))throw new Xn;y.setNumber(h,g+E,0)}}static embedPositionAdjustmentPattern(h,g,y){for(let E=0;E<5;++E){const k=gr.POSITION_ADJUSTMENT_PATTERN[E];for(let T=0;T<5;++T)y.setNumber(h+T,g+E,k[T])}}static embedPositionDetectionPattern(h,g,y){for(let E=0;E<7;++E){const k=gr.POSITION_DETECTION_PATTERN[E];for(let T=0;T<7;++T)y.setNumber(h+T,g+E,k[T])}}static embedPositionDetectionPatternsAndSeparators(h){const g=gr.POSITION_DETECTION_PATTERN[0].length;gr.embedPositionDetectionPattern(0,0,h),gr.embedPositionDetectionPattern(h.getWidth()-g,0,h),gr.embedPositionDetectionPattern(0,h.getWidth()-g,h);const y=8;gr.embedHorizontalSeparationPattern(0,y-1,h),gr.embedHorizontalSeparationPattern(h.getWidth()-y,y-1,h),gr.embedHorizontalSeparationPattern(0,h.getWidth()-y,h);const E=7;gr.embedVerticalSeparationPattern(E,0,h),gr.embedVerticalSeparationPattern(h.getHeight()-E-1,0,h),gr.embedVerticalSeparationPattern(E,h.getHeight()-E,h)}static maybeEmbedPositionAdjustmentPatterns(h,g){if(h.getVersionNumber()<2)return;const y=h.getVersionNumber()-1,E=gr.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[y];for(let k=0,T=E.length;k!==T;k++){const j=E[k];if(j>=0)for(let L=0;L!==T;L++){const z=E[L];z>=0&&gr.isEmpty(g.get(z,j))&&gr.embedPositionAdjustmentPattern(z-2,j-2,g)}}}}gr.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),gr.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),gr.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),gr.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),gr.VERSION_INFO_POLY=7973,gr.TYPE_INFO_POLY=1335,gr.TYPE_INFO_MASK_PATTERN=21522;class OP{constructor(h,g){this.dataBytes=h,this.errorCorrectionBytes=g}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class li{constructor(){}static calculateMaskPenalty(h){return Mr.applyMaskPenaltyRule1(h)+Mr.applyMaskPenaltyRule2(h)+Mr.applyMaskPenaltyRule3(h)+Mr.applyMaskPenaltyRule4(h)}static encode(h,g,y=null){let E=li.DEFAULT_BYTE_MODE_ENCODING;const k=y!==null&&y.get(Ai.CHARACTER_SET)!==void 0;k&&(E=y.get(Ai.CHARACTER_SET).toString());const T=this.chooseMode(h,E),j=new N;if(T===mr.BYTE&&(k||li.DEFAULT_BYTE_MODE_ENCODING!==E)){const gt=M.getCharacterSetECIByName(E);gt!==void 0&&this.appendECI(gt,j)}this.appendModeInfo(T,j);const L=new N;this.appendBytes(h,T,L,E);let z;if(y!==null&&y.get(Ai.QR_VERSION)!==void 0){const gt=Number.parseInt(y.get(Ai.QR_VERSION).toString(),10);z=ir.getVersionForNumber(gt);const vt=this.calculateBitsNeeded(T,j,L,z);if(!this.willFit(vt,z,g))throw new Xn("Data too big for requested version")}else z=this.recommendVersion(g,T,j,L);const J=new N;J.appendBitArray(j);const oe=T===mr.BYTE?L.getSizeInBytes():h.length;this.appendLengthInfo(oe,z,T,J),J.appendBitArray(L);const xe=z.getECBlocksForLevel(g),Oe=z.getTotalCodewords()-xe.getTotalECCodewords();this.terminateBits(Oe,J);const ue=this.interleaveWithECBytes(J,z.getTotalCodewords(),Oe,xe.getNumBlocks()),Ee=new Cu;Ee.setECLevel(g),Ee.setMode(T),Ee.setVersion(z);const Te=z.getDimensionForVersion(),Be=new jl(Te,Te),ot=this.chooseMaskPattern(ue,g,z,Be);return Ee.setMaskPattern(ot),gr.buildMatrix(ue,g,z,ot,Be),Ee.setMatrix(Be),Ee}static recommendVersion(h,g,y,E){const k=this.calculateBitsNeeded(g,y,E,ir.getVersionForNumber(1)),T=this.chooseVersion(k,h),j=this.calculateBitsNeeded(g,y,E,T);return this.chooseVersion(j,h)}static calculateBitsNeeded(h,g,y,E){return g.getSize()+h.getCharacterCountBits(E)+y.getSize()}static getAlphanumericCode(h){return h<li.ALPHANUMERIC_TABLE.length?li.ALPHANUMERIC_TABLE[h]:-1}static chooseMode(h,g=null){if(M.SJIS.getName()===g&&this.isOnlyDoubleByteKanji(h))return mr.KANJI;let y=!1,E=!1;for(let k=0,T=h.length;k<T;++k){const j=h.charAt(k);if(li.isDigit(j))y=!0;else if(this.getAlphanumericCode(j.charCodeAt(0))!==-1)E=!0;else return mr.BYTE}return E?mr.ALPHANUMERIC:y?mr.NUMERIC:mr.BYTE}static isOnlyDoubleByteKanji(h){let g;try{g=U.encode(h,M.SJIS)}catch{return!1}const y=g.length;if(y%2!==0)return!1;for(let E=0;E<y;E+=2){const k=g[E]&255;if((k<129||k>159)&&(k<224||k>235))return!1}return!0}static chooseMaskPattern(h,g,y,E){let k=Number.MAX_SAFE_INTEGER,T=-1;for(let j=0;j<Cu.NUM_MASK_PATTERNS;j++){gr.buildMatrix(h,g,y,j,E);let L=this.calculateMaskPenalty(E);L<k&&(k=L,T=j)}return T}static chooseVersion(h,g){for(let y=1;y<=40;y++){const E=ir.getVersionForNumber(y);if(li.willFit(h,E,g))return E}throw new Xn("Data too big")}static willFit(h,g,y){const E=g.getTotalCodewords(),T=g.getECBlocksForLevel(y).getTotalECCodewords(),j=E-T,L=(h+7)/8;return j>=L}static terminateBits(h,g){const y=h*8;if(g.getSize()>y)throw new Xn("data bits cannot fit in the QR Code"+g.getSize()+" > "+y);for(let T=0;T<4&&g.getSize()<y;++T)g.appendBit(!1);const E=g.getSize()&7;if(E>0)for(let T=E;T<8;T++)g.appendBit(!1);const k=h-g.getSizeInBytes();for(let T=0;T<k;++T)g.appendBits(T&1?17:236,8);if(g.getSize()!==y)throw new Xn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(h,g,y,E,k,T){if(E>=y)throw new Xn("Block ID too large");const j=h%y,L=y-j,z=Math.floor(h/y),J=z+1,oe=Math.floor(g/y),xe=oe+1,Oe=z-oe,ue=J-xe;if(Oe!==ue)throw new Xn("EC bytes mismatch");if(y!==L+j)throw new Xn("RS blocks mismatch");if(h!==(oe+Oe)*L+(xe+ue)*j)throw new Xn("Total bytes mismatch");E<L?(k[0]=oe,T[0]=Oe):(k[0]=xe,T[0]=ue)}static interleaveWithECBytes(h,g,y,E){if(h.getSizeInBytes()!==y)throw new Xn("Number of bits and data bytes does not match");let k=0,T=0,j=0;const L=new Array;for(let J=0;J<E;++J){const oe=new Int32Array(1),xe=new Int32Array(1);li.getNumDataBytesAndNumECBytesForBlockID(g,y,E,J,oe,xe);const Oe=oe[0],ue=new Uint8Array(Oe);h.toBytes(8*k,ue,0,Oe);const Ee=li.generateECBytes(ue,xe[0]);L.push(new OP(ue,Ee)),T=Math.max(T,Oe),j=Math.max(j,Ee.length),k+=oe[0]}if(y!==k)throw new Xn("Data bytes does not match offset");const z=new N;for(let J=0;J<T;++J)for(const oe of L){const xe=oe.getDataBytes();J<xe.length&&z.appendBits(xe[J],8)}for(let J=0;J<j;++J)for(const oe of L){const xe=oe.getErrorCorrectionBytes();J<xe.length&&z.appendBits(xe[J],8)}if(g!==z.getSizeInBytes())throw new Xn("Interleaving error: "+g+" and "+z.getSizeInBytes()+" differ.");return z}static generateECBytes(h,g){const y=h.length,E=new Int32Array(y+g);for(let T=0;T<y;T++)E[T]=h[T]&255;new mm(Ae.QR_CODE_FIELD_256).encode(E,g);const k=new Uint8Array(g);for(let T=0;T<g;T++)k[T]=E[y+T];return k}static appendModeInfo(h,g){g.appendBits(h.getBits(),4)}static appendLengthInfo(h,g,y,E){const k=y.getCharacterCountBits(g);if(h>=1<<k)throw new Xn(h+" is bigger than "+((1<<k)-1));E.appendBits(h,k)}static appendBytes(h,g,y,E){switch(g){case mr.NUMERIC:li.appendNumericBytes(h,y);break;case mr.ALPHANUMERIC:li.appendAlphanumericBytes(h,y);break;case mr.BYTE:li.append8BitBytes(h,y,E);break;case mr.KANJI:li.appendKanjiBytes(h,y);break;default:throw new Xn("Invalid mode: "+g)}}static getDigit(h){return h.charCodeAt(0)-48}static isDigit(h){const g=li.getDigit(h);return g>=0&&g<=9}static appendNumericBytes(h,g){const y=h.length;let E=0;for(;E<y;){const k=li.getDigit(h.charAt(E));if(E+2<y){const T=li.getDigit(h.charAt(E+1)),j=li.getDigit(h.charAt(E+2));g.appendBits(k*100+T*10+j,10),E+=3}else if(E+1<y){const T=li.getDigit(h.charAt(E+1));g.appendBits(k*10+T,7),E+=2}else g.appendBits(k,4),E++}}static appendAlphanumericBytes(h,g){const y=h.length;let E=0;for(;E<y;){const k=li.getAlphanumericCode(h.charCodeAt(E));if(k===-1)throw new Xn;if(E+1<y){const T=li.getAlphanumericCode(h.charCodeAt(E+1));if(T===-1)throw new Xn;g.appendBits(k*45+T,11),E+=2}else g.appendBits(k,6),E++}}static append8BitBytes(h,g,y){let E;try{E=U.encode(h,y)}catch(k){throw new Xn(k)}for(let k=0,T=E.length;k!==T;k++){const j=E[k];g.appendBits(j,8)}}static appendKanjiBytes(h,g){let y;try{y=U.encode(h,M.SJIS)}catch(k){throw new Xn(k)}const E=y.length;for(let k=0;k<E;k+=2){const T=y[k]&255,j=y[k+1]&255,L=T<<8&4294967295|j;let z=-1;if(L>=33088&&L<=40956?z=L-33088:L>=57408&&L<=60351&&(z=L-49472),z===-1)throw new Xn("Invalid byte sequence");const J=(z>>8)*192+(z&255);g.appendBits(J,13)}}static appendECI(h,g){g.appendBits(mr.ECI.getBits(),4),g.appendBits(h.getValue(),8)}}li.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),li.DEFAULT_BYTE_MODE_ENCODING=M.UTF8.getName();class Tf{write(h,g,y,E=null){if(h.length===0)throw new f("Found empty contents");if(g<0||y<0)throw new f("Requested dimensions are too small: "+g+"x"+y);let k=Kn.L,T=Tf.QUIET_ZONE_SIZE;E!==null&&(E.get(Ai.ERROR_CORRECTION)!==void 0&&(k=Kn.fromString(E.get(Ai.ERROR_CORRECTION).toString())),E.get(Ai.MARGIN)!==void 0&&(T=Number.parseInt(E.get(Ai.MARGIN).toString(),10)));const j=li.encode(h,k,E);return this.renderResult(j,g,y,T)}writeToDom(h,g,y,E,k=null){typeof h=="string"&&(h=document.querySelector(h));const T=this.write(g,y,E,k);h&&h.appendChild(T)}renderResult(h,g,y,E){const k=h.getMatrix();if(k===null)throw new He;const T=k.getWidth(),j=k.getHeight(),L=T+E*2,z=j+E*2,J=Math.max(g,L),oe=Math.max(y,z),xe=Math.min(Math.floor(J/L),Math.floor(oe/z)),Oe=Math.floor((J-T*xe)/2),ue=Math.floor((oe-j*xe)/2),Ee=this.createSVGElement(J,oe);for(let Te=0,Be=ue;Te<j;Te++,Be+=xe)for(let ot=0,gt=Oe;ot<T;ot++,gt+=xe)if(k.get(ot,Te)===1){const vt=this.createSvgRectElement(gt,Be,xe,xe);Ee.appendChild(vt)}return Ee}createSVGElement(h,g){const y=document.createElementNS(Tf.SVG_NS,"svg");return y.setAttributeNS(null,"height",h.toString()),y.setAttributeNS(null,"width",g.toString()),y}createSvgRectElement(h,g,y,E){const k=document.createElementNS(Tf.SVG_NS,"rect");return k.setAttributeNS(null,"x",h.toString()),k.setAttributeNS(null,"y",g.toString()),k.setAttributeNS(null,"height",y.toString()),k.setAttributeNS(null,"width",E.toString()),k.setAttributeNS(null,"fill","#000000"),k}}Tf.QUIET_ZONE_SIZE=4,Tf.SVG_NS="http://www.w3.org/2000/svg";class If{encode(h,g,y,E,k){if(h.length===0)throw new f("Found empty contents");if(g!==ie.QR_CODE)throw new f("Can only encode QR_CODE, but got "+g);if(y<0||E<0)throw new f(`Requested dimensions are too small: ${y}x${E}`);let T=Kn.L,j=If.QUIET_ZONE_SIZE;k!==null&&(k.get(Ai.ERROR_CORRECTION)!==void 0&&(T=Kn.fromString(k.get(Ai.ERROR_CORRECTION).toString())),k.get(Ai.MARGIN)!==void 0&&(j=Number.parseInt(k.get(Ai.MARGIN).toString(),10)));const L=li.encode(h,T,k);return If.renderResult(L,y,E,j)}static renderResult(h,g,y,E){const k=h.getMatrix();if(k===null)throw new He;const T=k.getWidth(),j=k.getHeight(),L=T+E*2,z=j+E*2,J=Math.max(g,L),oe=Math.max(y,z),xe=Math.min(Math.floor(J/L),Math.floor(oe/z)),Oe=Math.floor((J-T*xe)/2),ue=Math.floor((oe-j*xe)/2),Ee=new ee(J,oe);for(let Te=0,Be=ue;Te<j;Te++,Be+=xe)for(let ot=0,gt=Oe;ot<T;ot++,gt+=xe)k.get(ot,Te)===1&&Ee.setRegion(gt,Be,xe,xe);return Ee}}If.QUIET_ZONE_SIZE=4;class o1{encode(h,g,y,E,k){let T;switch(g){case ie.QR_CODE:T=new If;break;default:throw new f("No encoder available for format "+g)}return T.encode(h,g,y,E,k)}}class Es extends Q{constructor(h,g,y,E,k,T,j,L){if(super(T,j),this.yuvData=h,this.dataWidth=g,this.dataHeight=y,this.left=E,this.top=k,E+T>g||k+j>y)throw new f("Crop rectangle does not fit within image data.");L&&this.reverseHorizontal(T,j)}getRow(h,g){if(h<0||h>=this.getHeight())throw new f("Requested row is outside the image: "+h);const y=this.getWidth();(g==null||g.length<y)&&(g=new Uint8ClampedArray(y));const E=(h+this.top)*this.dataWidth+this.left;return v.arraycopy(this.yuvData,E,g,0,y),g}getMatrix(){const h=this.getWidth(),g=this.getHeight();if(h===this.dataWidth&&g===this.dataHeight)return this.yuvData;const y=h*g,E=new Uint8ClampedArray(y);let k=this.top*this.dataWidth+this.left;if(h===this.dataWidth)return v.arraycopy(this.yuvData,k,E,0,y),E;for(let T=0;T<g;T++){const j=T*h;v.arraycopy(this.yuvData,k,E,j,h),k+=this.dataWidth}return E}isCropSupported(){return!0}crop(h,g,y,E){return new Es(this.yuvData,this.dataWidth,this.dataHeight,this.left+h,this.top+g,y,E,!1)}renderThumbnail(){const h=this.getWidth()/Es.THUMBNAIL_SCALE_FACTOR,g=this.getHeight()/Es.THUMBNAIL_SCALE_FACTOR,y=new Int32Array(h*g),E=this.yuvData;let k=this.top*this.dataWidth+this.left;for(let T=0;T<g;T++){const j=T*h;for(let L=0;L<h;L++){const z=E[k+L*Es.THUMBNAIL_SCALE_FACTOR]&255;y[j+L]=4278190080|z*65793}k+=this.dataWidth*Es.THUMBNAIL_SCALE_FACTOR}return y}getThumbnailWidth(){return this.getWidth()/Es.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Es.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(h,g){const y=this.yuvData;for(let E=0,k=this.top*this.dataWidth+this.left;E<g;E++,k+=this.dataWidth){const T=k+h/2;for(let j=k,L=k+h-1;j<T;j++,L--){const z=y[j];y[j]=y[L],y[L]=z}}}invert(){return new X(this)}}Es.THUMBNAIL_SCALE_FACTOR=2;class Db extends Q{constructor(h,g,y,E,k,T,j){if(super(g,y),this.dataWidth=E,this.dataHeight=k,this.left=T,this.top=j,h.BYTES_PER_ELEMENT===4){const L=g*y,z=new Uint8ClampedArray(L);for(let J=0;J<L;J++){const oe=h[J],xe=oe>>16&255,Oe=oe>>7&510,ue=oe&255;z[J]=(xe+Oe+ue)/4&255}this.luminances=z}else this.luminances=h;if(E===void 0&&(this.dataWidth=g),k===void 0&&(this.dataHeight=y),T===void 0&&(this.left=0),j===void 0&&(this.top=0),this.left+g>this.dataWidth||this.top+y>this.dataHeight)throw new f("Crop rectangle does not fit within image data.")}getRow(h,g){if(h<0||h>=this.getHeight())throw new f("Requested row is outside the image: "+h);const y=this.getWidth();(g==null||g.length<y)&&(g=new Uint8ClampedArray(y));const E=(h+this.top)*this.dataWidth+this.left;return v.arraycopy(this.luminances,E,g,0,y),g}getMatrix(){const h=this.getWidth(),g=this.getHeight();if(h===this.dataWidth&&g===this.dataHeight)return this.luminances;const y=h*g,E=new Uint8ClampedArray(y);let k=this.top*this.dataWidth+this.left;if(h===this.dataWidth)return v.arraycopy(this.luminances,k,E,0,y),E;for(let T=0;T<g;T++){const j=T*h;v.arraycopy(this.luminances,k,E,j,h),k+=this.dataWidth}return E}isCropSupported(){return!0}crop(h,g,y,E){return new Db(this.luminances,y,E,this.dataWidth,this.dataHeight,this.left+h,this.top+g)}invert(){return new X(this)}}class Mb extends M{static forName(h){return this.getCharacterSetECIByName(h)}}class l1{}l1.ISO_8859_1=M.ISO8859_1;class c1{isCompact(){return this.compact}setCompact(h){this.compact=h}getSize(){return this.size}setSize(h){this.size=h}getLayers(){return this.layers}setLayers(h){this.layers=h}getCodeWords(){return this.codeWords}setCodeWords(h){this.codeWords=h}getMatrix(){return this.matrix}setMatrix(h){this.matrix=h}}class u1{static singletonList(h){return[h]}static min(h,g){return h.sort(g)[0]}}class ek{constructor(h){this.previous=h}getPrevious(){return this.previous}}class fp extends ek{constructor(h,g,y){super(h),this.value=g,this.bitCount=y}appendTo(h,g){h.appendBits(this.value,this.bitCount)}add(h,g){return new fp(this,h,g)}addBinaryShift(h,g){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new fp(this,h,g)}toString(){let h=this.value&(1<<this.bitCount)-1;return h|=1<<this.bitCount,"<"+C.toBinaryString(h|1<<this.bitCount).substring(1)+">"}}class gm extends fp{constructor(h,g,y){super(h,0,0),this.binaryShiftStart=g,this.binaryShiftByteCount=y}appendTo(h,g){for(let y=0;y<this.binaryShiftByteCount;y++)(y===0||y===31&&this.binaryShiftByteCount<=62)&&(h.appendBits(31,5),this.binaryShiftByteCount>62?h.appendBits(this.binaryShiftByteCount-31,16):y===0?h.appendBits(Math.min(this.binaryShiftByteCount,31),5):h.appendBits(this.binaryShiftByteCount-31,5)),h.appendBits(g[this.binaryShiftStart+y],8)}addBinaryShift(h,g){return new gm(this,h,g)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Fb(ae,h,g){return new gm(ae,h,g)}function xm(ae,h,g){return new fp(ae,h,g)}const tk=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ki=0,hp=1,Ya=2,Lb=3,Dl=4,PP=new fp(null,0,0),Bb=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function RP(ae){for(let h of ae)_.fill(h,-1);return ae[Ki][Dl]=0,ae[hp][Dl]=0,ae[hp][Ki]=28,ae[Lb][Dl]=0,ae[Ya][Dl]=0,ae[Ya][Ki]=15,ae}const rk=RP(_.createInt32Array(6,6));class wc{constructor(h,g,y,E){this.token=h,this.mode=g,this.binaryShiftByteCount=y,this.bitCount=E}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(h,g){let y=this.bitCount,E=this.token;if(h!==this.mode){let T=Bb[this.mode][h];E=xm(E,T&65535,T>>16),y+=T>>16}let k=h===Ya?4:5;return E=xm(E,g,k),new wc(E,h,0,y+k)}shiftAndAppend(h,g){let y=this.token,E=this.mode===Ya?4:5;return y=xm(y,rk[this.mode][h],E),y=xm(y,g,5),new wc(y,this.mode,0,this.bitCount+E+5)}addBinaryShiftChar(h){let g=this.token,y=this.mode,E=this.bitCount;if(this.mode===Dl||this.mode===Ya){let j=Bb[y][Ki];g=xm(g,j&65535,j>>16),E+=j>>16,y=Ki}let k=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,T=new wc(g,y,this.binaryShiftByteCount+1,E+k);return T.binaryShiftByteCount===2078&&(T=T.endBinaryShift(h+1)),T}endBinaryShift(h){if(this.binaryShiftByteCount===0)return this;let g=this.token;return g=Fb(g,h-this.binaryShiftByteCount,this.binaryShiftByteCount),new wc(g,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(h){let g=this.bitCount+(Bb[this.mode][h.mode]>>16);return this.binaryShiftByteCount<h.binaryShiftByteCount?g+=wc.calculateBinaryShiftCost(h)-wc.calculateBinaryShiftCost(this):this.binaryShiftByteCount>h.binaryShiftByteCount&&h.binaryShiftByteCount>0&&(g+=10),g<=h.bitCount}toBitArray(h){let g=[];for(let E=this.endBinaryShift(h.length).token;E!==null;E=E.getPrevious())g.unshift(E);let y=new N;for(const E of g)E.appendTo(y,h);return y}toString(){return H.format("%s bits=%d bytes=%d",tk[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(h){return h.binaryShiftByteCount>62?21:h.binaryShiftByteCount>31?20:h.binaryShiftByteCount>0?10:0}}wc.INITIAL_STATE=new wc(PP,Ki,0,0);function pp(ae){const h=H.getCharCode(" "),g=H.getCharCode("."),y=H.getCharCode(",");ae[Ki][h]=1;const E=H.getCharCode("Z"),k=H.getCharCode("A");for(let xe=k;xe<=E;xe++)ae[Ki][xe]=xe-k+2;ae[hp][h]=1;const T=H.getCharCode("z"),j=H.getCharCode("a");for(let xe=j;xe<=T;xe++)ae[hp][xe]=xe-j+2;ae[Ya][h]=1;const L=H.getCharCode("9"),z=H.getCharCode("0");for(let xe=z;xe<=L;xe++)ae[Ya][xe]=xe-z+2;ae[Ya][y]=12,ae[Ya][g]=13;const J=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let xe=0;xe<J.length;xe++)ae[Lb][H.getCharCode(J[xe])]=xe;const oe=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let xe=0;xe<oe.length;xe++)H.getCharCode(oe[xe])>0&&(ae[Dl][H.getCharCode(oe[xe])]=xe);return ae}const Ub=pp(_.createInt32Array(5,256));class vm{constructor(h){this.text=h}encode(){const h=H.getCharCode(" "),g=H.getCharCode(`
`);let y=u1.singletonList(wc.INITIAL_STATE);for(let k=0;k<this.text.length;k++){let T,j=k+1<this.text.length?this.text[k+1]:0;switch(this.text[k]){case H.getCharCode("\r"):T=j===g?2:0;break;case H.getCharCode("."):T=j===h?3:0;break;case H.getCharCode(","):T=j===h?4:0;break;case H.getCharCode(":"):T=j===h?5:0;break;default:T=0}T>0?(y=vm.updateStateListForPair(y,k,T),k++):y=this.updateStateListForChar(y,k)}return u1.min(y,(k,T)=>k.getBitCount()-T.getBitCount()).toBitArray(this.text)}updateStateListForChar(h,g){const y=[];for(let E of h)this.updateStateForChar(E,g,y);return vm.simplifyStates(y)}updateStateForChar(h,g,y){let E=this.text[g]&255,k=Ub[h.getMode()][E]>0,T=null;for(let j=0;j<=Dl;j++){let L=Ub[j][E];if(L>0){if(T==null&&(T=h.endBinaryShift(g)),!k||j===h.getMode()||j===Ya){const z=T.latchAndAppend(j,L);y.push(z)}if(!k&&rk[h.getMode()][j]>=0){const z=T.shiftAndAppend(j,L);y.push(z)}}}if(h.getBinaryShiftByteCount()>0||Ub[h.getMode()][E]===0){let j=h.addBinaryShiftChar(g);y.push(j)}}static updateStateListForPair(h,g,y){const E=[];for(let k of h)this.updateStateForPair(k,g,y,E);return this.simplifyStates(E)}static updateStateForPair(h,g,y,E){let k=h.endBinaryShift(g);if(E.push(k.latchAndAppend(Dl,y)),h.getMode()!==Dl&&E.push(k.shiftAndAppend(Dl,y)),y===3||y===4){let T=k.latchAndAppend(Ya,16-y).latchAndAppend(Ya,1);E.push(T)}if(h.getBinaryShiftByteCount()>0){let T=h.addBinaryShiftChar(g).addBinaryShiftChar(g+1);E.push(T)}}static simplifyStates(h){let g=[];for(const y of h){let E=!0;for(const k of g){if(k.isBetterThanOrEqualTo(y)){E=!1;break}y.isBetterThanOrEqualTo(k)&&(g=g.filter(T=>T!==k))}E&&g.push(y)}return g}}class Sn{constructor(){}static encodeBytes(h){return Sn.encode(h,Sn.DEFAULT_EC_PERCENT,Sn.DEFAULT_AZTEC_LAYERS)}static encode(h,g,y){let E=new vm(h).encode(),k=C.truncDivision(E.getSize()*g,100)+11,T=E.getSize()+k,j,L,z,J,oe;if(y!==Sn.DEFAULT_AZTEC_LAYERS){if(j=y<0,L=Math.abs(y),L>(j?Sn.MAX_NB_BITS_COMPACT:Sn.MAX_NB_BITS))throw new f(H.format("Illegal value %s for layers",y));z=Sn.totalBitsInLayer(L,j),J=Sn.WORD_SIZE[L];let vt=z-z%J;if(oe=Sn.stuffBits(E,J),oe.getSize()+k>vt)throw new f("Data to large for user specified layer");if(j&&oe.getSize()>J*64)throw new f("Data to large for user specified layer")}else{J=0,oe=null;for(let vt=0;;vt++){if(vt>Sn.MAX_NB_BITS)throw new f("Data too large for an Aztec code");if(j=vt<=3,L=j?vt+1:vt,z=Sn.totalBitsInLayer(L,j),T>z)continue;(oe==null||J!==Sn.WORD_SIZE[L])&&(J=Sn.WORD_SIZE[L],oe=Sn.stuffBits(E,J));let Zt=z-z%J;if(!(j&&oe.getSize()>J*64)&&oe.getSize()+k<=Zt)break}}let xe=Sn.generateCheckWords(oe,z,J),Oe=oe.getSize()/J,ue=Sn.generateModeMessage(j,L,Oe),Ee=(j?11:14)+L*4,Te=new Int32Array(Ee),Be;if(j){Be=Ee;for(let vt=0;vt<Te.length;vt++)Te[vt]=vt}else{Be=Ee+1+2*C.truncDivision(C.truncDivision(Ee,2)-1,15);let vt=C.truncDivision(Ee,2),Zt=C.truncDivision(Be,2);for(let Fr=0;Fr<vt;Fr++){let Ws=Fr+C.truncDivision(Fr,15);Te[vt-Fr-1]=Zt-Ws-1,Te[vt+Fr]=Zt+Ws+1}}let ot=new ee(Be);for(let vt=0,Zt=0;vt<L;vt++){let Fr=(L-vt)*4+(j?9:12);for(let Ws=0;Ws<Fr;Ws++){let Ti=Ws*2;for(let Fa=0;Fa<2;Fa++)xe.get(Zt+Ti+Fa)&&ot.set(Te[vt*2+Fa],Te[vt*2+Ws]),xe.get(Zt+Fr*2+Ti+Fa)&&ot.set(Te[vt*2+Ws],Te[Ee-1-vt*2-Fa]),xe.get(Zt+Fr*4+Ti+Fa)&&ot.set(Te[Ee-1-vt*2-Fa],Te[Ee-1-vt*2-Ws]),xe.get(Zt+Fr*6+Ti+Fa)&&ot.set(Te[Ee-1-vt*2-Ws],Te[vt*2+Fa])}Zt+=Fr*8}if(Sn.drawModeMessage(ot,j,Be,ue),j)Sn.drawBullsEye(ot,C.truncDivision(Be,2),5);else{Sn.drawBullsEye(ot,C.truncDivision(Be,2),7);for(let vt=0,Zt=0;vt<C.truncDivision(Ee,2)-1;vt+=15,Zt+=16)for(let Fr=C.truncDivision(Be,2)&1;Fr<Be;Fr+=2)ot.set(C.truncDivision(Be,2)-Zt,Fr),ot.set(C.truncDivision(Be,2)+Zt,Fr),ot.set(Fr,C.truncDivision(Be,2)-Zt),ot.set(Fr,C.truncDivision(Be,2)+Zt)}let gt=new c1;return gt.setCompact(j),gt.setSize(Be),gt.setLayers(L),gt.setCodeWords(Oe),gt.setMatrix(ot),gt}static drawBullsEye(h,g,y){for(let E=0;E<y;E+=2)for(let k=g-E;k<=g+E;k++)h.set(k,g-E),h.set(k,g+E),h.set(g-E,k),h.set(g+E,k);h.set(g-y,g-y),h.set(g-y+1,g-y),h.set(g-y,g-y+1),h.set(g+y,g-y),h.set(g+y,g-y+1),h.set(g+y,g+y-1)}static generateModeMessage(h,g,y){let E=new N;return h?(E.appendBits(g-1,2),E.appendBits(y-1,6),E=Sn.generateCheckWords(E,28,4)):(E.appendBits(g-1,5),E.appendBits(y-1,11),E=Sn.generateCheckWords(E,40,4)),E}static drawModeMessage(h,g,y,E){let k=C.truncDivision(y,2);if(g)for(let T=0;T<7;T++){let j=k-3+T;E.get(T)&&h.set(j,k-5),E.get(T+7)&&h.set(k+5,j),E.get(20-T)&&h.set(j,k+5),E.get(27-T)&&h.set(k-5,j)}else for(let T=0;T<10;T++){let j=k-5+T+C.truncDivision(T,5);E.get(T)&&h.set(j,k-7),E.get(T+10)&&h.set(k+7,j),E.get(29-T)&&h.set(j,k+7),E.get(39-T)&&h.set(k-7,j)}}static generateCheckWords(h,g,y){let E=h.getSize()/y,k=new mm(Sn.getGF(y)),T=C.truncDivision(g,y),j=Sn.bitsToWords(h,y,T);k.encode(j,T-E);let L=g%y,z=new N;z.appendBits(0,L);for(const J of Array.from(j))z.appendBits(J,y);return z}static bitsToWords(h,g,y){let E=new Int32Array(y),k,T;for(k=0,T=h.getSize()/g;k<T;k++){let j=0;for(let L=0;L<g;L++)j|=h.get(k*g+L)?1<<g-L-1:0;E[k]=j}return E}static getGF(h){switch(h){case 4:return Ae.AZTEC_PARAM;case 6:return Ae.AZTEC_DATA_6;case 8:return Ae.AZTEC_DATA_8;case 10:return Ae.AZTEC_DATA_10;case 12:return Ae.AZTEC_DATA_12;default:throw new f("Unsupported word size "+h)}}static stuffBits(h,g){let y=new N,E=h.getSize(),k=(1<<g)-2;for(let T=0;T<E;T+=g){let j=0;for(let L=0;L<g;L++)(T+L>=E||h.get(T+L))&&(j|=1<<g-1-L);(j&k)===k?(y.appendBits(j&k,g),T--):j&k?y.appendBits(j,g):(y.appendBits(j|1,g),T--)}return y}static totalBitsInLayer(h,g){return((g?88:112)+16*h)*h}}Sn.DEFAULT_EC_PERCENT=33,Sn.DEFAULT_AZTEC_LAYERS=0,Sn.MAX_NB_BITS=32,Sn.MAX_NB_BITS_COMPACT=4,Sn.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ym{encode(h,g,y,E){return this.encodeWithHints(h,g,y,E,null)}encodeWithHints(h,g,y,E,k){let T=l1.ISO_8859_1,j=Sn.DEFAULT_EC_PERCENT,L=Sn.DEFAULT_AZTEC_LAYERS;return k!=null&&(k.has(Ai.CHARACTER_SET)&&(T=Mb.forName(k.get(Ai.CHARACTER_SET).toString())),k.has(Ai.ERROR_CORRECTION)&&(j=C.parseInt(k.get(Ai.ERROR_CORRECTION).toString())),k.has(Ai.AZTEC_LAYERS)&&(L=C.parseInt(k.get(Ai.AZTEC_LAYERS).toString()))),ym.encodeLayers(h,g,y,E,T,j,L)}static encodeLayers(h,g,y,E,k,T,j){if(g!==ie.AZTEC)throw new f("Can only encode AZTEC, but got "+g);let L=Sn.encode(H.getBytes(h,k),T,j);return ym.renderResult(L,y,E)}static renderResult(h,g,y){let E=h.getMatrix();if(E==null)throw new He;let k=E.getWidth(),T=E.getHeight(),j=Math.max(g,k),L=Math.max(y,T),z=Math.min(j/k,L/T),J=(j-k*z)/2,oe=(L-T*z)/2,xe=new ee(j,L);for(let Oe=0,ue=oe;Oe<T;Oe++,ue+=z)for(let Ee=0,Te=J;Ee<k;Ee++,Te+=z)E.get(Ee,Oe)&&xe.setRegion(Te,ue,z,z);return xe}}r.AbstractExpandedDecoder=Ne,r.ArgumentException=d,r.ArithmeticException=q,r.AztecCode=c1,r.AztecCodeReader=qe,r.AztecCodeWriter=ym,r.AztecDecoder=Ze,r.AztecDetector=Me,r.AztecDetectorResult=er,r.AztecEncoder=Sn,r.AztecHighLevelEncoder=vm,r.AztecPoint=ye,r.BarcodeFormat=ie,r.Binarizer=x,r.BinaryBitmap=p,r.BitArray=N,r.BitMatrix=ee,r.BitSource=n1,r.BrowserAztecCodeReader=it,r.BrowserBarcodeReader=gd,r.BrowserCodeReader=ce,r.BrowserDatamatrixCodeReader=VC,r.BrowserMultiFormatReader=Jo,r.BrowserPDF417Reader=IP,r.BrowserQRCodeReader=ZC,r.BrowserQRCodeSvgWriter=Tf,r.CharacterSetECI=M,r.ChecksumException=m,r.Code128Reader=_e,r.Code39Reader=ut,r.DataMatrixDecodedBitStreamParser=yc,r.DataMatrixReader=Rl,r.DecodeHintType=P,r.DecoderResult=ne,r.DefaultGridSampler=dr,r.DetectorResult=_r,r.EAN13Reader=Vi,r.EncodeHintType=Ai,r.Exception=c,r.FormatException=O,r.GenericGF=Ae,r.GenericGFPoly=we,r.GlobalHistogramBinarizer=te,r.GridSampler=Gt,r.GridSamplerInstance=Ht,r.HTMLCanvasElementLuminanceSource=fe,r.HybridBinarizer=se,r.ITFReader=xt,r.IllegalArgumentException=f,r.IllegalStateException=He,r.InvertedLuminanceSource=X,r.LuminanceSource=Q,r.MathUtils=lt,r.MultiFormatOneDReader=wo,r.MultiFormatReader=JC,r.MultiFormatWriter=o1,r.NotFoundException=V,r.OneDReader=ze,r.PDF417DecodedBitStreamParser=et,r.PDF417DecoderErrorCorrection=GC,r.PDF417Reader=Sa,r.PDF417ResultMetadata=Rb,r.PerspectiveTransform=Lt,r.PlanarYUVLuminanceSource=Es,r.QRCodeByteMatrix=jl,r.QRCodeDataMask=zs,r.QRCodeDecodedBitStreamParser=di,r.QRCodeDecoderErrorCorrectionLevel=Kn,r.QRCodeDecoderFormatInformation=Da,r.QRCodeEncoder=li,r.QRCodeEncoderQRCode=Cu,r.QRCodeMaskUtil=Mr,r.QRCodeMatrixUtil=gr,r.QRCodeMode=mr,r.QRCodeReader=xd,r.QRCodeVersion=ir,r.QRCodeWriter=If,r.RGBLuminanceSource=Db,r.RSS14Reader=$r,r.RSSExpandedReader=at,r.ReaderException=Xa,r.ReedSolomonDecoder=je,r.ReedSolomonEncoder=mm,r.ReedSolomonException=Pe,r.Result=W,r.ResultMetadataType=re,r.ResultPoint=ht,r.StringUtils=H,r.UnsupportedOperationException=B,r.VideoInputDevice=Se,r.WhiteRectangleDetector=ct,r.WriterException=Xn,r.ZXingArrays=_,r.ZXingCharset=Mb,r.ZXingInteger=C,r.ZXingStandardCharsets=l1,r.ZXingStringBuilder=Z,r.ZXingStringEncoding=U,r.ZXingSystem=v,r.createAbstractExpandedDecoder=St,Object.defineProperty(r,"__esModule",{value:!0})})})(d8,d8.exports);var vi=d8.exports;const y5e=Us(vi),b5e=AF({__proto__:null,default:y5e},[vi]);var iG=function(){function e(t,r,n){if(this.formatMap=new Map([[Xt.QR_CODE,vi.BarcodeFormat.QR_CODE],[Xt.AZTEC,vi.BarcodeFormat.AZTEC],[Xt.CODABAR,vi.BarcodeFormat.CODABAR],[Xt.CODE_39,vi.BarcodeFormat.CODE_39],[Xt.CODE_93,vi.BarcodeFormat.CODE_93],[Xt.CODE_128,vi.BarcodeFormat.CODE_128],[Xt.DATA_MATRIX,vi.BarcodeFormat.DATA_MATRIX],[Xt.MAXICODE,vi.BarcodeFormat.MAXICODE],[Xt.ITF,vi.BarcodeFormat.ITF],[Xt.EAN_13,vi.BarcodeFormat.EAN_13],[Xt.EAN_8,vi.BarcodeFormat.EAN_8],[Xt.PDF_417,vi.BarcodeFormat.PDF_417],[Xt.RSS_14,vi.BarcodeFormat.RSS_14],[Xt.RSS_EXPANDED,vi.BarcodeFormat.RSS_EXPANDED],[Xt.UPC_A,vi.BarcodeFormat.UPC_A],[Xt.UPC_E,vi.BarcodeFormat.UPC_E],[Xt.UPC_EAN_EXTENSION,vi.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!b5e)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var i=this.createZXingFormats(t),a=new Map;a.set(vi.DecodeHintType.POSSIBLE_FORMATS,i),a.set(vi.DecodeHintType.TRY_HARDER,!1),this.hints=a}return e.prototype.decodeAsync=function(t){var r=this;return new Promise(function(n,i){try{n(r.decode(t))}catch(a){i(a)}})},e.prototype.decode=function(t){var r=new vi.MultiFormatReader(this.verbose,this.hints),n=new vi.HTMLCanvasElementLuminanceSource(t),i=new vi.BinaryBitmap(new vi.HybridBinarizer(n)),a=r.decode(i);return{text:a.text,format:_oe.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,i){t.set(r,n)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var r=[],n=0,i=t;n<i.length;n++){var a=i[n];this.formatMap.has(a)?r.push(this.formatMap.get(a)):this.logger.logError("".concat(a," is not supported by")+"ZXingHtml5QrcodeShim")}return r},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),w5e=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},S5e=function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},aG=function(){function e(t,r,n){if(this.formatMap=new Map([[Xt.QR_CODE,"qr_code"],[Xt.AZTEC,"aztec"],[Xt.CODABAR,"codabar"],[Xt.CODE_39,"code_39"],[Xt.CODE_93,"code_93"],[Xt.CODE_128,"code_128"],[Xt.DATA_MATRIX,"data_matrix"],[Xt.ITF,"itf"],[Xt.EAN_13,"ean_13"],[Xt.EAN_8,"ean_8"],[Xt.PDF_417,"pdf417"],[Xt.UPC_A,"upc_a"],[Xt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var i=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return w5e(this,void 0,void 0,function(){var r,n;return S5e(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(t)];case 1:if(r=i.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(r),[2,{text:n.rawValue,format:_oe.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var r=null,n=0,i=0,a=t;i<a.length;i++){var s=a[i],o=s.boundingBox.width*s.boundingBox.height;o>n&&(n=o,r=s)}if(!r)throw"No largest barcode found";return r},e.prototype.createBarcodeDetectorFormats=function(t){for(var r=[],n=0,i=t;n<i.length;n++){var a=i[n];this.formatMap.has(a)?r.push(this.formatMap.get(a)):this.logger.warn("".concat(a," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,i){t.set(r,n)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),sG=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},oG=function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},E5e=function(){function e(t,r,n,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,r&&aG.isSupported()?(this.primaryDecoder=new aG(t,n,i),this.secondaryDecoder=new iG(t,n,i)):this.primaryDecoder=new iG(t,n,i)}return e.prototype.decodeAsync=function(t){return sG(this,void 0,void 0,function(){var r;return oG(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return sG(this,void 0,void 0,function(){var r,n;return oG(this,function(i){switch(i.label){case 0:r=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,i.sent()];case 3:if(n=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw n;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var r=performance.now()-t;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,r=0,n=this.executionResults;r<n.length;r++){var i=n[r];t+=i}var a=t/this.executionResults.length;console.log("".concat(a," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),F7=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rT=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},nT=function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Aoe=function(){function e(t,r){this.name=t,this.track=r}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var r={};r[this.name]=t;var n={advanced:[r]};return this.track.applyConstraints(n)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var r=t[this.name];return r}return null},e}(),C5e=function(e){F7(t,e);function t(r,n){return e.call(this,r,n)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(r){var n={};n[this.name]=r;var i={advanced:[n]};return this.track.applyConstraints(i)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),n=r[this.name];return{min:n.min,max:n.max,step:n.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(Aoe),k5e=function(e){F7(t,e);function t(r){return e.call(this,"zoom",r)||this}return t}(C5e),_5e=function(e){F7(t,e);function t(r){return e.call(this,"torch",r)||this}return t}(Aoe),N5e=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new k5e(this.track)},e.prototype.torchFeature=function(){return new _5e(this.track)},e}(),A5e=function(){function e(t,r,n){this.isClosed=!1,this.parentElement=t,this.mediaStream=r,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var r=document.createElement("video");return r.style.width="".concat(t,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var n=t.surface.clientWidth,i=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(n,i),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,r,n,i){return rT(this,void 0,void 0,function(){var a,s;return nT(this,function(o){switch(o.label){case 0:return a=new e(t,r,i),n.aspectRatio?(s={aspectRatio:n.aspectRatio},[4,a.getFirstTrackOrFail().applyConstraints(s)]):[3,2];case 1:o.sent(),o.label=2;case 2:return a.setupSurface(),[2,a]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var r=this,n=function(){setTimeout(t,200),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return rT(this,void 0,void 0,function(){return nT(this,function(r){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(r,n){var i=t.mediaStream.getVideoTracks(),a=i.length,s=0;t.mediaStream.getVideoTracks().forEach(function(o){t.mediaStream.removeTrack(o),o.stop(),++s,s>=a&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),r())})})},e.prototype.getCapabilities=function(){return new N5e(this.getFirstTrackOrFail())},e}(),T5e=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,r,n){return rT(this,void 0,void 0,function(){return nT(this,function(i){return[2,A5e.create(t,this.mediaStream,r,n)]})})},e.create=function(t){return rT(this,void 0,void 0,function(){var r,n;return nT(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return n=i.sent(),[2,new e(n)]}})})},e}(),lG=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},cG=function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},I5e=function(){function e(){}return e.failIfNotSupported=function(){return lG(this,void 0,void 0,function(){return cG(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return lG(this,void 0,void 0,function(){return cG(this,function(r){return[2,T5e.create(t)]})})},e}(),O5e=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},P5e=function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},R5e=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=lv.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=lv.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return O5e(this,void 0,void 0,function(){var t,r,n,i,a,s,o;return P5e(this,function(l){switch(l.label){case 0:return t=function(c){for(var d=c.getVideoTracks(),f=0,p=d;f<p.length;f++){var m=p[f];m.enabled=!1,m.stop(),c.removeTrack(m)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=l.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=l.sent(),i=[],a=0,s=n;a<s.length;a++)o=s[a],o.kind==="videoinput"&&i.push({id:o.deviceId,label:o.label});return t(r),[2,i]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,r){var n=function(a){for(var s=[],o=0,l=a;o<l.length;o++){var c=l[o];c.kind==="video"&&s.push({id:c.id,label:c.label})}t(s)},i=MediaStreamTrack;i.getSources(n)})},e}(),Ji;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Ji||(Ji={}));var j5e=function(){function e(){this.state=Ji.NOT_STARTED,this.onGoingTransactionNewState=Ji.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Ji.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Ji.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Ji.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Ji.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Ji.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case Ji.UNKNOWN:throw"Transition from unknown is not allowed";case Ji.NOT_STARTED:this.failIfNewStateIs(t,[Ji.PAUSED]);break;case Ji.SCANNING:break;case Ji.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,r){for(var n=0,i=r;n<i.length;n++){var a=i[n];if(t===a)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),D5e=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Ji.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Ji.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Ji.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Ji.PAUSED},e}(),M5e=function(){function e(){}return e.create=function(){return new D5e(new j5e)},e}(),F5e=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zl=function(e){F5e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(g5e),L5e=function(){function e(t,r){this.logger=r,this.fps=zl.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=zl.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Noe.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Yf(this.qrbox)},e.create=function(t,r){return new e(t,r)},e}(),B5e=function(){function e(t,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var n;typeof r=="boolean"?this.verbose=r===!0:r&&(n=r,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new v5e(this.verbose),this.qrcode=new E5e(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=M5e.create()}return e.prototype.start=function(t,r,n,i){var a=this;if(!t)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var s;i?s=i:s=this.verbose?this.logger.log:function(){};var o=L5e.create(r,this.logger);this.clearElement();var l=!1;o.videoConstraints&&(o.isMediaStreamConstraintsValid()?l=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var c=l,d=document.getElementById(this.elementId);d.clientWidth?d.clientWidth:zl.DEFAULT_WIDTH,d.style.position="relative",this.shouldScan=!0,this.element=d;var f=this,p=this.stateManagerProxy.startTransition(Ji.SCANNING);return new Promise(function(m,x){var v=c?o.videoConstraints:f.createVideoConstraints(t);if(!v){p.cancel(),x("videoConstraints should be defined");return}var b={};(!c||o.aspectRatio)&&(b.aspectRatio=o.aspectRatio);var w={onRenderSurfaceReady:function(_,C){f.setupUi(_,C,o),f.isScanning=!0,f.foreverScan(o,n,s)}};I5e.failIfNotSupported().then(function(_){_.create(v).then(function(C){return C.render(a.element,b,w).then(function(N){f.renderedCamera=N,p.execute(),m(null)}).catch(function(N){p.cancel(),x(N)})}).catch(function(C){p.cancel(),x(lv.errorGettingUserMedia(C))})}).catch(function(_){p.cancel(),x(lv.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Ji.PAUSED),this.showPausedState(),(Yf(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,r=function(){t.stateManagerProxy.directTransition(Ji.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(Ji.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(t.element){var a=document.getElementById(zl.SHADED_REGION_ELEMENT_ID);a&&t.element.removeChild(a)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),n(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),r.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,r){return this.scanFileV2(t,r).then(function(n){return n.decodedText})},e.prototype.scanFileV2=function(t,r){var n=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Yf(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,a){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(t);var s=new Image;s.onload=function(){var o=s.width,l=s.height,c=document.getElementById(n.elementId),d=c.clientWidth?c.clientWidth:zl.DEFAULT_WIDTH,f=Math.max(c.clientHeight?c.clientHeight:l,zl.FILE_SCAN_MIN_HEIGHT),p=n.computeCanvasDrawConfig(o,l,d,f);if(r){var m=n.createCanvasElement(d,f,"qr-canvas-visible");m.style.display="inline-block",c.appendChild(m);var x=m.getContext("2d");if(!x)throw"Unable to get 2d context from canvas";x.canvas.width=d,x.canvas.height=f,x.drawImage(s,0,0,o,l,p.x,p.y,p.width,p.height)}var v=zl.FILE_SCAN_HIDDEN_CANVAS_PADDING,b=Math.max(s.width,p.width),w=Math.max(s.height,p.height),_=b+2*v,C=w+2*v,N=n.createCanvasElement(_,C);c.appendChild(N);var R=N.getContext("2d");if(!R)throw"Unable to get 2d context from canvas";R.canvas.width=_,R.canvas.height=C,R.drawImage(s,0,0,o,l,v,v,b,w);try{n.qrcode.decodeRobustlyAsync(N).then(function(P){i(nG.createFromQrcodeResult(P))}).catch(a)}catch(P){a("QR code parse error, error = ".concat(P))}},s.onerror=a,s.onabort=a,s.onstalled=a,s.onsuspend=a,s.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return R5e.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!Noe.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var r=[Xt.QR_CODE,Xt.AZTEC,Xt.CODABAR,Xt.CODE_39,Xt.CODE_93,Xt.CODE_128,Xt.DATA_MATRIX,Xt.MAXICODE,Xt.ITF,Xt.EAN_13,Xt.EAN_8,Xt.PDF_417,Xt.RSS_14,Xt.RSS_EXPANDED,Xt.UPC_A,Xt.UPC_E,Xt.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return r;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],i=0,a=t.formatsToSupport;i<a.length;i++){var s=a[i];m5e(s)?n.push(s):this.logger.warn("Invalid format: ".concat(s," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(Yf(t))return!0;if(!Yf(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(Yf(t.experimentalFeatures))return!0;var r=t.experimentalFeatures;return Yf(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,r,n){var i=this,a=n.qrbox;this.validateQrboxConfig(a);var s=this.toQrdimensions(t,r,a),o=function(c){if(c<zl.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(zl.MIN_QR_BOX_SIZE,"px.")},l=function(c){return c>t&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),c=t),c};o(s.width),o(s.height),s.width=l(s.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,r,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(t,r)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return n},e.prototype.setupUi=function(t,r,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(t,r,n);var i=Yf(n.qrbox)?{width:t,height:r}:n.qrbox;this.validateQrboxConfig(i);var a=this.toQrdimensions(t,r,i);a.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var s=n.isShadedBoxEnabled()&&a.height<=r,o={x:0,y:0,width:t,height:r},l=s?this.getShadedRegionBounds(t,r,a):o,c=this.createCanvasElement(l.width,l.height),d={willReadFrequently:!0},f=c.getContext("2d",d);f.canvas.width=l.width,f.canvas.height=l.height,this.element.append(c),s&&this.possiblyInsertShadingElement(this.element,t,r,a),this.createScannerPausedUiElement(this.element),this.qrRegion=l,this.context=f,this.canvasElement=c},e.prototype.createScannerPausedUiElement=function(t){var r=document.createElement("div");r.innerText=lv.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",t.appendChild(r),this.scannerPausedUiElement=r},e.prototype.scanContext=function(t,r){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return t(i.text,nG.createFromQrcodeResult(i)),n.possiblyUpdateShaders(!0),!0}).catch(function(i){n.possiblyUpdateShaders(!1);var a=lv.codeParseError(i);return r(a,x5e.createFrom(a)),!1})},e.prototype.foreverScan=function(t,r,n){var i=this;if(this.shouldScan&&this.renderedCamera){var a=this.renderedCamera.getSurface(),s=a.videoWidth/a.clientWidth,o=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var l=this.qrRegion.width*s,c=this.qrRegion.height*o,d=this.qrRegion.x*s,f=this.qrRegion.y*o;this.context.drawImage(a,d,f,l,c,0,0,this.qrRegion.width,this.qrRegion.height);var p=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(t,r,n)},i.getTimeoutFps(t.fps))};this.scanContext(r,n).then(function(m){!m&&t.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(r,n).finally(function(){p()})):p()}).catch(function(m){i.logger.logError("Error happend while scanning context",m),p()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var r="facingMode",n="deviceId",i={user:!0,environment:!0},a="exact",s=function(x){if(x in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(x,"'")},o=Object.keys(t);if(o.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(o.length," keys");var l=Object.keys(t)[0];if(l!==r&&l!==n)throw"Only '".concat(r,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(l===r){var c=t.facingMode;if(typeof c=="string"){if(s(c))return{facingMode:c}}else if(typeof c=="object")if(a in c){if(s(c["".concat(a)]))return{facingMode:{exact:c["".concat(a)]}}}else throw"'facingMode' should be string or object with"+" ".concat(a," as key.");else{var d=typeof c;throw"Invalid type of 'facingMode' = ".concat(d)}}else{var f=t.deviceId;if(typeof f=="string")return{deviceId:f};if(typeof f=="object"){if(a in f)return{deviceId:{exact:f["".concat(a)]}};throw"'deviceId' should be string or object with"+" ".concat(a," as key.")}else{var p=typeof f;throw"Invalid type of 'deviceId' = ".concat(p)}}}var m=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(m)},e.prototype.computeCanvasDrawConfig=function(t,r,n,i){if(t<=n&&r<=i){var a=(n-t)/2,s=(i-r)/2;return{x:a,y:s,width:t,height:r}}else{var o=t,l=r;return t>n&&(r=n/t*r,t=n),r>i&&(t=i/r*t,r=i),this.logger.log("Image downsampled from "+"".concat(o,"X").concat(l)+" to ".concat(t,"X").concat(r,".")),this.computeCanvasDrawConfig(t,r,n,i)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=t?zl.BORDER_SHADER_MATCH_COLOR:zl.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,r,n){var i=t,a=r,s=document.createElement("canvas");return s.style.width="".concat(i,"px"),s.style.height="".concat(a,"px"),s.style.display="none",s.id=Yf(n)?"qr-canvas":n,s},e.prototype.getShadedRegionBounds=function(t,r,n){if(n.width>t||n.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-n.width)/2,y:(r-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(t,r,n,i){if(!(r-i.width<1||n-i.height<1)){var a=document.createElement("div");a.style.position="absolute";var s=(r-i.width)/2,o=(n-i.height)/2;if(a.style.borderLeft="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderRight="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderTop="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderBottom="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id="".concat(zl.SHADED_REGION_ELEMENT_ID),r-i.width<11||n-i.height<11)this.hasBorderShaders=!1;else{var l=5,c=40;this.insertShaderBorders(a,c,l,-l,null,0,!0),this.insertShaderBorders(a,c,l,-l,null,0,!1),this.insertShaderBorders(a,c,l,null,-l,0,!0),this.insertShaderBorders(a,c,l,null,-l,0,!1),this.insertShaderBorders(a,l,c+l,-l,null,-l,!0),this.insertShaderBorders(a,l,c+l,null,-l,-l,!0),this.insertShaderBorders(a,l,c+l,-l,null,-l,!1),this.insertShaderBorders(a,l,c+l,null,-l,-l,!1),this.hasBorderShaders=!0}t.append(a)}},e.prototype.insertShaderBorders=function(t,r,n,i,a,s,o){var l=document.createElement("div");l.style.position="absolute",l.style.backgroundColor=zl.BORDER_SHADER_DEFAULT_COLOR,l.style.width="".concat(r,"px"),l.style.height="".concat(n,"px"),i!==null&&(l.style.top="".concat(i,"px")),a!==null&&(l.style.bottom="".concat(a,"px")),o?l.style.left="".concat(s,"px"):l.style.right="".concat(s,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(l),t.appendChild(l)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),uG;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(uG||(uG={}));const U5e=({onScanSuccess:e,onClose:t})=>{const[r,n]=I.useState(null),i=I.useRef(null),a=I.useRef(!1),[s,o]=I.useState(!1),[l,c]=I.useState(!1);return I.useEffect(()=>{i.current||(i.current=new B5e("qr-reader"));const d={fps:20,qrbox:{width:250,height:250},aspectRatio:1},f=(x,v)=>{var b;(b=i.current)!=null&&b.isScanning&&i.current.stop(),e(x),t()},p=(x,v)=>{};return(async()=>{var x,v,b;if(!(a.current||(x=i.current)!=null&&x.isScanning)){a.current=!0,n(null);try{const w=i.current;if(!w)return;await w.start({facingMode:"environment"},d,f,p);try{if(typeof w.getRunningTrack=="function"){const _=w.getRunningTrack(),C=((v=_==null?void 0:_.getCapabilities)==null?void 0:v.call(_))||{};C!=null&&C.torch&&o(!0)}}catch(_){console.warn("Torch not supported or error detecting it:",_)}n(null)}catch(w){(b=i.current)!=null&&b.isScanning||(n("Failed to start the camera. Please ensure permissions are granted."),console.error("Scanner error:",w))}finally{a.current=!1}}})(),()=>{i.current&&i.current.isScanning&&i.current.stop().catch(()=>{})}},[e,t]),u.jsxs("div",{className:"bg-black p-4 rounded-lg relative",children:[u.jsx("div",{id:"qr-reader",className:"rounded-lg overflow-hidden"}),s&&u.jsx("button",{onClick:async()=>{var f;const d=!l;try{await((f=i.current)==null?void 0:f.applyVideoConstraints({advanced:[{torch:d}]})),c(d)}catch{Re.error("Flashlight not available")}},className:`absolute top-6 left-6 z-10 p-3 rounded-full shadow-lg transition-colors ${l?"bg-yellow-400 text-black":"bg-black/50 text-white"}`,children:l?u.jsx(Y8e,{size:24}):u.jsx(boe,{size:24})}),!r&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:u.jsx("div",{className:"w-[280px] h-[280px] border-4 border-accent rounded-lg shadow-lg relative",style:{boxShadow:"0 0 0 9999px rgba(0,0,0,0.5)"},children:u.jsx("div",{className:"scan-laser"})})}),r&&u.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-80 flex flex-col items-center justify-center text-center p-4",children:[u.jsx(ld,{className:"w-12 h-12 text-red-500 mb-4"}),u.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Camera Error"}),u.jsx("p",{className:"text-sm text-gray-300 mb-6",children:r}),u.jsxs("button",{onClick:()=>window.location.reload(),className:"w-full flex items-center justify-center gap-2 p-3 bg-accent hover:bg-blue-700 rounded-lg text-white font-semibold mb-3",children:[u.jsx(tC,{size:20}),"Try Again"]})]}),u.jsxs("button",{onClick:t,className:"mt-4 w-full flex items-center justify-center gap-2 p-3 bg-red-600 hover:bg-red-700 rounded-lg text-white font-semibold",children:[u.jsx(v8e,{size:20}),"Cancel Scan"]})]})},Toe=({onItemsChange:e,onRequestNewSample:t,externalSelectedProduct:r})=>{const{products:n,sampleCheckouts:i}=Kr(),[a,s]=I.useState(""),[o,l]=I.useState([]),[c,d]=I.useState(!1),[f,p]=I.useState(null),[m,x]=I.useState(""),[v,b]=I.useState(""),w=I.useMemo(()=>{const O=new Set;return i.forEach(D=>{D.actualReturnDate===null&&O.add(String(D.variantId))}),O},[i]),_=I.useMemo(()=>{if(a.length<2)return[];const O=a.toLowerCase();return n.filter(D=>{var M;return!D.isDiscontinued&&(D.name.toLowerCase().includes(O)||((M=D.manufacturerName)==null?void 0:M.toLowerCase().includes(O))||D.variants.some(B=>B.name&&B.name.toLowerCase().includes(O)||B.sku&&B.sku.toLowerCase().includes(O)))})},[a,n]);I.useEffect(()=>{e(o)},[o,e]),I.useEffect(()=>{if(r)if(p(r),b(""),r.variants.length>0){const O=r.variants.find(D=>D.isMaster);x(O?O.id:r.variants[0].id)}else x("")},[r]);const C=O=>{if(p(O),b(""),O.variants.length>0){const D=O.variants.find(M=>M.isMaster);x(D?D.id:O.variants[0].id)}else x("")},N=()=>{if(!f||!m||!v)return;const O=f.variants.find(U=>U.id===m),D=f.variants.find(U=>U.id===v);if(!O||!D)return;if(w.has(String(O.id))){Re.error("This physical sample is currently checked out.");return}const M={variantId:O.id,interestVariantId:D.id,productName:f.name,variantName:O.name||O.size||"Default",interestName:D.name||D.size||"Default",manufacturerName:f.manufacturerName||"",sampleType:"Board",quantity:1};o.findIndex(U=>U.variantId===M.variantId&&U.interestVariantId===M.interestVariantId)>=0?Re.error("Item already in list."):(l(U=>[...U,M]),Re.success(`Added ${M.interestName}`)),p(null),s("")},R=O=>{l(D=>D.filter((M,B)=>B!==O))},P=O=>{d(!1);let D="",M="";try{if(O.includes("?")){const U=new URL(O);D=U.searchParams.get("variantId")||"",M=U.searchParams.get("productId")||""}else D=O;if(!D&&!M)throw new Error("Could not parse ID");let B;if(M)B=n.find(U=>String(U.id)===String(M));else if(D){if(w.has(String(D))){Re.error("This sample is already checked out!");return}for(const U of n)if(U.variants.some(H=>String(H.id)===String(D))){B=U;break}}if(B){if(p(B),D)x(D),b(D);else{const U=B.variants.find(H=>H.isMaster);U&&x(U.id),b("")}Re.success("Item found!")}else Re.error("Item not found in library.")}catch(B){console.error("Scan Error:",B),Re.error("Invalid QR Code")}};return c?u.jsx(U5e,{onScanSuccess:P,onClose:()=>d(!1)}):u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 h-[500px]",children:[u.jsx("div",{className:"flex flex-col h-full border-r border-border pr-4",children:f?u.jsx("div",{className:"flex flex-col h-full animate-in slide-in-from-right-4 fade-in duration-200",children:u.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border flex-1 flex flex-col gap-4",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-lg text-text-primary",children:f.name}),u.jsx("p",{className:"text-sm text-text-secondary",children:f.manufacturerName}),u.jsx("select",{value:m,onChange:O=>x(O.target.value),className:"hidden",children:f.variants.filter(O=>O.isMaster||O.hasSample).sort((O,D)=>O.isMaster===D.isMaster?0:O.isMaster?-1:1).map(O=>u.jsx("option",{value:O.id,children:O.name},O.id))})]}),u.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[u.jsxs("label",{className:"block text-sm font-bold text-text-primary mb-1",children:["Choose Variant ",u.jsx("span",{className:"text-red-500",children:"*"})]}),f.variants.length===0?u.jsx("p",{className:"text-red-500 text-sm",children:"No variants available."}):u.jsxs("select",{value:v,onChange:O=>b(O.target.value),size:5,className:"w-full flex-1 p-2 bg-background border-2 border-primary/20 focus:border-primary rounded text-text-primary cursor-pointer",children:[u.jsx("option",{value:"",disabled:!0,className:"text-text-tertiary",children:"-- Select an option --"}),f.variants.filter(O=>!O.isMaster).sort((O,D)=>(O.name||"").localeCompare(D.name||"")).map(O=>{const D=w.has(String(O.id));return u.jsxs("option",{value:O.id,disabled:D,className:`py-1 flex justify-between ${D?"text-red-400 opacity-70 bg-red-500/10":""}`,children:[O.name," ",O.size?`(${O.size})`:""," ",D?"(Out)":""]},O.id)})]}),!v&&u.jsxs("p",{className:"text-xs text-amber-600 mt-2 flex items-center gap-1",children:[u.jsx(eC,{size:12})," Selection required"]})]}),u.jsxs("div",{className:"mt-auto pt-4 flex gap-3",children:[u.jsx("button",{onClick:()=>p(null),className:"flex-1 py-3 bg-secondary hover:bg-secondary-hover text-on-secondary font-medium rounded-lg transition-colors",children:"Cancel"}),u.jsx("button",{onClick:N,disabled:!v||w.has(m),className:"flex-[2] py-3 bg-primary hover:bg-primary-hover disabled:bg-gray-400 text-on-primary font-bold rounded-lg shadow-md transition-all whitespace-nowrap",children:v?"Add to List":"Select a Style"})]})]})}):u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"relative mb-4",children:[u.jsx(gc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-text-secondary"}),u.jsx("input",{type:"text",autoFocus:!0,placeholder:"Search product lines...",value:a,onChange:O=>s(O.target.value),className:"w-full p-3 pl-10 bg-background border-2 border-border rounded-lg text-text-primary focus:border-primary outline-none"})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto space-y-2",children:[a.length>1&&t&&u.jsxs("div",{onClick:()=>t(a),className:"p-3 mb-2 bg-primary/10 hover:bg-primary/20 border border-primary/30 rounded-lg cursor-pointer flex justify-between items-center group animate-in fade-in",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(lu,{size:20,className:"text-primary"}),u.jsxs("div",{children:[u.jsxs("p",{className:"font-bold text-primary",children:['Create "',a,'"']}),u.jsx("p",{className:"text-xs text-text-secondary",children:"Add this product to library"})]})]}),u.jsx(ou,{size:16,className:"text-primary"})]}),a.length<2&&u.jsxs("div",{className:"text-center py-8 text-text-tertiary",children:[u.jsx("p",{children:"Type to search for products..."}),u.jsxs("button",{type:"button",onClick:()=>d(!0),className:"mt-4 flex items-center justify-center gap-2 p-3 bg-surface hover:bg-background border border-border rounded-lg text-primary font-semibold transition-colors mx-auto",children:[u.jsx(H8e,{size:20})," Scan QR Code"]})]}),_.map(O=>u.jsxs("div",{onClick:()=>C(O),className:"p-3 bg-background hover:bg-surface border border-border rounded-lg cursor-pointer flex justify-between items-center group",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-lg text-text-primary",children:O.name}),u.jsx("p",{className:"text-xs text-text-secondary",children:O.manufacturerName})]}),u.jsx(ou,{size:16,className:"text-text-tertiary group-hover:text-primary"})]},O.id))]})]})}),u.jsxs("div",{className:"flex flex-col h-full bg-background rounded-lg border border-border p-4",children:[u.jsxs("h4",{className:"font-bold text-text-primary mb-4 border-b border-border pb-2",children:["Checkout List (",o.length,")"]}),u.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-2",children:o.length===0?u.jsx("div",{className:"h-full flex items-center justify-center text-text-tertiary text-sm italic",children:"List is empty. Add items from the left."}):o.map((O,D)=>u.jsxs("div",{className:"bg-surface p-3 rounded border border-border flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-sm text-text-primary",children:O.productName}),u.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[u.jsx("span",{className:"text-xs text-text-secondary",children:"Interested in:"}),u.jsx("span",{className:"text-sm font-bold text-primary",children:O.interestName})]})]}),u.jsx("button",{onClick:()=>R(D),className:"text-text-tertiary hover:text-red-400 p-1",children:u.jsx(Gr,{size:16})})]},`${O.variantId}-${D}`))})]})]})},td=({children:e})=>{const t=I.useRef(null);return t.current||(t.current=document.createElement("div")),I.useEffect(()=>{const r=t.current;return document.body.appendChild(r),()=>{document.body.removeChild(r)}},[]),Tl.createPortal(e,t.current)},$5e=({customer:e,project:t,checkoutItems:r,returnDate:n})=>{const{systemBranding:i}=Kr();return!e||!t?null:u.jsxs("div",{id:"printable-summary",className:"p-10 bg-white text-black font-sans hidden print:block",children:[u.jsxs("header",{className:"flex justify-between items-start pb-4 border-b-2 border-gray-300",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:(i==null?void 0:i.companyName)||"Subfloor"}),u.jsx("p",{className:"text-gray-600",children:"Sample Checkout Summary"})]}),u.jsxs("div",{className:"text-right text-sm",children:[u.jsx("p",{className:"font-bold text-base",children:e.fullName}),e.phoneNumber&&u.jsx("p",{className:"text-gray-700",children:e.phoneNumber}),e.email&&u.jsx("p",{className:"text-gray-700",children:e.email})]})]}),u.jsxs("main",{className:"mt-8",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h2",{className:"text-xl font-semibold mb-2 pb-1 border-b border-gray-200",children:"Project Details"}),u.jsxs("p",{children:[u.jsx("strong",{className:"font-semibold",children:"Project Name:"})," ",t.projectName]}),u.jsxs("p",{children:[u.jsx("strong",{className:"font-semibold",children:"Project Type:"})," ",t.projectType]})]}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold mb-2 pb-1 border-b border-gray-200",children:"Samples Checked Out"}),u.jsxs("table",{className:"w-full mt-4 text-left border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b-2 border-gray-300",children:[u.jsx("th",{className:"p-2 font-semibold",children:"Product / Variant"}),u.jsx("th",{className:"p-2 font-semibold",children:"Manufacturer"}),u.jsx("th",{className:"p-2 font-semibold",children:"Sample Type"})]})}),u.jsx("tbody",{children:r.map((a,s)=>u.jsxs("tr",{className:"border-b border-gray-200",children:[u.jsxs("td",{className:"p-2 align-top",children:[u.jsx("div",{className:"font-bold",children:a.productName}),u.jsxs("div",{className:"text-sm text-gray-600",children:["Selected: ",a.interestName]})]}),u.jsx("td",{className:"p-2 align-top",children:a.manufacturerName||"N/A"}),u.jsxs("td",{className:"p-2 align-top",children:[a.sampleType," ",u.jsxs("span",{className:"text-sm text-gray-500",children:["(Qty: ",a.quantity,")"]})]})]},s))})]})]})]}),u.jsxs("footer",{className:"mt-12 pt-4 border-t-2 border-gray-300",children:[u.jsxs("p",{className:"font-bold text-lg",children:["Expected Return Date: ",new Date(n).toLocaleDateString()]}),u.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Please return all samples by the date listed above. Thank you!"})]})]})},Ioe=()=>$s({queryKey:["currentUser"],queryFn:eoe}),dG={fullName:"",email:"",phoneNumber:"",address:""},fG=e=>{if(!e)return e;const t=e.replace(/[^\d]/g,""),r=t.length;return r<4?t:r<7?`(${t.slice(0,3)}) ${t.slice(3)}`:`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,10)}`},hG=(e,t)=>{const r={};e.fullName.trim()||(r.fullName="Full name is required.");const n=/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/;e.email&&!n.test(e.email)&&(r.email="Must be a valid format (e.g., user@domain.com)."),e.email&&e.email!==t&&(r.confirmEmail="Emails do not match.");const i=e.phoneNumber.replace(/[^\d]/g,"");return e.phoneNumber&&i.length!==10&&(r.phoneNumber="Phone number must be exactly 10 digits."),r},L7=({isOpen:e,onClose:t,customer:r,initialData:n,onSaveSuccess:i})=>{const{data:a}=Ioe(),{createCustomer:s,updateCustomer:o,deleteCustomer:l}=Lse(),[c,d]=I.useState(dG),[f,p]=I.useState(""),[m,x]=I.useState({}),v=a==null?void 0:a.roles.includes("Admin"),b=r!==null;I.useEffect(()=>{if(e){if(b&&r){const P=r.email||"";d({fullName:r.fullName||"",email:P,phoneNumber:r.phoneNumber?fG(r.phoneNumber):"",address:r.address||""}),p(P)}else d({...dG,fullName:(n==null?void 0:n.fullName)||""}),p("");x({})}},[e,r,b,n]),I.useEffect(()=>{e&&x(hG(c,f))},[c,f,e]);const w=P=>{const{name:O,value:D}=P.target;d(O==="phoneNumber"?M=>({...M,phoneNumber:fG(D)}):M=>({...M,[O]:D}))},_=async P=>{P.preventDefault();const O=hG(c,f);if(Object.keys(O).length>0){x(O),Re.error("Please fix the errors before submitting.");return}const D={...c,phoneNumber:c.phoneNumber.replace(/[^\d]/g,"")};try{if(b&&r)await o.mutateAsync({...r,...D}),Re.success("Customer updated!"),t();else{const M=await s.mutateAsync(D);Re.success("Customer created!"),i&&i(M),t()}}catch{}},C=async()=>{if(r&&window.confirm(`Delete ${r.fullName}?`))try{await l.mutateAsync(r.id),Re.success("Customer deleted."),t()}catch{}};if(!e)return null;const N=s.isPending||o.isPending||l.isPending,R=N||Object.keys(m).length>0;return u.jsx("div",{className:"fixed inset-0 bg-black/75 flex justify-center z-50 overflow-y-auto",children:u.jsxs("div",{className:"bg-surface-container-high w-full min-h-full md:min-h-0 md:h-auto md:max-h-[90vh] md:max-w-md md:rounded-xl shadow-2xl flex flex-col border border-outline/10 md:my-auto relative",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center bg-surface-container-low md:rounded-t-xl",children:[u.jsxs("h2",{className:"text-xl font-bold text-text-primary flex items-center gap-2",children:[u.jsx(oc,{className:"text-primary"}),b?"Edit Customer":"New Customer"]}),u.jsx("button",{onClick:t,className:"p-2 hover:bg-surface-container-highest rounded-full text-text-secondary hover:text-text-primary",children:u.jsx(Gr,{size:24})})]}),u.jsxs("form",{onSubmit:_,noValidate:!0,className:"flex flex-col h-full md:h-auto",children:[u.jsxs("div",{className:"p-6 space-y-4 flex-grow overflow-y-auto",children:[u.jsxs("div",{children:[u.jsx("input",{type:"text",name:"fullName",placeholder:"Full Name",value:c.fullName,onChange:w,className:`w-full p-3 bg-surface-container-highest border-b-2 rounded-t-md text-text-primary placeholder-text-secondary focus:outline-none focus:border-primary transition-colors ${m.fullName?"border-error":"border-transparent"}`}),m.fullName&&u.jsx("p",{className:"text-error text-xs mt-1 ml-1 font-medium",children:m.fullName})]}),u.jsxs("div",{children:[u.jsx("input",{type:"email",name:"email",placeholder:"Email (Optional)",value:c.email,onChange:w,className:`w-full p-3 bg-surface-container-highest border-b-2 rounded-t-md text-text-primary placeholder-text-secondary focus:outline-none focus:border-primary transition-colors ${m.email?"border-error":"border-transparent"}`}),m.email&&u.jsx("p",{className:"text-error text-xs mt-1 ml-1 font-medium",children:m.email})]}),c.email&&u.jsxs("div",{children:[u.jsx("input",{type:"email",name:"confirmEmail",placeholder:"Confirm Email",value:f,onChange:P=>p(P.target.value),className:`w-full p-3 bg-surface-container-highest border-b-2 rounded-t-md text-text-primary placeholder-text-secondary focus:outline-none focus:border-primary transition-colors ${m.confirmEmail?"border-error":"border-transparent"}`}),m.confirmEmail&&u.jsx("p",{className:"text-error text-xs mt-1 ml-1 font-medium",children:m.confirmEmail})]}),u.jsxs("div",{children:[u.jsx("input",{type:"tel",name:"phoneNumber",placeholder:"Phone Number",value:c.phoneNumber,onChange:w,className:`w-full p-3 bg-surface-container-highest border-b-2 rounded-t-md text-text-primary placeholder-text-secondary focus:outline-none focus:border-primary transition-colors ${m.phoneNumber?"border-error":"border-transparent"}`,maxLength:14}),m.phoneNumber&&u.jsx("p",{className:"text-error text-xs mt-1 ml-1 font-medium",children:m.phoneNumber})]}),u.jsx("input",{type:"text",name:"address",placeholder:"Address",value:c.address,onChange:w,className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary placeholder-text-secondary focus:outline-none focus:border-primary transition-colors"})]}),u.jsxs("div",{className:"p-4 border-t border-outline/10 bg-surface-container-low md:rounded-b-xl flex justify-end gap-3 shrink-0",children:[u.jsx("button",{type:"button",onClick:t,className:"py-2 px-6 bg-surface hover:bg-surface-container-highest border border-outline/20 rounded-full text-text-primary font-medium transition-colors",disabled:N,children:"Cancel"}),b&&v&&u.jsxs("button",{type:"button",onClick:C,className:"py-2 px-6 bg-error-container hover:bg-error/20 text-error rounded-full font-semibold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed mr-auto transition-colors",disabled:N,children:[u.jsx(Bs,{size:16}),l.isPending?"Deleting...":"Delete"]}),u.jsx("button",{type:"submit",className:"py-2 px-6 bg-primary hover:bg-primary-hover rounded-full text-on-primary font-semibold shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-all",disabled:R,children:s.isPending||o.isPending?"Saving...":b?"Save Changes":"Add Customer"})]})]})]})})};function Tr(){return Tr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tr.apply(null,arguments)}function nx(e){"@babel/helpers - typeof";return nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nx(e)}function z5e(e,t){if(nx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(nx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ooe(e){var t=z5e(e,"string");return nx(t)=="symbol"?t:t+""}function qd(e,t,r){return(t=Ooe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Er(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pG(Object(r),!0).forEach(function(n){qd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function H5e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ooe(n.key),n)}}function W5e(e,t,r){return t&&mG(e.prototype,t),r&&mG(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f8(e,t){return f8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},f8(e,t)}function V5e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f8(e,t)}function iT(e){return iT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},iT(e)}function Poe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Poe=function(){return!!e})()}function q5e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G5e(e,t){if(t&&(nx(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q5e(e)}function K5e(e){var t=Poe();return function(){var r,n=iT(e);if(t){var i=iT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return G5e(this,r)}}function h8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function X5e(e){if(Array.isArray(e))return h8(e)}function Y5e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Roe(e,t){if(e){if(typeof e=="string")return h8(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h8(e,t):void 0}}function Q5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lo(e){return X5e(e)||Y5e(e)||Roe(e)||Q5e()}function J5e(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Z5e(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var eFe=function(){function e(r){var n=this;this._insertTag=function(i){var a;n.tags.length===0?n.insertionPoint?a=n.insertionPoint.nextSibling:n.prepend?a=n.container.firstChild:a=n.before:a=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,a),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Z5e(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var a=J5e(i);try{a.insertRule(n,a.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},e}(),Qs="-ms-",aT="-moz-",Hn="-webkit-",joe="comm",B7="rule",U7="decl",tFe="@import",Doe="@keyframes",rFe="@layer",nFe=Math.abs,R4=String.fromCharCode,iFe=Object.assign;function aFe(e,t){return Os(e,0)^45?(((t<<2^Os(e,0))<<2^Os(e,1))<<2^Os(e,2))<<2^Os(e,3):0}function Moe(e){return e.trim()}function sFe(e,t){return(e=t.exec(e))?e[0]:e}function Wn(e,t,r){return e.replace(t,r)}function p8(e,t){return e.indexOf(t)}function Os(e,t){return e.charCodeAt(t)|0}function vS(e,t,r){return e.slice(t,r)}function Fd(e){return e.length}function $7(e){return e.length}function g_(e,t){return t.push(e),e}function oFe(e,t){return e.map(t).join("")}var j4=1,fy=1,Foe=0,Nl=0,Aa=0,fb="";function D4(e,t,r,n,i,a,s){return{value:e,root:t,parent:r,type:n,props:i,children:a,line:j4,column:fy,length:s,return:""}}function ww(e,t){return iFe(D4("",null,null,"",null,null,0),e,{length:-e.length},t)}function lFe(){return Aa}function cFe(){return Aa=Nl>0?Os(fb,--Nl):0,fy--,Aa===10&&(fy=1,j4--),Aa}function rc(){return Aa=Nl<Foe?Os(fb,Nl++):0,fy++,Aa===10&&(fy=1,j4++),Aa}function Zd(){return Os(fb,Nl)}function UN(){return Nl}function nC(e,t){return vS(fb,e,t)}function yS(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Loe(e){return j4=fy=1,Foe=Fd(fb=e),Nl=0,[]}function Boe(e){return fb="",e}function $N(e){return Moe(nC(Nl-1,m8(e===91?e+2:e===40?e+1:e)))}function uFe(e){for(;(Aa=Zd())&&Aa<33;)rc();return yS(e)>2||yS(Aa)>3?"":" "}function dFe(e,t){for(;--t&&rc()&&!(Aa<48||Aa>102||Aa>57&&Aa<65||Aa>70&&Aa<97););return nC(e,UN()+(t<6&&Zd()==32&&rc()==32))}function m8(e){for(;rc();)switch(Aa){case e:return Nl;case 34:case 39:e!==34&&e!==39&&m8(Aa);break;case 40:e===41&&m8(e);break;case 92:rc();break}return Nl}function fFe(e,t){for(;rc()&&e+Aa!==57;)if(e+Aa===84&&Zd()===47)break;return"/*"+nC(t,Nl-1)+"*"+R4(e===47?e:rc())}function hFe(e){for(;!yS(Zd());)rc();return nC(e,Nl)}function pFe(e){return Boe(zN("",null,null,null,[""],e=Loe(e),0,[0],e))}function zN(e,t,r,n,i,a,s,o,l){for(var c=0,d=0,f=s,p=0,m=0,x=0,v=1,b=1,w=1,_=0,C="",N=i,R=a,P=n,O=C;b;)switch(x=_,_=rc()){case 40:if(x!=108&&Os(O,f-1)==58){p8(O+=Wn($N(_),"&","&\f"),"&\f")!=-1&&(w=-1);break}case 34:case 39:case 91:O+=$N(_);break;case 9:case 10:case 13:case 32:O+=uFe(x);break;case 92:O+=dFe(UN()-1,7);continue;case 47:switch(Zd()){case 42:case 47:g_(mFe(fFe(rc(),UN()),t,r),l);break;default:O+="/"}break;case 123*v:o[c++]=Fd(O)*w;case 125*v:case 59:case 0:switch(_){case 0:case 125:b=0;case 59+d:w==-1&&(O=Wn(O,/\f/g,"")),m>0&&Fd(O)-f&&g_(m>32?xG(O+";",n,r,f-1):xG(Wn(O," ","")+";",n,r,f-2),l);break;case 59:O+=";";default:if(g_(P=gG(O,t,r,c,d,i,o,C,N=[],R=[],f),a),_===123)if(d===0)zN(O,t,P,P,N,a,f,o,R);else switch(p===99&&Os(O,3)===110?100:p){case 100:case 108:case 109:case 115:zN(e,P,P,n&&g_(gG(e,P,P,0,0,i,o,C,i,N=[],f),R),i,R,f,o,n?N:R);break;default:zN(O,P,P,P,[""],R,0,o,R)}}c=d=m=0,v=w=1,C=O="",f=s;break;case 58:f=1+Fd(O),m=x;default:if(v<1){if(_==123)--v;else if(_==125&&v++==0&&cFe()==125)continue}switch(O+=R4(_),_*v){case 38:w=d>0?1:(O+="\f",-1);break;case 44:o[c++]=(Fd(O)-1)*w,w=1;break;case 64:Zd()===45&&(O+=$N(rc())),p=Zd(),d=f=Fd(C=O+=hFe(UN())),_++;break;case 45:x===45&&Fd(O)==2&&(v=0)}}return a}function gG(e,t,r,n,i,a,s,o,l,c,d){for(var f=i-1,p=i===0?a:[""],m=$7(p),x=0,v=0,b=0;x<n;++x)for(var w=0,_=vS(e,f+1,f=nFe(v=s[x])),C=e;w<m;++w)(C=Moe(v>0?p[w]+" "+_:Wn(_,/&\f/g,p[w])))&&(l[b++]=C);return D4(e,t,r,i===0?B7:o,l,c,d)}function mFe(e,t,r){return D4(e,t,r,joe,R4(lFe()),vS(e,2,-2),0)}function xG(e,t,r,n){return D4(e,t,r,U7,vS(e,0,n),vS(e,n+1,-1),n)}function Ev(e,t){for(var r="",n=$7(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function gFe(e,t,r,n){switch(e.type){case rFe:if(e.children.length)break;case tFe:case U7:return e.return=e.return||e.value;case joe:return"";case Doe:return e.return=e.value+"{"+Ev(e.children,n)+"}";case B7:e.value=e.props.join(",")}return Fd(r=Ev(e.children,n))?e.return=e.value+"{"+r+"}":""}function xFe(e){var t=$7(e);return function(r,n,i,a){for(var s="",o=0;o<t;o++)s+=e[o](r,n,i,a)||"";return s}}function vFe(e){return function(t){t.root||(t=t.return)&&e(t)}}function yFe(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var bFe=function(t,r,n){for(var i=0,a=0;i=a,a=Zd(),i===38&&a===12&&(r[n]=1),!yS(a);)rc();return nC(t,Nl)},wFe=function(t,r){var n=-1,i=44;do switch(yS(i)){case 0:i===38&&Zd()===12&&(r[n]=1),t[n]+=bFe(Nl-1,r,n);break;case 2:t[n]+=$N(i);break;case 4:if(i===44){t[++n]=Zd()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=R4(i)}while(i=rc());return t},SFe=function(t,r){return Boe(wFe(Loe(t),r))},vG=new WeakMap,EFe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!vG.get(n))&&!i){vG.set(t,!0);for(var a=[],s=SFe(r,a),o=n.props,l=0,c=0;l<s.length;l++)for(var d=0;d<o.length;d++,c++)t.props[c]=a[l]?s[l].replace(/&\f/g,o[d]):o[d]+" "+s[l]}}},CFe=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function Uoe(e,t){switch(aFe(e,t)){case 5103:return Hn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Hn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Hn+e+aT+e+Qs+e+e;case 6828:case 4268:return Hn+e+Qs+e+e;case 6165:return Hn+e+Qs+"flex-"+e+e;case 5187:return Hn+e+Wn(e,/(\w+).+(:[^]+)/,Hn+"box-$1$2"+Qs+"flex-$1$2")+e;case 5443:return Hn+e+Qs+"flex-item-"+Wn(e,/flex-|-self/,"")+e;case 4675:return Hn+e+Qs+"flex-line-pack"+Wn(e,/align-content|flex-|-self/,"")+e;case 5548:return Hn+e+Qs+Wn(e,"shrink","negative")+e;case 5292:return Hn+e+Qs+Wn(e,"basis","preferred-size")+e;case 6060:return Hn+"box-"+Wn(e,"-grow","")+Hn+e+Qs+Wn(e,"grow","positive")+e;case 4554:return Hn+Wn(e,/([^-])(transform)/g,"$1"+Hn+"$2")+e;case 6187:return Wn(Wn(Wn(e,/(zoom-|grab)/,Hn+"$1"),/(image-set)/,Hn+"$1"),e,"")+e;case 5495:case 3959:return Wn(e,/(image-set\([^]*)/,Hn+"$1$`$1");case 4968:return Wn(Wn(e,/(.+:)(flex-)?(.*)/,Hn+"box-pack:$3"+Qs+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Hn+e+e;case 4095:case 3583:case 4068:case 2532:return Wn(e,/(.+)-inline(.+)/,Hn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Fd(e)-1-t>6)switch(Os(e,t+1)){case 109:if(Os(e,t+4)!==45)break;case 102:return Wn(e,/(.+:)(.+)-([^]+)/,"$1"+Hn+"$2-$3$1"+aT+(Os(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~p8(e,"stretch")?Uoe(Wn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Os(e,t+1)!==115)break;case 6444:switch(Os(e,Fd(e)-3-(~p8(e,"!important")&&10))){case 107:return Wn(e,":",":"+Hn)+e;case 101:return Wn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Hn+(Os(e,14)===45?"inline-":"")+"box$3$1"+Hn+"$2$3$1"+Qs+"$2box$3")+e}break;case 5936:switch(Os(e,t+11)){case 114:return Hn+e+Qs+Wn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Hn+e+Qs+Wn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Hn+e+Qs+Wn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Hn+e+Qs+e+e}return e}var kFe=function(t,r,n,i){if(t.length>-1&&!t.return)switch(t.type){case U7:t.return=Uoe(t.value,t.length);break;case Doe:return Ev([ww(t,{value:Wn(t.value,"@","@"+Hn)})],i);case B7:if(t.length)return oFe(t.props,function(a){switch(sFe(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ev([ww(t,{props:[Wn(a,/:(read-\w+)/,":"+aT+"$1")]})],i);case"::placeholder":return Ev([ww(t,{props:[Wn(a,/:(plac\w+)/,":"+Hn+"input-$1")]}),ww(t,{props:[Wn(a,/:(plac\w+)/,":"+aT+"$1")]}),ww(t,{props:[Wn(a,/:(plac\w+)/,Qs+"input-$1")]})],i)}return""})}},_Fe=[kFe],NFe=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(v){var b=v.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var i=t.stylisPlugins||_Fe,a={},s,o=[];s=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(v){for(var b=v.getAttribute("data-emotion").split(" "),w=1;w<b.length;w++)a[b[w]]=!0;o.push(v)});var l,c=[EFe,CFe];{var d,f=[gFe,vFe(function(v){d.insert(v)})],p=xFe(c.concat(i,f)),m=function(b){return Ev(pFe(b),p)};l=function(b,w,_,C){d=_,m(b?b+"{"+w.styles+"}":w.styles),C&&(x.inserted[w.name]=!0)}}var x={key:r,sheet:new eFe({key:r,container:s,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:l};return x.sheet.hydrate(o),x},$oe={exports:{}},ni={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bs=typeof Symbol=="function"&&Symbol.for,z7=bs?Symbol.for("react.element"):60103,H7=bs?Symbol.for("react.portal"):60106,M4=bs?Symbol.for("react.fragment"):60107,F4=bs?Symbol.for("react.strict_mode"):60108,L4=bs?Symbol.for("react.profiler"):60114,B4=bs?Symbol.for("react.provider"):60109,U4=bs?Symbol.for("react.context"):60110,W7=bs?Symbol.for("react.async_mode"):60111,$4=bs?Symbol.for("react.concurrent_mode"):60111,z4=bs?Symbol.for("react.forward_ref"):60112,H4=bs?Symbol.for("react.suspense"):60113,AFe=bs?Symbol.for("react.suspense_list"):60120,W4=bs?Symbol.for("react.memo"):60115,V4=bs?Symbol.for("react.lazy"):60116,TFe=bs?Symbol.for("react.block"):60121,IFe=bs?Symbol.for("react.fundamental"):60117,OFe=bs?Symbol.for("react.responder"):60118,PFe=bs?Symbol.for("react.scope"):60119;function xc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case z7:switch(e=e.type,e){case W7:case $4:case M4:case L4:case F4:case H4:return e;default:switch(e=e&&e.$$typeof,e){case U4:case z4:case V4:case W4:case B4:return e;default:return t}}case H7:return t}}}function zoe(e){return xc(e)===$4}ni.AsyncMode=W7;ni.ConcurrentMode=$4;ni.ContextConsumer=U4;ni.ContextProvider=B4;ni.Element=z7;ni.ForwardRef=z4;ni.Fragment=M4;ni.Lazy=V4;ni.Memo=W4;ni.Portal=H7;ni.Profiler=L4;ni.StrictMode=F4;ni.Suspense=H4;ni.isAsyncMode=function(e){return zoe(e)||xc(e)===W7};ni.isConcurrentMode=zoe;ni.isContextConsumer=function(e){return xc(e)===U4};ni.isContextProvider=function(e){return xc(e)===B4};ni.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===z7};ni.isForwardRef=function(e){return xc(e)===z4};ni.isFragment=function(e){return xc(e)===M4};ni.isLazy=function(e){return xc(e)===V4};ni.isMemo=function(e){return xc(e)===W4};ni.isPortal=function(e){return xc(e)===H7};ni.isProfiler=function(e){return xc(e)===L4};ni.isStrictMode=function(e){return xc(e)===F4};ni.isSuspense=function(e){return xc(e)===H4};ni.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===M4||e===$4||e===L4||e===F4||e===H4||e===AFe||typeof e=="object"&&e!==null&&(e.$$typeof===V4||e.$$typeof===W4||e.$$typeof===B4||e.$$typeof===U4||e.$$typeof===z4||e.$$typeof===IFe||e.$$typeof===OFe||e.$$typeof===PFe||e.$$typeof===TFe)};ni.typeOf=xc;$oe.exports=ni;var Hoe=$oe.exports,Woe=Hoe,RFe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},jFe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Voe={};Voe[Woe.ForwardRef]=RFe;Voe[Woe.Memo]=jFe;var DFe=!0;function MFe(e,t,r){var n="";return r.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(n+=i+" ")}),n}var qoe=function(t,r,n){var i=t.key+"-"+r.name;(n===!1||DFe===!1)&&t.registered[i]===void 0&&(t.registered[i]=r.styles)},FFe=function(t,r,n){qoe(t,r,n);var i=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var a=r;do t.insert(r===a?"."+i:"",a,t.sheet,!0),a=a.next;while(a!==void 0)}};function LFe(e){for(var t=0,r,n=0,i=e.length;i>=4;++n,i-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var BFe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},UFe=/[A-Z]|^ms/g,$Fe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Goe=function(t){return t.charCodeAt(1)===45},yG=function(t){return t!=null&&typeof t!="boolean"},$j=yFe(function(e){return Goe(e)?e:e.replace(UFe,"-$&").toLowerCase()}),bG=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace($Fe,function(n,i,a){return Ld={name:i,styles:a,next:Ld},i})}return BFe[t]!==1&&!Goe(t)&&typeof r=="number"&&r!==0?r+"px":r};function bS(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var i=r;if(i.anim===1)return Ld={name:i.name,styles:i.styles,next:Ld},i.name;var a=r;if(a.styles!==void 0){var s=a.next;if(s!==void 0)for(;s!==void 0;)Ld={name:s.name,styles:s.styles,next:Ld},s=s.next;var o=a.styles+";";return o}return zFe(e,t,r)}case"function":{if(e!==void 0){var l=Ld,c=r(e);return Ld=l,bS(e,t,c)}break}}var d=r;return d}function zFe(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=bS(e,t,r[i])+";";else for(var a in r){var s=r[a];if(typeof s!="object"){var o=s;yG(o)&&(n+=$j(a)+":"+bG(a,o)+";")}else if(Array.isArray(s)&&typeof s[0]=="string"&&t==null)for(var l=0;l<s.length;l++)yG(s[l])&&(n+=$j(a)+":"+bG(a,s[l])+";");else{var c=bS(e,t,s);switch(a){case"animation":case"animationName":{n+=$j(a)+":"+c+";";break}default:n+=a+"{"+c+"}"}}}return n}var wG=/label:\s*([^\s;{]+)\s*(;|$)/g,Ld;function Koe(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,i="";Ld=void 0;var a=e[0];if(a==null||a.raw===void 0)n=!1,i+=bS(r,t,a);else{var s=a;i+=s[0]}for(var o=1;o<e.length;o++)if(i+=bS(r,t,e[o]),n){var l=a;i+=l[o]}wG.lastIndex=0;for(var c="",d;(d=wG.exec(i))!==null;)c+="-"+d[1];var f=LFe(i)+c;return{name:f,styles:i,next:Ld}}var HFe=function(t){return t()},WFe=Gv.useInsertionEffect?Gv.useInsertionEffect:!1,VFe=WFe||HFe,Xoe=I.createContext(typeof HTMLElement<"u"?NFe({key:"css"}):null);Xoe.Provider;var qFe=function(t){return I.forwardRef(function(r,n){var i=I.useContext(Xoe);return t(r,i,n)})},GFe=I.createContext({}),V7={}.hasOwnProperty,g8="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",KFe=function(t,r){var n={};for(var i in r)V7.call(r,i)&&(n[i]=r[i]);return n[g8]=t,n},XFe=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return qoe(r,n,i),VFe(function(){return FFe(r,n,i)}),null},YFe=qFe(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var i=e[g8],a=[n],s="";typeof e.className=="string"?s=MFe(t.registered,a,e.className):e.className!=null&&(s=e.className+" ");var o=Koe(a,void 0,I.useContext(GFe));s+=t.key+"-"+o.name;var l={};for(var c in e)V7.call(e,c)&&c!=="css"&&c!==g8&&(l[c]=e[c]);return l.className=s,r&&(l.ref=r),I.createElement(I.Fragment,null,I.createElement(XFe,{cache:t,serialized:o,isStringTag:typeof i=="string"}),I.createElement(i,l))}),QFe=YFe,yr=function(t,r){var n=arguments;if(r==null||!V7.call(r,"css"))return I.createElement.apply(void 0,n);var i=n.length,a=new Array(i);a[0]=QFe,a[1]=KFe(t,r);for(var s=2;s<i;s++)a[s]=n[s];return I.createElement.apply(null,a)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(yr||(yr={}));function q7(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Koe(t)}function JFe(){var e=q7.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function ZFe(e){if(Array.isArray(e))return e}function eLe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function tLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xh(e,t){return ZFe(e)||eLe(e,t)||Roe(e,t)||tLe()}function rLe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function bf(e,t){if(e==null)return{};var r,n,i=rLe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function nLe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const iLe=Math.min,aLe=Math.max,sT=Math.round,x_=Math.floor,oT=e=>({x:e,y:e});function sLe(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function q4(){return typeof window<"u"}function Yoe(e){return Joe(e)?(e.nodeName||"").toLowerCase():"#document"}function Fh(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Qoe(e){var t;return(t=(Joe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Joe(e){return q4()?e instanceof Node||e instanceof Fh(e).Node:!1}function oLe(e){return q4()?e instanceof Element||e instanceof Fh(e).Element:!1}function G7(e){return q4()?e instanceof HTMLElement||e instanceof Fh(e).HTMLElement:!1}function SG(e){return!q4()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Fh(e).ShadowRoot}const lLe=new Set(["inline","contents"]);function Zoe(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=K7(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!lLe.has(i)}function cLe(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const uLe=new Set(["html","body","#document"]);function dLe(e){return uLe.has(Yoe(e))}function K7(e){return Fh(e).getComputedStyle(e)}function fLe(e){if(Yoe(e)==="html")return e;const t=e.assignedSlot||e.parentNode||SG(e)&&e.host||Qoe(e);return SG(t)?t.host:t}function ele(e){const t=fLe(e);return dLe(t)?e.ownerDocument?e.ownerDocument.body:e.body:G7(t)&&Zoe(t)?t:ele(t)}function lT(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=ele(e),a=i===((n=e.ownerDocument)==null?void 0:n.body),s=Fh(i);if(a){const o=x8(s);return t.concat(s,s.visualViewport||[],Zoe(i)?i:[],o&&r?lT(o):[])}return t.concat(i,lT(i,[],r))}function x8(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function hLe(e){const t=K7(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=G7(e),a=i?e.offsetWidth:r,s=i?e.offsetHeight:n,o=sT(r)!==a||sT(n)!==s;return o&&(r=a,n=s),{width:r,height:n,$:o}}function X7(e){return oLe(e)?e:e.contextElement}function EG(e){const t=X7(e);if(!G7(t))return oT(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:a}=hLe(t);let s=(a?sT(r.width):r.width)/n,o=(a?sT(r.height):r.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const pLe=oT(0);function mLe(e){const t=Fh(e);return!cLe()||!t.visualViewport?pLe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function gLe(e,t,r){return!1}function CG(e,t,r,n){t===void 0&&(t=!1);const i=e.getBoundingClientRect(),a=X7(e);let s=oT(1);t&&(s=EG(e));const o=gLe()?mLe(a):oT(0);let l=(i.left+o.x)/s.x,c=(i.top+o.y)/s.y,d=i.width/s.x,f=i.height/s.y;if(a){const p=Fh(a),m=n;let x=p,v=x8(x);for(;v&&n&&m!==x;){const b=EG(v),w=v.getBoundingClientRect(),_=K7(v),C=w.left+(v.clientLeft+parseFloat(_.paddingLeft))*b.x,N=w.top+(v.clientTop+parseFloat(_.paddingTop))*b.y;l*=b.x,c*=b.y,d*=b.x,f*=b.y,l+=C,c+=N,x=Fh(v),v=x8(x)}}return sLe({width:d,height:f,x:l,y:c})}function tle(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function xLe(e,t){let r=null,n;const i=Qoe(e);function a(){var o;clearTimeout(n),(o=r)==null||o.disconnect(),r=null}function s(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),a();const c=e.getBoundingClientRect(),{left:d,top:f,width:p,height:m}=c;if(o||t(),!p||!m)return;const x=x_(f),v=x_(i.clientWidth-(d+p)),b=x_(i.clientHeight-(f+m)),w=x_(d),C={rootMargin:-x+"px "+-v+"px "+-b+"px "+-w+"px",threshold:aLe(0,iLe(1,l))||1};let N=!0;function R(P){const O=P[0].intersectionRatio;if(O!==l){if(!N)return s();O?s(!1,O):n=setTimeout(()=>{s(!1,1e-7)},1e3)}O===1&&!tle(c,e.getBoundingClientRect())&&s(),N=!1}try{r=new IntersectionObserver(R,{...C,root:i.ownerDocument})}catch{r=new IntersectionObserver(R,C)}r.observe(e)}return s(!0),a}function vLe(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=X7(e),d=i||a?[...c?lT(c):[],...lT(t)]:[];d.forEach(w=>{i&&w.addEventListener("scroll",r,{passive:!0}),a&&w.addEventListener("resize",r)});const f=c&&o?xLe(c,r):null;let p=-1,m=null;s&&(m=new ResizeObserver(w=>{let[_]=w;_&&_.target===c&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var C;(C=m)==null||C.observe(t)})),r()}),c&&!l&&m.observe(c),m.observe(t));let x,v=l?CG(e):null;l&&b();function b(){const w=CG(e);v&&!tle(v,w)&&r(),v=w,x=requestAnimationFrame(b)}return r(),()=>{var w;d.forEach(_=>{i&&_.removeEventListener("scroll",r),a&&_.removeEventListener("resize",r)}),f==null||f(),(w=m)==null||w.disconnect(),m=null,l&&cancelAnimationFrame(x)}}var v8=I.useLayoutEffect,yLe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],cT=function(){};function bLe(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function wLe(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var a=[].concat(n);if(t&&e)for(var s in t)t.hasOwnProperty(s)&&t[s]&&a.push("".concat(bLe(e,s)));return a.filter(function(o){return o}).map(function(o){return String(o).trim()}).join(" ")}var uT=function(t){return ILe(t)?t.filter(Boolean):nx(t)==="object"&&t!==null?[t]:[]},rle=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var r=bf(t,yLe);return Er({},r)},na=function(t,r,n){var i=t.cx,a=t.getStyles,s=t.getClassNames,o=t.className;return{css:a(r,t),className:i(n??{},s(r,t),o)}};function G4(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function SLe(e){return G4(e)?window.innerHeight:e.clientHeight}function nle(e){return G4(e)?window.pageYOffset:e.scrollTop}function dT(e,t){if(G4(e)){window.scrollTo(0,t);return}e.scrollTop=t}function ELe(e){var t=getComputedStyle(e),r=t.position==="absolute",n=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var i=e;i=i.parentElement;)if(t=getComputedStyle(i),!(r&&t.position==="static")&&n.test(t.overflow+t.overflowY+t.overflowX))return i;return document.documentElement}function CLe(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function v_(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:cT,i=nle(e),a=t-i,s=10,o=0;function l(){o+=s;var c=CLe(o,i,a,r);dT(e,c),o<r?window.requestAnimationFrame(l):n(e)}l()}function kG(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),i=t.offsetHeight/3;n.bottom+i>r.bottom?dT(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+i,e.scrollHeight)):n.top-i<r.top&&dT(e,Math.max(t.offsetTop-i,0))}function kLe(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function _G(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function _Le(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var ile=!1,NLe={get passive(){return ile=!0}},y_=typeof window<"u"?window:{};y_.addEventListener&&y_.removeEventListener&&(y_.addEventListener("p",cT,NLe),y_.removeEventListener("p",cT,!1));var ALe=ile;function TLe(e){return e!=null}function ILe(e){return Array.isArray(e)}function Gw(e,t,r){return e?t:r}var OLe=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var a=Object.entries(t).filter(function(s){var o=xh(s,1),l=o[0];return!n.includes(l)});return a.reduce(function(s,o){var l=xh(o,2),c=l[0],d=l[1];return s[c]=d,s},{})},PLe=["children","innerProps"],RLe=["children","innerProps"];function jLe(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,i=e.placement,a=e.shouldScroll,s=e.isFixedPosition,o=e.controlHeight,l=ELe(r),c={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return c;var d=l.getBoundingClientRect(),f=d.height,p=r.getBoundingClientRect(),m=p.bottom,x=p.height,v=p.top,b=r.offsetParent.getBoundingClientRect(),w=b.top,_=s?window.innerHeight:SLe(l),C=nle(l),N=parseInt(getComputedStyle(r).marginBottom,10),R=parseInt(getComputedStyle(r).marginTop,10),P=w-R,O=_-v,D=P+C,M=f-C-v,B=m-_+C+N,U=C+v-R,H=160;switch(i){case"auto":case"bottom":if(O>=x)return{placement:"bottom",maxHeight:t};if(M>=x&&!s)return a&&v_(l,B,H),{placement:"bottom",maxHeight:t};if(!s&&M>=n||s&&O>=n){a&&v_(l,B,H);var Z=s?O-N:M-N;return{placement:"bottom",maxHeight:Z}}if(i==="auto"||s){var ee=t,V=s?P:D;return V>=n&&(ee=Math.min(V-N-o,t)),{placement:"top",maxHeight:ee}}if(i==="bottom")return a&&dT(l,B),{placement:"bottom",maxHeight:t};break;case"top":if(P>=x)return{placement:"top",maxHeight:t};if(D>=x&&!s)return a&&v_(l,U,H),{placement:"top",maxHeight:t};if(!s&&D>=n||s&&P>=n){var te=t;return(!s&&D>=n||s&&P>=n)&&(te=s?P-R:D-R),a&&v_(l,U,H),{placement:"top",maxHeight:te}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return c}function DLe(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var ale=function(t){return t==="auto"?"bottom":t},MLe=function(t,r){var n,i=t.placement,a=t.theme,s=a.borderRadius,o=a.spacing,l=a.colors;return Er((n={label:"menu"},qd(n,DLe(i),"100%"),qd(n,"position","absolute"),qd(n,"width","100%"),qd(n,"zIndex",1),n),r?{}:{backgroundColor:l.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:o.menuGutter,marginTop:o.menuGutter})},sle=I.createContext(null),FLe=function(t){var r=t.children,n=t.minMenuHeight,i=t.maxMenuHeight,a=t.menuPlacement,s=t.menuPosition,o=t.menuShouldScrollIntoView,l=t.theme,c=I.useContext(sle)||{},d=c.setPortalPlacement,f=I.useRef(null),p=I.useState(i),m=xh(p,2),x=m[0],v=m[1],b=I.useState(null),w=xh(b,2),_=w[0],C=w[1],N=l.spacing.controlHeight;return v8(function(){var R=f.current;if(R){var P=s==="fixed",O=o&&!P,D=jLe({maxHeight:i,menuEl:R,minHeight:n,placement:a,shouldScroll:O,isFixedPosition:P,controlHeight:N});v(D.maxHeight),C(D.placement),d==null||d(D.placement)}},[i,a,s,o,n,d,N]),r({ref:f,placerProps:Er(Er({},t),{},{placement:_||ale(a),maxHeight:x})})},LLe=function(t){var r=t.children,n=t.innerRef,i=t.innerProps;return yr("div",Tr({},na(t,"menu",{menu:!0}),{ref:n},i),r)},BLe=LLe,ULe=function(t,r){var n=t.maxHeight,i=t.theme.spacing.baseUnit;return Er({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},r?{}:{paddingBottom:i,paddingTop:i})},$Le=function(t){var r=t.children,n=t.innerProps,i=t.innerRef,a=t.isMulti;return yr("div",Tr({},na(t,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:i},n),r)},ole=function(t,r){var n=t.theme,i=n.spacing.baseUnit,a=n.colors;return Er({textAlign:"center"},r?{}:{color:a.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},zLe=ole,HLe=ole,WLe=function(t){var r=t.children,n=r===void 0?"No options":r,i=t.innerProps,a=bf(t,PLe);return yr("div",Tr({},na(Er(Er({},a),{},{children:n,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),n)},VLe=function(t){var r=t.children,n=r===void 0?"Loading...":r,i=t.innerProps,a=bf(t,RLe);return yr("div",Tr({},na(Er(Er({},a),{},{children:n,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),n)},qLe=function(t){var r=t.rect,n=t.offset,i=t.position;return{left:r.left,position:i,top:n,width:r.width,zIndex:1}},GLe=function(t){var r=t.appendTo,n=t.children,i=t.controlElement,a=t.innerProps,s=t.menuPlacement,o=t.menuPosition,l=I.useRef(null),c=I.useRef(null),d=I.useState(ale(s)),f=xh(d,2),p=f[0],m=f[1],x=I.useMemo(function(){return{setPortalPlacement:m}},[]),v=I.useState(null),b=xh(v,2),w=b[0],_=b[1],C=I.useCallback(function(){if(i){var O=kLe(i),D=o==="fixed"?0:window.pageYOffset,M=O[p]+D;(M!==(w==null?void 0:w.offset)||O.left!==(w==null?void 0:w.rect.left)||O.width!==(w==null?void 0:w.rect.width))&&_({offset:M,rect:O})}},[i,o,p,w==null?void 0:w.offset,w==null?void 0:w.rect.left,w==null?void 0:w.rect.width]);v8(function(){C()},[C]);var N=I.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),i&&l.current&&(c.current=vLe(i,l.current,C,{elementResize:"ResizeObserver"in window}))},[i,C]);v8(function(){N()},[N]);var R=I.useCallback(function(O){l.current=O,N()},[N]);if(!r&&o!=="fixed"||!w)return null;var P=yr("div",Tr({ref:R},na(Er(Er({},t),{},{offset:w.offset,position:o,rect:w.rect}),"menuPortal",{"menu-portal":!0}),a),n);return yr(sle.Provider,{value:x},r?Tl.createPortal(P,r):P)},KLe=function(t){var r=t.isDisabled,n=t.isRtl;return{label:"container",direction:n?"rtl":void 0,pointerEvents:r?"none":void 0,position:"relative"}},XLe=function(t){var r=t.children,n=t.innerProps,i=t.isDisabled,a=t.isRtl;return yr("div",Tr({},na(t,"container",{"--is-disabled":i,"--is-rtl":a}),n),r)},YLe=function(t,r){var n=t.theme.spacing,i=t.isMulti,a=t.hasValue,s=t.selectProps.controlShouldRenderValue;return Er({alignItems:"center",display:i&&a&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},r?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(n.baseUnit*2,"px")})},QLe=function(t){var r=t.children,n=t.innerProps,i=t.isMulti,a=t.hasValue;return yr("div",Tr({},na(t,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":a}),n),r)},JLe=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},ZLe=function(t){var r=t.children,n=t.innerProps;return yr("div",Tr({},na(t,"indicatorsContainer",{indicators:!0}),n),r)},NG,e7e=["size"],t7e=["innerProps","isRtl","size"],r7e={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},lle=function(t){var r=t.size,n=bf(t,e7e);return yr("svg",Tr({height:r,width:r,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:r7e},n))},Y7=function(t){return yr(lle,Tr({size:20},t),yr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},cle=function(t){return yr(lle,Tr({size:20},t),yr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},ule=function(t,r){var n=t.isFocused,i=t.theme,a=i.spacing.baseUnit,s=i.colors;return Er({label:"indicatorContainer",display:"flex",transition:"color 150ms"},r?{}:{color:n?s.neutral60:s.neutral20,padding:a*2,":hover":{color:n?s.neutral80:s.neutral40}})},n7e=ule,i7e=function(t){var r=t.children,n=t.innerProps;return yr("div",Tr({},na(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),r||yr(cle,null))},a7e=ule,s7e=function(t){var r=t.children,n=t.innerProps;return yr("div",Tr({},na(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),r||yr(Y7,null))},o7e=function(t,r){var n=t.isDisabled,i=t.theme,a=i.spacing.baseUnit,s=i.colors;return Er({label:"indicatorSeparator",alignSelf:"stretch",width:1},r?{}:{backgroundColor:n?s.neutral10:s.neutral20,marginBottom:a*2,marginTop:a*2})},l7e=function(t){var r=t.innerProps;return yr("span",Tr({},r,na(t,"indicatorSeparator",{"indicator-separator":!0})))},c7e=JFe(NG||(NG=nLe([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),u7e=function(t,r){var n=t.isFocused,i=t.size,a=t.theme,s=a.colors,o=a.spacing.baseUnit;return Er({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},r?{}:{color:n?s.neutral60:s.neutral20,padding:o*2})},zj=function(t){var r=t.delay,n=t.offset;return yr("span",{css:q7({animation:"".concat(c7e," 1s ease-in-out ").concat(r,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},d7e=function(t){var r=t.innerProps,n=t.isRtl,i=t.size,a=i===void 0?4:i,s=bf(t,t7e);return yr("div",Tr({},na(Er(Er({},s),{},{innerProps:r,isRtl:n,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),r),yr(zj,{delay:0,offset:n}),yr(zj,{delay:160,offset:!0}),yr(zj,{delay:320,offset:!n}))},f7e=function(t,r){var n=t.isDisabled,i=t.isFocused,a=t.theme,s=a.colors,o=a.borderRadius,l=a.spacing;return Er({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},r?{}:{backgroundColor:n?s.neutral5:s.neutral0,borderColor:n?s.neutral10:i?s.primary:s.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:i?s.primary:s.neutral30}})},h7e=function(t){var r=t.children,n=t.isDisabled,i=t.isFocused,a=t.innerRef,s=t.innerProps,o=t.menuIsOpen;return yr("div",Tr({ref:a},na(t,"control",{control:!0,"control--is-disabled":n,"control--is-focused":i,"control--menu-is-open":o}),s,{"aria-disabled":n||void 0}),r)},p7e=h7e,m7e=["data"],g7e=function(t,r){var n=t.theme.spacing;return r?{}:{paddingBottom:n.baseUnit*2,paddingTop:n.baseUnit*2}},x7e=function(t){var r=t.children,n=t.cx,i=t.getStyles,a=t.getClassNames,s=t.Heading,o=t.headingProps,l=t.innerProps,c=t.label,d=t.theme,f=t.selectProps;return yr("div",Tr({},na(t,"group",{group:!0}),l),yr(s,Tr({},o,{selectProps:f,theme:d,getStyles:i,getClassNames:a,cx:n}),c),yr("div",null,r))},v7e=function(t,r){var n=t.theme,i=n.colors,a=n.spacing;return Er({label:"group",cursor:"default",display:"block"},r?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:a.baseUnit*3,paddingRight:a.baseUnit*3,textTransform:"uppercase"})},y7e=function(t){var r=rle(t);r.data;var n=bf(r,m7e);return yr("div",Tr({},na(t,"groupHeading",{"group-heading":!0}),n))},b7e=x7e,w7e=["innerRef","isDisabled","isHidden","inputClassName"],S7e=function(t,r){var n=t.isDisabled,i=t.value,a=t.theme,s=a.spacing,o=a.colors;return Er(Er({visibility:n?"hidden":"visible",transform:i?"translateZ(0)":""},E7e),r?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:o.neutral80})},dle={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},E7e={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Er({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},dle)},C7e=function(t){return Er({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},dle)},k7e=function(t){var r=t.cx,n=t.value,i=rle(t),a=i.innerRef,s=i.isDisabled,o=i.isHidden,l=i.inputClassName,c=bf(i,w7e);return yr("div",Tr({},na(t,"input",{"input-container":!0}),{"data-value":n||""}),yr("input",Tr({className:r({input:!0},l),ref:a,style:C7e(o),disabled:s},c)))},_7e=k7e,N7e=function(t,r){var n=t.theme,i=n.spacing,a=n.borderRadius,s=n.colors;return Er({label:"multiValue",display:"flex",minWidth:0},r?{}:{backgroundColor:s.neutral10,borderRadius:a/2,margin:i.baseUnit/2})},A7e=function(t,r){var n=t.theme,i=n.borderRadius,a=n.colors,s=t.cropWithEllipsis;return Er({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},r?{}:{borderRadius:i/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},T7e=function(t,r){var n=t.theme,i=n.spacing,a=n.borderRadius,s=n.colors,o=t.isFocused;return Er({alignItems:"center",display:"flex"},r?{}:{borderRadius:a/2,backgroundColor:o?s.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},fle=function(t){var r=t.children,n=t.innerProps;return yr("div",n,r)},I7e=fle,O7e=fle;function P7e(e){var t=e.children,r=e.innerProps;return yr("div",Tr({role:"button"},r),t||yr(Y7,{size:14}))}var R7e=function(t){var r=t.children,n=t.components,i=t.data,a=t.innerProps,s=t.isDisabled,o=t.removeProps,l=t.selectProps,c=n.Container,d=n.Label,f=n.Remove;return yr(c,{data:i,innerProps:Er(Er({},na(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),a),selectProps:l},yr(d,{data:i,innerProps:Er({},na(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},r),yr(f,{data:i,innerProps:Er(Er({},na(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(r||"option")},o),selectProps:l}))},j7e=R7e,D7e=function(t,r){var n=t.isDisabled,i=t.isFocused,a=t.isSelected,s=t.theme,o=s.spacing,l=s.colors;return Er({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},r?{}:{backgroundColor:a?l.primary:i?l.primary25:"transparent",color:n?l.neutral20:a?l.neutral0:"inherit",padding:"".concat(o.baseUnit*2,"px ").concat(o.baseUnit*3,"px"),":active":{backgroundColor:n?void 0:a?l.primary:l.primary50}})},M7e=function(t){var r=t.children,n=t.isDisabled,i=t.isFocused,a=t.isSelected,s=t.innerRef,o=t.innerProps;return yr("div",Tr({},na(t,"option",{option:!0,"option--is-disabled":n,"option--is-focused":i,"option--is-selected":a}),{ref:s,"aria-disabled":n},o),r)},F7e=M7e,L7e=function(t,r){var n=t.theme,i=n.spacing,a=n.colors;return Er({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},r?{}:{color:a.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},B7e=function(t){var r=t.children,n=t.innerProps;return yr("div",Tr({},na(t,"placeholder",{placeholder:!0}),n),r)},U7e=B7e,$7e=function(t,r){var n=t.isDisabled,i=t.theme,a=i.spacing,s=i.colors;return Er({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},r?{}:{color:n?s.neutral40:s.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},z7e=function(t){var r=t.children,n=t.isDisabled,i=t.innerProps;return yr("div",Tr({},na(t,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),i),r)},H7e=z7e,W7e={ClearIndicator:s7e,Control:p7e,DropdownIndicator:i7e,DownChevron:cle,CrossIcon:Y7,Group:b7e,GroupHeading:y7e,IndicatorsContainer:ZLe,IndicatorSeparator:l7e,Input:_7e,LoadingIndicator:d7e,Menu:BLe,MenuList:$Le,MenuPortal:GLe,LoadingMessage:VLe,NoOptionsMessage:WLe,MultiValue:j7e,MultiValueContainer:I7e,MultiValueLabel:O7e,MultiValueRemove:P7e,Option:F7e,Placeholder:U7e,SelectContainer:XLe,SingleValue:H7e,ValueContainer:QLe},V7e=function(t){return Er(Er({},W7e),t.components)},AG=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function q7e(e,t){return!!(e===t||AG(e)&&AG(t))}function G7e(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!q7e(e[r],t[r]))return!1;return!0}function K7e(e,t){t===void 0&&(t=G7e);var r=null;function n(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(r&&r.lastThis===this&&t(i,r.lastArgs))return r.lastResult;var s=e.apply(this,i);return r={lastResult:s,lastArgs:i,lastThis:this},s}return n.clear=function(){r=null},n}var X7e={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},Y7e=function(t){return yr("span",Tr({css:X7e},t))},TG=Y7e,Q7e={guidance:function(t){var r=t.isSearchable,n=t.isMulti,i=t.tabSelectsValue,a=t.context,s=t.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(t["aria-label"]||"Select"," is focused ").concat(r?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var r=t.action,n=t.label,i=n===void 0?"":n,a=t.labels,s=t.isDisabled;switch(r){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return s?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(t){var r=t.context,n=t.focused,i=t.options,a=t.label,s=a===void 0?"":a,o=t.selectValue,l=t.isDisabled,c=t.isSelected,d=t.isAppleDevice,f=function(v,b){return v&&v.length?"".concat(v.indexOf(b)+1," of ").concat(v.length):""};if(r==="value"&&o)return"value ".concat(s," focused, ").concat(f(o,n),".");if(r==="menu"&&d){var p=l?" disabled":"",m="".concat(c?" selected":"").concat(p);return"".concat(s).concat(m,", ").concat(f(i,n),".")}return""},onFilter:function(t){var r=t.inputValue,n=t.resultsMessage;return"".concat(n).concat(r?" for search term "+r:"",".")}},J7e=function(t){var r=t.ariaSelection,n=t.focusedOption,i=t.focusedValue,a=t.focusableOptions,s=t.isFocused,o=t.selectValue,l=t.selectProps,c=t.id,d=t.isAppleDevice,f=l.ariaLiveMessages,p=l.getOptionLabel,m=l.inputValue,x=l.isMulti,v=l.isOptionDisabled,b=l.isSearchable,w=l.menuIsOpen,_=l.options,C=l.screenReaderStatus,N=l.tabSelectsValue,R=l.isLoading,P=l["aria-label"],O=l["aria-live"],D=I.useMemo(function(){return Er(Er({},Q7e),f||{})},[f]),M=I.useMemo(function(){var V="";if(r&&D.onChange){var te=r.option,se=r.options,Q=r.removedValue,X=r.removedValues,fe=r.value,Se=function(re){return Array.isArray(re)?null:re},Y=Q||te||Se(fe),ce=Y?p(Y):"",W=se||X||void 0,G=W?W.map(p):[],ie=Er({isDisabled:Y&&v(Y,o),label:ce,labels:G},r);V=D.onChange(ie)}return V},[r,D,v,o,p]),B=I.useMemo(function(){var V="",te=n||i,se=!!(n&&o&&o.includes(n));if(te&&D.onFocus){var Q={focused:te,label:p(te),isDisabled:v(te,o),isSelected:se,options:a,context:te===n?"menu":"value",selectValue:o,isAppleDevice:d};V=D.onFocus(Q)}return V},[n,i,p,v,D,a,o,d]),U=I.useMemo(function(){var V="";if(w&&_.length&&!R&&D.onFilter){var te=C({count:a.length});V=D.onFilter({inputValue:m,resultsMessage:te})}return V},[a,m,w,D,_,C,R]),H=(r==null?void 0:r.action)==="initial-input-focus",Z=I.useMemo(function(){var V="";if(D.guidance){var te=i?"value":w?"menu":"input";V=D.guidance({"aria-label":P,context:te,isDisabled:n&&v(n,o),isMulti:x,isSearchable:b,tabSelectsValue:N,isInitialFocus:H})}return V},[P,n,i,x,v,b,w,D,o,N,H]),ee=yr(I.Fragment,null,yr("span",{id:"aria-selection"},M),yr("span",{id:"aria-focused"},B),yr("span",{id:"aria-results"},U),yr("span",{id:"aria-guidance"},Z));return yr(I.Fragment,null,yr(TG,{id:c},H&&ee),yr(TG,{"aria-live":O,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!H&&ee))},Z7e=J7e,y8=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],e9e=new RegExp("["+y8.map(function(e){return e.letters}).join("")+"]","g"),hle={};for(var Hj=0;Hj<y8.length;Hj++)for(var Wj=y8[Hj],Vj=0;Vj<Wj.letters.length;Vj++)hle[Wj.letters[Vj]]=Wj.base;var ple=function(t){return t.replace(e9e,function(r){return hle[r]})},t9e=K7e(ple),IG=function(t){return t.replace(/^\s+|\s+$/g,"")},r9e=function(t){return"".concat(t.label," ").concat(t.value)},n9e=function(t){return function(r,n){if(r.data.__isNew__)return!0;var i=Er({ignoreCase:!0,ignoreAccents:!0,stringify:r9e,trim:!0,matchFrom:"any"},t),a=i.ignoreCase,s=i.ignoreAccents,o=i.stringify,l=i.trim,c=i.matchFrom,d=l?IG(n):n,f=l?IG(o(r)):o(r);return a&&(d=d.toLowerCase(),f=f.toLowerCase()),s&&(d=t9e(d),f=ple(f)),c==="start"?f.substr(0,d.length)===d:f.indexOf(d)>-1}},i9e=["innerRef"];function a9e(e){var t=e.innerRef,r=bf(e,i9e),n=OLe(r,"onExited","in","enter","exit","appear");return yr("input",Tr({ref:t},n,{css:q7({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var s9e=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()};function o9e(e){var t=e.isEnabled,r=e.onBottomArrive,n=e.onBottomLeave,i=e.onTopArrive,a=e.onTopLeave,s=I.useRef(!1),o=I.useRef(!1),l=I.useRef(0),c=I.useRef(null),d=I.useCallback(function(b,w){if(c.current!==null){var _=c.current,C=_.scrollTop,N=_.scrollHeight,R=_.clientHeight,P=c.current,O=w>0,D=N-R-C,M=!1;D>w&&s.current&&(n&&n(b),s.current=!1),O&&o.current&&(a&&a(b),o.current=!1),O&&w>D?(r&&!s.current&&r(b),P.scrollTop=N,M=!0,s.current=!0):!O&&-w>C&&(i&&!o.current&&i(b),P.scrollTop=0,M=!0,o.current=!0),M&&s9e(b)}},[r,n,i,a]),f=I.useCallback(function(b){d(b,b.deltaY)},[d]),p=I.useCallback(function(b){l.current=b.changedTouches[0].clientY},[]),m=I.useCallback(function(b){var w=l.current-b.changedTouches[0].clientY;d(b,w)},[d]),x=I.useCallback(function(b){if(b){var w=ALe?{passive:!1}:!1;b.addEventListener("wheel",f,w),b.addEventListener("touchstart",p,w),b.addEventListener("touchmove",m,w)}},[m,p,f]),v=I.useCallback(function(b){b&&(b.removeEventListener("wheel",f,!1),b.removeEventListener("touchstart",p,!1),b.removeEventListener("touchmove",m,!1))},[m,p,f]);return I.useEffect(function(){if(t){var b=c.current;return x(b),function(){v(b)}}},[t,x,v]),function(b){c.current=b}}var OG=["boxSizing","height","overflow","paddingRight","position"],PG={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function RG(e){e.cancelable&&e.preventDefault()}function jG(e){e.stopPropagation()}function DG(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function MG(){return"ontouchstart"in window||navigator.maxTouchPoints}var FG=!!(typeof window<"u"&&window.document&&window.document.createElement),Sw=0,k1={capture:!1,passive:!1};function l9e(e){var t=e.isEnabled,r=e.accountForScrollbars,n=r===void 0?!0:r,i=I.useRef({}),a=I.useRef(null),s=I.useCallback(function(l){if(FG){var c=document.body,d=c&&c.style;if(n&&OG.forEach(function(x){var v=d&&d[x];i.current[x]=v}),n&&Sw<1){var f=parseInt(i.current.paddingRight,10)||0,p=document.body?document.body.clientWidth:0,m=window.innerWidth-p+f||0;Object.keys(PG).forEach(function(x){var v=PG[x];d&&(d[x]=v)}),d&&(d.paddingRight="".concat(m,"px"))}c&&MG()&&(c.addEventListener("touchmove",RG,k1),l&&(l.addEventListener("touchstart",DG,k1),l.addEventListener("touchmove",jG,k1))),Sw+=1}},[n]),o=I.useCallback(function(l){if(FG){var c=document.body,d=c&&c.style;Sw=Math.max(Sw-1,0),n&&Sw<1&&OG.forEach(function(f){var p=i.current[f];d&&(d[f]=p)}),c&&MG()&&(c.removeEventListener("touchmove",RG,k1),l&&(l.removeEventListener("touchstart",DG,k1),l.removeEventListener("touchmove",jG,k1)))}},[n]);return I.useEffect(function(){if(t){var l=a.current;return s(l),function(){o(l)}}},[t,s,o]),function(l){a.current=l}}var c9e=function(t){var r=t.target;return r.ownerDocument.activeElement&&r.ownerDocument.activeElement.blur()},u9e={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function d9e(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,i=n===void 0?!0:n,a=e.onBottomArrive,s=e.onBottomLeave,o=e.onTopArrive,l=e.onTopLeave,c=o9e({isEnabled:i,onBottomArrive:a,onBottomLeave:s,onTopArrive:o,onTopLeave:l}),d=l9e({isEnabled:r}),f=function(m){c(m),d(m)};return yr(I.Fragment,null,r&&yr("div",{onClick:c9e,css:u9e}),t(f))}var f9e={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},h9e=function(t){var r=t.name,n=t.onFocus;return yr("input",{required:!0,name:r,tabIndex:-1,"aria-hidden":"true",onFocus:n,css:f9e,value:"",onChange:function(){}})},p9e=h9e;function Q7(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function m9e(){return Q7(/^iPhone/i)}function mle(){return Q7(/^Mac/i)}function g9e(){return Q7(/^iPad/i)||mle()&&navigator.maxTouchPoints>1}function x9e(){return m9e()||g9e()}function v9e(){return mle()||x9e()}var y9e=function(t){return t.label},gle=function(t){return t.label},xle=function(t){return t.value},b9e=function(t){return!!t.isDisabled},w9e={clearIndicator:a7e,container:KLe,control:f7e,dropdownIndicator:n7e,group:g7e,groupHeading:v7e,indicatorsContainer:JLe,indicatorSeparator:o7e,input:S7e,loadingIndicator:u7e,loadingMessage:HLe,menu:MLe,menuList:ULe,menuPortal:qLe,multiValue:N7e,multiValueLabel:A7e,multiValueRemove:T7e,noOptionsMessage:zLe,option:D7e,placeholder:L7e,singleValue:$7e,valueContainer:YLe},S9e={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},E9e=4,vle=4,C9e=38,k9e=vle*2,_9e={baseUnit:vle,controlHeight:C9e,menuGutter:k9e},qj={borderRadius:E9e,colors:S9e,spacing:_9e},N9e={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:_G(),captureMenuScroll:!_G(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:n9e(),formatGroupLabel:y9e,getOptionLabel:gle,getOptionValue:xle,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:b9e,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!_Le(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var r=t.count;return"".concat(r," result").concat(r!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function LG(e,t,r,n){var i=wle(e,t,r),a=Sle(e,t,r),s=ble(e,t),o=fT(e,t);return{type:"option",data:t,isDisabled:i,isSelected:a,label:s,value:o,index:n}}function HN(e,t){return e.options.map(function(r,n){if("options"in r){var i=r.options.map(function(s,o){return LG(e,s,t,o)}).filter(function(s){return UG(e,s)});return i.length>0?{type:"group",data:r,options:i,index:n}:void 0}var a=LG(e,r,t,n);return UG(e,a)?a:void 0}).filter(TLe)}function yle(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,Lo(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function BG(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,Lo(n.options.map(function(i){return{data:i.data,id:"".concat(t,"-").concat(n.index,"-").concat(i.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function A9e(e,t){return yle(HN(e,t))}function UG(e,t){var r=e.inputValue,n=r===void 0?"":r,i=t.data,a=t.isSelected,s=t.label,o=t.value;return(!Cle(e)||!a)&&Ele(e,{label:s,value:o,data:i},n)}function T9e(e,t){var r=e.focusedValue,n=e.selectValue,i=n.indexOf(r);if(i>-1){var a=t.indexOf(r);if(a>-1)return r;if(i<t.length)return t[i]}return null}function I9e(e,t){var r=e.focusedOption;return r&&t.indexOf(r)>-1?r:t[0]}var Gj=function(t,r){var n,i=(n=t.find(function(a){return a.data===r}))===null||n===void 0?void 0:n.id;return i||null},ble=function(t,r){return t.getOptionLabel(r)},fT=function(t,r){return t.getOptionValue(r)};function wle(e,t,r){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,r):!1}function Sle(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=fT(e,t);return r.some(function(i){return fT(e,i)===n})}function Ele(e,t,r){return e.filterOption?e.filterOption(t,r):!0}var Cle=function(t){var r=t.hideSelectedOptions,n=t.isMulti;return r===void 0?n:r},O9e=1,J7=function(e){V5e(r,e);var t=K5e(r);function r(n){var i;if(H5e(this,r),i=t.call(this,n),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.controlRef=null,i.getControlRef=function(l){i.controlRef=l},i.focusedOptionRef=null,i.getFocusedOptionRef=function(l){i.focusedOptionRef=l},i.menuListRef=null,i.getMenuListRef=function(l){i.menuListRef=l},i.inputRef=null,i.getInputRef=function(l){i.inputRef=l},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(l,c){var d=i.props,f=d.onChange,p=d.name;c.name=p,i.ariaOnChange(l,c),f(l,c)},i.setValue=function(l,c,d){var f=i.props,p=f.closeMenuOnSelect,m=f.isMulti,x=f.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:x}),p&&(i.setState({inputIsHiddenAfterUpdate:!m}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(l,{action:c,option:d})},i.selectOption=function(l){var c=i.props,d=c.blurInputOnSelect,f=c.isMulti,p=c.name,m=i.state.selectValue,x=f&&i.isOptionSelected(l,m),v=i.isOptionDisabled(l,m);if(x){var b=i.getOptionValue(l);i.setValue(m.filter(function(w){return i.getOptionValue(w)!==b}),"deselect-option",l)}else if(!v)f?i.setValue([].concat(Lo(m),[l]),"select-option",l):i.setValue(l,"select-option");else{i.ariaOnChange(l,{action:"select-option",option:l,name:p});return}d&&i.blurInput()},i.removeValue=function(l){var c=i.props.isMulti,d=i.state.selectValue,f=i.getOptionValue(l),p=d.filter(function(x){return i.getOptionValue(x)!==f}),m=Gw(c,p,p[0]||null);i.onChange(m,{action:"remove-value",removedValue:l}),i.focusInput()},i.clearValue=function(){var l=i.state.selectValue;i.onChange(Gw(i.props.isMulti,[],null),{action:"clear",removedValues:l})},i.popValue=function(){var l=i.props.isMulti,c=i.state.selectValue,d=c[c.length-1],f=c.slice(0,c.length-1),p=Gw(l,f,f[0]||null);d&&i.onChange(p,{action:"pop-value",removedValue:d})},i.getFocusedOptionId=function(l){return Gj(i.state.focusableOptionsWithIds,l)},i.getFocusableOptionsWithIds=function(){return BG(HN(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];return wLe.apply(void 0,[i.props.classNamePrefix].concat(c))},i.getOptionLabel=function(l){return ble(i.props,l)},i.getOptionValue=function(l){return fT(i.props,l)},i.getStyles=function(l,c){var d=i.props.unstyled,f=w9e[l](c,d);f.boxSizing="border-box";var p=i.props.styles[l];return p?p(f,c):f},i.getClassNames=function(l,c){var d,f;return(d=(f=i.props.classNames)[l])===null||d===void 0?void 0:d.call(f,c)},i.getElementId=function(l){return"".concat(i.state.instancePrefix,"-").concat(l)},i.getComponents=function(){return V7e(i.props)},i.buildCategorizedOptions=function(){return HN(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return yle(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(l,c){i.setState({ariaSelection:Er({value:l},c)})},i.onMenuMouseDown=function(l){l.button===0&&(l.stopPropagation(),l.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(l){i.blockOptionHover=!1},i.onControlMouseDown=function(l){if(!l.defaultPrevented){var c=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&i.onMenuClose():c&&i.openMenu("first"):(c&&(i.openAfterFocus=!0),i.focusInput()),l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&l.preventDefault()}},i.onDropdownIndicatorMouseDown=function(l){if(!(l&&l.type==="mousedown"&&l.button!==0)&&!i.props.isDisabled){var c=i.props,d=c.isMulti,f=c.menuIsOpen;i.focusInput(),f?(i.setState({inputIsHiddenAfterUpdate:!d}),i.onMenuClose()):i.openMenu("first"),l.preventDefault()}},i.onClearIndicatorMouseDown=function(l){l&&l.type==="mousedown"&&l.button!==0||(i.clearValue(),l.preventDefault(),i.openAfterFocus=!1,l.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(l){typeof i.props.closeMenuOnScroll=="boolean"?l.target instanceof HTMLElement&&G4(l.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(l)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(l){var c=l.touches,d=c&&c.item(0);d&&(i.initialTouchX=d.clientX,i.initialTouchY=d.clientY,i.userIsDragging=!1)},i.onTouchMove=function(l){var c=l.touches,d=c&&c.item(0);if(d){var f=Math.abs(d.clientX-i.initialTouchX),p=Math.abs(d.clientY-i.initialTouchY),m=5;i.userIsDragging=f>m||p>m}},i.onTouchEnd=function(l){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(l.target)&&i.menuListRef&&!i.menuListRef.contains(l.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(l){i.userIsDragging||i.onControlMouseDown(l)},i.onClearIndicatorTouchEnd=function(l){i.userIsDragging||i.onClearIndicatorMouseDown(l)},i.onDropdownIndicatorTouchEnd=function(l){i.userIsDragging||i.onDropdownIndicatorMouseDown(l)},i.handleInputChange=function(l){var c=i.props.inputValue,d=l.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(d,{action:"input-change",prevInputValue:c}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(l){i.props.onFocus&&i.props.onFocus(l),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(l){var c=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(l),i.onInputChange("",{action:"input-blur",prevInputValue:c}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(l){if(!(i.blockOptionHover||i.state.focusedOption===l)){var c=i.getFocusableOptions(),d=c.indexOf(l);i.setState({focusedOption:l,focusedOptionId:d>-1?i.getFocusedOptionId(l):null})}},i.shouldHideSelectedOptions=function(){return Cle(i.props)},i.onValueInputFocus=function(l){l.preventDefault(),l.stopPropagation(),i.focus()},i.onKeyDown=function(l){var c=i.props,d=c.isMulti,f=c.backspaceRemovesValue,p=c.escapeClearsValue,m=c.inputValue,x=c.isClearable,v=c.isDisabled,b=c.menuIsOpen,w=c.onKeyDown,_=c.tabSelectsValue,C=c.openMenuOnFocus,N=i.state,R=N.focusedOption,P=N.focusedValue,O=N.selectValue;if(!v&&!(typeof w=="function"&&(w(l),l.defaultPrevented))){switch(i.blockOptionHover=!0,l.key){case"ArrowLeft":if(!d||m)return;i.focusValue("previous");break;case"ArrowRight":if(!d||m)return;i.focusValue("next");break;case"Delete":case"Backspace":if(m)return;if(P)i.removeValue(P);else{if(!f)return;d?i.popValue():x&&i.clearValue()}break;case"Tab":if(i.isComposing||l.shiftKey||!b||!_||!R||C&&i.isOptionSelected(R,O))return;i.selectOption(R);break;case"Enter":if(l.keyCode===229)break;if(b){if(!R||i.isComposing)return;i.selectOption(R);break}return;case"Escape":b?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:m}),i.onMenuClose()):x&&p&&i.clearValue();break;case" ":if(m)return;if(!b){i.openMenu("first");break}if(!R)return;i.selectOption(R);break;case"ArrowUp":b?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":b?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!b)return;i.focusOption("pageup");break;case"PageDown":if(!b)return;i.focusOption("pagedown");break;case"Home":if(!b)return;i.focusOption("first");break;case"End":if(!b)return;i.focusOption("last");break;default:return}l.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++O9e),i.state.selectValue=uT(n.value),n.menuIsOpen&&i.state.selectValue.length){var a=i.getFocusableOptionsWithIds(),s=i.buildFocusableOptions(),o=s.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=a,i.state.focusedOption=s[o],i.state.focusedOptionId=Gj(a,s[o])}return i}return W5e(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&kG(this.menuListRef,this.focusedOptionRef),v9e()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isDisabled,o=a.menuIsOpen,l=this.state.isFocused;(l&&!s&&i.isDisabled||l&&o&&!i.menuIsOpen)&&this.focusInput(),l&&s&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!l&&!s&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(kG(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,a){this.props.onInputChange(i,a)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var a=this,s=this.state,o=s.selectValue,l=s.isFocused,c=this.buildFocusableOptions(),d=i==="first"?0:c.length-1;if(!this.props.isMulti){var f=c.indexOf(o[0]);f>-1&&(d=f)}this.scrollToFocusedOptionOnUpdate=!(l&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:c[d],focusedOptionId:this.getFocusedOptionId(c[d])},function(){return a.onMenuOpen()})}},{key:"focusValue",value:function(i){var a=this.state,s=a.selectValue,o=a.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var l=s.indexOf(o);o||(l=-1);var c=s.length-1,d=-1;if(s.length){switch(i){case"previous":l===0?d=0:l===-1?d=c:d=l-1;break;case"next":l>-1&&l<c&&(d=l+1);break}this.setState({inputIsHidden:d!==-1,focusedValue:s[d]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",a=this.props.pageSize,s=this.state.focusedOption,o=this.getFocusableOptions();if(o.length){var l=0,c=o.indexOf(s);s||(c=-1),i==="up"?l=c>0?c-1:o.length-1:i==="down"?l=(c+1)%o.length:i==="pageup"?(l=c-a,l<0&&(l=0)):i==="pagedown"?(l=c+a,l>o.length-1&&(l=o.length-1)):i==="last"&&(l=o.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:o[l],focusedValue:null,focusedOptionId:this.getFocusedOptionId(o[l])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(qj):Er(Er({},qj),this.props.theme):qj}},{key:"getCommonProps",value:function(){var i=this.clearValue,a=this.cx,s=this.getStyles,o=this.getClassNames,l=this.getValue,c=this.selectOption,d=this.setValue,f=this.props,p=f.isMulti,m=f.isRtl,x=f.options,v=this.hasValue();return{clearValue:i,cx:a,getStyles:s,getClassNames:o,getValue:l,hasValue:v,isMulti:p,isRtl:m,options:x,selectOption:c,selectProps:f,setValue:d,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,a=i.isClearable,s=i.isMulti;return a===void 0?s:a}},{key:"isOptionDisabled",value:function(i,a){return wle(this.props,i,a)}},{key:"isOptionSelected",value:function(i,a){return Sle(this.props,i,a)}},{key:"filterOption",value:function(i,a){return Ele(this.props,i,a)}},{key:"formatOptionLabel",value:function(i,a){if(typeof this.props.formatOptionLabel=="function"){var s=this.props.inputValue,o=this.state.selectValue;return this.props.formatOptionLabel(i,{context:a,inputValue:s,selectValue:o})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,a=i.isDisabled,s=i.isSearchable,o=i.inputId,l=i.inputValue,c=i.tabIndex,d=i.form,f=i.menuIsOpen,p=i.required,m=this.getComponents(),x=m.Input,v=this.state,b=v.inputIsHidden,w=v.ariaSelection,_=this.commonProps,C=o||this.getElementId("input"),N=Er(Er(Er({"aria-autocomplete":"list","aria-expanded":f,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":p,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},f&&{"aria-controls":this.getElementId("listbox")}),!s&&{"aria-readonly":!0}),this.hasValue()?(w==null?void 0:w.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return s?I.createElement(x,Tr({},_,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:C,innerRef:this.getInputRef,isDisabled:a,isHidden:b,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:c,form:d,type:"text",value:l},N)):I.createElement(a9e,Tr({id:C,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:cT,onFocus:this.onInputFocus,disabled:a,tabIndex:c,inputMode:"none",form:d,value:""},N))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,a=this.getComponents(),s=a.MultiValue,o=a.MultiValueContainer,l=a.MultiValueLabel,c=a.MultiValueRemove,d=a.SingleValue,f=a.Placeholder,p=this.commonProps,m=this.props,x=m.controlShouldRenderValue,v=m.isDisabled,b=m.isMulti,w=m.inputValue,_=m.placeholder,C=this.state,N=C.selectValue,R=C.focusedValue,P=C.isFocused;if(!this.hasValue()||!x)return w?null:I.createElement(f,Tr({},p,{key:"placeholder",isDisabled:v,isFocused:P,innerProps:{id:this.getElementId("placeholder")}}),_);if(b)return N.map(function(D,M){var B=D===R,U="".concat(i.getOptionLabel(D),"-").concat(i.getOptionValue(D));return I.createElement(s,Tr({},p,{components:{Container:o,Label:l,Remove:c},isFocused:B,isDisabled:v,key:U,index:M,removeProps:{onClick:function(){return i.removeValue(D)},onTouchEnd:function(){return i.removeValue(D)},onMouseDown:function(Z){Z.preventDefault()}},data:D}),i.formatOptionLabel(D,"value"))});if(w)return null;var O=N[0];return I.createElement(d,Tr({},p,{data:O,isDisabled:v}),this.formatOptionLabel(O,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),a=i.ClearIndicator,s=this.commonProps,o=this.props,l=o.isDisabled,c=o.isLoading,d=this.state.isFocused;if(!this.isClearable()||!a||l||!this.hasValue()||c)return null;var f={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return I.createElement(a,Tr({},s,{innerProps:f,isFocused:d}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),a=i.LoadingIndicator,s=this.commonProps,o=this.props,l=o.isDisabled,c=o.isLoading,d=this.state.isFocused;if(!a||!c)return null;var f={"aria-hidden":"true"};return I.createElement(a,Tr({},s,{innerProps:f,isDisabled:l,isFocused:d}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),a=i.DropdownIndicator,s=i.IndicatorSeparator;if(!a||!s)return null;var o=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused;return I.createElement(s,Tr({},o,{isDisabled:l,isFocused:c}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),a=i.DropdownIndicator;if(!a)return null;var s=this.commonProps,o=this.props.isDisabled,l=this.state.isFocused,c={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return I.createElement(a,Tr({},s,{innerProps:c,isDisabled:o,isFocused:l}))}},{key:"renderMenu",value:function(){var i=this,a=this.getComponents(),s=a.Group,o=a.GroupHeading,l=a.Menu,c=a.MenuList,d=a.MenuPortal,f=a.LoadingMessage,p=a.NoOptionsMessage,m=a.Option,x=this.commonProps,v=this.state.focusedOption,b=this.props,w=b.captureMenuScroll,_=b.inputValue,C=b.isLoading,N=b.loadingMessage,R=b.minMenuHeight,P=b.maxMenuHeight,O=b.menuIsOpen,D=b.menuPlacement,M=b.menuPosition,B=b.menuPortalTarget,U=b.menuShouldBlockScroll,H=b.menuShouldScrollIntoView,Z=b.noOptionsMessage,ee=b.onMenuScrollToTop,V=b.onMenuScrollToBottom;if(!O)return null;var te=function(ce,W){var G=ce.type,ie=ce.data,Ce=ce.isDisabled,re=ce.isSelected,ne=ce.label,ge=ce.value,we=v===ie,q=Ce?void 0:function(){return i.onOptionHover(ie)},Ae=Ce?void 0:function(){return i.selectOption(ie)},Pe="".concat(i.getElementId("option"),"-").concat(W),He={id:Pe,onClick:Ae,onMouseMove:q,onMouseOver:q,tabIndex:-1,role:"option","aria-selected":i.state.isAppleDevice?void 0:re};return I.createElement(m,Tr({},x,{innerProps:He,data:ie,isDisabled:Ce,isSelected:re,key:Pe,label:ne,type:G,value:ge,isFocused:we,innerRef:we?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(ce.data,"menu"))},se;if(this.hasOptions())se=this.getCategorizedOptions().map(function(Y){if(Y.type==="group"){var ce=Y.data,W=Y.options,G=Y.index,ie="".concat(i.getElementId("group"),"-").concat(G),Ce="".concat(ie,"-heading");return I.createElement(s,Tr({},x,{key:ie,data:ce,options:W,Heading:o,headingProps:{id:Ce,data:Y.data},label:i.formatGroupLabel(Y.data)}),Y.options.map(function(re){return te(re,"".concat(G,"-").concat(re.index))}))}else if(Y.type==="option")return te(Y,"".concat(Y.index))});else if(C){var Q=N({inputValue:_});if(Q===null)return null;se=I.createElement(f,x,Q)}else{var X=Z({inputValue:_});if(X===null)return null;se=I.createElement(p,x,X)}var fe={minMenuHeight:R,maxMenuHeight:P,menuPlacement:D,menuPosition:M,menuShouldScrollIntoView:H},Se=I.createElement(FLe,Tr({},x,fe),function(Y){var ce=Y.ref,W=Y.placerProps,G=W.placement,ie=W.maxHeight;return I.createElement(l,Tr({},x,fe,{innerRef:ce,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:C,placement:G}),I.createElement(d9e,{captureEnabled:w,onTopArrive:ee,onBottomArrive:V,lockEnabled:U},function(Ce){return I.createElement(c,Tr({},x,{innerRef:function(ne){i.getMenuListRef(ne),Ce(ne)},innerProps:{role:"listbox","aria-multiselectable":x.isMulti,id:i.getElementId("listbox")},isLoading:C,maxHeight:ie,focusedOption:v}),se)}))});return B||M==="fixed"?I.createElement(d,Tr({},x,{appendTo:B,controlElement:this.controlRef,menuPlacement:D,menuPosition:M}),Se):Se}},{key:"renderFormField",value:function(){var i=this,a=this.props,s=a.delimiter,o=a.isDisabled,l=a.isMulti,c=a.name,d=a.required,f=this.state.selectValue;if(d&&!this.hasValue()&&!o)return I.createElement(p9e,{name:c,onFocus:this.onValueInputFocus});if(!(!c||o))if(l)if(s){var p=f.map(function(v){return i.getOptionValue(v)}).join(s);return I.createElement("input",{name:c,type:"hidden",value:p})}else{var m=f.length>0?f.map(function(v,b){return I.createElement("input",{key:"i-".concat(b),name:c,type:"hidden",value:i.getOptionValue(v)})}):I.createElement("input",{name:c,type:"hidden",value:""});return I.createElement("div",null,m)}else{var x=f[0]?this.getOptionValue(f[0]):"";return I.createElement("input",{name:c,type:"hidden",value:x})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,a=this.state,s=a.ariaSelection,o=a.focusedOption,l=a.focusedValue,c=a.isFocused,d=a.selectValue,f=this.getFocusableOptions();return I.createElement(Z7e,Tr({},i,{id:this.getElementId("live-region"),ariaSelection:s,focusedOption:o,focusedValue:l,isFocused:c,selectValue:d,focusableOptions:f,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),a=i.Control,s=i.IndicatorsContainer,o=i.SelectContainer,l=i.ValueContainer,c=this.props,d=c.className,f=c.id,p=c.isDisabled,m=c.menuIsOpen,x=this.state.isFocused,v=this.commonProps=this.getCommonProps();return I.createElement(o,Tr({},v,{className:d,innerProps:{id:f,onKeyDown:this.onKeyDown},isDisabled:p,isFocused:x}),this.renderLiveRegion(),I.createElement(a,Tr({},v,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:p,isFocused:x,menuIsOpen:m}),I.createElement(l,Tr({},v,{isDisabled:p}),this.renderPlaceholderOrValue(),this.renderInput()),I.createElement(s,Tr({},v,{isDisabled:p}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,a){var s=a.prevProps,o=a.clearFocusValueOnUpdate,l=a.inputIsHiddenAfterUpdate,c=a.ariaSelection,d=a.isFocused,f=a.prevWasFocused,p=a.instancePrefix,m=i.options,x=i.value,v=i.menuIsOpen,b=i.inputValue,w=i.isMulti,_=uT(x),C={};if(s&&(x!==s.value||m!==s.options||v!==s.menuIsOpen||b!==s.inputValue)){var N=v?A9e(i,_):[],R=v?BG(HN(i,_),"".concat(p,"-option")):[],P=o?T9e(a,_):null,O=I9e(a,N),D=Gj(R,O);C={selectValue:_,focusedOption:O,focusedOptionId:D,focusableOptionsWithIds:R,focusedValue:P,clearFocusValueOnUpdate:!1}}var M=l!=null&&i!==s?{inputIsHidden:l,inputIsHiddenAfterUpdate:void 0}:{},B=c,U=d&&f;return d&&!U&&(B={value:Gw(w,_,_[0]||null),options:_,action:"initial-input-focus"},U=!f),(c==null?void 0:c.action)==="initial-input-focus"&&(B=null),Er(Er(Er({},C),M),{},{prevProps:i,ariaSelection:B,prevWasFocused:U})}}]),r}(I.Component);J7.defaultProps=N9e;var P9e=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function kle(e){var t=e.defaultInputValue,r=t===void 0?"":t,n=e.defaultMenuIsOpen,i=n===void 0?!1:n,a=e.defaultValue,s=a===void 0?null:a,o=e.inputValue,l=e.menuIsOpen,c=e.onChange,d=e.onInputChange,f=e.onMenuClose,p=e.onMenuOpen,m=e.value,x=bf(e,P9e),v=I.useState(o!==void 0?o:r),b=xh(v,2),w=b[0],_=b[1],C=I.useState(l!==void 0?l:i),N=xh(C,2),R=N[0],P=N[1],O=I.useState(m!==void 0?m:s),D=xh(O,2),M=D[0],B=D[1],U=I.useCallback(function(Q,X){typeof c=="function"&&c(Q,X),B(Q)},[c]),H=I.useCallback(function(Q,X){var fe;typeof d=="function"&&(fe=d(Q,X)),_(fe!==void 0?fe:Q)},[d]),Z=I.useCallback(function(){typeof p=="function"&&p(),P(!0)},[p]),ee=I.useCallback(function(){typeof f=="function"&&f(),P(!1)},[f]),V=o!==void 0?o:w,te=l!==void 0?l:R,se=m!==void 0?m:M;return Er(Er({},x),{},{inputValue:V,menuIsOpen:te,onChange:U,onInputChange:H,onMenuClose:ee,onMenuOpen:Z,value:se})}var R9e=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],$G=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=String(t).toLowerCase(),a=String(n.getOptionValue(r)).toLowerCase(),s=String(n.getOptionLabel(r)).toLowerCase();return a===i||s===i},Kj={formatCreateLabel:function(t){return'Create "'.concat(t,'"')},isValidNewOption:function(t,r,n,i){return!(!t||r.some(function(a){return $G(t,a,i)})||n.some(function(a){return $G(t,a,i)}))},getNewOptionData:function(t,r){return{label:r,value:t,__isNew__:!0}}};function j9e(e){var t=e.allowCreateWhileLoading,r=t===void 0?!1:t,n=e.createOptionPosition,i=n===void 0?"last":n,a=e.formatCreateLabel,s=a===void 0?Kj.formatCreateLabel:a,o=e.isValidNewOption,l=o===void 0?Kj.isValidNewOption:o,c=e.getNewOptionData,d=c===void 0?Kj.getNewOptionData:c,f=e.onCreateOption,p=e.options,m=p===void 0?[]:p,x=e.onChange,v=bf(e,R9e),b=v.getOptionValue,w=b===void 0?xle:b,_=v.getOptionLabel,C=_===void 0?gle:_,N=v.inputValue,R=v.isLoading,P=v.isMulti,O=v.value,D=v.name,M=I.useMemo(function(){return l(N,uT(O),m,{getOptionValue:w,getOptionLabel:C})?d(N,s(N)):void 0},[s,d,C,w,N,l,m,O]),B=I.useMemo(function(){return(r||!R)&&M?i==="first"?[M].concat(Lo(m)):[].concat(Lo(m),[M]):m},[r,i,R,M,m]),U=I.useCallback(function(H,Z){if(Z.action!=="select-option")return x(H,Z);var ee=Array.isArray(H)?H:[H];if(ee[ee.length-1]===M){if(f)f(N);else{var V=d(N,N),te={action:"create-option",name:D,option:V};x(Gw(P,[].concat(Lo(uT(O)),[V]),V),te)}return}x(H,Z)},[d,N,P,D,M,f,x,O]);return Er(Er({},v),{},{options:B,onChange:U})}var D9e=I.forwardRef(function(e,t){var r=kle(e),n=j9e(r);return I.createElement(J7,Tr({ref:t},n))}),wS=D9e;const iC=()=>sr("/api/products"),_le=()=>sr("/api/import/aliases"),M9e=async()=>{const e=await fetch(_le());if(!e.ok)throw new Error("Failed to fetch size aliases.");return e.json()},F9e=async(e,t)=>{const r=await fetch(_le(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({aliasText:e,mappedSize:t})});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to save alias.")}return r.json()},L9e=async()=>{const e=await fetch(`${iC()}/sizes`);if(!e.ok)throw new Error("Failed to fetch unique sizes.");return e.json()},Z7=async()=>{const e=await fetch(`${iC()}/sizes/stats`);if(!e.ok){const t=await e.text();throw new Error(`Error ${e.status}: ${t||e.statusText}`)}return e.json()},B9e=async(e,t)=>{const r=await fetch(`${iC()}/sizes`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldValue:e,newValue:t})});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to update size value.")}return r.json()},U9e=async e=>{const t=await fetch(`${iC()}/sizes`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:e})});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to delete size value.")}return t.json()},$9e=async e=>{const t=await fetch(`${iC()}/sizes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:e})});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to create size.")}},Nle=e=>{const t=ja(),r=Ir({mutationFn:Hse,onSuccess:()=>{t.invalidateQueries({queryKey:["vendors"]}),Re.success("Vendor created."),e==null||e()},onError:a=>Re.error(`Creation failed: ${a.message}`)}),n=Ir({mutationFn:Wse,onSuccess:()=>{t.invalidateQueries({queryKey:["vendors"]}),Re.success("Vendor updated."),e==null||e()},onError:a=>Re.error(`Update failed: ${a.message}`)}),i=Ir({mutationFn:Vse,onSuccess:()=>{t.invalidateQueries({queryKey:["vendors"]}),Re.success("Vendor deleted successfully."),e==null||e()},onError:a=>Re.error(`Deletion failed: ${a.message}`)});return{createVendor:r,updateVendor:n,deleteVendor:i}},z9e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],H9e=e=>{if(!e)return e;const t=e.replace(/[^\d]/g,""),r=t.length;return r<4?t:r<7?`(${t.slice(0,3)}) ${t.slice(3)}`:`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,10)}`},hb=({isOpen:e,onClose:t,vendorToEdit:r,initialVendorType:n})=>{var N;const{data:i}=Ioe(),{data:a=[]}=w4(),{createVendor:s,updateVendor:o,deleteVendor:l}=Nle(t),c=s.isPending||o.isPending,d=l.isPending,[f,p]=I.useState({name:"",vendorType:"Supplier",defaultSupplierId:null,defaultProductType:null,websiteUrl:"",portalUrl:"",address:"",phone:"",orderingEmail:"",claimsEmail:"",repName:"",repPhone:"",repEmail:"",defaultMarkup:null,pricingMethod:null,shippingMethod:"",dedicatedShippingDay:null,notes:""});I.useEffect(()=>{const R={name:"",vendorType:"Supplier",defaultSupplierId:null,defaultProductType:null,websiteUrl:"",portalUrl:"",address:"",phone:"",orderingEmail:"",claimsEmail:"",repName:"",repPhone:"",repEmail:"",defaultMarkup:null,pricingMethod:null,shippingMethod:"",dedicatedShippingDay:null,notes:""};r?p({name:r.name||"",vendorType:r.vendorType||null,defaultSupplierId:r.defaultSupplierId||null,defaultProductType:r.defaultProductType||null,websiteUrl:r.websiteUrl||"",portalUrl:r.portalUrl||"",address:r.address||"",phone:r.phone||"",orderingEmail:r.orderingEmail||"",claimsEmail:r.claimsEmail||"",repName:r.repName||"",repPhone:r.repPhone||"",repEmail:r.repEmail||"",defaultMarkup:r.defaultMarkup??null,pricingMethod:r.pricingMethod??null,shippingMethod:r.shippingMethod||"",dedicatedShippingDay:r.dedicatedShippingDay??null,notes:r.notes||""}):(n&&(R.vendorType=n),p(R))},[r,e,n]);const m=R=>{const{name:P,value:O,type:D}=R.target;if(P==="phone"||P==="repPhone"){const M=O.replace(/[^\d]/g,"");M.length<=10&&p(B=>({...B,[P]:H9e(M)}));return}if(D==="checkbox"){const M=R.target.checked;p(B=>({...B,[P]:M}))}else p(P==="dedicatedShippingDay"||P==="defaultProductType"||P==="vendorType"?M=>({...M,[P]:O===""?null:O}):P==="defaultMarkup"?M=>({...M,[P]:O===""?null:parseFloat(O)}):P==="pricingMethod"?M=>({...M,[P]:O===""?null:O}):M=>({...M,[P]:O}))},x=R=>{R.preventDefault();const P={...f,defaultSupplierId:f.vendorType==="Manufacturer"?f.defaultSupplierId:null};r?o.mutate({...r,...P}):s.mutate(P)},v=()=>{r&&window.confirm(`Are you sure you want to delete vendor "${r.name}"? This action cannot be undone.`)&&l.mutate(r.id)},b=a.filter(R=>(R.vendorType==="Supplier"||R.vendorType==="Both")&&R.id!==(r==null?void 0:r.id)),w=R=>{const P=R.target.value,O=P===""?null:parseInt(P),D=a.find(M=>M.id===O);p(M=>({...M,defaultSupplierId:O,shippingMethod:(D==null?void 0:D.shippingMethod)||M.shippingMethod,dedicatedShippingDay:(D==null?void 0:D.dedicatedShippingDay)??M.dedicatedShippingDay}))},_=()=>{const R=a.find(P=>P.id===f.defaultSupplierId);R&&(p(P=>({...P,address:R.address||P.address,phone:R.phone||P.phone,orderingEmail:R.orderingEmail||P.orderingEmail,claimsEmail:R.claimsEmail||P.claimsEmail,repName:R.repName||P.repName,repPhone:R.repPhone||P.repPhone,repEmail:R.repEmail||P.repEmail,websiteUrl:R.websiteUrl||P.websiteUrl,portalUrl:R.portalUrl||P.portalUrl,shippingMethod:R.shippingMethod||P.shippingMethod,dedicatedShippingDay:R.dedicatedShippingDay??P.dedicatedShippingDay})),Re.success(`Copied contact info from ${R.name}`))};if(!e)return null;const C="w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary placeholder:text-text-tertiary focus:outline-none focus:border-primary transition-colors";return u.jsx("div",{className:"fixed inset-0 bg-black/75 z-[60] overflow-y-auto",children:u.jsx("div",{className:"flex min-h-full items-center justify-center p-0 lg:p-4",children:u.jsxs("div",{className:"bg-surface-container-high w-full min-h-full lg:min-h-0 lg:h-auto lg:max-h-[90vh] lg:max-w-4xl lg:rounded-2xl shadow-2xl flex flex-col border border-outline/10 relative",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center bg-surface-container-low lg:rounded-t-2xl sticky top-0 z-10",children:[u.jsxs("h2",{className:"text-xl font-bold text-text-primary flex items-center gap-2",children:[u.jsx(Jg,{className:"text-primary"}),r?"Edit Vendor":"New Vendor"]}),u.jsx("button",{onClick:t,className:"p-2 hover:bg-surface-container-highest rounded-full text-text-secondary hover:text-text-primary transition-colors",children:u.jsx(Gr,{size:24})})]}),u.jsxs("form",{onSubmit:x,className:"flex flex-col flex-grow",children:[u.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 overflow-y-auto flex-grow",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-text-tertiary border-b border-outline/10 pb-2",children:"Contact Info"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Vendor Name"}),u.jsx("input",{type:"text",name:"name",value:f.name,onChange:m,className:C,required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Vendor Type"}),u.jsxs("select",{name:"vendorType",value:f.vendorType??"",onChange:m,className:C,children:[u.jsx("option",{value:"Supplier",children:"Supplier"}),u.jsx("option",{value:"Manufacturer",children:"Manufacturer"}),u.jsx("option",{value:"Both",children:"Both"})]})]}),f.vendorType==="Manufacturer"&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Default Supplier / Distributor"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("select",{name:"defaultSupplierId",value:f.defaultSupplierId??"",onChange:w,className:C,children:[u.jsx("option",{value:"",children:"Select a Supplier..."}),b.map(R=>u.jsx("option",{value:R.id,children:R.name},R.id))]}),f.defaultSupplierId&&u.jsx("button",{type:"button",onClick:_,className:"p-3 bg-primary-container text-primary rounded-lg hover:bg-primary hover:text-on-primary transition-all shadow-sm",title:"Copy Address/Phone/Email from Supplier",children:u.jsx(P7,{size:20})})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Default Product Type"}),u.jsxs("select",{name:"defaultProductType",value:f.defaultProductType??"",onChange:m,className:C,children:[u.jsx("option",{value:"",children:"None"}),dy.map(R=>u.jsx("option",{value:R,children:R},R))]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1 flex items-center gap-1.5",children:[u.jsx(Zg,{size:12})," Website"]}),u.jsx("input",{type:"url",name:"websiteUrl",value:f.websiteUrl,onChange:m,placeholder:"https://...",className:C})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1 flex items-center gap-1.5",children:[u.jsx(Ux,{size:12})," Portal"]}),u.jsx("input",{type:"url",name:"portalUrl",value:f.portalUrl,onChange:m,placeholder:"https://...",className:C})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Main Phone"}),u.jsx("input",{type:"tel",name:"phone",value:f.phone,onChange:m,className:C})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Ordering Email"}),u.jsx("input",{type:"email",name:"orderingEmail",value:f.orderingEmail,onChange:m,className:C})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Claims Email"}),u.jsx("input",{type:"email",name:"claimsEmail",value:f.claimsEmail,onChange:m,className:C})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Address"}),u.jsx("textarea",{name:"address",value:f.address,onChange:m,rows:2,className:C})]})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-text-tertiary border-b border-outline/10 pb-2",children:"Representative"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Rep Name"}),u.jsx("input",{type:"text",name:"repName",value:f.repName,onChange:m,className:C})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Rep Phone"}),u.jsx("input",{type:"tel",name:"repPhone",value:f.repPhone,onChange:m,className:C})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Rep Email"}),u.jsx("input",{type:"email",name:"repEmail",value:f.repEmail,onChange:m,className:C})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-text-tertiary border-b border-outline/10 pb-2",children:"Shipping"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Shipping Method"}),u.jsx("input",{type:"text",name:"shippingMethod",value:f.shippingMethod,placeholder:"LTL, UPS, etc.",onChange:m,className:C})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Delivery Day"}),u.jsxs("select",{name:"dedicatedShippingDay",value:f.dedicatedShippingDay??"",onChange:m,className:C,children:[u.jsx("option",{value:"",children:"None"}),z9e.map((R,P)=>u.jsx("option",{value:P,children:R},P))]})]})]}),u.jsxs("div",{className:"bg-surface-container-low p-4 rounded-xl border border-outline/10 space-y-4",children:[u.jsx("h4",{className:"text-xs font-bold uppercase tracking-wider text-text-tertiary border-b border-outline/10 pb-2",children:"Pricing Overrides"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Markup %"}),u.jsx("input",{type:"number",name:"defaultMarkup",value:f.defaultMarkup??"",placeholder:"Use Global",onChange:m,className:C.replace("bg-surface-container-highest","bg-surface-container-high")})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Method"}),u.jsxs("select",{name:"pricingMethod",value:f.pricingMethod??"",onChange:m,className:C.replace("bg-surface-container-highest","bg-surface-container-high"),children:[u.jsx("option",{value:"",children:"Use Global"}),u.jsx("option",{value:"Markup",children:"Markup"}),u.jsx("option",{value:"Margin",children:"Margin"})]})]})]})]}),u.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[u.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-text-tertiary border-b border-outline/10 pb-2",children:"Internal Notes"}),u.jsx("textarea",{name:"notes",value:f.notes,onChange:m,className:`${C} flex-grow min-h-[300px] resize-none`,placeholder:"Add any specific details about ordering, shipping windows, or claims processes..."})]})]}),u.jsxs("div",{className:"p-4 border-t border-outline/10 bg-surface-container-low lg:rounded-b-2xl flex justify-end gap-3 shrink-0 sticky bottom-0 z-10 lg:static",children:[r&&((N=i==null?void 0:i.roles)==null?void 0:N.includes("Admin"))&&u.jsxs("button",{type:"button",onClick:v,disabled:d,className:"py-2 px-6 bg-error-container hover:bg-error/20 text-error rounded-full font-semibold flex items-center gap-2 disabled:opacity-50 transition-colors mr-auto",children:[u.jsx(Bs,{size:16}),u.jsx("span",{children:d?"Deleting...":"Delete"})]}),u.jsx("button",{type:"button",onClick:t,className:"py-2 px-6 bg-surface hover:bg-surface-container-highest border border-outline/20 rounded-full text-text-primary font-medium transition-colors",children:"Cancel"}),u.jsx("button",{type:"submit",className:"py-2 px-6 bg-primary hover:bg-primary-hover rounded-full text-on-primary font-semibold shadow-md transition-all",disabled:c,children:c?r?"Saving...":"Creating...":r?"Save Changes":"Create Vendor"})]})]})]})})})},vh=(e,t,r)=>{if(e<0||t<0)return 0;if(r==="Markup")return e*(1+t/100);{const n=t/100;return n>=1?0:e/(1-n)}},yh=(e,t,r="Customer")=>e&&e.defaultMarkup!==null&&e.defaultMarkup!==void 0?{percentage:Number(e.defaultMarkup),method:e.pricingMethod||t.calculationMethod}:r==="Installer"?{percentage:t.contractorMarkup,method:t.calculationMethod}:{percentage:t.retailMarkup,method:t.calculationMethod},zm=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),Ale=({data:e,qrUrl:t})=>u.jsxs("div",{className:"border-2 border-black w-full h-auto p-2 flex flex-col box-border bg-white text-black break-inside-avoid overflow-hidden",children:[u.jsxs("div",{className:"border-b-2 border-black pb-0.5 mb-1 shrink-0",children:[u.jsx("h2",{className:"text-[10px] font-bold uppercase tracking-wide text-gray-600 leading-none",children:e.manufacturer}),u.jsx("h1",{className:"text-xl font-black leading-none mt-0.5 truncate tracking-tight",children:e.name}),e.subName&&u.jsx("h3",{className:"text-base font-bold leading-none mt-0.5 text-gray-900 truncate",children:e.subName})]}),u.jsxs("div",{className:"flex gap-2 items-start",children:[u.jsx("div",{className:"w-1/3 flex-shrink-0",children:u.jsx("img",{src:t,alt:"QR",className:"w-full h-auto object-contain rendering-pixelated"})}),u.jsxs("div",{className:"flex-1 flex flex-col gap-0.5",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[e.sku?u.jsxs("div",{children:[u.jsx("span",{className:"font-bold block text-[10px] uppercase text-gray-500 leading-none mb-0.5",children:"SKU"}),u.jsx("span",{className:"font-mono font-bold text-sm leading-none",children:e.sku})]}):u.jsx("div",{}),e.size&&u.jsxs("div",{className:"text-right",children:[u.jsx("span",{className:"font-bold block text-[10px] uppercase text-gray-500 leading-none mb-0.5",children:"Size"}),u.jsx("span",{className:"font-bold text-sm leading-none",children:e.size})]})]}),(e.retailPrice||e.cartonSize)&&u.jsx("div",{className:"border-t border-gray-300 my-0.5"}),(e.retailPrice||e.cartonSize)&&u.jsxs("div",{className:"flex justify-between items-end",children:[e.retailPrice&&u.jsxs("div",{children:[u.jsx("span",{className:"font-bold block text-[10px] uppercase text-gray-500 leading-none mb-0.5",children:"Retail"}),u.jsxs("div",{className:"flex items-baseline gap-0.5",children:[u.jsxs("span",{className:"text-xl font-black leading-none tracking-tighter",children:["$",e.retailPrice.toFixed(2)]}),u.jsxs("span",{className:"text-[10px] font-bold text-gray-500",children:["/",e.pricingUnit||e.uom||"Unit"]})]})]}),e.cartonSize&&u.jsxs("div",{className:"text-right",children:[u.jsx("span",{className:"font-bold block text-[10px] uppercase text-gray-500 leading-none mb-0.5",children:"Carton"}),u.jsxs("span",{className:"font-bold text-sm leading-none",children:[e.cartonSize," ",e.uom]})]})]})]})]})]});var Tle={exports:{}};(function(e,t){(function(r,n){e.exports=n(I)})(typeof self<"u"?self:Ve,function(r){return function(){var n={155:function(_){_.exports=r}},i={};function a(_){var C=i[_];if(C!==void 0)return C.exports;var N=i[_]={exports:{}};return n[_](N,N.exports,a),N.exports}a.d=function(_,C){for(var N in C)a.o(C,N)&&!a.o(_,N)&&Object.defineProperty(_,N,{enumerable:!0,get:C[N]})},a.o=function(_,C){return Object.prototype.hasOwnProperty.call(_,C)},a.r=function(_){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})};var s={};a.r(s),a.d(s,{useReactToPrint:function(){return w}});var o=a(155);const l="printWindow";function c({level:_="error",messages:C,suppressErrors:N=!1}){N||(_==="error"?console.error(C):_==="warning"?console.warn(C):console.debug(C))}function d(_,C){if(C||!_){const N=document.getElementById(l);N&&document.body.removeChild(N)}}function f(_){return _ instanceof Error?_:new Error("Unknown Error")}function p(_,C){const{documentTitle:N,onAfterPrint:R,onPrintError:P,preserveAfterPrint:O,print:D,suppressErrors:M}=C;setTimeout(()=>{var B,U;if(_.contentWindow){let H=function(){R==null||R(),d(O)};if(_.contentWindow.focus(),D)D(_).then(H).catch(Z=>{P?P("print",f(Z)):c({messages:["An error was thrown by the specified `print` function"],suppressErrors:M})});else{if(_.contentWindow.print){const Z=(U=(B=_.contentDocument)===null||B===void 0?void 0:B.title)!==null&&U!==void 0?U:"",ee=_.ownerDocument.title;N&&(_.ownerDocument.title=N,_.contentDocument&&(_.contentDocument.title=N)),_.contentWindow.print(),N&&(_.ownerDocument.title=ee,_.contentDocument&&(_.contentDocument.title=Z))}else c({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:M});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(Z=>{var ee,V;return((V=(ee=navigator.userAgent)!==null&&ee!==void 0?ee:navigator.vendor)!==null&&V!==void 0?V:"opera"in window&&window.opera).match(Z)})?setTimeout(H,500):H()}}else c({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:M})},500)}function m(_){const C=[],N=document.createTreeWalker(_,NodeFilter.SHOW_ELEMENT,null);let R=N.nextNode();for(;R;)C.push(R),R=N.nextNode();return C}function x(_,C,N){const R=m(_),P=m(C);if(R.length===P.length)for(let O=0;O<R.length;O++){const D=R[O],M=P[O],B=D.shadowRoot;if(B!==null){const U=M.attachShadow({mode:B.mode});U.innerHTML=B.innerHTML,x(B,U,N)}}else c({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",_,C],suppressErrors:N})}const v=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function b(_,C,N,R){var P,O,D,M,B;const{contentNode:U,clonedContentNode:H,clonedImgNodes:Z,clonedVideoNodes:ee,numResourcesToLoad:V,originalCanvasNodes:te}=N,{bodyClass:se,fonts:Q,ignoreGlobalStyles:X,pageStyle:fe,nonce:Se,suppressErrors:Y,copyShadowRoots:ce}=R;_.onload=null;const W=(P=_.contentDocument)!==null&&P!==void 0?P:(O=_.contentWindow)===null||O===void 0?void 0:O.document;if(W){const G=W.body.appendChild(H);ce&&x(U,G,!!Y),Q&&(!((D=_.contentDocument)===null||D===void 0)&&D.fonts&&(!((M=_.contentWindow)===null||M===void 0)&&M.FontFace)?Q.forEach(q=>{const Ae=new FontFace(q.family,q.source,{weight:q.weight,style:q.style});_.contentDocument.fonts.add(Ae),Ae.loaded.then(()=>{C(Ae)}).catch(Pe=>{C(Ae,["Failed loading the font:",Ae,"Load error:",f(Pe)])})}):(Q.forEach(q=>{C(q)}),c({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:Y})));const ie=fe??v,Ce=W.createElement("style");Se&&(Ce.setAttribute("nonce",Se),W.head.setAttribute("nonce",Se)),Ce.appendChild(W.createTextNode(ie)),W.head.appendChild(Ce),se&&W.body.classList.add(...se.split(" "));const re=W.querySelectorAll("canvas");for(let q=0;q<te.length;++q){const Ae=te[q],Pe=re[q];if(Pe===void 0){c({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",Ae],suppressErrors:Y});continue}const He=Pe.getContext("2d");He&&He.drawImage(Ae,0,0)}for(let q=0;q<Z.length;q++){const Ae=Z[q],Pe=Ae.getAttribute("src");if(Pe){const He=new Image;He.onload=()=>{C(Ae)},He.onerror=(je,$e,Ze,lt,kt)=>{C(Ae,["Error loading <img>",Ae,"Error",kt])},He.src=Pe}else C(Ae,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',Ae])}for(let q=0;q<ee.length;q++){const Ae=ee[q];Ae.preload="auto";const Pe=Ae.getAttribute("poster");if(Pe){const He=new Image;He.onload=()=>{C(Ae)},He.onerror=(je,$e,Ze,lt,kt)=>{C(Ae,["Error loading video poster",Pe,"for video",Ae,"Error:",kt])},He.src=Pe}else Ae.readyState>=2?C(Ae):Ae.src?(Ae.onloadeddata=()=>{C(Ae)},Ae.onerror=(He,je,$e,Ze,lt)=>{C(Ae,["Error loading video",Ae,"Error",lt])},Ae.onstalled=()=>{C(Ae,["Loading video stalled, skipping",Ae])}):C(Ae,["Error loading video, `src` is empty",Ae])}const ne="select",ge=U.querySelectorAll(ne),we=W.querySelectorAll(ne);for(let q=0;q<ge.length;q++)we[q].value=ge[q].value;if(!X){const q=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let Ae=0,Pe=q.length;Ae<Pe;++Ae){const He=q[Ae];if(He.tagName.toLowerCase()==="style"){const je=W.createElement(He.tagName),$e=He.sheet;if($e){let Ze="";try{const lt=$e.cssRules.length;for(let kt=0;kt<lt;++kt)typeof $e.cssRules[kt].cssText=="string"&&(Ze+=`${$e.cssRules[kt].cssText}\r
`)}catch(lt){c({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",He,`Original error: ${f(lt).message}`],level:"warning"})}je.setAttribute("id",`react-to-print-${Ae}`),Se&&je.setAttribute("nonce",Se),je.appendChild(W.createTextNode(Ze)),W.head.appendChild(je)}}else if(He.getAttribute("href"))if(He.hasAttribute("disabled"))c({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",He],level:"warning"}),C(He);else{const je=W.createElement(He.tagName);for(let $e=0,Ze=He.attributes.length;$e<Ze;++$e){const lt=He.attributes[$e];lt&&je.setAttribute(lt.nodeName,(B=lt.nodeValue)!==null&&B!==void 0?B:"")}je.onload=()=>{C(je)},je.onerror=($e,Ze,lt,kt,ht)=>{C(je,["Failed to load",je,"Error:",ht])},Se&&je.setAttribute("nonce",Se),W.head.appendChild(je)}else c({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",He],level:"warning"}),C(He)}}}V===0&&p(_,R)}function w({bodyClass:_,contentRef:C,copyShadowRoots:N,documentTitle:R,fonts:P,ignoreGlobalStyles:O,nonce:D,onAfterPrint:M,onBeforePrint:B,onPrintError:U,pageStyle:H,preserveAfterPrint:Z,print:ee,printIframeProps:V,suppressErrors:te}){return(0,o.useCallback)(Q=>{function X(){const fe={bodyClass:_,contentRef:C,copyShadowRoots:N,documentTitle:R,fonts:P,ignoreGlobalStyles:O,nonce:D,onAfterPrint:M,onPrintError:U,pageStyle:H,preserveAfterPrint:Z,print:ee,suppressErrors:te},Se=function(W){const G=document.createElement("iframe");return G.width=`${document.documentElement.clientWidth}px`,G.height=`${document.documentElement.clientHeight}px`,G.style.position="absolute",G.style.top=`-${document.documentElement.clientHeight+100}px`,G.style.left=`-${document.documentElement.clientWidth+100}px`,G.id=l,G.srcdoc="<!DOCTYPE html>",W&&(W.allow&&(G.allow=W.allow),W.referrerPolicy!==void 0&&(G.referrerPolicy=W.referrerPolicy),W.sandbox!==void 0&&(G.sandbox=W.sandbox)),G}(V),Y=function(W,G){const{contentRef:ie,fonts:Ce,ignoreGlobalStyles:re,suppressErrors:ne}=G,ge=function({contentRef:je,optionalContent:$e,suppressErrors:Ze}){return $e&&typeof $e=="function"?(je&&c({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),$e()):je?je.current:void c({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:Ze})}({contentRef:ie,optionalContent:W,suppressErrors:ne});if(!ge)return;const we=ge.cloneNode(!0),q=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),Ae=we.querySelectorAll("img"),Pe=we.querySelectorAll("video"),He=Ce?Ce.length:0;return{contentNode:ge,clonedContentNode:we,clonedImgNodes:Ae,clonedVideoNodes:Pe,numResourcesToLoad:(re?0:q.length)+Ae.length+Pe.length+He,originalCanvasNodes:ge.querySelectorAll("canvas")}}(Q,fe);if(!Y)return void c({messages:["There is nothing to print"],suppressErrors:te});const ce=function(W,G,ie){const{suppressErrors:Ce}=W,re=[],ne=[];return function(ge,we){re.includes(ge)?c({level:"debug",messages:["Tried to mark a resource that has already been handled",ge],suppressErrors:Ce}):(we?(c({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...we],suppressErrors:Ce}),ne.push(ge)):re.push(ge),re.length+ne.length===G&&p(ie,W))}}(fe,Y.numResourcesToLoad,Se);(function(W,G,ie,Ce){W.onload=()=>{b(W,G,ie,Ce)},document.body.appendChild(W)})(Se,ce,Y,fe)}d(Z,!0),B?B().then(()=>{X()}).catch(fe=>{U==null||U("onBeforePrint",f(fe))}):X()},[_,C,N,R,P,O,D,M,B,U,H,Z,ee,te])}return s}()})})(Tle);var Ile=Tle.exports;function Ole({isOpen:e,onClose:t,selectedProducts:r}){const[n,i]=I.useState([]),a=I.useRef(null),[s,o]=I.useState(!1);I.useEffect(()=>{if(e&&r.length>0){const f=[];r.forEach(p=>{const m=r.length===1;f.push({id:p.id,parentId:p.id,isVariant:!1,selected:m&&p.variants.length===0,data:{id:p.id,name:p.name,manufacturer:p.manufacturerName,isVariant:!1}}),p.variants.forEach(x=>{f.push({id:x.id,parentId:p.id,isVariant:!0,selected:!0,data:{id:x.id,name:p.name,subName:x.name,sku:x.sku,size:x.size,manufacturer:p.manufacturerName,retailPrice:x.retailPrice,uom:x.uom,pricingUnit:x.pricingUnit,cartonSize:x.cartonSize,isVariant:!0}})})}),i(f)}},[e,r]);const l=Ile.useReactToPrint({contentRef:a,documentTitle:`Sample_Labels_${new Date().toISOString().slice(0,10)}`,onBeforeGetContent:async()=>{o(!0),await new Promise(f=>setTimeout(f,500)),o(!1)},pageStyle:`
            @page { size: letter; margin: 0.25in; }
            @media print {
                body { -webkit-print-color-adjust: exact; }
                .print-grid { 
                    display: grid !important;
                    grid-template-columns: repeat(2, 1fr) !important;
                    grid-auto-rows: 3.33in !important;
                    gap: 0.16in !important;
                }
                .break-inside-avoid { page-break-inside: avoid; }
            }
        `}),c=f=>{i(p=>p.map(m=>m.id===f?{...m,selected:!m.selected}:m))};if(!e)return null;const d=n.filter(f=>f.selected).length;return u.jsx("div",{className:"fixed inset-0 bg-scrim/80 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-surface-container-high w-full max-w-6xl h-[90vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden border border-outline/20",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center shrink-0",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-xl font-bold text-text-primary flex items-center gap-2",children:[u.jsx(cy,{className:"text-primary"})," Print Labels"]}),u.jsxs("p",{className:"text-sm text-text-secondary",children:[d," labels queued"]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:t,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors",children:"Cancel"}),u.jsxs("button",{onClick:()=>l(),disabled:d===0||s,className:"flex items-center gap-2 py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all disabled:opacity-50",children:[s?u.jsx(P0,{className:"animate-spin"}):u.jsx(cy,{size:20}),"Print Sheets"]})]})]}),u.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[u.jsx("div",{className:"w-1/3 border-r border-outline/10 bg-surface-container overflow-y-auto p-4 space-y-4 scrollbar-thin scrollbar-thumb-surface-container-highest",children:r.map(f=>{const p=n.filter(m=>m.parentId===f.id);return u.jsxs("div",{className:"bg-surface-container-high border border-outline/10 rounded-xl overflow-hidden",children:[u.jsxs("div",{className:"p-3 bg-surface-container-highest border-b border-outline/10 font-bold text-text-primary flex justify-between items-center",children:[u.jsx("span",{children:f.name}),u.jsxs("span",{className:"text-xs font-normal text-text-secondary",children:[p.length," options"]})]}),u.jsx("div",{className:"divide-y divide-outline/10",children:p.map(m=>u.jsxs("div",{onClick:()=>c(m.id),className:`p-3 flex items-center gap-3 cursor-pointer hover:bg-primary-container/20 transition-colors ${m.selected?"bg-primary-container/30":""}`,children:[m.selected?u.jsx(D7,{size:18,className:"text-primary"}):u.jsx(voe,{size:18,className:"text-text-tertiary"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-sm font-medium truncate ${m.selected?"text-primary":"text-text-secondary"}`,children:m.isVariant?m.data.subName:"Full Line Label"}),m.isVariant&&u.jsx("p",{className:"text-xs text-text-tertiary truncate",children:m.data.sku||"No SKU"})]})]},m.id))})]},f.id)})}),u.jsx("div",{className:"flex-1 bg-surface-variant/30 overflow-y-auto p-8 flex justify-center",children:u.jsx("div",{className:"bg-white shadow-2xl p-[0.25in] min-h-[11in] w-[8.5in] scale-75 origin-top text-black",children:u.jsx("div",{ref:a,className:"print-grid",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gridAutoRows:"3.33in",gap:"0"},children:n.filter(f=>f.selected).map(f=>u.jsx("div",{className:"p-2 w-full h-full flex items-center justify-center border border-dashed border-outline/10 print:border-none break-inside-avoid",children:u.jsx(Ale,{data:f.data,qrUrl:`/api/products/${f.isVariant?"variants/":""}${f.id}/qr`})},f.id))})})})]})]})})}const Ple=({initialData:e={},onSave:t,onCancel:r,isSaving:n,saveButtonText:i="Save Changes",existingProduct:a})=>{const{vendors:s,addVendor:o}=Kr(),[l,c]=I.useState({manufacturerId:null,supplierId:null,productType:"",style:"",line:"",sizes:[],finish:"",color:"",sampleFormat:"Loose",boardColors:"",unitCost:null,uom:"",cartonSize:null,sku:"",productUrl:"",...e}),[d,f]=I.useState(""),[p,m]=I.useState(""),[x,v]=I.useState(!1),[b,w]=I.useState([]),[_,C]=I.useState(!1),[N,R]=I.useState("Manufacturer"),[P,O]=I.useState(null),[D,M]=I.useState(!1),[B,U]=I.useState([]);I.useEffect(()=>{(async()=>{try{const ie=await L9e();w(ie.map(re=>({label:re,value:re})));const Ce=await Lx();O(Ce)}catch(ie){console.error("Failed to fetch data:",ie)}})()},[]),I.useEffect(()=>{var G,ie;if(e.manufacturerId){const Ce=(G=s.find(re=>re.id===e.manufacturerId))==null?void 0:G.name;f(Ce||"")}if(e.supplierId&&e.supplierId!==e.manufacturerId){v(!0);const Ce=(ie=s.find(re=>re.id===e.supplierId))==null?void 0:ie.name;m(Ce||"")}},[e,s]);const H=I.useMemo(()=>{var G;return(G=s.find(ie=>ie.id===l.manufacturerId))==null?void 0:G.name},[s,l.manufacturerId]),Z=I.useMemo(()=>{var G;return(G=s.find(ie=>ie.id===l.supplierId))==null?void 0:G.name},[s,l.supplierId]),ee=I.useMemo(()=>!d.trim()||d===H?[]:s.filter(G=>(G.vendorType==="Manufacturer"||G.vendorType==="Both")&&G.name.toLowerCase().includes(d.toLowerCase())),[s,d,H]),V=I.useMemo(()=>!p.trim()||p===Z?[]:s.filter(G=>(G.vendorType==="Supplier"||G.vendorType==="Both")&&G.name.toLowerCase().includes(p.toLowerCase())),[s,p,Z]),te=G=>{c(ie=>({...ie,manufacturerId:G.id,productType:G.defaultProductType||ie.productType||""})),f(G.name)},se=G=>{c(ie=>({...ie,supplierId:G.id})),m(G.name)},Q=G=>{const{name:ie,value:Ce}=G.target;c(ie==="unitCost"||ie==="cartonSize"?re=>({...re,[ie]:Ce===""?null:parseFloat(Ce)}):re=>({...re,[ie]:Ce}))},X=I.useCallback(G=>{const ie=l.sizes,re=(G?G.map(ne=>ne.value):[]).map(ne=>ie.find(we=>we.value===ne)||{value:ne,unitCost:null,cartonSize:null,uom:null});c(ne=>({...ne,sizes:re}))},[l.sizes]),fe=(G,ie,Ce)=>{c(re=>{const ne=[...re.sizes];return ie==="unitCost"||ie==="cartonSize"?ne[G]={...ne[G],[ie]:Ce===""?null:Number(Ce)}:ne[G]={...ne[G],[ie]:Ce},{...re,sizes:ne}})},Se=G=>{if(G.preventDefault(),!l.style||!l.productType)return Re.error("Style and Product Type are required.");if(!l.manufacturerId)return Re.error("Please select a manufacturer.");if(x&&!l.supplierId)return Re.error("Please select a supplier.");t(l)},Y=async G=>{await o(G),C(!1)},ce=G=>{if(!a)return;const ie=a.variants.find(re=>re.size===G||re.name===G);if(!ie){Re.error("Save changes before printing new variants.");return}const Ce={...a,variants:[ie]};U([Ce]),M(!0)},W=I.useMemo(()=>{if(!l.unitCost||!P)return null;const G=x?l.supplierId:l.manufacturerId,ie=s.find(ne=>ne.id===G),Ce=yh(ie,P,"Customer");return{price:vh(l.unitCost,Ce.percentage,Ce.method),details:`${Ce.method} ${Ce.percentage}% (${ie!=null&&ie.defaultMarkup?"Vendor Override":"Global Default"})`}},[l.unitCost,l.manufacturerId,l.supplierId,x,s,P]);return u.jsxs(u.Fragment,{children:[u.jsxs("form",{onSubmit:Se,children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Manufacturer *"}),u.jsx("input",{type:"text",value:d,onChange:G=>{f(G.target.value),c(ie=>({...ie,manufacturerId:null}))},className:"w-full p-2 bg-background border border-border rounded text-text-primary",required:!0}),ee.length>0&&u.jsx("div",{className:"absolute z-20 w-full bg-surface border border-border rounded-b-md mt-1 max-h-40 overflow-y-auto",children:ee.map(G=>u.jsx("div",{onClick:()=>te(G),className:"p-2 hover:bg-background cursor-pointer",children:G.name},G.id))}),d.length>0&&!H&&ee.length===0&&u.jsx("div",{className:"absolute z-20 w-full bg-surface border border-border rounded-b-md mt-1",children:u.jsx("div",{onClick:()=>{R("Manufacturer"),C(!0)},className:"p-2 text-accent font-semibold hover:bg-accent hover:text-white cursor-pointer text-center",children:"+ Add New Manufacturer"})})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",id:"add-sample-diff-supplier",checked:x,onChange:G=>v(G.target.checked),className:"h-4 w-4 rounded text-primary focus:ring-primary bg-background border-border"}),u.jsx("label",{htmlFor:"add-sample-diff-supplier",className:"text-sm text-text-secondary",children:"Different Supplier?"})]}),x&&u.jsxs("div",{className:"relative",children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Supplier"}),u.jsx("input",{type:"text",value:p,onChange:G=>{m(G.target.value),c(ie=>({...ie,supplierId:null}))},className:"w-full p-2 bg-background border border-border rounded text-text-primary",required:!0}),V.length>0&&u.jsx("div",{className:"absolute z-10 w-full bg-surface border border-border rounded-b-md mt-1 max-h-40 overflow-y-auto",children:V.map(G=>u.jsx("div",{onClick:()=>se(G),className:"p-2 hover:bg-background cursor-pointer",children:G.name},G.id))}),p.length>0&&!Z&&V.length===0&&u.jsx("div",{className:"absolute z-10 w-full bg-surface border border-border rounded-b-md mt-1",children:u.jsx("div",{onClick:()=>{R("Supplier"),C(!0)},className:"p-2 text-accent font-semibold hover:bg-accent hover:text-white cursor-pointer text-center",children:"+ Add New Supplier"})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Product Type *"}),u.jsxs("select",{name:"productType",value:l.productType,onChange:Q,className:"w-full p-2 bg-background border border-border rounded text-text-primary",required:!0,children:[u.jsx("option",{value:"",disabled:!0,children:"-- Select a Type --"}),dy.map(G=>u.jsx("option",{value:G,children:G},G))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Style *"}),u.jsx("input",{type:"text",name:"style",value:l.style,onChange:Q,className:"w-full p-2 bg-background border border-border rounded text-text-primary",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Color"}),u.jsx("input",{type:"text",name:"color",value:l.color,onChange:Q,className:"w-full p-2 bg-background border border-border rounded text-text-primary"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Line"}),u.jsx("input",{type:"text",name:"line",value:l.line,onChange:Q,className:"w-full p-2 bg-background border border-border rounded text-text-primary"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Finish"}),u.jsx("input",{type:"text",name:"finish",value:l.finish,onChange:Q,className:"w-full p-2 bg-background border border-border rounded text-text-primary"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Sizes"}),u.jsx(wS,{isMulti:!0,name:"sizes",options:b,value:l.sizes.map(G=>({label:G.value,value:G.value})),onChange:X,className:"react-select-container mt-1",classNamePrefix:"react-select",placeholder:"Type or select sizes...",styles:{control:G=>({...G,backgroundColor:"var(--color-background)",borderColor:"var(--color-border)"}),input:G=>({...G,color:"var(--color-text-primary)"}),multiValue:G=>({...G,backgroundColor:"var(--color-primary)"}),multiValueLabel:G=>({...G,color:"var(--color-on-primary)"}),multiValueRemove:G=>({...G,color:"var(--color-on-primary)",":hover":{backgroundColor:"var(--color-primary-hover)",color:"var(--color-on-primary)"}}),menu:G=>({...G,backgroundColor:"var(--color-surface)"}),option:(G,{isFocused:ie,isSelected:Ce})=>({...G,backgroundColor:Ce?"var(--color-primary)":ie?"var(--color-background)":void 0,color:Ce?"var(--color-on-primary)":"var(--color-text-primary)",":active":{...G[":active"],backgroundColor:"var(--color-primary-hover)"}})}})]}),l.sizes.length>0&&u.jsxs("div",{className:"bg-surface p-3 rounded border border-border overflow-x-auto",children:[u.jsx("h4",{className:"text-xs font-semibold text-text-secondary uppercase mb-2",children:"Size Variants Pricing"}),u.jsxs("table",{className:"w-full text-sm text-left",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"text-text-secondary border-b border-border",children:[u.jsx("th",{className:"pb-2 px-2",children:"Size"}),u.jsx("th",{className:"pb-2 px-2",children:"Cost"}),u.jsx("th",{className:"pb-2 px-2",children:"UOM"}),u.jsx("th",{className:"pb-2 px-2",children:"Carton"}),u.jsx("th",{className:"pb-2 px-2 text-right",children:"Actions"})," "]})}),u.jsx("tbody",{children:l.sizes.map((G,ie)=>u.jsxs("tr",{className:"border-b border-border last:border-0",children:[u.jsx("td",{className:"py-2 px-2 font-medium text-text-primary",children:G.value}),u.jsx("td",{className:"py-2 px-2",children:u.jsx("input",{type:"number",step:"0.01",placeholder:l.unitCost?`Def: $${l.unitCost}`:"0.00",value:G.unitCost??"",onChange:Ce=>fe(ie,"unitCost",Ce.target.value),className:"w-20 p-1 bg-background border border-border rounded text-xs text-text-primary"})}),u.jsx("td",{className:"py-2 px-2",children:u.jsxs("select",{value:G.uom??"",onChange:Ce=>fe(ie,"uom",Ce.target.value),className:"p-1 bg-background border border-border rounded text-xs text-text-primary w-16",children:[u.jsx("option",{value:"",children:l.uom||"Def"}),uh.map(Ce=>u.jsx("option",{value:Ce,children:Ce},Ce))]})}),u.jsx("td",{className:"py-2 px-2",children:u.jsx("input",{type:"number",step:"0.0001",placeholder:l.cartonSize?`Def: ${l.cartonSize}`:"Qty",value:G.cartonSize??"",onChange:Ce=>fe(ie,"cartonSize",Ce.target.value),className:"w-16 p-1 bg-background border border-border rounded text-xs text-text-primary"})}),u.jsx("td",{className:"py-2 px-2 text-right",children:u.jsx("button",{type:"button",onClick:()=>ce(G.value),className:"p-1 text-text-secondary hover:text-primary hover:bg-background rounded",title:"Print Label",disabled:!a,children:u.jsx(eT,{size:16})})})]},ie))})]})]}),u.jsxs("div",{className:"p-3 bg-background rounded border border-border space-y-3",children:[u.jsx("h4",{className:"text-sm font-medium text-text-secondary border-b border-border pb-1 mb-2",children:"Default Pricing"}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Unit Cost ($)"}),u.jsx("input",{type:"number",step:"0.01",min:"0",name:"unitCost",value:l.unitCost??"",onChange:Q,className:"w-full p-2 bg-surface border border-border rounded text-sm text-text-primary",placeholder:"0.00"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Unit (UOM)"}),u.jsxs("select",{name:"uom",value:l.uom??"",onChange:Q,className:"w-full p-2 bg-surface border border-border rounded text-sm text-text-primary",children:[u.jsx("option",{value:"",children:"-- Unit --"}),uh.map(G=>u.jsx("option",{value:G,children:G},G))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Carton Size"}),u.jsx("input",{type:"number",step:"0.0001",min:"0",name:"cartonSize",value:l.cartonSize??"",onChange:Q,className:"w-full p-2 bg-surface border border-border rounded text-sm text-text-primary",placeholder:"Qty per box"})]})]}),W&&u.jsxs("div",{className:"mt-2 p-2 bg-green-900/20 border border-green-800/50 rounded flex justify-between items-center",children:[u.jsx("span",{className:"text-xs text-green-400",children:"Suggested Retail:"}),u.jsxs("div",{className:"text-right",children:[u.jsx("span",{className:"font-bold text-green-400 text-sm",children:zm(W.price)}),u.jsx("span",{className:"text-[10px] text-gray-500 block",children:W.details})]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"SKU"}),u.jsx("input",{type:"text",name:"sku",value:l.sku,onChange:Q,className:"w-full p-2 bg-background border border-border rounded text-text-primary"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Product URL"}),u.jsx("input",{type:"url",name:"productUrl",value:l.productUrl,onChange:Q,className:"w-full p-2 bg-background border border-border rounded text-text-primary"})]})]})]}),u.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-border",children:[u.jsx("button",{type:"button",onClick:r,className:"py-2 px-4 bg-secondary hover:bg-secondary-hover rounded text-on-secondary",children:"Cancel"}),u.jsx("button",{type:"submit",className:"py-2 px-4 bg-primary hover:bg-primary-hover rounded text-on-primary",disabled:n,children:n?"Saving...":i})]})]}),u.jsx(hb,{isOpen:_,onClose:()=>C(!1),onSave:Y,initialVendorType:N}),D&&B.length>0&&u.jsx(Ole,{isOpen:D,onClose:()=>M(!1),selectedProducts:B})]})},W9e=({isOpen:e,onClose:t,onSampleCreated:r,initialSearchTerm:n})=>{const{addSample:i}=Kr(),[a,s]=I.useState(!1),o=async l=>{s(!0);try{const{supplierId:c,...d}=l,f=l.supplierId||l.manufacturerId,p={...d,supplierId:f};p.productType!=="Tile"&&(p.sampleFormat=null,p.boardColors="");const m=await i(p);r(m),Re.success(`Sample "${m.style}" created!`),t()}catch(c){console.error("Failed to create sample:",c),Re.error("Could not create sample.")}finally{s(!1)}};return e?u.jsx(u.Fragment,{children:u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[60]",children:u.jsxs("div",{className:"bg-surface-container-high p-8 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-outline/10",onClick:l=>l.stopPropagation(),children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Create New Sample"}),u.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-surface-container-highest text-text-secondary hover:text-text-primary transition-colors",children:u.jsx(Gr,{className:"w-6 h-6"})})]}),u.jsx(Ple,{initialData:{style:n},onSave:o,onCancel:t,isSaving:a,saveButtonText:"Create & Add"})]})})}):null};var V9e=I.forwardRef(function(e,t){var r=kle(e);return I.createElement(J7,Tr({ref:t},r))}),Rle=V9e;const zG=()=>{const e=new Date;return e.setDate(e.getDate()+3),e.toISOString().split("T")[0]},q9e=({isOpen:e,onClose:t})=>{const{addSampleCheckout:r,installers:n}=Kr(),[i,a]=I.useState("PROJECT"),[s,o]=I.useState(null),[l,c]=I.useState(null),[d,f]=I.useState(null),[p,m]=I.useState([]),[x,v]=I.useState(zG()),[b,w]=I.useState(!1),[_,C]=I.useState(!1),[N,R]=I.useState(!1),[P,O]=I.useState(""),[D,M]=I.useState(!1),[B,U]=I.useState(""),[H,Z]=I.useState(null),ee=I.useCallback(Y=>{m(Y)},[]),V=()=>{a("PROJECT"),o(null),c(null),f(null),m([]),v(zG()),C(!1),w(!1),R(!1),O(""),M(!1),U(""),Z(null),t()},te=Y=>{o(Y),c(null),m([])},se=Y=>{O(Y),R(!0)},Q=Y=>{U(Y),M(!0)},X=Y=>{Z(Y),M(!1)},fe=async()=>{if(p.length===0){Re.error("Please add at least one sample.");return}if(!x){Re.error("Please select a return date.");return}if(i==="PROJECT"&&!l){Re.error("Please select a project.");return}if(i==="CUSTOMER"&&!s){Re.error("Please select a customer.");return}if(i==="INSTALLER"&&!d){Re.error("Please select an installer.");return}w(!0);const Y=Re.loading(`Checking out ${p.length} item(s)...`);try{const ce=p.map(W=>r({projectId:i==="PROJECT"?l.id:void 0,customerId:i==="CUSTOMER"?s.id:void 0,installerId:i==="INSTALLER"?d.id:void 0,variantId:W.variantId,interestVariantId:W.interestVariantId,sampleType:W.sampleType,quantity:W.quantity,expectedReturnDate:new Date(x).toISOString()}));await Promise.all(ce),Re.success(`${p.length} item(s) checked out successfully.`,{id:Y,icon:u.jsx(A4,{className:"text-green-500"})}),C(!0)}catch(ce){console.error("Failed to checkout samples:",ce),Re.error("An error occurred during checkout.",{id:Y})}finally{w(!1)}};if(!e)return null;const Se=i==="PROJECT"||i==="CUSTOMER"?s:i==="INSTALLER"?d:null;return u.jsx(td,{children:u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"fixed inset-0 bg-scrim/60 z-50 overflow-y-auto",children:[u.jsx("div",{className:"print-only",children:u.jsx($5e,{customer:Se,project:l,checkoutItems:p,returnDate:x})}),u.jsx("div",{className:"flex min-h-full items-center justify-center p-0 lg:p-4",children:u.jsxs("div",{className:"bg-surface-container-high w-full h-full lg:h-auto lg:max-h-[90vh] lg:max-w-4xl lg:rounded-2xl shadow-2xl flex flex-col border border-outline/20 relative",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center lg:rounded-t-2xl sticky top-0 z-20 no-print bg-surface-container-high",children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"New Sample Checkout"}),u.jsx("button",{onClick:V,className:"p-2 rounded-full hover:bg-surface-container-highest text-text-secondary hover:text-text-primary",children:u.jsx(Gr,{className:"w-6 h-6"})})]}),u.jsxs("fieldset",{disabled:_,className:"flex-1 overflow-y-auto p-4 md:p-8 space-y-8",children:[u.jsxs("section",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-4 text-text-primary px-1",children:"Who is this for?"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[u.jsxs("button",{onClick:()=>a("PROJECT"),className:`p-4 rounded-xl border-2 flex flex-col items-center gap-2 transition-all ${i==="PROJECT"?"border-primary bg-primary-container/30 text-primary":"border-outline/20 bg-surface-container text-text-secondary hover:border-primary/50"}`,children:[u.jsx(Mh,{size:24}),u.jsx("span",{className:"font-bold",children:"Project"})]}),u.jsxs("button",{onClick:()=>a("CUSTOMER"),className:`p-4 rounded-xl border-2 flex flex-col items-center gap-2 transition-all ${i==="CUSTOMER"?"border-primary bg-primary-container/30 text-primary":"border-outline/20 bg-surface-container text-text-secondary hover:border-primary/50"}`,children:[u.jsx(oc,{size:24}),u.jsx("span",{className:"font-bold",children:"Customer Only"})]}),u.jsxs("button",{onClick:()=>a("INSTALLER"),className:`p-4 rounded-xl border-2 flex flex-col items-center gap-2 transition-all ${i==="INSTALLER"?"border-primary bg-primary-container/30 text-primary":"border-outline/20 bg-surface-container text-text-secondary hover:border-primary/50"}`,children:[u.jsx(ub,{size:24}),u.jsx("span",{className:"font-bold",children:"Installer"})]})]})]}),u.jsx("section",{children:(i==="PROJECT"||i==="CUSTOMER")&&u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-lg font-semibold mb-3 text-text-primary px-1",children:"1. Customer"}),s?u.jsxs("div",{className:"bg-surface-container p-4 rounded-xl flex justify-between items-center border border-outline/20",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx(oc,{className:"w-6 h-6 text-primary"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-lg text-text-primary",children:s.fullName}),u.jsx("p",{className:"text-sm text-text-secondary",children:s.email})]})]}),!_&&u.jsx("button",{onClick:()=>{o(null),c(null)},className:"text-sm font-semibold text-primary hover:underline no-print",children:"Change"})]}):u.jsx(koe,{onCustomerSelect:te,onRequestNewCustomer:se})]})}),i==="PROJECT"&&s&&u.jsxs("section",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-3 text-text-primary px-1",children:"2. Project"}),l?u.jsxs("div",{className:"bg-surface-container p-4 rounded-xl flex justify-between items-center border border-outline/20",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx(Mh,{className:"w-6 h-6 text-primary"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-lg text-text-primary",children:l.projectName}),u.jsx("p",{className:"text-sm text-text-secondary",children:l.projectType})]})]}),!_&&u.jsx("button",{onClick:()=>c(null),className:"text-sm font-semibold text-primary hover:underline no-print",children:"Change"})]}):u.jsx(p5e,{customer:s,onProjectSelect:Y=>c(Y)})]}),i==="INSTALLER"&&u.jsxs("section",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-3 text-text-primary px-1",children:"1. Select Installer"}),u.jsx(Rle,{options:n.map(Y=>({label:Y.installerName,value:Y})),onChange:Y=>f((Y==null?void 0:Y.value)||null),value:d?{label:d.installerName,value:d}:null,placeholder:"Search installers...",className:"react-select-container",classNamePrefix:"react-select"})]}),(i==="PROJECT"&&l||i==="CUSTOMER"&&s||i==="INSTALLER"&&d)&&u.jsxs("section",{children:[u.jsxs("h3",{className:"text-lg font-semibold mb-3 text-text-primary px-1",children:[i==="PROJECT"?"3.":"2."," Samples & Return Date"]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"returnDate",className:"block text-sm font-medium text-text-secondary mb-2",children:"Expected Return Date"}),u.jsxs("div",{className:"relative",children:[u.jsx(pd,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-secondary w-5 h-5"}),u.jsx("input",{id:"returnDate",type:"date",value:x,onChange:Y=>v(Y.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg py-2.5 pl-10 pr-4 focus:outline-none focus:ring-2 focus:ring-primary/50 text-text-primary"})]})]}),u.jsx("p",{className:"text-text-secondary mb-4",children:"Search or scan samples to add to the checkout list."}),u.jsx(Toe,{onItemsChange:ee,onRequestNewSample:Q,externalSelectedProduct:H})]})]}),u.jsx("div",{className:"p-4 border-t border-outline/10 lg:rounded-b-2xl flex justify-end gap-4 no-print sticky bottom-0 z-20 lg:static bg-surface-container-high",children:_?u.jsxs(u.Fragment,{children:[u.jsx("button",{type:"button",onClick:V,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors font-medium",children:"Close"}),u.jsxs("button",{type:"button",onClick:()=>window.print(),className:"py-3 px-6 rounded-full bg-tertiary hover:bg-tertiary-hover text-on-tertiary flex items-center gap-2 font-semibold shadow-md transition-all",children:[u.jsx(cy,{size:18}),"Print Summary"]})]}):u.jsxs(u.Fragment,{children:[u.jsx("button",{type:"button",onClick:V,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors font-medium",disabled:b,children:"Cancel"}),u.jsx("button",{type:"button",onClick:fe,disabled:!(i==="PROJECT"&&l||i==="CUSTOMER"&&s||i==="INSTALLER"&&d)||p.length===0||b,className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold disabled:opacity-50 disabled:cursor-not-allowed shadow-md",children:b?"Checking Out...":`Finish Checkout (${p.length})`})]})})]})})]}),u.jsx(L7,{isOpen:N,onClose:()=>R(!1),customer:null,initialData:{fullName:P}}),u.jsx(W9e,{isOpen:D,onClose:()=>M(!1),onSampleCreated:X,initialSearchTerm:B})]})})},G9e="America/Los_Angeles",af=(e,t=G9e,r={month:"short",day:"numeric",year:"numeric"})=>{if(!e)return"-";const n=new Date(e);if(isNaN(n.getTime()))return"Invalid Date";try{return new Intl.DateTimeFormat("en-US",{...r,timeZone:t}).format(n)}catch{return console.warn(`Invalid timezone '${t}', falling back to UTC.`),new Intl.DateTimeFormat("en-US",{...r,timeZone:"UTC"}).format(n)}},K9e=(e,t)=>{for(const r of t){const n=r.variants.find(i=>String(i.id)===String(e.variantId));if(n)return`${r.name} - ${n.name}`}return"Unknown Sample"},X9e=e=>{switch(e){case ar.NEW:return"bg-surface-container text-text-secondary border border-outline";case ar.SCHEDULED:return"bg-primary-container text-primary font-bold";case ar.ACCEPTED:return"bg-success-container text-success font-bold";case ar.QUOTING:return"bg-secondary-container text-on-secondary-container";case ar.SAMPLE_CHECKOUT:return"bg-warning-container text-warning font-bold";case ar.COMPLETED:return"bg-surface text-text-primary border border-outline";case ar.AWAITING_DECISION:return"bg-surface-container-highest text-text-secondary";case ar.CANCELLED:return"bg-error-container text-error";default:return"bg-surface-container text-text-secondary"}},Y9e=(e,t)=>{const r=t.filter(l=>l.projectId===e.id&&l.actualReturnDate===null);if(r.length===0)return null;const n=r.sort((l,c)=>new Date(l.expectedReturnDate).getTime()-new Date(c.expectedReturnDate).getTime())[0],i=new Date;i.setHours(0,0,0,0);const a=new Date(n.expectedReturnDate);a.setHours(0,0,0,0);const s=a.getTime()-i.getTime(),o=Math.ceil(s/(1e3*60*60*24));return o===0?{color:"text-warning",text:"Sample due today"}:o<0?{color:"text-error",text:"Sample is overdue"}:null},Q9e=({project:e})=>{const{customers:t,sampleCheckouts:r,products:n,updateSampleCheckout:i,extendSampleCheckout:a,jobs:s,installers:o}=Kr(),l=t.find(v=>v.id===e.customerId),c=X9e(e.status),d=Y9e(e,r),f=I.useMemo(()=>{const v=s.find(M=>M.projectId===e.id),b=(v==null?void 0:v.appointments)||[];if(b.length===0)return null;const w=[...b].sort((M,B)=>new Date(M.startDate).getTime()-new Date(B.startDate).getTime()),_=w[0].startDate,C=w[w.length-1].endDate,N=w[0].installerId,R=o.find(M=>M.id===N),P=af(_),O=af(C);return{dateString:P===O?P:`${P} - ${O}`,installerName:(R==null?void 0:R.installerName)||(R==null?void 0:R.name)||"Assigned Installer"}},[s,e.id,o]),p=I.useMemo(()=>r.filter(b=>b.projectId===e.id&&b.isSelected).slice(0,4).map(b=>{for(const w of n){if(b.interestVariantId){const C=w.variants.find(N=>String(N.id)===String(b.interestVariantId));if(C)return{url:C.thumbnailUrl||C.imageUrl||w.defaultThumbnailUrl||w.defaultImageUrl,name:C.name}}const _=w.variants.find(C=>String(C.id)===String(b.variantId));if(_)return{url:_.thumbnailUrl||_.imageUrl||w.defaultThumbnailUrl||w.defaultImageUrl,name:_.name}}return null}).filter(Boolean),[r,n,e.id]),m=I.useMemo(()=>r.filter(v=>v.projectId===e.id&&v.actualReturnDate===null),[r,e.id]),x=(v,b)=>{v.stopPropagation(),v.preventDefault(),b()};return u.jsxs(ai,{to:`/projects/${e.id}`,className:"block bg-surface-container-high p-5 rounded-xl shadow-sm hover:shadow-md transition-all duration-300 w-96 flex-shrink-0 border border-outline/10 group",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{className:"min-w-0 pr-2",children:[u.jsx("h3",{className:"font-bold text-lg text-text-primary truncate",children:e.projectName}),u.jsx("p",{className:"text-sm text-text-secondary truncate font-medium",children:l==null?void 0:l.fullName})]}),u.jsxs("div",{className:"flex items-center space-x-2 shrink-0",children:[d&&u.jsx("div",{title:d.text,className:`p-1.5 rounded-full bg-error-container ${d.color}`,children:u.jsx(pS,{size:14})}),u.jsx("div",{className:`text-xs font-semibold px-2 py-1 rounded-full ${c}`,children:e.status})]})]}),f&&u.jsxs("div",{className:"mt-4 flex items-start gap-4 text-sm text-text-secondary",children:[u.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[u.jsx("div",{className:"w-6 h-6 rounded-full bg-primary-container flex items-center justify-center shrink-0",children:u.jsx(pd,{className:"w-3.5 h-3.5 text-primary"})}),u.jsx("span",{className:"truncate",children:f.dateString})]}),u.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[u.jsx("div",{className:"w-6 h-6 rounded-full bg-primary-container flex items-center justify-center shrink-0",children:u.jsx(ub,{className:"w-3.5 h-3.5 text-primary"})}),u.jsx("span",{className:"truncate",children:f.installerName})]})]}),m.length>0&&u.jsxs("div",{className:"mt-4 pt-4 border-t border-outline/20",children:[u.jsx("h4",{className:"text-[10px] font-bold uppercase tracking-wider text-text-tertiary mb-3",children:"Active Samples"}),u.jsx("div",{className:"space-y-2.5",children:m.map(v=>{const b=K9e(v,n);return u.jsxs("div",{className:"flex justify-between items-center text-sm group/sample",children:[u.jsx("span",{className:"text-text-primary truncate",title:b,children:b}),u.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover/sample:opacity-100 transition-opacity",children:[u.jsx("button",{onClick:w=>x(w,()=>a(v)),className:"p-1.5 bg-surface hover:bg-surface-hover text-primary rounded-full border border-outline",children:u.jsx(od,{size:14})}),u.jsx("button",{onClick:w=>x(w,()=>i(v)),className:"p-1.5 bg-primary-container hover:bg-primary text-primary hover:text-on-primary rounded-full",children:u.jsx(M7,{size:14})})]})]},v.id)})})]}),p.length>0&&u.jsx("div",{className:"mt-4 flex gap-2",children:p.map((v,b)=>u.jsx("div",{className:"w-8 h-8 rounded-md bg-surface-container-low border border-outline/20 overflow-hidden shrink-0",title:v==null?void 0:v.name,children:v!=null&&v.url?u.jsx("img",{src:ds(v.url),alt:(v==null?void 0:v.name)||"Selected variant",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center text-text-tertiary",children:u.jsx(yf,{size:14})})},b))}),u.jsxs("div",{className:"mt-4 flex justify-between items-center text-xs text-text-secondary pt-3 border-t border-outline/10",children:[u.jsx("span",{className:"bg-surface-container px-2 py-1 rounded-md",children:e.projectType}),u.jsx(ou,{className:"w-4 h-4 text-primary group-hover:translate-x-1 transition-transform"})]})]})},hT=({title:e,projects:t})=>u.jsxs("div",{className:"mb-12",children:[e&&u.jsx("h2",{className:"text-2xl font-semibold mb-4 text-text-primary pl-1",children:e}),t.length>0?u.jsx("div",{className:"flex gap-6 overflow-x-auto pb-4 after:content-[''] after:min-w-[1rem]",children:t.map(r=>u.jsx(Q9e,{project:r},r.id))}):u.jsx("p",{className:"text-text-secondary italic",children:"No projects in this category."})]}),J9e=({order:e,project:t})=>{const r=new Date;r.setHours(0,0,0,0);let n="No ETA",i="text-text-secondary font-medium";if(e.etaDate){const a=e.etaDate.includes("T")?e.etaDate.split("T")[0]:e.etaDate,s=new Date(`${a}T00:00:00`);s.setHours(0,0,0,0);const o=s.getTime()-r.getTime(),l=Math.ceil(o/(1e3*60*60*24));n=s.toLocaleDateString(),l<0?i="text-error font-bold":l===0?i="text-success font-bold":l<=3&&(i="text-warning font-bold")}return u.jsxs(ai,{to:`/projects/${e.projectId}`,className:"block bg-surface-container-high p-5 rounded-xl shadow-sm hover:shadow-md transition-all duration-300 w-80 flex-shrink-0 border border-outline/10 group",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-lg text-text-primary truncate max-w-[180px]",title:t==null?void 0:t.projectName,children:(t==null?void 0:t.projectName)||"Unknown Project"}),u.jsx("p",{className:"text-sm text-text-secondary truncate font-medium",children:e.supplierName||"Unknown Supplier"})]}),u.jsxs("div",{className:`text-[10px] uppercase tracking-wide font-bold px-2 py-1 rounded-full flex items-center gap-1 ${e.status==="Damage Replacement"?"bg-error-container text-error":"bg-primary-container text-primary"}`,children:[e.status==="Damage Replacement"?u.jsx(ld,{size:10}):u.jsx(R0,{size:10}),e.status==="Damage Replacement"?"Repl.":"Order"]})]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-outline/20",children:[u.jsxs("div",{className:"flex justify-between items-center text-sm mb-2",children:[u.jsx("span",{className:"text-text-secondary",children:"ETA:"}),u.jsx("span",{className:i,children:n})]}),u.jsxs("div",{className:"space-y-1.5",children:[e.lineItems.slice(0,2).map(a=>u.jsx("div",{className:"flex justify-between text-xs text-text-secondary",children:u.jsxs("span",{className:"truncate w-3/4",children:[a.quantity," ",a.unit," - ",a.style]})},a.id)),e.lineItems.length>2&&u.jsxs("p",{className:"text-xs text-text-tertiary italic",children:["+",e.lineItems.length-2," more items..."]})]})]}),u.jsx("div",{className:"mt-5 flex justify-end items-center text-sm text-primary font-medium group-hover:translate-x-1 transition-transform",children:u.jsxs("span",{className:"flex items-center gap-1",children:["View ",u.jsx(ou,{size:16})]})})]})},Z9e=({title:e,orders:t,projects:r})=>u.jsxs("div",{className:"mb-12",children:[u.jsxs("h2",{className:"text-2xl font-semibold mb-4 text-text-primary flex items-center gap-2",children:[u.jsx("div",{className:"p-2 bg-primary-container rounded-full text-primary",children:u.jsx(ex,{size:20})}),e]}),u.jsxs("div",{className:"flex gap-6 overflow-x-auto pb-4 no-scrollbar",children:[t.map(n=>u.jsx(J9e,{order:n,project:r.find(i=>i.id===n.projectId)},n.id)),t.length===0&&u.jsx("p",{className:"text-text-secondary italic",children:"No orders found matching this criteria."})]})]}),eBe=e=>{const{products:t,projects:r,customers:n,installers:i}=Kr(),a=r.find(d=>d.id===e.projectId),s=n.find(d=>d.id===e.customerId),o=i.find(d=>d.id===e.installerId);let l,c;for(const d of t){const f=d.variants.find(p=>String(p.id)===String(e.variantId));if(f){l=d,c=f;break}}return{product:l,variant:c,project:a,customer:s,installer:o}},tBe=({checkout:e,onClick:t})=>{const{extendSampleCheckout:r,updateSampleCheckout:n}=Kr(),{product:i,variant:a,project:s,customer:o,installer:l}=eBe(e);if(!i||!a)return null;const c=async N=>{N.stopPropagation(),await r(e)},d=async N=>{N.stopPropagation(),confirm(`Return "${a.name}"?`)&&await n(e)};let f="bg-surface-container border border-outline text-text-secondary",p="Checked Out";const m=new Date;m.setHours(0,0,0,0);const x=new Date(e.expectedReturnDate);x.setHours(0,0,0,0);const v=new Date(e.checkoutDate),w=Math.ceil((x.getTime()-v.getTime())/(1e3*60*60*24))>3;x<m?(f="bg-error-container text-error font-bold border-none",p="OVERDUE"):x.getTime()===m.getTime()?(f="bg-warning-container text-warning font-bold border-none",p="Due Today"):w?(f="bg-primary-container text-primary font-bold border-none",p="Extended"):p="On Time";const _=a.imageUrl||i.defaultImageUrl,C=`${i.name} - ${a.name}`;return u.jsxs("div",{className:"bg-surface-container-high rounded-xl shadow-sm hover:shadow-md transition-shadow overflow-hidden group flex flex-col cursor-pointer w-80 flex-shrink-0 border border-outline/10",onClick:()=>t(i),children:[u.jsxs("div",{className:"w-full h-48 bg-surface-container-low flex items-center justify-center text-text-secondary relative",children:[_?u.jsx("img",{src:ds(_),alt:C,className:"w-full h-full object-cover"}):u.jsx("span",{className:"text-sm",children:"No Image"}),u.jsxs("div",{className:`absolute top-3 right-3 px-3 py-1 rounded-full text-xs font-bold shadow-sm flex items-center gap-1 ${f}`,children:[p==="OVERDUE"&&u.jsx(eC,{size:12}),p]})]}),u.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[u.jsx("h3",{className:"font-bold text-base text-text-primary truncate",title:C,children:C}),u.jsx("p",{className:"text-sm text-text-secondary truncate mb-4",children:i.manufacturerName||"N/A"}),u.jsx("div",{className:"flex-grow"}),u.jsxs("div",{className:"mt-auto space-y-3",children:[u.jsxs("div",{className:"flex justify-between items-end text-xs",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-text-secondary block mb-0.5",children:"Checked Out"}),u.jsx("span",{className:"text-text-secondary font-medium block truncate",children:af(e.checkoutDate)})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("span",{className:"text-text-secondary block mb-0.5",children:"Due Date"}),u.jsx("span",{className:"font-bold text-text-primary block truncate",children:af(e.expectedReturnDate)})]})]}),u.jsxs("div",{className:"truncate text-xs",children:[u.jsx("span",{className:"text-text-secondary",children:"For: "}),s?u.jsx(ai,{to:`/projects/${s.id}`,className:"text-accent hover:underline font-medium",onClick:N=>N.stopPropagation(),children:s.projectName}):o?u.jsx(ai,{to:`/customers/${o.id}`,className:"text-accent hover:underline font-medium",onClick:N=>N.stopPropagation(),children:o.fullName}):l?u.jsx(ai,{to:`/installers/${l.id}`,className:"text-accent hover:underline font-medium",onClick:N=>N.stopPropagation(),children:l.installerName}):u.jsx("span",{className:"text-text-tertiary font-medium",children:"Unknown"})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-end pt-3",children:[u.jsx("button",{onClick:c,className:"text-xs font-medium text-primary hover:bg-primary-container/20 py-2 px-4 rounded-full transition-colors",children:"Extend"}),u.jsxs("button",{onClick:d,className:"text-xs font-bold bg-secondary hover:bg-secondary-hover text-on-secondary py-2 px-4 rounded-full shadow-sm flex items-center gap-1 transition-colors",children:[u.jsx(M7,{size:12})," Return"]})]})]})]})]})},jle=({title:e,checkouts:t,onItemClick:r})=>u.jsxs("div",{className:"mb-12",children:[u.jsxs("h2",{className:"text-2xl font-semibold mb-4 text-text-primary flex items-center gap-2",children:[e,t.length>0&&u.jsx("span",{className:"text-sm font-bold bg-primary-container text-on-primary-container px-3 py-1 rounded-full",children:t.length})]}),t.length>0?u.jsx("div",{className:"flex gap-6 overflow-x-auto pb-4 scrollbar-thin scrollbar-thumb-border scrollbar-track-transparent",children:t.map(n=>u.jsx(tBe,{checkout:n,onClick:r},n.id))}):u.jsx("div",{className:"p-8 text-center bg-surface/30 rounded-lg border border-dashed border-border",children:u.jsx("p",{className:"text-text-secondary italic",children:"No samples are currently checked out."})})]});function rBe(e){const t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)}const nBe=new Set(["id","createdAt","updatedAt","jobs","lineItems","userEmail","checkoutProjectId","checkoutProjectName","checkoutCustomerName","checkoutId","imageUrl","color","appointments","isOnHold"]);function iBe(e,t){if(!e||!t)return[];const r=[];("isOnHold"in e||"isOnHold"in t)&&e.isOnHold!==t.isOnHold&&r.push(t.isOnHold?"Job was placed On Hold":"Job was taken Off Hold"),("appointments"in e||"appointments"in t)&&JSON.stringify(e.appointments)!==JSON.stringify(t.appointments)&&r.push("Job schedule was updated.");const n=new Set([...Object.keys(e),...Object.keys(t)]);for(const i of n){if(nBe.has(i))continue;const a=e[i],s=t[i],o=a==null||a===""?null:a,l=s==null||s===""?null:s;if(o===l)continue;const c=rBe(i);o===null?r.push(`'${c}' was set to "${l}"`):l===null?r.push(`'${c}' was cleared (was "${o}")`):typeof o=="boolean"&&typeof l=="boolean"?r.push(`'${c}' changed from "${o?"Yes":"No"}" to "${l?"Yes":"No"}"`):r.push(`'${c}' changed from "${o}" to "${l}"`)}return JSON.stringify(e.lineItems)!==JSON.stringify(t.lineItems)&&r.push("'Line Items' were updated."),r}const pb=({history:e})=>{const t=n=>new Date(n).toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}),r=n=>{const i=n.targetEntity.toLowerCase().replace("_"," ");switch(n.actionType.toUpperCase()){case"CREATE":return`created the ${i}.`;case"UPDATE":return`updated the ${i}.`;case"DELETE":return`deleted the ${i}.`;default:return`${n.actionType.toLowerCase().replace("_"," ")} the ${i}.`}};return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex items-center gap-3 flex-shrink-0",children:[u.jsx(Q0,{className:"drag-handle cursor-move text-text-secondary hover:text-text-primary transition-colors",size:20}),u.jsx(Bx,{className:"w-6 h-6 text-primary"}),u.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Change History"})]}),u.jsx("div",{className:"p-4 overflow-y-auto flex-grow bg-surface-container scrollbar-thin scrollbar-thumb-surface-container-highest",children:!e||e.length===0?u.jsx("div",{className:"text-center py-8 text-text-secondary",children:u.jsx("p",{children:"No history available for this item."})}):u.jsx("div",{className:"space-y-4",children:e.map(n=>{var a,s;const i=n.actionType.toUpperCase()==="UPDATE"&&((a=n.details)!=null&&a.before)&&((s=n.details)!=null&&s.after)?iBe(n.details.before,n.details.after):[];return u.jsxs("div",{className:"flex items-start p-3 bg-surface-container-high rounded-xl",children:[u.jsx("div",{className:"flex-shrink-0 mr-3 mt-1",children:u.jsx("span",{className:"flex items-center justify-center h-8 w-8 rounded-full bg-primary-container text-on-primary-container",children:u.jsx(oc,{size:16})})}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("p",{className:"text-sm font-semibold text-text-primary",children:n.userEmail||"Unknown User"}),u.jsx("p",{className:"text-sm text-text-secondary",children:r(n)}),i.length>0&&u.jsx("ul",{className:"mt-2 pl-5 list-disc space-y-1 text-sm text-text-secondary marker:text-primary/50",children:i.map((o,l)=>u.jsx("li",{children:o},l))}),u.jsxs("div",{className:"flex items-center mt-2 text-xs text-text-tertiary",children:[u.jsx(od,{size:12,className:"mr-1.5"}),u.jsx("span",{children:t(n.createdAt)})]})]})]},n.id)})})})]})},Im=e=>{if(!e)return"Sample";const t=[];return e.line&&t.push(e.line),e.style&&t.push(e.style),e.color&&t.push(e.color),t.length===0?`Sample #${e.id}`:t.join(" - ")},aBe={manufacturerId:null,supplierId:null,productType:"",style:"",line:"",sizes:[],finish:"",color:"",sampleFormat:"Loose",boardColors:"",sku:"",productUrl:"",unitCost:null,uom:"",cartonSize:null},sBe=({isOpen:e,onClose:t,sample:r})=>{var kt,ht,_r,er;const{currentUser:n,vendors:i,sampleCheckouts:a,projects:s,customers:o,installers:l,fetchSamples:c,updateSample:d,addVendor:f,updateSampleCheckout:p,deleteSample:m,extendSampleCheckout:x,toggleSampleDiscontinued:v,sampleHistory:b,fetchSampleHistory:w}=Kr(),[_,C]=I.useState(!1),[N,R]=I.useState(null),[P,O]=I.useState(null),[D,M]=I.useState(""),[B,U]=I.useState(!1),[H,Z]=I.useState(!1),[ee,V]=I.useState(!1),te=I.useRef(null),se=I.useRef(null),[Q,X]=I.useState("checkouts"),[fe,Se]=I.useState(null),[Y,ce]=I.useState(!1),[W,G]=I.useState("general"),[ie,Ce]=I.useState(!1);I.useEffect(()=>{(async()=>{try{Se(await Lx())}catch{console.error("Failed to load pricing settings.")}})()},[]);const{checkoutHistory:re,currentCheckout:ne}=I.useMemo(()=>{if(!r)return{checkoutHistory:[],currentCheckout:null};const ct=a.filter(Lt=>Lt.sampleId===r.id).map(Lt=>{let dr="Unknown",Ht="#";if(Lt.projectId){const ye=s.find(Me=>Me.id===Lt.projectId);dr=ye?ye.projectName:"Unknown Project",Ht=`/projects/${Lt.projectId}`}else if(Lt.customerId){const ye=o.find(Me=>Me.id===Lt.customerId);dr=ye?ye.fullName:"Unknown Customer",Ht=`/customers/${Lt.customerId}`}else if(Lt.installerId){const ye=l.find(Me=>Me.id===Lt.installerId);dr=ye?ye.installerName:"Unknown Installer",Ht=`/installers/${Lt.installerId}`}return{...Lt,entityName:dr,entityLink:Ht}}).sort((Lt,dr)=>new Date(dr.checkoutDate).getTime()-new Date(Lt.checkoutDate).getTime()),Gt=ct.find(Lt=>!Lt.actualReturnDate)||null;return{checkoutHistory:ct,currentCheckout:Gt}},[r,a,s,o,l]),ge=I.useMemo(()=>{if(!r)return aBe;const ct=(r.sizes||[]).map(Gt=>{if(typeof Gt=="string")return{value:Gt,unitCost:null,cartonSize:null,uom:null};const Lt=Gt;return{value:Lt.value||Lt.size||"",unitCost:Lt.unitCost,cartonSize:Lt.cartonSize,uom:Lt.uom}});return{manufacturerId:r.manufacturerId||null,supplierId:r.supplierId||null,productType:r.productType||"",style:r.style||"",line:r.line||"",sizes:ct,finish:r.finish||"",color:r.color||"",sampleFormat:r.sampleFormat||"Loose",boardColors:r.boardColors||"",sku:r.sku||"",productUrl:r.productUrl||"",unitCost:r.unitCost||null,uom:r.uom||"",cartonSize:r.cartonSize||null}},[r]);I.useEffect(()=>{e&&r&&(O(r.imageUrl?r.imageUrl:null),R(null),M(""),C(!1),X("checkouts"),w(r.id))},[r,e,w]);const we=ct=>{var Lt;const Gt=(Lt=ct.target.files)==null?void 0:Lt[0];if(Gt){R(Gt);const dr=URL.createObjectURL(Gt);O(dr),M("")}},q=async()=>{if(!(!D||!r)){V(!0);try{const ct=await fetch("/api/photos/from-url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:D,entityType:"sample",entityId:r.id})});if(!ct.ok)throw new Error("Failed to import from URL");const Gt=await ct.json();O(Gt.url),Re.success("Image imported successfully!"),R(null),await c()}catch(ct){console.error(ct),Re.error("Could not import image from URL.")}finally{V(!1)}}},Ae=async ct=>{if(r){U(!0);try{if(await d(r.id,ct),N){const Gt=new FormData;if(Gt.append("photo",N),Gt.append("entityType","sample"),Gt.append("entityId",String(r.id)),!(await fetch("/api/photos",{method:"POST",body:Gt})).ok)throw new Error("Photo upload failed during edit.")}Re.success(`Sample '${Im(r)}' updated successfully!`),C(!1)}catch(Gt){console.error("Error updating sample:",Gt),Re.error("Failed to update sample.")}finally{U(!1)}}},Pe=async()=>{if(!r||!ne){Re.error("Could not find active checkout record to return.");return}try{await p(ne),Re.success(`'${Im(r)}' has been returned.`),t()}catch(ct){console.error("Failed to return sample:",ct),Re.error("An error occurred while returning the sample.")}},He=async()=>{if(!r||!ne){Re.error("Could not find active checkout record to extend.");return}try{await x(ne)}catch{Re.error("An error occurred while extending the checkout.")}},je=async()=>{if(r&&window.confirm(`Are you sure you want to permanently delete "${Im(r)}"? This cannot be undone.`)){Z(!0);try{await m(r.id),Re.success(`Sample "${Im(r)}" deleted.`),t()}catch(ct){console.error(ct),Re.error(ct.message||"Failed to delete sample.")}finally{Z(!1)}}},$e=()=>{const ct=window.open("","_blank");ct&&se.current&&(ct.document.write("<html><head><title>Print QR Code</title>"),ct.document.write("<style>body { text-align: center; font-family: sans-serif; } img { width: 250px; height: 250px; } </style>"),ct.document.write("</head><body>"),ct.document.write(se.current.innerHTML),ct.document.write("</body></html>"),ct.document.close(),ct.print())},Ze=()=>{if(!r||!r.unitCost||!fe)return null;const ct=r.supplierId||r.manufacturerId,Gt=i.find(ye=>ye.id===ct),Lt=yh(Gt,fe,"Customer"),dr=vh(Number(r.unitCost),Lt.percentage,Lt.method),Ht=r.cartonSize?dr*Number(r.cartonSize):null;return{retailPrice:dr,cartonPrice:Ht,rules:Lt}},lt=async()=>{if(!r)return;const ct=r.isDiscontinued?"restore":"discontinue";if(confirm(`Are you sure you want to ${ct} "${Im(r)}"?`)){Ce(!0);try{await v(r.id,!r.isDiscontinued),t()}catch{}finally{Ce(!1)}}};return!e||!r?null:u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-surface-container-high p-6 md:p-10 rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-y-auto border border-outline/10",onClick:ct=>ct.stopPropagation(),children:[u.jsxs("div",{className:"flex justify-between items-start mb-6",children:[u.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:_?"Editing Sample":Im(r)}),u.jsxs("button",{onClick:_?()=>C(!1):t,className:"p-2 rounded-full hover:bg-surface-container-highest text-text-primary transition-colors",children:[" ",u.jsx(Gr,{className:"w-6 h-6"})," "]})]}),_?u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[u.jsxs("div",{className:"lg:col-span-3 space-y-4",children:[u.jsx("div",{className:"w-full aspect-square border-2 border-dashed border-outline/20 rounded-xl bg-surface-container-low flex items-center justify-center",children:P?u.jsx("img",{src:P,alt:"Sample Preview",className:"w-full h-full object-cover rounded"}):u.jsx("span",{className:"text-sm text-text-secondary",children:"No Image"})}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("input",{type:"file",accept:"image/*",ref:te,onChange:we,className:"hidden"}),u.jsx("button",{type:"button",onClick:()=>{var ct;return(ct=te.current)==null?void 0:ct.click()},className:"w-full py-2 px-4 bg-secondary hover:bg-secondary-hover rounded-full text-on-secondary font-semibold",children:"Upload File..."}),u.jsx("div",{className:"text-center text-xs text-text-secondary",children:"OR"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"url",placeholder:"Paste image URL...",value:D,onChange:ct=>M(ct.target.value),className:"w-full p-2 bg-surface-container-highest border-transparent rounded-lg text-sm text-text-primary focus:ring-2 focus:ring-primary"}),u.jsx("button",{type:"button",onClick:q,disabled:!D||ee,className:"p-2 bg-primary hover:bg-primary-hover rounded-full text-on-primary disabled:opacity-50",children:ee?"...":u.jsx(I4,{size:16})})]})]})]}),u.jsxs("div",{className:"lg:col-span-9",children:[u.jsx(Ple,{initialData:ge,onSave:Ae,onCancel:()=>C(!1),isSaving:B||ee,saveButtonText:"Save Changes"}),((kt=n==null?void 0:n.roles)==null?void 0:kt.includes("Admin"))&&u.jsx("div",{className:"mt-6 pt-6 border-t border-outline/10 flex justify-end",children:u.jsxs("button",{type:"button",onClick:je,className:"py-2 px-6 bg-error-container hover:bg-error/20 text-error rounded-full font-semibold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:H,children:[u.jsx(Bs,{size:16}),H?"Deleting...":"Delete Sample"]})})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[u.jsx("div",{className:"lg:col-span-3 space-y-4",children:u.jsx("div",{className:"w-full aspect-square border-2 border-dashed border-outline/10 rounded-xl bg-surface-container-low flex items-center justify-center overflow-hidden",children:P?u.jsx("img",{src:P,alt:"Sample Preview",className:"w-full h-full object-cover"}):u.jsx("span",{className:"text-sm text-text-secondary",children:"No Image"})})}),u.jsx("div",{className:"lg:col-span-6 space-y-4",children:u.jsxs("div",{className:"space-y-3 text-text-secondary",children:[u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Manufacturer:"})," ",r.manufacturerName||"N/A"]}),r.supplierId!==r.manufacturerId&&r.supplierName&&u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Supplier:"})," ",r.supplierName]}),u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Product Type:"})," ",r.productType]}),u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Style:"})," ",r.style]}),r.color&&u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Color:"})," ",r.color]}),r.line&&u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Line:"})," ",r.line]}),r.sizes&&r.sizes.length>0&&u.jsxs("div",{className:"mt-2",children:[u.jsx("p",{className:"font-bold text-text-primary mb-1",children:"Available Sizes:"}),u.jsx("ul",{className:"space-y-1 bg-surface-container-low p-3 rounded-xl border border-outline/10",children:r.sizes.map((ct,Gt)=>{var ye;const Lt=typeof ct=="string",dr=Lt?ct:ct.value||ct.size||"Unknown Size";let Ht=null;if(!Lt&&ct.unitCost&&fe){const Me=r.supplierId||r.manufacturerId,qe=i.find(_e=>_e.id===Me),it=yh(qe,fe,"Customer"),ze=vh(Number(ct.unitCost),it.percentage,it.method);Ht=zm(ze)}else(ye=Ze())!=null&&ye.retailPrice&&(Ht=zm(Ze().retailPrice));return u.jsxs("li",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"font-medium text-text-primary",children:dr}),Ht&&u.jsxs("span",{className:"text-success font-bold",children:[Ht," ",u.jsxs("span",{className:"text-xs text-text-secondary font-normal",children:["/ ",!Lt&&ct.uom?ct.uom:r.uom]})]})]},Gt)})})]}),r.finish&&u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Finish:"})," ",r.finish]}),r.productType==="Tile"&&r.sampleFormat&&u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Format:"})," ",r.sampleFormat," Sample"]}),r.productType==="Tile"&&r.sampleFormat==="Board"&&r.boardColors&&u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Board Colors:"})," ",r.boardColors]}),(r.unitCost||r.cartonSize)&&u.jsxs("div",{className:"mt-2 p-4 bg-surface-container-low rounded-xl border border-outline/10",children:[u.jsx("h5",{className:"text-sm font-semibold text-text-primary border-b border-outline/10 pb-2 mb-2",children:"Pricing & Packaging"}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-sm",children:[r.unitCost!==null&&r.unitCost!==void 0&&u.jsxs("p",{className:"text-text-secondary",children:[u.jsx("strong",{className:"text-text-primary",children:"Cost:"})," ",zm(r.unitCost)," / ",r.uom]}),fe&&((ht=Ze())==null?void 0:ht.retailPrice)&&u.jsxs("p",{className:"text-success font-bold",children:["Retail: ",zm(Ze().retailPrice)," / ",r.uom]}),r.cartonSize!==null&&r.cartonSize!==void 0&&u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Carton:"})," ",r.cartonSize," ",r.uom]}),fe&&((_r=Ze())==null?void 0:_r.cartonPrice)&&u.jsxs("p",{className:"col-span-2 mt-2 pt-2 border-t border-outline/10 text-success font-medium",children:["Retail per Carton: ",zm(Ze().cartonPrice)]})]})]}),u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"SKU:"})," ",r.sku||"N/A"]}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx("strong",{className:"text-text-primary",children:"Product Link:"})," ",r.productUrl?u.jsxs("a",{href:r.productUrl,target:"_blank",rel:"noopener noreferrer",className:"text-accent hover:underline flex items-center",children:["Visit Site ",u.jsx(Ux,{size:14,className:"ml-1"})]}):"N/A"]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-outline/10",children:[u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx("strong",{className:"text-text-primary",children:"Status:"})," ",u.jsx("span",{className:`font-bold px-3 py-1 rounded-full text-xs ${r.isAvailable?"bg-success-container text-success":"bg-warning-container text-warning"}`,children:r.isAvailable?"Available":"Checked Out"})]}),r.isDiscontinued&&u.jsxs("p",{className:"mt-2 flex items-center gap-2",children:[u.jsx("strong",{className:"text-text-primary",children:"Archived Status:"})," ",u.jsx("span",{className:"font-bold px-3 py-1 rounded-full text-xs bg-error-container text-error",children:"Discontinued"})]})]})]})}),u.jsx("div",{className:"lg:col-span-3 space-y-4",children:u.jsxs("div",{className:"bg-surface-container-low p-6 rounded-xl text-center border border-outline/10",children:[u.jsxs("h4",{className:"font-semibold text-text-primary mb-2 flex items-center justify-center gap-2",children:[u.jsx(eT,{})," Sample QR Code"]}),u.jsxs("div",{ref:se,children:[u.jsx("img",{src:`/api/samples/${r.id}/qr`,alt:"Sample QR Code",className:"w-48 h-48 mx-auto bg-white p-2 rounded-md"}),u.jsxs("p",{className:"text-xs text-text-secondary mt-2 font-mono",children:["ID: ",r.id]}),u.jsx("p",{className:"text-sm font-semibold mt-1 text-text-primary",children:Im(r)})]}),u.jsxs("button",{type:"button",onClick:$e,className:"mt-4 w-full flex items-center justify-center gap-2 py-2 px-6 bg-secondary hover:bg-secondary-hover rounded-full text-on-secondary font-semibold",children:[u.jsx(cy,{size:16}),"Print"]})]})})]}),u.jsxs("div",{className:"mt-8 border-t border-outline/10 pt-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("div",{className:"flex items-center",children:u.jsx("h3",{className:"text-xl font-semibold text-text-primary flex items-center",children:Q==="checkouts"?u.jsxs(u.Fragment,{children:[u.jsx(pd,{className:"w-6 h-6 mr-2 text-accent"})," Checkout History"]}):u.jsxs(u.Fragment,{children:[u.jsx(Bx,{className:"w-6 h-6 mr-2 text-accent"})," Change History"]})})}),u.jsx("button",{type:"button",onClick:()=>X(ct=>ct==="checkouts"?"changes":"checkouts"),className:"text-sm text-accent hover:underline",children:Q==="checkouts"?"Show Change History":"Show Checkout History"})]}),u.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto pr-2",children:Q==="checkouts"?re.length>0?re.map(ct=>u.jsxs("li",{className:"bg-surface-container-low p-3 rounded-xl flex justify-between items-center list-none border border-outline/5",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-semibold text-text-primary",children:["Checked out to ",u.jsx(ai,{to:ct.entityLink,className:"text-accent hover:underline",children:ct.entityName})]}),u.jsxs("p",{className:"text-xs text-text-secondary",children:[new Date(ct.checkoutDate).toLocaleDateString()," ",u.jsx(y8e,{className:"inline w-4 h-4 mx-1"})," ",ct.actualReturnDate?new Date(ct.actualReturnDate).toLocaleDateString():"Present"]})]}),u.jsx("span",{className:`px-3 py-1 text-xs rounded-full font-bold ${ct.actualReturnDate?"bg-surface-container text-text-secondary":"bg-warning-container text-warning"}`,children:ct.actualReturnDate?"Returned":"Active"})]},ct.id)):u.jsx("p",{className:"text-text-secondary text-center py-4",children:"No checkout history for this sample."}):u.jsx(pb,{history:b})})]}),u.jsxs("div",{className:"flex justify-end gap-4 mt-8 border-t border-outline/10 pt-6",children:[((er=n==null?void 0:n.roles)==null?void 0:er.includes("Admin"))&&!_&&u.jsx("div",{className:"mr-auto",children:u.jsxs("button",{type:"button",onClick:lt,disabled:ie||!r.isAvailable&&!r.isDiscontinued,className:`flex items-center py-2 px-6 rounded-full font-semibold transition-colors ${r.isDiscontinued?"bg-success-container text-success hover:bg-success/20":"bg-warning-container text-warning hover:bg-warning/20"}`,children:[u.jsx(hS,{className:"w-4 h-4 mr-2"})," ",r.isDiscontinued?"Restore Sample":"Discontinue Sample"]})}),!_&&u.jsxs("div",{className:"flex items-center gap-4",children:[!r.isAvailable&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{type:"button",onClick:He,className:"flex items-center py-2 px-6 bg-primary-container hover:bg-primary text-primary hover:text-on-primary font-medium rounded-full transition-colors",children:[u.jsx(od,{className:"w-4 h-4 mr-2"})," Extend"]}),u.jsxs("button",{type:"button",onClick:Pe,className:"flex items-center py-2 px-6 bg-secondary hover:bg-secondary-hover text-on-secondary font-medium rounded-full shadow-sm transition-colors",children:[u.jsx(M7,{className:"w-4 h-4 mr-2"})," Return Sample"]})]}),u.jsx("button",{type:"button",onClick:t,className:"py-2 px-6 bg-surface hover:bg-surface-container-highest border border-outline/20 text-text-secondary rounded-full font-medium transition-colors",children:"Close"}),u.jsxs("button",{type:"button",onClick:()=>C(!0),className:"flex items-center py-2 px-6 bg-primary hover:bg-primary-hover rounded-full text-on-primary font-semibold shadow-md transition-all",children:[u.jsx(Qh,{className:"w-4 h-4 mr-2"})," Edit Sample"]})]})]})]})]})}),u.jsx(hb,{isOpen:Y,onClose:()=>ce(!1),onSave:f,initialVendorType:W})]})},oBe=()=>{const{data:e=[]}=Yh(),{data:t=[]}=QE(),{data:r=[]}=C4(),{samples:n}=Kr(),[i,a]=I.useState("Recap"),[s,o]=I.useState(!0),[l,c]=I.useState(!1),[d,f]=I.useState(null),p=(C,N)=>{const R=C.createdAt?new Date(C.createdAt).getTime():0,P=N.createdAt?new Date(N.createdAt).getTime():0;return(isNaN(P)?0:P)-(isNaN(R)?0:R)},m=I.useMemo(()=>t.filter(C=>!C.actualReturnDate).sort((C,N)=>new Date(C.expectedReturnDate).getTime()-new Date(N.expectedReturnDate).getTime()),[t]),x=I.useMemo(()=>{const C=new Date;C.setHours(0,0,0,0);const N=new Date(C);return N.setDate(C.getDate()+5),r.filter(R=>{if(R.status!=="Ordered"&&R.status!=="Damage Replacement"||!R.etaDate)return!1;const P=R.etaDate.includes("T")?R.etaDate.split("T")[0]:R.etaDate;return new Date(`${P}T00:00:00`)<=N}).sort((R,P)=>{const O=R.etaDate&&R.etaDate.includes("T")?R.etaDate.split("T")[0]:R.etaDate,D=P.etaDate&&P.etaDate.includes("T")?P.etaDate.split("T")[0]:P.etaDate;return new Date(O).getTime()-new Date(D).getTime()})},[r]),v=I.useMemo(()=>{const C={[ar.QUOTING]:1,[ar.ACCEPTED]:2,[ar.SCHEDULED]:3};return e.filter(N=>N.status===ar.QUOTING||N.status===ar.ACCEPTED||N.status===ar.SCHEDULED).sort((N,R)=>{const P=C[N.status],O=C[R.status];return P!==O?P-O:p(N,R)})},[e]),b=I.useMemo(()=>{if(i===ar.CANCELLED)return e.filter(N=>N.status===ar.CANCELLED).sort(p);if(i===ar.COMPLETED)return e.filter(N=>N.status===ar.COMPLETED).sort(p);const C=e.filter(N=>![ar.COMPLETED,ar.CLOSED,ar.CANCELLED].includes(N.status)).sort(p);return i==="All"?C:C.filter(N=>N.status===i)},[e,i]),w=["Recap","All",ar.NEW,ar.SAMPLE_CHECKOUT,ar.AWAITING_DECISION,ar.QUOTING,ar.ACCEPTED,ar.SCHEDULED,ar.COMPLETED,ar.CANCELLED],_=C=>{const N=n.find(R=>{var P;return R.id===parseInt(C.id)||R.sku===((P=C.variants[0])==null?void 0:P.sku)});N&&f(N)};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 px-1",children:[u.jsx("h1",{className:"text-4xl font-bold text-text-primary tracking-tight",children:"Dashboard"}),u.jsxs("button",{onClick:()=>c(!0),className:"bg-primary hover:bg-primary-hover text-on-primary font-semibold py-3 px-6 rounded-full transition-all shadow-lg hover:shadow-xl flex items-center gap-2",children:[u.jsx(U8e,{size:20}),"New Checkout"]})]}),u.jsxs("div",{className:"flex items-center space-x-2 overflow-x-auto pb-2 px-1 no-scrollbar after:content-[''] after:min-w-[1rem]",children:[u.jsx("button",{onClick:()=>o(!s),className:"flex items-center space-x-2 p-2 rounded-full hover:bg-surface-container-high transition-colors cursor-pointer mr-2 text-text-secondary",children:u.jsx(a8,{className:"w-5 h-5 flex-shrink-0"})}),s&&u.jsx("div",{className:"flex space-x-2",children:w.map(C=>u.jsx("button",{onClick:()=>a(C),className:`px-4 py-2 text-sm rounded-full transition-colors flex-shrink-0 font-medium border ${i===C?"bg-primary-container text-on-primary-container border-transparent":"bg-surface text-text-secondary border-outline hover:bg-surface-container-high"}`,children:C},C))})]}),u.jsx("div",{children:i==="Recap"?u.jsxs("div",{children:[u.jsx(jle,{title:"Active Sample Checkouts",checkouts:m,onItemClick:_}),u.jsx(Z9e,{title:"Upcoming Deliveries (Next 5 Days)",orders:x,projects:e}),u.jsx(hT,{title:"Active Pipeline",projects:v})]}):u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-semibold mb-4 text-text-primary",children:["Projects: ",i]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.length>0?b.map(C=>u.jsx(ai,{to:`/projects/${C.id}`,children:u.jsx(hT,{title:"",projects:[C]})},C.id)):u.jsxs("p",{className:"text-text-secondary col-span-full text-center py-8",children:['No projects match the filter "',i,'".']})})]})}),u.jsx(q9e,{isOpen:l,onClose:()=>c(!1)}),u.jsx(sBe,{isOpen:!!d,onClose:()=>f(null),sample:d})]})},lBe=({currentBuild:e,requiredBuild:t,downloadUrl:r})=>u.jsx(td,{children:u.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-scrim/80 backdrop-blur-sm",children:u.jsxs("div",{className:"bg-surface-container-high w-full max-w-md rounded-2xl p-8 shadow-2xl border border-error-container text-center animate-in zoom-in-95 duration-200",children:[u.jsx("div",{className:"mx-auto w-16 h-16 bg-error-container rounded-full flex items-center justify-center mb-6",children:u.jsx(ld,{className:"w-8 h-8 text-on-error-container"})}),u.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"Update Required"}),u.jsx("p",{className:"text-text-secondary mb-6 leading-relaxed",children:"This version of the app is outdated and no longer supported by the server. Please download the latest version to continue."}),u.jsxs("div",{className:"bg-surface-container rounded-xl p-4 mb-8 text-sm text-text-secondary border border-outline/20",children:[u.jsxs("div",{className:"flex justify-between mb-1",children:[u.jsx("span",{children:"Your Build:"}),u.jsx("span",{className:"font-mono text-error",children:e})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Required:"}),u.jsxs("span",{className:"font-mono text-tertiary",children:[t,"+"]})]})]}),u.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full py-3 bg-primary hover:bg-primary-hover text-on-primary rounded-full font-semibold transition-transform active:scale-95 shadow-md",children:[u.jsx(mS,{size:20}),"Download Update"]})]})})}),cBe="Flooring Job Tracker",uBe="A web-based job management application for a flooring store to track a customer's journey from initial sample checkout through quoting, scheduling, and final job closure.",dBe=[],fBe="2.00",hBe=2,pBe=2,mBe="https://github.com/adampdxdotcom/subfloor/releases/download/Android/subfloor-2.00.apk",gBe="https://subfloor.app/update",xBe=!1,HG={name:cBe,description:uBe,requestFramePermissions:dBe,version:fBe,mobileBuild:hBe,minMobileBuild:pBe,apkDownloadUrl:mBe,releaseNotesUrl:gBe,critical:xBe},vBe=()=>{const[e,t]=I.useState(null);return I.useEffect(()=>{const r=async()=>{var i;try{const a=await fetch(sr("/api/system/info"));if(!a.ok)return;const s=await a.json();if((i=window.Capacitor)==null?void 0:i.isNativePlatform()){const l=await JA.getInfo(),c=parseInt(l.build||"0",10),d=parseInt(s.minMobileBuild||"0",10);if(c<d){console.warn(` Force Update Triggered: Build ${c} < ${d}`),t({current:c,required:d,url:s.apkDownloadUrl||"https://github.com"});return}}s.version&&s.version!==HG.version&&qr(l=>u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsxs("span",{className:"font-semibold",children:["New update available!",u.jsxs("span",{className:"block text-xs font-normal opacity-75",children:["v",HG.version,"  v",s.version]})]}),u.jsx("button",{onClick:()=>window.location.reload(),className:"bg-primary text-white px-3 py-1.5 rounded text-sm hover:bg-primary-hover transition-colors",children:"Refresh to Update"})]}),{id:"version-update-toast",duration:1/0,position:"bottom-right",icon:"",style:{border:"1px solid #3b82f6",padding:"16px"}})}catch(a){console.warn("Failed to check version:",a)}};r();const n=setInterval(r,15*60*1e3);return()=>clearInterval(n)},[]),e?u.jsx(lBe,{currentBuild:e.current,requiredBuild:e.required,downloadUrl:e.url}):null},yBe=(e,t)=>{if(!e)return"Not Scheduled";const r=new Date(e);if(!t||r.toDateString()===new Date(t).toDateString())return r.toLocaleDateString("en-US",{month:"short",day:"numeric"});const n=new Date(t),i=r.toLocaleString("default",{month:"short"}),a=r.getDate(),s=n.getDate();return`${i} ${a} - ${s}`},bBe=()=>{const{data:e=[]}=Mx(),{data:t=[]}=Yh(),{data:r=[]}=QE(),[n,i]=I.useState(""),[a,s]=I.useState(!1),o=I.useMemo(()=>{const d=new Set;return r.forEach(f=>{f.actualReturnDate===null&&d.add(f.projectId)}),t.filter(f=>d.has(f.id)).sort((f,p)=>{const m=Math.min(...r.filter(v=>v.projectId===f.id&&!v.actualReturnDate).map(v=>new Date(v.expectedReturnDate).getTime())),x=Math.min(...r.filter(v=>v.projectId===p.id&&!v.actualReturnDate).map(v=>new Date(p.expectedReturnDate).getTime()));return m-x})},[t,r]),l=I.useMemo(()=>{const d={[ar.QUOTING]:1,[ar.ACCEPTED]:2,[ar.SCHEDULED]:3};return t.filter(f=>f.status===ar.QUOTING||f.status===ar.ACCEPTED||f.status===ar.SCHEDULED).sort((f,p)=>{const m=d[f.status],x=d[p.status];if(m!==x)return m-x;const v=f.createdAt?new Date(f.createdAt).getTime():0,b=p.createdAt?new Date(p.createdAt).getTime():0;return(isNaN(b)?0:b)-(isNaN(v)?0:v)})},[t]),c=I.useMemo(()=>{if(!e)return[];const d=n.toLowerCase();return e.filter(f=>{var x,v;const p=(((x=f.fullName)==null?void 0:x.toLowerCase())??"").includes(d),m=(((v=f.email)==null?void 0:v.toLowerCase())??"").includes(d);return p||m}).sort((f,p)=>f.fullName.localeCompare(p.fullName))},[e,n]);return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 px-1",children:[u.jsx("h1",{className:"text-4xl font-bold text-text-primary tracking-tight",children:"Customers"}),u.jsxs("button",{onClick:()=>s(!0),className:"flex items-center justify-center bg-primary hover:bg-primary-hover text-on-primary font-semibold py-3 px-6 rounded-full transition-all shadow-lg hover:shadow-xl md:w-auto w-full",children:[u.jsx(lu,{className:"w-5 h-5 mr-2"}),"Add Customer"]})]}),u.jsxs("div",{className:"relative w-full max-w-2xl",children:[u.jsx(gc,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-secondary",size:20}),u.jsx("input",{type:"text",placeholder:"Search customers...",value:n,onChange:d=>i(d.target.value),className:"w-full pl-12 pr-6 py-4 bg-surface-container-high border-none rounded-full text-text-primary focus:ring-2 focus:ring-primary/50 outline-none transition-shadow shadow-sm hover:shadow-md placeholder:text-text-tertiary"})]}),n===""&&u.jsxs(u.Fragment,{children:[u.jsx(hT,{title:"Projects with Samples Out",projects:o}),u.jsx(hT,{title:"Projects in Active Pipeline",projects:l}),u.jsx("div",{className:"border-t border-outline/10 my-8"}),u.jsx("h2",{className:"text-2xl font-semibold mb-6 text-text-primary pl-1",children:"All Customers"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[c.map(d=>u.jsxs(ai,{to:`/customers/${d.id}`,className:"block bg-surface-container-high p-6 rounded-xl shadow-sm border border-outline/10 hover:shadow-md hover:-translate-y-1 transition-all duration-300 group",children:[u.jsxs("div",{className:"flex items-center mb-4",children:[u.jsx("div",{className:"w-12 h-12 bg-primary-container rounded-full flex items-center justify-center mr-4 shrink-0 text-primary",children:u.jsx(oc,{className:"w-6 h-6"})}),u.jsx("div",{children:u.jsx("h2",{className:"text-xl font-bold text-text-primary truncate",children:d.fullName})})]}),u.jsxs("div",{className:"space-y-2 text-sm text-text-secondary",children:[u.jsxs("p",{className:"flex items-center",children:[u.jsx(Xc,{className:"w-4 h-4 mr-3 shrink-0 opacity-70"})," ",u.jsx("span",{className:"truncate",children:d.email||"N/A"})]}),u.jsxs("p",{className:"flex items-center",children:[u.jsx(w0,{className:"w-4 h-4 mr-3 shrink-0 opacity-70"})," ",u.jsx("span",{className:"truncate",children:d.phoneNumber||"N/A"})]}),u.jsxs("p",{className:"flex items-center",children:[u.jsx(P4,{className:"w-4 h-4 mr-3 shrink-0 opacity-70"})," ",u.jsx("span",{className:"truncate",children:d.address||"N/A"})]})]}),d.jobs&&d.jobs.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"border-t border-outline/10 my-4"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h3",{className:"text-sm font-semibold text-text-secondary flex items-center mb-2",children:[u.jsx(Mh,{className:"w-4 h-4 mr-2"}),"Scheduled Jobs"]}),d.jobs.map(f=>u.jsxs("div",{className:"text-xs text-text-secondary grid grid-cols-3 gap-2 items-center",children:[u.jsx("span",{className:"col-span-1 truncate font-medium text-text-primary",children:f.projectName}),u.jsxs("span",{className:"col-span-1 truncate text-center",children:["(",f.installerName||"N/A",")"]}),u.jsx("span",{className:"col-span-1 truncate text-right",children:yBe(f.scheduledStartDate,f.scheduledEndDate)})]},f.projectId))]})]})]},d.id)),n!==""&&c.length===0&&u.jsx("p",{className:"text-text-secondary col-span-full text-center py-8",children:"No customers match your search."})]}),u.jsx(L7,{isOpen:a,onClose:()=>s(!1),customer:null})]})},e9=({title:e,icon:t,actions:r,children:n,defaultOpen:i=!0})=>{const[a,s]=I.useState(i);return u.jsxs("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10",children:[u.jsxs("div",{className:"flex justify-between items-center p-4 cursor-pointer hover:bg-surface-container-highest/50 transition-colors",onClick:()=>s(!a),children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{className:"text-primary mr-4",children:t}),u.jsx("h2",{className:"text-lg font-bold text-text-primary",children:e})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{onClick:o=>o.stopPropagation(),children:r}),u.jsx(cs,{className:`w-6 h-6 text-text-secondary transition-transform duration-300 ${a?"rotate-180":""}`})]})]}),u.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${a?"max-h-[2000px]":"max-h-0"}`,children:u.jsx("div",{className:"px-4 pb-4 pt-2 border-t border-outline/10",children:n})})]})},Dle=({sample:e,onStartProject:t})=>{const r=e,n=r.interestVariantThumbnail||r.productThumbnail,i=r.interestVariantName?`${r.interestVariantName} (${r.productName})`:r.productName||`Sample #${e.id}`;return u.jsxs("div",{className:"bg-surface-container-high p-4 rounded-xl shadow-sm border border-outline/10 flex gap-4 transition-all hover:shadow-md relative group",children:[u.jsxs("div",{className:"w-20 h-20 bg-surface-container-low rounded-lg border border-outline/10 flex items-center justify-center shrink-0 overflow-hidden relative",children:[n?u.jsx("img",{src:ds(n),alt:i,className:"w-full h-full object-cover"}):u.jsx(yf,{className:"text-text-tertiary w-8 h-8"}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-[10px] text-center py-0.5 truncate",children:e.sampleType||"Sample"})]}),u.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-between py-0.5",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-text-primary text-sm line-clamp-2",title:i,children:i}),u.jsxs("div",{className:"flex items-center gap-1 mt-1.5 text-xs text-text-secondary",children:[u.jsx(pd,{size:12}),u.jsx("span",{children:af(e.checkoutDate)})]})]}),u.jsx("div",{className:"mt-2",children:e.projectId?u.jsxs("div",{className:"flex items-center gap-1 text-xs text-success font-bold bg-success-container px-3 py-1 rounded-full w-fit",children:[u.jsx(gh,{size:12}),u.jsx("span",{children:"Linked to Project"})]}):u.jsxs("button",{onClick:a=>{a.preventDefault(),t(e)},className:"text-xs font-bold text-on-primary bg-primary hover:bg-primary-hover px-4 py-2 rounded-full flex items-center gap-1 transition-colors shadow-sm",children:["Start Project ",u.jsx(Y0,{size:12})]})})]})]})},Mle=({isOpen:e,onClose:t,initialCustomer:r,initialInstaller:n,initialProjectName:i,transferSampleId:a})=>{const s=gu(),{data:o=[]}=vf(),{createProject:l}=Bse(),{createInstaller:c}=N7(),{createCustomer:d}=Lse(),[f,p]=I.useState("SELECT_CUSTOMER"),[m,x]=I.useState(null),[v,b]=I.useState(""),[w,_]=I.useState(Sv[0]),[C,N]=I.useState(null),[R,P]=I.useState(""),[O,D]=I.useState(!1),[M,B]=I.useState({installerName:"",contactEmail:"",contactPhone:""}),[U,H]=I.useState(""),[Z,ee]=I.useState(""),[V,te]=I.useState("");I.useEffect(()=>{e&&(r?(x(r),p("CREATE_PROJECT")):(x(null),p("SELECT_CUSTOMER")),N(n||null),P((n==null?void 0:n.installerName)||""),b(i||""),_(Sv[0]),H(""),ee(""),te(""))},[e,r,n,i]);const se=Y=>{x(Y),p("CREATE_PROJECT")},Q=Y=>{H(Y),p("CREATE_CUSTOMER")},X=async Y=>{Y.preventDefault();try{const ce=await d.mutateAsync({fullName:U,email:Z||void 0,phoneNumber:V||void 0});x(ce),p("CREATE_PROJECT"),Re.success("Customer created!")}catch{Re.error("Failed to create customer.")}},fe=async Y=>{if(Y.preventDefault(),!!m){if(!v){Re.error("Project name is required.");return}try{const ce={projectName:v,projectType:w,customerId:m.id,status:"New",finalChoice:null,installerId:C?C.id:void 0},W=await l.mutateAsync(ce);a&&await Jse([a],W.id),Re.success("Project created successfully!"),t(),s(`/projects/${W.id}`)}catch(ce){console.error(ce),Re.error("Failed to create project.")}}},Se=async Y=>{Y.preventDefault();try{const ce=await c.mutateAsync(M);N(ce),P(ce.installerName),D(!1)}catch{Re.error("Failed to add installer.")}};return e?u.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-2xl shadow-2xl w-full max-w-xl border border-outline/20 relative",children:[u.jsxs("div",{className:"flex items-center mb-6",children:[f!=="SELECT_CUSTOMER"&&u.jsx("button",{onClick:()=>p("SELECT_CUSTOMER"),className:"text-text-secondary hover:text-text-primary p-2 rounded-full hover:bg-surface-container-highest mr-2",children:u.jsx(rf,{size:20})}),u.jsx("h2",{className:"text-2xl font-bold text-text-primary flex-grow",children:f==="CREATE_CUSTOMER"?"New Customer":"Start New Project"}),u.jsx("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-2 rounded-full hover:bg-surface-container-highest",children:u.jsx(Gr,{size:20})})]}),f==="SELECT_CUSTOMER"&&u.jsxs("div",{children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1.5",children:"Select Customer"}),u.jsx(koe,{onCustomerSelect:se,onRequestNewCustomer:Q})]}),u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{onClick:t,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors",children:"Cancel"})})]}),f==="CREATE_CUSTOMER"&&u.jsxs("form",{onSubmit:X,className:"space-y-4",children:[u.jsx("input",{type:"text",placeholder:"Full Name",value:U,onChange:Y=>H(Y.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",required:!0}),u.jsx("input",{type:"email",placeholder:"Email (Optional)",value:Z,onChange:Y=>ee(Y.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"}),u.jsx("input",{type:"tel",placeholder:"Phone (Optional)",value:V,onChange:Y=>te(Y.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"}),u.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[u.jsx("button",{type:"button",onClick:()=>p("SELECT_CUSTOMER"),className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors",children:"Back"}),u.jsx("button",{type:"submit",className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all",children:"Save & Continue"})]})]}),f==="CREATE_PROJECT"&&m&&u.jsxs("form",{onSubmit:fe,className:"space-y-4",children:[!r&&u.jsxs("div",{className:"flex justify-between items-center bg-surface-container p-3 rounded-lg border border-outline/20 text-sm",children:[u.jsx("span",{className:"text-text-primary font-bold",children:m.fullName}),u.jsx("button",{type:"button",onClick:()=>{x(null),p("SELECT_CUSTOMER")},className:"text-primary hover:underline font-medium",children:"Change"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Project Name"}),u.jsx("input",{type:"text",value:v,onChange:Y=>b(Y.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Project Type"}),u.jsx("select",{value:w,onChange:Y=>_(Y.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",children:Sv.map(Y=>u.jsx("option",{value:Y,children:Y},Y))})]}),O?u.jsxs("div",{className:"bg-surface-container p-4 rounded-lg border border-outline/20",children:[u.jsx("h4",{className:"font-semibold text-md mb-3 text-text-primary",children:"New Installer"}),u.jsx("input",{type:"text",placeholder:"Name",value:M.installerName,onChange:Y=>B({...M,installerName:Y.target.value}),className:"w-full bg-surface-container-low border border-outline/50 rounded-lg px-3 py-2 mb-2 text-sm text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"button",onClick:()=>D(!1),className:"flex-1 py-1.5 px-4 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest text-xs font-medium",children:"Cancel"}),u.jsx("button",{type:"button",onClick:Se,className:"flex-1 py-1.5 px-4 rounded-full bg-primary text-on-primary text-xs font-semibold",children:"Save"})]})]}):u.jsxs("div",{className:"relative",children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Installer (Optional)"}),u.jsx("input",{type:"text",placeholder:"Search installers...",value:R,onChange:Y=>{P(Y.target.value),N(null)},className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",disabled:!!n}),R&&!C&&!n&&u.jsxs("div",{className:"absolute z-10 w-full bg-surface-container-high border border-outline/20 rounded-lg mt-1 max-h-48 overflow-y-auto shadow-xl",children:[o.filter(Y=>Y.installerName.toLowerCase().includes(R.toLowerCase())).map(Y=>u.jsx("div",{onClick:()=>{N(Y),P(Y.installerName)},className:"px-4 py-2 hover:bg-primary-container/30 cursor-pointer text-text-primary",children:Y.installerName},Y.id)),u.jsxs("div",{className:"p-2 border-t border-outline/20 text-center text-primary text-sm cursor-pointer hover:bg-primary-container/30 font-medium",onClick:()=>{B(Y=>({...Y,installerName:R})),D(!0)},children:['+ Add New "',R,'"']})]})]}),u.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[u.jsx("button",{type:"button",onClick:t,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors",children:"Cancel"}),u.jsx("button",{type:"submit",className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all",children:"Create & Transfer"})]})]})]})}):null},wBe=()=>{const{customerId:e}=Ex(),{customers:t,projects:r,fetchCustomerHistory:n,customerHistory:i,systemBranding:a}=Kr();gu();const[s,o]=I.useState(!1),[l,c]=I.useState(null),[d,f]=I.useState(""),[p,m]=I.useState([]),[x,v]=I.useState(!1),b=t.find(C=>C.id===parseInt(e||"")),w=r.filter(C=>C.customerId===(b==null?void 0:b.id));if(I.useEffect(()=>{if(e){const C=parseInt(e);n(C),v6e(C).then(m).catch(console.error)}},[e,n]),!b)return u.jsx("div",{className:"text-center text-text-secondary",children:"Customer not found."});const _=C=>{const N=C.productName||"Flooring";f(`${N} Project`),c(C.id),o(!0)};return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-surface-container-high p-8 rounded-xl shadow-sm border border-outline/10",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start",children:[u.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[u.jsx("div",{className:"w-16 h-16 bg-primary-container rounded-full flex items-center justify-center mr-6 text-primary",children:u.jsx(oc,{className:"w-8 h-8"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:b.fullName}),u.jsxs("p",{className:"text-text-secondary",children:["Customer since ",af(b.createdAt,a==null?void 0:a.systemTimezone)]})]})]}),u.jsxs("button",{onClick:()=>v(!0),className:"flex items-center bg-surface-container-highest hover:bg-surface-container border border-outline/20 text-text-primary font-medium py-2 px-4 rounded-lg transition-colors",children:[u.jsx(Qh,{className:"w-4 h-4 mr-2"}),"Edit Customer"]})]}),u.jsx("div",{className:"border-t border-outline/10 my-6"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-text-secondary",children:[u.jsxs("p",{className:"flex items-center",children:[u.jsx(Xc,{className:"w-5 h-5 mr-3 text-primary opacity-80"})," ",b.email]}),u.jsxs("p",{className:"flex items-center",children:[u.jsx(w0,{className:"w-5 h-5 mr-3 text-primary opacity-80"})," ",b.phoneNumber]}),u.jsxs("p",{className:"flex items-center col-span-full",children:[u.jsx(P4,{className:"w-5 h-5 mr-3 text-primary opacity-80"})," ",b.address]})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h2",{className:"text-2xl font-bold text-text-primary flex items-center gap-3",children:[u.jsx(Mh,{className:"w-6 h-6"})," Projects"]}),u.jsxs("button",{onClick:()=>{f(""),c(null),o(!0)},className:"flex items-center bg-primary hover:bg-primary-hover text-on-primary font-semibold py-2 px-4 rounded-full shadow-md transition-colors",children:[u.jsx(lu,{className:"w-5 h-5 mr-2"}),"New Project"]})]}),u.jsx("div",{className:"space-y-4",children:w.length>0?w.map(C=>u.jsxs(ai,{to:`/projects/${C.id}`,className:"flex justify-between items-center bg-surface-container-high p-5 rounded-xl border border-outline/10 shadow-sm hover:shadow-md hover:bg-surface-container-highest transition-all group",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-lg text-text-primary",children:C.projectName}),u.jsxs("p",{className:"text-sm text-text-secondary flex items-center gap-2 mt-1",children:[u.jsx("span",{className:`w-2 h-2 rounded-full ${C.status==="Completed"?"bg-success":"bg-primary"}`}),C.status]})]}),u.jsx(ou,{className:"w-6 h-6 text-text-secondary group-hover:text-primary transition-colors"})]},C.id)):u.jsx("p",{className:"text-center text-text-secondary py-4",children:"No projects for this customer yet."})})]}),u.jsxs("div",{children:[u.jsx("div",{className:"flex justify-between items-center mb-6",children:u.jsxs("h2",{className:"text-2xl font-bold text-text-primary flex items-center gap-3",children:[u.jsx(yf,{className:"w-6 h-6"})," Sample History"]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[p.map(C=>u.jsx(Dle,{sample:C,onStartProject:_},C.id)),p.length===0&&u.jsx("p",{className:"col-span-full text-center text-text-secondary py-4",children:"No sample history found."})]})]}),u.jsx("div",{children:u.jsx(e9,{title:"Change History",icon:u.jsx(Bx,{className:"w-6 h-6"}),defaultOpen:!1,children:u.jsx(pb,{history:i})})}),u.jsx(Mle,{isOpen:s,onClose:()=>{o(!1),c(null),f("")},initialCustomer:b,initialProjectName:d,transferSampleId:l}),u.jsx(L7,{isOpen:x,onClose:()=>v(!1),customer:b})]})};var Fle={exports:{}},aC={},b8={exports:{}};(function(e,t){(function(r,n){n(t)})(Ve,function(r){function n(re){return function(ge,we,q,Ae,Pe,He,je){return re(ge,we,je)}}function i(re){return function(ge,we,q,Ae){if(!ge||!we||typeof ge!="object"||typeof we!="object")return re(ge,we,q,Ae);var Pe=Ae.get(ge),He=Ae.get(we);if(Pe&&He)return Pe===we&&He===ge;Ae.set(ge,we),Ae.set(we,ge);var je=re(ge,we,q,Ae);return Ae.delete(ge),Ae.delete(we),je}}function a(re,ne){var ge={};for(var we in re)ge[we]=re[we];for(var we in ne)ge[we]=ne[we];return ge}function s(re){return re.constructor===Object||re.constructor==null}function o(re){return typeof re.then=="function"}function l(re,ne){return re===ne||re!==re&&ne!==ne}var c="[object Arguments]",d="[object Boolean]",f="[object Date]",p="[object RegExp]",m="[object Map]",x="[object Number]",v="[object Object]",b="[object Set]",w="[object String]",_=Object.prototype.toString;function C(re){var ne=re.areArraysEqual,ge=re.areDatesEqual,we=re.areMapsEqual,q=re.areObjectsEqual,Ae=re.areRegExpsEqual,Pe=re.areSetsEqual,He=re.createIsNestedEqual,je=He($e);function $e(Ze,lt,kt){if(Ze===lt)return!0;if(!Ze||!lt||typeof Ze!="object"||typeof lt!="object")return Ze!==Ze&&lt!==lt;if(s(Ze)&&s(lt))return q(Ze,lt,je,kt);var ht=Array.isArray(Ze),_r=Array.isArray(lt);if(ht||_r)return ht===_r&&ne(Ze,lt,je,kt);var er=_.call(Ze);return er!==_.call(lt)?!1:er===f?ge(Ze,lt,je,kt):er===p?Ae(Ze,lt,je,kt):er===m?we(Ze,lt,je,kt):er===b?Pe(Ze,lt,je,kt):er===v||er===c?o(Ze)||o(lt)?!1:q(Ze,lt,je,kt):er===d||er===x||er===w?l(Ze.valueOf(),lt.valueOf()):!1}return $e}function N(re,ne,ge,we){var q=re.length;if(ne.length!==q)return!1;for(;q-- >0;)if(!ge(re[q],ne[q],q,q,re,ne,we))return!1;return!0}var R=i(N);function P(re,ne){return l(re.valueOf(),ne.valueOf())}function O(re,ne,ge,we){var q=re.size===ne.size;if(!q)return!1;if(!re.size)return!0;var Ae={},Pe=0;return re.forEach(function(He,je){if(q){var $e=!1,Ze=0;ne.forEach(function(lt,kt){!$e&&!Ae[Ze]&&($e=ge(je,kt,Pe,Ze,re,ne,we)&&ge(He,lt,je,kt,re,ne,we))&&(Ae[Ze]=!0),Ze++}),Pe++,q=$e}}),q}var D=i(O),M="_owner",B=Object.prototype.hasOwnProperty;function U(re,ne,ge,we){var q=Object.keys(re),Ae=q.length;if(Object.keys(ne).length!==Ae)return!1;for(var Pe;Ae-- >0;){if(Pe=q[Ae],Pe===M){var He=!!re.$$typeof,je=!!ne.$$typeof;if((He||je)&&He!==je)return!1}if(!B.call(ne,Pe)||!ge(re[Pe],ne[Pe],Pe,Pe,re,ne,we))return!1}return!0}var H=i(U);function Z(re,ne){return re.source===ne.source&&re.flags===ne.flags}function ee(re,ne,ge,we){var q=re.size===ne.size;if(!q)return!1;if(!re.size)return!0;var Ae={};return re.forEach(function(Pe,He){if(q){var je=!1,$e=0;ne.forEach(function(Ze,lt){!je&&!Ae[$e]&&(je=ge(Pe,Ze,He,lt,re,ne,we))&&(Ae[$e]=!0),$e++}),q=je}}),q}var V=i(ee),te=Object.freeze({areArraysEqual:N,areDatesEqual:P,areMapsEqual:O,areObjectsEqual:U,areRegExpsEqual:Z,areSetsEqual:ee,createIsNestedEqual:n}),se=Object.freeze({areArraysEqual:R,areDatesEqual:P,areMapsEqual:D,areObjectsEqual:H,areRegExpsEqual:Z,areSetsEqual:V,createIsNestedEqual:n}),Q=C(te);function X(re,ne){return Q(re,ne,void 0)}var fe=C(a(te,{createIsNestedEqual:function(){return l}}));function Se(re,ne){return fe(re,ne,void 0)}var Y=C(se);function ce(re,ne){return Y(re,ne,new WeakMap)}var W=C(a(se,{createIsNestedEqual:function(){return l}}));function G(re,ne){return W(re,ne,new WeakMap)}function ie(re){return C(a(te,re(te)))}function Ce(re){var ne=C(a(se,re(se)));return function(ge,we,q){return q===void 0&&(q=new WeakMap),ne(ge,we,q)}}r.circularDeepEqual=ce,r.circularShallowEqual=G,r.createCustomCircularEqual=Ce,r.createCustomEqual=ie,r.deepEqual=X,r.sameValueZeroEqual=l,r.shallowEqual=Se,Object.defineProperty(r,"__esModule",{value:!0})})})(b8,b8.exports);var t9=b8.exports,w8={exports:{}},gi;function Lle(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=Lle(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function WG(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=Lle(e))&&(n&&(n+=" "),n+=t);return n}w8.exports=WG,gi=w8.exports.clsx=WG;var K4=w8.exports,bn={},SBe=function(t,r,n){return t===r?!0:t.className===r.className&&n(t.style,r.style)&&t.width===r.width&&t.autoSize===r.autoSize&&t.cols===r.cols&&t.draggableCancel===r.draggableCancel&&t.draggableHandle===r.draggableHandle&&n(t.verticalCompact,r.verticalCompact)&&n(t.compactType,r.compactType)&&n(t.layout,r.layout)&&n(t.margin,r.margin)&&n(t.containerPadding,r.containerPadding)&&t.rowHeight===r.rowHeight&&t.maxRows===r.maxRows&&t.isBounded===r.isBounded&&t.isDraggable===r.isDraggable&&t.isResizable===r.isResizable&&t.allowOverlap===r.allowOverlap&&t.preventCollision===r.preventCollision&&t.useCSSTransforms===r.useCSSTransforms&&t.transformScale===r.transformScale&&t.isDroppable===r.isDroppable&&n(t.resizeHandles,r.resizeHandles)&&n(t.resizeHandle,r.resizeHandle)&&t.onLayoutChange===r.onLayoutChange&&t.onDragStart===r.onDragStart&&t.onDrag===r.onDrag&&t.onDragStop===r.onDragStop&&t.onResizeStart===r.onResizeStart&&t.onResize===r.onResize&&t.onResizeStop===r.onResizeStop&&t.onDrop===r.onDrop&&n(t.droppingItem,r.droppingItem)&&n(t.innerRef,r.innerRef)};Object.defineProperty(bn,"__esModule",{value:!0});bn.bottom=r9;bn.childrenEqual=kBe;bn.cloneLayout=Ble;bn.cloneLayoutItem=kg;bn.collides=X4;bn.compact=$le;bn.compactItem=zle;bn.compactType=BBe;bn.correctBounds=Hle;bn.fastPositionEqual=_Be;bn.fastRGLPropsEqual=void 0;bn.getAllCollisions=Wle;bn.getFirstCollision=tg;bn.getLayoutItem=n9;bn.getStatics=i9;bn.modifyLayout=Ule;bn.moveElement=Xw;bn.moveElementAwayFromCollision=E8;bn.noop=void 0;bn.perc=ABe;bn.resizeItemInDirection=jBe;bn.setTopLeft=MBe;bn.setTransform=DBe;bn.sortLayoutItems=u9;bn.sortLayoutItemsByColRow=Xle;bn.sortLayoutItemsByRowCol=Kle;bn.synchronizeLayoutWithChildren=FBe;bn.validateLayout=LBe;bn.withLayoutItem=CBe;var VG=t9,Kw=EBe(I);function EBe(e){return e&&e.__esModule?e:{default:e}}function r9(e){let t=0,r;for(let n=0,i=e.length;n<i;n++)r=e[n].y+e[n].h,r>t&&(t=r);return t}function Ble(e){const t=Array(e.length);for(let r=0,n=e.length;r<n;r++)t[r]=kg(e[r]);return t}function Ule(e,t){const r=Array(e.length);for(let n=0,i=e.length;n<i;n++)t.i===e[n].i?r[n]=t:r[n]=e[n];return r}function CBe(e,t,r){let n=n9(e,t);return n?(n=r(kg(n)),e=Ule(e,n),[e,n]):[e,null]}function kg(e){return{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,minW:e.minW,maxW:e.maxW,minH:e.minH,maxH:e.maxH,moved:!!e.moved,static:!!e.static,isDraggable:e.isDraggable,isResizable:e.isResizable,resizeHandles:e.resizeHandles,isBounded:e.isBounded}}function kBe(e,t){return(0,VG.deepEqual)(Kw.default.Children.map(e,r=>r==null?void 0:r.key),Kw.default.Children.map(t,r=>r==null?void 0:r.key))&&(0,VG.deepEqual)(Kw.default.Children.map(e,r=>r==null?void 0:r.props["data-grid"]),Kw.default.Children.map(t,r=>r==null?void 0:r.props["data-grid"]))}bn.fastRGLPropsEqual=SBe;function _Be(e,t){return e.left===t.left&&e.top===t.top&&e.width===t.width&&e.height===t.height}function X4(e,t){return!(e.i===t.i||e.x+e.w<=t.x||e.x>=t.x+t.w||e.y+e.h<=t.y||e.y>=t.y+t.h)}function $le(e,t,r,n){const i=i9(e),a=u9(e,t),s=Array(e.length);for(let o=0,l=a.length;o<l;o++){let c=kg(a[o]);c.static||(c=zle(i,c,t,r,a,n),i.push(c)),s[e.indexOf(a[o])]=c,c.moved=!1}return s}const NBe={x:"w",y:"h"};function S8(e,t,r,n){const i=NBe[n];t[n]+=1;const a=e.map(s=>s.i).indexOf(t.i);for(let s=a+1;s<e.length;s++){const o=e[s];if(!o.static){if(o.y>t.y+t.h)break;X4(t,o)&&S8(e,o,r+t[i],n)}}t[n]=r}function zle(e,t,r,n,i,a){const s=r==="vertical",o=r==="horizontal";if(s)for(t.y=Math.min(r9(e),t.y);t.y>0&&!tg(e,t);)t.y--;else if(o)for(;t.x>0&&!tg(e,t);)t.x--;let l;for(;(l=tg(e,t))&&!(r===null&&a);)if(o?S8(i,t,l.x+l.w,"x"):S8(i,t,l.y+l.h,"y"),o&&t.x+t.w>n)for(t.x=n-t.w,t.y++;t.x>0&&!tg(e,t);)t.x--;return t.y=Math.max(t.y,0),t.x=Math.max(t.x,0),t}function Hle(e,t){const r=i9(e);for(let n=0,i=e.length;n<i;n++){const a=e[n];if(a.x+a.w>t.cols&&(a.x=t.cols-a.w),a.x<0&&(a.x=0,a.w=t.cols),!a.static)r.push(a);else for(;tg(r,a);)a.y++}return e}function n9(e,t){for(let r=0,n=e.length;r<n;r++)if(e[r].i===t)return e[r]}function tg(e,t){for(let r=0,n=e.length;r<n;r++)if(X4(e[r],t))return e[r]}function Wle(e,t){return e.filter(r=>X4(r,t))}function i9(e){return e.filter(t=>t.static)}function Xw(e,t,r,n,i,a,s,o,l){if(t.static&&t.isDraggable!==!0||t.y===n&&t.x===r)return e;`${t.i}${String(r)}${String(n)}${t.x}${t.y}`;const c=t.x,d=t.y;typeof r=="number"&&(t.x=r),typeof n=="number"&&(t.y=n),t.moved=!0;let f=u9(e,s);(s==="vertical"&&typeof n=="number"?d>=n:s==="horizontal"&&typeof r=="number"?c>=r:!1)&&(f=f.reverse());const m=Wle(f,t),x=m.length>0;if(x&&l)return Ble(e);if(x&&a)return`${t.i}`,t.x=c,t.y=d,t.moved=!1,e;for(let v=0,b=m.length;v<b;v++){const w=m[v];`${t.i}${t.x}${t.y}${w.i}${w.x}${w.y}`,!w.moved&&(w.static?e=E8(e,w,t,i,s):e=E8(e,t,w,i,s))}return e}function E8(e,t,r,n,i,a){const s=i==="horizontal",o=i==="vertical",l=t.static;if(n){n=!1;const f={x:s?Math.max(t.x-r.w,0):r.x,y:o?Math.max(t.y-r.h,0):r.y,w:r.w,h:r.h,i:"-1"},p=tg(e,f),m=p&&p.y+p.h>t.y,x=p&&t.x+t.w>p.x;if(p){if(m&&o)return Xw(e,r,void 0,t.y+1,n,l,i);if(m&&i==null)return t.y=r.y,r.y=r.y+r.h,e;if(x&&s)return Xw(e,t,r.x,void 0,n,l,i)}else return`${r.i}${f.x}${f.y}`,Xw(e,r,s?f.x:void 0,o?f.y:void 0,n,l,i)}const c=s?r.x+1:void 0,d=o?r.y+1:void 0;return c==null&&d==null?e:Xw(e,r,s?r.x+1:void 0,o?r.y+1:void 0,n,l,i)}function ABe(e){return e*100+"%"}const Vle=(e,t,r,n)=>e+r>n?t:r,qle=(e,t,r)=>e<0?t:r,Gle=e=>Math.max(0,e),a9=e=>Math.max(0,e),s9=(e,t,r)=>{let{left:n,height:i,width:a}=t;const s=e.top-(i-e.height);return{left:n,width:a,height:qle(s,e.height,i),top:a9(s)}},o9=(e,t,r)=>{let{top:n,left:i,height:a,width:s}=t;return{top:n,height:a,width:Vle(e.left,e.width,s,r),left:Gle(i)}},l9=(e,t,r)=>{let{top:n,height:i,width:a}=t;const s=e.left-(a-e.width);return{height:i,width:s<0?e.width:Vle(e.left,e.width,a,r),top:a9(n),left:Gle(s)}},c9=(e,t,r)=>{let{top:n,left:i,height:a,width:s}=t;return{width:s,left:i,height:qle(n,e.height,a),top:a9(n)}},TBe=function(){return s9(arguments.length<=0?void 0:arguments[0],o9(...arguments))},IBe=function(){return s9(arguments.length<=0?void 0:arguments[0],l9(...arguments))},OBe=function(){return c9(arguments.length<=0?void 0:arguments[0],o9(...arguments))},PBe=function(){return c9(arguments.length<=0?void 0:arguments[0],l9(...arguments))},RBe={n:s9,ne:TBe,e:o9,se:OBe,s:c9,sw:PBe,w:l9,nw:IBe};function jBe(e,t,r,n){const i=RBe[e];return i?i(t,{...t,...r},n):r}function DBe(e){let{top:t,left:r,width:n,height:i}=e;const a=`translate(${r}px,${t}px)`;return{transform:a,WebkitTransform:a,MozTransform:a,msTransform:a,OTransform:a,width:`${n}px`,height:`${i}px`,position:"absolute"}}function MBe(e){let{top:t,left:r,width:n,height:i}=e;return{top:`${t}px`,left:`${r}px`,width:`${n}px`,height:`${i}px`,position:"absolute"}}function u9(e,t){return t==="horizontal"?Xle(e):t==="vertical"?Kle(e):e}function Kle(e){return e.slice(0).sort(function(t,r){return t.y>r.y||t.y===r.y&&t.x>r.x?1:t.y===r.y&&t.x===r.x?0:-1})}function Xle(e){return e.slice(0).sort(function(t,r){return t.x>r.x||t.x===r.x&&t.y>r.y?1:-1})}function FBe(e,t,r,n,i){e=e||[];const a=[];Kw.default.Children.forEach(t,o=>{if((o==null?void 0:o.key)==null)return;const l=n9(e,String(o.key)),c=o.props["data-grid"];l&&c==null?a.push(kg(l)):c?a.push(kg({...c,i:o.key})):a.push(kg({w:1,h:1,x:0,y:r9(a),i:String(o.key)}))});const s=Hle(a,{cols:r});return i?s:$le(s,n,r)}function LBe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Layout";const r=["x","y","w","h"];if(!Array.isArray(e))throw new Error(t+" must be an array!");for(let n=0,i=e.length;n<i;n++){const a=e[n];for(let s=0;s<r.length;s++){const o=r[s],l=a[o];if(typeof l!="number"||Number.isNaN(l))throw new Error(`ReactGridLayout: ${t}[${n}].${o} must be a number! Received: ${l} (${typeof l})`)}if(typeof a.i<"u"&&typeof a.i!="string")throw new Error(`ReactGridLayout: ${t}[${n}].i must be a string! Received: ${a.i} (${typeof a.i})`)}}function BBe(e){const{verticalCompact:t,compactType:r}=e||{};return t===!1?null:r}const UBe=()=>{};bn.noop=UBe;var wf={};Object.defineProperty(wf,"__esModule",{value:!0});wf.calcGridColWidth=Y4;wf.calcGridItemPosition=$Be;wf.calcGridItemWHPx=C8;wf.calcWH=HBe;wf.calcXY=zBe;wf.clamp=rg;function Y4(e){const{margin:t,containerPadding:r,containerWidth:n,cols:i}=e;return(n-t[0]*(i-1)-r[0]*2)/i}function C8(e,t,r){return Number.isFinite(e)?Math.round(t*e+Math.max(0,e-1)*r):e}function $Be(e,t,r,n,i,a){const{margin:s,containerPadding:o,rowHeight:l}=e,c=Y4(e),d={};return a&&a.resizing?(d.width=Math.round(a.resizing.width),d.height=Math.round(a.resizing.height)):(d.width=C8(n,c,s[0]),d.height=C8(i,l,s[1])),a&&a.dragging?(d.top=Math.round(a.dragging.top),d.left=Math.round(a.dragging.left)):a&&a.resizing&&typeof a.resizing.top=="number"&&typeof a.resizing.left=="number"?(d.top=Math.round(a.resizing.top),d.left=Math.round(a.resizing.left)):(d.top=Math.round((l+s[1])*r+o[1]),d.left=Math.round((c+s[0])*t+o[0])),d}function zBe(e,t,r,n,i){const{margin:a,containerPadding:s,cols:o,rowHeight:l,maxRows:c}=e,d=Y4(e);let f=Math.round((r-s[0])/(d+a[0])),p=Math.round((t-s[1])/(l+a[1]));return f=rg(f,0,o-n),p=rg(p,0,c-i),{x:f,y:p}}function HBe(e,t,r,n,i,a){const{margin:s,maxRows:o,cols:l,rowHeight:c}=e,d=Y4(e);let f=Math.round((t+s[0])/(d+s[0])),p=Math.round((r+s[1])/(c+s[1])),m=rg(f,0,l-n),x=rg(p,0,o-i);return["sw","w","nw"].indexOf(a)!==-1&&(m=rg(f,0,l)),["nw","n","ne"].indexOf(a)!==-1&&(x=rg(p,0,o)),{w:m,h:x}}function rg(e,t,r){return Math.max(Math.min(e,r),t)}var Q4={},Yle={exports:{}},WBe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",VBe=WBe,qBe=VBe;function Qle(){}function Jle(){}Jle.resetWarningCache=Qle;var GBe=function(){function e(n,i,a,s,o,l){if(l!==qBe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Jle,resetWarningCache:Qle};return r.PropTypes=r,r};Yle.exports=GBe();var Jh=Yle.exports;const zt=Us(Jh);var J4={exports:{}},Zle={},sa={},Sf={};Object.defineProperty(Sf,"__esModule",{value:!0});Sf.dontSetMe=JBe;Sf.findInArray=KBe;Sf.int=QBe;Sf.isFunction=XBe;Sf.isNum=YBe;function KBe(e,t){for(let r=0,n=e.length;r<n;r++)if(t.apply(t,[e[r],r,e]))return e[r]}function XBe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function YBe(e){return typeof e=="number"&&!isNaN(e)}function QBe(e){return parseInt(e,10)}function JBe(e,t,r){if(e[t])return new Error(`Invalid prop ${t} passed to ${r} - do not set this, set it on the child.`)}var zx={};Object.defineProperty(zx,"__esModule",{value:!0});zx.browserPrefixToKey=tce;zx.browserPrefixToStyle=ZBe;zx.default=void 0;zx.getPrefix=ece;const Xj=["Moz","Webkit","O","ms"];function ece(){var r,n;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const t=(n=(r=window.document)==null?void 0:r.documentElement)==null?void 0:n.style;if(!t||e in t)return"";for(let i=0;i<Xj.length;i++)if(tce(e,Xj[i])in t)return Xj[i];return""}function tce(e,t){return t?`${t}${eUe(e)}`:e}function ZBe(e,t){return t?`-${t.toLowerCase()}-${e}`:e}function eUe(e){let t="",r=!0;for(let n=0;n<e.length;n++)r?(t+=e[n].toUpperCase(),r=!1):e[n]==="-"?r=!0:t+=e[n];return t}zx.default=ece();Object.defineProperty(sa,"__esModule",{value:!0});sa.addClassName=ice;sa.addEvent=rUe;sa.addUserSelectStyles=hUe;sa.createCSSTransform=cUe;sa.createSVGTransform=uUe;sa.getTouch=dUe;sa.getTouchIdentifier=fUe;sa.getTranslation=d9;sa.innerHeight=sUe;sa.innerWidth=oUe;sa.matchesSelector=nce;sa.matchesSelectorAndParentsTo=tUe;sa.offsetXYFromParent=lUe;sa.outerHeight=iUe;sa.outerWidth=aUe;sa.removeClassName=ace;sa.removeEvent=nUe;sa.scheduleRemoveUserSelectStyles=pUe;var nc=Sf,qG=rce(zx);function rce(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(rce=function(i,a){if(!a&&i&&i.__esModule)return i;var s,o,l={__proto__:null,default:i};if(i===null||typeof i!="object"&&typeof i!="function")return l;if(s=a?n:r){if(s.has(i))return s.get(i);s.set(i,l)}for(const c in i)c!=="default"&&{}.hasOwnProperty.call(i,c)&&((o=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(i,c))&&(o.get||o.set)?s(l,c,o):l[c]=i[c]);return l})(e,t)}let b_="";function nce(e,t){return b_||(b_=(0,nc.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(r){return(0,nc.isFunction)(e[r])})),(0,nc.isFunction)(e[b_])?e[b_](t):!1}function tUe(e,t,r){let n=e;do{if(nce(n,t))return!0;if(n===r)return!1;n=n.parentNode}while(n);return!1}function rUe(e,t,r,n){if(!e)return;const i={capture:!0,...n};e.addEventListener?e.addEventListener(t,r,i):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r}function nUe(e,t,r,n){if(!e)return;const i={capture:!0,...n};e.removeEventListener?e.removeEventListener(t,r,i):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null}function iUe(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,nc.int)(r.borderTopWidth),t+=(0,nc.int)(r.borderBottomWidth),t}function aUe(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,nc.int)(r.borderLeftWidth),t+=(0,nc.int)(r.borderRightWidth),t}function sUe(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,nc.int)(r.paddingTop),t-=(0,nc.int)(r.paddingBottom),t}function oUe(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,nc.int)(r.paddingLeft),t-=(0,nc.int)(r.paddingRight),t}function lUe(e,t,r){const i=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),a=(e.clientX+t.scrollLeft-i.left)/r,s=(e.clientY+t.scrollTop-i.top)/r;return{x:a,y:s}}function cUe(e,t){const r=d9(e,t,"px");return{[(0,qG.browserPrefixToKey)("transform",qG.default)]:r}}function uUe(e,t){return d9(e,t,"")}function d9(e,t,r){let{x:n,y:i}=e,a=`translate(${n}${r},${i}${r})`;if(t){const s=`${typeof t.x=="string"?t.x:t.x+r}`,o=`${typeof t.y=="string"?t.y:t.y+r}`;a=`translate(${s}, ${o})`+a}return a}function dUe(e,t){return e.targetTouches&&(0,nc.findInArray)(e.targetTouches,r=>t===r.identifier)||e.changedTouches&&(0,nc.findInArray)(e.changedTouches,r=>t===r.identifier)}function fUe(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function hUe(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,e.getElementsByTagName("head")[0].appendChild(t)),e.body&&ice(e.body,"react-draggable-transparent-selection")}function pUe(e){window.requestAnimationFrame?window.requestAnimationFrame(()=>{GG(e)}):GG(e)}function GG(e){if(e)try{if(e.body&&ace(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function ice(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp(`(?:^|\\s)${t}(?!\\S)`))||(e.className+=` ${t}`)}function ace(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp(`(?:^|\\s)${t}(?!\\S)`,"g"),"")}var Ef={};Object.defineProperty(Ef,"__esModule",{value:!0});Ef.canDragX=xUe;Ef.canDragY=vUe;Ef.createCoreData=bUe;Ef.createDraggableData=wUe;Ef.getBoundPosition=mUe;Ef.getControlPosition=yUe;Ef.snapToGrid=gUe;var $l=Sf,cv=sa;function mUe(e,t,r){if(!e.props.bounds)return[t,r];let{bounds:n}=e.props;n=typeof n=="string"?n:SUe(n);const i=f9(e);if(typeof n=="string"){const{ownerDocument:a}=i,s=a.defaultView;let o;if(n==="parent"?o=i.parentNode:o=i.getRootNode().querySelector(n),!(o instanceof s.HTMLElement))throw new Error('Bounds selector "'+n+'" could not find an element.');const l=o,c=s.getComputedStyle(i),d=s.getComputedStyle(l);n={left:-i.offsetLeft+(0,$l.int)(d.paddingLeft)+(0,$l.int)(c.marginLeft),top:-i.offsetTop+(0,$l.int)(d.paddingTop)+(0,$l.int)(c.marginTop),right:(0,cv.innerWidth)(l)-(0,cv.outerWidth)(i)-i.offsetLeft+(0,$l.int)(d.paddingRight)-(0,$l.int)(c.marginRight),bottom:(0,cv.innerHeight)(l)-(0,cv.outerHeight)(i)-i.offsetTop+(0,$l.int)(d.paddingBottom)-(0,$l.int)(c.marginBottom)}}return(0,$l.isNum)(n.right)&&(t=Math.min(t,n.right)),(0,$l.isNum)(n.bottom)&&(r=Math.min(r,n.bottom)),(0,$l.isNum)(n.left)&&(t=Math.max(t,n.left)),(0,$l.isNum)(n.top)&&(r=Math.max(r,n.top)),[t,r]}function gUe(e,t,r){const n=Math.round(t/e[0])*e[0],i=Math.round(r/e[1])*e[1];return[n,i]}function xUe(e){return e.props.axis==="both"||e.props.axis==="x"}function vUe(e){return e.props.axis==="both"||e.props.axis==="y"}function yUe(e,t,r){const n=typeof t=="number"?(0,cv.getTouch)(e,t):null;if(typeof t=="number"&&!n)return null;const i=f9(r),a=r.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,cv.offsetXYFromParent)(n||e,a,r.props.scale)}function bUe(e,t,r){const n=!(0,$l.isNum)(e.lastX),i=f9(e);return n?{node:i,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:i,deltaX:t-e.lastX,deltaY:r-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:r}}function wUe(e,t){const r=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/r,y:e.state.y+t.deltaY/r,deltaX:t.deltaX/r,deltaY:t.deltaY/r,lastX:e.state.x,lastY:e.state.y}}function SUe(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function f9(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var Z4={},e3={};Object.defineProperty(e3,"__esModule",{value:!0});e3.default=EUe;function EUe(){}Object.defineProperty(Z4,"__esModule",{value:!0});Z4.default=void 0;var Yj=sce(I),Ao=h9(Jh),CUe=h9(Tl),Xs=sa,Cp=Ef,Qj=Sf,Ew=h9(e3);function h9(e){return e&&e.__esModule?e:{default:e}}function sce(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(sce=function(i,a){if(!a&&i&&i.__esModule)return i;var s,o,l={__proto__:null,default:i};if(i===null||typeof i!="object"&&typeof i!="function")return l;if(s=a?n:r){if(s.has(i))return s.get(i);s.set(i,l)}for(const c in i)c!=="default"&&{}.hasOwnProperty.call(i,c)&&((o=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(i,c))&&(o.get||o.set)?s(l,c,o):l[c]=i[c]);return l})(e,t)}function To(e,t,r){return(t=kUe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kUe(e){var t=_Ue(e,"string");return typeof t=="symbol"?t:t+""}function _Ue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const ju={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let kp=ju.mouse,t3=class extends Yj.Component{constructor(){super(...arguments),To(this,"dragging",!1),To(this,"lastX",NaN),To(this,"lastY",NaN),To(this,"touchIdentifier",null),To(this,"mounted",!1),To(this,"handleDragStart",t=>{if(this.props.onMouseDown(t),!this.props.allowAnyClick&&typeof t.button=="number"&&t.button!==0)return!1;const r=this.findDOMNode();if(!r||!r.ownerDocument||!r.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:n}=r;if(this.props.disabled||!(t.target instanceof n.defaultView.Node)||this.props.handle&&!(0,Xs.matchesSelectorAndParentsTo)(t.target,this.props.handle,r)||this.props.cancel&&(0,Xs.matchesSelectorAndParentsTo)(t.target,this.props.cancel,r))return;t.type==="touchstart"&&!this.props.allowMobileScroll&&t.preventDefault();const i=(0,Xs.getTouchIdentifier)(t);this.touchIdentifier=i;const a=(0,Cp.getControlPosition)(t,i,this);if(a==null)return;const{x:s,y:o}=a,l=(0,Cp.createCoreData)(this,s,o);(0,Ew.default)("DraggableCore: handleDragStart: %j",l),(0,Ew.default)("calling",this.props.onStart),!(this.props.onStart(t,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,Xs.addUserSelectStyles)(n),this.dragging=!0,this.lastX=s,this.lastY=o,(0,Xs.addEvent)(n,kp.move,this.handleDrag),(0,Xs.addEvent)(n,kp.stop,this.handleDragStop))}),To(this,"handleDrag",t=>{const r=(0,Cp.getControlPosition)(t,this.touchIdentifier,this);if(r==null)return;let{x:n,y:i}=r;if(Array.isArray(this.props.grid)){let o=n-this.lastX,l=i-this.lastY;if([o,l]=(0,Cp.snapToGrid)(this.props.grid,o,l),!o&&!l)return;n=this.lastX+o,i=this.lastY+l}const a=(0,Cp.createCoreData)(this,n,i);if((0,Ew.default)("DraggableCore: handleDrag: %j",a),this.props.onDrag(t,a)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=n,this.lastY=i}),To(this,"handleDragStop",t=>{if(!this.dragging)return;const r=(0,Cp.getControlPosition)(t,this.touchIdentifier,this);if(r==null)return;let{x:n,y:i}=r;if(Array.isArray(this.props.grid)){let l=n-this.lastX||0,c=i-this.lastY||0;[l,c]=(0,Cp.snapToGrid)(this.props.grid,l,c),n=this.lastX+l,i=this.lastY+c}const a=(0,Cp.createCoreData)(this,n,i);if(this.props.onStop(t,a)===!1||this.mounted===!1)return!1;const o=this.findDOMNode();o&&this.props.enableUserSelectHack&&(0,Xs.scheduleRemoveUserSelectStyles)(o.ownerDocument),(0,Ew.default)("DraggableCore: handleDragStop: %j",a),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,o&&((0,Ew.default)("DraggableCore: Removing handlers"),(0,Xs.removeEvent)(o.ownerDocument,kp.move,this.handleDrag),(0,Xs.removeEvent)(o.ownerDocument,kp.stop,this.handleDragStop))}),To(this,"onMouseDown",t=>(kp=ju.mouse,this.handleDragStart(t))),To(this,"onMouseUp",t=>(kp=ju.mouse,this.handleDragStop(t))),To(this,"onTouchStart",t=>(kp=ju.touch,this.handleDragStart(t))),To(this,"onTouchEnd",t=>(kp=ju.touch,this.handleDragStop(t)))}componentDidMount(){this.mounted=!0;const t=this.findDOMNode();t&&(0,Xs.addEvent)(t,ju.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const t=this.findDOMNode();if(t){const{ownerDocument:r}=t;(0,Xs.removeEvent)(r,ju.mouse.move,this.handleDrag),(0,Xs.removeEvent)(r,ju.touch.move,this.handleDrag),(0,Xs.removeEvent)(r,ju.mouse.stop,this.handleDragStop),(0,Xs.removeEvent)(r,ju.touch.stop,this.handleDragStop),(0,Xs.removeEvent)(t,ju.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Xs.scheduleRemoveUserSelectStyles)(r)}}findDOMNode(){var t,r,n;return(t=this.props)!=null&&t.nodeRef?(n=(r=this.props)==null?void 0:r.nodeRef)==null?void 0:n.current:CUe.default.findDOMNode(this)}render(){return Yj.cloneElement(Yj.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};Z4.default=t3;To(t3,"displayName","DraggableCore");To(t3,"propTypes",{allowAnyClick:Ao.default.bool,allowMobileScroll:Ao.default.bool,children:Ao.default.node.isRequired,disabled:Ao.default.bool,enableUserSelectHack:Ao.default.bool,offsetParent:function(e,t){if(e[t]&&e[t].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Ao.default.arrayOf(Ao.default.number),handle:Ao.default.string,cancel:Ao.default.string,nodeRef:Ao.default.object,onStart:Ao.default.func,onDrag:Ao.default.func,onStop:Ao.default.func,onMouseDown:Ao.default.func,scale:Ao.default.number,className:Qj.dontSetMe,style:Qj.dontSetMe,transform:Qj.dontSetMe});To(t3,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),e.default=void 0;var t=f(I),r=d(Jh),n=d(Tl),i=K4,a=sa,s=Ef,o=Sf,l=d(Z4),c=d(e3);function d(w){return w&&w.__esModule?w:{default:w}}function f(w,_){if(typeof WeakMap=="function")var C=new WeakMap,N=new WeakMap;return(f=function(R,P){if(!P&&R&&R.__esModule)return R;var O,D,M={__proto__:null,default:R};if(R===null||typeof R!="object"&&typeof R!="function")return M;if(O=P?N:C){if(O.has(R))return O.get(R);O.set(R,M)}for(const B in R)B!=="default"&&{}.hasOwnProperty.call(R,B)&&((D=(O=Object.defineProperty)&&Object.getOwnPropertyDescriptor(R,B))&&(D.get||D.set)?O(M,B,D):M[B]=R[B]);return M})(w,_)}function p(){return p=Object.assign?Object.assign.bind():function(w){for(var _=1;_<arguments.length;_++){var C=arguments[_];for(var N in C)({}).hasOwnProperty.call(C,N)&&(w[N]=C[N])}return w},p.apply(null,arguments)}function m(w,_,C){return(_=x(_))in w?Object.defineProperty(w,_,{value:C,enumerable:!0,configurable:!0,writable:!0}):w[_]=C,w}function x(w){var _=v(w,"string");return typeof _=="symbol"?_:_+""}function v(w,_){if(typeof w!="object"||!w)return w;var C=w[Symbol.toPrimitive];if(C!==void 0){var N=C.call(w,_);if(typeof N!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(w)}class b extends t.Component{static getDerivedStateFromProps(_,C){let{position:N}=_,{prevPropsPosition:R}=C;return N&&(!R||N.x!==R.x||N.y!==R.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:N,prevPropsPosition:R}),{x:N.x,y:N.y,prevPropsPosition:{...N}}):null}constructor(_){super(_),m(this,"onDragStart",(C,N)=>{if((0,c.default)("Draggable: onDragStart: %j",N),this.props.onStart(C,(0,s.createDraggableData)(this,N))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),m(this,"onDrag",(C,N)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",N);const R=(0,s.createDraggableData)(this,N),P={x:R.x,y:R.y,slackX:0,slackY:0};if(this.props.bounds){const{x:D,y:M}=P;P.x+=this.state.slackX,P.y+=this.state.slackY;const[B,U]=(0,s.getBoundPosition)(this,P.x,P.y);P.x=B,P.y=U,P.slackX=this.state.slackX+(D-P.x),P.slackY=this.state.slackY+(M-P.y),R.x=P.x,R.y=P.y,R.deltaX=P.x-this.state.x,R.deltaY=P.y-this.state.y}if(this.props.onDrag(C,R)===!1)return!1;this.setState(P)}),m(this,"onDragStop",(C,N)=>{if(!this.state.dragging||this.props.onStop(C,(0,s.createDraggableData)(this,N))===!1)return!1;(0,c.default)("Draggable: onDragStop: %j",N);const P={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:D,y:M}=this.props.position;P.x=D,P.y=M}this.setState(P)}),this.state={dragging:!1,dragged:!1,x:_.position?_.position.x:_.defaultPosition.x,y:_.position?_.position.y:_.defaultPosition.y,prevPropsPosition:{..._.position},slackX:0,slackY:0,isElementSVG:!1},_.position&&!(_.onDrag||_.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var _,C;return((C=(_=this.props)==null?void 0:_.nodeRef)==null?void 0:C.current)??n.default.findDOMNode(this)}render(){const{axis:_,bounds:C,children:N,defaultPosition:R,defaultClassName:P,defaultClassNameDragging:O,defaultClassNameDragged:D,position:M,positionOffset:B,scale:U,...H}=this.props;let Z={},ee=null;const te=!!!M||this.state.dragging,se=M||R,Q={x:(0,s.canDragX)(this)&&te?this.state.x:se.x,y:(0,s.canDragY)(this)&&te?this.state.y:se.y};this.state.isElementSVG?ee=(0,a.createSVGTransform)(Q,B):Z=(0,a.createCSSTransform)(Q,B);const X=(0,i.clsx)(N.props.className||"",P,{[O]:this.state.dragging,[D]:this.state.dragged});return t.createElement(l.default,p({},H,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(N),{className:X,style:{...N.props.style,...Z},transform:ee}))}}e.default=b,m(b,"displayName","Draggable"),m(b,"propTypes",{...l.default.propTypes,axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:o.dontSetMe,style:o.dontSetMe,transform:o.dontSetMe}),m(b,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(Zle);const{default:oce,DraggableCore:NUe}=Zle;J4.exports=oce;J4.exports.default=oce;J4.exports.DraggableCore=NUe;var lce=J4.exports,r3={exports:{}},sC={},p9={};p9.__esModule=!0;p9.cloneElement=RUe;var AUe=TUe(I);function TUe(e){return e&&e.__esModule?e:{default:e}}function KG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function XG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KG(Object(r),!0).forEach(function(n){IUe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IUe(e,t,r){return t=OUe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OUe(e){var t=PUe(e,"string");return typeof t=="symbol"?t:String(t)}function PUe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RUe(e,t){return t.style&&e.props.style&&(t.style=XG(XG({},e.props.style),t.style)),t.className&&e.props.className&&(t.className=e.props.className+" "+t.className),AUe.default.cloneElement(e,t)}var oC={};oC.__esModule=!0;oC.resizableProps=void 0;var nn=jUe(Jh);function jUe(e){return e&&e.__esModule?e:{default:e}}var DUe={axis:nn.default.oneOf(["both","x","y","none"]),className:nn.default.string,children:nn.default.element.isRequired,draggableOpts:nn.default.shape({allowAnyClick:nn.default.bool,cancel:nn.default.string,children:nn.default.node,disabled:nn.default.bool,enableUserSelectHack:nn.default.bool,offsetParent:nn.default.node,grid:nn.default.arrayOf(nn.default.number),handle:nn.default.string,nodeRef:nn.default.object,onStart:nn.default.func,onDrag:nn.default.func,onStop:nn.default.func,onMouseDown:nn.default.func,scale:nn.default.number}),height:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];if(i.axis==="both"||i.axis==="y"){var a;return(a=nn.default.number).isRequired.apply(a,r)}return nn.default.number.apply(nn.default,r)},handle:nn.default.oneOfType([nn.default.node,nn.default.func]),handleSize:nn.default.arrayOf(nn.default.number),lockAspectRatio:nn.default.bool,maxConstraints:nn.default.arrayOf(nn.default.number),minConstraints:nn.default.arrayOf(nn.default.number),onResizeStop:nn.default.func,onResizeStart:nn.default.func,onResize:nn.default.func,resizeHandles:nn.default.arrayOf(nn.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:nn.default.number,width:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];if(i.axis==="both"||i.axis==="x"){var a;return(a=nn.default.number).isRequired.apply(a,r)}return nn.default.number.apply(nn.default,r)}};oC.resizableProps=DUe;sC.__esModule=!0;sC.default=void 0;var Cw=UUe(I),MUe=lce,FUe=p9,LUe=oC,BUe=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function cce(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(cce=function(i){return i?r:t})(e)}function UUe(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=cce(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function k8(){return k8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k8.apply(this,arguments)}function $Ue(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function YG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Jj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YG(Object(r),!0).forEach(function(n){zUe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zUe(e,t,r){return t=HUe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HUe(e){var t=WUe(e,"string");return typeof t=="symbol"?t:String(t)}function WUe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VUe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_8(e,t)}function _8(e,t){return _8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},_8(e,t)}var m9=function(e){VUe(t,e);function t(){for(var n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=e.call.apply(e,[this].concat(a))||this,n.handleRefs={},n.lastHandleRect=null,n.slack=null,n}var r=t.prototype;return r.componentWillUnmount=function(){this.resetData()},r.resetData=function(){this.lastHandleRect=this.slack=null},r.runConstraints=function(i,a){var s=this.props,o=s.minConstraints,l=s.maxConstraints,c=s.lockAspectRatio;if(!o&&!l&&!c)return[i,a];if(c){var d=this.props.width/this.props.height,f=i-this.props.width,p=a-this.props.height;Math.abs(f)>Math.abs(p*d)?a=i/d:i=a*d}var m=i,x=a,v=this.slack||[0,0],b=v[0],w=v[1];return i+=b,a+=w,o&&(i=Math.max(o[0],i),a=Math.max(o[1],a)),l&&(i=Math.min(l[0],i),a=Math.min(l[1],a)),this.slack=[b+(m-i),w+(x-a)],[i,a]},r.resizeHandler=function(i,a){var s=this;return function(o,l){var c=l.node,d=l.deltaX,f=l.deltaY;i==="onResizeStart"&&s.resetData();var p=(s.props.axis==="both"||s.props.axis==="x")&&a!=="n"&&a!=="s",m=(s.props.axis==="both"||s.props.axis==="y")&&a!=="e"&&a!=="w";if(!(!p&&!m)){var x=a[0],v=a[a.length-1],b=c.getBoundingClientRect();if(s.lastHandleRect!=null){if(v==="w"){var w=b.left-s.lastHandleRect.left;d+=w}if(x==="n"){var _=b.top-s.lastHandleRect.top;f+=_}}s.lastHandleRect=b,v==="w"&&(d=-d),x==="n"&&(f=-f);var C=s.props.width+(p?d/s.props.transformScale:0),N=s.props.height+(m?f/s.props.transformScale:0),R=s.runConstraints(C,N);C=R[0],N=R[1];var P=C!==s.props.width||N!==s.props.height,O=typeof s.props[i]=="function"?s.props[i]:null,D=i==="onResize"&&!P;O&&!D&&(o.persist==null||o.persist(),O(o,{node:c,size:{width:C,height:N},handle:a})),i==="onResizeStop"&&s.resetData()}}},r.renderResizeHandle=function(i,a){var s=this.props.handle;if(!s)return Cw.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+i,ref:a});if(typeof s=="function")return s(i,a);var o=typeof s.type=="string",l=Jj({ref:a},o?{}:{handleAxis:i});return Cw.cloneElement(s,l)},r.render=function(){var i=this,a=this.props,s=a.children,o=a.className,l=a.draggableOpts;a.width,a.height,a.handle,a.handleSize,a.lockAspectRatio,a.axis,a.minConstraints,a.maxConstraints,a.onResize,a.onResizeStop,a.onResizeStart;var c=a.resizeHandles;a.transformScale;var d=$Ue(a,BUe);return(0,FUe.cloneElement)(s,Jj(Jj({},d),{},{className:(o?o+" ":"")+"react-resizable",children:[].concat(s.props.children,c.map(function(f){var p,m=(p=i.handleRefs[f])!=null?p:i.handleRefs[f]=Cw.createRef();return Cw.createElement(MUe.DraggableCore,k8({},l,{nodeRef:m,key:"resizableHandle-"+f,onStop:i.resizeHandler("onResizeStop",f),onStart:i.resizeHandler("onResizeStart",f),onDrag:i.resizeHandler("onResize",f)}),i.renderResizeHandle(f,m))}))}))},t}(Cw.Component);sC.default=m9;m9.propTypes=LUe.resizableProps;m9.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var n3={};n3.__esModule=!0;n3.default=void 0;var Zj=YUe(I),qUe=uce(Jh),GUe=uce(sC),KUe=oC,XUe=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function uce(e){return e&&e.__esModule?e:{default:e}}function dce(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(dce=function(i){return i?r:t})(e)}function YUe(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=dce(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function N8(){return N8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N8.apply(this,arguments)}function QG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function pT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QG(Object(r),!0).forEach(function(n){QUe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QUe(e,t,r){return t=JUe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JUe(e){var t=ZUe(e,"string");return typeof t=="symbol"?t:String(t)}function ZUe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function e$e(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function t$e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,A8(e,t)}function A8(e,t){return A8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},A8(e,t)}var fce=function(e){t$e(t,e);function t(){for(var n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=e.call.apply(e,[this].concat(a))||this,n.state={width:n.props.width,height:n.props.height,propsWidth:n.props.width,propsHeight:n.props.height},n.onResize=function(o,l){var c=l.size;n.props.onResize?(o.persist==null||o.persist(),n.setState(c,function(){return n.props.onResize&&n.props.onResize(o,l)})):n.setState(c)},n}t.getDerivedStateFromProps=function(i,a){return a.propsWidth!==i.width||a.propsHeight!==i.height?{width:i.width,height:i.height,propsWidth:i.width,propsHeight:i.height}:null};var r=t.prototype;return r.render=function(){var i=this.props,a=i.handle,s=i.handleSize;i.onResize;var o=i.onResizeStart,l=i.onResizeStop,c=i.draggableOpts,d=i.minConstraints,f=i.maxConstraints,p=i.lockAspectRatio,m=i.axis;i.width,i.height;var x=i.resizeHandles,v=i.style,b=i.transformScale,w=e$e(i,XUe);return Zj.createElement(GUe.default,{axis:m,draggableOpts:c,handle:a,handleSize:s,height:this.state.height,lockAspectRatio:p,maxConstraints:f,minConstraints:d,onResizeStart:o,onResize:this.onResize,onResizeStop:l,resizeHandles:x,transformScale:b,width:this.state.width},Zj.createElement("div",N8({},w,{style:pT(pT({},v),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},t}(Zj.Component);n3.default=fce;fce.propTypes=pT(pT({},KUe.resizableProps),{},{children:qUe.default.element});r3.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};r3.exports.Resizable=sC.default;r3.exports.ResizableBox=n3.default;var r$e=r3.exports,bh={};Object.defineProperty(bh,"__esModule",{value:!0});bh.resizeHandleType=bh.resizeHandleAxesType=bh.default=void 0;var un=hce(Jh),n$e=hce(I);function hce(e){return e&&e.__esModule?e:{default:e}}const i$e=bh.resizeHandleAxesType=un.default.arrayOf(un.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),a$e=bh.resizeHandleType=un.default.oneOfType([un.default.node,un.default.func]);bh.default={className:un.default.string,style:un.default.object,width:un.default.number,autoSize:un.default.bool,cols:un.default.number,draggableCancel:un.default.string,draggableHandle:un.default.string,verticalCompact:function(e){e.verticalCompact},compactType:un.default.oneOf(["vertical","horizontal"]),layout:function(e){var t=e.layout;t!==void 0&&bn.validateLayout(t,"layout")},margin:un.default.arrayOf(un.default.number),containerPadding:un.default.arrayOf(un.default.number),rowHeight:un.default.number,maxRows:un.default.number,isBounded:un.default.bool,isDraggable:un.default.bool,isResizable:un.default.bool,allowOverlap:un.default.bool,preventCollision:un.default.bool,useCSSTransforms:un.default.bool,transformScale:un.default.number,isDroppable:un.default.bool,resizeHandles:i$e,resizeHandle:a$e,onLayoutChange:un.default.func,onDragStart:un.default.func,onDrag:un.default.func,onDragStop:un.default.func,onResizeStart:un.default.func,onResize:un.default.func,onResizeStop:un.default.func,onDrop:un.default.func,droppingItem:un.default.shape({i:un.default.string.isRequired,w:un.default.number.isRequired,h:un.default.number.isRequired}),children:function(e,t){const r=e[t],n={};n$e.default.Children.forEach(r,function(i){if((i==null?void 0:i.key)!=null){if(n[i.key])throw new Error('Duplicate child key "'+i.key+'" found! This will cause problems in ReactGridLayout.');n[i.key]=!0}})},innerRef:un.default.any};Object.defineProperty(Q4,"__esModule",{value:!0});Q4.default=void 0;var _1=g9(I),JG=Tl,$n=g9(Jh),s$e=lce,o$e=r$e,N1=bn,ks=wf,ZG=bh,l$e=g9(K4);function g9(e){return e&&e.__esModule?e:{default:e}}function Id(e,t,r){return(t=c$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c$e(e){var t=u$e(e,"string");return typeof t=="symbol"?t:t+""}function u$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class x9 extends _1.default.Component{constructor(){super(...arguments),Id(this,"state",{resizing:null,dragging:null,className:""}),Id(this,"elementRef",_1.default.createRef()),Id(this,"onDragStart",(t,r)=>{let{node:n}=r;const{onDragStart:i,transformScale:a}=this.props;if(!i)return;const s={top:0,left:0},{offsetParent:o}=n;if(!o)return;const l=o.getBoundingClientRect(),c=n.getBoundingClientRect(),d=c.left/a,f=l.left/a,p=c.top/a,m=l.top/a;s.left=d-f+o.scrollLeft,s.top=p-m+o.scrollTop,this.setState({dragging:s});const{x,y:v}=(0,ks.calcXY)(this.getPositionParams(),s.top,s.left,this.props.w,this.props.h);return i.call(this,this.props.i,x,v,{e:t,node:n,newPosition:s})}),Id(this,"onDrag",(t,r,n)=>{let{node:i,deltaX:a,deltaY:s}=r;const{onDrag:o}=this.props;if(!o)return;if(!this.state.dragging)throw new Error("onDrag called before onDragStart.");let l=this.state.dragging.top+s,c=this.state.dragging.left+a;const{isBounded:d,i:f,w:p,h:m,containerWidth:x}=this.props,v=this.getPositionParams();if(d){const{offsetParent:C}=i;if(C){const{margin:N,rowHeight:R}=this.props,P=C.clientHeight-(0,ks.calcGridItemWHPx)(m,R,N[1]);l=(0,ks.clamp)(l,0,P);const O=(0,ks.calcGridColWidth)(v),D=x-(0,ks.calcGridItemWHPx)(p,O,N[0]);c=(0,ks.clamp)(c,0,D)}}const b={top:l,left:c};n?this.setState({dragging:b}):(0,JG.flushSync)(()=>{this.setState({dragging:b})});const{x:w,y:_}=(0,ks.calcXY)(v,l,c,p,m);return o.call(this,f,w,_,{e:t,node:i,newPosition:b})}),Id(this,"onDragStop",(t,r)=>{let{node:n}=r;const{onDragStop:i}=this.props;if(!i)return;if(!this.state.dragging)throw new Error("onDragEnd called before onDragStart.");const{w:a,h:s,i:o}=this.props,{left:l,top:c}=this.state.dragging,d={top:c,left:l};this.setState({dragging:null});const{x:f,y:p}=(0,ks.calcXY)(this.getPositionParams(),c,l,a,s);return i.call(this,o,f,p,{e:t,node:n,newPosition:d})}),Id(this,"onResizeStop",(t,r,n)=>this.onResizeHandler(t,r,n,"onResizeStop")),Id(this,"onResizeStart",(t,r,n)=>this.onResizeHandler(t,r,n,"onResizeStart")),Id(this,"onResize",(t,r,n)=>this.onResizeHandler(t,r,n,"onResize"))}shouldComponentUpdate(t,r){if(this.props.children!==t.children||this.props.droppingPosition!==t.droppingPosition)return!0;const n=(0,ks.calcGridItemPosition)(this.getPositionParams(this.props),this.props.x,this.props.y,this.props.w,this.props.h,this.state),i=(0,ks.calcGridItemPosition)(this.getPositionParams(t),t.x,t.y,t.w,t.h,r);return!(0,N1.fastPositionEqual)(n,i)||this.props.useCSSTransforms!==t.useCSSTransforms}componentDidMount(){this.moveDroppingItem({})}componentDidUpdate(t){this.moveDroppingItem(t)}moveDroppingItem(t){const{droppingPosition:r}=this.props;if(!r)return;const n=this.elementRef.current;if(!n)return;const i=t.droppingPosition||{left:0,top:0},{dragging:a}=this.state,s=a&&r.left!==i.left||r.top!==i.top;if(!a)this.onDragStart(r.e,{node:n,deltaX:r.left,deltaY:r.top});else if(s){const o=r.left-a.left,l=r.top-a.top;this.onDrag(r.e,{node:n,deltaX:o,deltaY:l},!0)}}getPositionParams(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return{cols:t.cols,containerPadding:t.containerPadding,containerWidth:t.containerWidth,margin:t.margin,maxRows:t.maxRows,rowHeight:t.rowHeight}}createStyle(t){const{usePercentages:r,containerWidth:n,useCSSTransforms:i}=this.props;let a;return i?a=(0,N1.setTransform)(t):(a=(0,N1.setTopLeft)(t),r&&(a.left=(0,N1.perc)(t.left/n),a.width=(0,N1.perc)(t.width/n))),a}mixinDraggable(t,r){return _1.default.createElement(s$e.DraggableCore,{disabled:!r,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:""),scale:this.props.transformScale,nodeRef:this.elementRef},t)}curryResizeHandler(t,r){return(n,i)=>r(n,i,t)}mixinResizable(t,r,n){const{cols:i,minW:a,minH:s,maxW:o,maxH:l,transformScale:c,resizeHandles:d,resizeHandle:f}=this.props,p=this.getPositionParams(),m=(0,ks.calcGridItemPosition)(p,0,0,i,0).width,x=(0,ks.calcGridItemPosition)(p,0,0,a,s),v=(0,ks.calcGridItemPosition)(p,0,0,o,l),b=[x.width,x.height],w=[Math.min(v.width,m),Math.min(v.height,1/0)];return _1.default.createElement(o$e.Resizable,{draggableOpts:{disabled:!n},className:n?void 0:"react-resizable-hide",width:r.width,height:r.height,minConstraints:b,maxConstraints:w,onResizeStop:this.curryResizeHandler(r,this.onResizeStop),onResizeStart:this.curryResizeHandler(r,this.onResizeStart),onResize:this.curryResizeHandler(r,this.onResize),transformScale:c,resizeHandles:d,handle:f},t)}onResizeHandler(t,r,n,i){let{node:a,size:s,handle:o}=r;const l=this.props[i];if(!l)return;const{x:c,y:d,i:f,maxH:p,minH:m,containerWidth:x}=this.props,{minW:v,maxW:b}=this.props;let w=s;a&&(w=(0,N1.resizeItemInDirection)(o,n,s,x),(0,JG.flushSync)(()=>{this.setState({resizing:i==="onResizeStop"?null:w})}));let{w:_,h:C}=(0,ks.calcWH)(this.getPositionParams(),w.width,w.height,c,d,o);_=(0,ks.clamp)(_,Math.max(v,1),b),C=(0,ks.clamp)(C,m,p),l.call(this,f,_,C,{e:t,node:a,size:w,handle:o})}render(){const{x:t,y:r,w:n,h:i,isDraggable:a,isResizable:s,droppingPosition:o,useCSSTransforms:l}=this.props,c=(0,ks.calcGridItemPosition)(this.getPositionParams(),t,r,n,i,this.state),d=_1.default.Children.only(this.props.children);let f=_1.default.cloneElement(d,{ref:this.elementRef,className:(0,l$e.default)("react-grid-item",d.props.className,this.props.className,{static:this.props.static,resizing:!!this.state.resizing,"react-draggable":a,"react-draggable-dragging":!!this.state.dragging,dropping:!!o,cssTransforms:l}),style:{...this.props.style,...d.props.style,...this.createStyle(c)}});return f=this.mixinResizable(f,c,s),f=this.mixinDraggable(f,a),f}}Q4.default=x9;Id(x9,"propTypes",{children:$n.default.element,cols:$n.default.number.isRequired,containerWidth:$n.default.number.isRequired,rowHeight:$n.default.number.isRequired,margin:$n.default.array.isRequired,maxRows:$n.default.number.isRequired,containerPadding:$n.default.array.isRequired,x:$n.default.number.isRequired,y:$n.default.number.isRequired,w:$n.default.number.isRequired,h:$n.default.number.isRequired,minW:function(e,t){const r=e[t];if(typeof r!="number")return new Error("minWidth not Number");if(r>e.w||r>e.maxW)return new Error("minWidth larger than item width/maxWidth")},maxW:function(e,t){const r=e[t];if(typeof r!="number")return new Error("maxWidth not Number");if(r<e.w||r<e.minW)return new Error("maxWidth smaller than item width/minWidth")},minH:function(e,t){const r=e[t];if(typeof r!="number")return new Error("minHeight not Number");if(r>e.h||r>e.maxH)return new Error("minHeight larger than item height/maxHeight")},maxH:function(e,t){const r=e[t];if(typeof r!="number")return new Error("maxHeight not Number");if(r<e.h||r<e.minH)return new Error("maxHeight smaller than item height/minHeight")},i:$n.default.string.isRequired,resizeHandles:ZG.resizeHandleAxesType,resizeHandle:ZG.resizeHandleType,onDragStop:$n.default.func,onDragStart:$n.default.func,onDrag:$n.default.func,onResizeStop:$n.default.func,onResizeStart:$n.default.func,onResize:$n.default.func,isDraggable:$n.default.bool.isRequired,isResizable:$n.default.bool.isRequired,isBounded:$n.default.bool.isRequired,static:$n.default.bool,useCSSTransforms:$n.default.bool.isRequired,transformScale:$n.default.number,className:$n.default.string,handle:$n.default.string,cancel:$n.default.string,droppingPosition:$n.default.shape({e:$n.default.object.isRequired,left:$n.default.number.isRequired,top:$n.default.number.isRequired})});Id(x9,"defaultProps",{className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0,transformScale:1});Object.defineProperty(aC,"__esModule",{value:!0});aC.default=void 0;var Om=pce(I),eD=t9,d$e=v9(K4),Lr=bn,f$e=wf,eK=v9(Q4),h$e=v9(bh);function v9(e){return e&&e.__esModule?e:{default:e}}function pce(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(pce=function(i,a){if(!a&&i&&i.__esModule)return i;var s,o,l={__proto__:null,default:i};if(i===null||typeof i!="object"&&typeof i!="function")return l;if(s=a?n:r){if(s.has(i))return s.get(i);s.set(i,l)}for(const c in i)c!=="default"&&{}.hasOwnProperty.call(i,c)&&((o=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(i,c))&&(o.get||o.set)?s(l,c,o):l[c]=i[c]);return l})(e,t)}function Zs(e,t,r){return(t=p$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p$e(e){var t=m$e(e,"string");return typeof t=="symbol"?t:t+""}function m$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const tK="react-grid-layout";let mce=!1;try{mce=/firefox/i.test(navigator.userAgent)}catch{}class i3 extends Om.Component{constructor(){super(...arguments),Zs(this,"state",{activeDrag:null,layout:(0,Lr.synchronizeLayoutWithChildren)(this.props.layout,this.props.children,this.props.cols,(0,Lr.compactType)(this.props),this.props.allowOverlap),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null,resizing:!1,droppingDOMNode:null,children:[]}),Zs(this,"dragEnterCounter",0),Zs(this,"onDragStart",(t,r,n,i)=>{let{e:a,node:s}=i;const{layout:o}=this.state,l=(0,Lr.getLayoutItem)(o,t);if(!l)return;const c={w:l.w,h:l.h,x:l.x,y:l.y,placeholder:!0,i:t};return this.setState({oldDragItem:(0,Lr.cloneLayoutItem)(l),oldLayout:o,activeDrag:c}),this.props.onDragStart(o,l,l,null,a,s)}),Zs(this,"onDrag",(t,r,n,i)=>{let{e:a,node:s}=i;const{oldDragItem:o}=this.state;let{layout:l}=this.state;const{cols:c,allowOverlap:d,preventCollision:f}=this.props,p=(0,Lr.getLayoutItem)(l,t);if(!p)return;const m={w:p.w,h:p.h,x:p.x,y:p.y,placeholder:!0,i:t};l=(0,Lr.moveElement)(l,p,r,n,!0,f,(0,Lr.compactType)(this.props),c,d),this.props.onDrag(l,o,p,m,a,s),this.setState({layout:d?l:(0,Lr.compact)(l,(0,Lr.compactType)(this.props),c),activeDrag:m})}),Zs(this,"onDragStop",(t,r,n,i)=>{let{e:a,node:s}=i;if(!this.state.activeDrag)return;const{oldDragItem:o}=this.state;let{layout:l}=this.state;const{cols:c,preventCollision:d,allowOverlap:f}=this.props,p=(0,Lr.getLayoutItem)(l,t);if(!p)return;l=(0,Lr.moveElement)(l,p,r,n,!0,d,(0,Lr.compactType)(this.props),c,f);const x=f?l:(0,Lr.compact)(l,(0,Lr.compactType)(this.props),c);this.props.onDragStop(x,o,p,null,a,s);const{oldLayout:v}=this.state;this.setState({activeDrag:null,layout:x,oldDragItem:null,oldLayout:null}),this.onLayoutMaybeChanged(x,v)}),Zs(this,"onResizeStart",(t,r,n,i)=>{let{e:a,node:s}=i;const{layout:o}=this.state,l=(0,Lr.getLayoutItem)(o,t);l&&(this.setState({oldResizeItem:(0,Lr.cloneLayoutItem)(l),oldLayout:this.state.layout,resizing:!0}),this.props.onResizeStart(o,l,l,null,a,s))}),Zs(this,"onResize",(t,r,n,i)=>{let{e:a,node:s,size:o,handle:l}=i;const{oldResizeItem:c}=this.state,{layout:d}=this.state,{cols:f,preventCollision:p,allowOverlap:m}=this.props;let x=!1,v,b,w;const[_,C]=(0,Lr.withLayoutItem)(d,t,R=>{let P;return b=R.x,w=R.y,["sw","w","nw","n","ne"].indexOf(l)!==-1&&(["sw","nw","w"].indexOf(l)!==-1&&(b=R.x+(R.w-r),r=R.x!==b&&b<0?R.w:r,b=b<0?0:b),["ne","n","nw"].indexOf(l)!==-1&&(w=R.y+(R.h-n),n=R.y!==w&&w<0?R.h:n,w=w<0?0:w),x=!0),p&&!m&&(P=(0,Lr.getAllCollisions)(d,{...R,w:r,h:n,x:b,y:w}).filter(D=>D.i!==R.i).length>0,P&&(w=R.y,n=R.h,b=R.x,r=R.w,x=!1)),R.w=r,R.h=n,R});if(!C)return;v=_,x&&(v=(0,Lr.moveElement)(_,C,b,w,!0,this.props.preventCollision,(0,Lr.compactType)(this.props),f,m));const N={w:C.w,h:C.h,x:C.x,y:C.y,static:!0,i:t};this.props.onResize(v,c,C,N,a,s),this.setState({layout:m?v:(0,Lr.compact)(v,(0,Lr.compactType)(this.props),f),activeDrag:N})}),Zs(this,"onResizeStop",(t,r,n,i)=>{let{e:a,node:s}=i;const{layout:o,oldResizeItem:l}=this.state,{cols:c,allowOverlap:d}=this.props,f=(0,Lr.getLayoutItem)(o,t),p=d?o:(0,Lr.compact)(o,(0,Lr.compactType)(this.props),c);this.props.onResizeStop(p,l,f,null,a,s);const{oldLayout:m}=this.state;this.setState({activeDrag:null,layout:p,oldResizeItem:null,oldLayout:null,resizing:!1}),this.onLayoutMaybeChanged(p,m)}),Zs(this,"onDragOver",t=>{var _;if(t.preventDefault(),t.stopPropagation(),mce&&!((_=t.nativeEvent.target)!=null&&_.classList.contains(tK)))return!1;const{droppingItem:r,onDropDragOver:n,margin:i,cols:a,rowHeight:s,maxRows:o,width:l,containerPadding:c,transformScale:d}=this.props,f=n==null?void 0:n(t);if(f===!1)return this.state.droppingDOMNode&&this.removeDroppingPlaceholder(),!1;const p={...r,...f},{layout:m}=this.state,x=t.currentTarget.getBoundingClientRect(),v=t.clientX-x.left,b=t.clientY-x.top,w={left:v/d,top:b/d,e:t};if(this.state.droppingDOMNode){if(this.state.droppingPosition){const{left:C,top:N}=this.state.droppingPosition;(C!=v||N!=b)&&this.setState({droppingPosition:w})}}else{const C={cols:a,margin:i,maxRows:o,rowHeight:s,containerWidth:l,containerPadding:c||i},N=(0,f$e.calcXY)(C,b,v,p.w,p.h);this.setState({droppingDOMNode:Om.createElement("div",{key:p.i}),droppingPosition:w,layout:[...m,{...p,x:N.x,y:N.y,static:!1,isDraggable:!0}]})}}),Zs(this,"removeDroppingPlaceholder",()=>{const{droppingItem:t,cols:r}=this.props,{layout:n}=this.state,i=(0,Lr.compact)(n.filter(a=>a.i!==t.i),(0,Lr.compactType)(this.props),r,this.props.allowOverlap);this.setState({layout:i,droppingDOMNode:null,activeDrag:null,droppingPosition:void 0})}),Zs(this,"onDragLeave",t=>{t.preventDefault(),t.stopPropagation(),this.dragEnterCounter--,this.dragEnterCounter===0&&this.removeDroppingPlaceholder()}),Zs(this,"onDragEnter",t=>{t.preventDefault(),t.stopPropagation(),this.dragEnterCounter++}),Zs(this,"onDrop",t=>{t.preventDefault(),t.stopPropagation();const{droppingItem:r}=this.props,{layout:n}=this.state,i=n.find(a=>a.i===r.i);this.dragEnterCounter=0,this.removeDroppingPlaceholder(),this.props.onDrop(n,i,t)})}componentDidMount(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)}static getDerivedStateFromProps(t,r){let n;return r.activeDrag?null:(!(0,eD.deepEqual)(t.layout,r.propsLayout)||t.compactType!==r.compactType?n=t.layout:(0,Lr.childrenEqual)(t.children,r.children)||(n=r.layout),n?{layout:(0,Lr.synchronizeLayoutWithChildren)(n,t.children,t.cols,(0,Lr.compactType)(t),t.allowOverlap),compactType:t.compactType,children:t.children,propsLayout:t.layout}:null)}shouldComponentUpdate(t,r){return this.props.children!==t.children||!(0,Lr.fastRGLPropsEqual)(this.props,t,eD.deepEqual)||this.state.activeDrag!==r.activeDrag||this.state.mounted!==r.mounted||this.state.droppingPosition!==r.droppingPosition}componentDidUpdate(t,r){if(!this.state.activeDrag){const n=this.state.layout,i=r.layout;this.onLayoutMaybeChanged(n,i)}}containerHeight(){if(!this.props.autoSize)return;const t=(0,Lr.bottom)(this.state.layout),r=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return t*this.props.rowHeight+(t-1)*this.props.margin[1]+r*2+"px"}onLayoutMaybeChanged(t,r){r||(r=this.state.layout),(0,eD.deepEqual)(r,t)||this.props.onLayoutChange(t)}placeholder(){const{activeDrag:t}=this.state;if(!t)return null;const{width:r,cols:n,margin:i,containerPadding:a,rowHeight:s,maxRows:o,useCSSTransforms:l,transformScale:c}=this.props;return Om.createElement(eK.default,{w:t.w,h:t.h,x:t.x,y:t.y,i:t.i,className:`react-grid-placeholder ${this.state.resizing?"placeholder-resizing":""}`,containerWidth:r,cols:n,margin:i,containerPadding:a||i,maxRows:o,rowHeight:s,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:l,transformScale:c},Om.createElement("div",null))}processGridItem(t,r){if(!t||!t.key)return;const n=(0,Lr.getLayoutItem)(this.state.layout,String(t.key));if(!n)return null;const{width:i,cols:a,margin:s,containerPadding:o,rowHeight:l,maxRows:c,isDraggable:d,isResizable:f,isBounded:p,useCSSTransforms:m,transformScale:x,draggableCancel:v,draggableHandle:b,resizeHandles:w,resizeHandle:_}=this.props,{mounted:C,droppingPosition:N}=this.state,R=typeof n.isDraggable=="boolean"?n.isDraggable:!n.static&&d,P=typeof n.isResizable=="boolean"?n.isResizable:!n.static&&f,O=n.resizeHandles||w,D=R&&p&&n.isBounded!==!1;return Om.createElement(eK.default,{containerWidth:i,cols:a,margin:s,containerPadding:o||s,maxRows:c,rowHeight:l,cancel:v,handle:b,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:R,isResizable:P,isBounded:D,useCSSTransforms:m&&C,usePercentages:!C,transformScale:x,w:n.w,h:n.h,x:n.x,y:n.y,i:n.i,minH:n.minH,minW:n.minW,maxH:n.maxH,maxW:n.maxW,static:n.static,droppingPosition:r?N:void 0,resizeHandles:O,resizeHandle:_},t)}render(){const{className:t,style:r,isDroppable:n,innerRef:i}=this.props,a=(0,d$e.default)(tK,t),s={height:this.containerHeight(),...r};return Om.createElement("div",{ref:i,className:a,style:s,onDrop:n?this.onDrop:Lr.noop,onDragLeave:n?this.onDragLeave:Lr.noop,onDragEnter:n?this.onDragEnter:Lr.noop,onDragOver:n?this.onDragOver:Lr.noop},Om.Children.map(this.props.children,o=>this.processGridItem(o)),n&&this.state.droppingDOMNode&&this.processGridItem(this.state.droppingDOMNode,!0),this.placeholder())}}aC.default=i3;Zs(i3,"displayName","ReactGridLayout");Zs(i3,"propTypes",h$e.default);Zs(i3,"defaultProps",{autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isBounded:!1,isDraggable:!0,isResizable:!0,allowOverlap:!1,isDroppable:!1,useCSSTransforms:!0,transformScale:1,verticalCompact:!0,compactType:"vertical",preventCollision:!1,droppingItem:{i:"__dropping-elem__",h:1,w:1},resizeHandles:["se"],onLayoutChange:Lr.noop,onDragStart:Lr.noop,onDrag:Lr.noop,onDragStop:Lr.noop,onResizeStart:Lr.noop,onResize:Lr.noop,onResizeStop:Lr.noop,onDrop:Lr.noop,onDropDragOver:Lr.noop});var a3={},Hx={};Object.defineProperty(Hx,"__esModule",{value:!0});Hx.findOrGenerateResponsiveLayout=v$e;Hx.getBreakpointFromWidth=g$e;Hx.getColsFromBreakpoint=x$e;Hx.sortBreakpoints=y9;var w_=bn;function g$e(e,t){const r=y9(e);let n=r[0];for(let i=1,a=r.length;i<a;i++){const s=r[i];t>e[s]&&(n=s)}return n}function x$e(e,t){if(!t[e])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+e+" is missing!");return t[e]}function v$e(e,t,r,n,i,a){if(e[r])return(0,w_.cloneLayout)(e[r]);let s=e[n];const o=y9(t),l=o.slice(o.indexOf(r));for(let c=0,d=l.length;c<d;c++){const f=l[c];if(e[f]){s=e[f];break}}return s=(0,w_.cloneLayout)(s||[]),(0,w_.compact)((0,w_.correctBounds)(s,{cols:i}),a,i)}function y9(e){return Object.keys(e).sort(function(r,n){return e[r]-e[n]})}Object.defineProperty(a3,"__esModule",{value:!0});a3.default=void 0;var rK=xce(I),nl=gce(Jh),tD=t9,Cv=bn,Pm=Hx,y$e=gce(aC);function gce(e){return e&&e.__esModule?e:{default:e}}function xce(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(xce=function(i,a){if(!a&&i&&i.__esModule)return i;var s,o,l={__proto__:null,default:i};if(i===null||typeof i!="object"&&typeof i!="function")return l;if(s=a?n:r){if(s.has(i))return s.get(i);s.set(i,l)}for(const c in i)c!=="default"&&{}.hasOwnProperty.call(i,c)&&((o=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(i,c))&&(o.get||o.set)?s(l,c,o):l[c]=i[c]);return l})(e,t)}function T8(){return T8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T8.apply(null,arguments)}function mT(e,t,r){return(t=b$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b$e(e){var t=w$e(e,"string");return typeof t=="symbol"?t:t+""}function w$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const nK=e=>Object.prototype.toString.call(e);function S_(e,t){return e==null?null:Array.isArray(e)?e:e[t]}class b9 extends rK.Component{constructor(){super(...arguments),mT(this,"state",this.generateInitialState()),mT(this,"onLayoutChange",t=>{this.props.onLayoutChange(t,{...this.props.layouts,[this.state.breakpoint]:t})})}generateInitialState(){const{width:t,breakpoints:r,layouts:n,cols:i}=this.props,a=(0,Pm.getBreakpointFromWidth)(r,t),s=(0,Pm.getColsFromBreakpoint)(a,i),o=this.props.verticalCompact===!1?null:this.props.compactType;return{layout:(0,Pm.findOrGenerateResponsiveLayout)(n,r,a,a,s,o),breakpoint:a,cols:s}}static getDerivedStateFromProps(t,r){if(!(0,tD.deepEqual)(t.layouts,r.layouts)){const{breakpoint:n,cols:i}=r;return{layout:(0,Pm.findOrGenerateResponsiveLayout)(t.layouts,t.breakpoints,n,n,i,t.compactType),layouts:t.layouts}}return null}componentDidUpdate(t){(this.props.width!=t.width||this.props.breakpoint!==t.breakpoint||!(0,tD.deepEqual)(this.props.breakpoints,t.breakpoints)||!(0,tD.deepEqual)(this.props.cols,t.cols))&&this.onWidthChange(t)}onWidthChange(t){const{breakpoints:r,cols:n,layouts:i,compactType:a}=this.props,s=this.props.breakpoint||(0,Pm.getBreakpointFromWidth)(this.props.breakpoints,this.props.width),o=this.state.breakpoint,l=(0,Pm.getColsFromBreakpoint)(s,n),c={...i};if(o!==s||t.breakpoints!==r||t.cols!==n){o in c||(c[o]=(0,Cv.cloneLayout)(this.state.layout));let p=(0,Pm.findOrGenerateResponsiveLayout)(c,r,s,o,l,a);p=(0,Cv.synchronizeLayoutWithChildren)(p,this.props.children,l,a,this.props.allowOverlap),c[s]=p,this.props.onBreakpointChange(s,l),this.props.onLayoutChange(p,c),this.setState({breakpoint:s,layout:p,cols:l})}const d=S_(this.props.margin,s),f=S_(this.props.containerPadding,s);this.props.onWidthChange(this.props.width,d,l,f)}render(){const{breakpoint:t,breakpoints:r,cols:n,layouts:i,margin:a,containerPadding:s,onBreakpointChange:o,onLayoutChange:l,onWidthChange:c,...d}=this.props;return rK.createElement(y$e.default,T8({},d,{margin:S_(a,this.state.breakpoint),containerPadding:S_(s,this.state.breakpoint),onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))}}a3.default=b9;mT(b9,"propTypes",{breakpoint:nl.default.string,breakpoints:nl.default.object,allowOverlap:nl.default.bool,cols:nl.default.object,margin:nl.default.oneOfType([nl.default.array,nl.default.object]),containerPadding:nl.default.oneOfType([nl.default.array,nl.default.object]),layouts(e,t){if(nK(e[t])!=="[object Object]")throw new Error("Layout property must be an object. Received: "+nK(e[t]));Object.keys(e[t]).forEach(r=>{if(!(r in e.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,Cv.validateLayout)(e.layouts[r],"layouts."+r)})},width:nl.default.number.isRequired,onBreakpointChange:nl.default.func,onLayoutChange:nl.default.func,onWidthChange:nl.default.func});mT(b9,"defaultProps",{breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},containerPadding:{lg:null,md:null,sm:null,xs:null,xxs:null},layouts:{},margin:[10,10],allowOverlap:!1,onBreakpointChange:Cv.noop,onLayoutChange:Cv.noop,onWidthChange:Cv.noop});var w9={},vce=function(){if(typeof Map<"u")return Map;function e(t,r){var n=-1;return t.some(function(i,a){return i[0]===r?(n=a,!0):!1}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var n=e(this.__entries__,r),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(r,n){var i=e(this.__entries__,r);~i?this.__entries__[i][1]=n:this.__entries__.push([r,n])},t.prototype.delete=function(r){var n=this.__entries__,i=e(n,r);~i&&n.splice(i,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var i=0,a=this.__entries__;i<a.length;i++){var s=a[i];r.call(n,s[1],s[0])}},t}()}(),I8=typeof window<"u"&&typeof document<"u"&&window.document===document,gT=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),S$e=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(gT):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),E$e=2;function C$e(e,t){var r=!1,n=!1,i=0;function a(){r&&(r=!1,e()),n&&o()}function s(){S$e(a)}function o(){var l=Date.now();if(r){if(l-i<E$e)return;n=!0}else r=!0,n=!1,setTimeout(s,t);i=l}return o}var k$e=20,_$e=["top","right","bottom","left","width","height","size","weight"],N$e=typeof MutationObserver<"u",A$e=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=C$e(this.refresh.bind(this),k$e)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,n=r.indexOf(t);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!I8||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),N$e?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!I8||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,n=r===void 0?"":r,i=_$e.some(function(a){return!!~n.indexOf(a)});i&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),yce=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},hy=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||gT},bce=s3(0,0,0,0);function xT(e){return parseFloat(e)||0}function iK(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(n,i){var a=e["border-"+i+"-width"];return n+xT(a)},0)}function T$e(e){for(var t=["top","right","bottom","left"],r={},n=0,i=t;n<i.length;n++){var a=i[n],s=e["padding-"+a];r[a]=xT(s)}return r}function I$e(e){var t=e.getBBox();return s3(0,0,t.width,t.height)}function O$e(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return bce;var n=hy(e).getComputedStyle(e),i=T$e(n),a=i.left+i.right,s=i.top+i.bottom,o=xT(n.width),l=xT(n.height);if(n.boxSizing==="border-box"&&(Math.round(o+a)!==t&&(o-=iK(n,"left","right")+a),Math.round(l+s)!==r&&(l-=iK(n,"top","bottom")+s)),!R$e(e)){var c=Math.round(o+a)-t,d=Math.round(l+s)-r;Math.abs(c)!==1&&(o-=c),Math.abs(d)!==1&&(l-=d)}return s3(i.left,i.top,o,l)}var P$e=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof hy(e).SVGGraphicsElement}:function(e){return e instanceof hy(e).SVGElement&&typeof e.getBBox=="function"}}();function R$e(e){return e===hy(e).document.documentElement}function j$e(e){return I8?P$e(e)?I$e(e):O$e(e):bce}function D$e(e){var t=e.x,r=e.y,n=e.width,i=e.height,a=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,s=Object.create(a.prototype);return yce(s,{x:t,y:r,width:n,height:i,top:r,right:t+n,bottom:i+r,left:t}),s}function s3(e,t,r,n){return{x:e,y:t,width:r,height:n}}var M$e=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=s3(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=j$e(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),F$e=function(){function e(t,r){var n=D$e(r);yce(this,{target:t,contentRect:n})}return e}(),L$e=function(){function e(t,r,n){if(this.activeObservations_=[],this.observations_=new vce,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=n}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof hy(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)||(r.set(t,new M$e(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof hy(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)&&(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new F$e(n.target,n.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),wce=typeof WeakMap<"u"?new WeakMap:new vce,Sce=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=A$e.getInstance(),n=new L$e(t,r,this);wce.set(this,n)}return e}();["observe","unobserve","disconnect"].forEach(function(e){Sce.prototype[e]=function(){var t;return(t=wce.get(this))[e].apply(t,arguments)}});var B$e=function(){return typeof gT.ResizeObserver<"u"?gT.ResizeObserver:Sce}();const U$e=Object.freeze(Object.defineProperty({__proto__:null,default:B$e},Symbol.toStringTag,{value:"Module"})),$$e=zEe(U$e);Object.defineProperty(w9,"__esModule",{value:!0});w9.default=K$e;var E_=Ece(I),z$e=S9(Jh),H$e=S9($$e),W$e=S9(K4);function S9(e){return e&&e.__esModule?e:{default:e}}function Ece(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(Ece=function(i,a){if(!a&&i&&i.__esModule)return i;var s,o,l={__proto__:null,default:i};if(i===null||typeof i!="object"&&typeof i!="function")return l;if(s=a?n:r){if(s.has(i))return s.get(i);s.set(i,l)}for(const c in i)c!=="default"&&{}.hasOwnProperty.call(i,c)&&((o=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(i,c))&&(o.get||o.set)?s(l,c,o):l[c]=i[c]);return l})(e,t)}function O8(){return O8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O8.apply(null,arguments)}function A1(e,t,r){return(t=V$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V$e(e){var t=q$e(e,"string");return typeof t=="symbol"?t:t+""}function q$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const G$e="react-grid-layout";function K$e(e){var t;return t=class extends E_.Component{constructor(){super(...arguments),A1(this,"state",{width:1280}),A1(this,"elementRef",E_.createRef()),A1(this,"mounted",!1),A1(this,"resizeObserver",void 0)}componentDidMount(){this.mounted=!0,this.resizeObserver=new H$e.default(i=>{if(this.elementRef.current instanceof HTMLElement){const s=i[0].contentRect.width;this.setState({width:s})}});const n=this.elementRef.current;n instanceof HTMLElement&&this.resizeObserver.observe(n)}componentWillUnmount(){this.mounted=!1;const n=this.elementRef.current;n instanceof HTMLElement&&this.resizeObserver.unobserve(n),this.resizeObserver.disconnect()}render(){const{measureBeforeMount:n,...i}=this.props;return n&&!this.mounted?E_.createElement("div",{className:(0,W$e.default)(this.props.className,G$e),style:this.props.style,ref:this.elementRef}):E_.createElement(e,O8({innerRef:this.elementRef},i,this.state))}},A1(t,"defaultProps",{measureBeforeMount:!1}),A1(t,"propTypes",{measureBeforeMount:z$e.default.bool}),t}(function(e){e.exports=aC.default,e.exports.utils=bn,e.exports.calculateUtils=wf,e.exports.Responsive=a3.default,e.exports.Responsive.utils=Hx,e.exports.WidthProvider=w9.default})(Fle);var aK=Fle.exports;const X$e=({project:e,onClose:t,onSave:r})=>{const[n,i]=I.useState({projectName:"",projectType:""});I.useEffect(()=>{e&&i({projectName:e.projectName,projectType:e.projectType})},[e]);const a=o=>{const{name:l,value:c}=o.target;i(d=>({...d,[l]:c}))},s=async o=>{if(o.preventDefault(),!n.projectName.trim()){alert("Project name is required.");return}try{await r({id:e.id,...n}),t()}catch(l){console.error("Failed to update project:",l)}};return u.jsx("div",{className:"fixed inset-0 bg-scrim/60 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-2xl shadow-2xl w-full max-w-lg border border-outline/20",onClick:o=>o.stopPropagation(),children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Edit Project Details"}),u.jsx("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-2 rounded-full hover:bg-surface-container-highest transition-colors",children:u.jsx(Gr,{size:20})})]}),u.jsxs("form",{onSubmit:s,children:[u.jsxs("div",{className:"space-y-5",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"projectName",className:"block text-sm font-medium text-text-secondary mb-1.5 ml-1",children:"Project Name"}),u.jsx("input",{type:"text",id:"projectName",name:"projectName",value:n.projectName,onChange:a,className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none transition-all",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"projectType",className:"block text-sm font-medium text-text-secondary mb-1.5 ml-1",children:"Project Type"}),u.jsx("select",{id:"projectType",name:"projectType",value:n.projectType,onChange:a,className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none transition-all cursor-pointer",children:Sv.map(o=>u.jsx("option",{value:o,children:o},o))})]})]}),u.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[u.jsx("button",{type:"button",onClick:t,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors",children:"Cancel"}),u.jsx("button",{type:"submit",className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all active:scale-95",children:"Save Changes"})]})]})]})})},Y$e=({changeOrder:e,acceptedQuotes:t,onClose:r,onSave:n})=>{var v;const{currentUser:i}=Kr(),{deleteChangeOrder:a}=I7(),[s,o]=I.useState({description:"",amount:"",type:"Materials",quoteId:void 0}),[l,c]=I.useState(!1),[d,f]=I.useState(!1);I.useEffect(()=>{e&&o({description:e.description,amount:String(e.amount),type:e.type,quoteId:e.quoteId})},[e]);const p=b=>{const{name:w,value:_}=b.target,C=w==="quoteId"?_?parseInt(_,10):null:_;o(N=>({...N,[w]:C}))},m=async b=>{if(b.preventDefault(),!s.description.trim()||!s.amount.trim()){alert("Description and amount are required.");return}c(!0);try{await n({description:s.description,amount:parseFloat(s.amount),type:s.type,quoteId:s.quoteId})}catch(w){console.error("Failed to update change order:",w)}finally{c(!1)}},x=async()=>{if(window.confirm("Are you sure you want to permanently delete this change order?")){f(!0);try{await a(e.id),Re.success("Change order deleted successfully."),r()}catch(b){Re.error(b.message),console.error("Failed to delete change order:",b)}finally{f(!1)}}};return u.jsx("div",{className:"fixed inset-0 bg-scrim/60 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-2xl shadow-2xl w-full max-w-lg border border-outline/20",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Edit Change Order"}),u.jsx("button",{onClick:r,className:"text-text-secondary hover:text-text-primary p-2 rounded-full hover:bg-surface-container-highest transition-colors",children:u.jsx(Gr,{size:20})})]}),u.jsxs("form",{onSubmit:m,className:"flex flex-col",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-text-secondary mb-1",children:"Description"}),u.jsx("input",{type:"text",id:"description",name:"description",value:s.description,onChange:p,className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-text-secondary mb-1",children:"Amount"}),u.jsx("input",{type:"number",step:"0.01",id:"amount",name:"amount",value:s.amount,onChange:p,placeholder:"e.g., -50.00",className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-text-secondary mb-1",children:"Type"}),u.jsxs("select",{id:"type",name:"type",value:s.type,onChange:p,className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",children:[u.jsx("option",{value:"Materials",children:"Materials"}),u.jsx("option",{value:"Labor",children:"Labor"})]})]}),t&&t.length>1&&u.jsxs("div",{children:[u.jsx("label",{htmlFor:"quoteId",className:"block text-sm font-medium text-text-secondary mb-1",children:"For Quote"}),u.jsx("select",{id:"quoteId",name:"quoteId",value:s.quoteId||"",onChange:p,className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",children:t.map((b,w)=>u.jsxs("option",{value:b.id,children:["Quote #",w+1]},b.id))})]})]}),u.jsxs("div",{className:"flex items-center gap-3 mt-8",children:[((v=i==null?void 0:i.roles)==null?void 0:v.includes("Admin"))&&u.jsxs("button",{type:"button",onClick:x,disabled:l||d,className:"py-3 px-6 rounded-full bg-error hover:bg-error-hover text-on-error font-semibold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed mr-auto transition-all shadow-md",children:[u.jsx(Bs,{size:16}),d?"Deleting...":"Delete"]}),u.jsxs("div",{className:"flex items-center justify-end gap-3 flex-grow",children:[u.jsx("button",{type:"button",onClick:r,disabled:l||d,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors disabled:opacity-50",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:l||d,className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all disabled:opacity-50",children:l?"Saving...":"Save Changes"})]})]})]})]})})},Q$e=e=>{switch(e){case ar.SCHEDULED:return"bg-green-500 text-white";case ar.ACCEPTED:return"bg-teal-500 text-white";case ar.QUOTING:return"bg-accent text-on-accent";case ar.SAMPLE_CHECKOUT:return"bg-yellow-500 text-gray-800";case ar.AWAITING_DECISION:return"bg-secondary text-on-secondary";case ar.NEW:return"bg-gray-500 text-white";case ar.COMPLETED:return"bg-indigo-500 text-white";case ar.CANCELLED:return"bg-red-700 text-white";default:return"bg-secondary text-on-secondary"}},J$e=({project:e,customer:t,activeInstaller:r,projectLead:n,currentUser:i,updateProject:a,onEdit:s,onDeleteProject:o,isDeleting:l,isLayoutEditMode:c,onSaveLayout:d,onCancelLayout:f,onResetLayout:p})=>{var R,P,O;const{users:m,systemBranding:x}=Kr(),[v,b]=I.useState(!1),w=I.useRef(null);I.useEffect(()=>{const D=M=>{w.current&&!w.current.contains(M.target)&&b(!1)};return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[]);const _=D=>{a({id:e.id,status:D}),b(!1)};ar.NEW,ar.SAMPLE_CHECKOUT,ar.AWAITING_DECISION,ar.QUOTING,ar.ACCEPTED,ar.SCHEDULED,ar.COMPLETED,ar.CANCELLED,ar.CLOSED;const C=t!=null&&t.address?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t.address)}`:"#",N=af(e.createdAt,x==null?void 0:x.systemTimezone);return u.jsxs("div",{className:"bg-surface rounded-lg shadow-md p-6 border border-border",children:[u.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start gap-4 mb-6",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:e.projectName}),c&&u.jsx("button",{onClick:s,className:"p-1.5 text-text-secondary hover:text-text-primary rounded-md bg-background border border-border hover:border-primary transition-all",title:"Edit Project Details",children:u.jsx(tx,{size:16})})]}),u.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[u.jsxs("span",{className:"flex items-center gap-1 text-xs font-medium px-2.5 py-0.5 rounded bg-background border border-border text-text-secondary",children:[u.jsx(l8,{size:12})," ",e.projectType]}),u.jsxs("span",{className:"flex items-center gap-1 text-xs font-medium px-2.5 py-0.5 rounded bg-background border border-border text-text-secondary",children:[u.jsx(pd,{size:12})," Created: ",N]})]})]}),u.jsxs("div",{className:"flex items-center gap-3 w-full lg:w-auto",children:[c?u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:p,className:"flex items-center px-3 py-2 text-sm font-medium text-yellow-600 bg-yellow-50 hover:bg-yellow-100 rounded-md transition-colors",title:"Reset Default Layout",children:[u.jsx($x,{size:16,className:"mr-1"})," Reset"]}),u.jsxs("button",{onClick:f,className:"flex items-center px-3 py-2 text-sm font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded-md transition-colors",title:"Cancel Changes",children:[u.jsx(Gr,{size:16,className:"mr-1"})," Cancel"]}),u.jsxs("button",{onClick:d,className:"flex items-center px-3 py-2 text-sm font-medium text-white bg-primary hover:bg-primary-hover rounded-md shadow-sm transition-colors",title:"Save Layout Changes",children:[u.jsx(vs,{size:16,className:"mr-1"})," Save"]})]}):u.jsx(u.Fragment,{children:((R=i==null?void 0:i.roles)==null?void 0:R.includes("Admin"))&&u.jsxs("button",{onClick:o,disabled:l,className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-text-secondary hover:text-red-600 hover:bg-red-50 rounded-md transition-colors border border-transparent hover:border-red-100",children:[u.jsx(Bs,{size:16}),l?"Deleting...":"Delete"]})}),u.jsxs("div",{className:"relative",ref:w,children:[u.jsxs("button",{onClick:()=>c&&b(!v),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold uppercase tracking-wide transition-all shadow-sm 
                                ${Q$e(e.status)}
                                ${c?"cursor-pointer hover:ring-2 ring-primary ring-offset-1":"cursor-default"}
                            `,children:[e.status.replace(/_/g," "),c&&u.jsx(tx,{size:14,className:"opacity-70"})]}),v&&u.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-surface border border-border rounded-lg shadow-xl z-50 overflow-hidden",children:Object.values(ar).map(D=>u.jsx("button",{onClick:()=>_(D),className:`w-full text-left px-4 py-3 text-sm hover:bg-background transition-colors ${e.status===D?"font-bold text-primary bg-primary/5":"text-text-primary"}`,children:D},D))})]})]})]}),u.jsx("div",{className:"h-px bg-border my-4"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsxs("h3",{className:"text-xs font-bold text-text-tertiary uppercase tracking-wider mb-2 flex items-center gap-1",children:[u.jsx(oc,{size:12})," Customer"]}),u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsx(ai,{to:`/customers/${t==null?void 0:t.id}`,className:"font-semibold text-text-primary text-lg hover:text-primary transition-colors",children:(t==null?void 0:t.fullName)||"Unknown Customer"}),(t==null?void 0:t.phoneNumber)&&u.jsxs("div",{className:"flex items-center text-text-secondary text-sm pt-1",children:[u.jsx("span",{className:"mx-2 text-text-tertiary",children:""}),u.jsx(w0,{size:14,className:"mr-1 text-text-tertiary"}),u.jsx("a",{href:`tel:${t.phoneNumber}`,className:"hover:underline hover:text-primary",children:t.phoneNumber})]})]}),t!=null&&t.address?u.jsxs("a",{href:C,target:"_blank",rel:"noreferrer",className:"flex items-center gap-1.5 text-text-secondary hover:text-primary transition-colors text-sm group",children:[u.jsx(P4,{size:14,className:"text-text-tertiary group-hover:text-primary shrink-0"}),t.address]}):u.jsx("span",{className:"text-text-tertiary text-sm italic pl-5",children:"No address on file"})]}),r&&u.jsxs("div",{className:"space-y-1",children:[u.jsxs("h3",{className:"text-xs font-bold text-text-tertiary uppercase tracking-wider mb-2 flex items-center gap-1",children:[u.jsx(A8e,{size:12})," Installer"]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-xs shadow-sm",style:{backgroundColor:r.color||"#6b7280"},children:r.installerName.substring(0,2).toUpperCase()}),u.jsxs("div",{children:[u.jsx("div",{className:"font-semibold text-text-primary",children:r.installerName}),u.jsx("div",{className:"text-xs text-text-secondary",children:r.contactPhone||r.contactEmail||"No contact info"})]})]})]}),n&&u.jsxs("div",{className:"space-y-1",children:[u.jsxs("h3",{className:"text-xs font-bold text-text-tertiary uppercase tracking-wider mb-2 flex items-center gap-1",children:[u.jsx(Mh,{size:12})," Project Lead"]}),u.jsxs("div",{className:"flex items-center gap-3",children:[n.avatarUrl?u.jsx("img",{src:ds(n.avatarUrl),alt:"Lead",className:"w-8 h-8 rounded-full object-cover shadow-sm"}):u.jsxs("div",{className:"w-8 h-8 rounded-full bg-accent text-on-accent flex items-center justify-center font-bold text-xs",children:[(P=n.firstName)==null?void 0:P[0],(O=n.lastName)==null?void 0:O[0]]}),u.jsxs("div",{children:[u.jsxs("div",{className:"font-semibold text-text-primary",children:[n.firstName," ",n.lastName]}),u.jsx("div",{className:"text-xs text-text-secondary",children:n.email})]})]})]})]})]})},Z$e=({selectedProjectId:e,onProjectSelect:t})=>{const{data:r=[],isLoading:n}=Yh(),{data:i=[],isLoading:a}=Mx(),[s,o]=I.useState(""),[l,c]=I.useState(!1),d=n||a,f=I.useMemo(()=>!r||!i?[]:r.map(x=>{const v=i.find(b=>b.id===x.customerId);return{...x,customerName:v?v.fullName:"Unknown Customer"}}),[r,i]),p=I.useMemo(()=>{if(!s)return f.slice(0,10);const x=s.toLowerCase();return f.filter(v=>v.projectName.toLowerCase().includes(x)||v.customerName.toLowerCase().includes(x))},[s,f]),m=f.find(x=>x.id===e);return u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 cursor-pointer flex justify-between items-center",onClick:()=>c(!l),children:[u.jsx("span",{className:m?"text-text-primary":"text-text-tertiary",children:m?`${m.projectName} (${m.customerName})`:"Select a Project..."}),u.jsx(gc,{size:18,className:"text-text-secondary"})]}),l&&u.jsxs("div",{className:"absolute z-20 w-full bg-surface-container-high border border-outline/20 rounded-lg mt-1 shadow-xl max-h-72 overflow-y-auto flex flex-col",children:[u.jsx("div",{className:"p-2 sticky top-0 bg-surface-container-high border-b border-outline/10",children:u.jsx("input",{type:"text",placeholder:"Search projects...",autoFocus:!0,className:"w-full bg-surface-container border border-outline/50 rounded-md px-2 py-1 text-sm text-text-primary",value:s,onChange:x=>o(x.target.value)})}),d?u.jsxs("div",{className:"p-4 text-center text-text-secondary text-sm flex items-center justify-center gap-2",children:[u.jsx(O4,{size:16,className:"animate-spin"})," Loading..."]}):p.length===0?u.jsx("div",{className:"p-4 text-center text-text-secondary text-sm",children:"No projects found."}):u.jsx("div",{className:"overflow-y-auto",children:p.map(x=>u.jsxs("div",{onClick:()=>{t(x),c(!1),o("")},className:`px-4 py-3 hover:bg-primary-container/30 cursor-pointer flex justify-between items-center ${e===x.id?"bg-primary-container/50":""}`,children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-text-primary font-medium text-sm",children:x.projectName}),u.jsx("div",{className:"text-text-secondary text-xs",children:x.customerName})]}),e===x.id&&u.jsx(nf,{size:16,className:"text-primary"})]},x.id))})]}),l&&u.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>c(!1)})]})},C_=(e,t,r)=>`${e} - ${t}${r?` (${r})`:""}`,sK=e=>e?new Date(e).toISOString().split("T")[0]:"",vT=({isOpen:e,onClose:t,editingOrder:r=null,initialProjectId:n=null,prefillData:i=null})=>{const{data:a=[]}=cb(),{data:s=[]}=w4(),{data:o=[]}=Yh();Nle();const{addMaterialOrder:l,updateMaterialOrder:c}=k4();console.log("AddEditMaterialOrderModal Render:",{addMaterialOrderType:typeof l,addMaterialOrderValue:l});const{data:d=[]}=$s({queryKey:["material_orders","history",r==null?void 0:r.id],queryFn:()=>Qse(r.id),enabled:!!r}),[f,p]=I.useState(n),[m,x]=I.useState(null),[v,b]=I.useState(""),[w,_]=I.useState(""),[C,N]=I.useState("Customer"),[R,P]=I.useState([]),[O,D]=I.useState(""),[M,B]=I.useState(null),[U,H]=I.useState(!1),[Z,ee]=I.useState(!1),[V,te]=I.useState(""),se=o.find(q=>q.id===f),Q=I.useMemo(()=>s.filter(q=>q.vendorType==="Supplier"||q.vendorType==="Both"),[s]),[X,fe]=I.useState(null);I.useEffect(()=>{(async()=>{try{fe(await Lx())}catch{console.error("Failed to load pricing settings.")}})()},[]);const Se=I.useMemo(()=>!v.trim()||m?[]:Q.filter(q=>q.name.toLowerCase().includes(v.toLowerCase())),[Q,v,m]),Y=I.useMemo(()=>{if(O.length<2)return[];const q=O.toLowerCase(),Ae=[];return a.forEach(Pe=>{const He=(Pe.name||"").toLowerCase().includes(q)||(Pe.manufacturerName||"").toLowerCase().includes(q);Pe.variants.forEach(je=>{const $e=(je.name||"").toLowerCase().includes(q)||(je.sku||"").toLowerCase().includes(q);(He||$e)&&Ae.push({product:Pe,variant:je})})}),Ae},[a,O]),ce=q=>{x(q);const Ae=s.find(Pe=>Pe.id===q);if(b((Ae==null?void 0:Ae.name)||""),(Ae==null?void 0:Ae.dedicatedShippingDay)!==null&&(Ae==null?void 0:Ae.dedicatedShippingDay)!==void 0){const Pe=Ae.dedicatedShippingDay,He=new Date;let je=Pe-He.getDay();je<=0&&(je+=7),je<7&&(je+=7);const $e=new Date;$e.setDate(He.getDate()+je),_(sK($e.toISOString()))}else _("")};I.useEffect(()=>{if(e)if(r){p(r.projectId),x(r.supplierId||null);const q=s.find(Pe=>Pe.id===r.supplierId);b((q==null?void 0:q.name)||""),N(r.purchaserType||"Customer"),_(sK(r.etaDate)),te(r.notes||"");const Ae=r.lineItems.map(Pe=>{let He,je;for(const Ze of a){const lt=Ze.variants.find(kt=>Number(kt.id)===Pe.variantId||String(kt.id)===String(Pe.variantId));if(lt){He=Ze,je=lt;break}}if(!He||!je)return null;let $e=Pe.unitPriceSold!==null&&Pe.unitPriceSold!==void 0?Pe.unitPriceSold.toFixed(2):Pe.totalCost&&Pe.quantity?(Pe.totalCost/Pe.quantity).toFixed(2):"";return{product:He,variant:je,quantity:String(Pe.quantity),unit:Pe.unit||je.pricingUnit||je.uom||"SF",totalCost:Pe.totalCost!=null?String(Pe.totalCost):"",unitSellPrice:$e}}).filter(Boolean);P(Ae)}else if(i){p(i.projectId);const q=i.product.supplierId||i.product.manufacturerId,Ae=s.find(He=>He.id===q);Ae?ce(Ae.id):(x(null),b(""));let Pe="";if(X&&i.variant.unitCost){const He=yh(Ae,X,C);Pe=vh(Number(i.variant.unitCost),He.percentage,He.method).toFixed(2)}else i.variant.retailPrice&&(Pe=Number(i.variant.retailPrice).toFixed(2));P([{product:i.product,variant:i.variant,quantity:"1",unit:i.variant.pricingUnit||i.variant.uom||"SF",totalCost:Pe,unitSellPrice:Pe}])}else p(n),x(null),b(""),N("Customer"),_(""),P([]),te("")},[r,e,n,a,s,i,X]);const W=(q,Ae)=>{B({product:q,variant:Ae}),D(C_(q.name,Ae.name,Ae.size))},G=q=>{N(q),X&&R.length>0&&P(Ae=>Ae.map(Pe=>{if(Pe.variant.unitCost){const He=Pe.product.supplierId||Pe.product.manufacturerId,je=s.find(ht=>ht.id===He),$e=yh(je,X,q),Ze=vh(Number(Pe.variant.unitCost),$e.percentage,$e.method),lt=Ze.toFixed(2),kt=parseFloat(Pe.quantity)||0;return{...Pe,unitSellPrice:lt,totalCost:(kt*Ze).toFixed(2)}}return Pe}))},ie=()=>{if(M&&!R.some(q=>q.variant.id===M.variant.id)){let q="",Ae=M.variant.pricingUnit||M.variant.uom||"SF";if(X&&M.variant.unitCost){const Pe=s.find($e=>$e.id===(M.product.supplierId||M.product.manufacturerId)),He=yh(Pe,X,C);q=vh(Number(M.variant.unitCost),He.percentage,He.method).toFixed(2)}else M.variant.retailPrice&&(q=Number(M.variant.retailPrice).toFixed(2));if(P(Pe=>[...Pe,{product:M.product,variant:M.variant,quantity:"1",unit:Ae,totalCost:q,unitSellPrice:q}]),!m&&M.product.supplierId)ce(M.product.supplierId);else if(!m&&M.product.manufacturerId){const Pe=s.find(He=>He.id===M.product.manufacturerId);Pe&&(Pe.vendorType==="Supplier"||Pe.vendorType==="Both")?ce(Pe.id):Pe&&Pe.defaultSupplierId&&ce(Pe.defaultSupplierId)}D(""),B(null)}},Ce=I.useCallback((q,Ae,Pe)=>{P(He=>{const je=[...He];je[q][Ae]=Pe;const $e=je[q];if(Ae==="quantity"||Ae==="unitSellPrice"){const Ze=parseFloat(Ae==="quantity"?Pe:$e.quantity),lt=parseFloat(Ae==="unitSellPrice"?Pe:$e.unitSellPrice||"0");!isNaN(Ze)&&!isNaN(lt)?je[q].totalCost=(Ze*lt).toFixed(2):je[q].totalCost=""}return je})},[]),re=q=>{P(Ae=>Ae.filter(Pe=>Pe.variant.id!==q))},ne=I.useCallback(q=>{const Ae=R[q],Pe=Number(Ae.variant.cartonSize||0),He=parseFloat(Ae.quantity);if(!He||!Pe)return;const je=Math.ceil(He/Pe),Ze=(parseFloat(Ae.unitSellPrice||"0")*Pe).toFixed(2),lt=(je*parseFloat(Ze)).toFixed(2);P(kt=>{const ht=[...kt];return ht[q]={...ht[q],quantity:String(je),unit:"Carton",unitSellPrice:Ze,totalCost:lt},ht})},[R]),ge=async q=>{if(q.preventDefault(),!f){Re.error("Please select a project.");return}if(!m){Re.error("Please select a supplier.");return}if(R.length===0){Re.error("Please add at least one line item.");return}ee(!0);const Ae=R.map(He=>({sampleId:He.variant.id,variantId:He.variant.id,quantity:parseFloat(He.quantity)||0,unit:He.unit,totalCost:He.totalCost?parseFloat(He.totalCost):null,unitPriceSold:He.unitSellPrice?parseFloat(He.unitSellPrice):null})),Pe={supplierId:m,etaDate:w||null,purchaserType:C,lineItems:Ae,notes:V};console.log("Submitting Order:",{editingOrder:!!r,orderData:Pe});try{r?(console.log("Calling updateMaterialOrder..."),await c({id:r.id,data:Pe}),Re.success("Order updated successfully")):(console.log("Calling addMaterialOrder..."),await l({...Pe,projectId:f}),Re.success("Order created successfully")),t()}catch(He){console.error("Failed to save order:",He),Re.error("Failed to save order.")}finally{ee(!1)}};if(!e)return null;const we=r?"Edit Material Order":"Create Material Order";return u.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/75 overflow-y-auto",children:[u.jsx("div",{className:"block w-full h-full lg:flex lg:items-center lg:justify-center lg:p-4 lg:min-h-full",children:u.jsxs("div",{className:"bg-surface-container-high w-full min-h-full lg:min-h-0 lg:h-auto lg:max-h-[90vh] lg:max-w-4xl lg:rounded-2xl shadow-2xl flex flex-col border border-outline/10 relative",children:[u.jsxs("div",{className:"p-4 md:p-6 border-b border-outline/10 flex justify-between items-center bg-surface-container-low lg:rounded-t-2xl sticky top-0 z-10",children:[u.jsxs("h2",{className:"text-2xl font-bold text-text-primary flex items-center gap-2",children:[u.jsx(ex,{className:"text-primary"}),we]}),u.jsx("button",{onClick:t,className:"p-2 hover:bg-surface-container-highest rounded-full text-text-secondary hover:text-text-primary transition-colors",children:u.jsx(Gr,{size:24})})]}),u.jsxs("form",{onSubmit:ge,className:"flex flex-col flex-grow",children:[u.jsxs("div",{className:"p-6 overflow-y-auto flex-grow",children:[!n&&!r&&u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Project"}),u.jsx(Z$e,{onProjectSelect:q=>p(q.id),selectedProjectId:f})]}),i&&f&&u.jsxs("div",{className:"mb-6 p-4 bg-primary-container/20 border border-primary-container rounded-xl text-sm text-primary flex items-center gap-2",children:[u.jsx(eC,{size:18}),"Order initiated from selected sample in project ",u.jsx("strong",{children:se==null?void 0:se.projectName}),"."]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[u.jsxs("div",{className:"relative md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Supplier"}),u.jsx("input",{type:"text",placeholder:"Search for a supplier...",value:v,onChange:q=>{b(q.target.value),x(null)},className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors",required:!0}),v&&!m&&u.jsxs("div",{className:"absolute z-20 w-full bg-surface-container-highest border border-outline/10 rounded-b-md mt-1 max-h-40 overflow-y-auto shadow-xl",children:[Se.map(q=>u.jsx("div",{onClick:()=>ce(q.id),className:"p-2 hover:bg-background cursor-pointer text-text-primary",children:q.name},q.id)),u.jsx("div",{onClick:()=>H(!0),className:"p-2 text-accent font-semibold hover:bg-background hover:text-text-primary cursor-pointer text-center border-t border-border",children:"+ Add New Supplier"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"ETA"}),u.jsx("input",{type:"date",value:w,onChange:q=>_(q.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Purchaser"}),u.jsxs("div",{className:"flex bg-surface-container-highest p-1 rounded-lg border border-outline/10",children:[u.jsx("button",{type:"button",onClick:()=>G("Customer"),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors ${C==="Customer"?"bg-surface shadow-sm text-primary":"text-text-secondary hover:text-text-primary"}`,children:"Customer"}),u.jsx("button",{type:"button",onClick:()=>G("Installer"),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors ${C==="Installer"?"bg-surface shadow-sm text-primary":"text-text-secondary hover:text-text-primary"}`,children:"Installer"})]})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-text-secondary mb-1",children:"Notes"}),u.jsx("textarea",{id:"notes",value:V,onChange:q=>te(q.target.value),rows:2,className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors",placeholder:"Delivery instructions..."})]})]}),u.jsxs("div",{className:"bg-surface-container-low p-4 rounded-xl border border-outline/10 mb-6",children:[u.jsx("h3",{className:"font-semibold mb-3 text-text-primary",children:"Line Items"}),u.jsx("div",{className:"space-y-2 mb-4",children:R.map((q,Ae)=>{const Pe=Number(q.variant.cartonSize||0),He=q.variant.uom||"SF";return u.jsxs("div",{className:"bg-surface-container-highest border border-outline/5 p-4 rounded-xl mb-3 relative",children:[u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-[1.5fr,1fr,auto,auto,auto,auto,auto] items-end gap-3 md:gap-2",children:[u.jsxs("div",{className:"flex flex-col overflow-hidden col-span-2 md:col-span-1 pr-6 md:pr-0",children:[u.jsx("label",{className:"text-[9px] text-text-secondary uppercase mb-1",children:"Product"}),u.jsx("span",{className:"text-sm text-text-primary md:truncate font-medium leading-tight",title:C_(q.product.name,q.variant.name,q.variant.size),children:C_(q.product.name,q.variant.name,q.variant.size)})]}),u.jsxs("div",{className:"flex flex-col col-span-2 md:col-span-1",children:[u.jsx("label",{className:"text-[9px] text-text-secondary uppercase mb-1",children:"SKU"}),u.jsx("span",{className:"text-sm text-text-secondary p-1.5 bg-surface-container rounded-md border border-outline/10 truncate",children:q.variant.sku||"-"})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-[9px] text-text-secondary uppercase mb-1",children:"Qty"}),u.jsx("input",{type:"number",placeholder:"Qty",value:q.quantity,onChange:je=>Ce(Ae,"quantity",je.target.value),className:"w-full md:w-20 p-1.5 bg-surface-container rounded-md border-transparent text-sm text-text-primary text-center font-bold"})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-[9px] text-text-secondary uppercase mb-1",children:"Unit"}),u.jsx("select",{value:q.unit,onChange:je=>Ce(Ae,"unit",je.target.value),className:"w-full md:w-16 p-1.5 bg-surface-container rounded-md border-transparent text-sm appearance-none text-center text-text-primary cursor-pointer font-medium",children:uh.map(je=>u.jsx("option",{value:je,children:je},je))})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-[9px] text-text-secondary uppercase mb-1",children:"Price"}),u.jsx("input",{type:"number",step:"0.01",placeholder:"Price",value:q.unitSellPrice||"",onChange:je=>Ce(Ae,"unitSellPrice",je.target.value),className:"w-full md:w-24 p-1.5 bg-surface-container rounded-md border-transparent text-sm font-semibold text-success text-right"})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-[9px] text-text-secondary uppercase mb-1",children:"Total"}),u.jsx("input",{type:"number",step:"0.01",placeholder:"Total",value:q.totalCost,onChange:je=>Ce(Ae,"totalCost",je.target.value),className:"w-full md:w-28 p-1.5 bg-surface-container rounded-md border-transparent text-sm text-text-primary font-bold text-right"})]}),u.jsx("button",{type:"button",onClick:()=>re(q.variant.id),className:"absolute top-2 right-2 md:static md:mb-1 text-red-400 hover:text-red-600",children:u.jsx(T4,{size:20})})]}),q.unit!=="Carton"&&Pe>0&&u.jsx("div",{className:"mt-2 flex justify-end",children:u.jsxs("button",{type:"button",onClick:()=>ne(Ae),disabled:parseFloat(q.quantity)<=0,className:"flex items-center text-xs px-3 py-1.5 rounded-full font-bold text-on-secondary bg-secondary hover:bg-secondary-hover shadow-sm transition-colors mt-2 md:mt-0",title:`Click to convert ${q.quantity} ${q.unit} into full cartons`,children:[u.jsx(N4,{size:12,className:"mr-1"}),parseFloat(q.quantity)>0?`Convert to ${Math.ceil(parseFloat(q.quantity)/Pe)} Cartons`:"Convert to Cartons",u.jsxs("span",{className:"opacity-80 font-normal ml-1",children:["(",Pe," ",He,"/box)"]})]})})]},q.variant.id)})}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("div",{className:"relative flex-grow",children:[u.jsx("input",{type:"text",placeholder:"Search for product to add...",value:O,onChange:q=>{D(q.target.value),B(null)},className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors"}),O&&!M&&u.jsxs("div",{className:"absolute z-10 w-full bg-surface-container-highest border border-outline/10 rounded-b-md mt-1 max-h-60 overflow-y-auto shadow-xl",children:[Y.map(q=>u.jsxs("div",{onClick:()=>W(q.product,q.variant),className:"p-2 hover:bg-background cursor-pointer text-text-primary border-b border-border last:border-0",children:[u.jsx("div",{className:"font-medium",children:C_(q.product.name,q.variant.name,q.variant.size)}),u.jsxs("div",{className:"text-xs text-text-secondary flex justify-between",children:[u.jsx("span",{children:q.product.manufacturerName}),u.jsx("span",{children:q.variant.sku||"No SKU"})]})]},q.variant.id)),Y.length===0&&u.jsx("div",{className:"p-4 text-center text-text-secondary text-sm",children:"No products found."})]})]}),u.jsx("button",{type:"button",onClick:ie,disabled:!M,className:"py-2 px-6 bg-primary hover:bg-primary-hover rounded-full text-on-primary font-semibold disabled:opacity-50 shadow-md",children:"Add Item"})]})]}),r&&u.jsx("div",{className:"mt-6",children:u.jsx(e9,{title:"Change History",icon:u.jsx(Bx,{className:"w-6 h-6"}),defaultOpen:!1,children:u.jsx(pb,{history:d})})})]}),u.jsxs("div",{className:"p-4 md:p-6 border-t border-outline/10 bg-surface-container-low lg:rounded-b-2xl flex justify-end gap-4 shrink-0 sticky bottom-0 z-10 lg:static",children:[u.jsx("button",{type:"button",onClick:t,className:"py-2 px-6 bg-surface hover:bg-surface-container-highest border border-outline/20 rounded-full text-text-secondary font-medium transition-colors",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:Z||!f,className:"py-2 px-6 bg-primary hover:bg-primary-hover rounded-full text-on-primary font-semibold shadow-md disabled:opacity-50 transition-all",children:Z?"Saving...":r?"Save Changes":"Create Order"})]})]})]})}),u.jsx(hb,{isOpen:U,onClose:()=>H(!1),vendorToEdit:null,initialVendorType:"Supplier"})]})},oK=()=>{const e=new Date;e.setDate(e.getDate()+3);const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`},eze=(e,t)=>`${e} - ${t}`,tze=({project:e})=>{const{data:t=[]}=cb(),{data:r=[]}=QE(e.id),{createSampleCheckout:n,patchSampleCheckout:i,extendSampleCheckout:a,returnSampleCheckout:s}=Zse(),[o,l]=I.useState(!1),[c,d]=I.useState([]),[f,p]=I.useState(oK()),[m,x]=I.useState(!1),[v,b]=I.useState(null),w=I.useMemo(()=>r.filter(U=>U.projectId===e.id).sort((U,H)=>U.isSelected!==H.isSelected?U.isSelected?-1:1:new Date(H.checkoutDate).getTime()-new Date(U.checkoutDate).getTime()),[r,e.id]),_=()=>{d([]),p(oK()),l(!0)},C=()=>{l(!1)},N=I.useCallback(U=>{d(U)},[]),R=async U=>{if(U.preventDefault(),!(c.length===0||!f))try{const H=c.map(Z=>n.mutateAsync({projectId:e.id,variantId:Z.variantId,interestVariantId:Z.interestVariantId,sampleType:Z.sampleType,quantity:Z.quantity,expectedReturnDate:new Date(f).toISOString()}));await Promise.all(H),Re.success(`Checked out ${c.length} sample(s).`),C()}catch(H){console.error("Checkout failed",H),Re.error("Checkout failed.")}},P=async U=>{if(confirm("Are you sure you want to return this sample?"))try{await s.mutateAsync(U)}catch(H){console.error("Return failed:",H),Re.error("Failed to return sample.")}},O=async U=>{try{await a.mutateAsync(U.id)}catch(H){console.error("Extend failed:",H),Re.error("Failed to extend checkout.")}},D=async U=>{try{await i.mutateAsync({id:U.id,data:{isSelected:!U.isSelected}})}catch{Re.error("Failed to update selection.")}},M=U=>{let H,Z;for(const ee of t){if(!ee.variants)continue;const V=ee.variants.find(te=>String(te.id)===String(U.variantId));if(V){H=ee,Z=V;break}}H&&Z?(b({product:H,variant:Z,projectId:e.id}),x(!0)):Re.error("Could not find product details for ordering.")},B=U=>{for(const H of t){if(!H.variants)continue;const Z=H.variants.find(ee=>String(ee.id)===String(U.variantId));if(Z)return eze(H.name,Z.name)}return"Unknown Sample"};return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center flex-shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Q0,{className:"drag-handle cursor-move text-text-secondary hover:text-text-primary transition-colors",size:20}),u.jsx(yf,{className:"w-6 h-6 text-primary"}),u.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Sample Checkouts"})]}),u.jsxs("button",{onClick:_,className:"bg-primary hover:bg-primary-hover text-on-primary font-semibold py-1 px-4 text-sm rounded-full flex items-center gap-1",children:[u.jsx(lu,{size:16})," Check Out"]})]}),u.jsx("div",{className:"p-4 overflow-y-auto flex-grow",children:u.jsxs("div",{className:"space-y-3",children:[w.map(U=>{const H=B(U);return u.jsxs("div",{className:`bg-surface-container p-3 rounded-xl flex justify-between items-center border-l-4 ${U.isSelected?"border-tertiary bg-tertiary-container/20":"border-transparent"}`,children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-text-primary",children:H}),u.jsxs("p",{className:"text-xs text-text-secondary",children:["Expected Return: ",new Date(U.expectedReturnDate).toLocaleDateString()]}),u.jsxs("div",{className:"mt-2 flex gap-2",children:[u.jsxs("button",{onClick:()=>D(U),className:`text-xs flex items-center gap-1 px-2 py-1 rounded-full border transition-colors ${U.isSelected?"bg-tertiary-container text-on-tertiary-container border-tertiary-container/50":"bg-surface-container-high text-text-secondary border-outline/20 hover:bg-surface-container-highest"}`,children:[u.jsx(G8e,{size:12}),U.isSelected?"Selected Choice":"Select"]}),U.isSelected&&u.jsxs("button",{onClick:()=>M(U),className:"text-xs flex items-center gap-1 px-2 py-1 rounded-full border border-secondary-container/50 bg-secondary-container text-on-secondary-container hover:brightness-105 transition-all",children:[u.jsx(q8e,{size:12})," Order"]})]})]}),U.actualReturnDate?u.jsxs("div",{className:"text-right",children:[u.jsxs("span",{className:"text-sm text-tertiary flex items-center justify-end",children:[u.jsx(nf,{className:"w-4 h-4 mr-1"})," Returned"]}),u.jsx("span",{className:"text-xs text-text-secondary",children:new Date(U.actualReturnDate).toLocaleDateString()})]}):u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{onClick:()=>O(U),className:"text-sm bg-primary hover:bg-primary-hover text-on-primary py-1 px-3 rounded-full flex items-center gap-1",children:[u.jsx(od,{size:14})," Extend"]}),u.jsx("button",{onClick:()=>P(U),className:"text-sm border border-outline text-text-primary hover:bg-surface-container-highest py-1 px-3 rounded-full",children:"Return"})]})]},U.id)}),w.length===0&&u.jsx("p",{className:"text-text-tertiary text-center py-8 italic text-sm",children:"No samples checked out for this project."})]})}),o&&u.jsx(td,{children:u.jsx("div",{className:"fixed inset-0 bg-scrim/60 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-2xl w-full max-w-3xl border border-outline/20 flex flex-col max-h-[90vh]",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h3",{className:"text-2xl font-bold text-text-primary",children:"Check Out Sample"}),u.jsx("button",{onClick:C,className:"text-text-secondary hover:text-text-primary p-2 rounded-full hover:bg-surface-container-highest",children:u.jsx(Gr,{size:20})})]}),u.jsxs("form",{onSubmit:R,className:"flex-1 flex flex-col min-h-0",children:[u.jsxs("div",{className:"space-y-4 flex-1 overflow-y-auto pr-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-text-secondary block mb-2",children:"1. Expected Return Date"}),u.jsx("input",{type:"date",value:f,onChange:U=>p(U.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-text-secondary block mb-2",children:"2. Add Samples"}),u.jsx(Toe,{onItemsChange:N})]})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-outline/10 mt-4",children:[u.jsx("button",{type:"button",onClick:C,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors",children:"Cancel"}),u.jsxs("button",{type:"submit",disabled:c.length===0||!f,className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:["Check Out (",c.length,")"]})]})]})]})})}),m&&u.jsx(td,{children:u.jsx(vT,{isOpen:m,onClose:()=>x(!1),initialProjectId:e.id,prefillData:v})})]})},lK={installerName:"",contactEmail:"",contactPhone:"",color:"#ffffff",type:"Managed"},E9=({isOpen:e,onClose:t,installer:r,initialData:n})=>{const[i,a]=I.useState(lK),{createInstaller:s,updateInstaller:o,deleteInstaller:l}=N7(),c=s.isPending||o.isPending,d=l.isPending;I.useEffect(()=>{e&&r?a({installerName:r.installerName||"",contactEmail:r.contactEmail||"",contactPhone:r.contactPhone||"",color:r.color||"#ffffff",type:r.type||"Managed"}):e&&!r&&a({...lK,...n})},[e,r,n]);const f=v=>{const{name:b,value:w}=v.target;let _=w;if(b==="contactPhone"){const C=w.replace(/\D/g,"").slice(0,10);C.length<=3?_=C:C.length<=6?_=`${C.slice(0,3)}-${C.slice(3)}`:_=`${C.slice(0,3)}-${C.slice(3,6)}-${C.slice(6)}`}a(C=>({...C,[b]:_}))},p=v=>{v.preventDefault(),r?o.mutate({...r,...i},{onSuccess:()=>{Re.success("Installer updated."),t()}}):s.mutate(i,{onSuccess:()=>{Re.success("Installer created."),t()}})},m=()=>{r&&window.confirm(`Are you sure you want to permanently delete ${r.installerName}? This action cannot be undone.`)&&l.mutate(r.id,{onSuccess:()=>{Re.success("Installer deleted successfully."),t()}})};if(!e)return null;const x="w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary placeholder-text-secondary focus:outline-none focus:border-primary transition-colors";return u.jsx("div",{className:"fixed inset-0 bg-black/75 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-surface-container-high w-full h-full md:h-auto md:max-w-md md:rounded-2xl shadow-2xl flex flex-col border border-outline/10",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center bg-surface-container-low md:rounded-t-2xl",children:[u.jsxs("h2",{className:"text-xl font-bold text-text-primary flex items-center gap-2",children:[u.jsx(ub,{className:"text-primary"}),r?"Edit Installer":"New Installer"]}),u.jsx("button",{onClick:t,className:"p-2 hover:bg-surface-container-highest rounded-full text-text-secondary hover:text-text-primary transition-colors",children:u.jsx(Gr,{size:24})})]}),u.jsxs("form",{onSubmit:p,className:"flex flex-col h-full md:h-auto",children:[u.jsxs("div",{className:"p-6 space-y-4 flex-grow overflow-y-auto",children:[u.jsx("input",{type:"text",name:"installerName",placeholder:"Installer Name",value:i.installerName,onChange:f,className:x,required:!0}),u.jsxs("select",{name:"type",value:i.type,onChange:f,className:`${x} cursor-pointer`,children:[u.jsx("option",{value:"Managed",children:"Managed Installer (Employee)"}),u.jsx("option",{value:"Unmanaged",children:"Unmanaged Installer (Sub)"})]}),u.jsxs("div",{className:"space-y-4 pt-2",children:[u.jsx("input",{type:"email",name:"contactEmail",placeholder:"Contact Email",value:i.contactEmail,onChange:f,className:x}),u.jsx("input",{type:"tel",name:"contactPhone",placeholder:"Contact Phone",value:i.contactPhone,onChange:f,className:x})]}),u.jsx("div",{className:"pt-4 border-t border-outline/10 mt-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("label",{htmlFor:"color",className:"text-sm font-medium text-text-secondary",children:"Calendar Color"}),u.jsx("input",{type:"color",name:"color",value:i.color,onChange:f,className:"h-10 w-20 p-1 bg-surface-container-highest border border-outline/20 rounded-md cursor-pointer"})]})})]}),u.jsxs("div",{className:"p-4 border-t border-outline/10 bg-surface-container-low md:rounded-b-2xl flex justify-end gap-3 shrink-0",children:[r&&u.jsxs("button",{type:"button",onClick:m,className:"py-2 px-6 bg-error-container hover:bg-error/20 text-error rounded-full font-semibold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed mr-auto transition-colors",disabled:c||d,children:[u.jsx(Bs,{size:16}),d?"Deleting...":"Delete"]}),u.jsx("button",{type:"submit",className:"py-2 px-6 bg-primary hover:bg-primary-hover rounded-full text-on-primary font-semibold shadow-md transition-all",disabled:c||d,children:c?"Saving...":r?"Save Changes":"Create Installer"})]})]})]})})},rze=e=>{const t=ja(),r=Ir({mutationFn:Use,onSuccess:()=>{t.invalidateQueries({queryKey:["installers"]}),Re.success("Installer created.")},onError:a=>Re.error(`Creation failed: ${a.message}`)}),n=Ir({mutationFn:$se,onSuccess:()=>{t.invalidateQueries({queryKey:["installers"]}),Re.success("Installer updated.")},onError:a=>Re.error(`Update failed: ${a.message}`)}),i=Ir({mutationFn:zse,onSuccess:()=>{t.invalidateQueries({queryKey:["installers"]}),Re.success("Installer deleted successfully.")},onError:a=>Re.error(`Deletion failed: ${a.message}`)});return{createInstaller:r,updateInstaller:n,deleteInstaller:i}},nze=({project:e,isModalOpen:t,onCloseModal:r,onOpenEditModal:n,editingQuoteForModal:i})=>{const{systemBranding:a}=Kr(),{data:s=[]}=S4(e.id),{data:o=[]}=vf(),{addQuote:l,updateQuote:c,acceptQuote:d}=A7();rze();const[f,p]=I.useState(!1),{data:m=[]}=$s({queryKey:["quotes","history",e.id],queryFn:()=>qse(e.id),enabled:!!e.id&&f}),[x,v]=I.useState(null),[b,w]=I.useState({installationType:"Managed Installation",materialsAmount:"",laborAmount:"",laborDepositPercentage:"50",quoteDetails:""}),[_,C]=I.useState(""),[N,R]=I.useState(null),[P,O]=I.useState(!1),D=I.useMemo(()=>{if(!_)return[];let V="Managed";return b.installationType==="Unmanaged Installer"&&(V="Unmanaged"),o.filter(te=>te.installerName.toLowerCase().includes(_.toLowerCase())&&(te.type===V||!te.type))},[o,_,b.installationType]);I.useEffect(()=>{if(N){let V="Managed";b.installationType==="Unmanaged Installer"&&(V="Unmanaged"),N.type&&N.type!==V&&(R(null),C(""))}},[b.installationType,N]);const M=I.useMemo(()=>{const V=parseFloat(b.materialsAmount)||0;if(b.installationType==="Managed Installation"){const te=parseFloat(b.laborAmount)||0,se=parseFloat(b.laborDepositPercentage)||0;return V+te*(se/100)}return V},[b]);I.useEffect(()=>{if(t)if(i){v(i);const V=o.find(te=>te.id===i.installerId);V?(R(V),C(V.installerName)):(R(null),C("")),w({installationType:i.installationType||"Managed Installation",materialsAmount:String(i.materialsAmount||""),laborAmount:String(i.laborAmount||""),laborDepositPercentage:String(i.laborDepositPercentage||"50"),quoteDetails:i.quoteDetails||""})}else v(null),w({installationType:"Managed Installation",materialsAmount:"",laborAmount:"",laborDepositPercentage:"50",quoteDetails:""}),R(null),C("")},[t,i,o]);const B=async V=>{if(V.preventDefault(),(b.installationType==="Managed Installation"||b.installationType==="Unmanaged Installer")&&!N){qr.error("Please select an installer.");return}const se={projectId:e.id,installerId:(N==null?void 0:N.id)||null,installationType:b.installationType,materialsAmount:parseFloat(b.materialsAmount)||0,laborAmount:b.installationType==="Managed Installation"?parseFloat(b.laborAmount)||0:null,laborDepositPercentage:b.installationType==="Managed Installation"?parseFloat(b.laborDepositPercentage)||50:null,quoteDetails:b.quoteDetails,poNumber:x?x.poNumber:null,status:x?x.status:ll.SENT};try{x?await c({...se,id:x.id}):await l(se),r(),qr.success(x?"Quote updated":"Quote added")}catch(Q){console.error(Q),qr.error("Failed to save quote")}},U=V=>{R(V),C(V.installerName)},H=()=>{O(!0)},Z=async(V,te,se)=>{V.preventDefault(),V.stopPropagation();try{se===ll.ACCEPTED?await d({id:te.id,status:se}):await c({id:te.id,status:se}),qr.success(`Quote ${se.toLowerCase()}`)}catch(Q){console.error(Q),qr.error("Failed to update quote status")}},ee=async(V,te)=>{const se=s.find(Q=>Q.id===V);se&&se.poNumber!==te&&(await c({id:V,poNumber:te}),qr.success("PO number updated"))};return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center flex-shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Q0,{className:"drag-handle cursor-move text-text-secondary hover:text-text-primary transition-colors",size:20}),u.jsx(Zc,{className:"w-6 h-6 text-primary"}),u.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Quotes"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{onClick:()=>{v(null),n(null)},className:"bg-primary hover:bg-primary-hover text-on-primary font-semibold py-1 px-4 text-sm rounded-full flex items-center gap-1 transition-all shadow-sm",children:[u.jsx(Jl,{size:16})," Add"]}),u.jsx("button",{onClick:()=>p(!f),className:`p-2 rounded-full transition-colors ${f?"bg-primary-container text-primary font-bold":"text-text-secondary hover:text-text-primary hover:bg-surface-container-highest"}`,title:"Toggle Quote History",children:u.jsx(Bx,{size:18})})]})]}),u.jsx("div",{className:"p-4 overflow-y-auto flex-grow scrollbar-thin scrollbar-thumb-surface-container-highest",children:f?u.jsx(pb,{history:m}):u.jsxs("div",{className:"space-y-3",children:[s.map(V=>{const te=o.find(Q=>Q.id===V.installerId),se=(Number(V.materialsAmount)||0)+(Number(V.laborAmount)||0);return u.jsx("div",{className:`block bg-surface-container p-3 rounded-xl border-l-4 hover:bg-surface-container-high transition-colors ${V.status===ll.ACCEPTED?"border-tertiary":V.status===ll.REJECTED?"border-error":"border-secondary"}`,children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-bold text-lg text-text-primary",children:["$",se.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),u.jsx("p",{className:"text-sm text-text-secondary font-medium",children:(te==null?void 0:te.installerName)||V.installationType}),u.jsxs("p",{className:"text-xs text-text-secondary mt-2 opacity-80",children:["M: $",Number(V.materialsAmount||0).toLocaleString(),", L: $",Number(V.laborAmount||0).toLocaleString()]}),u.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider bg-surface-container-highest text-text-secondary px-2 py-1 rounded-full mt-2 inline-block border border-outline/5",children:V.installationType})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"font-bold text-xs uppercase tracking-widest text-text-primary",children:V.status}),u.jsx("p",{className:"text-[10px] text-text-tertiary mt-1",children:af(V.dateSent,a==null?void 0:a.systemTimezone)}),V.status===ll.SENT&&u.jsxs("div",{className:"flex space-x-2 mt-3 items-center",children:[u.jsx("button",{onClick:()=>n(V),className:"p-2 text-text-secondary hover:text-text-primary hover:bg-surface-container-highest rounded-full transition-colors",title:"Edit Quote",children:u.jsx(Qh,{className:"w-4 h-4"})}),u.jsx("button",{onClick:Q=>Z(Q,V,ll.ACCEPTED),className:"p-2 bg-tertiary text-on-tertiary rounded-full hover:bg-tertiary-hover shadow-sm transition-colors",title:"Accept Quote",children:u.jsx(nf,{className:"w-4 h-4"})}),u.jsx("button",{onClick:Q=>Z(Q,V,ll.REJECTED),className:"p-2 bg-error text-on-error rounded-full hover:bg-error-hover shadow-sm transition-colors",title:"Reject Quote",children:u.jsx(Gr,{className:"w-4 h-4"})})]}),V.status===ll.ACCEPTED&&u.jsxs("div",{className:"mt-3 flex items-center",children:[u.jsx("input",{type:"text",placeholder:"Add PO #",defaultValue:V.poNumber||"",onKeyDown:Q=>{Q.key==="Enter"&&ee(V.id,Q.currentTarget.value)},className:"text-xs w-24 p-1.5 bg-surface-container-low border border-outline/50 rounded-lg text-text-primary focus:ring-2 focus:ring-primary/50 outline-none",id:`po-input-${V.id}`}),u.jsx("button",{onClick:()=>{const Q=document.getElementById(`po-input-${V.id}`).value;ee(V.id,Q)},className:"p-1.5 bg-primary text-on-primary rounded-lg hover:bg-primary-hover ml-1 shadow-sm transition-colors",title:"Save PO",children:u.jsx(vs,{className:"w-3.5 h-3.5"})})]})]})]})},V.id)}),s.length===0&&u.jsx("p",{className:"text-text-tertiary text-center py-8 italic text-sm",children:"No quotes created yet."})]})}),t&&u.jsx(td,{children:u.jsx("div",{className:"fixed inset-0 bg-scrim/60 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-2xl w-full max-w-2xl border border-outline/20 shadow-2xl",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h3",{className:"text-2xl font-bold text-text-primary",children:x?"Edit Quote":"Add New Quote"}),u.jsx("button",{onClick:r,className:"text-text-secondary hover:text-text-primary p-2 rounded-full hover:bg-surface-container-highest transition-colors",children:u.jsx(Gr,{size:20})})]}),u.jsxs("form",{onSubmit:B,children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-sm font-semibold text-text-secondary mb-3",children:"Installation Type"}),u.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:h5e.map(V=>u.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer group",children:[u.jsx("input",{type:"radio",name:"installationType",value:V,checked:b.installationType===V,onChange:te=>w({...b,installationType:te.target.value}),className:"form-radio h-5 w-5 text-primary bg-surface-container border-outline/50 focus:ring-primary"}),u.jsx("span",{className:"text-text-primary group-hover:text-primary transition-colors",children:V})]},V))})]}),(b.installationType==="Managed Installation"||b.installationType==="Unmanaged Installer")&&u.jsxs("div",{className:"relative mb-6",children:[u.jsx("label",{className:"block text-sm font-semibold text-text-secondary mb-1.5 ml-1",children:"Installer"}),u.jsx("input",{type:"text",placeholder:"Search for an installer...",value:_,onChange:V=>{C(V.target.value),R(null)},className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"}),_&&!N&&u.jsxs("div",{className:"absolute z-10 w-full bg-surface-container-high border border-outline/20 rounded-lg mt-1 max-h-48 overflow-y-auto shadow-xl",children:[D.map(V=>u.jsx("div",{onClick:()=>U(V),className:"px-4 py-2.5 hover:bg-primary-container/30 cursor-pointer text-text-primary transition-colors",children:V.installerName},V.id)),D.length===0&&u.jsxs("div",{className:"p-4 text-center text-text-secondary text-sm",children:["No results. ",u.jsx("button",{type:"button",onClick:H,className:"ml-2 text-primary font-bold hover:underline",children:"Add New"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-text-secondary mb-1.5 ml-1",children:"Materials Cost"}),u.jsx("input",{type:"number",step:"0.01",placeholder:"0.00",value:b.materialsAmount,onChange:V=>w({...b,materialsAmount:V.target.value}),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary focus:ring-2 focus:ring-primary/50 outline-none",required:!0})]}),b.installationType==="Managed Installation"&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-text-secondary mb-1.5 ml-1",children:"Labor Cost"}),u.jsx("input",{type:"number",step:"0.01",placeholder:"0.00",value:b.laborAmount,onChange:V=>w({...b,laborAmount:V.target.value}),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary focus:ring-2 focus:ring-primary/50 outline-none",required:!0})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 items-center",children:[b.installationType==="Managed Installation"&&u.jsxs("div",{className:"relative",children:[u.jsx("label",{className:"block text-sm font-semibold text-text-secondary mb-1.5 ml-1",children:"Installer Deposit %"}),u.jsx("input",{type:"number",value:b.laborDepositPercentage,onChange:V=>w({...b,laborDepositPercentage:V.target.value}),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary focus:ring-2 focus:ring-primary/50 outline-none"}),u.jsx("span",{className:"absolute right-4 top-1/2 mt-3 -translate-y-1/2 text-text-tertiary font-bold",children:"%"})]}),u.jsxs("div",{className:"bg-surface-container p-4 rounded-xl text-center self-end border border-outline/20 shadow-inner",children:[u.jsx("span",{className:"text-xs text-text-secondary uppercase font-bold tracking-wider block mb-1",children:"Required Deposit"}),u.jsxs("span",{className:"text-2xl font-bold text-text-primary",children:["$",M.toFixed(2)]})]})]}),u.jsx("textarea",{placeholder:"Scope of work and specific terms...",value:b.quoteDetails,onChange:V=>w({...b,quoteDetails:V.target.value}),className:"w-full bg-surface-container border border-outline/50 rounded-xl px-4 py-3 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none transition-all",rows:4}),u.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[u.jsx("button",{type:"button",onClick:r,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors font-medium",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:(b.installationType==="Managed Installation"||b.installationType==="Unmanaged Installer")&&!N,className:"py-3 px-8 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-bold shadow-lg transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Save Changes":"Add Quote"})]})]})]})})}),P&&u.jsx(td,{children:u.jsx(E9,{isOpen:P,onClose:()=>{O(!1),C("")},installer:null,initialData:{installerName:_,type:b.installationType==="Unmanaged Installer"?"Unmanaged":"Managed"}})})]})},cK=e=>e?new Date(e).toISOString().split("T")[0]:"";let rD=0;const ize=({project:e,job:t,quotes:r,changeOrders:n})=>{const{data:i=[],isLoading:a}=vf(),s=I.useRef(!1),o=ja(),[l,c]=I.useState({projectId:e.id,poNumber:"",depositReceived:!1,contractsReceived:!1,finalPaymentReceived:!1,isOnHold:!1,appointments:[]}),d=I.useMemo(()=>r.filter(B=>B.status===ll.ACCEPTED),[r]),f=I.useMemo(()=>d.length===0?!1:d.some(B=>B.installationType==="Managed Installation"||B.installationType==="Unmanaged Installer"),[d]),p=I.useMemo(()=>d.some(B=>B.installationType==="Managed Installation"),[d]),m=I.useMemo(()=>{const B=d.map(V=>{const te=(Number(V.materialsAmount)||0)+(Number(V.laborAmount)||0),se=n.filter(W=>W.quoteId===V.id),Q=se.reduce((W,G)=>W+(Number(G.amount)||0),0),X=te+Q,fe=V.installationType==="Managed Installation"?(Number(V.laborDepositPercentage)||0)/100:0,Se=(Number(V.materialsAmount)||0)+(Number(V.laborAmount)||0)*fe,Y=se.reduce((W,G)=>{const ie=Number(G.amount)||0;return W+(G.type==="Materials"?ie:ie*fe)},0),ce=Se+Y;return{subtotal:X,deposit:ce}}),U=n.filter(V=>V.quoteId==null).reduce((V,te)=>V+(Number(te.amount)||0),0),H=B.reduce((V,te)=>V+te.subtotal,0)+U,Z=B.reduce((V,te)=>V+te.deposit,0),ee=H-Z;return{grandTotal:H,totalDeposit:Z,balanceDue:ee}},[d,n]);I.useEffect(()=>{if(t){const B=Array.isArray(t.appointments)&&t.appointments.length>0,U=Array.isArray(l.appointments)&&l.appointments.length>0;if(s.current&&U&&!B)return;c({...t,projectId:e.id,appointments:(t.appointments||[]).map(H=>({...H,_tempId:H.id||rD++}))}),s.current=!0}else s.current||(c({projectId:e.id,poNumber:"",depositReceived:!1,contractsReceived:!1,finalPaymentReceived:!1,isOnHold:!1,appointments:[{_tempId:rD++,appointmentName:"Installation",quoteId:d.length===1?d[0].id:void 0,installerId:d.length===1?d[0].installerId:null,startDate:"",endDate:""}]}),s.current=!0)},[t,e.id,d]),I.useEffect(()=>{if(d.length===1&&l.appointments){const B=d[0].id;l.appointments.some(H=>H.quoteId!==B)&&c(H=>({...H,appointments:(H.appointments||[]).map(Z=>({...Z,quoteId:B,installerId:d[0].installerId}))}))}},[d,l.appointments]);const x=(B,U)=>{c(H=>({...H,[B]:U}))},v=(B,U,H)=>{c(Z=>({...Z,appointments:(Z.appointments||[]).map(ee=>ee._tempId===B?{...ee,[U]:H}:ee)}))},b=(B,U)=>{const H=U?parseInt(U):null,Z=d.find(ee=>ee.id===H);c(ee=>({...ee,appointments:(ee.appointments||[]).map(V=>V._tempId===B?{...V,quoteId:H,installerId:(Z==null?void 0:Z.installerId)||null}:V)}))},w=()=>{var U;const B={_tempId:rD++,appointmentName:`Part ${(((U=l.appointments)==null?void 0:U.length)||0)+1}`,quoteId:d.length===1?d[0].id:void 0,installerId:d.length===1?d[0].installerId:null,startDate:"",endDate:""};c(H=>({...H,appointments:[...H.appointments||[],B]}))},_=B=>{c(U=>({...U,appointments:(U.appointments||[]).filter(H=>H._tempId!==B)}))},C=Ir({mutationFn:Gse,onSuccess:()=>{o.invalidateQueries({queryKey:["jobs"]}),o.invalidateQueries({queryKey:["project",e.id]})}}),N=Ir({mutationFn:s6e,onSuccess:()=>{o.invalidateQueries({queryKey:["projects"]}),o.invalidateQueries({queryKey:["project",e.id]})}}),R=async()=>{var V,te;const B=(V=l.appointments)==null?void 0:V[0],U=e.status===ar.ACCEPTED&&f;if(U&&(!B||!B.startDate)){Re.error("Please enter a Start Date for the first appointment to schedule the job.");return}if(f&&((te=l.appointments)!=null&&te.some(se=>!se.quoteId))){Re.error("All appointments must be linked to an Accepted Quote (Scope of Work).");return}if(U&&p&&(!l.depositReceived||!l.contractsReceived)){Re.error("Deposit and Contracts must be marked as received before scheduling a Managed Job.");return}const{appointments:H,...Z}=l,ee=(H||[]).map(({_tempId:se,startDate:Q,endDate:X,...fe})=>({...fe,startDate:Q&&!Q.includes("T")?`${Q}T12:00:00`:Q,endDate:X&&!X.includes("T")?`${X}T12:00:00`:X}));try{await C.mutateAsync({...Z,depositAmount:m.totalDeposit,appointments:ee}),U&&await N.mutateAsync({id:e.id,status:ar.SCHEDULED}),Re.success("Job details saved successfully.")}catch{Re.error("Failed to save job details. Please try again.")}},P=()=>{x("isOnHold",!l.isOnHold)},O=I.useMemo(()=>{if(!l.appointments||l.appointments.length===0)return null;const B=l.appointments.map(U=>U.endDate?new Date(U.endDate).getTime():0).sort((U,H)=>H-U);return B[0]>0?new Date(B[0]):null},[l.appointments]),D=O?new Date>=O:!1,M=e.status===ar.SCHEDULED||e.status===ar.COMPLETED;return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center flex-shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Q0,{className:"drag-handle cursor-move text-text-secondary hover:text-text-primary transition-colors",size:20}),u.jsx(pd,{className:"w-6 h-6 text-primary"}),u.jsx("h2",{className:"text-xl font-semibold text-text-primary",children:"Job Details & Scheduling"})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("button",{onClick:P,className:`font-semibold py-2 px-4 rounded-full flex items-center gap-2 transition-colors text-sm ${l.isOnHold?"bg-tertiary-container text-on-tertiary-container":"border border-outline text-text-primary hover:bg-surface-container-highest"}`,children:[u.jsx(ld,{className:"w-4 h-4"})," ",l.isOnHold?"ON HOLD":"Place Hold"]}),u.jsxs("button",{onClick:R,className:"bg-primary hover:bg-primary-hover text-on-primary font-semibold py-2 px-4 rounded-full flex items-center gap-2 text-sm disabled:opacity-50",disabled:C.isPending||N.isPending,children:[C.isPending||N.isPending?u.jsx(O4,{className:"w-4 h-4 animate-spin"}):u.jsx(vs,{className:"w-4 h-4"}),"Save Details"]})]})]}),u.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6 flex-grow overflow-hidden",children:[u.jsx("div",{className:"space-y-6 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-surface-container-highest",children:f&&u.jsxs("div",{className:"space-y-3",children:[d.length===0&&u.jsxs("div",{className:"p-3 bg-error-container text-error border border-error rounded-lg flex items-center gap-2",children:[u.jsx(ld,{size:20})," Scheduling requires at least one accepted quote."]}),(l.appointments||[]).map(B=>{var U;return d.find(H=>H.id===B.quoteId),u.jsxs("div",{className:"bg-surface-container p-4 rounded-xl border border-outline/20 relative",children:[(((U=l.appointments)==null?void 0:U.length)||0)>1&&u.jsx("button",{onClick:()=>_(B._tempId),className:"absolute -top-2 -right-2 text-text-secondary hover:text-error bg-surface-container-high p-0.5 rounded-full",children:u.jsx(T4,{size:20})}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"col-span-2",children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Appointment Name"}),u.jsx("input",{type:"text",value:B.appointmentName,onChange:H=>v(B._tempId,"appointmentName",H.target.value),className:"w-full bg-surface-container-low border border-outline/50 rounded-lg px-3 py-2 text-sm text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Start Date"}),u.jsx("input",{type:"date",value:cK(B.startDate),onChange:H=>v(B._tempId,"startDate",H.target.value),className:"w-full bg-surface-container-low border border-outline/50 rounded-lg px-3 py-2 text-sm text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"End Date"}),u.jsx("input",{type:"date",value:cK(B.endDate),onChange:H=>v(B._tempId,"endDate",H.target.value),className:"w-full bg-surface-container-low border border-outline/50 rounded-lg px-3 py-2 text-sm text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"})]}),u.jsxs("div",{className:"col-span-2",children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Scope of Work (via Quote)"}),d.length===1?u.jsx("div",{className:"w-full bg-surface-container-low border border-outline/50 rounded-lg px-3 py-2 text-sm text-text-primary font-medium",children:(()=>{const H=d[0],Z=i.find(ee=>ee.id===H.installerId);return`${(Z==null?void 0:Z.installerName)||"Installer"} ${H.poNumber?`(PO: ${H.poNumber})`:""}`})()}):u.jsxs("select",{value:B.quoteId?String(B.quoteId):"",onChange:H=>b(B._tempId,H.target.value),className:"w-full bg-surface-container-low border border-outline/50 rounded-lg px-3 py-2 text-sm text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none cursor-pointer",disabled:d.length===0,children:[u.jsx("option",{value:"",children:"-- Select Installer (Via Quote) --"}),d.map(H=>{const Z=i.find(se=>se.id===H.installerId),ee=Z?Z.installerName:"Unknown Installer",V=H.installationType!=="Managed Installation"?` - ${H.installationType}`:"",te=H.poNumber?` (PO: ${H.poNumber})`:"";return u.jsx("option",{value:H.id,children:`${ee}${te}${V}`},H.id)})]})]})]})]},B._tempId)}),u.jsxs("button",{onClick:w,className:`w-full flex items-center justify-center gap-2 text-sm font-semibold py-2 border-2 border-dashed rounded-xl transition-colors ${d.length>0?"text-primary hover:text-primary-hover border-outline/30 hover:border-primary/80 hover:bg-primary-container/20":"text-text-tertiary border-outline/20 opacity-50 cursor-not-allowed"}`,disabled:d.length===0,children:[u.jsx(lu,{size:16})," Add Appointment"]})]})}),u.jsxs("div",{className:"space-y-4 flex flex-col overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-surface-container-highest",children:[u.jsxs("div",{className:"bg-surface-container p-4 rounded-xl space-y-2 border border-outline/20",children:[u.jsxs("div",{className:"flex justify-between items-center font-bold text-lg",children:[u.jsx("span",{className:"text-text-primary",children:"Job Grand Total:"}),u.jsxs("span",{className:"text-text-primary",children:["$",m.grandTotal.toFixed(2)]})]}),u.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[u.jsx("span",{className:"text-text-secondary",children:"Total Deposit Required:"}),u.jsxs("span",{className:"text-text-primary",children:["$",m.totalDeposit.toFixed(2)]})]}),u.jsxs("div",{className:"flex justify-between items-center font-bold text-lg border-t-2 border-tertiary/50 pt-2 mt-2",children:[u.jsx("span",{className:"text-text-primary",children:"Balance Due:"}),u.jsxs("span",{className:"text-tertiary",children:["$",m.balanceDue.toFixed(2)]})]})]}),p&&u.jsxs("div",{className:"pt-2 space-y-3 flex-grow",children:[u.jsxs("label",{className:`flex items-center space-x-2 ${M?"cursor-not-allowed opacity-50":"cursor-pointer"}`,children:[u.jsx("input",{type:"checkbox",checked:l.depositReceived||!1,onChange:B=>x("depositReceived",B.target.checked),disabled:M,className:"form-checkbox h-5 w-5 text-primary bg-surface-container border-outline/50 rounded focus:ring-primary"}),u.jsx("span",{className:"text-text-primary",children:"Deposit Received"})]}),u.jsxs("label",{className:`flex items-center space-x-2 ${M?"cursor-not-allowed opacity-50":"cursor-pointer"}`,children:[u.jsx("input",{type:"checkbox",checked:l.contractsReceived||!1,onChange:B=>x("contractsReceived",B.target.checked),disabled:M,className:"form-checkbox h-5 w-5 text-primary bg-surface-container border-outline/50 rounded focus:ring-primary"}),u.jsx("span",{className:"text-text-primary",children:"Contracts Received"})]}),M&&u.jsxs("label",{className:`flex items-center space-x-2 ${D?"cursor-pointer":"cursor-not-allowed opacity-50"}`,title:D?"":`Available after ${O==null?void 0:O.toLocaleDateString()}`,children:[u.jsx("input",{type:"checkbox",checked:l.finalPaymentReceived||!1,onChange:B=>x("finalPaymentReceived",B.target.checked),disabled:!D,className:"form-checkbox h-5 w-5 text-primary bg-surface-container border-outline/50 rounded focus:ring-primary"}),u.jsx("span",{className:"text-text-primary",children:"Final Payment Received"})]})]})]})]})]})},aze=({project:e,projectChangeOrders:t,acceptedQuotes:r,addChangeOrder:n,onEditChangeOrder:i})=>{const[a,s]=I.useState(""),[o,l]=I.useState(""),[c,d]=I.useState("Materials"),[f,p]=I.useState("");I.useEffect(()=>{r&&r.length>0&&p(String(r[0].id))},[r]);const m=async w=>{if(w.preventDefault(),!a||!o){alert("Please provide a description and an amount.");return}let _;if(f?_=parseInt(f,10):r.length>0&&(_=r[0].id),r.length>1&&!_){alert("Please select which quote this change order applies to.");return}await n({projectId:e.id,quoteId:_,description:a,amount:parseFloat(o),type:c}),s(""),l("")},x=w=>{if(!w||r.length<=1)return null;const _=r.findIndex(C=>C.id===w);return _===-1?"For an unknown quote":`For Quote #${_+1}`},v=r.length>1?"md:grid-cols-4":"md:grid-cols-3",b=r.length>1?"md:col-start-4":"md:col-start-3";return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center flex-shrink-0",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Q0,{className:"drag-handle cursor-move text-text-secondary hover:text-text-primary transition-colors",size:20}),u.jsx(lu,{className:"w-6 h-6 text-primary"}),u.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Change Orders"})]})}),u.jsx("div",{className:"p-4 overflow-y-auto flex-grow",children:u.jsxs("div",{className:"space-y-3",children:[t.map(w=>u.jsxs("div",{className:`flex justify-between items-center p-3 rounded-lg bg-surface-container ${Number(w.amount)>=0?"text-tertiary":"text-error"}`,children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:w.description}),u.jsxs("p",{className:"text-xs text-text-secondary",children:[w.type,x(w.quoteId)&&u.jsx("span",{className:"ml-2 pl-2 border-l border-outline/20",children:x(w.quoteId)})]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsxs("span",{className:"font-bold",children:[Number(w.amount)>=0?"+":"","$",Number(w.amount).toFixed(2)]}),u.jsx("button",{onClick:()=>i(w),className:"ml-4 p-1 text-text-secondary hover:text-text-primary rounded-full hover:bg-surface-container-highest transition-colors",title:"Edit Change Order",children:u.jsx(Qh,{size:16})})]})]},w.id)),t.length===0&&u.jsx("p",{className:"text-text-secondary text-center py-4",children:"No change orders added yet."})]})}),u.jsx("div",{className:"p-4 border-t border-outline/10 bg-surface-container-low flex-shrink-0",children:u.jsxs("form",{onSubmit:m,className:`grid grid-cols-1 ${v} gap-4 items-end`,children:[u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Description"}),u.jsx("input",{type:"text",value:a,onChange:w=>s(w.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",required:!0})]}),r.length>1&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"For Quote"}),u.jsx("select",{value:f,onChange:w=>p(w.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",children:r.map((w,_)=>u.jsxs("option",{value:String(w.id),children:["Quote #",_+1]},w.id))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Type"}),u.jsxs("select",{value:c,onChange:w=>d(w.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",children:[u.jsx("option",{value:"Materials",children:"Materials"}),u.jsx("option",{value:"Labor",children:"Labor"})]})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Amount"}),u.jsx("input",{type:"number",step:"0.01",value:o,onChange:w=>l(w.target.value),placeholder:"e.g., -50.00",className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",required:!0})]}),u.jsx("button",{type:"submit",className:`bg-primary hover:bg-primary-hover text-on-primary font-bold py-2.5 px-4 rounded-full transition-all shadow-md active:scale-95 ${b}`,children:"Add"})]})})]})},sze=({project:e,orders:t,isModalOpen:r,onCloseModal:n,editingOrder:i,onEditOrder:a})=>{const{currentUser:s,systemBranding:o}=Kr(),{data:l=[]}=cb(),{deleteMaterialOrder:c}=k4(),d=async p=>{if(window.confirm("Are you sure you want to delete this material order? This action cannot be undone."))try{await c(p),Re.success("Order deleted successfully.")}catch(m){Re.error("Failed to delete order."),console.error("Failed to delete order:",m)}},f=(p,m)=>{if(!l)return m;const x=l.flatMap(v=>v.variants).find(v=>v.id===String(p));return(x==null?void 0:x.pricingUnit)||m||""};return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center flex-shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Q0,{className:"drag-handle cursor-move text-text-secondary hover:text-text-primary transition-colors",size:20}),u.jsx(ex,{className:"w-6 h-6 text-primary"}),u.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Material Orders"})]}),u.jsx("button",{onClick:()=>a(null),className:"bg-primary hover:bg-primary-hover text-on-primary font-semibold py-1 px-4 text-sm rounded-full",children:"Add Order"})]}),u.jsx("div",{className:"p-4 overflow-y-auto flex-grow scrollbar-thin scrollbar-thumb-surface-container-highest",children:t.length===0?u.jsx("p",{className:"text-text-secondary text-center py-4",children:"No material orders placed yet."}):u.jsx("div",{className:"space-y-4",children:t.map(p=>{var m;return u.jsxs("div",{className:"bg-surface-container p-4 rounded-xl border border-outline/20",children:[u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-text-primary",children:p.supplierName||"N/A"}),u.jsxs("p",{className:"text-xs text-text-secondary",children:["Order Date: ",af(p.orderDate.split("T")[0]+"T12:00:00",o==null?void 0:o.systemTimezone)]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-xs font-medium bg-secondary-container text-on-secondary-container px-2 py-0.5 rounded-full",children:p.status}),u.jsxs("p",{className:"text-xs text-text-secondary",children:["ETA: ",p.etaDate?af(p.etaDate.split("T")[0]+"T12:00:00",o==null?void 0:o.systemTimezone):"N/A"]})]}),u.jsx("button",{onClick:()=>a(p),className:"p-1.5 text-text-secondary hover:text-text-primary rounded-full hover:bg-surface-container-highest",children:u.jsx(Qh,{size:16})}),((m=s==null?void 0:s.roles)==null?void 0:m.includes("Admin"))&&u.jsx("button",{onClick:()=>d(p.id),className:"p-1.5 text-error hover:text-error-hover rounded-full hover:bg-error-container/50",children:u.jsx(Bs,{size:16})})]})]}),u.jsx("ul",{className:"space-y-2 text-sm border-t border-outline/20 pt-3",children:p.lineItems.map(x=>u.jsxs("li",{className:"flex justify-between items-center text-text-secondary",children:[u.jsxs("span",{children:[x.quantity," ",f(x.sampleId,x.unit)," x ",`${x.style}${x.color?` - ${x.color}`:""}`]}),x.totalCost!=null&&u.jsx("span",{children:zm(Number(x.totalCost))})]},x.id))})]},p.id)})})}),r&&u.jsx(td,{children:u.jsx(vT,{isOpen:r,onClose:n,editingOrder:i,initialProjectId:e.id})})]})},C9=()=>sr("/api/jobs"),oze=async e=>{const t=await fetch(`${C9()}/${e}/notes`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch job notes");return t.json()},lze=async(e,t)=>{const r=await fetch(`${C9()}/${e}/notes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t}),credentials:"include"});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to add note")}return r.json()},cze=async e=>{const t=`${C9()}/notes/${e}/pin`,r=await fetch(t,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include"});if(!r.ok)throw new Error("Failed to toggle pin");return r.json()},uK=/@\[(product|project|user|customer|installer):([^|]+)\|([^\]]+)\]/g,o3=({content:e})=>{if(!e)return null;const t=[];let r=0,n;for(;(n=uK.exec(e))!==null;){n.index>r&&t.push(e.substring(r,n.index));const[i,a,s,o]=n;a==="project"?t.push(u.jsxs(ai,{to:`/projects/${s}`,className:"inline-flex items-center text-indigo-700 font-medium hover:underline bg-indigo-100 px-1.5 py-0.5 rounded text-xs mx-0.5 align-baseline",children:[" ",o]},n.index)):a==="product"?t.push(u.jsxs(ai,{to:`/samples?search=${encodeURIComponent(o)}`,className:"inline-flex items-center text-teal-700 font-medium hover:underline bg-teal-100 px-1.5 py-0.5 rounded text-xs mx-0.5 align-baseline",children:[" ",o]},n.index)):a==="user"?t.push(u.jsxs("span",{className:"inline-flex items-center text-blue-700 font-medium bg-blue-100 px-1.5 py-0.5 rounded text-xs mx-0.5 align-baseline cursor-default",children:["@",o]},n.index)):a==="customer"?t.push(u.jsxs(ai,{to:`/customers/${s}`,className:"inline-flex items-center text-amber-700 font-medium hover:underline bg-amber-100 px-1.5 py-0.5 rounded text-xs mx-0.5 align-baseline",children:[" ",o]},n.index)):a==="installer"?t.push(u.jsxs(ai,{to:`/installers/${s}`,className:"inline-flex items-center text-pink-700 font-medium hover:underline bg-pink-100 px-1.5 py-0.5 rounded text-xs mx-0.5 align-baseline",children:[" ",o]},n.index)):t.push(i),r=uK.lastIndex}return r<e.length&&t.push(e.substring(r)),u.jsx("span",{className:"whitespace-pre-wrap leading-relaxed",children:t})};function uze(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function dze(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function fze(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function yT(e){return uze(e)||dze(e)||fze()}function eu(){return eu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eu.apply(this,arguments)}function hze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mze(e,t,r){return t&&pze(e.prototype,t),e}function xn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P8(e,t){return P8=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},P8(e,t)}function gze(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P8(e,t)}function kv(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?kv=function(r){return typeof r}:kv=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},kv(e)}function WN(e){return typeof Symbol=="function"&&kv(Symbol.iterator)==="symbol"?WN=function(r){return kv(r)}:WN=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":kv(r)},WN(e)}function xze(e,t){return t&&(WN(t)==="object"||typeof t=="function")?t:xn(e)}function bT(e){return bT=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},bT(e)}function hn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vze=function(e,t,r,n,i,a,s,o){if(!e){var l;if(t===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,i,a,s,o],d=0;l=new Error(t.replace(/%s/g,function(){return c[d++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}},yze=vze;const py=Us(yze);function bze(e){if(Array.isArray(e))return e}function wze(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var s=e[Symbol.iterator](),o;!(n=(o=s.next()).done)&&(r.push(o.value),!(t&&r.length===t));n=!0);}catch(l){i=!0,a=l}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw a}}return r}function Sze(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function wT(e,t){return bze(e)||wze(e,t)||Sze()}function Eze(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function Cze(e,t){if(e==null)return{};var r=Eze(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var mb=function(t){return t===Object(t)?Object.keys(t):[]},Cce=function(t){return t===Object(t)?Object.values(t):[]};function kce(e,t){var r=Object.assign({},e);return VN(e)&&VN(t)&&mb(t).forEach(function(n){VN(t[n])?n in e?r[n]=kce(e[n],t[n]):Object.assign(r,qd({},n,t[n])):Object.assign(r,qd({},n,t[n]))}),r}var R8=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.reduce(function(a,s){return kce(a,s)},t)},kze=function(t,r){var n=Object.assign({},t);if(r)for(var i=0;i<r.length;i++)delete n[r[i]];return n},VN=function(t){return t===Object(t)&&!(t instanceof Date)&&!Array.isArray(t)},_ze=function(t){return(t||[]).filter(Boolean)},k9=function(t){return t[0]==="&"},Nze=function(t){return!k9(t)},dK=function(t){return t.replace(/-(\w)/g,function(r,n){return n.toUpperCase()})},Aze=function(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=mb(t),i={},a=0,s=n.length;a<s;a+=1){var o=n[a],l=Object.prototype.toString.call(t[o])!=="[object Object]"||o[0]===":"||o[0]==="@"||r.indexOf(o)>=0;l&&(i[o]=t[o])}return i},_ce=function(t,r){for(var n=r.map(dK),i=mb(t),a={},s=0,o=i.length;s<o;s+=1){var l=i[s];(r.indexOf(l)>=0||n.indexOf(dK(l))>=0)&&(a[l]=t[l])}return a},Tze=function e(t,r){for(var n=R8.apply(void 0,[{},kze(t,r)].concat(Lo(Cce(_ce(t,r))))),i=mb(n).filter(k9),a=0,s=i.length;a<s;a+=1){var o=i[a],l=e(n[o],r);r.indexOf(o)>=0?(delete n[o],n=R8({},n,l)):n[o]=l}return n};function fK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function hK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fK(Object(r),!0).forEach(function(n){qd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Ize=["animationName"],Nce=function(t){var r=t.style,n=t.className;return hK(hK({},r?{style:Aze(r,Ize)}:{}),n?{className:n}:{})},Ace=I.createContext(Nce);Ace.Provider;var Tce=function(t){if(t){if(typeof t=="string")return[t];if(!Array.isArray(t)){var r=t;return mb(t).reduce(function(n,i){return n.concat(r[i]?[i]:[])},[])}}else return[];return t},Oze={},Pze=function(t){return function(r,n){var i=n||Oze;t.memoize=t.memoize||new WeakMap;var a;t.memoize.has(i)?a=t.memoize.get(i):(a={},t.memoize.set(i,a));var s=Tce(r).join(" ");return s in a?a[s]:a[s]=t(r||[],n)}};function pK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function T1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pK(Object(r),!0).forEach(function(n){qd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Rze=function(t){var r=t&&mb(t)[0];return r&&r.split("__")[0].split("--")[0]},jze=function(t,r,n){if(t){var i=t.split(" ")[0],a=[].concat(Lo(r.length===0?n.map(function(s){return"".concat(i,"--").concat(s.substring(1))}):[]),Lo(r.map(function(s){return"".concat(i,"__").concat(s)})));return r.length===0?[t].concat(Lo(a)):a}};function Ice(e){var t=e.style,r=e.className,n=e.classNames,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nce,a=r||Rze(n)||(t==null?void 0:t.className),s=typeof t=="function"?t:Pze(function(f,p){var m=Tce(f);py(Array.isArray(m),"First parameter must be a string, an array of strings, a plain object with boolean values, or a falsy value."),py(!p||VN(p),"Optional second parameter must be a plain object.");var x=m.filter(k9),v=m.filter(Nze),b=v.length>0?function(C){return Cce(_ce(C,v))}:function(C){return[C]},w=function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return b(Tze(N,x))},_=jze(a,v,x);return Ice(T1(T1(T1({},(t||p)&&{style:R8.apply(void 0,[{}].concat(Lo(w(p)),Lo(w(t))))}),_&&{className:_.join(" ")}),n&&{classNames:n}),i)}),o=T1({},typeof t=="function"?t:{style:t}),l=Lo(new Set([].concat(Lo(o.className?o.className.split(" "):[]),Lo(a?a.split(" "):[])))),c=n?_ze(l.map(function(f){return n[f]})):l,d=i(T1(T1({},o),c.length>0?{className:c.join(" ")}:{}));return Object.assign(s,d),s}function mK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function kw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mK(Object(r),!0).forEach(function(n){qd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Dze=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.reduce(function(i,a){return kw(kw(kw({},i),typeof a=="function"?a:{}),{},{style:kw(kw({},i.style),typeof a=="function"?a.style:a)})},{})},_9=function(t,r,n){var i=r.style,a=r.className,s=r.classNames,o=I.useContext(Ace),l=I.useMemo(function(){return Ice({style:i,className:a,classNames:s},o)},[i,a,s,o]);return l(n,t)},qN=function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},Bd={id:"__id__",display:"__display__"},gK=function(t,r){py(r==="id"||r==="display",'Second arg must be either "id" or "display", got: "'.concat(r,'"'));var n=t.indexOf(Bd.display),i=t.indexOf(Bd.id);return n<0&&(n=null),i<0&&(i=null),py(n!==null||i!==null,"The markup '".concat(t,"' does not contain either of the placeholders '__id__' or '__display__'")),n!==null&&i!==null?r==="id"&&i<=n||r==="display"&&n<=i?0:1:0},Mze=function(t){var r=/^\/(.+)\/(\w+)?$/;return new RegExp(t.map(function(n){var i=r.exec(n.toString()),a=wT(i,3),s=a[1],o=a[2];return py(!o,"RegExp flags are not supported. Change /".concat(s,"/").concat(o," into /").concat(s,"/")),"(".concat(s,")")}).join("|"),"g")},Oce=function(t){var r=0;return t.indexOf("__id__")>=0&&r++,t.indexOf("__display__")>=0&&r++,r},Fze=function(){},lC=function(t,r,n){for(var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Fze,a=Mze(r.map(function(R){return R.regex})),s=2,o=r.map(function(R){var P=R.markup,O=s;return s+=Oce(P)+1,O}),l,c=0,d=0;(l=a.exec(t))!==null;){var f=o.find(function(R){return!!l[R]}),p=o.indexOf(f),m=r[p],x=m.markup,v=m.displayTransform,b=f+gK(x,"id"),w=f+gK(x,"display"),_=l[b],C=v(_,l[w]),N=t.substring(c,l.index);i(N,c,d),d+=N.length,n(l[0],l.index,d,_,C,p,c),d+=C.length,c=a.lastIndex}c<t.length&&i(t.substring(c),c,d)},Hm=function(t,r){var n="";return lC(t,r,function(i,a,s,o,l){n+=l},function(i){n+=i}),n},jo=function(t,r,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"START";if(typeof n!="number")return n;var a,s=function(c,d,f){a===void 0&&f+c.length>=n&&(a=d+n-f)},o=function(c,d,f,p,m,x,v){a===void 0&&f+m.length>n&&(i==="NULL"?a=null:a=d+(i==="END"?c.length:0))};return lC(t,r,o,s),a===void 0?t.length:a},S2=function(t,r,n,i){return t.substring(0,r)+i+t.substring(n)},Lze=function(t,r,n,i){var a=n.selectionStartBefore,s=n.selectionEndBefore,o=n.selectionEndAfter,l=Hm(t,i),c=l.length-r.length;a==="undefined"&&(a=o+c),s==="undefined"&&(s=a),a===s&&s===o&&l.length===r.length&&(a=a-1);var d=r.slice(a,o),f=Math.min(a,o),p=s;a===o&&(p=Math.max(s,a+c));var m=jo(t,i,f,"START"),x=jo(t,i,p,"END"),v=jo(t,i,f,"NULL"),b=jo(t,i,p,"NULL"),w=v===null||b===null,_=S2(t,m,x,d);if(!w){var C=Hm(_,i);if(C!==r){for(f=0;r[f]===C[f];)f++;d=r.slice(f,o),p=l.lastIndexOf(r.substring(o)),m=jo(t,i,f,"START"),x=jo(t,i,p,"END"),_=S2(t,m,x,d)}}return _},xK=function(t,r,n){var i=n,a=!1,s=function(l,c,d,f,p,m,x){d<=n&&d+p.length>n&&(i=d,a=!0)};if(lC(t,r,s),a)return i},Yw=function(t,r){var n=[];return lC(t,r,function(i,a,s,o,l,c,d){n.push({id:o,display:l,childIndex:c,index:a,plainTextIndex:s})}),n},Pce=function(t,r){return"".concat(t,"-").concat(r)},k_=function(t){return Object.values(t).reduce(function(r,n){var i=n.results;return r+i.length},0)},Bze=function(t,r){var n=Yw(t,r),i=n[n.length-1];return i?i.plainTextIndex+i.display.length:0},Uze=function(t){var r=qN(t),n=t[t.indexOf(Bd.display)+Bd.display.length],i=t[t.indexOf(Bd.id)+Bd.id.length];return new RegExp(r.replace(Bd.display,"([^".concat(qN(n||""),"]+?)")).replace(Bd.id,"([^".concat(qN(i||""),"]+?)")))},Rp=function(t){return I.Children.toArray(t).map(function(r){var n=r.props,i=n.markup,a=n.regex,s=n.displayTransform;return{markup:i,regex:a?$ze(a,i):Uze(i),displayTransform:s||function(o,l){return l||o}}})},$ze=function(t,r){var n=new RegExp(t.toString()+"|").exec("").length-1,i=Oce(r);return py(n===i,"Number of capturing groups in RegExp ".concat(t.toString()," (").concat(n,") does not match the number of placeholders in the markup '").concat(r,"' (").concat(i,")")),t},zze=function(t,r,n){return t.replace(Bd.id,r).replace(Bd.display,n)},Hze=[{base:"A",letters:/(&#65;|&#9398;|&#65313;|&#192;|&#193;|&#194;|&#7846;|&#7844;|&#7850;|&#7848;|&#195;|&#256;|&#258;|&#7856;|&#7854;|&#7860;|&#7858;|&#550;|&#480;|&#196;|&#478;|&#7842;|&#197;|&#506;|&#461;|&#512;|&#514;|&#7840;|&#7852;|&#7862;|&#7680;|&#260;|&#570;|&#11375;|[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F])/g},{base:"AA",letters:/(&#42802;|[\uA732])/g},{base:"AE",letters:/(&#198;|&#508;|&#482;|[\u00C6\u01FC\u01E2])/g},{base:"AO",letters:/(&#42804;|[\uA734])/g},{base:"AU",letters:/(&#42806;|[\uA736])/g},{base:"AV",letters:/(&#42808;|&#42810;|[\uA738\uA73A])/g},{base:"AY",letters:/(&#42812;|[\uA73C])/g},{base:"B",letters:/(&#66;|&#9399;|&#65314;|&#7682;|&#7684;|&#7686;|&#579;|&#386;|&#385;|[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181])/g},{base:"C",letters:/(&#67;|&#9400;|&#65315;|&#262;|&#264;|&#266;|&#268;|&#199;|&#7688;|&#391;|&#571;|&#42814;|[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E])/g},{base:"D",letters:/(&#68;|&#9401;|&#65316;|&#7690;|&#270;|&#7692;|&#7696;|&#7698;|&#7694;|&#272;|&#395;|&#394;|&#393;|&#42873;|&#208;|[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779\u00D0])/g},{base:"DZ",letters:/(&#497;|&#452;|[\u01F1\u01C4])/g},{base:"Dz",letters:/(&#498;|&#453;|[\u01F2\u01C5])/g},{base:"E",letters:/(&#69;|&#9402;|&#65317;|&#200;|&#201;|&#202;|&#7872;|&#7870;|&#7876;|&#7874;|&#7868;|&#274;|&#7700;|&#7702;|&#276;|&#278;|&#203;|&#7866;|&#282;|&#516;|&#518;|&#7864;|&#7878;|&#552;|&#7708;|&#280;|&#7704;|&#7706;|&#400;|&#398;|[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E])/g},{base:"F",letters:/(&#70;|&#9403;|&#65318;|&#7710;|&#401;|&#42875;|[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B])/g},{base:"G",letters:/(&#71;|&#9404;|&#65319;|&#500;|&#284;|&#7712;|&#286;|&#288;|&#486;|&#290;|&#484;|&#403;|&#42912;|&#42877;|&#42878;|[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E])/g},{base:"H",letters:/(&#72;|&#9405;|&#65320;|&#292;|&#7714;|&#7718;|&#542;|&#7716;|&#7720;|&#7722;|&#294;|&#11367;|&#11381;|&#42893;|[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D])/g},{base:"I",letters:/(&#73;|&#9406;|&#65321;|&#204;|&#205;|&#206;|&#296;|&#298;|&#300;|&#304;|&#207;|&#7726;|&#7880;|&#463;|&#520;|&#522;|&#7882;|&#302;|&#7724;|&#407;|[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197])/g},{base:"J",letters:/(&#74;|&#9407;|&#65322;|&#308;|&#584;|[\u004A\u24BF\uFF2A\u0134\u0248])/g},{base:"K",letters:/(&#75;|&#9408;|&#65323;|&#7728;|&#488;|&#7730;|&#310;|&#7732;|&#408;|&#11369;|&#42816;|&#42818;|&#42820;|&#42914;|[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2])/g},{base:"L",letters:/(&#76;|&#9409;|&#65324;|&#319;|&#313;|&#317;|&#7734;|&#7736;|&#315;|&#7740;|&#7738;|&#321;|&#573;|&#11362;|&#11360;|&#42824;|&#42822;|&#42880;|[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780])/g},{base:"LJ",letters:/(&#455;|[\u01C7])/g},{base:"Lj",letters:/(&#456;|[\u01C8])/g},{base:"M",letters:/(&#77;|&#9410;|&#65325;|&#7742;|&#7744;|&#7746;|&#11374;|&#412;|[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C])/g},{base:"N",letters:/(&#78;|&#9411;|&#65326;|&#504;|&#323;|&#209;|&#7748;|&#327;|&#7750;|&#325;|&#7754;|&#7752;|&#544;|&#413;|&#42896;|&#42916;|&#330;|[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4\u014A])/g},{base:"NJ",letters:/(&#458;|[\u01CA])/g},{base:"Nj",letters:/(&#459;|[\u01CB])/g},{base:"O",letters:/(&#79;|&#9412;|&#65327;|&#210;|&#211;|&#212;|&#7890;|&#7888;|&#7894;|&#7892;|&#213;|&#7756;|&#556;|&#7758;|&#332;|&#7760;|&#7762;|&#334;|&#558;|&#560;|&#214;|&#554;|&#7886;|&#336;|&#465;|&#524;|&#526;|&#416;|&#7900;|&#7898;|&#7904;|&#7902;|&#7906;|&#7884;|&#7896;|&#490;|&#492;|&#216;|&#510;|&#390;|&#415;|&#42826;|&#42828;|[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C])/g},{base:"OE",letters:/(&#338;|[\u0152])/g},{base:"OI",letters:/(&#418;|[\u01A2])/g},{base:"OO",letters:/(&#42830;|[\uA74E])/g},{base:"OU",letters:/(&#546;|[\u0222])/g},{base:"P",letters:/(&#80;|&#9413;|&#65328;|&#7764;|&#7766;|&#420;|&#11363;|&#42832;|&#42834;|&#42836;|[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754])/g},{base:"Q",letters:/(&#81;|&#9414;|&#65329;|&#42838;|&#42840;|&#586;|[\u0051\u24C6\uFF31\uA756\uA758\u024A])/g},{base:"R",letters:/(&#82;|&#9415;|&#65330;|&#340;|&#7768;|&#344;|&#528;|&#530;|&#7770;|&#7772;|&#342;|&#7774;|&#588;|&#11364;|&#42842;|&#42918;|&#42882;|[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782])/g},{base:"S",letters:/(&#83;|&#9416;|&#65331;|&#7838;|&#346;|&#7780;|&#348;|&#7776;|&#352;|&#7782;|&#7778;|&#7784;|&#536;|&#350;|&#11390;|&#42920;|&#42884;|[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784])/g},{base:"T",letters:/(&#84;|&#9417;|&#65332;|&#7786;|&#356;|&#7788;|&#538;|&#354;|&#7792;|&#7790;|&#358;|&#428;|&#430;|&#574;|&#42886;|[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786])/g},{base:"TH",letters:/(&#222;|[\u00DE])/g},{base:"TZ",letters:/(&#42792;|[\uA728])/g},{base:"U",letters:/(&#85;|&#9418;|&#65333;|&#217;|&#218;|&#219;|&#360;|&#7800;|&#362;|&#7802;|&#364;|&#220;|&#475;|&#471;|&#469;|&#473;|&#7910;|&#366;|&#368;|&#467;|&#532;|&#534;|&#431;|&#7914;|&#7912;|&#7918;|&#7916;|&#7920;|&#7908;|&#7794;|&#370;|&#7798;|&#7796;|&#580;|[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244])/g},{base:"V",letters:/(&#86;|&#9419;|&#65334;|&#7804;|&#7806;|&#434;|&#42846;|&#581;|[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245])/g},{base:"VY",letters:/(&#42848;|[\uA760])/g},{base:"W",letters:/(&#87;|&#9420;|&#65335;|&#7808;|&#7810;|&#372;|&#7814;|&#7812;|&#7816;|&#11378;|[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72])/g},{base:"X",letters:/(&#88;|&#9421;|&#65336;|&#7818;|&#7820;|[\u0058\u24CD\uFF38\u1E8A\u1E8C])/g},{base:"Y",letters:/(&#89;|&#9422;|&#65337;|&#7922;|&#221;|&#374;|&#7928;|&#562;|&#7822;|&#376;|&#7926;|&#7924;|&#435;|&#590;|&#7934;|[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE])/g},{base:"Z",letters:/(&#90;|&#9423;|&#65338;|&#377;|&#7824;|&#379;|&#381;|&#7826;|&#7828;|&#437;|&#548;|&#11391;|&#11371;|&#42850;|[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762])/g},{base:"a",letters:/(&#97;|&#9424;|&#65345;|&#7834;|&#224;|&#225;|&#226;|&#7847;|&#7845;|&#7851;|&#7849;|&#227;|&#257;|&#259;|&#7857;|&#7855;|&#7861;|&#7859;|&#551;|&#481;|&#228;|&#479;|&#7843;|&#229;|&#507;|&#462;|&#513;|&#515;|&#7841;|&#7853;|&#7863;|&#7681;|&#261;|&#11365;|&#592;|[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250])/g},{base:"aa",letters:/(&#42803;|[\uA733])/g},{base:"ae",letters:/(&#230;|&#509;|&#483;|[\u00E6\u01FD\u01E3])/g},{base:"ao",letters:/(&#42805;|[\uA735])/g},{base:"au",letters:/(&#42807;|[\uA737])/g},{base:"av",letters:/(&#42809;|&#42811;|[\uA739\uA73B])/g},{base:"ay",letters:/(&#42813;|[\uA73D])/g},{base:"b",letters:/(&#98;|&#9425;|&#65346;|&#7683;|&#7685;|&#7687;|&#384;|&#387;|&#595;|[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253])/g},{base:"c",letters:/(&#99;|&#9426;|&#65347;|&#263;|&#265;|&#267;|&#269;|&#231;|&#7689;|&#392;|&#572;|&#42815;|&#8580;|[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184])/g},{base:"d",letters:/(&#100;|&#9427;|&#65348;|&#7691;|&#271;|&#7693;|&#7697;|&#7699;|&#7695;|&#273;|&#396;|&#598;|&#599;|&#42874;|&#240;|[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A\u00F0])/g},{base:"dz",letters:/(&#499;|&#454;|[\u01F3\u01C6])/g},{base:"e",letters:/(&#101;|&#9428;|&#65349;|&#232;|&#233;|&#234;|&#7873;|&#7871;|&#7877;|&#7875;|&#7869;|&#275;|&#7701;|&#7703;|&#277;|&#279;|&#235;|&#7867;|&#283;|&#517;|&#519;|&#7865;|&#7879;|&#553;|&#7709;|&#281;|&#7705;|&#7707;|&#583;|&#603;|&#477;|[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD])/g},{base:"f",letters:/(&#102;|&#9429;|&#65350;|&#7711;|&#402;|&#42876;|[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C])/g},{base:"g",letters:/(&#103;|&#9430;|&#65351;|&#501;|&#285;|&#7713;|&#287;|&#289;|&#487;|&#291;|&#485;|&#608;|&#42913;|&#7545;|&#42879;|[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F])/g},{base:"h",letters:/(&#104;|&#9431;|&#65352;|&#293;|&#7715;|&#7719;|&#543;|&#7717;|&#7721;|&#7723;|&#7830;|&#295;|&#11368;|&#11382;|&#613;|[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265])/g},{base:"hv",letters:/(&#405;|[\u0195])/g},{base:"i",letters:/(&#105;|&#9432;|&#65353;|&#236;|&#237;|&#238;|&#297;|&#299;|&#301;|&#239;|&#7727;|&#7881;|&#464;|&#521;|&#523;|&#7883;|&#303;|&#7725;|&#616;|&#305;|[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131])/g},{base:"ij",letters:/(&#307;|[\u0133])/g},{base:"j",letters:/(&#106;|&#9433;|&#65354;|&#309;|&#496;|&#585;|[\u006A\u24D9\uFF4A\u0135\u01F0\u0249])/g},{base:"k",letters:/(&#107;|&#9434;|&#65355;|&#7729;|&#489;|&#7731;|&#311;|&#7733;|&#409;|&#11370;|&#42817;|&#42819;|&#42821;|&#42915;|[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3])/g},{base:"l",letters:/(&#108;|&#9435;|&#65356;|&#320;|&#314;|&#318;|&#7735;|&#7737;|&#316;|&#7741;|&#7739;|&#322;|&#410;|&#619;|&#11361;|&#42825;|&#42881;|&#42823;|[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u0142\u019A\u026B\u2C61\uA749\uA781\uA747])/g},{base:"lj",letters:/(&#457;|[\u01C9])/g},{base:"m",letters:/(&#109;|&#9436;|&#65357;|&#7743;|&#7745;|&#7747;|&#625;|&#623;|[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F])/g},{base:"n",letters:/(&#110;|&#9437;|&#65358;|&#505;|&#324;|&#241;|&#7749;|&#328;|&#7751;|&#326;|&#7755;|&#7753;|&#414;|&#626;|&#329;|&#42897;|&#42917;|&#331;|[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5\u014B])/g},{base:"nj",letters:/(&#460;|[\u01CC])/g},{base:"o",letters:/(&#111;|&#9438;|&#65359;|&#242;|&#243;|&#244;|&#7891;|&#7889;|&#7895;|&#7893;|&#245;|&#7757;|&#557;|&#7759;|&#333;|&#7761;|&#7763;|&#335;|&#559;|&#561;|&#246;|&#555;|&#7887;|&#337;|&#466;|&#525;|&#527;|&#417;|&#7901;|&#7899;|&#7905;|&#7903;|&#7907;|&#7885;|&#7897;|&#491;|&#493;|&#248;|&#511;|&#596;|&#42827;|&#42829;|&#629;|[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275])/g},{base:"oe",letters:/(&#339;|[\u0153])/g},{base:"oi",letters:/(&#419;|[\u01A3])/g},{base:"ou",letters:/(&#547;|[\u0223])/g},{base:"oo",letters:/(&#42831;|[\uA74F])/g},{base:"p",letters:/(&#112;|&#9439;|&#65360;|&#7765;|&#7767;|&#421;|&#7549;|&#42833;|&#42835;|&#42837;|[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755])/g},{base:"q",letters:/(&#113;|&#9440;|&#65361;|&#587;|&#42839;|&#42841;|[\u0071\u24E0\uFF51\u024B\uA757\uA759])/g},{base:"r",letters:/(&#114;|&#9441;|&#65362;|&#341;|&#7769;|&#345;|&#529;|&#531;|&#7771;|&#7773;|&#343;|&#7775;|&#589;|&#637;|&#42843;|&#42919;|&#42883;|[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783])/g},{base:"s",letters:/(&#115;|&#9442;|&#65363;|&#347;|&#7781;|&#349;|&#7777;|&#353;|&#7783;|&#7779;|&#7785;|&#537;|&#351;|&#575;|&#42921;|&#42885;|&#7835;|&#383;|[\u0073\u24E2\uFF53\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B\u017F])/g},{base:"ss",letters:/(&#223;|[\u00DF])/g},{base:"t",letters:/(&#116;|&#9443;|&#65364;|&#7787;|&#7831;|&#357;|&#7789;|&#539;|&#355;|&#7793;|&#7791;|&#359;|&#429;|&#648;|&#11366;|&#42887;|[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787])/g},{base:"th",letters:/(&#254;|[\u00FE])/g},{base:"tz",letters:/(&#42793;|[\uA729])/g},{base:"u",letters:/(&#117;|&#9444;|&#65365;|&#249;|&#250;|&#251;|&#361;|&#7801;|&#363;|&#7803;|&#365;|&#252;|&#476;|&#472;|&#470;|&#474;|&#7911;|&#367;|&#369;|&#468;|&#533;|&#535;|&#432;|&#7915;|&#7913;|&#7919;|&#7917;|&#7921;|&#7909;|&#7795;|&#371;|&#7799;|&#7797;|&#649;|[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289])/g},{base:"v",letters:/(&#118;|&#9445;|&#65366;|&#7805;|&#7807;|&#651;|&#42847;|&#652;|[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C])/g},{base:"vy",letters:/(&#42849;|[\uA761])/g},{base:"w",letters:/(&#119;|&#9446;|&#65367;|&#7809;|&#7811;|&#373;|&#7815;|&#7813;|&#7832;|&#7817;|&#11379;|[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73])/g},{base:"x",letters:/(&#120;|&#9447;|&#65368;|&#7819;|&#7821;|[\u0078\u24E7\uFF58\u1E8B\u1E8D])/g},{base:"y",letters:/(&#121;|&#9448;|&#65369;|&#7923;|&#253;|&#375;|&#7929;|&#563;|&#7823;|&#255;|&#7927;|&#7833;|&#7925;|&#436;|&#591;|&#7935;|[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF])/g},{base:"z",letters:/(&#122;|&#9449;|&#65370;|&#378;|&#7825;|&#380;|&#382;|&#7827;|&#7829;|&#438;|&#549;|&#576;|&#11372;|&#42851;|[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763])/g}],Wze=function(t){var r=t;return Hze.forEach(function(n){r=r.replace(n.letters,n.base)}),r},vK=function(t){return Wze(t).toLowerCase()},Rce=function(t,r,n){return n?vK(t).indexOf(vK(r)):t.toLowerCase().indexOf(r.toLowerCase())},Vze=function(){return!!document.documentMode},j8=function(t){return typeof t=="number"},qze=function(t){return t===Object(t)?Object.keys(t):[]},Gze=function(t){for(var r,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];var s=(r=[]).concat.apply(r,i);return Object.keys(t).reduce(function(o,l){return t.hasOwnProperty(l)&&!s.includes(l)&&t[l]!==void 0&&(o[l]=t[l]),o},{})},Kze=["style","className","classNames"];function yK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function bK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yK(Object(r),!0).forEach(function(n){hn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l3(e,t){var r=function(i){var a=function(l){var c=l.style,d=l.className,f=l.classNames,p=Cze(l,Kze),m=t?t(p):void 0,x=_9(e,{style:c,className:d,classNames:f},m);return Hr.createElement(i,eu({},p,{style:x}))},s=i.displayName||i.name||"Component";return a.displayName="defaultStyle(".concat(s,")"),Hr.forwardRef(function(o,l){return a(bK(bK({},o),{},{ref:l}))})};return r}var Xze=function(t,r){return t.hasOwnProperty(r)?t[r]++:t[r]=0,r+"_"+t[r]};function jce(e){var t=e.selectionStart,r=e.selectionEnd,n=e.value,i=n===void 0?"":n,a=e.onCaretPositionChange,s=e.containerRef,o=e.children;e.singleLine;var l=e.style,c=I.useState({left:void 0,top:void 0}),d=wT(c,2),f=d[0],p=d[1],m=I.useState(),x=wT(m,2),v=x[0],b=x[1];I.useEffect(function(){w()});var w=function(){if(v){var ee=v.offsetLeft,V=v.offsetTop;if(!(f.left===ee&&f.top===V)){var te={left:ee,top:V};p(te),a(te)}}},_=Rp(o),C;r===t&&(C=jo(i,_,t,"START"));var N=[],R={},P=N,O=0,D=function(ee,V,te){if(j8(C)&&C>=V&&C<=V+ee.length){var se=C-V;P.push(B(ee.substring(0,se),O)),P=[B(ee.substring(se),O)]}else P.push(B(ee,O));O++},M=function(ee,V,te,se,Q,X,fe){var Se=Xze(R,se);P.push(U(se,Q,X,Se))},B=function(ee,V){return Hr.createElement("span",eu({},l("substring"),{key:V}),ee)},U=function(ee,V,te,se){var Q={id:ee,display:V,key:se},X=I.Children.toArray(o)[te];return Hr.cloneElement(X,Q)},H=function(ee){return Hr.createElement("span",eu({},l("caret"),{ref:b,key:"caret"}),ee)};return lC(i,_,M,D),P.push(" "),P!==N&&N.push(H(P)),Hr.createElement("div",eu({},l,{ref:s}),N)}jce.propTypes={selectionStart:zt.number,selectionEnd:zt.number,value:zt.string.isRequired,onCaretPositionChange:zt.func.isRequired,containerRef:zt.oneOfType([zt.func,zt.shape({current:typeof Element>"u"?zt.any:zt.instanceOf(Element)})]),children:zt.oneOfType([zt.element,zt.arrayOf(zt.element)]).isRequired};var Yze=l3({position:"relative",boxSizing:"border-box",width:"100%",color:"transparent",overflow:"hidden",whiteSpace:"pre-wrap",wordWrap:"break-word",border:"1px solid transparent",textAlign:"start","&singleLine":{whiteSpace:"pre",wordWrap:null},substring:{visibility:"hidden"}},function(e){return{"&singleLine":e.singleLine}}),Qze=Yze(jce);function Dce(e){var t=e.id,r=e.focused,n=e.ignoreAccents,i=e.index,a=e.onClick,s=e.onMouseEnter,o=e.query,l=e.renderSuggestion,c=e.suggestion,d=e.style;e.className,e.classNames;var f={onClick:a,onMouseEnter:s},p=function(){var b=m(),w=x(b);return l?l(c,o,w,i,r):w},m=function(){if(typeof c=="string")return c;var b=c.id,w=c.display;return b===void 0||!w?b:w},x=function(b){var w=Rce(b,o,n);return w===-1?Hr.createElement("span",d("display"),b):Hr.createElement("span",d("display"),b.substring(0,w),Hr.createElement("b",d("highlight"),b.substring(w,w+o.length)),b.substring(w+o.length))};return Hr.createElement("li",eu({id:t,role:"option","aria-selected":r},f,d),p())}Dce.propTypes={id:zt.string.isRequired,query:zt.string.isRequired,index:zt.number.isRequired,ignoreAccents:zt.bool,suggestion:zt.oneOfType([zt.string,zt.shape({id:zt.oneOfType([zt.string,zt.number]).isRequired,display:zt.string})]).isRequired,renderSuggestion:zt.func,focused:zt.bool};var Jze=l3({cursor:"pointer"},function(e){return{"&focused":e.focused}}),Zze=Jze(Dce);function eHe(e){var t=e.style,r=e.className,n=e.classNames,i=_9(tHe,{style:t,className:r,classNames:n}),a=i("spinner");return Hr.createElement("div",i,Hr.createElement("div",a,Hr.createElement("div",a(["element","element1"])),Hr.createElement("div",a(["element","element2"])),Hr.createElement("div",a(["element","element3"])),Hr.createElement("div",a(["element","element4"])),Hr.createElement("div",a(["element","element5"]))))}var tHe={};function Mce(e){var t=e.id,r=e.suggestions,n=r===void 0?{}:r,i=e.a11ySuggestionsListLabel,a=e.focusIndex,s=e.position,o=e.left,l=e.right,c=e.top,d=e.scrollFocusedIntoView,f=e.isLoading,p=e.isOpened,m=e.onSelect,x=m===void 0?function(){return null}:m,v=e.ignoreAccents,b=e.containerRef,w=e.children,_=e.style,C=e.customSuggestionsContainer,N=e.onMouseDown,R=e.onMouseEnter,P=I.useState(void 0),O=wT(P,2),D=O[0],M=O[1];I.useEffect(function(){if(!(!D||D.offsetHeight>=D.scrollHeight||!d)){var te=D.scrollTop,se=D.children[a].getBoundingClientRect(),Q=se.top,X=se.bottom,fe=D.getBoundingClientRect(),Se=fe.top;Q=Q-Se+te,X=X-Se+te,Q<te?D.scrollTop=Q:X>D.offsetHeight&&(D.scrollTop=X-D.offsetHeight)}},[a,d,D]);var B=function(){var se=Hr.createElement("ul",eu({ref:M,id:t,role:"listbox","aria-label":i},_("list")),Object.values(n).reduce(function(Q,X){var fe=X.results,Se=X.queryInfo;return[].concat(yT(Q),yT(fe.map(function(Y,ce){return U(Y,Se,Q.length+ce)})))},[]));return C?C(se):se},U=function(se,Q,X){var fe=X===a,Se=Q.childIndex,Y=Q.query,ce=I.Children.toArray(w)[Se].props.renderSuggestion;return Hr.createElement(Zze,{style:_("item"),key:"".concat(Se,"-").concat(V(se)),id:Pce(t,X),query:Y,index:X,ignoreAccents:v,renderSuggestion:ce,suggestion:se,focused:fe,onClick:function(){return ee(se,Q)},onMouseEnter:function(){return Z(X)}})},H=function(){if(f)return Hr.createElement(eHe,{style:_("loadingIndicator")})},Z=function(se,Q){R&&R(se)},ee=function(se,Q){x(se,Q)},V=function(se){return typeof se=="string"?se:se.id};return p?Hr.createElement("div",eu({},Dze({position:s||"absolute",left:o,right:l,top:c},_),{onMouseDown:N,ref:b}),B(),H()):null}Mce.propTypes={id:zt.string.isRequired,suggestions:zt.object.isRequired,a11ySuggestionsListLabel:zt.string,focusIndex:zt.number,position:zt.string,left:zt.number,right:zt.number,top:zt.number,scrollFocusedIntoView:zt.bool,isLoading:zt.bool,isOpened:zt.bool.isRequired,onSelect:zt.func,ignoreAccents:zt.bool,customSuggestionsContainer:zt.func,containerRef:zt.oneOfType([zt.func,zt.shape({current:typeof Element>"u"?zt.any:zt.instanceOf(Element)})])};var rHe=l3({zIndex:1,backgroundColor:"white",marginTop:14,minWidth:100,list:{margin:0,padding:0,listStyleType:"none"}}),nHe=rHe(Mce);function wK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Du(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wK(Object(r),!0).forEach(function(n){hn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iHe(e){var t=aHe();return function(){var n=bT(e),i;if(t){var a=bT(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return xze(this,i)}}function aHe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var sHe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t instanceof RegExp)return t;var n=r.allowSpaceInQuery,i=qN(t);return new RegExp("(?:^|\\s)(".concat(i,"([^").concat(n?"":"\\s").concat(i,"]*))$"))},oHe=function(t,r){return t instanceof Array?function(n,i){for(var a=[],s=0,o=t.length;s<o;++s){var l=t[s].display||t[s].id;Rce(l,n,r)>=0&&a.push(t[s])}return a}:t},I1={TAB:9,RETURN:13,ESC:27,UP:38,DOWN:40},__=!1,Fce={singleLine:zt.bool,allowSpaceInQuery:zt.bool,allowSuggestionsAboveCursor:zt.bool,forceSuggestionsAboveCursor:zt.bool,ignoreAccents:zt.bool,a11ySuggestionsListLabel:zt.string,value:zt.string,onKeyDown:zt.func,customSuggestionsContainer:zt.func,onSelect:zt.func,onBlur:zt.func,onChange:zt.func,suggestionsPortalHost:typeof Element>"u"?zt.any:zt.PropTypes.instanceOf(Element),inputRef:zt.oneOfType([zt.func,zt.shape({current:typeof Element>"u"?zt.any:zt.instanceOf(Element)})]),children:zt.oneOfType([zt.element,zt.arrayOf(zt.element)]).isRequired},N9=function(e){gze(r,e);var t=iHe(r);function r(n){var i;return hze(this,r),i=t.call(this,n),hn(xn(i),"setContainerElement",function(a){i.containerElement=a}),hn(xn(i),"getInputProps",function(){var a=i.props,s=a.readOnly,o=a.disabled,l=a.style,c=Gze(i.props,["style","classNames","className"],qze(Fce));return Du(Du(Du(Du({},c),l("input")),{},{value:i.getPlainText(),onScroll:i.updateHighlighterScroll},!s&&!o&&{onChange:i.handleChange,onSelect:i.handleSelect,onKeyDown:i.handleKeyDown,onBlur:i.handleBlur,onCompositionStart:i.handleCompositionStart,onCompositionEnd:i.handleCompositionEnd}),i.isOpened()&&{role:"combobox","aria-controls":i.uuidSuggestionsOverlay,"aria-expanded":!0,"aria-autocomplete":"list","aria-haspopup":"listbox","aria-activedescendant":Pce(i.uuidSuggestionsOverlay,i.state.focusIndex)})}),hn(xn(i),"renderControl",function(){var a=i.props,s=a.singleLine,o=a.style,l=i.getInputProps();return Hr.createElement("div",o("control"),i.renderHighlighter(),s?i.renderInput(l):i.renderTextarea(l))}),hn(xn(i),"renderInput",function(a){return Hr.createElement("input",eu({type:"text",ref:i.setInputRef},a))}),hn(xn(i),"renderTextarea",function(a){return Hr.createElement("textarea",eu({ref:i.setInputRef},a))}),hn(xn(i),"setInputRef",function(a){i.inputElement=a;var s=i.props.inputRef;typeof s=="function"?s(a):s&&(s.current=a)}),hn(xn(i),"setSuggestionsElement",function(a){i.suggestionsElement=a}),hn(xn(i),"renderSuggestionsOverlay",function(){if(!j8(i.state.selectionStart))return null;var a=i.state.suggestionsPosition,s=a.position,o=a.left,l=a.top,c=a.right,d=Hr.createElement(nHe,{id:i.uuidSuggestionsOverlay,style:i.props.style("suggestions"),position:s,left:o,top:l,right:c,focusIndex:i.state.focusIndex,scrollFocusedIntoView:i.state.scrollFocusedIntoView,containerRef:i.setSuggestionsElement,suggestions:i.state.suggestions,customSuggestionsContainer:i.props.customSuggestionsContainer,onSelect:i.addMention,onMouseDown:i.handleSuggestionsMouseDown,onMouseEnter:i.handleSuggestionsMouseEnter,isLoading:i.isLoading(),isOpened:i.isOpened(),ignoreAccents:i.props.ignoreAccents,a11ySuggestionsListLabel:i.props.a11ySuggestionsListLabel},i.props.children);return i.props.suggestionsPortalHost?EL.createPortal(d,i.props.suggestionsPortalHost):d}),hn(xn(i),"renderHighlighter",function(){var a=i.state,s=a.selectionStart,o=a.selectionEnd,l=i.props,c=l.singleLine,d=l.children,f=l.value,p=l.style;return Hr.createElement(Qze,{containerRef:i.setHighlighterElement,style:p("highlighter"),value:f,singleLine:c,selectionStart:s,selectionEnd:o,onCaretPositionChange:i.handleCaretPositionChange},d)}),hn(xn(i),"setHighlighterElement",function(a){i.highlighterElement=a}),hn(xn(i),"handleCaretPositionChange",function(a){i.setState({caretPosition:a})}),hn(xn(i),"getPlainText",function(){return Hm(i.props.value||"",Rp(i.props.children))}),hn(xn(i),"executeOnChange",function(a){for(var s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];if(i.props.onChange){var c;return(c=i.props).onChange.apply(c,[a].concat(o))}if(i.props.valueLink){var d;return(d=i.props.valueLink).requestChange.apply(d,[a.target.value].concat(o))}}),hn(xn(i),"handleChange",function(a){if(__=!1,Vze()){var s=document.activeElement&&document.activeElement.contentDocument||document;if(s.activeElement!==a.target)return}var o=i.props.value||"",l=Rp(i.props.children),c=a.target.value,d=i.state.selectionStart;d==null&&(d=a.target.selectionStart);var f=i.state.selectionEnd;f==null&&(f=a.target.selectionEnd);var p=Lze(o,c,{selectionStartBefore:d,selectionEndBefore:f,selectionEndAfter:a.target.selectionEnd},l);c=Hm(p,l);var m=a.target.selectionStart,x=a.target.selectionEnd,v=!1,b=xK(o,l,m);b!==void 0&&i.state.selectionEnd>b&&(m=b+(a.nativeEvent.data?a.nativeEvent.data.length:0),x=m,v=!0),i.setState({selectionStart:m,selectionEnd:x,setSelectionAfterMentionChange:v});var w=Yw(p,l);a.nativeEvent.isComposing&&m===x&&i.updateMentionsQueries(i.inputElement.value,m);var _={target:{value:p}};i.executeOnChange(_,p,c,w)}),hn(xn(i),"handleSelect",function(a){if(i.setState({selectionStart:a.target.selectionStart,selectionEnd:a.target.selectionEnd}),!__){var s=i.inputElement;a.target.selectionStart===a.target.selectionEnd?i.updateMentionsQueries(s.value,a.target.selectionStart):i.clearSuggestions(),i.updateHighlighterScroll(),i.props.onSelect(a)}}),hn(xn(i),"handleKeyDown",function(a){var s=k_(i.state.suggestions);if(s===0||!i.suggestionsElement){i.props.onKeyDown(a);return}switch(Object.values(I1).indexOf(a.keyCode)>=0&&(a.preventDefault(),a.stopPropagation()),a.keyCode){case I1.ESC:{i.clearSuggestions();return}case I1.DOWN:{i.shiftFocus(1);return}case I1.UP:{i.shiftFocus(-1);return}case I1.RETURN:{i.selectFocused();return}case I1.TAB:{i.selectFocused();return}default:return}}),hn(xn(i),"shiftFocus",function(a){var s=k_(i.state.suggestions);i.setState({focusIndex:(s+i.state.focusIndex+a)%s,scrollFocusedIntoView:!0})}),hn(xn(i),"selectFocused",function(){var a=i.state,s=a.suggestions,o=a.focusIndex,l=Object.values(s).reduce(function(f,p){var m=p.results,x=p.queryInfo;return[].concat(yT(f),yT(m.map(function(v){return{result:v,queryInfo:x}})))},[])[o],c=l.result,d=l.queryInfo;i.addMention(c,d),i.setState({focusIndex:0})}),hn(xn(i),"handleBlur",function(a){var s=i._suggestionsMouseDown;i._suggestionsMouseDown=!1,s||i.setState({selectionStart:null,selectionEnd:null}),window.setTimeout(function(){i.updateHighlighterScroll()},1),i.props.onBlur(a,s)}),hn(xn(i),"handleSuggestionsMouseDown",function(a){i._suggestionsMouseDown=!0}),hn(xn(i),"handleSuggestionsMouseEnter",function(a){i.setState({focusIndex:a,scrollFocusedIntoView:!1})}),hn(xn(i),"updateSuggestionsPosition",function(){var a=i.state.caretPosition,s=i.props,o=s.suggestionsPortalHost,l=s.allowSuggestionsAboveCursor,c=s.forceSuggestionsAboveCursor;if(!(!a||!i.suggestionsElement)){var d=i.suggestionsElement,f=i.highlighterElement,p=f.getBoundingClientRect(),m=nD(f,"font-size"),x={left:p.left+a.left,top:p.top+a.top+m},v=Math.max(document.documentElement.clientHeight,window.innerHeight||0);if(d){var b={};if(o){b.position="fixed";var w=x.left,_=x.top;w-=nD(d,"margin-left"),_-=nD(d,"margin-top"),w-=f.scrollLeft,_-=f.scrollTop;var C=Math.max(document.documentElement.clientWidth,window.innerWidth||0);w+d.offsetWidth>C?b.left=Math.max(0,C-d.offsetWidth):b.left=w,l&&_+d.offsetHeight>v&&d.offsetHeight<_-m||c?b.top=Math.max(0,_-d.offsetHeight-m):b.top=_}else{var N=a.left-f.scrollLeft,R=a.top-f.scrollTop;N+d.offsetWidth>i.containerElement.offsetWidth?b.right=0:b.left=N,l&&x.top-f.scrollTop+d.offsetHeight>v&&d.offsetHeight<p.top-m-f.scrollTop||c?b.top=R-d.offsetHeight-m:b.top=R}b.left===i.state.suggestionsPosition.left&&b.top===i.state.suggestionsPosition.top&&b.position===i.state.suggestionsPosition.position||i.setState({suggestionsPosition:b})}}}),hn(xn(i),"updateHighlighterScroll",function(){var a=i.inputElement,s=i.highlighterElement;!a||!s||(s.scrollLeft=a.scrollLeft,s.scrollTop=a.scrollTop,s.height=a.height)}),hn(xn(i),"handleCompositionStart",function(){__=!0}),hn(xn(i),"handleCompositionEnd",function(){__=!1}),hn(xn(i),"setSelection",function(a,s){if(!(a===null||s===null)){var o=i.inputElement;if(o.setSelectionRange)o.setSelectionRange(a,s);else if(o.createTextRange){var l=o.createTextRange();l.collapse(!0),l.moveEnd("character",s),l.moveStart("character",a),l.select()}}}),hn(xn(i),"updateMentionsQueries",function(a,s){i._queryId++,i.suggestions={},i.setState({suggestions:{}});var o=i.props.value||"",l=i.props.children,c=Rp(l),d=jo(o,c,s,"NULL");if(d!==null){var f=Bze(o.substring(0,d),c),p=a.substring(f,s);Hr.Children.forEach(l,function(m,x){if(m){var v=sHe(m.props.trigger,i.props),b=p.match(v);if(b){var w=f+p.indexOf(b[1],b.index);i.queryData(b[2],x,w,w+b[1].length,a)}}})}}),hn(xn(i),"clearSuggestions",function(){i._queryId++,i.suggestions={},i.setState({suggestions:{},focusIndex:0})}),hn(xn(i),"queryData",function(a,s,o,l,c){var d=i.props,f=d.children,p=d.ignoreAccents,m=I.Children.toArray(f)[s],x=oHe(m.props.data,p),v=x(a,i.updateSuggestions.bind(null,i._queryId,s,a,o,l,c));v instanceof Array&&i.updateSuggestions(i._queryId,s,a,o,l,c,v)}),hn(xn(i),"updateSuggestions",function(a,s,o,l,c,d,f){if(a===i._queryId){i.suggestions=Du(Du({},i.suggestions),{},hn({},s,{queryInfo:{childIndex:s,query:o,querySequenceStart:l,querySequenceEnd:c,plainTextValue:d},results:f}));var p=i.state.focusIndex,m=k_(i.suggestions);i.setState({suggestions:i.suggestions,focusIndex:p>=m?Math.max(m-1,0):p})}}),hn(xn(i),"addMention",function(a,s){var o=a.id,l=a.display,c=s.childIndex,d=s.querySequenceStart,f=s.querySequenceEnd,p=s.plainTextValue,m=i.props.value||"",x=Rp(i.props.children),v=I.Children.toArray(i.props.children)[c],b=v.props,w=b.markup,_=b.displayTransform,C=b.appendSpaceOnAdd,N=b.onAdd,R=jo(m,x,d,"START"),P=R+f-d,O=zze(w,o,l);C&&(O+=" ");var D=S2(m,R,P,O);i.inputElement.focus();var M=_(o,l);C&&(M+=" ");var B=d+M.length;i.setState({selectionStart:B,selectionEnd:B,setSelectionAfterMentionChange:!0});var U={target:{value:D}},H=Yw(D,x),Z=S2(p,d,f,M);i.executeOnChange(U,D,Z,H),N&&N(o,l,R,P),i.clearSuggestions()}),hn(xn(i),"isLoading",function(){var a=!1;return Hr.Children.forEach(i.props.children,function(s){a=a||s&&s.props.isLoading}),a}),hn(xn(i),"isOpened",function(){return j8(i.state.selectionStart)&&(k_(i.state.suggestions)!==0||i.isLoading())}),hn(xn(i),"_queryId",0),i.suggestions={},i.uuidSuggestionsOverlay=Math.random().toString(16).substring(2),i.handleCopy=i.handleCopy.bind(xn(i)),i.handleCut=i.handleCut.bind(xn(i)),i.handlePaste=i.handlePaste.bind(xn(i)),i.state={focusIndex:0,selectionStart:null,selectionEnd:null,suggestions:{},caretPosition:null,suggestionsPosition:{},setSelectionAfterHandlePaste:!1},i}return mze(r,[{key:"componentDidMount",value:function(){document.addEventListener("copy",this.handleCopy),document.addEventListener("cut",this.handleCut),document.addEventListener("paste",this.handlePaste),this.updateSuggestionsPosition()}},{key:"componentDidUpdate",value:function(i,a){a.suggestionsPosition===this.state.suggestionsPosition&&this.updateSuggestionsPosition(),this.state.setSelectionAfterMentionChange&&(this.setState({setSelectionAfterMentionChange:!1}),this.setSelection(this.state.selectionStart,this.state.selectionEnd)),this.state.setSelectionAfterHandlePaste&&(this.setState({setSelectionAfterHandlePaste:!1}),this.setSelection(this.state.selectionStart,this.state.selectionEnd))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("copy",this.handleCopy),document.removeEventListener("cut",this.handleCut),document.removeEventListener("paste",this.handlePaste)}},{key:"render",value:function(){return Hr.createElement("div",eu({ref:this.setContainerElement},this.props.style),this.renderControl(),this.renderSuggestionsOverlay())}},{key:"handlePaste",value:function(i){if(i.target===this.inputElement&&this.supportsClipboardActions(i)){i.preventDefault();var a=this.state,s=a.selectionStart,o=a.selectionEnd,l=this.props,c=l.value,d=l.children,f=Rp(d),p=jo(c,f,s,"START"),m=jo(c,f,o,"END"),x=i.clipboardData.getData("text/react-mentions"),v=i.clipboardData.getData("text/plain"),b=S2(c,p,m,x||v).replace(/\r/g,""),w=Hm(b,f),_={target:Du(Du({},i.target),{},{value:b})};this.executeOnChange(_,b,w,Yw(b,f));var C=xK(c,f,s),N=(C||s)+Hm(x||v,f).length;this.setState({selectionStart:N,selectionEnd:N,setSelectionAfterHandlePaste:!0})}}},{key:"saveSelectionToClipboard",value:function(i){var a=this.inputElement.selectionStart,s=this.inputElement.selectionEnd,o=this.props,l=o.children,c=o.value,d=Rp(l),f=jo(c,d,a,"START"),p=jo(c,d,s,"END");i.clipboardData.setData("text/plain",i.target.value.slice(a,s)),i.clipboardData.setData("text/react-mentions",c.slice(f,p))}},{key:"supportsClipboardActions",value:function(i){return!!i.clipboardData}},{key:"handleCopy",value:function(i){i.target===this.inputElement&&this.supportsClipboardActions(i)&&(i.preventDefault(),this.saveSelectionToClipboard(i))}},{key:"handleCut",value:function(i){if(i.target===this.inputElement&&this.supportsClipboardActions(i)){i.preventDefault(),this.saveSelectionToClipboard(i);var a=this.state,s=a.selectionStart,o=a.selectionEnd,l=this.props,c=l.children,d=l.value,f=Rp(c),p=jo(d,f,s,"START"),m=jo(d,f,o,"END"),x=[d.slice(0,p),d.slice(m)].join(""),v=Hm(x,f),b={target:Du(Du({},i.target),{},{value:v})};this.executeOnChange(b,x,v,Yw(d,f))}}}]),r}(Hr.Component);hn(N9,"propTypes",Fce);hn(N9,"defaultProps",{ignoreAccents:!1,singleLine:!1,allowSuggestionsAboveCursor:!1,onKeyDown:function(){return null},onSelect:function(){return null},onBlur:function(){return null}});var nD=function(t,r){var n=parseFloat(window.getComputedStyle(t,null).getPropertyValue(r));return isFinite(n)?n:0},lHe=typeof navigator<"u"&&/iPhone|iPad|iPod/i.test(navigator.userAgent),cHe=l3({position:"relative",overflowY:"visible",input:{display:"block",width:"100%",position:"absolute",margin:0,top:0,left:0,boxSizing:"border-box",backgroundColor:"transparent",fontFamily:"inherit",fontSize:"inherit",letterSpacing:"inherit"},"&multiLine":{input:Du({height:"100%",bottom:0,overflow:"hidden",resize:"none"},lHe?{marginTop:1,marginLeft:-3}:null)}},function(e){var t=e.singleLine;return{"&singleLine":t,"&multiLine":!t}}),uHe=cHe(N9),dHe={fontWeight:"inherit"},Wm=function(t){var r=t.display,n=t.style,i=t.className,a=t.classNames,s=_9(dHe,{style:n,className:i,classNames:a});return Hr.createElement("strong",s,r)};Wm.propTypes={onAdd:zt.func,onRemove:zt.func,renderSuggestion:zt.func,trigger:zt.oneOfType([zt.string,zt.instanceOf(RegExp)]),markup:zt.string,displayTransform:zt.func,allowSpaceInQuery:zt.bool,isLoading:zt.bool};Wm.defaultProps={trigger:"@",markup:"@[__display__](__id__)",displayTransform:function(t,r){return r||t},onAdd:function(){return null},onRemove:function(){return null},renderSuggestion:null,isLoading:!1,appendSpaceOnAdd:!1};const fHe=()=>$s({queryKey:["users"],queryFn:O7}),ST=({value:e,onChange:t,placeholder:r,onKeyDown:n,minHeight:i=40,maxHeight:a=120,rightElement:s,singleLine:o=!1})=>{const{data:l=[]}=fHe(),{data:c=[]}=Yh(),{data:d=[]}=cb(),{data:f=[]}=Mx(),{data:p=[]}=vf(),m=I.useMemo(()=>l.map(N=>({id:N.userId,display:N.firstName?`${N.firstName} ${N.lastName}`:N.email})),[l]),x=I.useMemo(()=>c.map(N=>({id:String(N.id),display:N.projectName})),[c]),v=I.useMemo(()=>d.map(N=>({id:N.id,display:N.name})),[d]),b=I.useMemo(()=>f.map(N=>({id:String(N.id),display:N.fullName})),[f]),w=I.useMemo(()=>p.map(N=>({id:String(N.id),display:N.installerName})),[p]),_={control:{fontSize:14,fontWeight:"normal"},"&multiLine":{control:{fontFamily:"inherit",minHeight:o?void 0:i,maxHeight:o?void 0:a},highlighter:{padding:12,border:"1px solid transparent"},input:{padding:12,border:"1px solid var(--color-outline-variant, #49454F)",borderRadius:"0.75rem",backgroundColor:"var(--color-surface-container, #1F1B16)",color:"var(--color-text-primary)",overflow:"auto",height:"100%",outline:"none"}},"&singleLine":{display:"inline-block",width:"100%",highlighter:{padding:12,border:"2px solid transparent"},input:{padding:12,border:"1px solid var(--color-outline-variant, #49454F)",borderRadius:"0.75rem",backgroundColor:"var(--color-surface-container, #1F1B16)",color:"var(--color-text-primary)",outline:"none",width:"100%"}},suggestions:{list:{backgroundColor:"var(--color-surface-container-high, #2A2826)",border:"1px solid var(--color-outline, #9C8F83)",borderRadius:"0.75rem",fontSize:12,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.5)",zIndex:99999,width:250,maxHeight:200,overflow:"auto",marginTop:4},item:{padding:"8px 12px",borderBottom:"1px solid var(--color-outline-variant, #49454F)",color:"var(--color-text-secondary)","&focused":{backgroundColor:"var(--color-primary-container, #51443B)",color:"var(--color-on-primary-container, #FFDDB7)"}}}},C=(N,R,P,O,D)=>u.jsx("div",{className:`flex items-center gap-2 ${D?"font-bold":""}`,children:u.jsx("span",{children:P})});return u.jsxs("div",{className:"mention-input-wrapper w-full flex flex-col gap-2",children:[u.jsxs("div",{className:"flex items-end gap-2",children:[u.jsx("div",{className:"flex-1 min-w-0 relative",children:u.jsxs(uHe,{value:e,onChange:N=>t(N.target.value),placeholder:r,style:_,onKeyDown:n,allowSpaceInQuery:!0,className:"flex-1",singleLine:o,suggestionsPortalHost:document.body,children:[u.jsx(Wm,{trigger:"@",data:m,markup:"@[user:__id__|__display__]",style:{backgroundColor:"var(--color-secondary-container)",color:"var(--color-on-secondary-container)",borderRadius:4,padding:"1px 3px"},renderSuggestion:C,displayTransform:(N,R)=>`@${R}`}),u.jsx(Wm,{trigger:"!",data:x,markup:"@[project:__id__|__display__]",style:{backgroundColor:"var(--color-tertiary-container)",color:"var(--color-on-tertiary-container)",borderRadius:4,padding:"1px 3px"},renderSuggestion:C,displayTransform:(N,R)=>` ${R}`}),u.jsx(Wm,{trigger:"#",data:v,markup:"@[product:__id__|__display__]",style:{backgroundColor:"var(--color-primary-container)",color:"var(--color-on-primary-container)",borderRadius:4,padding:"1px 3px"},renderSuggestion:C,displayTransform:(N,R)=>` ${R}`}),u.jsx(Wm,{trigger:"\\",data:b,markup:"@[customer:__id__|__display__]",style:{backgroundColor:"var(--color-error-container)",color:"var(--color-on-error-container)",borderRadius:4,padding:"1px 3px"},renderSuggestion:C,displayTransform:(N,R)=>` ${R}`}),u.jsx(Wm,{trigger:"+",data:w,markup:"@[installer:__id__|__display__]",style:{backgroundColor:"var(--color-surface-variant)",color:"var(--color-on-surface-variant)",borderRadius:4,padding:"1px 3px"},renderSuggestion:C,displayTransform:(N,R)=>` ${R}`})]})}),s&&u.jsx("div",{className:"shrink-0 pb-1",children:s})]}),!o&&u.jsxs("div",{className:"flex flex-wrap gap-3 text-[10px] text-text-secondary px-1",children:[u.jsxs("div",{className:"flex items-center gap-1 cursor-help",title:"Mention a User",children:[u.jsx("span",{className:"font-mono bg-surface-container-highest border border-outline/20 px-1 rounded",children:"@"})," User"]}),u.jsxs("div",{className:"flex items-center gap-1 cursor-help",title:"Link a Project",children:[u.jsx("span",{className:"font-mono bg-surface-container-highest border border-outline/20 px-1 rounded",children:"!"})," Project"]}),u.jsxs("div",{className:"flex items-center gap-1 cursor-help",title:"Link a Product",children:[u.jsx("span",{className:"font-mono bg-surface-container-highest border border-outline/20 px-1 rounded",children:"#"})," Product"]}),u.jsxs("div",{className:"flex items-center gap-1 cursor-help",title:"Link a Customer",children:[u.jsx("span",{className:"font-mono bg-surface-container-highest border border-outline/20 px-1 rounded",children:"\\"})," Customer"]}),u.jsxs("div",{className:"flex items-center gap-1 cursor-help",title:"Link an Installer",children:[u.jsx("span",{className:"font-mono bg-surface-container-highest border border-outline/20 px-1 rounded",children:"+"})," Installer"]})]})]})},hHe=({job:e})=>{const{currentUser:t}=Kr(),[r,n]=I.useState([]),[i,a]=I.useState(""),[s,o]=I.useState(!1),[l,c]=I.useState(!0),d=I.useRef(null);I.useEffect(()=>{let x=!0;const v=async()=>{try{const w=await oze(e.id);x&&(n(w),c(!1))}catch(w){console.error(w),Re.error("Failed to load notes history.")}};v();const b=setInterval(v,5e3);return()=>{x=!1,clearInterval(b)}},[e.id]),I.useEffect(()=>{d.current&&(d.current.scrollTop=d.current.scrollHeight)},[r]);const f=async x=>{if(x==null||x.preventDefault(),!!i.trim()){o(!0);try{const v=await lze(e.id,i);n(b=>[...b,v]),a("")}catch(v){console.error(v),Re.error("Failed to send note.")}finally{o(!1)}}},p=x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),f())},m=async x=>{try{await cze(x),n(v=>v.map(b=>b.id===x?{...b,isPinned:!b.isPinned}:b)),Re.success("Note updated")}catch{Re.error("Failed to pin note")}};return u.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex items-center gap-3 flex-shrink-0",children:[u.jsx(Q0,{className:"drag-handle cursor-move text-text-secondary hover:text-text-primary transition-colors",size:20}),u.jsx(L8e,{size:20,className:"text-primary"}),u.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Job Notes"})]}),u.jsx("div",{ref:d,className:"flex-grow overflow-y-auto p-4 space-y-4 bg-surface-container scrollbar-thin scrollbar-thumb-surface-container-highest",children:l?u.jsx("div",{className:"text-center text-text-secondary py-4 text-sm",children:"Loading timeline..."}):r.length===0?u.jsx("div",{className:"text-center text-text-tertiary py-8 italic text-sm",children:"No notes yet. Start the conversation below."}):r.map(x=>{const v=x.userId===(t==null?void 0:t.userId);return u.jsxs("div",{className:`flex gap-3 group ${v?"flex-row-reverse":""}`,children:[u.jsx("div",{className:"flex-shrink-0 mt-1",children:x.authorAvatar?u.jsx("img",{src:x.authorAvatar,alt:x.authorName,className:"w-8 h-8 rounded-full object-cover border-2 border-surface-container-high"}):u.jsxs(u.Fragment,{children:[u.jsx("img",{src:`https://www.gravatar.com/avatar/${xS(x.authorEmail||x.authorName)}?s=40&d=mp`,alt:x.authorName,className:"w-8 h-8 rounded-full border-2 border-surface-container-high object-cover",onError:b=>{var w;b.target.style.display="none",(w=b.target.nextElementSibling)==null||w.classList.remove("hidden")}}),u.jsx("div",{className:"hidden w-8 h-8 rounded-full bg-primary-container text-on-primary-container flex items-center justify-center text-sm font-bold border-2 border-surface-container-high",children:x.authorName?x.authorName.charAt(0).toUpperCase():"U"})]})}),u.jsxs("div",{className:`flex flex-col max-w-[85%] ${v?"items-end":"items-start"}`,children:[u.jsxs("div",{className:`flex items-baseline gap-2 mb-1 ${v?"flex-row-reverse":""}`,children:[u.jsx("span",{className:"text-xs font-bold text-text-primary",children:x.authorName}),u.jsx("span",{className:"text-[10px] text-text-tertiary",children:x.createdAt?new Date(x.createdAt).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown Date"}),u.jsx("button",{onClick:()=>m(x.id),className:`transition-opacity ${x.isPinned?"opacity-100 text-tertiary":"opacity-0 group-hover:opacity-100 text-text-tertiary hover:text-text-primary"}`,title:x.isPinned?"Unpin from Calendar":"Pin to Calendar",children:u.jsx($8e,{size:14,fill:x.isPinned?"currentColor":"none"})})]}),u.jsx("div",{className:`p-3 rounded-xl text-sm whitespace-pre-wrap shadow-sm relative ${x.isPinned?"ring-2 ring-tertiary/80":""} ${v?"bg-primary text-on-primary rounded-tr-none":"bg-secondary-container text-on-secondary-container rounded-tl-none"}`,children:u.jsx(o3,{content:x.content})})]})]},x.id)})}),u.jsx("div",{className:"p-3 bg-surface-container-low border-t border-outline/10 flex-shrink-0",children:u.jsxs("form",{onSubmit:f,className:"flex items-end gap-2",children:[u.jsx("div",{className:"flex-1",children:u.jsx(ST,{value:i,onChange:a,onKeyDown:p,placeholder:"Type a note...",minHeight:40})}),u.jsx("button",{type:"submit",disabled:!i.trim()||s,className:"flex-shrink-0 h-[42px] w-[42px] flex items-center justify-center bg-primary hover:bg-primary-hover text-on-primary rounded-full disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm",children:u.jsx(uy,{size:18})})]})})]})},pHe=async(e,t)=>{const{data:r}=await cr.get(`/api/photos/${e}/${t}`);return r},mHe=(e,t)=>$s({queryKey:["files",e,t],queryFn:()=>pHe(e,t),enabled:!!t}),gHe=(e,t)=>{const r=ja(),n=["files",e,t];return{uploadFiles:Ir({mutationFn:async({files:i,category:a})=>{const s=new FormData;s.append("entityType",e),s.append("entityId",String(t)),s.append("category",a),Array.from(i).forEach(l=>s.append("photos",l));const{data:o}=await cr.post("/api/photos",s,{headers:{"Content-Type":"multipart/form-data"}});return o},onSuccess:()=>r.invalidateQueries({queryKey:n})}),deleteFile:Ir({mutationFn:async i=>{await cr.delete(`/api/photos/${i}`)},onSuccess:()=>r.invalidateQueries({queryKey:n})})}},xHe=({project:e})=>{const{data:t=[],isLoading:r}=mHe("PROJECT",e.id),{uploadFiles:n,deleteFile:i}=gHe("PROJECT",e.id),[a,s]=I.useState("SITE"),[o,l]=I.useState(new Set),[c,d]=I.useState(!1),[f,p]=I.useState(null),m=I.useRef(null),x=(Array.isArray(t)?t:[]).filter(P=>(P.category||"SITE")===a),v=async P=>{if(P.target.files&&P.target.files.length>0){const O=Re.loading(`Uploading ${a==="SITE"?"photos":"documents"}...`);try{await n.mutateAsync({files:P.target.files,category:a}),Re.success("Upload complete!",{id:O})}catch{Re.error("Upload failed.",{id:O})}m.current&&(m.current.value="")}},b=P=>{l(O=>{const D=new Set(O);return D.has(P)?D.delete(P):D.add(P),D})},w=async()=>{if(!window.confirm(`Delete ${o.size} items?`))return;const P=Re.loading("Deleting...");try{await Promise.all(Array.from(o).map(O=>i.mutateAsync(O))),Re.success("Deleted!",{id:P}),l(new Set),d(!1)}catch{Re.error("Delete failed.",{id:P})}},_=x,C=(P,O)=>{c?b(P.id):a==="SITE"?p(O):window.open(ds(P.url),"_blank")},N=I.useCallback(P=>{P==null||P.stopPropagation(),p(O=>O!==null&&O>0?O-1:_.length-1)},[_.length]),R=I.useCallback(P=>{P==null||P.stopPropagation(),p(O=>O!==null&&O<_.length-1?O+1:0)},[_.length]);return I.useEffect(()=>{if(f===null)return;const P=O=>{O.key==="ArrowLeft"&&N(),O.key==="ArrowRight"&&R(),O.key==="Escape"&&p(null)};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[f,N,R]),u.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[u.jsx("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center shrink-0",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Q0,{size:20,className:"drag-handle text-text-secondary cursor-move hover:text-text-primary shrink-0"}),u.jsxs("h3",{className:"text-xl font-semibold text-text-primary flex items-center gap-2",children:[u.jsx(Jd,{size:20})," Project Files"]})]})}),u.jsxs("div",{className:"border-b border-outline/10 bg-surface-container-low shrink-0",children:[u.jsxs("div",{className:"flex justify-between items-center px-4 py-2",children:[u.jsxs("div",{className:"flex space-x-2 bg-surface-container-highest p-1 rounded-full",children:[u.jsxs("button",{onClick:()=>{s("SITE"),d(!1)},className:`px-3 py-1 rounded-full text-sm font-medium transition-all flex items-center gap-2 ${a==="SITE"?"bg-primary-container text-on-primary-container shadow-sm":"text-text-secondary hover:text-text-primary"}`,children:[u.jsx(wv,{size:16})," Site Photos"]}),u.jsxs("button",{onClick:()=>{s("DOCUMENT"),d(!1)},className:`px-3 py-1 rounded-full text-sm font-medium transition-all flex items-center gap-2 ${a==="DOCUMENT"?"bg-primary-container text-on-primary-container shadow-sm":"text-text-secondary hover:text-text-primary"}`,children:[u.jsx(Zc,{size:16})," Documents"]})]}),u.jsx("div",{className:"flex items-center gap-2",children:c?u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:w,disabled:o.size===0,className:"px-3 py-1.5 bg-error hover:bg-error-hover text-on-error text-xs font-bold rounded-full disabled:opacity-50 transition-colors shadow-sm",children:["Delete (",o.size,")"]}),u.jsx("button",{onClick:()=>{d(!1),l(new Set)},className:"px-3 py-1.5 border border-outline text-text-primary hover:bg-surface-container-highest text-xs font-bold rounded-full transition-colors",children:"Cancel"})]}):u.jsxs(u.Fragment,{children:[x.length>0&&u.jsx("button",{onClick:()=>d(!0),className:"px-3 py-1.5 text-xs font-medium text-text-secondary hover:text-text-primary hover:bg-surface-container-highest rounded-full transition-colors",children:"Select"}),u.jsxs("button",{onClick:()=>{var P;return(P=m.current)==null?void 0:P.click()},className:"flex items-center gap-1 px-3 py-1.5 bg-primary text-on-primary text-xs font-bold rounded-full hover:bg-primary-hover shadow-md transition-all",children:[a==="SITE"?u.jsx(wv,{size:14}):u.jsx(Zc,{size:14})," Add"]})]})})]}),u.jsx("input",{type:"file",multiple:!0,accept:a==="SITE"?"image/*":".pdf,.doc,.docx,.xls,.xlsx,image/*",className:"hidden",ref:m,onChange:v})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-surface-container",children:r?u.jsx("div",{className:"text-center py-8 text-text-secondary text-xs",children:"Loading..."}):x.length===0?u.jsxs("div",{onClick:()=>{var P;return(P=m.current)==null?void 0:P.click()},className:"h-full flex flex-col items-center justify-center text-text-tertiary cursor-pointer hover:bg-surface-container-low border-2 border-dashed border-outline/30 rounded-xl transition-colors p-4",children:[a==="SITE"?u.jsx(wv,{size:32,className:"mb-2 opacity-50"}):u.jsx(Zc,{size:32,className:"mb-2 opacity-50"}),u.jsxs("span",{className:"text-sm font-medium",children:["No ",a==="SITE"?"photos":"documents"," yet"]}),u.jsx("span",{className:"text-xs",children:"Click to upload"})]}):a==="SITE"?u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2",children:x.map((P,O)=>{const D=o.has(P.id);return u.jsxs("div",{onClick:()=>C(P,O),className:`relative aspect-square rounded-lg overflow-hidden cursor-pointer group border-2 transition-all ${D?"border-primary ring-2 ring-primary/50":"border-transparent hover:border-outline/50"}`,children:[u.jsx("img",{src:ds(P.thumbnailUrl||P.url),alt:"Project Site",className:"w-full h-full object-cover",loading:"lazy"}),c&&u.jsx("div",{className:`absolute top-1.5 right-1.5 rounded-full bg-surface p-0.5 ${D?"text-primary":"text-outline"}`,children:u.jsx(gh,{size:18,fill:D?"currentColor":"none"})}),!c&&u.jsx("div",{className:"absolute inset-0 bg-scrim/0 group-hover:bg-scrim/30 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100",children:u.jsx(F8e,{className:"text-white drop-shadow-md",size:20})})]},P.id)})}):u.jsx("div",{className:"space-y-2",children:x.map(P=>{var B,U;const O=o.has(P.id),D=((B=P.mimeType)==null?void 0:B.includes("pdf"))||P.url.endsWith(".pdf"),M=((U=P.mimeType)==null?void 0:U.includes("image"))||P.thumbnailUrl;return u.jsxs("div",{onClick:()=>c?b(P.id):window.open(ds(P.url),"_blank"),className:`flex items-center p-3 rounded-xl border transition-all cursor-pointer ${O?"border-primary bg-primary-container/20 shadow-sm":"border-outline/20 bg-surface-container-high hover:border-primary/50"}`,children:[u.jsx("div",{className:"w-10 h-10 rounded-lg bg-surface-container-highest border border-outline/10 flex items-center justify-center mr-3 text-text-secondary shrink-0 overflow-hidden",children:M?u.jsx("img",{src:ds(P.thumbnailUrl||P.url),className:"w-full h-full object-cover"}):u.jsx(doe,{size:20,className:D?"text-error":"text-primary"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-text-primary truncate",children:P.fileName||"Untitled Document"}),u.jsx("p",{className:"text-xs text-text-tertiary",children:new Date(P.createdAt).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})})]}),c?u.jsx("div",{className:`shrink-0 ${O?"text-primary":"text-outline"}`,children:u.jsx(gh,{size:20,fill:O?"currentColor":"none"})}):u.jsx("button",{className:"p-2 text-text-tertiary hover:text-primary transition-colors",children:u.jsx(I4,{size:16})})]},P.id)})})}),f!==null&&a==="SITE"&&Tl.createPortal(u.jsxs("div",{className:"fixed inset-0 z-50 bg-black/95 flex items-center justify-center p-4 backdrop-blur-sm",onClick:()=>p(null),children:[u.jsx("button",{className:"absolute top-4 right-4 text-white/70 hover:text-white bg-white/10 hover:bg-white/20 p-2 rounded-full transition-colors",onClick:()=>p(null),children:u.jsx(Gr,{size:24})}),_.length>1&&u.jsx("button",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/70 hover:text-white bg-white/10 hover:bg-white/20 p-2 rounded-full",onClick:N,children:u.jsx(i8,{size:32})}),u.jsx("img",{src:ds(_[f].url),alt:"Full View",className:"max-w-full max-h-full rounded shadow-2xl",onClick:P=>P.stopPropagation()}),_.length>1&&u.jsx("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-white/70 hover:text-white bg-white/10 hover:bg-white/20 p-2 rounded-full",onClick:R,children:u.jsx(ou,{size:32})}),u.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 text-white/50 text-sm",children:[f+1," / ",_.length]})]}),document.body)]})},iD=({children:e,isLocked:t,title:r,message:n="Available after Quote Acceptance"})=>t?u.jsxs("div",{className:"relative w-full h-full overflow-hidden flex flex-col",children:[r&&u.jsx("div",{className:"p-4 border-b border-outline/10",children:u.jsx("h3",{className:"font-bold text-xl text-text-secondary opacity-70",children:r})}),u.jsx("div",{className:"flex-1 opacity-40 pointer-events-none filter blur-[1px] p-4 overflow-hidden relative",children:e}),u.jsxs("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center bg-surface-container/30 backdrop-blur-[1px]",children:[u.jsx("div",{className:"bg-surface-container-highest/90 border border-outline/20 p-4 rounded-full shadow-lg mb-2",children:u.jsx(j7,{className:"w-6 h-6 text-text-secondary"})}),u.jsx("p",{className:"font-semibold text-text-secondary text-sm bg-surface-container-highest/80 px-3 py-1 rounded-full border border-outline/20",children:n})]})]}):u.jsx(u.Fragment,{children:e}),vHe=aK.WidthProvider(aK.Responsive),yHe=()=>{var it;const{projectId:e}=Ex(),t=gu(),{currentUser:r,isLayoutEditMode:n,toggleLayoutEditMode:i,saveCurrentUserPreferences:a,projectHistory:s,fetchProjectHistory:o,updateJob:l,refreshNotifications:c,users:d}=Kr(),{data:f=[]}=Yh(),{data:p=[]}=Mx(),{data:m=[]}=S4(),{data:x=[]}=Kse(),{data:v=[]}=Yse(),{data:b=[]}=C4(),{data:w=[]}=vf(),_=Bse(),C=A7(),N=Xse(),R=I7(),P=N7(),[O,D]=I.useState(null),[M,B]=I.useState(!1),[U,H]=I.useState(null),[Z,ee]=I.useState(null),[V,te]=I.useState(null),[se,Q]=I.useState(!1),X=I.useMemo(()=>parseInt(e||"",10),[e]),fe=I.useMemo(()=>f.find(ze=>ze.id===X),[f,X]),Se=I.useMemo(()=>x.find(ze=>ze.projectId===X),[x,X]),Y=I.useMemo(()=>p.find(ze=>ze.id===(fe==null?void 0:fe.customerId)),[p,fe]),ce=m.filter(ze=>ze.projectId===(fe==null?void 0:fe.id)),W=ce.find(ze=>ze.status==="Accepted"),G=(W==null?void 0:W.installerId)||((it=ce.find(ze=>ze.installerId))==null?void 0:it.installerId),ie=I.useMemo(()=>w.find(ze=>ze.id===G),[w,G]),Ce=I.useMemo(()=>d.find(ze=>ze.userId===(fe==null?void 0:fe.managerId)),[d,fe]),re=I.useMemo(()=>({lg:[{i:"quotes",x:0,y:0,w:4,h:7,minH:5,minW:3},{i:"sample-checkouts",x:4,y:0,w:4,h:7,minH:4,minW:3},{i:"notes",x:8,y:0,w:4,h:7,minH:4,minW:3},{i:"job-details",x:0,y:7,w:12,h:9,minH:7,minW:6},{i:"material-orders",x:0,y:16,w:6,h:6,minH:4,minW:3},{i:"change-orders",x:6,y:16,w:6,h:6,minH:5,minW:3},{i:"photos",x:0,y:22,w:4,h:5,minH:4,minW:3},{i:"history",x:4,y:22,w:8,h:5,minH:4,minW:6}]}),[]),[ne,ge]=I.useState(re),[we,q]=I.useState(ne);I.useEffect(()=>{var _e;const ze=(_e=r==null?void 0:r.preferences)==null?void 0:_e.projectLayouts;if(ze&&Object.keys(ze).length>0){const ut={...re};Object.keys(ze).forEach(xt=>{const Dt=ze[xt]||[],Cr=(re[xt]||[]).filter(wn=>!Dt.find(fr=>fr.i===wn.i));ut[xt]=[...Dt,...Cr]}),ge(ut)}},[r,re]),I.useEffect(()=>{n&&q(ne)},[n,ne]);const Ae=I.useCallback(async()=>{if(!isNaN(X)){o(X);try{if(!Se){const ze=await a6e(X);ze&&l(ze)}}catch{console.error("Could not load job schedule details.")}}},[X,o,l,Se]);I.useEffect(()=>{Ae()},[X,Ae]),I.useEffect(()=>{X&&!isNaN(X)&&NMe(X).then(()=>c())},[X,c]);const Pe=(ze,_e)=>{ge(_e)},He=()=>{a({projectLayouts:ne}),Re.success("Layout saved!"),i()},je=()=>{ge(we),i()},$e=()=>{window.confirm("Are you sure you want to reset the layout to its default?")&&(ge(re),a({projectLayouts:re}),Re.success("Layout has been reset."),i())},Ze=ze=>{te(ze)},lt=async()=>{if(!(!fe||!Y)&&window.confirm(`Are you sure you want to permanently delete the project "${fe.projectName}"?`)){Q(!0);try{await _.deleteProject(fe.id),Re.success("Project deleted successfully."),t(`/customers/${Y.id}`)}catch(ze){Re.error(ze.message||"Failed to delete project.")}finally{Q(!1)}}},kt=async ze=>{Se&&await N.saveJobDetails({projectId:fe.id,notes:ze})},ht=async ze=>_.updateProject(ze),_r=async ze=>C.addQuote(ze),er=async ze=>C.updateQuote(ze),ct=async ze=>N.saveJobDetails(ze),Gt=async ze=>P.addInstaller(ze),Lt=async ze=>R.addChangeOrder(ze),dr=async(ze,_e)=>R.updateChangeOrder({id:ze,data:_e});if(!fe)return u.jsx("div",{className:"text-center p-8",children:"Project not found."});const Ht=ce.some(ze=>ze.status===ll.ACCEPTED),ye=ce.filter(ze=>ze.status===ll.ACCEPTED),Me=v.filter(ze=>ze.projectId===fe.id),qe=b.filter(ze=>ze.projectId===fe.id);return u.jsxs("div",{className:"space-y-8",children:[u.jsx(J$e,{project:fe,customer:Y,activeInstaller:ie,projectLead:Ce,currentUser:r,updateProject:ht,onEdit:()=>B(!0),onDeleteProject:lt,isDeleting:se,isLayoutEditMode:n,onSaveLayout:He,onCancelLayout:je,onResetLayout:$e}),u.jsxs(vHe,{className:`layout ${n?"edit-mode":""}`,layouts:ne,onLayoutChange:Pe,breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},rowHeight:30,draggableHandle:".drag-handle",isDraggable:n,isResizable:n,children:[u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:u.jsx(nze,{project:fe,projectQuotes:ce,installers:w,addQuote:_r,updateQuote:er,updateProject:ht,addInstaller:Gt,saveJobDetails:ct,isModalOpen:O==="quote",onCloseModal:()=>D(null),onOpenEditModal:ze=>{H(ze),D("quote")},editingQuoteForModal:U})},"quotes"),u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:u.jsx(iD,{isLocked:!Ht,title:"Job Financials & Schedule",children:Ht?u.jsx(ize,{project:fe,job:Se,quotes:ce,changeOrders:Me,saveJobDetails:ct,updateProject:ht}):u.jsx("div",{className:"h-full w-full bg-surface/50"})})},"job-details"),u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:Se?u.jsx(hHe,{job:Se,onSaveNotes:kt}):u.jsx("div",{className:"flex items-center justify-center h-full text-text-tertiary",children:"Loading notes..."})},"notes"),u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:u.jsx(tze,{project:fe})},"sample-checkouts"),u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:u.jsx(iD,{isLocked:!Ht,title:"Change Orders",children:Ht?u.jsx(aze,{project:fe,projectChangeOrders:Me,acceptedQuotes:ye,addChangeOrder:Lt,onEditChangeOrder:Ze}):u.jsx("div",{className:"h-full w-full bg-surface/50"})})},"change-orders"),u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:u.jsx(iD,{isLocked:!Ht,title:"Material Orders",children:Ht?u.jsx(sze,{project:fe,orders:qe,isModalOpen:O==="order",onCloseModal:()=>{D(null),ee(null)},editingOrder:Z,onEditOrder:ze=>{ee(ze),D("order")}}):u.jsx("div",{className:"h-full w-full bg-surface/50"})})},"material-orders"),u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:u.jsx(xHe,{project:fe})},"photos"),u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:u.jsx(pb,{history:s})},"history")]}),M&&fe&&u.jsx(X$e,{project:fe,onClose:()=>B(!1),onSave:ht}),V&&u.jsx(Y$e,{changeOrder:V,acceptedQuotes:ye,onClose:()=>te(null),onSave:async ze=>{await dr(V.id,ze),te(null)}})]})},SK=({installers:e,users:t,selectedInstallerIds:r,selectedUserIds:n,showDeliveries:i,onInstallerChange:a,onUserChange:s,onShowDeliveriesChange:o})=>{const[l,c]=I.useState(!1),d=I.useRef(null),[f,p]=I.useState("installers"),[m,x]=I.useState(new Set),[v,b]=I.useState(new Set),[w,_]=I.useState(!0);I.useEffect(()=>{l&&(x(new Set(r)),b(new Set(n)),_(i))},[l,r,n,i]),I.useEffect(()=>{const Q=X=>{window.innerWidth>=768&&d.current&&!d.current.contains(X.target)&&c(!1)};return document.addEventListener("mousedown",Q),()=>document.removeEventListener("mousedown",Q)},[d]);const C=()=>a(new Set(e.map(Q=>Q.id))),N=()=>a(new Set),R=Q=>a(new Set([Q])),P=Q=>{const X=new Set(r);X.has(Q)?X.delete(Q):X.add(Q),a(X)},O=()=>s(new Set(t.map(Q=>Q.userId))),D=()=>s(new Set),M=Q=>s(new Set([Q])),B=Q=>{const X=new Set(n);X.has(Q)?X.delete(Q):X.add(Q),s(X)},U=Q=>{const X=new Set(m);X.has(Q)?X.delete(Q):X.add(Q),x(X)},H=Q=>{const X=new Set(v);X.has(Q)?X.delete(Q):X.add(Q),b(X)},Z=Q=>{x(new Set([Q]))},ee=Q=>{b(new Set([Q]))},V=()=>{a(m),s(v),o(w),c(!1)},te=()=>{x(new Set(e.map(Q=>Q.id))),b(new Set(t.map(Q=>Q.userId))),_(!0)},se=r.size+n.size;return u.jsxs("div",{className:"relative",ref:d,children:[u.jsxs("button",{onClick:()=>c(!l),className:"flex items-center gap-2 px-4 py-2 rounded-full bg-surface-container-high hover:bg-surface-container-highest transition-colors border border-outline/10 hover:border-outline/20 shadow-sm","aria-label":"Filter calendar",children:[u.jsx(a8,{size:20,className:"text-primary"}),u.jsx("span",{className:"font-medium text-text-primary",children:"Filter"}),se>0&&u.jsx("span",{className:"bg-primary text-on-primary text-xs font-bold rounded-full min-w-[20px] h-5 px-1 flex items-center justify-center",children:se})]}),l&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"hidden md:block absolute top-full right-0 mt-2 w-80 bg-surface-container-high border border-outline/10 rounded-xl shadow-2xl z-20 overflow-hidden ring-1 ring-black/5",children:u.jsxs("div",{className:"max-h-[70vh] overflow-y-auto",children:[u.jsx("div",{className:"p-3 border-b border-outline/10 bg-surface-container-low",children:u.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-surface-container-highest cursor-pointer transition-colors",children:[u.jsx("input",{type:"checkbox",checked:i,onChange:Q=>o(Q.target.checked),className:"h-5 w-5 rounded border-outline/20 text-primary focus:ring-primary bg-surface-container-highest cursor-pointer"}),u.jsxs("span",{className:"text-sm font-medium text-text-primary flex items-center gap-2",children:[u.jsx(R0,{size:14})," Material Deliveries"]})]})}),u.jsx("div",{className:"p-3 bg-surface-container-highest/50 border-b border-outline/5",children:u.jsx("h4",{className:"font-bold text-text-secondary text-xs uppercase tracking-wider",children:"Installers"})}),u.jsxs("div",{className:"flex justify-between px-3 py-2 bg-surface-container-low border-b border-outline/5",children:[u.jsx("button",{onClick:C,className:"text-xs text-primary font-medium hover:text-primary-hover",children:"Select All"}),u.jsx("button",{onClick:N,className:"text-xs text-text-secondary hover:text-text-primary",children:"Deselect All"})]}),u.jsx("div",{className:"p-2 space-y-1",children:(e||[]).map(Q=>u.jsxs("div",{className:"group flex items-center justify-between p-2 rounded-lg hover:bg-surface-container-highest cursor-pointer transition-colors",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("input",{type:"checkbox",checked:r.has(Q.id),onChange:()=>P(Q.id),className:"h-4 w-4 rounded border-outline/20 text-primary focus:ring-primary bg-surface-container-highest cursor-pointer"}),u.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:Q.color||"#6b7280"}}),u.jsx("span",{className:`text-sm ${r.has(Q.id)?"text-text-primary font-medium":"text-text-secondary"}`,children:Q.installerName})]}),u.jsx("button",{onClick:X=>{X.preventDefault(),R(Q.id)},className:"opacity-0 group-hover:opacity-100 text-xs text-primary font-bold hover:bg-primary-container px-2 py-0.5 rounded transition-all",children:"Only"})]},`installer-${Q.id}`))}),u.jsx("div",{className:"p-3 bg-surface-container-highest/50 border-y border-outline/5 mt-2",children:u.jsx("h4",{className:"font-bold text-text-secondary text-xs uppercase tracking-wider",children:"Users"})}),u.jsxs("div",{className:"flex justify-between px-3 py-2 bg-surface-container-low border-b border-outline/5",children:[u.jsx("button",{onClick:O,className:"text-xs text-primary font-medium hover:text-primary-hover",children:"Select All"}),u.jsx("button",{onClick:D,className:"text-xs text-text-secondary hover:text-text-primary",children:"Deselect All"})]}),u.jsx("div",{className:"p-2 space-y-1",children:(t||[]).map(Q=>u.jsxs("div",{className:"group flex items-center justify-between p-2 rounded-lg hover:bg-surface-container-highest cursor-pointer transition-colors",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("input",{type:"checkbox",checked:n.has(Q.userId),onChange:()=>B(Q.userId),className:"h-4 w-4 rounded border-outline/20 text-primary focus:ring-primary bg-surface-container-highest cursor-pointer"}),u.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:Q.color||"#6b7280"}}),u.jsx("span",{className:`text-sm ${n.has(Q.userId)?"text-text-primary font-medium":"text-text-secondary"}`,children:Q.email})]}),u.jsx("button",{onClick:X=>{X.preventDefault(),M(Q.userId)},className:"opacity-0 group-hover:opacity-100 text-xs text-primary font-bold hover:bg-primary-container px-2 py-0.5 rounded transition-all",children:"Only"})]},`user-${Q.userId}`))})]})}),u.jsxs("div",{className:"md:hidden fixed inset-0 bg-surface-container-low z-50 flex flex-col animate-in slide-in-from-bottom-5 duration-200",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-outline/10 bg-surface-container-high",children:[u.jsxs("h2",{className:"text-xl font-bold text-text-primary flex items-center gap-2",children:[u.jsx(a8,{size:20})," Filter Calendar"]}),u.jsx("button",{onClick:()=>c(!1),className:"p-2 bg-surface-container-highest rounded-full text-text-secondary hover:text-text-primary",children:u.jsx(Gr,{size:24})})]}),u.jsxs("div",{className:"flex border-b border-outline/10 bg-surface-container-high",children:[u.jsxs("button",{onClick:()=>p("installers"),className:`flex-1 py-4 font-semibold text-sm uppercase tracking-wide transition-colors ${f==="installers"?"border-b-2 border-primary text-primary":"text-text-secondary"}`,children:["Installers (",m.size,")"]}),u.jsxs("button",{onClick:()=>p("users"),className:`flex-1 py-4 font-semibold text-sm uppercase tracking-wide transition-colors ${f==="users"?"border-b-2 border-primary text-primary":"text-text-secondary"}`,children:["Users (",v.size,")"]})]}),u.jsx("div",{className:"p-4 bg-surface-container-low border-b border-outline/10",children:u.jsxs("div",{className:"flex items-center justify-between bg-surface-container-high p-4 rounded-xl border border-outline/5 shadow-sm",children:[u.jsxs("span",{className:"font-medium text-text-primary flex items-center gap-2",children:[u.jsx(R0,{size:18})," Show Deliveries"]}),u.jsx("div",{className:`w-12 h-7 rounded-full p-1 cursor-pointer transition-colors ${w?"bg-primary":"bg-gray-300"}`,onClick:()=>_(!w),children:u.jsx("div",{className:`bg-white w-5 h-5 rounded-full shadow-md transform transition-transform ${w?"translate-x-5":""}`})})]})}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-surface-container-low",children:[f==="installers"&&u.jsxs("div",{className:"space-y-2",children:[e.map(Q=>{const X=m.has(Q.id);return u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>U(Q.id),className:`flex-1 flex items-center justify-between p-4 rounded-xl border text-left transition-all ${X?"bg-primary-container border-primary shadow-sm":"bg-surface-container-high border-outline/10"}`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-4 h-4 rounded-full flex-shrink-0",style:{backgroundColor:Q.color||"#6b7280"}}),u.jsx("span",{className:`font-medium ${X?"text-primary":"text-text-primary"}`,children:Q.installerName})]}),X&&u.jsx(nf,{size:20,className:"text-primary"})]}),u.jsx("button",{onClick:()=>Z(Q.id),className:"px-4 font-bold text-xs uppercase tracking-wide text-primary border border-outline/10 rounded-xl hover:bg-primary-container bg-surface-container-high shadow-sm",children:"Only"})]},Q.id)}),e.length===0&&u.jsx("p",{className:"text-text-secondary text-center p-4",children:"No installers found."})]}),f==="users"&&u.jsxs("div",{className:"space-y-2",children:[t.map(Q=>{const X=v.has(Q.userId);return u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>H(Q.userId),className:`flex-1 flex items-center justify-between p-4 rounded-xl border text-left transition-all ${X?"bg-primary-container border-primary shadow-sm":"bg-surface-container-high border-outline/10"}`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-4 h-4 rounded-full flex-shrink-0",style:{backgroundColor:Q.color||"#6b7280"}}),u.jsx("span",{className:`font-medium ${X?"text-primary":"text-text-primary"}`,children:Q.email})]}),X&&u.jsx(nf,{size:20,className:"text-primary"})]}),u.jsx("button",{onClick:()=>ee(Q.userId),className:"px-4 font-bold text-xs uppercase tracking-wide text-primary border border-outline/10 rounded-xl hover:bg-primary-container bg-surface-container-high shadow-sm",children:"Only"})]},Q.userId)}),t.length===0&&u.jsx("p",{className:"text-text-secondary text-center p-4",children:"No users found."})]})]}),u.jsxs("div",{className:"p-4 bg-surface-container-high border-t border-outline/10 flex gap-3",children:[u.jsxs("button",{onClick:te,className:"flex-1 py-3 text-text-primary font-medium hover:bg-surface-container-highest rounded-full transition-colors border border-outline/10 flex items-center justify-center gap-2",children:[u.jsx($x,{size:18})," Reset All"]}),u.jsx("button",{onClick:V,className:"flex-1 py-3 bg-primary text-on-primary font-bold rounded-full shadow-lg hover:bg-primary-hover transition-colors",children:"Apply Filters"})]})]})]})]})},A9=()=>sr("/api/events"),bHe=async e=>{const t=await fetch(A9(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create event");return t.json()},wHe=async(e,t)=>{const r=await fetch(`${A9()}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to update event");return r.json()},SHe=async e=>{if(!(await fetch(`${A9()}/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete event")};function EHe(e,t){const r=AHe(t);return"formatToParts"in r?kHe(r,e):_He(r,e)}const CHe={year:0,month:1,day:2,hour:3,minute:4,second:5};function kHe(e,t){try{const r=e.formatToParts(t),n=[];for(let i=0;i<r.length;i++){const a=CHe[r[i].type];a!==void 0&&(n[a]=parseInt(r[i].value,10))}return n}catch(r){if(r instanceof RangeError)return[NaN];throw r}}function _He(e,t){const r=e.format(t),n=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(r);return[parseInt(n[3],10),parseInt(n[1],10),parseInt(n[2],10),parseInt(n[4],10),parseInt(n[5],10),parseInt(n[6],10)]}const aD={},EK=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),NHe=EK==="06/25/2014, 00:00:00"||EK==="06/25/2014 00:00:00";function AHe(e){return aD[e]||(aD[e]=NHe?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),aD[e]}function T9(e,t,r,n,i,a,s){const o=new Date(0);return o.setUTCFullYear(e,t,r),o.setUTCHours(n,i,a,s),o}const CK=36e5,THe=6e4,sD={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Lce(e,t,r){if(!e)return 0;let n=sD.timezoneZ.exec(e);if(n)return 0;let i,a;if(n=sD.timezoneHH.exec(e),n)return i=parseInt(n[1],10),kK(i)?-(i*CK):NaN;if(n=sD.timezoneHHMM.exec(e),n){i=parseInt(n[2],10);const s=parseInt(n[3],10);return kK(i,s)?(a=Math.abs(i)*CK+s*THe,n[1]==="+"?-a:a):NaN}if(PHe(e)){t=new Date(t||Date.now());const s=IHe(t),o=D8(s,e);return-OHe(t,o,e)}return NaN}function IHe(e){return T9(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function D8(e,t){const r=EHe(e,t),n=T9(r[0],r[1]-1,r[2],r[3]%24,r[4],r[5],0).getTime();let i=e.getTime();const a=i%1e3;return i-=a>=0?a:1e3+a,n-i}function OHe(e,t,r){let i=e.getTime()-t;const a=D8(new Date(i),r);if(t===a)return t;i-=a-t;const s=D8(new Date(i),r);return a===s?a:Math.max(a,s)}function kK(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}const _K={};function PHe(e){if(_K[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),_K[e]=!0,!0}catch{return!1}}function NK(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+e-+t}const Bce=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,oD=36e5,AK=6e4,RHe=2,Bo={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:Bce};function TK(e,t={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);const r=t.additionalDigits==null?RHe:Number(t.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(Object.prototype.toString.call(e)!=="[object String]")return new Date(NaN);const n=jHe(e),{year:i,restDateString:a}=DHe(n.date,r),s=MHe(a,i);if(s===null||isNaN(s.getTime()))return new Date(NaN);if(s){const o=s.getTime();let l=0,c;if(n.time&&(l=FHe(n.time),l===null||isNaN(l)))return new Date(NaN);if(n.timeZone||t.timeZone){if(c=Lce(n.timeZone||t.timeZone,new Date(o+l)),isNaN(c))return new Date(NaN)}else c=NK(new Date(o+l)),c=NK(new Date(o+l+c));return new Date(o+l+c)}else return new Date(NaN)}function jHe(e){const t={};let r=Bo.dateTimePattern.exec(e),n;if(r?(t.date=r[1],n=r[3]):(r=Bo.datePattern.exec(e),r?(t.date=r[1],n=r[2]):(t.date=null,n=e)),n){const i=Bo.timeZone.exec(n);i?(t.time=n.replace(i[1],""),t.timeZone=i[1].trim()):t.time=n}return t}function DHe(e,t){if(e){const r=Bo.YYY[t],n=Bo.YYYYY[t];let i=Bo.YYYY.exec(e)||n.exec(e);if(i){const a=i[1];return{year:parseInt(a,10),restDateString:e.slice(a.length)}}if(i=Bo.YY.exec(e)||r.exec(e),i){const a=i[1];return{year:parseInt(a,10)*100,restDateString:e.slice(a.length)}}}return{year:null}}function MHe(e,t){if(t===null)return null;let r,n,i;if(!e||!e.length)return r=new Date(0),r.setUTCFullYear(t),r;let a=Bo.MM.exec(e);if(a)return r=new Date(0),n=parseInt(a[1],10)-1,OK(t,n)?(r.setUTCFullYear(t,n),r):new Date(NaN);if(a=Bo.DDD.exec(e),a){r=new Date(0);const s=parseInt(a[1],10);return UHe(t,s)?(r.setUTCFullYear(t,0,s),r):new Date(NaN)}if(a=Bo.MMDD.exec(e),a){r=new Date(0),n=parseInt(a[1],10)-1;const s=parseInt(a[2],10);return OK(t,n,s)?(r.setUTCFullYear(t,n,s),r):new Date(NaN)}if(a=Bo.Www.exec(e),a)return i=parseInt(a[1],10)-1,PK(i)?IK(t,i):new Date(NaN);if(a=Bo.WwwD.exec(e),a){i=parseInt(a[1],10)-1;const s=parseInt(a[2],10)-1;return PK(i,s)?IK(t,i,s):new Date(NaN)}return null}function FHe(e){let t,r,n=Bo.HH.exec(e);if(n)return t=parseFloat(n[1].replace(",",".")),lD(t)?t%24*oD:NaN;if(n=Bo.HHMM.exec(e),n)return t=parseInt(n[1],10),r=parseFloat(n[2].replace(",",".")),lD(t,r)?t%24*oD+r*AK:NaN;if(n=Bo.HHMMSS.exec(e),n){t=parseInt(n[1],10),r=parseInt(n[2],10);const i=parseFloat(n[3].replace(",","."));return lD(t,r,i)?t%24*oD+r*AK+i*1e3:NaN}return null}function IK(e,t,r){t=t||0,r=r||0;const n=new Date(0);n.setUTCFullYear(e,0,4);const i=n.getUTCDay()||7,a=t*7+r+1-i;return n.setUTCDate(n.getUTCDate()+a),n}const LHe=[31,28,31,30,31,30,31,31,30,31,30,31],BHe=[31,29,31,30,31,30,31,31,30,31,30,31];function Uce(e){return e%400===0||e%4===0&&e%100!==0}function OK(e,t,r){if(t<0||t>11)return!1;if(r!=null){if(r<1)return!1;const n=Uce(e);if(n&&r>BHe[t]||!n&&r>LHe[t])return!1}return!0}function UHe(e,t){if(t<1)return!1;const r=Uce(e);return!(r&&t>366||!r&&t>365)}function PK(e,t){return!(e<0||e>52||t!=null&&(t<0||t>6))}function lD(e,t,r){return!(e<0||e>=25||t!=null&&(t<0||t>=60)||r!=null&&(r<0||r>=60))}function N_(e,t,r){if(typeof e=="string"&&!e.match(Bce))return TK(e,{...r,timeZone:t});e=TK(e,r);const n=T9(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()).getTime(),i=Lce(t,new Date(n));return new Date(n+i)}const cD=e=>{const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`},O1=e=>{const t=new Date(e);return t.setHours(0,0,0,0),t},A_=(e,t)=>{const r=new Date(e);return t==="material_order_eta"?new Date(r.getTime()+r.getTimezoneOffset()*6e4):r},$ce=e=>e?e.replace(/@\[\w+:[\w-]+\|([^\]]+)\]/g,"$1"):"",$He=e=>{if(!e)return"#FFFFFF";const t=e.replace("#",""),r=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),i=parseInt(t.substring(4,6),16);return(.299*r+.587*n+.114*i)/255>.5?"#000000":"#FFFFFF"},zce=(e,t,r,n)=>{var a;if(e.type!=="user_appointment")return e.backgroundColor||"#6b7280";const i=e.fullEvent;if(i&&i.attendees&&i.attendees.length===1){const s=i.attendees[0];if(s.color)return s.color;if(s.attendeeType==="user"){if(n&&n.userId===s.attendeeId)return((a=n.preferences)==null?void 0:a.calendarColor)||"#3B82FF";{const o=(t||[]).find(l=>l.userId===s.attendeeId);return(o==null?void 0:o.color)||"#3B82FF"}}else{const o=(r||[]).find(l=>String(l.id)===s.attendeeId);return(o==null?void 0:o.color)||"#3B82FF"}}return"#3B82FF"},zHe=()=>{const{users:e,currentUser:t,systemBranding:r}=Kr(),{data:n=[]}=vf(),[i,a]=I.useState([]),[s,o]=I.useState(!0),[l,c]=I.useState(new Date),[d,f]=I.useState(new Set),[p,m]=I.useState(new Set),[x,v]=I.useState(!0),[b,w]=I.useState(!1),[_,C]=I.useState(null),[N,R]=I.useState(null),[P,O]=I.useState(null),[D,M]=I.useState(null);I.useEffect(()=>{n&&n.length>0&&f(new Set(n.map(ge=>ge.id))),e&&e.length>0&&m(new Set(e.map(ge=>ge.userId)))},[n,e]);const B=I.useCallback(async()=>{o(!0);const ge=new URLSearchParams,we=Array.from(d);we.length>0&&ge.append("installers",we.join(","));const q=Array.from(p);q.length>0&&ge.append("users",q.join(","));try{const Ae=await fetch(sr(`/api/calendar/events?${ge.toString()}`),{credentials:"include"});if(!Ae.ok)throw new Error("Failed to fetch calendar events");const Pe=await Ae.json();a(Pe)}catch(Ae){console.error("Error fetching calendar events:",Ae)}finally{o(!1)}},[d,p]);I.useEffect(()=>{B()},[l,B]);const U=new Date(l.getFullYear(),l.getMonth(),1),H=new Date(l.getFullYear(),l.getMonth()+1,0),Z=new Date(U);Z.setDate(Z.getDate()-Z.getDay());const ee=new Date(H);ee.setDate(ee.getDate()+(6-ee.getDay()));const V=[];let te=new Date(Z);for(;te<=ee;)V.push(new Date(te)),te.setDate(te.getDate()+1);const se=new Date(l);se.setDate(l.getDate()-l.getDay());const Q=Array.from({length:7},(ge,we)=>{const q=new Date(se);return q.setDate(se.getDate()+we),q}),X=ge=>{const we=O1(ge);return i.filter(Ae=>{if(!Ae.start||!Ae.end||!x&&Ae.type==="material_order_eta")return!1;const Pe=O1(A_(Ae.start,Ae.type)),He=O1(A_(Ae.end,Ae.type));return we>=Pe&&we<=He}).sort((Ae,Pe)=>{const He=new Date(Ae.start).getTime(),je=new Date(Pe.start).getTime();if(He!==je)return He-je;const $e=new Date(Ae.end).getTime(),Ze=new Date(Pe.end).getTime(),lt=$e-He,kt=Ze-je;return lt!==kt?kt-lt:Ae.id-Pe.id})},fe=ge=>{const we=new Date(l);we.setMonth(we.getMonth()+ge),c(we)},Se=ge=>{const we=new Date(l);we.setDate(we.getDate()+ge*7),c(we)},Y=ge=>{C(null),R(ge),w(!0)},ce=ge=>{C(ge),R(null),w(!0),O(null)},W=ge=>{O(ge)},G=()=>{B()},ie=()=>{w(!1),C(null),R(null),M(null)},Ce=ge=>{const we=new Date;return ge.getDate()===we.getDate()&&ge.getMonth()===we.getMonth()&&ge.getFullYear()===we.getFullYear()},re=(ge,we,q="grid")=>{var ye,Me,qe;const Ae=O1(A_(ge.start,ge.type)),Pe=O1(A_(ge.end,ge.type)),He=O1(we),je=He.getTime()===Ae.getTime(),$e=He.getTime()===Pe.getTime(),Ze=we.getDay()===0,lt=q==="list"||je||Ze||P!==null,kt=ge.type==="user_appointment",_r=ge.type==="material_order_eta"&&((ye=ge.fullEvent)==null?void 0:ye.status)==="Received",er=ge.type==="appointment"&&((Me=ge.fullEvent)==null?void 0:Me.isJobComplete);let ct=ge.type==="appointment"?`${ge.title} (${ge.customerName.split(" ")[0]})`:ge.title;ge.type==="appointment"&&ge.poNumber&&(ct+=` - PO: ${ge.poNumber}`),ct=$ce(ct);const Gt=zce(ge,e||[],n||[],t),Lt=$He(Gt);let dr="block text-xs p-1 truncate relative overflow-hidden mb-1";q==="list"?dr="block text-sm p-2 rounded relative overflow-hidden mb-2":P!==null||je&&$e?dr+=" rounded":je?dr+=" rounded-l":$e&&(dr+=" rounded-r-md"),ge.isOnHold&&(dr+=" on-hold-event");const Ht=ge.isOnHold?{color:"#a0a0a0"}:{backgroundColor:Gt,color:Lt};if((_r||er||ge.projectStatus==="Completed")&&!ge.isOnHold&&(Ht.backgroundImage="repeating-linear-gradient(45deg, transparent, transparent 5px, rgba(0,0,0,0.2) 5px, rgba(0,0,0,0.2) 10px)",ct=` ${ct}`),kt){const ze=((qe=ge.fullEvent)==null?void 0:qe.isAllDay)?"All Day":new Date(ge.start).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"});return u.jsxs("div",{onClick:_e=>{_e.stopPropagation(),ce(ge.fullEvent)},className:`${dr} cursor-pointer`,style:{backgroundColor:Gt,color:Lt},title:ct,children:[u.jsx("span",{className:"font-bold",children:ze}),u.jsx("span",{className:"ml-1",children:lt?ct:""})]},ge.appointmentId)}else return u.jsx("div",{className:`${dr} cursor-pointer hover:brightness-110`,style:Ht,title:ct,onClick:it=>{it.stopPropagation(),M(ge)},children:lt?ct:""},ge.appointmentId)};if(s)return u.jsx("div",{className:"text-center p-8",children:"Loading Calendar..."});const ne=2;return u.jsxs("div",{className:"flex flex-col h-full gap-4 md:gap-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4 px-1",children:[u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 md:gap-6 w-full md:w-auto",children:[u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-text-primary tracking-tight",children:"Calendar"})}),u.jsxs("div",{className:"flex flex-row items-center justify-between gap-4 w-full md:w-auto",children:[u.jsxs("div",{className:"flex items-center bg-surface-container-high rounded-full border border-outline/10 p-1 shadow-sm flex-shrink-0",children:[u.jsx("button",{onClick:()=>fe(-1),className:"p-2 rounded-full hover:bg-surface-container-highest text-text-secondary hover:text-text-primary transition-colors",children:u.jsx(i8,{size:20})}),u.jsx("span",{className:"font-bold text-sm md:text-lg px-2 md:px-4 min-w-[120px] md:min-w-[180px] text-center text-text-primary",children:l.toLocaleString("default",{month:"short",year:"numeric"})}),u.jsx("button",{onClick:()=>fe(1),className:"p-2 rounded-full hover:bg-surface-container-highest text-text-secondary hover:text-text-primary transition-colors",children:u.jsx(ou,{size:20})})]}),u.jsx("div",{className:"block md:hidden w-full max-w-[200px]",children:u.jsx(SK,{installers:n,users:e,selectedInstallerIds:d,selectedUserIds:p,showDeliveries:x,onInstallerChange:f,onUserChange:m,onShowDeliveriesChange:v})})]})]}),u.jsx("div",{className:"hidden md:block w-full md:w-auto",children:u.jsx(SK,{installers:n,users:e,selectedInstallerIds:d,selectedUserIds:p,showDeliveries:x,onInstallerChange:f,onUserChange:m,onShowDeliveriesChange:v})})]}),u.jsxs("div",{className:"md:hidden flex-1 flex flex-col gap-4",children:[u.jsxs("div",{className:"flex justify-between items-center bg-surface p-3 rounded-lg border border-border shadow-sm",children:[u.jsxs("button",{onClick:()=>Se(-1),className:"flex items-center text-sm font-medium text-text-secondary hover:text-primary",children:[u.jsx(i8,{size:16,className:"mr-1"})," Prev Week"]}),u.jsxs("span",{className:"text-sm font-bold text-text-primary",children:["Week of ",se.toLocaleDateString(void 0,{month:"short",day:"numeric"})]}),u.jsxs("button",{onClick:()=>Se(1),className:"flex items-center text-sm font-medium text-text-secondary hover:text-primary",children:["Next Week ",u.jsx(ou,{size:16,className:"ml-1"})]})]}),u.jsx("div",{className:"space-y-4",children:Q.map((ge,we)=>{const q=X(ge),Ae=Ce(ge);return u.jsxs("div",{className:`bg-surface border ${Ae?"border-primary":"border-border"} rounded-lg shadow-sm overflow-hidden`,children:[u.jsxs("div",{className:"flex justify-between items-center p-3 bg-background border-b border-border",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:`text-lg font-bold w-8 h-8 flex items-center justify-center rounded-full ${Ae?"bg-primary text-on-primary":"text-text-primary"}`,children:ge.getDate()}),u.jsx("span",{className:"font-semibold text-text-primary",children:ge.toLocaleDateString(void 0,{weekday:"long"})})]}),u.jsx("button",{onClick:()=>Y(ge),className:"p-1.5 bg-secondary/10 text-secondary hover:bg-secondary/20 rounded-md transition-colors",children:u.jsx(Jl,{size:18})})]}),u.jsx("div",{className:"p-3 min-h-[60px]",children:q.length>0?q.map(Pe=>re(Pe,ge,"list")):u.jsx("p",{className:"text-sm text-text-tertiary italic",children:"No events scheduled"})})]},we)})})]}),u.jsxs("div",{className:"hidden md:flex bg-surface-container-high p-6 rounded-xl shadow-sm border border-outline/10 flex-1 flex-col min-h-0 relative",children:[u.jsx("div",{className:"grid grid-cols-7 text-center font-semibold text-text-primary border-b border-outline/10 pb-2 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(ge=>u.jsx("div",{children:ge},ge))}),u.jsx("div",{className:"grid grid-cols-7 grid-rows-6 flex-1",children:V.map((ge,we)=>{const q=X(ge),Ae=ge.getMonth()===l.getMonth(),Pe=q.slice(0,ne),He=q.length-ne;return u.jsxs("div",{onClick:()=>Y(ge),className:`border border-outline/10 flex flex-col cursor-pointer transition-colors ${Ae?"hover:bg-surface-container-highest bg-surface-container-low":"bg-surface-container-lowest text-text-secondary opacity-50"}`,children:[u.jsx("span",{className:`font-semibold mb-1 self-start p-1 ml-1 mt-1 ${Ce(ge)?"bg-primary text-on-primary rounded-full w-7 h-7 flex items-center justify-center shadow-md":"w-7 h-7 flex items-center justify-center text-text-primary"}`,children:ge.getDate()}),u.jsxs("div",{className:"flex-1 overflow-hidden px-1",children:[Pe.map(je=>re(je,ge)),He>0&&u.jsxs("div",{onClick:je=>{je.stopPropagation(),W(ge)},className:"text-xs text-text-secondary font-medium hover:text-primary cursor-pointer mt-1 bg-surface/50 rounded p-1 text-center",children:["+ ",He," More"]})]})]},we)})})]}),P&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-2xl shadow-2xl w-full max-w-md max-h-[80vh] flex flex-col border border-outline/10",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-outline/10 pb-2",children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:P.toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"})}),u.jsx("button",{onClick:()=>O(null),className:"text-text-secondary hover:text-text-primary p-2 hover:bg-surface-container-highest rounded-full",children:u.jsx(Gr,{size:24})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:X(P).map(ge=>re(ge,P))}),u.jsx("div",{className:"mt-4 pt-4 border-t border-outline/10 flex justify-end",children:u.jsx("button",{onClick:()=>{O(null),Y(P)},className:"bg-primary hover:bg-primary-hover text-on-primary px-4 py-2 rounded-full text-sm font-semibold shadow-md transition-colors",children:"+ Add New Event"})})]})}),b&&u.jsx(WHe,{isOpen:b,onClose:ie,event:_,selectedDate:N,onSaveSuccess:G}),D&&u.jsx(HHe,{event:D,onClose:()=>M(null),users:e||[],installers:n||[],currentUser:t})]})},HHe=({event:e,onClose:t,users:r,installers:n,currentUser:i})=>{const a=zce(e,r,n,i),s=e.fullEvent||{},o=new Date(e.start),l=new Date(e.end),c=o.toDateString()===l.toDateString()?o.toLocaleDateString([],{weekday:"long",month:"long",day:"numeric"}):`${o.toLocaleDateString([],{month:"short",day:"numeric"})} - ${l.toLocaleDateString([],{month:"short",day:"numeric"})}`;return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",onClick:t,children:u.jsxs("div",{className:"bg-surface-container-high rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden animate-in fade-in zoom-in duration-200 border border-outline/10",onClick:d=>d.stopPropagation(),children:[u.jsx("div",{className:"h-2 w-full",style:{backgroundColor:a}}),u.jsxs("div",{className:"p-5",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-4 h-4 rounded mt-1.5 shrink-0",style:{backgroundColor:a}}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold text-text-primary leading-tight",children:e.title}),u.jsx("p",{className:"text-sm text-text-secondary mt-1",children:c})]})]}),u.jsx("button",{onClick:t,className:"text-text-tertiary hover:text-text-primary p-1 rounded-full hover:bg-surface-container-highest transition-colors",children:u.jsx(Gr,{size:20})})]}),u.jsxs("div",{className:"space-y-4 pl-7",children:[e.type==="material_order_eta"?u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-start gap-3 text-sm text-text-secondary",children:[u.jsx(ex,{size:18,className:"text-text-tertiary shrink-0 mt-0.5"}),u.jsxs("div",{children:[u.jsxs("p",{children:[u.jsx("span",{className:"font-medium text-text-primary",children:"Supplier:"})," ",s.supplierName]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-medium text-text-primary",children:"Status:"})," ",s.status]})]})]}),s.items&&Array.isArray(s.items)&&u.jsx("div",{className:"space-y-2 mt-2",children:s.items.map((d,f)=>u.jsxs("div",{className:"flex gap-3 p-2 bg-surface-container-low rounded-lg border border-outline/10",children:[u.jsx("div",{className:"w-10 h-10 bg-surface-container-highest rounded-md border border-outline/10 shrink-0 overflow-hidden",children:d.image?u.jsx("img",{src:ds(d.image),alt:"",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center text-text-tertiary",children:u.jsx(ex,{size:14})})}),u.jsxs("div",{className:"text-sm overflow-hidden",children:[u.jsx("p",{className:"font-medium text-text-primary truncate",title:d.name,children:d.name}),u.jsxs("p",{className:"text-xs text-text-secondary",children:[d.quantity," ",d.unit]})]})]},f))})]}):u.jsxs(u.Fragment,{children:[s.address&&u.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[u.jsx(P4,{size:18,className:"text-text-tertiary shrink-0 mt-0.5"}),u.jsx("a",{href:`https://maps.google.com/?q=${encodeURIComponent(s.address)}`,target:"_blank",rel:"noreferrer",className:"text-text-primary hover:underline hover:text-primary",children:s.address})]}),u.jsxs("div",{className:"flex items-start gap-3 text-sm text-text-secondary",children:[u.jsx(Zc,{size:18,className:"text-text-tertiary shrink-0 mt-0.5"}),u.jsxs("div",{children:[u.jsxs("p",{children:[u.jsx("span",{className:"font-medium text-text-primary",children:"Project:"})," ",s.projectName]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-medium text-text-primary",children:"Customer:"})," ",e.customerName]}),s.installerName&&u.jsxs("p",{children:[u.jsx("span",{className:"font-medium text-text-primary",children:"Installer:"})," ",s.installerName]})]})]}),s.pinnedNotes&&u.jsxs("div",{className:"mt-3 p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-md text-sm text-text-primary",children:[u.jsx("p",{className:"text-xs font-bold text-yellow-600 mb-1 flex items-center gap-1",children:" IMPORTANT NOTES"}),u.jsx(o3,{content:s.pinnedNotes})]})]}),u.jsx("div",{className:"pt-2 border-t border-border mt-2",children:u.jsxs(ai,{to:`/projects/${e.id}`,className:"inline-flex items-center gap-2 text-primary hover:text-primary-hover font-semibold text-sm",children:["Open Project Details ",u.jsx(Y0,{size:16})]})})]})]})]})})},WHe=({isOpen:e,onClose:t,event:r,selectedDate:n,onSaveSuccess:i})=>{var ie,Ce;const{users:a,currentUser:s,systemBranding:o}=Kr(),{data:l=[]}=vf(),c=o==null?void 0:o.systemTimezone,d=!r||s&&r.createdByUserId===s.userId,[f,p]=I.useState(!r),[m,x]=I.useState(""),[v,b]=I.useState(""),[w,_]=I.useState(""),[C,N]=I.useState(""),[R,P]=I.useState("09:00"),[O,D]=I.useState("10:00"),[M,B]=I.useState(!1),[U,H]=I.useState(!1),[Z,ee]=I.useState([]),[V,te]=I.useState(!1),[se,Q]=I.useState(!1),X=Hr.useMemo(()=>[...(a||[]).map(re=>({label:re.email,value:`user-${re.userId}`,type:"user",color:re.color})),...(l||[]).map(re=>({label:re.installerName,value:`installer-${String(re.id)}`,type:"installer",color:re.color}))],[a,l]);I.useEffect(()=>{var re;if(r){x(r.title),b(r.notes||"");const ne=new Date(r.startTime),ge=new Date(r.endTime);if(_(cD(ne)),N(cD(ge)),P(ne.toTimeString().substring(0,5)),D(ge.toTimeString().substring(0,5)),B(r.isAllDay||!1),H(r.isPublic||!1),r.attendees){const we=r.attendees.map(q=>{var Ae;if(q.attendeeType==="user"){const Pe=(a||[]).find(je=>je.userId===q.attendeeId);let He=(Pe==null?void 0:Pe.color)||null;return!He&&s&&s.userId===q.attendeeId&&(He=(Ae=s.preferences)==null?void 0:Ae.calendarColor),Pe?{label:Pe.email,value:`user-${Pe.userId}`,type:"user",color:He}:null}else{const Pe=(l||[]).find(He=>String(He.id)===q.attendeeId);return Pe?{label:Pe.installerName,value:`installer-${String(Pe.id)}`,type:"installer",color:Pe.color}:null}}).filter(q=>q!==null);ee(we)}}else if(n){x(""),b("");const ne=cD(n);_(ne),N(ne),P("09:00"),D("10:00"),B(!1),H(!1),ee(s?[{label:s.email,value:`user-${s.userId}`,type:"user",color:(re=s.preferences)==null?void 0:re.calendarColor}]:[])}},[r,n,a,l,s]);const fe=async()=>{if(!m){Re.error("Title is required.");return}te(!0);try{const re=c||"America/Los_Angeles";let ne,ge;M?(ne=N_(`${w}T00:00:00`,re),ge=N_(`${C}T23:59:59`,re)):(ne=N_(`${w}T${R}:00`,re),ge=N_(`${C}T${O}:00`,re));const we={title:m,notes:v,startTime:ne.toISOString(),endTime:ge.toISOString(),isAllDay:M,isPublic:U,jobId:null,attendees:Z.map(q=>({attendeeId:q.value.substring(q.value.indexOf("-")+1),attendeeType:q.type}))};r?await wHe(r.id,we):await bHe(we),Re.success(r?"Updated!":"Created!"),i(),t()}catch{Re.error("Failed to save.")}finally{te(!1)}},Se=async()=>{if(!(!r||!window.confirm("Delete this appointment?"))){Q(!0);try{await SHe(r.id),Re.success("Deleted."),i(),t()}catch{Re.error("Failed to delete.")}finally{Q(!1)}}},Y=async re=>{if(r)try{if(!(await fetch(sr(`/api/events/${r.id}/respond`),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:re}),credentials:"include"})).ok)throw new Error("Failed");Re.success(`Invitation ${re}`),i(),t()}catch{Re.error("Could not update status")}};if(!e)return null;const ce=(ie=r==null?void 0:r.attendees)==null?void 0:ie.find(re=>re.attendeeType==="user"&&re.attendeeId===(s==null?void 0:s.userId)),W=(ce==null?void 0:ce.status)||"pending",G=!!r&&!d&&ce&&W==="pending";return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-surface-container-high p-8 rounded-2xl shadow-2xl w-full max-w-lg relative border border-outline/10",children:[u.jsxs("div",{className:"flex justify-between items-start mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:r?f?"Edit Appointment":"Appointment Details":"New Appointment"}),u.jsxs("div",{className:"flex items-center gap-2",children:[r&&!f&&d&&u.jsx("button",{onClick:()=>p(!0),className:"p-2 text-primary hover:bg-surface-container-highest rounded-full transition-colors",title:"Edit",children:u.jsx(tx,{size:18})}),u.jsx("button",{onClick:t,className:"p-2 text-text-secondary hover:text-text-primary rounded-full hover:bg-surface-container-highest transition-colors",children:u.jsx(Gr,{size:20})})]})]}),!f&&r?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-1",children:u.jsx("span",{dangerouslySetInnerHTML:{__html:$ce(r.title)}})}),u.jsxs("div",{className:"flex items-center text-text-secondary text-sm",children:[u.jsx(od,{size:16,className:"mr-2"}),new Date(r.startTime).toLocaleString([],{dateStyle:"medium",timeStyle:"short"})," - ",new Date(r.endTime).toLocaleString([],{timeStyle:"short"})]}),r.isPublic&&u.jsxs("div",{className:"flex items-center text-xs text-primary mt-1",children:[u.jsx(Zg,{size:12,className:"mr-1"})," Public Event"]})]}),u.jsx("div",{className:"bg-surface-container-low p-4 rounded-xl border border-outline/10 max-h-60 overflow-y-auto",children:u.jsx(o3,{content:r.notes||"No notes provided."})}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-semibold text-text-secondary mb-2",children:"Attendees"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:(Ce=r.attendees)==null?void 0:Ce.map((re,ne)=>{var Pe,He;const we=re.attendeeType==="user"?(Pe=a.find(je=>je.userId===re.attendeeId))==null?void 0:Pe.email:(He=l.find(je=>String(je.id)===re.attendeeId))==null?void 0:He.installerName;let q=od,Ae="text-yellow-500";return re.status==="accepted"&&(q=nf,Ae="text-green-500"),re.status==="declined"&&(q=T4,Ae="text-red-500"),u.jsxs("div",{className:"flex items-center bg-surface-container-highest border border-outline/10 px-3 py-1 rounded-full text-xs",children:[u.jsx(q,{size:12,className:`mr-1 ${Ae}`}),u.jsx("span",{className:"text-text-primary",children:we||"Unknown"})]},ne)})})]}),G&&u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-outline/10",children:[u.jsx("span",{className:"text-sm text-text-secondary self-center mr-auto",children:"You are invited:"}),u.jsx("button",{onClick:()=>Y("declined"),className:"px-4 py-2 text-sm border border-error text-error rounded-full hover:bg-error/10 font-medium transition-colors",children:"Decline"}),u.jsx("button",{onClick:()=>Y("accepted"),className:"px-4 py-2 text-sm bg-success text-on-success rounded-full hover:bg-success-hover font-medium transition-colors",children:"Accept"})]})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Title"}),u.jsx(ST,{value:m,onChange:x,placeholder:"Event Title...",singleLine:!0})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:"Start"}),u.jsx("input",{type:"date",value:w,onChange:re=>_(re.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors mb-2"}),!M&&u.jsx("input",{type:"time",value:R,onChange:re=>P(re.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:"End"}),u.jsx("input",{type:"date",value:C,onChange:re=>N(re.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors mb-2"}),!M&&u.jsx("input",{type:"time",value:O,onChange:re=>D(re.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors"})]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"checkbox",id:"isAllDay",checked:M,onChange:re=>B(re.target.checked),className:"w-4 h-4 text-primary bg-surface-container-highest border-outline/20 rounded focus:ring-primary"}),u.jsx("label",{htmlFor:"isAllDay",className:"text-sm font-medium text-text-primary cursor-pointer",children:"All Day"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"checkbox",id:"isPublic",checked:U,onChange:re=>H(re.target.checked),className:"w-4 h-4 text-primary bg-surface-container-highest border-outline/20 rounded focus:ring-primary"}),u.jsxs("label",{htmlFor:"isPublic",className:"text-sm font-medium text-text-primary cursor-pointer flex items-center",children:[U?u.jsx(Zg,{size:14,className:"mr-1"}):u.jsx(j7,{size:14,className:"mr-1"}),U?"Public Event":"Private"]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:"Attendees"}),u.jsx(Rle,{isMulti:!0,options:X,value:Z,onChange:ee,className:"react-select-container mt-1",classNamePrefix:"react-select",styles:{control:re=>({...re,backgroundColor:"var(--color-surface-container-highest)",borderColor:"transparent",borderRadius:"0.5rem",padding:"0.2rem"}),input:re=>({...re,color:"var(--color-text-primary)"}),multiValue:re=>({...re,backgroundColor:"var(--color-surface-container-low)"}),multiValueLabel:re=>({...re,color:"var(--color-text-primary)"}),menu:re=>({...re,backgroundColor:"var(--color-surface-container-highest)"}),option:(re,{isFocused:ne,isSelected:ge})=>({...re,backgroundColor:ge?"var(--color-primary)":ne?"var(--color-surface-container-highest)":void 0,color:ge?"var(--color-on-primary)":"var(--color-text-primary)"})}})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Notes"}),u.jsx(ST,{value:v,onChange:b,placeholder:"Add notes...",minHeight:80})]}),u.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[r&&u.jsx("button",{type:"button",onClick:Se,disabled:se,className:"py-2 px-4 bg-error-container hover:bg-error/20 text-error rounded-full font-semibold mr-auto flex items-center justify-center transition-colors",children:u.jsx(Bs,{size:16})}),u.jsx("button",{type:"button",onClick:()=>r?p(!1):t(),className:"py-2 px-6 bg-surface hover:bg-surface-container-highest border border-outline/20 rounded-full text-text-secondary font-medium transition-colors",children:"Cancel"}),u.jsx("button",{type:"button",onClick:fe,disabled:V,className:"py-2 px-6 bg-primary hover:bg-primary-hover rounded-full text-on-primary font-bold shadow-md transition-all",children:V?"Saving...":"Save"})]})]})]})})};function P1(e,t,r){let n=r.initialDeps??[],i;function a(){var s,o,l,c;let d;r.key&&((s=r.debug)!=null&&s.call(r))&&(d=Date.now());const f=e();if(!(f.length!==n.length||f.some((x,v)=>n[v]!==x)))return i;n=f;let m;if(r.key&&((o=r.debug)!=null&&o.call(r))&&(m=Date.now()),i=t(...f),r.key&&((l=r.debug)!=null&&l.call(r))){const x=Math.round((Date.now()-d)*100)/100,v=Math.round((Date.now()-m)*100)/100,b=v/16,w=(_,C)=>{for(_=String(_);_.length<C;)_=" "+_;return _};console.info(`%c ${w(v,5)} /${w(x,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*b,120))}deg 100% 31%);`,r==null?void 0:r.key)}return(c=r==null?void 0:r.onChange)==null||c.call(r,i),i}return a.updateDeps=s=>{n=s},a}function RK(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const VHe=(e,t)=>Math.abs(e-t)<1.01,qHe=(e,t,r)=>{let n;return function(...i){e.clearTimeout(n),n=e.setTimeout(()=>t.apply(this,i),r)}},jK=e=>{const{offsetWidth:t,offsetHeight:r}=e;return{width:t,height:r}},GHe=e=>e,KHe=e=>{const t=Math.max(e.startIndex-e.overscan,0),r=Math.min(e.endIndex+e.overscan,e.count-1),n=[];for(let i=t;i<=r;i++)n.push(i);return n},XHe=(e,t)=>{const r=e.scrollElement;if(!r)return;const n=e.targetWindow;if(!n)return;const i=s=>{const{width:o,height:l}=s;t({width:Math.round(o),height:Math.round(l)})};if(i(jK(r)),!n.ResizeObserver)return()=>{};const a=new n.ResizeObserver(s=>{const o=()=>{const l=s[0];if(l!=null&&l.borderBoxSize){const c=l.borderBoxSize[0];if(c){i({width:c.inlineSize,height:c.blockSize});return}}i(jK(r))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return a.observe(r,{box:"border-box"}),()=>{a.unobserve(r)}},DK={passive:!0},MK=typeof window>"u"?!0:"onscrollend"in window,YHe=(e,t)=>{const r=e.scrollElement;if(!r)return;const n=e.targetWindow;if(!n)return;let i=0;const a=e.options.useScrollendEvent&&MK?()=>{}:qHe(n,()=>{t(i,!1)},e.options.isScrollingResetDelay),s=d=>()=>{const{horizontal:f,isRtl:p}=e.options;i=f?r.scrollLeft*(p&&-1||1):r.scrollTop,a(),t(i,d)},o=s(!0),l=s(!1);l(),r.addEventListener("scroll",o,DK);const c=e.options.useScrollendEvent&&MK;return c&&r.addEventListener("scrollend",l,DK),()=>{r.removeEventListener("scroll",o),c&&r.removeEventListener("scrollend",l)}},QHe=(e,t,r)=>{if(t!=null&&t.borderBoxSize){const n=t.borderBoxSize[0];if(n)return Math.round(n[r.options.horizontal?"inlineSize":"blockSize"])}return e[r.options.horizontal?"offsetWidth":"offsetHeight"]},JHe=(e,{adjustments:t=0,behavior:r},n)=>{var i,a;const s=e+t;(a=(i=n.scrollElement)==null?void 0:i.scrollTo)==null||a.call(i,{[n.options.horizontal?"left":"top"]:s,behavior:r})};class ZHe{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let r=null;const n=()=>r||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:r=new this.targetWindow.ResizeObserver(i=>{i.forEach(a=>{const s=()=>{this._measureElement(a.target,a)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(s):s()})}));return{disconnect:()=>{var i;(i=n())==null||i.disconnect(),r=null},observe:i=>{var a;return(a=n())==null?void 0:a.observe(i,{box:"border-box"})},unobserve:i=>{var a;return(a=n())==null?void 0:a.unobserve(i)}}})(),this.range=null,this.setOptions=r=>{Object.entries(r).forEach(([n,i])=>{typeof i>"u"&&delete r[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:GHe,rangeExtractor:KHe,onChange:()=>{},measureElement:QHe,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...r}},this.notify=r=>{var n,i;(i=(n=this.options).onChange)==null||i.call(n,this,r)},this.maybeNotify=P1(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),r=>{this.notify(r)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(r=>r()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var r;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.maybeNotify();return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((r=this.scrollElement)==null?void 0:r.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,a)=>{this.scrollAdjustments=0,this.scrollDirection=a?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=a,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(r,n)=>{const i=new Map,a=new Map;for(let s=n-1;s>=0;s--){const o=r[s];if(i.has(o.lane))continue;const l=a.get(o.lane);if(l==null||o.end>l.end?a.set(o.lane,o):o.end<l.end&&i.set(o.lane,!0),i.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((s,o)=>s.end===o.end?s.index-o.index:s.end-o.end)[0]:void 0},this.getMeasurementOptions=P1(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(r,n,i,a,s)=>(this.pendingMeasuredCacheIndexes=[],{count:r,paddingStart:n,scrollMargin:i,getItemKey:a,enabled:s}),{key:!1}),this.getMeasurements=P1(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:r,paddingStart:n,scrollMargin:i,getItemKey:a,enabled:s},o)=>{if(!s)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(d=>{this.itemSizeCache.set(d.key,d.size)}));const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const c=this.measurementsCache.slice(0,l);for(let d=l;d<r;d++){const f=a(d),p=this.options.lanes===1?c[d-1]:this.getFurthestMeasurement(c,d),m=p?p.end+this.options.gap:n+i,x=o.get(f),v=typeof x=="number"?x:this.options.estimateSize(d),b=m+v,w=p?p.lane:d%this.options.lanes;c[d]={index:d,start:m,size:v,end:b,key:f,lane:w}}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=P1(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(r,n,i,a)=>this.range=r.length>0&&n>0?eWe({measurements:r,outerSize:n,scrollOffset:i,lanes:a}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=P1(()=>{let r=null,n=null;const i=this.calculateRange();return i&&(r=i.startIndex,n=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,r,n]),[this.options.rangeExtractor,this.options.overscan,this.options.count,r,n]},(r,n,i,a,s)=>a===null||s===null?[]:r({startIndex:a,endIndex:s,overscan:n,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=r=>{const n=this.options.indexAttribute,i=r.getAttribute(n);return i?parseInt(i,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(r,n)=>{const i=this.indexFromElement(r),a=this.measurementsCache[i];if(!a)return;const s=a.key,o=this.elementsCache.get(s);o!==r&&(o&&this.observer.unobserve(o),this.observer.observe(r),this.elementsCache.set(s,r)),r.isConnected&&this.resizeItem(i,this.options.measureElement(r,n,this))},this.resizeItem=(r,n)=>{const i=this.measurementsCache[r];if(!i)return;const a=this.itemSizeCache.get(i.key)??i.size,s=n-a;s!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,s,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=s,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,n)),this.notify(!1))},this.measureElement=r=>{if(!r){this.elementsCache.forEach((n,i)=>{n.isConnected||(this.observer.unobserve(n),this.elementsCache.delete(i))});return}this._measureElement(r,void 0)},this.getVirtualItems=P1(()=>[this.getVirtualIndexes(),this.getMeasurements()],(r,n)=>{const i=[];for(let a=0,s=r.length;a<s;a++){const o=r[a],l=n[o];i.push(l)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=r=>{const n=this.getMeasurements();if(n.length!==0)return RK(n[Hce(0,n.length-1,i=>RK(n[i]).start,r)])},this.getOffsetForAlignment=(r,n,i=0)=>{const a=this.getSize(),s=this.getScrollOffset();n==="auto"&&(n=r>=s+a?"end":"start"),n==="center"?r+=(i-a)/2:n==="end"&&(r-=a);const o=this.getTotalSize()+this.options.scrollMargin-a;return Math.max(Math.min(o,r),0)},this.getOffsetForIndex=(r,n="auto")=>{r=Math.max(0,Math.min(r,this.options.count-1));const i=this.measurementsCache[r];if(!i)return;const a=this.getSize(),s=this.getScrollOffset();if(n==="auto")if(i.end>=s+a-this.options.scrollPaddingEnd)n="end";else if(i.start<=s+this.options.scrollPaddingStart)n="start";else return[s,n];const o=n==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,n,i.size),n]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(r,{align:n="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(r,n),{adjustments:void 0,behavior:i})},this.scrollToIndex=(r,{align:n="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),r=Math.max(0,Math.min(r,this.options.count-1));let a=0;const s=10,o=c=>{if(!this.targetWindow)return;const d=this.getOffsetForIndex(r,c);if(!d){console.warn("Failed to get offset for index:",r);return}const[f,p]=d;this._scrollToOffset(f,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{const m=this.getScrollOffset(),x=this.getOffsetForIndex(r,p);if(!x){console.warn("Failed to get offset for index:",r);return}VHe(x[0],m)||l(p)})},l=c=>{this.targetWindow&&(a++,a<s?this.targetWindow.requestAnimationFrame(()=>o(c)):console.warn(`Failed to scroll to index ${r} after ${s} attempts.`))};o(n)},this.scrollBy=(r,{behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+r,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var r;const n=this.getMeasurements();let i;if(n.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((r=n[n.length-1])==null?void 0:r.end)??0;else{const a=Array(this.options.lanes).fill(null);let s=n.length-1;for(;s>=0&&a.some(o=>o===null);){const o=n[s];a[o.lane]===null&&(a[o.lane]=o.end),s--}i=Math.max(...a.filter(o=>o!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(r,{adjustments:n,behavior:i})=>{this.options.scrollToFn(r,{behavior:i,adjustments:n},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(t)}}const Hce=(e,t,r,n)=>{for(;e<=t;){const i=(e+t)/2|0,a=r(i);if(a<n)e=i+1;else if(a>n)t=i-1;else return i}return e>0?e-1:0};function eWe({measurements:e,outerSize:t,scrollOffset:r,lanes:n}){const i=e.length-1,a=l=>e[l].start;if(e.length<=n)return{startIndex:0,endIndex:i};let s=Hce(0,i,a,r),o=s;if(n===1)for(;o<i&&e[o].end<r+t;)o++;else if(n>1){const l=Array(n).fill(0);for(;o<i&&l.some(d=>d<r+t);){const d=e[o];l[d.lane]=d.end,o++}const c=Array(n).fill(r+t);for(;s>=0&&c.some(d=>d>=r);){const d=e[s];c[d.lane]=d.start,s--}s=Math.max(0,s-s%n),o=Math.min(i,o+(n-1-o%n))}return{startIndex:s,endIndex:o}}const FK=typeof document<"u"?I.useLayoutEffect:I.useEffect;function tWe(e){const t=I.useReducer(()=>({}),{})[1],r={...e,onChange:(i,a)=>{var s;a?Tl.flushSync(t):t(),(s=e.onChange)==null||s.call(e,i,a)}},[n]=I.useState(()=>new ZHe(r));return n.setOptions(r),FK(()=>n._didMount(),[]),FK(()=>n._willUpdate()),n}function Wce(e){return tWe({observeElementRect:XHe,observeElementOffset:YHe,scrollToFn:JHe,...e})}const rWe=()=>{const[e,t]=I.useState(4);return I.useEffect(()=>{const r=()=>{const n=window.innerWidth;n<768?t(1):n<1024?t(2):n<1280?t(3):t(4)};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),e},Vce=({initialData:e,onSave:t,onCancel:r,isSaving:n})=>{var ce;const{vendors:i,addVendor:a}=Kr(),[s,o]=I.useState((e==null?void 0:e.name)||""),[l,c]=I.useState((e==null?void 0:e.manufacturerId)||""),[d,f]=I.useState((e==null?void 0:e.supplierId)||""),[p,m]=I.useState((e==null?void 0:e.productType)||dy[0]),[x,v]=I.useState((e==null?void 0:e.description)||""),[b,w]=I.useState((e==null?void 0:e.productLineUrl)||""),[_,C]=I.useState(((ce=e==null?void 0:e.variants)==null?void 0:ce.some(W=>W.isMaster))||!1),[N,R]=I.useState(null),[P,O]=I.useState(""),[D,M]=I.useState("upload"),[B,U]=I.useState((e==null?void 0:e.defaultImageUrl)||null),[H,Z]=I.useState(!1),[ee,V]=I.useState(""),[te,se]=I.useState(null);I.useEffect(()=>{e!=null&&e.defaultImageUrl&&e.defaultImageUrl.startsWith("http")&&(O(e.defaultImageUrl),M("url"))},[e==null?void 0:e.defaultImageUrl]),I.useEffect(()=>{if(l&&typeof l=="number"){const W=i.find(G=>G.id===l);W&&(W.defaultSupplierId&&f(W.defaultSupplierId),W.defaultProductType&&m(W.defaultProductType))}},[l,i]);const Q=W=>i.filter(G=>G.vendorType===W||G.vendorType==="Both").map(G=>({value:G.id,label:G.name})),X=W=>{var G;(G=W.target.files)!=null&&G[0]&&(R(W.target.files[0]),U(URL.createObjectURL(W.target.files[0])),O(""))},fe=(W,G)=>{V(W),se(G),Z(!0)},Se=async W=>{try{const G={...W,vendorType:te==="manufacturer"?"Manufacturer":"Supplier"};await a(G),Z(!1),se(null)}catch(G){console.error(G)}},Y=async W=>{if(W.preventDefault(),!s||!l){Re.error("Name and Manufacturer are required.");return}const G=new FormData;G.append("name",s),G.append("manufacturerId",String(l)),d&&G.append("supplierId",String(d)),G.append("productType",p),G.append("description",x),G.append("productLineUrl",b),G.append("hasMasterBoard",String(_)),D==="upload"&&N?G.append("image",N):D==="url"&&P&&G.append("defaultImageUrl",P),await t(G)};return u.jsxs("form",{onSubmit:Y,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"w-full aspect-video bg-background border-2 border-dashed border-border rounded-lg flex items-center justify-center relative overflow-hidden group",children:[B?u.jsx("img",{src:B,alt:"Preview",className:"w-full h-full object-cover"}):u.jsx("span",{className:"text-text-secondary text-sm",children:"Default Product Image"}),u.jsx("div",{className:"absolute inset-0 bg-scrim/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:D==="upload"?u.jsxs("label",{className:"cursor-pointer bg-primary-container text-on-primary-container px-4 py-2 rounded-full text-sm font-bold flex items-center gap-2 shadow-md hover:brightness-110 transition-all",children:[u.jsx(db,{size:16})," Change File",u.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:X})]}):null})]}),u.jsxs("div",{className:"flex gap-6 text-sm text-text-secondary",children:[u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"imgType",checked:D==="upload",onChange:()=>M("upload"),className:"form-radio h-4 w-4 text-primary bg-surface-container-low border-outline/50"}),"Upload File"]}),u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"imgType",checked:D==="url",onChange:()=>M("url"),className:"form-radio h-4 w-4 text-primary bg-surface-container-low border-outline/50"}),"Paste URL"]})]}),D==="url"&&u.jsx("input",{type:"text",placeholder:"https://manufacturer.com/image.jpg",value:P,onChange:W=>{O(W.target.value),U(W.target.value)},className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Product Line Name *"}),u.jsx("input",{type:"text",required:!0,value:s,onChange:W=>o(W.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",placeholder:"e.g. Forever Oak Collection"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Manufacturer"}),u.jsx(wS,{isClearable:!0,options:Q("Manufacturer"),value:l?Q("Manufacturer").find(W=>W.value===l):null,onChange:W=>c(W?W.value:""),onCreateOption:W=>fe(W,"manufacturer"),className:"react-select-container",classNamePrefix:"react-select",placeholder:"Select or Create Manufacturer..."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Preferred Supplier"}),u.jsx(wS,{isClearable:!0,options:Q("Supplier"),value:d?Q("Supplier").find(W=>W.value===d):null,onChange:W=>f(W?W.value:""),onCreateOption:W=>fe(W,"supplier"),className:"react-select-container",classNamePrefix:"react-select",placeholder:"Select or Create Supplier..."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Product Type *"}),u.jsx("select",{value:p,onChange:W=>m(W.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",children:dy.map(W=>u.jsx("option",{value:W,children:W},W))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Website URL"}),u.jsx("input",{type:"url",value:b,onChange:W=>w(W.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",placeholder:"https://manufacturer.com/product"})]}),u.jsxs("div",{className:"flex items-center gap-2 pt-4",children:[u.jsx("input",{type:"checkbox",id:"masterBoard",checked:_,onChange:W=>C(W.target.checked),className:"form-checkbox h-4 w-4 text-primary bg-surface-container-low border-outline/50 rounded-sm focus:ring-primary"}),u.jsx("label",{htmlFor:"masterBoard",className:"text-sm font-medium text-text-primary cursor-pointer",children:'Inventory includes a "Master Board" / Strap Set?'})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Description / Notes"}),u.jsx("textarea",{value:x,onChange:W=>v(W.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none h-24"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-outline/10",children:[u.jsx("button",{type:"button",onClick:r,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:n,className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Saving...":u.jsxs(u.Fragment,{children:[u.jsx(vs,{size:18})," Save Product Line"]})})]}),H&&u.jsx(hb,{isOpen:H,onClose:()=>Z(!1),initialVendorType:te==="manufacturer"?"Manufacturer":"Supplier",onSave:Se})]})},nWe=({productId:e,productType:t,manufacturerId:r,pricingSettings:n,onClose:i,onSuccess:a})=>{const{vendors:s,addVariantsBatch:o}=Kr(),[l,c]=I.useState({unitCost:"",retailPrice:"",cartonSize:"",wearLayer:"",thickness:"",uom:"SF",pricingUnit:"SF",sku:"",style:"",finish:"",hasSample:!1}),[d,f]=I.useState([]),[p,m]=I.useState([]),[x,v]=I.useState([]),[b,w]=I.useState([]);I.useEffect(()=>{N()},[]);const C=t==="Carpet"||t==="Sheet Product"?{color:"Colors / Styles",size:"Roll Widths",showPackaging:!1,showTechSpecs:!1}:t==="LVP"||t==="LVT"||t==="Laminate"||t==="Hardwood"?{color:"Colors",size:"Plank Sizes",showPackaging:!0,showTechSpecs:!0}:{color:"Colors",size:"Sizes",showPackaging:!0,showTechSpecs:!1},N=async()=>{try{const D=await Z7();w(D.map(M=>({label:M.value,value:M.value})))}catch(D){console.error(D)}},R=D=>{const M=parseFloat(D);let B=l.retailPrice;if(!isNaN(M)&&n&&M>0){const U=s.find(ee=>ee.id===r),H=yh(U,n,"Customer");B=vh(M,H.percentage,H.method).toFixed(2)}else D===""&&(B="");c({...l,unitCost:D,retailPrice:B})};I.useEffect(()=>{if(d.length===0&&p.length===0){v([]);return}const D=[],M=d.length>0?d:[{label:"",value:""}],B=p.length>0?p:[{label:"",value:""}];M.forEach(U=>{B.forEach(H=>{!U.value&&!H.value||D.push({name:U.value,size:H.value,...l,sku:l.sku,wearLayer:l.wearLayer,thickness:l.thickness,unitCost:parseFloat(l.unitCost)||0,retailPrice:parseFloat(l.retailPrice)||0,cartonSize:parseFloat(l.cartonSize)||0,hasSample:l.hasSample})})}),v(D)},[d,p,l]);const P=async()=>{if(x.length!==0)try{await o(e,x),a([]),i()}catch(D){console.error(D)}},O={control:D=>({...D,backgroundColor:"var(--color-surface)",borderColor:"var(--color-border)",color:"var(--color-text-primary)"}),menu:D=>({...D,backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)",zIndex:9999}),option:(D,M)=>({...D,backgroundColor:M.isFocused?"var(--color-background)":"var(--color-surface)",color:"var(--color-text-primary)",cursor:"pointer"}),multiValue:D=>({...D,backgroundColor:"var(--color-primary)",color:"var(--color-on-primary)"}),multiValueLabel:D=>({...D,color:"var(--color-on-primary)"}),multiValueRemove:D=>({...D,color:"var(--color-on-primary)",":hover":{backgroundColor:"var(--color-primary-hover)",color:"var(--color-on-primary)"}}),input:D=>({...D,color:"var(--color-text-primary)"})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 overflow-y-auto",children:u.jsxs("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-5xl flex flex-col max-h-[90vh]",children:[u.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-border",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-bold text-text-primary flex items-center gap-2",children:[u.jsx(N4,{size:24,className:"text-primary"}),"Variant Generator"]}),u.jsx("p",{className:"text-text-secondary text-sm mt-1",children:"Cross-multiply lists to create variants in bulk."})]}),u.jsx("button",{onClick:i,className:"text-text-secondary hover:text-text-primary transition-colors",children:u.jsx(Gr,{size:24})})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-6 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[u.jsxs("div",{className:"bg-background p-4 rounded-lg border border-border",children:[u.jsx("h3",{className:"font-semibold text-text-primary mb-4 text-sm uppercase tracking-wider",children:"1. Common Pricing & Specs"}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{className:"col-span-2",children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Common SKU (Optional)"}),u.jsx("input",{type:"text",value:l.sku,onChange:D=>c({...l,sku:D.target.value}),className:"w-full p-2 bg-surface border border-border rounded text-text-primary",placeholder:"e.g. Base SKU"})]}),C.showTechSpecs&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Wear Layer"}),u.jsx("input",{type:"text",value:l.wearLayer,onChange:D=>c({...l,wearLayer:D.target.value}),className:"w-full p-2 bg-surface border border-border rounded text-text-primary",placeholder:"20mil"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Thickness"}),u.jsx("input",{type:"text",value:l.thickness,onChange:D=>c({...l,thickness:D.target.value}),className:"w-full p-2 bg-surface border border-border rounded text-text-primary",placeholder:"5mm"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Unit Cost"}),u.jsx("input",{type:"number",step:"0.01",value:l.unitCost,onChange:D=>R(D.target.value),className:"w-full p-2 bg-surface border border-border rounded text-text-primary"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Retail Price"}),u.jsx("input",{type:"number",step:"0.01",value:l.retailPrice,onChange:D=>c({...l,retailPrice:D.target.value}),className:"w-full p-2 bg-surface border border-border rounded text-text-primary"})]}),u.jsxs("div",{className:"col-span-2",children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Pricing Unit"}),u.jsx("select",{value:l.pricingUnit,onChange:D=>c({...l,pricingUnit:D.target.value}),className:"w-full p-2 bg-surface border border-border rounded text-text-primary",children:uh.map(D=>u.jsx("option",{value:D,children:D},D))})]}),C.showPackaging&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"col-span-2 border-t border-border my-1"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Carton Size"}),u.jsx("input",{type:"number",step:"0.01",value:l.cartonSize,onChange:D=>c({...l,cartonSize:D.target.value}),className:"w-full p-2 bg-surface border border-border rounded text-text-primary"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Packaging UOM"}),u.jsx("select",{value:l.uom,onChange:D=>c({...l,uom:D.target.value}),className:"w-full p-2 bg-surface border border-border rounded text-text-primary",children:uh.map(D=>u.jsx("option",{value:D,children:D},D))})]})]}),u.jsx("div",{className:"col-span-2",children:u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:l.hasSample,onChange:D=>c({...l,hasSample:D.target.checked}),className:"rounded border-border bg-surface text-primary focus:ring-primary"}),u.jsx("span",{className:"text-sm text-text-primary",children:"We carry samples for these"})]})})]})]}),u.jsxs("div",{className:"bg-background p-4 rounded-lg border border-border",children:[u.jsx("h3",{className:"font-semibold text-text-primary mb-4 text-sm uppercase tracking-wider",children:"2. Define Lists"}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:C.color}),u.jsx("p",{className:"text-xs text-text-secondary mb-2",children:"Type a name and press Enter"}),u.jsx(wS,{isMulti:!0,placeholder:`e.g. ${C.color.includes("Style")?"Berber, Plush...":"Oak, Maple..."}`,styles:O,onChange:D=>f(D),value:d})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:C.size}),u.jsx("p",{className:"text-xs text-text-secondary mb-2",children:"Select existing or type new"}),u.jsx(wS,{isMulti:!0,placeholder:`e.g. ${C.size.includes("Width")?"12', 15'...":"12x24, Mosaic..."}`,options:b,styles:O,onChange:D=>m(D),value:p})]})]})]}),u.jsxs("div",{className:"lg:col-span-2 flex flex-col h-full",children:[u.jsxs("h3",{className:"font-semibold text-text-primary mb-4 text-sm uppercase tracking-wider flex justify-between items-center",children:[u.jsxs("span",{children:["3. Preview (",x.length," items)"]}),x.length>0&&u.jsx("span",{className:"text-xs text-primary font-normal",children:"Ready to generate"})]}),u.jsx("div",{className:"flex-1 bg-background border border-border rounded-lg overflow-hidden flex flex-col",children:x.length===0?u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-text-secondary p-8 text-center opacity-50",children:[u.jsx(Y0,{size:48,className:"mb-4"}),u.jsx("p",{className:"text-lg",children:"Enter Data & Lists to see preview"})]}):u.jsx("div",{className:"overflow-auto flex-1",children:u.jsxs("table",{className:"w-full text-left border-collapse",children:[u.jsx("thead",{className:"bg-surface sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-3 text-xs font-medium text-text-secondary border-b border-border",children:C.color}),u.jsx("th",{className:"p-3 text-xs font-medium text-text-secondary border-b border-border",children:"SKU"}),u.jsx("th",{className:"p-3 text-xs font-medium text-text-secondary border-b border-border",children:C.size}),u.jsx("th",{className:"p-3 text-xs font-medium text-text-secondary border-b border-border text-right",children:"Cost"}),u.jsx("th",{className:"p-3 text-xs font-medium text-text-secondary border-b border-border text-right",children:"Retail"}),C.showPackaging&&u.jsx("th",{className:"p-3 text-xs font-medium text-text-secondary border-b border-border",children:"Carton"})]})}),u.jsx("tbody",{children:x.map((D,M)=>u.jsxs("tr",{className:"border-b border-border hover:bg-surface/50",children:[u.jsx("td",{className:"p-3 text-sm text-text-primary font-medium",children:D.name||u.jsx("span",{className:"italic text-text-secondary",children:"--"})}),u.jsx("td",{className:"p-3 text-sm text-text-secondary",children:D.sku||u.jsx("span",{className:"italic text-text-secondary",children:"--"})}),u.jsx("td",{className:"p-3 text-sm text-text-primary",children:D.size||u.jsx("span",{className:"italic text-text-secondary",children:"--"})}),u.jsxs("td",{className:"p-3 text-sm text-text-primary text-right",children:["$",D.unitCost.toFixed(2)," / ",D.pricingUnit]}),u.jsxs("td",{className:"p-3 text-sm text-text-primary text-right",children:["$",D.retailPrice.toFixed(2)," / ",D.pricingUnit]}),C.showPackaging&&u.jsxs("td",{className:"p-3 text-sm text-text-primary",children:[D.cartonSize," ",D.uom]})]},M))})]})})})]})]}),u.jsxs("div",{className:"p-6 border-t border-border flex justify-end gap-3 bg-surface",children:[u.jsx("button",{onClick:i,className:"px-4 py-2 text-text-primary hover:bg-background rounded-md transition-colors",children:"Cancel"}),u.jsxs("button",{onClick:P,disabled:x.length===0,className:"px-6 py-2 bg-primary text-on-primary font-medium rounded-md hover:bg-primary-hover disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[u.jsx(Jl,{size:18}),"Generate ",x.length," Variants"]})]})]})})},iWe=({onClose:e,onSave:t,currentPreview:r})=>{const[n,i]=I.useState(null),[a,s]=I.useState(""),[o,l]=I.useState(r||null),c=I.useRef(null),d=m=>{var v;const x=(v=m.target.files)==null?void 0:v[0];x&&(i(x),l(URL.createObjectURL(x)),s(""))},f=m=>{s(m),l(m),i(null)},p=()=>{if(!n&&!a){Re.error("Please select a file or enter a URL");return}t(n,a),e()};return u.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 p-4",children:u.jsxs("div",{className:"bg-surface w-full max-w-md rounded-lg shadow-xl overflow-hidden border border-border animate-in fade-in zoom-in-95 duration-200",children:[u.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border bg-background",children:[u.jsx("h3",{className:"font-bold text-text-primary",children:"Update Variant Image"}),u.jsx("button",{onClick:e,className:"text-text-secondary hover:text-text-primary",children:u.jsx(Gr,{size:20})})]}),u.jsxs("div",{className:"p-6",children:[u.jsx("div",{className:"mb-6 flex justify-center",children:u.jsx("div",{className:"w-32 h-32 bg-background border border-border rounded-lg overflow-hidden flex items-center justify-center shadow-inner",children:o?u.jsx("img",{src:o,alt:"Preview",className:"w-full h-full object-cover"}):u.jsx(Jd,{className:"text-border",size:48})})}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("input",{type:"file",ref:c,accept:"image/*",onChange:d,className:"hidden"}),u.jsxs("button",{onClick:()=>{var m;return(m=c.current)==null?void 0:m.click()},className:"w-full py-4 border border-dashed border-border hover:border-primary rounded-lg flex items-center justify-center gap-3 text-text-secondary hover:text-primary hover:bg-surface transition-colors",children:[u.jsx(db,{size:20}),u.jsxs("div",{className:"text-left",children:[u.jsx("p",{className:"text-sm font-medium",children:n?"Change Selected File":"Click to Upload File"}),n&&u.jsx("p",{className:"text-xs text-primary",children:n.name})]})]}),u.jsxs("div",{className:"relative flex items-center py-2",children:[u.jsx("div",{className:"flex-grow border-t border-border"}),u.jsx("span",{className:"flex-shrink-0 mx-4 text-xs text-text-tertiary uppercase",children:"OR Paste URL"}),u.jsx("div",{className:"flex-grow border-t border-border"})]}),u.jsx("input",{type:"text",placeholder:"https://example.com/image.jpg",value:a,onChange:m=>f(m.target.value),className:"w-full p-2 bg-background border border-border rounded focus:border-primary focus:outline-none text-text-primary text-sm"})]})]}),u.jsxs("div",{className:"p-4 border-t border-border bg-background flex justify-end gap-3",children:[u.jsx("button",{onClick:e,className:"px-4 py-2 text-text-secondary hover:text-text-primary text-sm",children:"Cancel"}),u.jsxs("button",{onClick:p,disabled:!n&&!a,className:"px-6 py-2 bg-primary text-on-primary rounded text-sm font-medium hover:bg-primary-hover disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[u.jsx(nf,{size:16})," Apply Image"]})]})]})})},I9=({isOpen:e,onClose:t,product:r})=>{const{products:n,vendors:i,updateProduct:a,deleteProduct:s,addVariant:o,updateVariant:l}=Kr(),{batchUpdateVariants:c,duplicateProduct:d}=_7(),f=n.find(ye=>ye.id===r.id)||r,[p,m]=I.useState(!1),[x,v]=I.useState(!1),[b,w]=I.useState(!1),[_,C]=I.useState(null),[N,R]=I.useState({}),[P,O]=I.useState(!1),[D,M]=I.useState(new Set),[B,U]=I.useState(new Set(["unitCost","retailPrice"])),[H,Z]=I.useState(!1),[ee,V]=I.useState([]),[te,se]=I.useState(!1),[Q,X]=I.useState({file:null,url:null,preview:null}),[fe,Se]=I.useState(null),Y=I.useRef(null),[ce,W]=I.useState(null),G=ja(),{mutate:ie}=Ir({mutationFn:Fse,onSuccess:()=>{Re.success("Variant deleted."),G.invalidateQueries({queryKey:["products"]}),G.invalidateQueries({queryKey:["discontinuedProducts"]})},onError:ye=>{Re.error(ye.message||"Failed to delete variant.")}}),Ce=Ile.useReactToPrint({contentRef:Y,documentTitle:`Label_${f.name}`,onAfterPrint:()=>W(null)});I.useEffect(()=>{e&&Lx().then(Se).catch(console.error)},[e]),I.useEffect(()=>{if(ce&&Y.current){const ye=setTimeout(()=>{Ce()},500);return()=>clearTimeout(ye)}},[ce,Ce]);const ne=(()=>{const ye=f.productType;return ye==="Carpet"||ye==="Sheet Product"?{color:"Color / Style",size:"Width",showPackaging:!1,showTechSpecs:!1}:ye==="LVP"||ye==="LVT"||ye==="Laminate"||ye==="Hardwood"?{color:"Color",size:"Plank Size",showPackaging:!0,showTechSpecs:!0}:{color:"Color",size:"Size",showPackaging:!0,showTechSpecs:!1}})();if(!e)return null;const ge=ye=>ds(ye),we=async ye=>{v(!0);try{await a(f.id,ye),m(!1)}catch(Me){console.error(Me)}finally{v(!1)}},q=async()=>{if(confirm(`Delete "${f.name}" and ALL its variants?`))try{await s(f.id),t()}catch(ye){console.error(ye)}},Ae=async()=>{const ye=!f.isDiscontinued,Me=ye?"Discontinue":"Restore";if(confirm(`Are you sure you want to ${Me} this product line?`))try{const qe=new FormData;qe.append("isDiscontinued",String(ye)),await a(f.id,qe),Re.success(`Product ${ye?"discontinued":"restored"}.`),ye&&t()}catch(qe){console.error(qe),Re.error(`Failed to ${Me.toLowerCase()} product.`)}},Pe=async()=>{if(confirm(`Create a copy of "${f.name}"?`))try{await d.mutateAsync(f.id),Re.success("Product line duplicated."),t()}catch(ye){console.error(ye),Re.error("Failed to duplicate product.")}},He=ye=>{M(Me=>{const qe=new Set(Me);return qe.has(ye)?qe.delete(ye):qe.add(ye),qe})},je=()=>{const ye=f.variants.filter(qe=>qe.id!==_).map(qe=>qe.id),Me=ye.every(qe=>D.has(qe));M(Me?new Set:new Set(ye))},$e=ye=>{U(Me=>{const qe=new Set(Me);return qe.has(ye)?qe.delete(ye):qe.add(ye),qe})},Ze=(ye,Me)=>{let qe=[];if(ye==="product")qe=[f];else if(ye==="variant"&&Me){const it=f.variants.find(ze=>ze.id===Me);it&&(qe=[{...f,variants:[it]}])}else ye==="batch"&&(qe=[{...f,variants:f.variants.filter(it=>D.has(it.id))}]);qe.length>0&&(V(qe),Z(!0))},lt=async ye=>{if(ye)try{const Me=new FormData;Me.append("defaultImageUrl",ye),await a(f.id,Me),Re.success("Main product image updated!")}catch(Me){console.error(Me),Re.error("Failed to update main image.")}},kt=()=>{const ye="NEW_"+Date.now();C(ye),O(!1),M(new Set),R({name:"",size:"",sku:"",unitCost:0,retailPrice:0,wearLayer:"",thickness:"",hasSample:!1,cartonSize:0,uom:"SF",pricingUnit:"SF"}),X({file:null,url:null,preview:null})},ht=ye=>{R({name:ye.name,size:ye.size,sku:ye.sku,unitCost:ye.unitCost,retailPrice:ye.retailPrice,wearLayer:ye.wearLayer,thickness:ye.thickness,hasSample:ye.hasSample,cartonSize:ye.cartonSize,uom:ye.uom,pricingUnit:ye.pricingUnit}),C(ye.id);const Me=ge(ye.imageUrl);X({file:null,url:null,preview:Me||null}),O(!1),M(new Set)},_r=()=>{C(null),R({}),X({file:null,url:null,preview:null}),M(new Set)},er=ye=>{confirm("Delete this variant?")&&ie(ye)},ct=ye=>{const Me=parseFloat(ye);let qe=N.retailPrice||0;if(!isNaN(Me)&&fe){const it=i.find(_e=>_e.id===f.manufacturerId),ze=yh(it,fe,"Customer");qe=Number(vh(Me,ze.percentage,ze.method).toFixed(2))}else ye===""&&(qe=N.retailPrice);R(it=>({...it,unitCost:Me,retailPrice:qe}))},Gt=(ye,Me)=>{let qe=null;ye?qe=URL.createObjectURL(ye):Me&&(qe=Me),X({file:ye,url:Me,preview:qe})},Lt=async()=>{if(!N.name)return Re.error("Name is required.");const ye=new FormData;ye.append("name",N.name),N.size&&ye.append("size",N.size),N.sku&&ye.append("sku",N.sku),N.wearLayer&&ye.append("wearLayer",N.wearLayer),N.thickness&&ye.append("thickness",N.thickness),N.unitCost!==void 0&&ye.append("unitCost",String(N.unitCost)),N.retailPrice!==void 0&&ye.append("retailPrice",String(N.retailPrice)),N.hasSample!==void 0&&ye.append("hasSample",String(N.hasSample)),N.cartonSize!==void 0&&ye.append("cartonSize",String(N.cartonSize)),N.uom&&ye.append("uom",N.uom),N.pricingUnit&&ye.append("pricingUnit",N.pricingUnit),Q.file?ye.append("image",Q.file):Q.url&&ye.append("imageUrl",Q.url);try{if(_&&!_.startsWith("NEW_"))if(await l(_,ye),P&&D.size>0){const Me={},qe=it=>it===void 0?null:it;B.has("size")&&(Me.size=qe(N.size)),B.has("sku")&&(Me.sku=qe(N.sku)),B.has("wearLayer")&&(Me.wearLayer=qe(N.wearLayer)),B.has("thickness")&&(Me.thickness=qe(N.thickness)),B.has("unitCost")&&(Me.unitCost=qe(N.unitCost)),B.has("retailPrice")&&(Me.retailPrice=qe(N.retailPrice)),B.has("cartonSize")&&(Me.cartonSize=qe(N.cartonSize)),B.has("uom")&&(Me.uom=qe(N.uom)),B.has("pricingUnit")&&(Me.pricingUnit=qe(N.pricingUnit)),Object.keys(Me).length>0&&(await c.mutateAsync({ids:Array.from(D),updates:Me}),Re.success(`Updated source + ${D.size} other variants!`))}else Re.success("Variant updated.");else await o(f.id,ye),Re.success("Variant created.");_r(),M(new Set)}catch(Me){console.error(Me),Re.error(Me.message||"Failed to save.")}},dr=ye=>{Re.success(`${ye.length} variants created!`),w(!1)},Ht=(ye,Me,qe)=>{if(!_||!P)return u.jsx("th",{className:`p-3 ${qe||""}`,children:ye});const it=B.has(Me);return u.jsx("th",{className:`p-3 ${qe||""}`,children:u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("span",{children:ye}),u.jsxs("label",{className:"flex items-center gap-1 text-[10px] font-normal cursor-pointer bg-black/5 px-1 rounded hover:bg-black/10 w-fit",children:[u.jsx("input",{type:"checkbox",className:"w-3 h-3 accent-primary",checked:it,onChange:()=>$e(Me)})," Copy"]})]})})};return u.jsxs("div",{className:"fixed inset-0 bg-scrim/80 flex items-center justify-center z-50 p-0 lg:p-4",children:[u.jsx("div",{style:{position:"absolute",top:-1e4,left:-1e4},children:u.jsx("div",{ref:Y,className:"p-4 w-[3.5in] h-[2in]",children:ce&&u.jsx(Ale,{data:ce.data,qrUrl:ce.qrUrl})})}),u.jsxs("div",{className:"bg-surface-container-high w-full h-full lg:max-w-[95vw] xl:max-w-7xl lg:max-h-[90vh] lg:rounded-2xl shadow-2xl flex flex-col overflow-hidden border-0 lg:border border-outline/20",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex items-center",children:[u.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-surface-container-highest text-text-secondary hover:text-text-primary lg:hidden mr-2",children:u.jsx(rf,{size:24})}),u.jsxs("h2",{className:"text-xl font-bold text-text-primary flex items-center gap-2 flex-grow",children:[p?"Edit Product Line":f.name,!p&&f.isDiscontinued&&u.jsx("span",{className:"text-xs font-bold bg-error-container text-on-error-container px-2 py-0.5 rounded-full",children:"DISCONTINUED"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[p?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:Ae,className:`p-2 rounded border transition-colors ${f.isDiscontinued?"bg-tertiary-container text-on-tertiary-container border-tertiary-container/50":"bg-surface-container-highest hover:bg-error-container/50 text-text-secondary hover:text-error border-outline/20"}`,title:f.isDiscontinued?"Restore to Active Library":"Archive / Discontinue",children:f.isDiscontinued?u.jsx($x,{size:20}):u.jsx(hS,{size:20})}),u.jsx("button",{onClick:Pe,className:"p-2 hover:bg-surface-container-highest rounded-full text-text-secondary hover:text-primary",title:"Duplicate Product Line",children:u.jsx(S8e,{size:20})}),u.jsx("button",{onClick:q,className:"p-2 hover:bg-surface-container-highest rounded-full text-text-secondary hover:text-error",title:"Permanently Delete",children:u.jsx(Bs,{size:24})})]}):u.jsx("button",{onClick:()=>m(!0),className:"p-2 hover:bg-surface-container-highest rounded-full text-text-secondary hover:text-primary",children:u.jsx(tx,{size:24})}),u.jsx("button",{onClick:t,className:"p-2 hover:bg-surface-container-highest rounded-full text-text-secondary hover:text-text-primary hidden lg:block",children:u.jsx(Gr,{size:24})})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:p?u.jsx(Vce,{initialData:f,onSave:we,onCancel:()=>m(!1),isSaving:x}):u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[u.jsx("div",{className:"w-48 h-48 bg-surface-container rounded-lg flex-shrink-0 overflow-hidden border border-outline/20",children:f.defaultImageUrl?u.jsx("img",{src:ge(f.defaultImageUrl),className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center text-text-tertiary",children:u.jsx(Jd,{size:48,className:"opacity-50"})})}),u.jsxs("div",{className:"flex-1 space-y-2",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("span",{className:"block text-text-secondary text-xs uppercase tracking-wide",children:"Manufacturer"}),u.jsx("span",{className:"font-medium text-text-primary",children:f.manufacturerName})]}),u.jsx("div",{className:"flex gap-2",children:u.jsx("button",{onClick:()=>Ze("product"),className:"p-2 bg-surface-container-highest hover:bg-surface-variant/30 border border-outline/20 rounded-full text-text-secondary",title:"Print Line Label",children:u.jsx(eT,{size:16})})})]}),u.jsx("p",{className:"text-text-primary mt-1 text-sm",children:f.description||"No description provided."})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-end mb-4",children:[u.jsx("h3",{className:"text-lg font-bold text-text-primary",children:"Product Variants"}),!_&&u.jsxs("div",{className:"flex gap-2",children:[D.size>0&&u.jsxs("button",{onClick:()=>Ze("batch"),className:"text-sm flex items-center gap-2 bg-primary text-on-primary px-3 py-1.5 rounded-full font-bold animate-in fade-in",children:[u.jsx(cy,{size:16})," Print Labels (",D.size,")"]}),u.jsx("div",{className:"w-px h-6 bg-outline/20 mx-2"}),u.jsxs("button",{onClick:()=>w(!0),className:"text-sm flex items-center gap-2 bg-surface-container-highest border border-primary-container text-primary px-3 py-1.5 rounded-full",children:[u.jsx(N4,{size:16})," Batch Generator"]}),u.jsxs("button",{onClick:kt,className:"text-sm flex items-center gap-2 bg-secondary-container text-on-secondary-container px-3 py-1.5 rounded-full",children:[u.jsx(Jl,{size:16})," Add Variant"]})]})]}),u.jsx("div",{className:"bg-surface-container rounded-lg border border-outline/10 overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm text-left whitespace-nowrap",children:[u.jsx("thead",{className:"bg-surface-container-highest text-text-secondary border-b border-outline/10",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-3 w-12 text-center",children:"Img"}),u.jsx("th",{className:"p-3",children:ne.color}),Ht(ne.size,"size"),ne.showTechSpecs&&Ht("Wear Layer","wearLayer"),ne.showTechSpecs&&Ht("Thickness","thickness"),Ht("SKU","sku"),ne.showPackaging&&Ht("Carton Qty","cartonSize"),ne.showPackaging&&Ht("Unit","uom"),Ht("Cost","unitCost","text-right"),Ht("Pricing Unit","pricingUnit","text-center w-24"),Ht("Retail","retailPrice","text-right"),u.jsx("th",{className:"p-3 text-center",children:"Sample?"}),u.jsx("th",{className:"p-3 text-center",children:"Status"}),u.jsx("th",{className:"p-3 w-24 text-center",children:P?u.jsxs("div",{className:"flex justify-center items-center gap-1",children:[u.jsx("button",{onClick:je,className:"p-1 rounded-md text-primary hover:bg-primary-container/30",title:"Select All",children:u.jsx(D7,{size:18})}),u.jsx("button",{onClick:()=>{O(!1),M(new Set)},className:"p-1 rounded-md text-text-secondary hover:text-error hover:bg-error-container/30",title:"Cancel Selection",children:u.jsx(Gr,{size:18})})]}):u.jsx("button",{onClick:()=>O(!0),className:"p-1 rounded-md text-text-secondary hover:text-primary transition-colors",title:"Select Multiple",children:u.jsx(j8e,{size:18})})}),u.jsx("th",{className:"p-3 w-20 text-center",children:"Actions"})]})}),u.jsxs("tbody",{className:"divide-y divide-outline/10",children:[f.variants.map(ye=>_===ye.id?u.jsxs("tr",{className:"bg-primary/5 border-l-4 border-primary",children:[u.jsx("td",{className:"p-2 text-center",children:u.jsx("button",{type:"button",onClick:()=>se(!0),className:"w-8 h-8 rounded border bg-white flex items-center justify-center",children:u.jsx(Jd,{size:14})})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",placeholder:ne.color,className:"w-full p-1 border border-primary rounded-md font-bold bg-surface-container",value:N.name||"",onChange:Me=>R({...N,name:Me.target.value})})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",placeholder:ne.size,className:"w-full p-1 border border-primary rounded-md bg-surface-container",value:N.size||"",onChange:Me=>R({...N,size:Me.target.value})})}),ne.showTechSpecs&&u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",className:"w-full p-1 border border-primary rounded-md bg-surface-container",value:N.wearLayer||"",onChange:Me=>R({...N,wearLayer:Me.target.value}),placeholder:"20mil"})}),ne.showTechSpecs&&u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",className:"w-full p-1 border border-primary rounded-md bg-surface-container",value:N.thickness||"",onChange:Me=>R({...N,thickness:Me.target.value}),placeholder:"5mm"})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",className:"w-full p-1 border border-primary rounded-md bg-surface-container",value:N.sku||"",onChange:Me=>R({...N,sku:Me.target.value})})}),ne.showPackaging&&u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"number",className:"w-20 p-1 border border-primary rounded-md bg-surface-container",value:N.cartonSize||"",onChange:Me=>R({...N,cartonSize:parseFloat(Me.target.value)}),placeholder:"Qty"})}),ne.showPackaging&&u.jsx("td",{className:"p-2",children:u.jsx("select",{className:"p-1 border border-primary rounded-md text-xs bg-surface-container w-full",value:N.uom||"SF",onChange:Me=>R({...N,uom:Me.target.value}),children:uh.map(Me=>u.jsx("option",{value:Me,children:Me},Me))})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"number",className:"w-full p-1 border border-primary rounded-md text-right bg-surface-container",value:N.unitCost||"",onChange:Me=>ct(costInput)})}),u.jsx("td",{className:"p-2",children:u.jsx("select",{className:"w-full p-1 border border-primary rounded-md text-xs bg-surface-container",value:N.pricingUnit||"SF",onChange:Me=>R({...N,pricingUnit:Me.target.value}),children:uh.map(Me=>u.jsx("option",{value:Me,children:Me},Me))})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"number",className:"w-full p-1 border border-primary rounded-md text-right bg-surface-container",value:N.retailPrice||"",onChange:Me=>R({...N,retailPrice:Number(Me.target.value)})})}),u.jsx("td",{className:"p-2 text-center",children:u.jsx("input",{type:"checkbox",className:"form-checkbox h-4 w-4 text-primary bg-surface-container-low border-outline/50 rounded",checked:N.hasSample??ye.hasSample,onChange:Me=>R({...N,hasSample:Me.target.checked})})}),u.jsx("td",{className:"p-2 text-center text-xs font-bold text-primary",children:"EDITING"}),u.jsx("td",{className:"p-2 text-center",children:u.jsx("button",{type:"button",onClick:()=>{O(!P)},className:`p-1.5 rounded-md ${P?"bg-secondary-container text-on-secondary-container":"text-text-tertiary"}`,title:"Copy to selected",children:u.jsx(P7,{size:16})})}),u.jsxs("td",{className:"p-2 flex justify-center items-center gap-2",children:[u.jsx("button",{type:"button",onClick:Lt,className:"p-1.5 rounded-md bg-tertiary text-on-tertiary",children:u.jsx(vs,{size:16})}),u.jsx("button",{type:"button",onClick:_r,className:"p-1.5 rounded-md text-error",children:u.jsx(Gr,{size:16})})]})]},ye.id):u.jsxs("tr",{className:`hover:bg-surface-container-highest transition-colors ${D.has(ye.id)?"bg-primary-container/30":""}`,children:[u.jsx("td",{className:"p-2 text-center",children:u.jsx("div",{className:"w-10 h-10 bg-surface-variant rounded overflow-hidden mx-auto border border-outline/10",children:ye.imageUrl?u.jsx("img",{src:ge(ye.imageUrl),className:"w-full h-full object-cover"}):null})}),u.jsx("td",{className:"p-3 font-medium text-text-primary",children:ye.name}),u.jsx("td",{className:"p-3 text-text-secondary",children:ye.size||"-"}),ne.showTechSpecs&&u.jsx("td",{className:"p-3 text-text-secondary",children:ye.wearLayer||"-"}),ne.showTechSpecs&&u.jsx("td",{className:"p-3 text-text-secondary",children:ye.thickness||"-"}),u.jsx("td",{className:"p-3 text-text-secondary",children:ye.sku||"-"}),ne.showPackaging&&u.jsx("td",{className:"p-3 text-text-secondary text-xs font-mono",children:ye.cartonSize||"-"}),ne.showPackaging&&u.jsx("td",{className:"p-3 text-text-secondary text-xs font-mono",children:ye.uom||"-"}),u.jsx("td",{className:"p-3 text-right text-text-secondary",children:ye.unitCost?`$${Number(ye.unitCost).toFixed(2)}`:"-"}),u.jsxs("td",{className:"p-3 text-center text-text-secondary text-xs font-mono bg-black/5 rounded mx-1",children:["/",ye.pricingUnit||ye.uom||"Unit"]}),u.jsx("td",{className:"p-3 text-right text-text-secondary font-medium",children:ye.retailPrice?`$${Number(ye.retailPrice).toFixed(2)}`:"-"}),u.jsx("td",{className:"p-3 text-center",children:u.jsx("div",{className:`w-3 h-3 rounded-full mx-auto ${ye.hasSample?"bg-green-500":"bg-gray-300"}`})}),u.jsx("td",{className:"p-3 text-center text-xs text-text-tertiary",children:ye.hasSample?"Available":"Order Only"}),u.jsx("td",{className:"p-3 text-center",children:P?u.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-primary cursor-pointer",checked:D.has(ye.id),onChange:()=>He(ye.id)}):u.jsx("button",{type:"button",onClick:()=>Ze("variant",ye.id),className:"text-text-secondary hover:text-primary",children:u.jsx(eT,{size:18})})}),u.jsxs("td",{className:"p-3 flex justify-center gap-2 opacity-50 hover:opacity-100 transition-opacity",children:[ye.imageUrl&&u.jsx("button",{type:"button",onClick:()=>lt(ye.imageUrl),className:"text-text-secondary hover:text-yellow-500",title:"Set as Main Image",children:u.jsx(yoe,{size:16})}),u.jsx("button",{type:"button",onClick:()=>ht(ye),className:"text-text-secondary hover:text-primary",children:u.jsx(tx,{size:16})}),u.jsx("button",{type:"button",onClick:()=>er(ye.id),className:"text-text-secondary hover:text-red-500",children:u.jsx(Bs,{size:16})})]})]},ye.id)),(_==null?void 0:_.startsWith("NEW_"))&&u.jsxs("tr",{className:"bg-primary/5 animate-in fade-in",children:[u.jsx("td",{className:"p-2",children:u.jsx("button",{type:"button",onClick:()=>se(!0),className:"w-10 h-10 border rounded-md flex items-center justify-center bg-white",children:u.jsx(Jd,{size:14})})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{autoFocus:!0,type:"text",className:"w-full p-1 border rounded-md bg-surface-container",placeholder:ne.color,value:N.name||"",onChange:ye=>R({...N,name:ye.target.value})})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",className:"w-full p-1 border rounded-md bg-surface-container",placeholder:ne.size,value:N.size||"",onChange:ye=>R({...N,size:ye.target.value})})}),ne.showTechSpecs&&u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",className:"w-full p-1 border rounded-md bg-surface-container",value:N.wearLayer||"",onChange:ye=>R({...N,wearLayer:ye.target.value}),placeholder:"Wear Layer"})}),ne.showTechSpecs&&u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",className:"w-full p-1 border rounded-md bg-surface-container",value:N.thickness||"",onChange:ye=>R({...N,thickness:ye.target.value}),placeholder:"Thickness"})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",className:"w-full p-1 border rounded-md bg-surface-container",value:N.sku||"",onChange:ye=>R({...N,sku:ye.target.value})})}),ne.showPackaging&&u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"number",className:"w-20 p-1 border rounded-md bg-surface-container",value:N.cartonSize||"",onChange:ye=>R({...N,cartonSize:parseFloat(ye.target.value)}),placeholder:"Qty"})}),ne.showPackaging&&u.jsx("td",{className:"p-2",children:u.jsx("select",{className:"w-full p-1 border rounded-md text-xs bg-surface-container",value:N.uom||"SF",onChange:ye=>R({...N,uom:ye.target.value}),children:uh.map(ye=>u.jsx("option",{value:ye,children:ye},ye))})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"number",className:"w-full p-1 border rounded-md text-right bg-surface-container",value:N.unitCost||"",onChange:ye=>ct(costInput)})}),u.jsx("td",{className:"p-2",children:u.jsx("select",{className:"w-full p-1 border border-primary rounded-md text-xs bg-surface-container",value:N.pricingUnit||"SF",onChange:ye=>R({...N,pricingUnit:ye.target.value}),children:uh.map(ye=>u.jsx("option",{value:ye,children:ye},ye))})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"number",className:"w-full p-1 border border-primary rounded-md text-right bg-surface-container",value:N.retailPrice||"",onChange:ye=>R({...N,retailPrice:Number(ye.target.value)})})}),u.jsx("td",{className:"p-2 text-center",children:u.jsx("input",{type:"checkbox",className:"form-checkbox h-4 w-4 text-primary bg-surface-container-low border-outline/50 rounded",checked:N.hasSample??!0,onChange:ye=>R({...N,hasSample:ye.target.checked})})}),u.jsx("td",{className:"p-2 text-center text-xs font-bold text-green-600",children:"NEW"}),u.jsxs("td",{colSpan:2,className:"p-2 flex justify-center gap-1",children:[u.jsx("button",{type:"button",onClick:Lt,className:"p-1 text-tertiary",children:u.jsx(vs,{size:18})}),u.jsx("button",{type:"button",onClick:_r,className:"p-1 text-error",children:u.jsx(Gr,{size:18})})]})]})]})]})})]})]})}),b&&u.jsx(nWe,{productId:f.id,productType:f.productType,manufacturerId:f.manufacturerId,pricingSettings:fe,onClose:()=>w(!1),onSuccess:dr}),te&&u.jsx(iWe,{currentPreview:Q.preview,onClose:()=>se(!1),onSave:Gt}),u.jsx(Ole,{isOpen:H,onClose:()=>Z(!1),selectedProducts:ee})]})]})},qce=({product:e,pricingSettings:t,onClick:r,showDiscontinuedStyle:n,isSelected:i,isSelectionMode:a})=>{const{vendors:s}=Kr(),l=(()=>{if(!e.variants||e.variants.length===0||!t)return null;const c=e.supplierId||e.manufacturerId,d=s.find(C=>C.id===c),f=yh(d,t,"Customer"),p=e.variants.filter(C=>C.unitCost),m=p.map(C=>vh(Number(C.unitCost),f.percentage,f.method));if(m.length===0)return null;const x=Math.min(...m),v=Math.max(...m),b=x===v?`$${x.toFixed(2)}`:`$${x.toFixed(2)} - $${v.toFixed(2)}`,w=p.find(C=>C.pricingUnit)||p[0],_=(w==null?void 0:w.pricingUnit)||(w==null?void 0:w.uom)||"Unit";return{priceStr:b,unitLabel:_}})();return u.jsxs("div",{className:`bg-surface-container-high rounded-xl shadow-sm border overflow-hidden group flex flex-col cursor-pointer hover:shadow-md hover:-translate-y-1 transition-all h-full relative
                ${i?"border-primary ring-2 ring-primary/80":"border-outline/10"}
            `,onClick:()=>r(e),children:[(a||i)&&u.jsx("div",{className:"absolute top-2.5 left-2.5 z-10 text-primary",children:i?u.jsx(gh,{size:24,className:"fill-surface-container-high"}):u.jsx(b8e,{size:24,className:"text-white/80 drop-shadow-md"})}),u.jsxs("div",{className:"w-full h-48 bg-surface-container flex items-center justify-center relative",children:[e.defaultThumbnailUrl||e.defaultImageUrl?u.jsx("img",{src:ds(e.defaultThumbnailUrl||e.defaultImageUrl),alt:e.name,className:"w-full h-full object-cover",loading:"lazy"}):u.jsxs("div",{className:"text-center p-4",children:[u.jsx("span",{className:"text-4xl opacity-20 font-bold text-text-tertiary block mb-2",children:e.name.substring(0,2).toUpperCase()}),u.jsx("span",{className:"text-xs text-text-secondary",children:"No Image"})]}),u.jsxs("div",{className:"absolute top-2 right-2 bg-scrim/60 text-white text-xs px-2 py-1 rounded-full backdrop-blur-sm",children:[e.variants.length," Variants"]})]}),u.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[u.jsx("h3",{className:"font-bold text-lg text-text-primary truncate",title:e.name,children:e.name}),u.jsx("p",{className:"text-sm text-text-secondary truncate",children:e.manufacturerName||"Unknown Vendor"}),u.jsx("div",{className:"mt-2",children:l?u.jsxs("p",{className:"text-sm font-semibold text-tertiary",children:[l.priceStr," ",u.jsxs("span",{className:"text-text-secondary font-normal text-xs",children:["/ ",l.unitLabel]})]}):u.jsx("p",{className:"text-xs text-text-tertiary italic",children:"No pricing set"})}),u.jsx("div",{className:"flex-grow"}),n&&u.jsx("div",{className:"mb-2 text-center bg-error-container text-on-error-container text-xs font-bold py-1 rounded-full uppercase tracking-wider",children:"Discontinued"}),u.jsxs("div",{className:"flex justify-between items-center mt-4 pt-3 border-t border-outline/10",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs font-semibold bg-surface-container-highest text-text-secondary px-2 py-1 rounded-full",children:e.productType}),e.productLineUrl&&u.jsx("a",{href:e.productLineUrl,target:"_blank",rel:"noreferrer",className:"text-text-tertiary hover:text-primary p-1 rounded-full hover:bg-surface-container-highest transition-colors",title:"Open Product Website",onClick:c=>c.stopPropagation(),children:u.jsx(E8e,{size:14})})]}),u.jsx(ou,{size:18,className:"text-text-secondary"})]})]})]})},aWe=()=>{const{data:e=[],isLoading:t}=cb(),{data:r=[]}=QE(),n=_7(),[i,a]=nie(),s=i.get("search")||"",[o,l]=I.useState(s),[c,d]=I.useState(!1),[f,p]=I.useState(null);I.useEffect(()=>{const Q=i.get("search")||"";Q!==o&&l(Q)},[i]);const m=Q=>{const X=Q.target.value;l(X);const fe=new URLSearchParams(i);X?fe.set("search",X):fe.delete("search"),a(fe,{replace:!0})},[x,v]=I.useState("active");I.useEffect(()=>{(async()=>{try{p(await Lx())}catch{console.error("Failed to load pricing settings for library view.")}})()},[]);const[b,w]=I.useState(!1),[_,C]=I.useState(!1),[N,R]=I.useState(null);I.useEffect(()=>{const Q=i.get("open");if(Q&&e.length>0){const X=e.find(fe=>String(fe.id)===Q);X&&(R(X),C(!0))}},[i,e]);const P=()=>{if(C(!1),i.has("open")){const Q=new URLSearchParams(i);Q.delete("open"),a(Q,{replace:!0})}},O=()=>{d(!1)},D=I.useMemo(()=>r.filter(Q=>Q.actualReturnDate===null).sort((Q,X)=>new Date(Q.expectedReturnDate).getTime()-new Date(X.expectedReturnDate).getTime()),[r]),M=I.useMemo(()=>{let Q=e.filter(fe=>x==="active"?!fe.isDiscontinued:fe.isDiscontinued);const X=o.toLowerCase();return X?Q.filter(fe=>{var W;const Se=fe.name.toLowerCase().includes(X),Y=(W=fe.manufacturerName)==null?void 0:W.toLowerCase().includes(X),ce=fe.variants.some(G=>G.name&&G.name.toLowerCase().includes(X)||G.size&&G.size.toLowerCase().includes(X)||G.sku&&G.sku.toLowerCase().includes(X));return Se||Y||ce}):Q},[e,o,x]),B=I.useRef(null),U=rWe(),[H,Z]=I.useState(600);I.useEffect(()=>{const Q=()=>{const X=window.innerHeight-280;Z(X<400?400:X)};return Q(),window.addEventListener("resize",Q),()=>window.removeEventListener("resize",Q)},[]);const ee=Math.ceil(M.length/U),V=Wce({count:ee,getScrollElement:()=>B.current,estimateSize:()=>320,overscan:5}),te=async Q=>{w(!0);try{await n.addProduct.mutateAsync(Q),Re.success("Product added successfully!"),O()}catch(X){console.error(X),Re.error("Failed to add product.")}finally{w(!1)}},se=Q=>{R(Q),C(!0)};return t?u.jsx("div",{className:"flex items-center justify-center h-64 text-text-secondary",children:"Loading library..."}):u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 px-1 w-full",children:[u.jsx("h1",{className:"text-4xl font-bold text-text-primary tracking-tight",children:"Sample Library"}),u.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-4 w-full md:w-auto",children:[u.jsxs("div",{className:"bg-surface-container-high p-1 rounded-full flex items-center shadow-inner",children:[u.jsxs("button",{onClick:()=>v("active"),className:`flex-1 flex items-center justify-center gap-2 px-6 py-2 rounded-full text-sm font-medium transition-all ${x==="active"?"bg-surface shadow text-primary":"text-text-secondary hover:text-text-primary hover:bg-surface-container-highest"}`,children:[u.jsx(hoe,{size:16})," Active"]}),u.jsxs("button",{onClick:()=>v("discontinued"),className:`flex-1 flex items-center justify-center gap-2 px-6 py-2 rounded-full text-sm font-medium transition-all ${x==="discontinued"?"bg-surface shadow text-error":"text-text-secondary hover:text-text-primary hover:bg-surface-container-highest"}`,children:[u.jsx(hS,{size:16})," Discontinued"]})]}),x==="active"&&u.jsxs("button",{onClick:()=>d(!0),className:"flex items-center justify-center bg-primary hover:bg-primary-hover text-on-primary font-semibold py-3 px-6 rounded-full transition-all shadow-lg hover:shadow-xl",children:[u.jsx(lu,{className:"w-5 h-5 mr-2"}),"Add Product"]})]})]}),u.jsxs("div",{className:"relative w-full max-w-2xl",children:[u.jsx(gc,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-secondary",size:20}),u.jsx("input",{type:"text",placeholder:"Search by style, color, manufacturer, type, or SKU...",value:o,onChange:m,className:"w-full pl-12 pr-6 py-4 bg-surface-container-high border-none rounded-full text-text-primary focus:ring-2 focus:ring-primary/50 outline-none transition-shadow shadow-sm hover:shadow-md placeholder:text-text-tertiary"})]}),o===""&&x==="active"&&D.length>0&&u.jsxs(u.Fragment,{children:[u.jsx(jle,{title:"Currently Checked Out",checkouts:D,onItemClick:se}),u.jsx("div",{className:"border-t border-outline/10 my-8"}),u.jsx("h2",{className:"text-2xl font-semibold mb-6 text-text-primary pl-1",children:"All Products"})]}),u.jsxs("div",{ref:B,className:"overflow-y-auto w-full relative rounded-xl",style:{height:H},children:[u.jsx("div",{style:{height:`${V.getTotalSize()}px`,width:"100%",position:"relative"},children:V.getVirtualItems().map(Q=>{const X=Q.index*U,fe=t?[]:M.slice(X,X+U);return u.jsxs("div",{"data-index":Q.index,ref:V.measureElement,className:"absolute top-0 left-0 w-full flex gap-6 p-4",style:{transform:`translateY(${Q.start}px)`},children:[fe.map(Se=>u.jsx("div",{className:"flex-1 min-w-0",children:u.jsx(qce,{product:Se,pricingSettings:f,onClick:se,showDiscontinuedStyle:x==="discontinued"})},Se.id)),fe.length<U&&Array.from({length:U-fe.length}).map((Se,Y)=>u.jsx("div",{className:"flex-1"},`spacer-${Y}`))]},Q.key)})}),M.length===0&&u.jsx("p",{className:"text-text-secondary col-span-full text-center py-10",children:"No products found."})]}),c&&u.jsx("div",{className:"fixed inset-0 bg-black/75 flex justify-center z-50 overflow-y-auto",children:u.jsxs("div",{className:"bg-surface-container-high w-full min-h-full md:min-h-0 md:h-auto md:max-h-[90vh] md:max-w-3xl md:rounded-xl shadow-2xl flex flex-col border border-outline/10 md:my-auto relative",onClick:Q=>Q.stopPropagation(),children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center bg-surface-container-low md:rounded-t-xl",children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Create New Product Line"}),u.jsx("button",{onClick:O,className:"p-2 hover:bg-surface-container-highest rounded-full text-text-secondary hover:text-text-primary",children:u.jsx(Gr,{size:24})})]}),u.jsx("div",{className:"p-6 overflow-y-auto flex-grow",children:u.jsx(Vce,{onSave:te,onCancel:O,isSaving:b})})]})}),_&&N&&u.jsx(I9,{isOpen:_,onClose:P,product:N})]})},sWe=(e,t)=>{const r=new Date(e),n=new Date(t),i=r.toLocaleString("default",{month:"short"}),a=r.getDate(),s=n.getDate();return a===s?`${i} ${a}`:`${i} ${a} - ${s}`},oWe=()=>{const{data:e=[],isLoading:t}=vf(),[r,n]=I.useState(!1),[i,a]=I.useState(null),[s,o]=I.useState(""),l=I.useMemo(()=>{if(!e)return[];const p=s.toLowerCase();return e.filter(m=>{var b,w;const x=(((b=m.installerName)==null?void 0:b.toLowerCase())??"").includes(p),v=(((w=m.contactEmail)==null?void 0:w.toLowerCase())??"").includes(p);return x||v})},[e,s]),c=()=>{a(null),n(!0)},d=(p,m)=>{p.preventDefault(),p.stopPropagation(),a(m),n(!0)},f=()=>{n(!1),a(null)};return t?u.jsx("div",{className:"flex items-center justify-center h-64 text-text-secondary",children:"Loading installers..."}):u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 px-1",children:[u.jsx("h1",{className:"text-4xl font-bold text-text-primary tracking-tight",children:"Installers"}),u.jsxs("button",{onClick:c,className:"flex items-center justify-center bg-primary hover:bg-primary-hover text-on-primary font-semibold py-3 px-6 rounded-full transition-all shadow-lg hover:shadow-xl md:w-auto w-full",children:[u.jsx(lu,{className:"w-5 h-5 mr-2"}),"Add Installer"]})]}),u.jsxs("div",{className:"relative w-full max-w-2xl",children:[u.jsx(gc,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-secondary",size:20}),u.jsx("input",{type:"text",placeholder:"Search installers by name or email...",value:s,onChange:p=>o(p.target.value),className:"w-full pl-12 pr-6 py-4 bg-surface-container-high border-none rounded-full text-text-primary focus:ring-2 focus:ring-primary/50 outline-none transition-shadow shadow-sm hover:shadow-md placeholder:text-text-tertiary"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[l.map(p=>u.jsxs(ai,{to:`/installers/${p.id}`,className:"relative block bg-surface-container-high p-6 rounded-xl shadow-sm border border-outline/10 hover:shadow-md hover:-translate-y-1 transition-all duration-300 group",children:[u.jsxs("div",{className:"flex items-center mb-4",children:[u.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mr-4 shrink-0 shadow-sm border-2 border-surface",style:{backgroundColor:p.color||"#6b7280"},children:u.jsx(oc,{className:"w-6 h-6 text-white"})}),u.jsx("div",{children:u.jsx("h2",{className:"text-xl font-bold text-text-primary truncate",children:p.installerName})})]}),u.jsxs("div",{className:"space-y-2 text-sm text-text-secondary",children:[u.jsxs("p",{className:"flex items-center",children:[u.jsx(Xc,{className:"w-4 h-4 mr-3 shrink-0 opacity-70"})," ",u.jsx("span",{className:"truncate",children:p.contactEmail||"N/A"})]}),u.jsxs("p",{className:"flex items-center",children:[u.jsx(w0,{className:"w-4 h-4 mr-3 shrink-0 opacity-70"})," ",u.jsx("span",{className:"truncate",children:p.contactPhone||"N/A"})]})]}),u.jsx("div",{className:"border-t border-outline/10 my-4"}),u.jsxs("div",{className:"mb-4",children:[u.jsxs("h3",{className:"text-sm font-semibold text-text-secondary flex items-center mb-1",children:[u.jsx(yf,{className:"w-4 h-4 mr-2"}),"Active Samples"]}),u.jsx("p",{className:"text-xs text-text-primary ml-6",children:p.activeSampleCount&&p.activeSampleCount>0?u.jsxs("span",{className:"font-bold text-primary",children:[p.activeSampleCount," items checked out"]}):"No samples checked out"})]}),p.jobs&&p.jobs.length>0&&u.jsx(u.Fragment,{children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h3",{className:"text-sm font-semibold text-text-secondary flex items-center mb-2",children:[u.jsx(Mh,{className:"w-4 h-4 mr-2"}),"Scheduled Jobs"]}),p.jobs.map((m,x)=>u.jsxs("div",{className:"text-xs text-text-secondary grid grid-cols-3 gap-2 items-center",children:[u.jsx("span",{className:"col-span-1 truncate font-medium text-text-primary",children:m.projectName}),u.jsxs("span",{className:"col-span-1 truncate text-center",children:["(",m.customerName||"N/A",")"]}),u.jsx("span",{className:"col-span-1 truncate text-right",children:sWe(m.scheduledStartDate,m.scheduledEndDate)})]},`${m.projectId}-${x}`))]})}),u.jsx("button",{onClick:m=>d(m,p),className:"absolute top-4 right-4 text-text-secondary hover:text-primary p-2 rounded-full hover:bg-surface-container-highest transition-colors opacity-0 group-hover:opacity-100",title:"Edit Installer",children:u.jsx(Qh,{className:"w-4 h-4"})})]},p.id)),e.length===0&&u.jsx("p",{className:"text-text-secondary col-span-full text-center py-8",children:"No installers have been added yet."}),e.length>0&&l.length===0&&u.jsx("p",{className:"text-text-secondary col-span-full text-center py-8",children:"No installers match your search."})]}),u.jsx(E9,{isOpen:r,onClose:f,installer:i})]})},lWe=(e,t)=>{if(!e)return"Not Scheduled Yet";const r=new Date(e),n=t?new Date(t):null;return!n||r.toDateString()===n.toDateString()?`Scheduled: ${r.toLocaleDateString()}`:`Scheduled: ${r.toLocaleDateString()} - ${n.toLocaleDateString()}`},cWe=()=>{const{installerId:e}=Ex();gu();const{installers:t,isLoading:r,installerHistory:n,fetchInstallerHistory:i}=Kr(),[a,s]=I.useState([]),[o,l]=I.useState(!0),[c,d]=I.useState([]),[f,p]=I.useState(!1),[m,x]=I.useState(null),[v,b]=I.useState(!1),w=t.find(C=>C.id===parseInt(e||""));I.useEffect(()=>{(async()=>{if(e){l(!0);try{const N=await fetch(`/api/projects?installerId=${e}`);if(!N.ok)throw new Error("Failed to fetch projects");const R=await N.json();s(R)}catch(N){console.error("Failed to fetch installer projects:",N),Re.error("Could not load assigned projects.")}finally{l(!1)}}})(),e&&(i(parseInt(e)),y6e(parseInt(e)).then(d).catch(console.error))},[e,i]);const _=C=>{x(C),p(!0)};return r?u.jsx("div",{className:"text-center py-12 text-text-secondary",children:"Loading installer details..."}):w?u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-surface-container-high p-8 rounded-xl shadow-sm border border-outline/10",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mr-6 shadow-sm border-2 border-surface",style:{backgroundColor:w.color||"#4A5568"},children:u.jsx(oc,{className:"w-8 h-8 text-white"})}),u.jsx("div",{children:u.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:w.installerName})})]}),u.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 py-2 px-6 bg-primary-container hover:bg-primary text-primary hover:text-on-primary rounded-full font-semibold transition-all shadow-sm",children:[u.jsx(Qh,{size:16}),"Edit"]})]}),u.jsx("div",{className:"border-t border-outline/10 my-6"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-text-secondary",children:[u.jsxs("p",{className:"flex items-center",children:[u.jsx(Xc,{className:"w-5 h-5 mr-3 text-primary opacity-80"})," ",w.contactEmail||"N/A"]}),u.jsxs("p",{className:"flex items-center",children:[u.jsx(w0,{className:"w-5 h-5 mr-3 text-primary opacity-80"})," ",w.contactPhone||"N/A"]})]})]}),u.jsx("div",{children:u.jsx(e9,{title:"Change History",icon:u.jsx(Bx,{className:"w-6 h-6"}),defaultOpen:!1,children:u.jsx(pb,{history:n})})}),u.jsxs("div",{children:[u.jsx("div",{className:"flex justify-between items-center mb-6 px-1",children:u.jsxs("h2",{className:"text-2xl font-bold text-text-primary flex items-center gap-3",children:[u.jsx(yf,{className:"w-6 h-6"})," Sample History"]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[c.map(C=>u.jsx(Dle,{sample:C,onStartProject:_},C.id)),c.length===0&&u.jsx("p",{className:"col-span-full text-center text-text-secondary py-8 bg-surface-container-low rounded-xl border border-dashed border-outline/20",children:"No active samples for this installer."})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"flex justify-between items-center mb-6 px-1",children:u.jsxs("h2",{className:"text-2xl font-bold text-text-primary flex items-center gap-3",children:[u.jsx(Mh,{className:"w-6 h-6"})," Assigned Projects"]})}),u.jsx("div",{className:"space-y-4",children:o?u.jsx("p",{className:"text-text-secondary",children:"Loading projects..."}):a.length>0?a.map(C=>u.jsxs("div",{className:"bg-surface-container-high p-5 rounded-xl border border-outline/10 shadow-sm flex flex-col md:flex-row justify-between items-start md:items-center gap-4 hover:shadow-md transition-shadow",children:[u.jsxs("div",{children:[u.jsx(ai,{to:`/projects/${C.projectId}`,className:"text-lg font-bold text-text-primary hover:text-primary transition-colors",children:C.projectName}),u.jsxs("p",{className:"text-sm text-text-secondary flex items-center mt-1",children:[u.jsx(oc,{className:"w-4 h-4 mr-2"}),C.customerName]})]}),u.jsxs("div",{className:"text-left md:text-right w-full md:w-auto border-t border-outline/10 md:border-none pt-4 md:pt-0",children:[u.jsxs("p",{className:"text-md font-bold text-success flex items-center md:justify-end",children:[u.jsx(gS,{className:"w-5 h-5 mr-2"}),new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(C.projectTotal)]}),u.jsxs("p",{className:"text-sm text-text-secondary flex items-center md:justify-end mt-1",children:[u.jsx(pd,{className:"w-4 h-4 mr-2"}),lWe(C.scheduledStartDate,C.scheduledEndDate)]})]})]},C.projectId)):u.jsx("div",{className:"text-center text-text-secondary bg-surface-container-low p-12 rounded-xl border border-dashed border-outline/20",children:u.jsx("p",{children:"No accepted projects assigned to this installer yet."})})})]}),v&&u.jsx(E9,{isOpen:v,onClose:()=>b(!1),installer:w}),u.jsx(Mle,{isOpen:f,onClose:()=>{p(!1),x(null)},initialInstaller:w,transferSampleId:m==null?void 0:m.id,initialProjectName:m?`Project for Sample #${m.id}`:""})]}):u.jsx("div",{className:"text-center py-12 text-text-secondary",children:"Installer not found."})},uWe=()=>{const{quoteId:e}=Ex(),t=e?parseInt(e,10):void 0,{data:r=[],isLoading:n}=S4(),i=r.find(m=>m.id===t),{data:a=[]}=Yh(),{data:s=[]}=Mx(),{data:o=[]}=vf(),l=a.find(m=>m.id===(i==null?void 0:i.projectId)),c=s.find(m=>m.id===(l==null?void 0:l.customerId)),d=o.find(m=>m.id===(i==null?void 0:i.installerId)),f=m=>m===ll.ACCEPTED?{color:"bg-primary-container text-primary",text:"Accepted"}:m===ll.REJECTED?{color:"bg-error-container text-error",text:"Rejected"}:{color:"bg-secondary-container text-text-secondary",text:"Sent"};if(n)return u.jsx("div",{className:"text-center p-8 text-text-secondary",children:"Loading quote details..."});if(!i)return u.jsx("div",{className:"text-center p-8 text-text-secondary",children:"Quote not found."});const p=f(i.status);return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 px-1",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-4xl font-bold text-text-primary tracking-tight",children:"Quote Details"}),l&&c&&u.jsxs("p",{className:"text-md text-text-secondary mt-2",children:["For ",u.jsx(ai,{to:`/projects/${l.id}`,className:"font-semibold text-primary hover:underline",children:l.projectName})]})]}),u.jsx("div",{className:`text-sm font-bold px-4 py-1.5 rounded-full ${p.color}`,children:p.text})]}),u.jsxs("div",{className:"bg-surface-container-high rounded-2xl shadow-sm p-6 md:p-8 border border-outline/10",children:[u.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-lg font-semibold mb-3 text-text-primary flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-primary-container rounded-full text-primary",children:u.jsx(gS,{size:18})}),"Materials Amount"]}),u.jsxs("p",{className:"text-5xl font-bold text-text-primary tracking-tight",children:["$",parseFloat(i.materialsAmount||0).toFixed(2)]}),u.jsxs("h2",{className:"text-lg font-semibold mt-4 mb-3 text-text-primary flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-primary-container rounded-full text-primary",children:u.jsx(gS,{size:18})}),"Labor Amount"]}),u.jsxs("p",{className:"text-5xl font-bold text-text-primary tracking-tight",children:["$",parseFloat(i.laborAmount||0).toFixed(2)]})]}),u.jsxs("div",{children:[u.jsxs("h2",{className:"text-lg font-semibold mb-3 text-text-primary flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-primary-container rounded-full text-primary",children:u.jsx(ub,{size:18})}),"Assigned Installer"]}),d?u.jsx(ai,{to:`/installers/${d.id}`,className:"text-2xl font-bold text-text-primary hover:text-primary transition-colors",children:d.installerName}):u.jsx("p",{className:"text-2xl font-semibold text-text-secondary",children:"Not Assigned"})]})]}),u.jsx("div",{className:"border-t border-outline/10 my-8"}),u.jsxs("div",{children:[u.jsxs("h2",{className:"text-lg font-semibold mb-4 text-text-primary flex items-center gap-3",children:[u.jsx(Zc,{className:"w-5 h-5 text-primary"})," Details"]}),u.jsx("div",{className:"bg-surface-container-low p-5 rounded-xl border border-outline/5",children:u.jsx("p",{className:"text-text-primary whitespace-pre-wrap leading-relaxed",children:i.quoteDetails||"No details provided."})})]}),u.jsx("div",{className:"border-t border-outline/10 my-8"}),u.jsxs("div",{children:[u.jsxs("h2",{className:"text-lg font-semibold mb-3 text-text-primary flex items-center gap-3",children:[u.jsx(pd,{className:"w-5 h-5 text-primary"})," Timeline"]}),u.jsxs("p",{className:"text-text-secondary font-medium",children:["Sent on: ",u.jsx("span",{className:"text-text-primary",children:new Date(i.dateSent).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]})]})},dWe=()=>{const{currentUser:e}=Kr(),[t,r]=I.useState([]),[n,i]=I.useState([]),[a,s]=I.useState(!0),[o,l]=I.useState(""),[c,d]=I.useState(""),[f,p]=I.useState(""),[m,x]=I.useState("User");I.useEffect(()=>{(async()=>{try{s(!0);const[N,R]=await Promise.all([O7(),O6e()]);r(N.sort((P,O)=>P.email.localeCompare(O.email))),i(R)}catch(N){qr.error("Could not load user management data."),console.error(N)}finally{s(!1)}})()},[]);const v=async C=>{if(C.preventDefault(),!o){qr.error("Email is required to send an invitation.");return}try{const N=await k6e(o,c,f,m),R={...N,roles:[m],firstName:c,lastName:f};r([...t,R].sort((P,O)=>P.email.localeCompare(O.email))),qr.success(`Invitation sent to ${N.email}!`),l(""),d(""),p(""),x("User")}catch(N){qr.error(`Failed to create user: ${N.message}`)}},b=async C=>{if((e==null?void 0:e.userId)===C.userId){qr.error("You cannot delete your own account.");return}if(window.confirm(`Are you sure you want to delete user "${C.email}"? This action cannot be undone.`))try{await _6e(C.userId),r(t.filter(N=>N.userId!==C.userId)),qr.success("User deleted successfully.")}catch(N){qr.error(`Failed to delete user: ${N.message}`)}},w=(C,N,R)=>{r(P=>P.map(O=>{if(O.userId===C){const D=R?[...O.roles,N]:O.roles.filter(M=>M!==N);return{...O,roles:D}}return O}))},_=async C=>{try{await P6e(C.userId,C.roles),qr.success(`Roles for ${C.email} updated successfully.`)}catch(N){qr.error(`Failed to update roles: ${N.message}`)}};return u.jsx("section",{className:"md:bg-surface-container-low md:p-8 md:rounded-2xl md:border md:border-outline/10 max-w-6xl mx-auto transition-all",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-8",children:[u.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[u.jsxs("h3",{className:"text-xl font-bold mb-4 text-text-primary flex items-center gap-2",children:[u.jsx(rx,{className:"w-5 h-5 text-primary"})," Existing Users"]}),a?u.jsx("p",{className:"text-text-secondary",children:"Loading users..."}):u.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto pr-2",children:t.map(C=>u.jsxs("div",{className:"bg-surface-container-highest/30 p-4 rounded-2xl border border-outline/10 hover:border-outline/30 transition-colors",children:[u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[C.avatarUrl?u.jsx("img",{src:C.avatarUrl,alt:C.email,className:"w-12 h-12 rounded-full object-cover border-2 border-surface-container-low shadow-sm"}):u.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold text-lg border-2 border-surface-container-low shadow-sm",children:(C.firstName?C.firstName[0]:C.email[0]).toUpperCase()}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-text-primary text-base",children:C.firstName?`${C.firstName} ${C.lastName}`:"No Name Set"}),u.jsx("p",{className:"text-xs font-medium text-text-secondary",children:C.email})]})]}),u.jsx("button",{onClick:()=>b(C),disabled:(e==null?void 0:e.userId)===C.userId,className:"text-error/80 hover:text-error p-2 rounded-full hover:bg-error/10 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"Delete User",children:u.jsx(Bs,{size:18})})]}),u.jsxs("div",{className:"flex flex-wrap items-center gap-4 border-t border-outline/10 pt-3",children:[u.jsx("div",{className:"flex gap-4 items-center",children:n.map(N=>u.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-text-secondary cursor-pointer hover:text-text-primary transition-colors",children:[u.jsx("input",{type:"checkbox",checked:C.roles.includes(N.name),onChange:R=>w(C.userId,N.name,R.target.checked),disabled:(e==null?void 0:e.userId)===C.userId&&N.name==="Admin",className:"w-4 h-4 rounded border-outline/30 text-primary focus:ring-primary bg-surface-container-low"}),N.name]},N.id))}),u.jsxs("button",{onClick:()=>_(C),className:"ml-auto flex items-center gap-2 py-1.5 px-4 text-xs font-bold bg-primary/10 hover:bg-primary hover:text-on-primary text-primary rounded-full transition-all",children:[u.jsx(vs,{size:14})," Save"]})]})]},C.userId))})]}),u.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[u.jsx("h3",{className:"text-xl font-bold mb-4 text-text-primary",children:"Invite New User"}),u.jsxs("form",{onSubmit:v,className:"space-y-5 bg-surface-container-highest/30 p-6 rounded-2xl border border-outline/10",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-bold text-text-secondary uppercase tracking-wider mb-1",children:["Email Address ",u.jsx("span",{className:"text-error",children:"*"})]}),u.jsx("input",{type:"email",value:o,onChange:C=>l(C.target.value),className:"block w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-lg text-text-primary placeholder:text-text-secondary/50 focus:border-primary focus:outline-none transition-all",placeholder:"new.user@example.com",autoComplete:"off"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-text-secondary uppercase tracking-wider mb-1",children:"First Name"}),u.jsx("input",{type:"text",value:c,onChange:C=>d(C.target.value),className:"block w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-lg text-text-primary placeholder:text-text-secondary/50 focus:border-primary focus:outline-none transition-all",placeholder:"John"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-text-secondary uppercase tracking-wider mb-1",children:"Last Name"}),u.jsx("input",{type:"text",value:f,onChange:C=>p(C.target.value),className:"block w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-lg text-text-primary placeholder:text-text-secondary/50 focus:border-primary focus:outline-none transition-all",placeholder:"Doe"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-text-secondary uppercase tracking-wider mb-1",children:"Initial Role"}),u.jsx("select",{value:m,onChange:C=>x(C.target.value),className:"block w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-lg text-text-primary focus:border-primary focus:outline-none transition-all cursor-pointer",children:n.map(C=>u.jsx("option",{value:C.name,children:C.name},C.id))})]}),u.jsxs("div",{className:"pt-4",children:[u.jsxs("button",{type:"submit",className:"w-full bg-primary hover:bg-primary-hover text-on-primary py-3 px-6 rounded-full font-bold shadow-sm flex items-center justify-center gap-2 transition-all hover:shadow-md",children:[u.jsx(rx,{size:18})," Send Invitation"]}),u.jsx("p",{className:"text-xs text-text-tertiary mt-2 text-center",children:"The user will receive an email with a link to set their password."})]})]})]})]})})},fWe=({primary:e,secondary:t,accent:r,background:n,surface:i})=>{const a={"--preview-primary":e,"--preview-secondary":t,"--preview-accent":r,"--preview-bg":n,"--preview-surface":i};return u.jsxs("div",{className:"w-full h-full min-h-[400px] rounded-xl overflow-hidden border border-border shadow-xl flex flex-col",style:a,children:[u.jsxs("div",{className:"h-6 bg-gray-900 flex items-center px-3 gap-1.5",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-500/80"}),u.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-yellow-500/80"}),u.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500/80"})]}),u.jsxs("div",{className:"flex flex-1 overflow-hidden font-sans text-xs",children:[u.jsxs("div",{style:{backgroundColor:"color-mix(in srgb, var(--preview-surface), var(--preview-bg) 50%)"},className:"w-16 sm:w-48 flex flex-col p-3 gap-4",children:[u.jsx("div",{className:"h-8 w-8 sm:w-32 bg-gray-500/20 rounded mb-2 animate-pulse"}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsxs("div",{style:{backgroundColor:"color-mix(in srgb, var(--preview-primary), var(--preview-surface) 85%)",color:"var(--preview-primary)"},className:"p-2 rounded-full flex items-center gap-2 font-bold",children:[u.jsx(foe,{size:14})," ",u.jsx("span",{className:"hidden sm:inline",children:"Dashboard"})]}),u.jsxs("div",{className:"p-2 rounded-full flex items-center gap-2 hover:bg-black/5 text-gray-400",children:[u.jsx(rx,{size:14})," ",u.jsx("span",{className:"hidden sm:inline",children:"Customers"})]}),u.jsxs("div",{className:"p-2 rounded-full flex items-center gap-2 hover:bg-black/5 text-gray-400",children:[u.jsx(rC,{size:14})," ",u.jsx("span",{className:"hidden sm:inline",children:"Settings"})]})]})]}),u.jsxs("div",{style:{backgroundColor:"var(--preview-bg)"},className:"flex-1 flex flex-col relative",children:[u.jsxs("div",{className:"h-12 flex items-center justify-between px-4 mt-2",children:[u.jsx("h1",{className:"font-bold text-lg",style:{color:"white"},children:"Dashboard"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("div",{style:{backgroundColor:"color-mix(in srgb, var(--preview-surface) 90%, #fff)",color:"gray"},className:"h-8 w-8 rounded-full flex items-center justify-center",children:u.jsx(gc,{size:14})}),u.jsxs("div",{style:{backgroundColor:"color-mix(in srgb, var(--preview-surface) 90%, #fff)",color:"gray"},className:"h-8 w-8 rounded-full flex items-center justify-center relative",children:[u.jsx(pS,{size:14}),u.jsx("div",{style:{backgroundColor:"var(--preview-accent)"},className:"absolute top-0 right-0 w-2.5 h-2.5 rounded-full border-2 border-white"})]})]})]}),u.jsxs("div",{className:"p-4 space-y-4 overflow-hidden",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{style:{backgroundColor:"color-mix(in srgb, var(--preview-surface) 90%, #fff)"},className:"p-4 rounded-xl shadow-sm",children:[u.jsx("div",{className:"mb-1 text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Active Jobs"}),u.jsx("div",{style:{color:"white"},className:"text-2xl font-bold",children:"12"}),u.jsx("div",{style:{color:"var(--preview-primary)",backgroundColor:"color-mix(in srgb, var(--preview-primary), var(--preview-surface) 85%)"},className:"text-[10px] font-bold mt-2 px-2 py-0.5 rounded-full w-fit",children:"On Track"})]}),u.jsxs("div",{style:{backgroundColor:"color-mix(in srgb, var(--preview-surface) 90%, #fff)"},className:"p-4 rounded-xl shadow-sm",children:[u.jsx("div",{className:"mb-1 text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Pending"}),u.jsx("div",{style:{color:"white"},className:"text-2xl font-bold",children:"5"}),u.jsx("div",{style:{color:"var(--preview-accent)",backgroundColor:"color-mix(in srgb, var(--preview-accent), var(--preview-surface) 85%)"},className:"text-[10px] font-bold mt-2 px-2 py-0.5 rounded-full w-fit",children:"Action Needed"})]})]}),u.jsxs("div",{className:"flex gap-2 mt-4",children:[u.jsx("button",{style:{backgroundColor:"var(--preview-primary)",color:"#fff"},className:"px-4 py-2 rounded-full shadow-md font-bold",children:"Save"}),u.jsx("button",{style:{color:"gray",backgroundColor:"color-mix(in srgb, var(--preview-surface) 90%, #fff)"},className:"px-4 py-2 rounded-full shadow-sm font-medium",children:"Cancel"})]})]}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-t from-black/20 to-transparent pointer-events-none"})]})]})]})},uD=e=>{const t=parseInt(e.substr(1,2),16),r=parseInt(e.substr(3,2),16),n=parseInt(e.substr(5,2),16);return(t*299+r*587+n*114)/1e3>=128?"#000000":"#ffffff"},hWe=()=>{const{systemBranding:e,refreshBranding:t}=Kr(),[r,n]=I.useState("Subfloor"),[i,a]=I.useState("America/Los_Angeles"),[s,o]=I.useState(null),[l,c]=I.useState(null),[d,f]=I.useState("#2563eb"),[p,m]=I.useState("#4b5563"),[x,v]=I.useState("#0d9488"),[b,w]=I.useState("#111827"),[_,C]=I.useState("#1f2937"),[N,R]=I.useState(null),[P,O]=I.useState(null),[D,M]=I.useState(!1),[B,U]=I.useState("#ef4444"),[H,Z]=I.useState("#f59e0b"),[ee,V]=I.useState("#10b981"),[te,se]=I.useState(null),Q="";I.useEffect(()=>()=>{N&&URL.revokeObjectURL(N),P&&URL.revokeObjectURL(P)},[N,P]),I.useEffect(()=>{e&&(se({companyName:e.companyName,systemTimezone:e.systemTimezone,primaryColor:e.primaryColor,secondaryColor:e.secondaryColor,accentColor:e.accentColor,backgroundColor:e.backgroundColor,surfaceColor:e.surfaceColor,errorColor:e.errorColor||"#ef4444",warningColor:e.warningColor||"#f59e0b",successColor:e.successColor||"#10b981"}),e.companyName&&n(e.companyName),e.systemTimezone&&a(e.systemTimezone),e.primaryColor&&f(e.primaryColor),e.secondaryColor&&m(e.secondaryColor),e.accentColor&&v(e.accentColor),e.backgroundColor&&w(e.backgroundColor),e.surfaceColor&&C(e.surfaceColor),e.errorColor&&U(e.errorColor),e.warningColor&&Z(e.warningColor),e.successColor&&V(e.successColor))},[e]);const X=()=>{te&&window.confirm("Discard unsaved changes and reset to last saved state?")&&(n(te.companyName||"Subfloor"),a(te.systemTimezone||"America/Los_Angeles"),f(te.primaryColor||"#2563eb"),m(te.secondaryColor||"#4b5563"),v(te.accentColor||"#0d9488"),w(te.backgroundColor||"#111827"),C(te.surfaceColor||"#1f2937"),U(te.errorColor||"#ef4444"),Z(te.warningColor||"#f59e0b"),V(te.successColor||"#10b981"),qr.success("Reset to last saved settings."))},fe=(ce,W)=>{var Ce;const G=(Ce=ce.target.files)==null?void 0:Ce[0];if(!G)return;W==="logo"&&N&&URL.revokeObjectURL(N),W==="favicon"&&P&&URL.revokeObjectURL(P);const ie=URL.createObjectURL(G);W==="logo"?(o(G),R(ie)):(c(G),O(ie))},Se=async ce=>{if(window.confirm(`Are you sure you want to remove the current ${ce}?`))try{await B6e(ce),await t(),qr.success(`${ce==="logo"?"Company Logo":"Favicon"} removed.`),ce==="logo"?(o(null),N&&URL.revokeObjectURL(N),R(null)):(c(null),P&&URL.revokeObjectURL(P),O(null))}catch(W){console.error(W),qr.error("Failed to delete branding.")}},Y=async()=>{M(!0);const ce=new FormData;s&&ce.append("logo",s),l&&ce.append("favicon",l),ce.append("companyName",r),ce.append("systemTimezone",i),ce.append("primaryColor",d),ce.append("onPrimary",uD(d)),ce.append("secondaryColor",p),ce.append("onSecondary",uD(p)),ce.append("accentColor",x),ce.append("onAccent",uD(x)),ce.append("backgroundColor",b),ce.append("surfaceColor",_),ce.append("errorColor",B),ce.append("warningColor",H),ce.append("successColor",ee);try{await F6e(ce),await t(),qr.success("Branding updated successfully!"),o(null),c(null),N&&URL.revokeObjectURL(N),P&&URL.revokeObjectURL(P),R(null),O(null)}catch(W){console.error(W),qr.error(W.message||"Failed to upload branding.")}finally{M(!1)}};return u.jsxs("section",{children:[u.jsxs("h2",{className:"text-2xl font-bold text-text-primary mb-6 flex items-center gap-3",children:[u.jsx(ooe,{className:"w-7 h-7 text-accent"}),"System Branding"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-0 md:gap-6 mb-8",children:[u.jsxs("div",{className:"py-6 border-b border-outline/10 md:border-b-0 md:bg-surface-container-low md:p-6 md:rounded-xl md:border md:border-outline/10",children:[u.jsxs("h3",{className:"text-lg font-medium text-text-primary mb-2 flex items-center gap-2",children:[u.jsx(Jg,{className:"w-5 h-5 text-secondary"})," Company Name"]}),u.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Appears in email footers and titles."}),u.jsx("input",{type:"text",value:r,onChange:ce=>n(ce.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-all placeholder:text-text-tertiary",placeholder:"e.g. Acme Flooring Co."})]}),u.jsxs("div",{className:"py-6 border-b border-outline/10 md:border-b-0 md:bg-surface-container-low md:p-6 md:rounded-xl md:border md:border-outline/10",children:[u.jsxs("h3",{className:"text-lg font-medium text-text-primary mb-2 flex items-center gap-2",children:[u.jsx(Zg,{className:"w-5 h-5 text-secondary"})," System Timezone"]}),u.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Used for all dates and scheduling."}),u.jsxs("select",{value:i,onChange:ce=>a(ce.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-all cursor-pointer",children:[u.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (US & Canada)"}),u.jsx("option",{value:"America/Denver",children:"Mountain Time (US & Canada)"}),u.jsx("option",{value:"America/Chicago",children:"Central Time (US & Canada)"}),u.jsx("option",{value:"America/New_York",children:"Eastern Time (US & Canada)"}),u.jsx("option",{value:"UTC",children:"UTC (Universal)"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-0 md:gap-8",children:[u.jsxs("div",{className:"py-6 border-b border-outline/10 md:border-b-0 md:bg-surface-container-low md:p-6 md:rounded-xl md:border md:border-outline/10",children:[u.jsx("h3",{className:"text-lg font-medium text-text-primary mb-2",children:"Company Logo"}),u.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Displayed in the top-left of the application sidebar. Transparent PNG recommended."}),u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsx("div",{className:"relative h-32 w-full flex items-center justify-center bg-surface-container-highest rounded-lg border-2 border-dashed border-outline/20 group",children:N?u.jsxs(u.Fragment,{children:[u.jsx("img",{src:N,alt:"New Logo Preview",className:"max-h-24 max-w-full object-contain"}),u.jsx("span",{className:"absolute top-2 right-2 bg-primary-container text-primary text-xs px-2 py-1 rounded-full font-bold",children:"New"})]}):e!=null&&e.logoUrl?u.jsxs(u.Fragment,{children:[u.jsx("img",{src:`${Q}${e.logoUrl}`,alt:"Current Logo",className:"max-h-24 max-w-full object-contain"}),u.jsx("button",{onClick:()=>Se("logo"),className:"absolute top-2 right-2 p-2 bg-red-500/80 hover:bg-red-600 text-white rounded transition-opacity opacity-0 group-hover:opacity-100",title:"Remove Logo",children:u.jsx(Bs,{size:16})})]}):u.jsx("span",{className:"text-text-secondary",children:"No Logo Set"})}),u.jsx("input",{type:"file",accept:"image/*",onChange:ce=>fe(ce,"logo"),className:"block w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-on-primary hover:file:bg-primary-hover"})]})]}),u.jsxs("div",{className:"py-6 border-b border-outline/10 md:border-b-0 md:bg-surface-container-low md:p-6 md:rounded-xl md:border md:border-outline/10",children:[u.jsx("h3",{className:"text-lg font-medium text-text-primary mb-2",children:"Browser Favicon"}),u.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Displayed in the browser tab. Square image (PNG or ICO) required."}),u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsx("div",{className:"relative h-32 w-full flex items-center justify-center bg-surface-container-highest rounded-lg border-2 border-dashed border-outline/20 group",children:P?u.jsxs(u.Fragment,{children:[u.jsx("img",{src:P,alt:"New Favicon Preview",className:"w-16 h-16 object-contain"}),u.jsx("span",{className:"absolute top-2 right-2 bg-primary-container text-primary text-xs px-2 py-1 rounded-full font-bold",children:"New"})]}):e!=null&&e.faviconUrl?u.jsxs(u.Fragment,{children:[u.jsx("img",{src:`${Q}${e.faviconUrl}`,alt:"Current Favicon",className:"w-16 h-16 object-contain"}),u.jsx("button",{onClick:()=>Se("favicon"),className:"absolute top-2 right-2 p-2 bg-red-500/80 hover:bg-red-600 text-white rounded transition-opacity opacity-0 group-hover:opacity-100",title:"Remove Favicon",children:u.jsx(Bs,{size:16})})]}):u.jsx("span",{className:"text-text-secondary text-xs",children:"None"})}),u.jsx("input",{type:"file",accept:".ico,.png",onChange:ce=>fe(ce,"favicon"),className:"block w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-on-primary hover:file:bg-primary-hover"})]})]})]}),u.jsxs("div",{className:"mt-8 pt-6 border-t border-outline/10",children:[u.jsxs("h3",{className:"text-lg font-medium text-text-primary mb-4 flex items-center gap-2",children:[u.jsx(goe,{className:"w-5 h-5 text-accent"}),"Theme Colors"]}),u.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-8",children:[u.jsxs("div",{className:"xl:col-span-5 space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[u.jsx("h4",{className:"text-xs font-bold text-text-secondary uppercase tracking-wider",children:"Brand Identity"}),u.jsx(_p,{label:"Primary Color",value:d,onChange:f}),u.jsx(_p,{label:"Secondary Color",value:p,onChange:m}),u.jsx(_p,{label:"Accent Color",value:x,onChange:v})]}),u.jsx("div",{className:"border-t border-outline/10 my-4"}),u.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[u.jsx("h4",{className:"text-xs font-bold text-text-secondary uppercase tracking-wider",children:"Interface Theme"}),u.jsx(_p,{label:"Page Background",value:b,onChange:w}),u.jsx(_p,{label:"Card Surface",value:_,onChange:C})]}),u.jsx("div",{className:"border-t border-outline/10 my-4"}),u.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[u.jsx("h4",{className:"text-xs font-bold text-text-secondary uppercase tracking-wider",children:"Status Colors"}),u.jsx(_p,{label:"Success (Green)",value:ee,onChange:V}),u.jsx(_p,{label:"Warning (Orange)",value:H,onChange:Z}),u.jsx(_p,{label:"Error (Red)",value:B,onChange:U})]})]}),u.jsx("div",{className:"xl:col-span-7",children:u.jsxs("div",{className:"sticky top-6",children:[u.jsxs("div",{className:"flex justify-between items-end mb-2",children:[u.jsx("h4",{className:"text-xs font-bold text-text-secondary uppercase tracking-wider",children:"Live Preview"}),u.jsx("span",{className:"text-[10px] text-text-secondary bg-surface-container-low border border-outline/10 px-3 py-1 rounded-full",children:"Changes applied on Save"})]}),u.jsxs("div",{className:"mb-4 text-xs text-text-secondary space-y-1",children:[u.jsxs("p",{children:[" ",u.jsx("strong",{children:"Primary:"})," Buttons, Active Tabs, Links"]}),u.jsxs("p",{children:[" ",u.jsx("strong",{children:"Secondary:"})," Borders, Lines, Inactive Icons"]}),u.jsxs("p",{children:[" ",u.jsx("strong",{children:"Accent:"})," Status Badges, Notification Dots"]})]}),u.jsx(fWe,{primary:d,secondary:p,accent:x,background:b,surface:_})]})})]})]}),u.jsxs("div",{className:"mt-8 flex justify-end border-t border-outline/10 pt-4",children:[u.jsxs("button",{onClick:X,className:"flex items-center gap-2 text-text-secondary hover:text-text-primary font-medium py-2 px-6 rounded-full hover:bg-surface-container-highest mr-auto transition-colors",children:[u.jsx($x,{size:16})," Reset Changes"]}),u.jsxs("button",{onClick:Y,disabled:D,className:"flex items-center gap-2 bg-primary hover:bg-primary-hover text-on-primary font-bold py-2 px-8 rounded-full shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[u.jsx(vs,{size:18}),D?"Uploading...":"Save Branding"]})]})]})},_p=({label:e,value:t,onChange:r})=>u.jsxs("div",{className:"py-3 border-b border-outline/10 md:border-b-0 md:bg-surface-container-low md:p-4 md:rounded-xl md:border md:border-outline/10 flex items-center justify-between group hover:border-primary/50 transition-colors md:shadow-sm",children:[u.jsx("label",{className:"text-sm font-medium text-text-primary",children:e}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-xs text-text-secondary font-mono opacity-50 group-hover:opacity-100 transition-opacity",children:t}),u.jsx("div",{className:"relative w-10 h-10 rounded-full overflow-hidden border-2 border-surface shadow-sm ring-1 ring-outline/10 hover:ring-primary transition-all",children:u.jsx("input",{type:"color",value:t,onChange:n=>r(n.target.value),className:"absolute -top-4 -left-4 w-20 h-20 p-0 border-0 cursor-pointer"})})]})]}),LK=({title:e,endpoint:t,warningMessage:r,icon:n})=>{const[i,a]=I.useState(null),[s,o]=I.useState(!1),l=d=>{d.target.files&&a(d.target.files[0])},c=async d=>{if(d.preventDefault(),!i)return Re.error("Please select a file.");if(!window.confirm(r))return;o(!0);const f=Re.loading(`Restoring ${e}...`),p=new FormData;p.append("backupFile",i);try{const m=await fetch(t,{method:"POST",body:p});if(!m.ok){const x=await m.json();throw new Error(x.error||"Restore failed")}if(Re.success("Restore successful!",{id:f}),t.includes("database")){try{await q0.signOut()}catch{}window.location.href="/auth"}else setTimeout(()=>window.location.reload(),1500)}catch(m){console.error(m),Re.error(m.message,{id:f})}finally{o(!1)}};return u.jsxs("form",{onSubmit:c,className:"flex flex-col h-full",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n&&u.jsx(n,{className:"w-5 h-5 text-text-secondary"}),u.jsx("h3",{className:"font-semibold text-text-primary",children:e})]}),u.jsx("div",{className:"flex-1 bg-background rounded border border-border border-dashed p-4 flex flex-col justify-center items-center gap-2 hover:border-primary transition-colors",children:u.jsx("input",{type:"file",accept:".zip",onChange:l,className:"w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-surface file:text-text-primary hover:file:bg-primary hover:file:text-on-primary"})}),u.jsxs("button",{type:"submit",disabled:!i||s,className:"mt-4 w-full bg-secondary hover:bg-secondary-hover text-on-secondary font-bold py-2 px-4 rounded transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx(loe,{size:16}),s?"Restoring...":"Start Restore"]})]})},pWe=()=>{const[e,t]=I.useState(null),[r,n]=I.useState(null),[i,a]=I.useState(!1),s=async o=>{if(o.preventDefault(),!e||!r)return Re.error("Please select both files.");if(!window.confirm("WARNING: You are about to overwrite the ENTIRE system (Database + Images). This cannot be undone. Continue?"))return;a(!0);const l=Re.loading("Starting Full System Restore...");try{Re.loading("Step 1/2: Restoring Images...",{id:l});const c=new FormData;if(c.append("backupFile",r),!(await fetch("/api/restore/images",{method:"POST",body:c})).ok)throw new Error("Image restore failed. Aborting DB restore.");Re.loading("Step 2/2: Restoring Database...",{id:l});const f=new FormData;if(f.append("backupFile",e),!(await fetch("/api/restore/database",{method:"POST",body:f})).ok)throw new Error("Database restore failed.");Re.success("Full System Restore Complete! Redirecting...",{id:l});try{await q0.signOut()}catch{}window.location.href="/auth"}catch(c){console.error(c),Re.error(c.message||"Restore Failed",{id:l})}finally{a(!1)}};return u.jsxs("form",{onSubmit:s,className:"bg-surface-container rounded-xl border border-outline/10 p-6",children:[u.jsx("h3",{className:"text-lg font-bold text-text-primary mb-2 text-center",children:"Full System Restore"}),u.jsx("p",{className:"text-text-secondary text-sm text-center mb-6",children:"Upload both files to restore the entire application state in one go."}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-text-secondary mb-2 flex items-center gap-2",children:[u.jsx(ZA,{size:16})," Database File"]}),u.jsx("input",{type:"file",accept:".zip",onChange:o=>o.target.files&&t(o.target.files[0]),className:"w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border file:border-outline file:bg-surface-container-high file:text-text-primary hover:file:bg-primary-container/30 transition-colors cursor-pointer"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-text-secondary mb-2 flex items-center gap-2",children:[u.jsx(Jd,{size:16})," Images File"]}),u.jsx("input",{type:"file",accept:".zip",onChange:o=>o.target.files&&n(o.target.files[0]),className:"w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border file:border-outline file:bg-surface-container-high file:text-text-primary hover:file:bg-primary-container/30 transition-colors cursor-pointer"})]})]}),u.jsxs("button",{type:"submit",disabled:!e||!r||i,className:"w-full bg-error hover:bg-error-hover text-on-error font-bold py-3 px-6 rounded-full transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[u.jsx($x,{size:18}),i?"Restoring System...":"Restore Everything"]})]})},mWe=()=>u.jsxs("div",{className:"space-y-8",children:[u.jsxs("section",{className:"py-6 border-b border-outline/10 md:bg-surface-container-low md:p-8 md:rounded-2xl md:shadow-sm md:border md:border-outline/10 md:border-b-outline/10",children:[u.jsxs("h2",{className:"text-xl font-semibold text-text-primary mb-3 flex items-center gap-3",children:[u.jsx(mS,{className:"w-6 h-6 text-primary"}),"Create Backups"]}),u.jsx("p",{className:"text-text-secondary mb-6 text-sm",children:"Download ZIP archives of your critical data. Store these in a safe location."}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("a",{href:"/api/backup/database",download:!0,className:"flex flex-col items-center justify-center p-6 bg-surface-container-highest border border-outline/10 rounded-xl hover:border-primary/50 hover:bg-primary/5 transition-all group",children:[u.jsx(ZA,{className:"w-8 h-8 text-primary group-hover:text-primary mb-3"}),u.jsx("span",{className:"font-bold text-text-primary",children:"Database Backup"}),u.jsx("span",{className:"text-xs text-text-secondary",children:"Customers, Projects, Settings"})]}),u.jsxs("a",{href:"/api/backup/images",download:!0,className:"flex flex-col items-center justify-center p-6 bg-surface-container-highest border border-outline/10 rounded-xl hover:border-primary/50 hover:bg-primary/5 transition-all group",children:[u.jsx(Jd,{className:"w-8 h-8 text-primary group-hover:text-primary mb-3"}),u.jsx("span",{className:"font-bold text-text-primary",children:"Image Library Backup"}),u.jsx("span",{className:"text-xs text-text-secondary",children:"Photos, Logos, Uploads"})]})]})]}),u.jsxs("section",{className:"py-6 md:bg-surface-container-low md:p-8 md:rounded-2xl md:shadow-sm md:border md:border-outline/10",children:[u.jsxs("h2",{className:"text-xl font-semibold text-text-primary mb-3 flex items-center gap-3",children:[u.jsx($x,{className:"w-6 h-6 text-primary"}),"System Recovery"]}),u.jsxs("div",{className:"bg-error/10 border border-error/20 rounded-xl p-4 mb-8 text-sm text-text-primary flex gap-3 items-start",children:[u.jsx("span",{className:"text-error font-bold",children:"Warning:"})," Restoring will permanently overwrite existing data. Ensure you have a recent backup before proceeding."]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsx("div",{children:u.jsx(LK,{title:"Database Only",icon:ZA,endpoint:"/api/restore/database",warningMessage:"Overwrite current database? Current data will be lost."})}),u.jsx("div",{className:"lg:border-l lg:border-outline/10 lg:pl-8",children:u.jsx(LK,{title:"Images Only",icon:Jd,endpoint:"/api/restore/images",warningMessage:"Overwrite image library? New images may be lost."})})]}),u.jsx("div",{className:"border-t border-outline/10 my-8"}),u.jsx("div",{className:"max-w-2xl mx-auto",children:u.jsx(pWe,{})})]})]}),gWe=()=>{const{currentUser:e,saveCurrentUserPreferences:t,updateCurrentUserProfile:r,uploadCurrentUserAvatar:n,deleteCurrentUserAvatar:i}=Kr(),{isEnabled:a,enableBiometrics:s,disableBiometrics:o}=Z8e(),[l,c]=I.useState("#ffffff"),[d,f]=I.useState(""),[p,m]=I.useState(""),[x,v]=I.useState(""),[b,w]=I.useState(""),[_,C]=I.useState(null),[N,R]=I.useState(!1);I.useEffect(()=>{var te;(async()=>{try{const se=await fetch(sr("/api/preferences/calendar-token"),{credentials:"include"});if(se.ok){const Q=await se.json();C(Q.token)}}catch(se){console.error("Failed to fetch calendar token",se)}})(),(te=e==null?void 0:e.preferences)!=null&&te.calendarColor&&c(e.preferences.calendarColor),e&&(f(e.firstName||""),m(e.lastName||""))},[e]);const P=V=>{const te=V.target.value;c(te)},O=async()=>{if(!e)return;const V={...e.preferences,calendarColor:l};await t(V),qr.success("Color preference saved!")},D=async()=>{try{const V=await fetch(sr("/api/preferences/calendar-token"),{method:"POST",credentials:"include"});if(V.ok){const te=await V.json();C(te.token),qr.success("Calendar link generated!")}}catch{qr.error("Failed to generate link")}},M=()=>{const V=(e==null?void 0:e.id)||(e==null?void 0:e.userId);if(!e||!V||!_){qr.error("User ID not found. Please refresh.");return}const te=sr("").replace(/\/$/,""),Q=`${te.startsWith("http")?te:window.location.origin}/api/calendar/feed/${V}/${_}`;navigator.clipboard.writeText(Q),R(!0),qr.success("Link copied to clipboard!"),setTimeout(()=>R(!1),2e3)},B=async()=>{await r(d,p)},U=async V=>{V.target.files&&V.target.files[0]&&await n(V.target.files[0])},H=async()=>{window.confirm("Remove your custom profile picture?")&&await i()},Z=async()=>{if(!x||!b){qr.error("Please fill in both password fields.");return}try{await I6e(x,b),qr.success("Password changed successfully!"),v(""),w("")}catch(V){qr.error(V.message)}},ee=async()=>{a?window.confirm("Disable biometric security?")&&(o(),qr.success("Biometrics disabled")):await s()&&qr.success("Biometrics enabled!")};return u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-6",children:"My Settings"}),u.jsxs("div",{className:"space-y-6 max-w-md",children:[u.jsxs("div",{className:"flex flex-col items-center mb-6",children:[u.jsxs("div",{className:"relative w-28 h-28 mb-4",children:[e!=null&&e.avatarUrl?u.jsx("img",{src:e.avatarUrl,alt:"Profile",className:"w-full h-full rounded-full object-cover border-4 border-surface shadow-md"}):u.jsx("div",{className:"w-full h-full rounded-full bg-surface-container-highest flex items-center justify-center border-4 border-surface shadow-md text-3xl font-bold text-primary",children:d?`${d[0]}${p[0]||""}`.toUpperCase():e==null?void 0:e.email[0].toUpperCase()}),(e==null?void 0:e.avatarUrl)&&u.jsx("button",{onClick:H,className:"absolute top-0 right-0 bg-error-container text-error p-1.5 rounded-full shadow-sm hover:bg-error hover:text-white transition-colors z-10 border-2 border-surface",title:"Remove Picture",children:u.jsx(Bs,{size:12})}),u.jsx("label",{htmlFor:"avatar-upload",className:"absolute bottom-0 right-0 bg-primary hover:bg-primary-hover text-on-primary p-2.5 rounded-full cursor-pointer shadow-lg transition-colors border-2 border-surface",children:u.jsx(wv,{size:18})}),u.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",className:"hidden",onChange:U})]}),u.jsx("p",{className:"text-xs text-text-secondary font-medium",children:"Click camera icon to change"})]}),u.jsxs("div",{className:"space-y-5",children:[u.jsx("h3",{className:"text-lg font-bold text-text-primary border-b border-outline/10 pb-2",children:"Profile Information"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"First Name"}),u.jsx("input",{type:"text",value:d,onChange:V=>f(V.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Last Name"}),u.jsx("input",{type:"text",value:p,onChange:V=>m(V.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors"})]})]}),u.jsxs("button",{onClick:B,className:"flex items-center gap-2 py-2 px-6 text-sm bg-primary hover:bg-primary-hover text-on-primary rounded-full font-semibold shadow-sm transition-all hover:shadow-md",children:[u.jsx(vs,{size:16})," Update Profile"]})]}),u.jsx("h3",{className:"text-lg font-bold text-text-primary border-b border-outline/10 pb-2 pt-6",children:"Security"}),u.jsxs("div",{className:"space-y-5",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Current Password"}),u.jsx("input",{type:"password",value:x,onChange:V=>v(V.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors",placeholder:"Required to verify identity"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"New Password"}),u.jsx("input",{type:"password",value:b,onChange:V=>w(V.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors",placeholder:"Minimum 8 characters"})]}),u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{onClick:Z,className:"py-2 px-6 text-sm bg-surface-container-high border border-outline/20 text-text-primary hover:bg-surface-container-highest rounded-full font-medium transition-colors",children:"Change Password"})})]}),Qg.isNativePlatform()&&u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-lg font-bold text-text-primary border-b border-outline/10 pb-2 pt-6",children:"App Security"}),u.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface-container-low rounded-xl border border-outline/10",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-full ${a?"bg-success-container text-success":"bg-surface-container-highest text-text-secondary"}`,children:u.jsx(s8,{size:24})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-text-primary",children:"Biometric Lock"}),u.jsx("p",{className:"text-xs text-text-secondary",children:"Require Face ID / Fingerprint after 5m inactivity"})]})]}),u.jsx("button",{onClick:ee,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${a?"bg-primary":"bg-surface-container-highest"}`,children:u.jsx("span",{className:`${a?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]})]}),u.jsx("h3",{className:"text-lg font-bold text-text-primary border-b border-outline/10 pb-2 pt-6",children:"Preferences"}),u.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface-container-low rounded-xl border border-outline/10",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(goe,{className:"w-6 h-6 text-accent"}),u.jsx("label",{htmlFor:"userColor",className:"font-medium text-text-secondary",children:"My Calendar Color"})]}),u.jsx("div",{className:"relative w-10 h-10 rounded-full overflow-hidden border-2 border-surface shadow-sm ring-1 ring-outline/10 hover:ring-primary transition-all",children:u.jsx("input",{type:"color",id:"userColor",value:l,onChange:P,className:"absolute -top-4 -left-4 w-20 h-20 p-0 border-0 cursor-pointer"})})]}),u.jsx("div",{className:"flex justify-end",children:u.jsxs("button",{onClick:O,className:"flex items-center gap-2 py-2 px-6 text-sm bg-primary hover:bg-primary-hover text-on-primary rounded-full font-semibold shadow-sm transition-all hover:shadow-md",children:[u.jsx(vs,{size:16})," Save Calendar Color"]})}),u.jsx("h3",{className:"text-lg font-bold text-text-primary border-b border-outline/10 pb-2 pt-6",children:"Calendar Sync"}),u.jsxs("div",{className:"bg-surface-container-low rounded-xl border border-outline/10 p-5",children:[u.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[u.jsx("div",{className:"p-2 bg-primary-container rounded-lg text-primary",children:u.jsx(pd,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-text-primary",children:"Sync to Phone"}),u.jsx("p",{className:"text-sm text-text-secondary",children:"See your jobs and appointments in Google Calendar, Apple Calendar, or Outlook."})]})]}),_?u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:M,className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-surface-container-highest hover:bg-surface-container-high border border-transparent hover:border-outline/10 text-text-primary rounded-full font-medium transition-all",children:[N?u.jsx(nf,{size:16,className:"text-success"}):u.jsx(P7,{size:16}),N?"Copied!":"Copy Link"]}),u.jsx("button",{onClick:()=>{confirm("Resetting this link will disconnect all current devices. Continue?")&&D()},className:"px-3 py-2 bg-error-container hover:bg-error/20 text-error border border-transparent rounded-full transition-colors",title:"Reset Link",children:u.jsx(tC,{size:16})})]}),u.jsx("p",{className:"text-xs text-text-tertiary",children:`Paste this link into your calendar app's "Subscribe by URL" or "Add Calendar from Internet" section.`})]}):u.jsx("button",{onClick:D,className:"w-full py-2 bg-primary hover:bg-primary-hover text-on-primary rounded-full font-bold transition-colors shadow-md",children:"Generate Sync Link"})]})]})]})},xWe=()=>{const[e,t]=I.useState([]),[r,n]=I.useState(!0),[i,a]=I.useState(null),[s,o]=I.useState(""),[l,c]=I.useState(""),d=I.useCallback(async()=>{try{n(!0);const b=await Z7();t(b)}catch(b){Re.error("Could not load sample sizes."),console.error(b)}finally{n(!1)}},[]);I.useEffect(()=>{d()},[d]);const f=b=>{a(b),o(b)},p=()=>{a(null),o("")},m=async b=>{const w=s.trim();if(!w||b===w){p();return}try{await B9e(b,w),Re.success(`Size '${b}' updated to '${w}'.`),p(),await d()}catch(_){Re.error(`Update failed: ${_.message}`)}},x=async b=>{b.preventDefault();const w=l.trim();if(w)try{await $9e(w),Re.success(`Size '${w}' created.`),c(""),await d()}catch(_){Re.error(`Create failed: ${_.message}`)}},v=async b=>{const w=e.find(C=>C.value===b),_=w&&w.usageCount>0?`WARNING: This size is currently in use by ${w.usageCount} variants. Deletion will fail unless usage is 0.`:"";if(window.confirm(`Are you sure you want to delete the size "${b}" from the system? ${_}`))try{await U9e(b),Re.success(`Size '${b}' successfully deleted.`),await d()}catch(C){Re.error(`Delete failed: ${C.message}`)}};return r?u.jsxs("div",{className:"flex items-center justify-center p-8",children:[u.jsx(O4,{className:"animate-spin"})," ",u.jsx("span",{className:"ml-2",children:"Loading sizes..."})]}):u.jsxs("section",{className:"md:bg-surface-container-low md:p-8 md:rounded-2xl md:border md:border-outline/10 max-w-4xl mx-auto transition-all",children:[u.jsx("h2",{className:"text-2xl font-semibold text-text-primary mb-4",children:"Manage Sample Sizes"}),u.jsx("p",{className:"text-text-secondary mb-6 max-w-2xl",children:"Here you can clean up typos or remove unused sample sizes from the suggestion list."}),u.jsxs("form",{onSubmit:x,className:"flex gap-2 mb-6 max-w-md",children:[u.jsx("input",{type:"text",value:l,onChange:b=>c(b.target.value),placeholder:"Add new size (e.g. 24x48)",className:"flex-grow p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-lg text-text-primary placeholder-text-secondary focus:border-primary focus:outline-none transition-all"}),u.jsxs("button",{type:"submit",disabled:!l.trim(),className:"px-6 py-2 bg-primary text-on-primary rounded-full hover:bg-primary-hover disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors font-bold shadow-sm",children:[u.jsx(Jl,{size:18}),"Add"]})]}),u.jsxs("div",{className:"max-w-xl space-y-0 divide-y divide-outline/10 border border-outline/10 rounded-xl overflow-hidden",children:[e.map(b=>u.jsxs("div",{className:"bg-surface-container-highest/30 p-4 flex items-center justify-between group hover:bg-surface-container-highest/60 transition-colors",children:[i===b.value?u.jsx("input",{type:"text",value:s,onChange:w=>o(w.target.value),className:"flex-grow p-2 bg-surface-container-high border-b-2 border-primary text-text-primary focus:outline-none",autoFocus:!0}):u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("span",{className:"text-text-primary font-medium",children:b.value}),b.usageCount>0&&u.jsxs("span",{className:"text-xs px-2 py-0.5 bg-surface-container-high text-text-secondary rounded-full border border-outline/10",children:[b.usageCount," variant",b.usageCount!==1?"s":""]})]}),u.jsx("div",{className:"flex items-center gap-2 ml-4",children:i===b.value?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>m(b.value),className:"p-2 text-primary hover:bg-primary/10 rounded-full transition-colors",children:u.jsx(vs,{size:18})}),u.jsx("button",{onClick:p,className:"p-2 text-error hover:bg-error/10 rounded-full transition-colors",children:u.jsx(Gr,{size:18})})]}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>f(b.value),className:"p-2 text-text-secondary hover:text-primary hover:bg-primary/10 rounded-full transition-colors",children:u.jsx(Qh,{size:18})}),u.jsx("button",{onClick:()=>v(b.value),disabled:b.usageCount>0,title:b.usageCount>0?"Cannot delete size currently in use":"Delete size",className:`p-2 rounded-full transition-colors ${b.usageCount>0?"text-outline/40 cursor-not-allowed":"text-error/80 hover:text-error hover:bg-error/10"}`,children:u.jsx(Bs,{size:18})})]})})]},b.value)),e.length===0&&!r&&u.jsx("p",{className:"text-text-secondary italic text-center py-4",children:"No custom sizes have been created yet."})]})]})},vWe=async e=>{try{return(await cr.post(sr("/api/reports/dashboard/send-test"),{settings:e})).data}catch(t){throw console.error("Error sending test dashboard email:",t),t}},yWe=async(e={})=>{try{return(await cr.get(sr("/api/report-generator/products"),{params:e})).data}catch(t){throw console.error("Error fetching product report:",t),t}},bWe=async(e={})=>{try{return(await cr.get(sr("/api/report-generator/jobs"),{params:e})).data}catch(t){throw console.error("Error fetching job report:",t),t}},wWe=async(e={})=>{try{return(await cr.get(sr("/api/report-generator/installers"),{params:e})).data}catch(t){throw console.error("Error fetching installer report:",t),t}},BK={isEnabled:!1,includeAllUpdates:!0,includePersonalAppointments:!0,personalAppointmentsDays:7,frequency:"daily",includeSamplesDue:!0,includeUpcomingJobs:!0,upcomingJobsDays:7,includePendingQuotes:!0,pendingQuotesDays:14},SWe=()=>{const{currentUser:e,saveCurrentUserPreferences:t,isDataLoading:r}=Kr(),[n,i]=I.useState(BK),[a,s]=I.useState(!0),[o,l]=I.useState(!0),[c,d]=I.useState(!1);I.useEffect(()=>{var x,v;if(!r&&e){const b=((x=e.preferences)==null?void 0:x.dashboardEmail)||{};i({...BK,...b}),s(((v=e.preferences)==null?void 0:v.notifyUpcomingJobs)!==!1),l(!1)}},[e,r]);const f=(x,v)=>{let b=v;x==="personalAppointmentsDays"&&(b=Math.max(1,parseInt(v,10)||1)),i(x==="includeAllUpdates"?w=>({...w,[x]:b,includeSamplesDue:b,includeUpcomingJobs:b,includePendingQuotes:b}):w=>({...w,[x]:b}))},p=async()=>{if(!e){qr.error("User not found.");return}const x={...e.preferences,dashboardEmail:n,notifyUpcomingJobs:a};await t(x)},m=async()=>{var x,v;d(!0),qr.loading("Sending test email...");try{await vWe(n),qr.dismiss(),qr.success(`Test email sent to ${e==null?void 0:e.email}!`)}catch(b){qr.dismiss();const w=((v=(x=b.response)==null?void 0:x.data)==null?void 0:v.error)||"An unknown error occurred.";qr.error(`Failed to send test: ${w}`)}finally{d(!1)}};return o?u.jsx("div",{className:"text-center p-8",children:"Loading settings..."}):u.jsxs("div",{className:"space-y-8 max-w-5xl mx-auto",children:[u.jsxs("section",{className:"md:bg-surface-container-low md:p-8 md:rounded-2xl md:border md:border-outline/10 transition-all",children:[u.jsxs("h2",{className:"text-2xl font-semibold text-text-primary mb-2 flex items-center gap-3",children:[u.jsx(pS,{className:"w-7 h-7 text-accent"}),"My Daily Update Email"]}),u.jsx("p",{className:"text-text-secondary mb-6",children:"Configure a daily summary email with system updates and your personal appointments. This email is sent only to you."}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between py-6 border-b border-outline/10 md:border md:bg-surface-container-highest md:rounded-xl md:p-6 md:border-outline/10",children:[u.jsx("label",{htmlFor:"isEnabled",className:"font-medium text-lg text-text-primary",children:"Receive Daily Update Email"}),u.jsxs("div",{className:"relative inline-block w-14 h-8 align-middle select-none transition duration-200 ease-in",children:[u.jsx("input",{type:"checkbox",id:"isEnabled",checked:n.isEnabled,onChange:x=>f("isEnabled",x.target.checked),className:"peer absolute block w-8 h-8 rounded-full bg-surface border-4 border-outline appearance-none cursor-pointer checked:right-0 checked:border-primary checked:bg-primary transition-all duration-200"}),u.jsx("label",{htmlFor:"isEnabled",className:"block overflow-hidden h-8 rounded-full bg-surface-container-highest border border-outline/20 cursor-pointer peer-checked:bg-primary/20 transition-colors"})]})]}),n.isEnabled&&u.jsx("div",{className:"space-y-6 pt-2",children:u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-medium text-text-primary mb-2",children:"Content to Include"}),u.jsxs("div",{className:"space-y-4 py-4 md:p-6 md:bg-surface-container-highest md:rounded-xl md:border md:border-outline/10",children:[u.jsxs("label",{className:"flex items-center gap-3",children:[u.jsx("input",{type:"checkbox",checked:n.includeAllUpdates,onChange:x=>f("includeAllUpdates",x.target.checked),className:"w-5 h-5 rounded border-outline/30 text-primary focus:ring-primary bg-surface-container-high"}),u.jsx("span",{className:"text-text-primary",children:"Include all system updates (samples, jobs, quotes, etc.)"})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("input",{type:"checkbox",id:"includePersonalAppointments",checked:n.includePersonalAppointments,onChange:x=>f("includePersonalAppointments",x.target.checked),className:"w-5 h-5 rounded border-outline/30 text-primary focus:ring-primary bg-surface-container-high"}),u.jsx("label",{htmlFor:"includePersonalAppointments",className:"text-text-primary",children:"Include my personal appointments for the next"}),u.jsx("input",{type:"number",value:n.personalAppointmentsDays,onChange:x=>f("personalAppointmentsDays",x.target.value),disabled:!n.includePersonalAppointments,className:"w-16 p-1 bg-surface-container-high border border-outline/20 rounded text-center text-text-primary disabled:opacity-50 focus:border-primary focus:outline-none"}),u.jsx("label",{htmlFor:"includePersonalAppointments",className:"text-text-primary",children:"days"})]})]})]})}),u.jsx("div",{className:"flex justify-end items-center gap-4 pt-4 mt-4 border-t border-outline/10",children:u.jsxs("button",{onClick:m,disabled:c,className:"flex items-center gap-2 py-2 px-6 text-sm bg-surface-container-highest hover:bg-surface-container-highest/80 rounded-full text-text-primary font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[u.jsx(uy,{size:18})," ",c?"Sending...":"Send Test"]})})]})]}),u.jsxs("section",{className:"md:bg-surface-container-low md:p-8 md:rounded-2xl md:border md:border-outline/10 transition-all",children:[u.jsxs("h2",{className:"text-xl font-semibold text-text-primary mb-2 flex items-center gap-3",children:[u.jsx(pS,{className:"w-6 h-6 text-accent"}),"Project Alerts"]}),u.jsxs("div",{className:"py-6 border-b border-outline/10 md:border md:bg-surface-container-highest md:rounded-xl md:p-6 md:border-outline/10 mt-4",children:[u.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:a,onChange:x=>s(x.target.checked),className:"w-5 h-5 rounded border-outline/30 text-primary focus:ring-primary bg-surface-container-high"}),u.jsx("span",{className:"text-text-primary font-medium",children:"Email me 2 days before my jobs start"})]}),u.jsx("p",{className:"text-xs text-text-secondary mt-2 ml-8",children:"If enabled, you will receive an individual email reminder for every project where you are assigned as the Project Lead."})]}),u.jsx("div",{className:"flex justify-end pt-8",children:u.jsxs("button",{onClick:p,className:"flex items-center gap-2 py-3 px-8 text-base bg-primary hover:bg-primary-hover rounded-full text-on-primary font-bold shadow-sm transition-all hover:shadow-md",children:[u.jsx(vs,{size:18})," Save My Settings"]})})]})]})},T_=()=>({withCredentials:!0,headers:{"Content-Type":"application/json"}}),z1={getAll:async()=>(await cr.get(sr("/api/email-templates"),T_())).data,getByKey:async e=>(await cr.get(sr(`/api/email-templates/${e}`),T_())).data,update:async(e,t)=>(await cr.put(sr(`/api/email-templates/${e}`),t,T_())).data,sendTest:async(e,t)=>{await cr.post(sr(`/api/email-templates/${e}/test`),{email:t},T_())}};var Gce={exports:{}},Kce={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var my=I;function EWe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var CWe=typeof Object.is=="function"?Object.is:EWe,kWe=my.useState,_We=my.useEffect,NWe=my.useLayoutEffect,AWe=my.useDebugValue;function TWe(e,t){var r=t(),n=kWe({inst:{value:r,getSnapshot:t}}),i=n[0].inst,a=n[1];return NWe(function(){i.value=r,i.getSnapshot=t,dD(i)&&a({inst:i})},[e,r,t]),_We(function(){return dD(i)&&a({inst:i}),e(function(){dD(i)&&a({inst:i})})},[e]),AWe(r),r}function dD(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!CWe(e,r)}catch{return!0}}function IWe(e,t){return t()}var OWe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?IWe:TWe;Kce.useSyncExternalStore=my.useSyncExternalStore!==void 0?my.useSyncExternalStore:OWe;Gce.exports=Kce;var O9=Gce.exports;function Ts(e){this.content=e}Ts.prototype={constructor:Ts,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,r){var n=r&&r!=e?this.remove(r):this,i=n.find(e),a=n.content.slice();return i==-1?a.push(r||e,t):(a[i+1]=t,r&&(a[i]=r)),new Ts(a)},remove:function(e){var t=this.find(e);if(t==-1)return this;var r=this.content.slice();return r.splice(t,2),new Ts(r)},addToStart:function(e,t){return new Ts([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var r=this.remove(e).content.slice();return r.push(e,t),new Ts(r)},addBefore:function(e,t,r){var n=this.remove(t),i=n.content.slice(),a=n.find(e);return i.splice(a==-1?i.length:a,0,t,r),new Ts(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=Ts.from(e),e.size?new Ts(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=Ts.from(e),e.size?new Ts(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Ts.from(e);for(var r=0;r<e.content.length;r+=2)t=t.remove(e.content[r]);return t},toObject:function(){var e={};return this.forEach(function(t,r){e[t]=r}),e},get size(){return this.content.length>>1}};Ts.from=function(e){if(e instanceof Ts)return e;var t=[];if(e)for(var r in e)t.push(r,e[r]);return new Ts(t)};function Xce(e,t,r){for(let n=0;;n++){if(n==e.childCount||n==t.childCount)return e.childCount==t.childCount?null:r;let i=e.child(n),a=t.child(n);if(i==a){r+=i.nodeSize;continue}if(!i.sameMarkup(a))return r;if(i.isText&&i.text!=a.text){for(let s=0;i.text[s]==a.text[s];s++)r++;return r}if(i.content.size||a.content.size){let s=Xce(i.content,a.content,r+1);if(s!=null)return s}r+=i.nodeSize}}function Yce(e,t,r,n){for(let i=e.childCount,a=t.childCount;;){if(i==0||a==0)return i==a?null:{a:r,b:n};let s=e.child(--i),o=t.child(--a),l=s.nodeSize;if(s==o){r-=l,n-=l;continue}if(!s.sameMarkup(o))return{a:r,b:n};if(s.isText&&s.text!=o.text){let c=0,d=Math.min(s.text.length,o.text.length);for(;c<d&&s.text[s.text.length-c-1]==o.text[o.text.length-c-1];)c++,r--,n--;return{a:r,b:n}}if(s.content.size||o.content.size){let c=Yce(s.content,o.content,r-1,n-1);if(c)return c}r-=l,n-=l}}class It{constructor(t,r){if(this.content=t,this.size=r||0,r==null)for(let n=0;n<t.length;n++)this.size+=t[n].nodeSize}nodesBetween(t,r,n,i=0,a){for(let s=0,o=0;o<r;s++){let l=this.content[s],c=o+l.nodeSize;if(c>t&&n(l,i+o,a||null,s)!==!1&&l.content.size){let d=o+1;l.nodesBetween(Math.max(0,t-d),Math.min(l.content.size,r-d),n,i+d)}o=c}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,r,n,i){let a="",s=!0;return this.nodesBetween(t,r,(o,l)=>{let c=o.isText?o.text.slice(Math.max(t,l)-l,r-l):o.isLeaf?i?typeof i=="function"?i(o):i:o.type.spec.leafText?o.type.spec.leafText(o):"":"";o.isBlock&&(o.isLeaf&&c||o.isTextblock)&&n&&(s?s=!1:a+=n),a+=c},0),a}append(t){if(!t.size)return this;if(!this.size)return t;let r=this.lastChild,n=t.firstChild,i=this.content.slice(),a=0;for(r.isText&&r.sameMarkup(n)&&(i[i.length-1]=r.withText(r.text+n.text),a=1);a<t.content.length;a++)i.push(t.content[a]);return new It(i,this.size+t.size)}cut(t,r=this.size){if(t==0&&r==this.size)return this;let n=[],i=0;if(r>t)for(let a=0,s=0;s<r;a++){let o=this.content[a],l=s+o.nodeSize;l>t&&((s<t||l>r)&&(o.isText?o=o.cut(Math.max(0,t-s),Math.min(o.text.length,r-s)):o=o.cut(Math.max(0,t-s-1),Math.min(o.content.size,r-s-1))),n.push(o),i+=o.nodeSize),s=l}return new It(n,i)}cutByIndex(t,r){return t==r?It.empty:t==0&&r==this.content.length?this:new It(this.content.slice(t,r))}replaceChild(t,r){let n=this.content[t];if(n==r)return this;let i=this.content.slice(),a=this.size+r.nodeSize-n.nodeSize;return i[t]=r,new It(i,a)}addToStart(t){return new It([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new It(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(t.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let r=this.content[t];if(!r)throw new RangeError("Index "+t+" out of range for "+this);return r}maybeChild(t){return this.content[t]||null}forEach(t){for(let r=0,n=0;r<this.content.length;r++){let i=this.content[r];t(i,n,r),n+=i.nodeSize}}findDiffStart(t,r=0){return Xce(this,t,r)}findDiffEnd(t,r=this.size,n=t.size){return Yce(this,t,r,n)}findIndex(t){if(t==0)return I_(0,t);if(t==this.size)return I_(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let r=0,n=0;;r++){let i=this.child(r),a=n+i.nodeSize;if(a>=t)return a==t?I_(r+1,a):I_(r,n);n=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,r){if(!r)return It.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new It(r.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return It.empty;let r,n=0;for(let i=0;i<t.length;i++){let a=t[i];n+=a.nodeSize,i&&a.isText&&t[i-1].sameMarkup(a)?(r||(r=t.slice(0,i)),r[r.length-1]=a.withText(r[r.length-1].text+a.text)):r&&r.push(a)}return new It(r||t,n)}static from(t){if(!t)return It.empty;if(t instanceof It)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new It([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}It.empty=new It([],0);const fD={index:0,offset:0};function I_(e,t){return fD.index=e,fD.offset=t,fD}function ET(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let r=Array.isArray(e);if(Array.isArray(t)!=r)return!1;if(r){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!ET(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!ET(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}let ci=class M8{constructor(t,r){this.type=t,this.attrs=r}addToSet(t){let r,n=!1;for(let i=0;i<t.length;i++){let a=t[i];if(this.eq(a))return t;if(this.type.excludes(a.type))r||(r=t.slice(0,i));else{if(a.type.excludes(this.type))return t;!n&&a.type.rank>this.type.rank&&(r||(r=t.slice(0,i)),r.push(this),n=!0),r&&r.push(a)}}return r||(r=t.slice()),n||r.push(this),r}removeFromSet(t){for(let r=0;r<t.length;r++)if(this.eq(t[r]))return t.slice(0,r).concat(t.slice(r+1));return t}isInSet(t){for(let r=0;r<t.length;r++)if(this.eq(t[r]))return!0;return!1}eq(t){return this==t||this.type==t.type&&ET(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let r in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let n=t.marks[r.type];if(!n)throw new RangeError(`There is no mark type ${r.type} in this schema`);let i=n.create(r.attrs);return n.checkAttrs(i.attrs),i}static sameSet(t,r){if(t==r)return!0;if(t.length!=r.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].eq(r[n]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return M8.none;if(t instanceof M8)return[t];let r=t.slice();return r.sort((n,i)=>n.type.rank-i.type.rank),r}};ci.none=[];class CT extends Error{}class qt{constructor(t,r,n){this.content=t,this.openStart=r,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,r){let n=Jce(this.content,t+this.openStart,r);return n&&new qt(n,this.openStart,this.openEnd)}removeBetween(t,r){return new qt(Qce(this.content,t+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,r){if(!r)return qt.empty;let n=r.openStart||0,i=r.openEnd||0;if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new qt(It.fromJSON(t,r.content),n,i)}static maxOpen(t,r=!0){let n=0,i=0;for(let a=t.firstChild;a&&!a.isLeaf&&(r||!a.type.spec.isolating);a=a.firstChild)n++;for(let a=t.lastChild;a&&!a.isLeaf&&(r||!a.type.spec.isolating);a=a.lastChild)i++;return new qt(t,n,i)}}qt.empty=new qt(It.empty,0,0);function Qce(e,t,r){let{index:n,offset:i}=e.findIndex(t),a=e.maybeChild(n),{index:s,offset:o}=e.findIndex(r);if(i==t||a.isText){if(o!=r&&!e.child(s).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(r))}if(n!=s)throw new RangeError("Removing non-flat range");return e.replaceChild(n,a.copy(Qce(a.content,t-i-1,r-i-1)))}function Jce(e,t,r,n){let{index:i,offset:a}=e.findIndex(t),s=e.maybeChild(i);if(a==t||s.isText)return n&&!n.canReplace(i,i,r)?null:e.cut(0,t).append(r).append(e.cut(t));let o=Jce(s.content,t-a-1,r,s);return o&&e.replaceChild(i,s.copy(o))}function PWe(e,t,r){if(r.openStart>e.depth)throw new CT("Inserted content deeper than insertion position");if(e.depth-r.openStart!=t.depth-r.openEnd)throw new CT("Inconsistent open depths");return Zce(e,t,r,0)}function Zce(e,t,r,n){let i=e.index(n),a=e.node(n);if(i==t.index(n)&&n<e.depth-r.openStart){let s=Zce(e,t,r,n+1);return a.copy(a.content.replaceChild(i,s))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&e.depth==n&&t.depth==n){let s=e.parent,o=s.content;return Ng(s,o.cut(0,e.parentOffset).append(r.content).append(o.cut(t.parentOffset)))}else{let{start:s,end:o}=RWe(r,e);return Ng(a,tue(e,s,o,t,n))}else return Ng(a,kT(e,t,n))}function eue(e,t){if(!t.type.compatibleContent(e.type))throw new CT("Cannot join "+t.type.name+" onto "+e.type.name)}function F8(e,t,r){let n=e.node(r);return eue(n,t.node(r)),n}function _g(e,t){let r=t.length-1;r>=0&&e.isText&&e.sameMarkup(t[r])?t[r]=e.withText(t[r].text+e.text):t.push(e)}function E2(e,t,r,n){let i=(t||e).node(r),a=0,s=t?t.index(r):i.childCount;e&&(a=e.index(r),e.depth>r?a++:e.textOffset&&(_g(e.nodeAfter,n),a++));for(let o=a;o<s;o++)_g(i.child(o),n);t&&t.depth==r&&t.textOffset&&_g(t.nodeBefore,n)}function Ng(e,t){return e.type.checkContent(t),e.copy(t)}function tue(e,t,r,n,i){let a=e.depth>i&&F8(e,t,i+1),s=n.depth>i&&F8(r,n,i+1),o=[];return E2(null,e,i,o),a&&s&&t.index(i)==r.index(i)?(eue(a,s),_g(Ng(a,tue(e,t,r,n,i+1)),o)):(a&&_g(Ng(a,kT(e,t,i+1)),o),E2(t,r,i,o),s&&_g(Ng(s,kT(r,n,i+1)),o)),E2(n,null,i,o),new It(o)}function kT(e,t,r){let n=[];if(E2(null,e,r,n),e.depth>r){let i=F8(e,t,r+1);_g(Ng(i,kT(e,t,r+1)),n)}return E2(t,null,r,n),new It(n)}function RWe(e,t){let r=t.depth-e.openStart,i=t.node(r).copy(e.content);for(let a=r-1;a>=0;a--)i=t.node(a).copy(It.from(i));return{start:i.resolveNoCache(e.openStart+r),end:i.resolveNoCache(i.content.size-e.openEnd-r)}}class SS{constructor(t,r,n){this.pos=t,this.path=r,this.parentOffset=n,this.depth=r.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,r=this.index(this.depth);if(r==t.childCount)return null;let n=this.pos-this.path[this.path.length-1],i=t.child(r);return n?t.child(r).cut(n):i}get nodeBefore(){let t=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(t).cut(0,r):t==0?null:this.parent.child(t-1)}posAtIndex(t,r){r=this.resolveDepth(r);let n=this.path[r*3],i=r==0?0:this.path[r*3-1]+1;for(let a=0;a<t;a++)i+=n.child(a).nodeSize;return i}marks(){let t=this.parent,r=this.index();if(t.content.size==0)return ci.none;if(this.textOffset)return t.child(r).marks;let n=t.maybeChild(r-1),i=t.maybeChild(r);if(!n){let o=n;n=i,i=o}let a=n.marks;for(var s=0;s<a.length;s++)a[s].type.spec.inclusive===!1&&(!i||!a[s].isInSet(i.marks))&&(a=a[s--].removeFromSet(a));return a}marksAcross(t){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let n=r.marks,i=t.parent.maybeChild(t.index());for(var a=0;a<n.length;a++)n[a].type.spec.inclusive===!1&&(!i||!n[a].isInSet(i.marks))&&(n=n[a--].removeFromSet(n));return n}sharedDepth(t){for(let r=this.depth;r>0;r--)if(this.start(r)<=t&&this.end(r)>=t)return r;return 0}blockRange(t=this,r){if(t.pos<this.pos)return t.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!r||r(this.node(n))))return new _T(this,t,n);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let r=1;r<=this.depth;r++)t+=(t?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return t+":"+this.parentOffset}static resolve(t,r){if(!(r>=0&&r<=t.content.size))throw new RangeError("Position "+r+" out of range");let n=[],i=0,a=r;for(let s=t;;){let{index:o,offset:l}=s.content.findIndex(a),c=a-l;if(n.push(s,o,i+l),!c||(s=s.child(o),s.isText))break;a=c-1,i+=l+1}return new SS(r,n,a)}static resolveCached(t,r){let n=UK.get(t);if(n)for(let a=0;a<n.elts.length;a++){let s=n.elts[a];if(s.pos==r)return s}else UK.set(t,n=new jWe);let i=n.elts[n.i]=SS.resolve(t,r);return n.i=(n.i+1)%DWe,i}}class jWe{constructor(){this.elts=[],this.i=0}}const DWe=12,UK=new WeakMap;class _T{constructor(t,r,n){this.$from=t,this.$to=r,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const MWe=Object.create(null);let wh=class L8{constructor(t,r,n,i=ci.none){this.type=t,this.attrs=r,this.marks=i,this.content=n||It.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,r,n,i=0){this.content.nodesBetween(t,r,n,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,r,n,i){return this.content.textBetween(t,r,n,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,r,n){return this.type==t&&ET(this.attrs,r||t.defaultAttrs||MWe)&&ci.sameSet(this.marks,n||ci.none)}copy(t=null){return t==this.content?this:new L8(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new L8(this.type,this.attrs,this.content,t)}cut(t,r=this.content.size){return t==0&&r==this.content.size?this:this.copy(this.content.cut(t,r))}slice(t,r=this.content.size,n=!1){if(t==r)return qt.empty;let i=this.resolve(t),a=this.resolve(r),s=n?0:i.sharedDepth(r),o=i.start(s),c=i.node(s).content.cut(i.pos-o,a.pos-o);return new qt(c,i.depth-s,a.depth-s)}replace(t,r,n){return PWe(this.resolve(t),this.resolve(r),n)}nodeAt(t){for(let r=this;;){let{index:n,offset:i}=r.content.findIndex(t);if(r=r.maybeChild(n),!r)return null;if(i==t||r.isText)return r;t-=i+1}}childAfter(t){let{index:r,offset:n}=this.content.findIndex(t);return{node:this.content.maybeChild(r),index:r,offset:n}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:r,offset:n}=this.content.findIndex(t);if(n<t)return{node:this.content.child(r),index:r,offset:n};let i=this.content.child(r-1);return{node:i,index:r-1,offset:n-i.nodeSize}}resolve(t){return SS.resolveCached(this,t)}resolveNoCache(t){return SS.resolve(this,t)}rangeHasMark(t,r,n){let i=!1;return r>t&&this.nodesBetween(t,r,a=>(n.isInSet(a.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),rue(this.marks,t)}contentMatchAt(t){let r=this.type.contentMatch.matchFragment(this.content,0,t);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(t,r,n=It.empty,i=0,a=n.childCount){let s=this.contentMatchAt(t).matchFragment(n,i,a),o=s&&s.matchFragment(this.content,r);if(!o||!o.validEnd)return!1;for(let l=i;l<a;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0}canReplaceWith(t,r,n,i){if(i&&!this.type.allowsMarks(i))return!1;let a=this.contentMatchAt(t).matchType(n),s=a&&a.matchFragment(this.content,r);return s?s.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=ci.none;for(let r=0;r<this.marks.length;r++){let n=this.marks[r];n.type.checkAttrs(n.attrs),t=n.addToSet(t)}if(!ci.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let t={type:this.type.name};for(let r in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(r=>r.toJSON())),t}static fromJSON(t,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let n;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=r.marks.map(t.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(r.text,n)}let i=It.fromJSON(t,r.content),a=t.nodeType(r.type).create(r.attrs,i,n);return a.type.checkAttrs(a.attrs),a}};wh.prototype.text=void 0;class NT extends wh{constructor(t,r,n,i){if(super(t,r,null,i),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):rue(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,r){return this.text.slice(t,r)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new NT(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new NT(this.type,this.attrs,t,this.marks)}cut(t=0,r=this.text.length){return t==0&&r==this.text.length?this:this.withText(this.text.slice(t,r))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function rue(e,t){for(let r=e.length-1;r>=0;r--)t=e[r].type.name+"("+t+")";return t}class ix{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,r){let n=new FWe(t,r);if(n.next==null)return ix.empty;let i=nue(n);n.next&&n.err("Unexpected trailing text");let a=WWe(HWe(i));return VWe(a,n),a}matchType(t){for(let r=0;r<this.next.length;r++)if(this.next[r].type==t)return this.next[r].next;return null}matchFragment(t,r=0,n=t.childCount){let i=this;for(let a=r;i&&a<n;a++)i=i.matchType(t.child(a).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:r}=this.next[t];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(t){for(let r=0;r<this.next.length;r++)for(let n=0;n<t.next.length;n++)if(this.next[r].type==t.next[n].type)return!0;return!1}fillBefore(t,r=!1,n=0){let i=[this];function a(s,o){let l=s.matchFragment(t,n);if(l&&(!r||l.validEnd))return It.from(o.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:d,next:f}=s.next[c];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let p=a(f,o.concat(d));if(p)return p}}return null}return a(this,[])}findWrapping(t){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==t)return this.wrapCache[n+1];let r=this.computeWrapping(t);return this.wrapCache.push(t,r),r}computeWrapping(t){let r=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let i=n.shift(),a=i.match;if(a.matchType(t)){let s=[];for(let o=i;o.type;o=o.via)s.push(o.type);return s.reverse()}for(let s=0;s<a.next.length;s++){let{type:o,next:l}=a.next[s];!o.isLeaf&&!o.hasRequiredAttrs()&&!(o.name in r)&&(!i.type||l.validEnd)&&(n.push({match:o.contentMatch,type:o,via:i}),r[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function r(n){t.push(n);for(let i=0;i<n.next.length;i++)t.indexOf(n.next[i].next)==-1&&r(n.next[i].next)}return r(this),t.map((n,i)=>{let a=i+(n.validEnd?"*":" ")+" ";for(let s=0;s<n.next.length;s++)a+=(s?", ":"")+n.next[s].type.name+"->"+t.indexOf(n.next[s].next);return a}).join(`
`)}}ix.empty=new ix(!0);class FWe{constructor(t,r){this.string=t,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function nue(e){let t=[];do t.push(LWe(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function LWe(e){let t=[];do t.push(BWe(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function BWe(e){let t=zWe(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=UWe(e,t);else break;return t}function $K(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function UWe(e,t){let r=$K(e),n=r;return e.eat(",")&&(e.next!="}"?n=$K(e):n=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:t}}function $We(e,t){let r=e.nodeTypes,n=r[t];if(n)return[n];let i=[];for(let a in r){let s=r[a];s.isInGroup(t)&&i.push(s)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function zWe(e){if(e.eat("(")){let t=nue(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=$We(e,e.next).map(r=>(e.inline==null?e.inline=r.isInline:e.inline!=r.isInline&&e.err("Mixing inline and block content"),{type:"name",value:r}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function HWe(e){let t=[[]];return i(a(e,0),r()),t;function r(){return t.push([])-1}function n(s,o,l){let c={term:l,to:o};return t[s].push(c),c}function i(s,o){s.forEach(l=>l.to=o)}function a(s,o){if(s.type=="choice")return s.exprs.reduce((l,c)=>l.concat(a(c,o)),[]);if(s.type=="seq")for(let l=0;;l++){let c=a(s.exprs[l],o);if(l==s.exprs.length-1)return c;i(c,o=r())}else if(s.type=="star"){let l=r();return n(o,l),i(a(s.expr,l),l),[n(l)]}else if(s.type=="plus"){let l=r();return i(a(s.expr,o),l),i(a(s.expr,l),l),[n(l)]}else{if(s.type=="opt")return[n(o)].concat(a(s.expr,o));if(s.type=="range"){let l=o;for(let c=0;c<s.min;c++){let d=r();i(a(s.expr,l),d),l=d}if(s.max==-1)i(a(s.expr,l),l);else for(let c=s.min;c<s.max;c++){let d=r();n(l,d),i(a(s.expr,l),d),l=d}return[n(l)]}else{if(s.type=="name")return[n(o,void 0,s.value)];throw new Error("Unknown expr type")}}}}function iue(e,t){return t-e}function zK(e,t){let r=[];return n(t),r.sort(iue);function n(i){let a=e[i];if(a.length==1&&!a[0].term)return n(a[0].to);r.push(i);for(let s=0;s<a.length;s++){let{term:o,to:l}=a[s];!o&&r.indexOf(l)==-1&&n(l)}}}function WWe(e){let t=Object.create(null);return r(zK(e,0));function r(n){let i=[];n.forEach(s=>{e[s].forEach(({term:o,to:l})=>{if(!o)return;let c;for(let d=0;d<i.length;d++)i[d][0]==o&&(c=i[d][1]);zK(e,l).forEach(d=>{c||i.push([o,c=[]]),c.indexOf(d)==-1&&c.push(d)})})});let a=t[n.join(",")]=new ix(n.indexOf(e.length-1)>-1);for(let s=0;s<i.length;s++){let o=i[s][1].sort(iue);a.next.push({type:i[s][0],next:t[o.join(",")]||r(o)})}return a}}function VWe(e,t){for(let r=0,n=[e];r<n.length;r++){let i=n[r],a=!i.validEnd,s=[];for(let o=0;o<i.next.length;o++){let{type:l,next:c}=i.next[o];s.push(l.name),a&&!(l.isText||l.hasRequiredAttrs())&&(a=!1),n.indexOf(c)==-1&&n.push(c)}a&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function aue(e){let t=Object.create(null);for(let r in e){let n=e[r];if(!n.hasDefault)return null;t[r]=n.default}return t}function sue(e,t){let r=Object.create(null);for(let n in e){let i=t&&t[n];if(i===void 0){let a=e[n];if(a.hasDefault)i=a.default;else throw new RangeError("No value supplied for attribute "+n)}r[n]=i}return r}function oue(e,t,r,n){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${r} of type ${i}`);for(let i in e){let a=e[i];a.validate&&a.validate(t[i])}}function lue(e,t){let r=Object.create(null);if(t)for(let n in t)r[n]=new GWe(e,n,t[n]);return r}let HK=class cue{constructor(t,r,n){this.name=t,this.schema=r,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=lue(t,n.attrs),this.defaultAttrs=aue(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ix.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:sue(this.attrs,t)}create(t=null,r,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new wh(this,this.computeAttrs(t),It.from(r),ci.setFrom(n))}createChecked(t=null,r,n){return r=It.from(r),this.checkContent(r),new wh(this,this.computeAttrs(t),r,ci.setFrom(n))}createAndFill(t=null,r,n){if(t=this.computeAttrs(t),r=It.from(r),r.size){let s=this.contentMatch.fillBefore(r);if(!s)return null;r=s.append(r)}let i=this.contentMatch.matchFragment(r),a=i&&i.fillBefore(It.empty,!0);return a?new wh(this,t,r.append(a),ci.setFrom(n)):null}validContent(t){let r=this.contentMatch.matchFragment(t);if(!r||!r.validEnd)return!1;for(let n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){oue(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let r=0;r<t.length;r++)if(!this.allowsMarkType(t[r].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let r;for(let n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?r&&r.push(t[n]):r||(r=t.slice(0,n));return r?r.length?r:ci.none:t}static compile(t,r){let n=Object.create(null);t.forEach((a,s)=>n[a]=new cue(a,r,s));let i=r.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let a in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function qWe(e,t,r){let n=r.split("|");return i=>{let a=i===null?"null":typeof i;if(n.indexOf(a)<0)throw new RangeError(`Expected value of type ${n} for attribute ${t} on type ${e}, got ${a}`)}}class GWe{constructor(t,r,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?qWe(t,r,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class c3{constructor(t,r,n,i){this.name=t,this.rank=r,this.schema=n,this.spec=i,this.attrs=lue(t,i.attrs),this.excluded=null;let a=aue(this.attrs);this.instance=a?new ci(this,a):null}create(t=null){return!t&&this.instance?this.instance:new ci(this,sue(this.attrs,t))}static compile(t,r){let n=Object.create(null),i=0;return t.forEach((a,s)=>n[a]=new c3(a,i++,r,s)),n}removeFromSet(t){for(var r=0;r<t.length;r++)t[r].type==this&&(t=t.slice(0,r).concat(t.slice(r+1)),r--);return t}isInSet(t){for(let r=0;r<t.length;r++)if(t[r].type==this)return t[r]}checkAttrs(t){oue(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class uue{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let i in t)r[i]=t[i];r.nodes=Ts.from(t.nodes),r.marks=Ts.from(t.marks||{}),this.nodes=HK.compile(this.spec.nodes,this),this.marks=c3.compile(this.spec.marks,this);let n=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let a=this.nodes[i],s=a.spec.content||"",o=a.spec.marks;if(a.contentMatch=n[s]||(n[s]=ix.parse(s,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet=o=="_"?null:o?WK(this,o.split(" ")):o==""||!a.inlineContent?[]:null}for(let i in this.marks){let a=this.marks[i],s=a.spec.excludes;a.excluded=s==null?[a]:s==""?[]:WK(this,s.split(" "))}this.nodeFromJSON=i=>wh.fromJSON(this,i),this.markFromJSON=i=>ci.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,r=null,n,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof HK){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(r,n,i)}text(t,r){let n=this.nodes.text;return new NT(n,n.defaultAttrs,t,ci.setFrom(r))}mark(t,r){return typeof t=="string"&&(t=this.marks[t]),t.create(r)}nodeType(t){let r=this.nodes[t];if(!r)throw new RangeError("Unknown node type: "+t);return r}}function WK(e,t){let r=[];for(let n=0;n<t.length;n++){let i=t[n],a=e.marks[i],s=a;if(a)r.push(a);else for(let o in e.marks){let l=e.marks[o];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&r.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[n]+"'")}return r}function KWe(e){return e.tag!=null}function XWe(e){return e.style!=null}let C2=class B8{constructor(t,r){this.schema=t,this.rules=r,this.tags=[],this.styles=[];let n=this.matchedStyles=[];r.forEach(i=>{if(KWe(i))this.tags.push(i);else if(XWe(i)){let a=/[^=]*/.exec(i.style)[0];n.indexOf(a)<0&&n.push(a),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let a=t.nodes[i.node];return a.contentMatch.matchType(a)})}parse(t,r={}){let n=new qK(this,r,!1);return n.addAll(t,ci.none,r.from,r.to),n.finish()}parseSlice(t,r={}){let n=new qK(this,r,!0);return n.addAll(t,ci.none,r.from,r.to),qt.maxOpen(n.finish())}matchTag(t,r,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let a=this.tags[i];if(JWe(t,a.tag)&&(a.namespace===void 0||t.namespaceURI==a.namespace)&&(!a.context||r.matchesContext(a.context))){if(a.getAttrs){let s=a.getAttrs(t);if(s===!1)continue;a.attrs=s||void 0}return a}}}matchStyle(t,r,n,i){for(let a=i?this.styles.indexOf(i)+1:0;a<this.styles.length;a++){let s=this.styles[a],o=s.style;if(!(o.indexOf(t)!=0||s.context&&!n.matchesContext(s.context)||o.length>t.length&&(o.charCodeAt(t.length)!=61||o.slice(t.length+1)!=r))){if(s.getAttrs){let l=s.getAttrs(r);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(t){let r=[];function n(i){let a=i.priority==null?50:i.priority,s=0;for(;s<r.length;s++){let o=r[s];if((o.priority==null?50:o.priority)<a)break}r.splice(s,0,i)}for(let i in t.marks){let a=t.marks[i].spec.parseDOM;a&&a.forEach(s=>{n(s=GK(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in t.nodes){let a=t.nodes[i].spec.parseDOM;a&&a.forEach(s=>{n(s=GK(s)),s.node||s.ignore||s.mark||(s.node=i)})}return r}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new B8(t,B8.schemaRules(t)))}};const due={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},YWe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},fue={ol:!0,ul:!0},ES=1,U8=2,k2=4;function VK(e,t,r){return t!=null?(t?ES:0)|(t==="full"?U8:0):e&&e.whitespace=="pre"?ES|U8:r&~k2}class O_{constructor(t,r,n,i,a,s){this.type=t,this.attrs=r,this.marks=n,this.solid=i,this.options=s,this.content=[],this.activeMarks=ci.none,this.match=a||(s&k2?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(It.from(t));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let n=this.type.contentMatch,i;return(i=n.findWrapping(t.type))?(this.match=n,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&ES)){let n=this.content[this.content.length-1],i;if(n&&n.isText&&(i=/[ \t\r\n\u000c]+$/.exec(n.text))){let a=n;n.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=a.withText(a.text.slice(0,a.text.length-i[0].length))}}let r=It.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(It.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!due.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class qK{constructor(t,r,n){this.parser=t,this.options=r,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let i=r.topNode,a,s=VK(null,r.preserveWhitespace,0)|(n?k2:0);i?a=new O_(i.type,i.attrs,ci.none,!0,r.topMatch||i.type.contentMatch,s):n?a=new O_(null,null,ci.none,!0,null,s):a=new O_(t.schema.topNodeType,null,ci.none,!0,null,s),this.nodes=[a],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,r){t.nodeType==3?this.addTextNode(t,r):t.nodeType==1&&this.addElement(t,r)}addTextNode(t,r){let n=t.nodeValue,i=this.top,a=i.options&U8?"full":this.localPreserveWS||(i.options&ES)>0,{schema:s}=this.parser;if(a==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(n)){if(a)if(a==="full")n=n.replace(/\r\n?/g,`
`);else if(s.linebreakReplacement&&/[\r\n]/.test(n)&&this.top.findWrapping(s.linebreakReplacement.create())){let o=n.split(/\r?\n|\r/);for(let l=0;l<o.length;l++)l&&this.insertNode(s.linebreakReplacement.create(),r,!0),o[l]&&this.insertNode(s.text(o[l]),r,!/\S/.test(o[l]));n=""}else n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],l=t.previousSibling;(!o||l&&l.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(n=n.slice(1))}n&&this.insertNode(s.text(n),r,!/\S/.test(n)),this.findInText(t)}else this.findInside(t)}addElement(t,r,n){let i=this.localPreserveWS,a=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let s=t.nodeName.toLowerCase(),o;fue.hasOwnProperty(s)&&this.parser.normalizeLists&&QWe(t);let l=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(o=this.parser.matchTag(t,this,n));e:if(l?l.ignore:YWe.hasOwnProperty(s))this.findInside(t),this.ignoreFallback(t,r);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(t=l.skip);let c,d=this.needsBlock;if(due.hasOwnProperty(s))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),c=!0,a.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,r);break e}let f=l&&l.skip?r:this.readStyles(t,r);f&&this.addAll(t,f),c&&this.sync(a),this.needsBlock=d}else{let c=this.readStyles(t,r);c&&this.addElementByRule(t,l,c,l.consuming===!1?o:void 0)}this.localPreserveWS=i}leafFallback(t,r){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),r)}ignoreFallback(t,r){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(t,r){let n=t.style;if(n&&n.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let a=this.parser.matchedStyles[i],s=n.getPropertyValue(a);if(s)for(let o=void 0;;){let l=this.parser.matchStyle(a,s,this,o);if(!l)break;if(l.ignore)return null;if(l.clearMark?r=r.filter(c=>!l.clearMark(c)):r=r.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)o=l;else break}}return r}addElementByRule(t,r,n,i){let a,s;if(r.node)if(s=this.parser.schema.nodes[r.node],s.isLeaf)this.insertNode(s.create(r.attrs),n,t.nodeName=="BR")||this.leafFallback(t,n);else{let l=this.enter(s,r.attrs||null,n,r.preserveWhitespace);l&&(a=!0,n=l)}else{let l=this.parser.schema.marks[r.mark];n=n.concat(l.create(r.attrs))}let o=this.top;if(s&&s.isLeaf)this.findInside(t);else if(i)this.addElement(t,n,i);else if(r.getContent)this.findInside(t),r.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l,n,!1));else{let l=t;typeof r.contentElement=="string"?l=t.querySelector(r.contentElement):typeof r.contentElement=="function"?l=r.contentElement(t):r.contentElement&&(l=r.contentElement),this.findAround(t,l,!0),this.addAll(l,n),this.findAround(t,l,!1)}a&&this.sync(o)&&this.open--}addAll(t,r,n,i){let a=n||0;for(let s=n?t.childNodes[n]:t.firstChild,o=i==null?null:t.childNodes[i];s!=o;s=s.nextSibling,++a)this.findAtPoint(t,a),this.addDOM(s,r);this.findAtPoint(t,a)}findPlace(t,r,n){let i,a;for(let s=this.open,o=0;s>=0;s--){let l=this.nodes[s],c=l.findWrapping(t);if(c&&(!i||i.length>c.length+o)&&(i=c,a=l,!c.length))break;if(l.solid){if(n)break;o+=2}}if(!i)return null;this.sync(a);for(let s=0;s<i.length;s++)r=this.enterInner(i[s],null,r,!1);return r}insertNode(t,r,n){if(t.isInline&&this.needsBlock&&!this.top.type){let a=this.textblockFromContext();a&&(r=this.enterInner(a,null,r))}let i=this.findPlace(t,r,n);if(i){this.closeExtra();let a=this.top;a.match&&(a.match=a.match.matchType(t.type));let s=ci.none;for(let o of i.concat(t.marks))(a.type?a.type.allowsMarkType(o.type):KK(o.type,t.type))&&(s=o.addToSet(s));return a.content.push(t.mark(s)),!0}return!1}enter(t,r,n,i){let a=this.findPlace(t.create(r),n,!1);return a&&(a=this.enterInner(t,r,n,!0,i)),a}enterInner(t,r,n,i=!1,a){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(t);let o=VK(t,a,s.options);s.options&k2&&s.content.length==0&&(o|=k2);let l=ci.none;return n=n.filter(c=>(s.type?s.type.allowsMarkType(c.type):KK(c.type,t))?(l=c.addToSet(l),!1):!0),this.nodes.push(new O_(t,r,l,i,null,o)),this.open++,n}closeExtra(t=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let r=this.open;r>=0;r--){if(this.nodes[r]==t)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=ES)}return!1}get currentPos(){this.closeExtra();let t=0;for(let r=this.open;r>=0;r--){let n=this.nodes[r].content;for(let i=n.length-1;i>=0;i--)t+=n[i].nodeSize;r&&t++}return t}findAtPoint(t,r){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==r&&(this.find[n].pos=this.currentPos)}findInside(t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&t.nodeType==1&&t.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(t,r,n){if(t!=r&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&r.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&(this.find[r].pos=this.currentPos-(t.nodeValue.length-this.find[r].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let r=t.split("/"),n=this.options.context,i=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),a=-(n?n.depth+1:0)+(i?0:1),s=(o,l)=>{for(;o>=0;o--){let c=r[o];if(c==""){if(o==r.length-1||o==0)continue;for(;l>=a;l--)if(s(o-1,l))return!0;return!1}else{let d=l>0||l==0&&i?this.nodes[l].type:n&&l>=a?n.node(l-a).type:null;if(!d||d.name!=c&&!d.isInGroup(c))return!1;l--}}return!0};return s(r.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let r=t.depth;r>=0;r--){let n=t.node(r).contentMatchAt(t.indexAfter(r)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}}}function QWe(e){for(let t=e.firstChild,r=null;t;t=t.nextSibling){let n=t.nodeType==1?t.nodeName.toLowerCase():null;n&&fue.hasOwnProperty(n)&&r?(r.appendChild(t),t=r):n=="li"?r=t:n&&(r=null)}}function JWe(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function GK(e){let t={};for(let r in e)t[r]=e[r];return t}function KK(e,t){let r=t.schema.nodes;for(let n in r){let i=r[n];if(!i.allowsMarkType(e))continue;let a=[],s=o=>{a.push(o);for(let l=0;l<o.edgeCount;l++){let{type:c,next:d}=o.edge(l);if(c==t||a.indexOf(d)<0&&s(d))return!0}};if(s(i.contentMatch))return!0}}class Wx{constructor(t,r){this.nodes=t,this.marks=r}serializeFragment(t,r={},n){n||(n=hD(r).createDocumentFragment());let i=n,a=[];return t.forEach(s=>{if(a.length||s.marks.length){let o=0,l=0;for(;o<a.length&&l<s.marks.length;){let c=s.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(a[o][0])||c.type.spec.spanning===!1)break;o++,l++}for(;o<a.length;)i=a.pop()[1];for(;l<s.marks.length;){let c=s.marks[l++],d=this.serializeMark(c,s.isInline,r);d&&(a.push([c,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(s,r))}),n}serializeNodeInner(t,r){let{dom:n,contentDOM:i}=GN(hD(r),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,r,i)}return n}serializeNode(t,r={}){let n=this.serializeNodeInner(t,r);for(let i=t.marks.length-1;i>=0;i--){let a=this.serializeMark(t.marks[i],t.isInline,r);a&&((a.contentDOM||a.dom).appendChild(n),n=a.dom)}return n}serializeMark(t,r,n={}){let i=this.marks[t.type.name];return i&&GN(hD(n),i(t,r),null,t.attrs)}static renderSpec(t,r,n=null,i){return GN(t,r,n,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new Wx(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let r=XK(t.nodes);return r.text||(r.text=n=>n.text),r}static marksFromSchema(t){return XK(t.marks)}}function XK(e){let t={};for(let r in e){let n=e[r].spec.toDOM;n&&(t[r]=n)}return t}function hD(e){return e.document||window.document}const YK=new WeakMap;function ZWe(e){let t=YK.get(e);return t===void 0&&YK.set(e,t=eVe(e)),t}function eVe(e){let t=null;function r(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")t||(t=[]),t.push(n);else for(let i=0;i<n.length;i++)r(n[i]);else for(let i in n)r(n[i])}return r(e),t}function GN(e,t,r,n){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],a;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(a=ZWe(n))&&a.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(r=i.slice(0,s),i=i.slice(s+1));let o,l=r?e.createElementNS(r,i):e.createElement(i),c=t[1],d=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){d=2;for(let f in c)if(c[f]!=null){let p=f.indexOf(" ");p>0?l.setAttributeNS(f.slice(0,p),f.slice(p+1),c[f]):f=="style"&&l.style?l.style.cssText=c[f]:l.setAttribute(f,c[f])}}for(let f=d;f<t.length;f++){let p=t[f];if(p===0){if(f<t.length-1||f>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:m,contentDOM:x}=GN(e,p,r,n);if(l.appendChild(m),x){if(o)throw new RangeError("Multiple content holes");o=x}}}return{dom:l,contentDOM:o}}const hue=65535,pue=Math.pow(2,16);function tVe(e,t){return e+t*pue}function QK(e){return e&hue}function rVe(e){return(e-(e&hue))/pue}const mue=1,gue=2,KN=4,xue=8;class $8{constructor(t,r,n){this.pos=t,this.delInfo=r,this.recover=n}get deleted(){return(this.delInfo&xue)>0}get deletedBefore(){return(this.delInfo&(mue|KN))>0}get deletedAfter(){return(this.delInfo&(gue|KN))>0}get deletedAcross(){return(this.delInfo&KN)>0}}class Gl{constructor(t,r=!1){if(this.ranges=t,this.inverted=r,!t.length&&Gl.empty)return Gl.empty}recover(t){let r=0,n=QK(t);if(!this.inverted)for(let i=0;i<n;i++)r+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[n*3]+r+rVe(t)}mapResult(t,r=1){return this._map(t,r,!1)}map(t,r=1){return this._map(t,r,!0)}_map(t,r,n){let i=0,a=this.inverted?2:1,s=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let l=this.ranges[o]-(this.inverted?i:0);if(l>t)break;let c=this.ranges[o+a],d=this.ranges[o+s],f=l+c;if(t<=f){let p=c?t==l?-1:t==f?1:r:r,m=l+i+(p<0?0:d);if(n)return m;let x=t==(r<0?l:f)?null:tVe(o/3,t-l),v=t==l?gue:t==f?mue:KN;return(r<0?t!=l:t!=f)&&(v|=xue),new $8(m,v,x)}i+=d-c}return n?t+i:new $8(t+i,0,null)}touches(t,r){let n=0,i=QK(r),a=this.inverted?2:1,s=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let l=this.ranges[o]-(this.inverted?n:0);if(l>t)break;let c=this.ranges[o+a],d=l+c;if(t<=d&&o==i*3)return!0;n+=this.ranges[o+s]-c}return!1}forEach(t){let r=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,a=0;i<this.ranges.length;i+=3){let s=this.ranges[i],o=s-(this.inverted?a:0),l=s+(this.inverted?0:a),c=this.ranges[i+r],d=this.ranges[i+n];t(o,o+c,l,l+d),a+=d-c}}invert(){return new Gl(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?Gl.empty:new Gl(t<0?[0,-t,0]:[0,0,t])}}Gl.empty=new Gl([]);class CS{constructor(t,r,n=0,i=t?t.length:0){this.mirror=r,this.from=n,this.to=i,this._maps=t||[],this.ownData=!(t||r)}get maps(){return this._maps}slice(t=0,r=this.maps.length){return new CS(this._maps,this.mirror,t,r)}appendMap(t,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(t){for(let r=0,n=this._maps.length;r<t._maps.length;r++){let i=t.getMirror(r);this.appendMap(t._maps[r],i!=null&&i<r?n+i:void 0)}}getMirror(t){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==t)return this.mirror[r+(r%2?-1:1)]}}setMirror(t,r){this.mirror||(this.mirror=[]),this.mirror.push(t,r)}appendMappingInverted(t){for(let r=t.maps.length-1,n=this._maps.length+t._maps.length;r>=0;r--){let i=t.getMirror(r);this.appendMap(t._maps[r].invert(),i!=null&&i>r?n-i-1:void 0)}}invert(){let t=new CS;return t.appendMappingInverted(this),t}map(t,r=1){if(this.mirror)return this._map(t,r,!0);for(let n=this.from;n<this.to;n++)t=this._maps[n].map(t,r);return t}mapResult(t,r=1){return this._map(t,r,!1)}_map(t,r,n){let i=0;for(let a=this.from;a<this.to;a++){let s=this._maps[a],o=s.mapResult(t,r);if(o.recover!=null){let l=this.getMirror(a);if(l!=null&&l>a&&l<this.to){a=l,t=this._maps[l].recover(o.recover);continue}}i|=o.delInfo,t=o.pos}return n?t:new $8(t,i,null)}}const pD=Object.create(null);let yo=class{getMap(){return Gl.empty}merge(t){return null}static fromJSON(t,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=pD[r.stepType];if(!n)throw new RangeError(`No step type ${r.stepType} defined`);return n.fromJSON(t,r)}static jsonID(t,r){if(t in pD)throw new RangeError("Duplicate use of step JSON ID "+t);return pD[t]=r,r.prototype.jsonID=t,r}};class Ia{constructor(t,r){this.doc=t,this.failed=r}static ok(t){return new Ia(t,null)}static fail(t){return new Ia(null,t)}static fromReplace(t,r,n,i){try{return Ia.ok(t.replace(r,n,i))}catch(a){if(a instanceof CT)return Ia.fail(a.message);throw a}}}function P9(e,t,r){let n=[];for(let i=0;i<e.childCount;i++){let a=e.child(i);a.content.size&&(a=a.copy(P9(a.content,t,a))),a.isInline&&(a=t(a,r,i)),n.push(a)}return It.fromArray(n)}class o0 extends yo{constructor(t,r,n){super(),this.from=t,this.to=r,this.mark=n}apply(t){let r=t.slice(this.from,this.to),n=t.resolve(this.from),i=n.node(n.sharedDepth(this.to)),a=new qt(P9(r.content,(s,o)=>!s.isAtom||!o.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),r.openStart,r.openEnd);return Ia.fromReplace(t,this.from,this.to,a)}invert(){return new Xu(this.from,this.to,this.mark)}map(t){let r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new o0(r.pos,n.pos,this.mark)}merge(t){return t instanceof o0&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new o0(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new o0(r.from,r.to,t.markFromJSON(r.mark))}}yo.jsonID("addMark",o0);class Xu extends yo{constructor(t,r,n){super(),this.from=t,this.to=r,this.mark=n}apply(t){let r=t.slice(this.from,this.to),n=new qt(P9(r.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),r.openStart,r.openEnd);return Ia.fromReplace(t,this.from,this.to,n)}invert(){return new o0(this.from,this.to,this.mark)}map(t){let r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new Xu(r.pos,n.pos,this.mark)}merge(t){return t instanceof Xu&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Xu(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Xu(r.from,r.to,t.markFromJSON(r.mark))}}yo.jsonID("removeMark",Xu);class l0 extends yo{constructor(t,r){super(),this.pos=t,this.mark=r}apply(t){let r=t.nodeAt(this.pos);if(!r)return Ia.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return Ia.fromReplace(t,this.pos,this.pos+1,new qt(It.from(n),0,r.isLeaf?0:1))}invert(t){let r=t.nodeAt(this.pos);if(r){let n=this.mark.addToSet(r.marks);if(n.length==r.marks.length){for(let i=0;i<r.marks.length;i++)if(!r.marks[i].isInSet(n))return new l0(this.pos,r.marks[i]);return new l0(this.pos,this.mark)}}return new ax(this.pos,this.mark)}map(t){let r=t.mapResult(this.pos,1);return r.deletedAfter?null:new l0(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new l0(r.pos,t.markFromJSON(r.mark))}}yo.jsonID("addNodeMark",l0);class ax extends yo{constructor(t,r){super(),this.pos=t,this.mark=r}apply(t){let r=t.nodeAt(this.pos);if(!r)return Ia.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return Ia.fromReplace(t,this.pos,this.pos+1,new qt(It.from(n),0,r.isLeaf?0:1))}invert(t){let r=t.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new l0(this.pos,this.mark)}map(t){let r=t.mapResult(this.pos,1);return r.deletedAfter?null:new ax(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ax(r.pos,t.markFromJSON(r.mark))}}yo.jsonID("removeNodeMark",ax);class us extends yo{constructor(t,r,n,i=!1){super(),this.from=t,this.to=r,this.slice=n,this.structure=i}apply(t){return this.structure&&z8(t,this.from,this.to)?Ia.fail("Structure replace would overwrite content"):Ia.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new Gl([this.from,this.to-this.from,this.slice.size])}invert(t){return new us(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deletedAcross&&n.deletedAcross?null:new us(r.pos,Math.max(r.pos,n.pos),this.slice,this.structure)}merge(t){if(!(t instanceof us)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let r=this.slice.size+t.slice.size==0?qt.empty:new qt(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new us(this.from,this.to+(t.to-t.from),r,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let r=this.slice.size+t.slice.size==0?qt.empty:new qt(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new us(t.from,this.to,r,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new us(r.from,r.to,qt.fromJSON(t,r.slice),!!r.structure)}}yo.jsonID("replace",us);class gs extends yo{constructor(t,r,n,i,a,s,o=!1){super(),this.from=t,this.to=r,this.gapFrom=n,this.gapTo=i,this.slice=a,this.insert=s,this.structure=o}apply(t){if(this.structure&&(z8(t,this.from,this.gapFrom)||z8(t,this.gapTo,this.to)))return Ia.fail("Structure gap-replace would overwrite content");let r=t.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return Ia.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,r.content);return n?Ia.fromReplace(t,this.from,this.to,n):Ia.fail("Content does not fit in gap")}getMap(){return new Gl([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let r=this.gapTo-this.gapFrom;return new gs(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),i=this.from==this.gapFrom?r.pos:t.map(this.gapFrom,-1),a=this.to==this.gapTo?n.pos:t.map(this.gapTo,1);return r.deletedAcross&&n.deletedAcross||i<r.pos||a>n.pos?null:new gs(r.pos,n.pos,i,a,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new gs(r.from,r.to,r.gapFrom,r.gapTo,qt.fromJSON(t,r.slice),r.insert,!!r.structure)}}yo.jsonID("replaceAround",gs);function z8(e,t,r){let n=e.resolve(t),i=r-t,a=n.depth;for(;i>0&&a>0&&n.indexAfter(a)==n.node(a).childCount;)a--,i--;if(i>0){let s=n.node(a).maybeChild(n.indexAfter(a));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function nVe(e,t,r,n){let i=[],a=[],s,o;e.doc.nodesBetween(t,r,(l,c,d)=>{if(!l.isInline)return;let f=l.marks;if(!n.isInSet(f)&&d.type.allowsMarkType(n.type)){let p=Math.max(c,t),m=Math.min(c+l.nodeSize,r),x=n.addToSet(f);for(let v=0;v<f.length;v++)f[v].isInSet(x)||(s&&s.to==p&&s.mark.eq(f[v])?s.to=m:i.push(s=new Xu(p,m,f[v])));o&&o.to==p?o.to=m:a.push(o=new o0(p,m,n))}}),i.forEach(l=>e.step(l)),a.forEach(l=>e.step(l))}function iVe(e,t,r,n){let i=[],a=0;e.doc.nodesBetween(t,r,(s,o)=>{if(!s.isInline)return;a++;let l=null;if(n instanceof c3){let c=s.marks,d;for(;d=n.isInSet(c);)(l||(l=[])).push(d),c=d.removeFromSet(c)}else n?n.isInSet(s.marks)&&(l=[n]):l=s.marks;if(l&&l.length){let c=Math.min(o+s.nodeSize,r);for(let d=0;d<l.length;d++){let f=l[d],p;for(let m=0;m<i.length;m++){let x=i[m];x.step==a-1&&f.eq(i[m].style)&&(p=x)}p?(p.to=c,p.step=a):i.push({style:f,from:Math.max(o,t),to:c,step:a})}}}),i.forEach(s=>e.step(new Xu(s.from,s.to,s.style)))}function R9(e,t,r,n=r.contentMatch,i=!0){let a=e.doc.nodeAt(t),s=[],o=t+1;for(let l=0;l<a.childCount;l++){let c=a.child(l),d=o+c.nodeSize,f=n.matchType(c.type);if(!f)s.push(new us(o,d,qt.empty));else{n=f;for(let p=0;p<c.marks.length;p++)r.allowsMarkType(c.marks[p].type)||e.step(new Xu(o,d,c.marks[p]));if(i&&c.isText&&r.whitespace!="pre"){let p,m=/\r?\n|\r/g,x;for(;p=m.exec(c.text);)x||(x=new qt(It.from(r.schema.text(" ",r.allowedMarks(c.marks))),0,0)),s.push(new us(o+p.index,o+p.index+p[0].length,x))}}o=d}if(!n.validEnd){let l=n.fillBefore(It.empty,!0);e.replace(o,o,new qt(l,0,0))}for(let l=s.length-1;l>=0;l--)e.step(s[l])}function aVe(e,t,r){return(t==0||e.canReplace(t,e.childCount))&&(r==e.childCount||e.canReplace(0,r))}function gb(e){let r=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth,i=0,a=0;;--n){let s=e.$from.node(n),o=e.$from.index(n)+i,l=e.$to.indexAfter(n)-a;if(n<e.depth&&s.canReplace(o,l,r))return n;if(n==0||s.type.spec.isolating||!aVe(s,o,l))break;o&&(i=1),l<s.childCount&&(a=1)}return null}function sVe(e,t,r){let{$from:n,$to:i,depth:a}=t,s=n.before(a+1),o=i.after(a+1),l=s,c=o,d=It.empty,f=0;for(let x=a,v=!1;x>r;x--)v||n.index(x)>0?(v=!0,d=It.from(n.node(x).copy(d)),f++):l--;let p=It.empty,m=0;for(let x=a,v=!1;x>r;x--)v||i.after(x+1)<i.end(x)?(v=!0,p=It.from(i.node(x).copy(p)),m++):c++;e.step(new gs(l,c,s,o,new qt(d.append(p),f,m),d.size-f,!0))}function j9(e,t,r=null,n=e){let i=oVe(e,t),a=i&&lVe(n,t);return a?i.map(JK).concat({type:t,attrs:r}).concat(a.map(JK)):null}function JK(e){return{type:e,attrs:null}}function oVe(e,t){let{parent:r,startIndex:n,endIndex:i}=e,a=r.contentMatchAt(n).findWrapping(t);if(!a)return null;let s=a.length?a[0]:t;return r.canReplaceWith(n,i,s)?a:null}function lVe(e,t){let{parent:r,startIndex:n,endIndex:i}=e,a=r.child(n),s=t.contentMatch.findWrapping(a.type);if(!s)return null;let l=(s.length?s[s.length-1]:t).contentMatch;for(let c=n;l&&c<i;c++)l=l.matchType(r.child(c).type);return!l||!l.validEnd?null:s}function cVe(e,t,r){let n=It.empty;for(let s=r.length-1;s>=0;s--){if(n.size){let o=r[s].type.contentMatch.matchFragment(n);if(!o||!o.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=It.from(r[s].type.create(r[s].attrs,n))}let i=t.start,a=t.end;e.step(new gs(i,a,i,a,new qt(n,0,0),r.length,!0))}function uVe(e,t,r,n,i){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=e.steps.length;e.doc.nodesBetween(t,r,(s,o)=>{let l=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(n,l)&&dVe(e.doc,e.mapping.slice(a).map(o),n)){let c=null;if(n.schema.linebreakReplacement){let m=n.whitespace=="pre",x=!!n.contentMatch.matchType(n.schema.linebreakReplacement);m&&!x?c=!1:!m&&x&&(c=!0)}c===!1&&yue(e,s,o,a),R9(e,e.mapping.slice(a).map(o,1),n,void 0,c===null);let d=e.mapping.slice(a),f=d.map(o,1),p=d.map(o+s.nodeSize,1);return e.step(new gs(f,p,f+1,p-1,new qt(It.from(n.create(l,null,s.marks)),0,0),1,!0)),c===!0&&vue(e,s,o,a),!1}})}function vue(e,t,r,n){t.forEach((i,a)=>{if(i.isText){let s,o=/\r?\n|\r/g;for(;s=o.exec(i.text);){let l=e.mapping.slice(n).map(r+1+a+s.index);e.replaceWith(l,l+1,t.type.schema.linebreakReplacement.create())}}})}function yue(e,t,r,n){t.forEach((i,a)=>{if(i.type==i.type.schema.linebreakReplacement){let s=e.mapping.slice(n).map(r+1+a);e.replaceWith(s,s+1,t.type.schema.text(`
`))}})}function dVe(e,t,r){let n=e.resolve(t),i=n.index();return n.parent.canReplaceWith(i,i+1,r)}function fVe(e,t,r,n,i){let a=e.doc.nodeAt(t);if(!a)throw new RangeError("No node at given position");r||(r=a.type);let s=r.create(n,null,i||a.marks);if(a.isLeaf)return e.replaceWith(t,t+a.nodeSize,s);if(!r.validContent(a.content))throw new RangeError("Invalid content for node type "+r.name);e.step(new gs(t,t+a.nodeSize,t+1,t+a.nodeSize-1,new qt(It.from(s),0,0),1,!0))}function Sh(e,t,r=1,n){let i=e.resolve(t),a=i.depth-r,s=n&&n[n.length-1]||i.parent;if(a<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,d=r-2;c>a;c--,d--){let f=i.node(c),p=i.index(c);if(f.type.spec.isolating)return!1;let m=f.content.cutByIndex(p,f.childCount),x=n&&n[d+1];x&&(m=m.replaceChild(0,x.type.create(x.attrs)));let v=n&&n[d]||f;if(!f.canReplace(p+1,f.childCount)||!v.type.validContent(m))return!1}let o=i.indexAfter(a),l=n&&n[0];return i.node(a).canReplaceWith(o,o,l?l.type:i.node(a+1).type)}function hVe(e,t,r=1,n){let i=e.doc.resolve(t),a=It.empty,s=It.empty;for(let o=i.depth,l=i.depth-r,c=r-1;o>l;o--,c--){a=It.from(i.node(o).copy(a));let d=n&&n[c];s=It.from(d?d.type.create(d.attrs,s):i.node(o).copy(s))}e.step(new us(t,t,new qt(a.append(s),r,r),!0))}function J0(e,t){let r=e.resolve(t),n=r.index();return bue(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function pVe(e,t){t.content.size||e.type.compatibleContent(t.type);let r=e.contentMatchAt(e.childCount),{linebreakReplacement:n}=e.type.schema;for(let i=0;i<t.childCount;i++){let a=t.child(i),s=a.type==n?e.type.schema.nodes.text:a.type;if(r=r.matchType(s),!r||!e.type.allowsMarks(a.marks))return!1}return r.validEnd}function bue(e,t){return!!(e&&t&&!e.isLeaf&&pVe(e,t))}function u3(e,t,r=-1){let n=e.resolve(t);for(let i=n.depth;;i--){let a,s,o=n.index(i);if(i==n.depth?(a=n.nodeBefore,s=n.nodeAfter):r>0?(a=n.node(i+1),o++,s=n.node(i).maybeChild(o)):(a=n.node(i).maybeChild(o-1),s=n.node(i+1)),a&&!a.isTextblock&&bue(a,s)&&n.node(i).canReplace(o,o+1))return t;if(i==0)break;t=r<0?n.before(i):n.after(i)}}function mVe(e,t,r){let n=null,{linebreakReplacement:i}=e.doc.type.schema,a=e.doc.resolve(t-r),s=a.node().type;if(i&&s.inlineContent){let d=s.whitespace=="pre",f=!!s.contentMatch.matchType(i);d&&!f?n=!1:!d&&f&&(n=!0)}let o=e.steps.length;if(n===!1){let d=e.doc.resolve(t+r);yue(e,d.node(),d.before(),o)}s.inlineContent&&R9(e,t+r-1,s,a.node().contentMatchAt(a.index()),n==null);let l=e.mapping.slice(o),c=l.map(t-r);if(e.step(new us(c,l.map(t+r,-1),qt.empty,!0)),n===!0){let d=e.doc.resolve(c);vue(e,d.node(),d.before(),e.steps.length)}return e}function gVe(e,t,r){let n=e.resolve(t);if(n.parent.canReplaceWith(n.index(),n.index(),r))return t;if(n.parentOffset==0)for(let i=n.depth-1;i>=0;i--){let a=n.index(i);if(n.node(i).canReplaceWith(a,a,r))return n.before(i+1);if(a>0)return null}if(n.parentOffset==n.parent.content.size)for(let i=n.depth-1;i>=0;i--){let a=n.indexAfter(i);if(n.node(i).canReplaceWith(a,a,r))return n.after(i+1);if(a<n.node(i).childCount)return null}return null}function wue(e,t,r){let n=e.resolve(t);if(!r.content.size)return t;let i=r.content;for(let a=0;a<r.openStart;a++)i=i.firstChild.content;for(let a=1;a<=(r.openStart==0&&r.size?2:1);a++)for(let s=n.depth;s>=0;s--){let o=s==n.depth?0:n.pos<=(n.start(s+1)+n.end(s+1))/2?-1:1,l=n.index(s)+(o>0?1:0),c=n.node(s),d=!1;if(a==1)d=c.canReplace(l,l,i);else{let f=c.contentMatchAt(l).findWrapping(i.firstChild.type);d=f&&c.canReplaceWith(l,l,f[0])}if(d)return o==0?n.pos:o<0?n.before(s+1):n.after(s+1)}return null}function d3(e,t,r=t,n=qt.empty){if(t==r&&!n.size)return null;let i=e.resolve(t),a=e.resolve(r);return Sue(i,a,n)?new us(t,r,n):new xVe(i,a,n).fit()}function Sue(e,t,r){return!r.openStart&&!r.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),r.content)}class xVe{constructor(t,r,n){this.$from=t,this.$to=r,this.unplaced=n,this.frontier=[],this.placed=It.empty;for(let i=0;i<=t.depth;i++){let a=t.node(i);this.frontier.push({type:a.type,match:a.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=It.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(t<0?this.$to:n.doc.resolve(t));if(!i)return null;let a=this.placed,s=n.depth,o=i.depth;for(;s&&o&&a.childCount==1;)a=a.firstChild.content,s--,o--;let l=new qt(a,s,o);return t>-1?new gs(n.pos,t,this.$to.pos,this.$to.end(),l,r):l.size||n.pos!=this.$to.pos?new us(n.pos,i.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let r=this.unplaced.content,n=0,i=this.unplaced.openEnd;n<t;n++){let a=r.firstChild;if(r.childCount>1&&(i=0),a.type.spec.isolating&&i<=n){t=n;break}r=a.content}for(let r=1;r<=2;r++)for(let n=r==1?t:this.unplaced.openStart;n>=0;n--){let i,a=null;n?(a=mD(this.unplaced.content,n-1).firstChild,i=a.content):i=this.unplaced.content;let s=i.firstChild;for(let o=this.depth;o>=0;o--){let{type:l,match:c}=this.frontier[o],d,f=null;if(r==1&&(s?c.matchType(s.type)||(f=c.fillBefore(It.from(s),!1)):a&&l.compatibleContent(a.type)))return{sliceDepth:n,frontierDepth:o,parent:a,inject:f};if(r==2&&s&&(d=c.findWrapping(s.type)))return{sliceDepth:n,frontierDepth:o,parent:a,wrap:d};if(a&&c.matchType(a.type))break}}}openMore(){let{content:t,openStart:r,openEnd:n}=this.unplaced,i=mD(t,r);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new qt(t,r+1,Math.max(n,i.size+r>=t.size-n?r+1:0)),!0)}dropNode(){let{content:t,openStart:r,openEnd:n}=this.unplaced,i=mD(t,r);if(i.childCount<=1&&r>0){let a=t.size-r<=r+i.size;this.unplaced=new qt(Qw(t,r-1,1),r-1,a?r-1:n)}else this.unplaced=new qt(Qw(t,r,1),r,n)}placeNodes({sliceDepth:t,frontierDepth:r,parent:n,inject:i,wrap:a}){for(;this.depth>r;)this.closeFrontierNode();if(a)for(let v=0;v<a.length;v++)this.openFrontierNode(a[v]);let s=this.unplaced,o=n?n.content:s.content,l=s.openStart-t,c=0,d=[],{match:f,type:p}=this.frontier[r];if(i){for(let v=0;v<i.childCount;v++)d.push(i.child(v));f=f.matchFragment(i)}let m=o.size+t-(s.content.size-s.openEnd);for(;c<o.childCount;){let v=o.child(c),b=f.matchType(v.type);if(!b)break;c++,(c>1||l==0||v.content.size)&&(f=b,d.push(Eue(v.mark(p.allowedMarks(v.marks)),c==1?l:0,c==o.childCount?m:-1)))}let x=c==o.childCount;x||(m=-1),this.placed=Jw(this.placed,r,It.from(d)),this.frontier[r].match=f,x&&m<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let v=0,b=o;v<m;v++){let w=b.lastChild;this.frontier.push({type:w.type,match:w.contentMatchAt(w.childCount)}),b=w.content}this.unplaced=x?t==0?qt.empty:new qt(Qw(s.content,t-1,1),t-1,m<0?s.openEnd:t-1):new qt(Qw(s.content,t,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],r;if(!t.type.isTextblock||!gD(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(t){e:for(let r=Math.min(this.depth,t.depth);r>=0;r--){let{match:n,type:i}=this.frontier[r],a=r<t.depth&&t.end(r+1)==t.pos+(t.depth-(r+1)),s=gD(t,r,i,n,a);if(s){for(let o=r-1;o>=0;o--){let{match:l,type:c}=this.frontier[o],d=gD(t,o,c,l,!0);if(!d||d.childCount)continue e}return{depth:r,fit:s,move:a?t.doc.resolve(t.after(r+1)):t}}}}close(t){let r=this.findCloseLevel(t);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=Jw(this.placed,r.depth,r.fit)),t=r.move;for(let n=r.depth+1;n<=t.depth;n++){let i=t.node(n),a=i.type.contentMatch.fillBefore(i.content,!0,t.index(n));this.openFrontierNode(i.type,i.attrs,a)}return t}openFrontierNode(t,r=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=Jw(this.placed,this.depth,It.from(t.create(r,n))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(It.empty,!0);r.childCount&&(this.placed=Jw(this.placed,this.frontier.length,r))}}function Qw(e,t,r){return t==0?e.cutByIndex(r,e.childCount):e.replaceChild(0,e.firstChild.copy(Qw(e.firstChild.content,t-1,r)))}function Jw(e,t,r){return t==0?e.append(r):e.replaceChild(e.childCount-1,e.lastChild.copy(Jw(e.lastChild.content,t-1,r)))}function mD(e,t){for(let r=0;r<t;r++)e=e.firstChild.content;return e}function Eue(e,t,r){if(t<=0)return e;let n=e.content;return t>1&&(n=n.replaceChild(0,Eue(n.firstChild,t-1,n.childCount==1?r-1:0))),t>0&&(n=e.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(e.type.contentMatch.matchFragment(n).fillBefore(It.empty,!0)))),e.copy(n)}function gD(e,t,r,n,i){let a=e.node(t),s=i?e.indexAfter(t):e.index(t);if(s==a.childCount&&!r.compatibleContent(a.type))return null;let o=n.fillBefore(a.content,!0,s);return o&&!vVe(r,a.content,s)?o:null}function vVe(e,t,r){for(let n=r;n<t.childCount;n++)if(!e.allowsMarks(t.child(n).marks))return!0;return!1}function yVe(e){return e.spec.defining||e.spec.definingForContent}function bVe(e,t,r,n){if(!n.size)return e.deleteRange(t,r);let i=e.doc.resolve(t),a=e.doc.resolve(r);if(Sue(i,a,n))return e.step(new us(t,r,n));let s=kue(i,a);s[s.length-1]==0&&s.pop();let o=-(i.depth+1);s.unshift(o);for(let p=i.depth,m=i.pos-1;p>0;p--,m--){let x=i.node(p).type.spec;if(x.defining||x.definingAsContext||x.isolating)break;s.indexOf(p)>-1?o=p:i.before(p)==m&&s.splice(1,0,-p)}let l=s.indexOf(o),c=[],d=n.openStart;for(let p=n.content,m=0;;m++){let x=p.firstChild;if(c.push(x),m==n.openStart)break;p=x.content}for(let p=d-1;p>=0;p--){let m=c[p],x=yVe(m.type);if(x&&!m.sameMarkup(i.node(Math.abs(o)-1)))d=p;else if(x||!m.type.isTextblock)break}for(let p=n.openStart;p>=0;p--){let m=(p+d+1)%(n.openStart+1),x=c[m];if(x)for(let v=0;v<s.length;v++){let b=s[(v+l)%s.length],w=!0;b<0&&(w=!1,b=-b);let _=i.node(b-1),C=i.index(b-1);if(_.canReplaceWith(C,C,x.type,x.marks))return e.replace(i.before(b),w?a.after(b):r,new qt(Cue(n.content,0,n.openStart,m),m,n.openEnd))}}let f=e.steps.length;for(let p=s.length-1;p>=0&&(e.replace(t,r,n),!(e.steps.length>f));p--){let m=s[p];m<0||(t=i.before(m),r=a.after(m))}}function Cue(e,t,r,n,i){if(t<r){let a=e.firstChild;e=e.replaceChild(0,a.copy(Cue(a.content,t+1,r,n,a)))}if(t>n){let a=i.contentMatchAt(0),s=a.fillBefore(e).append(e);e=s.append(a.matchFragment(s).fillBefore(It.empty,!0))}return e}function wVe(e,t,r,n){if(!n.isInline&&t==r&&e.doc.resolve(t).parent.content.size){let i=gVe(e.doc,t,n.type);i!=null&&(t=r=i)}e.replaceRange(t,r,new qt(It.from(n),0,0))}function SVe(e,t,r){let n=e.doc.resolve(t),i=e.doc.resolve(r),a=kue(n,i);for(let s=0;s<a.length;s++){let o=a[s],l=s==a.length-1;if(l&&o==0||n.node(o).type.contentMatch.validEnd)return e.delete(n.start(o),i.end(o));if(o>0&&(l||n.node(o-1).canReplace(n.index(o-1),i.indexAfter(o-1))))return e.delete(n.before(o),i.after(o))}for(let s=1;s<=n.depth&&s<=i.depth;s++)if(t-n.start(s)==n.depth-s&&r>n.end(s)&&i.end(s)-r!=i.depth-s&&n.start(s-1)==i.start(s-1)&&n.node(s-1).canReplace(n.index(s-1),i.index(s-1)))return e.delete(n.before(s),r);e.delete(t,r)}function kue(e,t){let r=[],n=Math.min(e.depth,t.depth);for(let i=n;i>=0;i--){let a=e.start(i);if(a<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(a==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==a-1)&&r.push(i)}return r}class _v extends yo{constructor(t,r,n){super(),this.pos=t,this.attr=r,this.value=n}apply(t){let r=t.nodeAt(this.pos);if(!r)return Ia.fail("No node at attribute step's position");let n=Object.create(null);for(let a in r.attrs)n[a]=r.attrs[a];n[this.attr]=this.value;let i=r.type.create(n,null,r.marks);return Ia.fromReplace(t,this.pos,this.pos+1,new qt(It.from(i),0,r.isLeaf?0:1))}getMap(){return Gl.empty}invert(t){return new _v(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let r=t.mapResult(this.pos,1);return r.deletedAfter?null:new _v(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new _v(r.pos,r.attr,r.value)}}yo.jsonID("attr",_v);class kS extends yo{constructor(t,r){super(),this.attr=t,this.value=r}apply(t){let r=Object.create(null);for(let i in t.attrs)r[i]=t.attrs[i];r[this.attr]=this.value;let n=t.type.create(r,t.content,t.marks);return Ia.ok(n)}getMap(){return Gl.empty}invert(t){return new kS(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new kS(r.attr,r.value)}}yo.jsonID("docAttr",kS);let gy=class extends Error{};gy=function e(t){let r=Error.call(this,t);return r.__proto__=e.prototype,r};gy.prototype=Object.create(Error.prototype);gy.prototype.constructor=gy;gy.prototype.name="TransformError";class _ue{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new CS}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let r=this.maybeStep(t);if(r.failed)throw new gy(r.failed);return this}maybeStep(t){let r=t.apply(this.doc);return r.failed||this.addStep(t,r.doc),r}get docChanged(){return this.steps.length>0}addStep(t,r){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=r}replace(t,r=t,n=qt.empty){let i=d3(this.doc,t,r,n);return i&&this.step(i),this}replaceWith(t,r,n){return this.replace(t,r,new qt(It.from(n),0,0))}delete(t,r){return this.replace(t,r,qt.empty)}insert(t,r){return this.replaceWith(t,t,r)}replaceRange(t,r,n){return bVe(this,t,r,n),this}replaceRangeWith(t,r,n){return wVe(this,t,r,n),this}deleteRange(t,r){return SVe(this,t,r),this}lift(t,r){return sVe(this,t,r),this}join(t,r=1){return mVe(this,t,r),this}wrap(t,r){return cVe(this,t,r),this}setBlockType(t,r=t,n,i=null){return uVe(this,t,r,n,i),this}setNodeMarkup(t,r,n=null,i){return fVe(this,t,r,n,i),this}setNodeAttribute(t,r,n){return this.step(new _v(t,r,n)),this}setDocAttribute(t,r){return this.step(new kS(t,r)),this}addNodeMark(t,r){return this.step(new l0(t,r)),this}removeNodeMark(t,r){let n=this.doc.nodeAt(t);if(!n)throw new RangeError("No node at position "+t);if(r instanceof ci)r.isInSet(n.marks)&&this.step(new ax(t,r));else{let i=n.marks,a,s=[];for(;a=r.isInSet(i);)s.push(new ax(t,a)),i=a.removeFromSet(i);for(let o=s.length-1;o>=0;o--)this.step(s[o])}return this}split(t,r=1,n){return hVe(this,t,r,n),this}addMark(t,r,n){return nVe(this,t,r,n),this}removeMark(t,r,n){return iVe(this,t,r,n),this}clearIncompatible(t,r,n){return R9(this,t,r,n),this}}const xD=Object.create(null);class dn{constructor(t,r,n){this.$anchor=t,this.$head=r,this.ranges=n||[new EVe(t.min(r),t.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let r=0;r<t.length;r++)if(t[r].$from.pos!=t[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,r=qt.empty){let n=r.content.lastChild,i=null;for(let o=0;o<r.openEnd;o++)i=n,n=n.lastChild;let a=t.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:l,$to:c}=s[o],d=t.mapping.slice(a);t.replaceRange(d.map(l.pos),d.map(c.pos),o?qt.empty:r),o==0&&tX(t,a,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,r){let n=t.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:s,$to:o}=i[a],l=t.mapping.slice(n),c=l.map(s.pos),d=l.map(o.pos);a?t.deleteRange(c,d):(t.replaceRangeWith(c,d,r),tX(t,n,r.isInline?-1:1))}}static findFrom(t,r,n=!1){let i=t.parent.inlineContent?new Ur(t):H1(t.node(0),t.parent,t.pos,t.index(),r,n);if(i)return i;for(let a=t.depth-1;a>=0;a--){let s=r<0?H1(t.node(0),t.node(a),t.before(a+1),t.index(a),r,n):H1(t.node(0),t.node(a),t.after(a+1),t.index(a)+1,r,n);if(s)return s}return null}static near(t,r=1){return this.findFrom(t,r)||this.findFrom(t,-r)||new ic(t.node(0))}static atStart(t){return H1(t,t,0,0,1)||new ic(t)}static atEnd(t){return H1(t,t,t.content.size,t.childCount,-1)||new ic(t)}static fromJSON(t,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=xD[r.type];if(!n)throw new RangeError(`No selection type ${r.type} defined`);return n.fromJSON(t,r)}static jsonID(t,r){if(t in xD)throw new RangeError("Duplicate use of selection JSON ID "+t);return xD[t]=r,r.prototype.jsonID=t,r}getBookmark(){return Ur.between(this.$anchor,this.$head).getBookmark()}}dn.prototype.visible=!0;class EVe{constructor(t,r){this.$from=t,this.$to=r}}let ZK=!1;function eX(e){!ZK&&!e.parent.inlineContent&&(ZK=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Ur extends dn{constructor(t,r=t){eX(t),eX(r),super(t,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,r){let n=t.resolve(r.map(this.head));if(!n.parent.inlineContent)return dn.near(n);let i=t.resolve(r.map(this.anchor));return new Ur(i.parent.inlineContent?i:n,n)}replace(t,r=qt.empty){if(super.replace(t,r),r==qt.empty){let n=this.$from.marksAcross(this.$to);n&&t.ensureMarks(n)}}eq(t){return t instanceof Ur&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new f3(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ur(t.resolve(r.anchor),t.resolve(r.head))}static create(t,r,n=r){let i=t.resolve(r);return new this(i,n==r?i:t.resolve(n))}static between(t,r,n){let i=t.pos-r.pos;if((!n||i)&&(n=i>=0?1:-1),!r.parent.inlineContent){let a=dn.findFrom(r,n,!0)||dn.findFrom(r,-n,!0);if(a)r=a.$head;else return dn.near(r,n)}return t.parent.inlineContent||(i==0?t=r:(t=(dn.findFrom(t,-n,!0)||dn.findFrom(t,n,!0)).$anchor,t.pos<r.pos!=i<0&&(t=r))),new Ur(t,r)}}dn.jsonID("text",Ur);class f3{constructor(t,r){this.anchor=t,this.head=r}map(t){return new f3(t.map(this.anchor),t.map(this.head))}resolve(t){return Ur.between(t.resolve(this.anchor),t.resolve(this.head))}}class pr extends dn{constructor(t){let r=t.nodeAfter,n=t.node(0).resolve(t.pos+r.nodeSize);super(t,n),this.node=r}map(t,r){let{deleted:n,pos:i}=r.mapResult(this.anchor),a=t.resolve(i);return n?dn.near(a):new pr(a)}content(){return new qt(It.from(this.node),0,0)}eq(t){return t instanceof pr&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new D9(this.anchor)}static fromJSON(t,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new pr(t.resolve(r.anchor))}static create(t,r){return new pr(t.resolve(r))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}pr.prototype.visible=!1;dn.jsonID("node",pr);class D9{constructor(t){this.anchor=t}map(t){let{deleted:r,pos:n}=t.mapResult(this.anchor);return r?new f3(n,n):new D9(n)}resolve(t){let r=t.resolve(this.anchor),n=r.nodeAfter;return n&&pr.isSelectable(n)?new pr(r):dn.near(r)}}class ic extends dn{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,r=qt.empty){if(r==qt.empty){t.delete(0,t.doc.content.size);let n=dn.atStart(t.doc);n.eq(t.selection)||t.setSelection(n)}else super.replace(t,r)}toJSON(){return{type:"all"}}static fromJSON(t){return new ic(t)}map(t){return new ic(t)}eq(t){return t instanceof ic}getBookmark(){return CVe}}dn.jsonID("all",ic);const CVe={map(){return this},resolve(e){return new ic(e)}};function H1(e,t,r,n,i,a=!1){if(t.inlineContent)return Ur.create(e,r);for(let s=n-(i>0?0:1);i>0?s<t.childCount:s>=0;s+=i){let o=t.child(s);if(o.isAtom){if(!a&&pr.isSelectable(o))return pr.create(e,r-(i<0?o.nodeSize:0))}else{let l=H1(e,o,r+i,i<0?o.childCount:0,i,a);if(l)return l}r+=o.nodeSize*i}return null}function tX(e,t,r){let n=e.steps.length-1;if(n<t)return;let i=e.steps[n];if(!(i instanceof us||i instanceof gs))return;let a=e.mapping.maps[n],s;a.forEach((o,l,c,d)=>{s==null&&(s=d)}),e.setSelection(dn.near(e.doc.resolve(s),r))}const rX=1,P_=2,nX=4;class kVe extends _ue{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|rX)&~P_,this.storedMarks=null,this}get selectionSet(){return(this.updated&rX)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=P_,this}ensureMarks(t){return ci.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&P_)>0}addStep(t,r){super.addStep(t,r),this.updated=this.updated&~P_,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,r=!0){let n=this.selection;return r&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||ci.none))),n.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,r,n){let i=this.doc.type.schema;if(r==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(n==null&&(n=r),!t)return this.deleteRange(r,n);let a=this.storedMarks;if(!a){let s=this.doc.resolve(r);a=n==r?s.marks():s.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,i.text(t,a)),!this.selection.empty&&this.selection.to==r+t.length&&this.setSelection(dn.near(this.selection.$to)),this}}setMeta(t,r){return this.meta[typeof t=="string"?t:t.key]=r,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=nX,this}get scrolledIntoView(){return(this.updated&nX)>0}}function iX(e,t){return!t||!e?e:e.bind(t)}class Zw{constructor(t,r,n){this.name=t,this.init=iX(r.init,n),this.apply=iX(r.apply,n)}}const _Ve=[new Zw("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new Zw("selection",{init(e,t){return e.selection||dn.atStart(t.doc)},apply(e){return e.selection}}),new Zw("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,r,n){return n.selection.$cursor?e.storedMarks:null}}),new Zw("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class vD{constructor(t,r){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=_Ve.slice(),r&&r.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new Zw(n.key,n.spec.state,n))})}}class uv{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,r=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=r){let i=this.config.plugins[n];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let r=[t],n=this.applyInner(t),i=null;for(;;){let a=!1;for(let s=0;s<this.config.plugins.length;s++){let o=this.config.plugins[s];if(o.spec.appendTransaction){let l=i?i[s].n:0,c=i?i[s].state:this,d=l<r.length&&o.spec.appendTransaction.call(o,l?r.slice(l):r,c,n);if(d&&n.filterTransaction(d,s)){if(d.setMeta("appendedTransaction",t),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<s?{state:n,n:r.length}:{state:this,n:0})}r.push(d),n=n.applyInner(d),a=!0}i&&(i[s]={state:n,n:r.length})}}if(!a)return{state:n,transactions:r}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new uv(this.config),n=this.config.fields;for(let i=0;i<n.length;i++){let a=n[i];r[a.name]=a.apply(t,this[a.name],this,r)}return r}get tr(){return new kVe(this)}static create(t){let r=new vD(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new uv(r);for(let i=0;i<r.fields.length;i++)n[r.fields[i].name]=r.fields[i].init(t,n);return n}reconfigure(t){let r=new vD(this.schema,t.plugins),n=r.fields,i=new uv(r);for(let a=0;a<n.length;a++){let s=n[a].name;i[s]=this.hasOwnProperty(s)?this[s]:n[a].init(t,i)}return i}toJSON(t){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(n=>n.toJSON())),t&&typeof t=="object")for(let n in t){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[n],a=i.spec.state;a&&a.toJSON&&(r[n]=a.toJSON.call(i,this[i.key]))}return r}static fromJSON(t,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new vD(t.schema,t.plugins),a=new uv(i);return i.fields.forEach(s=>{if(s.name=="doc")a.doc=wh.fromJSON(t.schema,r.doc);else if(s.name=="selection")a.selection=dn.fromJSON(a.doc,r.selection);else if(s.name=="storedMarks")r.storedMarks&&(a.storedMarks=r.storedMarks.map(t.schema.markFromJSON));else{if(n)for(let o in n){let l=n[o],c=l.spec.state;if(l.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(r,o)){a[s.name]=c.fromJSON.call(l,t,r[o],a);return}}a[s.name]=s.init(t,a)}}),a}}function Nue(e,t,r){for(let n in e){let i=e[n];i instanceof Function?i=i.bind(t):n=="handleDOMEvents"&&(i=Nue(i,t,{})),r[n]=i}return r}class Fi{constructor(t){this.spec=t,this.props={},t.props&&Nue(t.props,this,this.props),this.key=t.key?t.key.key:Aue("plugin")}getState(t){return t[this.key]}}const yD=Object.create(null);function Aue(e){return e in yD?e+"$"+ ++yD[e]:(yD[e]=0,e+"$")}class va{constructor(t="key"){this.key=Aue(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const M9=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function Tue(e,t){let{$cursor:r}=e.selection;return!r||(t?!t.endOfTextblock("backward",e):r.parentOffset>0)?null:r}const Iue=(e,t,r)=>{let n=Tue(e,r);if(!n)return!1;let i=F9(n);if(!i){let s=n.blockRange(),o=s&&gb(s);return o==null?!1:(t&&t(e.tr.lift(s,o).scrollIntoView()),!0)}let a=i.nodeBefore;if(Bue(e,i,t,-1))return!0;if(n.parent.content.size==0&&(xy(a,"end")||pr.isSelectable(a)))for(let s=n.depth;;s--){let o=d3(e.doc,n.before(s),n.after(s),qt.empty);if(o&&o.slice.size<o.to-o.from){if(t){let l=e.tr.step(o);l.setSelection(xy(a,"end")?dn.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):pr.create(l.doc,i.pos-a.nodeSize)),t(l.scrollIntoView())}return!0}if(s==1||n.node(s-1).childCount>1)break}return a.isAtom&&i.depth==n.depth-1?(t&&t(e.tr.delete(i.pos-a.nodeSize,i.pos).scrollIntoView()),!0):!1},NVe=(e,t,r)=>{let n=Tue(e,r);if(!n)return!1;let i=F9(n);return i?Oue(e,i,t):!1},AVe=(e,t,r)=>{let n=Rue(e,r);if(!n)return!1;let i=L9(n);return i?Oue(e,i,t):!1};function Oue(e,t,r){let n=t.nodeBefore,i=n,a=t.pos-1;for(;!i.isTextblock;a--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let s=t.nodeAfter,o=s,l=t.pos+1;for(;!o.isTextblock;l++){if(o.type.spec.isolating)return!1;let d=o.firstChild;if(!d)return!1;o=d}let c=d3(e.doc,a,l,qt.empty);if(!c||c.from!=a||c instanceof us&&c.slice.size>=l-a)return!1;if(r){let d=e.tr.step(c);d.setSelection(Ur.create(d.doc,a)),r(d.scrollIntoView())}return!0}function xy(e,t,r=!1){for(let n=e;n;n=t=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&n.childCount!=1)return!1}return!1}const Pue=(e,t,r)=>{let{$head:n,empty:i}=e.selection,a=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",e):n.parentOffset>0)return!1;a=F9(n)}let s=a&&a.nodeBefore;return!s||!pr.isSelectable(s)?!1:(t&&t(e.tr.setSelection(pr.create(e.doc,a.pos-s.nodeSize)).scrollIntoView()),!0)};function F9(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function Rue(e,t){let{$cursor:r}=e.selection;return!r||(t?!t.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)?null:r}const jue=(e,t,r)=>{let n=Rue(e,r);if(!n)return!1;let i=L9(n);if(!i)return!1;let a=i.nodeAfter;if(Bue(e,i,t,1))return!0;if(n.parent.content.size==0&&(xy(a,"start")||pr.isSelectable(a))){let s=d3(e.doc,n.before(),n.after(),qt.empty);if(s&&s.slice.size<s.to-s.from){if(t){let o=e.tr.step(s);o.setSelection(xy(a,"start")?dn.findFrom(o.doc.resolve(o.mapping.map(i.pos)),1):pr.create(o.doc,o.mapping.map(i.pos))),t(o.scrollIntoView())}return!0}}return a.isAtom&&i.depth==n.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+a.nodeSize).scrollIntoView()),!0):!1},Due=(e,t,r)=>{let{$head:n,empty:i}=e.selection,a=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)return!1;a=L9(n)}let s=a&&a.nodeAfter;return!s||!pr.isSelectable(s)?!1:(t&&t(e.tr.setSelection(pr.create(e.doc,a.pos)).scrollIntoView()),!0)};function L9(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let r=e.node(t);if(e.index(t)+1<r.childCount)return e.doc.resolve(e.after(t+1));if(r.type.spec.isolating)break}return null}const TVe=(e,t)=>{let r=e.selection,n=r instanceof pr,i;if(n){if(r.node.isTextblock||!J0(e.doc,r.from))return!1;i=r.from}else if(i=u3(e.doc,r.from,-1),i==null)return!1;if(t){let a=e.tr.join(i);n&&a.setSelection(pr.create(a.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(a.scrollIntoView())}return!0},IVe=(e,t)=>{let r=e.selection,n;if(r instanceof pr){if(r.node.isTextblock||!J0(e.doc,r.to))return!1;n=r.to}else if(n=u3(e.doc,r.to,1),n==null)return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0},OVe=(e,t)=>{let{$from:r,$to:n}=e.selection,i=r.blockRange(n),a=i&&gb(i);return a==null?!1:(t&&t(e.tr.lift(i,a).scrollIntoView()),!0)},Mue=(e,t)=>{let{$head:r,$anchor:n}=e.selection;return!r.parent.type.spec.code||!r.sameParent(n)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function B9(e){for(let t=0;t<e.edgeCount;t++){let{type:r}=e.edge(t);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const PVe=(e,t)=>{let{$head:r,$anchor:n}=e.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let i=r.node(-1),a=r.indexAfter(-1),s=B9(i.contentMatchAt(a));if(!s||!i.canReplaceWith(a,a,s))return!1;if(t){let o=r.after(),l=e.tr.replaceWith(o,o,s.createAndFill());l.setSelection(dn.near(l.doc.resolve(o),1)),t(l.scrollIntoView())}return!0},Fue=(e,t)=>{let r=e.selection,{$from:n,$to:i}=r;if(r instanceof ic||n.parent.inlineContent||i.parent.inlineContent)return!1;let a=B9(i.parent.contentMatchAt(i.indexAfter()));if(!a||!a.isTextblock)return!1;if(t){let s=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos,o=e.tr.insert(s,a.createAndFill());o.setSelection(Ur.create(o.doc,s+1)),t(o.scrollIntoView())}return!0},Lue=(e,t)=>{let{$cursor:r}=e.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let a=r.before();if(Sh(e.doc,a))return t&&t(e.tr.split(a).scrollIntoView()),!0}let n=r.blockRange(),i=n&&gb(n);return i==null?!1:(t&&t(e.tr.lift(n,i).scrollIntoView()),!0)};function RVe(e){return(t,r)=>{let{$from:n,$to:i}=t.selection;if(t.selection instanceof pr&&t.selection.node.isBlock)return!n.parentOffset||!Sh(t.doc,n.pos)?!1:(r&&r(t.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let a=[],s,o,l=!1,c=!1;for(let m=n.depth;;m--)if(n.node(m).isBlock){l=n.end(m)==n.pos+(n.depth-m),c=n.start(m)==n.pos-(n.depth-m),o=B9(n.node(m-1).contentMatchAt(n.indexAfter(m-1))),a.unshift(l&&o?{type:o}:null),s=m;break}else{if(m==1)return!1;a.unshift(null)}let d=t.tr;(t.selection instanceof Ur||t.selection instanceof ic)&&d.deleteSelection();let f=d.mapping.map(n.pos),p=Sh(d.doc,f,a.length,a);if(p||(a[0]=o?{type:o}:null,p=Sh(d.doc,f,a.length,a)),!p)return!1;if(d.split(f,a.length,a),!l&&c&&n.node(s).type!=o){let m=d.mapping.map(n.before(s)),x=d.doc.resolve(m);o&&n.node(s-1).canReplaceWith(x.index(),x.index()+1,o)&&d.setNodeMarkup(d.mapping.map(n.before(s)),o)}return r&&r(d.scrollIntoView()),!0}}const jVe=RVe(),DVe=(e,t)=>{let{$from:r,to:n}=e.selection,i,a=r.sharedDepth(n);return a==0?!1:(i=r.before(a),t&&t(e.tr.setSelection(pr.create(e.doc,i))),!0)};function MVe(e,t,r){let n=t.nodeBefore,i=t.nodeAfter,a=t.index();return!n||!i||!n.type.compatibleContent(i.type)?!1:!n.content.size&&t.parent.canReplace(a-1,a)?(r&&r(e.tr.delete(t.pos-n.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(a,a+1)||!(i.isTextblock||J0(e.doc,t.pos))?!1:(r&&r(e.tr.join(t.pos).scrollIntoView()),!0)}function Bue(e,t,r,n){let i=t.nodeBefore,a=t.nodeAfter,s,o,l=i.type.spec.isolating||a.type.spec.isolating;if(!l&&MVe(e,t,r))return!0;let c=!l&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(s=(o=i.contentMatchAt(i.childCount)).findWrapping(a.type))&&o.matchType(s[0]||a.type).validEnd){if(r){let m=t.pos+a.nodeSize,x=It.empty;for(let w=s.length-1;w>=0;w--)x=It.from(s[w].create(null,x));x=It.from(i.copy(x));let v=e.tr.step(new gs(t.pos-1,m,t.pos,m,new qt(x,1,0),s.length,!0)),b=v.doc.resolve(m+2*s.length);b.nodeAfter&&b.nodeAfter.type==i.type&&J0(v.doc,b.pos)&&v.join(b.pos),r(v.scrollIntoView())}return!0}let d=a.type.spec.isolating||n>0&&l?null:dn.findFrom(t,1),f=d&&d.$from.blockRange(d.$to),p=f&&gb(f);if(p!=null&&p>=t.depth)return r&&r(e.tr.lift(f,p).scrollIntoView()),!0;if(c&&xy(a,"start",!0)&&xy(i,"end")){let m=i,x=[];for(;x.push(m),!m.isTextblock;)m=m.lastChild;let v=a,b=1;for(;!v.isTextblock;v=v.firstChild)b++;if(m.canReplace(m.childCount,m.childCount,v.content)){if(r){let w=It.empty;for(let C=x.length-1;C>=0;C--)w=It.from(x[C].copy(w));let _=e.tr.step(new gs(t.pos-x.length,t.pos+a.nodeSize,t.pos+b,t.pos+a.nodeSize-b,new qt(w,x.length,0),0,!0));r(_.scrollIntoView())}return!0}}return!1}function Uue(e){return function(t,r){let n=t.selection,i=e<0?n.$from:n.$to,a=i.depth;for(;i.node(a).isInline;){if(!a)return!1;a--}return i.node(a).isTextblock?(r&&r(t.tr.setSelection(Ur.create(t.doc,e<0?i.start(a):i.end(a)))),!0):!1}}const FVe=Uue(-1),LVe=Uue(1);function BVe(e,t=null){return function(r,n){let{$from:i,$to:a}=r.selection,s=i.blockRange(a),o=s&&j9(s,e,t);return o?(n&&n(r.tr.wrap(s,o).scrollIntoView()),!0):!1}}function aX(e,t=null){return function(r,n){let i=!1;for(let a=0;a<r.selection.ranges.length&&!i;a++){let{$from:{pos:s},$to:{pos:o}}=r.selection.ranges[a];r.doc.nodesBetween(s,o,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(e,t)))if(l.type==e)i=!0;else{let d=r.doc.resolve(c),f=d.index();i=d.parent.canReplaceWith(f,f+1,e)}})}if(!i)return!1;if(n){let a=r.tr;for(let s=0;s<r.selection.ranges.length;s++){let{$from:{pos:o},$to:{pos:l}}=r.selection.ranges[s];a.setBlockType(o,l,e,t)}n(a.scrollIntoView())}return!0}}function U9(...e){return function(t,r,n){for(let i=0;i<e.length;i++)if(e[i](t,r,n))return!0;return!1}}U9(M9,Iue,Pue);U9(M9,jue,Due);U9(Mue,Fue,Lue,jVe);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function UVe(e,t=null){return function(r,n){let{$from:i,$to:a}=r.selection,s=i.blockRange(a);if(!s)return!1;let o=n?r.tr:null;return $Ve(o,s,e,t)?(n&&n(o.scrollIntoView()),!0):!1}}function $Ve(e,t,r,n=null){let i=!1,a=t,s=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(r)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let l=s.resolve(t.start-2);a=new _T(l,l,t.depth),t.endIndex<t.parent.childCount&&(t=new _T(t.$from,s.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let o=j9(a,r,n,t);return o?(e&&zVe(e,t,o,i,r),!0):!1}function zVe(e,t,r,n,i){let a=It.empty;for(let d=r.length-1;d>=0;d--)a=It.from(r[d].type.create(r[d].attrs,a));e.step(new gs(t.start-(n?2:0),t.end,t.start,t.end,new qt(a,0,0),r.length,!0));let s=0;for(let d=0;d<r.length;d++)r[d].type==i&&(s=d+1);let o=r.length-s,l=t.start+r.length-(n?2:0),c=t.parent;for(let d=t.startIndex,f=t.endIndex,p=!0;d<f;d++,p=!1)!p&&Sh(e.doc,l,o)&&(e.split(l,o),l+=2*o),l+=c.child(d).nodeSize;return e}function HVe(e){return function(t,r){let{$from:n,$to:i}=t.selection,a=n.blockRange(i,s=>s.childCount>0&&s.firstChild.type==e);return a?r?n.node(a.depth-1).type==e?WVe(t,r,e,a):VVe(t,r,a):!0:!1}}function WVe(e,t,r,n){let i=e.tr,a=n.end,s=n.$to.end(n.depth);a<s&&(i.step(new gs(a-1,s,a,s,new qt(It.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new _T(i.doc.resolve(n.$from.pos),i.doc.resolve(s),n.depth));const o=gb(n);if(o==null)return!1;i.lift(n,o);let l=i.doc.resolve(i.mapping.map(a,-1)-1);return J0(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),t(i.scrollIntoView()),!0}function VVe(e,t,r){let n=e.tr,i=r.parent;for(let m=r.end,x=r.endIndex-1,v=r.startIndex;x>v;x--)m-=i.child(x).nodeSize,n.delete(m-1,m+1);let a=n.doc.resolve(r.start),s=a.nodeAfter;if(n.mapping.map(r.end)!=r.start+a.nodeAfter.nodeSize)return!1;let o=r.startIndex==0,l=r.endIndex==i.childCount,c=a.node(-1),d=a.index(-1);if(!c.canReplace(d+(o?0:1),d+1,s.content.append(l?It.empty:It.from(i))))return!1;let f=a.pos,p=f+s.nodeSize;return n.step(new gs(f-(o?1:0),p+(l?1:0),f+1,p-1,new qt((o?It.empty:It.from(i.copy(It.empty))).append(l?It.empty:It.from(i.copy(It.empty))),o?0:1,l?0:1),o?0:1)),t(n.scrollIntoView()),!0}function qVe(e){return function(t,r){let{$from:n,$to:i}=t.selection,a=n.blockRange(i,c=>c.childCount>0&&c.firstChild.type==e);if(!a)return!1;let s=a.startIndex;if(s==0)return!1;let o=a.parent,l=o.child(s-1);if(l.type!=e)return!1;if(r){let c=l.lastChild&&l.lastChild.type==o.type,d=It.from(c?e.create():null),f=new qt(It.from(e.create(null,It.from(o.type.create(null,d)))),c?3:1,0),p=a.start,m=a.end;r(t.tr.step(new gs(p-(c?3:1),m,p,m,f,1,!0)).scrollIntoView())}return!0}}const Rs=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},vy=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let H8=null;const Zf=function(e,t,r){let n=H8||(H8=document.createRange());return n.setEnd(e,r??e.nodeValue.length),n.setStart(e,t||0),n},GVe=function(){H8=null},sx=function(e,t,r,n){return r&&(sX(e,t,r,n,-1)||sX(e,t,r,n,1))},KVe=/^(img|br|input|textarea|hr)$/i;function sX(e,t,r,n,i){for(var a;;){if(e==r&&t==n)return!0;if(t==(i<0?0:Gc(e))){let s=e.parentNode;if(!s||s.nodeType!=1||cC(e)||KVe.test(e.nodeName)||e.contentEditable=="false")return!1;t=Rs(e)+(i<0?0:1),e=s}else if(e.nodeType==1){let s=e.childNodes[t+(i<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((a=s.pmViewDesc)===null||a===void 0)&&a.ignoreForSelection)t+=i;else return!1;else e=s,t=i<0?Gc(e):0}else return!1}}function Gc(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function XVe(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=Gc(e)}else if(e.parentNode&&!cC(e))t=Rs(e),e=e.parentNode;else return null}}function YVe(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!cC(e))t=Rs(e)+1,e=e.parentNode;else return null}}function QVe(e,t,r){for(let n=t==0,i=t==Gc(e);n||i;){if(e==r)return!0;let a=Rs(e);if(e=e.parentNode,!e)return!1;n=n&&a==0,i=i&&a==Gc(e)}}function cC(e){let t;for(let r=e;r&&!(t=r.pmViewDesc);r=r.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const h3=function(e){return e.focusNode&&sx(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function Vm(e,t){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=e,r.key=r.code=t,r}function JVe(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function ZVe(e,t,r){if(e.caretPositionFromPoint)try{let n=e.caretPositionFromPoint(t,r);if(n)return{node:n.offsetNode,offset:Math.min(Gc(n.offsetNode),n.offset)}}catch{}if(e.caretRangeFromPoint){let n=e.caretRangeFromPoint(t,r);if(n)return{node:n.startContainer,offset:Math.min(Gc(n.startContainer),n.startOffset)}}}const sf=typeof navigator<"u"?navigator:null,oX=typeof document<"u"?document:null,Z0=sf&&sf.userAgent||"",W8=/Edge\/(\d+)/.exec(Z0),$ue=/MSIE \d/.exec(Z0),V8=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Z0),wl=!!($ue||V8||W8),S0=$ue?document.documentMode:V8?+V8[1]:W8?+W8[1]:0,tu=!wl&&/gecko\/(\d+)/i.test(Z0);tu&&+(/Firefox\/(\d+)/.exec(Z0)||[0,0])[1];const q8=!wl&&/Chrome\/(\d+)/.exec(Z0),hs=!!q8,zue=q8?+q8[1]:0,go=!wl&&!!sf&&/Apple Computer/.test(sf.vendor),yy=go&&(/Mobile\/\w+/.test(Z0)||!!sf&&sf.maxTouchPoints>2),Hc=yy||(sf?/Mac/.test(sf.platform):!1),Hue=sf?/Win/.test(sf.platform):!1,dh=/Android \d/.test(Z0),uC=!!oX&&"webkitFontSmoothing"in oX.documentElement.style,eqe=uC?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function tqe(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function qf(e,t){return typeof e=="number"?e:e[t]}function rqe(e){let t=e.getBoundingClientRect(),r=t.width/e.offsetWidth||1,n=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*r,top:t.top,bottom:t.top+e.clientHeight*n}}function lX(e,t,r){let n=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,a=e.dom.ownerDocument;for(let s=r||e.dom;s;){if(s.nodeType!=1){s=vy(s);continue}let o=s,l=o==a.body,c=l?tqe(a):rqe(o),d=0,f=0;if(t.top<c.top+qf(n,"top")?f=-(c.top-t.top+qf(i,"top")):t.bottom>c.bottom-qf(n,"bottom")&&(f=t.bottom-t.top>c.bottom-c.top?t.top+qf(i,"top")-c.top:t.bottom-c.bottom+qf(i,"bottom")),t.left<c.left+qf(n,"left")?d=-(c.left-t.left+qf(i,"left")):t.right>c.right-qf(n,"right")&&(d=t.right-c.right+qf(i,"right")),d||f)if(l)a.defaultView.scrollBy(d,f);else{let m=o.scrollLeft,x=o.scrollTop;f&&(o.scrollTop+=f),d&&(o.scrollLeft+=d);let v=o.scrollLeft-m,b=o.scrollTop-x;t={left:t.left-v,top:t.top-b,right:t.right-v,bottom:t.bottom-b}}let p=l?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(p))break;s=p=="absolute"?s.offsetParent:vy(s)}}function nqe(e){let t=e.dom.getBoundingClientRect(),r=Math.max(0,t.top),n,i;for(let a=(t.left+t.right)/2,s=r+1;s<Math.min(innerHeight,t.bottom);s+=5){let o=e.root.elementFromPoint(a,s);if(!o||o==e.dom||!e.dom.contains(o))continue;let l=o.getBoundingClientRect();if(l.top>=r-20){n=o,i=l.top;break}}return{refDOM:n,refTop:i,stack:Wue(e.dom)}}function Wue(e){let t=[],r=e.ownerDocument;for(let n=e;n&&(t.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),e!=r);n=vy(n));return t}function iqe({refDOM:e,refTop:t,stack:r}){let n=e?e.getBoundingClientRect().top:0;Vue(r,n==0?0:n-t)}function Vue(e,t){for(let r=0;r<e.length;r++){let{dom:n,top:i,left:a}=e[r];n.scrollTop!=i+t&&(n.scrollTop=i+t),n.scrollLeft!=a&&(n.scrollLeft=a)}}let R1=null;function aqe(e){if(e.setActive)return e.setActive();if(R1)return e.focus(R1);let t=Wue(e);e.focus(R1==null?{get preventScroll(){return R1={preventScroll:!0},!0}}:void 0),R1||(R1=!1,Vue(t,0))}function que(e,t){let r,n=2e8,i,a=0,s=t.top,o=t.top,l,c;for(let d=e.firstChild,f=0;d;d=d.nextSibling,f++){let p;if(d.nodeType==1)p=d.getClientRects();else if(d.nodeType==3)p=Zf(d).getClientRects();else continue;for(let m=0;m<p.length;m++){let x=p[m];if(x.top<=s&&x.bottom>=o){s=Math.max(x.bottom,s),o=Math.min(x.top,o);let v=x.left>t.left?x.left-t.left:x.right<t.left?t.left-x.right:0;if(v<n){r=d,n=v,i=v&&r.nodeType==3?{left:x.right<t.left?x.right:x.left,top:t.top}:t,d.nodeType==1&&v&&(a=f+(t.left>=(x.left+x.right)/2?1:0));continue}}else x.top>t.top&&!l&&x.left<=t.left&&x.right>=t.left&&(l=d,c={left:Math.max(x.left,Math.min(x.right,t.left)),top:x.top});!r&&(t.left>=x.right&&t.top>=x.top||t.left>=x.left&&t.top>=x.bottom)&&(a=f+1)}}return!r&&l&&(r=l,i=c,n=0),r&&r.nodeType==3?sqe(r,i):!r||n&&r.nodeType==1?{node:e,offset:a}:que(r,i)}function sqe(e,t){let r=e.nodeValue.length,n=document.createRange(),i;for(let a=0;a<r;a++){n.setEnd(e,a+1),n.setStart(e,a);let s=jp(n,1);if(s.top!=s.bottom&&$9(t,s)){i={node:e,offset:a+(t.left>=(s.left+s.right)/2?1:0)};break}}return n.detach(),i||{node:e,offset:0}}function $9(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function oqe(e,t){let r=e.parentNode;return r&&/^li$/i.test(r.nodeName)&&t.left<e.getBoundingClientRect().left?r:e}function lqe(e,t,r){let{node:n,offset:i}=que(t,r),a=-1;if(n.nodeType==1&&!n.firstChild){let s=n.getBoundingClientRect();a=s.left!=s.right&&r.left>(s.left+s.right)/2?1:-1}return e.docView.posFromDOM(n,i,a)}function cqe(e,t,r,n){let i=-1;for(let a=t,s=!1;a!=e.dom;){let o=e.docView.nearestDesc(a,!0),l;if(!o)return null;if(o.dom.nodeType==1&&(o.node.isBlock&&o.parent||!o.contentDOM)&&((l=o.dom.getBoundingClientRect()).width||l.height)&&(o.node.isBlock&&o.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(o.dom.nodeName)&&(!s&&l.left>n.left||l.top>n.top?i=o.posBefore:(!s&&l.right<n.left||l.bottom<n.top)&&(i=o.posAfter),s=!0),!o.contentDOM&&i<0&&!o.node.isText))return(o.node.isBlock?n.top<(l.top+l.bottom)/2:n.left<(l.left+l.right)/2)?o.posBefore:o.posAfter;a=o.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,r,-1)}function Gue(e,t,r){let n=e.childNodes.length;if(n&&r.top<r.bottom)for(let i=Math.max(0,Math.min(n-1,Math.floor(n*(t.top-r.top)/(r.bottom-r.top))-2)),a=i;;){let s=e.childNodes[a];if(s.nodeType==1){let o=s.getClientRects();for(let l=0;l<o.length;l++){let c=o[l];if($9(t,c))return Gue(s,t,c)}}if((a=(a+1)%n)==i)break}return e}function uqe(e,t){let r=e.dom.ownerDocument,n,i=0,a=ZVe(r,t.left,t.top);a&&({node:n,offset:i}=a);let s=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top),o;if(!s||!e.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=e.dom.getBoundingClientRect();if(!$9(t,c)||(s=Gue(e.dom,t,c),!s))return null}if(go)for(let c=s;n&&c;c=vy(c))c.draggable&&(n=void 0);if(s=oqe(s,t),n){if(tu&&n.nodeType==1&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let d=n.childNodes[i],f;d.nodeName=="IMG"&&(f=d.getBoundingClientRect()).right<=t.left&&f.bottom>t.top&&i++}let c;uC&&i&&n.nodeType==1&&(c=n.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=t.top&&i--,n==e.dom&&i==n.childNodes.length-1&&n.lastChild.nodeType==1&&t.top>n.lastChild.getBoundingClientRect().bottom?o=e.state.doc.content.size:(i==0||n.nodeType!=1||n.childNodes[i-1].nodeName!="BR")&&(o=cqe(e,n,i,t))}o==null&&(o=lqe(e,s,t));let l=e.docView.nearestDesc(s,!0);return{pos:o,inside:l?l.posAtStart-l.border:-1}}function cX(e){return e.top<e.bottom||e.left<e.right}function jp(e,t){let r=e.getClientRects();if(r.length){let n=r[t<0?0:r.length-1];if(cX(n))return n}return Array.prototype.find.call(r,cX)||e.getBoundingClientRect()}const dqe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Kue(e,t,r){let{node:n,offset:i,atom:a}=e.docView.domFromPos(t,r<0?-1:1),s=uC||tu;if(n.nodeType==3)if(s&&(dqe.test(n.nodeValue)||(r<0?!i:i==n.nodeValue.length))){let l=jp(Zf(n,i,i),r);if(tu&&i&&/\s/.test(n.nodeValue[i-1])&&i<n.nodeValue.length){let c=jp(Zf(n,i-1,i-1),-1);if(c.top==l.top){let d=jp(Zf(n,i,i+1),-1);if(d.top!=l.top)return _w(d,d.left<c.left)}}return l}else{let l=i,c=i,d=r<0?1:-1;return r<0&&!i?(c++,d=-1):r>=0&&i==n.nodeValue.length?(l--,d=1):r<0?l--:c++,_w(jp(Zf(n,l,c),d),d<0)}if(!e.state.doc.resolve(t-(a||0)).parent.inlineContent){if(a==null&&i&&(r<0||i==Gc(n))){let l=n.childNodes[i-1];if(l.nodeType==1)return bD(l.getBoundingClientRect(),!1)}if(a==null&&i<Gc(n)){let l=n.childNodes[i];if(l.nodeType==1)return bD(l.getBoundingClientRect(),!0)}return bD(n.getBoundingClientRect(),r>=0)}if(a==null&&i&&(r<0||i==Gc(n))){let l=n.childNodes[i-1],c=l.nodeType==3?Zf(l,Gc(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return _w(jp(c,1),!1)}if(a==null&&i<Gc(n)){let l=n.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Zf(l,0,s?0:1):l.nodeType==1?l:null:null;if(c)return _w(jp(c,-1),!0)}return _w(jp(n.nodeType==3?Zf(n):n,-r),r>=0)}function _w(e,t){if(e.width==0)return e;let r=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:r,right:r}}function bD(e,t){if(e.height==0)return e;let r=t?e.top:e.bottom;return{top:r,bottom:r,left:e.left,right:e.right}}function Xue(e,t,r){let n=e.state,i=e.root.activeElement;n!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return r()}finally{n!=t&&e.updateState(n),i!=e.dom&&i&&i.focus()}}function fqe(e,t,r){let n=t.selection,i=r=="up"?n.$from:n.$to;return Xue(e,t,()=>{let{node:a}=e.docView.domFromPos(i.pos,r=="up"?-1:1);for(;;){let o=e.docView.nearestDesc(a,!0);if(!o)break;if(o.node.isBlock){a=o.contentDOM||o.dom;break}a=o.dom.parentNode}let s=Kue(e,i.pos,1);for(let o=a.firstChild;o;o=o.nextSibling){let l;if(o.nodeType==1)l=o.getClientRects();else if(o.nodeType==3)l=Zf(o,0,o.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let d=l[c];if(d.bottom>d.top+1&&(r=="up"?s.top-d.top>(d.bottom-s.top)*2:d.bottom-s.bottom>(s.bottom-d.top)*2))return!1}}return!0})}const hqe=/[\u0590-\u08ac]/;function pqe(e,t,r){let{$head:n}=t.selection;if(!n.parent.isTextblock)return!1;let i=n.parentOffset,a=!i,s=i==n.parent.content.size,o=e.domSelection();return o?!hqe.test(n.parent.textContent)||!o.modify?r=="left"||r=="backward"?a:s:Xue(e,t,()=>{let{focusNode:l,focusOffset:c,anchorNode:d,anchorOffset:f}=e.domSelectionRange(),p=o.caretBidiLevel;o.modify("move",r,"character");let m=n.depth?e.docView.domAfterPos(n.before()):e.dom,{focusNode:x,focusOffset:v}=e.domSelectionRange(),b=x&&!m.contains(x.nodeType==1?x:x.parentNode)||l==x&&c==v;try{o.collapse(d,f),l&&(l!=d||c!=f)&&o.extend&&o.extend(l,c)}catch{}return p!=null&&(o.caretBidiLevel=p),b}):n.pos==n.start()||n.pos==n.end()}let uX=null,dX=null,fX=!1;function mqe(e,t,r){return uX==t&&dX==r?fX:(uX=t,dX=r,fX=r=="up"||r=="down"?fqe(e,t,r):pqe(e,t,r))}const ru=0,hX=1,ng=2,of=3;class dC{constructor(t,r,n,i){this.parent=t,this.children=r,this.dom=n,this.contentDOM=i,this.dirty=ru,n.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,r,n){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let r=0;r<this.children.length;r++)t+=this.children[r].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let r=0,n=this.posAtStart;;r++){let i=this.children[r];if(i==t)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,r,n){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(n<0){let a,s;if(t==this.contentDOM)a=t.childNodes[r-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;a=t.previousSibling}for(;a&&!((s=a.pmViewDesc)&&s.parent==this);)a=a.previousSibling;return a?this.posBeforeChild(s)+s.size:this.posAtStart}else{let a,s;if(t==this.contentDOM)a=t.childNodes[r];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;a=t.nextSibling}for(;a&&!((s=a.pmViewDesc)&&s.parent==this);)a=a.nextSibling;return a?this.posBeforeChild(s):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=r>Rs(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let a=t;;a=a.parentNode){if(a==this.dom){i=!1;break}if(a.previousSibling)break}if(i==null&&r==t.childNodes.length)for(let a=t;;a=a.parentNode){if(a==this.dom){i=!0;break}if(a.nextSibling)break}}return i??n>0?this.posAtEnd:this.posAtStart}nearestDesc(t,r=!1){for(let n=!0,i=t;i;i=i.parentNode){let a=this.getDesc(i),s;if(a&&(!r||a.node))if(n&&(s=a.nodeDOM)&&!(s.nodeType==1?s.contains(t.nodeType==1?t:t.parentNode):s==t))n=!1;else return a}}getDesc(t){let r=t.pmViewDesc;for(let n=r;n;n=n.parent)if(n==this)return r}posFromDOM(t,r,n){for(let i=t;i;i=i.parentNode){let a=this.getDesc(i);if(a)return a.localPosFromDOM(t,r,n)}return-1}descAt(t){for(let r=0,n=0;r<this.children.length;r++){let i=this.children[r],a=n+i.size;if(n==t&&a!=n){for(;!i.border&&i.children.length;)for(let s=0;s<i.children.length;s++){let o=i.children[s];if(o.size){i=o;break}}return i}if(t<a)return i.descAt(t-n-i.border);n=a}}domFromPos(t,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let n=0,i=0;for(let a=0;n<this.children.length;n++){let s=this.children[n],o=a+s.size;if(o>t||s instanceof Que){i=t-a;break}a=o}if(i)return this.children[n].domFromPos(i-this.children[n].border,r);for(let a;n&&!(a=this.children[n-1]).size&&a instanceof Yue&&a.side>=0;n--);if(r<=0){let a,s=!0;for(;a=n?this.children[n-1]:null,!(!a||a.dom.parentNode==this.contentDOM);n--,s=!1);return a&&r&&s&&!a.border&&!a.domAtom?a.domFromPos(a.size,r):{node:this.contentDOM,offset:a?Rs(a.dom)+1:0}}else{let a,s=!0;for(;a=n<this.children.length?this.children[n]:null,!(!a||a.dom.parentNode==this.contentDOM);n++,s=!1);return a&&s&&!a.border&&!a.domAtom?a.domFromPos(0,r):{node:this.contentDOM,offset:a?Rs(a.dom):this.contentDOM.childNodes.length}}}parseRange(t,r,n=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,a=-1;for(let s=n,o=0;;o++){let l=this.children[o],c=s+l.size;if(i==-1&&t<=c){let d=s+l.border;if(t>=d&&r<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,r,d);t=s;for(let f=o;f>0;f--){let p=this.children[f-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){i=Rs(p.dom)+1;break}t-=p.size}i==-1&&(i=0)}if(i>-1&&(c>r||o==this.children.length-1)){r=c;for(let d=o+1;d<this.children.length;d++){let f=this.children[d];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){a=Rs(f.dom);break}r+=f.size}a==-1&&(a=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:t,to:r,fromOffset:i,toOffset:a}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[t<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(t)}domAfterPos(t){let{node:r,offset:n}=this.domFromPos(t,0);if(r.nodeType!=1||n==r.childNodes.length)throw new RangeError("No node after pos "+t);return r.childNodes[n]}setSelection(t,r,n,i=!1){let a=Math.min(t,r),s=Math.max(t,r);for(let m=0,x=0;m<this.children.length;m++){let v=this.children[m],b=x+v.size;if(a>x&&s<b)return v.setSelection(t-x-v.border,r-x-v.border,n,i);x=b}let o=this.domFromPos(t,t?-1:1),l=r==t?o:this.domFromPos(r,r?-1:1),c=n.root.getSelection(),d=n.domSelectionRange(),f=!1;if((tu||go)&&t==r){let{node:m,offset:x}=o;if(m.nodeType==3){if(f=!!(x&&m.nodeValue[x-1]==`
`),f&&x==m.nodeValue.length)for(let v=m,b;v;v=v.parentNode){if(b=v.nextSibling){b.nodeName=="BR"&&(o=l={node:b.parentNode,offset:Rs(b)+1});break}let w=v.pmViewDesc;if(w&&w.node&&w.node.isBlock)break}}else{let v=m.childNodes[x-1];f=v&&(v.nodeName=="BR"||v.contentEditable=="false")}}if(tu&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let m=d.focusNode.childNodes[d.focusOffset];m&&m.contentEditable=="false"&&(i=!0)}if(!(i||f&&go)&&sx(o.node,o.offset,d.anchorNode,d.anchorOffset)&&sx(l.node,l.offset,d.focusNode,d.focusOffset))return;let p=!1;if((c.extend||t==r)&&!(f&&tu)){c.collapse(o.node,o.offset);try{t!=r&&c.extend(l.node,l.offset),p=!0}catch{}}if(!p){if(t>r){let x=o;o=l,l=x}let m=document.createRange();m.setEnd(l.node,l.offset),m.setStart(o.node,o.offset),c.removeAllRanges(),c.addRange(m)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,r){for(let n=0,i=0;i<this.children.length;i++){let a=this.children[i],s=n+a.size;if(n==s?t<=s&&r>=n:t<s&&r>n){let o=n+a.border,l=s-a.border;if(t>=o&&r<=l){this.dirty=t==n||r==s?ng:hX,t==o&&r==l&&(a.contentLost||a.dom.parentNode!=this.contentDOM)?a.dirty=of:a.markDirty(t-o,r-o);return}else a.dirty=a.dom==a.contentDOM&&a.dom.parentNode==this.contentDOM&&!a.children.length?ng:of}n=s}this.dirty=ng}markParentsDirty(){let t=1;for(let r=this.parent;r;r=r.parent,t++){let n=t==1?ng:hX;r.dirty<n&&(r.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class Yue extends dC{constructor(t,r,n,i){let a,s=r.type.toDOM;if(typeof s=="function"&&(s=s(n,()=>{if(!a)return i;if(a.parent)return a.parent.posBeforeChild(a)})),!r.type.spec.raw){if(s.nodeType!=1){let o=document.createElement("span");o.appendChild(s),s=o}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(t,[],s,null),this.widget=r,this.widget=r,a=this}matchesWidget(t){return this.dirty==ru&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let r=this.widget.spec.stopEvent;return r?r(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class gqe extends dC{constructor(t,r,n,i){super(t,[],r,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(t,r){return t!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class ox extends dC{constructor(t,r,n,i,a){super(t,[],n,i),this.mark=r,this.spec=a}static create(t,r,n,i){let a=i.nodeViews[r.type.name],s=a&&a(r,i,n);return(!s||!s.dom)&&(s=Wx.renderSpec(document,r.type.spec.toDOM(r,n),null,r.attrs)),new ox(t,r,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&of||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=of&&this.mark.eq(t)}markDirty(t,r){if(super.markDirty(t,r),this.dirty!=ru){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=ru}}slice(t,r,n){let i=ox.create(this.parent,this.mark,!0,n),a=this.children,s=this.size;r<s&&(a=K8(a,r,s,n)),t>0&&(a=K8(a,0,t,n));for(let o=0;o<a.length;o++)a[o].parent=i;return i.children=a,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class E0 extends dC{constructor(t,r,n,i,a,s,o,l,c){super(t,[],a,s),this.node=r,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=o}static create(t,r,n,i,a,s){let o=a.nodeViews[r.type.name],l,c=o&&o(r,a,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},n,i),d=c&&c.dom,f=c&&c.contentDOM;if(r.isText){if(!d)d=document.createTextNode(r.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:f}=Wx.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!f&&!r.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),r.type.spec.draggable&&(d.draggable=!0));let p=d;return d=ede(d,n,r),c?l=new xqe(t,r,n,i,d,f||null,p,c,a,s+1):r.isText?new p3(t,r,n,i,d,p,a):new E0(t,r,n,i,d,f||null,p,a,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let n=this.children[r];if(this.dom.contains(n.dom.parentNode)){t.contentElement=n.dom.parentNode;break}}t.contentElement||(t.getContent=()=>It.empty)}return t}matchesNode(t,r,n){return this.dirty==ru&&t.eq(this.node)&&AT(r,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,r){let n=this.node.inlineContent,i=r,a=t.composing?this.localCompositionInfo(t,r):null,s=a&&a.pos>-1?a:null,o=a&&a.pos<0,l=new yqe(this,s&&s.node,t);Sqe(this.node,this.innerDeco,(c,d,f)=>{c.spec.marks?l.syncToMarks(c.spec.marks,n,t):c.type.side>=0&&!f&&l.syncToMarks(d==this.node.childCount?ci.none:this.node.child(d).marks,n,t),l.placeWidget(c,t,i)},(c,d,f,p)=>{l.syncToMarks(c.marks,n,t);let m;l.findNodeMatch(c,d,f,p)||o&&t.state.selection.from>i&&t.state.selection.to<i+c.nodeSize&&(m=l.findIndexWithChild(a.node))>-1&&l.updateNodeAt(c,d,f,m,t)||l.updateNextNode(c,d,f,t,p,i)||l.addNode(c,d,f,t,i),i+=c.nodeSize}),l.syncToMarks([],n,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==ng)&&(s&&this.protectLocalComposition(t,s),Jue(this.contentDOM,this.children,t),yy&&Eqe(this.dom))}localCompositionInfo(t,r){let{from:n,to:i}=t.state.selection;if(!(t.state.selection instanceof Ur)||n<r||i>r+this.node.content.size)return null;let a=t.input.compositionNode;if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let s=a.nodeValue,o=Cqe(this.node.content,s,n-r,i-r);return o<0?null:{node:a,pos:o,text:s}}else return{node:a,pos:-1,text:""}}protectLocalComposition(t,{node:r,pos:n,text:i}){if(this.getDesc(r))return;let a=r;for(;a.parentNode!=this.contentDOM;a=a.parentNode){for(;a.previousSibling;)a.parentNode.removeChild(a.previousSibling);for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling);a.pmViewDesc&&(a.pmViewDesc=void 0)}let s=new gqe(this,a,r,i);t.input.compositionNodes.push(s),this.children=K8(this.children,n,n+i.length,t,s)}update(t,r,n,i){return this.dirty==of||!t.sameMarkup(this.node)?!1:(this.updateInner(t,r,n,i),!0)}updateInner(t,r,n,i){this.updateOuterDeco(r),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=ru}updateOuterDeco(t){if(AT(t,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=Zue(this.dom,this.nodeDOM,G8(this.outerDeco,this.node,r),G8(t,this.node,r)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function pX(e,t,r,n,i){ede(n,t,e);let a=new E0(void 0,e,t,r,n,n,n,i,0);return a.contentDOM&&a.updateChildren(i,0),a}class p3 extends E0{constructor(t,r,n,i,a,s,o){super(t,r,n,i,a,null,s,o,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,r,n,i){return this.dirty==of||this.dirty!=ru&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=ru||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=ru,!0)}inParent(){let t=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,r,n){return t==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(t,r,n)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,r,n){let i=this.node.cut(t,r),a=document.createTextNode(i.text);return new p3(this.parent,i,this.outerDeco,this.innerDeco,a,a,n)}markDirty(t,r){super.markDirty(t,r),this.dom!=this.nodeDOM&&(t==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=of)}get domAtom(){return!1}isText(t){return this.node.text==t}}class Que extends dC{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==ru&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class xqe extends E0{constructor(t,r,n,i,a,s,o,l,c,d){super(t,r,n,i,a,s,o,c,d),this.spec=l}update(t,r,n,i){if(this.dirty==of)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let a=this.spec.update(t,r,n);return a&&this.updateInner(t,r,n,i),a}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,r,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,r,n,i){this.spec.setSelection?this.spec.setSelection(t,r,n.root):super.setSelection(t,r,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function Jue(e,t,r){let n=e.firstChild,i=!1;for(let a=0;a<t.length;a++){let s=t[a],o=s.dom;if(o.parentNode==e){for(;o!=n;)n=mX(n),i=!0;n=n.nextSibling}else i=!0,e.insertBefore(o,n);if(s instanceof ox){let l=n?n.previousSibling:e.lastChild;Jue(s.contentDOM,s.children,r),n=l?l.nextSibling:e.firstChild}}for(;n;)n=mX(n),i=!0;i&&r.trackWrites==e&&(r.trackWrites=null)}const _2=function(e){e&&(this.nodeName=e)};_2.prototype=Object.create(null);const ig=[new _2];function G8(e,t,r){if(e.length==0)return ig;let n=r?ig[0]:new _2,i=[n];for(let a=0;a<e.length;a++){let s=e[a].type.attrs;if(s){s.nodeName&&i.push(n=new _2(s.nodeName));for(let o in s){let l=s[o];l!=null&&(r&&i.length==1&&i.push(n=new _2(t.isInline?"span":"div")),o=="class"?n.class=(n.class?n.class+" ":"")+l:o=="style"?n.style=(n.style?n.style+";":"")+l:o!="nodeName"&&(n[o]=l))}}}return i}function Zue(e,t,r,n){if(r==ig&&n==ig)return t;let i=t;for(let a=0;a<n.length;a++){let s=n[a],o=r[a];if(a){let l;o&&o.nodeName==s.nodeName&&i!=e&&(l=i.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(i),o=ig[0]),i=l}vqe(i,o||ig[0],s)}return i}function vqe(e,t,r){for(let n in t)n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)&&e.removeAttribute(n);for(let n in r)n!="class"&&n!="style"&&n!="nodeName"&&r[n]!=t[n]&&e.setAttribute(n,r[n]);if(t.class!=r.class){let n=t.class?t.class.split(" ").filter(Boolean):[],i=r.class?r.class.split(" ").filter(Boolean):[];for(let a=0;a<n.length;a++)i.indexOf(n[a])==-1&&e.classList.remove(n[a]);for(let a=0;a<i.length;a++)n.indexOf(i[a])==-1&&e.classList.add(i[a]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=r.style){if(t.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=n.exec(t.style);)e.style.removeProperty(i[1])}r.style&&(e.style.cssText+=r.style)}}function ede(e,t,r){return Zue(e,e,ig,G8(t,r,e.nodeType!=1))}function AT(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].type.eq(t[r].type))return!1;return!0}function mX(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class yqe{constructor(t,r,n){this.lock=r,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=bqe(t.node.content,t)}destroyBetween(t,r){if(t!=r){for(let n=t;n<r;n++)this.top.children[n].destroy();this.top.children.splice(t,r-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,r,n){let i=0,a=this.stack.length>>1,s=Math.min(a,t.length);for(;i<s&&(i==a-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<a;)this.destroyRest(),this.top.dirty=ru,this.index=this.stack.pop(),this.top=this.stack.pop(),a--;for(;a<t.length;){this.stack.push(this.top,this.index+1);let o=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(t[a])&&!this.isLocked(c.dom)){o=l;break}}if(o>-1)o>this.index&&(this.changed=!0,this.destroyBetween(this.index,o)),this.top=this.top.children[this.index];else{let l=ox.create(this.top,t[a],r,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,a++}}findNodeMatch(t,r,n,i){let a=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(t,r,n))a=this.top.children.indexOf(s,this.index);else for(let o=this.index,l=Math.min(this.top.children.length,o+5);o<l;o++){let c=this.top.children[o];if(c.matchesNode(t,r,n)&&!this.preMatch.matched.has(c)){a=o;break}}return a<0?!1:(this.destroyBetween(this.index,a),this.index++,!0)}updateNodeAt(t,r,n,i,a){let s=this.top.children[i];return s.dirty==of&&s.dom==s.contentDOM&&(s.dirty=ng),s.update(t,r,n,a)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let r=t.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let n=t.pmViewDesc;if(n){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==n)return i}return-1}t=r}}updateNextNode(t,r,n,i,a,s){for(let o=this.index;o<this.top.children.length;o++){let l=this.top.children[o];if(l instanceof E0){let c=this.preMatch.matched.get(l);if(c!=null&&c!=a)return!1;let d=l.dom,f,p=this.isLocked(d)&&!(t.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==t.text&&l.dirty!=of&&AT(r,l.outerDeco));if(!p&&l.update(t,r,n,i))return this.destroyBetween(this.index,o),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!p&&(f=this.recreateWrapper(l,t,r,n,i,s)))return this.destroyBetween(this.index,o),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=ng,f.updateChildren(i,s+1),f.dirty=ru),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,r,n,i,a,s){if(t.dirty||r.isAtom||!t.children.length||!t.node.content.eq(r.content)||!AT(n,t.outerDeco)||!i.eq(t.innerDeco))return null;let o=E0.create(this.top,r,n,i,a,s);if(o.contentDOM){o.children=t.children,t.children=[];for(let l of o.children)l.parent=o}return t.destroy(),o}addNode(t,r,n,i,a){let s=E0.create(this.top,t,r,n,i,a);s.contentDOM&&s.updateChildren(i,a+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(t,r,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let a=new Yue(this.top,t,r,n);this.top.children.splice(this.index++,0,a),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],r=this.top;for(;t instanceof ox;)r=t,t=r.children[r.children.length-1];(!t||!(t instanceof p3)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((go||hs)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(t,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(t))this.index++;else{let n=document.createElement(t);t=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),t=="BR"&&(n.className="ProseMirror-trailingBreak");let i=new Que(this.top,[],n,null);r!=this.top?r.children.push(i):r.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function bqe(e,t){let r=t,n=r.children.length,i=e.childCount,a=new Map,s=[];e:for(;i>0;){let o;for(;;)if(n){let c=r.children[n-1];if(c instanceof ox)r=c,n=c.children.length;else{o=c,n--;break}}else{if(r==t)break e;n=r.parent.children.indexOf(r),r=r.parent}let l=o.node;if(l){if(l!=e.child(i-1))break;--i,a.set(o,i),s.push(o)}}return{index:i,matched:a,matches:s.reverse()}}function wqe(e,t){return e.type.side-t.type.side}function Sqe(e,t,r,n){let i=t.locals(e),a=0;if(i.length==0){for(let c=0;c<e.childCount;c++){let d=e.child(c);n(d,i,t.forChild(a,d),c),a+=d.nodeSize}return}let s=0,o=[],l=null;for(let c=0;;){let d,f;for(;s<i.length&&i[s].to==a;){let b=i[s++];b.widget&&(d?(f||(f=[d])).push(b):d=b)}if(d)if(f){f.sort(wqe);for(let b=0;b<f.length;b++)r(f[b],c,!!l)}else r(d,c,!!l);let p,m;if(l)m=-1,p=l,l=null;else if(c<e.childCount)m=c,p=e.child(c++);else break;for(let b=0;b<o.length;b++)o[b].to<=a&&o.splice(b--,1);for(;s<i.length&&i[s].from<=a&&i[s].to>a;)o.push(i[s++]);let x=a+p.nodeSize;if(p.isText){let b=x;s<i.length&&i[s].from<b&&(b=i[s].from);for(let w=0;w<o.length;w++)o[w].to<b&&(b=o[w].to);b<x&&(l=p.cut(b-a),p=p.cut(0,b-a),x=b,m=-1)}else for(;s<i.length&&i[s].to<x;)s++;let v=p.isInline&&!p.isLeaf?o.filter(b=>!b.inline):o.slice();n(p,v,t.forChild(a,p),m),a=x}}function Eqe(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function Cqe(e,t,r,n){for(let i=0,a=0;i<e.childCount&&a<=n;){let s=e.child(i++),o=a;if(a+=s.nodeSize,!s.isText)continue;let l=s.text;for(;i<e.childCount;){let c=e.child(i++);if(a+=c.nodeSize,!c.isText)break;l+=c.text}if(a>=r){if(a>=n&&l.slice(n-t.length-o,n-o)==t)return n-t.length;let c=o<n?l.lastIndexOf(t,n-o-1):-1;if(c>=0&&c+t.length+o>=r)return o+c;if(r==n&&l.length>=n+t.length-o&&l.slice(n-o,n-o+t.length)==t)return n}}return-1}function K8(e,t,r,n,i){let a=[];for(let s=0,o=0;s<e.length;s++){let l=e[s],c=o,d=o+=l.size;c>=r||d<=t?a.push(l):(c<t&&a.push(l.slice(0,t-c,n)),i&&(a.push(i),i=void 0),d>r&&a.push(l.slice(r-c,l.size,n)))}return a}function z9(e,t=null){let r=e.domSelectionRange(),n=e.state.doc;if(!r.focusNode)return null;let i=e.docView.nearestDesc(r.focusNode),a=i&&i.size==0,s=e.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(s<0)return null;let o=n.resolve(s),l,c;if(h3(r)){for(l=s;i&&!i.node;)i=i.parent;let f=i.node;if(i&&f.isAtom&&pr.isSelectable(f)&&i.parent&&!(f.isInline&&QVe(r.focusNode,r.focusOffset,i.dom))){let p=i.posBefore;c=new pr(s==p?o:n.resolve(p))}}else{if(r instanceof e.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let f=s,p=s;for(let m=0;m<r.rangeCount;m++){let x=r.getRangeAt(m);f=Math.min(f,e.docView.posFromDOM(x.startContainer,x.startOffset,1)),p=Math.max(p,e.docView.posFromDOM(x.endContainer,x.endOffset,-1))}if(f<0)return null;[l,s]=p==e.state.selection.anchor?[p,f]:[f,p],o=n.resolve(s)}else l=e.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(l<0)return null}let d=n.resolve(l);if(!c){let f=t=="pointer"||e.state.selection.head<o.pos&&!a?1:-1;c=H9(e,d,o,f)}return c}function tde(e){return e.editable?e.hasFocus():nde(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Eh(e,t=!1){let r=e.state.selection;if(rde(e,r),!!tde(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&hs){let n=e.domSelectionRange(),i=e.domObserver.currentSelection;if(n.anchorNode&&i.anchorNode&&sx(n.anchorNode,n.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)_qe(e);else{let{anchor:n,head:i}=r,a,s;gX&&!(r instanceof Ur)&&(r.$from.parent.inlineContent||(a=xX(e,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(s=xX(e,r.to))),e.docView.setSelection(n,i,e,t),gX&&(a&&vX(a),s&&vX(s)),r.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&kqe(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const gX=go||hs&&zue<63;function xX(e,t){let{node:r,offset:n}=e.docView.domFromPos(t,0),i=n<r.childNodes.length?r.childNodes[n]:null,a=n?r.childNodes[n-1]:null;if(go&&i&&i.contentEditable=="false")return wD(i);if((!i||i.contentEditable=="false")&&(!a||a.contentEditable=="false")){if(i)return wD(i);if(a)return wD(a)}}function wD(e){return e.contentEditable="true",go&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function vX(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function kqe(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let r=e.domSelectionRange(),n=r.anchorNode,i=r.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(r.anchorNode!=n||r.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!tde(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function _qe(e){let t=e.domSelection();if(!t)return;let r=e.cursorWrapper.dom,n=r.nodeName=="IMG";n?t.collapse(r.parentNode,Rs(r)+1):t.collapse(r,0),!n&&!e.state.selection.visible&&wl&&S0<=11&&(r.disabled=!0,r.disabled=!1)}function rde(e,t){if(t instanceof pr){let r=e.docView.descAt(t.from);r!=e.lastSelectedViewDesc&&(yX(e),r&&r.selectNode(),e.lastSelectedViewDesc=r)}else yX(e)}function yX(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function H9(e,t,r,n){return e.someProp("createSelectionBetween",i=>i(e,t,r))||Ur.between(t,r,n)}function bX(e){return e.editable&&!e.hasFocus()?!1:nde(e)}function nde(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function Nqe(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),r=e.domSelectionRange();return sx(t.node,t.offset,r.anchorNode,r.anchorOffset)}function X8(e,t){let{$anchor:r,$head:n}=e.selection,i=t>0?r.max(n):r.min(n),a=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return a&&dn.findFrom(a,t)}function Lp(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function wX(e,t,r){let n=e.state.selection;if(n instanceof Ur)if(r.indexOf("s")>-1){let{$head:i}=n,a=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;let s=e.state.doc.resolve(i.pos+a.nodeSize*(t<0?-1:1));return Lp(e,new Ur(n.$anchor,s))}else if(n.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=X8(e.state,t);return i&&i instanceof pr?Lp(e,i):!1}else if(!(Hc&&r.indexOf("m")>-1)){let i=n.$head,a=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,s;if(!a||a.isText)return!1;let o=t<0?i.pos-a.nodeSize:i.pos;return a.isAtom||(s=e.docView.descAt(o))&&!s.contentDOM?pr.isSelectable(a)?Lp(e,new pr(t<0?e.state.doc.resolve(i.pos-a.nodeSize):i)):uC?Lp(e,new Ur(e.state.doc.resolve(t<0?o:o+a.nodeSize))):!1:!1}}else return!1;else{if(n instanceof pr&&n.node.isInline)return Lp(e,new Ur(t>0?n.$to:n.$from));{let i=X8(e.state,t);return i?Lp(e,i):!1}}}function TT(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function N2(e,t){let r=e.pmViewDesc;return r&&r.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function j1(e,t){return t<0?Aqe(e):Tqe(e)}function Aqe(e){let t=e.domSelectionRange(),r=t.focusNode,n=t.focusOffset;if(!r)return;let i,a,s=!1;for(tu&&r.nodeType==1&&n<TT(r)&&N2(r.childNodes[n],-1)&&(s=!0);;)if(n>0){if(r.nodeType!=1)break;{let o=r.childNodes[n-1];if(N2(o,-1))i=r,a=--n;else if(o.nodeType==3)r=o,n=r.nodeValue.length;else break}}else{if(ide(r))break;{let o=r.previousSibling;for(;o&&N2(o,-1);)i=r.parentNode,a=Rs(o),o=o.previousSibling;if(o)r=o,n=TT(r);else{if(r=r.parentNode,r==e.dom)break;n=0}}}s?Y8(e,r,n):i&&Y8(e,i,a)}function Tqe(e){let t=e.domSelectionRange(),r=t.focusNode,n=t.focusOffset;if(!r)return;let i=TT(r),a,s;for(;;)if(n<i){if(r.nodeType!=1)break;let o=r.childNodes[n];if(N2(o,1))a=r,s=++n;else break}else{if(ide(r))break;{let o=r.nextSibling;for(;o&&N2(o,1);)a=o.parentNode,s=Rs(o)+1,o=o.nextSibling;if(o)r=o,n=0,i=TT(r);else{if(r=r.parentNode,r==e.dom)break;n=i=0}}}a&&Y8(e,a,s)}function ide(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Iqe(e,t){for(;e&&t==e.childNodes.length&&!cC(e);)t=Rs(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let r=e.childNodes[t];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;e=r,t=0}}function Oqe(e,t){for(;e&&!t&&!cC(e);)t=Rs(e),e=e.parentNode;for(;e&&t;){let r=e.childNodes[t-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;e=r,t=e.childNodes.length}}function Y8(e,t,r){if(t.nodeType!=3){let a,s;(s=Iqe(t,r))?(t=s,r=0):(a=Oqe(t,r))&&(t=a,r=a.nodeValue.length)}let n=e.domSelection();if(!n)return;if(h3(n)){let a=document.createRange();a.setEnd(t,r),a.setStart(t,r),n.removeAllRanges(),n.addRange(a)}else n.extend&&n.extend(t,r);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&Eh(e)},50)}function SX(e,t){let r=e.state.doc.resolve(t);if(!(hs||Hue)&&r.parent.inlineContent){let i=e.coordsAtPos(t);if(t>r.start()){let a=e.coordsAtPos(t-1),s=(a.top+a.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(a.left-i.left)>1)return a.left<i.left?"ltr":"rtl"}if(t<r.end()){let a=e.coordsAtPos(t+1),s=(a.top+a.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(a.left-i.left)>1)return a.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function EX(e,t,r){let n=e.state.selection;if(n instanceof Ur&&!n.empty||r.indexOf("s")>-1||Hc&&r.indexOf("m")>-1)return!1;let{$from:i,$to:a}=n;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let s=X8(e.state,t);if(s&&s instanceof pr)return Lp(e,s)}if(!i.parent.inlineContent){let s=t<0?i:a,o=n instanceof ic?dn.near(s,t):dn.findFrom(s,t);return o?Lp(e,o):!1}return!1}function CX(e,t){if(!(e.state.selection instanceof Ur))return!0;let{$head:r,$anchor:n,empty:i}=e.state.selection;if(!r.sameParent(n))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let a=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(a&&!a.isText){let s=e.state.tr;return t<0?s.delete(r.pos-a.nodeSize,r.pos):s.delete(r.pos,r.pos+a.nodeSize),e.dispatch(s),!0}return!1}function kX(e,t,r){e.domObserver.stop(),t.contentEditable=r,e.domObserver.start()}function Pqe(e){if(!go||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:r}=e.domSelectionRange();if(t&&t.nodeType==1&&r==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let n=t.firstChild;kX(e,n,"true"),setTimeout(()=>kX(e,n,"false"),20)}return!1}function Rqe(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function jqe(e,t){let r=t.keyCode,n=Rqe(t);if(r==8||Hc&&r==72&&n=="c")return CX(e,-1)||j1(e,-1);if(r==46&&!t.shiftKey||Hc&&r==68&&n=="c")return CX(e,1)||j1(e,1);if(r==13||r==27)return!0;if(r==37||Hc&&r==66&&n=="c"){let i=r==37?SX(e,e.state.selection.from)=="ltr"?-1:1:-1;return wX(e,i,n)||j1(e,i)}else if(r==39||Hc&&r==70&&n=="c"){let i=r==39?SX(e,e.state.selection.from)=="ltr"?1:-1:1;return wX(e,i,n)||j1(e,i)}else{if(r==38||Hc&&r==80&&n=="c")return EX(e,-1,n)||j1(e,-1);if(r==40||Hc&&r==78&&n=="c")return Pqe(e)||EX(e,1,n)||j1(e,1);if(n==(Hc?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function W9(e,t){e.someProp("transformCopied",m=>{t=m(t,e)});let r=[],{content:n,openStart:i,openEnd:a}=t;for(;i>1&&a>1&&n.childCount==1&&n.firstChild.childCount==1;){i--,a--;let m=n.firstChild;r.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),n=m.content}let s=e.someProp("clipboardSerializer")||Wx.fromSchema(e.state.schema),o=ude(),l=o.createElement("div");l.appendChild(s.serializeFragment(n,{document:o}));let c=l.firstChild,d,f=0;for(;c&&c.nodeType==1&&(d=cde[c.nodeName.toLowerCase()]);){for(let m=d.length-1;m>=0;m--){let x=o.createElement(d[m]);for(;l.firstChild;)x.appendChild(l.firstChild);l.appendChild(x),f++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${a}${f?` -${f}`:""} ${JSON.stringify(r)}`);let p=e.someProp("clipboardTextSerializer",m=>m(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:p,slice:t}}function ade(e,t,r,n,i){let a=i.parent.type.spec.code,s,o;if(!r&&!t)return null;let l=!!t&&(n||a||!r);if(l){if(e.someProp("transformPastedText",p=>{t=p(t,a||n,e)}),a)return o=new qt(It.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",p=>{o=p(o,e,!0)}),o;let f=e.someProp("clipboardTextParser",p=>p(t,i,n,e));if(f)o=f;else{let p=i.marks(),{schema:m}=e.state,x=Wx.fromSchema(m);s=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(v=>{let b=s.appendChild(document.createElement("p"));v&&b.appendChild(x.serializeNode(m.text(v,p)))})}}else e.someProp("transformPastedHTML",f=>{r=f(r,e)}),s=Lqe(r),uC&&Bqe(s);let c=s&&s.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let f=+d[3];f>0;f--){let p=s.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;s=p}if(o||(o=(e.someProp("clipboardParser")||e.someProp("domParser")||C2.fromSchema(e.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||d),context:i,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!Dqe.test(p.parentNode.nodeName)?{ignore:!0}:null}})),d)o=Uqe(_X(o,+d[1],+d[2]),d[4]);else if(o=qt.maxOpen(Mqe(o.content,i),!0),o.openStart||o.openEnd){let f=0,p=0;for(let m=o.content.firstChild;f<o.openStart&&!m.type.spec.isolating;f++,m=m.firstChild);for(let m=o.content.lastChild;p<o.openEnd&&!m.type.spec.isolating;p++,m=m.lastChild);o=_X(o,f,p)}return e.someProp("transformPasted",f=>{o=f(o,e,l)}),o}const Dqe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Mqe(e,t){if(e.childCount<2)return e;for(let r=t.depth;r>=0;r--){let i=t.node(r).contentMatchAt(t.index(r)),a,s=[];if(e.forEach(o=>{if(!s)return;let l=i.findWrapping(o.type),c;if(!l)return s=null;if(c=s.length&&a.length&&ode(l,a,o,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=lde(s[s.length-1],a.length));let d=sde(o,l);s.push(d),i=i.matchType(d.type),a=l}}),s)return It.from(s)}return e}function sde(e,t,r=0){for(let n=t.length-1;n>=r;n--)e=t[n].create(null,It.from(e));return e}function ode(e,t,r,n,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let a=ode(e,t,r,n.lastChild,i+1);if(a)return n.copy(n.content.replaceChild(n.childCount-1,a));if(n.contentMatchAt(n.childCount).matchType(i==e.length-1?r.type:e[i+1]))return n.copy(n.content.append(It.from(sde(r,e,i+1))))}}function lde(e,t){if(t==0)return e;let r=e.content.replaceChild(e.childCount-1,lde(e.lastChild,t-1)),n=e.contentMatchAt(e.childCount).fillBefore(It.empty,!0);return e.copy(r.append(n))}function Q8(e,t,r,n,i,a){let s=t<0?e.firstChild:e.lastChild,o=s.content;return e.childCount>1&&(a=0),i<n-1&&(o=Q8(o,t,r,n,i+1,a)),i>=r&&(o=t<0?s.contentMatchAt(0).fillBefore(o,a<=i).append(o):o.append(s.contentMatchAt(s.childCount).fillBefore(It.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(o))}function _X(e,t,r){return t<e.openStart&&(e=new qt(Q8(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),r<e.openEnd&&(e=new qt(Q8(e.content,1,r,e.openEnd,0,0),e.openStart,r)),e}const cde={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let NX=null;function ude(){return NX||(NX=document.implementation.createHTMLDocument("title"))}let SD=null;function Fqe(e){let t=window.trustedTypes;return t?(SD||(SD=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),SD.createHTML(e)):e}function Lqe(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let r=ude().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(e),i;if((i=n&&cde[n[1].toLowerCase()])&&(e=i.map(a=>"<"+a+">").join("")+e+i.map(a=>"</"+a+">").reverse().join("")),r.innerHTML=Fqe(e),i)for(let a=0;a<i.length;a++)r=r.querySelector(i[a])||r;return r}function Bqe(e){let t=e.querySelectorAll(hs?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<t.length;r++){let n=t[r];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),n)}}function Uqe(e,t){if(!e.size)return e;let r=e.content.firstChild.type.schema,n;try{n=JSON.parse(t)}catch{return e}let{content:i,openStart:a,openEnd:s}=e;for(let o=n.length-2;o>=0;o-=2){let l=r.nodes[n[o]];if(!l||l.hasRequiredAttrs())break;i=It.from(l.create(n[o+1],i)),a++,s++}return new qt(i,a,s)}const Wo={},Vo={},$qe={touchstart:!0,touchmove:!0};class zqe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Hqe(e){for(let t in Wo){let r=Wo[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=n=>{Vqe(e,n)&&!V9(e,n)&&(e.editable||!(n.type in Vo))&&r(e,n)},$qe[t]?{passive:!0}:void 0)}go&&e.dom.addEventListener("input",()=>null),J8(e)}function c0(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function Wqe(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function J8(e){e.someProp("handleDOMEvents",t=>{for(let r in t)e.input.eventHandlers[r]||e.dom.addEventListener(r,e.input.eventHandlers[r]=n=>V9(e,n))})}function V9(e,t){return e.someProp("handleDOMEvents",r=>{let n=r[t.type];return n?n(e,t)||t.defaultPrevented:!1})}function Vqe(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let r=t.target;r!=e.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(t))return!1;return!0}function qqe(e,t){!V9(e,t)&&Wo[t.type]&&(e.editable||!(t.type in Vo))&&Wo[t.type](e,t)}Vo.keydown=(e,t)=>{let r=t;if(e.input.shiftKey=r.keyCode==16||r.shiftKey,!fde(e,r)&&(e.input.lastKeyCode=r.keyCode,e.input.lastKeyCodeTime=Date.now(),!(dh&&hs&&r.keyCode==13)))if(r.keyCode!=229&&e.domObserver.forceFlush(),yy&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let n=Date.now();e.input.lastIOSEnter=n,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==n&&(e.someProp("handleKeyDown",i=>i(e,Vm(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",n=>n(e,r))||jqe(e,r)?r.preventDefault():c0(e,"key")};Vo.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};Vo.keypress=(e,t)=>{let r=t;if(fde(e,r)||!r.charCode||r.ctrlKey&&!r.altKey||Hc&&r.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,r))){r.preventDefault();return}let n=e.state.selection;if(!(n instanceof Ur)||!n.$from.sameParent(n.$to)){let i=String.fromCharCode(r.charCode),a=()=>e.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",s=>s(e,n.$from.pos,n.$to.pos,i,a))&&e.dispatch(a()),r.preventDefault()}};function m3(e){return{left:e.clientX,top:e.clientY}}function Gqe(e,t){let r=t.x-e.clientX,n=t.y-e.clientY;return r*r+n*n<100}function q9(e,t,r,n,i){if(n==-1)return!1;let a=e.state.doc.resolve(n);for(let s=a.depth+1;s>0;s--)if(e.someProp(t,o=>s>a.depth?o(e,r,a.nodeAfter,a.before(s),i,!0):o(e,r,a.node(s),a.before(s),i,!1)))return!0;return!1}function Nv(e,t,r){if(e.focused||e.focus(),e.state.selection.eq(t))return;let n=e.state.tr.setSelection(t);n.setMeta("pointer",!0),e.dispatch(n)}function Kqe(e,t){if(t==-1)return!1;let r=e.state.doc.resolve(t),n=r.nodeAfter;return n&&n.isAtom&&pr.isSelectable(n)?(Nv(e,new pr(r)),!0):!1}function Xqe(e,t){if(t==-1)return!1;let r=e.state.selection,n,i;r instanceof pr&&(n=r.node);let a=e.state.doc.resolve(t);for(let s=a.depth+1;s>0;s--){let o=s>a.depth?a.nodeAfter:a.node(s);if(pr.isSelectable(o)){n&&r.$from.depth>0&&s>=r.$from.depth&&a.before(r.$from.depth+1)==r.$from.pos?i=a.before(r.$from.depth):i=a.before(s);break}}return i!=null?(Nv(e,pr.create(e.state.doc,i)),!0):!1}function Yqe(e,t,r,n,i){return q9(e,"handleClickOn",t,r,n)||e.someProp("handleClick",a=>a(e,t,n))||(i?Xqe(e,r):Kqe(e,r))}function Qqe(e,t,r,n){return q9(e,"handleDoubleClickOn",t,r,n)||e.someProp("handleDoubleClick",i=>i(e,t,n))}function Jqe(e,t,r,n){return q9(e,"handleTripleClickOn",t,r,n)||e.someProp("handleTripleClick",i=>i(e,t,n))||Zqe(e,r,n)}function Zqe(e,t,r){if(r.button!=0)return!1;let n=e.state.doc;if(t==-1)return n.inlineContent?(Nv(e,Ur.create(n,0,n.content.size)),!0):!1;let i=n.resolve(t);for(let a=i.depth+1;a>0;a--){let s=a>i.depth?i.nodeAfter:i.node(a),o=i.before(a);if(s.inlineContent)Nv(e,Ur.create(n,o+1,o+1+s.content.size));else if(pr.isSelectable(s))Nv(e,pr.create(n,o));else continue;return!0}}function G9(e){return IT(e)}const dde=Hc?"metaKey":"ctrlKey";Wo.mousedown=(e,t)=>{let r=t;e.input.shiftKey=r.shiftKey;let n=G9(e),i=Date.now(),a="singleClick";i-e.input.lastClick.time<500&&Gqe(r,e.input.lastClick)&&!r[dde]&&e.input.lastClick.button==r.button&&(e.input.lastClick.type=="singleClick"?a="doubleClick":e.input.lastClick.type=="doubleClick"&&(a="tripleClick")),e.input.lastClick={time:i,x:r.clientX,y:r.clientY,type:a,button:r.button};let s=e.posAtCoords(m3(r));s&&(a=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new eGe(e,s,r,!!n)):(a=="doubleClick"?Qqe:Jqe)(e,s.pos,s.inside,r)?r.preventDefault():c0(e,"pointer"))};class eGe{constructor(t,r,n,i){this.view=t,this.pos=r,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!n[dde],this.allowDefault=n.shiftKey;let a,s;if(r.inside>-1)a=t.state.doc.nodeAt(r.inside),s=r.inside;else{let d=t.state.doc.resolve(r.pos);a=d.parent,s=d.depth?d.before():0}const o=i?null:n.target,l=o?t.docView.nearestDesc(o,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=t.state;(n.button==0&&a.type.spec.draggable&&a.type.spec.selectable!==!1||c instanceof pr&&c.from<=s&&c.to>s)&&(this.mightDrag={node:a,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&tu&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),c0(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Eh(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(m3(t))),this.updateAllowDefault(t),this.allowDefault||!r?c0(this.view,"pointer"):Yqe(this.view,r.pos,r.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||go&&this.mightDrag&&!this.mightDrag.node.isAtom||hs&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(Nv(this.view,dn.near(this.view.state.doc.resolve(r.pos))),t.preventDefault()):c0(this.view,"pointer")}move(t){this.updateAllowDefault(t),c0(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}Wo.touchstart=e=>{e.input.lastTouch=Date.now(),G9(e),c0(e,"pointer")};Wo.touchmove=e=>{e.input.lastTouch=Date.now(),c0(e,"pointer")};Wo.contextmenu=e=>G9(e);function fde(e,t){return e.composing?!0:go&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const tGe=dh?5e3:-1;Vo.compositionstart=Vo.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,r=t.selection.$to;if(t.selection instanceof Ur&&(t.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)||hs&&Hue&&rGe(e)))e.markCursor=e.state.storedMarks||r.marks(),IT(e,!0),e.markCursor=null;else if(IT(e,!t.selection.empty),tu&&t.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=e.domSelectionRange();for(let i=n.focusNode,a=n.focusOffset;i&&i.nodeType==1&&a!=0;){let s=a<0?i.lastChild:i.childNodes[a-1];if(!s)break;if(s.nodeType==3){let o=e.domSelection();o&&o.collapse(s,s.nodeValue.length);break}else i=s,a=-1}}e.input.composing=!0}hde(e,tGe)};function rGe(e){let{focusNode:t,focusOffset:r}=e.domSelectionRange();if(!t||t.nodeType!=1||r>=t.childNodes.length)return!1;let n=t.childNodes[r];return n.nodeType==1&&n.contentEditable=="false"}Vo.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,hde(e,20))};function hde(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>IT(e),t))}function pde(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=iGe());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function nGe(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let r=XVe(t.focusNode,t.focusOffset),n=YVe(t.focusNode,t.focusOffset);if(r&&n&&r!=n){let i=n.pmViewDesc,a=e.domObserver.lastChangedTextNode;if(r==a||n==a)return a;if(!i||!i.isText(n.nodeValue))return n;if(e.input.compositionNode==n){let s=r.pmViewDesc;if(!(!s||!s.isText(r.nodeValue)))return n}}return r||n}function iGe(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function IT(e,t=!1){if(!(dh&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),pde(e),t||e.docView&&e.docView.dirty){let r=z9(e),n=e.state.selection;return r&&!r.eq(n)?e.dispatch(e.state.tr.setSelection(r)):(e.markCursor||t)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function aGe(e,t){if(!e.dom.parentNode)return;let r=e.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(t),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),e.focus()},50)}const _S=wl&&S0<15||yy&&eqe<604;Wo.copy=Vo.cut=(e,t)=>{let r=t,n=e.state.selection,i=r.type=="cut";if(n.empty)return;let a=_S?null:r.clipboardData,s=n.content(),{dom:o,text:l}=W9(e,s);a?(r.preventDefault(),a.clearData(),a.setData("text/html",o.innerHTML),a.setData("text/plain",l)):aGe(e,o),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sGe(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function oGe(e,t){if(!e.dom.parentNode)return;let r=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,n=e.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),n.parentNode&&n.parentNode.removeChild(n),r?NS(e,n.value,null,i,t):NS(e,n.textContent,n.innerHTML,i,t)},50)}function NS(e,t,r,n,i){let a=ade(e,t,r,n,e.state.selection.$from);if(e.someProp("handlePaste",l=>l(e,i,a||qt.empty)))return!0;if(!a)return!1;let s=sGe(a),o=s?e.state.tr.replaceSelectionWith(s,n):e.state.tr.replaceSelection(a);return e.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function mde(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let r=e.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}Vo.paste=(e,t)=>{let r=t;if(e.composing&&!dh)return;let n=_S?null:r.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;n&&NS(e,mde(n),n.getData("text/html"),i,r)?r.preventDefault():oGe(e,r)};class gde{constructor(t,r,n){this.slice=t,this.move=r,this.node=n}}const lGe=Hc?"altKey":"ctrlKey";function xde(e,t){let r=e.someProp("dragCopies",n=>!n(t));return r??!t[lGe]}Wo.dragstart=(e,t)=>{let r=t,n=e.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let i=e.state.selection,a=i.empty?null:e.posAtCoords(m3(r)),s;if(!(a&&a.pos>=i.from&&a.pos<=(i instanceof pr?i.to-1:i.to))){if(n&&n.mightDrag)s=pr.create(e.state.doc,n.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let f=e.docView.nearestDesc(r.target,!0);f&&f.node.type.spec.draggable&&f!=e.docView&&(s=pr.create(e.state.doc,f.posBefore))}}let o=(s||e.state.selection).content(),{dom:l,text:c,slice:d}=W9(e,o);(!r.dataTransfer.files.length||!hs||zue>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(_S?"Text":"text/html",l.innerHTML),r.dataTransfer.effectAllowed="copyMove",_S||r.dataTransfer.setData("text/plain",c),e.dragging=new gde(d,xde(e,r),s)};Wo.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};Vo.dragover=Vo.dragenter=(e,t)=>t.preventDefault();Vo.drop=(e,t)=>{try{cGe(e,t,e.dragging)}finally{e.dragging=null}};function cGe(e,t,r){if(!t.dataTransfer)return;let n=e.posAtCoords(m3(t));if(!n)return;let i=e.state.doc.resolve(n.pos),a=r&&r.slice;a?e.someProp("transformPasted",m=>{a=m(a,e,!1)}):a=ade(e,mde(t.dataTransfer),_S?null:t.dataTransfer.getData("text/html"),!1,i);let s=!!(r&&xde(e,t));if(e.someProp("handleDrop",m=>m(e,t,a||qt.empty,s))){t.preventDefault();return}if(!a)return;t.preventDefault();let o=a?wue(e.state.doc,i.pos,a):i.pos;o==null&&(o=i.pos);let l=e.state.tr;if(s){let{node:m}=r;m?m.replace(l):l.deleteSelection()}let c=l.mapping.map(o),d=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,f=l.doc;if(d?l.replaceRangeWith(c,c,a.content.firstChild):l.replaceRange(c,c,a),l.doc.eq(f))return;let p=l.doc.resolve(c);if(d&&pr.isSelectable(a.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(a.content.firstChild))l.setSelection(new pr(p));else{let m=l.mapping.map(o);l.mapping.maps[l.mapping.maps.length-1].forEach((x,v,b,w)=>m=w),l.setSelection(H9(e,p,l.doc.resolve(m)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))}Wo.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Eh(e)},20))};Wo.blur=(e,t)=>{let r=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),r.relatedTarget&&e.dom.contains(r.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};Wo.beforeinput=(e,t)=>{if(hs&&dh&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:n}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=n||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",a=>a(e,Vm(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in Vo)Wo[e]=Vo[e];function AS(e,t){if(e==t)return!0;for(let r in e)if(e[r]!==t[r])return!1;for(let r in t)if(!(r in e))return!1;return!0}class OT{constructor(t,r){this.toDOM=t,this.spec=r||Ag,this.side=this.spec.side||0}map(t,r,n,i){let{pos:a,deleted:s}=t.mapResult(r.from+i,this.side<0?-1:1);return s?null:new fo(a-n,a-n,this)}valid(){return!0}eq(t){return this==t||t instanceof OT&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&AS(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class C0{constructor(t,r){this.attrs=t,this.spec=r||Ag}map(t,r,n,i){let a=t.map(r.from+i,this.spec.inclusiveStart?-1:1)-n,s=t.map(r.to+i,this.spec.inclusiveEnd?1:-1)-n;return a>=s?null:new fo(a,s,this)}valid(t,r){return r.from<r.to}eq(t){return this==t||t instanceof C0&&AS(this.attrs,t.attrs)&&AS(this.spec,t.spec)}static is(t){return t.type instanceof C0}destroy(){}}class K9{constructor(t,r){this.attrs=t,this.spec=r||Ag}map(t,r,n,i){let a=t.mapResult(r.from+i,1);if(a.deleted)return null;let s=t.mapResult(r.to+i,-1);return s.deleted||s.pos<=a.pos?null:new fo(a.pos-n,s.pos-n,this)}valid(t,r){let{index:n,offset:i}=t.content.findIndex(r.from),a;return i==r.from&&!(a=t.child(n)).isText&&i+a.nodeSize==r.to}eq(t){return this==t||t instanceof K9&&AS(this.attrs,t.attrs)&&AS(this.spec,t.spec)}destroy(){}}class fo{constructor(t,r,n){this.from=t,this.to=r,this.type=n}copy(t,r){return new fo(t,r,this.type)}eq(t,r=0){return this.type.eq(t.type)&&this.from+r==t.from&&this.to+r==t.to}map(t,r,n){return this.type.map(t,this,r,n)}static widget(t,r,n){return new fo(t,t,new OT(r,n))}static inline(t,r,n,i){return new fo(t,r,new C0(n,i))}static node(t,r,n,i){return new fo(t,r,new K9(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof C0}get widget(){return this.type instanceof OT}}const W1=[],Ag={};class Ri{constructor(t,r){this.local=t.length?t:W1,this.children=r.length?r:W1}static create(t,r){return r.length?PT(r,t,0,Ag):eo}find(t,r,n){let i=[];return this.findInner(t??0,r??1e9,i,0,n),i}findInner(t,r,n,i,a){for(let s=0;s<this.local.length;s++){let o=this.local[s];o.from<=r&&o.to>=t&&(!a||a(o.spec))&&n.push(o.copy(o.from+i,o.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<r&&this.children[s+1]>t){let o=this.children[s]+1;this.children[s+2].findInner(t-o,r-o,n,i+o,a)}}map(t,r,n){return this==eo||t.maps.length==0?this:this.mapInner(t,r,0,0,n||Ag)}mapInner(t,r,n,i,a){let s;for(let o=0;o<this.local.length;o++){let l=this.local[o].map(t,n,i);l&&l.type.valid(r,l)?(s||(s=[])).push(l):a.onRemove&&a.onRemove(this.local[o].spec)}return this.children.length?uGe(this.children,s||[],t,r,n,i,a):s?new Ri(s.sort(Tg),W1):eo}add(t,r){return r.length?this==eo?Ri.create(t,r):this.addInner(t,r,0):this}addInner(t,r,n){let i,a=0;t.forEach((o,l)=>{let c=l+n,d;if(d=yde(r,o,c)){for(i||(i=this.children.slice());a<i.length&&i[a]<l;)a+=3;i[a]==l?i[a+2]=i[a+2].addInner(o,d,c+1):i.splice(a,0,l,l+o.nodeSize,PT(d,o,c+1,Ag)),a+=3}});let s=vde(a?bde(r):r,-n);for(let o=0;o<s.length;o++)s[o].type.valid(t,s[o])||s.splice(o--,1);return new Ri(s.length?this.local.concat(s).sort(Tg):this.local,i||this.children)}remove(t){return t.length==0||this==eo?this:this.removeInner(t,0)}removeInner(t,r){let n=this.children,i=this.local;for(let a=0;a<n.length;a+=3){let s,o=n[a]+r,l=n[a+1]+r;for(let d=0,f;d<t.length;d++)(f=t[d])&&f.from>o&&f.to<l&&(t[d]=null,(s||(s=[])).push(f));if(!s)continue;n==this.children&&(n=this.children.slice());let c=n[a+2].removeInner(s,o+1);c!=eo?n[a+2]=c:(n.splice(a,3),a-=3)}if(i.length){for(let a=0,s;a<t.length;a++)if(s=t[a])for(let o=0;o<i.length;o++)i[o].eq(s,r)&&(i==this.local&&(i=this.local.slice()),i.splice(o--,1))}return n==this.children&&i==this.local?this:i.length||n.length?new Ri(i,n):eo}forChild(t,r){if(this==eo)return this;if(r.isLeaf)return Ri.empty;let n,i;for(let o=0;o<this.children.length;o+=3)if(this.children[o]>=t){this.children[o]==t&&(n=this.children[o+2]);break}let a=t+1,s=a+r.content.size;for(let o=0;o<this.local.length;o++){let l=this.local[o];if(l.from<s&&l.to>a&&l.type instanceof C0){let c=Math.max(a,l.from)-a,d=Math.min(s,l.to)-a;c<d&&(i||(i=[])).push(l.copy(c,d))}}if(i){let o=new Ri(i.sort(Tg),W1);return n?new qp([o,n]):o}return n||eo}eq(t){if(this==t)return!0;if(!(t instanceof Ri)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(t.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=t.children[r]||this.children[r+1]!=t.children[r+1]||!this.children[r+2].eq(t.children[r+2]))return!1;return!0}locals(t){return X9(this.localsInner(t))}localsInner(t){if(this==eo)return W1;if(t.inlineContent||!this.local.some(C0.is))return this.local;let r=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof C0||r.push(this.local[n]);return r}forEachSet(t){t(this)}}Ri.empty=new Ri([],[]);Ri.removeOverlap=X9;const eo=Ri.empty;class qp{constructor(t){this.members=t}map(t,r){const n=this.members.map(i=>i.map(t,r,Ag));return qp.from(n)}forChild(t,r){if(r.isLeaf)return Ri.empty;let n=[];for(let i=0;i<this.members.length;i++){let a=this.members[i].forChild(t,r);a!=eo&&(a instanceof qp?n=n.concat(a.members):n.push(a))}return qp.from(n)}eq(t){if(!(t instanceof qp)||t.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(t.members[r]))return!1;return!0}locals(t){let r,n=!0;for(let i=0;i<this.members.length;i++){let a=this.members[i].localsInner(t);if(a.length)if(!r)r=a;else{n&&(r=r.slice(),n=!1);for(let s=0;s<a.length;s++)r.push(a[s])}}return r?X9(n?r:r.sort(Tg)):W1}static from(t){switch(t.length){case 0:return eo;case 1:return t[0];default:return new qp(t.every(r=>r instanceof Ri)?t:t.reduce((r,n)=>r.concat(n instanceof Ri?n:n.members),[]))}}forEachSet(t){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(t)}}function uGe(e,t,r,n,i,a,s){let o=e.slice();for(let c=0,d=a;c<r.maps.length;c++){let f=0;r.maps[c].forEach((p,m,x,v)=>{let b=v-x-(m-p);for(let w=0;w<o.length;w+=3){let _=o[w+1];if(_<0||p>_+d-f)continue;let C=o[w]+d-f;m>=C?o[w+1]=p<=C?-2:-1:p>=d&&b&&(o[w]+=b,o[w+1]+=b)}f+=b}),d=r.maps[c].map(d,-1)}let l=!1;for(let c=0;c<o.length;c+=3)if(o[c+1]<0){if(o[c+1]==-2){l=!0,o[c+1]=-1;continue}let d=r.map(e[c]+a),f=d-i;if(f<0||f>=n.content.size){l=!0;continue}let p=r.map(e[c+1]+a,-1),m=p-i,{index:x,offset:v}=n.content.findIndex(f),b=n.maybeChild(x);if(b&&v==f&&v+b.nodeSize==m){let w=o[c+2].mapInner(r,b,d+1,e[c]+a+1,s);w!=eo?(o[c]=f,o[c+1]=m,o[c+2]=w):(o[c+1]=-2,l=!0)}else l=!0}if(l){let c=dGe(o,e,t,r,i,a,s),d=PT(c,n,0,s);t=d.local;for(let f=0;f<o.length;f+=3)o[f+1]<0&&(o.splice(f,3),f-=3);for(let f=0,p=0;f<d.children.length;f+=3){let m=d.children[f];for(;p<o.length&&o[p]<m;)p+=3;o.splice(p,0,d.children[f],d.children[f+1],d.children[f+2])}}return new Ri(t.sort(Tg),o)}function vde(e,t){if(!t||!e.length)return e;let r=[];for(let n=0;n<e.length;n++){let i=e[n];r.push(new fo(i.from+t,i.to+t,i.type))}return r}function dGe(e,t,r,n,i,a,s){function o(l,c){for(let d=0;d<l.local.length;d++){let f=l.local[d].map(n,i,c);f?r.push(f):s.onRemove&&s.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)o(l.children[d+2],l.children[d]+c+1)}for(let l=0;l<e.length;l+=3)e[l+1]==-1&&o(e[l+2],t[l]+a+1);return r}function yde(e,t,r){if(t.isLeaf)return null;let n=r+t.nodeSize,i=null;for(let a=0,s;a<e.length;a++)(s=e[a])&&s.from>r&&s.to<n&&((i||(i=[])).push(s),e[a]=null);return i}function bde(e){let t=[];for(let r=0;r<e.length;r++)e[r]!=null&&t.push(e[r]);return t}function PT(e,t,r,n){let i=[],a=!1;t.forEach((o,l)=>{let c=yde(e,o,l+r);if(c){a=!0;let d=PT(c,o,r+l+1,n);d!=eo&&i.push(l,l+o.nodeSize,d)}});let s=vde(a?bde(e):e,-r).sort(Tg);for(let o=0;o<s.length;o++)s[o].type.valid(t,s[o])||(n.onRemove&&n.onRemove(s[o].spec),s.splice(o--,1));return s.length||i.length?new Ri(s,i):eo}function Tg(e,t){return e.from-t.from||e.to-t.to}function X9(e){let t=e;for(let r=0;r<t.length-1;r++){let n=t[r];if(n.from!=n.to)for(let i=r+1;i<t.length;i++){let a=t[i];if(a.from==n.from){a.to!=n.to&&(t==e&&(t=e.slice()),t[i]=a.copy(a.from,n.to),AX(t,i+1,a.copy(n.to,a.to)));continue}else{a.from<n.to&&(t==e&&(t=e.slice()),t[r]=n.copy(n.from,a.from),AX(t,i,n.copy(a.from,n.to)));break}}}return t}function AX(e,t,r){for(;t<e.length&&Tg(r,e[t])>0;)t++;e.splice(t,0,r)}function ED(e){let t=[];return e.someProp("decorations",r=>{let n=r(e.state);n&&n!=eo&&t.push(n)}),e.cursorWrapper&&t.push(Ri.create(e.state.doc,[e.cursorWrapper.deco])),qp.from(t)}const fGe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},hGe=wl&&S0<=11;class pGe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class mGe{constructor(t,r){this.view=t,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new pGe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let i=0;i<n.length;i++)this.queue.push(n[i]);wl&&S0<=11&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),hGe&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,fGe)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let r=0;r<t.length;r++)this.queue.push(t[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(bX(this.view)){if(this.suppressingSelectionUpdates)return Eh(this.view);if(wl&&S0<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&sx(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let r=new Set,n;for(let a=t.focusNode;a;a=vy(a))r.add(a);for(let a=t.anchorNode;a;a=vy(a))if(r.has(a)){n=a;break}let i=n&&this.view.docView.nearestDesc(n);if(i&&i.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&bX(t)&&!this.ignoreSelectionChange(n),a=-1,s=-1,o=!1,l=[];if(t.editable)for(let d=0;d<r.length;d++){let f=this.registerMutation(r[d],l);f&&(a=a<0?f.from:Math.min(f.from,a),s=s<0?f.to:Math.max(f.to,s),f.typeOver&&(o=!0))}if(tu&&l.length){let d=l.filter(f=>f.nodeName=="BR");if(d.length==2){let[f,p]=d;f.parentNode&&f.parentNode.parentNode==p.parentNode?p.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let p of d){let m=p.parentNode;m&&m.nodeName=="LI"&&(!f||vGe(t,f)!=m)&&p.remove()}}}else if((hs||go)&&l.some(d=>d.nodeName=="BR")&&(t.input.lastKeyCode==8||t.input.lastKeyCode==46)){for(let d of l)if(d.nodeName=="BR"&&d.parentNode){let f=d.nextSibling;f&&f.nodeType==1&&f.contentEditable=="false"&&d.parentNode.removeChild(d)}}let c=null;a<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&h3(n)&&(c=z9(t))&&c.eq(dn.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Eh(t),this.currentSelection.set(n),t.scrollToSelection()):(a>-1||i)&&(a>-1&&(t.docView.markDirty(a,s),gGe(t)),this.handleDOMChange(a,s,o,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(n)||Eh(t),this.currentSelection.set(n))}registerMutation(t,r){if(r.indexOf(t.target)>-1)return null;let n=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(n==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!n||n.ignoreMutation(t))return null;if(t.type=="childList"){for(let d=0;d<t.addedNodes.length;d++){let f=t.addedNodes[d];r.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(t.target))return{from:n.posBefore,to:n.posAfter};let i=t.previousSibling,a=t.nextSibling;if(wl&&S0<=11&&t.addedNodes.length)for(let d=0;d<t.addedNodes.length;d++){let{previousSibling:f,nextSibling:p}=t.addedNodes[d];(!f||Array.prototype.indexOf.call(t.addedNodes,f)<0)&&(i=f),(!p||Array.prototype.indexOf.call(t.addedNodes,p)<0)&&(a=p)}let s=i&&i.parentNode==t.target?Rs(i)+1:0,o=n.localPosFromDOM(t.target,s,-1),l=a&&a.parentNode==t.target?Rs(a):t.target.childNodes.length,c=n.localPosFromDOM(t.target,l,1);return{from:o,to:c}}else return t.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=t.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let TX=new WeakMap,IX=!1;function gGe(e){if(!TX.has(e)&&(TX.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=tu,IX)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),IX=!0}}function OX(e,t){let r=t.startContainer,n=t.startOffset,i=t.endContainer,a=t.endOffset,s=e.domAtPos(e.state.selection.anchor);return sx(s.node,s.offset,i,a)&&([r,n,i,a]=[i,a,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:a}}function xGe(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return OX(e,i)}let r;function n(i){i.preventDefault(),i.stopImmediatePropagation(),r=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",n,!0),r?OX(e,r):null}function vGe(e,t){for(let r=t.parentNode;r&&r!=e.dom;r=r.parentNode){let n=e.docView.nearestDesc(r,!0);if(n&&n.node.isBlock)return r}return null}function yGe(e,t,r){let{node:n,fromOffset:i,toOffset:a,from:s,to:o}=e.docView.parseRange(t,r),l=e.domSelectionRange(),c,d=l.anchorNode;if(d&&e.dom.contains(d.nodeType==1?d:d.parentNode)&&(c=[{node:d,offset:l.anchorOffset}],h3(l)||c.push({node:l.focusNode,offset:l.focusOffset})),hs&&e.input.lastKeyCode===8)for(let b=a;b>i;b--){let w=n.childNodes[b-1],_=w.pmViewDesc;if(w.nodeName=="BR"&&!_){a=b;break}if(!_||_.size)break}let f=e.state.doc,p=e.someProp("domParser")||C2.fromSchema(e.state.schema),m=f.resolve(s),x=null,v=p.parse(n,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:i,to:a,preserveWhitespace:m.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:bGe,context:m});if(c&&c[0].pos!=null){let b=c[0].pos,w=c[1]&&c[1].pos;w==null&&(w=b),x={anchor:b+s,head:w+s}}return{doc:v,sel:x,from:s,to:o}}function bGe(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(go&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(e.parentNode.lastChild==e||go&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const wGe=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function SGe(e,t,r,n,i){let a=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let O=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,D=z9(e,O);if(D&&!e.state.selection.eq(D)){if(hs&&dh&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",B=>B(e,Vm(13,"Enter"))))return;let M=e.state.tr.setSelection(D);O=="pointer"?M.setMeta("pointer",!0):O=="key"&&M.scrollIntoView(),a&&M.setMeta("composition",a),e.dispatch(M)}return}let s=e.state.doc.resolve(t),o=s.sharedDepth(r);t=s.before(o+1),r=e.state.doc.resolve(r).after(o+1);let l=e.state.selection,c=yGe(e,t,r),d=e.state.doc,f=d.slice(c.from,c.to),p,m;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(p=e.state.selection.to,m="end"):(p=e.state.selection.from,m="start"),e.input.lastKeyCode=null;let x=kGe(f.content,c.doc.content,c.from,p,m);if(x&&e.input.domChangeCount++,(yy&&e.input.lastIOSEnter>Date.now()-225||dh)&&i.some(O=>O.nodeType==1&&!wGe.test(O.nodeName))&&(!x||x.endA>=x.endB)&&e.someProp("handleKeyDown",O=>O(e,Vm(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!x)if(n&&l instanceof Ur&&!l.empty&&l.$head.sameParent(l.$anchor)&&!e.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))x={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let O=PX(e,e.state.doc,c.sel);if(O&&!O.eq(e.state.selection)){let D=e.state.tr.setSelection(O);a&&D.setMeta("composition",a),e.dispatch(D)}}return}e.state.selection.from<e.state.selection.to&&x.start==x.endB&&e.state.selection instanceof Ur&&(x.start>e.state.selection.from&&x.start<=e.state.selection.from+2&&e.state.selection.from>=c.from?x.start=e.state.selection.from:x.endA<e.state.selection.to&&x.endA>=e.state.selection.to-2&&e.state.selection.to<=c.to&&(x.endB+=e.state.selection.to-x.endA,x.endA=e.state.selection.to)),wl&&S0<=11&&x.endB==x.start+1&&x.endA==x.start&&x.start>c.from&&c.doc.textBetween(x.start-c.from-1,x.start-c.from+1)==" "&&(x.start--,x.endA--,x.endB--);let v=c.doc.resolveNoCache(x.start-c.from),b=c.doc.resolveNoCache(x.endB-c.from),w=d.resolve(x.start),_=v.sameParent(b)&&v.parent.inlineContent&&w.end()>=x.endA;if((yy&&e.input.lastIOSEnter>Date.now()-225&&(!_||i.some(O=>O.nodeName=="DIV"||O.nodeName=="P"))||!_&&v.pos<c.doc.content.size&&(!v.sameParent(b)||!v.parent.inlineContent)&&v.pos<b.pos&&!/\S/.test(c.doc.textBetween(v.pos,b.pos,"","")))&&e.someProp("handleKeyDown",O=>O(e,Vm(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>x.start&&CGe(d,x.start,x.endA,v,b)&&e.someProp("handleKeyDown",O=>O(e,Vm(8,"Backspace")))){dh&&hs&&e.domObserver.suppressSelectionUpdates();return}hs&&x.endB==x.start&&(e.input.lastChromeDelete=Date.now()),dh&&!_&&v.start()!=b.start()&&b.parentOffset==0&&v.depth==b.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==x.endA&&(x.endB-=2,b=c.doc.resolveNoCache(x.endB-c.from),setTimeout(()=>{e.someProp("handleKeyDown",function(O){return O(e,Vm(13,"Enter"))})},20));let C=x.start,N=x.endA,R=O=>{let D=O||e.state.tr.replace(C,N,c.doc.slice(x.start-c.from,x.endB-c.from));if(c.sel){let M=PX(e,D.doc,c.sel);M&&!(hs&&e.composing&&M.empty&&(x.start!=x.endB||e.input.lastChromeDelete<Date.now()-100)&&(M.head==C||M.head==D.mapping.map(N)-1)||wl&&M.empty&&M.head==C)&&D.setSelection(M)}return a&&D.setMeta("composition",a),D.scrollIntoView()},P;if(_)if(v.pos==b.pos){wl&&S0<=11&&v.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Eh(e),20));let O=R(e.state.tr.delete(C,N)),D=d.resolve(x.start).marksAcross(d.resolve(x.endA));D&&O.ensureMarks(D),e.dispatch(O)}else if(x.endA==x.endB&&(P=EGe(v.parent.content.cut(v.parentOffset,b.parentOffset),w.parent.content.cut(w.parentOffset,x.endA-w.start())))){let O=R(e.state.tr);P.type=="add"?O.addMark(C,N,P.mark):O.removeMark(C,N,P.mark),e.dispatch(O)}else if(v.parent.child(v.index()).isText&&v.index()==b.index()-(b.textOffset?0:1)){let O=v.parent.textBetween(v.parentOffset,b.parentOffset),D=()=>R(e.state.tr.insertText(O,C,N));e.someProp("handleTextInput",M=>M(e,C,N,O,D))||e.dispatch(D())}else e.dispatch(R());else e.dispatch(R())}function PX(e,t,r){return Math.max(r.anchor,r.head)>t.content.size?null:H9(e,t.resolve(r.anchor),t.resolve(r.head))}function EGe(e,t){let r=e.firstChild.marks,n=t.firstChild.marks,i=r,a=n,s,o,l;for(let d=0;d<n.length;d++)i=n[d].removeFromSet(i);for(let d=0;d<r.length;d++)a=r[d].removeFromSet(a);if(i.length==1&&a.length==0)o=i[0],s="add",l=d=>d.mark(o.addToSet(d.marks));else if(i.length==0&&a.length==1)o=a[0],s="remove",l=d=>d.mark(o.removeFromSet(d.marks));else return null;let c=[];for(let d=0;d<t.childCount;d++)c.push(l(t.child(d)));if(It.from(c).eq(e))return{mark:o,type:s}}function CGe(e,t,r,n,i){if(r-t<=i.pos-n.pos||CD(n,!0,!1)<i.pos)return!1;let a=e.resolve(t);if(!n.parent.isTextblock){let o=a.nodeAfter;return o!=null&&r==t+o.nodeSize}if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;let s=e.resolve(CD(a,!0,!0));return!s.parent.isTextblock||s.pos>r||CD(s,!0,!1)<r?!1:n.parent.content.cut(n.parentOffset).eq(s.parent.content)}function CD(e,t,r){let n=e.depth,i=t?e.end():e.pos;for(;n>0&&(t||e.indexAfter(n)==e.node(n).childCount);)n--,i++,t=!1;if(r){let a=e.node(n).maybeChild(e.indexAfter(n));for(;a&&!a.isLeaf;)a=a.firstChild,i++}return i}function kGe(e,t,r,n,i){let a=e.findDiffStart(t,r);if(a==null)return null;let{a:s,b:o}=e.findDiffEnd(t,r+e.size,r+t.size);if(i=="end"){let l=Math.max(0,a-Math.min(s,o));n-=s+l-a}if(s<a&&e.size<t.size){let l=n<=a&&n>=s?a-n:0;a-=l,a&&a<t.size&&RX(t.textBetween(a-1,a+1))&&(a+=l?1:-1),o=a+(o-s),s=a}else if(o<a){let l=n<=a&&n>=o?a-n:0;a-=l,a&&a<e.size&&RX(e.textBetween(a-1,a+1))&&(a+=l?1:-1),s=a+(s-o),o=a}return{start:a,endA:s,endB:o}}function RX(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),r=e.charCodeAt(1);return t>=56320&&t<=57343&&r>=55296&&r<=56319}class wde{constructor(t,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new zqe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(LX),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=MX(this),DX(this),this.nodeViews=FX(this),this.docView=pX(this.state.doc,jX(this),ED(this),this.dom,this),this.domObserver=new mGe(this,(n,i,a,s)=>SGe(this,n,i,a,s)),this.domObserver.start(),Hqe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let r in t)this._props[r]=t[r];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&J8(this);let r=this._props;this._props=t,t.plugins&&(t.plugins.forEach(LX),this.directPlugins=t.plugins),this.updateStateInner(t.state,r)}setProps(t){let r={};for(let n in this._props)r[n]=this._props[n];r.state=this.state;for(let n in t)r[n]=t[n];this.update(r)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,r){var n;let i=this.state,a=!1,s=!1;t.storedMarks&&this.composing&&(pde(this),s=!0),this.state=t;let o=i.plugins!=t.plugins||this._props.plugins!=r.plugins;if(o||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let m=FX(this);NGe(m,this.nodeViews)&&(this.nodeViews=m,a=!0)}(o||r.handleDOMEvents!=this._props.handleDOMEvents)&&J8(this),this.editable=MX(this),DX(this);let l=ED(this),c=jX(this),d=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=a||!this.docView.matchesNode(t.doc,c,l);(f||!t.selection.eq(i.selection))&&(s=!0);let p=d=="preserve"&&s&&this.dom.style.overflowAnchor==null&&nqe(this);if(s){this.domObserver.stop();let m=f&&(wl||hs)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&_Ge(i.selection,t.selection);if(f){let x=hs?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=nGe(this)),(a||!this.docView.update(t.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=pX(t.doc,c,l,this.dom,this)),x&&!this.trackWrites&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Nqe(this))?Eh(this,m):(rde(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((n=this.dragging)===null||n===void 0)&&n.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():p&&iqe(p)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof pr){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&lX(this,r.getBoundingClientRect(),t)}else lX(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let n=this.pluginViews[r];n.update&&n.update(this,t)}}updateDraggedNode(t,r){let n=t.node,i=-1;if(this.state.doc.nodeAt(n.from)==n.node)i=n.from;else{let a=n.from+(this.state.doc.content.size-r.doc.content.size);(a>0&&this.state.doc.nodeAt(a))==n.node&&(i=a)}this.dragging=new gde(t.slice,t.move,i<0?void 0:pr.create(this.state.doc,i))}someProp(t,r){let n=this._props&&this._props[t],i;if(n!=null&&(i=r?r(n):n))return i;for(let s=0;s<this.directPlugins.length;s++){let o=this.directPlugins[s].props[t];if(o!=null&&(i=r?r(o):o))return i}let a=this.state.plugins;if(a)for(let s=0;s<a.length;s++){let o=a[s].props[t];if(o!=null&&(i=r?r(o):o))return i}}hasFocus(){if(wl){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&aqe(this.dom),Eh(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return t||document}updateRoot(){this._root=null}posAtCoords(t){return uqe(this,t)}coordsAtPos(t,r=1){return Kue(this,t,r)}domAtPos(t,r=0){return this.docView.domFromPos(t,r)}nodeDOM(t){let r=this.docView.descAt(t);return r?r.nodeDOM:null}posAtDOM(t,r,n=-1){let i=this.docView.posFromDOM(t,r,n);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,r){return mqe(this,r||this.state,t)}pasteHTML(t,r){return NS(this,"",t,!1,r||new ClipboardEvent("paste"))}pasteText(t,r){return NS(this,t,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(t){return W9(this,t)}destroy(){this.docView&&(Wqe(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ED(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,GVe())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return qqe(this,t)}domSelectionRange(){let t=this.domSelection();return t?go&&this.root.nodeType===11&&JVe(this.dom.ownerDocument)==this.dom&&xGe(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}wde.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function jX(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(e.state)),r)for(let n in r)n=="class"?t.class+=" "+r[n]:n=="style"?t.style=(t.style?t.style+";":"")+r[n]:!t[n]&&n!="contenteditable"&&n!="nodeName"&&(t[n]=String(r[n]))}),t.translate||(t.translate="no"),[fo.node(0,e.state.doc.content.size,t)]}function DX(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:fo.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function MX(e){return!e.someProp("editable",t=>t(e.state)===!1)}function _Ge(e,t){let r=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(r)!=t.$anchor.start(r)}function FX(e){let t=Object.create(null);function r(n){for(let i in n)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=n[i])}return e.someProp("nodeViews",r),e.someProp("markViews",r),t}function NGe(e,t){let r=0,n=0;for(let i in e){if(e[i]!=t[i])return!0;r++}for(let i in t)n++;return r!=n}function LX(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var j0={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},RT={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},AGe=typeof navigator<"u"&&/Mac/.test(navigator.platform),TGe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var js=0;js<10;js++)j0[48+js]=j0[96+js]=String(js);for(var js=1;js<=24;js++)j0[js+111]="F"+js;for(var js=65;js<=90;js++)j0[js]=String.fromCharCode(js+32),RT[js]=String.fromCharCode(js);for(var kD in j0)RT.hasOwnProperty(kD)||(RT[kD]=j0[kD]);function IGe(e){var t=AGe&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||TGe&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",r=!t&&e.key||(e.shiftKey?RT:j0)[e.keyCode]||e.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}const OGe=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),PGe=typeof navigator<"u"&&/Win/.test(navigator.platform);function RGe(e){let t=e.split(/-(?!$)/),r=t[t.length-1];r=="Space"&&(r=" ");let n,i,a,s;for(let o=0;o<t.length-1;o++){let l=t[o];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))a=!0;else if(/^mod$/i.test(l))OGe?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return n&&(r="Alt-"+r),i&&(r="Ctrl-"+r),s&&(r="Meta-"+r),a&&(r="Shift-"+r),r}function jGe(e){let t=Object.create(null);for(let r in e)t[RGe(r)]=e[r];return t}function _D(e,t,r=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),r&&t.shiftKey&&(e="Shift-"+e),e}function DGe(e){return new Fi({props:{handleKeyDown:Sde(e)}})}function Sde(e){let t=jGe(e);return function(r,n){let i=IGe(n),a,s=t[_D(i,n)];if(s&&s(r.state,r.dispatch,r))return!0;if(i.length==1&&i!=" "){if(n.shiftKey){let o=t[_D(i,n,!1)];if(o&&o(r.state,r.dispatch,r))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(PGe&&n.ctrlKey&&n.altKey)&&(a=j0[n.keyCode])&&a!=i){let o=t[_D(a,n)];if(o&&o(r.state,r.dispatch,r))return!0}}return!1}}var MGe=Object.defineProperty,Y9=(e,t)=>{for(var r in t)MGe(e,r,{get:t[r],enumerable:!0})};function g3(e){const{state:t,transaction:r}=e;let{selection:n}=r,{doc:i}=r,{storedMarks:a}=r;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return a},get selection(){return n},get doc(){return i},get tr(){return n=r.selection,i=r.doc,a=r.storedMarks,r}}}var x3=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:n}=t,{tr:i}=r,a=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([s,o])=>[s,(...c)=>{const d=o(...c)(a);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&n.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:n,state:i}=this,{view:a}=n,s=[],o=!!e,l=e||i.tr,c=()=>(!o&&t&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(l),s.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,p])=>[f,(...x)=>{const v=this.buildProps(l,t),b=p(...x)(v);return s.push(b),d}])),run:c};return d}createCan(e){const{rawCommands:t,state:r}=this,n=!1,i=e||r.tr,a=this.buildProps(i,n);return{...Object.fromEntries(Object.entries(t).map(([o,l])=>[o,(...c)=>l(...c)({...a,dispatch:void 0})])),chain:()=>this.createChain(i,n)}}buildProps(e,t=!0){const{rawCommands:r,editor:n,state:i}=this,{view:a}=n,s={tr:e,editor:n,view:a,state:g3({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([o,l])=>[o,(...c)=>l(...c)(s)]))}};return s}},Ede={};Y9(Ede,{blur:()=>FGe,clearContent:()=>LGe,clearNodes:()=>BGe,command:()=>UGe,createParagraphNear:()=>$Ge,cut:()=>zGe,deleteCurrentNode:()=>HGe,deleteNode:()=>WGe,deleteRange:()=>VGe,deleteSelection:()=>qGe,enter:()=>GGe,exitCode:()=>KGe,extendMarkRange:()=>XGe,first:()=>YGe,focus:()=>QGe,forEach:()=>JGe,insertContent:()=>ZGe,insertContentAt:()=>rKe,joinBackward:()=>aKe,joinDown:()=>iKe,joinForward:()=>sKe,joinItemBackward:()=>oKe,joinItemForward:()=>lKe,joinTextblockBackward:()=>cKe,joinTextblockForward:()=>uKe,joinUp:()=>nKe,keyboardShortcut:()=>fKe,lift:()=>hKe,liftEmptyBlock:()=>pKe,liftListItem:()=>mKe,newlineInCode:()=>gKe,resetAttributes:()=>xKe,scrollIntoView:()=>vKe,selectAll:()=>yKe,selectNodeBackward:()=>bKe,selectNodeForward:()=>wKe,selectParentNode:()=>SKe,selectTextblockEnd:()=>EKe,selectTextblockStart:()=>CKe,setContent:()=>kKe,setMark:()=>VKe,setMeta:()=>qKe,setNode:()=>GKe,setNodeSelection:()=>KKe,setTextDirection:()=>XKe,setTextSelection:()=>YKe,sinkListItem:()=>QKe,splitBlock:()=>JKe,splitListItem:()=>ZKe,toggleList:()=>eXe,toggleMark:()=>tXe,toggleNode:()=>rXe,toggleWrap:()=>nXe,undoInputRule:()=>iXe,unsetAllMarks:()=>aXe,unsetMark:()=>sXe,unsetTextDirection:()=>oXe,updateAttributes:()=>lXe,wrapIn:()=>cXe,wrapInList:()=>uXe});var FGe=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var r;e.isDestroyed||(t.dom.blur(),(r=window==null?void 0:window.getSelection())==null||r.removeAllRanges())}),!0),LGe=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),BGe=()=>({state:e,tr:t,dispatch:r})=>{const{selection:n}=t,{ranges:i}=n;return r&&i.forEach(({$from:a,$to:s})=>{e.doc.nodesBetween(a.pos,s.pos,(o,l)=>{if(o.type.isText)return;const{doc:c,mapping:d}=t,f=c.resolve(d.map(l)),p=c.resolve(d.map(l+o.nodeSize)),m=f.blockRange(p);if(!m)return;const x=gb(m);if(o.type.isTextblock){const{defaultType:v}=f.parent.contentMatchAt(f.index());t.setNodeMarkup(m.start,v)}(x||x===0)&&t.lift(m,x)})}),!0},UGe=e=>t=>e(t),$Ge=()=>({state:e,dispatch:t})=>Fue(e,t),zGe=(e,t)=>({editor:r,tr:n})=>{const{state:i}=r,a=i.doc.slice(e.from,e.to);n.deleteRange(e.from,e.to);const s=n.mapping.map(t);return n.insert(s,a.content),n.setSelection(new Ur(n.doc.resolve(Math.max(s-1,0)))),!0},HGe=()=>({tr:e,dispatch:t})=>{const{selection:r}=e,n=r.$anchor.node();if(n.content.size>0)return!1;const i=e.selection.$anchor;for(let a=i.depth;a>0;a-=1)if(i.node(a).type===n.type){if(t){const o=i.before(a),l=i.after(a);e.delete(o,l).scrollIntoView()}return!0}return!1};function Pa(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}var WGe=e=>({tr:t,state:r,dispatch:n})=>{const i=Pa(e,r.schema),a=t.selection.$anchor;for(let s=a.depth;s>0;s-=1)if(a.node(s).type===i){if(n){const l=a.before(s),c=a.after(s);t.delete(l,c).scrollIntoView()}return!0}return!1},VGe=e=>({tr:t,dispatch:r})=>{const{from:n,to:i}=e;return r&&t.delete(n,i),!0},qGe=()=>({state:e,dispatch:t})=>M9(e,t),GGe=()=>({commands:e})=>e.keyboardShortcut("Enter"),KGe=()=>({state:e,dispatch:t})=>PVe(e,t);function Q9(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function jT(e,t,r={strict:!0}){const n=Object.keys(t);return n.length?n.every(i=>r.strict?t[i]===e[i]:Q9(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function Cde(e,t,r={}){return e.find(n=>n.type===t&&jT(Object.fromEntries(Object.keys(r).map(i=>[i,n.attrs[i]])),r))}function BX(e,t,r={}){return!!Cde(e,t,r)}function J9(e,t,r){var n;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if((!i.node||!i.node.marks.some(d=>d.type===t))&&(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(d=>d.type===t)||(r=r||((n=i.node.marks[0])==null?void 0:n.attrs),!Cde([...i.node.marks],t,r)))return;let s=i.index,o=e.start()+i.offset,l=s+1,c=o+i.node.nodeSize;for(;s>0&&BX([...e.parent.child(s-1).marks],t,r);)s-=1,o-=e.parent.child(s).nodeSize;for(;l<e.parent.childCount&&BX([...e.parent.child(l).marks],t,r);)c+=e.parent.child(l).nodeSize,l+=1;return{from:o,to:c}}function Zh(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}var XGe=(e,t={})=>({tr:r,state:n,dispatch:i})=>{const a=Zh(e,n.schema),{doc:s,selection:o}=r,{$from:l,from:c,to:d}=o;if(i){const f=J9(l,a,t);if(f&&f.from<=c&&f.to>=d){const p=Ur.create(s,f.from,f.to);r.setSelection(p)}}return!0},YGe=e=>t=>{const r=typeof e=="function"?e(t):e;for(let n=0;n<r.length;n+=1)if(r[n](t))return!0;return!1};function kde(e){return e instanceof Ur}function ag(e=0,t=0,r=0){return Math.min(Math.max(e,t),r)}function _de(e,t=null){if(!t)return null;const r=dn.atStart(e),n=dn.atEnd(e);if(t==="start"||t===!0)return r;if(t==="end")return n;const i=r.from,a=n.to;return t==="all"?Ur.create(e,ag(0,i,a),ag(e.content.size,i,a)):Ur.create(e,ag(t,i,a),ag(t,i,a))}function Nde(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function v3(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var QGe=(e=null,t={})=>({editor:r,view:n,tr:i,dispatch:a})=>{t={scrollIntoView:!0,...t};const s=()=>{(v3()||Nde())&&n.dom.focus(),requestAnimationFrame(()=>{r.isDestroyed||(n.focus(),t!=null&&t.scrollIntoView&&r.commands.scrollIntoView())})};if(n.hasFocus()&&e===null||e===!1)return!0;if(a&&e===null&&!kde(r.state.selection))return s(),!0;const o=_de(i.doc,e)||r.state.selection,l=r.state.selection.eq(o);return a&&(l||i.setSelection(o),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},JGe=(e,t)=>r=>e.every((n,i)=>t(n,{...r,index:i})),ZGe=(e,t)=>({tr:r,commands:n})=>n.insertContentAt({from:r.selection.from,to:r.selection.to},e,t),Ade=e=>{const t=e.childNodes;for(let r=t.length-1;r>=0;r-=1){const n=t[r];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?e.removeChild(n):n.nodeType===1&&Ade(n)}return e};function R_(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,r=new window.DOMParser().parseFromString(t,"text/html").body;return Ade(r)}function TS(e,t,r){if(e instanceof wh||e instanceof It)return e;r={slice:!0,parseOptions:{},...r};const n=typeof e=="object"&&e!==null,i=typeof e=="string";if(n)try{if(Array.isArray(e)&&e.length>0)return It.fromArray(e.map(o=>t.nodeFromJSON(o)));const s=t.nodeFromJSON(e);return r.errorOnInvalidContent&&s.check(),s}catch(a){if(r.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:a});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",a),TS("",t,r)}if(i){if(r.errorOnInvalidContent){let s=!1,o="";const l=new uue({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,o=typeof c=="string"?c:c.outerHTML,null)}]}})});if(r.slice?C2.fromSchema(l).parseSlice(R_(e),r.parseOptions):C2.fromSchema(l).parse(R_(e),r.parseOptions),r.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${o}`)})}const a=C2.fromSchema(t);return r.slice?a.parseSlice(R_(e),r.parseOptions).content:a.parse(R_(e),r.parseOptions)}return TS("",t,r)}function eKe(e,t,r){const n=e.steps.length-1;if(n<t)return;const i=e.steps[n];if(!(i instanceof us||i instanceof gs))return;const a=e.mapping.maps[n];let s=0;a.forEach((o,l,c,d)=>{s===0&&(s=d)}),e.setSelection(dn.near(e.doc.resolve(s),r))}var tKe=e=>!("type"in e),rKe=(e,t,r)=>({tr:n,dispatch:i,editor:a})=>{var s;if(i){r={parseOptions:a.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let o;const l=b=>{a.emit("contentError",{editor:a,error:b,disableCollaboration:()=>{"collaboration"in a.storage&&typeof a.storage.collaboration=="object"&&a.storage.collaboration&&(a.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...r.parseOptions};if(!r.errorOnInvalidContent&&!a.options.enableContentCheck&&a.options.emitContentError)try{TS(t,a.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(b){l(b)}try{o=TS(t,a.schema,{parseOptions:c,errorOnInvalidContent:(s=r.errorOnInvalidContent)!=null?s:a.options.enableContentCheck})}catch(b){return l(b),!1}let{from:d,to:f}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},p=!0,m=!0;if((tKe(o)?o:[o]).forEach(b=>{b.check(),p=p?b.isText&&b.marks.length===0:!1,m=m?b.isBlock:!1}),d===f&&m){const{parent:b}=n.doc.resolve(d);b.isTextblock&&!b.type.spec.code&&!b.childCount&&(d-=1,f+=1)}let v;if(p){if(Array.isArray(t))v=t.map(b=>b.text||"").join("");else if(t instanceof It){let b="";t.forEach(w=>{w.text&&(b+=w.text)}),v=b}else typeof t=="object"&&t&&t.text?v=t.text:v=t;n.insertText(v,d,f)}else{v=o;const b=n.doc.resolve(d),w=b.node(),_=b.parentOffset===0,C=w.isText||w.isTextblock,N=w.content.size>0;_&&C&&N&&(d=Math.max(0,d-1)),n.replaceWith(d,f,v)}r.updateSelection&&eKe(n,n.steps.length-1,-1),r.applyInputRules&&n.setMeta("applyInputRules",{from:d,text:v}),r.applyPasteRules&&n.setMeta("applyPasteRules",{from:d,text:v})}return!0},nKe=()=>({state:e,dispatch:t})=>TVe(e,t),iKe=()=>({state:e,dispatch:t})=>IVe(e,t),aKe=()=>({state:e,dispatch:t})=>Iue(e,t),sKe=()=>({state:e,dispatch:t})=>jue(e,t),oKe=()=>({state:e,dispatch:t,tr:r})=>{try{const n=u3(e.doc,e.selection.$from.pos,-1);return n==null?!1:(r.join(n,2),t&&t(r),!0)}catch{return!1}},lKe=()=>({state:e,dispatch:t,tr:r})=>{try{const n=u3(e.doc,e.selection.$from.pos,1);return n==null?!1:(r.join(n,2),t&&t(r),!0)}catch{return!1}},cKe=()=>({state:e,dispatch:t})=>NVe(e,t),uKe=()=>({state:e,dispatch:t})=>AVe(e,t);function Tde(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function dKe(e){const t=e.split(/-(?!$)/);let r=t[t.length-1];r==="Space"&&(r=" ");let n,i,a,s;for(let o=0;o<t.length-1;o+=1){const l=t[o];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))a=!0;else if(/^mod$/i.test(l))v3()||Tde()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return n&&(r=`Alt-${r}`),i&&(r=`Ctrl-${r}`),s&&(r=`Meta-${r}`),a&&(r=`Shift-${r}`),r}var fKe=e=>({editor:t,view:r,tr:n,dispatch:i})=>{const a=dKe(e).split(/-(?!$)/),s=a.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),o=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{r.someProp("handleKeyDown",c=>c(r,o))});return l==null||l.steps.forEach(c=>{const d=c.map(n.mapping);d&&i&&n.maybeStep(d)}),!0};function D0(e,t,r={}){const{from:n,to:i,empty:a}=e.selection,s=t?Pa(t,e.schema):null,o=[];e.doc.nodesBetween(n,i,(f,p)=>{if(f.isText)return;const m=Math.max(n,p),x=Math.min(i,p+f.nodeSize);o.push({node:f,from:m,to:x})});const l=i-n,c=o.filter(f=>s?s.name===f.node.type.name:!0).filter(f=>jT(f.node.attrs,r,{strict:!1}));return a?!!c.length:c.reduce((f,p)=>f+p.to-p.from,0)>=l}var hKe=(e,t={})=>({state:r,dispatch:n})=>{const i=Pa(e,r.schema);return D0(r,i,t)?OVe(r,n):!1},pKe=()=>({state:e,dispatch:t})=>Lue(e,t),mKe=e=>({state:t,dispatch:r})=>{const n=Pa(e,t.schema);return HVe(n)(t,r)},gKe=()=>({state:e,dispatch:t})=>Mue(e,t);function y3(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function UX(e,t){const r=typeof t=="string"?[t]:t;return Object.keys(e).reduce((n,i)=>(r.includes(i)||(n[i]=e[i]),n),{})}var xKe=(e,t)=>({tr:r,state:n,dispatch:i})=>{let a=null,s=null;const o=y3(typeof e=="string"?e:e.name,n.schema);if(!o)return!1;o==="node"&&(a=Pa(e,n.schema)),o==="mark"&&(s=Zh(e,n.schema));let l=!1;return r.selection.ranges.forEach(c=>{n.doc.nodesBetween(c.$from.pos,c.$to.pos,(d,f)=>{a&&a===d.type&&(l=!0,i&&r.setNodeMarkup(f,void 0,UX(d.attrs,t))),s&&d.marks.length&&d.marks.forEach(p=>{s===p.type&&(l=!0,i&&r.addMark(f,f+d.nodeSize,s.create(UX(p.attrs,t))))})})}),l},vKe=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),yKe=()=>({tr:e,dispatch:t})=>{if(t){const r=new ic(e.doc);e.setSelection(r)}return!0},bKe=()=>({state:e,dispatch:t})=>Pue(e,t),wKe=()=>({state:e,dispatch:t})=>Due(e,t),SKe=()=>({state:e,dispatch:t})=>DVe(e,t),EKe=()=>({state:e,dispatch:t})=>LVe(e,t),CKe=()=>({state:e,dispatch:t})=>FVe(e,t);function Z8(e,t,r={},n={}){return TS(e,t,{slice:!1,parseOptions:r,errorOnInvalidContent:n.errorOnInvalidContent})}var kKe=(e,{errorOnInvalidContent:t,emitUpdate:r=!0,parseOptions:n={}}={})=>({editor:i,tr:a,dispatch:s,commands:o})=>{const{doc:l}=a;if(n.preserveWhitespace!=="full"){const c=Z8(e,i.schema,n,{errorOnInvalidContent:t??i.options.enableContentCheck});return s&&a.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!r),!0}return s&&a.setMeta("preventUpdate",!r),o.insertContentAt({from:0,to:l.content.size},e,{parseOptions:n,errorOnInvalidContent:t??i.options.enableContentCheck})};function Ide(e,t){const r=Zh(t,e.schema),{from:n,to:i,empty:a}=e.selection,s=[];a?(e.storedMarks&&s.push(...e.storedMarks),s.push(...e.selection.$head.marks())):e.doc.nodesBetween(n,i,l=>{s.push(...l.marks)});const o=s.find(l=>l.type.name===r.name);return o?{...o.attrs}:{}}function Ode(e,t){const r=new _ue(e);return t.forEach(n=>{n.steps.forEach(i=>{r.step(i)})}),r}function _Ke(e){for(let t=0;t<e.edgeCount;t+=1){const{type:r}=e.edge(t);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function NKe(e,t,r){const n=[];return e.nodesBetween(t.from,t.to,(i,a)=>{r(i)&&n.push({node:i,pos:a})}),n}function AKe(e,t){for(let r=e.depth;r>0;r-=1){const n=e.node(r);if(t(n))return{pos:r>0?e.before(r):0,start:e.start(r),depth:r,node:n}}}function b3(e){return t=>AKe(t.$from,e)}function xr(e,t,r){return e.config[t]===void 0&&e.parent?xr(e.parent,t,r):typeof e.config[t]=="function"?e.config[t].bind({...r,parent:e.parent?xr(e.parent,t,r):null}):e.config[t]}function Z9(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},n=xr(t,"addExtensions",r);return n?[t,...Z9(n())]:t}).flat(10)}function eB(e,t){const r=Wx.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(r),i.innerHTML}function Pde(e){return typeof e=="function"}function Jn(e,t=void 0,...r){return Pde(e)?t?e.bind(t)(...r):e(...r):e}function TKe(e={}){return Object.keys(e).length===0&&e.constructor===Object}function by(e){const t=e.filter(i=>i.type==="extension"),r=e.filter(i=>i.type==="node"),n=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:r,markExtensions:n}}function Rde(e){const t=[],{nodeExtensions:r,markExtensions:n}=by(e),i=[...r,...n],a={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(s=>{const o={name:s.name,options:s.options,storage:s.storage,extensions:i},l=xr(s,"addGlobalAttributes",o);if(!l)return;l().forEach(d=>{d.types.forEach(f=>{Object.entries(d.attributes).forEach(([p,m])=>{t.push({type:f,name:p,attribute:{...a,...m}})})})})}),i.forEach(s=>{const o={name:s.name,options:s.options,storage:s.storage},l=xr(s,"addAttributes",o);if(!l)return;const c=l();Object.entries(c).forEach(([d,f])=>{const p={...a,...f};typeof(p==null?void 0:p.default)=="function"&&(p.default=p.default()),p!=null&&p.isRequired&&(p==null?void 0:p.default)===void 0&&delete p.default,t.push({type:s.name,name:d,attribute:p})})}),t}function Ci(...e){return e.filter(t=>!!t).reduce((t,r)=>{const n={...t};return Object.entries(r).forEach(([i,a])=>{if(!n[i]){n[i]=a;return}if(i==="class"){const o=a?String(a).split(" "):[],l=n[i]?n[i].split(" "):[],c=o.filter(d=>!l.includes(d));n[i]=[...l,...c].join(" ")}else if(i==="style"){const o=a?a.split(";").map(d=>d.trim()).filter(Boolean):[],l=n[i]?n[i].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;l.forEach(d=>{const[f,p]=d.split(":").map(m=>m.trim());c.set(f,p)}),o.forEach(d=>{const[f,p]=d.split(":").map(m=>m.trim());c.set(f,p)}),n[i]=Array.from(c.entries()).map(([d,f])=>`${d}: ${f}`).join("; ")}else n[i]=a}),n},{})}function IS(e,t){return t.filter(r=>r.type===e.type.name).filter(r=>r.attribute.rendered).map(r=>r.attribute.renderHTML?r.attribute.renderHTML(e.attrs)||{}:{[r.name]:e.attrs[r.name]}).reduce((r,n)=>Ci(r,n),{})}function IKe(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function $X(e,t){return"style"in e?e:{...e,getAttrs:r=>{const n=e.getAttrs?e.getAttrs(r):e.attrs;if(n===!1)return!1;const i=t.reduce((a,s)=>{const o=s.attribute.parseHTML?s.attribute.parseHTML(r):IKe(r.getAttribute(s.name));return o==null?a:{...a,[s.name]:o}},{});return{...n,...i}}}}function zX(e){return Object.fromEntries(Object.entries(e).filter(([t,r])=>t==="attrs"&&TKe(r)?!1:r!=null))}function HX(e){var t,r;const n={};return!((t=e==null?void 0:e.attribute)!=null&&t.isRequired)&&"default"in((e==null?void 0:e.attribute)||{})&&(n.default=e.attribute.default),((r=e==null?void 0:e.attribute)==null?void 0:r.validate)!==void 0&&(n.validate=e.attribute.validate),[e.name,n]}function OKe(e,t){var r;const n=Rde(e),{nodeExtensions:i,markExtensions:a}=by(e),s=(r=i.find(c=>xr(c,"topNode")))==null?void 0:r.name,o=Object.fromEntries(i.map(c=>{const d=n.filter(w=>w.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:t},p=e.reduce((w,_)=>{const C=xr(_,"extendNodeSchema",f);return{...w,...C?C(c):{}}},{}),m=zX({...p,content:Jn(xr(c,"content",f)),marks:Jn(xr(c,"marks",f)),group:Jn(xr(c,"group",f)),inline:Jn(xr(c,"inline",f)),atom:Jn(xr(c,"atom",f)),selectable:Jn(xr(c,"selectable",f)),draggable:Jn(xr(c,"draggable",f)),code:Jn(xr(c,"code",f)),whitespace:Jn(xr(c,"whitespace",f)),linebreakReplacement:Jn(xr(c,"linebreakReplacement",f)),defining:Jn(xr(c,"defining",f)),isolating:Jn(xr(c,"isolating",f)),attrs:Object.fromEntries(d.map(HX))}),x=Jn(xr(c,"parseHTML",f));x&&(m.parseDOM=x.map(w=>$X(w,d)));const v=xr(c,"renderHTML",f);v&&(m.toDOM=w=>v({node:w,HTMLAttributes:IS(w,d)}));const b=xr(c,"renderText",f);return b&&(m.toText=b),[c.name,m]})),l=Object.fromEntries(a.map(c=>{const d=n.filter(b=>b.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:t},p=e.reduce((b,w)=>{const _=xr(w,"extendMarkSchema",f);return{...b,..._?_(c):{}}},{}),m=zX({...p,inclusive:Jn(xr(c,"inclusive",f)),excludes:Jn(xr(c,"excludes",f)),group:Jn(xr(c,"group",f)),spanning:Jn(xr(c,"spanning",f)),code:Jn(xr(c,"code",f)),attrs:Object.fromEntries(d.map(HX))}),x=Jn(xr(c,"parseHTML",f));x&&(m.parseDOM=x.map(b=>$X(b,d)));const v=xr(c,"renderHTML",f);return v&&(m.toDOM=b=>v({mark:b,HTMLAttributes:IS(b,d)})),[c.name,m]}));return new uue({topNode:s,nodes:o,marks:l})}function PKe(e){const t=e.filter((r,n)=>e.indexOf(r)!==n);return Array.from(new Set(t))}function tB(e){return e.sort((r,n)=>{const i=xr(r,"priority")||100,a=xr(n,"priority")||100;return i>a?-1:i<a?1:0})}function jde(e){const t=tB(Z9(e)),r=PKe(t.map(n=>n.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(n=>`'${n}'`).join(", ")}]. This can lead to issues.`),t}function Dde(e,t,r){const{from:n,to:i}=t,{blockSeparator:a=`

`,textSerializers:s={}}=r||{};let o="";return e.nodesBetween(n,i,(l,c,d,f)=>{var p;l.isBlock&&c>n&&(o+=a);const m=s==null?void 0:s[l.type.name];if(m)return d&&(o+=m({node:l,pos:c,parent:d,index:f,range:t})),!1;l.isText&&(o+=(p=l==null?void 0:l.text)==null?void 0:p.slice(Math.max(n,c)-c,i-c))}),o}function RKe(e,t){const r={from:0,to:e.content.size};return Dde(e,r,t)}function Mde(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,r])=>[t,r.spec.toText]))}function jKe(e,t){const r=Pa(t,e.schema),{from:n,to:i}=e.selection,a=[];e.doc.nodesBetween(n,i,o=>{a.push(o)});const s=a.reverse().find(o=>o.type.name===r.name);return s?{...s.attrs}:{}}function Fde(e,t){const r=y3(typeof t=="string"?t:t.name,e.schema);return r==="node"?jKe(e,t):r==="mark"?Ide(e,t):{}}function DKe(e,t=JSON.stringify){const r={};return e.filter(n=>{const i=t(n);return Object.prototype.hasOwnProperty.call(r,i)?!1:r[i]=!0})}function MKe(e){const t=DKe(e);return t.length===1?t:t.filter((r,n)=>!t.filter((a,s)=>s!==n).some(a=>r.oldRange.from>=a.oldRange.from&&r.oldRange.to<=a.oldRange.to&&r.newRange.from>=a.newRange.from&&r.newRange.to<=a.newRange.to))}function Lde(e){const{mapping:t,steps:r}=e,n=[];return t.maps.forEach((i,a)=>{const s=[];if(i.ranges.length)i.forEach((o,l)=>{s.push({from:o,to:l})});else{const{from:o,to:l}=r[a];if(o===void 0||l===void 0)return;s.push({from:o,to:l})}s.forEach(({from:o,to:l})=>{const c=t.slice(a).map(o,-1),d=t.slice(a).map(l),f=t.invert().map(c,-1),p=t.invert().map(d);n.push({oldRange:{from:f,to:p},newRange:{from:c,to:d}})})}),MKe(n)}function rB(e,t,r){const n=[];return e===t?r.resolve(e).marks().forEach(i=>{const a=r.resolve(e),s=J9(a,i.type);s&&n.push({mark:i,...s})}):r.nodesBetween(e,t,(i,a)=>{!i||(i==null?void 0:i.nodeSize)===void 0||n.push(...i.marks.map(s=>({from:a,to:a+i.nodeSize,mark:s})))}),n}var FKe=(e,t,r,n=20)=>{const i=e.doc.resolve(r);let a=n,s=null;for(;a>0&&s===null;){const o=i.node(a);(o==null?void 0:o.type.name)===t?s=o:a-=1}return[s,a]};function ND(e,t){return t.nodes[e]||t.marks[e]||null}function XN(e,t,r){return Object.fromEntries(Object.entries(r).filter(([n])=>{const i=e.find(a=>a.type===t&&a.name===n);return i?i.attribute.keepOnSplit:!1}))}var LKe=(e,t=500)=>{let r="";const n=e.parentOffset;return e.parent.nodesBetween(Math.max(0,n-t),n,(i,a,s,o)=>{var l,c;const d=((c=(l=i.type.spec).toText)==null?void 0:c.call(l,{node:i,pos:a,parent:s,index:o}))||i.textContent||"%leaf%";r+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,n-a))}),r};function e5(e,t,r={}){const{empty:n,ranges:i}=e.selection,a=t?Zh(t,e.schema):null;if(n)return!!(e.storedMarks||e.selection.$from.marks()).filter(f=>a?a.name===f.type.name:!0).find(f=>jT(f.attrs,r,{strict:!1}));let s=0;const o=[];if(i.forEach(({$from:f,$to:p})=>{const m=f.pos,x=p.pos;e.doc.nodesBetween(m,x,(v,b)=>{if(!v.isText&&!v.marks.length)return;const w=Math.max(m,b),_=Math.min(x,b+v.nodeSize),C=_-w;s+=C,o.push(...v.marks.map(N=>({mark:N,from:w,to:_})))})}),s===0)return!1;const l=o.filter(f=>a?a.name===f.mark.type.name:!0).filter(f=>jT(f.mark.attrs,r,{strict:!1})).reduce((f,p)=>f+p.to-p.from,0),c=o.filter(f=>a?f.mark.type!==a&&f.mark.type.excludes(a):!0).reduce((f,p)=>f+p.to-p.from,0);return(l>0?l+c:l)>=s}function BKe(e,t,r={}){if(!t)return D0(e,null,r)||e5(e,null,r);const n=y3(t,e.schema);return n==="node"?D0(e,t,r):n==="mark"?e5(e,t,r):!1}var UKe=(e,t)=>{const{$from:r,$to:n,$anchor:i}=e.selection;if(t){const a=b3(o=>o.type.name===t)(e.selection);if(!a)return!1;const s=e.doc.resolve(a.pos+1);return i.pos+1===s.end()}return!(n.parentOffset<n.parent.nodeSize-2||r.pos!==n.pos)},$Ke=e=>{const{$from:t,$to:r}=e.selection;return!(t.parentOffset>0||t.pos!==r.pos)};function WX(e,t){return Array.isArray(t)?t.some(r=>(typeof r=="string"?r:r.name)===e.name):t}function VX(e,t){const{nodeExtensions:r}=by(t),n=r.find(s=>s.name===e);if(!n)return!1;const i={name:n.name,options:n.options,storage:n.storage},a=Jn(xr(n,"group",i));return typeof a!="string"?!1:a.split(" ").includes("list")}function w3(e,{checkChildren:t=!0,ignoreWhitespace:r=!1}={}){var n;if(r){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((n=e.text)!=null?n:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let i=!0;return e.content.forEach(a=>{i!==!1&&(w3(a,{ignoreWhitespace:r,checkChildren:t})||(i=!1))}),i}return!1}function Bde(e){return e instanceof pr}var Ude=class $de{constructor(t){this.position=t}static fromJSON(t){return new $de(t.position)}toJSON(){return{position:this.position}}};function zKe(e,t){const r=t.mapping.mapResult(e.position);return{position:new Ude(r.pos),mapResult:r}}function HKe(e){return new Ude(e)}function WKe(e,t,r){var n;const{selection:i}=t;let a=null;if(kde(i)&&(a=i.$cursor),a){const o=(n=e.storedMarks)!=null?n:a.marks();return a.parent.type.allowsMarkType(r)&&(!!r.isInSet(o)||!o.some(c=>c.type.excludes(r)))}const{ranges:s}=i;return s.some(({$from:o,$to:l})=>{let c=o.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(r):!1;return e.doc.nodesBetween(o.pos,l.pos,(d,f,p)=>{if(c)return!1;if(d.isInline){const m=!p||p.type.allowsMarkType(r),x=!!r.isInSet(d.marks)||!d.marks.some(v=>v.type.excludes(r));c=m&&x}return!c}),c})}var VKe=(e,t={})=>({tr:r,state:n,dispatch:i})=>{const{selection:a}=r,{empty:s,ranges:o}=a,l=Zh(e,n.schema);if(i)if(s){const c=Ide(n,l);r.addStoredMark(l.create({...c,...t}))}else o.forEach(c=>{const d=c.$from.pos,f=c.$to.pos;n.doc.nodesBetween(d,f,(p,m)=>{const x=Math.max(m,d),v=Math.min(m+p.nodeSize,f);p.marks.find(w=>w.type===l)?p.marks.forEach(w=>{l===w.type&&r.addMark(x,v,l.create({...w.attrs,...t}))}):r.addMark(x,v,l.create(t))})});return WKe(n,r,l)},qKe=(e,t)=>({tr:r})=>(r.setMeta(e,t),!0),GKe=(e,t={})=>({state:r,dispatch:n,chain:i})=>{const a=Pa(e,r.schema);let s;return r.selection.$anchor.sameParent(r.selection.$head)&&(s=r.selection.$anchor.parent.attrs),a.isTextblock?i().command(({commands:o})=>aX(a,{...s,...t})(r)?!0:o.clearNodes()).command(({state:o})=>aX(a,{...s,...t})(o,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},KKe=e=>({tr:t,dispatch:r})=>{if(r){const{doc:n}=t,i=ag(e,0,n.content.size),a=pr.create(n,i);t.setSelection(a)}return!0},XKe=(e,t)=>({tr:r,state:n,dispatch:i})=>{const{selection:a}=n;let s,o;return typeof t=="number"?(s=t,o=t):t&&"from"in t&&"to"in t?(s=t.from,o=t.to):(s=a.from,o=a.to),i&&r.doc.nodesBetween(s,o,(l,c)=>{l.isText||r.setNodeMarkup(c,void 0,{...l.attrs,dir:e})}),!0},YKe=e=>({tr:t,dispatch:r})=>{if(r){const{doc:n}=t,{from:i,to:a}=typeof e=="number"?{from:e,to:e}:e,s=Ur.atStart(n).from,o=Ur.atEnd(n).to,l=ag(i,s,o),c=ag(a,s,o),d=Ur.create(n,l,c);t.setSelection(d)}return!0},QKe=e=>({state:t,dispatch:r})=>{const n=Pa(e,t.schema);return qVe(n)(t,r)};function qX(e,t){const r=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(r){const n=r.filter(i=>t==null?void 0:t.includes(i.type.name));e.tr.ensureMarks(n)}}var JKe=({keepMarks:e=!0}={})=>({tr:t,state:r,dispatch:n,editor:i})=>{const{selection:a,doc:s}=t,{$from:o,$to:l}=a,c=i.extensionManager.attributes,d=XN(c,o.node().type.name,o.node().attrs);if(a instanceof pr&&a.node.isBlock)return!o.parentOffset||!Sh(s,o.pos)?!1:(n&&(e&&qX(r,i.extensionManager.splittableMarks),t.split(o.pos).scrollIntoView()),!0);if(!o.parent.isBlock)return!1;const f=l.parentOffset===l.parent.content.size,p=o.depth===0?void 0:_Ke(o.node(-1).contentMatchAt(o.indexAfter(-1)));let m=f&&p?[{type:p,attrs:d}]:void 0,x=Sh(t.doc,t.mapping.map(o.pos),1,m);if(!m&&!x&&Sh(t.doc,t.mapping.map(o.pos),1,p?[{type:p}]:void 0)&&(x=!0,m=p?[{type:p,attrs:d}]:void 0),n){if(x&&(a instanceof Ur&&t.deleteSelection(),t.split(t.mapping.map(o.pos),1,m),p&&!f&&!o.parentOffset&&o.parent.type!==p)){const v=t.mapping.map(o.before()),b=t.doc.resolve(v);o.node(-1).canReplaceWith(b.index(),b.index()+1,p)&&t.setNodeMarkup(t.mapping.map(o.before()),p)}e&&qX(r,i.extensionManager.splittableMarks),t.scrollIntoView()}return x},ZKe=(e,t={})=>({tr:r,state:n,dispatch:i,editor:a})=>{var s;const o=Pa(e,n.schema),{$from:l,$to:c}=n.selection,d=n.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(c))return!1;const f=l.node(-1);if(f.type!==o)return!1;const p=a.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==o||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let w=It.empty;const _=l.index(-1)?1:l.index(-2)?2:3;for(let D=l.depth-_;D>=l.depth-3;D-=1)w=It.from(l.node(D).copy(w));const C=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,N={...XN(p,l.node().type.name,l.node().attrs),...t},R=((s=o.contentMatch.defaultType)==null?void 0:s.createAndFill(N))||void 0;w=w.append(It.from(o.createAndFill(null,R)||void 0));const P=l.before(l.depth-(_-1));r.replace(P,l.after(-C),new qt(w,4-_,0));let O=-1;r.doc.nodesBetween(P,r.doc.content.size,(D,M)=>{if(O>-1)return!1;D.isTextblock&&D.content.size===0&&(O=M+1)}),O>-1&&r.setSelection(Ur.near(r.doc.resolve(O))),r.scrollIntoView()}return!0}const m=c.pos===l.end()?f.contentMatchAt(0).defaultType:null,x={...XN(p,f.type.name,f.attrs),...t},v={...XN(p,l.node().type.name,l.node().attrs),...t};r.delete(l.pos,c.pos);const b=m?[{type:o,attrs:x},{type:m,attrs:v}]:[{type:o,attrs:x}];if(!Sh(r.doc,l.pos,2))return!1;if(i){const{selection:w,storedMarks:_}=n,{splittableMarks:C}=a.extensionManager,N=_||w.$to.parentOffset&&w.$from.marks();if(r.split(l.pos,2,b).scrollIntoView(),!N||!i)return!0;const R=N.filter(P=>C.includes(P.type.name));r.ensureMarks(R)}return!0},AD=(e,t)=>{const r=b3(s=>s.type===t)(e.selection);if(!r)return!0;const n=e.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(n===void 0)return!0;const i=e.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&J0(e.doc,r.pos)&&e.join(r.pos),!0},TD=(e,t)=>{const r=b3(s=>s.type===t)(e.selection);if(!r)return!0;const n=e.doc.resolve(r.start).after(r.depth);if(n===void 0)return!0;const i=e.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&J0(e.doc,n)&&e.join(n),!0},eXe=(e,t,r,n={})=>({editor:i,tr:a,state:s,dispatch:o,chain:l,commands:c,can:d})=>{const{extensions:f,splittableMarks:p}=i.extensionManager,m=Pa(e,s.schema),x=Pa(t,s.schema),{selection:v,storedMarks:b}=s,{$from:w,$to:_}=v,C=w.blockRange(_),N=b||v.$to.parentOffset&&v.$from.marks();if(!C)return!1;const R=b3(P=>VX(P.type.name,f))(v);if(C.depth>=1&&R&&C.depth-R.depth<=1){if(R.node.type===m)return c.liftListItem(x);if(VX(R.node.type.name,f)&&m.validContent(R.node.content)&&o)return l().command(()=>(a.setNodeMarkup(R.pos,m),!0)).command(()=>AD(a,m)).command(()=>TD(a,m)).run()}return!r||!N||!o?l().command(()=>d().wrapInList(m,n)?!0:c.clearNodes()).wrapInList(m,n).command(()=>AD(a,m)).command(()=>TD(a,m)).run():l().command(()=>{const P=d().wrapInList(m,n),O=N.filter(D=>p.includes(D.type.name));return a.ensureMarks(O),P?!0:c.clearNodes()}).wrapInList(m,n).command(()=>AD(a,m)).command(()=>TD(a,m)).run()},tXe=(e,t={},r={})=>({state:n,commands:i})=>{const{extendEmptyMarkRange:a=!1}=r,s=Zh(e,n.schema);return e5(n,s,t)?i.unsetMark(s,{extendEmptyMarkRange:a}):i.setMark(s,t)},rXe=(e,t,r={})=>({state:n,commands:i})=>{const a=Pa(e,n.schema),s=Pa(t,n.schema),o=D0(n,a,r);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),o?i.setNode(s,l):i.setNode(a,{...l,...r})},nXe=(e,t={})=>({state:r,commands:n})=>{const i=Pa(e,r.schema);return D0(r,i,t)?n.lift(i):n.wrapIn(i,t)},iXe=()=>({state:e,dispatch:t})=>{const r=e.plugins;for(let n=0;n<r.length;n+=1){const i=r[n];let a;if(i.spec.isInputRules&&(a=i.getState(e))){if(t){const s=e.tr,o=a.transform;for(let l=o.steps.length-1;l>=0;l-=1)s.step(o.steps[l].invert(o.docs[l]));if(a.text){const l=s.doc.resolve(a.from).marks();s.replaceWith(a.from,a.to,e.schema.text(a.text,l))}else s.delete(a.from,a.to)}return!0}}return!1},aXe=()=>({tr:e,dispatch:t})=>{const{selection:r}=e,{empty:n,ranges:i}=r;return n||t&&i.forEach(a=>{e.removeMark(a.$from.pos,a.$to.pos)}),!0},sXe=(e,t={})=>({tr:r,state:n,dispatch:i})=>{var a;const{extendEmptyMarkRange:s=!1}=t,{selection:o}=r,l=Zh(e,n.schema),{$from:c,empty:d,ranges:f}=o;if(!i)return!0;if(d&&s){let{from:p,to:m}=o;const x=(a=c.marks().find(b=>b.type===l))==null?void 0:a.attrs,v=J9(c,l,x);v&&(p=v.from,m=v.to),r.removeMark(p,m,l)}else f.forEach(p=>{r.removeMark(p.$from.pos,p.$to.pos,l)});return r.removeStoredMark(l),!0},oXe=e=>({tr:t,state:r,dispatch:n})=>{const{selection:i}=r;let a,s;return typeof e=="number"?(a=e,s=e):e&&"from"in e&&"to"in e?(a=e.from,s=e.to):(a=i.from,s=i.to),n&&t.doc.nodesBetween(a,s,(o,l)=>{if(o.isText)return;const c={...o.attrs};delete c.dir,t.setNodeMarkup(l,void 0,c)}),!0},lXe=(e,t={})=>({tr:r,state:n,dispatch:i})=>{let a=null,s=null;const o=y3(typeof e=="string"?e:e.name,n.schema);if(!o)return!1;o==="node"&&(a=Pa(e,n.schema)),o==="mark"&&(s=Zh(e,n.schema));let l=!1;return r.selection.ranges.forEach(c=>{const d=c.$from.pos,f=c.$to.pos;let p,m,x,v;r.selection.empty?n.doc.nodesBetween(d,f,(b,w)=>{a&&a===b.type&&(l=!0,x=Math.max(w,d),v=Math.min(w+b.nodeSize,f),p=w,m=b)}):n.doc.nodesBetween(d,f,(b,w)=>{w<d&&a&&a===b.type&&(l=!0,x=Math.max(w,d),v=Math.min(w+b.nodeSize,f),p=w,m=b),w>=d&&w<=f&&(a&&a===b.type&&(l=!0,i&&r.setNodeMarkup(w,void 0,{...b.attrs,...t})),s&&b.marks.length&&b.marks.forEach(_=>{if(s===_.type&&(l=!0,i)){const C=Math.max(w,d),N=Math.min(w+b.nodeSize,f);r.addMark(C,N,s.create({..._.attrs,...t}))}}))}),m&&(p!==void 0&&i&&r.setNodeMarkup(p,void 0,{...m.attrs,...t}),s&&m.marks.length&&m.marks.forEach(b=>{s===b.type&&i&&r.addMark(x,v,s.create({...b.attrs,...t}))}))}),l},cXe=(e,t={})=>({state:r,dispatch:n})=>{const i=Pa(e,r.schema);return BVe(i,t)(r,n)},uXe=(e,t={})=>({state:r,dispatch:n})=>{const i=Pa(e,r.schema);return UVe(i,t)(r,n)},dXe=class{constructor(){this.callbacks={}}on(t,r){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(r),this}emit(t,...r){const n=this.callbacks[t];return n&&n.forEach(i=>i.apply(this,r)),this}off(t,r){const n=this.callbacks[t];return n&&(r?this.callbacks[t]=n.filter(i=>i!==r):delete this.callbacks[t]),this}once(t,r){const n=(...i)=>{this.off(t,n),r.apply(this,i)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},S3=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},fXe=(e,t)=>{if(Q9(t))return t.exec(e);const r=t(e);if(!r)return null;const n=[r.text];return n.index=r.index,n.input=e,n.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(r.replaceWith)),n};function j_(e){var t;const{editor:r,from:n,to:i,text:a,rules:s,plugin:o}=e,{view:l}=r;if(l.composing)return!1;const c=l.state.doc.resolve(n);if(c.parent.type.spec.code||(t=c.nodeBefore||c.nodeAfter)!=null&&t.marks.find(p=>p.type.spec.code))return!1;let d=!1;const f=LKe(c)+a;return s.forEach(p=>{if(d)return;const m=fXe(f,p.find);if(!m)return;const x=l.state.tr,v=g3({state:l.state,transaction:x}),b={from:n-(m[0].length-a.length),to:i},{commands:w,chain:_,can:C}=new x3({editor:r,state:v});p.handler({state:v,range:b,match:m,commands:w,chain:_,can:C})===null||!x.steps.length||(p.undoable&&x.setMeta(o,{transform:x,from:n,to:i,text:a}),l.dispatch(x),d=!0)}),d}function hXe(e){const{editor:t,rules:r}=e,n=new Fi({state:{init(){return null},apply(i,a,s){const o=i.getMeta(n);if(o)return o;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=eB(It.from(d),s.schema);const{from:f}=l,p=f+d.length;j_({editor:t,from:f,to:p,text:d,rules:r,plugin:n})}),i.selectionSet||i.docChanged?null:a}},props:{handleTextInput(i,a,s,o){return j_({editor:t,from:a,to:s,text:o,rules:r,plugin:n})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:a}=i.state.selection;a&&j_({editor:t,from:a.pos,to:a.pos,text:"",rules:r,plugin:n})}),!1)},handleKeyDown(i,a){if(a.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?j_({editor:t,from:s.pos,to:s.pos,text:`
`,rules:r,plugin:n}):!1}},isInputRules:!0});return n}function pXe(e){return Object.prototype.toString.call(e).slice(8,-1)}function D_(e){return pXe(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function zde(e,t){const r={...e};return D_(e)&&D_(t)&&Object.keys(t).forEach(n=>{D_(t[n])&&D_(e[n])?r[n]=zde(e[n],t[n]):r[n]=t[n]}),r}var nB=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...Jn(xr(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Jn(xr(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>zde(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},Vx=class Hde extends nB{constructor(){super(...arguments),this.type="mark"}static create(t={}){const r=typeof t=="function"?t():t;return new Hde(r)}static handleExit({editor:t,mark:r}){const{tr:n}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(c=>(c==null?void 0:c.type.name)===r.name))return!1;const l=s.find(c=>(c==null?void 0:c.type.name)===r.name);return l&&n.removeStoredMark(l),n.insertText(" ",i.pos),t.view.dispatch(n),!0}return!1}configure(t){return super.configure(t)}extend(t){const r=typeof t=="function"?t():t;return super.extend(r)}};function mXe(e){return typeof e=="number"}var gXe=class{constructor(e){this.find=e.find,this.handler=e.handler}},xXe=(e,t,r)=>{if(Q9(t))return[...e.matchAll(t)];const n=t(e,r);return n?n.map(i=>{const a=[i.text];return a.index=i.index,a.input=e,a.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),a.push(i.replaceWith)),a}):[]};function vXe(e){const{editor:t,state:r,from:n,to:i,rule:a,pasteEvent:s,dropEvent:o}=e,{commands:l,chain:c,can:d}=new x3({editor:t,state:r}),f=[];return r.doc.nodesBetween(n,i,(m,x)=>{var v,b,w,_,C;if((b=(v=m.type)==null?void 0:v.spec)!=null&&b.code||!(m.isText||m.isTextblock||m.isInline))return;const N=(C=(_=(w=m.content)==null?void 0:w.size)!=null?_:m.nodeSize)!=null?C:0,R=Math.max(n,x),P=Math.min(i,x+N);if(R>=P)return;const O=m.isText?m.text||"":m.textBetween(R-x,P-x,void 0,"");xXe(O,a.find,s).forEach(M=>{if(M.index===void 0)return;const B=R+M.index+1,U=B+M[0].length,H={from:r.tr.mapping.map(B),to:r.tr.mapping.map(U)},Z=a.handler({state:r,range:H,match:M,commands:l,chain:c,can:d,pasteEvent:s,dropEvent:o});f.push(Z)})}),f.every(m=>m!==null)}var M_=null,yXe=e=>{var t;const r=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=r.clipboardData)==null||t.setData("text/html",e),r};function bXe(e){const{editor:t,rules:r}=e;let n=null,i=!1,a=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,o;try{o=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{o=null}const l=({state:d,from:f,to:p,rule:m,pasteEvt:x})=>{const v=d.tr,b=g3({state:d,transaction:v});if(!(!vXe({editor:t,state:b,from:Math.max(f-1,0),to:p.b-1,rule:m,pasteEvent:x,dropEvent:o})||!v.steps.length)){try{o=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{o=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,v}};return r.map(d=>new Fi({view(f){const p=x=>{var v;n=(v=f.dom.parentElement)!=null&&v.contains(x.target)?f.dom.parentElement:null,n&&(M_=t)},m=()=>{M_&&(M_=null)};return window.addEventListener("dragstart",p),window.addEventListener("dragend",m),{destroy(){window.removeEventListener("dragstart",p),window.removeEventListener("dragend",m)}}},props:{handleDOMEvents:{drop:(f,p)=>{if(a=n===f.dom.parentElement,o=p,!a){const m=M_;m!=null&&m.isEditable&&setTimeout(()=>{const x=m.state.selection;x&&m.commands.deleteRange({from:x.from,to:x.to})},10)}return!1},paste:(f,p)=>{var m;const x=(m=p.clipboardData)==null?void 0:m.getData("text/html");return s=p,i=!!(x!=null&&x.includes("data-pm-slice")),!1}}},appendTransaction:(f,p,m)=>{const x=f[0],v=x.getMeta("uiEvent")==="paste"&&!i,b=x.getMeta("uiEvent")==="drop"&&!a,w=x.getMeta("applyPasteRules"),_=!!w;if(!v&&!b&&!_)return;if(_){let{text:R}=w;typeof R=="string"?R=R:R=eB(It.from(R),m.schema);const{from:P}=w,O=P+R.length,D=yXe(R);return l({rule:d,state:m,from:P,to:{b:O},pasteEvt:D})}const C=p.doc.content.findDiffStart(m.doc.content),N=p.doc.content.findDiffEnd(m.doc.content);if(!(!mXe(C)||!N||C===N.b))return l({rule:d,state:m,from:C,to:N,pasteEvt:s})}}))}var E3=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.baseExtensions=e,this.extensions=jde(e),this.schema=OKe(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:ND(t.name,this.schema)},n=xr(t,"addCommands",r);return n?{...e,...n()}:e},{})}get plugins(){const{editor:e}=this;return tB([...this.extensions].reverse()).flatMap(n=>{const i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:ND(n.name,this.schema)},a=[],s=xr(n,"addKeyboardShortcuts",i);let o={};if(n.type==="mark"&&xr(n,"exitable",i)&&(o.ArrowRight=()=>Vx.handleExit({editor:e,mark:n})),s){const p=Object.fromEntries(Object.entries(s()).map(([m,x])=>[m,()=>x({editor:e})]));o={...o,...p}}const l=DGe(o);a.push(l);const c=xr(n,"addInputRules",i);if(WX(n,e.options.enableInputRules)&&c){const p=c();if(p&&p.length){const m=hXe({editor:e,rules:p}),x=Array.isArray(m)?m:[m];a.push(...x)}}const d=xr(n,"addPasteRules",i);if(WX(n,e.options.enablePasteRules)&&d){const p=d();if(p&&p.length){const m=bXe({editor:e,rules:p});a.push(...m)}}const f=xr(n,"addProseMirrorPlugins",i);if(f){const p=f();a.push(...p)}return a})}get attributes(){return Rde(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=by(this.extensions);return Object.fromEntries(t.filter(r=>!!xr(r,"addNodeView")).map(r=>{const n=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:Pa(r.name,this.schema)},a=xr(r,"addNodeView",i);if(!a)return[];const s=a();if(!s)return[];const o=(l,c,d,f,p)=>{const m=IS(l,n);return s({node:l,view:c,getPos:d,decorations:f,innerDecorations:p,editor:e,extension:r,HTMLAttributes:m})};return[r.name,o]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=by(this.extensions);return Object.fromEntries(t.filter(r=>!!xr(r,"addMarkView")).map(r=>{const n=this.attributes.filter(o=>o.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:Zh(r.name,this.schema)},a=xr(r,"addMarkView",i);if(!a)return[];const s=(o,l,c)=>{const d=IS(o,n);return a()({mark:o,view:l,inline:c,editor:e,extension:r,HTMLAttributes:d,updateAttributes:f=>{DXe(o,e,f)}})};return[r.name,s]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var r;const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:ND(t.name,this.schema)};t.type==="mark"&&((r=Jn(xr(t,"keepOnSplit",n)))==null||r)&&this.splittableMarks.push(t.name);const i=xr(t,"onBeforeCreate",n),a=xr(t,"onCreate",n),s=xr(t,"onUpdate",n),o=xr(t,"onSelectionUpdate",n),l=xr(t,"onTransaction",n),c=xr(t,"onFocus",n),d=xr(t,"onBlur",n),f=xr(t,"onDestroy",n);i&&this.editor.on("beforeCreate",i),a&&this.editor.on("create",a),s&&this.editor.on("update",s),o&&this.editor.on("selectionUpdate",o),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),d&&this.editor.on("blur",d),f&&this.editor.on("destroy",f)})}};E3.resolve=jde;E3.sort=tB;E3.flatten=Z9;var wXe={};Y9(wXe,{ClipboardTextSerializer:()=>Vde,Commands:()=>qde,Delete:()=>Gde,Drop:()=>Kde,Editable:()=>Xde,FocusEvents:()=>Qde,Keymap:()=>Jde,Paste:()=>Zde,Tabindex:()=>efe,TextDirection:()=>tfe,focusEventsPluginKey:()=>Yde});var oa=class Wde extends nB{constructor(){super(...arguments),this.type="extension"}static create(t={}){const r=typeof t=="function"?t():t;return new Wde(r)}configure(t){return super.configure(t)}extend(t){const r=typeof t=="function"?t():t;return super.extend(r)}},Vde=oa.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Fi({key:new va("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:r}=e,{doc:n,selection:i}=t,{ranges:a}=i,s=Math.min(...a.map(d=>d.$from.pos)),o=Math.max(...a.map(d=>d.$to.pos)),l=Mde(r);return Dde(n,{from:s,to:o},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),qde=oa.create({name:"commands",addCommands(){return{...Ede}}}),Gde=oa.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var r,n,i;const a=()=>{var s,o,l,c;if((c=(l=(o=(s=this.editor.options.coreExtensionOptions)==null?void 0:s.delete)==null?void 0:o.filterTransaction)==null?void 0:l.call(o,e))!=null?c:e.getMeta("y-sync$"))return;const d=Ode(e.before,[e,...t]);Lde(d).forEach(m=>{d.mapping.mapResult(m.oldRange.from).deletedAfter&&d.mapping.mapResult(m.oldRange.to).deletedBefore&&d.before.nodesBetween(m.oldRange.from,m.oldRange.to,(x,v)=>{const b=v+x.nodeSize-2,w=m.oldRange.from<=v&&b<=m.oldRange.to;this.editor.emit("delete",{type:"node",node:x,from:v,to:b,newFrom:d.mapping.map(v),newTo:d.mapping.map(b),deletedRange:m.oldRange,newRange:m.newRange,partial:!w,editor:this.editor,transaction:e,combinedTransform:d})})});const p=d.mapping;d.steps.forEach((m,x)=>{var v,b;if(m instanceof Xu){const w=p.slice(x).map(m.from,-1),_=p.slice(x).map(m.to),C=p.invert().map(w,-1),N=p.invert().map(_),R=(v=d.doc.nodeAt(w-1))==null?void 0:v.marks.some(O=>O.eq(m.mark)),P=(b=d.doc.nodeAt(_))==null?void 0:b.marks.some(O=>O.eq(m.mark));this.editor.emit("delete",{type:"mark",mark:m.mark,from:m.from,to:m.to,deletedRange:{from:C,to:N},newRange:{from:w,to:_},partial:!!(P||R),editor:this.editor,transaction:e,combinedTransform:d})}})};(i=(n=(r=this.editor.options.coreExtensionOptions)==null?void 0:r.delete)==null?void 0:n.async)==null||i?setTimeout(a,0):a()}}),Kde=oa.create({name:"drop",addProseMirrorPlugins(){return[new Fi({key:new va("tiptapDrop"),props:{handleDrop:(e,t,r,n)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:r,moved:n})}}})]}}),Xde=oa.create({name:"editable",addProseMirrorPlugins(){return[new Fi({key:new va("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Yde=new va("focusEvents"),Qde=oa.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new Fi({key:Yde,props:{handleDOMEvents:{focus:(t,r)=>{e.isFocused=!0;const n=e.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return t.dispatch(n),!1},blur:(t,r)=>{e.isFocused=!1;const n=e.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return t.dispatch(n),!1}}}})]}}),Jde=oa.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:o})=>{const{selection:l,doc:c}=o,{empty:d,$anchor:f}=l,{pos:p,parent:m}=f,x=f.parent.isTextblock&&p>0?o.doc.resolve(p-1):f,v=x.parent.type.spec.isolating,b=f.pos-f.parentOffset,w=v&&x.parent.childCount===1?b===f.pos:dn.atStart(c).from===p;return!d||!m.type.isTextblock||m.textContent.length||!w||w&&f.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...n},a={...n,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return v3()||Tde()?a:i},addProseMirrorPlugins(){return[new Fi({key:new va("clearDocument"),appendTransaction:(e,t,r)=>{if(e.some(v=>v.getMeta("composition")))return;const n=e.some(v=>v.docChanged)&&!t.doc.eq(r.doc),i=e.some(v=>v.getMeta("preventClearDocument"));if(!n||i)return;const{empty:a,from:s,to:o}=t.selection,l=dn.atStart(t.doc).from,c=dn.atEnd(t.doc).to;if(a||!(s===l&&o===c)||!w3(r.doc))return;const p=r.tr,m=g3({state:r,transaction:p}),{commands:x}=new x3({editor:this.editor,state:m});if(x.clearNodes(),!!p.steps.length)return p}})]}}),Zde=oa.create({name:"paste",addProseMirrorPlugins(){return[new Fi({key:new va("tiptapPaste"),props:{handlePaste:(e,t,r)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:r})}}})]}}),efe=oa.create({name:"tabindex",addProseMirrorPlugins(){return[new Fi({key:new va("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),tfe=oa.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:e}=by(this.extensions);return[{types:e.filter(t=>t.name!=="text").map(t=>t.name),attributes:{dir:{default:this.options.direction,parseHTML:t=>{const r=t.getAttribute("dir");return r&&(r==="ltr"||r==="rtl"||r==="auto")?r:this.options.direction},renderHTML:t=>t.dir?{dir:t.dir}:{}}}}]},addProseMirrorPlugins(){return[new Fi({key:new va("textDirection"),props:{attributes:()=>{const e=this.options.direction;return e?{dir:e}:{}}}})]}}),SXe=class V1{constructor(t,r,n=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=t,this.editor=r,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let r=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}r=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:r,to:n},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),r=this.resolvedPos.doc.resolve(t);return new V1(r,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new V1(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new V1(t,this.editor)}get children(){const t=[];return this.node.content.forEach((r,n)=>{const i=r.isBlock&&!r.isTextblock,a=r.isAtom&&!r.isText,s=this.pos+n+(a?0:1);if(s<0||s>this.resolvedPos.doc.nodeSize-2)return;const o=this.resolvedPos.doc.resolve(s);if(!i&&o.depth<=this.depth)return;const l=new V1(o,this.editor,i,i?r:null);i&&(l.actualDepth=this.depth+1),t.push(new V1(o,this.editor,i,i?r:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,r={}){let n=null,i=this.parent;for(;i&&!n;){if(i.node.type.name===t)if(Object.keys(r).length>0){const a=i.node.attrs,s=Object.keys(r);for(let o=0;o<s.length;o+=1){const l=s[o];if(a[l]!==r[l])break}}else n=i;i=i.parent}return n}querySelector(t,r={}){return this.querySelectorAll(t,r,!0)[0]||null}querySelectorAll(t,r={},n=!1){let i=[];if(!this.children||this.children.length===0)return i;const a=Object.keys(r);return this.children.forEach(s=>{n&&i.length>0||(s.node.type.name===t&&a.every(l=>r[l]===s.node.attrs[l])&&i.push(s),!(n&&i.length>0)&&(i=i.concat(s.querySelectorAll(t,r,n))))}),i}setAttribute(t){const{tr:r}=this.editor.state;r.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(r)}},EXe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function CXe(e,t,r){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}var kXe=class extends dXe{constructor(e={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:zKe,createMappablePosition:HKe},this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:i,moved:a})=>this.options.onDrop(n,i,a)),this.on("paste",({event:n,slice:i})=>this.options.onPaste(n,i)),this.on("delete",this.options.onDelete);const t=this.createDoc(),r=_de(t,this.options.autofocus);this.editorState=uv.create({doc:t,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e!=null&&e.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=CXe(EXe,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(this.editorView)return this.editorView[t];if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const r=Pde(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(i=>{const a=typeof i=="string"?`${i}$`:i.key;r=r.filter(s=>!s.key.startsWith(a))}),t.length===r.length)return;const n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}createExtensionManager(){var e,t;const n=[...this.options.enableCoreExtensions?[Xde,Vde.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),qde,Qde,Jde,efe,Kde,Zde,Gde,tfe.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new E3(n,this)}createCommandManager(){this.commandManager=new x3({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=Z8(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(r=>r.name!=="collaboration"),this.createExtensionManager()}}),e=Z8(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new wde(e,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)==null?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.prependClass(),this.injectCSS();const n=this.view.dom;n.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(c=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(c)});return}const{state:t,transactions:r}=this.state.applyTransaction(e),n=!this.state.selection.eq(t.selection),i=r.includes(e),a=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:r.slice(1)}),n&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=r.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),o=s==null?void 0:s.getMeta("focus"),l=s==null?void 0:s.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:s}),l&&this.emit("blur",{editor:this,event:l.event,transaction:s}),!(e.getMeta("preventUpdate")||!r.some(c=>c.docChanged)||a.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:r.slice(1)})}getAttributes(e){return Fde(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,n=typeof e=="string"?t:e;return BKe(this.state,r,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return eB(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return RKe(this.state.doc,{blockSeparator:t,textSerializers:{...Mde(this.schema),...r}})}get isEmpty(){return w3(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var r;return((r=this.$doc)==null?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)==null?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new SXe(t,this)}get $doc(){return this.$pos(0)}};function wy(e){return new S3({find:e.find,handler:({state:t,range:r,match:n})=>{const i=Jn(e.getAttributes,void 0,n);if(i===!1||i===null)return null;const{tr:a}=t,s=n[n.length-1],o=n[0];if(s){const l=o.search(/\S/),c=r.from+o.indexOf(s),d=c+s.length;if(rB(r.from,r.to,t.doc).filter(m=>m.mark.type.excluded.find(v=>v===e.type&&v!==m.mark.type)).filter(m=>m.to>c).length)return null;d<r.to&&a.delete(d,r.to),c>r.from&&a.delete(r.from+l,c);const p=r.from+l+s.length;a.addMark(r.from+l,p,e.type.create(i||{})),a.removeStoredMark(e.type)}},undoable:e.undoable})}function rfe(e){return new S3({find:e.find,handler:({state:t,range:r,match:n})=>{const i=Jn(e.getAttributes,void 0,n)||{},{tr:a}=t,s=r.from;let o=r.to;const l=e.type.create(i);if(n[1]){const c=n[0].lastIndexOf(n[1]);let d=s+c;d>o?d=o:o=d+n[1].length;const f=n[0][n[0].length-1];a.insertText(f,s+n[0].length-1),a.replaceWith(d,o,l)}else if(n[0]){const c=e.type.isInline?s:s-1;a.insert(c,e.type.create(i)).delete(a.mapping.map(s),a.mapping.map(o))}a.scrollIntoView()},undoable:e.undoable})}function t5(e){return new S3({find:e.find,handler:({state:t,range:r,match:n})=>{const i=t.doc.resolve(r.from),a=Jn(e.getAttributes,void 0,n)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(r.from,r.to).setBlockType(r.from,r.from,e.type,a)},undoable:e.undoable})}function Sy(e){return new S3({find:e.find,handler:({state:t,range:r,match:n,chain:i})=>{const a=Jn(e.getAttributes,void 0,n)||{},s=t.tr.delete(r.from,r.to),l=s.doc.resolve(r.from).blockRange(),c=l&&j9(l,e.type,a);if(!c)return null;if(s.wrap(l,c),e.keepMarks&&e.editor){const{selection:f,storedMarks:p}=t,{splittableMarks:m}=e.editor.extensionManager,x=p||f.$to.parentOffset&&f.$from.marks();if(x){const v=x.filter(b=>m.includes(b.type.name));s.ensureMarks(v)}}if(e.keepAttributes){const f=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,a).run()}const d=s.doc.resolve(r.from-1).nodeBefore;d&&d.type===e.type&&J0(s.doc,r.from-1)&&(!e.joinPredicate||e.joinPredicate(n,d))&&s.join(r.from-1)},undoable:e.undoable})}var _Xe=e=>"touches"in e,NXe=class{constructor(e){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.lastEditableState=void 0,this.handleMap=new Map,this.handleMouseMove=o=>{if(!this.isResizing||!this.activeHandle)return;const l=o.clientX-this.startX,c=o.clientY-this.startY;this.handleResize(l,c)},this.handleTouchMove=o=>{if(!this.isResizing||!this.activeHandle)return;const l=o.touches[0];if(!l)return;const c=l.clientX-this.startX,d=l.clientY-this.startY;this.handleResize(c,d)},this.handleMouseUp=()=>{if(!this.isResizing)return;const o=this.element.offsetWidth,l=this.element.offsetHeight;this.onCommit(o,l),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=o=>{o.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=o=>{o.key==="Shift"&&(this.isShiftKeyPressed=!1)};var t,r,n,i,a,s;this.node=e.node,this.editor=e.editor,this.element=e.element,this.contentElement=e.contentElement,this.getPos=e.getPos,this.onResize=e.onResize,this.onCommit=e.onCommit,this.onUpdate=e.onUpdate,(t=e.options)!=null&&t.min&&(this.minSize={...this.minSize,...e.options.min}),(r=e.options)!=null&&r.max&&(this.maxSize=e.options.max),(n=e==null?void 0:e.options)!=null&&n.directions&&(this.directions=e.options.directions),(i=e.options)!=null&&i.preserveAspectRatio&&(this.preserveAspectRatio=e.options.preserveAspectRatio),(a=e.options)!=null&&a.className&&(this.classNames={container:e.options.className.container||"",wrapper:e.options.className.wrapper||"",handle:e.options.className.handle||"",resizing:e.options.className.resizing||""}),(s=e.options)!=null&&s.createCustomHandle&&(this.createCustomHandle=e.options.createCustomHandle),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles(),this.editor.on("update",this.handleEditorUpdate.bind(this))}get dom(){return this.container}get contentDOM(){return this.contentElement}handleEditorUpdate(){const e=this.editor.isEditable;e!==this.lastEditableState&&(this.lastEditableState=e,e?e&&this.handleMap.size===0&&this.attachHandles():this.removeHandles())}update(e,t,r){return e.type!==this.node.type?!1:(this.node=e,this.onUpdate?this.onUpdate(e,t,r):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.editor.off("update",this.handleEditorUpdate.bind(this)),this.container.remove()}createContainer(){const e=document.createElement("div");return e.dataset.resizeContainer="",e.dataset.node=this.node.type.name,e.style.display="flex",this.classNames.container&&(e.className=this.classNames.container),e.appendChild(this.wrapper),e}createWrapper(){const e=document.createElement("div");return e.style.position="relative",e.style.display="block",e.dataset.resizeWrapper="",this.classNames.wrapper&&(e.className=this.classNames.wrapper),e.appendChild(this.element),e}createHandle(e){const t=document.createElement("div");return t.dataset.resizeHandle=e,t.style.position="absolute",this.classNames.handle&&(t.className=this.classNames.handle),t}positionHandle(e,t){const r=t.includes("top"),n=t.includes("bottom"),i=t.includes("left"),a=t.includes("right");r&&(e.style.top="0"),n&&(e.style.bottom="0"),i&&(e.style.left="0"),a&&(e.style.right="0"),(t==="top"||t==="bottom")&&(e.style.left="0",e.style.right="0"),(t==="left"||t==="right")&&(e.style.top="0",e.style.bottom="0")}attachHandles(){this.directions.forEach(e=>{let t;this.createCustomHandle?t=this.createCustomHandle(e):t=this.createHandle(e),t instanceof HTMLElement||(console.warn(`[ResizableNodeView] createCustomHandle("${e}") did not return an HTMLElement. Falling back to default handle.`),t=this.createHandle(e)),this.createCustomHandle||this.positionHandle(t,e),t.addEventListener("mousedown",r=>this.handleResizeStart(r,e)),t.addEventListener("touchstart",r=>this.handleResizeStart(r,e)),this.handleMap.set(e,t),this.wrapper.appendChild(t)})}removeHandles(){this.handleMap.forEach(e=>e.remove()),this.handleMap.clear()}applyInitialSize(){const e=this.node.attrs.width,t=this.node.attrs.height;e?(this.element.style.width=`${e}px`,this.initialWidth=e):this.initialWidth=this.element.offsetWidth,t?(this.element.style.height=`${t}px`,this.initialHeight=t):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(e,t){e.preventDefault(),e.stopPropagation(),this.isResizing=!0,this.activeHandle=t,_Xe(e)?(this.startX=e.touches[0].clientX,this.startY=e.touches[0].clientY):(this.startX=e.clientX,this.startY=e.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(e,t){if(!this.activeHandle)return;const r=this.preserveAspectRatio||this.isShiftKeyPressed,{width:n,height:i}=this.calculateNewDimensions(this.activeHandle,e,t),a=this.applyConstraints(n,i,r);this.element.style.width=`${a.width}px`,this.element.style.height=`${a.height}px`,this.onResize&&this.onResize(a.width,a.height)}calculateNewDimensions(e,t,r){let n=this.startWidth,i=this.startHeight;const a=e.includes("right"),s=e.includes("left"),o=e.includes("bottom"),l=e.includes("top");return a?n=this.startWidth+t:s&&(n=this.startWidth-t),o?i=this.startHeight+r:l&&(i=this.startHeight-r),(e==="right"||e==="left")&&(n=this.startWidth+(a?t:-t)),(e==="top"||e==="bottom")&&(i=this.startHeight+(o?r:-r)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(n,i,e):{width:n,height:i}}applyConstraints(e,t,r){var n,i,a,s;if(!r){let c=Math.max(this.minSize.width,e),d=Math.max(this.minSize.height,t);return(n=this.maxSize)!=null&&n.width&&(c=Math.min(this.maxSize.width,c)),(i=this.maxSize)!=null&&i.height&&(d=Math.min(this.maxSize.height,d)),{width:c,height:d}}let o=e,l=t;return o<this.minSize.width&&(o=this.minSize.width,l=o/this.aspectRatio),l<this.minSize.height&&(l=this.minSize.height,o=l*this.aspectRatio),(a=this.maxSize)!=null&&a.width&&o>this.maxSize.width&&(o=this.maxSize.width,l=o/this.aspectRatio),(s=this.maxSize)!=null&&s.height&&l>this.maxSize.height&&(l=this.maxSize.height,o=l*this.aspectRatio),{width:o,height:l}}applyAspectRatio(e,t,r){const n=r==="left"||r==="right",i=r==="top"||r==="bottom";return n?{width:e,height:e/this.aspectRatio}:i?{width:t*this.aspectRatio,height:t}:{width:e,height:e/this.aspectRatio}}};function AXe(e,t){const{selection:r}=e,{$from:n}=r;if(r instanceof pr){const a=n.index();return n.parent.canReplaceWith(a,a+1,t)}let i=n.depth;for(;i>=0;){const a=n.index(i);if(n.node(i).contentMatchAt(a).matchType(t))return!0;i-=1}return!1}function TXe(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}var IXe={};Y9(IXe,{createAtomBlockMarkdownSpec:()=>OXe,createBlockMarkdownSpec:()=>PXe,createInlineMarkdownSpec:()=>nfe,parseAttributes:()=>iB,parseIndentedBlocks:()=>r5,renderNestedMarkdownContent:()=>sB,serializeAttributes:()=>aB});function iB(e){if(!(e!=null&&e.trim()))return{};const t={},r=[],n=e.replace(/["']([^"']*)["']/g,c=>(r.push(c),`__QUOTED_${r.length-1}__`)),i=n.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const c=i.map(d=>d.trim().slice(1));t.class=c.join(" ")}const a=n.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);a&&(t.id=a[1]);const s=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(n.matchAll(s)).forEach(([,c,d])=>{var f;const p=parseInt(((f=d.match(/__QUOTED_(\d+)__/))==null?void 0:f[1])||"0",10),m=r[p];m&&(t[c]=m.slice(1,-1))});const l=n.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(d=>{d.match(/^[a-zA-Z][\w-]*$/)&&(t[d]=!0)}),t}function aB(e){if(!e||Object.keys(e).length===0)return"";const t=[];return e.class&&String(e.class).split(/\s+/).filter(Boolean).forEach(n=>t.push(`.${n}`)),e.id&&t.push(`#${e.id}`),Object.entries(e).forEach(([r,n])=>{r==="class"||r==="id"||(n===!0?t.push(r):n!==!1&&n!=null&&t.push(`${r}="${String(n)}"`))}),t.join(" ")}function OXe(e){const{nodeName:t,name:r,parseAttributes:n=iB,serializeAttributes:i=aB,defaultAttributes:a={},requiredAttributes:s=[],allowedAttributes:o}=e,l=r||t,c=d=>{if(!o)return d;const f={};return o.forEach(p=>{p in d&&(f[p]=d[p])}),f};return{parseMarkdown:(d,f)=>{const p={...a,...d.attributes};return f.createNode(t,p,[])},markdownTokenizer:{name:t,level:"block",start(d){var f;const p=new RegExp(`^:::${l}(?:\\s|$)`,"m"),m=(f=d.match(p))==null?void 0:f.index;return m!==void 0?m:-1},tokenize(d,f,p){const m=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),x=d.match(m);if(!x)return;const v=x[1]||"",b=n(v);if(!s.find(_=>!(_ in b)))return{type:t,raw:x[0],attributes:b}}},renderMarkdown:d=>{const f=c(d.attrs||{}),p=i(f),m=p?` {${p}}`:"";return`:::${l}${m} :::`}}}function PXe(e){const{nodeName:t,name:r,getContent:n,parseAttributes:i=iB,serializeAttributes:a=aB,defaultAttributes:s={},content:o="block",allowedAttributes:l}=e,c=r||t,d=f=>{if(!l)return f;const p={};return l.forEach(m=>{m in f&&(p[m]=f[m])}),p};return{parseMarkdown:(f,p)=>{let m;if(n){const v=n(f);m=typeof v=="string"?[{type:"text",text:v}]:v}else o==="block"?m=p.parseChildren(f.tokens||[]):m=p.parseInline(f.tokens||[]);const x={...s,...f.attributes};return p.createNode(t,x,m)},markdownTokenizer:{name:t,level:"block",start(f){var p;const m=new RegExp(`^:::${c}`,"m"),x=(p=f.match(m))==null?void 0:p.index;return x!==void 0?x:-1},tokenize(f,p,m){var x;const v=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),b=f.match(v);if(!b)return;const[w,_=""]=b,C=i(_);let N=1;const R=w.length;let P="";const O=/^:::([\w-]*)(\s.*)?/gm,D=f.slice(R);for(O.lastIndex=0;;){const M=O.exec(D);if(M===null)break;const B=M.index,U=M[1];if(!((x=M[2])!=null&&x.endsWith(":::"))){if(U)N+=1;else if(N-=1,N===0){const H=D.slice(0,B);P=H.trim();const Z=f.slice(0,R+B+M[0].length);let ee=[];if(P)if(o==="block")for(ee=m.blockTokens(H),ee.forEach(V=>{V.text&&(!V.tokens||V.tokens.length===0)&&(V.tokens=m.inlineTokens(V.text))});ee.length>0;){const V=ee[ee.length-1];if(V.type==="paragraph"&&(!V.text||V.text.trim()===""))ee.pop();else break}else ee=m.inlineTokens(P);return{type:t,raw:Z,attributes:C,content:P,tokens:ee}}}}}},renderMarkdown:(f,p)=>{const m=d(f.attrs||{}),x=a(m),v=x?` {${x}}`:"",b=p.renderChildren(f.content||[],`

`);return`:::${c}${v}

${b}

:::`}}}function RXe(e){if(!e.trim())return{};const t={},r=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let n=r.exec(e);for(;n!==null;){const[,i,a,s]=n;t[i]=a||s,n=r.exec(e)}return t}function jXe(e){return Object.entries(e).filter(([,t])=>t!=null).map(([t,r])=>`${t}="${r}"`).join(" ")}function nfe(e){const{nodeName:t,name:r,getContent:n,parseAttributes:i=RXe,serializeAttributes:a=jXe,defaultAttributes:s={},selfClosing:o=!1,allowedAttributes:l}=e,c=r||t,d=p=>{if(!l)return p;const m={};return l.forEach(x=>{const v=typeof x=="string"?x:x.name,b=typeof x=="string"?void 0:x.skipIfDefault;if(v in p){const w=p[v];if(b!==void 0&&w===b)return;m[v]=w}}),m},f=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(p,m)=>{const x={...s,...p.attributes};if(o)return m.createNode(t,x);const v=n?n(p):p.content||"";return v?m.createNode(t,x,[m.createTextNode(v)]):m.createNode(t,x,[])},markdownTokenizer:{name:t,level:"inline",start(p){const m=o?new RegExp(`\\[${f}\\s*[^\\]]*\\]`):new RegExp(`\\[${f}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${f}\\]`),x=p.match(m),v=x==null?void 0:x.index;return v!==void 0?v:-1},tokenize(p,m,x){const v=o?new RegExp(`^\\[${f}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${f}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${f}\\]`),b=p.match(v);if(!b)return;let w="",_="";if(o){const[,N]=b;_=N}else{const[,N,R]=b;_=N,w=R||""}const C=i(_.trim());return{type:t,raw:b[0],content:w.trim(),attributes:C}}},renderMarkdown:p=>{let m="";n?m=n(p):p.content&&p.content.length>0&&(m=p.content.filter(w=>w.type==="text").map(w=>w.text).join(""));const x=d(p.attrs||{}),v=a(x),b=v?` ${v}`:"";return o?`[${c}${b}]`:`[${c}${b}]${m}[/${c}]`}}}function r5(e,t,r){var n,i,a,s;const o=e.split(`
`),l=[];let c="",d=0;const f=t.baseIndentSize||2;for(;d<o.length;){const p=o[d],m=p.match(t.itemPattern);if(!m){if(l.length>0)break;if(p.trim()===""){d+=1,c=`${c}${p}
`;continue}else return}const x=t.extractItemData(m),{indentLevel:v,mainContent:b}=x;c=`${c}${p}
`;const w=[b];for(d+=1;d<o.length;){const R=o[d];if(R.trim()===""){const O=o.slice(d+1).findIndex(B=>B.trim()!=="");if(O===-1)break;if((((i=(n=o[d+1+O].match(/^(\s*)/))==null?void 0:n[1])==null?void 0:i.length)||0)>v){w.push(R),c=`${c}${R}
`,d+=1;continue}else break}if((((s=(a=R.match(/^(\s*)/))==null?void 0:a[1])==null?void 0:s.length)||0)>v)w.push(R),c=`${c}${R}
`,d+=1;else break}let _;const C=w.slice(1);if(C.length>0){const R=C.map(P=>P.slice(v+f)).join(`
`);R.trim()&&(t.customNestedParser?_=t.customNestedParser(R):_=r.blockTokens(R))}const N=t.createToken(x,_);l.push(N)}if(l.length!==0)return{items:l,raw:c}}function sB(e,t,r,n){if(!e||!Array.isArray(e.content))return"";const i=typeof r=="function"?r(n):r,[a,...s]=e.content,o=t.renderChildren([a]),l=[`${i}${o}`];return s&&s.length>0&&s.forEach(c=>{const d=t.renderChildren([c]);if(d){const f=d.split(`
`).map(p=>p?t.indent(p):"").join(`
`);l.push(f)}}),l.join(`
`)}function DXe(e,t,r={}){const{state:n}=t,{doc:i,tr:a}=n,s=e;i.descendants((o,l)=>{const c=a.mapping.map(l),d=a.mapping.map(l)+o.nodeSize;let f=null;if(o.marks.forEach(m=>{if(m!==s)return!1;f=m}),!f)return;let p=!1;if(Object.keys(r).forEach(m=>{r[m]!==f.attrs[m]&&(p=!0)}),p){const m=e.type.create({...e.attrs,...r});a.removeMark(c,d,e.type),a.addMark(c,d,m)}}),a.docChanged&&t.view.dispatch(a)}var Xo=class ife extends nB{constructor(){super(...arguments),this.type="node"}static create(t={}){const r=typeof t=="function"?t():t;return new ife(r)}configure(t){return super.configure(t)}extend(t){const r=typeof t=="function"?t():t;return super.extend(r)}},MXe=class{constructor(e,t,r){this.isDragging=!1,this.component=e,this.editor=t.editor,this.options={stopEvent:null,ignoreMutation:null,...r},this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.innerDecorations=t.innerDecorations,this.view=t.view,this.HTMLAttributes=t.HTMLAttributes,this.getPos=t.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var t,r,n,i,a,s,o;const{view:l}=this.editor,c=e.target,d=c.nodeType===3?(t=c.parentElement)==null?void 0:t.closest("[data-drag-handle]"):c.closest("[data-drag-handle]");if(!this.dom||(r=this.contentDOM)!=null&&r.contains(c)||!d)return;let f=0,p=0;if(this.dom!==d){const _=this.dom.getBoundingClientRect(),C=d.getBoundingClientRect(),N=(i=e.offsetX)!=null?i:(n=e.nativeEvent)==null?void 0:n.offsetX,R=(s=e.offsetY)!=null?s:(a=e.nativeEvent)==null?void 0:a.offsetY;f=C.x-_.x+N,p=C.y-_.y+R}const m=this.dom.cloneNode(!0);try{const _=this.dom.getBoundingClientRect();m.style.width=`${Math.round(_.width)}px`,m.style.height=`${Math.round(_.height)}px`,m.style.boxSizing="border-box",m.style.pointerEvents="none"}catch{}let x=null;try{x=document.createElement("div"),x.style.position="absolute",x.style.top="-9999px",x.style.left="-9999px",x.style.pointerEvents="none",x.appendChild(m),document.body.appendChild(x),(o=e.dataTransfer)==null||o.setDragImage(m,f,p)}finally{x&&setTimeout(()=>{try{x==null||x.remove()}catch{}},0)}const v=this.getPos();if(typeof v!="number")return;const b=pr.create(l.state.doc,v),w=l.state.tr.setSelection(b);l.dispatch(w)}stopEvent(e){var t;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const r=e.target;if(!(this.dom.contains(r)&&!((t=this.contentDOM)!=null&&t.contains(r))))return!1;const i=e.type.startsWith("drag"),a=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!a&&!i)return!0;const{isEditable:o}=this.editor,{isDragging:l}=this,c=!!this.node.type.spec.draggable,d=pr.isSelectable(this.node),f=e.type==="copy",p=e.type==="paste",m=e.type==="cut",x=e.type==="mousedown";if(!c&&d&&i&&e.target===this.dom&&e.preventDefault(),c&&i&&!l&&e.target===this.dom)return e.preventDefault(),!1;if(c&&o&&!l&&x){const v=r.closest("[data-drag-handle]");v&&(this.dom===v||this.dom.contains(v))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(l||a||f||p||m||x&&d)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(v3()||Nde())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:t})=>{const r=this.getPos();return typeof r!="number"?!1:(t.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if(typeof e!="number")return;const t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}};function lx(e){return new gXe({find:e.find,handler:({state:t,range:r,match:n,pasteEvent:i})=>{const a=Jn(e.getAttributes,void 0,n,i);if(a===!1||a===null)return null;const{tr:s}=t,o=n[n.length-1],l=n[0];let c=r.to;if(o){const d=l.search(/\S/),f=r.from+l.indexOf(o),p=f+o.length;if(rB(r.from,r.to,t.doc).filter(x=>x.mark.type.excluded.find(b=>b===e.type&&b!==x.mark.type)).filter(x=>x.to>f).length)return null;p<r.to&&s.delete(p,r.to),f>r.from&&s.delete(r.from+d,f),c=r.from+d+o.length,s.addMark(r.from+d,c,e.type.create(a||{})),s.removeStoredMark(e.type)}}})}var FXe=Object.getOwnPropertyNames,LXe=Object.getOwnPropertySymbols,BXe=Object.prototype.hasOwnProperty;function GX(e,t){return function(n,i,a){return e(n,i,a)&&t(n,i,a)}}function F_(e){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,i);var a=i.cache,s=a.get(r),o=a.get(n);if(s&&o)return s===n&&o===r;a.set(r,n),a.set(n,r);var l=e(r,n,i);return a.delete(r),a.delete(n),l}}function UXe(e){return e!=null?e[Symbol.toStringTag]:void 0}function KX(e){return FXe(e).concat(LXe(e))}var $Xe=Object.hasOwn||function(e,t){return BXe.call(e,t)};function qx(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var zXe="__v",HXe="__o",WXe="_owner",XX=Object.getOwnPropertyDescriptor,YX=Object.keys;function VXe(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function qXe(e,t){return qx(e.getTime(),t.getTime())}function GXe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function KXe(e,t){return e===t}function QX(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var i=new Array(n),a=e.entries(),s,o,l=0;(s=a.next())&&!s.done;){for(var c=t.entries(),d=!1,f=0;(o=c.next())&&!o.done;){if(i[f]){f++;continue}var p=s.value,m=o.value;if(r.equals(p[0],m[0],l,f,e,t,r)&&r.equals(p[1],m[1],p[0],m[0],e,t,r)){d=i[f]=!0;break}f++}if(!d)return!1;l++}return!0}var XXe=qx;function YXe(e,t,r){var n=YX(e),i=n.length;if(YX(t).length!==i)return!1;for(;i-- >0;)if(!afe(e,t,r,n[i]))return!1;return!0}function Nw(e,t,r){var n=KX(e),i=n.length;if(KX(t).length!==i)return!1;for(var a,s,o;i-- >0;)if(a=n[i],!afe(e,t,r,a)||(s=XX(e,a),o=XX(t,a),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function QXe(e,t){return qx(e.valueOf(),t.valueOf())}function JXe(e,t){return e.source===t.source&&e.flags===t.flags}function JX(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var i=new Array(n),a=e.values(),s,o;(s=a.next())&&!s.done;){for(var l=t.values(),c=!1,d=0;(o=l.next())&&!o.done;){if(!i[d]&&r.equals(s.value,o.value,s.value,o.value,e,t,r)){c=i[d]=!0;break}d++}if(!c)return!1}return!0}function ZXe(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function eYe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function afe(e,t,r,n){return(n===WXe||n===HXe||n===zXe)&&(e.$$typeof||t.$$typeof)?!0:$Xe(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var tYe="[object Arguments]",rYe="[object Boolean]",nYe="[object Date]",iYe="[object Error]",aYe="[object Map]",sYe="[object Number]",oYe="[object Object]",lYe="[object RegExp]",cYe="[object Set]",uYe="[object String]",dYe="[object URL]",fYe=Array.isArray,ZX=typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView:null,eY=Object.assign,hYe=Object.prototype.toString.call.bind(Object.prototype.toString);function pYe(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,i=e.areFunctionsEqual,a=e.areMapsEqual,s=e.areNumbersEqual,o=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,p=e.areUrlsEqual,m=e.unknownTagComparators;return function(v,b,w){if(v===b)return!0;if(v==null||b==null)return!1;var _=typeof v;if(_!==typeof b)return!1;if(_!=="object")return _==="number"?s(v,b,w):_==="function"?i(v,b,w):!1;var C=v.constructor;if(C!==b.constructor)return!1;if(C===Object)return o(v,b,w);if(fYe(v))return t(v,b,w);if(ZX!=null&&ZX(v))return f(v,b,w);if(C===Date)return r(v,b,w);if(C===RegExp)return c(v,b,w);if(C===Map)return a(v,b,w);if(C===Set)return d(v,b,w);var N=hYe(v);if(N===nYe)return r(v,b,w);if(N===lYe)return c(v,b,w);if(N===aYe)return a(v,b,w);if(N===cYe)return d(v,b,w);if(N===oYe)return typeof v.then!="function"&&typeof b.then!="function"&&o(v,b,w);if(N===dYe)return p(v,b,w);if(N===iYe)return n(v,b,w);if(N===tYe)return o(v,b,w);if(N===rYe||N===sYe||N===uYe)return l(v,b,w);if(m){var R=m[N];if(!R){var P=UXe(v);P&&(R=m[P])}if(R)return R(v,b,w)}return!1}}function mYe(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,i={areArraysEqual:n?Nw:VXe,areDatesEqual:qXe,areErrorsEqual:GXe,areFunctionsEqual:KXe,areMapsEqual:n?GX(QX,Nw):QX,areNumbersEqual:XXe,areObjectsEqual:n?Nw:YXe,arePrimitiveWrappersEqual:QXe,areRegExpsEqual:JXe,areSetsEqual:n?GX(JX,Nw):JX,areTypedArraysEqual:n?Nw:ZXe,areUrlsEqual:eYe,unknownTagComparators:void 0};if(r&&(i=eY({},i,r(i))),t){var a=F_(i.areArraysEqual),s=F_(i.areMapsEqual),o=F_(i.areObjectsEqual),l=F_(i.areSetsEqual);i=eY({},i,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:l})}return i}function gYe(e){return function(t,r,n,i,a,s,o){return e(t,r,o)}}function xYe(e){var t=e.circular,r=e.comparator,n=e.createState,i=e.equals,a=e.strict;if(n)return function(l,c){var d=n(),f=d.cache,p=f===void 0?t?new WeakMap:void 0:f,m=d.meta;return r(l,c,{cache:p,equals:i,meta:m,strict:a})};if(t)return function(l,c){return r(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var s={cache:void 0,equals:i,meta:void 0,strict:a};return function(l,c){return r(l,c,s)}}var vYe=em();em({strict:!0});em({circular:!0});em({circular:!0,strict:!0});em({createInternalComparator:function(){return qx}});em({strict:!0,createInternalComparator:function(){return qx}});em({circular:!0,createInternalComparator:function(){return qx}});em({circular:!0,createInternalComparator:function(){return qx},strict:!0});function em(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,i=e.createState,a=e.strict,s=a===void 0?!1:a,o=mYe(e),l=pYe(o),c=n?n(l):gYe(l);return xYe({circular:r,comparator:l,createState:i,equals:c,strict:s})}var sfe={exports:{}},ofe={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C3=I,yYe=O9;function bYe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wYe=typeof Object.is=="function"?Object.is:bYe,SYe=yYe.useSyncExternalStore,EYe=C3.useRef,CYe=C3.useEffect,kYe=C3.useMemo,_Ye=C3.useDebugValue;ofe.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var a=EYe(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=kYe(function(){function l(m){if(!c){if(c=!0,d=m,m=n(m),i!==void 0&&s.hasValue){var x=s.value;if(i(x,m))return f=x}return f=m}if(x=f,wYe(d,m))return x;var v=n(m);return i!==void 0&&i(x,v)?(d=m,x):(d=m,f=v)}var c=!1,d,f,p=r===void 0?null:r;return[function(){return l(t())},p===null?void 0:function(){return l(p())}]},[t,r,n,i]);var o=SYe(e,a[0],a[1]);return CYe(function(){s.hasValue=!0,s.value=o},[o]),_Ye(o),o};sfe.exports=ofe;var lfe=sfe.exports,NYe=(...e)=>t=>{e.forEach(r=>{typeof r=="function"?r(t):r&&(r.current=t)})},AYe=({contentComponent:e})=>{const t=O9.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return u.jsx(u.Fragment,{children:Object.values(t)})};function TYe(){const e=new Set;let t={};return{subscribe(r){return e.add(r),()=>{e.delete(r)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(r,n){t={...t,[r]:EL.createPortal(n.reactElement,n.element,r)},e.forEach(i=>i())},removeRenderer(r){const n={...t};delete n[r],t=n,e.forEach(i=>i())}}}var IYe=class extends Hr.Component{constructor(e){var t;super(e),this.editorContentRef=Hr.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(e.view.dom),e.setOptions({element:t}),e.contentComponent=TYe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((e=t.view.dom)!=null&&e.firstChild))return;const r=document.createElement("div");r.append(t.view.dom),t.setOptions({element:r})}catch{}}}render(){const{editor:e,innerRef:t,...r}=this.props;return u.jsxs(u.Fragment,{children:[u.jsx("div",{ref:NYe(t,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&u.jsx(AYe,{contentComponent:e.contentComponent})]})}},OYe=I.forwardRef((e,t)=>{const r=Hr.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return Hr.createElement(IYe,{key:r,innerRef:t,...e})}),PYe=Hr.memo(OYe),RYe=typeof window<"u"?I.useLayoutEffect:I.useEffect,jYe=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(n=>n())},r=this.editor;return r.on("transaction",t),()=>{r.off("transaction",t)}}}};function DYe(e){var t;const[r]=I.useState(()=>new jYe(e.editor)),n=lfe.useSyncExternalStoreWithSelector(r.subscribe,r.getSnapshot,r.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:vYe);return RYe(()=>r.watch(e.editor),[e.editor,r]),I.useDebugValue(n),n}var MYe=!1,n5=typeof window>"u",FYe=n5||!!(typeof window<"u"&&window.next),LYe=class cfe{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(r=>r())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?n5||FYe?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...n)=>{var i,a;return(a=(i=this.options.current).onBeforeCreate)==null?void 0:a.call(i,...n)},onBlur:(...n)=>{var i,a;return(a=(i=this.options.current).onBlur)==null?void 0:a.call(i,...n)},onCreate:(...n)=>{var i,a;return(a=(i=this.options.current).onCreate)==null?void 0:a.call(i,...n)},onDestroy:(...n)=>{var i,a;return(a=(i=this.options.current).onDestroy)==null?void 0:a.call(i,...n)},onFocus:(...n)=>{var i,a;return(a=(i=this.options.current).onFocus)==null?void 0:a.call(i,...n)},onSelectionUpdate:(...n)=>{var i,a;return(a=(i=this.options.current).onSelectionUpdate)==null?void 0:a.call(i,...n)},onTransaction:(...n)=>{var i,a;return(a=(i=this.options.current).onTransaction)==null?void 0:a.call(i,...n)},onUpdate:(...n)=>{var i,a;return(a=(i=this.options.current).onUpdate)==null?void 0:a.call(i,...n)},onContentError:(...n)=>{var i,a;return(a=(i=this.options.current).onContentError)==null?void 0:a.call(i,...n)},onDrop:(...n)=>{var i,a;return(a=(i=this.options.current).onDrop)==null?void 0:a.call(i,...n)},onPaste:(...n)=>{var i,a;return(a=(i=this.options.current).onPaste)==null?void 0:a.call(i,...n)},onDelete:(...n)=>{var i,a;return(a=(i=this.options.current).onDelete)==null?void 0:a.call(i,...n)}};return new kXe(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,r){return Object.keys(t).every(n=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)?!0:n==="extensions"&&t.extensions&&r.extensions?t.extensions.length!==r.extensions.length?!1:t.extensions.every((i,a)=>{var s;return i===((s=r.extensions)==null?void 0:s[a])}):t[n]===r[n])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?cfe.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((n,i)=>n===t[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,r=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){r&&r.setOptions(this.options.current);return}r&&!r.isDestroyed&&(r.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function BYe(e={},t=[]){const r=I.useRef(e);r.current=e;const[n]=I.useState(()=>new LYe(r)),i=O9.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return I.useDebugValue(i),I.useEffect(n.onRender(t)),DYe({editor:i,selector:({transactionNumber:a})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&a===0?0:a+1}),i}var UYe=I.createContext({editor:null});UYe.Consumer;var ufe=I.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),$Ye=()=>I.useContext(ufe),zYe=Hr.forwardRef((e,t)=>{const{onDragStart:r}=$Ye(),n=e.as||"div";return u.jsx(n,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...e.style}})});function tY(e){return!!(typeof e=="function"&&e.prototype&&e.prototype.isReactComponent)}function rY(e){return!!(typeof e=="object"&&e.$$typeof&&(e.$$typeof.toString()==="Symbol(react.forward_ref)"||e.$$typeof.description==="react.forward_ref"))}function HYe(e){return!!(typeof e=="object"&&e.$$typeof&&(e.$$typeof.toString()==="Symbol(react.memo)"||e.$$typeof.description==="react.memo"))}function WYe(e){if(tY(e)||rY(e))return!0;if(HYe(e)){const t=e.type;if(t)return tY(t)||rY(t)}return!1}function VYe(){try{if(I.version)return parseInt(I.version.split(".")[0],10)>=19}catch{}return!1}var dfe=class{constructor(e,{editor:t,props:r={},as:n="div",className:i=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=t,this.props=r,this.element=document.createElement(n),this.element.classList.add("react-renderer"),i&&this.element.classList.add(...i.split(" ")),this.editor.isInitialized?Tl.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.render()})}render(){var e;const t=this.component,r=this.props,n=this.editor,i=VYe(),a=WYe(t),s={...r};s.ref&&!(i||a)&&delete s.ref,!s.ref&&(i||a)&&(s.ref=o=>{this.ref=o}),this.reactElement=u.jsx(t,{...s}),(e=n==null?void 0:n.contentComponent)==null||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;const t=this.editor;(e=t==null?void 0:t.contentComponent)==null||e.removeRenderer(this.id);try{this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}catch{}}updateAttributes(e){Object.keys(e).forEach(t=>{this.element.setAttribute(t,e[t])})}};Hr.createContext({markViewContentRef:()=>{}});var qYe=class extends MXe{constructor(e,t,r){if(super(e,t,r),this.selectionRafId=null,!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const n=this.dom.querySelector("[data-node-view-content]");if(!n)return;n.appendChild(this.contentDOMElement)}}mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(l={})=>this.updateAttributes(l),deleteNode:()=>this.deleteNode(),ref:I.createRef()};if(!this.component.displayName){const l=c=>c.charAt(0).toUpperCase()+c.substring(1);this.component.displayName=l(this.extension.name)}const n={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:l=>{l&&this.contentDOMElement&&l.firstChild!==this.contentDOMElement&&(l.hasAttribute("data-node-view-wrapper")&&l.removeAttribute("data-node-view-wrapper"),l.appendChild(this.contentDOMElement))}},i=this.component,a=I.memo(l=>u.jsx(ufe.Provider,{value:n,children:I.createElement(i,l)}));a.displayName="ReactNodeView";let s=this.node.isInline?"span":"div";this.options.as&&(s=this.options.as);const{className:o=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new dfe(a,{editor:this.editor,props:e,as:s,className:`node-${this.node.type.name} ${o}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!((e=this.renderer.element.firstElementChild)!=null&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){this.selectionRafId&&(cancelAnimationFrame(this.selectionRafId),this.selectionRafId=null),this.selectionRafId=requestAnimationFrame(()=>{this.selectionRafId=null;const{from:e,to:t}=this.editor.state.selection,r=this.getPos();if(typeof r=="number")if(e<=r&&t>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}})}update(e,t,r){const n=i=>{this.renderer.updateProps(i),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const i=this.node,a=this.decorations,s=this.innerDecorations;return this.node=e,this.decorations=t,this.innerDecorations=r,this.options.update({oldNode:i,oldDecorations:a,newNode:e,newDecorations:t,oldInnerDecorations:s,innerDecorations:r,updateProps:()=>n({node:e,decorations:t,innerDecorations:r})})}return e===this.node&&this.decorations===t&&this.innerDecorations===r||(this.node=e,this.decorations=t,this.innerDecorations=r,n({node:e,decorations:t,innerDecorations:r})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null,this.selectionRafId&&(cancelAnimationFrame(this.selectionRafId),this.selectionRafId=null)}updateElementAttributes(){if(this.options.attrs){let e={};if(typeof this.options.attrs=="function"){const t=this.editor.extensionManager.attributes,r=IS(this.node,t);e=this.options.attrs({node:this.node,HTMLAttributes:r})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}};function GYe(e,t){return r=>r.editor.contentComponent?new qYe(e,r,t):{}}var DT=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:r,...n}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,n,r]},KYe=/^\s*>\s$/,XYe=Xo.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return DT("blockquote",{...Ci(this.options.HTMLAttributes,e),children:DT("slot",{})})},parseMarkdown:(e,t)=>t.createNode("blockquote",void 0,t.parseChildren(e.tokens||[])),renderMarkdown:(e,t)=>{if(!e.content)return"";const r=">",n=[];return e.content.forEach(i=>{const o=t.renderChildren([i]).split(`
`).map(l=>l.trim()===""?r:`${r} ${l}`);n.push(o.join(`
`))}),n.join(`
${r}
`)},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Sy({find:KYe,type:this.type})]}}),YYe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,QYe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,JYe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,ZYe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,eQe=Vx.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return DT("strong",{...Ci(this.options.HTMLAttributes,e),children:DT("slot",{})})},markdownTokenName:"strong",parseMarkdown:(e,t)=>t.applyMark("bold",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`**${t.renderChildren(e)}**`,addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[wy({find:YYe,type:this.type}),wy({find:JYe,type:this.type})]},addPasteRules(){return[lx({find:QYe,type:this.type}),lx({find:ZYe,type:this.type})]}}),tQe=/(^|[^`])`([^`]+)`(?!`)$/,rQe=/(^|[^`])`([^`]+)`(?!`)/g,nQe=Vx.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",Ci(this.options.HTMLAttributes,e),0]},markdownTokenName:"codespan",parseMarkdown:(e,t)=>t.applyMark("code",[{type:"text",text:e.text||""}]),renderMarkdown:(e,t)=>e.content?`\`${t.renderChildren(e.content)}\``:"",addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[wy({find:tQe,type:this.type})]},addPasteRules(){return[lx({find:rQe,type:this.type})]}}),ID=4,iQe=/^```([a-z]+)?[\s\n]$/,aQe=/^~~~([a-z]+)?[\s\n]$/,sQe=Xo.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:ID,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:r}=this.options;if(!r)return null;const a=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(s=>s.startsWith(r)).map(s=>s.replace(r,""))[0];return a||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",Ci(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(e,t)=>{var r;return((r=e.raw)==null?void 0:r.startsWith("```"))===!1&&e.codeBlockStyle!=="indented"?[]:t.createNode("codeBlock",{language:e.lang||null},e.text?[t.createTextNode(e.text)]:[])},renderMarkdown:(e,t)=>{var r;let n="";const i=((r=e.attrs)==null?void 0:r.language)||"";return e.content?n=[`\`\`\`${i}`,t.renderChildren(e.content),"```"].join(`
`):n=`\`\`\`${i}

\`\`\``,n},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,r=t.pos===1;return!e||t.parent.type.name!==this.name?!1:r||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const r=(t=this.options.tabSize)!=null?t:ID,{state:n}=e,{selection:i}=n,{$from:a,empty:s}=i;if(a.parent.type!==this.type)return!1;const o=" ".repeat(r);return s?e.commands.insertContent(o):e.commands.command(({tr:l})=>{const{from:c,to:d}=i,m=n.doc.textBetween(c,d,`
`,`
`).split(`
`).map(x=>o+x).join(`
`);return l.replaceWith(c,d,n.schema.text(m)),!0})},"Shift-Tab":({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const r=(t=this.options.tabSize)!=null?t:ID,{state:n}=e,{selection:i}=n,{$from:a,empty:s}=i;return a.parent.type!==this.type?!1:s?e.commands.command(({tr:o})=>{var l;const{pos:c}=a,d=a.start(),f=a.end(),m=n.doc.textBetween(d,f,`
`,`
`).split(`
`);let x=0,v=0;const b=c-d;for(let P=0;P<m.length;P+=1){if(v+m[P].length>=b){x=P;break}v+=m[P].length+1}const _=((l=m[x].match(/^ */))==null?void 0:l[0])||"",C=Math.min(_.length,r);if(C===0)return!0;let N=d;for(let P=0;P<x;P+=1)N+=m[P].length+1;return o.delete(N,N+C),c-N<=C&&o.setSelection(Ur.create(o.doc,N)),!0}):e.commands.command(({tr:o})=>{const{from:l,to:c}=i,p=n.doc.textBetween(l,c,`
`,`
`).split(`
`).map(m=>{var x;const v=((x=m.match(/^ */))==null?void 0:x[0])||"",b=Math.min(v.length,r);return m.slice(b)}).join(`
`);return o.replaceWith(l,c,n.schema.text(p)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:r}=t,{$from:n,empty:i}=r;if(!i||n.parent.type!==this.type)return!1;const a=n.parentOffset===n.parent.nodeSize-2,s=n.parent.textContent.endsWith(`

`);return!a||!s?!1:e.chain().command(({tr:o})=>(o.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:r,doc:n}=t,{$from:i,empty:a}=r;if(!a||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const o=i.after();return o===void 0?!1:n.nodeAt(o)?e.commands.command(({tr:c})=>(c.setSelection(dn.near(n.resolve(o))),!0)):e.commands.exitCode()}}},addInputRules(){return[t5({find:iQe,type:this.type,getAttributes:e=>({language:e[1]})}),t5({find:aQe,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new Fi({key:new va("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const r=t.clipboardData.getData("text/plain"),n=t.clipboardData.getData("vscode-editor-data"),i=n?JSON.parse(n):void 0,a=i==null?void 0:i.mode;if(!r||!a)return!1;const{tr:s,schema:o}=e.state,l=o.text(r.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:a},l)),s.selection.$from.parent.type!==this.type&&s.setSelection(Ur.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),e.dispatch(s),!0}}})]}}),oQe=Xo.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`

`):""}),lQe=Xo.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",Ci(this.options.HTMLAttributes,e)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:r,editor:n})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:i,storedMarks:a}=r;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:o}=n.extensionManager,l=a||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:c,dispatch:d})=>{if(d&&l&&s){const f=l.filter(p=>o.includes(p.type.name));c.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),ffe=Xo.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,Ci(this.options.HTMLAttributes,t),0]},parseMarkdown:(e,t)=>t.createNode("heading",{level:e.depth||1},t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>{var r;const n=(r=e.attrs)!=null&&r.level?parseInt(e.attrs.level,10):1,i="#".repeat(n);return e.content?`${i} ${t.renderChildren(e.content)}`:""},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>t5({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),cQe=ffe,uQe=Xo.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",Ci(this.options.HTMLAttributes,e)]},markdownTokenName:"hr",parseMarkdown:(e,t)=>t.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!AXe(t,t.schema.nodes[this.name]))return!1;const{selection:r}=t,{$to:n}=r,i=e();return Bde(r)?i.insertContentAt(n.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:a,tr:s,dispatch:o})=>{if(o){const{$to:l}=s.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?s.setSelection(Ur.create(s.doc,l.pos+1)):l.nodeAfter.isBlock?s.setSelection(pr.create(s.doc,l.pos)):s.setSelection(Ur.create(s.doc,l.pos));else{const d=a.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,f=d==null?void 0:d.create();f&&(s.insert(c,f),s.setSelection(Ur.create(s.doc,c+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[rfe({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),dQe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,fQe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,hQe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,pQe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,mQe=Vx.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",Ci(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(e,t)=>t.applyMark("italic",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`*${t.renderChildren(e)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[wy({find:dQe,type:this.type}),wy({find:hQe,type:this.type})]},addPasteRules(){return[lx({find:fQe,type:this.type}),lx({find:pQe,type:this.type})]}});const gQe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",xQe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",i5="numeric",a5="ascii",s5="alpha",A2="asciinumeric",e2="alphanumeric",o5="domain",hfe="emoji",vQe="scheme",yQe="slashscheme",OD="whitespace";function bQe(e,t){return e in t||(t[e]=[]),t[e]}function sg(e,t,r){t[i5]&&(t[A2]=!0,t[e2]=!0),t[a5]&&(t[A2]=!0,t[s5]=!0),t[A2]&&(t[e2]=!0),t[s5]&&(t[e2]=!0),t[e2]&&(t[o5]=!0),t[hfe]&&(t[o5]=!0);for(const n in t){const i=bQe(n,r);i.indexOf(e)<0&&i.push(e)}}function wQe(e,t){const r={};for(const n in t)t[n].indexOf(e)>=0&&(r[n]=!0);return r}function ul(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}ul.groups={};ul.prototype={accepts(){return!!this.t},go(e){const t=this,r=t.j[e];if(r)return r;for(let n=0;n<t.jr.length;n++){const i=t.jr[n][0],a=t.jr[n][1];if(a&&i.test(e))return a}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,r,n){for(let i=0;i<e.length;i++)this.tt(e[i],t,r,n)},tr(e,t,r,n){n=n||ul.groups;let i;return t&&t.j?i=t:(i=new ul(t),r&&n&&sg(t,r,n)),this.jr.push([e,i]),i},ts(e,t,r,n){let i=this;const a=e.length;if(!a)return i;for(let s=0;s<a-1;s++)i=i.tt(e[s]);return i.tt(e[a-1],t,r,n)},tt(e,t,r,n){n=n||ul.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const a=t;let s,o=i.go(e);if(o?(s=new ul,Object.assign(s.j,o.j),s.jr.push.apply(s.jr,o.jr),s.jd=o.jd,s.t=o.t):s=new ul,a){if(n)if(s.t&&typeof s.t=="string"){const l=Object.assign(wQe(s.t,n),r);sg(a,l,n)}else r&&sg(a,r,n);s.t=a}return i.j[e]=s,s}};const cn=(e,t,r,n,i)=>e.ta(t,r,n,i),Yi=(e,t,r,n,i)=>e.tr(t,r,n,i),nY=(e,t,r,n,i)=>e.ts(t,r,n,i),Rt=(e,t,r,n,i)=>e.tt(t,r,n,i),Qf="WORD",l5="UWORD",pfe="ASCIINUMERICAL",mfe="ALPHANUMERICAL",OS="LOCALHOST",c5="TLD",u5="UTLD",YN="SCHEME",q1="SLASH_SCHEME",oB="NUM",d5="WS",lB="NL",T2="OPENBRACE",I2="CLOSEBRACE",MT="OPENBRACKET",FT="CLOSEBRACKET",LT="OPENPAREN",BT="CLOSEPAREN",UT="OPENANGLEBRACKET",$T="CLOSEANGLEBRACKET",zT="FULLWIDTHLEFTPAREN",HT="FULLWIDTHRIGHTPAREN",WT="LEFTCORNERBRACKET",VT="RIGHTCORNERBRACKET",qT="LEFTWHITECORNERBRACKET",GT="RIGHTWHITECORNERBRACKET",KT="FULLWIDTHLESSTHAN",XT="FULLWIDTHGREATERTHAN",YT="AMPERSAND",QT="APOSTROPHE",JT="ASTERISK",Bp="AT",ZT="BACKSLASH",eI="BACKTICK",tI="CARET",Gp="COLON",cB="COMMA",rI="DOLLAR",Od="DOT",nI="EQUALS",uB="EXCLAMATION",Fc="HYPHEN",O2="PERCENT",iI="PIPE",aI="PLUS",sI="POUND",P2="QUERY",dB="QUOTE",gfe="FULLWIDTHMIDDLEDOT",fB="SEMI",Pd="SLASH",R2="TILDE",oI="UNDERSCORE",xfe="EMOJI",lI="SYM";var vfe=Object.freeze({__proto__:null,ALPHANUMERICAL:mfe,AMPERSAND:YT,APOSTROPHE:QT,ASCIINUMERICAL:pfe,ASTERISK:JT,AT:Bp,BACKSLASH:ZT,BACKTICK:eI,CARET:tI,CLOSEANGLEBRACKET:$T,CLOSEBRACE:I2,CLOSEBRACKET:FT,CLOSEPAREN:BT,COLON:Gp,COMMA:cB,DOLLAR:rI,DOT:Od,EMOJI:xfe,EQUALS:nI,EXCLAMATION:uB,FULLWIDTHGREATERTHAN:XT,FULLWIDTHLEFTPAREN:zT,FULLWIDTHLESSTHAN:KT,FULLWIDTHMIDDLEDOT:gfe,FULLWIDTHRIGHTPAREN:HT,HYPHEN:Fc,LEFTCORNERBRACKET:WT,LEFTWHITECORNERBRACKET:qT,LOCALHOST:OS,NL:lB,NUM:oB,OPENANGLEBRACKET:UT,OPENBRACE:T2,OPENBRACKET:MT,OPENPAREN:LT,PERCENT:O2,PIPE:iI,PLUS:aI,POUND:sI,QUERY:P2,QUOTE:dB,RIGHTCORNERBRACKET:VT,RIGHTWHITECORNERBRACKET:GT,SCHEME:YN,SEMI:fB,SLASH:Pd,SLASH_SCHEME:q1,SYM:lI,TILDE:R2,TLD:c5,UNDERSCORE:oI,UTLD:u5,UWORD:l5,WORD:Qf,WS:d5});const Gf=/[a-z]/,Aw=new RegExp("\\p{L}","u"),PD=new RegExp("\\p{Emoji}","u"),Kf=/\d/,RD=/\s/,iY="\r",jD=`
`,SQe="",EQe="",DD="";let L_=null,B_=null;function CQe(e=[]){const t={};ul.groups=t;const r=new ul;L_==null&&(L_=aY(gQe)),B_==null&&(B_=aY(xQe)),Rt(r,"'",QT),Rt(r,"{",T2),Rt(r,"}",I2),Rt(r,"[",MT),Rt(r,"]",FT),Rt(r,"(",LT),Rt(r,")",BT),Rt(r,"<",UT),Rt(r,">",$T),Rt(r,"",zT),Rt(r,"",HT),Rt(r,"",WT),Rt(r,"",VT),Rt(r,"",qT),Rt(r,"",GT),Rt(r,"",KT),Rt(r,"",XT),Rt(r,"&",YT),Rt(r,"*",JT),Rt(r,"@",Bp),Rt(r,"`",eI),Rt(r,"^",tI),Rt(r,":",Gp),Rt(r,",",cB),Rt(r,"$",rI),Rt(r,".",Od),Rt(r,"=",nI),Rt(r,"!",uB),Rt(r,"-",Fc),Rt(r,"%",O2),Rt(r,"|",iI),Rt(r,"+",aI),Rt(r,"#",sI),Rt(r,"?",P2),Rt(r,'"',dB),Rt(r,"/",Pd),Rt(r,";",fB),Rt(r,"~",R2),Rt(r,"_",oI),Rt(r,"\\",ZT),Rt(r,"",gfe);const n=Yi(r,Kf,oB,{[i5]:!0});Yi(n,Kf,n);const i=Yi(n,Gf,pfe,{[A2]:!0}),a=Yi(n,Aw,mfe,{[e2]:!0}),s=Yi(r,Gf,Qf,{[a5]:!0});Yi(s,Kf,i),Yi(s,Gf,s),Yi(i,Kf,i),Yi(i,Gf,i);const o=Yi(r,Aw,l5,{[s5]:!0});Yi(o,Gf),Yi(o,Kf,a),Yi(o,Aw,o),Yi(a,Kf,a),Yi(a,Gf),Yi(a,Aw,a);const l=Rt(r,jD,lB,{[OD]:!0}),c=Rt(r,iY,d5,{[OD]:!0}),d=Yi(r,RD,d5,{[OD]:!0});Rt(r,DD,d),Rt(c,jD,l),Rt(c,DD,d),Yi(c,RD,d),Rt(d,iY),Rt(d,jD),Yi(d,RD,d),Rt(d,DD,d);const f=Yi(r,PD,xfe,{[hfe]:!0});Rt(f,"#"),Yi(f,PD,f),Rt(f,SQe,f);const p=Rt(f,EQe);Rt(p,"#"),Yi(p,PD,f);const m=[[Gf,s],[Kf,i]],x=[[Gf,null],[Aw,o],[Kf,a]];for(let v=0;v<L_.length;v++)Np(r,L_[v],c5,Qf,m);for(let v=0;v<B_.length;v++)Np(r,B_[v],u5,l5,x);sg(c5,{tld:!0,ascii:!0},t),sg(u5,{utld:!0,alpha:!0},t),Np(r,"file",YN,Qf,m),Np(r,"mailto",YN,Qf,m),Np(r,"http",q1,Qf,m),Np(r,"https",q1,Qf,m),Np(r,"ftp",q1,Qf,m),Np(r,"ftps",q1,Qf,m),sg(YN,{scheme:!0,ascii:!0},t),sg(q1,{slashscheme:!0,ascii:!0},t),e=e.sort((v,b)=>v[0]>b[0]?1:-1);for(let v=0;v<e.length;v++){const b=e[v][0],_=e[v][1]?{[vQe]:!0}:{[yQe]:!0};b.indexOf("-")>=0?_[o5]=!0:Gf.test(b)?Kf.test(b)?_[A2]=!0:_[a5]=!0:_[i5]=!0,nY(r,b,b,_)}return nY(r,"localhost",OS,{ascii:!0}),r.jd=new ul(lI),{start:r,tokens:Object.assign({groups:t},vfe)}}function yfe(e,t){const r=kQe(t.replace(/[A-Z]/g,o=>o.toLowerCase())),n=r.length,i=[];let a=0,s=0;for(;s<n;){let o=e,l=null,c=0,d=null,f=-1,p=-1;for(;s<n&&(l=o.go(r[s]));)o=l,o.accepts()?(f=0,p=0,d=o):f>=0&&(f+=r[s].length,p++),c+=r[s].length,a+=r[s].length,s++;a-=f,s-=p,c-=f,i.push({t:d.t,v:t.slice(a-c,a),s:a-c,e:a})}return i}function kQe(e){const t=[],r=e.length;let n=0;for(;n<r;){let i=e.charCodeAt(n),a,s=i<55296||i>56319||n+1===r||(a=e.charCodeAt(n+1))<56320||a>57343?e[n]:e.slice(n,n+2);t.push(s),n+=s.length}return t}function Np(e,t,r,n,i){let a;const s=t.length;for(let o=0;o<s-1;o++){const l=t[o];e.j[l]?a=e.j[l]:(a=new ul(n),a.jr=i.slice(),e.j[l]=a),e=a}return a=new ul(r),a.jr=i.slice(),e.j[t[s-1]]=a,a}function aY(e){const t=[],r=[];let n=0,i="0123456789";for(;n<e.length;){let a=0;for(;i.indexOf(e[n+a])>=0;)a++;if(a>0){t.push(r.join(""));for(let s=parseInt(e.substring(n,n+a),10);s>0;s--)r.pop();n+=a}else r.push(e[n]),n++}return t}const PS={defaultProtocol:"http",events:null,format:sY,formatHref:sY,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function hB(e,t=null){let r=Object.assign({},PS);e&&(r=Object.assign(r,e instanceof hB?e.o:e));const n=r.ignoreTags,i=[];for(let a=0;a<n.length;a++)i.push(n[a].toUpperCase());this.o=r,t&&(this.defaultRender=t),this.ignoreTags=i}hB.prototype={o:PS,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,r){const n=t!=null;let i=this.o[e];return i&&(typeof i=="object"?(i=r.t in i?i[r.t]:PS[e],typeof i=="function"&&n&&(i=i(t,r))):typeof i=="function"&&n&&(i=i(t,r.t,r)),i)},getObj(e,t,r){let n=this.o[e];return typeof n=="function"&&t!=null&&(n=n(t,r.t,r)),n},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function sY(e){return e}function bfe(e,t){this.t="token",this.v=e,this.tk=t}bfe.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),r=e.get("truncate",t,this),n=e.get("format",t,this);return r&&n.length>r?n.substring(0,r)+"":n},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=PS.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,r=this.toHref(e.get("defaultProtocol")),n=e.get("formatHref",r,this),i=e.get("tagName",r,t),a=this.toFormattedString(e),s={},o=e.get("className",r,t),l=e.get("target",r,t),c=e.get("rel",r,t),d=e.getObj("attributes",r,t),f=e.getObj("events",r,t);return s.href=n,o&&(s.class=o),l&&(s.target=l),c&&(s.rel=c),d&&Object.assign(s,d),{tagName:i,attributes:s,content:a,eventListeners:f}}};function k3(e,t){class r extends bfe{constructor(i,a){super(i,a),this.t=e}}for(const n in t)r.prototype[n]=t[n];return r.t=e,r}const oY=k3("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),lY=k3("text"),_Qe=k3("nl"),U_=k3("url",{isLink:!0,toHref(e=PS.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==OS&&e[1].t===Gp}}),Nc=e=>new ul(e);function NQe({groups:e}){const t=e.domain.concat([YT,JT,Bp,ZT,eI,tI,rI,nI,Fc,oB,O2,iI,aI,sI,Pd,lI,R2,oI]),r=[QT,Gp,cB,Od,uB,O2,P2,dB,fB,UT,$T,T2,I2,FT,MT,LT,BT,zT,HT,WT,VT,qT,GT,KT,XT],n=[YT,QT,JT,ZT,eI,tI,rI,nI,Fc,T2,I2,O2,iI,aI,sI,P2,Pd,lI,R2,oI],i=Nc(),a=Rt(i,R2);cn(a,n,a),cn(a,e.domain,a);const s=Nc(),o=Nc(),l=Nc();cn(i,e.domain,s),cn(i,e.scheme,o),cn(i,e.slashscheme,l),cn(s,n,a),cn(s,e.domain,s);const c=Rt(s,Bp);Rt(a,Bp,c),Rt(o,Bp,c),Rt(l,Bp,c);const d=Rt(a,Od);cn(d,n,a),cn(d,e.domain,a);const f=Nc();cn(c,e.domain,f),cn(f,e.domain,f);const p=Rt(f,Od);cn(p,e.domain,f);const m=Nc(oY);cn(p,e.tld,m),cn(p,e.utld,m),Rt(c,OS,m);const x=Rt(f,Fc);Rt(x,Fc,x),cn(x,e.domain,f),cn(m,e.domain,f),Rt(m,Od,p),Rt(m,Fc,x);const v=Rt(m,Gp);cn(v,e.numeric,oY);const b=Rt(s,Fc),w=Rt(s,Od);Rt(b,Fc,b),cn(b,e.domain,s),cn(w,n,a),cn(w,e.domain,s);const _=Nc(U_);cn(w,e.tld,_),cn(w,e.utld,_),cn(_,e.domain,s),cn(_,n,a),Rt(_,Od,w),Rt(_,Fc,b),Rt(_,Bp,c);const C=Rt(_,Gp),N=Nc(U_);cn(C,e.numeric,N);const R=Nc(U_),P=Nc();cn(R,t,R),cn(R,r,P),cn(P,t,R),cn(P,r,P),Rt(_,Pd,R),Rt(N,Pd,R);const O=Rt(o,Gp),D=Rt(l,Gp),M=Rt(D,Pd),B=Rt(M,Pd);cn(o,e.domain,s),Rt(o,Od,w),Rt(o,Fc,b),cn(l,e.domain,s),Rt(l,Od,w),Rt(l,Fc,b),cn(O,e.domain,R),Rt(O,Pd,R),Rt(O,P2,R),cn(B,e.domain,R),cn(B,t,R),Rt(B,Pd,R);const U=[[T2,I2],[MT,FT],[LT,BT],[UT,$T],[zT,HT],[WT,VT],[qT,GT],[KT,XT]];for(let H=0;H<U.length;H++){const[Z,ee]=U[H],V=Rt(R,Z);Rt(P,Z,V),Rt(V,ee,R);const te=Nc(U_);cn(V,t,te);const se=Nc();cn(V,r),cn(te,t,te),cn(te,r,se),cn(se,t,te),cn(se,r,se),Rt(te,ee,R),Rt(se,ee,R)}return Rt(i,OS,_),Rt(i,lB,_Qe),{start:i,tokens:vfe}}function AQe(e,t,r){let n=r.length,i=0,a=[],s=[];for(;i<n;){let o=e,l=null,c=null,d=0,f=null,p=-1;for(;i<n&&!(l=o.go(r[i].t));)s.push(r[i++]);for(;i<n&&(c=l||o.go(r[i].t));)l=null,o=c,o.accepts()?(p=0,f=o):p>=0&&p++,i++,d++;if(p<0)i-=d,i<n&&(s.push(r[i]),i++);else{s.length>0&&(a.push(MD(lY,t,s)),s=[]),i-=p,d-=p;const m=f.t,x=r.slice(i-d,i);a.push(MD(m,t,x))}}return s.length>0&&a.push(MD(lY,t,s)),a}function MD(e,t,r){const n=r[0].s,i=r[r.length-1].e,a=t.slice(n,i);return new e(a,r)}const TQe=typeof console<"u"&&console&&console.warn||(()=>{}),IQe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",yi={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function OQe(){return ul.groups={},yi.scanner=null,yi.parser=null,yi.tokenQueue=[],yi.pluginQueue=[],yi.customSchemes=[],yi.initialized=!1,yi}function cY(e,t=!1){if(yi.initialized&&TQe(`linkifyjs: already initialized - will not register custom scheme "${e}" ${IQe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);yi.customSchemes.push([e,t])}function PQe(){yi.scanner=CQe(yi.customSchemes);for(let e=0;e<yi.tokenQueue.length;e++)yi.tokenQueue[e][1]({scanner:yi.scanner});yi.parser=NQe(yi.scanner.tokens);for(let e=0;e<yi.pluginQueue.length;e++)yi.pluginQueue[e][1]({scanner:yi.scanner,parser:yi.parser});return yi.initialized=!0,yi}function pB(e){return yi.initialized||PQe(),AQe(yi.parser.start,e,yfe(yi.scanner.start,e))}pB.scan=yfe;function wfe(e,t=null,r=null){if(t&&typeof t=="object"){if(r)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);r=t,t=null}const n=new hB(r),i=pB(e),a=[];for(let s=0;s<i.length;s++){const o=i[s];o.isLink&&(!t||o.t===t)&&n.check(o)&&a.push(o.toFormattedObject(n))}return a}var mB="[\0- -\u2029]",RQe=new RegExp(mB),jQe=new RegExp(`${mB}$`),DQe=new RegExp(mB,"g");function MQe(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function FQe(e){return new Fi({key:new va("autolink"),appendTransaction:(t,r,n)=>{const i=t.some(c=>c.docChanged)&&!r.doc.eq(n.doc),a=t.some(c=>c.getMeta("preventAutolink"));if(!i||a)return;const{tr:s}=n,o=Ode(r.doc,[...t]);if(Lde(o).forEach(({newRange:c})=>{const d=NKe(n.doc,c,m=>m.isTextblock);let f,p;if(d.length>1)f=d[0],p=n.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(d.length){const m=n.doc.textBetween(c.from,c.to," "," ");if(!jQe.test(m))return;f=d[0],p=n.doc.textBetween(f.pos,c.to,void 0," ")}if(f&&p){const m=p.split(RQe).filter(Boolean);if(m.length<=0)return!1;const x=m[m.length-1],v=f.pos+p.lastIndexOf(x);if(!x)return!1;const b=pB(x).map(w=>w.toObject(e.defaultProtocol));if(!MQe(b))return!1;b.filter(w=>w.isLink).map(w=>({...w,from:v+w.start+1,to:v+w.end+1})).filter(w=>n.schema.marks.code?!n.doc.rangeHasMark(w.from,w.to,n.schema.marks.code):!0).filter(w=>e.validate(w.value)).filter(w=>e.shouldAutoLink(w.value)).forEach(w=>{rB(w.from,w.to,n.doc).some(_=>_.mark.type===e.type)||s.addMark(w.from,w.to,e.type.create({href:w.href}))})}}),!!s.steps.length)return s}})}function LQe(e){return new Fi({key:new va("handleClickLink"),props:{handleClick:(t,r,n)=>{var i,a;if(n.button!==0||!t.editable)return!1;let s=!1;if(e.enableClickSelection&&(s=e.editor.commands.extendMarkRange(e.type.name)),e.openOnClick){let o=null;if(n.target instanceof HTMLAnchorElement)o=n.target;else{let f=n.target;const p=[];for(;f.nodeName!=="DIV";)p.push(f),f=f.parentNode;o=p.find(m=>m.nodeName==="A")}if(!o)return s;const l=Fde(t.state,e.type.name),c=(i=o==null?void 0:o.href)!=null?i:l.href,d=(a=o==null?void 0:o.target)!=null?a:l.target;o&&c&&(window.open(c,d),s=!0)}return s}}})}function BQe(e){return new Fi({key:new va("handlePasteLink"),props:{handlePaste:(t,r,n)=>{const{shouldAutoLink:i}=e,{state:a}=t,{selection:s}=a,{empty:o}=s;if(o)return!1;let l="";n.content.forEach(d=>{l+=d.textContent});const c=wfe(l,{defaultProtocol:e.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!c||i!==void 0&&!i(c.href)?!1:e.editor.commands.setMark(e.type,{href:c.href})}}})}function Rm(e,t){const r=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(n=>{const i=typeof n=="string"?n:n.scheme;i&&r.push(i)}),!e||e.replace(DQe,"").match(new RegExp(`^(?:(?:${r.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Sfe=Vx.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){cY(e);return}cY(e.scheme,e.optionalSlashes)})},onDestroy(){OQe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!Rm(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:r=>!!Rm(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!Rm(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Ci(this.options.HTMLAttributes,e),0]:["a",Ci(this.options.HTMLAttributes,{...e,href:""}),0]},markdownTokenName:"link",parseMarkdown:(e,t)=>t.applyMark("link",t.parseInline(e.tokens||[]),{href:e.href,title:e.title||null}),renderMarkdown:(e,t)=>{var r;const n=((r=e.attrs)==null?void 0:r.href)||"";return`[${t.renderChildren(e)}](${n})`},addCommands(){return{setLink:e=>({chain:t})=>{const{href:r}=e;return this.options.isAllowedUri(r,{defaultValidate:n=>!!Rm(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:r}=e||{};return r&&!this.options.isAllowedUri(r,{defaultValidate:n=>!!Rm(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[lx({find:e=>{const t=[];if(e){const{protocols:r,defaultProtocol:n}=this.options,i=wfe(e).filter(a=>a.isLink&&this.options.isAllowedUri(a.value,{defaultValidate:s=>!!Rm(s,r),protocols:r,defaultProtocol:n}));i.length&&i.forEach(a=>{this.options.shouldAutoLink(a.value)&&t.push({text:a.value,data:{href:a.href},index:a.start})})}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:r}=this.options;return this.options.autolink&&e.push(FQe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:i=>!!Rm(i,t),protocols:t,defaultProtocol:r}),shouldAutoLink:this.options.shouldAutoLink})),e.push(LQe({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(BQe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),e}}),UQe=Sfe,$Qe=Object.defineProperty,zQe=(e,t)=>{for(var r in t)$Qe(e,r,{get:t[r],enumerable:!0})},HQe="listItem",uY="textStyle",dY=/^\s*([-+*])\s$/,Efe=Xo.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",Ci(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>e.type!=="list"||e.ordered?[]:{type:"bulletList",content:e.items?t.parseChildren(e.items):[]},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(HQe,this.editor.getAttributes(uY)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=Sy({find:dY,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Sy({find:dY,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(uY),editor:this.editor})),[e]}}),Cfe=Xo.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",Ci(this.options.HTMLAttributes,e),0]},markdownTokenName:"list_item",parseMarkdown:(e,t)=>{if(e.type!=="list_item")return[];let r=[];if(e.tokens&&e.tokens.length>0)if(e.tokens.some(i=>i.type==="paragraph"))r=t.parseChildren(e.tokens);else{const i=e.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(r=[{type:"paragraph",content:t.parseInline(i.tokens)}],e.tokens.length>1){const s=e.tokens.slice(1),o=t.parseChildren(s);r.push(...o)}}else r=t.parseChildren(e.tokens)}return r.length===0&&(r=[{type:"paragraph",content:[]}]),{type:"listItem",content:r}},renderMarkdown:(e,t,r)=>sB(e,t,n=>n.parentType==="bulletList"?"- ":n.parentType==="orderedList"?`${n.index+1}. `:"- ",r),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),WQe={};zQe(WQe,{findListItemPos:()=>fC,getNextListDepth:()=>gB,handleBackspace:()=>f5,handleDelete:()=>h5,hasListBefore:()=>kfe,hasListItemAfter:()=>VQe,hasListItemBefore:()=>_fe,listItemHasSubList:()=>Nfe,nextListIsDeeper:()=>Afe,nextListIsHigher:()=>Tfe});var fC=(e,t)=>{const{$from:r}=t.selection,n=Pa(e,t.schema);let i=null,a=r.depth,s=r.pos,o=null;for(;a>0&&o===null;)i=r.node(a),i.type===n?o=a:(a-=1,s-=1);return o===null?null:{$pos:t.doc.resolve(s),depth:o}},gB=(e,t)=>{const r=fC(e,t);if(!r)return!1;const[,n]=FKe(t,e,r.$pos.pos+4);return n},kfe=(e,t,r)=>{const{$anchor:n}=e.selection,i=Math.max(0,n.pos-2),a=e.doc.resolve(i).node();return!(!a||!r.includes(a.type.name))},_fe=(e,t)=>{var r;const{$anchor:n}=t.selection,i=t.doc.resolve(n.pos-2);return!(i.index()===0||((r=i.nodeBefore)==null?void 0:r.type.name)!==e)},Nfe=(e,t,r)=>{if(!r)return!1;const n=Pa(e,t.schema);let i=!1;return r.descendants(a=>{a.type===n&&(i=!0)}),i},f5=(e,t,r)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!D0(e.state,t)&&kfe(e.state,t,r)){const{$anchor:o}=e.state.selection,l=e.state.doc.resolve(o.before()-1),c=[];l.node().descendants((p,m)=>{p.type.name===t&&c.push({node:p,pos:m})});const d=c.at(-1);if(!d)return!1;const f=e.state.doc.resolve(l.start()+d.pos+1);return e.chain().cut({from:o.start()-1,to:o.end()+1},f.end()).joinForward().run()}if(!D0(e.state,t)||!$Ke(e.state))return!1;const n=fC(t,e.state);if(!n)return!1;const a=e.state.doc.resolve(n.$pos.pos-2).node(n.depth),s=Nfe(t,e.state,a);return _fe(t,e.state)&&!s?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},Afe=(e,t)=>{const r=gB(e,t),n=fC(e,t);return!n||!r?!1:r>n.depth},Tfe=(e,t)=>{const r=gB(e,t),n=fC(e,t);return!n||!r?!1:r<n.depth},h5=(e,t)=>{if(!D0(e.state,t)||!UKe(e.state,t))return!1;const{selection:r}=e.state,{$from:n,$to:i}=r;return!r.empty&&n.sameParent(i)?!1:Afe(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():Tfe(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},VQe=(e,t)=>{var r;const{$anchor:n}=t.selection,i=t.doc.resolve(n.pos-n.parentOffset-2);return!(i.index()===i.parent.childCount-1||((r=i.nodeAfter)==null?void 0:r.type.name)!==e)},Ife=oa.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:r})=>{e.state.schema.nodes[r]!==void 0&&h5(e,r)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:r})=>{e.state.schema.nodes[r]!==void 0&&h5(e,r)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{e.state.schema.nodes[r]!==void 0&&f5(e,r,n)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{e.state.schema.nodes[r]!==void 0&&f5(e,r,n)&&(t=!0)}),t}}}}),fY=/^(\s*)(\d+)\.\s+(.*)$/,qQe=/^\s/;function GQe(e){const t=[];let r=0,n=0;for(;r<e.length;){const i=e[r],a=i.match(fY);if(!a)break;const[,s,o,l]=a,c=s.length;let d=l,f=r+1;const p=[i];for(;f<e.length;){const m=e[f];if(m.match(fY))break;if(m.trim()==="")p.push(m),d+=`
`,f+=1;else if(m.match(qQe))p.push(m),d+=`
${m.slice(c+2)}`,f+=1;else break}t.push({indent:c,number:parseInt(o,10),content:d.trim(),raw:p.join(`
`)}),n=f,r=f}return[t,n]}function Ofe(e,t,r){var n;const i=[];let a=0;for(;a<e.length;){const s=e[a];if(s.indent===t){const o=s.content.split(`
`),l=((n=o[0])==null?void 0:n.trim())||"",c=[];l&&c.push({type:"paragraph",raw:l,tokens:r.inlineTokens(l)});const d=o.slice(1).join(`
`).trim();if(d){const m=r.blockTokens(d);c.push(...m)}let f=a+1;const p=[];for(;f<e.length&&e[f].indent>t;)p.push(e[f]),f+=1;if(p.length>0){const m=Math.min(...p.map(v=>v.indent)),x=Ofe(p,m,r);c.push({type:"list",ordered:!0,start:p[0].number,items:x,raw:p.map(v=>v.raw).join(`
`)})}i.push({type:"list_item",raw:s.raw,tokens:c}),a=f}else a+=1}return i}function KQe(e,t){return e.map(r=>{if(r.type!=="list_item")return t.parseChildren([r])[0];const n=[];return r.tokens&&r.tokens.length>0&&r.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")n.push(...t.parseChildren([i]));else if(i.type==="text"&&i.tokens){const a=t.parseChildren([i]);n.push({type:"paragraph",content:a})}else{const a=t.parseChildren([i]);a.length>0&&n.push(...a)}}),{type:"listItem",content:n}})}var XQe="listItem",hY="textStyle",pY=/^(\d+)\.\s$/,Pfe=Xo.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...r}=e;return t===1?["ol",Ci(this.options.HTMLAttributes,r),0]:["ol",Ci(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>{if(e.type!=="list"||!e.ordered)return[];const r=e.start||1,n=e.items?KQe(e.items,t):[];return r!==1?{type:"orderedList",attrs:{start:r},content:n}:{type:"orderedList",content:n}},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:e=>{const t=e.match(/^(\s*)(\d+)\.\s+/),r=t==null?void 0:t.index;return r!==void 0?r:-1},tokenize:(e,t,r)=>{var n;const i=e.split(`
`),[a,s]=GQe(i);if(a.length===0)return;const o=Ofe(a,0,r);return o.length===0?void 0:{type:"list",ordered:!0,start:((n=a[0])==null?void 0:n.number)||1,items:o,raw:i.slice(0,s).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(XQe,this.editor.getAttributes(hY)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=Sy({find:pY,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,r)=>r.childCount+r.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Sy({find:pY,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(hY)}),joinPredicate:(t,r)=>r.childCount+r.attrs.start===+t[1],editor:this.editor})),[e]}}),YQe=/^\s*(\[([( |x])?\])\s$/,QQe=Xo.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",Ci(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(e,t)=>{const r=[];if(e.tokens&&e.tokens.length>0?r.push(t.createNode("paragraph",{},t.parseInline(e.tokens))):e.text?r.push(t.createNode("paragraph",{},[t.createNode("text",{text:e.text})])):r.push(t.createNode("paragraph",{},[])),e.nestedTokens&&e.nestedTokens.length>0){const n=t.parseChildren(e.nestedTokens);r.push(...n)}return t.createNode("taskItem",{checked:e.checked||!1},r)},renderMarkdown:(e,t)=>{var r;const i=`- [${(r=e.attrs)!=null&&r.checked?"x":" "}] `;return sB(e,t,i)},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:r,editor:n})=>{const i=document.createElement("li"),a=document.createElement("label"),s=document.createElement("span"),o=document.createElement("input"),l=document.createElement("div"),c=d=>{var f,p;o.ariaLabel=((p=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:p.call(f,d,o.checked))||`Task item checkbox for ${d.textContent||"empty task item"}`};return c(e),a.contentEditable="false",o.type="checkbox",o.addEventListener("mousedown",d=>d.preventDefault()),o.addEventListener("change",d=>{if(!n.isEditable&&!this.options.onReadOnlyChecked){o.checked=!o.checked;return}const{checked:f}=d.target;n.isEditable&&typeof r=="function"&&n.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const m=r();if(typeof m!="number")return!1;const x=p.doc.nodeAt(m);return p.setNodeMarkup(m,void 0,{...x==null?void 0:x.attrs,checked:f}),!0}).run(),!n.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,f)||(o.checked=!o.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([d,f])=>{i.setAttribute(d,f)}),i.dataset.checked=e.attrs.checked,o.checked=e.attrs.checked,a.append(o,s),i.append(a,l),Object.entries(t).forEach(([d,f])=>{i.setAttribute(d,f)}),{dom:i,contentDOM:l,update:d=>d.type!==this.type?!1:(i.dataset.checked=d.attrs.checked,o.checked=d.attrs.checked,c(d),!0)}}},addInputRules(){return[Sy({find:YQe,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),JQe=Xo.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",Ci(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},parseMarkdown:(e,t)=>t.createNode("taskList",{},t.parseChildren(e.items||[])),renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(e){var t;const r=(t=e.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:t.index;return r!==void 0?r:-1},tokenize(e,t,r){const n=a=>{const s=r5(a,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,l)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:r.inlineTokens(o.mainContent),nestedTokens:l}),customNestedParser:n},r);return s?[{type:"taskList",raw:s.raw,items:s.items}]:r.blockTokens(a)},i=r5(e,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,s)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:r.inlineTokens(a.mainContent),nestedTokens:s}),customNestedParser:n},r);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});oa.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(Efe.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(Cfe.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(Ife.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(Pfe.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(QQe.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(JQe.configure(this.options.taskList)),e}});var ZQe=Xo.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",Ci(this.options.HTMLAttributes,e),0]},parseMarkdown:(e,t)=>{const r=e.tokens||[];return r.length===1&&r[0].type==="image"?t.parseChildren([r[0]]):t.createNode("paragraph",void 0,t.parseInline(r))},renderMarkdown:(e,t)=>!e||!Array.isArray(e.content)?"":t.renderChildren(e.content),addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),eJe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,tJe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,rJe=Vx.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",Ci(this.options.HTMLAttributes,e),0]},markdownTokenName:"del",parseMarkdown:(e,t)=>t.applyMark("strike",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`~~${t.renderChildren(e)}~~`,addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[wy({find:eJe,type:this.type})]},addPasteRules(){return[lx({find:tJe,type:this.type})]}}),nJe=Xo.create({name:"text",group:"inline",parseMarkdown:e=>({type:"text",text:e.text||""}),renderMarkdown:e=>e.text||""}),iJe=Vx.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",Ci(this.options.HTMLAttributes,e),0]},parseMarkdown(e,t){return t.applyMark(this.name||"underline",t.parseInline(e.tokens||[]))},renderMarkdown(e,t){return`++${t.renderChildren(e)}++`},markdownTokenizer:{name:"underline",level:"inline",start(e){return e.indexOf("++")},tokenize(e,t,r){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(e);if(!i)return;const a=i[2].trim();return{type:"underline",raw:i[0],text:a,tokens:r.inlineTokens(a)}}},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function aJe(e={}){return new Fi({view(t){return new sJe(t,e)}})}class sJe{constructor(t,r){var n;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=r.width)!==null&&n!==void 0?n:1,this.color=r.color===!1?void 0:r.color||"black",this.class=r.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let a=s=>{this[i](s)};return t.dom.addEventListener(i,a),{name:i,handler:a}})}destroy(){this.handlers.forEach(({name:t,handler:r})=>this.editorView.dom.removeEventListener(t,r))}update(t,r){this.cursorPos!=null&&r.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),r=!t.parent.inlineContent,n,i=this.editorView.dom,a=i.getBoundingClientRect(),s=a.width/i.offsetWidth,o=a.height/i.offsetHeight;if(r){let f=t.nodeBefore,p=t.nodeAfter;if(f||p){let m=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(m){let x=m.getBoundingClientRect(),v=f?x.bottom:x.top;f&&p&&(v=(v+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let b=this.width/2*o;n={left:x.left,right:x.right,top:v-b,bottom:v+b}}}}if(!n){let f=this.editorView.coordsAtPos(this.cursorPos),p=this.width/2*s;n={left:f.left-p,right:f.left+p,top:f.top,bottom:f.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r);let c,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,d=-pageYOffset;else{let f=l.getBoundingClientRect(),p=f.width/l.offsetWidth,m=f.height/l.offsetHeight;c=f.left-l.scrollLeft*p,d=f.top-l.scrollTop*m}this.element.style.left=(n.left-c)/s+"px",this.element.style.top=(n.top-d)/o+"px",this.element.style.width=(n.right-n.left)/s+"px",this.element.style.height=(n.bottom-n.top)/o+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let r=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),n=r&&r.inside>=0&&this.editorView.state.doc.nodeAt(r.inside),i=n&&n.type.spec.disableDropCursor,a=typeof i=="function"?i(this.editorView,r,t):i;if(r&&!a){let s=r.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let o=wue(this.editorView.state.doc,s,this.editorView.dragging.slice);o!=null&&(s=o)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class ta extends dn{constructor(t){super(t,t)}map(t,r){let n=t.resolve(r.map(this.head));return ta.valid(n)?new ta(n):dn.near(n)}content(){return qt.empty}eq(t){return t instanceof ta&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ta(t.resolve(r.pos))}getBookmark(){return new xB(this.anchor)}static valid(t){let r=t.parent;if(r.isTextblock||!oJe(t)||!lJe(t))return!1;let n=r.type.spec.allowGapCursor;if(n!=null)return n;let i=r.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,r,n=!1){e:for(;;){if(!n&&ta.valid(t))return t;let i=t.pos,a=null;for(let s=t.depth;;s--){let o=t.node(s);if(r>0?t.indexAfter(s)<o.childCount:t.index(s)>0){a=o.child(r>0?t.indexAfter(s):t.index(s)-1);break}else if(s==0)return null;i+=r;let l=t.doc.resolve(i);if(ta.valid(l))return l}for(;;){let s=r>0?a.firstChild:a.lastChild;if(!s){if(a.isAtom&&!a.isText&&!pr.isSelectable(a)){t=t.doc.resolve(i+a.nodeSize*r),n=!1;continue e}break}a=s,i+=r;let o=t.doc.resolve(i);if(ta.valid(o))return o}return null}}}ta.prototype.visible=!1;ta.findFrom=ta.findGapCursorFrom;dn.jsonID("gapcursor",ta);class xB{constructor(t){this.pos=t}map(t){return new xB(t.map(this.pos))}resolve(t){let r=t.resolve(this.pos);return ta.valid(r)?new ta(r):dn.near(r)}}function Rfe(e){return e.isAtom||e.spec.isolating||e.spec.createGapCursor}function oJe(e){for(let t=e.depth;t>=0;t--){let r=e.index(t),n=e.node(t);if(r==0){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||Rfe(i.type))return!0;if(i.inlineContent)return!1}}return!0}function lJe(e){for(let t=e.depth;t>=0;t--){let r=e.indexAfter(t),n=e.node(t);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||Rfe(i.type))return!0;if(i.inlineContent)return!1}}return!0}function cJe(){return new Fi({props:{decorations:hJe,createSelectionBetween(e,t,r){return t.pos==r.pos&&ta.valid(r)?new ta(r):null},handleClick:dJe,handleKeyDown:uJe,handleDOMEvents:{beforeinput:fJe}}})}const uJe=Sde({ArrowLeft:$_("horiz",-1),ArrowRight:$_("horiz",1),ArrowUp:$_("vert",-1),ArrowDown:$_("vert",1)});function $_(e,t){const r=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(n,i,a){let s=n.selection,o=t>0?s.$to:s.$from,l=s.empty;if(s instanceof Ur){if(!a.endOfTextblock(r)||o.depth==0)return!1;l=!1,o=n.doc.resolve(t>0?o.after():o.before())}let c=ta.findGapCursorFrom(o,t,l);return c?(i&&i(n.tr.setSelection(new ta(c))),!0):!1}}function dJe(e,t,r){if(!e||!e.editable)return!1;let n=e.state.doc.resolve(t);if(!ta.valid(n))return!1;let i=e.posAtCoords({left:r.clientX,top:r.clientY});return i&&i.inside>-1&&pr.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new ta(n))),!0)}function fJe(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof ta))return!1;let{$from:r}=e.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(e.state.schema.nodes.text);if(!n)return!1;let i=It.empty;for(let s=n.length-1;s>=0;s--)i=It.from(n[s].createAndFill(null,i));let a=e.state.tr.replace(r.pos,r.pos,new qt(i,0,0));return a.setSelection(Ur.near(a.doc.resolve(r.pos+1))),e.dispatch(a),!1}function hJe(e){if(!(e.selection instanceof ta))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",Ri.create(e.doc,[fo.widget(e.selection.head,t,{key:"gapcursor"})])}var cI=200,xs=function(){};xs.prototype.append=function(t){return t.length?(t=xs.from(t),!this.length&&t||t.length<cI&&this.leafAppend(t)||this.length<cI&&t.leafPrepend(this)||this.appendInner(t)):this};xs.prototype.prepend=function(t){return t.length?xs.from(t).append(this):this};xs.prototype.appendInner=function(t){return new pJe(this,t)};xs.prototype.slice=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=this.length),t>=r?xs.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,r))};xs.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};xs.prototype.forEach=function(t,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length),r<=n?this.forEachInner(t,r,n,0):this.forEachInvertedInner(t,r,n,0)};xs.prototype.map=function(t,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length);var i=[];return this.forEach(function(a,s){return i.push(t(a,s))},r,n),i};xs.from=function(t){return t instanceof xs?t:t&&t.length?new jfe(t):xs.empty};var jfe=function(e){function t(n){e.call(this),this.values=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,a){return i==0&&a==this.length?this:new t(this.values.slice(i,a))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,a,s,o){for(var l=a;l<s;l++)if(i(this.values[l],o+l)===!1)return!1},t.prototype.forEachInvertedInner=function(i,a,s,o){for(var l=a-1;l>=s;l--)if(i(this.values[l],o+l)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=cI)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=cI)return new t(i.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(t.prototype,r),t}(xs);xs.empty=new jfe([]);var pJe=function(e){function t(r,n){e.call(this),this.left=r,this.right=n,this.length=r.length+n.length,this.depth=Math.max(r.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},t.prototype.forEachInner=function(n,i,a,s){var o=this.left.length;if(i<o&&this.left.forEachInner(n,i,Math.min(a,o),s)===!1||a>o&&this.right.forEachInner(n,Math.max(i-o,0),Math.min(this.length,a)-o,s+o)===!1)return!1},t.prototype.forEachInvertedInner=function(n,i,a,s){var o=this.left.length;if(i>o&&this.right.forEachInvertedInner(n,i-o,Math.max(a,o)-o,s+o)===!1||a<o&&this.left.forEachInvertedInner(n,Math.min(i,o),a,s)===!1)return!1},t.prototype.sliceInner=function(n,i){if(n==0&&i==this.length)return this;var a=this.left.length;return i<=a?this.left.slice(n,i):n>=a?this.right.slice(n-a,i-a):this.left.slice(n,a).append(this.right.slice(0,i-a))},t.prototype.leafAppend=function(n){var i=this.right.leafAppend(n);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(n){var i=this.left.leafPrepend(n);if(i)return new t(i,this.right)},t.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new t(this.left,new t(this.right,n)):new t(this,n)},t}(xs);const mJe=500;class Wu{constructor(t,r){this.items=t,this.eventCount=r}popEvent(t,r){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let i,a;r&&(i=this.remapping(n,this.items.length),a=i.maps.length);let s=t.tr,o,l,c=[],d=[];return this.items.forEach((f,p)=>{if(!f.step){i||(i=this.remapping(n,p+1),a=i.maps.length),a--,d.push(f);return}if(i){d.push(new Rd(f.map));let m=f.step.map(i.slice(a)),x;m&&s.maybeStep(m).doc&&(x=s.mapping.maps[s.mapping.maps.length-1],c.push(new Rd(x,void 0,void 0,c.length+d.length))),a--,x&&i.appendMap(x,a)}else s.maybeStep(f.step);if(f.selection)return o=i?f.selection.map(i.slice(a)):f.selection,l=new Wu(this.items.slice(0,n).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:o}}addTransform(t,r,n,i){let a=[],s=this.eventCount,o=this.items,l=!i&&o.length?o.get(o.length-1):null;for(let d=0;d<t.steps.length;d++){let f=t.steps[d].invert(t.docs[d]),p=new Rd(t.mapping.maps[d],f,r),m;(m=l&&l.merge(p))&&(p=m,d?a.pop():o=o.slice(0,o.length-1)),a.push(p),r&&(s++,r=void 0),i||(l=p)}let c=s-n.depth;return c>xJe&&(o=gJe(o,c),s-=c),new Wu(o.append(a),s)}remapping(t,r){let n=new CS;return this.items.forEach((i,a)=>{let s=i.mirrorOffset!=null&&a-i.mirrorOffset>=t?n.maps.length-i.mirrorOffset:void 0;n.appendMap(i.map,s)},t,r),n}addMaps(t){return this.eventCount==0?this:new Wu(this.items.append(t.map(r=>new Rd(r))),this.eventCount)}rebased(t,r){if(!this.eventCount)return this;let n=[],i=Math.max(0,this.items.length-r),a=t.mapping,s=t.steps.length,o=this.eventCount;this.items.forEach(p=>{p.selection&&o--},i);let l=r;this.items.forEach(p=>{let m=a.getMirror(--l);if(m==null)return;s=Math.min(s,m);let x=a.maps[m];if(p.step){let v=t.steps[m].invert(t.docs[m]),b=p.selection&&p.selection.map(a.slice(l+1,m));b&&o++,n.push(new Rd(x,v,b))}else n.push(new Rd(x))},i);let c=[];for(let p=r;p<s;p++)c.push(new Rd(a.maps[p]));let d=this.items.slice(0,i).append(c).append(n),f=new Wu(d,o);return f.emptyItemCount()>mJe&&(f=f.compress(this.items.length-n.length)),f}emptyItemCount(){let t=0;return this.items.forEach(r=>{r.step||t++}),t}compress(t=this.items.length){let r=this.remapping(0,t),n=r.maps.length,i=[],a=0;return this.items.forEach((s,o)=>{if(o>=t)i.push(s),s.selection&&a++;else if(s.step){let l=s.step.map(r.slice(n)),c=l&&l.getMap();if(n--,c&&r.appendMap(c,n),l){let d=s.selection&&s.selection.map(r.slice(n));d&&a++;let f=new Rd(c.invert(),l,d),p,m=i.length-1;(p=i.length&&i[m].merge(f))?i[m]=p:i.push(f)}}else s.map&&n--},this.items.length,0),new Wu(xs.from(i.reverse()),a)}}Wu.empty=new Wu(xs.empty,0);function gJe(e,t){let r;return e.forEach((n,i)=>{if(n.selection&&t--==0)return r=i,!1}),e.slice(r)}class Rd{constructor(t,r,n,i){this.map=t,this.step=r,this.selection=n,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let r=t.step.merge(this.step);if(r)return new Rd(r.getMap().invert(),r,this.selection)}}}class Up{constructor(t,r,n,i,a){this.done=t,this.undone=r,this.prevRanges=n,this.prevTime=i,this.prevComposition=a}}const xJe=20;function vJe(e,t,r,n){let i=r.getMeta(Ig),a;if(i)return i.historyState;r.getMeta(wJe)&&(e=new Up(e.done,e.undone,null,0,-1));let s=r.getMeta("appendedTransaction");if(r.steps.length==0)return e;if(s&&s.getMeta(Ig))return s.getMeta(Ig).redo?new Up(e.done.addTransform(r,void 0,n,QN(t)),e.undone,mY(r.mapping.maps),e.prevTime,e.prevComposition):new Up(e.done,e.undone.addTransform(r,void 0,n,QN(t)),null,e.prevTime,e.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let o=r.getMeta("composition"),l=e.prevTime==0||!s&&e.prevComposition!=o&&(e.prevTime<(r.time||0)-n.newGroupDelay||!yJe(r,e.prevRanges)),c=s?FD(e.prevRanges,r.mapping):mY(r.mapping.maps);return new Up(e.done.addTransform(r,l?t.selection.getBookmark():void 0,n,QN(t)),Wu.empty,c,r.time,o??e.prevComposition)}else return(a=r.getMeta("rebased"))?new Up(e.done.rebased(r,a),e.undone.rebased(r,a),FD(e.prevRanges,r.mapping),e.prevTime,e.prevComposition):new Up(e.done.addMaps(r.mapping.maps),e.undone.addMaps(r.mapping.maps),FD(e.prevRanges,r.mapping),e.prevTime,e.prevComposition)}function yJe(e,t){if(!t)return!1;if(!e.docChanged)return!0;let r=!1;return e.mapping.maps[0].forEach((n,i)=>{for(let a=0;a<t.length;a+=2)n<=t[a+1]&&i>=t[a]&&(r=!0)}),r}function mY(e){let t=[];for(let r=e.length-1;r>=0&&t.length==0;r--)e[r].forEach((n,i,a,s)=>t.push(a,s));return t}function FD(e,t){if(!e)return null;let r=[];for(let n=0;n<e.length;n+=2){let i=t.map(e[n],1),a=t.map(e[n+1],-1);i<=a&&r.push(i,a)}return r}function bJe(e,t,r){let n=QN(t),i=Ig.get(t).spec.config,a=(r?e.undone:e.done).popEvent(t,n);if(!a)return null;let s=a.selection.resolve(a.transform.doc),o=(r?e.done:e.undone).addTransform(a.transform,t.selection.getBookmark(),i,n),l=new Up(r?o:a.remaining,r?a.remaining:o,null,0,-1);return a.transform.setSelection(s).setMeta(Ig,{redo:r,historyState:l})}let LD=!1,gY=null;function QN(e){let t=e.plugins;if(gY!=t){LD=!1,gY=t;for(let r=0;r<t.length;r++)if(t[r].spec.historyPreserveItems){LD=!0;break}}return LD}const Ig=new va("history"),wJe=new va("closeHistory");function SJe(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Fi({key:Ig,state:{init(){return new Up(Wu.empty,Wu.empty,null,0,-1)},apply(t,r,n){return vJe(r,n,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,r){let n=r.inputType,i=n=="historyUndo"?Mfe:n=="historyRedo"?Ffe:null;return!i||!t.editable?!1:(r.preventDefault(),i(t.state,t.dispatch))}}}})}function Dfe(e,t){return(r,n)=>{let i=Ig.getState(r);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(n){let a=bJe(i,r,e);a&&n(t?a.scrollIntoView():a)}return!0}}const Mfe=Dfe(!1,!0),Ffe=Dfe(!0,!0);oa.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc;if(((e==null?void 0:e.mode)||this.options.mode)==="textSize"){const n=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(n)}return t.nodeSize},this.storage.words=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc,r=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(r)}},addProseMirrorPlugins(){let e=!1;return[new Fi({key:new va("characterCount"),appendTransaction:(t,r,n)=>{if(e)return;const i=this.options.limit;if(i==null||i===0){e=!0;return}const a=this.storage.characters({node:n.doc});if(a>i){const s=a-i,o=0,l=s;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const c=n.tr.deleteRange(o,l);return e=!0,c}e=!0},filterTransaction:(t,r)=>{const n=this.options.limit;if(!t.docChanged||n===0||n===null||n===void 0)return!0;const i=this.storage.characters({node:r.doc}),a=this.storage.characters({node:t.doc});if(a<=n||i>n&&a>n&&a<=i)return!0;if(i>n&&a>n&&a>i||!t.getMeta("paste"))return!1;const o=t.selection.$head.pos,l=a-n,c=o-l,d=o;return t.deleteRange(c,d),!(this.storage.characters({node:t.doc})>n)}})]}});var EJe=oa.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[aJe(this.options)]}});oa.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Fi({key:new va("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:r,isFocused:n}=this.editor,{anchor:i}=t,a=[];if(!r||!n)return Ri.create(e,[]);let s=0;this.options.mode==="deepest"&&e.descendants((l,c)=>{if(l.isText)return;if(!(i>=c&&i<=c+l.nodeSize-1))return!1;s+=1});let o=0;return e.descendants((l,c)=>{if(l.isText||!(i>=c&&i<=c+l.nodeSize-1))return!1;if(o+=1,this.options.mode==="deepest"&&s-o>0||this.options.mode==="shallowest"&&o>1)return this.options.mode==="deepest";a.push(fo.node(c,c+l.nodeSize,{class:this.options.className}))}),Ri.create(e,a)}}})]}});var CJe=oa.create({name:"gapCursor",addProseMirrorPlugins(){return[cJe()]},extendNodeSchema(e){var t;const r={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=Jn(xr(e,"allowGapCursor",r)))!=null?t:null}}});oa.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Fi({key:new va("placeholder"),props:{decorations:({doc:e,selection:t})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=t,i=[];if(!r)return null;const a=this.editor.isEmpty;return e.descendants((s,o)=>{const l=n>=o&&n<=o+s.nodeSize,c=!s.isLeaf&&w3(s);if((l||!this.options.showOnlyCurrent)&&c){const d=[this.options.emptyNodeClass];a&&d.push(this.options.emptyEditorClass);const f=fo.node(o,o+s.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:s,pos:o,hasAnchor:l}):this.options.placeholder});i.push(f)}return this.options.includeChildren}),Ri.create(e,i)}}})]}});oa.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new Fi({key:new va("selection"),props:{decorations(r){return r.selection.empty||e.isFocused||!e.isEditable||Bde(r.selection)||e.view.dragging?null:Ri.create(r.doc,[fo.inline(r.selection.from,r.selection.to,{class:t.className})])}}})]}});function xY({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||(t==null?void 0:t.type)===e}var kJe=oa.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var e;const t=new va(this.name),r=this.options.node||((e=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:e.name)||"paragraph",n=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(r).includes(i.name));return[new Fi({key:t,appendTransaction:(i,a,s)=>{const{doc:o,tr:l,schema:c}=s,d=t.getState(s),f=o.content.size,p=c.nodes[r];if(d)return l.insert(f,p.create())},state:{init:(i,a)=>{const s=a.tr.doc.lastChild;return!xY({node:s,types:n})},apply:(i,a)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return a;const s=i.doc.lastChild;return!xY({node:s,types:n})}}})]}}),_Je=oa.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>Mfe(e,t),redo:()=>({state:e,dispatch:t})=>Ffe(e,t)}},addProseMirrorPlugins(){return[SJe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),NJe=oa.create({name:"starterKit",addExtensions(){var e,t,r,n;const i=[];return this.options.bold!==!1&&i.push(eQe.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(XYe.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(Efe.configure(this.options.bulletList)),this.options.code!==!1&&i.push(nQe.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(sQe.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(oQe.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(EJe.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(CJe.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(lQe.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(ffe.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(_Je.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(uQe.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(mQe.configure(this.options.italic)),this.options.listItem!==!1&&i.push(Cfe.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(Ife.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&i.push(Sfe.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&i.push(Pfe.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(ZQe.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(rJe.configure(this.options.strike)),this.options.text!==!1&&i.push(nJe.configure(this.options.text)),this.options.underline!==!1&&i.push(iJe.configure((r=this.options)==null?void 0:r.underline)),this.options.trailingNode!==!1&&i.push(kJe.configure((n=this.options)==null?void 0:n.trailingNode)),i}}),AJe=NJe,TJe=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,IJe=Xo.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",Ci(this.options.HTMLAttributes,e)]},parseMarkdown:(e,t)=>t.createNode("image",{src:e.href,title:e.title,alt:e.text}),renderMarkdown:e=>{var t,r,n,i,a,s;const o=(r=(t=e.attrs)==null?void 0:t.src)!=null?r:"",l=(i=(n=e.attrs)==null?void 0:n.alt)!=null?i:"",c=(s=(a=e.attrs)==null?void 0:a.title)!=null?s:"";return c?`![${l}](${o} "${c}")`:`![${l}](${o})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u")return null;const{directions:e,minWidth:t,minHeight:r,alwaysPreserveAspectRatio:n}=this.options.resize;return({node:i,getPos:a,HTMLAttributes:s,editor:o})=>{const l=document.createElement("img");Object.entries(s).forEach(([f,p])=>{if(p!=null)switch(f){case"width":case"height":break;default:l.setAttribute(f,p);break}}),l.src=s.src;const c=new NXe({element:l,editor:o,node:i,getPos:a,onResize:(f,p)=>{l.style.width=`${f}px`,l.style.height=`${p}px`},onCommit:(f,p)=>{const m=a();m!==void 0&&this.editor.chain().setNodeSelection(m).updateAttributes(this.name,{width:f,height:p}).run()},onUpdate:(f,p,m)=>f.type===i.type,options:{directions:e,min:{width:t,height:r},preserveAspectRatio:n===!0}}),d=c.dom;return d.style.visibility="hidden",d.style.pointerEvents="none",l.onload=()=>{d.style.visibility="",d.style.pointerEvents=""},c}},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[rfe({find:TJe,type:this.type,getAttributes:e=>{const[,,t,r,n]=e;return{src:r,alt:t,title:n}}})]}}),OJe=IJe,PJe=oa.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{const t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.map(r=>t.updateAttributes(r,{textAlign:e})).some(r=>r):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).some(t=>t),toggleTextAlign:e=>({editor:t,commands:r})=>this.options.alignments.includes(e)?t.isActive({textAlign:e})?r.unsetTextAlign():r.setTextAlign(e):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),RJe=PJe;function jJe(e){var t;const{char:r,allowSpaces:n,allowToIncludeChar:i,allowedPrefixes:a,startOfLine:s,$position:o}=e,l=n&&!i,c=TXe(r),d=new RegExp(`\\s${c}$`),f=s?"^":"",p=i?"":c,m=l?new RegExp(`${f}${c}.*?(?=\\s${p}|$)`,"gm"):new RegExp(`${f}(?:^)?${c}[^\\s${p}]*`,"gm"),x=((t=o.nodeBefore)==null?void 0:t.isText)&&o.nodeBefore.text;if(!x)return null;const v=o.pos-x.length,b=Array.from(x.matchAll(m)).pop();if(!b||b.input===void 0||b.index===void 0)return null;const w=b.input.slice(Math.max(0,b.index-1),b.index),_=new RegExp(`^[${a==null?void 0:a.join("")}\0]?$`).test(w);if(a!==null&&!_)return null;const C=v+b.index;let N=C+b[0].length;return l&&d.test(x.slice(N-1,N+1))&&(b[0]+=" ",N+=1),C<o.pos&&N>=o.pos?{range:{from:C,to:N},query:b[0].slice(r.length),text:b[0]}:null}var DJe=new va("suggestion");function MJe({pluginKey:e=DJe,editor:t,char:r="@",allowSpaces:n=!1,allowToIncludeChar:i=!1,allowedPrefixes:a=[" "],startOfLine:s=!1,decorationTag:o="span",decorationClass:l="suggestion",decorationContent:c="",decorationEmptyClass:d="is-empty",command:f=()=>null,items:p=()=>[],render:m=()=>({}),allow:x=()=>!0,findSuggestionMatch:v=jJe}){let b;const w=m==null?void 0:m(),_=()=>{const P=t.state.selection.$anchor.pos,O=t.view.coordsAtPos(P),{top:D,right:M,bottom:B,left:U}=O;try{return new DOMRect(U,D,M-U,B-D)}catch{return null}},C=(P,O)=>O?()=>{const D=e.getState(t.state),M=D==null?void 0:D.decorationId,B=P.dom.querySelector(`[data-decoration-id="${M}"]`);return(B==null?void 0:B.getBoundingClientRect())||null}:_;function N(P,O){var D;try{const B=e.getState(P.state),U=B!=null&&B.decorationId?P.dom.querySelector(`[data-decoration-id="${B.decorationId}"]`):null,H={editor:t,range:(B==null?void 0:B.range)||{from:0,to:0},query:(B==null?void 0:B.query)||null,text:(B==null?void 0:B.text)||null,items:[],command:Z=>f({editor:t,range:(B==null?void 0:B.range)||{from:0,to:0},props:Z}),decorationNode:U,clientRect:C(P,U)};(D=w==null?void 0:w.onExit)==null||D.call(w,H)}catch{}const M=P.state.tr.setMeta(O,{exit:!0});P.dispatch(M)}const R=new Fi({key:e,view(){return{update:async(P,O)=>{var D,M,B,U,H,Z,ee;const V=(D=this.key)==null?void 0:D.getState(O),te=(M=this.key)==null?void 0:M.getState(P.state),se=V.active&&te.active&&V.range.from!==te.range.from,Q=!V.active&&te.active,X=V.active&&!te.active,fe=!Q&&!X&&V.query!==te.query,Se=Q||se&&fe,Y=fe||se,ce=X||se&&fe;if(!Se&&!Y&&!ce)return;const W=ce&&!Se?V:te,G=P.dom.querySelector(`[data-decoration-id="${W.decorationId}"]`);b={editor:t,range:W.range,query:W.query,text:W.text,items:[],command:ie=>f({editor:t,range:W.range,props:ie}),decorationNode:G,clientRect:C(P,G)},Se&&((B=w==null?void 0:w.onBeforeStart)==null||B.call(w,b)),Y&&((U=w==null?void 0:w.onBeforeUpdate)==null||U.call(w,b)),(Y||Se)&&(b.items=await p({editor:t,query:W.query})),ce&&((H=w==null?void 0:w.onExit)==null||H.call(w,b)),Y&&((Z=w==null?void 0:w.onUpdate)==null||Z.call(w,b)),Se&&((ee=w==null?void 0:w.onStart)==null||ee.call(w,b))},destroy:()=>{var P;b&&((P=w==null?void 0:w.onExit)==null||P.call(w,b))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply(P,O,D,M){const{isEditable:B}=t,{composing:U}=t.view,{selection:H}=P,{empty:Z,from:ee}=H,V={...O},te=P.getMeta(e);if(te&&te.exit)return V.active=!1,V.decorationId=null,V.range={from:0,to:0},V.query=null,V.text=null,V;if(V.composing=U,B&&(Z||t.view.composing)){(ee<O.range.from||ee>O.range.to)&&!U&&!O.composing&&(V.active=!1);const se=v({char:r,allowSpaces:n,allowToIncludeChar:i,allowedPrefixes:a,startOfLine:s,$position:H.$from}),Q=`id_${Math.floor(Math.random()*4294967295)}`;se&&x({editor:t,state:M,range:se.range,isActive:O.active})?(V.active=!0,V.decorationId=O.decorationId?O.decorationId:Q,V.range=se.range,V.query=se.query,V.text=se.text):V.active=!1}else V.active=!1;return V.active||(V.decorationId=null,V.range={from:0,to:0},V.query=null,V.text=null),V}},props:{handleKeyDown(P,O){var D,M,B,U;const{active:H,range:Z}=R.getState(P.state);if(!H)return!1;if(O.key==="Escape"||O.key==="Esc"){const V=R.getState(P.state),te=(D=b==null?void 0:b.decorationNode)!=null?D:null,se=te??(V!=null&&V.decorationId?P.dom.querySelector(`[data-decoration-id="${V.decorationId}"]`):null);if(((M=w==null?void 0:w.onKeyDown)==null?void 0:M.call(w,{view:P,event:O,range:V.range}))||!1)return!0;const X={editor:t,range:V.range,query:V.query,text:V.text,items:[],command:fe=>f({editor:t,range:V.range,props:fe}),decorationNode:se,clientRect:se?()=>se.getBoundingClientRect()||null:null};return(B=w==null?void 0:w.onExit)==null||B.call(w,X),N(P,e),!0}return((U=w==null?void 0:w.onKeyDown)==null?void 0:U.call(w,{view:P,event:O,range:Z}))||!1},decorations(P){const{active:O,range:D,decorationId:M,query:B}=R.getState(P);if(!O)return null;const U=!(B!=null&&B.length),H=[l];return U&&H.push(d),Ri.create(P.doc,[fo.inline(D.from,D.to,{nodeName:o,class:H.join(" "),"data-decoration-id":M,"data-decoration-content":c})])}}});return R}function FJe({editor:e,overrideSuggestionOptions:t,extensionName:r,char:n="@"}){const i=new va;return{editor:e,char:n,pluginKey:i,command:({editor:a,range:s,props:o})=>{var l,c,d;const f=a.view.state.selection.$to.nodeAfter;((l=f==null?void 0:f.text)==null?void 0:l.startsWith(" "))&&(s.to+=1),a.chain().focus().insertContentAt(s,[{type:r,attrs:{...o,mentionSuggestionChar:n}},{type:"text",text:" "}]).run(),(d=(c=a.view.dom.ownerDocument.defaultView)==null?void 0:c.getSelection())==null||d.collapseToEnd()},allow:({state:a,range:s})=>{const o=a.doc.resolve(s.from),l=a.schema.nodes[r];return!!o.parent.type.contentMatch.matchType(l)},...t}}function Lfe(e){return(e.options.suggestions.length?e.options.suggestions:[e.options.suggestion]).map(t=>FJe({editor:e.editor,overrideSuggestionOptions:t,extensionName:e.name,char:t.char}))}function vY(e,t){const r=Lfe(e),n=r.find(i=>i.char===t);return n||(r.length?r[0]:null)}var LJe=Xo.create({name:"mention",priority:101,addOptions(){return{HTMLAttributes:{},renderText({node:e,suggestion:t}){var r,n;return`${(r=t==null?void 0:t.char)!=null?r:"@"}${(n=e.attrs.label)!=null?n:e.attrs.id}`},deleteTriggerWithBackspace:!1,renderHTML({options:e,node:t,suggestion:r}){var n,i;return["span",Ci(this.HTMLAttributes,e.HTMLAttributes),`${(n=r==null?void 0:r.char)!=null?n:"@"}${(i=t.attrs.label)!=null?i:t.attrs.id}`]},suggestions:[],suggestion:{}}},group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes(){return{id:{default:null,parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>e.id?{"data-id":e.id}:{}},label:{default:null,parseHTML:e=>e.getAttribute("data-label"),renderHTML:e=>e.label?{"data-label":e.label}:{}},mentionSuggestionChar:{default:"@",parseHTML:e=>e.getAttribute("data-mention-suggestion-char"),renderHTML:e=>({"data-mention-suggestion-char":e.mentionSuggestionChar})}}},parseHTML(){return[{tag:`span[data-type="${this.name}"]`}]},renderHTML({node:e,HTMLAttributes:t}){const r=vY(this,e.attrs.mentionSuggestionChar);if(this.options.renderLabel!==void 0)return console.warn("renderLabel is deprecated use renderText and renderHTML instead"),["span",Ci({"data-type":this.name},this.options.HTMLAttributes,t),this.options.renderLabel({options:this.options,node:e,suggestion:r})];const n={...this.options};n.HTMLAttributes=Ci({"data-type":this.name},this.options.HTMLAttributes,t);const i=this.options.renderHTML({options:n,node:e,suggestion:r});return typeof i=="string"?["span",Ci({"data-type":this.name},this.options.HTMLAttributes,t),i]:i},...nfe({nodeName:"mention",name:"@",selfClosing:!0,allowedAttributes:["id","label",{name:"mentionSuggestionChar",skipIfDefault:"@"}],parseAttributes:e=>{const t={},r=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let n=r.exec(e);for(;n!==null;){const[,i,a,s]=n,o=a??s;t[i==="char"?"mentionSuggestionChar":i]=o,n=r.exec(e)}return t},serializeAttributes:e=>Object.entries(e).filter(([,t])=>t!=null).map(([t,r])=>`${t==="mentionSuggestionChar"?"char":t}="${r}"`).join(" ")}),renderText({node:e}){const t={options:this.options,node:e,suggestion:vY(this,e.attrs.mentionSuggestionChar)};return this.options.renderLabel!==void 0?(console.warn("renderLabel is deprecated use renderText and renderHTML instead"),this.options.renderLabel(t)):this.options.renderText(t)},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command(({tr:e,state:t})=>{let r=!1;const{selection:n}=t,{empty:i,anchor:a}=n;if(!i)return!1;let s=new wh,o=0;return t.doc.nodesBetween(a-1,a,(l,c)=>{if(l.type.name===this.name)return r=!0,s=l,o=c,!1}),r&&e.insertText(this.options.deleteTriggerWithBackspace?"":s.attrs.mentionSuggestionChar,o,o+s.nodeSize),r})}},addProseMirrorPlugins(){return Lfe(this).map(MJe)}}),BJe=LJe,Sl="top",cu="bottom",uu="right",El="left",vB="auto",hC=[Sl,cu,uu,El],Ey="start",RS="end",UJe="clippingParents",Bfe="viewport",Tw="popper",$Je="reference",yY=hC.reduce(function(e,t){return e.concat([t+"-"+Ey,t+"-"+RS])},[]),Ufe=[].concat(hC,[vB]).reduce(function(e,t){return e.concat([t,t+"-"+Ey,t+"-"+RS])},[]),zJe="beforeRead",HJe="read",WJe="afterRead",VJe="beforeMain",qJe="main",GJe="afterMain",KJe="beforeWrite",XJe="write",YJe="afterWrite",QJe=[zJe,HJe,WJe,VJe,qJe,GJe,KJe,XJe,YJe];function lf(e){return e?(e.nodeName||"").toLowerCase():null}function lc(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function cx(e){var t=lc(e).Element;return e instanceof t||e instanceof Element}function nu(e){var t=lc(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function yB(e){if(typeof ShadowRoot>"u")return!1;var t=lc(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function JJe(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},i=t.attributes[r]||{},a=t.elements[r];!nu(a)||!lf(a)||(Object.assign(a.style,n),Object.keys(i).forEach(function(s){var o=i[s];o===!1?a.removeAttribute(s):a.setAttribute(s,o===!0?"":o)}))})}function ZJe(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var i=t.elements[n],a=t.attributes[n]||{},s=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),o=s.reduce(function(l,c){return l[c]="",l},{});!nu(i)||!lf(i)||(Object.assign(i.style,o),Object.keys(a).forEach(function(l){i.removeAttribute(l)}))})}}const $fe={name:"applyStyles",enabled:!0,phase:"write",fn:JJe,effect:ZJe,requires:["computeStyles"]};function ef(e){return e.split("-")[0]}var Og=Math.max,uI=Math.min,Cy=Math.round;function p5(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function zfe(){return!/^((?!chrome|android).)*safari/i.test(p5())}function ky(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),i=1,a=1;t&&nu(e)&&(i=e.offsetWidth>0&&Cy(n.width)/e.offsetWidth||1,a=e.offsetHeight>0&&Cy(n.height)/e.offsetHeight||1);var s=cx(e)?lc(e):window,o=s.visualViewport,l=!zfe()&&r,c=(n.left+(l&&o?o.offsetLeft:0))/i,d=(n.top+(l&&o?o.offsetTop:0))/a,f=n.width/i,p=n.height/a;return{width:f,height:p,top:d,right:c+f,bottom:d+p,left:c,x:c,y:d}}function bB(e){var t=ky(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function Hfe(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&yB(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Lh(e){return lc(e).getComputedStyle(e)}function eZe(e){return["table","td","th"].indexOf(lf(e))>=0}function tm(e){return((cx(e)?e.ownerDocument:e.document)||window.document).documentElement}function _3(e){return lf(e)==="html"?e:e.assignedSlot||e.parentNode||(yB(e)?e.host:null)||tm(e)}function bY(e){return!nu(e)||Lh(e).position==="fixed"?null:e.offsetParent}function tZe(e){var t=/firefox/i.test(p5()),r=/Trident/i.test(p5());if(r&&nu(e)){var n=Lh(e);if(n.position==="fixed")return null}var i=_3(e);for(yB(i)&&(i=i.host);nu(i)&&["html","body"].indexOf(lf(i))<0;){var a=Lh(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function pC(e){for(var t=lc(e),r=bY(e);r&&eZe(r)&&Lh(r).position==="static";)r=bY(r);return r&&(lf(r)==="html"||lf(r)==="body"&&Lh(r).position==="static")?t:r||tZe(e)||t}function wB(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function j2(e,t,r){return Og(e,uI(t,r))}function rZe(e,t,r){var n=j2(e,t,r);return n>r?r:n}function Wfe(){return{top:0,right:0,bottom:0,left:0}}function Vfe(e){return Object.assign({},Wfe(),e)}function qfe(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var nZe=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,Vfe(typeof t!="number"?t:qfe(t,hC))};function iZe(e){var t,r=e.state,n=e.name,i=e.options,a=r.elements.arrow,s=r.modifiersData.popperOffsets,o=ef(r.placement),l=wB(o),c=[El,uu].indexOf(o)>=0,d=c?"height":"width";if(!(!a||!s)){var f=nZe(i.padding,r),p=bB(a),m=l==="y"?Sl:El,x=l==="y"?cu:uu,v=r.rects.reference[d]+r.rects.reference[l]-s[l]-r.rects.popper[d],b=s[l]-r.rects.reference[l],w=pC(a),_=w?l==="y"?w.clientHeight||0:w.clientWidth||0:0,C=v/2-b/2,N=f[m],R=_-p[d]-f[x],P=_/2-p[d]/2+C,O=j2(N,P,R),D=l;r.modifiersData[n]=(t={},t[D]=O,t.centerOffset=O-P,t)}}function aZe(e){var t=e.state,r=e.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||Hfe(t.elements.popper,i)&&(t.elements.arrow=i))}const sZe={name:"arrow",enabled:!0,phase:"main",fn:iZe,effect:aZe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function _y(e){return e.split("-")[1]}var oZe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function lZe(e,t){var r=e.x,n=e.y,i=t.devicePixelRatio||1;return{x:Cy(r*i)/i||0,y:Cy(n*i)/i||0}}function wY(e){var t,r=e.popper,n=e.popperRect,i=e.placement,a=e.variation,s=e.offsets,o=e.position,l=e.gpuAcceleration,c=e.adaptive,d=e.roundOffsets,f=e.isFixed,p=s.x,m=p===void 0?0:p,x=s.y,v=x===void 0?0:x,b=typeof d=="function"?d({x:m,y:v}):{x:m,y:v};m=b.x,v=b.y;var w=s.hasOwnProperty("x"),_=s.hasOwnProperty("y"),C=El,N=Sl,R=window;if(c){var P=pC(r),O="clientHeight",D="clientWidth";if(P===lc(r)&&(P=tm(r),Lh(P).position!=="static"&&o==="absolute"&&(O="scrollHeight",D="scrollWidth")),P=P,i===Sl||(i===El||i===uu)&&a===RS){N=cu;var M=f&&P===R&&R.visualViewport?R.visualViewport.height:P[O];v-=M-n.height,v*=l?1:-1}if(i===El||(i===Sl||i===cu)&&a===RS){C=uu;var B=f&&P===R&&R.visualViewport?R.visualViewport.width:P[D];m-=B-n.width,m*=l?1:-1}}var U=Object.assign({position:o},c&&oZe),H=d===!0?lZe({x:m,y:v},lc(r)):{x:m,y:v};if(m=H.x,v=H.y,l){var Z;return Object.assign({},U,(Z={},Z[N]=_?"0":"",Z[C]=w?"0":"",Z.transform=(R.devicePixelRatio||1)<=1?"translate("+m+"px, "+v+"px)":"translate3d("+m+"px, "+v+"px, 0)",Z))}return Object.assign({},U,(t={},t[N]=_?v+"px":"",t[C]=w?m+"px":"",t.transform="",t))}function cZe(e){var t=e.state,r=e.options,n=r.gpuAcceleration,i=n===void 0?!0:n,a=r.adaptive,s=a===void 0?!0:a,o=r.roundOffsets,l=o===void 0?!0:o,c={placement:ef(t.placement),variation:_y(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,wY(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,wY(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const uZe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:cZe,data:{}};var z_={passive:!0};function dZe(e){var t=e.state,r=e.instance,n=e.options,i=n.scroll,a=i===void 0?!0:i,s=n.resize,o=s===void 0?!0:s,l=lc(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&c.forEach(function(d){d.addEventListener("scroll",r.update,z_)}),o&&l.addEventListener("resize",r.update,z_),function(){a&&c.forEach(function(d){d.removeEventListener("scroll",r.update,z_)}),o&&l.removeEventListener("resize",r.update,z_)}}const fZe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:dZe,data:{}};var hZe={left:"right",right:"left",bottom:"top",top:"bottom"};function JN(e){return e.replace(/left|right|bottom|top/g,function(t){return hZe[t]})}var pZe={start:"end",end:"start"};function SY(e){return e.replace(/start|end/g,function(t){return pZe[t]})}function SB(e){var t=lc(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function EB(e){return ky(tm(e)).left+SB(e).scrollLeft}function mZe(e,t){var r=lc(e),n=tm(e),i=r.visualViewport,a=n.clientWidth,s=n.clientHeight,o=0,l=0;if(i){a=i.width,s=i.height;var c=zfe();(c||!c&&t==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:a,height:s,x:o+EB(e),y:l}}function gZe(e){var t,r=tm(e),n=SB(e),i=(t=e.ownerDocument)==null?void 0:t.body,a=Og(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Og(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),o=-n.scrollLeft+EB(e),l=-n.scrollTop;return Lh(i||r).direction==="rtl"&&(o+=Og(r.clientWidth,i?i.clientWidth:0)-a),{width:a,height:s,x:o,y:l}}function CB(e){var t=Lh(e),r=t.overflow,n=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function Gfe(e){return["html","body","#document"].indexOf(lf(e))>=0?e.ownerDocument.body:nu(e)&&CB(e)?e:Gfe(_3(e))}function D2(e,t){var r;t===void 0&&(t=[]);var n=Gfe(e),i=n===((r=e.ownerDocument)==null?void 0:r.body),a=lc(n),s=i?[a].concat(a.visualViewport||[],CB(n)?n:[]):n,o=t.concat(s);return i?o:o.concat(D2(_3(s)))}function m5(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function xZe(e,t){var r=ky(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function EY(e,t,r){return t===Bfe?m5(mZe(e,r)):cx(t)?xZe(t,r):m5(gZe(tm(e)))}function vZe(e){var t=D2(_3(e)),r=["absolute","fixed"].indexOf(Lh(e).position)>=0,n=r&&nu(e)?pC(e):e;return cx(n)?t.filter(function(i){return cx(i)&&Hfe(i,n)&&lf(i)!=="body"}):[]}function yZe(e,t,r,n){var i=t==="clippingParents"?vZe(e):[].concat(t),a=[].concat(i,[r]),s=a[0],o=a.reduce(function(l,c){var d=EY(e,c,n);return l.top=Og(d.top,l.top),l.right=uI(d.right,l.right),l.bottom=uI(d.bottom,l.bottom),l.left=Og(d.left,l.left),l},EY(e,s,n));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Kfe(e){var t=e.reference,r=e.element,n=e.placement,i=n?ef(n):null,a=n?_y(n):null,s=t.x+t.width/2-r.width/2,o=t.y+t.height/2-r.height/2,l;switch(i){case Sl:l={x:s,y:t.y-r.height};break;case cu:l={x:s,y:t.y+t.height};break;case uu:l={x:t.x+t.width,y:o};break;case El:l={x:t.x-r.width,y:o};break;default:l={x:t.x,y:t.y}}var c=i?wB(i):null;if(c!=null){var d=c==="y"?"height":"width";switch(a){case Ey:l[c]=l[c]-(t[d]/2-r[d]/2);break;case RS:l[c]=l[c]+(t[d]/2-r[d]/2);break}}return l}function jS(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=n===void 0?e.placement:n,a=r.strategy,s=a===void 0?e.strategy:a,o=r.boundary,l=o===void 0?UJe:o,c=r.rootBoundary,d=c===void 0?Bfe:c,f=r.elementContext,p=f===void 0?Tw:f,m=r.altBoundary,x=m===void 0?!1:m,v=r.padding,b=v===void 0?0:v,w=Vfe(typeof b!="number"?b:qfe(b,hC)),_=p===Tw?$Je:Tw,C=e.rects.popper,N=e.elements[x?_:p],R=yZe(cx(N)?N:N.contextElement||tm(e.elements.popper),l,d,s),P=ky(e.elements.reference),O=Kfe({reference:P,element:C,placement:i}),D=m5(Object.assign({},C,O)),M=p===Tw?D:P,B={top:R.top-M.top+w.top,bottom:M.bottom-R.bottom+w.bottom,left:R.left-M.left+w.left,right:M.right-R.right+w.right},U=e.modifiersData.offset;if(p===Tw&&U){var H=U[i];Object.keys(B).forEach(function(Z){var ee=[uu,cu].indexOf(Z)>=0?1:-1,V=[Sl,cu].indexOf(Z)>=0?"y":"x";B[Z]+=H[V]*ee})}return B}function bZe(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=r.boundary,a=r.rootBoundary,s=r.padding,o=r.flipVariations,l=r.allowedAutoPlacements,c=l===void 0?Ufe:l,d=_y(n),f=d?o?yY:yY.filter(function(x){return _y(x)===d}):hC,p=f.filter(function(x){return c.indexOf(x)>=0});p.length===0&&(p=f);var m=p.reduce(function(x,v){return x[v]=jS(e,{placement:v,boundary:i,rootBoundary:a,padding:s})[ef(v)],x},{});return Object.keys(m).sort(function(x,v){return m[x]-m[v]})}function wZe(e){if(ef(e)===vB)return[];var t=JN(e);return[SY(e),t,SY(t)]}function SZe(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var i=r.mainAxis,a=i===void 0?!0:i,s=r.altAxis,o=s===void 0?!0:s,l=r.fallbackPlacements,c=r.padding,d=r.boundary,f=r.rootBoundary,p=r.altBoundary,m=r.flipVariations,x=m===void 0?!0:m,v=r.allowedAutoPlacements,b=t.options.placement,w=ef(b),_=w===b,C=l||(_||!x?[JN(b)]:wZe(b)),N=[b].concat(C).reduce(function(W,G){return W.concat(ef(G)===vB?bZe(t,{placement:G,boundary:d,rootBoundary:f,padding:c,flipVariations:x,allowedAutoPlacements:v}):G)},[]),R=t.rects.reference,P=t.rects.popper,O=new Map,D=!0,M=N[0],B=0;B<N.length;B++){var U=N[B],H=ef(U),Z=_y(U)===Ey,ee=[Sl,cu].indexOf(H)>=0,V=ee?"width":"height",te=jS(t,{placement:U,boundary:d,rootBoundary:f,altBoundary:p,padding:c}),se=ee?Z?uu:El:Z?cu:Sl;R[V]>P[V]&&(se=JN(se));var Q=JN(se),X=[];if(a&&X.push(te[H]<=0),o&&X.push(te[se]<=0,te[Q]<=0),X.every(function(W){return W})){M=U,D=!1;break}O.set(U,X)}if(D)for(var fe=x?3:1,Se=function(G){var ie=N.find(function(Ce){var re=O.get(Ce);if(re)return re.slice(0,G).every(function(ne){return ne})});if(ie)return M=ie,"break"},Y=fe;Y>0;Y--){var ce=Se(Y);if(ce==="break")break}t.placement!==M&&(t.modifiersData[n]._skip=!0,t.placement=M,t.reset=!0)}}const EZe={name:"flip",enabled:!0,phase:"main",fn:SZe,requiresIfExists:["offset"],data:{_skip:!1}};function CY(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function kY(e){return[Sl,uu,cu,El].some(function(t){return e[t]>=0})}function CZe(e){var t=e.state,r=e.name,n=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,s=jS(t,{elementContext:"reference"}),o=jS(t,{altBoundary:!0}),l=CY(s,n),c=CY(o,i,a),d=kY(l),f=kY(c);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":f})}const kZe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:CZe};function _Ze(e,t,r){var n=ef(e),i=[El,Sl].indexOf(n)>=0?-1:1,a=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,s=a[0],o=a[1];return s=s||0,o=(o||0)*i,[El,uu].indexOf(n)>=0?{x:o,y:s}:{x:s,y:o}}function NZe(e){var t=e.state,r=e.options,n=e.name,i=r.offset,a=i===void 0?[0,0]:i,s=Ufe.reduce(function(d,f){return d[f]=_Ze(f,t.rects,a),d},{}),o=s[t.placement],l=o.x,c=o.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[n]=s}const AZe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:NZe};function TZe(e){var t=e.state,r=e.name;t.modifiersData[r]=Kfe({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const IZe={name:"popperOffsets",enabled:!0,phase:"read",fn:TZe,data:{}};function OZe(e){return e==="x"?"y":"x"}function PZe(e){var t=e.state,r=e.options,n=e.name,i=r.mainAxis,a=i===void 0?!0:i,s=r.altAxis,o=s===void 0?!1:s,l=r.boundary,c=r.rootBoundary,d=r.altBoundary,f=r.padding,p=r.tether,m=p===void 0?!0:p,x=r.tetherOffset,v=x===void 0?0:x,b=jS(t,{boundary:l,rootBoundary:c,padding:f,altBoundary:d}),w=ef(t.placement),_=_y(t.placement),C=!_,N=wB(w),R=OZe(N),P=t.modifiersData.popperOffsets,O=t.rects.reference,D=t.rects.popper,M=typeof v=="function"?v(Object.assign({},t.rects,{placement:t.placement})):v,B=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),U=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,H={x:0,y:0};if(P){if(a){var Z,ee=N==="y"?Sl:El,V=N==="y"?cu:uu,te=N==="y"?"height":"width",se=P[N],Q=se+b[ee],X=se-b[V],fe=m?-D[te]/2:0,Se=_===Ey?O[te]:D[te],Y=_===Ey?-D[te]:-O[te],ce=t.elements.arrow,W=m&&ce?bB(ce):{width:0,height:0},G=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Wfe(),ie=G[ee],Ce=G[V],re=j2(0,O[te],W[te]),ne=C?O[te]/2-fe-re-ie-B.mainAxis:Se-re-ie-B.mainAxis,ge=C?-O[te]/2+fe+re+Ce+B.mainAxis:Y+re+Ce+B.mainAxis,we=t.elements.arrow&&pC(t.elements.arrow),q=we?N==="y"?we.clientTop||0:we.clientLeft||0:0,Ae=(Z=U==null?void 0:U[N])!=null?Z:0,Pe=se+ne-Ae-q,He=se+ge-Ae,je=j2(m?uI(Q,Pe):Q,se,m?Og(X,He):X);P[N]=je,H[N]=je-se}if(o){var $e,Ze=N==="x"?Sl:El,lt=N==="x"?cu:uu,kt=P[R],ht=R==="y"?"height":"width",_r=kt+b[Ze],er=kt-b[lt],ct=[Sl,El].indexOf(w)!==-1,Gt=($e=U==null?void 0:U[R])!=null?$e:0,Lt=ct?_r:kt-O[ht]-D[ht]-Gt+B.altAxis,dr=ct?kt+O[ht]+D[ht]-Gt-B.altAxis:er,Ht=m&&ct?rZe(Lt,kt,dr):j2(m?Lt:_r,kt,m?dr:er);P[R]=Ht,H[R]=Ht-kt}t.modifiersData[n]=H}}const RZe={name:"preventOverflow",enabled:!0,phase:"main",fn:PZe,requiresIfExists:["offset"]};function jZe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function DZe(e){return e===lc(e)||!nu(e)?SB(e):jZe(e)}function MZe(e){var t=e.getBoundingClientRect(),r=Cy(t.width)/e.offsetWidth||1,n=Cy(t.height)/e.offsetHeight||1;return r!==1||n!==1}function FZe(e,t,r){r===void 0&&(r=!1);var n=nu(t),i=nu(t)&&MZe(t),a=tm(t),s=ky(e,i,r),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!r)&&((lf(t)!=="body"||CB(a))&&(o=DZe(t)),nu(t)?(l=ky(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):a&&(l.x=EB(a))),{x:s.left+o.scrollLeft-l.x,y:s.top+o.scrollTop-l.y,width:s.width,height:s.height}}function LZe(e){var t=new Map,r=new Set,n=[];e.forEach(function(a){t.set(a.name,a)});function i(a){r.add(a.name);var s=[].concat(a.requires||[],a.requiresIfExists||[]);s.forEach(function(o){if(!r.has(o)){var l=t.get(o);l&&i(l)}}),n.push(a)}return e.forEach(function(a){r.has(a.name)||i(a)}),n}function BZe(e){var t=LZe(e);return QJe.reduce(function(r,n){return r.concat(t.filter(function(i){return i.phase===n}))},[])}function UZe(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function $Ze(e){var t=e.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var _Y={placement:"bottom",modifiers:[],strategy:"absolute"};function NY(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function zZe(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,i=t.defaultOptions,a=i===void 0?_Y:i;return function(o,l,c){c===void 0&&(c=a);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},_Y,a),modifiersData:{},elements:{reference:o,popper:l},attributes:{},styles:{}},f=[],p=!1,m={state:d,setOptions:function(w){var _=typeof w=="function"?w(d.options):w;v(),d.options=Object.assign({},a,d.options,_),d.scrollParents={reference:cx(o)?D2(o):o.contextElement?D2(o.contextElement):[],popper:D2(l)};var C=BZe($Ze([].concat(n,d.options.modifiers)));return d.orderedModifiers=C.filter(function(N){return N.enabled}),x(),m.update()},forceUpdate:function(){if(!p){var w=d.elements,_=w.reference,C=w.popper;if(NY(_,C)){d.rects={reference:FZe(_,pC(C),d.options.strategy==="fixed"),popper:bB(C)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(B){return d.modifiersData[B.name]=Object.assign({},B.data)});for(var N=0;N<d.orderedModifiers.length;N++){if(d.reset===!0){d.reset=!1,N=-1;continue}var R=d.orderedModifiers[N],P=R.fn,O=R.options,D=O===void 0?{}:O,M=R.name;typeof P=="function"&&(d=P({state:d,options:D,name:M,instance:m})||d)}}}},update:UZe(function(){return new Promise(function(b){m.forceUpdate(),b(d)})}),destroy:function(){v(),p=!0}};if(!NY(o,l))return m;m.setOptions(c).then(function(b){!p&&c.onFirstUpdate&&c.onFirstUpdate(b)});function x(){d.orderedModifiers.forEach(function(b){var w=b.name,_=b.options,C=_===void 0?{}:_,N=b.effect;if(typeof N=="function"){var R=N({state:d,name:w,instance:m,options:C}),P=function(){};f.push(R||P)}})}function v(){f.forEach(function(b){return b()}),f=[]}return m}}var HZe=[fZe,IZe,uZe,$fe,AZe,EZe,RZe,sZe,kZe],WZe=zZe({defaultModifiers:HZe}),VZe="tippy-box",Xfe="tippy-content",qZe="tippy-backdrop",Yfe="tippy-arrow",Qfe="tippy-svg-arrow",Fm={passive:!0,capture:!0},Jfe=function(){return document.body};function BD(e,t,r){if(Array.isArray(e)){var n=e[t];return n??(Array.isArray(r)?r[t]:r)}return e}function kB(e,t){var r={}.toString.call(e);return r.indexOf("[object")===0&&r.indexOf(t+"]")>-1}function Zfe(e,t){return typeof e=="function"?e.apply(void 0,t):e}function AY(e,t){if(t===0)return e;var r;return function(n){clearTimeout(r),r=setTimeout(function(){e(n)},t)}}function GZe(e){return e.split(/\s+/).filter(Boolean)}function G1(e){return[].concat(e)}function TY(e,t){e.indexOf(t)===-1&&e.push(t)}function KZe(e){return e.filter(function(t,r){return e.indexOf(t)===r})}function XZe(e){return e.split("-")[0]}function dI(e){return[].slice.call(e)}function IY(e){return Object.keys(e).reduce(function(t,r){return e[r]!==void 0&&(t[r]=e[r]),t},{})}function M2(){return document.createElement("div")}function N3(e){return["Element","Fragment"].some(function(t){return kB(e,t)})}function YZe(e){return kB(e,"NodeList")}function QZe(e){return kB(e,"MouseEvent")}function JZe(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function ZZe(e){return N3(e)?[e]:YZe(e)?dI(e):Array.isArray(e)?e:dI(document.querySelectorAll(e))}function UD(e,t){e.forEach(function(r){r&&(r.style.transitionDuration=t+"ms")})}function OY(e,t){e.forEach(function(r){r&&r.setAttribute("data-state",t)})}function eet(e){var t,r=G1(e),n=r[0];return n!=null&&(t=n.ownerDocument)!=null&&t.body?n.ownerDocument:document}function tet(e,t){var r=t.clientX,n=t.clientY;return e.every(function(i){var a=i.popperRect,s=i.popperState,o=i.props,l=o.interactiveBorder,c=XZe(s.placement),d=s.modifiersData.offset;if(!d)return!0;var f=c==="bottom"?d.top.y:0,p=c==="top"?d.bottom.y:0,m=c==="right"?d.left.x:0,x=c==="left"?d.right.x:0,v=a.top-n+f>l,b=n-a.bottom-p>l,w=a.left-r+m>l,_=r-a.right-x>l;return v||b||w||_})}function $D(e,t,r){var n=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){e[n](i,r)})}function PY(e,t){for(var r=t;r;){var n;if(e.contains(r))return!0;r=r.getRootNode==null||(n=r.getRootNode())==null?void 0:n.host}return!1}var Ud={isTouch:!1},RY=0;function ret(){Ud.isTouch||(Ud.isTouch=!0,window.performance&&document.addEventListener("mousemove",ehe))}function ehe(){var e=performance.now();e-RY<20&&(Ud.isTouch=!1,document.removeEventListener("mousemove",ehe)),RY=e}function net(){var e=document.activeElement;if(JZe(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function iet(){document.addEventListener("touchstart",ret,Fm),window.addEventListener("blur",net)}var aet=typeof window<"u"&&typeof document<"u",set=aet?!!window.msCrypto:!1,oet={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},cet={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Yu=Object.assign({appendTo:Jfe,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},oet,cet),uet=Object.keys(Yu),det=function(t){var r=Object.keys(t);r.forEach(function(n){Yu[n]=t[n]})};function the(e){var t=e.plugins||[],r=t.reduce(function(n,i){var a=i.name,s=i.defaultValue;if(a){var o;n[a]=e[a]!==void 0?e[a]:(o=Yu[a])!=null?o:s}return n},{});return Object.assign({},e,r)}function fet(e,t){var r=t?Object.keys(the(Object.assign({},Yu,{plugins:t}))):uet,n=r.reduce(function(i,a){var s=(e.getAttribute("data-tippy-"+a)||"").trim();if(!s)return i;if(a==="content")i[a]=s;else try{i[a]=JSON.parse(s)}catch{i[a]=s}return i},{});return n}function jY(e,t){var r=Object.assign({},t,{content:Zfe(t.content,[e])},t.ignoreAttributes?{}:fet(e,t.plugins));return r.aria=Object.assign({},Yu.aria,r.aria),r.aria={expanded:r.aria.expanded==="auto"?t.interactive:r.aria.expanded,content:r.aria.content==="auto"?t.interactive?null:"describedby":r.aria.content},r}var het=function(){return"innerHTML"};function g5(e,t){e[het()]=t}function DY(e){var t=M2();return e===!0?t.className=Yfe:(t.className=Qfe,N3(e)?t.appendChild(e):g5(t,e)),t}function MY(e,t){N3(t.content)?(g5(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?g5(e,t.content):e.textContent=t.content)}function x5(e){var t=e.firstElementChild,r=dI(t.children);return{box:t,content:r.find(function(n){return n.classList.contains(Xfe)}),arrow:r.find(function(n){return n.classList.contains(Yfe)||n.classList.contains(Qfe)}),backdrop:r.find(function(n){return n.classList.contains(qZe)})}}function rhe(e){var t=M2(),r=M2();r.className=VZe,r.setAttribute("data-state","hidden"),r.setAttribute("tabindex","-1");var n=M2();n.className=Xfe,n.setAttribute("data-state","hidden"),MY(n,e.props),t.appendChild(r),r.appendChild(n),i(e.props,e.props);function i(a,s){var o=x5(t),l=o.box,c=o.content,d=o.arrow;s.theme?l.setAttribute("data-theme",s.theme):l.removeAttribute("data-theme"),typeof s.animation=="string"?l.setAttribute("data-animation",s.animation):l.removeAttribute("data-animation"),s.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?l.setAttribute("role",s.role):l.removeAttribute("role"),(a.content!==s.content||a.allowHTML!==s.allowHTML)&&MY(c,e.props),s.arrow?d?a.arrow!==s.arrow&&(l.removeChild(d),l.appendChild(DY(s.arrow))):l.appendChild(DY(s.arrow)):d&&l.removeChild(d)}return{popper:t,onUpdate:i}}rhe.$$tippy=!0;var pet=1,H_=[],zD=[];function met(e,t){var r=jY(e,Object.assign({},Yu,the(IY(t)))),n,i,a,s=!1,o=!1,l=!1,c=!1,d,f,p,m=[],x=AY(Pe,r.interactiveDebounce),v,b=pet++,w=null,_=KZe(r.plugins),C={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},N={id:b,reference:e,popper:M2(),popperInstance:w,props:r,state:C,plugins:_,clearDelayTimeouts:Lt,setProps:dr,setContent:Ht,show:ye,hide:Me,hideWithInteractivity:qe,enable:ct,disable:Gt,unmount:it,destroy:ze};if(!r.render)return N;var R=r.render(N),P=R.popper,O=R.onUpdate;P.setAttribute("data-tippy-root",""),P.id="tippy-"+N.id,N.popper=P,e._tippy=N,P._tippy=N;var D=_.map(function(_e){return _e.fn(N)}),M=e.hasAttribute("aria-expanded");return we(),fe(),se(),Q("onCreate",[N]),r.showOnCreate&&_r(),P.addEventListener("mouseenter",function(){N.props.interactive&&N.state.isVisible&&N.clearDelayTimeouts()}),P.addEventListener("mouseleave",function(){N.props.interactive&&N.props.trigger.indexOf("mouseenter")>=0&&ee().addEventListener("mousemove",x)}),N;function B(){var _e=N.props.touch;return Array.isArray(_e)?_e:[_e,0]}function U(){return B()[0]==="hold"}function H(){var _e;return!!((_e=N.props.render)!=null&&_e.$$tippy)}function Z(){return v||e}function ee(){var _e=Z().parentNode;return _e?eet(_e):document}function V(){return x5(P)}function te(_e){return N.state.isMounted&&!N.state.isVisible||Ud.isTouch||d&&d.type==="focus"?0:BD(N.props.delay,_e?0:1,Yu.delay)}function se(_e){_e===void 0&&(_e=!1),P.style.pointerEvents=N.props.interactive&&!_e?"":"none",P.style.zIndex=""+N.props.zIndex}function Q(_e,ut,xt){if(xt===void 0&&(xt=!0),D.forEach(function(Pt){Pt[_e]&&Pt[_e].apply(Pt,ut)}),xt){var Dt;(Dt=N.props)[_e].apply(Dt,ut)}}function X(){var _e=N.props.aria;if(_e.content){var ut="aria-"+_e.content,xt=P.id,Dt=G1(N.props.triggerTarget||e);Dt.forEach(function(Pt){var Cr=Pt.getAttribute(ut);if(N.state.isVisible)Pt.setAttribute(ut,Cr?Cr+" "+xt:xt);else{var wn=Cr&&Cr.replace(xt,"").trim();wn?Pt.setAttribute(ut,wn):Pt.removeAttribute(ut)}})}}function fe(){if(!(M||!N.props.aria.expanded)){var _e=G1(N.props.triggerTarget||e);_e.forEach(function(ut){N.props.interactive?ut.setAttribute("aria-expanded",N.state.isVisible&&ut===Z()?"true":"false"):ut.removeAttribute("aria-expanded")})}}function Se(){ee().removeEventListener("mousemove",x),H_=H_.filter(function(_e){return _e!==x})}function Y(_e){if(!(Ud.isTouch&&(l||_e.type==="mousedown"))){var ut=_e.composedPath&&_e.composedPath()[0]||_e.target;if(!(N.props.interactive&&PY(P,ut))){if(G1(N.props.triggerTarget||e).some(function(xt){return PY(xt,ut)})){if(Ud.isTouch||N.state.isVisible&&N.props.trigger.indexOf("click")>=0)return}else Q("onClickOutside",[N,_e]);N.props.hideOnClick===!0&&(N.clearDelayTimeouts(),N.hide(),o=!0,setTimeout(function(){o=!1}),N.state.isMounted||ie())}}}function ce(){l=!0}function W(){l=!1}function G(){var _e=ee();_e.addEventListener("mousedown",Y,!0),_e.addEventListener("touchend",Y,Fm),_e.addEventListener("touchstart",W,Fm),_e.addEventListener("touchmove",ce,Fm)}function ie(){var _e=ee();_e.removeEventListener("mousedown",Y,!0),_e.removeEventListener("touchend",Y,Fm),_e.removeEventListener("touchstart",W,Fm),_e.removeEventListener("touchmove",ce,Fm)}function Ce(_e,ut){ne(_e,function(){!N.state.isVisible&&P.parentNode&&P.parentNode.contains(P)&&ut()})}function re(_e,ut){ne(_e,ut)}function ne(_e,ut){var xt=V().box;function Dt(Pt){Pt.target===xt&&($D(xt,"remove",Dt),ut())}if(_e===0)return ut();$D(xt,"remove",f),$D(xt,"add",Dt),f=Dt}function ge(_e,ut,xt){xt===void 0&&(xt=!1);var Dt=G1(N.props.triggerTarget||e);Dt.forEach(function(Pt){Pt.addEventListener(_e,ut,xt),m.push({node:Pt,eventType:_e,handler:ut,options:xt})})}function we(){U()&&(ge("touchstart",Ae,{passive:!0}),ge("touchend",He,{passive:!0})),GZe(N.props.trigger).forEach(function(_e){if(_e!=="manual")switch(ge(_e,Ae),_e){case"mouseenter":ge("mouseleave",He);break;case"focus":ge(set?"focusout":"blur",je);break;case"focusin":ge("focusout",je);break}})}function q(){m.forEach(function(_e){var ut=_e.node,xt=_e.eventType,Dt=_e.handler,Pt=_e.options;ut.removeEventListener(xt,Dt,Pt)}),m=[]}function Ae(_e){var ut,xt=!1;if(!(!N.state.isEnabled||$e(_e)||o)){var Dt=((ut=d)==null?void 0:ut.type)==="focus";d=_e,v=_e.currentTarget,fe(),!N.state.isVisible&&QZe(_e)&&H_.forEach(function(Pt){return Pt(_e)}),_e.type==="click"&&(N.props.trigger.indexOf("mouseenter")<0||s)&&N.props.hideOnClick!==!1&&N.state.isVisible?xt=!0:_r(_e),_e.type==="click"&&(s=!xt),xt&&!Dt&&er(_e)}}function Pe(_e){var ut=_e.target,xt=Z().contains(ut)||P.contains(ut);if(!(_e.type==="mousemove"&&xt)){var Dt=ht().concat(P).map(function(Pt){var Cr,wn=Pt._tippy,fr=(Cr=wn.popperInstance)==null?void 0:Cr.state;return fr?{popperRect:Pt.getBoundingClientRect(),popperState:fr,props:r}:null}).filter(Boolean);tet(Dt,_e)&&(Se(),er(_e))}}function He(_e){var ut=$e(_e)||N.props.trigger.indexOf("click")>=0&&s;if(!ut){if(N.props.interactive){N.hideWithInteractivity(_e);return}er(_e)}}function je(_e){N.props.trigger.indexOf("focusin")<0&&_e.target!==Z()||N.props.interactive&&_e.relatedTarget&&P.contains(_e.relatedTarget)||er(_e)}function $e(_e){return Ud.isTouch?U()!==_e.type.indexOf("touch")>=0:!1}function Ze(){lt();var _e=N.props,ut=_e.popperOptions,xt=_e.placement,Dt=_e.offset,Pt=_e.getReferenceClientRect,Cr=_e.moveTransition,wn=H()?x5(P).arrow:null,fr=Pt?{getBoundingClientRect:Pt,contextElement:Pt.contextElement||Z()}:e,Vi={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(We){var Qe=We.state;if(H()){var tt=V(),_t=tt.box;["placement","reference-hidden","escaped"].forEach(function(Ut){Ut==="placement"?_t.setAttribute("data-placement",Qe.placement):Qe.attributes.popper["data-popper-"+Ut]?_t.setAttribute("data-"+Ut,""):_t.removeAttribute("data-"+Ut)}),Qe.attributes.popper={}}}},jn=[{name:"offset",options:{offset:Dt}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Cr}},Vi];H()&&wn&&jn.push({name:"arrow",options:{element:wn,padding:3}}),jn.push.apply(jn,(ut==null?void 0:ut.modifiers)||[]),N.popperInstance=WZe(fr,P,Object.assign({},ut,{placement:xt,onFirstUpdate:p,modifiers:jn}))}function lt(){N.popperInstance&&(N.popperInstance.destroy(),N.popperInstance=null)}function kt(){var _e=N.props.appendTo,ut,xt=Z();N.props.interactive&&_e===Jfe||_e==="parent"?ut=xt.parentNode:ut=Zfe(_e,[xt]),ut.contains(P)||ut.appendChild(P),N.state.isMounted=!0,Ze()}function ht(){return dI(P.querySelectorAll("[data-tippy-root]"))}function _r(_e){N.clearDelayTimeouts(),_e&&Q("onTrigger",[N,_e]),G();var ut=te(!0),xt=B(),Dt=xt[0],Pt=xt[1];Ud.isTouch&&Dt==="hold"&&Pt&&(ut=Pt),ut?n=setTimeout(function(){N.show()},ut):N.show()}function er(_e){if(N.clearDelayTimeouts(),Q("onUntrigger",[N,_e]),!N.state.isVisible){ie();return}if(!(N.props.trigger.indexOf("mouseenter")>=0&&N.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(_e.type)>=0&&s)){var ut=te(!1);ut?i=setTimeout(function(){N.state.isVisible&&N.hide()},ut):a=requestAnimationFrame(function(){N.hide()})}}function ct(){N.state.isEnabled=!0}function Gt(){N.hide(),N.state.isEnabled=!1}function Lt(){clearTimeout(n),clearTimeout(i),cancelAnimationFrame(a)}function dr(_e){if(!N.state.isDestroyed){Q("onBeforeUpdate",[N,_e]),q();var ut=N.props,xt=jY(e,Object.assign({},ut,IY(_e),{ignoreAttributes:!0}));N.props=xt,we(),ut.interactiveDebounce!==xt.interactiveDebounce&&(Se(),x=AY(Pe,xt.interactiveDebounce)),ut.triggerTarget&&!xt.triggerTarget?G1(ut.triggerTarget).forEach(function(Dt){Dt.removeAttribute("aria-expanded")}):xt.triggerTarget&&e.removeAttribute("aria-expanded"),fe(),se(),O&&O(ut,xt),N.popperInstance&&(Ze(),ht().forEach(function(Dt){requestAnimationFrame(Dt._tippy.popperInstance.forceUpdate)})),Q("onAfterUpdate",[N,_e])}}function Ht(_e){N.setProps({content:_e})}function ye(){var _e=N.state.isVisible,ut=N.state.isDestroyed,xt=!N.state.isEnabled,Dt=Ud.isTouch&&!N.props.touch,Pt=BD(N.props.duration,0,Yu.duration);if(!(_e||ut||xt||Dt)&&!Z().hasAttribute("disabled")&&(Q("onShow",[N],!1),N.props.onShow(N)!==!1)){if(N.state.isVisible=!0,H()&&(P.style.visibility="visible"),se(),G(),N.state.isMounted||(P.style.transition="none"),H()){var Cr=V(),wn=Cr.box,fr=Cr.content;UD([wn,fr],0)}p=function(){var jn;if(!(!N.state.isVisible||c)){if(c=!0,P.offsetHeight,P.style.transition=N.props.moveTransition,H()&&N.props.animation){var Qo=V(),We=Qo.box,Qe=Qo.content;UD([We,Qe],Pt),OY([We,Qe],"visible")}X(),fe(),TY(zD,N),(jn=N.popperInstance)==null||jn.forceUpdate(),Q("onMount",[N]),N.props.animation&&H()&&re(Pt,function(){N.state.isShown=!0,Q("onShown",[N])})}},kt()}}function Me(){var _e=!N.state.isVisible,ut=N.state.isDestroyed,xt=!N.state.isEnabled,Dt=BD(N.props.duration,1,Yu.duration);if(!(_e||ut||xt)&&(Q("onHide",[N],!1),N.props.onHide(N)!==!1)){if(N.state.isVisible=!1,N.state.isShown=!1,c=!1,s=!1,H()&&(P.style.visibility="hidden"),Se(),ie(),se(!0),H()){var Pt=V(),Cr=Pt.box,wn=Pt.content;N.props.animation&&(UD([Cr,wn],Dt),OY([Cr,wn],"hidden"))}X(),fe(),N.props.animation?H()&&Ce(Dt,N.unmount):N.unmount()}}function qe(_e){ee().addEventListener("mousemove",x),TY(H_,x),x(_e)}function it(){N.state.isVisible&&N.hide(),N.state.isMounted&&(lt(),ht().forEach(function(_e){_e._tippy.unmount()}),P.parentNode&&P.parentNode.removeChild(P),zD=zD.filter(function(_e){return _e!==N}),N.state.isMounted=!1,Q("onHidden",[N]))}function ze(){N.state.isDestroyed||(N.clearDelayTimeouts(),N.unmount(),q(),delete e._tippy,N.state.isDestroyed=!0,Q("onDestroy",[N]))}}function mC(e,t){t===void 0&&(t={});var r=Yu.plugins.concat(t.plugins||[]);iet();var n=Object.assign({},t,{plugins:r}),i=ZZe(e),a=i.reduce(function(s,o){var l=o&&met(o,n);return l&&s.push(l),s},[]);return N3(e)?a[0]:a}mC.defaultProps=Yu;mC.setDefaultProps=det;mC.currentInput=Ud;Object.assign({},$fe,{effect:function(t){var r=t.state,n={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(r.elements.popper.style,n.popper),r.styles=n,r.elements.arrow&&Object.assign(r.elements.arrow.style,n.arrow)}});mC.setDefaultProps({render:rhe});const get=I.forwardRef((e,t)=>{const[r,n]=I.useState(0),i=d=>{const f=e.items[d];f&&e.command({id:f.id,label:f.label,anchor:f.anchor})},a=()=>{n((r+e.items.length-1)%e.items.length)},s=()=>{n((r+1)%e.items.length)},o=()=>{i(r)};I.useEffect(()=>n(0),[e.items]),I.useImperativeHandle(t,()=>({onKeyDown:({event:d})=>d.key==="ArrowUp"?(a(),!0):d.key==="ArrowDown"?(s(),!0):d.key==="Enter"?(o(),!0):!1}));const l=e.query||"",c=e.items.length>0;return u.jsx("div",{className:"bg-surface border border-border rounded-lg shadow-xl overflow-hidden min-w-[200px] z-50 flex flex-col",children:c?e.items.map((d,f)=>u.jsxs("button",{className:`flex items-center gap-2 text-left px-3 py-2 text-sm w-full transition-colors ${f===r?"bg-primary text-on-primary":"bg-surface text-text-primary hover:bg-background"}`,onClick:()=>i(f),children:[d.type==="section"?u.jsx(T8e,{size:14,className:f===r?"text-on-primary":"text-text-secondary"}):u.jsx(Zc,{size:14,className:f===r?"text-on-primary":"text-text-secondary"}),u.jsxs("div",{className:"flex flex-col min-w-0",children:[u.jsx("span",{className:"truncate font-medium",children:d.label}),d.type==="section"&&u.jsx("span",{className:"text-[10px] opacity-70",children:"Section"})]})]},f)):u.jsx("div",{className:"px-3 py-2 text-sm text-text-secondary italic",children:l.length===0?"Start typing to search...":"No articles found."})})}),xet={items:async({query:e})=>{if(!e)return[];try{return(await cr.get(`/api/kb/search?q=${e}`)).data.slice(0,5)}catch(t){return console.error(t),[]}},render:()=>{let e,t;return{onStart:r=>{e=new dfe(get,{props:r,editor:r.editor}),r.clientRect&&(t=mC("body",{getReferenceClientRect:r.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"}))},onUpdate(r){e.updateProps(r),e.updateProps({query:r.query}),r.clientRect&&t[0].setProps({getReferenceClientRect:r.clientRect})},onKeyDown(r){var n;return r.event.key==="Escape"?(t[0].hide(),!0):(n=e.ref)==null?void 0:n.onKeyDown(r)},onExit(){t[0].destroy(),e.destroy()}}}};function vet({onClose:e,onSelect:t}){const[r,n]=I.useState("upload"),[i,a]=I.useState("KB"),[s,o]=I.useState([]),[l,c]=I.useState(!1),[d,f]=I.useState(!1);I.useEffect(()=>{r==="library"&&p()},[r,i]);const p=async()=>{c(!0);try{const x=await cr.get(`/api/kb/images?source=${i}`);o(x.data)}catch(x){console.error(x)}finally{c(!1)}},m=async x=>{var w;const v=(w=x.target.files)==null?void 0:w[0];if(!v)return;const b=new FormData;b.append("file",v),f(!0);try{const _=await cr.post("/api/kb/images",b,{headers:{"Content-Type":"multipart/form-data"}});t(_.data.url)}catch(_){console.error(_),Re.error("Upload failed")}finally{f(!1)}};return u.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:e,children:u.jsxs("div",{className:"bg-surface border border-border w-full max-w-2xl h-[600px] flex flex-col rounded-xl shadow-2xl overflow-hidden",onClick:x=>x.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border bg-background",children:[u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:()=>n("upload"),className:`px-3 py-1 text-sm font-bold rounded-full transition-colors ${r==="upload"?"bg-primary text-on-primary":"text-text-secondary hover:bg-surface"}`,children:"Upload New"}),u.jsx("button",{onClick:()=>n("library"),className:`px-3 py-1 text-sm font-bold rounded-full transition-colors ${r==="library"?"bg-primary text-on-primary":"text-text-secondary hover:bg-surface"}`,children:"Library"})]}),r==="library"&&u.jsxs("select",{className:"bg-background border border-border rounded px-2 py-1 text-xs",value:i,onChange:x=>a(x.target.value),children:[u.jsx("option",{value:"KB",children:"KB Assets"}),u.jsx("option",{value:"PROJECT",children:"Job Photos"}),u.jsx("option",{value:"ALL",children:"All Images"})]}),u.jsx("button",{onClick:e,className:"text-text-secondary hover:text-text-primary",children:u.jsx(Gr,{size:20})})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-surface",children:[r==="upload"&&u.jsx("div",{className:"h-full flex flex-col items-center justify-center border-2 border-dashed border-border rounded-xl bg-background/50 hover:bg-background/80 transition-colors",children:d?u.jsxs("div",{className:"text-center",children:[u.jsx(P0,{className:"animate-spin mx-auto mb-2 text-primary",size:48}),u.jsx("p",{className:"text-text-secondary font-medium",children:"Optimizing & Uploading..."})]}):u.jsxs("label",{className:"cursor-pointer text-center p-12 w-full h-full flex flex-col items-center justify-center",children:[u.jsx("div",{className:"bg-primary/10 p-4 rounded-full mb-4 text-primary",children:u.jsx(db,{size:32})}),u.jsx("h3",{className:"text-lg font-bold text-text-primary",children:"Click to Upload"}),u.jsx("p",{className:"text-text-secondary text-sm mt-2",children:"Images, PDFs, Docs supported"}),u.jsx("input",{type:"file",className:"hidden",accept:"*",onChange:m})]})}),r==="library"&&u.jsx("div",{children:l?u.jsx("div",{className:"flex justify-center p-12",children:u.jsx(P0,{className:"animate-spin text-primary"})}):s.length===0?u.jsx("div",{className:"text-center py-12 text-text-tertiary",children:"No images found."}):u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-4",children:s.map(x=>{var v;return u.jsxs("button",{onClick:()=>t(x.url),className:"group relative aspect-square rounded-lg overflow-hidden border border-border hover:border-primary focus:ring-2 ring-primary focus:outline-none",children:[(v=x.mimeType)!=null&&v.startsWith("image/")||x.url.match(/\.(jpeg|jpg|gif|png|webp)$/i)?u.jsx("img",{src:x.thumbnailUrl||x.url,alt:"",className:"w-full h-full object-cover transition-transform group-hover:scale-110"}):u.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-surface-hover text-text-secondary",children:[u.jsx(Zc,{size:48,className:"mb-2"}),u.jsx("span",{className:"text-xs px-2 text-center truncate w-full",children:x.fileName||"Document"})]}),u.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:u.jsx("span",{className:"text-white text-xs font-bold bg-black/50 px-2 py-1 rounded",children:"Select"})})]},x.id)})})})]})]})})}function yet(e){const{node:t,updateAttributes:r,selected:n}=e,[i,a]=I.useState(!1),s=I.useRef(null),o=I.useRef(0),l=I.useRef(0),c=w=>{w.preventDefault(),w.stopPropagation(),s.current&&(a(!0),o.current=w.clientX,l.current=s.current.offsetWidth,document.addEventListener("mousemove",d),document.addEventListener("mouseup",f))},d=I.useCallback(w=>{const C=w.clientX-o.current,N=Math.max(100,l.current+C);r({width:N})},[r]),f=I.useCallback(()=>{a(!1),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",f)},[d]),p=w=>{w.stopPropagation(),s.current&&(a(!0),o.current=w.touches[0].clientX,l.current=s.current.offsetWidth,document.addEventListener("touchmove",m,{passive:!1}),document.addEventListener("touchend",x))},m=I.useCallback(w=>{w.preventDefault();const C=w.touches[0].clientX-o.current,N=Math.max(100,l.current+C);r({width:N})},[r]),x=I.useCallback(()=>{a(!1),document.removeEventListener("touchmove",m),document.removeEventListener("touchend",x)},[m]),v=t.attrs.align||"center";let b={};return v==="left"?b={float:"left",marginRight:"1rem"}:v==="right"?b={float:"right",marginLeft:"1rem"}:b={display:"block",marginLeft:"auto",marginRight:"auto",textAlign:"center"},u.jsxs(zYe,{className:"relative transition-all my-4 mb-8",style:b,children:[u.jsxs("div",{className:`relative inline-block group ${n||i?"ring-2 ring-primary rounded":""}`,children:[u.jsx("img",{ref:s,src:t.attrs.src,alt:t.attrs.alt,title:t.attrs.title,width:t.attrs.width,className:"block rounded max-w-full h-auto"}),u.jsx("div",{className:`absolute bottom-2 right-2 w-6 h-6 md:w-4 md:h-4 bg-primary border-2 border-white rounded-full cursor-nwse-resize shadow-md
                        ${n||i?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity`,onMouseDown:c,onTouchStart:p}),i&&u.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded pointer-events-none",children:[t.attrs.width,"px"]})]}),(n||t.attrs.caption)&&u.jsx("div",{className:`text-center mt-2 ${n?"opacity-100":"opacity-70"} transition-opacity`,children:u.jsx("input",{className:"bg-transparent text-center text-sm text-text-secondary placeholder-text-tertiary border-none focus:ring-0 focus:outline-none w-full italic",placeholder:"Add a caption...",value:t.attrs.caption||"",onChange:w=>r({caption:w.target.value}),onMouseDown:w=>w.stopPropagation(),onClick:w=>w.stopPropagation()})})]})}const bet=`
  .ProseMirror p { margin-bottom: 0.75em; line-height: 1.6; overflow-wrap: break-word; }
  .ProseMirror p:empty::before { content: " "; display: inline-block; }
  .ProseMirror h1 { font-size: 1.75em; font-weight: 800; margin-top: 1.5em; margin-bottom: 0.5em; color: var(--color-text-primary); }
  .ProseMirror h2 { font-size: 1.4em; font-weight: 700; margin-top: 1.25em; margin-bottom: 0.5em; color: var(--color-text-primary); }
  .ProseMirror h3 { font-size: 1.2em; font-weight: 600; margin-top: 1em; margin-bottom: 0.5em; color: var(--color-text-primary); }
  .ProseMirror ul { list-style-type: disc; padding-left: 1.5em; margin-bottom: 1em; }
  .ProseMirror ol { list-style-type: decimal; padding-left: 1.5em; margin-bottom: 1em; }
  .ProseMirror a { color: var(--color-primary); text-decoration: underline; cursor: pointer; }
  .ProseMirror img { max-width: 100%; height: auto; border-radius: 0.5rem; margin: 1em 0; display: inline-block; }
  
  /* Style for the Wiki Link Bubble inside the Editor */
  .ProseMirror .kb-mention {
      color: var(--color-primary);
      background-color: color-mix(in srgb, var(--color-primary), white 85%); 
      padding: 0.1rem 0.3rem;
      border-radius: 0.3rem;
      font-weight: 600;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.2s;
      /* FIX: Allow chips to wrap on mobile */
      white-space: normal;
      display: inline-block;
      margin-bottom: 2px;
  }
  .ProseMirror .kb-mention:hover {
      background-color: var(--color-primary);
      color: var(--color-on-primary);
  }
  .ProseMirror:focus { outline: none; }

  /* Text Alignment Styles */
  .ProseMirror p.is-right { text-align: right; }
  .ProseMirror p.is-center { text-align: center; }
  .ProseMirror p.is-left { text-align: left; }
`,wet=({editor:e,onOpenMedia:t})=>{if(!e)return null;const r=s=>`p-2 rounded hover:bg-surface transition-colors ${s?"text-primary bg-primary/10":"text-text-secondary"}`,n=()=>{const s=e.getAttributes("link").href,o=window.prompt("URL",s);if(o!==null){if(o===""){e.chain().focus().extendMarkRange("link").unsetLink().run();return}e.chain().focus().extendMarkRange("link").setLink({href:o}).run()}},i=s=>{e.isActive("image")?e.chain().focus().updateAttributes("image",{align:s}).run():e.chain().focus().setTextAlign(s).run()},a=s=>e.isActive("image")?e.getAttributes("image").align===s:e.isActive({textAlign:s});return u.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-border p-2 bg-background z-10",children:[u.jsx("button",{onClick:()=>e.chain().focus().toggleBold().run(),className:r(e.isActive("bold"))+" shrink-0",title:"Bold",children:u.jsx(m8e,{size:18})}),u.jsx("button",{onClick:()=>e.chain().focus().toggleItalic().run(),className:r(e.isActive("italic"))+" shrink-0",title:"Italic",children:u.jsx(R8e,{size:18})}),u.jsx("button",{onClick:n,className:r(e.isActive("link"))+" shrink-0",title:"Add Link",children:u.jsx(Ux,{size:18})}),u.jsx("button",{onClick:t,className:r(!1)+" shrink-0",title:"Insert Image",children:u.jsx(Jd,{size:18})}),u.jsx("div",{className:"w-px h-6 bg-border mx-2 shrink-0"}),u.jsx("button",{onClick:()=>e.chain().focus().toggleHeading({level:1}).run(),className:r(e.isActive("heading",{level:1}))+" shrink-0",title:"Heading 1",children:u.jsx(I8e,{size:18})}),u.jsx("button",{onClick:()=>e.chain().focus().toggleHeading({level:2}).run(),className:r(e.isActive("heading",{level:2}))+" shrink-0",title:"Heading 2",children:u.jsx(O8e,{size:18})}),u.jsx("div",{className:"w-px h-6 bg-border mx-2 shrink-0"}),u.jsx("button",{onClick:()=>i("left"),className:r(a("left"))+" shrink-0",title:"Align Left",children:u.jsx(d8e,{size:18})}),u.jsx("button",{onClick:()=>i("center"),className:r(a("center"))+" shrink-0",title:"Align Center",children:u.jsx(u8e,{size:18})}),u.jsx("button",{onClick:()=>i("right"),className:r(a("right"))+" shrink-0",title:"Align Right",children:u.jsx(f8e,{size:18})}),u.jsx("div",{className:"w-px h-6 bg-border mx-2 shrink-0"}),u.jsx("button",{onClick:()=>e.chain().focus().toggleBulletList().run(),className:r(e.isActive("bulletList"))+" shrink-0",title:"Bullet List",children:u.jsx(M8e,{size:18})}),u.jsx("button",{onClick:()=>e.chain().focus().toggleOrderedList().run(),className:r(e.isActive("orderedList"))+" shrink-0",title:"Ordered List",children:u.jsx(D8e,{size:18})})]})},nhe=({content:e,onChange:t,editable:r=!0})=>{const[n,i]=I.useState(!1),a=BYe({extensions:[AJe.configure({heading:!1,codeBlock:!1}),cQe.configure({levels:[1,2,3]}).extend({addAttributes(){return{id:{default:null,parseHTML:o=>o.getAttribute("id"),renderHTML:o=>o.id?{id:o.id}:{}}}}}),UQe.configure({openOnClick:!1}),RJe.configure({types:["heading","paragraph"]}),OJe.extend({addAttributes(){var o;return{...(o=this.parent)==null?void 0:o.call(this),width:{default:null,parseHTML:l=>l.getAttribute("width"),renderHTML:l=>({width:l.width})},align:{default:"center",parseHTML:l=>l.getAttribute("align"),renderHTML:l=>({align:l.align})},caption:{default:"",parseHTML:l=>l.getAttribute("data-caption"),renderHTML:l=>({"data-caption":l.caption})}}},addNodeView(){return GYe(yet)}}).configure({inline:!0}),BJe.configure({HTMLAttributes:{class:"kb-mention"},suggestion:{...xet,char:"[[",allowSpaces:!0},addAttributes(){return{id:{default:null},anchor:{default:null,parseHTML:o=>o.getAttribute("data-anchor"),renderHTML:o=>({"data-anchor":o.anchor})},label:{default:null,parseHTML:o=>o.getAttribute("data-label"),renderHTML:o=>({"data-label":o.label})}}},renderText({node:o}){return`${o.attrs.label??o.attrs.id}`}})],content:e,editable:r,onUpdate:({editor:o})=>{t(o.getHTML())},editorProps:{attributes:{class:"h-full outline-none text-text-primary"},handlePaste:(o,l,c)=>{var f;const d=(f=l.clipboardData)==null?void 0:f.items[0];if((d==null?void 0:d.kind)==="file"){l.preventDefault();const p=d.getAsFile();return p&&s(p,o),!0}return!1},handleDrop:(o,l,c,d)=>{if(!d&&l.dataTransfer&&l.dataTransfer.files&&l.dataTransfer.files[0]){const f=l.dataTransfer.files[0];return l.preventDefault(),s(f,o),!0}return!1}}}),s=async(o,l)=>{const c=o.type.startsWith("image/"),d=Re.loading(c?"Uploading image...":"Uploading file..."),f=new FormData;f.append("file",o);try{const p=await cr.post("/api/kb/images",f,{headers:{"Content-Type":"multipart/form-data"}}),{url:m}=p.data,{schema:x}=l.state;if(c){const v=x.nodes.image.create({src:m}),b=l.state.tr.replaceSelectionWith(v);l.dispatch(b)}else{const v=x.marks.link.create({href:m}),b=x.text(` ${o.name}`,[v]),w=l.state.tr.replaceSelectionWith(b);l.dispatch(w)}Re.success("Uploaded!",{id:d})}catch(p){console.error(p),Re.error("Upload failed",{id:d})}};return u.jsxs("div",{className:`border border-border rounded-lg overflow-hidden h-full flex flex-col ${r?"bg-surface":"bg-transparent border-0"}`,children:[u.jsx("style",{children:bet}),r&&u.jsx(wet,{editor:a,onOpenMedia:()=>i(!0)}),u.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-6 cursor-text",onClick:()=>a==null?void 0:a.commands.focus(),children:u.jsx(PYe,{editor:a})}),n&&u.jsx(vet,{onClose:()=>i(!1),onSelect:o=>{o.match(/\.(jpeg|jpg|gif|png|webp|svg|bmp)$/i)!=null?a==null||a.chain().focus().setImage({src:o}).run():a==null||a.chain().focus().insertContent(`<a href="${o}" target="_blank"> Attachment</a> `).run(),i(!1)}})]})},Eet=({templateKey:e,onClose:t,onSave:r})=>{const[n,i]=I.useState(null),[a,s]=I.useState(""),[o,l]=I.useState(""),[c,d]=I.useState(!0),[f,p]=I.useState(!1),[m,x]=I.useState(""),[v,b]=I.useState(!1);I.useEffect(()=>{e&&w()},[e]);const w=async()=>{if(e){d(!0);try{const R=await z1.getByKey(e);i(R),s(R.subject),l(R.body_content||"<p>Start typing to override the system default...</p>")}catch(R){console.error(R)}finally{d(!1)}}},_=async()=>{if(e){p(!0);try{await z1.update(e,{subject:a,body_content:o}),r(),t()}catch(R){console.error(R),alert("Failed to save template")}finally{p(!1)}}},C=async()=>{if(confirm("Are you sure? This will delete your custom template and revert to the system default file.")&&e){p(!0);try{await z1.update(e,{subject:(n==null?void 0:n.subject)||"",body_content:null}),r(),t()}catch(R){console.error(R)}finally{p(!1)}}},N=async()=>{if(!(!m||!e))try{await z1.update(e,{subject:a,body_content:o}),await z1.sendTest(e,m),alert(`Test email sent to ${m}`),b(!1)}catch{alert("Failed to send test email")}};return e?u.jsx(td,{children:u.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6",children:[u.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),u.jsxs("div",{className:"relative w-full max-w-4xl bg-surface rounded-xl shadow-2xl flex flex-col max-h-[90vh]",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border bg-surface-highlight rounded-t-xl",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:c?"Loading...":`Edit: ${n==null?void 0:n.description}`}),u.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Customize the email content. Leave empty to use system default."})]}),u.jsx("button",{onClick:t,className:"p-2 hover:bg-black/5 rounded-full text-text-secondary",children:u.jsx(Gr,{size:20})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:c?u.jsx("div",{className:"flex justify-center p-12",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Subject Line"}),u.jsx("input",{type:"text",value:a,onChange:R=>s(R.target.value),className:"w-full p-2 bg-background border border-border rounded-lg text-text-primary focus:ring-2 focus:ring-primary focus:border-transparent outline-none"})]}),(n==null?void 0:n.available_variables)&&n.available_variables.length>0&&u.jsxs("div",{className:"p-3 bg-blue-50/50 border border-blue-100 rounded-lg text-sm text-text-secondary",children:[u.jsx("span",{className:"font-semibold text-blue-600 block mb-1",children:"Available Variables:"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:n.available_variables.map(R=>u.jsx("code",{className:"px-1.5 py-0.5 bg-white border border-blue-200 rounded text-blue-800 text-xs cursor-pointer hover:bg-blue-50",onClick:()=>{navigator.clipboard.writeText(`{{${R}}}`),alert(`Copied {{${R}}} to clipboard!`)},title:"Click to copy",children:`{{${R}}}`},R))})]}),u.jsx("div",{className:"border border-border rounded-lg overflow-hidden min-h-[400px] flex flex-col",children:u.jsx(nhe,{content:o,onChange:l,placeholder:"Write your email content here..."})})]})}),u.jsxs("div",{className:"p-4 border-t border-border bg-surface-highlight rounded-b-xl flex justify-between items-center",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:C,className:"flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Revert to original system template",children:[u.jsx(tC,{size:16}),u.jsx("span",{className:"hidden sm:inline",children:"Reset to Default"})]}),u.jsx("div",{className:"relative flex items-center",children:v?u.jsxs("div",{className:"flex items-center gap-2 bg-background border border-border rounded-lg p-1 animate-in fade-in slide-in-from-left-5",children:[u.jsx("input",{type:"email",placeholder:"your@email.com",value:m,onChange:R=>x(R.target.value),className:"text-sm bg-transparent outline-none px-2 w-48 text-text-primary"}),u.jsx("button",{onClick:N,className:"p-1.5 bg-primary text-white rounded hover:bg-primary-hover",children:u.jsx(uy,{size:14})}),u.jsx("button",{onClick:()=>b(!1),className:"p-1.5 text-text-secondary hover:text-text-primary",children:u.jsx(Gr,{size:14})})]}):u.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 px-3 py-2 text-sm text-text-secondary hover:bg-black/5 rounded-lg transition-colors",children:[u.jsx(uy,{size:16}),u.jsx("span",{className:"hidden sm:inline",children:"Send Test"})]})})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-text-secondary hover:text-text-primary transition-colors",children:"Cancel"}),u.jsx("button",{onClick:_,disabled:f||c,className:"flex items-center gap-2 px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-hover transition-colors font-medium disabled:opacity-50",children:f?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white/30 border-t-white"}),"Saving..."]}):u.jsxs(u.Fragment,{children:[u.jsx(vs,{size:18}),"Save Template"]})})]})]})]})]})}):null},Cet={dailyUpdateTime:"07:00",timezone:"America/New_York",pastDueReminders:{isEnabled:!1,frequencyDays:2},upcomingJobReminders:{isEnabled:!1}},ket=["America/New_York","America/Chicago","America/Denver","America/Los_Angeles","America/Phoenix","America/Anchorage","Pacific/Honolulu"],_et=()=>{var b;const[e,t]=I.useState(Cet),[r,n]=I.useState({emailUser:"",emailPass:""}),[i,a]=I.useState(!1),[s,o]=I.useState(!0),[l,c]=I.useState([]),[d,f]=I.useState(null);I.useEffect(()=>{(async()=>{try{const[_,C]=await Promise.all([XA("email"),XA("email_settings")]);t(N=>({...N,..._,dailyUpdateTime:_.dailyUpdateTime||N.dailyUpdateTime,timezone:_.timezone||N.timezone,pastDueReminders:{...N.pastDueReminders,..._.pastDueReminders||{}},upcomingJobReminders:{isEnabled:!1,..._.upcomingJobReminders||{}}})),n({emailUser:C.emailUser||"",emailPass:C.emailPass||""})}catch(_){console.error("Failed to fetch system email settings:",_),qr.error("Could not load system email settings.")}finally{o(!1)}})(),p()},[]);const p=async()=>{try{const w=await z1.getAll();c(w)}catch(w){console.error("Failed to fetch email templates:",w)}},m=(w,_)=>{if(w.startsWith("pastDueReminders.")){const C=w.split(".")[1];let N=_;C==="frequencyDays"&&(N=Math.max(1,parseInt(_,10)||1)),t(R=>({...R,pastDueReminders:{...R.pastDueReminders,[C]:N}}))}else if(w.startsWith("upcomingJobReminders.")){const C=w.split(".")[1];t(N=>({...N,upcomingJobReminders:{...N.upcomingJobReminders||{isEnabled:!1},[C]:_}}))}else t(C=>({...C,[w]:_}))},x=async()=>{const w=qr.loading("Sending test email...");try{await D6e(),qr.success("Test email sent!",{id:w})}catch{qr.error("Failed to send test email.",{id:w})}},v=async()=>{try{await Promise.all([n8("email",e),n8("email_settings",r)]),qr.success("System email settings saved successfully!")}catch(w){console.error("Failed to save system email settings:",w),qr.error("Failed to save system email settings.")}};return s?u.jsx("div",{className:"p-4 text-center text-text-secondary",children:"Loading system settings..."}):u.jsxs("section",{className:"md:bg-surface-container-low md:p-8 md:rounded-2xl md:border md:border-outline/10 max-w-5xl mx-auto transition-all",children:[u.jsxs("h2",{className:"text-2xl font-semibold text-text-primary mb-2 flex items-center gap-3",children:[u.jsx(Xc,{className:"w-7 h-7 text-accent"}),"System-Wide Email Settings"]}),u.jsx("p",{className:"text-text-secondary mb-6",children:"These settings are global and affect all users and automated emails sent to customers."}),u.jsxs("div",{className:"space-y-6 pt-6 mb-8",children:[u.jsxs("h3",{className:"text-lg font-medium text-text-primary mb-2 flex items-center gap-2",children:[u.jsx(j7,{className:"w-4 h-4 text-secondary"})," SMTP Credentials (Gmail)"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Gmail Address"}),u.jsx("input",{type:"email",value:r.emailUser,onChange:w=>n(_=>({..._,emailUser:w.target.value})),placeholder:"company@gmail.com",className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-all placeholder:text-text-tertiary"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"App Password"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:i?"text":"password",value:r.emailPass,onChange:w=>n(_=>({..._,emailPass:w.target.value})),placeholder:r.emailPass==="********"?"********":"Enter App Password",className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-all pr-10"}),u.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-text-secondary hover:text-text-primary",children:i?u.jsx(coe,{size:16}):u.jsx(R7,{size:16})})]}),u.jsx("p",{className:"text-xs text-text-tertiary mt-1",children:'Use an "App Password" generated from your Google Account settings, not your login password.'})]})]}),u.jsx("div",{className:"mt-2 flex justify-end",children:u.jsxs("button",{onClick:x,type:"button",className:"text-sm flex items-center gap-2 text-primary hover:text-primary-hover font-bold bg-primary/5 hover:bg-primary/10 px-4 py-2 rounded-full transition-colors",children:[u.jsx(uy,{size:16})," Send Test Email"]})})]}),u.jsxs("div",{className:"space-y-6 border-t border-outline/10 pt-6 mb-8",children:[u.jsxs("h3",{className:"text-lg font-medium text-text-primary mb-2 flex items-center gap-2",children:[u.jsx(od,{className:"w-4 h-4 text-secondary"})," Company Communication Schedule"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"p-4 bg-surface-container-highest rounded-xl border border-outline/10 flex flex-col gap-2",children:[u.jsx("label",{className:"text-sm font-medium text-text-secondary",children:"Send daily updates at:"}),u.jsx("input",{type:"time",value:e.dailyUpdateTime||"07:00",onChange:w=>t(_=>({..._,dailyUpdateTime:w.target.value})),className:"p-2 bg-surface-container-low border border-outline/10 rounded-lg text-text-primary cursor-pointer w-full focus:border-primary focus:outline-none"})]}),u.jsxs("div",{className:"p-4 bg-surface-container-highest rounded-xl border border-outline/10 flex flex-col gap-2",children:[u.jsxs("label",{className:"text-sm font-medium text-text-secondary flex items-center gap-2",children:[u.jsx(Zg,{size:14})," Server Timezone"]}),u.jsx("select",{value:e.timezone||"America/New_York",onChange:w=>t(_=>({..._,timezone:w.target.value})),className:"p-2 bg-surface-container-low border border-outline/10 rounded-lg text-text-primary w-full focus:border-primary focus:outline-none",children:ket.map(w=>u.jsx("option",{value:w,children:w},w))})]})]})]}),u.jsxs("div",{className:"space-y-4 border-t border-outline/10 pt-6 mb-8",children:[u.jsx("h3",{className:"text-lg font-medium text-text-primary mb-2",children:"Customer Automations"}),u.jsxs("div",{className:"flex items-center justify-between py-4 border-b border-outline/10 md:bg-surface-container-highest md:border md:rounded-xl md:p-6 md:border-outline/10",children:[u.jsx("label",{htmlFor:"pastDueIsEnabled",className:"font-medium text-text-primary",children:"Enable Past Due Reminders"}),u.jsxs("div",{className:"relative inline-block w-14 h-8 align-middle select-none transition duration-200 ease-in",children:[u.jsx("input",{type:"checkbox",id:"pastDueIsEnabled",checked:e.pastDueReminders.isEnabled,onChange:w=>m("pastDueReminders.isEnabled",w.target.checked),className:"peer absolute block w-8 h-8 rounded-full bg-surface border-4 border-outline appearance-none cursor-pointer checked:right-0 checked:border-primary checked:bg-primary transition-all duration-200"}),u.jsx("label",{htmlFor:"pastDueIsEnabled",className:"block overflow-hidden h-8 rounded-full bg-surface-container-highest border border-outline/20 cursor-pointer peer-checked:bg-primary/20 transition-colors"})]})]}),e.pastDueReminders.isEnabled&&u.jsx("div",{className:"p-4 bg-surface-container-highest/50 rounded-xl border border-outline/10 ml-4 border-l-4 border-l-primary",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("label",{htmlFor:"pastDueFrequencyDays",className:"text-text-secondary",children:"Send reminder every"}),u.jsx("input",{type:"number",id:"pastDueFrequencyDays",value:e.pastDueReminders.frequencyDays,onChange:w=>m("pastDueReminders.frequencyDays",w.target.value),className:"w-20 p-1 bg-surface-container-low border border-outline/20 rounded text-text-primary text-center focus:border-primary focus:outline-none"}),u.jsx("label",{htmlFor:"pastDueFrequencyDays",className:"text-text-secondary",children:"days for overdue samples."})]})}),u.jsxs("div",{className:"flex items-center justify-between py-4 border-b border-outline/10 md:bg-surface-container-highest md:border md:rounded-xl md:p-6 md:border-outline/10",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("label",{htmlFor:"upcomingJobIsEnabled",className:"font-medium text-text-primary flex items-center gap-2",children:["Enable Upcoming Job Reminders ",u.jsx(pd,{size:16,className:"text-primary"})]}),u.jsx("span",{className:"text-sm text-text-secondary mt-1",children:"Automatically emails customers 2 business days before a job starts."})]}),u.jsxs("div",{className:"relative inline-block w-14 h-8 align-middle select-none transition duration-200 ease-in",children:[u.jsx("input",{type:"checkbox",id:"upcomingJobIsEnabled",checked:((b=e.upcomingJobReminders)==null?void 0:b.isEnabled)||!1,onChange:w=>m("upcomingJobReminders.isEnabled",w.target.checked),className:"peer absolute block w-8 h-8 rounded-full bg-surface border-4 border-outline appearance-none cursor-pointer checked:right-0 checked:border-primary checked:bg-primary transition-all duration-200"}),u.jsx("label",{htmlFor:"upcomingJobIsEnabled",className:"block overflow-hidden h-8 rounded-full bg-surface-container-highest border border-outline/20 cursor-pointer peer-checked:bg-primary/20 transition-colors"})]})]})]}),u.jsxs("div",{className:"space-y-6 border-t border-outline/10 pt-6",children:[u.jsxs("h3",{className:"text-lg font-medium text-text-primary mb-2 flex items-center gap-2",children:[u.jsx(C8e,{className:"w-4 h-4 text-secondary"})," Message Templates"]}),u.jsx("p",{className:"text-sm text-text-secondary",children:"Customize the automated emails sent by the system."}),u.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[l.map(w=>u.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface-container-highest border border-outline/10 rounded-xl hover:border-primary/50 transition-colors group",children:[u.jsxs("div",{children:[u.jsx("div",{className:"font-medium text-text-primary",children:w.description}),u.jsxs("div",{className:"text-xs text-text-secondary mt-0.5",children:["Subject: ",w.subject]})]}),u.jsx("button",{onClick:()=>f(w.key),className:"px-4 py-2 text-sm font-bold text-primary bg-surface-container-low border border-outline/10 rounded-full hover:bg-primary hover:text-on-primary transition-all opacity-100 md:opacity-0 md:group-hover:opacity-100",children:"Edit"})]},w.key)),l.length===0&&u.jsx("div",{className:"text-sm text-text-secondary italic p-4 text-center",children:"No templates loaded."})]})]}),u.jsx("div",{className:"mt-8 pt-6 border-t border-outline/10 flex justify-end",children:u.jsxs("button",{onClick:v,className:"flex items-center gap-2 py-3 px-8 text-base bg-primary hover:bg-primary-hover text-on-primary rounded-full font-bold shadow-sm transition-all hover:shadow-md",children:[u.jsx(vs,{size:18})," Save System Settings"]})}),d&&u.jsx(Eet,{templateKey:d,onClose:()=>f(null),onSave:p})]})},Net=()=>{const[e,t]=I.useState(!0),[r,n]=I.useState(!1),[i,a]=I.useState({retailMarkup:40,contractorMarkup:20,calculationMethod:"Markup"});I.useEffect(()=>{(async()=>{try{const c=await Lx();a({retailMarkup:c.retailMarkup??40,contractorMarkup:c.contractorMarkup??20,calculationMethod:c.calculationMethod??"Markup"})}catch(c){console.error("Failed to load pricing settings:",c),Re.error("Could not load pricing configuration.")}finally{t(!1)}})()},[]);const s=async()=>{n(!0);try{await M6e(i),Re.success("Pricing configuration saved.")}catch(l){console.error("Failed to save pricing:",l),Re.error("Failed to save changes.")}finally{n(!1)}},o=(l,c)=>{if(i.calculationMethod==="Markup")return(l*(1+c/100)).toFixed(2);{const d=c/100;return d>=1?"Error":(l/(1-d)).toFixed(2)}};return e?u.jsx("div",{className:"p-6 text-center text-text-secondary",children:"Loading configuration..."}):u.jsxs("section",{className:"md:bg-surface-container-low md:p-8 md:rounded-2xl md:border md:border-outline/10 max-w-4xl mx-auto transition-all",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-8 md:mb-8 pb-4 border-b border-outline/10",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-surface-container-high flex items-center justify-center text-primary",children:u.jsx(gS,{size:24,className:"text-primary"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Pricing Configuration"}),u.jsx("p",{className:"text-sm text-text-secondary",children:"Set the global defaults for product pricing."})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12",children:[u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Calculation Method"}),u.jsxs("div",{className:"flex bg-surface-container-highest p-1 rounded-full border border-outline/10",children:[u.jsx("button",{onClick:()=>a({...i,calculationMethod:"Markup"}),className:`flex-1 py-2 px-4 rounded-full text-sm font-bold transition-all ${i.calculationMethod==="Markup"?"bg-primary text-on-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,children:"Markup"}),u.jsx("button",{onClick:()=>a({...i,calculationMethod:"Margin"}),className:`flex-1 py-2 px-4 rounded-full text-sm font-bold transition-all ${i.calculationMethod==="Margin"?"bg-primary text-on-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,children:"Margin"})]}),u.jsx("p",{className:"text-xs text-text-secondary mt-2",children:i.calculationMethod==="Markup"?"Cost + (Cost  %)":"Cost  (100% - %)"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Default Retail Percentage"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"number",value:i.retailMarkup,onChange:l=>a({...i,retailMarkup:parseFloat(l.target.value)||0}),className:"w-full bg-surface-container-highest border-b-2 border-transparent rounded-t-lg py-3 pl-4 pr-10 text-text-primary focus:border-primary focus:outline-none transition-all"}),u.jsx("div",{className:"absolute right-3 top-2.5 text-text-secondary",children:u.jsx(Jq,{size:16})})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Default Contractor Percentage"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"number",value:i.contractorMarkup,onChange:l=>a({...i,contractorMarkup:parseFloat(l.target.value)||0}),className:"w-full bg-surface-container-highest border-b-2 border-transparent rounded-t-lg py-3 pl-4 pr-10 text-text-primary focus:border-primary focus:outline-none transition-all"}),u.jsx("div",{className:"absolute right-3 top-2.5 text-text-secondary",children:u.jsx(Jq,{size:16})})]})]}),u.jsxs("button",{onClick:s,disabled:r,className:"flex items-center justify-center w-full py-3 px-6 bg-primary hover:bg-primary-hover text-on-primary font-bold rounded-full transition-colors disabled:opacity-50 shadow-sm",children:[u.jsx(vs,{size:18,className:"mr-2"}),r?"Saving...":"Save Configuration"]})]}),u.jsxs("div",{className:"bg-surface-container-highest rounded-2xl border border-outline/10 p-6 flex flex-col justify-center",children:[u.jsxs("h3",{className:"text-sm font-bold text-text-primary mb-4 flex items-center gap-2",children:[u.jsx(N4,{size:16,className:"text-accent"})," Live Example"]}),u.jsxs("div",{className:"space-y-6 text-sm",children:[u.jsxs("div",{className:"p-4 bg-surface-container-low rounded-xl border border-outline/10 text-center",children:[u.jsx("p",{className:"text-text-secondary mb-1",children:"If Unit Cost is:"}),u.jsx("p",{className:"text-xl font-bold text-text-primary",children:"$100.00"})]}),u.jsxs("div",{className:"space-y-6 px-4",children:[u.jsxs("div",{className:"flex justify-between items-center border-b border-outline/10 pb-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-text-secondary text-xs uppercase tracking-wider mb-1",children:"Retail Price"}),u.jsxs("p",{className:"text-xs text-text-secondary",children:[i.calculationMethod," of ",i.retailMarkup,"%"]})]}),u.jsxs("p",{className:"text-2xl font-bold text-primary",children:["$",o(100,i.retailMarkup)]})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-text-secondary text-xs uppercase tracking-wider mb-1",children:"Contractor Price"}),u.jsxs("p",{className:"text-xs text-text-secondary",children:[i.calculationMethod," of ",i.contractorMarkup,"%"]})]}),u.jsxs("p",{className:"text-2xl font-bold text-secondary",children:["$",o(100,i.contractorMarkup)]})]})]})]})]})]})]})},FY=[{version:"Version 2.0",date:"December 27, 2025",title:"Establish Update Notifications",type:"feature",changes:["Created a system that checks in to a central location to determine if an update is available.","Users are presented with a link to update instructions.","Image downloads from Github."]},{version:"Session 34",date:"Current",title:"System Email Customization",type:"feature",changes:["Added 'Message Templates' to Settings > Communications.","Implemented a full Rich Text Editor for system emails.","Added variable support (e.g., {{customer_name}}) for dynamic content.","Created database-backed template storage with file-system fallbacks."]},{version:"Session 33",date:"Recent",title:"Connected Operating System",type:"major",changes:["Universal Search 2.0: Smart detection of products vs variants.","iCal Subscription: Sync Job/Delivery schedule to Google/Apple Calendar.","Pinned Job Notes: Highlight critical info (Gate Codes) in chat and calendar.","Dashboard Logistics: Visual 'Selected Variants' gallery and Date Ranges on cards.","Interactive Calendar Pop-ups: Preview events without page reloads."]},{version:"Session 32.5",date:"Mobile Sprint",title:"Native Android & Hardware Integration",type:"infrastructure",changes:["Native Android App (Capacitor) released.","Hardware Integration: 'Notch' handling, Safe Area layouts, and Back Button logic.","Warehouse Scanner: Rear-camera optimization, Flashlight toggle, and Laser UI.","Offline-Ready Architecture: 'Server Connect' screen for dynamic API URLs."]},{version:"Session 31",date:"Mobile Sprint",title:"Mobile UX & Calendar Overhaul",type:"feature",changes:["Mobile Agenda View: Replaced grid with a touch-friendly list for phones.","Advanced Filtering: Full-screen mobile filter for Users/Installers.","Full-Screen Sheets: Standardized modal interactions for small screens."]},{version:"Session 30",date:"Logistics Sprint",title:"Warehouse & Mobile Operations",type:"major",changes:["App-ification: Viewport locking and touch optimizations.","Receive Order 2.0: Mobile-first photo upload and file accumulation.","Mobile Dashboard: Expanded touch targets and simplified cards.","Fixed Timezone bugs causing dates to appear as 'Yesterday'."]},{version:"Session 29",date:"Workflow Sprint",title:"Advanced Logistics & Financials",type:"feature",changes:["Interest Tracking: Link specific colors to generic sample boards.","'Early Access' Jobs: Create notes/photos before a quote is accepted.","Financial Integration: Link Appointments to specific PO Numbers.","Direct Checkouts: Assign samples to Leads or Installers without a Project."]},{version:"Session 28",date:"Automation Sprint",title:"Automated Reminders & Printing",type:"feature",changes:["Automated Job Reminders: T-Minus 2 Day alerts for customers.","Team Calendar: Invite system with Accept/Decline status.","Printing Infrastructure: Unified Print Queue for labels/QR codes."]},{version:"Session 27",date:"Scheduling Sprint",title:"Robust Team Scheduling",type:"major",changes:["Fixed critical data-loss bug in Job Details save.","Event Visibility Rules: Public vs Private vs Invited.","Installer Management: Managed vs Unmanaged (Subcontractor) types."]},{version:"Session 26",date:"Data Sprint",title:"Supply Chain & Smart Forms",type:"feature",changes:["Supply Chain Logic: Auto-link Brands to Default Suppliers.","Smart Forms: Dynamic inputs for Tile (Packaging) vs Carpet (Rolls).","System Status Ticker: Real-time feedback bar in the header.","Vendor CRM: Digital footprint tracking (Portals/Websites)."]},{version:"Session 25",date:"Stability Sprint",title:"Infrastructure Repairs",type:"fix",changes:["Fixed Production File Upload paths.","Product Duplication: Deep-copy product lines and variants.","Unified Modals: Standardized Installer and Product editing.","Restored 'On-the-Fly' creation in Quick Checkout."]},{version:"Session 24",date:"Feature Sprint",title:"Knowledge Base (Wiki)",type:"major",changes:["Full CMS: Rich text editor with image resizing and tables.","Smart Linking: Use '[[' to link between articles.","Version History: 'Time Machine' to revert content changes.","Mobile-First Reading Experience."]},{version:"Session 21",date:"DevOps",title:"Zero-Config Setup",type:"infrastructure",changes:["Self-Healing Infrastructure.","First-Run Wizard for Admin setup.","Dynamic Database Initialization."]},{version:"Session 20",date:"Performance",title:"Performance Architecture",type:"infrastructure",changes:["React Query Migration: Instant cache-based navigation.","Virtualization: Rendering thousands of rows with zero lag.","Image Optimization Pipeline (Sharp)."]},{version:"Session 19",date:"Feature Sprint",title:"Intelligence & Collaboration",type:"major",changes:["Universal Import Tool: Excel/CSV parsing with column mapping.","Central Messaging: Direct Chat and Notifications.","Smart Mentions: Use @User, !Project, #Product in text.","Business Intelligence: Revenue trends and charts."]},{version:"Session 16",date:"Production",title:"Production Build",type:"infrastructure",changes:["Discontinued Samples subsystem.","Monolith Container architecture.","Hardened Backup & Restore tools."]},{version:"Session 15",date:"UI Sprint",title:"Branding & Theming",type:"feature",changes:["White-Label Engine: Custom Logo and Favicon uploads.","Theme Engine: Semantic CSS variables for Light/Dark modes.","System-wide UI refactor ('The Scrub')."]},{version:"Session 14",date:"Feature Sprint",title:"User Identity & Pricing",type:"major",changes:["User Profiles: Avatars and Name management.","Pricing Engine: Cost vs Retail with Markup/Margin logic.","Product Variants: Advanced packaging data (Cartons/SF).","Advanced Material Ordering with Unit Conversion."]},{version:"Session 13",date:"Feature Sprint",title:"Email Automation",type:"feature",changes:["Internal Daily Update emails.","Automated Customer Reminders (Due Tomorrow/Past Due).","System vs User Preference architecture split."]},{version:"Session 12",date:"Feature Sprint",title:"Calendar & Appointments",type:"major",changes:["User-Specific Calendar Colors.","Multi-Entity Attendees (Users + Installers).","Unified Calendar Filter."]},{version:"Session 11",date:"UI Sprint",title:"Project Dashboard Refactor",type:"feature",changes:["Draggable/Resizable Dashboard Widgets.","Edit Mode with user preference persistence.","Grid Layout implementation."]},{version:"Session 10",date:"Data Sprint",title:"Intelligent Sample Data",type:"major",changes:["Multi-Size Bubble Selector.","Administrative Size Management.","Massive refactor of Sample Data Model."]},{version:"Session 9",date:"UI Sprint",title:"Scheduling Refactor",type:"major",changes:["Job Appointments Table (Multi-day jobs).","Dashboard Carousels (Active Pipeline).","Installer Search."]},{version:"Session 8",date:"Security Sprint",title:"RBAC & Auditing",type:"major",changes:["Role-Based Access Control (Admin vs User).","User Management UI.","Full-Stack Auditing System.","Customer Creation validation overhaul."]},{version:"Session 7",date:"Stability Sprint",title:"Full-Stack Stabilization",type:"fix",changes:["Fixed Quote Acceptance workflow.","Solved 'Reload Loop' (Caddy/Vite websocket fix).","Unified 'On-the-Fly' creation UI."]},{version:"Session 6",date:"Auth Sprint",title:"Authentication",type:"infrastructure",changes:["Implemented SuperTokens for secure login.","Transitioned from single-user to multi-user architecture."]},{version:"Session 5",date:"Feature Sprint",title:"Vendor Management",type:"major",changes:["Dedicated Vendor Directory.","Intelligent Autofill for Orders.","Deep integration with Products and Samples."]},{version:"Session 4",date:"Ops Sprint",title:"Backup & Restore",type:"feature",changes:["Full Database Backup/Restore tools.","Image Archive handling.","Extend Checkout functionality."]},{version:"Session 3",date:"Foundational",title:"Core Architecture",type:"major",changes:["Full-Stack Refactor (Service Layer).","Quick Checkout & QR Code System.","Installation Types logic.","Mobile Responsiveness."]}],Aet={major:yoe,feature:boe,fix:x8e,infrastructure:rC},Tet={major:"text-on-tertiary-container bg-tertiary-container border-tertiary-container/50",feature:"text-on-secondary-container bg-secondary-container border-secondary-container/50",fix:"text-on-primary-container bg-primary-container border-primary-container/50",infrastructure:"text-text-secondary bg-surface-container-highest border-outline/50"},Iet=()=>{const[e,t]=I.useState(""),r=I.useMemo(()=>{if(!e)return FY;const n=e.toLowerCase();return FY.filter(i=>i.title.toLowerCase().includes(n)||i.version.toLowerCase().includes(n)||i.changes.some(a=>a.toLowerCase().includes(n)))},[e]);return u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"mb-8 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"System Updates"}),u.jsx("p",{className:"text-text-secondary",children:"Track the evolution of the platform."})]}),u.jsxs("div",{className:"relative w-full md:w-80",children:[u.jsx(gc,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-secondary",size:20}),u.jsx("input",{type:"text",placeholder:"Search changes...",value:e,onChange:n=>t(n.target.value),className:"w-full pl-12 pr-6 py-3 bg-surface-container-high border-none rounded-full text-text-primary focus:ring-2 focus:ring-primary/50 outline-none transition-shadow shadow-sm hover:shadow-md placeholder:text-text-tertiary"})]})]}),u.jsxs("div",{className:"relative border-l-2 border-outline/10 ml-3 md:ml-6 space-y-12 pb-12",children:[r.map((n,i)=>{const a=Aet[n.type]||_8e,s=i===0&&!e;return u.jsxs("div",{className:"relative pl-6 md:pl-12",children:[u.jsx("div",{className:`absolute -left-[9px] top-0 md:top-6 w-5 h-5 rounded-full border-2 border-surface flex items-center justify-center z-10 ${s?"bg-primary scale-125":"bg-surface-container-highest text-text-secondary border-outline/20"}`,children:s?u.jsx("div",{className:"w-2 h-2 bg-on-primary rounded-full animate-pulse"}):null}),u.jsxs("div",{className:`group relative transition-all md:p-6 md:rounded-2xl md:border ${s?"md:bg-surface-container-high md:border-primary/40 md:shadow-lg md:shadow-primary/10":"md:bg-surface-container-low md:border-outline/10 hover:md:border-primary/40 hover:md:shadow-md"}`,children:[u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-2 md:gap-4 mb-3 md:mb-4",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[u.jsxs("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full border capitalize flex items-center gap-1.5 ${Tet[n.type]}`,children:[u.jsx(a,{size:12}),n.type]}),u.jsx("span",{className:"text-sm font-mono text-text-tertiary",children:n.version})]}),u.jsx("h3",{className:"text-lg font-bold text-text-primary mt-1",children:n.title})]}),u.jsx("div",{className:"text-xs md:text-sm text-text-secondary font-medium bg-surface-container-highest self-start md:self-auto px-3 py-1 rounded-lg border border-outline/10",children:n.date})]}),u.jsx("ul",{className:"space-y-3 md:space-y-2 pl-1",children:n.changes.map((o,l)=>u.jsxs("li",{className:"flex items-start gap-3 text-text-secondary group-hover:text-text-primary transition-colors",children:[u.jsx("span",{className:"mt-2.5 md:mt-2 w-1.5 h-1.5 rounded-full bg-outline/30 group-hover:bg-primary shrink-0 transition-colors"}),u.jsx("span",{className:"leading-relaxed",children:o})]},l))})]})]},n.version)}),r.length===0&&u.jsx("div",{className:"pl-12 text-text-secondary italic",children:"No updates found matching your search."})]})]})},Oet=async()=>{const e=await fetch(sr("/api/media"),{headers:{"Content-Type":"application/json"}});if(!e.ok){const t=await e.json().catch(()=>({error:"Failed to fetch media assets"}));throw new Error(t.error)}return e.json()},Pet=async e=>{const t=await fetch(sr("/api/media"),{method:"POST",body:e});if(!t.ok){const r=await t.json().catch(()=>({error:"Failed to upload media asset"}));throw new Error(r.error)}return t.json()},Ret=async e=>{const t=await fetch(sr(`/api/media/${e}`),{method:"DELETE"});if(!t.ok){const r=await t.json().catch(()=>({error:"Failed to delete media asset"}));throw new Error(r.error)}},jet=()=>$s({queryKey:["mediaAssets"],queryFn:Oet,staleTime:1e3*60*5}),Det=()=>{const e=ja();return Ir({mutationFn:t=>Pet(t),onSuccess:()=>{Re.success("Media asset uploaded successfully!"),e.invalidateQueries({queryKey:["mediaAssets"]})},onError:t=>{Re.error(`Upload failed: ${t.message}`)}})},Met=()=>{const e=ja();return Ir({mutationFn:t=>Ret(t),onSuccess:()=>{Re.success("Media asset deleted."),e.invalidateQueries({queryKey:["mediaAssets"]})},onError:t=>{Re.error(`Delete failed: ${t.message}`)}})},Fet=({asset:e})=>{const t=Met(),r=e.fileType.startsWith("image/"),n=e.thumbnailPath||e.filePath,i=e.usageCount===0,a=()=>{if(!i||t.isPending)return;const s=e.filePath.split("/").pop();window.confirm(`Are you sure you want to permanently delete "${s}"? This cannot be undone.`)&&t.mutate(e.id)};return u.jsxs("div",{className:"group relative aspect-square flex flex-col rounded-xl border border-outline/10 bg-surface-container-low shadow-sm transition-all hover:shadow-md hover:border-outline/50",children:[u.jsx("div",{className:"relative flex-1 overflow-hidden rounded-t-xl",children:r?u.jsx("img",{src:ds(n),alt:e.filePath,className:"h-full w-full object-cover"}):u.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center bg-surface-container text-text-secondary",children:[u.jsx(Zc,{className:"h-1/3 w-1/3 opacity-50"}),u.jsx("span",{className:"mt-2 text-xs font-mono uppercase tracking-widest",children:e.fileType.split("/")[1]||"File"})]})}),u.jsxs("div",{className:"p-2 text-xs",children:[u.jsx("p",{className:"truncate font-mono text-text-secondary",title:e.filePath,children:e.filePath}),u.jsxs("p",{className:`mt-1 flex items-center gap-1.5 font-semibold ${i?"text-text-tertiary":"text-primary"}`,children:[u.jsx(Ux,{size:12}),u.jsxs("span",{children:["In Use: ",e.usageCount]})]})]}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center rounded-xl bg-scrim/60 opacity-0 transition-opacity group-hover:opacity-100",children:u.jsx("button",{onClick:a,disabled:!i||t.isPending,className:`rounded-full p-3 transition-colors
            ${i?t.isPending?"cursor-wait bg-surface-container-highest text-text-tertiary":"bg-error text-on-error hover:bg-error/80":"cursor-not-allowed bg-surface-container-highest text-text-tertiary"}
          `,title:i?"Delete Asset":"Cannot delete: Asset is in use",children:t.isPending?u.jsx(P0,{size:20,className:"animate-spin"}):u.jsx(Bs,{size:20})})})]})},Let=["branding","avatars","jobs","products","misc"],Bet=({isOpen:e,onClose:t})=>{const[r,n]=I.useState(null),[i,a]=I.useState("misc"),[s,o]=I.useState(null),[l,c]=I.useState(!1),d=Det(),f=w=>{if(w)if(n(w),w.type.startsWith("image/")){const _=new FileReader;_.onloadend=()=>{o(_.result)},_.readAsDataURL(w)}else o(null)},p=I.useCallback(()=>{n(null),o(null),a("misc"),d.reset()},[d]),m=()=>{p(),t()},x=async w=>{if(w.preventDefault(),!r||!i||d.isPending)return;const _=new FormData;_.append("file",r),_.append("category",i),d.mutate(_,{onSuccess:()=>{m()}})},v=(w,_)=>{w.preventDefault(),w.stopPropagation(),c(_)},b=w=>{v(w,!1),w.dataTransfer.files&&w.dataTransfer.files[0]&&f(w.dataTransfer.files[0])};return e?u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-scrim/80 p-4",children:u.jsxs("div",{className:"relative w-full max-w-lg rounded-2xl bg-surface-container-high shadow-xl border border-outline/20",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-outline/10",children:[u.jsx("h2",{className:"text-lg font-bold text-text-primary",children:"Upload New Media"}),u.jsx("button",{onClick:m,className:"rounded-full p-2 hover:bg-surface-container-highest",children:u.jsx(Gr,{size:20,className:"text-text-secondary"})})]}),u.jsxs("form",{onSubmit:x,children:[u.jsxs("div",{className:"p-6 space-y-4",children:[u.jsxs("div",{onDragEnter:w=>v(w,!0),onDragLeave:w=>v(w,!1),onDragOver:w=>w.preventDefault(),onDrop:b,className:`relative flex flex-col items-center justify-center rounded-xl border-2 border-dashed p-8 text-center transition-colors
                ${l?"border-primary bg-primary/10":"border-outline/50 bg-surface-container"}`,children:[u.jsx(loe,{size:40,className:"text-primary"}),u.jsxs("p",{className:"mt-2 font-semibold text-text-primary",children:["Drag & drop file or"," ",u.jsxs("label",{className:"cursor-pointer text-primary underline hover:text-primary-hover",children:["browse",u.jsx("input",{type:"file",className:"hidden",onChange:w=>{var _;return f(((_=w.target.files)==null?void 0:_[0])||null)}})]})]}),u.jsx("p",{className:"text-xs text-text-secondary",children:"Any file type supported"})]}),r&&u.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-outline/20 bg-surface-container p-3",children:[u.jsx("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-md bg-surface-container-lowest",children:s?u.jsx("img",{src:s,alt:"Preview",className:"h-full w-full rounded-md object-cover"}):u.jsx(doe,{size:24,className:"text-text-secondary"})}),u.jsxs("div",{className:"flex-1 overflow-hidden",children:[u.jsx("p",{className:"truncate font-medium text-text-primary",children:r.name}),u.jsxs("p",{className:"text-xs text-text-secondary",children:[(r.size/1024).toFixed(2)," KB"]})]}),u.jsx("button",{type:"button",onClick:()=>f(null),className:"rounded-full p-1 text-text-secondary hover:bg-surface-container-highest",children:u.jsx(Gr,{size:16})})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"category",className:"mb-1 block text-sm font-medium text-text-secondary",children:"Category"}),u.jsx("select",{id:"category",value:i,onChange:w=>a(w.target.value),className:"w-full rounded-lg border border-outline/50 bg-surface-container px-3 py-2.5 text-text-primary outline-none focus:ring-2 focus:ring-primary/50",children:Let.map(w=>u.jsx("option",{value:w,className:"capitalize",children:w.charAt(0).toUpperCase()+w.slice(1)},w))})]})]}),u.jsxs("div",{className:"flex justify-end gap-3 rounded-b-2xl border-t border-outline/10 bg-surface-container p-4",children:[u.jsx("button",{type:"button",onClick:m,className:"rounded-full border border-outline px-6 py-2.5 text-sm font-semibold text-text-primary transition-colors hover:bg-surface-container-highest",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:!r||!i||d.isPending,className:"flex items-center justify-center rounded-full bg-primary px-6 py-2.5 text-sm font-semibold text-on-primary shadow-sm transition-opacity hover:bg-primary-hover disabled:cursor-not-allowed disabled:opacity-50",children:d.isPending?u.jsxs(u.Fragment,{children:[u.jsx(P0,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):"Upload File"})]})]})]})}):null},Uet=()=>{const{data:e,isLoading:t,isError:r,error:n}=jet(),[i,a]=I.useState(!1);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Media Library"}),u.jsx("p",{className:"mt-1 text-text-secondary",children:"Manage all uploaded images, documents, and other files across the system."})]}),u.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 rounded-full bg-primary px-4 py-2 text-sm font-semibold text-on-primary shadow-sm transition-colors hover:bg-primary-hover",children:[u.jsx(db,{size:16}),"Upload Media"]})]}),t&&u.jsx("div",{className:"flex justify-center items-center h-64",children:u.jsx(P0,{className:"w-8 h-8 animate-spin text-primary"})}),r&&u.jsxs("div",{className:"rounded-xl border border-error-container bg-error-container/20 p-8 text-center text-on-error-container",children:[u.jsx(ld,{className:"w-12 h-12 mx-auto"}),u.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"Could not load media assets"}),u.jsx("p",{className:"mt-2 text-sm",children:(n==null?void 0:n.message)||"An unknown error occurred."})]}),e&&u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:e.map(s=>u.jsx(Fet,{asset:s},s.id))}),u.jsx(Bet,{isOpen:i,onClose:()=>a(!1)})]})},Iw=[{id:"personal",label:"My Settings",tabs:[{id:"mySettings",label:"Profile",icon:K8e,adminOnly:!1},{id:"notifications",label:"Notifications",icon:pS,adminOnly:!1}]},{id:"communications",label:"Communications",tabs:[{id:"email",label:"Email Settings",icon:Xc,adminOnly:!0}]},{id:"product",label:"Product Management",tabs:[{id:"pricing",label:"Pricing",icon:gS,adminOnly:!0},{id:"data",label:"Data Management",icon:k8e,adminOnly:!0}]},{id:"system",label:"System",tabs:[{id:"media",label:"Media Library",icon:Jd,adminOnly:!0},{id:"branding",label:"Branding",icon:ooe,adminOnly:!0},{id:"users",label:"Users",icon:rx,adminOnly:!0},{id:"backup",label:"Backup",icon:mS,adminOnly:!0},{id:"changelog",label:"What's New",icon:xoe,adminOnly:!1}]}],$et=()=>{var p,m;const{currentUser:e}=Kr(),t=(p=e==null?void 0:e.roles)==null?void 0:p.includes("Admin"),[r,n]=I.useState("mySettings"),i=Iw.flatMap(x=>x.tabs),a=Iw.find(x=>x.tabs.some(v=>v.id===r))||Iw[0],[s,o]=I.useState(!0);I.useEffect(()=>{const x=i.find(v=>v.id===r);x!=null&&x.adminOnly&&!t&&n("mySettings")},[t,r,i]);const l=()=>{switch(r){case"mySettings":return u.jsx(gWe,{});case"notifications":return u.jsx(SWe,{});case"email":return u.jsx(_et,{});case"pricing":return u.jsx(Net,{});case"branding":return u.jsx(hWe,{});case"users":return u.jsx(dWe,{});case"data":return u.jsx(xWe,{});case"backup":return u.jsx(mWe,{});case"changelog":return u.jsx(Iet,{});case"media":return u.jsx(Uet,{});default:return null}},c=x=>{n(x),o(!1),window.scrollTo({top:0,behavior:"smooth"})},d=()=>{o(!0)},f=(m=i.find(x=>x.id===r))==null?void 0:m.label;return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"px-1 flex items-center gap-4",children:[u.jsx("button",{onClick:d,className:`md:hidden p-2 -ml-2 rounded-full hover:bg-surface-container-highest transition-colors ${s?"hidden":"block"}`,children:u.jsx(rf,{className:"w-6 h-6 text-text-primary"})}),u.jsx("div",{className:`w-12 h-12 bg-primary-container rounded-full flex items-center justify-center flex-shrink-0 text-primary ${s?"flex":"hidden md:flex"}`,children:u.jsx(rC,{className:"w-6 h-6"})}),u.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-text-primary tracking-tight",children:s?"Settings":f})]}),u.jsxs("div",{className:"hidden md:block space-y-6",children:[u.jsx("div",{className:"flex border-b border-outline/10 overflow-x-auto",children:Iw.map(x=>{const v=x.tabs.filter(w=>!w.adminOnly||t);if(v.length===0)return null;const b=a.id===x.id;return u.jsx("button",{onClick:()=>n(v[0].id),className:`px-6 py-3 text-sm font-bold uppercase tracking-wider transition-colors whitespace-nowrap border-b-2 mb-[-2px]
                                    ${b?"text-primary border-primary":"text-text-secondary border-transparent hover:text-text-primary hover:border-outline/20"}`,children:x.label},x.id)})}),u.jsx("div",{className:"flex flex-wrap gap-2",children:a.tabs.map(x=>{if(x.adminOnly&&!t)return null;const v=r===x.id,b=x.icon;return u.jsxs("button",{onClick:()=>n(x.id),className:`flex items-center px-5 py-2 rounded-full text-sm font-medium transition-colors border shadow-sm
                                    ${v?"bg-primary text-on-primary border-transparent":"bg-surface-container-high text-text-secondary border-outline/10 hover:border-primary/50 hover:text-text-primary"}
                                `,children:[b&&u.jsx(b,{className:"w-4 h-4 mr-2"}),x.label]},x.id)})})]}),u.jsx("div",{className:`md:hidden space-y-6 ${s?"block":"hidden"}`,children:Iw.map(x=>{const v=x.tabs.filter(b=>!b.adminOnly||t);return v.length===0?null:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"px-4 text-xs font-bold text-primary uppercase tracking-wider",children:x.label}),u.jsx("div",{className:"bg-surface-container-low rounded-2xl overflow-hidden shadow-sm border border-outline/10 divide-y divide-outline/10",children:v.map(b=>{const w=b.icon;return u.jsxs("button",{onClick:()=>c(b.id),className:"w-full flex items-center p-4 hover:bg-surface-container-highest transition-colors active:bg-primary/5",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-surface-container flex items-center justify-center mr-4 text-primary",children:w&&u.jsx(w,{className:"w-5 h-5"})}),u.jsx("span",{className:"flex-1 text-left text-base font-medium text-text-primary",children:b.label}),u.jsx(ou,{className:"w-5 h-5 text-outline/40"})]},b.id)})})]},x.id)})}),u.jsx("div",{className:`
                bg-surface-container-high rounded-2xl shadow-sm overflow-hidden border border-outline/10 min-h-[400px]
                ${s?"hidden md:block":"block"}
            `,children:u.jsx("div",{className:"p-4 md:p-8",children:u.jsx(l,{})})})]})},zet=()=>{const{data:e=[]}=w4(),{vendors:t}=Kr(),r=ZMe(),[n,i]=I.useState(!1),[a,s]=I.useState(null),[o,l]=I.useState(""),c=I.useMemo(()=>{if(!o)return e;const m=o.toLowerCase();return e.filter(x=>x.name.toLowerCase().includes(m)||x.repName&&x.repName.toLowerCase().includes(m))},[e,o]),d=m=>{s(null),i(!0)},f=()=>{s(null),i(!1)},p=async m=>{try{if("id"in m){const{id:x,...v}=m;await r.updateVendor.mutateAsync({id:x,data:v}),Re.success("Vendor updated successfully!")}else await r.addVendor.mutateAsync(m),Re.success("Vendor added successfully!");f()}catch(x){console.error("Failed to save vendor:",x),Re.error(x.message||"Failed to save vendor.")}};return u.jsxs("div",{className:"container mx-auto",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 px-1 mb-8",children:[u.jsx("h1",{className:"text-4xl font-bold text-text-primary tracking-tight",children:"Vendor Directory"}),u.jsxs("button",{onClick:()=>d(),className:"flex items-center gap-2 bg-primary hover:bg-primary-hover text-on-primary font-semibold py-3 px-6 rounded-full transition-all shadow-lg hover:shadow-xl",children:[u.jsx(lu,{size:20}),"Add Vendor"]})]}),u.jsxs("div",{className:"relative w-full max-w-2xl mb-8",children:[u.jsx(gc,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-secondary",size:20}),u.jsx("input",{type:"text",placeholder:"Search by vendor name or rep name...",value:o,onChange:m=>l(m.target.value),className:"w-full pl-12 pr-6 py-4 bg-surface-container-high border-none rounded-full text-text-primary focus:ring-2 focus:ring-primary/50 outline-none transition-shadow shadow-sm hover:shadow-md placeholder:text-text-tertiary"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(m=>{var x;return u.jsx(ai,{to:`/vendors/${m.id}`,className:"bg-surface-container-high rounded-xl shadow-sm border border-outline/10 p-6 flex flex-col justify-between hover:shadow-md transition-all duration-200 group",children:u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary mb-2 group-hover:text-primary truncate flex-1 pr-2 transition-colors",children:m.name}),u.jsxs("div",{className:"flex gap-1",children:[m.portalUrl&&u.jsx("a",{href:m.portalUrl,target:"_blank",rel:"noopener noreferrer",onClick:v=>v.stopPropagation(),className:"p-1.5 text-text-tertiary hover:text-primary hover:bg-primary-container rounded-full transition-colors",title:"Open Dealer Portal",children:u.jsx(Ux,{size:16})}),m.websiteUrl&&u.jsx("a",{href:m.websiteUrl,target:"_blank",rel:"noopener noreferrer",onClick:v=>v.stopPropagation(),className:"p-1.5 text-text-tertiary hover:text-primary hover:bg-primary-container rounded-full transition-colors",title:"Open Website",children:u.jsx(Zg,{size:16})})]})]}),u.jsxs("div",{className:"flex items-center flex-wrap gap-2 text-sm text-text-secondary mb-5",children:[(m.vendorType==="Manufacturer"||m.vendorType==="Both")&&u.jsxs("span",{className:"flex items-center gap-1.5 bg-surface-container px-2 py-1 rounded-md border border-outline/10",children:[u.jsx(Jg,{size:14})," Manufacturer"]}),(m.vendorType==="Supplier"||m.vendorType==="Both")&&u.jsxs("span",{className:"flex items-center gap-1.5 bg-surface-container px-2 py-1 rounded-md border border-outline/10",children:[u.jsx(R0,{size:14})," Supplier"]}),(m.vendorType==="Manufacturer"||m.vendorType==="Both")&&u.jsxs("span",{className:"flex items-center gap-1.5 bg-primary-container text-primary px-2 py-0.5 rounded-full text-xs font-bold ml-auto",children:[u.jsx(yf,{size:12})," ",m.sampleCount||0," Samples"]})]}),m.defaultSupplierId&&u.jsxs("div",{className:"mb-4 text-sm text-text-secondary bg-surface-container-low p-3 rounded-lg border border-outline/5",children:["Distributor: ",u.jsx("span",{className:"font-medium text-text-primary",children:(x=t.find(v=>v.id===m.defaultSupplierId))==null?void 0:x.name})]}),u.jsx("p",{className:"text-sm text-text-secondary mb-1",children:m.address}),u.jsx("p",{className:"text-sm text-text-secondary",children:m.phone}),(m.repName||m.repPhone)&&u.jsxs("div",{className:"mt-4 pt-4 border-t border-outline/10",children:[u.jsx("p",{className:"font-semibold text-text-primary",children:m.repName}),u.jsx("p",{className:"text-sm text-text-secondary",children:m.repPhone})]})]})},m.id)})}),c.length===0&&u.jsx("div",{className:"text-center py-10 col-span-full",children:u.jsx("p",{className:"text-text-secondary",children:o?"No vendors match your search.":"No vendors found."})}),u.jsx(hb,{isOpen:n,onClose:f,onSave:p,vendorToEdit:a})]})},Het=({vendor:e})=>u.jsxs(ai,{to:`/vendors/${e.id}`,className:"block bg-surface p-4 rounded-lg shadow-md hover:shadow-lg hover:bg-background border border-border transition-all duration-300 w-80 flex-shrink-0",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsx("h3",{className:"font-bold text-lg text-text-primary truncate pr-2",children:e.name}),u.jsx(ou,{className:"w-5 h-5 text-accent flex-shrink-0"})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs text-text-secondary mb-3",children:[e.vendorType==="Manufacturer"&&u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(Jg,{size:12})," Manufacturer"]}),e.vendorType==="Both"&&u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(Jg,{size:12})," Mfg & Dist"]}),u.jsxs("span",{className:"flex items-center gap-1 bg-background/50 px-2 py-0.5 rounded-full border border-border",children:[u.jsx(yf,{size:12})," ",e.sampleCount||0," Products"]})]}),u.jsxs("div",{className:"text-sm text-text-secondary space-y-1",children:[u.jsx("p",{className:"truncate",children:e.repName||"No Rep Listed"}),u.jsx("p",{className:"truncate",children:e.phone||e.orderingEmail||"No Contact Info"})]})]}),Wet=({title:e,vendors:t})=>t.length===0?null:u.jsxs("div",{className:"mb-8",children:[u.jsx("h2",{className:"text-xl font-bold mb-4 text-text-primary",children:e}),u.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 scrollbar-thin scrollbar-thumb-border scrollbar-track-transparent",children:t.map(r=>u.jsx(Het,{vendor:r},r.id))})]}),Vet=()=>{const{vendorId:e}=Ex(),{vendors:t,products:r,isLoading:n,updateVendor:i}=Kr(),[a,s]=I.useState(null),[o,l]=I.useState(""),[c,d]=I.useState("All"),[f,p]=I.useState(null),[m,x]=I.useState(!1),[v,b]=I.useState(!1);I.useEffect(()=>{Lx().then(s).catch(console.error)},[]);const w=I.useMemo(()=>t.find(H=>H.id===parseInt(e||"")),[t,e]),_=I.useMemo(()=>w!=null&&w.defaultSupplierId?t.find(H=>H.id===w.defaultSupplierId):null,[w,t]),C=I.useMemo(()=>t.filter(H=>H.defaultSupplierId===(w==null?void 0:w.id)),[w,t]),N=I.useMemo(()=>w?r.filter(H=>H.manufacturerId===w.id):[],[w,r]),R=I.useMemo(()=>{let H=N;if(c!=="All"&&(H=H.filter(Z=>Z.productType===c)),o){const Z=o.toLowerCase();H=H.filter(ee=>{const V=ee.name.toLowerCase().includes(Z),te=ee.variants.some(se=>se.name&&se.name.toLowerCase().includes(Z)||se.sku&&se.sku.toLowerCase().includes(Z));return V||te})}return H},[N,c,o]),P=I.useMemo(()=>[...new Set(N.map(H=>H.productType).filter(Boolean))].sort(),[N]),O=H=>{p(H),x(!0)},D=()=>{p(null),x(!1)},M=async H=>{try{await i(H),Re.success("Vendor updated successfully!"),b(!1)}catch(Z){console.error("Failed to save vendor:",Z),Re.error(Z.message||"Failed to save vendor.")}};if(n)return u.jsx("div",{className:"text-center p-8 text-text-secondary",children:"Loading vendor details..."});if(!w)return u.jsx("div",{className:"text-center p-8 text-text-secondary",children:"Vendor not found."});const B=w.vendorType==="Manufacturer"||w.vendorType==="Both",U=w.vendorType==="Supplier"||w.vendorType==="Both";return u.jsxs("div",{className:"container mx-auto space-y-8",children:[u.jsx("div",{className:"bg-surface-container-high p-8 rounded-xl shadow-sm border border-outline/10",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:w.name}),u.jsxs("div",{className:"flex items-center flex-wrap gap-x-4 gap-y-2 text-sm text-text-secondary mt-2 font-medium",children:[B&&u.jsxs("span",{className:"flex items-center gap-2 px-3 py-1 rounded-full bg-surface-container border border-outline/10",children:[u.jsx(Jg,{size:14})," Manufacturer"]}),U&&u.jsxs("span",{className:"flex items-center gap-2 px-3 py-1 rounded-full bg-surface-container border border-outline/10",children:[u.jsx(R0,{size:14})," Supplier"]})]})]}),u.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 bg-primary-container hover:bg-primary text-primary hover:text-on-primary font-semibold py-2 px-6 rounded-full transition-all shadow-sm",children:[u.jsx(Qh,{size:18}),"Edit Vendor"]})]})}),U&&C.length>0&&u.jsx(Wet,{title:"Supplied Manufacturers",vendors:C}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:[u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-xl border border-outline/10 shadow-sm",children:[u.jsx("h3",{className:"font-semibold text-xl mb-4 text-text-primary",children:"Contact Information"}),u.jsxs("div",{className:"space-y-3 text-text-secondary",children:[u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Address:"})," ",w.address||"N/A"]}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(w0,{size:14})," ",w.phone||"N/A"]}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(Xc,{size:14})," Ordering: ",w.orderingEmail||"N/A"]}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(Xc,{size:14})," Claims: ",w.claimsEmail||"N/A"]}),(w.websiteUrl||w.portalUrl)&&u.jsxs("div",{className:"pt-2 mt-2 border-t border-outline/10 space-y-2",children:[w.websiteUrl&&u.jsxs("a",{href:w.websiteUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-primary hover:underline font-medium",children:[u.jsx(Zg,{size:14})," Website"]}),w.portalUrl&&u.jsxs("a",{href:w.portalUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-primary hover:underline font-medium",children:[u.jsx(Ux,{size:14})," Dealer Portal"]})]})]})]}),u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-xl border border-outline/10 shadow-sm",children:[u.jsx("h3",{className:"font-semibold text-xl mb-4 text-text-primary",children:"Sales Representative"}),u.jsxs("div",{className:"space-y-3 text-text-secondary",children:[u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(oc,{size:14})," ",w.repName||"N/A"]}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(w0,{size:14})," ",w.repPhone||"N/A"]}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(Xc,{size:14})," ",w.repEmail||"N/A"]})]})]}),u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-xl border border-outline/10 shadow-sm",children:[u.jsx("h3",{className:"font-semibold text-xl mb-4 text-text-primary",children:"Other Details"}),u.jsxs("div",{className:"space-y-3 text-text-secondary",children:[u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Shipping:"})," ",w.shippingMethod||"N/A"]}),_&&u.jsxs("div",{className:"mt-2 p-4 bg-surface-container-low border border-outline/5 rounded-lg",children:[u.jsx("p",{className:"text-xs text-text-tertiary uppercase font-bold mb-1",children:"Fulfilled By"}),u.jsx("p",{className:"text-text-primary font-bold",children:_.name}),_.phone&&u.jsxs("p",{className:"text-sm flex items-center gap-1 mt-1",children:[u.jsx(w0,{size:12})," ",_.phone]}),_.orderingEmail&&u.jsxs("p",{className:"text-sm flex items-center gap-1",children:[u.jsx(Xc,{size:12})," ",_.orderingEmail]})]}),u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Notes:"})," ",w.notes||"N/A"]})]})]})]}),B&&u.jsxs("div",{children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 border-t border-outline/10 pt-8",children:[u.jsxs("h2",{className:"text-3xl font-bold text-text-primary mb-4 md:mb-0",children:["Product Lines (",R.length,")"]}),u.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[u.jsxs("div",{className:"relative flex-grow min-w-[300px]",children:[u.jsx(gc,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-secondary",size:18}),u.jsx("input",{type:"text",placeholder:"Search style or color...",value:o,onChange:H=>l(H.target.value),className:"w-full bg-surface-container-high border-none rounded-full py-3 pl-12 pr-6 focus:outline-none focus:ring-2 focus:ring-primary/50 shadow-sm"})]}),u.jsxs("select",{value:c,onChange:H=>d(H.target.value),className:"bg-surface-container-high border-none rounded-full py-3 px-6 focus:outline-none focus:ring-2 focus:ring-primary/50 shadow-sm text-text-primary font-medium cursor-pointer",children:[u.jsx("option",{value:"All",children:"All Product Types"}),P.map(H=>u.jsx("option",{value:H,children:H},H))]})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:R.map(H=>u.jsx(qce,{product:H,pricingSettings:a,onClick:O},H.id))}),R.length===0&&N.length>0&&u.jsx("p",{className:"text-center text-text-secondary py-8 col-span-full",children:"No products match your current filters."})]}),m&&f&&u.jsx(I9,{isOpen:m,onClose:D,product:f}),v&&w&&u.jsx(hb,{isOpen:v,onClose:()=>b(!1),onSave:M,vendorToEdit:w})]})},qet=({isOpen:e,onClose:t,order:r,onReceive:n,onReportDamage:i})=>{const[a,s]=I.useState("RECEIVE"),[o,l]=I.useState(!1),[c,d]=I.useState(""),[f,p]=I.useState(""),[m,x]=I.useState(!0),[v,b]=I.useState([]),[w,_]=I.useState(new Set),[C,N]=I.useState(""),[R,P]=I.useState("");if(I.useEffect(()=>{e&&(s("RECEIVE"),d(new Date().toISOString().split("T")[0]),p(""),x(!0),_(new Set),N(""),P(""),b([]),l(!1))},[e,r]),!e||!r)return null;const O=r.purchaserType==="Installer"?r.installerEmail?r.installerName:null:r.customerEmail?r.customerName:null,D=!!(r.purchaserType==="Installer"&&r.installerEmail||r.purchaserType==="Customer"&&r.customerEmail),M=ee=>{const V=new Set(w);V.has(ee)?V.delete(ee):V.add(ee),_(V)},B=ee=>{ee.target.files&&ee.target.files.length>0&&b(V=>[...V,...Array.from(ee.target.files)])},U=ee=>{b(V=>V.filter((te,se)=>se!==ee))},H=async ee=>{ee.preventDefault(),l(!0);try{await n(r.id,{dateReceived:c,notes:f,sendEmailNotification:D&&m,files:v}),t()}catch(V){console.error(V),l(!1)}},Z=async ee=>{if(ee.preventDefault(),w.size===0)return alert("Please select at least one damaged item.");l(!0);const V=r.lineItems.filter(te=>w.has(te.id)).map(te=>({sampleId:te.variantId,quantity:te.quantity,unit:te.unit||"SF"}));try{await i(r.id,{items:V,replacementEta:C,notes:R,sendEmailNotification:D&&m,files:v}),t()}catch(te){console.error(te),l(!1)}};return u.jsx("div",{className:"fixed inset-0 bg-scrim/60 z-50 overflow-y-auto",children:u.jsx("div",{className:"flex min-h-full items-center justify-center p-0 lg:p-4",children:u.jsxs("div",{className:"bg-surface-container-high w-full h-full lg:h-auto lg:max-h-[90vh] lg:max-w-lg lg:rounded-2xl shadow-2xl flex flex-col border border-outline/20 relative",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center lg:rounded-t-2xl sticky top-0 z-10 bg-surface-container-high",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[a==="DAMAGE"?u.jsx(ld,{className:"text-error w-6 h-6"}):u.jsx(R0,{className:"text-primary w-6 h-6"}),u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:a==="DAMAGE"?"Report Damage":"Receive Order"})]}),u.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-surface-container-highest text-text-secondary hover:text-text-primary",children:u.jsx(Gr,{size:24})})]}),u.jsxs("div",{className:"p-6 overflow-y-auto flex-grow",children:[a==="RECEIVE"&&u.jsxs("form",{id:"receive-form",onSubmit:H,className:"space-y-4",children:[u.jsxs("p",{className:"text-sm text-text-secondary mb-4",children:["Mark this order as arrived. This will update the status to ",u.jsx("strong",{children:"Received"}),"."]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Date Received"}),u.jsx("input",{type:"date",required:!0,value:c,onChange:ee=>d(ee.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Notes (Optional)"}),u.jsx("textarea",{value:f,onChange:ee=>p(ee.target.value),placeholder:"e.g. Left in garage, Box 2 looks slightly crushed...",className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary h-24 resize-none placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Paperwork (Packing Slip / BOL)"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("label",{className:"border border-outline/20 bg-surface-container hover:bg-surface-container-highest rounded-xl p-4 flex flex-col items-center justify-center cursor-pointer transition-colors shadow-sm",children:[u.jsx("input",{type:"file",multiple:!0,accept:".pdf, .png, .jpg, .jpeg",className:"hidden",onChange:B}),u.jsx(Kq,{className:"w-6 h-6 text-primary mb-2"}),u.jsx("span",{className:"text-xs font-bold text-text-primary",children:"Upload Files"})]}),u.jsxs("label",{className:"border border-outline/20 bg-surface-container hover:bg-surface-container-highest rounded-xl p-4 flex flex-col items-center justify-center cursor-pointer transition-colors shadow-sm",children:[u.jsx("input",{type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:B}),u.jsx(wv,{className:"w-6 h-6 text-primary mb-2"}),u.jsx("span",{className:"text-xs font-bold text-text-primary",children:"Take Photo"})]})]}),v.length>0&&u.jsx("div",{className:"bg-surface-container border border-outline/20 rounded-xl p-2 space-y-2",children:v.map((ee,V)=>u.jsxs("div",{className:"flex items-center justify-between p-2 bg-surface-container-highest rounded-lg shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[ee.type.startsWith("image/")?u.jsx("img",{src:URL.createObjectURL(ee),alt:"Preview",className:"w-8 h-8 object-cover rounded-md"}):u.jsx(Zc,{className:"w-8 h-8 text-text-tertiary"}),u.jsx("span",{className:"text-xs font-medium truncate max-w-[150px] md:max-w-[200px]",children:ee.name})]}),u.jsx("button",{type:"button",onClick:()=>U(V),className:"text-text-tertiary hover:text-error",children:u.jsx(Gr,{size:16})})]},V))})]}),D&&u.jsxs("button",{type:"button",onClick:()=>x(!m),className:`w-full text-left p-4 rounded-lg border-2 transition-all flex items-center gap-4 group ${m?"border-primary bg-primary-container/30":"border-outline/20 bg-surface-container hover:bg-surface-container-highest"}`,children:[u.jsx("div",{className:`p-2 rounded-full ${m?"bg-primary text-on-primary":"bg-secondary-container text-on-secondary-container"}`,children:m?u.jsx(Xc,{size:24}):u.jsx(Qq,{size:24})}),u.jsxs("div",{children:[u.jsx("p",{className:`font-bold ${m?"text-primary":"text-text-secondary"}`,children:m?"Sending Email Notification":"Email Notification Disabled"}),u.jsx("p",{className:"text-sm text-text-secondary",children:m?`Will notify ${O}`:`Click to enable notification for ${O}`})]})]}),u.jsx("div",{className:"pt-4 flex items-center justify-between",children:u.jsxs("button",{type:"button",onClick:()=>s("DAMAGE"),className:"text-error hover:bg-error-container/30 text-sm font-semibold flex items-center gap-1 px-2 py-1 rounded-full transition-colors",children:[u.jsx(ld,{size:16}),"Report Damage?"]})})]}),a==="DAMAGE"&&u.jsxs("form",{id:"damage-form",onSubmit:Z,className:"space-y-4",children:[u.jsxs("div",{className:"bg-surface-container border border-outline/20 p-3 rounded-xl text-sm text-text-secondary mb-4",children:["This will mark the current order as ",u.jsx("strong",{children:"Received"})," and create a new ",u.jsx("strong",{children:"Replacement Order"})," for the selected items."]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Which items are damaged?"}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border border-outline/20 rounded-xl p-2 bg-surface-container",children:r.lineItems.map(ee=>u.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-surface-container-highest rounded-lg cursor-pointer group",children:[u.jsx("input",{type:"checkbox",checked:w.has(ee.id),onChange:()=>M(ee.id),className:"form-checkbox h-4 w-4 text-primary bg-surface-container-low border-outline/50 rounded-sm focus:ring-primary"}),u.jsxs("div",{className:"text-sm",children:[u.jsxs("span",{className:"font-medium text-text-primary",children:[ee.quantity," ",ee.unit]}),u.jsx("span",{className:"text-text-secondary mx-2",children:"-"}),u.jsxs("span",{className:"text-text-secondary",children:[ee.style," ",ee.color?`(${ee.color})`:""]})]})]},ee.id))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Replacement ETA"}),u.jsx("input",{type:"date",required:!0,value:C,onChange:ee=>N(ee.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Damage Notes"}),u.jsx("textarea",{required:!0,value:R,onChange:ee=>P(ee.target.value),placeholder:"Describe the damage...",className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary h-20 resize-none placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Damage Photos / Evidence"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[u.jsxs("label",{className:"border border-error-container bg-error-container/30 hover:bg-error-container/50 rounded-xl p-4 flex flex-col items-center justify-center cursor-pointer transition-colors shadow-sm",children:[u.jsx("input",{type:"file",multiple:!0,accept:".pdf, .png, .jpg, .jpeg",className:"hidden",onChange:B}),u.jsx(Kq,{className:"w-6 h-6 text-error mb-2"}),u.jsx("span",{className:"text-xs font-bold text-on-error-container",children:"Upload Files"})]}),u.jsxs("label",{className:"border border-error-container bg-error-container/30 hover:bg-error-container/50 rounded-xl p-4 flex flex-col items-center justify-center cursor-pointer transition-colors shadow-sm",children:[u.jsx("input",{type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:B}),u.jsx(wv,{className:"w-6 h-6 text-error mb-2"}),u.jsx("span",{className:"text-xs font-bold text-on-error-container",children:"Take Photo"})]})]}),v.length>0&&u.jsx("div",{className:"bg-surface-container border border-outline/20 rounded-xl p-2 space-y-2",children:v.map((ee,V)=>u.jsxs("div",{className:"flex items-center justify-between p-2 bg-surface-container-highest rounded-lg shadow-sm border-l-2 border-error",children:[u.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[ee.type.startsWith("image/")?u.jsx("img",{src:URL.createObjectURL(ee),alt:"Preview",className:"w-8 h-8 object-cover rounded-md"}):u.jsx(Zc,{className:"w-8 h-8 text-text-tertiary"}),u.jsx("span",{className:"text-xs font-medium truncate max-w-[150px] md:max-w-[200px]",children:ee.name})]}),u.jsx("button",{type:"button",onClick:()=>U(V),className:"text-text-tertiary hover:text-error",children:u.jsx(Gr,{size:16})})]},V))})]}),D&&u.jsxs("button",{type:"button",onClick:()=>x(!m),className:`w-full text-left p-4 rounded-lg border-2 transition-all flex items-center gap-4 group ${m?"border-error bg-error-container/30":"border-outline/20 bg-surface-container hover:bg-surface-container-highest"}`,children:[u.jsx("div",{className:`p-2 rounded-full ${m?"bg-error text-on-error":"bg-secondary-container text-on-secondary-container"}`,children:m?u.jsx(Xc,{size:24}):u.jsx(Qq,{size:24})}),u.jsxs("div",{children:[u.jsx("p",{className:`font-bold ${m?"text-error":"text-text-secondary"}`,children:m?"Sending Damage Alert":"Alert Disabled"}),u.jsx("p",{className:"text-sm text-text-secondary",children:m?`Will notify ${O}`:`Click to enable alert for ${O}`})]})]})]})]}),u.jsx("div",{className:"p-4 border-t border-outline/10 bg-surface-container-high lg:rounded-b-2xl flex justify-end gap-3 shrink-0 sticky bottom-0 z-10 lg:static",children:a==="DAMAGE"?u.jsxs(u.Fragment,{children:[u.jsxs("button",{type:"button",onClick:()=>s("RECEIVE"),className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors flex items-center gap-2",children:[u.jsx(rf,{size:16})," Back"]}),u.jsx("button",{form:"damage-form",type:"submit",disabled:o,className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all disabled:opacity-50",children:o?"Processing...":"Submit Damage Report"})]}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:t,type:"button",className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors",children:"Cancel"}),u.jsxs("button",{form:"receive-form",type:"submit",disabled:o,className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all flex items-center gap-2 disabled:opacity-50",children:[u.jsx(A4,{size:18}),o?"Receiving...":"Mark as Received"]})]})})]})})})},Get=()=>{const{data:e=[]}=Yh(),{data:t=[]}=C4(),r=k4(),[n,i]=I.useState(""),[a,s]=I.useState(null),[o,l]=I.useState(!1),[c,d]=I.useState(null),[f,p]=I.useState(null),[m,x]=I.useState(!1),[v,b]=I.useState(new Set),w=D=>{b(M=>{const B=new Set(M);return B.has(D)?B.delete(D):B.add(D),B})},_=I.useMemo(()=>{const D=[],M=new Map;return t.forEach(B=>{var U;M.has(B.projectId)||M.set(B.projectId,[]),(U=M.get(B.projectId))==null||U.push(B)}),e.forEach(B=>{let U=M.get(B.id)||[];m||(U=U.filter(Z=>Z.status==="Ordered"||Z.status==="Damage Replacement"));const H=!n||B.projectName.toLowerCase().includes(n.toLowerCase())||U.some(Z=>{var ee;return(ee=Z.supplierName)==null?void 0:ee.toLowerCase().includes(n.toLowerCase())});U.length>0&&H&&D.push({project:B,orders:U.sort((Z,ee)=>new Date(ee.orderDate).getTime()-new Date(Z.orderDate).getTime())})}),D.sort((B,U)=>{const H=B.orders.some(ee=>ee.status==="Ordered"),Z=U.orders.some(ee=>ee.status==="Ordered");return H&&!Z?-1:!H&&Z?1:0})},[e,t,n,m]),C=D=>{s(D)},N=D=>{d(D.id),l(!0)},R=()=>{d(null),l(!0)},P=async(D,M)=>{await r.receiveMaterialOrder({id:D,data:M})},O=async(D,M)=>{await r.reportMaterialOrderDamage({id:D,data:M})};return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 px-1",children:[u.jsxs("div",{children:[u.jsxs("h1",{className:"text-4xl font-bold text-text-primary tracking-tight flex items-center gap-3",children:[u.jsx(R0,{className:"text-primary w-8 h-8"})," Order Dashboard"]}),u.jsx("p",{className:"text-text-secondary text-sm mt-1 ml-11 font-medium",children:"Track, receive, and manage material orders."})]}),u.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full md:w-auto mt-4 md:mt-0",children:[u.jsxs("button",{onClick:()=>x(!m),className:"w-full md:w-auto justify-center bg-surface-container-high border border-outline/10 hover:bg-surface-container-highest text-text-secondary font-medium py-3 px-6 rounded-full flex items-center gap-2 transition-colors",children:[m?u.jsx(coe,{size:20}):u.jsx(R7,{size:20}),m?"Hide Received":"Show Received"]}),u.jsxs("button",{onClick:R,className:"w-full md:w-auto justify-center bg-primary hover:bg-primary-hover text-on-primary font-semibold py-3 px-6 rounded-full flex items-center gap-2 shadow-lg hover:shadow-xl transition-all",children:[u.jsx(Jl,{size:20})," New Order"]})]})]}),u.jsxs("div",{className:"relative w-full max-w-2xl",children:[u.jsx(gc,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-text-secondary",size:20}),u.jsx("input",{type:"text",placeholder:"Search projects or suppliers...",value:n,onChange:D=>i(D.target.value),className:"w-full pl-12 pr-6 py-4 bg-surface-container-high border-none rounded-full text-text-primary focus:ring-2 focus:ring-primary/50 outline-none transition-shadow shadow-sm hover:shadow-md placeholder:text-text-tertiary"})]}),_.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-text-secondary",children:[u.jsx(ex,{size:48,className:"mb-4 opacity-50"}),u.jsx("p",{className:"text-lg font-medium",children:"No active orders found."}),u.jsx("p",{className:"text-sm",children:"Create a material order from a Job Detail page to see it here."})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:_.map(({project:D,orders:M})=>{var V;const B=v.has(D.id),U=B?M:M.slice(0,2),H=M.length-U.length,ee=`${((V=M[0])==null?void 0:V.customerName)||"N/A"}'s Project`;return u.jsxs("div",{className:"bg-surface-container-high border border-outline/10 rounded-xl shadow-sm flex flex-col transition-all duration-200 hover:shadow-md",children:[u.jsxs("div",{className:"p-5 border-b border-outline/10 flex justify-between items-start bg-surface-container-low rounded-t-xl",children:[u.jsxs("div",{className:"min-w-0 pr-2",children:[u.jsx(ai,{to:`/projects/${D.id}`,className:"font-bold text-xl text-primary hover:text-primary-hover hover:underline truncate block",title:"View Project",children:ee}),u.jsx("p",{className:"text-xs text-text-secondary truncate",children:D.projectName})]}),u.jsx("button",{onClick:()=>N(D),className:"flex-shrink-0 p-2 bg-surface-container-highest hover:bg-primary-container text-primary rounded-full transition-colors",title:"Add Order",children:u.jsx(Jl,{size:18})})]}),u.jsx("div",{className:"p-5 space-y-6 flex-grow",children:U.map(te=>u.jsxs("div",{className:`relative border-l-4 pl-3 py-1 ${te.status==="Received"?"border-success":te.status==="Damage Replacement"?"border-error":"border-primary"}`,children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsx("span",{className:"font-semibold text-text-primary text-sm truncate max-w-[60%]",children:te.supplierName||"Unknown Supplier"}),u.jsxs("div",{className:"flex items-center",children:[te.status==="Received"?u.jsxs("span",{className:"text-xs font-bold text-success flex items-center gap-1",children:[u.jsx(A4,{size:12})," Received"]}):te.status==="Damage Replacement"?u.jsxs("span",{className:"text-xs font-bold text-error flex items-center gap-1",children:[u.jsx(ld,{size:12})," Replacement"]}):u.jsxs("span",{className:"text-xs font-bold text-primary flex items-center gap-1",children:[u.jsx(od,{size:12})," Ordered"]}),u.jsx("button",{onClick:()=>p(te),className:"p-1.5 text-text-tertiary hover:text-primary hover:bg-surface-container-highest rounded-full transition-colors ml-2",title:"Edit Order Details",children:u.jsx(tx,{size:12})})]})]}),u.jsxs("div",{className:"flex gap-4 mb-3",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-[10px] uppercase tracking-wide text-text-tertiary block font-bold",children:"Ordered"}),u.jsx("span",{className:"text-sm font-medium text-text-primary",children:new Date(te.orderDate.split("T")[0]+"T12:00:00").toLocaleDateString()})]}),te.etaDate&&u.jsxs("div",{children:[u.jsx("span",{className:"text-[10px] uppercase tracking-wide text-text-tertiary block font-bold",children:"ETA"}),u.jsx("span",{className:`text-sm font-medium ${new Date(te.etaDate.split("T")[0]+"T12:00:00")<new Date&&te.status!=="Received"?"text-error font-bold":"text-text-primary"}`,children:new Date(te.etaDate.split("T")[0]+"T12:00:00").toLocaleDateString()})]})]}),u.jsxs("ul",{className:"text-xs text-text-secondary mb-3 bg-surface-container-low p-3 rounded-lg border border-outline/10",children:[te.lineItems.slice(0,3).map(se=>u.jsx("li",{className:"flex justify-between",children:u.jsxs("span",{className:"truncate w-3/4",children:[se.quantity," ",se.unit," - ",se.style]})},se.id)),te.lineItems.length>3&&u.jsxs("li",{className:"text-text-tertiary italic",children:["+",te.lineItems.length-3," more..."]})]}),te.status!=="Received"&&u.jsxs("button",{onClick:()=>C(te),className:"w-full py-4 md:py-2 bg-primary hover:bg-primary-hover text-on-primary text-lg md:text-xs font-bold md:font-semibold rounded-full md:rounded-full flex items-center justify-center gap-3 md:gap-2 transition-colors shadow-sm mt-3 md:mt-0",children:[u.jsx(ex,{className:"w-6 h-6 md:w-3.5 md:h-3.5"})," Receive Order"]})]},te.id))}),M.length>2&&u.jsx("button",{onClick:()=>w(D.id),className:"w-full py-3 border-t border-outline/10 flex items-center justify-center gap-1 text-xs font-semibold text-text-secondary hover:text-primary hover:bg-surface-container-highest transition-colors rounded-b-xl",children:B?u.jsxs(u.Fragment,{children:["Show Less ",u.jsx(no,{size:14})]}):u.jsxs(u.Fragment,{children:["Show ",H," More ",u.jsx(cs,{size:14})]})})]},D.id)})}),a&&u.jsx(td,{children:u.jsx(qet,{isOpen:!!a,onClose:()=>s(null),order:a,onReceive:P,onReportDamage:O})}),o&&u.jsx(td,{children:u.jsx(vT,{isOpen:o,onClose:()=>l(!1),editingOrder:null,initialProjectId:c})}),f&&u.jsx(td,{children:u.jsx(vT,{isOpen:!!f,onClose:()=>p(null),editingOrder:f})})]})},Ket=(e,t)=>{if(!e||e.length===0){alert("No data to export");return}const r=Object.keys(e[0]),n=[r.join(","),...e.map(o=>r.map(l=>{let c=o[l];if(c==null)return"";let d=String(c);return(d.includes(",")||d.includes('"')||d.includes(`
`))&&(d=`"${d.replace(/"/g,'""')}"`),d}).join(","))].join(`
`),i=new Blob([n],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(i),s=document.createElement("a");s.setAttribute("href",a),s.setAttribute("download",`${t}_${new Date().toISOString().split("T")[0]}.csv`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)},LY=e=>{const t=Number(e)||0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)},Xet=({data:e,sortConfig:t,onSort:r,hiddenColumns:n,showCost:i,onRowClick:a})=>{const s=o=>!n.includes(o);return u.jsxs("table",{className:"min-w-full text-left text-sm whitespace-nowrap",children:[u.jsx("thead",{className:"uppercase tracking-wider border-b-2 border-gray-200 bg-gray-50 print:bg-transparent",children:u.jsxs("tr",{children:[s("manufacturer")&&u.jsx("th",{onClick:()=>r("manufacturer_name"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Manufacturer ",(t==null?void 0:t.key)==="manufacturer_name"&&(t.direction==="asc"?u.jsx(no,{className:"w-4 h-4"}):u.jsx(cs,{className:"w-4 h-4"}))]})}),s("product")&&u.jsx("th",{onClick:()=>r("product_name"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Product ",(t==null?void 0:t.key)==="product_name"&&(t.direction==="asc"?u.jsx(no,{className:"w-4 h-4"}):u.jsx(cs,{className:"w-4 h-4"}))]})}),s("style_size")&&u.jsx("th",{onClick:()=>r("variant_size"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Style / Size ",(t==null?void 0:t.key)==="variant_size"&&(t.direction==="asc"?u.jsx(no,{className:"w-4 h-4"}):u.jsx(cs,{className:"w-4 h-4"}))]})}),s("sku")&&u.jsx("th",{onClick:()=>r("sku"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["SKU ",(t==null?void 0:t.key)==="sku"&&(t.direction==="asc"?u.jsx(no,{className:"w-4 h-4"}):u.jsx(cs,{className:"w-4 h-4"}))]})}),s("carton")&&u.jsx("th",{onClick:()=>r("carton_size"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Carton ",(t==null?void 0:t.key)==="carton_size"&&(t.direction==="asc"?u.jsx(no,{className:"w-4 h-4"}):u.jsx(cs,{className:"w-4 h-4"}))]})}),i&&u.jsx("th",{onClick:()=>r("unit_cost"),className:"px-4 py-3 font-semibold text-red-600 print:text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Unit Cost ",(t==null?void 0:t.key)==="unit_cost"&&(t.direction==="asc"?u.jsx(no,{className:"w-4 h-4"}):u.jsx(cs,{className:"w-4 h-4"}))]})}),s("retail")&&u.jsx("th",{onClick:()=>r("retail_price"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Retail Price ",(t==null?void 0:t.key)==="retail_price"&&(t.direction==="asc"?u.jsx(no,{className:"w-4 h-4"}):u.jsx(cs,{className:"w-4 h-4"}))]})})]})}),u.jsxs("tbody",{className:"divide-y divide-gray-100",children:[e.map((o,l)=>u.jsxs("tr",{className:"hover:bg-indigo-50 cursor-pointer transition-colors break-inside-avoid",onClick:()=>a(o),children:[s("manufacturer")&&u.jsx("td",{className:"px-4 py-2 text-gray-600",children:o.manufacturer_name}),s("product")&&u.jsxs("td",{className:"px-4 py-2 text-gray-900 font-medium",children:[o.product_name,u.jsx("span",{className:"ml-2 text-xs text-gray-500 bg-gray-100 px-1 rounded",children:o.product_type})]}),s("style_size")&&u.jsxs("td",{className:"px-4 py-2 text-gray-600",children:[o.variant_style&&u.jsx("span",{className:"mr-1",children:o.variant_style}),o.variant_color&&u.jsx("span",{className:"mr-1",children:o.variant_color}),o.variant_size&&u.jsxs("span",{className:"ml-1 text-gray-500",children:["(",o.variant_size,")"]})]}),s("sku")&&u.jsx("td",{className:"px-4 py-2 text-gray-500 font-mono text-xs",children:o.sku||"-"}),s("carton")&&u.jsx("td",{className:"px-4 py-2 text-gray-600 font-mono text-xs",children:o.carton_size?`${o.carton_size} ${o.uom||""}`:"-"}),i&&u.jsxs("td",{className:"px-4 py-2 text-red-600 print:text-gray-900 font-mono",children:[LY(o.unit_cost)," / ",o.uom]}),s("retail")&&u.jsxs("td",{className:"px-4 py-2 text-gray-900 font-mono font-bold",children:[LY(o.retail_price)," / ",o.uom]})]},l)),u.jsx("tr",{className:"bg-gray-100 font-bold border-t-2 border-gray-300",children:u.jsxs("td",{colSpan:10,className:"px-4 py-3 text-sm text-gray-600",children:["Showing ",e.length," Variants"]})})]})]})},W_=e=>{const t=Number(e)||0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)},Yet=e=>e?new Date(e).toLocaleDateString():"-",Qet=({data:e,sortConfig:t,onSort:r,hiddenColumns:n,showCost:i,onRowClick:a})=>{const s=o=>!n.includes(o);return u.jsxs("table",{className:"min-w-full text-left text-sm whitespace-nowrap",children:[u.jsx("thead",{className:"uppercase tracking-wider border-b-2 border-gray-200 bg-gray-50 print:bg-transparent",children:u.jsxs("tr",{children:[s("date")&&u.jsx("th",{onClick:()=>r("created_at"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Date ",(t==null?void 0:t.key)==="created_at"&&(t.direction==="asc"?u.jsx(no,{className:"w-4 h-4"}):u.jsx(cs,{className:"w-4 h-4"}))]})}),s("customer")&&u.jsx("th",{onClick:()=>r("customer_name"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Customer ",(t==null?void 0:t.key)==="customer_name"&&(t.direction==="asc"?u.jsx(no,{className:"w-4 h-4"}):u.jsx(cs,{className:"w-4 h-4"}))]})}),s("project")&&u.jsx("th",{onClick:()=>r("project_name"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Project ",(t==null?void 0:t.key)==="project_name"&&(t.direction==="asc"?u.jsx(no,{className:"w-4 h-4"}):u.jsx(cs,{className:"w-4 h-4"}))]})}),s("status")&&u.jsx("th",{onClick:()=>r("status"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Status ",(t==null?void 0:t.key)==="status"&&(t.direction==="asc"?u.jsx(no,{className:"w-4 h-4"}):u.jsx(cs,{className:"w-4 h-4"}))]})}),i&&u.jsx("th",{className:"px-4 py-3 font-semibold text-red-600",children:"Est. Cost"}),s("total")&&u.jsx("th",{onClick:()=>r("total_value"),className:"px-4 py-3 font-semibold text-gray-900 text-right cursor-pointer hover:bg-gray-100 select-none flex justify-end",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Total Value ",(t==null?void 0:t.key)==="total_value"&&(t.direction==="asc"?u.jsx(no,{className:"w-4 h-4"}):u.jsx(cs,{className:"w-4 h-4"}))]})})]})}),u.jsxs("tbody",{className:"divide-y divide-gray-100",children:[e.map((o,l)=>u.jsxs("tr",{className:"hover:bg-indigo-50 cursor-pointer transition-colors break-inside-avoid",onClick:()=>a(o),children:[s("date")&&u.jsx("td",{className:"px-4 py-2 text-gray-600",children:Yet(o.created_at)}),s("customer")&&u.jsx("td",{className:"px-4 py-2 text-gray-900 font-medium",children:o.customer_name}),s("project")&&u.jsx("td",{className:"px-4 py-2 text-gray-600",children:o.project_name}),s("status")&&u.jsx("td",{className:"px-4 py-2",children:u.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700 border border-gray-300",children:o.status})}),i&&u.jsx("td",{className:"px-4 py-2 text-red-600 font-mono",children:W_(Number(o.material_cost)+Number(o.labor_cost))}),s("total")&&u.jsx("td",{className:"px-4 py-2 text-gray-900 font-mono font-bold text-right",children:Number(o.total_value)>0?W_(o.total_value):"-"})]},l)),u.jsx("tr",{className:"bg-gray-100 font-bold border-t-2 border-gray-300",children:u.jsxs("td",{colSpan:100,className:"px-4 py-3 text-right flex justify-between",children:[u.jsx("span",{children:"TOTAL PIPELINE:"}),u.jsxs("div",{className:"flex gap-4",children:[i&&u.jsx("span",{className:"font-mono text-red-700",children:W_(e.reduce((o,l)=>o+(Number(l.material_cost)+Number(l.labor_cost)),0))}),s("total")&&u.jsx("span",{className:"font-mono text-lg",children:W_(e.reduce((o,l)=>o+Number(l.total_value),0))})]})]})})]})]})},BY=e=>{const t=Number(e)||0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)},Jet=({data:e,sortConfig:t,onSort:r,hiddenColumns:n,onRowClick:i})=>{const a=s=>!n.includes(s);return u.jsxs("table",{className:"min-w-full text-left text-sm whitespace-nowrap",children:[u.jsx("thead",{className:"uppercase tracking-wider border-b-2 border-gray-200 bg-gray-50 print:bg-transparent",children:u.jsxs("tr",{children:[a("installer")&&u.jsx("th",{onClick:()=>r("installer_name"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Installer Name ",(t==null?void 0:t.key)==="installer_name"&&(t.direction==="asc"?u.jsx(no,{className:"w-4 h-4"}):u.jsx(cs,{className:"w-4 h-4"}))]})}),a("jobs")&&u.jsx("th",{onClick:()=>r("appointment_count"),className:"px-4 py-3 font-semibold text-gray-900 text-center cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Jobs (Period) ",(t==null?void 0:t.key)==="appointment_count"&&(t.direction==="asc"?u.jsx(no,{className:"w-4 h-4"}):u.jsx(cs,{className:"w-4 h-4"}))]})}),a("labor")&&u.jsx("th",{onClick:()=>r("total_labor_value"),className:"px-4 py-3 font-semibold text-gray-900 text-right cursor-pointer hover:bg-gray-100 select-none flex justify-end",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Labor Value ",(t==null?void 0:t.key)==="total_labor_value"&&(t.direction==="asc"?u.jsx(no,{className:"w-4 h-4"}):u.jsx(cs,{className:"w-4 h-4"}))]})})]})}),u.jsxs("tbody",{className:"divide-y divide-gray-100",children:[e.map((s,o)=>u.jsxs("tr",{className:"hover:bg-indigo-50 cursor-pointer transition-colors break-inside-avoid",onClick:()=>i(s),children:[a("installer")&&u.jsxs("td",{className:"px-4 py-3 text-gray-900 font-medium flex items-center gap-2",children:[u.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:s.color||"#ccc"}}),s.installer_name]}),a("jobs")&&u.jsx("td",{className:"px-4 py-3 text-center text-gray-600",children:s.appointment_count}),a("labor")&&u.jsx("td",{className:"px-4 py-3 text-right text-gray-900 font-mono font-bold",children:BY(s.total_labor_value)})]},o)),u.jsx("tr",{className:"bg-gray-100 font-bold border-t-2 border-gray-300",children:u.jsx("td",{colSpan:10,className:"px-4 py-3",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{children:"TOTALS:"}),a("labor")&&u.jsx("span",{className:"font-mono text-lg text-gray-900",children:BY(e.reduce((s,o)=>s+Number(o.total_labor_value),0))})]})})})]})]})};var Zet=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function _B(e){if(typeof e!="string")return!1;var t=Zet;return t.includes(e)}var ett=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],ttt=new Set(ett);function ihe(e){return typeof e!="string"?!1:ttt.has(e)}function ahe(e){return typeof e=="string"&&e.startsWith("data-")}function Bh(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(ihe(r)||ahe(r))&&(t[r]=e[r]);return t}function NB(e){if(e==null)return null;if(I.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Bh(t)}return typeof e=="object"&&!Array.isArray(e)?Bh(e):null}function du(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(ihe(r)||ahe(r)||_B(r))&&(t[r]=e[r]);return t}var rtt=["children","width","height","viewBox","className","style","title","desc"];function v5(){return v5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v5.apply(null,arguments)}function ntt(e,t){if(e==null)return{};var r,n,i=itt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function itt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var she=I.forwardRef((e,t)=>{var{children:r,width:n,height:i,viewBox:a,className:s,style:o,title:l,desc:c}=e,d=ntt(e,rtt),f=a||{width:n,height:i,x:0,y:0},p=gi("recharts-surface",s);return I.createElement("svg",v5({},du(d),{className:p,width:n,height:i,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),I.createElement("title",null,l),I.createElement("desc",null,c),r)}),att=["children","className"];function y5(){return y5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y5.apply(null,arguments)}function stt(e,t){if(e==null)return{};var r,n,i=ott(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ott(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Uh=I.forwardRef((e,t)=>{var{children:r,className:n}=e,i=stt(e,att),a=gi("recharts-layer",n);return I.createElement("g",y5({className:a},du(i),{ref:t}),r)}),ltt=I.createContext(null);function pi(e){return function(){return e}}const ohe=Math.cos,fI=Math.sin,md=Math.sqrt,hI=Math.PI,A3=2*hI,b5=Math.PI,w5=2*b5,Lm=1e-6,ctt=w5-Lm;function lhe(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function utt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return lhe;const r=10**t;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class dtt{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?lhe:utt(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,a,s){this._append`C${+t},${+r},${+n},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(t,r,n,i,a){if(t=+t,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=n-t,c=i-r,d=s-t,f=o-r,p=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>Lm)if(!(Math.abs(f*l-c*d)>Lm)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-s,x=i-o,v=l*l+c*c,b=m*m+x*x,w=Math.sqrt(v),_=Math.sqrt(p),C=a*Math.tan((b5-Math.acos((v+p-b)/(2*w*_)))/2),N=C/_,R=C/w;Math.abs(N-1)>Lm&&this._append`L${t+N*d},${r+N*f}`,this._append`A${a},${a},0,0,${+(f*m>d*x)},${this._x1=t+R*l},${this._y1=r+R*c}`}}arc(t,r,n,i,a,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(i),l=n*Math.sin(i),c=t+o,d=r+l,f=1^s,p=s?i-a:a-i;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>Lm||Math.abs(this._y1-d)>Lm)&&this._append`L${c},${d}`,n&&(p<0&&(p=p%w5+w5),p>ctt?this._append`A${n},${n},0,1,${f},${t-o},${r-l}A${n},${n},0,1,${f},${this._x1=c},${this._y1=d}`:p>Lm&&this._append`A${n},${n},0,${+(p>=b5)},${f},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function AB(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new dtt(t)}function TB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function che(e){this._context=e}che.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function T3(e){return new che(e)}function uhe(e){return e[0]}function dhe(e){return e[1]}function fhe(e,t){var r=pi(!0),n=null,i=T3,a=null,s=AB(o);e=typeof e=="function"?e:e===void 0?uhe:pi(e),t=typeof t=="function"?t:t===void 0?dhe:pi(t);function o(l){var c,d=(l=TB(l)).length,f,p=!1,m;for(n==null&&(a=i(m=s())),c=0;c<=d;++c)!(c<d&&r(f=l[c],c,l))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(f,c,l),+t(f,c,l));if(m)return a=null,m+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:pi(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:pi(+l),o):t},o.defined=function(l){return arguments.length?(r=typeof l=="function"?l:pi(!!l),o):r},o.curve=function(l){return arguments.length?(i=l,n!=null&&(a=i(n)),o):i},o.context=function(l){return arguments.length?(l==null?n=a=null:a=i(n=l),o):n},o}function V_(e,t,r){var n=null,i=pi(!0),a=null,s=T3,o=null,l=AB(c);e=typeof e=="function"?e:e===void 0?uhe:pi(+e),t=typeof t=="function"?t:pi(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?dhe:pi(+r);function c(f){var p,m,x,v=(f=TB(f)).length,b,w=!1,_,C=new Array(v),N=new Array(v);for(a==null&&(o=s(_=l())),p=0;p<=v;++p){if(!(p<v&&i(b=f[p],p,f))===w)if(w=!w)m=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),x=p-1;x>=m;--x)o.point(C[x],N[x]);o.lineEnd(),o.areaEnd()}w&&(C[p]=+e(b,p,f),N[p]=+t(b,p,f),o.point(n?+n(b,p,f):C[p],r?+r(b,p,f):N[p]))}if(_)return o=null,_+""||null}function d(){return fhe().defined(i).curve(s).context(a)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:pi(+f),n=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:pi(+f),c):e},c.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:pi(+f),c):n},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:pi(+f),r=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:pi(+f),c):t},c.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:pi(+f),c):r},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(r)},c.lineX1=function(){return d().x(n).y(t)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:pi(!!f),c):i},c.curve=function(f){return arguments.length?(s=f,a!=null&&(o=s(a)),c):s},c.context=function(f){return arguments.length?(f==null?a=o=null:o=s(a=f),c):a},c}class hhe{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function ftt(e){return new hhe(e,!0)}function htt(e){return new hhe(e,!1)}const IB={draw(e,t){const r=md(t/hI);e.moveTo(r,0),e.arc(0,0,r,0,A3)}},ptt={draw(e,t){const r=md(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},phe=md(1/3),mtt=phe*2,gtt={draw(e,t){const r=md(t/mtt),n=r*phe;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},xtt={draw(e,t){const r=md(t),n=-r/2;e.rect(n,n,r,r)}},vtt=.8908130915292852,mhe=fI(hI/10)/fI(7*hI/10),ytt=fI(A3/10)*mhe,btt=-ohe(A3/10)*mhe,wtt={draw(e,t){const r=md(t*vtt),n=ytt*r,i=btt*r;e.moveTo(0,-r),e.lineTo(n,i);for(let a=1;a<5;++a){const s=A3*a/5,o=ohe(s),l=fI(s);e.lineTo(l*r,-o*r),e.lineTo(o*n-l*i,l*n+o*i)}e.closePath()}},HD=md(3),Stt={draw(e,t){const r=-md(t/(HD*3));e.moveTo(0,r*2),e.lineTo(-HD*r,-r),e.lineTo(HD*r,-r),e.closePath()}},Ac=-.5,Tc=md(3)/2,S5=1/md(12),Ett=(S5/2+1)*3,Ctt={draw(e,t){const r=md(t/Ett),n=r/2,i=r*S5,a=n,s=r*S5+r,o=-a,l=s;e.moveTo(n,i),e.lineTo(a,s),e.lineTo(o,l),e.lineTo(Ac*n-Tc*i,Tc*n+Ac*i),e.lineTo(Ac*a-Tc*s,Tc*a+Ac*s),e.lineTo(Ac*o-Tc*l,Tc*o+Ac*l),e.lineTo(Ac*n+Tc*i,Ac*i-Tc*n),e.lineTo(Ac*a+Tc*s,Ac*s-Tc*a),e.lineTo(Ac*o+Tc*l,Ac*l-Tc*o),e.closePath()}};function ktt(e,t){let r=null,n=AB(i);e=typeof e=="function"?e:pi(e||IB),t=typeof t=="function"?t:pi(t===void 0?64:+t);function i(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:pi(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:pi(+a),i):t},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function pI(){}function mI(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function ghe(e){this._context=e}ghe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:mI(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:mI(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _tt(e){return new ghe(e)}function xhe(e){this._context=e}xhe.prototype={areaStart:pI,areaEnd:pI,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:mI(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ntt(e){return new xhe(e)}function vhe(e){this._context=e}vhe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:mI(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Att(e){return new vhe(e)}function yhe(e){this._context=e}yhe.prototype={areaStart:pI,areaEnd:pI,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Ttt(e){return new yhe(e)}function UY(e){return e<0?-1:1}function $Y(e,t,r){var n=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(n||i<0&&-0),s=(r-e._y1)/(i||n<0&&-0),o=(a*i+s*n)/(n+i);return(UY(a)+UY(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function zY(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function WD(e,t,r){var n=e._x0,i=e._y0,a=e._x1,s=e._y1,o=(a-n)/3;e._context.bezierCurveTo(n+o,i+o*t,a-o,s-o*r,a,s)}function gI(e){this._context=e}gI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:WD(this,this._t0,zY(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,WD(this,zY(this,r=$Y(this,e,t)),r);break;default:WD(this,this._t0,r=$Y(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function bhe(e){this._context=new whe(e)}(bhe.prototype=Object.create(gI.prototype)).point=function(e,t){gI.prototype.point.call(this,t,e)};function whe(e){this._context=e}whe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,a){this._context.bezierCurveTo(t,e,n,r,a,i)}};function Itt(e){return new gI(e)}function Ott(e){return new bhe(e)}function She(e){this._context=e}She.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=HY(e),i=HY(t),a=0,s=1;s<r;++a,++s)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function HY(e){var t,r=e.length-1,n,i=new Array(r),a=new Array(r),s=new Array(r);for(i[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,s[t]-=n*s[t-1];for(i[r-1]=s[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(s[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function Ptt(e){return new She(e)}function I3(e,t){this._context=e,this._t=t}I3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Rtt(e){return new I3(e,.5)}function jtt(e){return new I3(e,0)}function Dtt(e){return new I3(e,1)}function Ny(e,t){if((s=e.length)>1)for(var r=1,n,i,a=e[t[0]],s,o=a.length;r<s;++r)for(i=a,a=e[t[r]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function E5(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Mtt(e,t){return e[t]}function Ftt(e){const t=[];return t.key=e,t}function Ltt(){var e=pi([]),t=E5,r=Ny,n=Mtt;function i(a){var s=Array.from(e.apply(this,arguments),Ftt),o,l=s.length,c=-1,d;for(const f of a)for(o=0,++c;o<l;++o)(s[o][c]=[0,+n(f,s[o].key,c,a)]).data=f;for(o=0,d=TB(t(s));o<l;++o)s[d[o]].index=o;return r(s,d),s}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:pi(Array.from(a)),i):e},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:pi(+a),i):n},i.order=function(a){return arguments.length?(t=a==null?E5:typeof a=="function"?a:pi(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(r=a??Ny,i):r},i}function Btt(e,t){if((n=e.length)>0){for(var r,n,i=0,a=e[0].length,s;i<a;++i){for(s=r=0;r<n;++r)s+=e[r][i][1]||0;if(s)for(r=0;r<n;++r)e[r][i][1]/=s}Ny(e,t)}}function Utt(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,a=n.length;r<a;++r){for(var s=0,o=0;s<i;++s)o+=e[s][r][1]||0;n[r][1]+=n[r][0]=-o/2}Ny(e,t)}}function $tt(e,t){if(!(!((s=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,a,s;n<a;++n){for(var o=0,l=0,c=0;o<s;++o){for(var d=e[t[o]],f=d[n][1]||0,p=d[n-1][1]||0,m=(f-p)/2,x=0;x<o;++x){var v=e[t[x]],b=v[n][1]||0,w=v[n-1][1]||0;m+=b-w}l+=f,c+=m*f}i[n-1][1]+=i[n-1][0]=r,l&&(r-=c/l)}i[n-1][1]+=i[n-1][0]=r,Ny(e,t)}}var O3={},Ehe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Ehe);var OB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(OB);var P3={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(P3);var R3={},Che={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(Che);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Che,r=P3;function n(i){if(Array.isArray(i))return i.map(r.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const a=[],s=i.length;if(s===0)return a;let o=0,l="",c="",d=!1;for(i.charCodeAt(0)===46&&(a.push(""),o++);o<s;){const f=i[o];c?f==="\\"&&o+1<s?(o++,l+=i[o]):f===c?c="":l+=f:d?f==='"'||f==="'"?c=f:f==="]"?(d=!1,a.push(l),l=""):l+=f:f==="["?(d=!0,l&&(a.push(l),l="")):f==="."?l&&(a.push(l),l=""):l+=f,o++}return l&&a.push(l),a}e.toPath=n})(R3);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ehe,r=OB,n=P3,i=R3;function a(o,l,c){if(o==null)return c;switch(typeof l){case"string":{if(t.isUnsafeProperty(l))return c;const d=o[l];return d===void 0?r.isDeepKey(l)?a(o,i.toPath(l),c):c:d}case"number":case"symbol":{typeof l=="number"&&(l=n.toKey(l));const d=o[l];return d===void 0?c:d}default:{if(Array.isArray(l))return s(o,l,c);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),t.isUnsafeProperty(l))return c;const d=o[l];return d===void 0?c:d}}}function s(o,l,c){if(l.length===0)return c;let d=o;for(let f=0;f<l.length;f++){if(d==null||t.isUnsafeProperty(l[f]))return c;d=d[l[f]]}return d===void 0?c:d}e.get=a})(O3);var ztt=O3.get;const Ay=Us(ztt);var fl=e=>e===0?0:e>0?1:-1,cd=e=>typeof e=="number"&&e!=+e,$h=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ur=e=>(typeof e=="number"||e instanceof Number)&&!cd(e),cf=e=>ur(e)||typeof e=="string",Htt=0,DS=e=>{var t=++Htt;return"".concat(e||"").concat(t)},ud=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ur(t)&&typeof t!="string")return n;var a;if($h(t)){if(r==null)return n;var s=t.indexOf("%");a=r*parseFloat(t.slice(0,s))/100}else a=+t;return cd(a)&&(a=n),i&&r!=null&&a>r&&(a=r),a},khe=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function Is(e,t,r){return ur(e)&&ur(t)?e+r*(t-e):t}function Wtt(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Ay(n,t))===r)}var ys=e=>e===null||typeof e>"u",gC=e=>ys(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function Vtt(e){return e!=null}function xC(){}var qtt=["type","size","sizeType"];function C5(){return C5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C5.apply(null,arguments)}function WY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function VY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WY(Object(r),!0).forEach(function(n){Gtt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gtt(e,t,r){return(t=Ktt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ktt(e){var t=Xtt(e,"string");return typeof t=="symbol"?t:t+""}function Xtt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ytt(e,t){if(e==null)return{};var r,n,i=Qtt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Qtt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _he={symbolCircle:IB,symbolCross:ptt,symbolDiamond:gtt,symbolSquare:xtt,symbolStar:wtt,symbolTriangle:Stt,symbolWye:Ctt},Jtt=Math.PI/180,Ztt=e=>{var t="symbol".concat(gC(e));return _he[t]||IB},ert=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*Jtt;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},trt=(e,t)=>{_he["symbol".concat(gC(e))]=t},Nhe=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,i=Ytt(e,qtt),a=VY(VY({},i),{},{type:t,size:r,sizeType:n}),s="circle";typeof t=="string"&&(s=t);var o=()=>{var p=Ztt(s),m=ktt().type(p).size(ert(r,n,s)),x=m();if(x!==null)return x},{className:l,cx:c,cy:d}=a,f=du(a);return ur(c)&&ur(d)&&ur(r)?I.createElement("path",C5({},f,{className:gi("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(d,")"),d:o()})):null};Nhe.registerSymbol=trt;var Ahe=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,rrt=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(I.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{_B(i)&&(n[i]=a=>r[i](r,a))}),n},nrt=(e,t,r)=>n=>(e(t,r,n),null),PB=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(i=>{var a=e[i];_B(i)&&typeof a=="function"&&(n||(n={}),n[i]=nrt(a,t,r))}),n};function qY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function irt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qY(Object(r),!0).forEach(function(n){art(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function art(e,t,r){return(t=srt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function srt(e){var t=ort(e,"string");return typeof t=="symbol"?t:t+""}function ort(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vc(e,t){var r=irt({},e),n=t,i=Object.keys(t),a=i.reduce((s,o)=>(s[o]===void 0&&n[o]!==void 0&&(s[o]=n[o]),s),r);return a}var The={},Ihe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const i=new Map;for(let a=0;a<r.length;a++){const s=r[a],o=n(s);i.has(o)||i.set(o,s)}return Array.from(i.values())}e.uniqBy=t})(Ihe);var RB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(RB);var Ohe={},j3={},Phe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(Phe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Phe;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(j3);var Rhe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Rhe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=j3,r=Rhe;function n(i){return r.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=n})(Ohe);var jhe={},Dhe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=O3;function r(n){return function(i){return t.get(i,n)}}e.property=r})(Dhe);var Mhe={},jB={},Fhe={},DB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(DB);var MB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(MB);var FB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(FB);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DB,r=MB,n=FB;function i(d,f,p){return typeof p!="function"?i(d,f,()=>{}):a(d,f,function m(x,v,b,w,_,C){const N=p(x,v,b,w,_,C);return N!==void 0?!!N:a(x,v,m,C)},new Map)}function a(d,f,p,m){if(f===d)return!0;switch(typeof f){case"object":return s(d,f,p,m);case"function":return Object.keys(f).length>0?a(d,{...f},p,m):n.eq(d,f);default:return t.isObject(d)?typeof f=="string"?f==="":!0:n.eq(d,f)}}function s(d,f,p,m){if(f==null)return!0;if(Array.isArray(f))return l(d,f,p,m);if(f instanceof Map)return o(d,f,p,m);if(f instanceof Set)return c(d,f,p,m);const x=Object.keys(f);if(d==null)return x.length===0;if(x.length===0)return!0;if(m!=null&&m.has(f))return m.get(f)===d;m==null||m.set(f,d);try{for(let v=0;v<x.length;v++){const b=x[v];if(!r.isPrimitive(d)&&!(b in d)||f[b]===void 0&&d[b]!==void 0||f[b]===null&&d[b]!==null||!p(d[b],f[b],b,d,f,m))return!1}return!0}finally{m==null||m.delete(f)}}function o(d,f,p,m){if(f.size===0)return!0;if(!(d instanceof Map))return!1;for(const[x,v]of f.entries()){const b=d.get(x);if(p(b,v,x,d,f,m)===!1)return!1}return!0}function l(d,f,p,m){if(f.length===0)return!0;if(!Array.isArray(d))return!1;const x=new Set;for(let v=0;v<f.length;v++){const b=f[v];let w=!1;for(let _=0;_<d.length;_++){if(x.has(_))continue;const C=d[_];let N=!1;if(p(C,b,v,d,f,m)&&(N=!0),N){x.add(_),w=!0;break}}if(!w)return!1}return!0}function c(d,f,p,m){return f.size===0?!0:d instanceof Set?l([...d],[...f],p,m):!1}e.isMatchWith=i,e.isSetMatch=c})(Fhe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Fhe;function r(n,i){return t.isMatchWith(n,i,()=>{})}e.isMatch=r})(jB);var Lhe={},LB={},Bhe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(Bhe);var BB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(BB);var UB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",o="[object Date]",l="[object Map]",c="[object Set]",d="[object Array]",f="[object Function]",p="[object ArrayBuffer]",m="[object Object]",x="[object Error]",v="[object DataView]",b="[object Uint8Array]",w="[object Uint8ClampedArray]",_="[object Uint16Array]",C="[object Uint32Array]",N="[object BigUint64Array]",R="[object Int8Array]",P="[object Int16Array]",O="[object Int32Array]",D="[object BigInt64Array]",M="[object Float32Array]",B="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=p,e.arrayTag=d,e.bigInt64ArrayTag=D,e.bigUint64ArrayTag=N,e.booleanTag=i,e.dataViewTag=v,e.dateTag=o,e.errorTag=x,e.float32ArrayTag=M,e.float64ArrayTag=B,e.functionTag=f,e.int16ArrayTag=P,e.int32ArrayTag=O,e.int8ArrayTag=R,e.mapTag=l,e.numberTag=n,e.objectTag=m,e.regexpTag=t,e.setTag=c,e.stringTag=r,e.symbolTag=s,e.uint16ArrayTag=_,e.uint32ArrayTag=C,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=w})(UB);var Uhe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Uhe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bhe,r=BB,n=UB,i=MB,a=Uhe;function s(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,p,m=new Map,x=void 0){const v=x==null?void 0:x(d,f,p,m);if(v!==void 0)return v;if(i.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const b=new Array(d.length);m.set(d,b);for(let w=0;w<d.length;w++)b[w]=o(d[w],w,p,m,x);return Object.hasOwn(d,"index")&&(b.index=d.index),Object.hasOwn(d,"input")&&(b.input=d.input),b}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const b=new RegExp(d.source,d.flags);return b.lastIndex=d.lastIndex,b}if(d instanceof Map){const b=new Map;m.set(d,b);for(const[w,_]of d)b.set(w,o(_,w,p,m,x));return b}if(d instanceof Set){const b=new Set;m.set(d,b);for(const w of d)b.add(o(w,void 0,p,m,x));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(a.isTypedArray(d)){const b=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,b);for(let w=0;w<d.length;w++)b[w]=o(d[w],w,p,m,x);return b}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const b=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,b),l(b,d,p,m,x),b}if(typeof File<"u"&&d instanceof File){const b=new File([d],d.name,{type:d.type});return m.set(d,b),l(b,d,p,m,x),b}if(typeof Blob<"u"&&d instanceof Blob){const b=new Blob([d],{type:d.type});return m.set(d,b),l(b,d,p,m,x),b}if(d instanceof Error){const b=new d.constructor;return m.set(d,b),b.message=d.message,b.name=d.name,b.stack=d.stack,b.cause=d.cause,l(b,d,p,m,x),b}if(d instanceof Boolean){const b=new Boolean(d.valueOf());return m.set(d,b),l(b,d,p,m,x),b}if(d instanceof Number){const b=new Number(d.valueOf());return m.set(d,b),l(b,d,p,m,x),b}if(d instanceof String){const b=new String(d.valueOf());return m.set(d,b),l(b,d,p,m,x),b}if(typeof d=="object"&&c(d)){const b=Object.create(Object.getPrototypeOf(d));return m.set(d,b),l(b,d,p,m,x),b}return d}function l(d,f,p=d,m,x){const v=[...Object.keys(f),...t.getSymbols(f)];for(let b=0;b<v.length;b++){const w=v[b],_=Object.getOwnPropertyDescriptor(d,w);(_==null||_.writable)&&(d[w]=o(f[w],w,p,m,x))}}function c(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=s,e.cloneDeepWithImpl=o,e.copyProperties=l})(LB);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LB;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(Lhe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jB,r=Lhe;function n(i){return i=r.cloneDeep(i),a=>t.isMatch(a,i)}e.matches=n})(Mhe);var $he={},zhe={},Hhe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LB,r=UB;function n(i,a){return t.cloneDeepWith(i,(s,o,l,c)=>{const d=a==null?void 0:a(s,o,l,c);if(d!==void 0)return d;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new i.constructor(i==null?void 0:i.valueOf());return t.copyProperties(f,i),f}case r.argumentsTag:{const f={};return t.copyProperties(f,i),f.length=i.length,f[Symbol.iterator]=i[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n})(Hhe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Hhe;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(zhe);var Whe={},$B={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})($B);var Vhe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BB;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(Vhe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OB,r=$B,n=Vhe,i=R3;function a(s,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&t.isDeepKey(o)&&(s==null?void 0:s[o])==null?l=i.toPath(o):l=[o],l.length===0)return!1;let c=s;for(let d=0;d<l.length;d++){const f=l[d];if((c==null||!Object.hasOwn(c,f))&&!((Array.isArray(c)||n.isArguments(c))&&r.isIndex(f)&&f<c.length))return!1;c=c[f]}return!0}e.has=a})(Whe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jB,r=P3,n=zhe,i=O3,a=Whe;function s(o,l){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return l=n.cloneDeep(l),function(c){const d=i.get(c,o);return d===void 0?a.has(c,o):l===void 0?d===void 0:t.isMatch(d,l)}}e.matchesProperty=s})($he);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RB,r=Dhe,n=Mhe,i=$he;function a(s){if(s==null)return t.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):n.matches(s);case"string":case"symbol":case"number":return r.property(s)}}e.iteratee=a})(jhe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ihe,r=RB,n=Ohe,i=jhe;function a(s,o=r.identity){return n.isArrayLikeObject(s)?t.uniqBy(Array.from(s),i.iteratee(o)):[]}e.uniqBy=a})(The);var lrt=The.uniqBy;const GY=Us(lrt);function crt(e,t,r){return t===!0?GY(e,r):typeof t=="function"?GY(e,t):e}var zB=I.createContext(null),urt=e=>e,ya=()=>{var e=I.useContext(zB);return e?e.store.dispatch:urt},ZN=()=>{},drt=()=>ZN,frt=(e,t)=>e===t;function br(e){var t=I.useContext(zB);return lfe.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:drt,t?t.store.getState:ZN,t?t.store.getState:ZN,t?e:ZN,frt)}function hrt(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function prt(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function mrt(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var KY=e=>Array.isArray(e)?e:[e];function grt(e){const t=Array.isArray(e[0])?e[0]:e;return mrt(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function xrt(e,t){const r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var vrt=class{constructor(e){this.value=e}deref(){return this.value}},yrt=typeof WeakRef<"u"?WeakRef:vrt,brt=0,XY=1;function q_(){return{s:brt,v:void 0,o:null,p:null}}function qhe(e,t={}){let r=q_();const{resultEqualityCheck:n}=t;let i,a=0;function s(){var f;let o=r;const{length:l}=arguments;for(let p=0,m=l;p<m;p++){const x=arguments[p];if(typeof x=="function"||typeof x=="object"&&x!==null){let v=o.o;v===null&&(o.o=v=new WeakMap);const b=v.get(x);b===void 0?(o=q_(),v.set(x,o)):o=b}else{let v=o.p;v===null&&(o.p=v=new Map);const b=v.get(x);b===void 0?(o=q_(),v.set(x,o)):o=b}}const c=o;let d;if(o.s===XY)d=o.v;else if(d=e.apply(null,arguments),a++,n){const p=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;p!=null&&n(p,d)&&(d=p,a!==0&&a--),i=typeof d=="object"&&d!==null||typeof d=="function"?new yrt(d):d}return c.s=XY,c.v=d,d}return s.clearCache=()=>{r=q_(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function wrt(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...i)=>{let a=0,s=0,o,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),hrt(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const d={...r,...l},{memoize:f,memoizeOptions:p=[],argsMemoize:m=qhe,argsMemoizeOptions:x=[]}=d,v=KY(p),b=KY(x),w=grt(i),_=f(function(){return a++,c.apply(null,arguments)},...v),C=m(function(){s++;const R=xrt(w,arguments);return o=_.apply(null,R),o},...b);return Object.assign(C,{resultFunc:c,memoizedResultFunc:_,dependencies:w,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:f,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var st=wrt(qhe),Srt=Object.assign((e,t=st)=>{prt(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((s,o,l)=>(s[r[l]]=o,s),{}))},{withTypes:()=>Srt}),Ghe={},Khe={},Xhe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,a)=>{if(n!==i){const s=t(n),o=t(i);if(s===o&&s===0){if(n<i)return a==="desc"?1:-1;if(n>i)return a==="desc"?-1:1}return a==="desc"?o-s:s-o}return 0};e.compareValues=r})(Xhe);var Yhe={},HB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(HB);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HB,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||s!=null&&Object.hasOwn(s,a)}e.isKey=i})(Yhe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xhe,r=Yhe,n=R3;function i(a,s,o,l){if(a==null)return[];o=l?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(m=>String(m));const c=(m,x)=>{let v=m;for(let b=0;b<x.length&&v!=null;++b)v=v[x[b]];return v},d=(m,x)=>x==null||m==null?x:typeof m=="object"&&"key"in m?Object.hasOwn(x,m.key)?x[m.key]:c(x,m.path):typeof m=="function"?m(x):Array.isArray(m)?c(x,m):typeof x=="object"?x[m]:x,f=s.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:n.toPath(m)}));return a.map(m=>({original:m,criteria:f.map(x=>d(x,m))})).slice().sort((m,x)=>{for(let v=0;v<f.length;v++){const b=t.compareValues(m.criteria[v],x.criteria[v],o[v]);if(b!==0)return b}return 0}).map(m=>m.original)}e.orderBy=i})(Khe);var Qhe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const i=[],a=Math.floor(n),s=(o,l)=>{for(let c=0;c<o.length;c++){const d=o[c];Array.isArray(d)&&l<a?s(d,l+1):i.push(d)}};return s(r,0),i}e.flatten=t})(Qhe);var WB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$B,r=j3,n=DB,i=FB;function a(s,o,l){return n.isObject(l)&&(typeof o=="number"&&r.isArrayLike(l)&&t.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?i.eq(l[o],s):!1}e.isIterateeCall=a})(WB);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Khe,r=Qhe,n=WB;function i(a,...s){const o=s.length;return o>1&&n.isIterateeCall(a,s[0],s[1])?s=[]:o>2&&n.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),t.orderBy(a,r.flatten(s),["asc"])}e.sortBy=i})(Ghe);var Ert=Ghe.sortBy;const D3=Us(Ert);var Jhe=e=>e.legend.settings,Crt=e=>e.legend.size,krt=e=>e.legend.payload;st([krt,Jhe],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?D3(n,r):n});var G_=1;function _rt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=I.useState({height:0,left:0,top:0,width:0}),n=I.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-t.height)>G_||Math.abs(s.left-t.left)>G_||Math.abs(s.top-t.top)>G_||Math.abs(s.width-t.width)>G_)&&r({height:s.height,left:s.left,top:s.top,width:s.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Ns(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Nrt=typeof Symbol=="function"&&Symbol.observable||"@@observable",YY=Nrt,VD=()=>Math.random().toString(36).substring(7).split("").join("."),Art={INIT:`@@redux/INIT${VD()}`,REPLACE:`@@redux/REPLACE${VD()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${VD()}`},xI=Art;function VB(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Zhe(e,t,r){if(typeof e!="function")throw new Error(Ns(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ns(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ns(1));return r(Zhe)(e,t)}let n=e,i=t,a=new Map,s=a,o=0,l=!1;function c(){s===a&&(s=new Map,a.forEach((b,w)=>{s.set(w,b)}))}function d(){if(l)throw new Error(Ns(3));return i}function f(b){if(typeof b!="function")throw new Error(Ns(4));if(l)throw new Error(Ns(5));let w=!0;c();const _=o++;return s.set(_,b),function(){if(w){if(l)throw new Error(Ns(6));w=!1,c(),s.delete(_),a=null}}}function p(b){if(!VB(b))throw new Error(Ns(7));if(typeof b.type>"u")throw new Error(Ns(8));if(typeof b.type!="string")throw new Error(Ns(17));if(l)throw new Error(Ns(9));try{l=!0,i=n(i,b)}finally{l=!1}return(a=s).forEach(_=>{_()}),b}function m(b){if(typeof b!="function")throw new Error(Ns(10));n=b,p({type:xI.REPLACE})}function x(){const b=f;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(Ns(11));function _(){const N=w;N.next&&N.next(d())}return _(),{unsubscribe:b(_)}},[YY](){return this}}}return p({type:xI.INIT}),{dispatch:p,subscribe:f,getState:d,replaceReducer:m,[YY]:x}}function Trt(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:xI.INIT})>"u")throw new Error(Ns(12));if(typeof r(void 0,{type:xI.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ns(13))})}function epe(e){const t=Object.keys(e),r={};for(let a=0;a<t.length;a++){const s=t[a];typeof e[s]=="function"&&(r[s]=e[s])}const n=Object.keys(r);let i;try{Trt(r)}catch(a){i=a}return function(s={},o){if(i)throw i;let l=!1;const c={};for(let d=0;d<n.length;d++){const f=n[d],p=r[f],m=s[f],x=p(m,o);if(typeof x>"u")throw o&&o.type,new Error(Ns(14));c[f]=x,l=l||x!==m}return l=l||n.length!==Object.keys(s).length,l?c:s}}function vI(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function Irt(...e){return t=>(r,n)=>{const i=t(r,n);let a=()=>{throw new Error(Ns(15))};const s={getState:i.getState,dispatch:(l,...c)=>a(l,...c)},o=e.map(l=>l(s));return a=vI(...o)(i.dispatch),{...i,dispatch:a}}}function tpe(e){return VB(e)&&"type"in e&&typeof e.type=="string"}var rpe=Symbol.for("immer-nothing"),QY=Symbol.for("immer-draftable"),qo=Symbol.for("immer-state");function Vu(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Zl=Object,Ty=Zl.getPrototypeOf,yI="constructor",M3="prototype",k5="configurable",bI="enumerable",eA="writable",MS="value",zh=e=>!!e&&!!e[qo];function uf(e){var t;return e?npe(e)||F3(e)||!!e[QY]||!!((t=e[yI])!=null&&t[QY])||L3(e)||B3(e):!1}var Ort=Zl[M3][yI].toString(),JY=new WeakMap;function npe(e){if(!e||!qB(e))return!1;const t=Ty(e);if(t===null||t===Zl[M3])return!0;const r=Zl.hasOwnProperty.call(t,yI)&&t[yI];if(r===Object)return!0;if(!K1(r))return!1;let n=JY.get(r);return n===void 0&&(n=Function.toString.call(r),JY.set(r,n)),n===Ort}function vC(e,t,r=!0){yC(e)===0?(r?Reflect.ownKeys(e):Zl.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function yC(e){const t=e[qo];return t?t.type_:F3(e)?1:L3(e)?2:B3(e)?3:0}var ZY=(e,t,r=yC(e))=>r===2?e.has(t):Zl[M3].hasOwnProperty.call(e,t),_5=(e,t,r=yC(e))=>r===2?e.get(t):e[t],wI=(e,t,r,n=yC(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function Prt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var F3=Array.isArray,L3=e=>e instanceof Map,B3=e=>e instanceof Set,qB=e=>typeof e=="object",K1=e=>typeof e=="function",qD=e=>typeof e=="boolean",th=e=>e.copy_||e.base_,GB=e=>e.modified_?e.copy_:e.base_;function N5(e,t){if(L3(e))return new Map(e);if(B3(e))return new Set(e);if(F3(e))return Array[M3].slice.call(e);const r=npe(e);if(t===!0||t==="class_only"&&!r){const n=Zl.getOwnPropertyDescriptors(e);delete n[qo];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const s=i[a],o=n[s];o[eA]===!1&&(o[eA]=!0,o[k5]=!0),(o.get||o.set)&&(n[s]={[k5]:!0,[eA]:!0,[bI]:o[bI],[MS]:e[s]})}return Zl.create(Ty(e),n)}else{const n=Ty(e);if(n!==null&&r)return{...e};const i=Zl.create(n);return Zl.assign(i,e)}}function KB(e,t=!1){return U3(e)||zh(e)||(yC(e)>1&&Zl.defineProperties(e,{set:K_,add:K_,clear:K_,delete:K_}),Zl.freeze(e),t&&vC(e,(r,n)=>{KB(n,!0)},!1)),e}function Rrt(){Vu(2)}var K_={[MS]:Rrt};function U3(e){return e===null||!qB(e)?!0:Zl.isFrozen(e)}var SI="MapSet",A5="Patches",ipe={};function Iy(e){const t=ipe[e];return t||Vu(0,e),t}var jrt=e=>!!ipe[e],FS,ape=()=>FS,Drt=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:jrt(SI)?Iy(SI):void 0});function eQ(e,t){t&&(e.patchPlugin_=Iy(A5),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function T5(e){I5(e),e.drafts_.forEach(Mrt),e.drafts_=null}function I5(e){e===FS&&(FS=e.parent_)}var tQ=e=>FS=Drt(FS,e);function Mrt(e){const t=e[qo];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function rQ(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[qo].modified_&&(T5(t),Vu(4)),uf(e)&&(e=nQ(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(r[qo].base_,e,t)}else e=nQ(t,r);return Frt(t,e,!0),T5(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==rpe?e:void 0}function nQ(e,t){if(U3(t))return t;const r=t[qo];if(!r)return XB(t,e.handledSet_,e);if(!$3(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);lpe(r,e)}return r.copy_}function Frt(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&KB(t,r)}function spe(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var $3=(e,t)=>e.scope_===t,Lrt=[];function ope(e,t,r,n){const i=th(e),a=e.type_;if(n!==void 0&&_5(i,n,a)===t){wI(i,n,r,a);return}if(!e.draftLocations_){const o=e.draftLocations_=new Map;vC(i,(l,c)=>{if(zh(c)){const d=o.get(c)||[];d.push(l),o.set(c,d)}})}const s=e.draftLocations_.get(t)??Lrt;for(const o of s)wI(i,o,r,a)}function Brt(e,t,r){e.callbacks_.push(function(i){var o;const a=t;if(!a||!$3(a,i))return;(o=i.mapSetPlugin_)==null||o.fixSetContents(a);const s=GB(a);ope(e,a.draft_??a,s,r),lpe(a,i)})}function lpe(e,t){var n;if(e.modified_&&!e.finalized_&&(e.type_===3||(((n=e.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:i}=t;if(i){const a=i.getPath(e);a&&i.generatePatches_(e,a,t)}spe(e)}}function Urt(e,t,r){const{scope_:n}=e;if(zh(r)){const i=r[qo];$3(i,n)&&i.callbacks_.push(function(){tA(e);const s=GB(i);ope(e,r,s,t)})}else uf(r)&&e.callbacks_.push(function(){const a=th(e);_5(a,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&XB(_5(e.copy_,t,e.type_),n.handledSet_,n)})}function XB(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||zh(e)||t.has(e)||!uf(e)||U3(e)||(t.add(e),vC(e,(n,i)=>{if(zh(i)){const a=i[qo];if($3(a,r)){const s=GB(a);wI(e,n,s,e.type_),spe(a)}}else uf(i)&&XB(i,t,r)})),e}function $rt(e,t){const r=F3(e),n={type_:r?1:0,scope_:t?t.scope_:ape(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,a=YB;r&&(i=[n],a=LS);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return n.draft_=o,n.revoke_=s,[o,n]}var YB={get(e,t){if(t===qo)return e;const r=th(e);if(!ZY(r,t,e.type_))return zrt(e,r,t);const n=r[t];if(e.finalized_||!uf(n))return n;if(n===GD(e.base_,t)){tA(e);const i=e.type_===1?+t:t,a=P5(e.scope_,n,e,i);return e.copy_[i]=a}return n},has(e,t){return t in th(e)},ownKeys(e){return Reflect.ownKeys(th(e))},set(e,t,r){const n=cpe(th(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=GD(th(e),t),a=i==null?void 0:i[qo];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(Prt(r,i)&&(r!==void 0||ZY(e.base_,t,e.type_)))return!0;tA(e),O5(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),Urt(e,t,r)),!0},deleteProperty(e,t){return tA(e),GD(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),O5(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=th(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[eA]:!0,[k5]:e.type_!==1||t!=="length",[bI]:n[bI],[MS]:r[t]}},defineProperty(){Vu(11)},getPrototypeOf(e){return Ty(e.base_)},setPrototypeOf(){Vu(12)}},LS={};vC(YB,(e,t)=>{LS[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}});LS.deleteProperty=function(e,t){return LS.set.call(this,e,t,void 0)};LS.set=function(e,t,r){return YB.set.call(this,e[0],t,r,e[0])};function GD(e,t){const r=e[qo];return(r?th(r):e)[t]}function zrt(e,t,r){var i;const n=cpe(t,r);return n?MS in n?n[MS]:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function cpe(e,t){if(!(t in e))return;let r=Ty(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Ty(r)}}function O5(e){e.modified_||(e.modified_=!0,e.parent_&&O5(e.parent_))}function tA(e){e.copy_||(e.assigned_=new Map,e.copy_=N5(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Hrt=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,i)=>{if(K1(r)&&!K1(n)){const s=n;n=r;const o=this;return function(c=s,...d){return o.produce(c,f=>n.call(this,f,...d))}}K1(n)||Vu(6),i!==void 0&&!K1(i)&&Vu(7);let a;if(uf(r)){const s=tQ(this),o=P5(s,r,void 0);let l=!0;try{a=n(o),l=!1}finally{l?T5(s):I5(s)}return eQ(s,i),rQ(a,s)}else if(!r||!qB(r)){if(a=n(r),a===void 0&&(a=r),a===rpe&&(a=void 0),this.autoFreeze_&&KB(a,!0),i){const s=[],o=[];Iy(A5).generateReplacementPatches_(r,a,{patches_:s,inversePatches_:o}),i(s,o)}return a}else Vu(1,r)},this.produceWithPatches=(r,n)=>{if(K1(r))return(o,...l)=>this.produceWithPatches(o,c=>r(c,...l));let i,a;return[this.produce(r,n,(o,l)=>{i=o,a=l}),i,a]},qD(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),qD(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),qD(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){uf(t)||Vu(8),zh(t)&&(t=rd(t));const r=tQ(this),n=P5(r,t,void 0);return n[qo].isManual_=!0,I5(r),n}finishDraft(t,r){const n=t&&t[qo];(!n||!n.isManual_)&&Vu(9);const{scope_:i}=n;return eQ(i,r),rQ(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const a=r[n];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}n>-1&&(r=r.slice(n+1));const i=Iy(A5).applyPatches_;return zh(t)?i(t,r):this.produce(t,a=>i(a,r))}};function P5(e,t,r,n){const[i,a]=L3(t)?Iy(SI).proxyMap_(t,r):B3(t)?Iy(SI).proxySet_(t,r):$rt(t,r);return((r==null?void 0:r.scope_)??ape()).drafts_.push(i),a.callbacks_=(r==null?void 0:r.callbacks_)??[],a.key_=n,r&&n!==void 0?Brt(r,a,n):a.callbacks_.push(function(l){var d;(d=l.mapSetPlugin_)==null||d.fixSetContents(a);const{patchPlugin_:c}=l;a.modified_&&c&&c.generatePatches_(a,[],l)}),i}function rd(e){return zh(e)||Vu(10,e),upe(e)}function upe(e){if(!uf(e)||U3(e))return e;const t=e[qo];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=N5(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=N5(e,!0);return vC(r,(i,a)=>{wI(r,i,upe(a))},n),t&&(t.finalized_=!1),r}var Wrt=new Hrt,dpe=Wrt.produce;function fpe(e){return({dispatch:r,getState:n})=>i=>a=>typeof a=="function"?a(r,n,e):i(a)}var Vrt=fpe(),qrt=fpe,Grt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?vI:vI.apply(null,arguments)};function fu(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(ac(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>tpe(n)&&n.type===e,r}var hpe=class t2 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,t2.prototype)}static get[Symbol.species](){return t2}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new t2(...t[0].concat(this)):new t2(...t.concat(this))}};function iQ(e){return uf(e)?dpe(e,()=>{}):e}function X_(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function Krt(e){return typeof e=="boolean"}var Xrt=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=t??{};let s=new hpe;return r&&(Krt(r)?s.push(Vrt):s.push(qrt(r.extraArgument))),s},ppe="RTK_autoBatch",Oi=()=>e=>({payload:e,meta:{[ppe]:!0}}),aQ=e=>t=>{setTimeout(t,e)},mpe=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,a=!1,s=!1;const o=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:aQ(10):e.type==="callback"?e.queueNotification:aQ(e.timeout),c=()=>{s=!1,a&&(a=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>i&&d(),p=n.subscribe(f);return o.add(d),()=>{p(),o.delete(d)}},dispatch(d){var f;try{return i=!((f=d==null?void 0:d.meta)!=null&&f[ppe]),a=!i,a&&(s||(s=!0,l(c))),n.dispatch(d)}finally{i=!0}}})},Yrt=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new hpe(e);return n&&i.push(mpe(typeof n=="object"?n:void 0)),i};function Qrt(e){const t=Xrt(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(VB(r))o=epe(r);else throw new Error(ac(1));let l;typeof n=="function"?l=n(t):l=t();let c=vI;i&&(c=Grt({trace:!1,...typeof i=="object"&&i}));const d=Irt(...l),f=Yrt(d);let p=typeof s=="function"?s(f):f();const m=c(...p);return Zhe(o,a,m)}function gpe(e){const t={},r=[];let n;const i={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(ac(28));if(o in t)throw new Error(ac(29));return t[o]=s,i},addAsyncThunk(a,s){return s.pending&&(t[a.pending.type]=s.pending),s.rejected&&(t[a.rejected.type]=s.rejected),s.fulfilled&&(t[a.fulfilled.type]=s.fulfilled),s.settled&&r.push({matcher:a.settled,reducer:s.settled}),i},addMatcher(a,s){return r.push({matcher:a,reducer:s}),i},addDefaultCase(a){return n=a,i}};return e(i),[t,r,n]}function Jrt(e){return typeof e=="function"}function Zrt(e,t){let[r,n,i]=gpe(t),a;if(Jrt(e))a=()=>iQ(e());else{const o=iQ(e);a=()=>o}function s(o=a(),l){let c=[r[l.type],...n.filter(({matcher:d})=>d(l)).map(({reducer:d})=>d)];return c.filter(d=>!!d).length===0&&(c=[i]),c.reduce((d,f)=>{if(f)if(zh(d)){const m=f(d,l);return m===void 0?d:m}else{if(uf(d))return dpe(d,p=>f(p,l));{const p=f(d,l);if(p===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return d},o)}return s.getInitialState=a,s}var ent="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",tnt=(e=21)=>{let t="",r=e;for(;r--;)t+=ent[Math.random()*64|0];return t},rnt=Symbol.for("rtk-slice-createasyncthunk");function nnt(e,t){return`${e}/${t}`}function int({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[rnt];return function(i){const{name:a,reducerPath:s=a}=i;if(!a)throw new Error(ac(11));const o=(typeof i.reducers=="function"?i.reducers(snt()):i.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(N,R){const P=typeof N=="string"?N:N.type;if(!P)throw new Error(ac(12));if(P in c.sliceCaseReducersByType)throw new Error(ac(13));return c.sliceCaseReducersByType[P]=R,d},addMatcher(N,R){return c.sliceMatchers.push({matcher:N,reducer:R}),d},exposeAction(N,R){return c.actionCreators[N]=R,d},exposeCaseReducer(N,R){return c.sliceCaseReducersByName[N]=R,d}};l.forEach(N=>{const R=o[N],P={reducerName:N,type:nnt(a,N),createNotation:typeof i.reducers=="function"};lnt(R)?unt(P,R,d,t):ont(P,R,d)});function f(){const[N={},R=[],P=void 0]=typeof i.extraReducers=="function"?gpe(i.extraReducers):[i.extraReducers],O={...N,...c.sliceCaseReducersByType};return Zrt(i.initialState,D=>{for(let M in O)D.addCase(M,O[M]);for(let M of c.sliceMatchers)D.addMatcher(M.matcher,M.reducer);for(let M of R)D.addMatcher(M.matcher,M.reducer);P&&D.addDefaultCase(P)})}const p=N=>N,m=new Map,x=new WeakMap;let v;function b(N,R){return v||(v=f()),v(N,R)}function w(){return v||(v=f()),v.getInitialState()}function _(N,R=!1){function P(D){let M=D[N];return typeof M>"u"&&R&&(M=X_(x,P,w)),M}function O(D=p){const M=X_(m,R,()=>new WeakMap);return X_(M,D,()=>{const B={};for(const[U,H]of Object.entries(i.selectors??{}))B[U]=ant(H,D,()=>X_(x,D,w),R);return B})}return{reducerPath:N,getSelectors:O,get selectors(){return O(P)},selectSlice:P}}const C={name:a,reducer:b,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:w,..._(s),injectInto(N,{reducerPath:R,...P}={}){const O=R??s;return N.inject({reducerPath:O,reducer:b},P),{...C,..._(O,!0)}}};return C}}function ant(e,t,r,n){function i(a,...s){let o=t(a);return typeof o>"u"&&n&&(o=r()),e(o,...s)}return i.unwrapped=e,i}var Ol=int();function snt(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function ont({type:e,reducerName:t,createNotation:r},n,i){let a,s;if("reducer"in n){if(r&&!cnt(n))throw new Error(ac(17));a=n.reducer,s=n.prepare}else a=n;i.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,s?fu(e,s):fu(e))}function lnt(e){return e._reducerDefinitionType==="asyncThunk"}function cnt(e){return e._reducerDefinitionType==="reducerWithPrepare"}function unt({type:e,reducerName:t},r,n,i){if(!i)throw new Error(ac(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:l,settled:c,options:d}=r,f=i(e,a,d);n.exposeAction(t,f),s&&n.addCase(f.fulfilled,s),o&&n.addCase(f.pending,o),l&&n.addCase(f.rejected,l),c&&n.addMatcher(f.settled,c),n.exposeCaseReducer(t,{fulfilled:s||Y_,pending:o||Y_,rejected:l||Y_,settled:c||Y_})}function Y_(){}var dnt="task",xpe="listener",vpe="completed",QB="cancelled",fnt=`task-${QB}`,hnt=`task-${vpe}`,R5=`${xpe}-${QB}`,pnt=`${xpe}-${vpe}`,z3=class{constructor(e){AR(this,"name","TaskAbortError");AR(this,"message");this.code=e,this.message=`${dnt} ${QB} (reason: ${e})`}},JB=(e,t)=>{if(typeof e!="function")throw new TypeError(ac(32))},EI=()=>{},ype=(e,t=EI)=>(e.catch(t),e),bpe=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Pg=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Rg=e=>{if(e.aborted){const{reason:t}=e;throw new z3(t)}};function wpe(e,t){let r=EI;return new Promise((n,i)=>{const a=()=>i(new z3(e.reason));if(e.aborted){a();return}r=bpe(e,a),t.finally(()=>r()).then(n,i)}).finally(()=>{r=EI})}var mnt=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof z3?"cancelled":"rejected",error:r}}finally{t==null||t()}},CI=e=>t=>ype(wpe(e,t).then(r=>(Rg(e),r))),Spe=e=>{const t=CI(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Av}=Object,sQ={},H3="listenerMiddleware",gnt=(e,t)=>{const r=n=>bpe(e,()=>Pg(n,e.reason));return(n,i)=>{JB(n);const a=new AbortController;r(a);const s=mnt(async()=>{Rg(e),Rg(a.signal);const o=await n({pause:CI(a.signal),delay:Spe(a.signal),signal:a.signal});return Rg(a.signal),o},()=>Pg(a,hnt));return i!=null&&i.autoJoin&&t.push(s.catch(EI)),{result:CI(e)(s),cancel(){Pg(a,fnt)}}}},xnt=(e,t)=>{const r=async(n,i)=>{Rg(t);let a=()=>{};const o=[new Promise((l,c)=>{let d=e({predicate:n,effect:(f,p)=>{p.unsubscribe(),l([f,p.getState(),p.getOriginalState()])}});a=()=>{d(),c()}})];i!=null&&o.push(new Promise(l=>setTimeout(l,i,null)));try{const l=await wpe(t,Promise.race(o));return Rg(t),l}finally{a()}};return(n,i)=>ype(r(n,i))},Epe=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:a}=e;if(t)i=fu(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(ac(21));return JB(a),{predicate:i,type:t,effect:a}},Cpe=Av(e=>{const{type:t,predicate:r,effect:n}=Epe(e);return{id:tnt(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(ac(22))}}},{withTypes:()=>Cpe}),oQ=(e,t)=>{const{type:r,effect:n,predicate:i}=Epe(t);return Array.from(e.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===i)&&a.effect===n)},j5=e=>{e.pending.forEach(t=>{Pg(t,R5)})},vnt=(e,t)=>()=>{for(const r of t.keys())j5(r);e.clear()},lQ=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},kpe=Av(fu(`${H3}/add`),{withTypes:()=>kpe}),ynt=fu(`${H3}/removeAll`),_pe=Av(fu(`${H3}/remove`),{withTypes:()=>_pe}),bnt=(...e)=>{console.error(`${H3}/error`,...e)},bC=(e={})=>{const t=new Map,r=new Map,n=m=>{const x=r.get(m)??0;r.set(m,x+1)},i=m=>{const x=r.get(m)??1;x===1?r.delete(m):r.set(m,x-1)},{extra:a,onError:s=bnt}=e;JB(s);const o=m=>(m.unsubscribe=()=>t.delete(m.id),t.set(m.id,m),x=>{m.unsubscribe(),x!=null&&x.cancelActive&&j5(m)}),l=m=>{const x=oQ(t,m)??Cpe(m);return o(x)};Av(l,{withTypes:()=>l});const c=m=>{const x=oQ(t,m);return x&&(x.unsubscribe(),m.cancelActive&&j5(x)),!!x};Av(c,{withTypes:()=>c});const d=async(m,x,v,b)=>{const w=new AbortController,_=xnt(l,w.signal),C=[];try{m.pending.add(w),n(m),await Promise.resolve(m.effect(x,Av({},v,{getOriginalState:b,condition:(N,R)=>_(N,R).then(Boolean),take:_,delay:Spe(w.signal),pause:CI(w.signal),extra:a,signal:w.signal,fork:gnt(w.signal,C),unsubscribe:m.unsubscribe,subscribe:()=>{t.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((N,R,P)=>{N!==w&&(Pg(N,R5),P.delete(N))})},cancel:()=>{Pg(w,R5),m.pending.delete(w)},throwIfCancelled:()=>{Rg(w.signal)}})))}catch(N){N instanceof z3||lQ(s,N,{raisedBy:"effect"})}finally{await Promise.all(C),Pg(w,pnt),i(m),m.pending.delete(w)}},f=vnt(t,r);return{middleware:m=>x=>v=>{if(!tpe(v))return x(v);if(kpe.match(v))return l(v.payload);if(ynt.match(v)){f();return}if(_pe.match(v))return c(v.payload);let b=m.getState();const w=()=>{if(b===sQ)throw new Error(ac(23));return b};let _;try{if(_=x(v),t.size>0){const C=m.getState(),N=Array.from(t.values());for(const R of N){let P=!1;try{P=R.predicate(v,C,b)}catch(O){P=!1,lQ(s,O,{raisedBy:"predicate"})}P&&d(R,v,m,w)}}}finally{b=sQ}return _},startListening:l,stopListening:c,clearListeners:f}};function ac(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var wnt={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Npe=Ol({name:"chartLayout",initialState:wnt,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,i,a;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:Snt,setLayout:Ent,setChartSize:Cnt,setScale:knt}=Npe.actions,_nt=Npe.reducer;function Ape(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function cQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function dv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cQ(Object(r),!0).forEach(function(n){Nnt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nnt(e,t,r){return(t=Ant(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ant(e){var t=Tnt(e,"string");return typeof t=="symbol"?t:t+""}function Tnt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ho(e,t,r){return ys(e)||ys(t)?r:cf(t)?Ay(e,t,r):typeof t=="function"?t(e):r}var Int=(e,t,r)=>{if(t&&r){var{width:n,height:i}=r,{align:a,verticalAlign:s,layout:o}=t;if((o==="vertical"||o==="horizontal"&&s==="middle")&&a!=="center"&&ur(e[a]))return dv(dv({},e),{},{[a]:e[a]+(n||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&s!=="middle"&&ur(e[s]))return dv(dv({},e),{},{[s]:e[s]+(i||0)})}return e},Gx=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Tpe=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var i,a,s=e.map(o=>(o.coordinate===t&&(i=!0),o.coordinate===r&&(a=!0),o.coordinate));return i||s.push(t),a||s.push(r),s},Ipe=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:i,range:a,scale:s,realScaleType:o,isCategorical:l,categoricalDomain:c,tickCount:d,ticks:f,niceTicks:p,axisType:m}=e;if(!s)return null;var x=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,v=i==="category"&&s.bandwidth?s.bandwidth()/x:0;if(v=m==="angleAxis"&&a&&a.length>=2?fl(a[0]-a[1])*2*v:v,f||p){var b=(f||p||[]).map((w,_)=>{var C=n?n.indexOf(w):w;return{coordinate:s(C)+v,value:w,offset:v,index:_}});return b.filter(w=>!cd(w.coordinate))}return l&&c?c.map((w,_)=>({coordinate:s(w)+v,value:w,index:_,offset:v})):s.ticks&&d!=null?s.ticks(d).map((w,_)=>({coordinate:s(w)+v,value:w,offset:v,index:_})):s.domain().map((w,_)=>({coordinate:s(w)+v,value:n?n[w]:w,index:_,offset:v}))},uQ=1e-4,Ont=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),i=Math.min(n[0],n[1])-uQ,a=Math.max(n[0],n[1])+uQ,s=e(t[0]),o=e(t[r-1]);(s<i||s>a||o<i||o>a)&&e.domain([t[0],t[r-1]])}},Pnt=(e,t)=>{if(!t||t.length!==2||!ur(t[0])||!ur(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!ur(e[0])||e[0]<r)&&(i[0]=r),(!ur(e[1])||e[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},Rnt=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,a=0,s=0;s<t;++s){var o=cd(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=i,e[s][r][1]=i+o,i=e[s][r][1]):(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1])}},jnt=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,a=0;a<t;++a){var s=cd(e[a][r][1])?e[a][r][0]:e[a][r][1];s>=0?(e[a][r][0]=i,e[a][r][1]=i+s,i=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},Dnt={sign:Rnt,expand:Btt,none:Ny,silhouette:Utt,wiggle:$tt,positive:jnt},Mnt=(e,t,r)=>{var n=Dnt[r],i=Ltt().keys(t).value((a,s)=>Number(ho(a,s,0))).order(E5).offset(n);return i(e)};function Fnt(e){return e==null?void 0:String(e)}var dQ=e=>{var{axis:t,ticks:r,offset:n,bandSize:i,entry:a,index:s}=e;if(t.type==="category")return r[s]?r[s].coordinate+n:null;var o=ho(a,t.dataKey,t.scale.domain()[s]);return ys(o)?null:t.scale(o)-i/2+n},Lnt=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},Bnt=e=>{var t=e.flat(2).filter(ur);return[Math.min(...t),Math.max(...t)]},Unt=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],$nt=(e,t,r)=>{if(e!=null)return Unt(Object.keys(e).reduce((n,i)=>{var a=e[i],{stackedData:s}=a,o=s.reduce((l,c)=>{var d=Ape(c,t,r),f=Bnt(d);return[Math.min(l[0],f[0]),Math.max(l[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},fQ=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,hQ=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,kI=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var i=D3(t,d=>d.coordinate),a=1/0,s=1,o=i.length;s<o;s++){var l=i[s],c=i[s-1];a=Math.min((l.coordinate||0)-(c.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function pQ(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:i,name:a}=e;return dv(dv({},t),{},{dataKey:r,payload:n,value:i,name:a})}function Ope(e,t){if(e)return String(e);if(typeof t=="string")return t}var znt=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},Hnt=(e,t)=>t==="centric"?e.angle:e.radius,ep=e=>e.layout.width,tp=e=>e.layout.height,Wnt=e=>e.layout.scale,Ppe=e=>e.layout.margin,W3=st(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),V3=st(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Vnt="data-recharts-item-index",qnt="data-recharts-item-data-key",wC=60;function mQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Q_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mQ(Object(r),!0).forEach(function(n){Gnt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gnt(e,t,r){return(t=Knt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Knt(e){var t=Xnt(e,"string");return typeof t=="symbol"?t:t+""}function Xnt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ynt=e=>e.brush.height;function Qnt(e){var t=V3(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:wC;return r+i}return r},0)}function Jnt(e){var t=V3(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:wC;return r+i}return r},0)}function Znt(e){var t=W3(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function eit(e){var t=W3(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var ws=st([ep,tp,Ppe,Ynt,Qnt,Jnt,Znt,eit,Jhe,Crt],(e,t,r,n,i,a,s,o,l,c)=>{var d={left:(r.left||0)+i,right:(r.right||0)+a},f={top:(r.top||0)+s,bottom:(r.bottom||0)+o},p=Q_(Q_({},f),d),m=p.bottom;p.bottom+=n,p=Int(p,l,c);var x=e-p.left-p.right,v=t-p.top-p.bottom;return Q_(Q_({brushBottom:m},p),{},{width:Math.max(x,0),height:Math.max(v,0)})}),tit=st(ws,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),ZB=st(ep,tp,(e,t)=>({x:0,y:0,width:e,height:t})),rit=I.createContext(null),Pl=()=>I.useContext(rit)!=null,q3=e=>e.brush,G3=st([q3,ws,Ppe],(e,t,r)=>({height:e.height,x:ur(e.x)?e.x:t.left,y:ur(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:ur(e.width)?e.width:t.width})),Rpe={},jpe={},Dpe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:i,edges:a}={}){let s,o=null;const l=a!=null&&a.includes("leading"),c=a==null||a.includes("trailing"),d=()=>{o!==null&&(r.apply(s,o),s=void 0,o=null)},f=()=>{c&&d(),v()};let p=null;const m=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,f()},n)},x=()=>{p!==null&&(clearTimeout(p),p=null)},v=()=>{x(),s=void 0,o=null},b=()=>{d()},w=function(..._){if(i!=null&&i.aborted)return;s=this,o=_;const C=p==null;m(),l&&C&&d()};return w.schedule=m,w.cancel=v,w.flush=b,i==null||i.addEventListener("abort",v,{once:!0}),w}e.debounce=t})(Dpe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dpe;function r(n,i=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:o=!0,maxWait:l}=a,c=Array(2);s&&(c[0]="leading"),o&&(c[1]="trailing");let d,f=null;const p=t.debounce(function(...v){d=n.apply(this,v),f=null},i,{edges:c}),m=function(...v){return l!=null&&(f===null&&(f=Date.now()),Date.now()-f>=l)?(d=n.apply(this,v),f=Date.now(),p.cancel(),p.schedule(),d):(p.apply(this,v),d)},x=()=>(p.flush(),d);return m.cancel=p.cancel,m.flush=x,m}e.debounce=r})(jpe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jpe;function r(n,i=0,a={}){const{leading:s=!0,trailing:o=!0}=a;return t.debounce(n,i,{leading:s,maxWait:i,trailing:o})}e.throttle=r})(Rpe);var nit=Rpe.throttle;const iit=Us(nit);var _I=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(r.replace(/%s/g,()=>i[s++]))}},Mpe=(e,t,r)=>{var{width:n="100%",height:i="100%",aspect:a,maxHeight:s}=r,o=$h(n)?e:Number(n),l=$h(i)?t:Number(i);return a&&a>0&&(o?l=o/a:l&&(o=l*a),s&&l!=null&&l>s&&(l=s)),{calculatedWidth:o,calculatedHeight:l}},ait={width:0,height:0,overflow:"visible"},sit={width:0,overflowX:"visible"},oit={height:0,overflowY:"visible"},lit={},cit=e=>{var{width:t,height:r}=e,n=$h(t),i=$h(r);return n&&i?ait:n?sit:i?oit:lit};function uit(e){var{width:t,height:r,aspect:n}=e,i=t,a=r;return i===void 0&&a===void 0?(i="100%",a="100%"):i===void 0?i=n&&n>0?void 0:"100%":a===void 0&&(a=n&&n>0?void 0:"100%"),{width:i,height:a}}function xa(e){return Number.isFinite(e)}function df(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function D5(){return D5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D5.apply(null,arguments)}function gQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function xQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gQ(Object(r),!0).forEach(function(n){dit(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dit(e,t,r){return(t=fit(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fit(e){var t=hit(e,"string");return typeof t=="symbol"?t:t+""}function hit(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fpe=I.createContext({width:-1,height:-1});function pit(e){return df(e.width)&&df(e.height)}function Lpe(e){var{children:t,width:r,height:n}=e,i=I.useMemo(()=>({width:r,height:n}),[r,n]);return pit(i)?I.createElement(Fpe.Provider,{value:i},t):null}var eU=()=>I.useContext(Fpe),mit=I.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:i,height:a,minWidth:s=0,minHeight:o,maxHeight:l,children:c,debounce:d=0,id:f,className:p,onResize:m,style:x={}}=e,v=I.useRef(null),b=I.useRef();b.current=m,I.useImperativeHandle(t,()=>v.current);var[w,_]=I.useState({containerWidth:n.width,containerHeight:n.height}),C=I.useCallback((D,M)=>{_(B=>{var U=Math.round(D),H=Math.round(M);return B.containerWidth===U&&B.containerHeight===H?B:{containerWidth:U,containerHeight:H}})},[]);I.useEffect(()=>{if(v.current==null||typeof ResizeObserver>"u")return xC;var D=H=>{var Z,{width:ee,height:V}=H[0].contentRect;C(ee,V),(Z=b.current)===null||Z===void 0||Z.call(b,ee,V)};d>0&&(D=iit(D,d,{trailing:!0,leading:!1}));var M=new ResizeObserver(D),{width:B,height:U}=v.current.getBoundingClientRect();return C(B,U),M.observe(v.current),()=>{M.disconnect()}},[C,d]);var{containerWidth:N,containerHeight:R}=w;_I(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:P,calculatedHeight:O}=Mpe(N,R,{width:i,height:a,aspect:r,maxHeight:l});return _I(P!=null&&P>0||O!=null&&O>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,O,i,a,s,o,r),I.createElement("div",{id:f?"".concat(f):void 0,className:gi("recharts-responsive-container",p),style:xQ(xQ({},x),{},{width:i,height:a,minWidth:s,minHeight:o,maxHeight:l}),ref:v},I.createElement("div",{style:cit({width:i,height:a})},I.createElement(Lpe,{width:P,height:O},c)))}),git=I.forwardRef((e,t)=>{var r=eU();if(df(r.width)&&df(r.height))return e.children;var{width:n,height:i}=uit({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:a,calculatedHeight:s}=Mpe(void 0,void 0,{width:n,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return ur(a)&&ur(s)?I.createElement(Lpe,{width:a,height:s},e.children):I.createElement(mit,D5({},e,{width:n,height:i,ref:t}))});function Bpe(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var K3=()=>{var e,t=Pl(),r=br(tit),n=br(G3),i=(e=br(q3))===null||e===void 0?void 0:e.padding;return!t||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},xit={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Upe=()=>{var e;return(e=br(ws))!==null&&e!==void 0?e:xit},$pe=()=>br(ep),zpe=()=>br(tp),ii=e=>e.layout.layoutType,X3=()=>br(ii),vit=()=>{var e=X3();return e!==void 0},Y3=e=>{var t=ya(),r=Pl(),{width:n,height:i}=e,a=eU(),s=n,o=i;return a&&(s=a.width>0?a.width:n,o=a.height>0?a.height:i),I.useEffect(()=>{!r&&df(s)&&df(o)&&t(Cnt({width:s,height:o}))},[t,r,s,o]),null},Hpe=Symbol.for("immer-nothing"),vQ=Symbol.for("immer-draftable"),cc=Symbol.for("immer-state");function qu(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var BS=Object.getPrototypeOf;function Oy(e){return!!e&&!!e[cc]}function ux(e){var t;return e?Wpe(e)||Array.isArray(e)||!!e[vQ]||!!((t=e.constructor)!=null&&t[vQ])||SC(e)||J3(e):!1}var yit=Object.prototype.constructor.toString(),yQ=new WeakMap;function Wpe(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=yQ.get(r);return n===void 0&&(n=Function.toString.call(r),yQ.set(r,n)),n===yit}function NI(e,t,r=!0){Q3(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function Q3(e){const t=e[cc];return t?t.type_:Array.isArray(e)?1:SC(e)?2:J3(e)?3:0}function M5(e,t){return Q3(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Vpe(e,t,r){const n=Q3(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function bit(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function SC(e){return e instanceof Map}function J3(e){return e instanceof Set}function Bm(e){return e.copy_||e.base_}function F5(e,t){if(SC(e))return new Map(e);if(J3(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Wpe(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[cc];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const s=i[a],o=n[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[s]})}return Object.create(BS(e),n)}else{const n=BS(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function tU(e,t=!1){return Z3(e)||Oy(e)||!ux(e)||(Q3(e)>1&&Object.defineProperties(e,{set:J_,add:J_,clear:J_,delete:J_}),Object.freeze(e),t&&Object.values(e).forEach(r=>tU(r,!0))),e}function wit(){qu(2)}var J_={value:wit};function Z3(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var Sit={};function dx(e){const t=Sit[e];return t||qu(0,e),t}var US;function qpe(){return US}function Eit(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function bQ(e,t){t&&(dx("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function L5(e){B5(e),e.drafts_.forEach(Cit),e.drafts_=null}function B5(e){e===US&&(US=e.parent_)}function wQ(e){return US=Eit(US,e)}function Cit(e){const t=e[cc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function SQ(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[cc].modified_&&(L5(t),qu(4)),ux(e)&&(e=AI(t,e),t.parent_||TI(t,e)),t.patches_&&dx("Patches").generateReplacementPatches_(r[cc].base_,e,t.patches_,t.inversePatches_)):e=AI(t,r,[]),L5(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Hpe?e:void 0}function AI(e,t,r){if(Z3(t))return t;const n=e.immer_.shouldUseStrictIteration(),i=t[cc];if(!i)return NI(t,(a,s)=>EQ(e,i,t,a,s,r),n),t;if(i.scope_!==e)return t;if(!i.modified_)return TI(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,o=!1;i.type_===3&&(s=new Set(a),a.clear(),o=!0),NI(s,(l,c)=>EQ(e,i,a,l,c,r,o),n),TI(e,a,!1),r&&e.patches_&&dx("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function EQ(e,t,r,n,i,a,s){if(i==null||typeof i!="object"&&!s)return;const o=Z3(i);if(!(o&&!s)){if(Oy(i)){const l=a&&t&&t.type_!==3&&!M5(t.assigned_,n)?a.concat(n):void 0,c=AI(e,i,l);if(Vpe(r,n,c),Oy(c))e.canAutoFreeze_=!1;else return}else s&&r.add(i);if(ux(i)&&!o){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===i&&o)return;AI(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(SC(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&TI(e,i)}}}function TI(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&tU(t,r)}function kit(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:qpe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,a=rU;r&&(i=[n],a=$S);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return n.draft_=o,n.revoke_=s,o}var rU={get(e,t){if(t===cc)return e;const r=Bm(e);if(!M5(r,t))return _it(e,r,t);const n=r[t];return e.finalized_||!ux(n)?n:n===KD(e.base_,t)?(XD(e),e.copy_[t]=$5(n,e)):n},has(e,t){return t in Bm(e)},ownKeys(e){return Reflect.ownKeys(Bm(e))},set(e,t,r){const n=Gpe(Bm(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=KD(Bm(e),t),a=i==null?void 0:i[cc];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(bit(r,i)&&(r!==void 0||M5(e.base_,t)))return!0;XD(e),U5(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return KD(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,XD(e),U5(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Bm(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){qu(11)},getPrototypeOf(e){return BS(e.base_)},setPrototypeOf(){qu(12)}},$S={};NI(rU,(e,t)=>{$S[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});$S.deleteProperty=function(e,t){return $S.set.call(this,e,t,void 0)};$S.set=function(e,t,r){return rU.set.call(this,e[0],t,r,e[0])};function KD(e,t){const r=e[cc];return(r?Bm(r):e)[t]}function _it(e,t,r){var i;const n=Gpe(t,r);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function Gpe(e,t){if(!(t in e))return;let r=BS(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=BS(r)}}function U5(e){e.modified_||(e.modified_=!0,e.parent_&&U5(e.parent_))}function XD(e){e.copy_||(e.copy_=F5(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Nit=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const a=r;r=t;const s=this;return function(l=a,...c){return s.produce(l,d=>r.call(this,d,...c))}}typeof r!="function"&&qu(6),n!==void 0&&typeof n!="function"&&qu(7);let i;if(ux(t)){const a=wQ(this),s=$5(t,void 0);let o=!0;try{i=r(s),o=!1}finally{o?L5(a):B5(a)}return bQ(a,n),SQ(i,a)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===Hpe&&(i=void 0),this.autoFreeze_&&tU(i,!0),n){const a=[],s=[];dx("Patches").generateReplacementPatches_(t,i,a,s),n(a,s)}return i}else qu(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(s,...o)=>this.produceWithPatches(s,l=>t(l,...o));let n,i;return[this.produce(t,r,(s,o)=>{n=s,i=o}),n,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ux(e)||qu(8),Oy(e)&&(e=Ait(e));const t=wQ(this),r=$5(e,void 0);return r[cc].isManual_=!0,B5(t),r}finishDraft(e,t){const r=e&&e[cc];(!r||!r.isManual_)&&qu(9);const{scope_:n}=r;return bQ(n,t),SQ(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=dx("Patches").applyPatches_;return Oy(e)?n(e,t):this.produce(e,i=>n(i,t))}};function $5(e,t){const r=SC(e)?dx("MapSet").proxyMap_(e,t):J3(e)?dx("MapSet").proxySet_(e,t):kit(e,t);return(t?t.scope_:qpe()).drafts_.push(r),r}function Ait(e){return Oy(e)||qu(10,e),Kpe(e)}function Kpe(e){if(!ux(e)||Z3(e))return e;const t=e[cc];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=F5(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=F5(e,!0);return NI(r,(i,a)=>{Vpe(r,i,Kpe(a))},n),t&&(t.finalized_=!1),r}var Tit=new Nit;Tit.produce;var Iit={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Xpe=Ol({name:"legend",initialState:Iit,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Oi()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,i=rd(e).payload.indexOf(r);i>-1&&(e.payload[i]=n)},prepare:Oi()},removeLegendPayload:{reducer(e,t){var r=rd(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Oi()}}}),{setLegendSize:GNt,setLegendSettings:KNt,addLegendPayload:Oit,replaceLegendPayload:Pit,removeLegendPayload:Rit}=Xpe.actions,jit=Xpe.reducer;function z5(){return z5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},z5.apply(null,arguments)}function CQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function YD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CQ(Object(r),!0).forEach(function(n){Dit(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dit(e,t,r){return(t=Mit(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mit(e){var t=Fit(e,"string");return typeof t=="symbol"?t:t+""}function Fit(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lit(e){return Array.isArray(e)&&cf(e[0])&&cf(e[1])?e.join(" ~ "):e}var Bit=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:i={},payload:a,formatter:s,itemSorter:o,wrapperClassName:l,labelClassName:c,label:d,labelFormatter:f,accessibilityLayer:p=!1}=e,m=()=>{if(a&&a.length){var R={padding:0,margin:0},P=(o?D3(a,o):a).map((O,D)=>{if(O.type==="none")return null;var M=O.formatter||s||Lit,{value:B,name:U}=O,H=B,Z=U;if(M){var ee=M(B,U,O,D,a);if(Array.isArray(ee))[H,Z]=ee;else if(ee!=null)H=ee;else return null}var V=YD({display:"block",paddingTop:4,paddingBottom:4,color:O.color||"#000"},n);return I.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(D),style:V},cf(Z)?I.createElement("span",{className:"recharts-tooltip-item-name"},Z):null,cf(Z)?I.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,I.createElement("span",{className:"recharts-tooltip-item-value"},H),I.createElement("span",{className:"recharts-tooltip-item-unit"},O.unit||""))});return I.createElement("ul",{className:"recharts-tooltip-item-list",style:R},P)}return null},x=YD({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),v=YD({margin:0},i),b=!ys(d),w=b?d:"",_=gi("recharts-default-tooltip",l),C=gi("recharts-tooltip-label",c);b&&f&&a!==void 0&&a!==null&&(w=f(d,a));var N=p?{role:"status","aria-live":"assertive"}:{};return I.createElement("div",z5({className:_,style:x},N),I.createElement("p",{className:C,style:v},I.isValidElement(w)?w:"".concat(w)),m())},Ow="recharts-tooltip-wrapper",Uit={visibility:"hidden"};function $it(e){var{coordinate:t,translateX:r,translateY:n}=e;return gi(Ow,{["".concat(Ow,"-right")]:ur(r)&&t&&ur(t.x)&&r>=t.x,["".concat(Ow,"-left")]:ur(r)&&t&&ur(t.x)&&r<t.x,["".concat(Ow,"-bottom")]:ur(n)&&t&&ur(t.y)&&n>=t.y,["".concat(Ow,"-top")]:ur(n)&&t&&ur(t.y)&&n<t.y})}function kQ(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:l,viewBoxDimension:c}=e;if(a&&ur(a[n]))return a[n];var d=r[n]-o-(i>0?i:0),f=r[n]+i;if(t[n])return s[n]?d:f;var p=l[n];if(p==null)return 0;if(s[n]){var m=d,x=p;return m<x?Math.max(f,p):Math.max(d,p)}if(c==null)return 0;var v=f+o,b=p+c;return v>b?Math.max(d,p):Math.max(f,p)}function zit(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function Hit(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:i,reverseDirection:a,tooltipBox:s,useTranslate3d:o,viewBox:l}=e,c,d,f;return s.height>0&&s.width>0&&r?(d=kQ({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),f=kQ({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),c=zit({translateX:d,translateY:f,useTranslate3d:o})):c=Uit,{cssProperties:c,cssClasses:$it({translateX:d,translateY:f,coordinate:r})}}function _Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Z_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_Q(Object(r),!0).forEach(function(n){H5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_Q(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function H5(e,t,r){return(t=Wit(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wit(e){var t=Vit(e,"string");return typeof t=="symbol"?t:t+""}function Vit(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class qit extends I.PureComponent{constructor(){super(...arguments),H5(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),H5(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:l,offset:c,position:d,reverseDirection:f,useTranslate3d:p,viewBox:m,wrapperStyle:x,lastBoundingBox:v,innerRef:b,hasPortalFromProps:w}=this.props,{cssClasses:_,cssProperties:C}=Hit({allowEscapeViewBox:r,coordinate:s,offsetTopLeft:c,position:d,reverseDirection:f,tooltipBox:{height:v.height,width:v.width},useTranslate3d:p,viewBox:m}),N=w?{}:Z_(Z_({transition:l&&t?"transform ".concat(n,"ms ").concat(i):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),R=Z_(Z_({},N),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},x);return I.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:_,style:R,ref:b},a)}}var Git=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),xb={devToolsEnabled:!1,isSsr:Git()},Ype=()=>{var e;return(e=br(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function W5(){return W5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W5.apply(null,arguments)}function NQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function AQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NQ(Object(r),!0).forEach(function(n){Kit(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kit(e,t,r){return(t=Xit(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xit(e){var t=Yit(e,"string");return typeof t=="symbol"?t:t+""}function Yit(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TQ={curveBasisClosed:Ntt,curveBasisOpen:Att,curveBasis:_tt,curveBumpX:ftt,curveBumpY:htt,curveLinearClosed:Ttt,curveLinear:T3,curveMonotoneX:Itt,curveMonotoneY:Ott,curveNatural:Ptt,curveStep:Rtt,curveStepAfter:Dtt,curveStepBefore:jtt},II=e=>xa(e.x)&&xa(e.y),IQ=e=>e.base!=null&&II(e.base)&&II(e),Pw=e=>e.x,Rw=e=>e.y,Qit=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(gC(e));return(r==="curveMonotone"||r==="curveBump")&&t?TQ["".concat(r).concat(t==="vertical"?"Y":"X")]:TQ[r]||T3},Jit=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:i,connectNulls:a=!1}=e,s=Qit(t,i),o=a?r.filter(II):r,l;if(Array.isArray(n)){var c=r.map((m,x)=>AQ(AQ({},m),{},{base:n[x]}));i==="vertical"?l=V_().y(Rw).x1(Pw).x0(m=>m.base.x):l=V_().x(Pw).y1(Rw).y0(m=>m.base.y);var d=l.defined(IQ).curve(s),f=a?c.filter(IQ):c;return d(f)}i==="vertical"&&ur(n)?l=V_().y(Rw).x1(Pw).x0(n):ur(n)?l=V_().x(Pw).y1(Rw).y0(n):l=fhe().x(Pw).y(Rw);var p=l.defined(II).curve(s);return p(o)},Qpe=e=>{var{className:t,points:r,path:n,pathRef:i}=e;if((!r||!r.length)&&!n)return null;var a=r&&r.length?Jit(e):n;return I.createElement("path",W5({},Bh(e),rrt(e),{className:gi("recharts-curve",t),d:a===null?void 0:a,ref:i}))},Zit=["x","y","top","left","width","height","className"];function V5(){return V5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V5.apply(null,arguments)}function OQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function eat(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OQ(Object(r),!0).forEach(function(n){tat(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tat(e,t,r){return(t=rat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rat(e){var t=nat(e,"string");return typeof t=="symbol"?t:t+""}function nat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iat(e,t){if(e==null)return{};var r,n,i=aat(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function aat(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var sat=(e,t,r,n,i,a)=>"M".concat(e,",").concat(i,"v").concat(n,"M").concat(a,",").concat(t,"h").concat(r),oat=e=>{var{x:t=0,y:r=0,top:n=0,left:i=0,width:a=0,height:s=0,className:o}=e,l=iat(e,Zit),c=eat({x:t,y:r,top:n,left:i,width:a,height:s},l);return!ur(t)||!ur(r)||!ur(a)||!ur(s)||!ur(n)||!ur(i)?null:I.createElement("path",V5({},du(c),{className:gi("recharts-cross",o),d:sat(t,r,a,s,n,i)}))};function lat(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function PQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function RQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PQ(Object(r),!0).forEach(function(n){cat(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cat(e,t,r){return(t=uat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uat(e){var t=dat(e,"string");return typeof t=="symbol"?t:t+""}function dat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fat=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),Jpe=(e,t,r)=>e.map(n=>"".concat(fat(n)," ").concat(t,"ms ").concat(r)).join(","),hat=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(i=>n.includes(i))),zS=(e,t)=>Object.keys(t).reduce((r,n)=>RQ(RQ({},r),{},{[n]:e(n,t[n])}),{});function jQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ua(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jQ(Object(r),!0).forEach(function(n){pat(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pat(e,t,r){return(t=mat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mat(e){var t=gat(e,"string");return typeof t=="symbol"?t:t+""}function gat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OI=(e,t,r)=>e+(t-e)*r,q5=e=>{var{from:t,to:r}=e;return t!==r},Zpe=(e,t,r)=>{var n=zS((i,a)=>{if(q5(a)){var[s,o]=e(a.from,a.to,a.velocity);return Ua(Ua({},a),{},{from:s,velocity:o})}return a},t);return r<1?zS((i,a)=>q5(a)?Ua(Ua({},a),{},{velocity:OI(a.velocity,n[i].velocity,r),from:OI(a.from,n[i].from,r)}):a,t):Zpe(e,n,r-1)};function xat(e,t,r,n,i,a){var s,o=n.reduce((p,m)=>Ua(Ua({},p),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),l=()=>zS((p,m)=>m.from,o),c=()=>!Object.values(o).filter(q5).length,d=null,f=p=>{s||(s=p);var m=p-s,x=m/r.dt;o=Zpe(r,o,x),i(Ua(Ua(Ua({},e),t),l())),s=p,c()||(d=a.setTimeout(f))};return()=>(d=a.setTimeout(f),()=>{var p;(p=d)===null||p===void 0||p()})}function vat(e,t,r,n,i,a,s){var o=null,l=i.reduce((f,p)=>Ua(Ua({},f),{},{[p]:[e[p],t[p]]}),{}),c,d=f=>{c||(c=f);var p=(f-c)/n,m=zS((v,b)=>OI(...b,r(p)),l);if(a(Ua(Ua(Ua({},e),t),m)),p<1)o=s.setTimeout(d);else{var x=zS((v,b)=>OI(...b,r(1)),l);a(Ua(Ua(Ua({},e),t),x))}};return()=>(o=s.setTimeout(d),()=>{var f;(f=o)===null||f===void 0||f()})}const yat=(e,t,r,n,i,a)=>{var s=hat(e,t);return r==null?()=>(i(Ua(Ua({},e),t)),()=>{}):r.isStepper===!0?xat(e,t,r,s,i,a):vat(e,t,r,n,s,i,a)};var PI=1e-4,e0e=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],t0e=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),DQ=(e,t)=>r=>{var n=e0e(e,t);return t0e(n,r)},bat=(e,t)=>r=>{var n=e0e(e,t),i=[...n.map((a,s)=>a*s).slice(1),0];return t0e(i,r)},wat=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i,a=r[0].split("(");if(a[0]==="cubic-bezier"&&((i=a[1])===null||i===void 0?void 0:i.split(")")[0].split(",").length)===4){var s=a[1].split(")")[0].split(",").map(o=>parseFloat(o));return[s[0],s[1],s[2],s[3]]}}}return r.length===4?r:[0,0,1,1]},Sat=(e,t,r,n)=>{var i=DQ(e,r),a=DQ(t,n),s=bat(e,r),o=c=>c>1?1:c<0?0:c,l=c=>{for(var d=c>1?1:c,f=d,p=0;p<8;++p){var m=i(f)-d,x=s(f);if(Math.abs(m-d)<PI||x<PI)return a(f);f=o(f-m/x)}return a(f)};return l.isStepper=!1,l},MQ=function(){return Sat(...wat(...arguments))},Eat=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=t,a=(s,o,l)=>{var c=-(s-o)*r,d=l*n,f=l+(c-d)*i/1e3,p=l*i/1e3+s;return Math.abs(p-o)<PI&&Math.abs(f)<PI?[o,0]:[p,f]};return a.isStepper=!0,a.dt=i,a},Cat=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return MQ(e);case"spring":return Eat();default:if(e.split("(")[0]==="cubic-bezier")return MQ(e)}return typeof e=="function"?e:null};function kat(e){var t,r=()=>null,n=!1,i=null,a=s=>{if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,[l,...c]=o;if(typeof l=="number"){i=e.setTimeout(a.bind(null,c),l);return}a(l),i=e.setTimeout(a.bind(null,c));return}typeof s=="string"&&(t=s,r(t)),typeof s=="object"&&(t=s,r(t)),typeof s=="function"&&s()}};return{stop:()=>{n=!0},start:s=>{n=!1,i&&(i(),i=null),a(s)},subscribe:s=>(r=s,()=>{r=()=>null}),getTimeoutController:()=>e}}class _at{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,a=s=>{s-n>=r?t(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function Nat(){return kat(new _at)}var Aat=I.createContext(Nat);function Tat(e,t){var r=I.useContext(Aat);return I.useMemo(()=>t??r(e),[e,t,r])}var Iat={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},FQ={t:0},QD={t:1};function nU(e){var t=vc(e,Iat),{isActive:r,canBegin:n,duration:i,easing:a,begin:s,onAnimationEnd:o,onAnimationStart:l,children:c}=t,d=r==="auto"?!xb.isSsr:r,f=Tat(t.animationId,t.animationManager),[p,m]=I.useState(d?FQ:QD),x=I.useRef(null);return I.useEffect(()=>{d||m(QD)},[d]),I.useEffect(()=>{if(!d||!n)return xC;var v=yat(FQ,QD,Cat(a),i,m,f.getTimeoutController()),b=()=>{x.current=v()};return f.start([l,s,b,i,o]),()=>{f.stop(),x.current&&x.current(),o()}},[d,n,i,a,s,l,o,f]),c(p.t)}function iU(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=I.useRef(DS(t)),n=I.useRef(e);return n.current!==e&&(r.current=DS(t),n.current=e),r.current}var Oat=["radius"],Pat=["radius"];function LQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function BQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LQ(Object(r),!0).forEach(function(n){Rat(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rat(e,t,r){return(t=jat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jat(e){var t=Dat(e,"string");return typeof t=="symbol"?t:t+""}function Dat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RI(){return RI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RI.apply(null,arguments)}function UQ(e,t){if(e==null)return{};var r,n,i=Mat(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Mat(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var $Q=(e,t,r,n,i)=>{var a=Math.min(Math.abs(r)/2,Math.abs(n)/2),s=n>=0?1:-1,o=r>=0?1:-1,l=n>=0&&r>=0||n<0&&r<0?1:0,c;if(a>0&&i instanceof Array){for(var d=[0,0,0,0],f=0,p=4;f<p;f++)d[f]=i[f]>a?a:i[f];c="M".concat(e,",").concat(t+s*d[0]),d[0]>0&&(c+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(l,",").concat(e+o*d[0],",").concat(t)),c+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(c+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(l,`,
        `).concat(e+r,",").concat(t+s*d[1])),c+="L ".concat(e+r,",").concat(t+n-s*d[2]),d[2]>0&&(c+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(l,`,
        `).concat(e+r-o*d[2],",").concat(t+n)),c+="L ".concat(e+o*d[3],",").concat(t+n),d[3]>0&&(c+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(l,`,
        `).concat(e,",").concat(t+n-s*d[3])),c+="Z"}else if(a>0&&i===+i&&i>0){var m=Math.min(a,i);c="M ".concat(e,",").concat(t+s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(e+o*m,",").concat(t,`
            L `).concat(e+r-o*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(e+r,",").concat(t+s*m,`
            L `).concat(e+r,",").concat(t+n-s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(e+r-o*m,",").concat(t+n,`
            L `).concat(e+o*m,",").concat(t+n,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(e,",").concat(t+n-s*m," Z")}else c="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return c},zQ={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},r0e=e=>{var t=vc(e,zQ),r=I.useRef(null),[n,i]=I.useState(-1);I.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var se=r.current.getTotalLength();se&&i(se)}catch{}},[]);var{x:a,y:s,width:o,height:l,radius:c,className:d}=t,{animationEasing:f,animationDuration:p,animationBegin:m,isAnimationActive:x,isUpdateAnimationActive:v}=t,b=I.useRef(o),w=I.useRef(l),_=I.useRef(a),C=I.useRef(s),N=I.useMemo(()=>({x:a,y:s,width:o,height:l,radius:c}),[a,s,o,l,c]),R=iU(N,"rectangle-");if(a!==+a||s!==+s||o!==+o||l!==+l||o===0||l===0)return null;var P=gi("recharts-rectangle",d);if(!v){var O=du(t),{radius:D}=O,M=UQ(O,Oat);return I.createElement("path",RI({},M,{radius:typeof c=="number"?c:void 0,className:P,d:$Q(a,s,o,l,c)}))}var B=b.current,U=w.current,H=_.current,Z=C.current,ee="0px ".concat(n===-1?1:n,"px"),V="".concat(n,"px 0px"),te=Jpe(["strokeDasharray"],p,typeof f=="string"?f:zQ.animationEasing);return I.createElement(nU,{animationId:R,key:R,canBegin:n>0,duration:p,easing:f,isActive:v,begin:m},se=>{var Q=Is(B,o,se),X=Is(U,l,se),fe=Is(H,a,se),Se=Is(Z,s,se);r.current&&(b.current=Q,w.current=X,_.current=fe,C.current=Se);var Y;x?se>0?Y={transition:te,strokeDasharray:V}:Y={strokeDasharray:ee}:Y={strokeDasharray:V};var ce=du(t),{radius:W}=ce,G=UQ(ce,Pat);return I.createElement("path",RI({},G,{radius:typeof c=="number"?c:void 0,className:P,d:$Q(fe,Se,Q,X,c),ref:r,style:BQ(BQ({},Y),t.style)}))})};function HQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function WQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HQ(Object(r),!0).forEach(function(n){Fat(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fat(e,t,r){return(t=Lat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lat(e){var t=Bat(e,"string");return typeof t=="symbol"?t:t+""}function Bat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jI=Math.PI/180,Uat=e=>e*180/Math.PI,Ms=(e,t,r,n)=>({x:e+Math.cos(-jI*n)*r,y:t+Math.sin(-jI*n)*r}),$at=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},zat=(e,t)=>{var{x:r,y:n}=e,{x:i,y:a}=t;return Math.sqrt((r-i)**2+(n-a)**2)},Hat=(e,t)=>{var{x:r,y:n}=e,{cx:i,cy:a}=t,s=zat({x:r,y:n},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var o=(r-i)/s,l=Math.acos(o);return n>a&&(l=2*Math.PI-l),{radius:s,angle:Uat(l),angleInRadian:l}},Wat=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),i=Math.floor(r/360),a=Math.min(n,i);return{startAngle:t-a*360,endAngle:r-a*360}},Vat=(e,t)=>{var{startAngle:r,endAngle:n}=t,i=Math.floor(r/360),a=Math.floor(n/360),s=Math.min(i,a);return e+s*360},qat=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:i,angle:a}=Hat({x:r,y:n},t),{innerRadius:s,outerRadius:o}=t;if(i<s||i>o||i===0)return null;var{startAngle:l,endAngle:c}=Wat(t),d=a,f;if(l<=c){for(;d>c;)d-=360;for(;d<l;)d+=360;f=d>=l&&d<=c}else{for(;d>l;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=l}return f?WQ(WQ({},t),{},{radius:i,angle:Vat(d,t)}):null};function n0e(e){var{cx:t,cy:r,radius:n,startAngle:i,endAngle:a}=e,s=Ms(t,r,n,i),o=Ms(t,r,n,a);return{points:[s,o],cx:t,cy:r,radius:n,startAngle:i,endAngle:a}}function G5(){return G5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},G5.apply(null,arguments)}var Gat=(e,t)=>{var r=fl(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},eN=e=>{var{cx:t,cy:r,radius:n,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:l}=e,c=o*(s?1:-1)+n,d=Math.asin(o/c)/jI,f=l?i:i+a*d,p=Ms(t,r,c,f),m=Ms(t,r,n,f),x=l?i-a*d:i,v=Ms(t,r,c*Math.cos(d*jI),x);return{center:p,circleTangency:m,lineTangency:v,theta:d}},i0e=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:a,endAngle:s}=e,o=Gat(a,s),l=a+o,c=Ms(t,r,i,a),d=Ms(t,r,i,l),f="M ".concat(c.x,",").concat(c.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(a>l),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var p=Ms(t,r,n,a),m=Ms(t,r,n,l);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(a<=l),`,
            `).concat(p.x,",").concat(p.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},Kat=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:l,endAngle:c}=e,d=fl(c-l),{circleTangency:f,lineTangency:p,theta:m}=eN({cx:t,cy:r,radius:i,angle:l,sign:d,cornerRadius:a,cornerIsExternal:o}),{circleTangency:x,lineTangency:v,theta:b}=eN({cx:t,cy:r,radius:i,angle:c,sign:-d,cornerRadius:a,cornerIsExternal:o}),w=o?Math.abs(l-c):Math.abs(l-c)-m-b;if(w<0)return s?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):i0e({cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:l,endAngle:c});var _="M ".concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(w>180),",").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
  `);if(n>0){var{circleTangency:C,lineTangency:N,theta:R}=eN({cx:t,cy:r,radius:n,angle:l,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:P,lineTangency:O,theta:D}=eN({cx:t,cy:r,radius:n,angle:c,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),M=o?Math.abs(l-c):Math.abs(l-c)-R-D;if(M<0&&a===0)return"".concat(_,"L").concat(t,",").concat(r,"Z");_+="L".concat(O.x,",").concat(O.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(M>180),",").concat(+(d>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,"Z")}else _+="L".concat(t,",").concat(r,"Z");return _},Xat={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},a0e=e=>{var t=vc(e,Xat),{cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d,className:f}=t;if(a<i||c===d)return null;var p=gi("recharts-sector",f),m=a-i,x=ud(s,m,0,!0),v;return x>0&&Math.abs(c-d)<360?v=Kat({cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:Math.min(x,m/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}):v=i0e({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:c,endAngle:d}),I.createElement("path",G5({},du(t),{className:p,d:v}))};function Yat(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(Ahe(t)){if(e==="centric"){var{cx:n,cy:i,innerRadius:a,outerRadius:s,angle:o}=t,l=Ms(n,i,a,o),c=Ms(n,i,s,o);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return n0e(t)}}var s0e={},o0e={},l0e={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HB;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(l0e);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=l0e;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(o0e);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WB,r=o0e;function n(i,a,s){s&&typeof s!="number"&&t.isIterateeCall(i,a,s)&&(a=s=void 0),i=r.toFinite(i),a===void 0?(a=i,i=0):a=r.toFinite(a),s=s===void 0?i<a?1:-1:r.toFinite(s);const o=Math.max(Math.ceil((a-i)/(s||1)),0),l=new Array(o);for(let c=0;c<o;c++)l[c]=i,i+=s;return l}e.range=n})(s0e);var Qat=s0e.range;const c0e=Us(Qat);function k0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Jat(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function aU(e){let t,r,n;e.length!==2?(t=k0,r=(o,l)=>k0(e(o),l),n=(o,l)=>e(o)-l):(t=e===k0||e===Jat?e:Zat,r=e,n=e);function i(o,l,c=0,d=o.length){if(c<d){if(t(l,l)!==0)return d;do{const f=c+d>>>1;r(o[f],l)<0?c=f+1:d=f}while(c<d)}return c}function a(o,l,c=0,d=o.length){if(c<d){if(t(l,l)!==0)return d;do{const f=c+d>>>1;r(o[f],l)<=0?c=f+1:d=f}while(c<d)}return c}function s(o,l,c=0,d=o.length){const f=i(o,l,c,d-1);return f>c&&n(o[f-1],l)>-n(o[f],l)?f-1:f}return{left:i,center:s,right:a}}function Zat(){return 0}function u0e(e){return e===null?NaN:+e}function*est(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const tst=aU(k0),EC=tst.right;aU(u0e).center;class VQ extends Map{constructor(t,r=ist){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(qQ(this,t))}has(t){return super.has(qQ(this,t))}set(t,r){return super.set(rst(this,t),r)}delete(t){return super.delete(nst(this,t))}}function qQ({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function rst({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function nst({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function ist(e){return e!==null&&typeof e=="object"?e.valueOf():e}function ast(e=k0){if(e===k0)return d0e;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function d0e(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const sst=Math.sqrt(50),ost=Math.sqrt(10),lst=Math.sqrt(2);function DI(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),s=a>=sst?10:a>=ost?5:a>=lst?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/s,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*s,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=r&&r<2?DI(e,t,r*2):[o,l,c]}function K5(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,a,s]=n?DI(t,e,r):DI(e,t,r);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(n)if(s<0)for(let c=0;c<o;++c)l[c]=(a-c)/-s;else for(let c=0;c<o;++c)l[c]=(a-c)*s;else if(s<0)for(let c=0;c<o;++c)l[c]=(i+c)/-s;else for(let c=0;c<o;++c)l[c]=(i+c)*s;return l}function X5(e,t,r){return t=+t,e=+e,r=+r,DI(e,t,r)[2]}function Y5(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?X5(t,e,r):X5(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function GQ(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function KQ(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function f0e(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?d0e:ast(i);n>r;){if(n-r>600){const l=n-r+1,c=t-r+1,d=Math.log(l),f=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*f*(l-f)/l)*(c-l/2<0?-1:1),m=Math.max(r,Math.floor(t-c*f/l+p)),x=Math.min(n,Math.floor(t+(l-c)*f/l+p));f0e(e,t,m,x,i)}const a=e[t];let s=r,o=n;for(jw(e,r,t),i(e[n],a)>0&&jw(e,r,n);s<o;){for(jw(e,s,o),++s,--o;i(e[s],a)<0;)++s;for(;i(e[o],a)>0;)--o}i(e[r],a)===0?jw(e,r,o):(++o,jw(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function jw(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function cst(e,t,r){if(e=Float64Array.from(est(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return KQ(e);if(t>=1)return GQ(e);var n,i=(n-1)*t,a=Math.floor(i),s=GQ(f0e(e,a).subarray(0,a+1)),o=KQ(e.subarray(a+1));return s+(o-s)*(i-a)}}function ust(e,t,r=u0e){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,a=Math.floor(i),s=+r(e[a],a,e),o=+r(e[a+1],a+1,e);return s+(o-s)*(i-a)}}function dst(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(i);++n<i;)a[n]=e+n*r;return a}function yu(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function rp(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Q5=Symbol("implicit");function sU(){var e=new VQ,t=[],r=[],n=Q5;function i(a){let s=e.get(a);if(s===void 0){if(n!==Q5)return n;e.set(a,s=t.push(a)-1)}return r[s%r.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new VQ;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return sU(t,r).unknown(n)},yu.apply(i,arguments),i}function oU(){var e=sU().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,a,s,o=!1,l=0,c=0,d=.5;delete e.unknown;function f(){var p=t().length,m=i<n,x=m?i:n,v=m?n:i;a=(v-x)/Math.max(1,p-l+c*2),o&&(a=Math.floor(a)),x+=(v-x-a*(p-l))*d,s=a*(1-l),o&&(x=Math.round(x),s=Math.round(s));var b=dst(p).map(function(w){return x+a*w});return r(m?b.reverse():b)}return e.domain=function(p){return arguments.length?(t(p),f()):t()},e.range=function(p){return arguments.length?([n,i]=p,n=+n,i=+i,f()):[n,i]},e.rangeRound=function(p){return[n,i]=p,n=+n,i=+i,o=!0,f()},e.bandwidth=function(){return s},e.step=function(){return a},e.round=function(p){return arguments.length?(o=!!p,f()):o},e.padding=function(p){return arguments.length?(l=Math.min(1,c=+p),f()):l},e.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),f()):l},e.paddingOuter=function(p){return arguments.length?(c=+p,f()):c},e.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),f()):d},e.copy=function(){return oU(t(),[n,i]).round(o).paddingInner(l).paddingOuter(c).align(d)},yu.apply(f(),arguments)}function h0e(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return h0e(t())},e}function fst(){return h0e(oU.apply(null,arguments).paddingInner(1))}function lU(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function p0e(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function CC(){}var HS=.7,MI=1/HS,Tv="\\s*([+-]?\\d+)\\s*",WS="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hst=/^#([0-9a-f]{3,8})$/,pst=new RegExp(`^rgb\\(${Tv},${Tv},${Tv}\\)$`),mst=new RegExp(`^rgb\\(${tf},${tf},${tf}\\)$`),gst=new RegExp(`^rgba\\(${Tv},${Tv},${Tv},${WS}\\)$`),xst=new RegExp(`^rgba\\(${tf},${tf},${tf},${WS}\\)$`),vst=new RegExp(`^hsl\\(${WS},${tf},${tf}\\)$`),yst=new RegExp(`^hsla\\(${WS},${tf},${tf},${WS}\\)$`),XQ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};lU(CC,VS,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:YQ,formatHex:YQ,formatHex8:bst,formatHsl:wst,formatRgb:QQ,toString:QQ});function YQ(){return this.rgb().formatHex()}function bst(){return this.rgb().formatHex8()}function wst(){return m0e(this).formatHsl()}function QQ(){return this.rgb().formatRgb()}function VS(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=hst.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?JQ(t):r===3?new hl(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?tN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?tN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=pst.exec(e))?new hl(t[1],t[2],t[3],1):(t=mst.exec(e))?new hl(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=gst.exec(e))?tN(t[1],t[2],t[3],t[4]):(t=xst.exec(e))?tN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=vst.exec(e))?tJ(t[1],t[2]/100,t[3]/100,1):(t=yst.exec(e))?tJ(t[1],t[2]/100,t[3]/100,t[4]):XQ.hasOwnProperty(e)?JQ(XQ[e]):e==="transparent"?new hl(NaN,NaN,NaN,0):null}function JQ(e){return new hl(e>>16&255,e>>8&255,e&255,1)}function tN(e,t,r,n){return n<=0&&(e=t=r=NaN),new hl(e,t,r,n)}function Sst(e){return e instanceof CC||(e=VS(e)),e?(e=e.rgb(),new hl(e.r,e.g,e.b,e.opacity)):new hl}function J5(e,t,r,n){return arguments.length===1?Sst(e):new hl(e,t,r,n??1)}function hl(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}lU(hl,J5,p0e(CC,{brighter(e){return e=e==null?MI:Math.pow(MI,e),new hl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?HS:Math.pow(HS,e),new hl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new hl(jg(this.r),jg(this.g),jg(this.b),FI(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ZQ,formatHex:ZQ,formatHex8:Est,formatRgb:eJ,toString:eJ}));function ZQ(){return`#${og(this.r)}${og(this.g)}${og(this.b)}`}function Est(){return`#${og(this.r)}${og(this.g)}${og(this.b)}${og((isNaN(this.opacity)?1:this.opacity)*255)}`}function eJ(){const e=FI(this.opacity);return`${e===1?"rgb(":"rgba("}${jg(this.r)}, ${jg(this.g)}, ${jg(this.b)}${e===1?")":`, ${e})`}`}function FI(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function jg(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function og(e){return e=jg(e),(e<16?"0":"")+e.toString(16)}function tJ(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Gu(e,t,r,n)}function m0e(e){if(e instanceof Gu)return new Gu(e.h,e.s,e.l,e.opacity);if(e instanceof CC||(e=VS(e)),!e)return new Gu;if(e instanceof Gu)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),s=NaN,o=a-i,l=(a+i)/2;return o?(t===a?s=(r-n)/o+(r<n)*6:r===a?s=(n-t)/o+2:s=(t-r)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new Gu(s,o,l,e.opacity)}function Cst(e,t,r,n){return arguments.length===1?m0e(e):new Gu(e,t,r,n??1)}function Gu(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}lU(Gu,Cst,p0e(CC,{brighter(e){return e=e==null?MI:Math.pow(MI,e),new Gu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?HS:Math.pow(HS,e),new Gu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new hl(JD(e>=240?e-240:e+120,i,n),JD(e,i,n),JD(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Gu(rJ(this.h),rN(this.s),rN(this.l),FI(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=FI(this.opacity);return`${e===1?"hsl(":"hsla("}${rJ(this.h)}, ${rN(this.s)*100}%, ${rN(this.l)*100}%${e===1?")":`, ${e})`}`}}));function rJ(e){return e=(e||0)%360,e<0?e+360:e}function rN(e){return Math.max(0,Math.min(1,e||0))}function JD(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const cU=e=>()=>e;function kst(e,t){return function(r){return e+r*t}}function _st(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Nst(e){return(e=+e)==1?g0e:function(t,r){return r-t?_st(t,r,e):cU(isNaN(t)?r:t)}}function g0e(e,t){var r=t-e;return r?kst(e,r):cU(isNaN(e)?t:e)}const nJ=function e(t){var r=Nst(t);function n(i,a){var s=r((i=J5(i)).r,(a=J5(a)).r),o=r(i.g,a.g),l=r(i.b,a.b),c=g0e(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=o(d),i.b=l(d),i.opacity=c(d),i+""}}return n.gamma=e,n}(1);function Ast(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=e[i]*(1-a)+t[i]*a;return n}}function Tst(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ist(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),a=new Array(r),s;for(s=0;s<n;++s)i[s]=vb(e[s],t[s]);for(;s<r;++s)a[s]=t[s];return function(o){for(s=0;s<n;++s)a[s]=i[s](o);return a}}function Ost(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function LI(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Pst(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=vb(e[i],t[i]):n[i]=t[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var Z5=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ZD=new RegExp(Z5.source,"g");function Rst(e){return function(){return e}}function jst(e){return function(t){return e(t)+""}}function Dst(e,t){var r=Z5.lastIndex=ZD.lastIndex=0,n,i,a,s=-1,o=[],l=[];for(e=e+"",t=t+"";(n=Z5.exec(e))&&(i=ZD.exec(t));)(a=i.index)>r&&(a=t.slice(r,a),o[s]?o[s]+=a:o[++s]=a),(n=n[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:LI(n,i)})),r=ZD.lastIndex;return r<t.length&&(a=t.slice(r),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?jst(l[0].x):Rst(t):(t=l.length,function(c){for(var d=0,f;d<t;++d)o[(f=l[d]).i]=f.x(c);return o.join("")})}function vb(e,t){var r=typeof t,n;return t==null||r==="boolean"?cU(t):(r==="number"?LI:r==="string"?(n=VS(t))?(t=n,nJ):Dst:t instanceof VS?nJ:t instanceof Date?Ost:Tst(t)?Ast:Array.isArray(t)?Ist:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Pst:LI)(e,t)}function uU(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Mst(e,t){t===void 0&&(t=e,e=vb);for(var r=0,n=t.length-1,i=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(i,i=t[++r]);return function(s){var o=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return a[o](s-o)}}function Fst(e){return function(){return e}}function BI(e){return+e}var iJ=[0,1];function Uo(e){return e}function eF(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Fst(isNaN(t)?NaN:.5)}function Lst(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function Bst(e,t,r){var n=e[0],i=e[1],a=t[0],s=t[1];return i<n?(n=eF(i,n),a=r(s,a)):(n=eF(n,i),a=r(a,s)),function(o){return a(n(o))}}function Ust(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),a=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)i[s]=eF(e[s],e[s+1]),a[s]=r(t[s],t[s+1]);return function(o){var l=EC(e,o,1,n)-1;return a[l](i[l](o))}}function kC(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function eP(){var e=iJ,t=iJ,r=vb,n,i,a,s=Uo,o,l,c;function d(){var p=Math.min(e.length,t.length);return s!==Uo&&(s=Lst(e[0],e[p-1])),o=p>2?Ust:Bst,l=c=null,f}function f(p){return p==null||isNaN(p=+p)?a:(l||(l=o(e.map(n),t,r)))(n(s(p)))}return f.invert=function(p){return s(i((c||(c=o(t,e.map(n),LI)))(p)))},f.domain=function(p){return arguments.length?(e=Array.from(p,BI),d()):e.slice()},f.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},f.rangeRound=function(p){return t=Array.from(p),r=uU,d()},f.clamp=function(p){return arguments.length?(s=p?!0:Uo,d()):s!==Uo},f.interpolate=function(p){return arguments.length?(r=p,d()):r},f.unknown=function(p){return arguments.length?(a=p,f):a},function(p,m){return n=p,i=m,d()}}function dU(){return eP()(Uo,Uo)}function $st(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function UI(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Py(e){return e=UI(Math.abs(e)),e?e[1]:NaN}function zst(e,t){return function(r,n){for(var i=r.length,a=[],s=0,o=e[0],l=0;i>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),a.push(r.substring(i-=o,i+o)),!((l+=o+1)>n));)o=e[s=(s+1)%e.length];return a.reverse().join(t)}}function Hst(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Wst=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function qS(e){if(!(t=Wst.exec(e)))throw new Error("invalid format: "+e);var t;return new fU({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}qS.prototype=fU.prototype;function fU(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}fU.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Vst(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var x0e;function qst(e,t){var r=UI(e,t);if(!r)return e+"";var n=r[0],i=r[1],a=i-(x0e=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+UI(e,Math.max(0,t+a-1))[0]}function aJ(e,t){var r=UI(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const sJ={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:$st,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>aJ(e*100,t),r:aJ,s:qst,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function oJ(e){return e}var lJ=Array.prototype.map,cJ=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Gst(e){var t=e.grouping===void 0||e.thousands===void 0?oJ:zst(lJ.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?oJ:Hst(lJ.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(f){f=qS(f);var p=f.fill,m=f.align,x=f.sign,v=f.symbol,b=f.zero,w=f.width,_=f.comma,C=f.precision,N=f.trim,R=f.type;R==="n"?(_=!0,R="g"):sJ[R]||(C===void 0&&(C=12),N=!0,R="g"),(b||p==="0"&&m==="=")&&(b=!0,p="0",m="=");var P=v==="$"?r:v==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",O=v==="$"?n:/[%p]/.test(R)?s:"",D=sJ[R],M=/[defgprs%]/.test(R);C=C===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function B(U){var H=P,Z=O,ee,V,te;if(R==="c")Z=D(U)+Z,U="";else{U=+U;var se=U<0||1/U<0;if(U=isNaN(U)?l:D(Math.abs(U),C),N&&(U=Vst(U)),se&&+U==0&&x!=="+"&&(se=!1),H=(se?x==="("?x:o:x==="-"||x==="("?"":x)+H,Z=(R==="s"?cJ[8+x0e/3]:"")+Z+(se&&x==="("?")":""),M){for(ee=-1,V=U.length;++ee<V;)if(te=U.charCodeAt(ee),48>te||te>57){Z=(te===46?i+U.slice(ee+1):U.slice(ee))+Z,U=U.slice(0,ee);break}}}_&&!b&&(U=t(U,1/0));var Q=H.length+U.length+Z.length,X=Q<w?new Array(w-Q+1).join(p):"";switch(_&&b&&(U=t(X+U,X.length?w-Z.length:1/0),X=""),m){case"<":U=H+U+Z+X;break;case"=":U=H+X+U+Z;break;case"^":U=X.slice(0,Q=X.length>>1)+H+U+Z+X.slice(Q);break;default:U=X+H+U+Z;break}return a(U)}return B.toString=function(){return f+""},B}function d(f,p){var m=c((f=qS(f),f.type="f",f)),x=Math.max(-8,Math.min(8,Math.floor(Py(p)/3)))*3,v=Math.pow(10,-x),b=cJ[8+x/3];return function(w){return m(v*w)+b}}return{format:c,formatPrefix:d}}var nN,hU,v0e;Kst({thousands:",",grouping:[3],currency:["$",""]});function Kst(e){return nN=Gst(e),hU=nN.format,v0e=nN.formatPrefix,nN}function Xst(e){return Math.max(0,-Py(Math.abs(e)))}function Yst(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Py(t)/3)))*3-Py(Math.abs(e)))}function Qst(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Py(t)-Py(e))+1}function y0e(e,t,r,n){var i=Y5(e,t,r),a;switch(n=qS(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=Yst(i,s))&&(n.precision=a),v0e(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=Qst(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=Xst(i))&&(n.precision=a-(n.type==="%")*2);break}}return hU(n)}function rm(e){var t=e.domain;return e.ticks=function(r){var n=t();return K5(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return y0e(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,a=n.length-1,s=n[i],o=n[a],l,c,d=10;for(o<s&&(c=s,s=o,o=c,c=i,i=a,a=c);d-- >0;){if(c=X5(s,o,r),c===l)return n[i]=s,n[a]=o,t(n);if(c>0)s=Math.floor(s/c)*c,o=Math.ceil(o/c)*c;else if(c<0)s=Math.ceil(s*c)/c,o=Math.floor(o*c)/c;else break;l=c}return e},e}function b0e(){var e=dU();return e.copy=function(){return kC(e,b0e())},yu.apply(e,arguments),rm(e)}function w0e(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,BI),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return w0e(e).unknown(t)},e=arguments.length?Array.from(e,BI):[0,1],rm(r)}function S0e(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],a=e[n],s;return a<i&&(s=r,r=n,n=s,s=i,i=a,a=s),e[r]=t.floor(i),e[n]=t.ceil(a),e}function uJ(e){return Math.log(e)}function dJ(e){return Math.exp(e)}function Jst(e){return-Math.log(-e)}function Zst(e){return-Math.exp(-e)}function eot(e){return isFinite(e)?+("1e"+e):e<0?0:e}function tot(e){return e===10?eot:e===Math.E?Math.exp:t=>Math.pow(e,t)}function rot(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function fJ(e){return(t,r)=>-e(-t,r)}function pU(e){const t=e(uJ,dJ),r=t.domain;let n=10,i,a;function s(){return i=rot(n),a=tot(n),r()[0]<0?(i=fJ(i),a=fJ(a),e(Jst,Zst)):e(uJ,dJ),t}return t.base=function(o){return arguments.length?(n=+o,s()):n},t.domain=function(o){return arguments.length?(r(o),s()):r()},t.ticks=o=>{const l=r();let c=l[0],d=l[l.length-1];const f=d<c;f&&([c,d]=[d,c]);let p=i(c),m=i(d),x,v;const b=o==null?10:+o;let w=[];if(!(n%1)&&m-p<b){if(p=Math.floor(p),m=Math.ceil(m),c>0){for(;p<=m;++p)for(x=1;x<n;++x)if(v=p<0?x/a(-p):x*a(p),!(v<c)){if(v>d)break;w.push(v)}}else for(;p<=m;++p)for(x=n-1;x>=1;--x)if(v=p>0?x/a(-p):x*a(p),!(v<c)){if(v>d)break;w.push(v)}w.length*2<b&&(w=K5(c,d,b))}else w=K5(p,m,Math.min(m-p,b)).map(a);return f?w.reverse():w},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=qS(l)).precision==null&&(l.trim=!0),l=hU(l)),o===1/0)return l;const c=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/a(Math.round(i(d)));return f*n<n-.5&&(f*=n),f<=c?l(d):""}},t.nice=()=>r(S0e(r(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),t}function E0e(){const e=pU(eP()).domain([1,10]);return e.copy=()=>kC(e,E0e()).base(e.base()),yu.apply(e,arguments),e}function hJ(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function pJ(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function mU(e){var t=1,r=e(hJ(t),pJ(t));return r.constant=function(n){return arguments.length?e(hJ(t=+n),pJ(t)):t},rm(r)}function C0e(){var e=mU(eP());return e.copy=function(){return kC(e,C0e()).constant(e.constant())},yu.apply(e,arguments)}function mJ(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function not(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function iot(e){return e<0?-e*e:e*e}function gU(e){var t=e(Uo,Uo),r=1;function n(){return r===1?e(Uo,Uo):r===.5?e(not,iot):e(mJ(r),mJ(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},rm(t)}function xU(){var e=gU(eP());return e.copy=function(){return kC(e,xU()).exponent(e.exponent())},yu.apply(e,arguments),e}function aot(){return xU.apply(null,arguments).exponent(.5)}function gJ(e){return Math.sign(e)*e*e}function sot(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function k0e(){var e=dU(),t=[0,1],r=!1,n;function i(a){var s=sot(e(a));return isNaN(s)?n:r?Math.round(s):s}return i.invert=function(a){return e.invert(gJ(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,BI)).map(gJ)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return k0e(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},yu.apply(i,arguments),rm(i)}function _0e(){var e=[],t=[],r=[],n;function i(){var s=0,o=Math.max(1,t.length);for(r=new Array(o-1);++s<o;)r[s-1]=ust(e,s/o);return a}function a(s){return s==null||isNaN(s=+s)?n:t[EC(r,s)]}return a.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(k0),i()},a.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return _0e().domain(e).range(t).unknown(n)},yu.apply(a,arguments)}function N0e(){var e=0,t=1,r=1,n=[.5],i=[0,1],a;function s(l){return l!=null&&l<=l?i[EC(n,l,0,r)]:a}function o(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},s.range=function(l){return arguments.length?(r=(i=Array.from(l)).length-1,o()):i.slice()},s.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[e,n[0]]:c>=r?[n[r-1],t]:[n[c-1],n[c]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return n.slice()},s.copy=function(){return N0e().domain([e,t]).range(i).unknown(a)},yu.apply(rm(s),arguments)}function A0e(){var e=[.5],t=[0,1],r,n=1;function i(a){return a!=null&&a<=a?t[EC(e,a,0,n)]:r}return i.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return A0e().domain(e).range(t).unknown(r)},yu.apply(i,arguments)}const eM=new Date,tM=new Date;function Va(e,t,r,n){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const l=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let c;do l.push(c=new Date(+a)),t(a,o),e(a);while(c<a&&a<s);return l},i.filter=a=>Va(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!a(s););else for(;--o>=0;)for(;t(s,1),!a(s););}),r&&(i.count=(a,s)=>(eM.setTime(+a),tM.setTime(+s),e(eM),e(tM),Math.floor(r(eM,tM))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?s=>n(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const $I=Va(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);$I.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Va(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):$I);$I.range;const fh=1e3,Yc=fh*60,hh=Yc*60,Hh=hh*24,vU=Hh*7,xJ=Hh*30,rM=Hh*365,lg=Va(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*fh)},(e,t)=>(t-e)/fh,e=>e.getUTCSeconds());lg.range;const yU=Va(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*fh)},(e,t)=>{e.setTime(+e+t*Yc)},(e,t)=>(t-e)/Yc,e=>e.getMinutes());yU.range;const bU=Va(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Yc)},(e,t)=>(t-e)/Yc,e=>e.getUTCMinutes());bU.range;const wU=Va(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*fh-e.getMinutes()*Yc)},(e,t)=>{e.setTime(+e+t*hh)},(e,t)=>(t-e)/hh,e=>e.getHours());wU.range;const SU=Va(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*hh)},(e,t)=>(t-e)/hh,e=>e.getUTCHours());SU.range;const _C=Va(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Yc)/Hh,e=>e.getDate()-1);_C.range;const tP=Va(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Hh,e=>e.getUTCDate()-1);tP.range;const T0e=Va(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Hh,e=>Math.floor(e/Hh));T0e.range;function Kx(e){return Va(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Yc)/vU)}const rP=Kx(0),zI=Kx(1),oot=Kx(2),lot=Kx(3),Ry=Kx(4),cot=Kx(5),uot=Kx(6);rP.range;zI.range;oot.range;lot.range;Ry.range;cot.range;uot.range;function Xx(e){return Va(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/vU)}const nP=Xx(0),HI=Xx(1),dot=Xx(2),fot=Xx(3),jy=Xx(4),hot=Xx(5),pot=Xx(6);nP.range;HI.range;dot.range;fot.range;jy.range;hot.range;pot.range;const EU=Va(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());EU.range;const CU=Va(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());CU.range;const Wh=Va(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Wh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Va(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Wh.range;const Vh=Va(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Vh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Va(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Vh.range;function I0e(e,t,r,n,i,a){const s=[[lg,1,fh],[lg,5,5*fh],[lg,15,15*fh],[lg,30,30*fh],[a,1,Yc],[a,5,5*Yc],[a,15,15*Yc],[a,30,30*Yc],[i,1,hh],[i,3,3*hh],[i,6,6*hh],[i,12,12*hh],[n,1,Hh],[n,2,2*Hh],[r,1,vU],[t,1,xJ],[t,3,3*xJ],[e,1,rM]];function o(c,d,f){const p=d<c;p&&([c,d]=[d,c]);const m=f&&typeof f.range=="function"?f:l(c,d,f),x=m?m.range(c,+d+1):[];return p?x.reverse():x}function l(c,d,f){const p=Math.abs(d-c)/f,m=aU(([,,b])=>b).right(s,p);if(m===s.length)return e.every(Y5(c/rM,d/rM,f));if(m===0)return $I.every(Math.max(Y5(c,d,f),1));const[x,v]=s[p/s[m-1][2]<s[m][2]/p?m-1:m];return x.every(v)}return[o,l]}const[mot,got]=I0e(Vh,CU,nP,T0e,SU,bU),[xot,vot]=I0e(Wh,EU,rP,_C,wU,yU);function nM(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function iM(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Dw(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function yot(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,a=e.days,s=e.shortDays,o=e.months,l=e.shortMonths,c=Mw(i),d=Fw(i),f=Mw(a),p=Fw(a),m=Mw(s),x=Fw(s),v=Mw(o),b=Fw(o),w=Mw(l),_=Fw(l),C={a:se,A:Q,b:X,B:fe,c:null,d:EJ,e:EJ,f:zot,g:Jot,G:elt,H:Bot,I:Uot,j:$ot,L:O0e,m:Hot,M:Wot,p:Se,q:Y,Q:_J,s:NJ,S:Vot,u:qot,U:Got,V:Kot,w:Xot,W:Yot,x:null,X:null,y:Qot,Y:Zot,Z:tlt,"%":kJ},N={a:ce,A:W,b:G,B:ie,c:null,d:CJ,e:CJ,f:alt,g:mlt,G:xlt,H:rlt,I:nlt,j:ilt,L:R0e,m:slt,M:olt,p:Ce,q:re,Q:_J,s:NJ,S:llt,u:clt,U:ult,V:dlt,w:flt,W:hlt,x:null,X:null,y:plt,Y:glt,Z:vlt,"%":kJ},R={a:B,A:U,b:H,B:Z,c:ee,d:wJ,e:wJ,f:Dot,g:bJ,G:yJ,H:SJ,I:SJ,j:Oot,L:jot,m:Iot,M:Pot,p:M,q:Tot,Q:Fot,s:Lot,S:Rot,u:Cot,U:kot,V:_ot,w:Eot,W:Not,x:V,X:te,y:bJ,Y:yJ,Z:Aot,"%":Mot};C.x=P(r,C),C.X=P(n,C),C.c=P(t,C),N.x=P(r,N),N.X=P(n,N),N.c=P(t,N);function P(ne,ge){return function(we){var q=[],Ae=-1,Pe=0,He=ne.length,je,$e,Ze;for(we instanceof Date||(we=new Date(+we));++Ae<He;)ne.charCodeAt(Ae)===37&&(q.push(ne.slice(Pe,Ae)),($e=vJ[je=ne.charAt(++Ae)])!=null?je=ne.charAt(++Ae):$e=je==="e"?" ":"0",(Ze=ge[je])&&(je=Ze(we,$e)),q.push(je),Pe=Ae+1);return q.push(ne.slice(Pe,Ae)),q.join("")}}function O(ne,ge){return function(we){var q=Dw(1900,void 0,1),Ae=D(q,ne,we+="",0),Pe,He;if(Ae!=we.length)return null;if("Q"in q)return new Date(q.Q);if("s"in q)return new Date(q.s*1e3+("L"in q?q.L:0));if(ge&&!("Z"in q)&&(q.Z=0),"p"in q&&(q.H=q.H%12+q.p*12),q.m===void 0&&(q.m="q"in q?q.q:0),"V"in q){if(q.V<1||q.V>53)return null;"w"in q||(q.w=1),"Z"in q?(Pe=iM(Dw(q.y,0,1)),He=Pe.getUTCDay(),Pe=He>4||He===0?HI.ceil(Pe):HI(Pe),Pe=tP.offset(Pe,(q.V-1)*7),q.y=Pe.getUTCFullYear(),q.m=Pe.getUTCMonth(),q.d=Pe.getUTCDate()+(q.w+6)%7):(Pe=nM(Dw(q.y,0,1)),He=Pe.getDay(),Pe=He>4||He===0?zI.ceil(Pe):zI(Pe),Pe=_C.offset(Pe,(q.V-1)*7),q.y=Pe.getFullYear(),q.m=Pe.getMonth(),q.d=Pe.getDate()+(q.w+6)%7)}else("W"in q||"U"in q)&&("w"in q||(q.w="u"in q?q.u%7:"W"in q?1:0),He="Z"in q?iM(Dw(q.y,0,1)).getUTCDay():nM(Dw(q.y,0,1)).getDay(),q.m=0,q.d="W"in q?(q.w+6)%7+q.W*7-(He+5)%7:q.w+q.U*7-(He+6)%7);return"Z"in q?(q.H+=q.Z/100|0,q.M+=q.Z%100,iM(q)):nM(q)}}function D(ne,ge,we,q){for(var Ae=0,Pe=ge.length,He=we.length,je,$e;Ae<Pe;){if(q>=He)return-1;if(je=ge.charCodeAt(Ae++),je===37){if(je=ge.charAt(Ae++),$e=R[je in vJ?ge.charAt(Ae++):je],!$e||(q=$e(ne,we,q))<0)return-1}else if(je!=we.charCodeAt(q++))return-1}return q}function M(ne,ge,we){var q=c.exec(ge.slice(we));return q?(ne.p=d.get(q[0].toLowerCase()),we+q[0].length):-1}function B(ne,ge,we){var q=m.exec(ge.slice(we));return q?(ne.w=x.get(q[0].toLowerCase()),we+q[0].length):-1}function U(ne,ge,we){var q=f.exec(ge.slice(we));return q?(ne.w=p.get(q[0].toLowerCase()),we+q[0].length):-1}function H(ne,ge,we){var q=w.exec(ge.slice(we));return q?(ne.m=_.get(q[0].toLowerCase()),we+q[0].length):-1}function Z(ne,ge,we){var q=v.exec(ge.slice(we));return q?(ne.m=b.get(q[0].toLowerCase()),we+q[0].length):-1}function ee(ne,ge,we){return D(ne,t,ge,we)}function V(ne,ge,we){return D(ne,r,ge,we)}function te(ne,ge,we){return D(ne,n,ge,we)}function se(ne){return s[ne.getDay()]}function Q(ne){return a[ne.getDay()]}function X(ne){return l[ne.getMonth()]}function fe(ne){return o[ne.getMonth()]}function Se(ne){return i[+(ne.getHours()>=12)]}function Y(ne){return 1+~~(ne.getMonth()/3)}function ce(ne){return s[ne.getUTCDay()]}function W(ne){return a[ne.getUTCDay()]}function G(ne){return l[ne.getUTCMonth()]}function ie(ne){return o[ne.getUTCMonth()]}function Ce(ne){return i[+(ne.getUTCHours()>=12)]}function re(ne){return 1+~~(ne.getUTCMonth()/3)}return{format:function(ne){var ge=P(ne+="",C);return ge.toString=function(){return ne},ge},parse:function(ne){var ge=O(ne+="",!1);return ge.toString=function(){return ne},ge},utcFormat:function(ne){var ge=P(ne+="",N);return ge.toString=function(){return ne},ge},utcParse:function(ne){var ge=O(ne+="",!0);return ge.toString=function(){return ne},ge}}}var vJ={"-":"",_:" ",0:"0"},Ss=/^\s*\d+/,bot=/^%/,wot=/[\\^$*+?|[\]().{}]/g;function Bn(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(t)+i:i)}function Sot(e){return e.replace(wot,"\\$&")}function Mw(e){return new RegExp("^(?:"+e.map(Sot).join("|")+")","i")}function Fw(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function Eot(e,t,r){var n=Ss.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function Cot(e,t,r){var n=Ss.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function kot(e,t,r){var n=Ss.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function _ot(e,t,r){var n=Ss.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function Not(e,t,r){var n=Ss.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function yJ(e,t,r){var n=Ss.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function bJ(e,t,r){var n=Ss.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Aot(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Tot(e,t,r){var n=Ss.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function Iot(e,t,r){var n=Ss.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function wJ(e,t,r){var n=Ss.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Oot(e,t,r){var n=Ss.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function SJ(e,t,r){var n=Ss.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Pot(e,t,r){var n=Ss.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Rot(e,t,r){var n=Ss.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function jot(e,t,r){var n=Ss.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Dot(e,t,r){var n=Ss.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Mot(e,t,r){var n=bot.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Fot(e,t,r){var n=Ss.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Lot(e,t,r){var n=Ss.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function EJ(e,t){return Bn(e.getDate(),t,2)}function Bot(e,t){return Bn(e.getHours(),t,2)}function Uot(e,t){return Bn(e.getHours()%12||12,t,2)}function $ot(e,t){return Bn(1+_C.count(Wh(e),e),t,3)}function O0e(e,t){return Bn(e.getMilliseconds(),t,3)}function zot(e,t){return O0e(e,t)+"000"}function Hot(e,t){return Bn(e.getMonth()+1,t,2)}function Wot(e,t){return Bn(e.getMinutes(),t,2)}function Vot(e,t){return Bn(e.getSeconds(),t,2)}function qot(e){var t=e.getDay();return t===0?7:t}function Got(e,t){return Bn(rP.count(Wh(e)-1,e),t,2)}function P0e(e){var t=e.getDay();return t>=4||t===0?Ry(e):Ry.ceil(e)}function Kot(e,t){return e=P0e(e),Bn(Ry.count(Wh(e),e)+(Wh(e).getDay()===4),t,2)}function Xot(e){return e.getDay()}function Yot(e,t){return Bn(zI.count(Wh(e)-1,e),t,2)}function Qot(e,t){return Bn(e.getFullYear()%100,t,2)}function Jot(e,t){return e=P0e(e),Bn(e.getFullYear()%100,t,2)}function Zot(e,t){return Bn(e.getFullYear()%1e4,t,4)}function elt(e,t){var r=e.getDay();return e=r>=4||r===0?Ry(e):Ry.ceil(e),Bn(e.getFullYear()%1e4,t,4)}function tlt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Bn(t/60|0,"0",2)+Bn(t%60,"0",2)}function CJ(e,t){return Bn(e.getUTCDate(),t,2)}function rlt(e,t){return Bn(e.getUTCHours(),t,2)}function nlt(e,t){return Bn(e.getUTCHours()%12||12,t,2)}function ilt(e,t){return Bn(1+tP.count(Vh(e),e),t,3)}function R0e(e,t){return Bn(e.getUTCMilliseconds(),t,3)}function alt(e,t){return R0e(e,t)+"000"}function slt(e,t){return Bn(e.getUTCMonth()+1,t,2)}function olt(e,t){return Bn(e.getUTCMinutes(),t,2)}function llt(e,t){return Bn(e.getUTCSeconds(),t,2)}function clt(e){var t=e.getUTCDay();return t===0?7:t}function ult(e,t){return Bn(nP.count(Vh(e)-1,e),t,2)}function j0e(e){var t=e.getUTCDay();return t>=4||t===0?jy(e):jy.ceil(e)}function dlt(e,t){return e=j0e(e),Bn(jy.count(Vh(e),e)+(Vh(e).getUTCDay()===4),t,2)}function flt(e){return e.getUTCDay()}function hlt(e,t){return Bn(HI.count(Vh(e)-1,e),t,2)}function plt(e,t){return Bn(e.getUTCFullYear()%100,t,2)}function mlt(e,t){return e=j0e(e),Bn(e.getUTCFullYear()%100,t,2)}function glt(e,t){return Bn(e.getUTCFullYear()%1e4,t,4)}function xlt(e,t){var r=e.getUTCDay();return e=r>=4||r===0?jy(e):jy.ceil(e),Bn(e.getUTCFullYear()%1e4,t,4)}function vlt(){return"+0000"}function kJ(){return"%"}function _J(e){return+e}function NJ(e){return Math.floor(+e/1e3)}var D1,D0e,M0e;ylt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ylt(e){return D1=yot(e),D0e=D1.format,D1.parse,M0e=D1.utcFormat,D1.utcParse,D1}function blt(e){return new Date(e)}function wlt(e){return e instanceof Date?+e:+new Date(+e)}function kU(e,t,r,n,i,a,s,o,l,c){var d=dU(),f=d.invert,p=d.domain,m=c(".%L"),x=c(":%S"),v=c("%I:%M"),b=c("%I %p"),w=c("%a %d"),_=c("%b %d"),C=c("%B"),N=c("%Y");function R(P){return(l(P)<P?m:o(P)<P?x:s(P)<P?v:a(P)<P?b:n(P)<P?i(P)<P?w:_:r(P)<P?C:N)(P)}return d.invert=function(P){return new Date(f(P))},d.domain=function(P){return arguments.length?p(Array.from(P,wlt)):p().map(blt)},d.ticks=function(P){var O=p();return e(O[0],O[O.length-1],P??10)},d.tickFormat=function(P,O){return O==null?R:c(O)},d.nice=function(P){var O=p();return(!P||typeof P.range!="function")&&(P=t(O[0],O[O.length-1],P??10)),P?p(S0e(O,P)):d},d.copy=function(){return kC(d,kU(e,t,r,n,i,a,s,o,l,c))},d}function Slt(){return yu.apply(kU(xot,vot,Wh,EU,rP,_C,wU,yU,lg,D0e).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Elt(){return yu.apply(kU(mot,got,Vh,CU,nP,tP,SU,bU,lg,M0e).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function iP(){var e=0,t=1,r,n,i,a,s=Uo,o=!1,l;function c(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(a(f)-r)*i,o?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([e,t]=f,r=a(e=+e),n=a(t=+t),i=r===n?0:1/(n-r),c):[e,t]},c.clamp=function(f){return arguments.length?(o=!!f,c):o},c.interpolator=function(f){return arguments.length?(s=f,c):s};function d(f){return function(p){var m,x;return arguments.length?([m,x]=p,s=f(m,x),c):[s(0),s(1)]}}return c.range=d(vb),c.rangeRound=d(uU),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return a=f,r=f(e),n=f(t),i=r===n?0:1/(n-r),c}}function nm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function F0e(){var e=rm(iP()(Uo));return e.copy=function(){return nm(e,F0e())},rp.apply(e,arguments)}function L0e(){var e=pU(iP()).domain([1,10]);return e.copy=function(){return nm(e,L0e()).base(e.base())},rp.apply(e,arguments)}function B0e(){var e=mU(iP());return e.copy=function(){return nm(e,B0e()).constant(e.constant())},rp.apply(e,arguments)}function _U(){var e=gU(iP());return e.copy=function(){return nm(e,_U()).exponent(e.exponent())},rp.apply(e,arguments)}function Clt(){return _U.apply(null,arguments).exponent(.5)}function U0e(){var e=[],t=Uo;function r(n){if(n!=null&&!isNaN(n=+n))return t((EC(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(k0),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>cst(e,a/n))},r.copy=function(){return U0e(t).domain(e)},rp.apply(r,arguments)}function aP(){var e=0,t=.5,r=1,n=1,i,a,s,o,l,c=Uo,d,f=!1,p;function m(v){return isNaN(v=+v)?p:(v=.5+((v=+d(v))-a)*(n*v<n*a?o:l),c(f?Math.max(0,Math.min(1,v)):v))}m.domain=function(v){return arguments.length?([e,t,r]=v,i=d(e=+e),a=d(t=+t),s=d(r=+r),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),n=a<i?-1:1,m):[e,t,r]},m.clamp=function(v){return arguments.length?(f=!!v,m):f},m.interpolator=function(v){return arguments.length?(c=v,m):c};function x(v){return function(b){var w,_,C;return arguments.length?([w,_,C]=b,c=Mst(v,[w,_,C]),m):[c(0),c(.5),c(1)]}}return m.range=x(vb),m.rangeRound=x(uU),m.unknown=function(v){return arguments.length?(p=v,m):p},function(v){return d=v,i=v(e),a=v(t),s=v(r),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),n=a<i?-1:1,m}}function $0e(){var e=rm(aP()(Uo));return e.copy=function(){return nm(e,$0e())},rp.apply(e,arguments)}function z0e(){var e=pU(aP()).domain([.1,1,10]);return e.copy=function(){return nm(e,z0e()).base(e.base())},rp.apply(e,arguments)}function H0e(){var e=mU(aP());return e.copy=function(){return nm(e,H0e()).constant(e.constant())},rp.apply(e,arguments)}function NU(){var e=gU(aP());return e.copy=function(){return nm(e,NU()).exponent(e.exponent())},rp.apply(e,arguments)}function klt(){return NU.apply(null,arguments).exponent(.5)}const r2=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:oU,scaleDiverging:$0e,scaleDivergingLog:z0e,scaleDivergingPow:NU,scaleDivergingSqrt:klt,scaleDivergingSymlog:H0e,scaleIdentity:w0e,scaleImplicit:Q5,scaleLinear:b0e,scaleLog:E0e,scaleOrdinal:sU,scalePoint:fst,scalePow:xU,scaleQuantile:_0e,scaleQuantize:N0e,scaleRadial:k0e,scaleSequential:F0e,scaleSequentialLog:L0e,scaleSequentialPow:_U,scaleSequentialQuantile:U0e,scaleSequentialSqrt:Clt,scaleSequentialSymlog:B0e,scaleSqrt:aot,scaleSymlog:C0e,scaleThreshold:A0e,scaleTime:Slt,scaleUtc:Elt,tickFormat:y0e},Symbol.toStringTag,{value:"Module"}));var im=e=>e.chartData,_lt=st([im],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),AU=(e,t,r,n)=>n?_lt(e):im(e);function M0(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(xa(t)&&xa(r))return!0}return!1}function AJ(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function W0e(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,i,a;if(xa(r))i=r;else if(typeof r=="function")return;if(xa(n))a=n;else if(typeof n=="function")return;var s=[i,a];if(M0(s))return s}}function Nlt(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(M0(n))return AJ(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[i,a]=e,s,o;if(i==="auto")t!=null&&(s=Math.min(...t));else if(ur(i))s=i;else if(typeof i=="function")try{t!=null&&(s=i(t==null?void 0:t[0]))}catch{}else if(typeof i=="string"&&fQ.test(i)){var l=fQ.exec(i);if(l==null||t==null)s=void 0;else{var c=+l[1];s=t[0]-c}}else s=t==null?void 0:t[0];if(a==="auto")t!=null&&(o=Math.max(...t));else if(ur(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t==null?void 0:t[1]))}catch{}else if(typeof a=="string"&&hQ.test(a)){var d=hQ.exec(a);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t==null?void 0:t[1];var p=[s,o];if(M0(p))return t==null?p:AJ(p,t,r)}}}var yb=1e9,Alt={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},IU,Di=!0,hu="[DecimalError] ",Dg=hu+"Invalid argument: ",TU=hu+"Exponent out of range: ",bb=Math.floor,Um=Math.pow,Tlt=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Kl,as=1e7,wi=7,V0e=9007199254740991,WI=bb(V0e/wi),Qt={};Qt.absoluteValue=Qt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Qt.comparedTo=Qt.cmp=function(e){var t,r,n,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(n=a.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};Qt.decimalPlaces=Qt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*wi;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Qt.dividedBy=Qt.div=function(e){return Ch(this,new this.constructor(e))};Qt.dividedToIntegerBy=Qt.idiv=function(e){var t=this,r=t.constructor;return ui(Ch(t,new r(e),0,1),r.precision)};Qt.equals=Qt.eq=function(e){return!this.cmp(e)};Qt.exponent=function(){return Oa(this)};Qt.greaterThan=Qt.gt=function(e){return this.cmp(e)>0};Qt.greaterThanOrEqualTo=Qt.gte=function(e){return this.cmp(e)>=0};Qt.isInteger=Qt.isint=function(){return this.e>this.d.length-2};Qt.isNegative=Qt.isneg=function(){return this.s<0};Qt.isPositive=Qt.ispos=function(){return this.s>0};Qt.isZero=function(){return this.s===0};Qt.lessThan=Qt.lt=function(e){return this.cmp(e)<0};Qt.lessThanOrEqualTo=Qt.lte=function(e){return this.cmp(e)<1};Qt.logarithm=Qt.log=function(e){var t,r=this,n=r.constructor,i=n.precision,a=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Kl))throw Error(hu+"NaN");if(r.s<1)throw Error(hu+(r.s?"NaN":"-Infinity"));return r.eq(Kl)?new n(0):(Di=!1,t=Ch(GS(r,a),GS(e,a),a),Di=!0,ui(t,i))};Qt.minus=Qt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?K0e(t,e):q0e(t,(e.s=-e.s,e))};Qt.modulo=Qt.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(hu+"NaN");return r.s?(Di=!1,t=Ch(r,e,0,1).times(e),Di=!0,r.minus(t)):ui(new n(r),i)};Qt.naturalExponential=Qt.exp=function(){return G0e(this)};Qt.naturalLogarithm=Qt.ln=function(){return GS(this)};Qt.negated=Qt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Qt.plus=Qt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?q0e(t,e):K0e(t,(e.s=-e.s,e))};Qt.precision=Qt.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Dg+e);if(t=Oa(i)+1,n=i.d.length-1,r=n*wi+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Qt.squareRoot=Qt.sqrt=function(){var e,t,r,n,i,a,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(hu+"NaN")}for(e=Oa(o),Di=!1,i=Math.sqrt(+o),i==0||i==1/0?(t=Gd(o.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=bb((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(i.toString()),r=l.precision,i=s=r+3;;)if(a=n,n=a.plus(Ch(o,a,s+2)).times(.5),Gd(a.d).slice(0,s)===(t=Gd(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),i==s&&t=="4999"){if(ui(a,r+1,0),a.times(a).eq(o)){n=a;break}}else if(t!="9999")break;s+=4}return Di=!0,ui(n,r)};Qt.times=Qt.mul=function(e){var t,r,n,i,a,s,o,l,c,d=this,f=d.constructor,p=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,l=p.length,c=m.length,l<c&&(a=p,p=m,m=a,s=l,l=c,c=s),a=[],s=l+c,n=s;n--;)a.push(0);for(n=c;--n>=0;){for(t=0,i=l+n;i>n;)o=a[i]+m[n]*p[i-n-1]+t,a[i--]=o%as|0,t=o/as|0;a[i]=(a[i]+t)%as|0}for(;!a[--s];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,Di?ui(e,f.precision):e};Qt.toDecimalPlaces=Qt.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(ff(e,0,yb),t===void 0?t=n.rounding:ff(t,0,8),ui(r,e+Oa(r)+1,t))};Qt.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=fx(n,!0):(ff(e,0,yb),t===void 0?t=i.rounding:ff(t,0,8),n=ui(new i(n),e+1,t),r=fx(n,!0,e+1)),r};Qt.toFixed=function(e,t){var r,n,i=this,a=i.constructor;return e===void 0?fx(i):(ff(e,0,yb),t===void 0?t=a.rounding:ff(t,0,8),n=ui(new a(i),e+Oa(i)+1,t),r=fx(n.abs(),!1,e+Oa(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Qt.toInteger=Qt.toint=function(){var e=this,t=e.constructor;return ui(new t(e),Oa(e)+1,t.rounding)};Qt.toNumber=function(){return+this};Qt.toPower=Qt.pow=function(e){var t,r,n,i,a,s,o=this,l=o.constructor,c=12,d=+(e=new l(e));if(!e.s)return new l(Kl);if(o=new l(o),!o.s){if(e.s<1)throw Error(hu+"Infinity");return o}if(o.eq(Kl))return o;if(n=l.precision,e.eq(Kl))return ui(o,n);if(t=e.e,r=e.d.length-1,s=t>=r,a=o.s,s){if((r=d<0?-d:d)<=V0e){for(i=new l(Kl),t=Math.ceil(n/wi+4),Di=!1;r%2&&(i=i.times(o),IJ(i.d,t)),r=bb(r/2),r!==0;)o=o.times(o),IJ(o.d,t);return Di=!0,e.s<0?new l(Kl).div(i):ui(i,n)}}else if(a<0)throw Error(hu+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,Di=!1,i=e.times(GS(o,n+c)),Di=!0,i=G0e(i),i.s=a,i};Qt.toPrecision=function(e,t){var r,n,i=this,a=i.constructor;return e===void 0?(r=Oa(i),n=fx(i,r<=a.toExpNeg||r>=a.toExpPos)):(ff(e,1,yb),t===void 0?t=a.rounding:ff(t,0,8),i=ui(new a(i),e,t),r=Oa(i),n=fx(i,e<=r||r<=a.toExpNeg,e)),n};Qt.toSignificantDigits=Qt.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(ff(e,1,yb),t===void 0?t=n.rounding:ff(t,0,8)),ui(new n(r),e,t)};Qt.toString=Qt.valueOf=Qt.val=Qt.toJSON=Qt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Oa(e),r=e.constructor;return fx(e,t<=r.toExpNeg||t>=r.toExpPos)};function q0e(e,t){var r,n,i,a,s,o,l,c,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Di?ui(t,f):t;if(l=e.d,c=t.d,s=e.e,i=t.e,l=l.slice(),a=s-i,a){for(a<0?(n=l,a=-a,o=c.length):(n=c,i=s,o=l.length),s=Math.ceil(f/wi),o=s>o?s+1:o+1,a>o&&(a=o,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(o=l.length,a=c.length,o-a<0&&(a=o,n=c,c=l,l=n),r=0;a;)r=(l[--a]=l[a]+c[a]+r)/as|0,l[a]%=as;for(r&&(l.unshift(r),++i),o=l.length;l[--o]==0;)l.pop();return t.d=l,t.e=i,Di?ui(t,f):t}function ff(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Dg+e)}function Gd(e){var t,r,n,i=e.length-1,a="",s=e[0];if(i>0){for(a+=s,t=1;t<i;t++)n=e[t]+"",r=wi-n.length,r&&(a+=$p(r)),a+=n;s=e[t],n=s+"",r=wi-n.length,r&&(a+=$p(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var Ch=function(){function e(n,i){var a,s=0,o=n.length;for(n=n.slice();o--;)a=n[o]*i+s,n[o]=a%as|0,s=a/as|0;return s&&n.unshift(s),n}function t(n,i,a,s){var o,l;if(a!=s)l=a>s?1:-1;else for(o=l=0;o<a;o++)if(n[o]!=i[o]){l=n[o]>i[o]?1:-1;break}return l}function r(n,i,a){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*as+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s){var o,l,c,d,f,p,m,x,v,b,w,_,C,N,R,P,O,D,M=n.constructor,B=n.s==i.s?1:-1,U=n.d,H=i.d;if(!n.s)return new M(n);if(!i.s)throw Error(hu+"Division by zero");for(l=n.e-i.e,O=H.length,R=U.length,m=new M(B),x=m.d=[],c=0;H[c]==(U[c]||0);)++c;if(H[c]>(U[c]||0)&&--l,a==null?_=a=M.precision:s?_=a+(Oa(n)-Oa(i))+1:_=a,_<0)return new M(0);if(_=_/wi+2|0,c=0,O==1)for(d=0,H=H[0],_++;(c<R||d)&&_--;c++)C=d*as+(U[c]||0),x[c]=C/H|0,d=C%H|0;else{for(d=as/(H[0]+1)|0,d>1&&(H=e(H,d),U=e(U,d),O=H.length,R=U.length),N=O,v=U.slice(0,O),b=v.length;b<O;)v[b++]=0;D=H.slice(),D.unshift(0),P=H[0],H[1]>=as/2&&++P;do d=0,o=t(H,v,O,b),o<0?(w=v[0],O!=b&&(w=w*as+(v[1]||0)),d=w/P|0,d>1?(d>=as&&(d=as-1),f=e(H,d),p=f.length,b=v.length,o=t(f,v,p,b),o==1&&(d--,r(f,O<p?D:H,p))):(d==0&&(o=d=1),f=H.slice()),p=f.length,p<b&&f.unshift(0),r(v,f,b),o==-1&&(b=v.length,o=t(H,v,O,b),o<1&&(d++,r(v,O<b?D:H,b))),b=v.length):o===0&&(d++,v=[0]),x[c++]=d,o&&v[0]?v[b++]=U[N]||0:(v=[U[N]],b=1);while((N++<R||v[0]!==void 0)&&_--)}return x[0]||x.shift(),m.e=l,ui(m,s?a+Oa(m)+1:a)}}();function G0e(e,t){var r,n,i,a,s,o,l=0,c=0,d=e.constructor,f=d.precision;if(Oa(e)>16)throw Error(TU+Oa(e));if(!e.s)return new d(Kl);for(Di=!1,o=f,s=new d(.03125);e.abs().gte(.1);)e=e.times(s),c+=5;for(n=Math.log(Um(2,c))/Math.LN10*2+5|0,o+=n,r=i=a=new d(Kl),d.precision=o;;){if(i=ui(i.times(e),o),r=r.times(++l),s=a.plus(Ch(i,r,o)),Gd(s.d).slice(0,o)===Gd(a.d).slice(0,o)){for(;c--;)a=ui(a.times(a),o);return d.precision=f,t==null?(Di=!0,ui(a,f)):a}a=s}}function Oa(e){for(var t=e.e*wi,r=e.d[0];r>=10;r/=10)t++;return t}function aM(e,t,r){if(t>e.LN10.sd())throw Di=!0,r&&(e.precision=r),Error(hu+"LN10 precision limit exceeded");return ui(new e(e.LN10),t)}function $p(e){for(var t="";e--;)t+="0";return t}function GS(e,t){var r,n,i,a,s,o,l,c,d,f=1,p=10,m=e,x=m.d,v=m.constructor,b=v.precision;if(m.s<1)throw Error(hu+(m.s?"NaN":"-Infinity"));if(m.eq(Kl))return new v(0);if(t==null?(Di=!1,c=b):c=t,m.eq(10))return t==null&&(Di=!0),aM(v,c);if(c+=p,v.precision=c,r=Gd(x),n=r.charAt(0),a=Oa(m),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=Gd(m.d),n=r.charAt(0),f++;a=Oa(m),n>1?(m=new v("0."+r),a++):m=new v(n+"."+r.slice(1))}else return l=aM(v,c+2,b).times(a+""),m=GS(new v(n+"."+r.slice(1)),c-p).plus(l),v.precision=b,t==null?(Di=!0,ui(m,b)):m;for(o=s=m=Ch(m.minus(Kl),m.plus(Kl),c),d=ui(m.times(m),c),i=3;;){if(s=ui(s.times(d),c),l=o.plus(Ch(s,new v(i),c)),Gd(l.d).slice(0,c)===Gd(o.d).slice(0,c))return o=o.times(2),a!==0&&(o=o.plus(aM(v,c+2,b).times(a+""))),o=Ch(o,new v(f),c),v.precision=b,t==null?(Di=!0,ui(o,b)):o;o=l,i+=2}}function TJ(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=bb(r/wi),e.d=[],n=(r+1)%wi,r<0&&(n+=wi),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=wi;n<i;)e.d.push(+t.slice(n,n+=wi));t=t.slice(n),n=wi-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),Di&&(e.e>WI||e.e<-WI))throw Error(TU+r)}else e.s=0,e.e=0,e.d=[0];return e}function ui(e,t,r){var n,i,a,s,o,l,c,d,f=e.d;for(s=1,a=f[0];a>=10;a/=10)s++;if(n=t-s,n<0)n+=wi,i=t,c=f[d=0];else{if(d=Math.ceil((n+1)/wi),a=f.length,d>=a)return e;for(c=a=f[d],s=1;a>=10;a/=10)s++;n%=wi,i=n-wi+s}if(r!==void 0&&(a=Um(10,s-i-1),o=c/a%10|0,l=t<0||f[d+1]!==void 0||c%a,l=r<4?(o||l)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||l||r==6&&(n>0?i>0?c/Um(10,s-i):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return l?(a=Oa(e),f.length=1,t=t-a-1,f[0]=Um(10,(wi-t%wi)%wi),e.e=bb(-t/wi)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,a=1,d--):(f.length=d+1,a=Um(10,wi-n),f[d]=i>0?(c/Um(10,s-i)%Um(10,i)|0)*a:0),l)for(;;)if(d==0){(f[0]+=a)==as&&(f[0]=1,++e.e);break}else{if(f[d]+=a,f[d]!=as)break;f[d--]=0,a=1}for(n=f.length;f[--n]===0;)f.pop();if(Di&&(e.e>WI||e.e<-WI))throw Error(TU+Oa(e));return e}function K0e(e,t){var r,n,i,a,s,o,l,c,d,f,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),Di?ui(t,m):t;if(l=e.d,f=t.d,n=t.e,c=e.e,l=l.slice(),s=c-n,s){for(d=s<0,d?(r=l,s=-s,o=f.length):(r=f,n=c,o=l.length),i=Math.max(Math.ceil(m/wi),o)+2,s>i&&(s=i,r.length=1),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else{for(i=l.length,o=f.length,d=i<o,d&&(o=i),i=0;i<o;i++)if(l[i]!=f[i]){d=l[i]<f[i];break}s=0}for(d&&(r=l,l=f,f=r,t.s=-t.s),o=l.length,i=f.length-o;i>0;--i)l[o++]=0;for(i=f.length;i>s;){if(l[--i]<f[i]){for(a=i;a&&l[--a]===0;)l[a]=as-1;--l[a],l[i]+=as}l[i]-=f[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,Di?ui(t,m):t):new p(0)}function fx(e,t,r){var n,i=Oa(e),a=Gd(e.d),s=a.length;return t?(r&&(n=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+$p(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+$p(-i-1)+a,r&&(n=r-s)>0&&(a+=$p(n))):i>=s?(a+=$p(i+1-s),r&&(n=r-i-1)>0&&(a=a+"."+$p(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(a+="."),a+=$p(n))),e.s<0?"-"+a:a}function IJ(e,t){if(e.length>t)return e.length=t,!0}function X0e(e){var t,r,n;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Dg+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return TJ(s,a.toString())}else if(typeof a!="string")throw Error(Dg+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,Tlt.test(a))TJ(s,a);else throw Error(Dg+a)}if(i.prototype=Qt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=X0e,i.config=i.set=Ilt,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function Ilt(e){if(!e||typeof e!="object")throw Error(hu+"Object expected");var t,r,n,i=["precision",1,yb,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(bb(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(Dg+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Dg+r+": "+n);return this}var IU=X0e(Alt);Kl=new IU(1);const ei=IU;var Olt=e=>e,Y0e={},Q0e=e=>e===Y0e,OJ=e=>function t(){return arguments.length===0||arguments.length===1&&Q0e(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},J0e=(e,t)=>e===1?t:OJ(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=n.filter(s=>s!==Y0e).length;return a>=e?t(...n):J0e(e-a,OJ(function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];var c=n.map(d=>Q0e(d)?o.shift():d);return t(...c,...o)}))}),Plt=e=>J0e(e.length,e),tF=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},Rlt=Plt((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),jlt=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return Olt;var i=r.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce((o,l)=>l(o),a(...arguments))}},rF=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function Z0e(e){var t;return e===0?t=1:t=Math.floor(new ei(e).abs().log(10).toNumber())+1,t}function eme(e,t,r){for(var n=new ei(e),i=0,a=[];n.lt(t)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}var tme=e=>{var[t,r]=e,[n,i]=[t,r];return t>r&&([n,i]=[r,t]),[n,i]},rme=(e,t,r)=>{if(e.lte(0))return new ei(0);var n=Z0e(e.toNumber()),i=new ei(10).pow(n),a=e.div(i),s=n!==1?.05:.1,o=new ei(Math.ceil(a.div(s).toNumber())).add(r).mul(s),l=o.mul(i);return t?new ei(l.toNumber()):new ei(Math.ceil(l.toNumber()))},Dlt=(e,t,r)=>{var n=new ei(1),i=new ei(e);if(!i.isint()&&r){var a=Math.abs(e);a<1?(n=new ei(10).pow(Z0e(e)-1),i=new ei(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new ei(Math.floor(e)))}else e===0?i=new ei(Math.floor((t-1)/2)):r||(i=new ei(Math.floor(e)));var s=Math.floor((t-1)/2),o=jlt(Rlt(l=>i.add(new ei(l-s).mul(n)).toNumber()),tF);return o(0,t)},nme=function(t,r,n,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ei(0),tickMin:new ei(0),tickMax:new ei(0)};var s=rme(new ei(r).sub(t).div(n-1),i,a),o;t<=0&&r>=0?o=new ei(0):(o=new ei(t).add(r).div(2),o=o.sub(new ei(o).mod(s)));var l=Math.ceil(o.sub(t).div(s).toNumber()),c=Math.ceil(new ei(r).sub(o).div(s).toNumber()),d=l+c+1;return d>n?nme(t,r,n,i,a+1):(d<n&&(c=r>0?c+(n-d):c,l=r>0?l:l+(n-d)),{step:s,tickMin:o.sub(new ei(l).mul(s)),tickMax:o.add(new ei(c).mul(s))})},Mlt=function(t){var[r,n]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[o,l]=tme([r,n]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...tF(0,i-1).map(()=>1/0)]:[...tF(0,i-1).map(()=>-1/0),l];return r>n?rF(c):c}if(o===l)return Dlt(o,i,a);var{step:d,tickMin:f,tickMax:p}=nme(o,l,s,a,0),m=eme(f,p.add(new ei(.1).mul(d)),d);return r>n?rF(m):m},Flt=function(t,r){var[n,i]=t,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=tme([n,i]);if(s===-1/0||o===1/0)return[n,i];if(s===o)return[s];var l=Math.max(r,2),c=rme(new ei(o).sub(s).div(l-1),a,0),d=[...eme(new ei(s),new ei(o),c),o];return a===!1&&(d=d.map(f=>Math.round(f))),n>i?rF(d):d},ime=e=>e.rootProps.maxBarSize,Llt=e=>e.rootProps.barGap,ame=e=>e.rootProps.barCategoryGap,Blt=e=>e.rootProps.barSize,sP=e=>e.rootProps.stackOffset,sme=e=>e.rootProps.reverseStackOrder,OU=e=>e.options.chartName,PU=e=>e.rootProps.syncId,ome=e=>e.rootProps.syncMethod,RU=e=>e.options.eventEmitter,$o={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},sh={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Wl={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},oP=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},Ult={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:sh.angleAxisId,includeHidden:!1,name:void 0,reversed:sh.reversed,scale:sh.scale,tick:sh.tick,tickCount:void 0,ticks:void 0,type:sh.type,unit:void 0},$lt={allowDataOverflow:Wl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Wl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Wl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Wl.scale,tick:Wl.tick,tickCount:Wl.tickCount,ticks:void 0,type:Wl.type,unit:void 0},zlt={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:sh.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:sh.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:sh.scale,tick:sh.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Hlt={allowDataOverflow:Wl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Wl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Wl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Wl.scale,tick:Wl.tick,tickCount:Wl.tickCount,ticks:void 0,type:"category",unit:void 0},jU=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?zlt:Ult,DU=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?Hlt:$lt,lP=e=>e.polarOptions,MU=st([ep,tp,ws],$at),lme=st([lP,MU],(e,t)=>{if(e!=null)return ud(e.innerRadius,t,0)}),cme=st([lP,MU],(e,t)=>{if(e!=null)return ud(e.outerRadius,t,t*.8)}),Wlt=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},ume=st([lP],Wlt);st([jU,ume],oP);var dme=st([MU,lme,cme],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});st([DU,dme],oP);var fme=st([ii,lP,lme,cme,ep,tp],(e,t,r,n,i,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:s,cy:o,startAngle:l,endAngle:c}=t;return{cx:ud(s,i,i/2),cy:ud(o,a,a/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:c,clockWise:!1}}}),qa=(e,t)=>t,cP=(e,t,r)=>r;function FU(e){return e==null?void 0:e.id}function hme(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:i,dataKey:a}=r,s=new Map;return e.forEach(o=>{var l,c=(l=o.data)!==null&&l!==void 0?l:n;if(!(c==null||c.length===0)){var d=FU(o);c.forEach((f,p)=>{var m=a==null||i?p:String(ho(f,a,null)),x=ho(f,o.dataKey,0),v;s.has(m)?v=s.get(m):v={},Object.assign(v,{[d]:x}),s.set(m,v)})}}),Array.from(s.values())}function uP(e){return e.stackId!=null&&e.dataKey!=null}var dP=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function fP(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function Vlt(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Ga=e=>{var t=ii(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},wb=e=>e.tooltip.settings.axisId;function PJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function VI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PJ(Object(r),!0).forEach(function(n){qlt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qlt(e,t,r){return(t=Glt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Glt(e){var t=Klt(e,"string");return typeof t=="symbol"?t:t+""}function Klt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nF=[0,"auto"],ts={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},pme=(e,t)=>e.cartesianAxis.xAxis[t],np=(e,t)=>{var r=pme(e,t);return r??ts},rs={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:nF,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:wC},mme=(e,t)=>e.cartesianAxis.yAxis[t],ip=(e,t)=>{var r=mme(e,t);return r??rs},Xlt={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},LU=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??Xlt},Yo=(e,t,r)=>{switch(t){case"xAxis":return np(e,r);case"yAxis":return ip(e,r);case"zAxis":return LU(e,r);case"angleAxis":return jU(e,r);case"radiusAxis":return DU(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Ylt=(e,t,r)=>{switch(t){case"xAxis":return np(e,r);case"yAxis":return ip(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},NC=(e,t,r)=>{switch(t){case"xAxis":return np(e,r);case"yAxis":return ip(e,r);case"angleAxis":return jU(e,r);case"radiusAxis":return DU(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},gme=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function xme(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var BU=e=>e.graphicalItems.cartesianItems,Qlt=st([qa,cP],xme),vme=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),AC=st([BU,Yo,Qlt],vme,{memoizeOptions:{resultEqualityCheck:fP}}),yme=st([AC],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(uP)),bme=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Jlt=st([AC],bme),wme=e=>e.map(t=>t.data).filter(Boolean).flat(1),Zlt=st([AC],wme,{memoizeOptions:{resultEqualityCheck:fP}}),Sme=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=t;return e.length>0?e:r.slice(n,i+1)},UU=st([Zlt,AU],Sme),Eme=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:ho(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(i=>({value:ho(i,n)}))):e.map(n=>({value:n})),hP=st([UU,Yo,AC],Eme);function Cme(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function rA(e){if(cf(e)||e instanceof Date){var t=Number(e);if(xa(t))return t}}function RJ(e){if(Array.isArray(e)){var t=[rA(e[0]),rA(e[1])];return M0(t)?t:void 0}var r=rA(e);if(r!=null)return[r,r]}function qh(e){return e.map(rA).filter(Vtt)}function ect(e,t,r){return!r||typeof t!="number"||cd(t)?[]:r.length?qh(r.flatMap(n=>{var i=ho(e,n.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!xa(a)||!xa(s)))return[t-a,t+s]})):[]}var Ka=e=>{var t=Ga(e),r=wb(e);return NC(e,t,r)},TC=st([Ka],e=>e==null?void 0:e.dataKey),tct=st([yme,AU,Ka],hme),kme=(e,t,r,n)=>{var i={},a=t.reduce((s,o)=>(o.stackId==null||(s[o.stackId]==null&&(s[o.stackId]=[]),s[o.stackId].push(o)),s),i);return Object.fromEntries(Object.entries(a).map(s=>{var[o,l]=s,c=n?[...l].reverse():l,d=c.map(FU);return[o,{stackedData:Mnt(e,d,r),graphicalItems:c}]}))},iF=st([tct,yme,sP,sme],kme),_me=(e,t,r,n)=>{var{dataStartIndex:i,dataEndIndex:a}=t;if(n==null&&r!=="zAxis"){var s=$nt(e,i,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},rct=st([Yo],e=>e.allowDataOverflow),$U=e=>{var t;if(e==null||!("domain"in e))return nF;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=qh(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:nF},Nme=st([Yo],$U),Ame=st([Nme,rct],W0e),nct=st([iF,im,qa,Ame],_me,{memoizeOptions:{resultEqualityCheck:dP}}),zU=e=>e.errorBars,ict=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>Cme(r,n)),qI=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),o=Math.max(...a);return[s,o]}},Tme=(e,t,r,n,i)=>{var a,s;if(r.length>0&&e.forEach(o=>{r.forEach(l=>{var c,d,f=(c=n[l.id])===null||c===void 0?void 0:c.filter(w=>Cme(i,w)),p=ho(o,(d=t.dataKey)!==null&&d!==void 0?d:l.dataKey),m=ect(o,p,f);if(m.length>=2){var x=Math.min(...m),v=Math.max(...m);(a==null||x<a)&&(a=x),(s==null||v>s)&&(s=v)}var b=RJ(p);b!=null&&(a=a==null?b[0]:Math.min(a,b[0]),s=s==null?b[1]:Math.max(s,b[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(o=>{var l=RJ(ho(o,t.dataKey));l!=null&&(a=a==null?l[0]:Math.min(a,l[0]),s=s==null?l[1]:Math.max(s,l[1]))}),xa(a)&&xa(s))return[a,s]},act=st([UU,Yo,Jlt,zU,qa],Tme,{memoizeOptions:{resultEqualityCheck:dP}});function sct(e){var{value:t}=e;if(cf(t)||t instanceof Date)return t}var oct=(e,t,r)=>{var n=e.map(sct).filter(i=>i!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&khe(n))?c0e(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},Ime=e=>e.referenceElements.dots,Sb=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),lct=st([Ime,qa,cP],Sb),Ome=e=>e.referenceElements.areas,cct=st([Ome,qa,cP],Sb),Pme=e=>e.referenceElements.lines,uct=st([Pme,qa,cP],Sb),Rme=(e,t)=>{var r=qh(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},dct=st(lct,qa,Rme),jme=(e,t)=>{var r=qh(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},fct=st([cct,qa],jme);function hct(e){var t;if(e.x!=null)return qh([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:qh(r)}function pct(e){var t;if(e.y!=null)return qh([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:qh(r)}var Dme=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?hct(n):pct(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},mct=st([uct,qa],Dme),gct=st(dct,mct,fct,(e,t,r)=>qI(e,r,t)),Mme=(e,t,r,n,i,a,s,o)=>{if(r!=null)return r;var l=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",c=l?qI(n,a,i):qI(a,i);return Nlt(t,c,e.allowDataOverflow)},xct=st([Yo,Nme,Ame,nct,act,gct,ii,qa],Mme,{memoizeOptions:{resultEqualityCheck:dP}}),vct=[0,1],Fme=(e,t,r,n,i,a,s)=>{if(!((e==null||r==null||r.length===0)&&s===void 0)){var{dataKey:o,type:l}=e,c=Gx(t,a);if(c&&o==null){var d;return c0e(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return l==="category"?oct(n,e,c):i==="expand"?vct:s}},HU=st([Yo,ii,UU,hP,sP,qa,xct],Fme),Lme=(e,t,r,n,i)=>{if(e!=null){var{scale:a,type:s}=e;if(a==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":s==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(gC(a));return o in r2?o:"point"}}},IC=st([Yo,ii,gme,OU,qa],Lme);function yct(e){if(e!=null){if(e in r2)return r2[e]();var t="scale".concat(gC(e));if(t in r2)return r2[t]()}}function WU(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var i=yct(t);if(i!=null){var a=i.domain(r).range(n);return Ont(a),a}}}var Bme=(e,t,r)=>{var n=$U(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&M0(e))return Mlt(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&M0(e))return Flt(e,t.tickCount,t.allowDecimals)}},VU=st([HU,NC,IC],Bme),Ume=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&M0(t)&&Array.isArray(r)&&r.length>0){var i=t[0],a=r[0],s=t[1],o=r[r.length-1];return[Math.min(i,a),Math.max(s,o)]}return t},bct=st([Yo,HU,VU,qa],Ume),wct=st(hP,Yo,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(qh(e.map(o=>o.value))).sort((o,l)=>o-l);if(n.length<2)return 1/0;var i=n[n.length-1]-n[0];if(i===0)return 1/0;for(var a=0;a<n.length-1;a++){var s=n[a+1]-n[a];r=Math.min(r,s)}return r/i}}),$me=st(wct,ii,ame,ws,(e,t,r,n)=>n,(e,t,r,n,i)=>{if(!xa(e))return 0;var a=t==="vertical"?n.height:n.width;if(i==="gap")return e*a/2;if(i==="no-gap"){var s=ud(r,e*a),o=e*a/2;return o-s-(o-s)/a*s}return 0}),Sct=(e,t)=>{var r=np(e,t);return r==null||typeof r.padding!="string"?0:$me(e,"xAxis",t,r.padding)},Ect=(e,t)=>{var r=ip(e,t);return r==null||typeof r.padding!="string"?0:$me(e,"yAxis",t,r.padding)},Cct=st(np,Sct,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((r=i.left)!==null&&r!==void 0?r:0)+t,right:((n=i.right)!==null&&n!==void 0?n:0)+t}}),kct=st(ip,Ect,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((r=i.top)!==null&&r!==void 0?r:0)+t,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+t}}),_ct=st([ws,Cct,G3,q3,(e,t,r)=>r],(e,t,r,n,i)=>{var{padding:a}=n;return i?[a.left,r.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),Nct=st([ws,ii,kct,G3,q3,(e,t,r)=>r],(e,t,r,n,i,a)=>{var{padding:s}=i;return a?[n.height-s.bottom,s.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),OC=(e,t,r,n)=>{var i;switch(t){case"xAxis":return _ct(e,r,n);case"yAxis":return Nct(e,r,n);case"zAxis":return(i=LU(e,r))===null||i===void 0?void 0:i.range;case"angleAxis":return ume(e);case"radiusAxis":return dme(e,r);default:return}},zme=st([Yo,OC],oP),Eb=st([Yo,IC,bct,zme],WU);st([AC,zU,qa],ict);function Hme(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var pP=(e,t)=>t,mP=(e,t,r)=>r,Act=st(W3,pP,mP,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Hme)),Tct=st(V3,pP,mP,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Hme)),Wme=(e,t)=>({width:e.width,height:t.height}),Ict=(e,t)=>{var r=typeof t.width=="number"?t.width:wC;return{width:r,height:e.height}},Vme=st(ws,np,Wme),Oct=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},Pct=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},Rct=st(tp,ws,Act,pP,mP,(e,t,r,n,i)=>{var a={},s;return r.forEach(o=>{var l=Wme(t,o);s==null&&(s=Oct(t,n,e));var c=n==="top"&&!i||n==="bottom"&&i;a[o.id]=s-Number(c)*l.height,s+=(c?-1:1)*l.height}),a}),jct=st(ep,ws,Tct,pP,mP,(e,t,r,n,i)=>{var a={},s;return r.forEach(o=>{var l=Ict(t,o);s==null&&(s=Pct(t,n,e));var c=n==="left"&&!i||n==="right"&&i;a[o.id]=s-Number(c)*l.width,s+=(c?-1:1)*l.width}),a}),Dct=(e,t)=>{var r=np(e,t);if(r!=null)return Rct(e,r.orientation,r.mirror)},Mct=st([ws,np,Dct,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r==null?void 0:r[n];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),Fct=(e,t)=>{var r=ip(e,t);if(r!=null)return jct(e,r.orientation,r.mirror)},Lct=st([ws,ip,Fct,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r==null?void 0:r[n];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),qme=st(ws,ip,(e,t)=>{var r=typeof t.width=="number"?t.width:wC;return{width:r,height:e.height}}),jJ=(e,t,r)=>{switch(t){case"xAxis":return Vme(e,r).width;case"yAxis":return qme(e,r).height;default:return}},Gme=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=r,o=Gx(e,n),l=t.map(c=>c.value);if(s&&o&&a==="category"&&i&&khe(l))return l}},qU=st([ii,hP,Yo,qa],Gme),Kme=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:a}=r,s=Gx(e,n);if(s&&(i==="number"||a!=="auto"))return t.map(o=>o.value)}},GU=st([ii,hP,NC,qa],Kme),DJ=st([ii,Ylt,IC,Eb,qU,GU,OC,VU,qa],(e,t,r,n,i,a,s,o,l)=>{if(t!=null){var c=Gx(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:a,duplicateDomain:i,isCategorical:c,niceTicks:o,range:s,realScaleType:r,scale:n}}}),Bct=(e,t,r,n,i,a,s,o,l)=>{if(!(t==null||n==null)){var c=Gx(e,l),{type:d,ticks:f,tickCount:p}=t,m=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,x=d==="category"&&n.bandwidth?n.bandwidth()/m:0;x=l==="angleAxis"&&a!=null&&a.length>=2?fl(a[0]-a[1])*2*x:x;var v=f||i;if(v){var b=v.map((w,_)=>{var C=s?s.indexOf(w):w;return{index:_,coordinate:n(C)+x,value:w,offset:x}});return b.filter(w=>xa(w.coordinate))}return c&&o?o.map((w,_)=>({coordinate:n(w)+x,value:w,index:_,offset:x})).filter(w=>xa(w.coordinate)):n.ticks?n.ticks(p).map(w=>({coordinate:n(w)+x,value:w,offset:x})):n.domain().map((w,_)=>({coordinate:n(w)+x,value:s?s[w]:w,index:_,offset:x}))}},Xme=st([ii,NC,IC,Eb,VU,OC,qU,GU,qa],Bct),Uct=(e,t,r,n,i,a,s)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=Gx(e,s),{tickCount:l}=t,c=0;return c=s==="angleAxis"&&(n==null?void 0:n.length)>=2?fl(n[0]-n[1])*2*c:c,o&&a?a.map((d,f)=>({coordinate:r(d)+c,value:d,index:f,offset:c})):r.ticks?r.ticks(l).map(d=>({coordinate:r(d)+c,value:d,offset:c})):r.domain().map((d,f)=>({coordinate:r(d)+c,value:i?i[d]:d,index:f,offset:c}))}},Dy=st([ii,NC,Eb,OC,qU,GU,qa],Uct),My=st(Yo,Eb,(e,t)=>{if(!(e==null||t==null))return VI(VI({},e),{},{scale:t})}),$ct=st([Yo,IC,HU,zme],WU);st((e,t,r)=>LU(e,r),$ct,(e,t)=>{if(!(e==null||t==null))return VI(VI({},e),{},{scale:t})});var zct=st([ii,W3,V3],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Yme=e=>e.options.defaultTooltipEventType,Qme=e=>e.options.validateTooltipEventTypes;function Jme(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function KU(e,t){var r=Yme(e),n=Qme(e);return Jme(t,r,n)}function Hct(e){return br(t=>KU(t,e))}var Zme=(e,t)=>{var r,n=Number(t);if(!(cd(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},Wct=e=>e.tooltip.settings,Kp={active:!1,index:null,dataKey:void 0,coordinate:void 0},Vct={itemInteraction:{click:Kp,hover:Kp},axisInteraction:{click:Kp,hover:Kp},keyboardInteraction:Kp,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},ege=Ol({name:"tooltip",initialState:Vct,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Oi()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,i=rd(e).tooltipItemPayloads.indexOf(r);i>-1&&(e.tooltipItemPayloads[i]=n)},prepare:Oi()},removeTooltipEntrySettings:{reducer(e,t){var r=rd(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Oi()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:qct,replaceTooltipEntrySettings:Gct,removeTooltipEntrySettings:Kct,setTooltipSettingsState:Xct,setActiveMouseOverItemIndex:tge,mouseLeaveItem:Yct,mouseLeaveChart:rge,setActiveClickItemIndex:Qct,setMouseOverAxisIndex:nge,setMouseClickAxisIndex:Jct,setSyncInteraction:aF,setKeyboardInteraction:sF}=ege.actions,Zct=ege.reducer;function MJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function iN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MJ(Object(r),!0).forEach(function(n){eut(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eut(e,t,r){return(t=tut(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tut(e){var t=rut(e,"string");return typeof t=="symbol"?t:t+""}function rut(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nut(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function iut(e){return e.index!=null}var ige=(e,t,r,n)=>{if(t==null)return Kp;var i=nut(e,t,r);if(i==null)return Kp;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(iut(i)){if(a)return iN(iN({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return iN(iN({},Kp),{},{coordinate:i.coordinate})};function aut(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function sut(e,t){var r=aut(e),n=t[0],i=t[1];if(r===void 0)return!1;var a=Math.min(n,i),s=Math.max(n,i);return r>=a&&r<=s}function out(e,t,r){if(r==null||t==null)return!0;var n=ho(e,t);return n==null||!M0(r)?!0:sut(n,r)}var XU=(e,t,r,n)=>{var i=e==null?void 0:e.index;if(i==null)return null;var a=Number(i);if(!xa(a))return i;var s=0,o=1/0;t.length>0&&(o=t.length-1);var l=Math.max(s,Math.min(a,o)),c=t[l];return c==null||out(c,r,n)?String(l):null},age=(e,t,r,n,i,a,s,o)=>{if(!(a==null||o==null)){var l=s[0],c=l==null?void 0:o(l.positions,a);if(c!=null)return c;var d=i==null?void 0:i[Number(a)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},sge=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return r==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var s;return((s=a.settings)===null||s===void 0?void 0:s.dataKey)===i})},PC=e=>e.options.tooltipPayloadSearcher,Cb=e=>e.tooltip;function FJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function LJ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FJ(Object(r),!0).forEach(function(n){lut(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lut(e,t,r){return(t=cut(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cut(e){var t=uut(e,"string");return typeof t=="symbol"?t:t+""}function uut(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dut(e,t){return e??t}var oge=(e,t,r,n,i,a,s)=>{if(!(t==null||a==null)){var{chartData:o,computedData:l,dataStartIndex:c,dataEndIndex:d}=r,f=[];return e.reduce((p,m)=>{var x,{dataDefinedOnItem:v,settings:b}=m,w=dut(v,o),_=Array.isArray(w)?Ape(w,c,d):w,C=(x=b==null?void 0:b.dataKey)!==null&&x!==void 0?x:n,N=b==null?void 0:b.nameKey,R;if(n&&Array.isArray(_)&&!Array.isArray(_[0])&&s==="axis"?R=Wtt(_,n,i):R=a(_,t,l,N),Array.isArray(R))R.forEach(O=>{var D=LJ(LJ({},b),{},{name:O.name,unit:O.unit,color:void 0,fill:void 0});p.push(pQ({tooltipEntrySettings:D,dataKey:O.dataKey,payload:O.payload,value:ho(O.payload,O.dataKey),name:O.name}))});else{var P;p.push(pQ({tooltipEntrySettings:b,dataKey:C,payload:R,value:ho(R,C),name:(P=ho(R,N))!==null&&P!==void 0?P:b==null?void 0:b.name}))}return p},f)}},YU=st([Ka,ii,gme,OU,Ga],Lme),fut=st([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),hut=st([Ga,wb],xme),RC=st([fut,Ka,hut],vme,{memoizeOptions:{resultEqualityCheck:fP}}),put=st([RC],e=>e.filter(uP)),mut=st([RC],wme,{memoizeOptions:{resultEqualityCheck:fP}}),kb=st([mut,im],Sme),gut=st([put,im,Ka],hme),QU=st([kb,Ka,RC],Eme),lge=st([Ka],$U),xut=st([Ka],e=>e.allowDataOverflow),cge=st([lge,xut],W0e),vut=st([RC],e=>e.filter(uP)),yut=st([gut,vut,sP,sme],kme),but=st([yut,im,Ga,cge],_me),wut=st([RC],bme),Sut=st([kb,Ka,wut,zU,Ga],Tme,{memoizeOptions:{resultEqualityCheck:dP}}),Eut=st([Ime,Ga,wb],Sb),Cut=st([Eut,Ga],Rme),kut=st([Ome,Ga,wb],Sb),_ut=st([kut,Ga],jme),Nut=st([Pme,Ga,wb],Sb),Aut=st([Nut,Ga],Dme),Tut=st([Cut,Aut,_ut],qI),Iut=st([Ka,lge,cge,but,Sut,Tut,ii,Ga],Mme),jC=st([Ka,ii,kb,QU,sP,Ga,Iut],Fme),Out=st([jC,Ka,YU],Bme),Put=st([Ka,jC,Out,Ga],Ume),uge=e=>{var t=Ga(e),r=wb(e),n=!1;return OC(e,t,r,n)},dge=st([Ka,uge],oP),fge=st([Ka,YU,Put,dge],WU),Rut=st([ii,QU,Ka,Ga],Gme),jut=st([ii,QU,Ka,Ga],Kme),Dut=(e,t,r,n,i,a,s,o)=>{if(t){var{type:l}=t,c=Gx(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=l==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?fl(i[0]-i[1])*2*f:f,c&&s?s.map((p,m)=>({coordinate:n(p)+f,value:p,index:m,offset:f})):n.domain().map((p,m)=>({coordinate:n(p)+f,value:a?a[p]:p,index:m,offset:f}))}}},ap=st([ii,Ka,YU,fge,uge,Rut,jut,Ga],Dut),JU=st([Yme,Qme,Wct],(e,t,r)=>Jme(r.shared,e,t)),hge=e=>e.tooltip.settings.trigger,ZU=e=>e.tooltip.settings.defaultIndex,gP=st([Cb,JU,hge,ZU],ige),Fy=st([gP,kb,TC,jC],XU),pge=st([ap,Fy],Zme),mge=st([gP],e=>{if(e)return e.dataKey}),gge=st([Cb,JU,hge,ZU],sge),Mut=st([ep,tp,ii,ws,ap,ZU,gge,PC],age),Fut=st([gP,Mut],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),Lut=st([gP],e=>e.active),But=st([gge,Fy,im,TC,pge,PC,JU],oge);st([But],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function BJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function UJ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BJ(Object(r),!0).forEach(function(n){Uut(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Uut(e,t,r){return(t=$ut(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $ut(e){var t=zut(e,"string");return typeof t=="symbol"?t:t+""}function zut(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hut=()=>br(Ka),Wut=()=>{var e=Hut(),t=br(ap),r=br(fge);return kI(!e||!r?void 0:UJ(UJ({},e),{},{scale:r}),t)};function $J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function M1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$J(Object(r),!0).forEach(function(n){Vut(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$J(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vut(e,t,r){return(t=qut(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qut(e){var t=Gut(e,"string");return typeof t=="symbol"?t:t+""}function Gut(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kut=(e,t,r,n)=>{var i=t.find(a=>a&&a.index===r);if(i){if(e==="horizontal")return{x:i.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},Xut=(e,t,r,n)=>{var i=t.find(c=>c&&c.index===r);if(i){if(e==="centric"){var a=i.coordinate,{radius:s}=n;return M1(M1(M1({},n),Ms(n.cx,n.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:l}=n;return M1(M1(M1({},n),Ms(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Yut(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var xge=(e,t,r,n,i)=>{var a,s=-1,o=(a=t==null?void 0:t.length)!==null&&a!==void 0?a:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var l=0;l<o;l++){var c=l>0?r[l-1].coordinate:r[o-1].coordinate,d=r[l].coordinate,f=l>=o-1?r[0].coordinate:r[l+1].coordinate,p=void 0;if(fl(d-c)!==fl(f-d)){var m=[];if(fl(f-d)===fl(i[1]-i[0])){p=f;var x=d+i[1]-i[0];m[0]=Math.min(x,(x+c)/2),m[1]=Math.max(x,(x+c)/2)}else{p=c;var v=f+i[1]-i[0];m[0]=Math.min(d,(v+d)/2),m[1]=Math.max(d,(v+d)/2)}var b=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(e>b[0]&&e<=b[1]||e>=m[0]&&e<=m[1]){({index:s}=r[l]);break}}else{var w=Math.min(c,f),_=Math.max(c,f);if(e>(w+d)/2&&e<=(_+d)/2){({index:s}=r[l]);break}}}else if(t){for(var C=0;C<o;C++)if(C===0&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C>0&&C<o-1&&e>(t[C].coordinate+t[C-1].coordinate)/2&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C===o-1&&e>(t[C].coordinate+t[C-1].coordinate)/2){({index:s}=t[C]);break}}return s},Qut=()=>br(OU),e$=(e,t)=>t,vge=(e,t,r)=>r,t$=(e,t,r,n)=>n,Jut=st(ap,e=>D3(e,t=>t.coordinate)),r$=st([Cb,e$,vge,t$],ige),n$=st([r$,kb,TC,jC],XU),Zut=(e,t,r)=>{if(t!=null){var n=Cb(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},yge=st([Cb,e$,vge,t$],sge),GI=st([ep,tp,ii,ws,ap,t$,yge,PC],age),edt=st([r$,GI],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),bge=st([ap,n$],Zme),tdt=st([yge,n$,im,TC,bge,PC,e$],oge),rdt=st([r$,n$],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),ndt=(e,t,r,n,i,a,s)=>{if(!(!e||!r||!n||!i)&&Yut(e,s)){var o=znt(e,t),l=xge(o,a,i,r,n),c=Kut(t,i,l,e);return{activeIndex:String(l),activeCoordinate:c}}},idt=(e,t,r,n,i,a,s)=>{if(!(!e||!n||!i||!a||!r)){var o=qat(e,r);if(o){var l=Hnt(o,t),c=xge(l,s,a,n,i),d=Xut(t,a,c,o);return{activeIndex:String(c),activeCoordinate:d}}}},adt=(e,t,r,n,i,a,s,o)=>{if(!(!e||!t||!n||!i||!a))return t==="horizontal"||t==="vertical"?ndt(e,t,n,i,a,s,o):idt(e,t,r,n,i,a,s)},sdt=st(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),odt=st(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values($o)),r=Array.from(new Set(t));return r.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:Vlt}});function zJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function HJ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zJ(Object(r),!0).forEach(function(n){ldt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ldt(e,t,r){return(t=cdt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cdt(e){var t=udt(e,"string");return typeof t=="symbol"?t:t+""}function udt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ddt={},fdt={zIndexMap:Object.values($o).reduce((e,t)=>HJ(HJ({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),ddt)},hdt=new Set(Object.values($o));function pdt(e){return hdt.has(e)}var wge=Ol({name:"zIndex",initialState:fdt,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Oi()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!pdt(r)&&delete e.zIndexMap[r])},prepare:Oi()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:i}=t.payload;e.zIndexMap[r]?i?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:i?void 0:n,panoramaElementId:i?n:void 0}},prepare:Oi()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:Oi()}}}),{registerZIndexPortal:mdt,unregisterZIndexPortal:gdt,registerZIndexPortalId:xdt,unregisterZIndexPortalId:vdt}=wge.actions,ydt=wge.reducer;function sp(e){var{zIndex:t,children:r}=e,n=vit(),i=n&&t!==void 0&&t!==0,a=Pl(),s=ya();I.useLayoutEffect(()=>i?(s(mdt({zIndex:t})),()=>{s(gdt({zIndex:t}))}):xC,[s,t,i]);var o=br(c=>sdt(c,t,a));if(!i)return r;if(!o)return null;var l=document.getElementById(o);return l?Tl.createPortal(r,l):null}function oF(){return oF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oF.apply(null,arguments)}function WJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function aN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WJ(Object(r),!0).forEach(function(n){bdt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bdt(e,t,r){return(t=wdt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wdt(e){var t=Sdt(e,"string");return typeof t=="symbol"?t:t+""}function Sdt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Edt(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return I.isValidElement(t)?I.cloneElement(t,n):I.createElement(r,n)}function Cdt(e){var t,{coordinate:r,payload:n,index:i,offset:a,tooltipAxisBandSize:s,layout:o,cursor:l,tooltipEventType:c,chartName:d}=e,f=r,p=n,m=i;if(!l||!f||d!=="ScatterChart"&&c!=="axis")return null;var x,v,b;if(d==="ScatterChart")x=f,v=oat,b=$o.cursorLine;else if(d==="BarChart")x=lat(o,f,a,s),v=r0e,b=$o.cursorRectangle;else if(o==="radial"&&Ahe(f)){var{cx:w,cy:_,radius:C,startAngle:N,endAngle:R}=n0e(f);x={cx:w,cy:_,startAngle:N,endAngle:R,innerRadius:C,outerRadius:C},v=a0e,b=$o.cursorLine}else x={points:Yat(o,f,a)},v=Qpe,b=$o.cursorLine;var P=typeof l=="object"&&"className"in l?l.className:void 0,O=aN(aN(aN(aN({stroke:"#ccc",pointerEvents:"none"},a),x),NB(l)),{},{payload:p,payloadIndex:m,className:gi("recharts-tooltip-cursor",P)});return I.createElement(sp,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:b},I.createElement(Edt,{cursor:l,cursorComp:v,cursorProps:O}))}function kdt(e){var t=Wut(),r=Upe(),n=X3(),i=Qut();return t==null||r==null||n==null||i==null?null:I.createElement(Cdt,oF({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:i}))}var Sge=I.createContext(null),_dt=()=>I.useContext(Sge),Ege={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function a(l,c,d,f,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new i(d,f||l,p),x=r?r+c:c;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],m]:l._events[x].push(m):(l._events[x]=m,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],d,f;if(this._eventsCount===0)return c;for(f in d=this._events)t.call(d,f)&&c.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},o.prototype.listeners=function(c){var d=r?r+c:c,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,m=f.length,x=new Array(m);p<m;p++)x[p]=f[p].fn;return x},o.prototype.listenerCount=function(c){var d=r?r+c:c,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(c,d,f,p,m,x){var v=r?r+c:c;if(!this._events[v])return!1;var b=this._events[v],w=arguments.length,_,C;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),w){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,f),!0;case 4:return b.fn.call(b.context,d,f,p),!0;case 5:return b.fn.call(b.context,d,f,p,m),!0;case 6:return b.fn.call(b.context,d,f,p,m,x),!0}for(C=1,_=new Array(w-1);C<w;C++)_[C-1]=arguments[C];b.fn.apply(b.context,_)}else{var N=b.length,R;for(C=0;C<N;C++)switch(b[C].once&&this.removeListener(c,b[C].fn,void 0,!0),w){case 1:b[C].fn.call(b[C].context);break;case 2:b[C].fn.call(b[C].context,d);break;case 3:b[C].fn.call(b[C].context,d,f);break;case 4:b[C].fn.call(b[C].context,d,f,p);break;default:if(!_)for(R=1,_=new Array(w-1);R<w;R++)_[R-1]=arguments[R];b[C].fn.apply(b[C].context,_)}}return!0},o.prototype.on=function(c,d,f){return a(this,c,d,f,!1)},o.prototype.once=function(c,d,f){return a(this,c,d,f,!0)},o.prototype.removeListener=function(c,d,f,p){var m=r?r+c:c;if(!this._events[m])return this;if(!d)return s(this,m),this;var x=this._events[m];if(x.fn)x.fn===d&&(!p||x.once)&&(!f||x.context===f)&&s(this,m);else{for(var v=0,b=[],w=x.length;v<w;v++)(x[v].fn!==d||p&&!x[v].once||f&&x[v].context!==f)&&b.push(x[v]);b.length?this._events[m]=b.length===1?b[0]:b:s(this,m)}return this},o.prototype.removeAllListeners=function(c){var d;return c?(d=r?r+c:c,this._events[d]&&s(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(Ege);var Ndt=Ege.exports;const Adt=Us(Ndt);var KS=new Adt,lF="recharts.syncEvent.tooltip",VJ="recharts.syncEvent.brush";function Tdt(e,t){if(t){var r=Number.parseInt(t,10);if(!cd(r))return e==null?void 0:e[r]}}var Idt={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Cge=Ol({name:"options",initialState:Idt,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Odt=Cge.reducer,{createEventEmitter:Pdt}=Cge.actions;function Rdt(e){return e.tooltip.syncInteraction}var jdt={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},kge=Ol({name:"chartData",initialState:jdt,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:qJ,setDataStartEndIndexes:Ddt,setComputedData:XNt}=kge.actions,Mdt=kge.reducer,Fdt=["x","y"];function GJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function F1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GJ(Object(r),!0).forEach(function(n){Ldt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ldt(e,t,r){return(t=Bdt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bdt(e){var t=Udt(e,"string");return typeof t=="symbol"?t:t+""}function Udt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $dt(e,t){if(e==null)return{};var r,n,i=zdt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function zdt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Hdt(){var e=br(PU),t=br(RU),r=ya(),n=br(ome),i=br(ap),a=X3(),s=K3(),o=br(l=>l.rootProps.className);I.useEffect(()=>{if(e==null)return xC;var l=(c,d,f)=>{if(t!==f&&e===c){if(n==="index"){var p;if(s&&d!==null&&d!==void 0&&(p=d.payload)!==null&&p!==void 0&&p.coordinate&&d.payload.sourceViewBox){var m=d.payload.coordinate,{x,y:v}=m,b=$dt(m,Fdt),{x:w,y:_,width:C,height:N}=d.payload.sourceViewBox,R=F1(F1({},b),{},{x:s.x+(C?(x-w)/C:0)*s.width,y:s.y+(N?(v-_)/N:0)*s.height});r(F1(F1({},d),{},{payload:F1(F1({},d.payload),{},{coordinate:R})}))}else r(d);return}if(i!=null){var P;if(typeof n=="function"){var O={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},D=n(i,O);P=i[D]}else n==="value"&&(P=i.find(te=>String(te.value)===d.payload.label));var{coordinate:M}=d.payload;if(P==null||d.payload.active===!1||M==null||s==null){r(aF({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:B,y:U}=M,H=Math.min(B,s.x+s.width),Z=Math.min(U,s.y+s.height),ee={x:a==="horizontal"?P.coordinate:H,y:a==="horizontal"?Z:P.coordinate},V=aF({active:d.payload.active,coordinate:ee,dataKey:d.payload.dataKey,index:String(P.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox});r(V)}}};return KS.on(lF,l),()=>{KS.off(lF,l)}},[o,r,t,e,n,i,a,s])}function Wdt(){var e=br(PU),t=br(RU),r=ya();I.useEffect(()=>{if(e==null)return xC;var n=(i,a,s)=>{t!==s&&e===i&&r(Ddt(a))};return KS.on(VJ,n),()=>{KS.off(VJ,n)}},[r,t,e])}function Vdt(){var e=ya();I.useEffect(()=>{e(Pdt())},[e]),Hdt(),Wdt()}function qdt(e,t,r,n,i,a){var s=br(m=>Zut(m,e,t)),o=br(RU),l=br(PU),c=br(ome),d=br(Rdt),f=d==null?void 0:d.active,p=K3();I.useEffect(()=>{if(!f&&l!=null&&o!=null){var m=aF({active:a,coordinate:r,dataKey:s,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:p});KS.emit(lF,l,m,o)}},[f,r,s,i,n,o,l,c,a,p])}function KJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function XJ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KJ(Object(r),!0).forEach(function(n){Gdt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gdt(e,t,r){return(t=Kdt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kdt(e){var t=Xdt(e,"string");return typeof t=="symbol"?t:t+""}function Xdt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ydt(e){return e.dataKey}function Qdt(e,t){return I.isValidElement(e)?I.cloneElement(e,t):typeof e=="function"?I.createElement(e,t):I.createElement(Bit,t)}var YJ=[],Jdt={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!xb.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Zdt(e){var t,r,n=vc(e,Jdt),{active:i,allowEscapeViewBox:a,animationDuration:s,animationEasing:o,content:l,filterNull:c,isAnimationActive:d,offset:f,payloadUniqBy:p,position:m,reverseDirection:x,useTranslate3d:v,wrapperStyle:b,cursor:w,shared:_,trigger:C,defaultIndex:N,portal:R,axisId:P}=n,O=ya(),D=typeof N=="number"?String(N):N;I.useEffect(()=>{O(Xct({shared:_,trigger:C,axisId:P,active:i,defaultIndex:D}))},[O,_,C,P,i,D]);var M=K3(),B=Ype(),U=Hct(_),{activeIndex:H,isActive:Z}=(t=br(Ce=>rdt(Ce,U,C,D)))!==null&&t!==void 0?t:{},ee=br(Ce=>tdt(Ce,U,C,D)),V=br(Ce=>bge(Ce,U,C,D)),te=br(Ce=>edt(Ce,U,C,D)),se=ee,Q=_dt(),X=(r=i??Z)!==null&&r!==void 0?r:!1,[fe,Se]=_rt([se,X]),Y=U==="axis"?V:void 0;qdt(U,C,te,Y,H,X);var ce=R??Q;if(ce==null||M==null||U==null)return null;var W=se??YJ;X||(W=YJ),c&&W.length&&(W=crt(W.filter(Ce=>Ce.value!=null&&(Ce.hide!==!0||n.includeHidden)),p,Ydt));var G=W.length>0,ie=I.createElement(qit,{allowEscapeViewBox:a,animationDuration:s,animationEasing:o,isAnimationActive:d,active:X,coordinate:te,hasPayload:G,offset:f,position:m,reverseDirection:x,useTranslate3d:v,viewBox:M,wrapperStyle:b,lastBoundingBox:fe,innerRef:Se,hasPortalFromProps:!!R},Qdt(l,XJ(XJ({},n),{},{payload:W,label:Y,active:X,activeIndex:H,coordinate:te,accessibilityLayer:B})));return I.createElement(I.Fragment,null,Tl.createPortal(ie,ce),X&&I.createElement(kdt,{cursor:w,tooltipEventType:U,coordinate:te,payload:W,index:H}))}var i$=e=>null;i$.displayName="Cell";function eft(e,t,r){return(t=tft(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tft(e){var t=rft(e,"string");return typeof t=="symbol"?t:t+""}function rft(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class nft{constructor(t){eft(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function QJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ift(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QJ(Object(r),!0).forEach(function(n){aft(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aft(e,t,r){return(t=sft(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sft(e){var t=oft(e,"string");return typeof t=="symbol"?t:t+""}function oft(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lft={cacheSize:2e3,enableCache:!0},_ge=ift({},lft),JJ=new nft(_ge.cacheSize),cft={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},ZJ="recharts_measurement_span";function uft(e,t){var r=t.fontSize||"",n=t.fontFamily||"",i=t.fontWeight||"",a=t.fontStyle||"",s=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o)}var eZ=(e,t)=>{try{var r=document.getElementById(ZJ);r||(r=document.createElement("span"),r.setAttribute("id",ZJ),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,cft,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},F2=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||xb.isSsr)return{width:0,height:0};if(!_ge.enableCache)return eZ(t,r);var n=uft(t,r),i=JJ.get(n);if(i)return i;var a=eZ(t,r);return JJ.set(n,a),a},tZ=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,rZ=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,dft=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,fft=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Nge={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},hft=Object.keys(Nge),fv="NaN";function pft(e,t){return e*Nge[t]}class sl{static parse(t){var r,[,n,i]=(r=fft.exec(t))!==null&&r!==void 0?r:[];return new sl(parseFloat(n),i??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,cd(t)&&(this.unit=""),r!==""&&!dft.test(r)&&(this.num=NaN,this.unit=""),hft.includes(r)&&(this.num=pft(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new sl(NaN,""):new sl(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new sl(NaN,""):new sl(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new sl(NaN,""):new sl(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new sl(NaN,""):new sl(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return cd(this.num)}}function Age(e){if(e.includes(fv))return fv;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,i,a]=(r=tZ.exec(t))!==null&&r!==void 0?r:[],s=sl.parse(n??""),o=sl.parse(a??""),l=i==="*"?s.multiply(o):s.divide(o);if(l.isNaN())return fv;t=t.replace(tZ,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,d,f,p]=(c=rZ.exec(t))!==null&&c!==void 0?c:[],m=sl.parse(d??""),x=sl.parse(p??""),v=f==="+"?m.add(x):m.subtract(x);if(v.isNaN())return fv;t=t.replace(rZ,v.toString())}return t}var nZ=/\(([^()]*)\)/;function mft(e){for(var t=e,r;(r=nZ.exec(t))!=null;){var[,n]=r;t=t.replace(nZ,Age(n))}return t}function gft(e){var t=e.replace(/\s+/g,"");return t=mft(t),t=Age(t),t}function xft(e){try{return gft(e)}catch{return fv}}function sM(e){var t=xft(e.slice(5,-1));return t===fv?"":t}var vft=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],yft=["dx","dy","angle","className","breakAll"];function cF(){return cF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cF.apply(null,arguments)}function iZ(e,t){if(e==null)return{};var r,n,i=bft(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function bft(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Tge=/[ \f\n\r\t\v\u2028\u2029]+/,Ige=e=>{var{children:t,breakAll:r,style:n}=e;try{var i=[];ys(t)||(r?i=t.toString().split(""):i=t.toString().split(Tge));var a=i.map(o=>({word:o,width:F2(o,n).width})),s=r?0:F2("",n).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function wft(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var Oge=(e,t,r,n)=>e.reduce((i,a)=>{var{word:s,width:o}=a,l=i[i.length-1];if(l&&o!=null&&(t==null||n||l.width+o+r<Number(t)))l.words.push(s),l.width+=o+r;else{var c={words:[s],width:o};i.push(c)}return i},[]),Pge=e=>e.reduce((t,r)=>t.width>r.width?t:r),Sft="",aZ=(e,t,r,n,i,a,s,o)=>{var l=e.slice(0,t),c=Ige({breakAll:r,style:n,children:l+Sft});if(!c)return[!1,[]];var d=Oge(c.wordsWithComputedWidth,a,s,o),f=d.length>i||Pge(d).width>Number(a);return[f,d]},Eft=(e,t,r,n,i)=>{var{maxLines:a,children:s,style:o,breakAll:l}=e,c=ur(a),d=String(s),f=Oge(t,n,r,i);if(!c||i)return f;var p=f.length>a||Pge(f).width>Number(n);if(!p)return f;for(var m=0,x=d.length-1,v=0,b;m<=x&&v<=d.length-1;){var w=Math.floor((m+x)/2),_=w-1,[C,N]=aZ(d,_,l,o,a,n,r,i),[R]=aZ(d,w,l,o,a,n,r,i);if(!C&&!R&&(m=w+1),C&&R&&(x=w-1),!C&&R){b=N;break}v++}return b||f},sZ=e=>{var t=ys(e)?[]:e.toString().split(Tge);return[{words:t,width:void 0}]},Cft=e=>{var{width:t,scaleToFit:r,children:n,style:i,breakAll:a,maxLines:s}=e;if((t||r)&&!xb.isSsr){var o,l,c=Ige({breakAll:a,children:n,style:i});if(c){var{wordsWithComputedWidth:d,spaceWidth:f}=c;o=d,l=f}else return sZ(n);return Eft({breakAll:a,children:n,maxLines:s,style:i},o,l,t,!!r)}return sZ(n)},Rge="#808080",kft={angle:0,breakAll:!1,capHeight:"0.71em",fill:Rge,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},a$=I.forwardRef((e,t)=>{var r=vc(e,kft),{x:n,y:i,lineHeight:a,capHeight:s,fill:o,scaleToFit:l,textAnchor:c,verticalAnchor:d}=r,f=iZ(r,vft),p=I.useMemo(()=>Cft({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:l,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,l,f.style,f.width]),{dx:m,dy:x,angle:v,className:b,breakAll:w}=f,_=iZ(f,yft);if(!cf(n)||!cf(i)||p.length===0)return null;var C=Number(n)+(ur(m)?m:0),N=Number(i)+(ur(x)?x:0);if(!xa(C)||!xa(N))return null;var R;switch(d){case"start":R=sM("calc(".concat(s,")"));break;case"middle":R=sM("calc(".concat((p.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:R=sM("calc(".concat(p.length-1," * -").concat(a,")"));break}var P=[];if(l){var O=p[0].width,{width:D}=f;P.push("scale(".concat(ur(D)&&ur(O)?D/O:1,")"))}return v&&P.push("rotate(".concat(v,", ").concat(C,", ").concat(N,")")),P.length&&(_.transform=P.join(" ")),I.createElement("text",cF({},du(_),{ref:t,x:C,y:N,className:gi("recharts-text",b),textAnchor:c,fill:o.includes("url")?Rge:o}),p.map((M,B)=>{var U=M.words.join(w?"":" ");return I.createElement("tspan",{x:C,dy:B===0?R:a,key:"".concat(U,"-").concat(B)},U)}))});a$.displayName="Text";var _ft=["labelRef"];function Nft(e,t){if(e==null)return{};var r,n,i=Aft(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Aft(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function oZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ha(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oZ(Object(r),!0).forEach(function(n){Tft(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tft(e,t,r){return(t=Ift(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ift(e){var t=Oft(e,"string");return typeof t=="symbol"?t:t+""}function Oft(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oh(){return oh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oh.apply(null,arguments)}var jge=I.createContext(null),Pft=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:i,width:a,height:s,children:o}=e,l=I.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:i,width:a,height:s}),[t,r,n,i,a,s]);return I.createElement(jge.Provider,{value:l},o)},Dge=()=>{var e=I.useContext(jge),t=K3();return e||Bpe(t)},Rft=I.createContext(null),jft=()=>{var e=I.useContext(Rft),t=br(fme);return e||t},Dft=e=>{var{value:t,formatter:r}=e,n=ys(e.children)?t:e.children;return typeof r=="function"?r(n):n},s$=e=>e!=null&&typeof e=="function",Mft=(e,t)=>{var r=fl(t-e),n=Math.min(Math.abs(t-e),360);return r*n},Fft=(e,t,r,n,i)=>{var{offset:a,className:s}=e,{cx:o,cy:l,innerRadius:c,outerRadius:d,startAngle:f,endAngle:p,clockWise:m}=i,x=(c+d)/2,v=Mft(f,p),b=v>=0?1:-1,w,_;switch(t){case"insideStart":w=f+b*a,_=m;break;case"insideEnd":w=p-b*a,_=!m;break;case"end":w=p+b*a,_=m;break;default:throw new Error("Unsupported position ".concat(t))}_=v<=0?_:!_;var C=Ms(o,l,x,w),N=Ms(o,l,x,w+(_?1:-1)*359),R="M".concat(C.x,",").concat(C.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(_?0:1,`,
    `).concat(N.x,",").concat(N.y),P=ys(e.id)?DS("recharts-radial-line-"):e.id;return I.createElement("text",oh({},n,{dominantBaseline:"central",className:gi("recharts-radial-bar-label",s)}),I.createElement("defs",null,I.createElement("path",{id:P,d:R})),I.createElement("textPath",{xlinkHref:"#".concat(P)},r))},Lft=(e,t,r)=>{var{cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:o,endAngle:l}=e,c=(o+l)/2;if(r==="outside"){var{x:d,y:f}=Ms(n,i,s+t,c);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var p=(a+s)/2,{x:m,y:x}=Ms(n,i,p,c);return{x:m,y:x,textAnchor:"middle",verticalAnchor:"middle"}},uF=e=>"cx"in e&&ur(e.cx),Bft=(e,t)=>{var{parentViewBox:r,offset:n,position:i}=e,a;r!=null&&!uF(r)&&(a=r);var{x:s,y:o,upperWidth:l,lowerWidth:c,height:d}=t,f=s,p=s+(l-c)/2,m=(f+p)/2,x=(l+c)/2,v=f+l/2,b=d>=0?1:-1,w=b*n,_=b>0?"end":"start",C=b>0?"start":"end",N=l>=0?1:-1,R=N*n,P=N>0?"end":"start",O=N>0?"start":"end";if(i==="top"){var D={x:f+l/2,y:o-w,textAnchor:"middle",verticalAnchor:_};return ha(ha({},D),a?{height:Math.max(o-a.y,0),width:l}:{})}if(i==="bottom"){var M={x:p+c/2,y:o+d+w,textAnchor:"middle",verticalAnchor:C};return ha(ha({},M),a?{height:Math.max(a.y+a.height-(o+d),0),width:c}:{})}if(i==="left"){var B={x:m-R,y:o+d/2,textAnchor:P,verticalAnchor:"middle"};return ha(ha({},B),a?{width:Math.max(B.x-a.x,0),height:d}:{})}if(i==="right"){var U={x:m+x+R,y:o+d/2,textAnchor:O,verticalAnchor:"middle"};return ha(ha({},U),a?{width:Math.max(a.x+a.width-U.x,0),height:d}:{})}var H=a?{width:x,height:d}:{};return i==="insideLeft"?ha({x:m+R,y:o+d/2,textAnchor:O,verticalAnchor:"middle"},H):i==="insideRight"?ha({x:m+x-R,y:o+d/2,textAnchor:P,verticalAnchor:"middle"},H):i==="insideTop"?ha({x:f+l/2,y:o+w,textAnchor:"middle",verticalAnchor:C},H):i==="insideBottom"?ha({x:p+c/2,y:o+d-w,textAnchor:"middle",verticalAnchor:_},H):i==="insideTopLeft"?ha({x:f+R,y:o+w,textAnchor:O,verticalAnchor:C},H):i==="insideTopRight"?ha({x:f+l-R,y:o+w,textAnchor:P,verticalAnchor:C},H):i==="insideBottomLeft"?ha({x:p+R,y:o+d-w,textAnchor:O,verticalAnchor:_},H):i==="insideBottomRight"?ha({x:p+c-R,y:o+d-w,textAnchor:P,verticalAnchor:_},H):i&&typeof i=="object"&&(ur(i.x)||$h(i.x))&&(ur(i.y)||$h(i.y))?ha({x:s+ud(i.x,x),y:o+ud(i.y,d),textAnchor:"end",verticalAnchor:"end"},H):ha({x:v,y:o+d/2,textAnchor:"middle",verticalAnchor:"middle"},H)},Uft={angle:0,offset:5,zIndex:$o.label,position:"middle",textBreakAll:!1};function zp(e){var t=vc(e,Uft),{viewBox:r,position:n,value:i,children:a,content:s,className:o="",textBreakAll:l,labelRef:c}=t,d=jft(),f=Dge(),p=n==="center"?f:d??f,m,x,v;if(r==null?m=p:uF(r)?m=r:m=Bpe(r),!m||ys(i)&&ys(a)&&!I.isValidElement(s)&&typeof s!="function")return null;var b=ha(ha({},t),{},{viewBox:m});if(I.isValidElement(s)){var{labelRef:w}=b,_=Nft(b,_ft);return I.cloneElement(s,_)}if(typeof s=="function"){if(x=I.createElement(s,b),I.isValidElement(x))return x}else x=Dft(t);var C=du(t);if(uF(m)){if(n==="insideStart"||n==="insideEnd"||n==="end")return Fft(t,n,x,C,m);v=Lft(m,t.offset,t.position)}else v=Bft(t,m);return I.createElement(sp,{zIndex:t.zIndex},I.createElement(a$,oh({ref:c,className:gi("recharts-label",o)},C,v,{textAnchor:wft(C.textAnchor)?C.textAnchor:v.textAnchor,breakAll:l}),x))}zp.displayName="Label";var $ft=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?I.createElement(zp,oh({key:"label-implicit"},n)):cf(e)?I.createElement(zp,oh({key:"label-implicit",value:e},n)):I.isValidElement(e)?e.type===zp?I.cloneElement(e,ha({key:"label-implicit"},n)):I.createElement(zp,oh({key:"label-implicit",content:e},n)):s$(e)?I.createElement(zp,oh({key:"label-implicit",content:e},n)):e&&typeof e=="object"?I.createElement(zp,oh({},e,{key:"label-implicit"},n)):null};function zft(e){var{label:t,labelRef:r}=e,n=Dge();return $ft(t,n,r)||null}var Mge={},Fge={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(Fge);var Lge={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(Lge);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Fge,r=Lge,n=j3;function i(a){if(n.isArrayLike(a))return t.last(r.toArray(a))}e.last=i})(Mge);var Hft=Mge.last;const Wft=Us(Hft);var Vft=["valueAccessor"],qft=["dataKey","clockWise","id","textBreakAll","zIndex"];function KI(){return KI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},KI.apply(null,arguments)}function lZ(e,t){if(e==null)return{};var r,n,i=Gft(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Gft(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Kft=e=>Array.isArray(e.value)?Wft(e.value):e.value,Bge=I.createContext(void 0),Xft=Bge.Provider,Uge=I.createContext(void 0);Uge.Provider;function Yft(){return I.useContext(Bge)}function Qft(){return I.useContext(Uge)}function nA(e){var{valueAccessor:t=Kft}=e,r=lZ(e,Vft),{dataKey:n,clockWise:i,id:a,textBreakAll:s,zIndex:o}=r,l=lZ(r,qft),c=Yft(),d=Qft(),f=c||d;return!f||!f.length?null:I.createElement(sp,{zIndex:o??$o.label},I.createElement(Uh,{className:"recharts-label-list"},f.map((p,m)=>{var x,v=ys(n)?t(p,m):ho(p&&p.payload,n),b=ys(a)?{}:{id:"".concat(a,"-").concat(m)};return I.createElement(zp,KI({key:"label-".concat(m)},du(p),l,b,{fill:(x=r.fill)!==null&&x!==void 0?x:p.fill,parentViewBox:p.parentViewBox,value:v,textBreakAll:s,viewBox:p.viewBox,index:m,zIndex:0}))})))}nA.displayName="LabelList";function Jft(e){var{label:t}=e;return t?t===!0?I.createElement(nA,{key:"labelList-implicit"}):I.isValidElement(t)||s$(t)?I.createElement(nA,{key:"labelList-implicit",content:t}):typeof t=="object"?I.createElement(nA,KI({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var Zft={radiusAxis:{},angleAxis:{}},$ge=Ol({name:"polarAxis",initialState:Zft,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:YNt,removeRadiusAxis:QNt,addAngleAxis:JNt,removeAngleAxis:ZNt}=$ge.actions,eht=$ge.reducer,cZ=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",uZ=null,oM=null,zge=e=>{if(e===uZ&&Array.isArray(oM))return oM;var t=[];return I.Children.forEach(e,r=>{ys(r)||(Hoe.isFragment(r)?t=t.concat(zge(r.props.children)):t.push(r))}),oM=t,uZ=e,t};function tht(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(i=>cZ(i)):n=[cZ(t)],zge(e).forEach(i=>{var a=Ay(i,"type.displayName")||Ay(i,"type.name");a&&n.indexOf(a)!==-1&&r.push(i)}),r}var Hge={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var i;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const a=r[Symbol.toStringTag];return a==null||!((i=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&i.writable)?!1:r.toString()===`[object ${a}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(Hge);var rht=Hge.isPlainObject;const nht=Us(rht);function dZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function fZ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dZ(Object(r),!0).forEach(function(n){iht(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iht(e,t,r){return(t=aht(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aht(e){var t=sht(e,"string");return typeof t=="symbol"?t:t+""}function sht(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XI(){return XI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},XI.apply(null,arguments)}var hZ=(e,t,r,n,i)=>{var a=r-n,s;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+r,",").concat(t),s+="L ".concat(e+r-a/2,",").concat(t+i),s+="L ".concat(e+r-a/2-n,",").concat(t+i),s+="L ".concat(e,",").concat(t," Z"),s},oht={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},lht=e=>{var t=vc(e,oht),{x:r,y:n,upperWidth:i,lowerWidth:a,height:s,className:o}=t,{animationEasing:l,animationDuration:c,animationBegin:d,isUpdateAnimationActive:f}=t,p=I.useRef(null),[m,x]=I.useState(-1),v=I.useRef(i),b=I.useRef(a),w=I.useRef(s),_=I.useRef(r),C=I.useRef(n),N=iU(e,"trapezoid-");if(I.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var ee=p.current.getTotalLength();ee&&x(ee)}catch{}},[]),r!==+r||n!==+n||i!==+i||a!==+a||s!==+s||i===0&&a===0||s===0)return null;var R=gi("recharts-trapezoid",o);if(!f)return I.createElement("g",null,I.createElement("path",XI({},du(t),{className:R,d:hZ(r,n,i,a,s)})));var P=v.current,O=b.current,D=w.current,M=_.current,B=C.current,U="0px ".concat(m===-1?1:m,"px"),H="".concat(m,"px 0px"),Z=Jpe(["strokeDasharray"],c,l);return I.createElement(nU,{animationId:N,key:N,canBegin:m>0,duration:c,easing:l,isActive:f,begin:d},ee=>{var V=Is(P,i,ee),te=Is(O,a,ee),se=Is(D,s,ee),Q=Is(M,r,ee),X=Is(B,n,ee);p.current&&(v.current=V,b.current=te,w.current=se,_.current=Q,C.current=X);var fe=ee>0?{transition:Z,strokeDasharray:H}:{strokeDasharray:U};return I.createElement("path",XI({},du(t),{className:R,d:hZ(Q,X,V,te,se),ref:p,style:fZ(fZ({},fe),t.style)}))})},cht=["option","shapeType","propTransformer","activeClassName"];function uht(e,t){if(e==null)return{};var r,n,i=dht(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function dht(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function pZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function YI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pZ(Object(r),!0).forEach(function(n){fht(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fht(e,t,r){return(t=hht(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hht(e){var t=pht(e,"string");return typeof t=="symbol"?t:t+""}function pht(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mht(e,t){return YI(YI({},t),e)}function ght(e,t){return e==="symbols"}function mZ(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return I.createElement(r0e,r);case"trapezoid":return I.createElement(lht,r);case"sector":return I.createElement(a0e,r);case"symbols":if(ght(t))return I.createElement(Nhe,r);break;case"curve":return I.createElement(Qpe,r);default:return null}}function xht(e){return I.isValidElement(e)?e.props:e}function vht(e){var{option:t,shapeType:r,propTransformer:n=mht,activeClassName:i="recharts-active-shape"}=e,a=uht(e,cht),s;if(I.isValidElement(t))s=I.cloneElement(t,YI(YI({},a),xht(t)));else if(typeof t=="function")s=t(a);else if(nht(t)&&typeof t!="boolean"){var o=n(t,a);s=I.createElement(mZ,{shapeType:r,elementProps:o})}else{var l=a;s=I.createElement(mZ,{shapeType:r,elementProps:l})}return a.isActive?I.createElement(Uh,{className:i},s):s}var Wge=(e,t)=>{var r=ya();return(n,i)=>a=>{e==null||e(n,i,a),r(tge({activeIndex:String(i),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},Vge=e=>{var t=ya();return(r,n)=>i=>{e==null||e(r,n,i),t(Yct())}},qge=(e,t)=>{var r=ya();return(n,i)=>a=>{e==null||e(n,i,a),r(Qct({activeIndex:String(i),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function yht(e){var{tooltipEntrySettings:t}=e,r=ya(),n=Pl(),i=I.useRef(null);return I.useLayoutEffect(()=>{n||(i.current===null?r(qct(t)):i.current!==t&&r(Gct({prev:i.current,next:t})),i.current=t)},[t,r,n]),I.useLayoutEffect(()=>()=>{i.current&&(r(Kct(i.current)),i.current=null)},[r]),null}function bht(e){var{legendPayload:t}=e,r=ya(),n=Pl(),i=I.useRef(null);return I.useLayoutEffect(()=>{n||(i.current===null?r(Oit(t)):i.current!==t&&r(Pit({prev:i.current,next:t})),i.current=t)},[r,n,t]),I.useLayoutEffect(()=>()=>{i.current&&(r(Rit(i.current)),i.current=null)},[r]),null}var lM,wht=()=>{var[e]=I.useState(()=>DS("uid-"));return e},Sht=(lM=Gv.useId)!==null&&lM!==void 0?lM:wht;function Gge(e,t){var r=Sht();return t||(e?"".concat(e,"-").concat(r):r)}var Eht=I.createContext(void 0),Cht=e=>{var{id:t,type:r,children:n}=e,i=Gge("recharts-".concat(r),t);return I.createElement(Eht.Provider,{value:i},n(i))},kht={cartesianItems:[],polarItems:[]},Kge=Ol({name:"graphicalItems",initialState:kht,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Oi()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,i=rd(e).cartesianItems.indexOf(r);i>-1&&(e.cartesianItems[i]=n)},prepare:Oi()},removeCartesianGraphicalItem:{reducer(e,t){var r=rd(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Oi()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Oi()},removePolarGraphicalItem:{reducer(e,t){var r=rd(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Oi()}}}),{addCartesianGraphicalItem:_ht,replaceCartesianGraphicalItem:Nht,removeCartesianGraphicalItem:Aht,addPolarGraphicalItem:eAt,removePolarGraphicalItem:tAt}=Kge.actions,Tht=Kge.reducer,Iht=e=>{var t=ya(),r=I.useRef(null);return I.useLayoutEffect(()=>{r.current===null?t(_ht(e)):r.current!==e&&t(Nht({prev:r.current,next:e})),r.current=e},[t,e]),I.useLayoutEffect(()=>()=>{r.current&&(t(Aht(r.current)),r.current=null)},[t]),null},Oht=I.memo(Iht);function gZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function xZ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gZ(Object(r),!0).forEach(function(n){Pht(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pht(e,t,r){return(t=Rht(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rht(e){var t=jht(e,"string");return typeof t=="symbol"?t:t+""}function jht(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dht={xAxis:{},yAxis:{},zAxis:{}},Xge=Ol({name:"cartesianAxis",initialState:Dht,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Oi()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Oi()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Oi()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Oi()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Oi()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Oi()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Oi()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Oi()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Oi()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,i=e.yAxis[r];if(i){var a=i.widthHistory||[];if(a.length===3&&a[0]===a[2]&&n===a[1]&&n!==i.width&&Math.abs(n-a[0])<=1)return;var s=[...a,n].slice(-3);e.yAxis[r]=xZ(xZ({},e.yAxis[r]),{},{width:n,widthHistory:s})}}}}),{addXAxis:Mht,replaceXAxis:Fht,removeXAxis:Lht,addYAxis:Bht,replaceYAxis:Uht,removeYAxis:$ht,addZAxis:rAt,replaceZAxis:nAt,removeZAxis:iAt,updateYAxisWidth:zht}=Xge.actions,Hht=Xge.reducer,Wht=st([ws],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),Vht=st([Wht,ep,tp],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Yge=()=>br(Vht),qht="Invariant failed";function Ght(e,t){throw new Error(qht)}var Kht=["x","y"];function dF(){return dF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dF.apply(null,arguments)}function vZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Lw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vZ(Object(r),!0).forEach(function(n){Xht(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xht(e,t,r){return(t=Yht(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yht(e){var t=Qht(e,"string");return typeof t=="symbol"?t:t+""}function Qht(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jht(e,t){if(e==null)return{};var r,n,i=Zht(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Zht(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ept(e,t){var{x:r,y:n}=e,i=Jht(e,Kht),a="".concat(r),s=parseInt(a,10),o="".concat(n),l=parseInt(o,10),c="".concat(t.height||i.height),d=parseInt(c,10),f="".concat(t.width||i.width),p=parseInt(f,10);return Lw(Lw(Lw(Lw(Lw({},t),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:d,width:p,name:t.name,radius:t.radius})}function QI(e){return I.createElement(vht,dF({shapeType:"rectangle",propTransformer:ept,activeClassName:"recharts-active-bar"},e))}var tpt=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,i)=>{if(ur(t))return t;var a=ur(n)||ys(n);return a?t(n,i):(a||Ght(),r)}},rpt={},Qge=Ol({name:"errorBars",initialState:rpt,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:i}=t.payload;e[r]&&(e[r]=e[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?i:a))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:aAt,replaceErrorBar:sAt,removeErrorBar:oAt}=Qge.actions,npt=Qge.reducer,ipt=["children"];function apt(e,t){if(e==null)return{};var r,n,i=spt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function spt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var opt={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},lpt=I.createContext(opt);function cpt(e){var{children:t}=e,r=apt(e,ipt);return I.createElement(lpt.Provider,{value:r},t)}function Jge(e,t){var r,n,i=br(c=>np(c,e)),a=br(c=>ip(c,t)),s=(r=i==null?void 0:i.allowDataOverflow)!==null&&r!==void 0?r:ts.allowDataOverflow,o=(n=a==null?void 0:a.allowDataOverflow)!==null&&n!==void 0?n:rs.allowDataOverflow,l=s||o;return{needClip:l,needClipX:s,needClipY:o}}function upt(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,i=Yge(),{needClipX:a,needClipY:s,needClip:o}=Jge(t,r);if(!o||!i)return null;var{x:l,y:c,width:d,height:f}=i;return I.createElement("clipPath",{id:"clipPath-".concat(n)},I.createElement("rect",{x:a?l:l-d/2,y:s?c:c-f/2,width:a?d:d*2,height:s?f:f*2}))}function dpt(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&xa(e.zIndex)?e.zIndex:t}var fpt={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DC=I;function hpt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ppt=typeof Object.is=="function"?Object.is:hpt,mpt=DC.useSyncExternalStore,gpt=DC.useRef,xpt=DC.useEffect,vpt=DC.useMemo,ypt=DC.useDebugValue;fpt.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var a=gpt(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=vpt(function(){function l(m){if(!c){if(c=!0,d=m,m=n(m),i!==void 0&&s.hasValue){var x=s.value;if(i(x,m))return f=x}return f=m}if(x=f,ppt(d,m))return x;var v=n(m);return i!==void 0&&i(x,v)?(d=m,x):(d=m,f=v)}var c=!1,d,f,p=r===void 0?null:r;return[function(){return l(t())},p===null?void 0:function(){return l(p())}]},[t,r,n,i]);var o=mpt(e,a[0],a[1]);return xpt(function(){s.hasValue=!0,s.value=o},[o]),ypt(o),o};function bpt(e){e()}function wpt(){let e=null,t=null;return{clear(){e=null,t=null},notify(){bpt(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var yZ={notify(){},get:()=>[]};function Spt(e,t){let r,n=yZ,i=0,a=!1;function s(v){d();const b=n.subscribe(v);let w=!1;return()=>{w||(w=!0,b(),f())}}function o(){n.notify()}function l(){x.onStateChange&&x.onStateChange()}function c(){return a}function d(){i++,r||(r=e.subscribe(l),n=wpt())}function f(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=yZ)}function p(){a||(a=!0,d())}function m(){a&&(a=!1,f())}const x={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:c,trySubscribe:p,tryUnsubscribe:m,getListeners:()=>n};return x}var Ept=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Cpt=Ept(),kpt=()=>typeof navigator<"u"&&navigator.product==="ReactNative",_pt=kpt(),Npt=()=>Cpt||_pt?I.useLayoutEffect:I.useEffect,Apt=Npt();function bZ(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Tpt(e,t){if(bZ(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i])||!bZ(e[r[i]],t[r[i]]))return!1;return!0}var cM=Symbol.for("react-redux-context"),uM=typeof globalThis<"u"?globalThis:{};function Ipt(){if(!I.createContext)return{};const e=uM[cM]??(uM[cM]=new Map);let t=e.get(I.createContext);return t||(t=I.createContext(null),e.set(I.createContext,t)),t}var Opt=Ipt();function Ppt(e){const{children:t,context:r,serverState:n,store:i}=e,a=I.useMemo(()=>{const l=Spt(i);return{store:i,subscription:l,getServerState:n?()=>n:void 0}},[i,n]),s=I.useMemo(()=>i.getState(),[i]);Apt(()=>{const{subscription:l}=a;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),s!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[a,s]);const o=r||Opt;return I.createElement(o.Provider,{value:a},t)}var Rpt=Ppt,jpt=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function Dpt(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function o$(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(jpt.has(n)){if(e[n]==null&&t[n]==null)continue;if(!Tpt(e[n],t[n]))return!1}else if(!Dpt(e[n],t[n]))return!1;return!0}var Mpt=["onMouseEnter","onMouseLeave","onClick"],Fpt=["value","background","tooltipPosition"],Lpt=["id"],Bpt=["onMouseEnter","onClick","onMouseLeave"];function Gh(){return Gh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gh.apply(null,arguments)}function wZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Fo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wZ(Object(r),!0).forEach(function(n){Upt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Upt(e,t,r){return(t=$pt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $pt(e){var t=zpt(e,"string");return typeof t=="symbol"?t:t+""}function zpt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JI(e,t){if(e==null)return{};var r,n,i=Hpt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Hpt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Wpt=e=>{var{dataKey:t,name:r,fill:n,legendType:i,hide:a}=e;return[{inactive:a,dataKey:t,type:i,color:n,value:Ope(r,t),payload:e}]},Vpt=I.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:i,name:a,hide:s,unit:o,tooltipType:l}=e,c={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:Ope(a,t),hide:s,type:l,color:i,unit:o}};return I.createElement(yht,{tooltipEntrySettings:c})});function qpt(e){var t=br(Fy),{data:r,dataKey:n,background:i,allOtherBarProps:a}=e,{onMouseEnter:s,onMouseLeave:o,onClick:l}=a,c=JI(a,Mpt),d=Wge(s,n),f=Vge(o),p=qge(l,n);if(!i||r==null)return null;var m=NB(i);return I.createElement(sp,{zIndex:dpt(i,$o.barBackground)},r.map((x,v)=>{var{value:b,background:w,tooltipPosition:_}=x,C=JI(x,Fpt);if(!w)return null;var N=d(x,v),R=f(x,v),P=p(x,v),O=Fo(Fo(Fo(Fo(Fo({option:i,isActive:String(v)===t},C),{},{fill:"#eee"},w),m),PB(c,x,v)),{},{onMouseEnter:N,onMouseLeave:R,onClick:P,dataKey:n,index:v,className:"recharts-bar-background-rectangle"});return I.createElement(QI,Gh({key:"background-bar-".concat(v)},O))}))}function Gpt(e){var{showLabels:t,children:r,rects:n}=e,i=n==null?void 0:n.map(a=>{var s={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return Fo(Fo({},s),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:s,fill:a.fill})});return I.createElement(Xft,{value:t?i:void 0},r)}function Kpt(e){var{shape:t,activeBar:r,baseProps:n,entry:i,index:a,dataKey:s}=e,o=br(Fy),l=br(mge),c=r&&String(a)===o&&(l==null||s===l),d=c?r:t;return c?I.createElement(sp,{zIndex:$o.activeBar},I.createElement(QI,Gh({},n,{name:String(n.name)},i,{isActive:c,option:d,index:a,dataKey:s}))):I.createElement(QI,Gh({},n,{name:String(n.name)},i,{isActive:c,option:d,index:a,dataKey:s}))}function Xpt(e){var{shape:t,baseProps:r,entry:n,index:i,dataKey:a}=e;return I.createElement(QI,Gh({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:i,dataKey:a}))}function Ypt(e){var t,{data:r,props:n}=e,i=(t=Bh(n))!==null&&t!==void 0?t:{},{id:a}=i,s=JI(i,Lpt),{shape:o,dataKey:l,activeBar:c}=n,{onMouseEnter:d,onClick:f,onMouseLeave:p}=n,m=JI(n,Bpt),x=Wge(d,l),v=Vge(p),b=qge(f,l);return r?I.createElement(I.Fragment,null,r.map((w,_)=>I.createElement(Uh,Gh({key:"rectangle-".concat(w==null?void 0:w.x,"-").concat(w==null?void 0:w.y,"-").concat(w==null?void 0:w.value,"-").concat(_),className:"recharts-bar-rectangle"},PB(m,w,_),{onMouseEnter:x(w,_),onMouseLeave:v(w,_),onClick:b(w,_)}),c?I.createElement(Kpt,{shape:o,activeBar:c,baseProps:s,entry:w,index:_,dataKey:l}):I.createElement(Xpt,{shape:o,baseProps:s,entry:w,index:_,dataKey:l})))):null}function Qpt(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:l,onAnimationEnd:c,onAnimationStart:d}=t,f=r.current,p=iU(t,"recharts-bar-"),[m,x]=I.useState(!1),v=!m,b=I.useCallback(()=>{typeof c=="function"&&c(),x(!1)},[c]),w=I.useCallback(()=>{typeof d=="function"&&d(),x(!0)},[d]);return I.createElement(Gpt,{showLabels:v,rects:n},I.createElement(nU,{animationId:p,begin:s,duration:o,isActive:a,easing:l,onAnimationEnd:b,onAnimationStart:w,key:p},_=>{var C=_===1?n:n==null?void 0:n.map((N,R)=>{var P=f&&f[R];if(P)return Fo(Fo({},N),{},{x:Is(P.x,N.x,_),y:Is(P.y,N.y,_),width:Is(P.width,N.width,_),height:Is(P.height,N.height,_)});if(i==="horizontal"){var O=Is(0,N.height,_),D=Is(N.stackedBarStart,N.y,_);return Fo(Fo({},N),{},{y:D,height:O})}var M=Is(0,N.width,_),B=Is(N.stackedBarStart,N.x,_);return Fo(Fo({},N),{},{width:M,x:B})});return _>0&&(r.current=C??null),C==null?null:I.createElement(Uh,null,I.createElement(Ypt,{props:t,data:C}))}),I.createElement(Jft,{label:t.label}),t.children)}function Jpt(e){var t=I.useRef(null);return I.createElement(Qpt,{previousRectanglesRef:t,props:e})}var Zge=0,Zpt=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:ho(e,t)}};class e0t extends I.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:i,xAxisId:a,yAxisId:s,needClip:o,background:l,id:c}=this.props;if(t||r==null)return null;var d=gi("recharts-bar",i),f=c;return I.createElement(Uh,{className:d,id:c},o&&I.createElement("defs",null,I.createElement(upt,{clipPathId:f,xAxisId:a,yAxisId:s})),I.createElement(Uh,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},I.createElement(qpt,{data:r,dataKey:n,background:l,allOtherBarProps:this.props}),I.createElement(Jpt,this.props)))}}var t0t={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Zge,xAxisId:0,yAxisId:0,zIndex:$o.bar};function r0t(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:l,animationEasing:c,isAnimationActive:d}=e,{needClip:f}=Jge(t,r),p=X3(),m=Pl(),x=tht(e.children,i$),v=br(_=>I0t(_,t,r,m,e.id,x));if(p!=="vertical"&&p!=="horizontal")return null;var b,w=v==null?void 0:v[0];return w==null||w.height==null||w.width==null?b=0:b=p==="vertical"?w.height/2:w.width/2,I.createElement(cpt,{xAxisId:t,yAxisId:r,data:v,dataPointFormatter:Zpt,errorBarOffset:b},I.createElement(e0t,Gh({},e,{layout:p,needClip:f,data:v,xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:l,animationEasing:c,isAnimationActive:d})))}function n0t(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:i,bandSize:a,xAxis:s,yAxis:o,xAxisTicks:l,yAxisTicks:c,stackedData:d,displayedData:f,offset:p,cells:m,parentViewBox:x,dataStartIndex:v}=e,b=t==="horizontal"?o:s,w=d?b.scale.domain():null,_=Lnt({numericAxis:b}),C=b.scale(_);return f.map((N,R)=>{var P,O,D,M,B,U;d?P=Pnt(d[R+v],w):(P=ho(N,r),Array.isArray(P)||(P=[_,P]));var H=tpt(n,Zge)(P[1],R);if(t==="horizontal"){var Z,[ee,V]=[o.scale(P[0]),o.scale(P[1])];O=dQ({axis:s,ticks:l,bandSize:a,offset:i.offset,entry:N,index:R}),D=(Z=V??ee)!==null&&Z!==void 0?Z:void 0,M=i.size;var te=ee-V;if(B=cd(te)?0:te,U={x:O,y:p.top,width:M,height:p.height},Math.abs(H)>0&&Math.abs(B)<Math.abs(H)){var se=fl(B||H)*(Math.abs(H)-Math.abs(B));D-=se,B+=se}}else{var[Q,X]=[s.scale(P[0]),s.scale(P[1])];if(O=Q,D=dQ({axis:o,ticks:c,bandSize:a,offset:i.offset,entry:N,index:R}),M=X-Q,B=i.size,U={x:p.left,y:D,width:p.width,height:B},Math.abs(H)>0&&Math.abs(M)<Math.abs(H)){var fe=fl(M||H)*(Math.abs(H)-Math.abs(M));M+=fe}}if(O==null||D==null||M==null||B==null)return null;var Se=Fo(Fo({},N),{},{stackedBarStart:C,x:O,y:D,width:M,height:B,value:d?P:P[1],payload:N,background:U,tooltipPosition:{x:O+M/2,y:D+B/2},parentViewBox:x},m&&m[R]&&m[R].props);return Se}).filter(Boolean)}function i0t(e){var t=vc(e,t0t),r=Pl();return I.createElement(Cht,{id:t.id,type:"bar"},n=>I.createElement(I.Fragment,null,I.createElement(bht,{legendPayload:Wpt(t)}),I.createElement(Vpt,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),I.createElement(Oht,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:Fnt(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),I.createElement(sp,{zIndex:t.zIndex},I.createElement(r0t,Gh({},t,{id:n})))))}var exe=I.memo(i0t,o$);exe.displayName="Bar";function SZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function sN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SZ(Object(r),!0).forEach(function(n){a0t(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function a0t(e,t,r){return(t=s0t(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s0t(e){var t=o0t(e,"string");return typeof t=="symbol"?t:t+""}function o0t(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var l0t=(e,t)=>t,c0t=(e,t,r)=>r,u0t=(e,t,r,n)=>n,d0t=(e,t,r,n,i)=>i,MC=st([BU,d0t],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),f0t=st([MC],e=>e==null?void 0:e.maxBarSize),h0t=(e,t,r,n,i,a)=>a,EZ=(e,t,r)=>{var n=r??e;if(!ys(n))return ud(n,t,0)},p0t=st([ii,BU,l0t,c0t,u0t],(e,t,r,n,i)=>t.filter(a=>e==="horizontal"?a.xAxisId===r:a.yAxisId===n).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),m0t=(e,t,r,n)=>{var i=ii(e);return i==="horizontal"?iF(e,"yAxis",r,n):iF(e,"xAxis",t,n)},g0t=(e,t,r)=>{var n=ii(e);return n==="horizontal"?jJ(e,"xAxis",t):jJ(e,"yAxis",r)},x0t=(e,t,r)=>{var n={},i=e.filter(uP),a=e.filter(c=>c.stackId==null),s=i.reduce((c,d)=>(c[d.stackId]||(c[d.stackId]=[]),c[d.stackId].push(d),c),n),o=Object.entries(s).map(c=>{var[d,f]=c,p=f.map(x=>x.dataKey),m=EZ(t,r,f[0].barSize);return{stackId:d,dataKeys:p,barSize:m}}),l=a.map(c=>{var d=[c.dataKey].filter(p=>p!=null),f=EZ(t,r,c.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...o,...l]},v0t=st([p0t,Blt,g0t],x0t),y0t=(e,t,r,n,i)=>{var a,s,o=MC(e,t,r,n,i);if(o!=null){var l=ii(e),c=ime(e),{maxBarSize:d}=o,f=ys(d)?c:d,p,m;return l==="horizontal"?(p=My(e,"xAxis",t,n),m=Dy(e,"xAxis",t,n)):(p=My(e,"yAxis",r,n),m=Dy(e,"yAxis",r,n)),(a=(s=kI(p,m,!0))!==null&&s!==void 0?s:f)!==null&&a!==void 0?a:0}},txe=(e,t,r,n)=>{var i=ii(e),a,s;return i==="horizontal"?(a=My(e,"xAxis",t,n),s=Dy(e,"xAxis",t,n)):(a=My(e,"yAxis",r,n),s=Dy(e,"yAxis",r,n)),kI(a,s)};function b0t(e,t,r,n,i){var a=n.length;if(!(a<1)){var s=ud(e,r,0,!0),o,l=[];if(xa(n[0].barSize)){var c=!1,d=r/a,f=n.reduce((w,_)=>w+(_.barSize||0),0);f+=(a-1)*s,f>=r&&(f-=(a-1)*s,s=0),f>=r&&d>0&&(c=!0,d*=.9,f=a*d);var p=(r-f)/2>>0,m={offset:p-s,size:0};o=n.reduce((w,_)=>{var C,N={stackId:_.stackId,dataKeys:_.dataKeys,position:{offset:m.offset+m.size+s,size:c?d:(C=_.barSize)!==null&&C!==void 0?C:0}},R=[...w,N];return m=R[R.length-1].position,R},l)}else{var x=ud(t,r,0,!0);r-2*x-(a-1)*s<=0&&(s=0);var v=(r-2*x-(a-1)*s)/a;v>1&&(v>>=0);var b=xa(i)?Math.min(v,i):v;o=n.reduce((w,_,C)=>[...w,{stackId:_.stackId,dataKeys:_.dataKeys,position:{offset:x+(v+s)*C+(v-b)/2,size:b}}],l)}return o}}var w0t=(e,t,r,n,i,a,s)=>{var o=ys(s)?t:s,l=b0t(r,n,i!==a?i:a,e,o);return i!==a&&l!=null&&(l=l.map(c=>sN(sN({},c),{},{position:sN(sN({},c.position),{},{offset:c.position.offset-i/2})}))),l},S0t=st([v0t,ime,Llt,ame,y0t,txe,f0t],w0t),E0t=(e,t,r,n)=>My(e,"xAxis",t,n),C0t=(e,t,r,n)=>My(e,"yAxis",r,n),k0t=(e,t,r,n)=>Dy(e,"xAxis",t,n),_0t=(e,t,r,n)=>Dy(e,"yAxis",r,n),N0t=st([S0t,MC],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),A0t=(e,t)=>{var r=FU(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var i=e[n];if(i){var{stackedData:a}=i;if(a)return a.find(s=>s.key===r)}}}},T0t=st([m0t,MC],A0t),I0t=st([ws,ZB,E0t,C0t,k0t,_0t,N0t,ii,AU,txe,T0t,MC,h0t],(e,t,r,n,i,a,s,o,l,c,d,f,p)=>{var{chartData:m,dataStartIndex:x,dataEndIndex:v}=l;if(!(f==null||s==null||t==null||o!=="horizontal"&&o!=="vertical"||r==null||n==null||i==null||a==null||c==null)){var{data:b}=f,w;if(b!=null&&b.length>0?w=b:w=m==null?void 0:m.slice(x,v+1),w!=null)return n0t({layout:o,barSettings:f,pos:s,parentViewBox:t,bandSize:c,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,stackedData:d,displayedData:w,offset:e,cells:p,dataStartIndex:x})}}),O0t=e=>{var{chartData:t}=e,r=ya(),n=Pl();return I.useEffect(()=>n?()=>{}:(r(qJ(t)),()=>{r(qJ(void 0))}),[t,r,n]),null},CZ={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},rxe=Ol({name:"brush",initialState:CZ,reducers:{setBrushSettings(e,t){return t.payload==null?CZ:t.payload}}}),{setBrushSettings:lAt}=rxe.actions,P0t=rxe.reducer;function R0t(e,t,r){return(t=j0t(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j0t(e){var t=D0t(e,"string");return typeof t=="symbol"?t:t+""}function D0t(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class l${static create(t){return new l$(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(r){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],i=r[r.length-1];return n<=i?t>=n&&t<=i:t>=i&&t<=n}}R0t(l$,"EPS",1e-4);function M0t(e){return(e%180+180)%180}var F0t=function(t){var{width:r,height:n}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=M0t(i),s=a*Math.PI/180,o=Math.atan(n/r),l=s>o&&s<Math.PI-o?n/Math.sin(s):r/Math.cos(s);return Math.abs(l)},L0t={dots:[],areas:[],lines:[]},nxe=Ol({name:"referenceElements",initialState:L0t,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=rd(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=rd(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=rd(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:cAt,removeDot:uAt,addArea:dAt,removeArea:fAt,addLine:hAt,removeLine:pAt}=nxe.actions,B0t=nxe.reducer,U0t=I.createContext(void 0),$0t=e=>{var{children:t}=e,[r]=I.useState("".concat(DS("recharts"),"-clip")),n=Yge();if(n==null)return null;var{x:i,y:a,width:s,height:o}=n;return I.createElement(U0t.Provider,{value:r},I.createElement("defs",null,I.createElement("clipPath",{id:r},I.createElement("rect",{x:i,y:a,height:o,width:s}))),t)};function ixe(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function z0t(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return F0t(n,r)}function H0t(e,t,r){var n=r==="width",{x:i,y:a,width:s,height:o}=e;return t===1?{start:n?i:a,end:n?i+s:a+o}:{start:n?i+s:a+o,end:n?i:a}}function ZI(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-i)<=0}function W0t(e,t){return ixe(e,t+1)}function V0t(e,t,r,n,i){for(var a=(n||[]).slice(),{start:s,end:o}=t,l=0,c=1,d=s,f=function(){var x=n==null?void 0:n[l];if(x===void 0)return{v:ixe(n,c)};var v=l,b,w=()=>(b===void 0&&(b=r(x,v)),b),_=x.coordinate,C=l===0||ZI(e,_,w,d,o);C||(l=0,d=s,c+=1),C&&(d=_+e*(w()/2+i),l+=c)},p;c<=a.length;)if(p=f(),p)return p.v;return[]}function kZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function to(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kZ(Object(r),!0).forEach(function(n){q0t(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function q0t(e,t,r){return(t=G0t(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G0t(e){var t=K0t(e,"string");return typeof t=="symbol"?t:t+""}function K0t(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function X0t(e,t,r,n,i){for(var a=(n||[]).slice(),s=a.length,{start:o}=t,{end:l}=t,c=function(p){var m=a[p],x,v=()=>(x===void 0&&(x=r(m,p)),x);if(p===s-1){var b=e*(m.coordinate+e*v()/2-l);a[p]=m=to(to({},m),{},{tickCoord:b>0?m.coordinate-b*e:m.coordinate})}else a[p]=m=to(to({},m),{},{tickCoord:m.coordinate});if(m.tickCoord!=null){var w=ZI(e,m.tickCoord,v,o,l);w&&(l=m.tickCoord-e*(v()/2+i),a[p]=to(to({},m),{},{isShow:!0}))}},d=s-1;d>=0;d--)c(d);return a}function Y0t(e,t,r,n,i,a){var s=(n||[]).slice(),o=s.length,{start:l,end:c}=t;if(a){var d=n[o-1],f=r(d,o-1),p=e*(d.coordinate+e*f/2-c);if(s[o-1]=d=to(to({},d),{},{tickCoord:p>0?d.coordinate-p*e:d.coordinate}),d.tickCoord!=null){var m=ZI(e,d.tickCoord,()=>f,l,c);m&&(c=d.tickCoord-e*(f/2+i),s[o-1]=to(to({},d),{},{isShow:!0}))}}for(var x=a?o-1:o,v=function(_){var C=s[_],N,R=()=>(N===void 0&&(N=r(C,_)),N);if(_===0){var P=e*(C.coordinate-e*R()/2-l);s[_]=C=to(to({},C),{},{tickCoord:P<0?C.coordinate-P*e:C.coordinate})}else s[_]=C=to(to({},C),{},{tickCoord:C.coordinate});if(C.tickCoord!=null){var O=ZI(e,C.tickCoord,R,l,c);O&&(l=C.tickCoord+e*(R()/2+i),s[_]=to(to({},C),{},{isShow:!0}))}},b=0;b<x;b++)v(b);return s}function c$(e,t,r){var{tick:n,ticks:i,viewBox:a,minTickGap:s,orientation:o,interval:l,tickFormatter:c,unit:d,angle:f}=e;if(!i||!i.length||!n)return[];if(ur(l)||xb.isSsr){var p;return(p=W0t(i,ur(l)?l:0))!==null&&p!==void 0?p:[]}var m=[],x=o==="top"||o==="bottom"?"width":"height",v=d&&x==="width"?F2(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=(C,N)=>{var R=typeof c=="function"?c(C.value,N):C.value;return x==="width"?z0t(F2(R,{fontSize:t,letterSpacing:r}),v,f):F2(R,{fontSize:t,letterSpacing:r})[x]},w=i.length>=2?fl(i[1].coordinate-i[0].coordinate):1,_=H0t(a,w,x);return l==="equidistantPreserveStart"?V0t(w,_,b,i,s):(l==="preserveStart"||l==="preserveStartEnd"?m=Y0t(w,_,b,i,s,l==="preserveStartEnd"):m=X0t(w,_,b,i,s),m.filter(C=>C.isShow))}var Q0t=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:a=0}=e,s=0;if(t){Array.from(t).forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>s&&(s=f.width)}});var o=r?r.getBoundingClientRect().width:0,l=i+a,c=s+l+o+(r?n:0);return Math.round(c)}return 0},J0t=["axisLine","width","height","className","hide","ticks","axisType"];function Z0t(e,t){if(e==null)return{};var r,n,i=emt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function emt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function hx(){return hx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hx.apply(null,arguments)}function _Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Na(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_Z(Object(r),!0).forEach(function(n){tmt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_Z(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tmt(e,t,r){return(t=rmt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rmt(e){var t=nmt(e,"string");return typeof t=="symbol"?t:t+""}function nmt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kh={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:$o.axis};function imt(e){var{x:t,y:r,width:n,height:i,orientation:a,mirror:s,axisLine:o,otherSvgProps:l}=e;if(!o)return null;var c=Na(Na(Na({},l),Bh(o)),{},{fill:"none"});if(a==="top"||a==="bottom"){var d=+(a==="top"&&!s||a==="bottom"&&s);c=Na(Na({},c),{},{x1:t,y1:r+d*i,x2:t+n,y2:r+d*i})}else{var f=+(a==="left"&&!s||a==="right"&&s);c=Na(Na({},c),{},{x1:t+f*n,y1:r,x2:t+f*n,y2:r+i})}return I.createElement("line",hx({},c,{className:gi("recharts-cartesian-axis-line",Ay(o,"className"))}))}function amt(e,t,r,n,i,a,s,o,l){var c,d,f,p,m,x,v=o?-1:1,b=e.tickSize||s,w=ur(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":c=d=e.coordinate,p=r+ +!o*i,f=p-v*b,x=f-v*l,m=w;break;case"left":f=p=e.coordinate,d=t+ +!o*n,c=d-v*b,m=c-v*l,x=w;break;case"right":f=p=e.coordinate,d=t+ +o*n,c=d+v*b,m=c+v*l,x=w;break;default:c=d=e.coordinate,p=r+ +o*i,f=p+v*b,x=f+v*l,m=w;break}return{line:{x1:c,y1:f,x2:d,y2:p},tick:{x:m,y:x}}}function smt(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function omt(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function lmt(e){var{option:t,tickProps:r,value:n}=e,i,a=gi(r.className,"recharts-cartesian-axis-tick-value");if(I.isValidElement(t))i=I.cloneElement(t,Na(Na({},r),{},{className:a}));else if(typeof t=="function")i=t(Na(Na({},r),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(s=gi(s,t==null?void 0:t.className)),i=I.createElement(a$,hx({},r,{className:s}),n)}return i}var cmt=I.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:i,stroke:a,tickFormatter:s,unit:o,padding:l,tickTextProps:c,orientation:d,mirror:f,x:p,y:m,width:x,height:v,tickSize:b,tickMargin:w,fontSize:_,letterSpacing:C,getTicksConfig:N,events:R,axisType:P}=e,O=c$(Na(Na({},N),{},{ticks:r}),_,C),D=smt(d,f),M=omt(d,f),B=Bh(N),U=NB(n),H={};typeof i=="object"&&(H=i);var Z=Na(Na({},B),{},{fill:"none"},H),ee=O.map(se=>Na({entry:se},amt(se,p,m,x,v,d,b,f,w))),V=ee.map(se=>{var{entry:Q,line:X}=se;return I.createElement(Uh,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(Q.value,"-").concat(Q.coordinate,"-").concat(Q.tickCoord)},i&&I.createElement("line",hx({},Z,X,{className:gi("recharts-cartesian-axis-tick-line",Ay(i,"className"))})))}),te=ee.map((se,Q)=>{var{entry:X,tick:fe}=se,Se=Na(Na(Na(Na({textAnchor:D,verticalAnchor:M},B),{},{stroke:"none",fill:a},U),fe),{},{index:Q,payload:X,visibleTicksCount:O.length,tickFormatter:s,padding:l},c);return I.createElement(Uh,hx({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(X.value,"-").concat(X.coordinate,"-").concat(X.tickCoord)},PB(R,X,Q)),n&&I.createElement(lmt,{option:n,tickProps:Se,value:"".concat(typeof s=="function"?s(X.value,Q):X.value).concat(o||"")}))});return I.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(P,"-ticks")},te.length>0&&I.createElement(sp,{zIndex:$o.label},I.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(P,"-tick-labels"),ref:t},te)),V.length>0&&I.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(P,"-tick-lines")},V))}),umt=I.forwardRef((e,t)=>{var{axisLine:r,width:n,height:i,className:a,hide:s,ticks:o,axisType:l}=e,c=Z0t(e,J0t),[d,f]=I.useState(""),[p,m]=I.useState(""),x=I.useRef(null);I.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var b;return Q0t({ticks:x.current,label:(b=e.labelRef)===null||b===void 0?void 0:b.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var v=I.useCallback(b=>{if(b){var w=b.getElementsByClassName("recharts-cartesian-axis-tick-value");x.current=w;var _=w[0];if(_){var C=window.getComputedStyle(_),N=C.fontSize,R=C.letterSpacing;(N!==d||R!==p)&&(f(N),m(R))}}},[d,p]);return s||n!=null&&n<=0||i!=null&&i<=0?null:I.createElement(sp,{zIndex:e.zIndex},I.createElement(Uh,{className:gi("recharts-cartesian-axis",a)},I.createElement(imt,{x:e.x,y:e.y,width:n,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Bh(e)}),I.createElement(cmt,{ref:v,axisType:l,events:c,fontSize:d,getTicksConfig:e,height:e.height,letterSpacing:p,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:o,unit:e.unit,width:e.width,x:e.x,y:e.y}),I.createElement(Pft,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},I.createElement(zft,{label:e.label,labelRef:e.labelRef}),e.children)))}),u$=I.forwardRef((e,t)=>{var r=vc(e,kh);return I.createElement(umt,hx({},r,{ref:t}))});u$.displayName="CartesianAxis";var dmt=["x1","y1","x2","y2","key"],fmt=["offset"],hmt=["xAxisId","yAxisId"],pmt=["xAxisId","yAxisId"];function NZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function oo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NZ(Object(r),!0).forEach(function(n){mmt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mmt(e,t,r){return(t=gmt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gmt(e){var t=xmt(e,"string");return typeof t=="symbol"?t:t+""}function xmt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cg(){return cg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cg.apply(null,arguments)}function eO(e,t){if(e==null)return{};var r,n,i=vmt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function vmt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ymt=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:i,width:a,height:s,ry:o}=e;return I.createElement("rect",{x:n,y:i,ry:o,width:a,height:s,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function axe(e){var{option:t,lineItemProps:r}=e,n;if(I.isValidElement(t))n=I.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var i,{x1:a,y1:s,x2:o,y2:l,key:c}=r,d=eO(r,dmt),f=(i=Bh(d))!==null&&i!==void 0?i:{},{offset:p}=f,m=eO(f,fmt);n=I.createElement("line",cg({},m,{x1:a,y1:s,x2:o,y2:l,fill:"none",key:c}))}return n}function bmt(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=e,o=eO(e,hmt),l=i.map((c,d)=>{var f=oo(oo({},o),{},{x1:t,y1:c,x2:t+r,y2:c,key:"line-".concat(d),index:d});return I.createElement(axe,{key:"line-".concat(d),option:n,lineItemProps:f})});return I.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function wmt(e){var{y:t,height:r,vertical:n=!0,verticalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=e,o=eO(e,pmt),l=i.map((c,d)=>{var f=oo(oo({},o),{},{x1:c,y1:t,x2:c,y2:t+r,key:"line-".concat(d),index:d});return I.createElement(axe,{option:n,lineItemProps:f,key:"line-".concat(d)})});return I.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function Smt(e){var{horizontalFill:t,fillOpacity:r,x:n,y:i,width:a,height:s,horizontalPoints:o,horizontal:l=!0}=e;if(!l||!t||!t.length||o==null)return null;var c=o.map(f=>Math.round(f+i-i)).sort((f,p)=>f-p);i!==c[0]&&c.unshift(0);var d=c.map((f,p)=>{var m=!c[p+1],x=m?i+s-f:c[p+1]-f;if(x<=0)return null;var v=p%t.length;return I.createElement("rect",{key:"react-".concat(p),y:f,x:n,height:x,width:a,stroke:"none",fill:t[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return I.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Emt(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:i,y:a,width:s,height:o,verticalPoints:l}=e;if(!t||!r||!r.length)return null;var c=l.map(f=>Math.round(f+i-i)).sort((f,p)=>f-p);i!==c[0]&&c.unshift(0);var d=c.map((f,p)=>{var m=!c[p+1],x=m?i+s-f:c[p+1]-f;if(x<=0)return null;var v=p%r.length;return I.createElement("rect",{key:"react-".concat(p),x:f,y:a,width:x,height:o,stroke:"none",fill:r[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return I.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Cmt=(e,t)=>{var{xAxis:r,width:n,height:i,offset:a}=e;return Tpe(c$(oo(oo(oo({},kh),r),{},{ticks:Ipe(r),viewBox:{x:0,y:0,width:n,height:i}})),a.left,a.left+a.width,t)},kmt=(e,t)=>{var{yAxis:r,width:n,height:i,offset:a}=e;return Tpe(c$(oo(oo(oo({},kh),r),{},{ticks:Ipe(r),viewBox:{x:0,y:0,width:n,height:i}})),a.top,a.top+a.height,t)},_mt={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:$o.grid};function sxe(e){var t=$pe(),r=zpe(),n=Upe(),i=oo(oo({},vc(e,_mt)),{},{x:ur(e.x)?e.x:n.left,y:ur(e.y)?e.y:n.top,width:ur(e.width)?e.width:n.width,height:ur(e.height)?e.height:n.height}),{xAxisId:a,yAxisId:s,x:o,y:l,width:c,height:d,syncWithTicks:f,horizontalValues:p,verticalValues:m}=i,x=Pl(),v=br(M=>DJ(M,"xAxis",a,x)),b=br(M=>DJ(M,"yAxis",s,x));if(!df(c)||!df(d)||!ur(o)||!ur(l))return null;var w=i.verticalCoordinatesGenerator||Cmt,_=i.horizontalCoordinatesGenerator||kmt,{horizontalPoints:C,verticalPoints:N}=i;if((!C||!C.length)&&typeof _=="function"){var R=p&&p.length,P=_({yAxis:b?oo(oo({},b),{},{ticks:R?p:b.ticks}):void 0,width:t??c,height:r??d,offset:n},R?!0:f);_I(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(C=P)}if((!N||!N.length)&&typeof w=="function"){var O=m&&m.length,D=w({xAxis:v?oo(oo({},v),{},{ticks:O?m:v.ticks}):void 0,width:t??c,height:r??d,offset:n},O?!0:f);_I(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(N=D)}return I.createElement(sp,{zIndex:i.zIndex},I.createElement("g",{className:"recharts-cartesian-grid"},I.createElement(ymt,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),I.createElement(Smt,cg({},i,{horizontalPoints:C})),I.createElement(Emt,cg({},i,{verticalPoints:N})),I.createElement(bmt,cg({},i,{offset:n,horizontalPoints:C,xAxis:v,yAxis:b})),I.createElement(wmt,cg({},i,{offset:n,verticalPoints:N,xAxis:v,yAxis:b}))))}sxe.displayName="CartesianGrid";var Nmt=["domain","range"],Amt=["domain","range"];function AZ(e,t){if(e==null)return{};var r,n,i=Tmt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Tmt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function TZ(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function oxe(e,t){if(e===t)return!0;var{domain:r,range:n}=e,i=AZ(e,Nmt),{domain:a,range:s}=t,o=AZ(t,Amt);return!TZ(r,a)||!TZ(n,s)?!1:o$(i,o)}var Imt=["dangerouslySetInnerHTML","ticks"],Omt=["id"];function fF(){return fF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fF.apply(null,arguments)}function IZ(e,t){if(e==null)return{};var r,n,i=Pmt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Pmt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Rmt(e){var t=ya(),r=I.useRef(null);return I.useLayoutEffect(()=>{r.current===null?t(Mht(e)):r.current!==e&&t(Fht({prev:r.current,next:e})),r.current=e},[e,t]),I.useLayoutEffect(()=>()=>{r.current&&(t(Lht(r.current)),r.current=null)},[t]),null}var jmt=e=>{var{xAxisId:t,className:r}=e,n=br(ZB),i=Pl(),a="xAxis",s=br(b=>Eb(b,a,t,i)),o=br(b=>Xme(b,a,t,i)),l=br(b=>Vme(b,t)),c=br(b=>Mct(b,t)),d=br(b=>pme(b,t));if(l==null||c==null||d==null)return null;var{dangerouslySetInnerHTML:f,ticks:p}=e,m=IZ(e,Imt),{id:x}=d,v=IZ(d,Omt);return I.createElement(u$,fF({},m,v,{scale:s,x:c.x,y:c.y,width:l.width,height:l.height,className:gi("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:o,axisType:a}))},Dmt={allowDataOverflow:ts.allowDataOverflow,allowDecimals:ts.allowDecimals,allowDuplicatedCategory:ts.allowDuplicatedCategory,angle:ts.angle,axisLine:kh.axisLine,height:ts.height,hide:!1,includeHidden:ts.includeHidden,interval:ts.interval,minTickGap:ts.minTickGap,mirror:ts.mirror,orientation:ts.orientation,padding:ts.padding,reversed:ts.reversed,scale:ts.scale,tick:ts.tick,tickCount:ts.tickCount,tickLine:kh.tickLine,tickSize:kh.tickSize,type:ts.type,xAxisId:0},Mmt=e=>{var t=vc(e,Dmt);return I.createElement(I.Fragment,null,I.createElement(Rmt,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),I.createElement(jmt,t))},lxe=I.memo(Mmt,oxe);lxe.displayName="XAxis";var Fmt=["dangerouslySetInnerHTML","ticks"],Lmt=["id"];function hF(){return hF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hF.apply(null,arguments)}function OZ(e,t){if(e==null)return{};var r,n,i=Bmt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Bmt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Umt(e){var t=ya(),r=I.useRef(null);return I.useLayoutEffect(()=>{r.current===null?t(Bht(e)):r.current!==e&&t(Uht({prev:r.current,next:e})),r.current=e},[e,t]),I.useLayoutEffect(()=>()=>{r.current&&(t($ht(r.current)),r.current=null)},[t]),null}var $mt=e=>{var{yAxisId:t,className:r,width:n,label:i}=e,a=I.useRef(null),s=I.useRef(null),o=br(ZB),l=Pl(),c=ya(),d="yAxis",f=br(R=>Eb(R,d,t,l)),p=br(R=>qme(R,t)),m=br(R=>Lct(R,t)),x=br(R=>Xme(R,d,t,l)),v=br(R=>mme(R,t));if(I.useLayoutEffect(()=>{if(!(n!=="auto"||!p||s$(i)||I.isValidElement(i)||v==null)){var R=a.current;if(R){var P=R.getCalculatedWidth();Math.round(p.width)!==Math.round(P)&&c(zht({id:t,width:P}))}}},[x,p,c,i,t,n,v]),p==null||m==null||v==null)return null;var{dangerouslySetInnerHTML:b,ticks:w}=e,_=OZ(e,Fmt),{id:C}=v,N=OZ(v,Lmt);return I.createElement(u$,hF({},_,N,{ref:a,labelRef:s,scale:f,x:m.x,y:m.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:p.width,height:p.height,className:gi("recharts-".concat(d," ").concat(d),r),viewBox:o,ticks:x,axisType:d}))},zmt={allowDataOverflow:rs.allowDataOverflow,allowDecimals:rs.allowDecimals,allowDuplicatedCategory:rs.allowDuplicatedCategory,angle:rs.angle,axisLine:kh.axisLine,hide:!1,includeHidden:rs.includeHidden,interval:rs.interval,minTickGap:rs.minTickGap,mirror:rs.mirror,orientation:rs.orientation,padding:rs.padding,reversed:rs.reversed,scale:rs.scale,tick:rs.tick,tickCount:rs.tickCount,tickLine:kh.tickLine,tickSize:kh.tickSize,type:rs.type,width:rs.width,yAxisId:0},Hmt=e=>{var t=vc(e,zmt);return I.createElement(I.Fragment,null,I.createElement(Umt,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),I.createElement($mt,t))},cxe=I.memo(Hmt,oxe);cxe.displayName="YAxis";var Wmt=(e,t)=>t,d$=st([Wmt,ii,fme,Ga,dge,ap,Jut,ws],adt),f$=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},uxe=fu("mouseClick"),dxe=bC();dxe.startListening({actionCreator:uxe,effect:(e,t)=>{var r=e.payload,n=d$(t.getState(),f$(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(Jct({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var pF=fu("mouseMove"),fxe=bC(),oN=null;fxe.startListening({actionCreator:pF,effect:(e,t)=>{var r=e.payload;oN!==null&&cancelAnimationFrame(oN);var n=f$(r);oN=requestAnimationFrame(()=>{var i=t.getState(),a=KU(i,i.tooltip.settings.shared);if(a==="axis"){var s=d$(i,n);(s==null?void 0:s.activeIndex)!=null?t.dispatch(nge({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(rge())}oN=null})}});var PZ={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},hxe=Ol({name:"rootProps",initialState:PZ,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:PZ.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),Vmt=hxe.reducer,{updateOptions:qmt}=hxe.actions,pxe=Ol({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:mAt}=pxe.actions,Gmt=pxe.reducer,mxe=fu("keyDown"),gxe=fu("focus"),h$=bC();h$.startListening({actionCreator:mxe,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=XU(i,kb(r),TC(r),jC(r)),o=s==null?-1:Number(s);if(!(!Number.isFinite(o)||o<0)){var l=ap(r);if(a==="Enter"){var c=GI(r,"axis","hover",String(i.index));t.dispatch(sF({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:c}));return}var d=zct(r),f=d==="left-to-right"?1:-1,p=a==="ArrowRight"?1:-1,m=o+p*f;if(!(l==null||m>=l.length||m<0)){var x=GI(r,"axis","hover",String(m));t.dispatch(sF({active:!0,activeIndex:m.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}}});h$.startListening({actionCreator:gxe,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var a="0",s=GI(r,"axis","hover",String(a));t.dispatch(sF({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:s}))}}}});var Pc=fu("externalEvent"),xxe=bC(),dM=new Map;xxe.startListening({actionCreator:Pc,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var i=n.type,a=dM.get(i);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var o=t.getState(),l={activeCoordinate:Fut(o),activeDataKey:mge(o),activeIndex:Fy(o),activeLabel:pge(o),activeTooltipIndex:Fy(o),isTooltipActive:Lut(o)};r(l,n)}finally{dM.delete(i)}});dM.set(i,s)}}});var Kmt=st([Cb],e=>e.tooltipItemPayloads),Xmt=st([Kmt,PC,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var i=e.find(o=>o.settings.dataKey===n);if(i!=null){var{positions:a}=i;if(a!=null){var s=t(a,r);return s}}}),vxe=fu("touchMove"),yxe=bC();yxe.startListening({actionCreator:vxe,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),i=KU(n,n.tooltip.settings.shared);if(i==="axis"){var a=d$(n,f$({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(nge({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var s,o=r.touches[0];if(document.elementFromPoint==null)return;var l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute(Vnt),d=(s=l.getAttribute(qnt))!==null&&s!==void 0?s:void 0,f=Xmt(t.getState(),c,d);t.dispatch(tge({activeDataKey:d,activeIndex:c,activeCoordinate:f}))}}}});var Ymt=epe({brush:P0t,cartesianAxis:Hht,chartData:Mdt,errorBars:npt,graphicalItems:Tht,layout:_nt,legend:jit,options:Odt,polarAxis:eht,polarOptions:Gmt,referenceElements:B0t,rootProps:Vmt,tooltip:Zct,zIndex:ydt}),Qmt=function(t){return Qrt({reducer:Ymt,preloadedState:t,middleware:r=>{var n;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((n="es6")!==null&&n!==void 0?n:"")}).concat([dxe.middleware,fxe.middleware,h$.middleware,xxe.middleware,yxe.middleware])},enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(mpe({type:"raf"}))},devTools:xb.devToolsEnabled})};function Jmt(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,i=Pl(),a=I.useRef(null);if(i)return r;a.current==null&&(a.current=Qmt(t));var s=zB;return I.createElement(Rpt,{context:s,store:a.current},r)}function Zmt(e){var{layout:t,margin:r}=e,n=ya(),i=Pl();return I.useEffect(()=>{i||(n(Ent(t)),n(Snt(r)))},[n,i,t,r]),null}var egt=I.memo(Zmt,o$);function tgt(e){var t=ya();return I.useEffect(()=>{t(qmt(e))},[t,e]),null}function RZ(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",i=Gge("".concat(n).concat(t)),a=ya();return I.useLayoutEffect(()=>(a(xdt({zIndex:t,elementId:i,isPanorama:r})),()=>{a(vdt({zIndex:t,isPanorama:r}))}),[a,t,i,r]),I.createElement("g",{id:i})}function jZ(e){var{children:t,isPanorama:r}=e,n=br(odt);if(!n||n.length===0)return t;var i=n.filter(s=>s<0),a=n.filter(s=>s>0);return I.createElement(I.Fragment,null,i.map(s=>I.createElement(RZ,{key:s,zIndex:s,isPanorama:r})),t,a.map(s=>I.createElement(RZ,{key:s,zIndex:s,isPanorama:r})))}var rgt=["children"];function ngt(e,t){if(e==null)return{};var r,n,i=igt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function igt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function tO(){return tO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tO.apply(null,arguments)}var agt={width:"100%",height:"100%",display:"block"},sgt=I.forwardRef((e,t)=>{var r=$pe(),n=zpe(),i=Ype();if(!df(r)||!df(n))return null;var{children:a,otherAttributes:s,title:o,desc:l}=e,c,d;return s!=null&&(typeof s.tabIndex=="number"?c=s.tabIndex:c=i?0:void 0,typeof s.role=="string"?d=s.role:d=i?"application":void 0),I.createElement(she,tO({},s,{title:o,desc:l,role:d,tabIndex:c,width:r,height:n,style:agt,ref:t}),a)}),ogt=e=>{var{children:t}=e,r=br(G3);if(!r)return null;var{width:n,height:i,y:a,x:s}=r;return I.createElement(she,{width:n,height:i,x:s,y:a},t)},DZ=I.forwardRef((e,t)=>{var{children:r}=e,n=ngt(e,rgt),i=Pl();return i?I.createElement(ogt,null,I.createElement(jZ,{isPanorama:!0},r)):I.createElement(sgt,tO({ref:t},n),I.createElement(jZ,{isPanorama:!1},r))});function lgt(){var e=ya(),[t,r]=I.useState(null),n=br(Wnt);return I.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),a=i.width/t.offsetWidth;xa(a)&&a!==n&&e(knt(a))}},[t,e,n]),r}function MZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function cgt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MZ(Object(r),!0).forEach(function(n){ugt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ugt(e,t,r){return(t=dgt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dgt(e){var t=fgt(e,"string");return typeof t=="symbol"?t:t+""}function fgt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function px(){return px=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},px.apply(null,arguments)}var hgt=()=>(Vdt(),null);function rO(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var pgt=I.forwardRef((e,t)=>{var r,n,i=I.useRef(null),[a,s]=I.useState({containerWidth:rO((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:rO((n=e.style)===null||n===void 0?void 0:n.height)}),o=I.useCallback((c,d)=>{s(f=>{var p=Math.round(c),m=Math.round(d);return f.containerWidth===p&&f.containerHeight===m?f:{containerWidth:p,containerHeight:m}})},[]),l=I.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null&&typeof ResizeObserver<"u"){var{width:d,height:f}=c.getBoundingClientRect();o(d,f);var p=x=>{var{width:v,height:b}=x[0].contentRect;o(v,b)},m=new ResizeObserver(p);m.observe(c),i.current=m}},[t,o]);return I.useEffect(()=>()=>{var c=i.current;c!=null&&c.disconnect()},[o]),I.createElement(I.Fragment,null,I.createElement(Y3,{width:a.containerWidth,height:a.containerHeight}),I.createElement("div",px({ref:l},e)))}),mgt=I.forwardRef((e,t)=>{var{width:r,height:n}=e,[i,a]=I.useState({containerWidth:rO(r),containerHeight:rO(n)}),s=I.useCallback((l,c)=>{a(d=>{var f=Math.round(l),p=Math.round(c);return d.containerWidth===f&&d.containerHeight===p?d:{containerWidth:f,containerHeight:p}})},[]),o=I.useCallback(l=>{if(typeof t=="function"&&t(l),l!=null){var{width:c,height:d}=l.getBoundingClientRect();s(c,d)}},[t,s]);return I.createElement(I.Fragment,null,I.createElement(Y3,{width:i.containerWidth,height:i.containerHeight}),I.createElement("div",px({ref:o},e)))}),ggt=I.forwardRef((e,t)=>{var{width:r,height:n}=e;return I.createElement(I.Fragment,null,I.createElement(Y3,{width:r,height:n}),I.createElement("div",px({ref:t},e)))}),xgt=I.forwardRef((e,t)=>{var{width:r,height:n}=e;return $h(r)||$h(n)?I.createElement(mgt,px({},e,{ref:t})):I.createElement(ggt,px({},e,{ref:t}))});function vgt(e){return e===!0?pgt:xgt}var ygt=I.forwardRef((e,t)=>{var{children:r,className:n,height:i,onClick:a,onContextMenu:s,onDoubleClick:o,onMouseDown:l,onMouseEnter:c,onMouseLeave:d,onMouseMove:f,onMouseUp:p,onTouchEnd:m,onTouchMove:x,onTouchStart:v,style:b,width:w,responsive:_,dispatchTouchEvents:C=!0}=e,N=I.useRef(null),R=ya(),[P,O]=I.useState(null),[D,M]=I.useState(null),B=lgt(),U=eU(),H=(U==null?void 0:U.width)>0?U.width:w,Z=(U==null?void 0:U.height)>0?U.height:i,ee=I.useCallback(ne=>{B(ne),typeof t=="function"&&t(ne),O(ne),M(ne),ne!=null&&(N.current=ne)},[B,t,O,M]),V=I.useCallback(ne=>{R(uxe(ne)),R(Pc({handler:a,reactEvent:ne}))},[R,a]),te=I.useCallback(ne=>{R(pF(ne)),R(Pc({handler:c,reactEvent:ne}))},[R,c]),se=I.useCallback(ne=>{R(rge()),R(Pc({handler:d,reactEvent:ne}))},[R,d]),Q=I.useCallback(ne=>{R(pF(ne)),R(Pc({handler:f,reactEvent:ne}))},[R,f]),X=I.useCallback(()=>{R(gxe())},[R]),fe=I.useCallback(ne=>{R(mxe(ne.key))},[R]),Se=I.useCallback(ne=>{R(Pc({handler:s,reactEvent:ne}))},[R,s]),Y=I.useCallback(ne=>{R(Pc({handler:o,reactEvent:ne}))},[R,o]),ce=I.useCallback(ne=>{R(Pc({handler:l,reactEvent:ne}))},[R,l]),W=I.useCallback(ne=>{R(Pc({handler:p,reactEvent:ne}))},[R,p]),G=I.useCallback(ne=>{R(Pc({handler:v,reactEvent:ne}))},[R,v]),ie=I.useCallback(ne=>{C&&R(vxe(ne)),R(Pc({handler:x,reactEvent:ne}))},[R,C,x]),Ce=I.useCallback(ne=>{R(Pc({handler:m,reactEvent:ne}))},[R,m]),re=vgt(_);return I.createElement(Sge.Provider,{value:P},I.createElement(ltt.Provider,{value:D},I.createElement(re,{width:H??(b==null?void 0:b.width),height:Z??(b==null?void 0:b.height),className:gi("recharts-wrapper",n),style:cgt({position:"relative",cursor:"default",width:H,height:Z},b),onClick:V,onContextMenu:Se,onDoubleClick:Y,onFocus:X,onKeyDown:fe,onMouseDown:ce,onMouseEnter:te,onMouseLeave:se,onMouseMove:Q,onMouseUp:W,onTouchEnd:Ce,onTouchMove:ie,onTouchStart:G,ref:ee},I.createElement(hgt,null),r)))}),bgt=["width","height","responsive","children","className","style","compact","title","desc"];function wgt(e,t){if(e==null)return{};var r,n,i=Sgt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Sgt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Egt=I.forwardRef((e,t)=>{var{width:r,height:n,responsive:i,children:a,className:s,style:o,compact:l,title:c,desc:d}=e,f=wgt(e,bgt),p=Bh(f);return l?I.createElement(I.Fragment,null,I.createElement(Y3,{width:r,height:n}),I.createElement(DZ,{otherAttributes:p,title:c,desc:d},a)):I.createElement(ygt,{className:s,style:o,width:r,height:n,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},I.createElement(DZ,{otherAttributes:p,title:c,desc:d,ref:t},I.createElement($0t,null,a)))});function mF(){return mF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mF.apply(null,arguments)}var Cgt={top:5,right:5,bottom:5,left:5},kgt={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Cgt,reverseStackOrder:!1,syncMethod:"index",responsive:!1},_gt=I.forwardRef(function(t,r){var n,i=vc(t.categoricalChartProps,kgt),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,categoricalChartProps:c}=t,d={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,eventEmitter:void 0};return I.createElement(Jmt,{preloadedState:{options:d},reduxStoreName:(n=c.id)!==null&&n!==void 0?n:a},I.createElement(O0t,{chartData:c.data}),I.createElement(egt,{layout:i.layout,margin:i.margin}),I.createElement(tgt,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),I.createElement(Egt,mF({},i,{ref:r})))}),Ngt=["axis","item"],Agt=I.forwardRef((e,t)=>I.createElement(_gt,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Ngt,tooltipPayloadSearcher:Tdt,categoricalChartProps:e,ref:t}));const Tgt=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(e),Igt=({data:e,type:t})=>{const r=I.useMemo(()=>{if(!e||e.length===0)return[];if(t==="jobs"){const a=e.reduce((s,o)=>{const l=new Date(o.created_at),c=l.toLocaleDateString("en-US",{month:"short",year:"numeric"}),d=`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}`;return s[d]||(s[d]={name:c,value:0,sortKey:d}),s[d].value+=Number(o.total_value||0),s},{});return Object.values(a).sort((s,o)=>s.sortKey.localeCompare(o.sortKey))}if(t==="installers")return e.filter(a=>Number(a.total_labor_value)>0).map(a=>({name:a.installer_name,value:Number(a.total_labor_value),color:a.color||"#4f46e5"})).sort((a,s)=>s.value-a.value);if(t==="products"){const a=e.reduce((s,o)=>{const l=o.manufacturer_name||"Unknown";return s[l]||(s[l]={name:l,value:0}),s[l].value+=1,s},{});return Object.values(a).sort((s,o)=>o.value-s.value).slice(0,15)}return[]},[e,t]);if(r.length===0)return null;const n=t==="products"?"Count":"Value",i="#4f46e5";return u.jsxs("div",{className:"h-80 w-full bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-6 print:break-inside-avoid",children:[u.jsxs("h3",{className:"text-sm font-bold text-gray-500 uppercase mb-4",children:[t==="jobs"&&"Revenue Trend (Based on Filters)",t==="installers"&&"Labor Value Distribution",t==="products"&&"Variants by Manufacturer (Top 15)"]}),u.jsx(git,{width:"100%",height:"100%",children:u.jsxs(Agt,{data:r,margin:{top:5,right:30,left:20,bottom:5},children:[u.jsx(sxe,{strokeDasharray:"3 3",vertical:!1}),u.jsx(lxe,{dataKey:"name",tick:{fontSize:12},interval:0,angle:r.length>10?-45:0,textAnchor:r.length>10?"end":"middle",height:r.length>10?60:30}),u.jsx(cxe,{tickFormatter:a=>t==="products"?a:`$${a/1e3}k`,tick:{fontSize:12}}),u.jsx(Zdt,{formatter:a=>[t==="products"?a:Tgt(a),n]}),u.jsx(exe,{dataKey:"value",fill:i,radius:[4,4,0,0],children:t==="installers"&&r.map((a,s)=>u.jsx(i$,{fill:a.color||i},`cell-${s}`))})]})})]})},FZ=e=>e?new Date(e).toLocaleDateString():"-",Ogt=({title:e,dateRange:t})=>{const{systemBranding:r}=Kr(),n=(r==null?void 0:r.logoUrl)||"/logo.png";return u.jsx("div",{className:"hidden print:flex flex-col mb-8 border-b-2 border-gray-800 pb-4",children:u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("img",{src:n,alt:"Logo",className:"h-16 object-contain"}),u.jsxs("div",{className:"text-right",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e}),u.jsxs("p",{className:"text-gray-600 text-sm",children:["Generated: ",new Date().toLocaleDateString()]}),t&&u.jsxs("p",{className:"text-gray-600 text-sm",children:["Period: ",t]})]})]})})},Pgt=["unit_cost","retail_price","total_value","material_cost","labor_cost","appointment_count","total_labor_value","carton_size"];function Rgt(){const{vendors:e,products:t,fetchProducts:r}=Kr(),[n,i]=I.useState("products"),[a,s]=I.useState(!1),[o,l]=I.useState(null),[c,d]=I.useState([]),[f,p]=I.useState(null),[m,x]=I.useState(!1),v=gu(),[b,w]=I.useState(!1),[_,C]=I.useState(!0),N=new Date,R=new Date(N.getFullYear(),N.getMonth(),1),[P,O]=I.useState(R.toISOString().split("T")[0]),[D,M]=I.useState(N.toISOString().split("T")[0]),[B,U]=I.useState(""),[H,Z]=I.useState(""),[ee,V]=I.useState(null),[te,se]=I.useState([]),[Q,X]=I.useState(!1),[fe]=I.useState("All"),[Se]=I.useState(""),Y=async()=>{s(!0),l(null),d([]);try{if(n==="products"){const we=await yWe({includeDiscontinued:!1,manufacturerId:B,productType:H});d(we)}else if(n==="jobs"){const we=await bWe({startDate:P,endDate:D,status:fe});d(we)}else if(n==="installers"){const we=await wWe({startDate:P,endDate:D,installerId:Se});d(we)}}catch(we){console.error(we),l("Failed to load report data. Please try again.")}finally{s(!1)}};I.useEffect(()=>{d([]),l(null),se([])},[n]);const ce=()=>{Y()},W=()=>{window.print()},G=()=>{const we=n==="products"?"PriceList":n==="jobs"?"JobPipeline":"InstallerActivity";Ket(Ce(),we)},ie=we=>{let q="asc";ee&&ee.key===we&&ee.direction==="asc"&&(q="desc"),V({key:we,direction:q})},Ce=()=>ee?[...c].sort((we,q)=>{const Ae=we[ee.key],Pe=q[ee.key];if(Ae===null)return 1;if(Pe===null)return-1;if(Pgt.includes(ee.key)){const He=parseFloat(Ae)||0,je=parseFloat(Pe)||0;return ee.direction==="asc"?He-je:je-He}return ee.direction==="asc"?String(Ae).localeCompare(String(Pe)):String(Pe).localeCompare(String(Ae))}):c,re=we=>{se(q=>q.includes(we)?q.filter(Ae=>Ae!==we):[...q,we])},ne=we=>!te.includes(we),ge=async we=>{if(n==="jobs")v(`/projects/${we.id}`);else if(n==="installers")v(`/installers/${we.id}`);else if(n==="products"){t.length===0&&await r();const q=t.find(Ae=>Ae.id===we.product_id);q&&(p(q),x(!0))}};return u.jsxs("div",{className:"flex h-full bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden",children:[u.jsxs("div",{className:"w-64 bg-surface-container-low border-r border-outline/10 flex-shrink-0 flex flex-col print:hidden",children:[u.jsx("div",{className:"p-6 border-b border-outline/10",children:u.jsx("h2",{className:"text-lg font-bold text-text-primary",children:"Reports"})}),u.jsxs("nav",{className:"flex-1 p-4 space-y-1",children:[u.jsxs("button",{onClick:()=>i("products"),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-full transition-colors ${n==="products"?"bg-primary-container text-primary font-bold":"text-text-secondary hover:bg-surface-container-highest hover:text-text-primary"}`,children:[u.jsx(Zc,{className:"mr-3 h-5 w-5"}),"Price List / Inventory"]}),u.jsxs("button",{onClick:()=>i("jobs"),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-full transition-colors ${n==="jobs"?"bg-primary-container text-primary font-bold":"text-text-secondary hover:bg-surface-container-highest hover:text-text-primary"}`,children:[u.jsx(Mh,{className:"mr-3 h-5 w-5"}),"Job Pipeline"]}),u.jsxs("button",{onClick:()=>i("installers"),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-full transition-colors ${n==="installers"?"bg-primary-container text-primary font-bold":"text-text-secondary hover:bg-surface-container-highest hover:text-text-primary"}`,children:[u.jsx(rx,{className:"mr-3 h-5 w-5"}),"Installer Activity"]})]})]}),u.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-surface print:block print:h-auto print:overflow-visible",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-outline/10 bg-surface-container-high flex flex-wrap items-end justify-between gap-4 print:hidden",children:[u.jsxs("div",{className:"flex items-end gap-3",children:[n==="products"?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-xs text-text-secondary font-bold uppercase mb-1",children:"Manufacturer"}),u.jsxs("select",{className:"h-10 border border-outline/10 rounded-lg px-3 text-sm bg-surface-container-highest text-text-primary min-w-[160px] focus:outline-none focus:ring-2 focus:ring-primary/50",value:B,onChange:we=>U(we.target.value),children:[u.jsx("option",{value:"",children:"All Manufacturers"}),e.filter(we=>we.vendorType!=="Supplier").sort((we,q)=>we.name.localeCompare(q.name)).map(we=>u.jsx("option",{value:we.id,children:we.name},we.id))]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-xs text-text-secondary font-bold uppercase mb-1",children:"Product Type"}),u.jsxs("select",{className:"h-10 border border-outline/10 rounded-lg px-3 text-sm bg-surface-container-highest text-text-primary min-w-[140px] focus:outline-none focus:ring-2 focus:ring-primary/50",value:H,onChange:we=>Z(we.target.value),children:[u.jsx("option",{value:"",children:"All Types"}),dy.map(we=>u.jsx("option",{value:we,children:we},we))]})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-xs text-text-secondary font-bold uppercase mb-1",children:"From"}),u.jsx("input",{type:"date",className:"h-10 border border-outline/10 rounded-lg px-3 text-sm bg-surface-container-highest text-text-primary focus:outline-none focus:ring-2 focus:ring-primary/50",value:P,onChange:we=>O(we.target.value)})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-xs text-text-secondary font-bold uppercase mb-1",children:"To"}),u.jsx("input",{type:"date",className:"h-10 border border-outline/10 rounded-lg px-3 text-sm bg-surface-container-highest text-text-primary focus:outline-none focus:ring-2 focus:ring-primary/50",value:D,onChange:we=>M(we.target.value)})]})]}),u.jsxs("button",{onClick:ce,className:"h-10 flex items-center gap-2 px-6 bg-primary text-on-primary text-sm font-bold rounded-full hover:bg-primary-hover shadow-md active:scale-95 transition-all",title:"Run or Refresh Report",children:[u.jsx(z8e,{className:"w-4 h-4"}),"Run"]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"relative",children:[u.jsxs("button",{onClick:()=>X(!Q),className:"h-10 flex items-center gap-2 px-4 bg-surface-container-highest text-text-secondary border border-outline/10 rounded-full hover:bg-surface-container-high shadow-sm text-sm font-medium transition-colors",children:[u.jsx(V8e,{className:"h-4 w-4"}),"Columns"]}),Q&&u.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-surface-container-high rounded-xl shadow-xl border border-outline/10 z-50 p-2",children:[u.jsx("div",{className:"text-xs font-bold text-text-secondary uppercase px-2 mb-2",children:"Toggle Columns"}),u.jsxs("div",{className:"space-y-1",children:[n==="products"&&u.jsx(u.Fragment,{children:["Manufacturer","Product","Style_Size","SKU","Carton","Retail"].map(we=>u.jsxs("label",{className:"flex items-center px-2 py-2 hover:bg-surface-container-highest rounded-lg cursor-pointer text-text-primary",children:[u.jsx("input",{type:"checkbox",checked:ne(we.toLowerCase()),onChange:()=>re(we.toLowerCase()),className:"rounded border-outline/20 text-primary mr-2 bg-surface-container-low"}),u.jsx("span",{className:"text-sm",children:we.replace("_"," / ")})]},we))}),n==="jobs"&&u.jsx(u.Fragment,{children:["Date","Customer","Project","Status","Total"].map(we=>u.jsxs("label",{className:"flex items-center px-2 py-2 hover:bg-surface-container-highest rounded-lg cursor-pointer text-text-primary",children:[u.jsx("input",{type:"checkbox",checked:ne(we.toLowerCase()),onChange:()=>re(we.toLowerCase()),className:"rounded border-outline/20 text-primary mr-2 bg-surface-container-low"}),u.jsx("span",{className:"text-sm",children:we})]},we))}),n==="installers"&&u.jsx(u.Fragment,{children:["Installer","Jobs","Labor"].map(we=>u.jsxs("label",{className:"flex items-center px-2 py-2 hover:bg-surface-container-highest rounded-lg cursor-pointer text-text-primary",children:[u.jsx("input",{type:"checkbox",checked:ne(we.toLowerCase()),onChange:()=>re(we.toLowerCase()),className:"rounded border-outline/20 text-primary mr-2 bg-surface-container-low"}),u.jsx("span",{className:"text-sm",children:we})]},we))})]}),u.jsx("div",{className:"fixed inset-0 z-[-1]",onClick:()=>X(!1)})]})]}),u.jsxs("div",{className:"flex items-center border border-outline/10 rounded-full bg-surface-container-highest shadow-sm overflow-hidden h-10",children:[c.length>0&&u.jsx("button",{onClick:()=>C(!_),className:`p-3 border-r border-outline/10 hover:bg-surface-container-high transition-colors ${_?"text-primary bg-primary-container":"text-text-secondary"}`,title:_?"Hide Chart":"Show Chart",children:u.jsx(p8e,{className:"h-4 w-4"})}),u.jsx("button",{onClick:()=>w(!b),className:`p-3 hover:bg-surface-container-high transition-colors ${b?"text-error bg-error-container":"text-text-secondary"}`,title:b?"Hide Costs":"Show Costs",children:u.jsx(R7,{className:"h-4 w-4"})})]}),c.length>0&&u.jsxs("button",{onClick:G,className:"h-10 flex items-center gap-2 px-4 bg-surface-container-highest text-text-secondary border border-outline/10 rounded-full hover:bg-surface-container-high shadow-sm text-sm font-medium",children:[u.jsx(I4,{className:"h-4 w-4"}),"Export CSV"]}),u.jsxs("button",{onClick:W,className:"h-10 flex items-center gap-2 px-4 bg-secondary text-on-secondary rounded-full hover:bg-secondary-hover shadow-sm text-sm font-medium ml-2",children:[u.jsx(cy,{className:"h-4 w-4"}),"Print"]})]})]}),u.jsxs("div",{className:"flex-1 overflow-auto p-8 print:p-0 print:overflow-visible bg-surface",children:[u.jsx(Ogt,{title:n==="products"?"Product Price List":n==="jobs"?"Job Pipeline Report":"Installer Activity Report",dateRange:P&&D?`${FZ(P)} - ${FZ(D)}`:void 0}),o&&u.jsxs("div",{className:"mb-4 p-4 bg-error-container border-l-4 border-error text-error rounded-r-lg",children:[u.jsx("p",{className:"font-bold",children:"Error"}),u.jsx("p",{children:o})]}),a?u.jsx("div",{className:"flex justify-center items-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):u.jsxs("div",{className:"min-w-full",children:[_&&c.length>0&&u.jsx(Igt,{data:Ce(),type:n}),c.length>0&&n==="products"&&u.jsx(Xet,{data:Ce(),sortConfig:ee,onSort:ie,hiddenColumns:te,showCost:b,onRowClick:ge}),c.length>0&&n==="jobs"&&u.jsx(Qet,{data:Ce(),sortConfig:ee,onSort:ie,hiddenColumns:te,showCost:b,onRowClick:ge}),c.length>0&&n==="installers"&&u.jsx(Jet,{data:Ce(),sortConfig:ee,onSort:ie,hiddenColumns:te,onRowClick:ge}),c.length===0&&!o&&u.jsx("div",{className:"text-center py-12 text-text-tertiary italic border-2 border-dashed border-outline/20 rounded-xl bg-surface-container-low",children:'No data generated. Adjust filters and click "Run Report".'})]})]})]}),m&&f&&u.jsx(I9,{isOpen:m,onClose:()=>x(!1),product:f})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var nO={};nO.version="0.18.5";var bxe=1252,jgt=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],p$={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},m$=function(e){jgt.indexOf(e)!=-1&&(bxe=p$[0]=e)};function Dgt(){m$(1252)}var Qu=function(e){m$(e)};function g$(){Qu(1200),Dgt()}function LZ(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function Mgt(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function wxe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var n2=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?Mgt(e.slice(2)):t==254&&r==255?wxe(e.slice(2)):t==65279?e.slice(1):e},lN=function(t){return String.fromCharCode(t)},BZ=function(t){return String.fromCharCode(t)},XS,u0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function YS(e){for(var t="",r=0,n=0,i=0,a=0,s=0,o=0,l=0,c=0;c<e.length;)r=e.charCodeAt(c++),a=r>>2,n=e.charCodeAt(c++),s=(r&3)<<4|n>>4,i=e.charCodeAt(c++),o=(n&15)<<2|i>>6,l=i&63,isNaN(n)?o=l=64:isNaN(i)&&(l=64),t+=u0.charAt(a)+u0.charAt(s)+u0.charAt(o)+u0.charAt(l);return t}function uc(e){var t="",r=0,n=0,i=0,a=0,s=0,o=0,l=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<e.length;)a=u0.indexOf(e.charAt(c++)),s=u0.indexOf(e.charAt(c++)),r=a<<2|s>>4,t+=String.fromCharCode(r),o=u0.indexOf(e.charAt(c++)),n=(s&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),l=u0.indexOf(e.charAt(c++)),i=(o&3)<<6|l,l!==64&&(t+=String.fromCharCode(i));return t}var pn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),op=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function F0(e){return pn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function UZ(e){return pn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Xl=function(t){return pn?op(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function xP(e){if(typeof ArrayBuffer>"u")return Xl(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function am(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Fgt(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function x$(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return x$(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var fs=pn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:op(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),i=0;for(t=0,r=0;t<e.length;r+=i,++t)if(i=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function Lgt(e){for(var t=[],r=0,n=e.length+250,i=F0(e.length+255),a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s<128)i[r++]=s;else if(s<2048)i[r++]=192|s>>6&31,i[r++]=128|s&63;else if(s>=55296&&s<57344){s=(s&1023)+64;var o=e.charCodeAt(++a)&1023;i[r++]=240|s>>8&7,i[r++]=128|s>>2&63,i[r++]=128|o>>6&15|(s&3)<<4,i[r++]=128|o&63}else i[r++]=224|s>>12&15,i[r++]=128|s>>6&63,i[r++]=128|s&63;r>n&&(t.push(i.slice(0,r)),r=0,i=F0(65535),n=65530)}return t.push(i.slice(0,r)),fs(t)}var Ho=/\u0000/g,i2=/[\u0001-\u0006]/g;function Iv(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Ju(e,t){var r=""+e;return r.length>=t?r:ea("0",t-r.length)+r}function v$(e,t){var r=""+e;return r.length>=t?r:ea(" ",t-r.length)+r}function iO(e,t){var r=""+e;return r.length>=t?r:r+ea(" ",t-r.length)}function Bgt(e,t){var r=""+Math.round(e);return r.length>=t?r:ea("0",t-r.length)+r}function Ugt(e,t){var r=""+e;return r.length>=t?r:ea("0",t-r.length)+r}var $Z=Math.pow(2,32);function L1(e,t){if(e>$Z||e<-$Z)return Bgt(e,t);var r=Math.round(e);return Ugt(r,t)}function aO(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var zZ=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],fM=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function $gt(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Rr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},HZ={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},zgt={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function sO(e,t,r){for(var n=e<0?-1:1,i=e*n,a=0,s=1,o=0,l=1,c=0,d=0,f=Math.floor(i);c<t&&(f=Math.floor(i),o=f*s+a,d=f*c+l,!(i-f<5e-8));)i=1/(i-f),a=s,s=o,l=c,c=d;if(d>t&&(c>t?(d=l,o=a):(d=c,o=s)),!r)return[0,n*o,d];var p=Math.floor(n*o/d);return[p,n*o-p*d,d]}function ug(e,t,r){if(e>2958465||e<0)return null;var n=e|0,i=Math.floor(86400*(e-n)),a=0,s=[],o={D:n,T:i,u:86400*(e-n)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++n,++o.D)),n===60)s=r?[1317,10,29]:[1900,2,29],a=3;else if(n===0)s=r?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),s=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),n<60&&(a=(a+6)%7),r&&(a=Kgt(l,s))}return o.y=s[0],o.m=s[1],o.d=s[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=a,o}var Sxe=new Date(1899,11,31,0,0,0),Hgt=Sxe.getTime(),Wgt=new Date(1900,2,1,0,0,0);function Exe(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=Wgt&&(r+=24*60*60*1e3),(r-(Hgt+(e.getTimezoneOffset()-Sxe.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function y$(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Vgt(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function qgt(e){var t=e<0?12:11,r=y$(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Ggt(e){var t=y$(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function QS(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=qgt(e):t===10?r=e.toFixed(10).substr(0,12):r=Ggt(e),y$(Vgt(r.toUpperCase()))}function mx(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):QS(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return pu(14,Exe(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Kgt(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function Xgt(e,t,r,n){var i="",a=0,s=0,o=r.y,l,c=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(t.length){case 1:case 2:l=r.m,c=t.length;break;case 3:return fM[r.m-1][1];case 5:return fM[r.m-1][0];default:return fM[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:l=r.d,c=t.length;break;case 3:return zZ[r.q][0];default:return zZ[r.q][1]}break;case 104:switch(t.length){case 1:case 2:l=1+(r.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:l=r.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:l=r.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Ju(r.S,t.length):(n>=2?s=n===3?1e3:100:s=n===1?10:1,a=Math.round(s*(r.S+r.u)),a>=60*s&&(a=0),t==="s"?a===0?"0":""+a/s:(i=Ju(a,2+n),t==="ss"?i.substr(0,2):"."+i.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}c=t.length===3?1:2;break;case 101:l=o,c=1;break}var d=c>0?Ju(l,c):"";return d}function d0(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var Cxe=/%/g;function Ygt(e,t,r){var n=t.replace(Cxe,""),i=t.length-n.length;return _h(e,n,r*Math.pow(10,2*i))+ea("%",i)}function Qgt(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return _h(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function kxe(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+kxe(e,-t);var i=e.indexOf(".");i===-1&&(i=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%i;if(a<0&&(a+=i),r=(t/Math.pow(10,a)).toPrecision(n+1+(i+a)%i),r.indexOf("e")===-1){var s=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+a):r+="E+"+(s-a);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,i)+"."+r.substr(2+i),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,d){return l+c+d.substr(0,(i+a)%i)+"."+d.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var _xe=/# (\?+)( ?)\/( ?)(\d+)/;function Jgt(e,t,r){var n=parseInt(e[4],10),i=Math.round(t*n),a=Math.floor(i/n),s=i-a*n,o=n;return r+(a===0?"":""+a)+" "+(s===0?ea(" ",e[1].length+1+e[4].length):v$(s,e[1].length)+e[2]+"/"+e[3]+Ju(o,e[4].length))}function Zgt(e,t,r){return r+(t===0?"":""+t)+ea(" ",e[1].length+2+e[4].length)}var Nxe=/^#*0*\.([0#]+)/,Axe=/\).*[0#]/,Txe=/\(###\) ###\\?-####/;function Do(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function WZ(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function VZ(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function ext(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function txt(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Rc(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Axe)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Rc("n",n,r):"("+Rc("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Qgt(e,t,r);if(t.indexOf("%")!==-1)return Ygt(e,t,r);if(t.indexOf("E")!==-1)return kxe(t,r);if(t.charCodeAt(0)===36)return"$"+Rc(e,t.substr(t.charAt(1)==" "?2:1),r);var i,a,s,o,l=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+L1(l,t.length);if(t.match(/^[#?]+$/))return i=L1(r,0),i==="0"&&(i=""),i.length>t.length?i:Do(t.substr(0,t.length-i.length))+i;if(a=t.match(_xe))return Jgt(a,l,c);if(t.match(/^#+0+$/))return c+L1(l,t.length-t.indexOf("0"));if(a=t.match(Nxe))return i=WZ(r,a[1].length).replace(/^([^\.]+)$/,"$1."+Do(a[1])).replace(/\.$/,"."+Do(a[1])).replace(/\.(\d*)$/,function(x,v){return"."+v+ea("0",Do(a[1]).length-v.length)}),t.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return c+WZ(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return c+d0(L1(l,0));if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Rc(e,t,-r):d0(""+(Math.floor(r)+ext(r,a[1].length)))+"."+Ju(VZ(r,a[1].length),a[1].length);if(a=t.match(/^#,#*,#0/))return Rc(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Iv(Rc(e,t.replace(/[\\-]/g,""),r)),s=0,Iv(Iv(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return s<i.length?i.charAt(s++):x==="0"?"0":""}));if(t.match(Txe))return i=Rc(e,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(a[4].length,7),o=sO(l,Math.pow(10,s)-1,!1),i=""+c,d=_h("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),i+=d+a[2]+"/"+a[3],d=iO(o[2],s),d.length<a[4].length&&(d=Do(a[4].substr(a[4].length-d.length))+d),i+=d,i;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(a[1].length,a[4].length),7),o=sO(l,Math.pow(10,s)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?v$(o[1],s)+a[2]+"/"+a[3]+iO(o[2],s):ea(" ",2*s+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return i=L1(r,0),t.length<=i.length?i:Do(t.substr(0,t.length-i.length))+i;if(a=t.match(/^([#0?]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),s=i.indexOf(".");var f=t.indexOf(".")-s,p=t.length-i.length-f;return Do(t.substr(0,f)+i+t.substr(t.length-p))}if(a=t.match(/^00,000\.([#0]*0)$/))return s=VZ(r,a[1].length),r<0?"-"+Rc(e,t,-r):d0(txt(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?Ju(0,3-x.length):"")+x})+"."+Ju(s,a[1].length);switch(t){case"###,##0.00":return Rc(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=d0(L1(l,0));return m!=="0"?c+m:"";case"###,###.00":return Rc(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Rc(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function rxt(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return _h(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function nxt(e,t,r){var n=t.replace(Cxe,""),i=t.length-n.length;return _h(e,n,r*Math.pow(10,2*i))+ea("%",i)}function Ixe(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Ixe(e,-t);var i=e.indexOf(".");i===-1&&(i=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%i;if(a<0&&(a+=i),r=(t/Math.pow(10,a)).toPrecision(n+1+(i+a)%i),!r.match(/[Ee]/)){var s=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+a):r+="E+"+(s-a),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,d){return l+c+d.substr(0,(i+a)%i)+"."+d.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function _d(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Axe)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?_d("n",n,r):"("+_d("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return rxt(e,t,r);if(t.indexOf("%")!==-1)return nxt(e,t,r);if(t.indexOf("E")!==-1)return Ixe(t,r);if(t.charCodeAt(0)===36)return"$"+_d(e,t.substr(t.charAt(1)==" "?2:1),r);var i,a,s,o,l=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+Ju(l,t.length);if(t.match(/^[#?]+$/))return i=""+r,r===0&&(i=""),i.length>t.length?i:Do(t.substr(0,t.length-i.length))+i;if(a=t.match(_xe))return Zgt(a,l,c);if(t.match(/^#+0+$/))return c+Ju(l,t.length-t.indexOf("0"));if(a=t.match(Nxe))return i=(""+r).replace(/^([^\.]+)$/,"$1."+Do(a[1])).replace(/\.$/,"."+Do(a[1])),i=i.replace(/\.(\d*)$/,function(x,v){return"."+v+ea("0",Do(a[1]).length-v.length)}),t.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return c+d0(""+l);if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+_d(e,t,-r):d0(""+r)+"."+ea("0",a[1].length);if(a=t.match(/^#,#*,#0/))return _d(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Iv(_d(e,t.replace(/[\\-]/g,""),r)),s=0,Iv(Iv(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return s<i.length?i.charAt(s++):x==="0"?"0":""}));if(t.match(Txe))return i=_d(e,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(a[4].length,7),o=sO(l,Math.pow(10,s)-1,!1),i=""+c,d=_h("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),i+=d+a[2]+"/"+a[3],d=iO(o[2],s),d.length<a[4].length&&(d=Do(a[4].substr(a[4].length-d.length))+d),i+=d,i;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(a[1].length,a[4].length),7),o=sO(l,Math.pow(10,s)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?v$(o[1],s)+a[2]+"/"+a[3]+iO(o[2],s):ea(" ",2*s+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return i=""+r,t.length<=i.length?i:Do(t.substr(0,t.length-i.length))+i;if(a=t.match(/^([#0]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),s=i.indexOf(".");var f=t.indexOf(".")-s,p=t.length-i.length-f;return Do(t.substr(0,f)+i+t.substr(t.length-p))}if(a=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+_d(e,t,-r):d0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?Ju(0,3-x.length):"")+x})+"."+Ju(0,a[1].length);switch(t){case"###,###":case"##,###":case"#,###":var m=d0(""+l);return m!=="0"?c+m:"";default:if(t.match(/\.[0#?]*$/))return _d(e,t.slice(0,t.lastIndexOf(".")),r)+Do(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function _h(e,t,r){return(r|0)===r?_d(e,t,r):Rc(e,t,r)}function ixt(e){for(var t=[],r=!1,n=0,i=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(i,n-i),i=n+1}if(t[t.length]=e.substr(i),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var Oxe=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function _b(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":aO(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(Oxe))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function axt(e,t,r,n){for(var i=[],a="",s=0,o="",l="t",c,d,f,p="H";s<e.length;)switch(o=e.charAt(s)){case"G":if(!aO(e,s))throw new Error("unrecognized character "+o+" in "+e);i[i.length]={t:"G",v:"General"},s+=7;break;case'"':for(a="";(f=e.charCodeAt(++s))!==34&&s<e.length;)a+=String.fromCharCode(f);i[i.length]={t:"t",v:a},++s;break;case"\\":var m=e.charAt(++s),x=m==="("||m===")"?m:"t";i[i.length]={t:x,v:m},++s;break;case"_":i[i.length]={t:"t",v:" "},s+=2;break;case"@":i[i.length]={t:"T",v:t},++s;break;case"B":case"b":if(e.charAt(s+1)==="1"||e.charAt(s+1)==="2"){if(c==null&&(c=ug(t,r,e.charAt(s+1)==="2"),c==null))return"";i[i.length]={t:"X",v:e.substr(s,2)},l=o,s+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||c==null&&(c=ug(t,r),c==null))return"";for(a=o;++s<e.length&&e.charAt(s).toLowerCase()===o;)a+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=p),i[i.length]={t:o,v:a},l=o;break;case"A":case"a":case"":var v={t:o,v:o};if(c==null&&(c=ug(t,r)),e.substr(s,3).toUpperCase()==="A/P"?(c!=null&&(v.v=c.H>=12?"P":"A"),v.t="T",p="h",s+=3):e.substr(s,5).toUpperCase()==="AM/PM"?(c!=null&&(v.v=c.H>=12?"PM":"AM"),v.t="T",s+=5,p="h"):e.substr(s,5).toUpperCase()==="/"?(c!=null&&(v.v=c.H>=12?"":""),v.t="T",s+=5,p="h"):(v.t="t",++s),c==null&&v.t==="T")return"";i[i.length]=v,l=o;break;case"[":for(a=o;e.charAt(s++)!=="]"&&s<e.length;)a+=e.charAt(s);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(Oxe)){if(c==null&&(c=ug(t,r),c==null))return"";i[i.length]={t:"Z",v:a.toLowerCase()},l=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",_b(e)||(i[i.length]={t:"t",v:a}));break;case".":if(c!=null){for(a=o;++s<e.length&&(o=e.charAt(s))==="0";)a+=o;i[i.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++s<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(s))>-1;)a+=o;i[i.length]={t:"n",v:a};break;case"?":for(a=o;e.charAt(++s)===o;)a+=o;i[i.length]={t:o,v:a},l=o;break;case"*":++s,(e.charAt(s)==" "||e.charAt(s)=="*")&&++s;break;case"(":case")":i[i.length]={t:n===1?"t":o,v:o},++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;s<e.length&&"0123456789".indexOf(e.charAt(++s))>-1;)a+=e.charAt(s);i[i.length]={t:"D",v:a};break;case" ":i[i.length]={t:o,v:o},++s;break;case"$":i[i.length]={t:"t",v:"$"},++s;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);i[i.length]={t:"t",v:o},++s;break}var b=0,w=0,_;for(s=i.length-1,l="t";s>=0;--s)switch(i[s].t){case"h":case"H":i[s].t=p,l="h",b<1&&(b=1);break;case"s":(_=i[s].v.match(/\.0+$/))&&(w=Math.max(w,_[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":l=i[s].t;break;case"m":l==="s"&&(i[s].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&i[s].v.match(/[Hh]/)&&(b=1),b<2&&i[s].v.match(/[Mm]/)&&(b=2),b<3&&i[s].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var C="",N;for(s=0;s<i.length;++s)switch(i[s].t){case"t":case"T":case" ":case"D":break;case"X":i[s].v="",i[s].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[s].v=Xgt(i[s].t.charCodeAt(0),i[s].v,c,w),i[s].t="t";break;case"n":case"?":for(N=s+1;i[N]!=null&&((o=i[N].t)==="?"||o==="D"||(o===" "||o==="t")&&i[N+1]!=null&&(i[N+1].t==="?"||i[N+1].t==="t"&&i[N+1].v==="/")||i[s].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[N].v==="/"||i[N].v===" "&&i[N+1]!=null&&i[N+1].t=="?"));)i[s].v+=i[N].v,i[N]={v:"",t:";"},++N;C+=i[s].v,s=N-1;break;case"G":i[s].t="t",i[s].v=mx(t,r);break}var R="",P,O;if(C.length>0){C.charCodeAt(0)==40?(P=t<0&&C.charCodeAt(0)===45?-t:t,O=_h("n",C,P)):(P=t<0&&n>1?-t:t,O=_h("n",C,P),P<0&&i[0]&&i[0].t=="t"&&(O=O.substr(1),i[0].v="-"+i[0].v)),N=O.length-1;var D=i.length;for(s=0;s<i.length;++s)if(i[s]!=null&&i[s].t!="t"&&i[s].v.indexOf(".")>-1){D=s;break}var M=i.length;if(D===i.length&&O.indexOf("E")===-1){for(s=i.length-1;s>=0;--s)i[s]==null||"n?".indexOf(i[s].t)===-1||(N>=i[s].v.length-1?(N-=i[s].v.length,i[s].v=O.substr(N+1,i[s].v.length)):N<0?i[s].v="":(i[s].v=O.substr(0,N+1),N=-1),i[s].t="t",M=s);N>=0&&M<i.length&&(i[M].v=O.substr(0,N+1)+i[M].v)}else if(D!==i.length&&O.indexOf("E")===-1){for(N=O.indexOf(".")-1,s=D;s>=0;--s)if(!(i[s]==null||"n?".indexOf(i[s].t)===-1)){for(d=i[s].v.indexOf(".")>-1&&s===D?i[s].v.indexOf(".")-1:i[s].v.length-1,R=i[s].v.substr(d+1);d>=0;--d)N>=0&&(i[s].v.charAt(d)==="0"||i[s].v.charAt(d)==="#")&&(R=O.charAt(N--)+R);i[s].v=R,i[s].t="t",M=s}for(N>=0&&M<i.length&&(i[M].v=O.substr(0,N+1)+i[M].v),N=O.indexOf(".")+1,s=D;s<i.length;++s)if(!(i[s]==null||"n?(".indexOf(i[s].t)===-1&&s!==D)){for(d=i[s].v.indexOf(".")>-1&&s===D?i[s].v.indexOf(".")+1:0,R=i[s].v.substr(0,d);d<i[s].v.length;++d)N<O.length&&(R+=O.charAt(N++));i[s].v=R,i[s].t="t",M=s}}}for(s=0;s<i.length;++s)i[s]!=null&&"n?".indexOf(i[s].t)>-1&&(P=n>1&&t<0&&s>0&&i[s-1].v==="-"?-t:t,i[s].v=_h(i[s].t,i[s].v,P),i[s].t="t");var B="";for(s=0;s!==i.length;++s)i[s]!=null&&(B+=i[s].v);return B}var qZ=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function GZ(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function sxt(e,t){var r=ixt(e),n=r.length,i=r[n-1].indexOf("@");if(n<4&&i>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||i>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=i>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=i>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=i>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var a=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,a];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var s=r[0].match(qZ),o=r[1].match(qZ);return GZ(t,s)?[n,r[0]]:GZ(t,o)?[n,r[1]]:[n,r[s!=null&&o!=null?2:1]]}return[n,a]}function pu(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Rr)[e],n==null&&(n=r.table&&r.table[HZ[e]]||Rr[HZ[e]]),n==null&&(n=zgt[e]||"General");break}if(aO(n,0))return mx(t,r);t instanceof Date&&(t=Exe(t,r.date1904));var i=sxt(n,t);if(aO(i[1]))return mx(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return axt(i[1],t,r,i[0])}function Nh(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Rr[r]==null){t<0&&(t=r);continue}if(Rr[r]==e){t=r;break}}t<0&&(t=391)}return Rr[t]=e,t}function vP(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Nh(e[t],t)}function Nb(){Rr=$gt()}var oxt={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},Pxe=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function lxt(e){var t=typeof e=="number"?Rr[e]:e;return t=t.replace(Pxe,"(\\d+)"),new RegExp("^"+t+"$")}function cxt(e,t,r){var n=-1,i=-1,a=-1,s=-1,o=-1,l=-1;(t.match(Pxe)||[]).forEach(function(f,p){var m=parseInt(r[p+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=m;break;case"d":a=m;break;case"h":s=m;break;case"s":l=m;break;case"m":s>=0?o=m:i=m;break}}),l>=0&&o==-1&&i>=0&&(o=i,i=-1);var c=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var d=("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return s==-1&&o==-1&&l==-1?c:n==-1&&i==-1&&a==-1?d:c+"T"+d}var uxt=function(){var e={};e.version="1.2.0";function t(){for(var O=0,D=new Array(256),M=0;M!=256;++M)O=M,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,D[M]=O;return typeof Int32Array<"u"?new Int32Array(D):D}var r=t();function n(O){var D=0,M=0,B=0,U=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(B=0;B!=256;++B)U[B]=O[B];for(B=0;B!=256;++B)for(M=O[B],D=256+B;D<4096;D+=256)M=U[D]=M>>>8^O[M&255];var H=[];for(B=1;B!=16;++B)H[B-1]=typeof Int32Array<"u"?U.subarray(B*256,B*256+256):U.slice(B*256,B*256+256);return H}var i=n(r),a=i[0],s=i[1],o=i[2],l=i[3],c=i[4],d=i[5],f=i[6],p=i[7],m=i[8],x=i[9],v=i[10],b=i[11],w=i[12],_=i[13],C=i[14];function N(O,D){for(var M=D^-1,B=0,U=O.length;B<U;)M=M>>>8^r[(M^O.charCodeAt(B++))&255];return~M}function R(O,D){for(var M=D^-1,B=O.length-15,U=0;U<B;)M=C[O[U++]^M&255]^_[O[U++]^M>>8&255]^w[O[U++]^M>>16&255]^b[O[U++]^M>>>24]^v[O[U++]]^x[O[U++]]^m[O[U++]]^p[O[U++]]^f[O[U++]]^d[O[U++]]^c[O[U++]]^l[O[U++]]^o[O[U++]]^s[O[U++]]^a[O[U++]]^r[O[U++]];for(B+=15;U<B;)M=M>>>8^r[(M^O[U++])&255];return~M}function P(O,D){for(var M=D^-1,B=0,U=O.length,H=0,Z=0;B<U;)H=O.charCodeAt(B++),H<128?M=M>>>8^r[(M^H)&255]:H<2048?(M=M>>>8^r[(M^(192|H>>6&31))&255],M=M>>>8^r[(M^(128|H&63))&255]):H>=55296&&H<57344?(H=(H&1023)+64,Z=O.charCodeAt(B++)&1023,M=M>>>8^r[(M^(240|H>>8&7))&255],M=M>>>8^r[(M^(128|H>>2&63))&255],M=M>>>8^r[(M^(128|Z>>6&15|(H&3)<<4))&255],M=M>>>8^r[(M^(128|Z&63))&255]):(M=M>>>8^r[(M^(224|H>>12&15))&255],M=M>>>8^r[(M^(128|H>>6&63))&255],M=M>>>8^r[(M^(128|H&63))&255]);return~M}return e.table=r,e.bstr=N,e.buf=R,e.str=P,e}(),vr=function(){var t={};t.version="1.2.1";function r(de,he){for(var be=de.split("/"),Ne=he.split("/"),pe=0,me=0,Fe=Math.min(be.length,Ne.length);pe<Fe;++pe){if(me=be[pe].length-Ne[pe].length)return me;if(be[pe]!=Ne[pe])return be[pe]<Ne[pe]?-1:1}return be.length-Ne.length}function n(de){if(de.charAt(de.length-1)=="/")return de.slice(0,-1).indexOf("/")===-1?de:n(de.slice(0,-1));var he=de.lastIndexOf("/");return he===-1?de:de.slice(0,he+1)}function i(de){if(de.charAt(de.length-1)=="/")return i(de.slice(0,-1));var he=de.lastIndexOf("/");return he===-1?de:de.slice(he+1)}function a(de,he){typeof he=="string"&&(he=new Date(he));var be=he.getHours();be=be<<6|he.getMinutes(),be=be<<5|he.getSeconds()>>>1,de.write_shift(2,be);var Ne=he.getFullYear()-1980;Ne=Ne<<4|he.getMonth()+1,Ne=Ne<<5|he.getDate(),de.write_shift(2,Ne)}function s(de){var he=de.read_shift(2)&65535,be=de.read_shift(2)&65535,Ne=new Date,pe=be&31;be>>>=5;var me=be&15;be>>>=4,Ne.setMilliseconds(0),Ne.setFullYear(be+1980),Ne.setMonth(me-1),Ne.setDate(pe);var Fe=he&31;he>>>=5;var nt=he&63;return he>>>=6,Ne.setHours(he),Ne.setMinutes(nt),Ne.setSeconds(Fe<<1),Ne}function o(de){Ps(de,0);for(var he={},be=0;de.l<=de.length-4;){var Ne=de.read_shift(2),pe=de.read_shift(2),me=de.l+pe,Fe={};switch(Ne){case 21589:be=de.read_shift(1),be&1&&(Fe.mtime=de.read_shift(4)),pe>5&&(be&2&&(Fe.atime=de.read_shift(4)),be&4&&(Fe.ctime=de.read_shift(4))),Fe.mtime&&(Fe.mt=new Date(Fe.mtime*1e3));break}de.l=me,he[Ne]=Fe}return he}var l;function c(){return l||(l={})}function d(de,he){if(de[0]==80&&de[1]==75)return wn(de,he);if((de[0]|32)==109&&(de[1]|32)==105)return Ut(de,he);if(de.length<512)throw new Error("CFB file size "+de.length+" < 512");var be=3,Ne=512,pe=0,me=0,Fe=0,nt=0,Ge=0,Xe=[],Je=de.slice(0,512);Ps(Je,0);var wt=f(Je);switch(be=wt[0],be){case 3:Ne=512;break;case 4:Ne=4096;break;case 0:if(wt[1]==0)return wn(de,he);default:throw new Error("Major Version: Expected 3 or 4 saw "+be)}Ne!==512&&(Je=de.slice(0,Ne),Ps(Je,28));var At=de.slice(0,Ne);p(Je,be);var dt=Je.read_shift(4,"i");if(be===3&&dt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+dt);Je.l+=4,Fe=Je.read_shift(4,"i"),Je.l+=4,Je.chk("00100000","Mini Stream Cutoff Size: "),nt=Je.read_shift(4,"i"),pe=Je.read_shift(4,"i"),Ge=Je.read_shift(4,"i"),me=Je.read_shift(4,"i");for(var St=-1,Ot=0;Ot<109&&(St=Je.read_shift(4,"i"),!(St<0));++Ot)Xe[Ot]=St;var Kt=m(de,Ne);b(Ge,me,Kt,Ne,Xe);var at=_(Kt,Fe,Xe,Ne);at[Fe].name="!Directory",pe>0&&nt!==Z&&(at[nt].name="!MiniFAT"),at[Xe[0]].name="!FAT",at.fat_addrs=Xe,at.ssz=Ne;var Vn={},$r=[],wo=[],gd=[];C(Fe,at,Kt,$r,pe,Vn,wo,nt),x(wo,gd,$r),$r.shift();var gn={FileIndex:wo,FullPaths:gd};return he&&he.raw&&(gn.raw={header:At,sectors:Kt}),gn}function f(de){if(de[de.l]==80&&de[de.l+1]==75)return[0,0];de.chk(ee,"Header Signature: "),de.l+=16;var he=de.read_shift(2,"u");return[de.read_shift(2,"u"),he]}function p(de,he){var be=9;switch(de.l+=2,be=de.read_shift(2)){case 9:if(he!=3)throw new Error("Sector Shift: Expected 9 saw "+be);break;case 12:if(he!=4)throw new Error("Sector Shift: Expected 12 saw "+be);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+be)}de.chk("0600","Mini Sector Shift: "),de.chk("000000000000","Reserved: ")}function m(de,he){for(var be=Math.ceil(de.length/he)-1,Ne=[],pe=1;pe<be;++pe)Ne[pe-1]=de.slice(pe*he,(pe+1)*he);return Ne[be-1]=de.slice(be*he),Ne}function x(de,he,be){for(var Ne=0,pe=0,me=0,Fe=0,nt=0,Ge=be.length,Xe=[],Je=[];Ne<Ge;++Ne)Xe[Ne]=Je[Ne]=Ne,he[Ne]=be[Ne];for(;nt<Je.length;++nt)Ne=Je[nt],pe=de[Ne].L,me=de[Ne].R,Fe=de[Ne].C,Xe[Ne]===Ne&&(pe!==-1&&Xe[pe]!==pe&&(Xe[Ne]=Xe[pe]),me!==-1&&Xe[me]!==me&&(Xe[Ne]=Xe[me])),Fe!==-1&&(Xe[Fe]=Ne),pe!==-1&&Ne!=Xe[Ne]&&(Xe[pe]=Xe[Ne],Je.lastIndexOf(pe)<nt&&Je.push(pe)),me!==-1&&Ne!=Xe[Ne]&&(Xe[me]=Xe[Ne],Je.lastIndexOf(me)<nt&&Je.push(me));for(Ne=1;Ne<Ge;++Ne)Xe[Ne]===Ne&&(me!==-1&&Xe[me]!==me?Xe[Ne]=Xe[me]:pe!==-1&&Xe[pe]!==pe&&(Xe[Ne]=Xe[pe]));for(Ne=1;Ne<Ge;++Ne)if(de[Ne].type!==0){if(nt=Ne,nt!=Xe[nt])do nt=Xe[nt],he[Ne]=he[nt]+"/"+he[Ne];while(nt!==0&&Xe[nt]!==-1&&nt!=Xe[nt]);Xe[Ne]=-1}for(he[0]+="/",Ne=1;Ne<Ge;++Ne)de[Ne].type!==2&&(he[Ne]+="/")}function v(de,he,be){for(var Ne=de.start,pe=de.size,me=[],Fe=Ne;be&&pe>0&&Fe>=0;)me.push(he.slice(Fe*H,Fe*H+H)),pe-=H,Fe=qm(be,Fe*4);return me.length===0?pt(0):fs(me).slice(0,de.size)}function b(de,he,be,Ne,pe){var me=Z;if(de===Z){if(he!==0)throw new Error("DIFAT chain shorter than expected")}else if(de!==-1){var Fe=be[de],nt=(Ne>>>2)-1;if(!Fe)return;for(var Ge=0;Ge<nt&&(me=qm(Fe,Ge*4))!==Z;++Ge)pe.push(me);b(qm(Fe,Ne-4),he-1,be,Ne,pe)}}function w(de,he,be,Ne,pe){var me=[],Fe=[];pe||(pe=[]);var nt=Ne-1,Ge=0,Xe=0;for(Ge=he;Ge>=0;){pe[Ge]=!0,me[me.length]=Ge,Fe.push(de[Ge]);var Je=be[Math.floor(Ge*4/Ne)];if(Xe=Ge*4&nt,Ne<4+Xe)throw new Error("FAT boundary crossed: "+Ge+" 4 "+Ne);if(!de[Je])break;Ge=qm(de[Je],Xe)}return{nodes:me,data:aee([Fe])}}function _(de,he,be,Ne){var pe=de.length,me=[],Fe=[],nt=[],Ge=[],Xe=Ne-1,Je=0,wt=0,At=0,dt=0;for(Je=0;Je<pe;++Je)if(nt=[],At=Je+he,At>=pe&&(At-=pe),!Fe[At]){Ge=[];var St=[];for(wt=At;wt>=0;){St[wt]=!0,Fe[wt]=!0,nt[nt.length]=wt,Ge.push(de[wt]);var Ot=be[Math.floor(wt*4/Ne)];if(dt=wt*4&Xe,Ne<4+dt)throw new Error("FAT boundary crossed: "+wt+" 4 "+Ne);if(!de[Ot]||(wt=qm(de[Ot],dt),St[wt]))break}me[At]={nodes:nt,data:aee([Ge])}}return me}function C(de,he,be,Ne,pe,me,Fe,nt){for(var Ge=0,Xe=Ne.length?2:0,Je=he[de].data,wt=0,At=0,dt;wt<Je.length;wt+=128){var St=Je.slice(wt,wt+128);Ps(St,64),At=St.read_shift(2),dt=_$(St,0,At-Xe),Ne.push(dt);var Ot={name:dt,type:St.read_shift(1),color:St.read_shift(1),L:St.read_shift(4,"i"),R:St.read_shift(4,"i"),C:St.read_shift(4,"i"),clsid:St.read_shift(16),state:St.read_shift(4,"i"),start:0,size:0},Kt=St.read_shift(2)+St.read_shift(2)+St.read_shift(2)+St.read_shift(2);Kt!==0&&(Ot.ct=N(St,St.l-8));var at=St.read_shift(2)+St.read_shift(2)+St.read_shift(2)+St.read_shift(2);at!==0&&(Ot.mt=N(St,St.l-8)),Ot.start=St.read_shift(4,"i"),Ot.size=St.read_shift(4,"i"),Ot.size<0&&Ot.start<0&&(Ot.size=Ot.type=0,Ot.start=Z,Ot.name=""),Ot.type===5?(Ge=Ot.start,pe>0&&Ge!==Z&&(he[Ge].name="!StreamData")):Ot.size>=4096?(Ot.storage="fat",he[Ot.start]===void 0&&(he[Ot.start]=w(be,Ot.start,he.fat_addrs,he.ssz)),he[Ot.start].name=Ot.name,Ot.content=he[Ot.start].data.slice(0,Ot.size)):(Ot.storage="minifat",Ot.size<0?Ot.size=0:Ge!==Z&&Ot.start!==Z&&he[Ge]&&(Ot.content=v(Ot,he[Ge].data,(he[nt]||{}).data))),Ot.content&&Ps(Ot.content,0),me[dt]=Ot,Fe.push(Ot)}}function N(de,he){return new Date((ql(de,he+4)/1e7*Math.pow(2,32)+ql(de,he)/1e7-11644473600)*1e3)}function R(de,he){return c(),d(l.readFileSync(de),he)}function P(de,he){var be=he&&he.type;switch(be||pn&&Buffer.isBuffer(de)&&(be="buffer"),be||"base64"){case"file":return R(de,he);case"base64":return d(Xl(uc(de)),he);case"binary":return d(Xl(de),he)}return d(de,he)}function O(de,he){var be=he||{},Ne=be.root||"Root Entry";if(de.FullPaths||(de.FullPaths=[]),de.FileIndex||(de.FileIndex=[]),de.FullPaths.length!==de.FileIndex.length)throw new Error("inconsistent CFB structure");de.FullPaths.length===0&&(de.FullPaths[0]=Ne+"/",de.FileIndex[0]={name:Ne,type:5}),be.CLSID&&(de.FileIndex[0].clsid=be.CLSID),D(de)}function D(de){var he="Sh33tJ5";if(!vr.find(de,"/"+he)){var be=pt(4);be[0]=55,be[1]=be[3]=50,be[2]=54,de.FileIndex.push({name:he,type:2,content:be,size:4,L:69,R:69,C:69}),de.FullPaths.push(de.FullPaths[0]+he),M(de)}}function M(de,he){O(de);for(var be=!1,Ne=!1,pe=de.FullPaths.length-1;pe>=0;--pe){var me=de.FileIndex[pe];switch(me.type){case 0:Ne?be=!0:(de.FileIndex.pop(),de.FullPaths.pop());break;case 1:case 2:case 5:Ne=!0,isNaN(me.R*me.L*me.C)&&(be=!0),me.R>-1&&me.L>-1&&me.R==me.L&&(be=!0);break;default:be=!0;break}}if(!(!be&&!he)){var Fe=new Date(1987,1,19),nt=0,Ge=Object.create?Object.create(null):{},Xe=[];for(pe=0;pe<de.FullPaths.length;++pe)Ge[de.FullPaths[pe]]=!0,de.FileIndex[pe].type!==0&&Xe.push([de.FullPaths[pe],de.FileIndex[pe]]);for(pe=0;pe<Xe.length;++pe){var Je=n(Xe[pe][0]);Ne=Ge[Je],Ne||(Xe.push([Je,{name:i(Je).replace("/",""),type:1,clsid:te,ct:Fe,mt:Fe,content:null}]),Ge[Je]=!0)}for(Xe.sort(function(dt,St){return r(dt[0],St[0])}),de.FullPaths=[],de.FileIndex=[],pe=0;pe<Xe.length;++pe)de.FullPaths[pe]=Xe[pe][0],de.FileIndex[pe]=Xe[pe][1];for(pe=0;pe<Xe.length;++pe){var wt=de.FileIndex[pe],At=de.FullPaths[pe];if(wt.name=i(At).replace("/",""),wt.L=wt.R=wt.C=-(wt.color=1),wt.size=wt.content?wt.content.length:0,wt.start=0,wt.clsid=wt.clsid||te,pe===0)wt.C=Xe.length>1?1:-1,wt.size=0,wt.type=5;else if(At.slice(-1)=="/"){for(nt=pe+1;nt<Xe.length&&n(de.FullPaths[nt])!=At;++nt);for(wt.C=nt>=Xe.length?-1:nt,nt=pe+1;nt<Xe.length&&n(de.FullPaths[nt])!=n(At);++nt);wt.R=nt>=Xe.length?-1:nt,wt.type=1}else n(de.FullPaths[pe+1]||"")==n(At)&&(wt.R=pe+1),wt.type=2}}}function B(de,he){var be=he||{};if(be.fileType=="mad")return nr(de,be);switch(M(de),be.fileType){case"zip":return Vi(de,be)}var Ne=function(dt){for(var St=0,Ot=0,Kt=0;Kt<dt.FileIndex.length;++Kt){var at=dt.FileIndex[Kt];if(at.content){var Vn=at.content.length;Vn>0&&(Vn<4096?St+=Vn+63>>6:Ot+=Vn+511>>9)}}for(var $r=dt.FullPaths.length+3>>2,wo=St+7>>3,gd=St+127>>7,gn=wo+Ot+$r+gd,en=gn+127>>7,tn=en<=109?0:Math.ceil((en-109)/127);gn+en+tn+127>>7>en;)tn=++en<=109?0:Math.ceil((en-109)/127);var So=[1,tn,en,gd,$r,Ot,St,0];return dt.FileIndex[0].size=St<<6,So[7]=(dt.FileIndex[0].start=So[0]+So[1]+So[2]+So[3]+So[4]+So[5])+(So[6]+7>>3),So}(de),pe=pt(Ne[7]<<9),me=0,Fe=0;{for(me=0;me<8;++me)pe.write_shift(1,V[me]);for(me=0;me<8;++me)pe.write_shift(2,0);for(pe.write_shift(2,62),pe.write_shift(2,3),pe.write_shift(2,65534),pe.write_shift(2,9),pe.write_shift(2,6),me=0;me<3;++me)pe.write_shift(2,0);for(pe.write_shift(4,0),pe.write_shift(4,Ne[2]),pe.write_shift(4,Ne[0]+Ne[1]+Ne[2]+Ne[3]-1),pe.write_shift(4,0),pe.write_shift(4,4096),pe.write_shift(4,Ne[3]?Ne[0]+Ne[1]+Ne[2]-1:Z),pe.write_shift(4,Ne[3]),pe.write_shift(-4,Ne[1]?Ne[0]-1:Z),pe.write_shift(4,Ne[1]),me=0;me<109;++me)pe.write_shift(-4,me<Ne[2]?Ne[1]+me:-1)}if(Ne[1])for(Fe=0;Fe<Ne[1];++Fe){for(;me<236+Fe*127;++me)pe.write_shift(-4,me<Ne[2]?Ne[1]+me:-1);pe.write_shift(-4,Fe===Ne[1]-1?Z:Fe+1)}var nt=function(dt){for(Fe+=dt;me<Fe-1;++me)pe.write_shift(-4,me+1);dt&&(++me,pe.write_shift(-4,Z))};for(Fe=me=0,Fe+=Ne[1];me<Fe;++me)pe.write_shift(-4,se.DIFSECT);for(Fe+=Ne[2];me<Fe;++me)pe.write_shift(-4,se.FATSECT);nt(Ne[3]),nt(Ne[4]);for(var Ge=0,Xe=0,Je=de.FileIndex[0];Ge<de.FileIndex.length;++Ge)Je=de.FileIndex[Ge],Je.content&&(Xe=Je.content.length,!(Xe<4096)&&(Je.start=Fe,nt(Xe+511>>9)));for(nt(Ne[6]+7>>3);pe.l&511;)pe.write_shift(-4,se.ENDOFCHAIN);for(Fe=me=0,Ge=0;Ge<de.FileIndex.length;++Ge)Je=de.FileIndex[Ge],Je.content&&(Xe=Je.content.length,!(!Xe||Xe>=4096)&&(Je.start=Fe,nt(Xe+63>>6)));for(;pe.l&511;)pe.write_shift(-4,se.ENDOFCHAIN);for(me=0;me<Ne[4]<<2;++me){var wt=de.FullPaths[me];if(!wt||wt.length===0){for(Ge=0;Ge<17;++Ge)pe.write_shift(4,0);for(Ge=0;Ge<3;++Ge)pe.write_shift(4,-1);for(Ge=0;Ge<12;++Ge)pe.write_shift(4,0);continue}Je=de.FileIndex[me],me===0&&(Je.start=Je.size?Je.start-1:Z);var At=me===0&&be.root||Je.name;if(Xe=2*(At.length+1),pe.write_shift(64,At,"utf16le"),pe.write_shift(2,Xe),pe.write_shift(1,Je.type),pe.write_shift(1,Je.color),pe.write_shift(-4,Je.L),pe.write_shift(-4,Je.R),pe.write_shift(-4,Je.C),Je.clsid)pe.write_shift(16,Je.clsid,"hex");else for(Ge=0;Ge<4;++Ge)pe.write_shift(4,0);pe.write_shift(4,Je.state||0),pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(4,Je.start),pe.write_shift(4,Je.size),pe.write_shift(4,0)}for(me=1;me<de.FileIndex.length;++me)if(Je=de.FileIndex[me],Je.size>=4096)if(pe.l=Je.start+1<<9,pn&&Buffer.isBuffer(Je.content))Je.content.copy(pe,pe.l,0,Je.size),pe.l+=Je.size+511&-512;else{for(Ge=0;Ge<Je.size;++Ge)pe.write_shift(1,Je.content[Ge]);for(;Ge&511;++Ge)pe.write_shift(1,0)}for(me=1;me<de.FileIndex.length;++me)if(Je=de.FileIndex[me],Je.size>0&&Je.size<4096)if(pn&&Buffer.isBuffer(Je.content))Je.content.copy(pe,pe.l,0,Je.size),pe.l+=Je.size+63&-64;else{for(Ge=0;Ge<Je.size;++Ge)pe.write_shift(1,Je.content[Ge]);for(;Ge&63;++Ge)pe.write_shift(1,0)}if(pn)pe.l=pe.length;else for(;pe.l<pe.length;)pe.write_shift(1,0);return pe}function U(de,he){var be=de.FullPaths.map(function(Ge){return Ge.toUpperCase()}),Ne=be.map(function(Ge){var Xe=Ge.split("/");return Xe[Xe.length-(Ge.slice(-1)=="/"?2:1)]}),pe=!1;he.charCodeAt(0)===47?(pe=!0,he=be[0].slice(0,-1)+he):pe=he.indexOf("/")!==-1;var me=he.toUpperCase(),Fe=pe===!0?be.indexOf(me):Ne.indexOf(me);if(Fe!==-1)return de.FileIndex[Fe];var nt=!me.match(i2);for(me=me.replace(Ho,""),nt&&(me=me.replace(i2,"!")),Fe=0;Fe<be.length;++Fe)if((nt?be[Fe].replace(i2,"!"):be[Fe]).replace(Ho,"")==me||(nt?Ne[Fe].replace(i2,"!"):Ne[Fe]).replace(Ho,"")==me)return de.FileIndex[Fe];return null}var H=64,Z=-2,ee="d0cf11e0a1b11ae1",V=[208,207,17,224,161,177,26,225],te="00000000000000000000000000000000",se={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Z,FREESECT:-1,HEADER_SIGNATURE:ee,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:te,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Q(de,he,be){c();var Ne=B(de,be);l.writeFileSync(he,Ne)}function X(de){for(var he=new Array(de.length),be=0;be<de.length;++be)he[be]=String.fromCharCode(de[be]);return he.join("")}function fe(de,he){var be=B(de,he);switch(he&&he.type||"buffer"){case"file":return c(),l.writeFileSync(he.filename,be),be;case"binary":return typeof be=="string"?be:X(be);case"base64":return YS(typeof be=="string"?be:X(be));case"buffer":if(pn)return Buffer.isBuffer(be)?be:op(be);case"array":return typeof be=="string"?Xl(be):be}return be}var Se;function Y(de){try{var he=de.InflateRaw,be=new he;if(be._processChunk(new Uint8Array([3,0]),be._finishFlushFlag),be.bytesRead)Se=de;else throw new Error("zlib does not expose bytesRead")}catch(Ne){console.error("cannot use native zlib: "+(Ne.message||Ne))}}function ce(de,he){if(!Se)return Pt(de,he);var be=Se.InflateRaw,Ne=new be,pe=Ne._processChunk(de.slice(de.l),Ne._finishFlushFlag);return de.l+=Ne.bytesRead,pe}function W(de){return Se?Se.deflateRawSync(de):Me(de)}var G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ie=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Ce=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function re(de){var he=(de<<1|de<<11)&139536|(de<<5|de<<15)&558144;return(he>>16|he>>8|he)&255}for(var ne=typeof Uint8Array<"u",ge=ne?new Uint8Array(256):[],we=0;we<256;++we)ge[we]=re(we);function q(de,he){var be=ge[de&255];return he<=8?be>>>8-he:(be=be<<8|ge[de>>8&255],he<=16?be>>>16-he:(be=be<<8|ge[de>>16&255],be>>>24-he))}function Ae(de,he){var be=he&7,Ne=he>>>3;return(de[Ne]|(be<=6?0:de[Ne+1]<<8))>>>be&3}function Pe(de,he){var be=he&7,Ne=he>>>3;return(de[Ne]|(be<=5?0:de[Ne+1]<<8))>>>be&7}function He(de,he){var be=he&7,Ne=he>>>3;return(de[Ne]|(be<=4?0:de[Ne+1]<<8))>>>be&15}function je(de,he){var be=he&7,Ne=he>>>3;return(de[Ne]|(be<=3?0:de[Ne+1]<<8))>>>be&31}function $e(de,he){var be=he&7,Ne=he>>>3;return(de[Ne]|(be<=1?0:de[Ne+1]<<8))>>>be&127}function Ze(de,he,be){var Ne=he&7,pe=he>>>3,me=(1<<be)-1,Fe=de[pe]>>>Ne;return be<8-Ne||(Fe|=de[pe+1]<<8-Ne,be<16-Ne)||(Fe|=de[pe+2]<<16-Ne,be<24-Ne)||(Fe|=de[pe+3]<<24-Ne),Fe&me}function lt(de,he,be){var Ne=he&7,pe=he>>>3;return Ne<=5?de[pe]|=(be&7)<<Ne:(de[pe]|=be<<Ne&255,de[pe+1]=(be&7)>>8-Ne),he+3}function kt(de,he,be){var Ne=he&7,pe=he>>>3;return be=(be&1)<<Ne,de[pe]|=be,he+1}function ht(de,he,be){var Ne=he&7,pe=he>>>3;return be<<=Ne,de[pe]|=be&255,be>>>=8,de[pe+1]=be,he+8}function _r(de,he,be){var Ne=he&7,pe=he>>>3;return be<<=Ne,de[pe]|=be&255,be>>>=8,de[pe+1]=be&255,de[pe+2]=be>>>8,he+16}function er(de,he){var be=de.length,Ne=2*be>he?2*be:he+5,pe=0;if(be>=he)return de;if(pn){var me=UZ(Ne);if(de.copy)de.copy(me);else for(;pe<de.length;++pe)me[pe]=de[pe];return me}else if(ne){var Fe=new Uint8Array(Ne);if(Fe.set)Fe.set(de);else for(;pe<be;++pe)Fe[pe]=de[pe];return Fe}return de.length=Ne,de}function ct(de){for(var he=new Array(de),be=0;be<de;++be)he[be]=0;return he}function Gt(de,he,be){var Ne=1,pe=0,me=0,Fe=0,nt=0,Ge=de.length,Xe=ne?new Uint16Array(32):ct(32);for(me=0;me<32;++me)Xe[me]=0;for(me=Ge;me<be;++me)de[me]=0;Ge=de.length;var Je=ne?new Uint16Array(Ge):ct(Ge);for(me=0;me<Ge;++me)Xe[pe=de[me]]++,Ne<pe&&(Ne=pe),Je[me]=0;for(Xe[0]=0,me=1;me<=Ne;++me)Xe[me+16]=nt=nt+Xe[me-1]<<1;for(me=0;me<Ge;++me)nt=de[me],nt!=0&&(Je[me]=Xe[nt+16]++);var wt=0;for(me=0;me<Ge;++me)if(wt=de[me],wt!=0)for(nt=q(Je[me],Ne)>>Ne-wt,Fe=(1<<Ne+4-wt)-1;Fe>=0;--Fe)he[nt|Fe<<wt]=wt&15|me<<4;return Ne}var Lt=ne?new Uint16Array(512):ct(512),dr=ne?new Uint16Array(32):ct(32);if(!ne){for(var Ht=0;Ht<512;++Ht)Lt[Ht]=0;for(Ht=0;Ht<32;++Ht)dr[Ht]=0}(function(){for(var de=[],he=0;he<32;he++)de.push(5);Gt(de,dr,32);var be=[];for(he=0;he<=143;he++)be.push(8);for(;he<=255;he++)be.push(9);for(;he<=279;he++)be.push(7);for(;he<=287;he++)be.push(8);Gt(be,Lt,288)})();var ye=function(){for(var he=ne?new Uint8Array(32768):[],be=0,Ne=0;be<Ce.length-1;++be)for(;Ne<Ce[be+1];++Ne)he[Ne]=be;for(;Ne<32768;++Ne)he[Ne]=29;var pe=ne?new Uint8Array(259):[];for(be=0,Ne=0;be<ie.length-1;++be)for(;Ne<ie[be+1];++Ne)pe[Ne]=be;function me(nt,Ge){for(var Xe=0;Xe<nt.length;){var Je=Math.min(65535,nt.length-Xe),wt=Xe+Je==nt.length;for(Ge.write_shift(1,+wt),Ge.write_shift(2,Je),Ge.write_shift(2,~Je&65535);Je-- >0;)Ge[Ge.l++]=nt[Xe++]}return Ge.l}function Fe(nt,Ge){for(var Xe=0,Je=0,wt=ne?new Uint16Array(32768):[];Je<nt.length;){var At=Math.min(65535,nt.length-Je);if(At<10){for(Xe=lt(Ge,Xe,+(Je+At==nt.length)),Xe&7&&(Xe+=8-(Xe&7)),Ge.l=Xe/8|0,Ge.write_shift(2,At),Ge.write_shift(2,~At&65535);At-- >0;)Ge[Ge.l++]=nt[Je++];Xe=Ge.l*8;continue}Xe=lt(Ge,Xe,+(Je+At==nt.length)+2);for(var dt=0;At-- >0;){var St=nt[Je];dt=(dt<<5^St)&32767;var Ot=-1,Kt=0;if((Ot=wt[dt])&&(Ot|=Je&-32768,Ot>Je&&(Ot-=32768),Ot<Je))for(;nt[Ot+Kt]==nt[Je+Kt]&&Kt<250;)++Kt;if(Kt>2){St=pe[Kt],St<=22?Xe=ht(Ge,Xe,ge[St+1]>>1)-1:(ht(Ge,Xe,3),Xe+=5,ht(Ge,Xe,ge[St-23]>>5),Xe+=3);var at=St<8?0:St-4>>2;at>0&&(_r(Ge,Xe,Kt-ie[St]),Xe+=at),St=he[Je-Ot],Xe=ht(Ge,Xe,ge[St]>>3),Xe-=3;var Vn=St<4?0:St-2>>1;Vn>0&&(_r(Ge,Xe,Je-Ot-Ce[St]),Xe+=Vn);for(var $r=0;$r<Kt;++$r)wt[dt]=Je&32767,dt=(dt<<5^nt[Je])&32767,++Je;At-=Kt-1}else St<=143?St=St+48:Xe=kt(Ge,Xe,1),Xe=ht(Ge,Xe,ge[St]),wt[dt]=Je&32767,++Je}Xe=ht(Ge,Xe,0)-1}return Ge.l=(Xe+7)/8|0,Ge.l}return function(Ge,Xe){return Ge.length<8?me(Ge,Xe):Fe(Ge,Xe)}}();function Me(de){var he=pt(50+Math.floor(de.length*1.1)),be=ye(de,he);return he.slice(0,be)}var qe=ne?new Uint16Array(32768):ct(32768),it=ne?new Uint16Array(32768):ct(32768),ze=ne?new Uint16Array(128):ct(128),_e=1,ut=1;function xt(de,he){var be=je(de,he)+257;he+=5;var Ne=je(de,he)+1;he+=5;var pe=He(de,he)+4;he+=4;for(var me=0,Fe=ne?new Uint8Array(19):ct(19),nt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ge=1,Xe=ne?new Uint8Array(8):ct(8),Je=ne?new Uint8Array(8):ct(8),wt=Fe.length,At=0;At<pe;++At)Fe[G[At]]=me=Pe(de,he),Ge<me&&(Ge=me),Xe[me]++,he+=3;var dt=0;for(Xe[0]=0,At=1;At<=Ge;++At)Je[At]=dt=dt+Xe[At-1]<<1;for(At=0;At<wt;++At)(dt=Fe[At])!=0&&(nt[At]=Je[dt]++);var St=0;for(At=0;At<wt;++At)if(St=Fe[At],St!=0){dt=ge[nt[At]]>>8-St;for(var Ot=(1<<7-St)-1;Ot>=0;--Ot)ze[dt|Ot<<St]=St&7|At<<3}var Kt=[];for(Ge=1;Kt.length<be+Ne;)switch(dt=ze[$e(de,he)],he+=dt&7,dt>>>=3){case 16:for(me=3+Ae(de,he),he+=2,dt=Kt[Kt.length-1];me-- >0;)Kt.push(dt);break;case 17:for(me=3+Pe(de,he),he+=3;me-- >0;)Kt.push(0);break;case 18:for(me=11+$e(de,he),he+=7;me-- >0;)Kt.push(0);break;default:Kt.push(dt),Ge<dt&&(Ge=dt);break}var at=Kt.slice(0,be),Vn=Kt.slice(be);for(At=be;At<286;++At)at[At]=0;for(At=Ne;At<30;++At)Vn[At]=0;return _e=Gt(at,qe,286),ut=Gt(Vn,it,30),he}function Dt(de,he){if(de[0]==3&&!(de[1]&3))return[F0(he),2];for(var be=0,Ne=0,pe=UZ(he||1<<18),me=0,Fe=pe.length>>>0,nt=0,Ge=0;!(Ne&1);){if(Ne=Pe(de,be),be+=3,Ne>>>1)Ne>>1==1?(nt=9,Ge=5):(be=xt(de,be),nt=_e,Ge=ut);else{be&7&&(be+=8-(be&7));var Xe=de[be>>>3]|de[(be>>>3)+1]<<8;if(be+=32,Xe>0)for(!he&&Fe<me+Xe&&(pe=er(pe,me+Xe),Fe=pe.length);Xe-- >0;)pe[me++]=de[be>>>3],be+=8;continue}for(;;){!he&&Fe<me+32767&&(pe=er(pe,me+32767),Fe=pe.length);var Je=Ze(de,be,nt),wt=Ne>>>1==1?Lt[Je]:qe[Je];if(be+=wt&15,wt>>>=4,!(wt>>>8&255))pe[me++]=wt;else{if(wt==256)break;wt-=257;var At=wt<8?0:wt-4>>2;At>5&&(At=0);var dt=me+ie[wt];At>0&&(dt+=Ze(de,be,At),be+=At),Je=Ze(de,be,Ge),wt=Ne>>>1==1?dr[Je]:it[Je],be+=wt&15,wt>>>=4;var St=wt<4?0:wt-2>>1,Ot=Ce[wt];for(St>0&&(Ot+=Ze(de,be,St),be+=St),!he&&Fe<dt&&(pe=er(pe,dt+100),Fe=pe.length);me<dt;)pe[me]=pe[me-Ot],++me}}}return he?[pe,be+7>>>3]:[pe.slice(0,me),be+7>>>3]}function Pt(de,he){var be=de.slice(de.l||0),Ne=Dt(be,he);return de.l+=Ne[1],Ne[0]}function Cr(de,he){if(de)typeof console<"u"&&console.error(he);else throw new Error(he)}function wn(de,he){var be=de;Ps(be,0);var Ne=[],pe=[],me={FileIndex:Ne,FullPaths:pe};O(me,{root:he.root});for(var Fe=be.length-4;(be[Fe]!=80||be[Fe+1]!=75||be[Fe+2]!=5||be[Fe+3]!=6)&&Fe>=0;)--Fe;be.l=Fe+4,be.l+=4;var nt=be.read_shift(2);be.l+=6;var Ge=be.read_shift(4);for(be.l=Ge,Fe=0;Fe<nt;++Fe){be.l+=20;var Xe=be.read_shift(4),Je=be.read_shift(4),wt=be.read_shift(2),At=be.read_shift(2),dt=be.read_shift(2);be.l+=8;var St=be.read_shift(4),Ot=o(be.slice(be.l+wt,be.l+wt+At));be.l+=wt+At+dt;var Kt=be.l;be.l=St+4,fr(be,Xe,Je,me,Ot),be.l=Kt}return me}function fr(de,he,be,Ne,pe){de.l+=2;var me=de.read_shift(2),Fe=de.read_shift(2),nt=s(de);if(me&8257)throw new Error("Unsupported ZIP encryption");for(var Ge=de.read_shift(4),Xe=de.read_shift(4),Je=de.read_shift(4),wt=de.read_shift(2),At=de.read_shift(2),dt="",St=0;St<wt;++St)dt+=String.fromCharCode(de[de.l++]);if(At){var Ot=o(de.slice(de.l,de.l+At));(Ot[21589]||{}).mt&&(nt=Ot[21589].mt),((pe||{})[21589]||{}).mt&&(nt=pe[21589].mt)}de.l+=At;var Kt=de.slice(de.l,de.l+Xe);switch(Fe){case 8:Kt=ce(de,Je);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Fe)}var at=!1;me&8&&(Ge=de.read_shift(4),Ge==134695760&&(Ge=de.read_shift(4),at=!0),Xe=de.read_shift(4),Je=de.read_shift(4)),Xe!=he&&Cr(at,"Bad compressed size: "+he+" != "+Xe),Je!=be&&Cr(at,"Bad uncompressed size: "+be+" != "+Je),$t(Ne,dt,Kt,{unsafe:!0,mt:nt})}function Vi(de,he){var be=he||{},Ne=[],pe=[],me=pt(1),Fe=be.compression?8:0,nt=0,Ge=0,Xe=0,Je=0,wt=0,At=de.FullPaths[0],dt=At,St=de.FileIndex[0],Ot=[],Kt=0;for(Ge=1;Ge<de.FullPaths.length;++Ge)if(dt=de.FullPaths[Ge].slice(At.length),St=de.FileIndex[Ge],!(!St.size||!St.content||dt=="Sh33tJ5")){var at=Je,Vn=pt(dt.length);for(Xe=0;Xe<dt.length;++Xe)Vn.write_shift(1,dt.charCodeAt(Xe)&127);Vn=Vn.slice(0,Vn.l),Ot[wt]=uxt.buf(St.content,0);var $r=St.content;Fe==8&&($r=W($r)),me=pt(30),me.write_shift(4,67324752),me.write_shift(2,20),me.write_shift(2,nt),me.write_shift(2,Fe),St.mt?a(me,St.mt):me.write_shift(4,0),me.write_shift(-4,Ot[wt]),me.write_shift(4,$r.length),me.write_shift(4,St.content.length),me.write_shift(2,Vn.length),me.write_shift(2,0),Je+=me.length,Ne.push(me),Je+=Vn.length,Ne.push(Vn),Je+=$r.length,Ne.push($r),me=pt(46),me.write_shift(4,33639248),me.write_shift(2,0),me.write_shift(2,20),me.write_shift(2,nt),me.write_shift(2,Fe),me.write_shift(4,0),me.write_shift(-4,Ot[wt]),me.write_shift(4,$r.length),me.write_shift(4,St.content.length),me.write_shift(2,Vn.length),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(4,0),me.write_shift(4,at),Kt+=me.l,pe.push(me),Kt+=Vn.length,pe.push(Vn),++wt}return me=pt(22),me.write_shift(4,101010256),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(2,wt),me.write_shift(2,wt),me.write_shift(4,Kt),me.write_shift(4,Je),me.write_shift(2,0),fs([fs(Ne),fs(pe),me])}var jn={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Qo(de,he){if(de.ctype)return de.ctype;var be=de.name||"",Ne=be.match(/\.([^\.]+)$/);return Ne&&jn[Ne[1]]||he&&(Ne=(be=he).match(/[\.\\]([^\.\\])+$/),Ne&&jn[Ne[1]])?jn[Ne[1]]:"application/octet-stream"}function We(de){for(var he=YS(de),be=[],Ne=0;Ne<he.length;Ne+=76)be.push(he.slice(Ne,Ne+76));return be.join(`\r
`)+`\r
`}function Qe(de){var he=de.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Xe){var Je=Xe.charCodeAt(0).toString(16).toUpperCase();return"="+(Je.length==1?"0"+Je:Je)});he=he.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),he.charAt(0)==`
`&&(he="=0D"+he.slice(1)),he=he.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var be=[],Ne=he.split(`\r
`),pe=0;pe<Ne.length;++pe){var me=Ne[pe];if(me.length==0){be.push("");continue}for(var Fe=0;Fe<me.length;){var nt=76,Ge=me.slice(Fe,Fe+nt);Ge.charAt(nt-1)=="="?nt--:Ge.charAt(nt-2)=="="?nt-=2:Ge.charAt(nt-3)=="="&&(nt-=3),Ge=me.slice(Fe,Fe+nt),Fe+=nt,Fe<me.length&&(Ge+="="),be.push(Ge)}}return be.join(`\r
`)}function tt(de){for(var he=[],be=0;be<de.length;++be){for(var Ne=de[be];be<=de.length&&Ne.charAt(Ne.length-1)=="=";)Ne=Ne.slice(0,Ne.length-1)+de[++be];he.push(Ne)}for(var pe=0;pe<he.length;++pe)he[pe]=he[pe].replace(/[=][0-9A-Fa-f]{2}/g,function(me){return String.fromCharCode(parseInt(me.slice(1),16))});return Xl(he.join(`\r
`))}function _t(de,he,be){for(var Ne="",pe="",me="",Fe,nt=0;nt<10;++nt){var Ge=he[nt];if(!Ge||Ge.match(/^\s*$/))break;var Xe=Ge.match(/^(.*?):\s*([^\s].*)$/);if(Xe)switch(Xe[1].toLowerCase()){case"content-location":Ne=Xe[2].trim();break;case"content-type":me=Xe[2].trim();break;case"content-transfer-encoding":pe=Xe[2].trim();break}}switch(++nt,pe.toLowerCase()){case"base64":Fe=Xl(uc(he.slice(nt).join("")));break;case"quoted-printable":Fe=tt(he.slice(nt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+pe)}var Je=$t(de,Ne.slice(be.length),Fe,{unsafe:!0});me&&(Je.ctype=me)}function Ut(de,he){if(X(de.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var be=he&&he.root||"",Ne=(pn&&Buffer.isBuffer(de)?de.toString("binary"):X(de)).split(`\r
`),pe=0,me="";for(pe=0;pe<Ne.length;++pe)if(me=Ne[pe],!!/^Content-Location:/i.test(me)&&(me=me.slice(me.indexOf("file")),be||(be=me.slice(0,me.lastIndexOf("/")+1)),me.slice(0,be.length)!=be))for(;be.length>0&&(be=be.slice(0,be.length-1),be=be.slice(0,be.lastIndexOf("/")+1),me.slice(0,be.length)!=be););var Fe=(Ne[1]||"").match(/boundary="(.*?)"/);if(!Fe)throw new Error("MAD cannot find boundary");var nt="--"+(Fe[1]||""),Ge=[],Xe=[],Je={FileIndex:Ge,FullPaths:Xe};O(Je);var wt,At=0;for(pe=0;pe<Ne.length;++pe){var dt=Ne[pe];dt!==nt&&dt!==nt+"--"||(At++&&_t(Je,Ne.slice(wt,pe),be),wt=pe)}return Je}function nr(de,he){var be=he||{},Ne=be.boundary||"SheetJS";Ne="------="+Ne;for(var pe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Ne.slice(2)+'"',"","",""],me=de.FullPaths[0],Fe=me,nt=de.FileIndex[0],Ge=1;Ge<de.FullPaths.length;++Ge)if(Fe=de.FullPaths[Ge].slice(me.length),nt=de.FileIndex[Ge],!(!nt.size||!nt.content||Fe=="Sh33tJ5")){Fe=Fe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Kt){return"_x"+Kt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Kt){return"_u"+Kt.charCodeAt(0).toString(16)+"_"});for(var Xe=nt.content,Je=pn&&Buffer.isBuffer(Xe)?Xe.toString("binary"):X(Xe),wt=0,At=Math.min(1024,Je.length),dt=0,St=0;St<=At;++St)(dt=Je.charCodeAt(St))>=32&&dt<128&&++wt;var Ot=wt>=At*4/5;pe.push(Ne),pe.push("Content-Location: "+(be.root||"file:///C:/SheetJS/")+Fe),pe.push("Content-Transfer-Encoding: "+(Ot?"quoted-printable":"base64")),pe.push("Content-Type: "+Qo(nt,Fe)),pe.push(""),pe.push(Ot?Qe(Je):We(Je))}return pe.push(Ne+`--\r
`),pe.join(`\r
`)}function tr(de){var he={};return O(he,de),he}function $t(de,he,be,Ne){var pe=Ne&&Ne.unsafe;pe||O(de);var me=!pe&&vr.find(de,he);if(!me){var Fe=de.FullPaths[0];he.slice(0,Fe.length)==Fe?Fe=he:(Fe.slice(-1)!="/"&&(Fe+="/"),Fe=(Fe+he).replace("//","/")),me={name:i(he),type:2},de.FileIndex.push(me),de.FullPaths.push(Fe),pe||vr.utils.cfb_gc(de)}return me.content=be,me.size=be?be.length:0,Ne&&(Ne.CLSID&&(me.clsid=Ne.CLSID),Ne.mt&&(me.mt=Ne.mt),Ne.ct&&(me.ct=Ne.ct)),me}function kr(de,he){O(de);var be=vr.find(de,he);if(be){for(var Ne=0;Ne<de.FileIndex.length;++Ne)if(de.FileIndex[Ne]==be)return de.FileIndex.splice(Ne,1),de.FullPaths.splice(Ne,1),!0}return!1}function Jt(de,he,be){O(de);var Ne=vr.find(de,he);if(Ne){for(var pe=0;pe<de.FileIndex.length;++pe)if(de.FileIndex[pe]==Ne)return de.FileIndex[pe].name=i(be),de.FullPaths[pe]=be,!0}return!1}function Un(de){M(de,!0)}return t.find=U,t.read=P,t.parse=d,t.write=fe,t.writeFile=Q,t.utils={cfb_new:tr,cfb_add:$t,cfb_del:kr,cfb_mov:Jt,cfb_gc:Un,ReadShift:L2,CheckField:e1e,prep_blob:Ps,bconcat:fs,use_zlib:Y,_deflateRaw:Me,_inflateRaw:Pt,consts:se},t}();function dxt(e){return typeof e=="string"?xP(e):Array.isArray(e)?Fgt(e):e}function FC(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=xP(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Kd(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var i=new Blob([dxt(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,e);if(typeof saveAs<"u")return saveAs(i,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:e,saveAs:!0});var s=document.createElement("a");if(s.download!=null)return s.download=e,s.href=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=am(t)),o.write(t),o.close(),t}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+e)}function fxt(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function aa(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function KZ(e,t){for(var r=[],n=aa(e),i=0;i!==n.length;++i)r[e[n[i]][t]]==null&&(r[e[n[i]][t]]=n[i]);return r}function yP(e){for(var t=[],r=aa(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function bP(e){for(var t=[],r=aa(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function hxt(e){for(var t=[],r=aa(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var oO=new Date(1899,11,30,0,0,0);function Wa(e,t){var r=e.getTime(),n=oO.getTime()+(e.getTimezoneOffset()-oO.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var Rxe=new Date,pxt=oO.getTime()+(Rxe.getTimezoneOffset()-oO.getTimezoneOffset())*6e4,XZ=Rxe.getTimezoneOffset();function wP(e){var t=new Date;return t.setTime(e*24*60*60*1e3+pxt),t.getTimezoneOffset()!==XZ&&t.setTime(t.getTime()+(t.getTimezoneOffset()-XZ)*6e4),t}function mxt(e){var t=0,r=0,n=!1,i=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!i)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var a=1;a!=i.length;++a)if(i[a]){switch(r=1,a>3&&(n=!0),i[a].slice(i[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+i[a].slice(i[a].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(i[a],10)}return t}var YZ=new Date("2017-02-19T19:06:09.000Z"),jxe=isNaN(YZ.getFullYear())?new Date("2/19/17"):YZ,gxt=jxe.getFullYear()==2017;function ki(e,t){var r=new Date(e);if(gxt)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(jxe.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var i=e.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return e.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function gx(e,t){if(pn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Kd(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Kd(wxe(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Kd(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Kd(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(a){return r[a]||a})}catch{}for(var n=[],i=0;i!=e.length;++i)n.push(String.fromCharCode(e[i]));return n.join("")}function _i(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=_i(e[r]));return t}function ea(e,t){for(var r="";r.length<t;)r+=e;return r}function nd(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(i,a){return r=-r,a}),!isNaN(t=Number(n)))?t/r:t}var xxt=["january","february","march","april","may","june","july","august","september","october","november","december"];function Ly(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),i=t.getMonth(),a=t.getDate();if(isNaN(a))return r;var s=e.toLowerCase();if(s.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(s=s.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),s.length>3&&xxt.indexOf(s)==-1)return r}else if(s.match(/[a-z]/))return r;return n<0||n>8099?r:(i>0||a>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var vxt=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,i){if(e||typeof n=="string")return r.split(n);for(var a=r.split(n),s=[a[0]],o=1;o<a.length;++o)s.push(i),s.push(a[o]);return s}}();function Dxe(e){return e?e.content&&e.type?gx(e.content,!0):e.data?n2(e.data):e.asNodeBuffer&&pn?n2(e.asNodeBuffer().toString("binary")):e.asBinary?n2(e.asBinary()):e._data&&e._data.getContent?n2(gx(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function Mxe(e){if(!e)return null;if(e.data)return LZ(e.data);if(e.asNodeBuffer&&pn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?LZ(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function yxt(e){return e&&e.name.slice(-4)===".bin"?Mxe(e):Dxe(e)}function Lc(e,t){for(var r=e.FullPaths||aa(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),i=n.replace(/\\/g,"/"),a=0;a<r.length;++a){var s=r[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==s||i==s)return e.files?e.files[r[a]]:e.FileIndex[a]}return null}function b$(e,t){var r=Lc(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Ca(e,t,r){if(!r)return yxt(b$(e,t));if(!t)return null;try{return Ca(e,t)}catch{return null}}function Yl(e,t,r){if(!r)return Dxe(b$(e,t));if(!t)return null;try{return Yl(e,t)}catch{return null}}function bxt(e,t,r){return Mxe(b$(e,t))}function QZ(e){for(var t=e.FullPaths||aa(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function sn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return pn?n=op(r):n=Lgt(r),vr.utils.cfb_add(e,t,n)}vr.utils.cfb_add(e,t,r)}else e.file(t,r)}function w$(){return vr.utils.cfb_new()}function Fxe(e,t){switch(t.type){case"base64":return vr.read(e,{type:"base64"});case"binary":return vr.read(e,{type:"binary"});case"buffer":case"array":return vr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function a2(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var i=n.shift();i===".."?r.pop():i!=="."&&r.push(i)}return r.join("/")}var ba=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,wxt=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,JZ=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Sxt=/<[^>]*>/g,bo=ba.match(JZ)?JZ:Sxt,Ext=/<\w*:/,Cxt=/<(\/?)\w+:/;function Dr(e,t,r){for(var n={},i=0,a=0;i!==e.length&&!((a=e.charCodeAt(i))===32||a===10||a===13);++i);if(t||(n[0]=e.slice(0,i)),i===e.length)return n;var s=e.match(wxt),o=0,l="",c=0,d="",f="",p=1;if(s)for(c=0;c!=s.length;++c){for(f=s[c],a=0;a!=f.length&&f.charCodeAt(a)!==61;++a);for(d=f.slice(0,a).trim();f.charCodeAt(a+1)==32;)++a;for(p=(i=f.charCodeAt(a+1))==34||i==39?1:0,l=f.slice(a+1+p,f.length-p),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=l,n[d.toLowerCase()]=l;else{var m=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[m]&&d.slice(o-3,o)=="ext")continue;n[m]=l,n[m.toLowerCase()]=l}}return n}function Cf(e){return e.replace(Cxt,"<$1")}var Lxe={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},S$=yP(Lxe),Pn=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var i=n+"",a=i.indexOf("<![CDATA[");if(a==-1)return i.replace(e,function(o,l){return Lxe[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,l){return String.fromCharCode(parseInt(l,16))});var s=i.indexOf("]]>");return r(i.slice(0,a))+i.slice(a+9,s)+r(i.slice(s+3))}}(),E$=/[&<>'"]/g,kxt=/[\u0000-\u0008\u000b-\u001f]/g;function ti(e){var t=e+"";return t.replace(E$,function(r){return S$[r]}).replace(kxt,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function ZZ(e){return ti(e).replace(/ /g,"_x0020_")}var Bxe=/[\u0000-\u001f]/g;function C$(e){var t=e+"";return t.replace(E$,function(r){return S$[r]}).replace(/\n/g,"<br/>").replace(Bxe,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function _xt(e){var t=e+"";return t.replace(E$,function(r){return S$[r]}).replace(Bxe,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var eee=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function Nxt(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Si(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function hM(e){for(var t="",r=0,n=0,i=0,a=0,s=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(i=e.charCodeAt(r++),n>191&&n<224){s=(n&31)<<6,s|=i&63,t+=String.fromCharCode(s);continue}if(a=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(i&63)<<6|a&63);continue}s=e.charCodeAt(r++),o=((n&7)<<18|(i&63)<<12|(a&63)<<6|s&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function tee(e){var t=F0(2*e.length),r,n,i=1,a=0,s=0,o;for(n=0;n<e.length;n+=i)i=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),i=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),i=3):(i=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,s=55296+(r>>>10&1023),r=56320+(r&1023)),s!==0&&(t[a++]=s&255,t[a++]=s>>>8,s=0),t[a++]=r%256,t[a++]=r>>>8;return t.slice(0,a).toString("ucs2")}function ree(e){return op(e,"binary").toString("utf8")}var cN="foo bar baz",si=pn&&(ree(cN)==hM(cN)&&ree||tee(cN)==hM(cN)&&tee)||hM,Kd=pn?function(e){return op(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,i=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,i=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(i>>18&7))),t.push(String.fromCharCode(144+(i>>12&63))),t.push(String.fromCharCode(128+(i>>6&63))),t.push(String.fromCharCode(128+(i&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},JS=function(){var e={};return function(r,n){var i=r+"|"+(n||"");return e[i]?e[i]:e[i]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),Uxe=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<e.length;++i)n=n.replace(e[i][0],e[i][1]);return n}}(),Axt=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),Txt=/<\/?(?:vt:)?variant>/g,Ixt=/<(?:vt:)([^>]*)>([\s\S]*)</;function nee(e,t){var r=Dr(e),n=e.match(Axt(r.baseType))||[],i=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return i}return n.forEach(function(a){var s=a.replace(Txt,"").match(Ixt);s&&i.push({v:si(s[2]),t:s[1]})}),i}var $xe=/(^\s|\s$|\n)/;function Ds(e,t){return"<"+e+(t.match($xe)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function ZS(e){return aa(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Ft(e,t,r){return"<"+e+(r!=null?ZS(r):"")+(t!=null?(t.match($xe)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function gF(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function Oxt(e,t){switch(typeof e){case"string":var r=Ft("vt:lpwstr",ti(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Ft((e|0)==e?"vt:i4":"vt:r8",ti(String(e)));case"boolean":return Ft("vt:bool",e?"true":"false")}if(e instanceof Date)return Ft("vt:filetime",gF(e));throw new Error("Unable to serialize "+e)}function k$(e){if(pn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return si(am(x$(e)));throw new Error("Bad input format: expected Buffer or string")}var eE=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,za={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Yx=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Vl={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Pxt(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),i=e[t+6]&15,a=5;a>=0;--a)i=i*256+e[t+a];return n==2047?i==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,i+=Math.pow(2,52)),r*Math.pow(2,n-52)*i)}function Rxt(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,i=0,a=0,s=n?-t:t;isFinite(s)?s==0?i=a=0:(i=Math.floor(Math.log(s)/Math.LN2),a=s*Math.pow(2,52-i),i<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?i=-1022:(a-=Math.pow(2,52),i+=1023)):(i=2047,a=isNaN(t)?26985:0);for(var o=0;o<=5;++o,a/=256)e[r+o]=a&255;e[r+6]=(i&15)<<4|a&15,e[r+7]=i>>4|n}var iee=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var i=0,a=e[0][n].length;i<a;i+=r)t.push.apply(t,e[0][n].slice(i,i+r));return t},aee=pn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:op(t)})):iee(e)}:iee,see=function(e,t,r){for(var n=[],i=t;i<r;i+=2)n.push(String.fromCharCode(ph(e,i)));return n.join("").replace(Ho,"")},_$=pn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Ho,""):see(e,t,r)}:see,oee=function(e,t,r){for(var n=[],i=t;i<t+r;++i)n.push(("0"+e[i].toString(16)).slice(-2));return n.join("")},zxe=pn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):oee(e,t,r)}:oee,lee=function(e,t,r){for(var n=[],i=t;i<r;i++)n.push(String.fromCharCode(X1(e,i)));return n.join("")},LC=pn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):lee(t,r,n)}:lee,Hxe=function(e,t){var r=ql(e,t);return r>0?LC(e,t+4,t+4+r-1):""},Wxe=Hxe,Vxe=function(e,t){var r=ql(e,t);return r>0?LC(e,t+4,t+4+r-1):""},qxe=Vxe,Gxe=function(e,t){var r=2*ql(e,t);return r>0?LC(e,t+4,t+4+r-1):""},Kxe=Gxe,Xxe=function(t,r){var n=ql(t,r);return n>0?_$(t,r+4,r+4+n):""},Yxe=Xxe,Qxe=function(e,t){var r=ql(e,t);return r>0?LC(e,t+4,t+4+r):""},Jxe=Qxe,Zxe=function(e,t){return Pxt(e,t)},lO=Zxe,N$=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};pn&&(Wxe=function(t,r){if(!Buffer.isBuffer(t))return Hxe(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},qxe=function(t,r){if(!Buffer.isBuffer(t))return Vxe(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},Kxe=function(t,r){if(!Buffer.isBuffer(t))return Gxe(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},Yxe=function(t,r){if(!Buffer.isBuffer(t))return Xxe(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},Jxe=function(t,r){if(!Buffer.isBuffer(t))return Qxe(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},lO=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):Zxe(t,r)},N$=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var X1=function(e,t){return e[t]},ph=function(e,t){return e[t+1]*256+e[t]},jxt=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},ql=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},qm=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Dxt=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function L2(e,t){var r="",n,i,a=[],s,o,l,c;switch(t){case"dbcs":if(c=this.l,pn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(l=0;l<e;++l)r+=String.fromCharCode(ph(this,c)),c+=2;e*=2;break;case"utf8":r=LC(this,this.l,this.l+e);break;case"utf16le":e*=2,r=_$(this,this.l,this.l+e);break;case"wstr":return L2.call(this,e,"dbcs");case"lpstr-ansi":r=Wxe(this,this.l),e=4+ql(this,this.l);break;case"lpstr-cp":r=qxe(this,this.l),e=4+ql(this,this.l);break;case"lpwstr":r=Kxe(this,this.l),e=4+2*ql(this,this.l);break;case"lpp4":e=4+ql(this,this.l),r=Yxe(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+ql(this,this.l),r=Jxe(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(s=X1(this,this.l+e++))!==0;)a.push(lN(s));r=a.join("");break;case"_wstr":for(e=0,r="";(s=ph(this,this.l+e))!==0;)a.push(lN(s)),e+=2;e+=2,r=a.join("");break;case"dbcs-cont":for(r="",c=this.l,l=0;l<e;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return s=X1(this,c),this.l=c+1,o=L2.call(this,e-l,s?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(lN(ph(this,c))),c+=2}r=a.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",c=this.l,l=0;l!=e;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return s=X1(this,c),this.l=c+1,o=L2.call(this,e-l,s?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(lN(X1(this,c))),c+=1}r=a.join("");break;default:switch(e){case 1:return n=X1(this,this.l),this.l++,n;case 2:return n=(t==="i"?jxt:ph)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(n=(e>0?qm:Dxt)(this,this.l),this.l+=4,n):(i=ql(this,this.l),this.l+=4,i);case 8:case-8:if(t==="f")return e==8?i=lO(this,this.l):i=lO([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;e=8;case 16:r=zxe(this,this.l,e);break}}return this.l+=e,r}var Mxt=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Fxt=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},Lxt=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function Bxt(e,t,r){var n=0,i=0;if(r==="dbcs"){for(i=0;i!=t.length;++i)Lxt(this,t.charCodeAt(i),this.l+2*i);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=t.length;++i)this[this.l+i]=t.charCodeAt(i)&255;n=t.length}else if(r==="hex"){for(;i<e;++i)this[this.l++]=parseInt(t.slice(2*i,2*i+2),16)||0;return this}else if(r==="utf16le"){var a=Math.min(this.l+e,this.length);for(i=0;i<Math.min(t.length,e);++i){var s=t.charCodeAt(i);this[this.l++]=s&255,this[this.l++]=s>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,Mxt(this,t,this.l);break;case 8:if(n=8,r==="f"){Rxt(this,t,this.l);break}case 16:break;case-4:n=4,Fxt(this,t,this.l);break}return this.l+=n,this}function e1e(e,t){var r=zxe(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Ps(e,t){e.l=t,e.read_shift=L2,e.chk=e1e,e.write_shift=Bxt}function xo(e,t){e.l+=t}function pt(e){var t=F0(e);return Ps(t,0),t}function lp(e,t,r){if(e){var n,i,a;Ps(e,e.l||0);for(var s=e.length,o=0,l=0;e.l<s;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var c=sE[o]||sE[65535];for(n=e.read_shift(1),a=n&127,i=1;i<4&&n&128;++i)a+=((n=e.read_shift(1))&127)<<7*i;l=e.l+a;var d=c.f&&c.f(e,a,r);if(e.l=l,t(d,c,o))return}}}function Cl(){var e=[],t=pn?256:2048,r=function(c){var d=pt(c);return Ps(d,0),d},n=r(t),i=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},a=function(c){return n&&c<n.length-n.l?n:(i(),n=r(Math.max(c+1,t)))},s=function(){return i(),fs(e)},o=function(c){i(),n=c,n.l==null&&(n.l=n.length),a(t)};return{next:a,push:o,end:s,_bufs:e}}function Ct(e,t,r,n){var i=+t,a;if(!isNaN(i)){n||(n=sE[i].p||(r||[]).length||0),a=1+(i>=128?1:0)+1,n>=128&&++a,n>=16384&&++a,n>=2097152&&++a;var s=e.next(a);i<=127?s.write_shift(1,i):(s.write_shift(1,(i&127)+128),s.write_shift(1,i>>7));for(var o=0;o!=4;++o)if(n>=128)s.write_shift(1,(n&127)+128),n>>=7;else{s.write_shift(1,n);break}n>0&&N$(r)&&e.push(r)}}function B2(e,t,r){var n=_i(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function cee(e,t,r){var n=_i(e);return n.s=B2(n.s,t.s,r),n.e=B2(n.e,t.s,r),n}function U2(e,t){if(e.cRel&&e.c<0)for(e=_i(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=_i(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=jr(e);return!e.cRel&&e.cRel!=null&&(r=zxt(r)),!e.rRel&&e.rRel!=null&&(r=Uxt(r)),r}function pM(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Ui(e.s.c)+":"+(e.e.cRel?"":"$")+Ui(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+ga(e.s.r)+":"+(e.e.rRel?"":"$")+ga(e.e.r):U2(e.s,t.biff)+":"+U2(e.e,t.biff)}function A$(e){return parseInt($xt(e),10)-1}function ga(e){return""+(e+1)}function Uxt(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function $xt(e){return e.replace(/\$(\d+)$/,"$1")}function T$(e){for(var t=Hxt(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function Ui(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function zxt(e){return e.replace(/^([A-Z])/,"$$$1")}function Hxt(e){return e.replace(/^\$([A-Z])/,"$1")}function Wxt(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function $i(e){for(var t=0,r=0,n=0;n<e.length;++n){var i=e.charCodeAt(n);i>=48&&i<=57?t=10*t+(i-48):i>=65&&i<=90&&(r=26*r+(i-64))}return{c:r-1,r:t-1}}function jr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Al(e){var t=e.indexOf(":");return t==-1?{s:$i(e),e:$i(e)}:{s:$i(e.slice(0,t)),e:$i(e.slice(t+1))}}function Zr(e,t){return typeof t>"u"||typeof t=="number"?Zr(e.s,e.e):(typeof e!="string"&&(e=jr(e)),typeof t!="string"&&(t=jr(t)),e==t?e:e+":"+t)}function Rn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,i=0,a=e.length;for(r=0;n<a&&!((i=e.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(t.s.c=--r,r=0;n<a&&!((i=e.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;if(t.s.r=--r,n===a||i!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=a&&!((i=e.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(t.e.c=--r,r=0;n!=a&&!((i=e.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;return t.e.r=--r,t}function uee(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=pu(e.z,r?Wa(t):t)}catch{}try{return e.w=pu((e.XF||{}).numFmtId||(r?14:0),r?Wa(t):t)}catch{return""+t}}function Kh(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?cp[e.v]||e.v:t==null?uee(e,e.v):uee(e,t))}function sm(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function t1e(e,t,r){var n=r||{},i=e?Array.isArray(e):n.dense,a=e||(i?[]:{}),s=0,o=0;if(a&&n.origin!=null){if(typeof n.origin=="number")s=n.origin;else{var l=typeof n.origin=="string"?$i(n.origin):n.origin;s=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var d=Rn(a["!ref"]);c.s.c=d.s.c,c.s.r=d.s.r,c.e.c=Math.max(c.e.c,d.e.c),c.e.r=Math.max(c.e.r,d.e.r),s==-1&&(c.e.r=s=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=t[f].length;++p)if(!(typeof t[f][p]>"u")){var m={v:t[f][p]},x=s+f,v=o+p;if(c.s.r>x&&(c.s.r=x),c.s.c>v&&(c.s.c=v),c.e.r<x&&(c.e.r=x),c.e.c<v&&(c.e.c=v),t[f][p]&&typeof t[f][p]=="object"&&!Array.isArray(t[f][p])&&!(t[f][p]instanceof Date))m=t[f][p];else if(Array.isArray(m.v)&&(m.f=t[f][p][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||Rr[14],n.cellDates?(m.t="d",m.w=pu(m.z,Wa(m.v))):(m.t="n",m.v=Wa(m.v),m.w=pu(m.z,m.v))):m.t="s";if(i)a[x]||(a[x]=[]),a[x][v]&&a[x][v].z&&(m.z=a[x][v].z),a[x][v]=m;else{var b=jr({c:v,r:x});a[b]&&a[b].z&&(m.z=a[b].z),a[b]=m}}}return c.s.c<1e7&&(a["!ref"]=Zr(c)),a}function Ab(e,t){return t1e(null,e,t)}function Vxt(e){return e.read_shift(4,"i")}function id(e,t){return t||(t=pt(4)),t.write_shift(4,e),t}function po(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function ps(e,t){var r=!1;return t==null&&(r=!0,t=pt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function qxt(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Gxt(e,t){return t||(t=pt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function I$(e,t){var r=e.l,n=e.read_shift(1),i=po(e),a=[],s={t:i,h:i};if(n&1){for(var o=e.read_shift(4),l=0;l!=o;++l)a.push(qxt(e));s.r=a}else s.r=[{ich:0,ifnt:0}];return e.l=r+t,s}function Kxt(e,t){var r=!1;return t==null&&(r=!0,t=pt(15+4*e.t.length)),t.write_shift(1,0),ps(e.t,t),r?t.slice(0,t.l):t}var Xxt=I$;function Yxt(e,t){var r=!1;return t==null&&(r=!0,t=pt(23+4*e.t.length)),t.write_shift(1,1),ps(e.t,t),t.write_shift(4,1),Gxt({},t),r?t.slice(0,t.l):t}function bu(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Qx(e,t){return t==null&&(t=pt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Jx(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Zx(e,t){return t==null&&(t=pt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Qxt=po,r1e=ps;function O$(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function cO(e,t){var r=!1;return t==null&&(r=!0,t=pt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Jxt=po,xF=O$,P$=cO;function R$(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var i=n===0?lO([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):qm(t,0)>>2;return r?i/100:i}function n1e(e,t){t==null&&(t=pt(4));var r=0,n=0,i=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?i:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function i1e(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function Zxt(e,t){return t||(t=pt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var e1=i1e,Tb=Zxt;function uo(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function xx(e,t){return(t||pt(8)).write_shift(8,e,"f")}function e1t(e){var t={},r=e.read_shift(1),n=r>>>1,i=e.read_shift(1),a=e.read_shift(2,"i"),s=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=i;var c=Mg[i];c&&(t.rgb=rE(c));break;case 2:t.rgb=rE([s,o,l]);break;case 3:t.theme=i;break}return a!=0&&(t.tint=a>0?a/32767:a/32768),t}function uO(e,t){if(t||(t=pt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function t1t(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function r1t(e,t){t||(t=pt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function a1e(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function n1t(e){return a1e(e,1)}function i1t(e){return a1e(e,2)}var j$=2,ol=3,uN=11,dee=12,dO=19,dN=64,a1t=65,s1t=71,o1t=4108,l1t=4126,ss=80,s1e=81,c1t=[ss,s1e],vF={1:{n:"CodePage",t:j$},2:{n:"Category",t:ss},3:{n:"PresentationFormat",t:ss},4:{n:"ByteCount",t:ol},5:{n:"LineCount",t:ol},6:{n:"ParagraphCount",t:ol},7:{n:"SlideCount",t:ol},8:{n:"NoteCount",t:ol},9:{n:"HiddenCount",t:ol},10:{n:"MultimediaClipCount",t:ol},11:{n:"ScaleCrop",t:uN},12:{n:"HeadingPairs",t:o1t},13:{n:"TitlesOfParts",t:l1t},14:{n:"Manager",t:ss},15:{n:"Company",t:ss},16:{n:"LinksUpToDate",t:uN},17:{n:"CharacterCount",t:ol},19:{n:"SharedDoc",t:uN},22:{n:"HyperlinksChanged",t:uN},23:{n:"AppVersion",t:ol,p:"version"},24:{n:"DigSig",t:a1t},26:{n:"ContentType",t:ss},27:{n:"ContentStatus",t:ss},28:{n:"Language",t:ss},29:{n:"Version",t:ss},255:{},2147483648:{n:"Locale",t:dO},2147483651:{n:"Behavior",t:dO},1919054434:{}},yF={1:{n:"CodePage",t:j$},2:{n:"Title",t:ss},3:{n:"Subject",t:ss},4:{n:"Author",t:ss},5:{n:"Keywords",t:ss},6:{n:"Comments",t:ss},7:{n:"Template",t:ss},8:{n:"LastAuthor",t:ss},9:{n:"RevNumber",t:ss},10:{n:"EditTime",t:dN},11:{n:"LastPrinted",t:dN},12:{n:"CreatedDate",t:dN},13:{n:"ModifiedDate",t:dN},14:{n:"PageCount",t:ol},15:{n:"WordCount",t:ol},16:{n:"CharCount",t:ol},17:{n:"Thumbnail",t:s1t},18:{n:"Application",t:ss},19:{n:"DocSecurity",t:ol},255:{},2147483648:{n:"Locale",t:dO},2147483651:{n:"Behavior",t:dO},1919054434:{}},fee={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},u1t=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function d1t(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var f1t=d1t([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Mg=_i(f1t),cp={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},o1e={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},bF={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},fN={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function D$(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function h1t(e){var t=D$();if(!e||!e.match)return t;var r={};if((e.match(bo)||[]).forEach(function(n){var i=Dr(n);switch(i[0].replace(Ext,"<")){case"<?xml":break;case"<Types":t.xmlns=i["xmlns"+(i[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[i.Extension]=i.ContentType;break;case"<Override":t[bF[i.ContentType]]!==void 0&&t[bF[i.ContentType]].push(i.PartName);break}}),t.xmlns!==za.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function l1e(e,t){var r=hxt(bF),n=[],i;n[n.length]=ba,n[n.length]=Ft("Types",null,{xmlns:za.CT,"xmlns:xsd":za.xsd,"xmlns:xsi":za.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Ft("Default",null,{Extension:l[0],ContentType:l[1]})}));var a=function(l){e[l]&&e[l].length>0&&(i=e[l][0],n[n.length]=Ft("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:fN[l][t.bookType]||fN[l].xlsx}))},s=function(l){(e[l]||[]).forEach(function(c){n[n.length]=Ft("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:fN[l][t.bookType]||fN[l].xlsx})})},o=function(l){(e[l]||[]).forEach(function(c){n[n.length]=Ft("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:r[l][0]})})};return a("workbooks"),s("sheets"),s("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),s("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var yn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function tE(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function $2(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(bo)||[]).forEach(function(i){var a=Dr(i);if(a[0]==="<Relationship"){var s={};s.Type=a.Type,s.Target=a.Target,s.Id=a.Id,a.TargetMode&&(s.TargetMode=a.TargetMode);var o=a.TargetMode==="External"?a.Target:a2(a.Target,t);r[o]=s,n[a.Id]=s}}),r["!id"]=n,r}function Ov(e){var t=[ba,Ft("Relationships",null,{xmlns:za.RELS})];return aa(e["!id"]).forEach(function(r){t[t.length]=Ft("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Zn(e,t,r,n,i,a){if(i||(i={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,i.Id="rId"+t,i.Type=n,i.Target=r,[yn.HLINK,yn.XPATH,yn.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),e["!id"][i.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][i.Id]=i,e[("/"+i.Target).replace("//","/")]=i,t}var p1t="application/vnd.oasis.opendocument.spreadsheet";function m1t(e,t){for(var r=k$(e),n,i;n=eE.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(i=Dr(n[0],!1),i.path=="/"&&i.type!==p1t)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function g1t(e){var t=[ba];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function hee(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function x1t(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function v1t(e){var t=[ba];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(hee(e[r][0],e[r][1])),t.push(x1t("",e[r][0]));return t.push(hee("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function c1e(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+nO.version+"</meta:generator></office:meta></office:document-meta>"}var iu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],y1t=function(){for(var e=new Array(iu.length),t=0;t<iu.length;++t){var r=iu[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function u1e(e){var t={};e=si(e);for(var r=0;r<iu.length;++r){var n=iu[r],i=e.match(y1t[r]);i!=null&&i.length>0&&(t[n[1]]=Pn(i[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=ki(t[n[1]]))}return t}function mM(e,t,r,n,i){i[e]!=null||t==null||t===""||(i[e]=t,t=ti(t),n[n.length]=r?Ft(e,t,r):Ds(e,t))}function d1e(e,t){var r=t||{},n=[ba,Ft("cp:coreProperties",null,{"xmlns:cp":za.CORE_PROPS,"xmlns:dc":za.dc,"xmlns:dcterms":za.dcterms,"xmlns:dcmitype":za.dcmitype,"xmlns:xsi":za.xsi})],i={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&mM("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:gF(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i),e.ModifiedDate!=null&&mM("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:gF(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i));for(var a=0;a!=iu.length;++a){var s=iu[a],o=r.Props&&r.Props[s[1]]!=null?r.Props[s[1]]:e?e[s[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&mM(s[0],o,null,n,i)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Fg=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],f1e=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function h1e(e,t,r,n){var i=[];if(typeof e=="string")i=nee(e,n);else for(var a=0;a<e.length;++a)i=i.concat(e[a].map(function(d){return{v:d}}));var s=typeof t=="string"?nee(t,n).map(function(d){return d.v}):t,o=0,l=0;if(s.length>0)for(var c=0;c!==i.length;c+=2){switch(l=+i[c+1].v,i[c].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=s.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=l,r.DefinedNames=s.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=s.slice(o,o+l);break}o+=l}}function b1t(e,t,r){var n={};return t||(t={}),e=si(e),Fg.forEach(function(i){var a=(e.match(JS(i[0]))||[])[1];switch(i[2]){case"string":a&&(t[i[1]]=Pn(a));break;case"bool":t[i[1]]=a==="true";break;case"raw":var s=e.match(new RegExp("<"+i[0]+"[^>]*>([\\s\\S]*?)</"+i[0]+">"));s&&s.length>0&&(n[i[1]]=s[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&h1e(n.HeadingPairs,n.TitlesOfParts,t,r),t}function p1e(e){var t=[],r=Ft;return e||(e={}),e.Application="SheetJS",t[t.length]=ba,t[t.length]=Ft("Properties",null,{xmlns:za.EXT_PROPS,"xmlns:vt":za.vt}),Fg.forEach(function(n){if(e[n[1]]!==void 0){var i;switch(n[2]){case"string":i=ti(String(e[n[1]]));break;case"bool":i=e[n[1]]?"true":"false";break}i!==void 0&&(t[t.length]=r(n[0],i))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+ti(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var w1t=/<[^>]+>[^<]*/g;function S1t(e,t){var r={},n="",i=e.match(w1t);if(i)for(var a=0;a!=i.length;++a){var s=i[a],o=Dr(s);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Pn(o.name);break;case"</property>":n=null;break;default:if(s.indexOf("<vt:")===0){var l=s.split(">"),c=l[0].slice(4),d=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":r[n]=Pn(d);break;case"bool":r[n]=Si(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=ki(d);break;case"cy":case"error":r[n]=Pn(d);break;default:if(c.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",s,c,l)}}else if(s.slice(0,2)!=="</"){if(t.WTF)throw new Error(s)}}}return r}function m1e(e){var t=[ba,Ft("Properties",null,{xmlns:za.CUST_PROPS,"xmlns:vt":za.vt})];if(!e)return t.join("");var r=1;return aa(e).forEach(function(i){++r,t[t.length]=Ft("property",Oxt(e[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:ti(i)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var wF={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},gM;function E1t(e,t,r){gM||(gM=yP(wF)),t=gM[t]||t,e[t]=r}function C1t(e,t){var r=[];return aa(wF).map(function(n){for(var i=0;i<iu.length;++i)if(iu[i][1]==n)return iu[i];for(i=0;i<Fg.length;++i)if(Fg[i][1]==n)return Fg[i];throw n}).forEach(function(n){if(e[n[1]]!=null){var i=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),r.push(Ds(wF[n[1]]||n[1],i))}}),Ft("DocumentProperties",r.join(""),{xmlns:Vl.o})}function k1t(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",i=[];return e&&aa(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)){for(var s=0;s<iu.length;++s)if(a==iu[s][1])return;for(s=0;s<Fg.length;++s)if(a==Fg[s][1])return;for(s=0;s<r.length;++s)if(a==r[s])return;var o=e[a],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),i.push(Ft(ZZ(a),o,{"dt:dt":l}))}}),t&&aa(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)&&!(e&&Object.prototype.hasOwnProperty.call(e,a))){var s=t[a],o="string";typeof s=="number"?(o="float",s=String(s)):s===!0||s===!1?(o="boolean",s=s?"1":"0"):s instanceof Date?(o="dateTime.tz",s=s.toISOString()):s=String(s),i.push(Ft(ZZ(a),s,{"dt:dt":o}))}}),"<"+n+' xmlns="'+Vl.o+'">'+i.join("")+"</"+n+">"}function M$(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function _1t(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),i=(r-n)/Math.pow(2,32);n*=1e7,i*=1e7;var a=n/Math.pow(2,32)|0;a>0&&(n=n%Math.pow(2,32),i+=a);var s=pt(8);return s.write_shift(4,n),s.write_shift(4,i),s}function g1e(e,t,r){var n=e.l,i=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return i}function x1e(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function v1e(e,t,r){return t===31?x1e(e):g1e(e,t,r)}function SF(e,t,r){return v1e(e,t,r===!1?0:4)}function N1t(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return v1e(e,t,0)}function A1t(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var i=e.l;r[n]=e.read_shift(0,"lpwstr").replace(Ho,""),e.l-i&2&&(e.l+=2)}return r}function T1t(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(Ho,"");return r}function I1t(e){var t=e.l,r=fO(e,s1e);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=fO(e,ol);return[r,n]}function O1t(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(I1t(e));return r}function pee(e,t){for(var r=e.read_shift(4),n={},i=0;i!=r;++i){var a=e.read_shift(4),s=e.read_shift(4);n[a]=e.read_shift(s,t===1200?"utf16le":"utf8").replace(Ho,"").replace(i2,"!"),t===1200&&s%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function y1e(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function P1t(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function fO(e,t,r){var n=e.read_shift(2),i,a=r||{};if(e.l+=2,t!==dee&&n!==t&&c1t.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===dee?n:t){case 2:return i=e.read_shift(2,"i"),a.raw||(e.l+=2),i;case 3:return i=e.read_shift(4,"i"),i;case 11:return e.read_shift(4)!==0;case 19:return i=e.read_shift(4),i;case 30:return g1e(e,n,4).replace(Ho,"");case 31:return x1e(e);case 64:return M$(e);case 65:return y1e(e);case 71:return P1t(e);case 80:return SF(e,n,!a.raw).replace(Ho,"");case 81:return N1t(e,n).replace(Ho,"");case 4108:return O1t(e);case 4126:case 4127:return n==4127?A1t(e):T1t(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function mee(e,t){var r=pt(4),n=pt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=pt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=_1t(t);break;case 31:case 80:for(n=pt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return fs([r,n])}function gee(e,t){var r=e.l,n=e.read_shift(4),i=e.read_shift(4),a=[],s=0,o=0,l=-1,c={};for(s=0;s!=i;++s){var d=e.read_shift(4),f=e.read_shift(4);a[s]=[d,f+r]}a.sort(function(_,C){return _[1]-C[1]});var p={};for(s=0;s!=i;++s){if(e.l!==a[s][1]){var m=!0;if(s>0&&t)switch(t[a[s-1][0]].t){case 2:e.l+2===a[s][1]&&(e.l+=2,m=!1);break;case 80:e.l<=a[s][1]&&(e.l=a[s][1],m=!1);break;case 4108:e.l<=a[s][1]&&(e.l=a[s][1],m=!1);break}if((!t||s==0)&&e.l<=a[s][1]&&(m=!1,e.l=a[s][1]),m)throw new Error("Read Error: Expected address "+a[s][1]+" at "+e.l+" :"+s)}if(t){var x=t[a[s][0]];if(p[x.n]=fO(e,x.t,{raw:!0}),x.p==="version"&&(p[x.n]=String(p[x.n]>>16)+"."+("0000"+String(p[x.n]&65535)).slice(-4)),x.n=="CodePage")switch(p[x.n]){case 0:p[x.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Qu(o=p[x.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+p[x.n])}}else if(a[s][0]===1){if(o=p.CodePage=fO(e,j$),Qu(o),l!==-1){var v=e.l;e.l=a[l][1],c=pee(e,o),e.l=v}}else if(a[s][0]===0){if(o===0){l=s,e.l=a[s+1][1];continue}c=pee(e,o)}else{var b=c[a[s][0]],w;switch(e[e.l]){case 65:e.l+=4,w=y1e(e);break;case 30:e.l+=4,w=SF(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,w=SF(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,w=e.read_shift(4,"i");break;case 19:e.l+=4,w=e.read_shift(4);break;case 5:e.l+=4,w=e.read_shift(8,"f");break;case 11:e.l+=4,w=fa(e,4);break;case 64:e.l+=4,w=ki(M$(e));break;default:throw new Error("unparsed value: "+e[e.l])}p[b]=w}}return e.l=r+n,p}var b1e=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function R1t(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function xee(e,t,r){var n=pt(8),i=[],a=[],s=8,o=0,l=pt(8),c=pt(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),a.push(l),i.push(c),s+=8+l.length,!t){c=pt(8),c.write_shift(4,0),i.unshift(c);var d=[pt(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(l=pt(8+2*(f.length+1)+(f.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,f.length+1),l.write_shift(0,f,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=fs(d),a.unshift(l),s+=8+l.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(b1e.indexOf(e[o][0])>-1||f1e.indexOf(e[o][0])>-1)&&e[o][1]!=null){var p=e[o][1],m=0;if(t){m=+t[e[o][0]];var x=r[m];if(x.p=="version"&&typeof p=="string"){var v=p.split(".");p=(+v[0]<<16)+(+v[1]||0)}l=mee(x.t,p)}else{var b=R1t(p);b==-1&&(b=31,p=String(p)),l=mee(b,p)}a.push(l),c=pt(8),c.write_shift(4,t?m:2+o),i.push(c),s+=8+l.length}var w=8*(a.length+1);for(o=0;o<a.length;++o)i[o].write_shift(4,w),w+=a[o].length;return n.write_shift(4,s),n.write_shift(4,a.length),fs([n].concat(i).concat(a))}function vee(e,t,r){var n=e.content;if(!n)return{};Ps(n,0);var i,a,s,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var c=n.read_shift(4),d=n.read_shift(16);if(d!==vr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(i=n.read_shift(4),i!==1&&i!==2)throw new Error("Unrecognized #Sets: "+i);if(a=n.read_shift(16),o=n.read_shift(4),i===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);i===2&&(s=n.read_shift(16),l=n.read_shift(4));var f=gee(n,t),p={SystemIdentifier:c};for(var m in f)p[m]=f[m];if(p.FMTID=a,i===1)return p;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var x;try{x=gee(n,null)}catch{}for(m in x)p[m]=x[m];return p.FMTID=[a,s],p}function yee(e,t,r,n,i,a){var s=pt(i?68:48),o=[s];s.write_shift(2,65534),s.write_shift(2,0),s.write_shift(4,842412599),s.write_shift(16,vr.utils.consts.HEADER_CLSID,"hex"),s.write_shift(4,i?2:1),s.write_shift(16,t,"hex"),s.write_shift(4,i?68:48);var l=xee(e,r,n);if(o.push(l),i){var c=xee(i,null,null);s.write_shift(16,a,"hex"),s.write_shift(4,68+l.length),o.push(c)}return fs(o)}function Ap(e,t){return e.read_shift(t),null}function j1t(e,t){t||(t=pt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function D1t(e,t,r){for(var n=[],i=e.l+t;e.l<i;)n.push(r(e,i-e.l));if(i!==e.l)throw new Error("Slurp error");return n}function fa(e,t){return e.read_shift(t)===1}function Mo(e,t){return t||(t=pt(2)),t.write_shift(2,+!!e),t}function ka(e){return e.read_shift(2,"u")}function $c(e,t){return t||(t=pt(2)),t.write_shift(2,e),t}function w1e(e,t){return D1t(e,t,ka)}function M1t(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function S1e(e,t,r){return r||(r=pt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function BC(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),i="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var a=e.read_shift(1);a&&(i="dbcs-cont")}else r.biff==12&&(i="wstr");r.biff>=2&&r.biff<=5&&(i="cpstr");var s=n?e.read_shift(n,i):"";return s}function F1t(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,i=r&8,a=1+(r&1),s=0,o,l={};i&&(s=e.read_shift(2)),n&&(o=e.read_shift(4));var c=a==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,c);return i&&(e.l+=4*s),n&&(e.l+=o),l.t=d,i||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function L1t(e){var t=e.t||"",r=pt(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=pt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var i=[r,n];return fs(i)}function vx(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var i=e.read_shift(1);return i===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function UC(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):vx(e,n,r)}function t1(e,t,r){if(r.biff>5)return UC(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function E1e(e,t,r){return r||(r=pt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function B1t(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function U1t(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var i=e.read_shift((n?t-24:t)>>1,"utf16le").replace(Ho,"");return n&&(e.l+=24),i}function $1t(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var i=e.read_shift(4);if(i===0)return r+n.replace(/\\/g,"/");var a=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var s=e.read_shift(a>>1,"utf16le").replace(Ho,"");return r+s}function z1t(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return U1t(e);case"0303000000000000c000000000000046":return $1t(e);default:throw new Error("Unsupported Moniker "+r)}}function hN(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Ho,""):"";return r}function bee(e,t){t||(t=pt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function H1t(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var i=e.read_shift(2);e.l+=2;var a,s,o,l,c="",d,f;i&16&&(a=hN(e,r-e.l)),i&128&&(s=hN(e,r-e.l)),(i&257)===257&&(o=hN(e,r-e.l)),(i&257)===1&&(l=z1t(e,r-e.l)),i&8&&(c=hN(e,r-e.l)),i&32&&(d=e.read_shift(16)),i&64&&(f=M$(e)),e.l=r;var p=s||o||l||"";p&&c&&(p+="#"+c),p||(p="#"+c),i&2&&p.charAt(0)=="/"&&p.charAt(1)!="/"&&(p="file://"+p);var m={Target:p};return d&&(m.guid=d),f&&(m.time=f),a&&(m.Tooltip=a),m}function W1t(e){var t=pt(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var i=n.indexOf("#"),a=i>-1?31:23;switch(n.charAt(0)){case"#":a=28;break;case".":a&=-3;break}t.write_shift(4,2),t.write_shift(4,a);var s=[8,6815827,6619237,4849780,83];for(r=0;r<s.length;++r)t.write_shift(4,s[r]);if(a==28)n=n.slice(1),bee(n,t);else if(a&2){for(s="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<s.length;++r)t.write_shift(1,parseInt(s[r],16));var o=i>-1?n.slice(0,i):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),a&8&&bee(i>-1?n.slice(i+1):"",t)}else{for(s="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<s.length;++r)t.write_shift(1,parseInt(s[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(t.write_shift(2,l),t.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)t.write_shift(1,n.charCodeAt(r+3*l)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function C1e(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),i=e.read_shift(1);return[t,r,n,i]}function k1e(e,t){var r=C1e(e);return r[3]=0,r}function kf(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function yx(e,t,r,n){return n||(n=pt(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function V1t(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function q1t(e,t,r){return t===0?"":t1(e,t,r)}function G1t(e,t,r){var n=r.biff>8?4:2,i=e.read_shift(n),a=e.read_shift(n,"i"),s=e.read_shift(n,"i");return[i,a,s]}function _1e(e){var t=e.read_shift(2),r=R$(e);return[t,r]}function K1t(e,t,r){e.l+=4,t-=4;var n=e.l+t,i=BC(e,t,r),a=e.read_shift(2);if(n-=e.l,a!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+a);return e.l+=a,i}function SP(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(2);return{s:{c:n,r:t},e:{c:i,r}}}function N1e(e,t){return t||(t=pt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function A1e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),i=e.read_shift(1);return{s:{c:n,r:t},e:{c:i,r}}}var X1t=A1e;function T1e(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function Y1t(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function Q1t(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Ys(e){e.l+=2,e.l+=e.read_shift(2)}var J1t={0:Ys,4:Ys,5:Ys,6:Ys,7:Q1t,8:Ys,9:Ys,10:Ys,11:Ys,12:Ys,13:Y1t,14:Ys,15:Ys,16:Ys,17:Ys,18:Ys,19:Ys,20:Ys,21:T1e};function Z1t(e,t){for(var r=e.l+t,n=[];e.l<r;){var i=e.read_shift(2);e.l-=2;try{n.push(J1t[i](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function pN(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function F$(e,t,r){var n=1536,i=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,i=8;break;case"biff4":n=4,i=6;break;case"biff3":n=3,i=6;break;case"biff2":n=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=pt(i);return a.write_shift(2,n),a.write_shift(2,t),i>4&&a.write_shift(2,29282),i>6&&a.write_shift(2,1997),i>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function evt(e,t){return t===0||e.read_shift(2),1200}function tvt(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,i=t1(e,0,r);return e.read_shift(t+n-e.l),i}function rvt(e,t){var r=!t||t.biff==8,n=pt(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function nvt(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function ivt(e,t,r){var n=e.read_shift(4),i=e.read_shift(1)&3,a=e.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var s=BC(e,0,r);return s.length===0&&(s="Sheet1"),{pos:n,hs:i,dt:a,name:s}}function avt(e,t){var r=!t||t.biff>=8?2:1,n=pt(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var i=n.slice(0,n.l);return i.l=n.l,i}function svt(e,t){for(var r=e.l+t,n=e.read_shift(4),i=e.read_shift(4),a=[],s=0;s!=i&&e.l<r;++s)a.push(F1t(e));return a.Count=n,a.Unique=i,a}function ovt(e,t){var r=pt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],i=0;i<e.length;++i)n[i]=L1t(e[i]);var a=fs([r].concat(n));return a.parts=[r.length].concat(n.map(function(s){return s.length})),a}function lvt(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function cvt(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function uvt(e){var t=V1t(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function dvt(e){return e.read_shift(2),e.read_shift(4)}function wee(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var i=e.read_shift(2);r&&r.biff==2&&(n=1-(i>>15),i&=32767);var a={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[a,i]}function fvt(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2);return{Pos:[t,r],Dim:[n,i],Flags:a,CurTab:s,FirstTab:o,Selected:l,TabRatio:c}}function hvt(){var e=pt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function pvt(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function mvt(e){var t=pt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function gvt(){}function xvt(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=BC(e,0,r),n}function vvt(e,t){var r=e.name||"Arial",n=t&&t.biff==5,i=n?15+r.length:16+2*r.length,a=pt(i);return a.write_shift(2,e.sz*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,r.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),a}function yvt(e){var t=kf(e);return t.isst=e.read_shift(4),t}function bvt(e,t,r,n){var i=pt(10);return yx(e,t,n,i),i.write_shift(4,r),i}function wvt(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,i=kf(e);r.biff==2&&e.l++;var a=UC(e,n-e.l,r);return i.val=a,i}function Svt(e,t,r,n,i){var a=!i||i.biff==8,s=pt(8+ +a+(1+a)*r.length);return yx(e,t,n,s),s.write_shift(2,r.length),a&&s.write_shift(1,1),s.write_shift((1+a)*r.length,r,a?"utf16le":"sbcs"),s}function Evt(e,t,r){var n=e.read_shift(2),i=t1(e,0,r);return[n,i]}function Cvt(e,t,r,n){var i=r&&r.biff==5;n||(n=pt(i?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(i?1:2,t.length),i||n.write_shift(1,1),n.write_shift((i?1:2)*t.length,t,i?"sbcs":"utf16le");var a=n.length>n.l?n.slice(0,n.l):n;return a.l==null&&(a.l=a.length),a}var kvt=t1;function See(e,t,r){var n=e.l+t,i=r.biff==8||!r.biff?4:2,a=e.read_shift(i),s=e.read_shift(i),o=e.read_shift(2),l=e.read_shift(2);return e.l=n,{s:{r:a,c:o},e:{r:s,c:l}}}function _vt(e,t){var r=t.biff==8||!t.biff?4:2,n=pt(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function Nvt(e){var t=e.read_shift(2),r=e.read_shift(2),n=_1e(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function Avt(e,t){for(var r=e.l+t-2,n=e.read_shift(2),i=e.read_shift(2),a=[];e.l<r;)a.push(_1e(e));if(e.l!==r)throw new Error("MulRK read error");var s=e.read_shift(2);if(a.length!=s-i+1)throw new Error("MulRK length mismatch");return{r:n,c:i,C:s,rkrec:a}}function Tvt(e,t){for(var r=e.l+t-2,n=e.read_shift(2),i=e.read_shift(2),a=[];e.l<r;)a.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var s=e.read_shift(2);if(a.length!=s-i+1)throw new Error("MulBlank length mismatch");return{r:n,c:i,C:s,ixfe:a}}function Ivt(e,t,r,n){var i={},a=e.read_shift(4),s=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(2);return i.patternType=u1t[o>>26],n.cellStyles&&(i.alc=a&7,i.fWrap=a>>3&1,i.alcV=a>>4&7,i.fJustLast=a>>7&1,i.trot=a>>8&255,i.cIndent=a>>16&15,i.fShrinkToFit=a>>20&1,i.iReadOrder=a>>22&2,i.fAtrNum=a>>26&1,i.fAtrFnt=a>>27&1,i.fAtrAlc=a>>28&1,i.fAtrBdr=a>>29&1,i.fAtrPat=a>>30&1,i.fAtrProt=a>>31&1,i.dgLeft=s&15,i.dgRight=s>>4&15,i.dgTop=s>>8&15,i.dgBottom=s>>12&15,i.icvLeft=s>>16&127,i.icvRight=s>>23&127,i.grbitDiag=s>>30&3,i.icvTop=o&127,i.icvBottom=o>>7&127,i.icvDiag=o>>14&127,i.dgDiag=o>>21&15,i.icvFore=l&127,i.icvBack=l>>7&127,i.fsxButton=l>>14&1),i}function Ovt(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=Ivt(e,t,n.fStyle,r),n}function Eee(e,t,r,n){var i=r&&r.biff==5;n||(n=pt(i?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var a=0;return e.numFmtId>0&&i&&(a|=1024),n.write_shift(4,a),n.write_shift(4,0),i||n.write_shift(4,0),n.write_shift(2,0),n}function Pvt(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function Rvt(e){var t=pt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function Cee(e,t,r){var n=kf(e);(r.biff==2||t==9)&&++e.l;var i=M1t(e);return n.val=i,n.t=i===!0||i===!1?"b":"e",n}function jvt(e,t,r,n,i,a){var s=pt(8);return yx(e,t,n,s),S1e(r,a,s),s}function Dvt(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=kf(e),i=uo(e);return n.val=i,n}function Mvt(e,t,r,n){var i=pt(14);return yx(e,t,n,i),xx(r,i),i}var kee=q1t;function Fvt(e,t,r){var n=e.l+t,i=e.read_shift(2),a=e.read_shift(2);if(r.sbcch=a,a==1025||a==14849)return[a,i];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var s=vx(e,a),o=[];n>e.l;)o.push(UC(e));return[a,i,s,o]}function _ee(e,t,r){var n=e.read_shift(2),i,a={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(i=K1t(e,t-2,r)),a.body=i||e.read_shift(t-2),typeof i=="string"&&(a.Name=i),a}var Lvt=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function Nee(e,t,r){var n=e.l+t,i=e.read_shift(2),a=e.read_shift(1),s=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),l=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var c=vx(e,s,r);i&32&&(c=Lvt[c.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||o===0||!(d>0)?[]:Z2t(e,d,r,o);return{chKey:a,Name:c,itab:l,rgce:f}}function I1e(e,t,r){if(r.biff<8)return Bvt(e,t,r);for(var n=[],i=e.l+t,a=e.read_shift(r.biff>8?4:2);a--!==0;)n.push(G1t(e,r.biff>8?12:6,r));if(e.l!=i)throw new Error("Bad ExternSheet: "+e.l+" != "+i);return n}function Bvt(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=BC(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function Uvt(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),i=e.read_shift(2),a=vx(e,n,r),s=vx(e,i,r);return[a,s]}function $vt(e,t,r){var n=A1e(e);e.l++;var i=e.read_shift(1);return t-=8,[eSt(e,t,r),i,n]}function Aee(e,t,r){var n=X1t(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,Q2t(e,t,r)]}function zvt(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function Hvt(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),i=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),o=t1(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:i},o,s,a]}}function Wvt(e,t,r){return Hvt(e,t,r)}function Vvt(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(SP(e));return r}function qvt(e){var t=pt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)N1e(e[r],t);return t}function Gvt(e,t,r){if(r&&r.biff<8)return Xvt(e,t,r);var n=T1e(e),i=Z1t(e,t-22,n[1]);return{cmo:n,ft:i}}var Kvt={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var i=e.read_shift(1);return e.l+=i,e.l=r,{fmt:n}}};function Xvt(e,t,r){e.l+=4;var n=e.read_shift(2),i=e.read_shift(2),a=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var s=[];return s.push((Kvt[n]||xo)(e,t,r)),{cmo:[i,n,a],ft:s}}function Yvt(e,t,r){var n=e.l,i="";try{e.l+=4;var a=(r.lastobj||{cmo:[0,0]}).cmo[1],s;[0,5,7,11,12,14].indexOf(a)==-1?e.l+=6:s=B1t(e,6,r);var o=e.read_shift(2);e.read_shift(2),ka(e,2);var l=e.read_shift(2);e.l+=l;for(var c=1;c<e.lens.length-1;++c){if(e.l-n!=e.lens[c])throw new Error("TxO: bad continue record");var d=e[e.l],f=vx(e,e.lens[c+1]-e.lens[c]-1);if(i+=f,i.length>=(d?o:2*o))break}if(i.length!==o&&i.length!==o*2)throw new Error("cchText: "+o+" != "+i.length);return e.l=n+t,{t:i}}catch{return e.l=n+t,{t:i}}}function Qvt(e,t){var r=SP(e);e.l+=16;var n=H1t(e,t-24);return[r,n]}function Jvt(e){var t=pt(24),r=$i(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)t.write_shift(1,parseInt(n[i],16));return fs([t,W1t(e[1])])}function Zvt(e,t){e.read_shift(2);var r=SP(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(Ho,""),[r,n]}function eyt(e){var t=e[1].Tooltip,r=pt(10+2*(t.length+1));r.write_shift(2,2048);var n=$i(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var i=0;i<t.length;++i)r.write_shift(2,t.charCodeAt(i));return r.write_shift(2,0),r}function tyt(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=fee[r]||r,r=e.read_shift(2),t[1]=fee[r]||r,t}function ryt(e){return e||(e=pt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function nyt(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(k1e(e));return r}function iyt(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(k1e(e));return r}function ayt(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function O1e(e,t,r){if(!r.cellStyles)return xo(e,t);var n=r&&r.biff>=12?4:2,i=e.read_shift(n),a=e.read_shift(n),s=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(2);n==2&&(e.l+=2);var c={s:i,e:a,w:s,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}function syt(e,t){var r=pt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function oyt(e,t){var r={};return t<32||(e.l+=16,r.header=uo(e),r.footer=uo(e),e.l+=2),r}function lyt(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var i=e.read_shift(1);return e.l+=3,i&16&&(n.area=!0),n}function cyt(e){for(var t=pt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var uyt=kf,dyt=w1e,fyt=UC;function hyt(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),i={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,i}function pyt(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=kf(e);++e.l;var i=t1(e,t-7,r);return n.t="str",n.val=i,n}function myt(e){var t=kf(e);++e.l;var r=uo(e);return t.t="n",t.val=r,t}function gyt(e,t,r){var n=pt(15);return WC(n,e,t),n.write_shift(8,r,"f"),n}function xyt(e){var t=kf(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function vyt(e,t,r){var n=pt(9);return WC(n,e,t),n.write_shift(2,r),n}function yyt(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function byt(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function wyt(e,t,r){var n=e.l+t,i=kf(e),a=e.read_shift(2),s=vx(e,a,r);return e.l=n,i.t="str",i.val=s,i}var Syt=[2,3,48,49,131,139,140,245],EF=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=yP({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var c=[],d=F0(1);switch(l.type){case"base64":d=Xl(uc(o));break;case"binary":d=Xl(o);break;case"buffer":case"array":d=o;break}Ps(d,0);var f=d.read_shift(1),p=!!(f&136),m=!1,x=!1;switch(f){case 2:break;case 3:break;case 48:m=!0,p=!0;break;case 49:m=!0,p=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var v=0,b=521;f==2&&(v=d.read_shift(2)),d.l+=3,f!=2&&(v=d.read_shift(4)),v>1048576&&(v=1e6),f!=2&&(b=d.read_shift(2));var w=d.read_shift(2),_=l.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(_=e[d[d.l]]),d.l+=1,d.l+=2),x&&(d.l+=36);for(var C=[],N={},R=Math.min(d.length,f==2?521:b-10-(m?264:0)),P=x?32:11;d.l<R&&d[d.l]!=13;)switch(N={},N.name=XS.utils.decode(_,d.slice(d.l,d.l+P)).replace(/[\u0000\r\n].*$/g,""),d.l+=P,N.type=String.fromCharCode(d.read_shift(1)),f!=2&&!x&&(N.offset=d.read_shift(4)),N.len=d.read_shift(1),f==2&&(N.offset=d.read_shift(2)),N.dec=d.read_shift(1),N.name.length&&C.push(N),f!=2&&(d.l+=x?13:14),N.type){case"B":(!m||N.len!=8)&&l.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+N.type)}if(d[d.l]!==13&&(d.l=b-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=b;var O=0,D=0;for(c[0]=[],D=0;D!=C.length;++D)c[0][D]=C[D].name;for(;v-- >0;){if(d[d.l]===42){d.l+=w;continue}for(++d.l,c[++O]=[],D=0,D=0;D!=C.length;++D){var M=d.slice(d.l,d.l+C[D].len);d.l+=C[D].len,Ps(M,0);var B=XS.utils.decode(_,M);switch(C[D].type){case"C":B.trim().length&&(c[O][D]=B.replace(/\s+$/,""));break;case"D":B.length===8?c[O][D]=new Date(+B.slice(0,4),+B.slice(4,6)-1,+B.slice(6,8)):c[O][D]=B;break;case"F":c[O][D]=parseFloat(B.trim());break;case"+":case"I":c[O][D]=x?M.read_shift(-4,"i")^2147483648:M.read_shift(4,"i");break;case"L":switch(B.trim().toUpperCase()){case"Y":case"T":c[O][D]=!0;break;case"N":case"F":c[O][D]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+B+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));c[O][D]="##MEMO##"+(x?parseInt(B.trim(),10):M.read_shift(4));break;case"N":B=B.replace(/\u0000/g,"").trim(),B&&B!="."&&(c[O][D]=+B||0);break;case"@":c[O][D]=new Date(M.read_shift(-8,"f")-621356832e5);break;case"T":c[O][D]=new Date((M.read_shift(4)-2440588)*864e5+M.read_shift(4));break;case"Y":c[O][D]=M.read_shift(4,"i")/1e4+M.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[O][D]=-M.read_shift(-8,"f");break;case"B":if(m&&C[D].len==8){c[O][D]=M.read_shift(8,"f");break}case"G":case"P":M.l+=C[D].len;break;case"0":if(C[D].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+C[D].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=C,c}function n(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var d=Ab(r(o,c),c);return d["!cols"]=c.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete c.DBF,d}function i(o,l){try{return sm(n(o,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function s(o,l){var c=l||{};if(+c.codepage>=0&&Qu(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var d=Cl(),f=gO(o,{header:1,raw:!0,cellDates:!0}),p=f[0],m=f.slice(1),x=o["!cols"]||[],v=0,b=0,w=0,_=1;for(v=0;v<p.length;++v){if(((x[v]||{}).DBF||{}).name){p[v]=x[v].DBF.name,++w;continue}if(p[v]!=null){if(++w,typeof p[v]=="number"&&(p[v]=p[v].toString(10)),typeof p[v]!="string")throw new Error("DBF Invalid column name "+p[v]+" |"+typeof p[v]+"|");if(p.indexOf(p[v])!==v){for(b=0;b<1024;++b)if(p.indexOf(p[v]+"_"+b)==-1){p[v]+="_"+b;break}}}}var C=Rn(o["!ref"]),N=[],R=[],P=[];for(v=0;v<=C.e.c-C.s.c;++v){var O="",D="",M=0,B=[];for(b=0;b<m.length;++b)m[b][v]!=null&&B.push(m[b][v]);if(B.length==0||p[v]==null){N[v]="?";continue}for(b=0;b<B.length;++b){switch(typeof B[b]){case"number":D="B";break;case"string":D="C";break;case"boolean":D="L";break;case"object":D=B[b]instanceof Date?"D":"C";break;default:D="C"}M=Math.max(M,String(B[b]).length),O=O&&O!=D?"C":D}M>250&&(M=250),D=((x[v]||{}).DBF||{}).type,D=="C"&&x[v].DBF.len>M&&(M=x[v].DBF.len),O=="B"&&D=="N"&&(O="N",P[v]=x[v].DBF.dec,M=x[v].DBF.len),R[v]=O=="C"||D=="N"?M:a[O]||0,_+=R[v],N[v]=O}var U=d.next(32);for(U.write_shift(4,318902576),U.write_shift(4,m.length),U.write_shift(2,296+32*w),U.write_shift(2,_),v=0;v<4;++v)U.write_shift(4,0);for(U.write_shift(4,0|(+t[bxe]||3)<<8),v=0,b=0;v<p.length;++v)if(p[v]!=null){var H=d.next(32),Z=(p[v].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);H.write_shift(1,Z,"sbcs"),H.write_shift(1,N[v]=="?"?"C":N[v],"sbcs"),H.write_shift(4,b),H.write_shift(1,R[v]||a[N[v]]||0),H.write_shift(1,P[v]||0),H.write_shift(1,2),H.write_shift(4,0),H.write_shift(1,0),H.write_shift(4,0),H.write_shift(4,0),b+=R[v]||a[N[v]]||0}var ee=d.next(264);for(ee.write_shift(4,13),v=0;v<65;++v)ee.write_shift(4,0);for(v=0;v<m.length;++v){var V=d.next(_);for(V.write_shift(1,0),b=0;b<p.length;++b)if(p[b]!=null)switch(N[b]){case"L":V.write_shift(1,m[v][b]==null?63:m[v][b]?84:70);break;case"B":V.write_shift(8,m[v][b]||0,"f");break;case"N":var te="0";for(typeof m[v][b]=="number"&&(te=m[v][b].toFixed(P[b]||0)),w=0;w<R[b]-te.length;++w)V.write_shift(1,32);V.write_shift(1,te,"sbcs");break;case"D":m[v][b]?(V.write_shift(4,("0000"+m[v][b].getFullYear()).slice(-4),"sbcs"),V.write_shift(2,("00"+(m[v][b].getMonth()+1)).slice(-2),"sbcs"),V.write_shift(2,("00"+m[v][b].getDate()).slice(-2),"sbcs")):V.write_shift(8,"00000000","sbcs");break;case"C":var se=String(m[v][b]!=null?m[v][b]:"").slice(0,R[b]);for(V.write_shift(1,se,"sbcs"),w=0;w<R[b]-se.length;++w)V.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:i,to_sheet:n,from_sheet:s}}(),P1e=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+aa(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(p,m){var x=e[m];return typeof x=="number"?BZ(x):x},n=function(p,m,x){var v=m.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return v==59?p:BZ(v)};e["|"]=254;function i(p,m){switch(m.type){case"base64":return a(uc(p),m);case"binary":return a(p,m);case"buffer":return a(pn&&Buffer.isBuffer(p)?p.toString("binary"):am(p),m);case"array":return a(gx(p),m)}throw new Error("Unrecognized type "+m.type)}function a(p,m){var x=p.split(/[\n\r]+/),v=-1,b=-1,w=0,_=0,C=[],N=[],R=null,P={},O=[],D=[],M=[],B=0,U;for(+m.codepage>=0&&Qu(+m.codepage);w!==x.length;++w){B=0;var H=x[w].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),Z=H.replace(/;;/g,"\0").split(";").map(function(G){return G.replace(/\u0000/g,";")}),ee=Z[0],V;if(H.length>0)switch(ee){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":Z[1].charAt(0)=="P"&&N.push(H.slice(3).replace(/;;/g,";"));break;case"C":var te=!1,se=!1,Q=!1,X=!1,fe=-1,Se=-1;for(_=1;_<Z.length;++_)switch(Z[_].charAt(0)){case"A":break;case"X":b=parseInt(Z[_].slice(1))-1,se=!0;break;case"Y":for(v=parseInt(Z[_].slice(1))-1,se||(b=0),U=C.length;U<=v;++U)C[U]=[];break;case"K":V=Z[_].slice(1),V.charAt(0)==='"'?V=V.slice(1,V.length-1):V==="TRUE"?V=!0:V==="FALSE"?V=!1:isNaN(nd(V))?isNaN(Ly(V).getDate())||(V=ki(V)):(V=nd(V),R!==null&&_b(R)&&(V=wP(V))),te=!0;break;case"E":X=!0;var Y=Pv(Z[_].slice(1),{r:v,c:b});C[v][b]=[C[v][b],Y];break;case"S":Q=!0,C[v][b]=[C[v][b],"S5S"];break;case"G":break;case"R":fe=parseInt(Z[_].slice(1))-1;break;case"C":Se=parseInt(Z[_].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+H)}if(te&&(C[v][b]&&C[v][b].length==2?C[v][b][0]=V:C[v][b]=V,R=null),Q){if(X)throw new Error("SYLK shared formula cannot have own formula");var ce=fe>-1&&C[fe][Se];if(!ce||!ce[1])throw new Error("SYLK shared formula cannot find base");C[v][b][1]=Y1e(ce[1],{r:v-fe,c:b-Se})}break;case"F":var W=0;for(_=1;_<Z.length;++_)switch(Z[_].charAt(0)){case"X":b=parseInt(Z[_].slice(1))-1,++W;break;case"Y":for(v=parseInt(Z[_].slice(1))-1,U=C.length;U<=v;++U)C[U]=[];break;case"M":B=parseInt(Z[_].slice(1))/20;break;case"F":break;case"G":break;case"P":R=N[parseInt(Z[_].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(M=Z[_].slice(1).split(" "),U=parseInt(M[0],10);U<=parseInt(M[1],10);++U)B=parseInt(M[2],10),D[U-1]=B===0?{hidden:!0}:{wch:B},L0(D[U-1]);break;case"C":b=parseInt(Z[_].slice(1))-1,D[b]||(D[b]={});break;case"R":v=parseInt(Z[_].slice(1))-1,O[v]||(O[v]={}),B>0?(O[v].hpt=B,O[v].hpx=Uy(B)):B===0&&(O[v].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+H)}W<1&&(R=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+H)}}return O.length>0&&(P["!rows"]=O),D.length>0&&(P["!cols"]=D),m&&m.sheetRows&&(C=C.slice(0,m.sheetRows)),[C,P]}function s(p,m){var x=i(p,m),v=x[0],b=x[1],w=Ab(v,m);return aa(b).forEach(function(_){w[_]=b[_]}),w}function o(p,m){return sm(s(p,m),m)}function l(p,m,x,v){var b="C;Y"+(x+1)+";X"+(v+1)+";K";switch(p.t){case"n":b+=p.v||0,p.f&&!p.F&&(b+=";E"+H$(p.f,{r:x,c:v}));break;case"b":b+=p.v?"TRUE":"FALSE";break;case"e":b+=p.w||p.v;break;case"d":b+='"'+(p.w||p.v)+'"';break;case"s":b+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function c(p,m){m.forEach(function(x,v){var b="F;W"+(v+1)+" "+(v+1)+" ";x.hidden?b+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=nE(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=iE(x.wpx)),typeof x.wch=="number"&&(b+=Math.round(x.wch))),b.charAt(b.length-1)!=" "&&p.push(b)})}function d(p,m){m.forEach(function(x,v){var b="F;";x.hidden?b+="M0;":x.hpt?b+="M"+20*x.hpt+";":x.hpx&&(b+="M"+20*aE(x.hpx)+";"),b.length>2&&p.push(b+"R"+(v+1))})}function f(p,m){var x=["ID;PWXL;N;E"],v=[],b=Rn(p["!ref"]),w,_=Array.isArray(p),C=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),p["!cols"]&&c(x,p["!cols"]),p["!rows"]&&d(x,p["!rows"]),x.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var N=b.s.r;N<=b.e.r;++N)for(var R=b.s.c;R<=b.e.c;++R){var P=jr({r:N,c:R});w=_?(p[N]||[])[R]:p[P],!(!w||w.v==null&&(!w.f||w.F))&&v.push(l(w,p,N,R))}return x.join(C)+C+v.join(C)+C+"E"+C}return{to_workbook:o,to_sheet:s,from_sheet:f}}(),R1e=function(){function e(a,s){switch(s.type){case"base64":return t(uc(a),s);case"binary":return t(a,s);case"buffer":return t(pn&&Buffer.isBuffer(a)?a.toString("binary"):am(a),s);case"array":return t(gx(a),s)}throw new Error("Unrecognized type "+s.type)}function t(a,s){for(var o=a.split(`
`),l=-1,c=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++l]=[],c=0;continue}if(!(l<0)){var p=o[d].trim().split(","),m=p[0],x=p[1];++d;for(var v=o[d]||"";(v.match(/["]/g)||[]).length&1&&d<o.length-1;)v+=`
`+o[++d];switch(v=v.trim(),+m){case-1:if(v==="BOT"){f[++l]=[],c=0;continue}else if(v!=="EOD")throw new Error("Unrecognized DIF special command "+v);break;case 0:v==="TRUE"?f[l][c]=!0:v==="FALSE"?f[l][c]=!1:isNaN(nd(x))?isNaN(Ly(x).getDate())?f[l][c]=x:f[l][c]=ki(x):f[l][c]=nd(x),++c;break;case 1:v=v.slice(1,v.length-1),v=v.replace(/""/g,'"'),v&&v.match(/^=".*"$/)&&(v=v.slice(2,-1)),f[l][c++]=v!==""?v:null;break}if(v==="EOD")break}}return s&&s.sheetRows&&(f=f.slice(0,s.sheetRows)),f}function r(a,s){return Ab(e(a,s),s)}function n(a,s){return sm(r(a,s),s)}var i=function(){var a=function(l,c,d,f,p){l.push(c),l.push(d+","+f),l.push('"'+p.replace(/"/g,'""')+'"')},s=function(l,c,d,f){l.push(c+","+d),l.push(c==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(l){var c=[],d=Rn(l["!ref"]),f,p=Array.isArray(l);a(c,"TABLE",0,1,"sheetjs"),a(c,"VECTORS",0,d.e.r-d.s.r+1,""),a(c,"TUPLES",0,d.e.c-d.s.c+1,""),a(c,"DATA",0,0,"");for(var m=d.s.r;m<=d.e.r;++m){s(c,-1,0,"BOT");for(var x=d.s.c;x<=d.e.c;++x){var v=jr({r:m,c:x});if(f=p?(l[m]||[])[x]:l[v],!f){s(c,1,0,"");continue}switch(f.t){case"n":var b=f.w;!b&&f.v!=null&&(b=f.v),b==null?f.f&&!f.F?s(c,1,0,"="+f.f):s(c,1,0,""):s(c,0,b,"V");break;case"b":s(c,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":s(c,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=pu(f.z||Rr[14],Wa(ki(f.v)))),s(c,0,f.w,"V");break;default:s(c,1,0,"")}}}s(c,-1,0,"EOD");var w=`\r
`,_=c.join(w);return _}}();return{to_workbook:n,to_sheet:r,from_sheet:i}}(),j1e=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,p){for(var m=f.split(`
`),x=-1,v=-1,b=0,w=[];b!==m.length;++b){var _=m[b].trim().split(":");if(_[0]==="cell"){var C=$i(_[1]);if(w.length<=C.r)for(x=w.length;x<=C.r;++x)w[x]||(w[x]=[]);switch(x=C.r,v=C.c,_[2]){case"t":w[x][v]=e(_[3]);break;case"v":w[x][v]=+_[3];break;case"vtf":var N=_[_.length-1];case"vtc":switch(_[3]){case"nl":w[x][v]=!!+_[4];break;default:w[x][v]=+_[4];break}_[2]=="vtf"&&(w[x][v]=[w[x][v],N])}}}return p&&p.sheetRows&&(w=w.slice(0,p.sheetRows)),w}function n(f,p){return Ab(r(f,p),p)}function i(f,p){return sm(n(f,p),p)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),s=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(f){if(!f||!f["!ref"])return"";for(var p=[],m=[],x,v="",b=Al(f["!ref"]),w=Array.isArray(f),_=b.s.r;_<=b.e.r;++_)for(var C=b.s.c;C<=b.e.c;++C)if(v=jr({r:_,c:C}),x=w?(f[_]||[])[C]:f[v],!(!x||x.v==null||x.t==="z")){switch(m=["cell",v,"t"],x.t){case"s":case"str":m.push(t(x.v));break;case"n":x.f?(m[2]="vtf",m[3]="n",m[4]=x.v,m[5]=t(x.f)):(m[2]="v",m[3]=x.v);break;case"b":m[2]="vt"+(x.f?"f":"c"),m[3]="nl",m[4]=x.v?"1":"0",m[5]=t(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var N=Wa(ki(x.v));m[2]="vtc",m[3]="nd",m[4]=""+N,m[5]=x.w||pu(x.z||Rr[14],N);break;case"e":continue}p.push(m.join(":"))}return p.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function d(f){return[a,s,o,s,c(f),l].join(`
`)}return{to_workbook:i,to_sheet:n,from_sheet:d}}(),By=function(){function e(d,f,p,m,x){x.raw?f[p][m]=d:d===""||(d==="TRUE"?f[p][m]=!0:d==="FALSE"?f[p][m]=!1:isNaN(nd(d))?isNaN(Ly(d).getDate())?f[p][m]=d:f[p][m]=ki(d):f[p][m]=nd(d))}function t(d,f){var p=f||{},m=[];if(!d||d.length===0)return m;for(var x=d.split(/[\r\n]/),v=x.length-1;v>=0&&x[v].length===0;)--v;for(var b=10,w=0,_=0;_<=v;++_)w=x[_].indexOf(" "),w==-1?w=x[_].length:w++,b=Math.max(b,w);for(_=0;_<=v;++_){m[_]=[];var C=0;for(e(x[_].slice(0,b).trim(),m,_,C,p),C=1;C<=(x[_].length-b)/10+1;++C)e(x[_].slice(b+(C-1)*10,b+C*10).trim(),m,_,C,p)}return p.sheetRows&&(m=m.slice(0,p.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function i(d){for(var f={},p=!1,m=0,x=0;m<d.length;++m)(x=d.charCodeAt(m))==34?p=!p:!p&&x in r&&(f[x]=(f[x]||0)+1);x=[];for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&x.push([f[m],m]);if(!x.length){f=n;for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&x.push([f[m],m])}return x.sort(function(v,b){return v[0]-b[0]||n[v[1]]-n[b[1]]}),r[x.pop()[1]]||44}function a(d,f){var p=f||{},m="",x=p.dense?[]:{},v={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(m=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(m=d.charAt(4),d=d.slice(6)):m=i(d.slice(0,1024)):p&&p.FS?m=p.FS:m=i(d.slice(0,1024));var b=0,w=0,_=0,C=0,N=0,R=m.charCodeAt(0),P=!1,O=0,D=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var M=p.dateNF!=null?lxt(p.dateNF):null;function B(){var U=d.slice(C,N),H={};if(U.charAt(0)=='"'&&U.charAt(U.length-1)=='"'&&(U=U.slice(1,-1).replace(/""/g,'"')),U.length===0)H.t="z";else if(p.raw)H.t="s",H.v=U;else if(U.trim().length===0)H.t="s",H.v=U;else if(U.charCodeAt(0)==61)U.charCodeAt(1)==34&&U.charCodeAt(U.length-1)==34?(H.t="s",H.v=U.slice(2,-1).replace(/""/g,'"')):Fwt(U)?(H.t="n",H.f=U.slice(1)):(H.t="s",H.v=U);else if(U=="TRUE")H.t="b",H.v=!0;else if(U=="FALSE")H.t="b",H.v=!1;else if(!isNaN(_=nd(U)))H.t="n",p.cellText!==!1&&(H.w=U),H.v=_;else if(!isNaN(Ly(U).getDate())||M&&U.match(M)){H.z=p.dateNF||Rr[14];var Z=0;M&&U.match(M)&&(U=cxt(U,p.dateNF,U.match(M)||[]),Z=1),p.cellDates?(H.t="d",H.v=ki(U,Z)):(H.t="n",H.v=Wa(ki(U,Z))),p.cellText!==!1&&(H.w=pu(H.z,H.v instanceof Date?Wa(H.v):H.v)),p.cellNF||delete H.z}else H.t="s",H.v=U;if(H.t=="z"||(p.dense?(x[b]||(x[b]=[]),x[b][w]=H):x[jr({c:w,r:b})]=H),C=N+1,D=d.charCodeAt(C),v.e.c<w&&(v.e.c=w),v.e.r<b&&(v.e.r=b),O==R)++w;else if(w=0,++b,p.sheetRows&&p.sheetRows<=b)return!0}e:for(;N<d.length;++N)switch(O=d.charCodeAt(N)){case 34:D===34&&(P=!P);break;case R:case 10:case 13:if(!P&&B())break e;break}return N-C>0&&B(),x["!ref"]=Zr(v),x}function s(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?a(d,f):Ab(t(d,f),f)}function o(d,f){var p="",m=f.type=="string"?[0,0,0,0]:Q$(d,f);switch(f.type){case"base64":p=uc(d);break;case"binary":p=d;break;case"buffer":f.codepage==65001?p=d.toString("utf8"):f.codepage&&typeof XS<"u"||(p=pn&&Buffer.isBuffer(d)?d.toString("binary"):am(d));break;case"array":p=gx(d);break;case"string":p=d;break;default:throw new Error("Unrecognized type "+f.type)}return m[0]==239&&m[1]==187&&m[2]==191?p=si(p.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?p=si(p):f.type=="binary"&&typeof XS<"u",p.slice(0,19)=="socialcalc:version:"?j1e.to_sheet(f.type=="string"?p:si(p),f):s(p,f)}function l(d,f){return sm(o(d,f),f)}function c(d){for(var f=[],p=Rn(d["!ref"]),m,x=Array.isArray(d),v=p.s.r;v<=p.e.r;++v){for(var b=[],w=p.s.c;w<=p.e.c;++w){var _=jr({r:v,c:w});if(m=x?(d[v]||[])[w]:d[_],!m||m.v==null){b.push("          ");continue}for(var C=(m.w||(Kh(m),m.w)||"").slice(0,10);C.length<10;)C+=" ";b.push(C+(w===0?" ":""))}f.push(b.join(""))}return f.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}}();function Eyt(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var i=P1e.to_workbook(e,r);return r.WTF=n,i}catch(a){if(r.WTF=n,!a.message.match(/SYLK bad record ID/)&&n)throw a;return By.to_workbook(e,t)}}var Lg=function(){function e(Y,ce,W){if(Y){Ps(Y,Y.l||0);for(var G=W.Enum||fe;Y.l<Y.length;){var ie=Y.read_shift(2),Ce=G[ie]||G[65535],re=Y.read_shift(2),ne=Y.l+re,ge=Ce.f&&Ce.f(Y,re,W);if(Y.l=ne,ce(ge,Ce,ie))return}}}function t(Y,ce){switch(ce.type){case"base64":return r(Xl(uc(Y)),ce);case"binary":return r(Xl(Y),ce);case"buffer":case"array":return r(Y,ce)}throw"Unsupported type "+ce.type}function r(Y,ce){if(!Y)return Y;var W=ce||{},G=W.dense?[]:{},ie="Sheet1",Ce="",re=0,ne={},ge=[],we=[],q={s:{r:0,c:0},e:{r:0,c:0}},Ae=W.sheetRows||0;if(Y[2]==0&&(Y[3]==8||Y[3]==9)&&Y.length>=16&&Y[14]==5&&Y[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(Y[2]==2)W.Enum=fe,e(Y,function($e,Ze,lt){switch(lt){case 0:W.vers=$e,$e>=4096&&(W.qpro=!0);break;case 6:q=$e;break;case 204:$e&&(Ce=$e);break;case 222:Ce=$e;break;case 15:case 51:W.qpro||($e[1].v=$e[1].v.slice(1));case 13:case 14:case 16:lt==14&&($e[2]&112)==112&&($e[2]&15)>1&&($e[2]&15)<15&&($e[1].z=W.dateNF||Rr[14],W.cellDates&&($e[1].t="d",$e[1].v=wP($e[1].v))),W.qpro&&$e[3]>re&&(G["!ref"]=Zr(q),ne[ie]=G,ge.push(ie),G=W.dense?[]:{},q={s:{r:0,c:0},e:{r:0,c:0}},re=$e[3],ie=Ce||"Sheet"+(re+1),Ce="");var kt=W.dense?(G[$e[0].r]||[])[$e[0].c]:G[jr($e[0])];if(kt){kt.t=$e[1].t,kt.v=$e[1].v,$e[1].z!=null&&(kt.z=$e[1].z),$e[1].f!=null&&(kt.f=$e[1].f);break}W.dense?(G[$e[0].r]||(G[$e[0].r]=[]),G[$e[0].r][$e[0].c]=$e[1]):G[jr($e[0])]=$e[1];break}},W);else if(Y[2]==26||Y[2]==14)W.Enum=Se,Y[2]==14&&(W.qpro=!0,Y.l=0),e(Y,function($e,Ze,lt){switch(lt){case 204:ie=$e;break;case 22:$e[1].v=$e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if($e[3]>re&&(G["!ref"]=Zr(q),ne[ie]=G,ge.push(ie),G=W.dense?[]:{},q={s:{r:0,c:0},e:{r:0,c:0}},re=$e[3],ie="Sheet"+(re+1)),Ae>0&&$e[0].r>=Ae)break;W.dense?(G[$e[0].r]||(G[$e[0].r]=[]),G[$e[0].r][$e[0].c]=$e[1]):G[jr($e[0])]=$e[1],q.e.c<$e[0].c&&(q.e.c=$e[0].c),q.e.r<$e[0].r&&(q.e.r=$e[0].r);break;case 27:$e[14e3]&&(we[$e[14e3][0]]=$e[14e3][1]);break;case 1537:we[$e[0]]=$e[1],$e[0]==re&&(ie=$e[1]);break}},W);else throw new Error("Unrecognized LOTUS BOF "+Y[2]);if(G["!ref"]=Zr(q),ne[Ce||ie]=G,ge.push(Ce||ie),!we.length)return{SheetNames:ge,Sheets:ne};for(var Pe={},He=[],je=0;je<we.length;++je)ne[ge[je]]?(He.push(we[je]||ge[je]),Pe[we[je]]=ne[we[je]]||ne[ge[je]]):(He.push(we[je]),Pe[we[je]]={"!ref":"A1"});return{SheetNames:He,Sheets:Pe}}function n(Y,ce){var W=ce||{};if(+W.codepage>=0&&Qu(+W.codepage),W.type=="string")throw new Error("Cannot write WK1 to JS string");var G=Cl(),ie=Rn(Y["!ref"]),Ce=Array.isArray(Y),re=[];Bt(G,0,a(1030)),Bt(G,6,l(ie));for(var ne=Math.min(ie.e.r,8191),ge=ie.s.r;ge<=ne;++ge)for(var we=ga(ge),q=ie.s.c;q<=ie.e.c;++q){ge===ie.s.r&&(re[q]=Ui(q));var Ae=re[q]+we,Pe=Ce?(Y[ge]||[])[q]:Y[Ae];if(!(!Pe||Pe.t=="z"))if(Pe.t=="n")(Pe.v|0)==Pe.v&&Pe.v>=-32768&&Pe.v<=32767?Bt(G,13,m(ge,q,Pe.v)):Bt(G,14,v(ge,q,Pe.v));else{var He=Kh(Pe);Bt(G,15,f(ge,q,He.slice(0,239)))}}return Bt(G,1),G.end()}function i(Y,ce){var W=ce||{};if(+W.codepage>=0&&Qu(+W.codepage),W.type=="string")throw new Error("Cannot write WK3 to JS string");var G=Cl();Bt(G,0,s(Y));for(var ie=0,Ce=0;ie<Y.SheetNames.length;++ie)(Y.Sheets[Y.SheetNames[ie]]||{})["!ref"]&&Bt(G,27,X(Y.SheetNames[ie],Ce++));var re=0;for(ie=0;ie<Y.SheetNames.length;++ie){var ne=Y.Sheets[Y.SheetNames[ie]];if(!(!ne||!ne["!ref"])){for(var ge=Rn(ne["!ref"]),we=Array.isArray(ne),q=[],Ae=Math.min(ge.e.r,8191),Pe=ge.s.r;Pe<=Ae;++Pe)for(var He=ga(Pe),je=ge.s.c;je<=ge.e.c;++je){Pe===ge.s.r&&(q[je]=Ui(je));var $e=q[je]+He,Ze=we?(ne[Pe]||[])[je]:ne[$e];if(!(!Ze||Ze.t=="z"))if(Ze.t=="n")Bt(G,23,B(Pe,je,re,Ze.v));else{var lt=Kh(Ze);Bt(G,22,O(Pe,je,re,lt.slice(0,239)))}}++re}}return Bt(G,1),G.end()}function a(Y){var ce=pt(2);return ce.write_shift(2,Y),ce}function s(Y){var ce=pt(26);ce.write_shift(2,4096),ce.write_shift(2,4),ce.write_shift(4,0);for(var W=0,G=0,ie=0,Ce=0;Ce<Y.SheetNames.length;++Ce){var re=Y.SheetNames[Ce],ne=Y.Sheets[re];if(!(!ne||!ne["!ref"])){++ie;var ge=Al(ne["!ref"]);W<ge.e.r&&(W=ge.e.r),G<ge.e.c&&(G=ge.e.c)}}return W>8191&&(W=8191),ce.write_shift(2,W),ce.write_shift(1,ie),ce.write_shift(1,G),ce.write_shift(2,0),ce.write_shift(2,0),ce.write_shift(1,1),ce.write_shift(1,2),ce.write_shift(4,0),ce.write_shift(4,0),ce}function o(Y,ce,W){var G={s:{c:0,r:0},e:{c:0,r:0}};return ce==8&&W.qpro?(G.s.c=Y.read_shift(1),Y.l++,G.s.r=Y.read_shift(2),G.e.c=Y.read_shift(1),Y.l++,G.e.r=Y.read_shift(2),G):(G.s.c=Y.read_shift(2),G.s.r=Y.read_shift(2),ce==12&&W.qpro&&(Y.l+=2),G.e.c=Y.read_shift(2),G.e.r=Y.read_shift(2),ce==12&&W.qpro&&(Y.l+=2),G.s.c==65535&&(G.s.c=G.e.c=G.s.r=G.e.r=0),G)}function l(Y){var ce=pt(8);return ce.write_shift(2,Y.s.c),ce.write_shift(2,Y.s.r),ce.write_shift(2,Y.e.c),ce.write_shift(2,Y.e.r),ce}function c(Y,ce,W){var G=[{c:0,r:0},{t:"n",v:0},0,0];return W.qpro&&W.vers!=20768?(G[0].c=Y.read_shift(1),G[3]=Y.read_shift(1),G[0].r=Y.read_shift(2),Y.l+=2):(G[2]=Y.read_shift(1),G[0].c=Y.read_shift(2),G[0].r=Y.read_shift(2)),G}function d(Y,ce,W){var G=Y.l+ce,ie=c(Y,ce,W);if(ie[1].t="s",W.vers==20768){Y.l++;var Ce=Y.read_shift(1);return ie[1].v=Y.read_shift(Ce,"utf8"),ie}return W.qpro&&Y.l++,ie[1].v=Y.read_shift(G-Y.l,"cstr"),ie}function f(Y,ce,W){var G=pt(7+W.length);G.write_shift(1,255),G.write_shift(2,ce),G.write_shift(2,Y),G.write_shift(1,39);for(var ie=0;ie<G.length;++ie){var Ce=W.charCodeAt(ie);G.write_shift(1,Ce>=128?95:Ce)}return G.write_shift(1,0),G}function p(Y,ce,W){var G=c(Y,ce,W);return G[1].v=Y.read_shift(2,"i"),G}function m(Y,ce,W){var G=pt(7);return G.write_shift(1,255),G.write_shift(2,ce),G.write_shift(2,Y),G.write_shift(2,W,"i"),G}function x(Y,ce,W){var G=c(Y,ce,W);return G[1].v=Y.read_shift(8,"f"),G}function v(Y,ce,W){var G=pt(13);return G.write_shift(1,255),G.write_shift(2,ce),G.write_shift(2,Y),G.write_shift(8,W,"f"),G}function b(Y,ce,W){var G=Y.l+ce,ie=c(Y,ce,W);if(ie[1].v=Y.read_shift(8,"f"),W.qpro)Y.l=G;else{var Ce=Y.read_shift(2);N(Y.slice(Y.l,Y.l+Ce),ie),Y.l+=Ce}return ie}function w(Y,ce,W){var G=ce&32768;return ce&=-32769,ce=(G?Y:0)+(ce>=8192?ce-16384:ce),(G?"":"$")+(W?Ui(ce):ga(ce))}var _={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},C=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function N(Y,ce){Ps(Y,0);for(var W=[],G=0,ie="",Ce="",re="",ne="";Y.l<Y.length;){var ge=Y[Y.l++];switch(ge){case 0:W.push(Y.read_shift(8,"f"));break;case 1:Ce=w(ce[0].c,Y.read_shift(2),!0),ie=w(ce[0].r,Y.read_shift(2),!1),W.push(Ce+ie);break;case 2:{var we=w(ce[0].c,Y.read_shift(2),!0),q=w(ce[0].r,Y.read_shift(2),!1);Ce=w(ce[0].c,Y.read_shift(2),!0),ie=w(ce[0].r,Y.read_shift(2),!1),W.push(we+q+":"+Ce+ie)}break;case 3:if(Y.l<Y.length){console.error("WK1 premature formula end");return}break;case 4:W.push("("+W.pop()+")");break;case 5:W.push(Y.read_shift(2));break;case 6:{for(var Ae="";ge=Y[Y.l++];)Ae+=String.fromCharCode(ge);W.push('"'+Ae.replace(/"/g,'""')+'"')}break;case 8:W.push("-"+W.pop());break;case 23:W.push("+"+W.pop());break;case 22:W.push("NOT("+W.pop()+")");break;case 20:case 21:ne=W.pop(),re=W.pop(),W.push(["AND","OR"][ge-20]+"("+re+","+ne+")");break;default:if(ge<32&&C[ge])ne=W.pop(),re=W.pop(),W.push(re+C[ge]+ne);else if(_[ge]){if(G=_[ge][1],G==69&&(G=Y[Y.l++]),G>W.length){console.error("WK1 bad formula parse 0x"+ge.toString(16)+":|"+W.join("|")+"|");return}var Pe=W.slice(-G);W.length-=G,W.push(_[ge][0]+"("+Pe.join(",")+")")}else return ge<=7?console.error("WK1 invalid opcode "+ge.toString(16)):ge<=24?console.error("WK1 unsupported op "+ge.toString(16)):ge<=30?console.error("WK1 invalid opcode "+ge.toString(16)):ge<=115?console.error("WK1 unsupported function opcode "+ge.toString(16)):console.error("WK1 unrecognized opcode "+ge.toString(16))}}W.length==1?ce[1].f=""+W[0]:console.error("WK1 bad formula parse |"+W.join("|")+"|")}function R(Y){var ce=[{c:0,r:0},{t:"n",v:0},0];return ce[0].r=Y.read_shift(2),ce[3]=Y[Y.l++],ce[0].c=Y[Y.l++],ce}function P(Y,ce){var W=R(Y);return W[1].t="s",W[1].v=Y.read_shift(ce-4,"cstr"),W}function O(Y,ce,W,G){var ie=pt(6+G.length);ie.write_shift(2,Y),ie.write_shift(1,W),ie.write_shift(1,ce),ie.write_shift(1,39);for(var Ce=0;Ce<G.length;++Ce){var re=G.charCodeAt(Ce);ie.write_shift(1,re>=128?95:re)}return ie.write_shift(1,0),ie}function D(Y,ce){var W=R(Y);W[1].v=Y.read_shift(2);var G=W[1].v>>1;if(W[1].v&1)switch(G&7){case 0:G=(G>>3)*5e3;break;case 1:G=(G>>3)*500;break;case 2:G=(G>>3)/20;break;case 3:G=(G>>3)/200;break;case 4:G=(G>>3)/2e3;break;case 5:G=(G>>3)/2e4;break;case 6:G=(G>>3)/16;break;case 7:G=(G>>3)/64;break}return W[1].v=G,W}function M(Y,ce){var W=R(Y),G=Y.read_shift(4),ie=Y.read_shift(4),Ce=Y.read_shift(2);if(Ce==65535)return G===0&&ie===3221225472?(W[1].t="e",W[1].v=15):G===0&&ie===3489660928?(W[1].t="e",W[1].v=42):W[1].v=0,W;var re=Ce&32768;return Ce=(Ce&32767)-16446,W[1].v=(1-re*2)*(ie*Math.pow(2,Ce+32)+G*Math.pow(2,Ce)),W}function B(Y,ce,W,G){var ie=pt(14);if(ie.write_shift(2,Y),ie.write_shift(1,W),ie.write_shift(1,ce),G==0)return ie.write_shift(4,0),ie.write_shift(4,0),ie.write_shift(2,65535),ie;var Ce=0,re=0,ne=0,ge=0;return G<0&&(Ce=1,G=-G),re=Math.log2(G)|0,G/=Math.pow(2,re-31),ge=G>>>0,ge&2147483648||(G/=2,++re,ge=G>>>0),G-=ge,ge|=2147483648,ge>>>=0,G*=Math.pow(2,32),ne=G>>>0,ie.write_shift(4,ne),ie.write_shift(4,ge),re+=16383+(Ce?32768:0),ie.write_shift(2,re),ie}function U(Y,ce){var W=M(Y);return Y.l+=ce-14,W}function H(Y,ce){var W=R(Y),G=Y.read_shift(4);return W[1].v=G>>6,W}function Z(Y,ce){var W=R(Y),G=Y.read_shift(8,"f");return W[1].v=G,W}function ee(Y,ce){var W=Z(Y);return Y.l+=ce-10,W}function V(Y,ce){return Y[Y.l+ce-1]==0?Y.read_shift(ce,"cstr"):""}function te(Y,ce){var W=Y[Y.l++];W>ce-1&&(W=ce-1);for(var G="";G.length<W;)G+=String.fromCharCode(Y[Y.l++]);return G}function se(Y,ce,W){if(!(!W.qpro||ce<21)){var G=Y.read_shift(1);Y.l+=17,Y.l+=1,Y.l+=2;var ie=Y.read_shift(ce-21,"cstr");return[G,ie]}}function Q(Y,ce){for(var W={},G=Y.l+ce;Y.l<G;){var ie=Y.read_shift(2);if(ie==14e3){for(W[ie]=[0,""],W[ie][0]=Y.read_shift(2);Y[Y.l];)W[ie][1]+=String.fromCharCode(Y[Y.l]),Y.l++;Y.l++}}return W}function X(Y,ce){var W=pt(5+Y.length);W.write_shift(2,14e3),W.write_shift(2,ce);for(var G=0;G<Y.length;++G){var ie=Y.charCodeAt(G);W[W.l++]=ie>127?95:ie}return W[W.l++]=0,W}var fe={0:{n:"BOF",f:ka},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:V},222:{n:"SHEETNAMELP",f:te},65535:{n:""}},Se={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:P},23:{n:"NUMBER17",f:M},24:{n:"NUMBER18",f:D},25:{n:"FORMULA19",f:U},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Q},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:H},38:{n:"??"},39:{n:"NUMBER27",f:Z},40:{n:"FORMULA28",f:ee},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:V},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:se},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:i,to_workbook:t}}();function Cyt(e){var t={},r=e.match(bo),n=0,i=!1;if(r)for(;n!=r.length;++n){var a=Dr(r[n]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;t.cp=p$[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=a.val;break;case"<sz":t.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":a.rgb&&(t.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a[0].charCodeAt(1)!==47&&!i)throw new Error("Unrecognized rich format "+a[0])}}return t}var kyt=function(){var e=JS("t"),t=JS("rPr");function r(a){var s=a.match(e);if(!s)return{t:"s",v:""};var o={t:"s",v:Pn(s[1])},l=a.match(t);return l&&(o.s=Cyt(l[1])),o}var n=/<(?:\w+:)?r>/g,i=/<\/(?:\w+:)?r>/;return function(s){return s.replace(n,"").split(i).map(r).filter(function(o){return o.v})}}(),_yt=function(){var t=/(\r\n|\n)/g;function r(i,a,s){var o=[];i.u&&o.push("text-decoration: underline;"),i.uval&&o.push("text-underline-style:"+i.uval+";"),i.sz&&o.push("font-size:"+i.sz+"pt;"),i.outline&&o.push("text-effect: outline;"),i.shadow&&o.push("text-shadow: auto;"),a.push('<span style="'+o.join("")+'">'),i.b&&(a.push("<b>"),s.push("</b>")),i.i&&(a.push("<i>"),s.push("</i>")),i.strike&&(a.push("<s>"),s.push("</s>"));var l=i.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(a.push("<"+l+">"),s.push("</"+l+">")),s.push("</span>"),i}function n(i){var a=[[],i.v,[]];return i.v?(i.s&&r(i.s,a[0],a[2]),a[0].join("")+a[1].replace(t,"<br/>")+a[2].join("")):""}return function(a){return a.map(n).join("")}}(),Nyt=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Ayt=/<(?:\w+:)?r>/,Tyt=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function L$(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Pn(si(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=si(e),r&&(n.h=C$(n.t))):e.match(Ayt)&&(n.r=si(e),n.t=Pn(si((e.replace(Tyt,"").match(Nyt)||[]).join("").replace(bo,""))),r&&(n.h=_yt(kyt(n.r)))),n):{t:""}}var Iyt=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Oyt=/<(?:\w+:)?(?:si|sstItem)>/g,Pyt=/<\/(?:\w+:)?(?:si|sstItem)>/;function Ryt(e,t){var r=[],n="";if(!e)return r;var i=e.match(Iyt);if(i){n=i[2].replace(Oyt,"").split(Pyt);for(var a=0;a!=n.length;++a){var s=L$(n[a].trim(),t);s!=null&&(r[r.length]=s)}i=Dr(i[1]),r.Count=i.count,r.Unique=i.uniqueCount}return r}var jyt=/^\s|\s$|[\t\n\r]/;function D1e(e,t){if(!t.bookSST)return"";var r=[ba];r[r.length]=Ft("sst",null,{xmlns:Yx[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var i=e[n],a="<si>";i.r?a+=i.r:(a+="<t",i.t||(i.t=""),i.t.match(jyt)&&(a+=' xml:space="preserve"'),a+=">"+ti(i.t)+"</t>"),a+="</si>",r[r.length]=a}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function Dyt(e){return[e.read_shift(4),e.read_shift(4)]}function Myt(e,t){var r=[],n=!1;return lp(e,function(a,s,o){switch(o){case 159:r.Count=a[0],r.Unique=a[1];break;case 19:r.push(a);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(s.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function Fyt(e,t){return t||(t=pt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var Lyt=Kxt;function Byt(e){var t=Cl();Ct(t,159,Fyt(e));for(var r=0;r<e.length;++r)Ct(t,19,Lyt(e[r]));return Ct(t,160),t.end()}function M1e(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function Ah(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function Uyt(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Ah(e,4),t.U=Ah(e,4),t.W=Ah(e,4),t}function $yt(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},i=e.read_shift(4),a=[];i-- >0;)a.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=a,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function zyt(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push($yt(e));return t}function Hyt(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function Wyt(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Ah(e,4),t.U=Ah(e,4),t.W=Ah(e,4),t}function Vyt(e){var t=Wyt(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function F1e(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var i=!1;switch(n.AlgID){case 26126:case 26127:case 26128:i=n.Flags==36;break;case 26625:i=n.Flags==4;break;case 0:i=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!i)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function L1e(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function qyt(e){var t=Ah(e);switch(t.Minor){case 2:return[t.Minor,Gyt(e)];case 3:return[t.Minor,Kyt()];case 4:return[t.Minor,Xyt(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function Gyt(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=F1e(e,r),i=L1e(e,e.length-e.l);return{t:"Std",h:n,v:i}}function Kyt(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Xyt(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(bo,function(a){var s=Dr(a);switch(Cf(s[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=s[o]});break;case"<dataIntegrity":n.encryptedHmacKey=s.encryptedHmacKey,n.encryptedHmacValue=s.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=s.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(s);break;default:throw s[0]}}),n}function Yyt(e,t){var r={},n=r.EncryptionVersionInfo=Ah(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var i=e.read_shift(4);return t-=4,r.EncryptionHeader=F1e(e,i),t-=i,r.EncryptionVerifier=L1e(e,t),r}function Qyt(e){var t={},r=t.EncryptionVersionInfo=Ah(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function B$(e){var t=0,r,n=M1e(e),i=n.length+1,a,s,o,l,c;for(r=F0(i),r[0]=n.length,a=1;a!=i;++a)r[a]=n[a-1];for(a=i-1;a>=0;--a)s=r[a],o=t&16384?1:0,l=t<<1&32767,c=o|l,t=c^s;return t^52811}var B1e=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(s){return(s/2|s*128)&255},i=function(s,o){return n(s^o)},a=function(s){for(var o=t[s.length-1],l=104,c=s.length-1;c>=0;--c)for(var d=s[c],f=0;f!=7;++f)d&64&&(o^=r[l]),d*=2,--l;return o};return function(s){for(var o=M1e(s),l=a(o),c=o.length,d=F0(16),f=0;f!=16;++f)d[f]=0;var p,m,x;for((c&1)===1&&(p=l>>8,d[c]=i(e[0],p),--c,p=l&255,m=o[o.length-1],d[c]=i(m,p));c>0;)--c,p=l>>8,d[c]=i(o[c],p),--c,p=l&255,d[c]=i(o[c],p);for(c=15,x=15-o.length;x>0;)p=l>>8,d[c]=i(e[x],p),--c,--x,p=l&255,d[c]=i(o[c],p),--c,--x;return d}}(),Jyt=function(e,t,r,n,i){i||(i=t),n||(n=B1e(e));var a,s;for(a=0;a!=t.length;++a)s=t[a],s^=n[r],s=(s>>5|s<<3)&255,i[a]=s,++r;return[i,r,n]},Zyt=function(e){var t=0,r=B1e(e);return function(n){var i=Jyt("",n,t,r);return t=i[1],i[0]}};function ebt(e,t,r,n){var i={key:ka(e),verificationBytes:ka(e)};return r.password&&(i.verifier=B$(r.password)),n.valid=i.verificationBytes===i.verifier,n.valid&&(n.insitu=Zyt(r.password)),i}function tbt(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=Qyt(e):n.Data=Yyt(e,t),n}function rbt(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?tbt(e,t-2,n):ebt(e,r.biff>=8?t:t-2,r,n),n}var U1e=function(){function e(i,a){switch(a.type){case"base64":return t(uc(i),a);case"binary":return t(i,a);case"buffer":return t(pn&&Buffer.isBuffer(i)?i.toString("binary"):am(i),a);case"array":return t(gx(i),a)}throw new Error("Unrecognized type "+a.type)}function t(i,a){var s=a||{},o=s.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var p=/\\\w+\b/g,m=0,x,v=-1;x=p.exec(d);){switch(x[0]){case"\\cell":var b=d.slice(m,p.lastIndex-x[0].length);if(b[0]==" "&&(b=b.slice(1)),++v,b.length){var w={v:b,t:"s"};Array.isArray(o)?o[f][v]=w:o[jr({r:f,c:v})]=w}break}m=p.lastIndex}v>c.e.c&&(c.e.c=v)}),o["!ref"]=Zr(c),o}function r(i,a){return sm(e(i,a),a)}function n(i){for(var a=["{\\rtf1\\ansi"],s=Rn(i["!ref"]),o,l=Array.isArray(i),c=s.s.r;c<=s.e.r;++c){a.push("\\trowd\\trautofit1");for(var d=s.s.c;d<=s.e.c;++d)a.push("\\cellx"+(d+1));for(a.push("\\pard\\intbl"),d=s.s.c;d<=s.e.c;++d){var f=jr({r:c,c:d});o=l?(i[c]||[])[d]:i[f],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(Kh(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function nbt(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function rE(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function ibt(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.max(t,r,n),a=Math.min(t,r,n),s=i-a;if(s===0)return[0,0,t];var o=0,l=0,c=i+a;switch(l=s/(c>1?2-c:c),i){case t:o=((r-n)/s+6)%6;break;case r:o=(n-t)/s+2;break;case n:o=(t-r)/s+4;break}return[o/6,l,c/2]}function abt(e){var t=e[0],r=e[1],n=e[2],i=r*2*(n<.5?n:1-n),a=n-i/2,s=[a,a,a],o=6*t,l;if(r!==0)switch(o|0){case 0:case 6:l=i*o,s[0]+=i,s[1]+=l;break;case 1:l=i*(2-o),s[0]+=l,s[1]+=i;break;case 2:l=i*(o-2),s[1]+=i,s[2]+=l;break;case 3:l=i*(4-o),s[1]+=l,s[2]+=i;break;case 4:l=i*(o-4),s[2]+=i,s[0]+=l;break;case 5:l=i*(6-o),s[2]+=l,s[0]+=i;break}for(var c=0;c!=3;++c)s[c]=Math.round(s[c]*255);return s}function hO(e,t){if(t===0)return e;var r=ibt(nbt(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),rE(abt(r))}var $1e=6,sbt=15,obt=1,lo=$1e;function nE(e){return Math.floor((e+Math.round(128/lo)/256)*lo)}function iE(e){return Math.floor((e-5)/lo*100+.5)/100}function pO(e){return Math.round((e*lo+5)/lo*256)/256}function xM(e){return pO(iE(nE(e)))}function U$(e){var t=Math.abs(e-xM(e)),r=lo;if(t>.005)for(lo=obt;lo<sbt;++lo)Math.abs(e-xM(e))<=t&&(t=Math.abs(e-xM(e)),r=lo);lo=r}function L0(e){e.width?(e.wpx=nE(e.width),e.wch=iE(e.wpx),e.MDW=lo):e.wpx?(e.wch=iE(e.wpx),e.width=pO(e.wch),e.MDW=lo):typeof e.wch=="number"&&(e.width=pO(e.wch),e.wpx=nE(e.width),e.MDW=lo),e.customWidth&&delete e.customWidth}var lbt=96,z1e=lbt;function aE(e){return e*96/z1e}function Uy(e){return e*z1e/96}var cbt={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function ubt(e,t,r,n){t.Borders=[];var i={},a=!1;(e[0].match(bo)||[]).forEach(function(s){var o=Dr(s);switch(Cf(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":i={},o.diagonalUp&&(i.diagonalUp=Si(o.diagonalUp)),o.diagonalDown&&(i.diagonalDown=Si(o.diagonalDown)),t.Borders.push(i);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in borders")}})}function dbt(e,t,r,n){t.Fills=[];var i={},a=!1;(e[0].match(bo)||[]).forEach(function(s){var o=Dr(s);switch(Cf(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":i={},t.Fills.push(i);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(i),i={};break;case"<patternFill":case"<patternFill>":o.patternType&&(i.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":i.bgColor||(i.bgColor={}),o.indexed&&(i.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(i.bgColor.theme=parseInt(o.theme,10)),o.tint&&(i.bgColor.tint=parseFloat(o.tint)),o.rgb&&(i.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":i.fgColor||(i.fgColor={}),o.theme&&(i.fgColor.theme=parseInt(o.theme,10)),o.tint&&(i.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(i.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fills")}})}function fbt(e,t,r,n){t.Fonts=[];var i={},a=!1;(e[0].match(bo)||[]).forEach(function(s){var o=Dr(s);switch(Cf(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(i),i={};break;case"<name":o.val&&(i.name=si(o.val));break;case"<name/>":case"</name>":break;case"<b":i.bold=o.val?Si(o.val):1;break;case"<b/>":i.bold=1;break;case"<i":i.italic=o.val?Si(o.val):1;break;case"<i/>":i.italic=1;break;case"<u":switch(o.val){case"none":i.underline=0;break;case"single":i.underline=1;break;case"double":i.underline=2;break;case"singleAccounting":i.underline=33;break;case"doubleAccounting":i.underline=34;break}break;case"<u/>":i.underline=1;break;case"<strike":i.strike=o.val?Si(o.val):1;break;case"<strike/>":i.strike=1;break;case"<outline":i.outline=o.val?Si(o.val):1;break;case"<outline/>":i.outline=1;break;case"<shadow":i.shadow=o.val?Si(o.val):1;break;case"<shadow/>":i.shadow=1;break;case"<condense":i.condense=o.val?Si(o.val):1;break;case"<condense/>":i.condense=1;break;case"<extend":i.extend=o.val?Si(o.val):1;break;case"<extend/>":i.extend=1;break;case"<sz":o.val&&(i.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(i.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(i.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(i.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=p$[parseInt(o.val,10)];break;case"<color":if(i.color||(i.color={}),o.auto&&(i.color.auto=Si(o.auto)),o.rgb)i.color.rgb=o.rgb.slice(-6);else if(o.indexed){i.color.index=parseInt(o.indexed,10);var l=Mg[i.color.index];i.color.index==81&&(l=Mg[1]),l||(l=Mg[1]),i.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(i.color.theme=parseInt(o.theme,10),o.tint&&(i.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(i.color.rgb=hO(r.themeElements.clrScheme[i.color.theme].rgb,i.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fonts")}})}function hbt(e,t,r){t.NumberFmt=[];for(var n=aa(Rr),i=0;i<n.length;++i)t.NumberFmt[n[i]]=Rr[n[i]];var a=e[0].match(bo);if(a)for(i=0;i<a.length;++i){var s=Dr(a[i]);switch(Cf(s[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Pn(si(s.formatCode)),l=parseInt(s.numFmtId,10);if(t.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&t.NumberFmt[l]!=null;--l);t.NumberFmt[l]=o}Nh(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+s[0]+" in numFmts")}}}function pbt(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Ft("numFmt",null,{numFmtId:n,formatCode:ti(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Ft("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var mN=["numFmtId","fillId","fontId","borderId","xfId"],gN=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function mbt(e,t,r){t.CellXf=[];var n,i=!1;(e[0].match(bo)||[]).forEach(function(a){var s=Dr(a),o=0;switch(Cf(s[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=s,delete n[0],o=0;o<mN.length;++o)n[mN[o]]&&(n[mN[o]]=parseInt(n[mN[o]],10));for(o=0;o<gN.length;++o)n[gN[o]]&&(n[gN[o]]=Si(n[gN[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};s.vertical&&(l.vertical=s.vertical),s.horizontal&&(l.horizontal=s.horizontal),s.textRotation!=null&&(l.textRotation=s.textRotation),s.indent&&(l.indent=s.indent),s.wrapText&&(l.wrapText=Si(s.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(r&&r.WTF&&!i)throw new Error("unrecognized "+s[0]+" in cellXfs")}})}function gbt(e){var t=[];return t[t.length]=Ft("cellXfs",null),e.forEach(function(r){t[t.length]=Ft("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Ft("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var xbt=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,i=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,c){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(t))&&hbt(f,d,c),(f=o.match(i))&&fbt(f,d,l,c),(f=o.match(n))&&dbt(f,d,l,c),(f=o.match(a))&&ubt(f,d,l,c),(f=o.match(r))&&mbt(f,d,c),d}}();function H1e(e,t){var r=[ba,Ft("styleSheet",null,{xmlns:Yx[0],"xmlns:vt":za.vt})],n;return e.SSF&&(n=pbt(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=gbt(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function vbt(e,t){var r=e.read_shift(2),n=po(e);return[r,n]}function ybt(e,t,r){r||(r=pt(6+4*t.length)),r.write_shift(2,e),ps(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function bbt(e,t,r){var n={};n.sz=e.read_shift(2)/20;var i=t1t(e);i.fItalic&&(n.italic=1),i.fCondense&&(n.condense=1),i.fExtend&&(n.extend=1),i.fShadow&&(n.shadow=1),i.fOutline&&(n.outline=1),i.fStrikeout&&(n.strike=1);var a=e.read_shift(2);switch(a===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var s=e.read_shift(1);s!=0&&(n.underline=s);var o=e.read_shift(1);o>0&&(n.family=o);var l=e.read_shift(1);switch(l>0&&(n.charset=l),e.l++,n.color=e1t(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=po(e),n}function wbt(e,t){t||(t=pt(25+4*32)),t.write_shift(2,e.sz*20),r1t(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),uO(e.color,t);var n=0;return n=2,t.write_shift(1,n),ps(e.name,t),t.length>t.l?t.slice(0,t.l):t}var Sbt=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],vM,Ebt=xo;function Tee(e,t){t||(t=pt(4*3+8*7+16*1)),vM||(vM=yP(Sbt));var r=vM[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(uO({auto:1},t),uO({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Cbt(e,t){var r=e.l+t,n=e.read_shift(2),i=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:i}}function W1e(e,t,r){r||(r=pt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Bw(e,t){return t||(t=pt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var kbt=xo;function _bt(e,t){return t||(t=pt(51)),t.write_shift(1,0),Bw(null,t),Bw(null,t),Bw(null,t),Bw(null,t),Bw(null,t),t.length>t.l?t.slice(0,t.l):t}function Nbt(e,t){return t||(t=pt(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),cO(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function Abt(e,t,r){var n=pt(2052);return n.write_shift(4,e),cO(t,n),cO(r,n),n.length>n.l?n.slice(0,n.l):n}function Tbt(e,t,r){var n={};n.NumberFmt=[];for(var i in Rr)n.NumberFmt[i]=Rr[i];n.CellXf=[],n.Fonts=[];var a=[],s=!1;return lp(e,function(l,c,d){switch(d){case 44:n.NumberFmt[l[0]]=l[1],Nh(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(l.color.rgb=hO(t.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:a.push(d),s=!0;break;case 38:a.pop(),s=!1;break;default:if(c.T>0)a.push(d);else if(c.T<0)a.pop();else if(!s||r.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function Ibt(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)t[i]!=null&&++r}),r!=0&&(Ct(e,615,id(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)t[i]!=null&&Ct(e,44,ybt(i,t[i]))}),Ct(e,616))}}function Obt(e){var t=1;Ct(e,611,id(t)),Ct(e,43,wbt({sz:12,color:{theme:1},name:"Calibri",family:2})),Ct(e,612)}function Pbt(e){var t=2;Ct(e,603,id(t)),Ct(e,45,Tee({patternType:"none"})),Ct(e,45,Tee({patternType:"gray125"})),Ct(e,604)}function Rbt(e){var t=1;Ct(e,613,id(t)),Ct(e,46,_bt()),Ct(e,614)}function jbt(e){var t=1;Ct(e,626,id(t)),Ct(e,47,W1e({numFmtId:0},65535)),Ct(e,627)}function Dbt(e,t){Ct(e,617,id(t.length)),t.forEach(function(r){Ct(e,47,W1e(r,0))}),Ct(e,618)}function Mbt(e){var t=1;Ct(e,619,id(t)),Ct(e,48,Nbt({xfId:0,name:"Normal"})),Ct(e,620)}function Fbt(e){var t=0;Ct(e,505,id(t)),Ct(e,506)}function Lbt(e){var t=0;Ct(e,508,Abt(t,"TableStyleMedium9","PivotStyleMedium4")),Ct(e,509)}function Bbt(e,t){var r=Cl();return Ct(r,278),Ibt(r,e.SSF),Obt(r),Pbt(r),Rbt(r),jbt(r),Dbt(r,t.cellXfs),Mbt(r),Fbt(r),Lbt(r),Ct(r,279),r.end()}var Ubt=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function $bt(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(bo)||[]).forEach(function(i){var a=Dr(i);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=a.val;break;case"<a:sysClr":n.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(t.themeElements.clrScheme[Ubt.indexOf(a[0])]=n,n={}):n.name=a[0].slice(3,a[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function zbt(){}function Hbt(){}var Wbt=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Vbt=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,qbt=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Gbt(e,t,r){t.themeElements={};var n;[["clrScheme",Wbt,$bt],["fontScheme",Vbt,zbt],["fmtScheme",qbt,Hbt]].forEach(function(i){if(!(n=e.match(i[1])))throw new Error(i[0]+" not found in themeElements");i[2](n,t,r)})}var Kbt=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function V1e(e,t){(!e||e.length===0)&&(e=$$());var r,n={};if(!(r=e.match(Kbt)))throw new Error("themeElements not found in theme");return Gbt(r[0],n,t),n.raw=e,n}function $$(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[ba];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Xbt(e,t,r){var n=e.l+t,i=e.read_shift(4);if(i!==124226){if(!r.cellStyles){e.l=n;return}var a=e.slice(e.l);e.l=n;var s;try{s=Fxe(a,{type:"array"})}catch{return}var o=Yl(s,"theme/theme/theme1.xml",!0);if(o)return V1e(o,r)}}function Ybt(e){return e.read_shift(4)}function Qbt(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=Jbt(e,4);break;case 2:t.xclrValue=C1e(e);break;case 3:t.xclrValue=Ybt(e);break;case 4:e.l+=4;break}return e.l+=8,t}function Jbt(e,t){return xo(e,t)}function Zbt(e,t){return xo(e,t)}function ewt(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=Qbt(e);break;case 6:n[1]=Zbt(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function twt(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var i=e.read_shift(2),a=[];i-- >0;)a.push(ewt(e,r-e.l));return{ixfe:n,ext:a}}function rwt(e,t){t.forEach(function(r){switch(r[0]){}})}function nwt(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:po(e)}}function iwt(e){var t=pt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),ps(e.name,t),t.slice(0,t.l)}function awt(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function swt(e){var t=pt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function owt(e,t){var r=pt(8+2*t.length);return r.write_shift(4,e),ps(t,r),r.slice(0,r.l)}function lwt(e){return e.l+=4,e.read_shift(4)!=0}function cwt(e,t){var r=pt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function uwt(e,t,r){var n={Types:[],Cell:[],Value:[]},i=r||{},a=[],s=!1,o=2;return lp(e,function(l,c,d){switch(d){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:a.push(d),s=!0;break;case 36:a.pop(),s=!1;break;default:if(!c.T){if(!s||i.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function dwt(){var e=Cl();return Ct(e,332),Ct(e,334,id(1)),Ct(e,335,iwt({name:"XLDAPR",version:12e4,flags:3496657072})),Ct(e,336),Ct(e,339,owt(1,"XLDAPR")),Ct(e,52),Ct(e,35,id(514)),Ct(e,4096,id(0)),Ct(e,4097,$c(1)),Ct(e,36),Ct(e,53),Ct(e,340),Ct(e,337,cwt(1)),Ct(e,51,swt([[1,0]])),Ct(e,338),Ct(e,333),e.end()}function fwt(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var i=!1,a=2,s;return e.replace(bo,function(o){var l=Dr(o);switch(Cf(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var c=0;c<n.Types.length;++c)n.Types[c].name==l.name&&(s=n.Types[c]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):a==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;case"<rvb":if(!s)break;s.offsets||(s.offsets=[]),s.offsets.push(+l.i);break;default:if(!i&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function q1e(){var e=[ba];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function hwt(e){var t=[];if(!e)return t;var r=1;return(e.match(bo)||[]).forEach(function(n){var i=Dr(n);switch(i[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete i[0],i.i?r=i.i:i.i=r,t.push(i);break}}),t}function pwt(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=jr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function mwt(e,t,r){var n=[];return lp(e,function(a,s,o){switch(o){case 63:n.push(a);break;default:if(!s.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function gwt(e,t,r,n){if(!e)return e;var i=n||{},a=!1;lp(e,function(o,l,c){switch(c){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!l.T){if(!a||i.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}},i)}function xwt(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var hv=1024;function G1e(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),i=[Ft("xml",null,{"xmlns:v":Vl.v,"xmlns:o":Vl.o,"xmlns:x":Vl.x,"xmlns:mv":Vl.mv}).replace(/\/>/,">"),Ft("o:shapelayout",Ft("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Ft("v:shapetype",[Ft("v:stroke",null,{joinstyle:"miter"}),Ft("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];hv<e*1e3;)hv+=1e3;return t.forEach(function(a){var s=$i(a[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Ft("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,c=Ft("v:fill",l,o),d={on:"t",obscured:"t"};++hv,i=i.concat(["<v:shape"+ZS({id:"_x0000_s"+hv,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",c,Ft("v:shadow",null,d),Ft("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Ds("x:Anchor",[s.c+1,0,s.r+1,0,s.c+3,20,s.r+5,20].join(",")),Ds("x:AutoFill","False"),Ds("x:Row",String(s.r)),Ds("x:Column",String(s.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function Iee(e,t,r,n){var i=Array.isArray(e),a;t.forEach(function(s){var o=$i(s.ref);if(i?(e[o.r]||(e[o.r]=[]),a=e[o.r][o.c]):a=e[s.ref],!a){a={t:"z"},i?e[o.r][o.c]=a:e[s.ref]=a;var l=Rn(e["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var c=Zr(l);c!==e["!ref"]&&(e["!ref"]=c)}a.c||(a.c=[]);var d={a:s.author,t:s.t,r:s.r,T:r};s.h&&(d.h=s.h);for(var f=a.c.length-1;f>=0;--f){if(!r&&a.c[f].T)return;r&&!a.c[f].T&&a.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}a.c.push(d)})}function vwt(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],i=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);i&&i[1]&&i[1].split(/<\/\w*:?author>/).forEach(function(s){if(!(s===""||s.trim()==="")){var o=s.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var a=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(s){if(!(s===""||s.trim()==="")){var o=s.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=Dr(o[0]),c={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=$i(l.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=s.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),p=!!f&&!!f[1]&&L$(f[1])||{r:"",t:"",h:""};c.r=p.r,p.r=="<t></t>"&&(p.t=p.h=""),c.t=(p.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(c.h=p.h),n.push(c)}}}}),n}function K1e(e){var t=[ba,Ft("comments",null,{xmlns:Yx[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(i){var a=ti(i.a);r.indexOf(a)==-1&&(r.push(a),t.push("<author>"+a+"</author>")),i.T&&i.ID&&r.indexOf("tc="+i.ID)==-1&&(r.push("tc="+i.ID),t.push("<author>tc="+i.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var i=0,a=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?i=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(i=r.indexOf(ti(l.a))),a.push(l.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+i+'"><text>'),a.length<=1)t.push(Ds("t",ti(a[0]||"")));else{for(var s=`Comment:
    `+a[0]+`
`,o=1;o<a.length;++o)s+=`Reply:
    `+a[o]+`
`;t.push(Ds("t",ti(s)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function ywt(e,t){var r=[],n=!1,i={},a=0;return e.replace(bo,function(o,l){var c=Dr(o);switch(Cf(c[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":i={author:c.personId,guid:c.id,ref:c.ref,T:1};break;case"</threadedComment>":i.t!=null&&r.push(i);break;case"<text>":case"<text":a=l+o.length;break;case"</text>":i.t=e.slice(a,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return o}),r}function bwt(e,t,r){var n=[ba,Ft("ThreadedComments",null,{xmlns:za.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(i){var a="";(i[1]||[]).forEach(function(s,o){if(!s.T){delete s.ID;return}s.a&&t.indexOf(s.a)==-1&&t.push(s.a);var l={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?a=l.id:l.parentId=a,s.ID=l.id,s.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(s.a)).slice(-12)+"}"),n.push(Ft("threadedComment",Ds("text",s.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function wwt(e,t){var r=[],n=!1;return e.replace(bo,function(a){var s=Dr(a);switch(Cf(s[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:s.displayname,id:s.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+s[0]+" in threaded comments")}return a}),r}function Swt(e){var t=[ba,Ft("personList",null,{xmlns:za.TCMNT,"xmlns:x":Yx[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Ft("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function Ewt(e){var t={};t.iauthor=e.read_shift(4);var r=e1(e);return t.rfx=r.s,t.ref=jr(r.s),e.l+=16,t}function Cwt(e,t){return t==null&&(t=pt(36)),t.write_shift(4,e[1].iauthor),Tb(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var kwt=po;function _wt(e){return ps(e.slice(0,54))}function Nwt(e,t){var r=[],n=[],i={},a=!1;return lp(e,function(o,l,c){switch(c){case 632:n.push(o);break;case 635:i=o;break;case 637:i.t=o.t,i.h=o.h,i.r=o.r;break;case 636:if(i.author=n[i.iauthor],delete i.iauthor,t.sheetRows&&i.rfx&&t.sheetRows<=i.rfx.r)break;i.t||(i.t=""),delete i.rfx,r.push(i);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!a||t.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}}),r}function Awt(e){var t=Cl(),r=[];return Ct(t,628),Ct(t,630),e.forEach(function(n){n[1].forEach(function(i){r.indexOf(i.a)>-1||(r.push(i.a.slice(0,54)),Ct(t,632,_wt(i.a)))})}),Ct(t,631),Ct(t,633),e.forEach(function(n){n[1].forEach(function(i){i.iauthor=r.indexOf(i.a);var a={s:$i(n[0]),e:$i(n[0])};Ct(t,635,Cwt([a,i])),i.t&&i.t.length>0&&Ct(t,637,Yxt(i)),Ct(t,636),delete i.iauthor})}),Ct(t,634),Ct(t,629),t.end()}var Twt="application/vnd.ms-office.vbaProject";function Iwt(e){var t=vr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var i=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");vr.utils.cfb_add(t,i,e.FileIndex[n].content)}}),vr.write(t)}function Owt(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var i=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&vr.utils.cfb_add(e,i,t.FileIndex[n].content)}})}var X1e=["xlsb","xlsm","xlam","biff8","xla"];function Pwt(){return{"!type":"dialog"}}function Rwt(){return{"!type":"dialog"}}function jwt(){return{"!type":"macro"}}function Dwt(){return{"!type":"macro"}}var Pv=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,i,a,s){var o=!1,l=!1;a.length==0?l=!0:a.charAt(0)=="["&&(l=!0,a=a.slice(1,-1)),s.length==0?o=!0:s.charAt(0)=="["&&(o=!0,s=s.slice(1,-1));var c=a.length>0?parseInt(a,10)|0:0,d=s.length>0?parseInt(s,10)|0:0;return o?d+=t.c:--d,l?c+=t.r:--c,i+(o?"":"$")+Ui(d)+(l?"":"$")+ga(c)}return function(i,a){return t=a,i.replace(e,r)}}(),z$=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,H$=function(){return function(t,r){return t.replace(z$,function(n,i,a,s,o,l){var c=T$(s)-(a?0:r.c),d=A$(l)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",p=c==0?"":a?c+1:"["+c+"]";return i+"R"+f+"C"+p})}}();function Y1e(e,t){return e.replace(z$,function(r,n,i,a,s,o){return n+(i=="$"?i+a:Ui(T$(a)+t.c))+(s=="$"?s+o:ga(A$(o)+t.r))})}function Mwt(e,t,r){var n=Al(t),i=n.s,a=$i(r),s={r:a.r-i.r,c:a.c-i.c};return Y1e(e,s)}function Fwt(e){return e.length!=1}function Oee(e){return e.replace(/_xlfn\./g,"")}function Ea(e){e.l+=1}function B0(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Q1e(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return J1e(e);r.biff==12&&(n=4)}var i=e.read_shift(n),a=e.read_shift(n),s=B0(e),o=B0(e);return{s:{r:i,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function J1e(e){var t=B0(e),r=B0(e),n=e.read_shift(1),i=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:i,cRel:r[1],rRel:r[2]}}}function Lwt(e,t,r){if(r.biff<8)return J1e(e);var n=e.read_shift(r.biff==12?4:2),i=e.read_shift(r.biff==12?4:2),a=B0(e),s=B0(e);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:i,c:s[0],cRel:s[1],rRel:s[2]}}}function Z1e(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return Bwt(e);var n=e.read_shift(r&&r.biff==12?4:2),i=B0(e);return{r:n,c:i[0],cRel:i[1],rRel:i[2]}}function Bwt(e){var t=B0(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function Uwt(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function $wt(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return zwt(e);var i=e.read_shift(n>=12?4:2),a=e.read_shift(2),s=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;i>524287;)i-=1048576;if(s==1)for(;a>8191;)a=a-16384;return{r:i,c:a,cRel:s,rRel:o}}function zwt(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,i=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),i==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:i,rRel:n}}function Hwt(e,t,r){var n=(e[e.l++]&96)>>5,i=Q1e(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,i]}function Wwt(e,t,r){var n=(e[e.l++]&96)>>5,i=e.read_shift(2,"i"),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}var s=Q1e(e,a,r);return[n,i,s]}function Vwt(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function qwt(e,t,r){var n=(e[e.l++]&96)>>5,i=e.read_shift(2),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}return e.l+=a,[n,i]}function Gwt(e,t,r){var n=(e[e.l++]&96)>>5,i=Lwt(e,t-1,r);return[n,i]}function Kwt(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function Pee(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function Xwt(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),i=[],a=0;a<=n;++a)i.push(e.read_shift(r&&r.biff==2?1:2));return i}function Ywt(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Qwt(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Jwt(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function Zwt(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function eve(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function e2t(e){return e.read_shift(2),eve(e)}function t2t(e){return e.read_shift(2),eve(e)}function r2t(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var i=Z1e(e,0,r);return[n,i]}function n2t(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var i=$wt(e,0,r);return[n,i]}function i2t(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var i=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var a=Z1e(e,0,r);return[n,i,a]}function a2t(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var i=e.read_shift(r&&r.biff<=3?1:2);return[lSt[i],nve[i],n]}function s2t(e,t,r){var n=e[e.l++],i=e.read_shift(1),a=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:o2t(e);return[i,(a[0]===0?nve:oSt)[a[1]]]}function o2t(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function l2t(e,t,r){e.l+=r&&r.biff==2?3:4}function c2t(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),i=e.read_shift(r&&r.biff==2?1:2);return[n,i]}function u2t(e){return e.l++,cp[e.read_shift(1)]}function d2t(e){return e.l++,e.read_shift(2)}function f2t(e){return e.l++,e.read_shift(1)!==0}function h2t(e){return e.l++,uo(e)}function p2t(e,t,r){return e.l++,BC(e,t-1,r)}function m2t(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=fa(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=cp[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=uo(e);break;case 2:r[1]=t1(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function g2t(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),i=[],a=0;a!=n;++a)i.push((r.biff==12?e1:SP)(e));return i}function x2t(e,t,r){var n=0,i=0;r.biff==12?(n=e.read_shift(4),i=e.read_shift(4)):(i=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--i==0&&(i=256));for(var a=0,s=[];a!=n&&(s[a]=[]);++a)for(var o=0;o!=i;++o)s[a][o]=m2t(e,r.biff);return s}function v2t(e,t,r){var n=e.read_shift(1)>>>5&3,i=!r||r.biff>=8?4:2,a=e.read_shift(i);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,a]}function y2t(e,t,r){if(r.biff==5)return b2t(e);var n=e.read_shift(1)>>>5&3,i=e.read_shift(2),a=e.read_shift(4);return[n,i,a]}function b2t(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function w2t(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var i=e.read_shift(r&&r.biff==2?1:2);return[n,i]}function S2t(e,t,r){var n=e.read_shift(1)>>>5&3,i=e.read_shift(r&&r.biff==2?1:2);return[n,i]}function E2t(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function C2t(e,t,r){var n=(e[e.l++]&96)>>5,i=e.read_shift(2),a=4;if(r)switch(r.biff){case 5:a=15;break;case 12:a=6;break}return e.l+=a,[n,i]}var k2t=xo,_2t=xo,N2t=xo;function $C(e,t,r){return e.l+=2,[Uwt(e)]}function W$(e){return e.l+=6,[]}var A2t=$C,T2t=W$,I2t=W$,O2t=$C;function tve(e){return e.l+=2,[ka(e),e.read_shift(2)&1]}var P2t=$C,R2t=tve,j2t=W$,D2t=$C,M2t=$C,F2t=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function L2t(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),i=e.read_shift(2),a=e.read_shift(2),s=F2t[r>>2&31];return{ixti:t,coltype:r&3,rt:s,idx:n,c:i,C:a}}function B2t(e){return e.l+=2,[e.read_shift(4)]}function U2t(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function $2t(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function z2t(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function H2t(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function W2t(e){return e.l+=4,[0,0]}var Ree={1:{n:"PtgExp",f:c2t},2:{n:"PtgTbl",f:N2t},3:{n:"PtgAdd",f:Ea},4:{n:"PtgSub",f:Ea},5:{n:"PtgMul",f:Ea},6:{n:"PtgDiv",f:Ea},7:{n:"PtgPower",f:Ea},8:{n:"PtgConcat",f:Ea},9:{n:"PtgLt",f:Ea},10:{n:"PtgLe",f:Ea},11:{n:"PtgEq",f:Ea},12:{n:"PtgGe",f:Ea},13:{n:"PtgGt",f:Ea},14:{n:"PtgNe",f:Ea},15:{n:"PtgIsect",f:Ea},16:{n:"PtgUnion",f:Ea},17:{n:"PtgRange",f:Ea},18:{n:"PtgUplus",f:Ea},19:{n:"PtgUminus",f:Ea},20:{n:"PtgPercent",f:Ea},21:{n:"PtgParen",f:Ea},22:{n:"PtgMissArg",f:Ea},23:{n:"PtgStr",f:p2t},26:{n:"PtgSheet",f:U2t},27:{n:"PtgEndSheet",f:$2t},28:{n:"PtgErr",f:u2t},29:{n:"PtgBool",f:f2t},30:{n:"PtgInt",f:d2t},31:{n:"PtgNum",f:h2t},32:{n:"PtgArray",f:Kwt},33:{n:"PtgFunc",f:a2t},34:{n:"PtgFuncVar",f:s2t},35:{n:"PtgName",f:v2t},36:{n:"PtgRef",f:r2t},37:{n:"PtgArea",f:Hwt},38:{n:"PtgMemArea",f:w2t},39:{n:"PtgMemErr",f:k2t},40:{n:"PtgMemNoMem",f:_2t},41:{n:"PtgMemFunc",f:S2t},42:{n:"PtgRefErr",f:E2t},43:{n:"PtgAreaErr",f:Vwt},44:{n:"PtgRefN",f:n2t},45:{n:"PtgAreaN",f:Gwt},46:{n:"PtgMemAreaN",f:z2t},47:{n:"PtgMemNoMemN",f:H2t},57:{n:"PtgNameX",f:y2t},58:{n:"PtgRef3d",f:i2t},59:{n:"PtgArea3d",f:Wwt},60:{n:"PtgRefErr3d",f:C2t},61:{n:"PtgAreaErr3d",f:qwt},255:{}},V2t={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},q2t={1:{n:"PtgElfLel",f:tve},2:{n:"PtgElfRw",f:D2t},3:{n:"PtgElfCol",f:A2t},6:{n:"PtgElfRwV",f:M2t},7:{n:"PtgElfColV",f:O2t},10:{n:"PtgElfRadical",f:P2t},11:{n:"PtgElfRadicalS",f:j2t},13:{n:"PtgElfColS",f:T2t},15:{n:"PtgElfColSV",f:I2t},16:{n:"PtgElfRadicalLel",f:R2t},25:{n:"PtgList",f:L2t},29:{n:"PtgSxName",f:B2t},255:{}},G2t={0:{n:"PtgAttrNoop",f:W2t},1:{n:"PtgAttrSemi",f:Zwt},2:{n:"PtgAttrIf",f:Qwt},4:{n:"PtgAttrChoose",f:Xwt},8:{n:"PtgAttrGoto",f:Ywt},16:{n:"PtgAttrSum",f:l2t},32:{n:"PtgAttrBaxcel",f:Pee},33:{n:"PtgAttrBaxcel",f:Pee},64:{n:"PtgAttrSpace",f:e2t},65:{n:"PtgAttrSpaceSemi",f:t2t},128:{n:"PtgAttrIfError",f:Jwt},255:{}};function zC(e,t,r,n){if(n.biff<8)return xo(e,t);for(var i=e.l+t,a=[],s=0;s!==r.length;++s)switch(r[s][0]){case"PtgArray":r[s][1]=x2t(e,0,n),a.push(r[s][1]);break;case"PtgMemArea":r[s][2]=g2t(e,r[s][1],n),a.push(r[s][2]);break;case"PtgExp":n&&n.biff==12&&(r[s][1][1]=e.read_shift(4),a.push(r[s][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[s][0]}return t=i-e.l,t!==0&&a.push(xo(e,t)),a}function HC(e,t,r){for(var n=e.l+t,i,a,s=[];n!=e.l;)t=n-e.l,a=e[e.l],i=Ree[a]||Ree[V2t[a]],(a===24||a===25)&&(i=(a===24?q2t:G2t)[e[e.l+1]]),!i||!i.f?xo(e,t):s.push([i.n,i.f(e,t,r)]);return s}function K2t(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],i=[],a=0;a<n.length;++a){var s=n[a];if(s)switch(s[0]){case 2:i.push('"'+s[1].replace(/"/g,'""')+'"');break;default:i.push(s[1])}else i.push("")}t.push(i.join(","))}return t.join(";")}var X2t={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Y2t(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function rve(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var i="";if(r.biff>8)switch(e[n[0]][0]){case 357:return i=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?i:i+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return i=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?i:i+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return e[n[0]][0][3]?(i=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?i:i+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function jee(e,t,r){var n=rve(e,t,r);return n=="#REF"?n:Y2t(n,r)}function io(e,t,r,n,i){var a=i&&i.biff||8,s={s:{c:0,r:0}},o=[],l,c,d,f=0,p=0,m,x="";if(!e[0]||!e[0][0])return"";for(var v=-1,b="",w=0,_=e[0].length;w<_;++w){var C=e[0][w];switch(C[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),v>=0){switch(e[0][v][1][0]){case 0:b=ea(" ",e[0][v][1][1]);break;case 1:b=ea("\r",e[0][v][1][1]);break;default:if(b="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}c=c+b,v=-1}o.push(c+X2t[C[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=B2(C[1][1],s,i),o.push(U2(d,a));break;case"PtgRefN":d=r?B2(C[1][1],r,i):C[1][1],o.push(U2(d,a));break;case"PtgRef3d":f=C[1][1],d=B2(C[1][2],s,i),x=jee(n,f,i),o.push(x+"!"+U2(d,a));break;case"PtgFunc":case"PtgFuncVar":var N=C[1][0],R=C[1][1];N||(N=0),N&=127;var P=N==0?[]:o.slice(-N);o.length-=N,R==="User"&&(R=P.shift()),o.push(R+"("+P.join(",")+")");break;case"PtgBool":o.push(C[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(C[1]);break;case"PtgNum":o.push(String(C[1]));break;case"PtgStr":o.push('"'+C[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(C[1]);break;case"PtgAreaN":m=cee(C[1][1],r?{s:r}:s,i),o.push(pM(m,i));break;case"PtgArea":m=cee(C[1][1],s,i),o.push(pM(m,i));break;case"PtgArea3d":f=C[1][1],m=C[1][2],x=jee(n,f,i),o.push(x+"!"+pM(m,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=C[1][2];var O=(n.names||[])[p-1]||(n[0]||[])[p],D=O?O.Name:"SH33TJSNAME"+String(p);D&&D.slice(0,6)=="_xlfn."&&!i.xlfn&&(D=D.slice(6)),o.push(D);break;case"PtgNameX":var M=C[1][1];p=C[1][2];var B;if(i.biff<=5)M<0&&(M=-M),n[M]&&(B=n[M][p]);else{var U="";if(((n[M]||[])[0]||[])[0]==14849||(((n[M]||[])[0]||[])[0]==1025?n[M][p]&&n[M][p].itab>0&&(U=n.SheetNames[n[M][p].itab-1]+"!"):U=n.SheetNames[p-1]+"!"),n[M]&&n[M][p])U+=n[M][p].Name;else if(n[0]&&n[0][p])U+=n[0][p].Name;else{var H=(rve(n,M,i)||"").split(";;");H[p-1]?U=H[p-1]:U+="SH33TJSERRX"}o.push(U);break}B||(B={Name:"SH33TJSERRY"}),o.push(B.Name);break;case"PtgParen":var Z="(",ee=")";if(v>=0){switch(b="",e[0][v][1][0]){case 2:Z=ea(" ",e[0][v][1][1])+Z;break;case 3:Z=ea("\r",e[0][v][1][1])+Z;break;case 4:ee=ea(" ",e[0][v][1][1])+ee;break;case 5:ee=ea("\r",e[0][v][1][1])+ee;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}v=-1}o.push(Z+o.pop()+ee);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:C[1][1],r:C[1][0]};var V={c:r.c,r:r.r};if(n.sharedf[jr(d)]){var te=n.sharedf[jr(d)];o.push(io(te,s,V,n,i))}else{var se=!1;for(l=0;l!=n.arrayf.length;++l)if(c=n.arrayf[l],!(d.c<c[0].s.c||d.c>c[0].e.c)&&!(d.r<c[0].s.r||d.r>c[0].e.r)){o.push(io(c[1],s,V,n,i)),se=!0;break}se||o.push(C[1])}break;case"PtgArray":o.push("{"+K2t(C[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":v=w;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+C[1].idx+"[#"+C[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(C));default:throw new Error("Unrecognized Formula Token: "+String(C))}var Q=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&v>=0&&Q.indexOf(e[0][w][0])==-1){C=e[0][v];var X=!0;switch(C[1][0]){case 4:X=!1;case 0:b=ea(" ",C[1][1]);break;case 5:X=!1;case 1:b=ea("\r",C[1][1]);break;default:if(b="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+C[1][0])}o.push((X?b:"")+o.pop()+(X?"":b)),v=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function Q2t(e,t,r){var n=e.l+t,i=r.biff==2?1:2,a,s=e.read_shift(i);if(s==65535)return[[],xo(e,t-2)];var o=HC(e,s,r);return t!==s+i&&(a=zC(e,t-s-i,o,r)),e.l=n,[o,a]}function J2t(e,t,r){var n=e.l+t,i=r.biff==2?1:2,a,s=e.read_shift(i);if(s==65535)return[[],xo(e,t-2)];var o=HC(e,s,r);return t!==s+i&&(a=zC(e,t-s-i,o,r)),e.l=n,[o,a]}function Z2t(e,t,r,n){var i=e.l+t,a=HC(e,n,r),s;return i!==e.l&&(s=zC(e,i-e.l,a,r)),[a,s]}function eSt(e,t,r){var n=e.l+t,i,a=e.read_shift(2),s=HC(e,a,r);return a==65535?[[],xo(e,t-2)]:(t!==a+2&&(i=zC(e,n-a-2,s,r)),[s,i])}function tSt(e){var t;if(ph(e,e.l+6)!==65535)return[uo(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function rSt(e){if(e==null){var t=pt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return xx(e);return xx(0)}function yM(e,t,r){var n=e.l+t,i=kf(e);r.biff==2&&++e.l;var a=tSt(e),s=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=J2t(e,n-e.l,r);return{cell:i,val:a[0],formula:o,shared:s>>3&1,tt:a[1]}}function nSt(e,t,r,n,i){var a=yx(t,r,i),s=rSt(e.v),o=pt(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var c=pt(e.bf.length),d=0;d<e.bf.length;++d)c[d]=e.bf[d];var f=fs([a,s,o,c]);return f}function EP(e,t,r){var n=e.read_shift(4),i=HC(e,n,r),a=e.read_shift(4),s=a>0?zC(e,a,i,r):null;return[i,s]}var iSt=EP,CP=EP,aSt=EP,sSt=EP,oSt={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},nve={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},lSt={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Dee(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function cSt(e){var t="of:="+e.replace(z$,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function bM(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function uSt(e){return e.replace(/\./,"!")}var z2={},Rv={},H2=typeof Map<"u";function V$(e,t,r){var n=0,i=e.length;if(r){if(H2?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var a=H2?r.get(t):r[t];n<a.length;++n)if(e[a[n]].t===t)return e.Count++,a[n]}}else for(;n<i;++n)if(e[n].t===t)return e.Count++,n;return e[i]={t},e.Count++,e.Unique++,r&&(H2?(r.has(t)||r.set(t,[]),r.get(t).push(i)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(i))),i}function kP(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(lo=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=iE(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=pO(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Bg(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function om(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],i=60,a=e.length;if(n==null&&r.ssf){for(;i<392;++i)if(r.ssf[i]==null){Nh(t.z,i),r.ssf[i]=t.z,r.revssf[t.z]=n=i;break}}for(i=0;i!=a;++i)if(e[i].numFmtId===n)return i;return e[a]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function ive(e,t,r,n,i,a){try{n.cellNF&&(e.z=Rr[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=ki(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Rr[t]==null&&Nh(oxt[t]||"General",t),e.t==="e")e.w=e.w||cp[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=QS(e.v);else if(e.t==="d"){var s=Wa(e.v);(s|0)===s?e.w=s.toString(10):e.w=QS(s)}else{if(e.v===void 0)return"";e.w=mx(e.v,Rv)}else e.t==="d"?e.w=pu(t,Wa(e.v),Rv):e.w=pu(t,e.v,Rv)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=a.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=hO(i.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=i.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=hO(i.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=i.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&a.Fills)throw o}}}function dSt(e,t,r){if(e&&e["!ref"]){var n=Rn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function fSt(e,t){var r=Rn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=Zr(r))}var hSt=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,pSt=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,mSt=/<(?:\w:)?hyperlink [^>]*>/mg,gSt=/"(\w*:\w*)"/,xSt=/<(?:\w:)?col\b[^>]*[\/]?>/g,vSt=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,ySt=/<(?:\w:)?pageMargins[^>]*\/>/g,ave=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,bSt=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,wSt=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function SSt(e,t,r,n,i,a,s){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",d="",f=e.match(pSt);f?(c=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):c=d=e;var p=c.match(ave);p?q$(p[0],o,i,r):(p=c.match(bSt))&&CSt(p[0],p[1]||"",o,i,r);var m=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var x=c.slice(m,m+50).match(gSt);x&&fSt(o,x[1])}var v=c.match(wSt);v&&v[1]&&FSt(v[1],i);var b=[];if(t.cellStyles){var w=c.match(xSt);w&&PSt(b,w)}f&&USt(f[1],o,t,l,a,s);var _=d.match(vSt);_&&(o["!autofilter"]=jSt(_[0]));var C=[],N=d.match(hSt);if(N)for(m=0;m!=N.length;++m)C[m]=Rn(N[m].slice(N[m].indexOf('"')+1));var R=d.match(mSt);R&&TSt(o,R,n);var P=d.match(ySt);if(P&&(o["!margins"]=ISt(Dr(P[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=Zr(l)),t.sheetRows>0&&o["!ref"]){var O=Rn(o["!ref"]);t.sheetRows<=+O.e.r&&(O.e.r=t.sheetRows-1,O.e.r>l.e.r&&(O.e.r=l.e.r),O.e.r<O.s.r&&(O.s.r=O.e.r),O.e.c>l.e.c&&(O.e.c=l.e.c),O.e.c<O.s.c&&(O.s.c=O.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Zr(O))}return b.length>0&&(o["!cols"]=b),C.length>0&&(o["!merges"]=C),o}function ESt(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+Zr(e[r])+'"/>';return t+"</mergeCells>"}function q$(e,t,r,n){var i=Dr(e);r.Sheets[n]||(r.Sheets[n]={}),i.codeName&&(r.Sheets[n].CodeName=Pn(si(i.codeName)))}function CSt(e,t,r,n,i){q$(e.slice(0,e.indexOf(">")),r,n,i)}function kSt(e,t,r,n,i){var a=!1,s={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var l=t.SheetNames[r];try{t.Workbook&&(l=t.Workbook.Sheets[r].CodeName||l)}catch{}a=!0,s.codeName=Kd(ti(l))}if(e&&e["!outline"]){var c={summaryBelow:1,summaryRight:1};e["!outline"].above&&(c.summaryBelow=0),e["!outline"].left&&(c.summaryRight=0),o=(o||"")+Ft("outlinePr",null,c)}!a&&!o||(i[i.length]=Ft("sheetPr",o,s))}var _St=["objects","scenarios","selectLockedCells","selectUnlockedCells"],NSt=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function ASt(e){var t={sheet:1};return _St.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),NSt.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=B$(e.password).toString(16).toUpperCase()),Ft("sheetProtection",null,t)}function TSt(e,t,r){for(var n=Array.isArray(e),i=0;i!=t.length;++i){var a=Dr(si(t[i]),!0);if(!a.ref)return;var s=((r||{})["!id"]||[])[a.id];s?(a.Target=s.Target,a.location&&(a.Target+="#"+Pn(a.location))):(a.Target="#"+Pn(a.location),s={Target:a.Target,TargetMode:"Internal"}),a.Rel=s,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=Rn(a.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var d=jr({c,r:l});n?(e[l]||(e[l]=[]),e[l][c]||(e[l][c]={t:"z",v:void 0}),e[l][c].l=a):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=a)}}}function ISt(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function OSt(e){return Bg(e),Ft("pageMargins",null,e)}function PSt(e,t){for(var r=!1,n=0;n!=t.length;++n){var i=Dr(t[n],!0);i.hidden&&(i.hidden=Si(i.hidden));var a=parseInt(i.min,10)-1,s=parseInt(i.max,10)-1;for(i.outlineLevel&&(i.level=+i.outlineLevel||0),delete i.min,delete i.max,i.width=+i.width,!r&&i.width&&(r=!0,U$(i.width)),L0(i);a<=s;)e[a++]=_i(i)}}function RSt(e,t){for(var r=["<cols>"],n,i=0;i!=t.length;++i)(n=t[i])&&(r[r.length]=Ft("col",null,kP(i,n)));return r[r.length]="</cols>",r.join("")}function jSt(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function DSt(e,t,r,n){var i=typeof e.ref=="string"?e.ref:Zr(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,s=Al(i);s.s.r==s.e.r&&(s.e.r=Al(t["!ref"]).e.r,i=Zr(s));for(var o=0;o<a.length;++o){var l=a[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+i;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),Ft("autoFilter",null,{ref:i})}var MSt=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function FSt(e,t){t.Views||(t.Views=[{}]),(e.match(MSt)||[]).forEach(function(r,n){var i=Dr(r);t.Views[n]||(t.Views[n]={}),+i.zoomScale&&(t.Views[n].zoom=+i.zoomScale),Si(i.rightToLeft)&&(t.Views[n].RTL=!0)})}function LSt(e,t,r,n){var i={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Ft("sheetViews",Ft("sheetView",null,i),{})}function BSt(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var i="",a=e.t,s=e.v;if(e.t!=="z")switch(e.t){case"b":i=e.v?"1":"0";break;case"n":i=""+e.v;break;case"e":i=cp[e.v];break;case"d":n&&n.cellDates?i=ki(e.v,-1).toISOString():(e=_i(e),e.t="n",i=""+(e.v=Wa(ki(e.v)))),typeof e.z>"u"&&(e.z=Rr[14]);break;default:i=e.v;break}var o=Ds("v",ti(i)),l={r:t},c=om(n.cellXfs,e,n);switch(c!==0&&(l.s=c),e.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=Ds("v",""+V$(n.Strings,e.v,n.revStrings)),l.t="s";break}l.t="str";break}if(e.t!=a&&(e.t=a,e.v=s),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=Ft("f",ti(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(l.cm=1),Ft("c",o,l)}var USt=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,i=/ref=["']([^"']*)["']/,a=JS("v"),s=JS("f");return function(l,c,d,f,p,m){for(var x=0,v="",b=[],w=[],_=0,C=0,N=0,R="",P,O,D=0,M=0,B,U,H=0,Z=0,ee=Array.isArray(m.CellXf),V,te=[],se=[],Q=Array.isArray(c),X=[],fe={},Se=!1,Y=!!d.sheetStubs,ce=l.split(t),W=0,G=ce.length;W!=G;++W){v=ce[W].trim();var ie=v.length;if(ie!==0){var Ce=0;e:for(x=0;x<ie;++x)switch(v[x]){case">":if(v[x-1]!="/"){++x;break e}if(d&&d.cellStyles){if(O=Dr(v.slice(Ce,x),!0),D=O.r!=null?parseInt(O.r,10):D+1,M=-1,d.sheetRows&&d.sheetRows<D)continue;fe={},Se=!1,O.ht&&(Se=!0,fe.hpt=parseFloat(O.ht),fe.hpx=Uy(fe.hpt)),O.hidden=="1"&&(Se=!0,fe.hidden=!0),O.outlineLevel!=null&&(Se=!0,fe.level=+O.outlineLevel),Se&&(X[D-1]=fe)}break;case"<":Ce=x;break}if(Ce>=x)break;if(O=Dr(v.slice(Ce,x),!0),D=O.r!=null?parseInt(O.r,10):D+1,M=-1,!(d.sheetRows&&d.sheetRows<D)){f.s.r>D-1&&(f.s.r=D-1),f.e.r<D-1&&(f.e.r=D-1),d&&d.cellStyles&&(fe={},Se=!1,O.ht&&(Se=!0,fe.hpt=parseFloat(O.ht),fe.hpx=Uy(fe.hpt)),O.hidden=="1"&&(Se=!0,fe.hidden=!0),O.outlineLevel!=null&&(Se=!0,fe.level=+O.outlineLevel),Se&&(X[D-1]=fe)),b=v.slice(x).split(e);for(var re=0;re!=b.length&&b[re].trim().charAt(0)=="<";++re);for(b=b.slice(re),x=0;x!=b.length;++x)if(v=b[x].trim(),v.length!==0){if(w=v.match(r),_=x,C=0,N=0,v="<c "+(v.slice(0,1)=="<"?">":"")+v,w!=null&&w.length===2){for(_=0,R=w[1],C=0;C!=R.length&&!((N=R.charCodeAt(C)-64)<1||N>26);++C)_=26*_+N;--_,M=_}else++M;for(C=0;C!=v.length&&v.charCodeAt(C)!==62;++C);if(++C,O=Dr(v.slice(0,C),!0),O.r||(O.r=jr({r:D-1,c:M})),R=v.slice(C),P={t:""},(w=R.match(a))!=null&&w[1]!==""&&(P.v=Pn(w[1])),d.cellFormula){if((w=R.match(s))!=null&&w[1]!==""){if(P.f=Pn(si(w[1])).replace(/\r\n/g,`
`),d.xlfn||(P.f=Oee(P.f)),w[0].indexOf('t="array"')>-1)P.F=(R.match(i)||[])[1],P.F.indexOf(":")>-1&&te.push([Rn(P.F),P.F]);else if(w[0].indexOf('t="shared"')>-1){U=Dr(w[0]);var ne=Pn(si(w[1]));d.xlfn||(ne=Oee(ne)),se[parseInt(U.si,10)]=[U,ne,O.r]}}else(w=R.match(/<f[^>]*\/>/))&&(U=Dr(w[0]),se[U.si]&&(P.f=Mwt(se[U.si][1],se[U.si][2],O.r)));var ge=$i(O.r);for(C=0;C<te.length;++C)ge.r>=te[C][0].s.r&&ge.r<=te[C][0].e.r&&ge.c>=te[C][0].s.c&&ge.c<=te[C][0].e.c&&(P.F=te[C][1])}if(O.t==null&&P.v===void 0)if(P.f||P.F)P.v=0,P.t="n";else if(Y)P.t="z";else continue;else P.t=O.t||"n";switch(f.s.c>M&&(f.s.c=M),f.e.c<M&&(f.e.c=M),P.t){case"n":if(P.v==""||P.v==null){if(!Y)continue;P.t="z"}else P.v=parseFloat(P.v);break;case"s":if(typeof P.v>"u"){if(!Y)continue;P.t="z"}else B=z2[parseInt(P.v,10)],P.v=B.t,P.r=B.r,d.cellHTML&&(P.h=B.h);break;case"str":P.t="s",P.v=P.v!=null?si(P.v):"",d.cellHTML&&(P.h=C$(P.v));break;case"inlineStr":w=R.match(n),P.t="s",w!=null&&(B=L$(w[1]))?(P.v=B.t,d.cellHTML&&(P.h=B.h)):P.v="";break;case"b":P.v=Si(P.v);break;case"d":d.cellDates?P.v=ki(P.v,1):(P.v=Wa(ki(P.v,1)),P.t="n");break;case"e":(!d||d.cellText!==!1)&&(P.w=P.v),P.v=o1e[P.v];break}if(H=Z=0,V=null,ee&&O.s!==void 0&&(V=m.CellXf[O.s],V!=null&&(V.numFmtId!=null&&(H=V.numFmtId),d.cellStyles&&V.fillId!=null&&(Z=V.fillId))),ive(P,H,Z,d,p,m),d.cellDates&&ee&&P.t=="n"&&_b(Rr[H])&&(P.t="d",P.v=wP(P.v)),O.cm&&d.xlmeta){var we=(d.xlmeta.Cell||[])[+O.cm-1];we&&we.type=="XLDAPR"&&(P.D=!0)}if(Q){var q=$i(O.r);c[q.r]||(c[q.r]=[]),c[q.r][q.c]=P}else c[O.r]=P}}}}X.length>0&&(c["!rows"]=X)}}();function $St(e,t,r,n){var i=[],a=[],s=Rn(e["!ref"]),o="",l,c="",d=[],f=0,p=0,m=e["!rows"],x=Array.isArray(e),v={r:c},b,w=-1;for(p=s.s.c;p<=s.e.c;++p)d[p]=Ui(p);for(f=s.s.r;f<=s.e.r;++f){for(a=[],c=ga(f),p=s.s.c;p<=s.e.c;++p){l=d[p]+c;var _=x?(e[f]||[])[p]:e[l];_!==void 0&&(o=BSt(_,l,e,t))!=null&&a.push(o)}(a.length>0||m&&m[f])&&(v={r:c},m&&m[f]&&(b=m[f],b.hidden&&(v.hidden=1),w=-1,b.hpx?w=aE(b.hpx):b.hpt&&(w=b.hpt),w>-1&&(v.ht=w,v.customHeight=1),b.level&&(v.outlineLevel=b.level)),i[i.length]=Ft("row",a.join(""),v))}if(m)for(;f<m.length;++f)m&&m[f]&&(v={r:f+1},b=m[f],b.hidden&&(v.hidden=1),w=-1,b.hpx?w=aE(b.hpx):b.hpt&&(w=b.hpt),w>-1&&(v.ht=w,v.customHeight=1),b.level&&(v.outlineLevel=b.level),i[i.length]=Ft("row","",v));return i.join("")}function sve(e,t,r,n){var i=[ba,Ft("worksheet",null,{xmlns:Yx[0],"xmlns:r":za.r})],a=r.SheetNames[e],s=0,o="",l=r.Sheets[a];l==null&&(l={});var c=l["!ref"]||"A1",d=Rn(c);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),c=Zr(d)}n||(n={}),l["!comments"]=[];var f=[];kSt(l,r,e,t,i),i[i.length]=Ft("dimension",null,{ref:c}),i[i.length]=LSt(l,t,e,r),t.sheetFormat&&(i[i.length]=Ft("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(i[i.length]=RSt(l,l["!cols"])),i[s=i.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=$St(l,t),o.length>0&&(i[i.length]=o)),i.length>s+1&&(i[i.length]="</sheetData>",i[s]=i[s].replace("/>",">")),l["!protect"]&&(i[i.length]=ASt(l["!protect"])),l["!autofilter"]!=null&&(i[i.length]=DSt(l["!autofilter"],l,r,e)),l["!merges"]!=null&&l["!merges"].length>0&&(i[i.length]=ESt(l["!merges"]));var p=-1,m,x=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach(function(v){v[1].Target&&(m={ref:v[0]},v[1].Target.charAt(0)!="#"&&(x=Zn(n,-1,ti(v[1].Target).replace(/#.*$/,""),yn.HLINK),m["r:id"]="rId"+x),(p=v[1].Target.indexOf("#"))>-1&&(m.location=ti(v[1].Target.slice(p+1))),v[1].Tooltip&&(m.tooltip=ti(v[1].Tooltip)),i[i.length]=Ft("hyperlink",null,m))}),i[i.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(i[i.length]=OSt(l["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(i[i.length]=Ds("ignoredErrors",Ft("ignoredError",null,{numberStoredAsText:1,sqref:c}))),f.length>0&&(x=Zn(n,-1,"../drawings/drawing"+(e+1)+".xml",yn.DRAW),i[i.length]=Ft("drawing",null,{"r:id":"rId"+x}),l["!drawing"]=f),l["!comments"].length>0&&(x=Zn(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",yn.VML),i[i.length]=Ft("legacyDrawing",null,{"r:id":"rId"+x}),l["!legacy"]=x),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function zSt(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var i=e.read_shift(2);e.l+=1;var a=e.read_shift(1);return e.l=n,a&7&&(r.level=a&7),a&16&&(r.hidden=!0),a&32&&(r.hpt=i/20),r}function HSt(e,t,r){var n=pt(145),i=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var a=320;i.hpx?a=aE(i.hpx)*20:i.hpt&&(a=i.hpt*20),n.write_shift(2,a),n.write_shift(1,0);var s=0;i.level&&(s|=i.level),i.hidden&&(s|=16),(i.hpx||i.hpt)&&(s|=32),n.write_shift(1,s),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var c={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,p=-1,m=d<<10;m<d+1<<10;++m){c.c=m;var x=Array.isArray(r)?(r[c.r]||[])[c.c]:r[jr(c)];x&&(f<0&&(f=m),p=m)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,p))}var v=n.l;return n.l=l,n.write_shift(4,o),n.l=v,n.length>n.l?n.slice(0,n.l):n}function WSt(e,t,r,n){var i=HSt(n,r,t);(i.length>17||(t["!rows"]||[])[n])&&Ct(e,0,i)}var VSt=e1,qSt=Tb;function GSt(){}function KSt(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=Qxt(e),r}function XSt(e,t,r){r==null&&(r=pt(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var i=1;i<3;++i)r.write_shift(1,0);return uO({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),r1e(e,r),r.slice(0,r.l)}function YSt(e){var t=bu(e);return[t]}function QSt(e,t,r){return r==null&&(r=pt(8)),Qx(t,r)}function JSt(e){var t=Jx(e);return[t]}function ZSt(e,t,r){return r==null&&(r=pt(4)),Zx(t,r)}function eEt(e){var t=bu(e),r=e.read_shift(1);return[t,r,"b"]}function tEt(e,t,r){return r==null&&(r=pt(9)),Qx(t,r),r.write_shift(1,e.v?1:0),r}function rEt(e){var t=Jx(e),r=e.read_shift(1);return[t,r,"b"]}function nEt(e,t,r){return r==null&&(r=pt(5)),Zx(t,r),r.write_shift(1,e.v?1:0),r}function iEt(e){var t=bu(e),r=e.read_shift(1);return[t,r,"e"]}function aEt(e,t,r){return r==null&&(r=pt(9)),Qx(t,r),r.write_shift(1,e.v),r}function sEt(e){var t=Jx(e),r=e.read_shift(1);return[t,r,"e"]}function oEt(e,t,r){return r==null&&(r=pt(8)),Zx(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function lEt(e){var t=bu(e),r=e.read_shift(4);return[t,r,"s"]}function cEt(e,t,r){return r==null&&(r=pt(12)),Qx(t,r),r.write_shift(4,t.v),r}function uEt(e){var t=Jx(e),r=e.read_shift(4);return[t,r,"s"]}function dEt(e,t,r){return r==null&&(r=pt(8)),Zx(t,r),r.write_shift(4,t.v),r}function fEt(e){var t=bu(e),r=uo(e);return[t,r,"n"]}function hEt(e,t,r){return r==null&&(r=pt(16)),Qx(t,r),xx(e.v,r),r}function ove(e){var t=Jx(e),r=uo(e);return[t,r,"n"]}function pEt(e,t,r){return r==null&&(r=pt(12)),Zx(t,r),xx(e.v,r),r}function mEt(e){var t=bu(e),r=R$(e);return[t,r,"n"]}function gEt(e,t,r){return r==null&&(r=pt(12)),Qx(t,r),n1e(e.v,r),r}function xEt(e){var t=Jx(e),r=R$(e);return[t,r,"n"]}function vEt(e,t,r){return r==null&&(r=pt(8)),Zx(t,r),n1e(e.v,r),r}function yEt(e){var t=bu(e),r=I$(e);return[t,r,"is"]}function bEt(e){var t=bu(e),r=po(e);return[t,r,"str"]}function wEt(e,t,r){return r==null&&(r=pt(12+4*e.v.length)),Qx(t,r),ps(e.v,r),r.length>r.l?r.slice(0,r.l):r}function SEt(e){var t=Jx(e),r=po(e);return[t,r,"str"]}function EEt(e,t,r){return r==null&&(r=pt(8+4*e.v.length)),Zx(t,r),ps(e.v,r),r.length>r.l?r.slice(0,r.l):r}function CEt(e,t,r){var n=e.l+t,i=bu(e);i.r=r["!row"];var a=e.read_shift(1),s=[i,a,"b"];if(r.cellFormula){e.l+=2;var o=CP(e,n-e.l,r);s[3]=io(o,null,i,r.supbooks,r)}else e.l=n;return s}function kEt(e,t,r){var n=e.l+t,i=bu(e);i.r=r["!row"];var a=e.read_shift(1),s=[i,a,"e"];if(r.cellFormula){e.l+=2;var o=CP(e,n-e.l,r);s[3]=io(o,null,i,r.supbooks,r)}else e.l=n;return s}function _Et(e,t,r){var n=e.l+t,i=bu(e);i.r=r["!row"];var a=uo(e),s=[i,a,"n"];if(r.cellFormula){e.l+=2;var o=CP(e,n-e.l,r);s[3]=io(o,null,i,r.supbooks,r)}else e.l=n;return s}function NEt(e,t,r){var n=e.l+t,i=bu(e);i.r=r["!row"];var a=po(e),s=[i,a,"str"];if(r.cellFormula){e.l+=2;var o=CP(e,n-e.l,r);s[3]=io(o,null,i,r.supbooks,r)}else e.l=n;return s}var AEt=e1,TEt=Tb;function IEt(e,t){return t==null&&(t=pt(4)),t.write_shift(4,e),t}function OEt(e,t){var r=e.l+t,n=e1(e),i=O$(e),a=po(e),s=po(e),o=po(e);e.l=r;var l={rfx:n,relId:i,loc:a,display:o};return s&&(l.Tooltip=s),l}function PEt(e,t){var r=pt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Tb({s:$i(e[0]),e:$i(e[0])},r),P$("rId"+t,r);var n=e[1].Target.indexOf("#"),i=n==-1?"":e[1].Target.slice(n+1);return ps(i||"",r),ps(e[1].Tooltip||"",r),ps("",r),r.slice(0,r.l)}function REt(){}function jEt(e,t,r){var n=e.l+t,i=i1e(e),a=e.read_shift(1),s=[i];if(s[2]=a,r.cellFormula){var o=iSt(e,n-e.l,r);s[1]=o}else e.l=n;return s}function DEt(e,t,r){var n=e.l+t,i=e1(e),a=[i];if(r.cellFormula){var s=sSt(e,n-e.l,r);a[1]=s,e.l=n}else e.l=n;return a}function MEt(e,t,r){r==null&&(r=pt(18));var n=kP(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var i=0;return t.hidden&&(i|=1),typeof n.width=="number"&&(i|=2),t.level&&(i|=t.level<<8),r.write_shift(2,i),r}var lve=["left","right","top","bottom","header","footer"];function FEt(e){var t={};return lve.forEach(function(r){t[r]=uo(e)}),t}function LEt(e,t){return t==null&&(t=pt(6*8)),Bg(e),lve.forEach(function(r){xx(e[r],t)}),t}function BEt(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function UEt(e,t,r){r==null&&(r=pt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function $Et(e){var t=pt(24);return t.write_shift(4,4),t.write_shift(4,1),Tb(e,t),t}function zEt(e,t){return t==null&&(t=pt(16*4+2)),t.write_shift(2,e.password?B$(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function HEt(){}function WEt(){}function VEt(e,t,r,n,i,a,s){if(!e)return e;var o=t||{};n||(n={"!id":{}});var l=o.dense?[]:{},c,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,p=!1,m,x,v,b,w,_,C,N,R,P=[];o.biff=12,o["!row"]=0;var O=0,D=!1,M=[],B={},U=o.supbooks||i.supbooks||[[]];if(U.sharedf=B,U.arrayf=M,U.SheetNames=i.SheetNames||i.Sheets.map(function(Q){return Q.name}),!o.supbooks&&(o.supbooks=U,i.Names))for(var H=0;H<i.Names.length;++H)U[0][H+1]=i.Names[H];var Z=[],ee=[],V=!1;sE[16]={n:"BrtShortReal",f:ove};var te;if(lp(e,function(X,fe,Se){if(!p)switch(Se){case 148:c=X;break;case 0:m=X,o.sheetRows&&o.sheetRows<=m.r&&(p=!0),N=ga(b=m.r),o["!row"]=m.r,(X.hidden||X.hpt||X.level!=null)&&(X.hpt&&(X.hpx=Uy(X.hpt)),ee[X.r]=X);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(x={t:X[2]},X[2]){case"n":x.v=X[1];break;case"s":C=z2[X[1]],x.v=C.t,x.r=C.r;break;case"b":x.v=!!X[1];break;case"e":x.v=X[1],o.cellText!==!1&&(x.w=cp[x.v]);break;case"str":x.t="s",x.v=X[1];break;case"is":x.t="s",x.v=X[1].t;break}if((v=s.CellXf[X[0].iStyleRef])&&ive(x,v.numFmtId,null,o,a,s),w=X[0].c==-1?w+1:X[0].c,o.dense?(l[b]||(l[b]=[]),l[b][w]=x):l[Ui(w)+N]=x,o.cellFormula){for(D=!1,O=0;O<M.length;++O){var Y=M[O];m.r>=Y[0].s.r&&m.r<=Y[0].e.r&&w>=Y[0].s.c&&w<=Y[0].e.c&&(x.F=Zr(Y[0]),D=!0)}!D&&X.length>3&&(x.f=X[3])}if(d.s.r>m.r&&(d.s.r=m.r),d.s.c>w&&(d.s.c=w),d.e.r<m.r&&(d.e.r=m.r),d.e.c<w&&(d.e.c=w),o.cellDates&&v&&x.t=="n"&&_b(Rr[v.numFmtId])){var ce=ug(x.v);ce&&(x.t="d",x.v=new Date(ce.y,ce.m-1,ce.d,ce.H,ce.M,ce.S,ce.u))}te&&(te.type=="XLDAPR"&&(x.D=!0),te=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;x={t:"z",v:void 0},w=X[0].c==-1?w+1:X[0].c,o.dense?(l[b]||(l[b]=[]),l[b][w]=x):l[Ui(w)+N]=x,d.s.r>m.r&&(d.s.r=m.r),d.s.c>w&&(d.s.c=w),d.e.r<m.r&&(d.e.r=m.r),d.e.c<w&&(d.e.c=w),te&&(te.type=="XLDAPR"&&(x.D=!0),te=void 0);break;case 176:P.push(X);break;case 49:te=((o.xlmeta||{}).Cell||[])[X-1];break;case 494:var W=n["!id"][X.relId];for(W?(X.Target=W.Target,X.loc&&(X.Target+="#"+X.loc),X.Rel=W):X.relId==""&&(X.Target="#"+X.loc),b=X.rfx.s.r;b<=X.rfx.e.r;++b)for(w=X.rfx.s.c;w<=X.rfx.e.c;++w)o.dense?(l[b]||(l[b]=[]),l[b][w]||(l[b][w]={t:"z",v:void 0}),l[b][w].l=X):(_=jr({c:w,r:b}),l[_]||(l[_]={t:"z",v:void 0}),l[_].l=X);break;case 426:if(!o.cellFormula)break;M.push(X),R=o.dense?l[b][w]:l[Ui(w)+N],R.f=io(X[1],d,{r:m.r,c:w},U,o),R.F=Zr(X[0]);break;case 427:if(!o.cellFormula)break;B[jr(X[0].s)]=X[1],R=o.dense?l[b][w]:l[Ui(w)+N],R.f=io(X[1],d,{r:m.r,c:w},U,o);break;case 60:if(!o.cellStyles)break;for(;X.e>=X.s;)Z[X.e--]={width:X.w/256,hidden:!!(X.flags&1),level:X.level},V||(V=!0,U$(X.w/256)),L0(Z[X.e+1]);break;case 161:l["!autofilter"]={ref:Zr(X)};break;case 476:l["!margins"]=X;break;case 147:i.Sheets[r]||(i.Sheets[r]={}),X.name&&(i.Sheets[r].CodeName=X.name),(X.above||X.left)&&(l["!outline"]={above:X.above,left:X.left});break;case 137:i.Views||(i.Views=[{}]),i.Views[0]||(i.Views[0]={}),X.RTL&&(i.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!fe.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+Se.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(d.s.r<2e6||c&&(c.e.r>0||c.e.c>0||c.s.r>0||c.s.c>0))&&(l["!ref"]=Zr(c||d)),o.sheetRows&&l["!ref"]){var se=Rn(l["!ref"]);o.sheetRows<=+se.e.r&&(se.e.r=o.sheetRows-1,se.e.r>d.e.r&&(se.e.r=d.e.r),se.e.r<se.s.r&&(se.s.r=se.e.r),se.e.c>d.e.c&&(se.e.c=d.e.c),se.e.c<se.s.c&&(se.s.c=se.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Zr(se))}return P.length>0&&(l["!merges"]=P),Z.length>0&&(l["!cols"]=Z),ee.length>0&&(l["!rows"]=ee),l}function qEt(e,t,r,n,i,a,s){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=_i(t),t.z=t.z||Rr[14],t.v=Wa(ki(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var l={r,c:n};switch(l.s=om(i.cellXfs,t,i),t.l&&a["!links"].push([jr(l),t.l]),t.c&&a["!comments"].push([jr(l),t.c]),t.t){case"s":case"str":return i.bookSST?(o=V$(i.Strings,t.v,i.revStrings),l.t="s",l.v=o,s?Ct(e,18,dEt(t,l)):Ct(e,7,cEt(t,l))):(l.t="str",s?Ct(e,17,EEt(t,l)):Ct(e,6,wEt(t,l))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?s?Ct(e,13,vEt(t,l)):Ct(e,2,gEt(t,l)):s?Ct(e,16,pEt(t,l)):Ct(e,5,hEt(t,l)),!0;case"b":return l.t="b",s?Ct(e,15,nEt(t,l)):Ct(e,4,tEt(t,l)),!0;case"e":return l.t="e",s?Ct(e,14,oEt(t,l)):Ct(e,3,aEt(t,l)),!0}return s?Ct(e,12,ZSt(t,l)):Ct(e,1,QSt(t,l)),!0}function GEt(e,t,r,n){var i=Rn(t["!ref"]||"A1"),a,s="",o=[];Ct(e,145);var l=Array.isArray(t),c=i.e.r;t["!rows"]&&(c=Math.max(i.e.r,t["!rows"].length-1));for(var d=i.s.r;d<=c;++d){s=ga(d),WSt(e,t,i,d);var f=!1;if(d<=i.e.r)for(var p=i.s.c;p<=i.e.c;++p){d===i.s.r&&(o[p]=Ui(p)),a=o[p]+s;var m=l?(t[d]||[])[p]:t[a];if(!m){f=!1;continue}f=qEt(e,m,d,p,n,t,f)}}Ct(e,146)}function KEt(e,t){!t||!t["!merges"]||(Ct(e,177,IEt(t["!merges"].length)),t["!merges"].forEach(function(r){Ct(e,176,TEt(r))}),Ct(e,178))}function XEt(e,t){!t||!t["!cols"]||(Ct(e,390),t["!cols"].forEach(function(r,n){r&&Ct(e,60,MEt(n,r))}),Ct(e,391))}function YEt(e,t){!t||!t["!ref"]||(Ct(e,648),Ct(e,649,$Et(Rn(t["!ref"]))),Ct(e,650))}function QEt(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var i=Zn(r,-1,n[1].Target.replace(/#.*$/,""),yn.HLINK);Ct(e,494,PEt(n,i))}}),delete t["!links"]}function JEt(e,t,r,n){if(t["!comments"].length>0){var i=Zn(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",yn.VML);Ct(e,551,P$("rId"+i)),t["!legacy"]=i}}function ZEt(e,t,r,n){if(t["!autofilter"]){var i=t["!autofilter"],a=typeof i.ref=="string"?i.ref:Zr(i.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=Al(a);o.s.r==o.e.r&&(o.e.r=Al(t["!ref"]).e.r,a=Zr(o));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Ct(e,161,Tb(Rn(a))),Ct(e,162)}}function eCt(e,t,r){Ct(e,133),Ct(e,137,UEt(t,r)),Ct(e,138),Ct(e,134)}function tCt(e,t){t["!protect"]&&Ct(e,535,zEt(t["!protect"]))}function rCt(e,t,r,n){var i=Cl(),a=r.SheetNames[e],s=r.Sheets[a]||{},o=a;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var l=Rn(s["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return s["!links"]=[],s["!comments"]=[],Ct(i,129),(r.vbaraw||s["!outline"])&&Ct(i,147,XSt(o,s["!outline"])),Ct(i,148,qSt(l)),eCt(i,s,r.Workbook),XEt(i,s),GEt(i,s,e,t),tCt(i,s),ZEt(i,s,r,e),KEt(i,s),QEt(i,s,n),s["!margins"]&&Ct(i,476,LEt(s["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&YEt(i,s),JEt(i,s,e,n),Ct(i,130),i.end()}function nCt(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var s=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);s&&(t[+s[1]]=r?+s[2]:s[2])});var i=Pn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){n=a.replace(/<.*?>/g,"")}),[t,i,n]}function iCt(e,t,r,n,i,a){var s=a||{"!type":"chart"};if(!e)return a;var o=0,l=0,c="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var p=nCt(f);d.s.r=d.s.c=0,d.e.c=o,c=Ui(o),p[0].forEach(function(m,x){s[c+ga(x)]={t:"n",v:m,z:p[1]},l=x}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(s["!ref"]=Zr(d)),s}function aCt(e,t,r,n,i){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},s,o=e.match(ave);return o&&q$(o[0],a,i,r),(s=e.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=s[1]),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}function sCt(e,t){e.l+=10;var r=po(e);return{name:r}}function oCt(e,t,r,n,i){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},s=!1;return lp(e,function(l,c,d){switch(d){case 550:a["!rel"]=l;break;case 651:i.Sheets[r]||(i.Sheets[r]={}),l.name&&(i.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!(c.T>0)){if(!(c.T<0)){if(!s||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}var G$=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],lCt=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],cCt=[],uCt=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function Mee(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],i=0;i!=t.length;++i){var a=t[i];if(n[a[0]]==null)n[a[0]]=a[1];else switch(a[2]){case"bool":typeof n[a[0]]=="string"&&(n[a[0]]=Si(n[a[0]]));break;case"int":typeof n[a[0]]=="string"&&(n[a[0]]=parseInt(n[a[0]],10));break}}}function Fee(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Si(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function cve(e){Fee(e.WBProps,G$),Fee(e.CalcPr,uCt),Mee(e.WBView,lCt),Mee(e.Sheets,cCt),Rv.date1904=Si(e.WBProps.date1904)}function dCt(e){return!e.Workbook||!e.Workbook.WBProps?"false":Si(e.Workbook.WBProps.date1904)?"true":"false"}var fCt="][*?/\\".split("");function uve(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return fCt.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function hCt(e,t,r){e.forEach(function(n,i){uve(n);for(var a=0;a<i;++a)if(n==e[a])throw new Error("Duplicate Sheet Name: "+n);if(r){var s=t&&t[i]&&t[i].CodeName||n;if(s.charCodeAt(0)==95&&s.length>22)throw new Error("Bad Code Name: Worksheet"+s)}})}function pCt(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];hCt(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)dSt(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var mCt=/<\w+:workbook/;function gCt(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,i="xmlns",a={},s=0;if(e.replace(bo,function(l,c){var d=Dr(l);switch(Cf(d[0])){case"<?xml":break;case"<workbook":l.match(mCt)&&(i="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=d[i];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":G$.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Si(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=si(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Pn(si(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":a={},a.Name=si(d.name),d.comment&&(a.Comment=d.comment),d.localSheetId&&(a.Sheet=+d.localSheetId),Si(d.hidden||"0")&&(a.Hidden=!0),s=c+l.length;break;case"</definedName>":a.Ref=Pn(si(e.slice(s,c))),r.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),Yx.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return cve(r),r}function dve(e){var t=[ba];t[t.length]=Ft("workbook",null,{xmlns:Yx[0],"xmlns:r":za.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(G$.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Ft("workbookPr",null,n);var i=e.Workbook&&e.Workbook.Sheets||[],a=0;if(i&&i[0]&&i[0].Hidden){for(t[t.length]="<bookViews>",a=0;a!=e.SheetNames.length&&!(!i[a]||!i[a].Hidden);++a);a==e.SheetNames.length&&(a=0),t[t.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",a=0;a!=e.SheetNames.length;++a){var s={name:ti(e.SheetNames[a].slice(0,31))};if(s.sheetId=""+(a+1),s["r:id"]="rId"+(a+1),i[a])switch(i[a].Hidden){case 1:s.state="hidden";break;case 2:s.state="veryHidden";break}t[t.length]=Ft("sheet",null,s)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(t[t.length]=Ft("definedName",ti(o.Ref),l))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function xCt(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=xF(e),r.name=po(e),r}function vCt(e,t){return t||(t=pt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),P$(e.strRelID,t),ps(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function yCt(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var i=t>8?po(e):"";return i.length>0&&(r.CodeName=i),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function bCt(e,t){t||(t=pt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),r1e(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function wCt(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function SCt(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var i=e.read_shift(4),a=Jxt(e),s=aSt(e,0,r),o=O$(e);e.l=n;var l={Name:a,Ptg:s};return i<268435455&&(l.Sheet=i),o&&(l.Comment=o),l}function ECt(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],i=!1;t||(t={}),t.biff=12;var a=[],s=[[]];return s.SheetNames=[],s.XTI=[],sE[16]={n:"BrtFRTArchID$",f:wCt},lp(e,function(l,c,d){switch(d){case 156:s.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(t.SID=l.Sheet),l.Ref=io(l.Ptg,null,null,s,t),delete t.SID,delete l.Ptg,a.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:s[0].length?s.push([d,l]):s[0]=[d,l],s[s.length-1].XTI=[];break;case 362:s.length===0&&(s[0]=[],s[0].XTI=[]),s[s.length-1].XTI=s[s.length-1].XTI.concat(l),s.XTI=s.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),i=!0;break;case 36:n.pop(),i=!1;break;case 37:n.push(d),i=!0;break;case 38:n.pop(),i=!1;break;case 16:break;default:if(!c.T){if(!i||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),cve(r),r.Names=a,r.supbooks=s,r}function CCt(e,t){Ct(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,i={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Ct(e,156,vCt(i))}Ct(e,144)}function kCt(e,t){t||(t=pt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return ps("SheetJS",t),ps(nO.version,t),ps(nO.version,t),ps("7262",t),t.length>t.l?t.slice(0,t.l):t}function _Ct(e,t){t||(t=pt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function NCt(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,i=-1,a=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&i==-1?i=n:r[n].Hidden==1&&a==-1&&(a=n);a>i||(Ct(e,135),Ct(e,158,_Ct(i)),Ct(e,136))}}function ACt(e,t){var r=Cl();return Ct(r,131),Ct(r,128,kCt()),Ct(r,153,bCt(e.Workbook&&e.Workbook.WBProps||null)),NCt(r,e),CCt(r,e),Ct(r,132),r.end()}function TCt(e,t,r){return t.slice(-4)===".bin"?ECt(e,r):gCt(e,r)}function ICt(e,t,r,n,i,a,s,o){return t.slice(-4)===".bin"?VEt(e,n,r,i,a,s,o):SSt(e,n,r,i,a,s,o)}function OCt(e,t,r,n,i,a,s,o){return t.slice(-4)===".bin"?oCt(e,n,r,i,a):aCt(e,n,r,i,a)}function PCt(e,t,r,n,i,a,s,o){return t.slice(-4)===".bin"?jwt():Dwt()}function RCt(e,t,r,n,i,a,s,o){return t.slice(-4)===".bin"?Pwt():Rwt()}function jCt(e,t,r,n){return t.slice(-4)===".bin"?Tbt(e,r,n):xbt(e,r,n)}function DCt(e,t,r){return V1e(e,r)}function MCt(e,t,r){return t.slice(-4)===".bin"?Myt(e,r):Ryt(e,r)}function FCt(e,t,r){return t.slice(-4)===".bin"?Nwt(e,r):vwt(e,r)}function LCt(e,t,r){return t.slice(-4)===".bin"?mwt(e):hwt(e)}function BCt(e,t,r,n){return r.slice(-4)===".bin"?gwt(e,t,r,n):void 0}function UCt(e,t,r){return t.slice(-4)===".bin"?uwt(e,t,r):fwt(e,t,r)}function $Ct(e,t,r){return(t.slice(-4)===".bin"?ACt:dve)(e)}function zCt(e,t,r,n,i){return(t.slice(-4)===".bin"?rCt:sve)(e,r,n,i)}function HCt(e,t,r){return(t.slice(-4)===".bin"?Bbt:H1e)(e,r)}function WCt(e,t,r){return(t.slice(-4)===".bin"?Byt:D1e)(e,r)}function VCt(e,t,r){return(t.slice(-4)===".bin"?Awt:K1e)(e)}function qCt(e){return(e.slice(-4)===".bin"?dwt:q1e)()}var fve=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,hve=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Ru(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var i=e.match(fve),a,s,o,l;if(i)for(l=0;l!=i.length;++l)a=i[l].match(hve),(s=a[1].indexOf(":"))===-1?n[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(s+1),n[o]=a[2].slice(1,a[2].length-1));return n}function GCt(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(fve),i,a,s,o;if(n)for(o=0;o!=n.length;++o)i=n[o].match(hve),(a=i[1].indexOf(":"))===-1?r[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?s="xmlns"+i[1].slice(6):s=i[1].slice(a+1),r[s]=i[2].slice(1,i[2].length-1));return r}var W2;function KCt(e,t){var r=W2[e]||Pn(e);return r==="General"?mx(t):pu(r,t)}function XCt(e,t,r,n){var i=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":i=Si(n);break;case"i2":case"int":i=parseInt(n,10);break;case"r4":case"float":i=parseFloat(n);break;case"date":case"dateTime.tz":i=ki(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Pn(t)]=i}function YCt(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||cp[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=QS(e.v):e.w=mx(e.v):e.w=KCt(t||"General",e.v)}catch(a){if(r.WTF)throw a}try{var n=W2[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&_b(n)){var i=ug(e.v);i&&(e.t="d",e.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}catch(a){if(r.WTF)throw a}}}function QCt(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=cbt[n.Pattern]||n.Pattern)}e[t.ID]=t}function JCt(e,t,r,n,i,a,s,o,l,c){var d="General",f=n.StyleID,p={};c=c||{};var m=[],x=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&s&&(f=s.StyleID);a[f]!==void 0&&(a[f].nf&&(d=a[f].nf),a[f].Interior&&m.push(a[f].Interior),!!a[f].Parent);)f=a[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Si(e);break;case"String":n.t="s",n.r=eee(Pn(e)),n.v=e.indexOf("<")>-1?Pn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(ki(e)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=Pn(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=o1e[e],c.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=eee(t||e));break}if(YCt(n,d,c),c.cellFormula!==!1)if(n.Formula){var v=Pn(n.Formula);v.charCodeAt(0)==61&&(v=v.slice(1)),n.f=Pv(v,i),delete n.Formula,n.ArrayRange=="RC"?n.F=Pv("RC:RC",i):n.ArrayRange&&(n.F=Pv(n.ArrayRange,i),l.push([Rn(n.F),n.F]))}else for(x=0;x<l.length;++x)i.r>=l[x][0].s.r&&i.r<=l[x][0].e.r&&i.c>=l[x][0].s.c&&i.c<=l[x][0].e.c&&(n.F=l[x][1]);c.cellStyles&&(m.forEach(function(b){!p.patternType&&b.patternType&&(p.patternType=b.patternType)}),n.s=p),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function ZCt(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function wM(e,t){var r=t||{};Nb();var n=n2(k$(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=si(n));var i=n.slice(0,1024).toLowerCase(),a=!1;if(i=i.replace(/".*?"/g,""),(i.indexOf(">")&1023)>Math.min(i.indexOf(",")&1023,i.indexOf(";")&1023)){var s=_i(r);return s.type="string",By.to_workbook(n,s)}if(i.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ze){i.indexOf("<"+Ze)>=0&&(a=!0)}),a)return Lkt(n,r);W2={"General Number":"General","General Date":Rr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Rr[15],"Short Date":Rr[14],"Long Time":Rr[19],"Medium Time":Rr[18],"Short Time":Rr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Rr[2],Standard:Rr[4],Percent:Rr[10],Scientific:Rr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],c,d={},f=[],p=r.dense?[]:{},m="",x={},v={},b=Ru('<Data ss:Type="String">'),w=0,_=0,C=0,N={s:{r:2e6,c:2e6},e:{r:0,c:0}},R={},P={},O="",D=0,M=[],B={},U={},H=0,Z=[],ee=[],V={},te=[],se,Q=!1,X=[],fe=[],Se={},Y=0,ce=0,W={Sheets:[],WBProps:{date1904:!1}},G={};eE.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ie="";o=eE.exec(n);)switch(o[3]=(ie=o[3]).toLowerCase()){case"data":if(ie=="data"){if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?JCt(n.slice(w,o.index),O,b,l[l.length-1][0]=="comment"?V:x,{c:_,r:C},R,te[_],v,X,r):(O="",b=Ru(o[0]),w=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(ee.length>0&&(x.c=ee),(!r.sheetRows||r.sheetRows>C)&&x.v!==void 0&&(r.dense?(p[C]||(p[C]=[]),p[C][_]=x):p[Ui(_)+ga(C)]=x),x.HRef&&(x.l={Target:Pn(x.HRef)},x.HRefScreenTip&&(x.l.Tooltip=x.HRefScreenTip),delete x.HRef,delete x.HRefScreenTip),(x.MergeAcross||x.MergeDown)&&(Y=_+(parseInt(x.MergeAcross,10)|0),ce=C+(parseInt(x.MergeDown,10)|0),M.push({s:{c:_,r:C},e:{c:Y,r:ce}})),!r.sheetStubs)x.MergeAcross?_=Y+1:++_;else if(x.MergeAcross||x.MergeDown){for(var Ce=_;Ce<=Y;++Ce)for(var re=C;re<=ce;++re)(Ce>_||re>C)&&(r.dense?(p[re]||(p[re]=[]),p[re][Ce]={t:"z"}):p[Ui(Ce)+ga(re)]={t:"z"});_=Y+1}else++_;else x=GCt(o[0]),x.Index&&(_=+x.Index-1),_<N.s.c&&(N.s.c=_),_>N.e.c&&(N.e.c=_),o[0].slice(-2)==="/>"&&++_,ee=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(C<N.s.r&&(N.s.r=C),C>N.e.r&&(N.e.r=C),o[0].slice(-2)==="/>"&&(v=Ru(o[0]),v.Index&&(C=+v.Index-1)),_=0,++C):(v=Ru(o[0]),v.Index&&(C=+v.Index-1),Se={},(v.AutoFitHeight=="0"||v.Height)&&(Se.hpx=parseInt(v.Height,10),Se.hpt=aE(Se.hpx),fe[C]=Se),v.Hidden=="1"&&(Se.hidden=!0,fe[C]=Se));break;case"worksheet":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));f.push(m),N.s.r<=N.e.r&&N.s.c<=N.e.c&&(p["!ref"]=Zr(N),r.sheetRows&&r.sheetRows<=N.e.r&&(p["!fullref"]=p["!ref"],N.e.r=r.sheetRows-1,p["!ref"]=Zr(N))),M.length&&(p["!merges"]=M),te.length>0&&(p["!cols"]=te),fe.length>0&&(p["!rows"]=fe),d[m]=p}else N={s:{r:2e6,c:2e6},e:{r:0,c:0}},C=_=0,l.push([o[3],!1]),c=Ru(o[0]),m=Pn(c.Name),p=r.dense?[]:{},M=[],X=[],fe=[],G={name:m,Hidden:0},W.Sheets.push(G);break;case"table":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),te=[],Q=!1}break;case"style":o[1]==="/"?QCt(R,P,r):P=Ru(o[0]);break;case"numberformat":P.nf=Pn(Ru(o[0]).Format||"General"),W2[P.nf]&&(P.nf=W2[P.nf]);for(var ne=0;ne!=392&&Rr[ne]!=P.nf;++ne);if(ne==392){for(ne=57;ne!=392;++ne)if(Rr[ne]==null){Nh(P.nf,ne);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(se=Ru(o[0]),se.Hidden&&(se.hidden=!0,delete se.Hidden),se.Width&&(se.wpx=parseInt(se.Width,10)),!Q&&se.wpx>10){Q=!0,lo=$1e;for(var ge=0;ge<te.length;++ge)te[ge]&&L0(te[ge])}Q&&L0(se),te[se.Index-1||te.length]=se;for(var we=0;we<+se.Span;++we)te[te.length]=_i(se);break;case"namedrange":if(o[1]==="/")break;W.Names||(W.Names=[]);var q=Dr(o[0]),Ae={Name:q.Name,Ref:Pv(q.RefersTo.slice(1),{r:0,c:0})};W.Sheets.length>0&&(Ae.Sheet=W.Sheets.length-1),W.Names.push(Ae);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?O+=n.slice(D,o.index):D=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;P.Interior=Ru(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?E1t(B,ie,n.slice(H,o.index)):H=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));ZCt(V),ee.push(V)}else l.push([o[3],!1]),c=Ru(o[0]),V={a:c.Author};break;case"autofilter":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Pe=Ru(o[0]);p["!autofilter"]={ref:Pv(Pe.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return zee(n,r);var He=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:He=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:He=!1}break;case"excelworkbook":switch(o[3]){case"date1904":W.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:He=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:He=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(H,o.index)){case"SheetHidden":G.Hidden=1;break;case"SheetVeryHidden":G.Hidden=2;break}else H=o.index+o[0].length;break;case"header":p["!margins"]||Bg(p["!margins"]={},"xlml"),isNaN(+Dr(o[0]).Margin)||(p["!margins"].header=+Dr(o[0]).Margin);break;case"footer":p["!margins"]||Bg(p["!margins"]={},"xlml"),isNaN(+Dr(o[0]).Margin)||(p["!margins"].footer=+Dr(o[0]).Margin);break;case"pagemargins":var je=Dr(o[0]);p["!margins"]||Bg(p["!margins"]={},"xlml"),isNaN(+je.Top)||(p["!margins"].top=+je.Top),isNaN(+je.Left)||(p["!margins"].left=+je.Left),isNaN(+je.Right)||(p["!margins"].right=+je.Right),isNaN(+je.Bottom)||(p["!margins"].bottom=+je.Bottom);break;case"displayrighttoleft":W.Views||(W.Views=[]),W.Views[0]||(W.Views[0]={}),W.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:He=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:He=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:He=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:He=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:He=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:He=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:He=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:He=!1}break;case"smarttags":break;default:He=!1;break}if(He||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?XCt(U,ie,Z,n.slice(H,o.index)):(Z=o,H=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var $e={};return!r.bookSheets&&!r.bookProps&&($e.Sheets=d),$e.SheetNames=f,$e.Workbook=W,$e.SSF=_i(Rr),$e.Props=B,$e.Custprops=U,$e}function CF(e,t){switch(X$(t=t||{}),t.type||"base64"){case"base64":return wM(uc(e),t);case"binary":case"buffer":case"file":return wM(e,t);case"array":return wM(am(e),t)}}function ekt(e,t){var r=[];return e.Props&&r.push(C1t(e.Props,t)),e.Custprops&&r.push(k1t(e.Props,e.Custprops)),r.join("")}function tkt(){return""}function rkt(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,i){var a=[];a.push(Ft("NumberFormat",null,{"ss:Format":ti(Rr[n.numFmtId])}));var s={"ss:ID":"s"+(21+i)};r.push(Ft("Style",a.join(""),s))}),Ft("Styles",r.join(""))}function pve(e){return Ft("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+H$(e.Ref,{r:0,c:0})})}function nkt(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var i=t[n];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||r.push(pve(i)))}return Ft("Names",r.join(""))}function ikt(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var i=n.Workbook.Names,a=[],s=0;s<i.length;++s){var o=i[s];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||a.push(pve(o)))}return a.join("")}function akt(e,t,r,n){if(!e)return"";var i=[];if(e["!margins"]&&(i.push("<PageSetup>"),e["!margins"].header&&i.push(Ft("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&i.push(Ft("Footer",null,{"x:Margin":e["!margins"].footer})),i.push(Ft("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),i.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)i.push(Ft("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<r&&!(n.Workbook.Sheets[a]&&!n.Workbook.Sheets[a].Hidden);++a);a==r&&i.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),e["!protect"]&&(i.push(Ds("ProtectContents","True")),e["!protect"].objects&&i.push(Ds("ProtectObjects","True")),e["!protect"].scenarios&&i.push(Ds("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?i.push(Ds("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&i.push(Ds("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(s){e["!protect"][s[0]]&&i.push("<"+s[1]+"/>")})),i.length==0?"":Ft("WorksheetOptions",i.join(""),{xmlns:Vl.x})}function skt(e){return e.map(function(t){var r=Nxt(t.t||""),n=Ft("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Ft("Comment",n,{"ss:Author":t.a})}).join("")}function okt(e,t,r,n,i,a,s){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+ti(H$(e.f,s))),e.F&&e.F.slice(0,t.length)==t){var l=$i(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==s.r?"":"["+(l.r-s.r)+"]")+"C"+(l.c==s.c?"":"["+(l.c-s.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=ti(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=ti(e.l.Tooltip))),r["!merges"])for(var c=r["!merges"],d=0;d!=c.length;++d)c[d].s.c!=s.c||c[d].s.r!=s.r||(c[d].e.c>c[d].s.c&&(o["ss:MergeAcross"]=c[d].e.c-c[d].s.c),c[d].e.r>c[d].s.r&&(o["ss:MergeDown"]=c[d].e.r-c[d].s.r));var f="",p="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",p=String(e.v);break;case"b":f="Boolean",p=e.v?"1":"0";break;case"e":f="Error",p=cp[e.v];break;case"d":f="DateTime",p=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Rr[14]);break;case"s":f="String",p=_xt(e.v||"");break}var m=om(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+m),o["ss:Index"]=s.c+1;var x=e.v!=null?p:"",v=e.t=="z"?"":'<Data ss:Type="'+f+'">'+x+"</Data>";return(e.c||[]).length>0&&(v+=skt(e.c)),Ft("Cell",v,o)}function lkt(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Uy(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function ckt(e,t,r,n){if(!e["!ref"])return"";var i=Rn(e["!ref"]),a=e["!merges"]||[],s=0,o=[];e["!cols"]&&e["!cols"].forEach(function(b,w){L0(b);var _=!!b.width,C=kP(w,b),N={"ss:Index":w+1};_&&(N["ss:Width"]=nE(C.width)),b.hidden&&(N["ss:Hidden"]="1"),o.push(Ft("Column",null,N))});for(var l=Array.isArray(e),c=i.s.r;c<=i.e.r;++c){for(var d=[lkt(c,(e["!rows"]||[])[c])],f=i.s.c;f<=i.e.c;++f){var p=!1;for(s=0;s!=a.length;++s)if(!(a[s].s.c>f)&&!(a[s].s.r>c)&&!(a[s].e.c<f)&&!(a[s].e.r<c)){(a[s].s.c!=f||a[s].s.r!=c)&&(p=!0);break}if(!p){var m={r:c,c:f},x=jr(m),v=l?(e[c]||[])[f]:e[x];d.push(okt(v,x,e,t,r,n,m))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function ukt(e,t,r){var n=[],i=r.SheetNames[e],a=r.Sheets[i],s=a?ikt(a,t,e,r):"";return s.length>0&&n.push("<Names>"+s+"</Names>"),s=a?ckt(a,t,e,r):"",s.length>0&&n.push("<Table>"+s+"</Table>"),n.push(akt(a,t,e,r)),n.join("")}function dkt(e,t){t||(t={}),e.SSF||(e.SSF=_i(Rr)),e.SSF&&(Nb(),vP(e.SSF),t.revssf=bP(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],om(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(ekt(e,t)),r.push(tkt()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Ft("Worksheet",ukt(n,t,e),{"ss:Name":ti(e.SheetNames[n])}));return r[2]=rkt(e,t),r[3]=nkt(e),ba+Ft("Workbook",r.join(""),{xmlns:Vl.ss,"xmlns:o":Vl.o,"xmlns:x":Vl.x,"xmlns:ss":Vl.ss,"xmlns:dt":Vl.dt,"xmlns:html":Vl.html})}function fkt(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=n1t(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=i1t(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var hkt=[60,1084,2066,2165,2175];function pkt(e,t,r,n,i){var a=n,s=[],o=r.slice(r.l,r.l+a);if(i&&i.enc&&i.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:i.enc.insitu(o)}s.push(o),r.l+=a;for(var l=ph(r,r.l),c=kF[l],d=0;c!=null&&hkt.indexOf(l)>-1;)a=ph(r,r.l+2),d=r.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),o=r.slice(d,r.l+4+a),s.push(o),r.l+=4+a,c=kF[l=ph(r,r.l)];var f=fs(s);Ps(f,0);var p=0;f.lens=[];for(var m=0;m<s.length;++m)f.lens.push(p),p+=s[m].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,i)}function kd(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Rr[n])}catch(a){if(t.WTF)throw a}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||cp[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=QS(e.v):e.w=mx(e.v):e.w=pu(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(a){if(t.WTF)throw a}if(t.cellDates&&n&&e.t=="n"&&_b(Rr[n]||String(n))){var i=ug(e.v);i&&(e.t="d",e.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}}function xN(e,t,r){return{v:e,ixfe:t,t:r}}function mkt(e,t){var r={opts:{}},n={},i=t.dense?[]:{},a={},s={},o=null,l=[],c="",d={},f,p="",m,x,v,b,w={},_=[],C,N,R=[],P=[],O={Sheets:[],WBProps:{date1904:!1},Views:[{}]},D={},M=function(Me){return Me<8?Mg[Me]:Me<64&&P[Me-8]||Mg[Me]},B=function(Me,qe,it){var ze=qe.XF.data;if(!(!ze||!ze.patternType||!it||!it.cellStyles)){qe.s={},qe.s.patternType=ze.patternType;var _e;(_e=rE(M(ze.icvFore)))&&(qe.s.fgColor={rgb:_e}),(_e=rE(M(ze.icvBack)))&&(qe.s.bgColor={rgb:_e})}},U=function(Me,qe,it){if(!(Se>1)&&!(it.sheetRows&&Me.r>=it.sheetRows)){if(it.cellStyles&&qe.XF&&qe.XF.data&&B(Me,qe,it),delete qe.ixfe,delete qe.XF,f=Me,p=jr(Me),(!s||!s.s||!s.e)&&(s={s:{r:0,c:0},e:{r:0,c:0}}),Me.r<s.s.r&&(s.s.r=Me.r),Me.c<s.s.c&&(s.s.c=Me.c),Me.r+1>s.e.r&&(s.e.r=Me.r+1),Me.c+1>s.e.c&&(s.e.c=Me.c+1),it.cellFormula&&qe.f){for(var ze=0;ze<_.length;++ze)if(!(_[ze][0].s.c>Me.c||_[ze][0].s.r>Me.r)&&!(_[ze][0].e.c<Me.c||_[ze][0].e.r<Me.r)){qe.F=Zr(_[ze][0]),(_[ze][0].s.c!=Me.c||_[ze][0].s.r!=Me.r)&&delete qe.f,qe.f&&(qe.f=""+io(_[ze][1],s,Me,X,H));break}}it.dense?(i[Me.r]||(i[Me.r]=[]),i[Me.r][Me.c]=qe):i[p]=qe}},H={enc:!1,sbcch:0,snames:[],sharedf:w,arrayf:_,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(H.password=t.password);var Z,ee=[],V=[],te=[],se=[],Q=!1,X=[];X.SheetNames=H.snames,X.sharedf=H.sharedf,X.arrayf=H.arrayf,X.names=[],X.XTI=[];var fe=0,Se=0,Y=0,ce=[],W=[],G;H.codepage=1200,Qu(1200);for(var ie=!1;e.l<e.length-1;){var Ce=e.l,re=e.read_shift(2);if(re===0&&fe===10)break;var ne=e.l===e.length?0:e.read_shift(2),ge=kF[re];if(ge&&ge.f){if(t.bookSheets&&fe===133&&re!==133)break;if(fe=re,ge.r===2||ge.r==12){var we=e.read_shift(2);if(ne-=2,!H.enc&&we!==re&&((we&255)<<8|we>>8)!==re)throw new Error("rt mismatch: "+we+"!="+re);ge.r==12&&(e.l+=10,ne-=10)}var q={};if(re===10?q=ge.f(e,ne,H):q=pkt(re,ge,e,ne,H),Se==0&&[9,521,1033,2057].indexOf(fe)===-1)continue;switch(re){case 34:r.opts.Date1904=O.WBProps.date1904=q;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(H.enc||(e.l=0),H.enc=q,!t.password)throw new Error("File is password-protected");if(q.valid==null)throw new Error("Encryption scheme unsupported");if(!q.valid)throw new Error("Password is incorrect");break;case 92:H.lastuser=q;break;case 66:var Ae=Number(q);switch(Ae){case 21010:Ae=1200;break;case 32768:Ae=1e4;break;case 32769:Ae=1252;break}Qu(H.codepage=Ae),ie=!0;break;case 317:H.rrtabid=q;break;case 25:H.winlocked=q;break;case 439:r.opts.RefreshAll=q;break;case 12:r.opts.CalcCount=q;break;case 16:r.opts.CalcDelta=q;break;case 17:r.opts.CalcIter=q;break;case 13:r.opts.CalcMode=q;break;case 14:r.opts.CalcPrecision=q;break;case 95:r.opts.CalcSaveRecalc=q;break;case 15:H.CalcRefMode=q;break;case 2211:r.opts.FullCalc=q;break;case 129:q.fDialog&&(i["!type"]="dialog"),q.fBelow||((i["!outline"]||(i["!outline"]={})).above=!0),q.fRight||((i["!outline"]||(i["!outline"]={})).left=!0);break;case 224:R.push(q);break;case 430:X.push([q]),X[X.length-1].XTI=[];break;case 35:case 547:X[X.length-1].push(q);break;case 24:case 536:G={Name:q.Name,Ref:io(q.rgce,s,null,X,H)},q.itab>0&&(G.Sheet=q.itab-1),X.names.push(G),X[0]||(X[0]=[],X[0].XTI=[]),X[X.length-1].push(q),q.Name=="_xlnm._FilterDatabase"&&q.itab>0&&q.rgce&&q.rgce[0]&&q.rgce[0][0]&&q.rgce[0][0][0]=="PtgArea3d"&&(W[q.itab-1]={ref:Zr(q.rgce[0][0][1][2])});break;case 22:H.ExternCount=q;break;case 23:X.length==0&&(X[0]=[],X[0].XTI=[]),X[X.length-1].XTI=X[X.length-1].XTI.concat(q),X.XTI=X.XTI.concat(q);break;case 2196:if(H.biff<8)break;G!=null&&(G.Comment=q[1]);break;case 18:i["!protect"]=q;break;case 19:q!==0&&H.WTF&&console.error("Password verifier: "+q);break;case 133:a[q.pos]=q,H.snames.push(q.name);break;case 10:{if(--Se)break;if(s.e){if(s.e.r>0&&s.e.c>0){if(s.e.r--,s.e.c--,i["!ref"]=Zr(s),t.sheetRows&&t.sheetRows<=s.e.r){var Pe=s.e.r;s.e.r=t.sheetRows-1,i["!fullref"]=i["!ref"],i["!ref"]=Zr(s),s.e.r=Pe}s.e.r++,s.e.c++}ee.length>0&&(i["!merges"]=ee),V.length>0&&(i["!objects"]=V),te.length>0&&(i["!cols"]=te),se.length>0&&(i["!rows"]=se),O.Sheets.push(D)}c===""?d=i:n[c]=i,i=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(H.biff===8&&(H.biff={9:2,521:3,1033:4}[re]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[q.BIFFVer]||8),H.biffguess=q.BIFFVer==0,q.BIFFVer==0&&q.dt==4096&&(H.biff=5,ie=!0,Qu(H.codepage=28591)),H.biff==8&&q.BIFFVer==0&&q.dt==16&&(H.biff=2),Se++)break;if(i=t.dense?[]:{},H.biff<8&&!ie&&(ie=!0,Qu(H.codepage=t.codepage||1252)),H.biff<5||q.BIFFVer==0&&q.dt==4096){c===""&&(c="Sheet1"),s={s:{r:0,c:0},e:{r:0,c:0}};var He={pos:e.l-ne,name:c};a[He.pos]=He,H.snames.push(c)}else c=(a[Ce]||{name:""}).name;q.dt==32&&(i["!type"]="chart"),q.dt==64&&(i["!type"]="macro"),ee=[],V=[],H.arrayf=_=[],te=[],se=[],Q=!1,D={Hidden:(a[Ce]||{hs:0}).hs,name:c}}break;case 515:case 3:case 2:i["!type"]=="chart"&&(t.dense?(i[q.r]||[])[q.c]:i[jr({c:q.c,r:q.r})])&&++q.c,C={ixfe:q.ixfe,XF:R[q.ixfe]||{},v:q.val,t:"n"},Y>0&&(C.z=ce[C.ixfe>>8&63]),kd(C,t,r.opts.Date1904),U({c:q.c,r:q.r},C,t);break;case 5:case 517:C={ixfe:q.ixfe,XF:R[q.ixfe],v:q.val,t:q.t},Y>0&&(C.z=ce[C.ixfe>>8&63]),kd(C,t,r.opts.Date1904),U({c:q.c,r:q.r},C,t);break;case 638:C={ixfe:q.ixfe,XF:R[q.ixfe],v:q.rknum,t:"n"},Y>0&&(C.z=ce[C.ixfe>>8&63]),kd(C,t,r.opts.Date1904),U({c:q.c,r:q.r},C,t);break;case 189:for(var je=q.c;je<=q.C;++je){var $e=q.rkrec[je-q.c][0];C={ixfe:$e,XF:R[$e],v:q.rkrec[je-q.c][1],t:"n"},Y>0&&(C.z=ce[C.ixfe>>8&63]),kd(C,t,r.opts.Date1904),U({c:je,r:q.r},C,t)}break;case 6:case 518:case 1030:{if(q.val=="String"){o=q;break}if(C=xN(q.val,q.cell.ixfe,q.tt),C.XF=R[C.ixfe],t.cellFormula){var Ze=q.formula;if(Ze&&Ze[0]&&Ze[0][0]&&Ze[0][0][0]=="PtgExp"){var lt=Ze[0][0][1][0],kt=Ze[0][0][1][1],ht=jr({r:lt,c:kt});w[ht]?C.f=""+io(q.formula,s,q.cell,X,H):C.F=((t.dense?(i[lt]||[])[kt]:i[ht])||{}).F}else C.f=""+io(q.formula,s,q.cell,X,H)}Y>0&&(C.z=ce[C.ixfe>>8&63]),kd(C,t,r.opts.Date1904),U(q.cell,C,t),o=q}break;case 7:case 519:if(o)o.val=q,C=xN(q,o.cell.ixfe,"s"),C.XF=R[C.ixfe],t.cellFormula&&(C.f=""+io(o.formula,s,o.cell,X,H)),Y>0&&(C.z=ce[C.ixfe>>8&63]),kd(C,t,r.opts.Date1904),U(o.cell,C,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{_.push(q);var _r=jr(q[0].s);if(m=t.dense?(i[q[0].s.r]||[])[q[0].s.c]:i[_r],t.cellFormula&&m){if(!o||!_r||!m)break;m.f=""+io(q[1],s,q[0],X,H),m.F=Zr(q[0])}}break;case 1212:{if(!t.cellFormula)break;if(p){if(!o)break;w[jr(o.cell)]=q[0],m=t.dense?(i[o.cell.r]||[])[o.cell.c]:i[jr(o.cell)],(m||{}).f=""+io(q[0],s,f,X,H)}}break;case 253:C=xN(l[q.isst].t,q.ixfe,"s"),l[q.isst].h&&(C.h=l[q.isst].h),C.XF=R[C.ixfe],Y>0&&(C.z=ce[C.ixfe>>8&63]),kd(C,t,r.opts.Date1904),U({c:q.c,r:q.r},C,t);break;case 513:t.sheetStubs&&(C={ixfe:q.ixfe,XF:R[q.ixfe],t:"z"},Y>0&&(C.z=ce[C.ixfe>>8&63]),kd(C,t,r.opts.Date1904),U({c:q.c,r:q.r},C,t));break;case 190:if(t.sheetStubs)for(var er=q.c;er<=q.C;++er){var ct=q.ixfe[er-q.c];C={ixfe:ct,XF:R[ct],t:"z"},Y>0&&(C.z=ce[C.ixfe>>8&63]),kd(C,t,r.opts.Date1904),U({c:er,r:q.r},C,t)}break;case 214:case 516:case 4:C=xN(q.val,q.ixfe,"s"),C.XF=R[C.ixfe],Y>0&&(C.z=ce[C.ixfe>>8&63]),kd(C,t,r.opts.Date1904),U({c:q.c,r:q.r},C,t);break;case 0:case 512:Se===1&&(s=q);break;case 252:l=q;break;case 1054:if(H.biff==4){ce[Y++]=q[1];for(var Gt=0;Gt<Y+163&&Rr[Gt]!=q[1];++Gt);Gt>=163&&Nh(q[1],Y+163)}else Nh(q[1],q[0]);break;case 30:{ce[Y++]=q;for(var Lt=0;Lt<Y+163&&Rr[Lt]!=q;++Lt);Lt>=163&&Nh(q,Y+163)}break;case 229:ee=ee.concat(q);break;case 93:V[q.cmo[0]]=H.lastobj=q;break;case 438:H.lastobj.TxO=q;break;case 127:H.lastobj.ImData=q;break;case 440:for(b=q[0].s.r;b<=q[0].e.r;++b)for(v=q[0].s.c;v<=q[0].e.c;++v)m=t.dense?(i[b]||[])[v]:i[jr({c:v,r:b})],m&&(m.l=q[1]);break;case 2048:for(b=q[0].s.r;b<=q[0].e.r;++b)for(v=q[0].s.c;v<=q[0].e.c;++v)m=t.dense?(i[b]||[])[v]:i[jr({c:v,r:b})],m&&m.l&&(m.l.Tooltip=q[1]);break;case 28:{if(H.biff<=5&&H.biff>=2)break;m=t.dense?(i[q[0].r]||[])[q[0].c]:i[jr(q[0])];var dr=V[q[2]];m||(t.dense?(i[q[0].r]||(i[q[0].r]=[]),m=i[q[0].r][q[0].c]={t:"z"}):m=i[jr(q[0])]={t:"z"},s.e.r=Math.max(s.e.r,q[0].r),s.s.r=Math.min(s.s.r,q[0].r),s.e.c=Math.max(s.e.c,q[0].c),s.s.c=Math.min(s.s.c,q[0].c)),m.c||(m.c=[]),x={a:q[1],t:dr.TxO.t},m.c.push(x)}break;case 2173:rwt(R[q.ixfe],q.ext);break;case 125:{if(!H.cellStyles)break;for(;q.e>=q.s;)te[q.e--]={width:q.w/256,level:q.level||0,hidden:!!(q.flags&1)},Q||(Q=!0,U$(q.w/256)),L0(te[q.e+1])}break;case 520:{var Ht={};q.level!=null&&(se[q.r]=Ht,Ht.level=q.level),q.hidden&&(se[q.r]=Ht,Ht.hidden=!0),q.hpt&&(se[q.r]=Ht,Ht.hpt=q.hpt,Ht.hpx=Uy(q.hpt))}break;case 38:case 39:case 40:case 41:i["!margins"]||Bg(i["!margins"]={}),i["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[re]]=q;break;case 161:i["!margins"]||Bg(i["!margins"]={}),i["!margins"].header=q.header,i["!margins"].footer=q.footer;break;case 574:q.RTL&&(O.Views[0].RTL=!0);break;case 146:P=q;break;case 2198:Z=q;break;case 140:N=q;break;case 442:c?D.CodeName=q||D.name:O.WBProps.CodeName=q||"ThisWorkbook";break}}else ge||console.error("Missing Info for XLS Record 0x"+re.toString(16)),e.l+=ne}return r.SheetNames=aa(a).sort(function(ye,Me){return Number(ye)-Number(Me)}).map(function(ye){return a[ye].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&W.forEach(function(ye,Me){r.Sheets[r.SheetNames[Me]]["!autofilter"]=ye}),r.Strings=l,r.SSF=_i(Rr),H.enc&&(r.Encryption=H.enc),Z&&(r.Themes=Z),r.Metadata={},N!==void 0&&(r.Metadata.Country=N),X.names.length>0&&(O.Names=X.names),r.Workbook=O,r}var V2={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function gkt(e,t,r){var n=vr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var i=vee(n,vF,V2.DSI);for(var a in i)t[a]=i[a]}catch(c){if(r.WTF)throw c}var s=vr.find(e,"/!SummaryInformation");if(s&&s.size>0)try{var o=vee(s,yF,V2.SI);for(var l in o)t[l]==null&&(t[l]=o[l])}catch(c){if(r.WTF)throw c}t.HeadingPairs&&t.TitlesOfParts&&(h1e(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function xkt(e,t){var r=[],n=[],i=[],a=0,s,o=KZ(vF,"n"),l=KZ(yF,"n");if(e.Props)for(s=aa(e.Props),a=0;a<s.length;++a)(Object.prototype.hasOwnProperty.call(o,s[a])?r:Object.prototype.hasOwnProperty.call(l,s[a])?n:i).push([s[a],e.Props[s[a]]]);if(e.Custprops)for(s=aa(e.Custprops),a=0;a<s.length;++a)Object.prototype.hasOwnProperty.call(e.Props||{},s[a])||(Object.prototype.hasOwnProperty.call(o,s[a])?r:Object.prototype.hasOwnProperty.call(l,s[a])?n:i).push([s[a],e.Custprops[s[a]]]);var c=[];for(a=0;a<i.length;++a)b1e.indexOf(i[a][0])>-1||f1e.indexOf(i[a][0])>-1||i[a][1]!=null&&c.push(i[a]);n.length&&vr.utils.cfb_add(t,"/SummaryInformation",yee(n,V2.SI,l,yF)),(r.length||c.length)&&vr.utils.cfb_add(t,"/DocumentSummaryInformation",yee(r,V2.DSI,o,vF,c.length?c:null,V2.UDI))}function mve(e,t){t||(t={}),X$(t),g$(),t.codepage&&m$(t.codepage);var r,n;if(e.FullPaths){if(vr.find(e,"/encryption"))throw new Error("File is password-protected");r=vr.find(e,"!CompObj"),n=vr.find(e,"/Workbook")||vr.find(e,"/Book")}else{switch(t.type){case"base64":e=Xl(uc(e));break;case"binary":e=Xl(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Ps(e,0),n={content:e}}var i,a;if(r&&fkt(r),t.bookProps&&!t.bookSheets)i={};else{var s=pn?"buffer":"array";if(n&&n.content)i=mkt(n.content,t);else if((a=vr.find(e,"PerfectOffice_MAIN"))&&a.content)i=Lg.to_workbook(a.content,(t.type=s,t));else if((a=vr.find(e,"NativeContent_MAIN"))&&a.content)i=Lg.to_workbook(a.content,(t.type=s,t));else throw(a=vr.find(e,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&vr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(i.vbaraw=Iwt(e))}var o={};return e.FullPaths&&gkt(e,o,t),i.Props=i.Custprops=o,t.bookFiles&&(i.cfb=e),i}function vkt(e,t){var r=t||{},n=vr.utils.cfb_new({root:"R"}),i="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":i="/Workbook",r.biff=8;break;case"biff5":i="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return vr.utils.cfb_add(n,i,gve(e,r)),r.biff==8&&(e.Props||e.Custprops)&&xkt(e,n),r.biff==8&&e.vbaraw&&Owt(n,vr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var sE={0:{f:zSt},1:{f:YSt},2:{f:mEt},3:{f:iEt},4:{f:eEt},5:{f:fEt},6:{f:bEt},7:{f:lEt},8:{f:NEt},9:{f:_Et},10:{f:CEt},11:{f:kEt},12:{f:JSt},13:{f:xEt},14:{f:sEt},15:{f:rEt},16:{f:ove},17:{f:SEt},18:{f:uEt},19:{f:I$},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:SCt},40:{},42:{},43:{f:bbt},44:{f:vbt},45:{f:Ebt},46:{f:kbt},47:{f:Cbt},48:{},49:{f:Vxt},50:{},51:{f:awt},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:O1e},62:{f:yEt},63:{f:pwt},64:{f:HEt},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:xo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:BEt},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:KSt},148:{f:VSt,p:16},151:{f:REt},152:{},153:{f:yCt},154:{},155:{},156:{f:xCt},157:{},158:{},159:{T:1,f:Dyt},160:{T:-1},161:{T:1,f:e1},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:AEt},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:nwt},336:{T:-1},337:{f:lwt,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:xF},357:{},358:{},359:{},360:{T:1},361:{},362:{f:I1e},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:jEt},427:{f:DEt},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:FEt},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:GSt},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:OEt},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:xF},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:kwt},633:{T:1},634:{T:-1},635:{T:1,f:Ewt},636:{T:-1},637:{f:Xxt},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:sCt},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:WEt},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},kF={6:{f:yM},10:{f:Ap},12:{f:ka},13:{f:ka},14:{f:fa},15:{f:fa},16:{f:uo},17:{f:fa},18:{f:fa},19:{f:ka},20:{f:kee},21:{f:kee},23:{f:I1e},24:{f:Nee},25:{f:fa},26:{},27:{},28:{f:Wvt},29:{},34:{f:fa},35:{f:_ee},38:{f:uo},39:{f:uo},40:{f:uo},41:{f:uo},42:{f:fa},43:{f:fa},47:{f:rbt},49:{f:xvt},51:{f:ka},60:{},61:{f:fvt},64:{f:fa},65:{f:gvt},66:{f:ka},77:{},80:{},81:{},82:{},85:{f:ka},89:{},90:{},91:{},92:{f:tvt},93:{f:Gvt},94:{},95:{f:fa},96:{},97:{},99:{f:fa},125:{f:O1e},128:{f:Pvt},129:{f:nvt},130:{f:ka},131:{f:fa},132:{f:fa},133:{f:ivt},134:{},140:{f:tyt},141:{f:ka},144:{},146:{f:iyt},151:{},152:{},153:{},154:{},155:{},156:{f:ka},157:{},158:{},160:{f:dyt},161:{f:oyt},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Avt},190:{f:Tvt},193:{f:Ap},197:{},198:{},199:{},200:{},201:{},202:{f:fa},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ka},220:{},221:{f:fa},222:{},224:{f:Ovt},225:{f:evt},226:{f:Ap},227:{},229:{f:Vvt},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:svt},253:{f:yvt},255:{f:lvt},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:w1e},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:fa},353:{f:Ap},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Fvt},431:{f:fa},432:{},433:{},434:{},437:{},438:{f:Yvt},439:{f:fa},440:{f:Qvt},441:{},442:{f:UC},443:{},444:{f:ka},445:{},446:{},448:{f:Ap},449:{f:dvt,r:2},450:{f:Ap},512:{f:See},513:{f:uyt},515:{f:Dvt},516:{f:wvt},517:{f:Cee},519:{f:fyt},520:{f:cvt},523:{},545:{f:Aee},549:{f:wee},566:{},574:{f:pvt},638:{f:Nvt},659:{},1048:{},1054:{f:Evt},1084:{},1212:{f:$vt},2048:{f:Zvt},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:pN},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Ap},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:ayt,r:12},2173:{f:twt,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:fa,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Uvt,r:12},2197:{},2198:{f:Xbt,r:12},2199:{},2200:{},2201:{},2202:{f:zvt,r:12},2203:{f:Ap},2204:{},2205:{},2206:{},2207:{},2211:{f:uvt},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ka},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:lyt},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:nyt},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:See},1:{},2:{f:xyt},3:{f:myt},4:{f:pyt},5:{f:Cee},7:{f:yyt},8:{},9:{f:pN},11:{},22:{f:ka},30:{f:kvt},31:{},32:{},33:{f:Aee},36:{},37:{f:wee},50:{f:byt},62:{},52:{},67:{},68:{f:ka},69:{},86:{},126:{},127:{f:hyt},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:wyt},223:{},234:{},354:{},421:{},518:{f:yM},521:{f:pN},536:{f:Nee},547:{f:_ee},561:{},579:{},1030:{f:yM},1033:{f:pN},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Bt(e,t,r,n){var i=t;if(!isNaN(i)){var a=n||(r||[]).length||0,s=e.next(4);s.write_shift(2,i),s.write_shift(2,a),a>0&&N$(r)&&e.push(r)}}function ykt(e,t,r,n){var i=(r||[]).length||0;if(i<=8224)return Bt(e,t,r,i);var a=t;if(!isNaN(a)){for(var s=r.parts||[],o=0,l=0,c=0;c+(s[o]||8224)<=8224;)c+=s[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,a),d.write_shift(2,c),e.push(r.slice(l,l+c)),l+=c;l<i;){for(d=e.next(4),d.write_shift(2,60),c=0;c+(s[o]||8224)<=8224;)c+=s[o]||8224,o++;d.write_shift(2,c),e.push(r.slice(l,l+c)),l+=c}}}function WC(e,t,r){return e||(e=pt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function bkt(e,t,r,n){var i=pt(9);return WC(i,e,t),S1e(r,n||"b",i),i}function wkt(e,t,r){var n=pt(8+2*r.length);return WC(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function Skt(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var i=t.t=="d"?Wa(ki(t.v)):t.v;i==(i|0)&&i>=0&&i<65536?Bt(e,2,vyt(r,n,i)):Bt(e,3,gyt(r,n,i));return;case"b":case"e":Bt(e,5,bkt(r,n,t.v,t.t));return;case"s":case"str":Bt(e,4,wkt(r,n,(t.v||"").slice(0,255)));return}Bt(e,1,WC(null,r,n))}function Ekt(e,t,r,n){var i=Array.isArray(t),a=Rn(t["!ref"]||"A1"),s,o="",l=[];if(a.e.c>255||a.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),s=Zr(a)}for(var c=a.s.r;c<=a.e.r;++c){o=ga(c);for(var d=a.s.c;d<=a.e.c;++d){c===a.s.r&&(l[d]=Ui(d)),s=l[d]+o;var f=i?(t[c]||[])[d]:t[s];f&&Skt(e,f,c,d)}}}function Ckt(e,t){for(var r=t||{},n=Cl(),i=0,a=0;a<e.SheetNames.length;++a)e.SheetNames[a]==r.sheet&&(i=a);if(i==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Bt(n,r.biff==4?1033:r.biff==3?521:9,F$(e,16,r)),Ekt(n,e.Sheets[e.SheetNames[i]],i,r),Bt(n,10),n.end()}function kkt(e,t,r){Bt(e,49,vvt({sz:12,name:"Arial"},r))}function _kt(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)t[i]!=null&&Bt(e,1054,Cvt(i,t[i],r))})}function Nkt(e,t){var r=pt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Bt(e,2151,r),r=pt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),N1e(Rn(t["!ref"]||"A1"),r),r.write_shift(4,4),Bt(e,2152,r)}function Akt(e,t){for(var r=0;r<16;++r)Bt(e,224,Eee({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){Bt(e,224,Eee(n,0,t))})}function Tkt(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];Bt(e,440,Jvt(n)),n[1].Tooltip&&Bt(e,2048,eyt(n))}delete t["!links"]}function Ikt(e,t){if(t){var r=0;t.forEach(function(n,i){++r<=256&&n&&Bt(e,125,syt(kP(i,n),i))})}}function Okt(e,t,r,n,i){var a=16+om(i.cellXfs,t,i);if(t.v==null&&!t.bf){Bt(e,513,yx(r,n,a));return}if(t.bf)Bt(e,6,nSt(t,r,n,i,a));else switch(t.t){case"d":case"n":var s=t.t=="d"?Wa(ki(t.v)):t.v;Bt(e,515,Mvt(r,n,s,a));break;case"b":case"e":Bt(e,517,jvt(r,n,t.v,a,i,t.t));break;case"s":case"str":if(i.bookSST){var o=V$(i.Strings,t.v,i.revStrings);Bt(e,253,bvt(r,n,o,a))}else Bt(e,516,Svt(r,n,(t.v||"").slice(0,255),a,i));break;default:Bt(e,513,yx(r,n,a))}}function Pkt(e,t,r){var n=Cl(),i=r.SheetNames[e],a=r.Sheets[i]||{},s=(r||{}).Workbook||{},o=(s.Sheets||[])[e]||{},l=Array.isArray(a),c=t.biff==8,d,f="",p=[],m=Rn(a["!ref"]||"A1"),x=c?65536:16384;if(m.e.c>255||m.e.r>=x){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,x-1)}Bt(n,2057,F$(r,16,t)),Bt(n,13,$c(1)),Bt(n,12,$c(100)),Bt(n,15,Mo(!0)),Bt(n,17,Mo(!1)),Bt(n,16,xx(.001)),Bt(n,95,Mo(!0)),Bt(n,42,Mo(!1)),Bt(n,43,Mo(!1)),Bt(n,130,$c(1)),Bt(n,128,Rvt()),Bt(n,131,Mo(!1)),Bt(n,132,Mo(!1)),c&&Ikt(n,a["!cols"]),Bt(n,512,_vt(m,t)),c&&(a["!links"]=[]);for(var v=m.s.r;v<=m.e.r;++v){f=ga(v);for(var b=m.s.c;b<=m.e.c;++b){v===m.s.r&&(p[b]=Ui(b)),d=p[b]+f;var w=l?(a[v]||[])[b]:a[d];w&&(Okt(n,w,v,b,t),c&&w.l&&a["!links"].push([d,w.l]))}}var _=o.CodeName||o.name||i;return c&&Bt(n,574,mvt((s.Views||[])[0])),c&&(a["!merges"]||[]).length&&Bt(n,229,qvt(a["!merges"])),c&&Tkt(n,a),Bt(n,442,E1e(_)),c&&Nkt(n,a),Bt(n,10),n.end()}function Rkt(e,t,r){var n=Cl(),i=(e||{}).Workbook||{},a=i.Sheets||[],s=i.WBProps||{},o=r.biff==8,l=r.biff==5;if(Bt(n,2057,F$(e,5,r)),r.bookType=="xla"&&Bt(n,135),Bt(n,225,o?$c(1200):null),Bt(n,193,j1t(2)),l&&Bt(n,191),l&&Bt(n,192),Bt(n,226),Bt(n,92,rvt("SheetJS",r)),Bt(n,66,$c(o?1200:1252)),o&&Bt(n,353,$c(0)),o&&Bt(n,448),Bt(n,317,cyt(e.SheetNames.length)),o&&e.vbaraw&&Bt(n,211),o&&e.vbaraw){var c=s.CodeName||"ThisWorkbook";Bt(n,442,E1e(c))}Bt(n,156,$c(17)),Bt(n,25,Mo(!1)),Bt(n,18,Mo(!1)),Bt(n,19,$c(0)),o&&Bt(n,431,Mo(!1)),o&&Bt(n,444,$c(0)),Bt(n,61,hvt()),Bt(n,64,Mo(!1)),Bt(n,141,$c(0)),Bt(n,34,Mo(dCt(e)=="true")),Bt(n,14,Mo(!0)),o&&Bt(n,439,Mo(!1)),Bt(n,218,$c(0)),kkt(n,e,r),_kt(n,e.SSF,r),Akt(n,r),o&&Bt(n,352,Mo(!1));var d=n.end(),f=Cl();o&&Bt(f,140,ryt()),o&&r.Strings&&ykt(f,252,ovt(r.Strings)),Bt(f,10);var p=f.end(),m=Cl(),x=0,v=0;for(v=0;v<e.SheetNames.length;++v)x+=(o?12:11)+(o?2:1)*e.SheetNames[v].length;var b=d.length+x+p.length;for(v=0;v<e.SheetNames.length;++v){var w=a[v]||{};Bt(m,133,avt({pos:b,hs:w.Hidden||0,dt:0,name:e.SheetNames[v]},r)),b+=t[v].length}var _=m.end();if(x!=_.length)throw new Error("BS8 "+x+" != "+_.length);var C=[];return d.length&&C.push(d),_.length&&C.push(_),p.length&&C.push(p),fs(C)}function jkt(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=_i(Rr)),e&&e.SSF&&(Nb(),vP(e.SSF),r.revssf=bP(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,Y$(r),r.cellXfs=[],om(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var i=0;i<e.SheetNames.length;++i)n[n.length]=Pkt(i,r,e);return n.unshift(Rkt(e,n,r)),fs(n)}function gve(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var i=Al(n["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var a=t||{};switch(a.biff||2){case 8:case 5:return jkt(e,t);case 4:case 3:case 2:return Ckt(e,t)}throw new Error("invalid type "+a.bookType+" for BIFF")}function Lee(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var i=e.match(/<table/i);if(!i)throw new Error("Invalid HTML: could not find <table>");var a=e.match(/<\/table/i),s=i.index,o=a&&a.index||e.length,l=vxt(e.slice(s,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,d=0,f=0,p=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},x=[];for(s=0;s<l.length;++s){var v=l[s].trim(),b=v.slice(0,3).toLowerCase();if(b=="<tr"){if(++c,r.sheetRows&&r.sheetRows<=c){--c;break}d=0;continue}if(!(b!="<td"&&b!="<th")){var w=v.split(/<\/t[dh]>/i);for(o=0;o<w.length;++o){var _=w[o].trim();if(_.match(/<t[dh]/i)){for(var C=_,N=0;C.charAt(0)=="<"&&(N=C.indexOf(">"))>-1;)C=C.slice(N+1);for(var R=0;R<x.length;++R){var P=x[R];P.s.c==d&&P.s.r<c&&c<=P.e.r&&(d=P.e.c+1,R=-1)}var O=Dr(_.slice(0,_.indexOf(">")));p=O.colspan?+O.colspan:1,((f=+O.rowspan)>1||p>1)&&x.push({s:{r:c,c:d},e:{r:c+(f||1)-1,c:d+p-1}});var D=O.t||O["data-t"]||"";if(!C.length){d+=p;continue}if(C=Uxe(C),m.s.r>c&&(m.s.r=c),m.e.r<c&&(m.e.r=c),m.s.c>d&&(m.s.c=d),m.e.c<d&&(m.e.c=d),!C.length){d+=p;continue}var M={t:"s",v:C};r.raw||!C.trim().length||D=="s"||(C==="TRUE"?M={t:"b",v:!0}:C==="FALSE"?M={t:"b",v:!1}:isNaN(nd(C))?isNaN(Ly(C).getDate())||(M={t:"d",v:ki(C)},r.cellDates||(M={t:"n",v:Wa(M.v)}),M.z=r.dateNF||Rr[14]):M={t:"n",v:nd(C)}),r.dense?(n[c]||(n[c]=[]),n[c][d]=M):n[jr({r:c,c:d})]=M,d+=p}}}}return n["!ref"]=Zr(m),x.length&&(n["!merges"]=x),n}function Dkt(e,t,r,n){for(var i=e["!merges"]||[],a=[],s=t.s.c;s<=t.e.c;++s){for(var o=0,l=0,c=0;c<i.length;++c)if(!(i[c].s.r>r||i[c].s.c>s)&&!(i[c].e.r<r||i[c].e.c<s)){if(i[c].s.r<r||i[c].s.c<s){o=-1;break}o=i[c].e.r-i[c].s.r+1,l=i[c].e.c-i[c].s.c+1;break}if(!(o<0)){var d=jr({r,c:s}),f=n.dense?(e[r]||[])[s]:e[d],p=f&&f.v!=null&&(f.h||C$(f.w||(Kh(f),f.w)||""))||"",m={};o>1&&(m.rowspan=o),l>1&&(m.colspan=l),n.editable?p='<span contenteditable="true">'+p+"</span>":f&&(m["data-t"]=f&&f.t||"z",f.v!=null&&(m["data-v"]=f.v),f.z!=null&&(m["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+f.l.Target+'">'+p+"</a>")),m.id=(n.id||"sjs")+"-"+d,a.push(Ft("td",p,m))}}var x="<tr>";return x+a.join("")+"</tr>"}var Mkt='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Fkt="</body></html>";function Lkt(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return sm(Lee(r[0],t),t);var n=Z$();return r.forEach(function(i,a){ez(n,Lee(i,t),"Sheet"+(a+1))}),n}function Bkt(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function xve(e,t){var r=t||{},n=r.header!=null?r.header:Mkt,i=r.footer!=null?r.footer:Fkt,a=[n],s=Al(e["!ref"]);r.dense=Array.isArray(e),a.push(Bkt(e,s,r));for(var o=s.s.r;o<=s.e.r;++o)a.push(Dkt(e,s,o,r));return a.push("</table>"+i),a.join("")}function vve(e,t,r){var n=r||{},i=0,a=0;if(n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var s=typeof n.origin=="string"?$i(n.origin):n.origin;i=s.r,a=s.c}var o=t.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:i,c:a}};if(e["!ref"]){var d=Al(e["!ref"]);c.s.r=Math.min(c.s.r,d.s.r),c.s.c=Math.min(c.s.c,d.s.c),c.e.r=Math.max(c.e.r,d.e.r),c.e.c=Math.max(c.e.c,d.e.c),i==-1&&(c.e.r=i=d.e.r+1)}var f=[],p=0,m=e["!rows"]||(e["!rows"]=[]),x=0,v=0,b=0,w=0,_=0,C=0;for(e["!cols"]||(e["!cols"]=[]);x<o.length&&v<l;++x){var N=o[x];if(Bee(N)){if(n.display)continue;m[v]={hidden:!0}}var R=N.children;for(b=w=0;b<R.length;++b){var P=R[b];if(!(n.display&&Bee(P))){var O=P.hasAttribute("data-v")?P.getAttribute("data-v"):P.hasAttribute("v")?P.getAttribute("v"):Uxe(P.innerHTML),D=P.getAttribute("data-z")||P.getAttribute("z");for(p=0;p<f.length;++p){var M=f[p];M.s.c==w+a&&M.s.r<v+i&&v+i<=M.e.r&&(w=M.e.c+1-a,p=-1)}C=+P.getAttribute("colspan")||1,((_=+P.getAttribute("rowspan")||1)>1||C>1)&&f.push({s:{r:v+i,c:w+a},e:{r:v+i+(_||1)-1,c:w+a+(C||1)-1}});var B={t:"s",v:O},U=P.getAttribute("data-t")||P.getAttribute("t")||"";O!=null&&(O.length==0?B.t=U||"z":n.raw||O.trim().length==0||U=="s"||(O==="TRUE"?B={t:"b",v:!0}:O==="FALSE"?B={t:"b",v:!1}:isNaN(nd(O))?isNaN(Ly(O).getDate())||(B={t:"d",v:ki(O)},n.cellDates||(B={t:"n",v:Wa(B.v)}),B.z=n.dateNF||Rr[14]):B={t:"n",v:nd(O)})),B.z===void 0&&D!=null&&(B.z=D);var H="",Z=P.getElementsByTagName("A");if(Z&&Z.length)for(var ee=0;ee<Z.length&&!(Z[ee].hasAttribute("href")&&(H=Z[ee].getAttribute("href"),H.charAt(0)!="#"));++ee);H&&H.charAt(0)!="#"&&(B.l={Target:H}),n.dense?(e[v+i]||(e[v+i]=[]),e[v+i][w+a]=B):e[jr({c:w+a,r:v+i})]=B,c.e.c<w+a&&(c.e.c=w+a),w+=C}}++v}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),c.e.r=Math.max(c.e.r,v-1+i),e["!ref"]=Zr(c),v>=l&&(e["!fullref"]=Zr((c.e.r=o.length-x+v-1+i,c))),e}function yve(e,t){var r=t||{},n=r.dense?[]:{};return vve(n,e,t)}function Ukt(e,t){return sm(yve(e,t),t)}function Bee(e){var t="",r=$kt(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function $kt(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function zkt(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,i){return Array(parseInt(i,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Pn(t.replace(/<[^>]*>/g,""));return[r]}var Uee={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function bve(e,t){var r=t||{},n=k$(e),i=[],a,s,o={name:""},l="",c=0,d,f,p={},m=[],x=r.dense?[]:{},v,b,w={value:""},_="",C=0,N=[],R=-1,P=-1,O={s:{r:1e6,c:1e7},e:{r:0,c:0}},D=0,M={},B=[],U={},H=0,Z=0,ee=[],V=1,te=1,se=[],Q={Names:[]},X={},fe=["",""],Se=[],Y={},ce="",W=0,G=!1,ie=!1,Ce=0;for(eE.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");v=eE.exec(n);)switch(v[3]=v[3].replace(/_.*$/,"")){case"table":case"":v[1]==="/"?(O.e.c>=O.s.c&&O.e.r>=O.s.r?x["!ref"]=Zr(O):x["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=O.e.r&&(x["!fullref"]=x["!ref"],O.e.r=r.sheetRows-1,x["!ref"]=Zr(O)),B.length&&(x["!merges"]=B),ee.length&&(x["!rows"]=ee),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),m.push(d.name),p[d.name]=x,ie=!1):v[0].charAt(v[0].length-2)!=="/"&&(d=Dr(v[0],!1),R=P=-1,O.s.r=O.s.c=1e7,O.e.r=O.e.c=0,x=r.dense?[]:{},B=[],ee=[],ie=!0);break;case"table-row-group":v[1]==="/"?--D:++D;break;case"table-row":case"":if(v[1]==="/"){R+=V,V=1;break}if(f=Dr(v[0],!1),f.?R=f.-1:R==-1&&(R=0),V=+f["number-rows-repeated"]||1,V<10)for(Ce=0;Ce<V;++Ce)D>0&&(ee[R+Ce]={level:D});P=-1;break;case"covered-table-cell":v[1]!=="/"&&++P,r.sheetStubs&&(r.dense?(x[R]||(x[R]=[]),x[R][P]={t:"z"}):x[jr({r:R,c:P})]={t:"z"}),_="",N=[];break;case"table-cell":case"":if(v[0].charAt(v[0].length-2)==="/")++P,w=Dr(v[0],!1),te=parseInt(w["number-columns-repeated"]||"1",10),b={t:"z",v:null},w.formula&&r.cellFormula!=!1&&(b.f=Dee(Pn(w.formula))),(w.||w["value-type"])=="string"&&(b.t="s",b.v=Pn(w["string-value"]||""),r.dense?(x[R]||(x[R]=[]),x[R][P]=b):x[jr({r:R,c:P})]=b),P+=te-1;else if(v[1]!=="/"){++P,_="",C=0,N=[],te=1;var re=V?R+V-1:R;if(P>O.e.c&&(O.e.c=P),P<O.s.c&&(O.s.c=P),R<O.s.r&&(O.s.r=R),re>O.e.r&&(O.e.r=re),w=Dr(v[0],!1),Se=[],Y={},b={t:w.||w["value-type"],v:null},r.cellFormula)if(w.formula&&(w.formula=Pn(w.formula)),w["number-matrix-columns-spanned"]&&w["number-matrix-rows-spanned"]&&(H=parseInt(w["number-matrix-rows-spanned"],10)||0,Z=parseInt(w["number-matrix-columns-spanned"],10)||0,U={s:{r:R,c:P},e:{r:R+H-1,c:P+Z-1}},b.F=Zr(U),se.push([U,b.F])),w.formula)b.f=Dee(w.formula);else for(Ce=0;Ce<se.length;++Ce)R>=se[Ce][0].s.r&&R<=se[Ce][0].e.r&&P>=se[Ce][0].s.c&&P<=se[Ce][0].e.c&&(b.F=se[Ce][1]);switch((w["number-columns-spanned"]||w["number-rows-spanned"])&&(H=parseInt(w["number-rows-spanned"],10)||0,Z=parseInt(w["number-columns-spanned"],10)||0,U={s:{r:R,c:P},e:{r:R+H-1,c:P+Z-1}},B.push(U)),w["number-columns-repeated"]&&(te=parseInt(w["number-columns-repeated"],10)),b.t){case"boolean":b.t="b",b.v=Si(w["boolean-value"]);break;case"float":b.t="n",b.v=parseFloat(w.value);break;case"percentage":b.t="n",b.v=parseFloat(w.value);break;case"currency":b.t="n",b.v=parseFloat(w.value);break;case"date":b.t="d",b.v=ki(w["date-value"]),r.cellDates||(b.t="n",b.v=Wa(b.v)),b.z="m/d/yy";break;case"time":b.t="n",b.v=mxt(w["time-value"])/86400,r.cellDates&&(b.t="d",b.v=wP(b.v)),b.z="HH:MM:SS";break;case"number":b.t="n",b.v=parseFloat(w.);break;default:if(b.t==="string"||b.t==="text"||!b.t)b.t="s",w["string-value"]!=null&&(_=Pn(w["string-value"]),N=[]);else throw new Error("Unsupported value type "+b.t)}}else{if(G=!1,b.t==="s"&&(b.v=_||"",N.length&&(b.R=N),G=C==0),X.Target&&(b.l=X),Se.length>0&&(b.c=Se,Se=[]),_&&r.cellText!==!1&&(b.w=_),G&&(b.t="z",delete b.v),(!G||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=R))for(var ne=0;ne<V;++ne){if(te=parseInt(w["number-columns-repeated"]||"1",10),r.dense)for(x[R+ne]||(x[R+ne]=[]),x[R+ne][P]=ne==0?b:_i(b);--te>0;)x[R+ne][P+te]=_i(b);else for(x[jr({r:R+ne,c:P})]=b;--te>0;)x[jr({r:R+ne,c:P+te})]=_i(b);O.e.c<=P&&(O.e.c=P)}te=parseInt(w["number-columns-repeated"]||"1",10),P+=te-1,te=0,b={},_="",N=[]}X={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(v[1]==="/"){if((a=i.pop())[0]!==v[3])throw"Bad state: "+a}else v[0].charAt(v[0].length-2)!=="/"&&i.push([v[3],!0]);break;case"annotation":if(v[1]==="/"){if((a=i.pop())[0]!==v[3])throw"Bad state: "+a;Y.t=_,N.length&&(Y.R=N),Y.a=ce,Se.push(Y)}else v[0].charAt(v[0].length-2)!=="/"&&i.push([v[3],!1]);ce="",W=0,_="",C=0,N=[];break;case"creator":v[1]==="/"?ce=n.slice(W,v.index):W=v.index+v[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(v[1]==="/"){if((a=i.pop())[0]!==v[3])throw"Bad state: "+a}else v[0].charAt(v[0].length-2)!=="/"&&i.push([v[3],!1]);_="",C=0,N=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(v[1]==="/"){if(M[o.name]=l,(a=i.pop())[0]!==v[3])throw"Bad state: "+a}else v[0].charAt(v[0].length-2)!=="/"&&(l="",o=Dr(v[0],!1),i.push([v[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(i[i.length-1][0]){case"time-style":case"date-style":s=Dr(v[0],!1),l+=Uee[v[3]][s.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(i[i.length-1][0]){case"time-style":case"date-style":s=Dr(v[0],!1),l+=Uee[v[3]][s.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(v[0].slice(-2)==="/>")break;if(v[1]==="/")switch(i[i.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(c,v.index);break}else c=v.index+v[0].length;break;case"named-range":s=Dr(v[0],!1),fe=bM(s["cell-range-address"]);var ge={Name:s.name,Ref:fe[0]+"!"+fe[1]};ie&&(ge.Sheet=m.length),Q.Names.push(ge);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(i[i.length-1][0])>-1)break;if(v[1]==="/"&&(!w||!w["string-value"])){var we=zkt(n.slice(C,v.index));_=(_.length>0?_+`
`:"")+we[0]}else Dr(v[0],!1),C=v.index+v[0].length;break;case"s":break;case"database-range":if(v[1]==="/")break;try{fe=bM(Dr(v[0])["target-range-address"]),p[fe[0]]["!autofilter"]={ref:fe[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(v[1]!=="/"){if(X=Dr(v[0],!1),!X.href)break;X.Target=Pn(X.href),delete X.href,X.Target.charAt(0)=="#"&&X.Target.indexOf(".")>-1?(fe=bM(X.Target.slice(1)),X.Target="#"+fe[0]+"!"+fe[1]):X.Target.match(/^\.\.[\\\/]/)&&(X.Target=X.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(v[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(v)}}var q={Sheets:p,SheetNames:m,Workbook:Q};return r.bookSheets&&delete q.Sheets,q}function $ee(e,t){t=t||{},Lc(e,"META-INF/manifest.xml")&&m1t(Ca(e,"META-INF/manifest.xml"),t);var r=Yl(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=bve(si(r),t);return Lc(e,"meta.xml")&&(n.Props=u1e(Ca(e,"meta.xml"))),n}function zee(e,t){return bve(e,t)}var Hkt=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+ZS({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return ba+t}}(),Hee=function(){var e=function(a){return ti(a).replace(/  +/g,function(s){return'<text:s text:c="'+s.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(a,s,o){var l=[];l.push('      <table:table table:name="'+ti(s.SheetNames[o])+`" table:style-name="ta1">
`);var c=0,d=0,f=Al(a["!ref"]||"A1"),p=a["!merges"]||[],m=0,x=Array.isArray(a);if(a["!cols"])for(d=0;d<=f.e.c;++d)l.push("        <table:table-column"+(a["!cols"][d]?' table:style-name="co'+a["!cols"][d].ods+'"':"")+`></table:table-column>
`);var v="",b=a["!rows"]||[];for(c=0;c<f.s.r;++c)v=b[c]?' table:style-name="ro'+b[c].ods+'"':"",l.push("        <table:table-row"+v+`></table:table-row>
`);for(;c<=f.e.r;++c){for(v=b[c]?' table:style-name="ro'+b[c].ods+'"':"",l.push("        <table:table-row"+v+`>
`),d=0;d<f.s.c;++d)l.push(t);for(;d<=f.e.c;++d){var w=!1,_={},C="";for(m=0;m!=p.length;++m)if(!(p[m].s.c>d)&&!(p[m].s.r>c)&&!(p[m].e.c<d)&&!(p[m].e.r<c)){(p[m].s.c!=d||p[m].s.r!=c)&&(w=!0),_["table:number-columns-spanned"]=p[m].e.c-p[m].s.c+1,_["table:number-rows-spanned"]=p[m].e.r-p[m].s.r+1;break}if(w){l.push(r);continue}var N=jr({r:c,c:d}),R=x?(a[c]||[])[d]:a[N];if(R&&R.f&&(_["table:formula"]=ti(cSt(R.f)),R.F&&R.F.slice(0,N.length)==N)){var P=Al(R.F);_["table:number-matrix-columns-spanned"]=P.e.c-P.s.c+1,_["table:number-matrix-rows-spanned"]=P.e.r-P.s.r+1}if(!R){l.push(t);continue}switch(R.t){case"b":C=R.v?"TRUE":"FALSE",_["office:value-type"]="boolean",_["office:boolean-value"]=R.v?"true":"false";break;case"n":C=R.w||String(R.v||0),_["office:value-type"]="float",_["office:value"]=R.v||0;break;case"s":case"str":C=R.v==null?"":R.v,_["office:value-type"]="string";break;case"d":C=R.w||ki(R.v).toISOString(),_["office:value-type"]="date",_["office:date-value"]=ki(R.v).toISOString(),_["table:style-name"]="ce1";break;default:l.push(t);continue}var O=e(C);if(R.l&&R.l.Target){var D=R.l.Target;D=D.charAt(0)=="#"?"#"+uSt(D.slice(1)):D,D.charAt(0)!="#"&&!D.match(/^\w+:/)&&(D="../"+D),O=Ft("text:a",O,{"xlink:href":D.replace(/&/g,"&amp;")})}l.push("          "+Ft("table:table-cell",Ft("text:p",O,{}),_)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},i=function(a,s){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var o=0;s.SheetNames.map(function(c){return s.Sheets[c]}).forEach(function(c){if(c&&c["!cols"]){for(var d=0;d<c["!cols"].length;++d)if(c["!cols"][d]){var f=c["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;L0(f),f.ods=o;var p=c["!cols"][d].wpx+"px";a.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),a.push(`  </style:style>
`),++o}}});var l=0;s.SheetNames.map(function(c){return s.Sheets[c]}).forEach(function(c){if(c&&c["!rows"]){for(var d=0;d<c["!rows"].length;++d)if(c["!rows"][d]){c["!rows"][d].ods=l;var f=c["!rows"][d].hpx+"px";a.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),a.push(`  </style:style>
`),++l}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(s,o){var l=[ba],c=ZS({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=ZS({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+c+d+`>
`),l.push(c1e().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+c+`>
`),i(l,s),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var f=0;f!=s.SheetNames.length;++f)l.push(n(s.Sheets[s.SheetNames[f]],s,f));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function wve(e,t){if(t.bookType=="fods")return Hee(e,t);var r=w$(),n="",i=[],a=[];return n="mimetype",sn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",sn(r,n,Hee(e,t)),i.push([n,"text/xml"]),a.push([n,"ContentFile"]),n="styles.xml",sn(r,n,Hkt(e,t)),i.push([n,"text/xml"]),a.push([n,"StylesFile"]),n="meta.xml",sn(r,n,ba+c1e()),i.push([n,"text/xml"]),a.push([n,"MetadataFile"]),n="manifest.rdf",sn(r,n,v1t(a)),i.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",sn(r,n,g1t(i)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function bx(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function _F(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):si(am(e))}function Wkt(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Xl(Kd(e))}function Vkt(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function U0(e){var t=e.reduce(function(i,a){return i+a.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(i){r.set(i,n),n+=i.length}),r}function Wee(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function qkt(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,i=t+13;i>=t;--i)n=n*256+e[i];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function Gkt(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,i=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var a=0;i>=1;++a,i/=256)e[t+a]=i&255;e[t+15]|=r>=0?0:128}function oE(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function Qn(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function ia(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Ln(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],i=oE(e,r),a=i&7;i=Math.floor(i/8);var s=0,o;if(i==0)break;switch(a){case 0:{for(var l=r[0];e[r[0]++]>=128;);o=e.slice(l,r[0])}break;case 5:s=4,o=e.slice(r[0],r[0]+s),r[0]+=s;break;case 1:s=8,o=e.slice(r[0],r[0]+s),r[0]+=s;break;case 2:s=oE(e,r),o=e.slice(r[0],r[0]+s),r[0]+=s;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(i," at offset ").concat(n))}var c={data:o,type:a};t[i]==null?t[i]=[c]:t[i].push(c)}return t}function _s(e){var t=[];return e.forEach(function(r,n){r.forEach(function(i){i.data&&(t.push(Qn(n*8+i.type)),i.type==2&&t.push(Qn(i.data.length)),t.push(i.data))})}),U0(t)}function K$(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function jc(e){for(var t,r=[],n=[0];n[0]<e.length;){var i=oE(e,n),a=Ln(e.slice(n[0],n[0]+i));n[0]+=i;var s={id:ia(a[1][0].data),messages:[]};a[2].forEach(function(o){var l=Ln(o.data),c=ia(l[3][0].data);s.messages.push({meta:l,data:e.slice(n[0],n[0]+c)}),n[0]+=c}),(t=a[3])!=null&&t[0]&&(s.merge=ia(a[3][0].data)>>>0>0),r.push(s)}return r}function B1(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:Qn(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Qn(+!!r.merge),type:0}]);var i=[];r.messages.forEach(function(s){i.push(s.data),s.meta[3]=[{type:0,data:Qn(s.data.length)}],n[2].push({data:_s(s.meta),type:2})});var a=_s(n);t.push(Qn(a.length)),t.push(a),i.forEach(function(s){return t.push(s)})}),U0(t)}function Kkt(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=oE(t,r),i=[];r[0]<t.length;){var a=t[r[0]]&3;if(a==0){var s=t[r[0]++]>>2;if(s<60)++s;else{var o=s-59;s=t[r[0]],o>1&&(s|=t[r[0]+1]<<8),o>2&&(s|=t[r[0]+2]<<16),o>3&&(s|=t[r[0]+3]<<24),s>>>=0,s++,r[0]+=o}i.push(t.slice(r[0],r[0]+s)),r[0]+=s;continue}else{var l=0,c=0;if(a==1?(c=(t[r[0]]>>2&7)+4,l=(t[r[0]++]&224)<<3,l|=t[r[0]++]):(c=(t[r[0]++]>>2)+1,a==2?(l=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(l=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),i=[U0(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(i.push(i[0].slice(-l)),c-=l;c>=i[i.length-1].length;)i.push(i[i.length-1]),c-=i[i.length-1].length;i.push(i[0].slice(-l,-l+c))}}var d=U0(i);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Dc(e){for(var t=[],r=0;r<e.length;){var n=e[r++],i=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(Kkt(n,e.slice(r,r+i))),r+=i}if(r!==e.length)throw new Error("data is not a valid framed stream!");return U0(t)}function U1(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),i=new Uint8Array(4);t.push(i);var a=Qn(n),s=a.length;t.push(a),n<=60?(s++,t.push(new Uint8Array([n-1<<2]))):n<=256?(s+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(s+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(s+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(s+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),s+=n,i[0]=0,i[1]=s&255,i[2]=s>>8&255,i[3]=s>>16&255,r+=n}return U0(t)}function Xkt(e,t,r,n){var i=bx(e),a=i.getUint32(4,!0),s=(n>1?12:8)+Wee(a&(n>1?3470:398))*4,o=-1,l=-1,c=NaN,d=new Date(2001,0,1);a&512&&(o=i.getUint32(s,!0),s+=4),s+=Wee(a&(n>1?12288:4096))*4,a&16&&(l=i.getUint32(s,!0),s+=4),a&32&&(c=i.getFloat64(s,!0),s+=8),a&64&&(d.setTime(d.getTime()+i.getFloat64(s,!0)*1e3),s+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:c>0};break;case 7:f={t:"n",v:c/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(l>-1)f={t:"s",v:t[l]};else if(!isNaN(c))f={t:"n",v:c};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function Ykt(e,t,r){var n=bx(e),i=n.getUint32(8,!0),a=12,s=-1,o=-1,l=NaN,c=NaN,d=new Date(2001,0,1);i&1&&(l=qkt(e,a),a+=16),i&2&&(c=n.getFloat64(a,!0),a+=8),i&4&&(d.setTime(d.getTime()+n.getFloat64(a,!0)*1e3),a+=8),i&8&&(o=n.getUint32(a,!0),a+=4),i&16&&(s=n.getUint32(a,!0),a+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:l};break;case 3:f={t:"s",v:t[o]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:c>0};break;case 7:f={t:"n",v:c/86400};break;case 8:f={t:"e",v:0};break;case 9:if(s>-1)f={t:"s",v:r[s]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(i&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(i&31," : ").concat(e.slice(0,4)))}return f}function SM(e,t){var r=new Uint8Array(32),n=bx(r),i=12,a=0;switch(r[0]=5,e.t){case"n":r[1]=2,Gkt(r,i,e.v),a|=1,i+=16;break;case"b":r[1]=6,n.setFloat64(i,e.v?1:0,!0),a|=2,i+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(i,t.indexOf(e.v),!0),a|=8,i+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,a,!0),r.slice(0,i)}function EM(e,t){var r=new Uint8Array(32),n=bx(r),i=12,a=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(i,e.v,!0),a|=32,i+=8;break;case"b":r[2]=6,n.setFloat64(i,e.v?1:0,!0),a|=32,i+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(i,t.indexOf(e.v),!0),a|=16,i+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,a,!0),r.slice(0,i)}function Qkt(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return Xkt(e,t,r,e[0]);case 5:return Ykt(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function ro(e){var t=Ln(e);return oE(t[1][0].data)}function Vee(e,t){var r=Ln(t.data),n=ia(r[1][0].data),i=r[3],a=[];return(i||[]).forEach(function(s){var o=Ln(s.data),l=ia(o[1][0].data)>>>0;switch(n){case 1:a[l]=_F(o[3][0].data);break;case 8:{var c=e[ro(o[9][0].data)][0],d=Ln(c.data),f=e[ro(d[1][0].data)][0],p=ia(f.meta[1][0].data);if(p!=2001)throw new Error("2000 unexpected reference to ".concat(p));var m=Ln(f.data);a[l]=m[3].map(function(x){return _F(x.data)}).join("")}break}}),a}function Jkt(e,t){var r,n,i,a,s,o,l,c,d,f,p,m,x,v,b=Ln(e),w=ia(b[1][0].data)>>>0,_=ia(b[2][0].data)>>>0,C=((n=(r=b[8])==null?void 0:r[0])==null?void 0:n.data)&&ia(b[8][0].data)>0||!1,N,R;if((a=(i=b[7])==null?void 0:i[0])!=null&&a.data&&t!=0)N=(o=(s=b[7])==null?void 0:s[0])==null?void 0:o.data,R=(c=(l=b[6])==null?void 0:l[0])==null?void 0:c.data;else if((f=(d=b[4])==null?void 0:d[0])!=null&&f.data&&t!=1)N=(m=(p=b[4])==null?void 0:p[0])==null?void 0:m.data,R=(v=(x=b[3])==null?void 0:x[0])==null?void 0:v.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var P=C?4:1,O=bx(N),D=[],M=0;M<N.length/2;++M){var B=O.getUint16(M*2,!0);B<65535&&D.push([M,B])}if(D.length!=_)throw"Expected ".concat(_," cells, found ").concat(D.length);var U=[];for(M=0;M<D.length-1;++M)U[D[M][0]]=R.subarray(D[M][1]*P,D[M+1][1]*P);return D.length>=1&&(U[D[D.length-1][0]]=R.subarray(D[D.length-1][1]*P)),{R:w,cells:U}}function Zkt(e,t){var r,n=Ln(t.data),i=(r=n==null?void 0:n[7])!=null&&r[0]?ia(n[7][0].data)>>>0>0?1:0:-1,a=K$(n[5],function(s){return Jkt(s,i)});return{nrows:ia(n[4][0].data)>>>0,data:a.reduce(function(s,o){return s[o.R]||(s[o.R]=[]),o.cells.forEach(function(l,c){if(s[o.R][c])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(c));s[o.R][c]=l}),s},[])}}function e_t(e,t,r){var n,i=Ln(t.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(ia(i[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(i[6][0].data));if(a.e.c=(ia(i[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(i[7][0].data));r["!ref"]=Zr(a);var s=Ln(i[4][0].data),o=Vee(e,e[ro(s[4][0].data)][0]),l=(n=s[17])!=null&&n[0]?Vee(e,e[ro(s[17][0].data)][0]):[],c=Ln(s[3][0].data),d=0;c[1].forEach(function(f){var p=Ln(f.data),m=e[ro(p[2][0].data)][0],x=ia(m.meta[1][0].data);if(x!=6002)throw new Error("6001 unexpected reference to ".concat(x));var v=Zkt(e,m);v.data.forEach(function(b,w){b.forEach(function(_,C){var N=jr({r:d+w,c:C}),R=Qkt(_,o,l);R&&(r[N]=R)})}),d+=v.nrows})}function t_t(e,t){var r=Ln(t.data),n={"!ref":"A1"},i=e[ro(r[2][0].data)],a=ia(i[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return e_t(e,i[0],n),n}function r_t(e,t){var r,n=Ln(t.data),i={name:(r=n[1])!=null&&r[0]?_F(n[1][0].data):"",sheets:[]},a=K$(n[2],ro);return a.forEach(function(s){e[s].forEach(function(o){var l=ia(o.meta[1][0].data);l==6e3&&i.sheets.push(t_t(e,o))})}),i}function n_t(e,t){var r=Z$(),n=Ln(t.data),i=K$(n[1],ro);if(i.forEach(function(a){e[a].forEach(function(s){var o=ia(s.meta[1][0].data);if(o==2){var l=r_t(e,s);l.sheets.forEach(function(c,d){ez(r,c,d==0?l.name:l.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function CM(e){var t,r,n,i,a={},s=[];if(e.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var c;try{c=Dc(l.content)}catch(f){return console.log("?? "+l.content.length+" "+(f.message||f))}var d;try{d=jc(c)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){a[f.id]=f.messages,s.push(f.id)})}}),!s.length)throw new Error("File has no messages");var o=((i=(n=(r=(t=a==null?void 0:a[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:i[0].data)&&ia(a[1][0].meta[1][0].data)==1&&a[1][0];if(o||s.forEach(function(l){a[l].forEach(function(c){var d=ia(c.meta[1][0].data)>>>0;if(d==1)if(!o)o=c;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return n_t(a,o)}function i_t(e,t,r){var n,i,a,s;if(!((n=e[6])!=null&&n[0])||!((i=e[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var o=((s=(a=e[8])==null?void 0:a[0])==null?void 0:s.data)&&ia(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,c=bx(e[7][0].data),d=0,f=[],p=bx(e[4][0].data),m=0,x=[],v=0;v<t.length;++v){if(t[v]==null){c.setUint16(v*2,65535,!0),p.setUint16(v*2,65535);continue}c.setUint16(v*2,d,!0),p.setUint16(v*2,m,!0);var b,w;switch(typeof t[v]){case"string":b=SM({t:"s",v:t[v]},r),w=EM({t:"s",v:t[v]},r);break;case"number":b=SM({t:"n",v:t[v]},r),w=EM({t:"n",v:t[v]},r);break;case"boolean":b=SM({t:"b",v:t[v]},r),w=EM({t:"b",v:t[v]},r);break;default:throw new Error("Unsupported value "+t[v])}f.push(b),d+=b.length,x.push(w),m+=w.length,++l}for(e[2][0].data=Qn(l);v<e[7][0].data.length/2;++v)c.setUint16(v*2,65535,!0),p.setUint16(v*2,65535,!0);return e[6][0].data=U0(f),e[3][0].data=U0(x),l}function a_t(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Al(r["!ref"]);n.s.r=n.s.c=0;var i=!1;n.e.c>9&&(i=!0,n.e.c=9),n.e.r>49&&(i=!0,n.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Zr(n)));var a=gO(r,{range:n,header:1}),s=["~Sh33tJ5~"];a.forEach(function(ce){return ce.forEach(function(W){typeof W=="string"&&s.push(W)})});var o={},l=[],c=vr.read(t.numbers,{type:"base64"});c.FileIndex.map(function(ce,W){return[ce,c.FullPaths[W]]}).forEach(function(ce){var W=ce[0],G=ce[1];if(W.type==2&&W.name.match(/\.iwa/)){var ie=W.content,Ce=Dc(ie),re=jc(Ce);re.forEach(function(ne){l.push(ne.id),o[ne.id]={deps:[],location:G,type:ia(ne.messages[0].meta[1][0].data)}})}}),l.sort(function(ce,W){return ce-W});var d=l.filter(function(ce){return ce>1}).map(function(ce){return[ce,Qn(ce)]});c.FileIndex.map(function(ce,W){return[ce,c.FullPaths[W]]}).forEach(function(ce){var W=ce[0];if(ce[1],!!W.name.match(/\.iwa/)){var G=jc(Dc(W.content));G.forEach(function(ie){ie.messages.forEach(function(Ce){d.forEach(function(re){ie.messages.some(function(ne){return ia(ne.meta[1][0].data)!=11006&&Vkt(ne.data,re[1])})&&o[re[0]].deps.push(ie.id)})})})}});for(var f=vr.find(c,o[1].location),p=jc(Dc(f.content)),m,x=0;x<p.length;++x){var v=p[x];v.id==1&&(m=v)}var b=ro(Ln(m.messages[0].data)[1][0].data);for(f=vr.find(c,o[b].location),p=jc(Dc(f.content)),x=0;x<p.length;++x)v=p[x],v.id==b&&(m=v);for(b=ro(Ln(m.messages[0].data)[2][0].data),f=vr.find(c,o[b].location),p=jc(Dc(f.content)),x=0;x<p.length;++x)v=p[x],v.id==b&&(m=v);for(b=ro(Ln(m.messages[0].data)[2][0].data),f=vr.find(c,o[b].location),p=jc(Dc(f.content)),x=0;x<p.length;++x)v=p[x],v.id==b&&(m=v);var w=Ln(m.messages[0].data);{w[6][0].data=Qn(n.e.r+1),w[7][0].data=Qn(n.e.c+1);var _=ro(w[46][0].data),C=vr.find(c,o[_].location),N=jc(Dc(C.content));{for(var R=0;R<N.length&&N[R].id!=_;++R);if(N[R].id!=_)throw"Bad ColumnRowUIDMapArchive";var P=Ln(N[R].messages[0].data);P[1]=[],P[2]=[],P[3]=[];for(var O=0;O<=n.e.c;++O){var D=[];D[1]=D[2]=[{type:0,data:Qn(O+420690)}],P[1].push({type:2,data:_s(D)}),P[2].push({type:0,data:Qn(O)}),P[3].push({type:0,data:Qn(O)})}P[4]=[],P[5]=[],P[6]=[];for(var M=0;M<=n.e.r;++M)D=[],D[1]=D[2]=[{type:0,data:Qn(M+726270)}],P[4].push({type:2,data:_s(D)}),P[5].push({type:0,data:Qn(M)}),P[6].push({type:0,data:Qn(M)});N[R].messages[0].data=_s(P)}C.content=U1(B1(N)),C.size=C.content.length,delete w[46];var B=Ln(w[4][0].data);{B[7][0].data=Qn(n.e.r+1);var U=Ln(B[1][0].data),H=ro(U[2][0].data);C=vr.find(c,o[H].location),N=jc(Dc(C.content));{if(N[0].id!=H)throw"Bad HeaderStorageBucket";var Z=Ln(N[0].messages[0].data);for(M=0;M<a.length;++M){var ee=Ln(Z[2][0].data);ee[1][0].data=Qn(M),ee[4][0].data=Qn(a[M].length),Z[2][M]={type:Z[2][0].type,data:_s(ee)}}N[0].messages[0].data=_s(Z)}C.content=U1(B1(N)),C.size=C.content.length;var V=ro(B[2][0].data);C=vr.find(c,o[V].location),N=jc(Dc(C.content));{if(N[0].id!=V)throw"Bad HeaderStorageBucket";for(Z=Ln(N[0].messages[0].data),O=0;O<=n.e.c;++O)ee=Ln(Z[2][0].data),ee[1][0].data=Qn(O),ee[4][0].data=Qn(n.e.r+1),Z[2][O]={type:Z[2][0].type,data:_s(ee)};N[0].messages[0].data=_s(Z)}C.content=U1(B1(N)),C.size=C.content.length;var te=ro(B[4][0].data);(function(){for(var ce=vr.find(c,o[te].location),W=jc(Dc(ce.content)),G,ie=0;ie<W.length;++ie){var Ce=W[ie];Ce.id==te&&(G=Ce)}var re=Ln(G.messages[0].data);{re[3]=[];var ne=[];s.forEach(function(q,Ae){ne[1]=[{type:0,data:Qn(Ae)}],ne[2]=[{type:0,data:Qn(1)}],ne[3]=[{type:2,data:Wkt(q)}],re[3].push({type:2,data:_s(ne)})})}G.messages[0].data=_s(re);var ge=B1(W),we=U1(ge);ce.content=we,ce.size=ce.content.length})();var se=Ln(B[3][0].data);{var Q=se[1][0];delete se[2];var X=Ln(Q.data);{var fe=ro(X[2][0].data);(function(){for(var ce=vr.find(c,o[fe].location),W=jc(Dc(ce.content)),G,ie=0;ie<W.length;++ie){var Ce=W[ie];Ce.id==fe&&(G=Ce)}var re=Ln(G.messages[0].data);{delete re[6],delete se[7];var ne=new Uint8Array(re[5][0].data);re[5]=[];for(var ge=0,we=0;we<=n.e.r;++we){var q=Ln(ne);ge+=i_t(q,a[we],s),q[1][0].data=Qn(we),re[5].push({data:_s(q),type:2})}re[1]=[{type:0,data:Qn(n.e.c+1)}],re[2]=[{type:0,data:Qn(n.e.r+1)}],re[3]=[{type:0,data:Qn(ge)}],re[4]=[{type:0,data:Qn(n.e.r+1)}]}G.messages[0].data=_s(re);var Ae=B1(W),Pe=U1(Ae);ce.content=Pe,ce.size=ce.content.length})()}Q.data=_s(X)}B[3][0].data=_s(se)}w[4][0].data=_s(B)}m.messages[0].data=_s(w);var Se=B1(p),Y=U1(Se);return f.content=Y,f.size=f.content.length,c}function Sve(e){return function(r){for(var n=0;n!=e.length;++n){var i=e[n];r[i[0]]===void 0&&(r[i[0]]=i[1]),i[2]==="n"&&(r[i[0]]=Number(r[i[0]]))}}}function X$(e){Sve([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function Y$(e){Sve([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function s_t(e){return yn.WS.indexOf(e)>-1?"sheet":e==yn.CS?"chart":e==yn.DS?"dialog":e==yn.MS?"macro":e&&e.length?e:"sheet"}function o_t(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,s_t(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function l_t(e,t,r,n,i,a,s,o,l,c,d,f){try{a[n]=$2(Yl(e,r,!0),t);var p=Ca(e,t),m;switch(o){case"sheet":m=ICt(p,t,i,l,a[n],c,d,f);break;case"chart":if(m=OCt(p,t,i,l,a[n],c,d,f),!m||!m["!drawel"])break;var x=a2(m["!drawel"].Target,t),v=tE(x),b=xwt(Yl(e,x,!0),$2(Yl(e,v,!0),x)),w=a2(b,x),_=tE(w);m=iCt(Yl(e,w,!0),w,l,$2(Yl(e,_,!0),w),c,m);break;case"macro":m=PCt(p,t,i,l,a[n],c,d,f);break;case"dialog":m=RCt(p,t,i,l,a[n],c,d,f);break;default:throw new Error("Unrecognized sheet type "+o)}s[n]=m;var C=[];a&&a[n]&&aa(a[n]).forEach(function(N){var R="";if(a[n][N].Type==yn.CMNT){R=a2(a[n][N].Target,t);var P=FCt(Ca(e,R,!0),R,l);if(!P||!P.length)return;Iee(m,P,!1)}a[n][N].Type==yn.TCMNT&&(R=a2(a[n][N].Target,t),C=C.concat(ywt(Ca(e,R,!0),l)))}),C&&C.length&&Iee(m,C,!0,l.people||[])}catch(N){if(l.WTF)throw N}}function Ic(e){return e.charAt(0)=="/"?e.slice(1):e}function c_t(e,t){if(Nb(),t=t||{},X$(t),Lc(e,"META-INF/manifest.xml")||Lc(e,"objectdata.xml"))return $ee(e,t);if(Lc(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof CM<"u"){if(e.FileIndex)return CM(e);var r=vr.utils.cfb_new();return QZ(e).forEach(function(ee){sn(r,ee,bxt(e,ee))}),CM(r)}throw new Error("Unsupported NUMBERS file")}if(!Lc(e,"[Content_Types].xml"))throw Lc(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Lc(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=QZ(e),i=h1t(Yl(e,"[Content_Types].xml")),a=!1,s,o;if(i.workbooks.length===0&&(o="xl/workbook.xml",Ca(e,o,!0)&&i.workbooks.push(o)),i.workbooks.length===0){if(o="xl/workbook.bin",!Ca(e,o,!0))throw new Error("Could not find workbook");i.workbooks.push(o),a=!0}i.workbooks[0].slice(-3)=="bin"&&(a=!0);var l={},c={};if(!t.bookSheets&&!t.bookProps){if(z2=[],i.sst)try{z2=MCt(Ca(e,Ic(i.sst)),i.sst,t)}catch(ee){if(t.WTF)throw ee}t.cellStyles&&i.themes.length&&(l=DCt(Yl(e,i.themes[0].replace(/^\//,""),!0)||"",i.themes[0],t)),i.style&&(c=jCt(Ca(e,Ic(i.style)),i.style,l,t))}i.links.map(function(ee){try{var V=$2(Yl(e,tE(Ic(ee))),ee);return BCt(Ca(e,Ic(ee)),V,ee,t)}catch{}});var d=TCt(Ca(e,Ic(i.workbooks[0])),i.workbooks[0],t),f={},p="";i.coreprops.length&&(p=Ca(e,Ic(i.coreprops[0]),!0),p&&(f=u1e(p)),i.extprops.length!==0&&(p=Ca(e,Ic(i.extprops[0]),!0),p&&b1t(p,f,t)));var m={};(!t.bookSheets||t.bookProps)&&i.custprops.length!==0&&(p=Yl(e,Ic(i.custprops[0]),!0),p&&(m=S1t(p,t)));var x={};if((t.bookSheets||t.bookProps)&&(d.Sheets?s=d.Sheets.map(function(V){return V.name}):f.Worksheets&&f.SheetNames.length>0&&(s=f.SheetNames),t.bookProps&&(x.Props=f,x.Custprops=m),t.bookSheets&&typeof s<"u"&&(x.SheetNames=s),t.bookSheets?x.SheetNames:t.bookProps))return x;s={};var v={};t.bookDeps&&i.calcchain&&(v=LCt(Ca(e,Ic(i.calcchain)),i.calcchain));var b=0,w={},_,C;{var N=d.Sheets;f.Worksheets=N.length,f.SheetNames=[];for(var R=0;R!=N.length;++R)f.SheetNames[R]=N[R].name}var P=a?"bin":"xml",O=i.workbooks[0].lastIndexOf("/"),D=(i.workbooks[0].slice(0,O+1)+"_rels/"+i.workbooks[0].slice(O+1)+".rels").replace(/^\//,"");Lc(e,D)||(D="xl/_rels/workbook."+P+".rels");var M=$2(Yl(e,D,!0),D.replace(/_rels.*/,"s5s"));(i.metadata||[]).length>=1&&(t.xlmeta=UCt(Ca(e,Ic(i.metadata[0])),i.metadata[0],t)),(i.people||[]).length>=1&&(t.people=wwt(Ca(e,Ic(i.people[0])),t)),M&&(M=o_t(M,d.Sheets));var B=Ca(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=f.Worksheets;++b){var U="sheet";if(M&&M[b]?(_="xl/"+M[b][1].replace(/[\/]?xl\//,""),Lc(e,_)||(_=M[b][1]),Lc(e,_)||(_=D.replace(/_rels\/.*$/,"")+M[b][1]),U=M[b][2]):(_="xl/worksheets/sheet"+(b+1-B)+"."+P,_=_.replace(/sheet0\./,"sheet.")),C=_.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(b!=t.sheets)continue e;break;case"string":if(f.SheetNames[b].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var H=!1,Z=0;Z!=t.sheets.length;++Z)typeof t.sheets[Z]=="number"&&t.sheets[Z]==b&&(H=1),typeof t.sheets[Z]=="string"&&t.sheets[Z].toLowerCase()==f.SheetNames[b].toLowerCase()&&(H=1);if(!H)continue e}}l_t(e,_,C,f.SheetNames[b],b,w,s,U,t,d,l,c)}return x={Directory:i,Workbook:d,Props:f,Custprops:m,Deps:v,Sheets:s,SheetNames:f.SheetNames,Strings:z2,Styles:c,Themes:l,SSF:_i(Rr)},t&&t.bookFiles&&(e.files?(x.keys=n,x.files=e.files):(x.keys=[],x.files={},e.FullPaths.forEach(function(ee,V){ee=ee.replace(/^Root Entry[\/]/,""),x.keys.push(ee),x.files[ee]=e.FileIndex[V]}))),t&&t.bookVBA&&(i.vba.length>0?x.vbaraw=Ca(e,Ic(i.vba[0]),!0):i.defaults&&i.defaults.bin===Twt&&(x.vbaraw=Ca(e,"xl/vbaProject.bin",!0))),x}function u_t(e,t){var r=t||{},n="Workbook",i=vr.find(e,n);try{if(n="/!DataSpaces/Version",i=vr.find(e,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(Uyt(i.content),n="/!DataSpaces/DataSpaceMap",i=vr.find(e,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=zyt(i.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",i=vr.find(e,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=Hyt(i.content);if(s.length!=1||s[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",i=vr.find(e,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);Vyt(i.content)}catch{}if(n="/EncryptionInfo",i=vr.find(e,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=qyt(i.content);if(n="/EncryptedPackage",i=vr.find(e,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],i.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],i.content,r.password||"",r);throw new Error("File is password-protected")}function d_t(e,t){return t.bookType=="ods"?wve(e,t):t.bookType=="numbers"?a_t(e,t):t.bookType=="xlsb"?f_t(e,t):h_t(e,t)}function f_t(e,t){hv=1024,e&&!e.SSF&&(e.SSF=_i(Rr)),e&&e.SSF&&(Nb(),vP(e.SSF),t.revssf=bP(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,H2?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=X1e.indexOf(t.bookType)>-1,i=D$();Y$(t=t||{});var a=w$(),s="",o=0;if(t.cellXfs=[],om(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),s="docProps/core.xml",sn(a,s,d1e(e.Props,t)),i.coreprops.push(s),Zn(t.rels,2,s,yn.CORE_PROPS),s="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],c=0;c<e.SheetNames.length;++c)(e.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}for(e.Props.Worksheets=e.Props.SheetNames.length,sn(a,s,p1e(e.Props)),i.extprops.push(s),Zn(t.rels,3,s,yn.EXT_PROPS),e.Custprops!==e.Props&&aa(e.Custprops||{}).length>0&&(s="docProps/custom.xml",sn(a,s,m1e(e.Custprops)),i.custprops.push(s),Zn(t.rels,4,s,yn.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],p=(f||{})["!type"]||"sheet";switch(p){case"chart":default:s="xl/worksheets/sheet"+o+"."+r,sn(a,s,zCt(o-1,s,t,e,d)),i.sheets.push(s),Zn(t.wbrels,-1,"worksheets/sheet"+o+"."+r,yn.WS[0])}if(f){var m=f["!comments"],x=!1,v="";m&&m.length>0&&(v="xl/comments"+o+"."+r,sn(a,v,VCt(m,v)),i.comments.push(v),Zn(d,-1,"../comments"+o+"."+r,yn.CMNT),x=!0),f["!legacy"]&&x&&sn(a,"xl/drawings/vmlDrawing"+o+".vml",G1e(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&sn(a,tE(s),Ov(d))}return t.Strings!=null&&t.Strings.length>0&&(s="xl/sharedStrings."+r,sn(a,s,WCt(t.Strings,s,t)),i.strs.push(s),Zn(t.wbrels,-1,"sharedStrings."+r,yn.SST)),s="xl/workbook."+r,sn(a,s,$Ct(e,s)),i.workbooks.push(s),Zn(t.rels,1,s,yn.WB),s="xl/theme/theme1.xml",sn(a,s,$$(e.Themes,t)),i.themes.push(s),Zn(t.wbrels,-1,"theme/theme1.xml",yn.THEME),s="xl/styles."+r,sn(a,s,HCt(e,s,t)),i.styles.push(s),Zn(t.wbrels,-1,"styles."+r,yn.STY),e.vbaraw&&n&&(s="xl/vbaProject.bin",sn(a,s,e.vbaraw),i.vba.push(s),Zn(t.wbrels,-1,"vbaProject.bin",yn.VBA)),s="xl/metadata."+r,sn(a,s,qCt(s)),i.metadata.push(s),Zn(t.wbrels,-1,"metadata."+r,yn.XLMETA),sn(a,"[Content_Types].xml",l1e(i,t)),sn(a,"_rels/.rels",Ov(t.rels)),sn(a,"xl/_rels/workbook."+r+".rels",Ov(t.wbrels)),delete t.revssf,delete t.ssf,a}function h_t(e,t){hv=1024,e&&!e.SSF&&(e.SSF=_i(Rr)),e&&e.SSF&&(Nb(),vP(e.SSF),t.revssf=bP(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,H2?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=X1e.indexOf(t.bookType)>-1,i=D$();Y$(t=t||{});var a=w$(),s="",o=0;if(t.cellXfs=[],om(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),s="docProps/core.xml",sn(a,s,d1e(e.Props,t)),i.coreprops.push(s),Zn(t.rels,2,s,yn.CORE_PROPS),s="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],c=0;c<e.SheetNames.length;++c)(e.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}e.Props.Worksheets=e.Props.SheetNames.length,sn(a,s,p1e(e.Props)),i.extprops.push(s),Zn(t.rels,3,s,yn.EXT_PROPS),e.Custprops!==e.Props&&aa(e.Custprops||{}).length>0&&(s="docProps/custom.xml",sn(a,s,m1e(e.Custprops)),i.custprops.push(s),Zn(t.rels,4,s,yn.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},p=e.Sheets[e.SheetNames[o-1]],m=(p||{})["!type"]||"sheet";switch(m){case"chart":default:s="xl/worksheets/sheet"+o+"."+r,sn(a,s,sve(o-1,t,e,f)),i.sheets.push(s),Zn(t.wbrels,-1,"worksheets/sheet"+o+"."+r,yn.WS[0])}if(p){var x=p["!comments"],v=!1,b="";if(x&&x.length>0){var w=!1;x.forEach(function(_){_[1].forEach(function(C){C.T==!0&&(w=!0)})}),w&&(b="xl/threadedComments/threadedComment"+o+"."+r,sn(a,b,bwt(x,d,t)),i.threadedcomments.push(b),Zn(f,-1,"../threadedComments/threadedComment"+o+"."+r,yn.TCMNT)),b="xl/comments"+o+"."+r,sn(a,b,K1e(x)),i.comments.push(b),Zn(f,-1,"../comments"+o+"."+r,yn.CMNT),v=!0}p["!legacy"]&&v&&sn(a,"xl/drawings/vmlDrawing"+o+".vml",G1e(o,p["!comments"])),delete p["!comments"],delete p["!legacy"]}f["!id"].rId1&&sn(a,tE(s),Ov(f))}return t.Strings!=null&&t.Strings.length>0&&(s="xl/sharedStrings."+r,sn(a,s,D1e(t.Strings,t)),i.strs.push(s),Zn(t.wbrels,-1,"sharedStrings."+r,yn.SST)),s="xl/workbook."+r,sn(a,s,dve(e)),i.workbooks.push(s),Zn(t.rels,1,s,yn.WB),s="xl/theme/theme1.xml",sn(a,s,$$(e.Themes,t)),i.themes.push(s),Zn(t.wbrels,-1,"theme/theme1.xml",yn.THEME),s="xl/styles."+r,sn(a,s,H1e(e,t)),i.styles.push(s),Zn(t.wbrels,-1,"styles."+r,yn.STY),e.vbaraw&&n&&(s="xl/vbaProject.bin",sn(a,s,e.vbaraw),i.vba.push(s),Zn(t.wbrels,-1,"vbaProject.bin",yn.VBA)),s="xl/metadata."+r,sn(a,s,q1e()),i.metadata.push(s),Zn(t.wbrels,-1,"metadata."+r,yn.XLMETA),d.length>1&&(s="xl/persons/person.xml",sn(a,s,Swt(d)),i.people.push(s),Zn(t.wbrels,-1,"persons/person.xml",yn.PEOPLE)),sn(a,"[Content_Types].xml",l1e(i,t)),sn(a,"_rels/.rels",Ov(t.rels)),sn(a,"xl/_rels/workbook."+r+".rels",Ov(t.wbrels)),delete t.revssf,delete t.ssf,a}function Q$(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=uc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function p_t(e,t){return vr.find(e,"EncryptedPackage")?u_t(e,t):mve(e,t)}function m_t(e,t){var r,n=e,i=t||{};return i.type||(i.type=pn&&Buffer.isBuffer(e)?"buffer":"base64"),r=Fxe(n,i),c_t(r,i)}function Eve(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return CF(e.slice(r),t);default:break e}return By.to_workbook(e,t)}function g_t(e,t){var r="",n=Q$(e,t);switch(t.type){case"base64":r=uc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=gx(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=si(r)),t.type="binary",Eve(r,t)}function x_t(e,t){var r=e;return t.type=="base64"&&(r=uc(r)),r=XS.utils.decode(1200,r.slice(2),"str"),t.type="binary",Eve(r,t)}function v_t(e){return e.match(/[^\x00-\x7F]/)?Kd(e):e}function kM(e,t,r,n){return n?(r.type="string",By.to_workbook(e,r)):By.to_workbook(t,r)}function mO(e,t){g$();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return mO(new Uint8Array(e),(r=_i(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,i=[0,0,0,0],a=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Rv={},r.dateNF&&(Rv.dateNF=r.dateNF),r.type||(r.type=pn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=pn?"buffer":"binary",n=fxt(e),typeof Uint8Array<"u"&&!pn&&(r.type="array")),r.type=="string"&&(a=!0,r.type="binary",r.codepage=65001,n=v_t(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var s=new ArrayBuffer(3),o=new Uint8Array(s);if(o.foo="bar",!o.foo)return r=_i(r),r.type="array",mO(x$(n),r)}switch((i=Q$(n,r))[0]){case 208:if(i[1]===207&&i[2]===17&&i[3]===224&&i[4]===161&&i[5]===177&&i[6]===26&&i[7]===225)return p_t(vr.read(n,r),r);break;case 9:if(i[1]<=8)return mve(n,r);break;case 60:return CF(n,r);case 73:if(i[1]===73&&i[2]===42&&i[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(i[1]===68)return Eyt(n,r);break;case 84:if(i[1]===65&&i[2]===66&&i[3]===76)return R1e.to_workbook(n,r);break;case 80:return i[1]===75&&i[2]<9&&i[3]<9?m_t(n,r):kM(e,n,r,a);case 239:return i[3]===60?CF(n,r):kM(e,n,r,a);case 255:if(i[1]===254)return x_t(n,r);if(i[1]===0&&i[2]===2&&i[3]===0)return Lg.to_workbook(n,r);break;case 0:if(i[1]===0&&(i[2]>=2&&i[3]===0||i[2]===0&&(i[3]===8||i[3]===9)))return Lg.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return EF.to_workbook(n,r);case 123:if(i[1]===92&&i[2]===114&&i[3]===116)return U1e.to_workbook(n,r);break;case 10:case 13:case 32:return g_t(n,r);case 137:if(i[1]===80&&i[2]===78&&i[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Syt.indexOf(i[0])>-1&&i[2]<=12&&i[3]<=31?EF.to_workbook(n,r):kM(e,n,r,a)}function Cve(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return FC(t.file,vr.write(e,{type:pn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return vr.write(e,t)}function y_t(e,t){var r=_i(t||{}),n=d_t(e,r);return b_t(n,r)}function b_t(e,t){var r={},n=pn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var i=e.FullPaths?vr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof i=="string"){if(t.type=="binary"||t.type=="base64")return i;i=new Uint8Array(xP(i))}return t.password&&typeof encrypt_agile<"u"?Cve(encrypt_agile(i,t.password),t):t.type==="file"?FC(t.file,i):t.type=="string"?si(i):i}function w_t(e,t){var r=t||{},n=vkt(e,r);return Cve(n,r)}function Nd(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return YS(Kd(n));case"binary":return Kd(n);case"string":return e;case"file":return FC(t.file,n,"utf8");case"buffer":return pn?op(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Nd(n,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function S_t(e,t){switch(t.type){case"base64":return YS(e);case"binary":return e;case"string":return e;case"file":return FC(t.file,e,"binary");case"buffer":return pn?op(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function vN(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?YS(r):t.type=="string"?si(r):r;case"file":return FC(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function kve(e,t){g$(),pCt(e);var r=_i(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=kve(e,r);return r.type="array",xP(n)}var i=0;if(r.sheet&&(typeof r.sheet=="number"?i=r.sheet:i=e.SheetNames.indexOf(r.sheet),!e.SheetNames[i]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Nd(dkt(e,r),r);case"slk":case"sylk":return Nd(P1e.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"htm":case"html":return Nd(xve(e.Sheets[e.SheetNames[i]],r),r);case"txt":return S_t(_ve(e.Sheets[e.SheetNames[i]],r),r);case"csv":return Nd(J$(e.Sheets[e.SheetNames[i]],r),r,"\uFEFF");case"dif":return Nd(R1e.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"dbf":return vN(EF.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"prn":return Nd(By.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"rtf":return Nd(U1e.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"eth":return Nd(j1e.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"fods":return Nd(wve(e,r),r);case"wk1":return vN(Lg.sheet_to_wk1(e.Sheets[e.SheetNames[i]],r),r);case"wk3":return vN(Lg.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),vN(gve(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),w_t(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return y_t(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function E_t(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function C_t(e,t,r){var n={};return n.type="file",n.file=t,E_t(n),kve(e,n)}function k_t(e,t,r,n,i,a,s,o){var l=ga(r),c=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,p=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:r,enumerable:!1})}catch{p.__rowNum__=r}else p.__rowNum__=r;if(!s||e[r])for(var m=t.s.c;m<=t.e.c;++m){var x=s?e[r][m]:e[n[m]+l];if(x===void 0||x.t===void 0){if(c===void 0)continue;a[m]!=null&&(p[a[m]]=c);continue}var v=x.v;switch(x.t){case"z":if(v==null)break;continue;case"e":v=v==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(a[m]!=null){if(v==null)if(x.t=="e"&&v===null)p[a[m]]=null;else if(c!==void 0)p[a[m]]=c;else if(d&&v===null)p[a[m]]=null;else continue;else p[a[m]]=d&&(x.t!=="n"||x.t==="n"&&o.rawNumbers!==!1)?v:Kh(x,v,o);v!=null&&(f=!1)}}return{row:p,isempty:f}}function gO(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,i=1,a=[],s=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},d=c.range!=null?c.range:e["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof d){case"string":l=Rn(d);break;case"number":l=Rn(e["!ref"]),l.s.r=d;break;default:l=d}n>0&&(i=0);var f=ga(l.s.r),p=[],m=[],x=0,v=0,b=Array.isArray(e),w=l.s.r,_=0,C={};b&&!e[w]&&(e[w]=[]);var N=c.skipHidden&&e["!cols"]||[],R=c.skipHidden&&e["!rows"]||[];for(_=l.s.c;_<=l.e.c;++_)if(!(N[_]||{}).hidden)switch(p[_]=Ui(_),r=b?e[w][_]:e[p[_]+f],n){case 1:a[_]=_-l.s.c;break;case 2:a[_]=p[_];break;case 3:a[_]=c.header[_-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=s=Kh(r,null,c),v=C[s]||0,!v)C[s]=1;else{do o=s+"_"+v++;while(C[o]);C[s]=v,C[o]=1}a[_]=o}for(w=l.s.r+i;w<=l.e.r;++w)if(!(R[w]||{}).hidden){var P=k_t(e,l,w,p,n,a,b,c);(P.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(m[x++]=P.row)}return m.length=x,m}var qee=/"/g;function __t(e,t,r,n,i,a,s,o){for(var l=!0,c=[],d="",f=ga(r),p=t.s.c;p<=t.e.c;++p)if(n[p]){var m=o.dense?(e[r]||[])[p]:e[n[p]+f];if(m==null)d="";else if(m.v!=null){l=!1,d=""+(o.rawNumbers&&m.t=="n"?m.v:Kh(m,null,o));for(var x=0,v=0;x!==d.length;++x)if((v=d.charCodeAt(x))===i||v===a||v===34||o.forceQuotes){d='"'+d.replace(qee,'""')+'"';break}d=="ID"&&(d='"ID"')}else m.f!=null&&!m.F?(l=!1,d="="+m.f,d.indexOf(",")>=0&&(d='"'+d.replace(qee,'""')+'"')):d="";c.push(d)}return o.blankrows===!1&&l?null:c.join(s)}function J$(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var i=Rn(e["!ref"]),a=n.FS!==void 0?n.FS:",",s=a.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),c=new RegExp((a=="|"?"\\|":a)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var p=n.skipHidden&&e["!cols"]||[],m=n.skipHidden&&e["!rows"]||[],x=i.s.c;x<=i.e.c;++x)(p[x]||{}).hidden||(f[x]=Ui(x));for(var v=0,b=i.s.r;b<=i.e.r;++b)(m[b]||{}).hidden||(d=__t(e,i,b,f,s,l,a,n),d!=null&&(n.strip&&(d=d.replace(c,"")),(d||n.blankrows!==!1)&&r.push((v++?o:"")+d)));return delete n.dense,r.join("")}function _ve(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=J$(e,t);return r}function N_t(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var i=Rn(e["!ref"]),a="",s=[],o,l=[],c=Array.isArray(e);for(o=i.s.c;o<=i.e.c;++o)s[o]=Ui(o);for(var d=i.s.r;d<=i.e.r;++d)for(a=ga(d),o=i.s.c;o<=i.e.c;++o)if(t=s[o]+a,r=c?(e[d]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=t+"="+n}return l}function Nve(e,t,r){var n=r||{},i=+!n.skipHeader,a=e||{},s=0,o=0;if(a&&n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var l=typeof n.origin=="string"?$i(n.origin):n.origin;s=l.r,o=l.c}var c,d={s:{c:0,r:0},e:{c:o,r:s+t.length-1+i}};if(a["!ref"]){var f=Rn(a["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),s==-1&&(s=f.e.r+1,d.e.r=s+t.length-1+i)}else s==-1&&(s=0,d.e.r=t.length-1+i);var p=n.header||[],m=0;t.forEach(function(v,b){aa(v).forEach(function(w){(m=p.indexOf(w))==-1&&(p[m=p.length]=w);var _=v[w],C="z",N="",R=jr({c:o+m,r:s+b+i});c=lE(a,R),_&&typeof _=="object"&&!(_ instanceof Date)?a[R]=_:(typeof _=="number"?C="n":typeof _=="boolean"?C="b":typeof _=="string"?C="s":_ instanceof Date?(C="d",n.cellDates||(C="n",_=Wa(_)),N=n.dateNF||Rr[14]):_===null&&n.nullError&&(C="e",_=0),c?(c.t=C,c.v=_,delete c.w,delete c.R,N&&(c.z=N)):a[R]=c={t:C,v:_},N&&(c.z=N))})}),d.e.c=Math.max(d.e.c,o+p.length-1);var x=ga(s);if(i)for(m=0;m<p.length;++m)a[Ui(m+o)+x]={t:"s",v:p[m]};return a["!ref"]=Zr(d),a}function A_t(e,t){return Nve(null,e,t)}function lE(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=$i(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?lE(e,jr(t)):lE(e,jr({r:t,c:r||0}))}function T_t(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function Z$(){return{SheetNames:[],Sheets:{}}}function ez(e,t,r,n){var i=1;if(!r)for(;i<=65535&&e.SheetNames.indexOf(r="Sheet"+i)!=-1;++i,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);i=a&&+a[2]||0;var s=a&&a[1]||r;for(++i;i<=65535&&e.SheetNames.indexOf(r=s+i)!=-1;++i);}if(uve(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function I_t(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=T_t(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function O_t(e,t){return e.z=t,e}function Ave(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function P_t(e,t,r){return Ave(e,"#"+t,r)}function R_t(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function j_t(e,t,r,n){for(var i=typeof t!="string"?t:Rn(t),a=typeof t=="string"?t:Zr(t),s=i.s.r;s<=i.e.r;++s)for(var o=i.s.c;o<=i.e.c;++o){var l=lE(e,s,o);l.t="n",l.F=a,delete l.v,s==i.s.r&&o==i.s.c&&(l.f=r,n&&(l.D=!0))}return e}var jv={encode_col:Ui,encode_row:ga,encode_cell:jr,encode_range:Zr,decode_col:T$,decode_row:A$,split_cell:Wxt,decode_cell:$i,decode_range:Al,format_cell:Kh,sheet_add_aoa:t1e,sheet_add_json:Nve,sheet_add_dom:vve,aoa_to_sheet:Ab,json_to_sheet:A_t,table_to_sheet:yve,table_to_book:Ukt,sheet_to_csv:J$,sheet_to_txt:_ve,sheet_to_json:gO,sheet_to_html:xve,sheet_to_formulae:N_t,sheet_to_row_object_array:gO,sheet_get_cell:lE,book_new:Z$,book_append_sheet:ez,book_set_sheet_visibility:I_t,cell_set_number_format:O_t,cell_set_hyperlink:Ave,cell_set_internal_link:P_t,cell_add_comment:R_t,sheet_set_array_formula:j_t,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const D_t=({onDataLoaded:e})=>{const[t,r]=I.useState(!1),[n,i]=I.useState(null),[a,s]=I.useState(null),o=x=>{const v=new FileReader;v.onload=b=>{var w;try{const _=(w=b.target)==null?void 0:w.result,C=mO(_,{type:"binary"}),N=C.SheetNames[0],R=C.Sheets[N],P=jv.sheet_to_json(R,{header:1});if(P.length===0){Re.error("File appears to be empty.");return}i(P),s(x.name)}catch(_){console.error(_),Re.error("Failed to parse file. Make sure it is a valid Excel or CSV.")}},v.readAsBinaryString(x)},l=I.useCallback(x=>{x.preventDefault(),x.stopPropagation(),x.type==="dragenter"||x.type==="dragover"?r(!0):x.type==="dragleave"&&r(!1)},[]),c=I.useCallback(x=>{x.preventDefault(),x.stopPropagation(),r(!1),x.dataTransfer.files&&x.dataTransfer.files[0]&&o(x.dataTransfer.files[0])},[]),d=x=>{x.preventDefault(),x.target.files&&x.target.files[0]&&o(x.target.files[0])},f=()=>{!n||n.length===0||i(x=>x?x.slice(1):[])},p=()=>{n&&a&&e(n,a)},m=()=>{i(null),s(null)};return n?u.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden flex flex-col h-[600px]",children:[u.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gray-50 flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-green-100 text-green-700 rounded-lg",children:u.jsx(uoe,{size:20})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-gray-900",children:a}),u.jsxs("p",{className:"text-xs text-gray-500",children:[n.length," rows detected"]})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded-md transition-colors",title:"Delete the header row",children:[u.jsx(Bs,{size:16})," Remove Top Row"]}),u.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"}),u.jsx("button",{onClick:m,className:"text-gray-500 hover:text-gray-700 px-3 py-1.5 text-sm",children:"Cancel"}),u.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-4 py-1.5 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 shadow-sm font-medium",children:["Next: Map Columns ",u.jsx(h8e,{size:16})]})]})]}),u.jsx("div",{className:"flex-1 overflow-auto bg-gray-50 p-4",children:u.jsxs("div",{className:"bg-white shadow-sm border border-gray-300",children:[u.jsxs("table",{className:"w-full text-left border-collapse text-sm",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-2 bg-gray-100 border-b border-gray-300 w-12 text-center text-xs text-gray-500 font-mono",children:"#"}),n[0].map((x,v)=>u.jsxs("th",{className:"p-2 bg-gray-100 border-b border-r border-gray-300 font-mono text-xs text-gray-500 font-normal min-w-[100px]",children:["Column ",String.fromCharCode(65+v)]},v))]})}),u.jsx("tbody",{children:n.slice(0,20).map((x,v)=>u.jsxs("tr",{className:"hover:bg-indigo-50 transition-colors",children:[u.jsx("td",{className:"p-2 border-b border-gray-200 bg-gray-50 text-center text-xs text-gray-400 select-none",children:v+1}),x.map((b,w)=>u.jsx("td",{className:"p-2 border-b border-r border-gray-200 text-gray-700 whitespace-nowrap overflow-hidden text-ellipsis max-w-[200px]",children:b!=null?String(b):u.jsx("span",{className:"text-gray-300 italic",children:"null"})},w))]},v))})]}),n.length>20&&u.jsxs("div",{className:"p-2 text-center text-xs text-gray-500 bg-gray-50 border-t border-gray-200 italic",children:["... ",n.length-20," more rows hidden ..."]})]})})]}):u.jsxs("div",{className:`relative border-2 border-dashed rounded-xl p-12 text-center transition-colors ${t?"border-indigo-500 bg-indigo-50":"border-gray-300 bg-gray-50"}`,onDragEnter:l,onDragLeave:l,onDragOver:l,onDrop:c,children:[u.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:d,accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"}),u.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 pointer-events-none",children:[u.jsx("div",{className:"p-4 bg-white rounded-full shadow-sm",children:u.jsx(db,{className:"w-8 h-8 text-indigo-500"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Click to upload or drag and drop"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Excel (.xlsx) or CSV files"})]})]})]})},Gee=[{key:"manufacturer",label:"Manufacturer",required:!1},{key:"productName",label:"Product Name (Line)",required:!0},{key:"variantName",label:"Variant Name (Color)",required:!1},{key:"sku",label:"SKU",required:!1},{key:"size",label:"Size",required:!1},{key:"cartonSize",label:"Carton Size",required:!1},{key:"unitCost",label:"Unit Cost",required:!0},{key:"retailPrice",label:"Retail Price",required:!1}],M_t=e=>typeof e!="string"?e:e.replace(/[\u0000-\u001F\u007F-\u009F]/g,"").trim(),F_t=({rawData:e,fileName:t,onBack:r,onComplete:n,isGeneratingPreview:i,onDefaultsChange:a})=>{var V;const{vendors:s}=Kr(),[o,l]=I.useState({}),[c,d]=I.useState("variant_match"),[f,p]=I.useState([]),[m,x]=I.useState(""),[v,b]=I.useState(""),[w,_]=I.useState(!1),[C,N]=I.useState(""),[R,P]=I.useState(""),O=e.reduce((te,se)=>Math.max(te,se.length),0),D=Array.from({length:O},(te,se)=>se),M=e.find(te=>te.length>0)||[];I.useEffect(()=>{cr.get("/api/import/profiles").then(te=>p(te.data)).catch(te=>console.error("Failed to load profiles",te))},[]);const B=(te,se)=>{l(Q=>({...Q,[te]:se}))},U=te=>{const se=te.target.value;N(se);const Q=s.find(X=>X.id===Number(se));Q!=null&&Q.defaultProductType&&P(Q.defaultProductType)},H=te=>{const se=te.target.value;if(x(se),se){const Q=f.find(X=>X.id===Number(se));if(Q){const X=Q.mappingRules;l(X.mapping||X),X.defaults&&(N(X.defaults.manufacturerId||""),P(X.defaults.productType||""))}}else l({}),N(""),P("")},Z=async(te=!1)=>{var Q;const se=te?(Q=f.find(X=>X.id===Number(m)))==null?void 0:Q.profileName:v;if(!se)return Re.error("Enter a profile name first.");try{const X=await cr.post("/api/import/profiles",{profileName:se,mappingRules:{mapping:o,defaults:{manufacturerId:C,productType:R}}});Re.success(te?"Profile updated!":"Profile saved!"),p(fe=>[...fe.filter(Y=>Y.id!==X.data.id),X.data].sort((Y,ce)=>Y.profileName.localeCompare(ce.profileName))),te||(x(String(X.data.id)),_(!1))}catch(X){console.error(X),Re.error("Failed to save profile.")}},ee=()=>{const te=Gee.filter(X=>X.required&&!o[X.key]);if(te.length>0){Re.error(`Missing required fields: ${te.map(X=>X.label).join(", ")}`);return}const se={manufacturerId:C?Number(C):null,productType:R||null};a(se);const Q=e.map((X,fe)=>{const Se={originalRowIndex:fe};return Object.entries(o).forEach(([Y,ce])=>{if(ce!==""){const W=parseInt(ce);if(W>=X.length)return;let G=X[W];if(typeof G=="string"&&(G=M_t(G),G===""&&(G=null)),["unitCost","retailPrice","cartonSize"].includes(Y)&&G!==null){typeof G=="string"&&(G=G.replace(/[^0-9.-]+/g,""));const ie=parseFloat(G);G=isNaN(ie)?null:ie}Se[Y]=G}}),Se}).filter(X=>X.productName);n(Q,c)};return u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[u.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gray-50 flex flex-wrap justify-between items-center gap-4",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Map Columns"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Match your Excel columns to Joblogger fields."})]}),u.jsxs("div",{className:"flex items-center gap-2 bg-white p-2 rounded-lg border border-gray-200 shadow-sm",children:[u.jsx("span",{className:"text-sm font-medium text-gray-700 pl-2",children:"Load Profile:"}),u.jsxs("select",{className:"border-none text-sm focus:ring-0 text-indigo-600 font-bold bg-transparent",value:m,onChange:H,children:[u.jsx("option",{value:"",children:"-- None --"}),f.map(te=>u.jsx("option",{value:te.id,children:te.profileName},te.id))]})]})]}),u.jsxs("div",{className:"p-8 grid grid-cols-1 lg:grid-cols-2 gap-12",children:[u.jsxs("div",{className:"space-y-6",children:[Gee.map(te=>u.jsxs("div",{className:"flex items-center justify-between group",children:[u.jsxs("label",{className:`text-sm ${te.required?"font-bold text-gray-900":"text-gray-500"}`,children:[te.label," ",te.required&&u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{className:`w-64 text-sm rounded-md shadow-sm border ${o[te.key]?"border-indigo-300 bg-indigo-50 text-indigo-900":"border-gray-300"}`,value:o[te.key]||"",onChange:se=>B(te.key,se.target.value),children:[u.jsx("option",{value:"",children:"(Skip)"}),D.map(se=>u.jsxs("option",{value:String(se),children:["Col ",String.fromCharCode(65+se),M[se]?`: ${String(M[se]).substring(0,20)}`:""]},se))]})]},te.key)),u.jsxs("div",{className:"pt-6 border-t border-gray-100 mt-6",children:[u.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Import Strategy"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("label",{className:`border p-4 rounded-lg cursor-pointer transition-all ${c==="variant_match"?"border-indigo-500 bg-indigo-50 ring-1 ring-indigo-500":"border-gray-200 hover:border-gray-300"}`,children:[u.jsx("input",{type:"radio",name:"strategy",className:"hidden",checked:c==="variant_match",onChange:()=>d("variant_match")}),u.jsx("div",{className:"font-bold text-sm text-gray-900 mb-1",children:"Variant Match"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Update specific colors/sizes. Best for detailed price lists."})]}),u.jsxs("label",{className:`border p-4 rounded-lg cursor-pointer transition-all ${c==="product_line_match"?"border-indigo-500 bg-indigo-50 ring-1 ring-indigo-500":"border-gray-200 hover:border-gray-300"}`,children:[u.jsx("input",{type:"radio",name:"strategy",className:"hidden",checked:c==="product_line_match",onChange:()=>d("product_line_match")}),u.jsx("div",{className:"font-bold text-sm text-gray-900 mb-1",children:"Line Match"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Update ALL variants of a product to this price. Best for generic price lists."})]})]})]})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-indigo-50 rounded-xl p-6 border border-indigo-100",children:[u.jsx("h3",{className:"font-bold text-indigo-900 mb-2",children:"Global Defaults"}),u.jsxs("p",{className:"text-xs text-indigo-700 mb-4",children:["If the CSV is missing this data, use these values for ",u.jsx("strong",{children:"New Products"}),"."]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-indigo-800 uppercase mb-1",children:"Manufacturer"}),u.jsxs("select",{className:"w-full text-sm rounded border-indigo-200",value:C,onChange:U,children:[u.jsx("option",{value:"",children:"-- None (Use CSV) --"}),s.sort((te,se)=>te.name.localeCompare(se.name)).map(te=>u.jsx("option",{value:te.id,children:te.name},te.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-indigo-800 uppercase mb-1",children:"Product Type"}),u.jsxs("select",{className:"w-full text-sm rounded border-indigo-200",value:R,onChange:te=>P(te.target.value),children:[u.jsx("option",{value:"",children:"-- None --"}),dy.map(te=>u.jsx("option",{value:te,children:te},te))]})]})]})]}),u.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200 h-fit",children:[u.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Save this Mapping"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"If you receive this file format regularly, save it as a profile to auto-fill these fields next time."}),m&&!w&&u.jsxs("button",{onClick:()=>Z(!0),className:"w-full mb-3 text-sm font-bold text-indigo-700 bg-indigo-100 hover:bg-indigo-200 py-2 rounded flex items-center justify-center gap-2 transition-colors",children:[u.jsx(tC,{size:16}),' Update "',(V=f.find(te=>te.id===Number(m)))==null?void 0:V.profileName,'"']}),w?u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",placeholder:"Profile Name",className:"flex-1 text-sm rounded border-gray-300",value:v,onChange:te=>b(te.target.value)}),u.jsx("button",{onClick:()=>Z(!1),className:"bg-indigo-600 text-white px-3 rounded text-xs font-bold",children:"Save"}),u.jsx("button",{onClick:()=>_(!1),className:"text-gray-500 px-2",children:u.jsx(Gr,{size:16})})]}):u.jsxs("button",{onClick:()=>_(!0),className:"text-sm font-medium text-indigo-600 hover:text-indigo-800 flex items-center gap-2",children:[u.jsx(vs,{size:16})," Save as New Profile"]}),u.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[u.jsx("h4",{className:"font-bold text-xs text-gray-400 uppercase tracking-wide mb-2",children:"Sample Data (First Data Row)"}),u.jsx("div",{className:"space-y-2 text-xs font-mono text-gray-600",children:D.slice(0,8).map(te=>u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("span",{className:"font-bold text-gray-400 w-8",children:["Col ",String.fromCharCode(65+te)]}),u.jsx("span",{className:"truncate",children:M[te]||u.jsx("i",{className:"text-gray-300",children:"(empty)"})})]},te))})]})]})]})]}),u.jsxs("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex justify-between",children:[u.jsxs("button",{onClick:r,className:"text-gray-600 hover:text-gray-900 font-medium flex items-center gap-2",children:[u.jsx(rf,{size:16})," Back"]}),u.jsx("button",{onClick:ee,disabled:i,className:"bg-indigo-600 text-white px-6 py-2 rounded-lg shadow-sm hover:bg-indigo-700 font-bold flex items-center gap-2 disabled:bg-indigo-400 disabled:cursor-not-allowed",children:i?u.jsx(u.Fragment,{children:"Processing..."}):u.jsxs(u.Fragment,{children:["Preview Updates ",u.jsx(Y0,{size:16})]})})]})]})},Uw=e=>!e&&e!==0?"-":`$${Number(e).toFixed(2)}`,L_t=({results:e,onExecute:t,isExecuting:r,onBack:n})=>{const[i,a]=I.useState([]);I.useEffect(()=>{a(e.map(x=>({...x,isSkipped:x.status==="error",hasSample:!1})))},[e]);const s=x=>{a(v=>{const b=[...v];return b[x].isSkipped=!b[x].isSkipped,b})},o=x=>{a(v=>{const b=[...v];return b[x].hasSample=!b[x].hasSample,b})},l=(x,v)=>{a(b=>{const w=[...b];return w[x].productName=v,w})},c=x=>{a(v=>{let b=[...v];if(x==="all")b=b.map(w=>({...w,hasSample:!0}));else if(x==="none")b=b.map(w=>({...w,hasSample:!1}));else if(x==="line_board"){const w=new Set(b.map(R=>R.productName)),_=new Set(b.filter(R=>R.isMaster).map(R=>R.productName));b=[...[...w].filter(R=>!_.has(R)).map(R=>({productName:R,variantName:"Master Sample",sku:"",unitCost:0,retailPrice:0,status:"new",isSkipped:!1,hasSample:!0,isMaster:!0,message:"Generated Line Board",details:{matchType:"generated"}})),...b]}return b})},d=i.filter(x=>!x.isSkipped),f={updates:d.filter(x=>x.status==="update").length,new:d.filter(x=>x.status==="new").length,samples:d.filter(x=>x.hasSample).length,errors:i.filter(x=>x.status==="error").length},p=I.useRef(null),m=Wce({count:i.length,getScrollElement:()=>p.current,estimateSize:()=>60,overscan:10});return u.jsxs("div",{className:"bg-surface-container-high rounded-xl shadow-sm border border-outline/20 overflow-hidden flex flex-col h-[600px]",children:[u.jsxs("div",{className:"p-6 border-b border-outline/10 bg-surface-container-low flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Review Changes"}),u.jsx("p",{className:"text-sm text-text-secondary",children:"Review prices and select which items to add to inventory."})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-success-container text-success rounded-full text-xs font-bold uppercase",children:[u.jsx(gh,{size:14})," ",f.updates," Updates"]}),u.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-primary-container text-primary rounded-full text-xs font-bold uppercase",children:[u.jsx(lu,{size:14})," ",f.new," New"]}),u.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-tertiary-container text-tertiary rounded-full text-xs font-bold uppercase",children:[u.jsx(hoe,{size:14})," ",f.samples," Samples"]})]})]}),u.jsx("div",{ref:p,className:"flex-1 overflow-auto bg-surface-container relative",children:u.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[u.jsx("thead",{className:"bg-surface-container-low text-text-secondary uppercase text-xs sticky top-0 z-10 border-b border-outline/10 shadow-sm",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-3 font-bold w-24",children:"Action"}),u.jsx("th",{className:"p-3 font-bold",children:"Product Match (Editable)"}),u.jsx("th",{className:"p-3 font-bold",children:"SKU / Details"}),u.jsx("th",{className:"p-3 font-bold w-48 bg-surface-container-highest/50",children:u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("span",{children:"Physical Sample"}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:()=>c("all"),className:"px-1.5 py-0.5 text-[10px] bg-outline/10 hover:bg-outline/20 rounded text-text-primary",children:"All"}),u.jsx("button",{onClick:()=>c("none"),className:"px-1.5 py-0.5 text-[10px] bg-outline/10 hover:bg-outline/20 rounded text-text-primary",children:"None"}),u.jsxs("button",{onClick:()=>c("line_board"),className:"px-1.5 py-0.5 text-[10px] bg-tertiary-container text-tertiary hover:brightness-110 rounded flex items-center gap-1",children:[u.jsx(lu,{size:10})," Line Bd"]})]})]})}),u.jsx("th",{className:"p-3 font-bold text-right",children:"Old Cost"}),u.jsx("th",{className:"p-3 font-bold text-right",children:"New Cost"}),u.jsx("th",{className:"p-3 font-bold text-right",children:"Diff"})]})}),u.jsxs("tbody",{className:"divide-y divide-outline/10",children:[m.getVirtualItems().length>0&&u.jsx("tr",{children:u.jsx("td",{style:{height:`${m.getVirtualItems()[0].start}px`},colSpan:7})}),m.getVirtualItems().map(x=>{var w;const v=i[x.index],b=x.index;return u.jsx(Hr.Fragment,{children:u.jsxs("tr",{"data-index":x.index,ref:m.measureElement,className:`hover:bg-surface-container-highest transition-colors ${v.isSkipped?"opacity-50 grayscale":""} ${v.isMaster?"bg-tertiary-container/10":""}`,children:[u.jsx("td",{className:"p-3",children:u.jsx("button",{onClick:()=>s(b),className:`text-xs font-bold px-2 py-1 rounded-lg border transition-all w-full text-center
                                                ${v.isSkipped?"bg-surface-container-highest text-text-secondary border-outline/20":v.status==="update"?"bg-success-container text-success border-success/30":v.status==="new"?"bg-primary-container text-primary border-primary/30":"bg-error-container text-error border-error/30 cursor-default"}`,disabled:v.status==="error",children:v.isSkipped?"SKIP":v.status.toUpperCase()})}),u.jsxs("td",{className:"p-3",children:[u.jsx("input",{type:"text",className:"font-medium text-text-primary bg-transparent border-b border-transparent hover:border-outline focus:border-primary focus:outline-none w-full transition-colors",value:v.productName,onChange:_=>l(b,_.target.value),disabled:v.isSkipped}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[v.isMaster&&u.jsx("span",{className:"text-[10px] font-bold bg-tertiary text-on-tertiary px-1.5 py-0.5 rounded",children:"MASTER"}),v.variantName&&u.jsx("div",{className:"text-xs text-text-secondary",children:v.variantName})]}),v.status==="error"&&u.jsx("div",{className:"text-xs text-error font-bold mt-1",children:v.message})]}),u.jsx("td",{className:"p-3 text-text-secondary font-mono text-xs",children:v.sku||"-"}),u.jsx("td",{className:"p-3 bg-surface-container-highest/20 text-center",children:u.jsx("button",{onClick:()=>o(b),disabled:v.isSkipped,className:`p-1 rounded transition-colors ${v.hasSample?"text-primary":"text-outline/40 hover:text-outline"}`,children:v.hasSample?u.jsx(D7,{size:20}):u.jsx(voe,{size:20})})}),v.affectedVariants&&v.affectedVariants.length===1?u.jsxs(u.Fragment,{children:[u.jsx("td",{className:"p-3 text-right text-text-secondary",children:Uw(v.affectedVariants[0].oldCost)}),u.jsx("td",{className:"p-3 text-right font-bold text-text-primary",children:Uw(v.unitCost)}),u.jsx("td",{className:"p-3 text-right",children:(()=>{const _=Number(v.unitCost)-Number(v.affectedVariants[0].oldCost);return _>0?u.jsxs("span",{className:"text-error text-xs",children:["+",Uw(_)]}):_<0?u.jsx("span",{className:"text-success text-xs",children:Uw(_)}):u.jsx("span",{className:"text-text-secondary",children:"-"})})()})]}):v.status==="new"?u.jsxs(u.Fragment,{children:[u.jsx("td",{className:"p-3 text-right text-text-secondary",children:"-"}),u.jsx("td",{className:"p-3 text-right font-bold text-primary",children:Uw(v.unitCost)}),u.jsx("td",{className:"p-3 text-right text-primary text-xs",children:"NEW"})]}):u.jsx("td",{colSpan:3,className:"p-3 text-center text-xs text-text-secondary italic",children:((w=v.affectedVariants)==null?void 0:w.length)>1?`Updating ${v.affectedVariants.length} variants`:"-"})]})},x.key)}),m.getVirtualItems().length>0&&u.jsx("tr",{children:u.jsx("td",{style:{height:`${m.getTotalSize()-m.getVirtualItems()[m.getVirtualItems().length-1].end}px`},colSpan:7})})]})]})}),u.jsxs("div",{className:"p-6 border-t border-outline/10 bg-surface-container-low flex justify-between items-center",children:[u.jsx("button",{onClick:n,className:"text-text-secondary hover:text-text-primary font-bold text-sm",disabled:r,children:"Back to Mapping"}),u.jsx("button",{onClick:()=>t(d),disabled:r||f.updates===0&&f.new===0,className:`flex items-center gap-2 px-6 py-3 rounded-full shadow-md font-bold text-on-primary transition-all ${r?"bg-surface-container-highest text-text-secondary cursor-not-allowed":"bg-primary hover:bg-primary-hover active:scale-95"}`,children:r?"Importing...":u.jsxs(u.Fragment,{children:["Import ",u.jsx("span",{className:"bg-white/20 px-1.5 rounded text-sm",children:f.updates+f.new})," Items"]})})]})]})},B_t=({onFileSelect:e})=>{const t=I.useRef(null),r=s=>{s.preventDefault(),s.stopPropagation()},n=s=>{s.preventDefault(),s.stopPropagation(),s.dataTransfer.files&&s.dataTransfer.files[0]&&a(s.dataTransfer.files[0])},i=s=>{s.target.files&&s.target.files[0]&&a(s.target.files[0])},a=s=>{["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(s.type)||s.name.endsWith(".xlsx")||s.name.endsWith(".xls")?e(s):Re.error("Please upload a valid Excel file (.xlsx, .xls)")};return u.jsxs("div",{className:"flex flex-col items-center justify-center w-full max-w-2xl mx-auto mt-8",children:[u.jsxs("div",{className:"w-full p-10 bg-surface-container-high border-2 border-dashed border-outline/20 rounded-2xl hover:border-primary hover:bg-surface-container-highest transition-all cursor-pointer shadow-sm group",onDragOver:r,onDrop:n,onClick:()=>{var s;return(s=t.current)==null?void 0:s.click()},children:[u.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[u.jsx("div",{className:"p-4 bg-primary-container rounded-full group-hover:brightness-110 transition-colors",children:u.jsx(db,{className:"w-8 h-8 text-primary"})}),u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-xl font-bold text-text-primary",children:"Drop your messy Excel file here"}),u.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"or click to browse (.xlsx, .xls)"})]})]}),u.jsx("input",{ref:t,type:"file",className:"hidden",accept:".xlsx,.xls",onChange:i})]}),u.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4 w-full text-center",children:[u.jsxs("div",{className:"bg-surface-container-high p-4 rounded-xl border border-outline/10",children:[u.jsx("div",{className:"font-bold text-text-primary mb-1",children:"1. Upload"}),u.jsx("p",{className:"text-xs text-text-secondary",children:"Import the raw vendor file"})]}),u.jsxs("div",{className:"bg-surface-container-high p-4 rounded-xl border border-outline/10",children:[u.jsx("div",{className:"font-bold text-text-primary mb-1",children:"2. Scan"}),u.jsx("p",{className:"text-xs text-text-secondary",children:"Auto-detect sizes from descriptions"})]}),u.jsxs("div",{className:"bg-surface-container-high p-4 rounded-xl border border-outline/10",children:[u.jsx("div",{className:"font-bold text-text-primary mb-1",children:"3. Clean"}),u.jsx("p",{className:"text-xs text-text-secondary",children:"Review, standardize, and import"})]})]})]})},U_t=({data:e,onConfirm:t,onBack:r})=>{const[n,i]=Hr.useState(null),a=e.rows.slice(0,5);return u.jsxs("div",{className:"w-full max-w-5xl mx-auto bg-surface-container-high rounded-xl shadow-sm border border-outline/20 overflow-hidden flex flex-col h-[600px]",children:[u.jsxs("div",{className:"p-6 border-b border-outline/10 bg-surface-container-low flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Select Description Column"}),u.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Which column contains the product name and size info?"})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-bold text-text-secondary hover:text-text-primary transition-colors",children:"Back"}),u.jsxs("button",{disabled:!n,onClick:()=>n&&t(n),className:`flex items-center gap-2 px-6 py-2 rounded-full text-sm font-bold transition-all ${n?"bg-primary text-on-primary hover:bg-primary-hover shadow-sm":"bg-surface-container-highest text-text-secondary cursor-not-allowed"}`,children:["Start Extraction ",u.jsx(Y0,{className:"w-4 h-4"})]})]})]}),u.jsx("div",{className:"overflow-auto flex-1 p-6",children:u.jsxs("table",{className:"min-w-full text-sm text-left border-collapse",children:[u.jsx("thead",{className:"text-xs uppercase bg-surface-container sticky top-0 z-10",children:u.jsx("tr",{children:e.headers.map(s=>u.jsx("th",{scope:"col",className:`px-6 py-4 cursor-pointer hover:bg-surface-container-highest border-b-2 transition-colors ${n===s?"bg-primary-container border-primary text-primary":"border-outline/10 text-text-secondary"}`,onClick:()=>i(s),children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"radio",checked:n===s,onChange:()=>i(s),className:"w-4 h-4 text-primary bg-surface-container border-outline focus:ring-primary accent-primary"}),u.jsx("span",{className:"font-bold tracking-wide",children:s})]})},s))})}),u.jsx("tbody",{className:"divide-y divide-outline/10",children:a.map((s,o)=>u.jsx("tr",{className:"bg-surface-container-high hover:bg-surface-container-highest transition-colors",children:e.headers.map(l=>{var c;return u.jsx("td",{className:`px-6 py-4 text-text-secondary ${n===l?"bg-primary-container/20 text-text-primary font-medium":""}`,children:u.jsx("div",{className:"truncate max-w-[200px]",children:((c=s[l])==null?void 0:c.toString())||""})},`${o}-${l}`)})},o))})]})})]})},$_t=({rows:e,knownSizes:t,setRows:r,setKnownSizes:n,onExport:i,onReset:a})=>{const[s,o]=I.useState("ALL"),[l,c]=I.useState(null),[d,f]=I.useState(null),[p,m]=I.useState(""),x=I.useRef(null),v=I.useMemo(()=>({total:e.length,matched:e.filter(O=>O.status==="MATCHED").length,unknown:e.filter(O=>O.status==="UNKNOWN").length,new:e.filter(O=>O.status==="NEW").length}),[e]),b=I.useMemo(()=>s==="ALL"?e:s==="MATCHED"?e.filter(O=>O.status==="MATCHED"):e.filter(O=>O.status==="UNKNOWN"||O.status==="NEW"),[e,s]);I.useEffect(()=>{const O=D=>{if(D.target.closest(".selection-tooltip"))return;const M=window.getSelection();(!M||M.isCollapsed)&&c(null)};return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[]);const w=(O,D)=>{const M=window.getSelection();if(!M||M.isCollapsed)return;const B=M.toString().trim();if(B.length>0){const U=M.getRangeAt(0).getBoundingClientRect();c({id:D,text:B,x:U.left+U.width/2,y:U.top-10})}},_=()=>{var O;l&&(r(D=>D.map(M=>{if(M.id!==l.id)return M;const B=t.some(U=>U.label.toLowerCase()===l.text.toLowerCase());return{...M,extractedSize:l.text,selectionSource:l.text,status:B?"MATCHED":"NEW",manualOverride:!0}})),c(null),(O=window.getSelection())==null||O.removeAllRanges())},C=(O,D)=>{r(M=>M.map(B=>{if(B.id!==O)return B;const U=D.toLowerCase().trim(),H=t.some(Z=>Z.label.toLowerCase()===U);return{...B,extractedSize:D,selectionSource:B.selectionSource,status:H?"MATCHED":"NEW",manualOverride:!0}}))},N=O=>{const D=O.extractedSize;if(!D)return;const M=D.trim(),B=M.toLowerCase(),U=t.findIndex(X=>X.label.toLowerCase()===B);let H=[...t];const Z=[];if(O.selectionSource&&O.selectionSource.toLowerCase()!==B&&Z.push(O.selectionSource),U>=0){const X=H[U],fe=Z.filter(Se=>{var Y;return!((Y=X.matchers)!=null&&Y.some(ce=>ce.toLowerCase()===Se.toLowerCase()))&&Se.toLowerCase()!==X.label.toLowerCase()});fe.length>0&&(H[U]={...X,matchers:[...X.matchers||[],...fe]})}else H.push({id:Date.now().toString(),label:M,matchers:Z});n(H);const ee=O.selectionSource||O.targetText;ee&&ee.toLowerCase()!==B&&F9e(ee,M).then(()=>Re.success(`Learned: "${ee}" = "${M}"`)).catch(X=>{console.error("Failed to save alias",X),Re.error("Failed to save rule. Check console.")});const V=[M,...Z],se=M.replace(/["']/g,"").split("x");let Q=null;se.length===2&&!isNaN(parseFloat(se[0]))&&(Q=new RegExp(`\\b${se[0].trim()}\\s*x\\s*${se[1].trim()}\\b`,"i")),r(X=>X.map(fe=>{var Se;if(fe.extractedSize===M)return{...fe,status:"MATCHED"};if(fe.status==="NEW"&&((Se=fe.extractedSize)==null?void 0:Se.toLowerCase())===B)return{...fe,extractedSize:M,status:"MATCHED"};if(fe.status==="UNKNOWN"||!fe.extractedSize){const Y=fe.targetText.toLowerCase();if(V.some(W=>Y.includes(W.toLowerCase())))return{...fe,extractedSize:M,status:"MATCHED"};if(Q&&Q.test(fe.targetText))return{...fe,extractedSize:M,status:"MATCHED"}}return fe}))},R=O=>{f(O.id),m(O.label)},P=(O,D)=>{if(d!==O)return;const M=p.trim();if(!M){f(null);return}if(M===D){f(null);return}n(B=>B.map(U=>U.id===O?{...U,label:M}:U)),r(B=>B.map(U=>U.extractedSize===D?{...U,extractedSize:M}:U)),f(null)};return u.jsxs("div",{className:"flex flex-col h-screen max-h-[85vh] bg-surface-container-high rounded-xl shadow-sm border border-outline/20 overflow-hidden relative",children:[l&&u.jsxs("div",{className:"fixed z-50 transform -translate-x-1/2 -translate-y-full mb-2 selection-tooltip",style:{left:l.x,top:l.y},children:[u.jsxs("button",{onClick:_,className:"bg-text-primary text-background text-xs font-bold py-1.5 px-3 rounded-lg shadow-lg flex items-center gap-1 hover:brightness-110 transition-colors",children:[u.jsx(B8e,{className:"w-3 h-3"}),"Set as Size"]}),u.jsx("div",{className:"w-2 h-2 bg-text-primary transform rotate-45 absolute bottom-[-4px] left-1/2 -translate-x-1/2"})]}),u.jsxs("div",{className:"p-4 border-b border-outline/10 bg-surface-container-low flex flex-wrap gap-4 justify-between items-center",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>o("ALL"),className:`px-3 py-1.5 text-sm font-bold rounded-full transition-colors border ${s==="ALL"?"bg-primary-container text-primary border-primary":"text-text-secondary border-transparent hover:bg-surface-container-highest"}`,children:["All (",v.total,")"]}),u.jsxs("button",{onClick:()=>o("MATCHED"),className:`px-3 py-1.5 text-sm font-bold rounded-full transition-colors border ${s==="MATCHED"?"bg-success-container text-success border-success":"text-text-secondary border-transparent hover:bg-surface-container-highest"}`,children:["Matched (",v.matched,")"]}),u.jsxs("button",{onClick:()=>o("UNKNOWN"),className:`px-3 py-1.5 text-sm font-bold rounded-full transition-colors border ${s==="UNKNOWN"?"bg-warning-container text-warning border-warning":"text-text-secondary border-transparent hover:bg-surface-container-highest"}`,children:["Review Needed (",v.unknown+v.new,")"]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 bg-primary text-on-primary text-sm font-bold rounded-full hover:bg-primary-hover shadow-sm transition-colors",children:["Use This Data ",u.jsx(Y0,{className:"w-4 h-4"})]}),u.jsx("button",{onClick:a,className:"flex items-center gap-2 px-3 py-2 border border-outline/20 text-text-secondary text-sm font-bold rounded-full hover:bg-surface-container-highest transition-colors",children:"Start Over"})]})]}),u.jsxs("div",{className:"flex flex-1 overflow-hidden",ref:x,children:[u.jsx("div",{className:"flex-1 overflow-auto bg-surface-container",children:u.jsxs("table",{className:"min-w-full divide-y divide-outline/10",children:[u.jsx("thead",{className:"bg-surface-container sticky top-0 z-10 shadow-sm",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-text-secondary uppercase tracking-wider",children:"Original Description"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-text-secondary uppercase tracking-wider w-48",children:"Extracted Size"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-text-secondary uppercase tracking-wider w-32",children:"Status"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-text-secondary uppercase tracking-wider w-32",children:"Actions"})]})}),u.jsxs("tbody",{className:"bg-surface-container-high divide-y divide-outline/10",children:[b.map(O=>u.jsxs("tr",{className:O.status==="UNKNOWN"?"bg-warning-container/10":"",children:[u.jsx("td",{className:"px-6 py-4 text-sm text-text-primary break-words max-w-md cursor-text",onMouseUp:D=>w(D,O.id),children:O.targetText}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("input",{type:"text",value:O.extractedSize||"",onChange:D=>C(O.id,D.target.value),onDragOver:D=>{D.preventDefault(),D.dataTransfer.dropEffect="copy"},onDrop:D=>{D.preventDefault();const M=D.dataTransfer.getData("application/size");M&&C(O.id,M)},className:`w-full px-3 py-1.5 text-sm border rounded-lg focus:ring-2 focus:ring-primary outline-none transition-colors ${O.status==="MATCHED"?"border-success bg-success-container/20 text-text-primary":O.status==="NEW"?"border-primary bg-primary-container/20 text-text-primary":"border-outline/20 bg-surface-container-highest text-text-primary"}`,placeholder:"?"})}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[O.status==="MATCHED"&&u.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-success-container text-success",children:[u.jsx(nf,{className:"w-3 h-3 mr-1"})," Match"]}),O.status==="NEW"&&u.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-primary-container text-primary",children:[u.jsx(eC,{className:"w-3 h-3 mr-1"})," New Size"]}),O.status==="UNKNOWN"&&u.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-warning-container text-warning",children:[u.jsx(Gr,{className:"w-3 h-3 mr-1"})," Missing"]})]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-text-secondary",children:(O.status==="NEW"||O.status==="MATCHED"&&O.manualOverride)&&u.jsx("button",{onClick:()=>N(O),className:"text-primary hover:text-primary-hover flex items-center text-xs font-bold uppercase tracking-wide",title:O.manualOverride?"Update Known Sizes with this rule":"Add to Known Sizes list",children:O.manualOverride?u.jsxs(u.Fragment,{children:[u.jsx(tC,{className:"w-3 h-3 mr-1"})," Change Rule"]}):u.jsxs(u.Fragment,{children:[u.jsx(Jl,{className:"w-3 h-3 mr-1"})," Add Rule"]})})})]},O.id)),b.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"px-6 py-12 text-center text-text-secondary",children:"No rows found for this filter."})})]})]})}),u.jsxs("div",{className:"w-64 bg-surface-container-high border-l border-outline/10 flex flex-col shadow-xl z-20",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 bg-surface-container-low",children:[u.jsxs("h3",{className:"font-bold text-text-primary flex items-center gap-2",children:[u.jsx(vs,{className:"w-4 h-4"})," Known Sizes"]}),u.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Drag size to row to apply."})]}),u.jsx("div",{className:"overflow-y-auto flex-1 p-2 space-y-1",children:t.map(O=>u.jsx("div",{draggable:!d,onDragStart:D=>{D.dataTransfer.setData("application/size",O.label),D.dataTransfer.effectAllowed="copy"},className:`group flex items-center justify-between px-3 py-2 text-sm text-text-primary bg-surface-container-highest rounded-lg hover:bg-surface-container transition-colors ${d?"":"cursor-grab active:cursor-grabbing"}`,children:d===O.id?u.jsx("input",{autoFocus:!0,value:p,onChange:D=>m(D.target.value),onBlur:()=>P(O.id,O.label),onKeyDown:D=>{D.key==="Enter"&&P(O.id,O.label),D.key==="Escape"&&f(null)},className:"w-full bg-surface-container border border-primary rounded px-1 py-0.5 outline-none text-sm text-text-primary"}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center flex-1 gap-2 overflow-hidden",children:[u.jsx(N8e,{className:"w-3 h-3 text-text-secondary flex-shrink-0"}),u.jsx("span",{className:"font-mono cursor-pointer hover:text-primary truncate",onClick:()=>R(O),title:"Click to edit",children:O.label})]}),u.jsx("button",{onClick:D=>{D.stopPropagation(),n(M=>M.filter(B=>B.id!==O.id))},className:"opacity-0 group-hover:opacity-100 text-text-secondary hover:text-error ml-2",children:u.jsx(Gr,{className:"w-3 h-3"})})]})},O.id))}),u.jsx("div",{className:"p-4 border-t border-outline/10 bg-surface-container-low",children:u.jsxs("form",{onSubmit:O=>{O.preventDefault();const M=O.target.elements.namedItem("newSize");M.value&&(N({extractedSize:M.value}),M.value="")},className:"flex gap-2",children:[u.jsx("input",{name:"newSize",className:"flex-1 px-3 py-1.5 text-sm bg-surface-container border border-outline/20 rounded-md text-text-primary focus:border-primary focus:ring-1 focus:ring-primary outline-none",placeholder:"Add size..."}),u.jsx("button",{type:"submit",className:"p-1.5 bg-primary text-on-primary rounded-md hover:bg-primary-hover",children:u.jsx(Jl,{className:"w-4 h-4"})})]})})]})]})]})},z_t=e=>new Promise((t,r)=>{const n=new FileReader;n.onload=i=>{var a;try{const s=(a=i.target)==null?void 0:a.result,o=mO(s,{type:"binary"}),l=o.SheetNames[0],c=o.Sheets[l],d=jv.sheet_to_json(c,{header:1});if(d.length===0){r(new Error("File is empty"));return}const f=d[0],p=jv.sheet_to_json(c);t({fileName:e.name,headers:f,rows:p})}catch(s){r(s)}},n.onerror=i=>r(i),n.readAsBinaryString(e)}),Tve=(e,t)=>e.map(r=>{const n={...r.originalData};return r.extractedSize&&(n[t]=r.extractedSize),n}),Ive=e=>{if(!e)return"";const t=e.trim(),r=/^(\d+(?:\.\d+)?)\s*(?:["']|mm|cm|in)?\s*[xX]\s*(\d+(?:\.\d+)?)\s*(?:["']|mm|cm|in)?$/i,n=t.match(r);return n?`${n[1]}"x${n[2]}"`:t},H_t=Object.freeze(Object.defineProperty({__proto__:null,getCleanedCsvData:Tve,normalizeSize:Ive,readExcelFile:z_t},Symbol.toStringTag,{value:"Module"})),W_t=({onClose:e,onComplete:t})=>{const[r,n]=I.useState("upload"),[i,a]=I.useState(null),[s,o]=I.useState(null),[l,c]=I.useState([]),[d,f]=I.useState([]);I.useEffect(()=>{(async()=>{try{const w=await Z7(),_=await M9e();if(Array.isArray(w)){const C=w.map(N=>{const R=_.filter(P=>P.mappedSize===N.value).map(P=>P.aliasText);return{id:N.value,label:N.value,matchers:R}});f(C)}}catch(w){console.error("Failed to load cleaner brain:",w)}})()},[]);const p=b=>{a(b),n("selectColumn")},m=b=>{if(!i)return;o(b);const w=i.rows.map((_,C)=>{var O,D;const N=((O=_[b])==null?void 0:O.toString())||"";let R=Ive(N);if(!R||R===N){for(const M of d)if((D=M.matchers)!=null&&D.some(B=>N.toLowerCase().includes(B.toLowerCase()))){R=M.label;break}}const P=d.some(M=>M.label.toLowerCase()===R.toLowerCase());return{id:C.toString(),originalData:_,targetText:N,extractedSize:R||null,status:P?"MATCHED":"UNKNOWN",manualOverride:!1}});c(w),n("analyze")},x=()=>{if(!s)return;const b=Tve(l,s);t(b),e()},v=()=>{confirm("Start over with a new file?")&&(n("upload"),a(null),o(null),c([]))};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 md:p-8",children:u.jsxs("div",{className:"w-full max-w-6xl h-full max-h-[90vh] bg-surface-container rounded-2xl shadow-2xl overflow-hidden flex flex-col animate-in fade-in zoom-in-95 duration-200",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-outline/10 bg-surface-container-high",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Spreadsheet Cleaner"}),u.jsxs("p",{className:"text-text-secondary text-sm",children:[r==="upload"&&"Step 1: Upload your messy vendor file.",r==="selectColumn"&&"Step 2: Identify the description column.",r==="analyze"&&"Step 3: Teach the system how to read sizes."]})]}),u.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-surface-container-highest text-text-secondary transition-colors",children:u.jsx(Gr,{size:24})})]}),u.jsxs("div",{className:"flex-1 overflow-auto bg-surface-container p-6",children:[r==="upload"&&u.jsx("div",{className:"h-full flex flex-col items-center justify-center",children:u.jsx(B_t,{onFileSelect:b=>{ZE(async()=>{const{readExcelFile:w}=await Promise.resolve().then(()=>H_t);return{readExcelFile:w}},void 0).then(({readExcelFile:w})=>{w(b).then(p).catch(_=>alert(_.message))})}})}),r==="selectColumn"&&i&&u.jsx(U_t,{data:i,onConfirm:m,onBack:()=>n("upload")}),r==="analyze"&&u.jsx($_t,{rows:l,knownSizes:d,setRows:c,setKnownSizes:f,onExport:x,onReset:v})]})]})})},V_t=()=>{var D;const[e,t]=I.useState(1),[r,n]=I.useState(!1),[i,a]=I.useState(null),[s,o]=I.useState(null),[l,c]=I.useState([]),[d,f]=I.useState(!1),[p,m]=I.useState("variant_match"),[x,v]=I.useState({}),b=(M,B)=>{a(M),o(B)},w=()=>{!i||i.length<2||(a(M=>M?M.slice(1):[]),Re.success("Top row removed."))},_=()=>{a(null),o(null)},C=()=>{!i||i.length===0||t(2)},N=M=>{if(!M||M.length===0)return;const B=Object.keys(M[0]),U=M.map(Z=>B.map(ee=>Z[ee])),H=[B,...U];b(H,"Cleaned_Inventory_Data.xlsx"),n(!1),Re.success("Cleaned data loaded! Please review below.")},R=()=>{const M=["Manufacturer","Collection","Color","Item Description","SKU","Cost"],B=[["Global Floors","Nebula Series","Stardust","Nebula Stardust Tile 12x24 Matte","NB-100",3.49],["Global Floors","Nebula Series","Cosmos","Nebula Cosmos Tile 12x24 Matte","NB-101",3.49],["Global Floors","Rustic Woods","Oak Natural","LVP Plank 7 inch x 48 inch Click","RW-200",2.99],["Global Floors","Rustic Woods","Oak Dark","LVP Plank 7 inch x 48 inch Click","RW-201",2.99],["Global Floors","Metro Subway","White Gloss","Ceramic Wall Tile 3 by 6","MT-300",.89]],U=jv.aoa_to_sheet([M,...B]),H=jv.book_new();jv.book_append_sheet(H,U,"Inventory"),C_t(H,"messy_vendor_file.xlsx")},P=async(M,B)=>{f(!0),m(B);try{const U=await cr.post("/api/import/preview",{mappedRows:M,strategy:B,defaults:x});c(U.data),t(3)}catch(U){console.error(U),Re.error("Failed to generate preview.")}finally{f(!1)}},O=async M=>{if(confirm("Are you sure you want to apply these changes to the database?")){f(!0);try{const B=await cr.post("/api/import/execute",{previewResults:M,strategy:p,defaults:x});Re.success(`Import complete! ${B.data.updates} updated, ${B.data.created} created.`),t(1),a(null),o(null)}catch(B){console.error(B),Re.error("Import failed. Check console for details.")}finally{f(!1)}}};return u.jsxs("div",{className:"space-y-8",children:[u.jsx("div",{className:"bg-surface-container-high p-8 rounded-xl shadow-sm border border-outline/10",children:u.jsxs("div",{children:[u.jsx("h1",{className:"text-4xl font-bold text-text-primary tracking-tight",children:"Import Inventory"}),u.jsx("p",{className:"text-text-secondary mt-1 font-medium",children:"Upload vendor price lists to update products in bulk."})]})}),u.jsxs("div",{className:"bg-surface-container-high rounded-xl shadow-sm border border-outline/10 overflow-hidden",children:[u.jsx("div",{className:"bg-surface-container-low border-b border-outline/10 p-8",children:u.jsxs("div",{className:"flex items-center justify-between max-w-3xl mx-auto",children:[u.jsxs("div",{className:`flex flex-col items-center transition-colors ${e>=1?"text-primary":"text-text-secondary"}`,children:[u.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold mb-2 transition-colors ${e>=1?"bg-primary-container text-primary":"bg-surface-container-highest text-text-tertiary border border-outline/10"}`,children:e>1?u.jsx(gh,{size:24}):"1"}),u.jsx("span",{className:"text-sm font-medium",children:"Upload & Clean"})]}),u.jsx("div",{className:`flex-1 h-0.5 mx-4 transition-colors ${e>1?"bg-primary":"bg-outline/20"}`}),u.jsxs("div",{className:`flex flex-col items-center transition-colors ${e>=2?"text-primary":"text-text-secondary"}`,children:[u.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold mb-2 transition-colors ${e>=2?"bg-primary-container text-primary":"bg-surface-container-highest text-text-tertiary border border-outline/10"}`,children:e>2?u.jsx(gh,{size:24}):"2"}),u.jsx("span",{className:"text-sm font-medium",children:"Map Columns"})]}),u.jsx("div",{className:`flex-1 h-0.5 mx-4 transition-colors ${e>2?"bg-primary":"bg-outline/20"}`}),u.jsxs("div",{className:`flex flex-col items-center transition-colors ${e>=3?"text-primary":"text-text-secondary"}`,children:[u.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold mb-2 transition-colors ${e>=3?"bg-primary-container text-primary":"bg-surface-container-highest text-text-tertiary border border-outline/10"}`,children:"3"}),u.jsx("span",{className:"text-sm font-medium",children:"Review & Import"})]})]})}),u.jsxs("div",{className:"p-8",children:[e===1&&!i&&u.jsxs("div",{className:"max-w-2xl mx-auto space-y-8",children:[u.jsx("div",{className:"bg-surface-container-low rounded-2xl border border-outline/10 p-1 shadow-sm",children:u.jsx(D_t,{onDataLoaded:b})}),u.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-center items-center text-center md:text-left",children:[u.jsxs("div",{onClick:()=>n(!0),className:"flex items-center gap-3 px-6 py-4 rounded-xl bg-surface-container hover:bg-surface-container-high border border-outline/10 cursor-pointer transition-colors group w-full md:w-auto",children:[u.jsx("div",{className:"p-2 bg-tertiary-container rounded-full text-tertiary group-hover:scale-110 transition-transform",children:u.jsx(xoe,{size:20})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-text-primary",children:"Launch Spreadsheet Cleaner"}),u.jsx("div",{className:"text-xs text-text-secondary",children:"Messy data? Extract sizes first."})]})]}),u.jsxs("button",{onClick:R,className:"flex items-center gap-2 px-4 py-2 text-sm text-text-secondary hover:text-primary transition-colors",children:[u.jsx(I4,{size:16})," Download Test File"]})]})]}),e===1&&i&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-surface-container rounded-xl p-4 border border-outline/10 flex flex-wrap gap-4 justify-between items-center shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-success-container rounded-lg text-success",children:u.jsx(uoe,{size:24})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-text-primary text-lg",children:s}),u.jsxs("p",{className:"text-sm text-text-secondary",children:[i.length," rows detected"]})]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:w,className:"px-4 py-2 text-sm font-bold text-error bg-error-container/20 hover:bg-error-container/40 rounded-lg transition-colors border border-error/20",children:"Remove Top Row"}),u.jsx("div",{className:"h-8 w-px bg-outline/20 mx-2"}),u.jsx("button",{onClick:_,className:"px-4 py-2 text-sm font-bold text-text-secondary hover:bg-surface-container-high rounded-lg transition-colors",children:"Cancel"}),u.jsxs("button",{onClick:C,className:"px-6 py-2 text-sm font-bold text-on-primary bg-primary hover:bg-primary-hover rounded-full shadow-md transition-all active:scale-95 flex items-center gap-2",children:["Next: Map Columns ",u.jsx(gh,{size:16})]})]})]}),u.jsxs("div",{className:"bg-surface-container rounded-xl border border-outline/10 overflow-hidden shadow-sm",children:[u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left text-sm",children:[u.jsx("thead",{className:"bg-surface-container-high border-b border-outline/10 text-text-secondary uppercase text-xs",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-3 w-12 text-center",children:"#"}),(D=i[0])==null?void 0:D.map((M,B)=>u.jsx("th",{className:"p-3 font-bold border-r border-outline/5 last:border-0 whitespace-nowrap",children:B<5?`Col ${String.fromCharCode(65+B)}`:`Col ${B}`},B))]})}),u.jsx("tbody",{className:"divide-y divide-outline/5",children:i.slice(0,5).map((M,B)=>u.jsxs("tr",{className:"hover:bg-surface-container-high/50 transition-colors",children:[u.jsx("td",{className:"p-3 text-center text-text-secondary text-xs font-mono border-r border-outline/5",children:B+1}),M.map((U,H)=>u.jsx("td",{className:"p-3 text-text-primary border-r border-outline/5 last:border-0 max-w-xs truncate",children:U},H))]},B))})]})}),u.jsxs("div",{className:"p-3 bg-surface-container-low border-t border-outline/10 text-center text-xs text-text-secondary",children:["Showing first 5 rows of ",i.length]})]})]}),e===2&&u.jsx(F_t,{rawData:i||[],fileName:s||"Unknown File",onBack:()=>t(1),onComplete:P,isGeneratingPreview:d,onDefaultsChange:v}),e===3&&u.jsx(L_t,{results:l,onExecute:O,isExecuting:d,onBack:()=>t(2)})]})]}),r&&u.jsx(W_t,{onClose:()=>n(!1),onComplete:N})]})},Kee=()=>{const{partnerId:e}=Ex(),t=gu(),{currentUser:r,refreshNotifications:n}=Kr(),[i,a]=I.useState([]),[s,o]=I.useState(null),[l,c]=I.useState([]),[d,f]=I.useState(""),[p,m]=I.useState("inbox"),[x,v]=I.useState(""),[b,w]=I.useState(!1),[_,C]=I.useState([]),N=I.useRef(null),R=ee=>ee?ee.replace(/@\[(\w+):[^|]+\|([^\]]+)\]/g,(V,te,se)=>te==="user"?`@${se}`:te==="project"?` ${se}`:te==="product"?` ${se}`:te==="customer"?` ${se}`:te==="installer"?` ${se}`:se):"No messages yet";I.useEffect(()=>{if(!e){o(null);return}/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test(e)?o(e):cr.post(`/api/messages/start/${e}`).then(V=>{t(`/messages/${V.data.conversationId}`,{replace:!0})}).catch(V=>{console.error("Failed to resolve conversation",V),t("/messages")})},[e,t]);const P=async()=>{try{const ee=await cr.get("/api/messages/conversations",{params:{archived:p==="archived"}});a(ee.data)}catch(ee){console.error("Failed to load conversations",ee)}},O=async()=>{if(s)try{const ee=await cr.get(`/api/messages/${s}`);c(ee.data),a(V=>V.map(te=>te.conversationId===s?{...te,unreadCount:0}:te)),n()}catch(ee){console.error("Failed to load messages",ee)}};I.useEffect(()=>{P(),s&&O();const ee=setInterval(()=>{P(),s&&O()},5e3);return()=>clearInterval(ee)},[s,p]),I.useEffect(()=>{N.current&&(N.current.scrollTop=N.current.scrollHeight)},[l]);const D=ee=>{if(ee==null||ee.preventDefault(),!d.trim()||!s)return;const V=/@\[user:([^|]+)\|([^\]]+)\]/g;let te;const se=new Set;for(;(te=V.exec(d))!==null;)se.add(te[1]);if(se.size===0){M();return}const Q=i.find(ce=>ce.conversationId===s);if(!Q){M();return}const X=new Set(Q.participants.map(ce=>ce.userId));r&&X.add(r.userId);const fe=[];let Se;const Y=/@\[user:([^|]+)\|([^\]]+)\]/g;for(;(Se=Y.exec(d))!==null;){const ce=Se[1],W=Se[2];X.has(ce)||fe.push(W)}fe.length>0?(C(fe),w(!0)):M()},M=async()=>{if(s)try{await cr.post(`/api/messages/${s}`,{content:d}),f(""),w(!1),C([]),O(),P()}catch(ee){console.error(ee)}},B=async()=>{if(!s)return;const ee=i.find(te=>te.conversationId===s);if(!ee)return;const V=!ee.isArchived;try{await cr.patch(`/api/messages/${s}/archive`,{isArchived:V}),a(te=>te.filter(se=>se.conversationId!==s)),V?(o(null),t("/messages")):P()}catch(te){console.error(te)}},U=ee=>{ee.key==="Enter"&&!ee.shiftKey&&(ee.preventDefault(),D())},H=i.find(ee=>ee.conversationId===s)||null,Z=i.filter(ee=>ee.title.toLowerCase().includes(x.toLowerCase()));return u.jsxs("div",{className:"flex bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:[u.jsxs("div",{className:`
                bg-surface-container-low border-r border-outline/10 flex-col 
                ${s?"hidden md:flex":"flex w-full"} 
                md:w-80
            `,children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("h2",{className:"text-lg font-bold text-text-primary flex items-center gap-2",children:[u.jsx(o8,{className:"w-5 h-5 text-primary"}),"Messages"]}),u.jsxs("div",{className:"flex bg-surface-container-high rounded-full p-1 border border-outline/10 shadow-sm",children:[u.jsx("button",{onClick:()=>m("inbox"),className:`p-1.5 rounded-full transition-colors ${p==="inbox"?"bg-primary-container text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,title:"Inbox",children:u.jsx(Yq,{size:16})}),u.jsx("button",{onClick:()=>m("archived"),className:`p-1.5 rounded-full transition-colors ${p==="archived"?"bg-primary-container text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,title:"Archived",children:u.jsx(hS,{size:16})})]})]}),u.jsxs("div",{className:"relative",children:[u.jsx(gc,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-secondary",size:16}),u.jsx("input",{type:"text",placeholder:"Search...",className:"w-full pl-10 pr-4 py-2 bg-surface-container-highest border-none rounded-full text-sm text-text-primary focus:ring-2 focus:ring-primary/50 outline-none transition-shadow shadow-sm",value:x,onChange:ee=>v(ee.target.value)})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:[Z.map(ee=>{var Q;const V=s===ee.conversationId,te=((Q=ee.participants[0])==null?void 0:Q.avatarUrl)||`https://www.gravatar.com/avatar/${xS(ee.title)}?s=40&d=mp`,se=ee.participants.length>1;return u.jsxs("div",{onClick:()=>t(`/messages/${ee.conversationId}`),className:`flex items-center gap-3 p-3 cursor-pointer rounded-xl transition-all ${V?"bg-primary-container text-on-primary-container":"hover:bg-surface-container-highest text-text-secondary"}`,children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:te,className:"w-10 h-10 rounded-full bg-surface-container-highest object-cover border border-outline/10"}),se&&u.jsx("div",{className:"absolute -bottom-1 -right-1 bg-surface-container rounded-full p-0.5 border border-outline/10 shadow-sm",children:u.jsx(rx,{size:12,className:"text-text-secondary"})})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("p",{className:`font-bold truncate text-sm ${V?"text-primary":"text-text-primary"}`,children:ee.title}),ee.unreadCount>0&&u.jsx("span",{className:"bg-error-container text-error text-[10px] px-1.5 py-0.5 rounded-full font-bold shadow-sm",children:ee.unreadCount})]}),u.jsx("p",{className:`text-xs truncate ${ee.unreadCount>0?"text-text-primary font-bold":"opacity-80"}`,children:R(ee.lastMessage)})]})]},ee.conversationId)}),x.length>1&&u.jsx(q_t,{query:x,navigate:t}),Z.length===0&&x.length<2&&u.jsx("div",{className:"text-center p-8 text-text-tertiary text-sm",children:p==="inbox"?"No active conversations.":"No archived conversations."})]})]}),u.jsxs("div",{className:`
                flex-col bg-surface relative 
                ${s?"flex w-full":"hidden md:flex"} 
                flex-1
            `,children:[u.jsx("div",{className:"absolute inset-0 opacity-[0.02] pointer-events-none bg-[radial-gradient(#000_1px,transparent_1px)] [background-size:16px_16px]"}),s?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex items-center justify-between bg-surface-container-high shadow-sm z-10",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:()=>t("/messages"),className:"md:hidden p-2 -ml-2 text-text-secondary hover:text-text-primary",children:u.jsx(rf,{size:20})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-text-primary text-lg leading-tight",children:(H==null?void 0:H.title)||"Loading..."}),(H==null?void 0:H.type)==="GROUP"&&u.jsxs("p",{className:"text-xs text-text-secondary",children:[H.participants.length+1," participants"]})]})]}),u.jsx("button",{onClick:B,className:"p-2 text-text-secondary hover:text-primary transition-colors rounded-full hover:bg-surface-container-highest",title:H!=null&&H.isArchived?"Unarchive":"Archive",children:H!=null&&H.isArchived?u.jsx(Yq,{size:20}):u.jsx(hS,{size:20})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 z-0",ref:N,children:l.map(ee=>{const V=ee.senderId===(r==null?void 0:r.userId);return u.jsxs("div",{className:`flex ${V?"justify-end":"justify-start"}`,children:[!V&&u.jsx("img",{src:ee.senderAvatar||`https://www.gravatar.com/avatar/${xS(ee.senderName)}?s=40&d=mp`,className:"w-8 h-8 rounded-full mr-2 self-end mb-1 border border-outline/10 shadow-sm",title:ee.senderName}),u.jsxs("div",{className:`max-w-[75%] px-4 py-3 rounded-2xl shadow-sm text-sm ${V?"bg-primary text-on-primary rounded-br-none":"bg-surface-container-highest text-text-primary rounded-bl-none"}`,children:[!V&&(H==null?void 0:H.type)==="GROUP"&&u.jsx("p",{className:"text-[10px] font-bold opacity-70 mb-1",children:ee.senderName}),u.jsx(o3,{content:ee.content}),u.jsx("p",{className:`text-[10px] mt-1 text-right ${V?"opacity-70":"text-text-secondary"}`,children:new Date(ee.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},ee.id)})}),u.jsx("form",{onSubmit:D,className:"p-4 bg-surface-container-high border-t border-outline/10 z-10",children:u.jsx(ST,{value:d,onChange:f,placeholder:"Type a message... Use @ to mention",onKeyDown:U,rightElement:u.jsx("button",{type:"submit",disabled:!d.trim(),className:"bg-primary text-on-primary p-2 rounded-full hover:bg-primary-hover transition-colors h-10 w-10 flex items-center justify-center shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:u.jsx(uy,{size:18})})})})]}):u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-text-tertiary opacity-40",children:[u.jsx(o8,{size:64,className:"mb-4 bg-surface-container-highest p-6 rounded-full"}),u.jsx("p",{className:"text-lg font-medium",children:"Select a conversation"})]})]}),b&&u.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-2xl max-w-md w-full border border-outline/10 animate-in fade-in zoom-in duration-200",children:u.jsxs("div",{className:"p-8",children:[u.jsxs("div",{className:"flex items-center gap-3 text-warning mb-4",children:[u.jsx("div",{className:"bg-warning-container p-2 rounded-full",children:u.jsx(ld,{size:24})}),u.jsx("h3",{className:"text-lg font-bold text-text-primary",children:"Add Users to Chat?"})]}),u.jsxs("p",{className:"text-text-secondary mb-4",children:["You mentioned ",u.jsx("strong",{children:_.join(", ")}),"."]}),u.jsxs("p",{className:"text-text-secondary mb-6 text-sm bg-surface-container-low p-4 rounded-xl border border-outline/5",children:[" ",u.jsx("strong",{children:"Note:"})," By sending this message, they will be added to this conversation and will be able to see the ",u.jsx("strong",{children:"entire chat history"}),"."]}),u.jsxs("div",{className:"flex gap-3 justify-end",children:[u.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 text-sm font-medium text-text-secondary hover:bg-surface-container-highest rounded-full transition-colors",children:"Cancel"}),u.jsx("button",{onClick:M,className:"px-6 py-2 text-sm font-bold bg-primary text-on-primary rounded-full hover:bg-primary-hover shadow-md transition-colors",children:"Confirm & Add"})]})]})})})]})},q_t=({query:e,navigate:t})=>{const[r,n]=I.useState([]);return I.useEffect(()=>{const a=setTimeout(async()=>{try{const s=await cr.get(`/api/messages/search-users?query=${e}`);n(s.data)}catch{}},300);return()=>clearTimeout(a)},[e]),r.length===0?null:u.jsxs("div",{className:"mt-2 border-t border-outline/10 pt-2 px-2",children:[u.jsx("p",{className:"px-4 text-xs font-bold text-text-tertiary mb-1 uppercase tracking-wider",children:"Start New Chat"}),r.map(i=>u.jsxs("div",{onClick:()=>{cr.post(`/api/messages/start/${i.userId}`).then(a=>{t(`/messages/${a.data.conversationId}`)})},className:"flex items-center gap-3 p-3 cursor-pointer hover:bg-surface-container-highest rounded-xl transition-colors",children:[u.jsx("img",{src:i.avatarUrl||`https://www.gravatar.com/avatar/${xS(i.email)}?s=40&d=mp`,className:"w-8 h-8 rounded-full bg-surface-container-highest"}),u.jsxs("div",{children:[u.jsxs("p",{className:"text-sm font-medium text-text-primary",children:[i.firstName," ",i.lastName]}),u.jsx("p",{className:"text-xs text-text-secondary",children:i.email})]})]},i.userId))]})};function G_t(){const[e,t]=I.useState(1),[r,n]=I.useState(!1),[i,a]=I.useState(null),[s,o]=I.useState(!0),[l,c]=I.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",companyName:"",publicUrl:window.location.origin});I.useEffect(()=>{fetch("/api/setup/status").then(v=>v.json()).then(v=>{v.isSupertokensSecure===!1&&o(!1)}).catch(console.error)},[]);const d=v=>{c(b=>({...b,[v.target.name]:v.target.value}))},f=()=>{if(e===1){if(!l.firstName||!l.lastName||!l.email||!l.password){a("All fields are required.");return}if(l.password!==l.confirmPassword){a("Passwords do not match.");return}if(l.password.length<8){a("Password must be at least 8 characters.");return}}a(null),t(2)},p=async()=>{if(!l.companyName||!l.publicUrl){a("Company Name and System URL are required.");return}n(!0),a(null);try{const v=await fetch("/api/setup/init",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),b=await v.json();if(!v.ok)throw new Error(b.error||"Setup failed");window.location.href="/auth"}catch(v){a(v.message),n(!1)}},m="w-full bg-neutral-800/50 border border-neutral-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-transparent placeholder-neutral-500",x="block text-sm font-medium text-neutral-400 mb-1.5";return u.jsx("div",{className:"min-h-screen bg-neutral-950 flex items-center justify-center p-4 font-sans text-neutral-200",children:u.jsxs("div",{className:"w-full max-w-lg",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-neutral-100 mb-2 tracking-tight",children:"Welcome to Subfloor"}),u.jsx("p",{className:"text-neutral-400",children:"Let's get your system ready for business."})]}),!s&&u.jsxs("div",{className:"mb-6 bg-warning-container/20 border border-warning/30 rounded-xl p-4 flex items-start gap-3",children:[u.jsx(ld,{className:"w-5 h-5 text-warning flex-shrink-0 mt-0.5"}),u.jsxs("div",{className:"text-sm text-neutral-200",children:[u.jsx("strong",{className:"block text-warning mb-1 font-bold",children:"Security Warning: No API Key Detected"}),"Your authentication service is running in insecure mode. Please add ",u.jsx("code",{className:"bg-black/30 px-1 rounded",children:"SUPERTOKENS_API_KEY"})," to your environment variables and restart."]})]}),u.jsxs("div",{className:"bg-neutral-900 border border-neutral-800 rounded-2xl shadow-2xl overflow-hidden",children:[u.jsxs("div",{className:"p-6 border-b border-neutral-800",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-colors ${e>=1?"bg-primary text-on-primary shadow-sm":"bg-neutral-800 text-neutral-500"}`,children:"1"}),u.jsx("div",{className:`h-1 w-8 transition-colors ${e>=2?"bg-primary":"bg-neutral-800"}`}),u.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-colors ${e>=2?"bg-primary text-on-primary shadow-sm":"bg-neutral-800 text-neutral-500"}`,children:"2"})]}),u.jsx("span",{className:"text-sm font-bold text-neutral-500 uppercase tracking-wider",children:e===1?"Create Admin":"System Config"})]}),u.jsx("h2",{className:"text-xl font-bold text-neutral-100",children:e===1?"Create Admin Account":"Company Settings"}),u.jsx("p",{className:"text-sm text-neutral-400 mt-1 font-medium",children:e===1?"This user will have full access to all settings.":"Configure how your team will access the system."})]}),u.jsxs("div",{className:"p-6 space-y-4",children:[i&&u.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg text-sm text-red-300",children:i}),e===1?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"firstName",className:x,children:"First Name"}),u.jsx("input",{id:"firstName",name:"firstName",type:"text",value:l.firstName,onChange:d,className:m,placeholder:"Jane"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"lastName",className:x,children:"Last Name"}),u.jsx("input",{id:"lastName",name:"lastName",type:"text",value:l.lastName,onChange:d,className:m,placeholder:"Doe"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:x,children:"Email Address"}),u.jsx("input",{id:"email",name:"email",type:"email",value:l.email,onChange:d,className:m,placeholder:"admin@company.com"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:x,children:"Password"}),u.jsx("input",{id:"password",name:"password",type:"password",value:l.password,onChange:d,className:m})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"confirmPassword",className:x,children:"Confirm"}),u.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:l.confirmPassword,onChange:d,className:m})]})]}),u.jsxs("button",{onClick:f,className:"w-full mt-4 bg-primary hover:bg-primary-hover text-on-primary font-bold py-3 px-6 rounded-full transition-all shadow-md flex items-center justify-center",children:["Next Step ",u.jsx(Y0,{className:"w-4 h-4 ml-2"})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"companyName",className:x,children:"Company Name"}),u.jsx("input",{id:"companyName",name:"companyName",type:"text",value:l.companyName,onChange:d,className:m,placeholder:"My Flooring Co."}),u.jsx("p",{className:"text-xs text-neutral-500 mt-1 font-medium",children:"This will appear on emails and invoices."})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"publicUrl",className:x,children:"System URL"}),u.jsx("input",{id:"publicUrl",name:"publicUrl",type:"text",value:l.publicUrl,onChange:d,className:m}),u.jsxs("div",{className:"flex items-start gap-2 mt-3 bg-neutral-950/50 p-3 rounded-xl border border-neutral-800/50",children:[u.jsx(gh,{className:"w-4 h-4 text-success mt-0.5 flex-shrink-0"}),u.jsxs("p",{className:"text-xs text-neutral-400 leading-relaxed font-medium",children:["We detected ",u.jsx("strong",{children:window.location.origin}),". Only change this if you are using a proxy or custom domain."]})]})]}),u.jsxs("div",{className:"flex gap-3 mt-6",children:[u.jsx("button",{onClick:()=>t(1),className:"w-1/3 py-3 px-4 text-neutral-400 font-bold hover:text-neutral-100 hover:bg-neutral-800 rounded-full transition-colors",children:"Back"}),u.jsxs("button",{onClick:p,disabled:r,className:"w-2/3 bg-success hover:bg-success-hover text-on-success font-bold py-3 px-6 rounded-full transition-all shadow-md flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:[r?u.jsx(P0,{className:"w-5 h-5 animate-spin mr-2"}):u.jsx(W8e,{className:"w-5 h-5 mr-2"}),"Initialize System"]})]})]})]})]})]})})}const Ove=`
  .kb-read-content h1 { font-size: 1.75em; font-weight: 800; margin-top: 1.5em; margin-bottom: 0.5em; color: var(--color-text-primary); scroll-margin-top: 2rem; }
  .kb-read-content h2 { font-size: 1.4em; font-weight: 700; margin-top: 1.25em; margin-bottom: 0.5em; color: var(--color-text-primary); scroll-margin-top: 2rem; }
  .kb-read-content h3 { font-size: 1.2em; font-weight: 600; margin-top: 1em; margin-bottom: 0.5em; color: var(--color-text-primary); scroll-margin-top: 2rem; }
  .kb-read-content p { margin-bottom: 0.75em; line-height: 1.6; color: var(--color-text-primary); overflow-wrap: break-word; }
  .kb-read-content p:empty::before { content: " "; display: inline-block; }
  .kb-read-content ul { list-style-type: disc; padding-left: 1.5em; margin-bottom: 1em; color: var(--color-text-primary); }
  .kb-read-content ol { list-style-type: decimal; padding-left: 1.5em; margin-bottom: 1em; color: var(--color-text-primary); }
  .kb-read-content a { color: var(--color-primary); text-decoration: underline; cursor: pointer; }
  .kb-read-content strong { font-weight: bold; color: var(--color-text-primary); }
  
  /* FILE ATTACHMENT LINKS */
  .kb-read-content a[href*="/uploads/"] {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background-color: var(--color-surface);
      border: 1px solid var(--color-border);
      padding: 0.25rem 0.75rem;
      border-radius: 999px;
      text-decoration: none;
      font-weight: 500;
      font-size: 0.9em;
      transition: all 0.2s;
      margin: 0.25rem 0;
  }
  .kb-read-content a[href*="/uploads/"]:hover {
      border-color: var(--color-primary);
      background-color: color-mix(in srgb, var(--color-primary), transparent 95%);
  }
  
  /* CAPTION & FIGURE STYLES */
  .kb-read-content figure { display: table; margin: 1.5em auto; max-width: 100%; }
  .kb-read-content figcaption { text-align: center; font-size: 0.85em; color: var(--color-text-secondary); font-style: italic; margin-top: 0.5em; width: 100%; }
  .kb-read-content figure img { margin: 0 !important; float: none !important; display: block; }
  
  /* IMAGE STYLES */
  .kb-read-content img { 
      max-width: 100%; 
      height: auto; 
      border-radius: 0.5rem; 
      margin: 1.5em auto; 
      display: block;    
      cursor: zoom-in; 
      box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); 
  }
  .kb-read-content img[align="left"] { 
      float: left; margin: 0.5em 1.5em 1em 0; display: inline-block; 
  }
  .kb-read-content img[align="right"] { 
      float: right; margin: 0.5em 0 1em 1.5em; display: inline-block; 
  }
  .kb-read-content img[align="center"] { display: block; margin: 1.5em auto; }
  
  /* WIKI LINKS */
  .kb-read-content .kb-mention {
      color: var(--color-primary);
      background-color: color-mix(in srgb, var(--color-primary), white 85%);
      padding: 0.1rem 0.3rem;
      border-radius: 0.3rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
  }
  .kb-read-content .kb-mention:hover {
      background-color: var(--color-primary);
      color: var(--color-on-primary);
  }
`;function K_t({articleId:e,onClose:t,onRestore:r}){const[n,i]=I.useState([]),[a,s]=I.useState(null),[o,l]=I.useState(!0),[c,d]=I.useState(!1);I.useEffect(()=>{f()},[e]);const f=async()=>{try{const x=await cr.get(`/api/kb/articles/${e}/history`);i(x.data),window.innerWidth>=768&&x.data.length>0&&s(x.data[0])}catch(x){console.error(x),Re.error("Failed to load history")}finally{l(!1)}},p=x=>{s(x),d(!0)},m=()=>{a&&(r(a.previousContent),Re.success("Content restored. Please Save to confirm."))};return u.jsxs("div",{className:"flex flex-col h-full bg-surface",children:[u.jsx("style",{children:Ove}),u.jsx("div",{className:"p-4 border-b border-border bg-background flex justify-between items-center",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{onClick:t,className:"text-text-secondary hover:text-text-primary flex items-center gap-1 text-sm",children:[u.jsx(rf,{size:16})," Back"]}),u.jsx("span",{className:"text-border",children:"|"}),u.jsxs("h2",{className:"font-bold text-lg flex items-center gap-2 text-text-primary",children:[u.jsx(od,{size:18,className:"text-primary"})," History"]})]})}),u.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[u.jsxs("div",{className:`
                    w-full md:w-80 border-r border-border bg-background/50 overflow-y-auto p-2
                    ${c?"hidden md:block":"block"}
                `,children:[u.jsx("h3",{className:"text-xs font-bold text-text-tertiary uppercase tracking-wider mb-2 px-2 mt-2",children:"Revisions"}),n.length===0&&!o&&u.jsx("div",{className:"p-4 text-center text-text-secondary text-sm",children:"No history found."}),n.map(x=>u.jsxs("button",{onClick:()=>p(x),className:`w-full text-left p-3 rounded-lg mb-1 transition-colors border group relative ${(a==null?void 0:a.id)===x.id?"bg-primary/10 border-primary/50 ring-1 ring-primary":"bg-surface border-transparent hover:border-border"}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-6 h-6 rounded-full bg-surface-hover flex items-center justify-center text-text-secondary",children:u.jsx(oc,{size:12})}),u.jsx("span",{className:"text-xs font-bold text-text-primary truncate max-w-[120px]",children:x.authorName||"Unknown"})]}),u.jsx("span",{className:"text-[10px] text-text-tertiary",children:new Date(x.createdAt).toLocaleDateString()})]}),u.jsxs("div",{className:"text-xs text-text-secondary pl-8 flex justify-between items-center",children:[u.jsx("span",{children:new Date(x.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),u.jsx(ou,{size:14,className:"opacity-0 group-hover:opacity-100 md:hidden text-primary"})]})]},x.id))]}),u.jsx("div",{className:`
                    flex-1 flex flex-col bg-surface absolute inset-0 md:static z-10 md:z-auto
                    ${c?"block":"hidden md:flex"}
                `,children:a?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"p-3 border-b border-border bg-background/50 flex justify-between items-center shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>d(!1),className:"md:hidden p-1 -ml-1 text-text-secondary",children:u.jsx(rf,{size:18})}),u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("span",{className:"text-xs font-bold text-text-primary",children:["Snapshot from ",new Date(a.createdAt).toLocaleString()]}),u.jsxs("span",{className:"text-[10px] text-text-tertiary md:hidden",children:["By ",a.authorName]})]})]}),u.jsxs("button",{onClick:m,className:"flex items-center gap-2 bg-primary text-on-primary px-3 py-1.5 rounded text-sm font-bold hover:bg-primary-hover shadow-sm",children:[u.jsx($x,{size:14})," ",u.jsx("span",{className:"hidden sm:inline",children:"Restore"})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-8",children:u.jsx("div",{className:"kb-read-content opacity-90",dangerouslySetInnerHTML:{__html:a.previousContent}})})]}):u.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-text-tertiary p-4 text-center",children:[u.jsx(od,{size:48,className:"mb-4 opacity-20"}),u.jsx("p",{children:"Select a revision from the list to preview."})]})})]})]})}const X_t=({onClose:e,onSave:t})=>{const[r,n]=I.useState("");return u.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:e,children:u.jsxs("div",{className:"bg-surface border border-border p-6 rounded-lg w-full max-w-sm shadow-xl",onClick:i=>i.stopPropagation(),children:[u.jsx("h3",{className:"font-bold text-text-primary mb-4",children:"New Category"}),u.jsx("input",{autoFocus:!0,className:"w-full bg-background border border-border rounded p-2 text-text-primary mb-4 focus:ring-2 focus:ring-primary outline-none",placeholder:"e.g. Installation Guides",value:r,onChange:i=>n(i.target.value),onKeyDown:i=>i.key==="Enter"&&t(r)}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{onClick:e,className:"px-3 py-1.5 text-text-secondary hover:text-text-primary",children:"Cancel"}),u.jsx("button",{onClick:()=>t(r),disabled:!r,className:"px-3 py-1.5 bg-primary text-on-primary rounded font-bold hover:bg-primary-hover disabled:opacity-50",children:"Create"})]})]})})},Y_t=e=>e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""),Q_t=e=>{const r=new DOMParser().parseFromString(e,"text/html");return r.querySelectorAll("h1, h2, h3").forEach(n=>{n.id||(n.id=Y_t(n.textContent||""))}),r.body.innerHTML},Xee=e=>{const r=new DOMParser().parseFromString(e,"text/html"),n=[];return r.querySelectorAll("h1, h2, h3").forEach(i=>{i.id&&i.textContent&&n.push({id:i.id,text:i.textContent,level:parseInt(i.tagName.substring(1))})}),n};function J_t(){var G,ie,Ce;const{currentUser:e}=Kr(),t=(G=e==null?void 0:e.roles)==null?void 0:G.includes("Admin"),[r,n]=I.useState("list"),[i,a]=I.useState([]),[s,o]=I.useState(null),[l,c]=I.useState([]),[d,f]=I.useState(""),[p,m]=I.useState(null),[x,v]=I.useState(!1),[b,w]=I.useState(null),[_,C]=I.useState(!1),[N,R]=I.useState(""),[P,O]=I.useState(""),[D,M]=I.useState(""),[B,U]=I.useState([]),[H,Z]=I.useState(""),[ee,V]=I.useState([]);I.useEffect(()=>{te()},[]),I.useEffect(()=>{const re=setTimeout(()=>{d?se(null,d):s&&se(s)},300);return()=>clearTimeout(re)},[s,d]),I.useEffect(()=>{s&&f("")},[s]),I.useEffect(()=>{if(p&&b){const re=setTimeout(()=>{const ne=document.getElementById(b);ne&&(ne.scrollIntoView({behavior:"smooth",block:"start"}),w(null))},300);return()=>clearTimeout(re)}},[p,b]),I.useEffect(()=>{r==="read"&&p&&setTimeout(()=>{const re=document.querySelector(".kb-read-content");re&&(re.querySelectorAll("img").forEach(ne=>{const ge=ne.getAttribute("src");ge&&!ge.startsWith("http")&&(ne.src=ds(ge))}),re.querySelectorAll("img[data-caption]").forEach(ne=>{if(ne.parentElement.tagName==="FIGURE")return;const ge=ne.getAttribute("data-caption");if(!ge)return;const we=document.createElement("figure"),q=document.createElement("figcaption");q.innerText=ge;const Ae=ne.getAttribute("align");Ae==="left"?(we.style.float="left",we.style.margin="0.5em 1.5em 1em 0"):Ae==="right"&&(we.style.float="right",we.style.margin="0.5em 0 1em 1.5em"),ne.parentNode.insertBefore(we,ne),we.appendChild(ne),we.appendChild(q)}))},100)},[r,p]);const te=async()=>{try{const re=await cr.get(sr("/api/kb/categories"),{withCredentials:!0});a(re.data),!s&&re.data.length>0&&o(re.data[0].id)}catch(re){console.error(re)}},se=async(re,ne)=>{try{let ge="/api/kb/search";if(ne)ge+=`?q=${encodeURIComponent(ne)}`;else if(re)ge+=`?cat=${re}`;else return;const we=await cr.get(sr(ge),{withCredentials:!0});c(we.data)}catch(ge){console.error(ge)}},Q=async re=>{try{await cr.post(sr("/api/kb/categories"),{name:re},{withCredentials:!0}),Re.success("Category created"),te(),v(!1)}catch{Re.error("Failed to create category")}},X=(re="")=>{R(re),O("<p>Start writing...</p>"),M(s||""),U([]),m(null),f(""),n("edit")},fe=re=>{m(null),cr.get(sr(`/api/kb/articles/${re.id}`),{withCredentials:!0}).then(ne=>{m(ne.data),V(Xee(ne.data.content)),n("read")})},Se=()=>{p&&(R(p.title),O(p.content||""),M(p.category_id||""),U(p.tags||[]),n("edit"))},Y=async()=>{if(!N)return Re.error("Title is required");if(!D)return Re.error("Category is required");const re=Q_t(P);try{const ne={title:N,content:re,categoryId:Number(D),isPublished:!0,tags:B};if(p!=null&&p.id){const ge=await cr.put(sr(`/api/kb/articles/${p.id}`),ne,{withCredentials:!0});Re.success("Article updated"),m({...p,id:p==null?void 0:p.id,title:N,content:re,tags:B,updated_at:ge.data.updated_at})}else{const ge=await cr.post(sr("/api/kb/articles"),ne,{withCredentials:!0});Re.success("Article created"),m({...ge.data,author_name:e==null?void 0:e.firstName,title:N,content:re,tags:B})}se(Number(D)),o(Number(D)),V(Xee(re)),n("read")}catch(ne){console.error(ne),Re.error("Failed to save")}},ce=()=>{H&&!B.includes(H.trim())&&(U([...B,H.trim()]),Z(""))},W=re=>{O(re),U((p==null?void 0:p.tags)||[]),n("edit")};return u.jsxs("div",{className:"h-full flex flex-col",children:[u.jsx("div",{className:"bg-surface-container-high p-8 rounded-xl shadow-sm mb-6 border border-outline/10 flex-shrink-0",children:u.jsxs("div",{children:[u.jsx("h1",{className:"text-4xl font-bold text-text-primary tracking-tight",children:"Knowledge Base"}),u.jsx("p",{className:"text-text-secondary mt-1 font-medium",children:"Manage documentation, guides, and internal resources."})]})}),u.jsxs("div",{className:"flex-1 flex min-h-0 bg-surface-container-high border border-outline/10 rounded-xl overflow-hidden shadow-sm relative",children:[u.jsxs("div",{className:`border-r border-outline/10 bg-surface-container-low flex flex-col transition-all duration-200 
                    ${_?"absolute inset-0 z-50 w-full":"hidden md:flex w-64"}
                `,children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center bg-surface-container-low",children:[u.jsxs("h2",{className:"font-bold text-text-primary flex items-center gap-2",children:[u.jsx(Xq,{className:"text-primary w-5 h-5"})," Library"]}),u.jsxs("div",{className:"flex items-center gap-2",children:[t&&u.jsx("button",{onClick:()=>v(!0),className:"text-primary hover:bg-primary-container p-2 rounded-full transition-colors",title:"New Category",children:u.jsx(Jl,{size:18})}),u.jsx("button",{onClick:()=>C(!1),className:"md:hidden text-text-secondary p-1",children:u.jsx(Gr,{size:20})})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:[i.length===0&&u.jsx("div",{className:"text-sm text-text-tertiary p-4 text-center",children:"No categories yet."}),i.map(re=>u.jsxs("div",{children:[u.jsxs("button",{onClick:()=>{o(re.id)},className:`w-full flex items-center gap-2 px-3 py-2 text-sm rounded-md transition-colors ${s===re.id?"bg-primary-container text-primary font-bold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary"}`,children:[u.jsx(Xq,{size:16,className:s===re.id?"text-primary":"text-text-tertiary"}),u.jsx("span",{className:"truncate",children:re.name})]}),s===re.id&&u.jsxs("div",{className:"ml-4 border-l border-outline/20 pl-2 mt-1 space-y-0.5",children:[l.map(ne=>u.jsx("button",{onClick:()=>{fe(ne),C(!1)},className:`block w-full text-left px-2 py-1.5 text-xs truncate rounded-md ${(p==null?void 0:p.id)===ne.id?"text-primary bg-primary-container/30 font-medium":"text-text-secondary hover:text-text-primary hover:bg-surface-container-high"}`,children:ne.title},ne.id)),l.length===0&&u.jsx("div",{className:"text-[10px] text-text-tertiary px-2 py-1 italic",children:"No articles"})]})]},re.id))]})]}),u.jsxs("div",{className:"flex-1 flex flex-col bg-surface",children:[r==="list"&&u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"p-4 md:p-6 border-b border-outline/10 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-surface-container-high",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:()=>C(!0),className:"md:hidden text-primary hover:bg-primary/10 p-1 rounded",children:u.jsx(moe,{size:24})}),u.jsx("div",{children:d?u.jsx("h1",{className:"text-xl md:text-2xl font-bold text-text-primary",children:"Search Results"}):u.jsxs(u.Fragment,{children:[u.jsx("h1",{className:"text-xl md:text-2xl font-bold text-text-primary",children:((ie=i.find(re=>re.id===s))==null?void 0:ie.name)||"Library"}),u.jsxs("p",{className:"text-text-secondary text-xs md:text-sm font-medium",children:[l.length," articles"]})]})})]}),t&&s&&u.jsx("button",{onClick:()=>X(),className:"md:hidden text-primary bg-primary/10 p-2 rounded-full",children:u.jsx(Jl,{size:20})})]}),u.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[u.jsxs("div",{className:"relative w-full md:w-64 lg:w-80",children:[u.jsx(gc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-tertiary",size:16}),u.jsx("input",{className:"w-full bg-surface-container-highest border-none rounded-full pl-9 pr-4 py-2 text-sm focus:ring-2 focus:ring-primary/50 outline-none transition-shadow shadow-sm",placeholder:"Search...",value:d,onChange:re=>f(re.target.value)})]}),t&&s&&u.jsxs("button",{onClick:()=>X(),className:"hidden md:flex items-center gap-2 bg-primary text-on-primary px-4 py-2 rounded-full font-bold shadow-md hover:bg-primary-hover transition-colors",children:[u.jsx(Jl,{size:18})," New Article"]})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-surface",children:[t&&d&&u.jsxs("button",{onClick:()=>X(d),className:"w-full mb-4 p-4 border border-dashed border-primary/50 bg-primary-container/20 rounded-xl flex items-center justify-center gap-2 text-primary font-bold hover:bg-primary-container/40 transition-colors",children:[u.jsx(Jl,{size:18}),'Create new article: "',d,'"']}),l.length===0?u.jsx("div",{className:"text-center py-8 text-text-tertiary",children:!t&&u.jsx("p",{children:"No articles found."})}):u.jsx("div",{className:"grid grid-cols-1 gap-4",children:l.map(re=>u.jsxs("div",{onClick:()=>fe(re),className:"p-5 rounded-xl border border-outline/10 bg-surface-container-high hover:border-primary hover:shadow-md transition-all cursor-pointer group",children:[u.jsx("h3",{className:"font-bold text-lg text-text-primary group-hover:text-primary mb-1",children:re.title}),u.jsxs("div",{className:"flex items-center gap-4 text-xs text-text-secondary",children:[u.jsxs("span",{className:"font-medium",children:["Updated ",new Date(re.updated_at).toLocaleDateString()]}),re.tags&&re.tags.length>0&&u.jsxs("span",{className:"flex items-center gap-1 bg-surface-container px-2 py-0.5 rounded-full",children:[u.jsx(l8,{size:12})," ",re.tags.join(", ")]})]})]},re.id))})]})]}),r==="read"&&p&&u.jsxs("div",{className:"flex flex-col h-full relative bg-surface",children:[u.jsxs("div",{className:"p-6 border-b border-outline/10 flex justify-between items-start bg-surface-container-high",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsxs("button",{onClick:()=>n("list"),className:"text-sm text-text-secondary hover:text-text-primary flex items-center gap-1 font-medium",children:[u.jsx(rf,{size:14})," Back"]}),u.jsx("span",{className:"text-border",children:"|"}),u.jsx("span",{className:"text-xs text-primary font-bold uppercase tracking-wider bg-primary-container px-2 py-0.5 rounded",children:(Ce=i.find(re=>re.id===p.category_id))==null?void 0:Ce.name})]}),u.jsx("h1",{className:"text-3xl font-bold text-text-primary tracking-tight",children:p.title}),u.jsxs("p",{className:"text-xs text-text-secondary mt-2 font-medium",children:["Last updated ",new Date(p.updated_at).toLocaleDateString()]})]}),t&&u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>n("history"),className:"p-2 text-text-secondary hover:text-primary hover:bg-surface-container-highest rounded-full transition-all",title:"View History",children:u.jsx(Bx,{size:20})}),u.jsx("button",{onClick:Se,className:"p-2 text-text-secondary hover:text-primary hover:bg-surface-container-highest rounded-full transition-all",title:"Edit Article",children:u.jsx(tx,{size:20})})]})]}),u.jsxs("div",{className:"flex-1 overflow-hidden flex bg-surface",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 flow-root",onClick:re=>{var ge;if(re.target instanceof HTMLImageElement){window.open(re.target.src,"_blank");return}const ne=re.target.closest(".kb-mention");if(ne){const we=ne.getAttribute("data-id"),q=ne.getAttribute("data-anchor");if(we){if(Number(we)===p.id&&q){(ge=document.getElementById(q))==null||ge.scrollIntoView({behavior:"smooth"});return}Number(we)!==p.id&&(q&&w(q),fe({id:we}))}}},children:[u.jsx("style",{children:Ove}),u.jsx("div",{className:"kb-read-content max-w-3xl mx-auto",dangerouslySetInnerHTML:{__html:p.content}})]}),ee.length>0&&u.jsxs("div",{className:"w-64 border-l border-outline/10 bg-surface-container-low p-6 hidden xl:block overflow-y-auto",children:[u.jsx("h4",{className:"font-bold text-text-secondary text-xs uppercase tracking-wider mb-4",children:"On this page"}),u.jsx("div",{className:"space-y-2 border-l border-outline/20",children:ee.map((re,ne)=>u.jsxs("div",{className:"group flex items-center justify-between pl-3 hover:border-l hover:-ml-[1px] hover:border-primary transition-all",children:[u.jsx("a",{href:`#${re.id}`,className:`block text-xs hover:text-primary truncate ${re.level===3?"ml-2 text-text-tertiary":"text-text-secondary font-medium"}`,children:re.text}),u.jsx("button",{onClick:ge=>{ge.preventDefault(),navigator.clipboard.writeText(`${window.location.href}#${re.id}`),Re.success("Section link copied!")},className:"opacity-0 group-hover:opacity-100 p-1 text-text-tertiary hover:text-primary transition-opacity",title:"Copy Link to Section",children:u.jsx(Ux,{size:12})})]},ne))})]})]})]}),r==="history"&&p&&u.jsx(K_t,{articleId:p.id,onClose:()=>n("read"),onRestore:W}),r==="edit"&&u.jsxs("div",{className:"flex flex-col h-full bg-surface",children:[u.jsxs("div",{className:"p-6 border-b border-outline/10 flex justify-between items-start bg-surface-container-high",children:[u.jsxs("div",{className:"w-full mr-4",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2 h-6",children:[u.jsxs("button",{onClick:()=>n(p?"read":"list"),className:"text-sm text-text-secondary hover:text-text-primary flex items-center gap-1 font-medium",children:[u.jsx(rf,{size:14})," Cancel"]}),u.jsx("span",{className:"text-border",children:"|"}),u.jsxs("select",{value:D,onChange:re=>M(re.target.value),className:"bg-transparent text-xs font-bold uppercase tracking-wider text-primary border-none outline-none cursor-pointer hover:bg-primary-container rounded px-1 -ml-1 transition-colors",children:[u.jsx("option",{value:"",disabled:!0,children:"Select Category"}),i.map(re=>u.jsx("option",{value:re.id,children:re.name},re.id))]})]}),u.jsx("input",{type:"text",placeholder:"Article Title",className:"w-full text-3xl font-bold bg-transparent border-none outline-none placeholder-text-tertiary text-text-primary p-0 m-0 focus:ring-0 tracking-tight",value:N,onChange:re=>R(re.target.value)}),u.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[B.map(re=>u.jsxs("span",{className:"text-xs bg-primary-container text-primary px-2 py-0.5 rounded-full flex items-center gap-1 font-medium",children:[re,u.jsx("button",{onClick:()=>U(B.filter(ne=>ne!==re)),children:u.jsx(Gr,{size:12})})]},re)),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(l8,{size:14,className:"text-text-tertiary"}),u.jsx("input",{className:"bg-transparent border-none outline-none text-xs text-text-primary placeholder-text-tertiary min-w-[80px]",placeholder:"Add tag...",value:H,onChange:re=>Z(re.target.value),onKeyDown:re=>re.key==="Enter"&&ce()})]})]})]}),u.jsx("div",{className:"flex-shrink-0",children:u.jsxs("button",{onClick:Y,className:"flex items-center gap-2 bg-primary text-on-primary px-6 py-2 rounded-full font-bold shadow-md hover:bg-primary-hover transition-colors",children:[u.jsx(vs,{size:18})," Save"]})})]}),u.jsx("div",{className:"flex-1 overflow-hidden p-0 md:p-8 w-full flex flex-col",children:u.jsx(nhe,{content:P,onChange:O})})]})]})]}),x&&u.jsx(X_t,{onClose:()=>v(!1),onSave:Q})]})}function Z_t(){const[e,t]=I.useState(""),[r,n]=I.useState(""),i=()=>{let a=e.trim();if(a){!a.startsWith("http://")&&!a.startsWith("https://")&&(a=`https://${a}`),a=a.replace(/\/$/,"");try{new URL(a)}catch{n("Invalid URL format. Must be like: https://flooring.mycompany.com");return}console.log(" SAVING SERVER URL:",a),localStorage.setItem(r8,a),window.location.reload()}};return u.jsx("div",{className:"min-h-screen bg-neutral-950 flex items-center justify-center p-4 font-sans text-neutral-200",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-neutral-100 mb-2 tracking-tight",children:"Connect to Server"}),u.jsx("p",{className:"text-neutral-400",children:"Enter your server address to connect."})]}),u.jsxs("div",{className:"bg-neutral-900 border border-neutral-800 rounded-2xl shadow-2xl p-6",children:[u.jsx("label",{className:"block text-sm font-medium text-neutral-400 mb-1.5",children:"Server URL"}),u.jsx("input",{type:"url",value:e,onChange:a=>{t(a.target.value),n("")},placeholder:"https://subfloor.mycompany.com",className:"w-full bg-neutral-800/50 border border-neutral-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-transparent placeholder-neutral-500"}),r&&u.jsx("p",{className:"text-red-400 text-sm mt-2",children:r}),u.jsx("button",{onClick:i,className:"mt-6 w-full bg-primary hover:bg-primary-hover text-on-primary font-semibold py-3 px-6 rounded-full transition-all shadow-lg hover:shadow-xl flex items-center justify-center",children:"Connect"}),u.jsx("button",{onClick:()=>{localStorage.removeItem(r8),window.location.reload()},className:"mt-4 w-full text-neutral-500 text-sm hover:text-neutral-300 transition-colors",children:"Clear Saved Server"})]})]})})}const eNt=()=>{const e=gu(),t=Il();return I.useEffect(()=>{var i;if(!((i=window.Capacitor)==null?void 0:i.isNativePlatform()))return;const n=JA.addListener("backButton",({canGoBack:a})=>{const s=document.querySelector('[aria-label="Close modal"]');if(s&&s.offsetParent!==null){s.click();return}const o=document.getElementById("sidebar-overlay");if(o){o.click();return}t.pathname==="/"||t.pathname==="/auth"?JA.exitApp():e(-1)});return()=>{n.then(a=>a.remove())}},[e,t]),null},yN=(e,t)=>{let r=parseInt(e.replace("#",""),16),n=Math.round(2.55*t),i=(r>>16)-n,a=(r>>8&255)-n,s=(r&255)-n;return"#"+(16777216+(i<255?i<1?0:i:255)*65536+(a<255?a<1?0:a:255)*256+(s<255?s<1?0:s:255)).toString(16).slice(1)},_M=e=>{const t=parseInt(e.substr(1,2),16),r=parseInt(e.substr(3,2),16),n=parseInt(e.substr(5,2),16);return(t*299+r*587+n*114)/1e3>=128?"#000000":"#ffffff"},tNt=()=>{const{systemBranding:e}=Kr();return Hr.useEffect(()=>{if(e!=null&&e.faviconUrl){const r=document.querySelector("link[rel*='icon']")||document.createElement("link");r.type="image/x-icon",r.rel="icon",r.href=ds(e.faviconUrl),document.getElementsByTagName("head")[0].appendChild(r)}e!=null&&e.companyName&&(document.title=`Subfloor for ${e.companyName}`);const t=document.documentElement;e!=null&&e.primaryColor&&(t.style.setProperty("--color-primary",e.primaryColor),t.style.setProperty("--color-primary-hover",yN(e.primaryColor,10)),t.style.setProperty("--color-on-primary",_M(e.primaryColor))),e!=null&&e.secondaryColor&&(t.style.setProperty("--color-secondary",e.secondaryColor),t.style.setProperty("--color-secondary-hover",yN(e.secondaryColor,10)),t.style.setProperty("--color-on-secondary",_M(e.secondaryColor))),e!=null&&e.accentColor&&(t.style.setProperty("--color-accent",e.accentColor),t.style.setProperty("--color-accent-hover",yN(e.accentColor,10)),t.style.setProperty("--color-on-accent",_M(e.accentColor))),e!=null&&e.backgroundColor&&t.style.setProperty("--color-background",e.backgroundColor),e!=null&&e.surfaceColor&&t.style.setProperty("--color-surface",e.surfaceColor),e!=null&&e.textPrimaryColor&&t.style.setProperty("--color-text-primary",e.textPrimaryColor),e!=null&&e.textSecondaryColor&&t.style.setProperty("--color-text-secondary",e.textSecondaryColor),e!=null&&e.surfaceColor&&t.style.setProperty("--color-border",yN(e.surfaceColor,-10))},[e]),null};function rNt(){var o;const[e,t]=I.useState(null),[r,n]=I.useState(!1),i=u.jsxs(u.Fragment,{children:[u.jsx(fje,{position:"bottom-center"}),u.jsx(e5e,{})]}),a=(o=window.Capacitor)==null?void 0:o.isNativePlatform(),s=!!localStorage.getItem("subfloor_server_url");return I.useEffect(()=>{if(a&&!s){t(null);return}fetch(sr("/api/setup/status")).then(l=>l.json()).then(l=>t(l.initialized)).catch(l=>{console.error("Failed to check setup status",l),a?n(!0):t(!0)})},[a,s]),a&&(!s||r)?u.jsxs(u.Fragment,{children:[i,u.jsx(Z_t,{})]}):e===null?u.jsxs("div",{className:"flex items-center justify-center h-screen bg-slate-950",children:[i,u.jsx(P0,{className:"w-8 h-8 text-blue-500 animate-spin"})]}):e===!1?u.jsx(G_t,{}):u.jsxs($6e,{children:[i,u.jsx(vBe,{}),u.jsx(tNt,{}),u.jsx(J8e,{children:u.jsxs(eie,{children:[u.jsx(eNt,{}),u.jsxs(Jne,{children:[xae.getSuperTokensRoutesForReactRouterDom(xAe,[vae.EmailPasswordPreBuiltUI]),u.jsxs(da,{path:"/",element:u.jsx(q0.SessionAuth,{children:u.jsx(f5e,{})}),children:[u.jsx(da,{index:!0,element:u.jsx(oBe,{})}),u.jsx(da,{path:"customers",element:u.jsx(bBe,{})}),u.jsx(da,{path:"customers/:customerId",element:u.jsx(wBe,{})}),u.jsx(da,{path:"projects/:projectId",element:u.jsx(yHe,{})}),u.jsx(da,{path:"samples",element:u.jsx(aWe,{})}),u.jsx(da,{path:"reports",element:u.jsx(Rgt,{})}),u.jsx(da,{path:"import",element:u.jsx(V_t,{})}),u.jsx(da,{path:"messages",element:u.jsx(Kee,{})}),u.jsx(da,{path:"messages/:partnerId",element:u.jsx(Kee,{})}),u.jsx(da,{path:"kb",element:u.jsx(J_t,{})}),u.jsx(da,{path:"vendors",element:u.jsx(zet,{})}),u.jsx(da,{path:"vendors/:vendorId",element:u.jsx(Vet,{})}),u.jsx(da,{path:"orders",element:u.jsx(Get,{})}),u.jsx(da,{path:"installers",element:u.jsx(oWe,{})}),u.jsx(da,{path:"installers/:installerId",element:u.jsx(cWe,{})}),u.jsx(da,{path:"quotes/:quoteId",element:u.jsx(uWe,{})}),u.jsx(da,{path:"calendar",element:u.jsx(zHe,{})}),u.jsx(da,{path:"settings",element:u.jsx($et,{})})]})]})]})})]})}var tz={},wu={};Object.defineProperty(wu,"__esModule",{value:!0});var lm=mn,nNt=Ra,iNt=Px;wu.SuperTokensWrapper=lm.SuperTokensWrapper;wu.changeLanguage=lm.changeLanguage;wu.default=lm.SuperTokensAPIWrapper;wu.init=lm.init;wu.isRecipeInitialized=lm.isRecipeInitialized;wu.loadTranslation=lm.loadTranslation;wu.redirectToAuth=lm.redirectToAuth;wu.useUserContext=lm.useUserContext;wu.getTranslationFunction=nNt.getTranslationFunction;wu.useTranslation=iNt.useTranslation;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(wu)})(tz);const aNt=Us(tz);var Pve={},Su={};Object.defineProperty(Su,"__esModule",{value:!0});var zn=Mi,sNt=o4,Tp=l4,_f=function(){function e(){}return e.init=function(t){return Tp.EmailPassword.init(t)},e.signOut=function(t){return zn.__awaiter(this,void 0,void 0,function(){return zn.__generator(this,function(r){return[2,Tp.EmailPassword.getInstanceOrThrow().signOut({userContext:zn.getNormalisedUserContext(t==null?void 0:t.userContext)})]})})},e.submitNewPassword=function(t){return zn.__awaiter(this,void 0,void 0,function(){return zn.__generator(this,function(r){return[2,Tp.EmailPassword.getInstanceOrThrow().webJSRecipe.submitNewPassword(zn.__assign(zn.__assign({},t),{userContext:zn.getNormalisedUserContext(t.userContext)}))]})})},e.sendPasswordResetEmail=function(t){return zn.__awaiter(this,void 0,void 0,function(){return zn.__generator(this,function(r){return[2,Tp.EmailPassword.getInstanceOrThrow().webJSRecipe.sendPasswordResetEmail(zn.__assign(zn.__assign({},t),{userContext:zn.getNormalisedUserContext(t.userContext)}))]})})},e.signUp=function(t){return zn.__awaiter(this,void 0,void 0,function(){return zn.__generator(this,function(r){return[2,Tp.EmailPassword.getInstanceOrThrow().webJSRecipe.signUp(zn.__assign(zn.__assign({},t),{userContext:zn.getNormalisedUserContext(t.userContext)}))]})})},e.signIn=function(t){return zn.__awaiter(this,void 0,void 0,function(){return zn.__generator(this,function(r){return[2,Tp.EmailPassword.getInstanceOrThrow().webJSRecipe.signIn(zn.__assign(zn.__assign({},t),{userContext:zn.getNormalisedUserContext(t.userContext)}))]})})},e.doesEmailExist=function(t){return zn.__awaiter(this,void 0,void 0,function(){return zn.__generator(this,function(r){return[2,Tp.EmailPassword.getInstanceOrThrow().webJSRecipe.doesEmailExist(zn.__assign(zn.__assign({},t),{userContext:zn.getNormalisedUserContext(t.userContext)}))]})})},e.getResetPasswordTokenFromURL=function(t){return Tp.EmailPassword.getInstanceOrThrow().webJSRecipe.getResetPasswordTokenFromURL(zn.__assign(zn.__assign({},t),{userContext:zn.getNormalisedUserContext(t==null?void 0:t.userContext)}))},e.ComponentsOverrideProvider=sNt.Provider,e}(),oNt=_f.init,lNt=_f.signOut,cNt=_f.submitNewPassword,uNt=_f.sendPasswordResetEmail,dNt=_f.signUp,fNt=_f.signIn,hNt=_f.doesEmailExist,pNt=_f.getResetPasswordTokenFromURL,mNt=_f.ComponentsOverrideProvider;Su.EmailPasswordComponentsOverrideProvider=mNt;Su.default=_f;Su.doesEmailExist=hNt;Su.getResetPasswordTokenFromURL=pNt;Su.init=oNt;Su.sendPasswordResetEmail=uNt;Su.signIn=fNt;Su.signOut=lNt;Su.signUp=dNt;Su.submitNewPassword=cNt;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(Su)})(Pve);const gNt=Us(Pve);console.log(" SuperTokens Config Loaded");const Rve=k7()||window.location.origin,jve=window.location.origin;console.log(" SuperTokens API:",Rve);console.log(" SuperTokens Website:",jve);aNt.init({appInfo:{appName:"Subfloor",apiDomain:Rve,websiteDomain:jve,apiBasePath:"/api/auth",websiteBasePath:"/auth"},recipeList:[gNt.init({useShadowDom:!1,disableSignUp:!0,style:{container:{border:"1px solid var(--color-border)",backgroundColor:"var(--color-surface)",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",borderRadius:"0.5rem",fontFamily:"inherit"},headerTitle:{color:"var(--color-text-primary)",fontFamily:"inherit"},label:{color:"var(--color-text-secondary)"},input:{backgroundColor:"var(--color-background)",color:"var(--color-text-primary)",border:"1px solid var(--color-border)"},button:{backgroundColor:"var(--color-primary)",color:"var(--color-on-primary)",borderRadius:"0.5rem",fontWeight:"700",border:"none",textTransform:"uppercase"},link:{color:"var(--color-accent)"},superTokensBranding:{display:"none"}}}),X4e.init()]});const xNt=new Dje({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1,refetchOnWindowFocus:!0}}}),Dve=document.getElementById("root");if(!Dve)throw new Error("Could not find root element to mount to");const vNt=NM.createRoot(Dve);vNt.render(u.jsx(Hr.StrictMode,{children:u.jsx(Mje,{client:xNt,children:u.jsx(tz.SuperTokensWrapper,{children:u.jsx(rNt,{})})})}));export{aoe as W,UNt as a,_4 as r};
