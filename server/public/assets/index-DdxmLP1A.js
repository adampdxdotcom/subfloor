var zEe=Object.defineProperty;var MH=e=>{throw TypeError(e)};var HEe=(e,t,r)=>t in e?zEe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var kR=(e,t,r)=>HEe(e,typeof t!="symbol"?t+"":t,r),_R=(e,t,r)=>t.has(e)||MH("Cannot "+r);var Le=(e,t,r)=>(_R(e,t,"read from private field"),r?r.call(e):t.get(e)),hr=(e,t,r)=>t.has(e)?MH("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Wt=(e,t,r,n)=>(_R(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),ln=(e,t,r)=>(_R(e,t,"access private method"),r);var Dk=(e,t,r,n)=>({set _(i){Wt(e,t,i,r)},get _(){return Le(e,t,n)}});function E5(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Ve=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function WEe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var ste={exports:{}},mO={},ote={exports:{}},Cn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uE=Symbol.for("react.element"),VEe=Symbol.for("react.portal"),qEe=Symbol.for("react.fragment"),GEe=Symbol.for("react.strict_mode"),KEe=Symbol.for("react.profiler"),XEe=Symbol.for("react.provider"),YEe=Symbol.for("react.context"),QEe=Symbol.for("react.forward_ref"),JEe=Symbol.for("react.suspense"),ZEe=Symbol.for("react.memo"),eCe=Symbol.for("react.lazy"),FH=Symbol.iterator;function tCe(e){return e===null||typeof e!="object"?null:(e=FH&&e[FH]||e["@@iterator"],typeof e=="function"?e:null)}var lte={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cte=Object.assign,ute={};function Fy(e,t,r){this.props=e,this.context=t,this.refs=ute,this.updater=r||lte}Fy.prototype.isReactComponent={};Fy.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Fy.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function dte(){}dte.prototype=Fy.prototype;function C5(e,t,r){this.props=e,this.context=t,this.refs=ute,this.updater=r||lte}var k5=C5.prototype=new dte;k5.constructor=C5;cte(k5,Fy.prototype);k5.isPureReactComponent=!0;var LH=Array.isArray,fte=Object.prototype.hasOwnProperty,_5={current:null},hte={key:!0,ref:!0,__self:!0,__source:!0};function pte(e,t,r){var n,i={},a=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(a=""+t.key),t)fte.call(t,n)&&!hte.hasOwnProperty(n)&&(i[n]=t[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:uE,type:e,key:a,ref:s,props:i,_owner:_5.current}}function rCe(e,t){return{$$typeof:uE,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function N5(e){return typeof e=="object"&&e!==null&&e.$$typeof===uE}function nCe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var BH=/\/+/g;function NR(e,t){return typeof e=="object"&&e!==null&&e.key!=null?nCe(""+e.key):t.toString(36)}function yN(e,t,r,n,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case uE:case VEe:s=!0}}if(s)return s=e,i=i(s),e=n===""?"."+NR(s,0):n,LH(i)?(r="",e!=null&&(r=e.replace(BH,"$&/")+"/"),yN(i,t,r,"",function(c){return c})):i!=null&&(N5(i)&&(i=rCe(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(BH,"$&/")+"/")+e)),t.push(i)),1;if(s=0,n=n===""?".":n+":",LH(e))for(var o=0;o<e.length;o++){a=e[o];var l=n+NR(a,o);s+=yN(a,t,r,l,i)}else if(l=tCe(e),typeof l=="function")for(e=l.call(e),o=0;!(a=e.next()).done;)a=a.value,l=n+NR(a,o++),s+=yN(a,t,r,l,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Mk(e,t,r){if(e==null)return e;var n=[],i=0;return yN(e,n,"","",function(a){return t.call(r,a,i++)}),n}function iCe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ko={current:null},bN={transition:null},aCe={ReactCurrentDispatcher:Ko,ReactCurrentBatchConfig:bN,ReactCurrentOwner:_5};function mte(){throw Error("act(...) is not supported in production builds of React.")}Cn.Children={map:Mk,forEach:function(e,t,r){Mk(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Mk(e,function(){t++}),t},toArray:function(e){return Mk(e,function(t){return t})||[]},only:function(e){if(!N5(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Cn.Component=Fy;Cn.Fragment=qEe;Cn.Profiler=KEe;Cn.PureComponent=C5;Cn.StrictMode=GEe;Cn.Suspense=JEe;Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aCe;Cn.act=mte;Cn.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=cte({},e.props),i=e.key,a=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,s=_5.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)fte.call(t,l)&&!hte.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:uE,type:e.type,key:i,ref:a,props:n,_owner:s}};Cn.createContext=function(e){return e={$$typeof:YEe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:XEe,_context:e},e.Consumer=e};Cn.createElement=pte;Cn.createFactory=function(e){var t=pte.bind(null,e);return t.type=e,t};Cn.createRef=function(){return{current:null}};Cn.forwardRef=function(e){return{$$typeof:QEe,render:e}};Cn.isValidElement=N5;Cn.lazy=function(e){return{$$typeof:eCe,_payload:{_status:-1,_result:e},_init:iCe}};Cn.memo=function(e,t){return{$$typeof:ZEe,type:e,compare:t===void 0?null:t}};Cn.startTransition=function(e){var t=bN.transition;bN.transition={};try{e()}finally{bN.transition=t}};Cn.unstable_act=mte;Cn.useCallback=function(e,t){return Ko.current.useCallback(e,t)};Cn.useContext=function(e){return Ko.current.useContext(e)};Cn.useDebugValue=function(){};Cn.useDeferredValue=function(e){return Ko.current.useDeferredValue(e)};Cn.useEffect=function(e,t){return Ko.current.useEffect(e,t)};Cn.useId=function(){return Ko.current.useId()};Cn.useImperativeHandle=function(e,t,r){return Ko.current.useImperativeHandle(e,t,r)};Cn.useInsertionEffect=function(e,t){return Ko.current.useInsertionEffect(e,t)};Cn.useLayoutEffect=function(e,t){return Ko.current.useLayoutEffect(e,t)};Cn.useMemo=function(e,t){return Ko.current.useMemo(e,t)};Cn.useReducer=function(e,t,r){return Ko.current.useReducer(e,t,r)};Cn.useRef=function(e){return Ko.current.useRef(e)};Cn.useState=function(e){return Ko.current.useState(e)};Cn.useSyncExternalStore=function(e,t,r){return Ko.current.useSyncExternalStore(e,t,r)};Cn.useTransition=function(){return Ko.current.useTransition()};Cn.version="18.3.1";ote.exports=Cn;var I=ote.exports;const Hr=Bs(I),Hv=E5({__proto__:null,default:Hr},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sCe=I,oCe=Symbol.for("react.element"),lCe=Symbol.for("react.fragment"),cCe=Object.prototype.hasOwnProperty,uCe=sCe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dCe={key:!0,ref:!0,__self:!0,__source:!0};function gte(e,t,r){var n,i={},a=null,s=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)cCe.call(t,n)&&!dCe.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:oCe,type:e,key:a,ref:s,props:i,_owner:uCe.current}}mO.Fragment=lCe;mO.jsx=gte;mO.jsxs=gte;ste.exports=mO;var u=ste.exports,SM={},xte={exports:{}},fc={},vte={exports:{}},yte={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(X,Q){var fe=X.length;X.push(Q);e:for(;0<fe;){var ye=fe-1>>>1,J=X[ye];if(0<i(J,Q))X[ye]=Q,X[fe]=J,fe=ye;else break e}}function r(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var Q=X[0],fe=X.pop();if(fe!==Q){X[0]=fe;e:for(var ye=0,J=X.length,ce=J>>>1;ye<ce;){var V=2*(ye+1)-1,G=X[V],ie=V+1,Ee=X[ie];if(0>i(G,fe))ie<J&&0>i(Ee,G)?(X[ye]=Ee,X[ie]=fe,ye=ie):(X[ye]=G,X[V]=fe,ye=V);else if(ie<J&&0>i(Ee,fe))X[ye]=Ee,X[ie]=fe,ye=ie;else break e}}return Q}function i(X,Q){var fe=X.sortIndex-Q.sortIndex;return fe!==0?fe:X.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],c=[],d=1,f=null,p=3,m=!1,x=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(X){for(var Q=r(c);Q!==null;){if(Q.callback===null)n(c);else if(Q.startTime<=X)n(c),Q.sortIndex=Q.expirationTime,t(l,Q);else break;Q=r(c)}}function N(X){if(v=!1,E(X),!x)if(r(l)!==null)x=!0,Z(P);else{var Q=r(c);Q!==null&&re(N,Q.startTime-X)}}function P(X,Q){x=!1,v&&(v=!1,w(D),D=-1),m=!0;var fe=p;try{for(E(Q),f=r(l);f!==null&&(!(f.expirationTime>Q)||X&&!z());){var ye=f.callback;if(typeof ye=="function"){f.callback=null,p=f.priorityLevel;var J=ye(f.expirationTime<=Q);Q=e.unstable_now(),typeof J=="function"?f.callback=J:f===r(l)&&n(l),E(Q)}else n(l);f=r(l)}if(f!==null)var ce=!0;else{var V=r(c);V!==null&&re(N,V.startTime-Q),ce=!1}return ce}finally{f=null,p=fe,m=!1}}var R=!1,O=null,D=-1,L=5,B=-1;function z(){return!(e.unstable_now()-B<L)}function H(){if(O!==null){var X=e.unstable_now();B=X;var Q=!0;try{Q=O(!0,X)}finally{Q?te():(R=!1,O=null)}}else R=!1}var te;if(typeof k=="function")te=function(){k(H)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,W=Y.port2;Y.port1.onmessage=H,te=function(){W.postMessage(null)}}else te=function(){b(H,0)};function Z(X){O=X,R||(R=!0,te())}function re(X,Q){D=b(function(){X(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(X){X.callback=null},e.unstable_continueExecution=function(){x||m||(x=!0,Z(P))},e.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<X?Math.floor(1e3/X):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(X){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var fe=p;p=Q;try{return X()}finally{p=fe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(X,Q){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var fe=p;p=X;try{return Q()}finally{p=fe}},e.unstable_scheduleCallback=function(X,Q,fe){var ye=e.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?ye+fe:ye):fe=ye,X){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=fe+J,X={id:d++,callback:Q,priorityLevel:X,startTime:fe,expirationTime:J,sortIndex:-1},fe>ye?(X.sortIndex=fe,t(c,X),r(l)===null&&X===r(c)&&(v?(w(D),D=-1):v=!0,re(N,fe-ye))):(X.sortIndex=J,t(l,X),x||m||(x=!0,Z(P))),X},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(X){var Q=p;return function(){var fe=p;p=Q;try{return X.apply(this,arguments)}finally{p=fe}}}})(yte);vte.exports=yte;var fCe=vte.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hCe=I,oc=fCe;function jt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bte=new Set,z2={};function yx(e,t){Wv(e,t),Wv(e+"Capture",t)}function Wv(e,t){for(z2[e]=t,e=0;e<t.length;e++)bte.add(t[e])}var Nh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),EM=Object.prototype.hasOwnProperty,pCe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,UH={},$H={};function mCe(e){return EM.call($H,e)?!0:EM.call(UH,e)?!1:pCe.test(e)?$H[e]=!0:(UH[e]=!0,!1)}function gCe(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function xCe(e,t,r,n){if(t===null||typeof t>"u"||gCe(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Xo(e,t,r,n,i,a,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var Ls={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ls[e]=new Xo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ls[t]=new Xo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ls[e]=new Xo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ls[e]=new Xo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ls[e]=new Xo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ls[e]=new Xo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ls[e]=new Xo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ls[e]=new Xo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ls[e]=new Xo(e,5,!1,e.toLowerCase(),null,!1,!1)});var A5=/[\-:]([a-z])/g;function T5(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(A5,T5);Ls[t]=new Xo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(A5,T5);Ls[t]=new Xo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(A5,T5);Ls[t]=new Xo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ls[e]=new Xo(e,1,!1,e.toLowerCase(),null,!1,!1)});Ls.xlinkHref=new Xo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ls[e]=new Xo(e,1,!1,e.toLowerCase(),null,!0,!0)});function I5(e,t,r,n){var i=Ls.hasOwnProperty(t)?Ls[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(xCe(t,r,i,n)&&(r=null),n||i===null?mCe(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Gh=hCe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fk=Symbol.for("react.element"),G1=Symbol.for("react.portal"),K1=Symbol.for("react.fragment"),O5=Symbol.for("react.strict_mode"),CM=Symbol.for("react.profiler"),wte=Symbol.for("react.provider"),Ste=Symbol.for("react.context"),P5=Symbol.for("react.forward_ref"),kM=Symbol.for("react.suspense"),_M=Symbol.for("react.suspense_list"),R5=Symbol.for("react.memo"),Rp=Symbol.for("react.lazy"),Ete=Symbol.for("react.offscreen"),zH=Symbol.iterator;function Qb(e){return e===null||typeof e!="object"?null:(e=zH&&e[zH]||e["@@iterator"],typeof e=="function"?e:null)}var Hi=Object.assign,AR;function Mw(e){if(AR===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);AR=t&&t[1]||""}return`
`+AR+e}var TR=!1;function IR(e,t){if(!e||TR)return"";TR=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),a=n.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=o);break}}}finally{TR=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Mw(e):""}function vCe(e){switch(e.tag){case 5:return Mw(e.type);case 16:return Mw("Lazy");case 13:return Mw("Suspense");case 19:return Mw("SuspenseList");case 0:case 2:case 15:return e=IR(e.type,!1),e;case 11:return e=IR(e.type.render,!1),e;case 1:return e=IR(e.type,!0),e;default:return""}}function NM(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case K1:return"Fragment";case G1:return"Portal";case CM:return"Profiler";case O5:return"StrictMode";case kM:return"Suspense";case _M:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ste:return(e.displayName||"Context")+".Consumer";case wte:return(e._context.displayName||"Context")+".Provider";case P5:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case R5:return t=e.displayName||null,t!==null?t:NM(e.type)||"Memo";case Rp:t=e._payload,e=e._init;try{return NM(e(t))}catch{}}return null}function yCe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return NM(t);case 8:return t===O5?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function C0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Cte(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function bCe(e){var t=Cte(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,a.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Lk(e){e._valueTracker||(e._valueTracker=bCe(e))}function kte(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Cte(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function nA(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function AM(e,t){var r=t.checked;return Hi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function HH(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=C0(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _te(e,t){t=t.checked,t!=null&&I5(e,"checked",t,!1)}function TM(e,t){_te(e,t);var r=C0(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?IM(e,t.type,r):t.hasOwnProperty("defaultValue")&&IM(e,t.type,C0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function WH(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function IM(e,t,r){(t!=="number"||nA(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Fw=Array.isArray;function dv(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+C0(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function OM(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(jt(91));return Hi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function VH(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(jt(92));if(Fw(r)){if(1<r.length)throw Error(jt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:C0(r)}}function Nte(e,t){var r=C0(t.value),n=C0(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function qH(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ate(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function PM(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ate(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Bk,Tte=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Bk=Bk||document.createElement("div"),Bk.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Bk.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function H2(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var t2={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wCe=["Webkit","ms","Moz","O"];Object.keys(t2).forEach(function(e){wCe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),t2[t]=t2[e]})});function Ite(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||t2.hasOwnProperty(e)&&t2[e]?(""+t).trim():t+"px"}function Ote(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Ite(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var SCe=Hi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function RM(e,t){if(t){if(SCe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(jt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(jt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(jt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(jt(62))}}function jM(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var DM=null;function j5(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var MM=null,fv=null,hv=null;function GH(e){if(e=hE(e)){if(typeof MM!="function")throw Error(jt(280));var t=e.stateNode;t&&(t=bO(t),MM(e.stateNode,e.type,t))}}function Pte(e){fv?hv?hv.push(e):hv=[e]:fv=e}function Rte(){if(fv){var e=fv,t=hv;if(hv=fv=null,GH(e),t)for(e=0;e<t.length;e++)GH(t[e])}}function jte(e,t){return e(t)}function Dte(){}var OR=!1;function Mte(e,t,r){if(OR)return e(t,r);OR=!0;try{return jte(e,t,r)}finally{OR=!1,(fv!==null||hv!==null)&&(Dte(),Rte())}}function W2(e,t){var r=e.stateNode;if(r===null)return null;var n=bO(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(jt(231,t,typeof r));return r}var FM=!1;if(Nh)try{var Jb={};Object.defineProperty(Jb,"passive",{get:function(){FM=!0}}),window.addEventListener("test",Jb,Jb),window.removeEventListener("test",Jb,Jb)}catch{FM=!1}function ECe(e,t,r,n,i,a,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var r2=!1,iA=null,aA=!1,LM=null,CCe={onError:function(e){r2=!0,iA=e}};function kCe(e,t,r,n,i,a,s,o,l){r2=!1,iA=null,ECe.apply(CCe,arguments)}function _Ce(e,t,r,n,i,a,s,o,l){if(kCe.apply(this,arguments),r2){if(r2){var c=iA;r2=!1,iA=null}else throw Error(jt(198));aA||(aA=!0,LM=c)}}function bx(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Fte(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function KH(e){if(bx(e)!==e)throw Error(jt(188))}function NCe(e){var t=e.alternate;if(!t){if(t=bx(e),t===null)throw Error(jt(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return KH(i),e;if(a===n)return KH(i),t;a=a.sibling}throw Error(jt(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,o=i.child;o;){if(o===r){s=!0,r=i,n=a;break}if(o===n){s=!0,n=i,r=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===r){s=!0,r=a,n=i;break}if(o===n){s=!0,n=a,r=i;break}o=o.sibling}if(!s)throw Error(jt(189))}}if(r.alternate!==n)throw Error(jt(190))}if(r.tag!==3)throw Error(jt(188));return r.stateNode.current===r?e:t}function Lte(e){return e=NCe(e),e!==null?Bte(e):null}function Bte(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Bte(e);if(t!==null)return t;e=e.sibling}return null}var Ute=oc.unstable_scheduleCallback,XH=oc.unstable_cancelCallback,ACe=oc.unstable_shouldYield,TCe=oc.unstable_requestPaint,ma=oc.unstable_now,ICe=oc.unstable_getCurrentPriorityLevel,D5=oc.unstable_ImmediatePriority,$te=oc.unstable_UserBlockingPriority,sA=oc.unstable_NormalPriority,OCe=oc.unstable_LowPriority,zte=oc.unstable_IdlePriority,gO=null,Xd=null;function PCe(e){if(Xd&&typeof Xd.onCommitFiberRoot=="function")try{Xd.onCommitFiberRoot(gO,e,void 0,(e.current.flags&128)===128)}catch{}}var Yu=Math.clz32?Math.clz32:DCe,RCe=Math.log,jCe=Math.LN2;function DCe(e){return e>>>=0,e===0?32:31-(RCe(e)/jCe|0)|0}var Uk=64,$k=4194304;function Lw(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function oA(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,s=r&268435455;if(s!==0){var o=s&~i;o!==0?n=Lw(o):(a&=s,a!==0&&(n=Lw(a)))}else s=r&~i,s!==0?n=Lw(s):a!==0&&(n=Lw(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Yu(t),i=1<<r,n|=e[r],t&=~i;return n}function MCe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FCe(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-Yu(a),o=1<<s,l=i[s];l===-1?(!(o&r)||o&n)&&(i[s]=MCe(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}function BM(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Hte(){var e=Uk;return Uk<<=1,!(Uk&4194240)&&(Uk=64),e}function PR(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function dE(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Yu(t),e[t]=r}function LCe(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Yu(r),a=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~a}}function M5(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Yu(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var ri=0;function Wte(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Vte,F5,qte,Gte,Kte,UM=!1,zk=[],u0=null,d0=null,f0=null,V2=new Map,q2=new Map,$p=[],BCe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function YH(e,t){switch(e){case"focusin":case"focusout":u0=null;break;case"dragenter":case"dragleave":d0=null;break;case"mouseover":case"mouseout":f0=null;break;case"pointerover":case"pointerout":V2.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":q2.delete(t.pointerId)}}function Zb(e,t,r,n,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},t!==null&&(t=hE(t),t!==null&&F5(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function UCe(e,t,r,n,i){switch(t){case"focusin":return u0=Zb(u0,e,t,r,n,i),!0;case"dragenter":return d0=Zb(d0,e,t,r,n,i),!0;case"mouseover":return f0=Zb(f0,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return V2.set(a,Zb(V2.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,q2.set(a,Zb(q2.get(a)||null,e,t,r,n,i)),!0}return!1}function Xte(e){var t=Vm(e.target);if(t!==null){var r=bx(t);if(r!==null){if(t=r.tag,t===13){if(t=Fte(r),t!==null){e.blockedOn=t,Kte(e.priority,function(){qte(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wN(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=$M(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);DM=n,r.target.dispatchEvent(n),DM=null}else return t=hE(r),t!==null&&F5(t),e.blockedOn=r,!1;t.shift()}return!0}function QH(e,t,r){wN(e)&&r.delete(t)}function $Ce(){UM=!1,u0!==null&&wN(u0)&&(u0=null),d0!==null&&wN(d0)&&(d0=null),f0!==null&&wN(f0)&&(f0=null),V2.forEach(QH),q2.forEach(QH)}function ew(e,t){e.blockedOn===t&&(e.blockedOn=null,UM||(UM=!0,oc.unstable_scheduleCallback(oc.unstable_NormalPriority,$Ce)))}function G2(e){function t(i){return ew(i,e)}if(0<zk.length){ew(zk[0],e);for(var r=1;r<zk.length;r++){var n=zk[r];n.blockedOn===e&&(n.blockedOn=null)}}for(u0!==null&&ew(u0,e),d0!==null&&ew(d0,e),f0!==null&&ew(f0,e),V2.forEach(t),q2.forEach(t),r=0;r<$p.length;r++)n=$p[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<$p.length&&(r=$p[0],r.blockedOn===null);)Xte(r),r.blockedOn===null&&$p.shift()}var pv=Gh.ReactCurrentBatchConfig,lA=!0;function zCe(e,t,r,n){var i=ri,a=pv.transition;pv.transition=null;try{ri=1,L5(e,t,r,n)}finally{ri=i,pv.transition=a}}function HCe(e,t,r,n){var i=ri,a=pv.transition;pv.transition=null;try{ri=4,L5(e,t,r,n)}finally{ri=i,pv.transition=a}}function L5(e,t,r,n){if(lA){var i=$M(e,t,r,n);if(i===null)zR(e,t,n,cA,r),YH(e,n);else if(UCe(i,e,t,r,n))n.stopPropagation();else if(YH(e,n),t&4&&-1<BCe.indexOf(e)){for(;i!==null;){var a=hE(i);if(a!==null&&Vte(a),a=$M(e,t,r,n),a===null&&zR(e,t,n,cA,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else zR(e,t,n,null,r)}}var cA=null;function $M(e,t,r,n){if(cA=null,e=j5(n),e=Vm(e),e!==null)if(t=bx(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Fte(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return cA=e,null}function Yte(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ICe()){case D5:return 1;case $te:return 4;case sA:case OCe:return 16;case zte:return 536870912;default:return 16}default:return 16}}var r0=null,B5=null,SN=null;function Qte(){if(SN)return SN;var e,t=B5,r=t.length,n,i="value"in r0?r0.value:r0.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===i[a-n];n++);return SN=i.slice(e,1<n?1-n:void 0)}function EN(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Hk(){return!0}function JH(){return!1}function hc(e){function t(r,n,i,a,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Hk:JH,this.isPropagationStopped=JH,this}return Hi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Hk)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Hk)},persist:function(){},isPersistent:Hk}),t}var Ly={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},U5=hc(Ly),fE=Hi({},Ly,{view:0,detail:0}),WCe=hc(fE),RR,jR,tw,xO=Hi({},fE,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$5,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==tw&&(tw&&e.type==="mousemove"?(RR=e.screenX-tw.screenX,jR=e.screenY-tw.screenY):jR=RR=0,tw=e),RR)},movementY:function(e){return"movementY"in e?e.movementY:jR}}),ZH=hc(xO),VCe=Hi({},xO,{dataTransfer:0}),qCe=hc(VCe),GCe=Hi({},fE,{relatedTarget:0}),DR=hc(GCe),KCe=Hi({},Ly,{animationName:0,elapsedTime:0,pseudoElement:0}),XCe=hc(KCe),YCe=Hi({},Ly,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),QCe=hc(YCe),JCe=Hi({},Ly,{data:0}),eW=hc(JCe),ZCe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eke={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tke={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rke(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=tke[e])?!!t[e]:!1}function $5(){return rke}var nke=Hi({},fE,{key:function(e){if(e.key){var t=ZCe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=EN(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?eke[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$5,charCode:function(e){return e.type==="keypress"?EN(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?EN(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ike=hc(nke),ake=Hi({},xO,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tW=hc(ake),ske=Hi({},fE,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$5}),oke=hc(ske),lke=Hi({},Ly,{propertyName:0,elapsedTime:0,pseudoElement:0}),cke=hc(lke),uke=Hi({},xO,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),dke=hc(uke),fke=[9,13,27,32],z5=Nh&&"CompositionEvent"in window,n2=null;Nh&&"documentMode"in document&&(n2=document.documentMode);var hke=Nh&&"TextEvent"in window&&!n2,Jte=Nh&&(!z5||n2&&8<n2&&11>=n2),rW=" ",nW=!1;function Zte(e,t){switch(e){case"keyup":return fke.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ere(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var X1=!1;function pke(e,t){switch(e){case"compositionend":return ere(t);case"keypress":return t.which!==32?null:(nW=!0,rW);case"textInput":return e=t.data,e===rW&&nW?null:e;default:return null}}function mke(e,t){if(X1)return e==="compositionend"||!z5&&Zte(e,t)?(e=Qte(),SN=B5=r0=null,X1=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Jte&&t.locale!=="ko"?null:t.data;default:return null}}var gke={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iW(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!gke[e.type]:t==="textarea"}function tre(e,t,r,n){Pte(n),t=uA(t,"onChange"),0<t.length&&(r=new U5("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var i2=null,K2=null;function xke(e){fre(e,0)}function vO(e){var t=J1(e);if(kte(t))return e}function vke(e,t){if(e==="change")return t}var rre=!1;if(Nh){var MR;if(Nh){var FR="oninput"in document;if(!FR){var aW=document.createElement("div");aW.setAttribute("oninput","return;"),FR=typeof aW.oninput=="function"}MR=FR}else MR=!1;rre=MR&&(!document.documentMode||9<document.documentMode)}function sW(){i2&&(i2.detachEvent("onpropertychange",nre),K2=i2=null)}function nre(e){if(e.propertyName==="value"&&vO(K2)){var t=[];tre(t,K2,e,j5(e)),Mte(xke,t)}}function yke(e,t,r){e==="focusin"?(sW(),i2=t,K2=r,i2.attachEvent("onpropertychange",nre)):e==="focusout"&&sW()}function bke(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vO(K2)}function wke(e,t){if(e==="click")return vO(t)}function Ske(e,t){if(e==="input"||e==="change")return vO(t)}function Eke(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rd=typeof Object.is=="function"?Object.is:Eke;function X2(e,t){if(rd(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!EM.call(t,i)||!rd(e[i],t[i]))return!1}return!0}function oW(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lW(e,t){var r=oW(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=oW(r)}}function ire(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ire(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function are(){for(var e=window,t=nA();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=nA(e.document)}return t}function H5(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Cke(e){var t=are(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ire(r.ownerDocument.documentElement,r)){if(n!==null&&H5(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!e.extend&&a>n&&(i=n,n=a,a=i),i=lW(r,a);var s=lW(r,n);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var kke=Nh&&"documentMode"in document&&11>=document.documentMode,Y1=null,zM=null,a2=null,HM=!1;function cW(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;HM||Y1==null||Y1!==nA(n)||(n=Y1,"selectionStart"in n&&H5(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),a2&&X2(a2,n)||(a2=n,n=uA(zM,"onSelect"),0<n.length&&(t=new U5("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Y1)))}function Wk(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Q1={animationend:Wk("Animation","AnimationEnd"),animationiteration:Wk("Animation","AnimationIteration"),animationstart:Wk("Animation","AnimationStart"),transitionend:Wk("Transition","TransitionEnd")},LR={},sre={};Nh&&(sre=document.createElement("div").style,"AnimationEvent"in window||(delete Q1.animationend.animation,delete Q1.animationiteration.animation,delete Q1.animationstart.animation),"TransitionEvent"in window||delete Q1.transitionend.transition);function yO(e){if(LR[e])return LR[e];if(!Q1[e])return e;var t=Q1[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in sre)return LR[e]=t[r];return e}var ore=yO("animationend"),lre=yO("animationiteration"),cre=yO("animationstart"),ure=yO("transitionend"),dre=new Map,uW="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function B0(e,t){dre.set(e,t),yx(t,[e])}for(var BR=0;BR<uW.length;BR++){var UR=uW[BR],_ke=UR.toLowerCase(),Nke=UR[0].toUpperCase()+UR.slice(1);B0(_ke,"on"+Nke)}B0(ore,"onAnimationEnd");B0(lre,"onAnimationIteration");B0(cre,"onAnimationStart");B0("dblclick","onDoubleClick");B0("focusin","onFocus");B0("focusout","onBlur");B0(ure,"onTransitionEnd");Wv("onMouseEnter",["mouseout","mouseover"]);Wv("onMouseLeave",["mouseout","mouseover"]);Wv("onPointerEnter",["pointerout","pointerover"]);Wv("onPointerLeave",["pointerout","pointerover"]);yx("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yx("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yx("onBeforeInput",["compositionend","keypress","textInput","paste"]);yx("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yx("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yx("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bw="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ake=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bw));function dW(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,_Ce(n,t,void 0,e),e.currentTarget=null}function fre(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var s=n.length-1;0<=s;s--){var o=n[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;dW(i,o,c),a=l}else for(s=0;s<n.length;s++){if(o=n[s],l=o.instance,c=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;dW(i,o,c),a=l}}}if(aA)throw e=LM,aA=!1,LM=null,e}function xi(e,t){var r=t[KM];r===void 0&&(r=t[KM]=new Set);var n=e+"__bubble";r.has(n)||(hre(t,e,2,!1),r.add(n))}function $R(e,t,r){var n=0;t&&(n|=4),hre(r,e,n,t)}var Vk="_reactListening"+Math.random().toString(36).slice(2);function Y2(e){if(!e[Vk]){e[Vk]=!0,bte.forEach(function(r){r!=="selectionchange"&&(Ake.has(r)||$R(r,!1,e),$R(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Vk]||(t[Vk]=!0,$R("selectionchange",!1,t))}}function hre(e,t,r,n){switch(Yte(t)){case 1:var i=zCe;break;case 4:i=HCe;break;default:i=L5}r=i.bind(null,t,r,e),i=void 0,!FM||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function zR(e,t,r,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;o!==null;){if(s=Vm(o),s===null)return;if(l=s.tag,l===5||l===6){n=a=s;continue e}o=o.parentNode}}n=n.return}Mte(function(){var c=a,d=j5(r),f=[];e:{var p=dre.get(e);if(p!==void 0){var m=U5,x=e;switch(e){case"keypress":if(EN(r)===0)break e;case"keydown":case"keyup":m=ike;break;case"focusin":x="focus",m=DR;break;case"focusout":x="blur",m=DR;break;case"beforeblur":case"afterblur":m=DR;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=ZH;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=qCe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=oke;break;case ore:case lre:case cre:m=XCe;break;case ure:m=cke;break;case"scroll":m=WCe;break;case"wheel":m=dke;break;case"copy":case"cut":case"paste":m=QCe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=tW}var v=(t&4)!==0,b=!v&&e==="scroll",w=v?p!==null?p+"Capture":null:p;v=[];for(var k=c,E;k!==null;){E=k;var N=E.stateNode;if(E.tag===5&&N!==null&&(E=N,w!==null&&(N=W2(k,w),N!=null&&v.push(Q2(k,N,E)))),b)break;k=k.return}0<v.length&&(p=new m(p,x,null,r,d),f.push({event:p,listeners:v}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&r!==DM&&(x=r.relatedTarget||r.fromElement)&&(Vm(x)||x[Ah]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(x=r.relatedTarget||r.toElement,m=c,x=x?Vm(x):null,x!==null&&(b=bx(x),x!==b||x.tag!==5&&x.tag!==6)&&(x=null)):(m=null,x=c),m!==x)){if(v=ZH,N="onMouseLeave",w="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(v=tW,N="onPointerLeave",w="onPointerEnter",k="pointer"),b=m==null?p:J1(m),E=x==null?p:J1(x),p=new v(N,k+"leave",m,r,d),p.target=b,p.relatedTarget=E,N=null,Vm(d)===c&&(v=new v(w,k+"enter",x,r,d),v.target=E,v.relatedTarget=b,N=v),b=N,m&&x)t:{for(v=m,w=x,k=0,E=v;E;E=g1(E))k++;for(E=0,N=w;N;N=g1(N))E++;for(;0<k-E;)v=g1(v),k--;for(;0<E-k;)w=g1(w),E--;for(;k--;){if(v===w||w!==null&&v===w.alternate)break t;v=g1(v),w=g1(w)}v=null}else v=null;m!==null&&fW(f,p,m,v,!1),x!==null&&b!==null&&fW(f,b,x,v,!0)}}e:{if(p=c?J1(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var P=vke;else if(iW(p))if(rre)P=Ske;else{P=bke;var R=yke}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(P=wke);if(P&&(P=P(e,c))){tre(f,P,r,d);break e}R&&R(e,p,c),e==="focusout"&&(R=p._wrapperState)&&R.controlled&&p.type==="number"&&IM(p,"number",p.value)}switch(R=c?J1(c):window,e){case"focusin":(iW(R)||R.contentEditable==="true")&&(Y1=R,zM=c,a2=null);break;case"focusout":a2=zM=Y1=null;break;case"mousedown":HM=!0;break;case"contextmenu":case"mouseup":case"dragend":HM=!1,cW(f,r,d);break;case"selectionchange":if(kke)break;case"keydown":case"keyup":cW(f,r,d)}var O;if(z5)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else X1?Zte(e,r)&&(D="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(D="onCompositionStart");D&&(Jte&&r.locale!=="ko"&&(X1||D!=="onCompositionStart"?D==="onCompositionEnd"&&X1&&(O=Qte()):(r0=d,B5="value"in r0?r0.value:r0.textContent,X1=!0)),R=uA(c,D),0<R.length&&(D=new eW(D,e,null,r,d),f.push({event:D,listeners:R}),O?D.data=O:(O=ere(r),O!==null&&(D.data=O)))),(O=hke?pke(e,r):mke(e,r))&&(c=uA(c,"onBeforeInput"),0<c.length&&(d=new eW("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:c}),d.data=O))}fre(f,t)})}function Q2(e,t,r){return{instance:e,listener:t,currentTarget:r}}function uA(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=W2(e,r),a!=null&&n.unshift(Q2(e,a,i)),a=W2(e,t),a!=null&&n.push(Q2(e,a,i))),e=e.return}return n}function g1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function fW(e,t,r,n,i){for(var a=t._reactName,s=[];r!==null&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&c!==null&&(o=c,i?(l=W2(r,a),l!=null&&s.unshift(Q2(r,l,o))):i||(l=W2(r,a),l!=null&&s.push(Q2(r,l,o)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var Tke=/\r\n?/g,Ike=/\u0000|\uFFFD/g;function hW(e){return(typeof e=="string"?e:""+e).replace(Tke,`
`).replace(Ike,"")}function qk(e,t,r){if(t=hW(t),hW(e)!==t&&r)throw Error(jt(425))}function dA(){}var WM=null,VM=null;function qM(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var GM=typeof setTimeout=="function"?setTimeout:void 0,Oke=typeof clearTimeout=="function"?clearTimeout:void 0,pW=typeof Promise=="function"?Promise:void 0,Pke=typeof queueMicrotask=="function"?queueMicrotask:typeof pW<"u"?function(e){return pW.resolve(null).then(e).catch(Rke)}:GM;function Rke(e){setTimeout(function(){throw e})}function HR(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),G2(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);G2(t)}function h0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function mW(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var By=Math.random().toString(36).slice(2),$d="__reactFiber$"+By,J2="__reactProps$"+By,Ah="__reactContainer$"+By,KM="__reactEvents$"+By,jke="__reactListeners$"+By,Dke="__reactHandles$"+By;function Vm(e){var t=e[$d];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ah]||r[$d]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=mW(e);e!==null;){if(r=e[$d])return r;e=mW(e)}return t}e=r,r=e.parentNode}return null}function hE(e){return e=e[$d]||e[Ah],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function J1(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(jt(33))}function bO(e){return e[J2]||null}var XM=[],Z1=-1;function U0(e){return{current:e}}function Ei(e){0>Z1||(e.current=XM[Z1],XM[Z1]=null,Z1--)}function mi(e,t){Z1++,XM[Z1]=e.current,e.current=t}var k0={},po=U0(k0),ml=U0(!1),Lg=k0;function Vv(e,t){var r=e.type.contextTypes;if(!r)return k0;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function gl(e){return e=e.childContextTypes,e!=null}function fA(){Ei(ml),Ei(po)}function gW(e,t,r){if(po.current!==k0)throw Error(jt(168));mi(po,t),mi(ml,r)}function pre(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(jt(108,yCe(e)||"Unknown",i));return Hi({},r,n)}function hA(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||k0,Lg=po.current,mi(po,e),mi(ml,ml.current),!0}function xW(e,t,r){var n=e.stateNode;if(!n)throw Error(jt(169));r?(e=pre(e,t,Lg),n.__reactInternalMemoizedMergedChildContext=e,Ei(ml),Ei(po),mi(po,e)):Ei(ml),mi(ml,r)}var Jf=null,wO=!1,WR=!1;function mre(e){Jf===null?Jf=[e]:Jf.push(e)}function Mke(e){wO=!0,mre(e)}function $0(){if(!WR&&Jf!==null){WR=!0;var e=0,t=ri;try{var r=Jf;for(ri=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Jf=null,wO=!1}catch(i){throw Jf!==null&&(Jf=Jf.slice(e+1)),Ute(D5,$0),i}finally{ri=t,WR=!1}}return null}var ev=[],tv=0,pA=null,mA=0,Wc=[],Vc=0,Bg=null,sh=1,oh="";function Pm(e,t){ev[tv++]=mA,ev[tv++]=pA,pA=e,mA=t}function gre(e,t,r){Wc[Vc++]=sh,Wc[Vc++]=oh,Wc[Vc++]=Bg,Bg=e;var n=sh;e=oh;var i=32-Yu(n)-1;n&=~(1<<i),r+=1;var a=32-Yu(t)+i;if(30<a){var s=i-i%5;a=(n&(1<<s)-1).toString(32),n>>=s,i-=s,sh=1<<32-Yu(t)+i|r<<i|n,oh=a+e}else sh=1<<a|r<<i|n,oh=e}function W5(e){e.return!==null&&(Pm(e,1),gre(e,1,0))}function V5(e){for(;e===pA;)pA=ev[--tv],ev[tv]=null,mA=ev[--tv],ev[tv]=null;for(;e===Bg;)Bg=Wc[--Vc],Wc[Vc]=null,oh=Wc[--Vc],Wc[Vc]=null,sh=Wc[--Vc],Wc[Vc]=null}var tc=null,Jl=null,ji=!1,Uu=null;function xre(e,t){var r=Kc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function vW(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,tc=e,Jl=h0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,tc=e,Jl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Bg!==null?{id:sh,overflow:oh}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Kc(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,tc=e,Jl=null,!0):!1;default:return!1}}function YM(e){return(e.mode&1)!==0&&(e.flags&128)===0}function QM(e){if(ji){var t=Jl;if(t){var r=t;if(!vW(e,t)){if(YM(e))throw Error(jt(418));t=h0(r.nextSibling);var n=tc;t&&vW(e,t)?xre(n,r):(e.flags=e.flags&-4097|2,ji=!1,tc=e)}}else{if(YM(e))throw Error(jt(418));e.flags=e.flags&-4097|2,ji=!1,tc=e}}}function yW(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;tc=e}function Gk(e){if(e!==tc)return!1;if(!ji)return yW(e),ji=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!qM(e.type,e.memoizedProps)),t&&(t=Jl)){if(YM(e))throw vre(),Error(jt(418));for(;t;)xre(e,t),t=h0(t.nextSibling)}if(yW(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(jt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Jl=h0(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Jl=null}}else Jl=tc?h0(e.stateNode.nextSibling):null;return!0}function vre(){for(var e=Jl;e;)e=h0(e.nextSibling)}function qv(){Jl=tc=null,ji=!1}function q5(e){Uu===null?Uu=[e]:Uu.push(e)}var Fke=Gh.ReactCurrentBatchConfig;function rw(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(jt(309));var n=r.stateNode}if(!n)throw Error(jt(147,e));var i=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},t._stringRef=a,t)}if(typeof e!="string")throw Error(jt(284));if(!r._owner)throw Error(jt(290,e))}return e}function Kk(e,t){throw e=Object.prototype.toString.call(t),Error(jt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bW(e){var t=e._init;return t(e._payload)}function yre(e){function t(w,k){if(e){var E=w.deletions;E===null?(w.deletions=[k],w.flags|=16):E.push(k)}}function r(w,k){if(!e)return null;for(;k!==null;)t(w,k),k=k.sibling;return null}function n(w,k){for(w=new Map;k!==null;)k.key!==null?w.set(k.key,k):w.set(k.index,k),k=k.sibling;return w}function i(w,k){return w=x0(w,k),w.index=0,w.sibling=null,w}function a(w,k,E){return w.index=E,e?(E=w.alternate,E!==null?(E=E.index,E<k?(w.flags|=2,k):E):(w.flags|=2,k)):(w.flags|=1048576,k)}function s(w){return e&&w.alternate===null&&(w.flags|=2),w}function o(w,k,E,N){return k===null||k.tag!==6?(k=QR(E,w.mode,N),k.return=w,k):(k=i(k,E),k.return=w,k)}function l(w,k,E,N){var P=E.type;return P===K1?d(w,k,E.props.children,N,E.key):k!==null&&(k.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Rp&&bW(P)===k.type)?(N=i(k,E.props),N.ref=rw(w,k,E),N.return=w,N):(N=IN(E.type,E.key,E.props,null,w.mode,N),N.ref=rw(w,k,E),N.return=w,N)}function c(w,k,E,N){return k===null||k.tag!==4||k.stateNode.containerInfo!==E.containerInfo||k.stateNode.implementation!==E.implementation?(k=JR(E,w.mode,N),k.return=w,k):(k=i(k,E.children||[]),k.return=w,k)}function d(w,k,E,N,P){return k===null||k.tag!==7?(k=yg(E,w.mode,N,P),k.return=w,k):(k=i(k,E),k.return=w,k)}function f(w,k,E){if(typeof k=="string"&&k!==""||typeof k=="number")return k=QR(""+k,w.mode,E),k.return=w,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Fk:return E=IN(k.type,k.key,k.props,null,w.mode,E),E.ref=rw(w,null,k),E.return=w,E;case G1:return k=JR(k,w.mode,E),k.return=w,k;case Rp:var N=k._init;return f(w,N(k._payload),E)}if(Fw(k)||Qb(k))return k=yg(k,w.mode,E,null),k.return=w,k;Kk(w,k)}return null}function p(w,k,E,N){var P=k!==null?k.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return P!==null?null:o(w,k,""+E,N);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Fk:return E.key===P?l(w,k,E,N):null;case G1:return E.key===P?c(w,k,E,N):null;case Rp:return P=E._init,p(w,k,P(E._payload),N)}if(Fw(E)||Qb(E))return P!==null?null:d(w,k,E,N,null);Kk(w,E)}return null}function m(w,k,E,N,P){if(typeof N=="string"&&N!==""||typeof N=="number")return w=w.get(E)||null,o(k,w,""+N,P);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Fk:return w=w.get(N.key===null?E:N.key)||null,l(k,w,N,P);case G1:return w=w.get(N.key===null?E:N.key)||null,c(k,w,N,P);case Rp:var R=N._init;return m(w,k,E,R(N._payload),P)}if(Fw(N)||Qb(N))return w=w.get(E)||null,d(k,w,N,P,null);Kk(k,N)}return null}function x(w,k,E,N){for(var P=null,R=null,O=k,D=k=0,L=null;O!==null&&D<E.length;D++){O.index>D?(L=O,O=null):L=O.sibling;var B=p(w,O,E[D],N);if(B===null){O===null&&(O=L);break}e&&O&&B.alternate===null&&t(w,O),k=a(B,k,D),R===null?P=B:R.sibling=B,R=B,O=L}if(D===E.length)return r(w,O),ji&&Pm(w,D),P;if(O===null){for(;D<E.length;D++)O=f(w,E[D],N),O!==null&&(k=a(O,k,D),R===null?P=O:R.sibling=O,R=O);return ji&&Pm(w,D),P}for(O=n(w,O);D<E.length;D++)L=m(O,w,D,E[D],N),L!==null&&(e&&L.alternate!==null&&O.delete(L.key===null?D:L.key),k=a(L,k,D),R===null?P=L:R.sibling=L,R=L);return e&&O.forEach(function(z){return t(w,z)}),ji&&Pm(w,D),P}function v(w,k,E,N){var P=Qb(E);if(typeof P!="function")throw Error(jt(150));if(E=P.call(E),E==null)throw Error(jt(151));for(var R=P=null,O=k,D=k=0,L=null,B=E.next();O!==null&&!B.done;D++,B=E.next()){O.index>D?(L=O,O=null):L=O.sibling;var z=p(w,O,B.value,N);if(z===null){O===null&&(O=L);break}e&&O&&z.alternate===null&&t(w,O),k=a(z,k,D),R===null?P=z:R.sibling=z,R=z,O=L}if(B.done)return r(w,O),ji&&Pm(w,D),P;if(O===null){for(;!B.done;D++,B=E.next())B=f(w,B.value,N),B!==null&&(k=a(B,k,D),R===null?P=B:R.sibling=B,R=B);return ji&&Pm(w,D),P}for(O=n(w,O);!B.done;D++,B=E.next())B=m(O,w,D,B.value,N),B!==null&&(e&&B.alternate!==null&&O.delete(B.key===null?D:B.key),k=a(B,k,D),R===null?P=B:R.sibling=B,R=B);return e&&O.forEach(function(H){return t(w,H)}),ji&&Pm(w,D),P}function b(w,k,E,N){if(typeof E=="object"&&E!==null&&E.type===K1&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Fk:e:{for(var P=E.key,R=k;R!==null;){if(R.key===P){if(P=E.type,P===K1){if(R.tag===7){r(w,R.sibling),k=i(R,E.props.children),k.return=w,w=k;break e}}else if(R.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Rp&&bW(P)===R.type){r(w,R.sibling),k=i(R,E.props),k.ref=rw(w,R,E),k.return=w,w=k;break e}r(w,R);break}else t(w,R);R=R.sibling}E.type===K1?(k=yg(E.props.children,w.mode,N,E.key),k.return=w,w=k):(N=IN(E.type,E.key,E.props,null,w.mode,N),N.ref=rw(w,k,E),N.return=w,w=N)}return s(w);case G1:e:{for(R=E.key;k!==null;){if(k.key===R)if(k.tag===4&&k.stateNode.containerInfo===E.containerInfo&&k.stateNode.implementation===E.implementation){r(w,k.sibling),k=i(k,E.children||[]),k.return=w,w=k;break e}else{r(w,k);break}else t(w,k);k=k.sibling}k=JR(E,w.mode,N),k.return=w,w=k}return s(w);case Rp:return R=E._init,b(w,k,R(E._payload),N)}if(Fw(E))return x(w,k,E,N);if(Qb(E))return v(w,k,E,N);Kk(w,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,k!==null&&k.tag===6?(r(w,k.sibling),k=i(k,E),k.return=w,w=k):(r(w,k),k=QR(E,w.mode,N),k.return=w,w=k),s(w)):r(w,k)}return b}var Gv=yre(!0),bre=yre(!1),gA=U0(null),xA=null,rv=null,G5=null;function K5(){G5=rv=xA=null}function X5(e){var t=gA.current;Ei(gA),e._currentValue=t}function JM(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function mv(e,t){xA=e,G5=rv=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(fl=!0),e.firstContext=null)}function iu(e){var t=e._currentValue;if(G5!==e)if(e={context:e,memoizedValue:t,next:null},rv===null){if(xA===null)throw Error(jt(308));rv=e,xA.dependencies={lanes:0,firstContext:e}}else rv=rv.next=e;return t}var qm=null;function Y5(e){qm===null?qm=[e]:qm.push(e)}function wre(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,Y5(t)):(r.next=i.next,i.next=r),t.interleaved=r,Th(e,n)}function Th(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var jp=!1;function Q5(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sre(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function hh(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function p0(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,On&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Th(e,r)}return i=n.interleaved,i===null?(t.next=t,Y5(n)):(t.next=i.next,i.next=t),n.interleaved=t,Th(e,r)}function CN(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,M5(e,r)}}function wW(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=s:a=a.next=s,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function vA(e,t,r,n){var i=e.updateQueue;jp=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,s===null?a=c:s.next=c,s=l;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==s&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(a!==null){var f=i.baseState;s=0,d=c=l=null,o=a;do{var p=o.lane,m=o.eventTime;if((n&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var x=e,v=o;switch(p=t,m=r,v.tag){case 1:if(x=v.payload,typeof x=="function"){f=x.call(m,f,p);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=v.payload,p=typeof x=="function"?x.call(m,f,p):x,p==null)break e;f=Hi({},f,p);break e;case 2:jp=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,p=i.effects,p===null?i.effects=[o]:p.push(o))}else m={eventTime:m,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=m,l=f):d=d.next=m,s|=p;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;p=o,o=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);$g|=s,e.lanes=s,e.memoizedState=f}}function SW(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(jt(191,i));i.call(n)}}}var pE={},Yd=U0(pE),Z2=U0(pE),eS=U0(pE);function Gm(e){if(e===pE)throw Error(jt(174));return e}function J5(e,t){switch(mi(eS,t),mi(Z2,e),mi(Yd,pE),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:PM(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=PM(t,e)}Ei(Yd),mi(Yd,t)}function Kv(){Ei(Yd),Ei(Z2),Ei(eS)}function Ere(e){Gm(eS.current);var t=Gm(Yd.current),r=PM(t,e.type);t!==r&&(mi(Z2,e),mi(Yd,r))}function Z5(e){Z2.current===e&&(Ei(Yd),Ei(Z2))}var Bi=U0(0);function yA(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var VR=[];function eL(){for(var e=0;e<VR.length;e++)VR[e]._workInProgressVersionPrimary=null;VR.length=0}var kN=Gh.ReactCurrentDispatcher,qR=Gh.ReactCurrentBatchConfig,Ug=0,zi=null,Ua=null,cs=null,bA=!1,s2=!1,tS=0,Lke=0;function qs(){throw Error(jt(321))}function tL(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!rd(e[r],t[r]))return!1;return!0}function rL(e,t,r,n,i,a){if(Ug=a,zi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,kN.current=e===null||e.memoizedState===null?zke:Hke,e=r(n,i),s2){a=0;do{if(s2=!1,tS=0,25<=a)throw Error(jt(301));a+=1,cs=Ua=null,t.updateQueue=null,kN.current=Wke,e=r(n,i)}while(s2)}if(kN.current=wA,t=Ua!==null&&Ua.next!==null,Ug=0,cs=Ua=zi=null,bA=!1,t)throw Error(jt(300));return e}function nL(){var e=tS!==0;return tS=0,e}function Ad(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cs===null?zi.memoizedState=cs=e:cs=cs.next=e,cs}function au(){if(Ua===null){var e=zi.alternate;e=e!==null?e.memoizedState:null}else e=Ua.next;var t=cs===null?zi.memoizedState:cs.next;if(t!==null)cs=t,Ua=e;else{if(e===null)throw Error(jt(310));Ua=e,e={memoizedState:Ua.memoizedState,baseState:Ua.baseState,baseQueue:Ua.baseQueue,queue:Ua.queue,next:null},cs===null?zi.memoizedState=cs=e:cs=cs.next=e}return cs}function rS(e,t){return typeof t=="function"?t(e):t}function GR(e){var t=au(),r=t.queue;if(r===null)throw Error(jt(311));r.lastRenderedReducer=e;var n=Ua,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var o=s=null,l=null,c=a;do{var d=c.lane;if((Ug&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=f,s=n):l=l.next=f,zi.lanes|=d,$g|=d}c=c.next}while(c!==null&&c!==a);l===null?s=n:l.next=o,rd(n,t.memoizedState)||(fl=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do a=i.lane,zi.lanes|=a,$g|=a,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function KR(e){var t=au(),r=t.queue;if(r===null)throw Error(jt(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do a=e(a,s.action),s=s.next;while(s!==i);rd(a,t.memoizedState)||(fl=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function Cre(){}function kre(e,t){var r=zi,n=au(),i=t(),a=!rd(n.memoizedState,i);if(a&&(n.memoizedState=i,fl=!0),n=n.queue,iL(Are.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||cs!==null&&cs.memoizedState.tag&1){if(r.flags|=2048,nS(9,Nre.bind(null,r,n,i,t),void 0,null),ms===null)throw Error(jt(349));Ug&30||_re(r,t,i)}return i}function _re(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=zi.updateQueue,t===null?(t={lastEffect:null,stores:null},zi.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Nre(e,t,r,n){t.value=r,t.getSnapshot=n,Tre(t)&&Ire(e)}function Are(e,t,r){return r(function(){Tre(t)&&Ire(e)})}function Tre(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!rd(e,r)}catch{return!0}}function Ire(e){var t=Th(e,1);t!==null&&Qu(t,e,1,-1)}function EW(e){var t=Ad();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rS,lastRenderedState:e},t.queue=e,e=e.dispatch=$ke.bind(null,zi,e),[t.memoizedState,e]}function nS(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=zi.updateQueue,t===null?(t={lastEffect:null,stores:null},zi.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Ore(){return au().memoizedState}function _N(e,t,r,n){var i=Ad();zi.flags|=e,i.memoizedState=nS(1|t,r,void 0,n===void 0?null:n)}function SO(e,t,r,n){var i=au();n=n===void 0?null:n;var a=void 0;if(Ua!==null){var s=Ua.memoizedState;if(a=s.destroy,n!==null&&tL(n,s.deps)){i.memoizedState=nS(t,r,a,n);return}}zi.flags|=e,i.memoizedState=nS(1|t,r,a,n)}function CW(e,t){return _N(8390656,8,e,t)}function iL(e,t){return SO(2048,8,e,t)}function Pre(e,t){return SO(4,2,e,t)}function Rre(e,t){return SO(4,4,e,t)}function jre(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Dre(e,t,r){return r=r!=null?r.concat([e]):null,SO(4,4,jre.bind(null,t,e),r)}function aL(){}function Mre(e,t){var r=au();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&tL(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Fre(e,t){var r=au();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&tL(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Lre(e,t,r){return Ug&21?(rd(r,t)||(r=Hte(),zi.lanes|=r,$g|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,fl=!0),e.memoizedState=r)}function Bke(e,t){var r=ri;ri=r!==0&&4>r?r:4,e(!0);var n=qR.transition;qR.transition={};try{e(!1),t()}finally{ri=r,qR.transition=n}}function Bre(){return au().memoizedState}function Uke(e,t,r){var n=g0(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Ure(e))$re(t,r);else if(r=wre(e,t,r,n),r!==null){var i=zo();Qu(r,e,n,i),zre(r,t,n)}}function $ke(e,t,r){var n=g0(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ure(e))$re(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,o=a(s,r);if(i.hasEagerState=!0,i.eagerState=o,rd(o,s)){var l=t.interleaved;l===null?(i.next=i,Y5(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}r=wre(e,t,i,n),r!==null&&(i=zo(),Qu(r,e,n,i),zre(r,t,n))}}function Ure(e){var t=e.alternate;return e===zi||t!==null&&t===zi}function $re(e,t){s2=bA=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function zre(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,M5(e,r)}}var wA={readContext:iu,useCallback:qs,useContext:qs,useEffect:qs,useImperativeHandle:qs,useInsertionEffect:qs,useLayoutEffect:qs,useMemo:qs,useReducer:qs,useRef:qs,useState:qs,useDebugValue:qs,useDeferredValue:qs,useTransition:qs,useMutableSource:qs,useSyncExternalStore:qs,useId:qs,unstable_isNewReconciler:!1},zke={readContext:iu,useCallback:function(e,t){return Ad().memoizedState=[e,t===void 0?null:t],e},useContext:iu,useEffect:CW,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,_N(4194308,4,jre.bind(null,t,e),r)},useLayoutEffect:function(e,t){return _N(4194308,4,e,t)},useInsertionEffect:function(e,t){return _N(4,2,e,t)},useMemo:function(e,t){var r=Ad();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ad();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Uke.bind(null,zi,e),[n.memoizedState,e]},useRef:function(e){var t=Ad();return e={current:e},t.memoizedState=e},useState:EW,useDebugValue:aL,useDeferredValue:function(e){return Ad().memoizedState=e},useTransition:function(){var e=EW(!1),t=e[0];return e=Bke.bind(null,e[1]),Ad().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=zi,i=Ad();if(ji){if(r===void 0)throw Error(jt(407));r=r()}else{if(r=t(),ms===null)throw Error(jt(349));Ug&30||_re(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,CW(Are.bind(null,n,a,e),[e]),n.flags|=2048,nS(9,Nre.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=Ad(),t=ms.identifierPrefix;if(ji){var r=oh,n=sh;r=(n&~(1<<32-Yu(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=tS++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Lke++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Hke={readContext:iu,useCallback:Mre,useContext:iu,useEffect:iL,useImperativeHandle:Dre,useInsertionEffect:Pre,useLayoutEffect:Rre,useMemo:Fre,useReducer:GR,useRef:Ore,useState:function(){return GR(rS)},useDebugValue:aL,useDeferredValue:function(e){var t=au();return Lre(t,Ua.memoizedState,e)},useTransition:function(){var e=GR(rS)[0],t=au().memoizedState;return[e,t]},useMutableSource:Cre,useSyncExternalStore:kre,useId:Bre,unstable_isNewReconciler:!1},Wke={readContext:iu,useCallback:Mre,useContext:iu,useEffect:iL,useImperativeHandle:Dre,useInsertionEffect:Pre,useLayoutEffect:Rre,useMemo:Fre,useReducer:KR,useRef:Ore,useState:function(){return KR(rS)},useDebugValue:aL,useDeferredValue:function(e){var t=au();return Ua===null?t.memoizedState=e:Lre(t,Ua.memoizedState,e)},useTransition:function(){var e=KR(rS)[0],t=au().memoizedState;return[e,t]},useMutableSource:Cre,useSyncExternalStore:kre,useId:Bre,unstable_isNewReconciler:!1};function Du(e,t){if(e&&e.defaultProps){t=Hi({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ZM(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Hi({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var EO={isMounted:function(e){return(e=e._reactInternals)?bx(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=zo(),i=g0(e),a=hh(n,i);a.payload=t,r!=null&&(a.callback=r),t=p0(e,a,i),t!==null&&(Qu(t,e,i,n),CN(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=zo(),i=g0(e),a=hh(n,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=p0(e,a,i),t!==null&&(Qu(t,e,i,n),CN(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=zo(),n=g0(e),i=hh(r,n);i.tag=2,t!=null&&(i.callback=t),t=p0(e,i,n),t!==null&&(Qu(t,e,n,r),CN(t,e,n))}};function kW(e,t,r,n,i,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,s):t.prototype&&t.prototype.isPureReactComponent?!X2(r,n)||!X2(i,a):!0}function Hre(e,t,r){var n=!1,i=k0,a=t.contextType;return typeof a=="object"&&a!==null?a=iu(a):(i=gl(t)?Lg:po.current,n=t.contextTypes,a=(n=n!=null)?Vv(e,i):k0),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=EO,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function _W(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&EO.enqueueReplaceState(t,t.state,null)}function e6(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},Q5(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=iu(a):(a=gl(t)?Lg:po.current,i.context=Vv(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(ZM(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&EO.enqueueReplaceState(i,i.state,null),vA(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Xv(e,t){try{var r="",n=t;do r+=vCe(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function XR(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function t6(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Vke=typeof WeakMap=="function"?WeakMap:Map;function Wre(e,t,r){r=hh(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){EA||(EA=!0,d6=n),t6(e,t)},r}function Vre(e,t,r){r=hh(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){t6(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){t6(e,t),typeof n!="function"&&(m0===null?m0=new Set([this]):m0.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function NW(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Vke;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=a_e.bind(null,e,t,r),t.then(e,e))}function AW(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function TW(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=hh(-1,1),t.tag=2,p0(r,t,1))),r.lanes|=1),e)}var qke=Gh.ReactCurrentOwner,fl=!1;function Po(e,t,r,n){t.child=e===null?bre(t,null,r,n):Gv(t,e.child,r,n)}function IW(e,t,r,n,i){r=r.render;var a=t.ref;return mv(t,i),n=rL(e,t,r,n,a,i),r=nL(),e!==null&&!fl?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ih(e,t,i)):(ji&&r&&W5(t),t.flags|=1,Po(e,t,n,i),t.child)}function OW(e,t,r,n,i){if(e===null){var a=r.type;return typeof a=="function"&&!hL(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,qre(e,t,a,n,i)):(e=IN(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var s=a.memoizedProps;if(r=r.compare,r=r!==null?r:X2,r(s,n)&&e.ref===t.ref)return Ih(e,t,i)}return t.flags|=1,e=x0(a,n),e.ref=t.ref,e.return=t,t.child=e}function qre(e,t,r,n,i){if(e!==null){var a=e.memoizedProps;if(X2(a,n)&&e.ref===t.ref)if(fl=!1,t.pendingProps=n=a,(e.lanes&i)!==0)e.flags&131072&&(fl=!0);else return t.lanes=e.lanes,Ih(e,t,i)}return r6(e,t,r,n,i)}function Gre(e,t,r){var n=t.pendingProps,i=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},mi(iv,Wl),Wl|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,mi(iv,Wl),Wl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,mi(iv,Wl),Wl|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,mi(iv,Wl),Wl|=n;return Po(e,t,i,r),t.child}function Kre(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function r6(e,t,r,n,i){var a=gl(r)?Lg:po.current;return a=Vv(t,a),mv(t,i),r=rL(e,t,r,n,a,i),n=nL(),e!==null&&!fl?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ih(e,t,i)):(ji&&n&&W5(t),t.flags|=1,Po(e,t,r,i),t.child)}function PW(e,t,r,n,i){if(gl(r)){var a=!0;hA(t)}else a=!1;if(mv(t,i),t.stateNode===null)NN(e,t),Hre(t,r,n),e6(t,r,n,i),n=!0;else if(e===null){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=r.contextType;typeof c=="object"&&c!==null?c=iu(c):(c=gl(r)?Lg:po.current,c=Vv(t,c));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==n||l!==c)&&_W(t,s,n,c),jp=!1;var p=t.memoizedState;s.state=p,vA(t,n,s,i),l=t.memoizedState,o!==n||p!==l||ml.current||jp?(typeof d=="function"&&(ZM(t,r,d,n),l=t.memoizedState),(o=jp||kW(t,r,o,n,p,l,c))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),s.props=n,s.state=l,s.context=c,n=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,Sre(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:Du(t.type,o),s.props=c,f=t.pendingProps,p=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=iu(l):(l=gl(r)?Lg:po.current,l=Vv(t,l));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||p!==l)&&_W(t,s,n,l),jp=!1,p=t.memoizedState,s.state=p,vA(t,n,s,i);var x=t.memoizedState;o!==f||p!==x||ml.current||jp?(typeof m=="function"&&(ZM(t,r,m,n),x=t.memoizedState),(c=jp||kW(t,r,c,n,p,x,l)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,x,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,x,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=x),s.props=n,s.state=x,s.context=l,n=c):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return n6(e,t,r,n,a,i)}function n6(e,t,r,n,i,a){Kre(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return i&&xW(t,r,!1),Ih(e,t,a);n=t.stateNode,qke.current=t;var o=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=Gv(t,e.child,null,a),t.child=Gv(t,null,o,a)):Po(e,t,o,a),t.memoizedState=n.state,i&&xW(t,r,!0),t.child}function Xre(e){var t=e.stateNode;t.pendingContext?gW(e,t.pendingContext,t.pendingContext!==t.context):t.context&&gW(e,t.context,!1),J5(e,t.containerInfo)}function RW(e,t,r,n,i){return qv(),q5(i),t.flags|=256,Po(e,t,r,n),t.child}var i6={dehydrated:null,treeContext:null,retryLane:0};function a6(e){return{baseLanes:e,cachePool:null,transitions:null}}function Yre(e,t,r){var n=t.pendingProps,i=Bi.current,a=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),mi(Bi,i&1),e===null)return QM(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,a?(n=t.mode,a=t.child,s={mode:"hidden",children:s},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=_O(s,n,0,null),e=yg(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=a6(r),t.memoizedState=i6,e):sL(t,s));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Gke(e,t,s,n,o,i,r);if(a){a=n.fallback,s=t.mode,i=e.child,o=i.sibling;var l={mode:"hidden",children:n.children};return!(s&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=x0(i,l),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=x0(o,a):(a=yg(a,s,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,s=e.child.memoizedState,s=s===null?a6(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~r,t.memoizedState=i6,n}return a=e.child,e=a.sibling,n=x0(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function sL(e,t){return t=_O({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Xk(e,t,r,n){return n!==null&&q5(n),Gv(t,e.child,null,r),e=sL(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Gke(e,t,r,n,i,a,s){if(r)return t.flags&256?(t.flags&=-257,n=XR(Error(jt(422))),Xk(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=_O({mode:"visible",children:n.children},i,0,null),a=yg(a,i,s,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Gv(t,e.child,null,s),t.child.memoizedState=a6(s),t.memoizedState=i6,a);if(!(t.mode&1))return Xk(e,t,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,a=Error(jt(419)),n=XR(a,n,void 0),Xk(e,t,s,n)}if(o=(s&e.childLanes)!==0,fl||o){if(n=ms,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Th(e,i),Qu(n,e,i,-1))}return fL(),n=XR(Error(jt(421))),Xk(e,t,s,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=s_e.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Jl=h0(i.nextSibling),tc=t,ji=!0,Uu=null,e!==null&&(Wc[Vc++]=sh,Wc[Vc++]=oh,Wc[Vc++]=Bg,sh=e.id,oh=e.overflow,Bg=t),t=sL(t,n.children),t.flags|=4096,t)}function jW(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),JM(e.return,t,r)}function YR(e,t,r,n,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function Qre(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(Po(e,t,n.children,r),n=Bi.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jW(e,r,t);else if(e.tag===19)jW(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(mi(Bi,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&yA(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),YR(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&yA(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}YR(t,!0,r,null,a);break;case"together":YR(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function NN(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ih(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),$g|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(jt(153));if(t.child!==null){for(e=t.child,r=x0(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=x0(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Kke(e,t,r){switch(t.tag){case 3:Xre(t),qv();break;case 5:Ere(t);break;case 1:gl(t.type)&&hA(t);break;case 4:J5(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;mi(gA,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(mi(Bi,Bi.current&1),t.flags|=128,null):r&t.child.childLanes?Yre(e,t,r):(mi(Bi,Bi.current&1),e=Ih(e,t,r),e!==null?e.sibling:null);mi(Bi,Bi.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Qre(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),mi(Bi,Bi.current),n)break;return null;case 22:case 23:return t.lanes=0,Gre(e,t,r)}return Ih(e,t,r)}var Jre,s6,Zre,ene;Jre=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};s6=function(){};Zre=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Gm(Yd.current);var a=null;switch(r){case"input":i=AM(e,i),n=AM(e,n),a=[];break;case"select":i=Hi({},i,{value:void 0}),n=Hi({},n,{value:void 0}),a=[];break;case"textarea":i=OM(e,i),n=OM(e,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=dA)}RM(r,n);var s;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var o=i[c];for(s in o)o.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(z2.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in n){var l=n[c];if(o=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(a||(a=[]),a.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(z2.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&xi("scroll",e),a||o===l||(a=[])):(a=a||[]).push(c,l))}r&&(a=a||[]).push("style",r);var c=a;(t.updateQueue=c)&&(t.flags|=4)}};ene=function(e,t,r,n){r!==n&&(t.flags|=4)};function nw(e,t){if(!ji)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Gs(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Xke(e,t,r){var n=t.pendingProps;switch(V5(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:return gl(t.type)&&fA(),Gs(t),null;case 3:return n=t.stateNode,Kv(),Ei(ml),Ei(po),eL(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Gk(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Uu!==null&&(p6(Uu),Uu=null))),s6(e,t),Gs(t),null;case 5:Z5(t);var i=Gm(eS.current);if(r=t.type,e!==null&&t.stateNode!=null)Zre(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(jt(166));return Gs(t),null}if(e=Gm(Yd.current),Gk(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[$d]=t,n[J2]=a,e=(t.mode&1)!==0,r){case"dialog":xi("cancel",n),xi("close",n);break;case"iframe":case"object":case"embed":xi("load",n);break;case"video":case"audio":for(i=0;i<Bw.length;i++)xi(Bw[i],n);break;case"source":xi("error",n);break;case"img":case"image":case"link":xi("error",n),xi("load",n);break;case"details":xi("toggle",n);break;case"input":HH(n,a),xi("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},xi("invalid",n);break;case"textarea":VH(n,a),xi("invalid",n)}RM(r,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?n.textContent!==o&&(a.suppressHydrationWarning!==!0&&qk(n.textContent,o,e),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&qk(n.textContent,o,e),i=["children",""+o]):z2.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&xi("scroll",n)}switch(r){case"input":Lk(n),WH(n,a,!0);break;case"textarea":Lk(n),qH(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=dA)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ate(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[$d]=t,e[J2]=n,Jre(e,t,!1,!1),t.stateNode=e;e:{switch(s=jM(r,n),r){case"dialog":xi("cancel",e),xi("close",e),i=n;break;case"iframe":case"object":case"embed":xi("load",e),i=n;break;case"video":case"audio":for(i=0;i<Bw.length;i++)xi(Bw[i],e);i=n;break;case"source":xi("error",e),i=n;break;case"img":case"image":case"link":xi("error",e),xi("load",e),i=n;break;case"details":xi("toggle",e),i=n;break;case"input":HH(e,n),i=AM(e,n),xi("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Hi({},n,{value:void 0}),xi("invalid",e);break;case"textarea":VH(e,n),i=OM(e,n),xi("invalid",e);break;default:i=n}RM(r,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?Ote(e,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Tte(e,l)):a==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&H2(e,l):typeof l=="number"&&H2(e,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(z2.hasOwnProperty(a)?l!=null&&a==="onScroll"&&xi("scroll",e):l!=null&&I5(e,a,l,s))}switch(r){case"input":Lk(e),WH(e,n,!1);break;case"textarea":Lk(e),qH(e);break;case"option":n.value!=null&&e.setAttribute("value",""+C0(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?dv(e,!!n.multiple,a,!1):n.defaultValue!=null&&dv(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=dA)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&t.stateNode!=null)ene(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(jt(166));if(r=Gm(eS.current),Gm(Yd.current),Gk(t)){if(n=t.stateNode,r=t.memoizedProps,n[$d]=t,(a=n.nodeValue!==r)&&(e=tc,e!==null))switch(e.tag){case 3:qk(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&qk(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[$d]=t,t.stateNode=n}return Gs(t),null;case 13:if(Ei(Bi),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ji&&Jl!==null&&t.mode&1&&!(t.flags&128))vre(),qv(),t.flags|=98560,a=!1;else if(a=Gk(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(jt(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(jt(317));a[$d]=t}else qv(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Gs(t),a=!1}else Uu!==null&&(p6(Uu),Uu=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Bi.current&1?Wa===0&&(Wa=3):fL())),t.updateQueue!==null&&(t.flags|=4),Gs(t),null);case 4:return Kv(),s6(e,t),e===null&&Y2(t.stateNode.containerInfo),Gs(t),null;case 10:return X5(t.type._context),Gs(t),null;case 17:return gl(t.type)&&fA(),Gs(t),null;case 19:if(Ei(Bi),a=t.memoizedState,a===null)return Gs(t),null;if(n=(t.flags&128)!==0,s=a.rendering,s===null)if(n)nw(a,!1);else{if(Wa!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=yA(e),s!==null){for(t.flags|=128,nw(a,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return mi(Bi,Bi.current&1|2),t.child}e=e.sibling}a.tail!==null&&ma()>Yv&&(t.flags|=128,n=!0,nw(a,!1),t.lanes=4194304)}else{if(!n)if(e=yA(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),nw(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!ji)return Gs(t),null}else 2*ma()-a.renderingStartTime>Yv&&r!==1073741824&&(t.flags|=128,n=!0,nw(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(r=a.last,r!==null?r.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=ma(),t.sibling=null,r=Bi.current,mi(Bi,n?r&1|2:r&1),t):(Gs(t),null);case 22:case 23:return dL(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Wl&1073741824&&(Gs(t),t.subtreeFlags&6&&(t.flags|=8192)):Gs(t),null;case 24:return null;case 25:return null}throw Error(jt(156,t.tag))}function Yke(e,t){switch(V5(t),t.tag){case 1:return gl(t.type)&&fA(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Kv(),Ei(ml),Ei(po),eL(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Z5(t),null;case 13:if(Ei(Bi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(jt(340));qv()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ei(Bi),null;case 4:return Kv(),null;case 10:return X5(t.type._context),null;case 22:case 23:return dL(),null;case 24:return null;default:return null}}var Yk=!1,io=!1,Qke=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function nv(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Zi(e,t,n)}else r.current=null}function o6(e,t,r){try{r()}catch(n){Zi(e,t,n)}}var DW=!1;function Jke(e,t){if(WM=lA,e=are(),H5(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var s=0,o=-1,l=-1,c=0,d=0,f=e,p=null;t:for(;;){for(var m;f!==r||i!==0&&f.nodeType!==3||(o=s+i),f!==a||n!==0&&f.nodeType!==3||(l=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break t;if(p===r&&++c===i&&(o=s),p===a&&++d===n&&(l=s),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(VM={focusedElem:e,selectionRange:r},lA=!1,Yt=t;Yt!==null;)if(t=Yt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Yt=e;else for(;Yt!==null;){t=Yt;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var v=x.memoizedProps,b=x.memoizedState,w=t.stateNode,k=w.getSnapshotBeforeUpdate(t.elementType===t.type?v:Du(t.type,v),b);w.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var E=t.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(jt(163))}}catch(N){Zi(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,Yt=e;break}Yt=t.return}return x=DW,DW=!1,x}function o2(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&o6(t,r,a)}i=i.next}while(i!==n)}}function CO(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function l6(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function tne(e){var t=e.alternate;t!==null&&(e.alternate=null,tne(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[$d],delete t[J2],delete t[KM],delete t[jke],delete t[Dke])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rne(e){return e.tag===5||e.tag===3||e.tag===4}function MW(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||rne(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function c6(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=dA));else if(n!==4&&(e=e.child,e!==null))for(c6(e,t,r),e=e.sibling;e!==null;)c6(e,t,r),e=e.sibling}function u6(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(u6(e,t,r),e=e.sibling;e!==null;)u6(e,t,r),e=e.sibling}var As=null,Lu=!1;function yp(e,t,r){for(r=r.child;r!==null;)nne(e,t,r),r=r.sibling}function nne(e,t,r){if(Xd&&typeof Xd.onCommitFiberUnmount=="function")try{Xd.onCommitFiberUnmount(gO,r)}catch{}switch(r.tag){case 5:io||nv(r,t);case 6:var n=As,i=Lu;As=null,yp(e,t,r),As=n,Lu=i,As!==null&&(Lu?(e=As,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):As.removeChild(r.stateNode));break;case 18:As!==null&&(Lu?(e=As,r=r.stateNode,e.nodeType===8?HR(e.parentNode,r):e.nodeType===1&&HR(e,r),G2(e)):HR(As,r.stateNode));break;case 4:n=As,i=Lu,As=r.stateNode.containerInfo,Lu=!0,yp(e,t,r),As=n,Lu=i;break;case 0:case 11:case 14:case 15:if(!io&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&o6(r,t,s),i=i.next}while(i!==n)}yp(e,t,r);break;case 1:if(!io&&(nv(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Zi(r,t,o)}yp(e,t,r);break;case 21:yp(e,t,r);break;case 22:r.mode&1?(io=(n=io)||r.memoizedState!==null,yp(e,t,r),io=n):yp(e,t,r);break;default:yp(e,t,r)}}function FW(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Qke),t.forEach(function(n){var i=o_e.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Au(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,s=t,o=s;e:for(;o!==null;){switch(o.tag){case 5:As=o.stateNode,Lu=!1;break e;case 3:As=o.stateNode.containerInfo,Lu=!0;break e;case 4:As=o.stateNode.containerInfo,Lu=!0;break e}o=o.return}if(As===null)throw Error(jt(160));nne(a,s,i),As=null,Lu=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Zi(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ine(t,e),t=t.sibling}function ine(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Au(t,e),wd(e),n&4){try{o2(3,e,e.return),CO(3,e)}catch(v){Zi(e,e.return,v)}try{o2(5,e,e.return)}catch(v){Zi(e,e.return,v)}}break;case 1:Au(t,e),wd(e),n&512&&r!==null&&nv(r,r.return);break;case 5:if(Au(t,e),wd(e),n&512&&r!==null&&nv(r,r.return),e.flags&32){var i=e.stateNode;try{H2(i,"")}catch(v){Zi(e,e.return,v)}}if(n&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,s=r!==null?r.memoizedProps:a,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&_te(i,a),jM(o,s);var c=jM(o,a);for(s=0;s<l.length;s+=2){var d=l[s],f=l[s+1];d==="style"?Ote(i,f):d==="dangerouslySetInnerHTML"?Tte(i,f):d==="children"?H2(i,f):I5(i,d,f,c)}switch(o){case"input":TM(i,a);break;case"textarea":Nte(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?dv(i,!!a.multiple,m,!1):p!==!!a.multiple&&(a.defaultValue!=null?dv(i,!!a.multiple,a.defaultValue,!0):dv(i,!!a.multiple,a.multiple?[]:"",!1))}i[J2]=a}catch(v){Zi(e,e.return,v)}}break;case 6:if(Au(t,e),wd(e),n&4){if(e.stateNode===null)throw Error(jt(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(v){Zi(e,e.return,v)}}break;case 3:if(Au(t,e),wd(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{G2(t.containerInfo)}catch(v){Zi(e,e.return,v)}break;case 4:Au(t,e),wd(e);break;case 13:Au(t,e),wd(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(cL=ma())),n&4&&FW(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(io=(c=io)||d,Au(t,e),io=c):Au(t,e),wd(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(Yt=e,d=e.child;d!==null;){for(f=Yt=d;Yt!==null;){switch(p=Yt,m=p.child,p.tag){case 0:case 11:case 14:case 15:o2(4,p,p.return);break;case 1:nv(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(v){Zi(n,r,v)}}break;case 5:nv(p,p.return);break;case 22:if(p.memoizedState!==null){BW(f);continue}}m!==null?(m.return=p,Yt=m):BW(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=Ite("display",s))}catch(v){Zi(e,e.return,v)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){Zi(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Au(t,e),wd(e),n&4&&FW(e);break;case 21:break;default:Au(t,e),wd(e)}}function wd(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(rne(r)){var n=r;break e}r=r.return}throw Error(jt(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(H2(i,""),n.flags&=-33);var a=MW(e);u6(e,a,i);break;case 3:case 4:var s=n.stateNode.containerInfo,o=MW(e);c6(e,o,s);break;default:throw Error(jt(161))}}catch(l){Zi(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Zke(e,t,r){Yt=e,ane(e)}function ane(e,t,r){for(var n=(e.mode&1)!==0;Yt!==null;){var i=Yt,a=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||Yk;if(!s){var o=i.alternate,l=o!==null&&o.memoizedState!==null||io;o=Yk;var c=io;if(Yk=s,(io=l)&&!c)for(Yt=i;Yt!==null;)s=Yt,l=s.child,s.tag===22&&s.memoizedState!==null?UW(i):l!==null?(l.return=s,Yt=l):UW(i);for(;a!==null;)Yt=a,ane(a),a=a.sibling;Yt=i,Yk=o,io=c}LW(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Yt=a):LW(e)}}function LW(e){for(;Yt!==null;){var t=Yt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:io||CO(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!io)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Du(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&SW(t,a,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}SW(t,s,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&G2(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(jt(163))}io||t.flags&512&&l6(t)}catch(p){Zi(t,t.return,p)}}if(t===e){Yt=null;break}if(r=t.sibling,r!==null){r.return=t.return,Yt=r;break}Yt=t.return}}function BW(e){for(;Yt!==null;){var t=Yt;if(t===e){Yt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Yt=r;break}Yt=t.return}}function UW(e){for(;Yt!==null;){var t=Yt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{CO(4,t)}catch(l){Zi(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(l){Zi(t,i,l)}}var a=t.return;try{l6(t)}catch(l){Zi(t,a,l)}break;case 5:var s=t.return;try{l6(t)}catch(l){Zi(t,s,l)}}}catch(l){Zi(t,t.return,l)}if(t===e){Yt=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Yt=o;break}Yt=t.return}}var e_e=Math.ceil,SA=Gh.ReactCurrentDispatcher,oL=Gh.ReactCurrentOwner,Qc=Gh.ReactCurrentBatchConfig,On=0,ms=null,Ta=null,Fs=0,Wl=0,iv=U0(0),Wa=0,iS=null,$g=0,kO=0,lL=0,l2=null,ul=null,cL=0,Yv=1/0,Yf=null,EA=!1,d6=null,m0=null,Qk=!1,n0=null,CA=0,c2=0,f6=null,AN=-1,TN=0;function zo(){return On&6?ma():AN!==-1?AN:AN=ma()}function g0(e){return e.mode&1?On&2&&Fs!==0?Fs&-Fs:Fke.transition!==null?(TN===0&&(TN=Hte()),TN):(e=ri,e!==0||(e=window.event,e=e===void 0?16:Yte(e.type)),e):1}function Qu(e,t,r,n){if(50<c2)throw c2=0,f6=null,Error(jt(185));dE(e,r,n),(!(On&2)||e!==ms)&&(e===ms&&(!(On&2)&&(kO|=r),Wa===4&&zp(e,Fs)),xl(e,n),r===1&&On===0&&!(t.mode&1)&&(Yv=ma()+500,wO&&$0()))}function xl(e,t){var r=e.callbackNode;FCe(e,t);var n=oA(e,e===ms?Fs:0);if(n===0)r!==null&&XH(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&XH(r),t===1)e.tag===0?Mke($W.bind(null,e)):mre($W.bind(null,e)),Pke(function(){!(On&6)&&$0()}),r=null;else{switch(Wte(n)){case 1:r=D5;break;case 4:r=$te;break;case 16:r=sA;break;case 536870912:r=zte;break;default:r=sA}r=hne(r,sne.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function sne(e,t){if(AN=-1,TN=0,On&6)throw Error(jt(327));var r=e.callbackNode;if(gv()&&e.callbackNode!==r)return null;var n=oA(e,e===ms?Fs:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=kA(e,n);else{t=n;var i=On;On|=2;var a=lne();(ms!==e||Fs!==t)&&(Yf=null,Yv=ma()+500,vg(e,t));do try{n_e();break}catch(o){one(e,o)}while(!0);K5(),SA.current=a,On=i,Ta!==null?t=0:(ms=null,Fs=0,t=Wa)}if(t!==0){if(t===2&&(i=BM(e),i!==0&&(n=i,t=h6(e,i))),t===1)throw r=iS,vg(e,0),zp(e,n),xl(e,ma()),r;if(t===6)zp(e,n);else{if(i=e.current.alternate,!(n&30)&&!t_e(i)&&(t=kA(e,n),t===2&&(a=BM(e),a!==0&&(n=a,t=h6(e,a))),t===1))throw r=iS,vg(e,0),zp(e,n),xl(e,ma()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(jt(345));case 2:Rm(e,ul,Yf);break;case 3:if(zp(e,n),(n&130023424)===n&&(t=cL+500-ma(),10<t)){if(oA(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){zo(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=GM(Rm.bind(null,e,ul,Yf),t);break}Rm(e,ul,Yf);break;case 4:if(zp(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var s=31-Yu(n);a=1<<s,s=t[s],s>i&&(i=s),n&=~a}if(n=i,n=ma()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*e_e(n/1960))-n,10<n){e.timeoutHandle=GM(Rm.bind(null,e,ul,Yf),n);break}Rm(e,ul,Yf);break;case 5:Rm(e,ul,Yf);break;default:throw Error(jt(329))}}}return xl(e,ma()),e.callbackNode===r?sne.bind(null,e):null}function h6(e,t){var r=l2;return e.current.memoizedState.isDehydrated&&(vg(e,t).flags|=256),e=kA(e,t),e!==2&&(t=ul,ul=r,t!==null&&p6(t)),e}function p6(e){ul===null?ul=e:ul.push.apply(ul,e)}function t_e(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!rd(a(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zp(e,t){for(t&=~lL,t&=~kO,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Yu(t),n=1<<r;e[r]=-1,t&=~n}}function $W(e){if(On&6)throw Error(jt(327));gv();var t=oA(e,0);if(!(t&1))return xl(e,ma()),null;var r=kA(e,t);if(e.tag!==0&&r===2){var n=BM(e);n!==0&&(t=n,r=h6(e,n))}if(r===1)throw r=iS,vg(e,0),zp(e,t),xl(e,ma()),r;if(r===6)throw Error(jt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rm(e,ul,Yf),xl(e,ma()),null}function uL(e,t){var r=On;On|=1;try{return e(t)}finally{On=r,On===0&&(Yv=ma()+500,wO&&$0())}}function zg(e){n0!==null&&n0.tag===0&&!(On&6)&&gv();var t=On;On|=1;var r=Qc.transition,n=ri;try{if(Qc.transition=null,ri=1,e)return e()}finally{ri=n,Qc.transition=r,On=t,!(On&6)&&$0()}}function dL(){Wl=iv.current,Ei(iv)}function vg(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Oke(r)),Ta!==null)for(r=Ta.return;r!==null;){var n=r;switch(V5(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&fA();break;case 3:Kv(),Ei(ml),Ei(po),eL();break;case 5:Z5(n);break;case 4:Kv();break;case 13:Ei(Bi);break;case 19:Ei(Bi);break;case 10:X5(n.type._context);break;case 22:case 23:dL()}r=r.return}if(ms=e,Ta=e=x0(e.current,null),Fs=Wl=t,Wa=0,iS=null,lL=kO=$g=0,ul=l2=null,qm!==null){for(t=0;t<qm.length;t++)if(r=qm[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var s=a.next;a.next=i,n.next=s}r.pending=n}qm=null}return e}function one(e,t){do{var r=Ta;try{if(K5(),kN.current=wA,bA){for(var n=zi.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}bA=!1}if(Ug=0,cs=Ua=zi=null,s2=!1,tS=0,oL.current=null,r===null||r.return===null){Wa=1,iS=t,Ta=null;break}e:{var a=e,s=r.return,o=r,l=t;if(t=Fs,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=AW(s);if(m!==null){m.flags&=-257,TW(m,s,o,a,t),m.mode&1&&NW(a,c,t),t=m,l=c;var x=t.updateQueue;if(x===null){var v=new Set;v.add(l),t.updateQueue=v}else x.add(l);break e}else{if(!(t&1)){NW(a,c,t),fL();break e}l=Error(jt(426))}}else if(ji&&o.mode&1){var b=AW(s);if(b!==null){!(b.flags&65536)&&(b.flags|=256),TW(b,s,o,a,t),q5(Xv(l,o));break e}}a=l=Xv(l,o),Wa!==4&&(Wa=2),l2===null?l2=[a]:l2.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var w=Wre(a,l,t);wW(a,w);break e;case 1:o=l;var k=a.type,E=a.stateNode;if(!(a.flags&128)&&(typeof k.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(m0===null||!m0.has(E)))){a.flags|=65536,t&=-t,a.lanes|=t;var N=Vre(a,o,t);wW(a,N);break e}}a=a.return}while(a!==null)}une(r)}catch(P){t=P,Ta===r&&r!==null&&(Ta=r=r.return);continue}break}while(!0)}function lne(){var e=SA.current;return SA.current=wA,e===null?wA:e}function fL(){(Wa===0||Wa===3||Wa===2)&&(Wa=4),ms===null||!($g&268435455)&&!(kO&268435455)||zp(ms,Fs)}function kA(e,t){var r=On;On|=2;var n=lne();(ms!==e||Fs!==t)&&(Yf=null,vg(e,t));do try{r_e();break}catch(i){one(e,i)}while(!0);if(K5(),On=r,SA.current=n,Ta!==null)throw Error(jt(261));return ms=null,Fs=0,Wa}function r_e(){for(;Ta!==null;)cne(Ta)}function n_e(){for(;Ta!==null&&!ACe();)cne(Ta)}function cne(e){var t=fne(e.alternate,e,Wl);e.memoizedProps=e.pendingProps,t===null?une(e):Ta=t,oL.current=null}function une(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Yke(r,t),r!==null){r.flags&=32767,Ta=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Wa=6,Ta=null;return}}else if(r=Xke(r,t,Wl),r!==null){Ta=r;return}if(t=t.sibling,t!==null){Ta=t;return}Ta=t=e}while(t!==null);Wa===0&&(Wa=5)}function Rm(e,t,r){var n=ri,i=Qc.transition;try{Qc.transition=null,ri=1,i_e(e,t,r,n)}finally{Qc.transition=i,ri=n}return null}function i_e(e,t,r,n){do gv();while(n0!==null);if(On&6)throw Error(jt(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(jt(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(LCe(e,a),e===ms&&(Ta=ms=null,Fs=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Qk||(Qk=!0,hne(sA,function(){return gv(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Qc.transition,Qc.transition=null;var s=ri;ri=1;var o=On;On|=4,oL.current=null,Jke(e,r),ine(r,e),Cke(VM),lA=!!WM,VM=WM=null,e.current=r,Zke(r),TCe(),On=o,ri=s,Qc.transition=a}else e.current=r;if(Qk&&(Qk=!1,n0=e,CA=i),a=e.pendingLanes,a===0&&(m0=null),PCe(r.stateNode),xl(e,ma()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(EA)throw EA=!1,e=d6,d6=null,e;return CA&1&&e.tag!==0&&gv(),a=e.pendingLanes,a&1?e===f6?c2++:(c2=0,f6=e):c2=0,$0(),null}function gv(){if(n0!==null){var e=Wte(CA),t=Qc.transition,r=ri;try{if(Qc.transition=null,ri=16>e?16:e,n0===null)var n=!1;else{if(e=n0,n0=null,CA=0,On&6)throw Error(jt(331));var i=On;for(On|=4,Yt=e.current;Yt!==null;){var a=Yt,s=a.child;if(Yt.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(Yt=c;Yt!==null;){var d=Yt;switch(d.tag){case 0:case 11:case 15:o2(8,d,a)}var f=d.child;if(f!==null)f.return=d,Yt=f;else for(;Yt!==null;){d=Yt;var p=d.sibling,m=d.return;if(tne(d),d===c){Yt=null;break}if(p!==null){p.return=m,Yt=p;break}Yt=m}}}var x=a.alternate;if(x!==null){var v=x.child;if(v!==null){x.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}Yt=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,Yt=s;else e:for(;Yt!==null;){if(a=Yt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:o2(9,a,a.return)}var w=a.sibling;if(w!==null){w.return=a.return,Yt=w;break e}Yt=a.return}}var k=e.current;for(Yt=k;Yt!==null;){s=Yt;var E=s.child;if(s.subtreeFlags&2064&&E!==null)E.return=s,Yt=E;else e:for(s=k;Yt!==null;){if(o=Yt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:CO(9,o)}}catch(P){Zi(o,o.return,P)}if(o===s){Yt=null;break e}var N=o.sibling;if(N!==null){N.return=o.return,Yt=N;break e}Yt=o.return}}if(On=i,$0(),Xd&&typeof Xd.onPostCommitFiberRoot=="function")try{Xd.onPostCommitFiberRoot(gO,e)}catch{}n=!0}return n}finally{ri=r,Qc.transition=t}}return!1}function zW(e,t,r){t=Xv(r,t),t=Wre(e,t,1),e=p0(e,t,1),t=zo(),e!==null&&(dE(e,1,t),xl(e,t))}function Zi(e,t,r){if(e.tag===3)zW(e,e,r);else for(;t!==null;){if(t.tag===3){zW(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(m0===null||!m0.has(n))){e=Xv(r,e),e=Vre(t,e,1),t=p0(t,e,1),e=zo(),t!==null&&(dE(t,1,e),xl(t,e));break}}t=t.return}}function a_e(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=zo(),e.pingedLanes|=e.suspendedLanes&r,ms===e&&(Fs&r)===r&&(Wa===4||Wa===3&&(Fs&130023424)===Fs&&500>ma()-cL?vg(e,0):lL|=r),xl(e,t)}function dne(e,t){t===0&&(e.mode&1?(t=$k,$k<<=1,!($k&130023424)&&($k=4194304)):t=1);var r=zo();e=Th(e,t),e!==null&&(dE(e,t,r),xl(e,r))}function s_e(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),dne(e,r)}function o_e(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(jt(314))}n!==null&&n.delete(t),dne(e,r)}var fne;fne=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ml.current)fl=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return fl=!1,Kke(e,t,r);fl=!!(e.flags&131072)}else fl=!1,ji&&t.flags&1048576&&gre(t,mA,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;NN(e,t),e=t.pendingProps;var i=Vv(t,po.current);mv(t,r),i=rL(null,t,n,e,i,r);var a=nL();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,gl(n)?(a=!0,hA(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Q5(t),i.updater=EO,t.stateNode=i,i._reactInternals=t,e6(t,n,e,r),t=n6(null,t,n,!0,a,r)):(t.tag=0,ji&&a&&W5(t),Po(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(NN(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=c_e(n),e=Du(n,e),i){case 0:t=r6(null,t,n,e,r);break e;case 1:t=PW(null,t,n,e,r);break e;case 11:t=IW(null,t,n,e,r);break e;case 14:t=OW(null,t,n,Du(n.type,e),r);break e}throw Error(jt(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Du(n,i),r6(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Du(n,i),PW(e,t,n,i,r);case 3:e:{if(Xre(t),e===null)throw Error(jt(387));n=t.pendingProps,a=t.memoizedState,i=a.element,Sre(e,t),vA(t,n,null,r);var s=t.memoizedState;if(n=s.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Xv(Error(jt(423)),t),t=RW(e,t,n,r,i);break e}else if(n!==i){i=Xv(Error(jt(424)),t),t=RW(e,t,n,r,i);break e}else for(Jl=h0(t.stateNode.containerInfo.firstChild),tc=t,ji=!0,Uu=null,r=bre(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(qv(),n===i){t=Ih(e,t,r);break e}Po(e,t,n,r)}t=t.child}return t;case 5:return Ere(t),e===null&&QM(t),n=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,s=i.children,qM(n,i)?s=null:a!==null&&qM(n,a)&&(t.flags|=32),Kre(e,t),Po(e,t,s,r),t.child;case 6:return e===null&&QM(t),null;case 13:return Yre(e,t,r);case 4:return J5(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Gv(t,null,n,r):Po(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Du(n,i),IW(e,t,n,i,r);case 7:return Po(e,t,t.pendingProps,r),t.child;case 8:return Po(e,t,t.pendingProps.children,r),t.child;case 12:return Po(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,mi(gA,n._currentValue),n._currentValue=s,a!==null)if(rd(a.value,s)){if(a.children===i.children&&!ml.current){t=Ih(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(a.tag===1){l=hh(-1,r&-r),l.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),JM(a.return,r,t),o.lanes|=r;break}l=l.next}}else if(a.tag===10)s=a.type===t.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(jt(341));s.lanes|=r,o=s.alternate,o!==null&&(o.lanes|=r),JM(s,r,t),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Po(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,mv(t,r),i=iu(i),n=n(i),t.flags|=1,Po(e,t,n,r),t.child;case 14:return n=t.type,i=Du(n,t.pendingProps),i=Du(n.type,i),OW(e,t,n,i,r);case 15:return qre(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Du(n,i),NN(e,t),t.tag=1,gl(n)?(e=!0,hA(t)):e=!1,mv(t,r),Hre(t,n,i),e6(t,n,i,r),n6(null,t,n,!0,e,r);case 19:return Qre(e,t,r);case 22:return Gre(e,t,r)}throw Error(jt(156,t.tag))};function hne(e,t){return Ute(e,t)}function l_e(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kc(e,t,r,n){return new l_e(e,t,r,n)}function hL(e){return e=e.prototype,!(!e||!e.isReactComponent)}function c_e(e){if(typeof e=="function")return hL(e)?1:0;if(e!=null){if(e=e.$$typeof,e===P5)return 11;if(e===R5)return 14}return 2}function x0(e,t){var r=e.alternate;return r===null?(r=Kc(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function IN(e,t,r,n,i,a){var s=2;if(n=e,typeof e=="function")hL(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case K1:return yg(r.children,i,a,t);case O5:s=8,i|=8;break;case CM:return e=Kc(12,r,t,i|2),e.elementType=CM,e.lanes=a,e;case kM:return e=Kc(13,r,t,i),e.elementType=kM,e.lanes=a,e;case _M:return e=Kc(19,r,t,i),e.elementType=_M,e.lanes=a,e;case Ete:return _O(r,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case wte:s=10;break e;case Ste:s=9;break e;case P5:s=11;break e;case R5:s=14;break e;case Rp:s=16,n=null;break e}throw Error(jt(130,e==null?e:typeof e,""))}return t=Kc(s,r,t,i),t.elementType=e,t.type=n,t.lanes=a,t}function yg(e,t,r,n){return e=Kc(7,e,n,t),e.lanes=r,e}function _O(e,t,r,n){return e=Kc(22,e,n,t),e.elementType=Ete,e.lanes=r,e.stateNode={isHidden:!1},e}function QR(e,t,r){return e=Kc(6,e,null,t),e.lanes=r,e}function JR(e,t,r){return t=Kc(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function u_e(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=PR(0),this.expirationTimes=PR(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=PR(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function pL(e,t,r,n,i,a,s,o,l){return e=new u_e(e,t,r,o,l),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Kc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Q5(a),e}function d_e(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G1,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function pne(e){if(!e)return k0;e=e._reactInternals;e:{if(bx(e)!==e||e.tag!==1)throw Error(jt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(gl(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(jt(171))}if(e.tag===1){var r=e.type;if(gl(r))return pre(e,r,t)}return t}function mne(e,t,r,n,i,a,s,o,l){return e=pL(r,n,!0,e,i,a,s,o,l),e.context=pne(null),r=e.current,n=zo(),i=g0(r),a=hh(n,i),a.callback=t??null,p0(r,a,i),e.current.lanes=i,dE(e,i,n),xl(e,n),e}function NO(e,t,r,n){var i=t.current,a=zo(),s=g0(i);return r=pne(r),t.context===null?t.context=r:t.pendingContext=r,t=hh(a,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=p0(i,t,s),e!==null&&(Qu(e,i,s,a),CN(e,i,s)),s}function _A(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function HW(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function mL(e,t){HW(e,t),(e=e.alternate)&&HW(e,t)}function f_e(){return null}var gne=typeof reportError=="function"?reportError:function(e){console.error(e)};function gL(e){this._internalRoot=e}AO.prototype.render=gL.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(jt(409));NO(e,t,null,null)};AO.prototype.unmount=gL.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zg(function(){NO(null,e,null,null)}),t[Ah]=null}};function AO(e){this._internalRoot=e}AO.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gte();e={blockedOn:null,target:e,priority:t};for(var r=0;r<$p.length&&t!==0&&t<$p[r].priority;r++);$p.splice(r,0,e),r===0&&Xte(e)}};function xL(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function TO(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function WW(){}function h_e(e,t,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var c=_A(s);a.call(c)}}var s=mne(t,n,e,0,null,!1,!1,"",WW);return e._reactRootContainer=s,e[Ah]=s.current,Y2(e.nodeType===8?e.parentNode:e),zg(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var c=_A(l);o.call(c)}}var l=pL(e,0,!1,null,null,!1,!1,"",WW);return e._reactRootContainer=l,e[Ah]=l.current,Y2(e.nodeType===8?e.parentNode:e),zg(function(){NO(t,l,r,n)}),l}function IO(e,t,r,n,i){var a=r._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var l=_A(s);o.call(l)}}NO(t,s,e,i)}else s=h_e(r,t,e,i,n);return _A(s)}Vte=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Lw(t.pendingLanes);r!==0&&(M5(t,r|1),xl(t,ma()),!(On&6)&&(Yv=ma()+500,$0()))}break;case 13:zg(function(){var n=Th(e,1);if(n!==null){var i=zo();Qu(n,e,1,i)}}),mL(e,1)}};F5=function(e){if(e.tag===13){var t=Th(e,134217728);if(t!==null){var r=zo();Qu(t,e,134217728,r)}mL(e,134217728)}};qte=function(e){if(e.tag===13){var t=g0(e),r=Th(e,t);if(r!==null){var n=zo();Qu(r,e,t,n)}mL(e,t)}};Gte=function(){return ri};Kte=function(e,t){var r=ri;try{return ri=e,t()}finally{ri=r}};MM=function(e,t,r){switch(t){case"input":if(TM(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=bO(n);if(!i)throw Error(jt(90));kte(n),TM(n,i)}}}break;case"textarea":Nte(e,r);break;case"select":t=r.value,t!=null&&dv(e,!!r.multiple,t,!1)}};jte=uL;Dte=zg;var p_e={usingClientEntryPoint:!1,Events:[hE,J1,bO,Pte,Rte,uL]},iw={findFiberByHostInstance:Vm,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},m_e={bundleType:iw.bundleType,version:iw.version,rendererPackageName:iw.rendererPackageName,rendererConfig:iw.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gh.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Lte(e),e===null?null:e.stateNode},findFiberByHostInstance:iw.findFiberByHostInstance||f_e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jk.isDisabled&&Jk.supportsFiber)try{gO=Jk.inject(m_e),Xd=Jk}catch{}}fc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p_e;fc.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xL(t))throw Error(jt(200));return d_e(e,t,null,r)};fc.createRoot=function(e,t){if(!xL(e))throw Error(jt(299));var r=!1,n="",i=gne;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=pL(e,1,!1,null,null,r,!1,n,i),e[Ah]=t.current,Y2(e.nodeType===8?e.parentNode:e),new gL(t)};fc.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(jt(188)):(e=Object.keys(e).join(","),Error(jt(268,e)));return e=Lte(t),e=e===null?null:e.stateNode,e};fc.flushSync=function(e){return zg(e)};fc.hydrate=function(e,t,r){if(!TO(t))throw Error(jt(200));return IO(null,e,t,!0,r)};fc.hydrateRoot=function(e,t,r){if(!xL(e))throw Error(jt(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",s=gne;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=mne(t,null,e,1,r??null,i,!1,a,s),e[Ah]=t.current,Y2(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new AO(t)};fc.render=function(e,t,r){if(!TO(t))throw Error(jt(200));return IO(null,e,t,!1,r)};fc.unmountComponentAtNode=function(e){if(!TO(e))throw Error(jt(40));return e._reactRootContainer?(zg(function(){IO(null,null,e,!1,function(){e._reactRootContainer=null,e[Ah]=null})}),!0):!1};fc.unstable_batchedUpdates=uL;fc.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!TO(r))throw Error(jt(200));if(e==null||e._reactInternals===void 0)throw Error(jt(38));return IO(e,t,r,!1,n)};fc.version="18.3.1-next-f1338f8080-20240426";function xne(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xne)}catch(e){console.error(e)}}xne(),xte.exports=fc;var Il=xte.exports;const vL=Bs(Il),g_e=E5({__proto__:null,default:vL},[Il]);var VW=Il;SM.createRoot=VW.createRoot,SM.hydrateRoot=VW.hydrateRoot;/**
 * @remix-run/router v1.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bi(){return bi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bi.apply(this,arguments)}var fi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(fi||(fi={}));const qW="popstate";function vne(e){e===void 0&&(e={});let{initialEntries:t=["/"],initialIndex:r,v5Compat:n=!1}=e,i;i=t.map((m,x)=>d(m,typeof m=="string"?null:m.state,x===0?"default":void 0));let a=l(r??i.length-1),s=fi.Pop,o=null;function l(m){return Math.min(Math.max(m,0),i.length-1)}function c(){return i[a]}function d(m,x,v){x===void 0&&(x=null);let b=Hg(i?c().pathname:"/",m,x,v);return Oh(b.pathname.charAt(0)==="/","relative pathnames are not supported in memory history: "+JSON.stringify(m)),b}function f(m){return typeof m=="string"?m:nd(m)}return{get index(){return a},get action(){return s},get location(){return c()},createHref:f,createURL(m){return new URL(f(m),"http://localhost")},encodeLocation(m){let x=typeof m=="string"?hu(m):m;return{pathname:x.pathname||"",search:x.search||"",hash:x.hash||""}},push(m,x){s=fi.Push;let v=d(m,x);a+=1,i.splice(a,i.length,v),n&&o&&o({action:s,location:v,delta:1})},replace(m,x){s=fi.Replace;let v=d(m,x);i[a]=v,n&&o&&o({action:s,location:v,delta:0})},go(m){s=fi.Pop;let x=l(a+m),v=i[x];a=x,o&&o({action:s,location:v,delta:m})},listen(m){return o=m,()=>{o=null}}}}function yne(e){e===void 0&&(e={});function t(n,i){let{pathname:a,search:s,hash:o}=n.location;return Hg("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:nd(i)}return wne(t,r,null,e)}function bne(e){e===void 0&&(e={});function t(i,a){let{pathname:s="/",search:o="",hash:l=""}=hu(i.location.hash.substr(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),Hg("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(i,a){let s=i.document.querySelector("base"),o="";if(s&&s.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");o=c===-1?l:l.slice(0,c)}return o+"#"+(typeof a=="string"?a:nd(a))}function n(i,a){Oh(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return wne(t,r,n,e)}function Sr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Oh(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function x_e(){return Math.random().toString(36).substr(2,8)}function GW(e,t){return{usr:e.state,key:e.key,idx:t}}function Hg(e,t,r,n){return r===void 0&&(r=null),bi({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?hu(t):t,{state:r,key:t&&t.key||n||x_e()})}function nd(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function hu(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function wne(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,s=i.history,o=fi.Pop,l=null,c=d();c==null&&(c=0,s.replaceState(bi({},s.state,{idx:c}),""));function d(){return(s.state||{idx:null}).idx}function f(){o=fi.Pop;let b=d(),w=b==null?null:b-c;c=b,l&&l({action:o,location:v.location,delta:w})}function p(b,w){o=fi.Push;let k=Hg(v.location,b,w);r&&r(k,b),c=d()+1;let E=GW(k,c),N=v.createHref(k);try{s.pushState(E,"",N)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(N)}a&&l&&l({action:o,location:v.location,delta:1})}function m(b,w){o=fi.Replace;let k=Hg(v.location,b,w);r&&r(k,b),c=d();let E=GW(k,c),N=v.createHref(k);s.replaceState(E,"",N),a&&l&&l({action:o,location:v.location,delta:0})}function x(b){let w=i.location.origin!=="null"?i.location.origin:i.location.href,k=typeof b=="string"?b:nd(b);return k=k.replace(/ $/,"%20"),Sr(w,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,w)}let v={get action(){return o},get location(){return e(i,s)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(qW,f),l=b,()=>{i.removeEventListener(qW,f),l=null}},createHref(b){return t(i,b)},createURL:x,encodeLocation(b){let w=x(b);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:m,go(b){return s.go(b)}};return v}var Pi;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Pi||(Pi={}));const v_e=new Set(["lazy","caseSensitive","path","id","index","children"]);function y_e(e){return e.index===!0}function m6(e,t,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),e.map((i,a)=>{let s=[...r,a],o=typeof i.id=="string"?i.id:s.join("-");if(Sr(i.index!==!0||!i.children,"Cannot specify children on an index route"),Sr(!n[o],'Found a route id collision on id "'+o+`".  Route id's must be globally unique within Data Router usages`),y_e(i)){let l=bi({},i,t(i),{id:o});return n[o]=l,l}else{let l=bi({},i,t(i),{id:o,children:void 0});return n[o]=l,i.children&&(l.children=m6(i.children,t,s,n)),l}})}function Km(e,t,r){r===void 0&&(r="/");let n=typeof t=="string"?hu(t):t,i=_l(n.pathname||"/",r);if(i==null)return null;let a=Ene(e);b_e(a);let s=null;for(let o=0;s==null&&o<a.length;++o){let l=P_e(i);s=T_e(a[o],l)}return s}function Sne(e,t){let{route:r,pathname:n,params:i}=e;return{id:r.id,pathname:n,params:i,data:t[r.id],handle:r.handle}}function Ene(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(a,s,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};l.relativePath.startsWith("/")&&(Sr(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=Qd([n,l.relativePath]),d=r.concat(l);a.children&&a.children.length>0&&(Sr(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Ene(a.children,t,d,c)),!(a.path==null&&!a.index)&&t.push({path:c,score:N_e(c,a.index),routesMeta:d})};return e.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,s);else for(let l of Cne(a.path))i(a,s,l)}),t}function Cne(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let s=Cne(n.join("/")),o=[];return o.push(...s.map(l=>l===""?a:[a,l].join("/"))),i&&o.push(...s),o.map(l=>e.startsWith("/")&&l===""?"/":l)}function b_e(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:A_e(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const w_e=/^:[\w-]+$/,S_e=3,E_e=2,C_e=1,k_e=10,__e=-2,KW=e=>e==="*";function N_e(e,t){let r=e.split("/"),n=r.length;return r.some(KW)&&(n+=__e),t&&(n+=E_e),r.filter(i=>!KW(i)).reduce((i,a)=>i+(w_e.test(a)?S_e:a===""?C_e:k_e),n)}function A_e(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function T_e(e,t){let{routesMeta:r}=e,n={},i="/",a=[];for(let s=0;s<r.length;++s){let o=r[s],l=s===r.length-1,c=i==="/"?t:t.slice(i.length)||"/",d=aS({path:o.relativePath,caseSensitive:o.caseSensitive,end:l},c);if(!d)return null;Object.assign(n,d.params);let f=o.route;a.push({params:n,pathname:Qd([i,d.pathname]),pathnameBase:j_e(Qd([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=Qd([i,d.pathnameBase]))}return a}function I_e(e,t){t===void 0&&(t={});let r=e;r.endsWith("*")&&r!=="*"&&!r.endsWith("/*")&&(Oh(!1,'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".')),r=r.replace(/\*$/,"/*"));const n=r.startsWith("/")?"/":"",i=s=>s==null?"":typeof s=="string"?s:String(s),a=r.split(/\/+/).map((s,o,l)=>{if(o===l.length-1&&s==="*")return i(t["*"]);const d=s.match(/^:([\w-]+)(\??)$/);if(d){const[,f,p]=d;let m=t[f];return Sr(p==="?"||m!=null,'Missing ":'+f+'" param'),i(m)}return s.replace(/\?$/g,"")}).filter(s=>!!s);return n+a.join("/")}function aS(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=O_e(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((c,d,f)=>{let{paramName:p,isOptional:m}=d;if(p==="*"){let v=o[f]||"";s=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const x=o[f];return m&&!x?c[p]=void 0:c[p]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:s,pattern:e}}function O_e(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Oh(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function P_e(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Oh(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function _l(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function kne(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?hu(e):e;return{pathname:r?r.startsWith("/")?r:R_e(r,t):t,search:D_e(n),hash:M_e(i)}}function R_e(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function ZR(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _ne(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function OO(e,t){let r=_ne(e);return t?r.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function PO(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=hu(e):(i=bi({},e),Sr(!i.pathname||!i.pathname.includes("?"),ZR("?","pathname","search",i)),Sr(!i.pathname||!i.pathname.includes("#"),ZR("#","pathname","hash",i)),Sr(!i.search||!i.search.includes("#"),ZR("#","search","hash",i)));let a=e===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=r;else{let f=t.length-1;if(!n&&s.startsWith("..")){let p=s.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}o=f>=0?t[f]:"/"}let l=kne(i,o),c=s&&s!=="/"&&s.endsWith("/"),d=(a||s===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Qd=e=>e.join("/").replace(/\/\/+/g,"/"),j_e=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),D_e=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,M_e=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,F_e=function(t,r){r===void 0&&(r={});let n=typeof r=="number"?{status:r}:r,i=new Headers(n.headers);return i.has("Content-Type")||i.set("Content-Type","application/json; charset=utf-8"),new Response(JSON.stringify(t),bi({},n,{headers:i}))};class NA extends Error{}class L_e{constructor(t,r){this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],Sr(t&&typeof t=="object"&&!Array.isArray(t),"defer() only accepts plain objects");let n;this.abortPromise=new Promise((a,s)=>n=s),this.controller=new AbortController;let i=()=>n(new NA("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",i),this.controller.signal.addEventListener("abort",i),this.data=Object.entries(t).reduce((a,s)=>{let[o,l]=s;return Object.assign(a,{[o]:this.trackPromise(o,l)})},{}),this.done&&this.unlistenAbortSignal(),this.init=r}trackPromise(t,r){if(!(r instanceof Promise))return r;this.deferredKeys.push(t),this.pendingKeysSet.add(t);let n=Promise.race([r,this.abortPromise]).then(i=>this.onSettle(n,t,void 0,i),i=>this.onSettle(n,t,i));return n.catch(()=>{}),Object.defineProperty(n,"_tracked",{get:()=>!0}),n}onSettle(t,r,n,i){if(this.controller.signal.aborted&&n instanceof NA)return this.unlistenAbortSignal(),Object.defineProperty(t,"_error",{get:()=>n}),Promise.reject(n);if(this.pendingKeysSet.delete(r),this.done&&this.unlistenAbortSignal(),n===void 0&&i===void 0){let a=new Error('Deferred data for key "'+r+'" resolved/rejected with `undefined`, you must resolve/reject with a value or `null`.');return Object.defineProperty(t,"_error",{get:()=>a}),this.emit(!1,r),Promise.reject(a)}return i===void 0?(Object.defineProperty(t,"_error",{get:()=>n}),this.emit(!1,r),Promise.reject(n)):(Object.defineProperty(t,"_data",{get:()=>i}),this.emit(!1,r),i)}emit(t,r){this.subscribers.forEach(n=>n(t,r))}subscribe(t){return this.subscribers.add(t),()=>this.subscribers.delete(t)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach((t,r)=>this.pendingKeysSet.delete(r)),this.emit(!0)}async resolveData(t){let r=!1;if(!this.done){let n=()=>this.cancel();t.addEventListener("abort",n),r=await new Promise(i=>{this.subscribe(a=>{t.removeEventListener("abort",n),(a||this.done)&&i(a)})})}return r}get done(){return this.pendingKeysSet.size===0}get unwrappedData(){return Sr(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((t,r)=>{let[n,i]=r;return Object.assign(t,{[n]:U_e(i)})},{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}function B_e(e){return e instanceof Promise&&e._tracked===!0}function U_e(e){if(!B_e(e))return e;if(e._error)throw e._error;return e._data}const $_e=function(t,r){r===void 0&&(r={});let n=typeof r=="number"?{status:r}:r;return new L_e(t,n)},Nne=function(t,r){r===void 0&&(r=302);let n=r;typeof n=="number"?n={status:n}:typeof n.status>"u"&&(n.status=302);let i=new Headers(n.headers);return i.set("Location",t),new Response(null,bi({},n,{headers:i}))},z_e=(e,t)=>{let r=Nne(e,t);return r.headers.set("X-Remix-Reload-Document","true"),r};class RO{constructor(t,r,n,i){i===void 0&&(i=!1),this.status=t,this.statusText=r||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function jO(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Ane=["post","put","patch","delete"],H_e=new Set(Ane),W_e=["get",...Ane],V_e=new Set(W_e),q_e=new Set([301,302,303,307,308]),G_e=new Set([307,308]),ej={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Tne={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},L1={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},yL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,K_e=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),Ine="remix-router-transitions";function bL(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",n=!r;Sr(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(e.mapRouteProperties)i=e.mapRouteProperties;else if(e.detectErrorBoundary){let We=e.detectErrorBoundary;i=Je=>({hasErrorBoundary:We(Je)})}else i=K_e;let a={},s=m6(e.routes,i,void 0,a),o,l=e.basename||"/",c=e.unstable_dataStrategy||J_e,d=bi({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},e.future),f=null,p=new Set,m=null,x=null,v=null,b=e.hydrationData!=null,w=Km(s,e.history.location,l),k=null;if(w==null){let We=Uc(404,{pathname:e.history.location.pathname}),{matches:Je,route:rt}=iV(s);w=Je,k={[rt.id]:We}}let E,N=w.some(We=>We.route.lazy),P=w.some(We=>We.route.loader);if(N)E=!1;else if(!P)E=!0;else if(d.v7_partialHydration){let We=e.hydrationData?e.hydrationData.loaderData:null,Je=e.hydrationData?e.hydrationData.errors:null,rt=_t=>_t.route.loader?typeof _t.route.loader=="function"&&_t.route.loader.hydrate===!0?!1:We&&We[_t.route.id]!==void 0||Je&&Je[_t.route.id]!==void 0:!0;if(Je){let _t=w.findIndex(Ut=>Je[Ut.route.id]!==void 0);E=w.slice(0,_t+1).every(rt)}else E=w.every(rt)}else E=e.hydrationData!=null;let R,O={historyAction:e.history.action,location:e.history.location,matches:w,initialized:E,navigation:ej,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||k,fetchers:new Map,blockers:new Map},D=fi.Pop,L=!1,B,z=!1,H=new Map,te=null,Y=!1,W=!1,Z=[],re=[],X=new Map,Q=0,fe=-1,ye=new Map,J=new Set,ce=new Map,V=new Map,G=new Set,ie=new Map,Ee=new Map,ne=!1;function ae(){if(f=e.history.listen(We=>{let{action:Je,location:rt,delta:_t}=We;if(ne){ne=!1;return}Oh(Ee.size===0||_t!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ut=Pt({currentLocation:O.location,nextLocation:rt,historyAction:Je});if(Ut&&_t!=null){ne=!0,e.history.go(_t*-1),Dt(Ut,{state:"blocked",location:rt,proceed(){Dt(Ut,{state:"proceeding",proceed:void 0,reset:void 0,location:rt}),e.history.go(_t)},reset(){let ir=new Map(O.blockers);ir.set(Ut,L1),q({blockers:ir})}});return}return De(Je,rt)}),r){uNe(t,H);let We=()=>dNe(t,H);t.addEventListener("pagehide",We),te=()=>t.removeEventListener("pagehide",We)}return O.initialized||De(fi.Pop,O.location,{initialHydration:!0}),R}function me(){f&&f(),te&&te(),p.clear(),B&&B.abort(),O.fetchers.forEach((We,Je)=>qe(Je)),O.blockers.forEach((We,Je)=>xt(Je))}function ve(We){return p.add(We),()=>p.delete(We)}function q(We,Je){Je===void 0&&(Je={}),O=bi({},O,We);let rt=[],_t=[];d.v7_fetcherPersist&&O.fetchers.forEach((Ut,ir)=>{Ut.state==="idle"&&(G.has(ir)?_t.push(ir):rt.push(ir))}),[...p].forEach(Ut=>Ut(O,{deletedFetchers:_t,unstable_viewTransitionOpts:Je.viewTransitionOpts,unstable_flushSync:Je.flushSync===!0})),d.v7_fetcherPersist&&(rt.forEach(Ut=>O.fetchers.delete(Ut)),_t.forEach(Ut=>qe(Ut)))}function Ne(We,Je,rt){var _t,Ut;let{flushSync:ir}=rt===void 0?{}:rt,tr=O.actionData!=null&&O.navigation.formMethod!=null&&Bu(O.navigation.formMethod)&&O.navigation.state==="loading"&&((_t=We.state)==null?void 0:_t._isRedirect)!==!0,$t;Je.actionData?Object.keys(Je.actionData).length>0?$t=Je.actionData:$t=null:tr?$t=O.actionData:$t=null;let kr=Je.loaderData?rV(O.loaderData,Je.loaderData,Je.matches||[],Je.errors):O.loaderData,Jt=O.blockers;Jt.size>0&&(Jt=new Map(Jt),Jt.forEach((he,we)=>Jt.set(we,L1)));let Un=L===!0||O.navigation.formMethod!=null&&Bu(O.navigation.formMethod)&&((Ut=We.state)==null?void 0:Ut._isRedirect)!==!0;o&&(s=o,o=void 0),Y||D===fi.Pop||(D===fi.Push?e.history.push(We,We.state):D===fi.Replace&&e.history.replace(We,We.state));let de;if(D===fi.Pop){let he=H.get(O.location.pathname);he&&he.has(We.pathname)?de={currentLocation:O.location,nextLocation:We}:H.has(We.pathname)&&(de={currentLocation:We,nextLocation:O.location})}else if(z){let he=H.get(O.location.pathname);he?he.add(We.pathname):(he=new Set([We.pathname]),H.set(O.location.pathname,he)),de={currentLocation:O.location,nextLocation:We}}q(bi({},Je,{actionData:$t,loaderData:kr,historyAction:D,location:We,initialized:!0,navigation:ej,revalidation:"idle",restoreScrollPosition:jn(We,Je.matches||O.matches),preventScrollReset:Un,blockers:Jt}),{viewTransitionOpts:de,flushSync:ir===!0}),D=fi.Pop,L=!1,z=!1,Y=!1,W=!1,Z=[],re=[]}async function Pe(We,Je){if(typeof We=="number"){e.history.go(We);return}let rt=g6(O.location,O.matches,l,d.v7_prependBasename,We,d.v7_relativeSplatPath,Je==null?void 0:Je.fromRouteId,Je==null?void 0:Je.relative),{path:_t,submission:Ut,error:ir}=XW(d.v7_normalizeFormMethod,!1,rt,Je),tr=O.location,$t=Hg(O.location,_t,Je&&Je.state);$t=bi({},$t,e.history.encodeLocation($t));let kr=Je&&Je.replace!=null?Je.replace:void 0,Jt=fi.Push;kr===!0?Jt=fi.Replace:kr===!1||Ut!=null&&Bu(Ut.formMethod)&&Ut.formAction===O.location.pathname+O.location.search&&(Jt=fi.Replace);let Un=Je&&"preventScrollReset"in Je?Je.preventScrollReset===!0:void 0,de=(Je&&Je.unstable_flushSync)===!0,he=Pt({currentLocation:tr,nextLocation:$t,historyAction:Jt});if(he){Dt(he,{state:"blocked",location:$t,proceed(){Dt(he,{state:"proceeding",proceed:void 0,reset:void 0,location:$t}),Pe(We,Je)},reset(){let we=new Map(O.blockers);we.set(he,L1),q({blockers:we})}});return}return await De(Jt,$t,{submission:Ut,pendingError:ir,preventScrollReset:Un,replace:Je&&Je.replace,enableViewTransition:Je&&Je.unstable_viewTransition,flushSync:de})}function ze(){if(qt(),q({revalidation:"loading"}),O.navigation.state!=="submitting"){if(O.navigation.state==="idle"){De(O.historyAction,O.location,{startUninterruptedRevalidation:!0});return}De(D||O.historyAction,O.navigation.location,{overrideNavigation:O.navigation})}}async function De(We,Je,rt){B&&B.abort(),B=null,D=We,Y=(rt&&rt.startUninterruptedRevalidation)===!0,Vi(O.location,O.matches),L=(rt&&rt.preventScrollReset)===!0,z=(rt&&rt.enableViewTransition)===!0;let _t=o||s,Ut=rt&&rt.overrideNavigation,ir=Km(_t,Je,l),tr=(rt&&rt.flushSync)===!0;if(!ir){let he=Uc(404,{pathname:Je.pathname}),{matches:we,route:_e}=iV(_t);Cr(),Ne(Je,{matches:we,loaderData:{},errors:{[_e.id]:he}},{flushSync:tr});return}if(O.initialized&&!W&&iNe(O.location,Je)&&!(rt&&rt.submission&&Bu(rt.submission.formMethod))){Ne(Je,{matches:ir},{flushSync:tr});return}B=new AbortController;let $t=x1(e.history,Je,B.signal,rt&&rt.submission),kr;if(rt&&rt.pendingError)kr=[u2(ir).route.id,{type:Pi.error,error:rt.pendingError}];else if(rt&&rt.submission&&Bu(rt.submission.formMethod)){let he=await $e($t,Je,rt.submission,ir,{replace:rt.replace,flushSync:tr});if(he.shortCircuited)return;kr=he.pendingActionResult,Ut=tj(Je,rt.submission),tr=!1,$t=x1(e.history,$t.url,$t.signal)}let{shortCircuited:Jt,loaderData:Un,errors:de}=await et($t,Je,ir,Ut,rt&&rt.submission,rt&&rt.fetcherSubmission,rt&&rt.replace,rt&&rt.initialHydration===!0,tr,kr);Jt||(B=null,Ne(Je,bi({matches:ir},nV(kr),{loaderData:Un,errors:de})))}async function $e(We,Je,rt,_t,Ut){Ut===void 0&&(Ut={}),qt();let ir=lNe(Je,rt);q({navigation:ir},{flushSync:Ut.flushSync===!0});let tr,$t=v6(_t,Je);if(!$t.route.action&&!$t.route.lazy)tr={type:Pi.error,error:Uc(405,{method:We.method,pathname:Je.pathname,routeId:$t.route.id})};else if(tr=(await er("action",We,[$t],_t))[0],We.signal.aborted)return{shortCircuited:!0};if(Ym(tr)){let kr;return Ut&&Ut.replace!=null?kr=Ut.replace:kr=ZW(tr.response.headers.get("Location"),new URL(We.url),l)===O.location.pathname+O.location.search,await Rr(We,tr,{submission:rt,replace:kr}),{shortCircuited:!0}}if(Xm(tr))throw Uc(400,{type:"defer-action"});if(qc(tr)){let kr=u2(_t,$t.route.id);return(Ut&&Ut.replace)!==!0&&(D=fi.Push),{pendingActionResult:[kr.route.id,tr]}}return{pendingActionResult:[$t.route.id,tr]}}async function et(We,Je,rt,_t,Ut,ir,tr,$t,kr,Jt){let Un=_t||tj(Je,Ut),de=Ut||ir||oV(Un),he=o||s,[we,_e]=YW(e.history,O,rt,de,Je,d.v7_partialHydration&&$t===!0,d.unstable_skipActionErrorRevalidation,W,Z,re,G,ce,J,he,l,Jt);if(Cr(dt=>!(rt&&rt.some(St=>St.route.id===dt))||we&&we.some(St=>St.route.id===dt)),fe=++Q,we.length===0&&_e.length===0){let dt=je();return Ne(Je,bi({matches:rt,loaderData:{},errors:Jt&&qc(Jt[1])?{[Jt[0]]:Jt[1].error}:null},nV(Jt),dt?{fetchers:new Map(O.fetchers)}:{}),{flushSync:kr}),{shortCircuited:!0}}if(!Y&&(!d.v7_partialHydration||!$t)){_e.forEach(St=>{let Ot=O.fetchers.get(St.key),Kt=aw(void 0,Ot?Ot.data:void 0);O.fetchers.set(St.key,Kt)});let dt;Jt&&!qc(Jt[1])?dt={[Jt[0]]:Jt[1].data}:O.actionData&&(Object.keys(O.actionData).length===0?dt=null:dt=O.actionData),q(bi({navigation:Un},dt!==void 0?{actionData:dt}:{},_e.length>0?{fetchers:new Map(O.fetchers)}:{}),{flushSync:kr})}_e.forEach(dt=>{X.has(dt.key)&&Te(dt.key),dt.controller&&X.set(dt.key,dt.controller)});let pe=()=>_e.forEach(dt=>Te(dt.key));B&&B.signal.addEventListener("abort",pe);let{loaderResults:ge,fetcherResults:Fe}=await ct(O.matches,rt,we,_e,We);if(We.signal.aborted)return{shortCircuited:!0};B&&B.signal.removeEventListener("abort",pe),_e.forEach(dt=>X.delete(dt.key));let it=aV([...ge,...Fe]);if(it){if(it.idx>=we.length){let dt=_e[it.idx-we.length].key;J.add(dt)}return await Rr(We,it.result,{replace:tr}),{shortCircuited:!0}}let{loaderData:Ge,errors:Ye}=tV(O,rt,we,ge,Jt,_e,Fe,ie);ie.forEach((dt,St)=>{dt.subscribe(Ot=>{(Ot||dt.done)&&ie.delete(St)})}),d.v7_partialHydration&&$t&&O.errors&&Object.entries(O.errors).filter(dt=>{let[St]=dt;return!we.some(Ot=>Ot.route.id===St)}).forEach(dt=>{let[St,Ot]=dt;Ye=Object.assign(Ye||{},{[St]:Ot})});let Ze=je(),wt=Ce(fe),At=Ze||wt||_e.length>0;return bi({loaderData:Ge,errors:Ye},At?{fetchers:new Map(O.fetchers)}:{})}function ut(We,Je,rt,_t){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");X.has(We)&&Te(We);let Ut=(_t&&_t.unstable_flushSync)===!0,ir=o||s,tr=g6(O.location,O.matches,l,d.v7_prependBasename,rt,d.v7_relativeSplatPath,Je,_t==null?void 0:_t.relative),$t=Km(ir,tr,l);if(!$t){dr(We,Je,Uc(404,{pathname:tr}),{flushSync:Ut});return}let{path:kr,submission:Jt,error:Un}=XW(d.v7_normalizeFormMethod,!0,tr,_t);if(Un){dr(We,Je,Un,{flushSync:Ut});return}let de=v6($t,kr);if(L=(_t&&_t.preventScrollReset)===!0,Jt&&Bu(Jt.formMethod)){kt(We,Je,kr,de,$t,Ut,Jt);return}ce.set(We,{routeId:Je,path:kr}),ht(We,Je,kr,de,$t,Ut,Jt)}async function kt(We,Je,rt,_t,Ut,ir,tr){if(qt(),ce.delete(We),!_t.route.action&&!_t.route.lazy){let Kt=Uc(405,{method:tr.formMethod,pathname:rt,routeId:Je});dr(We,Je,Kt,{flushSync:ir});return}let $t=O.fetchers.get(We);Lt(We,cNe(tr,$t),{flushSync:ir});let kr=new AbortController,Jt=x1(e.history,rt,kr.signal,tr);X.set(We,kr);let Un=Q,he=(await er("action",Jt,[_t],Ut))[0];if(Jt.signal.aborted){X.get(We)===kr&&X.delete(We);return}if(d.v7_fetcherPersist&&G.has(We)){if(Ym(he)||qc(he)){Lt(We,Ap(void 0));return}}else{if(Ym(he))if(X.delete(We),fe>Un){Lt(We,Ap(void 0));return}else return J.add(We),Lt(We,aw(tr)),Rr(Jt,he,{fetcherSubmission:tr});if(qc(he)){dr(We,Je,he.error);return}}if(Xm(he))throw Uc(400,{type:"defer-action"});let we=O.navigation.location||O.location,_e=x1(e.history,we,kr.signal),pe=o||s,ge=O.navigation.state!=="idle"?Km(pe,O.navigation.location,l):O.matches;Sr(ge,"Didn't find any matches after fetcher action");let Fe=++Q;ye.set(We,Fe);let it=aw(tr,he.data);O.fetchers.set(We,it);let[Ge,Ye]=YW(e.history,O,ge,tr,we,!1,d.unstable_skipActionErrorRevalidation,W,Z,re,G,ce,J,pe,l,[_t.route.id,he]);Ye.filter(Kt=>Kt.key!==We).forEach(Kt=>{let at=Kt.key,Vn=O.fetchers.get(at),$r=aw(void 0,Vn?Vn.data:void 0);O.fetchers.set(at,$r),X.has(at)&&Te(at),Kt.controller&&X.set(at,Kt.controller)}),q({fetchers:new Map(O.fetchers)});let Ze=()=>Ye.forEach(Kt=>Te(Kt.key));kr.signal.addEventListener("abort",Ze);let{loaderResults:wt,fetcherResults:At}=await ct(O.matches,ge,Ge,Ye,_e);if(kr.signal.aborted)return;kr.signal.removeEventListener("abort",Ze),ye.delete(We),X.delete(We),Ye.forEach(Kt=>X.delete(Kt.key));let dt=aV([...wt,...At]);if(dt){if(dt.idx>=Ge.length){let Kt=Ye[dt.idx-Ge.length].key;J.add(Kt)}return Rr(_e,dt.result)}let{loaderData:St,errors:Ot}=tV(O,O.matches,Ge,wt,void 0,Ye,At,ie);if(O.fetchers.has(We)){let Kt=Ap(he.data);O.fetchers.set(We,Kt)}Ce(Fe),O.navigation.state==="loading"&&Fe>fe?(Sr(D,"Expected pending action"),B&&B.abort(),Ne(O.navigation.location,{matches:ge,loaderData:St,errors:Ot,fetchers:new Map(O.fetchers)})):(q({errors:Ot,loaderData:rV(O.loaderData,St,ge,Ot),fetchers:new Map(O.fetchers)}),W=!1)}async function ht(We,Je,rt,_t,Ut,ir,tr){let $t=O.fetchers.get(We);Lt(We,aw(tr,$t?$t.data:void 0),{flushSync:ir});let kr=new AbortController,Jt=x1(e.history,rt,kr.signal);X.set(We,kr);let Un=Q,he=(await er("loader",Jt,[_t],Ut))[0];if(Xm(he)&&(he=await jne(he,Jt.signal,!0)||he),X.get(We)===kr&&X.delete(We),!Jt.signal.aborted){if(G.has(We)){Lt(We,Ap(void 0));return}if(Ym(he))if(fe>Un){Lt(We,Ap(void 0));return}else{J.add(We),await Rr(Jt,he);return}if(qc(he)){dr(We,Je,he.error);return}Sr(!Xm(he),"Unhandled fetcher deferred data"),Lt(We,Ap(he.data))}}async function Rr(We,Je,rt){let{submission:_t,fetcherSubmission:Ut,replace:ir}=rt===void 0?{}:rt;Je.response.headers.has("X-Remix-Revalidate")&&(W=!0);let tr=Je.response.headers.get("Location");Sr(tr,"Expected a Location header on the redirect Response"),tr=ZW(tr,new URL(We.url),l);let $t=Hg(O.location,tr,{_isRedirect:!0});if(r){let we=!1;if(Je.response.headers.has("X-Remix-Reload-Document"))we=!0;else if(yL.test(tr)){const _e=e.history.createURL(tr);we=_e.origin!==t.location.origin||_l(_e.pathname,l)==null}if(we){ir?t.location.replace(tr):t.location.assign(tr);return}}B=null;let kr=ir===!0?fi.Replace:fi.Push,{formMethod:Jt,formAction:Un,formEncType:de}=O.navigation;!_t&&!Ut&&Jt&&Un&&de&&(_t=oV(O.navigation));let he=_t||Ut;if(G_e.has(Je.response.status)&&he&&Bu(he.formMethod))await De(kr,$t,{submission:bi({},he,{formAction:tr}),preventScrollReset:L});else{let we=tj($t,_t);await De(kr,$t,{overrideNavigation:we,fetcherSubmission:Ut,preventScrollReset:L})}}async function er(We,Je,rt,_t){try{let Ut=await Z_e(c,We,Je,rt,_t,a,i);return await Promise.all(Ut.map((ir,tr)=>{if(aNe(ir)){let $t=ir.result;return{type:Pi.redirect,response:rNe($t,Je,rt[tr].route.id,_t,l,d.v7_relativeSplatPath)}}return tNe(ir)}))}catch(Ut){return rt.map(()=>({type:Pi.error,error:Ut}))}}async function ct(We,Je,rt,_t,Ut){let[ir,...tr]=await Promise.all([rt.length?er("loader",Ut,rt,Je):[],..._t.map($t=>{if($t.matches&&$t.match&&$t.controller){let kr=x1(e.history,$t.path,$t.controller.signal);return er("loader",kr,[$t.match],$t.matches).then(Jt=>Jt[0])}else return Promise.resolve({type:Pi.error,error:Uc(404,{pathname:$t.path})})})]);return await Promise.all([sV(We,rt,ir,ir.map(()=>Ut.signal),!1,O.loaderData),sV(We,_t.map($t=>$t.match),tr,_t.map($t=>$t.controller?$t.controller.signal:null),!0)]),{loaderResults:ir,fetcherResults:tr}}function qt(){W=!0,Z.push(...Cr()),ce.forEach((We,Je)=>{X.has(Je)&&(re.push(Je),Te(Je))})}function Lt(We,Je,rt){rt===void 0&&(rt={}),O.fetchers.set(We,Je),q({fetchers:new Map(O.fetchers)},{flushSync:(rt&&rt.flushSync)===!0})}function dr(We,Je,rt,_t){_t===void 0&&(_t={});let Ut=u2(O.matches,Je);qe(We),q({errors:{[Ut.route.id]:rt},fetchers:new Map(O.fetchers)},{flushSync:(_t&&_t.flushSync)===!0})}function Gt(We){return d.v7_fetcherPersist&&(V.set(We,(V.get(We)||0)+1),G.has(We)&&G.delete(We)),O.fetchers.get(We)||Tne}function qe(We){let Je=O.fetchers.get(We);X.has(We)&&!(Je&&Je.state==="loading"&&ye.has(We))&&Te(We),ce.delete(We),ye.delete(We),J.delete(We),G.delete(We),O.fetchers.delete(We)}function Xe(We){if(d.v7_fetcherPersist){let Je=(V.get(We)||0)-1;Je<=0?(V.delete(We),G.add(We)):V.set(We,Je)}else qe(We);q({fetchers:new Map(O.fetchers)})}function Te(We){let Je=X.get(We);Sr(Je,"Expected fetch controller: "+We),Je.abort(),X.delete(We)}function He(We){for(let Je of We){let rt=Gt(Je),_t=Ap(rt.data);O.fetchers.set(Je,_t)}}function je(){let We=[],Je=!1;for(let rt of J){let _t=O.fetchers.get(rt);Sr(_t,"Expected fetcher: "+rt),_t.state==="loading"&&(J.delete(rt),We.push(rt),Je=!0)}return He(We),Je}function Ce(We){let Je=[];for(let[rt,_t]of ye)if(_t<We){let Ut=O.fetchers.get(rt);Sr(Ut,"Expected fetcher: "+rt),Ut.state==="loading"&&(Te(rt),ye.delete(rt),Je.push(rt))}return He(Je),Je.length>0}function ot(We,Je){let rt=O.blockers.get(We)||L1;return Ee.get(We)!==Je&&Ee.set(We,Je),rt}function xt(We){O.blockers.delete(We),Ee.delete(We)}function Dt(We,Je){let rt=O.blockers.get(We)||L1;Sr(rt.state==="unblocked"&&Je.state==="blocked"||rt.state==="blocked"&&Je.state==="blocked"||rt.state==="blocked"&&Je.state==="proceeding"||rt.state==="blocked"&&Je.state==="unblocked"||rt.state==="proceeding"&&Je.state==="unblocked","Invalid blocker state transition: "+rt.state+" -> "+Je.state);let _t=new Map(O.blockers);_t.set(We,Je),q({blockers:_t})}function Pt(We){let{currentLocation:Je,nextLocation:rt,historyAction:_t}=We;if(Ee.size===0)return;Ee.size>1&&Oh(!1,"A router only supports one blocker at a time");let Ut=Array.from(Ee.entries()),[ir,tr]=Ut[Ut.length-1],$t=O.blockers.get(ir);if(!($t&&$t.state==="proceeding")&&tr({currentLocation:Je,nextLocation:rt,historyAction:_t}))return ir}function Cr(We){let Je=[];return ie.forEach((rt,_t)=>{(!We||We(_t))&&(rt.cancel(),Je.push(_t),ie.delete(_t))}),Je}function wn(We,Je,rt){if(m=We,v=Je,x=rt||null,!b&&O.navigation===ej){b=!0;let _t=jn(O.location,O.matches);_t!=null&&q({restoreScrollPosition:_t})}return()=>{m=null,v=null,x=null}}function fr(We,Je){return x&&x(We,Je.map(_t=>Sne(_t,O.loaderData)))||We.key}function Vi(We,Je){if(m&&v){let rt=fr(We,Je);m[rt]=v()}}function jn(We,Je){if(m){let rt=fr(We,Je),_t=m[rt];if(typeof _t=="number")return _t}return null}function Jo(We){a={},o=m6(We,i,void 0,a)}return R={get basename(){return l},get future(){return d},get state(){return O},get routes(){return s},get window(){return t},initialize:ae,subscribe:ve,enableScrollRestoration:wn,navigate:Pe,fetch:ut,revalidate:ze,createHref:We=>e.history.createHref(We),encodeLocation:We=>e.history.encodeLocation(We),getFetcher:Gt,deleteFetcher:Xe,dispose:me,getBlocker:ot,deleteBlocker:xt,_internalFetchControllers:X,_internalActiveDeferreds:ie,_internalSetRoutes:Jo},R}function X_e(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function g6(e,t,r,n,i,a,s,o){let l,c;if(s){l=[];for(let f of t)if(l.push(f),f.route.id===s){c=f;break}}else l=t,c=t[t.length-1];let d=PO(i||".",OO(l,a),_l(e.pathname,r)||e.pathname,o==="path");return i==null&&(d.search=e.search,d.hash=e.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!wL(d.search)&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),n&&r!=="/"&&(d.pathname=d.pathname==="/"?r:Qd([r,d.pathname])),nd(d)}function XW(e,t,r,n){if(!n||!X_e(n))return{path:r};if(n.formMethod&&!oNe(n.formMethod))return{path:r,error:Uc(405,{method:n.formMethod})};let i=()=>({path:r,error:Uc(400,{type:"invalid-body"})}),a=n.formMethod||"get",s=e?a.toUpperCase():a.toLowerCase(),o=Pne(r);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!Bu(s))return i();let p=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((m,x)=>{let[v,b]=x;return""+m+v+"="+b+`
`},""):String(n.body);return{path:r,submission:{formMethod:s,formAction:o,formEncType:n.formEncType,formData:void 0,json:void 0,text:p}}}else if(n.formEncType==="application/json"){if(!Bu(s))return i();try{let p=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:r,submission:{formMethod:s,formAction:o,formEncType:n.formEncType,formData:void 0,json:p,text:void 0}}}catch{return i()}}}Sr(typeof FormData=="function","FormData is not available in this environment");let l,c;if(n.formData)l=x6(n.formData),c=n.formData;else if(n.body instanceof FormData)l=x6(n.body),c=n.body;else if(n.body instanceof URLSearchParams)l=n.body,c=eV(l);else if(n.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(n.body),c=eV(l)}catch{return i()}let d={formMethod:s,formAction:o,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Bu(d.formMethod))return{path:r,submission:d};let f=hu(r);return t&&f.search&&wL(f.search)&&l.append("index",""),f.search="?"+l,{path:nd(f),submission:d}}function Y_e(e,t){let r=e;if(t){let n=e.findIndex(i=>i.route.id===t);n>=0&&(r=e.slice(0,n))}return r}function YW(e,t,r,n,i,a,s,o,l,c,d,f,p,m,x,v){let b=v?qc(v[1])?v[1].error:v[1].data:void 0,w=e.createURL(t.location),k=e.createURL(i),E=v&&qc(v[1])?v[0]:void 0,N=E?Y_e(r,E):r,P=v?v[1].statusCode:void 0,R=s&&P&&P>=400,O=N.filter((L,B)=>{let{route:z}=L;if(z.lazy)return!0;if(z.loader==null)return!1;if(a)return typeof z.loader!="function"||z.loader.hydrate?!0:t.loaderData[z.id]===void 0&&(!t.errors||t.errors[z.id]===void 0);if(Q_e(t.loaderData,t.matches[B],L)||l.some(Y=>Y===L.route.id))return!0;let H=t.matches[B],te=L;return QW(L,bi({currentUrl:w,currentParams:H.params,nextUrl:k,nextParams:te.params},n,{actionResult:b,unstable_actionStatus:P,defaultShouldRevalidate:R?!1:o||w.pathname+w.search===k.pathname+k.search||w.search!==k.search||One(H,te)}))}),D=[];return f.forEach((L,B)=>{if(a||!r.some(W=>W.route.id===L.routeId)||d.has(B))return;let z=Km(m,L.path,x);if(!z){D.push({key:B,routeId:L.routeId,path:L.path,matches:null,match:null,controller:null});return}let H=t.fetchers.get(B),te=v6(z,L.path),Y=!1;p.has(B)?Y=!1:c.includes(B)?Y=!0:H&&H.state!=="idle"&&H.data===void 0?Y=o:Y=QW(te,bi({currentUrl:w,currentParams:t.matches[t.matches.length-1].params,nextUrl:k,nextParams:r[r.length-1].params},n,{actionResult:b,unstable_actionStatus:P,defaultShouldRevalidate:R?!1:o})),Y&&D.push({key:B,routeId:L.routeId,path:L.path,matches:z,match:te,controller:new AbortController})}),[O,D]}function Q_e(e,t,r){let n=!t||r.route.id!==t.route.id,i=e[r.route.id]===void 0;return n||i}function One(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function QW(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}async function JW(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let i=r[e.id];Sr(i,"No route found in manifest");let a={};for(let s in n){let l=i[s]!==void 0&&s!=="hasErrorBoundary";Oh(!l,'Route "'+i.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+s+'" will be ignored.')),!l&&!v_e.has(s)&&(a[s]=n[s])}Object.assign(i,a),Object.assign(i,bi({},t(i),{lazy:void 0}))}function J_e(e){return Promise.all(e.matches.map(t=>t.resolve()))}async function Z_e(e,t,r,n,i,a,s,o){let l=n.reduce((f,p)=>f.add(p.route.id),new Set),c=new Set,d=await e({matches:i.map(f=>{let p=l.has(f.route.id);return bi({},f,{shouldLoad:p,resolve:x=>(c.add(f.route.id),p?eNe(t,r,f,a,s,x,o):Promise.resolve({type:Pi.data,result:void 0}))})}),request:r,params:i[0].params,context:o});return i.forEach(f=>Sr(c.has(f.route.id),'`match.resolve()` was not called for route id "'+f.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),d.filter((f,p)=>l.has(i[p].route.id))}async function eNe(e,t,r,n,i,a,s){let o,l,c=d=>{let f,p=new Promise((v,b)=>f=b);l=()=>f(),t.signal.addEventListener("abort",l);let m=v=>typeof d!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+r.route.id+"]"))):d({request:t,params:r.params,context:s},...v!==void 0?[v]:[]),x;return a?x=a(v=>m(v)):x=(async()=>{try{return{type:"data",result:await m()}}catch(v){return{type:"error",result:v}}})(),Promise.race([x,p])};try{let d=r.route[e];if(r.route.lazy)if(d){let f,[p]=await Promise.all([c(d).catch(m=>{f=m}),JW(r.route,i,n)]);if(f!==void 0)throw f;o=p}else if(await JW(r.route,i,n),d=r.route[e],d)o=await c(d);else if(e==="action"){let f=new URL(t.url),p=f.pathname+f.search;throw Uc(405,{method:t.method,pathname:p,routeId:r.route.id})}else return{type:Pi.data,result:void 0};else if(d)o=await c(d);else{let f=new URL(t.url),p=f.pathname+f.search;throw Uc(404,{pathname:p})}Sr(o.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(d){return{type:Pi.error,result:d}}finally{l&&t.signal.removeEventListener("abort",l)}return o}async function tNe(e){let{result:t,type:r,status:n}=e;if(Rne(t)){let s;try{let o=t.headers.get("Content-Type");o&&/\bapplication\/json\b/.test(o)?t.body==null?s=null:s=await t.json():s=await t.text()}catch(o){return{type:Pi.error,error:o}}return r===Pi.error?{type:Pi.error,error:new RO(t.status,t.statusText,s),statusCode:t.status,headers:t.headers}:{type:Pi.data,data:s,statusCode:t.status,headers:t.headers}}if(r===Pi.error)return{type:Pi.error,error:t,statusCode:jO(t)?t.status:n};if(sNe(t)){var i,a;return{type:Pi.deferred,deferredData:t,statusCode:(i=t.init)==null?void 0:i.status,headers:((a=t.init)==null?void 0:a.headers)&&new Headers(t.init.headers)}}return{type:Pi.data,data:t,statusCode:n}}function rNe(e,t,r,n,i,a){let s=e.headers.get("Location");if(Sr(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!yL.test(s)){let o=n.slice(0,n.findIndex(l=>l.route.id===r)+1);s=g6(new URL(t.url),o,i,!0,s,a),e.headers.set("Location",s)}return e}function ZW(e,t,r){if(yL.test(e)){let n=e,i=n.startsWith("//")?new URL(t.protocol+n):new URL(n),a=_l(i.pathname,r)!=null;if(i.origin===t.origin&&a)return i.pathname+i.search+i.hash}return e}function x1(e,t,r,n){let i=e.createURL(Pne(t)).toString(),a={signal:r};if(n&&Bu(n.formMethod)){let{formMethod:s,formEncType:o}=n;a.method=s.toUpperCase(),o==="application/json"?(a.headers=new Headers({"Content-Type":o}),a.body=JSON.stringify(n.json)):o==="text/plain"?a.body=n.text:o==="application/x-www-form-urlencoded"&&n.formData?a.body=x6(n.formData):a.body=n.formData}return new Request(i,a)}function x6(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,typeof n=="string"?n:n.name);return t}function eV(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function nNe(e,t,r,n,i,a){let s={},o=null,l,c=!1,d={},f=n&&qc(n[1])?n[1].error:void 0;return r.forEach((p,m)=>{let x=t[m].route.id;if(Sr(!Ym(p),"Cannot handle redirect results in processLoaderData"),qc(p)){let v=p.error;f!==void 0&&(v=f,f=void 0),o=o||{};{let b=u2(e,x);o[b.route.id]==null&&(o[b.route.id]=v)}s[x]=void 0,c||(c=!0,l=jO(p.error)?p.error.status:500),p.headers&&(d[x]=p.headers)}else Xm(p)?(i.set(x,p.deferredData),s[x]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(d[x]=p.headers)):(s[x]=p.data,p.statusCode&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(d[x]=p.headers))}),f!==void 0&&n&&(o={[n[0]]:f},s[n[0]]=void 0),{loaderData:s,errors:o,statusCode:l||200,loaderHeaders:d}}function tV(e,t,r,n,i,a,s,o){let{loaderData:l,errors:c}=nNe(t,r,n,i,o);for(let d=0;d<a.length;d++){let{key:f,match:p,controller:m}=a[d];Sr(s!==void 0&&s[d]!==void 0,"Did not find corresponding fetcher result");let x=s[d];if(!(m&&m.signal.aborted))if(qc(x)){let v=u2(e.matches,p==null?void 0:p.route.id);c&&c[v.route.id]||(c=bi({},c,{[v.route.id]:x.error})),e.fetchers.delete(f)}else if(Ym(x))Sr(!1,"Unhandled fetcher revalidation redirect");else if(Xm(x))Sr(!1,"Unhandled fetcher deferred data");else{let v=Ap(x.data);e.fetchers.set(f,v)}}return{loaderData:l,errors:c}}function rV(e,t,r,n){let i=bi({},t);for(let a of r){let s=a.route.id;if(t.hasOwnProperty(s)?t[s]!==void 0&&(i[s]=t[s]):e[s]!==void 0&&a.route.loader&&(i[s]=e[s]),n&&n.hasOwnProperty(s))break}return i}function nV(e){return e?qc(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function u2(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function iV(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Uc(e,t){let{pathname:r,routeId:n,method:i,type:a}=t===void 0?{}:t,s="Unknown Server Error",o="Unknown @remix-run/router error";return e===400?(s="Bad Request",i&&r&&n?o="You made a "+i+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":a==="defer-action"?o="defer() is not supported in actions":a==="invalid-body"&&(o="Unable to encode submission body")):e===403?(s="Forbidden",o='Route "'+n+'" does not match URL "'+r+'"'):e===404?(s="Not Found",o='No route matches URL "'+r+'"'):e===405&&(s="Method Not Allowed",i&&r&&n?o="You made a "+i.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":i&&(o='Invalid request method "'+i.toUpperCase()+'"')),new RO(e||500,s,new Error(o),!0)}function aV(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(Ym(r))return{result:r,idx:t}}}function Pne(e){let t=typeof e=="string"?hu(e):e;return nd(bi({},t,{hash:""}))}function iNe(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function aNe(e){return Rne(e.result)&&q_e.has(e.result.status)}function Xm(e){return e.type===Pi.deferred}function qc(e){return e.type===Pi.error}function Ym(e){return(e&&e.type)===Pi.redirect}function sNe(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function Rne(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function oNe(e){return V_e.has(e.toLowerCase())}function Bu(e){return H_e.has(e.toLowerCase())}async function sV(e,t,r,n,i,a){for(let s=0;s<r.length;s++){let o=r[s],l=t[s];if(!l)continue;let c=e.find(f=>f.route.id===l.route.id),d=c!=null&&!One(c,l)&&(a&&a[l.route.id])!==void 0;if(Xm(o)&&(i||d)){let f=n[s];Sr(f,"Expected an AbortSignal for revalidating fetcher deferred result"),await jne(o,f,i).then(p=>{p&&(r[s]=p||r[s])})}}}async function jne(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:Pi.data,data:e.deferredData.unwrappedData}}catch(i){return{type:Pi.error,error:i}}return{type:Pi.data,data:e.deferredData.data}}}function wL(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function v6(e,t){let r=typeof t=="string"?hu(t).search:t.search;if(e[e.length-1].route.index&&wL(r||""))return e[e.length-1];let n=_ne(e);return n[n.length-1]}function oV(e){let{formMethod:t,formAction:r,formEncType:n,text:i,formData:a,json:s}=e;if(!(!t||!r||!n)){if(i!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:i};if(a!=null)return{formMethod:t,formAction:r,formEncType:n,formData:a,json:void 0,text:void 0};if(s!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:s,text:void 0}}}function tj(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function lNe(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function aw(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function cNe(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Ap(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function uNe(e,t){try{let r=e.sessionStorage.getItem(Ine);if(r){let n=JSON.parse(r);for(let[i,a]of Object.entries(n||{}))a&&Array.isArray(a)&&t.set(i,new Set(a||[]))}}catch{}}function dNe(e,t){if(t.size>0){let r={};for(let[n,i]of t)r[n]=[...i];try{e.sessionStorage.setItem(Ine,JSON.stringify(r))}catch(n){Oh(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}/**
 * React Router v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _0(){return _0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_0.apply(this,arguments)}const Uy=I.createContext(null),mE=I.createContext(null),AA=I.createContext(null),pc=I.createContext(null),$y=I.createContext(null),mc=I.createContext({outlet:null,matches:[],isDataRoute:!1}),Dne=I.createContext(null);function Mne(e,t){let{relative:r}=t===void 0?{}:t;z0()||Sr(!1);let{basename:n,navigator:i}=I.useContext(pc),{hash:a,pathname:s,search:o}=zy(e,{relative:r}),l=s;return n!=="/"&&(l=s==="/"?n:Qd([n,s])),i.createHref({pathname:l,search:o,hash:a})}function z0(){return I.useContext($y)!=null}function Ol(){return z0()||Sr(!1),I.useContext($y).location}function fNe(){return I.useContext($y).navigationType}function hNe(e){z0()||Sr(!1);let{pathname:t}=Ol();return I.useMemo(()=>aS(e,t),[t,e])}function Fne(e){I.useContext(pc).static||I.useLayoutEffect(e)}function pu(){let{isDataRoute:e}=I.useContext(mc);return e?NNe():pNe()}function pNe(){z0()||Sr(!1);let e=I.useContext(Uy),{basename:t,future:r,navigator:n}=I.useContext(pc),{matches:i}=I.useContext(mc),{pathname:a}=Ol(),s=JSON.stringify(OO(i,r.v7_relativeSplatPath)),o=I.useRef(!1);return Fne(()=>{o.current=!0}),I.useCallback(function(c,d){if(d===void 0&&(d={}),!o.current)return;if(typeof c=="number"){n.go(c);return}let f=PO(c,JSON.parse(s),a,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Qd([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,s,a,e])}const Lne=I.createContext(null);function mNe(){return I.useContext(Lne)}function Bne(e){let t=I.useContext(mc).outlet;return t&&I.createElement(Lne.Provider,{value:e},t)}function wx(){let{matches:e}=I.useContext(mc),t=e[e.length-1];return t?t.params:{}}function zy(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=I.useContext(pc),{matches:i}=I.useContext(mc),{pathname:a}=Ol(),s=JSON.stringify(OO(i,n.v7_relativeSplatPath));return I.useMemo(()=>PO(e,JSON.parse(s),a,r==="path"),[e,s,a,r])}function Une(e,t){return $ne(e,t)}function $ne(e,t,r,n){z0()||Sr(!1);let{navigator:i}=I.useContext(pc),{matches:a}=I.useContext(mc),s=a[a.length-1],o=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let c=Ol(),d;if(t){var f;let b=typeof t=="string"?hu(t):t;l==="/"||(f=b.pathname)!=null&&f.startsWith(l)||Sr(!1),d=b}else d=c;let p=d.pathname||"/",m=p;if(l!=="/"){let b=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(b.length).join("/")}let x=Km(e,{pathname:m}),v=zne(x&&x.map(b=>Object.assign({},b,{params:Object.assign({},o,b.params),pathname:Qd([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:Qd([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,r,n);return t&&v?I.createElement($y.Provider,{value:{location:_0({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:fi.Pop}},v):v}function gNe(){let e=Gne(),t=jO(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),r?I.createElement("pre",{style:i},r):null,null)}const xNe=I.createElement(gNe,null);class vNe extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?I.createElement(mc.Provider,{value:this.props.routeContext},I.createElement(Dne.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yNe(e){let{routeContext:t,match:r,children:n}=e,i=I.useContext(Uy);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),I.createElement(mc.Provider,{value:t},n)}function zne(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if((a=r)!=null&&a.errors)e=r.matches;else return null}let s=e,o=(i=r)==null?void 0:i.errors;if(o!=null){let d=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);d>=0||Sr(!1),s=s.slice(0,Math.min(s.length,d+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:p,errors:m}=r,x=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||x){l=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((d,f,p)=>{let m,x=!1,v=null,b=null;r&&(m=o&&f.route.id?o[f.route.id]:void 0,v=f.route.errorElement||xNe,l&&(c<0&&p===0?(ANe("route-fallback"),x=!0,b=null):c===p&&(x=!0,b=f.route.hydrateFallbackElement||null)));let w=t.concat(s.slice(0,p+1)),k=()=>{let E;return m?E=v:x?E=b:f.route.Component?E=I.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=d,I.createElement(yNe,{match:f,routeContext:{outlet:d,matches:w,isDataRoute:r!=null},children:E})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?I.createElement(vNe,{location:r.location,revalidation:r.revalidation,component:v,error:m,children:k(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):k()},null)}var Hne=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Hne||{}),Nl=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Nl||{});function SL(e){let t=I.useContext(Uy);return t||Sr(!1),t}function H0(e){let t=I.useContext(mE);return t||Sr(!1),t}function bNe(e){let t=I.useContext(mc);return t||Sr(!1),t}function gE(e){let t=bNe(),r=t.matches[t.matches.length-1];return r.route.id||Sr(!1),r.route.id}function Wne(){return gE(Nl.UseRouteId)}function Vne(){return H0(Nl.UseNavigation).navigation}function wNe(){let e=SL(),t=H0(Nl.UseRevalidator);return I.useMemo(()=>({revalidate:e.router.revalidate,state:t.revalidation}),[e.router.revalidate,t.revalidation])}function qne(){let{matches:e,loaderData:t}=H0(Nl.UseMatches);return I.useMemo(()=>e.map(r=>Sne(r,t)),[e,t])}function SNe(){let e=H0(Nl.UseLoaderData),t=gE(Nl.UseLoaderData);if(e.errors&&e.errors[t]!=null){console.error("You cannot `useLoaderData` in an errorElement (routeId: "+t+")");return}return e.loaderData[t]}function ENe(e){return H0(Nl.UseRouteLoaderData).loaderData[e]}function CNe(){let e=H0(Nl.UseActionData),t=gE(Nl.UseLoaderData);return e.actionData?e.actionData[t]:void 0}function Gne(){var e;let t=I.useContext(Dne),r=H0(Nl.UseRouteError),n=gE(Nl.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Kne(){let e=I.useContext(AA);return e==null?void 0:e._data}function kNe(){let e=I.useContext(AA);return e==null?void 0:e._error}let _Ne=0;function Xne(e){let{router:t,basename:r}=SL(Hne.UseBlocker),n=H0(Nl.UseBlocker),[i,a]=I.useState(""),s=I.useCallback(o=>{if(typeof e!="function")return!!e;if(r==="/")return e(o);let{currentLocation:l,nextLocation:c,historyAction:d}=o;return e({currentLocation:_0({},l,{pathname:_l(l.pathname,r)||l.pathname}),nextLocation:_0({},c,{pathname:_l(c.pathname,r)||c.pathname}),historyAction:d})},[r,e]);return I.useEffect(()=>{let o=String(++_Ne);return a(o),()=>t.deleteBlocker(o)},[t]),I.useEffect(()=>{i!==""&&t.getBlocker(i,s)},[t,i,s]),i&&n.blockers.has(i)?n.blockers.get(i):L1}function NNe(){let{router:e}=SL(),t=gE(Nl.UseNavigateStable),r=I.useRef(!1);return Fne(()=>{r.current=!0}),I.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,_0({fromRouteId:t},a)))},[e,t])}const lV={};function ANe(e,t,r){lV[e]||(lV[e]=!0)}const TNe="startTransition",cV=Hv[TNe];function INe(e){let{basename:t,children:r,initialEntries:n,initialIndex:i,future:a}=e,s=I.useRef();s.current==null&&(s.current=vne({initialEntries:n,initialIndex:i,v5Compat:!0}));let o=s.current,[l,c]=I.useState({action:o.action,location:o.location}),{v7_startTransition:d}=a||{},f=I.useCallback(p=>{d&&cV?cV(()=>c(p)):c(p)},[c,d]);return I.useLayoutEffect(()=>o.listen(f),[o,f]),I.createElement(Hy,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:a})}function ONe(e){let{to:t,replace:r,state:n,relative:i}=e;z0()||Sr(!1);let{future:a,static:s}=I.useContext(pc),{matches:o}=I.useContext(mc),{pathname:l}=Ol(),c=pu(),d=PO(t,OO(o,a.v7_relativeSplatPath),l,i==="path"),f=JSON.stringify(d);return I.useEffect(()=>c(JSON.parse(f),{replace:r,state:n,relative:i}),[c,f,i,r,n]),null}function Yne(e){return Bne(e.context)}function da(e){Sr(!1)}function Hy(e){let{basename:t="/",children:r=null,location:n,navigationType:i=fi.Pop,navigator:a,static:s=!1,future:o}=e;z0()&&Sr(!1);let l=t.replace(/^\/*/,"/"),c=I.useMemo(()=>({basename:l,navigator:a,static:s,future:_0({v7_relativeSplatPath:!1},o)}),[l,o,a,s]);typeof n=="string"&&(n=hu(n));let{pathname:d="/",search:f="",hash:p="",state:m=null,key:x="default"}=n,v=I.useMemo(()=>{let b=_l(d,l);return b==null?null:{location:{pathname:b,search:f,hash:p,state:m,key:x},navigationType:i}},[l,d,f,p,m,x,i]);return v==null?null:I.createElement(pc.Provider,{value:c},I.createElement($y.Provider,{children:r,value:v}))}function Qne(e){let{children:t,location:r}=e;return Une(sS(t),r)}function PNe(e){let{children:t,errorElement:r,resolve:n}=e;return I.createElement(jNe,{resolve:n,errorElement:r},I.createElement(DNe,null,t))}var Oc=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(Oc||{});const RNe=new Promise(()=>{});class jNe extends I.Component{constructor(t){super(t),this.state={error:null}}static getDerivedStateFromError(t){return{error:t}}componentDidCatch(t,r){console.error("<Await> caught the following error during render",t,r)}render(){let{children:t,errorElement:r,resolve:n}=this.props,i=null,a=Oc.pending;if(!(n instanceof Promise))a=Oc.success,i=Promise.resolve(),Object.defineProperty(i,"_tracked",{get:()=>!0}),Object.defineProperty(i,"_data",{get:()=>n});else if(this.state.error){a=Oc.error;let s=this.state.error;i=Promise.reject().catch(()=>{}),Object.defineProperty(i,"_tracked",{get:()=>!0}),Object.defineProperty(i,"_error",{get:()=>s})}else n._tracked?(i=n,a=i._error!==void 0?Oc.error:i._data!==void 0?Oc.success:Oc.pending):(a=Oc.pending,Object.defineProperty(n,"_tracked",{get:()=>!0}),i=n.then(s=>Object.defineProperty(n,"_data",{get:()=>s}),s=>Object.defineProperty(n,"_error",{get:()=>s})));if(a===Oc.error&&i._error instanceof NA)throw RNe;if(a===Oc.error&&!r)throw i._error;if(a===Oc.error)return I.createElement(AA.Provider,{value:i,children:r});if(a===Oc.success)return I.createElement(AA.Provider,{value:i,children:t});throw i}}function DNe(e){let{children:t}=e,r=Kne(),n=typeof t=="function"?t(r):t;return I.createElement(I.Fragment,null,n)}function sS(e,t){t===void 0&&(t=[]);let r=[];return I.Children.forEach(e,(n,i)=>{if(!I.isValidElement(n))return;let a=[...t,i];if(n.type===I.Fragment){r.push.apply(r,sS(n.props.children,a));return}n.type!==da&&Sr(!1),!n.props.index||!n.props.children||Sr(!1);let s={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=sS(n.props.children,a)),r.push(s)}),r}function MNe(e){return zne(e)}function EL(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:I.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:I.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:I.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}function FNe(e,t){return bL({basename:t==null?void 0:t.basename,future:_0({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:vne({initialEntries:t==null?void 0:t.initialEntries,initialIndex:t==null?void 0:t.initialIndex}),hydrationData:t==null?void 0:t.hydrationData,routes:e,mapRouteProperties:EL,unstable_dataStrategy:t==null?void 0:t.unstable_dataStrategy}).initialize()}/**
 * React Router DOM v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vl(){return vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vl.apply(this,arguments)}function CL(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}const ON="get",rj="application/x-www-form-urlencoded";function DO(e){return e!=null&&typeof e.tagName=="string"}function LNe(e){return DO(e)&&e.tagName.toLowerCase()==="button"}function BNe(e){return DO(e)&&e.tagName.toLowerCase()==="form"}function UNe(e){return DO(e)&&e.tagName.toLowerCase()==="input"}function $Ne(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function zNe(e,t){return e.button===0&&(!t||t==="_self")&&!$Ne(e)}function TA(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function HNe(e,t){let r=TA(e);return t&&t.forEach((n,i)=>{r.has(i)||t.getAll(i).forEach(a=>{r.append(i,a)})}),r}let Zk=null;function WNe(){if(Zk===null)try{new FormData(document.createElement("form"),0),Zk=!1}catch{Zk=!0}return Zk}const VNe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function nj(e){return e!=null&&!VNe.has(e)?null:e}function qNe(e,t){let r,n,i,a,s;if(BNe(e)){let o=e.getAttribute("action");n=o?_l(o,t):null,r=e.getAttribute("method")||ON,i=nj(e.getAttribute("enctype"))||rj,a=new FormData(e)}else if(LNe(e)||UNe(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||o.getAttribute("action");if(n=l?_l(l,t):null,r=e.getAttribute("formmethod")||o.getAttribute("method")||ON,i=nj(e.getAttribute("formenctype"))||nj(o.getAttribute("enctype"))||rj,a=new FormData(o,e),!WNe()){let{name:c,type:d,value:f}=e;if(d==="image"){let p=c?c+".":"";a.append(p+"x","0"),a.append(p+"y","0")}else c&&a.append(c,f)}}else{if(DO(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=ON,n=null,i=rj,s=e}return a&&i==="text/plain"&&(s=a,a=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:a,body:s}}const GNe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],KNe=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],XNe=["fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","unstable_viewTransition"],YNe="6";try{window.__reactRouterVersion=YNe}catch{}function QNe(e,t){return bL({basename:t==null?void 0:t.basename,future:vl({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:yne({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||Jne(),routes:e,mapRouteProperties:EL,unstable_dataStrategy:t==null?void 0:t.unstable_dataStrategy,window:t==null?void 0:t.window}).initialize()}function JNe(e,t){return bL({basename:t==null?void 0:t.basename,future:vl({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:bne({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||Jne(),routes:e,mapRouteProperties:EL,unstable_dataStrategy:t==null?void 0:t.unstable_dataStrategy,window:t==null?void 0:t.window}).initialize()}function Jne(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=vl({},t,{errors:ZNe(t.errors)})),t}function ZNe(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,i]of t)if(i&&i.__type==="RouteErrorResponse")r[n]=new RO(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let a=window[i.__subType];if(typeof a=="function")try{let s=new a(i.message);s.stack="",r[n]=s}catch{}}if(r[n]==null){let a=new Error(i.message);a.stack="",r[n]=a}}else r[n]=i;return r}const kL=I.createContext({isTransitioning:!1}),_L=I.createContext(new Map),eAe="startTransition",N0=Hv[eAe],tAe="flushSync",uV=g_e[tAe],rAe="useId",dV=Hv[rAe];function nAe(e){N0?N0(e):e()}function sw(e){uV?uV(e):e()}class iAe{constructor(){this.status="pending",this.promise=new Promise((t,r)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",r(n))}})}}function aAe(e){let{fallbackElement:t,router:r,future:n}=e,[i,a]=I.useState(r.state),[s,o]=I.useState(),[l,c]=I.useState({isTransitioning:!1}),[d,f]=I.useState(),[p,m]=I.useState(),[x,v]=I.useState(),b=I.useRef(new Map),{v7_startTransition:w}=n||{},k=I.useCallback(O=>{w?nAe(O):O()},[w]),E=I.useCallback((O,D)=>{let{deletedFetchers:L,unstable_flushSync:B,unstable_viewTransitionOpts:z}=D;L.forEach(te=>b.current.delete(te)),O.fetchers.forEach((te,Y)=>{te.data!==void 0&&b.current.set(Y,te.data)});let H=r.window==null||typeof r.window.document.startViewTransition!="function";if(!z||H){B?sw(()=>a(O)):k(()=>a(O));return}if(B){sw(()=>{p&&(d&&d.resolve(),p.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:z.currentLocation,nextLocation:z.nextLocation})});let te=r.window.document.startViewTransition(()=>{sw(()=>a(O))});te.finished.finally(()=>{sw(()=>{f(void 0),m(void 0),o(void 0),c({isTransitioning:!1})})}),sw(()=>m(te));return}p?(d&&d.resolve(),p.skipTransition(),v({state:O,currentLocation:z.currentLocation,nextLocation:z.nextLocation})):(o(O),c({isTransitioning:!0,flushSync:!1,currentLocation:z.currentLocation,nextLocation:z.nextLocation}))},[r.window,p,d,b,k]);I.useLayoutEffect(()=>r.subscribe(E),[r,E]),I.useEffect(()=>{l.isTransitioning&&!l.flushSync&&f(new iAe)},[l]),I.useEffect(()=>{if(d&&s&&r.window){let O=s,D=d.promise,L=r.window.document.startViewTransition(async()=>{k(()=>a(O)),await D});L.finished.finally(()=>{f(void 0),m(void 0),o(void 0),c({isTransitioning:!1})}),m(L)}},[k,s,d,r.window]),I.useEffect(()=>{d&&s&&i.location.key===s.location.key&&d.resolve()},[d,p,i.location,s]),I.useEffect(()=>{!l.isTransitioning&&x&&(o(x.state),c({isTransitioning:!0,flushSync:!1,currentLocation:x.currentLocation,nextLocation:x.nextLocation}),v(void 0))},[l.isTransitioning,x]),I.useEffect(()=>{},[]);let N=I.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:O=>r.navigate(O),push:(O,D,L)=>r.navigate(O,{state:D,preventScrollReset:L==null?void 0:L.preventScrollReset}),replace:(O,D,L)=>r.navigate(O,{replace:!0,state:D,preventScrollReset:L==null?void 0:L.preventScrollReset})}),[r]),P=r.basename||"/",R=I.useMemo(()=>({router:r,navigator:N,static:!1,basename:P}),[r,N,P]);return I.createElement(I.Fragment,null,I.createElement(Uy.Provider,{value:R},I.createElement(mE.Provider,{value:i},I.createElement(_L.Provider,{value:b.current},I.createElement(kL.Provider,{value:l},I.createElement(Hy,{basename:P,location:i.location,navigationType:i.historyAction,navigator:N,future:{v7_relativeSplatPath:r.future.v7_relativeSplatPath}},i.initialized||r.future.v7_partialHydration?I.createElement(sAe,{routes:r.routes,future:r.future,state:i}):t))))),null)}function sAe(e){let{routes:t,future:r,state:n}=e;return $ne(t,void 0,n,r)}function Zne(e){let{basename:t,children:r,future:n,window:i}=e,a=I.useRef();a.current==null&&(a.current=yne({window:i,v5Compat:!0}));let s=a.current,[o,l]=I.useState({action:s.action,location:s.location}),{v7_startTransition:c}=n||{},d=I.useCallback(f=>{c&&N0?N0(()=>l(f)):l(f)},[l,c]);return I.useLayoutEffect(()=>s.listen(d),[s,d]),I.createElement(Hy,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:s,future:n})}function oAe(e){let{basename:t,children:r,future:n,window:i}=e,a=I.useRef();a.current==null&&(a.current=bne({window:i,v5Compat:!0}));let s=a.current,[o,l]=I.useState({action:s.action,location:s.location}),{v7_startTransition:c}=n||{},d=I.useCallback(f=>{c&&N0?N0(()=>l(f)):l(f)},[l,c]);return I.useLayoutEffect(()=>s.listen(d),[s,d]),I.createElement(Hy,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:s,future:n})}function lAe(e){let{basename:t,children:r,future:n,history:i}=e,[a,s]=I.useState({action:i.action,location:i.location}),{v7_startTransition:o}=n||{},l=I.useCallback(c=>{o&&N0?N0(()=>s(c)):s(c)},[s,o]);return I.useLayoutEffect(()=>i.listen(l),[i,l]),I.createElement(Hy,{basename:t,children:r,location:a.location,navigationType:a.action,navigator:i,future:n})}const cAe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uAe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ai=I.forwardRef(function(t,r){let{onClick:n,relative:i,reloadDocument:a,replace:s,state:o,target:l,to:c,preventScrollReset:d,unstable_viewTransition:f}=t,p=CL(t,GNe),{basename:m}=I.useContext(pc),x,v=!1;if(typeof c=="string"&&uAe.test(c)&&(x=c,cAe))try{let E=new URL(window.location.href),N=c.startsWith("//")?new URL(E.protocol+c):new URL(c),P=_l(N.pathname,m);N.origin===E.origin&&P!=null?c=P+N.search+N.hash:v=!0}catch{}let b=Mne(c,{relative:i}),w=tie(c,{replace:s,state:o,target:l,preventScrollReset:d,relative:i,unstable_viewTransition:f});function k(E){n&&n(E),E.defaultPrevented||w(E)}return I.createElement("a",vl({},p,{href:x||b,onClick:v||a?n:k,ref:r,target:l}))}),$l=I.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:i=!1,className:a="",end:s=!1,style:o,to:l,unstable_viewTransition:c,children:d}=t,f=CL(t,KNe),p=zy(l,{relative:f.relative}),m=Ol(),x=I.useContext(mE),{navigator:v,basename:b}=I.useContext(pc),w=x!=null&&sie(p)&&c===!0,k=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,E=m.pathname,N=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;i||(E=E.toLowerCase(),N=N?N.toLowerCase():null,k=k.toLowerCase()),N&&b&&(N=_l(N,b)||N);const P=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let R=E===k||!s&&E.startsWith(k)&&E.charAt(P)==="/",O=N!=null&&(N===k||!s&&N.startsWith(k)&&N.charAt(k.length)==="/"),D={isActive:R,isPending:O,isTransitioning:w},L=R?n:void 0,B;typeof a=="function"?B=a(D):B=[a,R?"active":null,O?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let z=typeof o=="function"?o(D):o;return I.createElement(ai,vl({},f,{"aria-current":L,className:B,ref:r,style:z,to:l,unstable_viewTransition:c}),typeof d=="function"?d(D):d)}),eie=I.forwardRef((e,t)=>{let{fetcherKey:r,navigate:n,reloadDocument:i,replace:a,state:s,method:o=ON,action:l,onSubmit:c,relative:d,preventScrollReset:f,unstable_viewTransition:p}=e,m=CL(e,XNe),x=AL(),v=iie(l,{relative:d}),b=o.toLowerCase()==="get"?"get":"post",w=k=>{if(c&&c(k),k.defaultPrevented)return;k.preventDefault();let E=k.nativeEvent.submitter,N=(E==null?void 0:E.getAttribute("formmethod"))||o;x(E||k.currentTarget,{fetcherKey:r,method:N,navigate:n,replace:a,state:s,relative:d,preventScrollReset:f,unstable_viewTransition:p})};return I.createElement("form",vl({ref:t,method:b,action:v,onSubmit:i?c:w},m))});function dAe(e){let{getKey:t,storageKey:r}=e;return aie({getKey:t,storageKey:r}),null}var Qv;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Qv||(Qv={}));var oS;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(oS||(oS={}));function MO(e){let t=I.useContext(Uy);return t||Sr(!1),t}function NL(e){let t=I.useContext(mE);return t||Sr(!1),t}function tie(e,t){let{target:r,replace:n,state:i,preventScrollReset:a,relative:s,unstable_viewTransition:o}=t===void 0?{}:t,l=pu(),c=Ol(),d=zy(e,{relative:s});return I.useCallback(f=>{if(zNe(f,r)){f.preventDefault();let p=n!==void 0?n:nd(c)===nd(d);l(e,{replace:p,state:i,preventScrollReset:a,relative:s,unstable_viewTransition:o})}},[c,l,d,n,i,r,e,a,s,o])}function rie(e){let t=I.useRef(TA(e)),r=I.useRef(!1),n=Ol(),i=I.useMemo(()=>HNe(n.search,r.current?null:t.current),[n.search]),a=pu(),s=I.useCallback((o,l)=>{const c=TA(typeof o=="function"?o(i):o);r.current=!0,a("?"+c,l)},[a,i]);return[i,s]}function fAe(){if(typeof document>"u")throw new Error("You are calling submit during the server render. Try calling submit within a `useEffect` or callback instead.")}let hAe=0,nie=()=>"__"+String(++hAe)+"__";function AL(){let{router:e}=MO(Qv.UseSubmit),{basename:t}=I.useContext(pc),r=Wne();return I.useCallback(function(n,i){i===void 0&&(i={}),fAe();let{action:a,method:s,encType:o,formData:l,body:c}=qNe(n,t);if(i.navigate===!1){let d=i.fetcherKey||nie();e.fetch(d,r,i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||s,formEncType:i.encType||o,unstable_flushSync:i.unstable_flushSync})}else e.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||s,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:r,unstable_flushSync:i.unstable_flushSync,unstable_viewTransition:i.unstable_viewTransition})},[e,t,r])}function iie(e,t){let{relative:r}=t===void 0?{}:t,{basename:n}=I.useContext(pc),i=I.useContext(mc);i||Sr(!1);let[a]=i.matches.slice(-1),s=vl({},zy(e||".",{relative:r})),o=Ol();if(e==null){s.search=o.search;let l=new URLSearchParams(s.search);l.has("index")&&l.get("index")===""&&(l.delete("index"),s.search=l.toString()?"?"+l.toString():"")}return(!e||e===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Qd([n,s.pathname])),nd(s)}function pAe(e){var t;let{key:r}=e===void 0?{}:e,{router:n}=MO(Qv.UseFetcher),i=NL(oS.UseFetcher),a=I.useContext(_L),s=I.useContext(mc),o=(t=s.matches[s.matches.length-1])==null?void 0:t.route.id;a||Sr(!1),s||Sr(!1),o==null&&Sr(!1);let l=dV?dV():"",[c,d]=I.useState(r||l);r&&r!==c?d(r):c||d(nie()),I.useEffect(()=>(n.getFetcher(c),()=>{n.deleteFetcher(c)}),[n,c]);let f=I.useCallback((k,E)=>{o||Sr(!1),n.fetch(c,o,k,E)},[c,o,n]),p=AL(),m=I.useCallback((k,E)=>{p(k,vl({},E,{navigate:!1,fetcherKey:c}))},[c,p]),x=I.useMemo(()=>I.forwardRef((E,N)=>I.createElement(eie,vl({},E,{navigate:!1,fetcherKey:c,ref:N}))),[c]),v=i.fetchers.get(c)||Tne,b=a.get(c);return I.useMemo(()=>vl({Form:x,submit:m,load:f},v,{data:b}),[x,m,f,v,b])}function mAe(){let e=NL(oS.UseFetchers);return Array.from(e.fetchers.entries()).map(t=>{let[r,n]=t;return vl({},n,{key:r})})}const fV="react-router-scroll-positions";let e_={};function aie(e){let{getKey:t,storageKey:r}=e===void 0?{}:e,{router:n}=MO(Qv.UseScrollRestoration),{restoreScrollPosition:i,preventScrollReset:a}=NL(oS.UseScrollRestoration),{basename:s}=I.useContext(pc),o=Ol(),l=qne(),c=Vne();I.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),xAe(I.useCallback(()=>{if(c.state==="idle"){let d=(t?t(o,l):null)||o.key;e_[d]=window.scrollY}try{sessionStorage.setItem(r||fV,JSON.stringify(e_))}catch{}window.history.scrollRestoration="auto"},[r,t,c.state,o,l])),typeof document<"u"&&(I.useLayoutEffect(()=>{try{let d=sessionStorage.getItem(r||fV);d&&(e_=JSON.parse(d))}catch{}},[r]),I.useLayoutEffect(()=>{let d=t&&s!=="/"?(p,m)=>t(vl({},p,{pathname:_l(p.pathname,s)||p.pathname}),m):t,f=n==null?void 0:n.enableScrollRestoration(e_,()=>window.scrollY,d);return()=>f&&f()},[n,s,t]),I.useLayoutEffect(()=>{if(i!==!1){if(typeof i=="number"){window.scrollTo(0,i);return}if(o.hash){let d=document.getElementById(decodeURIComponent(o.hash.slice(1)));if(d){d.scrollIntoView();return}}a!==!0&&window.scrollTo(0,0)}},[o,i,a]))}function gAe(e,t){let{capture:r}=t||{};I.useEffect(()=>{let n=r!=null?{capture:r}:void 0;return window.addEventListener("beforeunload",e,n),()=>{window.removeEventListener("beforeunload",e,n)}},[e,r])}function xAe(e,t){let{capture:r}={};I.useEffect(()=>{let n=r!=null?{capture:r}:void 0;return window.addEventListener("pagehide",e,n),()=>{window.removeEventListener("pagehide",e,n)}},[e,r])}function vAe(e){let{when:t,message:r}=e,n=Xne(t);I.useEffect(()=>{n.state==="blocked"&&(window.confirm(r)?setTimeout(n.proceed,0):n.reset())},[n,r]),I.useEffect(()=>{n.state==="blocked"&&!t&&n.reset()},[n,t])}function sie(e,t){t===void 0&&(t={});let r=I.useContext(kL);r==null&&Sr(!1);let{basename:n}=MO(Qv.useViewTransitionState),i=zy(e,{relative:t.relative});if(!r.isTransitioning)return!1;let a=_l(r.currentLocation.pathname,n)||r.currentLocation.pathname,s=_l(r.nextLocation.pathname,n)||r.nextLocation.pathname;return aS(i.pathname,s)!=null||aS(i.pathname,a)!=null}const yAe=Object.freeze(Object.defineProperty({__proto__:null,AbortedDeferredError:NA,Await:PNe,BrowserRouter:Zne,Form:eie,HashRouter:oAe,Link:ai,MemoryRouter:INe,NavLink:$l,Navigate:ONe,get NavigationType(){return fi},Outlet:Yne,Route:da,Router:Hy,RouterProvider:aAe,Routes:Qne,ScrollRestoration:dAe,UNSAFE_DataRouterContext:Uy,UNSAFE_DataRouterStateContext:mE,UNSAFE_ErrorResponseImpl:RO,UNSAFE_FetchersContext:_L,UNSAFE_LocationContext:$y,UNSAFE_NavigationContext:pc,UNSAFE_RouteContext:mc,UNSAFE_ViewTransitionContext:kL,UNSAFE_useRouteId:Wne,UNSAFE_useScrollRestoration:aie,createBrowserRouter:QNe,createHashRouter:JNe,createMemoryRouter:FNe,createPath:nd,createRoutesFromChildren:sS,createRoutesFromElements:sS,createSearchParams:TA,defer:$_e,generatePath:I_e,isRouteErrorResponse:jO,json:F_e,matchPath:aS,matchRoutes:Km,parsePath:hu,redirect:Nne,redirectDocument:z_e,renderMatches:MNe,resolvePath:kne,unstable_HistoryRouter:lAe,unstable_usePrompt:vAe,unstable_useViewTransitionState:sie,useActionData:CNe,useAsyncError:kNe,useAsyncValue:Kne,useBeforeUnload:gAe,useBlocker:Xne,useFetcher:pAe,useFetchers:mAe,useFormAction:iie,useHref:Mne,useInRouterContext:z0,useLinkClickHandler:tie,useLoaderData:SNe,useLocation:Ol,useMatch:hNe,useMatches:qne,useNavigate:pu,useNavigation:Vne,useNavigationType:fNe,useOutlet:Bne,useOutletContext:mNe,useParams:wx,useResolvedPath:zy,useRevalidator:wNe,useRouteError:Gne,useRouteLoaderData:ENe,useRoutes:Une,useSearchParams:rie,useSubmit:AL},Symbol.toStringTag,{value:"Module"}));var W0={},Wi={},Mi={},Wy={},oie={},xE={},bAe=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(xE,"__esModule",{value:!0});xE.STGeneralError=void 0;var wAe=function(e){bAe(t,e);function t(r){var n=e.call(this,r)||this;return n.isSuperTokensGeneralError=!0,n}return t.isThisError=function(r){return r.isSuperTokensGeneralError===!0},t}(Error);xE.STGeneralError=wAe;(function(e){function t(n){for(var i in n)e.hasOwnProperty(i)||(e[i]=n[i])}e.__esModule=!0;let r=xE;r.default!==void 0?t(r):t({default:r,...r})})(oie);Object.defineProperty(Wy,"__esModule",{value:!0});var SAe=oie;Wy.default=SAe.STGeneralError;var TL={},IL={},lie={},Sx={},FO={},mu={},LO={},zd=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},Hd=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(LO,"__esModule",{value:!0});LO.defaultWindowHandlerImplementation=void 0;function In(){if(typeof window>"u")throw Error("If you are using this package with server-side rendering, please make sure that you are checking if the window object is defined.");return window}var EAe={key:function(e){return zd(this,void 0,void 0,function(){return Hd(this,function(t){return[2,In().localStorage.key(e)]})})},clear:function(){return zd(this,void 0,void 0,function(){return Hd(this,function(e){return[2,In().localStorage.clear()]})})},getItem:function(e){return zd(this,void 0,void 0,function(){return Hd(this,function(t){return[2,In().localStorage.getItem(e)]})})},removeItem:function(e){return zd(this,void 0,void 0,function(){return Hd(this,function(t){return[2,In().localStorage.removeItem(e)]})})},setItem:function(e,t){return zd(this,void 0,void 0,function(){return Hd(this,function(r){return[2,In().localStorage.setItem(e,t)]})})},keySync:function(e){return In().localStorage.key(e)},clearSync:function(){return In().localStorage.clear()},getItemSync:function(e){return In().localStorage.getItem(e)},removeItemSync:function(e){return In().localStorage.removeItem(e)},setItemSync:function(e,t){return In().localStorage.setItem(e,t)}},CAe={key:function(e){return zd(this,void 0,void 0,function(){return Hd(this,function(t){return[2,In().sessionStorage.key(e)]})})},clear:function(){return zd(this,void 0,void 0,function(){return Hd(this,function(e){return[2,In().sessionStorage.clear()]})})},getItem:function(e){return zd(this,void 0,void 0,function(){return Hd(this,function(t){return[2,In().sessionStorage.getItem(e)]})})},removeItem:function(e){return zd(this,void 0,void 0,function(){return Hd(this,function(t){return[2,In().sessionStorage.removeItem(e)]})})},setItem:function(e,t){return zd(this,void 0,void 0,function(){return Hd(this,function(r){return[2,In().sessionStorage.setItem(e,t)]})})},keySync:function(e){return In().sessionStorage.key(e)},clearSync:function(){return In().sessionStorage.clear()},getItemSync:function(e){return In().sessionStorage.getItem(e)},removeItemSync:function(e){return In().sessionStorage.removeItem(e)},setItemSync:function(e,t){return In().sessionStorage.setItem(e,t)}};LO.defaultWindowHandlerImplementation={history:{replaceState:function(e,t,r){return In().history.replaceState(e,t,r)},getState:function(){return In().history.state}},location:{getHref:function(){return In().location.href},setHref:function(e){In().location.href=e},getSearch:function(){return In().location.search},getHash:function(){return In().location.hash},getPathName:function(){return In().location.pathname},assign:function(e){In().location.assign(e)},getHostName:function(){return In().location.hostname},getHost:function(){return In().location.host},getOrigin:function(){return In().location.origin}},getDocument:function(){return In().document},getWindowUnsafe:function(){return In().window},localStorage:EAe,sessionStorage:CAe};Object.defineProperty(mu,"__esModule",{value:!0});mu.WindowHandlerReference=void 0;var kAe=LO,cie=function(){function e(t){var r=function(n){return n};t!==void 0&&(r=t),this.windowHandler=r(kAe.defaultWindowHandlerImplementation)}return e.init=function(t){e.instance===void 0&&(e.instance=new e(t))},e.getReferenceOrThrow=function(){if(e.instance===void 0)throw new Error("SuperTokensWindowHandler must be initialized before calling this method.");return e.instance},e}();mu.WindowHandlerReference=cie;mu.default=cie;var hV=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},pV=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(FO,"__esModule",{value:!0});FO.defaultCookieHandlerImplementation=void 0;var mV=mu;FO.defaultCookieHandlerImplementation={getCookie:function(){return hV(this,void 0,void 0,function(){return pV(this,function(e){return[2,mV.default.getReferenceOrThrow().windowHandler.getWindowUnsafe().document.cookie]})})},setCookie:function(e){return hV(this,void 0,void 0,function(){return pV(this,function(t){return mV.default.getReferenceOrThrow().windowHandler.getWindowUnsafe().document.cookie=e,[2]})})}};Object.defineProperty(Sx,"__esModule",{value:!0});Sx.CookieHandlerReference=void 0;var _Ae=FO,uie=function(){function e(t){var r=function(n){return n};t!==void 0&&(r=t),this.cookieHandler=r(_Ae.defaultCookieHandlerImplementation)}return e.init=function(t){e.instance===void 0&&(e.instance=new e(t))},e.getReferenceOrThrow=function(){if(e.instance===void 0)throw new Error("SuperTokensCookieHandler must be initialized before calling this method.");return e.instance},e}();Sx.CookieHandlerReference=uie;Sx.default=uie;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(Sx)})(lie);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CookieHandlerReference=void 0;var t=lie;Object.defineProperty(e,"CookieHandlerReference",{enumerable:!0,get:function(){return t.CookieHandlerReference}})})(IL);(function(e){function t(n){for(var i in n)e.hasOwnProperty(i)||(e[i]=n[i])}e.__esModule=!0;let r=IL;r.default!==void 0?t(r):t({default:r,...r})})(TL);var die={},BO={};Object.defineProperty(BO,"__esModule",{value:!0});var NAe=function(){function e(t){var r=this;this.getAsStringDangerous=function(){return r.value},this.value=fie(t)}return e}();BO.default=NAe;function fie(e,t){t===void 0&&(t=!1);function r(i){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(i)}e=e.trim();try{if(!e.startsWith("http://")&&!e.startsWith("https://"))throw new Error("Error converting to proper URL");var n=new URL(e);return t?n.hostname.startsWith("localhost")||r(n.hostname)?e="http://"+n.host:e="https://"+n.host:e=n.protocol+"//"+n.host,e}catch{}if(e.startsWith("/"))throw new Error("Please provide a valid domain name");if(e.indexOf(".")===0&&(e=e.substr(1)),(e.indexOf(".")!==-1||e.startsWith("localhost"))&&!e.startsWith("http://")&&!e.startsWith("https://")){e="https://"+e;try{return new URL(e),fie(e,!0)}catch{}}throw new Error("Please provide a valid domain name")}(function(e){function t(n){for(var i in n)e.hasOwnProperty(i)||(e[i]=n[i])}e.__esModule=!0;let r=BO;r.default!==void 0?t(r):t({default:r,...r})})(die);var UO={},Vy={};Object.defineProperty(Vy,"__esModule",{value:!0});var AAe=function(){function e(t){var r=this;this.startsWith=function(n){return r.value.startsWith(n.value)},this.appendPath=function(n){return new e(r.value+n.value)},this.getAsStringDangerous=function(){return r.value},this.value=y6(t)}return e}();Vy.default=AAe;function y6(e){e=e.trim();try{if(!e.startsWith("http://")&&!e.startsWith("https://"))throw new Error("Error converting to proper URL");var t=new URL(e);return e=t.pathname,e.charAt(e.length-1)==="/"?e.substr(0,e.length-1):e}catch{}if((TAe(e)||e.startsWith("localhost"))&&!e.startsWith("http://")&&!e.startsWith("https://"))return e="http://"+e,y6(e);e.charAt(0)!=="/"&&(e="/"+e);try{return new URL("http://example.com"+e),y6("http://example.com"+e)}catch{throw new Error("Please provide a valid URL path")}}function TAe(e){if(e.indexOf(".")===-1||e.startsWith("/"))return!1;try{var t=new URL(e);return t.hostname.indexOf(".")!==-1}catch{}try{var t=new URL("http://"+e);return t.hostname.indexOf(".")!==-1}catch{}return!1}(function(e){function t(n){for(var i in n)e.hasOwnProperty(i)||(e[i]=n[i])}e.__esModule=!0;let r=Vy;r.default!==void 0?t(r):t({default:r,...r})})(UO);var qy={},$O={},OL={};(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(mu)})(OL);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WindowHandlerReference=void 0;var t=OL;Object.defineProperty(e,"WindowHandlerReference",{enumerable:!0,get:function(){return t.WindowHandlerReference}})})($O);(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t($O)})(qy);(function(e){var t={},r=I,n=Wy,i=TL,a=die,s=UO,o=qy;function l(qe){return qe&&qe.__esModule?qe:{default:qe}}var c=l(n),d=l(a),f=l(s),p=function(qe,Xe){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Te,He){Te.__proto__=He}||function(Te,He){for(var je in He)Object.prototype.hasOwnProperty.call(He,je)&&(Te[je]=He[je])},p(qe,Xe)};function m(qe,Xe){if(typeof Xe!="function"&&Xe!==null)throw new TypeError("Class extends value "+String(Xe)+" is not a constructor or null");p(qe,Xe);function Te(){this.constructor=qe}qe.prototype=Xe===null?Object.create(Xe):(Te.prototype=Xe.prototype,new Te)}e.__assign=function(){return e.__assign=Object.assign||function(Xe){for(var Te,He=1,je=arguments.length;He<je;He++){Te=arguments[He];for(var Ce in Te)Object.prototype.hasOwnProperty.call(Te,Ce)&&(Xe[Ce]=Te[Ce])}return Xe},e.__assign.apply(this,arguments)};function x(qe,Xe){var Te={};for(var He in qe)Object.prototype.hasOwnProperty.call(qe,He)&&Xe.indexOf(He)<0&&(Te[He]=qe[He]);if(qe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var je=0,He=Object.getOwnPropertySymbols(qe);je<He.length;je++)Xe.indexOf(He[je])<0&&Object.prototype.propertyIsEnumerable.call(qe,He[je])&&(Te[He[je]]=qe[He[je]]);return Te}function v(qe,Xe,Te,He){function je(Ce){return Ce instanceof Te?Ce:new Te(function(ot){ot(Ce)})}return new(Te||(Te=Promise))(function(Ce,ot){function xt(Cr){try{Pt(He.next(Cr))}catch(wn){ot(wn)}}function Dt(Cr){try{Pt(He.throw(Cr))}catch(wn){ot(wn)}}function Pt(Cr){Cr.done?Ce(Cr.value):je(Cr.value).then(xt,Dt)}Pt((He=He.apply(qe,Xe||[])).next())})}function b(qe,Xe){var Te={label:0,sent:function(){if(Ce[0]&1)throw Ce[1];return Ce[1]},trys:[],ops:[]},He,je,Ce,ot=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return ot.next=xt(0),ot.throw=xt(1),ot.return=xt(2),typeof Symbol=="function"&&(ot[Symbol.iterator]=function(){return this}),ot;function xt(Pt){return function(Cr){return Dt([Pt,Cr])}}function Dt(Pt){if(He)throw new TypeError("Generator is already executing.");for(;ot&&(ot=0,Pt[0]&&(Te=0)),Te;)try{if(He=1,je&&(Ce=Pt[0]&2?je.return:Pt[0]?je.throw||((Ce=je.return)&&Ce.call(je),0):je.next)&&!(Ce=Ce.call(je,Pt[1])).done)return Ce;switch(je=0,Ce&&(Pt=[Pt[0]&2,Ce.value]),Pt[0]){case 0:case 1:Ce=Pt;break;case 4:return Te.label++,{value:Pt[1],done:!1};case 5:Te.label++,je=Pt[1],Pt=[0];continue;case 7:Pt=Te.ops.pop(),Te.trys.pop();continue;default:if(Ce=Te.trys,!(Ce=Ce.length>0&&Ce[Ce.length-1])&&(Pt[0]===6||Pt[0]===2)){Te=0;continue}if(Pt[0]===3&&(!Ce||Pt[1]>Ce[0]&&Pt[1]<Ce[3])){Te.label=Pt[1];break}if(Pt[0]===6&&Te.label<Ce[1]){Te.label=Ce[1],Ce=Pt;break}if(Ce&&Te.label<Ce[2]){Te.label=Ce[2],Te.ops.push(Pt);break}Ce[2]&&Te.ops.pop(),Te.trys.pop();continue}Pt=Xe.call(qe,Te)}catch(Cr){Pt=[6,Cr],je=0}finally{He=Ce=0}if(Pt[0]&5)throw Pt[1];return{value:Pt[0]?Pt[1]:void 0,done:!0}}}function w(qe,Xe,Te){if(Te||arguments.length===2)for(var He=0,je=Xe.length,Ce;He<je;He++)(Ce||!(He in Xe))&&(Ce||(Ce=Array.prototype.slice.call(Xe,0,He)),Ce[He]=Xe[He]);return qe.concat(Ce||Array.prototype.slice.call(Xe))}typeof SuppressedError=="function"&&SuppressedError;var k="rid",E="tenantId",N="/auth",P="/auth",R="supertokens-root",O=`
If you are trying to use this method doing server-side-rendering, please make sure you move this method inside a componentDidMount method or useEffect hook.`,D="0.51.0",L="com.supertokens.auth-react",B=!1;function z(){B=!0}function H(qe){B&&console.log("".concat(L,' {t: "').concat(new Date().toISOString(),'", message: "').concat(qe,'", supertokens-auth-react-ver: "').concat(D,'"}'))}var te=["experimental"];function Y(qe){var Xe=new URLSearchParams(qe);return Xe.get(k)}function W(qe){for(var Xe=new URL(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHref()),Te=0,He=qe;Te<He.length;Te++){var je=He[Te];Xe.searchParams.delete(je)}o.WindowHandlerReference.getReferenceOrThrow().windowHandler.history.replaceState(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.history.getState(),"",Xe.toString())}function Z(qe,Xe){var Te=new URL(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHref());Te.searchParams.set(qe,Xe),o.WindowHandlerReference.getReferenceOrThrow().windowHandler.history.replaceState(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.history.getState(),"",Te.toString())}function re(){W(["error","message"])}function X(qe){var Xe=new URLSearchParams(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getSearch());return Xe.get(qe)}function Q(){return o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHash().substring(1)}function fe(){var qe=X("redirectToPath");if(qe!==null)try{var Xe=void 0;try{Xe=new URL(qe)}catch{var Te=qe.startsWith("/")?"http://localhost":"http://localhost/";Xe=new URL("".concat(Te).concat(qe))}var He=new f.default(qe).getAsStringDangerous(),je=Xe.search||"",Ce=Xe.hash||"",ot=He+je+Ce;return He.length===0&&ot.length>0&&!ot.startsWith("/")?"/"+ot:ot}catch{return}}function ye(){var qe;return(qe=X(E))!==null&&qe!==void 0?qe:void 0}function J(qe,Xe,Te,He){var je=qe.appInfo.websiteBasePath.appendPath(new f.default(Xe)).getAsStringDangerous(),Ce=new URLSearchParams;return Te.tenantIdFromQueryParams!==void 0&&Ce.set(E,Te.tenantIdFromQueryParams),He!==void 0&&Object.entries(He).forEach(function(ot){var xt=ot[0],Dt=ot[1];Dt!==void 0&&Ce.set(xt,Dt)}),Ce.toString()!==""?"".concat(je,"?").concat(Ce.toString()):je}function ce(){try{return t.TEST_MODE==="testing"||t.REACT_APP_TEST_MODE==="testing"}catch{return!1}}function V(qe){if(qe===void 0)throw new Error("Please provide the appInfo object when calling supertokens.init");if(qe.apiDomain===void 0)throw new Error("Please provide your apiDomain inside the appInfo object when calling supertokens.init");if(qe.appName===void 0)throw new Error("Please provide your appName inside the appInfo object when calling supertokens.init");if(qe.websiteDomain===void 0)throw new Error("Please provide your websiteDomain inside the appInfo object when calling supertokens.init");var Xe=new f.default("");return qe.apiGatewayPath!==void 0&&(Xe=new f.default(qe.apiGatewayPath)),{appName:qe.appName,apiDomain:new d.default(qe.apiDomain),websiteDomain:new d.default(qe.websiteDomain),apiBasePath:Xe.appendPath(G(N,qe.apiBasePath)),websiteBasePath:G(P,qe.websiteBasePath)}}function G(qe,Xe){return Xe!==void 0?new f.default(Xe):new f.default(qe)}function ie(qe,Xe){return v(this,void 0,void 0,function(){var Te,He,je;return b(this,function(Ce){switch(Ce.label){case 0:if(Te=[],Xe.length!==qe.length)throw Error("Are you sending too many / too few formFields?");He=function(ot){var xt,Dt,Pt,Cr;return b(this,function(wn){switch(wn.label){case 0:return xt=Xe[ot],Dt=qe.find(function(fr){return fr.id===xt.id}),Pt=Dt.value,Dt.id==="email"&&(Pt=Pt.trim()),[4,xt.validate(Pt)];case 1:return Cr=wn.sent(),Cr!==void 0&&Te.push({error:Cr,id:xt.id}),[2]}})},je=0,Ce.label=1;case 1:return je<Xe.length?[5,He(je)]:[3,4];case 2:Ce.sent(),Ce.label=3;case 3:return je++,[3,1];case 4:return[2,Te]}})})}function Ee(){return new f.default(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getPathName())}function ne(){var qe=Ee().getAsStringDangerous();return qe+o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getSearch()+o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHash()}function ae(qe,Xe){if(Xe===void 0)return qe;try{var Te=new URL(qe);return Object.entries(Xe).forEach(function(Ce){var ot=Ce[0],xt=Ce[1];Te.searchParams.set(ot,xt)}),Te.href}catch{var He=qe.startsWith("/")?"http://localhost":"http://localhost/",je=new URL("".concat(He).concat(qe));return Object.entries(Xe).forEach(function(ot){var xt=ot[0],Dt=ot[1];je.searchParams.set(xt,Dt)}),"".concat(je.pathname).concat(je.search).concat(je.hash)}}function me(qe){return qe.endsWith("/")?qe:qe+"/"}function ve(qe){return function(){var Xe=Y(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getSearch());return Xe===qe}}function q(qe){qe.trim()===""&&(qe="/"),o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.setHref(qe)}function Ne(qe,Xe){qe.trim()===""&&(qe="/"),"push"in Xe?Xe.push(qe):Xe(qe)}function Pe(){return new d.default(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getOrigin())}function ze(qe){return v(this,void 0,void 0,function(){var Xe;return b(this,function(Te){return Xe=o.WindowHandlerReference.getReferenceOrThrow().windowHandler.localStorage.getItem(qe),Xe==null?[2,null]:[2,Xe]})})}function De(qe,Xe){return v(this,void 0,void 0,function(){return b(this,function(Te){switch(Te.label){case 0:return[4,o.WindowHandlerReference.getReferenceOrThrow().windowHandler.localStorage.setItem(qe,Xe)];case 1:return Te.sent(),[2]}})})}function $e(qe){return v(this,void 0,void 0,function(){return b(this,function(Xe){switch(Xe.label){case 0:return[4,o.WindowHandlerReference.getReferenceOrThrow().windowHandler.localStorage.removeItem(qe)];case 1:return Xe.sent(),[2]}})})}function et(qe,Xe){var Te=e.__assign({},qe);for(var He in Xe)typeof Te[He]=="object"&&typeof Xe[He]=="object"?Te[He]=et(Te[He],Xe[He]):Te[He]=Xe[He];return Te}function ut(qe){function Xe(je){je=je.trim().toLowerCase(),je.startsWith(".")&&(je=je.substring(1)),!je.startsWith("http://")&&!je.startsWith("https://")&&(je="http://"+je);try{var Ce=new URL(je);return je=Ce.hostname,je.startsWith(".")&&(je=je.substring(1)),je}catch{throw new Error("Please provide a valid cookie scope")}}function Te(je){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(je)}var He=Xe(qe);return He==="localhost"||Te(He)?He:qe.startsWith(".")?"."+He:He}function kt(){try{return ut(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHostName())}catch{return}}function ht(qe){return v(this,void 0,void 0,function(){var Xe,Te,He,je,Ce;return b(this,function(ot){switch(ot.label){case 0:return Te="; ",[4,i.CookieHandlerReference.getReferenceOrThrow().cookieHandler.getCookie()];case 1:return Xe=Te+ot.sent(),He=Xe.split("; "+qe+"="),He.length>=2&&(je=He.pop(),je!==void 0)?(Ce=je.split(";").shift(),Ce===void 0?[2,null]:[2,Ce]):[2,null]}})})}function Rr(qe,Xe,Te){return v(this,void 0,void 0,function(){var He,je;return b(this,function(Ce){switch(Ce.label){case 0:return He="Thu, 01 Jan 1970 00:00:01 GMT",je="",Xe!==void 0&&(je=Xe,He=void 0),Te==="localhost"||Te===o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHostName()||Te===void 0?He===void 0?[3,2]:[4,i.CookieHandlerReference.getReferenceOrThrow().cookieHandler.setCookie("".concat(qe,"=").concat(je,";expires=").concat(He,";path=/;samesite=lax"))]:[3,5];case 1:return Ce.sent(),[3,4];case 2:return[4,i.CookieHandlerReference.getReferenceOrThrow().cookieHandler.setCookie("".concat(qe,"=").concat(je,";expires=Fri, 31 Dec 9999 23:59:59 GMT;path=/;samesite=lax"))];case 3:Ce.sent(),Ce.label=4;case 4:return[3,9];case 5:return He===void 0?[3,7]:[4,i.CookieHandlerReference.getReferenceOrThrow().cookieHandler.setCookie("".concat(qe,"=").concat(je,";expires=").concat(He,";domain=").concat(Te,";path=/;samesite=lax"))];case 6:return Ce.sent(),[3,9];case 7:return[4,i.CookieHandlerReference.getReferenceOrThrow().cookieHandler.setCookie("".concat(qe,"=").concat(je,";domain=").concat(Te,";expires=Fri, 31 Dec 9999 23:59:59 GMT;path=/;samesite=lax"))];case 8:Ce.sent(),Ce.label=9;case 9:return[2]}})})}function er(qe){return qe===void 0?{}:qe}var ct=function(qe,Xe,Te,He){He===void 0&&(He=!0);var je=r.useRef(),Ce=r.useState(void 0),ot=Ce[0],xt=Ce[1];if(r.useEffect(function(){var Dt=function(Cr){return v(void 0,void 0,void 0,function(){var wn,fr,Vi;return b(this,function(jn){switch(jn.label){case 0:return jn.trys.push([0,2,,9]),je.current===void 0&&(je.current=qe()),[4,je.current];case 1:return wn=jn.sent(),Cr.aborted||Xe(wn),[3,9];case 2:if(fr=jn.sent(),Cr.aborted)return[3,8];if(Te===void 0)return[3,7];jn.label=3;case 3:return jn.trys.push([3,5,,6]),[4,Te(fr,wn)];case 4:return jn.sent(),[3,6];case 5:return Vi=jn.sent(),xt(Vi),[3,6];case 6:return[3,8];case 7:xt(fr),jn.label=8;case 8:return[3,9];case 9:return[2]}})})};if(He){var Pt=new AbortController;return Dt(Pt.signal),function(){Pt.abort()}}},[xt,je,qe,Xe,Te,He]),ot)throw ot};function qt(){var qe=r.useState(void 0),Xe=qe[0],Te=qe[1];if(Xe)throw Xe;return Te}var Lt=function(qe){var Xe=qe.apiFields,Te=qe.fieldUpdates,He=qe.callAPI;return v(void 0,void 0,void 0,function(){var je,Ce,ot,xt;return b(this,function(Dt){switch(Dt.label){case 0:return Dt.trys.push([0,2,,3]),[4,He(Xe||[],function(Pt,Cr){return Te.push({id:Pt,value:Cr})})];case 1:return je=Dt.sent(),[3,3];case 2:if(xt=Dt.sent(),c.default.isThisError(xt))Ce=xt;else if(xt instanceof Response)ot=xt;else throw xt;return[3,3];case 3:return[2,{result:je,generalError:Ce,fetchError:ot}]}})})};function dr(qe){return{id:qe.id,initialized:!qe.init,version:qe.version,exports:qe.exports,compatibleAuthReactSDKVersions:qe.compatibleAuthReactSDKVersions,compatibleWebJSSDKVersions:qe.compatibleWebJSSDKVersions}}function Gt(qe){var Xe=Object.keys(qe),Te=Xe.reduce(function(He,je){var Ce;return te.includes(je)?He:e.__assign(e.__assign({},He),(Ce={},Ce[je]=qe[je],Ce))},{});return Te}e.SSR_ERROR=O,e.ST_ROOT_ID=R,e.TENANT_ID_QUERY_PARAM=E,e.__awaiter=v,e.__extends=m,e.__generator=b,e.__rest=x,e.__spreadArray=w,e.appendQueryParamsToURL=ae,e.appendTrailingSlashToURL=me,e.clearErrorQueryParam=re,e.clearQueryParams=W,e.enableLogging=z,e.getCookieValue=ht,e.getCurrentNormalisedUrlPath=Ee,e.getCurrentNormalisedUrlPathWithQueryParamsAndFragments=ne,e.getDefaultCookieScope=kt,e.getDefaultRedirectionURLForPath=J,e.getLocalStorage=ze,e.getNormalisedUserContext=er,e.getOriginOfPage=Pe,e.getPublicConfig=Gt,e.getPublicPlugin=dr,e.getQueryParams=X,e.getRedirectToPathFromURL=fe,e.getTenantIdFromQueryParams=ye,e.getURLHash=Q,e.handleCallAPI=Lt,e.isTest=ce,e.logDebugMessage=H,e.matchRecipeIdUsingQueryParams=ve,e.mergeObjects=et,e.normaliseCookieScopeOrThrowError=ut,e.normaliseInputAppInfoOrThrowError=V,e.package_version=D,e.redirectWithFullPageReload=q,e.redirectWithNavigate=Ne,e.removeFromLocalStorage=$e,e.setFrontendCookie=Rr,e.setLocalStorage=De,e.updateQueryParam=Z,e.useOnMountAPICall=ct,e.useRethrowInRender=qt,e.validateForm=ie})(Mi);var PL={},zO={},Br={},Jv={};Object.defineProperty(Jv,"__esModule",{value:!0});Jv.SSR_ERROR=Jv.DEFAULT_API_BASE_PATH=void 0;Jv.DEFAULT_API_BASE_PATH="/auth";Jv.SSR_ERROR=`
If you are trying to use this method doing server-side-rendering, please make sure you move this method inside a componentDidMount method or useEffect hook.`;var HO={};Object.defineProperty(HO,"__esModule",{value:!0});HO.nonPublicConfigProperties=void 0;HO.nonPublicConfigProperties=["experimental"];var hie={},WO={},ao={},vE={};Object.defineProperty(vE,"__esModule",{value:!0});vE.isAnIpAddress=void 0;function pie(e){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)}vE.isAnIpAddress=pie;var IAe=function(){function e(t){var r=this;this.getAsStringDangerous=function(){return r.value},this.value=mie(t)}return e}();vE.default=IAe;function mie(e,t){t===void 0&&(t=!1),e=e.trim();try{if(!e.startsWith("http://")&&!e.startsWith("https://"))throw new Error("converting to proper URL");var r=new URL(e);return t?r.hostname.startsWith("localhost")||pie(r.hostname)?e="http://"+r.host:e="https://"+r.host:e=r.protocol+"//"+r.host,e}catch{}if(e.startsWith("/"))throw new Error("Please provide a valid domain name");if(e.indexOf(".")===0&&(e=e.substr(1)),(e.indexOf(".")!==-1||e.startsWith("localhost"))&&!e.startsWith("http://")&&!e.startsWith("https://")){e="https://"+e;try{return new URL(e),mie(e,!0)}catch{}}throw new Error("Please provide a valid domain name")}var RL={};Object.defineProperty(RL,"__esModule",{value:!0});var OAe=function(){function e(t){var r=this;this.startsWith=function(n){return r.value.startsWith(n.value)},this.appendPath=function(n){return new e(r.value+n.value)},this.getAsStringDangerous=function(){return r.value},this.value=b6(t)}return e}();RL.default=OAe;function b6(e){e=e.trim();try{if(!e.startsWith("http://")&&!e.startsWith("https://"))throw new Error("converting to proper URL");var t=new URL(e);return e=t.pathname,e.charAt(e.length-1)==="/"?e.substr(0,e.length-1):e}catch{}if((PAe(e)||e.startsWith("localhost"))&&!e.startsWith("http://")&&!e.startsWith("https://"))return e="http://"+e,b6(e);e.charAt(0)!=="/"&&(e="/"+e);try{return new URL("http://example.com"+e),b6("http://example.com"+e)}catch{throw new Error("Please provide a valid URL path")}}function PAe(e){if(e.indexOf(".")===-1||e.startsWith("/"))return!1;try{var t=new URL(e);return t.hostname.indexOf(".")!==-1}catch{}try{var t=new URL("http://"+e);return t.hostname.indexOf(".")!==-1}catch{}return!1}var w6=Ve&&Ve.__assign||function(){return w6=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},w6.apply(this,arguments)},gV=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},xV=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(ao,"__esModule",{value:!0});ao.matchesDomainOrSubdomain=ao.getNormalisedUserContext=ao.validateAndNormaliseInputOrThrowError=ao.normaliseSessionScopeOrThrowError=ao.normaliseURLPathOrThrowError=ao.normaliseURLDomainOrThrowError=void 0;var gie=vE,RAe=RL,jAe=mu;function xie(e){var t=new gie.default(e).getAsStringDangerous();return t}ao.normaliseURLDomainOrThrowError=xie;function S6(e){return new RAe.default(e).getAsStringDangerous()}ao.normaliseURLPathOrThrowError=S6;function E6(e){function t(n){n=n.trim().toLowerCase(),n.startsWith(".")&&(n=n.substr(1)),!n.startsWith("http://")&&!n.startsWith("https://")&&(n="http://"+n);try{var i=new URL(n);return n=i.hostname,n}catch{throw new Error("Please provide a valid sessionScope")}}var r=t(e);return r==="localhost"||(0,gie.isAnIpAddress)(r)?r:e.startsWith(".")?"."+r:r}ao.normaliseSessionScopeOrThrowError=E6;function DAe(e){var t=this,r=xie(e.apiDomain),n=S6("/auth");e.apiBasePath!==void 0&&(n=S6(e.apiBasePath));var i=jAe.default.getReferenceOrThrow().windowHandler.location.getHostName(),a=E6(e!==void 0&&e.sessionTokenFrontendDomain!==void 0?e.sessionTokenFrontendDomain:i),s=401;e.sessionExpiredStatusCode!==void 0&&(s=e.sessionExpiredStatusCode);var o=403;if(e.invalidClaimStatusCode!==void 0&&(o=e.invalidClaimStatusCode),s===o)throw new Error("sessionExpiredStatusCode and invalidClaimStatusCode cannot be the same.");var l=!0;e.autoAddCredentials!==void 0&&(l=e.autoAddCredentials);var c=!1;e.isInIframe!==void 0&&(c=e.isInIframe);var d=void 0;e.sessionTokenBackendDomain!==void 0&&(d=E6(e.sessionTokenBackendDomain));var f=10;if(e.maxRetryAttemptsForSessionRefresh!==void 0){if(e.maxRetryAttemptsForSessionRefresh<0)throw new Error("maxRetryAttemptsForSessionRefresh must be greater than or equal to 0.");f=e.maxRetryAttemptsForSessionRefresh}var p=function(b){return gV(t,void 0,void 0,function(){return xV(this,function(w){return[2,{url:b.url,requestInit:b.requestInit}]})})};e.preAPIHook!==void 0&&(p=e.preAPIHook);var m=function(){return gV(t,void 0,void 0,function(){return xV(this,function(b){return[2]})})};e.postAPIHook!==void 0&&(m=e.postAPIHook);var x=function(){};e.onHandleEvent!==void 0&&(x=e.onHandleEvent);var v=w6({functions:function(b){return b}},e.override);return{apiDomain:r,apiBasePath:n,sessionTokenFrontendDomain:a,sessionExpiredStatusCode:s,invalidClaimStatusCode:o,autoAddCredentials:l,isInIframe:c,tokenTransferMethod:e.tokenTransferMethod!==void 0?e.tokenTransferMethod:"cookie",sessionTokenBackendDomain:d,maxRetryAttemptsForSessionRefresh:f,preAPIHook:p,postAPIHook:m,onHandleEvent:x,override:v}}ao.validateAndNormaliseInputOrThrowError=DAe;function MAe(e){return e===void 0?{}:e}ao.getNormalisedUserContext=MAe;function FAe(e,t){for(var r=e.split("."),n=0;n<r.length;n++){var i=r.slice(n).join(".");if(i===t||".".concat(i)===t)return!0}return!1}ao.matchesDomainOrSubdomain=FAe;var Gy={},VO={};(function(e){var t={},r=Ve&&Ve.__awaiter||function(a,s,o,l){function c(d){return d instanceof o?d:new o(function(f){f(d)})}return new(o||(o=Promise))(function(d,f){function p(v){try{x(l.next(v))}catch(b){f(b)}}function m(v){try{x(l.throw(v))}catch(b){f(b)}}function x(v){v.done?d(v.value):c(v.value).then(p,m)}x((l=l.apply(a,s||[])).next())})},n=Ve&&Ve.__generator||function(a,s){var o={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},l,c,d,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(x){return function(v){return m([x,v])}}function m(x){if(l)throw new TypeError("Generator is already executing.");for(;o;)try{if(l=1,c&&(d=x[0]&2?c.return:x[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,x[1])).done)return d;switch(c=0,d&&(x=[x[0]&2,d.value]),x[0]){case 0:case 1:d=x;break;case 4:return o.label++,{value:x[1],done:!1};case 5:o.label++,c=x[1],x=[0];continue;case 7:x=o.ops.pop(),o.trys.pop();continue;default:if(d=o.trys,!(d=d.length>0&&d[d.length-1])&&(x[0]===6||x[0]===2)){o=0;continue}if(x[0]===3&&(!d||x[1]>d[0]&&x[1]<d[3])){o.label=x[1];break}if(x[0]===6&&o.label<d[1]){o.label=d[1],d=x;break}if(d&&o.label<d[2]){o.label=d[2],o.ops.push(x);break}d[2]&&o.ops.pop(),o.trys.pop();continue}x=s.call(a,o)}catch(v){x=[6,v],c=0}finally{l=d=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ProcessState=e.PROCESS_STATE=void 0,function(a){a[a.CALLING_INTERCEPTION_REQUEST=0]="CALLING_INTERCEPTION_REQUEST",a[a.CALLING_INTERCEPTION_RESPONSE=1]="CALLING_INTERCEPTION_RESPONSE"}(e.PROCESS_STATE||(e.PROCESS_STATE={}));var i=function(){function a(){var s=this;this.history=[],this.addState=function(o){try{process!==void 0&&t!==void 0&&t.TEST_MODE==="testing"&&s.history.push(o)}catch{}},this.getEventByLastEventByName=function(o){for(var l=s.history.length-1;l>=0;l--)if(s.history[l]==o)return s.history[l]},this.reset=function(){s.history=[]},this.waitForEvent=function(o,l){return l===void 0&&(l=7e3),r(s,void 0,void 0,function(){var c,d=this;return n(this,function(f){return c=Date.now(),[2,new Promise(function(p){var m=d;function x(){var v=m.getEventByLastEventByName(o);v===void 0?Date.now()-c>l?p(void 0):setTimeout(x,1e3):p(v)}x()})]})})}}return a.getInstance=function(){return a.instance==null&&(a.instance=new a),a.instance},a}();e.ProcessState=i})(VO);var A0={};Object.defineProperty(A0,"__esModule",{value:!0});A0.supported_fdi=A0.package_version=void 0;A0.package_version="20.1.6";A0.supported_fdi=["1.16","1.17","1.18","1.19","2.0","3.0","3.1","4.0","4.1"];var v1={},t_={},r_={},vV;function LAe(){if(vV)return r_;vV=1,Object.defineProperty(r_,"__esModule",{value:!0});var e=function(){function r(){var n=this;this.locked=new Map,this.addToLocked=function(i,a){var s=n.locked.get(i);s===void 0?a===void 0?n.locked.set(i,[]):n.locked.set(i,[a]):a!==void 0&&(s.unshift(a),n.locked.set(i,s))},this.isLocked=function(i){return n.locked.has(i)},this.lock=function(i){return new Promise(function(a,s){n.isLocked(i)?n.addToLocked(i,a):(n.addToLocked(i),a())})},this.unlock=function(i){var a=n.locked.get(i);if(a===void 0||a.length===0){n.locked.delete(i);return}var s=a.pop();n.locked.set(i,a),s!==void 0&&setTimeout(s,0)}}return r.getInstance=function(){return r.instance===void 0&&(r.instance=new r),r.instance},r}();function t(){return e.getInstance()}return r_.default=t,r_}var yV;function BAe(){if(yV)return t_;yV=1;var e=Ve&&Ve.__awaiter||function(d,f,p,m){return new(p||(p=Promise))(function(x,v){function b(E){try{k(m.next(E))}catch(N){v(N)}}function w(E){try{k(m.throw(E))}catch(N){v(N)}}function k(E){E.done?x(E.value):new p(function(N){N(E.value)}).then(b,w)}k((m=m.apply(d,f||[])).next())})},t=Ve&&Ve.__generator||function(d,f){var p={label:0,sent:function(){if(v[0]&1)throw v[1];return v[1]},trys:[],ops:[]},m,x,v,b;return b={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function w(E){return function(N){return k([E,N])}}function k(E){if(m)throw new TypeError("Generator is already executing.");for(;p;)try{if(m=1,x&&(v=E[0]&2?x.return:E[0]?x.throw||((v=x.return)&&v.call(x),0):x.next)&&!(v=v.call(x,E[1])).done)return v;switch(x=0,v&&(E=[E[0]&2,v.value]),E[0]){case 0:case 1:v=E;break;case 4:return p.label++,{value:E[1],done:!1};case 5:p.label++,x=E[1],E=[0];continue;case 7:E=p.ops.pop(),p.trys.pop();continue;default:if(v=p.trys,!(v=v.length>0&&v[v.length-1])&&(E[0]===6||E[0]===2)){p=0;continue}if(E[0]===3&&(!v||E[1]>v[0]&&E[1]<v[3])){p.label=E[1];break}if(E[0]===6&&p.label<v[1]){p.label=v[1],v=E;break}if(v&&p.label<v[2]){p.label=v[2],p.ops.push(E);break}v[2]&&p.ops.pop(),p.trys.pop();continue}E=f.call(d,p)}catch(N){E=[6,N],x=0}finally{m=v=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},r=Ve;Object.defineProperty(t_,"__esModule",{value:!0});var n=LAe(),i="browser-tabs-lock-key",a={key:function(d){return e(r,void 0,void 0,function(){return t(this,function(f){throw new Error("Unsupported")})})},getItem:function(d){return e(r,void 0,void 0,function(){return t(this,function(f){throw new Error("Unsupported")})})},clear:function(){return e(r,void 0,void 0,function(){return t(this,function(d){return[2,window.localStorage.clear()]})})},removeItem:function(d){return e(r,void 0,void 0,function(){return t(this,function(f){throw new Error("Unsupported")})})},setItem:function(d,f){return e(r,void 0,void 0,function(){return t(this,function(p){throw new Error("Unsupported")})})},keySync:function(d){return window.localStorage.key(d)},getItemSync:function(d){return window.localStorage.getItem(d)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(d){return window.localStorage.removeItem(d)},setItemSync:function(d,f){return window.localStorage.setItem(d,f)}};function s(d){return new Promise(function(f){return setTimeout(f,d)})}function o(d){for(var f="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",p="",m=0;m<d;m++){var x=Math.floor(Math.random()*f.length);p+=f[x]}return p}function l(){return Date.now().toString()+o(15)}var c=function(){function d(f){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=l(),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=f,d.waiters===void 0&&(d.waiters=[])}return d.prototype.acquireLock=function(f,p){return p===void 0&&(p=5e3),e(this,void 0,void 0,function(){var m,x,v,b,w,k,E,N;return t(this,function(P){switch(P.label){case 0:m=Date.now()+o(4),x=Date.now()+p,v=i+"-"+f,b=this.storageHandler===void 0?a:this.storageHandler,P.label=1;case 1:return Date.now()<x?[4,s(30)]:[3,8];case 2:return P.sent(),w=b.getItemSync(v),w!==null?[3,5]:(k=this.id+"-"+f+"-"+m,[4,s(Math.floor(Math.random()*25))]);case 3:return P.sent(),b.setItemSync(v,JSON.stringify({id:this.id,iat:m,timeoutKey:k,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,s(30)];case 4:return P.sent(),E=b.getItemSync(v),E!==null&&(N=JSON.parse(E),N.id===this.id&&N.iat===m)?(this.acquiredIatSet.add(m),this.refreshLockWhileAcquired(v,m),[2,!0]):[3,7];case 5:return d.lockCorrector(this.storageHandler===void 0?a:this.storageHandler),[4,this.waitForSomethingToChange(x)];case 6:P.sent(),P.label=7;case 7:return m=Date.now()+o(4),[3,1];case 8:return[2,!1]}})})},d.prototype.refreshLockWhileAcquired=function(f,p){return e(this,void 0,void 0,function(){var m=this;return t(this,function(x){return setTimeout(function(){return e(m,void 0,void 0,function(){var v,b,w;return t(this,function(k){switch(k.label){case 0:return[4,n.default().lock(p)];case 1:if(k.sent(),!this.acquiredIatSet.has(p))return n.default().unlock(p),[2];if(v=this.storageHandler===void 0?a:this.storageHandler,b=v.getItemSync(f),b!==null)w=JSON.parse(b),w.timeRefreshed=Date.now(),v.setItemSync(f,JSON.stringify(w)),n.default().unlock(p);else return n.default().unlock(p),[2];return this.refreshLockWhileAcquired(f,p),[2]}})})},1e3),[2]})})},d.prototype.waitForSomethingToChange=function(f){return e(this,void 0,void 0,function(){return t(this,function(p){switch(p.label){case 0:return[4,new Promise(function(m){var x=!1,v=Date.now(),b=50,w=!1;function k(){if(w||(window.removeEventListener("storage",k),d.removeFromWaiting(k),clearTimeout(E),w=!0),!x){x=!0;var N=b-(Date.now()-v);N>0?setTimeout(m,N):m(null)}}window.addEventListener("storage",k),d.addToWaiting(k);var E=setTimeout(k,Math.max(0,f-Date.now()))})];case 1:return p.sent(),[2]}})})},d.addToWaiting=function(f){this.removeFromWaiting(f),d.waiters!==void 0&&d.waiters.push(f)},d.removeFromWaiting=function(f){d.waiters!==void 0&&(d.waiters=d.waiters.filter(function(p){return p!==f}))},d.notifyWaiters=function(){if(d.waiters!==void 0){var f=d.waiters.slice();f.forEach(function(p){return p()})}},d.prototype.releaseLock=function(f){return e(this,void 0,void 0,function(){return t(this,function(p){switch(p.label){case 0:return[4,this.releaseLock__private__(f)];case 1:return[2,p.sent()]}})})},d.prototype.releaseLock__private__=function(f){return e(this,void 0,void 0,function(){var p,m,x,v;return t(this,function(b){switch(b.label){case 0:return p=this.storageHandler===void 0?a:this.storageHandler,m=i+"-"+f,x=p.getItemSync(m),x===null?[2]:(v=JSON.parse(x),v.id!==this.id?[3,2]:[4,n.default().lock(v.iat)]);case 1:b.sent(),this.acquiredIatSet.delete(v.iat),p.removeItemSync(m),n.default().unlock(v.iat),d.notifyWaiters(),b.label=2;case 2:return[2]}})})},d.lockCorrector=function(f){for(var p=Date.now()-5e3,m=f,x=[],v=0;;){var b=m.keySync(v);if(b===null)break;x.push(b),v++}for(var w=!1,k=0;k<x.length;k++){var E=x[k];if(E.includes(i)){var N=m.getItemSync(E);if(N!==null){var P=JSON.parse(N);(P.timeRefreshed===void 0&&P.timeAcquired<p||P.timeRefreshed!==void 0&&P.timeRefreshed<p)&&(m.removeItemSync(E),w=!0)}}}w&&d.notifyWaiters()},d.waiters=void 0,d}();return t_.default=c,t_}var bV;function jL(){if(bV)return v1;bV=1,Object.defineProperty(v1,"__esModule",{value:!0}),v1.LockFactoryReference=void 0;var e=BAe(),t=function(n){return function(){return Promise.resolve(new e.default(n))}},r=function(){function n(i){this.lockFactory=i}return n.init=function(i,a){this.instance===void 0&&(this.instance=new n(i??t(a)))},n.getReferenceOrThrow=function(){if(n.instance===void 0)throw new Error("SuperTokensLockReference must be initialized before calling this method.");return n.instance},n}();return v1.LockFactoryReference=r,v1.default=r,v1}var Ff={},wV;function yE(){if(wV)return Ff;wV=1,Object.defineProperty(Ff,"__esModule",{value:!0}),Ff.logDebugMessage=Ff.disableLogging=Ff.enableLogging=void 0;var e=A0,t="com.supertokens",r=!1;function n(){r=!0}Ff.enableLogging=n;function i(){r=!1}Ff.disableLogging=i;function a(s){r&&console.log("".concat(t,' {t: "').concat(new Date().toISOString(),'", message: "').concat(s,'", supertokens-website-ver: "').concat(e.package_version,'"}'))}return Ff.logDebugMessage=a,Ff}var df={},qO={};Object.defineProperty(qO,"__esModule",{value:!0});qO.DateProvider=void 0;var SV=mu,UAe=function(){function e(){this.clockSkewInMillis=0,this.thresholdInSeconds=7}return e.init=function(){if(e.instance===void 0){e.instance=new e;var t=SV.default.getReferenceOrThrow().windowHandler.localStorage,r=t.getItemSync(e.CLOCK_SKEW_KEY),n=r!==null?parseInt(r,10):0;e.instance.setClientClockSkewInMillis(n)}},e.getReferenceOrThrow=function(){if(e.instance===void 0)throw new Error("DateProvider must be initialized before calling this method.");return e.instance},e.prototype.getThresholdInSeconds=function(){return this.thresholdInSeconds},e.prototype.setThresholdInSeconds=function(t){this.thresholdInSeconds=t},e.prototype.setClientClockSkewInMillis=function(t){this.clockSkewInMillis=Math.abs(t)>=this.thresholdInSeconds*1e3?t:0;var r=SV.default.getReferenceOrThrow().windowHandler.localStorage;r.setItemSync(e.CLOCK_SKEW_KEY,String(t))},e.prototype.getClientClockSkewInMillis=function(){return this.clockSkewInMillis},e.prototype.now=function(){return Date.now()+this.getClientClockSkewInMillis()},e.CLOCK_SKEW_KEY="__st_clockSkewInMillis",e}();qO.DateProvider=UAe;Object.defineProperty(df,"__esModule",{value:!0});df.DateProviderReference=void 0;var EV=qO,vie=function(){function e(t){t!==void 0?this.dateProvider=t():(EV.DateProvider.init(),this.dateProvider=EV.DateProvider.getReferenceOrThrow())}return e.init=function(t){e.instance===void 0&&(e.instance=new e(t))},e.getReferenceOrThrow=function(){if(e.instance===void 0)throw new Error("SuperTokensDateProvider must be initialized before calling this method.");return e.instance},e}();df.DateProviderReference=vie;df.default=vie;(function(e){var t=Ve&&Ve.__assign||function(){return t=Object.assign||function(V){for(var G,ie=1,Ee=arguments.length;ie<Ee;ie++){G=arguments[ie];for(var ne in G)Object.prototype.hasOwnProperty.call(G,ne)&&(V[ne]=G[ne])}return V},t.apply(this,arguments)},r=Ve&&Ve.__awaiter||function(V,G,ie,Ee){function ne(ae){return ae instanceof ie?ae:new ie(function(me){me(ae)})}return new(ie||(ie=Promise))(function(ae,me){function ve(Pe){try{Ne(Ee.next(Pe))}catch(ze){me(ze)}}function q(Pe){try{Ne(Ee.throw(Pe))}catch(ze){me(ze)}}function Ne(Pe){Pe.done?ae(Pe.value):ne(Pe.value).then(ve,q)}Ne((Ee=Ee.apply(V,G||[])).next())})},n=Ve&&Ve.__generator||function(V,G){var ie={label:0,sent:function(){if(ae[0]&1)throw ae[1];return ae[1]},trys:[],ops:[]},Ee,ne,ae,me;return me={next:ve(0),throw:ve(1),return:ve(2)},typeof Symbol=="function"&&(me[Symbol.iterator]=function(){return this}),me;function ve(Ne){return function(Pe){return q([Ne,Pe])}}function q(Ne){if(Ee)throw new TypeError("Generator is already executing.");for(;ie;)try{if(Ee=1,ne&&(ae=Ne[0]&2?ne.return:Ne[0]?ne.throw||((ae=ne.return)&&ae.call(ne),0):ne.next)&&!(ae=ae.call(ne,Ne[1])).done)return ae;switch(ne=0,ae&&(Ne=[Ne[0]&2,ae.value]),Ne[0]){case 0:case 1:ae=Ne;break;case 4:return ie.label++,{value:Ne[1],done:!1};case 5:ie.label++,ne=Ne[1],Ne=[0];continue;case 7:Ne=ie.ops.pop(),ie.trys.pop();continue;default:if(ae=ie.trys,!(ae=ae.length>0&&ae[ae.length-1])&&(Ne[0]===6||Ne[0]===2)){ie=0;continue}if(Ne[0]===3&&(!ae||Ne[1]>ae[0]&&Ne[1]<ae[3])){ie.label=Ne[1];break}if(Ne[0]===6&&ie.label<ae[1]){ie.label=ae[1],ae=Ne;break}if(ae&&ie.label<ae[2]){ie.label=ae[2],ie.ops.push(Ne);break}ae[2]&&ie.ops.pop(),ie.trys.pop();continue}Ne=G.call(V,ie)}catch(Pe){Ne=[6,Pe],ne=0}finally{Ee=ae=0}if(Ne[0]&5)throw Ne[1];return{value:Ne[0]?Ne[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.updateClockSkewUsingFrontToken=e.fireSessionUpdateEventsIfNecessary=e.setFrontToken=e.getFrontToken=e.setAntiCSRF=e.saveLastAccessTokenUpdate=e.getTokenForHeaderAuth=e.setToken=e.getStorageNameForToken=e.getLocalSessionState=e.onInvalidClaimResponse=e.onTokenUpdate=e.onUnauthorisedResponse=e.FrontToken=e.AntiCsrfToken=void 0;var i=VO,a=A0,s=Sx,o=mu,l=jL(),c=yE(),d=df,f=function(){function V(){}return V.getToken=function(G){return r(this,void 0,void 0,function(){var ie;return n(this,function(Ee){switch(Ee.label){case 0:return(0,c.logDebugMessage)("AntiCsrfToken.getToken: called"),G===void 0?(V.tokenInfo=void 0,(0,c.logDebugMessage)("AntiCsrfToken.getToken: returning undefined"),[2,void 0]):V.tokenInfo!==void 0?[3,2]:[4,Z()];case 1:return ie=Ee.sent(),ie===null?((0,c.logDebugMessage)("AntiCsrfToken.getToken: returning undefined"),[2,void 0]):(V.tokenInfo={antiCsrf:ie,associatedAccessTokenUpdate:G},[3,4]);case 2:return V.tokenInfo.associatedAccessTokenUpdate===G?[3,4]:(V.tokenInfo=void 0,[4,V.getToken(G)]);case 3:return[2,Ee.sent()];case 4:return(0,c.logDebugMessage)("AntiCsrfToken.getToken: returning: "+V.tokenInfo.antiCsrf),[2,V.tokenInfo.antiCsrf]}})})},V.removeToken=function(){return r(this,void 0,void 0,function(){return n(this,function(G){switch(G.label){case 0:return(0,c.logDebugMessage)("AntiCsrfToken.removeToken: called"),V.tokenInfo=void 0,[4,re(void 0)];case 1:return G.sent(),[2]}})})},V.setItem=function(G,ie){return r(this,void 0,void 0,function(){return n(this,function(Ee){switch(Ee.label){case 0:return G===void 0?(V.tokenInfo=void 0,[2]):((0,c.logDebugMessage)("AntiCsrfToken.setItem: called"),[4,re(ie)]);case 1:return Ee.sent(),V.tokenInfo={antiCsrf:ie,associatedAccessTokenUpdate:G},[2]}})})},V}();e.AntiCsrfToken=f;var p=function(){function V(){}return V.getTokenInfo=function(){return r(this,void 0,void 0,function(){var G,ie;return n(this,function(Ee){switch(Ee.label){case 0:return(0,c.logDebugMessage)("FrontToken.getTokenInfo: called"),[4,fe()];case 1:return G=Ee.sent(),G!==null?[3,5]:[4,R(!1)];case 2:return Ee.sent().status!=="EXISTS"?[3,4]:[4,new Promise(function(ne){V.waiters.push(ne)})];case 3:return Ee.sent(),[2,V.getTokenInfo()];case 4:return[2,void 0];case 5:return ie=Q(G),(0,c.logDebugMessage)("FrontToken.getTokenInfo: returning ate: "+ie.ate),(0,c.logDebugMessage)("FrontToken.getTokenInfo: returning uid: "+ie.uid),(0,c.logDebugMessage)("FrontToken.getTokenInfo: returning up: "+ie.up),[2,ie]}})})},V.removeToken=function(){return r(this,void 0,void 0,function(){return n(this,function(G){switch(G.label){case 0:return(0,c.logDebugMessage)("FrontToken.removeToken: called"),[4,ye(void 0)];case 1:return G.sent(),[4,D("access","")];case 2:return G.sent(),[4,D("refresh","")];case 3:return G.sent(),[4,f.removeToken()];case 4:return G.sent(),V.waiters.forEach(function(ie){return ie(void 0)}),V.waiters=[],[2]}})})},V.setItem=function(G){return r(this,void 0,void 0,function(){return n(this,function(ie){switch(ie.label){case 0:return[4,W()];case 1:return ie.sent(),G==="remove"?[2,V.removeToken()]:((0,c.logDebugMessage)("FrontToken.setItem: called"),[4,ye(G)]);case 2:return ie.sent(),V.waiters.forEach(function(Ee){return Ee(void 0)}),V.waiters=[],[2]}})})},V.doesTokenExists=function(){return r(this,void 0,void 0,function(){var G;return n(this,function(ie){switch(ie.label){case 0:return[4,X()];case 1:return G=ie.sent(),[2,G!==null]}})})},V.waiters=[],V}();e.FrontToken=p;var m=function(){function V(){}V.init=function(ie,Ee){(0,c.logDebugMessage)("init: called"),(0,c.logDebugMessage)("init: Input apiBasePath: "+ie.apiBasePath),(0,c.logDebugMessage)("init: Input apiDomain: "+ie.apiDomain),(0,c.logDebugMessage)("init: Input autoAddCredentials: "+ie.autoAddCredentials),(0,c.logDebugMessage)("init: Input sessionTokenBackendDomain: "+ie.sessionTokenBackendDomain),(0,c.logDebugMessage)("init: Input isInIframe: "+ie.isInIframe),(0,c.logDebugMessage)("init: Input sessionExpiredStatusCode: "+ie.sessionExpiredStatusCode),(0,c.logDebugMessage)("init: Input sessionTokenFrontendDomain: "+ie.sessionTokenFrontendDomain),(0,c.logDebugMessage)("init: Input tokenTransferMethod: "+ie.tokenTransferMethod);var ne=o.default.getReferenceOrThrow().windowHandler.getWindowUnsafe();V.env=ne===void 0||ne.fetch===void 0?Ve:ne,V.refreshTokenUrl=ie.apiDomain+ie.apiBasePath+"/session/refresh",V.signOutUrl=ie.apiDomain+ie.apiBasePath+"/signout",V.rid="session",V.config=ie,V.env.__supertokensOriginalFetch===void 0&&((0,c.logDebugMessage)("init: __supertokensOriginalFetch is undefined"),V.env.__supertokensOriginalFetch=V.env.fetch.bind(V.env),V.env.__supertokensSessionRecipe=Ee,V.env.fetch=V.env.__supertokensSessionRecipe.addFetchInterceptorsAndReturnModifiedFetch({originalFetch:V.env.__supertokensOriginalFetch,userContext:{}}),V.env.__supertokensSessionRecipe.addXMLHttpRequestInterceptor({userContext:{}})),V.recipeImpl=V.env.__supertokensSessionRecipe,V.initCalled=!0};var G;return G=V,V.initCalled=!1,V.doRequest=function(ie,Ee,ne){return r(void 0,void 0,void 0,function(){var ae,me,ve,q,Ne,Pe,ze,De,$e,et,ut,kt,ht,Rr,er;return n(G,function(ct){switch(ct.label){case 0:if(!V.initCalled)throw Error("init function not called");(0,c.logDebugMessage)("doRequest: start of fetch interception"),ae=!1;try{me=void 0,typeof ne=="string"?me=ne:typeof ne=="object"&&(typeof ne.url=="string"?me=ne.url:typeof ne.href=="string"&&(me=ne.href)),ae=!V.recipeImpl.shouldDoInterceptionBasedOnUrl(me,V.config.apiDomain,V.config.sessionTokenBackendDomain)}catch(qt){if(qt.message==="Please provide a valid domain name")(0,c.logDebugMessage)("doRequest: Trying shouldDoInterceptionBasedOnUrl with location.origin"),ae=!V.recipeImpl.shouldDoInterceptionBasedOnUrl(o.default.getReferenceOrThrow().windowHandler.location.getOrigin(),V.config.apiDomain,V.config.sessionTokenBackendDomain);else throw qt}return(0,c.logDebugMessage)("doRequest: Value of doNotDoInterception: "+ae),ae?((0,c.logDebugMessage)("doRequest: Returning without interception"),[4,ie(Ee)]):[3,2];case 1:return[2,ct.sent()];case 2:return ve=new Headers(Ee!==void 0&&Ee.headers!==void 0?Ee.headers:ne.headers),ve.has("Authorization")?[4,B("access")]:[3,5];case 3:return q=ct.sent(),[4,B("refresh")];case 4:Ne=ct.sent(),q!==void 0&&Ne!==void 0&&ve.get("Authorization")==="Bearer ".concat(q)&&((0,c.logDebugMessage)("doRequest: Removing Authorization from user provided headers because it contains our access token"),ve.delete("Authorization")),ct.label=5;case 5:(0,c.logDebugMessage)("doRequest: Interception started"),i.ProcessState.getInstance().addState(i.PROCESS_STATE.CALLING_INTERCEPTION_REQUEST),Pe=0,ze=void 0,ct.label=6;case 6:return[4,R(!0)];case 7:return De=ct.sent(),$e=new Headers(ve),et=t(t({},Ee),{headers:$e}),De.status!=="EXISTS"?[3,9]:[4,f.getToken(De.lastAccessTokenUpdate)];case 8:ut=ct.sent(),ut!==void 0&&((0,c.logDebugMessage)("doRequest: Adding anti-csrf token to request"),$e.set("anti-csrf",ut)),ct.label=9;case 9:return V.config.autoAddCredentials&&((0,c.logDebugMessage)("doRequest: Adding credentials include"),et===void 0?et={credentials:"include"}:et.credentials===void 0&&(et=t(t({},et),{credentials:"include"}))),$e.has("rid")?(0,c.logDebugMessage)("doRequest: rid header was already there in request"):((0,c.logDebugMessage)("doRequest: Adding rid header: anti-csrf"),$e.set("rid","anti-csrf")),kt=V.config.tokenTransferMethod,(0,c.logDebugMessage)("doRequest: Adding st-auth-mode header: "+kt),$e.set("st-auth-mode",kt),[4,H($e)];case 10:return ct.sent(),(0,c.logDebugMessage)("doRequest: Making user's http call"),[4,ie(et)];case 11:return ht=ct.sent(),(0,c.logDebugMessage)("doRequest: User's http call ended"),[4,te(ht)];case 12:if(ct.sent(),J(De.status==="EXISTS",ht.status,ht.headers.get("front-token")),ht.status!==V.config.sessionExpiredStatusCode)return[3,14];if((0,c.logDebugMessage)("doRequest: Status code is: "+ht.status),Pe>=V.config.maxRetryAttemptsForSessionRefresh)throw(0,c.logDebugMessage)("doRequest: Maximum session refresh attempts reached. sessionRefreshAttempts: ".concat(Pe,", maxRetryAttemptsForSessionRefresh: ").concat(V.config.maxRetryAttemptsForSessionRefresh)),Rr="Received a 401 response from ".concat(ne,". Attempted to refresh the session and retry the request with the updated session tokens ").concat(V.config.maxRetryAttemptsForSessionRefresh," times, but each attempt resulted in a 401 error. The maximum session refresh limit has been reached. Please investigate your API. To increase the session refresh attempts, update maxRetryAttemptsForSessionRefresh in the config."),console.error(Rr),new Error(Rr);return[4,E(De)];case 13:if(er=ct.sent(),Pe++,(0,c.logDebugMessage)("doRequest: sessionRefreshAttempts: "+Pe),er.result!=="RETRY"){if((0,c.logDebugMessage)("doRequest: Not retrying original request"),er.error!==void 0)if(er.error instanceof Response)ze=er.error;else throw er.error;else ze=ht;return[3,18]}return(0,c.logDebugMessage)("doRequest: Retrying original request"),[3,17];case 14:return ht.status!==V.config.invalidClaimStatusCode?[3,16]:[4,P(ht)];case 15:ct.sent(),ct.label=16;case 16:return[2,ht];case 17:return[3,6];case 18:return[2,ze]}})})},V.attemptRefreshingSession=function(){return r(void 0,void 0,void 0,function(){var ie,Ee;return n(G,function(ne){switch(ne.label){case 0:if(!V.initCalled)throw Error("init function not called");return[4,R(!1)];case 1:return ie=ne.sent(),[4,E(ie)];case 2:if(Ee=ne.sent(),Ee.result==="API_ERROR")throw Ee.error;return[2,Ee.result==="RETRY"]}})})},V}();e.default=m;var x="st-last-access-token-update",v="st-refresh-token",b="st-access-token",w="sAntiCsrf",k="sFrontToken";function E(V){return r(this,void 0,void 0,function(){var G,ie,Ee,ne,ae,me,ve,q,Ne,Pe,ze,De,$e,et,ut;return n(this,function(kt){switch(kt.label){case 0:return[4,l.default.getReferenceOrThrow().lockFactory()];case 1:G=kt.sent(),kt.label=2;case 2:return(0,c.logDebugMessage)("onUnauthorisedResponse: trying to acquire lock"),[4,G.acquireLock("REFRESH_TOKEN_USE",1e3)];case 3:if(!kt.sent())return[3,21];(0,c.logDebugMessage)("onUnauthorisedResponse: lock acquired"),kt.label=4;case 4:return kt.trys.push([4,17,19,21]),[4,R(!1)];case 5:return ie=kt.sent(),ie.status==="NOT_EXISTS"?((0,c.logDebugMessage)("onUnauthorisedResponse: Not refreshing because local session state is NOT_EXISTS"),m.config.onHandleEvent({action:"UNAUTHORISED",sessionExpiredOrRevoked:!1,userContext:{}}),[2,{result:"SESSION_EXPIRED"}]):(Ee=ie.status==="EXISTS",ne=V.status==="EXISTS",ae=ie.status!==V.status,me="lastAccessTokenUpdate"in ie&&"lastAccessTokenUpdate"in V&&ie.lastAccessTokenUpdate!==V.lastAccessTokenUpdate,ae&&Ee?((0,c.logDebugMessage)("onUnauthorisedResponse: Retrying early because session status has changed and postLockLSS.status is EXISTS"),[2,{result:"RETRY"}]):Ee&&ne&&me?((0,c.logDebugMessage)("onUnauthorisedResponse: Retrying early because pre and post lastAccessTokenUpdate don't match"),[2,{result:"RETRY"}]):(ve=new Headers,V.status!=="EXISTS"?[3,7]:[4,f.getToken(V.lastAccessTokenUpdate)]));case 6:q=kt.sent(),q!==void 0&&((0,c.logDebugMessage)("onUnauthorisedResponse: Adding anti-csrf token to refresh API call"),ve.set("anti-csrf",q)),kt.label=7;case 7:return(0,c.logDebugMessage)("onUnauthorisedResponse: Adding rid and fdi-versions to refresh call header"),ve.set("rid",m.rid),ve.set("fdi-version",a.supported_fdi.join(",")),Ne=m.config.tokenTransferMethod,(0,c.logDebugMessage)("onUnauthorisedResponse: Adding st-auth-mode header: "+Ne),ve.set("st-auth-mode",Ne),[4,H(ve,!0)];case 8:return kt.sent(),(0,c.logDebugMessage)("onUnauthorisedResponse: Calling refresh pre API hook"),[4,m.config.preAPIHook({action:"REFRESH_SESSION",requestInit:{method:"post",credentials:"include",headers:ve},url:m.refreshTokenUrl,userContext:{}})];case 9:return Pe=kt.sent(),(0,c.logDebugMessage)("onUnauthorisedResponse: Making refresh call"),[4,m.env.__supertokensOriginalFetch(Pe.url,Pe.requestInit)];case 10:return ze=kt.sent(),(0,c.logDebugMessage)("onUnauthorisedResponse: Refresh call ended"),[4,te(ze)];case 11:return kt.sent(),(0,c.logDebugMessage)("onUnauthorisedResponse: Refresh status code is: "+ze.status),De=ze.status===m.config.sessionExpiredStatusCode,ze.headers.get("front-token")!==null?[3,14]:De?[4,p.setItem("remove")]:[3,13];case 12:return kt.sent(),[3,14];case 13:if(ze.status===200)throw $e="The 'front-token' header is missing from a successful refresh-session response. The most likely causes are proxy settings (e.g.: 'front-token' missing from 'access-control-expose-headers' or a proxy stripping this header). Please investigate your API.",console.error($e),new Error($e);kt.label=14;case 14:if(J(V.status==="EXISTS",ze.status,De&&ze.headers.get("front-token")===null?"remove":ze.headers.get("front-token")),ze.status>=300)throw ze;return[4,m.config.postAPIHook({action:"REFRESH_SESSION",fetchResponse:ze.clone(),requestInit:Pe.requestInit,url:Pe.url,userContext:{}})];case 15:return kt.sent(),[4,R(!1)];case 16:return kt.sent().status==="NOT_EXISTS"?((0,c.logDebugMessage)("onUnauthorisedResponse: local session doesn't exist, so returning session expired"),[2,{result:"SESSION_EXPIRED"}]):(m.config.onHandleEvent({action:"REFRESH_SESSION",userContext:{}}),(0,c.logDebugMessage)("onUnauthorisedResponse: Sending RETRY signal"),[2,{result:"RETRY"}]);case 17:return et=kt.sent(),[4,R(!1)];case 18:return kt.sent().status==="NOT_EXISTS"?((0,c.logDebugMessage)("onUnauthorisedResponse: local session doesn't exist, so returning session expired"),[2,{result:"SESSION_EXPIRED",error:et}]):((0,c.logDebugMessage)("onUnauthorisedResponse: sending API_ERROR"),[2,{result:"API_ERROR",error:et}]);case 19:return[4,G.releaseLock("REFRESH_TOKEN_USE")];case 20:return kt.sent(),(0,c.logDebugMessage)("onUnauthorisedResponse: Released lock"),[7];case 21:return[4,R(!1)];case 22:return ut=kt.sent(),ut.status==="NOT_EXISTS"?((0,c.logDebugMessage)("onUnauthorisedResponse: lock acquired failed and local session doesn't exist, so sending SESSION_EXPIRED"),[2,{result:"SESSION_EXPIRED"}]):ut.status!==V.status||ut.status==="EXISTS"&&V.status==="EXISTS"&&ut.lastAccessTokenUpdate!==V.lastAccessTokenUpdate?((0,c.logDebugMessage)("onUnauthorisedResponse: lock acquired failed and retrying early because pre and post lastAccessTokenUpdate don't match"),[2,{result:"RETRY"}]):[3,2];case 23:return[2]}})})}e.onUnauthorisedResponse=E;function N(){(0,c.logDebugMessage)("onTokenUpdate: firing ACCESS_TOKEN_PAYLOAD_UPDATED event"),m.config.onHandleEvent({action:"ACCESS_TOKEN_PAYLOAD_UPDATED",userContext:{}})}e.onTokenUpdate=N;function P(V){return r(this,void 0,void 0,function(){var G;return n(this,function(ie){switch(ie.label){case 0:return ie.trys.push([0,2,,3]),[4,m.recipeImpl.getInvalidClaimsFromResponse({response:V,userContext:{}})];case 1:return G=ie.sent(),G&&m.config.onHandleEvent({action:"API_INVALID_CLAIM",claimValidationErrors:G,userContext:{}}),[3,3];case 2:return ie.sent(),[3,3];case 3:return[2]}})})}e.onInvalidClaimResponse=P;function R(V){return r(this,void 0,void 0,function(){var G,ie,Ee,ne,ae,me,ve;return n(this,function(q){switch(q.label){case 0:return(0,c.logDebugMessage)("getLocalSessionState: called"),[4,z(x)];case 1:return G=q.sent(),[4,p.doesTokenExists()];case 2:return ie=q.sent(),ie&&G!==void 0?((0,c.logDebugMessage)("getLocalSessionState: returning EXISTS since both frontToken and lastAccessTokenUpdate exists"),[2,{status:"EXISTS",lastAccessTokenUpdate:G}]):[3,3];case 3:return G?((0,c.logDebugMessage)("getLocalSessionState: returning NOT_EXISTS since frontToken was cleared but lastAccessTokenUpdate exists"),[2,{status:"NOT_EXISTS"}]):[3,4];case 4:return Ee={status:"MAY_EXIST"},V?((0,c.logDebugMessage)("getLocalSessionState: trying to refresh"),[4,E(Ee)]):[3,8];case 5:return ne=q.sent(),ne.result!=="RETRY"?((0,c.logDebugMessage)("getLocalSessionState: return NOT_EXISTS in case error from backend"+ne.result),[2,{status:"NOT_EXISTS"}]):[4,z(x)];case 6:return ae=q.sent(),[4,p.doesTokenExists()];case 7:if(me=q.sent(),!me||ae===void 0)throw ve="Failed to retrieve local session state from cookies after a successful session refresh. This indicates a configuration error or that the browser is preventing cookie writes.",console.error(ve),new Error(ve);return(0,c.logDebugMessage)("getLocalSessionState: returning EXISTS since both frontToken and lastAccessTokenUpdate exists post refresh"),[2,{status:"EXISTS",lastAccessTokenUpdate:ae}];case 8:return(0,c.logDebugMessage)("getLocalSessionState: returning: "+Ee.status),[2,Ee]}})})}e.getLocalSessionState=R;function O(V){switch(V){case"access":return b;case"refresh":return v}}e.getStorageNameForToken=O;function D(V,G){var ie=O(V);return G!==""?((0,c.logDebugMessage)("setToken: saved ".concat(V," token into cookies")),L(ie,G,Date.now()+31536e5)):((0,c.logDebugMessage)("setToken: cleared ".concat(V," token from cookies")),L(ie,G,0))}e.setToken=D;function L(V,G,ie){var Ee="Fri, 31 Dec 9999 23:59:59 GMT";ie!==Number.MAX_SAFE_INTEGER&&(Ee=new Date(ie).toUTCString());var ne=m.config.sessionTokenFrontendDomain;return ne==="localhost"||ne===o.default.getReferenceOrThrow().windowHandler.location.getHostName()?s.default.getReferenceOrThrow().cookieHandler.setCookie("".concat(V,"=").concat(G,";expires=").concat(Ee,";path=/;samesite=").concat(m.config.isInIframe?"none;secure":"lax")):s.default.getReferenceOrThrow().cookieHandler.setCookie("".concat(V,"=").concat(G,";expires=").concat(Ee,";domain=").concat(ne,";path=/;samesite=").concat(m.config.isInIframe?"none;secure":"lax"))}function B(V){return r(this,void 0,void 0,function(){var G;return n(this,function(ie){return G=O(V),[2,z(G)]})})}e.getTokenForHeaderAuth=B;function z(V){return r(this,void 0,void 0,function(){var G,ie,Ee,ne;return n(this,function(ae){switch(ae.label){case 0:return ie="; ",[4,s.default.getReferenceOrThrow().cookieHandler.getCookie()];case 1:return G=ie+ae.sent(),Ee=G.split("; "+V+"="),Ee.length>=2&&(ne=Ee.pop(),ne!==void 0)?[2,ne.split(";").shift()]:[2,void 0]}})})}function H(V,G){return G===void 0&&(G=!1),r(this,void 0,void 0,function(){var ie,Ee;return n(this,function(ne){switch(ne.label){case 0:return(0,c.logDebugMessage)("setTokenHeaders: adding existing tokens as header"),[4,B("access")];case 1:return ie=ne.sent(),[4,B("refresh")];case 2:return Ee=ne.sent(),(G||ie!==void 0)&&Ee!==void 0?V.has("Authorization")?(0,c.logDebugMessage)("setAuthorizationHeaderIfRequired: Authorization header defined by the user, not adding"):((0,c.logDebugMessage)("setAuthorizationHeaderIfRequired: added authorization header"),V.set("Authorization","Bearer ".concat(G?Ee:ie))):(0,c.logDebugMessage)("setAuthorizationHeaderIfRequired: token for header based auth not found"),[2]}})})}function te(V){return r(this,void 0,void 0,function(){var G,ie,Ee,ne,ae;return n(this,function(me){switch(me.label){case 0:return(0,c.logDebugMessage)("saveTokensFromHeaders: Saving updated tokens from the response headers"),G=V.headers.get("st-refresh-token"),G===null?[3,2]:((0,c.logDebugMessage)("saveTokensFromHeaders: saving new refresh token"),[4,D("refresh",G)]);case 1:me.sent(),me.label=2;case 2:return ie=V.headers.get("st-access-token"),ie===null?[3,4]:((0,c.logDebugMessage)("saveTokensFromHeaders: saving new access token"),[4,D("access",ie)]);case 3:me.sent(),me.label=4;case 4:return Ee=V.headers.get("front-token"),Ee===null?[3,6]:((0,c.logDebugMessage)("saveTokensFromHeaders: Setting sFrontToken: "+Ee),[4,p.setItem(Ee)]);case 5:me.sent(),(0,e.updateClockSkewUsingFrontToken)({frontToken:Ee,responseHeaders:V.headers}),me.label=6;case 6:return ne=V.headers.get("anti-csrf"),ne===null?[3,9]:[4,R(!1)];case 7:return ae=me.sent(),ae.status!=="EXISTS"?[3,9]:((0,c.logDebugMessage)("saveTokensFromHeaders: Setting anti-csrf token"),[4,f.setItem(ae.lastAccessTokenUpdate,ne)]);case 8:me.sent(),me.label=9;case 9:return[2]}})})}var Y=void 0;function W(){return r(this,void 0,void 0,function(){var V;return n(this,function(G){switch(G.label){case 0:return(0,c.logDebugMessage)("saveLastAccessTokenUpdate: called"),V=Date.now().toString(),(0,c.logDebugMessage)("saveLastAccessTokenUpdate: setting "+V),[4,L(x,V,Number.MAX_SAFE_INTEGER)];case 1:return G.sent(),Y!==void 0?[3,3]:[4,z(x)];case 2:Y=G.sent()===V,G.label=3;case 3:return Y===!1&&console.warn("Saving to cookies was not successful, this indicates a configuration error or the browser preventing us from writing the cookies."),[4,L("sIRTFrontend","",0)];case 4:return G.sent(),[2]}})})}e.saveLastAccessTokenUpdate=W;function Z(){return r(this,void 0,void 0,function(){function V(){return r(this,void 0,void 0,function(){var ie,Ee,ne,ae,me;return n(this,function(ve){switch(ve.label){case 0:return Ee="; ",[4,s.default.getReferenceOrThrow().cookieHandler.getCookie()];case 1:return ie=Ee+ve.sent(),ne=ie.split("; "+w+"="),ne.length>=2&&(ae=ne.pop(),ae!==void 0)?(me=ae.split(";").shift(),me===void 0?[2,null]:[2,me]):[2,null]}})})}var G;return n(this,function(ie){switch(ie.label){case 0:return(0,c.logDebugMessage)("getAntiCSRFToken: called"),[4,R(!0)];case 1:return ie.sent().status!=="EXISTS"?((0,c.logDebugMessage)("getAntiCSRFToken: Returning because local session state != EXISTS"),[2,null]):[4,V()];case 2:return G=ie.sent(),(0,c.logDebugMessage)("getAntiCSRFToken: returning: "+G),[2,G]}})})}function re(V){return r(this,void 0,void 0,function(){return n(this,function(G){switch(G.label){case 0:return(0,c.logDebugMessage)("setAntiCSRF: called: "+V),V===void 0?[3,2]:[4,L(w,V,Number.MAX_SAFE_INTEGER)];case 1:return G.sent(),[3,4];case 2:return[4,L(w,"",0)];case 3:G.sent(),G.label=4;case 4:return[2]}})})}e.setAntiCSRF=re;function X(){return r(this,void 0,void 0,function(){var V;return n(this,function(G){switch(G.label){case 0:return(0,c.logDebugMessage)("getFrontTokenFromCookie: called"),[4,z(k)];case 1:return V=G.sent(),[2,V===void 0?null:V]}})})}function Q(V){return JSON.parse(decodeURIComponent(escape(atob(V))))}function fe(){return r(this,void 0,void 0,function(){var V;return n(this,function(G){switch(G.label){case 0:return(0,c.logDebugMessage)("getFrontToken: called"),[4,R(!0)];case 1:return G.sent().status!=="EXISTS"?((0,c.logDebugMessage)("getFrontToken: Returning because sIRTFrontend != EXISTS"),[2,null]):[4,X()];case 2:return V=G.sent(),(0,c.logDebugMessage)("getFrontToken: returning: "+V),[2,V]}})})}e.getFrontToken=fe;function ye(V){return r(this,void 0,void 0,function(){var G,ie,Ee;return n(this,function(ne){switch(ne.label){case 0:return(0,c.logDebugMessage)("setFrontToken: called"),[4,X()];case 1:return G=ne.sent(),G!==null&&V!==void 0&&(ie=Q(G).up,Ee=Q(V).up,JSON.stringify(ie)!==JSON.stringify(Ee)&&N()),V!==void 0?[3,3]:[4,L(k,"",0)];case 2:return ne.sent(),[3,5];case 3:return[4,L(k,V,Number.MAX_SAFE_INTEGER)];case 4:ne.sent(),ne.label=5;case 5:return[2]}})})}e.setFrontToken=ye;function J(V,G,ie){if(ie==null){(0,c.logDebugMessage)("fireSessionUpdateEventsIfNecessary returning early because the front token was not updated");return}var Ee=ie!=="remove";(0,c.logDebugMessage)("fireSessionUpdateEventsIfNecessary wasLoggedIn: ".concat(V," frontTokenExistsAfter: ").concat(Ee," status: ").concat(G)),V?Ee||(G===m.config.sessionExpiredStatusCode?((0,c.logDebugMessage)("onUnauthorisedResponse: firing UNAUTHORISED event"),m.config.onHandleEvent({action:"UNAUTHORISED",sessionExpiredOrRevoked:!0,userContext:{}})):((0,c.logDebugMessage)("onUnauthorisedResponse: firing SIGN_OUT event"),m.config.onHandleEvent({action:"SIGN_OUT",userContext:{}}))):Ee&&((0,c.logDebugMessage)("onUnauthorisedResponse: firing SESSION_CREATED event"),m.config.onHandleEvent({action:"SESSION_CREATED",userContext:{}}))}e.fireSessionUpdateEventsIfNecessary=J;var ce=function(V){var G=V.frontToken,ie=V.responseHeaders;if((0,c.logDebugMessage)("updateClockSkewUsingFrontToken: frontToken: "+G),G==null||G==="remove"){(0,c.logDebugMessage)("updateClockSkewUsingFrontToken: the access token payload wasn't updated or is being removed, skipping clock skew update");return}var Ee=Q(G),ne=m.recipeImpl.calculateClockSkewInMillis({accessTokenPayload:Ee.up,responseHeaders:ie});d.default.getReferenceOrThrow().dateProvider.setClientClockSkewInMillis(ne),(0,c.logDebugMessage)("updateClockSkewUsingFrontToken: Client clock synchronized successfully")};e.updateClockSkewUsingFrontToken=ce})(Gy);var Ex={};Object.defineProperty(Ex,"__esModule",{value:!0});Ex.SessionClaimValidatorStore=void 0;var yie=function(){function e(){}return e.claimValidatorsAddedByOtherRecipes=[],e.addClaimValidatorFromOtherRecipe=function(t){e.claimValidatorsAddedByOtherRecipes.push(t)},e.getClaimValidatorsAddedByOtherRecipes=function(){return e.claimValidatorsAddedByOtherRecipes},e}();Ex.SessionClaimValidatorStore=yie;Ex.default=yie;Object.defineProperty(WO,"__esModule",{value:!0});WO.getGlobalClaimValidators=void 0;var $Ae=ao,zAe=Gy,HAe=Ex;function WAe(e,t){var r=(0,$Ae.getNormalisedUserContext)(t),n=HAe.default.getClaimValidatorsAddedByOtherRecipes(),i=zAe.default.recipeImpl.getGlobalClaimValidators({claimValidatorsAddedByOtherRecipes:n,userContext:r}),a=e!==void 0?e(i,r):i;return a}WO.getGlobalClaimValidators=WAe;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(WO)})(hie);var VAe={},i0=Ve&&Ve.__assign||function(){return i0=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},i0.apply(this,arguments)};Object.defineProperty(Br,"__esModule",{value:!0});Br.getPublicConfig=Br.getPublicPlugin=Br.applyPlugins=Br.normaliseUser=Br.normaliseUserResponse=Br.getGlobalClaimValidators=Br.getHashFromLocation=Br.getNormalisedUserContext=Br.checkForSSRErrorAndAppendIfNeeded=Br.getAllQueryParams=Br.getQueryParams=Br.isTest=Br.normaliseInputAppInfoOrThrowError=Br.appendQueryParamsToURL=void 0;var DL=$O,bie=Jv,qAe=BO,IA=Vy,GAe=HO,KAe=hie;function XAe(e,t){if(t===void 0)return e;try{var r=new URL(e);return Object.entries(t).forEach(function(a){var s=a[0],o=a[1];r.searchParams.set(s,o)}),r.href}catch{var n=e.startsWith("/")?"http:localhost":"http://localhost/",i=new URL("".concat(n).concat(e));return Object.entries(t).forEach(function(s){var o=s[0],l=s[1];i.searchParams.set(o,l)}),"".concat(i.pathname).concat(i.search)}}Br.appendQueryParamsToURL=XAe;function YAe(e,t){return t!==void 0?new IA.default(t):new IA.default(e)}function QAe(e){if(e===void 0)throw new Error("Please provide the appInfo object when calling supertokens.init");if(e.apiDomain===void 0)throw new Error("Please provide your apiDomain inside the appInfo object when calling supertokens.init");if(e.appName===void 0)throw new Error("Please provide your appName inside the appInfo object when calling supertokens.init");var t=new IA.default("");return e.apiGatewayPath!==void 0&&(t=new IA.default(e.apiGatewayPath)),{appName:e.appName,apiDomain:new qAe.default(e.apiDomain),apiBasePath:t.appendPath(YAe(bie.DEFAULT_API_BASE_PATH,e.apiBasePath))}}Br.normaliseInputAppInfoOrThrowError=QAe;function JAe(){try{return VAe.TEST_MODE==="testing"}catch{return!1}}Br.isTest=JAe;function ZAe(e){var t=new URLSearchParams(DL.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getSearch()),r=t.get(e);if(r!==null)return r}Br.getQueryParams=ZAe;function eTe(){return new URLSearchParams(DL.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getSearch())}Br.getAllQueryParams=eTe;function tTe(e){return typeof window>"u"&&(e=e+bie.SSR_ERROR),e}Br.checkForSSRErrorAndAppendIfNeeded=tTe;function rTe(e){return e===void 0?{}:e}Br.getNormalisedUserContext=rTe;function nTe(){return DL.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHash().substring(1)}Br.getHashFromLocation=nTe;function iTe(e){var t=e.overrideGlobalClaimValidators,r=e.userContext;return(0,KAe.getGlobalClaimValidators)(t,r)}Br.getGlobalClaimValidators=iTe;function aTe(e,t){return"createdNewRecipeUser"in t?t:{createdNewRecipeUser:t.createdNewUser,user:wie(e,t.user)}}Br.normaliseUserResponse=aTe;function wie(e,t){if("loginMethods"in t)return t;var r=t.email!==void 0?[t.email]:[],n=t.phoneNumber!==void 0?[t.phoneNumber]:[],i=t.thirdParty!==void 0?[t.thirdParty]:[],a=t.webauthn!==void 0?t.webauthn:{credentialIds:[]};return{id:t.id,emails:r,phoneNumbers:n,thirdParty:i,webauthn:a,isPrimaryUser:!1,tenantIds:t.tenantIds,timeJoined:t.timeJoined,loginMethods:[{recipeId:e,recipeUserId:t.id,timeJoined:t.timeJoined,tenantIds:t.tenantIds,email:t.email,phoneNumber:t.email}]}}Br.normaliseUser=wie;function sTe(e,t,r){for(var n,i=i0({},t??{}),a=[(n=i.override)===null||n===void 0?void 0:n.functions],s=0,o=r;s<o.length;s++){var l=o[s],c=l[e];c&&(i=i0({},c.config?c.config(i):i),c.functions!==void 0&&a.push(c.functions))}return a=a.reverse().filter(function(d){return d!==void 0}),a.length>0&&(i.override=i0(i0({},i.override),{functions:function(d,f){for(var p=0,m=a;p<m.length;p++){var x=m[p];f.override(x)}return d}})),i}Br.applyPlugins=sTe;function oTe(e){return{id:e.id,initialized:!e.init,version:e.version,exports:e.exports,compatibleWebJSSDKVersions:e.compatibleWebJSSDKVersions}}Br.getPublicPlugin=oTe;function lTe(e){var t=Object.keys(e),r=t.reduce(function(n,i){var a;return GAe.nonPublicConfigProperties.includes(i)?n:i0(i0({},n),(a={},a[i]=e[i],a))},{});return r}Br.getPublicConfig=lTe;var Ky={},GO={};Object.defineProperty(GO,"__esModule",{value:!0});var cTe=function(){function e(t){this.config=t}return e}();GO.default=cTe;var ij={},aj={},n_={},Sd={},ow={},CV;function uTe(){if(CV)return ow;CV=1;var e=Ve&&Ve.__awaiter||function(i,a,s,o){function l(c){return c instanceof s?c:new s(function(d){d(c)})}return new(s||(s=Promise))(function(c,d){function f(x){try{m(o.next(x))}catch(v){d(v)}}function p(x){try{m(o.throw(x))}catch(v){d(v)}}function m(x){x.done?c(x.value):l(x.value).then(f,p)}m((o=o.apply(i,a||[])).next())})},t=Ve&&Ve.__generator||function(i,a){var s={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,l,c,d;return d={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(m){return function(x){return p([m,x])}}function p(m){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,l&&(c=m[0]&2?l.return:m[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,m[1])).done)return c;switch(l=0,c&&(m=[m[0]&2,c.value]),m[0]){case 0:case 1:c=m;break;case 4:return s.label++,{value:m[1],done:!1};case 5:s.label++,l=m[1],m=[0];continue;case 7:m=s.ops.pop(),s.trys.pop();continue;default:if(c=s.trys,!(c=c.length>0&&c[c.length-1])&&(m[0]===6||m[0]===2)){s=0;continue}if(m[0]===3&&(!c||m[1]>c[0]&&m[1]<c[3])){s.label=m[1];break}if(m[0]===6&&s.label<c[1]){s.label=c[1],c=m;break}if(c&&s.label<c[2]){s.label=c[2],s.ops.push(m);break}c[2]&&s.ops.pop(),s.trys.pop();continue}m=a.call(i,s)}catch(x){m=[6,x],l=0}finally{o=c=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}};Object.defineProperty(ow,"__esModule",{value:!0}),ow.createAxiosErrorFromFetchResp=void 0;function r(i,a,s,o,l){return i.config=a,s&&(i.code=s),i.request=o,i.response=l,i.isAxiosError=!0,i.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},i}function n(i){return e(this,void 0,void 0,function(){var a,s,o,l,c;return t(this,function(d){switch(d.label){case 0:if(a={url:i.url,headers:i.headers},s="status"in i,!s)return[3,12];if(l=i.headers.get("content-type"),c=void 0,l!==null)return[3,5];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,i.text()];case 2:return c=d.sent(),[3,4];case 3:return d.sent(),c="",[3,4];case 4:return[3,11];case 5:return l.includes("application/json")?[4,i.json()]:[3,7];case 6:return c=d.sent(),[3,11];case 7:return l.includes("text/")?[4,i.text()]:[3,9];case 8:return c=d.sent(),[3,11];case 9:return[4,i.blob()];case 10:c=d.sent(),d.label=11;case 11:o={data:c,status:i.status,statusText:i.statusText,headers:i.headers,config:a,request:void 0},d.label=12;case 12:return[2,r(s?new Error("Request failed with status code "+i.status):i,a,i.code,void 0,o)]}})})}return ow.createAxiosErrorFromFetchResp=n,ow}var kV;function dTe(){if(kV)return Sd;kV=1;var e=Ve&&Ve.__assign||function(){return e=Object.assign||function(k){for(var E,N=1,P=arguments.length;N<P;N++){E=arguments[N];for(var R in E)Object.prototype.hasOwnProperty.call(E,R)&&(k[R]=E[R])}return k},e.apply(this,arguments)},t=Ve&&Ve.__awaiter||function(k,E,N,P){function R(O){return O instanceof N?O:new N(function(D){D(O)})}return new(N||(N=Promise))(function(O,D){function L(H){try{z(P.next(H))}catch(te){D(te)}}function B(H){try{z(P.throw(H))}catch(te){D(te)}}function z(H){H.done?O(H.value):R(H.value).then(L,B)}z((P=P.apply(k,E||[])).next())})},r=Ve&&Ve.__generator||function(k,E){var N={label:0,sent:function(){if(O[0]&1)throw O[1];return O[1]},trys:[],ops:[]},P,R,O,D;return D={next:L(0),throw:L(1),return:L(2)},typeof Symbol=="function"&&(D[Symbol.iterator]=function(){return this}),D;function L(z){return function(H){return B([z,H])}}function B(z){if(P)throw new TypeError("Generator is already executing.");for(;N;)try{if(P=1,R&&(O=z[0]&2?R.return:z[0]?R.throw||((O=R.return)&&O.call(R),0):R.next)&&!(O=O.call(R,z[1])).done)return O;switch(R=0,O&&(z=[z[0]&2,O.value]),z[0]){case 0:case 1:O=z;break;case 4:return N.label++,{value:z[1],done:!1};case 5:N.label++,R=z[1],z=[0];continue;case 7:z=N.ops.pop(),N.trys.pop();continue;default:if(O=N.trys,!(O=O.length>0&&O[O.length-1])&&(z[0]===6||z[0]===2)){N=0;continue}if(z[0]===3&&(!O||z[1]>O[0]&&z[1]<O[3])){N.label=z[1];break}if(z[0]===6&&N.label<O[1]){N.label=O[1],O=z;break}if(O&&N.label<O[2]){N.label=O[2],N.ops.push(z);break}O[2]&&N.ops.pop(),N.trys.pop();continue}z=E.call(k,N)}catch(H){z=[6,H],R=0}finally{P=O=0}if(z[0]&5)throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}};Object.defineProperty(Sd,"__esModule",{value:!0}),Sd.responseErrorInterceptor=Sd.responseInterceptor=Sd.interceptorFunctionRequestFulfilled=void 0;var n=uTe(),i=Gy,a=VO,s=mu,o=yE();function l(k){k.__supertokensSessionRefreshAttempts===void 0&&(k.__supertokensSessionRefreshAttempts=0),k.__supertokensSessionRefreshAttempts++}function c(k){return k.__supertokensSessionRefreshAttempts===void 0&&(k.__supertokensSessionRefreshAttempts=0),k.__supertokensSessionRefreshAttempts>=i.default.config.maxRetryAttemptsForSessionRefresh}function d(k){var E=k.url===void 0?"":k.url,N=k.baseURL;return N!==void 0&&(E.charAt(0)==="/"&&N.charAt(N.length-1)==="/"?E=N+E.substr(1):E.charAt(0)!=="/"&&N.charAt(N.length-1)!=="/"?E=N+"/"+E:E=N+E),E}function f(k){return t(this,void 0,void 0,function(){var E,N,P,R,O,D;return r(this,function(L){switch(L.label){case 0:(0,o.logDebugMessage)("interceptorFunctionRequestFulfilled: started axios interception"),E=d(k),N=!1;try{N=typeof E=="string"&&!i.default.recipeImpl.shouldDoInterceptionBasedOnUrl(E,i.default.config.apiDomain,i.default.config.sessionTokenBackendDomain)}catch(B){if(B.message==="Please provide a valid domain name")(0,o.logDebugMessage)("interceptorFunctionRequestFulfilled: Trying shouldDoInterceptionBasedOnUrl with location.origin"),N=!i.default.recipeImpl.shouldDoInterceptionBasedOnUrl(s.default.getReferenceOrThrow().windowHandler.location.getOrigin(),i.default.config.apiDomain,i.default.config.sessionTokenBackendDomain);else throw B}return(0,o.logDebugMessage)("interceptorFunctionRequestFulfilled: Value of doNotDoInterception: "+N),N?((0,o.logDebugMessage)("interceptorFunctionRequestFulfilled: Returning config unchanged"),[2,k]):((0,o.logDebugMessage)("interceptorFunctionRequestFulfilled: Modifying config"),a.ProcessState.getInstance().addState(a.PROCESS_STATE.CALLING_INTERCEPTION_REQUEST),[4,(0,i.getLocalSessionState)(!0)]);case 1:return P=L.sent(),R=k,P.status!=="EXISTS"?[3,3]:[4,i.AntiCsrfToken.getToken(P.lastAccessTokenUpdate)];case 2:O=L.sent(),O!==void 0&&((0,o.logDebugMessage)("interceptorFunctionRequestFulfilled: Adding anti-csrf token to request"),R=e(e({},R),{headers:R===void 0?{"anti-csrf":O}:e(e({},R.headers),{"anti-csrf":O})})),L.label=3;case 3:return i.default.config.autoAddCredentials&&R.withCredentials===void 0&&((0,o.logDebugMessage)("interceptorFunctionRequestFulfilled: Adding credentials include"),R=e(e({},R),{withCredentials:!0})),(0,o.logDebugMessage)("interceptorFunctionRequestFulfilled: Adding rid header: anti-csrf (it may be overriden by the user's provided rid)"),R=e(e({},R),{headers:R===void 0?{rid:"anti-csrf"}:e({rid:"anti-csrf"},R.headers)}),D=i.default.config.tokenTransferMethod,(0,o.logDebugMessage)("interceptorFunctionRequestFulfilled: Adding st-auth-mode header: "+D),R.headers["st-auth-mode"]=D,[4,w(R)];case 4:return R=L.sent(),[4,v(R)];case 5:return L.sent(),(0,o.logDebugMessage)("interceptorFunctionRequestFulfilled: returning modified config"),[2,R]}})})}Sd.interceptorFunctionRequestFulfilled=f;function p(k){var E=this;return function(N){return t(E,void 0,void 0,function(){var P,R,O,D;return r(this,function(L){switch(L.label){case 0:if(P=!1,!i.default.initCalled)throw new Error("init function not called");(0,o.logDebugMessage)("responseInterceptor: started"),(0,o.logDebugMessage)("responseInterceptor: already intercepted: "+N.headers["x-supertokens-xhr-intercepted"]),R=d(N.config);try{P=typeof R=="string"&&!i.default.recipeImpl.shouldDoInterceptionBasedOnUrl(R,i.default.config.apiDomain,i.default.config.sessionTokenBackendDomain)||!!N.headers["x-supertokens-xhr-intercepted"]}catch(B){if(B.message==="Please provide a valid domain name")(0,o.logDebugMessage)("responseInterceptor: Trying shouldDoInterceptionBasedOnUrl with location.origin"),P=!i.default.recipeImpl.shouldDoInterceptionBasedOnUrl(s.default.getReferenceOrThrow().windowHandler.location.getOrigin(),i.default.config.apiDomain,i.default.config.sessionTokenBackendDomain)||!!N.headers["x-supertokens-xhr-intercepted"];else throw B}return(0,o.logDebugMessage)("responseInterceptor: Value of doNotDoInterception: "+P),P?((0,o.logDebugMessage)("responseInterceptor: Returning without interception"),[2,N]):((0,o.logDebugMessage)("responseInterceptor: Interception started"),a.ProcessState.getInstance().addState(a.PROCESS_STATE.CALLING_INTERCEPTION_RESPONSE),[4,(0,i.getLocalSessionState)(!1)]);case 1:return O=L.sent(),[4,b(N)];case 2:return L.sent(),(0,i.fireSessionUpdateEventsIfNecessary)(O.status==="EXISTS",N.status,N.headers["front-token"]),N.status!==i.default.config.sessionExpiredStatusCode?[3,3]:((0,o.logDebugMessage)("responseInterceptor: Status code is: "+N.status),D=N.config,[2,x.doRequest(function(B){return k(B)},D,R,N,void 0,!0)]);case 3:return N.status!==i.default.config.invalidClaimStatusCode?[3,5]:[4,(0,i.onInvalidClaimResponse)(N)];case 4:L.sent(),L.label=5;case 5:return[2,N]}})})}}Sd.responseInterceptor=p;function m(k){var E=this;return function(N){return t(E,void 0,void 0,function(){var P;return r(this,function(R){switch(R.label){case 0:if((0,o.logDebugMessage)("responseErrorInterceptor: called"),(0,o.logDebugMessage)("responseErrorInterceptor: already intercepted: "+(N.response&&N.response.headers["x-supertokens-xhr-intercepted"])),N.response===void 0||N.response.headers["x-supertokens-xhr-intercepted"])throw N;return N.response!==void 0&&N.response.status===i.default.config.sessionExpiredStatusCode?((0,o.logDebugMessage)("responseErrorInterceptor: Status code is: "+N.response.status),P=N.config,[2,x.doRequest(function(O){return k(O)},P,d(P),void 0,N,!0)]):[3,1];case 1:return N.response!==void 0&&N.response.status===i.default.config.invalidClaimStatusCode?[4,(0,i.onInvalidClaimResponse)(N.response)]:[3,3];case 2:R.sent(),R.label=3;case 3:throw N}})})}}Sd.responseErrorInterceptor=m;var x=function(){function k(){}var E;return E=k,k.doRequest=function(N,P,R,O,D,L){return L===void 0&&(L=!1),t(void 0,void 0,void 0,function(){var B,z,H,te,Y,W,Z,re,fe,X,Q,fe,ye,J,ce;return r(E,function(V){switch(V.label){case 0:if(!i.default.initCalled)throw Error("init function not called");(0,o.logDebugMessage)("doRequest: called"),B=!1;try{B=typeof R=="string"&&!i.default.recipeImpl.shouldDoInterceptionBasedOnUrl(R,i.default.config.apiDomain,i.default.config.sessionTokenBackendDomain)&&L}catch(G){if(G.message==="Please provide a valid domain name")(0,o.logDebugMessage)("doRequest: Trying shouldDoInterceptionBasedOnUrl with location.origin"),B=!i.default.recipeImpl.shouldDoInterceptionBasedOnUrl(s.default.getReferenceOrThrow().windowHandler.location.getOrigin(),i.default.config.apiDomain,i.default.config.sessionTokenBackendDomain)&&L;else throw G}if((0,o.logDebugMessage)("doRequest: Value of doNotDoInterception: "+B),!B)return[3,2];if((0,o.logDebugMessage)("doRequest: Returning without interception"),D!==void 0)throw D;return O!==void 0?[2,O]:[4,N(P)];case 1:return[2,V.sent()];case 2:return(0,o.logDebugMessage)("doRequest: Interception started"),[4,w(P)];case 3:P=V.sent(),z=void 0,V.label=4;case 4:return[4,(0,i.getLocalSessionState)(!0)];case 5:return H=V.sent(),te=P,H.status!=="EXISTS"?[3,7]:[4,i.AntiCsrfToken.getToken(H.lastAccessTokenUpdate)];case 6:Y=V.sent(),Y!==void 0&&((0,o.logDebugMessage)("doRequest: Adding anti-csrf token to request"),te=e(e({},te),{headers:te===void 0?{"anti-csrf":Y}:e(e({},te.headers),{"anti-csrf":Y})})),V.label=7;case 7:return i.default.config.autoAddCredentials&&te.withCredentials===void 0&&((0,o.logDebugMessage)("doRequest: Adding credentials include"),te=e(e({},te),{withCredentials:!0})),(0,o.logDebugMessage)("doRequest: Adding rid header: anti-csrf (May get overriden by user's rid)"),te=e(e({},te),{headers:te===void 0?{rid:"anti-csrf"}:e({rid:"anti-csrf"},te.headers)}),W=i.default.config.tokenTransferMethod,(0,o.logDebugMessage)("doRequest: Adding st-auth-mode header: "+W),te.headers["st-auth-mode"]=W,[4,v(te)];case 8:V.sent(),V.label=9;case 9:if(V.trys.push([9,14,,27]),Z=D,re=O,D=void 0,O=void 0,Z!==void 0)throw(0,o.logDebugMessage)("doRequest: Not making call because localPrevError is not undefined"),Z;return re!==void 0?(0,o.logDebugMessage)("doRequest: Not making call because localPrevResponse is not undefined"):(0,o.logDebugMessage)("doRequest: Making user's http call"),re!==void 0?[3,11]:[4,N(te)];case 10:return X=V.sent(),[3,12];case 11:X=re,V.label=12;case 12:return fe=X,(0,o.logDebugMessage)("doRequest: User's http call ended"),[4,b(fe)];case 13:return V.sent(),(0,i.fireSessionUpdateEventsIfNecessary)(H.status==="EXISTS",fe.status,fe.headers["front-token"]),[2,fe];case 14:return Q=V.sent(),fe=Q.response,fe===void 0?[3,25]:[4,b(fe)];case 15:if(V.sent(),(0,i.fireSessionUpdateEventsIfNecessary)(H.status==="EXISTS",fe.status,fe.headers["front-token"]),fe.status!==i.default.config.sessionExpiredStatusCode)return[3,21];if((0,o.logDebugMessage)("doRequest: Status code is: "+fe.status),c(P))throw(0,o.logDebugMessage)("doRequest: Maximum session refresh attempts reached. sessionRefreshAttempts: ".concat(P.__supertokensSessionRefreshAttempts,", maxRetryAttemptsForSessionRefresh: ").concat(i.default.config.maxRetryAttemptsForSessionRefresh)),ye="Received a 401 response from ".concat(R,". Attempted to refresh the session and retry the request with the updated session tokens ").concat(i.default.config.maxRetryAttemptsForSessionRefresh," times, but each attempt resulted in a 401 error. The maximum session refresh limit has been reached. Please investigate your API. To increase the session refresh attempts, update maxRetryAttemptsForSessionRefresh in the config."),console.error(ye),new Error(ye);return[4,(0,i.onUnauthorisedResponse)(H)];case 16:return J=V.sent(),l(P),(0,o.logDebugMessage)("doRequest: sessionRefreshAttempts: "+P.__supertokensSessionRefreshAttempts),J.result==="RETRY"?[3,20]:((0,o.logDebugMessage)("doRequest: Not retrying original request"),J.error===void 0?[3,18]:[4,(0,n.createAxiosErrorFromFetchResp)(J.error)]);case 17:return ce=V.sent(),[3,19];case 18:ce=Q,V.label=19;case 19:return z=ce,[3,28];case 20:return(0,o.logDebugMessage)("doRequest: Retrying original request"),[3,24];case 21:return fe.status!==i.default.config.invalidClaimStatusCode?[3,23]:[4,(0,i.onInvalidClaimResponse)(fe)];case 22:V.sent(),V.label=23;case 23:throw Q;case 24:return[3,26];case 25:throw Q;case 26:return[3,27];case 27:return[3,4];case 28:throw z}})})},k}();Sd.default=x;function v(k){return t(this,void 0,void 0,function(){var E,N;return r(this,function(P){switch(P.label){case 0:return k.headers===void 0&&(k.headers={}),(0,o.logDebugMessage)("setAuthorizationHeaderIfRequired: adding existing tokens as header"),[4,(0,i.getTokenForHeaderAuth)("access")];case 1:return E=P.sent(),[4,(0,i.getTokenForHeaderAuth)("refresh")];case 2:return N=P.sent(),E!==void 0&&N!==void 0?k.headers.Authorization!==void 0||k.headers.authorization!==void 0?(0,o.logDebugMessage)("setAuthorizationHeaderIfRequired: Authorization header defined by the user, not adding"):((0,o.logDebugMessage)("setAuthorizationHeaderIfRequired: added authorization header"),k.headers=e(e({},k.headers),{Authorization:"Bearer ".concat(E)}),k.__supertokensAddedAuthHeader=!0):(0,o.logDebugMessage)("setAuthorizationHeaderIfRequired: token for header based auth not found"),[2]}})})}function b(k){return t(this,void 0,void 0,function(){var E,N,P,R,O,D;return r(this,function(L){switch(L.label){case 0:return(0,o.logDebugMessage)("saveTokensFromHeaders: Saving updated tokens from the response"),E=k.headers["st-refresh-token"],E===void 0?[3,2]:((0,o.logDebugMessage)("saveTokensFromHeaders: saving new refresh token"),[4,(0,i.setToken)("refresh",E)]);case 1:L.sent(),L.label=2;case 2:return N=k.headers["st-access-token"],N===void 0?[3,4]:((0,o.logDebugMessage)("saveTokensFromHeaders: saving new access token"),[4,(0,i.setToken)("access",N)]);case 3:L.sent(),L.label=4;case 4:return P=k.headers["front-token"],P===void 0?[3,6]:((0,o.logDebugMessage)("doRequest: Setting sFrontToken: "+P),[4,i.FrontToken.setItem(P)]);case 5:L.sent(),R=new Headers,Object.entries(k.headers).forEach(function(B){var z=B[0],H=B[1];Array.isArray(H)?H.forEach(function(te){return R.append(z,te)}):R.append(z,H)}),(0,i.updateClockSkewUsingFrontToken)({frontToken:P,responseHeaders:R}),L.label=6;case 6:return O=k.headers["anti-csrf"],O===void 0?[3,9]:[4,(0,i.getLocalSessionState)(!1)];case 7:return D=L.sent(),D.status!=="EXISTS"?[3,9]:((0,o.logDebugMessage)("doRequest: Setting anti-csrf token"),[4,i.AntiCsrfToken.setItem(D.lastAccessTokenUpdate,O)]);case 8:L.sent(),L.label=9;case 9:return[2]}})})}function w(k){return t(this,void 0,void 0,function(){var E,N,P,R;return r(this,function(O){switch(O.label){case 0:return[4,(0,i.getTokenForHeaderAuth)("access")];case 1:return E=O.sent(),[4,(0,i.getTokenForHeaderAuth)("refresh")];case 2:return N=O.sent(),P=k.headers.Authorization||k.headers.authorization,E!==void 0&&N!==void 0&&(P==="Bearer ".concat(E)||"__supertokensAddedAuthHeader"in k)?((0,o.logDebugMessage)("removeAuthHeaderIfMatchesLocalToken: Removing Authorization from user provided headers because it contains our access token"),R=e(e({},k),{headers:e({},k.headers)}),delete R.headers.authorization,delete R.headers.Authorization,[2,R]):[2,k]}})})}return Sd}var lw={},_V;function fTe(){if(_V)return lw;_V=1;var e=Ve&&Ve.__awaiter||function(p,m,x,v){function b(w){return w instanceof x?w:new x(function(k){k(w)})}return new(x||(x=Promise))(function(w,k){function E(R){try{P(v.next(R))}catch(O){k(O)}}function N(R){try{P(v.throw(R))}catch(O){k(O)}}function P(R){R.done?w(R.value):b(R.value).then(E,N)}P((v=v.apply(p,m||[])).next())})},t=Ve&&Ve.__generator||function(p,m){var x={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},v,b,w,k;return k={next:E(0),throw:E(1),return:E(2)},typeof Symbol=="function"&&(k[Symbol.iterator]=function(){return this}),k;function E(P){return function(R){return N([P,R])}}function N(P){if(v)throw new TypeError("Generator is already executing.");for(;x;)try{if(v=1,b&&(w=P[0]&2?b.return:P[0]?b.throw||((w=b.return)&&w.call(b),0):b.next)&&!(w=w.call(b,P[1])).done)return w;switch(b=0,w&&(P=[P[0]&2,w.value]),P[0]){case 0:case 1:w=P;break;case 4:return x.label++,{value:P[1],done:!1};case 5:x.label++,b=P[1],P=[0];continue;case 7:P=x.ops.pop(),x.trys.pop();continue;default:if(w=x.trys,!(w=w.length>0&&w[w.length-1])&&(P[0]===6||P[0]===2)){x=0;continue}if(P[0]===3&&(!w||P[1]>w[0]&&P[1]<w[3])){x.label=P[1];break}if(P[0]===6&&x.label<w[1]){x.label=w[1],w=P;break}if(w&&x.label<w[2]){x.label=w[2],x.ops.push(P);break}w[2]&&x.ops.pop(),x.trys.pop();continue}P=m.call(p,x)}catch(R){P=[6,R],b=0}finally{v=w=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}};Object.defineProperty(lw,"__esModule",{value:!0}),lw.addInterceptorsToXMLHttpRequest=void 0;var r=Gy,n=yE(),i=mu,a=VO,s=["readystatechange","abort","error","load","loadend","loadstart","progress","timeout"];function o(){var p=new Promise(function(x){return setTimeout(x,0)}),m=XMLHttpRequest;(0,n.logDebugMessage)("addInterceptorsToXMLHttpRequest called"),XMLHttpRequest=function(){var x=new m,v=this,b=[],w=[],k={},E,N=new Map,P=p;function R(X){P=P.finally(function(){var Q;return(Q=X())===null||Q===void 0?void 0:Q.catch(function(fe){var ye=new ProgressEvent("error");ye.error=fe,v.onerror!==void 0&&v.onerror!==null&&v.onerror(ye),H("error",ye)})})}var O="",D=!1,L=void 0,B,z=0;v.onload=null,v.onreadystatechange=null,v.onloadend=null,v.addEventListener=function(X,Q,fe){var ye=N.get(X);ye===void 0&&(ye=new Set,N.set(X,ye)),ye.add(Q)},v.removeEventListener=function(X,Q){var fe=N.get(X);fe===void 0&&(fe=new Set,N.set(X,fe)),fe.delete(Q)};function H(X,Q){var fe=N.get(X);(0,n.logDebugMessage)("XHRInterceptor dispatching ".concat(Q.type," to ").concat(fe?fe.size:0," listeners")),fe&&Array.from(fe).forEach(function(ye){return ye.apply(v,[Q])})}function te(){return e(this,void 0,void 0,function(){var X,Q,fe;return t(this,function(ye){switch(ye.label){case 0:if(L===void 0)throw new Error("Should never come here..");if((0,n.logDebugMessage)("XHRInterceptor.handleRetryPostRefreshing: preRequestLSS "+L.status),z>=r.default.config.maxRetryAttemptsForSessionRefresh)throw(0,n.logDebugMessage)("XHRInterceptor.handleRetryPostRefreshing: Maximum session refresh attempts reached. sessionRefreshAttempts: ".concat(z,", maxRetryAttemptsForSessionRefresh: ").concat(r.default.config.maxRetryAttemptsForSessionRefresh)),k.status=0,k.statusText="",k.responseType="",X="Received a 401 response from ".concat(O,". Attempted to refresh the session and retry the request with the updated session tokens ").concat(r.default.config.maxRetryAttemptsForSessionRefresh," times, but each attempt resulted in a 401 error. The maximum session refresh limit has been reached. Please investigate your API. To increase the session refresh attempts, update maxRetryAttemptsForSessionRefresh in the config."),console.error(X),new Error(X);return[4,(0,r.onUnauthorisedResponse)(L)];case 1:if(Q=ye.sent(),z++,(0,n.logDebugMessage)("XHRInterceptor.handleRetryPostRefreshing: sessionRefreshAttempts: "+z),Q.result!=="RETRY"){if((0,n.logDebugMessage)("XHRInterceptor.handleRetryPostRefreshing: Not retrying original request "+!!Q.error),Q.error!==void 0)throw Q.error;return[2,!0]}return(0,n.logDebugMessage)("XHRInterceptor.handleRetryPostRefreshing: Retrying original request"),fe=new m,Z(v,fe,!0),b.forEach(function(J){J(fe)}),re(fe,B),[2,!1]}})})}function Y(X){return e(this,void 0,void 0,function(){var Q,fe,ye,J,ce;return t(this,function(V){switch(V.label){case 0:if(D)return(0,n.logDebugMessage)("XHRInterceptor.handleResponse: Returning without interception"),[2,!0];V.label=1;case 1:return V.trys.push([1,7,,11]),(0,n.logDebugMessage)("XHRInterceptor.handleResponse: Interception started"),a.ProcessState.getInstance().addState(a.PROCESS_STATE.CALLING_INTERCEPTION_RESPONSE),Q=X.status,fe=f(X),[4,d(fe)];case 2:return V.sent(),(0,r.fireSessionUpdateEventsIfNecessary)(L.status==="EXISTS",Q,fe.get("front-token")),Q!==r.default.config.sessionExpiredStatusCode?[3,4]:((0,n.logDebugMessage)("responseInterceptor: Status code is: "+Q),[4,te()]);case 3:return[2,V.sent()];case 4:return Q!==r.default.config.invalidClaimStatusCode?[3,6]:[4,(0,r.onInvalidClaimResponse)({data:X.responseText})];case 5:V.sent(),V.label=6;case 6:return[2,!0];case 7:return ye=V.sent(),(0,n.logDebugMessage)("XHRInterceptor.handleResponse: caught error"),ye.status===void 0?[3,9]:[4,l(ye)];case 8:if(J=V.sent(),k.status=J.status,k.statusText=J.statusText,k.responseType=J.responseType,E=J.headers,J.responseType==="json")try{k.response=JSON.parse(J.responseText)}catch{k.response=J.responseText}else k.response=J.responseText;return k.responseText=J.responseText,[3,10];case 9:ce=new ProgressEvent("error"),ce.error=ye,v.onerror!==void 0&&v.onerror!==null&&v.onerror(ce),H("error",ce),V.label=10;case 10:return[2,!0];case 11:return[2]}})})}v.open=function(X,Q){(0,n.logDebugMessage)("XHRInterceptor.open called");var fe=arguments;O=Q;try{D=typeof O=="string"&&!r.default.recipeImpl.shouldDoInterceptionBasedOnUrl(O,r.default.config.apiDomain,r.default.config.sessionTokenBackendDomain)||typeof O!="string"&&!r.default.recipeImpl.shouldDoInterceptionBasedOnUrl(O.toString(),r.default.config.apiDomain,r.default.config.sessionTokenBackendDomain)}catch(ye){if(ye.message==="Please provide a valid domain name")(0,n.logDebugMessage)("XHRInterceptor.open: Trying shouldDoInterceptionBasedOnUrl with location.origin"),D=!r.default.recipeImpl.shouldDoInterceptionBasedOnUrl(i.default.getReferenceOrThrow().windowHandler.location.getOrigin(),r.default.config.apiDomain,r.default.config.sessionTokenBackendDomain);else throw ye}R(function(){b.push(function(ye){ye.open.apply(ye,fe)}),x.open.apply(x,fe)})},v.send=function(X){B=X,re(x,B)},v.setRequestHeader=function(X,Q){var fe=this;if((0,n.logDebugMessage)("XHRInterceptor.setRequestHeader: Called with ".concat(X)),D){R(function(){return x.setRequestHeader(X,Q)});return}X!=="anti-csrf"&&R(function(){return e(fe,void 0,void 0,function(){var ye,J;return t(this,function(ce){switch(ce.label){case 0:return X.toLowerCase()!=="authorization"?[3,3]:((0,n.logDebugMessage)("XHRInterceptor.setRequestHeader: checking if user provided auth header matches local token"),[4,(0,r.getTokenForHeaderAuth)("access")]);case 1:return ye=ce.sent(),[4,(0,r.getTokenForHeaderAuth)("refresh")];case 2:if(J=ce.sent(),ye!==void 0&&J!==void 0&&Q==="Bearer ".concat(ye))return(0,n.logDebugMessage)("XHRInterceptor.setRequestHeader: skipping Authorization from user provided headers because it contains our access token"),[2];ce.label=3;case 3:return b.push(function(V){V.setRequestHeader(X,Q)}),w.push({name:X,value:Q}),x.setRequestHeader(X,Q),[2]}})})})};var W=void 0;Z(v,x,!1);function Z(X,Q,fe){var ye,J=["load","loadend","readystatechange"];(0,n.logDebugMessage)("XHRInterceptor.setUpXHR called");for(var ce=function(ve){(0,n.logDebugMessage)("XHRInterceptor added listener for event ".concat(ve)),Q.addEventListener(ve,function(q){(0,n.logDebugMessage)("XHRInterceptor got event ".concat(ve)),J.includes(ve)||H(ve,q)})},V=0,G=s;V<G.length;V++){var ie=G[V];ce(ie)}if(Q.onload=function(ve){ye===void 0&&(ye=Y(Q)),ye.then(function(q){q&&(X.onload&&X.onload(ve),H("load",ve))})},Q.onreadystatechange=function(ve){Q.readyState===m.DONE?(ye===void 0&&(ye=Y(Q)),ye.then(function(q){q&&(X.onreadystatechange&&X.onreadystatechange(ve),H("readystatechange",ve))})):(X.onreadystatechange&&X.onreadystatechange(ve),H("readystatechange",ve))},Q.onloadend=function(ve){ye===void 0&&(ye=Y(Q)),ye.then(function(q){q&&(X.onloadend&&X.onloadend(ve),H("loadend",ve))})},X.getAllResponseHeaders=function(){var ve;return E?(ve="",E.forEach(function(q,Ne){return ve+="".concat(Ne,": ").concat(q,`\r
`)})):ve=Q.getAllResponseHeaders(),ve+`x-supertokens-xhr-intercepted: true\r
`},X.getResponseHeader=function(ve){return ve==="x-supertokens-xhr-intercepted"?"true":E?E.get(ve):Q.getResponseHeader(ve)},W===void 0){W=[];for(var Ee in Q)Ee in X||W.push(Ee)}for(var ne=function(ve){typeof Q[ve]=="function"?Object.defineProperty(X,ve,{configurable:!0,value:function(){var q=arguments;return fe||b.push(function(Ne){Ne[ve].apply(Ne,q)}),Q[ve].apply(Q,q)}}):Object.defineProperty(X,ve,{configurable:!0,get:function(){return k[ve]!==void 0?k[ve]:Q[ve]},set:function(q){fe||b.push(function(Ne){Ne[ve]=q}),(0,n.logDebugMessage)("XHRInterceptor.set[".concat(ve,"] = ").concat(q)),Q[ve]=q}})},ae=0,me=W;ae<me.length;ae++){var Ee=me[ae];ne(Ee)}}function re(X,Q){var fe=this;if((0,n.logDebugMessage)("XHRInterceptor.send: called"),(0,n.logDebugMessage)("XHRInterceptor.send: Value of doNotDoInterception: "+D),D){(0,n.logDebugMessage)("XHRInterceptor.send: Returning without interception"),R(function(){return X.send(Q)});return}(0,n.logDebugMessage)("XHRInterceptor.send: Interception started"),a.ProcessState.getInstance().addState(a.PROCESS_STATE.CALLING_INTERCEPTION_REQUEST),R(function(){return e(fe,void 0,void 0,function(){var ye,J;return t(this,function(ce){switch(ce.label){case 0:return[4,(0,r.getLocalSessionState)(!0)];case 1:return L=ce.sent(),L.status!=="EXISTS"?[3,3]:[4,r.AntiCsrfToken.getToken(L.lastAccessTokenUpdate)];case 2:ye=ce.sent(),ye!==void 0&&((0,n.logDebugMessage)("XHRInterceptor.send: Adding anti-csrf token to request"),X.setRequestHeader("anti-csrf",ye)),ce.label=3;case 3:return r.default.config.autoAddCredentials&&((0,n.logDebugMessage)("XHRInterceptor.send: Adding credentials include"),v.withCredentials=!0),w.some(function(V){return V.name==="rid"})?(0,n.logDebugMessage)("XHRInterceptor.send: rid header was already there in request"):((0,n.logDebugMessage)("XHRInterceptor.send: Adding rid header: anti-csrf"),X.setRequestHeader("rid","anti-csrf")),J=r.default.config.tokenTransferMethod,w.some(function(V){return V.name==="st-auth-mode"})?(0,n.logDebugMessage)("XHRInterceptor.send: st-auth-mode header was already there in request"):((0,n.logDebugMessage)("XHRInterceptor.send: Adding st-auth-mode header: "+J),X.setRequestHeader("st-auth-mode",J)),[4,c(X,w)];case 4:return ce.sent(),(0,n.logDebugMessage)("XHRInterceptor.send: Making user's http call"),[2,X.send(Q)]}})})})}},XMLHttpRequest.__interceptedBySuperTokens=!0,XMLHttpRequest.__original=m}lw.addInterceptorsToXMLHttpRequest=o;function l(p){return e(this,void 0,void 0,function(){var m,x,v,b,w;return t(this,function(k){switch(k.label){case 0:if(m=p.headers.get("content-type"),x="",v="text",m!==null)return[3,5];k.label=1;case 1:return k.trys.push([1,3,,4]),[4,p.text()];case 2:return x=k.sent(),[3,4];case 3:return k.sent(),x="",[3,4];case 4:return[3,9];case 5:return m.includes("application/json")?(v="json",w=(b=JSON).stringify,[4,p.json()]):[3,7];case 6:return x=w.apply(b,[k.sent()]),[3,9];case 7:return m.includes("text/")?[4,p.text()]:[3,9];case 8:x=k.sent(),k.label=9;case 9:return[2,{status:p.status,responseText:x,statusText:p.statusText,responseType:v,headers:p.headers}]}})})}function c(p,m){return e(this,void 0,void 0,function(){var x,v;return t(this,function(b){switch(b.label){case 0:return(0,n.logDebugMessage)("setAuthorizationHeaderIfRequired: adding existing tokens as header"),[4,(0,r.getTokenForHeaderAuth)("access")];case 1:return x=b.sent(),[4,(0,r.getTokenForHeaderAuth)("refresh")];case 2:return v=b.sent(),x!==void 0&&v!==void 0?m.some(function(w){var k=w.name;return k.toLowerCase()==="authorization"})?(0,n.logDebugMessage)("setAuthorizationHeaderIfRequired: Authorization header defined by the user, not adding"):x!==void 0&&((0,n.logDebugMessage)("setAuthorizationHeaderIfRequired: added authorization header"),p.setRequestHeader("Authorization","Bearer ".concat(x))):(0,n.logDebugMessage)("setAuthorizationHeaderIfRequired: token for header based auth not found"),[2]}})})}function d(p){return e(this,void 0,void 0,function(){var m,x,v,b,w;return t(this,function(k){switch(k.label){case 0:return(0,n.logDebugMessage)("saveTokensFromHeaders: Saving updated tokens from the response"),m=p.get("st-refresh-token"),m===null?[3,2]:((0,n.logDebugMessage)("saveTokensFromHeaders: saving new refresh token"),[4,(0,r.setToken)("refresh",m)]);case 1:k.sent(),k.label=2;case 2:return x=p.get("st-access-token"),x===null?[3,4]:((0,n.logDebugMessage)("saveTokensFromHeaders: saving new access token"),[4,(0,r.setToken)("access",x)]);case 3:k.sent(),k.label=4;case 4:return v=p.get("front-token"),v===null?[3,6]:((0,n.logDebugMessage)("saveTokensFromHeaders: Setting sFrontToken: "+v),[4,r.FrontToken.setItem(v)]);case 5:k.sent(),(0,r.updateClockSkewUsingFrontToken)({frontToken:v,responseHeaders:p}),k.label=6;case 6:return b=p.get("anti-csrf"),b===null?[3,9]:[4,(0,r.getLocalSessionState)(!1)];case 7:return w=k.sent(),w.status!=="EXISTS"?[3,9]:((0,n.logDebugMessage)("saveTokensFromHeaders: Setting anti-csrf token"),[4,r.AntiCsrfToken.setItem(w.lastAccessTokenUpdate,b)]);case 8:k.sent(),k.label=9;case 9:return[2]}})})}function f(p){return new Headers(p.getAllResponseHeaders().split(`\r
`).map(function(m){var x=m.indexOf(": ");return x===-1?["",""]:[m.slice(0,x),m.slice(x+2)]}).filter(function(m){return m[0].length!==0}))}return lw}var NV;function hTe(){if(NV)return n_;NV=1;var e=Ve&&Ve.__assign||function(){return e=Object.assign||function(v){for(var b,w=1,k=arguments.length;w<k;w++){b=arguments[w];for(var E in b)Object.prototype.hasOwnProperty.call(b,E)&&(v[E]=b[E])}return v},e.apply(this,arguments)},t=Ve&&Ve.__awaiter||function(v,b,w,k){function E(N){return N instanceof w?N:new w(function(P){P(N)})}return new(w||(w=Promise))(function(N,P){function R(L){try{D(k.next(L))}catch(B){P(B)}}function O(L){try{D(k.throw(L))}catch(B){P(B)}}function D(L){L.done?N(L.value):E(L.value).then(R,O)}D((k=k.apply(v,b||[])).next())})},r=Ve&&Ve.__generator||function(v,b){var w={label:0,sent:function(){if(N[0]&1)throw N[1];return N[1]},trys:[],ops:[]},k,E,N,P;return P={next:R(0),throw:R(1),return:R(2)},typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function R(D){return function(L){return O([D,L])}}function O(D){if(k)throw new TypeError("Generator is already executing.");for(;w;)try{if(k=1,E&&(N=D[0]&2?E.return:D[0]?E.throw||((N=E.return)&&N.call(E),0):E.next)&&!(N=N.call(E,D[1])).done)return N;switch(E=0,N&&(D=[D[0]&2,N.value]),D[0]){case 0:case 1:N=D;break;case 4:return w.label++,{value:D[1],done:!1};case 5:w.label++,E=D[1],D=[0];continue;case 7:D=w.ops.pop(),w.trys.pop();continue;default:if(N=w.trys,!(N=N.length>0&&N[N.length-1])&&(D[0]===6||D[0]===2)){w=0;continue}if(D[0]===3&&(!N||D[1]>N[0]&&D[1]<N[3])){w.label=D[1];break}if(D[0]===6&&w.label<N[1]){w.label=N[1],N=D;break}if(N&&w.label<N[2]){w.label=N[2],w.ops.push(D);break}N[2]&&w.ops.pop(),w.trys.pop();continue}D=b.call(v,w)}catch(L){D=[6,L],E=0}finally{k=N=0}if(D[0]&5)throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}};Object.defineProperty(n_,"__esModule",{value:!0});var n=Gy,i=dTe(),a=A0,s=yE(),o=xE,l=fTe(),c=ao,d=df,f=jL(),p=100,m="CLAIM_REFRESH_LOCK";function x(v){return{addXMLHttpRequestInterceptor:function(b){(0,s.logDebugMessage)("addXMLHttpRequestInterceptorAndReturnModified: called"),(0,l.addInterceptorsToXMLHttpRequest)()},addFetchInterceptorsAndReturnModifiedFetch:function(b){return(0,s.logDebugMessage)("addFetchInterceptorsAndReturnModifiedFetch: called"),function(w,k){return t(this,void 0,void 0,function(){return r(this,function(E){switch(E.label){case 0:return[4,n.default.doRequest(function(N){return b.originalFetch(typeof w=="object"&&"clone"in w?w.clone():w,e({},N))},k,w)];case 1:return[2,E.sent()]}})})}},addAxiosInterceptors:function(b){if((0,s.logDebugMessage)("addAxiosInterceptors: called"),XMLHttpRequest.__interceptedBySuperTokens){console.warn("Not adding axios interceptor since XMLHttpRequest is already added. This is just a warning."),console.warn("Our axios and XMLHttpRequest interceptors cannot be used at the same time."),console.warn("Since XMLHttpRequest is added automatically and supports axios by default, you can just remove addAxiosInterceptors from your code."),console.warn("If you want to continue using our axios interceptor, you can override addXMLHttpRequestInterceptor with an empty function."),(0,s.logDebugMessage)("addAxiosInterceptors: not adding, because XHR interceptors are already in place");return}for(var w=b.axiosInstance.interceptors.request,k=0;k<w.handlers.length;k++)if(w.handlers[k].fulfilled===i.interceptorFunctionRequestFulfilled){(0,s.logDebugMessage)("addAxiosInterceptors: not adding because already added on this instance");return}b.axiosInstance.interceptors.request.use(i.interceptorFunctionRequestFulfilled,function(E){return t(this,void 0,void 0,function(){return r(this,function(N){throw E})})}),b.axiosInstance.interceptors.response.use((0,i.responseInterceptor)(b.axiosInstance),(0,i.responseErrorInterceptor)(b.axiosInstance))},getUserId:function(b){return t(this,void 0,void 0,function(){var w;return r(this,function(k){switch(k.label){case 0:return(0,s.logDebugMessage)("getUserId: called"),[4,n.FrontToken.getTokenInfo()];case 1:if(w=k.sent(),w===void 0)throw new Error("No session exists");return(0,s.logDebugMessage)("getUserId: returning: "+w.uid),[2,w.uid]}})})},getAccessTokenPayloadSecurely:function(b){return t(this,void 0,void 0,function(){var w,k;return r(this,function(E){switch(E.label){case 0:return(0,s.logDebugMessage)("getAccessTokenPayloadSecurely: called"),[4,n.FrontToken.getTokenInfo()];case 1:if(w=E.sent(),w===void 0)throw new Error("No session exists");return w.ate<d.default.getReferenceOrThrow().dateProvider.now()?((0,s.logDebugMessage)("getAccessTokenPayloadSecurely: access token expired. Refreshing session"),[4,n.default.attemptRefreshingSession()]):[3,5];case 2:return k=E.sent(),k?[4,this.getAccessTokenPayloadSecurely({userContext:b.userContext})]:[3,4];case 3:return[2,E.sent()];case 4:throw new Error("Could not refresh session");case 5:return(0,s.logDebugMessage)("getAccessTokenPayloadSecurely: returning: "+JSON.stringify(w.up)),[2,w.up]}})})},doesSessionExist:function(b){return t(this,void 0,void 0,function(){var w,k,E;return r(this,function(N){switch(N.label){case 0:return(0,s.logDebugMessage)("doesSessionExist: called"),[4,n.FrontToken.getTokenInfo()];case 1:return w=N.sent(),w===void 0?((0,s.logDebugMessage)("doesSessionExist: access token does not exist locally"),[2,!1]):w.ate<d.default.getReferenceOrThrow().dateProvider.now()?((0,s.logDebugMessage)("doesSessionExist: access token expired. Refreshing session"),[4,(0,n.getLocalSessionState)(!1)]):[3,4];case 2:return k=N.sent(),[4,(0,n.onUnauthorisedResponse)(k)];case 3:return E=N.sent(),[2,E.result==="RETRY"];case 4:return[2,!0]}})})},signOut:function(b){return t(this,void 0,void 0,function(){var w,k,E,N;return r(this,function(P){switch(P.label){case 0:return(0,s.logDebugMessage)("signOut: called"),[4,this.doesSessionExist(b)];case 1:return P.sent()?((0,s.logDebugMessage)("signOut: Calling refresh pre API hook"),[4,v.preAPIHook({action:"SIGN_OUT",requestInit:{method:"post",headers:{"fdi-version":a.supported_fdi.join(","),rid:n.default.rid}},url:n.default.signOutUrl,userContext:b.userContext})]):((0,s.logDebugMessage)("signOut: exiting early because session does not exist"),(0,s.logDebugMessage)("signOut: firing SIGN_OUT event"),v.onHandleEvent({action:"SIGN_OUT",userContext:b.userContext}),[2]);case 2:return w=P.sent(),(0,s.logDebugMessage)("signOut: Calling API"),[4,fetch(w.url,w.requestInit)];case 3:if(k=P.sent(),(0,s.logDebugMessage)("signOut: API ended"),(0,s.logDebugMessage)("signOut: API responded with status code: "+k.status),k.status===v.sessionExpiredStatusCode)return[2];if(k.status>=300)throw k;return[4,v.postAPIHook({action:"SIGN_OUT",requestInit:w.requestInit,url:w.url,fetchResponse:k.clone(),userContext:b.userContext})];case 4:return P.sent(),[4,k.clone().json()];case 5:if(E=P.sent(),E.status==="GENERAL_ERROR")throw(0,s.logDebugMessage)("doRequest: Throwing general error"),N=E.message===void 0?"No Error Message Provided":E.message,new o.STGeneralError(N);return[2]}})})},getInvalidClaimsFromResponse:function(b){return t(this,void 0,void 0,function(){var w;return r(this,function(k){switch(k.label){case 0:return"body"in b.response?[4,b.response.clone().json()]:[3,2];case 1:return w=k.sent(),[3,3];case 2:typeof b.response.data=="string"?w=JSON.parse(b.response.data):w=b.response.data,k.label=3;case 3:return[2,w.claimValidationErrors]}})})},getGlobalClaimValidators:function(b){return b.claimValidatorsAddedByOtherRecipes},validateClaims:function(b){return t(this,void 0,void 0,function(){var w,k,E,N,P,R,z,O,D,L,B,z,H;return r(this,function(te){switch(te.label){case 0:k=0,te.label=1;case 1:return++k<p?[4,f.default.getReferenceOrThrow().lockFactory()]:[3,20];case 2:return E=te.sent(),(0,s.logDebugMessage)("validateClaims: trying to acquire claim refresh lock"),[4,E.acquireLock(m)];case 3:if(N=te.sent(),!N)return[3,18];te.label=4;case 4:return te.trys.push([4,,15,17]),[4,this.getAccessTokenPayloadSecurely({userContext:b.userContext})];case 5:w=te.sent(),(0,s.logDebugMessage)("validateClaims: claim refresh lock acquired"),P=0,R=b.claimValidators,te.label=6;case 6:return P<R.length?(z=R[P],[4,z.shouldRefresh(w,b.userContext)]):[3,14];case 7:if(!te.sent())return[3,13];te.label=8;case 8:return te.trys.push([8,10,,11]),[4,z.refresh(b.userContext)];case 9:return te.sent(),[3,11];case 10:return O=te.sent(),console.error("Encountered an error while refreshing validator ".concat(z.id),O),[3,11];case 11:return[4,this.getAccessTokenPayloadSecurely({userContext:b.userContext})];case 12:w=te.sent(),te.label=13;case 13:return P++,[3,6];case 14:return[3,17];case 15:return(0,s.logDebugMessage)("validateClaims: releasing claim refresh lock"),[4,E.releaseLock(m)];case 16:return te.sent(),[7];case 17:return[3,20];case 18:(0,s.logDebugMessage)("validateClaims: Retrying refresh lock ".concat(k,"/").concat(p)),te.label=19;case 19:return[3,1];case 20:return k!==p?[3,22]:((0,s.logDebugMessage)("validateClaims: ran out of retries while trying to acquire claim refresh lock"),[4,this.getAccessTokenPayloadSecurely({userContext:b.userContext})]);case 21:w=te.sent(),te.label=22;case 22:D=[],L=0,B=b.claimValidators,te.label=23;case 23:return L<B.length?(z=B[L],[4,z.validate(w,b.userContext)]):[3,26];case 24:H=te.sent(),H.isValid||D.push({id:z.id,reason:H.reason}),te.label=25;case 25:return L++,[3,23];case 26:return[2,D]}})})},shouldDoInterceptionBasedOnUrl:function(b,w,k){if((0,s.logDebugMessage)("shouldDoInterceptionBasedOnUrl: toCheckUrl: "+b+" apiDomain: "+w+" sessionTokenBackendDomain: "+k),b.includes("superTokensDoNotDoInterception"))return!1;b=(0,c.normaliseURLDomainOrThrowError)(b);var E=new URL(b),N=E.hostname,P=!1;if(w!==""){w=(0,c.normaliseURLDomainOrThrowError)(w);var R=new URL(w);P=N===R.hostname}if(k===void 0||P)return P;var O=(0,c.normaliseSessionScopeOrThrowError)(k);return(0,c.matchesDomainOrSubdomain)(N,O)},calculateClockSkewInMillis:function(b){var w=b.accessTokenPayload;(0,s.logDebugMessage)("calculateClockSkewInMillis: called");var k=w==null?void 0:w.iat;if(k===void 0||typeof k!="number")return(0,s.logDebugMessage)("calculateClockSkewInMillis: payload iat is undefined or not a number. This may happen due to an unsupported backend sdk. Returning 0"),0;var E=k*1e3,N=E-Date.now();return(0,s.logDebugMessage)("calculateClockSkewInMillis: returning "+N),N}}}return n_.default=x,n_}var ff={},KO={},OA=Ve&&Ve.__assign||function(){return OA=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},OA.apply(this,arguments)};Object.defineProperty(KO,"__esModule",{value:!0});KO.getProxyObject=void 0;function pTe(e){for(var t=OA(OA({},e),{_call:function(o,l){throw new Error("This function should only be called through the recipe object")}}),r=Object.keys(t),n=function(o){o!=="_call"&&(t[o]=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return this._call(o,l)})},i=0,a=r;i<a.length;i++){var s=a[i];n(s)}return t}KO.getProxyObject=pTe;Object.defineProperty(ff,"__esModule",{value:!0});ff.OverrideableBuilder=void 0;var mTe=KO,Sie=function(){function e(t){this.layers=[t],this.proxies=[]}return e.prototype.override=function(t){for(var r=(0,mTe.getProxyObject)(this.layers[0]),n=t(r,this),i=0,a=Object.keys(this.layers[0]);i<a.length;i++){var s=a[i];n[s]===r[s]||s==="_call"?delete n[s]:n[s]===void 0&&(n[s]=null)}return this.layers.push(n),this.proxies.push(r),this},e.prototype.build=function(){var t=this;if(this.result)return this.result;this.result={};for(var r=0,n=this.layers;r<n.length;r++)for(var i=n[r],a=0,s=Object.keys(i);a<s.length;a++){var o=s[a],l=i[o];l!==void 0&&(l===null?this.result[o]=void 0:typeof l=="function"?this.result[o]=l.bind(this.result):this.result[o]=l)}for(var c=function(p){var m=d.proxies[p];m._call=function(x,v){for(var b=p;b>=0;--b){var w=t.layers[b][x];if(w!=null)return w.bind(t.result).apply(void 0,v)}}},d=this,f=0;f<this.proxies.length;++f)c(f);return this.result},e}();ff.OverrideableBuilder=Sie;ff.default=Sie;var cw={},AV;function Eie(){if(AV)return cw;AV=1,Object.defineProperty(cw,"__esModule",{value:!0}),cw.PrimitiveClaim=void 0;var e=df,t=function(){function r(n){var i=this;this.validators={hasValue:function(a,s,o){s===void 0&&(s=i.defaultMaxAgeInSeconds);var l=e.default.getReferenceOrThrow().dateProvider;return{id:o!==void 0?o:i.id,refresh:function(c){return i.refresh(c)},shouldRefresh:function(c,d){if(s!==void 0&&s<l.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(l.getThresholdInSeconds()));return i.getValueFromPayload(c,d)===void 0||s!==void 0&&c[i.id].t<l.now()-s*1e3},validate:function(c,d){var f=i.getValueFromPayload(c,d);if(f===void 0)return{isValid:!1,reason:{message:"value does not exist",expectedValue:a,actualValue:f}};var p=(l.now()-i.getLastFetchedTime(c,d))/1e3;return s!==void 0&&p>s?{isValid:!1,reason:{message:"expired",ageInSeconds:p,maxAgeInSeconds:s}}:f!==a?{isValid:!1,reason:{message:"wrong value",expectedValue:a,actualValue:f}}:{isValid:!0}}}}},this.id=n.id,this.refresh=n.refresh,this.defaultMaxAgeInSeconds=n.defaultMaxAgeInSeconds}return r.prototype.getValueFromPayload=function(n,i){return n[this.id]!==void 0?n[this.id].v:void 0},r.prototype.getLastFetchedTime=function(n,i){return n[this.id]!==void 0?n[this.id].t:void 0},r}();return cw.PrimitiveClaim=t,cw}var uw={},TV;function gTe(){if(TV)return uw;TV=1;var e=Ve&&Ve.__awaiter||function(i,a,s,o){function l(c){return c instanceof s?c:new s(function(d){d(c)})}return new(s||(s=Promise))(function(c,d){function f(x){try{m(o.next(x))}catch(v){d(v)}}function p(x){try{m(o.throw(x))}catch(v){d(v)}}function m(x){x.done?c(x.value):l(x.value).then(f,p)}m((o=o.apply(i,a||[])).next())})},t=Ve&&Ve.__generator||function(i,a){var s={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,l,c,d;return d={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(m){return function(x){return p([m,x])}}function p(m){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,l&&(c=m[0]&2?l.return:m[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,m[1])).done)return c;switch(l=0,c&&(m=[m[0]&2,c.value]),m[0]){case 0:case 1:c=m;break;case 4:return s.label++,{value:m[1],done:!1};case 5:s.label++,l=m[1],m=[0];continue;case 7:m=s.ops.pop(),s.trys.pop();continue;default:if(c=s.trys,!(c=c.length>0&&c[c.length-1])&&(m[0]===6||m[0]===2)){s=0;continue}if(m[0]===3&&(!c||m[1]>c[0]&&m[1]<c[3])){s.label=m[1];break}if(m[0]===6&&s.label<c[1]){s.label=c[1],c=m;break}if(c&&s.label<c[2]){s.label=c[2],s.ops.push(m);break}c[2]&&s.ops.pop(),s.trys.pop();continue}m=a.call(i,s)}catch(x){m=[6,x],l=0}finally{o=c=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}};Object.defineProperty(uw,"__esModule",{value:!0}),uw.PrimitiveArrayClaim=void 0;var r=df,n=function(){function i(a){var s=this;this.validators={includes:function(o,l,c){l===void 0&&(l=s.defaultMaxAgeInSeconds);var d=r.default.getReferenceOrThrow().dateProvider;return{id:c!==void 0?c:s.id,refresh:function(f){return s.refresh(f)},shouldRefresh:function(f,p){if(l!==void 0&&l<d.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(d.getThresholdInSeconds()));return s.getValueFromPayload(f,p)===void 0||l!==void 0&&f[s.id].t<d.now()-l*1e3},validate:function(f,p){return e(s,void 0,void 0,function(){var m,x;return t(this,function(v){return m=this.getValueFromPayload(f,p),m===void 0?[2,{isValid:!1,reason:{message:"value does not exist",expectedToInclude:o,actualValue:m}}]:(x=(d.now()-this.getLastFetchedTime(f,p))/1e3,l!==void 0&&x>l?[2,{isValid:!1,reason:{message:"expired",ageInSeconds:x,maxAgeInSeconds:l}}]:m.includes(o)?[2,{isValid:!0}]:[2,{isValid:!1,reason:{message:"wrong value",expectedToInclude:o,actualValue:m}}])})})}}},excludes:function(o,l,c){l===void 0&&(l=s.defaultMaxAgeInSeconds);var d=r.default.getReferenceOrThrow().dateProvider;return{id:c!==void 0?c:s.id,refresh:function(f){return s.refresh(f)},shouldRefresh:function(f,p){if(l!==void 0&&l<d.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(d.getThresholdInSeconds()));return s.getValueFromPayload(f,p)===void 0||l!==void 0&&f[s.id].t<d.now()-l*1e3},validate:function(f,p){return e(s,void 0,void 0,function(){var m,x;return t(this,function(v){return m=this.getValueFromPayload(f,p),m===void 0?[2,{isValid:!1,reason:{message:"value does not exist",expectedToNotInclude:o,actualValue:m}}]:(x=(d.now()-this.getLastFetchedTime(f,p))/1e3,l!==void 0&&x>l?[2,{isValid:!1,reason:{message:"expired",ageInSeconds:x,maxAgeInSeconds:l}}]:m.includes(o)?[2,{isValid:!1,reason:{message:"wrong value",expectedToNotInclude:o,actualValue:m}}]:[2,{isValid:!0}])})})}}},includesAll:function(o,l,c){l===void 0&&(l=s.defaultMaxAgeInSeconds);var d=r.default.getReferenceOrThrow().dateProvider;return{id:c!==void 0?c:s.id,refresh:function(f){return s.refresh(f)},shouldRefresh:function(f,p){if(l!==void 0&&l<d.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(d.getThresholdInSeconds()));return s.getValueFromPayload(f,p)===void 0||l!==void 0&&f[s.id].t<d.now()-l*1e3},validate:function(f,p){return e(s,void 0,void 0,function(){var m,x,v,b;return t(this,function(w){return m=this.getValueFromPayload(f,p),m===void 0?[2,{isValid:!1,reason:{message:"value does not exist",expectedToInclude:o,actualValue:m}}]:(x=(d.now()-this.getLastFetchedTime(f,p))/1e3,l!==void 0&&x>l?[2,{isValid:!1,reason:{message:"expired",ageInSeconds:x,maxAgeInSeconds:l}}]:(v=new Set(m),b=o.every(function(k){return v.has(k)}),[2,b?{isValid:b}:{isValid:b,reason:{message:"wrong value",expectedToInclude:o,actualValue:m}}]))})})}}},includesAny:function(o,l,c){l===void 0&&(l=s.defaultMaxAgeInSeconds);var d=r.default.getReferenceOrThrow().dateProvider;return{id:c!==void 0?c:s.id,refresh:function(f){return s.refresh(f)},shouldRefresh:function(f,p){if(l!==void 0&&l<d.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(d.getThresholdInSeconds()));return s.getValueFromPayload(f,p)===void 0||l!==void 0&&f[s.id].t<d.now()-l*1e3},validate:function(f,p){return e(s,void 0,void 0,function(){var m,x,v,b;return t(this,function(w){return m=this.getValueFromPayload(f,p),m===void 0?[2,{isValid:!1,reason:{message:"value does not exist",expectedToInclude:o,actualValue:m}}]:(x=(d.now()-this.getLastFetchedTime(f,p))/1e3,l!==void 0&&x>l?[2,{isValid:!1,reason:{message:"expired",ageInSeconds:x,maxAgeInSeconds:l}}]:(v=new Set(m),b=o.some(function(k){return v.has(k)}),[2,b?{isValid:b}:{isValid:b,reason:{message:"wrong value",expectedToIncludeAtLeastOneOf:o,actualValue:m}}]))})})}}},excludesAll:function(o,l,c){l===void 0&&(l=s.defaultMaxAgeInSeconds);var d=r.default.getReferenceOrThrow().dateProvider;return{id:c!==void 0?c:s.id,refresh:function(f){return s.refresh(f)},shouldRefresh:function(f,p){if(l!==void 0&&l<d.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(d.getThresholdInSeconds()));return s.getValueFromPayload(f,p)===void 0||l!==void 0&&f[s.id].t<d.now()-l*1e3},validate:function(f,p){return e(s,void 0,void 0,function(){var m,x,v,b;return t(this,function(w){return m=this.getValueFromPayload(f,p),m===void 0?[2,{isValid:!1,reason:{message:"value does not exist",expectedToNotInclude:o,actualValue:m}}]:(x=(d.now()-this.getLastFetchedTime(f,p))/1e3,l!==void 0&&x>l?[2,{isValid:!1,reason:{message:"expired",ageInSeconds:x,maxAgeInSeconds:l}}]:(v=new Set(m),b=o.every(function(k){return!v.has(k)}),[2,b?{isValid:b}:{isValid:b,reason:{message:"wrong value",expectedToNotInclude:o,actualValue:m}}]))})})}}}},this.id=a.id,this.refresh=a.refresh,this.defaultMaxAgeInSeconds=a.defaultMaxAgeInSeconds}return i.prototype.getValueFromPayload=function(a,s){return a[this.id]!==void 0?a[this.id].v:void 0},i.prototype.getLastFetchedTime=function(a,s){return a[this.id]!==void 0?a[this.id].t:void 0},i}();return uw.PrimitiveArrayClaim=n,uw}var dw={},IV;function xTe(){if(IV)return dw;IV=1;var e=Ve&&Ve.__extends||function(){var i=function(a,s){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(o[c]=l[c])},i(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");i(a,s);function o(){this.constructor=a}a.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}(),t=Ve&&Ve.__assign||function(){return t=Object.assign||function(i){for(var a,s=1,o=arguments.length;s<o;s++){a=arguments[s];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])}return i},t.apply(this,arguments)};Object.defineProperty(dw,"__esModule",{value:!0}),dw.BooleanClaim=void 0;var r=Eie(),n=function(i){e(a,i);function a(s){var o=i.call(this,s)||this;return o.validators=t(t({},o.validators),{isTrue:function(l){return o.validators.hasValue(!0,l)},isFalse:function(l){return o.validators.hasValue(!1,l)}}),o}return a}(r.PrimitiveClaim);return dw.BooleanClaim=n,dw}var OV;function vTe(){return OV||(OV=1,function(e){var t=Ve&&Ve.__awaiter||function(w,k,E,N){function P(R){return R instanceof E?R:new E(function(O){O(R)})}return new(E||(E=Promise))(function(R,O){function D(z){try{B(N.next(z))}catch(H){O(H)}}function L(z){try{B(N.throw(z))}catch(H){O(H)}}function B(z){z.done?R(z.value):P(z.value).then(D,L)}B((N=N.apply(w,k||[])).next())})},r=Ve&&Ve.__generator||function(w,k){var E={label:0,sent:function(){if(R[0]&1)throw R[1];return R[1]},trys:[],ops:[]},N,P,R,O;return O={next:D(0),throw:D(1),return:D(2)},typeof Symbol=="function"&&(O[Symbol.iterator]=function(){return this}),O;function D(B){return function(z){return L([B,z])}}function L(B){if(N)throw new TypeError("Generator is already executing.");for(;E;)try{if(N=1,P&&(R=B[0]&2?P.return:B[0]?P.throw||((R=P.return)&&R.call(P),0):P.next)&&!(R=R.call(P,B[1])).done)return R;switch(P=0,R&&(B=[B[0]&2,R.value]),B[0]){case 0:case 1:R=B;break;case 4:return E.label++,{value:B[1],done:!1};case 5:E.label++,P=B[1],B=[0];continue;case 7:B=E.ops.pop(),E.trys.pop();continue;default:if(R=E.trys,!(R=R.length>0&&R[R.length-1])&&(B[0]===6||B[0]===2)){E=0;continue}if(B[0]===3&&(!R||B[1]>R[0]&&B[1]<R[3])){E.label=B[1];break}if(B[0]===6&&E.label<R[1]){E.label=R[1],R=B;break}if(R&&E.label<R[2]){E.label=R[2],E.ops.push(B);break}R[2]&&E.ops.pop(),E.trys.pop();continue}B=k.call(w,E)}catch(z){B=[6,z],P=0}finally{N=R=0}if(B[0]&5)throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.BooleanClaim=e.PrimitiveArrayClaim=e.PrimitiveClaim=e.getInvalidClaimsFromResponse=e.getClaimValue=e.validateClaims=e.signOut=e.addAxiosInterceptors=e.doesSessionExist=e.attemptRefreshingSession=e.getAccessToken=e.getAccessTokenPayloadSecurely=e.getUserId=e.init=void 0;var n=Gy,i=hTe(),a=ff,s=ao,o=Sx,l=mu,c=jL(),d=Ex,f=yE(),p=df,m=function(){function w(){}w.init=function(E){o.default.init(E.cookieHandler),l.default.init(E.windowHandler),p.default.init(E.dateProvider),c.default.init(E.lockFactory,l.default.getReferenceOrThrow().windowHandler.localStorage);var N=(0,s.validateAndNormaliseInputOrThrowError)(E);E.enableDebugLogs!==void 0&&E.enableDebugLogs&&(0,f.enableLogging)();var P=new a.default((0,i.default)({onHandleEvent:N.onHandleEvent,preAPIHook:N.preAPIHook,postAPIHook:N.postAPIHook,sessionExpiredStatusCode:N.sessionExpiredStatusCode})).override(N.override.functions).build();n.default.init(N,P),w.axiosInterceptorQueue.forEach(function(R){R()}),w.axiosInterceptorQueue=[]},w.getUserId=function(E){return n.default.recipeImpl.getUserId({userContext:(0,s.getNormalisedUserContext)(E===void 0?void 0:E.userContext)})},w.getAccessTokenPayloadSecurely=function(E){return t(this,void 0,void 0,function(){return r(this,function(N){return[2,n.default.recipeImpl.getAccessTokenPayloadSecurely({userContext:(0,s.getNormalisedUserContext)(E===void 0?void 0:E.userContext)})]})})};var k;return k=w,w.axiosInterceptorQueue=[],w.attemptRefreshingSession=function(){return t(void 0,void 0,void 0,function(){return r(k,function(E){return[2,n.default.attemptRefreshingSession()]})})},w.doesSessionExist=function(E){return n.default.recipeImpl.doesSessionExist({userContext:(0,s.getNormalisedUserContext)(E===void 0?void 0:E.userContext)})},w.addAxiosInterceptors=function(E,N){n.default.initCalled?n.default.recipeImpl.addAxiosInterceptors({axiosInstance:E,userContext:(0,s.getNormalisedUserContext)(N)}):w.axiosInterceptorQueue.push(function(){n.default.recipeImpl.addAxiosInterceptors({axiosInstance:E,userContext:(0,s.getNormalisedUserContext)(N)})})},w.signOut=function(E){return n.default.recipeImpl.signOut({userContext:(0,s.getNormalisedUserContext)(E===void 0?void 0:E.userContext)})},w.getInvalidClaimsFromResponse=function(E){return t(this,void 0,void 0,function(){return r(this,function(N){return[2,n.default.recipeImpl.getInvalidClaimsFromResponse({response:E.response,userContext:(0,s.getNormalisedUserContext)(E.userContext)})]})})},w.getClaimValue=function(E){return t(this,void 0,void 0,function(){var N,P;return r(this,function(R){switch(R.label){case 0:return N=(0,s.getNormalisedUserContext)(E===void 0?void 0:E.userContext),[4,w.getAccessTokenPayloadSecurely({userContext:N})];case 1:return P=R.sent(),[2,E.claim.getValueFromPayload(P,N)]}})})},w.validateClaims=function(E,N){var P=(0,s.getNormalisedUserContext)(N),R=d.SessionClaimValidatorStore.getClaimValidatorsAddedByOtherRecipes(),O=n.default.recipeImpl.getGlobalClaimValidators({claimValidatorsAddedByOtherRecipes:R,userContext:P}),D=E!==void 0?E(O,P):O;return D.length===0?[]:n.default.recipeImpl.validateClaims({claimValidators:D,userContext:(0,s.getNormalisedUserContext)(N)})},w.getAccessToken=function(E){return t(void 0,void 0,void 0,function(){return r(k,function(N){switch(N.label){case 0:return[4,n.default.recipeImpl.doesSessionExist({userContext:(0,s.getNormalisedUserContext)(E===void 0?void 0:E.userContext)})];case 1:return N.sent()?[2,(0,n.getTokenForHeaderAuth)("access")]:[2,void 0]}})})},w}();e.default=m,e.init=m.init,e.getUserId=m.getUserId,e.getAccessTokenPayloadSecurely=m.getAccessTokenPayloadSecurely,e.getAccessToken=m.getAccessToken,e.attemptRefreshingSession=m.attemptRefreshingSession,e.doesSessionExist=m.doesSessionExist,e.addAxiosInterceptors=m.addAxiosInterceptors,e.signOut=m.signOut,e.validateClaims=m.validateClaims,e.getClaimValue=m.getClaimValue,e.getInvalidClaimsFromResponse=m.getInvalidClaimsFromResponse;var x=Eie();Object.defineProperty(e,"PrimitiveClaim",{enumerable:!0,get:function(){return x.PrimitiveClaim}});var v=gTe();Object.defineProperty(e,"PrimitiveArrayClaim",{enumerable:!0,get:function(){return v.PrimitiveArrayClaim}});var b=xTe();Object.defineProperty(e,"BooleanClaim",{enumerable:!0,get:function(){return b.BooleanClaim}})}(aj)),aj}var PV;function Cie(){return PV||(PV=1,function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(vTe())}(ij)),ij}var bE={};Object.defineProperty(bE,"__esModule",{value:!0});bE.EMAILVERIFICATION_CLAIM_ID=void 0;bE.EMAILVERIFICATION_CLAIM_ID="st-ev";var yTe=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mc=Ve&&Ve.__assign||function(){return Mc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Mc.apply(this,arguments)},i_=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},a_=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},RV=Ve&&Ve.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(Ky,"__esModule",{value:!0});Ky.Recipe=void 0;var bTe=GO,Tu=Cie(),sj=Br,wTe=bE,jV=[wTe.EMAILVERIFICATION_CLAIM_ID],kie=function(e){yTe(t,e);function t(r){var n=e.call(this,r)||this;return n.getUserId=function(i){return Tu.default.getUserId({userContext:i.userContext})},n.getAccessToken=function(i){return i_(n,void 0,void 0,function(){return a_(this,function(a){return[2,Tu.default.getAccessToken({userContext:i.userContext})]})})},n.getAccessTokenPayloadSecurely=function(i){return i_(n,void 0,void 0,function(){return a_(this,function(a){return[2,Tu.default.getAccessTokenPayloadSecurely({userContext:i.userContext})]})})},n.doesSessionExist=function(i){return Tu.default.doesSessionExist({userContext:i.userContext})},n.signOut=function(i){return Tu.default.signOut({userContext:i.userContext})},n.attemptRefreshingSession=function(){return i_(n,void 0,void 0,function(){return a_(this,function(i){return[2,Tu.default.attemptRefreshingSession()]})})},n.validateClaims=function(i){return Tu.default.validateClaims(i.overrideGlobalClaimValidators,i.userContext)},Tu.default.init(Mc(Mc({},r),{override:{functions:function(i,a){var s;return a.override(function(o){return Mc(Mc({},o),{getGlobalClaimValidators:function(l){var c=o.getGlobalClaimValidators(l);return RV(RV([],c.filter(function(d){return jV.includes(d.id)}),!0),c.filter(function(d){return!jV.includes(d.id)}),!0)}})}),!((s=r.override)===null||s===void 0)&&s.functions&&a.override(r.override.functions),i}},preAPIHook:function(i){return i_(n,void 0,void 0,function(){var a,s;return a_(this,function(o){return a=new Headers(i.requestInit.headers),a.set("rid",r.recipeId),s=Mc(Mc({},i),{requestInit:Mc(Mc({},i.requestInit),{headers:a})}),r.preAPIHook===void 0?[2,s]:[2,r.preAPIHook(i)]})})},apiDomain:r.appInfo.apiDomain.getAsStringDangerous(),apiBasePath:r.appInfo.apiBasePath.getAsStringDangerous()})),n}return t.init=function(r){return function(n,i,a,s){return t.instance=new t(Mc(Mc({},(0,sj.applyPlugins)(t.RECIPE_ID,r,s??[])),{appInfo:n,recipeId:t.RECIPE_ID,enableDebugLogs:a})),t.instance}},t.prototype.getClaimValue=function(r){return Tu.default.getClaimValue(r)},t.prototype.getInvalidClaimsFromResponse=function(r){return Tu.default.getInvalidClaimsFromResponse(r)},t.addAxiosInterceptors=function(r,n){return Tu.default.addAxiosInterceptors(r,n)},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of Session found. Ensure that the 'Session.init' method is called within the 'SuperTokens.init' recipeList.";throw r=(0,sj.checkForSSRErrorAndAppendIfNeeded)(r),Error(r)}return t.instance},t.reset=function(){(0,sj.isTest)()&&(t.instance=void 0)},t.RECIPE_ID="session",t}(bTe.default);Ky.Recipe=kie;Ky.default=kie;(function(e){var t=Ve&&Ve.__awaiter||function(k,E,N,P){function R(O){return O instanceof N?O:new N(function(D){D(O)})}return new(N||(N=Promise))(function(O,D){function L(H){try{z(P.next(H))}catch(te){D(te)}}function B(H){try{z(P.throw(H))}catch(te){D(te)}}function z(H){H.done?O(H.value):R(H.value).then(L,B)}z((P=P.apply(k,E||[])).next())})},r=Ve&&Ve.__generator||function(k,E){var N={label:0,sent:function(){if(O[0]&1)throw O[1];return O[1]},trys:[],ops:[]},P,R,O,D;return D={next:L(0),throw:L(1),return:L(2)},typeof Symbol=="function"&&(D[Symbol.iterator]=function(){return this}),D;function L(z){return function(H){return B([z,H])}}function B(z){if(P)throw new TypeError("Generator is already executing.");for(;N;)try{if(P=1,R&&(O=z[0]&2?R.return:z[0]?R.throw||((O=R.return)&&O.call(R),0):R.next)&&!(O=O.call(R,z[1])).done)return O;switch(R=0,O&&(z=[z[0]&2,O.value]),z[0]){case 0:case 1:O=z;break;case 4:return N.label++,{value:z[1],done:!1};case 5:N.label++,R=z[1],z=[0];continue;case 7:z=N.ops.pop(),N.trys.pop();continue;default:if(O=N.trys,!(O=O.length>0&&O[O.length-1])&&(z[0]===6||z[0]===2)){N=0;continue}if(z[0]===3&&(!O||z[1]>O[0]&&z[1]<O[3])){N.label=z[1];break}if(z[0]===6&&N.label<O[1]){N.label=O[1],O=z;break}if(O&&N.label<O[2]){N.label=O[2],N.ops.push(z);break}O[2]&&N.ops.pop(),N.trys.pop();continue}z=E.call(k,N)}catch(H){z=[6,H],R=0}finally{P=O=0}if(z[0]&5)throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.getInvalidClaimsFromResponse=e.getClaimValue=e.validateClaims=e.signOut=e.addAxiosInterceptors=e.doesSessionExist=e.attemptRefreshingSession=e.getAccessToken=e.getAccessTokenPayloadSecurely=e.getUserId=e.init=e.BooleanClaim=e.PrimitiveArrayClaim=e.PrimitiveClaim=void 0;var n=Br,i=Ky,a=function(){function k(){}return k.init=function(E){return i.default.init(E)},k.getUserId=function(E){return i.default.getInstanceOrThrow().getUserId({userContext:(0,n.getNormalisedUserContext)(E==null?void 0:E.userContext)})},k.getAccessToken=function(E){return i.default.getInstanceOrThrow().getAccessToken({userContext:(0,n.getNormalisedUserContext)(E==null?void 0:E.userContext)})},k.getAccessTokenPayloadSecurely=function(E){return t(this,void 0,void 0,function(){return r(this,function(N){return[2,i.default.getInstanceOrThrow().getAccessTokenPayloadSecurely({userContext:(0,n.getNormalisedUserContext)(E==null?void 0:E.userContext)})]})})},k.attemptRefreshingSession=function(){return t(this,void 0,void 0,function(){return r(this,function(E){return[2,i.default.getInstanceOrThrow().attemptRefreshingSession()]})})},k.doesSessionExist=function(E){return i.default.getInstanceOrThrow().doesSessionExist({userContext:(0,n.getNormalisedUserContext)(E==null?void 0:E.userContext)})},k.addAxiosInterceptors=function(E,N){return i.default.addAxiosInterceptors(E,(0,n.getNormalisedUserContext)(N))},k.signOut=function(E){return i.default.getInstanceOrThrow().signOut({userContext:(0,n.getNormalisedUserContext)(E==null?void 0:E.userContext)})},k.getClaimValue=function(E){return i.default.getInstanceOrThrow().getClaimValue({claim:E.claim,userContext:(0,n.getNormalisedUserContext)(E==null?void 0:E.userContext)})},k.validateClaims=function(E){return i.default.getInstanceOrThrow().validateClaims({overrideGlobalClaimValidators:E==null?void 0:E.overrideGlobalClaimValidators,userContext:(0,n.getNormalisedUserContext)(E==null?void 0:E.userContext)})},k.getInvalidClaimsFromResponse=function(E){return i.default.getInstanceOrThrow().getInvalidClaimsFromResponse({response:E.response,userContext:(0,n.getNormalisedUserContext)(E==null?void 0:E.userContext)})},k}();e.default=a;var s=a.init;e.init=s;var o=a.getUserId;e.getUserId=o;var l=a.getAccessTokenPayloadSecurely;e.getAccessTokenPayloadSecurely=l;var c=a.getAccessToken;e.getAccessToken=c;var d=a.attemptRefreshingSession;e.attemptRefreshingSession=d;var f=a.doesSessionExist;e.doesSessionExist=f;var p=a.addAxiosInterceptors;e.addAxiosInterceptors=p;var m=a.signOut;e.signOut=m;var x=a.validateClaims;e.validateClaims=x;var v=a.getClaimValue;e.getClaimValue=v;var b=a.getInvalidClaimsFromResponse;e.getInvalidClaimsFromResponse=b;var w=Cie();Object.defineProperty(e,"PrimitiveClaim",{enumerable:!0,get:function(){return w.PrimitiveClaim}}),Object.defineProperty(e,"PrimitiveArrayClaim",{enumerable:!0,get:function(){return w.PrimitiveArrayClaim}}),Object.defineProperty(e,"BooleanClaim",{enumerable:!0,get:function(){return w.BooleanClaim}})})(zO);(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(zO)})(PL);var ML={},Cx={},ja={},_ie={},wE={},FL={},kx={};Object.defineProperty(kx,"__esModule",{value:!0});kx.PostSuperTokensInitCallbacks=void 0;var STe=function(){function e(){}return e.addPostInitCallback=function(t){e.postInitCallbacks.push(t)},e.runPostInitCallbacks=function(){for(var t=0,r=e.postInitCallbacks;t<r.length;t++){var n=r[t];n()}},e.postInitCallbacks=[],e}();kx.PostSuperTokensInitCallbacks=STe;var _x={},XO={},Nx={},SE={},DV=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},MV=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(SE,"__esModule",{value:!0});SE.normaliseRecipeModuleConfig=void 0;function ETe(e){var t=this,r=e.preAPIHook;r===void 0&&(r=function(i){return DV(t,void 0,void 0,function(){return MV(this,function(a){return[2,i]})})});var n=e.postAPIHook;return n===void 0&&(n=function(){return DV(t,void 0,void 0,function(){return MV(this,function(i){return[2]})})}),{recipeId:e.recipeId,appInfo:e.appInfo,clientType:e.clientType,preAPIHook:r,postAPIHook:n}}SE.normaliseRecipeModuleConfig=ETe;Object.defineProperty(Nx,"__esModule",{value:!0});Nx.normaliseAuthRecipe=void 0;var CTe=SE;function kTe(e){return(0,CTe.normaliseRecipeModuleConfig)(e)}Nx.normaliseAuthRecipe=kTe;var d2=Ve&&Ve.__assign||function(){return d2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},d2.apply(this,arguments)};Object.defineProperty(XO,"__esModule",{value:!0});XO.normaliseUserInput=void 0;var _Te=Nx;function NTe(e){var t=d2({functions:function(r){return r}},e.override);return d2(d2({},(0,_Te.normaliseAuthRecipe)(e)),{override:t})}XO.normaliseUserInput=NTe;var EE={},Ax={},Wg={};Object.defineProperty(Wg,"__esModule",{value:!0});Wg.supported_fdi=Wg.package_version=void 0;Wg.package_version="0.16.0";Wg.supported_fdi=["3.1","4.0","4.1","4.2"];var ts=Ve&&Ve.__assign||function(){return ts=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ts.apply(this,arguments)},Lf=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},Bf=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Ax,"__esModule",{value:!0});var ATe=Vy,TTe=Wg,ITe=Wy,OTe=function(){function e(r,n){var i=this;this.recipeId=r,this.appInfo=n,this.getPath=function(a){for(var s,o,l=typeof a=="string"?a:a.path,c=typeof a=="string"?{}:(s=a.pathParams)!==null&&s!==void 0?s:{},d=typeof a=="string"?{}:(o=a.queryParams)!==null&&o!==void 0?o:{},f=String(l),p=0,m=Object.entries(c);p<m.length;p++){var x=m[p],v=x[0],b=x[1];f=f.replace(new RegExp("<".concat(v,">"),"g"),String(b))}f=new ATe.default(f).getAsStringDangerous(),f.startsWith("/public/")&&(f=f.substring(7));var w=new URLSearchParams(d),k=w.toString();return k.length>0&&(f+="?"+w.toString()),f},this.safelyStringifyBody=function(a){return a?JSON.stringify(a):"{}"},this.get=function(a,s,o,l){return Lf(i,void 0,void 0,function(){var c,d,f;return Bf(this,function(p){switch(p.label){case 0:return c=this.getFullUrl(a),[4,this.fetch(c,ts(ts({method:"GET"},s),{body:void 0}),o,l)];case 1:return d=p.sent(),[4,this.getResponseJsonOrThrowGeneralError(d)];case 2:return f=p.sent(),[2,{jsonBody:f,fetchResponse:d}]}})})},this.post=function(a,s,o,l){return Lf(i,void 0,void 0,function(){var c,d;return Bf(this,function(f){switch(f.label){case 0:return[4,this.fetch(this.getFullUrl(a),ts(ts({method:"POST"},s),{body:this.safelyStringifyBody(s.body)}),o,l)];case 1:return c=f.sent(),[4,this.getResponseJsonOrThrowGeneralError(c)];case 2:return d=f.sent(),[2,{jsonBody:d,fetchResponse:c}]}})})},this.delete=function(a,s,o,l){return Lf(i,void 0,void 0,function(){var c,d;return Bf(this,function(f){switch(f.label){case 0:return[4,this.fetch(this.getFullUrl(a),ts(ts({method:"DELETE"},s),{body:this.safelyStringifyBody(s.body)}),o,l)];case 1:return c=f.sent(),[4,this.getResponseJsonOrThrowGeneralError(c)];case 2:return d=f.sent(),[2,{jsonBody:d,fetchResponse:c}]}})})},this.put=function(a,s,o,l){return Lf(i,void 0,void 0,function(){var c,d;return Bf(this,function(f){switch(f.label){case 0:return[4,this.fetch(this.getFullUrl(a),ts(ts({method:"PUT"},s),{body:this.safelyStringifyBody(s.body)}),o,l)];case 1:return c=f.sent(),[4,this.getResponseJsonOrThrowGeneralError(c)];case 2:return d=f.sent(),[2,{jsonBody:d,fetchResponse:c}]}})})},this.fetch=function(a,s,o,l){return Lf(i,void 0,void 0,function(){var c,d,f,p,m,x;return Bf(this,function(v){switch(v.label){case 0:return s===void 0?c={}:c=s.headers,[4,this.callPreAPIHook({preAPIHook:o,url:a,requestInit:ts(ts({},s),{headers:ts(ts({},c),{"fdi-version":TTe.supported_fdi.join(","),"Content-Type":"application/json",rid:this.recipeId})})})];case 1:return d=v.sent(),f=d.requestInit,p=d.url,[4,fetch(p,f)];case 2:if(m=v.sent(),m.status>=300)throw m;return l===void 0?[3,4]:(x=m.clone(),[4,l({requestInit:f,url:a,fetchResponse:x})]);case 3:v.sent(),v.label=4;case 4:return[2,m]}})})},this.callPreAPIHook=function(a){return Lf(i,void 0,void 0,function(){var s;return Bf(this,function(o){switch(o.label){case 0:return a.preAPIHook===void 0?[2,{url:a.url,requestInit:a.requestInit}]:[4,a.preAPIHook({url:a.url,requestInit:a.requestInit})];case 1:return s=o.sent(),[2,s]}})})},this.getFullUrl=function(a){var s=i.appInfo.apiBasePath.getAsStringDangerous(),o=i.getPath(a);return"".concat(i.appInfo.apiDomain.getAsStringDangerous()).concat(s).concat(o)},this.getResponseJsonOrThrowGeneralError=function(a){return Lf(i,void 0,void 0,function(){var s,o;return Bf(this,function(l){switch(l.label){case 0:return[4,a.clone().json()];case 1:if(s=l.sent(),s.status==="GENERAL_ERROR")throw o=s.message===void 0?"No Error Message Provided":s.message,new ITe.default(o);return[2,s]}})})}}var t;return t=e,e.preparePreAPIHook=function(r){var n=r.recipePreAPIHook,i=r.action,a=r.options,s=r.userContext;return function(o){return Lf(void 0,void 0,void 0,function(){var l;return Bf(t,function(c){switch(c.label){case 0:return[4,n(ts(ts({},o),{action:i,userContext:s}))];case 1:return l=c.sent(),a===void 0||a.preAPIHook===void 0?[2,l]:[2,a.preAPIHook({url:l.url,requestInit:l.requestInit,userContext:s})]}})})}},e.preparePostAPIHook=function(r){var n=r.recipePostAPIHook,i=r.action,a=r.userContext;return function(s){return Lf(void 0,void 0,void 0,function(){return Bf(t,function(o){switch(o.label){case 0:return[4,n(ts(ts({},s),{userContext:a,action:i}))];case 1:return o.sent(),[2]}})})}},e}();Ax.default=OTe;var PTe=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},RTe=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(EE,"__esModule",{value:!0});EE.getRecipeImplementation=void 0;var oj=Ax,jTe=Br;function Nie(e){var t=new oj.default(e.recipeId,e.appInfo);return{getTenantId:function(){var r=(0,jTe.getQueryParams)("tenantId");if((r==null?void 0:r.trim())!=="")return r},getLoginMethods:function(r){var n=r.tenantId,i=r.options,a=r.userContext;return PTe(this,void 0,void 0,function(){var s,o,l,c,d;return RTe(this,function(f){switch(f.label){case 0:return s={},e.clientType!==void 0&&(s.clientType=e.clientType),[4,t.get({path:"/<tenantId>/loginmethods",pathParams:{tenantId:n||"public"},queryParams:s},{},oj.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"GET_LOGIN_METHODS",options:i,userContext:a}),oj.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"GET_LOGIN_METHODS",userContext:a}))];case 1:return o=f.sent(),l=o.jsonBody,c=o.fetchResponse,l.firstFactors===void 0?(d=[],l.emailPassword.enabled&&d.push("emailpassword"),l.thirdParty.enabled&&d.push("thirdparty"),l.passwordless.enabled&&(d.push("otp-email"),d.push("otp-phone"),d.push("link-email"),d.push("link-phone"))):d=l.firstFactors,[2,{status:"OK",thirdParty:{providers:l.thirdParty.providers},firstFactors:d,fetchResponse:c}]}})})}}}EE.default=Nie;EE.getRecipeImplementation=Nie;var Xy={},DTe=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),MTe=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},FTe=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Xy,"__esModule",{value:!0});var LTe=GO,BTe=Ky,UTe=function(e){DTe(t,e);function t(r){var n=e.call(this,r)||this;return n.signOut=function(i){return MTe(n,void 0,void 0,function(){return FTe(this,function(a){switch(a.label){case 0:return[4,BTe.default.getInstanceOrThrow().signOut({userContext:i.userContext})];case 1:return[2,a.sent()]}})})},n}return t}(LTe.default);Xy.default=UTe;var $Te=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),PA=Ve&&Ve.__assign||function(){return PA=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},PA.apply(this,arguments)};Object.defineProperty(_x,"__esModule",{value:!0});_x.Recipe=void 0;var zTe=XO,HTe=ff,WTe=EE,lj=Br,VTe=Xy,Aie=function(e){$Te(t,e);function t(r){var n=e.call(this,(0,zTe.normaliseUserInput)(r))||this,i=new HTe.default((0,WTe.default)({recipeId:n.config.recipeId,appInfo:n.config.appInfo,clientType:n.config.clientType,preAPIHook:n.config.preAPIHook,postAPIHook:n.config.postAPIHook}));return n.recipeImplementation=i.override(n.config.override.functions).build(),n}return t.init=function(r){return function(n,i,a,s){return t.instance=new t(PA(PA({},(0,lj.applyPlugins)(t.RECIPE_ID,r,s??[])),{recipeId:t.RECIPE_ID,appInfo:n,clientType:i})),t.instance}},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of Multitenancy found. Ensure that 'SuperTokens.init' method has been called.";throw r=(0,lj.checkForSSRErrorAndAppendIfNeeded)(r),Error(r)}return t.instance},t.reset=function(){(0,lj.isTest)()&&(t.instance=void 0)},t.RECIPE_ID="multitenancy",t}(VTe.default);_x.Recipe=Aie;_x.default=Aie;var Tie={},LL={};(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(df)})(LL);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DateProviderReference=void 0;var t=LL;Object.defineProperty(e,"DateProviderReference",{enumerable:!0,get:function(){return t.DateProviderReference}})})(Tie);var YO={};Object.defineProperty(YO,"__esModule",{value:!0});YO.isVersionCompatible=void 0;var cj=function(e){var t=e.match(/^(\d+)\.(\d+)\.(\d+)(?:-(.+))?$/);if(!t)throw new Error("Invalid version format: ".concat(e));return{major:parseInt(t[1]),minor:parseInt(t[2]),patch:parseInt(t[3]),prerelease:t[4]}},FV=function(e,t){return e.major!==t.major?e.major-t.major:e.minor!==t.minor?e.minor-t.minor:e.patch!==t.patch?e.patch-t.patch:e.prerelease&&!t.prerelease?-1:!e.prerelease&&t.prerelease?1:e.prerelease&&t.prerelease?e.prerelease.localeCompare(t.prerelease):0},qTe=function(e,t){var r=cj(e);if(t===e)return!0;var n=t.match(/^([<>=~^]+)\s*(.+)$/);if(n){var i=n[1],a=n[2],s=cj(a),o=FV(r,s);switch(i){case">=":return o>=0;case">":return o>0;case"<=":return o<=0;case"<":return o<0;case"=":case"==":return o===0;case"~":return r.major===s.major&&r.minor===s.minor&&r.patch>=s.patch;case"^":return s.major===0?r.major===0&&r.minor===s.minor&&r.patch>=s.patch:r.major===s.major&&r.minor>=s.minor;default:return!1}}var l=t.match(/^(\d+)\.(\d+)\.x$/);if(l)return r.major===parseInt(l[1],10)&&r.minor===parseInt(l[2],10);var c=t.match(/^(\d+)\.x$/);if(c)return r.major===parseInt(c[1],10);var d=cj(t);return FV(r,d)===0},GTe=function(e,t){for(var r=Array.isArray(t)?t:[t],n=0,i=r;n<i.length;n++){var a=i[n];if(qTe(e,a))return!0}return!1};YO.isVersionCompatible=GTe;var Td=Ve&&Ve.__assign||function(){return Td=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Td.apply(this,arguments)},KTe=Ve&&Ve.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};Object.defineProperty(FL,"__esModule",{value:!0});var bp=Br,XTe=IL,YTe=$O,LV=kx,uj=_x,QTe=Tie,s_=Wg,JTe=YO,ZTe=function(){function e(t){var r=this,n;if(this.recipeList=[],this.pluginList=[],this.appInfo=(0,bp.normaliseInputAppInfoOrThrowError)(t.appInfo),t.recipeList===void 0||t.recipeList.length===0)throw new Error("Please provide at least one recipe to the supertokens.init function call. See https://supertokens.io/docs/emailpassword/quick-setup/frontend");var i=[];if(!((n=t.experimental)===null||n===void 0)&&n.plugins)for(var a=0,s=t.experimental.plugins;a<s.length;a++){var o=s[a];if(o.compatibleWebJSSDKVersions){var l=(0,JTe.isVersionCompatible)(s_.package_version,o.compatibleWebJSSDKVersions);if(!l)throw new Error("Incompatible SDK version for plugin ".concat(o.id,'. Version "').concat(s_.package_version,'" not found in compatible versions: ').concat(JSON.stringify(o.compatibleWebJSSDKVersions)))}if(o.dependencies){var c=o.dependencies((0,bp.getPublicConfig)(Td(Td({},t),{appInfo:this.appInfo})),i.map(bp.getPublicPlugin),s_.package_version);if(c.status==="ERROR")throw new Error(c.message);c.pluginsToAdd&&i.push.apply(i,c.pluginsToAdd)}i.push(o)}var d=i.filter(function(w,k){return i.some(function(E,N){return E.id===w.id&&N!==k})});if(d.length>0)throw new Error("Duplicate plugin IDs: ".concat(d.map(function(w){return w.id}).join(", ")));this.pluginList=i.map(bp.getPublicPlugin);for(var f=function(w){var k=i[w];if(k.config){var E=k.config((0,bp.getPublicConfig)(Td(Td({},t),{appInfo:p.appInfo})))||{};E.appInfo;var N=KTe(E,["appInfo"]);t=Td(Td({},t),N)}var P=i[w].init;P&&LV.PostSuperTokensInitCallbacks.addPostInitCallback(function(){P((0,bp.getPublicConfig)(Td(Td({},t),{appInfo:r.appInfo})),r.pluginList,s_.package_version),r.pluginList[w].initialized=!0})},p=this,m=0;m<this.pluginList.length;m+=1)f(m);var x=i.filter(function(w){return w.overrideMap!==void 0}).map(function(w){return w.overrideMap}),v=!1;t.enableDebugLogs!==void 0&&(v=t.enableDebugLogs);var b=!1;this.recipeList=t.recipeList.map(function(w){var k=w(r.appInfo,t.clientType,v,x);return k.config.recipeId===uj.Recipe.RECIPE_ID&&(b=!0),k}),b||this.recipeList.push(uj.Recipe.init()(this.appInfo,t.clientType,v,x))}return e.init=function(t){if(XTe.CookieHandlerReference.init(t.cookieHandler),YTe.WindowHandlerReference.init(t.windowHandler),QTe.DateProviderReference.init(t.dateProvider),e.instance!==void 0){console.warn("SuperTokens was already initialized");return}e.instance=new e(t),LV.PostSuperTokensInitCallbacks.runPostInitCallbacks()},e.getInstanceOrThrow=function(){if(e.instance===void 0){var t="SuperTokens must be initialized before calling this method.";throw t=(0,bp.checkForSSRErrorAndAppendIfNeeded)(t),new Error(t)}return e.instance},e.reset=function(){if(!(0,bp.isTest)()){console.warn("Calling reset() is only supported during testing");return}uj.Recipe.reset(),e.instance=void 0},e}();FL.default=ZTe;Object.defineProperty(wE,"__esModule",{value:!0});wE.init=void 0;var eIe=FL,Iie=function(){function e(){}return e.init=function(t){eIe.default.init(t)},e}();wE.default=Iie;wE.init=Iie.init;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(wE)})(_ie);var QO={};(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(kx)})(QO);var Oie={},Pie={},Zv={},tIe=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),RA=Ve&&Ve.__assign||function(){return RA=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},RA.apply(this,arguments)},BV=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},UV=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Zv,"__esModule",{value:!0});Zv.AllowedDomainsClaim=Zv.AllowedDomainsClaimClass=void 0;var rIe=OL,nIe=zO,Rie=function(e){tIe(t,e);function t(){var r=e.call(this,{id:"st-t-dmns",refresh:function(){return BV(r,void 0,void 0,function(){return UV(this,function(n){return[2]})})},defaultMaxAgeInSeconds:Number.MAX_SAFE_INTEGER})||this;return r.validators=RA(RA({},r.validators),{hasAccessToCurrentDomain:function(){return{id:r.id,refresh:r.refresh,shouldRefresh:function(){return!1},validate:function(n,i){return BV(r,void 0,void 0,function(){var a,s;return UV(this,function(o){return a=rIe.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHostName(),s=this.validators.includes(a,Number.MAX_SAFE_INTEGER,this.id),[2,s.validate(n,i)]})})}}}}),r}return t}(nIe.PrimitiveArrayClaim);Zv.AllowedDomainsClaimClass=Rie;Zv.AllowedDomainsClaim=new Rie;(function(e){var t=Ve&&Ve.__assign||function(){return t=Object.assign||function(c){for(var d,f=1,p=arguments.length;f<p;f++){d=arguments[f];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(c[m]=d[m])}return c},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AllowedDomainsClaim=e.getTenantId=e.getLoginMethods=e.init=void 0;var r=Br,n=Zv;Object.defineProperty(e,"AllowedDomainsClaim",{enumerable:!0,get:function(){return n.AllowedDomainsClaim}});var i=_x,a=function(){function c(){}return c.init=function(d){return i.default.init(d)},c.getLoginMethods=function(d){return i.default.getInstanceOrThrow().recipeImplementation.getLoginMethods(t(t({},d),{userContext:(0,r.getNormalisedUserContext)(d==null?void 0:d.userContext)}))},c.getTenantId=function(d){return i.default.getInstanceOrThrow().recipeImplementation.getTenantId(t(t({},d),{userContext:(0,r.getNormalisedUserContext)(d==null?void 0:d.userContext)}))},c.AllowedDomainsClaim=n.AllowedDomainsClaim,c}();e.default=a;var s=a.init;e.init=s;var o=a.getLoginMethods;e.getLoginMethods=o;var l=a.getTenantId;e.getTenantId=l})(Pie);(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(Pie)})(Oie);var JO={};(function(e){function t(n){for(var i in n)e.hasOwnProperty(i)||(e[i]=n[i])}e.__esModule=!0;let r=Br;r.default!==void 0?t(r):t({default:r,...r})})(JO);var Mt=Mi,iIe=_ie,aIe=TL,$V=QO,sIe=qy,oIe=Oie,lIe=JO;function jie(e){return e&&e.__esModule?e:{default:e}}var cIe=jie(iIe),dj=jie(oIe),Die=function(){function e(t){this.config=t}return e}();function Mie(e){var t=this;e===void 0&&(e={});var r=e.onHandleEvent,n=e.getRedirectionURL,i=e.preAPIHook,a=e.postAPIHook;r===void 0&&(r=function(o){}),n===void 0&&(n=function(o){return Mt.__awaiter(t,void 0,void 0,function(){return Mt.__generator(this,function(l){return[2,void 0]})})}),i===void 0&&(i=function(o){return Mt.__awaiter(t,void 0,void 0,function(){return Mt.__generator(this,function(l){return[2,o]})})}),a===void 0&&(a=function(){return Mt.__awaiter(t,void 0,void 0,function(){return Mt.__generator(this,function(o){return[2]})})});var s=e.style===void 0?"":e.style;return Mt.__assign(Mt.__assign({},e),{getRedirectionURL:n,onHandleEvent:r,preAPIHook:i,postAPIHook:a,recipeRootStyle:s})}function uIe(e){return Mt.__assign(Mt.__assign({},Mie(e)),{override:Mt.__assign({functions:function(t){return t}},e==null?void 0:e.override)})}function dIe(e,t){return e.firstFactors.some(function(r){return t.some(function(n){return n.firstFactorIds.includes(r)})})}var C6=function(e){Mt.__extends(t,e);function t(r,n){n===void 0&&(n=dj.default);var i=e.call(this,r)||this;return i.webJSRecipe=n,i.recipeID=t.RECIPE_ID,i.dynamicLoginMethodsCache={},i}return t.prototype.getCurrentDynamicLoginMethods=function(r){var n;return Mt.__awaiter(this,void 0,void 0,function(){var i,a,s;return Mt.__generator(this,function(o){switch(o.label){case 0:return jA.usesDynamicLoginMethods===!1?[2,void 0]:(i=lIe.getNormalisedUserContext(r.userContext),[4,t.getInstanceOrThrow().webJSRecipe.getTenantId()]);case 1:return a=(n=o.sent())!==null&&n!==void 0?n:"public",this.dynamicLoginMethodsCache[a]===void 0&&(this.dynamicLoginMethodsCache[a]=t.getDynamicLoginMethods({tenantId:a,userContext:i})),[4,this.dynamicLoginMethodsCache[a]];case 2:if(s=o.sent(),!dIe(s,jA.getInstanceOrThrow().recipeList.filter(function(l){return"firstFactorIds"in l})))throw new Error("Initialized recipes have no overlap with core recipes or could not load login methods");return[2,s]}})})},t.getDynamicLoginMethods=function(r){return Mt.__awaiter(this,void 0,void 0,function(){var n,i,a;return Mt.__generator(this,function(s){switch(s.label){case 0:return[4,dj.default.getLoginMethods(r)];case 1:return n=s.sent(),i=n.thirdParty,a=n.firstFactors,[2,{thirdparty:i,firstFactors:a}]}})})},t.init=function(r){var n=uIe(r);return{recipeID:t.RECIPE_ID,authReact:function(i){return t.instance=new t(Mt.__assign(Mt.__assign({},n),{appInfo:i,recipeId:t.RECIPE_ID})),t.instance},webJS:dj.default.init(Mt.__assign({},n))}},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of Multitenancy found. Make sure to call the Multitenancy.init method.See https://supertokens.io/docs/multitenancy/quick-setup/frontend";throw typeof window>"u"&&(r=r+Mt.SSR_ERROR),Error(r)}return t.instance},t.reset=function(){Mt.isTest()&&(t.instance=void 0)},t.RECIPE_ID="multitenancy",t}(Die),Fie={en:{AUTH_PAGE_HEADER_TITLE_SIGN_IN_AND_UP:"Sign Up / Sign In",AUTH_PAGE_HEADER_TITLE_SIGN_IN:"Sign In",AUTH_PAGE_HEADER_TITLE_SIGN_UP:"Sign Up",AUTH_PAGE_HEADER_TITLE_SIGN_IN_UP_TO_APP:" to continue to ",AUTH_PAGE_HEADER_SUBTITLE_SIGN_IN_START:"Not registered yet?",AUTH_PAGE_HEADER_SUBTITLE_SIGN_IN_SIGN_UP_LINK:"Sign Up",AUTH_PAGE_HEADER_SUBTITLE_SIGN_IN_END:"",AUTH_PAGE_HEADER_SUBTITLE_SIGN_UP_START:"Already have an account?",AUTH_PAGE_HEADER_SUBTITLE_SIGN_UP_SIGN_IN_LINK:"Sign In",AUTH_PAGE_HEADER_SUBTITLE_SIGN_UP_END:"",AUTH_PAGE_FOOTER_START:"By continuing, you agree to our ",AUTH_PAGE_FOOTER_TOS:"Terms of Service",AUTH_PAGE_FOOTER_AND:" and ",AUTH_PAGE_FOOTER_PP:"Privacy Policy",AUTH_PAGE_FOOTER_END:"",DIVIDER_OR:"or",BRANDING_POWERED_BY_START:"Powered by ",BRANDING_POWERED_BY_END:"",SOMETHING_WENT_WRONG_ERROR:"Something went wrong. Please try again.",SOMETHING_WENT_WRONG_ERROR_RELOAD:"Something went wrong. Please try again later or reload the page."}},fIe=function(){function e(){this.handlers=new Map}return e.prototype.emit=function(t,r){for(var n=this.handlers.get(t)||[],i=0,a=n;i<a.length;i++){var s=a[i];s(t,r)}},e.prototype.on=function(t,r){var n=this.handlers.get(t)||[];this.handlers.set(t,n.concat(r))},e.prototype.off=function(t,r){var n=this.handlers.get(t)||[];this.handlers.set(t,n.filter(function(i){return i!==r}))},e}(),Lie="sCurrLanguage";function hIe(e,t){return Mt.__awaiter(this,void 0,void 0,function(){return Mt.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Mt.setFrontendCookie(Lie,e,t)];case 1:return r.sent(),[3,3];case 2:return r.sent(),[3,3];case 3:return[2]}})})}function Bie(){return Mt.__awaiter(this,void 0,void 0,function(){return Mt.__generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Mt.getCookieValue(Lie)];case 1:return[2,e.sent()];case 2:return e.sent(),[2,null];case 3:return[2]}})})}var pIe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=jA.getInstanceOrThrow().languageTranslations,n=r.translationEventSource,i=r.userTranslationFunc,a=r.defaultLanguage,s=r.userTranslationStore,o=Mt.__spreadArray(Mt.__spreadArray([Fie],e,!0),[s],!1).reduce(Mt.mergeObjects,{}),l=function(){return o},c=function(b){o=b},d=a,f=function(){return d},p=function(b){d=b},m=function(b,w){p(w)},x=function(b,w){c(Mt.mergeObjects(o,w))};n.off("LanguageChange",m),n.off("TranslationLoaded",x),n.on("LanguageChange",m),n.on("TranslationLoaded",x),Bie().then(function(b){b&&p(b)});var v=function(b,w){if(w===void 0&&(w={}),i)return i(b);if(f()!==void 0){var k=l()[f()]&&l()[f()][b],E=l()[a]&&l()[a][b];return k===void 0?E!==void 0?E:b:k.replace(/{(\w+)}/g,function(N,P){return w[P]||N})}throw new Error("Should never come here")};return v},fj=function(e){var t=e.match(/^(\d+)\.(\d+)\.(\d+)(?:-(.+))?$/);if(!t)throw new Error("Invalid version format: ".concat(e));return{major:parseInt(t[1]),minor:parseInt(t[2]),patch:parseInt(t[3]),prerelease:t[4]}},zV=function(e,t){return e.major!==t.major?e.major-t.major:e.minor!==t.minor?e.minor-t.minor:e.patch!==t.patch?e.patch-t.patch:e.prerelease&&!t.prerelease?-1:!e.prerelease&&t.prerelease?1:e.prerelease&&t.prerelease?e.prerelease.localeCompare(t.prerelease):0},mIe=function(e,t){var r=fj(e);if(t===e)return!0;var n=t.match(/^([<>=~^]+)\s*(.+)$/);if(n){var i=n[1],a=n[2],s=fj(a),o=zV(r,s);switch(i){case">=":return o>=0;case">":return o>0;case"<=":return o<=0;case"<":return o<0;case"=":case"==":return o===0;case"~":return r.major===s.major&&r.minor===s.minor&&r.patch>=s.patch;case"^":return s.major===0?r.major===0&&r.minor===s.minor&&r.patch>=s.patch:r.major===s.major&&r.minor>=s.minor;default:return!1}}var l=t.match(/^(\d+)\.(\d+)\.x$/);if(l)return r.major===parseInt(l[1],10)&&r.minor===parseInt(l[2],10);var c=t.match(/^(\d+)\.x$/);if(c)return r.major===parseInt(c[1],10);var d=fj(t);return zV(r,d)===0},gIe=function(e,t){for(var r=Array.isArray(t)?t:[t],n=0,i=r;n<i.length;n++){var a=i[n];if(mIe(e,a))return!0}return!1},jA=function(){function e(t,r){var n=this,i,a,s,o,l,c,d,f;if(this.pluginList=[],this.recipeList=[],this.componentOverrides={},this.pluginRouteHandlers=[],this.changeLanguage=function(D){return Mt.__awaiter(n,void 0,void 0,function(){return Mt.__generator(this,function(L){switch(L.label){case 0:return[4,hIe(D,this.languageTranslations.currentLanguageCookieScope)];case 1:return L.sent(),this.languageTranslations.translationEventSource.emit("LanguageChange",D),[2]}})})},this.redirectToAuth=function(D){return Mt.__awaiter(n,void 0,void 0,function(){var L,B;return Mt.__generator(this,function(z){switch(z.label){case 0:return L=D.queryParams===void 0?{}:D.queryParams,D.show!==void 0&&(L.show=D.show),D.redirectBack===!0&&(L.redirectToPath=Mt.getCurrentNormalisedUrlPathWithQueryParamsAndFragments()),[4,this.getRedirectUrl({action:"TO_AUTH",showSignIn:D.show==="signin",tenantIdFromQueryParams:Mt.getTenantIdFromQueryParams()},D.userContext)];case 1:return B=z.sent(),B===null?(Mt.logDebugMessage("Skipping redirection because the user override returned null"),[2]):(B=Mt.appendQueryParamsToURL(B,L),[2,this.redirectToUrl(B,D.navigate)])}})})},this.redirectToUrl=function(D,L){return Mt.__awaiter(n,void 0,void 0,function(){return Mt.__generator(this,function(B){return xIe(this.appInfo,D,L),[2]})})},this.redirect=function(D,L,B,z){return Mt.__awaiter(n,void 0,void 0,function(){var H;return Mt.__generator(this,function(te){switch(te.label){case 0:return[4,this.getRedirectUrl(D,Mt.getNormalisedUserContext(z))];case 1:return H=te.sent(),H===null?(Mt.logDebugMessage("Skipping redirection because the user override returned null for context ".concat(JSON.stringify(D,null,2))),[2]):(H=Mt.appendQueryParamsToURL(H,B),[2,e.getInstanceOrThrow().redirectToUrl(H,L)])}})})},this.appInfo=Mt.normaliseInputAppInfoOrThrowError(t.appInfo),t.recipeList===void 0||t.recipeList.length===0)throw new Error("Please provide at least one recipe to the supertokens.init function call. See https://supertokens.io/docs/emailpassword/quick-setup/frontend");this.componentOverrides={};for(var p=0,m=r;p<m.length;p++){var x=m[p];if(x.overrideMap!==void 0)for(var v=0,b=Object.keys(x.overrideMap);v<b.length;v++){var w=b[v];this.componentOverrides[w]=Mt.__assign(Mt.__assign({},this.componentOverrides[w]),(a=(i=x.overrideMap[w])===null||i===void 0?void 0:i.components)!==null&&a!==void 0?a:{})}this.componentOverrides.authRecipe=Mt.__assign(Mt.__assign({},(s=this.componentOverrides.authRecipe)!==null&&s!==void 0?s:{}),(o=x.generalAuthRecipeComponentOverrides)!==null&&o!==void 0?o:{})}this.pluginList=r.map(Mt.getPublicPlugin);for(var k=Mt.getPublicConfig(Mt.__assign(Mt.__assign({},t),{appInfo:this.appInfo})),E=function(D){var L,B=r[D].init;B&&!N.pluginList[D].initialized&&$V.PostSuperTokensInitCallbacks.addPostInitCallback(function(){B(k,n.pluginList,Mt.package_version),n.pluginList[D].initialized=!0});var z=r[D].routeHandlers;if(z){var H=[];if(typeof z=="function"){var te=z(k,N.pluginList,Mt.package_version);if(te.status==="ERROR")throw new Error(te.message);H=te.routeHandlers}else H=z;(L=N.pluginRouteHandlers).push.apply(L,H)}},N=this,P=0;P<this.pluginList.length;P+=1)E(P);var R=t.languageTranslations===void 0?{}:t.languageTranslations;this.languageTranslations={defaultLanguage:R.defaultLanguage===void 0?"en":R.defaultLanguage,currentLanguageCookieScope:R.currentLanguageCookieScope!==void 0?Mt.normaliseCookieScopeOrThrowError(R.currentLanguageCookieScope):Mt.getDefaultCookieScope(),userTranslationStore:R.translations!==void 0?R.translations:{},translationEventSource:new fIe,userTranslationFunc:R.translationFunc};var O=!!(t!=null&&t.enableDebugLogs);O&&Mt.enableLogging(),this.userGetRedirectionURL=t.getRedirectionURL,this.recipeList=t.recipeList.map(function(D){var L=D.authReact;return L(n.appInfo,O)}),this.rootStyle=(l=t.style)!==null&&l!==void 0?l:"",this.privacyPolicyLink=t.privacyPolicyLink,this.termsOfServiceLink=t.termsOfServiceLink,this.useShadowDom=(c=t.useShadowDom)!==null&&c!==void 0?c:!0,this.defaultToSignUp=(d=t.defaultToSignUp)!==null&&d!==void 0?d:!1,this.disableAuthRoute=(f=t.disableAuthRoute)!==null&&f!==void 0?f:!1}return e.init=function(t){var r,n;if(aIe.CookieHandlerReference.init(t.cookieHandler),sIe.WindowHandlerReference.init(t.windowHandler),e.instance!==void 0){console.warn("SuperTokens was already initialized");return}e.usesDynamicLoginMethods=(r=t.usesDynamicLoginMethods)!==null&&r!==void 0?r:!1;var i=t.recipeList.find(function(w){return w.recipeID===C6.RECIPE_ID})!==void 0?t.recipeList:t.recipeList.concat(C6.init({})),a=Mt.normaliseInputAppInfoOrThrowError(t.appInfo),s=Mt.getPublicConfig(Mt.__assign(Mt.__assign({},t),{appInfo:a})),o=[];if(!((n=t.experimental)===null||n===void 0)&&n.plugins)for(var l=0,c=t.experimental.plugins;l<c.length;l++){var d=c[l];if(d.compatibleAuthReactSDKVersions){var f=gIe(Mt.package_version,d.compatibleAuthReactSDKVersions);if(!f)throw new Error("Incompatible SDK version for plugin ".concat(d.id,'. Version "').concat(Mt.package_version,'" not found in compatible versions: ').concat(JSON.stringify(d.compatibleAuthReactSDKVersions)))}if(d.dependencies){var p=d.dependencies(s,o.map(Mt.getPublicPlugin),Mt.package_version);if(p.status==="ERROR")throw new Error(p.message);p.pluginsToAdd&&o.push.apply(o,p.pluginsToAdd)}o.push(d)}var m=o.filter(function(w,k){return o.some(function(E,N){return E.id===w.id&&N!==k})});if(m.length>0)throw new Error("Duplicate plugin IDs: ".concat(m.map(function(w){return w.id}).join(", ")));for(var x=0,v=o;x<v.length;x++){var d=v[x];if(d.config){var b=d.config(Mt.getPublicConfig(Mt.__assign(Mt.__assign({},t),{appInfo:a})))||{};delete b.appInfo,t=Mt.__assign(Mt.__assign({},t),b)}}cIe.default.init(Mt.__assign(Mt.__assign({},t),{recipeList:i.map(function(w){var k=w.webJS;return k}),experimental:{plugins:o.map(function(w){return{id:w.id,overrideMap:w.overrideMap}})}})),e.instance=new e(Mt.__assign(Mt.__assign({},t),{recipeList:i}),o),$V.PostSuperTokensInitCallbacks.runPostInitCallbacks()},e.getInstance=function(){return e.instance},e.getInstanceOrThrow=function(){if(e.instance===void 0){var t="SuperTokens must be initialized before calling this method.";throw typeof window>"u"&&(t=t+Mt.SSR_ERROR),new Error(t)}return e.instance},e.prototype.getRecipeOrThrow=function(t){var r=this.recipeList.find(function(n){return n.config.recipeId===t});if(r===void 0)throw new Error("Missing recipe: ".concat(t));return r},e.prototype.loadTranslation=function(t){this.languageTranslations.translationEventSource.emit("TranslationLoaded",t)},e.prototype.getRedirectUrl=function(t,r){var n;return Mt.__awaiter(this,void 0,void 0,function(){var i,a,s,o;return Mt.__generator(this,function(l){switch(l.label){case 0:return this.userGetRedirectionURL?[4,this.userGetRedirectionURL(t,r)]:[3,2];case 1:if(i=l.sent(),i!==void 0)return[2,i];l.label=2;case 2:if(t.action==="TO_AUTH")return a=this.appInfo.websiteBasePath.getAsStringDangerous(),s=Mt.appendTrailingSlashToURL(a),t.tenantIdFromQueryParams?[2,Mt.appendQueryParamsToURL(s,(o={},o[Mt.TENANT_ID_QUERY_PARAM]=t.tenantIdFromQueryParams,o))]:[2,s];if(t.action==="SUCCESS")return[2,(n=t.redirectToPath)!==null&&n!==void 0?n:"/"];throw new Error("Should never come here: unexpected redirection context")}})})},e.reset=function(){Mt.isTest()&&(e.instance=void 0)},e.usesDynamicLoginMethods=!1,e}();function xIe(e,t,r){try{new URL(t)}catch{var n=Mt.getOriginOfPage().getAsStringDangerous();if(n!==e.websiteDomain.getAsStringDangerous()){t="".concat(e.websiteDomain.getAsStringDangerous()).concat(t),Mt.redirectWithFullPageReload(t);return}if(r!==void 0){Mt.redirectWithNavigate(t,r);return}}Mt.redirectWithFullPageReload(t)}ja.BaseRecipeModule=Die;ja.Multitenancy=C6;ja.SuperTokens=jA;ja.defaultTranslationsCommon=Fie;ja.getCurrentLanguageFromCookie=Bie;ja.getTranslationFunction=pIe;ja.normaliseRecipeModuleConfig=Mie;var hj=Mi,vIe=u,yIe=I,bIe=ja;function wIe(e){return e&&e.__esModule?e:{default:e}}var HV=wIe(yIe),SIe=function(e,t){e===void 0&&(e={});var r=HV.default.createContext(e),n=function(){var a,s=HV.default.useContext(r);return hj.__assign(hj.__assign({},(a=bIe.SuperTokens.getInstance())===null||a===void 0?void 0:a.componentOverrides[t]),s)},i=function(a){var s=a.children,o=a.components;return vIe.jsx(r.Provider,hj.__assign({value:o},{children:s}))};return[n,i,r.Consumer]};Cx.createGenericComponentsOverrideContext=SIe;var gu={},BL={},Uie={},Vu={},CE={},ZO={},f2=Ve&&Ve.__assign||function(){return f2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},f2.apply(this,arguments)};Object.defineProperty(ZO,"__esModule",{value:!0});ZO.normaliseUserInput=void 0;var EIe=Nx;function CIe(e){var t=f2({functions:function(r){return r}},e.override);return f2(f2({},(0,EIe.normaliseAuthRecipe)(e)),{override:t})}ZO.normaliseUserInput=CIe;var kE={},pj=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},mj=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(kE,"__esModule",{value:!0});kE.getRecipeImplementation=void 0;var _m=Ax;function $ie(e){var t=new _m.default(e.recipeId,e.appInfo);return{getLoginChallengeInfo:function(r){var n=r.loginChallenge,i=r.options,a=r.userContext;return pj(this,void 0,void 0,function(){var s,o,l;return mj(this,function(c){switch(c.label){case 0:return[4,t.get({path:"/oauth/login/info",pathParams:void 0,queryParams:{loginChallenge:n}},{},_m.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"GET_LOGIN_CHALLENGE_INFO",options:i,userContext:a}),_m.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"GET_LOGIN_CHALLENGE_INFO",userContext:a}))];case 1:return s=c.sent(),o=s.jsonBody,l=s.fetchResponse,[2,{status:"OK",info:o.info,fetchResponse:l}]}})})},getRedirectURLToContinueOAuthFlow:function(r){var n=r.loginChallenge,i=r.options,a=r.userContext;return pj(this,void 0,void 0,function(){var s,o,l;return mj(this,function(c){switch(c.label){case 0:return[4,t.get({path:"/oauth/login",pathParams:void 0,queryParams:{loginChallenge:n}},{},_m.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"GET_REDIRECT_URL_TO_CONTINUE_OAUTH_FLOW",options:i,userContext:a}),_m.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"GET_REDIRECT_URL_TO_CONTINUE_OAUTH_FLOW",userContext:a}))];case 1:return s=c.sent(),o=s.jsonBody,l=s.fetchResponse,[2,{status:"OK",frontendRedirectTo:o.frontendRedirectTo,fetchResponse:l}]}})})},logOut:function(r){var n=r.logoutChallenge,i=r.options,a=r.userContext;return pj(this,void 0,void 0,function(){var s,o,l;return mj(this,function(c){switch(c.label){case 0:return[4,t.post("/oauth/logout",{body:{logoutChallenge:n}},_m.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"LOG_OUT",options:i,userContext:a}),_m.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"LOG_OUT",userContext:a}))];case 1:return s=c.sent(),o=s.jsonBody,l=s.fetchResponse,[2,{status:"OK",frontendRedirectTo:o.frontendRedirectTo,fetchResponse:l}]}})})}}}kE.default=$ie;kE.getRecipeImplementation=$ie;var kIe=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),DA=Ve&&Ve.__assign||function(){return DA=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},DA.apply(this,arguments)};Object.defineProperty(CE,"__esModule",{value:!0});CE.Recipe=void 0;var _Ie=ZO,NIe=ff,AIe=kE,gj=Br,TIe=Xy,zie=function(e){kIe(t,e);function t(r){var n=e.call(this,(0,_Ie.normaliseUserInput)(r))||this,i=new NIe.default((0,AIe.default)({recipeId:n.config.recipeId,appInfo:n.config.appInfo,clientType:n.config.clientType,preAPIHook:n.config.preAPIHook,postAPIHook:n.config.postAPIHook}));return n.recipeImplementation=i.override(n.config.override.functions).build(),n}return t.init=function(r){return function(n,i,a,s){return t.instance=new t(DA(DA({},(0,gj.applyPlugins)(t.RECIPE_ID,r,s??[])),{recipeId:t.RECIPE_ID,appInfo:n,clientType:i})),t.instance}},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of OAuth2Provider found. Ensure that the 'OAuth2Provider.init' method is called within the 'SuperTokens.init' recipeList.";throw r=(0,gj.checkForSSRErrorAndAppendIfNeeded)(r),Error(r)}return t.instance},t.reset=function(){(0,gj.isTest)()&&(t.instance=void 0)},t.RECIPE_ID="oauth2provider",t}(TIe.default);CE.Recipe=zie;CE.default=zie;var Dp=Ve&&Ve.__assign||function(){return Dp=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Dp.apply(this,arguments)};Object.defineProperty(Vu,"__esModule",{value:!0});Vu.logOut=Vu.getRedirectURLToContinueOAuthFlow=Vu.getLoginChallengeInfo=Vu.init=void 0;var xj=Br,o_=CE,_E=function(){function e(){}return e.init=function(t){return o_.default.init(t)},e.getLoginChallengeInfo=function(t){return o_.default.getInstanceOrThrow().recipeImplementation.getLoginChallengeInfo(Dp(Dp({},t),{userContext:(0,xj.getNormalisedUserContext)(t.userContext)}))},e.getRedirectURLToContinueOAuthFlow=function(t){return o_.default.getInstanceOrThrow().recipeImplementation.getRedirectURLToContinueOAuthFlow(Dp(Dp({},t),{userContext:(0,xj.getNormalisedUserContext)(t.userContext)}))},e.logOut=function(t){return o_.default.getInstanceOrThrow().recipeImplementation.logOut(Dp(Dp({},t),{userContext:(0,xj.getNormalisedUserContext)(t.userContext)}))},e}();Vu.default=_E;var IIe=_E.init;Vu.init=IIe;var OIe=_E.getLoginChallengeInfo;Vu.getLoginChallengeInfo=OIe;var PIe=_E.getRedirectURLToContinueOAuthFlow;Vu.getRedirectURLToContinueOAuthFlow=PIe;var RIe=_E.logOut;Vu.logOut=RIe;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(Vu)})(Uie);var Yy={},Ed=Mi,WV=ja,jIe=function(e){Ed.__extends(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.redirect=function(n,i,a,s){return Ed.__awaiter(r,void 0,void 0,function(){var o;return Ed.__generator(this,function(l){switch(l.label){case 0:return[4,this.getRedirectUrl(n,Ed.getNormalisedUserContext(s))];case 1:return o=l.sent(),o===null?(Ed.logDebugMessage("Skipping redirection because the user override returned null for context ".concat(JSON.stringify(n,null,2))),[2]):(o=Ed.appendQueryParamsToURL(o,a),[2,WV.SuperTokens.getInstanceOrThrow().redirectToUrl(o,i)])}})})},r.getRedirectUrl=function(n,i){return Ed.__awaiter(r,void 0,void 0,function(){var a;return Ed.__generator(this,function(s){switch(s.label){case 0:return[4,this.config.getRedirectionURL(n,i)];case 1:return a=s.sent(),a!==void 0?[2,a]:[4,this.getDefaultRedirectionURL(n,i)];case 2:return[2,s.sent()]}})})},r}return t.prototype.getDefaultRedirectionURL=function(r,n){return Ed.__awaiter(this,void 0,void 0,function(){return Ed.__generator(this,function(i){throw new Error("getDefaultRedirectionURL is not implemented.")})})},t}(WV.BaseRecipeModule);Yy.RecipeModule=jIe;var _a=Mi,DIe=Uie,MIe=Yy,FIe=ja;function LIe(e){return e&&e.__esModule?e:{default:e}}var VV=LIe(DIe),BIe=function(e){return function(t){return _a.__assign(_a.__assign({},t),{getLoginChallengeInfo:function(r){return _a.__awaiter(this,void 0,void 0,function(){var n;return _a.__generator(this,function(i){switch(i.label){case 0:return[4,t.getLoginChallengeInfo(r)];case 1:return n=i.sent(),e({action:"LOADED_LOGIN_CHALLENGE",loginChallenge:r.loginChallenge,loginInfo:n.info,userContext:r.userContext}),[2,n]}})})},logOut:function(r){return _a.__awaiter(this,void 0,void 0,function(){var n;return _a.__generator(this,function(i){switch(i.label){case 0:return[4,t.logOut(r)];case 1:return n=i.sent(),e({action:"OAUTH2_LOGOUT_SUCCESS",frontendRedirectTo:n.frontendRedirectTo,userContext:r.userContext}),[2,n]}})})}})}};function UIe(e){var t;return _a.__assign(_a.__assign({},FIe.normaliseRecipeModuleConfig(e)),{disableDefaultUI:(t=e==null?void 0:e.disableDefaultUI)!==null&&t!==void 0?t:!1,tryRefreshPage:_a.__assign({disableDefaultUI:!1},e==null?void 0:e.tryRefreshPage),oauth2LogoutScreen:_a.__assign({disableDefaultUI:!1,style:""},e==null?void 0:e.oauth2LogoutScreen),override:_a.__assign({functions:function(r){return r}},e==null?void 0:e.override)})}var $Ie=function(e){_a.__extends(t,e);function t(r,n){n===void 0&&(n=VV.default);var i=e.call(this,r)||this;return i.webJSRecipe=n,i.recipeID=t.RECIPE_ID,i}return t.init=function(r){var n=UIe(r);return{recipeID:t.RECIPE_ID,authReact:function(i){return t.instance=new t(_a.__assign(_a.__assign({},n),{appInfo:i,recipeId:t.RECIPE_ID})),t.instance},webJS:VV.default.init(_a.__assign(_a.__assign({},n),{override:{functions:function(i,a){var s=BIe(n.onHandleEvent);return a.override(s),a.override(n.override.functions),i}}}))}},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of OAuth2Provider found. Make sure to call the OAuth2Provider.init method.See https://supertokens.io/docs/oauth2/quick-setup/frontend";throw typeof window>"u"&&(r=r+_a.SSR_ERROR),Error(r)}return t.instance},t.getInstance=function(){return t.instance},t.prototype.getDefaultRedirectionURL=function(r){return _a.__awaiter(this,void 0,void 0,function(){return _a.__generator(this,function(n){if(r.action==="SUCCESS_OAUTH2"||r.action==="CONTINUE_OAUTH2_AFTER_REFRESH"||r.action==="POST_OAUTH2_LOGOUT_REDIRECT")return[2,r.frontendRedirectTo];throw new Error("Should never come here: unknown action in OAuth2Provider.getDefaultRedirectionURL")})})},t.reset=function(){_a.isTest()&&(t.instance=void 0)},t.RECIPE_ID="oauth2provider",t}(MIe.RecipeModule);BL.OAuth2Provider=$Ie;var vn=Mi,zIe=PL,h2=ja,HIe=BL,WIe=Yy,VIe=JO,qIe=qy;function GIe(e){return e&&e.__esModule?e:{default:e}}var vj=GIe(zIe);function KIe(e){var t,r,n;e===void 0&&(e={});var i=(r=(t=e.accessDeniedScreen)===null||t===void 0?void 0:t.style)!==null&&r!==void 0?r:"",a={style:i},s=vn.__assign({functions:function(o){return o}},e.override);return vn.__assign(vn.__assign({},h2.normaliseRecipeModuleConfig(e)),{invalidClaimStatusCode:(n=e.invalidClaimStatusCode)!==null&&n!==void 0?n:403,accessDeniedScreen:a,override:s})}var Hie=function(e){var t=e.invalidClaims,r=e.overrideGlobalClaimValidators,n=e.userContext;return vn.__awaiter(void 0,void 0,void 0,function(){var i,a,s,o,l,c,d;return vn.__generator(this,function(f){switch(f.label){case 0:i=VIe.getGlobalClaimValidators({overrideGlobalClaimValidators:r,userContext:n}),a=void 0,s=function(p){var m,x,v;return vn.__generator(this,function(b){switch(b.label){case 0:return m=t.find(function(w){return w.id===p.id}),m===void 0?[3,2]:(x=p.onFailureRedirection,x?[4,x({reason:m.reason,userContext:n})]:[3,2]);case 1:if(v=b.sent(),v!==void 0)return[2,{value:{redirectPath:v,failedClaim:m}}];b.label=2;case 2:return p.showAccessDeniedOnFailure!==!1&&a===void 0&&(a=m),[2]}})},o=0,l=i,f.label=1;case 1:return o<l.length?(c=l[o],[5,s(c)]):[3,4];case 2:if(d=f.sent(),typeof d=="object")return[2,d.value];f.label=3;case 3:return o++,[3,1];case 4:return[2,{redirectPath:void 0,failedClaim:a}]}})})};function Wie(e){var t=qIe.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHref(),r;try{new URL(e),r=e}catch{if(!e.startsWith("/"))throw new Error("onFailureRedirectionURL returned a relative url: ".concat(e));var n=h2.SuperTokens.getInstanceOrThrow().appInfo;r="".concat(n.websiteDomain.getAsStringDangerous()).concat(e)}return t===r}var XIe=function(e){vn.__extends(t,e);function t(r,n){n===void 0&&(n=vj.default);var i=e.call(this,r)||this;return i.webJSRecipe=n,i.recipeID=t.RECIPE_ID,i.eventListeners=new Set,i.getUserId=function(a){return i.webJSRecipe.getUserId(a)},i.getAccessToken=function(a){return i.webJSRecipe.getAccessToken(a)},i.getClaimValue=function(a){return i.webJSRecipe.getClaimValue(a)},i.getAccessTokenPayloadSecurely=function(a){return vn.__awaiter(i,void 0,void 0,function(){return vn.__generator(this,function(s){return[2,this.webJSRecipe.getAccessTokenPayloadSecurely(a)]})})},i.doesSessionExist=function(a){return i.webJSRecipe.doesSessionExist(a)},i.signOut=function(a){return i.webJSRecipe.signOut(a)},i.attemptRefreshingSession=function(){return vn.__awaiter(i,void 0,void 0,function(){return vn.__generator(this,function(a){return[2,this.webJSRecipe.attemptRefreshingSession()]})})},i.validateClaims=function(a){return i.webJSRecipe.validateClaims(a)},i.getInvalidClaimsFromResponse=function(a){return i.webJSRecipe.getInvalidClaimsFromResponse(a)},i.addEventListener=function(a){return i.eventListeners.add(a),function(){return i.eventListeners.delete(a)}},i.validateGlobalClaimsAndHandleSuccessRedirection=function(a,s,o,l,c){return vn.__awaiter(i,void 0,void 0,function(){var d,f,p,m,x;return vn.__generator(this,function(v){switch(v.label){case 0:return l=vn.getNormalisedUserContext(l),[4,this.doesSessionExist({userContext:l})];case 1:return v.sent()?[4,this.validateClaims({userContext:l})]:[2,h2.SuperTokens.getInstanceOrThrow().redirectToAuth({navigate:c,redirectBack:!1,userContext:l})];case 2:return d=v.sent(),d.length>0?a===void 0?[3,4]:(f=JSON.stringify({successRedirectContext:a,redirectToPath:o}),[4,vn.setLocalStorage("supertokens-success-redirection-context",f)]):[3,6];case 3:v.sent(),v.label=4;case 4:return[4,Hie({invalidClaims:d,userContext:l})];case 5:if(p=v.sent(),p.redirectPath!==void 0){if(Wie(p.redirectPath))throw new Error("onFailureRedirectionURL returned the current URL (".concat(p.redirectPath,") during success redirection. This indicates that the user is in a stuck state."));return[2,h2.SuperTokens.getInstanceOrThrow().redirectToUrl(p.redirectPath,c)]}v.label=6;case 6:return a!==void 0?[3,13]:[4,vn.getLocalStorage("supertokens-success-redirection-context")];case 7:if(m=v.sent(),m===null)return[3,12];v.label=8;case 8:return v.trys.push([8,,9,11]),x=JSON.parse(m),a=x.successRedirectContext,o===void 0&&(o=x.redirectToPath),[3,11];case 9:return[4,vn.removeFromLocalStorage("supertokens-success-redirection-context")];case 10:return v.sent(),[7];case 11:return[3,13];case 12:a={recipeId:s,action:"SUCCESS",createdNewUser:!1,isNewRecipeUser:!1,newSessionCreated:!1,tenantIdFromQueryParams:vn.getTenantIdFromQueryParams()},v.label=13;case 13:if(a===void 0)throw new Error("This should never happen: successRedirectContext undefined ");return a.action==="SUCCESS_OAUTH2"?[2,HIe.OAuth2Provider.getInstanceOrThrow().redirect(a,c,{},l)]:(a.action==="SUCCESS"&&o!==void 0&&(a.redirectToPath=o),[2,h2.SuperTokens.getInstanceOrThrow().redirect(a,c,{},l)])}})})},i.getDefaultRedirectionURL=function(){return vn.__awaiter(i,void 0,void 0,function(){return vn.__generator(this,function(a){return[2,"/"]})})},i.notifyListeners=function(a){return vn.__awaiter(i,void 0,void 0,function(){var s;return vn.__generator(this,function(o){switch(o.label){case 0:return[4,this.getSessionContext(a)];case 1:return s=o.sent(),Array.from(this.eventListeners).forEach(function(l){return l(vn.__assign({sessionContext:s},a))}),[2]}})})},i}return t.prototype.getSessionContext=function(r){var n=r.action,i=r.userContext;return vn.__awaiter(this,void 0,void 0,function(){var a,s,o;return vn.__generator(this,function(l){switch(l.label){case 0:return n==="SESSION_CREATED"||n==="REFRESH_SESSION"||n==="API_INVALID_CLAIM"||n==="ACCESS_TOKEN_PAYLOAD_UPDATED"?[4,Promise.all([this.getUserId({userContext:i}),this.getAccessTokenPayloadSecurely({userContext:i})])]:[3,2];case 1:return a=l.sent(),s=a[0],o=a[1],[2,{doesSessionExist:!0,accessTokenPayload:o,userId:s}];case 2:if(n==="SIGN_OUT"||n==="UNAUTHORISED")return[2,{doesSessionExist:!1,accessTokenPayload:{},userId:""}];throw new Error("Unhandled recipe event: ".concat(n))}})})},t.addAxiosInterceptors=function(r,n){return vj.default.addAxiosInterceptors(r,n)},t.init=function(r){var n=this,i=KIe(r);return{recipeID:t.RECIPE_ID,authReact:function(a){return t.instance=new t(vn.__assign(vn.__assign({},i),{appInfo:a,recipeId:t.RECIPE_ID})),t.instance},webJS:vj.default.init(vn.__assign(vn.__assign({},i),{onHandleEvent:function(a){i.onHandleEvent!==void 0&&i.onHandleEvent(a),t.getInstanceOrThrow().notifyListeners(a)},preAPIHook:function(a){return vn.__awaiter(n,void 0,void 0,function(){var s;return vn.__generator(this,function(o){return s=vn.__assign(vn.__assign({},a),{requestInit:vn.__assign(vn.__assign({},a.requestInit),{headers:vn.__assign(vn.__assign({},a.requestInit.headers),{rid:t.RECIPE_ID})})}),i.preAPIHook===void 0?[2,s]:[2,i.preAPIHook(a)]})})}}))}},t.getInstanceOrThrow=function(){if(t.instance===void 0)throw Error("No instance of Session found. Make sure to call the Session.init method. See https://supertokens.io/docs/emailpassword/quick-setup/frontend");return t.instance},t.getInstance=function(){return t.instance},t.reset=function(){vn.isTest()&&(t.instance=void 0)},t.RECIPE_ID="session",t}(WIe.RecipeModule),YIe={EMAILPASSWORD:"emailpassword",OTP_EMAIL:"otp-email",OTP_PHONE:"otp-phone",LINK_EMAIL:"link-email",LINK_PHONE:"link-phone",THIRDPARTY:"thirdparty",TOTP:"totp",WEBAUTHN:"webauthn"};gu.FactorIds=YIe;gu.Session=XIe;gu.getFailureRedirectionInfo=Hie;gu.validateAndCompareOnFailureRedirectionURLToCurrent=Wie;var QIe=Cx,JIe=gu,Vie=QIe.createGenericComponentsOverrideContext(void 0,JIe.Session.RECIPE_ID),ZIe=Vie[0],eOe=Vie[1];ML.Provider=eOe;ML.useContext=ZIe;var mn={},Tx={},l_=Mi,tOe=u,Bm=I,rOe=ja;function nOe(e){return e&&e.__esModule?e:{default:e}}var iOe=nOe(Bm),aOe=function(){throw new Error("Cannot use translation func outside TranslationContext provider.")},qie=iOe.default.createContext({translate:aOe}),sOe=function(){return Bm.useContext(qie).translate},oOe=function(e){var t=e.children,r=e.defaultLanguage,n=e.userTranslationFunc,i=e.defaultStore,a=e.translationControlEventSource,s=Bm.useState(i),o=s[0],l=s[1],c=Bm.useState(void 0),d=c[0],f=c[1];Bm.useEffect(function(){function m(){return l_.__awaiter(this,void 0,void 0,function(){var x,v;return l_.__generator(this,function(b){switch(b.label){case 0:return[4,rOe.getCurrentLanguageFromCookie()];case 1:return x=b.sent(),v=x===null?r:x,f(function(w){return w!==void 0?w:v}),[2]}})})}m()},[r,f]),Bm.useEffect(function(){var m=function(v,b){f(b)},x=function(v,b){l(function(w){return l_.mergeObjects(w,b)})};return a.on("LanguageChange",m),a.on("TranslationLoaded",x),function(){a.off("LanguageChange",m),a.off("TranslationLoaded",x)}});var p=Bm.useCallback(function(m){if(n!==void 0)return n(m);if(d!==void 0){var x=o[d]&&o[d][m],v=o[r]&&o[r][m];return x===void 0?v!==void 0?v:m:x}throw new Error("Should never come here")},[o,d,r,n]);return d===void 0?null:tOe.jsx(qie.Provider,l_.__assign({value:{translate:p}},{children:t}))};Tx.TranslationContextProvider=oOe;Tx.useTranslation=sOe;var UL={},lOe=Cx,cOe=ja,Gie=lOe.createGenericComponentsOverrideContext(void 0,cOe.Multitenancy.RECIPE_ID),uOe=Gie[0],dOe=Gie[1];UL.Provider=dOe;UL.useContext=uOe;var Qy={},Kie={},Xie={},NE={},Vg={},p2=Ve&&Ve.__assign||function(){return p2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},p2.apply(this,arguments)};Object.defineProperty(Vg,"__esModule",{value:!0});Vg.checkFactorRequirement=Vg.normaliseUserInput=void 0;var fOe=Nx;function hOe(e){var t=p2({functions:function(r){return r}},e.override);return p2(p2({},(0,fOe.normaliseAuthRecipe)(e)),{override:t})}Vg.normaliseUserInput=hOe;function pOe(e,t){return{id:e,isValid:t[e]!==void 0,message:"Not completed"}}Vg.checkFactorRequirement=pOe;var qV=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},GV=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(NE,"__esModule",{value:!0});NE.MultiFactorAuthClaimClass=void 0;var yj=Vg,mOe=function(){function e(t){var r=this;this.getRecipeImpl=t,this.id="st-mfa",this.validators={hasCompletedMFARequirementsForAuth:function(){return{id:r.id,refresh:function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return r.refresh.apply(r,n)},shouldRefresh:function(n,i){var a=r.getValueFromPayload(n,i);return a===void 0},validate:function(n,i){return qV(r,void 0,void 0,function(){var a;return GV(this,function(s){return a=this.getValueFromPayload(n,i),a===void 0?[2,{isValid:!1,reason:{message:"MFA info not available in payload"}}]:a.v?[2,{isValid:!0}]:[2,{isValid:!1,reason:{message:"not all required factors have been completed"}}]})})}}},hasCompletedFactors:function(n){return{id:r.id,shouldRefresh:function(i,a){var s=r.getValueFromPayload(i,a);return s===void 0},refresh:function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return r.refresh.apply(r,i)},validate:function(i,a){var s=r.getValueFromPayload(i,a);if(s===void 0)return{isValid:!1,reason:{message:"MFA info not available in payload"}};for(var o=s.c,l=0,c=n;l<c.length;l++){var d=c[l];if(typeof d=="object"&&"oneOf"in d){var f=d.oneOf.map(function(p){return(0,yj.checkFactorRequirement)(p,o)}).filter(function(p){return p.isValid===!1});if(f.length===d.oneOf.length)return{isValid:!1,reason:{message:"All factor checkers failed in the list",oneOf:d.oneOf,failures:f}}}else if(typeof d=="object"&&"allOfInAnyOrder"in d){var f=d.allOfInAnyOrder.map(function(m){return(0,yj.checkFactorRequirement)(m,o)}).filter(function(m){return m.isValid===!1});if(f.length!==0)return{isValid:!1,reason:{message:"Some factor checkers failed in the list",allOfInAnyOrder:d.allOfInAnyOrder,failures:f}}}else{var f=(0,yj.checkFactorRequirement)(d,o);if(f.isValid!==!0)return{isValid:!1,reason:{message:"Factor validation failed: "+f.message,factorId:f.id}}}}return{isValid:!0}}}}}}return e.prototype.refresh=function(t){return qV(this,void 0,void 0,function(){return GV(this,function(r){switch(r.label){case 0:return[4,this.getRecipeImpl().resyncSessionAndFetchMFAInfo(t)];case 1:return r.sent(),[2]}})})},e.prototype.getValueFromPayload=function(t,r){if(t[this.id]!==void 0)return{c:t[this.id].c,v:t[this.id].v}},e.prototype.getLastFetchedTime=function(t,r){var n;return(n=t[this.id])===null||n===void 0?void 0:n.t},e}();NE.MultiFactorAuthClaimClass=mOe;var AE={},TE={},MA=Ve&&Ve.__assign||function(){return MA=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},MA.apply(this,arguments)},gOe=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},xOe=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(TE,"__esModule",{value:!0});TE.getRecipeImplementation=void 0;var bj=Ax;function Yie(e){var t=new bj.default(e.recipeId,e.appInfo);return{resyncSessionAndFetchMFAInfo:function(r){var n=r.options,i=r.userContext;return gOe(this,void 0,void 0,function(){var a,s,o;return xOe(this,function(l){switch(l.label){case 0:return[4,t.put("/mfa/info",{},bj.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"GET_MFA_INFO",options:n,userContext:i}),bj.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"GET_MFA_INFO",userContext:i}))];case 1:return a=l.sent(),s=a.jsonBody,o=a.fetchResponse,[2,MA(MA({},s),{fetchResponse:o})]}})})}}}TE.default=Yie;TE.getRecipeImplementation=Yie;var $L={};(function(e){function t(n){for(var i in n)e.hasOwnProperty(i)||(e[i]=n[i])}e.__esModule=!0;let r=Ex;r.default!==void 0?t(r):t({default:r,...r})})($L);var vOe=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),FA=Ve&&Ve.__assign||function(){return FA=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},FA.apply(this,arguments)};Object.defineProperty(AE,"__esModule",{value:!0});AE.Recipe=void 0;var yOe=Vg,bOe=ff,wOe=TE,wj=Br,SOe=Xy,EOe=kx,COe=$L,kOe=NE,Qie=function(e){vOe(t,e);function t(r){var n=e.call(this,(0,yOe.normaliseUserInput)(r))||this,i=new bOe.default((0,wOe.default)({recipeId:n.config.recipeId,appInfo:n.config.appInfo,clientType:n.config.clientType,preAPIHook:n.config.preAPIHook,postAPIHook:n.config.postAPIHook}));return n.recipeImplementation=i.override(n.config.override.functions).build(),EOe.PostSuperTokensInitCallbacks.addPostInitCallback(function(){COe.SessionClaimValidatorStore.addClaimValidatorFromOtherRecipe(t.MultiFactorAuthClaim.validators.hasCompletedMFARequirementsForAuth())}),n}return t.init=function(r){return function(n,i,a,s){return t.instance=new t(FA(FA({},(0,wj.applyPlugins)(t.RECIPE_ID,r,s??[])),{recipeId:t.RECIPE_ID,appInfo:n,clientType:i})),t.instance}},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of MultiFactorAuth found. Make sure to call the MultiFactorAuth.init method.";throw r=(0,wj.checkForSSRErrorAndAppendIfNeeded)(r),Error(r)}return t.instance},t.reset=function(){(0,wj.isTest)()&&(t.instance=void 0)},t.RECIPE_ID="multifactorauth",t.MultiFactorAuthClaim=new kOe.MultiFactorAuthClaimClass(function(){return t.getInstanceOrThrow().recipeImplementation}),t}(SOe.default);AE.Recipe=Qie;AE.default=Qie;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MultiFactorAuthClaimClass=e.MultiFactorAuthClaim=e.resyncSessionAndFetchMFAInfo=e.init=void 0;var t=NE;Object.defineProperty(e,"MultiFactorAuthClaimClass",{enumerable:!0,get:function(){return t.MultiFactorAuthClaimClass}});var r=AE,n=Br,i=function(){function l(){}return l.init=function(c){return r.default.init(c)},l.resyncSessionAndFetchMFAInfo=function(c){var d;return r.default.getInstanceOrThrow().recipeImplementation.resyncSessionAndFetchMFAInfo({options:(d=c==null?void 0:c.options)!==null&&d!==void 0?d:{},userContext:(0,n.getNormalisedUserContext)(c==null?void 0:c.userContext)})},l.MultiFactorAuthClaim=r.default.MultiFactorAuthClaim,l}();e.default=i;var a=i.init;e.init=a;var s=i.resyncSessionAndFetchMFAInfo;e.resyncSessionAndFetchMFAInfo=s;var o=i.MultiFactorAuthClaim;e.MultiFactorAuthClaim=o})(Xie);(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(Xie)})(Kie);var zL={},HL={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SessionClaimValidatorStore=void 0;var t=$L;Object.defineProperty(e,"SessionClaimValidatorStore",{enumerable:!0,get:function(){return t.SessionClaimValidatorStore}})})(HL);(function(e){function t(n){for(var i in n)e.hasOwnProperty(i)||(e[i]=n[i])}e.__esModule=!0;let r=HL;r.default!==void 0?t(r):t({default:r,...r})})(zL);var or=Mi,Jie=Kie,KV=JO,_Oe=QO,NOe=zL,Zie=qy,k6=ja,AOe=Yy,TOe=gu;function IOe(e){return e&&e.__esModule?e:{default:e}}var XV=IOe(Jie),eae="/mfa",PN="st-mfa-info-cache",fw=void 0,OOe=function(e){return function(t){return or.__assign(or.__assign({},t),{resyncSessionAndFetchMFAInfo:function(r){return or.__awaiter(this,void 0,void 0,function(){var n,i,o,a,s,o,l;return or.__generator(this,function(c){switch(c.label){case 0:return n=Zie.WindowHandlerReference.getReferenceOrThrow(),[4,fw];case 1:return c.sent(),[4,n.windowHandler.sessionStorage.getItem(PN)];case 2:if(i=c.sent(),i!==null&&(o=JSON.parse(i),o.t>Date.now()-1e3))return[2,or.__assign(or.__assign({},o.v),{fetchResponse:new Response(null,{status:304})})];c.label=3;case 3:return fw===void 0?[3,5]:[4,fw];case 4:return c.sent(),[3,3];case 5:fw=new Promise(function(d){return a=d}),c.label=6;case 6:return c.trys.push([6,,11,12]),[4,n.windowHandler.sessionStorage.getItem(PN)];case 7:return s=c.sent(),s!==null&&(o=JSON.parse(s),o.t>Date.now()-1e3)?[2,or.__assign(or.__assign({},o.v),{fetchResponse:new Response(null,{status:304})})]:[4,t.resyncSessionAndFetchMFAInfo(r)];case 8:return l=c.sent(),l.status!=="OK"?[3,10]:[4,n.windowHandler.sessionStorage.setItem(PN,JSON.stringify({t:Date.now(),v:{emails:l.emails,phoneNumbers:l.phoneNumbers,factors:l.factors,status:l.status}}))];case 9:c.sent(),c.label=10;case 10:return[2,l];case 11:return fw=void 0,a(),[7];case 12:return[2]}})})}})}},POe=function(){function e(t,r,n){var i=this;this.webJSClaim=new Jie.MultiFactorAuthClaimClass(function(){return t().webJSRecipe}),this.refresh=this.webJSClaim.refresh,this.getLastFetchedTime=this.webJSClaim.getLastFetchedTime,this.getValueFromPayload=this.webJSClaim.getValueFromPayload,this.id=this.webJSClaim.id;var a=function(s){var o=s.reason,l=s.userContext;return or.__awaiter(i,void 0,void 0,function(){var c,d,p,f,p;return or.__generator(this,function(m){switch(m.label){case 0:return c=t(),d=o.oneOf||o.allOfInAnyOrder||(o.factorId!==void 0?[o.factorId]:void 0),d===void 0?[3,1]:(or.logDebugMessage("Redirecting to MFA on next array from validation failure: "+d.join(", ")),p=c.getSecondaryFactors(l).filter(function(x){return d.factors.next.includes(x.id)}).map(function(x){return x.id}),p.length===1?[2,r({action:"GO_TO_FACTOR",factorId:p[0]},l)]:[2,r({action:"FACTOR_CHOOSER",nextFactorOptions:d},l)]);case 1:return[4,c.webJSRecipe.resyncSessionAndFetchMFAInfo({userContext:l})];case 2:return f=m.sent(),p=c.getSecondaryFactors(l).filter(function(x){return f.factors.next.includes(x.id)}).map(function(x){return x.id}),or.logDebugMessage("Redirecting to MFA on next array from backend: "+p.join(", ")),p.length===1?[2,r({action:"GO_TO_FACTOR",factorId:p[0]},l)]:[2,r({action:"FACTOR_CHOOSER"},l)];case 3:return[2,void 0]}})})};this.validators=or.__assign(or.__assign({},this.webJSClaim.validators),{hasCompletedMFARequirementsForAuth:function(s,o){s===void 0&&(s=!0),o===void 0&&(o=!0);var l=i.webJSClaim.validators.hasCompletedMFARequirementsForAuth();return or.__assign(or.__assign({},l),{showAccessDeniedOnFailure:o,onFailureRedirection:n??function(c){var d=c.reason,f=c.userContext;return s?a({reason:d,userContext:f}):void 0}})},hasCompletedFactors:function(s,o,l){o===void 0&&(o=!0),l===void 0&&(l=!0);var c=i.webJSClaim.validators.hasCompletedFactors(s);return or.__assign(or.__assign({},c),{showAccessDeniedOnFailure:l,onFailureRedirection:n??function(d){var f=d.reason,p=d.userContext;return o?a({reason:f,userContext:p}):void 0}})}})}return e}();function ROe(e){var t;e===void 0&&(e={});var r=e.disableDefaultUI===!0,n=or.__assign({functions:function(i){return i}},e.override);return or.__assign(or.__assign({},k6.normaliseRecipeModuleConfig(e)),{disableDefaultUI:r,firstFactors:e==null?void 0:e.firstFactors,getSecondaryFactorInfo:function(i){return i},factorChooserScreen:(t=e.factorChooserScreen)!==null&&t!==void 0?t:{},override:n})}function jOe(e,t,r,n){or.logDebugMessage("getAvailableFactors: allowed to setup: ".concat(e.allowedToSetup)),or.logDebugMessage("getAvailableFactors: already setup: ".concat(e.alreadySetup)),or.logDebugMessage("getAvailableFactors: next from factorInfo: ".concat(e.next)),or.logDebugMessage("getAvailableFactors: nextArrayQueryParam: ".concat(t)),or.logDebugMessage("getAvailableFactors: secondary factors: ".concat(r.getSecondaryFactors(n).map(function(s){return s.id})));var i=t!==void 0?t.split(","):e.next,a=r.getSecondaryFactors(n).filter(function(s){var o=s.id;return i.length===0?e.allowedToSetup.includes(o)||e.alreadySetup.includes(o):i.includes(o)});return a}var DOe=function(e){or.__extends(t,e);function t(n,i){i===void 0&&(i=XV.default);var a=e.call(this,n)||this;return a.webJSRecipe=i,a.recipeID=t.RECIPE_ID,a.secondaryFactors=[],a.getDefaultRedirectionURL=function(s,o){return or.__awaiter(a,void 0,void 0,function(){var l,c;return or.__generator(this,function(d){if(s.action==="FACTOR_CHOOSER")return l=s.nextFactorOptions&&s.nextFactorOptions.length>0?s.nextFactorOptions.join(","):void 0,[2,or.getDefaultRedirectionURLForPath(this.config,eae,s,{n:l,stepUp:s.stepUp?"true":void 0})];if(s.action==="GO_TO_FACTOR"){if(c=this.getSecondaryFactors(o).find(function(f){return f.id===s.factorId}),c!==void 0)return[2,or.getDefaultRedirectionURLForPath(this.config,c.path,s,{setup:s.forceSetup?"true":void 0,stepUp:s.stepUp?"true":void 0})];throw new Error("Requested redirect to unknown factor id: "+s.factorId)}else return[2,"/"]})})},_Oe.PostSuperTokensInitCallbacks.addPostInitCallback(function(){var s=t.MultiFactorAuthClaim.validators.hasCompletedMFARequirementsForAuth();NOe.SessionClaimValidatorStore.addClaimValidatorFromOtherRecipe(s),TOe.Session.getInstanceOrThrow().addEventListener(function(){var o=Zie.WindowHandlerReference.getReferenceOrThrow();o.windowHandler.sessionStorage.removeItemSync(PN)})}),a}t.init=function(n){var i=ROe(n);return{recipeID:t.RECIPE_ID,authReact:function(a){return t.instance=new t(or.__assign(or.__assign({},i),{appInfo:a,recipeId:t.RECIPE_ID})),t.instance},webJS:XV.default.init(or.__assign(or.__assign({},i),{override:{functions:function(a,s){var o=OOe(i.onHandleEvent);return s.override(o),s.override(i.override.functions),a}}}))}},t.getInstance=function(){return t.instance},t.getInstanceOrThrow=function(){if(t.instance===void 0){var n="No instance of MultiFactorAuth found. Make sure to call the MultiFactorAuth.init method.";throw typeof window>"u"&&(n=n+or.SSR_ERROR),Error(n)}return t.instance},t.prototype.addMFAFactors=function(n){this.secondaryFactors=or.__spreadArray(or.__spreadArray([],this.secondaryFactors.filter(function(i){return n.every(function(a){return i.id!==a.id})}),!0),n,!0)},t.prototype.isFirstFactorEnabledOnClient=function(n){return this.config.firstFactors===void 0||this.config.firstFactors.includes(n)},t.prototype.getSecondaryFactors=function(n){return this.config.getSecondaryFactorInfo(this.secondaryFactors,n)},t.prototype.redirectToFactor=function(n){var i=n.factorId,a=n.forceSetup,s=n.stepUp,o=n.redirectBack,l=n.navigate,c=n.userContext;return or.__awaiter(this,void 0,void 0,function(){var d,f,f;return or.__generator(this,function(p){switch(p.label){case 0:return[4,this.getRedirectUrl({action:"GO_TO_FACTOR",forceSetup:a,stepUp:s,factorId:i,tenantIdFromQueryParams:or.getTenantIdFromQueryParams()},KV.getNormalisedUserContext(c))];case 1:return d=p.sent(),d===null?[2]:(o?(f=or.getCurrentNormalisedUrlPathWithQueryParamsAndFragments(),d=or.appendQueryParamsToURL(d,{redirectToPath:f})):(f=or.getRedirectToPathFromURL(),f&&(d=or.appendQueryParamsToURL(d,{redirectToPath:f}))),[2,k6.SuperTokens.getInstanceOrThrow().redirectToUrl(d,l)])}})})},t.prototype.redirectToFactorChooser=function(n){var i=n.redirectBack,a=i===void 0?!1:i,s=n.nextFactorOptions,o=s===void 0?[]:s,l=n.stepUp,c=n.navigate,d=n.userContext;return or.__awaiter(this,void 0,void 0,function(){var f,p,p;return or.__generator(this,function(m){switch(m.label){case 0:return[4,this.getRedirectUrl({action:"FACTOR_CHOOSER",nextFactorOptions:o,stepUp:l,tenantIdFromQueryParams:or.getTenantIdFromQueryParams()},KV.getNormalisedUserContext(d))];case 1:return f=m.sent(),f===null?[2]:(a?(p=or.getCurrentNormalisedUrlPathWithQueryParamsAndFragments(),f=or.appendQueryParamsToURL(f,{redirectToPath:p})):(p=or.getRedirectToPathFromURL(),p&&(f=or.appendQueryParamsToURL(f,{redirectToPath:p}))),[2,k6.SuperTokens.getInstanceOrThrow().redirectToUrl(f,c)])}})})},t.reset=function(){or.isTest()&&(t.instance=void 0)};var r;return r=t,t.RECIPE_ID="multifactorauth",t.MultiFactorAuthClaim=new POe(function(){return t.getInstanceOrThrow()},function(n,i){return or.__awaiter(void 0,void 0,void 0,function(){return or.__generator(r,function(a){switch(a.label){case 0:return[4,this.getInstanceOrThrow().getRedirectUrl(or.__assign(or.__assign({},n),{tenantIdFromQueryParams:or.getTenantIdFromQueryParams()}),i)];case 1:return[2,a.sent()||void 0]}})})}),t}(AOe.RecipeModule);Qy.DEFAULT_FACTOR_CHOOSER_PATH=eae;Qy.MultiFactorAuth=DOe;Qy.getAvailableFactors=jOe;var e4={},MOe=Mi,FOe=ja;function LOe(e){return FOe.normaliseRecipeModuleConfig(e)}function tae(e,t){if(t.length!==0)for(var r=function(a){var s=e[a],o=t.filter(function(d){return!s.factorIds.includes(d)});if(o.length===0)return{value:[s]};var l=e.filter(function(d){return d.factorIds.every(function(f){return o.includes(f)})});if(l.length!==0){var c=tae(l,o);if(c!==void 0)return{value:MOe.__spreadArray([s],c,!0)}}},n=0;n<e.length;++n){var i=r(n);if(typeof i=="object")return i.value}}e4.normaliseAuthRecipe=LOe;e4.selectComponentsToCoverAllFirstFactors=tae;var ft=Mi,Et=u,Xr=I,Qr=ja,BOe=UO,V0=Tx,UOe=qy,$Oe=Il,zOe=UL,RN=Qy,Nn=gu,c_=BL,HOe=Cx,WOe=e4,VOe=Vy;function WL(e){return e&&e.__esModule?e:{default:e}}var rc=WL(Xr),qOe=WL(BOe),rae=WL(VOe),t4=rc.default.createContext("IS_DEFAULT");function nae(){return Et.jsx("svg",ft.__assign({version:"1.1",viewBox:"25 25 50 50","data-supertokens":"spinnerIcon"},{children:Et.jsxs("circle",ft.__assign({cx:"50",cy:"50",r:"20",fill:"none",stroke:"rgb(var(--palette-primary))",strokeWidth:"5",strokeLinecap:"round",strokeDashoffset:"0",strokeDasharray:"100, 200"},{children:[Et.jsx("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"4s",repeatCount:"indefinite"}),Et.jsx("animate",{attributeName:"stroke-dashoffset",values:"0;-30;-124",dur:"2s",repeatCount:"indefinite"}),Et.jsx("animate",{attributeName:"stroke-dasharray",values:"0,200;110,200;110,200",dur:"2s",repeatCount:"indefinite"})]}))}))}var GOe=function(e){var t=Xr.useContext(t4);if(t==="IS_DEFAULT")throw new Error("Cannot use component override outside ComponentOverrideContext provider.");var r=t[e];return r===void 0?null:r},IE=function(e,t){var r=e+"_Override";return t.displayName=r,function(n){var i=GOe(r);return i!==null?Et.jsx(i,ft.__assign({DefaultComponent:t},n)):Et.jsx(t,ft.__assign({},n))}},KOe=`[data-supertokens~="container"] {
    --palette-background: 255, 255, 255;
    --palette-inputBackground: 250, 250, 250;
    --palette-inputBorder: 224, 224, 224;
    --palette-primary: 28, 34, 42;
    --palette-primaryBorder: 45, 54, 68;
    --palette-success: 65, 167, 0;
    --palette-successBackground: 217, 255, 191;
    --palette-error: 255, 23, 23;
    --palette-errorBackground: 255, 241, 235;
    --palette-textTitle: 0, 0, 0;
    --palette-textLabel: 0, 0, 0;
    --palette-textInput: 0, 0, 0;
    --palette-textPrimary: 128, 128, 128;
    --palette-textLink: 0, 122, 255;
    --palette-buttonText: 255, 255, 255;
    --palette-textGray: 54, 54, 54;
    --palette-superTokensBrandingBackground: 242, 245, 246;
    --palette-superTokensBrandingText: 173, 189, 196;
    --palette-buttonGreyedOut: 221, 221, 221;
    --palette-caution: 124, 96, 62;
    --palette-errorDark: 207, 54, 68;

    --font-size-0: 12px;
    --font-size-1: 14px;
    --font-size-2: 16px;
    --font-size-3: 19px;
    --font-size-4: 24px;
    --font-size-5: 28px;
}
/*
 * Default styles.
 */
@keyframes slideTop {
    0% {
        transform: translateY(-5px);
    }
    100% {
        transform: translateY(0px);
    }
}
@keyframes swing-in-top-fwd {
    0% {
        transform: rotateX(-100deg);
        transform-origin: top;
        opacity: 0;
    }
    100% {
        transform: rotateX(0deg);
        transform-origin: top;
        opacity: 1;
    }
}
[data-supertokens~="container"] {
    font-family: "Arial", sans-serif;
    margin: 12px auto;
    margin-top: 26px;
    margin-bottom: 26px;
    width: 420px;
    text-align: center;
    border-radius: 8px;
    box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.16);
    background-color: rgb(var(--palette-background));
}
@media (max-width: 440px) {
    [data-supertokens~="container"] {
        width: 95vw;
    }
}
[data-supertokens~="row"] {
    margin: 0 auto;
    width: 76%;
    padding-top: 30px;
    padding-bottom: 10px;
}
[data-supertokens~="superTokensBranding"] {
    display: block;
    margin: 10px auto 0;
    background: rgb(var(--palette-superTokensBrandingBackground));
    color: rgb(var(--palette-superTokensBrandingText));
    text-decoration: none;
    width: -webkit-fit-content;
    width: -moz-fit-content;
    width: fit-content;
    border-radius: 6px 6px 0 0;
    padding: 4px 9px;
    font-weight: 400;
    font-size: var(--font-size-0);
    letter-spacing: 0.4px;
}
[data-supertokens~="generalError"] {
    background: rgb(var(--palette-errorBackground));
    padding-top: 10px;
    padding-bottom: 10px;
    margin-bottom: 10px;
    margin-top: 24px;
    padding-left: 18px;
    padding-right: 18px;
    letter-spacing: 0.2px;
    font-size: var(--font-size-1);
    border-radius: 8px;
    color: rgb(var(--palette-error));
    animation: swing-in-top-fwd 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
    word-wrap: break-word;
}
[data-supertokens~="headerTitle"] {
    font-size: var(--font-size-4);
    line-height: 27.6px;
    letter-spacing: 0.58px;
    font-weight: 700;
    margin-bottom: 20px;
    color: rgb(var(--palette-textTitle));
}
[data-supertokens~="headerSubtitle"] {
    font-weight: 400;
    color: rgb(var(--palette-textGray));
    margin-bottom: 21px;
}
[data-supertokens~="headerSubtitle"][data-supertokens~="secondaryText"] {
    color: rgb(var(--palette-textGray));
    font-weight: 400;
}
[data-supertokens~="privacyPolicyAndTermsAndConditions"] {
    max-width: 300px;
    margin-top: 10px;
}
[data-supertokens~="privacyPolicyAndTermsAndConditions"] a {
    line-height: 21px;
}
/* TODO: split the link style into separate things*/
/* We add this before primary and secondary text, because if they are applied to the same element the other ones take priority */
[data-supertokens~="link"] {
    padding-left: 3px;
    padding-right: 3px;
    color: rgb(var(--palette-textLink));
    font-size: var(--font-size-1);
    cursor: pointer;
    letter-spacing: 0.16px;
    line-height: 26px;
}
[data-supertokens~="primaryText"] {
    font-size: var(--font-size-2);
    font-weight: 400;
    letter-spacing: 0.4px;
    line-height: 21px;
    color: rgb(var(--palette-textLabel));
}
[data-supertokens~="secondaryText"] {
    font-size: var(--font-size-1);
    font-weight: 400;
    letter-spacing: 0.4px;
    color: rgb(var(--palette-textPrimary));
}
[data-supertokens~="secondaryText"] strong {
    font-weight: 600;
}
[data-supertokens~="divider"] {
    margin-top: 1.5em;
    margin-bottom: 1.5em;
    border-bottom: 0.3px solid #dddddd;
    align-items: center;
    padding-bottom: 5px;
    flex: 3 3;
}
[data-supertokens~="headerTinyTitle"] {
    margin-top: 24px;
    font-size: var(--font-size-5);
    letter-spacing: 1.1px;
    font-weight: 700;
    line-height: 28px;
}
[data-supertokens~="secondaryLinkWithArrow"] {
    margin-top: 10px;
    margin-bottom: 30px;
    cursor: pointer;
}
[data-supertokens~="secondaryLinkWithArrow"]:hover {
    position: relative;
    left: 2px;
    word-spacing: 4px;
}
[data-supertokens~="generalSuccess"] {
    color: rgb(var(--palette-success));
    font-size: var(--font-size-1);
    background: rgb(var(--palette-successBackground));
    animation: swing-in-top-fwd 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
    padding: 9px 15px 9px 15px;
    border-radius: 6px;
    display: inline-block;
}
[data-supertokens~="spinner"] {
    width: 80px;
    height: auto;
    padding-top: 20px;
    padding-bottom: 40px;
    margin: 0 auto;
}
[data-supertokens~="error"] {
    color: rgb(var(--palette-error));
}
[data-supertokens~="linkButton"] {
    font-family: "Arial", sans-serif;
    background-color: transparent;
    border: 0;
}
[data-supertokens~="secondaryLinkWithLeftArrow"] {
    color: rgb(var(--palette-textGray));
    font-weight: 400;
    margin-top: 10px;
    margin-bottom: 40px;
    cursor: pointer;
}
[data-supertokens~="secondaryLinkWithLeftArrow"] svg {
    margin-right: 0.3em;
}
[data-supertokens~="secondaryLinkWithLeftArrow"]:hover svg {
    position: relative;
    left: -4px;
}
[data-supertokens~="button"] {
    font-family: "Arial", sans-serif;
    background-color: rgb(var(--palette-primary));
    color: rgb(var(--palette-buttonText));
    width: 100%;
    height: 34px;
    font-weight: 600;
    border-width: 1px;
    border-style: solid;
    border-radius: 6px;
    border-color: rgb(var(--palette-primaryBorder));
    background-position: center;
    transition: all 0.4s;
    background-size: 12000%;
    cursor: pointer;
}
[data-supertokens~="buttonGreyedOut"] {
    background-color: rgb(var(--palette-buttonGreyedOut));
    border-color: rgb(var(--palette-buttonGreyedOut));
}
[data-supertokens~="buttonWithIcon"] {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}
[data-supertokens~="button"]:disabled {
    border: none;
    cursor: no-drop;
}
[data-supertokens~="button"]:active {
    outline: none;
    transition: all 0s;
    background-size: 100%;
    filter: brightness(0.85);
}
[data-supertokens~="button"]:focus {
    outline: none;
}
[data-supertokens~="backButtonCommon"] {
    width: 16px;
    height: 13px;
}
[data-supertokens~="backButton"] {
    cursor: pointer;
    border: none;
    background-color: transparent;
    padding: 0px;
}
[data-supertokens~="backButtonPlaceholder"] {
    display: block;
}
[data-supertokens~="delayedRender"] {
    animation-duration: 0.1s;
    animation-name: animate-fade;
    animation-delay: 0.2s;
    animation-fill-mode: backwards;
}
@keyframes animate-fade {
    0% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}
[data-supertokens~="footerLinkGroupVert"] {
    display: flex;
    flex-direction: column;
    margin-top: 10px;
    gap: 24px;
}
[data-supertokens~="footerLinkGroupVert"] > div {
    cursor: pointer;
    margin: 0;
}
[data-supertokens~="footerLinkGroupVert"] [data-supertokens~="secondaryText"] {
    font-weight: 400;
}
[data-supertokens~="footerLinkGroupVert"] [data-supertokens~="secondaryLinkWithLeftArrow"] {
    font-weight: 400;
    position: relative;
    left: -6px; /* half the width of the left arrow */
}
@media (max-width: 360px) {
    [data-supertokens~="footerLinkGroupVert"] {
        flex-direction: column;
    }
    [data-supertokens~="footerLinkGroupVert"] > div {
        margin: 0 auto;
    }
}
[data-supertokens~="footerLinkGroupVert"] div:only-child {
    margin-left: auto;
    margin-right: auto;
    margin-top: 14px;
}
[data-supertokens~="withBackButton"] {
    position: relative;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
[data-supertokens~="dividerWithOr"] {
    padding-top: 5px;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    color: rgb(var(--palette-textPrimary));
}
[data-supertokens~="dividerText"] {
    flex: 1 1;
    font-weight: 400;
    font-size: var(--font-size-1);
}
[data-supertokens~="formLabelWithLinkWrapper"] {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
[data-supertokens~="formLabelLinkBtn"] {
    width: auto;
    margin-top: 0;
    line-height: 24px;
    font-size: var(--font-size-0);
}
[data-supertokens~="formLabelLinkBtn"]:hover {
    text-decoration: underline;
}
[data-supertokens~="formLabelLinkBtn"]:disabled {
    color: rgb(var(--palette-textPrimary));
    cursor: default;
    text-decoration: none;
}
[data-supertokens~="authComponentList"] {
    padding-bottom: 20px;
}
[data-supertokens~="authPageTitleOAuthClient"] {
    color: rgb(var(--palette-textGray));
    font-size: var(--font-size-1);
    font-weight: 400;
    margin: 10px 0 25px;
}
[data-supertokens~="authPageTitleOAuthClientUrl"] {
    text-decoration: none;
}
[data-supertokens~="authPageTitleOAuthClientLogo"] {
    width: 44px;
    height: 44px;
    margin-bottom: 10px;
}
[data-supertokens~="authPageTitleOAuthClient"] [data-supertokens~="authPageTitleOAuthClientName"] {
    color: rgb(var(--palette-textTitle));
}
[data-supertokens~="buttonWithArrow"] {
    border-radius: 6px;
    border: 1px solid #d0d5dd;
    width: 100%;
    color: rgb(var(--palette-textGray));
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 5px;
    margin: 24px 0;
    min-height: 48px;
    cursor: pointer;
}
[data-supertokens~="buttonWithArrow"]:hover {
    background-color: rgb(var(--palette-inputBackground));
}
[data-supertokens~="buttonWithArrow"] [data-supertokens~="secondaryText"] {
    font-weight: 700;
    font-size: var(--font-size-2);
    color: rgb(var(--palette-textGray));
    margin: 0;
}
[data-supertokens~="buttonWithArrow"]:hover [data-supertokens~="secondaryLinkWithRightArrow"] ~ svg {
    position: relative;
    left: 2px;
}
[data-supertokens~="buttonWithArrow"]:hover [data-supertokens~="secondaryLinkWithLeftArrow"] svg {
    position: relative;
    left: -2px;
}
[data-supertokens~="buttonWithArrow"] [data-supertokens~="secondaryLinkWithLeftArrow"] {
    display: flex;
    align-items: center;
}
`,XOe=function(e){var t=e.children,r=e.userStyles;return Et.jsxs(Xr.Fragment,{children:[t,Et.jsxs("style",{children:[KOe,r.join(`
`)]})]})},YOe=function(){return Et.jsx("div",ft.__assign({"data-supertokens":"container delayedRender"},{children:Et.jsx("div",ft.__assign({"data-supertokens":"row"},{children:Et.jsx("div",ft.__assign({"data-supertokens":"spinner delayedRender"},{children:Et.jsx(nae,{})}))}))}))},QOe=IE("MultitenancyDynamicLoginMethodsSpinnerTheme",YOe),JOe=function(e){var t=Qr.SuperTokens.getInstanceOrThrow().rootStyle;return Et.jsx(XOe,ft.__assign({userStyles:[t,e.config.recipeRootStyle]},{children:Et.jsx(QOe,{})}))},r4=function(){var e=Qr.Multitenancy.getInstanceOrThrow(),t=zOe.useContext();return Et.jsx(t4.Provider,ft.__assign({value:t},{children:Et.jsx(VL,ft.__assign({useShadowDom:Qr.SuperTokens.getInstanceOrThrow().useShadowDom},{children:Et.jsx(JOe,{config:e.config})}))}))},iae=rc.default.createContext(void 0),ZOe=function(){var e=rc.default.useContext(iae);if(e===void 0)throw new Error("useDynamicLoginMethods used outside of a valid provider (FeatureWrapper)");return e},aae=function(e){var t=e.value,r=e.children,n=t===void 0?{loaded:!1}:{loaded:!0,loginMethods:t};return Et.jsx(iae.Provider,ft.__assign({value:n},{children:r}))},n4=rc.default.createContext(void 0),Jy=function(){return rc.default.useContext(n4)},_6=function(e){var t=e.children,r=e.userContext,n=Xr.useState(ft.getNormalisedUserContext(r))[0];return Et.jsx(n4.Provider,ft.__assign({value:n},{children:t}))};function e4e(e){var t=e.children,r=e.useShadowDom,n=e.defaultStore,i=Jy(),a=ft.useRethrowInRender(),s=Xr.useState(void 0),o=s[0],l=s[1],c=Qr.SuperTokens.getInstanceOrThrow();return Xr.useEffect(function(){o||Qr.Multitenancy.getInstanceOrThrow().getCurrentDynamicLoginMethods({userContext:i}).then(function(d){return l(d)},function(d){return a(d)})},[o,l]),Qr.SuperTokens.usesDynamicLoginMethods&&!o?Et.jsx(r4,{}):Et.jsx(aae,ft.__assign({value:o},{children:Et.jsx(V0.TranslationContextProvider,ft.__assign({defaultLanguage:c.languageTranslations.defaultLanguage,defaultStore:ft.mergeObjects(n,c.languageTranslations.userTranslationStore),translationControlEventSource:c.languageTranslations.translationEventSource,userTranslationFunc:c.languageTranslations.userTranslationFunc},{children:Et.jsx(VL,ft.__assign({useShadowDom:r},{children:t}))}))}))}function t4e(e){var t=e.children,r=Xr.useRef(null),n=Xr.useState(),i=n[0],a=n[1];return Xr.useEffect(function(){r.current&&a(function(s){return s||r.current.shadowRoot||r.current.attachShadow({mode:"open",delegatesFocus:!1})})},[r]),Et.jsx("div",ft.__assign({id:ft.ST_ROOT_ID,ref:r},{children:i&&$Oe.createPortal(t,i)}))}function VL(e){var t=e.children,r=e.useShadowDom;return r===!1?Et.jsxs("div",ft.__assign({id:ft.ST_ROOT_ID},{children:[t,Et.jsx(YV,{})]})):Et.jsxs(t4e,{children:[t,Et.jsx(YV,{})]})}function YV(){return Et.jsx("style",ft.__assign({type:"text/css"},{children:"input.supertokens-input:-webkit-autofill,input.supertokens-input:-webkit-autofill:focus,input.supertokens-input:-webkit-autofill:hover,select:-webkit-autofill,select:-webkit-autofill:focus,select:-webkit-autofill:hover,textarea:-webkit-autofill,textarea:-webkit-autofill:focus,textarea:-webkit-autofill:hover{transition:background-color 5000s ease-in-out 0s}"}))}var qL=rc.default.createContext({loading:!0,isDefault:!0}),sae=function(){var e=rc.default.useContext(qL);if(e.isDefault===!0)throw new Error("Cannot use useSessionContext outside auth wrapper components.");return e},oae=HOe.createGenericComponentsOverrideContext({},"authRecipe"),r4e=oae[0],lae=oae[1];function cae(){var e=V0.useTranslation();return Et.jsxs("a",ft.__assign({"data-supertokens":"superTokensBranding",href:"https://supertokens.com?utm_campaign=poweredby",target:"_blank"},{children:[e("BRANDING_POWERED_BY_START"),Et.jsx("strong",{children:"SuperTokens"}),e("BRANDING_POWERED_BY_END")]}))}function GL(e){return e.userContext!==void 0?Et.jsx(_6,ft.__assign({userContext:e.userContext},{children:e.children})):Et.jsx(n4.Consumer,{children:function(t){return t===void 0?Et.jsx(_6,{children:e.children}):e.children}})}function uae(e){var t=e.error,r=V0.useTranslation();return Et.jsx("div",ft.__assign({"data-supertokens":"generalError"},{children:r(t)}))}var n4e=`[data-supertokens~="container"] {
    --palette-background: 255, 255, 255;
    --palette-inputBackground: 250, 250, 250;
    --palette-inputBorder: 224, 224, 224;
    --palette-primary: 28, 34, 42;
    --palette-primaryBorder: 45, 54, 68;
    --palette-success: 65, 167, 0;
    --palette-successBackground: 217, 255, 191;
    --palette-error: 255, 23, 23;
    --palette-errorBackground: 255, 241, 235;
    --palette-textTitle: 0, 0, 0;
    --palette-textLabel: 0, 0, 0;
    --palette-textInput: 0, 0, 0;
    --palette-textPrimary: 128, 128, 128;
    --palette-textLink: 0, 122, 255;
    --palette-buttonText: 255, 255, 255;
    --palette-textGray: 54, 54, 54;
    --palette-superTokensBrandingBackground: 242, 245, 246;
    --palette-superTokensBrandingText: 173, 189, 196;
    --palette-buttonGreyedOut: 221, 221, 221;
    --palette-caution: 124, 96, 62;
    --palette-errorDark: 207, 54, 68;

    --font-size-0: 12px;
    --font-size-1: 14px;
    --font-size-2: 16px;
    --font-size-3: 19px;
    --font-size-4: 24px;
    --font-size-5: 28px;
}
/*
 * Default styles.
 */
@keyframes slideTop {
    0% {
        transform: translateY(-5px);
    }
    100% {
        transform: translateY(0px);
    }
}
@keyframes swing-in-top-fwd {
    0% {
        transform: rotateX(-100deg);
        transform-origin: top;
        opacity: 0;
    }
    100% {
        transform: rotateX(0deg);
        transform-origin: top;
        opacity: 1;
    }
}
[data-supertokens~="container"] {
    font-family: "Arial", sans-serif;
    margin: 12px auto;
    margin-top: 26px;
    margin-bottom: 26px;
    width: 420px;
    text-align: center;
    border-radius: 8px;
    box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.16);
    background-color: rgb(var(--palette-background));
}
@media (max-width: 440px) {
    [data-supertokens~="container"] {
        width: 95vw;
    }
}
[data-supertokens~="row"] {
    margin: 0 auto;
    width: 76%;
    padding-top: 30px;
    padding-bottom: 10px;
}
[data-supertokens~="superTokensBranding"] {
    display: block;
    margin: 10px auto 0;
    background: rgb(var(--palette-superTokensBrandingBackground));
    color: rgb(var(--palette-superTokensBrandingText));
    text-decoration: none;
    width: -webkit-fit-content;
    width: -moz-fit-content;
    width: fit-content;
    border-radius: 6px 6px 0 0;
    padding: 4px 9px;
    font-weight: 400;
    font-size: var(--font-size-0);
    letter-spacing: 0.4px;
}
[data-supertokens~="generalError"] {
    background: rgb(var(--palette-errorBackground));
    padding-top: 10px;
    padding-bottom: 10px;
    margin-bottom: 10px;
    margin-top: 24px;
    padding-left: 18px;
    padding-right: 18px;
    letter-spacing: 0.2px;
    font-size: var(--font-size-1);
    border-radius: 8px;
    color: rgb(var(--palette-error));
    animation: swing-in-top-fwd 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
    word-wrap: break-word;
}
[data-supertokens~="headerTitle"] {
    font-size: var(--font-size-4);
    line-height: 27.6px;
    letter-spacing: 0.58px;
    font-weight: 700;
    margin-bottom: 20px;
    color: rgb(var(--palette-textTitle));
}
[data-supertokens~="headerSubtitle"] {
    font-weight: 400;
    color: rgb(var(--palette-textGray));
    margin-bottom: 21px;
}
[data-supertokens~="headerSubtitle"][data-supertokens~="secondaryText"] {
    color: rgb(var(--palette-textGray));
    font-weight: 400;
}
[data-supertokens~="privacyPolicyAndTermsAndConditions"] {
    max-width: 300px;
    margin-top: 10px;
}
[data-supertokens~="privacyPolicyAndTermsAndConditions"] a {
    line-height: 21px;
}
/* TODO: split the link style into separate things*/
/* We add this before primary and secondary text, because if they are applied to the same element the other ones take priority */
[data-supertokens~="link"] {
    padding-left: 3px;
    padding-right: 3px;
    color: rgb(var(--palette-textLink));
    font-size: var(--font-size-1);
    cursor: pointer;
    letter-spacing: 0.16px;
    line-height: 26px;
}
[data-supertokens~="primaryText"] {
    font-size: var(--font-size-2);
    font-weight: 400;
    letter-spacing: 0.4px;
    line-height: 21px;
    color: rgb(var(--palette-textLabel));
}
[data-supertokens~="secondaryText"] {
    font-size: var(--font-size-1);
    font-weight: 400;
    letter-spacing: 0.4px;
    color: rgb(var(--palette-textPrimary));
}
[data-supertokens~="secondaryText"] strong {
    font-weight: 600;
}
[data-supertokens~="divider"] {
    margin-top: 1.5em;
    margin-bottom: 1.5em;
    border-bottom: 0.3px solid #dddddd;
    align-items: center;
    padding-bottom: 5px;
    flex: 3 3;
}
[data-supertokens~="headerTinyTitle"] {
    margin-top: 24px;
    font-size: var(--font-size-5);
    letter-spacing: 1.1px;
    font-weight: 700;
    line-height: 28px;
}
[data-supertokens~="secondaryLinkWithArrow"] {
    margin-top: 10px;
    margin-bottom: 30px;
    cursor: pointer;
}
[data-supertokens~="secondaryLinkWithArrow"]:hover {
    position: relative;
    left: 2px;
    word-spacing: 4px;
}
[data-supertokens~="generalSuccess"] {
    color: rgb(var(--palette-success));
    font-size: var(--font-size-1);
    background: rgb(var(--palette-successBackground));
    animation: swing-in-top-fwd 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
    padding: 9px 15px 9px 15px;
    border-radius: 6px;
    display: inline-block;
}
[data-supertokens~="spinner"] {
    width: 80px;
    height: auto;
    padding-top: 20px;
    padding-bottom: 40px;
    margin: 0 auto;
}
[data-supertokens~="error"] {
    color: rgb(var(--palette-error));
}
[data-supertokens~="linkButton"] {
    font-family: "Arial", sans-serif;
    background-color: transparent;
    border: 0;
}
[data-supertokens~="secondaryLinkWithLeftArrow"] {
    color: rgb(var(--palette-textGray));
    font-weight: 400;
    margin-top: 10px;
    margin-bottom: 40px;
    cursor: pointer;
}
[data-supertokens~="secondaryLinkWithLeftArrow"] svg {
    margin-right: 0.3em;
}
[data-supertokens~="secondaryLinkWithLeftArrow"]:hover svg {
    position: relative;
    left: -4px;
}
[data-supertokens~="button"] {
    font-family: "Arial", sans-serif;
    background-color: rgb(var(--palette-primary));
    color: rgb(var(--palette-buttonText));
    width: 100%;
    height: 34px;
    font-weight: 600;
    border-width: 1px;
    border-style: solid;
    border-radius: 6px;
    border-color: rgb(var(--palette-primaryBorder));
    background-position: center;
    transition: all 0.4s;
    background-size: 12000%;
    cursor: pointer;
}
[data-supertokens~="buttonGreyedOut"] {
    background-color: rgb(var(--palette-buttonGreyedOut));
    border-color: rgb(var(--palette-buttonGreyedOut));
}
[data-supertokens~="buttonWithIcon"] {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}
[data-supertokens~="button"]:disabled {
    border: none;
    cursor: no-drop;
}
[data-supertokens~="button"]:active {
    outline: none;
    transition: all 0s;
    background-size: 100%;
    filter: brightness(0.85);
}
[data-supertokens~="button"]:focus {
    outline: none;
}
[data-supertokens~="backButtonCommon"] {
    width: 16px;
    height: 13px;
}
[data-supertokens~="backButton"] {
    cursor: pointer;
    border: none;
    background-color: transparent;
    padding: 0px;
}
[data-supertokens~="backButtonPlaceholder"] {
    display: block;
}
[data-supertokens~="delayedRender"] {
    animation-duration: 0.1s;
    animation-name: animate-fade;
    animation-delay: 0.2s;
    animation-fill-mode: backwards;
}
@keyframes animate-fade {
    0% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}
[data-supertokens~="footerLinkGroupVert"] {
    display: flex;
    flex-direction: column;
    margin-top: 10px;
    gap: 24px;
}
[data-supertokens~="footerLinkGroupVert"] > div {
    cursor: pointer;
    margin: 0;
}
[data-supertokens~="footerLinkGroupVert"] [data-supertokens~="secondaryText"] {
    font-weight: 400;
}
[data-supertokens~="footerLinkGroupVert"] [data-supertokens~="secondaryLinkWithLeftArrow"] {
    font-weight: 400;
    position: relative;
    left: -6px; /* half the width of the left arrow */
}
@media (max-width: 360px) {
    [data-supertokens~="footerLinkGroupVert"] {
        flex-direction: column;
    }
    [data-supertokens~="footerLinkGroupVert"] > div {
        margin: 0 auto;
    }
}
[data-supertokens~="footerLinkGroupVert"] div:only-child {
    margin-left: auto;
    margin-right: auto;
    margin-top: 14px;
}
[data-supertokens~="withBackButton"] {
    position: relative;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
[data-supertokens~="dividerWithOr"] {
    padding-top: 5px;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    color: rgb(var(--palette-textPrimary));
}
[data-supertokens~="dividerText"] {
    flex: 1 1;
    font-weight: 400;
    font-size: var(--font-size-1);
}
[data-supertokens~="formLabelWithLinkWrapper"] {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
[data-supertokens~="formLabelLinkBtn"] {
    width: auto;
    margin-top: 0;
    line-height: 24px;
    font-size: var(--font-size-0);
}
[data-supertokens~="formLabelLinkBtn"]:hover {
    text-decoration: underline;
}
[data-supertokens~="formLabelLinkBtn"]:disabled {
    color: rgb(var(--palette-textPrimary));
    cursor: default;
    text-decoration: none;
}
[data-supertokens~="authComponentList"] {
    padding-bottom: 20px;
}
[data-supertokens~="authPageTitleOAuthClient"] {
    color: rgb(var(--palette-textGray));
    font-size: var(--font-size-1);
    font-weight: 400;
    margin: 10px 0 25px;
}
[data-supertokens~="authPageTitleOAuthClientUrl"] {
    text-decoration: none;
}
[data-supertokens~="authPageTitleOAuthClientLogo"] {
    width: 44px;
    height: 44px;
    margin-bottom: 10px;
}
[data-supertokens~="authPageTitleOAuthClient"] [data-supertokens~="authPageTitleOAuthClientName"] {
    color: rgb(var(--palette-textTitle));
}
[data-supertokens~="buttonWithArrow"] {
    border-radius: 6px;
    border: 1px solid #d0d5dd;
    width: 100%;
    color: rgb(var(--palette-textGray));
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 5px;
    margin: 24px 0;
    min-height: 48px;
    cursor: pointer;
}
[data-supertokens~="buttonWithArrow"]:hover {
    background-color: rgb(var(--palette-inputBackground));
}
[data-supertokens~="buttonWithArrow"] [data-supertokens~="secondaryText"] {
    font-weight: 700;
    font-size: var(--font-size-2);
    color: rgb(var(--palette-textGray));
    margin: 0;
}
[data-supertokens~="buttonWithArrow"]:hover [data-supertokens~="secondaryLinkWithRightArrow"] ~ svg {
    position: relative;
    left: 2px;
}
[data-supertokens~="buttonWithArrow"]:hover [data-supertokens~="secondaryLinkWithLeftArrow"] svg {
    position: relative;
    left: -2px;
}
[data-supertokens~="buttonWithArrow"] [data-supertokens~="secondaryLinkWithLeftArrow"] {
    display: flex;
    align-items: center;
}
`,i4e=function(e){var t=e.children,r=e.userStyles;return Et.jsxs(Xr.Fragment,{children:[t,Et.jsxs("style",{children:[n4e,r.join(`
`)]})]})},KL=IE("AuthPageComponentList",function(t){for(var r=V0.useTranslation(),n=[t.authComponents[0]],i=function(s){n.push(function(){return Et.jsxs("div",ft.__assign({"data-supertokens":"dividerWithOr"},{children:[Et.jsx("div",{"data-supertokens":"divider"}),Et.jsx("div",ft.__assign({"data-supertokens":"dividerText"},{children:r("DIVIDER_OR")})),Et.jsx("div",{"data-supertokens":"divider"})]}),"divider-".concat(s))}),n.push(t.authComponents[s])},a=1;a<t.authComponents.length;++a)i(a);return Et.jsx("div",ft.__assign({"data-supertokens":"authComponentList"},{children:n.map(function(s){return s(ft.__assign({},t))})}))}),XL=IE("AuthPageFooter",function(t){var r=t.hasSeparateSignUpView,n=t.isSignUp,i=t.termsOfServiceLink,a=t.privacyPolicyLink,s=V0.useTranslation();return i===void 0&&a===void 0||r&&!n?null:Et.jsxs("div",ft.__assign({"data-supertokens":"secondaryText privacyPolicyAndTermsAndConditions"},{children:[s("AUTH_PAGE_FOOTER_START"),i!==void 0&&Et.jsx("a",ft.__assign({"data-supertokens":"link",href:i,target:"_blank",rel:"noopener noreferer"},{children:s("AUTH_PAGE_FOOTER_TOS")})),i!==void 0&&a!==void 0&&s("AUTH_PAGE_FOOTER_AND"),a!==void 0&&Et.jsx("a",ft.__assign({"data-supertokens":"link",href:a,target:"_blank",rel:"noopener noreferer"},{children:s("AUTH_PAGE_FOOTER_PP")})),s("AUTH_PAGE_FOOTER_END")]}))});function a4e(e){var t=e.color;return Et.jsx("svg",ft.__assign({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"13",viewBox:"0 0 16 13","data-supertokens":"heavyArrowLeftIcon"},{children:Et.jsx("path",{fill:t,d:"M13 6.8h.022H3.8l2.9 2.9a.761.761 0 0 1 0 1.07l-.451.451a.754.754 0 0 1-1.064 0L.22 6.254a.759.759 0 0 1 0-1.068L5.186.22a.755.755 0 0 1 1.064 0l.45.451a.746.746 0 0 1 .22.532.724.724 0 0 1-.22.522l-2.93 2.92h9.24a.781.781 0 0 1 .764.773v.638A.766.766 0 0 1 13 6.8z",transform:"translate(1.182 .708)"})}))}function dae(e){var t=e.onClick;return Et.jsx("button",ft.__assign({onClick:t,"data-supertokens":"backButton backButtonCommon"},{children:Et.jsx(a4e,{color:"rgb(var(--palette-textTitle))"})}))}var YL=IE("AuthPageHeader",function(t){var r=t.onSignInUpSwitcherClick,n=t.hasSeparateSignUpView,i=t.isSignUp,a=t.showBackButton,s=t.resetFactorList,o=t.oauth2ClientInfo,l=t.headerLabel,c=t.hideSignInSwitcher,d=c===void 0?!1:c,f=V0.useTranslation();return Et.jsxs(Xr.Fragment,{children:[(o==null?void 0:o.logoUri)&&Et.jsx("img",{src:o.logoUri,alt:o.clientName,"data-supertokens":"authPageTitleOAuthClientLogo"}),Et.jsxs("div",ft.__assign({"data-supertokens":"headerTitle withBackButton"},{children:[a?Et.jsx(dae,{onClick:s}):Et.jsx("span",{"data-supertokens":"backButtonPlaceholder backButtonCommon"}),f(l!==void 0?l:n?i?"AUTH_PAGE_HEADER_TITLE_SIGN_UP":"AUTH_PAGE_HEADER_TITLE_SIGN_IN":"AUTH_PAGE_HEADER_TITLE_SIGN_IN_AND_UP"),Et.jsx("span",{"data-supertokens":"backButtonPlaceholder backButtonCommon"})]})),o&&o.clientName!==void 0&&o.clientName.length>0&&Et.jsxs("div",ft.__assign({"data-supertokens":"authPageTitleOAuthClient"},{children:[f("AUTH_PAGE_HEADER_TITLE_SIGN_IN_UP_TO_APP"),o.clientUri!==void 0?Et.jsx("a",ft.__assign({"data-supertokens":"authPageTitleOAuthClientUrl link",href:o.clientUri},{children:o.clientName})):Et.jsx("span",ft.__assign({"data-supertokens":"authPageTitleOAuthClientName"},{children:o.clientName}))]})),!d&&n&&(i?Et.jsxs("div",ft.__assign({"data-supertokens":"headerSubtitle secondaryText"},{children:[f("AUTH_PAGE_HEADER_SUBTITLE_SIGN_UP_START"),Et.jsx("span",ft.__assign({"data-supertokens":"link",onClick:r},{children:f("AUTH_PAGE_HEADER_SUBTITLE_SIGN_UP_SIGN_IN_LINK")})),f("AUTH_PAGE_HEADER_SUBTITLE_SIGN_UP_END")]})):Et.jsxs("div",ft.__assign({"data-supertokens":"headerSubtitle secondaryText"},{children:[f("AUTH_PAGE_HEADER_SUBTITLE_SIGN_IN_START"),Et.jsx("span",ft.__assign({"data-supertokens":"link",onClick:r},{children:f("AUTH_PAGE_HEADER_SUBTITLE_SIGN_IN_SIGN_UP_LINK")})),f("AUTH_PAGE_HEADER_SUBTITLE_SIGN_IN_END")]}))),Et.jsx("div",{"data-supertokens":"divider"})]})});function QL(e){return e.fullPageCompWithPreloadedInfo?Et.jsx(Et.Fragment,{children:e.fullPageCompWithPreloadedInfo.component(ft.__assign(ft.__assign({},e),{preloadInfo:e.fullPageCompWithPreloadedInfo.preloadInfo,showBackButton:e.showBackButton}))}):Et.jsxs("div",ft.__assign({"data-supertokens":"container authPage ".concat(e.factorIds.length>1?"multiFactor":"singleFactor")},{children:[Et.jsxs("div",ft.__assign({"data-supertokens":"row"},{children:[Et.jsx(YL,{factorIds:e.factorIds,isSignUp:e.isSignUp,onSignInUpSwitcherClick:e.onSignInUpSwitcherClick,hasSeparateSignUpView:e.hasSeparateSignUpView,resetFactorList:e.resetFactorList,showBackButton:e.showBackButton,oauth2ClientInfo:e.oauth2ClientInfo}),e.error!==void 0&&Et.jsx(uae,{error:e.error}),Et.jsx(KL,ft.__assign({},e)),Et.jsx(XL,{factorIds:e.factorIds,isSignUp:e.isSignUp,hasSeparateSignUpView:e.hasSeparateSignUpView,privacyPolicyLink:e.privacyPolicyLink,termsOfServiceLink:e.termsOfServiceLink})]})),Et.jsx(cae,{})]}))}function s4e(e){var t=Qr.SuperTokens.getInstanceOrThrow().rootStyle;return Et.jsx(GL,ft.__assign({userContext:e.userContext},{children:Et.jsx(i4e,ft.__assign({userStyles:[t]},{children:Et.jsx(QL,ft.__assign({},e))}))}))}var o4e={signin:"SOMETHING_WENT_WRONG_ERROR",no_email_present:"THIRD_PARTY_ERROR_NO_EMAIL",restart_link:"ERROR_SIGN_IN_UP_LINK"},fae=function(e){var t=r4e();return Et.jsx(_6,ft.__assign({userContext:e.userContext},{children:Et.jsx(ZL,ft.__assign({requireAuth:!1,doRedirection:!1},{children:Et.jsx(t4.Provider,ft.__assign({value:t},{children:Et.jsx(l4e,ft.__assign({},e))}))}))}))},l4e=function(e){var t,r,n,i,a;if(e.factors!==void 0&&e.factors.length===0)throw new Error("The factors array cannot be empty");var s=UOe.WindowHandlerReference.getReferenceOrThrow().windowHandler,o=new URLSearchParams(s.location.getSearch()),l=o.get("show"),c=e.useSignUpStateFromQueryString!==!0||l===null?void 0:l==="signup",d=o.get("error")!==null&&(r=(t=o.get("message"))!==null&&t!==void 0?t:o.get("error"))!==null&&r!==void 0?r:void 0;d=d!==void 0?(n=o4e[d])!==null&&n!==void 0?n:d:void 0;var f=Xr.useRef(l),p=Xr.useRef(d),m=o.get("loginChallenge"),x=o.get("forceFreshAuth")==="true",v=sae(),b=Jy(),w=ft.useRethrowInRender(),k=Xr.useState(void 0),E=k[0],N=k[1],P=Xr.useState(void 0),R=P[0],O=P[1],D=Xr.useState(d),L=D[0],B=D[1],z=Xr.useState(!1),H=z[0],te=z[1],Y=Qr.SuperTokens.getInstanceOrThrow(),W=Xr.useState(e.factors),Z=W[0],re=W[1],X=Xr.useState((a=(i=e.isSignUp)!==null&&i!==void 0?i:c)!==null&&a!==void 0?a:Y.defaultToSignUp),Q=X[0],fe=X[1],ye=Xr.useState(0),J=ye[0],ce=ye[1],V=Xr.useRef({buildReq:void 0});Xr.useEffect(function(){if(e.useSignUpStateFromQueryString&&f.current!==l){var De=e.useSignUpStateFromQueryString!==!0||l===null?void 0:l==="signup";f.current=l;var $e=De??Y.defaultToSignUp;Q!==$e&&(fe($e),ce(function(et){return et+1}))}}),Xr.useEffect(function(){p.current!==d&&(p.current=d,B(d))});var G=Xr.useCallback(function(){e.useSignUpStateFromQueryString===!0&&ft.updateQueryParam("show",Q?"signin":"signup"),B(void 0),fe(!Q),ce(function(De){return De+1})},[Q,fe,ce,B,e.useSignUpStateFromQueryString]);Xr.useEffect(function(){E||Qr.Multitenancy.getInstanceOrThrow().getCurrentDynamicLoginMethods({userContext:b}).then(function(De){return N(De)},function(De){return w(De)})},[E,N]),ft.useOnMountAPICall(function(){return ft.__awaiter(void 0,void 0,void 0,function(){var De;return ft.__generator(this,function($e){return R?[2]:(De=c_.OAuth2Provider.getInstance(),De!==void 0&&m!==null?[2,De.webJSRecipe.getLoginChallengeInfo({loginChallenge:m,userContext:b})]:[2,void 0])})})},function(De){return ft.__awaiter(void 0,void 0,void 0,function(){return ft.__generator(this,function($e){return De!==void 0&&(De.status==="OK"?O(De.info):B("SOMETHING_WENT_WRONG_ERROR")),[2]})})},function(){ft.clearQueryParams(["loginChallenge"]),B("SOMETHING_WENT_WRONG_ERROR")}),Xr.useEffect(function(){if(!H&&v.loading===!1)if(v.doesSessionExist)if(e.onSessionAlreadyExists!==void 0)e.onSessionAlreadyExists();else if(e.redirectOnSessionExists!==!1&&!x){Nn.Session.getInstanceOrThrow().config.onHandleEvent({action:"SESSION_ALREADY_EXISTS"});var De=c_.OAuth2Provider.getInstance();m!==null&&De!==void 0?function(){return ft.__awaiter(this,void 0,void 0,function(){var $e;return ft.__generator(this,function(et){switch(et.label){case 0:return[4,De.webJSRecipe.getRedirectURLToContinueOAuthFlow({loginChallenge:m,userContext:b})];case 1:return $e=et.sent().frontendRedirectTo,[2,Nn.Session.getInstanceOrThrow().validateGlobalClaimsAndHandleSuccessRedirection({action:"SUCCESS_OAUTH2",frontendRedirectTo:$e,createdNewUser:!1,isNewRecipeUser:!1,newSessionCreated:!1,tenantIdFromQueryParams:ft.getTenantIdFromQueryParams(),recipeId:Nn.Session.RECIPE_ID},Nn.Session.RECIPE_ID,ft.getRedirectToPathFromURL(),b,e.navigate)]}})})}().catch(w):Nn.Session.getInstanceOrThrow().validateGlobalClaimsAndHandleSuccessRedirection(void 0,Nn.Session.RECIPE_ID,ft.getRedirectToPathFromURL(),b,e.navigate).catch(w)}else te(!0);else te(!0)},[v.loading]);var ie=Xr.useState(),Ee=ie[0],ne=ie[1],ae=Z!==void 0&&(e.factors===void 0||e.factors.some(function(De){return!Z.includes(De)})),me=Qr.SuperTokens.getInstanceOrThrow(),ve=me.privacyPolicyLink,q=me.termsOfServiceLink;Xr.useEffect(function(){var De=new AbortController;if(V.current.buildReq!==J)return H&&(E!==void 0||!Qr.SuperTokens.usesDynamicLoginMethods)&&c4e(e.preBuiltUIList,E,b,Z,Q,ne,De.signal).then(function(){V.current.buildReq=J},w),function(){De.abort()}},[H,J,ce,e.preBuiltUIList,E,b,Z,Q,ne,w]);var Ne=Xr.useCallback(function(De){return ft.__awaiter(void 0,void 0,void 0,function(){var $e,et;return ft.__generator(this,function(ut){switch(ut.label){case 0:return $e=c_.OAuth2Provider.getInstance(),m===null||$e===void 0?[2,Nn.Session.getInstanceOrThrow().validateGlobalClaimsAndHandleSuccessRedirection(ft.__assign(ft.__assign({},De),{action:"SUCCESS",tenantIdFromQueryParams:ft.getTenantIdFromQueryParams(),redirectToPath:ft.getRedirectToPathFromURL()}),De.recipeId,ft.getRedirectToPathFromURL(),b,e.navigate)]:[4,$e.webJSRecipe.getRedirectURLToContinueOAuthFlow({loginChallenge:m,userContext:b})];case 1:return et=ut.sent().frontendRedirectTo,[2,Nn.Session.getInstanceOrThrow().validateGlobalClaimsAndHandleSuccessRedirection(ft.__assign(ft.__assign({},De),{action:"SUCCESS_OAUTH2",tenantIdFromQueryParams:ft.getTenantIdFromQueryParams(),frontendRedirectTo:et}),De.recipeId,ft.getRedirectToPathFromURL(),b,e.navigate)]}})})},[m]),Pe=Ee!==void 0&&(m===null||R!==void 0||c_.OAuth2Provider.getInstance()===void 0)?ft.__assign(ft.__assign({},Ee),{oauth2ClientInfo:R,onAuthSuccess:Ne,error:L,onError:function(De){B(De)},clearError:function(){return B(void 0)},navigate:e.navigate,onSignInUpSwitcherClick:G,privacyPolicyLink:ve,rebuildAuthPage:function(){return ce(function(De){return De+1})},setFactorList:function(De){re(De),ce(function($e){return $e+1})},resetFactorList:function(){re(e.factors),ce(function(De){return De+1})},showBackButton:ae,termsOfServiceLink:q,userContext:b}):void 0,ze=Xr.useMemo(function(){var De=Qr.defaultTranslationsCommon;if(Ee!==void 0)for(var $e=0,et=e.preBuiltUIList;$e<et.length;$e++){var ut=et[$e];De=ft.mergeObjects(De,ut.languageTranslations)}return De=ft.mergeObjects(De,Y.languageTranslations.userTranslationStore),De},[Y.languageTranslations.userTranslationStore,Ee]);return Pe===void 0?Et.jsx(r4,{}):Et.jsx(aae,ft.__assign({value:E},{children:Et.jsx(V0.TranslationContextProvider,ft.__assign({defaultLanguage:Y.languageTranslations.defaultLanguage,defaultStore:ze,translationControlEventSource:Y.languageTranslations.translationEventSource,userTranslationFunc:Y.languageTranslations.userTranslationFunc},{children:Et.jsx(VL,ft.__assign({useShadowDom:Y.useShadowDom},{children:Et.jsxs(Xr.Fragment,{children:[e.children===void 0&&Et.jsx(s4e,ft.__assign({},Pe)),e.children&&rc.default.Children.map(e.children,function(De){return rc.default.isValidElement(De)?rc.default.cloneElement(De,Pe):De})]})}))}))}))};function c4e(e,t,r,n,i,a,s){var o,l,c,d,f;return ft.__awaiter(this,void 0,void 0,function(){var p,m,x,v,b,w,k,E,N,P,R,O,D,L,B,z,H,te,Y,W,Z,re,X,Q;return ft.__generator(this,function(fe){switch(fe.label){case 0:if(p=Qr.SuperTokens.getInstanceOrThrow().recipeList.filter(function(ye){return"firstFactorIds"in ye}),m=(c=(o=n??(t==null?void 0:t.firstFactors))!==null&&o!==void 0?o:(l=RN.MultiFactorAuth.getInstance())===null||l===void 0?void 0:l.config.firstFactors)!==null&&c!==void 0?c:p.reduce(function(ye,J){return ft.__spreadArray(ft.__spreadArray([],ye,!0),J.getFirstFactorsForAuthPage(),!0)},[]),n===void 0&&(t==null?void 0:t.firstFactors)===void 0&&((d=RN.MultiFactorAuth.getInstance())===null||d===void 0?void 0:d.config.firstFactors)===void 0&&(x=p.filter(function(ye){return!e.some(function(J){return J.recipeInstance.recipeID===ye.recipeID})}),x.length>0))throw new Error("Factor list not set but PreBuiltUI not added for ".concat(x.map(function(ye){return ye.recipeID})));if(m.length===0)throw new Error("There are no enabled factors to show");if(m.includes(Nn.FactorIds.THIRDPARTY)&&(v=e.find(function(ye){return ye.recipeInstance.recipeID===Nn.FactorIds.THIRDPARTY}),v!==void 0&&v.recipeInstance.config.signInAndUpFeature.providers.length===0&&(!Qr.SuperTokens.usesDynamicLoginMethods||t.thirdparty.providers.length===0)&&(m=m.filter(function(ye){return ye!==Nn.FactorIds.THIRDPARTY}),m.length===0)))throw new Error("The only enabled first factor is thirdparty, but no providers were defined. Please define at least one provider.");for(b=e.some(function(ye){return ye.requiresSignUpPage&&ye.recipeInstance.firstFactorIds.some(function(J){return m.includes(J)})}),w=b&&i,k=[],E=0,N=e;E<N.length;E++)P=N[E],k.push.apply(k,P.getAuthComponents());R=0,O=k,fe.label=1;case 1:return R<O.length?(D=O[R],D.type!=="FULL_PAGE"?[3,3]:[4,D.preloadInfoAndRunChecks(m,r,w)]):[3,4];case 2:if(L=fe.sent(),s.aborted)return[2];if(L.shouldDisplay)return a({authComponents:[],fullPageCompWithPreloadedInfo:{component:D.component,preloadInfo:L.preloadInfo},isSignUp:w,hasSeparateSignUpView:b,factorIds:m}),[2];fe.label=3;case 3:return R++,[3,1];case 4:if(s.aborted)return[2];if(B=k.filter(function(ye){return ye.type!=="FULL_PAGE"&&ye.factorIds.every(function(J){return m.includes(J)})}),B=B.filter(function(ye){return ye.type==="SIGN_IN_UP"||(w?ye.type==="SIGN_UP":ye.type==="SIGN_IN")}),B.sort(function(ye,J){return J.factorIds.length-ye.factorIds.length}),z=WOe.selectComponentsToCoverAllFirstFactors(B,m),z===void 0){for(H=new Set,te=0,Y=B;te<Y.length;te++)for(W=Y[te],Z=0,re=W.factorIds;Z<re.length;Z++)X=re[Z],H.add(X);throw Q=n!==void 0?"local state or props":(t==null?void 0:t.firstFactors)!==void 0?"dynamic tenant configuration":((f=RN.MultiFactorAuth.getInstance())===null||f===void 0?void 0:f.config.firstFactors)!==void 0?"the config passed to the MFA recipe":"all recipes initialized",new Error("Couldn't cover all first factors: ".concat(m.join(", ")," (from ").concat(Q,"), available components: ").concat(Array.from(H).join(", "),`.
`)+`You may have missed adding a recipe into the list of prebuiltUIs passed to list of prebuiltUIs passed to getSuperTokensRoutesForReactRouterDom, canHandleRoute, handleRoute functions or the AuthPage component.
Another common error is adding a non-existent factor id into the list, e.g.: passwordless instead of otp-email/phone`)}return a({authComponents:z.sort(function(ye,J){return ye.displayOrder-J.displayOrder}).map(function(ye){return ye.component}),factorIds:m,hasSeparateSignUpView:b,isSignUp:w}),[2]}})})}var xv=[{rid:"thirdpartyemailpassword",includes:["thirdparty","emailpassword"],factorsProvided:[Nn.FactorIds.THIRDPARTY,Nn.FactorIds.EMAILPASSWORD]},{rid:"thirdpartypasswordless",includes:["thirdparty","passwordless"],factorsProvided:[Nn.FactorIds.THIRDPARTY,Nn.FactorIds.OTP_PHONE,Nn.FactorIds.OTP_EMAIL,Nn.FactorIds.LINK_PHONE,Nn.FactorIds.LINK_EMAIL]},{rid:"emailpassword",includes:["emailpassword"],factorsProvided:[Nn.FactorIds.EMAILPASSWORD]},{rid:"passwordless",includes:["passwordless"],factorsProvided:[Nn.FactorIds.OTP_PHONE,Nn.FactorIds.OTP_EMAIL,Nn.FactorIds.LINK_PHONE,Nn.FactorIds.LINK_EMAIL]},{rid:"thirdparty",includes:["thirdparty"],factorsProvided:[Nn.FactorIds.THIRDPARTY]}];function QV(e,t){for(var r,n,i=function(D,L){if(e.every(function(z){return L.includes(z)})){var B=t.find(function(z){return z.recipeID===D});if(B&&(r=D,n=B,e.length===L.length))return ft.logDebugMessage("Rendering ".concat(D," because it matches factors: ").concat(e," exactly")),{value:B}}},a=0,s=xv;a<s.length;a++){var o=s[a],l=o.rid,c=o.factorsProvided,d=i(l,c);if(typeof d=="object")return d.value}if(n!==void 0)return ft.logDebugMessage("Rendering ".concat(r," to cover ").concat(e," as a fallback")),n;var f=[];e.includes(Nn.FactorIds.EMAILPASSWORD)&&f.push("emailpassword"),e.includes(Nn.FactorIds.THIRDPARTY)&&f.push("thirdparty"),[Nn.FactorIds.OTP_PHONE,Nn.FactorIds.OTP_EMAIL,Nn.FactorIds.LINK_PHONE,Nn.FactorIds.LINK_EMAIL].some(function(D){return e.includes(D)})&&f.push("passwordless"),ft.logDebugMessage("Choosing component using fallback logic w/ ".concat(f.join(", ")," enabled"));for(var p=f.length,m=function(D,L){if(p===L.length&&L.every(function(z){return f.includes(z)})){var B=t.find(function(z){return z.recipeID===D});if(B)return{value:B}}},x=0,v=xv;x<v.length;x++){var b=v[x],l=b.rid,w=b.includes,k=m(l,w);if(typeof k=="object")return k.value}for(var E=function(D,L){if(L.some(function(z){return f.includes(z)})){var B=t.find(function(z){return z.recipeID===D});if(B)return{value:B}}},N=0,P=xv;N<P.length;N++){var R=P[N],l=R.rid,w=R.includes,O=E(l,w);if(typeof O=="object")return O.value}throw new Error("No enabled recipes overlap with the requested firstFactors: "+e)}var JL=function(){function e(){var t=this;this.getPathsToFeatureComponentWithRecipeIdMap=function(){if(t.pathsToFeatureComponentWithRecipeIdMap!==void 0)return t.pathsToFeatureComponentWithRecipeIdMap;for(var r={},n=t.getFeatures(),i=Object.keys(n),a=0;a<i.length;a++){var s=i[a];r[s]===void 0&&(r[s]=[]),r[s].push(n[s])}return t.pathsToFeatureComponentWithRecipeIdMap=r,t.pathsToFeatureComponentWithRecipeIdMap},this.requiresSignUpPage=!1}return e.getMatchingComponentForRouteAndRecipeIdFromPreBuiltUIList=function(t,r,n,i){var a=t.getAsStringDangerous(),s=a===Qr.SuperTokens.getInstanceOrThrow().appInfo.websiteBasePath.getAsStringDangerous(),o=r.reduce(function(p,m){for(var x=m.getPathsToFeatureComponentWithRecipeIdMap(),v=function(P,R){(P===a||new RegExp("^"+P.replace(/:\w+/g,"[^/]+").replace(/\/\*/g,"/[^/]+")+"$").test(a))&&(p=p.concat(R.map(function(O){return{comp:O,route:P}})))},b=0,w=Object.entries(x);b<w.length;b++){var k=w[b],E=k[0],N=k[1];v(E,N)}return p},[]),l=o.find(function(p){return p.comp.matches()}),c;o.length===0?c=void 0:l!==void 0?c=l.comp:c=o[0].comp;var d=o.find(function(p){var m=xv.map(function(x){return x.rid});return!m.includes(p.comp.recipeID)||p.route!==Qr.SuperTokens.getInstanceOrThrow().appInfo.websiteBasePath.getAsStringDangerous()});if(d)return d.comp;if(n)return c;var f=RN.MultiFactorAuth.getInstance();if(Qr.SuperTokens.usesDynamicLoginMethods===!1)return l?l.comp:s&&f&&f.config.firstFactors!==void 0?QV(f.config.firstFactors,o.map(function(p){return p.comp})):c;if(i===void 0)throw new Error("Should never come here: dynamic login methods info has not been loaded but recipeRouter rendered");if(l&&(!xv.map(function(p){return p.rid}).includes(l.comp.recipeID)||xv.some(function(p){return p.rid===l.comp.recipeID&&p.factorsProvided.some(function(m){return i.firstFactors.includes(m)})})))return l.comp;if(s)return QV(i.firstFactors,o.map(function(p){return p.comp}))},e}();function bg(e){var t,r,n=Jy(),i=ft.useRethrowInRender(),a=Xr.useState(void 0),s=a[0],o=a[1],l=(t=e.getReactRouterDomWithCustomHistory())===null||t===void 0?void 0:t.useHistoryCustom(),c=e.path,d=c===Qr.SuperTokens.getInstanceOrThrow().appInfo.websiteBasePath.getAsStringDangerous(),f=Qr.SuperTokens.getInstanceOrThrow().pluginRouteHandlers,p=(r=e.getReactRouterDomWithCustomHistory())===null||r===void 0?void 0:r.useLocation(),m=rc.default.useMemo(function(){if(!d){var x=new qOe.default(c),v=f.find(function(w){return w.path===c});if(v)return{component:v.handler,recipeId:void 0};if(s!==void 0||Qr.SuperTokens.usesDynamicLoginMethods===!1){var b=JL.getMatchingComponentForRouteAndRecipeIdFromPreBuiltUIList(x,e.preBuiltUIList,!1,s);return b===void 0&&Qr.SuperTokens.usesDynamicLoginMethods===!0&&pae({navigate:l,redirectBack:!1}),b}}},[c,p,s,e.preBuiltUIList]);return Xr.useEffect(function(){s||Qr.Multitenancy.getInstanceOrThrow().getCurrentDynamicLoginMethods({userContext:n}).then(function(x){return o(x)},function(x){return i(x)})},[s,o]),d?Et.jsx(fae,{preBuiltUIList:e.preBuiltUIList,navigate:l,useSignUpStateFromQueryString:!0}):Qr.SuperTokens.usesDynamicLoginMethods&&s===void 0?Et.jsx(r4,{}):m===void 0||s===void 0&&Qr.SuperTokens.usesDynamicLoginMethods?null:Et.jsx(m.component,{navigate:l})}function u4e(e){var t=e.getReactRouterDomWithCustomHistory,r=e.recipeList,n=e.basePath,i=t();if(i===void 0)return[];for(var a=i.router.Route,s=Object.values(r.reduce(function(p,m){var x=m.getPathsToFeatureComponentWithRecipeIdMap();return Object.keys(x).forEach(function(v){v=v===""?"/":v;var b=JV(n,v);v in p||(p[v]=Et.jsx(a,ft.__assign({exact:!0,path:b},{children:Et.jsx(bg,{getReactRouterDomWithCustomHistory:t,preBuiltUIList:r,path:v})}),"st-".concat(v)))}),p},{})),o=Qr.SuperTokens.getInstanceOrThrow().pluginRouteHandlers,l=0,c=o;l<c.length;l++){var d=c[l],f=d.path;s.push(Et.jsx(a,ft.__assign({exact:!0,path:f},{children:Et.jsx(bg,{getReactRouterDomWithCustomHistory:t,preBuiltUIList:r,path:f})}),"st-plugin-".concat(f)))}if(!Qr.SuperTokens.getInstanceOrThrow().disableAuthRoute&&r.some(function(p){return p.getAuthComponents().length!==0})){var f=Qr.SuperTokens.getInstanceOrThrow().appInfo.websiteBasePath.appendPath(new rae.default("/")).getAsStringDangerous();s.push(Et.jsx(a,ft.__assign({exact:!0,path:JV(n,f)},{children:Et.jsx(bg,{getReactRouterDomWithCustomHistory:t,preBuiltUIList:r,path:f})}),"st-/auth"))}return s}function JV(e,t){var r=t;if(e!==void 0)if(r.startsWith(e))r=r.slice(e.length),r.startsWith("/")||(r="/"+r);else throw new Error("basePath has to be a prefix of websiteBasePath passed to SuperTokens.init");return r}function d4e(e){var t=e.getReactRouterDomWithCustomHistory,r=e.recipeList,n=e.basePath,i=t();if(i===void 0)return[];for(var a=i.router.Route,s=Object.values(r.reduce(function(p,m){var x=m.getPathsToFeatureComponentWithRecipeIdMap();return Object.keys(x).forEach(function(v){v=v===""?"/":v;var b=ZV(n,v);v in p||(p[v]=Et.jsx(a,{path:b,element:Et.jsx(bg,{getReactRouterDomWithCustomHistory:t,preBuiltUIList:r,path:v})},"st-".concat(v)))}),p},{})),o=Qr.SuperTokens.getInstanceOrThrow().pluginRouteHandlers,l=0,c=o;l<c.length;l++){var d=c[l],f=d.path;s.push(Et.jsx(a,{path:f,element:Et.jsx(bg,{getReactRouterDomWithCustomHistory:t,preBuiltUIList:r,path:f})},"st-plugin-".concat(f)))}if(!Qr.SuperTokens.getInstanceOrThrow().disableAuthRoute&&r.some(function(p){return p.getAuthComponents().length!==0})){var f=Qr.SuperTokens.getInstanceOrThrow().appInfo.websiteBasePath.appendPath(new rae.default("/")).getAsStringDangerous();s.push(Et.jsx(a,{path:ZV(n,f),element:Et.jsx(bg,{getReactRouterDomWithCustomHistory:t,preBuiltUIList:r,path:f})},"st-/auth"))}return s}function ZV(e,t){if(e!==void 0)if(t.startsWith(e))t=t.slice(e.length),t.startsWith("/")||(t="/"+t);else throw new Error("basePath has to be a prefix of websiteBasePath passed to SuperTokens.init");return t}var Ix=function(){function e(){}return e.getSuperTokensRoutesForReactRouterDom=function(t,r,n){if(r===void 0&&(r=[]),t===void 0||r.length===0)throw new Error('Please use getSuperTokensRoutesForReactRouterDom like getSuperTokensRoutesForReactRouterDom(require("react-router-dom"), [EmailPasswordPreBuiltUI]) in your render function');var i=r.map(function(s){return s.getInstanceOrInitAndGetInstance()});if(e.reactRouterDomIsV6===void 0&&(e.reactRouterDomIsV6=t.withRouter===void 0),e.reactRouterDomIsV6){if(e.reactRouterDom===void 0){var a=function(){var s=t.useNavigate(),o=rc.default.useState(void 0),l=o[0],c=o[1];return rc.default.useEffect(function(){l!==void 0&&(c(void 0),s(l))},[l,s,c]),c};e.reactRouterDom={router:t,useHistoryCustom:a,useLocation:t.useLocation}}return d4e({getReactRouterDomWithCustomHistory:e.getReactRouterDomWithCustomHistory,recipeList:i,basePath:n})}return e.reactRouterDom===void 0&&(e.reactRouterDom={router:t,useHistoryCustom:t.useHistory,useLocation:t.useLocation}),u4e({getReactRouterDomWithCustomHistory:e.getReactRouterDomWithCustomHistory,recipeList:i,basePath:n})},e.canHandleRoute=function(t){var r=t.map(function(a){return a.getInstanceOrInitAndGetInstance()}),n=ft.getCurrentNormalisedUrlPath().getAsStringDangerous(),i=n===Qr.SuperTokens.getInstanceOrThrow().appInfo.websiteBasePath.getAsStringDangerous();return i?!Qr.SuperTokens.getInstanceOrThrow().disableAuthRoute:JL.getMatchingComponentForRouteAndRecipeIdFromPreBuiltUIList(ft.getCurrentNormalisedUrlPath(),r,!0)!==void 0},e.getRoutingComponent=function(t){var r=t.map(function(n){return n.getInstanceOrInitAndGetInstance()});return Et.jsx(bg,{getReactRouterDomWithCustomHistory:e.getReactRouterDomWithCustomHistory,path:ft.getCurrentNormalisedUrlPath().getAsStringDangerous(),preBuiltUIList:r})},e.languageTranslations=Qr.defaultTranslationsCommon,e.getReactRouterDomWithCustomHistory=function(){return e.reactRouterDom},e.AuthPage=function(t){return Et.jsx(fae,ft.__assign({},t,{preBuiltUIList:t.preBuiltUIList.map(function(r){return r.getInstanceOrInitAndGetInstance()})}))},e.AuthPageTheme=QL,e.AuthPageFooter=XL,e.AuthPageHeader=YL,e.AuthPageComponentList=KL,e.AuthRecipeComponentsOverrideContextProvider=lae,e}(),f4e=Ix.languageTranslations,h4e=Ix.getSuperTokensRoutesForReactRouterDom,p4e=Ix.canHandleRoute,m4e=Ix.getRoutingComponent,g4e=Ix.AuthPage,x4e=function(e){var t,r=e.children,n=ft.__rest(e,["children"]),i=Xr.useRef(n.requireAuth);if(n.requireAuth!==i.current)throw new Error('requireAuth prop should not change. If you are seeing this, it probably means that you are using SessionAuth in multiple routes with different values for requireAuth. To solve this, try adding the "key" prop to all uses of SessionAuth like <SessionAuth key="someUniqueKeyPerRoute" requireAuth={...}>');var a=Xr.useState({loading:!0}),s=a[0],o=a[1],l=Xr.useCallback(function(w){o(function(k){return JSON.stringify(k)!==JSON.stringify(w)?w:k})},[o]),c=Xr.useRef(),d=Xr.useRef((t=Ix.getReactRouterDomWithCustomHistory())===null||t===void 0?void 0:t.useHistoryCustom),f;try{d.current&&(f=d.current())}catch{}var p=Jy(),m=ft.useRethrowInRender(),x=Xr.useCallback(function(){Qr.SuperTokens.getInstanceOrThrow().redirectToAuth({navigate:f,userContext:p,redirectBack:!0})},[]),v=Xr.useCallback(function(){return ft.__awaiter(void 0,void 0,void 0,function(){var w,k,E,N,P;return ft.__generator(this,function(R){switch(R.label){case 0:return c.current===void 0&&(c.current=Nn.Session.getInstanceOrThrow()),[4,c.current.doesSessionExist({userContext:p})];case 1:if(w=R.sent(),w===!1)return[2,{loading:!1,doesSessionExist:!1,accessTokenPayload:{},invalidClaims:[],userId:""}];R.label=2;case 2:return R.trys.push([2,4,,6]),[4,c.current.validateClaims({overrideGlobalClaimValidators:n.overrideGlobalClaimValidators,userContext:p})];case 3:return k=R.sent(),[3,6];case 4:return E=R.sent(),[4,c.current.doesSessionExist({userContext:p})];case 5:if(R.sent())throw E;return[2,{loading:!1,doesSessionExist:!1,accessTokenPayload:{},invalidClaims:[],userId:""}];case 6:return R.trys.push([6,9,,11]),P={loading:!1,doesSessionExist:!0,invalidClaims:k},[4,c.current.getAccessTokenPayloadSecurely({userContext:p})];case 7:return P.accessTokenPayload=R.sent(),[4,c.current.getUserId({userContext:p})];case 8:return[2,(P.userId=R.sent(),P)];case 9:return N=R.sent(),[4,c.current.doesSessionExist({userContext:p})];case 10:if(R.sent())throw N;return[2,{loading:!1,doesSessionExist:!1,accessTokenPayload:{},invalidClaims:[],userId:""}];case 11:return[2]}})})},[]),b=Xr.useCallback(function(w){return ft.__awaiter(void 0,void 0,void 0,function(){var k,E;return ft.__generator(this,function(N){switch(N.label){case 0:if(s.loading===!1)return[2];if(n.doRedirection===!1)return[3,8];if(!w.doesSessionExist&&n.requireAuth!==!1)return x(),[2];if(w.invalidClaims.length===0)return[3,8];k=void 0,N.label=1;case 1:return N.trys.push([1,6,,7]),[4,Nn.getFailureRedirectionInfo({invalidClaims:w.invalidClaims,overrideGlobalClaimValidators:n.overrideGlobalClaimValidators,userContext:p})];case 2:return k=N.sent(),k.redirectPath===void 0?[3,5]:Nn.validateAndCompareOnFailureRedirectionURLToCurrent(k.redirectPath)?(l(w),[2]):[3,3];case 3:return[4,Qr.SuperTokens.getInstanceOrThrow().redirectToUrl(k.redirectPath,f)];case 4:return[2,N.sent()];case 5:return[3,7];case 6:throw E=N.sent(),m(E),E;case 7:if(n.accessDeniedScreen!==void 0&&k.failedClaim!==void 0)return console.warn({message:"Showing access denied screen because a claim validator failed",claimValidationError:k.failedClaim}),[2,l(ft.__assign(ft.__assign({},w),{accessDeniedValidatorError:k.failedClaim}))];N.label=8;case 8:return l(w),[2]}})})},[s.loading,n.doRedirection,n.requireAuth,n.overrideGlobalClaimValidators,n.accessDeniedScreen,x,p,f]);return ft.useOnMountAPICall(v,b),Xr.useEffect(function(){function w(k){return ft.__awaiter(this,void 0,void 0,function(){var E,N,P,R;return ft.__generator(this,function(O){switch(O.label){case 0:switch(E=k.action,E){case"SESSION_CREATED":return[3,1];case"REFRESH_SESSION":return[3,1];case"ACCESS_TOKEN_PAYLOAD_UPDATED":return[3,1];case"API_INVALID_CLAIM":return[3,1];case"SIGN_OUT":return[3,11];case"UNAUTHORISED":return[3,12]}return[3,13];case 1:return[4,c.current.validateClaims({overrideGlobalClaimValidators:n.overrideGlobalClaimValidators,userContext:p})];case 2:if(N=O.sent(),n.doRedirection===!1)return[3,10];P=void 0,O.label=3;case 3:return O.trys.push([3,8,,9]),[4,Nn.getFailureRedirectionInfo({invalidClaims:N,overrideGlobalClaimValidators:n.overrideGlobalClaimValidators,userContext:p})];case 4:return P=O.sent(),P.redirectPath?Nn.validateAndCompareOnFailureRedirectionURLToCurrent(P.redirectPath)?(l(ft.__assign(ft.__assign({},k.sessionContext),{loading:!1,invalidClaims:N})),[3,7]):[3,5]:[3,7];case 5:return[4,Qr.SuperTokens.getInstanceOrThrow().redirectToUrl(P.redirectPath,f)];case 6:return[2,O.sent()];case 7:return[3,9];case 8:throw R=O.sent(),m(R),R;case 9:if(n.accessDeniedScreen!==void 0&&P.failedClaim!==void 0)return console.warn({message:"Showing access denied screen because a claim validator failed",claimValidationError:P.failedClaim}),[2,l(ft.__assign(ft.__assign({},k.sessionContext),{loading:!1,invalidClaims:N,accessDeniedValidatorError:P.failedClaim}))];O.label=10;case 10:return l(ft.__assign(ft.__assign({},k.sessionContext),{loading:!1,invalidClaims:N})),[2];case 11:return l(ft.__assign(ft.__assign({},k.sessionContext),{loading:!1,invalidClaims:[]})),[2];case 12:return l(ft.__assign(ft.__assign({},k.sessionContext),{loading:!1,invalidClaims:[]})),n.onSessionExpired!==void 0?n.onSessionExpired():n.requireAuth!==!1&&n.doRedirection!==!1&&x(),[2];case 13:return[2]}})})}if(c.current===void 0&&(c.current=Nn.Session.getInstanceOrThrow()),s.loading===!1)return c.current.addEventListener(w)},[n,l,s.loading,p,f,x]),n.requireAuth!==!1&&(s.loading||!s.doesSessionExist)?null:!s.loading&&s.accessDeniedValidatorError&&n.accessDeniedScreen?Et.jsx(n.accessDeniedScreen,{userContext:p,navigate:f,validationError:s.accessDeniedValidatorError}):Et.jsx(qL.Provider,ft.__assign({value:s},{children:r}))},ZL=function(e){return Et.jsx(GL,ft.__assign({userContext:e.userContext},{children:Et.jsx(x4e,ft.__assign({},e))}))},hae=function(e){return Et.jsx(ZL,ft.__assign({},e,{requireAuth:!1,doRedirection:!1}))},Zy=function(){function e(){}e.init=function(r){Qr.SuperTokens.init(r)},e.changeLanguage=function(r){return Qr.SuperTokens.getInstanceOrThrow().changeLanguage(r)},e.loadTranslation=function(r){return Qr.SuperTokens.getInstanceOrThrow().loadTranslation(r)},e.isRecipeInitialized=function(r){return Qr.SuperTokens.getInstanceOrThrow().recipeList.map(function(n){return n.recipeID}).includes(r)};var t;return t=e,e.SuperTokensWrapper=hae,e.redirectToAuth=function(r){return ft.__awaiter(void 0,void 0,void 0,function(){var n;return ft.__generator(t,function(i){return[2,Qr.SuperTokens.getInstanceOrThrow().redirectToAuth(ft.__assign(ft.__assign({},r),{redirectBack:(n=r==null?void 0:r.redirectBack)!==null&&n!==void 0?n:!0,userContext:ft.getNormalisedUserContext(r==null?void 0:r.userContext)}))]})})},e.useTranslation=V0.useTranslation,e.getTranslationFunction=Qr.getTranslationFunction,e.useUserContext=Jy,e}(),v4e=Zy.init,y4e=Zy.changeLanguage,b4e=Zy.loadTranslation,pae=Zy.redirectToAuth,w4e=Zy.isRecipeInitialized;mn.AuthPage=g4e;mn.AuthPageComponentList=KL;mn.AuthPageFooter=XL;mn.AuthPageHeader=YL;mn.AuthPageTheme=QL;mn.BackButton=dae;mn.ComponentOverrideContext=t4;mn.DynamicLoginMethodsSpinner=r4;mn.FeatureWrapper=e4e;mn.GeneralError=uae;mn.Provider=lae;mn.RecipeRouter=JL;mn.SessionAuthWrapper=ZL;mn.SessionContext=qL;mn.SpinnerIcon=nae;mn.SuperTokensAPIWrapper=Zy;mn.SuperTokensBranding=cae;mn.SuperTokensWrapper=hae;mn.UI=Ix;mn.UserContextContext=n4;mn.UserContextWrapper=GL;mn.canHandleRoute=p4e;mn.changeLanguage=y4e;mn.getRoutingComponent=m4e;mn.getSuperTokensRoutesForReactRouterDom=h4e;mn.init=v4e;mn.isRecipeInitialized=w4e;mn.languageTranslations=f4e;mn.loadTranslation=b4e;mn.redirectToAuth=pae;mn.useDynamicLoginMethods=ZOe;mn.useSessionContext=sae;mn.useUserContext=Jy;mn.withOverride=IE;Object.defineProperty(Wi,"__esModule",{value:!0});var Fn=Mi,e7=PL,S4e=ML,Iu=gu,LA=mn,E4e=function(e){Fn.__extends(t,e);function t(r){var n=e.call(this,r)||this,i=Fn.__assign({},n.validators),a=function(o){var l=i[o];i[o]=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return Fn.__assign(Fn.__assign({},l.apply(void 0,c)),{onFailureRedirection:r.onFailureRedirection,showAccessDeniedOnFailure:r.showAccessDeniedOnFailure})}};for(var s in i)a(s);return n.validators=i,n}return t}(e7.BooleanClaim),C4e=function(e){Fn.__extends(t,e);function t(r){var n=e.call(this,r)||this,i=Fn.__assign({},n.validators),a=function(o){var l=i[o];i[o]=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return Fn.__assign(Fn.__assign({},l.apply(void 0,c)),{onFailureRedirection:r.onFailureRedirection,showAccessDeniedOnFailure:r.showAccessDeniedOnFailure})}};for(var s in i)a(s);return n.validators=i,n}return t}(e7.PrimitiveArrayClaim),k4e=function(e){Fn.__extends(t,e);function t(r){var n=e.call(this,r)||this,i=Fn.__assign({},n.validators),a=function(o){var l=i[o];i[o]=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return Fn.__assign(Fn.__assign({},l.apply(void 0,c)),{onFailureRedirection:r.onFailureRedirection,showAccessDeniedOnFailure:r.showAccessDeniedOnFailure})}};for(var s in i)a(s);return n.validators=i,n}return t}(e7.PrimitiveClaim),_4e=function(e){var t=LA.useSessionContext();return t.loading?{loading:!0}:t.doesSessionExist===!1?{loading:!1,doesSessionExist:!1,value:void 0}:{loading:!1,doesSessionExist:!0,value:e.getValueFromPayload(t.accessTokenPayload)}},vo=function(){function e(){}return e.init=function(t){return Iu.Session.init(t)},e.getUserId=function(t){return Fn.__awaiter(this,void 0,void 0,function(){return Fn.__generator(this,function(r){return[2,Iu.Session.getInstanceOrThrow().getUserId({userContext:Fn.getNormalisedUserContext(t==null?void 0:t.userContext)})]})})},e.getAccessToken=function(t){return Fn.__awaiter(this,void 0,void 0,function(){return Fn.__generator(this,function(r){return[2,Iu.Session.getInstanceOrThrow().getAccessToken({userContext:Fn.getNormalisedUserContext(t==null?void 0:t.userContext)})]})})},e.getAccessTokenPayloadSecurely=function(t){return Fn.__awaiter(this,void 0,void 0,function(){return Fn.__generator(this,function(r){return[2,Iu.Session.getInstanceOrThrow().getAccessTokenPayloadSecurely({userContext:Fn.getNormalisedUserContext(t==null?void 0:t.userContext)})]})})},e.attemptRefreshingSession=function(){return Fn.__awaiter(this,void 0,void 0,function(){return Fn.__generator(this,function(t){return[2,Iu.Session.getInstanceOrThrow().attemptRefreshingSession()]})})},e.doesSessionExist=function(t){return Fn.__awaiter(this,void 0,void 0,function(){return Fn.__generator(this,function(r){return[2,Iu.Session.getInstanceOrThrow().doesSessionExist({userContext:Fn.getNormalisedUserContext(t==null?void 0:t.userContext)})]})})},e.addAxiosInterceptors=function(t,r){return Iu.Session.addAxiosInterceptors(t,Fn.getNormalisedUserContext(r))},e.signOut=function(t){return Fn.__awaiter(this,void 0,void 0,function(){return Fn.__generator(this,function(r){return[2,Iu.Session.getInstanceOrThrow().signOut({userContext:Fn.getNormalisedUserContext(t==null?void 0:t.userContext)})]})})},e.validateClaims=function(t){return Iu.Session.getInstanceOrThrow().validateClaims({overrideGlobalClaimValidators:t==null?void 0:t.overrideGlobalClaimValidators,userContext:Fn.getNormalisedUserContext(t==null?void 0:t.userContext)})},e.getInvalidClaimsFromResponse=function(t){return Iu.Session.getInstanceOrThrow().getInvalidClaimsFromResponse(t)},e.getClaimValue=function(t){return Iu.Session.getInstanceOrThrow().getClaimValue({claim:t.claim,userContext:Fn.getNormalisedUserContext(t==null?void 0:t.userContext)})},e.useSessionContext=LA.useSessionContext,e.useClaimValue=_4e,e.SessionAuth=LA.SessionAuthWrapper,e.ComponentsOverrideProvider=S4e.Provider,e}(),N4e=vo.useSessionContext,A4e=vo.useClaimValue,T4e=vo.SessionAuth,I4e=vo.init,O4e=vo.getUserId,P4e=vo.getAccessToken,R4e=vo.getAccessTokenPayloadSecurely,j4e=vo.attemptRefreshingSession,D4e=vo.doesSessionExist,M4e=vo.addAxiosInterceptors,F4e=vo.signOut,L4e=vo.validateClaims,B4e=vo.getInvalidClaimsFromResponse,U4e=vo.getClaimValue,$4e=vo.ComponentsOverrideProvider;Wi.SessionContext=LA.SessionContext;Wi.BooleanClaim=E4e;Wi.PrimitiveArrayClaim=C4e;Wi.PrimitiveClaim=k4e;Wi.SessionAuth=T4e;Wi.SessionComponentsOverrideProvider=$4e;Wi.addAxiosInterceptors=M4e;Wi.attemptRefreshingSession=j4e;Wi.default=vo;Wi.doesSessionExist=D4e;Wi.getAccessToken=P4e;Wi.getAccessTokenPayloadSecurely=R4e;Wi.getClaimValue=U4e;Wi.getInvalidClaimsFromResponse=B4e;Wi.getUserId=O4e;Wi.init=I4e;Wi.signOut=F4e;Wi.useClaimValue=A4e;Wi.useSessionContext=N4e;Wi.validateClaims=L4e;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(Wi)})(W0);const z4e=Bs(W0);var mae={},gc={};Object.defineProperty(gc,"__esModule",{value:!0});var dd=mn;gc.AuthPage=dd.AuthPage;gc.AuthPageComponentList=dd.AuthPageComponentList;gc.AuthPageFooter=dd.AuthPageFooter;gc.AuthPageHeader=dd.AuthPageHeader;gc.AuthPageTheme=dd.AuthPageTheme;gc.AuthRecipeComponentsOverrideContextProvider=dd.Provider;gc.canHandleRoute=dd.canHandleRoute;gc.default=dd.UI;gc.getRoutingComponent=dd.getRoutingComponent;gc.getSuperTokensRoutesForReactRouterDom=dd.getSuperTokensRoutesForReactRouterDom;gc.languageTranslations=dd.languageTranslations;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(gc)})(mae);var gae={},i4={},hf={},t7={},H4e=Cx,W4e=Qy,xae=H4e.createGenericComponentsOverrideContext(void 0,W4e.MultiFactorAuth.RECIPE_ID),V4e=xae[0],q4e=xae[1];t7.Provider=q4e;t7.useContext=V4e;Object.defineProperty(hf,"__esModule",{value:!0});var y1=Mi,G4e=t7,jm=Qy,vae=gu,Ox=function(){function e(){}return e.init=function(t){return jm.MultiFactorAuth.init(t)},e.resyncSessionAndFetchMFAInfo=function(t){return jm.MultiFactorAuth.getInstanceOrThrow().webJSRecipe.resyncSessionAndFetchMFAInfo(y1.__assign(y1.__assign({},t),{userContext:y1.getNormalisedUserContext(t==null?void 0:t.userContext)}))},e.redirectToFactor=function(t){var r,n,i;return jm.MultiFactorAuth.getInstanceOrThrow().redirectToFactor({factorId:t.factorId,forceSetup:(r=t.forceSetup)!==null&&r!==void 0?r:!1,redirectBack:(n=t.redirectBack)!==null&&n!==void 0?n:!0,stepUp:(i=t.stepUp)!==null&&i!==void 0?i:!1,navigate:t.navigate,userContext:y1.getNormalisedUserContext(t.userContext)})},e.redirectToFactorChooser=function(t){var r,n,i;return jm.MultiFactorAuth.getInstanceOrThrow().redirectToFactorChooser({nextFactorOptions:(r=t.nextFactorOptions)!==null&&r!==void 0?r:[],redirectBack:(n=t.redirectBack)!==null&&n!==void 0?n:!0,stepUp:(i=t.stepUp)!==null&&i!==void 0?i:!1,navigate:t.navigate,userContext:y1.getNormalisedUserContext(t.userContext)})},e.getSecondaryFactors=function(t){return jm.MultiFactorAuth.getInstanceOrThrow().getSecondaryFactors(y1.getNormalisedUserContext(t.userContext))},e.MultiFactorAuthClaim=jm.MultiFactorAuth.MultiFactorAuthClaim,e.FactorIds=vae.FactorIds,e.ComponentsOverrideProvider=G4e.Provider,e}(),K4e=Ox.init,X4e=Ox.resyncSessionAndFetchMFAInfo,Y4e=Ox.redirectToFactor,Q4e=Ox.redirectToFactorChooser,J4e=Ox.getSecondaryFactors,Z4e=Ox.ComponentsOverrideProvider,e3e=jm.MultiFactorAuth.MultiFactorAuthClaim;hf.FactorIds=vae.FactorIds;hf.MultiFactorAuthClaim=e3e;hf.MultiFactorAuthComponentsOverrideProvider=Z4e;hf.default=Ox;hf.getSecondaryFactors=J4e;hf.init=K4e;hf.redirectToFactor=Y4e;hf.redirectToFactorChooser=Q4e;hf.resyncSessionAndFetchMFAInfo=X4e;var a4={},s4={},yae={},pa={},OE={},o4={},m2=Ve&&Ve.__assign||function(){return m2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},m2.apply(this,arguments)};Object.defineProperty(o4,"__esModule",{value:!0});o4.normaliseUserInput=void 0;var t3e=Nx;function r3e(e){var t=m2({functions:function(r){return r}},e.override);return m2(m2({},(0,t3e.normaliseAuthRecipe)(e)),{override:t})}o4.normaliseUserInput=r3e;var PE={},BA=Ve&&Ve.__assign||function(){return BA=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},BA.apply(this,arguments)},hw=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},pw=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(PE,"__esModule",{value:!0});PE.getRecipeImplementation=void 0;var Ou=Ax,u_=_x,d_=Br;function bae(e){var t=new Ou.default(e.recipeId,e.appInfo);return{submitNewPassword:function(r){var n=r.formFields,i=r.options,a=r.userContext;return hw(this,void 0,void 0,function(){var s,o,l,c,d;return pw(this,function(f){switch(f.label){case 0:return s=this.getTenantIdFromURL({userContext:a}),o=this.getResetPasswordTokenFromURL({userContext:a}),[4,t.post({path:"/<tenantId>/user/password/reset",pathParams:{tenantId:s||"public"}},{body:{formFields:n,token:o,method:"token"}},Ou.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"SUBMIT_NEW_PASSWORD",options:i,userContext:a}),Ou.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"SUBMIT_NEW_PASSWORD",userContext:a}))];case 1:return l=f.sent(),c=l.jsonBody,d=l.fetchResponse,c.status==="FIELD_ERROR"?[2,{status:"FIELD_ERROR",formFields:c.formFields,fetchResponse:d}]:c.status==="RESET_PASSWORD_INVALID_TOKEN_ERROR"?[2,{status:c.status,fetchResponse:d}]:[2,BA(BA({},c),{fetchResponse:d})]}})})},sendPasswordResetEmail:function(r){var n=r.formFields,i=r.options,a=r.userContext;return hw(this,void 0,void 0,function(){var s,o,l,c,d,f,p;return pw(this,function(m){switch(m.label){case 0:return d=(c=t).post,f={path:"/<tenantId>/user/password/reset/token"},p={},[4,u_.default.getInstanceOrThrow().recipeImplementation.getTenantId({userContext:a})];case 1:return[4,d.apply(c,[(f.pathParams=(p.tenantId=m.sent()||"public",p),f),{body:{formFields:n}},Ou.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"SEND_RESET_PASSWORD_EMAIL",options:i,userContext:a}),Ou.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"SEND_RESET_PASSWORD_EMAIL",userContext:a})])];case 2:return s=m.sent(),o=s.jsonBody,l=s.fetchResponse,o.status==="FIELD_ERROR"?[2,{status:"FIELD_ERROR",formFields:o.formFields,fetchResponse:l}]:o.status==="PASSWORD_RESET_NOT_ALLOWED"?[2,{status:o.status,reason:o.reason,fetchResponse:l}]:[2,{status:o.status,fetchResponse:l}]}})})},signUp:function(r){var n=r.formFields,i=r.shouldTryLinkingWithSessionUser,a=r.options,s=r.userContext;return hw(this,void 0,void 0,function(){var o,l,c,d,f,p,m;return pw(this,function(x){switch(x.label){case 0:return f=(d=t).post,p={path:"/<tenantId>/signup"},m={},[4,u_.default.getInstanceOrThrow().recipeImplementation.getTenantId({userContext:s})];case 1:return[4,f.apply(d,[(p.pathParams=(m.tenantId=x.sent()||"public",m),p),{body:{formFields:n,shouldTryLinkingWithSessionUser:i}},Ou.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"EMAIL_PASSWORD_SIGN_UP",options:a,userContext:s}),Ou.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"EMAIL_PASSWORD_SIGN_UP",userContext:s})])];case 2:return o=x.sent(),l=o.jsonBody,c=o.fetchResponse,l.status==="FIELD_ERROR"?[2,{status:"FIELD_ERROR",formFields:l.formFields,fetchResponse:c}]:l.status==="SIGN_UP_NOT_ALLOWED"?[2,{status:"SIGN_UP_NOT_ALLOWED",reason:l.reason,fetchResponse:c}]:[2,{status:l.status,user:(0,d_.normaliseUser)("emailpassword",l.user),fetchResponse:c}]}})})},signIn:function(r){var n=r.formFields,i=r.shouldTryLinkingWithSessionUser,a=r.options,s=r.userContext;return hw(this,void 0,void 0,function(){var o,l,c,d,f,p,m;return pw(this,function(x){switch(x.label){case 0:return f=(d=t).post,p={path:"/<tenantId>/signin"},m={},[4,u_.default.getInstanceOrThrow().recipeImplementation.getTenantId({userContext:s})];case 1:return[4,f.apply(d,[(p.pathParams=(m.tenantId=x.sent()||"public",m),p),{body:{formFields:n,shouldTryLinkingWithSessionUser:i}},Ou.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"EMAIL_PASSWORD_SIGN_IN",options:a,userContext:s}),Ou.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"EMAIL_PASSWORD_SIGN_IN",userContext:s})])];case 2:return o=x.sent(),l=o.jsonBody,c=o.fetchResponse,l.status==="FIELD_ERROR"?[2,{status:"FIELD_ERROR",formFields:l.formFields,fetchResponse:c}]:l.status==="WRONG_CREDENTIALS_ERROR"?[2,{status:"WRONG_CREDENTIALS_ERROR",fetchResponse:c}]:l.status==="SIGN_IN_NOT_ALLOWED"?[2,{status:"SIGN_IN_NOT_ALLOWED",reason:l.reason,fetchResponse:c}]:[2,{status:"OK",user:(0,d_.normaliseUser)("emailpassword",l.user),fetchResponse:c}]}})})},doesEmailExist:function(r){var n=r.email,i=r.options,a=r.userContext;return hw(this,void 0,void 0,function(){var s,o,l,c,d,f,p;return pw(this,function(m){switch(m.label){case 0:return d=(c=t).get,f={path:"/<tenantId>/emailpassword/email/exists"},p={},[4,u_.default.getInstanceOrThrow().recipeImplementation.getTenantId({userContext:a})];case 1:return[4,d.apply(c,[(f.pathParams=(p.tenantId=m.sent()||"public",p),f.queryParams={email:n},f),{},Ou.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"EMAIL_EXISTS",options:i,userContext:a}),Ou.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"EMAIL_EXISTS",userContext:a})])];case 2:return s=m.sent(),o=s.jsonBody,l=s.fetchResponse,[2,{status:o.status,doesExist:o.exists,fetchResponse:l}]}})})},getResetPasswordTokenFromURL:function(){var r=(0,d_.getQueryParams)("token");return r===void 0?"":r},getTenantIdFromURL:function(){return(0,d_.getQueryParams)("tenantId")}}}PE.default=bae;PE.getRecipeImplementation=bae;var n3e=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),UA=Ve&&Ve.__assign||function(){return UA=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},UA.apply(this,arguments)};Object.defineProperty(OE,"__esModule",{value:!0});OE.Recipe=void 0;var i3e=o4,a3e=PE,s3e=ff,Sj=Br,o3e=Xy,wae=function(e){n3e(t,e);function t(r){var n=e.call(this,(0,i3e.normaliseUserInput)(r))||this,i=new s3e.default((0,a3e.default)({recipeId:n.config.recipeId,appInfo:n.config.appInfo,clientType:n.config.clientType,preAPIHook:n.config.preAPIHook,postAPIHook:n.config.postAPIHook}));return n.recipeImplementation=i.override(n.config.override.functions).build(),n}return t.init=function(r){return function(n,i,a,s){return t.instance=new t(UA(UA({},(0,Sj.applyPlugins)(t.RECIPE_ID,r,s??[])),{recipeId:t.RECIPE_ID,clientType:i,appInfo:n})),t.instance}},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of EmailPassword found. Ensure that the 'EmailPassword.init' method is called within the 'SuperTokens.init' recipeList.";throw r=(0,Sj.checkForSSRErrorAndAppendIfNeeded)(r),Error(r)}return t.instance},t.reset=function(){(0,Sj.isTest)()&&(t.instance=void 0)},t.RECIPE_ID="emailpassword",t}(o3e.default);OE.Recipe=wae;OE.default=wae;var Qs=Ve&&Ve.__assign||function(){return Qs=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Qs.apply(this,arguments)};Object.defineProperty(pa,"__esModule",{value:!0});pa.signOut=pa.getTenantIdFromURL=pa.getResetPasswordTokenFromURL=pa.doesEmailExist=pa.signIn=pa.signUp=pa.sendPasswordResetEmail=pa.submitNewPassword=pa.init=void 0;var Uf=OE,wp=Br,pf=function(){function e(){}return e.init=function(t){return Uf.default.init(t)},e.signOut=function(t){return Uf.default.getInstanceOrThrow().signOut({userContext:(0,wp.getNormalisedUserContext)(t==null?void 0:t.userContext)})},e.submitNewPassword=function(t){return Uf.default.getInstanceOrThrow().recipeImplementation.submitNewPassword(Qs(Qs({},t),{userContext:(0,wp.getNormalisedUserContext)(t.userContext)}))},e.sendPasswordResetEmail=function(t){return Uf.default.getInstanceOrThrow().recipeImplementation.sendPasswordResetEmail(Qs(Qs({},t),{userContext:(0,wp.getNormalisedUserContext)(t.userContext)}))},e.signUp=function(t){return Uf.default.getInstanceOrThrow().recipeImplementation.signUp(Qs(Qs({},t),{shouldTryLinkingWithSessionUser:t==null?void 0:t.shouldTryLinkingWithSessionUser,userContext:(0,wp.getNormalisedUserContext)(t.userContext)}))},e.signIn=function(t){return Uf.default.getInstanceOrThrow().recipeImplementation.signIn(Qs(Qs({},t),{shouldTryLinkingWithSessionUser:t==null?void 0:t.shouldTryLinkingWithSessionUser,userContext:(0,wp.getNormalisedUserContext)(t.userContext)}))},e.doesEmailExist=function(t){return Uf.default.getInstanceOrThrow().recipeImplementation.doesEmailExist(Qs(Qs({},t),{userContext:(0,wp.getNormalisedUserContext)(t.userContext)}))},e.getResetPasswordTokenFromURL=function(t){return Uf.default.getInstanceOrThrow().recipeImplementation.getResetPasswordTokenFromURL(Qs(Qs({},t),{userContext:(0,wp.getNormalisedUserContext)(t==null?void 0:t.userContext)}))},e.getTenantIdFromURL=function(t){return Uf.default.getInstanceOrThrow().recipeImplementation.getTenantIdFromURL(Qs(Qs({},t),{userContext:(0,wp.getNormalisedUserContext)(t==null?void 0:t.userContext)}))},e}();pa.default=pf;var l3e=pf.init;pa.init=l3e;var c3e=pf.submitNewPassword;pa.submitNewPassword=c3e;var u3e=pf.sendPasswordResetEmail;pa.sendPasswordResetEmail=u3e;var d3e=pf.signUp;pa.signUp=d3e;var f3e=pf.signIn;pa.signIn=f3e;var h3e=pf.doesEmailExist;pa.doesEmailExist=h3e;var p3e=pf.signOut;pa.signOut=p3e;var m3e=pf.getResetPasswordTokenFromURL;pa.getResetPasswordTokenFromURL=m3e;var g3e=pf.getTenantIdFromURL;pa.getTenantIdFromURL=g3e;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(pa)})(yae);var Sae={},$f=Mi,x3e=Yy,eq=gu,v3e=function(e){$f.__extends(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.getAuthRecipeDefaultRedirectionURL=function(n){return $f.__awaiter(r,void 0,void 0,function(){return $f.__generator(this,function(i){throw new Error("Should never come here")})})},r.signOut=function(n){return $f.__awaiter(r,void 0,void 0,function(){return $f.__generator(this,function(i){switch(i.label){case 0:return[4,eq.Session.getInstanceOrThrow().signOut({userContext:$f.getNormalisedUserContext(n==null?void 0:n.userContext)})];case 1:return[2,i.sent()]}})})},r.doesSessionExist=function(n){return $f.__awaiter(r,void 0,void 0,function(){return $f.__generator(this,function(i){switch(i.label){case 0:return[4,eq.Session.getInstanceOrThrow().doesSessionExist({userContext:$f.getNormalisedUserContext(n==null?void 0:n.userContext)})];case 1:return[2,i.sent()]}})})},r}return t}(x3e.RecipeModule);Sae.AuthRecipe=v3e;var RE={},y3e=["email","password"],b3e="/reset-password";RE.DEFAULT_RESET_PASSWORD_PATH=b3e;RE.MANDATORY_FORM_FIELDS_ID_ARRAY=y3e;var jE={},T0=Mi;function w3e(e){return T0.__awaiter(this,void 0,void 0,function(){var t;return T0.__generator(this,function(r){return typeof e!="string"?[2,"ERROR_EMAIL_NON_STRING"]:(e=e.trim(),t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,e.match(t)===null?[2,"ERROR_EMAIL_INVALID"]:[2,void 0])})})}function S3e(e){return T0.__awaiter(this,void 0,void 0,function(){return T0.__generator(this,function(t){return typeof e!="string"?[2,"ERROR_PASSWORD_NON_STRING"]:e.length<8?[2,"ERROR_PASSWORD_TOO_SHORT"]:e.length>=100?[2,"ERROR_PASSWORD_TOO_LONG"]:e.match(/^.*[A-Za-z]+.*$/)===null?[2,"ERROR_PASSWORD_NO_ALPHA"]:e.match(/^.*[0-9]+.*$/)===null?[2,"ERROR_PASSWORD_NO_NUM"]:[2,void 0]})})}function E3e(e){return T0.__awaiter(this,void 0,void 0,function(){return T0.__generator(this,function(t){return typeof e!="string"?[2,"ERROR_PASSWORD_NON_STRING"]:[2,void 0]})})}function C3e(e){return T0.__awaiter(this,void 0,void 0,function(){return T0.__generator(this,function(t){return[2,void 0]})})}jE.defaultEmailValidator=w3e;jE.defaultLoginPasswordValidator=E3e;jE.defaultPasswordValidator=S3e;jE.defaultValidate=C3e;var Vr=Mi,k3e=yae,_3e=Sae,Uw=gu,r7=RE,N3e=e4,l4=jE;function A3e(e){return e&&e.__esModule?e:{default:e}}var tq=A3e(k3e),T3e=function(e){return function(t){return Vr.__assign(Vr.__assign({},t),{submitNewPassword:function(r){return Vr.__awaiter(this,void 0,void 0,function(){var n;return Vr.__generator(this,function(i){switch(i.label){case 0:return[4,t.submitNewPassword(Vr.__assign(Vr.__assign({},r),{formFields:[r.formFields[0]]}))];case 1:return n=i.sent(),n.status==="OK"&&e({action:"PASSWORD_RESET_SUCCESSFUL",userContext:r.userContext}),[2,n]}})})},sendPasswordResetEmail:function(r){return Vr.__awaiter(this,void 0,void 0,function(){var n;return Vr.__generator(this,function(i){switch(i.label){case 0:return[4,t.sendPasswordResetEmail(r)];case 1:return n=i.sent(),n.status==="OK"&&e({action:"RESET_PASSWORD_EMAIL_SENT",email:r.formFields.find(function(a){var s=a.id;return s==="email"}).value,userContext:r.userContext}),[2,n]}})})},signUp:function(r){return Vr.__awaiter(this,void 0,void 0,function(){var n,i,a;return Vr.__generator(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,Uw.Session.getInstanceOrThrow().getAccessTokenPayloadSecurely({userContext:r.userContext})];case 1:return n=s.sent(),[3,3];case 2:return s.sent(),n=void 0,[3,3];case 3:return[4,t.signUp(r)];case 4:if(i=s.sent(),i.status!=="OK")return[3,9];a=void 0,s.label=5;case 5:return s.trys.push([5,7,,8]),[4,Uw.Session.getInstanceOrThrow().getAccessTokenPayloadSecurely({userContext:r.userContext})];case 6:return a=s.sent(),[3,8];case 7:return s.sent(),a=void 0,[3,8];case 8:e({action:"SUCCESS",isNewRecipeUser:!0,createdNewSession:a!==void 0&&(n===void 0||n.sessionHandle!==a.sessionHandle),user:i.user,userContext:r.userContext}),s.label=9;case 9:return[2,i]}})})},signIn:function(r){return Vr.__awaiter(this,void 0,void 0,function(){var n,i,a;return Vr.__generator(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,Uw.Session.getInstanceOrThrow().getAccessTokenPayloadSecurely({userContext:r.userContext})];case 1:return n=s.sent(),[3,3];case 2:return s.sent(),n=void 0,[3,3];case 3:return[4,t.signIn(r)];case 4:if(i=s.sent(),i.status!=="OK")return[3,9];a=void 0,s.label=5;case 5:return s.trys.push([5,7,,8]),[4,Uw.Session.getInstanceOrThrow().getAccessTokenPayloadSecurely({userContext:r.userContext})];case 6:return a=s.sent(),[3,8];case 7:return s.sent(),a=void 0,[3,8];case 8:e({action:"SUCCESS",isNewRecipeUser:!1,createdNewSession:a!==void 0&&(n===void 0||n.sessionHandle!==a.sessionHandle),user:i.user,userContext:r.userContext}),s.label=9;case 9:return[2,i]}})})}})}};function I3e(e){e===void 0&&(e={});var t=O3e(e.signInAndUpFeature),r=t.signUpForm.formFields.find(function(s){return s.id==="password"}),n=t.signUpForm.formFields.find(function(s){return s.id==="email"}),i=M3e(r.validate,n,e.resetPasswordUsingTokenFeature),a=Vr.__assign({functions:function(s){return s}},e.override);return Vr.__assign(Vr.__assign({},N3e.normaliseAuthRecipe(e)),{signInAndUpFeature:t,resetPasswordUsingTokenFeature:i,override:a})}function O3e(e){e===void 0&&(e={});var t=P3e(e.signUpForm),r=t.formFields.reduce(function(i,a){return a.id==="email"?Vr.__spreadArray(Vr.__spreadArray([],i,!0),[a],!1):a.id==="password"?Vr.__spreadArray(Vr.__spreadArray([],i,!0),[Vr.__assign(Vr.__assign({},a),{autoComplete:"current-password",validate:l4.defaultLoginPasswordValidator})],!1):i},[]),n=R3e(r,e.signInForm);return{signUpForm:t,signInForm:n}}function P3e(e){e===void 0&&(e={});var t=j3e(),r=[];e.formFields!==void 0&&(r=e.formFields);var n=Cae(t,r),i=e.style!==void 0?e.style:"";return{style:i,formFields:n}}function R3e(e,t){t===void 0&&(t={});var r=[];t.formFields!==void 0&&(r=t.formFields.filter(function(a){return r7.MANDATORY_FORM_FIELDS_ID_ARRAY.includes(a.id)}).map(function(a){return Vr.__assign(Vr.__assign({},a),{optional:!1})}));var n=Cae(e,r),i=t.style!==void 0?t.style:"";return{style:i,formFields:n}}function j3e(){return[Eae(),D3e()]}function Eae(){return{id:"email",label:"EMAIL_PASSWORD_EMAIL_LABEL",placeholder:"EMAIL_PASSWORD_EMAIL_PLACEHOLDER",validate:l4.defaultEmailValidator,optional:!1,autoComplete:"email"}}function D3e(){return{id:"password",label:"EMAIL_PASSWORD_PASSWORD_LABEL",placeholder:"EMAIL_PASSWORD_PASSWORD_PLACEHOLDER",validate:l4.defaultPasswordValidator,optional:!1,autoComplete:"new-password"}}function M3e(e,t,r){r===void 0&&(r={});var n=r.disableDefaultUI===!0,i=r.submitNewPasswordForm!==void 0&&r.submitNewPasswordForm.style!==void 0?r.submitNewPasswordForm.style:"",a={style:i,formFields:[{id:"password",label:"EMAIL_PASSWORD_NEW_PASSWORD_LABEL",placeholder:"EMAIL_PASSWORD_NEW_PASSWORD_PLACEHOLDER",validate:e,optional:!1,autoComplete:"new-password"},{id:"confirm-password",label:"EMAIL_PASSWORD_CONFIRM_PASSWORD_LABEL",placeholder:"EMAIL_PASSWORD_CONFIRM_PASSWORD_PLACEHOLDER",validate:e,optional:!1,autoComplete:"new-password"}]},s=r.enterEmailForm!==void 0&&r.enterEmailForm.style!==void 0?r.enterEmailForm.style:"",o={style:s,formFields:[Vr.__assign(Vr.__assign({},Eae()),{validate:t.validate,placeholder:"",autofocus:!0})]};return{disableDefaultUI:n,submitNewPasswordForm:a,enterEmailForm:o}}function Cae(e,t){for(var r=e,n=0;n<t.length;n++){for(var i=t[n],a=!0,s=0;s<r.length;s++){var o=r[s];if(i.id===o.id){var l=o.optional;i.optional!==void 0&&(l=i.optional),r7.MANDATORY_FORM_FIELDS_ID_ARRAY.includes(i.id)&&(l=!1),r[s]=Vr.__assign(Vr.__assign(Vr.__assign({},r[s]),i),{optional:l}),a=!1;break}}a&&r.push(Vr.__assign({optional:!1,placeholder:i.label,validate:l4.defaultValidate},i))}return r.map(function(c){return F3e(c)})}function F3e(e){var t=this;if(e.optional===!1&&e.nonOptionalErrorMsg==="")throw new Error("nonOptionalErrorMsg for field ".concat(e.id," cannot be an empty string"));return Vr.__assign(Vr.__assign({},e),{validate:function(r){return Vr.__awaiter(t,void 0,void 0,function(){return Vr.__generator(this,function(n){switch(n.label){case 0:return r===""&&e.optional===!1?e.nonOptionalErrorMsg!==void 0?[2,e.nonOptionalErrorMsg]:[2,"ERROR_NON_OPTIONAL"]:[4,e.validate(r)];case 1:return[2,n.sent()]}})})}})}var L3e=function(e){Vr.__extends(t,e);function t(r,n){n===void 0&&(n=tq.default);var i=e.call(this,r)||this;return i.webJSRecipe=n,i.recipeID=t.RECIPE_ID,i.firstFactorIds=[Uw.FactorIds.EMAILPASSWORD],i.getDefaultRedirectionURL=function(a){return Vr.__awaiter(i,void 0,void 0,function(){return Vr.__generator(this,function(s){return a.action==="RESET_PASSWORD"?[2,Vr.getDefaultRedirectionURLForPath(this.config,r7.DEFAULT_RESET_PASSWORD_PATH,a)]:[2,this.getAuthRecipeDefaultRedirectionURL(a)]})})},i}return t.prototype.getFirstFactorsForAuthPage=function(){return this.firstFactorIds},t.init=function(r){var n=I3e(r);return{recipeID:t.RECIPE_ID,authReact:function(i){return t.instance=new t(Vr.__assign(Vr.__assign({},n),{appInfo:i,recipeId:t.RECIPE_ID})),t.instance},webJS:tq.default.init(Vr.__assign(Vr.__assign({},n),{override:{functions:function(i,a){var s=T3e(n.onHandleEvent);return a.override(s),a.override(n.override.functions),i}}}))}},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of EmailPassword found. Make sure to call the EmailPassword.init method.See https://supertokens.io/docs/emailpassword/quick-setup/frontend";throw typeof window>"u"&&(r=r+Vr.SSR_ERROR),Error(r)}return t.instance},t.reset=function(){Vr.isTest()&&(t.instance=void 0)},t.RECIPE_ID="emailpassword",t}(_3e.AuthRecipe);s4.EmailPassword=L3e;var B3e=Cx,U3e=s4,kae=B3e.createGenericComponentsOverrideContext(void 0,U3e.EmailPassword.RECIPE_ID),$3e=kae[0],z3e=kae[1];a4.Provider=z3e;a4.useContext=$3e;var n7={},rq=u,H3e=I,nq=Mi,W3e=ja,V3e=`/* Copyright (c) 2021, VRAI Labs and/or its affiliates. All rights reserved.
 *
 * This software is licensed under the Apache License, Version 2.0 (the
 * "License") as published by the Apache Software Foundation.
 *
 * You may not use this file except in compliance with the License. You may
 * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations
 * under the License.
 */

[data-supertokens~="container"] {
    --palette-background: 255, 255, 255;
    --palette-inputBackground: 250, 250, 250;
    --palette-inputBorder: 224, 224, 224;
    --palette-primary: 28, 34, 42;
    --palette-primaryBorder: 45, 54, 68;
    --palette-success: 65, 167, 0;
    --palette-successBackground: 217, 255, 191;
    --palette-error: 255, 23, 23;
    --palette-errorBackground: 255, 241, 235;
    --palette-textTitle: 0, 0, 0;
    --palette-textLabel: 0, 0, 0;
    --palette-textInput: 0, 0, 0;
    --palette-textPrimary: 128, 128, 128;
    --palette-textLink: 0, 122, 255;
    --palette-buttonText: 255, 255, 255;
    --palette-textGray: 54, 54, 54;
    --palette-superTokensBrandingBackground: 242, 245, 246;
    --palette-superTokensBrandingText: 173, 189, 196;
    --palette-buttonGreyedOut: 221, 221, 221;
    --palette-caution: 124, 96, 62;
    --palette-errorDark: 207, 54, 68;

    --font-size-0: 12px;
    --font-size-1: 14px;
    --font-size-2: 16px;
    --font-size-3: 19px;
    --font-size-4: 24px;
    --font-size-5: 28px;
}

/*
 * Default styles.
 */

@keyframes slideTop {
    0% {
        transform: translateY(-5px);
    }
    100% {
        transform: translateY(0px);
    }
}

@keyframes swing-in-top-fwd {
    0% {
        transform: rotateX(-100deg);
        transform-origin: top;
        opacity: 0;
    }
    100% {
        transform: rotateX(0deg);
        transform-origin: top;
        opacity: 1;
    }
}

[data-supertokens~="container"] {
    font-family: "Arial", sans-serif;
    margin: 12px auto;
    margin-top: 26px;
    margin-bottom: 26px;
    width: 420px;
    text-align: center;
    border-radius: 8px;
    box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.16);
    background-color: rgb(var(--palette-background));
}

@media (max-width: 440px) {
    [data-supertokens~="container"] {
        width: 95vw;
    }
}

[data-supertokens~="row"] {
    margin: 0 auto;
    width: 76%;
    padding-top: 30px;
    padding-bottom: 10px;
}

[data-supertokens~="superTokensBranding"] {
    display: block;
    margin: 10px auto 0;
    background: rgb(var(--palette-superTokensBrandingBackground));
    color: rgb(var(--palette-superTokensBrandingText));
    text-decoration: none;
    width: -webkit-fit-content;
    width: -moz-fit-content;
    width: fit-content;
    border-radius: 6px 6px 0 0;
    padding: 4px 9px;
    font-weight: 400;
    font-size: var(--font-size-0);
    letter-spacing: 0.4px;
}

[data-supertokens~="generalError"] {
    background: rgb(var(--palette-errorBackground));
    padding-top: 10px;
    padding-bottom: 10px;
    margin-bottom: 10px;
    margin-top: 24px;
    padding-left: 18px;
    padding-right: 18px;
    letter-spacing: 0.2px;
    font-size: var(--font-size-1);
    border-radius: 8px;
    color: rgb(var(--palette-error));
    animation: swing-in-top-fwd 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
    word-wrap: break-word;
}

[data-supertokens~="headerTitle"] {
    font-size: var(--font-size-4);
    line-height: 27.6px;
    letter-spacing: 0.58px;
    font-weight: 700;
    margin-bottom: 20px;
    color: rgb(var(--palette-textTitle));
}

[data-supertokens~="headerSubtitle"] {
    font-weight: 400;
    color: rgb(var(--palette-textGray));
    margin-bottom: 21px;
}

[data-supertokens~="headerSubtitle"][data-supertokens~="secondaryText"] {
    color: rgb(var(--palette-textGray));
    font-weight: 400;
}

[data-supertokens~="privacyPolicyAndTermsAndConditions"] {
    max-width: 300px;
    margin-top: 10px;
}

[data-supertokens~="privacyPolicyAndTermsAndConditions"] a {
    line-height: 21px;
}

/* TODO: split the link style into separate things*/

/* We add this before primary and secondary text, because if they are applied to the same element the other ones take priority */

[data-supertokens~="link"] {
    padding-left: 3px;
    padding-right: 3px;
    color: rgb(var(--palette-textLink));
    font-size: var(--font-size-1);
    cursor: pointer;
    letter-spacing: 0.16px;
    line-height: 26px;
}

[data-supertokens~="primaryText"] {
    font-size: var(--font-size-2);
    font-weight: 400;
    letter-spacing: 0.4px;
    line-height: 21px;
    color: rgb(var(--palette-textLabel));
}

[data-supertokens~="secondaryText"] {
    font-size: var(--font-size-1);
    font-weight: 400;
    letter-spacing: 0.4px;
    color: rgb(var(--palette-textPrimary));
}

[data-supertokens~="secondaryText"] strong {
    font-weight: 600;
}

[data-supertokens~="divider"] {
    margin-top: 1.5em;
    margin-bottom: 1.5em;
    border-bottom: 0.3px solid #dddddd;
    align-items: center;
    padding-bottom: 5px;
    flex: 3 3;
}

[data-supertokens~="headerTinyTitle"] {
    margin-top: 24px;
    font-size: var(--font-size-5);
    letter-spacing: 1.1px;
    font-weight: 700;
    line-height: 28px;
}

[data-supertokens~="secondaryLinkWithArrow"] {
    margin-top: 10px;
    margin-bottom: 30px;
    cursor: pointer;
}

[data-supertokens~="secondaryLinkWithArrow"]:hover {
    position: relative;
    left: 2px;
    word-spacing: 4px;
}

[data-supertokens~="generalSuccess"] {
    color: rgb(var(--palette-success));
    font-size: var(--font-size-1);
    background: rgb(var(--palette-successBackground));
    animation: swing-in-top-fwd 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
    padding: 9px 15px 9px 15px;
    border-radius: 6px;
    display: inline-block;
}

[data-supertokens~="spinner"] {
    width: 80px;
    height: auto;
    padding-top: 20px;
    padding-bottom: 40px;
    margin: 0 auto;
}

[data-supertokens~="error"] {
    color: rgb(var(--palette-error));
}

[data-supertokens~="linkButton"] {
    font-family: "Arial", sans-serif;
    background-color: transparent;
    border: 0;
}

[data-supertokens~="secondaryLinkWithLeftArrow"] {
    color: rgb(var(--palette-textGray));
    font-weight: 400;
    margin-top: 10px;
    margin-bottom: 40px;
    cursor: pointer;
}

[data-supertokens~="secondaryLinkWithLeftArrow"] svg {
    margin-right: 0.3em;
}

[data-supertokens~="secondaryLinkWithLeftArrow"]:hover svg {
    position: relative;
    left: -4px;
}

[data-supertokens~="button"] {
    font-family: "Arial", sans-serif;
    background-color: rgb(var(--palette-primary));
    color: rgb(var(--palette-buttonText));
    width: 100%;
    height: 34px;
    font-weight: 600;
    border-width: 1px;
    border-style: solid;
    border-radius: 6px;
    border-color: rgb(var(--palette-primaryBorder));
    background-position: center;
    transition: all 0.4s;
    background-size: 12000%;
    cursor: pointer;
}

[data-supertokens~="buttonGreyedOut"] {
    background-color: rgb(var(--palette-buttonGreyedOut));
    border-color: rgb(var(--palette-buttonGreyedOut));
}

[data-supertokens~="buttonWithIcon"] {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

[data-supertokens~="button"]:disabled {
    border: none;
    cursor: no-drop;
}

[data-supertokens~="button"]:active {
    outline: none;
    transition: all 0s;
    background-size: 100%;
    filter: brightness(0.85);
}

[data-supertokens~="button"]:focus {
    outline: none;
}

[data-supertokens~="backButtonCommon"] {
    width: 16px;
    height: 13px;
}

[data-supertokens~="backButton"] {
    cursor: pointer;
    border: none;
    background-color: transparent;
    padding: 0px;
}

[data-supertokens~="backButtonPlaceholder"] {
    display: block;
}

[data-supertokens~="delayedRender"] {
    animation-duration: 0.1s;
    animation-name: animate-fade;
    animation-delay: 0.2s;
    animation-fill-mode: backwards;
}

@keyframes animate-fade {
    0% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}

[data-supertokens~="footerLinkGroupVert"] {
    display: flex;
    flex-direction: column;
    margin-top: 10px;
    gap: 24px;
}

[data-supertokens~="footerLinkGroupVert"] > div {
    cursor: pointer;
    margin: 0;
}

[data-supertokens~="footerLinkGroupVert"] [data-supertokens~="secondaryText"] {
    font-weight: 400;
}

[data-supertokens~="footerLinkGroupVert"] [data-supertokens~="secondaryLinkWithLeftArrow"] {
    font-weight: 400;
    position: relative;
    left: -6px; /* half the width of the left arrow */
}

@media (max-width: 360px) {
    [data-supertokens~="footerLinkGroupVert"] {
        flex-direction: column;
    }
    [data-supertokens~="footerLinkGroupVert"] > div {
        margin: 0 auto;
    }
}

[data-supertokens~="footerLinkGroupVert"] div:only-child {
    margin-left: auto;
    margin-right: auto;
    margin-top: 14px;
}

[data-supertokens~="withBackButton"] {
    position: relative;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

[data-supertokens~="dividerWithOr"] {
    padding-top: 5px;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    color: rgb(var(--palette-textPrimary));
}

[data-supertokens~="dividerText"] {
    flex: 1 1;
    font-weight: 400;
    font-size: var(--font-size-1);
}

[data-supertokens~="formLabelWithLinkWrapper"] {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

[data-supertokens~="formLabelLinkBtn"] {
    width: auto;
    margin-top: 0;
    line-height: 24px;
    font-size: var(--font-size-0);
}

[data-supertokens~="formLabelLinkBtn"]:hover {
    text-decoration: underline;
}

[data-supertokens~="formLabelLinkBtn"]:disabled {
    color: rgb(var(--palette-textPrimary));
    cursor: default;
    text-decoration: none;
}

[data-supertokens~="authComponentList"] {
    padding-bottom: 20px;
}

[data-supertokens~="authPageTitleOAuthClient"] {
    color: rgb(var(--palette-textGray));
    font-size: var(--font-size-1);
    font-weight: 400;
    margin: 10px 0 25px;
}

[data-supertokens~="authPageTitleOAuthClientUrl"] {
    text-decoration: none;
}

[data-supertokens~="authPageTitleOAuthClientLogo"] {
    width: 44px;
    height: 44px;
    margin-bottom: 10px;
}

[data-supertokens~="authPageTitleOAuthClient"] [data-supertokens~="authPageTitleOAuthClientName"] {
    color: rgb(var(--palette-textTitle));
}

[data-supertokens~="buttonWithArrow"] {
    border-radius: 6px;
    border: 1px solid #d0d5dd;
    width: 100%;
    color: rgb(var(--palette-textGray));
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 5px;
    margin: 24px 0;
    min-height: 48px;
    cursor: pointer;
}

[data-supertokens~="buttonWithArrow"]:hover {
    background-color: rgb(var(--palette-inputBackground));
}

[data-supertokens~="buttonWithArrow"] [data-supertokens~="secondaryText"] {
    font-weight: 700;
    font-size: var(--font-size-2);
    color: rgb(var(--palette-textGray));
    margin: 0;
}

[data-supertokens~="buttonWithArrow"]:hover [data-supertokens~="secondaryLinkWithRightArrow"] ~ svg {
    position: relative;
    left: 2px;
}

[data-supertokens~="buttonWithArrow"]:hover [data-supertokens~="secondaryLinkWithLeftArrow"] svg {
    position: relative;
    left: -2px;
}

[data-supertokens~="buttonWithArrow"] [data-supertokens~="secondaryLinkWithLeftArrow"] {
    display: flex;
    align-items: center;
}

[data-supertokens~="inputContainer"] {
    margin-top: 6px;
}

[data-supertokens~="inputWrapper"] {
    box-sizing: border-box;
    width: 100%;
    display: flex;
    align-items: center;
    background-color: rgb(var(--palette-inputBackground));
    height: 34px;
    border-radius: 6px;
    border: 1px solid rgb(var(--palette-inputBorder));
}

[data-supertokens~="inputWrapper"][focus-within] {
    background-color: rgba(var(--palette-inputBackground), 0.25);
    border: 1px solid rgb(var(--palette-primary));
    box-shadow: 0 0 0 0.2rem rgba(var(--palette-primary), 0.25);
    outline: none;
}

[data-supertokens~="inputWrapper"]:focus-within {
    background-color: rgba(var(--palette-inputBackground), 0.25);
    border: 1px solid rgb(var(--palette-primary));
    box-shadow: 0 0 0 0.2rem rgba(var(--palette-primary), 0.25);
    outline: none;
}

[data-supertokens~="inputError"] {
    border: 1px solid rgb(var(--palette-error));
    box-shadow: 0 0 0 0.2rem rgba(var(--palette-error), 0.25);
    outline: none;
}

[data-supertokens~="inputError"][focus-within] {
    border: 1px solid rgb(var(--palette-error));
    box-shadow: 0 0 0 0.2rem rgba(var(--palette-error), 0.25);
    outline: none;
}

[data-supertokens~="inputError"]:focus-within {
    border: 1px solid rgb(var(--palette-error));
    box-shadow: 0 0 0 0.2rem rgba(var(--palette-error), 0.25);
    outline: none;
}

[data-supertokens~="input"] {
    box-sizing: border-box;
    padding-left: 15px;
    filter: none;
    color: rgb(var(--palette-textInput));
    background-color: transparent;
    border-radius: 6px;
    font-size: var(--font-size-1);
    border: none;
    padding-right: 25px;
    letter-spacing: 1.2px;
    flex: 9 1 75%;
    width: 75%;
    height: 32px;
}

[data-supertokens~="input"]:focus {
    border: none;
    outline: none;
}

[data-supertokens~="input"]:-webkit-autofill,
[data-supertokens~="input"]:-webkit-autofill:hover,
[data-supertokens~="input"]:-webkit-autofill:focus,
[data-supertokens~="input"]:-webkit-autofill:active {
    -webkit-text-fill-color: rgb(var(--palette-textInput));
    box-shadow: 0 0 0 30px rgb(var(--palette-inputBackground)) inset;
}

[data-supertokens~="inputAdornment"] {
    justify-content: center;
    margin-right: 5px;
}

[data-supertokens~="showPassword"] {
    cursor: pointer;
}

[data-supertokens~="enterEmailSuccessMessage"] {
    margin-top: 15px;
    margin-bottom: 15px;
    word-break: break-word;
}

[data-supertokens~="submitNewPasswordSuccessMessage"] {
    margin-top: 15px;
    margin-bottom: 15px;
}

[data-supertokens~="inputErrorMessage"] {
    padding-top: 5px;
    padding-bottom: 5px;
    color: rgb(var(--palette-error));
    line-height: 24px;
    font-weight: 400;
    font-size: var(--font-size-1);
    text-align: left;
    animation: slideTop 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
    max-width: 330px;
}

@media (max-width: 440px) {
    [data-supertokens~="inputErrorMessage"] {
        max-width: 250px;
    }
}

[data-supertokens~="inputErrorSymbol"] {
    margin-right: 5px;
    top: 1px;
    position: relative;
    left: 2px;
}

[data-supertokens~="label"] {
    text-align: left;
    font-weight: 700;
    font-size: var(--font-size-0);
    line-height: 24px;
    color: rgb(var(--palette-textLabel));
}

[data-supertokens~="formRow"] {
    display: flex;
    flex-direction: column;
    padding-top: 0px;
    padding-bottom: 20px;
}

[data-supertokens~="formRow"][data-supertokens~="hasError"] {
    padding-bottom: 0;
}

[data-supertokens~="formRow"]:last-child {
    padding-bottom: 0;
}

[data-supertokens~="sendVerifyEmailIcon"] {
    margin-top: 11px;
}

[data-supertokens~="primaryText"][data-supertokens~="sendVerifyEmailText"] {
    text-align: center;
    letter-spacing: 0.8px;
    color: rgb(var(--palette-textPrimary));
}

[data-supertokens~="secondaryLinkWithArrow"] {
    margin-top: 10px;
    margin-bottom: 30px;
    cursor: pointer;
    font-weight: 700;
}

[data-supertokens~="sendVerifyEmailResend"] {
    margin-top: 13px;
    font-weight: 400;
}

[data-supertokens~="sendVerifyEmailResend"]:hover {
    text-decoration: underline;
}

[data-supertokens~="noFormRow"] {
    padding-bottom: 25px;
}

[data-supertokens~="emailVerificationButtonWrapper"] {
    padding-top: 25px;
    max-width: 96px;
    margin: 0 auto;
}

[data-supertokens~="resendEmailLink"] {
    display: inline-block;
}

[data-supertokens~="resetPasswordEmailForm"] {
    padding-bottom: 20px;
}

[data-supertokens~="resetPasswordPasswordForm"] {
    padding-bottom: 20px;
}
`,q3e=function(e){var t=e.children,r=e.userStyles;return rq.jsxs(H3e.Fragment,{children:[t,rq.jsxs("style",{children:[V3e,r.join(`
`)]})]})},G3e={en:nq.__assign(nq.__assign({},W3e.defaultTranslationsCommon.en),{EMAIL_VERIFICATION_RESEND_SUCCESS:"Email resent",EMAIL_VERIFICATION_SEND_TITLE:"Verify your email!",EMAIL_VERIFICATION_SEND_DESC_START:"",EMAIL_VERIFICATION_SEND_DESC_STRONG:"Please click on the link",EMAIL_VERIFICATION_SEND_DESC_END:" in the email we just sent you to confirm your email address.",EMAIL_VERIFICATION_RESEND_BTN:"Resend Email",EMAIL_VERIFICATION_LOGOUT:"Logout ",EMAIL_VERIFICATION_SUCCESS:"Email verification successful!",EMAIL_VERIFICATION_CONTINUE_BTN:"CONTINUE",EMAIL_VERIFICATION_CONTINUE_LINK:"Continue",EMAIL_VERIFICATION_EXPIRED:"The email verification link has expired",EMAIL_VERIFICATION_ERROR_TITLE:"Something went wrong",EMAIL_VERIFICATION_ERROR_DESC:"We encountered an unexpected error. Please contact support for assistance",EMAIL_VERIFICATION_LINK_CLICKED_HEADER:"Verify your email address",EMAIL_VERIFICATION_LINK_CLICKED_DESC:"Please click on the button below to verify your email address",EMAIL_VERIFICATION_LINK_CLICKED_CONTINUE_BUTTON:"CONTINUE"})};n7.ThemeBase=q3e;n7.defaultTranslationsEmailVerification=G3e;var _ae={},K3e=Mi,iq=u;function X3e(e){var t=e.color;return iq.jsx("svg",K3e.__assign({width:"6",height:"8",viewBox:"0 0 6 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:iq.jsx("path",{d:"M0.372871 3.24407C-0.0875903 3.64284 -0.0875899 4.35716 0.372872 4.75593L3.84535 7.76318C4.49299 8.32406 5.5 7.864 5.5 7.00725L5.5 0.992749C5.5 0.135997 4.49299 -0.324056 3.84535 0.23682L0.372871 3.24407Z",fill:"".concat(t)})}))}_ae.ArrowLeftIcon=X3e;var eb={},i7={},Y3e=Mi,Ej=u,Q3e=Tx;function J3e(e){var t=e.type,r=e.label,n=e.disabled,i=e.isLoading,a=e.onClick,s=e.isGreyedOut,o=e.icon,l=Q3e.useTranslation();n===void 0&&(n=!1);var c="button";return s&&(c+=" buttonGreyedOut"),o&&(c+=" buttonWithIcon"),Ej.jsxs("button",Y3e.__assign({type:t,disabled:n,onClick:a,"data-supertokens":c},{children:[o&&Ej.jsx("div",{children:o()}),Ej.jsxs("div",{children:[l(r),i&&"..."]})]}))}i7.Button=J3e;var an=Mi,wr=u,as=I,Z3e=RE,ePe=i7,a7=Tx;function tPe(e){return e&&e.__esModule?e:{default:e}}var rPe=tPe(as);function N6(e){var t=e.children,r=e.hasError;return wr.jsx("div",an.__assign({"data-supertokens":["formRow",r?"hasError":""].join(" ")},{children:t}))}function nPe(){return wr.jsx("svg",an.__assign({xmlns:"http://www.w3.org/2000/svg",width:"14.862",height:"12.033",viewBox:"0 0 14.862 12.033","data-supertokens":"checkedIcon"},{children:wr.jsx("path",{fill:"rgb(var(--palette-primary))",d:"M12.629 49L5.06 56.572l-2.829-2.829L0 55.977l5.057 5.057.654-.651 9.152-9.152z",transform:"translate(0 -49)"})}))}function Nae(){return wr.jsx("svg",an.__assign({xmlns:"http://www.w3.org/2000/svg",width:"17",height:"15",viewBox:"0 0 17 15","data-supertokens":"errorIcon"},{children:wr.jsxs("g",{children:[wr.jsx("g",an.__assign({className:"Asdf",fill:"rgb(var(--palette-error))"},{children:wr.jsx("path",{d:"M13.568 14.75H3.432c-.63 0-1.195-.325-1.512-.869-.317-.544-.32-1.196-.01-1.744l5.067-8.943c.315-.556.884-.887 1.523-.887.639 0 1.208.331 1.523.887l5.067 8.943c.31.548.307 1.2-.01 1.744s-.882.869-1.512.869z",transform:"translate(-824.894 -352.829) translate(824.894 352.829)"})})),wr.jsx("text",an.__assign({fill:"#fff",fontSize:"10px",fontWeight:"700",transform:"translate(-824.894 -352.829) translate(832.014 365.198)"},{children:wr.jsx("tspan",an.__assign({x:"0",y:"0"},{children:"!"}))}))]})}))}function iPe(e){var t=e.showPassword;return t===!0?wr.jsx("div",{children:wr.jsx("svg",an.__assign({xmlns:"http://www.w3.org/2000/svg",width:"18.391",height:"16.276",viewBox:"0 0 18.391 16.276","data-supertokens":"showPasswordIcon show"},{children:wr.jsxs("g",{children:[wr.jsx("g",{children:wr.jsx("g",{children:wr.jsx("g",{children:wr.jsx("path",{fill:"rgb(var(--palette-textPrimary))",d:"M29.289 100.33c-2.4-3.63-5.619-5.63-9.069-5.63s-6.67 2-9.069 5.63a.767.767 0 0 0 0 .845c2.4 3.63 5.619 5.63 9.069 5.63s6.67-2 9.069-5.63a.767.767 0 0 0 0-.845zm-9.069 4.944c-2.785 0-5.435-1.6-7.5-4.519 2.065-2.92 4.715-4.519 7.5-4.519s5.435 1.6 7.5 4.519c-2.064 2.92-4.711 4.519-7.5 4.519z",transform:"translate(-822 -420.048) translate(822 422.035) translate(-11.025 -94.7)"})})})}),wr.jsxs("g",an.__assign({fill:"rgb(var(--palette-textPrimary))",stroke:"rgb(var(--palette-inputBackground))",transform:"translate(-822 -420.048) translate(827.164 424.055)"},{children:[wr.jsx("circle",{cx:"4.036",cy:"4.036",r:"4.036",stroke:"none"}),wr.jsx("circle",{cx:"4.036",cy:"4.036",r:"3.536",fill:"none"})]})),wr.jsx("path",{fill:"none",stroke:"#707070",strokeLinecap:"round",strokeWidth:"2.25px",d:"M11.981 0L0 11.981",transform:"translate(-822 -420.048) translate(825.084 421.639)"}),wr.jsx("path",{fill:"none",stroke:"rgb(var(--palette-inputBackground))",strokeLinecap:"round",d:"M13.978 0L0 13.978",transform:"translate(-822 -420.048) translate(825.084 421.639)"})]})}))}):wr.jsx("div",{children:wr.jsx("svg",an.__assign({xmlns:"http://www.w3.org/2000/svg",width:"18.281",height:"12.033",viewBox:"0 0 18.281 12.033","data-supertokens":"showPasswordIcon hide"},{children:wr.jsxs("g",{children:[wr.jsx("g",{children:wr.jsx("g",{children:wr.jsx("g",{children:wr.jsx("path",{fill:"rgb(var(--palette-textPrimary))",d:"M29.18 100.3c-2.384-3.608-5.586-5.6-9.015-5.6s-6.63 1.989-9.015 5.6a.763.763 0 0 0 0 .84c2.384 3.608 5.586 5.6 9.015 5.6s6.63-1.989 9.015-5.6a.763.763 0 0 0 0-.84zm-9.015 4.914c-2.769 0-5.4-1.589-7.459-4.492 2.052-2.9 4.686-4.492 7.459-4.492s5.4 1.589 7.459 4.492c-2.056 2.899-4.686 4.489-7.458 4.489z",transform:"translate(-822 -422.088) translate(822 422.088) translate(-11.025 -94.7)"})})})}),wr.jsxs("g",an.__assign({fill:"rgb(var(--palette-textPrimary))",stroke:"rgb(var(--palette-inputBackground))",transform:"translate(-822 -422.088) translate(827.133 424.096)"},{children:[wr.jsx("circle",{cx:"4.012",cy:"4.012",r:"4.012",stroke:"none"}),wr.jsx("circle",{cx:"4.012",cy:"4.012",r:"3.512",fill:"none"})]}))]})}))})}var aPe=function(e){var t=e.type,r=e.name,n=e.hasError,i=e.autoComplete,a=e.onInputFocus,s=e.onInputBlur,o=e.onChange,l=e.value,c=e.placeholder,d=e.validated,f=e.autofocus,p=a7.useTranslation(),m=as.useState(!1),x=m[0],v=m[1];function b(){a!==void 0&&a(l)}function w(){s!==void 0&&s(l)}function k(N){o&&o(N.target.value)}i===void 0&&(i="off");var E=t;return t==="password"&&x===!0&&(E="text"),wr.jsx("div",an.__assign({"data-supertokens":"inputContainer"},{children:wr.jsxs("div",an.__assign({"data-supertokens":["inputWrapper",n?"inputError":""].join(" ")},{children:[wr.jsx("input",{autoFocus:f,autoComplete:i,"data-supertokens":"input input-".concat(r),className:"supertokens-input",onFocus:b,onBlur:w,type:E,name:r,placeholder:p(c),onChange:k,value:l}),n===!0&&wr.jsx("div",an.__assign({"data-supertokens":"inputAdornment inputAdornmentError"},{children:wr.jsx(Nae,{})})),d===!0&&n===!1&&wr.jsx("div",an.__assign({"data-supertokens":"inputAdornment inputAdornmentSuccess"},{children:wr.jsx(nPe,{})})),t==="password"&&l.length>0&&wr.jsx("div",an.__assign({onClick:function(){return v(x===!1)},"data-supertokens":"inputAdornment showPassword"},{children:wr.jsx(iPe,{showPassword:x})}))]}))}))};function sPe(e){var t=e.error,r=a7.useTranslation();return wr.jsx("div",an.__assign({"data-supertokens":"inputErrorMessage"},{children:r(t)}))}function Aae(e){var t=e.value,r=e.showIsRequired,n=a7.useTranslation();return wr.jsxs("div",an.__assign({"data-supertokens":"label"},{children:[n(t),r&&t&&t.trim()!==""&&" *"]}))}var Cj=function(e){if(e.getDefaultValue!==void 0){var t=e.getDefaultValue();if(typeof t!="string")throw new Error("getDefaultValue for ".concat(e.id," must return a string"));return t}return""};function oPe(e){var t=e.field,r=e.type,n=e.fstate,i=e.onInputFocus,a=e.onInputBlur,s=e.onInputChange,o=as.useCallback(function(d){i({id:t.id,value:d})},[i,t.id]),l=as.useCallback(function(d){a({id:t.id,value:d})},[a,t.id]),c=as.useCallback(function(d){s({id:t.id,value:d})},[s,t.id]);return t.inputComponent!==void 0?wr.jsx(t.inputComponent,{type:r,name:t.id,validated:n.validated===!0,placeholder:t.placeholder,value:n.value,autoComplete:t.autoComplete,autofocus:t.autofocus,onInputFocus:o,onInputBlur:l,onChange:c,hasError:n.error!==void 0},t.id):wr.jsx(aPe,{type:r,name:t.id,validated:n.validated===!0,placeholder:t.placeholder,value:n.value,autoComplete:t.autoComplete,onInputFocus:o,onInputBlur:l,onChange:c,autofocus:t.autofocus,hasError:n.error!==void 0},t.id)}var lPe=function(e){var t=e.footer,r=e.buttonLabel,n=e.showLabels,i=e.validateOnBlur,a=e.formFields,s=as.useRef(new AbortController);as.useEffect(function(){return s.current=new AbortController,function(){s.current.abort()}},[s]);var o=as.useState(e.formFields.map(function(k){return{id:k.id,value:Cj(k)}})),l=o[0],c=o[1];as.useEffect(function(){c(function(k){var E=k,N=e.formFields.filter(function(P){return!l.some(function(R){return P.id===R.id})});return N.length>0&&(k=an.__spreadArray(an.__spreadArray([],k,!0),N.map(function(P){return{id:P.id,value:Cj(P)}}),!0)),l.some(function(P){return!e.formFields.some(function(R){return R.id===P.id})})&&(E=k.filter(function(P){return e.formFields.some(function(R){return R.id===P.id})})),E})},[e.formFields,c]);var d=as.useState(!1),f=d[0],p=d[1],m=as.useCallback(function(k,E){c(function(N){var P=N.find(function(R){return R.id===k});return P===void 0?an.__spreadArray(an.__spreadArray([],N,!0),[E({id:k,value:""})],!1):N.filter(function(R){return R.id!==P.id}).concat(E(P))})},[c]),x=as.useCallback(function(k){m(k.id,function(E){return an.__assign(an.__assign({},E),{validated:!1})})},[m]),v=as.useCallback(function(k){return an.__awaiter(void 0,void 0,void 0,function(){var E,N,P;return an.__generator(this,function(R){switch(R.label){case 0:return i?(E=e.formFields.find(function(O){return O.id===k.id}),E&&k.value!==""?[4,E.validate(k.value)]:[3,2]):[2];case 1:return P=R.sent(),[3,3];case 2:P=void 0,R.label=3;case 3:return N=P,m(k.id,function(O){return an.__assign(an.__assign({},O),{error:N,validated:N===void 0&&k.value.length!==0})}),[2]}})})},[i,m,e.formFields]),b=as.useCallback(function(k){if(typeof k.value!="string")throw new Error("".concat(k.id," value must be a string"));m(k.id,function(E){return an.__assign(an.__assign({},E),{value:k.value,error:void 0})}),e.clearError()},[m]),w=as.useCallback(function(k){return an.__awaiter(void 0,void 0,void 0,function(){var E,N,P,R,O,D,L,B,z,H,te,Y,W;return an.__generator(this,function(Z){switch(Z.label){case 0:k.preventDefault(),p(!0),c(function(re){return re.map(function(X){return an.__assign(an.__assign({},X),{error:void 0})})}),E=a==null?void 0:a.map(function(re){var X=l==null?void 0:l.find(function(Q){return Q.id===re.id});return{id:re.id,value:X===void 0?"":X.value}}),N=[],Z.label=1;case 1:return Z.trys.push([1,3,4,5]),[4,an.handleCallAPI({apiFields:E,fieldUpdates:N,callAPI:e.callAPI})];case 2:if(P=Z.sent(),R=P.result,O=P.generalError,D=P.fetchError,s!=null&&s.current.signal.aborted)return[2];if(O!==void 0||R!==void 0&&R.status!=="OK")for(L=function(re){var X=N.find(function(Q){return Q.id===re.id});(X||re.clearOnSubmit===!0)&&m&&m(re.id,function(Q){return an.__assign(an.__assign({},Q),{value:X?X.value:""})})},B=0,z=a||[];B<z.length;B++)H=z[B],L(H);if(O!==void 0)e.onError(O.message);else if(D!==void 0)if(e.onFetchError)e.onFetchError(D);else throw D;else{if(R.status==="OK"&&(p(!1),e.clearError(),e.onSuccess!==void 0&&e.onSuccess(R)),s!=null&&s.current.signal.aborted)return[2];R.status==="FIELD_ERROR"&&(te=R.formFields,Y=function(re){var X,Q=(X=te.find(function(ye){return ye.id===re.id}))===null||X===void 0?void 0:X.error;if(Q==="Field is not optional"){var fe=a==null?void 0:a.find(function(ye){return ye.id===re.id});if((fe==null?void 0:fe.nonOptionalErrorMsg)!==void 0)return fe==null?void 0:fe.nonOptionalErrorMsg}return Q},c(function(re){return re.map(function(X){return an.__assign(an.__assign({},X),{error:Y(X)})})}))}return[3,5];case 3:return W=Z.sent(),console.error(W),e.onError("SOMETHING_WENT_WRONG_ERROR"),[3,5];case 4:return p(!1),[7];case 5:return[2]}})})},[p,c,e,a,l,m]);return wr.jsx(Tae.Provider,an.__assign({value:l},{children:wr.jsxs("form",an.__assign({autoComplete:"on",noValidate:!0,onSubmit:w,"data-supertokens":e.formDataSupertokens},{children:[a.filter(function(k){return k.hidden!==!0}).map(function(k){var E="text";Z3e.MANDATORY_FORM_FIELDS_ID_ARRAY.includes(k.id)&&(E=k.id),k.id==="confirm-password"&&(E="password");var N=l.find(function(P){return P.id===k.id})||{id:k.id,value:Cj(k)};return wr.jsx(N6,an.__assign({hasError:N.error!==void 0},{children:wr.jsxs(as.Fragment,{children:[n&&(k.labelComponent!==void 0?k.labelComponent:wr.jsx(Aae,{value:k.label,showIsRequired:k.showIsRequired})),wr.jsx(oPe,{type:E,field:k,fstate:N,onInputFocus:x,onInputBlur:v,onInputChange:b}),N.error&&wr.jsx(sPe,{error:N.error})]})}),k.id)}),wr.jsx(N6,{children:wr.jsxs(as.Fragment,{children:[wr.jsx(ePe.Button,{disabled:f,isLoading:f,type:"submit",label:r}),t]})},"form-button")]}))}))},Tae=rPe.default.createContext(void 0),cPe=function(){var e=as.useContext(Tae);if(e===void 0)throw new Error("useFormState used outside FormBase");return e};eb.ErrorIcon=Nae;eb.FormBase=lPe;eb.FormRow=N6;eb.Label=Aae;eb.useFormFields=cPe;var Iae={};(function(e){function t(n){for(var i in n)e.hasOwnProperty(i)||(e[i]=n[i])}e.__esModule=!0;let r=Wy;r.default!==void 0?t(r):t({default:r,...r})})(Iae);var Oae={},uPe=Mi,dPe=u,fPe=mn;function hPe(e){var t=e.children,r=e.recipeComponentOverrides;return dPe.jsx(fPe.ComponentOverrideContext.Provider,uPe.__assign({value:r},{children:t}))}Oae.AuthComponentWrapper=hPe;var mf={},tb={},Pae={},Rae={},DE={},c4={},g2=Ve&&Ve.__assign||function(){return g2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},g2.apply(this,arguments)};Object.defineProperty(c4,"__esModule",{value:!0});c4.normaliseUserInput=void 0;var pPe=SE;function mPe(e){var t=g2({functions:function(r){return r}},e.override);return g2(g2({},(0,pPe.normaliseRecipeModuleConfig)(e)),{override:t})}c4.normaliseUserInput=mPe;var ME={},kj=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},_j=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(ME,"__esModule",{value:!0});ME.getRecipeImplementation=void 0;var Nm=Ax,aq=Br;function jae(e){var t=new Nm.default(e.recipeId,e.appInfo);return{verifyEmail:function(r){var n=r.options,i=r.userContext;return kj(this,void 0,void 0,function(){var a,s,o,l,c;return _j(this,function(d){switch(d.label){case 0:return a=this.getEmailVerificationTokenFromURL({userContext:i}),s=this.getTenantIdFromURL({userContext:i}),[4,t.post({path:"/<tenantId>/user/email/verify",pathParams:{tenantId:s||"public"}},{body:{method:"token",token:a}},Nm.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"VERIFY_EMAIL",options:n,userContext:i}),Nm.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,userContext:i,action:"VERIFY_EMAIL"}))];case 1:return o=d.sent(),l=o.jsonBody,c=o.fetchResponse,[2,{status:l.status,fetchResponse:c}]}})})},isEmailVerified:function(r){var n=r.options,i=r.userContext;return kj(this,void 0,void 0,function(){var a,s,o;return _j(this,function(l){switch(l.label){case 0:return[4,t.get("/user/email/verify",{},Nm.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"IS_EMAIL_VERIFIED",options:n,userContext:i}),Nm.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,userContext:i,action:"IS_EMAIL_VERIFIED"}))];case 1:return a=l.sent(),s=a.jsonBody,o=a.fetchResponse,[2,{status:"OK",isVerified:s.isVerified,fetchResponse:o}]}})})},sendVerificationEmail:function(r){var n=r.options,i=r.userContext;return kj(this,void 0,void 0,function(){var a,s,o;return _j(this,function(l){switch(l.label){case 0:return[4,t.post("/user/email/verify/token",{body:void 0},Nm.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"SEND_VERIFY_EMAIL",options:n,userContext:i}),Nm.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,userContext:i,action:"SEND_VERIFY_EMAIL"}))];case 1:return a=l.sent(),s=a.jsonBody,o=a.fetchResponse,[2,{status:s.status,fetchResponse:o}]}})})},getEmailVerificationTokenFromURL:function(){var r=(0,aq.getQueryParams)("token");return r===void 0?"":r},getTenantIdFromURL:function(){return(0,aq.getQueryParams)("tenantId")}}}ME.default=jae;ME.getRecipeImplementation=jae;var FE={},gPe=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$A=Ve&&Ve.__assign||function(){return $A=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},$A.apply(this,arguments)},sq=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},oq=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(FE,"__esModule",{value:!0});FE.EmailVerificationClaimClass=void 0;var Dae=LL,xPe=zO,vPe=bE;function yPe(e){return Math.max(e,Dae.DateProviderReference.getReferenceOrThrow().dateProvider.getThresholdInSeconds())}var bPe=function(e){gPe(t,e);function t(r){var n=e.call(this,{id:vPe.EMAILVERIFICATION_CLAIM_ID,refresh:function(i){return sq(n,void 0,void 0,function(){return oq(this,function(a){switch(a.label){case 0:return[4,r().isEmailVerified({userContext:i})];case 1:return a.sent(),[2]}})})}})||this;return n.validators=$A($A({},n.validators),{isVerified:function(i,a){return{id:n.id,refresh:n.refresh,shouldRefresh:function(s,o){var l=Dae.DateProviderReference.getReferenceOrThrow().dateProvider;if(i=i??yPe(10),a!==void 0&&a<l.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(l.getThresholdInSeconds()));if(i<l.getThresholdInSeconds())throw new Error("refetchTimeOnFalseInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(l.getThresholdInSeconds()));var c=n.getValueFromPayload(s,o);if(c===void 0)return!0;var d=l.now(),f=n.getLastFetchedTime(s,o);return a!==void 0&&f<d-a*1e3||c===!1&&f<d-i*1e3},validate:function(s,o){return sq(n,void 0,void 0,function(){var l;return oq(this,function(c){return l=this.getValueFromPayload(s,o),[2,l===!0?{isValid:!0}:{isValid:!1,reason:{message:"wrong value",expectedValue:!0,actualValue:l}}]})})}}}}),n}return t}(xPe.BooleanClaim);FE.EmailVerificationClaimClass=bPe;var zA=Ve&&Ve.__assign||function(){return zA=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},zA.apply(this,arguments)};Object.defineProperty(DE,"__esModule",{value:!0});DE.Recipe=void 0;var wPe=HL,SPe=c4,EPe=ME,CPe=ff,Nj=Br,kPe=FE,_Pe=kx,Mae=function(){function e(t){this.config=(0,SPe.normaliseUserInput)(t);var r=new CPe.default((0,EPe.default)({recipeId:this.config.recipeId,appInfo:this.config.appInfo,clientType:this.config.clientType,preAPIHook:this.config.preAPIHook,postAPIHook:this.config.postAPIHook}));this.recipeImplementation=r.override(this.config.override.functions).build(),_Pe.PostSuperTokensInitCallbacks.addPostInitCallback(function(){wPe.SessionClaimValidatorStore.addClaimValidatorFromOtherRecipe(e.EmailVerificationClaim.validators.isVerified(10))})}return e.init=function(t){return function(r,n,i,a){return e.instance=new e(zA(zA({},(0,Nj.applyPlugins)(e.RECIPE_ID,t,a??[])),{appInfo:r,clientType:n,recipeId:e.RECIPE_ID})),e.instance}},e.getInstanceOrThrow=function(){if(e.instance===void 0){var t="No instance of EmailVerification found. Ensure that the 'EmailVerification.init' method is called within the 'SuperTokens.init' recipeList.";throw t=(0,Nj.checkForSSRErrorAndAppendIfNeeded)(t),Error(t)}return e.instance},e.reset=function(){(0,Nj.isTest)()&&(e.instance=void 0)},e.RECIPE_ID="emailverification",e.EmailVerificationClaim=new kPe.EmailVerificationClaimClass(function(){return e.getInstanceOrThrow().recipeImplementation}),e}();DE.Recipe=Mae;DE.default=Mae;(function(e){var t=Ve&&Ve.__assign||function(){return t=Object.assign||function(m){for(var x,v=1,b=arguments.length;v<b;v++){x=arguments[v];for(var w in x)Object.prototype.hasOwnProperty.call(x,w)&&(m[w]=x[w])}return m},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.EmailVerificationClaimClass=e.EmailVerificationClaim=e.getTenantIdFromURL=e.getEmailVerificationTokenFromURL=e.isEmailVerified=e.sendVerificationEmail=e.verifyEmail=e.init=void 0;var r=DE,n=Br,i=FE;Object.defineProperty(e,"EmailVerificationClaimClass",{enumerable:!0,get:function(){return i.EmailVerificationClaimClass}});var a=function(){function m(){}return m.init=function(x){return r.default.init(x)},m.verifyEmail=function(x){return r.default.getInstanceOrThrow().recipeImplementation.verifyEmail(t(t({},x),{userContext:(0,n.getNormalisedUserContext)(x==null?void 0:x.userContext)}))},m.sendVerificationEmail=function(x){return r.default.getInstanceOrThrow().recipeImplementation.sendVerificationEmail(t(t({},x),{userContext:(0,n.getNormalisedUserContext)(x==null?void 0:x.userContext)}))},m.isEmailVerified=function(x){return r.default.getInstanceOrThrow().recipeImplementation.isEmailVerified(t(t({},x),{userContext:(0,n.getNormalisedUserContext)(x==null?void 0:x.userContext)}))},m.getEmailVerificationTokenFromURL=function(x){return r.default.getInstanceOrThrow().recipeImplementation.getEmailVerificationTokenFromURL(t(t({},x),{userContext:(0,n.getNormalisedUserContext)(x==null?void 0:x.userContext)}))},m.getTenantIdFromURL=function(x){return r.default.getInstanceOrThrow().recipeImplementation.getTenantIdFromURL(t(t({},x),{userContext:(0,n.getNormalisedUserContext)(x==null?void 0:x.userContext)}))},m.EmailVerificationClaim=r.default.EmailVerificationClaim,m}();e.default=a;var s=a.init;e.init=s;var o=a.verifyEmail;e.verifyEmail=o;var l=a.sendVerificationEmail;e.sendVerificationEmail=l;var c=a.isEmailVerified;e.isEmailVerified=c;var d=a.getEmailVerificationTokenFromURL;e.getEmailVerificationTokenFromURL=d;var f=a.getTenantIdFromURL;e.getTenantIdFromURL=f;var p=a.EmailVerificationClaim;e.EmailVerificationClaim=p})(Rae);(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(Rae)})(Pae);var NPe=Cx,hi=Mi,Fae=Pae,APe=QO,TPe=zL,IPe=Yy,OPe=ja;function PPe(e){return e&&e.__esModule?e:{default:e}}var lq=PPe(Fae),Lae="/verify-email",RPe=function(e){hi.__extends(t,e);function t(r,n){var i=e.call(this,r)||this,a=hi.__assign({},i.validators),s=function(l){var c=a[l];a[l]=function(){for(var d=[],f=0;f<arguments.length;f++)d[f]=arguments[f];return hi.__assign(hi.__assign({},c.apply(void 0,d)),{onFailureRedirection:function(p){if(n!==void 0)return n(p);var m=s7.getInstanceOrThrow();if(m.config.mode==="REQUIRED")return m.getRedirectUrl({action:"VERIFY_EMAIL",tenantIdFromQueryParams:hi.getTenantIdFromQueryParams()},p.userContext)},showAccessDeniedOnFailure:!1})}};for(var o in a)s(o);return i.validators=a,i}return t}(Fae.EmailVerificationClaimClass),jPe=function(e){return function(t){return hi.__assign(hi.__assign({},t),{verifyEmail:function(r){return hi.__awaiter(this,void 0,void 0,function(){var n;return hi.__generator(this,function(i){switch(i.label){case 0:return[4,t.verifyEmail(r)];case 1:return n=i.sent(),n.status==="OK"&&e({action:"EMAIL_VERIFIED_SUCCESSFUL",userContext:r.userContext}),[2,n]}})})},sendVerificationEmail:function(r){return hi.__awaiter(this,void 0,void 0,function(){var n;return hi.__generator(this,function(i){switch(i.label){case 0:return[4,t.sendVerificationEmail(r)];case 1:return n=i.sent(),n.status==="OK"&&e({action:"VERIFY_EMAIL_SENT",userContext:r.userContext}),[2,n]}})})}})}};function DPe(e){e===void 0&&(e={});var t=e.disableDefaultUI===!0,r=e.mode===void 0?"REQUIRED":e.mode,n=e.sendVerifyEmailScreen!==void 0&&e.sendVerifyEmailScreen.style!==void 0?e.sendVerifyEmailScreen.style:"",i={style:n},a=e.verifyEmailLinkClickedScreen!==void 0&&e.verifyEmailLinkClickedScreen.style!==void 0?e.verifyEmailLinkClickedScreen.style:"",s={style:a},o=hi.__assign({functions:function(l){return l}},e.override);return hi.__assign(hi.__assign({},OPe.normaliseRecipeModuleConfig(e)),{disableDefaultUI:t,mode:r,sendVerifyEmailScreen:i,verifyEmailLinkClickedScreen:s,override:o})}var s7=function(e){hi.__extends(t,e);function t(r,n){n===void 0&&(n=lq.default);var i=e.call(this,r)||this;return i.webJSRecipe=n,i.recipeID=t.RECIPE_ID,i.getDefaultRedirectionURL=function(a){return hi.__awaiter(i,void 0,void 0,function(){return hi.__generator(this,function(s){return a.action==="VERIFY_EMAIL"?[2,hi.getDefaultRedirectionURLForPath(this.config,Lae,a)]:[2,"/"]})})},APe.PostSuperTokensInitCallbacks.addPostInitCallback(function(){var a=t.EmailVerificationClaim.validators.isVerified(10);TPe.SessionClaimValidatorStore.addClaimValidatorFromOtherRecipe(a)}),i}return t.init=function(r){var n=DPe(r);return{recipeID:t.RECIPE_ID,authReact:function(i){return t.instance=new t(hi.__assign(hi.__assign({},n),{appInfo:i,recipeId:t.RECIPE_ID})),t.instance},webJS:lq.default.init(hi.__assign(hi.__assign({},n),{override:{functions:function(i,a){var s=jPe(n.onHandleEvent);return a.override(s),a.override(n.override.functions),i}}}))}},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of EmailVerification found. Make sure to call the EmailVerification.init method.";throw typeof window>"u"&&(r=r+hi.SSR_ERROR),Error(r)}return t.instance},t.prototype.isEmailVerified=function(r){return hi.__awaiter(this,void 0,void 0,function(){return hi.__generator(this,function(n){switch(n.label){case 0:return[4,this.webJSRecipe.isEmailVerified({userContext:r})];case 1:return[2,n.sent()]}})})},t.reset=function(){hi.isTest()&&(t.instance=void 0)},t.RECIPE_ID="emailverification",t.EmailVerificationClaim=new RPe(function(){return t.getInstanceOrThrow().webJSRecipe}),t}(IPe.RecipeModule),Bae=NPe.createGenericComponentsOverrideContext(void 0,s7.RECIPE_ID),MPe=Bae[0],FPe=Bae[1];tb.DEFAULT_VERIFY_EMAIL_PATH=Lae;tb.EmailVerification=s7;tb.Provider=FPe;tb.useContext=MPe;Object.defineProperty(mf,"__esModule",{value:!0});var es=Mi,Tp=tb,Px=function(){function e(){}return e.init=function(t){return Tp.EmailVerification.init(t)},e.isEmailVerified=function(t){return es.__awaiter(this,void 0,void 0,function(){return es.__generator(this,function(r){return[2,Tp.EmailVerification.getInstanceOrThrow().webJSRecipe.isEmailVerified(es.__assign(es.__assign({},t),{userContext:es.getNormalisedUserContext(t==null?void 0:t.userContext)}))]})})},e.verifyEmail=function(t){return es.__awaiter(this,void 0,void 0,function(){return es.__generator(this,function(r){return[2,Tp.EmailVerification.getInstanceOrThrow().webJSRecipe.verifyEmail(es.__assign(es.__assign({},t),{userContext:es.getNormalisedUserContext(t==null?void 0:t.userContext)}))]})})},e.sendVerificationEmail=function(t){return es.__awaiter(this,void 0,void 0,function(){return es.__generator(this,function(r){return[2,Tp.EmailVerification.getInstanceOrThrow().webJSRecipe.sendVerificationEmail(es.__assign(es.__assign({},t),{userContext:es.getNormalisedUserContext(t==null?void 0:t.userContext)}))]})})},e.getEmailVerificationTokenFromURL=function(t){return Tp.EmailVerification.getInstanceOrThrow().webJSRecipe.getEmailVerificationTokenFromURL(es.__assign(es.__assign({},t),{userContext:es.getNormalisedUserContext(t==null?void 0:t.userContext)}))},e.EmailVerificationClaim=Tp.EmailVerification.EmailVerificationClaim,e.ComponentsOverrideProvider=Tp.Provider,e}(),LPe=Px.init,BPe=Px.isEmailVerified,UPe=Px.verifyEmail,$Pe=Px.sendVerificationEmail,zPe=Px.getEmailVerificationTokenFromURL,HPe=Px.ComponentsOverrideProvider,WPe=Tp.EmailVerification.EmailVerificationClaim;mf.EmailVerificationClaim=WPe;mf.EmailVerificationComponentsOverrideProvider=HPe;mf.default=Px;mf.getEmailVerificationTokenFromURL=zPe;mf.init=LPe;mf.isEmailVerified=BPe;mf.sendVerificationEmail=$Pe;mf.verifyEmail=UPe;var Tt=Mi,lr=u,VPe=UO,ra=mn,b1=a4,yl=I,wg=ja,u4=n7,d4=Tx,qPe=_ae,ey=eb,GPe=Iae,KPe=i7,Uae=Oae,$ae=mf,zae=tb,Hae=Wi,ty=gu,A6=s4,XPe=Wy,YPe=RE;function o7(e){return e&&e.__esModule?e:{default:e}}function QPe(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}var JPe=o7(VPe),Wd=QPe(yl),HA=o7(GPe),ZPe=o7(XPe);function eRe(e){var t=e.onClick,r=d4.useTranslation();return lr.jsxs("div",Tt.__assign({"data-supertokens":"secondaryText secondaryLinkWithLeftArrow",onClick:t},{children:[lr.jsx(qPe.ArrowLeftIcon,{color:"rgb(var(--palette-secondaryText))"}),r("EMAIL_PASSWORD_RESET_SIGN_IN_LINK")]}))}var tRe=function(e){var t=d4.useTranslation(),r=ra.useUserContext(),n=yl.useState("READY"),i=n[0],a=n[1],s=yl.useState(""),o=s[0],l=s[1],c=function(){a("SENT")},d=function(){a("READY")},f=e.formFields,p=t("EMAIL_PASSWORD_RESET_SEND_BEFORE_EMAIL")+(o!==void 0&&o.length>0?o:t("EMAIL_PASSWORD_RESET_SEND_FALLBACK_EMAIL"))+t("EMAIL_PASSWORD_RESET_SEND_AFTER_EMAIL");return i==="SENT"?lr.jsx("div",Tt.__assign({"data-supertokens":"container"},{children:lr.jsxs("div",Tt.__assign({"data-supertokens":"row"},{children:[lr.jsxs("div",Tt.__assign({"data-supertokens":"primaryText enterEmailSuccessMessage"},{children:[p,lr.jsx("span",Tt.__assign({"data-supertokens":"link resendEmailLink",onClick:d},{children:t("EMAIL_PASSWORD_RESET_RESEND_LINK")}))]})),lr.jsx(eRe,{onClick:e.onBackButtonClicked})]}))})):lr.jsx("div",Tt.__assign({"data-supertokens":"container resetPasswordEmailForm"},{children:lr.jsxs("div",Tt.__assign({"data-supertokens":"row"},{children:[lr.jsxs("div",Tt.__assign({"data-supertokens":"headerTitle withBackButton"},{children:[lr.jsx(ra.BackButton,{onClick:e.onBackButtonClicked}),t("EMAIL_PASSWORD_RESET_HEADER_TITLE"),lr.jsx("span",{"data-supertokens":"backButtonPlaceholder backButtonCommon"})]})),lr.jsx("div",Tt.__assign({"data-supertokens":"headerSubtitle secondaryText"},{children:t("EMAIL_PASSWORD_RESET_HEADER_SUBTITLE")})),e.error!==void 0&&lr.jsx(ra.GeneralError,{error:e.error}),lr.jsx(ey.FormBase,{clearError:e.clearError,onError:e.onError,formFields:f,buttonLabel:"EMAIL_PASSWORD_RESET_SEND_BTN",onSuccess:c,callAPI:function(m){return Tt.__awaiter(void 0,void 0,void 0,function(){var x,v,b;return Tt.__generator(this,function(w){switch(w.label){case 0:return[4,Tt.validateForm(m,e.config.resetPasswordUsingTokenFeature.enterEmailForm.formFields)];case 1:return x=w.sent(),x.length>0?[2,{status:"FIELD_ERROR",formFields:x}]:(v=m.find(function(k){return k.id==="email"}),v!==void 0&&l(v.value),[4,e.recipeImplementation.sendPasswordResetEmail({formFields:m,userContext:r})]);case 2:return b=w.sent(),b.status==="PASSWORD_RESET_NOT_ALLOWED"?[2,{status:"FIELD_ERROR",formFields:[{id:"email",error:b.reason}]}]:[2,b]}})})},showLabels:!0,validateOnBlur:!0,footer:e.footer})]}))}))},rRe=ra.withOverride("EmailPasswordResetPasswordEmail",tRe),nRe=function(e){var t=d4.useTranslation(),r=ra.useUserContext(),n=yl.useState("READY"),i=n[0],a=n[1],s=function(){a("SUCCESS")},o=e.formFields,l=e.onSignInClicked;return i==="SUCCESS"?lr.jsx("div",Tt.__assign({"data-supertokens":"container"},{children:lr.jsxs("div",Tt.__assign({"data-supertokens":"row"},{children:[lr.jsx("div",Tt.__assign({"data-supertokens":"headerTitle"},{children:t("EMAIL_PASSWORD_RESET_SUBMIT_PW_SUCCESS_HEADER_TITLE")})),lr.jsx(ey.FormRow,{children:lr.jsxs(yl.Fragment,{children:[lr.jsx("div",Tt.__assign({"data-supertokens":"primaryText submitNewPasswordSuccessMessage"},{children:t("EMAIL_PASSWORD_RESET_SUBMIT_PW_SUCCESS_DESC")})),lr.jsx(KPe.Button,{disabled:!1,isLoading:!1,type:"button",onClick:l,label:"EMAIL_PASSWORD_RESET_SUBMIT_PW_SUCCESS_SIGN_IN_BTN"})]})},"form-button")]}))})):lr.jsx("div",Tt.__assign({"data-supertokens":"container resetPasswordPasswordForm"},{children:lr.jsxs("div",Tt.__assign({"data-supertokens":"row"},{children:[lr.jsx("div",Tt.__assign({"data-supertokens":"headerTitle"},{children:t("EMAIL_PASSWORD_RESET_SUBMIT_PW_HEADER_TITLE")})),lr.jsx("div",Tt.__assign({"data-supertokens":"headerSubtitle secondaryText"},{children:t("EMAIL_PASSWORD_RESET_SUBMIT_PW_HEADER_SUBTITLE")})),e.error!==void 0&&lr.jsx(ra.GeneralError,{error:e.error}),lr.jsx(ey.FormBase,{formFields:o,clearError:e.clearError,onError:e.onError,buttonLabel:"EMAIL_PASSWORD_RESET_SUBMIT_PW_CHANGE_PW_BTN",onSuccess:s,validateOnBlur:!0,callAPI:function(c){return Tt.__awaiter(void 0,void 0,void 0,function(){var d,f;return Tt.__generator(this,function(p){switch(p.label){case 0:return[4,Tt.validateForm(c,e.config.resetPasswordUsingTokenFeature.submitNewPasswordForm.formFields)];case 1:return d=p.sent(),d.length>0?[2,{status:"FIELD_ERROR",formFields:d}]:c[0].value!==c[1].value?[2,{status:"FIELD_ERROR",formFields:[{id:c[1].id,error:"ERROR_CONFIRM_PASSWORD_NO_MATCH"}]}]:[4,e.recipeImplementation.submitNewPassword({formFields:c,userContext:r})];case 2:if(f=p.sent(),f.status==="RESET_PASSWORD_INVALID_TOKEN_ERROR")throw new HA.default("EMAIL_PASSWORD_RESET_PASSWORD_INVALID_TOKEN_ERROR");return[2,f.status==="FIELD_ERROR"?f:{status:"OK"}]}})})},showLabels:!0,footer:e.footer})]}))}))},iRe=ra.withOverride("EmailPasswordSubmitNewPassword",nRe);function aRe(e){return e.submitNewPasswordForm!==void 0?lr.jsx(iRe,Tt.__assign({},e.submitNewPasswordForm)):lr.jsx(rRe,Tt.__assign({},e.enterEmailForm))}function l7(e){var t=wg.SuperTokens.getInstanceOrThrow().rootStyle,r=e.submitNewPasswordForm?e.config.resetPasswordUsingTokenFeature.submitNewPasswordForm.style:e.config.resetPasswordUsingTokenFeature.enterEmailForm.style;return lr.jsx(ra.UserContextWrapper,Tt.__assign({userContext:e.userContext},{children:lr.jsx(u4.ThemeBase,Tt.__assign({userStyles:[t,e.config.recipeRootStyle,r]},{children:lr.jsx(aRe,Tt.__assign({},e))}))}))}var T6={en:Tt.__assign(Tt.__assign(Tt.__assign({},wg.defaultTranslationsCommon.en),u4.defaultTranslationsEmailVerification.en),{EMAIL_PASSWORD_EMAIL_LABEL:"Email",EMAIL_PASSWORD_EMAIL_PLACEHOLDER:"Email address",EMAIL_PASSWORD_PASSWORD_LABEL:"Password",EMAIL_PASSWORD_PASSWORD_PLACEHOLDER:"Password",EMAIL_PASSWORD_SIGN_IN_FORGOT_PW_LINK:"Forgot password?",EMAIL_PASSWORD_SIGN_IN_SUBMIT_BTN:"SIGN IN",EMAIL_PASSWORD_SIGN_IN_WRONG_CREDENTIALS_ERROR:"Incorrect email and password combination",EMAIL_PASSWORD_SIGN_UP_SUBMIT_BTN:"SIGN UP",EMAIL_PASSWORD_EMAIL_ALREADY_EXISTS:"This email already exists. Please sign in instead",EMAIL_PASSWORD_RESET_HEADER_TITLE:"Reset your password",EMAIL_PASSWORD_RESET_HEADER_SUBTITLE:"We will send you an email to reset your password",EMAIL_PASSWORD_RESET_SEND_FALLBACK_EMAIL:"your account",EMAIL_PASSWORD_RESET_SEND_BEFORE_EMAIL:"A password reset email has been sent to ",EMAIL_PASSWORD_RESET_SEND_AFTER_EMAIL:", if it exists in our system. ",EMAIL_PASSWORD_RESET_RESEND_LINK:"Resend or change email",EMAIL_PASSWORD_RESET_SEND_BTN:"Email me",EMAIL_PASSWORD_RESET_SIGN_IN_LINK:"Sign In",EMAIL_PASSWORD_RESET_SUBMIT_PW_SUCCESS_HEADER_TITLE:"Success!",EMAIL_PASSWORD_RESET_SUBMIT_PW_SUCCESS_DESC:"Your password has been updated successfully",EMAIL_PASSWORD_RESET_SUBMIT_PW_SUCCESS_SIGN_IN_BTN:"SIGN IN",EMAIL_PASSWORD_NEW_PASSWORD_LABEL:"New password",EMAIL_PASSWORD_NEW_PASSWORD_PLACEHOLDER:"New password",EMAIL_PASSWORD_CONFIRM_PASSWORD_LABEL:"Confirm password",EMAIL_PASSWORD_CONFIRM_PASSWORD_PLACEHOLDER:"Confirm your password",EMAIL_PASSWORD_RESET_SUBMIT_PW_HEADER_TITLE:"Change your password",EMAIL_PASSWORD_RESET_SUBMIT_PW_HEADER_SUBTITLE:"Enter a new password below to change your password",EMAIL_PASSWORD_RESET_SUBMIT_PW_CHANGE_PW_BTN:"CHANGE PASSWORD",EMAIL_PASSWORD_RESET_PASSWORD_INVALID_TOKEN_ERROR:"Invalid password reset token",ERROR_EMAIL_NON_STRING:"Email must be of type string",ERROR_EMAIL_INVALID:"Email is invalid",ERROR_PASSWORD_NON_STRING:"Password must be of type string",ERROR_PASSWORD_TOO_SHORT:"Password must contain at least 8 characters, including a number",ERROR_PASSWORD_TOO_LONG:"Password's length must be lesser than 100 characters",ERROR_PASSWORD_NO_ALPHA:"Password must contain at least one alphabet",ERROR_PASSWORD_NO_NUM:"Password must contain at least one number",ERROR_CONFIRM_PASSWORD_NO_MATCH:"Confirmation password doesn't match",ERROR_NON_OPTIONAL:"Field is not optional","This email already exists. Please sign in instead.":void 0,"Field is not optional":void 0,"Password must contain at least 8 characters, including a number":void 0,"Password's length must be lesser than 100 characters":void 0,"Password must contain at least one alphabet":void 0,"Password must contain at least one number":void 0,"Email is invalid":void 0,"Reset password link was not created because of account take over risk. Please contact support. (ERR_CODE_001)":void 0,"Cannot sign up due to security reasons. Please try logging in, use a different login method or contact support. (ERR_CODE_007)":void 0,"Cannot sign in due to security reasons. Please try resetting your password, use a different login method or contact support. (ERR_CODE_008)":void 0,"Cannot sign in / up due to security reasons. Please contact support. (ERR_CODE_009)":void 0,"Cannot sign in / up due to security reasons. Please contact support. (ERR_CODE_010)":void 0,"Cannot sign in / up due to security reasons. Please contact support. (ERR_CODE_011)":void 0,"Cannot sign in / up due to security reasons. Please contact support. (ERR_CODE_012)":void 0,"Cannot sign in / up due to security reasons. Please contact support. (ERR_CODE_013)":void 0,"Cannot sign in / up due to security reasons. Please contact support. (ERR_CODE_014)":void 0,"Cannot sign in / up due to security reasons. Please contact support. (ERR_CODE_015)":void 0,"Cannot sign in / up due to security reasons. Please contact support. (ERR_CODE_016)":void 0})},sRe=function(e){var t=Tt.getQueryParams("token"),r=ra.useUserContext();e.userContext!==void 0&&(r=e.userContext);var n=Wd.useState(),i=n[0],a=n[1],s=e.recipe.config.resetPasswordUsingTokenFeature.enterEmailForm,o=e.recipe.config.resetPasswordUsingTokenFeature.submitNewPasswordForm,l=t==null?void 0:{error:i,onError:function(p){return a(p)},clearError:function(){return a(void 0)},styleFromInit:o.style,formFields:o.formFields,recipeImplementation:e.recipe.webJSRecipe,config:e.recipe.config,onSignInClicked:function(){wg.SuperTokens.getInstanceOrThrow().redirectToAuth({show:"signin",navigate:e.navigate,redirectBack:!1,userContext:r})},token:t},c={onBackButtonClicked:function(){return wg.SuperTokens.getInstanceOrThrow().redirectToAuth({show:"signin",navigate:e.navigate,redirectBack:!1,userContext:r})},error:i,onError:function(p){return a(p)},clearError:function(){return a(void 0)},styleFromInit:s.style,formFields:s.formFields,recipeImplementation:e.recipe.webJSRecipe,config:e.recipe.config},d={config:e.recipe.config,submitNewPasswordForm:l,enterEmailForm:c},f=e.useComponentOverrides();return lr.jsx(ra.ComponentOverrideContext.Provider,Tt.__assign({value:f},{children:lr.jsx(ra.FeatureWrapper,Tt.__assign({useShadowDom:wg.SuperTokens.getInstanceOrThrow().useShadowDom,defaultStore:T6},{children:lr.jsxs(yl.Fragment,{children:[e.children===void 0&&lr.jsx(l7,Tt.__assign({},d)),e.children&&Wd.Children.map(e.children,function(p){return Wd.isValidElement(p)?Wd.cloneElement(p,d):p})]})}))}))},oRe=ra.withOverride("EmailPasswordSignInForm",function(t){var r=this,n=ra.useUserContext();return lr.jsx(ey.FormBase,{formFields:t.formFields,clearError:t.clearError,onError:t.onError,onFetchError:t.onFetchError,buttonLabel:"EMAIL_PASSWORD_SIGN_IN_SUBMIT_BTN",onSuccess:t.onSuccess,callAPI:function(i){return Tt.__awaiter(r,void 0,void 0,function(){var a,s;return Tt.__generator(this,function(o){switch(o.label){case 0:return[4,Tt.validateForm(i,t.config.signInAndUpFeature.signInForm.formFields)];case 1:return a=o.sent(),a.length>0?[2,{status:"FIELD_ERROR",formFields:a}]:[4,t.recipeImplementation.signIn({formFields:i,shouldTryLinkingWithSessionUser:!1,userContext:n})];case 2:if(s=o.sent(),s.status==="WRONG_CREDENTIALS_ERROR")throw new HA.default("EMAIL_PASSWORD_SIGN_IN_WRONG_CREDENTIALS_ERROR");if(s.status==="SIGN_IN_NOT_ALLOWED")throw new HA.default(s.reason);return[2,s]}})})},validateOnBlur:!1,showLabels:!0,footer:t.footer})});function lRe(e){var t=wg.SuperTokens.getInstanceOrThrow().rootStyle,r=e.config.signInAndUpFeature.signInForm.style;return lr.jsx(ra.UserContextWrapper,Tt.__assign({userContext:e.userContext},{children:lr.jsx(u4.ThemeBase,Tt.__assign({userStyles:[t,e.config.recipeRootStyle,r]},{children:lr.jsx(oRe,Tt.__assign({},e))}))}))}function cRe(e,t,r,n,i,a,s){var o=this,l=ra.useSessionContext(),c=yl.useMemo(function(){return dRe(e.webJSRecipe)},[e]),d=Tt.useRethrowInRender(),f=d4.useTranslation(),p=yl.useCallback(function(){return Tt.__awaiter(o,void 0,void 0,function(){var m;return Tt.__generator(this,function(x){switch(x.label){case 0:return x.trys.push([0,2,,3]),[4,ty.Session.getInstanceOrThrow().getAccessTokenPayloadSecurely({userContext:a})];case 1:return m=x.sent(),[3,3];case 2:return x.sent(),m=void 0,[3,3];case 3:return[2,t({createdNewUser:!1,isNewRecipeUser:!1,newSessionCreated:l.loading||!l.doesSessionExist||m!==void 0&&l.accessTokenPayload.sessionHandle!==m.sessionHandle,recipeId:A6.EmailPassword.RECIPE_ID}).catch(d)]}})})},[e,a,s]);return yl.useMemo(function(){var m=function(){return e.redirect({action:"RESET_PASSWORD",tenantIdFromQueryParams:Tt.getTenantIdFromQueryParams()},s,void 0,a)},x=e.config.signInAndUpFeature,v=x.signInForm,b=v.formFields.map(function(w){return w.id!=="password"?w:Tt.__assign(Tt.__assign({},w),{labelComponent:lr.jsxs("div",Tt.__assign({"data-supertokens":"formLabelWithLinkWrapper"},{children:[lr.jsx(ey.Label,{value:w.label,"data-supertokens":"passwordInputLabel"}),lr.jsx("a",Tt.__assign({onClick:m,"data-supertokens":"link linkButton formLabelLinkBtn forgotPasswordLink"},{children:f("EMAIL_PASSWORD_SIGN_IN_FORGOT_PW_LINK")}))]}))})});return{recipeImplementation:c,config:e.config,styleFromInit:v.style,formFields:b,error:r,clearError:i,onError:n,onFetchError:function(w){return Tt.__awaiter(o,void 0,void 0,function(){var k,E;return Tt.__generator(this,function(N){switch(N.label){case 0:return w.status!==ty.Session.getInstanceOrThrow().config.invalidClaimStatusCode?[3,5]:[4,Hae.getInvalidClaimsFromResponse({response:w,userContext:a})];case 1:if(k=N.sent(),!k.some(function(P){return P.id===$ae.EmailVerificationClaim.id}))return[3,5];N.label=2;case 2:return N.trys.push([2,4,,5]),E=zae.EmailVerification.getInstanceOrThrow(),[4,E.redirect({action:"VERIFY_EMAIL",tenantIdFromQueryParams:Tt.getTenantIdFromQueryParams()},s,void 0,a)];case 3:return N.sent(),[2];case 4:return N.sent(),[3,5];case 5:return n("SOMETHING_WENT_WRONG_ERROR"),[2]}})})},onSuccess:p,onForgotPasswordClick:m,userContext:a}},[e,r,a])}var uRe=function(e){var t=cRe(e.recipe,e.onAuthSuccess,e.error,e.onError,e.clearError,e.userContext,e.navigate),r=e.useComponentOverrides();return lr.jsx(Uae.AuthComponentWrapper,Tt.__assign({recipeComponentOverrides:r},{children:lr.jsxs(yl.Fragment,{children:[e.children===void 0&&lr.jsx(lRe,Tt.__assign({},t)),e.children&&Wd.Children.map(e.children,function(n){return Wd.isValidElement(n)?Wd.cloneElement(n,Tt.__assign({},t)):n})]})}))},dRe=function(e){return Tt.__assign(Tt.__assign({},e),{signIn:function(t){return Tt.__awaiter(this,void 0,void 0,function(){var r;return Tt.__generator(this,function(n){switch(n.label){case 0:return[4,e.signIn(Tt.__assign(Tt.__assign({},t),{shouldTryLinkingWithSessionUser:!1}))];case 1:return r=n.sent(),[2,r]}})})},signUp:function(t){return Tt.__awaiter(this,void 0,void 0,function(){var r;return Tt.__generator(this,function(n){switch(n.label){case 0:return[4,e.signUp(Tt.__assign(Tt.__assign({},t),{shouldTryLinkingWithSessionUser:!1}))];case 1:return r=n.sent(),[2,r]}})})}})},fRe=ra.withOverride("EmailPasswordSignUpForm",function(t){var r=this,n=ra.useUserContext();return lr.jsx(ey.FormBase,{formFields:t.formFields,clearError:t.clearError,onError:t.onError,onFetchError:t.onFetchError,buttonLabel:"EMAIL_PASSWORD_SIGN_UP_SUBMIT_BTN",onSuccess:t.onSuccess,callAPI:function(i){return Tt.__awaiter(r,void 0,void 0,function(){var a,s;return Tt.__generator(this,function(o){switch(o.label){case 0:return[4,Tt.validateForm(i,t.config.signInAndUpFeature.signUpForm.formFields)];case 1:return a=o.sent(),a.length>0?[2,{status:"FIELD_ERROR",formFields:a}]:[4,t.recipeImplementation.signUp({formFields:i,shouldTryLinkingWithSessionUser:!1,userContext:n})];case 2:if(s=o.sent(),s.status==="SIGN_UP_NOT_ALLOWED")throw new ZPe.default(s.reason);return[2,s]}})})},validateOnBlur:!0,showLabels:!0,footer:t.footer})});function hRe(e){var t=wg.SuperTokens.getInstanceOrThrow().rootStyle,r=e.config.signInAndUpFeature.signUpForm.style;return lr.jsx(ra.UserContextWrapper,Tt.__assign({userContext:e.userContext},{children:lr.jsx(u4.ThemeBase,Tt.__assign({userStyles:[t,e.config.recipeRootStyle,r]},{children:lr.jsx(fRe,Tt.__assign({},e))}))}))}function pRe(e,t,r,n,i,a,s){var o=this,l=ra.useSessionContext(),c=yl.useMemo(function(){return e&&gRe(e.webJSRecipe)},[e]),d=Tt.useRethrowInRender(),f=yl.useCallback(function(p){return Tt.__awaiter(o,void 0,void 0,function(){var m;return Tt.__generator(this,function(x){switch(x.label){case 0:return x.trys.push([0,2,,3]),[4,ty.Session.getInstanceOrThrow().getAccessTokenPayloadSecurely({userContext:a})];case 1:return m=x.sent(),[3,3];case 2:return x.sent(),m=void 0,[3,3];case 3:return[2,t({createdNewUser:p.user.loginMethods.length===1,isNewRecipeUser:!0,newSessionCreated:l.loading||!l.doesSessionExist||m!==void 0&&l.accessTokenPayload.sessionHandle!==m.sessionHandle,recipeId:e.recipeID}).catch(d)]}})})},[e,a,s]);return yl.useMemo(function(){var p=e.config.signInAndUpFeature,m=p.signUpForm;return{recipeImplementation:c,config:e.config,styleFromInit:m.style,formFields:xRe(m.formFields,e,a),onFetchError:function(x){return Tt.__awaiter(o,void 0,void 0,function(){var v,b;return Tt.__generator(this,function(w){switch(w.label){case 0:return x.status!==ty.Session.getInstanceOrThrow().config.invalidClaimStatusCode?[3,5]:[4,Hae.getInvalidClaimsFromResponse({response:x,userContext:a})];case 1:if(v=w.sent(),!v.some(function(k){return k.id===$ae.EmailVerificationClaim.id}))return[3,5];w.label=2;case 2:return w.trys.push([2,4,,5]),b=zae.EmailVerification.getInstanceOrThrow(),[4,b.redirect({action:"VERIFY_EMAIL",tenantIdFromQueryParams:Tt.getTenantIdFromQueryParams()},s,void 0,a)];case 3:return w.sent(),[2];case 4:return w.sent(),[3,5];case 5:return n("SOMETHING_WENT_WRONG_ERROR"),[2]}})})},onSuccess:f,userContext:a,error:r,onError:n,clearError:i}},[e,r,a])}var mRe=function(e){var t=ra.useUserContext();e.userContext!==void 0&&(t=e.userContext);var r=pRe(e.recipe,e.onAuthSuccess,e.error,e.onError,e.clearError,t,e.navigate),n=e.useComponentOverrides();return lr.jsx(Uae.AuthComponentWrapper,Tt.__assign({recipeComponentOverrides:n},{children:lr.jsxs(yl.Fragment,{children:[e.children===void 0&&lr.jsx(hRe,Tt.__assign({},r)),e.children&&Wd.Children.map(e.children,function(i){return Wd.isValidElement(i)?Wd.cloneElement(i,Tt.__assign({},r)):i})]})}))},gRe=function(e){return Tt.__assign(Tt.__assign({},e),{signIn:function(t){return Tt.__awaiter(this,void 0,void 0,function(){var r;return Tt.__generator(this,function(n){switch(n.label){case 0:return[4,e.signIn(Tt.__assign(Tt.__assign({},t),{shouldTryLinkingWithSessionUser:!1}))];case 1:return r=n.sent(),[2,r]}})})},signUp:function(t){return Tt.__awaiter(this,void 0,void 0,function(){var r;return Tt.__generator(this,function(n){switch(n.label){case 0:return[4,e.signUp(Tt.__assign(Tt.__assign({},t),{shouldTryLinkingWithSessionUser:!1}))];case 1:return r=n.sent(),[2,r]}})})}})};function xRe(e,t,r){var n=this,i=e.length===2;return e.map(function(a){return Tt.__assign(Tt.__assign({},a),{showIsRequired:function(){return i?!1:a.optional===!1}(),validate:function(){return a.id!=="email"?a.validate:function(s){return Tt.__awaiter(n,void 0,void 0,function(){var o,l,c;return Tt.__generator(this,function(d){switch(d.label){case 0:return[4,a.validate(s)];case 1:if(o=d.sent(),o!==void 0)return[2,o];if(typeof s!="string")return[2,"GENERAL_ERROR_EMAIL_NON_STRING"];d.label=2;case 2:return d.trys.push([2,4,,5]),[4,t.webJSRecipe.doesEmailExist({email:s,userContext:r})];case 3:return l=d.sent().doesExist,l?[2,"EMAIL_PASSWORD_EMAIL_ALREADY_EXISTS"]:[3,5];case 4:return c=d.sent(),HA.default.isThisError(c)?[2,c.message]:[3,5];case 5:return[2,void 0]}})})}}()})})}var Wae=function(e){Tt.__extends(t,e);function t(r){var n=e.call(this)||this;return n.recipeInstance=r,n.languageTranslations=T6,n.getFeatures=function(i){i===void 0&&(i=b1.useContext);var a={};if(n.recipeInstance.config.resetPasswordUsingTokenFeature.disableDefaultUI!==!0){var s=n.recipeInstance.config.appInfo.websiteBasePath.appendPath(new JPe.default(YPe.DEFAULT_RESET_PASSWORD_PATH));a[s.getAsStringDangerous()]={matches:Tt.matchRecipeIdUsingQueryParams(n.recipeInstance.config.recipeId),component:function(o){return n.getFeatureComponent("resetpassword",o,i)},recipeID:A6.EmailPassword.RECIPE_ID}}return a},n.getFeatureComponent=function(i,a,s){if(s===void 0&&(s=b1.useContext),i==="resetpassword")return lr.jsx(ra.UserContextWrapper,Tt.__assign({userContext:a.userContext},{children:lr.jsx(sRe,Tt.__assign({recipe:n.recipeInstance},a,{useComponentOverrides:s}))}));throw new Error("Should never come here.")},n.requiresSignUpPage=!0,n}return t.getInstanceOrInitAndGetInstance=function(){if(t.instance===void 0){var r=A6.EmailPassword.getInstanceOrThrow();t.instance=new t(r)}return t.instance},t.getFeatures=function(r){return r===void 0&&(r=b1.useContext),t.getInstanceOrInitAndGetInstance().getFeatures(r)},t.getFeatureComponent=function(r,n,i){return i===void 0&&(i=b1.useContext),t.getInstanceOrInitAndGetInstance().getFeatureComponent(r,n,i)},t.prototype.getAuthComponents=function(){var r=this;return[{factorIds:[ty.FactorIds.EMAILPASSWORD],displayOrder:2,type:"SIGN_UP",component:function(n){return lr.jsx(mRe,Tt.__assign({recipe:r.recipeInstance,useComponentOverrides:b1.useContext},n),"emailpassword-sign-up")}},{factorIds:[ty.FactorIds.EMAILPASSWORD],displayOrder:2,type:"SIGN_IN",component:function(n){return lr.jsx(uRe,Tt.__assign({recipe:r.recipeInstance,useComponentOverrides:b1.useContext},n),"emailpassword-sign-in")}}]},t.reset=function(){Tt.isTest()&&(t.instance=void 0)},t.languageTranslations=T6,t.ResetPasswordUsingToken=function(r){return t.getInstanceOrInitAndGetInstance().getFeatureComponent("resetpassword",r)},t.ResetPasswordUsingTokenTheme=l7,t}(ra.RecipeRouter),vRe=Wae.ResetPasswordUsingToken;i4.EmailPasswordPreBuiltUI=Wae;i4.ResetPasswordUsingToken=vRe;i4.ResetPasswordUsingTokenTheme=l7;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(i4)})(gae);let yRe={data:""},bRe=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||yRe},wRe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,SRe=/\/\*[^]*?\*\/|  +/g,cq=/\n+/g,Hp=(e,t)=>{let r="",n="",i="";for(let a in e){let s=e[a];a[0]=="@"?a[1]=="i"?r=a+" "+s+";":n+=a[1]=="f"?Hp(s,a):a+"{"+Hp(s,a[1]=="k"?"":t)+"}":typeof s=="object"?n+=Hp(s,t?t.replace(/([^,])+/g,o=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,o):o?o+" "+l:l)):a):s!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Hp.p?Hp.p(a,s):a+":"+s+";")}return r+(t&&i?t+"{"+i+"}":i)+n},zf={},Vae=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+Vae(e[r]);return t}return e},ERe=(e,t,r,n,i)=>{let a=Vae(e),s=zf[a]||(zf[a]=(l=>{let c=0,d=11;for(;c<l.length;)d=101*d+l.charCodeAt(c++)>>>0;return"go"+d})(a));if(!zf[s]){let l=a!==e?e:(c=>{let d,f,p=[{}];for(;d=wRe.exec(c.replace(SRe,""));)d[4]?p.shift():d[3]?(f=d[3].replace(cq," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][d[1]]=d[2].replace(cq," ").trim();return p[0]})(e);zf[s]=Hp(i?{["@keyframes "+s]:l}:l,r?"":"."+s)}let o=r&&zf.g?zf.g:null;return r&&(zf.g=zf[s]),((l,c,d,f)=>{f?c.data=c.data.replace(f,l):c.data.indexOf(l)===-1&&(c.data=d?l+c.data:c.data+l)})(zf[s],t,n,o),s},CRe=(e,t,r)=>e.reduce((n,i,a)=>{let s=t[a];if(s&&s.call){let o=s(r),l=o&&o.props&&o.props.className||/^go/.test(o)&&o;s=l?"."+l:o&&typeof o=="object"?o.props?"":Hp(o,""):o===!1?"":o}return n+i+(s??"")},"");function f4(e){let t=this||{},r=e.call?e(t.p):e;return ERe(r.unshift?r.raw?CRe(r,[].slice.call(arguments,1),t.p):r.reduce((n,i)=>Object.assign(n,i&&i.call?i(t.p):i),{}):r,bRe(t.target),t.g,t.o,t.k)}let qae,I6,O6;f4.bind({g:1});let Ph=f4.bind({k:1});function kRe(e,t,r,n){Hp.p=t,qae=e,I6=r,O6=n}function q0(e,t){let r=this||{};return function(){let n=arguments;function i(a,s){let o=Object.assign({},a),l=o.className||i.className;r.p=Object.assign({theme:I6&&I6()},o),r.o=/ *go\d+/.test(l),o.className=f4.apply(r,n)+(l?" "+l:"");let c=e;return e[0]&&(c=o.as||e,delete o.as),O6&&c[0]&&O6(o),qae(c,o)}return i}}var _Re=e=>typeof e=="function",WA=(e,t)=>_Re(e)?e(t):e,NRe=(()=>{let e=0;return()=>(++e).toString()})(),Gae=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),ARe=20,c7="default",Kae=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case 2:let{toast:n}=t;return Kae(e,{type:e.toasts.find(s=>s.id===n.id)?1:0,toast:n});case 3:let{toastId:i}=t;return{...e,toasts:e.toasts.map(s=>s.id===i||i===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+a}))}}},jN=[],Xae={toasts:[],pausedAt:void 0,settings:{toastLimit:ARe}},Vd={},Yae=(e,t=c7)=>{Vd[t]=Kae(Vd[t]||Xae,e),jN.forEach(([r,n])=>{r===t&&n(Vd[t])})},Qae=e=>Object.keys(Vd).forEach(t=>Yae(e,t)),TRe=e=>Object.keys(Vd).find(t=>Vd[t].toasts.some(r=>r.id===e)),h4=(e=c7)=>t=>{Yae(t,e)},IRe={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},ORe=(e={},t=c7)=>{let[r,n]=I.useState(Vd[t]||Xae),i=I.useRef(Vd[t]);I.useEffect(()=>(i.current!==Vd[t]&&n(Vd[t]),jN.push([t,n]),()=>{let s=jN.findIndex(([o])=>o===t);s>-1&&jN.splice(s,1)}),[t]);let a=r.toasts.map(s=>{var o,l,c;return{...e,...e[s.type],...s,removeDelay:s.removeDelay||((o=e[s.type])==null?void 0:o.removeDelay)||(e==null?void 0:e.removeDelay),duration:s.duration||((l=e[s.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||IRe[s.type],style:{...e.style,...(c=e[s.type])==null?void 0:c.style,...s.style}}});return{...r,toasts:a}},PRe=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||NRe()}),LE=e=>(t,r)=>{let n=PRe(t,e,r);return h4(n.toasterId||TRe(n.id))({type:2,toast:n}),n.id},Re=(e,t)=>LE("blank")(e,t);Re.error=LE("error");Re.success=LE("success");Re.loading=LE("loading");Re.custom=LE("custom");Re.dismiss=(e,t)=>{let r={type:3,toastId:e};t?h4(t)(r):Qae(r)};Re.dismissAll=e=>Re.dismiss(void 0,e);Re.remove=(e,t)=>{let r={type:4,toastId:e};t?h4(t)(r):Qae(r)};Re.removeAll=e=>Re.remove(void 0,e);Re.promise=(e,t,r)=>{let n=Re.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(i=>{let a=t.success?WA(t.success,i):void 0;return a?Re.success(a,{id:n,...r,...r==null?void 0:r.success}):Re.dismiss(n),i}).catch(i=>{let a=t.error?WA(t.error,i):void 0;a?Re.error(a,{id:n,...r,...r==null?void 0:r.error}):Re.dismiss(n)}),e};var RRe=1e3,Jae=(e,t="default")=>{let{toasts:r,pausedAt:n}=ORe(e,t),i=I.useRef(new Map).current,a=I.useCallback((f,p=RRe)=>{if(i.has(f))return;let m=setTimeout(()=>{i.delete(f),s({type:4,toastId:f})},p);i.set(f,m)},[]);I.useEffect(()=>{if(n)return;let f=Date.now(),p=r.map(m=>{if(m.duration===1/0)return;let x=(m.duration||0)+m.pauseDuration-(f-m.createdAt);if(x<0){m.visible&&Re.dismiss(m.id);return}return setTimeout(()=>Re.dismiss(m.id,t),x)});return()=>{p.forEach(m=>m&&clearTimeout(m))}},[r,n,t]);let s=I.useCallback(h4(t),[t]),o=I.useCallback(()=>{s({type:5,time:Date.now()})},[s]),l=I.useCallback((f,p)=>{s({type:1,toast:{id:f,height:p}})},[s]),c=I.useCallback(()=>{n&&s({type:6,time:Date.now()})},[n,s]),d=I.useCallback((f,p)=>{let{reverseOrder:m=!1,gutter:x=8,defaultPosition:v}=p||{},b=r.filter(E=>(E.position||v)===(f.position||v)&&E.height),w=b.findIndex(E=>E.id===f.id),k=b.filter((E,N)=>N<w&&E.visible).length;return b.filter(E=>E.visible).slice(...m?[k+1]:[0,k]).reduce((E,N)=>E+(N.height||0)+x,0)},[r]);return I.useEffect(()=>{r.forEach(f=>{if(f.dismissed)a(f.id,f.removeDelay);else{let p=i.get(f.id);p&&(clearTimeout(p),i.delete(f.id))}})},[r,a]),{toasts:r,handlers:{updateHeight:l,startPause:o,endPause:c,calculateOffset:d}}},jRe=Ph`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,DRe=Ph`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,MRe=Ph`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,FRe=q0("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${jRe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${DRe} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${MRe} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,LRe=Ph`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,BRe=q0("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${LRe} 1s linear infinite;
`,URe=Ph`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,$Re=Ph`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,zRe=q0("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${URe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${$Re} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,HRe=q0("div")`
  position: absolute;
`,WRe=q0("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,VRe=Ph`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,qRe=q0("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${VRe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,GRe=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?I.createElement(qRe,null,t):t:r==="blank"?null:I.createElement(WRe,null,I.createElement(BRe,{...n}),r!=="loading"&&I.createElement(HRe,null,r==="error"?I.createElement(FRe,{...n}):I.createElement(zRe,{...n})))},KRe=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,XRe=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,YRe="0%{opacity:0;} 100%{opacity:1;}",QRe="0%{opacity:1;} 100%{opacity:0;}",JRe=q0("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,ZRe=q0("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,eje=(e,t)=>{let r=e.includes("top")?1:-1,[n,i]=Gae()?[YRe,QRe]:[KRe(r),XRe(r)];return{animation:t?`${Ph(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ph(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},tje=I.memo(({toast:e,position:t,style:r,children:n})=>{let i=e.height?eje(e.position||t||"top-center",e.visible):{opacity:0},a=I.createElement(GRe,{toast:e}),s=I.createElement(ZRe,{...e.ariaProps},WA(e.message,e));return I.createElement(JRe,{className:e.className,style:{...i,...r,...e.style}},typeof n=="function"?n({icon:a,message:s}):I.createElement(I.Fragment,null,a,s))});kRe(I.createElement);var rje=({id:e,className:t,style:r,onHeightUpdate:n,children:i})=>{let a=I.useCallback(s=>{if(s){let o=()=>{let l=s.getBoundingClientRect().height;n(e,l)};o(),new MutationObserver(o).observe(s,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return I.createElement("div",{ref:a,className:t,style:r},i)},nje=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Gae()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...i}},ije=f4`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,f_=16,aje=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:i,toasterId:a,containerStyle:s,containerClassName:o})=>{let{toasts:l,handlers:c}=Jae(r,a);return I.createElement("div",{"data-rht-toaster":a||"",style:{position:"fixed",zIndex:9999,top:f_,left:f_,right:f_,bottom:f_,pointerEvents:"none",...s},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(d=>{let f=d.position||t,p=c.calculateOffset(d,{reverseOrder:e,gutter:n,defaultPosition:t}),m=nje(f,p);return I.createElement(rje,{id:d.id,key:d.id,onHeightUpdate:c.updateHeight,className:d.visible?ije:"",style:m},d.type==="custom"?WA(d.message,d):i?i(d):I.createElement(tje,{toast:d,position:f}))}))},qr=Re,rb=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},sje={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Gp,S5,Xee,oje=(Xee=class{constructor(){hr(this,Gp,sje);hr(this,S5,!1)}setTimeoutProvider(e){Wt(this,Gp,e)}setTimeout(e,t){return Le(this,Gp).setTimeout(e,t)}clearTimeout(e){Le(this,Gp).clearTimeout(e)}setInterval(e,t){return Le(this,Gp).setInterval(e,t)}clearInterval(e){Le(this,Gp).clearInterval(e)}},Gp=new WeakMap,S5=new WeakMap,Xee),Qm=new oje;function lje(e){setTimeout(e,0)}var qg=typeof window>"u"||"Deno"in globalThis;function Ro(){}function cje(e,t){return typeof e=="function"?e(t):e}function P6(e){return typeof e=="number"&&e>=0&&e!==1/0}function Zae(e,t){return Math.max(e+(t||0)-Date.now(),0)}function v0(e,t){return typeof e=="function"?e(t):e}function zc(e,t){return typeof e=="function"?e(t):e}function uq(e,t){const{type:r="all",exact:n,fetchStatus:i,predicate:a,queryKey:s,stale:o}=e;if(s){if(n){if(t.queryHash!==u7(s,t.options))return!1}else if(!lS(t.queryKey,s))return!1}if(r!=="all"){const l=t.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||i&&i!==t.state.fetchStatus||a&&!a(t))}function dq(e,t){const{exact:r,status:n,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(r){if(Gg(t.options.mutationKey)!==Gg(a))return!1}else if(!lS(t.options.mutationKey,a))return!1}return!(n&&t.state.status!==n||i&&!i(t))}function u7(e,t){return((t==null?void 0:t.queryKeyHashFn)||Gg)(e)}function Gg(e){return JSON.stringify(e,(t,r)=>R6(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function lS(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>lS(e[r],t[r])):!1}var uje=Object.prototype.hasOwnProperty;function ese(e,t){if(e===t)return e;const r=fq(e)&&fq(t);if(!r&&!(R6(e)&&R6(t)))return t;const i=(r?e:Object.keys(e)).length,a=r?t:Object.keys(t),s=a.length,o=r?new Array(s):{};let l=0;for(let c=0;c<s;c++){const d=r?c:a[c],f=e[d],p=t[d];if(f===p){o[d]=f,(r?c<i:uje.call(e,d))&&l++;continue}if(f===null||p===null||typeof f!="object"||typeof p!="object"){o[d]=p;continue}const m=ese(f,p);o[d]=m,m===f&&l++}return i===s&&l===i?e:o}function VA(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function fq(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function R6(e){if(!hq(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!hq(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function hq(e){return Object.prototype.toString.call(e)==="[object Object]"}function dje(e){return new Promise(t=>{Qm.setTimeout(t,e)})}function j6(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?ese(e,t):t}function fje(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function hje(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var d7=Symbol();function tse(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===d7?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function rse(e,t){return typeof e=="function"?e(...t):!!e}var cg,Kp,Ov,Yee,pje=(Yee=class extends rb{constructor(){super();hr(this,cg);hr(this,Kp);hr(this,Ov);Wt(this,Ov,t=>{if(!qg&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Le(this,Kp)||this.setEventListener(Le(this,Ov))}onUnsubscribe(){var t;this.hasListeners()||((t=Le(this,Kp))==null||t.call(this),Wt(this,Kp,void 0))}setEventListener(t){var r;Wt(this,Ov,t),(r=Le(this,Kp))==null||r.call(this),Wt(this,Kp,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){Le(this,cg)!==t&&(Wt(this,cg,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Le(this,cg)=="boolean"?Le(this,cg):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},cg=new WeakMap,Kp=new WeakMap,Ov=new WeakMap,Yee),f7=new pje;function D6(){let e,t;const r=new Promise((i,a)=>{e=i,t=a});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),e(i)},r.reject=i=>{n({status:"rejected",reason:i}),t(i)},r}var mje=lje;function gje(){let e=[],t=0,r=o=>{o()},n=o=>{o()},i=mje;const a=o=>{t?e.push(o):i(()=>{r(o)})},s=()=>{const o=e;e=[],o.length&&i(()=>{n(()=>{o.forEach(l=>{r(l)})})})};return{batch:o=>{let l;t++;try{l=o()}finally{t--,t||s()}return l},batchCalls:o=>(...l)=>{a(()=>{o(...l)})},schedule:a,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{i=o}}}var za=gje(),Pv,Xp,Rv,Qee,xje=(Qee=class extends rb{constructor(){super();hr(this,Pv,!0);hr(this,Xp);hr(this,Rv);Wt(this,Rv,t=>{if(!qg&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){Le(this,Xp)||this.setEventListener(Le(this,Rv))}onUnsubscribe(){var t;this.hasListeners()||((t=Le(this,Xp))==null||t.call(this),Wt(this,Xp,void 0))}setEventListener(t){var r;Wt(this,Rv,t),(r=Le(this,Xp))==null||r.call(this),Wt(this,Xp,t(this.setOnline.bind(this)))}setOnline(t){Le(this,Pv)!==t&&(Wt(this,Pv,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return Le(this,Pv)}},Pv=new WeakMap,Xp=new WeakMap,Rv=new WeakMap,Qee),qA=new xje;function vje(e){return Math.min(1e3*2**e,3e4)}function nse(e){return(e??"online")==="online"?qA.isOnline():!0}var M6=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function ise(e){let t=!1,r=0,n;const i=D6(),a=()=>i.status!=="pending",s=v=>{var b;if(!a()){const w=new M6(v);p(w),(b=e.onCancel)==null||b.call(e,w)}},o=()=>{t=!0},l=()=>{t=!1},c=()=>f7.isFocused()&&(e.networkMode==="always"||qA.isOnline())&&e.canRun(),d=()=>nse(e.networkMode)&&e.canRun(),f=v=>{a()||(n==null||n(),i.resolve(v))},p=v=>{a()||(n==null||n(),i.reject(v))},m=()=>new Promise(v=>{var b;n=w=>{(a()||c())&&v(w)},(b=e.onPause)==null||b.call(e)}).then(()=>{var v;n=void 0,a()||(v=e.onContinue)==null||v.call(e)}),x=()=>{if(a())return;let v;const b=r===0?e.initialPromise:void 0;try{v=b??e.fn()}catch(w){v=Promise.reject(w)}Promise.resolve(v).then(f).catch(w=>{var R;if(a())return;const k=e.retry??(qg?0:3),E=e.retryDelay??vje,N=typeof E=="function"?E(r,w):E,P=k===!0||typeof k=="number"&&r<k||typeof k=="function"&&k(r,w);if(t||!P){p(w);return}r++,(R=e.onFail)==null||R.call(e,r,w),dje(N).then(()=>c()?void 0:m()).then(()=>{t?p(w):x()})})};return{promise:i,status:()=>i.status,cancel:s,continue:()=>(n==null||n(),i),cancelRetry:o,continueRetry:l,canStart:d,start:()=>(d()?x():m().then(x),i)}}var ug,Jee,ase=(Jee=class{constructor(){hr(this,ug)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),P6(this.gcTime)&&Wt(this,ug,Qm.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(qg?1/0:5*60*1e3))}clearGcTimeout(){Le(this,ug)&&(Qm.clearTimeout(Le(this,ug)),Wt(this,ug,void 0))}},ug=new WeakMap,Jee),dg,jv,Bc,fg,is,aE,hg,Mu,Gf,Zee,yje=(Zee=class extends ase{constructor(t){super();hr(this,Mu);hr(this,dg);hr(this,jv);hr(this,Bc);hr(this,fg);hr(this,is);hr(this,aE);hr(this,hg);Wt(this,hg,!1),Wt(this,aE,t.defaultOptions),this.setOptions(t.options),this.observers=[],Wt(this,fg,t.client),Wt(this,Bc,Le(this,fg).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Wt(this,dg,mq(this.options)),this.state=t.state??Le(this,dg),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Le(this,is))==null?void 0:t.promise}setOptions(t){if(this.options={...Le(this,aE),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=mq(this.options);r.data!==void 0&&(this.setState(pq(r.data,r.dataUpdatedAt)),Wt(this,dg,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Le(this,Bc).remove(this)}setData(t,r){const n=j6(this.state.data,t,this.options);return ln(this,Mu,Gf).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){ln(this,Mu,Gf).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,i;const r=(n=Le(this,is))==null?void 0:n.promise;return(i=Le(this,is))==null||i.cancel(t),r?r.then(Ro).catch(Ro):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Le(this,dg))}isActive(){return this.observers.some(t=>zc(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===d7||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>v0(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Zae(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Le(this,is))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Le(this,is))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Le(this,Bc).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Le(this,is)&&(Le(this,hg)?Le(this,is).cancel({revert:!0}):Le(this,is).cancelRetry()),this.scheduleGc()),Le(this,Bc).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ln(this,Mu,Gf).call(this,{type:"invalidate"})}async fetch(t,r){var l,c,d,f,p,m,x,v,b,w,k,E;if(this.state.fetchStatus!=="idle"&&((l=Le(this,is))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Le(this,is))return Le(this,is).continueRetry(),Le(this,is).promise}if(t&&this.setOptions(t),!this.options.queryFn){const N=this.observers.find(P=>P.options.queryFn);N&&this.setOptions(N.options)}const n=new AbortController,i=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(Wt(this,hg,!0),n.signal)})},a=()=>{const N=tse(this.options,r),R=(()=>{const O={client:Le(this,fg),queryKey:this.queryKey,meta:this.meta};return i(O),O})();return Wt(this,hg,!1),this.options.persister?this.options.persister(N,R,this):N(R)},o=(()=>{const N={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Le(this,fg),state:this.state,fetchFn:a};return i(N),N})();(c=this.options.behavior)==null||c.onFetch(o,this),Wt(this,jv,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&ln(this,Mu,Gf).call(this,{type:"fetch",meta:(f=o.fetchOptions)==null?void 0:f.meta}),Wt(this,is,ise({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,onCancel:N=>{N instanceof M6&&N.revert&&this.setState({...Le(this,jv),fetchStatus:"idle"}),n.abort()},onFail:(N,P)=>{ln(this,Mu,Gf).call(this,{type:"failed",failureCount:N,error:P})},onPause:()=>{ln(this,Mu,Gf).call(this,{type:"pause"})},onContinue:()=>{ln(this,Mu,Gf).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const N=await Le(this,is).start();if(N===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(N),(m=(p=Le(this,Bc).config).onSuccess)==null||m.call(p,N,this),(v=(x=Le(this,Bc).config).onSettled)==null||v.call(x,N,this.state.error,this),N}catch(N){if(N instanceof M6){if(N.silent)return Le(this,is).promise;if(N.revert){if(this.state.data===void 0)throw N;return this.state.data}}throw ln(this,Mu,Gf).call(this,{type:"error",error:N}),(w=(b=Le(this,Bc).config).onError)==null||w.call(b,N,this),(E=(k=Le(this,Bc).config).onSettled)==null||E.call(k,this.state.data,N,this),N}finally{this.scheduleGc()}}},dg=new WeakMap,jv=new WeakMap,Bc=new WeakMap,fg=new WeakMap,is=new WeakMap,aE=new WeakMap,hg=new WeakMap,Mu=new WeakSet,Gf=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...sse(n.data,this.options),fetchMeta:t.meta??null};case"success":const i={...n,...pq(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Wt(this,jv,t.manual?i:void 0),i;case"error":const a=t.error;return{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),za.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),Le(this,Bc).notify({query:this,type:"updated",action:t})})},Zee);function sse(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:nse(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function pq(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function mq(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var al,Tn,sE,Io,pg,Dv,eh,Yp,oE,Mv,Fv,mg,gg,Qp,Lv,Gn,$w,F6,L6,B6,U6,$6,z6,H6,ose,ete,bje=(ete=class extends rb{constructor(t,r){super();hr(this,Gn);hr(this,al);hr(this,Tn);hr(this,sE);hr(this,Io);hr(this,pg);hr(this,Dv);hr(this,eh);hr(this,Yp);hr(this,oE);hr(this,Mv);hr(this,Fv);hr(this,mg);hr(this,gg);hr(this,Qp);hr(this,Lv,new Set);this.options=r,Wt(this,al,t),Wt(this,Yp,null),Wt(this,eh,D6()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Le(this,Tn).addObserver(this),gq(Le(this,Tn),this.options)?ln(this,Gn,$w).call(this):this.updateResult(),ln(this,Gn,U6).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return W6(Le(this,Tn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return W6(Le(this,Tn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ln(this,Gn,$6).call(this),ln(this,Gn,z6).call(this),Le(this,Tn).removeObserver(this)}setOptions(t){const r=this.options,n=Le(this,Tn);if(this.options=Le(this,al).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof zc(this.options.enabled,Le(this,Tn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ln(this,Gn,H6).call(this),Le(this,Tn).setOptions(this.options),r._defaulted&&!VA(this.options,r)&&Le(this,al).getQueryCache().notify({type:"observerOptionsUpdated",query:Le(this,Tn),observer:this});const i=this.hasListeners();i&&xq(Le(this,Tn),n,this.options,r)&&ln(this,Gn,$w).call(this),this.updateResult(),i&&(Le(this,Tn)!==n||zc(this.options.enabled,Le(this,Tn))!==zc(r.enabled,Le(this,Tn))||v0(this.options.staleTime,Le(this,Tn))!==v0(r.staleTime,Le(this,Tn)))&&ln(this,Gn,F6).call(this);const a=ln(this,Gn,L6).call(this);i&&(Le(this,Tn)!==n||zc(this.options.enabled,Le(this,Tn))!==zc(r.enabled,Le(this,Tn))||a!==Le(this,Qp))&&ln(this,Gn,B6).call(this,a)}getOptimisticResult(t){const r=Le(this,al).getQueryCache().build(Le(this,al),t),n=this.createResult(r,t);return Sje(this,n)&&(Wt(this,Io,n),Wt(this,Dv,this.options),Wt(this,pg,Le(this,Tn).state)),n}getCurrentResult(){return Le(this,Io)}trackResult(t,r){return new Proxy(t,{get:(n,i)=>(this.trackProp(i),r==null||r(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&Le(this,eh).status==="pending"&&Le(this,eh).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(t){Le(this,Lv).add(t)}getCurrentQuery(){return Le(this,Tn)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=Le(this,al).defaultQueryOptions(t),n=Le(this,al).getQueryCache().build(Le(this,al),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return ln(this,Gn,$w).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),Le(this,Io)))}createResult(t,r){var L;const n=Le(this,Tn),i=this.options,a=Le(this,Io),s=Le(this,pg),o=Le(this,Dv),c=t!==n?t.state:Le(this,sE),{state:d}=t;let f={...d},p=!1,m;if(r._optimisticResults){const B=this.hasListeners(),z=!B&&gq(t,r),H=B&&xq(t,n,r,i);(z||H)&&(f={...f,...sse(d.data,t.options)}),r._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:x,errorUpdatedAt:v,status:b}=f;m=f.data;let w=!1;if(r.placeholderData!==void 0&&m===void 0&&b==="pending"){let B;a!=null&&a.isPlaceholderData&&r.placeholderData===(o==null?void 0:o.placeholderData)?(B=a.data,w=!0):B=typeof r.placeholderData=="function"?r.placeholderData((L=Le(this,Fv))==null?void 0:L.state.data,Le(this,Fv)):r.placeholderData,B!==void 0&&(b="success",m=j6(a==null?void 0:a.data,B,r),p=!0)}if(r.select&&m!==void 0&&!w)if(a&&m===(s==null?void 0:s.data)&&r.select===Le(this,oE))m=Le(this,Mv);else try{Wt(this,oE,r.select),m=r.select(m),m=j6(a==null?void 0:a.data,m,r),Wt(this,Mv,m),Wt(this,Yp,null)}catch(B){Wt(this,Yp,B)}Le(this,Yp)&&(x=Le(this,Yp),m=Le(this,Mv),v=Date.now(),b="error");const k=f.fetchStatus==="fetching",E=b==="pending",N=b==="error",P=E&&k,R=m!==void 0,D={status:b,fetchStatus:f.fetchStatus,isPending:E,isSuccess:b==="success",isError:N,isInitialLoading:P,isLoading:P,data:m,dataUpdatedAt:f.dataUpdatedAt,error:x,errorUpdatedAt:v,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>c.dataUpdateCount||f.errorUpdateCount>c.errorUpdateCount,isFetching:k,isRefetching:k&&!E,isLoadingError:N&&!R,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:N&&R,isStale:h7(t,r),refetch:this.refetch,promise:Le(this,eh),isEnabled:zc(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const B=te=>{D.status==="error"?te.reject(D.error):D.data!==void 0&&te.resolve(D.data)},z=()=>{const te=Wt(this,eh,D.promise=D6());B(te)},H=Le(this,eh);switch(H.status){case"pending":t.queryHash===n.queryHash&&B(H);break;case"fulfilled":(D.status==="error"||D.data!==H.value)&&z();break;case"rejected":(D.status!=="error"||D.error!==H.reason)&&z();break}}return D}updateResult(){const t=Le(this,Io),r=this.createResult(Le(this,Tn),this.options);if(Wt(this,pg,Le(this,Tn).state),Wt(this,Dv,this.options),Le(this,pg).data!==void 0&&Wt(this,Fv,Le(this,Tn)),VA(r,t))return;Wt(this,Io,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!Le(this,Lv).size)return!0;const s=new Set(a??Le(this,Lv));return this.options.throwOnError&&s.add("error"),Object.keys(Le(this,Io)).some(o=>{const l=o;return Le(this,Io)[l]!==t[l]&&s.has(l)})};ln(this,Gn,ose).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ln(this,Gn,U6).call(this)}},al=new WeakMap,Tn=new WeakMap,sE=new WeakMap,Io=new WeakMap,pg=new WeakMap,Dv=new WeakMap,eh=new WeakMap,Yp=new WeakMap,oE=new WeakMap,Mv=new WeakMap,Fv=new WeakMap,mg=new WeakMap,gg=new WeakMap,Qp=new WeakMap,Lv=new WeakMap,Gn=new WeakSet,$w=function(t){ln(this,Gn,H6).call(this);let r=Le(this,Tn).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Ro)),r},F6=function(){ln(this,Gn,$6).call(this);const t=v0(this.options.staleTime,Le(this,Tn));if(qg||Le(this,Io).isStale||!P6(t))return;const n=Zae(Le(this,Io).dataUpdatedAt,t)+1;Wt(this,mg,Qm.setTimeout(()=>{Le(this,Io).isStale||this.updateResult()},n))},L6=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Le(this,Tn)):this.options.refetchInterval)??!1},B6=function(t){ln(this,Gn,z6).call(this),Wt(this,Qp,t),!(qg||zc(this.options.enabled,Le(this,Tn))===!1||!P6(Le(this,Qp))||Le(this,Qp)===0)&&Wt(this,gg,Qm.setInterval(()=>{(this.options.refetchIntervalInBackground||f7.isFocused())&&ln(this,Gn,$w).call(this)},Le(this,Qp)))},U6=function(){ln(this,Gn,F6).call(this),ln(this,Gn,B6).call(this,ln(this,Gn,L6).call(this))},$6=function(){Le(this,mg)&&(Qm.clearTimeout(Le(this,mg)),Wt(this,mg,void 0))},z6=function(){Le(this,gg)&&(Qm.clearInterval(Le(this,gg)),Wt(this,gg,void 0))},H6=function(){const t=Le(this,al).getQueryCache().build(Le(this,al),this.options);if(t===Le(this,Tn))return;const r=Le(this,Tn);Wt(this,Tn,t),Wt(this,sE,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},ose=function(t){za.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(Le(this,Io))}),Le(this,al).getQueryCache().notify({query:Le(this,Tn),type:"observerResultsUpdated"})})},ete);function wje(e,t){return zc(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function gq(e,t){return wje(e,t)||e.state.data!==void 0&&W6(e,t,t.refetchOnMount)}function W6(e,t,r){if(zc(t.enabled,e)!==!1&&v0(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&h7(e,t)}return!1}function xq(e,t,r,n){return(e!==t||zc(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&h7(e,r)}function h7(e,t){return zc(t.enabled,e)!==!1&&e.isStaleByTime(v0(t.staleTime,e))}function Sje(e,t){return!VA(e.getCurrentResult(),t)}function vq(e){return{onFetch:(t,r)=>{var d,f,p,m,x;const n=t.options,i=(p=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,a=((m=t.state.data)==null?void 0:m.pages)||[],s=((x=t.state.data)==null?void 0:x.pageParams)||[];let o={pages:[],pageParams:[]},l=0;const c=async()=>{let v=!1;const b=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},w=tse(t.options,t.fetchOptions),k=async(E,N,P)=>{if(v)return Promise.reject();if(N==null&&E.pages.length)return Promise.resolve(E);const O=(()=>{const z={client:t.client,queryKey:t.queryKey,pageParam:N,direction:P?"backward":"forward",meta:t.options.meta};return b(z),z})(),D=await w(O),{maxPages:L}=t.options,B=P?hje:fje;return{pages:B(E.pages,D,L),pageParams:B(E.pageParams,N,L)}};if(i&&a.length){const E=i==="backward",N=E?Eje:yq,P={pages:a,pageParams:s},R=N(n,P);o=await k(P,R,E)}else{const E=e??a.length;do{const N=l===0?s[0]??n.initialPageParam:yq(n,o);if(l>0&&N==null)break;o=await k(o,N),l++}while(l<E)}return o};t.options.persister?t.fetchFn=()=>{var v,b;return(b=(v=t.options).persister)==null?void 0:b.call(v,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=c}}}function yq(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function Eje(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var lE,jd,Oo,xg,Dd,Ip,tte,Cje=(tte=class extends ase{constructor(t){super();hr(this,Dd);hr(this,lE);hr(this,jd);hr(this,Oo);hr(this,xg);Wt(this,lE,t.client),this.mutationId=t.mutationId,Wt(this,Oo,t.mutationCache),Wt(this,jd,[]),this.state=t.state||lse(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Le(this,jd).includes(t)||(Le(this,jd).push(t),this.clearGcTimeout(),Le(this,Oo).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Wt(this,jd,Le(this,jd).filter(r=>r!==t)),this.scheduleGc(),Le(this,Oo).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Le(this,jd).length||(this.state.status==="pending"?this.scheduleGc():Le(this,Oo).remove(this))}continue(){var t;return((t=Le(this,xg))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,o,l,c,d,f,p,m,x,v,b,w,k,E,N,P,R,O,D,L;const r=()=>{ln(this,Dd,Ip).call(this,{type:"continue"})},n={client:Le(this,lE),meta:this.options.meta,mutationKey:this.options.mutationKey};Wt(this,xg,ise({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(B,z)=>{ln(this,Dd,Ip).call(this,{type:"failed",failureCount:B,error:z})},onPause:()=>{ln(this,Dd,Ip).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Le(this,Oo).canRun(this)}));const i=this.state.status==="pending",a=!Le(this,xg).canStart();try{if(i)r();else{ln(this,Dd,Ip).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(s=Le(this,Oo).config).onMutate)==null?void 0:o.call(s,t,this,n));const z=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t,n));z!==this.state.context&&ln(this,Dd,Ip).call(this,{type:"pending",context:z,variables:t,isPaused:a})}const B=await Le(this,xg).start();return await((f=(d=Le(this,Oo).config).onSuccess)==null?void 0:f.call(d,B,t,this.state.context,this,n)),await((m=(p=this.options).onSuccess)==null?void 0:m.call(p,B,t,this.state.context,n)),await((v=(x=Le(this,Oo).config).onSettled)==null?void 0:v.call(x,B,null,this.state.variables,this.state.context,this,n)),await((w=(b=this.options).onSettled)==null?void 0:w.call(b,B,null,t,this.state.context,n)),ln(this,Dd,Ip).call(this,{type:"success",data:B}),B}catch(B){try{throw await((E=(k=Le(this,Oo).config).onError)==null?void 0:E.call(k,B,t,this.state.context,this,n)),await((P=(N=this.options).onError)==null?void 0:P.call(N,B,t,this.state.context,n)),await((O=(R=Le(this,Oo).config).onSettled)==null?void 0:O.call(R,void 0,B,this.state.variables,this.state.context,this,n)),await((L=(D=this.options).onSettled)==null?void 0:L.call(D,void 0,B,t,this.state.context,n)),B}finally{ln(this,Dd,Ip).call(this,{type:"error",error:B})}}finally{Le(this,Oo).runNext(this)}}},lE=new WeakMap,jd=new WeakMap,Oo=new WeakMap,xg=new WeakMap,Dd=new WeakSet,Ip=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),za.batch(()=>{Le(this,jd).forEach(n=>{n.onMutationUpdate(t)}),Le(this,Oo).notify({mutation:this,type:"updated",action:t})})},tte);function lse(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var th,Fu,cE,rte,kje=(rte=class extends rb{constructor(t={}){super();hr(this,th);hr(this,Fu);hr(this,cE);this.config=t,Wt(this,th,new Set),Wt(this,Fu,new Map),Wt(this,cE,0)}build(t,r,n){const i=new Cje({client:t,mutationCache:this,mutationId:++Dk(this,cE)._,options:t.defaultMutationOptions(r),state:n});return this.add(i),i}add(t){Le(this,th).add(t);const r=h_(t);if(typeof r=="string"){const n=Le(this,Fu).get(r);n?n.push(t):Le(this,Fu).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Le(this,th).delete(t)){const r=h_(t);if(typeof r=="string"){const n=Le(this,Fu).get(r);if(n)if(n.length>1){const i=n.indexOf(t);i!==-1&&n.splice(i,1)}else n[0]===t&&Le(this,Fu).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=h_(t);if(typeof r=="string"){const n=Le(this,Fu).get(r),i=n==null?void 0:n.find(a=>a.state.status==="pending");return!i||i===t}else return!0}runNext(t){var n;const r=h_(t);if(typeof r=="string"){const i=(n=Le(this,Fu).get(r))==null?void 0:n.find(a=>a!==t&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){za.batch(()=>{Le(this,th).forEach(t=>{this.notify({type:"removed",mutation:t})}),Le(this,th).clear(),Le(this,Fu).clear()})}getAll(){return Array.from(Le(this,th))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>dq(r,n))}findAll(t={}){return this.getAll().filter(r=>dq(t,r))}notify(t){za.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return za.batch(()=>Promise.all(t.map(r=>r.continue().catch(Ro))))}},th=new WeakMap,Fu=new WeakMap,cE=new WeakMap,rte);function h_(e){var t;return(t=e.options.scope)==null?void 0:t.id}var rh,Jp,sl,nh,_h,DN,V6,nte,_je=(nte=class extends rb{constructor(r,n){super();hr(this,_h);hr(this,rh);hr(this,Jp);hr(this,sl);hr(this,nh);Wt(this,rh,r),this.setOptions(n),this.bindMethods(),ln(this,_h,DN).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var i;const n=this.options;this.options=Le(this,rh).defaultMutationOptions(r),VA(this.options,n)||Le(this,rh).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Le(this,sl),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Gg(n.mutationKey)!==Gg(this.options.mutationKey)?this.reset():((i=Le(this,sl))==null?void 0:i.state.status)==="pending"&&Le(this,sl).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=Le(this,sl))==null||r.removeObserver(this)}onMutationUpdate(r){ln(this,_h,DN).call(this),ln(this,_h,V6).call(this,r)}getCurrentResult(){return Le(this,Jp)}reset(){var r;(r=Le(this,sl))==null||r.removeObserver(this),Wt(this,sl,void 0),ln(this,_h,DN).call(this),ln(this,_h,V6).call(this)}mutate(r,n){var i;return Wt(this,nh,n),(i=Le(this,sl))==null||i.removeObserver(this),Wt(this,sl,Le(this,rh).getMutationCache().build(Le(this,rh),this.options)),Le(this,sl).addObserver(this),Le(this,sl).execute(r)}},rh=new WeakMap,Jp=new WeakMap,sl=new WeakMap,nh=new WeakMap,_h=new WeakSet,DN=function(){var n;const r=((n=Le(this,sl))==null?void 0:n.state)??lse();Wt(this,Jp,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},V6=function(r){za.batch(()=>{var n,i,a,s,o,l,c,d;if(Le(this,nh)&&this.hasListeners()){const f=Le(this,Jp).variables,p=Le(this,Jp).context,m={client:Le(this,rh),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((i=(n=Le(this,nh)).onSuccess)==null||i.call(n,r.data,f,p,m),(s=(a=Le(this,nh)).onSettled)==null||s.call(a,r.data,null,f,p,m)):(r==null?void 0:r.type)==="error"&&((l=(o=Le(this,nh)).onError)==null||l.call(o,r.error,f,p,m),(d=(c=Le(this,nh)).onSettled)==null||d.call(c,void 0,r.error,f,p,m))}this.listeners.forEach(f=>{f(Le(this,Jp))})})},nte),Md,ite,Nje=(ite=class extends rb{constructor(t={}){super();hr(this,Md);this.config=t,Wt(this,Md,new Map)}build(t,r,n){const i=r.queryKey,a=r.queryHash??u7(i,r);let s=this.get(a);return s||(s=new yje({client:t,queryKey:i,queryHash:a,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(i)}),this.add(s)),s}add(t){Le(this,Md).has(t.queryHash)||(Le(this,Md).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Le(this,Md).get(t.queryHash);r&&(t.destroy(),r===t&&Le(this,Md).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){za.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Le(this,Md).get(t)}getAll(){return[...Le(this,Md).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>uq(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>uq(t,n)):r}notify(t){za.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){za.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){za.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Md=new WeakMap,ite),Qi,Zp,e0,Bv,Uv,t0,$v,zv,ate,Aje=(ate=class{constructor(e={}){hr(this,Qi);hr(this,Zp);hr(this,e0);hr(this,Bv);hr(this,Uv);hr(this,t0);hr(this,$v);hr(this,zv);Wt(this,Qi,e.queryCache||new Nje),Wt(this,Zp,e.mutationCache||new kje),Wt(this,e0,e.defaultOptions||{}),Wt(this,Bv,new Map),Wt(this,Uv,new Map),Wt(this,t0,0)}mount(){Dk(this,t0)._++,Le(this,t0)===1&&(Wt(this,$v,f7.subscribe(async e=>{e&&(await this.resumePausedMutations(),Le(this,Qi).onFocus())})),Wt(this,zv,qA.subscribe(async e=>{e&&(await this.resumePausedMutations(),Le(this,Qi).onOnline())})))}unmount(){var e,t;Dk(this,t0)._--,Le(this,t0)===0&&((e=Le(this,$v))==null||e.call(this),Wt(this,$v,void 0),(t=Le(this,zv))==null||t.call(this),Wt(this,zv,void 0))}isFetching(e){return Le(this,Qi).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Le(this,Zp).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Le(this,Qi).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=Le(this,Qi).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(v0(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return Le(this,Qi).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),i=Le(this,Qi).get(n.queryHash),a=i==null?void 0:i.state.data,s=cje(t,a);if(s!==void 0)return Le(this,Qi).build(this,n).setData(s,{...r,manual:!0})}setQueriesData(e,t,r){return za.batch(()=>Le(this,Qi).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Le(this,Qi).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Le(this,Qi);za.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Le(this,Qi);return za.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=za.batch(()=>Le(this,Qi).findAll(e).map(i=>i.cancel(r)));return Promise.all(n).then(Ro).catch(Ro)}invalidateQueries(e,t={}){return za.batch(()=>(Le(this,Qi).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=za.batch(()=>Le(this,Qi).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,r);return r.throwOnError||(a=a.catch(Ro)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(Ro)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Le(this,Qi).build(this,t);return r.isStaleByTime(v0(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ro).catch(Ro)}fetchInfiniteQuery(e){return e.behavior=vq(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ro).catch(Ro)}ensureInfiniteQueryData(e){return e.behavior=vq(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return qA.isOnline()?Le(this,Zp).resumePausedMutations():Promise.resolve()}getQueryCache(){return Le(this,Qi)}getMutationCache(){return Le(this,Zp)}getDefaultOptions(){return Le(this,e0)}setDefaultOptions(e){Wt(this,e0,e)}setQueryDefaults(e,t){Le(this,Bv).set(Gg(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Le(this,Bv).values()],r={};return t.forEach(n=>{lS(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){Le(this,Uv).set(Gg(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Le(this,Uv).values()],r={};return t.forEach(n=>{lS(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Le(this,e0).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=u7(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===d7&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Le(this,e0).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Le(this,Qi).clear(),Le(this,Zp).clear()}},Qi=new WeakMap,Zp=new WeakMap,e0=new WeakMap,Bv=new WeakMap,Uv=new WeakMap,t0=new WeakMap,$v=new WeakMap,zv=new WeakMap,ate),cse=I.createContext(void 0),Da=e=>{const t=I.useContext(cse);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Tje=({client:e,children:t})=>(I.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),u.jsx(cse.Provider,{value:e,children:t})),use=I.createContext(!1),Ije=()=>I.useContext(use);use.Provider;function Oje(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Pje=I.createContext(Oje()),Rje=()=>I.useContext(Pje),jje=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Dje=e=>{I.useEffect(()=>{e.clearReset()},[e])},Mje=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(i&&e.data===void 0||rse(r,[e.error,n])),Fje=e=>{if(e.suspense){const r=i=>i==="static"?i:Math.max(i??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...i)=>r(n(...i)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Lje=(e,t)=>e.isLoading&&e.isFetching&&!t,Bje=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,bq=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function Uje(e,t,r){var f,p,m,x,v;const n=Ije(),i=Rje(),a=Da(),s=a.defaultQueryOptions(e);(p=(f=a.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,s),s._optimisticResults=n?"isRestoring":"optimistic",Fje(s),jje(s,i),Dje(i);const o=!a.getQueryCache().get(s.queryHash),[l]=I.useState(()=>new t(a,s)),c=l.getOptimisticResult(s),d=!n&&e.subscribed!==!1;if(I.useSyncExternalStore(I.useCallback(b=>{const w=d?l.subscribe(za.batchCalls(b)):Ro;return l.updateResult(),w},[l,d]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),I.useEffect(()=>{l.setOptions(s)},[s,l]),Bje(s,c))throw bq(s,l,i);if(Mje({result:c,errorResetBoundary:i,throwOnError:s.throwOnError,query:a.getQueryCache().get(s.queryHash),suspense:s.suspense}))throw c.error;if((x=(m=a.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||x.call(m,s,c),s.experimental_prefetchInRender&&!qg&&Lje(c,n)){const b=o?bq(s,l,i):(v=a.getQueryCache().get(s.queryHash))==null?void 0:v.promise;b==null||b.catch(Ro).finally(()=>{l.updateResult()})}return s.notifyOnChangeProps?c:l.trackResult(c)}function Us(e,t){return Uje(e,bje)}function Tr(e,t){const r=Da(),[n]=I.useState(()=>new _je(r,e));I.useEffect(()=>{n.setOptions(e)},[n,e]);const i=I.useSyncExternalStore(I.useCallback(s=>n.subscribe(za.batchCalls(s)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),a=I.useCallback((s,o)=>{n.mutate(s,o).catch(Ro)},[n]);if(i.error&&rse(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}function dse(e,t){return function(){return e.apply(t,arguments)}}const{toString:$je}=Object.prototype,{getPrototypeOf:p7}=Object,{iterator:p4,toStringTag:fse}=Symbol,m4=(e=>t=>{const r=$je.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),fd=e=>(e=e.toLowerCase(),t=>m4(t)===e),g4=e=>t=>typeof t===e,{isArray:nb}=Array,ry=g4("undefined");function BE(e){return e!==null&&!ry(e)&&e.constructor!==null&&!ry(e.constructor)&&bl(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const hse=fd("ArrayBuffer");function zje(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&hse(e.buffer),t}const Hje=g4("string"),bl=g4("function"),pse=g4("number"),UE=e=>e!==null&&typeof e=="object",Wje=e=>e===!0||e===!1,MN=e=>{if(m4(e)!=="object")return!1;const t=p7(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(fse in e)&&!(p4 in e)},Vje=e=>{if(!UE(e)||BE(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},qje=fd("Date"),Gje=fd("File"),Kje=fd("Blob"),Xje=fd("FileList"),Yje=e=>UE(e)&&bl(e.pipe),Qje=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||bl(e.append)&&((t=m4(e))==="formdata"||t==="object"&&bl(e.toString)&&e.toString()==="[object FormData]"))},Jje=fd("URLSearchParams"),[Zje,eDe,tDe,rDe]=["ReadableStream","Request","Response","Headers"].map(fd),nDe=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function $E(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),nb(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{if(BE(e))return;const a=r?Object.getOwnPropertyNames(e):Object.keys(e),s=a.length;let o;for(n=0;n<s;n++)o=a[n],t.call(null,e[o],o,e)}}function mse(e,t){if(BE(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,i;for(;n-- >0;)if(i=r[n],t===i.toLowerCase())return i;return null}const Jm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,gse=e=>!ry(e)&&e!==Jm;function q6(){const{caseless:e,skipUndefined:t}=gse(this)&&this||{},r={},n=(i,a)=>{const s=e&&mse(r,a)||a;MN(r[s])&&MN(i)?r[s]=q6(r[s],i):MN(i)?r[s]=q6({},i):nb(i)?r[s]=i.slice():(!t||!ry(i))&&(r[s]=i)};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&$E(arguments[i],n);return r}const iDe=(e,t,r,{allOwnKeys:n}={})=>($E(t,(i,a)=>{r&&bl(i)?e[a]=dse(i,r):e[a]=i},{allOwnKeys:n}),e),aDe=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),sDe=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},oDe=(e,t,r,n)=>{let i,a,s;const o={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)s=i[a],(!n||n(s,e,t))&&!o[s]&&(t[s]=e[s],o[s]=!0);e=r!==!1&&p7(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},lDe=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},cDe=e=>{if(!e)return null;if(nb(e))return e;let t=e.length;if(!pse(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},uDe=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&p7(Uint8Array)),dDe=(e,t)=>{const n=(e&&e[p4]).call(e);let i;for(;(i=n.next())&&!i.done;){const a=i.value;t.call(e,a[0],a[1])}},fDe=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},hDe=fd("HTMLFormElement"),pDe=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),wq=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),mDe=fd("RegExp"),xse=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};$E(r,(i,a)=>{let s;(s=t(i,a,e))!==!1&&(n[a]=s||i)}),Object.defineProperties(e,n)},gDe=e=>{xse(e,(t,r)=>{if(bl(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(bl(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},xDe=(e,t)=>{const r={},n=i=>{i.forEach(a=>{r[a]=!0})};return nb(e)?n(e):n(String(e).split(t)),r},vDe=()=>{},yDe=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function bDe(e){return!!(e&&bl(e.append)&&e[fse]==="FormData"&&e[p4])}const wDe=e=>{const t=new Array(10),r=(n,i)=>{if(UE(n)){if(t.indexOf(n)>=0)return;if(BE(n))return n;if(!("toJSON"in n)){t[i]=n;const a=nb(n)?[]:{};return $E(n,(s,o)=>{const l=r(s,i+1);!ry(l)&&(a[o]=l)}),t[i]=void 0,a}}return n};return r(e,0)},SDe=fd("AsyncFunction"),EDe=e=>e&&(UE(e)||bl(e))&&bl(e.then)&&bl(e.catch),vse=((e,t)=>e?setImmediate:t?((r,n)=>(Jm.addEventListener("message",({source:i,data:a})=>{i===Jm&&a===r&&n.length&&n.shift()()},!1),i=>{n.push(i),Jm.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",bl(Jm.postMessage)),CDe=typeof queueMicrotask<"u"?queueMicrotask.bind(Jm):typeof process<"u"&&process.nextTick||vse,kDe=e=>e!=null&&bl(e[p4]),nt={isArray:nb,isArrayBuffer:hse,isBuffer:BE,isFormData:Qje,isArrayBufferView:zje,isString:Hje,isNumber:pse,isBoolean:Wje,isObject:UE,isPlainObject:MN,isEmptyObject:Vje,isReadableStream:Zje,isRequest:eDe,isResponse:tDe,isHeaders:rDe,isUndefined:ry,isDate:qje,isFile:Gje,isBlob:Kje,isRegExp:mDe,isFunction:bl,isStream:Yje,isURLSearchParams:Jje,isTypedArray:uDe,isFileList:Xje,forEach:$E,merge:q6,extend:iDe,trim:nDe,stripBOM:aDe,inherits:sDe,toFlatObject:oDe,kindOf:m4,kindOfTest:fd,endsWith:lDe,toArray:cDe,forEachEntry:dDe,matchAll:fDe,isHTMLForm:hDe,hasOwnProperty:wq,hasOwnProp:wq,reduceDescriptors:xse,freezeMethods:gDe,toObjectSet:xDe,toCamelCase:pDe,noop:vDe,toFiniteNumber:yDe,findKey:mse,global:Jm,isContextDefined:gse,isSpecCompliantForm:bDe,toJSONObject:wDe,isAsyncFn:SDe,isThenable:EDe,setImmediate:vse,asap:CDe,isIterable:kDe};function Yr(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}nt.inherits(Yr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:nt.toJSONObject(this.config),code:this.code,status:this.status}}});const yse=Yr.prototype,bse={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{bse[e]={value:e}});Object.defineProperties(Yr,bse);Object.defineProperty(yse,"isAxiosError",{value:!0});Yr.from=(e,t,r,n,i,a)=>{const s=Object.create(yse);nt.toFlatObject(e,s,function(d){return d!==Error.prototype},c=>c!=="isAxiosError");const o=e&&e.message?e.message:"Error",l=t==null&&e?e.code:t;return Yr.call(s,o,l,r,n,i),e&&s.cause==null&&Object.defineProperty(s,"cause",{value:e,configurable:!0}),s.name=e&&e.name||"Error",a&&Object.assign(s,a),s};const _De=null;function G6(e){return nt.isPlainObject(e)||nt.isArray(e)}function wse(e){return nt.endsWith(e,"[]")?e.slice(0,-2):e}function Sq(e,t,r){return e?e.concat(t).map(function(i,a){return i=wse(i),!r&&a?"["+i+"]":i}).join(r?".":""):t}function NDe(e){return nt.isArray(e)&&!e.some(G6)}const ADe=nt.toFlatObject(nt,{},null,function(t){return/^is[A-Z]/.test(t)});function x4(e,t,r){if(!nt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=nt.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,b){return!nt.isUndefined(b[v])});const n=r.metaTokens,i=r.visitor||d,a=r.dots,s=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&nt.isSpecCompliantForm(t);if(!nt.isFunction(i))throw new TypeError("visitor must be a function");function c(x){if(x===null)return"";if(nt.isDate(x))return x.toISOString();if(nt.isBoolean(x))return x.toString();if(!l&&nt.isBlob(x))throw new Yr("Blob is not supported. Use a Buffer instead.");return nt.isArrayBuffer(x)||nt.isTypedArray(x)?l&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function d(x,v,b){let w=x;if(x&&!b&&typeof x=="object"){if(nt.endsWith(v,"{}"))v=n?v:v.slice(0,-2),x=JSON.stringify(x);else if(nt.isArray(x)&&NDe(x)||(nt.isFileList(x)||nt.endsWith(v,"[]"))&&(w=nt.toArray(x)))return v=wse(v),w.forEach(function(E,N){!(nt.isUndefined(E)||E===null)&&t.append(s===!0?Sq([v],N,a):s===null?v:v+"[]",c(E))}),!1}return G6(x)?!0:(t.append(Sq(b,v,a),c(x)),!1)}const f=[],p=Object.assign(ADe,{defaultVisitor:d,convertValue:c,isVisitable:G6});function m(x,v){if(!nt.isUndefined(x)){if(f.indexOf(x)!==-1)throw Error("Circular reference detected in "+v.join("."));f.push(x),nt.forEach(x,function(w,k){(!(nt.isUndefined(w)||w===null)&&i.call(t,w,nt.isString(k)?k.trim():k,v,p))===!0&&m(w,v?v.concat(k):[k])}),f.pop()}}if(!nt.isObject(e))throw new TypeError("data must be an object");return m(e),t}function Eq(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function m7(e,t){this._pairs=[],e&&x4(e,this,t)}const Sse=m7.prototype;Sse.append=function(t,r){this._pairs.push([t,r])};Sse.toString=function(t){const r=t?function(n){return t.call(this,n,Eq)}:Eq;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function TDe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ese(e,t,r){if(!t)return e;const n=r&&r.encode||TDe;nt.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let a;if(i?a=i(t,r):a=nt.isURLSearchParams(t)?t.toString():new m7(t,r).toString(n),a){const s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class Cq{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){nt.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Cse={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},IDe=typeof URLSearchParams<"u"?URLSearchParams:m7,ODe=typeof FormData<"u"?FormData:null,PDe=typeof Blob<"u"?Blob:null,RDe={isBrowser:!0,classes:{URLSearchParams:IDe,FormData:ODe,Blob:PDe},protocols:["http","https","file","blob","url","data"]},g7=typeof window<"u"&&typeof document<"u",K6=typeof navigator=="object"&&navigator||void 0,jDe=g7&&(!K6||["ReactNative","NativeScript","NS"].indexOf(K6.product)<0),DDe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",MDe=g7&&window.location.href||"http://localhost",FDe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:g7,hasStandardBrowserEnv:jDe,hasStandardBrowserWebWorkerEnv:DDe,navigator:K6,origin:MDe},Symbol.toStringTag,{value:"Module"})),lo={...FDe,...RDe};function LDe(e,t){return x4(e,new lo.classes.URLSearchParams,{visitor:function(r,n,i,a){return lo.isNode&&nt.isBuffer(r)?(this.append(n,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}function BDe(e){return nt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function UDe(e){const t={},r=Object.keys(e);let n;const i=r.length;let a;for(n=0;n<i;n++)a=r[n],t[a]=e[a];return t}function kse(e){function t(r,n,i,a){let s=r[a++];if(s==="__proto__")return!0;const o=Number.isFinite(+s),l=a>=r.length;return s=!s&&nt.isArray(i)?i.length:s,l?(nt.hasOwnProp(i,s)?i[s]=[i[s],n]:i[s]=n,!o):((!i[s]||!nt.isObject(i[s]))&&(i[s]=[]),t(r,n,i[s],a)&&nt.isArray(i[s])&&(i[s]=UDe(i[s])),!o)}if(nt.isFormData(e)&&nt.isFunction(e.entries)){const r={};return nt.forEachEntry(e,(n,i)=>{t(BDe(n),i,r,0)}),r}return null}function $De(e,t,r){if(nt.isString(e))try{return(t||JSON.parse)(e),nt.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const zE={transitional:Cse,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,a=nt.isObject(t);if(a&&nt.isHTMLForm(t)&&(t=new FormData(t)),nt.isFormData(t))return i?JSON.stringify(kse(t)):t;if(nt.isArrayBuffer(t)||nt.isBuffer(t)||nt.isStream(t)||nt.isFile(t)||nt.isBlob(t)||nt.isReadableStream(t))return t;if(nt.isArrayBufferView(t))return t.buffer;if(nt.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return LDe(t,this.formSerializer).toString();if((o=nt.isFileList(t))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return x4(o?{"files[]":t}:t,l&&new l,this.formSerializer)}}return a||i?(r.setContentType("application/json",!1),$De(t)):t}],transformResponse:[function(t){const r=this.transitional||zE.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(nt.isResponse(t)||nt.isReadableStream(t))return t;if(t&&nt.isString(t)&&(n&&!this.responseType||i)){const s=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(o){if(s)throw o.name==="SyntaxError"?Yr.from(o,Yr.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:lo.classes.FormData,Blob:lo.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};nt.forEach(["delete","get","head","post","put","patch"],e=>{zE.headers[e]={}});const zDe=nt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),HDe=e=>{const t={};let r,n,i;return e&&e.split(`
`).forEach(function(s){i=s.indexOf(":"),r=s.substring(0,i).trim().toLowerCase(),n=s.substring(i+1).trim(),!(!r||t[r]&&zDe[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},kq=Symbol("internals");function mw(e){return e&&String(e).trim().toLowerCase()}function FN(e){return e===!1||e==null?e:nt.isArray(e)?e.map(FN):String(e)}function WDe(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const VDe=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Aj(e,t,r,n,i){if(nt.isFunction(n))return n.call(this,t,r);if(i&&(t=r),!!nt.isString(t)){if(nt.isString(n))return t.indexOf(n)!==-1;if(nt.isRegExp(n))return n.test(t)}}function qDe(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function GDe(e,t){const r=nt.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(i,a,s){return this[n].call(this,t,i,a,s)},configurable:!0})})}let wl=class{constructor(t){t&&this.set(t)}set(t,r,n){const i=this;function a(o,l,c){const d=mw(l);if(!d)throw new Error("header name must be a non-empty string");const f=nt.findKey(i,d);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||l]=FN(o))}const s=(o,l)=>nt.forEach(o,(c,d)=>a(c,d,l));if(nt.isPlainObject(t)||t instanceof this.constructor)s(t,r);else if(nt.isString(t)&&(t=t.trim())&&!VDe(t))s(HDe(t),r);else if(nt.isObject(t)&&nt.isIterable(t)){let o={},l,c;for(const d of t){if(!nt.isArray(d))throw TypeError("Object iterator must return a key-value pair");o[c=d[0]]=(l=o[c])?nt.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}s(o,r)}else t!=null&&a(r,t,n);return this}get(t,r){if(t=mw(t),t){const n=nt.findKey(this,t);if(n){const i=this[n];if(!r)return i;if(r===!0)return WDe(i);if(nt.isFunction(r))return r.call(this,i,n);if(nt.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=mw(t),t){const n=nt.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Aj(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let i=!1;function a(s){if(s=mw(s),s){const o=nt.findKey(n,s);o&&(!r||Aj(n,n[o],o,r))&&(delete n[o],i=!0)}}return nt.isArray(t)?t.forEach(a):a(t),i}clear(t){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const a=r[n];(!t||Aj(this,this[a],a,t,!0))&&(delete this[a],i=!0)}return i}normalize(t){const r=this,n={};return nt.forEach(this,(i,a)=>{const s=nt.findKey(n,a);if(s){r[s]=FN(i),delete r[a];return}const o=t?qDe(a):String(a).trim();o!==a&&delete r[a],r[o]=FN(i),n[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return nt.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=t&&nt.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[kq]=this[kq]={accessors:{}}).accessors,i=this.prototype;function a(s){const o=mw(s);n[o]||(GDe(i,s),n[o]=!0)}return nt.isArray(t)?t.forEach(a):a(t),this}};wl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);nt.reduceDescriptors(wl.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});nt.freezeMethods(wl);function Tj(e,t){const r=this||zE,n=t||r,i=wl.from(n.headers);let a=n.data;return nt.forEach(e,function(o){a=o.call(r,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function _se(e){return!!(e&&e.__CANCEL__)}function ib(e,t,r){Yr.call(this,e??"canceled",Yr.ERR_CANCELED,t,r),this.name="CanceledError"}nt.inherits(ib,Yr,{__CANCEL__:!0});function Nse(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Yr("Request failed with status code "+r.status,[Yr.ERR_BAD_REQUEST,Yr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function KDe(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function XDe(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i=0,a=0,s;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),d=n[a];s||(s=c),r[i]=l,n[i]=c;let f=a,p=0;for(;f!==i;)p+=r[f++],f=f%e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),c-s<t)return;const m=d&&c-d;return m?Math.round(p*1e3/m):void 0}}function YDe(e,t){let r=0,n=1e3/t,i,a;const s=(c,d=Date.now())=>{r=d,i=null,a&&(clearTimeout(a),a=null),e(...c)};return[(...c)=>{const d=Date.now(),f=d-r;f>=n?s(c,d):(i=c,a||(a=setTimeout(()=>{a=null,s(i)},n-f)))},()=>i&&s(i)]}const GA=(e,t,r=3)=>{let n=0;const i=XDe(50,250);return YDe(a=>{const s=a.loaded,o=a.lengthComputable?a.total:void 0,l=s-n,c=i(l),d=s<=o;n=s;const f={loaded:s,total:o,progress:o?s/o:void 0,bytes:l,rate:c||void 0,estimated:c&&o&&d?(o-s)/c:void 0,event:a,lengthComputable:o!=null,[t?"download":"upload"]:!0};e(f)},r)},_q=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Nq=e=>(...t)=>nt.asap(()=>e(...t)),QDe=lo.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,lo.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(lo.origin),lo.navigator&&/(msie|trident)/i.test(lo.navigator.userAgent)):()=>!0,JDe=lo.hasStandardBrowserEnv?{write(e,t,r,n,i,a,s){if(typeof document>"u")return;const o=[`${e}=${encodeURIComponent(t)}`];nt.isNumber(r)&&o.push(`expires=${new Date(r).toUTCString()}`),nt.isString(n)&&o.push(`path=${n}`),nt.isString(i)&&o.push(`domain=${i}`),a===!0&&o.push("secure"),nt.isString(s)&&o.push(`SameSite=${s}`),document.cookie=o.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function ZDe(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function eMe(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Ase(e,t,r){let n=!ZDe(t);return e&&(n||r==!1)?eMe(e,t):t}const Aq=e=>e instanceof wl?{...e}:e;function Kg(e,t){t=t||{};const r={};function n(c,d,f,p){return nt.isPlainObject(c)&&nt.isPlainObject(d)?nt.merge.call({caseless:p},c,d):nt.isPlainObject(d)?nt.merge({},d):nt.isArray(d)?d.slice():d}function i(c,d,f,p){if(nt.isUndefined(d)){if(!nt.isUndefined(c))return n(void 0,c,f,p)}else return n(c,d,f,p)}function a(c,d){if(!nt.isUndefined(d))return n(void 0,d)}function s(c,d){if(nt.isUndefined(d)){if(!nt.isUndefined(c))return n(void 0,c)}else return n(void 0,d)}function o(c,d,f){if(f in t)return n(c,d);if(f in e)return n(void 0,c)}const l={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(c,d,f)=>i(Aq(c),Aq(d),f,!0)};return nt.forEach(Object.keys({...e,...t}),function(d){const f=l[d]||i,p=f(e[d],t[d],d);nt.isUndefined(p)&&f!==o||(r[d]=p)}),r}const Tse=e=>{const t=Kg({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:a,headers:s,auth:o}=t;if(t.headers=s=wl.from(s),t.url=Ese(Ase(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&s.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),nt.isFormData(r)){if(lo.hasStandardBrowserEnv||lo.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(nt.isFunction(r.getHeaders)){const l=r.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([d,f])=>{c.includes(d.toLowerCase())&&s.set(d,f)})}}if(lo.hasStandardBrowserEnv&&(n&&nt.isFunction(n)&&(n=n(t)),n||n!==!1&&QDe(t.url))){const l=i&&a&&JDe.read(a);l&&s.set(i,l)}return t},tMe=typeof XMLHttpRequest<"u",rMe=tMe&&function(e){return new Promise(function(r,n){const i=Tse(e);let a=i.data;const s=wl.from(i.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:c}=i,d,f,p,m,x;function v(){m&&m(),x&&x(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function w(){if(!b)return;const E=wl.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),P={data:!o||o==="text"||o==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:E,config:e,request:b};Nse(function(O){r(O),v()},function(O){n(O),v()},P),b=null}"onloadend"in b?b.onloadend=w:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(w)},b.onabort=function(){b&&(n(new Yr("Request aborted",Yr.ECONNABORTED,e,b)),b=null)},b.onerror=function(N){const P=N&&N.message?N.message:"Network Error",R=new Yr(P,Yr.ERR_NETWORK,e,b);R.event=N||null,n(R),b=null},b.ontimeout=function(){let N=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const P=i.transitional||Cse;i.timeoutErrorMessage&&(N=i.timeoutErrorMessage),n(new Yr(N,P.clarifyTimeoutError?Yr.ETIMEDOUT:Yr.ECONNABORTED,e,b)),b=null},a===void 0&&s.setContentType(null),"setRequestHeader"in b&&nt.forEach(s.toJSON(),function(N,P){b.setRequestHeader(P,N)}),nt.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),o&&o!=="json"&&(b.responseType=i.responseType),c&&([p,x]=GA(c,!0),b.addEventListener("progress",p)),l&&b.upload&&([f,m]=GA(l),b.upload.addEventListener("progress",f),b.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(d=E=>{b&&(n(!E||E.type?new ib(null,e,b):E),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const k=KDe(i.url);if(k&&lo.protocols.indexOf(k)===-1){n(new Yr("Unsupported protocol "+k+":",Yr.ERR_BAD_REQUEST,e));return}b.send(a||null)})},nMe=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,i;const a=function(c){if(!i){i=!0,o();const d=c instanceof Error?c:this.reason;n.abort(d instanceof Yr?d:new ib(d instanceof Error?d.message:d))}};let s=t&&setTimeout(()=>{s=null,a(new Yr(`timeout ${t} of ms exceeded`,Yr.ETIMEDOUT))},t);const o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(a):c.removeEventListener("abort",a)}),e=null)};e.forEach(c=>c.addEventListener("abort",a));const{signal:l}=n;return l.unsubscribe=()=>nt.asap(o),l}},iMe=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,i;for(;n<r;)i=n+t,yield e.slice(n,i),n=i},aMe=async function*(e,t){for await(const r of sMe(e))yield*iMe(r,t)},sMe=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},Tq=(e,t,r,n)=>{const i=aMe(e,t);let a=0,s,o=l=>{s||(s=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await i.next();if(c){o(),l.close();return}let f=d.byteLength;if(r){let p=a+=f;r(p)}l.enqueue(new Uint8Array(d))}catch(c){throw o(c),c}},cancel(l){return o(l),i.return()}},{highWaterMark:2})},Iq=64*1024,{isFunction:p_}=nt,oMe=(({Request:e,Response:t})=>({Request:e,Response:t}))(nt.global),{ReadableStream:Oq,TextEncoder:Pq}=nt.global,Rq=(e,...t)=>{try{return!!e(...t)}catch{return!1}},lMe=e=>{e=nt.merge.call({skipUndefined:!0},oMe,e);const{fetch:t,Request:r,Response:n}=e,i=t?p_(t):typeof fetch=="function",a=p_(r),s=p_(n);if(!i)return!1;const o=i&&p_(Oq),l=i&&(typeof Pq=="function"?(x=>v=>x.encode(v))(new Pq):async x=>new Uint8Array(await new r(x).arrayBuffer())),c=a&&o&&Rq(()=>{let x=!1;const v=new r(lo.origin,{body:new Oq,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!v}),d=s&&o&&Rq(()=>nt.isReadableStream(new n("").body)),f={stream:d&&(x=>x.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!f[x]&&(f[x]=(v,b)=>{let w=v&&v[x];if(w)return w.call(v);throw new Yr(`Response type '${x}' is not supported`,Yr.ERR_NOT_SUPPORT,b)})});const p=async x=>{if(x==null)return 0;if(nt.isBlob(x))return x.size;if(nt.isSpecCompliantForm(x))return(await new r(lo.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(nt.isArrayBufferView(x)||nt.isArrayBuffer(x))return x.byteLength;if(nt.isURLSearchParams(x)&&(x=x+""),nt.isString(x))return(await l(x)).byteLength},m=async(x,v)=>{const b=nt.toFiniteNumber(x.getContentLength());return b??p(v)};return async x=>{let{url:v,method:b,data:w,signal:k,cancelToken:E,timeout:N,onDownloadProgress:P,onUploadProgress:R,responseType:O,headers:D,withCredentials:L="same-origin",fetchOptions:B}=Tse(x),z=t||fetch;O=O?(O+"").toLowerCase():"text";let H=nMe([k,E&&E.toAbortSignal()],N),te=null;const Y=H&&H.unsubscribe&&(()=>{H.unsubscribe()});let W;try{if(R&&c&&b!=="get"&&b!=="head"&&(W=await m(D,w))!==0){let ye=new r(v,{method:"POST",body:w,duplex:"half"}),J;if(nt.isFormData(w)&&(J=ye.headers.get("content-type"))&&D.setContentType(J),ye.body){const[ce,V]=_q(W,GA(Nq(R)));w=Tq(ye.body,Iq,ce,V)}}nt.isString(L)||(L=L?"include":"omit");const Z=a&&"credentials"in r.prototype,re={...B,signal:H,method:b.toUpperCase(),headers:D.normalize().toJSON(),body:w,duplex:"half",credentials:Z?L:void 0};te=a&&new r(v,re);let X=await(a?z(te,B):z(v,re));const Q=d&&(O==="stream"||O==="response");if(d&&(P||Q&&Y)){const ye={};["status","statusText","headers"].forEach(G=>{ye[G]=X[G]});const J=nt.toFiniteNumber(X.headers.get("content-length")),[ce,V]=P&&_q(J,GA(Nq(P),!0))||[];X=new n(Tq(X.body,Iq,ce,()=>{V&&V(),Y&&Y()}),ye)}O=O||"text";let fe=await f[nt.findKey(f,O)||"text"](X,x);return!Q&&Y&&Y(),await new Promise((ye,J)=>{Nse(ye,J,{data:fe,headers:wl.from(X.headers),status:X.status,statusText:X.statusText,config:x,request:te})})}catch(Z){throw Y&&Y(),Z&&Z.name==="TypeError"&&/Load failed|fetch/i.test(Z.message)?Object.assign(new Yr("Network Error",Yr.ERR_NETWORK,x,te),{cause:Z.cause||Z}):Yr.from(Z,Z&&Z.code,x,te)}}},cMe=new Map,Ise=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:i}=t,a=[n,i,r];let s=a.length,o=s,l,c,d=cMe;for(;o--;)l=a[o],c=d.get(l),c===void 0&&d.set(l,c=o?new Map:lMe(t)),d=c;return c};Ise();const x7={http:_De,xhr:rMe,fetch:{get:Ise}};nt.forEach(x7,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const jq=e=>`- ${e}`,uMe=e=>nt.isFunction(e)||e===null||e===!1;function dMe(e,t){e=nt.isArray(e)?e:[e];const{length:r}=e;let n,i;const a={};for(let s=0;s<r;s++){n=e[s];let o;if(i=n,!uMe(n)&&(i=x7[(o=String(n)).toLowerCase()],i===void 0))throw new Yr(`Unknown adapter '${o}'`);if(i&&(nt.isFunction(i)||(i=i.get(t))))break;a[o||"#"+s]=i}if(!i){const s=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=r?s.length>1?`since :
`+s.map(jq).join(`
`):" "+jq(s[0]):"as no adapter specified";throw new Yr("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i}const Ose={getAdapter:dMe,adapters:x7};function Ij(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ib(null,e)}function Dq(e){return Ij(e),e.headers=wl.from(e.headers),e.data=Tj.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ose.getAdapter(e.adapter||zE.adapter,e)(e).then(function(n){return Ij(e),n.data=Tj.call(e,e.transformResponse,n),n.headers=wl.from(n.headers),n},function(n){return _se(n)||(Ij(e),n&&n.response&&(n.response.data=Tj.call(e,e.transformResponse,n.response),n.response.headers=wl.from(n.response.headers))),Promise.reject(n)})}const Pse="1.13.2",v4={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{v4[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Mq={};v4.transitional=function(t,r,n){function i(a,s){return"[Axios v"+Pse+"] Transitional option '"+a+"'"+s+(n?". "+n:"")}return(a,s,o)=>{if(t===!1)throw new Yr(i(s," has been removed"+(r?" in "+r:"")),Yr.ERR_DEPRECATED);return r&&!Mq[s]&&(Mq[s]=!0,console.warn(i(s," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,s,o):!0}};v4.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function fMe(e,t,r){if(typeof e!="object")throw new Yr("options must be an object",Yr.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const a=n[i],s=t[a];if(s){const o=e[a],l=o===void 0||s(o,a,e);if(l!==!0)throw new Yr("option "+a+" must be "+l,Yr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Yr("Unknown option "+a,Yr.ERR_BAD_OPTION)}}const LN={assertOptions:fMe,validators:v4},Cd=LN.validators;let Sg=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Cq,response:new Cq}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?a&&!String(n.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+a):n.stack=a}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Kg(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:a}=r;n!==void 0&&LN.assertOptions(n,{silentJSONParsing:Cd.transitional(Cd.boolean),forcedJSONParsing:Cd.transitional(Cd.boolean),clarifyTimeoutError:Cd.transitional(Cd.boolean)},!1),i!=null&&(nt.isFunction(i)?r.paramsSerializer={serialize:i}:LN.assertOptions(i,{encode:Cd.function,serialize:Cd.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),LN.assertOptions(r,{baseUrl:Cd.spelling("baseURL"),withXsrfToken:Cd.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let s=a&&nt.merge(a.common,a[r.method]);a&&nt.forEach(["delete","get","head","post","put","patch","common"],x=>{delete a[x]}),r.headers=wl.concat(s,a);const o=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(l=l&&v.synchronous,o.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let d,f=0,p;if(!l){const x=[Dq.bind(this),void 0];for(x.unshift(...o),x.push(...c),p=x.length,d=Promise.resolve(r);f<p;)d=d.then(x[f++],x[f++]);return d}p=o.length;let m=r;for(;f<p;){const x=o[f++],v=o[f++];try{m=x(m)}catch(b){v.call(this,b);break}}try{d=Dq.call(this,m)}catch(x){return Promise.reject(x)}for(f=0,p=c.length;f<p;)d=d.then(c[f++],c[f++]);return d}getUri(t){t=Kg(this.defaults,t);const r=Ase(t.baseURL,t.url,t.allowAbsoluteUrls);return Ese(r,t.params,t.paramsSerializer)}};nt.forEach(["delete","get","head","options"],function(t){Sg.prototype[t]=function(r,n){return this.request(Kg(n||{},{method:t,url:r,data:(n||{}).data}))}});nt.forEach(["post","put","patch"],function(t){function r(n){return function(a,s,o){return this.request(Kg(o||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:s}))}}Sg.prototype[t]=r(),Sg.prototype[t+"Form"]=r(!0)});let hMe=class Rse{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});const n=this;this.promise.then(i=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](i);n._listeners=null}),this.promise.then=i=>{let a;const s=new Promise(o=>{n.subscribe(o),a=o}).then(i);return s.cancel=function(){n.unsubscribe(a)},s},t(function(a,s,o){n.reason||(n.reason=new ib(a,s,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Rse(function(i){t=i}),cancel:t}}};function pMe(e){return function(r){return e.apply(null,r)}}function mMe(e){return nt.isObject(e)&&e.isAxiosError===!0}const X6={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(X6).forEach(([e,t])=>{X6[t]=e});function jse(e){const t=new Sg(e),r=dse(Sg.prototype.request,t);return nt.extend(r,Sg.prototype,t,{allOwnKeys:!0}),nt.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return jse(Kg(e,i))},r}const cr=jse(zE);cr.Axios=Sg;cr.CanceledError=ib;cr.CancelToken=hMe;cr.isCancel=_se;cr.VERSION=Pse;cr.toFormData=x4;cr.AxiosError=Yr;cr.Cancel=cr.CanceledError;cr.all=function(t){return Promise.all(t)};cr.spread=pMe;cr.isAxiosError=mMe;cr.mergeConfig=Kg;cr.AxiosHeaders=wl;cr.formToJSON=e=>kse(nt.isHTMLForm(e)?new FormData(e):e);cr.getAdapter=Ose.getAdapter;cr.HttpStatusCode=X6;cr.default=cr;const{Axios:xNt,AxiosError:vNt,CanceledError:yNt,isCancel:bNt,CancelToken:wNt,VERSION:SNt,all:ENt,Cancel:CNt,isAxiosError:kNt,spread:_Nt,toFormData:NNt,AxiosHeaders:ANt,HttpStatusCode:TNt,formToJSON:INt,getAdapter:ONt,mergeConfig:PNt}=cr,Y6="subfloor_server_url",v7=()=>{var r;if(!((r=window.Capacitor)==null?void 0:r.isNativePlatform()))return"";const t=localStorage.getItem(Y6);return t?t.replace(/\/$/,""):""},rr=e=>{const t=v7(),r=e.startsWith("/")?e:`/${e}`;return`${t}${r}`},Ia=e=>{if(!e)return"";if(e.startsWith("http"))return e;let t=e.startsWith("/")?e:`/${e}`;return!t.startsWith("/uploads/")&&!t.startsWith("/api/")&&(t=`/uploads${t}`),`${v7()}${t}`},gMe=async()=>(await cr.get(rr("/api/notifications"))).data,xMe=async()=>(await cr.get(rr("/api/notifications/unread-count"))).data.count,vMe=async e=>{await cr.patch(rr(`/api/notifications/${e}/read`))},yMe=async()=>{await cr.patch(rr("/api/notifications/read-all"))},bMe=async e=>{await cr.patch(rr(`/api/notifications/mark-reference/${e}`))},wMe=e=>Us({queryKey:["notifications","unreadCount"],queryFn:xMe,refetchInterval:1e4,enabled:e,initialData:0}),hd=()=>rr("/api/products"),SMe=async()=>{const e=await fetch(hd());if(!e.ok)throw new Error("Failed to fetch products");return e.json()},EMe=async e=>{const t=await fetch(`${hd()}/${e}/history`);if(!t.ok)throw new Error("Failed to fetch product history");return t.json()},CMe=async e=>{const t=await fetch(hd(),{method:"POST",body:e});if(!t.ok){const r=await t.json().catch(()=>({error:"Failed to create product"}));throw new Error(r.error||"Failed to create product")}return t.json()},kMe=async(e,t)=>{const r=await fetch(`${hd()}/${e}`,{method:"PATCH",body:t});if(!r.ok){const n=await r.json().catch(()=>({error:"Failed to update product"}));throw new Error(n.error||"Failed to update product")}return r.json()},_Me=async e=>{const t=await fetch(`${hd()}/${e}/duplicate`,{method:"POST"});if(!t.ok){const r=await t.json().catch(()=>({error:"Failed to duplicate product"}));throw new Error(r.error||"Failed to duplicate product")}return t.json()},NMe=async e=>{const t=await fetch(`${hd()}/${e}`,{method:"DELETE"});if(!t.ok){const r=await t.json().catch(()=>({error:"Failed to delete product"}));throw new Error(r.error||"Failed to delete product")}},AMe=async(e,t)=>{const r=await fetch(`${hd()}/${e}/variants`,{method:"POST",body:t});if(!r.ok){const n=await r.json().catch(()=>({error:"Failed to add variant"}));throw new Error(n.error||"Failed to add variant")}return r.json()},TMe=async(e,t)=>{const r=await fetch(`${hd()}/${e}/variants/batch`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({variants:t})});if(!r.ok){const n=await r.json().catch(()=>({error:"Failed to batch create variants."}));throw new Error(n.error||"Failed to batch create variants.")}return r.json()},IMe=async(e,t)=>{const r=await fetch(`${hd()}/variants/${e}`,{method:"PATCH",body:t});if(!r.ok){const n=await r.json().catch(()=>({error:"Failed to update variant"}));throw new Error(n.error||"Failed to update variant")}return r.json()},OMe=async(e,t)=>{const r=await fetch(`${hd()}/variants/batch-update`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:e,updates:t})});if(!r.ok){const n=await r.json().catch(()=>({error:"Failed to batch update variants"}));throw new Error(n.error||"Failed to batch update variants")}},Dse=async e=>{const t=await fetch(`${hd()}/variants/${e}`,{method:"DELETE"});if(!t.ok){const r=await t.json().catch(()=>({error:"Failed to delete variant"}));throw new Error(r.error||"Failed to delete variant")}},ab=(e=!0)=>Us({queryKey:["products"],queryFn:SMe,enabled:e}),y7=()=>{const e=Da(),t=()=>e.invalidateQueries({queryKey:["products"]});return{addProduct:Tr({mutationFn:CMe,onSuccess:t}),updateProduct:Tr({mutationFn:({id:r,formData:n})=>kMe(r,n),onSuccess:t}),duplicateProduct:Tr({mutationFn:_Me,onSuccess:t}),deleteProduct:Tr({mutationFn:NMe,onSuccess:t}),addVariant:Tr({mutationFn:({productId:r,formData:n})=>AMe(r,n),onSuccess:t}),addVariantsBatch:Tr({mutationFn:({productId:r,variants:n})=>TMe(r,n),onSuccess:t}),updateVariant:Tr({mutationFn:({variantId:r,formData:n})=>IMe(r,n),onSuccess:t}),batchUpdateVariants:Tr({mutationFn:({ids:r,updates:n})=>OMe(r,n),onSuccess:t}),deleteVariant:Tr({mutationFn:Dse,onSuccess:t})}},HE=()=>rr("/api/customers"),PMe=async()=>{const e=await fetch(HE());if(!e.ok)throw new Error("Failed to fetch customers.");return e.json()},RMe=async e=>{const t=await fetch(HE(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create customer.");return t.json()},jMe=async e=>{const t=await fetch(`${HE()}/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update customer.");return t.json()},DMe=async e=>{const t=await fetch(`${HE()}/${e}`,{method:"DELETE"});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to delete customer.")}},MMe=async e=>{const t=await fetch(`${HE()}/${e}/history`);if(!t.ok)throw new Error("Failed to fetch customer history.");return t.json()},Rx=()=>Us({queryKey:["customers"],queryFn:PMe}),Mse=()=>{const e=Da(),t=Tr({mutationFn:RMe,onSuccess:()=>{e.invalidateQueries({queryKey:["customers"]})}}),r=Tr({mutationFn:jMe,onSuccess:i=>{e.invalidateQueries({queryKey:["customers"]}),e.invalidateQueries({queryKey:["customer",i.id]})}}),n=Tr({mutationFn:DMe,onSuccess:()=>{e.invalidateQueries({queryKey:["customers"]})}});return{createCustomer:t,updateCustomer:r,deleteCustomer:n}},WE=()=>rr("/api/projects"),FMe=async e=>{const r=WE(),n=await fetch(r);if(!n.ok)throw new Error("Failed to fetch projects.");return n.json()},LMe=async e=>{const t=await fetch(WE(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create project.");return t.json()},BMe=async e=>{const t=await fetch(`${WE()}/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update project.");return t.json()},UMe=async e=>{const t=await fetch(`${WE()}/${e}`,{method:"DELETE"});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to delete project.")}},$Me=async e=>{const t=await fetch(`${WE()}/${e}/history`);if(!t.ok)throw new Error("Failed to fetch project history.");return t.json()},Kh=(e=!0)=>Us({queryKey:["projects"],queryFn:()=>FMe(),enabled:e}),Fse=()=>{const e=Da();return{addProject:Tr({mutationFn:LMe,onSuccess:()=>e.invalidateQueries({queryKey:["projects"]})}),updateProject:Tr({mutationFn:BMe,onSuccess:()=>e.invalidateQueries({queryKey:["projects"]})}),deleteProject:Tr({mutationFn:UMe,onSuccess:()=>e.invalidateQueries({queryKey:["projects"]})})}},VE=()=>rr("/api/installers"),zMe=async()=>{const e=await fetch(VE());if(!e.ok)throw new Error("Failed to fetch installers.");return e.json()},Lse=async e=>{const t=await fetch(VE(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create installer.");return t.json()},Bse=async e=>{const t=await fetch(`${VE()}/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update installer.");return t.json()},Use=async e=>{const t=await fetch(`${VE()}/${e}`,{method:"DELETE"});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to delete installer.")}},HMe=async e=>{const t=await fetch(`${VE()}/${e}/history`);if(!t.ok)throw new Error("Failed to fetch installer history.");return t.json()},gf=(e=!0)=>Us({queryKey:["installers"],queryFn:zMe,enabled:e}),b7=()=>{const e=Da(),t=Tr({mutationFn:Lse,onSuccess:()=>{e.invalidateQueries({queryKey:["installers"]})}}),r=Tr({mutationFn:Bse,onSuccess:()=>{e.invalidateQueries({queryKey:["installers"]})}}),n=Tr({mutationFn:Use,onSuccess:()=>{e.invalidateQueries({queryKey:["installers"]})}});return{createInstaller:t,updateInstaller:r,deleteInstaller:n}},qE=()=>rr("/api/vendors"),WMe=async()=>{const e=await fetch(qE());if(!e.ok)throw new Error("Failed to fetch vendors.");return e.json()},$se=async e=>{const t=await fetch(qE(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to create vendor")}return t.json()},zse=async e=>{const{id:t,...r}=e,n=await fetch(`${qE()}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!n.ok){const i=await n.json();throw new Error(i.error||"Failed to update vendor")}return n.json()},Hse=async e=>{const t=await fetch(`${qE()}/${e}`,{method:"DELETE"});if(!t.ok){if(t.status===409)throw new Error("Cannot delete vendor because it is currently in use.");const r=await t.json().catch(()=>({}));throw new Error(r.error||"Failed to delete vendor")}},VMe=async e=>{const t=await fetch(`${qE()}/${e}/history`);if(!t.ok)throw new Error("Failed to fetch vendor history.");return t.json()},y4=(e=!0)=>Us({queryKey:["vendors"],queryFn:WMe,enabled:e}),qMe=e=>{const t=Da(),r=Tr({mutationFn:$se,onSuccess:()=>{t.invalidateQueries({queryKey:["vendors"]})}}),n=Tr({mutationFn:zse,onSuccess:()=>{t.invalidateQueries({queryKey:["vendors"]})}}),i=Tr({mutationFn:Hse,onSuccess:()=>{t.invalidateQueries({queryKey:["vendors"]})}});return{createVendor:r,updateVendor:n,deleteVendor:i}},GE=()=>rr("/api/quotes"),GMe=async()=>{const e=await fetch(GE());if(!e.ok)throw new Error("Failed to fetch quotes.");return e.json()},KMe=async e=>{const t=await fetch(GE(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to add quote.");return t.json()},XMe=async e=>{const t=await fetch(`${GE()}/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update quote.");return t.json()},YMe=async e=>{const t=await fetch(`${GE()}/${e.id}/accept`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const r=await t.json().catch(()=>({message:"Failed to accept quote."}));throw new Error(r.message)}return t.json()},Wse=async e=>{const t=await fetch(`${GE()}/project/${e}/history`);if(!t.ok)throw new Error("Failed to fetch quote history.");return t.json()},b4=e=>Us({queryKey:["quotes"],queryFn:()=>GMe(),select:t=>e?t.filter(r=>r.projectId===e):t}),w7=()=>{const e=Da(),t=Tr({mutationFn:i=>KMe(i),onSuccess:(i,a)=>{e.invalidateQueries({queryKey:["quotes"]}),e.invalidateQueries({queryKey:["quotes",a.projectId]}),e.invalidateQueries({queryKey:["quotes","history",a.projectId]}),e.invalidateQueries({queryKey:["projects"]})}}),r=Tr({mutationFn:i=>XMe(i),onSuccess:i=>{e.invalidateQueries({queryKey:["quotes"]}),e.invalidateQueries({queryKey:["quotes",i.projectId]}),e.invalidateQueries({queryKey:["quotes","history",i.projectId]})}}),n=Tr({mutationFn:i=>YMe(i),onSuccess:i=>{const{updatedQuote:a}=i;e.invalidateQueries({queryKey:["quotes"]}),e.invalidateQueries({queryKey:["quotes",a.projectId]}),e.invalidateQueries({queryKey:["quotes","history",a.projectId]}),e.invalidateQueries({queryKey:["projects"]}),e.invalidateQueries({queryKey:["jobs"]})}});return{addQuote:t.mutateAsync,updateQuote:r.mutateAsync,acceptQuote:n.mutateAsync}},S7=()=>rr("/api/jobs"),QMe=async()=>{const e=await fetch(S7());if(!e.ok)throw new Error("Failed to fetch jobs.");return(await e.json()).map(r=>({...r,appointments:r.appointments||[]}))},JMe=async e=>{const t=await fetch(`${S7()}/project/${e}`);if(t.status===404)return null;if(!t.ok)throw new Error(`Failed to fetch job for project ${e}. Status: ${t.status}`);return t.json()},Vse=async e=>{const t=await fetch(S7(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const r=await t.json().catch(()=>({error:"Failed to save job details."}));throw new Error(r.error||"Failed to save job details.")}return t.json()},ZMe=async e=>{const{id:t,...r}=e,n=await fetch(rr(`/api/projects/${t}`),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!n.ok){const i=await n.json().catch(()=>({error:"Failed to update project."}));throw new Error(i.error||"Failed to update project.")}},qse=()=>Us({queryKey:["jobs"],queryFn:QMe}),Gse=()=>{const e=Da();return{saveJobDetails:Tr({mutationFn:Vse,onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["jobs"]}),e.invalidateQueries({queryKey:["job"]}),e.invalidateQueries({queryKey:["projects"]}),r.projectId&&(e.invalidateQueries({queryKey:["project",r.projectId]}),e.invalidateQueries({queryKey:["job",r.projectId]})),e.invalidateQueries({queryKey:["material_orders"]})}})}},w4=()=>rr("/api/change-orders"),e6e=async()=>{const e=await fetch(w4());if(!e.ok)throw new Error("Failed to fetch change orders.");return e.json()},t6e=async e=>{const t=await fetch(w4(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to add change order.");return t.json()},r6e=async(e,t)=>{const r=await fetch(`${w4()}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to update change order.");return r.json()},n6e=async e=>{const t=await fetch(`${w4()}/${e}`,{method:"DELETE"});if(!t.ok){if(t.status===403||t.status===404){const r=await t.json();throw new Error(r.error||"Failed to delete change order.")}throw new Error("Failed to delete change order.")}},Kse=(e=!0)=>Us({queryKey:["changeOrders"],queryFn:e6e,enabled:e}),E7=()=>{const e=Da(),t=Tr({mutationFn:i=>t6e(i),onSuccess:(i,a)=>{e.invalidateQueries({queryKey:["change_orders",a.projectId]}),e.invalidateQueries({queryKey:["projects"]})}}),r=Tr({mutationFn:({id:i,data:a})=>r6e(i,a),onSuccess:i=>{e.invalidateQueries({queryKey:["change_orders",i.projectId]}),e.invalidateQueries({queryKey:["projects"]})}}),n=Tr({mutationFn:i=>n6e(i),onSuccess:()=>{e.invalidateQueries({queryKey:["change_orders"]}),e.invalidateQueries({queryKey:["projects"]})}});return{addChangeOrder:t.mutateAsync,updateChangeOrder:r.mutateAsync,deleteChangeOrder:n.mutateAsync}},jx=()=>rr("/api/orders"),i6e=async()=>{const e=await fetch(jx());if(!e.ok)throw new Error("Failed to fetch material orders.");return e.json()},a6e=async e=>{const t=await fetch(jx(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to create material order")}return t.json()},s6e=async(e,t)=>{const r=await fetch(`${jx()}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to update material order")}return r.json()},o6e=async e=>{const t=await fetch(`${jx()}/${e}`,{method:"DELETE"});if(!t.ok){const r=await t.json().catch(()=>({}));throw new Error(r.error||"Failed to delete material order")}},Xse=async e=>{const t=await fetch(`${jx()}/${e}/history`);if(!t.ok)throw new Error("Failed to fetch material order history.");return t.json()},l6e=async(e,t)=>{const r=new FormData;r.append("dateReceived",t.dateReceived),r.append("notes",t.notes),r.append("sendEmailNotification",String(t.sendEmailNotification)),t.files&&t.files.length>0&&Array.from(t.files).forEach(i=>{r.append("paperwork",i)});const n=await fetch(`${jx()}/${e}/receive`,{method:"POST",body:r});if(!n.ok){const i=await n.json().catch(()=>({}));throw new Error(i.error||"Failed to receive material order")}return n.json()},c6e=async(e,t)=>{const r=new FormData;r.append("items",JSON.stringify(t.items)),r.append("replacementEta",t.replacementEta),r.append("notes",t.notes),r.append("sendEmailNotification",String(t.sendEmailNotification)),t.files&&t.files.length>0&&Array.from(t.files).forEach(i=>{r.append("damagePhotos",i)});const n=await fetch(`${jx()}/${e}/damage`,{method:"POST",body:r});if(!n.ok){const i=await n.json().catch(()=>({}));throw new Error(i.error||"Failed to report damage")}return n.json()},S4=e=>Us({queryKey:["material_orders"],queryFn:()=>i6e(),select:t=>t}),E4=()=>{const e=Da(),t=Tr({mutationFn:s=>a6e(s),onSuccess:s=>{s.projectId&&e.invalidateQueries({queryKey:["material_orders",s.projectId]}),e.invalidateQueries({queryKey:["material_orders"]}),e.invalidateQueries({queryKey:["orders"]})}}),r=Tr({mutationFn:({id:s,data:o})=>s6e(s,o),onSuccess:s=>{s.projectId&&e.invalidateQueries({queryKey:["material_orders",s.projectId]}),e.invalidateQueries({queryKey:["material_orders"]}),e.invalidateQueries({queryKey:["orders"]}),e.invalidateQueries({queryKey:["material_orders","history",s.id]})}}),n=Tr({mutationFn:s=>o6e(s),onSuccess:()=>{e.invalidateQueries({queryKey:["material_orders"]}),e.invalidateQueries({queryKey:["orders"]})}}),i=Tr({mutationFn:({id:s,data:o})=>l6e(s,o),onSuccess:s=>{s.projectId&&e.invalidateQueries({queryKey:["material_orders",s.projectId]}),e.invalidateQueries({queryKey:["orders"]}),e.invalidateQueries({queryKey:["material_orders","history",s.id]})}}),a=Tr({mutationFn:({id:s,data:o})=>c6e(s,o),onSuccess:s=>{const{originalOrder:o,replacementOrder:l}=s;o.projectId&&e.invalidateQueries({queryKey:["material_orders",o.projectId]}),e.invalidateQueries({queryKey:["material_orders"]}),e.invalidateQueries({queryKey:["orders"]}),e.invalidateQueries({queryKey:["material_orders","history",o.id]}),l&&e.invalidateQueries({queryKey:["material_orders","history",l.id]})}});return{addMaterialOrder:t.mutateAsync,updateMaterialOrder:r.mutateAsync,deleteMaterialOrder:n.mutateAsync,receiveMaterialOrder:i.mutateAsync,reportMaterialOrderDamage:a.mutateAsync}},G0=()=>rr("/api/sample-checkouts"),u6e=async e=>{const t=G0(),r=e?`${t}?projectId=${e}`:t,n=await fetch(r,{credentials:"include"});if(!n.ok)throw new Error("Failed to fetch sample checkouts.");return n.json()},d6e=async e=>{const t=await fetch(`${G0()}?customerId=${e}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch customer samples.");return t.json()},f6e=async e=>{const t=await fetch(`${G0()}?installerId=${e}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch installer samples.");return t.json()},h6e=async e=>{const t=await fetch(G0(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!t.ok)throw new Error("Failed to check out sample.");return t.json()},p6e=async e=>{const t=await fetch(`${G0()}/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({}),credentials:"include"});if(!t.ok)throw new Error("Failed to return sample.");return t.json()},m6e=async(e,t)=>{const r=await fetch(`${G0()}/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});if(!r.ok)throw new Error("Failed to update sample checkout.");return r.json()},g6e=async e=>{const t=await fetch(`${G0()}/${e}/extend`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!t.ok)throw new Error("Failed to extend sample checkout.");return t.json()},Yse=async(e,t)=>{await fetch(`${G0()}/transfer`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({checkoutIds:e,projectId:t}),credentials:"include"})},KE=e=>Us({queryKey:e?["sample_checkouts","project",e]:["sample_checkouts"],queryFn:()=>u6e(e)}),Qse=()=>{const e=Da(),t=o=>{e.invalidateQueries({queryKey:["sample_checkouts"]}),o!=null&&o.projectId&&e.invalidateQueries({queryKey:["sample_checkouts","project",o.projectId]}),o!=null&&o.customerId&&e.invalidateQueries({queryKey:["sample_checkouts","customer",o.customerId]}),o!=null&&o.installerId&&e.invalidateQueries({queryKey:["sample_checkouts","installer",o.installerId]}),e.invalidateQueries({queryKey:["samples"]}),e.invalidateQueries({queryKey:["products"]})},r=Tr({mutationFn:o=>h6e(o),onSuccess:o=>{t(o)}}),n=Tr({mutationFn:o=>p6e(o),onSuccess:o=>{t(o)}}),i=Tr({mutationFn:({id:o,data:l})=>m6e(o,l),onSuccess:o=>{t(o)}}),a=Tr({mutationFn:o=>g6e(o),onSuccess:o=>{t(o)}}),s=Tr({mutationFn:({checkoutIds:o,projectId:l})=>Yse(o,l),onSuccess:(o,l)=>{e.invalidateQueries({queryKey:["sample_checkouts"]}),e.invalidateQueries({queryKey:["sample_checkouts","project",l.projectId]})}});return{addSampleCheckout:r.mutateAsync,returnSampleCheckout:n.mutateAsync,updateSampleCheckout:i.mutateAsync,patchSampleCheckout:i.mutateAsync,extendSampleCheckout:a.mutateAsync,transferCheckouts:s.mutateAsync}},x6e=()=>{const[e,t]=I.useState([]),[r,n]=I.useState([]),[i,a]=I.useState([]),[s,o]=I.useState([]),[l,c]=I.useState([]),[d,f]=I.useState([]),[p,m]=I.useState([]),x=I.useCallback(async(R,O,D,L)=>{try{const B=await O(L);D(B)}catch(B){console.error(`Error fetching ${R} history:`,B),Re.error(`Could not load ${R} history.`),D([])}},[]),v=I.useCallback(R=>x("customer",MMe,t,R),[x]),b=I.useCallback(R=>x("project",$Me,n,R),[x]),w=I.useCallback(R=>x("quote",Wse,a,R),[x]),k=I.useCallback(R=>x("installer",HMe,o,R),[x]),E=I.useCallback(R=>x("vendor",VMe,c,R),[x]),N=I.useCallback(R=>x("product",O=>EMe(String(O)),f,R),[x]),P=I.useCallback(R=>x("order",Xse,m,R),[x]);return{customerHistory:e,fetchCustomerHistory:v,projectHistory:r,fetchProjectHistory:b,quotesHistory:i,fetchQuotesHistory:w,installerHistory:s,fetchInstallerHistory:k,vendorHistory:l,fetchVendorHistory:E,sampleHistory:d,fetchSampleHistory:N,materialOrderHistory:p,fetchMaterialOrderHistory:P}},C7=async()=>{const e=await fetch(rr("/api/users"));if(!e.ok)throw new Error("Failed to fetch users");return e.json()},v6e=async(e,t,r,n)=>{const i=await fetch(rr("/api/users"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,firstName:t,lastName:r,role:n})});if(!i.ok){const a=await i.json();throw new Error(a.message||"Failed to create user")}return i.json()},y6e=async e=>{const t=await fetch(rr(`/api/users/${e}`),{method:"DELETE"});if(!t.ok){const r=await t.json();throw new Error(r.message||"Failed to delete user")}},Jse=async()=>{const e=await fetch(rr("/api/users/me"));if(!e.ok)throw new Error("Failed to fetch current user");return e.json()},b6e=async(e,t)=>{const r=await fetch(rr("/api/users/me/profile"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:e,lastName:t})});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to update profile")}return r.json()},w6e=async e=>{const t=new FormData;t.append("avatar",e);const r=await fetch(rr("/api/users/me/avatar"),{method:"POST",body:t});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to upload avatar")}return r.json()},S6e=async()=>{if(!(await fetch(rr("/api/users/me/avatar"),{method:"DELETE"})).ok)throw new Error("Failed to delete avatar")},E6e=async(e,t)=>{const r=await fetch(rr("/api/users/me/password"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:e,newPassword:t})});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to change password")}},C6e=async()=>{const e=await fetch(rr("/api/roles"));if(!e.ok)throw new Error("Failed to fetch roles");return e.json()},k6e=async(e,t)=>{const r=await fetch(rr(`/api/users/${e}/roles`),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({roles:t})});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to update user roles")}},Zse=()=>rr("/api/preferences"),XE=()=>rr("/api/preferences/system"),_6e=async()=>{try{const e=await fetch(Zse());if(!e.ok)throw new Error(`Failed to fetch preferences with status: ${e.status}`);return e.json()}catch(e){return console.error("Failed to fetch user preferences:",e),{}}},N6e=async e=>{try{const t=await fetch(Zse(),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to save preferences.")}return t.json()}catch(t){throw console.error("Failed to save user preferences:",t),t}},KA=async e=>{const t=await fetch(`${XE()}/${e}`);if(!t.ok)throw new Error(`Failed to fetch system preference: ${e}`);return t.json()},Q6=async(e,t)=>{if(!(await fetch(`${XE()}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw new Error(`Failed to save system preference: ${e}`)},A6e=async()=>{if(!(await fetch(`${XE()}/email_test`,{method:"POST"})).ok)throw new Error("Failed to send test email.")},Dx=async()=>KA("pricing"),T6e=async e=>Q6("pricing",e),I6e=async e=>{const t=await fetch(`${XE()}/branding`,{method:"POST",body:e});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to upload branding files.")}return t.json()},O6e=KA,P6e=async e=>{const t=await fetch(`${XE()}/branding/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Failed to delete ${e}.`);return t.json()};var XA={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */XA.exports;(function(e,t){(function(){var r,n="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",o="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,d="__lodash_placeholder__",f=1,p=2,m=4,x=1,v=2,b=1,w=2,k=4,E=8,N=16,P=32,R=64,O=128,D=256,L=512,B=30,z="...",H=800,te=16,Y=1,W=2,Z=3,re=1/0,X=9007199254740991,Q=17976931348623157e292,fe=NaN,ye=4294967295,J=ye-1,ce=ye>>>1,V=[["ary",O],["bind",b],["bindKey",w],["curry",E],["curryRight",N],["flip",L],["partial",P],["partialRight",R],["rearg",D]],G="[object Arguments]",ie="[object Array]",Ee="[object AsyncFunction]",ne="[object Boolean]",ae="[object Date]",me="[object DOMException]",ve="[object Error]",q="[object Function]",Ne="[object GeneratorFunction]",Pe="[object Map]",ze="[object Number]",De="[object Null]",$e="[object Object]",et="[object Promise]",ut="[object Proxy]",kt="[object RegExp]",ht="[object Set]",Rr="[object String]",er="[object Symbol]",ct="[object Undefined]",qt="[object WeakMap]",Lt="[object WeakSet]",dr="[object ArrayBuffer]",Gt="[object DataView]",qe="[object Float32Array]",Xe="[object Float64Array]",Te="[object Int8Array]",He="[object Int16Array]",je="[object Int32Array]",Ce="[object Uint8Array]",ot="[object Uint8ClampedArray]",xt="[object Uint16Array]",Dt="[object Uint32Array]",Pt=/\b__p \+= '';/g,Cr=/\b(__p \+=) '' \+/g,wn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,fr=/&(?:amp|lt|gt|quot|#39);/g,Vi=/[&<>"']/g,jn=RegExp(fr.source),Jo=RegExp(Vi.source),We=/<%-([\s\S]+?)%>/g,Je=/<%([\s\S]+?)%>/g,rt=/<%=([\s\S]+?)%>/g,_t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ut=/^\w*$/,ir=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tr=/[\\^$.*+?()[\]{}|]/g,$t=RegExp(tr.source),kr=/^\s+/,Jt=/\s/,Un=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,de=/\{\n\/\* \[wrapped with (.+)\] \*/,he=/,? & /,we=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,_e=/[()=,{}\[\]\/\s]/,pe=/\\(\\)?/g,ge=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Fe=/\w*$/,it=/^[-+]0x[0-9a-f]+$/i,Ge=/^0b[01]+$/i,Ye=/^\[object .+?Constructor\]$/,Ze=/^0o[0-7]+$/i,wt=/^(?:0|[1-9]\d*)$/,At=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,dt=/($^)/,St=/['\n\r\u2028\u2029\\]/g,Ot="\\ud800-\\udfff",Kt="\\u0300-\\u036f",at="\\ufe20-\\ufe2f",Vn="\\u20d0-\\u20ff",$r=Kt+at+Vn,wo="\\u2700-\\u27bf",gd="a-z\\xdf-\\xf6\\xf8-\\xff",gn="\\xac\\xb1\\xd7\\xf7",en="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",tn="\\u2000-\\u206f",So=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Zx="A-Z\\xc0-\\xd6\\xd8-\\xde",e1="\\ufe0e\\ufe0f",qi=gn+en+tn+So,yc="[']",EP="["+Ot+"]",Ni="["+qi+"]",jl="["+$r+"]",HC="\\d+",lp="["+wo+"]",Kn="["+gd+"]",Ma="[^"+Ot+qi+HC+wo+gd+Zx+"]",Qe="\\ud83c[\\udffb-\\udfff]",Ie="(?:"+jl+"|"+Qe+")",ar="[^"+Ot+"]",Gi="(?:\\ud83c[\\udde6-\\uddff]){2}",$s="[\\ud800-\\udbff][\\udc00-\\udfff]",cp="["+Zx+"]",t1="\\u200d",Eo="(?:"+Kn+"|"+Ma+")",mr="(?:"+cp+"|"+Ma+")",di="(?:"+yc+"(?:d|ll|m|re|s|t|ve))?",_b="(?:"+yc+"(?:D|LL|M|RE|S|T|VE))?",WC=Ie+"?",r1="["+e1+"]?",n1="(?:"+t1+"(?:"+[ar,Gi,$s].join("|")+")"+r1+WC+")*",Nb="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",CP="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",la=r1+WC+n1,om="(?:"+[lp,Gi,$s].join("|")+")"+la,xd="(?:"+[ar+jl+"?",jl,Gi,$s,EP].join("|")+")",_r=RegExp(yc,"g"),kP=RegExp(jl,"g"),zr=RegExp(Qe+"(?="+Qe+")|"+xd+la,"g"),Fa=RegExp([cp+"?"+Kn+"+"+di+"(?="+[Ni,cp,"$"].join("|")+")",mr+"+"+_b+"(?="+[Ni,cp+Eo,"$"].join("|")+")",cp+"?"+Eo+"+"+di,cp+"+"+_b,CP,Nb,HC,om].join("|"),"g"),_P=RegExp("["+t1+Ot+$r+e1+"]"),Ab=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,VC=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Cf=-1,oi={};oi[qe]=oi[Xe]=oi[Te]=oi[He]=oi[je]=oi[Ce]=oi[ot]=oi[xt]=oi[Dt]=!0,oi[G]=oi[ie]=oi[dr]=oi[ne]=oi[Gt]=oi[ae]=oi[ve]=oi[q]=oi[Pe]=oi[ze]=oi[$e]=oi[kt]=oi[ht]=oi[Rr]=oi[qt]=!1;var Dn={};Dn[G]=Dn[ie]=Dn[dr]=Dn[Gt]=Dn[ne]=Dn[ae]=Dn[qe]=Dn[Xe]=Dn[Te]=Dn[He]=Dn[je]=Dn[Pe]=Dn[ze]=Dn[$e]=Dn[kt]=Dn[ht]=Dn[Rr]=Dn[er]=Dn[Ce]=Dn[ot]=Dn[xt]=Dn[Dt]=!0,Dn[ve]=Dn[q]=Dn[qt]=!1;var lm={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},cm={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},qC={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},um={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},dm=parseFloat,zs=parseInt,Tb=typeof Ve=="object"&&Ve&&Ve.Object===Object&&Ve,GC=typeof self=="object"&&self&&self.Object===Object&&self,wa=Tb||GC||Function("return this")(),Ib=t&&!t.nodeType&&t,kf=Ib&&!0&&e&&!e.nodeType&&e,KC=kf&&kf.exports===Ib,Mn=KC&&Tb.process,Co=function(){try{var ue=kf&&kf.require&&kf.require("util").types;return ue||Mn&&Mn.binding&&Mn.binding("util")}catch{}}(),fm=Co&&Co.isArrayBuffer,Su=Co&&Co.isDate,XC=Co&&Co.isMap,tt=Co&&Co.isRegExp,Kr=Co&&Co.isSet,Sa=Co&&Co.isTypedArray;function Ya(ue,Se,Ae){switch(Ae.length){case 0:return ue.call(Se);case 1:return ue.call(Se,Ae[0]);case 2:return ue.call(Se,Ae[0],Ae[1]);case 3:return ue.call(Se,Ae[0],Ae[1],Ae[2])}return ue.apply(Se,Ae)}function YC(ue,Se,Ae,Be){for(var lt=-1,gt=ue==null?0:ue.length;++lt<gt;){var vt=ue[lt];Se(Be,vt,Ae(vt),ue)}return Be}function Zo(ue,Se){for(var Ae=-1,Be=ue==null?0:ue.length;++Ae<Be&&Se(ue[Ae],Ae,ue)!==!1;);return ue}function NP(ue,Se){for(var Ae=ue==null?0:ue.length;Ae--&&Se(ue[Ae],Ae,ue)!==!1;);return ue}function QC(ue,Se){for(var Ae=-1,Be=ue==null?0:ue.length;++Ae<Be;)if(!Se(ue[Ae],Ae,ue))return!1;return!0}function bc(ue,Se){for(var Ae=-1,Be=ue==null?0:ue.length,lt=0,gt=[];++Ae<Be;){var vt=ue[Ae];Se(vt,Ae,ue)&&(gt[lt++]=vt)}return gt}function Ai(ue,Se){var Ae=ue==null?0:ue.length;return!!Ae&&Es(ue,Se,0)>-1}function hm(ue,Se,Ae){for(var Be=-1,lt=ue==null?0:ue.length;++Be<lt;)if(Ae(Se,ue[Be]))return!0;return!1}function Mr(ue,Se){for(var Ae=-1,Be=ue==null?0:ue.length,lt=Array(Be);++Ae<Be;)lt[Ae]=Se(ue[Ae],Ae,ue);return lt}function Dl(ue,Se){for(var Ae=-1,Be=Se.length,lt=ue.length;++Ae<Be;)ue[lt+Ae]=Se[Ae];return ue}function Eu(ue,Se,Ae,Be){var lt=-1,gt=ue==null?0:ue.length;for(Be&&gt&&(Ae=ue[++lt]);++lt<gt;)Ae=Se(Ae,ue[lt],lt,ue);return Ae}function Xn(ue,Se,Ae,Be){var lt=ue==null?0:ue.length;for(Be&&lt&&(Ae=ue[--lt]);lt--;)Ae=Se(Ae,ue[lt],lt,ue);return Ae}function gr(ue,Se){for(var Ae=-1,Be=ue==null?0:ue.length;++Ae<Be;)if(Se(ue[Ae],Ae,ue))return!0;return!1}var AP=s1("length");function li(ue){return ue.split("")}function _f(ue){return ue.match(we)||[]}function Nf(ue,Se,Ae){var Be;return Ae(ue,function(lt,gt,vt){if(Se(lt,gt,vt))return Be=gt,!1}),Be}function i1(ue,Se,Ae,Be){for(var lt=ue.length,gt=Ae+(Be?1:-1);Be?gt--:++gt<lt;)if(Se(ue[gt],gt,ue))return gt;return-1}function Es(ue,Se,Ae){return Se===Se?y(ue,Se,Ae):i1(ue,Pb,Ae)}function Ob(ue,Se,Ae,Be){for(var lt=Ae-1,gt=ue.length;++lt<gt;)if(Be(ue[lt],Se))return lt;return-1}function Pb(ue){return ue!==ue}function a1(ue,Se){var Ae=ue==null?0:ue.length;return Ae?pm(ue,Se)/Ae:fe}function s1(ue){return function(Se){return Se==null?r:Se[ue]}}function o1(ue){return function(Se){return ue==null?r:ue[Se]}}function JC(ue,Se,Ae,Be,lt){return lt(ue,function(gt,vt,Zt){Ae=Be?(Be=!1,gt):Se(Ae,gt,vt,Zt)}),Ae}function up(ue,Se){var Ae=ue.length;for(ue.sort(Se);Ae--;)ue[Ae]=ue[Ae].value;return ue}function pm(ue,Se){for(var Ae,Be=-1,lt=ue.length;++Be<lt;){var gt=Se(ue[Be]);gt!==r&&(Ae=Ae===r?gt:Ae+gt)}return Ae}function Rb(ue,Se){for(var Ae=-1,Be=Array(ue);++Ae<ue;)Be[Ae]=Se(Ae);return Be}function mm(ue,Se){return Mr(Se,function(Ae){return[Ae,ue[Ae]]})}function ZC(ue){return ue&&ue.slice(0,j(ue)+1).replace(kr,"")}function Ki(ue){return function(Se){return ue(Se)}}function dp(ue,Se){return Mr(Se,function(Ae){return ue[Ae]})}function Qa(ue,Se){return ue.has(Se)}function jb(ue,Se){for(var Ae=-1,Be=ue.length;++Ae<Be&&Es(Se,ue[Ae],0)>-1;);return Ae}function Ml(ue,Se){for(var Ae=ue.length;Ae--&&Es(Se,ue[Ae],0)>-1;);return Ae}function TP(ue,Se){for(var Ae=ue.length,Be=0;Ae--;)ue[Ae]===Se&&++Be;return Be}var Db=o1(lm),IP=o1(cm);function ek(ue){return"\\"+um[ue]}function wc(ue,Se){return ue==null?r:ue[Se]}function fp(ue){return _P.test(ue)}function Mb(ue){return Ab.test(ue)}function gm(ue){for(var Se,Ae=[];!(Se=ue.next()).done;)Ae.push(Se.value);return Ae}function Sn(ue){var Se=-1,Ae=Array(ue.size);return ue.forEach(function(Be,lt){Ae[++Se]=[lt,Be]}),Ae}function xm(ue,Se){return function(Ae){return ue(Se(Ae))}}function se(ue,Se){for(var Ae=-1,Be=ue.length,lt=0,gt=[];++Ae<Be;){var vt=ue[Ae];(vt===Se||vt===d)&&(ue[Ae]=d,gt[lt++]=Ae)}return gt}function h(ue){var Se=-1,Ae=Array(ue.size);return ue.forEach(function(Be){Ae[++Se]=Be}),Ae}function g(ue){var Se=-1,Ae=Array(ue.size);return ue.forEach(function(Be){Ae[++Se]=[Be,Be]}),Ae}function y(ue,Se,Ae){for(var Be=Ae-1,lt=ue.length;++Be<lt;)if(ue[Be]===Se)return Be;return-1}function C(ue,Se,Ae){for(var Be=Ae+1;Be--;)if(ue[Be]===Se)return Be;return Be}function _(ue){return fp(ue)?U(ue):AP(ue)}function T(ue){return fp(ue)?ee(ue):li(ue)}function j(ue){for(var Se=ue.length;Se--&&Jt.test(ue.charAt(Se)););return Se}var F=o1(qC);function U(ue){for(var Se=zr.lastIndex=0;zr.test(ue);)++Se;return Se}function ee(ue){return ue.match(zr)||[]}function oe(ue){return ue.match(Fa)||[]}var xe=function ue(Se){Se=Se==null?wa:Oe.defaults(wa.Object(),Se,Oe.pick(wa,VC));var Ae=Se.Array,Be=Se.Date,lt=Se.Error,gt=Se.Function,vt=Se.Math,Zt=Se.Object,Fr=Se.RegExp,Hs=Se.String,Ti=Se.TypeError,La=Ae.prototype,Yn=gt.prototype,Ii=Zt.prototype,Ja=Se["__core-js_shared__"],Cu=Yn.toString,kn=Ii.hasOwnProperty,OP=0,tk=function(){var S=/[^.]+$/.exec(Ja&&Ja.keys&&Ja.keys.IE_PROTO||"");return S?"Symbol(src)_1."+S:""}(),rk=Ii.toString,Lve=Cu.call(Zt),Bve=wa._,Uve=Fr("^"+Cu.call(kn).replace(tr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nk=KC?Se.Buffer:r,hp=Se.Symbol,ik=Se.Uint8Array,K$=nk?nk.allocUnsafe:r,ak=xm(Zt.getPrototypeOf,Zt),X$=Zt.create,Y$=Ii.propertyIsEnumerable,sk=La.splice,Q$=hp?hp.isConcatSpreadable:r,Fb=hp?hp.iterator:r,vm=hp?hp.toStringTag:r,ok=function(){try{var S=Em(Zt,"defineProperty");return S({},"",{}),S}catch{}}(),$ve=Se.clearTimeout!==wa.clearTimeout&&Se.clearTimeout,zve=Be&&Be.now!==wa.Date.now&&Be.now,Hve=Se.setTimeout!==wa.setTimeout&&Se.setTimeout,lk=vt.ceil,ck=vt.floor,PP=Zt.getOwnPropertySymbols,Wve=nk?nk.isBuffer:r,J$=Se.isFinite,Vve=La.join,qve=xm(Zt.keys,Zt),Ba=vt.max,Ws=vt.min,Gve=Be.now,Kve=Se.parseInt,Z$=vt.random,Xve=La.reverse,RP=Em(Se,"DataView"),Lb=Em(Se,"Map"),jP=Em(Se,"Promise"),l1=Em(Se,"Set"),Bb=Em(Se,"WeakMap"),Ub=Em(Zt,"create"),uk=Bb&&new Bb,c1={},Yve=Cm(RP),Qve=Cm(Lb),Jve=Cm(jP),Zve=Cm(l1),eye=Cm(Bb),dk=hp?hp.prototype:r,$b=dk?dk.valueOf:r,ez=dk?dk.toString:r;function be(S){if(Xi(S)&&!Wr(S)&&!(S instanceof _n)){if(S instanceof Sc)return S;if(kn.call(S,"__wrapped__"))return tH(S)}return new Sc(S)}var u1=function(){function S(){}return function(A){if(!Li(A))return{};if(X$)return X$(A);S.prototype=A;var M=new S;return S.prototype=r,M}}();function fk(){}function Sc(S,A){this.__wrapped__=S,this.__actions__=[],this.__chain__=!!A,this.__index__=0,this.__values__=r}be.templateSettings={escape:We,evaluate:Je,interpolate:rt,variable:"",imports:{_:be}},be.prototype=fk.prototype,be.prototype.constructor=be,Sc.prototype=u1(fk.prototype),Sc.prototype.constructor=Sc;function _n(S){this.__wrapped__=S,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ye,this.__views__=[]}function tye(){var S=new _n(this.__wrapped__);return S.__actions__=el(this.__actions__),S.__dir__=this.__dir__,S.__filtered__=this.__filtered__,S.__iteratees__=el(this.__iteratees__),S.__takeCount__=this.__takeCount__,S.__views__=el(this.__views__),S}function rye(){if(this.__filtered__){var S=new _n(this);S.__dir__=-1,S.__filtered__=!0}else S=this.clone(),S.__dir__*=-1;return S}function nye(){var S=this.__wrapped__.value(),A=this.__dir__,M=Wr(S),K=A<0,le=M?S.length:0,ke=mbe(0,le,this.__views__),Me=ke.start,Ue=ke.end,Ke=Ue-Me,yt=K?Ue:Me-1,bt=this.__iteratees__,Nt=bt.length,Ht=0,nr=Ws(Ke,this.__takeCount__);if(!M||!K&&le==Ke&&nr==Ke)return Cz(S,this.__actions__);var Ir=[];e:for(;Ke--&&Ht<nr;){yt+=A;for(var on=-1,Or=S[yt];++on<Nt;){var En=bt[on],An=En.iteratee,Bl=En.type,No=An(Or);if(Bl==W)Or=No;else if(!No){if(Bl==Y)continue e;break e}}Ir[Ht++]=Or}return Ir}_n.prototype=u1(fk.prototype),_n.prototype.constructor=_n;function ym(S){var A=-1,M=S==null?0:S.length;for(this.clear();++A<M;){var K=S[A];this.set(K[0],K[1])}}function iye(){this.__data__=Ub?Ub(null):{},this.size=0}function aye(S){var A=this.has(S)&&delete this.__data__[S];return this.size-=A?1:0,A}function sye(S){var A=this.__data__;if(Ub){var M=A[S];return M===l?r:M}return kn.call(A,S)?A[S]:r}function oye(S){var A=this.__data__;return Ub?A[S]!==r:kn.call(A,S)}function lye(S,A){var M=this.__data__;return this.size+=this.has(S)?0:1,M[S]=Ub&&A===r?l:A,this}ym.prototype.clear=iye,ym.prototype.delete=aye,ym.prototype.get=sye,ym.prototype.has=oye,ym.prototype.set=lye;function Af(S){var A=-1,M=S==null?0:S.length;for(this.clear();++A<M;){var K=S[A];this.set(K[0],K[1])}}function cye(){this.__data__=[],this.size=0}function uye(S){var A=this.__data__,M=hk(A,S);if(M<0)return!1;var K=A.length-1;return M==K?A.pop():sk.call(A,M,1),--this.size,!0}function dye(S){var A=this.__data__,M=hk(A,S);return M<0?r:A[M][1]}function fye(S){return hk(this.__data__,S)>-1}function hye(S,A){var M=this.__data__,K=hk(M,S);return K<0?(++this.size,M.push([S,A])):M[K][1]=A,this}Af.prototype.clear=cye,Af.prototype.delete=uye,Af.prototype.get=dye,Af.prototype.has=fye,Af.prototype.set=hye;function Tf(S){var A=-1,M=S==null?0:S.length;for(this.clear();++A<M;){var K=S[A];this.set(K[0],K[1])}}function pye(){this.size=0,this.__data__={hash:new ym,map:new(Lb||Af),string:new ym}}function mye(S){var A=kk(this,S).delete(S);return this.size-=A?1:0,A}function gye(S){return kk(this,S).get(S)}function xye(S){return kk(this,S).has(S)}function vye(S,A){var M=kk(this,S),K=M.size;return M.set(S,A),this.size+=M.size==K?0:1,this}Tf.prototype.clear=pye,Tf.prototype.delete=mye,Tf.prototype.get=gye,Tf.prototype.has=xye,Tf.prototype.set=vye;function bm(S){var A=-1,M=S==null?0:S.length;for(this.__data__=new Tf;++A<M;)this.add(S[A])}function yye(S){return this.__data__.set(S,l),this}function bye(S){return this.__data__.has(S)}bm.prototype.add=bm.prototype.push=yye,bm.prototype.has=bye;function ku(S){var A=this.__data__=new Af(S);this.size=A.size}function wye(){this.__data__=new Af,this.size=0}function Sye(S){var A=this.__data__,M=A.delete(S);return this.size=A.size,M}function Eye(S){return this.__data__.get(S)}function Cye(S){return this.__data__.has(S)}function kye(S,A){var M=this.__data__;if(M instanceof Af){var K=M.__data__;if(!Lb||K.length<i-1)return K.push([S,A]),this.size=++M.size,this;M=this.__data__=new Tf(K)}return M.set(S,A),this.size=M.size,this}ku.prototype.clear=wye,ku.prototype.delete=Sye,ku.prototype.get=Eye,ku.prototype.has=Cye,ku.prototype.set=kye;function tz(S,A){var M=Wr(S),K=!M&&km(S),le=!M&&!K&&vp(S),ke=!M&&!K&&!le&&p1(S),Me=M||K||le||ke,Ue=Me?Rb(S.length,Hs):[],Ke=Ue.length;for(var yt in S)(A||kn.call(S,yt))&&!(Me&&(yt=="length"||le&&(yt=="offset"||yt=="parent")||ke&&(yt=="buffer"||yt=="byteLength"||yt=="byteOffset")||Rf(yt,Ke)))&&Ue.push(yt);return Ue}function rz(S){var A=S.length;return A?S[VP(0,A-1)]:r}function _ye(S,A){return _k(el(S),wm(A,0,S.length))}function Nye(S){return _k(el(S))}function DP(S,A,M){(M!==r&&!_u(S[A],M)||M===r&&!(A in S))&&If(S,A,M)}function zb(S,A,M){var K=S[A];(!(kn.call(S,A)&&_u(K,M))||M===r&&!(A in S))&&If(S,A,M)}function hk(S,A){for(var M=S.length;M--;)if(_u(S[M][0],A))return M;return-1}function Aye(S,A,M,K){return pp(S,function(le,ke,Me){A(K,le,M(le),Me)}),K}function nz(S,A){return S&&yd(A,Za(A),S)}function Tye(S,A){return S&&yd(A,rl(A),S)}function If(S,A,M){A=="__proto__"&&ok?ok(S,A,{configurable:!0,enumerable:!0,value:M,writable:!0}):S[A]=M}function MP(S,A){for(var M=-1,K=A.length,le=Ae(K),ke=S==null;++M<K;)le[M]=ke?r:gR(S,A[M]);return le}function wm(S,A,M){return S===S&&(M!==r&&(S=S<=M?S:M),A!==r&&(S=S>=A?S:A)),S}function Ec(S,A,M,K,le,ke){var Me,Ue=A&f,Ke=A&p,yt=A&m;if(M&&(Me=le?M(S,K,le,ke):M(S)),Me!==r)return Me;if(!Li(S))return S;var bt=Wr(S);if(bt){if(Me=xbe(S),!Ue)return el(S,Me)}else{var Nt=Vs(S),Ht=Nt==q||Nt==Ne;if(vp(S))return Nz(S,Ue);if(Nt==$e||Nt==G||Ht&&!le){if(Me=Ke||Ht?{}:qz(S),!Ue)return Ke?sbe(S,Tye(Me,S)):abe(S,nz(Me,S))}else{if(!Dn[Nt])return le?S:{};Me=vbe(S,Nt,Ue)}}ke||(ke=new ku);var nr=ke.get(S);if(nr)return nr;ke.set(S,Me),wH(S)?S.forEach(function(Or){Me.add(Ec(Or,A,M,Or,S,ke))}):yH(S)&&S.forEach(function(Or,En){Me.set(En,Ec(Or,A,M,En,S,ke))});var Ir=yt?Ke?rR:tR:Ke?rl:Za,on=bt?r:Ir(S);return Zo(on||S,function(Or,En){on&&(En=Or,Or=S[En]),zb(Me,En,Ec(Or,A,M,En,S,ke))}),Me}function Iye(S){var A=Za(S);return function(M){return iz(M,S,A)}}function iz(S,A,M){var K=M.length;if(S==null)return!K;for(S=Zt(S);K--;){var le=M[K],ke=A[le],Me=S[le];if(Me===r&&!(le in S)||!ke(Me))return!1}return!0}function az(S,A,M){if(typeof S!="function")throw new Ti(s);return Xb(function(){S.apply(r,M)},A)}function Hb(S,A,M,K){var le=-1,ke=Ai,Me=!0,Ue=S.length,Ke=[],yt=A.length;if(!Ue)return Ke;M&&(A=Mr(A,Ki(M))),K?(ke=hm,Me=!1):A.length>=i&&(ke=Qa,Me=!1,A=new bm(A));e:for(;++le<Ue;){var bt=S[le],Nt=M==null?bt:M(bt);if(bt=K||bt!==0?bt:0,Me&&Nt===Nt){for(var Ht=yt;Ht--;)if(A[Ht]===Nt)continue e;Ke.push(bt)}else ke(A,Nt,K)||Ke.push(bt)}return Ke}var pp=Pz(vd),sz=Pz(LP,!0);function Oye(S,A){var M=!0;return pp(S,function(K,le,ke){return M=!!A(K,le,ke),M}),M}function pk(S,A,M){for(var K=-1,le=S.length;++K<le;){var ke=S[K],Me=A(ke);if(Me!=null&&(Ue===r?Me===Me&&!Ll(Me):M(Me,Ue)))var Ue=Me,Ke=ke}return Ke}function Pye(S,A,M,K){var le=S.length;for(M=rn(M),M<0&&(M=-M>le?0:le+M),K=K===r||K>le?le:rn(K),K<0&&(K+=le),K=M>K?0:EH(K);M<K;)S[M++]=A;return S}function oz(S,A){var M=[];return pp(S,function(K,le,ke){A(K,le,ke)&&M.push(K)}),M}function Cs(S,A,M,K,le){var ke=-1,Me=S.length;for(M||(M=bbe),le||(le=[]);++ke<Me;){var Ue=S[ke];A>0&&M(Ue)?A>1?Cs(Ue,A-1,M,K,le):Dl(le,Ue):K||(le[le.length]=Ue)}return le}var FP=Rz(),lz=Rz(!0);function vd(S,A){return S&&FP(S,A,Za)}function LP(S,A){return S&&lz(S,A,Za)}function mk(S,A){return bc(A,function(M){return jf(S[M])})}function Sm(S,A){A=gp(A,S);for(var M=0,K=A.length;S!=null&&M<K;)S=S[bd(A[M++])];return M&&M==K?S:r}function cz(S,A,M){var K=A(S);return Wr(S)?K:Dl(K,M(S))}function ko(S){return S==null?S===r?ct:De:vm&&vm in Zt(S)?pbe(S):Nbe(S)}function BP(S,A){return S>A}function Rye(S,A){return S!=null&&kn.call(S,A)}function jye(S,A){return S!=null&&A in Zt(S)}function Dye(S,A,M){return S>=Ws(A,M)&&S<Ba(A,M)}function UP(S,A,M){for(var K=M?hm:Ai,le=S[0].length,ke=S.length,Me=ke,Ue=Ae(ke),Ke=1/0,yt=[];Me--;){var bt=S[Me];Me&&A&&(bt=Mr(bt,Ki(A))),Ke=Ws(bt.length,Ke),Ue[Me]=!M&&(A||le>=120&&bt.length>=120)?new bm(Me&&bt):r}bt=S[0];var Nt=-1,Ht=Ue[0];e:for(;++Nt<le&&yt.length<Ke;){var nr=bt[Nt],Ir=A?A(nr):nr;if(nr=M||nr!==0?nr:0,!(Ht?Qa(Ht,Ir):K(yt,Ir,M))){for(Me=ke;--Me;){var on=Ue[Me];if(!(on?Qa(on,Ir):K(S[Me],Ir,M)))continue e}Ht&&Ht.push(Ir),yt.push(nr)}}return yt}function Mye(S,A,M,K){return vd(S,function(le,ke,Me){A(K,M(le),ke,Me)}),K}function Wb(S,A,M){A=gp(A,S),S=Yz(S,A);var K=S==null?S:S[bd(kc(A))];return K==null?r:Ya(K,S,M)}function uz(S){return Xi(S)&&ko(S)==G}function Fye(S){return Xi(S)&&ko(S)==dr}function Lye(S){return Xi(S)&&ko(S)==ae}function Vb(S,A,M,K,le){return S===A?!0:S==null||A==null||!Xi(S)&&!Xi(A)?S!==S&&A!==A:Bye(S,A,M,K,Vb,le)}function Bye(S,A,M,K,le,ke){var Me=Wr(S),Ue=Wr(A),Ke=Me?ie:Vs(S),yt=Ue?ie:Vs(A);Ke=Ke==G?$e:Ke,yt=yt==G?$e:yt;var bt=Ke==$e,Nt=yt==$e,Ht=Ke==yt;if(Ht&&vp(S)){if(!vp(A))return!1;Me=!0,bt=!1}if(Ht&&!bt)return ke||(ke=new ku),Me||p1(S)?Hz(S,A,M,K,le,ke):fbe(S,A,Ke,M,K,le,ke);if(!(M&x)){var nr=bt&&kn.call(S,"__wrapped__"),Ir=Nt&&kn.call(A,"__wrapped__");if(nr||Ir){var on=nr?S.value():S,Or=Ir?A.value():A;return ke||(ke=new ku),le(on,Or,M,K,ke)}}return Ht?(ke||(ke=new ku),hbe(S,A,M,K,le,ke)):!1}function Uye(S){return Xi(S)&&Vs(S)==Pe}function $P(S,A,M,K){var le=M.length,ke=le,Me=!K;if(S==null)return!ke;for(S=Zt(S);le--;){var Ue=M[le];if(Me&&Ue[2]?Ue[1]!==S[Ue[0]]:!(Ue[0]in S))return!1}for(;++le<ke;){Ue=M[le];var Ke=Ue[0],yt=S[Ke],bt=Ue[1];if(Me&&Ue[2]){if(yt===r&&!(Ke in S))return!1}else{var Nt=new ku;if(K)var Ht=K(yt,bt,Ke,S,A,Nt);if(!(Ht===r?Vb(bt,yt,x|v,K,Nt):Ht))return!1}}return!0}function dz(S){if(!Li(S)||Sbe(S))return!1;var A=jf(S)?Uve:Ye;return A.test(Cm(S))}function $ye(S){return Xi(S)&&ko(S)==kt}function zye(S){return Xi(S)&&Vs(S)==ht}function Hye(S){return Xi(S)&&Pk(S.length)&&!!oi[ko(S)]}function fz(S){return typeof S=="function"?S:S==null?nl:typeof S=="object"?Wr(S)?mz(S[0],S[1]):pz(S):jH(S)}function zP(S){if(!Kb(S))return qve(S);var A=[];for(var M in Zt(S))kn.call(S,M)&&M!="constructor"&&A.push(M);return A}function Wye(S){if(!Li(S))return _be(S);var A=Kb(S),M=[];for(var K in S)K=="constructor"&&(A||!kn.call(S,K))||M.push(K);return M}function HP(S,A){return S<A}function hz(S,A){var M=-1,K=tl(S)?Ae(S.length):[];return pp(S,function(le,ke,Me){K[++M]=A(le,ke,Me)}),K}function pz(S){var A=iR(S);return A.length==1&&A[0][2]?Kz(A[0][0],A[0][1]):function(M){return M===S||$P(M,S,A)}}function mz(S,A){return sR(S)&&Gz(A)?Kz(bd(S),A):function(M){var K=gR(M,S);return K===r&&K===A?xR(M,S):Vb(A,K,x|v)}}function gk(S,A,M,K,le){S!==A&&FP(A,function(ke,Me){if(le||(le=new ku),Li(ke))Vye(S,A,Me,M,gk,K,le);else{var Ue=K?K(lR(S,Me),ke,Me+"",S,A,le):r;Ue===r&&(Ue=ke),DP(S,Me,Ue)}},rl)}function Vye(S,A,M,K,le,ke,Me){var Ue=lR(S,M),Ke=lR(A,M),yt=Me.get(Ke);if(yt){DP(S,M,yt);return}var bt=ke?ke(Ue,Ke,M+"",S,A,Me):r,Nt=bt===r;if(Nt){var Ht=Wr(Ke),nr=!Ht&&vp(Ke),Ir=!Ht&&!nr&&p1(Ke);bt=Ke,Ht||nr||Ir?Wr(Ue)?bt=Ue:ca(Ue)?bt=el(Ue):nr?(Nt=!1,bt=Nz(Ke,!0)):Ir?(Nt=!1,bt=Az(Ke,!0)):bt=[]:Yb(Ke)||km(Ke)?(bt=Ue,km(Ue)?bt=CH(Ue):(!Li(Ue)||jf(Ue))&&(bt=qz(Ke))):Nt=!1}Nt&&(Me.set(Ke,bt),le(bt,Ke,K,ke,Me),Me.delete(Ke)),DP(S,M,bt)}function gz(S,A){var M=S.length;if(M)return A+=A<0?M:0,Rf(A,M)?S[A]:r}function xz(S,A,M){A.length?A=Mr(A,function(ke){return Wr(ke)?function(Me){return Sm(Me,ke.length===1?ke[0]:ke)}:ke}):A=[nl];var K=-1;A=Mr(A,Ki(Nr()));var le=hz(S,function(ke,Me,Ue){var Ke=Mr(A,function(yt){return yt(ke)});return{criteria:Ke,index:++K,value:ke}});return up(le,function(ke,Me){return ibe(ke,Me,M)})}function qye(S,A){return vz(S,A,function(M,K){return xR(S,K)})}function vz(S,A,M){for(var K=-1,le=A.length,ke={};++K<le;){var Me=A[K],Ue=Sm(S,Me);M(Ue,Me)&&qb(ke,gp(Me,S),Ue)}return ke}function Gye(S){return function(A){return Sm(A,S)}}function WP(S,A,M,K){var le=K?Ob:Es,ke=-1,Me=A.length,Ue=S;for(S===A&&(A=el(A)),M&&(Ue=Mr(S,Ki(M)));++ke<Me;)for(var Ke=0,yt=A[ke],bt=M?M(yt):yt;(Ke=le(Ue,bt,Ke,K))>-1;)Ue!==S&&sk.call(Ue,Ke,1),sk.call(S,Ke,1);return S}function yz(S,A){for(var M=S?A.length:0,K=M-1;M--;){var le=A[M];if(M==K||le!==ke){var ke=le;Rf(le)?sk.call(S,le,1):KP(S,le)}}return S}function VP(S,A){return S+ck(Z$()*(A-S+1))}function Kye(S,A,M,K){for(var le=-1,ke=Ba(lk((A-S)/(M||1)),0),Me=Ae(ke);ke--;)Me[K?ke:++le]=S,S+=M;return Me}function qP(S,A){var M="";if(!S||A<1||A>X)return M;do A%2&&(M+=S),A=ck(A/2),A&&(S+=S);while(A);return M}function fn(S,A){return cR(Xz(S,A,nl),S+"")}function Xye(S){return rz(m1(S))}function Yye(S,A){var M=m1(S);return _k(M,wm(A,0,M.length))}function qb(S,A,M,K){if(!Li(S))return S;A=gp(A,S);for(var le=-1,ke=A.length,Me=ke-1,Ue=S;Ue!=null&&++le<ke;){var Ke=bd(A[le]),yt=M;if(Ke==="__proto__"||Ke==="constructor"||Ke==="prototype")return S;if(le!=Me){var bt=Ue[Ke];yt=K?K(bt,Ke,Ue):r,yt===r&&(yt=Li(bt)?bt:Rf(A[le+1])?[]:{})}zb(Ue,Ke,yt),Ue=Ue[Ke]}return S}var bz=uk?function(S,A){return uk.set(S,A),S}:nl,Qye=ok?function(S,A){return ok(S,"toString",{configurable:!0,enumerable:!1,value:yR(A),writable:!0})}:nl;function Jye(S){return _k(m1(S))}function Cc(S,A,M){var K=-1,le=S.length;A<0&&(A=-A>le?0:le+A),M=M>le?le:M,M<0&&(M+=le),le=A>M?0:M-A>>>0,A>>>=0;for(var ke=Ae(le);++K<le;)ke[K]=S[K+A];return ke}function Zye(S,A){var M;return pp(S,function(K,le,ke){return M=A(K,le,ke),!M}),!!M}function xk(S,A,M){var K=0,le=S==null?K:S.length;if(typeof A=="number"&&A===A&&le<=ce){for(;K<le;){var ke=K+le>>>1,Me=S[ke];Me!==null&&!Ll(Me)&&(M?Me<=A:Me<A)?K=ke+1:le=ke}return le}return GP(S,A,nl,M)}function GP(S,A,M,K){var le=0,ke=S==null?0:S.length;if(ke===0)return 0;A=M(A);for(var Me=A!==A,Ue=A===null,Ke=Ll(A),yt=A===r;le<ke;){var bt=ck((le+ke)/2),Nt=M(S[bt]),Ht=Nt!==r,nr=Nt===null,Ir=Nt===Nt,on=Ll(Nt);if(Me)var Or=K||Ir;else yt?Or=Ir&&(K||Ht):Ue?Or=Ir&&Ht&&(K||!nr):Ke?Or=Ir&&Ht&&!nr&&(K||!on):nr||on?Or=!1:Or=K?Nt<=A:Nt<A;Or?le=bt+1:ke=bt}return Ws(ke,J)}function wz(S,A){for(var M=-1,K=S.length,le=0,ke=[];++M<K;){var Me=S[M],Ue=A?A(Me):Me;if(!M||!_u(Ue,Ke)){var Ke=Ue;ke[le++]=Me===0?0:Me}}return ke}function Sz(S){return typeof S=="number"?S:Ll(S)?fe:+S}function Fl(S){if(typeof S=="string")return S;if(Wr(S))return Mr(S,Fl)+"";if(Ll(S))return ez?ez.call(S):"";var A=S+"";return A=="0"&&1/S==-re?"-0":A}function mp(S,A,M){var K=-1,le=Ai,ke=S.length,Me=!0,Ue=[],Ke=Ue;if(M)Me=!1,le=hm;else if(ke>=i){var yt=A?null:ube(S);if(yt)return h(yt);Me=!1,le=Qa,Ke=new bm}else Ke=A?[]:Ue;e:for(;++K<ke;){var bt=S[K],Nt=A?A(bt):bt;if(bt=M||bt!==0?bt:0,Me&&Nt===Nt){for(var Ht=Ke.length;Ht--;)if(Ke[Ht]===Nt)continue e;A&&Ke.push(Nt),Ue.push(bt)}else le(Ke,Nt,M)||(Ke!==Ue&&Ke.push(Nt),Ue.push(bt))}return Ue}function KP(S,A){return A=gp(A,S),S=Yz(S,A),S==null||delete S[bd(kc(A))]}function Ez(S,A,M,K){return qb(S,A,M(Sm(S,A)),K)}function vk(S,A,M,K){for(var le=S.length,ke=K?le:-1;(K?ke--:++ke<le)&&A(S[ke],ke,S););return M?Cc(S,K?0:ke,K?ke+1:le):Cc(S,K?ke+1:0,K?le:ke)}function Cz(S,A){var M=S;return M instanceof _n&&(M=M.value()),Eu(A,function(K,le){return le.func.apply(le.thisArg,Dl([K],le.args))},M)}function XP(S,A,M){var K=S.length;if(K<2)return K?mp(S[0]):[];for(var le=-1,ke=Ae(K);++le<K;)for(var Me=S[le],Ue=-1;++Ue<K;)Ue!=le&&(ke[le]=Hb(ke[le]||Me,S[Ue],A,M));return mp(Cs(ke,1),A,M)}function kz(S,A,M){for(var K=-1,le=S.length,ke=A.length,Me={};++K<le;){var Ue=K<ke?A[K]:r;M(Me,S[K],Ue)}return Me}function YP(S){return ca(S)?S:[]}function QP(S){return typeof S=="function"?S:nl}function gp(S,A){return Wr(S)?S:sR(S,A)?[S]:eH(qn(S))}var ebe=fn;function xp(S,A,M){var K=S.length;return M=M===r?K:M,!A&&M>=K?S:Cc(S,A,M)}var _z=$ve||function(S){return wa.clearTimeout(S)};function Nz(S,A){if(A)return S.slice();var M=S.length,K=K$?K$(M):new S.constructor(M);return S.copy(K),K}function JP(S){var A=new S.constructor(S.byteLength);return new ik(A).set(new ik(S)),A}function tbe(S,A){var M=A?JP(S.buffer):S.buffer;return new S.constructor(M,S.byteOffset,S.byteLength)}function rbe(S){var A=new S.constructor(S.source,Fe.exec(S));return A.lastIndex=S.lastIndex,A}function nbe(S){return $b?Zt($b.call(S)):{}}function Az(S,A){var M=A?JP(S.buffer):S.buffer;return new S.constructor(M,S.byteOffset,S.length)}function Tz(S,A){if(S!==A){var M=S!==r,K=S===null,le=S===S,ke=Ll(S),Me=A!==r,Ue=A===null,Ke=A===A,yt=Ll(A);if(!Ue&&!yt&&!ke&&S>A||ke&&Me&&Ke&&!Ue&&!yt||K&&Me&&Ke||!M&&Ke||!le)return 1;if(!K&&!ke&&!yt&&S<A||yt&&M&&le&&!K&&!ke||Ue&&M&&le||!Me&&le||!Ke)return-1}return 0}function ibe(S,A,M){for(var K=-1,le=S.criteria,ke=A.criteria,Me=le.length,Ue=M.length;++K<Me;){var Ke=Tz(le[K],ke[K]);if(Ke){if(K>=Ue)return Ke;var yt=M[K];return Ke*(yt=="desc"?-1:1)}}return S.index-A.index}function Iz(S,A,M,K){for(var le=-1,ke=S.length,Me=M.length,Ue=-1,Ke=A.length,yt=Ba(ke-Me,0),bt=Ae(Ke+yt),Nt=!K;++Ue<Ke;)bt[Ue]=A[Ue];for(;++le<Me;)(Nt||le<ke)&&(bt[M[le]]=S[le]);for(;yt--;)bt[Ue++]=S[le++];return bt}function Oz(S,A,M,K){for(var le=-1,ke=S.length,Me=-1,Ue=M.length,Ke=-1,yt=A.length,bt=Ba(ke-Ue,0),Nt=Ae(bt+yt),Ht=!K;++le<bt;)Nt[le]=S[le];for(var nr=le;++Ke<yt;)Nt[nr+Ke]=A[Ke];for(;++Me<Ue;)(Ht||le<ke)&&(Nt[nr+M[Me]]=S[le++]);return Nt}function el(S,A){var M=-1,K=S.length;for(A||(A=Ae(K));++M<K;)A[M]=S[M];return A}function yd(S,A,M,K){var le=!M;M||(M={});for(var ke=-1,Me=A.length;++ke<Me;){var Ue=A[ke],Ke=K?K(M[Ue],S[Ue],Ue,M,S):r;Ke===r&&(Ke=S[Ue]),le?If(M,Ue,Ke):zb(M,Ue,Ke)}return M}function abe(S,A){return yd(S,aR(S),A)}function sbe(S,A){return yd(S,Wz(S),A)}function yk(S,A){return function(M,K){var le=Wr(M)?YC:Aye,ke=A?A():{};return le(M,S,Nr(K,2),ke)}}function d1(S){return fn(function(A,M){var K=-1,le=M.length,ke=le>1?M[le-1]:r,Me=le>2?M[2]:r;for(ke=S.length>3&&typeof ke=="function"?(le--,ke):r,Me&&_o(M[0],M[1],Me)&&(ke=le<3?r:ke,le=1),A=Zt(A);++K<le;){var Ue=M[K];Ue&&S(A,Ue,K,ke)}return A})}function Pz(S,A){return function(M,K){if(M==null)return M;if(!tl(M))return S(M,K);for(var le=M.length,ke=A?le:-1,Me=Zt(M);(A?ke--:++ke<le)&&K(Me[ke],ke,Me)!==!1;);return M}}function Rz(S){return function(A,M,K){for(var le=-1,ke=Zt(A),Me=K(A),Ue=Me.length;Ue--;){var Ke=Me[S?Ue:++le];if(M(ke[Ke],Ke,ke)===!1)break}return A}}function obe(S,A,M){var K=A&b,le=Gb(S);function ke(){var Me=this&&this!==wa&&this instanceof ke?le:S;return Me.apply(K?M:this,arguments)}return ke}function jz(S){return function(A){A=qn(A);var M=fp(A)?T(A):r,K=M?M[0]:A.charAt(0),le=M?xp(M,1).join(""):A.slice(1);return K[S]()+le}}function f1(S){return function(A){return Eu(PH(OH(A).replace(_r,"")),S,"")}}function Gb(S){return function(){var A=arguments;switch(A.length){case 0:return new S;case 1:return new S(A[0]);case 2:return new S(A[0],A[1]);case 3:return new S(A[0],A[1],A[2]);case 4:return new S(A[0],A[1],A[2],A[3]);case 5:return new S(A[0],A[1],A[2],A[3],A[4]);case 6:return new S(A[0],A[1],A[2],A[3],A[4],A[5]);case 7:return new S(A[0],A[1],A[2],A[3],A[4],A[5],A[6])}var M=u1(S.prototype),K=S.apply(M,A);return Li(K)?K:M}}function lbe(S,A,M){var K=Gb(S);function le(){for(var ke=arguments.length,Me=Ae(ke),Ue=ke,Ke=h1(le);Ue--;)Me[Ue]=arguments[Ue];var yt=ke<3&&Me[0]!==Ke&&Me[ke-1]!==Ke?[]:se(Me,Ke);if(ke-=yt.length,ke<M)return Bz(S,A,bk,le.placeholder,r,Me,yt,r,r,M-ke);var bt=this&&this!==wa&&this instanceof le?K:S;return Ya(bt,this,Me)}return le}function Dz(S){return function(A,M,K){var le=Zt(A);if(!tl(A)){var ke=Nr(M,3);A=Za(A),M=function(Ue){return ke(le[Ue],Ue,le)}}var Me=S(A,M,K);return Me>-1?le[ke?A[Me]:Me]:r}}function Mz(S){return Pf(function(A){var M=A.length,K=M,le=Sc.prototype.thru;for(S&&A.reverse();K--;){var ke=A[K];if(typeof ke!="function")throw new Ti(s);if(le&&!Me&&Ck(ke)=="wrapper")var Me=new Sc([],!0)}for(K=Me?K:M;++K<M;){ke=A[K];var Ue=Ck(ke),Ke=Ue=="wrapper"?nR(ke):r;Ke&&oR(Ke[0])&&Ke[1]==(O|E|P|D)&&!Ke[4].length&&Ke[9]==1?Me=Me[Ck(Ke[0])].apply(Me,Ke[3]):Me=ke.length==1&&oR(ke)?Me[Ue]():Me.thru(ke)}return function(){var yt=arguments,bt=yt[0];if(Me&&yt.length==1&&Wr(bt))return Me.plant(bt).value();for(var Nt=0,Ht=M?A[Nt].apply(this,yt):bt;++Nt<M;)Ht=A[Nt].call(this,Ht);return Ht}})}function bk(S,A,M,K,le,ke,Me,Ue,Ke,yt){var bt=A&O,Nt=A&b,Ht=A&w,nr=A&(E|N),Ir=A&L,on=Ht?r:Gb(S);function Or(){for(var En=arguments.length,An=Ae(En),Bl=En;Bl--;)An[Bl]=arguments[Bl];if(nr)var No=h1(Or),Ul=TP(An,No);if(K&&(An=Iz(An,K,le,nr)),ke&&(An=Oz(An,ke,Me,nr)),En-=Ul,nr&&En<yt){var ua=se(An,No);return Bz(S,A,bk,Or.placeholder,M,An,ua,Ue,Ke,yt-En)}var Nu=Nt?M:this,Mf=Ht?Nu[S]:S;return En=An.length,Ue?An=Abe(An,Ue):Ir&&En>1&&An.reverse(),bt&&Ke<En&&(An.length=Ke),this&&this!==wa&&this instanceof Or&&(Mf=on||Gb(Mf)),Mf.apply(Nu,An)}return Or}function Fz(S,A){return function(M,K){return Mye(M,S,A(K),{})}}function wk(S,A){return function(M,K){var le;if(M===r&&K===r)return A;if(M!==r&&(le=M),K!==r){if(le===r)return K;typeof M=="string"||typeof K=="string"?(M=Fl(M),K=Fl(K)):(M=Sz(M),K=Sz(K)),le=S(M,K)}return le}}function ZP(S){return Pf(function(A){return A=Mr(A,Ki(Nr())),fn(function(M){var K=this;return S(A,function(le){return Ya(le,K,M)})})})}function Sk(S,A){A=A===r?" ":Fl(A);var M=A.length;if(M<2)return M?qP(A,S):A;var K=qP(A,lk(S/_(A)));return fp(A)?xp(T(K),0,S).join(""):K.slice(0,S)}function cbe(S,A,M,K){var le=A&b,ke=Gb(S);function Me(){for(var Ue=-1,Ke=arguments.length,yt=-1,bt=K.length,Nt=Ae(bt+Ke),Ht=this&&this!==wa&&this instanceof Me?ke:S;++yt<bt;)Nt[yt]=K[yt];for(;Ke--;)Nt[yt++]=arguments[++Ue];return Ya(Ht,le?M:this,Nt)}return Me}function Lz(S){return function(A,M,K){return K&&typeof K!="number"&&_o(A,M,K)&&(M=K=r),A=Df(A),M===r?(M=A,A=0):M=Df(M),K=K===r?A<M?1:-1:Df(K),Kye(A,M,K,S)}}function Ek(S){return function(A,M){return typeof A=="string"&&typeof M=="string"||(A=_c(A),M=_c(M)),S(A,M)}}function Bz(S,A,M,K,le,ke,Me,Ue,Ke,yt){var bt=A&E,Nt=bt?Me:r,Ht=bt?r:Me,nr=bt?ke:r,Ir=bt?r:ke;A|=bt?P:R,A&=~(bt?R:P),A&k||(A&=-4);var on=[S,A,le,nr,Nt,Ir,Ht,Ue,Ke,yt],Or=M.apply(r,on);return oR(S)&&Qz(Or,on),Or.placeholder=K,Jz(Or,S,A)}function eR(S){var A=vt[S];return function(M,K){if(M=_c(M),K=K==null?0:Ws(rn(K),292),K&&J$(M)){var le=(qn(M)+"e").split("e"),ke=A(le[0]+"e"+(+le[1]+K));return le=(qn(ke)+"e").split("e"),+(le[0]+"e"+(+le[1]-K))}return A(M)}}var ube=l1&&1/h(new l1([,-0]))[1]==re?function(S){return new l1(S)}:SR;function Uz(S){return function(A){var M=Vs(A);return M==Pe?Sn(A):M==ht?g(A):mm(A,S(A))}}function Of(S,A,M,K,le,ke,Me,Ue){var Ke=A&w;if(!Ke&&typeof S!="function")throw new Ti(s);var yt=K?K.length:0;if(yt||(A&=-97,K=le=r),Me=Me===r?Me:Ba(rn(Me),0),Ue=Ue===r?Ue:rn(Ue),yt-=le?le.length:0,A&R){var bt=K,Nt=le;K=le=r}var Ht=Ke?r:nR(S),nr=[S,A,M,K,le,bt,Nt,ke,Me,Ue];if(Ht&&kbe(nr,Ht),S=nr[0],A=nr[1],M=nr[2],K=nr[3],le=nr[4],Ue=nr[9]=nr[9]===r?Ke?0:S.length:Ba(nr[9]-yt,0),!Ue&&A&(E|N)&&(A&=-25),!A||A==b)var Ir=obe(S,A,M);else A==E||A==N?Ir=lbe(S,A,Ue):(A==P||A==(b|P))&&!le.length?Ir=cbe(S,A,M,K):Ir=bk.apply(r,nr);var on=Ht?bz:Qz;return Jz(on(Ir,nr),S,A)}function $z(S,A,M,K){return S===r||_u(S,Ii[M])&&!kn.call(K,M)?A:S}function zz(S,A,M,K,le,ke){return Li(S)&&Li(A)&&(ke.set(A,S),gk(S,A,r,zz,ke),ke.delete(A)),S}function dbe(S){return Yb(S)?r:S}function Hz(S,A,M,K,le,ke){var Me=M&x,Ue=S.length,Ke=A.length;if(Ue!=Ke&&!(Me&&Ke>Ue))return!1;var yt=ke.get(S),bt=ke.get(A);if(yt&&bt)return yt==A&&bt==S;var Nt=-1,Ht=!0,nr=M&v?new bm:r;for(ke.set(S,A),ke.set(A,S);++Nt<Ue;){var Ir=S[Nt],on=A[Nt];if(K)var Or=Me?K(on,Ir,Nt,A,S,ke):K(Ir,on,Nt,S,A,ke);if(Or!==r){if(Or)continue;Ht=!1;break}if(nr){if(!gr(A,function(En,An){if(!Qa(nr,An)&&(Ir===En||le(Ir,En,M,K,ke)))return nr.push(An)})){Ht=!1;break}}else if(!(Ir===on||le(Ir,on,M,K,ke))){Ht=!1;break}}return ke.delete(S),ke.delete(A),Ht}function fbe(S,A,M,K,le,ke,Me){switch(M){case Gt:if(S.byteLength!=A.byteLength||S.byteOffset!=A.byteOffset)return!1;S=S.buffer,A=A.buffer;case dr:return!(S.byteLength!=A.byteLength||!ke(new ik(S),new ik(A)));case ne:case ae:case ze:return _u(+S,+A);case ve:return S.name==A.name&&S.message==A.message;case kt:case Rr:return S==A+"";case Pe:var Ue=Sn;case ht:var Ke=K&x;if(Ue||(Ue=h),S.size!=A.size&&!Ke)return!1;var yt=Me.get(S);if(yt)return yt==A;K|=v,Me.set(S,A);var bt=Hz(Ue(S),Ue(A),K,le,ke,Me);return Me.delete(S),bt;case er:if($b)return $b.call(S)==$b.call(A)}return!1}function hbe(S,A,M,K,le,ke){var Me=M&x,Ue=tR(S),Ke=Ue.length,yt=tR(A),bt=yt.length;if(Ke!=bt&&!Me)return!1;for(var Nt=Ke;Nt--;){var Ht=Ue[Nt];if(!(Me?Ht in A:kn.call(A,Ht)))return!1}var nr=ke.get(S),Ir=ke.get(A);if(nr&&Ir)return nr==A&&Ir==S;var on=!0;ke.set(S,A),ke.set(A,S);for(var Or=Me;++Nt<Ke;){Ht=Ue[Nt];var En=S[Ht],An=A[Ht];if(K)var Bl=Me?K(An,En,Ht,A,S,ke):K(En,An,Ht,S,A,ke);if(!(Bl===r?En===An||le(En,An,M,K,ke):Bl)){on=!1;break}Or||(Or=Ht=="constructor")}if(on&&!Or){var No=S.constructor,Ul=A.constructor;No!=Ul&&"constructor"in S&&"constructor"in A&&!(typeof No=="function"&&No instanceof No&&typeof Ul=="function"&&Ul instanceof Ul)&&(on=!1)}return ke.delete(S),ke.delete(A),on}function Pf(S){return cR(Xz(S,r,iH),S+"")}function tR(S){return cz(S,Za,aR)}function rR(S){return cz(S,rl,Wz)}var nR=uk?function(S){return uk.get(S)}:SR;function Ck(S){for(var A=S.name+"",M=c1[A],K=kn.call(c1,A)?M.length:0;K--;){var le=M[K],ke=le.func;if(ke==null||ke==S)return le.name}return A}function h1(S){var A=kn.call(be,"placeholder")?be:S;return A.placeholder}function Nr(){var S=be.iteratee||bR;return S=S===bR?fz:S,arguments.length?S(arguments[0],arguments[1]):S}function kk(S,A){var M=S.__data__;return wbe(A)?M[typeof A=="string"?"string":"hash"]:M.map}function iR(S){for(var A=Za(S),M=A.length;M--;){var K=A[M],le=S[K];A[M]=[K,le,Gz(le)]}return A}function Em(S,A){var M=wc(S,A);return dz(M)?M:r}function pbe(S){var A=kn.call(S,vm),M=S[vm];try{S[vm]=r;var K=!0}catch{}var le=rk.call(S);return K&&(A?S[vm]=M:delete S[vm]),le}var aR=PP?function(S){return S==null?[]:(S=Zt(S),bc(PP(S),function(A){return Y$.call(S,A)}))}:ER,Wz=PP?function(S){for(var A=[];S;)Dl(A,aR(S)),S=ak(S);return A}:ER,Vs=ko;(RP&&Vs(new RP(new ArrayBuffer(1)))!=Gt||Lb&&Vs(new Lb)!=Pe||jP&&Vs(jP.resolve())!=et||l1&&Vs(new l1)!=ht||Bb&&Vs(new Bb)!=qt)&&(Vs=function(S){var A=ko(S),M=A==$e?S.constructor:r,K=M?Cm(M):"";if(K)switch(K){case Yve:return Gt;case Qve:return Pe;case Jve:return et;case Zve:return ht;case eye:return qt}return A});function mbe(S,A,M){for(var K=-1,le=M.length;++K<le;){var ke=M[K],Me=ke.size;switch(ke.type){case"drop":S+=Me;break;case"dropRight":A-=Me;break;case"take":A=Ws(A,S+Me);break;case"takeRight":S=Ba(S,A-Me);break}}return{start:S,end:A}}function gbe(S){var A=S.match(de);return A?A[1].split(he):[]}function Vz(S,A,M){A=gp(A,S);for(var K=-1,le=A.length,ke=!1;++K<le;){var Me=bd(A[K]);if(!(ke=S!=null&&M(S,Me)))break;S=S[Me]}return ke||++K!=le?ke:(le=S==null?0:S.length,!!le&&Pk(le)&&Rf(Me,le)&&(Wr(S)||km(S)))}function xbe(S){var A=S.length,M=new S.constructor(A);return A&&typeof S[0]=="string"&&kn.call(S,"index")&&(M.index=S.index,M.input=S.input),M}function qz(S){return typeof S.constructor=="function"&&!Kb(S)?u1(ak(S)):{}}function vbe(S,A,M){var K=S.constructor;switch(A){case dr:return JP(S);case ne:case ae:return new K(+S);case Gt:return tbe(S,M);case qe:case Xe:case Te:case He:case je:case Ce:case ot:case xt:case Dt:return Az(S,M);case Pe:return new K;case ze:case Rr:return new K(S);case kt:return rbe(S);case ht:return new K;case er:return nbe(S)}}function ybe(S,A){var M=A.length;if(!M)return S;var K=M-1;return A[K]=(M>1?"& ":"")+A[K],A=A.join(M>2?", ":" "),S.replace(Un,`{
/* [wrapped with `+A+`] */
`)}function bbe(S){return Wr(S)||km(S)||!!(Q$&&S&&S[Q$])}function Rf(S,A){var M=typeof S;return A=A??X,!!A&&(M=="number"||M!="symbol"&&wt.test(S))&&S>-1&&S%1==0&&S<A}function _o(S,A,M){if(!Li(M))return!1;var K=typeof A;return(K=="number"?tl(M)&&Rf(A,M.length):K=="string"&&A in M)?_u(M[A],S):!1}function sR(S,A){if(Wr(S))return!1;var M=typeof S;return M=="number"||M=="symbol"||M=="boolean"||S==null||Ll(S)?!0:Ut.test(S)||!_t.test(S)||A!=null&&S in Zt(A)}function wbe(S){var A=typeof S;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?S!=="__proto__":S===null}function oR(S){var A=Ck(S),M=be[A];if(typeof M!="function"||!(A in _n.prototype))return!1;if(S===M)return!0;var K=nR(M);return!!K&&S===K[0]}function Sbe(S){return!!tk&&tk in S}var Ebe=Ja?jf:CR;function Kb(S){var A=S&&S.constructor,M=typeof A=="function"&&A.prototype||Ii;return S===M}function Gz(S){return S===S&&!Li(S)}function Kz(S,A){return function(M){return M==null?!1:M[S]===A&&(A!==r||S in Zt(M))}}function Cbe(S){var A=Ik(S,function(K){return M.size===c&&M.clear(),K}),M=A.cache;return A}function kbe(S,A){var M=S[1],K=A[1],le=M|K,ke=le<(b|w|O),Me=K==O&&M==E||K==O&&M==D&&S[7].length<=A[8]||K==(O|D)&&A[7].length<=A[8]&&M==E;if(!(ke||Me))return S;K&b&&(S[2]=A[2],le|=M&b?0:k);var Ue=A[3];if(Ue){var Ke=S[3];S[3]=Ke?Iz(Ke,Ue,A[4]):Ue,S[4]=Ke?se(S[3],d):A[4]}return Ue=A[5],Ue&&(Ke=S[5],S[5]=Ke?Oz(Ke,Ue,A[6]):Ue,S[6]=Ke?se(S[5],d):A[6]),Ue=A[7],Ue&&(S[7]=Ue),K&O&&(S[8]=S[8]==null?A[8]:Ws(S[8],A[8])),S[9]==null&&(S[9]=A[9]),S[0]=A[0],S[1]=le,S}function _be(S){var A=[];if(S!=null)for(var M in Zt(S))A.push(M);return A}function Nbe(S){return rk.call(S)}function Xz(S,A,M){return A=Ba(A===r?S.length-1:A,0),function(){for(var K=arguments,le=-1,ke=Ba(K.length-A,0),Me=Ae(ke);++le<ke;)Me[le]=K[A+le];le=-1;for(var Ue=Ae(A+1);++le<A;)Ue[le]=K[le];return Ue[A]=M(Me),Ya(S,this,Ue)}}function Yz(S,A){return A.length<2?S:Sm(S,Cc(A,0,-1))}function Abe(S,A){for(var M=S.length,K=Ws(A.length,M),le=el(S);K--;){var ke=A[K];S[K]=Rf(ke,M)?le[ke]:r}return S}function lR(S,A){if(!(A==="constructor"&&typeof S[A]=="function")&&A!="__proto__")return S[A]}var Qz=Zz(bz),Xb=Hve||function(S,A){return wa.setTimeout(S,A)},cR=Zz(Qye);function Jz(S,A,M){var K=A+"";return cR(S,ybe(K,Tbe(gbe(K),M)))}function Zz(S){var A=0,M=0;return function(){var K=Gve(),le=te-(K-M);if(M=K,le>0){if(++A>=H)return arguments[0]}else A=0;return S.apply(r,arguments)}}function _k(S,A){var M=-1,K=S.length,le=K-1;for(A=A===r?K:A;++M<A;){var ke=VP(M,le),Me=S[ke];S[ke]=S[M],S[M]=Me}return S.length=A,S}var eH=Cbe(function(S){var A=[];return S.charCodeAt(0)===46&&A.push(""),S.replace(ir,function(M,K,le,ke){A.push(le?ke.replace(pe,"$1"):K||M)}),A});function bd(S){if(typeof S=="string"||Ll(S))return S;var A=S+"";return A=="0"&&1/S==-re?"-0":A}function Cm(S){if(S!=null){try{return Cu.call(S)}catch{}try{return S+""}catch{}}return""}function Tbe(S,A){return Zo(V,function(M){var K="_."+M[0];A&M[1]&&!Ai(S,K)&&S.push(K)}),S.sort()}function tH(S){if(S instanceof _n)return S.clone();var A=new Sc(S.__wrapped__,S.__chain__);return A.__actions__=el(S.__actions__),A.__index__=S.__index__,A.__values__=S.__values__,A}function Ibe(S,A,M){(M?_o(S,A,M):A===r)?A=1:A=Ba(rn(A),0);var K=S==null?0:S.length;if(!K||A<1)return[];for(var le=0,ke=0,Me=Ae(lk(K/A));le<K;)Me[ke++]=Cc(S,le,le+=A);return Me}function Obe(S){for(var A=-1,M=S==null?0:S.length,K=0,le=[];++A<M;){var ke=S[A];ke&&(le[K++]=ke)}return le}function Pbe(){var S=arguments.length;if(!S)return[];for(var A=Ae(S-1),M=arguments[0],K=S;K--;)A[K-1]=arguments[K];return Dl(Wr(M)?el(M):[M],Cs(A,1))}var Rbe=fn(function(S,A){return ca(S)?Hb(S,Cs(A,1,ca,!0)):[]}),jbe=fn(function(S,A){var M=kc(A);return ca(M)&&(M=r),ca(S)?Hb(S,Cs(A,1,ca,!0),Nr(M,2)):[]}),Dbe=fn(function(S,A){var M=kc(A);return ca(M)&&(M=r),ca(S)?Hb(S,Cs(A,1,ca,!0),r,M):[]});function Mbe(S,A,M){var K=S==null?0:S.length;return K?(A=M||A===r?1:rn(A),Cc(S,A<0?0:A,K)):[]}function Fbe(S,A,M){var K=S==null?0:S.length;return K?(A=M||A===r?1:rn(A),A=K-A,Cc(S,0,A<0?0:A)):[]}function Lbe(S,A){return S&&S.length?vk(S,Nr(A,3),!0,!0):[]}function Bbe(S,A){return S&&S.length?vk(S,Nr(A,3),!0):[]}function Ube(S,A,M,K){var le=S==null?0:S.length;return le?(M&&typeof M!="number"&&_o(S,A,M)&&(M=0,K=le),Pye(S,A,M,K)):[]}function rH(S,A,M){var K=S==null?0:S.length;if(!K)return-1;var le=M==null?0:rn(M);return le<0&&(le=Ba(K+le,0)),i1(S,Nr(A,3),le)}function nH(S,A,M){var K=S==null?0:S.length;if(!K)return-1;var le=K-1;return M!==r&&(le=rn(M),le=M<0?Ba(K+le,0):Ws(le,K-1)),i1(S,Nr(A,3),le,!0)}function iH(S){var A=S==null?0:S.length;return A?Cs(S,1):[]}function $be(S){var A=S==null?0:S.length;return A?Cs(S,re):[]}function zbe(S,A){var M=S==null?0:S.length;return M?(A=A===r?1:rn(A),Cs(S,A)):[]}function Hbe(S){for(var A=-1,M=S==null?0:S.length,K={};++A<M;){var le=S[A];K[le[0]]=le[1]}return K}function aH(S){return S&&S.length?S[0]:r}function Wbe(S,A,M){var K=S==null?0:S.length;if(!K)return-1;var le=M==null?0:rn(M);return le<0&&(le=Ba(K+le,0)),Es(S,A,le)}function Vbe(S){var A=S==null?0:S.length;return A?Cc(S,0,-1):[]}var qbe=fn(function(S){var A=Mr(S,YP);return A.length&&A[0]===S[0]?UP(A):[]}),Gbe=fn(function(S){var A=kc(S),M=Mr(S,YP);return A===kc(M)?A=r:M.pop(),M.length&&M[0]===S[0]?UP(M,Nr(A,2)):[]}),Kbe=fn(function(S){var A=kc(S),M=Mr(S,YP);return A=typeof A=="function"?A:r,A&&M.pop(),M.length&&M[0]===S[0]?UP(M,r,A):[]});function Xbe(S,A){return S==null?"":Vve.call(S,A)}function kc(S){var A=S==null?0:S.length;return A?S[A-1]:r}function Ybe(S,A,M){var K=S==null?0:S.length;if(!K)return-1;var le=K;return M!==r&&(le=rn(M),le=le<0?Ba(K+le,0):Ws(le,K-1)),A===A?C(S,A,le):i1(S,Pb,le,!0)}function Qbe(S,A){return S&&S.length?gz(S,rn(A)):r}var Jbe=fn(sH);function sH(S,A){return S&&S.length&&A&&A.length?WP(S,A):S}function Zbe(S,A,M){return S&&S.length&&A&&A.length?WP(S,A,Nr(M,2)):S}function ewe(S,A,M){return S&&S.length&&A&&A.length?WP(S,A,r,M):S}var twe=Pf(function(S,A){var M=S==null?0:S.length,K=MP(S,A);return yz(S,Mr(A,function(le){return Rf(le,M)?+le:le}).sort(Tz)),K});function rwe(S,A){var M=[];if(!(S&&S.length))return M;var K=-1,le=[],ke=S.length;for(A=Nr(A,3);++K<ke;){var Me=S[K];A(Me,K,S)&&(M.push(Me),le.push(K))}return yz(S,le),M}function uR(S){return S==null?S:Xve.call(S)}function nwe(S,A,M){var K=S==null?0:S.length;return K?(M&&typeof M!="number"&&_o(S,A,M)?(A=0,M=K):(A=A==null?0:rn(A),M=M===r?K:rn(M)),Cc(S,A,M)):[]}function iwe(S,A){return xk(S,A)}function awe(S,A,M){return GP(S,A,Nr(M,2))}function swe(S,A){var M=S==null?0:S.length;if(M){var K=xk(S,A);if(K<M&&_u(S[K],A))return K}return-1}function owe(S,A){return xk(S,A,!0)}function lwe(S,A,M){return GP(S,A,Nr(M,2),!0)}function cwe(S,A){var M=S==null?0:S.length;if(M){var K=xk(S,A,!0)-1;if(_u(S[K],A))return K}return-1}function uwe(S){return S&&S.length?wz(S):[]}function dwe(S,A){return S&&S.length?wz(S,Nr(A,2)):[]}function fwe(S){var A=S==null?0:S.length;return A?Cc(S,1,A):[]}function hwe(S,A,M){return S&&S.length?(A=M||A===r?1:rn(A),Cc(S,0,A<0?0:A)):[]}function pwe(S,A,M){var K=S==null?0:S.length;return K?(A=M||A===r?1:rn(A),A=K-A,Cc(S,A<0?0:A,K)):[]}function mwe(S,A){return S&&S.length?vk(S,Nr(A,3),!1,!0):[]}function gwe(S,A){return S&&S.length?vk(S,Nr(A,3)):[]}var xwe=fn(function(S){return mp(Cs(S,1,ca,!0))}),vwe=fn(function(S){var A=kc(S);return ca(A)&&(A=r),mp(Cs(S,1,ca,!0),Nr(A,2))}),ywe=fn(function(S){var A=kc(S);return A=typeof A=="function"?A:r,mp(Cs(S,1,ca,!0),r,A)});function bwe(S){return S&&S.length?mp(S):[]}function wwe(S,A){return S&&S.length?mp(S,Nr(A,2)):[]}function Swe(S,A){return A=typeof A=="function"?A:r,S&&S.length?mp(S,r,A):[]}function dR(S){if(!(S&&S.length))return[];var A=0;return S=bc(S,function(M){if(ca(M))return A=Ba(M.length,A),!0}),Rb(A,function(M){return Mr(S,s1(M))})}function oH(S,A){if(!(S&&S.length))return[];var M=dR(S);return A==null?M:Mr(M,function(K){return Ya(A,r,K)})}var Ewe=fn(function(S,A){return ca(S)?Hb(S,A):[]}),Cwe=fn(function(S){return XP(bc(S,ca))}),kwe=fn(function(S){var A=kc(S);return ca(A)&&(A=r),XP(bc(S,ca),Nr(A,2))}),_we=fn(function(S){var A=kc(S);return A=typeof A=="function"?A:r,XP(bc(S,ca),r,A)}),Nwe=fn(dR);function Awe(S,A){return kz(S||[],A||[],zb)}function Twe(S,A){return kz(S||[],A||[],qb)}var Iwe=fn(function(S){var A=S.length,M=A>1?S[A-1]:r;return M=typeof M=="function"?(S.pop(),M):r,oH(S,M)});function lH(S){var A=be(S);return A.__chain__=!0,A}function Owe(S,A){return A(S),S}function Nk(S,A){return A(S)}var Pwe=Pf(function(S){var A=S.length,M=A?S[0]:0,K=this.__wrapped__,le=function(ke){return MP(ke,S)};return A>1||this.__actions__.length||!(K instanceof _n)||!Rf(M)?this.thru(le):(K=K.slice(M,+M+(A?1:0)),K.__actions__.push({func:Nk,args:[le],thisArg:r}),new Sc(K,this.__chain__).thru(function(ke){return A&&!ke.length&&ke.push(r),ke}))});function Rwe(){return lH(this)}function jwe(){return new Sc(this.value(),this.__chain__)}function Dwe(){this.__values__===r&&(this.__values__=SH(this.value()));var S=this.__index__>=this.__values__.length,A=S?r:this.__values__[this.__index__++];return{done:S,value:A}}function Mwe(){return this}function Fwe(S){for(var A,M=this;M instanceof fk;){var K=tH(M);K.__index__=0,K.__values__=r,A?le.__wrapped__=K:A=K;var le=K;M=M.__wrapped__}return le.__wrapped__=S,A}function Lwe(){var S=this.__wrapped__;if(S instanceof _n){var A=S;return this.__actions__.length&&(A=new _n(this)),A=A.reverse(),A.__actions__.push({func:Nk,args:[uR],thisArg:r}),new Sc(A,this.__chain__)}return this.thru(uR)}function Bwe(){return Cz(this.__wrapped__,this.__actions__)}var Uwe=yk(function(S,A,M){kn.call(S,M)?++S[M]:If(S,M,1)});function $we(S,A,M){var K=Wr(S)?QC:Oye;return M&&_o(S,A,M)&&(A=r),K(S,Nr(A,3))}function zwe(S,A){var M=Wr(S)?bc:oz;return M(S,Nr(A,3))}var Hwe=Dz(rH),Wwe=Dz(nH);function Vwe(S,A){return Cs(Ak(S,A),1)}function qwe(S,A){return Cs(Ak(S,A),re)}function Gwe(S,A,M){return M=M===r?1:rn(M),Cs(Ak(S,A),M)}function cH(S,A){var M=Wr(S)?Zo:pp;return M(S,Nr(A,3))}function uH(S,A){var M=Wr(S)?NP:sz;return M(S,Nr(A,3))}var Kwe=yk(function(S,A,M){kn.call(S,M)?S[M].push(A):If(S,M,[A])});function Xwe(S,A,M,K){S=tl(S)?S:m1(S),M=M&&!K?rn(M):0;var le=S.length;return M<0&&(M=Ba(le+M,0)),Rk(S)?M<=le&&S.indexOf(A,M)>-1:!!le&&Es(S,A,M)>-1}var Ywe=fn(function(S,A,M){var K=-1,le=typeof A=="function",ke=tl(S)?Ae(S.length):[];return pp(S,function(Me){ke[++K]=le?Ya(A,Me,M):Wb(Me,A,M)}),ke}),Qwe=yk(function(S,A,M){If(S,M,A)});function Ak(S,A){var M=Wr(S)?Mr:hz;return M(S,Nr(A,3))}function Jwe(S,A,M,K){return S==null?[]:(Wr(A)||(A=A==null?[]:[A]),M=K?r:M,Wr(M)||(M=M==null?[]:[M]),xz(S,A,M))}var Zwe=yk(function(S,A,M){S[M?0:1].push(A)},function(){return[[],[]]});function e2e(S,A,M){var K=Wr(S)?Eu:JC,le=arguments.length<3;return K(S,Nr(A,4),M,le,pp)}function t2e(S,A,M){var K=Wr(S)?Xn:JC,le=arguments.length<3;return K(S,Nr(A,4),M,le,sz)}function r2e(S,A){var M=Wr(S)?bc:oz;return M(S,Ok(Nr(A,3)))}function n2e(S){var A=Wr(S)?rz:Xye;return A(S)}function i2e(S,A,M){(M?_o(S,A,M):A===r)?A=1:A=rn(A);var K=Wr(S)?_ye:Yye;return K(S,A)}function a2e(S){var A=Wr(S)?Nye:Jye;return A(S)}function s2e(S){if(S==null)return 0;if(tl(S))return Rk(S)?_(S):S.length;var A=Vs(S);return A==Pe||A==ht?S.size:zP(S).length}function o2e(S,A,M){var K=Wr(S)?gr:Zye;return M&&_o(S,A,M)&&(A=r),K(S,Nr(A,3))}var l2e=fn(function(S,A){if(S==null)return[];var M=A.length;return M>1&&_o(S,A[0],A[1])?A=[]:M>2&&_o(A[0],A[1],A[2])&&(A=[A[0]]),xz(S,Cs(A,1),[])}),Tk=zve||function(){return wa.Date.now()};function c2e(S,A){if(typeof A!="function")throw new Ti(s);return S=rn(S),function(){if(--S<1)return A.apply(this,arguments)}}function dH(S,A,M){return A=M?r:A,A=S&&A==null?S.length:A,Of(S,O,r,r,r,r,A)}function fH(S,A){var M;if(typeof A!="function")throw new Ti(s);return S=rn(S),function(){return--S>0&&(M=A.apply(this,arguments)),S<=1&&(A=r),M}}var fR=fn(function(S,A,M){var K=b;if(M.length){var le=se(M,h1(fR));K|=P}return Of(S,K,A,M,le)}),hH=fn(function(S,A,M){var K=b|w;if(M.length){var le=se(M,h1(hH));K|=P}return Of(A,K,S,M,le)});function pH(S,A,M){A=M?r:A;var K=Of(S,E,r,r,r,r,r,A);return K.placeholder=pH.placeholder,K}function mH(S,A,M){A=M?r:A;var K=Of(S,N,r,r,r,r,r,A);return K.placeholder=mH.placeholder,K}function gH(S,A,M){var K,le,ke,Me,Ue,Ke,yt=0,bt=!1,Nt=!1,Ht=!0;if(typeof S!="function")throw new Ti(s);A=_c(A)||0,Li(M)&&(bt=!!M.leading,Nt="maxWait"in M,ke=Nt?Ba(_c(M.maxWait)||0,A):ke,Ht="trailing"in M?!!M.trailing:Ht);function nr(ua){var Nu=K,Mf=le;return K=le=r,yt=ua,Me=S.apply(Mf,Nu),Me}function Ir(ua){return yt=ua,Ue=Xb(En,A),bt?nr(ua):Me}function on(ua){var Nu=ua-Ke,Mf=ua-yt,DH=A-Nu;return Nt?Ws(DH,ke-Mf):DH}function Or(ua){var Nu=ua-Ke,Mf=ua-yt;return Ke===r||Nu>=A||Nu<0||Nt&&Mf>=ke}function En(){var ua=Tk();if(Or(ua))return An(ua);Ue=Xb(En,on(ua))}function An(ua){return Ue=r,Ht&&K?nr(ua):(K=le=r,Me)}function Bl(){Ue!==r&&_z(Ue),yt=0,K=Ke=le=Ue=r}function No(){return Ue===r?Me:An(Tk())}function Ul(){var ua=Tk(),Nu=Or(ua);if(K=arguments,le=this,Ke=ua,Nu){if(Ue===r)return Ir(Ke);if(Nt)return _z(Ue),Ue=Xb(En,A),nr(Ke)}return Ue===r&&(Ue=Xb(En,A)),Me}return Ul.cancel=Bl,Ul.flush=No,Ul}var u2e=fn(function(S,A){return az(S,1,A)}),d2e=fn(function(S,A,M){return az(S,_c(A)||0,M)});function f2e(S){return Of(S,L)}function Ik(S,A){if(typeof S!="function"||A!=null&&typeof A!="function")throw new Ti(s);var M=function(){var K=arguments,le=A?A.apply(this,K):K[0],ke=M.cache;if(ke.has(le))return ke.get(le);var Me=S.apply(this,K);return M.cache=ke.set(le,Me)||ke,Me};return M.cache=new(Ik.Cache||Tf),M}Ik.Cache=Tf;function Ok(S){if(typeof S!="function")throw new Ti(s);return function(){var A=arguments;switch(A.length){case 0:return!S.call(this);case 1:return!S.call(this,A[0]);case 2:return!S.call(this,A[0],A[1]);case 3:return!S.call(this,A[0],A[1],A[2])}return!S.apply(this,A)}}function h2e(S){return fH(2,S)}var p2e=ebe(function(S,A){A=A.length==1&&Wr(A[0])?Mr(A[0],Ki(Nr())):Mr(Cs(A,1),Ki(Nr()));var M=A.length;return fn(function(K){for(var le=-1,ke=Ws(K.length,M);++le<ke;)K[le]=A[le].call(this,K[le]);return Ya(S,this,K)})}),hR=fn(function(S,A){var M=se(A,h1(hR));return Of(S,P,r,A,M)}),xH=fn(function(S,A){var M=se(A,h1(xH));return Of(S,R,r,A,M)}),m2e=Pf(function(S,A){return Of(S,D,r,r,r,A)});function g2e(S,A){if(typeof S!="function")throw new Ti(s);return A=A===r?A:rn(A),fn(S,A)}function x2e(S,A){if(typeof S!="function")throw new Ti(s);return A=A==null?0:Ba(rn(A),0),fn(function(M){var K=M[A],le=xp(M,0,A);return K&&Dl(le,K),Ya(S,this,le)})}function v2e(S,A,M){var K=!0,le=!0;if(typeof S!="function")throw new Ti(s);return Li(M)&&(K="leading"in M?!!M.leading:K,le="trailing"in M?!!M.trailing:le),gH(S,A,{leading:K,maxWait:A,trailing:le})}function y2e(S){return dH(S,1)}function b2e(S,A){return hR(QP(A),S)}function w2e(){if(!arguments.length)return[];var S=arguments[0];return Wr(S)?S:[S]}function S2e(S){return Ec(S,m)}function E2e(S,A){return A=typeof A=="function"?A:r,Ec(S,m,A)}function C2e(S){return Ec(S,f|m)}function k2e(S,A){return A=typeof A=="function"?A:r,Ec(S,f|m,A)}function _2e(S,A){return A==null||iz(S,A,Za(A))}function _u(S,A){return S===A||S!==S&&A!==A}var N2e=Ek(BP),A2e=Ek(function(S,A){return S>=A}),km=uz(function(){return arguments}())?uz:function(S){return Xi(S)&&kn.call(S,"callee")&&!Y$.call(S,"callee")},Wr=Ae.isArray,T2e=fm?Ki(fm):Fye;function tl(S){return S!=null&&Pk(S.length)&&!jf(S)}function ca(S){return Xi(S)&&tl(S)}function I2e(S){return S===!0||S===!1||Xi(S)&&ko(S)==ne}var vp=Wve||CR,O2e=Su?Ki(Su):Lye;function P2e(S){return Xi(S)&&S.nodeType===1&&!Yb(S)}function R2e(S){if(S==null)return!0;if(tl(S)&&(Wr(S)||typeof S=="string"||typeof S.splice=="function"||vp(S)||p1(S)||km(S)))return!S.length;var A=Vs(S);if(A==Pe||A==ht)return!S.size;if(Kb(S))return!zP(S).length;for(var M in S)if(kn.call(S,M))return!1;return!0}function j2e(S,A){return Vb(S,A)}function D2e(S,A,M){M=typeof M=="function"?M:r;var K=M?M(S,A):r;return K===r?Vb(S,A,r,M):!!K}function pR(S){if(!Xi(S))return!1;var A=ko(S);return A==ve||A==me||typeof S.message=="string"&&typeof S.name=="string"&&!Yb(S)}function M2e(S){return typeof S=="number"&&J$(S)}function jf(S){if(!Li(S))return!1;var A=ko(S);return A==q||A==Ne||A==Ee||A==ut}function vH(S){return typeof S=="number"&&S==rn(S)}function Pk(S){return typeof S=="number"&&S>-1&&S%1==0&&S<=X}function Li(S){var A=typeof S;return S!=null&&(A=="object"||A=="function")}function Xi(S){return S!=null&&typeof S=="object"}var yH=XC?Ki(XC):Uye;function F2e(S,A){return S===A||$P(S,A,iR(A))}function L2e(S,A,M){return M=typeof M=="function"?M:r,$P(S,A,iR(A),M)}function B2e(S){return bH(S)&&S!=+S}function U2e(S){if(Ebe(S))throw new lt(a);return dz(S)}function $2e(S){return S===null}function z2e(S){return S==null}function bH(S){return typeof S=="number"||Xi(S)&&ko(S)==ze}function Yb(S){if(!Xi(S)||ko(S)!=$e)return!1;var A=ak(S);if(A===null)return!0;var M=kn.call(A,"constructor")&&A.constructor;return typeof M=="function"&&M instanceof M&&Cu.call(M)==Lve}var mR=tt?Ki(tt):$ye;function H2e(S){return vH(S)&&S>=-X&&S<=X}var wH=Kr?Ki(Kr):zye;function Rk(S){return typeof S=="string"||!Wr(S)&&Xi(S)&&ko(S)==Rr}function Ll(S){return typeof S=="symbol"||Xi(S)&&ko(S)==er}var p1=Sa?Ki(Sa):Hye;function W2e(S){return S===r}function V2e(S){return Xi(S)&&Vs(S)==qt}function q2e(S){return Xi(S)&&ko(S)==Lt}var G2e=Ek(HP),K2e=Ek(function(S,A){return S<=A});function SH(S){if(!S)return[];if(tl(S))return Rk(S)?T(S):el(S);if(Fb&&S[Fb])return gm(S[Fb]());var A=Vs(S),M=A==Pe?Sn:A==ht?h:m1;return M(S)}function Df(S){if(!S)return S===0?S:0;if(S=_c(S),S===re||S===-re){var A=S<0?-1:1;return A*Q}return S===S?S:0}function rn(S){var A=Df(S),M=A%1;return A===A?M?A-M:A:0}function EH(S){return S?wm(rn(S),0,ye):0}function _c(S){if(typeof S=="number")return S;if(Ll(S))return fe;if(Li(S)){var A=typeof S.valueOf=="function"?S.valueOf():S;S=Li(A)?A+"":A}if(typeof S!="string")return S===0?S:+S;S=ZC(S);var M=Ge.test(S);return M||Ze.test(S)?zs(S.slice(2),M?2:8):it.test(S)?fe:+S}function CH(S){return yd(S,rl(S))}function X2e(S){return S?wm(rn(S),-X,X):S===0?S:0}function qn(S){return S==null?"":Fl(S)}var Y2e=d1(function(S,A){if(Kb(A)||tl(A)){yd(A,Za(A),S);return}for(var M in A)kn.call(A,M)&&zb(S,M,A[M])}),kH=d1(function(S,A){yd(A,rl(A),S)}),jk=d1(function(S,A,M,K){yd(A,rl(A),S,K)}),Q2e=d1(function(S,A,M,K){yd(A,Za(A),S,K)}),J2e=Pf(MP);function Z2e(S,A){var M=u1(S);return A==null?M:nz(M,A)}var eSe=fn(function(S,A){S=Zt(S);var M=-1,K=A.length,le=K>2?A[2]:r;for(le&&_o(A[0],A[1],le)&&(K=1);++M<K;)for(var ke=A[M],Me=rl(ke),Ue=-1,Ke=Me.length;++Ue<Ke;){var yt=Me[Ue],bt=S[yt];(bt===r||_u(bt,Ii[yt])&&!kn.call(S,yt))&&(S[yt]=ke[yt])}return S}),tSe=fn(function(S){return S.push(r,zz),Ya(_H,r,S)});function rSe(S,A){return Nf(S,Nr(A,3),vd)}function nSe(S,A){return Nf(S,Nr(A,3),LP)}function iSe(S,A){return S==null?S:FP(S,Nr(A,3),rl)}function aSe(S,A){return S==null?S:lz(S,Nr(A,3),rl)}function sSe(S,A){return S&&vd(S,Nr(A,3))}function oSe(S,A){return S&&LP(S,Nr(A,3))}function lSe(S){return S==null?[]:mk(S,Za(S))}function cSe(S){return S==null?[]:mk(S,rl(S))}function gR(S,A,M){var K=S==null?r:Sm(S,A);return K===r?M:K}function uSe(S,A){return S!=null&&Vz(S,A,Rye)}function xR(S,A){return S!=null&&Vz(S,A,jye)}var dSe=Fz(function(S,A,M){A!=null&&typeof A.toString!="function"&&(A=rk.call(A)),S[A]=M},yR(nl)),fSe=Fz(function(S,A,M){A!=null&&typeof A.toString!="function"&&(A=rk.call(A)),kn.call(S,A)?S[A].push(M):S[A]=[M]},Nr),hSe=fn(Wb);function Za(S){return tl(S)?tz(S):zP(S)}function rl(S){return tl(S)?tz(S,!0):Wye(S)}function pSe(S,A){var M={};return A=Nr(A,3),vd(S,function(K,le,ke){If(M,A(K,le,ke),K)}),M}function mSe(S,A){var M={};return A=Nr(A,3),vd(S,function(K,le,ke){If(M,le,A(K,le,ke))}),M}var gSe=d1(function(S,A,M){gk(S,A,M)}),_H=d1(function(S,A,M,K){gk(S,A,M,K)}),xSe=Pf(function(S,A){var M={};if(S==null)return M;var K=!1;A=Mr(A,function(ke){return ke=gp(ke,S),K||(K=ke.length>1),ke}),yd(S,rR(S),M),K&&(M=Ec(M,f|p|m,dbe));for(var le=A.length;le--;)KP(M,A[le]);return M});function vSe(S,A){return NH(S,Ok(Nr(A)))}var ySe=Pf(function(S,A){return S==null?{}:qye(S,A)});function NH(S,A){if(S==null)return{};var M=Mr(rR(S),function(K){return[K]});return A=Nr(A),vz(S,M,function(K,le){return A(K,le[0])})}function bSe(S,A,M){A=gp(A,S);var K=-1,le=A.length;for(le||(le=1,S=r);++K<le;){var ke=S==null?r:S[bd(A[K])];ke===r&&(K=le,ke=M),S=jf(ke)?ke.call(S):ke}return S}function wSe(S,A,M){return S==null?S:qb(S,A,M)}function SSe(S,A,M,K){return K=typeof K=="function"?K:r,S==null?S:qb(S,A,M,K)}var AH=Uz(Za),TH=Uz(rl);function ESe(S,A,M){var K=Wr(S),le=K||vp(S)||p1(S);if(A=Nr(A,4),M==null){var ke=S&&S.constructor;le?M=K?new ke:[]:Li(S)?M=jf(ke)?u1(ak(S)):{}:M={}}return(le?Zo:vd)(S,function(Me,Ue,Ke){return A(M,Me,Ue,Ke)}),M}function CSe(S,A){return S==null?!0:KP(S,A)}function kSe(S,A,M){return S==null?S:Ez(S,A,QP(M))}function _Se(S,A,M,K){return K=typeof K=="function"?K:r,S==null?S:Ez(S,A,QP(M),K)}function m1(S){return S==null?[]:dp(S,Za(S))}function NSe(S){return S==null?[]:dp(S,rl(S))}function ASe(S,A,M){return M===r&&(M=A,A=r),M!==r&&(M=_c(M),M=M===M?M:0),A!==r&&(A=_c(A),A=A===A?A:0),wm(_c(S),A,M)}function TSe(S,A,M){return A=Df(A),M===r?(M=A,A=0):M=Df(M),S=_c(S),Dye(S,A,M)}function ISe(S,A,M){if(M&&typeof M!="boolean"&&_o(S,A,M)&&(A=M=r),M===r&&(typeof A=="boolean"?(M=A,A=r):typeof S=="boolean"&&(M=S,S=r)),S===r&&A===r?(S=0,A=1):(S=Df(S),A===r?(A=S,S=0):A=Df(A)),S>A){var K=S;S=A,A=K}if(M||S%1||A%1){var le=Z$();return Ws(S+le*(A-S+dm("1e-"+((le+"").length-1))),A)}return VP(S,A)}var OSe=f1(function(S,A,M){return A=A.toLowerCase(),S+(M?IH(A):A)});function IH(S){return vR(qn(S).toLowerCase())}function OH(S){return S=qn(S),S&&S.replace(At,Db).replace(kP,"")}function PSe(S,A,M){S=qn(S),A=Fl(A);var K=S.length;M=M===r?K:wm(rn(M),0,K);var le=M;return M-=A.length,M>=0&&S.slice(M,le)==A}function RSe(S){return S=qn(S),S&&Jo.test(S)?S.replace(Vi,IP):S}function jSe(S){return S=qn(S),S&&$t.test(S)?S.replace(tr,"\\$&"):S}var DSe=f1(function(S,A,M){return S+(M?"-":"")+A.toLowerCase()}),MSe=f1(function(S,A,M){return S+(M?" ":"")+A.toLowerCase()}),FSe=jz("toLowerCase");function LSe(S,A,M){S=qn(S),A=rn(A);var K=A?_(S):0;if(!A||K>=A)return S;var le=(A-K)/2;return Sk(ck(le),M)+S+Sk(lk(le),M)}function BSe(S,A,M){S=qn(S),A=rn(A);var K=A?_(S):0;return A&&K<A?S+Sk(A-K,M):S}function USe(S,A,M){S=qn(S),A=rn(A);var K=A?_(S):0;return A&&K<A?Sk(A-K,M)+S:S}function $Se(S,A,M){return M||A==null?A=0:A&&(A=+A),Kve(qn(S).replace(kr,""),A||0)}function zSe(S,A,M){return(M?_o(S,A,M):A===r)?A=1:A=rn(A),qP(qn(S),A)}function HSe(){var S=arguments,A=qn(S[0]);return S.length<3?A:A.replace(S[1],S[2])}var WSe=f1(function(S,A,M){return S+(M?"_":"")+A.toLowerCase()});function VSe(S,A,M){return M&&typeof M!="number"&&_o(S,A,M)&&(A=M=r),M=M===r?ye:M>>>0,M?(S=qn(S),S&&(typeof A=="string"||A!=null&&!mR(A))&&(A=Fl(A),!A&&fp(S))?xp(T(S),0,M):S.split(A,M)):[]}var qSe=f1(function(S,A,M){return S+(M?" ":"")+vR(A)});function GSe(S,A,M){return S=qn(S),M=M==null?0:wm(rn(M),0,S.length),A=Fl(A),S.slice(M,M+A.length)==A}function KSe(S,A,M){var K=be.templateSettings;M&&_o(S,A,M)&&(A=r),S=qn(S),A=jk({},A,K,$z);var le=jk({},A.imports,K.imports,$z),ke=Za(le),Me=dp(le,ke),Ue,Ke,yt=0,bt=A.interpolate||dt,Nt="__p += '",Ht=Fr((A.escape||dt).source+"|"+bt.source+"|"+(bt===rt?ge:dt).source+"|"+(A.evaluate||dt).source+"|$","g"),nr="//# sourceURL="+(kn.call(A,"sourceURL")?(A.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Cf+"]")+`
`;S.replace(Ht,function(Or,En,An,Bl,No,Ul){return An||(An=Bl),Nt+=S.slice(yt,Ul).replace(St,ek),En&&(Ue=!0,Nt+=`' +
__e(`+En+`) +
'`),No&&(Ke=!0,Nt+=`';
`+No+`;
__p += '`),An&&(Nt+=`' +
((__t = (`+An+`)) == null ? '' : __t) +
'`),yt=Ul+Or.length,Or}),Nt+=`';
`;var Ir=kn.call(A,"variable")&&A.variable;if(!Ir)Nt=`with (obj) {
`+Nt+`
}
`;else if(_e.test(Ir))throw new lt(o);Nt=(Ke?Nt.replace(Pt,""):Nt).replace(Cr,"$1").replace(wn,"$1;"),Nt="function("+(Ir||"obj")+`) {
`+(Ir?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ue?", __e = _.escape":"")+(Ke?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Nt+`return __p
}`;var on=RH(function(){return gt(ke,nr+"return "+Nt).apply(r,Me)});if(on.source=Nt,pR(on))throw on;return on}function XSe(S){return qn(S).toLowerCase()}function YSe(S){return qn(S).toUpperCase()}function QSe(S,A,M){if(S=qn(S),S&&(M||A===r))return ZC(S);if(!S||!(A=Fl(A)))return S;var K=T(S),le=T(A),ke=jb(K,le),Me=Ml(K,le)+1;return xp(K,ke,Me).join("")}function JSe(S,A,M){if(S=qn(S),S&&(M||A===r))return S.slice(0,j(S)+1);if(!S||!(A=Fl(A)))return S;var K=T(S),le=Ml(K,T(A))+1;return xp(K,0,le).join("")}function ZSe(S,A,M){if(S=qn(S),S&&(M||A===r))return S.replace(kr,"");if(!S||!(A=Fl(A)))return S;var K=T(S),le=jb(K,T(A));return xp(K,le).join("")}function eEe(S,A){var M=B,K=z;if(Li(A)){var le="separator"in A?A.separator:le;M="length"in A?rn(A.length):M,K="omission"in A?Fl(A.omission):K}S=qn(S);var ke=S.length;if(fp(S)){var Me=T(S);ke=Me.length}if(M>=ke)return S;var Ue=M-_(K);if(Ue<1)return K;var Ke=Me?xp(Me,0,Ue).join(""):S.slice(0,Ue);if(le===r)return Ke+K;if(Me&&(Ue+=Ke.length-Ue),mR(le)){if(S.slice(Ue).search(le)){var yt,bt=Ke;for(le.global||(le=Fr(le.source,qn(Fe.exec(le))+"g")),le.lastIndex=0;yt=le.exec(bt);)var Nt=yt.index;Ke=Ke.slice(0,Nt===r?Ue:Nt)}}else if(S.indexOf(Fl(le),Ue)!=Ue){var Ht=Ke.lastIndexOf(le);Ht>-1&&(Ke=Ke.slice(0,Ht))}return Ke+K}function tEe(S){return S=qn(S),S&&jn.test(S)?S.replace(fr,F):S}var rEe=f1(function(S,A,M){return S+(M?" ":"")+A.toUpperCase()}),vR=jz("toUpperCase");function PH(S,A,M){return S=qn(S),A=M?r:A,A===r?Mb(S)?oe(S):_f(S):S.match(A)||[]}var RH=fn(function(S,A){try{return Ya(S,r,A)}catch(M){return pR(M)?M:new lt(M)}}),nEe=Pf(function(S,A){return Zo(A,function(M){M=bd(M),If(S,M,fR(S[M],S))}),S});function iEe(S){var A=S==null?0:S.length,M=Nr();return S=A?Mr(S,function(K){if(typeof K[1]!="function")throw new Ti(s);return[M(K[0]),K[1]]}):[],fn(function(K){for(var le=-1;++le<A;){var ke=S[le];if(Ya(ke[0],this,K))return Ya(ke[1],this,K)}})}function aEe(S){return Iye(Ec(S,f))}function yR(S){return function(){return S}}function sEe(S,A){return S==null||S!==S?A:S}var oEe=Mz(),lEe=Mz(!0);function nl(S){return S}function bR(S){return fz(typeof S=="function"?S:Ec(S,f))}function cEe(S){return pz(Ec(S,f))}function uEe(S,A){return mz(S,Ec(A,f))}var dEe=fn(function(S,A){return function(M){return Wb(M,S,A)}}),fEe=fn(function(S,A){return function(M){return Wb(S,M,A)}});function wR(S,A,M){var K=Za(A),le=mk(A,K);M==null&&!(Li(A)&&(le.length||!K.length))&&(M=A,A=S,S=this,le=mk(A,Za(A)));var ke=!(Li(M)&&"chain"in M)||!!M.chain,Me=jf(S);return Zo(le,function(Ue){var Ke=A[Ue];S[Ue]=Ke,Me&&(S.prototype[Ue]=function(){var yt=this.__chain__;if(ke||yt){var bt=S(this.__wrapped__),Nt=bt.__actions__=el(this.__actions__);return Nt.push({func:Ke,args:arguments,thisArg:S}),bt.__chain__=yt,bt}return Ke.apply(S,Dl([this.value()],arguments))})}),S}function hEe(){return wa._===this&&(wa._=Bve),this}function SR(){}function pEe(S){return S=rn(S),fn(function(A){return gz(A,S)})}var mEe=ZP(Mr),gEe=ZP(QC),xEe=ZP(gr);function jH(S){return sR(S)?s1(bd(S)):Gye(S)}function vEe(S){return function(A){return S==null?r:Sm(S,A)}}var yEe=Lz(),bEe=Lz(!0);function ER(){return[]}function CR(){return!1}function wEe(){return{}}function SEe(){return""}function EEe(){return!0}function CEe(S,A){if(S=rn(S),S<1||S>X)return[];var M=ye,K=Ws(S,ye);A=Nr(A),S-=ye;for(var le=Rb(K,A);++M<S;)A(M);return le}function kEe(S){return Wr(S)?Mr(S,bd):Ll(S)?[S]:el(eH(qn(S)))}function _Ee(S){var A=++OP;return qn(S)+A}var NEe=wk(function(S,A){return S+A},0),AEe=eR("ceil"),TEe=wk(function(S,A){return S/A},1),IEe=eR("floor");function OEe(S){return S&&S.length?pk(S,nl,BP):r}function PEe(S,A){return S&&S.length?pk(S,Nr(A,2),BP):r}function REe(S){return a1(S,nl)}function jEe(S,A){return a1(S,Nr(A,2))}function DEe(S){return S&&S.length?pk(S,nl,HP):r}function MEe(S,A){return S&&S.length?pk(S,Nr(A,2),HP):r}var FEe=wk(function(S,A){return S*A},1),LEe=eR("round"),BEe=wk(function(S,A){return S-A},0);function UEe(S){return S&&S.length?pm(S,nl):0}function $Ee(S,A){return S&&S.length?pm(S,Nr(A,2)):0}return be.after=c2e,be.ary=dH,be.assign=Y2e,be.assignIn=kH,be.assignInWith=jk,be.assignWith=Q2e,be.at=J2e,be.before=fH,be.bind=fR,be.bindAll=nEe,be.bindKey=hH,be.castArray=w2e,be.chain=lH,be.chunk=Ibe,be.compact=Obe,be.concat=Pbe,be.cond=iEe,be.conforms=aEe,be.constant=yR,be.countBy=Uwe,be.create=Z2e,be.curry=pH,be.curryRight=mH,be.debounce=gH,be.defaults=eSe,be.defaultsDeep=tSe,be.defer=u2e,be.delay=d2e,be.difference=Rbe,be.differenceBy=jbe,be.differenceWith=Dbe,be.drop=Mbe,be.dropRight=Fbe,be.dropRightWhile=Lbe,be.dropWhile=Bbe,be.fill=Ube,be.filter=zwe,be.flatMap=Vwe,be.flatMapDeep=qwe,be.flatMapDepth=Gwe,be.flatten=iH,be.flattenDeep=$be,be.flattenDepth=zbe,be.flip=f2e,be.flow=oEe,be.flowRight=lEe,be.fromPairs=Hbe,be.functions=lSe,be.functionsIn=cSe,be.groupBy=Kwe,be.initial=Vbe,be.intersection=qbe,be.intersectionBy=Gbe,be.intersectionWith=Kbe,be.invert=dSe,be.invertBy=fSe,be.invokeMap=Ywe,be.iteratee=bR,be.keyBy=Qwe,be.keys=Za,be.keysIn=rl,be.map=Ak,be.mapKeys=pSe,be.mapValues=mSe,be.matches=cEe,be.matchesProperty=uEe,be.memoize=Ik,be.merge=gSe,be.mergeWith=_H,be.method=dEe,be.methodOf=fEe,be.mixin=wR,be.negate=Ok,be.nthArg=pEe,be.omit=xSe,be.omitBy=vSe,be.once=h2e,be.orderBy=Jwe,be.over=mEe,be.overArgs=p2e,be.overEvery=gEe,be.overSome=xEe,be.partial=hR,be.partialRight=xH,be.partition=Zwe,be.pick=ySe,be.pickBy=NH,be.property=jH,be.propertyOf=vEe,be.pull=Jbe,be.pullAll=sH,be.pullAllBy=Zbe,be.pullAllWith=ewe,be.pullAt=twe,be.range=yEe,be.rangeRight=bEe,be.rearg=m2e,be.reject=r2e,be.remove=rwe,be.rest=g2e,be.reverse=uR,be.sampleSize=i2e,be.set=wSe,be.setWith=SSe,be.shuffle=a2e,be.slice=nwe,be.sortBy=l2e,be.sortedUniq=uwe,be.sortedUniqBy=dwe,be.split=VSe,be.spread=x2e,be.tail=fwe,be.take=hwe,be.takeRight=pwe,be.takeRightWhile=mwe,be.takeWhile=gwe,be.tap=Owe,be.throttle=v2e,be.thru=Nk,be.toArray=SH,be.toPairs=AH,be.toPairsIn=TH,be.toPath=kEe,be.toPlainObject=CH,be.transform=ESe,be.unary=y2e,be.union=xwe,be.unionBy=vwe,be.unionWith=ywe,be.uniq=bwe,be.uniqBy=wwe,be.uniqWith=Swe,be.unset=CSe,be.unzip=dR,be.unzipWith=oH,be.update=kSe,be.updateWith=_Se,be.values=m1,be.valuesIn=NSe,be.without=Ewe,be.words=PH,be.wrap=b2e,be.xor=Cwe,be.xorBy=kwe,be.xorWith=_we,be.zip=Nwe,be.zipObject=Awe,be.zipObjectDeep=Twe,be.zipWith=Iwe,be.entries=AH,be.entriesIn=TH,be.extend=kH,be.extendWith=jk,wR(be,be),be.add=NEe,be.attempt=RH,be.camelCase=OSe,be.capitalize=IH,be.ceil=AEe,be.clamp=ASe,be.clone=S2e,be.cloneDeep=C2e,be.cloneDeepWith=k2e,be.cloneWith=E2e,be.conformsTo=_2e,be.deburr=OH,be.defaultTo=sEe,be.divide=TEe,be.endsWith=PSe,be.eq=_u,be.escape=RSe,be.escapeRegExp=jSe,be.every=$we,be.find=Hwe,be.findIndex=rH,be.findKey=rSe,be.findLast=Wwe,be.findLastIndex=nH,be.findLastKey=nSe,be.floor=IEe,be.forEach=cH,be.forEachRight=uH,be.forIn=iSe,be.forInRight=aSe,be.forOwn=sSe,be.forOwnRight=oSe,be.get=gR,be.gt=N2e,be.gte=A2e,be.has=uSe,be.hasIn=xR,be.head=aH,be.identity=nl,be.includes=Xwe,be.indexOf=Wbe,be.inRange=TSe,be.invoke=hSe,be.isArguments=km,be.isArray=Wr,be.isArrayBuffer=T2e,be.isArrayLike=tl,be.isArrayLikeObject=ca,be.isBoolean=I2e,be.isBuffer=vp,be.isDate=O2e,be.isElement=P2e,be.isEmpty=R2e,be.isEqual=j2e,be.isEqualWith=D2e,be.isError=pR,be.isFinite=M2e,be.isFunction=jf,be.isInteger=vH,be.isLength=Pk,be.isMap=yH,be.isMatch=F2e,be.isMatchWith=L2e,be.isNaN=B2e,be.isNative=U2e,be.isNil=z2e,be.isNull=$2e,be.isNumber=bH,be.isObject=Li,be.isObjectLike=Xi,be.isPlainObject=Yb,be.isRegExp=mR,be.isSafeInteger=H2e,be.isSet=wH,be.isString=Rk,be.isSymbol=Ll,be.isTypedArray=p1,be.isUndefined=W2e,be.isWeakMap=V2e,be.isWeakSet=q2e,be.join=Xbe,be.kebabCase=DSe,be.last=kc,be.lastIndexOf=Ybe,be.lowerCase=MSe,be.lowerFirst=FSe,be.lt=G2e,be.lte=K2e,be.max=OEe,be.maxBy=PEe,be.mean=REe,be.meanBy=jEe,be.min=DEe,be.minBy=MEe,be.stubArray=ER,be.stubFalse=CR,be.stubObject=wEe,be.stubString=SEe,be.stubTrue=EEe,be.multiply=FEe,be.nth=Qbe,be.noConflict=hEe,be.noop=SR,be.now=Tk,be.pad=LSe,be.padEnd=BSe,be.padStart=USe,be.parseInt=$Se,be.random=ISe,be.reduce=e2e,be.reduceRight=t2e,be.repeat=zSe,be.replace=HSe,be.result=bSe,be.round=LEe,be.runInContext=ue,be.sample=n2e,be.size=s2e,be.snakeCase=WSe,be.some=o2e,be.sortedIndex=iwe,be.sortedIndexBy=awe,be.sortedIndexOf=swe,be.sortedLastIndex=owe,be.sortedLastIndexBy=lwe,be.sortedLastIndexOf=cwe,be.startCase=qSe,be.startsWith=GSe,be.subtract=BEe,be.sum=UEe,be.sumBy=$Ee,be.template=KSe,be.times=CEe,be.toFinite=Df,be.toInteger=rn,be.toLength=EH,be.toLower=XSe,be.toNumber=_c,be.toSafeInteger=X2e,be.toString=qn,be.toUpper=YSe,be.trim=QSe,be.trimEnd=JSe,be.trimStart=ZSe,be.truncate=eEe,be.unescape=tEe,be.uniqueId=_Ee,be.upperCase=rEe,be.upperFirst=vR,be.each=cH,be.eachRight=uH,be.first=aH,wR(be,function(){var S={};return vd(be,function(A,M){kn.call(be.prototype,M)||(S[M]=A)}),S}(),{chain:!1}),be.VERSION=n,Zo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(S){be[S].placeholder=be}),Zo(["drop","take"],function(S,A){_n.prototype[S]=function(M){M=M===r?1:Ba(rn(M),0);var K=this.__filtered__&&!A?new _n(this):this.clone();return K.__filtered__?K.__takeCount__=Ws(M,K.__takeCount__):K.__views__.push({size:Ws(M,ye),type:S+(K.__dir__<0?"Right":"")}),K},_n.prototype[S+"Right"]=function(M){return this.reverse()[S](M).reverse()}}),Zo(["filter","map","takeWhile"],function(S,A){var M=A+1,K=M==Y||M==Z;_n.prototype[S]=function(le){var ke=this.clone();return ke.__iteratees__.push({iteratee:Nr(le,3),type:M}),ke.__filtered__=ke.__filtered__||K,ke}}),Zo(["head","last"],function(S,A){var M="take"+(A?"Right":"");_n.prototype[S]=function(){return this[M](1).value()[0]}}),Zo(["initial","tail"],function(S,A){var M="drop"+(A?"":"Right");_n.prototype[S]=function(){return this.__filtered__?new _n(this):this[M](1)}}),_n.prototype.compact=function(){return this.filter(nl)},_n.prototype.find=function(S){return this.filter(S).head()},_n.prototype.findLast=function(S){return this.reverse().find(S)},_n.prototype.invokeMap=fn(function(S,A){return typeof S=="function"?new _n(this):this.map(function(M){return Wb(M,S,A)})}),_n.prototype.reject=function(S){return this.filter(Ok(Nr(S)))},_n.prototype.slice=function(S,A){S=rn(S);var M=this;return M.__filtered__&&(S>0||A<0)?new _n(M):(S<0?M=M.takeRight(-S):S&&(M=M.drop(S)),A!==r&&(A=rn(A),M=A<0?M.dropRight(-A):M.take(A-S)),M)},_n.prototype.takeRightWhile=function(S){return this.reverse().takeWhile(S).reverse()},_n.prototype.toArray=function(){return this.take(ye)},vd(_n.prototype,function(S,A){var M=/^(?:filter|find|map|reject)|While$/.test(A),K=/^(?:head|last)$/.test(A),le=be[K?"take"+(A=="last"?"Right":""):A],ke=K||/^find/.test(A);le&&(be.prototype[A]=function(){var Me=this.__wrapped__,Ue=K?[1]:arguments,Ke=Me instanceof _n,yt=Ue[0],bt=Ke||Wr(Me),Nt=function(En){var An=le.apply(be,Dl([En],Ue));return K&&Ht?An[0]:An};bt&&M&&typeof yt=="function"&&yt.length!=1&&(Ke=bt=!1);var Ht=this.__chain__,nr=!!this.__actions__.length,Ir=ke&&!Ht,on=Ke&&!nr;if(!ke&&bt){Me=on?Me:new _n(this);var Or=S.apply(Me,Ue);return Or.__actions__.push({func:Nk,args:[Nt],thisArg:r}),new Sc(Or,Ht)}return Ir&&on?S.apply(this,Ue):(Or=this.thru(Nt),Ir?K?Or.value()[0]:Or.value():Or)})}),Zo(["pop","push","shift","sort","splice","unshift"],function(S){var A=La[S],M=/^(?:push|sort|unshift)$/.test(S)?"tap":"thru",K=/^(?:pop|shift)$/.test(S);be.prototype[S]=function(){var le=arguments;if(K&&!this.__chain__){var ke=this.value();return A.apply(Wr(ke)?ke:[],le)}return this[M](function(Me){return A.apply(Wr(Me)?Me:[],le)})}}),vd(_n.prototype,function(S,A){var M=be[A];if(M){var K=M.name+"";kn.call(c1,K)||(c1[K]=[]),c1[K].push({name:A,func:M})}}),c1[bk(r,w).name]=[{name:"wrapper",func:r}],_n.prototype.clone=tye,_n.prototype.reverse=rye,_n.prototype.value=nye,be.prototype.at=Pwe,be.prototype.chain=Rwe,be.prototype.commit=jwe,be.prototype.next=Dwe,be.prototype.plant=Fwe,be.prototype.reverse=Lwe,be.prototype.toJSON=be.prototype.valueOf=be.prototype.value=Bwe,be.prototype.first=be.prototype.head,Fb&&(be.prototype[Fb]=Mwe),be},Oe=xe();kf?((kf.exports=Oe)._=Oe,Ib._=Oe):wa._=Oe}).call(Ve)})(XA,XA.exports);var R6e=XA.exports;const eoe=I.createContext(void 0),Oj={customers:[],projects:[],samples:[],sampleCheckouts:[],installers:[],quotes:[],jobs:[],changeOrders:[],materialOrders:[],vendors:[],users:[]},j6e=({children:e})=>{const t=W0.useSessionContext(),r=Da(),[n,i]=I.useState(Oj),[a,s]=I.useState(null),[o,l]=I.useState(!0),[c,d]=I.useState(null),[f,p]=I.useState([]),[m,x]=I.useState(!1),{data:v=0}=wMe(!!c),{data:b=[],isLoading:w}=ab(!!c),k=y7(),{data:E=[],isLoading:N}=Rx(),{data:P=[],isLoading:R}=Kh(!!c),{data:O=[],isLoading:D}=gf(!!c),{data:L=[],isLoading:B}=y4(!!c),{data:z=[],isLoading:H}=b4(),te=w7(),{data:Y=[],isLoading:W}=qse(),Z=Gse(),{data:re=[],isLoading:X}=Kse(),Q=E7(),{data:fe=[],isLoading:ye}=S4(),J=E4(),{data:ce=[],isLoading:V}=KE(),G=Qse(),{customerHistory:ie,fetchCustomerHistory:Ee,projectHistory:ne,fetchProjectHistory:ae,quotesHistory:me,fetchQuotesHistory:ve,installerHistory:q,fetchInstallerHistory:Ne,vendorHistory:Pe,fetchVendorHistory:ze,sampleHistory:De,fetchSampleHistory:$e,materialOrderHistory:et,fetchMaterialOrderHistory:ut}=x6e(),kt=()=>{x(pe=>!pe)},ht=I.useCallback(R6e.debounce(pe=>{d(ge=>{var it,Ge,Ye,Ze;if(!ge)return null;const Fe={...ge.preferences,...pe,calendarColor:pe.calendarColor||((it=ge.preferences)==null?void 0:it.calendarColor),dashboardEmail:{...((Ge=ge.preferences)==null?void 0:Ge.dashboardEmail)||{},...pe.dashboardEmail||{}},calendar_user_colors:{...((Ye=ge.preferences)==null?void 0:Ye.calendar_user_colors)||{},...pe.calendar_user_colors||{}},projectLayouts:pe.projectLayouts||((Ze=ge.preferences)==null?void 0:Ze.projectLayouts)};return N6e(Fe).then(()=>Re.success("Preferences saved!")).catch(wt=>{console.error("Failed to save preferences:",wt),Re.error("Could not save your preferences.")}),{...ge,preferences:Fe}})},1e3),[]),Rr=I.useCallback(async()=>{try{const pe=await Jse(),ge=await _6e();d({...pe,preferences:ge})}catch(pe){console.error("Failed to fetch current user:",pe),d(null)}},[]),er=I.useCallback(async()=>{try{const pe=await O6e("branding");s(pe)}catch(pe){console.error("Failed to fetch branding:",pe)}},[]);I.useEffect(()=>{if(a){const pe=document.documentElement;a.primaryColor&&pe.style.setProperty("--color-primary",a.primaryColor),a.secondaryColor&&(pe.style.setProperty("--color-secondary",a.secondaryColor),pe.style.setProperty("--color-border",a.secondaryColor)),a.accentColor&&pe.style.setProperty("--color-accent",a.accentColor),a.backgroundColor&&pe.style.setProperty("--color-background",a.backgroundColor),a.surfaceColor&&pe.style.setProperty("--color-surface",a.surfaceColor),a.textPrimaryColor&&pe.style.setProperty("--color-text-primary",a.textPrimaryColor),a.textSecondaryColor&&pe.style.setProperty("--color-text-secondary",a.textSecondaryColor)}},[a]);const ct=I.useCallback(async()=>{try{const pe=await C7();p(pe)}catch(pe){console.error("Failed to fetch all users:",pe),p([])}},[]),qt=I.useCallback(async()=>{l(!0);try{await Promise.all([er()]),i({customers:[],projects:[],samples:[],products:[],sampleCheckouts:[],installers:[],quotes:[],jobs:[],changeOrders:[],materialOrders:[],vendors:[],users:[]})}catch(pe){console.error("Initial data fetch failed (likely no session):",pe),i(Oj)}finally{l(!1)}},[er]);I.useEffect(()=>{if(t.loading){l(!0);return}t.doesSessionExist?Rr().then(()=>{qt(),ct()}):(i(Oj),d(null),l(!1))},[t.doesSessionExist,t.loading,qt,Rr,ct]);const Lt=async()=>{await r.invalidateQueries({queryKey:["products"]})},dr=async pe=>{try{const ge=await k.addProduct.mutateAsync(pe);return Re.success("Product created successfully"),ge}catch(ge){throw console.error("Failed to add product",ge),Re.error(ge.message||"Failed to add product"),ge}},Gt=async(pe,ge)=>{try{await k.updateProduct.mutateAsync({id:pe,formData:ge}),Re.success("Product updated successfully")}catch(Fe){throw console.error("Failed to update product",Fe),Re.error(Fe.message),Fe}},qe=async pe=>{try{await k.deleteProduct.mutateAsync(pe),Re.success("Product deleted successfully")}catch(ge){throw console.error("Failed to delete product",ge),Re.error(ge.message),ge}},Xe=async(pe,ge)=>{try{const Fe=await k.addVariant.mutateAsync({productId:pe,formData:ge});return Re.success("Variant added successfully"),Fe}catch(Fe){throw console.error("Failed to add variant",Fe),Re.error(Fe.message),Fe}},Te=I.useCallback(async(pe,ge)=>{try{const Fe=await k.addVariantsBatch.mutateAsync({productId:pe,variants:ge});Re.success(`Generated ${Fe.length} variants successfully`)}catch(Fe){throw console.error("Failed to batch add variants",Fe),Re.error(Fe.message||"Failed to add variants batch"),Fe}},[k.addVariantsBatch]),He=async(pe,ge)=>{try{const Fe=await k.updateVariant.mutateAsync({variantId:pe,formData:ge});return Re.success("Variant updated successfully"),Fe}catch(Fe){throw console.error("Failed to update variant",Fe),Re.error(Fe.message),Fe}},je=async(pe,ge)=>{try{await k.deleteVariant.mutateAsync({variantId:pe,productId:ge}),Re.success("Variant deleted successfully")}catch(Fe){throw console.error("Failed to delete variant",Fe),Re.error(Fe.message),Fe}},Ce=Lt,ot=I.useCallback(async pe=>{throw Re.error("Deprecated function called: Use addProduct."),new Error("Deprecated function called.")},[]),xt=I.useCallback(async(pe,ge)=>{Re.error("Deprecated function called: Use updateProduct.")},[]),Dt=I.useCallback(async(pe,ge)=>{Re.error("Deprecated function called: Use updateProduct/ProductService.")},[]),Pt=I.useCallback(async pe=>{Re.error("Deprecated function called: Use deleteProduct.")},[]),Cr=I.useCallback(async pe=>{try{await G.addSampleCheckout(pe),Re.success("Sample checked out!")}catch(ge){throw console.error("Error adding sample checkout:",ge),Re.error(ge.message),ge}},[G.addSampleCheckout]),wn=I.useCallback(async pe=>{try{await G.returnSampleCheckout(pe),Re.success("Sample returned!")}catch(ge){throw console.error("Error updating sample checkout:",ge),Re.error(ge.message),ge}},[G.returnSampleCheckout]),fr=I.useCallback(async pe=>{try{await G.extendSampleCheckout(pe.id),Re.success("Checkout extended by 2 days!")}catch(ge){throw console.error("Error extending sample checkout:",ge),Re.error(ge.message),ge}},[G.extendSampleCheckout]),Vi=I.useCallback(async pe=>{try{await G.patchSampleCheckout({id:pe.id,data:{isSelected:!pe.isSelected}}),Re.success(pe.isSelected?"Sample deselected.":"Sample selected!")}catch(ge){console.error("Error toggling selection:",ge),Re.error("Failed to update selection.")}},[G.patchSampleCheckout]),jn=I.useCallback(async pe=>{try{await te.addQuote(pe),Re.success("Quote added successfully!")}catch(ge){throw console.error("Error adding quote:",ge),Re.error(ge.message),ge}},[te.addQuote]),Jo=I.useCallback(async pe=>{try{await te.updateQuote(pe),Re.success("Quote updated!")}catch(ge){throw console.error("Error updating quote:",ge),Re.error(ge.message),ge}},[te.updateQuote]),We=I.useCallback(async pe=>{try{await te.acceptQuote(pe),Re.success("Quote accepted and project status updated!")}catch(ge){throw console.error("Error accepting quote:",ge),Re.error(ge.message),ge}},[te.acceptQuote]),Je=I.useCallback(async pe=>{try{await Z.saveJobDetails.mutateAsync(pe),Re.success("Job details saved!")}catch(ge){throw console.error("Error saving job details:",ge),Re.error(ge.message),ge}},[Z.saveJobDetails]),rt=I.useCallback(async pe=>{try{await Q.addChangeOrder(pe),Re.success("Change order added!")}catch(ge){throw console.error("Error adding change order:",ge),Re.error(ge.message),ge}},[Q.addChangeOrder]),_t=I.useCallback(async(pe,ge)=>{try{await Q.updateChangeOrder({id:pe,data:ge}),Re.success("Change order updated!")}catch(Fe){throw console.error("Error updating change order:",Fe),Re.error(Fe.message),Fe}},[Q.updateChangeOrder]),Ut=I.useCallback(async pe=>{try{await Q.deleteChangeOrder(pe)}catch(ge){throw console.error("Error deleting change order:",ge),ge}},[Q.deleteChangeOrder]),ir=I.useCallback(async pe=>{try{await J.addMaterialOrder(pe),Re.success("Material order created!")}catch(ge){throw console.error("Error adding material order:",ge),Re.error(ge.message),ge}},[J.addMaterialOrder]),tr=I.useCallback(async(pe,ge)=>{try{await J.updateMaterialOrder({id:pe,data:ge}),Re.success("Material order updated!")}catch(Fe){throw console.error("Error updating material order:",Fe),Re.error(Fe.message),Fe}},[J.updateMaterialOrder]),$t=I.useCallback(async pe=>{try{await J.deleteMaterialOrder(pe),Re.success("Material order deleted!")}catch(ge){throw console.error("Error deleting material order:",ge),Re.error(ge.message),ge}},[J.deleteMaterialOrder]),kr=I.useCallback(async(pe,ge)=>{try{await J.receiveMaterialOrder({id:pe,data:ge}),Re.success("Order received!")}catch(Fe){throw console.error("Error receiving material order:",Fe),Re.error(Fe.message),Fe}},[J.receiveMaterialOrder]),Jt=I.useCallback(async(pe,ge)=>{try{await J.reportMaterialOrderDamage({id:pe,data:ge}),Re.success("Damage reported & replacement ordered!")}catch(Fe){throw console.error("Error reporting damage:",Fe),Re.error(Fe.message),Fe}},[J.reportMaterialOrderDamage]),Un=I.useCallback(pe=>{r.setQueryData(["jobs"],ge=>ge?ge.map(Fe=>Fe.id===pe.id?pe:Fe):[pe])},[r]),de=I.useCallback(async(pe,ge)=>{try{const Fe=await b6e(pe,ge);d(it=>it?{...it,...Fe}:null),Re.success("Profile updated successfully!")}catch(Fe){throw console.error("Error updating profile:",Fe),Re.error("Failed to update profile."),Fe}},[]),he=I.useCallback(async pe=>{try{const{avatarUrl:ge}=await w6e(pe);d(Fe=>Fe?{...Fe,avatarUrl:ge}:null),Re.success("Avatar uploaded successfully!")}catch(ge){throw console.error("Error uploading avatar:",ge),Re.error("Failed to upload avatar."),ge}},[]),we=I.useCallback(async()=>{try{await S6e(),d(pe=>pe?{...pe,avatarUrl:null}:null),Re.success("Avatar removed.")}catch(pe){console.error("Error removing avatar:",pe),Re.error("Failed to remove avatar.")}},[]),_e={customers:E,projects:P,samples:[],sampleCheckouts:ce,installers:O,quotes:z,jobs:Y,changeOrders:re,materialOrders:fe,vendors:L,users:f,products:b,isLoading:o||w||N||R||D||B||H||W||X||ye||V,currentUser:c,systemBranding:a,refreshBranding:er,isLayoutEditMode:m,toggleLayoutEditMode:kt,updateCurrentUserProfile:de,uploadCurrentUserAvatar:he,deleteCurrentUserAvatar:we,saveCurrentUserPreferences:ht,customerHistory:ie,fetchCustomerHistory:Ee,projectHistory:ne,fetchProjectHistory:ae,quotesHistory:me,fetchQuotesHistory:ve,installerHistory:q,fetchInstallerHistory:Ne,vendorHistory:Pe,fetchVendorHistory:ze,sampleHistory:De,fetchSampleHistory:$e,materialOrderHistory:et,fetchMaterialOrderHistory:ut,fetchSamples:Ce,addSample:ot,updateSample:xt,deleteSample:Pt,toggleSampleDiscontinued:Dt,fetchProducts:Lt,addProduct:dr,updateProduct:Gt,deleteProduct:qe,addVariant:Xe,addVariantsBatch:Te,updateVariant:He,deleteVariant:je,addSampleCheckout:Cr,updateSampleCheckout:wn,extendSampleCheckout:fr,toggleSampleSelection:Vi,addQuote:jn,updateQuote:Jo,acceptQuote:We,saveJobDetails:Je,addChangeOrder:rt,updateChangeOrder:_t,deleteChangeOrder:Ut,addMaterialOrder:ir,updateMaterialOrder:tr,deleteMaterialOrder:$t,receiveMaterialOrder:kr,reportMaterialOrderDamage:Jt,updateJob:Un,unreadCount:v,refreshNotifications:async()=>r.invalidateQueries({queryKey:["notifications","unreadCount"]})};return u.jsx(eoe.Provider,{value:_e,children:e})},Gr=()=>{const e=I.useContext(eoe);if(e===void 0)throw new Error("useData must be used within a DataProvider");return e},D6e="modulepreload",M6e=function(e){return"/"+e},Fq={},YE=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(r.map(l=>{if(l=M6e(l),l in Fq)return;Fq[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":D6e,c||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),c)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */const F6e=e=>{const t=new Map;t.set("web",{name:"web"});const r=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t},n=(a,s)=>{r.platforms.set(a,s)},i=a=>{r.platforms.has(a)&&(r.currentPlatform=r.platforms.get(a))};return r.addPlatform=n,r.setPlatform=i,r},L6e=e=>e.CapacitorPlatforms=F6e(e),toe=L6e(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});toe.addPlatform;toe.setPlatform;var ny;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(ny||(ny={}));let Pj=class extends Error{constructor(t,r){super(t),this.message=t,this.code=r}};const B6e=e=>{var t,r;return e!=null&&e.androidBridge?"android":!((r=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},U6e=e=>{var t,r,n,i,a;const s=e.CapacitorCustomPlatform||null,o=e.Capacitor||{},l=o.Plugins=o.Plugins||{},c=e.CapacitorPlatforms,d=()=>s!==null?s.name:B6e(e),f=((t=c==null?void 0:c.currentPlatform)===null||t===void 0?void 0:t.getPlatform)||d,p=()=>f()!=="web",m=((r=c==null?void 0:c.currentPlatform)===null||r===void 0?void 0:r.isNativePlatform)||p,x=O=>{const D=N.get(O);return!!(D!=null&&D.platforms.has(f())||w(O))},v=((n=c==null?void 0:c.currentPlatform)===null||n===void 0?void 0:n.isPluginAvailable)||x,b=O=>{var D;return(D=o.PluginHeaders)===null||D===void 0?void 0:D.find(L=>L.name===O)},w=((i=c==null?void 0:c.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||b,k=O=>e.console.error(O),E=(O,D,L)=>Promise.reject(`${L} does not have an implementation of "${D}".`),N=new Map,P=(O,D={})=>{const L=N.get(O);if(L)return console.warn(`Capacitor plugin "${O}" already registered. Cannot register plugins twice.`),L.proxy;const B=f(),z=w(O);let H;const te=async()=>(!H&&B in D?H=typeof D[B]=="function"?H=await D[B]():H=D[B]:s!==null&&!H&&"web"in D&&(H=typeof D.web=="function"?H=await D.web():H=D.web),H),Y=(fe,ye)=>{var J,ce;if(z){const V=z==null?void 0:z.methods.find(G=>ye===G.name);if(V)return V.rtype==="promise"?G=>o.nativePromise(O,ye.toString(),G):(G,ie)=>o.nativeCallback(O,ye.toString(),G,ie);if(fe)return(J=fe[ye])===null||J===void 0?void 0:J.bind(fe)}else{if(fe)return(ce=fe[ye])===null||ce===void 0?void 0:ce.bind(fe);throw new Pj(`"${O}" plugin is not implemented on ${B}`,ny.Unimplemented)}},W=fe=>{let ye;const J=(...ce)=>{const V=te().then(G=>{const ie=Y(G,fe);if(ie){const Ee=ie(...ce);return ye=Ee==null?void 0:Ee.remove,Ee}else throw new Pj(`"${O}.${fe}()" is not implemented on ${B}`,ny.Unimplemented)});return fe==="addListener"&&(V.remove=async()=>ye()),V};return J.toString=()=>`${fe.toString()}() { [capacitor code] }`,Object.defineProperty(J,"name",{value:fe,writable:!1,configurable:!1}),J},Z=W("addListener"),re=W("removeListener"),X=(fe,ye)=>{const J=Z({eventName:fe},ye),ce=async()=>{const G=await J;re({eventName:fe,callbackId:G},ye)},V=new Promise(G=>J.then(()=>G({remove:ce})));return V.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await ce()},V},Q=new Proxy({},{get(fe,ye){switch(ye){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return z?X:Z;case"removeListener":return re;default:return W(ye)}}});return l[O]=Q,N.set(O,{name:O,proxy:Q,platforms:new Set([...Object.keys(D),...z?[B]:[]])}),Q},R=((a=c==null?void 0:c.currentPlatform)===null||a===void 0?void 0:a.registerPlugin)||P;return o.convertFileSrc||(o.convertFileSrc=O=>O),o.getPlatform=f,o.handleError=k,o.isNativePlatform=m,o.isPluginAvailable=v,o.pluginMethodNoop=E,o.registerPlugin=R,o.Exception=Pj,o.DEBUG=!!o.DEBUG,o.isLoggingEnabled=!!o.isLoggingEnabled,o.platform=o.getPlatform(),o.isNative=o.isNativePlatform(),o},$6e=e=>e.Capacitor=U6e(e),YA=$6e(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),z6e=YA.registerPlugin;YA.Plugins;let jNt=class{constructor(t){this.listeners={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,r){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(r);const i=this.windowListeners[t];i&&!i.registered&&this.addWindowListener(i);const a=async()=>this.removeListener(t,r),s=Promise.resolve({remove:a});return Object.defineProperty(s,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await a()}}),s}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,r){const n=this.listeners[t];n&&n.forEach(i=>i(r))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,r){this.windowListeners[r]={registered:!1,windowEventName:t,pluginEventName:r,handler:n=>{this.notifyListeners(r,n)}}}unimplemented(t="not implemented"){return new YA.Exception(t,ny.Unimplemented)}unavailable(t="not available"){return new YA.Exception(t,ny.Unavailable)}async removeListener(t,r){const n=this.listeners[t];if(!n)return;const i=n.indexOf(r);this.listeners[t].splice(i,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}};var Lq;(function(e){e[e.NONE=0]="NONE",e[e.TOUCH_ID=1]="TOUCH_ID",e[e.FACE_ID=2]="FACE_ID",e[e.FINGERPRINT=3]="FINGERPRINT",e[e.FACE_AUTHENTICATION=4]="FACE_AUTHENTICATION",e[e.IRIS_AUTHENTICATION=5]="IRIS_AUTHENTICATION",e[e.MULTIPLE=6]="MULTIPLE"})(Lq||(Lq={}));var Bq;(function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",e[e.BIOMETRICS_UNAVAILABLE=1]="BIOMETRICS_UNAVAILABLE",e[e.USER_LOCKOUT=2]="USER_LOCKOUT",e[e.BIOMETRICS_NOT_ENROLLED=3]="BIOMETRICS_NOT_ENROLLED",e[e.USER_TEMPORARY_LOCKOUT=4]="USER_TEMPORARY_LOCKOUT",e[e.AUTHENTICATION_FAILED=10]="AUTHENTICATION_FAILED",e[e.APP_CANCEL=11]="APP_CANCEL",e[e.INVALID_CONTEXT=12]="INVALID_CONTEXT",e[e.NOT_INTERACTIVE=13]="NOT_INTERACTIVE",e[e.PASSCODE_NOT_SET=14]="PASSCODE_NOT_SET",e[e.SYSTEM_CANCEL=15]="SYSTEM_CANCEL",e[e.USER_CANCEL=16]="USER_CANCEL",e[e.USER_FALLBACK=17]="USER_FALLBACK"})(Bq||(Bq={}));const Uq=z6e("NativeBiometric",{web:()=>YE(()=>import("./web-BNJFbcNF.js"),[]).then(e=>new e.NativeBiometricWeb)});/*! Capacitor: https://capacitorjs.com/ - MIT License */const H6e=e=>{const t=new Map;t.set("web",{name:"web"});const r=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t},n=(a,s)=>{r.platforms.set(a,s)},i=a=>{r.platforms.has(a)&&(r.currentPlatform=r.platforms.get(a))};return r.addPlatform=n,r.setPlatform=i,r},W6e=e=>e.CapacitorPlatforms=H6e(e),roe=W6e(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});roe.addPlatform;roe.setPlatform;var iy;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(iy||(iy={}));class Rj extends Error{constructor(t,r,n){super(t),this.message=t,this.code=r,this.data=n}}const V6e=e=>{var t,r;return e!=null&&e.androidBridge?"android":!((r=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},q6e=e=>{var t,r,n,i,a;const s=e.CapacitorCustomPlatform||null,o=e.Capacitor||{},l=o.Plugins=o.Plugins||{},c=e.CapacitorPlatforms,d=()=>s!==null?s.name:V6e(e),f=((t=c==null?void 0:c.currentPlatform)===null||t===void 0?void 0:t.getPlatform)||d,p=()=>f()!=="web",m=((r=c==null?void 0:c.currentPlatform)===null||r===void 0?void 0:r.isNativePlatform)||p,x=O=>{const D=N.get(O);return!!(D!=null&&D.platforms.has(f())||w(O))},v=((n=c==null?void 0:c.currentPlatform)===null||n===void 0?void 0:n.isPluginAvailable)||x,b=O=>{var D;return(D=o.PluginHeaders)===null||D===void 0?void 0:D.find(L=>L.name===O)},w=((i=c==null?void 0:c.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||b,k=O=>e.console.error(O),E=(O,D,L)=>Promise.reject(`${L} does not have an implementation of "${D}".`),N=new Map,P=(O,D={})=>{const L=N.get(O);if(L)return console.warn(`Capacitor plugin "${O}" already registered. Cannot register plugins twice.`),L.proxy;const B=f(),z=w(O);let H;const te=async()=>(!H&&B in D?H=typeof D[B]=="function"?H=await D[B]():H=D[B]:s!==null&&!H&&"web"in D&&(H=typeof D.web=="function"?H=await D.web():H=D.web),H),Y=(fe,ye)=>{var J,ce;if(z){const V=z==null?void 0:z.methods.find(G=>ye===G.name);if(V)return V.rtype==="promise"?G=>o.nativePromise(O,ye.toString(),G):(G,ie)=>o.nativeCallback(O,ye.toString(),G,ie);if(fe)return(J=fe[ye])===null||J===void 0?void 0:J.bind(fe)}else{if(fe)return(ce=fe[ye])===null||ce===void 0?void 0:ce.bind(fe);throw new Rj(`"${O}" plugin is not implemented on ${B}`,iy.Unimplemented)}},W=fe=>{let ye;const J=(...ce)=>{const V=te().then(G=>{const ie=Y(G,fe);if(ie){const Ee=ie(...ce);return ye=Ee==null?void 0:Ee.remove,Ee}else throw new Rj(`"${O}.${fe}()" is not implemented on ${B}`,iy.Unimplemented)});return fe==="addListener"&&(V.remove=async()=>ye()),V};return J.toString=()=>`${fe.toString()}() { [capacitor code] }`,Object.defineProperty(J,"name",{value:fe,writable:!1,configurable:!1}),J},Z=W("addListener"),re=W("removeListener"),X=(fe,ye)=>{const J=Z({eventName:fe},ye),ce=async()=>{const G=await J;re({eventName:fe,callbackId:G},ye)},V=new Promise(G=>J.then(()=>G({remove:ce})));return V.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await ce()},V},Q=new Proxy({},{get(fe,ye){switch(ye){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return z?X:Z;case"removeListener":return re;default:return W(ye)}}});return l[O]=Q,N.set(O,{name:O,proxy:Q,platforms:new Set([...Object.keys(D),...z?[B]:[]])}),Q},R=((a=c==null?void 0:c.currentPlatform)===null||a===void 0?void 0:a.registerPlugin)||P;return o.convertFileSrc||(o.convertFileSrc=O=>O),o.getPlatform=f,o.handleError=k,o.isNativePlatform=m,o.isPluginAvailable=v,o.pluginMethodNoop=E,o.registerPlugin=R,o.Exception=Rj,o.DEBUG=!!o.DEBUG,o.isLoggingEnabled=!!o.isLoggingEnabled,o.platform=o.getPlatform(),o.isNative=o.isNativePlatform(),o},G6e=e=>e.Capacitor=q6e(e),Xg=G6e(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),C4=Xg.registerPlugin;Xg.Plugins;class noe{constructor(t){this.listeners={},this.retainedEventArguments={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,r){let n=!1;this.listeners[t]||(this.listeners[t]=[],n=!0),this.listeners[t].push(r);const a=this.windowListeners[t];a&&!a.registered&&this.addWindowListener(a),n&&this.sendRetainedArgumentsForEvent(t);const s=async()=>this.removeListener(t,r);return Promise.resolve({remove:s})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,r,n){const i=this.listeners[t];if(!i){if(n){let a=this.retainedEventArguments[t];a||(a=[]),a.push(r),this.retainedEventArguments[t]=a}return}i.forEach(a=>a(r))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,r){this.windowListeners[r]={registered:!1,windowEventName:t,pluginEventName:r,handler:n=>{this.notifyListeners(r,n)}}}unimplemented(t="not implemented"){return new Xg.Exception(t,iy.Unimplemented)}unavailable(t="not available"){return new Xg.Exception(t,iy.Unavailable)}async removeListener(t,r){const n=this.listeners[t];if(!n)return;const i=n.indexOf(r);this.listeners[t].splice(i,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const r=this.retainedEventArguments[t];r&&(delete this.retainedEventArguments[t],r.forEach(n=>{this.notifyListeners(t,n)}))}}const $q=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),zq=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class K6e extends noe{async getCookies(){const t=document.cookie,r={};return t.split(";").forEach(n=>{if(n.length<=0)return;let[i,a]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=zq(i).trim(),a=zq(a).trim(),r[i]=a}),r}async setCookie(t){try{const r=$q(t.key),n=$q(t.value),i=`; expires=${(t.expires||"").replace("expires=","")}`,a=(t.path||"/").replace("path=",""),s=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${r}=${n||""}${i}; path=${a}; ${s};`}catch(r){return Promise.reject(r)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const r of t)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}C4("CapacitorCookies",{web:()=>new K6e});const X6e=async e=>new Promise((t,r)=>{const n=new FileReader;n.onload=()=>{const i=n.result;t(i.indexOf(",")>=0?i.split(",")[1]:i)},n.onerror=i=>r(i),n.readAsDataURL(e)}),Y6e=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(i=>i.toLocaleLowerCase()).reduce((i,a,s)=>(i[a]=e[t[s]],i),{})},Q6e=(e,t=!0)=>e?Object.entries(e).reduce((n,i)=>{const[a,s]=i;let o,l;return Array.isArray(s)?(l="",s.forEach(c=>{o=t?encodeURIComponent(c):c,l+=`${a}=${o}&`}),l.slice(0,-1)):(o=t?encodeURIComponent(s):s,l=`${a}=${o}`),`${n}&${l}`},"").substr(1):null,J6e=(e,t={})=>{const r=Object.assign({method:e.method||"GET",headers:e.headers},t),i=Y6e(e.headers)["content-type"]||"";if(typeof e.data=="string")r.body=e.data;else if(i.includes("application/x-www-form-urlencoded")){const a=new URLSearchParams;for(const[s,o]of Object.entries(e.data||{}))a.set(s,o);r.body=a.toString()}else if(i.includes("multipart/form-data")||e.data instanceof FormData){const a=new FormData;if(e.data instanceof FormData)e.data.forEach((o,l)=>{a.append(l,o)});else for(const o of Object.keys(e.data))a.append(o,e.data[o]);r.body=a;const s=new Headers(r.headers);s.delete("content-type"),r.headers=s}else(i.includes("application/json")||typeof e.data=="object")&&(r.body=JSON.stringify(e.data));return r};class Z6e extends noe{async request(t){const r=J6e(t,t.webFetchExtra),n=Q6e(t.params,t.shouldEncodeUrlParams),i=n?`${t.url}?${n}`:t.url,a=await fetch(i,r),s=a.headers.get("content-type")||"";let{responseType:o="text"}=a.ok?t:{};s.includes("application/json")&&(o="json");let l,c;switch(o){case"arraybuffer":case"blob":c=await a.blob(),l=await X6e(c);break;case"json":l=await a.json();break;case"document":case"text":default:l=await a.text()}const d={};return a.headers.forEach((f,p)=>{d[p]=f}),{data:l,headers:d,status:a.status,url:a.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}C4("CapacitorHttp",{web:()=>new Z6e});const QA=C4("App",{web:()=>YE(()=>import("./web-VJj7N3it.js"),[]).then(e=>new e.AppWeb)}),Hf=C4("Preferences",{web:()=>YE(()=>import("./web-Dewt8tZk.js"),[]).then(e=>new e.PreferencesWeb)});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8e=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ioe=(...e)=>e.filter((t,r,n)=>!!t&&n.indexOf(t)===r).join(" ");/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var t8e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8e=I.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:s,...o},l)=>I.createElement("svg",{ref:l,...t8e,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:ioe("lucide",i),...o},[...s.map(([c,d])=>I.createElement(c,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=(e,t)=>{const r=I.forwardRef(({className:n,...i},a)=>I.createElement(r8e,{ref:a,iconNode:t,className:ioe(`lucide-${e8e(e)}`,n),...i}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hq=mt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8e=mt("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8e=mt("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8e=mt("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=mt("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=mt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=mt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8e=mt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=mt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8e=mt("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8e=mt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8e=mt("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rh=mt("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aoe=mt("Brush",[["path",{d:"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08",key:"1styjt"}],["path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z",key:"z0l1mu"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8e=mt("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=mt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=mt("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=mt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8e=mt("CameraOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16",key:"qmtpty"}],["path",{d:"M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5",key:"1ufyfc"}],["path",{d:"M14.121 15.121A3 3 0 1 1 9.88 10.88",key:"11zox6"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=mt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=mt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=mt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wq=mt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=mt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=mt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8e=mt("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=mt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=mt("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=mt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=mt("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=mt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8e=mt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8e=mt("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=mt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=mt("CloudDownload",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m8 17 4 4 4-4",key:"1ul180"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const soe=mt("CloudUpload",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m8e=mt("CopyPlus",[["line",{x1:"15",x2:"15",y1:"12",y2:"18",key:"1p7wdc"}],["line",{x1:"12",x2:"18",y1:"15",y2:"15",key:"1nscbv"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k7=mt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=mt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=mt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=mt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g8e=mt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ooe=mt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=mt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x8e=mt("FilePen",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8e=mt("FileSliders",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M10 11v2",key:"1s651w"}],["path",{d:"M8 17h8",key:"wh5c61"}],["path",{d:"M14 16v2",key:"12fp5e"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8e=mt("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=mt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8e=mt("FileType",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 13v-1h6v1",key:"1bb014"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M11 18h2",key:"12mj7e"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const loe=mt("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=mt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=mt("Fingerprint",[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=mt("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vq=mt("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8e=mt("GitCommitHorizontal",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=mt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qq=mt("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8e=mt("Hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=mt("HardHat",[["path",{d:"M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z",key:"1dej2m"}],["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8e=mt("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C8e=mt("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k8e=mt("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=mt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const coe=mt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=mt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gq=mt("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8e=mt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8e=mt("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=mt("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uoe=mt("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=mt("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8e=mt("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8e=mt("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8e=mt("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=mt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=mt("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=mt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const doe=mt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kq=mt("MailX",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h9",key:"1j9vog"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m17 17 4 4",key:"1b3523"}],["path",{d:"m21 17-4 4",key:"uinynz"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=mt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=mt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8e=mt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const foe=mt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=mt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8e=mt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8e=mt("MousePointerClick",[["path",{d:"m9 9 5 12 1.8-5.2L21 14Z",key:"1b76lo"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=mt("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8e=mt("PackagePlus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=mt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hoe=mt("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=mt("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xq=mt("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=mt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8e=mt("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8e=mt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=mt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=mt("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=mt("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=mt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=mt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=mt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8e=mt("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=mt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=mt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8e=mt("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B8e=mt("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=mt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8e=mt("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const poe=mt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=mt("SquareCheckBig",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=mt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const moe=mt("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const goe=mt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=mt("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8e=mt("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=mt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=mt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=mt("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T7=mt("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=mt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8e=mt("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8e=mt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=mt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=mt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=mt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8e=mt("ZapOff",[["path",{d:"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317",key:"193nxd"}],["path",{d:"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773",key:"27a7lr"}],["path",{d:"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643",key:"1e0qe9"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xoe=mt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),V8e=({onUnlock:e})=>{const t=async()=>{await W0.signOut(),window.location.href="/auth"},r=document.title||"Subfloor";return u.jsxs("div",{className:"fixed inset-0 z-[9999] bg-slate-900 flex flex-col items-center justify-center p-6 text-white",children:[u.jsx("div",{className:"w-24 h-24 bg-slate-800 rounded-full flex items-center justify-center mb-8 shadow-xl border border-slate-700",children:u.jsx(Z6,{className:"w-12 h-12 text-blue-500"})}),u.jsxs("h1",{className:"text-2xl font-bold mb-2",children:[r," is Locked"]}),u.jsx("p",{className:"text-slate-400 mb-12 text-center",children:"Verify your identity to resume your session"}),u.jsxs("button",{onClick:e,className:"w-full max-w-xs bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-6 rounded-xl shadow-lg transition-all active:scale-95 flex items-center justify-center gap-3 mb-4",children:[u.jsx(Z6,{className:"w-6 h-6"}),u.jsx("span",{children:"Unlock with Biometrics"})]}),u.jsxs("button",{onClick:t,className:"text-slate-400 hover:text-white flex items-center gap-2 py-4",children:[u.jsx(doe,{className:"w-4 h-4"}),u.jsx("span",{children:"Log Out"})]})]})},voe=I.createContext({}),jj=5*60*1e3,Dj="biometrics_enabled",w1="bio_last_active_timestamp",q8e=({children:e})=>{const{user:t}=Gr(),[r,n]=I.useState(!1),[i,a]=I.useState(!1),s=I.useRef(null);I.useEffect(()=>{(async()=>{const{value:p}=await Hf.get({key:Dj}),m=p==="true";if(a(m),m){const{value:x}=await Hf.get({key:w1});if(x){const v=parseInt(x,10),b=Date.now()-v;b>jj&&(console.log(`[Bio] Boot Lock: Inactive for ${Math.round(b/1e3)}s`),n(!0))}}})()},[]),I.useEffect(()=>{if(!Xg.isNativePlatform())return;const f=QA.addListener("appStateChange",async({isActive:p})=>{if(i)if(!p)await Hf.set({key:w1,value:Date.now().toString()});else{const{value:m}=await Hf.get({key:w1});if(m){const x=Date.now()-parseInt(m,10);x>jj&&(console.log(`[Bio] Resume Lock: Inactive for ${Math.round(x/1e3)}s`),n(!0))}}});return()=>{f.then(p=>p.remove())}},[i]);const o=()=>{!i||r||(s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{console.log("[Bio] Idle Lock: Screen left on too long"),n(!0)},jj),Hf.set({key:w1,value:Date.now().toString()}))};I.useEffect(()=>{if(i)return window.addEventListener("touchstart",o),window.addEventListener("click",o),window.addEventListener("keypress",o),o(),()=>{window.removeEventListener("touchstart",o),window.removeEventListener("click",o),window.removeEventListener("keypress",o),s.current&&clearTimeout(s.current)}},[i,r]);const l=async()=>{try{await Uq.verifyIdentity({reason:"Unlock Subfloor",title:"Verify Identity",subtitle:"Unlock App",description:"Please authenticate to continue"}),n(!1),o(),Hf.set({key:w1,value:Date.now().toString()})}catch(f){console.error("[Bio] Scan failed or cancelled",f)}},c=async()=>{try{return(await Uq.isAvailable()).isAvailable?(await Hf.set({key:Dj,value:"true"}),await Hf.set({key:w1,value:Date.now().toString()}),a(!0),!0):(alert("Biometrics not available on this device"),!1)}catch(f){return console.error(f),!1}},d=async()=>{await Hf.set({key:Dj,value:"false"}),a(!1),n(!1)};return I.useEffect(()=>{r&&l()},[r]),u.jsxs(voe.Provider,{value:{isEnabled:i,enableBiometrics:c,disableBiometrics:d},children:[r&&u.jsx(V8e,{onUnlock:l}),e]})},G8e=()=>I.useContext(voe),K8e=()=>{const[e,t]=I.useState([]),r=n=>{t(i=>[n,...i].slice(0,4))};return I.useEffect(()=>{if(!Xg.isNativePlatform())return;(async()=>{try{const{PushNotifications:i}=await YE(async()=>{const{PushNotifications:s}=await import("./index-CTUlVQjq.js");return{PushNotifications:s}},[]);if(r("Checking Perms..."),(await i.checkPermissions()).receive!=="granted"&&(await i.requestPermissions()).receive!=="granted"){r("User DENIED");return}r("Registering..."),await i.register(),await i.removeAllListeners(),await i.addListener("registration",async s=>{r(`TOKEN: ${s.value.substring(0,6)}...`);try{await fetch(rr("/api/notifications/register-device"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s.value,platform:"android",model:navigator.userAgent}),credentials:"include"}),r("SERVER SENT OK")}catch(o){r(`API FAIL: ${o.message}`)}}),await i.addListener("registrationError",s=>{r(`REG FAIL: ${JSON.stringify(s)}`)})}catch(i){console.error("Push Init Failed:",i),r(`INIT ERR: ${i.message}`)}})()},[]),e.length===0?null:u.jsx("div",{style:{position:"fixed",top:60,left:10,zIndex:999999,backgroundColor:"rgba(200, 0, 0, 0.8)",color:"white",padding:8,fontSize:10,fontWeight:"bold",pointerEvents:"none",borderRadius:4},children:e.map((n,i)=>u.jsx("div",{children:n},i))})},Yq=e=>{switch(e){case"customers":return u.jsx(lc,{className:"w-6 h-6 text-gray-400"});case"projects":return u.jsx(Rh,{className:"w-6 h-6 text-gray-400"});case"installers":return u.jsx(sb,{className:"w-6 h-6 text-gray-400"});case"samples":return u.jsx(pd,{className:"w-6 h-6 text-gray-400"});default:return null}},X8e=(e,t)=>{const r=encodeURIComponent(t);switch(e){case"customers":return`/customers?search=${r}`;case"installers":return`/installers?search=${r}`;case"samples":return`/samples?search=${r}`;case"projects":return`/dashboard?search=${r}`;default:return"#"}},Y8e=()=>{const[e,t]=I.useState(""),[r,n]=I.useState(null),[i,a]=I.useState(!1),[s,o]=I.useState(!1),l=I.useRef(null);pu(),I.useEffect(()=>{if(e.length<2){n(null),o(!1);return}a(!0);const f=setTimeout(()=>{fetch(rr(`/api/search?q=${e}`),{credentials:"include"}).then(p=>p.json()).then(p=>{n(p),o(!0)}).catch(console.error).finally(()=>a(!1))},300);return()=>clearTimeout(f)},[e]),I.useEffect(()=>{const f=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const c=()=>{t(""),n(null),o(!1)},d=r?Object.values(r).reduce((f,p)=>f+(Array.isArray(p)?p.length:0),0):0;return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"relative w-full md:w-64",ref:l,children:[u.jsxs("div",{className:"relative",children:[u.jsx(Wo,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),u.jsx("input",{type:"text",placeholder:"Search anything...",value:e,onChange:f=>t(f.target.value),onFocus:()=>e.length>1&&o(!0),className:"w-full bg-background text-text-primary pl-10 pr-4 py-2 rounded-lg border border-border focus:outline-none focus:ring-2 focus:ring-primary"})]}),s&&u.jsx("div",{className:"fixed inset-x-0 bottom-0 top-[72px] md:absolute md:top-full md:bottom-auto md:mt-2 w-full md:w-96 bg-surface md:rounded-lg shadow-lg border-t md:border border-border z-50 overflow-y-auto",children:i?u.jsxs("div",{className:"p-8 text-center text-gray-400 flex flex-col items-center gap-2",children:[u.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"}),u.jsx("span",{children:"Searching..."})]}):d>0&&r?u.jsx("div",{children:Object.entries(r).map(([f,p])=>{if(!Array.isArray(p)||p.length===0)return null;const m=p.slice(0,3),x=p.length>3;return u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-bold uppercase text-text-secondary px-4 pt-4 pb-2 border-b border-border bg-background/50",children:f}),u.jsx("ul",{children:m.map(v=>u.jsx("li",{children:f==="samples"?u.jsxs(ai,{to:`/samples?open=${v.id}`,onClick:c,className:"flex items-center gap-4 p-5 md:p-3 hover:bg-background transition-colors border-b border-border/50",children:[v.image?u.jsx("div",{className:"w-10 h-10 rounded-md bg-background border border-border shrink-0 overflow-hidden",children:u.jsx("img",{src:Ia(v.image),alt:v.title,className:"w-full h-full object-cover"})}):Yq(f),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-lg md:text-base text-text-primary",children:v.title}),v.subtitle&&u.jsx("p",{className:"text-sm md:text-xs text-text-secondary",children:v.subtitle})]})]}):u.jsxs(ai,{to:v.path,onClick:c,className:"flex items-center gap-4 p-5 md:p-3 hover:bg-background transition-colors border-b border-border/50",children:[Yq(f),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-lg md:text-base text-text-primary",children:v.title}),v.subtitle&&u.jsx("p",{className:"text-sm md:text-xs text-text-secondary",children:v.subtitle})]})]})},`${f}-${v.id}`))}),x&&u.jsxs(ai,{to:X8e(f,e),onClick:c,className:"flex items-center justify-center gap-2 p-3 text-sm font-bold text-primary hover:bg-background/50 transition-colors border-b border-border/50",children:["View All ",f," ",u.jsx(K0,{className:"w-4 h-4"})]})]},f)})}):u.jsxs("div",{className:"p-4 text-center text-gray-400",children:['No results found for "',e,'".']})})]})})};var yoe={exports:{}},boe={exports:{}};(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(r,n){return r<<n|r>>>32-n},rotr:function(r,n){return r<<32-n|r>>>n},endian:function(r){if(r.constructor==Number)return t.rotl(r,8)&16711935|t.rotl(r,24)&4278255360;for(var n=0;n<r.length;n++)r[n]=t.endian(r[n]);return r},randomBytes:function(r){for(var n=[];r>0;r--)n.push(Math.floor(Math.random()*256));return n},bytesToWords:function(r){for(var n=[],i=0,a=0;i<r.length;i++,a+=8)n[a>>>5]|=r[i]<<24-a%32;return n},wordsToBytes:function(r){for(var n=[],i=0;i<r.length*32;i+=8)n.push(r[i>>>5]>>>24-i%32&255);return n},bytesToHex:function(r){for(var n=[],i=0;i<r.length;i++)n.push((r[i]>>>4).toString(16)),n.push((r[i]&15).toString(16));return n.join("")},hexToBytes:function(r){for(var n=[],i=0;i<r.length;i+=2)n.push(parseInt(r.substr(i,2),16));return n},bytesToBase64:function(r){for(var n=[],i=0;i<r.length;i+=3)for(var a=r[i]<<16|r[i+1]<<8|r[i+2],s=0;s<4;s++)i*8+s*6<=r.length*8?n.push(e.charAt(a>>>6*(3-s)&63)):n.push("=");return n.join("")},base64ToBytes:function(r){r=r.replace(/[^A-Z0-9+\/]/ig,"");for(var n=[],i=0,a=0;i<r.length;a=++i%4)a!=0&&n.push((e.indexOf(r.charAt(i-1))&Math.pow(2,-2*a+8)-1)<<a*2|e.indexOf(r.charAt(i))>>>6-a*2);return n}};boe.exports=t})();var Q8e=boe.exports,n8={utf8:{stringToBytes:function(e){return n8.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n8.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(e.charCodeAt(r)&255);return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}},Qq=n8;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var J8e=function(e){return e!=null&&(woe(e)||Z8e(e)||!!e._isBuffer)};function woe(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Z8e(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&woe(e.slice(0,0))}(function(){var e=Q8e,t=Qq.utf8,r=J8e,n=Qq.bin,i=function(a,s){a.constructor==String?s&&s.encoding==="binary"?a=n.stringToBytes(a):a=t.stringToBytes(a):r(a)?a=Array.prototype.slice.call(a,0):!Array.isArray(a)&&a.constructor!==Uint8Array&&(a=a.toString());for(var o=e.bytesToWords(a),l=a.length*8,c=1732584193,d=-271733879,f=-1732584194,p=271733878,m=0;m<o.length;m++)o[m]=(o[m]<<8|o[m]>>>24)&16711935|(o[m]<<24|o[m]>>>8)&4278255360;o[l>>>5]|=128<<l%32,o[(l+64>>>9<<4)+14]=l;for(var x=i._ff,v=i._gg,b=i._hh,w=i._ii,m=0;m<o.length;m+=16){var k=c,E=d,N=f,P=p;c=x(c,d,f,p,o[m+0],7,-680876936),p=x(p,c,d,f,o[m+1],12,-389564586),f=x(f,p,c,d,o[m+2],17,606105819),d=x(d,f,p,c,o[m+3],22,-1044525330),c=x(c,d,f,p,o[m+4],7,-176418897),p=x(p,c,d,f,o[m+5],12,1200080426),f=x(f,p,c,d,o[m+6],17,-1473231341),d=x(d,f,p,c,o[m+7],22,-45705983),c=x(c,d,f,p,o[m+8],7,1770035416),p=x(p,c,d,f,o[m+9],12,-1958414417),f=x(f,p,c,d,o[m+10],17,-42063),d=x(d,f,p,c,o[m+11],22,-1990404162),c=x(c,d,f,p,o[m+12],7,1804603682),p=x(p,c,d,f,o[m+13],12,-40341101),f=x(f,p,c,d,o[m+14],17,-1502002290),d=x(d,f,p,c,o[m+15],22,1236535329),c=v(c,d,f,p,o[m+1],5,-165796510),p=v(p,c,d,f,o[m+6],9,-1069501632),f=v(f,p,c,d,o[m+11],14,643717713),d=v(d,f,p,c,o[m+0],20,-373897302),c=v(c,d,f,p,o[m+5],5,-701558691),p=v(p,c,d,f,o[m+10],9,38016083),f=v(f,p,c,d,o[m+15],14,-660478335),d=v(d,f,p,c,o[m+4],20,-405537848),c=v(c,d,f,p,o[m+9],5,568446438),p=v(p,c,d,f,o[m+14],9,-1019803690),f=v(f,p,c,d,o[m+3],14,-187363961),d=v(d,f,p,c,o[m+8],20,1163531501),c=v(c,d,f,p,o[m+13],5,-1444681467),p=v(p,c,d,f,o[m+2],9,-51403784),f=v(f,p,c,d,o[m+7],14,1735328473),d=v(d,f,p,c,o[m+12],20,-1926607734),c=b(c,d,f,p,o[m+5],4,-378558),p=b(p,c,d,f,o[m+8],11,-2022574463),f=b(f,p,c,d,o[m+11],16,1839030562),d=b(d,f,p,c,o[m+14],23,-35309556),c=b(c,d,f,p,o[m+1],4,-1530992060),p=b(p,c,d,f,o[m+4],11,1272893353),f=b(f,p,c,d,o[m+7],16,-155497632),d=b(d,f,p,c,o[m+10],23,-1094730640),c=b(c,d,f,p,o[m+13],4,681279174),p=b(p,c,d,f,o[m+0],11,-358537222),f=b(f,p,c,d,o[m+3],16,-722521979),d=b(d,f,p,c,o[m+6],23,76029189),c=b(c,d,f,p,o[m+9],4,-640364487),p=b(p,c,d,f,o[m+12],11,-421815835),f=b(f,p,c,d,o[m+15],16,530742520),d=b(d,f,p,c,o[m+2],23,-995338651),c=w(c,d,f,p,o[m+0],6,-198630844),p=w(p,c,d,f,o[m+7],10,1126891415),f=w(f,p,c,d,o[m+14],15,-1416354905),d=w(d,f,p,c,o[m+5],21,-57434055),c=w(c,d,f,p,o[m+12],6,1700485571),p=w(p,c,d,f,o[m+3],10,-1894986606),f=w(f,p,c,d,o[m+10],15,-1051523),d=w(d,f,p,c,o[m+1],21,-2054922799),c=w(c,d,f,p,o[m+8],6,1873313359),p=w(p,c,d,f,o[m+15],10,-30611744),f=w(f,p,c,d,o[m+6],15,-1560198380),d=w(d,f,p,c,o[m+13],21,1309151649),c=w(c,d,f,p,o[m+4],6,-145523070),p=w(p,c,d,f,o[m+11],10,-1120210379),f=w(f,p,c,d,o[m+2],15,718787259),d=w(d,f,p,c,o[m+9],21,-343485551),c=c+k>>>0,d=d+E>>>0,f=f+N>>>0,p=p+P>>>0}return e.endian([c,d,f,p])};i._ff=function(a,s,o,l,c,d,f){var p=a+(s&o|~s&l)+(c>>>0)+f;return(p<<d|p>>>32-d)+s},i._gg=function(a,s,o,l,c,d,f){var p=a+(s&l|o&~l)+(c>>>0)+f;return(p<<d|p>>>32-d)+s},i._hh=function(a,s,o,l,c,d,f){var p=a+(s^o^l)+(c>>>0)+f;return(p<<d|p>>>32-d)+s},i._ii=function(a,s,o,l,c,d,f){var p=a+(o^(s|~l))+(c>>>0)+f;return(p<<d|p>>>32-d)+s},i._blocksize=16,i._digestsize=16,yoe.exports=function(a,s){if(a==null)throw new Error("Illegal argument "+a);var o=e.wordsToBytes(i(a,s));return s&&s.asBytes?o:s&&s.asString?n.bytesToString(o):e.bytesToHex(o)}})();var eFe=yoe.exports;const tFe=Bs(eFe);function hS(e){const t=e.trim().toLowerCase();return tFe(t)}const rFe=()=>{const{currentUser:e,isLayoutEditMode:t,toggleLayoutEditMode:r,unreadCount:n,refreshNotifications:i}=Gr(),a=Ol(),[s,o]=I.useState(""),[l,c]=I.useState(!1),[d,f]=I.useState([]),p=I.useRef(null),m=a.pathname.startsWith("/projects/");I.useEffect(()=>{if(e!=null&&e.avatarUrl)o(Ia(e.avatarUrl));else if(e!=null&&e.email){const w=hS(e.email);o(`https://www.gravatar.com/avatar/${w}?s=40&d=mp`)}},[e,e==null?void 0:e.avatarUrl]),I.useEffect(()=>{const w=k=>{p.current&&!p.current.contains(k.target)&&c(!1)};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[]),I.useEffect(()=>{l&&(gMe().then(f),i())},[l,i]);const x=async()=>{await W0.signOut(),window.location.href="/auth"};if(!e)return null;const v=e.firstName?`${e.firstName} ${e.lastName||""}`:e.email,b=async w=>{w.isRead||(await vMe(w.id),i()),c(!1)};return u.jsxs("div",{className:"relative",ref:p,children:[u.jsxs("button",{onClick:()=>c(!l),className:"flex items-center space-x-3 text-text-primary hover:text-primary p-1 pr-3 rounded-full hover:bg-surface-container-high transition-colors border border-transparent hover:border-outline/10 group",children:[n>0&&u.jsx("span",{className:"absolute top-0 left-0 -mt-1 -ml-1 w-5 h-5 bg-error-container text-error rounded-full text-[10px] flex items-center justify-center font-bold border border-surface z-10 shadow-sm",children:n>9?"9+":n}),u.jsx("img",{src:s,alt:"User Avatar",className:"w-8 h-8 rounded-full bg-surface-container-highest border border-outline/20 object-cover"}),u.jsx("span",{className:"hidden sm:inline text-sm font-bold group-hover:text-primary transition-colors",children:v})]}),l&&u.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-surface-container-high rounded-xl shadow-xl z-50 border border-outline/10 overflow-hidden ring-1 ring-black/5",children:[u.jsxs("div",{className:"p-3 border-b border-outline/10 bg-surface-container-low flex justify-between items-center",children:[u.jsx("span",{className:"text-xs font-bold text-text-secondary uppercase tracking-wider",children:"Notifications"}),n>0&&u.jsxs("button",{onClick:async()=>{await yMe(),i(),c(!1)},className:"text-xs text-primary hover:text-primary-hover font-medium flex items-center gap-1",children:[u.jsx(ad,{size:12})," Mark all read"]})]}),u.jsx("div",{className:"max-h-60 overflow-y-auto",children:d.length===0?u.jsx("div",{className:"p-8 text-center text-text-secondary text-sm italic opacity-70",children:"No notifications"}):d.map(w=>u.jsx(ai,{to:w.linkUrl,onClick:()=>b(w),className:`block p-3 border-b border-outline/10 hover:bg-surface-container-highest transition-colors ${w.isRead?"border-l-4 border-l-transparent":"bg-primary-container/10 border-l-4 border-l-primary"}`,children:u.jsxs("div",{className:"flex gap-3",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-primary text-on-primary flex items-center justify-center text-xs font-bold flex-shrink-0 shadow-sm",children:w.senderInitial||"?"}),u.jsxs("div",{children:[u.jsx("p",{className:`text-sm text-text-primary line-clamp-2 ${w.isRead?"":"font-medium"}`,children:w.message}),u.jsx("p",{className:"text-[10px] text-text-tertiary mt-1",children:new Date(w.createdAt).toLocaleDateString()})]})]})},w.id))}),u.jsxs("div",{className:"p-2 border-t border-outline/10 bg-surface-container-low",children:[m&&u.jsx("button",{onClick:()=>{r(),c(!1)},className:"w-full flex items-center px-3 py-2 text-sm text-text-primary rounded-lg hover:bg-surface-container-highest transition-colors",children:t?u.jsxs(u.Fragment,{children:[u.jsx(N4,{size:16,className:"mr-3 text-error"}),u.jsx("span",{children:"Exit Edit Mode"})]}):u.jsxs(u.Fragment,{children:[u.jsx(eC,{size:16,className:"mr-3 text-primary"}),u.jsx("span",{children:"Edit Page Layout"})]})}),u.jsxs("button",{onClick:x,className:"w-full flex items-center px-3 py-2 text-sm text-text-primary rounded-lg hover:bg-surface-container-highest transition-colors mt-1",children:[u.jsx(doe,{size:16,className:"mr-3"}),u.jsx("span",{children:"Logout"})]})]})]})]})},nFe=()=>{const e=Ol(),{isLayoutEditMode:t,toggleLayoutEditMode:r}=Gr();return I.useEffect(()=>{t&&r()},[e.pathname]),null},iFe=20,aFe=()=>{var v;const{currentUser:e}=Gr(),t=(v=e==null?void 0:e.roles)==null?void 0:v.includes("Admin"),{toasts:r,handlers:n}=Jae(),{startPause:i,endPause:a}=n,[s,o]=I.useState([]),[l,c]=I.useState(!1),[d,f]=I.useState(null);I.useEffect(()=>{if(!t)return;(async()=>{try{const w=await fetch(rr("/api/system/check-remote"),{credentials:"include"});if(w.ok){const k=await w.json();k.isUpdateAvailable&&f({version:k.latestVersion,url:k.releaseNotesUrl})}}catch(w){console.error("Failed to check for updates:",w)}})()},[t]),I.useEffect(()=>{r.forEach(b=>{o(w=>{if(w.find(E=>E.id===b.id))return w;let k=b.message;return typeof k=="function"&&(k="Custom Component Message"),[{id:b.id,message:k,type:b.type,time:new Date},...w].slice(0,iFe)})})},[r]);const p=r.filter(b=>b.visible)[0],m=b=>{switch(b){case"success":return"text-green-500";case"error":return"text-red-500";case"loading":return"text-blue-500";default:return"text-text-secondary"}},x=b=>{switch(b){case"success":return u.jsx(_4,{size:14,className:"text-green-500"});case"error":return u.jsx(QE,{size:14,className:"text-red-500"});case"loading":return u.jsx(Hq,{size:14,className:"text-blue-500 animate-pulse"});default:return u.jsx(_8e,{size:14,className:"text-text-secondary"})}};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"hidden md:flex relative z-50 mr-4",onMouseEnter:i,onMouseLeave:a,children:[u.jsxs("div",{onClick:()=>c(!l),className:`
                        cursor-pointer flex items-center gap-3 px-4 py-2 rounded-lg border transition-all duration-300 w-80 h-10 overflow-hidden relative
                        ${p?"bg-surface border-primary shadow-sm":"bg-surface/50 border-transparent hover:bg-surface hover:border-border"}
                    `,children:[u.jsx("div",{className:"flex-shrink-0",children:p?x(p.type):d?u.jsx(dS,{size:14,className:"text-blue-500 animate-bounce"}):u.jsx(Hq,{size:14,className:"text-text-tertiary"})}),u.jsx("div",{className:"flex-1 text-sm font-medium truncate relative",children:u.jsx("div",{className:"animate-in slide-in-from-bottom-2 fade-in duration-300",children:p?u.jsx("span",{className:m(p.type),children:p.message}):d?u.jsxs("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline font-bold flex items-center gap-1",onClick:b=>b.stopPropagation(),children:["Update Available: v",d.version]}):u.jsx("span",{className:"text-text-tertiary",children:"System Ready"})},(p==null?void 0:p.id)||(d?"update":"idle"))}),u.jsx(us,{size:14,className:`text-text-tertiary transition-transform ${l?"rotate-180":""}`})]}),l&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1)}),u.jsxs("div",{className:"absolute top-full right-0 mt-2 w-96 bg-surface border border-border rounded-lg shadow-xl z-50 overflow-hidden flex flex-col max-h-[500px]",children:[u.jsxs("div",{className:"p-3 border-b border-border bg-background flex justify-between items-center",children:[u.jsx("span",{className:"text-xs font-bold text-text-secondary uppercase tracking-wider",children:"System Log"}),u.jsx("button",{onClick:()=>o([]),className:"text-xs text-text-tertiary hover:text-red-500",children:"Clear"})]}),u.jsx("div",{className:"overflow-y-auto flex-1",children:s.length===0?u.jsx("div",{className:"p-8 text-center text-text-tertiary text-sm",children:"No recent activity"}):s.map(b=>u.jsxs("div",{className:"p-3 border-b border-border last:border-0 hover:bg-background/50 flex gap-3",children:[u.jsx("div",{className:"mt-0.5",children:x(b.type)}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"text-sm text-text-primary break-words",children:b.message}),u.jsxs("div",{className:"text-[10px] text-text-tertiary mt-1 flex items-center gap-1",children:[u.jsx(od,{size:10}),b.time.toLocaleTimeString()]})]})]},b.id))})]})]})]}),u.jsxs("div",{className:"md:hidden fixed top-0 left-0 right-0 z-[100] p-4 flex flex-col gap-2 pointer-events-none",children:[d&&!p&&u.jsxs("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"pointer-events-auto bg-blue-600 text-white shadow-lg rounded-lg p-3 flex items-center gap-3 animate-in slide-in-from-top-2 fade-in",children:[u.jsx(dS,{size:16}),u.jsxs("div",{className:"text-sm font-bold flex-1",children:["New Version v",d.version," is available!"]})]}),r.filter(b=>b.visible).map(b=>u.jsxs("div",{className:"pointer-events-auto bg-surface shadow-lg border border-border rounded-lg p-3 flex items-center gap-3 animate-in slide-in-from-top-2 fade-in",children:[x(b.type),u.jsx("div",{className:"text-sm font-medium flex-1 text-text-primary",children:b.message})]},b.id))]})]})},sFe=()=>{const[e,t]=I.useState(!1),{systemBranding:r}=Gr(),n=()=>u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"mb-8 flex items-center justify-between h-16 px-2",children:[r!=null&&r.logoUrl?u.jsx("img",{src:Ia(r.logoUrl),alt:"Company Logo",className:"max-h-16 lg:max-h-12 max-w-full object-contain"}):u.jsx("h1",{className:"text-3xl lg:text-2xl font-bold text-primary",children:"Subfloor"}),u.jsx("button",{onClick:()=>t(!1),className:"lg:hidden p-2 text-text-secondary hover:text-text-primary",children:u.jsx(Zr,{className:"w-8 h-8"})})]}),u.jsxs("nav",{className:"flex flex-col space-y-4 lg:space-y-2 flex-grow",children:[u.jsxs($l,{to:"/",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,end:!0,children:[u.jsx(coe,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Dashboard"})]}),u.jsxs($l,{to:"/customers",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(ex,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Customers"})]}),u.jsxs($l,{to:"/installers",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(sb,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Installers"})]}),u.jsxs($l,{to:"/samples",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(pd,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Sample Library"})]}),u.jsxs($l,{to:"/vendors",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(Yg,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Vendor Directory"})]}),u.jsxs($l,{to:"/orders",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(O0,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Orders"})]}),u.jsxs($l,{to:"/import",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(JA,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Import Data"})]}),u.jsxs($l,{to:"/kb",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(l8e,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Knowledge Base"})]}),u.jsxs($l,{to:"/calendar",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(xu,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Calendar"})]}),u.jsxs($l,{to:"/reports",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(p8e,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Reports"})]}),u.jsxs($l,{to:"/messages",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(t8,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Messages"})]})]}),u.jsx("div",{className:"mt-auto",children:u.jsxs($l,{to:"/settings",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(eC,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Settings"})]})})]});return u.jsxs("div",{className:"flex h-screen bg-background text-text-primary",children:[u.jsx(nFe,{}),u.jsx("aside",{className:"hidden lg:flex w-64 bg-background p-6 flex-col shrink-0",children:u.jsx(n,{})}),e&&u.jsxs(u.Fragment,{children:[u.jsx("div",{id:"sidebar-overlay",className:"fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden",onClick:()=>t(!1)}),u.jsx("aside",{className:"fixed top-0 left-0 w-full h-full bg-background p-6 flex flex-col z-30 lg:hidden overflow-y-auto",children:u.jsx(n,{})})]}),u.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[u.jsxs("header",{className:"bg-background border-b border-surface-container-high/50 p-4 flex justify-between items-center z-10 text-text-primary",children:[u.jsx("button",{className:"p-2 rounded-md hover:bg-background lg:hidden",onClick:()=>t(!0),children:u.jsx(foe,{className:"w-6 h-6"})}),u.jsx("div",{className:"flex-1 flex justify-center lg:justify-start md:ml-4 min-w-0 px-2",children:u.jsx(Y8e,{})}),u.jsxs("div",{className:"flex items-center gap-2 md:gap-4 flex-shrink-0",children:[u.jsx("div",{className:"hidden xl:block",children:u.jsx(aFe,{})}),u.jsx(rFe,{})]})]}),u.jsx("main",{className:"flex-1 overflow-y-auto lg:p-8",children:u.jsx(Yne,{})})]})]})},yv=["Flooring","Tile","Kitchen Remodel","Bathroom Remodel","New Construction","Other"],oFe=["Managed Installation","Materials Only Sale","Unmanaged Installer"],lh=["SF","SY","LF","Carton","Sheet","Roll","Piece","Box","Each"],oy=["Tile","LVP","LVT","Laminate","Sheet Product","Carpet","Quartz","Dekton"];var sr=(e=>(e.NEW="New",e.SAMPLE_CHECKOUT="Sample Checkout",e.AWAITING_DECISION="Awaiting Decision",e.QUOTING="Quoting",e.ACCEPTED="Accepted",e.SCHEDULED="Scheduled",e.COMPLETED="Completed",e.CANCELLED="Cancelled",e.CLOSED="Closed",e))(sr||{}),cl=(e=>(e.SENT="Sent",e.ACCEPTED="Accepted",e.REJECTED="Rejected",e))(cl||{});const Soe=({onCustomerSelect:e,onRequestNewCustomer:t})=>{const{data:r=[],isLoading:n}=Rx(),[i,a]=I.useState(""),s=I.useMemo(()=>i.length<1||!r?[]:r.filter(l=>l.fullName.toLowerCase().includes(i.toLowerCase())||l.email&&l.email.toLowerCase().includes(i.toLowerCase())),[i,r]),o=l=>{e(l),a("")};return u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",placeholder:"Search by name or email...",value:i,onChange:l=>a(l.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"}),i.length>0&&u.jsxs("div",{className:"absolute z-10 w-full bg-surface-container-high border border-outline/20 rounded-lg mt-1 shadow-xl max-h-60 overflow-y-auto",children:[n&&u.jsxs("div",{className:"p-3 text-text-secondary flex items-center gap-2",children:[u.jsx(A4,{size:16,className:"animate-spin"})," Searching..."]}),!n&&s.map(l=>u.jsxs("div",{onClick:()=>o(l),className:"px-4 py-3 hover:bg-primary-container/30 cursor-pointer border-b border-outline/10 text-text-primary",children:[u.jsx("p",{className:"font-semibold",children:l.fullName}),u.jsx("p",{className:"text-sm text-text-secondary",children:l.email})]},l.id)),u.jsxs("div",{onClick:()=>t(i),className:"p-3 hover:bg-primary-container/30 cursor-pointer flex items-center gap-2 text-primary font-semibold",children:[u.jsx(H8e,{size:18}),s.length>0?`Or create new customer "${i}"`:`Create new customer "${i}"`]})]})]})},lFe=({customer:e,onProjectSelect:t})=>{const{projects:r,addProject:n}=Gr(),[i,a]=I.useState(!1),[s,o]=I.useState(""),[l,c]=I.useState(yv[0]),d=I.useMemo(()=>r.filter(p=>p.customerId===e.id),[r,e.id]),f=async p=>{if(p.preventDefault(),!s){alert("Please provide a name for the new project.");return}try{const m=await n({customerId:e.id,projectName:s,projectType:l,status:sr.NEW});t(m),a(!1)}catch(m){console.error("Failed to create project",m)}};return i?u.jsxs("form",{onSubmit:f,className:"p-4 bg-background rounded-lg border border-border space-y-4",children:[u.jsxs("h4",{className:"font-semibold text-text-primary",children:["Create New Project for ",e.fullName]}),u.jsx("input",{type:"text",placeholder:"Project Name (e.g., 'Master Bedroom')",required:!0,value:s,onChange:p=>o(p.target.value),className:"w-full p-2 bg-surface border-border rounded text-text-primary"}),u.jsx("select",{value:l,onChange:p=>c(p.target.value),className:"w-full p-2 bg-surface border-border rounded text-text-primary",children:yv.map(p=>u.jsx("option",{value:p,children:p},p))}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:()=>a(!1),className:"py-2 px-4 bg-secondary hover:bg-secondary-hover rounded text-on-secondary",children:"Cancel"}),u.jsx("button",{type:"submit",className:"py-2 px-4 bg-primary hover:bg-primary-hover rounded text-on-primary",children:"Create Project"})]})]}):u.jsxs("div",{className:"space-y-3",children:[d.length>0?d.map(p=>u.jsxs("div",{onClick:()=>t(p),className:"p-3 bg-background rounded-lg border border-transparent hover:border-accent cursor-pointer transition-colors",children:[u.jsx("p",{className:"font-semibold text-text-primary",children:p.projectName}),u.jsxs("p",{className:"text-sm text-text-secondary",children:[p.projectType," - ",u.jsx("span",{className:"italic",children:p.status})]})]},p.id)):u.jsx("p",{className:"text-text-secondary text-center py-4",children:"This customer has no existing projects."}),u.jsxs("button",{onClick:()=>a(!0),className:"w-full p-3 mt-2 bg-background hover:bg-surface rounded-lg flex items-center justify-center gap-2 text-accent font-semibold transition-colors border border-dashed border-border",children:[u.jsx(su,{size:18}),"Create New Project"]})]})};var Xt;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Xt||(Xt={}));var Jq=new Map([[Xt.QR_CODE,"QR_CODE"],[Xt.AZTEC,"AZTEC"],[Xt.CODABAR,"CODABAR"],[Xt.CODE_39,"CODE_39"],[Xt.CODE_93,"CODE_93"],[Xt.CODE_128,"CODE_128"],[Xt.DATA_MATRIX,"DATA_MATRIX"],[Xt.MAXICODE,"MAXICODE"],[Xt.ITF,"ITF"],[Xt.EAN_13,"EAN_13"],[Xt.EAN_8,"EAN_8"],[Xt.PDF_417,"PDF_417"],[Xt.RSS_14,"RSS_14"],[Xt.RSS_EXPANDED,"RSS_EXPANDED"],[Xt.UPC_A,"UPC_A"],[Xt.UPC_E,"UPC_E"],[Xt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Zq;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(Zq||(Zq={}));function cFe(e){return Object.values(Xt).includes(e)}var eT;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(eT||(eT={}));var uFe=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[eT.SCAN_TYPE_CAMERA,eT.SCAN_TYPE_FILE],e}(),Eoe=function(){function e(t,r){this.format=t,this.formatName=r}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!Jq.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,Jq.get(t))},e}(),eG=function(){function e(){}return e.createFromText=function(t){var r={text:t};return{decodedText:t,result:r}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),i8;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(i8||(i8={}));var dFe=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:i8.UNKWOWN_ERROR}},e}(),fFe=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,r){(this.verbose||r===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function Kf(e){return typeof e>"u"||e===null}var av=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),Coe=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,r){if(typeof t!="object"){var n=typeof t;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],a=new Set(i),s=Object.keys(t),o=0,l=s;o<l.length;o++){var c=l[o];if(a.has(c))return r.logError("".concat(c," is not supported videoConstaints."),!0),!1}return!0},e}(),a8={exports:{}};(function(e,t){(function(r,n){n(t)})(Ve,function(r){function n(se){return se==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(se,h){se.__proto__=h}||function(se,h){for(var g in h)h.hasOwnProperty(g)&&(se[g]=h[g])};function a(se,h){i(se,h);function g(){this.constructor=se}se.prototype=h===null?Object.create(h):(g.prototype=h.prototype,new g)}function s(se,h){var g=Object.setPrototypeOf;g?g(se,h):se.__proto__=h}function o(se,h){h===void 0&&(h=se.constructor);var g=Error.captureStackTrace;g&&g(se,h)}var l=function(se){a(h,se);function h(g){var y=this.constructor,C=se.call(this,g)||this;return Object.defineProperty(C,"name",{value:y.name,enumerable:!1}),s(C,y.prototype),o(C),C}return h}(Error);class c extends l{constructor(h=void 0){super(h),this.message=h}getKind(){return this.constructor.kind}}c.kind="Exception";class d extends c{}d.kind="ArgumentException";class f extends c{}f.kind="IllegalArgumentException";class p{constructor(h){if(this.binarizer=h,h===null)throw new f("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(h,g){return this.binarizer.getBlackRow(h,g)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(h,g,y,C){const _=this.binarizer.getLuminanceSource().crop(h,g,y,C);return new p(this.binarizer.createBinarizer(_))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const h=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new p(this.binarizer.createBinarizer(h))}rotateCounterClockwise45(){const h=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new p(this.binarizer.createBinarizer(h))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class m extends c{static getChecksumInstance(){return new m}}m.kind="ChecksumException";class x{constructor(h){this.source=h}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class v{static arraycopy(h,g,y,C,_){for(;_--;)y[C++]=h[g++]}static currentTimeMillis(){return Date.now()}}class b extends c{}b.kind="IndexOutOfBoundsException";class w extends b{constructor(h=void 0,g=void 0){super(g),this.index=h,this.message=g}}w.kind="ArrayIndexOutOfBoundsException";class k{static fill(h,g){for(let y=0,C=h.length;y<C;y++)h[y]=g}static fillWithin(h,g,y,C){k.rangeCheck(h.length,g,y);for(let _=g;_<y;_++)h[_]=C}static rangeCheck(h,g,y){if(g>y)throw new f("fromIndex("+g+") > toIndex("+y+")");if(g<0)throw new w(g);if(y>h)throw new w(y)}static asList(...h){return h}static create(h,g,y){return Array.from({length:h}).map(_=>Array.from({length:g}).fill(y))}static createInt32Array(h,g,y){return Array.from({length:h}).map(_=>Int32Array.from({length:g}).fill(y))}static equals(h,g){if(!h||!g||!h.length||!g.length||h.length!==g.length)return!1;for(let y=0,C=h.length;y<C;y++)if(h[y]!==g[y])return!1;return!0}static hashCode(h){if(h===null)return 0;let g=1;for(const y of h)g=31*g+y;return g}static fillUint8Array(h,g){for(let y=0;y!==h.length;y++)h[y]=g}static copyOf(h,g){return h.slice(0,g)}static copyOfUint8Array(h,g){if(h.length<=g){const y=new Uint8Array(g);return y.set(h),y}return h.slice(0,g)}static copyOfRange(h,g,y){const C=y-g,_=new Int32Array(C);return v.arraycopy(h,g,_,0,C),_}static binarySearch(h,g,y){y===void 0&&(y=k.numberComparator);let C=0,_=h.length-1;for(;C<=_;){const T=_+C>>1,j=y(g,h[T]);if(j>0)C=T+1;else if(j<0)_=T-1;else return T}return-C-1}static numberComparator(h,g){return h-g}}class E{static numberOfTrailingZeros(h){let g;if(h===0)return 32;let y=31;return g=h<<16,g!==0&&(y-=16,h=g),g=h<<8,g!==0&&(y-=8,h=g),g=h<<4,g!==0&&(y-=4,h=g),g=h<<2,g!==0&&(y-=2,h=g),y-(h<<1>>>31)}static numberOfLeadingZeros(h){if(h===0)return 32;let g=1;return h>>>16||(g+=16,h<<=16),h>>>24||(g+=8,h<<=8),h>>>28||(g+=4,h<<=4),h>>>30||(g+=2,h<<=2),g-=h>>>31,g}static toHexString(h){return h.toString(16)}static toBinaryString(h){return String(parseInt(String(h),2))}static bitCount(h){return h=h-(h>>>1&1431655765),h=(h&858993459)+(h>>>2&858993459),h=h+(h>>>4)&252645135,h=h+(h>>>8),h=h+(h>>>16),h&63}static truncDivision(h,g){return Math.trunc(h/g)}static parseInt(h,g=void 0){return parseInt(h,g)}}E.MIN_VALUE_32_BITS=-2147483648,E.MAX_VALUE=Number.MAX_SAFE_INTEGER;class N{constructor(h,g){h===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=h,g==null?this.bits=N.makeArray(h):this.bits=g)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(h){if(h>this.bits.length*32){const g=N.makeArray(h);v.arraycopy(this.bits,0,g,0,this.bits.length),this.bits=g}}get(h){return(this.bits[Math.floor(h/32)]&1<<(h&31))!==0}set(h){this.bits[Math.floor(h/32)]|=1<<(h&31)}flip(h){this.bits[Math.floor(h/32)]^=1<<(h&31)}getNextSet(h){const g=this.size;if(h>=g)return g;const y=this.bits;let C=Math.floor(h/32),_=y[C];_&=~((1<<(h&31))-1);const T=y.length;for(;_===0;){if(++C===T)return g;_=y[C]}const j=C*32+E.numberOfTrailingZeros(_);return j>g?g:j}getNextUnset(h){const g=this.size;if(h>=g)return g;const y=this.bits;let C=Math.floor(h/32),_=~y[C];_&=~((1<<(h&31))-1);const T=y.length;for(;_===0;){if(++C===T)return g;_=~y[C]}const j=C*32+E.numberOfTrailingZeros(_);return j>g?g:j}setBulk(h,g){this.bits[Math.floor(h/32)]=g}setRange(h,g){if(g<h||h<0||g>this.size)throw new f;if(g===h)return;g--;const y=Math.floor(h/32),C=Math.floor(g/32),_=this.bits;for(let T=y;T<=C;T++){const j=T>y?0:h&31,U=(2<<(T<C?31:g&31))-(1<<j);_[T]|=U}}clear(){const h=this.bits.length,g=this.bits;for(let y=0;y<h;y++)g[y]=0}isRange(h,g,y){if(g<h||h<0||g>this.size)throw new f;if(g===h)return!0;g--;const C=Math.floor(h/32),_=Math.floor(g/32),T=this.bits;for(let j=C;j<=_;j++){const F=j>C?0:h&31,ee=(2<<(j<_?31:g&31))-(1<<F)&4294967295;if((T[j]&ee)!==(y?ee:0))return!1}return!0}appendBit(h){this.ensureCapacity(this.size+1),h&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(h,g){if(g<0||g>32)throw new f("Num bits must be between 0 and 32");this.ensureCapacity(this.size+g);for(let y=g;y>0;y--)this.appendBit((h>>y-1&1)===1)}appendBitArray(h){const g=h.size;this.ensureCapacity(this.size+g);for(let y=0;y<g;y++)this.appendBit(h.get(y))}xor(h){if(this.size!==h.size)throw new f("Sizes don't match");const g=this.bits;for(let y=0,C=g.length;y<C;y++)g[y]^=h.bits[y]}toBytes(h,g,y,C){for(let _=0;_<C;_++){let T=0;for(let j=0;j<8;j++)this.get(h)&&(T|=1<<7-j),h++;g[y+_]=T}}getBitArray(){return this.bits}reverse(){const h=new Int32Array(this.bits.length),g=Math.floor((this.size-1)/32),y=g+1,C=this.bits;for(let _=0;_<y;_++){let T=C[_];T=T>>1&1431655765|(T&1431655765)<<1,T=T>>2&858993459|(T&858993459)<<2,T=T>>4&252645135|(T&252645135)<<4,T=T>>8&16711935|(T&16711935)<<8,T=T>>16&65535|(T&65535)<<16,h[g-_]=T}if(this.size!==y*32){const _=y*32-this.size;let T=h[0]>>>_;for(let j=1;j<y;j++){const F=h[j];T|=F<<32-_,h[j-1]=T,T=F>>>_}h[y-1]=T}this.bits=h}static makeArray(h){return new Int32Array(Math.floor((h+31)/32))}equals(h){if(!(h instanceof N))return!1;const g=h;return this.size===g.size&&k.equals(this.bits,g.bits)}hashCode(){return 31*this.size+k.hashCode(this.bits)}toString(){let h="";for(let g=0,y=this.size;g<y;g++)g&7||(h+=" "),h+=this.get(g)?"X":".";return h}clone(){return new N(this.size,this.bits.slice())}}var P;(function(se){se[se.OTHER=0]="OTHER",se[se.PURE_BARCODE=1]="PURE_BARCODE",se[se.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",se[se.TRY_HARDER=3]="TRY_HARDER",se[se.CHARACTER_SET=4]="CHARACTER_SET",se[se.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",se[se.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",se[se.ASSUME_GS1=7]="ASSUME_GS1",se[se.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",se[se.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",se[se.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(P||(P={}));var R=P;class O extends c{static getFormatInstance(){return new O}}O.kind="FormatException";var D;(function(se){se[se.Cp437=0]="Cp437",se[se.ISO8859_1=1]="ISO8859_1",se[se.ISO8859_2=2]="ISO8859_2",se[se.ISO8859_3=3]="ISO8859_3",se[se.ISO8859_4=4]="ISO8859_4",se[se.ISO8859_5=5]="ISO8859_5",se[se.ISO8859_6=6]="ISO8859_6",se[se.ISO8859_7=7]="ISO8859_7",se[se.ISO8859_8=8]="ISO8859_8",se[se.ISO8859_9=9]="ISO8859_9",se[se.ISO8859_10=10]="ISO8859_10",se[se.ISO8859_11=11]="ISO8859_11",se[se.ISO8859_13=12]="ISO8859_13",se[se.ISO8859_14=13]="ISO8859_14",se[se.ISO8859_15=14]="ISO8859_15",se[se.ISO8859_16=15]="ISO8859_16",se[se.SJIS=16]="SJIS",se[se.Cp1250=17]="Cp1250",se[se.Cp1251=18]="Cp1251",se[se.Cp1252=19]="Cp1252",se[se.Cp1256=20]="Cp1256",se[se.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",se[se.UTF8=22]="UTF8",se[se.ASCII=23]="ASCII",se[se.Big5=24]="Big5",se[se.GB18030=25]="GB18030",se[se.EUC_KR=26]="EUC_KR"})(D||(D={}));class L{constructor(h,g,y,...C){this.valueIdentifier=h,this.name=y,typeof g=="number"?this.values=Int32Array.from([g]):this.values=g,this.otherEncodingNames=C,L.VALUE_IDENTIFIER_TO_ECI.set(h,this),L.NAME_TO_ECI.set(y,this);const _=this.values;for(let T=0,j=_.length;T!==j;T++){const F=_[T];L.VALUES_TO_ECI.set(F,this)}for(const T of C)L.NAME_TO_ECI.set(T,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(h){if(h<0||h>=900)throw new O("incorect value");const g=L.VALUES_TO_ECI.get(h);if(g===void 0)throw new O("incorect value");return g}static getCharacterSetECIByName(h){const g=L.NAME_TO_ECI.get(h);if(g===void 0)throw new O("incorect value");return g}equals(h){if(!(h instanceof L))return!1;const g=h;return this.getName()===g.getName()}}L.VALUE_IDENTIFIER_TO_ECI=new Map,L.VALUES_TO_ECI=new Map,L.NAME_TO_ECI=new Map,L.Cp437=new L(D.Cp437,Int32Array.from([0,2]),"Cp437"),L.ISO8859_1=new L(D.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),L.ISO8859_2=new L(D.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),L.ISO8859_3=new L(D.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),L.ISO8859_4=new L(D.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),L.ISO8859_5=new L(D.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),L.ISO8859_6=new L(D.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),L.ISO8859_7=new L(D.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),L.ISO8859_8=new L(D.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),L.ISO8859_9=new L(D.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),L.ISO8859_10=new L(D.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),L.ISO8859_11=new L(D.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),L.ISO8859_13=new L(D.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),L.ISO8859_14=new L(D.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),L.ISO8859_15=new L(D.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),L.ISO8859_16=new L(D.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),L.SJIS=new L(D.SJIS,20,"SJIS","Shift_JIS"),L.Cp1250=new L(D.Cp1250,21,"Cp1250","windows-1250"),L.Cp1251=new L(D.Cp1251,22,"Cp1251","windows-1251"),L.Cp1252=new L(D.Cp1252,23,"Cp1252","windows-1252"),L.Cp1256=new L(D.Cp1256,24,"Cp1256","windows-1256"),L.UnicodeBigUnmarked=new L(D.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),L.UTF8=new L(D.UTF8,26,"UTF8","UTF-8"),L.ASCII=new L(D.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),L.Big5=new L(D.Big5,28,"Big5"),L.GB18030=new L(D.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),L.EUC_KR=new L(D.EUC_KR,30,"EUC_KR","EUC-KR");class B extends c{}B.kind="UnsupportedOperationException";class z{static decode(h,g){const y=this.encodingName(g);return this.customDecoder?this.customDecoder(h,y):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(y)?this.decodeFallback(h,y):new TextDecoder(y).decode(h)}static shouldDecodeOnFallback(h){return!z.isBrowser()&&h==="ISO-8859-1"}static encode(h,g){const y=this.encodingName(g);return this.customEncoder?this.customEncoder(h,y):typeof TextEncoder>"u"?this.encodeFallback(h):new TextEncoder().encode(h)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(h){return typeof h=="string"?h:h.getName()}static encodingCharacterSet(h){return h instanceof L?h:L.getCharacterSetECIByName(h)}static decodeFallback(h,g){const y=this.encodingCharacterSet(g);if(z.isDecodeFallbackSupported(y)){let C="";for(let _=0,T=h.length;_<T;_++){let j=h[_].toString(16);j.length<2&&(j="0"+j),C+="%"+j}return decodeURIComponent(C)}if(y.equals(L.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(h.buffer));throw new B(`Encoding ${this.encodingName(g)} not supported by fallback.`)}static isDecodeFallbackSupported(h){return h.equals(L.UTF8)||h.equals(L.ISO8859_1)||h.equals(L.ASCII)}static encodeFallback(h){const y=btoa(unescape(encodeURIComponent(h))).split(""),C=[];for(let _=0;_<y.length;_++)C.push(y[_].charCodeAt(0));return new Uint8Array(C)}}class H{static castAsNonUtf8Char(h,g=null){const y=g?g.getName():this.ISO88591;return z.decode(new Uint8Array([h]),y)}static guessEncoding(h,g){if(g!=null&&g.get(R.CHARACTER_SET)!==void 0)return g.get(R.CHARACTER_SET).toString();const y=h.length;let C=!0,_=!0,T=!0,j=0,F=0,U=0,ee=0,oe=0,xe=0,Oe=0,ue=0,Se=0,Ae=0,Be=0;const lt=h.length>3&&h[0]===239&&h[1]===187&&h[2]===191;for(let gt=0;gt<y&&(C||_||T);gt++){const vt=h[gt]&255;T&&(j>0?vt&128?j--:T=!1:vt&128&&(vt&64?(j++,vt&32?(j++,vt&16?(j++,vt&8?T=!1:ee++):U++):F++):T=!1)),C&&(vt>127&&vt<160?C=!1:vt>159&&(vt<192||vt===215||vt===247)&&Be++),_&&(oe>0?vt<64||vt===127||vt>252?_=!1:oe--:vt===128||vt===160||vt>239?_=!1:vt>160&&vt<224?(xe++,ue=0,Oe++,Oe>Se&&(Se=Oe)):vt>127?(oe++,Oe=0,ue++,ue>Ae&&(Ae=ue)):(Oe=0,ue=0))}return T&&j>0&&(T=!1),_&&oe>0&&(_=!1),T&&(lt||F+U+ee>0)?H.UTF8:_&&(H.ASSUME_SHIFT_JIS||Se>=3||Ae>=3)?H.SHIFT_JIS:C&&_?Se===2&&xe===2||Be*10>=y?H.SHIFT_JIS:H.ISO88591:C?H.ISO88591:_?H.SHIFT_JIS:T?H.UTF8:H.PLATFORM_DEFAULT_ENCODING}static format(h,...g){let y=-1;function C(T,j,F,U,ee,oe){if(T==="%%")return"%";if(g[++y]===void 0)return;T=U?parseInt(U.substr(1)):void 0;let xe=ee?parseInt(ee.substr(1)):void 0,Oe;switch(oe){case"s":Oe=g[y];break;case"c":Oe=g[y][0];break;case"f":Oe=parseFloat(g[y]).toFixed(T);break;case"p":Oe=parseFloat(g[y]).toPrecision(T);break;case"e":Oe=parseFloat(g[y]).toExponential(T);break;case"x":Oe=parseInt(g[y]).toString(xe||16);break;case"d":Oe=parseFloat(parseInt(g[y],xe||10).toPrecision(T)).toFixed(0);break}Oe=typeof Oe=="object"?JSON.stringify(Oe):(+Oe).toString(xe);let ue=parseInt(F),Se=F&&F[0]+""=="0"?"0":" ";for(;Oe.length<ue;)Oe=j!==void 0?Oe+Se:Se+Oe;return Oe}let _=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return h.replace(_,C)}static getBytes(h,g){return z.encode(h,g)}static getCharCode(h,g=0){return h.charCodeAt(g)}static getCharAt(h){return String.fromCharCode(h)}}H.SHIFT_JIS=L.SJIS.getName(),H.GB2312="GB2312",H.ISO88591=L.ISO8859_1.getName(),H.EUC_JP="EUC_JP",H.UTF8=L.UTF8.getName(),H.PLATFORM_DEFAULT_ENCODING=H.UTF8,H.ASSUME_SHIFT_JIS=!1;class te{constructor(h=""){this.value=h}enableDecoding(h){return this.encoding=h,this}append(h){return typeof h=="string"?this.value+=h.toString():this.encoding?this.value+=H.castAsNonUtf8Char(h,this.encoding):this.value+=String.fromCharCode(h),this}appendChars(h,g,y){for(let C=g;g<g+y;C++)this.append(h[C]);return this}length(){return this.value.length}charAt(h){return this.value.charAt(h)}deleteCharAt(h){this.value=this.value.substr(0,h)+this.value.substring(h+1)}setCharAt(h,g){this.value=this.value.substr(0,h)+g+this.value.substr(h+1)}substring(h,g){return this.value.substring(h,g)}setLengthToZero(){this.value=""}toString(){return this.value}insert(h,g){this.value=this.value.substr(0,h)+g+this.value.substr(h+g.length)}}class Y{constructor(h,g,y,C){if(this.width=h,this.height=g,this.rowSize=y,this.bits=C,g==null&&(g=h),this.height=g,h<1||g<1)throw new f("Both dimensions must be greater than 0");y==null&&(y=Math.floor((h+31)/32)),this.rowSize=y,C==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(h){const g=h.length,y=h[0].length,C=new Y(y,g);for(let _=0;_<g;_++){const T=h[_];for(let j=0;j<y;j++)T[j]&&C.set(j,_)}return C}static parseFromString(h,g,y){if(h===null)throw new f("stringRepresentation cannot be null");const C=new Array(h.length);let _=0,T=0,j=-1,F=0,U=0;for(;U<h.length;)if(h.charAt(U)===`
`||h.charAt(U)==="\r"){if(_>T){if(j===-1)j=_-T;else if(_-T!==j)throw new f("row lengths do not match");T=_,F++}U++}else if(h.substring(U,U+g.length)===g)U+=g.length,C[_]=!0,_++;else if(h.substring(U,U+y.length)===y)U+=y.length,C[_]=!1,_++;else throw new f("illegal character encountered: "+h.substring(U));if(_>T){if(j===-1)j=_-T;else if(_-T!==j)throw new f("row lengths do not match");F++}const ee=new Y(j,F);for(let oe=0;oe<_;oe++)C[oe]&&ee.set(Math.floor(oe%j),Math.floor(oe/j));return ee}get(h,g){const y=g*this.rowSize+Math.floor(h/32);return(this.bits[y]>>>(h&31)&1)!==0}set(h,g){const y=g*this.rowSize+Math.floor(h/32);this.bits[y]|=1<<(h&31)&4294967295}unset(h,g){const y=g*this.rowSize+Math.floor(h/32);this.bits[y]&=~(1<<(h&31)&4294967295)}flip(h,g){const y=g*this.rowSize+Math.floor(h/32);this.bits[y]^=1<<(h&31)&4294967295}xor(h){if(this.width!==h.getWidth()||this.height!==h.getHeight()||this.rowSize!==h.getRowSize())throw new f("input matrix dimensions do not match");const g=new N(Math.floor(this.width/32)+1),y=this.rowSize,C=this.bits;for(let _=0,T=this.height;_<T;_++){const j=_*y,F=h.getRow(_,g).getBitArray();for(let U=0;U<y;U++)C[j+U]^=F[U]}}clear(){const h=this.bits,g=h.length;for(let y=0;y<g;y++)h[y]=0}setRegion(h,g,y,C){if(g<0||h<0)throw new f("Left and top must be nonnegative");if(C<1||y<1)throw new f("Height and width must be at least 1");const _=h+y,T=g+C;if(T>this.height||_>this.width)throw new f("The region must fit inside the matrix");const j=this.rowSize,F=this.bits;for(let U=g;U<T;U++){const ee=U*j;for(let oe=h;oe<_;oe++)F[ee+Math.floor(oe/32)]|=1<<(oe&31)&4294967295}}getRow(h,g){g==null||g.getSize()<this.width?g=new N(this.width):g.clear();const y=this.rowSize,C=this.bits,_=h*y;for(let T=0;T<y;T++)g.setBulk(T*32,C[_+T]);return g}setRow(h,g){v.arraycopy(g.getBitArray(),0,this.bits,h*this.rowSize,this.rowSize)}rotate180(){const h=this.getWidth(),g=this.getHeight();let y=new N(h),C=new N(h);for(let _=0,T=Math.floor((g+1)/2);_<T;_++)y=this.getRow(_,y),C=this.getRow(g-1-_,C),y.reverse(),C.reverse(),this.setRow(_,C),this.setRow(g-1-_,y)}getEnclosingRectangle(){const h=this.width,g=this.height,y=this.rowSize,C=this.bits;let _=h,T=g,j=-1,F=-1;for(let U=0;U<g;U++)for(let ee=0;ee<y;ee++){const oe=C[U*y+ee];if(oe!==0){if(U<T&&(T=U),U>F&&(F=U),ee*32<_){let xe=0;for(;!(oe<<31-xe&4294967295);)xe++;ee*32+xe<_&&(_=ee*32+xe)}if(ee*32+31>j){let xe=31;for(;!(oe>>>xe);)xe--;ee*32+xe>j&&(j=ee*32+xe)}}}return j<_||F<T?null:Int32Array.from([_,T,j-_+1,F-T+1])}getTopLeftOnBit(){const h=this.rowSize,g=this.bits;let y=0;for(;y<g.length&&g[y]===0;)y++;if(y===g.length)return null;const C=y/h;let _=y%h*32;const T=g[y];let j=0;for(;!(T<<31-j&4294967295);)j++;return _+=j,Int32Array.from([_,C])}getBottomRightOnBit(){const h=this.rowSize,g=this.bits;let y=g.length-1;for(;y>=0&&g[y]===0;)y--;if(y<0)return null;const C=Math.floor(y/h);let _=Math.floor(y%h)*32;const T=g[y];let j=31;for(;!(T>>>j);)j--;return _+=j,Int32Array.from([_,C])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(h){if(!(h instanceof Y))return!1;const g=h;return this.width===g.width&&this.height===g.height&&this.rowSize===g.rowSize&&k.equals(this.bits,g.bits)}hashCode(){let h=this.width;return h=31*h+this.width,h=31*h+this.height,h=31*h+this.rowSize,h=31*h+k.hashCode(this.bits),h}toString(h="X ",g="  ",y=`
`){return this.buildToString(h,g,y)}buildToString(h,g,y){let C=new te;for(let _=0,T=this.height;_<T;_++){for(let j=0,F=this.width;j<F;j++)C.append(this.get(j,_)?h:g);C.append(y)}return C.toString()}clone(){return new Y(this.width,this.height,this.rowSize,this.bits.slice())}}class W extends c{static getNotFoundInstance(){return new W}}W.kind="NotFoundException";class Z extends x{constructor(h){super(h),this.luminances=Z.EMPTY,this.buckets=new Int32Array(Z.LUMINANCE_BUCKETS)}getBlackRow(h,g){const y=this.getLuminanceSource(),C=y.getWidth();g==null||g.getSize()<C?g=new N(C):g.clear(),this.initArrays(C);const _=y.getRow(h,this.luminances),T=this.buckets;for(let F=0;F<C;F++)T[(_[F]&255)>>Z.LUMINANCE_SHIFT]++;const j=Z.estimateBlackPoint(T);if(C<3)for(let F=0;F<C;F++)(_[F]&255)<j&&g.set(F);else{let F=_[0]&255,U=_[1]&255;for(let ee=1;ee<C-1;ee++){const oe=_[ee+1]&255;(U*4-F-oe)/2<j&&g.set(ee),F=U,U=oe}}return g}getBlackMatrix(){const h=this.getLuminanceSource(),g=h.getWidth(),y=h.getHeight(),C=new Y(g,y);this.initArrays(g);const _=this.buckets;for(let F=1;F<5;F++){const U=Math.floor(y*F/5),ee=h.getRow(U,this.luminances),oe=Math.floor(g*4/5);for(let xe=Math.floor(g/5);xe<oe;xe++){const Oe=ee[xe]&255;_[Oe>>Z.LUMINANCE_SHIFT]++}}const T=Z.estimateBlackPoint(_),j=h.getMatrix();for(let F=0;F<y;F++){const U=F*g;for(let ee=0;ee<g;ee++)(j[U+ee]&255)<T&&C.set(ee,F)}return C}createBinarizer(h){return new Z(h)}initArrays(h){this.luminances.length<h&&(this.luminances=new Uint8ClampedArray(h));const g=this.buckets;for(let y=0;y<Z.LUMINANCE_BUCKETS;y++)g[y]=0}static estimateBlackPoint(h){const g=h.length;let y=0,C=0,_=0;for(let ee=0;ee<g;ee++)h[ee]>_&&(C=ee,_=h[ee]),h[ee]>y&&(y=h[ee]);let T=0,j=0;for(let ee=0;ee<g;ee++){const oe=ee-C,xe=h[ee]*oe*oe;xe>j&&(T=ee,j=xe)}if(C>T){const ee=C;C=T,T=ee}if(T-C<=g/16)throw new W;let F=T-1,U=-1;for(let ee=T-1;ee>C;ee--){const oe=ee-C,xe=oe*oe*(T-ee)*(y-h[ee]);xe>U&&(F=ee,U=xe)}return F<<Z.LUMINANCE_SHIFT}}Z.LUMINANCE_BITS=5,Z.LUMINANCE_SHIFT=8-Z.LUMINANCE_BITS,Z.LUMINANCE_BUCKETS=1<<Z.LUMINANCE_BITS,Z.EMPTY=Uint8ClampedArray.from([0]);class re extends Z{constructor(h){super(h),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const h=this.getLuminanceSource(),g=h.getWidth(),y=h.getHeight();if(g>=re.MINIMUM_DIMENSION&&y>=re.MINIMUM_DIMENSION){const C=h.getMatrix();let _=g>>re.BLOCK_SIZE_POWER;g&re.BLOCK_SIZE_MASK&&_++;let T=y>>re.BLOCK_SIZE_POWER;y&re.BLOCK_SIZE_MASK&&T++;const j=re.calculateBlackPoints(C,_,T,g,y),F=new Y(g,y);re.calculateThresholdForBlock(C,_,T,g,y,j,F),this.matrix=F}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(h){return new re(h)}static calculateThresholdForBlock(h,g,y,C,_,T,j){const F=_-re.BLOCK_SIZE,U=C-re.BLOCK_SIZE;for(let ee=0;ee<y;ee++){let oe=ee<<re.BLOCK_SIZE_POWER;oe>F&&(oe=F);const xe=re.cap(ee,2,y-3);for(let Oe=0;Oe<g;Oe++){let ue=Oe<<re.BLOCK_SIZE_POWER;ue>U&&(ue=U);const Se=re.cap(Oe,2,g-3);let Ae=0;for(let lt=-2;lt<=2;lt++){const gt=T[xe+lt];Ae+=gt[Se-2]+gt[Se-1]+gt[Se]+gt[Se+1]+gt[Se+2]}const Be=Ae/25;re.thresholdBlock(h,ue,oe,Be,C,j)}}}static cap(h,g,y){return h<g?g:h>y?y:h}static thresholdBlock(h,g,y,C,_,T){for(let j=0,F=y*_+g;j<re.BLOCK_SIZE;j++,F+=_)for(let U=0;U<re.BLOCK_SIZE;U++)(h[F+U]&255)<=C&&T.set(g+U,y+j)}static calculateBlackPoints(h,g,y,C,_){const T=_-re.BLOCK_SIZE,j=C-re.BLOCK_SIZE,F=new Array(y);for(let U=0;U<y;U++){F[U]=new Int32Array(g);let ee=U<<re.BLOCK_SIZE_POWER;ee>T&&(ee=T);for(let oe=0;oe<g;oe++){let xe=oe<<re.BLOCK_SIZE_POWER;xe>j&&(xe=j);let Oe=0,ue=255,Se=0;for(let Be=0,lt=ee*C+xe;Be<re.BLOCK_SIZE;Be++,lt+=C){for(let gt=0;gt<re.BLOCK_SIZE;gt++){const vt=h[lt+gt]&255;Oe+=vt,vt<ue&&(ue=vt),vt>Se&&(Se=vt)}if(Se-ue>re.MIN_DYNAMIC_RANGE)for(Be++,lt+=C;Be<re.BLOCK_SIZE;Be++,lt+=C)for(let gt=0;gt<re.BLOCK_SIZE;gt++)Oe+=h[lt+gt]&255}let Ae=Oe>>re.BLOCK_SIZE_POWER*2;if(Se-ue<=re.MIN_DYNAMIC_RANGE&&(Ae=ue/2,U>0&&oe>0)){const Be=(F[U-1][oe]+2*F[U][oe-1]+F[U-1][oe-1])/4;ue<Be&&(Ae=Be)}F[U][oe]=Ae}}return F}}re.BLOCK_SIZE_POWER=3,re.BLOCK_SIZE=1<<re.BLOCK_SIZE_POWER,re.BLOCK_SIZE_MASK=re.BLOCK_SIZE-1,re.MINIMUM_DIMENSION=re.BLOCK_SIZE*5,re.MIN_DYNAMIC_RANGE=24;class X{constructor(h,g){this.width=h,this.height=g}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(h,g,y,C){throw new B("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new B("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new B("This luminance source does not support rotation by 45 degrees.")}toString(){const h=new Uint8ClampedArray(this.width);let g=new te;for(let y=0;y<this.height;y++){const C=this.getRow(y,h);for(let _=0;_<this.width;_++){const T=C[_]&255;let j;T<64?j="#":T<128?j="+":T<192?j=".":j=" ",g.append(j)}g.append(`
`)}return g.toString()}}class Q extends X{constructor(h){super(h.getWidth(),h.getHeight()),this.delegate=h}getRow(h,g){const y=this.delegate.getRow(h,g),C=this.getWidth();for(let _=0;_<C;_++)y[_]=255-(y[_]&255);return y}getMatrix(){const h=this.delegate.getMatrix(),g=this.getWidth()*this.getHeight(),y=new Uint8ClampedArray(g);for(let C=0;C<g;C++)y[C]=255-(h[C]&255);return y}isCropSupported(){return this.delegate.isCropSupported()}crop(h,g,y,C){return new Q(this.delegate.crop(h,g,y,C))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Q(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Q(this.delegate.rotateCounterClockwise45())}}class fe extends X{constructor(h){super(h.width,h.height),this.canvas=h,this.tempCanvasElement=null,this.buffer=fe.makeBufferFromCanvasImageData(h)}static makeBufferFromCanvasImageData(h){const g=h.getContext("2d").getImageData(0,0,h.width,h.height);return fe.toGrayscaleBuffer(g.data,h.width,h.height)}static toGrayscaleBuffer(h,g,y){const C=new Uint8ClampedArray(g*y);for(let _=0,T=0,j=h.length;_<j;_+=4,T++){let F;if(h[_+3]===0)F=255;else{const ee=h[_],oe=h[_+1],xe=h[_+2];F=306*ee+601*oe+117*xe+512>>10}C[T]=F}return C}getRow(h,g){if(h<0||h>=this.getHeight())throw new f("Requested row is outside the image: "+h);const y=this.getWidth(),C=h*y;return g===null?g=this.buffer.slice(C,C+y):(g.length<y&&(g=new Uint8ClampedArray(y)),g.set(this.buffer.slice(C,C+y))),g}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(h,g,y,C){return super.crop(h,g,y,C),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const h=this.canvas.ownerDocument.createElement("canvas");h.width=this.canvas.width,h.height=this.canvas.height,this.tempCanvasElement=h}return this.tempCanvasElement}rotate(h){const g=this.getTempCanvasElement(),y=g.getContext("2d"),C=h*fe.DEGREE_TO_RADIANS,_=this.canvas.width,T=this.canvas.height,j=Math.ceil(Math.abs(Math.cos(C))*_+Math.abs(Math.sin(C))*T),F=Math.ceil(Math.abs(Math.sin(C))*_+Math.abs(Math.cos(C))*T);return g.width=j,g.height=F,y.translate(j/2,F/2),y.rotate(C),y.drawImage(this.canvas,_/-2,T/-2),this.buffer=fe.makeBufferFromCanvasImageData(g),this}invert(){return new Q(this)}}fe.DEGREE_TO_RADIANS=Math.PI/180;class ye{constructor(h,g,y){this.deviceId=h,this.label=g,this.kind="videoinput",this.groupId=y||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var J=(globalThis||Ve||self||window||void 0)&&(globalThis||Ve||self||window||void 0).__awaiter||function(se,h,g,y){function C(_){return _ instanceof g?_:new g(function(T){T(_)})}return new(g||(g=Promise))(function(_,T){function j(ee){try{U(y.next(ee))}catch(oe){T(oe)}}function F(ee){try{U(y.throw(ee))}catch(oe){T(oe)}}function U(ee){ee.done?_(ee.value):C(ee.value).then(j,F)}U((y=y.apply(se,h||[])).next())})};class ce{constructor(h,g=500,y){this.reader=h,this.timeBetweenScansMillis=g,this._hints=y,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(h){this._timeBetweenDecodingAttempts=h<0?0:h}set hints(h){this._hints=h||null}get hints(){return this._hints}listVideoInputDevices(){return J(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const h=yield navigator.mediaDevices.enumerateDevices(),g=[];for(const y of h){const C=y.kind==="video"?"videoinput":y.kind;if(C!=="videoinput")continue;const _=y.deviceId||y.id,T=y.label||`Video device ${g.length+1}`,j=y.groupId,F={deviceId:_,label:T,kind:C,groupId:j};g.push(F)}return g})}getVideoInputDevices(){return J(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(g=>new ye(g.deviceId,g.label))})}findDeviceById(h){return J(this,void 0,void 0,function*(){const g=yield this.listVideoInputDevices();return g?g.find(y=>y.deviceId===h):null})}decodeFromInputVideoDevice(h,g){return J(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(h,g)})}decodeOnceFromVideoDevice(h,g){return J(this,void 0,void 0,function*(){this.reset();let y;h?y={deviceId:{exact:h}}:y={facingMode:"environment"};const C={video:y};return yield this.decodeOnceFromConstraints(C,g)})}decodeOnceFromConstraints(h,g){return J(this,void 0,void 0,function*(){const y=yield navigator.mediaDevices.getUserMedia(h);return yield this.decodeOnceFromStream(y,g)})}decodeOnceFromStream(h,g){return J(this,void 0,void 0,function*(){this.reset();const y=yield this.attachStreamToVideo(h,g);return yield this.decodeOnce(y)})}decodeFromInputVideoDeviceContinuously(h,g,y){return J(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(h,g,y)})}decodeFromVideoDevice(h,g,y){return J(this,void 0,void 0,function*(){let C;h?C={deviceId:{exact:h}}:C={facingMode:"environment"};const _={video:C};return yield this.decodeFromConstraints(_,g,y)})}decodeFromConstraints(h,g,y){return J(this,void 0,void 0,function*(){const C=yield navigator.mediaDevices.getUserMedia(h);return yield this.decodeFromStream(C,g,y)})}decodeFromStream(h,g,y){return J(this,void 0,void 0,function*(){this.reset();const C=yield this.attachStreamToVideo(h,g);return yield this.decodeContinuously(C,y)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(h,g){return J(this,void 0,void 0,function*(){const y=this.prepareVideoElement(g);return this.addVideoSource(y,h),this.videoElement=y,this.stream=h,yield this.playVideoOnLoadAsync(y),y})}playVideoOnLoadAsync(h){return new Promise((g,y)=>this.playVideoOnLoad(h,()=>g()))}playVideoOnLoad(h,g){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(h),h.addEventListener("ended",this.videoEndedListener),h.addEventListener("canplay",this.videoCanPlayListener),h.addEventListener("playing",g),this.tryPlayVideo(h)}isVideoPlaying(h){return h.currentTime>0&&!h.paused&&!h.ended&&h.readyState>2}tryPlayVideo(h){return J(this,void 0,void 0,function*(){if(this.isVideoPlaying(h)){console.warn("Trying to play video that is already playing.");return}try{yield h.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(h,g){const y=document.getElementById(h);if(!y)throw new d(`element with id '${h}' not found`);if(y.nodeName.toLowerCase()!==g.toLowerCase())throw new d(`element with id '${h}' must be an ${g} element`);return y}decodeFromImage(h,g){if(!h&&!g)throw new d("either imageElement with a src set or an url must be provided");return g&&!h?this.decodeFromImageUrl(g):this.decodeFromImageElement(h)}decodeFromVideo(h,g){if(!h&&!g)throw new d("Either an element with a src set or an URL must be provided");return g&&!h?this.decodeFromVideoUrl(g):this.decodeFromVideoElement(h)}decodeFromVideoContinuously(h,g,y){if(h===void 0&&g===void 0)throw new d("Either an element with a src set or an URL must be provided");return g&&!h?this.decodeFromVideoUrlContinuously(g,y):this.decodeFromVideoElementContinuously(h,y)}decodeFromImageElement(h){if(!h)throw new d("An image element must be provided.");this.reset();const g=this.prepareImageElement(h);this.imageElement=g;let y;return this.isImageLoaded(g)?y=this.decodeOnce(g,!1,!0):y=this._decodeOnLoadImage(g),y}decodeFromVideoElement(h){const g=this._decodeFromVideoElementSetup(h);return this._decodeOnLoadVideo(g)}decodeFromVideoElementContinuously(h,g){const y=this._decodeFromVideoElementSetup(h);return this._decodeOnLoadVideoContinuously(y,g)}_decodeFromVideoElementSetup(h){if(!h)throw new d("A video element must be provided.");this.reset();const g=this.prepareVideoElement(h);return this.videoElement=g,g}decodeFromImageUrl(h){if(!h)throw new d("An URL must be provided.");this.reset();const g=this.prepareImageElement();this.imageElement=g;const y=this._decodeOnLoadImage(g);return g.src=h,y}decodeFromVideoUrl(h){if(!h)throw new d("An URL must be provided.");this.reset();const g=this.prepareVideoElement(),y=this.decodeFromVideoElement(g);return g.src=h,y}decodeFromVideoUrlContinuously(h,g){if(!h)throw new d("An URL must be provided.");this.reset();const y=this.prepareVideoElement(),C=this.decodeFromVideoElementContinuously(y,g);return y.src=h,C}_decodeOnLoadImage(h){return new Promise((g,y)=>{this.imageLoadedListener=()=>this.decodeOnce(h,!1,!0).then(g,y),h.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(h){return J(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(h),yield this.decodeOnce(h)})}_decodeOnLoadVideoContinuously(h,g){return J(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(h),this.decodeContinuously(h,g)})}isImageLoaded(h){return!(!h.complete||h.naturalWidth===0)}prepareImageElement(h){let g;return typeof h>"u"&&(g=document.createElement("img"),g.width=200,g.height=200),typeof h=="string"&&(g=this.getMediaElement(h,"img")),h instanceof HTMLImageElement&&(g=h),g}prepareVideoElement(h){let g;return!h&&typeof document<"u"&&(g=document.createElement("video"),g.width=200,g.height=200),typeof h=="string"&&(g=this.getMediaElement(h,"video")),h instanceof HTMLVideoElement&&(g=h),g.setAttribute("autoplay","true"),g.setAttribute("muted","true"),g.setAttribute("playsinline","true"),g}decodeOnce(h,g=!0,y=!0){this._stopAsyncDecode=!1;const C=(_,T)=>{if(this._stopAsyncDecode){T(new W("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const j=this.decode(h);_(j)}catch(j){const F=g&&j instanceof W,ee=(j instanceof m||j instanceof O)&&y;if(F||ee)return setTimeout(C,this._timeBetweenDecodingAttempts,_,T);T(j)}};return new Promise((_,T)=>C(_,T))}decodeContinuously(h,g){this._stopContinuousDecode=!1;const y=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const C=this.decode(h);g(C,null),setTimeout(y,this.timeBetweenScansMillis)}catch(C){g(null,C);const _=C instanceof m||C instanceof O,T=C instanceof W;(_||T)&&setTimeout(y,this._timeBetweenDecodingAttempts)}};y()}decode(h){const g=this.createBinaryBitmap(h);return this.decodeBitmap(g)}_isHTMLVideoElement(h){return h.videoWidth!==0}drawFrameOnCanvas(h,g,y){g||(g={sx:0,sy:0,sWidth:h.videoWidth,sHeight:h.videoHeight,dx:0,dy:0,dWidth:h.videoWidth,dHeight:h.videoHeight}),y||(y=this.captureCanvasContext),y.drawImage(h,g.sx,g.sy,g.sWidth,g.sHeight,g.dx,g.dy,g.dWidth,g.dHeight)}drawImageOnCanvas(h,g,y=this.captureCanvasContext){g||(g={sx:0,sy:0,sWidth:h.naturalWidth,sHeight:h.naturalHeight,dx:0,dy:0,dWidth:h.naturalWidth,dHeight:h.naturalHeight}),y||(y=this.captureCanvasContext),y.drawImage(h,g.sx,g.sy,g.sWidth,g.sHeight,g.dx,g.dy,g.dWidth,g.dHeight)}createBinaryBitmap(h){this.getCaptureCanvasContext(h),this._isHTMLVideoElement(h)?this.drawFrameOnCanvas(h):this.drawImageOnCanvas(h);const g=this.getCaptureCanvas(h),y=new fe(g),C=new re(y);return new p(C)}getCaptureCanvasContext(h){if(!this.captureCanvasContext){const y=this.getCaptureCanvas(h).getContext("2d");this.captureCanvasContext=y}return this.captureCanvasContext}getCaptureCanvas(h){if(!this.captureCanvas){const g=this.createCaptureCanvas(h);this.captureCanvas=g}return this.captureCanvas}decodeBitmap(h){return this.reader.decode(h,this._hints)}createCaptureCanvas(h){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const g=document.createElement("canvas");let y,C;return typeof h<"u"&&(h instanceof HTMLVideoElement?(y=h.videoWidth,C=h.videoHeight):h instanceof HTMLImageElement&&(y=h.naturalWidth||h.width,C=h.naturalHeight||h.height)),g.style.width=y+"px",g.style.height=C+"px",g.width=y,g.height=C,g}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(h=>h.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(h,g){try{h.srcObject=g}catch{h.src=URL.createObjectURL(g)}}cleanVideoSource(h){try{h.srcObject=null}catch{h.src=""}this.videoElement.removeAttribute("src")}}class V{constructor(h,g,y=g==null?0:8*g.length,C,_,T=v.currentTimeMillis()){this.text=h,this.rawBytes=g,this.numBits=y,this.resultPoints=C,this.format=_,this.timestamp=T,this.text=h,this.rawBytes=g,y==null?this.numBits=g==null?0:8*g.length:this.numBits=y,this.resultPoints=C,this.format=_,this.resultMetadata=null,T==null?this.timestamp=v.currentTimeMillis():this.timestamp=T}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(h,g){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(h,g)}putAllMetadata(h){h!==null&&(this.resultMetadata===null?this.resultMetadata=h:this.resultMetadata=new Map(h))}addResultPoints(h){const g=this.resultPoints;if(g===null)this.resultPoints=h;else if(h!==null&&h.length>0){const y=new Array(g.length+h.length);v.arraycopy(g,0,y,0,g.length),v.arraycopy(h,0,y,g.length,h.length),this.resultPoints=y}}getTimestamp(){return this.timestamp}toString(){return this.text}}var G;(function(se){se[se.AZTEC=0]="AZTEC",se[se.CODABAR=1]="CODABAR",se[se.CODE_39=2]="CODE_39",se[se.CODE_93=3]="CODE_93",se[se.CODE_128=4]="CODE_128",se[se.DATA_MATRIX=5]="DATA_MATRIX",se[se.EAN_8=6]="EAN_8",se[se.EAN_13=7]="EAN_13",se[se.ITF=8]="ITF",se[se.MAXICODE=9]="MAXICODE",se[se.PDF_417=10]="PDF_417",se[se.QR_CODE=11]="QR_CODE",se[se.RSS_14=12]="RSS_14",se[se.RSS_EXPANDED=13]="RSS_EXPANDED",se[se.UPC_A=14]="UPC_A",se[se.UPC_E=15]="UPC_E",se[se.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(G||(G={}));var ie=G,Ee;(function(se){se[se.OTHER=0]="OTHER",se[se.ORIENTATION=1]="ORIENTATION",se[se.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",se[se.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",se[se.ISSUE_NUMBER=4]="ISSUE_NUMBER",se[se.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",se[se.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",se[se.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",se[se.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",se[se.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",se[se.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ee||(Ee={}));var ne=Ee;class ae{constructor(h,g,y,C,_=-1,T=-1){this.rawBytes=h,this.text=g,this.byteSegments=y,this.ecLevel=C,this.structuredAppendSequenceNumber=_,this.structuredAppendParity=T,this.numBits=h==null?0:8*h.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(h){this.numBits=h}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(h){this.errorsCorrected=h}getErasures(){return this.erasures}setErasures(h){this.erasures=h}getOther(){return this.other}setOther(h){this.other=h}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class me{exp(h){return this.expTable[h]}log(h){if(h===0)throw new f;return this.logTable[h]}static addOrSubtract(h,g){return h^g}}class ve{constructor(h,g){if(g.length===0)throw new f;this.field=h;const y=g.length;if(y>1&&g[0]===0){let C=1;for(;C<y&&g[C]===0;)C++;C===y?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(y-C),v.arraycopy(g,C,this.coefficients,0,this.coefficients.length))}else this.coefficients=g}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(h){return this.coefficients[this.coefficients.length-1-h]}evaluateAt(h){if(h===0)return this.getCoefficient(0);const g=this.coefficients;let y;if(h===1){y=0;for(let T=0,j=g.length;T!==j;T++){const F=g[T];y=me.addOrSubtract(y,F)}return y}y=g[0];const C=g.length,_=this.field;for(let T=1;T<C;T++)y=me.addOrSubtract(_.multiply(h,y),g[T]);return y}addOrSubtract(h){if(!this.field.equals(h.field))throw new f("GenericGFPolys do not have same GenericGF field");if(this.isZero())return h;if(h.isZero())return this;let g=this.coefficients,y=h.coefficients;if(g.length>y.length){const T=g;g=y,y=T}let C=new Int32Array(y.length);const _=y.length-g.length;v.arraycopy(y,0,C,0,_);for(let T=_;T<y.length;T++)C[T]=me.addOrSubtract(g[T-_],y[T]);return new ve(this.field,C)}multiply(h){if(!this.field.equals(h.field))throw new f("GenericGFPolys do not have same GenericGF field");if(this.isZero()||h.isZero())return this.field.getZero();const g=this.coefficients,y=g.length,C=h.coefficients,_=C.length,T=new Int32Array(y+_-1),j=this.field;for(let F=0;F<y;F++){const U=g[F];for(let ee=0;ee<_;ee++)T[F+ee]=me.addOrSubtract(T[F+ee],j.multiply(U,C[ee]))}return new ve(j,T)}multiplyScalar(h){if(h===0)return this.field.getZero();if(h===1)return this;const g=this.coefficients.length,y=this.field,C=new Int32Array(g),_=this.coefficients;for(let T=0;T<g;T++)C[T]=y.multiply(_[T],h);return new ve(y,C)}multiplyByMonomial(h,g){if(h<0)throw new f;if(g===0)return this.field.getZero();const y=this.coefficients,C=y.length,_=new Int32Array(C+h),T=this.field;for(let j=0;j<C;j++)_[j]=T.multiply(y[j],g);return new ve(T,_)}divide(h){if(!this.field.equals(h.field))throw new f("GenericGFPolys do not have same GenericGF field");if(h.isZero())throw new f("Divide by 0");const g=this.field;let y=g.getZero(),C=this;const _=h.getCoefficient(h.getDegree()),T=g.inverse(_);for(;C.getDegree()>=h.getDegree()&&!C.isZero();){const j=C.getDegree()-h.getDegree(),F=g.multiply(C.getCoefficient(C.getDegree()),T),U=h.multiplyByMonomial(j,F),ee=g.buildMonomial(j,F);y=y.addOrSubtract(ee),C=C.addOrSubtract(U)}return[y,C]}toString(){let h="";for(let g=this.getDegree();g>=0;g--){let y=this.getCoefficient(g);if(y!==0){if(y<0?(h+=" - ",y=-y):h.length>0&&(h+=" + "),g===0||y!==1){const C=this.field.log(y);C===0?h+="1":C===1?h+="a":(h+="a^",h+=C)}g!==0&&(g===1?h+="x":(h+="x^",h+=g))}}return h}}class q extends c{}q.kind="ArithmeticException";class Ne extends me{constructor(h,g,y){super(),this.primitive=h,this.size=g,this.generatorBase=y;const C=new Int32Array(g);let _=1;for(let j=0;j<g;j++)C[j]=_,_*=2,_>=g&&(_^=h,_&=g-1);this.expTable=C;const T=new Int32Array(g);for(let j=0;j<g-1;j++)T[C[j]]=j;this.logTable=T,this.zero=new ve(this,Int32Array.from([0])),this.one=new ve(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(h,g){if(h<0)throw new f;if(g===0)return this.zero;const y=new Int32Array(h+1);return y[0]=g,new ve(this,y)}inverse(h){if(h===0)throw new q;return this.expTable[this.size-this.logTable[h]-1]}multiply(h,g){return h===0||g===0?0:this.expTable[(this.logTable[h]+this.logTable[g])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+E.toHexString(this.primitive)+","+this.size+")"}equals(h){return h===this}}Ne.AZTEC_DATA_12=new Ne(4201,4096,1),Ne.AZTEC_DATA_10=new Ne(1033,1024,1),Ne.AZTEC_DATA_6=new Ne(67,64,1),Ne.AZTEC_PARAM=new Ne(19,16,1),Ne.QR_CODE_FIELD_256=new Ne(285,256,0),Ne.DATA_MATRIX_FIELD_256=new Ne(301,256,1),Ne.AZTEC_DATA_8=Ne.DATA_MATRIX_FIELD_256,Ne.MAXICODE_FIELD_64=Ne.AZTEC_DATA_6;class Pe extends c{}Pe.kind="ReedSolomonException";class ze extends c{}ze.kind="IllegalStateException";class De{constructor(h){this.field=h}decode(h,g){const y=this.field,C=new ve(y,h),_=new Int32Array(g);let T=!0;for(let Oe=0;Oe<g;Oe++){const ue=C.evaluateAt(y.exp(Oe+y.getGeneratorBase()));_[_.length-1-Oe]=ue,ue!==0&&(T=!1)}if(T)return;const j=new ve(y,_),F=this.runEuclideanAlgorithm(y.buildMonomial(g,1),j,g),U=F[0],ee=F[1],oe=this.findErrorLocations(U),xe=this.findErrorMagnitudes(ee,oe);for(let Oe=0;Oe<oe.length;Oe++){const ue=h.length-1-y.log(oe[Oe]);if(ue<0)throw new Pe("Bad error location");h[ue]=Ne.addOrSubtract(h[ue],xe[Oe])}}runEuclideanAlgorithm(h,g,y){if(h.getDegree()<g.getDegree()){const Oe=h;h=g,g=Oe}const C=this.field;let _=h,T=g,j=C.getZero(),F=C.getOne();for(;T.getDegree()>=(y/2|0);){let Oe=_,ue=j;if(_=T,j=F,_.isZero())throw new Pe("r_{i-1} was zero");T=Oe;let Se=C.getZero();const Ae=_.getCoefficient(_.getDegree()),Be=C.inverse(Ae);for(;T.getDegree()>=_.getDegree()&&!T.isZero();){const lt=T.getDegree()-_.getDegree(),gt=C.multiply(T.getCoefficient(T.getDegree()),Be);Se=Se.addOrSubtract(C.buildMonomial(lt,gt)),T=T.addOrSubtract(_.multiplyByMonomial(lt,gt))}if(F=Se.multiply(j).addOrSubtract(ue),T.getDegree()>=_.getDegree())throw new ze("Division algorithm failed to reduce polynomial?")}const U=F.getCoefficient(0);if(U===0)throw new Pe("sigmaTilde(0) was zero");const ee=C.inverse(U),oe=F.multiplyScalar(ee),xe=T.multiplyScalar(ee);return[oe,xe]}findErrorLocations(h){const g=h.getDegree();if(g===1)return Int32Array.from([h.getCoefficient(1)]);const y=new Int32Array(g);let C=0;const _=this.field;for(let T=1;T<_.getSize()&&C<g;T++)h.evaluateAt(T)===0&&(y[C]=_.inverse(T),C++);if(C!==g)throw new Pe("Error locator degree does not match number of roots");return y}findErrorMagnitudes(h,g){const y=g.length,C=new Int32Array(y),_=this.field;for(let T=0;T<y;T++){const j=_.inverse(g[T]);let F=1;for(let U=0;U<y;U++)if(T!==U){const ee=_.multiply(g[U],j),oe=ee&1?ee&-2:ee|1;F=_.multiply(F,oe)}C[T]=_.multiply(h.evaluateAt(j),_.inverse(F)),_.getGeneratorBase()!==0&&(C[T]=_.multiply(C[T],j))}return C}}var $e;(function(se){se[se.UPPER=0]="UPPER",se[se.LOWER=1]="LOWER",se[se.MIXED=2]="MIXED",se[se.DIGIT=3]="DIGIT",se[se.PUNCT=4]="PUNCT",se[se.BINARY=5]="BINARY"})($e||($e={}));class et{decode(h){this.ddata=h;let g=h.getBits(),y=this.extractBits(g),C=this.correctBits(y),_=et.convertBoolArrayToByteArray(C),T=et.getEncodedData(C),j=new ae(_,T,null,null);return j.setNumBits(C.length),j}static highLevelDecode(h){return this.getEncodedData(h)}static getEncodedData(h){let g=h.length,y=$e.UPPER,C=$e.UPPER,_="",T=0;for(;T<g;)if(C===$e.BINARY){if(g-T<5)break;let j=et.readCode(h,T,5);if(T+=5,j===0){if(g-T<11)break;j=et.readCode(h,T,11)+31,T+=11}for(let F=0;F<j;F++){if(g-T<8){T=g;break}const U=et.readCode(h,T,8);_+=H.castAsNonUtf8Char(U),T+=8}C=y}else{let j=C===$e.DIGIT?4:5;if(g-T<j)break;let F=et.readCode(h,T,j);T+=j;let U=et.getCharacter(C,F);U.startsWith("CTRL_")?(y=C,C=et.getTable(U.charAt(5)),U.charAt(6)==="L"&&(y=C)):(_+=U,C=y)}return _}static getTable(h){switch(h){case"L":return $e.LOWER;case"P":return $e.PUNCT;case"M":return $e.MIXED;case"D":return $e.DIGIT;case"B":return $e.BINARY;case"U":default:return $e.UPPER}}static getCharacter(h,g){switch(h){case $e.UPPER:return et.UPPER_TABLE[g];case $e.LOWER:return et.LOWER_TABLE[g];case $e.MIXED:return et.MIXED_TABLE[g];case $e.PUNCT:return et.PUNCT_TABLE[g];case $e.DIGIT:return et.DIGIT_TABLE[g];default:throw new ze("Bad table")}}correctBits(h){let g,y;this.ddata.getNbLayers()<=2?(y=6,g=Ne.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(y=8,g=Ne.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(y=10,g=Ne.AZTEC_DATA_10):(y=12,g=Ne.AZTEC_DATA_12);let C=this.ddata.getNbDatablocks(),_=h.length/y;if(_<C)throw new O;let T=h.length%y,j=new Int32Array(_);for(let xe=0;xe<_;xe++,T+=y)j[xe]=et.readCode(h,T,y);try{new De(g).decode(j,_-C)}catch(xe){throw new O(xe)}let F=(1<<y)-1,U=0;for(let xe=0;xe<C;xe++){let Oe=j[xe];if(Oe===0||Oe===F)throw new O;(Oe===1||Oe===F-1)&&U++}let ee=new Array(C*y-U),oe=0;for(let xe=0;xe<C;xe++){let Oe=j[xe];if(Oe===1||Oe===F-1)ee.fill(Oe>1,oe,oe+y-1),oe+=y-1;else for(let ue=y-1;ue>=0;--ue)ee[oe++]=(Oe&1<<ue)!==0}return ee}extractBits(h){let g=this.ddata.isCompact(),y=this.ddata.getNbLayers(),C=(g?11:14)+y*4,_=new Int32Array(C),T=new Array(this.totalBitsInLayer(y,g));if(g)for(let j=0;j<_.length;j++)_[j]=j;else{let j=C+1+2*E.truncDivision(E.truncDivision(C,2)-1,15),F=C/2,U=E.truncDivision(j,2);for(let ee=0;ee<F;ee++){let oe=ee+E.truncDivision(ee,15);_[F-ee-1]=U-oe-1,_[F+ee]=U+oe+1}}for(let j=0,F=0;j<y;j++){let U=(y-j)*4+(g?9:12),ee=j*2,oe=C-1-ee;for(let xe=0;xe<U;xe++){let Oe=xe*2;for(let ue=0;ue<2;ue++)T[F+Oe+ue]=h.get(_[ee+ue],_[ee+xe]),T[F+2*U+Oe+ue]=h.get(_[ee+xe],_[oe-ue]),T[F+4*U+Oe+ue]=h.get(_[oe-ue],_[oe-xe]),T[F+6*U+Oe+ue]=h.get(_[oe-xe],_[ee+ue])}F+=U*8}return T}static readCode(h,g,y){let C=0;for(let _=g;_<g+y;_++)C<<=1,h[_]&&(C|=1);return C}static readByte(h,g){let y=h.length-g;return y>=8?et.readCode(h,g,8):et.readCode(h,g,y)<<8-y}static convertBoolArrayToByteArray(h){let g=new Uint8Array((h.length+7)/8);for(let y=0;y<g.length;y++)g[y]=et.readByte(h,8*y);return g}totalBitsInLayer(h,g){return((g?88:112)+16*h)*h}}et.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],et.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],et.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],et.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],et.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ut{constructor(){}static round(h){return h===NaN?0:h<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:h>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:h+(h<0?-.5:.5)|0}static distance(h,g,y,C){const _=h-y,T=g-C;return Math.sqrt(_*_+T*T)}static sum(h){let g=0;for(let y=0,C=h.length;y!==C;y++){const _=h[y];g+=_}return g}}class kt{static floatToIntBits(h){return h}}kt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ht{constructor(h,g){this.x=h,this.y=g}getX(){return this.x}getY(){return this.y}equals(h){if(h instanceof ht){const g=h;return this.x===g.x&&this.y===g.y}return!1}hashCode(){return 31*kt.floatToIntBits(this.x)+kt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(h){const g=this.distance(h[0],h[1]),y=this.distance(h[1],h[2]),C=this.distance(h[0],h[2]);let _,T,j;if(y>=g&&y>=C?(T=h[0],_=h[1],j=h[2]):C>=y&&C>=g?(T=h[1],_=h[0],j=h[2]):(T=h[2],_=h[0],j=h[1]),this.crossProductZ(_,T,j)<0){const F=_;_=j,j=F}h[0]=_,h[1]=T,h[2]=j}static distance(h,g){return ut.distance(h.x,h.y,g.x,g.y)}static crossProductZ(h,g,y){const C=g.x,_=g.y;return(y.x-C)*(h.y-_)-(y.y-_)*(h.x-C)}}class Rr{constructor(h,g){this.bits=h,this.points=g}getBits(){return this.bits}getPoints(){return this.points}}class er extends Rr{constructor(h,g,y,C,_){super(h,g),this.compact=y,this.nbDatablocks=C,this.nbLayers=_}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ct{constructor(h,g,y,C){this.image=h,this.height=h.getHeight(),this.width=h.getWidth(),g==null&&(g=ct.INIT_SIZE),y==null&&(y=h.getWidth()/2|0),C==null&&(C=h.getHeight()/2|0);const _=g/2|0;if(this.leftInit=y-_,this.rightInit=y+_,this.upInit=C-_,this.downInit=C+_,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new W}detect(){let h=this.leftInit,g=this.rightInit,y=this.upInit,C=this.downInit,_=!1,T=!0,j=!1,F=!1,U=!1,ee=!1,oe=!1;const xe=this.width,Oe=this.height;for(;T;){T=!1;let ue=!0;for(;(ue||!F)&&g<xe;)ue=this.containsBlackPoint(y,C,g,!1),ue?(g++,T=!0,F=!0):F||g++;if(g>=xe){_=!0;break}let Se=!0;for(;(Se||!U)&&C<Oe;)Se=this.containsBlackPoint(h,g,C,!0),Se?(C++,T=!0,U=!0):U||C++;if(C>=Oe){_=!0;break}let Ae=!0;for(;(Ae||!ee)&&h>=0;)Ae=this.containsBlackPoint(y,C,h,!1),Ae?(h--,T=!0,ee=!0):ee||h--;if(h<0){_=!0;break}let Be=!0;for(;(Be||!oe)&&y>=0;)Be=this.containsBlackPoint(h,g,y,!0),Be?(y--,T=!0,oe=!0):oe||y--;if(y<0){_=!0;break}T&&(j=!0)}if(!_&&j){const ue=g-h;let Se=null;for(let gt=1;Se===null&&gt<ue;gt++)Se=this.getBlackPointOnSegment(h,C-gt,h+gt,C);if(Se==null)throw new W;let Ae=null;for(let gt=1;Ae===null&&gt<ue;gt++)Ae=this.getBlackPointOnSegment(h,y+gt,h+gt,y);if(Ae==null)throw new W;let Be=null;for(let gt=1;Be===null&&gt<ue;gt++)Be=this.getBlackPointOnSegment(g,y+gt,g-gt,y);if(Be==null)throw new W;let lt=null;for(let gt=1;lt===null&&gt<ue;gt++)lt=this.getBlackPointOnSegment(g,C-gt,g-gt,C);if(lt==null)throw new W;return this.centerEdges(lt,Se,Be,Ae)}else throw new W}getBlackPointOnSegment(h,g,y,C){const _=ut.round(ut.distance(h,g,y,C)),T=(y-h)/_,j=(C-g)/_,F=this.image;for(let U=0;U<_;U++){const ee=ut.round(h+U*T),oe=ut.round(g+U*j);if(F.get(ee,oe))return new ht(ee,oe)}return null}centerEdges(h,g,y,C){const _=h.getX(),T=h.getY(),j=g.getX(),F=g.getY(),U=y.getX(),ee=y.getY(),oe=C.getX(),xe=C.getY(),Oe=ct.CORR;return _<this.width/2?[new ht(oe-Oe,xe+Oe),new ht(j+Oe,F+Oe),new ht(U-Oe,ee-Oe),new ht(_+Oe,T-Oe)]:[new ht(oe+Oe,xe+Oe),new ht(j+Oe,F-Oe),new ht(U-Oe,ee+Oe),new ht(_-Oe,T-Oe)]}containsBlackPoint(h,g,y,C){const _=this.image;if(C){for(let T=h;T<=g;T++)if(_.get(T,y))return!0}else for(let T=h;T<=g;T++)if(_.get(y,T))return!0;return!1}}ct.INIT_SIZE=10,ct.CORR=1;class qt{static checkAndNudgePoints(h,g){const y=h.getWidth(),C=h.getHeight();let _=!0;for(let T=0;T<g.length&&_;T+=2){const j=Math.floor(g[T]),F=Math.floor(g[T+1]);if(j<-1||j>y||F<-1||F>C)throw new W;_=!1,j===-1?(g[T]=0,_=!0):j===y&&(g[T]=y-1,_=!0),F===-1?(g[T+1]=0,_=!0):F===C&&(g[T+1]=C-1,_=!0)}_=!0;for(let T=g.length-2;T>=0&&_;T-=2){const j=Math.floor(g[T]),F=Math.floor(g[T+1]);if(j<-1||j>y||F<-1||F>C)throw new W;_=!1,j===-1?(g[T]=0,_=!0):j===y&&(g[T]=y-1,_=!0),F===-1?(g[T+1]=0,_=!0):F===C&&(g[T+1]=C-1,_=!0)}}}class Lt{constructor(h,g,y,C,_,T,j,F,U){this.a11=h,this.a21=g,this.a31=y,this.a12=C,this.a22=_,this.a32=T,this.a13=j,this.a23=F,this.a33=U}static quadrilateralToQuadrilateral(h,g,y,C,_,T,j,F,U,ee,oe,xe,Oe,ue,Se,Ae){const Be=Lt.quadrilateralToSquare(h,g,y,C,_,T,j,F);return Lt.squareToQuadrilateral(U,ee,oe,xe,Oe,ue,Se,Ae).times(Be)}transformPoints(h){const g=h.length,y=this.a11,C=this.a12,_=this.a13,T=this.a21,j=this.a22,F=this.a23,U=this.a31,ee=this.a32,oe=this.a33;for(let xe=0;xe<g;xe+=2){const Oe=h[xe],ue=h[xe+1],Se=_*Oe+F*ue+oe;h[xe]=(y*Oe+T*ue+U)/Se,h[xe+1]=(C*Oe+j*ue+ee)/Se}}transformPointsWithValues(h,g){const y=this.a11,C=this.a12,_=this.a13,T=this.a21,j=this.a22,F=this.a23,U=this.a31,ee=this.a32,oe=this.a33,xe=h.length;for(let Oe=0;Oe<xe;Oe++){const ue=h[Oe],Se=g[Oe],Ae=_*ue+F*Se+oe;h[Oe]=(y*ue+T*Se+U)/Ae,g[Oe]=(C*ue+j*Se+ee)/Ae}}static squareToQuadrilateral(h,g,y,C,_,T,j,F){const U=h-y+_-j,ee=g-C+T-F;if(U===0&&ee===0)return new Lt(y-h,_-y,h,C-g,T-C,g,0,0,1);{const oe=y-_,xe=j-_,Oe=C-T,ue=F-T,Se=oe*ue-xe*Oe,Ae=(U*ue-xe*ee)/Se,Be=(oe*ee-U*Oe)/Se;return new Lt(y-h+Ae*y,j-h+Be*j,h,C-g+Ae*C,F-g+Be*F,g,Ae,Be,1)}}static quadrilateralToSquare(h,g,y,C,_,T,j,F){return Lt.squareToQuadrilateral(h,g,y,C,_,T,j,F).buildAdjoint()}buildAdjoint(){return new Lt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(h){return new Lt(this.a11*h.a11+this.a21*h.a12+this.a31*h.a13,this.a11*h.a21+this.a21*h.a22+this.a31*h.a23,this.a11*h.a31+this.a21*h.a32+this.a31*h.a33,this.a12*h.a11+this.a22*h.a12+this.a32*h.a13,this.a12*h.a21+this.a22*h.a22+this.a32*h.a23,this.a12*h.a31+this.a22*h.a32+this.a32*h.a33,this.a13*h.a11+this.a23*h.a12+this.a33*h.a13,this.a13*h.a21+this.a23*h.a22+this.a33*h.a23,this.a13*h.a31+this.a23*h.a32+this.a33*h.a33)}}class dr extends qt{sampleGrid(h,g,y,C,_,T,j,F,U,ee,oe,xe,Oe,ue,Se,Ae,Be,lt,gt){const vt=Lt.quadrilateralToQuadrilateral(C,_,T,j,F,U,ee,oe,xe,Oe,ue,Se,Ae,Be,lt,gt);return this.sampleGridWithTransform(h,g,y,vt)}sampleGridWithTransform(h,g,y,C){if(g<=0||y<=0)throw new W;const _=new Y(g,y),T=new Float32Array(2*g);for(let j=0;j<y;j++){const F=T.length,U=j+.5;for(let ee=0;ee<F;ee+=2)T[ee]=ee/2+.5,T[ee+1]=U;C.transformPoints(T),qt.checkAndNudgePoints(h,T);try{for(let ee=0;ee<F;ee+=2)h.get(Math.floor(T[ee]),Math.floor(T[ee+1]))&&_.set(ee/2,j)}catch{throw new W}}return _}}class Gt{static setGridSampler(h){Gt.gridSampler=h}static getInstance(){return Gt.gridSampler}}Gt.gridSampler=new dr;class qe{constructor(h,g){this.x=h,this.y=g}toResultPoint(){return new ht(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Xe{constructor(h){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=h}detect(){return this.detectMirror(!1)}detectMirror(h){let g=this.getMatrixCenter(),y=this.getBullsEyeCorners(g);if(h){let T=y[0];y[0]=y[2],y[2]=T}this.extractParameters(y);let C=this.sampleGrid(this.image,y[this.shift%4],y[(this.shift+1)%4],y[(this.shift+2)%4],y[(this.shift+3)%4]),_=this.getMatrixCornerPoints(y);return new er(C,_,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(h){if(!this.isValidPoint(h[0])||!this.isValidPoint(h[1])||!this.isValidPoint(h[2])||!this.isValidPoint(h[3]))throw new W;let g=2*this.nbCenterLayers,y=new Int32Array([this.sampleLine(h[0],h[1],g),this.sampleLine(h[1],h[2],g),this.sampleLine(h[2],h[3],g),this.sampleLine(h[3],h[0],g)]);this.shift=this.getRotation(y,g);let C=0;for(let T=0;T<4;T++){let j=y[(this.shift+T)%4];this.compact?(C<<=7,C+=j>>1&127):(C<<=10,C+=(j>>2&992)+(j>>1&31))}let _=this.getCorrectedParameterData(C,this.compact);this.compact?(this.nbLayers=(_>>6)+1,this.nbDataBlocks=(_&63)+1):(this.nbLayers=(_>>11)+1,this.nbDataBlocks=(_&2047)+1)}getRotation(h,g){let y=0;h.forEach((C,_,T)=>{let j=(C>>g-2<<1)+(C&1);y=(y<<3)+j}),y=((y&1)<<11)+(y>>1);for(let C=0;C<4;C++)if(E.bitCount(y^this.EXPECTED_CORNER_BITS[C])<=2)return C;throw new W}getCorrectedParameterData(h,g){let y,C;g?(y=7,C=2):(y=10,C=4);let _=y-C,T=new Int32Array(y);for(let F=y-1;F>=0;--F)T[F]=h&15,h>>=4;try{new De(Ne.AZTEC_PARAM).decode(T,_)}catch{throw new W}let j=0;for(let F=0;F<C;F++)j=(j<<4)+T[F];return j}getBullsEyeCorners(h){let g=h,y=h,C=h,_=h,T=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let oe=this.getFirstDifferent(g,T,1,-1),xe=this.getFirstDifferent(y,T,1,1),Oe=this.getFirstDifferent(C,T,-1,1),ue=this.getFirstDifferent(_,T,-1,-1);if(this.nbCenterLayers>2){let Se=this.distancePoint(ue,oe)*this.nbCenterLayers/(this.distancePoint(_,g)*(this.nbCenterLayers+2));if(Se<.75||Se>1.25||!this.isWhiteOrBlackRectangle(oe,xe,Oe,ue))break}g=oe,y=xe,C=Oe,_=ue,T=!T}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new W;this.compact=this.nbCenterLayers===5;let j=new ht(g.getX()+.5,g.getY()-.5),F=new ht(y.getX()+.5,y.getY()+.5),U=new ht(C.getX()-.5,C.getY()+.5),ee=new ht(_.getX()-.5,_.getY()-.5);return this.expandSquare([j,F,U,ee],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let h,g,y,C;try{let j=new ct(this.image).detect();h=j[0],g=j[1],y=j[2],C=j[3]}catch{let F=this.image.getWidth()/2,U=this.image.getHeight()/2;h=this.getFirstDifferent(new qe(F+7,U-7),!1,1,-1).toResultPoint(),g=this.getFirstDifferent(new qe(F+7,U+7),!1,1,1).toResultPoint(),y=this.getFirstDifferent(new qe(F-7,U+7),!1,-1,1).toResultPoint(),C=this.getFirstDifferent(new qe(F-7,U-7),!1,-1,-1).toResultPoint()}let _=ut.round((h.getX()+C.getX()+g.getX()+y.getX())/4),T=ut.round((h.getY()+C.getY()+g.getY()+y.getY())/4);try{let j=new ct(this.image,15,_,T).detect();h=j[0],g=j[1],y=j[2],C=j[3]}catch{h=this.getFirstDifferent(new qe(_+7,T-7),!1,1,-1).toResultPoint(),g=this.getFirstDifferent(new qe(_+7,T+7),!1,1,1).toResultPoint(),y=this.getFirstDifferent(new qe(_-7,T+7),!1,-1,1).toResultPoint(),C=this.getFirstDifferent(new qe(_-7,T-7),!1,-1,-1).toResultPoint()}return _=ut.round((h.getX()+C.getX()+g.getX()+y.getX())/4),T=ut.round((h.getY()+C.getY()+g.getY()+y.getY())/4),new qe(_,T)}getMatrixCornerPoints(h){return this.expandSquare(h,2*this.nbCenterLayers,this.getDimension())}sampleGrid(h,g,y,C,_){let T=Gt.getInstance(),j=this.getDimension(),F=j/2-this.nbCenterLayers,U=j/2+this.nbCenterLayers;return T.sampleGrid(h,j,j,F,F,U,F,U,U,F,U,g.getX(),g.getY(),y.getX(),y.getY(),C.getX(),C.getY(),_.getX(),_.getY())}sampleLine(h,g,y){let C=0,_=this.distanceResultPoint(h,g),T=_/y,j=h.getX(),F=h.getY(),U=T*(g.getX()-h.getX())/_,ee=T*(g.getY()-h.getY())/_;for(let oe=0;oe<y;oe++)this.image.get(ut.round(j+oe*U),ut.round(F+oe*ee))&&(C|=1<<y-oe-1);return C}isWhiteOrBlackRectangle(h,g,y,C){let _=3;h=new qe(h.getX()-_,h.getY()+_),g=new qe(g.getX()-_,g.getY()-_),y=new qe(y.getX()+_,y.getY()-_),C=new qe(C.getX()+_,C.getY()+_);let T=this.getColor(C,h);if(T===0)return!1;let j=this.getColor(h,g);return j!==T||(j=this.getColor(g,y),j!==T)?!1:(j=this.getColor(y,C),j===T)}getColor(h,g){let y=this.distancePoint(h,g),C=(g.getX()-h.getX())/y,_=(g.getY()-h.getY())/y,T=0,j=h.getX(),F=h.getY(),U=this.image.get(h.getX(),h.getY()),ee=Math.ceil(y);for(let xe=0;xe<ee;xe++)j+=C,F+=_,this.image.get(ut.round(j),ut.round(F))!==U&&T++;let oe=T/y;return oe>.1&&oe<.9?0:oe<=.1===U?1:-1}getFirstDifferent(h,g,y,C){let _=h.getX()+y,T=h.getY()+C;for(;this.isValid(_,T)&&this.image.get(_,T)===g;)_+=y,T+=C;for(_-=y,T-=C;this.isValid(_,T)&&this.image.get(_,T)===g;)_+=y;for(_-=y;this.isValid(_,T)&&this.image.get(_,T)===g;)T+=C;return T-=C,new qe(_,T)}expandSquare(h,g,y){let C=y/(2*g),_=h[0].getX()-h[2].getX(),T=h[0].getY()-h[2].getY(),j=(h[0].getX()+h[2].getX())/2,F=(h[0].getY()+h[2].getY())/2,U=new ht(j+C*_,F+C*T),ee=new ht(j-C*_,F-C*T);_=h[1].getX()-h[3].getX(),T=h[1].getY()-h[3].getY(),j=(h[1].getX()+h[3].getX())/2,F=(h[1].getY()+h[3].getY())/2;let oe=new ht(j+C*_,F+C*T),xe=new ht(j-C*_,F-C*T);return[U,oe,ee,xe]}isValid(h,g){return h>=0&&h<this.image.getWidth()&&g>0&&g<this.image.getHeight()}isValidPoint(h){let g=ut.round(h.getX()),y=ut.round(h.getY());return this.isValid(g,y)}distancePoint(h,g){return ut.distance(h.getX(),h.getY(),g.getX(),g.getY())}distanceResultPoint(h,g){return ut.distance(h.getX(),h.getY(),g.getX(),g.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(E.truncDivision(this.nbLayers-4,8)+1)+15}}class Te{decode(h,g=null){let y=null,C=new Xe(h.getBlackMatrix()),_=null,T=null;try{let ee=C.detectMirror(!1);_=ee.getPoints(),this.reportFoundResultPoints(g,_),T=new et().decode(ee)}catch(ee){y=ee}if(T==null)try{let ee=C.detectMirror(!0);_=ee.getPoints(),this.reportFoundResultPoints(g,_),T=new et().decode(ee)}catch(ee){throw y??ee}let j=new V(T.getText(),T.getRawBytes(),T.getNumBits(),_,ie.AZTEC,v.currentTimeMillis()),F=T.getByteSegments();F!=null&&j.putMetadata(ne.BYTE_SEGMENTS,F);let U=T.getECLevel();return U!=null&&j.putMetadata(ne.ERROR_CORRECTION_LEVEL,U),j}reportFoundResultPoints(h,g){if(h!=null){let y=h.get(R.NEED_RESULT_POINT_CALLBACK);y!=null&&g.forEach((C,_,T)=>{y.foundPossibleResultPoint(C)})}}reset(){}}class He extends ce{constructor(h=500){super(new Te,h)}}class je{decode(h,g){try{return this.doDecode(h,g)}catch{if(g&&g.get(R.TRY_HARDER)===!0&&h.isRotateSupported()){const _=h.rotateCounterClockwise(),T=this.doDecode(_,g),j=T.getResultMetadata();let F=270;j!==null&&j.get(ne.ORIENTATION)===!0&&(F=F+j.get(ne.ORIENTATION)%360),T.putMetadata(ne.ORIENTATION,F);const U=T.getResultPoints();if(U!==null){const ee=_.getHeight();for(let oe=0;oe<U.length;oe++)U[oe]=new ht(ee-U[oe].getY()-1,U[oe].getX())}return T}else throw new W}}reset(){}doDecode(h,g){const y=h.getWidth(),C=h.getHeight();let _=new N(y);const T=g&&g.get(R.TRY_HARDER)===!0,j=Math.max(1,C>>(T?8:5));let F;T?F=C:F=15;const U=Math.trunc(C/2);for(let ee=0;ee<F;ee++){const oe=Math.trunc((ee+1)/2),xe=(ee&1)===0,Oe=U+j*(xe?oe:-oe);if(Oe<0||Oe>=C)break;try{_=h.getBlackRow(Oe,_)}catch{continue}for(let ue=0;ue<2;ue++){if(ue===1&&(_.reverse(),g&&g.get(R.NEED_RESULT_POINT_CALLBACK)===!0)){const Se=new Map;g.forEach((Ae,Be)=>Se.set(Be,Ae)),Se.delete(R.NEED_RESULT_POINT_CALLBACK),g=Se}try{const Se=this.decodeRow(Oe,_,g);if(ue===1){Se.putMetadata(ne.ORIENTATION,180);const Ae=Se.getResultPoints();Ae!==null&&(Ae[0]=new ht(y-Ae[0].getX()-1,Ae[0].getY()),Ae[1]=new ht(y-Ae[1].getX()-1,Ae[1].getY()))}return Se}catch{}}}throw new W}static recordPattern(h,g,y){const C=y.length;for(let U=0;U<C;U++)y[U]=0;const _=h.getSize();if(g>=_)throw new W;let T=!h.get(g),j=0,F=g;for(;F<_;){if(h.get(F)!==T)y[j]++;else{if(++j===C)break;y[j]=1,T=!T}F++}if(!(j===C||j===C-1&&F===_))throw new W}static recordPatternInReverse(h,g,y){let C=y.length,_=h.get(g);for(;g>0&&C>=0;)h.get(--g)!==_&&(C--,_=!_);if(C>=0)throw new W;je.recordPattern(h,g+1,y)}static patternMatchVariance(h,g,y){const C=h.length;let _=0,T=0;for(let U=0;U<C;U++)_+=h[U],T+=g[U];if(_<T)return Number.POSITIVE_INFINITY;const j=_/T;y*=j;let F=0;for(let U=0;U<C;U++){const ee=h[U],oe=g[U]*j,xe=ee>oe?ee-oe:oe-ee;if(xe>y)return Number.POSITIVE_INFINITY;F+=xe}return F/_}}class Ce extends je{static findStartPattern(h){const g=h.getSize(),y=h.getNextSet(0);let C=0,_=Int32Array.from([0,0,0,0,0,0]),T=y,j=!1;const F=6;for(let U=y;U<g;U++)if(h.get(U)!==j)_[C]++;else{if(C===F-1){let ee=Ce.MAX_AVG_VARIANCE,oe=-1;for(let xe=Ce.CODE_START_A;xe<=Ce.CODE_START_C;xe++){const Oe=je.patternMatchVariance(_,Ce.CODE_PATTERNS[xe],Ce.MAX_INDIVIDUAL_VARIANCE);Oe<ee&&(ee=Oe,oe=xe)}if(oe>=0&&h.isRange(Math.max(0,T-(U-T)/2),T,!1))return Int32Array.from([T,U,oe]);T+=_[0]+_[1],_=_.slice(2,_.length-1),_[C-1]=0,_[C]=0,C--}else C++;_[C]=1,j=!j}throw new W}static decodeCode(h,g,y){je.recordPattern(h,y,g);let C=Ce.MAX_AVG_VARIANCE,_=-1;for(let T=0;T<Ce.CODE_PATTERNS.length;T++){const j=Ce.CODE_PATTERNS[T],F=this.patternMatchVariance(g,j,Ce.MAX_INDIVIDUAL_VARIANCE);F<C&&(C=F,_=T)}if(_>=0)return _;throw new W}decodeRow(h,g,y){const C=y&&y.get(R.ASSUME_GS1)===!0,_=Ce.findStartPattern(g),T=_[2];let j=0;const F=new Uint8Array(20);F[j++]=T;let U;switch(T){case Ce.CODE_START_A:U=Ce.CODE_CODE_A;break;case Ce.CODE_START_B:U=Ce.CODE_CODE_B;break;case Ce.CODE_START_C:U=Ce.CODE_CODE_C;break;default:throw new O}let ee=!1,oe=!1,xe="",Oe=_[0],ue=_[1];const Se=Int32Array.from([0,0,0,0,0,0]);let Ae=0,Be=0,lt=T,gt=0,vt=!0,Zt=!1,Fr=!1;for(;!ee;){const kn=oe;switch(oe=!1,Ae=Be,Be=Ce.decodeCode(g,Se,ue),F[j++]=Be,Be!==Ce.CODE_STOP&&(vt=!0),Be!==Ce.CODE_STOP&&(gt++,lt+=gt*Be),Oe=ue,ue+=Se.reduce((OP,tk)=>OP+tk,0),Be){case Ce.CODE_START_A:case Ce.CODE_START_B:case Ce.CODE_START_C:throw new O}switch(U){case Ce.CODE_CODE_A:if(Be<64)Fr===Zt?xe+=String.fromCharCode(32+Be):xe+=String.fromCharCode(32+Be+128),Fr=!1;else if(Be<96)Fr===Zt?xe+=String.fromCharCode(Be-64):xe+=String.fromCharCode(Be+64),Fr=!1;else switch(Be!==Ce.CODE_STOP&&(vt=!1),Be){case Ce.CODE_FNC_1:C&&(xe.length===0?xe+="]C1":xe+="");break;case Ce.CODE_FNC_2:case Ce.CODE_FNC_3:break;case Ce.CODE_FNC_4_A:!Zt&&Fr?(Zt=!0,Fr=!1):Zt&&Fr?(Zt=!1,Fr=!1):Fr=!0;break;case Ce.CODE_SHIFT:oe=!0,U=Ce.CODE_CODE_B;break;case Ce.CODE_CODE_B:U=Ce.CODE_CODE_B;break;case Ce.CODE_CODE_C:U=Ce.CODE_CODE_C;break;case Ce.CODE_STOP:ee=!0;break}break;case Ce.CODE_CODE_B:if(Be<96)Fr===Zt?xe+=String.fromCharCode(32+Be):xe+=String.fromCharCode(32+Be+128),Fr=!1;else switch(Be!==Ce.CODE_STOP&&(vt=!1),Be){case Ce.CODE_FNC_1:C&&(xe.length===0?xe+="]C1":xe+="");break;case Ce.CODE_FNC_2:case Ce.CODE_FNC_3:break;case Ce.CODE_FNC_4_B:!Zt&&Fr?(Zt=!0,Fr=!1):Zt&&Fr?(Zt=!1,Fr=!1):Fr=!0;break;case Ce.CODE_SHIFT:oe=!0,U=Ce.CODE_CODE_A;break;case Ce.CODE_CODE_A:U=Ce.CODE_CODE_A;break;case Ce.CODE_CODE_C:U=Ce.CODE_CODE_C;break;case Ce.CODE_STOP:ee=!0;break}break;case Ce.CODE_CODE_C:if(Be<100)Be<10&&(xe+="0"),xe+=Be;else switch(Be!==Ce.CODE_STOP&&(vt=!1),Be){case Ce.CODE_FNC_1:C&&(xe.length===0?xe+="]C1":xe+="");break;case Ce.CODE_CODE_A:U=Ce.CODE_CODE_A;break;case Ce.CODE_CODE_B:U=Ce.CODE_CODE_B;break;case Ce.CODE_STOP:ee=!0;break}break}kn&&(U=U===Ce.CODE_CODE_A?Ce.CODE_CODE_B:Ce.CODE_CODE_A)}const Hs=ue-Oe;if(ue=g.getNextUnset(ue),!g.isRange(ue,Math.min(g.getSize(),ue+(ue-Oe)/2),!1))throw new W;if(lt-=gt*Ae,lt%103!==Ae)throw new m;const Ti=xe.length;if(Ti===0)throw new W;Ti>0&&vt&&(U===Ce.CODE_CODE_C?xe=xe.substring(0,Ti-2):xe=xe.substring(0,Ti-1));const La=(_[1]+_[0])/2,Yn=Oe+Hs/2,Ii=F.length,Ja=new Uint8Array(Ii);for(let kn=0;kn<Ii;kn++)Ja[kn]=F[kn];const Cu=[new ht(La,h),new ht(Yn,h)];return new V(xe,Ja,0,Cu,ie.CODE_128,new Date().getTime())}}Ce.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ce.MAX_AVG_VARIANCE=.25,Ce.MAX_INDIVIDUAL_VARIANCE=.7,Ce.CODE_SHIFT=98,Ce.CODE_CODE_C=99,Ce.CODE_CODE_B=100,Ce.CODE_CODE_A=101,Ce.CODE_FNC_1=102,Ce.CODE_FNC_2=97,Ce.CODE_FNC_3=96,Ce.CODE_FNC_4_A=101,Ce.CODE_FNC_4_B=100,Ce.CODE_START_A=103,Ce.CODE_START_B=104,Ce.CODE_START_C=105,Ce.CODE_STOP=106;class ot extends je{constructor(h=!1,g=!1){super(),this.usingCheckDigit=h,this.extendedMode=g,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(h,g,y){let C=this.counters;C.fill(0),this.decodeRowResult="";let _=ot.findAsteriskPattern(g,C),T=g.getNextSet(_[1]),j=g.getSize(),F,U;do{ot.recordPattern(g,T,C);let Se=ot.toNarrowWidePattern(C);if(Se<0)throw new W;F=ot.patternToChar(Se),this.decodeRowResult+=F,U=T;for(let Ae of C)T+=Ae;T=g.getNextSet(T)}while(F!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let ee=0;for(let Se of C)ee+=Se;let oe=T-U-ee;if(T!==j&&oe*2<ee)throw new W;if(this.usingCheckDigit){let Se=this.decodeRowResult.length-1,Ae=0;for(let Be=0;Be<Se;Be++)Ae+=ot.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Be));if(this.decodeRowResult.charAt(Se)!==ot.ALPHABET_STRING.charAt(Ae%43))throw new m;this.decodeRowResult=this.decodeRowResult.substring(0,Se)}if(this.decodeRowResult.length===0)throw new W;let xe;this.extendedMode?xe=ot.decodeExtended(this.decodeRowResult):xe=this.decodeRowResult;let Oe=(_[1]+_[0])/2,ue=U+ee/2;return new V(xe,null,0,[new ht(Oe,h),new ht(ue,h)],ie.CODE_39,new Date().getTime())}static findAsteriskPattern(h,g){let y=h.getSize(),C=h.getNextSet(0),_=0,T=C,j=!1,F=g.length;for(let U=C;U<y;U++)if(h.get(U)!==j)g[_]++;else{if(_===F-1){if(this.toNarrowWidePattern(g)===ot.ASTERISK_ENCODING&&h.isRange(Math.max(0,T-Math.floor((U-T)/2)),T,!1))return[T,U];T+=g[0]+g[1],g.copyWithin(0,2,2+_-1),g[_-1]=0,g[_]=0,_--}else _++;g[_]=1,j=!j}throw new W}static toNarrowWidePattern(h){let g=h.length,y=0,C;do{let _=2147483647;for(let F of h)F<_&&F>y&&(_=F);y=_,C=0;let T=0,j=0;for(let F=0;F<g;F++){let U=h[F];U>y&&(j|=1<<g-1-F,C++,T+=U)}if(C===3){for(let F=0;F<g&&C>0;F++){let U=h[F];if(U>y&&(C--,U*2>=T))return-1}return j}}while(C>3);return-1}static patternToChar(h){for(let g=0;g<ot.CHARACTER_ENCODINGS.length;g++)if(ot.CHARACTER_ENCODINGS[g]===h)return ot.ALPHABET_STRING.charAt(g);if(h===ot.ASTERISK_ENCODING)return"*";throw new W}static decodeExtended(h){let g=h.length,y="";for(let C=0;C<g;C++){let _=h.charAt(C);if(_==="+"||_==="$"||_==="%"||_==="/"){let T=h.charAt(C+1),j="\0";switch(_){case"+":if(T>="A"&&T<="Z")j=String.fromCharCode(T.charCodeAt(0)+32);else throw new O;break;case"$":if(T>="A"&&T<="Z")j=String.fromCharCode(T.charCodeAt(0)-64);else throw new O;break;case"%":if(T>="A"&&T<="E")j=String.fromCharCode(T.charCodeAt(0)-38);else if(T>="F"&&T<="J")j=String.fromCharCode(T.charCodeAt(0)-11);else if(T>="K"&&T<="O")j=String.fromCharCode(T.charCodeAt(0)+16);else if(T>="P"&&T<="T")j=String.fromCharCode(T.charCodeAt(0)+43);else if(T==="U")j="\0";else if(T==="V")j="@";else if(T==="W")j="`";else if(T==="X"||T==="Y"||T==="Z")j="";else throw new O;break;case"/":if(T>="A"&&T<="O")j=String.fromCharCode(T.charCodeAt(0)-32);else if(T==="Z")j=":";else throw new O;break}y+=j,C++}else y+=_}return y}}ot.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ot.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ot.ASTERISK_ENCODING=148;class xt extends je{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(h,g,y){let C=this.decodeStart(g),_=this.decodeEnd(g),T=new te;xt.decodeMiddle(g,C[1],_[0],T);let j=T.toString(),F=null;y!=null&&(F=y.get(R.ALLOWED_LENGTHS)),F==null&&(F=xt.DEFAULT_ALLOWED_LENGTHS);let U=j.length,ee=!1,oe=0;for(let ue of F){if(U===ue){ee=!0;break}ue>oe&&(oe=ue)}if(!ee&&U>oe&&(ee=!0),!ee)throw new O;const xe=[new ht(C[1],h),new ht(_[0],h)];return new V(j,null,0,xe,ie.ITF,new Date().getTime())}static decodeMiddle(h,g,y,C){let _=new Int32Array(10),T=new Int32Array(5),j=new Int32Array(5);for(_.fill(0),T.fill(0),j.fill(0);g<y;){je.recordPattern(h,g,_);for(let U=0;U<5;U++){let ee=2*U;T[U]=_[ee],j[U]=_[ee+1]}let F=xt.decodeDigit(T);C.append(F.toString()),F=this.decodeDigit(j),C.append(F.toString()),_.forEach(function(U){g+=U})}}decodeStart(h){let g=xt.skipWhiteSpace(h),y=xt.findGuardPattern(h,g,xt.START_PATTERN);return this.narrowLineWidth=(y[1]-y[0])/4,this.validateQuietZone(h,y[0]),y}validateQuietZone(h,g){let y=this.narrowLineWidth*10;y=y<g?y:g;for(let C=g-1;y>0&&C>=0&&!h.get(C);C--)y--;if(y!==0)throw new W}static skipWhiteSpace(h){const g=h.getSize(),y=h.getNextSet(0);if(y===g)throw new W;return y}decodeEnd(h){h.reverse();try{let g=xt.skipWhiteSpace(h),y;try{y=xt.findGuardPattern(h,g,xt.END_PATTERN_REVERSED[0])}catch(_){_ instanceof W&&(y=xt.findGuardPattern(h,g,xt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(h,y[0]);let C=y[0];return y[0]=h.getSize()-y[1],y[1]=h.getSize()-C,y}finally{h.reverse()}}static findGuardPattern(h,g,y){let C=y.length,_=new Int32Array(C),T=h.getSize(),j=!1,F=0,U=g;_.fill(0);for(let ee=g;ee<T;ee++)if(h.get(ee)!==j)_[F]++;else{if(F===C-1){if(je.patternMatchVariance(_,y,xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE)return[U,ee];U+=_[0]+_[1],v.arraycopy(_,2,_,0,F-1),_[F-1]=0,_[F]=0,F--}else F++;_[F]=1,j=!j}throw new W}static decodeDigit(h){let g=xt.MAX_AVG_VARIANCE,y=-1,C=xt.PATTERNS.length;for(let _=0;_<C;_++){let T=xt.PATTERNS[_],j=je.patternMatchVariance(h,T,xt.MAX_INDIVIDUAL_VARIANCE);j<g?(g=j,y=_):j===g&&(y=-1)}if(y>=0)return y%10;throw new W}}xt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],xt.MAX_AVG_VARIANCE=.38,xt.MAX_INDIVIDUAL_VARIANCE=.5,xt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],xt.START_PATTERN=Int32Array.from([1,1,1,1]),xt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Dt extends je{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(h){let g=!1,y,C=0,_=Int32Array.from([0,0,0]);for(;!g;){_=Int32Array.from([0,0,0]),y=Dt.findGuardPattern(h,C,!1,this.START_END_PATTERN,_);let T=y[0];C=y[1];let j=T-(C-T);j>=0&&(g=h.isRange(j,T,!1))}return y}static checkChecksum(h){return Dt.checkStandardUPCEANChecksum(h)}static checkStandardUPCEANChecksum(h){let g=h.length;if(g===0)return!1;let y=parseInt(h.charAt(g-1),10);return Dt.getStandardUPCEANChecksum(h.substring(0,g-1))===y}static getStandardUPCEANChecksum(h){let g=h.length,y=0;for(let C=g-1;C>=0;C-=2){let _=h.charAt(C).charCodeAt(0)-48;if(_<0||_>9)throw new O;y+=_}y*=3;for(let C=g-2;C>=0;C-=2){let _=h.charAt(C).charCodeAt(0)-48;if(_<0||_>9)throw new O;y+=_}return(1e3-y)%10}static decodeEnd(h,g){return Dt.findGuardPattern(h,g,!1,Dt.START_END_PATTERN,new Int32Array(Dt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(h,g,y,C){return this.findGuardPattern(h,g,y,C,new Int32Array(C.length))}static findGuardPattern(h,g,y,C,_){let T=h.getSize();g=y?h.getNextUnset(g):h.getNextSet(g);let j=0,F=g,U=C.length,ee=y;for(let oe=g;oe<T;oe++)if(h.get(oe)!==ee)_[j]++;else{if(j===U-1){if(je.patternMatchVariance(_,C,Dt.MAX_INDIVIDUAL_VARIANCE)<Dt.MAX_AVG_VARIANCE)return Int32Array.from([F,oe]);F+=_[0]+_[1];let xe=_.slice(2,_.length-1);for(let Oe=0;Oe<j-1;Oe++)_[Oe]=xe[Oe];_[j-1]=0,_[j]=0,j--}else j++;_[j]=1,ee=!ee}throw new W}static decodeDigit(h,g,y,C){this.recordPattern(h,y,g);let _=this.MAX_AVG_VARIANCE,T=-1,j=C.length;for(let F=0;F<j;F++){let U=C[F],ee=je.patternMatchVariance(g,U,Dt.MAX_INDIVIDUAL_VARIANCE);ee<_&&(_=ee,T=F)}if(T>=0)return T;throw new W}}Dt.MAX_AVG_VARIANCE=.48,Dt.MAX_INDIVIDUAL_VARIANCE=.7,Dt.START_END_PATTERN=Int32Array.from([1,1,1]),Dt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Dt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Dt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Pt{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(h,g,y){let C=this.decodeRowStringBuffer,_=this.decodeMiddle(g,y,C),T=C.toString(),j=Pt.parseExtensionString(T),F=[new ht((y[0]+y[1])/2,h),new ht(_,h)],U=new V(T,null,0,F,ie.UPC_EAN_EXTENSION,new Date().getTime());return j!=null&&U.putAllMetadata(j),U}decodeMiddle(h,g,y){let C=this.decodeMiddleCounters;C[0]=0,C[1]=0,C[2]=0,C[3]=0;let _=h.getSize(),T=g[1],j=0;for(let U=0;U<5&&T<_;U++){let ee=Dt.decodeDigit(h,C,T,Dt.L_AND_G_PATTERNS);y+=String.fromCharCode(48+ee%10);for(let oe of C)T+=oe;ee>=10&&(j|=1<<4-U),U!==4&&(T=h.getNextSet(T),T=h.getNextUnset(T))}if(y.length!==5)throw new W;let F=this.determineCheckDigit(j);if(Pt.extensionChecksum(y.toString())!==F)throw new W;return T}static extensionChecksum(h){let g=h.length,y=0;for(let C=g-2;C>=0;C-=2)y+=h.charAt(C).charCodeAt(0)-48;y*=3;for(let C=g-1;C>=0;C-=2)y+=h.charAt(C).charCodeAt(0)-48;return y*=3,y%10}determineCheckDigit(h){for(let g=0;g<10;g++)if(h===this.CHECK_DIGIT_ENCODINGS[g])return g;throw new W}static parseExtensionString(h){if(h.length!==5)return null;let g=Pt.parseExtension5String(h);return g==null?null:new Map([[ne.SUGGESTED_PRICE,g]])}static parseExtension5String(h){let g;switch(h.charAt(0)){case"0":g="";break;case"5":g="$";break;case"9":switch(h){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}g="";break;default:g="";break}let y=parseInt(h.substring(1)),C=(y/100).toString(),_=y%100,T=_<10?"0"+_:_.toString();return g+C+"."+T}}class Cr{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(h,g,y){let C=this.decodeRowStringBuffer,_=this.decodeMiddle(g,y,C),T=C.toString(),j=Cr.parseExtensionString(T),F=[new ht((y[0]+y[1])/2,h),new ht(_,h)],U=new V(T,null,0,F,ie.UPC_EAN_EXTENSION,new Date().getTime());return j!=null&&U.putAllMetadata(j),U}decodeMiddle(h,g,y){let C=this.decodeMiddleCounters;C[0]=0,C[1]=0,C[2]=0,C[3]=0;let _=h.getSize(),T=g[1],j=0;for(let F=0;F<2&&T<_;F++){let U=Dt.decodeDigit(h,C,T,Dt.L_AND_G_PATTERNS);y+=String.fromCharCode(48+U%10);for(let ee of C)T+=ee;U>=10&&(j|=1<<1-F),F!==1&&(T=h.getNextSet(T),T=h.getNextUnset(T))}if(y.length!==2)throw new W;if(parseInt(y.toString())%4!==j)throw new W;return T}static parseExtensionString(h){return h.length!==2?null:new Map([[ne.ISSUE_NUMBER,parseInt(h)]])}}class wn{static decodeRow(h,g,y){let C=Dt.findGuardPattern(g,y,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Pt().decodeRow(h,g,C)}catch{return new Cr().decodeRow(h,g,C)}}}wn.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class fr extends Dt{constructor(){super(),this.decodeRowStringBuffer="",fr.L_AND_G_PATTERNS=fr.L_PATTERNS.map(h=>Int32Array.from(h));for(let h=10;h<20;h++){let g=fr.L_PATTERNS[h-10],y=new Int32Array(g.length);for(let C=0;C<g.length;C++)y[C]=g[g.length-C-1];fr.L_AND_G_PATTERNS[h]=y}}decodeRow(h,g,y){let C=fr.findStartGuardPattern(g),_=y==null?null:y.get(R.NEED_RESULT_POINT_CALLBACK);if(_!=null){const vt=new ht((C[0]+C[1])/2,h);_.foundPossibleResultPoint(vt)}let T=this.decodeMiddle(g,C,this.decodeRowStringBuffer),j=T.rowOffset,F=T.resultString;if(_!=null){const vt=new ht(j,h);_.foundPossibleResultPoint(vt)}let U=this.decodeEnd(g,j);if(_!=null){const vt=new ht((U[0]+U[1])/2,h);_.foundPossibleResultPoint(vt)}let ee=U[1],oe=ee+(ee-U[0]);if(oe>=g.getSize()||!g.isRange(ee,oe,!1))throw new W;let xe=F.toString();if(xe.length<8)throw new O;if(!fr.checkChecksum(xe))throw new m;let Oe=(C[1]+C[0])/2,ue=(U[1]+U[0])/2,Se=this.getBarcodeFormat(),Ae=[new ht(Oe,h),new ht(ue,h)],Be=new V(xe,null,0,Ae,Se,new Date().getTime()),lt=0;try{let vt=wn.decodeRow(h,g,U[1]);Be.putMetadata(ne.UPC_EAN_EXTENSION,vt.getText()),Be.putAllMetadata(vt.getResultMetadata()),Be.addResultPoints(vt.getResultPoints()),lt=vt.getText().length}catch{}let gt=y==null?null:y.get(R.ALLOWED_EAN_EXTENSIONS);if(gt!=null){let vt=!1;for(let Zt in gt)if(lt.toString()===Zt){vt=!0;break}if(!vt)throw new W}return Be}decodeEnd(h,g){return fr.findGuardPattern(h,g,!1,fr.START_END_PATTERN,new Int32Array(fr.START_END_PATTERN.length).fill(0))}static checkChecksum(h){return fr.checkStandardUPCEANChecksum(h)}static checkStandardUPCEANChecksum(h){let g=h.length;if(g===0)return!1;let y=parseInt(h.charAt(g-1),10);return fr.getStandardUPCEANChecksum(h.substring(0,g-1))===y}static getStandardUPCEANChecksum(h){let g=h.length,y=0;for(let C=g-1;C>=0;C-=2){let _=h.charAt(C).charCodeAt(0)-48;if(_<0||_>9)throw new O;y+=_}y*=3;for(let C=g-2;C>=0;C-=2){let _=h.charAt(C).charCodeAt(0)-48;if(_<0||_>9)throw new O;y+=_}return(1e3-y)%10}}class Vi extends fr{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(h,g,y){let C=this.decodeMiddleCounters;C[0]=0,C[1]=0,C[2]=0,C[3]=0;let _=h.getSize(),T=g[1],j=0;for(let U=0;U<6&&T<_;U++){let ee=fr.decodeDigit(h,C,T,fr.L_AND_G_PATTERNS);y+=String.fromCharCode(48+ee%10);for(let oe of C)T+=oe;ee>=10&&(j|=1<<5-U)}y=Vi.determineFirstDigit(y,j),T=fr.findGuardPattern(h,T,!0,fr.MIDDLE_PATTERN,new Int32Array(fr.MIDDLE_PATTERN.length).fill(0))[1];for(let U=0;U<6&&T<_;U++){let ee=fr.decodeDigit(h,C,T,fr.L_PATTERNS);y+=String.fromCharCode(48+ee);for(let oe of C)T+=oe}return{rowOffset:T,resultString:y}}getBarcodeFormat(){return ie.EAN_13}static determineFirstDigit(h,g){for(let y=0;y<10;y++)if(g===this.FIRST_DIGIT_ENCODINGS[y])return h=String.fromCharCode(48+y)+h,h;throw new W}}Vi.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class jn extends fr{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(h,g,y){const C=this.decodeMiddleCounters;C[0]=0,C[1]=0,C[2]=0,C[3]=0;let _=h.getSize(),T=g[1];for(let F=0;F<4&&T<_;F++){let U=fr.decodeDigit(h,C,T,fr.L_PATTERNS);y+=String.fromCharCode(48+U);for(let ee of C)T+=ee}T=fr.findGuardPattern(h,T,!0,fr.MIDDLE_PATTERN,new Int32Array(fr.MIDDLE_PATTERN.length).fill(0))[1];for(let F=0;F<4&&T<_;F++){let U=fr.decodeDigit(h,C,T,fr.L_PATTERNS);y+=String.fromCharCode(48+U);for(let ee of C)T+=ee}return{rowOffset:T,resultString:y}}getBarcodeFormat(){return ie.EAN_8}}class Jo extends fr{constructor(){super(...arguments),this.ean13Reader=new Vi}getBarcodeFormat(){return ie.UPC_A}decode(h,g){return this.maybeReturnResult(this.ean13Reader.decode(h))}decodeRow(h,g,y){return this.maybeReturnResult(this.ean13Reader.decodeRow(h,g,y))}decodeMiddle(h,g,y){return this.ean13Reader.decodeMiddle(h,g,y)}maybeReturnResult(h){let g=h.getText();if(g.charAt(0)==="0"){let y=new V(g.substring(1),null,null,h.getResultPoints(),ie.UPC_A);return h.getResultMetadata()!=null&&y.putAllMetadata(h.getResultMetadata()),y}else throw new W}reset(){this.ean13Reader.reset()}}class We extends fr{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(h,g,y){const C=this.decodeMiddleCounters.map(U=>U);C[0]=0,C[1]=0,C[2]=0,C[3]=0;const _=h.getSize();let T=g[1],j=0;for(let U=0;U<6&&T<_;U++){const ee=We.decodeDigit(h,C,T,We.L_AND_G_PATTERNS);y+=String.fromCharCode(48+ee%10);for(let oe of C)T+=oe;ee>=10&&(j|=1<<5-U)}let F=We.determineNumSysAndCheckDigit(y,j);return{rowOffset:T,resultString:F}}decodeEnd(h,g){return We.findGuardPatternWithoutCounters(h,g,!0,We.MIDDLE_END_PATTERN)}checkChecksum(h){return fr.checkChecksum(We.convertUPCEtoUPCA(h))}static determineNumSysAndCheckDigit(h,g){for(let y=0;y<=1;y++)for(let C=0;C<10;C++)if(g===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[y][C]){let _=String.fromCharCode(48+y),T=String.fromCharCode(48+C);return _+h+T}throw W.getNotFoundInstance()}getBarcodeFormat(){return ie.UPC_E}static convertUPCEtoUPCA(h){const g=h.slice(1,7).split("").map(_=>_.charCodeAt(0)),y=new te;y.append(h.charAt(0));let C=g[5];switch(C){case 0:case 1:case 2:y.appendChars(g,0,2),y.append(C),y.append("0000"),y.appendChars(g,2,3);break;case 3:y.appendChars(g,0,3),y.append("00000"),y.appendChars(g,3,2);break;case 4:y.appendChars(g,0,4),y.append("00000"),y.append(g[4]);break;default:y.appendChars(g,0,5),y.append("0000"),y.append(C);break}return h.length>=8&&y.append(h.charAt(7)),y.toString()}}We.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),We.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Je extends je{constructor(h){super();let g=h==null?null:h.get(R.POSSIBLE_FORMATS),y=[];n(g)?(y.push(new Vi),y.push(new Jo),y.push(new jn),y.push(new We)):(g.indexOf(ie.EAN_13)>-1&&y.push(new Vi),g.indexOf(ie.UPC_A)>-1&&y.push(new Jo),g.indexOf(ie.EAN_8)>-1&&y.push(new jn),g.indexOf(ie.UPC_E)>-1&&y.push(new We)),this.readers=y}decodeRow(h,g,y){for(let C of this.readers)try{const _=C.decodeRow(h,g,y),T=_.getBarcodeFormat()===ie.EAN_13&&_.getText().charAt(0)==="0",j=y==null?null:y.get(R.POSSIBLE_FORMATS),F=j==null||j.includes(ie.UPC_A);if(T&&F){const U=_.getRawBytes(),ee=new V(_.getText().substring(1),U,U?U.length:null,_.getResultPoints(),ie.UPC_A);return ee.putAllMetadata(_.getResultMetadata()),ee}return _}catch{}throw new W}reset(){for(let h of this.readers)h.reset()}}class rt extends je{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(h,g){for(let y=0;y<g.length;y++)if(je.patternMatchVariance(h,g[y],rt.MAX_INDIVIDUAL_VARIANCE)<rt.MAX_AVG_VARIANCE)return y;throw new W}static count(h){return ut.sum(new Int32Array(h))}static increment(h,g){let y=0,C=g[0];for(let _=1;_<h.length;_++)g[_]>C&&(C=g[_],y=_);h[y]++}static decrement(h,g){let y=0,C=g[0];for(let _=1;_<h.length;_++)g[_]<C&&(C=g[_],y=_);h[y]--}static isFinderPattern(h){let g=h[0]+h[1],y=g+h[2]+h[3],C=g/y;if(C>=rt.MIN_FINDER_PATTERN_RATIO&&C<=rt.MAX_FINDER_PATTERN_RATIO){let _=Number.MAX_SAFE_INTEGER,T=Number.MIN_SAFE_INTEGER;for(let j of h)j>T&&(T=j),j<_&&(_=j);return T<10*_}return!1}}rt.MAX_AVG_VARIANCE=.2,rt.MAX_INDIVIDUAL_VARIANCE=.45,rt.MIN_FINDER_PATTERN_RATIO=9.5/12,rt.MAX_FINDER_PATTERN_RATIO=12.5/14;class _t{constructor(h,g){this.value=h,this.checksumPortion=g}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(h){if(!(h instanceof _t))return!1;const g=h;return this.value===g.value&&this.checksumPortion===g.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ut{constructor(h,g,y,C,_){this.value=h,this.startEnd=g,this.value=h,this.startEnd=g,this.resultPoints=new Array,this.resultPoints.push(new ht(y,_)),this.resultPoints.push(new ht(C,_))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(h){if(!(h instanceof Ut))return!1;const g=h;return this.value===g.value}hashCode(){return this.value}}class ir{constructor(){}static getRSSvalue(h,g,y){let C=0;for(let F of h)C+=F;let _=0,T=0,j=h.length;for(let F=0;F<j-1;F++){let U;for(U=1,T|=1<<F;U<h[F];U++,T&=~(1<<F)){let ee=ir.combins(C-U-1,j-F-2);if(y&&T===0&&C-U-(j-F-1)>=j-F-1&&(ee-=ir.combins(C-U-(j-F),j-F-2)),j-F-1>1){let oe=0;for(let xe=C-U-(j-F-2);xe>g;xe--)oe+=ir.combins(C-U-xe-1,j-F-3);ee-=oe*(j-1-F)}else C-U>g&&ee--;_+=ee}C-=U}return _}static combins(h,g){let y,C;h-g>g?(C=g,y=h-g):(C=h-g,y=g);let _=1,T=1;for(let j=h;j>y;j--)_*=j,T<=C&&(_/=T,T++);for(;T<=C;)_/=T,T++;return _}}class tr{static buildBitArray(h){let g=h.length*2-1;h[h.length-1].getRightChar()==null&&(g-=1);let y=12*g,C=new N(y),_=0,j=h[0].getRightChar().getValue();for(let F=11;F>=0;--F)j&1<<F&&C.set(_),_++;for(let F=1;F<h.length;++F){let U=h[F],ee=U.getLeftChar().getValue();for(let oe=11;oe>=0;--oe)ee&1<<oe&&C.set(_),_++;if(U.getRightChar()!=null){let oe=U.getRightChar().getValue();for(let xe=11;xe>=0;--xe)oe&1<<xe&&C.set(_),_++}}return C}}class $t{constructor(h,g){g?this.decodedInformation=null:(this.finished=h,this.decodedInformation=g)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class kr{constructor(h){this.newPosition=h}getNewPosition(){return this.newPosition}}class Jt extends kr{constructor(h,g){super(h),this.value=g}getValue(){return this.value}isFNC1(){return this.value===Jt.FNC1}}Jt.FNC1="$";class Un extends kr{constructor(h,g,y){super(h),y?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=g}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class de extends kr{constructor(h,g,y){if(super(h),g<0||g>10||y<0||y>10)throw new O;this.firstDigit=g,this.secondDigit=y}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===de.FNC1}isSecondDigitFNC1(){return this.secondDigit===de.FNC1}isAnyFNC1(){return this.firstDigit===de.FNC1||this.secondDigit===de.FNC1}}de.FNC1=10;class he{constructor(){}static parseFieldsInGeneralPurpose(h){if(!h)return null;if(h.length<2)throw new W;let g=h.substring(0,2);for(let _ of he.TWO_DIGIT_DATA_LENGTH)if(_[0]===g)return _[1]===he.VARIABLE_LENGTH?he.processVariableAI(2,_[2],h):he.processFixedAI(2,_[1],h);if(h.length<3)throw new W;let y=h.substring(0,3);for(let _ of he.THREE_DIGIT_DATA_LENGTH)if(_[0]===y)return _[1]===he.VARIABLE_LENGTH?he.processVariableAI(3,_[2],h):he.processFixedAI(3,_[1],h);for(let _ of he.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(_[0]===y)return _[1]===he.VARIABLE_LENGTH?he.processVariableAI(4,_[2],h):he.processFixedAI(4,_[1],h);if(h.length<4)throw new W;let C=h.substring(0,4);for(let _ of he.FOUR_DIGIT_DATA_LENGTH)if(_[0]===C)return _[1]===he.VARIABLE_LENGTH?he.processVariableAI(4,_[2],h):he.processFixedAI(4,_[1],h);throw new W}static processFixedAI(h,g,y){if(y.length<h)throw new W;let C=y.substring(0,h);if(y.length<h+g)throw new W;let _=y.substring(h,h+g),T=y.substring(h+g),j="("+C+")"+_,F=he.parseFieldsInGeneralPurpose(T);return F==null?j:j+F}static processVariableAI(h,g,y){let C=y.substring(0,h),_;y.length<h+g?_=y.length:_=h+g;let T=y.substring(h,_),j=y.substring(_),F="("+C+")"+T,U=he.parseFieldsInGeneralPurpose(j);return U==null?F:F+U}}he.VARIABLE_LENGTH=[],he.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",he.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",he.VARIABLE_LENGTH,20],["22",he.VARIABLE_LENGTH,29],["30",he.VARIABLE_LENGTH,8],["37",he.VARIABLE_LENGTH,8],["90",he.VARIABLE_LENGTH,30],["91",he.VARIABLE_LENGTH,30],["92",he.VARIABLE_LENGTH,30],["93",he.VARIABLE_LENGTH,30],["94",he.VARIABLE_LENGTH,30],["95",he.VARIABLE_LENGTH,30],["96",he.VARIABLE_LENGTH,30],["97",he.VARIABLE_LENGTH,3],["98",he.VARIABLE_LENGTH,30],["99",he.VARIABLE_LENGTH,30]],he.THREE_DIGIT_DATA_LENGTH=[["240",he.VARIABLE_LENGTH,30],["241",he.VARIABLE_LENGTH,30],["242",he.VARIABLE_LENGTH,6],["250",he.VARIABLE_LENGTH,30],["251",he.VARIABLE_LENGTH,30],["253",he.VARIABLE_LENGTH,17],["254",he.VARIABLE_LENGTH,20],["400",he.VARIABLE_LENGTH,30],["401",he.VARIABLE_LENGTH,30],["402",17],["403",he.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",he.VARIABLE_LENGTH,20],["421",he.VARIABLE_LENGTH,15],["422",3],["423",he.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],he.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",he.VARIABLE_LENGTH,15],["391",he.VARIABLE_LENGTH,18],["392",he.VARIABLE_LENGTH,15],["393",he.VARIABLE_LENGTH,18],["703",he.VARIABLE_LENGTH,30]],he.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",he.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",he.VARIABLE_LENGTH,20],["8003",he.VARIABLE_LENGTH,30],["8004",he.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",he.VARIABLE_LENGTH,30],["8008",he.VARIABLE_LENGTH,12],["8018",18],["8020",he.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",he.VARIABLE_LENGTH,70],["8200",he.VARIABLE_LENGTH,70]];class we{constructor(h){this.buffer=new te,this.information=h}decodeAllCodes(h,g){let y=g,C=null;do{let _=this.decodeGeneralPurposeField(y,C),T=he.parseFieldsInGeneralPurpose(_.getNewString());if(T!=null&&h.append(T),_.isRemaining()?C=""+_.getRemainingValue():C=null,y===_.getNewPosition())break;y=_.getNewPosition()}while(!0);return h.toString()}isStillNumeric(h){if(h+7>this.information.getSize())return h+4<=this.information.getSize();for(let g=h;g<h+3;++g)if(this.information.get(g))return!0;return this.information.get(h+3)}decodeNumeric(h){if(h+7>this.information.getSize()){let _=this.extractNumericValueFromBitArray(h,4);return _===0?new de(this.information.getSize(),de.FNC1,de.FNC1):new de(this.information.getSize(),_-1,de.FNC1)}let g=this.extractNumericValueFromBitArray(h,7),y=(g-8)/11,C=(g-8)%11;return new de(h+7,y,C)}extractNumericValueFromBitArray(h,g){return we.extractNumericValueFromBitArray(this.information,h,g)}static extractNumericValueFromBitArray(h,g,y){let C=0;for(let _=0;_<y;++_)h.get(g+_)&&(C|=1<<y-_-1);return C}decodeGeneralPurposeField(h,g){this.buffer.setLengthToZero(),g!=null&&this.buffer.append(g),this.current.setPosition(h);let y=this.parseBlocks();return y!=null&&y.isRemaining()?new Un(this.current.getPosition(),this.buffer.toString(),y.getRemainingValue()):new Un(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let h,g;do{let y=this.current.getPosition();if(this.current.isAlpha()?(g=this.parseAlphaBlock(),h=g.isFinished()):this.current.isIsoIec646()?(g=this.parseIsoIec646Block(),h=g.isFinished()):(g=this.parseNumericBlock(),h=g.isFinished()),!(y!==this.current.getPosition())&&!h)break}while(!h);return g.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let h=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(h.getNewPosition()),h.isFirstDigitFNC1()){let g;return h.isSecondDigitFNC1()?g=new Un(this.current.getPosition(),this.buffer.toString()):g=new Un(this.current.getPosition(),this.buffer.toString(),h.getSecondDigit()),new $t(!0,g)}if(this.buffer.append(h.getFirstDigit()),h.isSecondDigitFNC1()){let g=new Un(this.current.getPosition(),this.buffer.toString());return new $t(!0,g)}this.buffer.append(h.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new $t(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let h=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(h.getNewPosition()),h.isFNC1()){let g=new Un(this.current.getPosition(),this.buffer.toString());return new $t(!0,g)}this.buffer.append(h.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new $t(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let h=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(h.getNewPosition()),h.isFNC1()){let g=new Un(this.current.getPosition(),this.buffer.toString());return new $t(!0,g)}this.buffer.append(h.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new $t(!1)}isStillIsoIec646(h){if(h+5>this.information.getSize())return!1;let g=this.extractNumericValueFromBitArray(h,5);if(g>=5&&g<16)return!0;if(h+7>this.information.getSize())return!1;let y=this.extractNumericValueFromBitArray(h,7);if(y>=64&&y<116)return!0;if(h+8>this.information.getSize())return!1;let C=this.extractNumericValueFromBitArray(h,8);return C>=232&&C<253}decodeIsoIec646(h){let g=this.extractNumericValueFromBitArray(h,5);if(g===15)return new Jt(h+5,Jt.FNC1);if(g>=5&&g<15)return new Jt(h+5,"0"+(g-5));let y=this.extractNumericValueFromBitArray(h,7);if(y>=64&&y<90)return new Jt(h+7,""+(y+1));if(y>=90&&y<116)return new Jt(h+7,""+(y+7));let C=this.extractNumericValueFromBitArray(h,8),_;switch(C){case 232:_="!";break;case 233:_='"';break;case 234:_="%";break;case 235:_="&";break;case 236:_="'";break;case 237:_="(";break;case 238:_=")";break;case 239:_="*";break;case 240:_="+";break;case 241:_=",";break;case 242:_="-";break;case 243:_=".";break;case 244:_="/";break;case 245:_=":";break;case 246:_=";";break;case 247:_="<";break;case 248:_="=";break;case 249:_=">";break;case 250:_="?";break;case 251:_="_";break;case 252:_=" ";break;default:throw new O}return new Jt(h+8,_)}isStillAlpha(h){if(h+5>this.information.getSize())return!1;let g=this.extractNumericValueFromBitArray(h,5);if(g>=5&&g<16)return!0;if(h+6>this.information.getSize())return!1;let y=this.extractNumericValueFromBitArray(h,6);return y>=16&&y<63}decodeAlphanumeric(h){let g=this.extractNumericValueFromBitArray(h,5);if(g===15)return new Jt(h+5,Jt.FNC1);if(g>=5&&g<15)return new Jt(h+5,"0"+(g-5));let y=this.extractNumericValueFromBitArray(h,6);if(y>=32&&y<58)return new Jt(h+6,""+(y+33));let C;switch(y){case 58:C="*";break;case 59:C=",";break;case 60:C="-";break;case 61:C=".";break;case 62:C="/";break;default:throw new ze("Decoding invalid alphanumeric value: "+y)}return new Jt(h+6,C)}isAlphaTo646ToAlphaLatch(h){if(h+1>this.information.getSize())return!1;for(let g=0;g<5&&g+h<this.information.getSize();++g)if(g===2){if(!this.information.get(h+2))return!1}else if(this.information.get(h+g))return!1;return!0}isAlphaOr646ToNumericLatch(h){if(h+3>this.information.getSize())return!1;for(let g=h;g<h+3;++g)if(this.information.get(g))return!1;return!0}isNumericToAlphaNumericLatch(h){if(h+1>this.information.getSize())return!1;for(let g=0;g<4&&g+h<this.information.getSize();++g)if(this.information.get(h+g))return!1;return!0}}class _e{constructor(h){this.information=h,this.generalDecoder=new we(h)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class pe extends _e{constructor(h){super(h)}encodeCompressedGtin(h,g){h.append("(01)");let y=h.length();h.append("9"),this.encodeCompressedGtinWithoutAI(h,g,y)}encodeCompressedGtinWithoutAI(h,g,y){for(let C=0;C<4;++C){let _=this.getGeneralDecoder().extractNumericValueFromBitArray(g+10*C,10);_/100===0&&h.append("0"),_/10===0&&h.append("0"),h.append(_)}pe.appendCheckDigit(h,y)}static appendCheckDigit(h,g){let y=0;for(let C=0;C<13;C++){let _=h.charAt(C+g).charCodeAt(0)-48;y+=C&1?_:3*_}y=10-y%10,y===10&&(y=0),h.append(y)}}pe.GTIN_SIZE=40;class ge extends pe{constructor(h){super(h)}parseInformation(){let h=new te;h.append("(01)");let g=h.length(),y=this.getGeneralDecoder().extractNumericValueFromBitArray(ge.HEADER_SIZE,4);return h.append(y),this.encodeCompressedGtinWithoutAI(h,ge.HEADER_SIZE+4,g),this.getGeneralDecoder().decodeAllCodes(h,ge.HEADER_SIZE+44)}}ge.HEADER_SIZE=4;class Fe extends _e{constructor(h){super(h)}parseInformation(){let h=new te;return this.getGeneralDecoder().decodeAllCodes(h,Fe.HEADER_SIZE)}}Fe.HEADER_SIZE=5;class it extends pe{constructor(h){super(h)}encodeCompressedWeight(h,g,y){let C=this.getGeneralDecoder().extractNumericValueFromBitArray(g,y);this.addWeightCode(h,C);let _=this.checkWeight(C),T=1e5;for(let j=0;j<5;++j)_/T===0&&h.append("0"),T/=10;h.append(_)}}class Ge extends it{constructor(h){super(h)}parseInformation(){if(this.getInformation().getSize()!=Ge.HEADER_SIZE+it.GTIN_SIZE+Ge.WEIGHT_SIZE)throw new W;let h=new te;return this.encodeCompressedGtin(h,Ge.HEADER_SIZE),this.encodeCompressedWeight(h,Ge.HEADER_SIZE+it.GTIN_SIZE,Ge.WEIGHT_SIZE),h.toString()}}Ge.HEADER_SIZE=5,Ge.WEIGHT_SIZE=15;class Ye extends Ge{constructor(h){super(h)}addWeightCode(h,g){h.append("(3103)")}checkWeight(h){return h}}class Ze extends Ge{constructor(h){super(h)}addWeightCode(h,g){g<1e4?h.append("(3202)"):h.append("(3203)")}checkWeight(h){return h<1e4?h:h-1e4}}class wt extends pe{constructor(h){super(h)}parseInformation(){if(this.getInformation().getSize()<wt.HEADER_SIZE+pe.GTIN_SIZE)throw new W;let h=new te;this.encodeCompressedGtin(h,wt.HEADER_SIZE);let g=this.getGeneralDecoder().extractNumericValueFromBitArray(wt.HEADER_SIZE+pe.GTIN_SIZE,wt.LAST_DIGIT_SIZE);h.append("(392"),h.append(g),h.append(")");let y=this.getGeneralDecoder().decodeGeneralPurposeField(wt.HEADER_SIZE+pe.GTIN_SIZE+wt.LAST_DIGIT_SIZE,null);return h.append(y.getNewString()),h.toString()}}wt.HEADER_SIZE=8,wt.LAST_DIGIT_SIZE=2;class At extends pe{constructor(h){super(h)}parseInformation(){if(this.getInformation().getSize()<At.HEADER_SIZE+pe.GTIN_SIZE)throw new W;let h=new te;this.encodeCompressedGtin(h,At.HEADER_SIZE);let g=this.getGeneralDecoder().extractNumericValueFromBitArray(At.HEADER_SIZE+pe.GTIN_SIZE,At.LAST_DIGIT_SIZE);h.append("(393"),h.append(g),h.append(")");let y=this.getGeneralDecoder().extractNumericValueFromBitArray(At.HEADER_SIZE+pe.GTIN_SIZE+At.LAST_DIGIT_SIZE,At.FIRST_THREE_DIGITS_SIZE);y/100==0&&h.append("0"),y/10==0&&h.append("0"),h.append(y);let C=this.getGeneralDecoder().decodeGeneralPurposeField(At.HEADER_SIZE+pe.GTIN_SIZE+At.LAST_DIGIT_SIZE+At.FIRST_THREE_DIGITS_SIZE,null);return h.append(C.getNewString()),h.toString()}}At.HEADER_SIZE=8,At.LAST_DIGIT_SIZE=2,At.FIRST_THREE_DIGITS_SIZE=10;class dt extends it{constructor(h,g,y){super(h),this.dateCode=y,this.firstAIdigits=g}parseInformation(){if(this.getInformation().getSize()!=dt.HEADER_SIZE+dt.GTIN_SIZE+dt.WEIGHT_SIZE+dt.DATE_SIZE)throw new W;let h=new te;return this.encodeCompressedGtin(h,dt.HEADER_SIZE),this.encodeCompressedWeight(h,dt.HEADER_SIZE+dt.GTIN_SIZE,dt.WEIGHT_SIZE),this.encodeCompressedDate(h,dt.HEADER_SIZE+dt.GTIN_SIZE+dt.WEIGHT_SIZE),h.toString()}encodeCompressedDate(h,g){let y=this.getGeneralDecoder().extractNumericValueFromBitArray(g,dt.DATE_SIZE);if(y==38400)return;h.append("("),h.append(this.dateCode),h.append(")");let C=y%32;y/=32;let _=y%12+1;y/=12;let T=y;T/10==0&&h.append("0"),h.append(T),_/10==0&&h.append("0"),h.append(_),C/10==0&&h.append("0"),h.append(C)}addWeightCode(h,g){h.append("("),h.append(this.firstAIdigits),h.append(g/1e5),h.append(")")}checkWeight(h){return h%1e5}}dt.HEADER_SIZE=8,dt.WEIGHT_SIZE=20,dt.DATE_SIZE=16;function St(se){try{if(se.get(1))return new ge(se);if(!se.get(2))return new Fe(se);switch(we.extractNumericValueFromBitArray(se,1,4)){case 4:return new Ye(se);case 5:return new Ze(se)}switch(we.extractNumericValueFromBitArray(se,1,5)){case 12:return new wt(se);case 13:return new At(se)}switch(we.extractNumericValueFromBitArray(se,1,7)){case 56:return new dt(se,"310","11");case 57:return new dt(se,"320","11");case 58:return new dt(se,"310","13");case 59:return new dt(se,"320","13");case 60:return new dt(se,"310","15");case 61:return new dt(se,"320","15");case 62:return new dt(se,"310","17");case 63:return new dt(se,"320","17")}}catch(h){throw console.log(h),new ze("unknown decoder: "+se)}}class Ot{constructor(h,g,y,C){this.leftchar=h,this.rightchar=g,this.finderpattern=y,this.maybeLast=C}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(h,g){return h instanceof Ot?Ot.equalsOrNull(h.leftchar,g.leftchar)&&Ot.equalsOrNull(h.rightchar,g.rightchar)&&Ot.equalsOrNull(h.finderpattern,g.finderpattern):!1}static equalsOrNull(h,g){return h===null?g===null:Ot.equals(h,g)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Kt{constructor(h,g,y){this.pairs=h,this.rowNumber=g,this.wasReversed=y}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(h){return this.checkEqualitity(this,h)}toString(){return"{ "+this.pairs+" }"}equals(h,g){return h instanceof Kt?this.checkEqualitity(h,g)&&h.wasReversed===g.wasReversed:!1}checkEqualitity(h,g){if(!h||!g)return;let y;return h.forEach((C,_)=>{g.forEach(T=>{C.getLeftChar().getValue()===T.getLeftChar().getValue()&&C.getRightChar().getValue()===T.getRightChar().getValue()&&C.getFinderPatter().getValue()===T.getFinderPatter().getValue()&&(y=!0)})}),y}}class at extends rt{constructor(h){super(...arguments),this.pairs=new Array(at.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=h===!0}decodeRow(h,g,y){this.pairs.length=0,this.startFromEven=!1;try{return at.constructResult(this.decodeRow2pairs(h,g))}catch(C){this.verbose&&console.log(C)}return this.pairs.length=0,this.startFromEven=!0,at.constructResult(this.decodeRow2pairs(h,g))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(h,g){let y=!1;for(;!y;)try{this.pairs.push(this.retrieveNextPair(g,this.pairs,h))}catch(_){if(_ instanceof W){if(!this.pairs.length)throw new W;y=!0}}if(this.checkChecksum())return this.pairs;let C;if(this.rows.length?C=!0:C=!1,this.storeRow(h,!1),C){let _=this.checkRowsBoolean(!1);if(_!=null||(_=this.checkRowsBoolean(!0),_!=null))return _}throw new W}checkRowsBoolean(h){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,h&&(this.rows=this.rows.reverse());let g=null;try{g=this.checkRows(new Array,0)}catch(y){this.verbose&&console.log(y)}return h&&(this.rows=this.rows.reverse()),g}checkRows(h,g){for(let y=g;y<this.rows.length;y++){let C=this.rows[y];this.pairs.length=0;for(let T of h)this.pairs.push(T.getPairs());if(this.pairs.push(C.getPairs()),!at.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let _=new Array(h);_.push(C);try{return this.checkRows(_,y+1)}catch(T){this.verbose&&console.log(T)}}throw new W}static isValidSequence(h){for(let g of at.FINDER_PATTERN_SEQUENCES){if(h.length>g.length)continue;let y=!0;for(let C=0;C<h.length;C++)if(h[C].getFinderPattern().getValue()!=g[C]){y=!1;break}if(y)return!0}return!1}storeRow(h,g){let y=0,C=!1,_=!1;for(;y<this.rows.length;){let T=this.rows[y];if(T.getRowNumber()>h){_=T.isEquivalent(this.pairs);break}C=T.isEquivalent(this.pairs),y++}_||C||at.isPartialRow(this.pairs,this.rows)||(this.rows.push(y,new Kt(this.pairs,h,g)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(h,g){for(let y of g)if(y.getPairs().length!==h.length){for(let C of y.getPairs())for(let _ of h)if(Ot.equals(C,_))break}}static isPartialRow(h,g){for(let y of g){let C=!0;for(let _ of h){let T=!1;for(let j of y.getPairs())if(_.equals(j)){T=!0;break}if(!T){C=!1;break}}if(C)return!0}return!1}getRows(){return this.rows}static constructResult(h){let g=tr.buildBitArray(h),C=St(g).parseInformation(),_=h[0].getFinderPattern().getResultPoints(),T=h[h.length-1].getFinderPattern().getResultPoints(),j=[_[0],_[1],T[0],T[1]];return new V(C,null,null,j,ie.RSS_EXPANDED,null)}checkChecksum(){let h=this.pairs.get(0),g=h.getLeftChar(),y=h.getRightChar();if(y==null)return!1;let C=y.getChecksumPortion(),_=2;for(let j=1;j<this.pairs.size();++j){let F=this.pairs.get(j);C+=F.getLeftChar().getChecksumPortion(),_++;let U=F.getRightChar();U!=null&&(C+=U.getChecksumPortion(),_++)}return C%=211,211*(_-4)+C==g.getValue()}static getNextSecondBar(h,g){let y;return h.get(g)?(y=h.getNextUnset(g),y=h.getNextSet(y)):(y=h.getNextSet(g),y=h.getNextUnset(y)),y}retrieveNextPair(h,g,y){let C=g.length%2==0;this.startFromEven&&(C=!C);let _,T=!0,j=-1;do this.findNextPair(h,g,j),_=this.parseFoundFinderPattern(h,y,C),_==null?j=at.getNextSecondBar(h,this.startEnd[0]):T=!1;while(T);let F=this.decodeDataCharacter(h,_,C,!0);if(!this.isEmptyPair(g)&&g[g.length-1].mustBeLast())throw new W;let U;try{U=this.decodeDataCharacter(h,_,C,!1)}catch(ee){U=null,this.verbose&&console.log(ee)}return new Ot(F,U,_,!0)}isEmptyPair(h){return h.length===0}findNextPair(h,g,y){let C=this.getDecodeFinderCounters();C[0]=0,C[1]=0,C[2]=0,C[3]=0;let _=h.getSize(),T;y>=0?T=y:this.isEmptyPair(g)?T=0:T=g[g.length-1].getFinderPattern().getStartEnd()[1];let j=g.length%2!=0;this.startFromEven&&(j=!j);let F=!1;for(;T<_&&(F=!h.get(T),!!F);)T++;let U=0,ee=T;for(let oe=T;oe<_;oe++)if(h.get(oe)!=F)C[U]++;else{if(U==3){if(j&&at.reverseCounters(C),at.isFinderPattern(C)){this.startEnd[0]=ee,this.startEnd[1]=oe;return}j&&at.reverseCounters(C),ee+=C[0]+C[1],C[0]=C[2],C[1]=C[3],C[2]=0,C[3]=0,U--}else U++;C[U]=1,F=!F}throw new W}static reverseCounters(h){let g=h.length;for(let y=0;y<g/2;++y){let C=h[y];h[y]=h[g-y-1],h[g-y-1]=C}}parseFoundFinderPattern(h,g,y){let C,_,T;if(y){let U=this.startEnd[0]-1;for(;U>=0&&!h.get(U);)U--;U++,C=this.startEnd[0]-U,_=U,T=this.startEnd[1]}else _=this.startEnd[0],T=h.getNextUnset(this.startEnd[1]+1),C=T-this.startEnd[1];let j=this.getDecodeFinderCounters();v.arraycopy(j,0,j,1,j.length-1),j[0]=C;let F;try{F=this.parseFinderValue(j,at.FINDER_PATTERNS)}catch{return null}return new Ut(F,[_,T],_,T,g)}decodeDataCharacter(h,g,y,C){let _=this.getDataCharacterCounters();for(let Yn=0;Yn<_.length;Yn++)_[Yn]=0;if(C)at.recordPatternInReverse(h,g.getStartEnd()[0],_);else{at.recordPattern(h,g.getStartEnd()[1],_);for(let Yn=0,Ii=_.length-1;Yn<Ii;Yn++,Ii--){let Ja=_[Yn];_[Yn]=_[Ii],_[Ii]=Ja}}let T=17,j=ut.sum(new Int32Array(_))/T,F=(g.getStartEnd()[1]-g.getStartEnd()[0])/15;if(Math.abs(j-F)/F>.3)throw new W;let U=this.getOddCounts(),ee=this.getEvenCounts(),oe=this.getOddRoundingErrors(),xe=this.getEvenRoundingErrors();for(let Yn=0;Yn<_.length;Yn++){let Ii=1*_[Yn]/j,Ja=Ii+.5;if(Ja<1){if(Ii<.3)throw new W;Ja=1}else if(Ja>8){if(Ii>8.7)throw new W;Ja=8}let Cu=Yn/2;Yn&1?(ee[Cu]=Ja,xe[Cu]=Ii-Ja):(U[Cu]=Ja,oe[Cu]=Ii-Ja)}this.adjustOddEvenCounts(T);let Oe=4*g.getValue()+(y?0:2)+(C?0:1)-1,ue=0,Se=0;for(let Yn=U.length-1;Yn>=0;Yn--){if(at.isNotA1left(g,y,C)){let Ii=at.WEIGHTS[Oe][2*Yn];Se+=U[Yn]*Ii}ue+=U[Yn]}let Ae=0;for(let Yn=ee.length-1;Yn>=0;Yn--)if(at.isNotA1left(g,y,C)){let Ii=at.WEIGHTS[Oe][2*Yn+1];Ae+=ee[Yn]*Ii}let Be=Se+Ae;if(ue&1||ue>13||ue<4)throw new W;let lt=(13-ue)/2,gt=at.SYMBOL_WIDEST[lt],vt=9-gt,Zt=ir.getRSSvalue(U,gt,!0),Fr=ir.getRSSvalue(ee,vt,!1),Hs=at.EVEN_TOTAL_SUBSET[lt],Ti=at.GSUM[lt],La=Zt*Hs+Fr+Ti;return new _t(La,Be)}static isNotA1left(h,g,y){return!(h.getValue()==0&&g&&y)}adjustOddEvenCounts(h){let g=ut.sum(new Int32Array(this.getOddCounts())),y=ut.sum(new Int32Array(this.getEvenCounts())),C=!1,_=!1;g>13?_=!0:g<4&&(C=!0);let T=!1,j=!1;y>13?j=!0:y<4&&(T=!0);let F=g+y-h,U=(g&1)==1,ee=(y&1)==0;if(F==1)if(U){if(ee)throw new W;_=!0}else{if(!ee)throw new W;j=!0}else if(F==-1)if(U){if(ee)throw new W;C=!0}else{if(!ee)throw new W;T=!0}else if(F==0){if(U){if(!ee)throw new W;g<y?(C=!0,j=!0):(_=!0,T=!0)}else if(ee)throw new W}else throw new W;if(C){if(_)throw new W;at.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(_&&at.decrement(this.getOddCounts(),this.getOddRoundingErrors()),T){if(j)throw new W;at.increment(this.getEvenCounts(),this.getOddRoundingErrors())}j&&at.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}at.SYMBOL_WIDEST=[7,5,4,3,1],at.EVEN_TOTAL_SUBSET=[4,20,52,104,204],at.GSUM=[0,348,1388,2948,3988],at.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],at.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],at.FINDER_PAT_A=0,at.FINDER_PAT_B=1,at.FINDER_PAT_C=2,at.FINDER_PAT_D=3,at.FINDER_PAT_E=4,at.FINDER_PAT_F=5,at.FINDER_PATTERN_SEQUENCES=[[at.FINDER_PAT_A,at.FINDER_PAT_A],[at.FINDER_PAT_A,at.FINDER_PAT_B,at.FINDER_PAT_B],[at.FINDER_PAT_A,at.FINDER_PAT_C,at.FINDER_PAT_B,at.FINDER_PAT_D],[at.FINDER_PAT_A,at.FINDER_PAT_E,at.FINDER_PAT_B,at.FINDER_PAT_D,at.FINDER_PAT_C],[at.FINDER_PAT_A,at.FINDER_PAT_E,at.FINDER_PAT_B,at.FINDER_PAT_D,at.FINDER_PAT_D,at.FINDER_PAT_F],[at.FINDER_PAT_A,at.FINDER_PAT_E,at.FINDER_PAT_B,at.FINDER_PAT_D,at.FINDER_PAT_E,at.FINDER_PAT_F,at.FINDER_PAT_F],[at.FINDER_PAT_A,at.FINDER_PAT_A,at.FINDER_PAT_B,at.FINDER_PAT_B,at.FINDER_PAT_C,at.FINDER_PAT_C,at.FINDER_PAT_D,at.FINDER_PAT_D],[at.FINDER_PAT_A,at.FINDER_PAT_A,at.FINDER_PAT_B,at.FINDER_PAT_B,at.FINDER_PAT_C,at.FINDER_PAT_C,at.FINDER_PAT_D,at.FINDER_PAT_E,at.FINDER_PAT_E],[at.FINDER_PAT_A,at.FINDER_PAT_A,at.FINDER_PAT_B,at.FINDER_PAT_B,at.FINDER_PAT_C,at.FINDER_PAT_C,at.FINDER_PAT_D,at.FINDER_PAT_E,at.FINDER_PAT_F,at.FINDER_PAT_F],[at.FINDER_PAT_A,at.FINDER_PAT_A,at.FINDER_PAT_B,at.FINDER_PAT_B,at.FINDER_PAT_C,at.FINDER_PAT_D,at.FINDER_PAT_D,at.FINDER_PAT_E,at.FINDER_PAT_E,at.FINDER_PAT_F,at.FINDER_PAT_F]],at.MAX_PAIRS=11;class Vn extends _t{constructor(h,g,y){super(h,g),this.count=0,this.finderPattern=y}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class $r extends rt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(h,g,y){const C=this.decodePair(g,!1,h,y);$r.addOrTally(this.possibleLeftPairs,C),g.reverse();let _=this.decodePair(g,!0,h,y);$r.addOrTally(this.possibleRightPairs,_),g.reverse();for(let T of this.possibleLeftPairs)if(T.getCount()>1){for(let j of this.possibleRightPairs)if(j.getCount()>1&&$r.checkChecksum(T,j))return $r.constructResult(T,j)}throw new W}static addOrTally(h,g){if(g==null)return;let y=!1;for(let C of h)if(C.getValue()===g.getValue()){C.incrementCount(),y=!0;break}y||h.push(g)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(h,g){let y=4537077*h.getValue()+g.getValue(),C=new String(y).toString(),_=new te;for(let U=13-C.length;U>0;U--)_.append("0");_.append(C);let T=0;for(let U=0;U<13;U++){let ee=_.charAt(U).charCodeAt(0)-48;T+=U&1?ee:3*ee}T=10-T%10,T===10&&(T=0),_.append(T.toString());let j=h.getFinderPattern().getResultPoints(),F=g.getFinderPattern().getResultPoints();return new V(_.toString(),null,0,[j[0],j[1],F[0],F[1]],ie.RSS_14,new Date().getTime())}static checkChecksum(h,g){let y=(h.getChecksumPortion()+16*g.getChecksumPortion())%79,C=9*h.getFinderPattern().getValue()+g.getFinderPattern().getValue();return C>72&&C--,C>8&&C--,y===C}decodePair(h,g,y,C){try{let _=this.findFinderPattern(h,g),T=this.parseFoundFinderPattern(h,y,g,_),j=C==null?null:C.get(R.NEED_RESULT_POINT_CALLBACK);if(j!=null){let ee=(_[0]+_[1])/2;g&&(ee=h.getSize()-1-ee),j.foundPossibleResultPoint(new ht(ee,y))}let F=this.decodeDataCharacter(h,T,!0),U=this.decodeDataCharacter(h,T,!1);return new Vn(1597*F.getValue()+U.getValue(),F.getChecksumPortion()+4*U.getChecksumPortion(),T)}catch{return null}}decodeDataCharacter(h,g,y){let C=this.getDataCharacterCounters();for(let Ae=0;Ae<C.length;Ae++)C[Ae]=0;if(y)je.recordPatternInReverse(h,g.getStartEnd()[0],C);else{je.recordPattern(h,g.getStartEnd()[1]+1,C);for(let Ae=0,Be=C.length-1;Ae<Be;Ae++,Be--){let lt=C[Ae];C[Ae]=C[Be],C[Be]=lt}}let _=y?16:15,T=ut.sum(new Int32Array(C))/_,j=this.getOddCounts(),F=this.getEvenCounts(),U=this.getOddRoundingErrors(),ee=this.getEvenRoundingErrors();for(let Ae=0;Ae<C.length;Ae++){let Be=C[Ae]/T,lt=Math.floor(Be+.5);lt<1?lt=1:lt>8&&(lt=8);let gt=Math.floor(Ae/2);Ae&1?(F[gt]=lt,ee[gt]=Be-lt):(j[gt]=lt,U[gt]=Be-lt)}this.adjustOddEvenCounts(y,_);let oe=0,xe=0;for(let Ae=j.length-1;Ae>=0;Ae--)xe*=9,xe+=j[Ae],oe+=j[Ae];let Oe=0,ue=0;for(let Ae=F.length-1;Ae>=0;Ae--)Oe*=9,Oe+=F[Ae],ue+=F[Ae];let Se=xe+3*Oe;if(y){if(oe&1||oe>12||oe<4)throw new W;let Ae=(12-oe)/2,Be=$r.OUTSIDE_ODD_WIDEST[Ae],lt=9-Be,gt=ir.getRSSvalue(j,Be,!1),vt=ir.getRSSvalue(F,lt,!0),Zt=$r.OUTSIDE_EVEN_TOTAL_SUBSET[Ae],Fr=$r.OUTSIDE_GSUM[Ae];return new _t(gt*Zt+vt+Fr,Se)}else{if(ue&1||ue>10||ue<4)throw new W;let Ae=(10-ue)/2,Be=$r.INSIDE_ODD_WIDEST[Ae],lt=9-Be,gt=ir.getRSSvalue(j,Be,!0),vt=ir.getRSSvalue(F,lt,!1),Zt=$r.INSIDE_ODD_TOTAL_SUBSET[Ae],Fr=$r.INSIDE_GSUM[Ae];return new _t(vt*Zt+gt+Fr,Se)}}findFinderPattern(h,g){let y=this.getDecodeFinderCounters();y[0]=0,y[1]=0,y[2]=0,y[3]=0;let C=h.getSize(),_=!1,T=0;for(;T<C&&(_=!h.get(T),g!==_);)T++;let j=0,F=T;for(let U=T;U<C;U++)if(h.get(U)!==_)y[j]++;else{if(j===3){if(rt.isFinderPattern(y))return[F,U];F+=y[0]+y[1],y[0]=y[2],y[1]=y[3],y[2]=0,y[3]=0,j--}else j++;y[j]=1,_=!_}throw new W}parseFoundFinderPattern(h,g,y,C){let _=h.get(C[0]),T=C[0]-1;for(;T>=0&&_!==h.get(T);)T--;T++;const j=C[0]-T,F=this.getDecodeFinderCounters(),U=new Int32Array(F.length);v.arraycopy(F,0,U,1,F.length-1),U[0]=j;const ee=this.parseFinderValue(U,$r.FINDER_PATTERNS);let oe=T,xe=C[1];return y&&(oe=h.getSize()-1-oe,xe=h.getSize()-1-xe),new Ut(ee,[T,C[1]],oe,xe,g)}adjustOddEvenCounts(h,g){let y=ut.sum(new Int32Array(this.getOddCounts())),C=ut.sum(new Int32Array(this.getEvenCounts())),_=!1,T=!1,j=!1,F=!1;h?(y>12?T=!0:y<4&&(_=!0),C>12?F=!0:C<4&&(j=!0)):(y>11?T=!0:y<5&&(_=!0),C>10?F=!0:C<4&&(j=!0));let U=y+C-g,ee=(y&1)===(h?1:0),oe=(C&1)===1;if(U===1)if(ee){if(oe)throw new W;T=!0}else{if(!oe)throw new W;F=!0}else if(U===-1)if(ee){if(oe)throw new W;_=!0}else{if(!oe)throw new W;j=!0}else if(U===0){if(ee){if(!oe)throw new W;y<C?(_=!0,F=!0):(T=!0,j=!0)}else if(oe)throw new W}else throw new W;if(_){if(T)throw new W;rt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(T&&rt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),j){if(F)throw new W;rt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}F&&rt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}$r.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],$r.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],$r.OUTSIDE_GSUM=[0,161,961,2015,2715],$r.INSIDE_GSUM=[0,336,1036,1516],$r.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],$r.INSIDE_ODD_WIDEST=[2,4,6,8],$r.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class wo extends je{constructor(h,g){super(),this.readers=[],this.verbose=g===!0;const y=h?h.get(R.POSSIBLE_FORMATS):null,C=h&&h.get(R.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;y?((y.includes(ie.EAN_13)||y.includes(ie.UPC_A)||y.includes(ie.EAN_8)||y.includes(ie.UPC_E))&&this.readers.push(new Je(h)),y.includes(ie.CODE_39)&&this.readers.push(new ot(C)),y.includes(ie.CODE_128)&&this.readers.push(new Ce),y.includes(ie.ITF)&&this.readers.push(new xt),y.includes(ie.RSS_14)&&this.readers.push(new $r),y.includes(ie.RSS_EXPANDED)&&this.readers.push(new at(this.verbose))):(this.readers.push(new Je(h)),this.readers.push(new ot),this.readers.push(new Je(h)),this.readers.push(new Ce),this.readers.push(new xt),this.readers.push(new $r),this.readers.push(new at(this.verbose)))}decodeRow(h,g,y){for(let C=0;C<this.readers.length;C++)try{return this.readers[C].decodeRow(h,g,y)}catch{}throw new W}reset(){this.readers.forEach(h=>h.reset())}}class gd extends ce{constructor(h=500,g){super(new wo(g),h,g)}}class gn{constructor(h,g,y){this.ecCodewords=h,this.ecBlocks=[g],y&&this.ecBlocks.push(y)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class en{constructor(h,g){this.count=h,this.dataCodewords=g}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class tn{constructor(h,g,y,C,_,T){this.versionNumber=h,this.symbolSizeRows=g,this.symbolSizeColumns=y,this.dataRegionSizeRows=C,this.dataRegionSizeColumns=_,this.ecBlocks=T;let j=0;const F=T.getECCodewords(),U=T.getECBlocks();for(let ee of U)j+=ee.getCount()*(ee.getDataCodewords()+F);this.totalCodewords=j}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(h,g){if(h&1||g&1)throw new O;for(let y of tn.VERSIONS)if(y.symbolSizeRows===h&&y.symbolSizeColumns===g)return y;throw new O}toString(){return""+this.versionNumber}static buildVersions(){return[new tn(1,10,10,8,8,new gn(5,new en(1,3))),new tn(2,12,12,10,10,new gn(7,new en(1,5))),new tn(3,14,14,12,12,new gn(10,new en(1,8))),new tn(4,16,16,14,14,new gn(12,new en(1,12))),new tn(5,18,18,16,16,new gn(14,new en(1,18))),new tn(6,20,20,18,18,new gn(18,new en(1,22))),new tn(7,22,22,20,20,new gn(20,new en(1,30))),new tn(8,24,24,22,22,new gn(24,new en(1,36))),new tn(9,26,26,24,24,new gn(28,new en(1,44))),new tn(10,32,32,14,14,new gn(36,new en(1,62))),new tn(11,36,36,16,16,new gn(42,new en(1,86))),new tn(12,40,40,18,18,new gn(48,new en(1,114))),new tn(13,44,44,20,20,new gn(56,new en(1,144))),new tn(14,48,48,22,22,new gn(68,new en(1,174))),new tn(15,52,52,24,24,new gn(42,new en(2,102))),new tn(16,64,64,14,14,new gn(56,new en(2,140))),new tn(17,72,72,16,16,new gn(36,new en(4,92))),new tn(18,80,80,18,18,new gn(48,new en(4,114))),new tn(19,88,88,20,20,new gn(56,new en(4,144))),new tn(20,96,96,22,22,new gn(68,new en(4,174))),new tn(21,104,104,24,24,new gn(56,new en(6,136))),new tn(22,120,120,18,18,new gn(68,new en(6,175))),new tn(23,132,132,20,20,new gn(62,new en(8,163))),new tn(24,144,144,22,22,new gn(62,new en(8,156),new en(2,155))),new tn(25,8,18,6,16,new gn(7,new en(1,5))),new tn(26,8,32,6,14,new gn(11,new en(1,10))),new tn(27,12,26,10,24,new gn(14,new en(1,16))),new tn(28,12,36,10,16,new gn(18,new en(1,22))),new tn(29,16,36,14,16,new gn(24,new en(1,32))),new tn(30,16,48,14,22,new gn(28,new en(1,49)))]}}tn.VERSIONS=tn.buildVersions();class So{constructor(h){const g=h.getHeight();if(g<8||g>144||g&1)throw new O;this.version=So.readVersion(h),this.mappingBitMatrix=this.extractDataRegion(h),this.readMappingMatrix=new Y(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(h){const g=h.getHeight(),y=h.getWidth();return tn.getVersionForDimensions(g,y)}readCodewords(){const h=new Int8Array(this.version.getTotalCodewords());let g=0,y=4,C=0;const _=this.mappingBitMatrix.getHeight(),T=this.mappingBitMatrix.getWidth();let j=!1,F=!1,U=!1,ee=!1;do if(y===_&&C===0&&!j)h[g++]=this.readCorner1(_,T)&255,y-=2,C+=2,j=!0;else if(y===_-2&&C===0&&T&3&&!F)h[g++]=this.readCorner2(_,T)&255,y-=2,C+=2,F=!0;else if(y===_+4&&C===2&&!(T&7)&&!U)h[g++]=this.readCorner3(_,T)&255,y-=2,C+=2,U=!0;else if(y===_-2&&C===0&&(T&7)===4&&!ee)h[g++]=this.readCorner4(_,T)&255,y-=2,C+=2,ee=!0;else{do y<_&&C>=0&&!this.readMappingMatrix.get(C,y)&&(h[g++]=this.readUtah(y,C,_,T)&255),y-=2,C+=2;while(y>=0&&C<T);y+=1,C+=3;do y>=0&&C<T&&!this.readMappingMatrix.get(C,y)&&(h[g++]=this.readUtah(y,C,_,T)&255),y+=2,C-=2;while(y<_&&C>=0);y+=3,C+=1}while(y<_||C<T);if(g!==this.version.getTotalCodewords())throw new O;return h}readModule(h,g,y,C){return h<0&&(h+=y,g+=4-(y+4&7)),g<0&&(g+=C,h+=4-(C+4&7)),this.readMappingMatrix.set(g,h),this.mappingBitMatrix.get(g,h)}readUtah(h,g,y,C){let _=0;return this.readModule(h-2,g-2,y,C)&&(_|=1),_<<=1,this.readModule(h-2,g-1,y,C)&&(_|=1),_<<=1,this.readModule(h-1,g-2,y,C)&&(_|=1),_<<=1,this.readModule(h-1,g-1,y,C)&&(_|=1),_<<=1,this.readModule(h-1,g,y,C)&&(_|=1),_<<=1,this.readModule(h,g-2,y,C)&&(_|=1),_<<=1,this.readModule(h,g-1,y,C)&&(_|=1),_<<=1,this.readModule(h,g,y,C)&&(_|=1),_}readCorner1(h,g){let y=0;return this.readModule(h-1,0,h,g)&&(y|=1),y<<=1,this.readModule(h-1,1,h,g)&&(y|=1),y<<=1,this.readModule(h-1,2,h,g)&&(y|=1),y<<=1,this.readModule(0,g-2,h,g)&&(y|=1),y<<=1,this.readModule(0,g-1,h,g)&&(y|=1),y<<=1,this.readModule(1,g-1,h,g)&&(y|=1),y<<=1,this.readModule(2,g-1,h,g)&&(y|=1),y<<=1,this.readModule(3,g-1,h,g)&&(y|=1),y}readCorner2(h,g){let y=0;return this.readModule(h-3,0,h,g)&&(y|=1),y<<=1,this.readModule(h-2,0,h,g)&&(y|=1),y<<=1,this.readModule(h-1,0,h,g)&&(y|=1),y<<=1,this.readModule(0,g-4,h,g)&&(y|=1),y<<=1,this.readModule(0,g-3,h,g)&&(y|=1),y<<=1,this.readModule(0,g-2,h,g)&&(y|=1),y<<=1,this.readModule(0,g-1,h,g)&&(y|=1),y<<=1,this.readModule(1,g-1,h,g)&&(y|=1),y}readCorner3(h,g){let y=0;return this.readModule(h-1,0,h,g)&&(y|=1),y<<=1,this.readModule(h-1,g-1,h,g)&&(y|=1),y<<=1,this.readModule(0,g-3,h,g)&&(y|=1),y<<=1,this.readModule(0,g-2,h,g)&&(y|=1),y<<=1,this.readModule(0,g-1,h,g)&&(y|=1),y<<=1,this.readModule(1,g-3,h,g)&&(y|=1),y<<=1,this.readModule(1,g-2,h,g)&&(y|=1),y<<=1,this.readModule(1,g-1,h,g)&&(y|=1),y}readCorner4(h,g){let y=0;return this.readModule(h-3,0,h,g)&&(y|=1),y<<=1,this.readModule(h-2,0,h,g)&&(y|=1),y<<=1,this.readModule(h-1,0,h,g)&&(y|=1),y<<=1,this.readModule(0,g-2,h,g)&&(y|=1),y<<=1,this.readModule(0,g-1,h,g)&&(y|=1),y<<=1,this.readModule(1,g-1,h,g)&&(y|=1),y<<=1,this.readModule(2,g-1,h,g)&&(y|=1),y<<=1,this.readModule(3,g-1,h,g)&&(y|=1),y}extractDataRegion(h){const g=this.version.getSymbolSizeRows(),y=this.version.getSymbolSizeColumns();if(h.getHeight()!==g)throw new f("Dimension of bitMatrix must match the version size");const C=this.version.getDataRegionSizeRows(),_=this.version.getDataRegionSizeColumns(),T=g/C|0,j=y/_|0,F=T*C,U=j*_,ee=new Y(U,F);for(let oe=0;oe<T;++oe){const xe=oe*C;for(let Oe=0;Oe<j;++Oe){const ue=Oe*_;for(let Se=0;Se<C;++Se){const Ae=oe*(C+2)+1+Se,Be=xe+Se;for(let lt=0;lt<_;++lt){const gt=Oe*(_+2)+1+lt;if(h.get(gt,Ae)){const vt=ue+lt;ee.set(vt,Be)}}}}}return ee}}class Zx{constructor(h,g){this.numDataCodewords=h,this.codewords=g}static getDataBlocks(h,g){const y=g.getECBlocks();let C=0;const _=y.getECBlocks();for(let Se of _)C+=Se.getCount();const T=new Array(C);let j=0;for(let Se of _)for(let Ae=0;Ae<Se.getCount();Ae++){const Be=Se.getDataCodewords(),lt=y.getECCodewords()+Be;T[j++]=new Zx(Be,new Uint8Array(lt))}const U=T[0].codewords.length-y.getECCodewords(),ee=U-1;let oe=0;for(let Se=0;Se<ee;Se++)for(let Ae=0;Ae<j;Ae++)T[Ae].codewords[Se]=h[oe++];const xe=g.getVersionNumber()===24,Oe=xe?8:j;for(let Se=0;Se<Oe;Se++)T[Se].codewords[U-1]=h[oe++];const ue=T[0].codewords.length;for(let Se=U;Se<ue;Se++)for(let Ae=0;Ae<j;Ae++){const Be=xe?(Ae+8)%j:Ae,lt=xe&&Be>7?Se-1:Se;T[Be].codewords[lt]=h[oe++]}if(oe!==h.length)throw new f;return T}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class e1{constructor(h){this.bytes=h,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(h){if(h<1||h>32||h>this.available())throw new f(""+h);let g=0,y=this.bitOffset,C=this.byteOffset;const _=this.bytes;if(y>0){const T=8-y,j=h<T?h:T,F=T-j,U=255>>8-j<<F;g=(_[C]&U)>>F,h-=j,y+=j,y===8&&(y=0,C++)}if(h>0){for(;h>=8;)g=g<<8|_[C]&255,C++,h-=8;if(h>0){const T=8-h,j=255>>T<<T;g=g<<h|(_[C]&j)>>T,y+=h}}return this.bitOffset=y,this.byteOffset=C,g}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var qi;(function(se){se[se.PAD_ENCODE=0]="PAD_ENCODE",se[se.ASCII_ENCODE=1]="ASCII_ENCODE",se[se.C40_ENCODE=2]="C40_ENCODE",se[se.TEXT_ENCODE=3]="TEXT_ENCODE",se[se.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",se[se.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",se[se.BASE256_ENCODE=6]="BASE256_ENCODE"})(qi||(qi={}));class yc{static decode(h){const g=new e1(h),y=new te,C=new te,_=new Array;let T=qi.ASCII_ENCODE;do if(T===qi.ASCII_ENCODE)T=this.decodeAsciiSegment(g,y,C);else{switch(T){case qi.C40_ENCODE:this.decodeC40Segment(g,y);break;case qi.TEXT_ENCODE:this.decodeTextSegment(g,y);break;case qi.ANSIX12_ENCODE:this.decodeAnsiX12Segment(g,y);break;case qi.EDIFACT_ENCODE:this.decodeEdifactSegment(g,y);break;case qi.BASE256_ENCODE:this.decodeBase256Segment(g,y,_);break;default:throw new O}T=qi.ASCII_ENCODE}while(T!==qi.PAD_ENCODE&&g.available()>0);return C.length()>0&&y.append(C.toString()),new ae(h,y.toString(),_.length===0?null:_,null)}static decodeAsciiSegment(h,g,y){let C=!1;do{let _=h.readBits(8);if(_===0)throw new O;if(_<=128)return C&&(_+=128),g.append(String.fromCharCode(_-1)),qi.ASCII_ENCODE;if(_===129)return qi.PAD_ENCODE;if(_<=229){const T=_-130;T<10&&g.append("0"),g.append(""+T)}else switch(_){case 230:return qi.C40_ENCODE;case 231:return qi.BASE256_ENCODE;case 232:g.append("");break;case 233:case 234:break;case 235:C=!0;break;case 236:g.append("[)>05"),y.insert(0,"");break;case 237:g.append("[)>06"),y.insert(0,"");break;case 238:return qi.ANSIX12_ENCODE;case 239:return qi.TEXT_ENCODE;case 240:return qi.EDIFACT_ENCODE;case 241:break;default:if(_!==254||h.available()!==0)throw new O;break}}while(h.available()>0);return qi.ASCII_ENCODE}static decodeC40Segment(h,g){let y=!1;const C=[];let _=0;do{if(h.available()===8)return;const T=h.readBits(8);if(T===254)return;this.parseTwoBytes(T,h.readBits(8),C);for(let j=0;j<3;j++){const F=C[j];switch(_){case 0:if(F<3)_=F+1;else if(F<this.C40_BASIC_SET_CHARS.length){const U=this.C40_BASIC_SET_CHARS[F];y?(g.append(String.fromCharCode(U.charCodeAt(0)+128)),y=!1):g.append(U)}else throw new O;break;case 1:y?(g.append(String.fromCharCode(F+128)),y=!1):g.append(String.fromCharCode(F)),_=0;break;case 2:if(F<this.C40_SHIFT2_SET_CHARS.length){const U=this.C40_SHIFT2_SET_CHARS[F];y?(g.append(String.fromCharCode(U.charCodeAt(0)+128)),y=!1):g.append(U)}else switch(F){case 27:g.append("");break;case 30:y=!0;break;default:throw new O}_=0;break;case 3:y?(g.append(String.fromCharCode(F+224)),y=!1):g.append(String.fromCharCode(F+96)),_=0;break;default:throw new O}}}while(h.available()>0)}static decodeTextSegment(h,g){let y=!1,C=[],_=0;do{if(h.available()===8)return;const T=h.readBits(8);if(T===254)return;this.parseTwoBytes(T,h.readBits(8),C);for(let j=0;j<3;j++){const F=C[j];switch(_){case 0:if(F<3)_=F+1;else if(F<this.TEXT_BASIC_SET_CHARS.length){const U=this.TEXT_BASIC_SET_CHARS[F];y?(g.append(String.fromCharCode(U.charCodeAt(0)+128)),y=!1):g.append(U)}else throw new O;break;case 1:y?(g.append(String.fromCharCode(F+128)),y=!1):g.append(String.fromCharCode(F)),_=0;break;case 2:if(F<this.TEXT_SHIFT2_SET_CHARS.length){const U=this.TEXT_SHIFT2_SET_CHARS[F];y?(g.append(String.fromCharCode(U.charCodeAt(0)+128)),y=!1):g.append(U)}else switch(F){case 27:g.append("");break;case 30:y=!0;break;default:throw new O}_=0;break;case 3:if(F<this.TEXT_SHIFT3_SET_CHARS.length){const U=this.TEXT_SHIFT3_SET_CHARS[F];y?(g.append(String.fromCharCode(U.charCodeAt(0)+128)),y=!1):g.append(U),_=0}else throw new O;break;default:throw new O}}}while(h.available()>0)}static decodeAnsiX12Segment(h,g){const y=[];do{if(h.available()===8)return;const C=h.readBits(8);if(C===254)return;this.parseTwoBytes(C,h.readBits(8),y);for(let _=0;_<3;_++){const T=y[_];switch(T){case 0:g.append("\r");break;case 1:g.append("*");break;case 2:g.append(">");break;case 3:g.append(" ");break;default:if(T<14)g.append(String.fromCharCode(T+44));else if(T<40)g.append(String.fromCharCode(T+51));else throw new O;break}}}while(h.available()>0)}static parseTwoBytes(h,g,y){let C=(h<<8)+g-1,_=Math.floor(C/1600);y[0]=_,C-=_*1600,_=Math.floor(C/40),y[1]=_,y[2]=C-_*40}static decodeEdifactSegment(h,g){do{if(h.available()<=16)return;for(let y=0;y<4;y++){let C=h.readBits(6);if(C===31){const _=8-h.getBitOffset();_!==8&&h.readBits(_);return}C&32||(C|=64),g.append(String.fromCharCode(C))}}while(h.available()>0)}static decodeBase256Segment(h,g,y){let C=1+h.getByteOffset();const _=this.unrandomize255State(h.readBits(8),C++);let T;if(_===0?T=h.available()/8|0:_<250?T=_:T=250*(_-249)+this.unrandomize255State(h.readBits(8),C++),T<0)throw new O;const j=new Uint8Array(T);for(let F=0;F<T;F++){if(h.available()<8)throw new O;j[F]=this.unrandomize255State(h.readBits(8),C++)}y.push(j);try{g.append(z.decode(j,H.ISO88591))}catch(F){throw new ze("Platform does not support required encoding: "+F.message)}}static unrandomize255State(h,g){const y=149*g%255+1,C=h-y;return C>=0?C:C+256}}yc.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],yc.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],yc.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],yc.TEXT_SHIFT2_SET_CHARS=yc.C40_SHIFT2_SET_CHARS,yc.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class EP{constructor(){this.rsDecoder=new De(Ne.DATA_MATRIX_FIELD_256)}decode(h){const g=new So(h),y=g.getVersion(),C=g.readCodewords(),_=Zx.getDataBlocks(C,y);let T=0;for(let U of _)T+=U.getNumDataCodewords();const j=new Uint8Array(T),F=_.length;for(let U=0;U<F;U++){const ee=_[U],oe=ee.getCodewords(),xe=ee.getNumDataCodewords();this.correctErrors(oe,xe);for(let Oe=0;Oe<xe;Oe++)j[Oe*F+U]=oe[Oe]}return yc.decode(j)}correctErrors(h,g){const y=new Int32Array(h);try{this.rsDecoder.decode(y,h.length-g)}catch{throw new m}for(let C=0;C<g;C++)h[C]=y[C]}}class Ni{constructor(h){this.image=h,this.rectangleDetector=new ct(this.image)}detect(){const h=this.rectangleDetector.detect();let g=this.detectSolid1(h);if(g=this.detectSolid2(g),g[3]=this.correctTopRight(g),!g[3])throw new W;g=this.shiftToModuleCenter(g);const y=g[0],C=g[1],_=g[2],T=g[3];let j=this.transitionsBetween(y,T)+1,F=this.transitionsBetween(_,T)+1;(j&1)===1&&(j+=1),(F&1)===1&&(F+=1),4*j<7*F&&4*F<7*j&&(j=F=Math.max(j,F));let U=Ni.sampleGrid(this.image,y,C,_,T,j,F);return new Rr(U,[y,C,_,T])}static shiftPoint(h,g,y){let C=(g.getX()-h.getX())/(y+1),_=(g.getY()-h.getY())/(y+1);return new ht(h.getX()+C,h.getY()+_)}static moveAway(h,g,y){let C=h.getX(),_=h.getY();return C<g?C-=1:C+=1,_<y?_-=1:_+=1,new ht(C,_)}detectSolid1(h){let g=h[0],y=h[1],C=h[3],_=h[2],T=this.transitionsBetween(g,y),j=this.transitionsBetween(y,C),F=this.transitionsBetween(C,_),U=this.transitionsBetween(_,g),ee=T,oe=[_,g,y,C];return ee>j&&(ee=j,oe[0]=g,oe[1]=y,oe[2]=C,oe[3]=_),ee>F&&(ee=F,oe[0]=y,oe[1]=C,oe[2]=_,oe[3]=g),ee>U&&(oe[0]=C,oe[1]=_,oe[2]=g,oe[3]=y),oe}detectSolid2(h){let g=h[0],y=h[1],C=h[2],_=h[3],T=this.transitionsBetween(g,_),j=Ni.shiftPoint(y,C,(T+1)*4),F=Ni.shiftPoint(C,y,(T+1)*4),U=this.transitionsBetween(j,g),ee=this.transitionsBetween(F,_);return U<ee?(h[0]=g,h[1]=y,h[2]=C,h[3]=_):(h[0]=y,h[1]=C,h[2]=_,h[3]=g),h}correctTopRight(h){let g=h[0],y=h[1],C=h[2],_=h[3],T=this.transitionsBetween(g,_),j=this.transitionsBetween(y,_),F=Ni.shiftPoint(g,y,(j+1)*4),U=Ni.shiftPoint(C,y,(T+1)*4);T=this.transitionsBetween(F,_),j=this.transitionsBetween(U,_);let ee=new ht(_.getX()+(C.getX()-y.getX())/(T+1),_.getY()+(C.getY()-y.getY())/(T+1)),oe=new ht(_.getX()+(g.getX()-y.getX())/(j+1),_.getY()+(g.getY()-y.getY())/(j+1));if(!this.isValid(ee))return this.isValid(oe)?oe:null;if(!this.isValid(oe))return ee;let xe=this.transitionsBetween(F,ee)+this.transitionsBetween(U,ee),Oe=this.transitionsBetween(F,oe)+this.transitionsBetween(U,oe);return xe>Oe?ee:oe}shiftToModuleCenter(h){let g=h[0],y=h[1],C=h[2],_=h[3],T=this.transitionsBetween(g,_)+1,j=this.transitionsBetween(C,_)+1,F=Ni.shiftPoint(g,y,j*4),U=Ni.shiftPoint(C,y,T*4);T=this.transitionsBetween(F,_)+1,j=this.transitionsBetween(U,_)+1,(T&1)===1&&(T+=1),(j&1)===1&&(j+=1);let ee=(g.getX()+y.getX()+C.getX()+_.getX())/4,oe=(g.getY()+y.getY()+C.getY()+_.getY())/4;g=Ni.moveAway(g,ee,oe),y=Ni.moveAway(y,ee,oe),C=Ni.moveAway(C,ee,oe),_=Ni.moveAway(_,ee,oe);let xe,Oe;return F=Ni.shiftPoint(g,y,j*4),F=Ni.shiftPoint(F,_,T*4),xe=Ni.shiftPoint(y,g,j*4),xe=Ni.shiftPoint(xe,C,T*4),U=Ni.shiftPoint(C,_,j*4),U=Ni.shiftPoint(U,y,T*4),Oe=Ni.shiftPoint(_,C,j*4),Oe=Ni.shiftPoint(Oe,g,T*4),[F,xe,U,Oe]}isValid(h){return h.getX()>=0&&h.getX()<this.image.getWidth()&&h.getY()>0&&h.getY()<this.image.getHeight()}static sampleGrid(h,g,y,C,_,T,j){return Gt.getInstance().sampleGrid(h,T,j,.5,.5,T-.5,.5,T-.5,j-.5,.5,j-.5,g.getX(),g.getY(),_.getX(),_.getY(),C.getX(),C.getY(),y.getX(),y.getY())}transitionsBetween(h,g){let y=Math.trunc(h.getX()),C=Math.trunc(h.getY()),_=Math.trunc(g.getX()),T=Math.trunc(g.getY()),j=Math.abs(T-C)>Math.abs(_-y);if(j){let Se=y;y=C,C=Se,Se=_,_=T,T=Se}let F=Math.abs(_-y),U=Math.abs(T-C),ee=-F/2,oe=C<T?1:-1,xe=y<_?1:-1,Oe=0,ue=this.image.get(j?C:y,j?y:C);for(let Se=y,Ae=C;Se!==_;Se+=xe){let Be=this.image.get(j?Ae:Se,j?Se:Ae);if(Be!==ue&&(Oe++,ue=Be),ee+=U,ee>0){if(Ae===T)break;Ae+=oe,ee-=F}}return Oe}}class jl{constructor(){this.decoder=new EP}decode(h,g=null){let y,C;if(g!=null&&g.has(R.PURE_BARCODE)){const U=jl.extractPureBits(h.getBlackMatrix());y=this.decoder.decode(U),C=jl.NO_POINTS}else{const U=new Ni(h.getBlackMatrix()).detect();y=this.decoder.decode(U.getBits()),C=U.getPoints()}const _=y.getRawBytes(),T=new V(y.getText(),_,8*_.length,C,ie.DATA_MATRIX,v.currentTimeMillis()),j=y.getByteSegments();j!=null&&T.putMetadata(ne.BYTE_SEGMENTS,j);const F=y.getECLevel();return F!=null&&T.putMetadata(ne.ERROR_CORRECTION_LEVEL,F),T}reset(){}static extractPureBits(h){const g=h.getTopLeftOnBit(),y=h.getBottomRightOnBit();if(g==null||y==null)throw new W;const C=this.moduleSize(g,h);let _=g[1];const T=y[1];let j=g[0];const U=(y[0]-j+1)/C,ee=(T-_+1)/C;if(U<=0||ee<=0)throw new W;const oe=C/2;_+=oe,j+=oe;const xe=new Y(U,ee);for(let Oe=0;Oe<ee;Oe++){const ue=_+Oe*C;for(let Se=0;Se<U;Se++)h.get(j+Se*C,ue)&&xe.set(Se,Oe)}return xe}static moduleSize(h,g){const y=g.getWidth();let C=h[0];const _=h[1];for(;C<y&&g.get(C,_);)C++;if(C===y)throw new W;const T=C-h[0];if(T===0)throw new W;return T}}jl.NO_POINTS=[];class HC extends ce{constructor(h=500){super(new jl,h)}}var lp;(function(se){se[se.L=0]="L",se[se.M=1]="M",se[se.Q=2]="Q",se[se.H=3]="H"})(lp||(lp={}));class Kn{constructor(h,g,y){this.value=h,this.stringValue=g,this.bits=y,Kn.FOR_BITS.set(y,this),Kn.FOR_VALUE.set(h,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(h){switch(h){case"L":return Kn.L;case"M":return Kn.M;case"Q":return Kn.Q;case"H":return Kn.H;default:throw new d(h+"not available")}}toString(){return this.stringValue}equals(h){if(!(h instanceof Kn))return!1;const g=h;return this.value===g.value}static forBits(h){if(h<0||h>=Kn.FOR_BITS.size)throw new f;return Kn.FOR_BITS.get(h)}}Kn.FOR_BITS=new Map,Kn.FOR_VALUE=new Map,Kn.L=new Kn(lp.L,"L",1),Kn.M=new Kn(lp.M,"M",0),Kn.Q=new Kn(lp.Q,"Q",3),Kn.H=new Kn(lp.H,"H",2);class Ma{constructor(h){this.errorCorrectionLevel=Kn.forBits(h>>3&3),this.dataMask=h&7}static numBitsDiffering(h,g){return E.bitCount(h^g)}static decodeFormatInformation(h,g){const y=Ma.doDecodeFormatInformation(h,g);return y!==null?y:Ma.doDecodeFormatInformation(h^Ma.FORMAT_INFO_MASK_QR,g^Ma.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(h,g){let y=Number.MAX_SAFE_INTEGER,C=0;for(const _ of Ma.FORMAT_INFO_DECODE_LOOKUP){const T=_[0];if(T===h||T===g)return new Ma(_[1]);let j=Ma.numBitsDiffering(h,T);j<y&&(C=_[1],y=j),h!==g&&(j=Ma.numBitsDiffering(g,T),j<y&&(C=_[1],y=j))}return y<=3?new Ma(C):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(h){if(!(h instanceof Ma))return!1;const g=h;return this.errorCorrectionLevel===g.errorCorrectionLevel&&this.dataMask===g.dataMask}}Ma.FORMAT_INFO_MASK_QR=21522,Ma.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Qe{constructor(h,...g){this.ecCodewordsPerBlock=h,this.ecBlocks=g}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let h=0;const g=this.ecBlocks;for(const y of g)h+=y.getCount();return h}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Ie{constructor(h,g){this.count=h,this.dataCodewords=g}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ar{constructor(h,g,...y){this.versionNumber=h,this.alignmentPatternCenters=g,this.ecBlocks=y;let C=0;const _=y[0].getECCodewordsPerBlock(),T=y[0].getECBlocks();for(const j of T)C+=j.getCount()*(j.getDataCodewords()+_);this.totalCodewords=C}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(h){return this.ecBlocks[h.getValue()]}static getProvisionalVersionForDimension(h){if(h%4!==1)throw new O;try{return this.getVersionForNumber((h-17)/4)}catch{throw new O}}static getVersionForNumber(h){if(h<1||h>40)throw new f;return ar.VERSIONS[h-1]}static decodeVersionInformation(h){let g=Number.MAX_SAFE_INTEGER,y=0;for(let C=0;C<ar.VERSION_DECODE_INFO.length;C++){const _=ar.VERSION_DECODE_INFO[C];if(_===h)return ar.getVersionForNumber(C+7);const T=Ma.numBitsDiffering(h,_);T<g&&(y=C+7,g=T)}return g<=3?ar.getVersionForNumber(y):null}buildFunctionPattern(){const h=this.getDimensionForVersion(),g=new Y(h);g.setRegion(0,0,9,9),g.setRegion(h-8,0,8,9),g.setRegion(0,h-8,9,8);const y=this.alignmentPatternCenters.length;for(let C=0;C<y;C++){const _=this.alignmentPatternCenters[C]-2;for(let T=0;T<y;T++)C===0&&(T===0||T===y-1)||C===y-1&&T===0||g.setRegion(this.alignmentPatternCenters[T]-2,_,5,5)}return g.setRegion(6,9,1,h-17),g.setRegion(9,6,h-17,1),this.versionNumber>6&&(g.setRegion(h-11,0,3,6),g.setRegion(0,h-11,6,3)),g}toString(){return""+this.versionNumber}}ar.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ar.VERSIONS=[new ar(1,new Int32Array(0),new Qe(7,new Ie(1,19)),new Qe(10,new Ie(1,16)),new Qe(13,new Ie(1,13)),new Qe(17,new Ie(1,9))),new ar(2,Int32Array.from([6,18]),new Qe(10,new Ie(1,34)),new Qe(16,new Ie(1,28)),new Qe(22,new Ie(1,22)),new Qe(28,new Ie(1,16))),new ar(3,Int32Array.from([6,22]),new Qe(15,new Ie(1,55)),new Qe(26,new Ie(1,44)),new Qe(18,new Ie(2,17)),new Qe(22,new Ie(2,13))),new ar(4,Int32Array.from([6,26]),new Qe(20,new Ie(1,80)),new Qe(18,new Ie(2,32)),new Qe(26,new Ie(2,24)),new Qe(16,new Ie(4,9))),new ar(5,Int32Array.from([6,30]),new Qe(26,new Ie(1,108)),new Qe(24,new Ie(2,43)),new Qe(18,new Ie(2,15),new Ie(2,16)),new Qe(22,new Ie(2,11),new Ie(2,12))),new ar(6,Int32Array.from([6,34]),new Qe(18,new Ie(2,68)),new Qe(16,new Ie(4,27)),new Qe(24,new Ie(4,19)),new Qe(28,new Ie(4,15))),new ar(7,Int32Array.from([6,22,38]),new Qe(20,new Ie(2,78)),new Qe(18,new Ie(4,31)),new Qe(18,new Ie(2,14),new Ie(4,15)),new Qe(26,new Ie(4,13),new Ie(1,14))),new ar(8,Int32Array.from([6,24,42]),new Qe(24,new Ie(2,97)),new Qe(22,new Ie(2,38),new Ie(2,39)),new Qe(22,new Ie(4,18),new Ie(2,19)),new Qe(26,new Ie(4,14),new Ie(2,15))),new ar(9,Int32Array.from([6,26,46]),new Qe(30,new Ie(2,116)),new Qe(22,new Ie(3,36),new Ie(2,37)),new Qe(20,new Ie(4,16),new Ie(4,17)),new Qe(24,new Ie(4,12),new Ie(4,13))),new ar(10,Int32Array.from([6,28,50]),new Qe(18,new Ie(2,68),new Ie(2,69)),new Qe(26,new Ie(4,43),new Ie(1,44)),new Qe(24,new Ie(6,19),new Ie(2,20)),new Qe(28,new Ie(6,15),new Ie(2,16))),new ar(11,Int32Array.from([6,30,54]),new Qe(20,new Ie(4,81)),new Qe(30,new Ie(1,50),new Ie(4,51)),new Qe(28,new Ie(4,22),new Ie(4,23)),new Qe(24,new Ie(3,12),new Ie(8,13))),new ar(12,Int32Array.from([6,32,58]),new Qe(24,new Ie(2,92),new Ie(2,93)),new Qe(22,new Ie(6,36),new Ie(2,37)),new Qe(26,new Ie(4,20),new Ie(6,21)),new Qe(28,new Ie(7,14),new Ie(4,15))),new ar(13,Int32Array.from([6,34,62]),new Qe(26,new Ie(4,107)),new Qe(22,new Ie(8,37),new Ie(1,38)),new Qe(24,new Ie(8,20),new Ie(4,21)),new Qe(22,new Ie(12,11),new Ie(4,12))),new ar(14,Int32Array.from([6,26,46,66]),new Qe(30,new Ie(3,115),new Ie(1,116)),new Qe(24,new Ie(4,40),new Ie(5,41)),new Qe(20,new Ie(11,16),new Ie(5,17)),new Qe(24,new Ie(11,12),new Ie(5,13))),new ar(15,Int32Array.from([6,26,48,70]),new Qe(22,new Ie(5,87),new Ie(1,88)),new Qe(24,new Ie(5,41),new Ie(5,42)),new Qe(30,new Ie(5,24),new Ie(7,25)),new Qe(24,new Ie(11,12),new Ie(7,13))),new ar(16,Int32Array.from([6,26,50,74]),new Qe(24,new Ie(5,98),new Ie(1,99)),new Qe(28,new Ie(7,45),new Ie(3,46)),new Qe(24,new Ie(15,19),new Ie(2,20)),new Qe(30,new Ie(3,15),new Ie(13,16))),new ar(17,Int32Array.from([6,30,54,78]),new Qe(28,new Ie(1,107),new Ie(5,108)),new Qe(28,new Ie(10,46),new Ie(1,47)),new Qe(28,new Ie(1,22),new Ie(15,23)),new Qe(28,new Ie(2,14),new Ie(17,15))),new ar(18,Int32Array.from([6,30,56,82]),new Qe(30,new Ie(5,120),new Ie(1,121)),new Qe(26,new Ie(9,43),new Ie(4,44)),new Qe(28,new Ie(17,22),new Ie(1,23)),new Qe(28,new Ie(2,14),new Ie(19,15))),new ar(19,Int32Array.from([6,30,58,86]),new Qe(28,new Ie(3,113),new Ie(4,114)),new Qe(26,new Ie(3,44),new Ie(11,45)),new Qe(26,new Ie(17,21),new Ie(4,22)),new Qe(26,new Ie(9,13),new Ie(16,14))),new ar(20,Int32Array.from([6,34,62,90]),new Qe(28,new Ie(3,107),new Ie(5,108)),new Qe(26,new Ie(3,41),new Ie(13,42)),new Qe(30,new Ie(15,24),new Ie(5,25)),new Qe(28,new Ie(15,15),new Ie(10,16))),new ar(21,Int32Array.from([6,28,50,72,94]),new Qe(28,new Ie(4,116),new Ie(4,117)),new Qe(26,new Ie(17,42)),new Qe(28,new Ie(17,22),new Ie(6,23)),new Qe(30,new Ie(19,16),new Ie(6,17))),new ar(22,Int32Array.from([6,26,50,74,98]),new Qe(28,new Ie(2,111),new Ie(7,112)),new Qe(28,new Ie(17,46)),new Qe(30,new Ie(7,24),new Ie(16,25)),new Qe(24,new Ie(34,13))),new ar(23,Int32Array.from([6,30,54,78,102]),new Qe(30,new Ie(4,121),new Ie(5,122)),new Qe(28,new Ie(4,47),new Ie(14,48)),new Qe(30,new Ie(11,24),new Ie(14,25)),new Qe(30,new Ie(16,15),new Ie(14,16))),new ar(24,Int32Array.from([6,28,54,80,106]),new Qe(30,new Ie(6,117),new Ie(4,118)),new Qe(28,new Ie(6,45),new Ie(14,46)),new Qe(30,new Ie(11,24),new Ie(16,25)),new Qe(30,new Ie(30,16),new Ie(2,17))),new ar(25,Int32Array.from([6,32,58,84,110]),new Qe(26,new Ie(8,106),new Ie(4,107)),new Qe(28,new Ie(8,47),new Ie(13,48)),new Qe(30,new Ie(7,24),new Ie(22,25)),new Qe(30,new Ie(22,15),new Ie(13,16))),new ar(26,Int32Array.from([6,30,58,86,114]),new Qe(28,new Ie(10,114),new Ie(2,115)),new Qe(28,new Ie(19,46),new Ie(4,47)),new Qe(28,new Ie(28,22),new Ie(6,23)),new Qe(30,new Ie(33,16),new Ie(4,17))),new ar(27,Int32Array.from([6,34,62,90,118]),new Qe(30,new Ie(8,122),new Ie(4,123)),new Qe(28,new Ie(22,45),new Ie(3,46)),new Qe(30,new Ie(8,23),new Ie(26,24)),new Qe(30,new Ie(12,15),new Ie(28,16))),new ar(28,Int32Array.from([6,26,50,74,98,122]),new Qe(30,new Ie(3,117),new Ie(10,118)),new Qe(28,new Ie(3,45),new Ie(23,46)),new Qe(30,new Ie(4,24),new Ie(31,25)),new Qe(30,new Ie(11,15),new Ie(31,16))),new ar(29,Int32Array.from([6,30,54,78,102,126]),new Qe(30,new Ie(7,116),new Ie(7,117)),new Qe(28,new Ie(21,45),new Ie(7,46)),new Qe(30,new Ie(1,23),new Ie(37,24)),new Qe(30,new Ie(19,15),new Ie(26,16))),new ar(30,Int32Array.from([6,26,52,78,104,130]),new Qe(30,new Ie(5,115),new Ie(10,116)),new Qe(28,new Ie(19,47),new Ie(10,48)),new Qe(30,new Ie(15,24),new Ie(25,25)),new Qe(30,new Ie(23,15),new Ie(25,16))),new ar(31,Int32Array.from([6,30,56,82,108,134]),new Qe(30,new Ie(13,115),new Ie(3,116)),new Qe(28,new Ie(2,46),new Ie(29,47)),new Qe(30,new Ie(42,24),new Ie(1,25)),new Qe(30,new Ie(23,15),new Ie(28,16))),new ar(32,Int32Array.from([6,34,60,86,112,138]),new Qe(30,new Ie(17,115)),new Qe(28,new Ie(10,46),new Ie(23,47)),new Qe(30,new Ie(10,24),new Ie(35,25)),new Qe(30,new Ie(19,15),new Ie(35,16))),new ar(33,Int32Array.from([6,30,58,86,114,142]),new Qe(30,new Ie(17,115),new Ie(1,116)),new Qe(28,new Ie(14,46),new Ie(21,47)),new Qe(30,new Ie(29,24),new Ie(19,25)),new Qe(30,new Ie(11,15),new Ie(46,16))),new ar(34,Int32Array.from([6,34,62,90,118,146]),new Qe(30,new Ie(13,115),new Ie(6,116)),new Qe(28,new Ie(14,46),new Ie(23,47)),new Qe(30,new Ie(44,24),new Ie(7,25)),new Qe(30,new Ie(59,16),new Ie(1,17))),new ar(35,Int32Array.from([6,30,54,78,102,126,150]),new Qe(30,new Ie(12,121),new Ie(7,122)),new Qe(28,new Ie(12,47),new Ie(26,48)),new Qe(30,new Ie(39,24),new Ie(14,25)),new Qe(30,new Ie(22,15),new Ie(41,16))),new ar(36,Int32Array.from([6,24,50,76,102,128,154]),new Qe(30,new Ie(6,121),new Ie(14,122)),new Qe(28,new Ie(6,47),new Ie(34,48)),new Qe(30,new Ie(46,24),new Ie(10,25)),new Qe(30,new Ie(2,15),new Ie(64,16))),new ar(37,Int32Array.from([6,28,54,80,106,132,158]),new Qe(30,new Ie(17,122),new Ie(4,123)),new Qe(28,new Ie(29,46),new Ie(14,47)),new Qe(30,new Ie(49,24),new Ie(10,25)),new Qe(30,new Ie(24,15),new Ie(46,16))),new ar(38,Int32Array.from([6,32,58,84,110,136,162]),new Qe(30,new Ie(4,122),new Ie(18,123)),new Qe(28,new Ie(13,46),new Ie(32,47)),new Qe(30,new Ie(48,24),new Ie(14,25)),new Qe(30,new Ie(42,15),new Ie(32,16))),new ar(39,Int32Array.from([6,26,54,82,110,138,166]),new Qe(30,new Ie(20,117),new Ie(4,118)),new Qe(28,new Ie(40,47),new Ie(7,48)),new Qe(30,new Ie(43,24),new Ie(22,25)),new Qe(30,new Ie(10,15),new Ie(67,16))),new ar(40,Int32Array.from([6,30,58,86,114,142,170]),new Qe(30,new Ie(19,118),new Ie(6,119)),new Qe(28,new Ie(18,47),new Ie(31,48)),new Qe(30,new Ie(34,24),new Ie(34,25)),new Qe(30,new Ie(20,15),new Ie(61,16)))];var Gi;(function(se){se[se.DATA_MASK_000=0]="DATA_MASK_000",se[se.DATA_MASK_001=1]="DATA_MASK_001",se[se.DATA_MASK_010=2]="DATA_MASK_010",se[se.DATA_MASK_011=3]="DATA_MASK_011",se[se.DATA_MASK_100=4]="DATA_MASK_100",se[se.DATA_MASK_101=5]="DATA_MASK_101",se[se.DATA_MASK_110=6]="DATA_MASK_110",se[se.DATA_MASK_111=7]="DATA_MASK_111"})(Gi||(Gi={}));class $s{constructor(h,g){this.value=h,this.isMasked=g}unmaskBitMatrix(h,g){for(let y=0;y<g;y++)for(let C=0;C<g;C++)this.isMasked(y,C)&&h.flip(C,y)}}$s.values=new Map([[Gi.DATA_MASK_000,new $s(Gi.DATA_MASK_000,(se,h)=>(se+h&1)===0)],[Gi.DATA_MASK_001,new $s(Gi.DATA_MASK_001,(se,h)=>(se&1)===0)],[Gi.DATA_MASK_010,new $s(Gi.DATA_MASK_010,(se,h)=>h%3===0)],[Gi.DATA_MASK_011,new $s(Gi.DATA_MASK_011,(se,h)=>(se+h)%3===0)],[Gi.DATA_MASK_100,new $s(Gi.DATA_MASK_100,(se,h)=>(Math.floor(se/2)+Math.floor(h/3)&1)===0)],[Gi.DATA_MASK_101,new $s(Gi.DATA_MASK_101,(se,h)=>se*h%6===0)],[Gi.DATA_MASK_110,new $s(Gi.DATA_MASK_110,(se,h)=>se*h%6<3)],[Gi.DATA_MASK_111,new $s(Gi.DATA_MASK_111,(se,h)=>(se+h+se*h%3&1)===0)]]);class cp{constructor(h){const g=h.getHeight();if(g<21||(g&3)!==1)throw new O;this.bitMatrix=h}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let h=0;for(let _=0;_<6;_++)h=this.copyBit(_,8,h);h=this.copyBit(7,8,h),h=this.copyBit(8,8,h),h=this.copyBit(8,7,h);for(let _=5;_>=0;_--)h=this.copyBit(8,_,h);const g=this.bitMatrix.getHeight();let y=0;const C=g-7;for(let _=g-1;_>=C;_--)y=this.copyBit(8,_,y);for(let _=g-8;_<g;_++)y=this.copyBit(_,8,y);if(this.parsedFormatInfo=Ma.decodeFormatInformation(h,y),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new O}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const h=this.bitMatrix.getHeight(),g=Math.floor((h-17)/4);if(g<=6)return ar.getVersionForNumber(g);let y=0;const C=h-11;for(let T=5;T>=0;T--)for(let j=h-9;j>=C;j--)y=this.copyBit(j,T,y);let _=ar.decodeVersionInformation(y);if(_!==null&&_.getDimensionForVersion()===h)return this.parsedVersion=_,_;y=0;for(let T=5;T>=0;T--)for(let j=h-9;j>=C;j--)y=this.copyBit(T,j,y);if(_=ar.decodeVersionInformation(y),_!==null&&_.getDimensionForVersion()===h)return this.parsedVersion=_,_;throw new O}copyBit(h,g,y){return(this.isMirror?this.bitMatrix.get(g,h):this.bitMatrix.get(h,g))?y<<1|1:y<<1}readCodewords(){const h=this.readFormatInformation(),g=this.readVersion(),y=$s.values.get(h.getDataMask()),C=this.bitMatrix.getHeight();y.unmaskBitMatrix(this.bitMatrix,C);const _=g.buildFunctionPattern();let T=!0;const j=new Uint8Array(g.getTotalCodewords());let F=0,U=0,ee=0;for(let oe=C-1;oe>0;oe-=2){oe===6&&oe--;for(let xe=0;xe<C;xe++){const Oe=T?C-1-xe:xe;for(let ue=0;ue<2;ue++)_.get(oe-ue,Oe)||(ee++,U<<=1,this.bitMatrix.get(oe-ue,Oe)&&(U|=1),ee===8&&(j[F++]=U,ee=0,U=0))}T=!T}if(F!==g.getTotalCodewords())throw new O;return j}remask(){if(this.parsedFormatInfo===null)return;const h=$s.values[this.parsedFormatInfo.getDataMask()],g=this.bitMatrix.getHeight();h.unmaskBitMatrix(this.bitMatrix,g)}setMirror(h){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=h}mirror(){const h=this.bitMatrix;for(let g=0,y=h.getWidth();g<y;g++)for(let C=g+1,_=h.getHeight();C<_;C++)h.get(g,C)!==h.get(C,g)&&(h.flip(C,g),h.flip(g,C))}}class t1{constructor(h,g){this.numDataCodewords=h,this.codewords=g}static getDataBlocks(h,g,y){if(h.length!==g.getTotalCodewords())throw new f;const C=g.getECBlocksForLevel(y);let _=0;const T=C.getECBlocks();for(const ue of T)_+=ue.getCount();const j=new Array(_);let F=0;for(const ue of T)for(let Se=0;Se<ue.getCount();Se++){const Ae=ue.getDataCodewords(),Be=C.getECCodewordsPerBlock()+Ae;j[F++]=new t1(Ae,new Uint8Array(Be))}const U=j[0].codewords.length;let ee=j.length-1;for(;ee>=0&&j[ee].codewords.length!==U;)ee--;ee++;const oe=U-C.getECCodewordsPerBlock();let xe=0;for(let ue=0;ue<oe;ue++)for(let Se=0;Se<F;Se++)j[Se].codewords[ue]=h[xe++];for(let ue=ee;ue<F;ue++)j[ue].codewords[oe]=h[xe++];const Oe=j[0].codewords.length;for(let ue=oe;ue<Oe;ue++)for(let Se=0;Se<F;Se++){const Ae=Se<ee?ue:ue+1;j[Se].codewords[Ae]=h[xe++]}return j}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Eo;(function(se){se[se.TERMINATOR=0]="TERMINATOR",se[se.NUMERIC=1]="NUMERIC",se[se.ALPHANUMERIC=2]="ALPHANUMERIC",se[se.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",se[se.BYTE=4]="BYTE",se[se.ECI=5]="ECI",se[se.KANJI=6]="KANJI",se[se.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",se[se.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",se[se.HANZI=9]="HANZI"})(Eo||(Eo={}));class mr{constructor(h,g,y,C){this.value=h,this.stringValue=g,this.characterCountBitsForVersions=y,this.bits=C,mr.FOR_BITS.set(C,this),mr.FOR_VALUE.set(h,this)}static forBits(h){const g=mr.FOR_BITS.get(h);if(g===void 0)throw new f;return g}getCharacterCountBits(h){const g=h.getVersionNumber();let y;return g<=9?y=0:g<=26?y=1:y=2,this.characterCountBitsForVersions[y]}getValue(){return this.value}getBits(){return this.bits}equals(h){if(!(h instanceof mr))return!1;const g=h;return this.value===g.value}toString(){return this.stringValue}}mr.FOR_BITS=new Map,mr.FOR_VALUE=new Map,mr.TERMINATOR=new mr(Eo.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),mr.NUMERIC=new mr(Eo.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),mr.ALPHANUMERIC=new mr(Eo.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),mr.STRUCTURED_APPEND=new mr(Eo.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),mr.BYTE=new mr(Eo.BYTE,"BYTE",Int32Array.from([8,16,16]),4),mr.ECI=new mr(Eo.ECI,"ECI",Int32Array.from([0,0,0]),7),mr.KANJI=new mr(Eo.KANJI,"KANJI",Int32Array.from([8,10,12]),8),mr.FNC1_FIRST_POSITION=new mr(Eo.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),mr.FNC1_SECOND_POSITION=new mr(Eo.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),mr.HANZI=new mr(Eo.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class di{static decode(h,g,y,C){const _=new e1(h);let T=new te;const j=new Array;let F=-1,U=-1;try{let ee=null,oe=!1,xe;do{if(_.available()<4)xe=mr.TERMINATOR;else{const Oe=_.readBits(4);xe=mr.forBits(Oe)}switch(xe){case mr.TERMINATOR:break;case mr.FNC1_FIRST_POSITION:case mr.FNC1_SECOND_POSITION:oe=!0;break;case mr.STRUCTURED_APPEND:if(_.available()<16)throw new O;F=_.readBits(8),U=_.readBits(8);break;case mr.ECI:const Oe=di.parseECIValue(_);if(ee=L.getCharacterSetECIByValue(Oe),ee===null)throw new O;break;case mr.HANZI:const ue=_.readBits(4),Se=_.readBits(xe.getCharacterCountBits(g));ue===di.GB2312_SUBSET&&di.decodeHanziSegment(_,T,Se);break;default:const Ae=_.readBits(xe.getCharacterCountBits(g));switch(xe){case mr.NUMERIC:di.decodeNumericSegment(_,T,Ae);break;case mr.ALPHANUMERIC:di.decodeAlphanumericSegment(_,T,Ae,oe);break;case mr.BYTE:di.decodeByteSegment(_,T,Ae,ee,j,C);break;case mr.KANJI:di.decodeKanjiSegment(_,T,Ae);break;default:throw new O}break}}while(xe!==mr.TERMINATOR)}catch{throw new O}return new ae(h,T.toString(),j.length===0?null:j,y===null?null:y.toString(),F,U)}static decodeHanziSegment(h,g,y){if(y*13>h.available())throw new O;const C=new Uint8Array(2*y);let _=0;for(;y>0;){const T=h.readBits(13);let j=T/96<<8&4294967295|T%96;j<959?j+=41377:j+=42657,C[_]=j>>8&255,C[_+1]=j&255,_+=2,y--}try{g.append(z.decode(C,H.GB2312))}catch(T){throw new O(T)}}static decodeKanjiSegment(h,g,y){if(y*13>h.available())throw new O;const C=new Uint8Array(2*y);let _=0;for(;y>0;){const T=h.readBits(13);let j=T/192<<8&4294967295|T%192;j<7936?j+=33088:j+=49472,C[_]=j>>8,C[_+1]=j,_+=2,y--}try{g.append(z.decode(C,H.SHIFT_JIS))}catch(T){throw new O(T)}}static decodeByteSegment(h,g,y,C,_,T){if(8*y>h.available())throw new O;const j=new Uint8Array(y);for(let U=0;U<y;U++)j[U]=h.readBits(8);let F;C===null?F=H.guessEncoding(j,T):F=C.getName();try{g.append(z.decode(j,F))}catch(U){throw new O(U)}_.push(j)}static toAlphaNumericChar(h){if(h>=di.ALPHANUMERIC_CHARS.length)throw new O;return di.ALPHANUMERIC_CHARS[h]}static decodeAlphanumericSegment(h,g,y,C){const _=g.length();for(;y>1;){if(h.available()<11)throw new O;const T=h.readBits(11);g.append(di.toAlphaNumericChar(Math.floor(T/45))),g.append(di.toAlphaNumericChar(T%45)),y-=2}if(y===1){if(h.available()<6)throw new O;g.append(di.toAlphaNumericChar(h.readBits(6)))}if(C)for(let T=_;T<g.length();T++)g.charAt(T)==="%"&&(T<g.length()-1&&g.charAt(T+1)==="%"?g.deleteCharAt(T+1):g.setCharAt(T,""))}static decodeNumericSegment(h,g,y){for(;y>=3;){if(h.available()<10)throw new O;const C=h.readBits(10);if(C>=1e3)throw new O;g.append(di.toAlphaNumericChar(Math.floor(C/100))),g.append(di.toAlphaNumericChar(Math.floor(C/10)%10)),g.append(di.toAlphaNumericChar(C%10)),y-=3}if(y===2){if(h.available()<7)throw new O;const C=h.readBits(7);if(C>=100)throw new O;g.append(di.toAlphaNumericChar(Math.floor(C/10))),g.append(di.toAlphaNumericChar(C%10))}else if(y===1){if(h.available()<4)throw new O;const C=h.readBits(4);if(C>=10)throw new O;g.append(di.toAlphaNumericChar(C))}}static parseECIValue(h){const g=h.readBits(8);if(!(g&128))return g&127;if((g&192)===128){const y=h.readBits(8);return(g&63)<<8&4294967295|y}if((g&224)===192){const y=h.readBits(16);return(g&31)<<16&4294967295|y}throw new O}}di.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",di.GB2312_SUBSET=1;class _b{constructor(h){this.mirrored=h}isMirrored(){return this.mirrored}applyMirroredCorrection(h){if(!this.mirrored||h===null||h.length<3)return;const g=h[0];h[0]=h[2],h[2]=g}}class WC{constructor(){this.rsDecoder=new De(Ne.QR_CODE_FIELD_256)}decodeBooleanArray(h,g){return this.decodeBitMatrix(Y.parseFromBooleanArray(h),g)}decodeBitMatrix(h,g){const y=new cp(h);let C=null;try{return this.decodeBitMatrixParser(y,g)}catch(_){C=_}try{y.remask(),y.setMirror(!0),y.readVersion(),y.readFormatInformation(),y.mirror();const _=this.decodeBitMatrixParser(y,g);return _.setOther(new _b(!0)),_}catch(_){throw C!==null?C:_}}decodeBitMatrixParser(h,g){const y=h.readVersion(),C=h.readFormatInformation().getErrorCorrectionLevel(),_=h.readCodewords(),T=t1.getDataBlocks(_,y,C);let j=0;for(const ee of T)j+=ee.getNumDataCodewords();const F=new Uint8Array(j);let U=0;for(const ee of T){const oe=ee.getCodewords(),xe=ee.getNumDataCodewords();this.correctErrors(oe,xe);for(let Oe=0;Oe<xe;Oe++)F[U++]=oe[Oe]}return di.decode(F,y,C,g)}correctErrors(h,g){const y=new Int32Array(h);try{this.rsDecoder.decode(y,h.length-g)}catch{throw new m}for(let C=0;C<g;C++)h[C]=y[C]}}class r1 extends ht{constructor(h,g,y){super(h,g),this.estimatedModuleSize=y}aboutEquals(h,g,y){if(Math.abs(g-this.getY())<=h&&Math.abs(y-this.getX())<=h){const C=Math.abs(h-this.estimatedModuleSize);return C<=1||C<=this.estimatedModuleSize}return!1}combineEstimate(h,g,y){const C=(this.getX()+g)/2,_=(this.getY()+h)/2,T=(this.estimatedModuleSize+y)/2;return new r1(C,_,T)}}class n1{constructor(h,g,y,C,_,T,j){this.image=h,this.startX=g,this.startY=y,this.width=C,this.height=_,this.moduleSize=T,this.resultPointCallback=j,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const h=this.startX,g=this.height,y=this.width,C=h+y,_=this.startY+g/2,T=new Int32Array(3),j=this.image;for(let F=0;F<g;F++){const U=_+(F&1?-Math.floor((F+1)/2):Math.floor((F+1)/2));T[0]=0,T[1]=0,T[2]=0;let ee=h;for(;ee<C&&!j.get(ee,U);)ee++;let oe=0;for(;ee<C;){if(j.get(ee,U))if(oe===1)T[1]++;else if(oe===2){if(this.foundPatternCross(T)){const xe=this.handlePossibleCenter(T,U,ee);if(xe!==null)return xe}T[0]=T[2],T[1]=1,T[2]=0,oe=1}else T[++oe]++;else oe===1&&oe++,T[oe]++;ee++}if(this.foundPatternCross(T)){const xe=this.handlePossibleCenter(T,U,C);if(xe!==null)return xe}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new W}static centerFromEnd(h,g){return g-h[2]-h[1]/2}foundPatternCross(h){const g=this.moduleSize,y=g/2;for(let C=0;C<3;C++)if(Math.abs(g-h[C])>=y)return!1;return!0}crossCheckVertical(h,g,y,C){const _=this.image,T=_.getHeight(),j=this.crossCheckStateCount;j[0]=0,j[1]=0,j[2]=0;let F=h;for(;F>=0&&_.get(g,F)&&j[1]<=y;)j[1]++,F--;if(F<0||j[1]>y)return NaN;for(;F>=0&&!_.get(g,F)&&j[0]<=y;)j[0]++,F--;if(j[0]>y)return NaN;for(F=h+1;F<T&&_.get(g,F)&&j[1]<=y;)j[1]++,F++;if(F===T||j[1]>y)return NaN;for(;F<T&&!_.get(g,F)&&j[2]<=y;)j[2]++,F++;if(j[2]>y)return NaN;const U=j[0]+j[1]+j[2];return 5*Math.abs(U-C)>=2*C?NaN:this.foundPatternCross(j)?n1.centerFromEnd(j,F):NaN}handlePossibleCenter(h,g,y){const C=h[0]+h[1]+h[2],_=n1.centerFromEnd(h,y),T=this.crossCheckVertical(g,_,2*h[1],C);if(!isNaN(T)){const j=(h[0]+h[1]+h[2])/3;for(const U of this.possibleCenters)if(U.aboutEquals(j,T,_))return U.combineEstimate(T,_,j);const F=new r1(_,T,j);this.possibleCenters.push(F),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(F)}return null}}class Nb extends ht{constructor(h,g,y,C){super(h,g),this.estimatedModuleSize=y,this.count=C,C===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(h,g,y){if(Math.abs(g-this.getY())<=h&&Math.abs(y-this.getX())<=h){const C=Math.abs(h-this.estimatedModuleSize);return C<=1||C<=this.estimatedModuleSize}return!1}combineEstimate(h,g,y){const C=this.count+1,_=(this.count*this.getX()+g)/C,T=(this.count*this.getY()+h)/C,j=(this.count*this.estimatedModuleSize+y)/C;return new Nb(_,T,j,C)}}class CP{constructor(h){this.bottomLeft=h[0],this.topLeft=h[1],this.topRight=h[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class la{constructor(h,g){this.image=h,this.resultPointCallback=g,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=g}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(h){const g=h!=null&&h.get(R.TRY_HARDER)!==void 0,y=h!=null&&h.get(R.PURE_BARCODE)!==void 0,C=this.image,_=C.getHeight(),T=C.getWidth();let j=Math.floor(3*_/(4*la.MAX_MODULES));(j<la.MIN_SKIP||g)&&(j=la.MIN_SKIP);let F=!1;const U=new Int32Array(5);for(let oe=j-1;oe<_&&!F;oe+=j){U[0]=0,U[1]=0,U[2]=0,U[3]=0,U[4]=0;let xe=0;for(let Oe=0;Oe<T;Oe++)if(C.get(Oe,oe))(xe&1)===1&&xe++,U[xe]++;else if(xe&1)U[xe]++;else if(xe===4)if(la.foundPatternCross(U)){if(this.handlePossibleCenter(U,oe,Oe,y)===!0)if(j=2,this.hasSkipped===!0)F=this.haveMultiplyConfirmedCenters();else{const Se=this.findRowSkip();Se>U[2]&&(oe+=Se-U[2]-j,Oe=T-1)}else{U[0]=U[2],U[1]=U[3],U[2]=U[4],U[3]=1,U[4]=0,xe=3;continue}xe=0,U[0]=0,U[1]=0,U[2]=0,U[3]=0,U[4]=0}else U[0]=U[2],U[1]=U[3],U[2]=U[4],U[3]=1,U[4]=0,xe=3;else U[++xe]++;la.foundPatternCross(U)&&this.handlePossibleCenter(U,oe,T,y)===!0&&(j=U[0],this.hasSkipped&&(F=this.haveMultiplyConfirmedCenters()))}const ee=this.selectBestPatterns();return ht.orderBestPatterns(ee),new CP(ee)}static centerFromEnd(h,g){return g-h[4]-h[3]-h[2]/2}static foundPatternCross(h){let g=0;for(let _=0;_<5;_++){const T=h[_];if(T===0)return!1;g+=T}if(g<7)return!1;const y=g/7,C=y/2;return Math.abs(y-h[0])<C&&Math.abs(y-h[1])<C&&Math.abs(3*y-h[2])<3*C&&Math.abs(y-h[3])<C&&Math.abs(y-h[4])<C}getCrossCheckStateCount(){const h=this.crossCheckStateCount;return h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h}crossCheckDiagonal(h,g,y,C){const _=this.getCrossCheckStateCount();let T=0;const j=this.image;for(;h>=T&&g>=T&&j.get(g-T,h-T);)_[2]++,T++;if(h<T||g<T)return!1;for(;h>=T&&g>=T&&!j.get(g-T,h-T)&&_[1]<=y;)_[1]++,T++;if(h<T||g<T||_[1]>y)return!1;for(;h>=T&&g>=T&&j.get(g-T,h-T)&&_[0]<=y;)_[0]++,T++;if(_[0]>y)return!1;const F=j.getHeight(),U=j.getWidth();for(T=1;h+T<F&&g+T<U&&j.get(g+T,h+T);)_[2]++,T++;if(h+T>=F||g+T>=U)return!1;for(;h+T<F&&g+T<U&&!j.get(g+T,h+T)&&_[3]<y;)_[3]++,T++;if(h+T>=F||g+T>=U||_[3]>=y)return!1;for(;h+T<F&&g+T<U&&j.get(g+T,h+T)&&_[4]<y;)_[4]++,T++;if(_[4]>=y)return!1;const ee=_[0]+_[1]+_[2]+_[3]+_[4];return Math.abs(ee-C)<2*C&&la.foundPatternCross(_)}crossCheckVertical(h,g,y,C){const _=this.image,T=_.getHeight(),j=this.getCrossCheckStateCount();let F=h;for(;F>=0&&_.get(g,F);)j[2]++,F--;if(F<0)return NaN;for(;F>=0&&!_.get(g,F)&&j[1]<=y;)j[1]++,F--;if(F<0||j[1]>y)return NaN;for(;F>=0&&_.get(g,F)&&j[0]<=y;)j[0]++,F--;if(j[0]>y)return NaN;for(F=h+1;F<T&&_.get(g,F);)j[2]++,F++;if(F===T)return NaN;for(;F<T&&!_.get(g,F)&&j[3]<y;)j[3]++,F++;if(F===T||j[3]>=y)return NaN;for(;F<T&&_.get(g,F)&&j[4]<y;)j[4]++,F++;if(j[4]>=y)return NaN;const U=j[0]+j[1]+j[2]+j[3]+j[4];return 5*Math.abs(U-C)>=2*C?NaN:la.foundPatternCross(j)?la.centerFromEnd(j,F):NaN}crossCheckHorizontal(h,g,y,C){const _=this.image,T=_.getWidth(),j=this.getCrossCheckStateCount();let F=h;for(;F>=0&&_.get(F,g);)j[2]++,F--;if(F<0)return NaN;for(;F>=0&&!_.get(F,g)&&j[1]<=y;)j[1]++,F--;if(F<0||j[1]>y)return NaN;for(;F>=0&&_.get(F,g)&&j[0]<=y;)j[0]++,F--;if(j[0]>y)return NaN;for(F=h+1;F<T&&_.get(F,g);)j[2]++,F++;if(F===T)return NaN;for(;F<T&&!_.get(F,g)&&j[3]<y;)j[3]++,F++;if(F===T||j[3]>=y)return NaN;for(;F<T&&_.get(F,g)&&j[4]<y;)j[4]++,F++;if(j[4]>=y)return NaN;const U=j[0]+j[1]+j[2]+j[3]+j[4];return 5*Math.abs(U-C)>=C?NaN:la.foundPatternCross(j)?la.centerFromEnd(j,F):NaN}handlePossibleCenter(h,g,y,C){const _=h[0]+h[1]+h[2]+h[3]+h[4];let T=la.centerFromEnd(h,y),j=this.crossCheckVertical(g,Math.floor(T),h[2],_);if(!isNaN(j)&&(T=this.crossCheckHorizontal(Math.floor(T),Math.floor(j),h[2],_),!isNaN(T)&&(!C||this.crossCheckDiagonal(Math.floor(j),Math.floor(T),h[2],_)))){const F=_/7;let U=!1;const ee=this.possibleCenters;for(let oe=0,xe=ee.length;oe<xe;oe++){const Oe=ee[oe];if(Oe.aboutEquals(F,j,T)){ee[oe]=Oe.combineEstimate(j,T,F),U=!0;break}}if(!U){const oe=new Nb(T,j,F);ee.push(oe),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(oe)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let g=null;for(const y of this.possibleCenters)if(y.getCount()>=la.CENTER_QUORUM)if(g==null)g=y;else return this.hasSkipped=!0,Math.floor((Math.abs(g.getX()-y.getX())-Math.abs(g.getY()-y.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let h=0,g=0;const y=this.possibleCenters.length;for(const T of this.possibleCenters)T.getCount()>=la.CENTER_QUORUM&&(h++,g+=T.getEstimatedModuleSize());if(h<3)return!1;const C=g/y;let _=0;for(const T of this.possibleCenters)_+=Math.abs(T.getEstimatedModuleSize()-C);return _<=.05*g}selectBestPatterns(){const h=this.possibleCenters.length;if(h<3)throw new W;const g=this.possibleCenters;let y;if(h>3){let C=0,_=0;for(const F of this.possibleCenters){const U=F.getEstimatedModuleSize();C+=U,_+=U*U}y=C/h;let T=Math.sqrt(_/h-y*y);g.sort((F,U)=>{const ee=Math.abs(U.getEstimatedModuleSize()-y),oe=Math.abs(F.getEstimatedModuleSize()-y);return ee<oe?-1:ee>oe?1:0});const j=Math.max(.2*y,T);for(let F=0;F<g.length&&g.length>3;F++){const U=g[F];Math.abs(U.getEstimatedModuleSize()-y)>j&&(g.splice(F,1),F--)}}if(g.length>3){let C=0;for(const _ of g)C+=_.getEstimatedModuleSize();y=C/g.length,g.sort((_,T)=>{if(T.getCount()===_.getCount()){const j=Math.abs(T.getEstimatedModuleSize()-y),F=Math.abs(_.getEstimatedModuleSize()-y);return j<F?1:j>F?-1:0}else return T.getCount()-_.getCount()}),g.splice(3)}return[g[0],g[1],g[2]]}}la.CENTER_QUORUM=2,la.MIN_SKIP=3,la.MAX_MODULES=57;class om{constructor(h){this.image=h}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(h){this.resultPointCallback=h==null?null:h.get(R.NEED_RESULT_POINT_CALLBACK);const y=new la(this.image,this.resultPointCallback).find(h);return this.processFinderPatternInfo(y)}processFinderPatternInfo(h){const g=h.getTopLeft(),y=h.getTopRight(),C=h.getBottomLeft(),_=this.calculateModuleSize(g,y,C);if(_<1)throw new W("No pattern found in proccess finder.");const T=om.computeDimension(g,y,C,_),j=ar.getProvisionalVersionForDimension(T),F=j.getDimensionForVersion()-7;let U=null;if(j.getAlignmentPatternCenters().length>0){const Oe=y.getX()-g.getX()+C.getX(),ue=y.getY()-g.getY()+C.getY(),Se=1-3/F,Ae=Math.floor(g.getX()+Se*(Oe-g.getX())),Be=Math.floor(g.getY()+Se*(ue-g.getY()));for(let lt=4;lt<=16;lt<<=1)try{U=this.findAlignmentInRegion(_,Ae,Be,lt);break}catch(gt){if(!(gt instanceof W))throw gt}}const ee=om.createTransform(g,y,C,U,T),oe=om.sampleGrid(this.image,ee,T);let xe;return U===null?xe=[C,g,y]:xe=[C,g,y,U],new Rr(oe,xe)}static createTransform(h,g,y,C,_){const T=_-3.5;let j,F,U,ee;return C!==null?(j=C.getX(),F=C.getY(),U=T-3,ee=U):(j=g.getX()-h.getX()+y.getX(),F=g.getY()-h.getY()+y.getY(),U=T,ee=T),Lt.quadrilateralToQuadrilateral(3.5,3.5,T,3.5,U,ee,3.5,T,h.getX(),h.getY(),g.getX(),g.getY(),j,F,y.getX(),y.getY())}static sampleGrid(h,g,y){return Gt.getInstance().sampleGridWithTransform(h,y,y,g)}static computeDimension(h,g,y,C){const _=ut.round(ht.distance(h,g)/C),T=ut.round(ht.distance(h,y)/C);let j=Math.floor((_+T)/2)+7;switch(j&3){case 0:j++;break;case 2:j--;break;case 3:throw new W("Dimensions could be not found.")}return j}calculateModuleSize(h,g,y){return(this.calculateModuleSizeOneWay(h,g)+this.calculateModuleSizeOneWay(h,y))/2}calculateModuleSizeOneWay(h,g){const y=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(h.getX()),Math.floor(h.getY()),Math.floor(g.getX()),Math.floor(g.getY())),C=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(g.getX()),Math.floor(g.getY()),Math.floor(h.getX()),Math.floor(h.getY()));return isNaN(y)?C/7:isNaN(C)?y/7:(y+C)/14}sizeOfBlackWhiteBlackRunBothWays(h,g,y,C){let _=this.sizeOfBlackWhiteBlackRun(h,g,y,C),T=1,j=h-(y-h);j<0?(T=h/(h-j),j=0):j>=this.image.getWidth()&&(T=(this.image.getWidth()-1-h)/(j-h),j=this.image.getWidth()-1);let F=Math.floor(g-(C-g)*T);return T=1,F<0?(T=g/(g-F),F=0):F>=this.image.getHeight()&&(T=(this.image.getHeight()-1-g)/(F-g),F=this.image.getHeight()-1),j=Math.floor(h+(j-h)*T),_+=this.sizeOfBlackWhiteBlackRun(h,g,j,F),_-1}sizeOfBlackWhiteBlackRun(h,g,y,C){const _=Math.abs(C-g)>Math.abs(y-h);if(_){let Oe=h;h=g,g=Oe,Oe=y,y=C,C=Oe}const T=Math.abs(y-h),j=Math.abs(C-g);let F=-T/2;const U=h<y?1:-1,ee=g<C?1:-1;let oe=0;const xe=y+U;for(let Oe=h,ue=g;Oe!==xe;Oe+=U){const Se=_?ue:Oe,Ae=_?Oe:ue;if(oe===1===this.image.get(Se,Ae)){if(oe===2)return ut.distance(Oe,ue,h,g);oe++}if(F+=j,F>0){if(ue===C)break;ue+=ee,F-=T}}return oe===2?ut.distance(y+U,C,h,g):NaN}findAlignmentInRegion(h,g,y,C){const _=Math.floor(C*h),T=Math.max(0,g-_),j=Math.min(this.image.getWidth()-1,g+_);if(j-T<h*3)throw new W("Alignment top exceeds estimated module size.");const F=Math.max(0,y-_),U=Math.min(this.image.getHeight()-1,y+_);if(U-F<h*3)throw new W("Alignment bottom exceeds estimated module size.");return new n1(this.image,T,F,j-T,U-F,h,this.resultPointCallback).find()}}class xd{constructor(){this.decoder=new WC}getDecoder(){return this.decoder}decode(h,g){let y,C;if(g!=null&&g.get(R.PURE_BARCODE)!==void 0){const F=xd.extractPureBits(h.getBlackMatrix());y=this.decoder.decodeBitMatrix(F,g),C=xd.NO_POINTS}else{const F=new om(h.getBlackMatrix()).detect(g);y=this.decoder.decodeBitMatrix(F.getBits(),g),C=F.getPoints()}y.getOther()instanceof _b&&y.getOther().applyMirroredCorrection(C);const _=new V(y.getText(),y.getRawBytes(),void 0,C,ie.QR_CODE,void 0),T=y.getByteSegments();T!==null&&_.putMetadata(ne.BYTE_SEGMENTS,T);const j=y.getECLevel();return j!==null&&_.putMetadata(ne.ERROR_CORRECTION_LEVEL,j),y.hasStructuredAppend()&&(_.putMetadata(ne.STRUCTURED_APPEND_SEQUENCE,y.getStructuredAppendSequenceNumber()),_.putMetadata(ne.STRUCTURED_APPEND_PARITY,y.getStructuredAppendParity())),_}reset(){}static extractPureBits(h){const g=h.getTopLeftOnBit(),y=h.getBottomRightOnBit();if(g===null||y===null)throw new W;const C=this.moduleSize(g,h);let _=g[1],T=y[1],j=g[0],F=y[0];if(j>=F||_>=T)throw new W;if(T-_!==F-j&&(F=j+(T-_),F>=h.getWidth()))throw new W;const U=Math.round((F-j+1)/C),ee=Math.round((T-_+1)/C);if(U<=0||ee<=0)throw new W;if(ee!==U)throw new W;const oe=Math.floor(C/2);_+=oe,j+=oe;const xe=j+Math.floor((U-1)*C)-F;if(xe>0){if(xe>oe)throw new W;j-=xe}const Oe=_+Math.floor((ee-1)*C)-T;if(Oe>0){if(Oe>oe)throw new W;_-=Oe}const ue=new Y(U,ee);for(let Se=0;Se<ee;Se++){const Ae=_+Math.floor(Se*C);for(let Be=0;Be<U;Be++)h.get(j+Math.floor(Be*C),Ae)&&ue.set(Be,Se)}return ue}static moduleSize(h,g){const y=g.getHeight(),C=g.getWidth();let _=h[0],T=h[1],j=!0,F=0;for(;_<C&&T<y;){if(j!==g.get(_,T)){if(++F===5)break;j=!j}_++,T++}if(_===C||T===y)throw new W;return(_-h[0])/7}}xd.NO_POINTS=new Array;class _r{PDF417Common(){}static getBitCountSum(h){return ut.sum(h)}static toIntArray(h){if(h==null||!h.length)return _r.EMPTY_INT_ARRAY;const g=new Int32Array(h.length);let y=0;for(const C of h)g[y++]=C;return g}static getCodeword(h){const g=k.binarySearch(_r.SYMBOL_TABLE,h&262143);return g<0?-1:(_r.CODEWORD_TABLE[g]-1)%_r.NUMBER_OF_CODEWORDS}}_r.NUMBER_OF_CODEWORDS=929,_r.MAX_CODEWORDS_IN_BARCODE=_r.NUMBER_OF_CODEWORDS-1,_r.MIN_ROWS_IN_BARCODE=3,_r.MAX_ROWS_IN_BARCODE=90,_r.MODULES_IN_CODEWORD=17,_r.MODULES_IN_STOP_PATTERN=18,_r.BARS_IN_MODULE=8,_r.EMPTY_INT_ARRAY=new Int32Array([]),_r.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),_r.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class kP{constructor(h,g){this.bits=h,this.points=g}getBits(){return this.bits}getPoints(){return this.points}}class zr{static detectMultiple(h,g,y){let C=h.getBlackMatrix(),_=zr.detect(y,C);return _.length||(C=C.clone(),C.rotate180(),_=zr.detect(y,C)),new kP(C,_)}static detect(h,g){const y=new Array;let C=0,_=0,T=!1;for(;C<g.getHeight();){const j=zr.findVertices(g,C,_);if(j[0]==null&&j[3]==null){if(!T)break;T=!1,_=0;for(const F of y)F[1]!=null&&(C=Math.trunc(Math.max(C,F[1].getY()))),F[3]!=null&&(C=Math.max(C,Math.trunc(F[3].getY())));C+=zr.ROW_STEP;continue}if(T=!0,y.push(j),!h)break;j[2]!=null?(_=Math.trunc(j[2].getX()),C=Math.trunc(j[2].getY())):(_=Math.trunc(j[4].getX()),C=Math.trunc(j[4].getY()))}return y}static findVertices(h,g,y){const C=h.getHeight(),_=h.getWidth(),T=new Array(8);return zr.copyToResult(T,zr.findRowsWithPattern(h,C,_,g,y,zr.START_PATTERN),zr.INDEXES_START_PATTERN),T[4]!=null&&(y=Math.trunc(T[4].getX()),g=Math.trunc(T[4].getY())),zr.copyToResult(T,zr.findRowsWithPattern(h,C,_,g,y,zr.STOP_PATTERN),zr.INDEXES_STOP_PATTERN),T}static copyToResult(h,g,y){for(let C=0;C<y.length;C++)h[y[C]]=g[C]}static findRowsWithPattern(h,g,y,C,_,T){const j=new Array(4);let F=!1;const U=new Int32Array(T.length);for(;C<g;C+=zr.ROW_STEP){let oe=zr.findGuardPattern(h,_,C,y,!1,T,U);if(oe!=null){for(;C>0;){const xe=zr.findGuardPattern(h,_,--C,y,!1,T,U);if(xe!=null)oe=xe;else{C++;break}}j[0]=new ht(oe[0],C),j[1]=new ht(oe[1],C),F=!0;break}}let ee=C+1;if(F){let oe=0,xe=Int32Array.from([Math.trunc(j[0].getX()),Math.trunc(j[1].getX())]);for(;ee<g;ee++){const Oe=zr.findGuardPattern(h,xe[0],ee,y,!1,T,U);if(Oe!=null&&Math.abs(xe[0]-Oe[0])<zr.MAX_PATTERN_DRIFT&&Math.abs(xe[1]-Oe[1])<zr.MAX_PATTERN_DRIFT)xe=Oe,oe=0;else{if(oe>zr.SKIPPED_ROW_COUNT_MAX)break;oe++}}ee-=oe+1,j[2]=new ht(xe[0],ee),j[3]=new ht(xe[1],ee)}return ee-C<zr.BARCODE_MIN_HEIGHT&&k.fill(j,null),j}static findGuardPattern(h,g,y,C,_,T,j){k.fillWithin(j,0,j.length,0);let F=g,U=0;for(;h.get(F,y)&&F>0&&U++<zr.MAX_PIXEL_DRIFT;)F--;let ee=F,oe=0,xe=T.length;for(let Oe=_;ee<C;ee++)if(h.get(ee,y)!==Oe)j[oe]++;else{if(oe===xe-1){if(zr.patternMatchVariance(j,T,zr.MAX_INDIVIDUAL_VARIANCE)<zr.MAX_AVG_VARIANCE)return new Int32Array([F,ee]);F+=j[0]+j[1],v.arraycopy(j,2,j,0,oe-1),j[oe-1]=0,j[oe]=0,oe--}else oe++;j[oe]=1,Oe=!Oe}return oe===xe-1&&zr.patternMatchVariance(j,T,zr.MAX_INDIVIDUAL_VARIANCE)<zr.MAX_AVG_VARIANCE?new Int32Array([F,ee-1]):null}static patternMatchVariance(h,g,y){let C=h.length,_=0,T=0;for(let U=0;U<C;U++)_+=h[U],T+=g[U];if(_<T)return 1/0;let j=_/T;y*=j;let F=0;for(let U=0;U<C;U++){let ee=h[U],oe=g[U]*j,xe=ee>oe?ee-oe:oe-ee;if(xe>y)return 1/0;F+=xe}return F/_}}zr.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),zr.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),zr.MAX_AVG_VARIANCE=.42,zr.MAX_INDIVIDUAL_VARIANCE=.8,zr.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),zr.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),zr.MAX_PIXEL_DRIFT=3,zr.MAX_PATTERN_DRIFT=5,zr.SKIPPED_ROW_COUNT_MAX=25,zr.ROW_STEP=5,zr.BARCODE_MIN_HEIGHT=10;class Fa{constructor(h,g){if(g.length===0)throw new f;this.field=h;let y=g.length;if(y>1&&g[0]===0){let C=1;for(;C<y&&g[C]===0;)C++;C===y?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(y-C),v.arraycopy(g,C,this.coefficients,0,this.coefficients.length))}else this.coefficients=g}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(h){return this.coefficients[this.coefficients.length-1-h]}evaluateAt(h){if(h===0)return this.getCoefficient(0);if(h===1){let C=0;for(let _ of this.coefficients)C=this.field.add(C,_);return C}let g=this.coefficients[0],y=this.coefficients.length;for(let C=1;C<y;C++)g=this.field.add(this.field.multiply(h,g),this.coefficients[C]);return g}add(h){if(!this.field.equals(h.field))throw new f("ModulusPolys do not have same ModulusGF field");if(this.isZero())return h;if(h.isZero())return this;let g=this.coefficients,y=h.coefficients;if(g.length>y.length){let T=g;g=y,y=T}let C=new Int32Array(y.length),_=y.length-g.length;v.arraycopy(y,0,C,0,_);for(let T=_;T<y.length;T++)C[T]=this.field.add(g[T-_],y[T]);return new Fa(this.field,C)}subtract(h){if(!this.field.equals(h.field))throw new f("ModulusPolys do not have same ModulusGF field");return h.isZero()?this:this.add(h.negative())}multiply(h){return h instanceof Fa?this.multiplyOther(h):this.multiplyScalar(h)}multiplyOther(h){if(!this.field.equals(h.field))throw new f("ModulusPolys do not have same ModulusGF field");if(this.isZero()||h.isZero())return new Fa(this.field,new Int32Array([0]));let g=this.coefficients,y=g.length,C=h.coefficients,_=C.length,T=new Int32Array(y+_-1);for(let j=0;j<y;j++){let F=g[j];for(let U=0;U<_;U++)T[j+U]=this.field.add(T[j+U],this.field.multiply(F,C[U]))}return new Fa(this.field,T)}negative(){let h=this.coefficients.length,g=new Int32Array(h);for(let y=0;y<h;y++)g[y]=this.field.subtract(0,this.coefficients[y]);return new Fa(this.field,g)}multiplyScalar(h){if(h===0)return new Fa(this.field,new Int32Array([0]));if(h===1)return this;let g=this.coefficients.length,y=new Int32Array(g);for(let C=0;C<g;C++)y[C]=this.field.multiply(this.coefficients[C],h);return new Fa(this.field,y)}multiplyByMonomial(h,g){if(h<0)throw new f;if(g===0)return new Fa(this.field,new Int32Array([0]));let y=this.coefficients.length,C=new Int32Array(y+h);for(let _=0;_<y;_++)C[_]=this.field.multiply(this.coefficients[_],g);return new Fa(this.field,C)}toString(){let h=new te;for(let g=this.getDegree();g>=0;g--){let y=this.getCoefficient(g);y!==0&&(y<0?(h.append(" - "),y=-y):h.length()>0&&h.append(" + "),(g===0||y!==1)&&h.append(y),g!==0&&(g===1?h.append("x"):(h.append("x^"),h.append(g))))}return h.toString()}}class _P{add(h,g){return(h+g)%this.modulus}subtract(h,g){return(this.modulus+h-g)%this.modulus}exp(h){return this.expTable[h]}log(h){if(h===0)throw new f;return this.logTable[h]}inverse(h){if(h===0)throw new q;return this.expTable[this.modulus-this.logTable[h]-1]}multiply(h,g){return h===0||g===0?0:this.expTable[(this.logTable[h]+this.logTable[g])%(this.modulus-1)]}getSize(){return this.modulus}equals(h){return h===this}}class Ab extends _P{constructor(h,g){super(),this.modulus=h,this.expTable=new Int32Array(h),this.logTable=new Int32Array(h);let y=1;for(let C=0;C<h;C++)this.expTable[C]=y,y=y*g%h;for(let C=0;C<h-1;C++)this.logTable[this.expTable[C]]=C;this.zero=new Fa(this,new Int32Array([0])),this.one=new Fa(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(h,g){if(h<0)throw new f;if(g===0)return this.zero;let y=new Int32Array(h+1);return y[0]=g,new Fa(this,y)}}Ab.PDF417_GF=new Ab(_r.NUMBER_OF_CODEWORDS,3);class VC{constructor(){this.field=Ab.PDF417_GF}decode(h,g,y){let C=new Fa(this.field,h),_=new Int32Array(g),T=!1;for(let ue=g;ue>0;ue--){let Se=C.evaluateAt(this.field.exp(ue));_[g-ue]=Se,Se!==0&&(T=!0)}if(!T)return 0;let j=this.field.getOne();if(y!=null)for(const ue of y){let Se=this.field.exp(h.length-1-ue),Ae=new Fa(this.field,new Int32Array([this.field.subtract(0,Se),1]));j=j.multiply(Ae)}let F=new Fa(this.field,_),U=this.runEuclideanAlgorithm(this.field.buildMonomial(g,1),F,g),ee=U[0],oe=U[1],xe=this.findErrorLocations(ee),Oe=this.findErrorMagnitudes(oe,ee,xe);for(let ue=0;ue<xe.length;ue++){let Se=h.length-1-this.field.log(xe[ue]);if(Se<0)throw m.getChecksumInstance();h[Se]=this.field.subtract(h[Se],Oe[ue])}return xe.length}runEuclideanAlgorithm(h,g,y){if(h.getDegree()<g.getDegree()){let xe=h;h=g,g=xe}let C=h,_=g,T=this.field.getZero(),j=this.field.getOne();for(;_.getDegree()>=Math.round(y/2);){let xe=C,Oe=T;if(C=_,T=j,C.isZero())throw m.getChecksumInstance();_=xe;let ue=this.field.getZero(),Se=C.getCoefficient(C.getDegree()),Ae=this.field.inverse(Se);for(;_.getDegree()>=C.getDegree()&&!_.isZero();){let Be=_.getDegree()-C.getDegree(),lt=this.field.multiply(_.getCoefficient(_.getDegree()),Ae);ue=ue.add(this.field.buildMonomial(Be,lt)),_=_.subtract(C.multiplyByMonomial(Be,lt))}j=ue.multiply(T).subtract(Oe).negative()}let F=j.getCoefficient(0);if(F===0)throw m.getChecksumInstance();let U=this.field.inverse(F),ee=j.multiply(U),oe=_.multiply(U);return[ee,oe]}findErrorLocations(h){let g=h.getDegree(),y=new Int32Array(g),C=0;for(let _=1;_<this.field.getSize()&&C<g;_++)h.evaluateAt(_)===0&&(y[C]=this.field.inverse(_),C++);if(C!==g)throw m.getChecksumInstance();return y}findErrorMagnitudes(h,g,y){let C=g.getDegree(),_=new Int32Array(C);for(let U=1;U<=C;U++)_[C-U]=this.field.multiply(U,g.getCoefficient(U));let T=new Fa(this.field,_),j=y.length,F=new Int32Array(j);for(let U=0;U<j;U++){let ee=this.field.inverse(y[U]),oe=this.field.subtract(0,h.evaluateAt(ee)),xe=this.field.inverse(T.evaluateAt(ee));F[U]=this.field.multiply(oe,xe)}return F}}class Cf{constructor(h,g,y,C,_){h instanceof Cf?this.constructor_2(h):this.constructor_1(h,g,y,C,_)}constructor_1(h,g,y,C,_){const T=g==null||y==null,j=C==null||_==null;if(T&&j)throw new W;T?(g=new ht(0,C.getY()),y=new ht(0,_.getY())):j&&(C=new ht(h.getWidth()-1,g.getY()),_=new ht(h.getWidth()-1,y.getY())),this.image=h,this.topLeft=g,this.bottomLeft=y,this.topRight=C,this.bottomRight=_,this.minX=Math.trunc(Math.min(g.getX(),y.getX())),this.maxX=Math.trunc(Math.max(C.getX(),_.getX())),this.minY=Math.trunc(Math.min(g.getY(),C.getY())),this.maxY=Math.trunc(Math.max(y.getY(),_.getY()))}constructor_2(h){this.image=h.image,this.topLeft=h.getTopLeft(),this.bottomLeft=h.getBottomLeft(),this.topRight=h.getTopRight(),this.bottomRight=h.getBottomRight(),this.minX=h.getMinX(),this.maxX=h.getMaxX(),this.minY=h.getMinY(),this.maxY=h.getMaxY()}static merge(h,g){return h==null?g:g==null?h:new Cf(h.image,h.topLeft,h.bottomLeft,g.topRight,g.bottomRight)}addMissingRows(h,g,y){let C=this.topLeft,_=this.bottomLeft,T=this.topRight,j=this.bottomRight;if(h>0){let F=y?this.topLeft:this.topRight,U=Math.trunc(F.getY()-h);U<0&&(U=0);let ee=new ht(F.getX(),U);y?C=ee:T=ee}if(g>0){let F=y?this.bottomLeft:this.bottomRight,U=Math.trunc(F.getY()+g);U>=this.image.getHeight()&&(U=this.image.getHeight()-1);let ee=new ht(F.getX(),U);y?_=ee:j=ee}return new Cf(this.image,C,_,T,j)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class oi{constructor(h,g,y,C){this.columnCount=h,this.errorCorrectionLevel=C,this.rowCountUpperPart=g,this.rowCountLowerPart=y,this.rowCount=g+y}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Dn{constructor(){this.buffer=""}static form(h,g){let y=-1;function C(T,j,F,U,ee,oe){if(T==="%%")return"%";if(g[++y]===void 0)return;T=U?parseInt(U.substr(1)):void 0;let xe=ee?parseInt(ee.substr(1)):void 0,Oe;switch(oe){case"s":Oe=g[y];break;case"c":Oe=g[y][0];break;case"f":Oe=parseFloat(g[y]).toFixed(T);break;case"p":Oe=parseFloat(g[y]).toPrecision(T);break;case"e":Oe=parseFloat(g[y]).toExponential(T);break;case"x":Oe=parseInt(g[y]).toString(xe||16);break;case"d":Oe=parseFloat(parseInt(g[y],xe||10).toPrecision(T)).toFixed(0);break}Oe=typeof Oe=="object"?JSON.stringify(Oe):(+Oe).toString(xe);let ue=parseInt(F),Se=F&&F[0]+""=="0"?"0":" ";for(;Oe.length<ue;)Oe=j!==void 0?Oe+Se:Se+Oe;return Oe}let _=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return h.replace(_,C)}format(h,...g){this.buffer+=Dn.form(h,g)}toString(){return this.buffer}}class lm{constructor(h){this.boundingBox=new Cf(h),this.codewords=new Array(h.getMaxY()-h.getMinY()+1)}getCodewordNearby(h){let g=this.getCodeword(h);if(g!=null)return g;for(let y=1;y<lm.MAX_NEARBY_DISTANCE;y++){let C=this.imageRowToCodewordIndex(h)-y;if(C>=0&&(g=this.codewords[C],g!=null)||(C=this.imageRowToCodewordIndex(h)+y,C<this.codewords.length&&(g=this.codewords[C],g!=null)))return g}return null}imageRowToCodewordIndex(h){return h-this.boundingBox.getMinY()}setCodeword(h,g){this.codewords[this.imageRowToCodewordIndex(h)]=g}getCodeword(h){return this.codewords[this.imageRowToCodewordIndex(h)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const h=new Dn;let g=0;for(const y of this.codewords){if(y==null){h.format("%3d:    |   %n",g++);continue}h.format("%3d: %3d|%3d%n",g++,y.getRowNumber(),y.getValue())}return h.toString()}}lm.MAX_NEARBY_DISTANCE=5;class cm{constructor(){this.values=new Map}setValue(h){h=Math.trunc(h);let g=this.values.get(h);g==null&&(g=0),g++,this.values.set(h,g)}getValue(){let h=-1,g=new Array;for(const[y,C]of this.values.entries()){const _={getKey:()=>y,getValue:()=>C};_.getValue()>h?(h=_.getValue(),g=[],g.push(_.getKey())):_.getValue()===h&&g.push(_.getKey())}return _r.toIntArray(g)}getConfidence(h){return this.values.get(h)}}class qC extends lm{constructor(h,g){super(h),this._isLeft=g}setRowNumbers(){for(let h of this.getCodewords())h!=null&&h.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(h){let g=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(g,h);let y=this.getBoundingBox(),C=this._isLeft?y.getTopLeft():y.getTopRight(),_=this._isLeft?y.getBottomLeft():y.getBottomRight(),T=this.imageRowToCodewordIndex(Math.trunc(C.getY())),j=this.imageRowToCodewordIndex(Math.trunc(_.getY())),F=-1,U=1,ee=0;for(let oe=T;oe<j;oe++){if(g[oe]==null)continue;let xe=g[oe],Oe=xe.getRowNumber()-F;if(Oe===0)ee++;else if(Oe===1)U=Math.max(U,ee),ee=1,F=xe.getRowNumber();else if(Oe<0||xe.getRowNumber()>=h.getRowCount()||Oe>oe)g[oe]=null;else{let ue;U>2?ue=(U-2)*Oe:ue=Oe;let Se=ue>=oe;for(let Ae=1;Ae<=ue&&!Se;Ae++)Se=g[oe-Ae]!=null;Se?g[oe]=null:(F=xe.getRowNumber(),ee=1)}}}getRowHeights(){let h=this.getBarcodeMetadata();if(h==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(h);let g=new Int32Array(h.getRowCount());for(let y of this.getCodewords())if(y!=null){let C=y.getRowNumber();if(C>=g.length)continue;g[C]++}return g}adjustIncompleteIndicatorColumnRowNumbers(h){let g=this.getBoundingBox(),y=this._isLeft?g.getTopLeft():g.getTopRight(),C=this._isLeft?g.getBottomLeft():g.getBottomRight(),_=this.imageRowToCodewordIndex(Math.trunc(y.getY())),T=this.imageRowToCodewordIndex(Math.trunc(C.getY())),j=this.getCodewords(),F=-1;for(let U=_;U<T;U++){if(j[U]==null)continue;let ee=j[U];ee.setRowNumberAsRowIndicatorColumn();let oe=ee.getRowNumber()-F;oe===0||(oe===1?F=ee.getRowNumber():ee.getRowNumber()>=h.getRowCount()?j[U]=null:F=ee.getRowNumber())}}getBarcodeMetadata(){let h=this.getCodewords(),g=new cm,y=new cm,C=new cm,_=new cm;for(let j of h){if(j==null)continue;j.setRowNumberAsRowIndicatorColumn();let F=j.getValue()%30,U=j.getRowNumber();switch(this._isLeft||(U+=2),U%3){case 0:y.setValue(F*3+1);break;case 1:_.setValue(F/3),C.setValue(F%3);break;case 2:g.setValue(F+1);break}}if(g.getValue().length===0||y.getValue().length===0||C.getValue().length===0||_.getValue().length===0||g.getValue()[0]<1||y.getValue()[0]+C.getValue()[0]<_r.MIN_ROWS_IN_BARCODE||y.getValue()[0]+C.getValue()[0]>_r.MAX_ROWS_IN_BARCODE)return null;let T=new oi(g.getValue()[0],y.getValue()[0],C.getValue()[0],_.getValue()[0]);return this.removeIncorrectCodewords(h,T),T}removeIncorrectCodewords(h,g){for(let y=0;y<h.length;y++){let C=h[y];if(h[y]==null)continue;let _=C.getValue()%30,T=C.getRowNumber();if(T>g.getRowCount()){h[y]=null;continue}switch(this._isLeft||(T+=2),T%3){case 0:_*3+1!==g.getRowCountUpperPart()&&(h[y]=null);break;case 1:(Math.trunc(_/3)!==g.getErrorCorrectionLevel()||_%3!==g.getRowCountLowerPart())&&(h[y]=null);break;case 2:_+1!==g.getColumnCount()&&(h[y]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class um{constructor(h,g){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=h,this.barcodeColumnCount=h.getColumnCount(),this.boundingBox=g,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let h=_r.MAX_CODEWORDS_IN_BARCODE,g;do g=h,h=this.adjustRowNumbersAndGetCount();while(h>0&&h<g);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(h){h!=null&&h.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let h=this.adjustRowNumbersByRow();if(h===0)return 0;for(let g=1;g<this.barcodeColumnCount+1;g++){let y=this.detectionResultColumns[g].getCodewords();for(let C=0;C<y.length;C++)y[C]!=null&&(y[C].hasValidRowNumber()||this.adjustRowNumbers(g,C,y))}return h}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let h=this.detectionResultColumns[0].getCodewords(),g=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let y=0;y<h.length;y++)if(h[y]!=null&&g[y]!=null&&h[y].getRowNumber()===g[y].getRowNumber())for(let C=1;C<=this.barcodeColumnCount;C++){let _=this.detectionResultColumns[C].getCodewords()[y];_!=null&&(_.setRowNumber(h[y].getRowNumber()),_.hasValidRowNumber()||(this.detectionResultColumns[C].getCodewords()[y]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let h=0,g=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let y=0;y<g.length;y++){if(g[y]==null)continue;let C=g[y].getRowNumber(),_=0;for(let T=this.barcodeColumnCount+1;T>0&&_<this.ADJUST_ROW_NUMBER_SKIP;T--){let j=this.detectionResultColumns[T].getCodewords()[y];j!=null&&(_=um.adjustRowNumberIfValid(C,_,j),j.hasValidRowNumber()||h++)}}return h}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let h=0,g=this.detectionResultColumns[0].getCodewords();for(let y=0;y<g.length;y++){if(g[y]==null)continue;let C=g[y].getRowNumber(),_=0;for(let T=1;T<this.barcodeColumnCount+1&&_<this.ADJUST_ROW_NUMBER_SKIP;T++){let j=this.detectionResultColumns[T].getCodewords()[y];j!=null&&(_=um.adjustRowNumberIfValid(C,_,j),j.hasValidRowNumber()||h++)}}return h}static adjustRowNumberIfValid(h,g,y){return y==null||y.hasValidRowNumber()||(y.isValidRowNumber(h)?(y.setRowNumber(h),g=0):++g),g}adjustRowNumbers(h,g,y){if(!this.detectionResultColumns[h-1])return;let C=y[g],_=this.detectionResultColumns[h-1].getCodewords(),T=_;this.detectionResultColumns[h+1]!=null&&(T=this.detectionResultColumns[h+1].getCodewords());let j=new Array(14);j[2]=_[g],j[3]=T[g],g>0&&(j[0]=y[g-1],j[4]=_[g-1],j[5]=T[g-1]),g>1&&(j[8]=y[g-2],j[10]=_[g-2],j[11]=T[g-2]),g<y.length-1&&(j[1]=y[g+1],j[6]=_[g+1],j[7]=T[g+1]),g<y.length-2&&(j[9]=y[g+2],j[12]=_[g+2],j[13]=T[g+2]);for(let F of j)if(um.adjustRowNumber(C,F))return}static adjustRowNumber(h,g){return g==null?!1:g.hasValidRowNumber()&&g.getBucket()===h.getBucket()?(h.setRowNumber(g.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(h){this.boundingBox=h}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(h,g){this.detectionResultColumns[h]=g}getDetectionResultColumn(h){return this.detectionResultColumns[h]}toString(){let h=this.detectionResultColumns[0];h==null&&(h=this.detectionResultColumns[this.barcodeColumnCount+1]);let g=new Dn;for(let y=0;y<h.getCodewords().length;y++){g.format("CW %3d:",y);for(let C=0;C<this.barcodeColumnCount+2;C++){if(this.detectionResultColumns[C]==null){g.format("    |   ");continue}let _=this.detectionResultColumns[C].getCodewords()[y];if(_==null){g.format("    |   ");continue}g.format(" %3d|%3d",_.getRowNumber(),_.getValue())}g.format("%n")}return g.toString()}}class dm{constructor(h,g,y,C){this.rowNumber=dm.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(h),this.endX=Math.trunc(g),this.bucket=Math.trunc(y),this.value=Math.trunc(C)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(h){return h!==dm.BARCODE_ROW_UNKNOWN&&this.bucket===h%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(h){this.rowNumber=h}toString(){return this.rowNumber+"|"+this.value}}dm.BARCODE_ROW_UNKNOWN=-1;class zs{static initialize(){for(let h=0;h<_r.SYMBOL_TABLE.length;h++){let g=_r.SYMBOL_TABLE[h],y=g&1;for(let C=0;C<_r.BARS_IN_MODULE;C++){let _=0;for(;(g&1)===y;)_+=1,g>>=1;y=g&1,zs.RATIOS_TABLE[h]||(zs.RATIOS_TABLE[h]=new Array(_r.BARS_IN_MODULE)),zs.RATIOS_TABLE[h][_r.BARS_IN_MODULE-C-1]=Math.fround(_/_r.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(h){let g=zs.getDecodedCodewordValue(zs.sampleBitCounts(h));return g!==-1?g:zs.getClosestDecodedValue(h)}static sampleBitCounts(h){let g=ut.sum(h),y=new Int32Array(_r.BARS_IN_MODULE),C=0,_=0;for(let T=0;T<_r.MODULES_IN_CODEWORD;T++){let j=g/(2*_r.MODULES_IN_CODEWORD)+T*g/_r.MODULES_IN_CODEWORD;_+h[C]<=j&&(_+=h[C],C++),y[C]++}return y}static getDecodedCodewordValue(h){let g=zs.getBitValue(h);return _r.getCodeword(g)===-1?-1:g}static getBitValue(h){let g=0;for(let y=0;y<h.length;y++)for(let C=0;C<h[y];C++)g=g<<1|(y%2===0?1:0);return Math.trunc(g)}static getClosestDecodedValue(h){let g=ut.sum(h),y=new Array(_r.BARS_IN_MODULE);if(g>1)for(let T=0;T<y.length;T++)y[T]=Math.fround(h[T]/g);let C=kt.MAX_VALUE,_=-1;this.bSymbolTableReady||zs.initialize();for(let T=0;T<zs.RATIOS_TABLE.length;T++){let j=0,F=zs.RATIOS_TABLE[T];for(let U=0;U<_r.BARS_IN_MODULE;U++){let ee=Math.fround(F[U]-y[U]);if(j+=Math.fround(ee*ee),j>=C)break}j<C&&(C=j,_=_r.SYMBOL_TABLE[T])}return _}}zs.bSymbolTableReady=!1,zs.RATIOS_TABLE=new Array(_r.SYMBOL_TABLE.length).map(se=>new Array(_r.BARS_IN_MODULE));class Tb{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(h){this.segmentIndex=h}getFileId(){return this.fileId}setFileId(h){this.fileId=h}getOptionalData(){return this.optionalData}setOptionalData(h){this.optionalData=h}isLastSegment(){return this.lastSegment}setLastSegment(h){this.lastSegment=h}getSegmentCount(){return this.segmentCount}setSegmentCount(h){this.segmentCount=h}getSender(){return this.sender||null}setSender(h){this.sender=h}getAddressee(){return this.addressee||null}setAddressee(h){this.addressee=h}getFileName(){return this.fileName}setFileName(h){this.fileName=h}getFileSize(){return this.fileSize}setFileSize(h){this.fileSize=h}getChecksum(){return this.checksum}setChecksum(h){this.checksum=h}getTimestamp(){return this.timestamp}setTimestamp(h){this.timestamp=h}}class GC{static parseLong(h,g=void 0){return parseInt(h,g)}}class wa extends c{}wa.kind="NullPointerException";class Ib{writeBytes(h){this.writeBytesOffset(h,0,h.length)}writeBytesOffset(h,g,y){if(h==null)throw new wa;if(g<0||g>h.length||y<0||g+y>h.length||g+y<0)throw new b;if(y===0)return;for(let C=0;C<y;C++)this.write(h[g+C])}flush(){}close(){}}class kf extends c{}class KC extends Ib{constructor(h=32){if(super(),this.count=0,h<0)throw new f("Negative initial size: "+h);this.buf=new Uint8Array(h)}ensureCapacity(h){h-this.buf.length>0&&this.grow(h)}grow(h){let y=this.buf.length<<1;if(y-h<0&&(y=h),y<0){if(h<0)throw new kf;y=E.MAX_VALUE}this.buf=k.copyOfUint8Array(this.buf,y)}write(h){this.ensureCapacity(this.count+1),this.buf[this.count]=h,this.count+=1}writeBytesOffset(h,g,y){if(g<0||g>h.length||y<0||g+y-h.length>0)throw new b;this.ensureCapacity(this.count+y),v.arraycopy(h,g,this.buf,this.count,y),this.count+=y}writeTo(h){h.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return k.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(h){return h?typeof h=="string"?this.toString_string(h):this.toString_number(h):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(h){return new String(this.buf).toString()}toString_number(h){return new String(this.buf).toString()}close(){}}var Mn;(function(se){se[se.ALPHA=0]="ALPHA",se[se.LOWER=1]="LOWER",se[se.MIXED=2]="MIXED",se[se.PUNCT=3]="PUNCT",se[se.ALPHA_SHIFT=4]="ALPHA_SHIFT",se[se.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Mn||(Mn={}));function Co(){if(typeof window<"u")return window.BigInt||null;if(typeof Ve<"u")return Ve.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let fm;function Su(se){if(typeof fm>"u"&&(fm=Co()),fm===null)throw new Error("BigInt is not supported!");return fm(se)}function XC(){let se=[];se[0]=Su(1);let h=Su(900);se[1]=h;for(let g=2;g<16;g++)se[g]=se[g-1]*h;return se}class tt{static decode(h,g){let y=new te(""),C=L.ISO8859_1;y.enableDecoding(C);let _=1,T=h[_++],j=new Tb;for(;_<h[0];){switch(T){case tt.TEXT_COMPACTION_MODE_LATCH:_=tt.textCompaction(h,_,y);break;case tt.BYTE_COMPACTION_MODE_LATCH:case tt.BYTE_COMPACTION_MODE_LATCH_6:_=tt.byteCompaction(T,h,C,_,y);break;case tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(h[_++]);break;case tt.NUMERIC_COMPACTION_MODE_LATCH:_=tt.numericCompaction(h,_,y);break;case tt.ECI_CHARSET:L.getCharacterSetECIByValue(h[_++]);break;case tt.ECI_GENERAL_PURPOSE:_+=2;break;case tt.ECI_USER_DEFINED:_++;break;case tt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:_=tt.decodeMacroBlock(h,_,j);break;case tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case tt.MACRO_PDF417_TERMINATOR:throw new O;default:_--,_=tt.textCompaction(h,_,y);break}if(_<h.length)T=h[_++];else throw O.getFormatInstance()}if(y.length()===0)throw O.getFormatInstance();let F=new ae(null,y.toString(),null,g);return F.setOther(j),F}static decodeMacroBlock(h,g,y){if(g+tt.NUMBER_OF_SEQUENCE_CODEWORDS>h[0])throw O.getFormatInstance();let C=new Int32Array(tt.NUMBER_OF_SEQUENCE_CODEWORDS);for(let j=0;j<tt.NUMBER_OF_SEQUENCE_CODEWORDS;j++,g++)C[j]=h[g];y.setSegmentIndex(E.parseInt(tt.decodeBase900toBase10(C,tt.NUMBER_OF_SEQUENCE_CODEWORDS)));let _=new te;g=tt.textCompaction(h,g,_),y.setFileId(_.toString());let T=-1;for(h[g]===tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(T=g+1);g<h[0];)switch(h[g]){case tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(g++,h[g]){case tt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let j=new te;g=tt.textCompaction(h,g+1,j),y.setFileName(j.toString());break;case tt.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let F=new te;g=tt.textCompaction(h,g+1,F),y.setSender(F.toString());break;case tt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let U=new te;g=tt.textCompaction(h,g+1,U),y.setAddressee(U.toString());break;case tt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let ee=new te;g=tt.numericCompaction(h,g+1,ee),y.setSegmentCount(E.parseInt(ee.toString()));break;case tt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let oe=new te;g=tt.numericCompaction(h,g+1,oe),y.setTimestamp(GC.parseLong(oe.toString()));break;case tt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let xe=new te;g=tt.numericCompaction(h,g+1,xe),y.setChecksum(E.parseInt(xe.toString()));break;case tt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Oe=new te;g=tt.numericCompaction(h,g+1,Oe),y.setFileSize(GC.parseLong(Oe.toString()));break;default:throw O.getFormatInstance()}break;case tt.MACRO_PDF417_TERMINATOR:g++,y.setLastSegment(!0);break;default:throw O.getFormatInstance()}if(T!==-1){let j=g-T;y.isLastSegment()&&j--,y.setOptionalData(k.copyOfRange(h,T,T+j))}return g}static textCompaction(h,g,y){let C=new Int32Array((h[0]-g)*2),_=new Int32Array((h[0]-g)*2),T=0,j=!1;for(;g<h[0]&&!j;){let F=h[g++];if(F<tt.TEXT_COMPACTION_MODE_LATCH)C[T]=F/30,C[T+1]=F%30,T+=2;else switch(F){case tt.TEXT_COMPACTION_MODE_LATCH:C[T++]=tt.TEXT_COMPACTION_MODE_LATCH;break;case tt.BYTE_COMPACTION_MODE_LATCH:case tt.BYTE_COMPACTION_MODE_LATCH_6:case tt.NUMERIC_COMPACTION_MODE_LATCH:case tt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case tt.MACRO_PDF417_TERMINATOR:g--,j=!0;break;case tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:C[T]=tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,F=h[g++],_[T]=F,T++;break}}return tt.decodeTextCompaction(C,_,T,y),g}static decodeTextCompaction(h,g,y,C){let _=Mn.ALPHA,T=Mn.ALPHA,j=0;for(;j<y;){let F=h[j],U="";switch(_){case Mn.ALPHA:if(F<26)U=String.fromCharCode(65+F);else switch(F){case 26:U=" ";break;case tt.LL:_=Mn.LOWER;break;case tt.ML:_=Mn.MIXED;break;case tt.PS:T=_,_=Mn.PUNCT_SHIFT;break;case tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:C.append(g[j]);break;case tt.TEXT_COMPACTION_MODE_LATCH:_=Mn.ALPHA;break}break;case Mn.LOWER:if(F<26)U=String.fromCharCode(97+F);else switch(F){case 26:U=" ";break;case tt.AS:T=_,_=Mn.ALPHA_SHIFT;break;case tt.ML:_=Mn.MIXED;break;case tt.PS:T=_,_=Mn.PUNCT_SHIFT;break;case tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:C.append(g[j]);break;case tt.TEXT_COMPACTION_MODE_LATCH:_=Mn.ALPHA;break}break;case Mn.MIXED:if(F<tt.PL)U=tt.MIXED_CHARS[F];else switch(F){case tt.PL:_=Mn.PUNCT;break;case 26:U=" ";break;case tt.LL:_=Mn.LOWER;break;case tt.AL:_=Mn.ALPHA;break;case tt.PS:T=_,_=Mn.PUNCT_SHIFT;break;case tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:C.append(g[j]);break;case tt.TEXT_COMPACTION_MODE_LATCH:_=Mn.ALPHA;break}break;case Mn.PUNCT:if(F<tt.PAL)U=tt.PUNCT_CHARS[F];else switch(F){case tt.PAL:_=Mn.ALPHA;break;case tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:C.append(g[j]);break;case tt.TEXT_COMPACTION_MODE_LATCH:_=Mn.ALPHA;break}break;case Mn.ALPHA_SHIFT:if(_=T,F<26)U=String.fromCharCode(65+F);else switch(F){case 26:U=" ";break;case tt.TEXT_COMPACTION_MODE_LATCH:_=Mn.ALPHA;break}break;case Mn.PUNCT_SHIFT:if(_=T,F<tt.PAL)U=tt.PUNCT_CHARS[F];else switch(F){case tt.PAL:_=Mn.ALPHA;break;case tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:C.append(g[j]);break;case tt.TEXT_COMPACTION_MODE_LATCH:_=Mn.ALPHA;break}break}U!==""&&C.append(U),j++}}static byteCompaction(h,g,y,C,_){let T=new KC,j=0,F=0,U=!1;switch(h){case tt.BYTE_COMPACTION_MODE_LATCH:let ee=new Int32Array(6),oe=g[C++];for(;C<g[0]&&!U;)switch(ee[j++]=oe,F=900*F+oe,oe=g[C++],oe){case tt.TEXT_COMPACTION_MODE_LATCH:case tt.BYTE_COMPACTION_MODE_LATCH:case tt.NUMERIC_COMPACTION_MODE_LATCH:case tt.BYTE_COMPACTION_MODE_LATCH_6:case tt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case tt.MACRO_PDF417_TERMINATOR:C--,U=!0;break;default:if(j%5===0&&j>0){for(let xe=0;xe<6;++xe)T.write(Number(Su(F)>>Su(8*(5-xe))));F=0,j=0}break}C===g[0]&&oe<tt.TEXT_COMPACTION_MODE_LATCH&&(ee[j++]=oe);for(let xe=0;xe<j;xe++)T.write(ee[xe]);break;case tt.BYTE_COMPACTION_MODE_LATCH_6:for(;C<g[0]&&!U;){let xe=g[C++];if(xe<tt.TEXT_COMPACTION_MODE_LATCH)j++,F=900*F+xe;else switch(xe){case tt.TEXT_COMPACTION_MODE_LATCH:case tt.BYTE_COMPACTION_MODE_LATCH:case tt.NUMERIC_COMPACTION_MODE_LATCH:case tt.BYTE_COMPACTION_MODE_LATCH_6:case tt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case tt.MACRO_PDF417_TERMINATOR:C--,U=!0;break}if(j%5===0&&j>0){for(let Oe=0;Oe<6;++Oe)T.write(Number(Su(F)>>Su(8*(5-Oe))));F=0,j=0}}break}return _.append(z.decode(T.toByteArray(),y)),C}static numericCompaction(h,g,y){let C=0,_=!1,T=new Int32Array(tt.MAX_NUMERIC_CODEWORDS);for(;g<h[0]&&!_;){let j=h[g++];if(g===h[0]&&(_=!0),j<tt.TEXT_COMPACTION_MODE_LATCH)T[C]=j,C++;else switch(j){case tt.TEXT_COMPACTION_MODE_LATCH:case tt.BYTE_COMPACTION_MODE_LATCH:case tt.BYTE_COMPACTION_MODE_LATCH_6:case tt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case tt.MACRO_PDF417_TERMINATOR:g--,_=!0;break}(C%tt.MAX_NUMERIC_CODEWORDS===0||j===tt.NUMERIC_COMPACTION_MODE_LATCH||_)&&C>0&&(y.append(tt.decodeBase900toBase10(T,C)),C=0)}return g}static decodeBase900toBase10(h,g){let y=Su(0);for(let _=0;_<g;_++)y+=tt.EXP900[g-_-1]*Su(h[_]);let C=y.toString();if(C.charAt(0)!=="1")throw new O;return C.substring(1)}}tt.TEXT_COMPACTION_MODE_LATCH=900,tt.BYTE_COMPACTION_MODE_LATCH=901,tt.NUMERIC_COMPACTION_MODE_LATCH=902,tt.BYTE_COMPACTION_MODE_LATCH_6=924,tt.ECI_USER_DEFINED=925,tt.ECI_GENERAL_PURPOSE=926,tt.ECI_CHARSET=927,tt.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,tt.MACRO_PDF417_TERMINATOR=922,tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,tt.MAX_NUMERIC_CODEWORDS=15,tt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,tt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,tt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,tt.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,tt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,tt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,tt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,tt.PL=25,tt.LL=27,tt.AS=27,tt.ML=28,tt.AL=28,tt.PS=29,tt.PAL=29,tt.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,tt.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",tt.EXP900=Co()?XC():[],tt.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Kr{constructor(){}static decode(h,g,y,C,_,T,j){let F=new Cf(h,g,y,C,_),U=null,ee=null,oe;for(let ue=!0;;ue=!1){if(g!=null&&(U=Kr.getRowIndicatorColumn(h,F,g,!0,T,j)),C!=null&&(ee=Kr.getRowIndicatorColumn(h,F,C,!1,T,j)),oe=Kr.merge(U,ee),oe==null)throw W.getNotFoundInstance();let Se=oe.getBoundingBox();if(ue&&Se!=null&&(Se.getMinY()<F.getMinY()||Se.getMaxY()>F.getMaxY()))F=Se;else break}oe.setBoundingBox(F);let xe=oe.getBarcodeColumnCount()+1;oe.setDetectionResultColumn(0,U),oe.setDetectionResultColumn(xe,ee);let Oe=U!=null;for(let ue=1;ue<=xe;ue++){let Se=Oe?ue:xe-ue;if(oe.getDetectionResultColumn(Se)!==void 0)continue;let Ae;Se===0||Se===xe?Ae=new qC(F,Se===0):Ae=new lm(F),oe.setDetectionResultColumn(Se,Ae);let Be=-1,lt=Be;for(let gt=F.getMinY();gt<=F.getMaxY();gt++){if(Be=Kr.getStartColumn(oe,Se,gt,Oe),Be<0||Be>F.getMaxX()){if(lt===-1)continue;Be=lt}let vt=Kr.detectCodeword(h,F.getMinX(),F.getMaxX(),Oe,Be,gt,T,j);vt!=null&&(Ae.setCodeword(gt,vt),lt=Be,T=Math.min(T,vt.getWidth()),j=Math.max(j,vt.getWidth()))}}return Kr.createDecoderResult(oe)}static merge(h,g){if(h==null&&g==null)return null;let y=Kr.getBarcodeMetadata(h,g);if(y==null)return null;let C=Cf.merge(Kr.adjustBoundingBox(h),Kr.adjustBoundingBox(g));return new um(y,C)}static adjustBoundingBox(h){if(h==null)return null;let g=h.getRowHeights();if(g==null)return null;let y=Kr.getMax(g),C=0;for(let j of g)if(C+=y-j,j>0)break;let _=h.getCodewords();for(let j=0;C>0&&_[j]==null;j++)C--;let T=0;for(let j=g.length-1;j>=0&&(T+=y-g[j],!(g[j]>0));j--);for(let j=_.length-1;T>0&&_[j]==null;j--)T--;return h.getBoundingBox().addMissingRows(C,T,h.isLeft())}static getMax(h){let g=-1;for(let y of h)g=Math.max(g,y);return g}static getBarcodeMetadata(h,g){let y;if(h==null||(y=h.getBarcodeMetadata())==null)return g==null?null:g.getBarcodeMetadata();let C;return g==null||(C=g.getBarcodeMetadata())==null?y:y.getColumnCount()!==C.getColumnCount()&&y.getErrorCorrectionLevel()!==C.getErrorCorrectionLevel()&&y.getRowCount()!==C.getRowCount()?null:y}static getRowIndicatorColumn(h,g,y,C,_,T){let j=new qC(g,C);for(let F=0;F<2;F++){let U=F===0?1:-1,ee=Math.trunc(Math.trunc(y.getX()));for(let oe=Math.trunc(Math.trunc(y.getY()));oe<=g.getMaxY()&&oe>=g.getMinY();oe+=U){let xe=Kr.detectCodeword(h,0,h.getWidth(),C,ee,oe,_,T);xe!=null&&(j.setCodeword(oe,xe),C?ee=xe.getStartX():ee=xe.getEndX())}}return j}static adjustCodewordCount(h,g){let y=g[0][1],C=y.getValue(),_=h.getBarcodeColumnCount()*h.getBarcodeRowCount()-Kr.getNumberOfECCodeWords(h.getBarcodeECLevel());if(C.length===0){if(_<1||_>_r.MAX_CODEWORDS_IN_BARCODE)throw W.getNotFoundInstance();y.setValue(_)}else C[0]!==_&&y.setValue(_)}static createDecoderResult(h){let g=Kr.createBarcodeMatrix(h);Kr.adjustCodewordCount(h,g);let y=new Array,C=new Int32Array(h.getBarcodeRowCount()*h.getBarcodeColumnCount()),_=[],T=new Array;for(let F=0;F<h.getBarcodeRowCount();F++)for(let U=0;U<h.getBarcodeColumnCount();U++){let ee=g[F][U+1].getValue(),oe=F*h.getBarcodeColumnCount()+U;ee.length===0?y.push(oe):ee.length===1?C[oe]=ee[0]:(T.push(oe),_.push(ee))}let j=new Array(_.length);for(let F=0;F<j.length;F++)j[F]=_[F];return Kr.createDecoderResultFromAmbiguousValues(h.getBarcodeECLevel(),C,_r.toIntArray(y),_r.toIntArray(T),j)}static createDecoderResultFromAmbiguousValues(h,g,y,C,_){let T=new Int32Array(C.length),j=100;for(;j-- >0;){for(let F=0;F<T.length;F++)g[C[F]]=_[F][T[F]];try{return Kr.decodeCodewords(g,h,y)}catch(F){if(!(F instanceof m))throw F}if(T.length===0)throw m.getChecksumInstance();for(let F=0;F<T.length;F++)if(T[F]<_[F].length-1){T[F]++;break}else if(T[F]=0,F===T.length-1)throw m.getChecksumInstance()}throw m.getChecksumInstance()}static createBarcodeMatrix(h){let g=Array.from({length:h.getBarcodeRowCount()},()=>new Array(h.getBarcodeColumnCount()+2));for(let C=0;C<g.length;C++)for(let _=0;_<g[C].length;_++)g[C][_]=new cm;let y=0;for(let C of h.getDetectionResultColumns()){if(C!=null){for(let _ of C.getCodewords())if(_!=null){let T=_.getRowNumber();if(T>=0){if(T>=g.length)continue;g[T][y].setValue(_.getValue())}}}y++}return g}static isValidBarcodeColumn(h,g){return g>=0&&g<=h.getBarcodeColumnCount()+1}static getStartColumn(h,g,y,C){let _=C?1:-1,T=null;if(Kr.isValidBarcodeColumn(h,g-_)&&(T=h.getDetectionResultColumn(g-_).getCodeword(y)),T!=null)return C?T.getEndX():T.getStartX();if(T=h.getDetectionResultColumn(g).getCodewordNearby(y),T!=null)return C?T.getStartX():T.getEndX();if(Kr.isValidBarcodeColumn(h,g-_)&&(T=h.getDetectionResultColumn(g-_).getCodewordNearby(y)),T!=null)return C?T.getEndX():T.getStartX();let j=0;for(;Kr.isValidBarcodeColumn(h,g-_);){g-=_;for(let F of h.getDetectionResultColumn(g).getCodewords())if(F!=null)return(C?F.getEndX():F.getStartX())+_*j*(F.getEndX()-F.getStartX());j++}return C?h.getBoundingBox().getMinX():h.getBoundingBox().getMaxX()}static detectCodeword(h,g,y,C,_,T,j,F){_=Kr.adjustCodewordStartColumn(h,g,y,C,_,T);let U=Kr.getModuleBitCount(h,g,y,C,_,T);if(U==null)return null;let ee,oe=ut.sum(U);if(C)ee=_+oe;else{for(let ue=0;ue<U.length/2;ue++){let Se=U[ue];U[ue]=U[U.length-1-ue],U[U.length-1-ue]=Se}ee=_,_=ee-oe}if(!Kr.checkCodewordSkew(oe,j,F))return null;let xe=zs.getDecodedValue(U),Oe=_r.getCodeword(xe);return Oe===-1?null:new dm(_,ee,Kr.getCodewordBucketNumber(xe),Oe)}static getModuleBitCount(h,g,y,C,_,T){let j=_,F=new Int32Array(8),U=0,ee=C?1:-1,oe=C;for(;(C?j<y:j>=g)&&U<F.length;)h.get(j,T)===oe?(F[U]++,j+=ee):(U++,oe=!oe);return U===F.length||j===(C?y:g)&&U===F.length-1?F:null}static getNumberOfECCodeWords(h){return 2<<h}static adjustCodewordStartColumn(h,g,y,C,_,T){let j=_,F=C?-1:1;for(let U=0;U<2;U++){for(;(C?j>=g:j<y)&&C===h.get(j,T);){if(Math.abs(_-j)>Kr.CODEWORD_SKEW_SIZE)return _;j+=F}F=-F,C=!C}return j}static checkCodewordSkew(h,g,y){return g-Kr.CODEWORD_SKEW_SIZE<=h&&h<=y+Kr.CODEWORD_SKEW_SIZE}static decodeCodewords(h,g,y){if(h.length===0)throw O.getFormatInstance();let C=1<<g+1,_=Kr.correctErrors(h,y,C);Kr.verifyCodewordCount(h,C);let T=tt.decode(h,""+g);return T.setErrorsCorrected(_),T.setErasures(y.length),T}static correctErrors(h,g,y){if(g!=null&&g.length>y/2+Kr.MAX_ERRORS||y<0||y>Kr.MAX_EC_CODEWORDS)throw m.getChecksumInstance();return Kr.errorCorrection.decode(h,y,g)}static verifyCodewordCount(h,g){if(h.length<4)throw O.getFormatInstance();let y=h[0];if(y>h.length)throw O.getFormatInstance();if(y===0)if(g<h.length)h[0]=h.length-g;else throw O.getFormatInstance()}static getBitCountForCodeword(h){let g=new Int32Array(8),y=0,C=g.length-1;for(;!((h&1)!==y&&(y=h&1,C--,C<0));)g[C]++,h>>=1;return g}static getCodewordBucketNumber(h){return h instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(h):this.getCodewordBucketNumber_number(h)}static getCodewordBucketNumber_number(h){return Kr.getCodewordBucketNumber(Kr.getBitCountForCodeword(h))}static getCodewordBucketNumber_Int32Array(h){return(h[0]-h[2]+h[4]-h[6]+9)%9}static toString(h){let g=new Dn;for(let y=0;y<h.length;y++){g.format("Row %2d: ",y);for(let C=0;C<h[y].length;C++){let _=h[y][C];_.getValue().length===0?g.format("        ",null):g.format("%4d(%2d)",_.getValue()[0],_.getConfidence(_.getValue()[0]))}g.format("%n")}return g.toString()}}Kr.CODEWORD_SKEW_SIZE=2,Kr.MAX_ERRORS=3,Kr.MAX_EC_CODEWORDS=512,Kr.errorCorrection=new VC;class Sa{decode(h,g=null){let y=Sa.decode(h,g,!1);if(y==null||y.length===0||y[0]==null)throw W.getNotFoundInstance();return y[0]}decodeMultiple(h,g=null){try{return Sa.decode(h,g,!0)}catch(y){throw y instanceof O||y instanceof m?W.getNotFoundInstance():y}}static decode(h,g,y){const C=new Array,_=zr.detectMultiple(h,g,y);for(const T of _.getPoints()){const j=Kr.decode(_.getBits(),T[4],T[5],T[6],T[7],Sa.getMinCodewordWidth(T),Sa.getMaxCodewordWidth(T)),F=new V(j.getText(),j.getRawBytes(),void 0,T,ie.PDF_417);F.putMetadata(ne.ERROR_CORRECTION_LEVEL,j.getECLevel());const U=j.getOther();U!=null&&F.putMetadata(ne.PDF417_EXTRA_METADATA,U),C.push(F)}return C.map(T=>T)}static getMaxWidth(h,g){return h==null||g==null?0:Math.trunc(Math.abs(h.getX()-g.getX()))}static getMinWidth(h,g){return h==null||g==null?E.MAX_VALUE:Math.trunc(Math.abs(h.getX()-g.getX()))}static getMaxCodewordWidth(h){return Math.floor(Math.max(Math.max(Sa.getMaxWidth(h[0],h[4]),Sa.getMaxWidth(h[6],h[2])*_r.MODULES_IN_CODEWORD/_r.MODULES_IN_STOP_PATTERN),Math.max(Sa.getMaxWidth(h[1],h[5]),Sa.getMaxWidth(h[7],h[3])*_r.MODULES_IN_CODEWORD/_r.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(h){return Math.floor(Math.min(Math.min(Sa.getMinWidth(h[0],h[4]),Sa.getMinWidth(h[6],h[2])*_r.MODULES_IN_CODEWORD/_r.MODULES_IN_STOP_PATTERN),Math.min(Sa.getMinWidth(h[1],h[5]),Sa.getMinWidth(h[7],h[3])*_r.MODULES_IN_CODEWORD/_r.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ya extends c{}Ya.kind="ReaderException";class YC{constructor(h,g){this.verbose=h===!0,g&&this.setHints(g)}decode(h,g){return g&&this.setHints(g),this.decodeInternal(h)}decodeWithState(h){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(h)}setHints(h){this.hints=h;const g=!n(h)&&h.get(R.TRY_HARDER)===!0,y=n(h)?null:h.get(R.POSSIBLE_FORMATS),C=new Array;if(!n(y)){const _=y.some(T=>T===ie.UPC_A||T===ie.UPC_E||T===ie.EAN_13||T===ie.EAN_8||T===ie.CODABAR||T===ie.CODE_39||T===ie.CODE_93||T===ie.CODE_128||T===ie.ITF||T===ie.RSS_14||T===ie.RSS_EXPANDED);_&&!g&&C.push(new wo(h,this.verbose)),y.includes(ie.QR_CODE)&&C.push(new xd),y.includes(ie.DATA_MATRIX)&&C.push(new jl),y.includes(ie.AZTEC)&&C.push(new Te),y.includes(ie.PDF_417)&&C.push(new Sa),_&&g&&C.push(new wo(h,this.verbose))}C.length===0&&(g||C.push(new wo(h,this.verbose)),C.push(new xd),C.push(new jl),C.push(new Te),C.push(new Sa),g&&C.push(new wo(h,this.verbose))),this.readers=C}reset(){if(this.readers!==null)for(const h of this.readers)h.reset()}decodeInternal(h){if(this.readers===null)throw new Ya("No readers where selected, nothing can be read.");for(const g of this.readers)try{return g.decode(h,this.hints)}catch(y){if(y instanceof Ya)continue}throw new W("No MultiFormat Readers were able to detect the code.")}}class Zo extends ce{constructor(h=null,g=500){const y=new YC;y.setHints(h),super(y,g)}decodeBitmap(h){return this.reader.decodeWithState(h)}}class NP extends ce{constructor(h=500){super(new Sa,h)}}class QC extends ce{constructor(h=500){super(new xd,h)}}var bc;(function(se){se[se.ERROR_CORRECTION=0]="ERROR_CORRECTION",se[se.CHARACTER_SET=1]="CHARACTER_SET",se[se.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",se[se.MIN_SIZE=3]="MIN_SIZE",se[se.MAX_SIZE=4]="MAX_SIZE",se[se.MARGIN=5]="MARGIN",se[se.PDF417_COMPACT=6]="PDF417_COMPACT",se[se.PDF417_COMPACTION=7]="PDF417_COMPACTION",se[se.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",se[se.AZTEC_LAYERS=9]="AZTEC_LAYERS",se[se.QR_VERSION=10]="QR_VERSION"})(bc||(bc={}));var Ai=bc;class hm{constructor(h){this.field=h,this.cachedGenerators=[],this.cachedGenerators.push(new ve(h,Int32Array.from([1])))}buildGenerator(h){const g=this.cachedGenerators;if(h>=g.length){let y=g[g.length-1];const C=this.field;for(let _=g.length;_<=h;_++){const T=y.multiply(new ve(C,Int32Array.from([1,C.exp(_-1+C.getGeneratorBase())])));g.push(T),y=T}}return g[h]}encode(h,g){if(g===0)throw new f("No error correction bytes");const y=h.length-g;if(y<=0)throw new f("No data bytes provided");const C=this.buildGenerator(g),_=new Int32Array(y);v.arraycopy(h,0,_,0,y);let T=new ve(this.field,_);T=T.multiplyByMonomial(g,1);const F=T.divide(C)[1].getCoefficients(),U=g-F.length;for(let ee=0;ee<U;ee++)h[y+ee]=0;v.arraycopy(F,0,h,y+U,F.length)}}class Mr{constructor(){}static applyMaskPenaltyRule1(h){return Mr.applyMaskPenaltyRule1Internal(h,!0)+Mr.applyMaskPenaltyRule1Internal(h,!1)}static applyMaskPenaltyRule2(h){let g=0;const y=h.getArray(),C=h.getWidth(),_=h.getHeight();for(let T=0;T<_-1;T++){const j=y[T];for(let F=0;F<C-1;F++){const U=j[F];U===j[F+1]&&U===y[T+1][F]&&U===y[T+1][F+1]&&g++}}return Mr.N2*g}static applyMaskPenaltyRule3(h){let g=0;const y=h.getArray(),C=h.getWidth(),_=h.getHeight();for(let T=0;T<_;T++)for(let j=0;j<C;j++){const F=y[T];j+6<C&&F[j]===1&&F[j+1]===0&&F[j+2]===1&&F[j+3]===1&&F[j+4]===1&&F[j+5]===0&&F[j+6]===1&&(Mr.isWhiteHorizontal(F,j-4,j)||Mr.isWhiteHorizontal(F,j+7,j+11))&&g++,T+6<_&&y[T][j]===1&&y[T+1][j]===0&&y[T+2][j]===1&&y[T+3][j]===1&&y[T+4][j]===1&&y[T+5][j]===0&&y[T+6][j]===1&&(Mr.isWhiteVertical(y,j,T-4,T)||Mr.isWhiteVertical(y,j,T+7,T+11))&&g++}return g*Mr.N3}static isWhiteHorizontal(h,g,y){g=Math.max(g,0),y=Math.min(y,h.length);for(let C=g;C<y;C++)if(h[C]===1)return!1;return!0}static isWhiteVertical(h,g,y,C){y=Math.max(y,0),C=Math.min(C,h.length);for(let _=y;_<C;_++)if(h[_][g]===1)return!1;return!0}static applyMaskPenaltyRule4(h){let g=0;const y=h.getArray(),C=h.getWidth(),_=h.getHeight();for(let F=0;F<_;F++){const U=y[F];for(let ee=0;ee<C;ee++)U[ee]===1&&g++}const T=h.getHeight()*h.getWidth();return Math.floor(Math.abs(g*2-T)*10/T)*Mr.N4}static getDataMaskBit(h,g,y){let C,_;switch(h){case 0:C=y+g&1;break;case 1:C=y&1;break;case 2:C=g%3;break;case 3:C=(y+g)%3;break;case 4:C=Math.floor(y/2)+Math.floor(g/3)&1;break;case 5:_=y*g,C=(_&1)+_%3;break;case 6:_=y*g,C=(_&1)+_%3&1;break;case 7:_=y*g,C=_%3+(y+g&1)&1;break;default:throw new f("Invalid mask pattern: "+h)}return C===0}static applyMaskPenaltyRule1Internal(h,g){let y=0;const C=g?h.getHeight():h.getWidth(),_=g?h.getWidth():h.getHeight(),T=h.getArray();for(let j=0;j<C;j++){let F=0,U=-1;for(let ee=0;ee<_;ee++){const oe=g?T[j][ee]:T[ee][j];oe===U?F++:(F>=5&&(y+=Mr.N1+(F-5)),F=1,U=oe)}F>=5&&(y+=Mr.N1+(F-5))}return y}}Mr.N1=3,Mr.N2=3,Mr.N3=40,Mr.N4=10;class Dl{constructor(h,g){this.width=h,this.height=g;const y=new Array(g);for(let C=0;C!==g;C++)y[C]=new Uint8Array(h);this.bytes=y}getHeight(){return this.height}getWidth(){return this.width}get(h,g){return this.bytes[g][h]}getArray(){return this.bytes}setNumber(h,g,y){this.bytes[g][h]=y}setBoolean(h,g,y){this.bytes[g][h]=y?1:0}clear(h){for(const g of this.bytes)k.fill(g,h)}equals(h){if(!(h instanceof Dl))return!1;const g=h;if(this.width!==g.width||this.height!==g.height)return!1;for(let y=0,C=this.height;y<C;++y){const _=this.bytes[y],T=g.bytes[y];for(let j=0,F=this.width;j<F;++j)if(_[j]!==T[j])return!1}return!0}toString(){const h=new te;for(let g=0,y=this.height;g<y;++g){const C=this.bytes[g];for(let _=0,T=this.width;_<T;++_)switch(C[_]){case 0:h.append(" 0");break;case 1:h.append(" 1");break;default:h.append("  ");break}h.append(`
`)}return h.toString()}}class Eu{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const h=new te;return h.append(`<<
`),h.append(" mode: "),h.append(this.mode?this.mode.toString():"null"),h.append(`
 ecLevel: `),h.append(this.ecLevel?this.ecLevel.toString():"null"),h.append(`
 version: `),h.append(this.version?this.version.toString():"null"),h.append(`
 maskPattern: `),h.append(this.maskPattern.toString()),this.matrix?(h.append(`
 matrix:
`),h.append(this.matrix.toString())):h.append(`
 matrix: null
`),h.append(`>>
`),h.toString()}setMode(h){this.mode=h}setECLevel(h){this.ecLevel=h}setVersion(h){this.version=h}setMaskPattern(h){this.maskPattern=h}setMatrix(h){this.matrix=h}static isValidMaskPattern(h){return h>=0&&h<Eu.NUM_MASK_PATTERNS}}Eu.NUM_MASK_PATTERNS=8;class Xn extends c{}Xn.kind="WriterException";class gr{constructor(){}static clearMatrix(h){h.clear(255)}static buildMatrix(h,g,y,C,_){gr.clearMatrix(_),gr.embedBasicPatterns(y,_),gr.embedTypeInfo(g,C,_),gr.maybeEmbedVersionInfo(y,_),gr.embedDataBits(h,C,_)}static embedBasicPatterns(h,g){gr.embedPositionDetectionPatternsAndSeparators(g),gr.embedDarkDotAtLeftBottomCorner(g),gr.maybeEmbedPositionAdjustmentPatterns(h,g),gr.embedTimingPatterns(g)}static embedTypeInfo(h,g,y){const C=new N;gr.makeTypeInfoBits(h,g,C);for(let _=0,T=C.getSize();_<T;++_){const j=C.get(C.getSize()-1-_),F=gr.TYPE_INFO_COORDINATES[_],U=F[0],ee=F[1];if(y.setBoolean(U,ee,j),_<8){const oe=y.getWidth()-_-1;y.setBoolean(oe,8,j)}else{const xe=y.getHeight()-7+(_-8);y.setBoolean(8,xe,j)}}}static maybeEmbedVersionInfo(h,g){if(h.getVersionNumber()<7)return;const y=new N;gr.makeVersionInfoBits(h,y);let C=6*3-1;for(let _=0;_<6;++_)for(let T=0;T<3;++T){const j=y.get(C);C--,g.setBoolean(_,g.getHeight()-11+T,j),g.setBoolean(g.getHeight()-11+T,_,j)}}static embedDataBits(h,g,y){let C=0,_=-1,T=y.getWidth()-1,j=y.getHeight()-1;for(;T>0;){for(T===6&&(T-=1);j>=0&&j<y.getHeight();){for(let F=0;F<2;++F){const U=T-F;if(!gr.isEmpty(y.get(U,j)))continue;let ee;C<h.getSize()?(ee=h.get(C),++C):ee=!1,g!==255&&Mr.getDataMaskBit(g,U,j)&&(ee=!ee),y.setBoolean(U,j,ee)}j+=_}_=-_,j+=_,T-=2}if(C!==h.getSize())throw new Xn("Not all bits consumed: "+C+"/"+h.getSize())}static findMSBSet(h){return 32-E.numberOfLeadingZeros(h)}static calculateBCHCode(h,g){if(g===0)throw new f("0 polynomial");const y=gr.findMSBSet(g);for(h<<=y-1;gr.findMSBSet(h)>=y;)h^=g<<gr.findMSBSet(h)-y;return h}static makeTypeInfoBits(h,g,y){if(!Eu.isValidMaskPattern(g))throw new Xn("Invalid mask pattern");const C=h.getBits()<<3|g;y.appendBits(C,5);const _=gr.calculateBCHCode(C,gr.TYPE_INFO_POLY);y.appendBits(_,10);const T=new N;if(T.appendBits(gr.TYPE_INFO_MASK_PATTERN,15),y.xor(T),y.getSize()!==15)throw new Xn("should not happen but we got: "+y.getSize())}static makeVersionInfoBits(h,g){g.appendBits(h.getVersionNumber(),6);const y=gr.calculateBCHCode(h.getVersionNumber(),gr.VERSION_INFO_POLY);if(g.appendBits(y,12),g.getSize()!==18)throw new Xn("should not happen but we got: "+g.getSize())}static isEmpty(h){return h===255}static embedTimingPatterns(h){for(let g=8;g<h.getWidth()-8;++g){const y=(g+1)%2;gr.isEmpty(h.get(g,6))&&h.setNumber(g,6,y),gr.isEmpty(h.get(6,g))&&h.setNumber(6,g,y)}}static embedDarkDotAtLeftBottomCorner(h){if(h.get(8,h.getHeight()-8)===0)throw new Xn;h.setNumber(8,h.getHeight()-8,1)}static embedHorizontalSeparationPattern(h,g,y){for(let C=0;C<8;++C){if(!gr.isEmpty(y.get(h+C,g)))throw new Xn;y.setNumber(h+C,g,0)}}static embedVerticalSeparationPattern(h,g,y){for(let C=0;C<7;++C){if(!gr.isEmpty(y.get(h,g+C)))throw new Xn;y.setNumber(h,g+C,0)}}static embedPositionAdjustmentPattern(h,g,y){for(let C=0;C<5;++C){const _=gr.POSITION_ADJUSTMENT_PATTERN[C];for(let T=0;T<5;++T)y.setNumber(h+T,g+C,_[T])}}static embedPositionDetectionPattern(h,g,y){for(let C=0;C<7;++C){const _=gr.POSITION_DETECTION_PATTERN[C];for(let T=0;T<7;++T)y.setNumber(h+T,g+C,_[T])}}static embedPositionDetectionPatternsAndSeparators(h){const g=gr.POSITION_DETECTION_PATTERN[0].length;gr.embedPositionDetectionPattern(0,0,h),gr.embedPositionDetectionPattern(h.getWidth()-g,0,h),gr.embedPositionDetectionPattern(0,h.getWidth()-g,h);const y=8;gr.embedHorizontalSeparationPattern(0,y-1,h),gr.embedHorizontalSeparationPattern(h.getWidth()-y,y-1,h),gr.embedHorizontalSeparationPattern(0,h.getWidth()-y,h);const C=7;gr.embedVerticalSeparationPattern(C,0,h),gr.embedVerticalSeparationPattern(h.getHeight()-C-1,0,h),gr.embedVerticalSeparationPattern(C,h.getHeight()-C,h)}static maybeEmbedPositionAdjustmentPatterns(h,g){if(h.getVersionNumber()<2)return;const y=h.getVersionNumber()-1,C=gr.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[y];for(let _=0,T=C.length;_!==T;_++){const j=C[_];if(j>=0)for(let F=0;F!==T;F++){const U=C[F];U>=0&&gr.isEmpty(g.get(U,j))&&gr.embedPositionAdjustmentPattern(U-2,j-2,g)}}}}gr.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),gr.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),gr.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),gr.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),gr.VERSION_INFO_POLY=7973,gr.TYPE_INFO_POLY=1335,gr.TYPE_INFO_MASK_PATTERN=21522;class AP{constructor(h,g){this.dataBytes=h,this.errorCorrectionBytes=g}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class li{constructor(){}static calculateMaskPenalty(h){return Mr.applyMaskPenaltyRule1(h)+Mr.applyMaskPenaltyRule2(h)+Mr.applyMaskPenaltyRule3(h)+Mr.applyMaskPenaltyRule4(h)}static encode(h,g,y=null){let C=li.DEFAULT_BYTE_MODE_ENCODING;const _=y!==null&&y.get(Ai.CHARACTER_SET)!==void 0;_&&(C=y.get(Ai.CHARACTER_SET).toString());const T=this.chooseMode(h,C),j=new N;if(T===mr.BYTE&&(_||li.DEFAULT_BYTE_MODE_ENCODING!==C)){const gt=L.getCharacterSetECIByName(C);gt!==void 0&&this.appendECI(gt,j)}this.appendModeInfo(T,j);const F=new N;this.appendBytes(h,T,F,C);let U;if(y!==null&&y.get(Ai.QR_VERSION)!==void 0){const gt=Number.parseInt(y.get(Ai.QR_VERSION).toString(),10);U=ar.getVersionForNumber(gt);const vt=this.calculateBitsNeeded(T,j,F,U);if(!this.willFit(vt,U,g))throw new Xn("Data too big for requested version")}else U=this.recommendVersion(g,T,j,F);const ee=new N;ee.appendBitArray(j);const oe=T===mr.BYTE?F.getSizeInBytes():h.length;this.appendLengthInfo(oe,U,T,ee),ee.appendBitArray(F);const xe=U.getECBlocksForLevel(g),Oe=U.getTotalCodewords()-xe.getTotalECCodewords();this.terminateBits(Oe,ee);const ue=this.interleaveWithECBytes(ee,U.getTotalCodewords(),Oe,xe.getNumBlocks()),Se=new Eu;Se.setECLevel(g),Se.setMode(T),Se.setVersion(U);const Ae=U.getDimensionForVersion(),Be=new Dl(Ae,Ae),lt=this.chooseMaskPattern(ue,g,U,Be);return Se.setMaskPattern(lt),gr.buildMatrix(ue,g,U,lt,Be),Se.setMatrix(Be),Se}static recommendVersion(h,g,y,C){const _=this.calculateBitsNeeded(g,y,C,ar.getVersionForNumber(1)),T=this.chooseVersion(_,h),j=this.calculateBitsNeeded(g,y,C,T);return this.chooseVersion(j,h)}static calculateBitsNeeded(h,g,y,C){return g.getSize()+h.getCharacterCountBits(C)+y.getSize()}static getAlphanumericCode(h){return h<li.ALPHANUMERIC_TABLE.length?li.ALPHANUMERIC_TABLE[h]:-1}static chooseMode(h,g=null){if(L.SJIS.getName()===g&&this.isOnlyDoubleByteKanji(h))return mr.KANJI;let y=!1,C=!1;for(let _=0,T=h.length;_<T;++_){const j=h.charAt(_);if(li.isDigit(j))y=!0;else if(this.getAlphanumericCode(j.charCodeAt(0))!==-1)C=!0;else return mr.BYTE}return C?mr.ALPHANUMERIC:y?mr.NUMERIC:mr.BYTE}static isOnlyDoubleByteKanji(h){let g;try{g=z.encode(h,L.SJIS)}catch{return!1}const y=g.length;if(y%2!==0)return!1;for(let C=0;C<y;C+=2){const _=g[C]&255;if((_<129||_>159)&&(_<224||_>235))return!1}return!0}static chooseMaskPattern(h,g,y,C){let _=Number.MAX_SAFE_INTEGER,T=-1;for(let j=0;j<Eu.NUM_MASK_PATTERNS;j++){gr.buildMatrix(h,g,y,j,C);let F=this.calculateMaskPenalty(C);F<_&&(_=F,T=j)}return T}static chooseVersion(h,g){for(let y=1;y<=40;y++){const C=ar.getVersionForNumber(y);if(li.willFit(h,C,g))return C}throw new Xn("Data too big")}static willFit(h,g,y){const C=g.getTotalCodewords(),T=g.getECBlocksForLevel(y).getTotalECCodewords(),j=C-T,F=(h+7)/8;return j>=F}static terminateBits(h,g){const y=h*8;if(g.getSize()>y)throw new Xn("data bits cannot fit in the QR Code"+g.getSize()+" > "+y);for(let T=0;T<4&&g.getSize()<y;++T)g.appendBit(!1);const C=g.getSize()&7;if(C>0)for(let T=C;T<8;T++)g.appendBit(!1);const _=h-g.getSizeInBytes();for(let T=0;T<_;++T)g.appendBits(T&1?17:236,8);if(g.getSize()!==y)throw new Xn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(h,g,y,C,_,T){if(C>=y)throw new Xn("Block ID too large");const j=h%y,F=y-j,U=Math.floor(h/y),ee=U+1,oe=Math.floor(g/y),xe=oe+1,Oe=U-oe,ue=ee-xe;if(Oe!==ue)throw new Xn("EC bytes mismatch");if(y!==F+j)throw new Xn("RS blocks mismatch");if(h!==(oe+Oe)*F+(xe+ue)*j)throw new Xn("Total bytes mismatch");C<F?(_[0]=oe,T[0]=Oe):(_[0]=xe,T[0]=ue)}static interleaveWithECBytes(h,g,y,C){if(h.getSizeInBytes()!==y)throw new Xn("Number of bits and data bytes does not match");let _=0,T=0,j=0;const F=new Array;for(let ee=0;ee<C;++ee){const oe=new Int32Array(1),xe=new Int32Array(1);li.getNumDataBytesAndNumECBytesForBlockID(g,y,C,ee,oe,xe);const Oe=oe[0],ue=new Uint8Array(Oe);h.toBytes(8*_,ue,0,Oe);const Se=li.generateECBytes(ue,xe[0]);F.push(new AP(ue,Se)),T=Math.max(T,Oe),j=Math.max(j,Se.length),_+=oe[0]}if(y!==_)throw new Xn("Data bytes does not match offset");const U=new N;for(let ee=0;ee<T;++ee)for(const oe of F){const xe=oe.getDataBytes();ee<xe.length&&U.appendBits(xe[ee],8)}for(let ee=0;ee<j;++ee)for(const oe of F){const xe=oe.getErrorCorrectionBytes();ee<xe.length&&U.appendBits(xe[ee],8)}if(g!==U.getSizeInBytes())throw new Xn("Interleaving error: "+g+" and "+U.getSizeInBytes()+" differ.");return U}static generateECBytes(h,g){const y=h.length,C=new Int32Array(y+g);for(let T=0;T<y;T++)C[T]=h[T]&255;new hm(Ne.QR_CODE_FIELD_256).encode(C,g);const _=new Uint8Array(g);for(let T=0;T<g;T++)_[T]=C[y+T];return _}static appendModeInfo(h,g){g.appendBits(h.getBits(),4)}static appendLengthInfo(h,g,y,C){const _=y.getCharacterCountBits(g);if(h>=1<<_)throw new Xn(h+" is bigger than "+((1<<_)-1));C.appendBits(h,_)}static appendBytes(h,g,y,C){switch(g){case mr.NUMERIC:li.appendNumericBytes(h,y);break;case mr.ALPHANUMERIC:li.appendAlphanumericBytes(h,y);break;case mr.BYTE:li.append8BitBytes(h,y,C);break;case mr.KANJI:li.appendKanjiBytes(h,y);break;default:throw new Xn("Invalid mode: "+g)}}static getDigit(h){return h.charCodeAt(0)-48}static isDigit(h){const g=li.getDigit(h);return g>=0&&g<=9}static appendNumericBytes(h,g){const y=h.length;let C=0;for(;C<y;){const _=li.getDigit(h.charAt(C));if(C+2<y){const T=li.getDigit(h.charAt(C+1)),j=li.getDigit(h.charAt(C+2));g.appendBits(_*100+T*10+j,10),C+=3}else if(C+1<y){const T=li.getDigit(h.charAt(C+1));g.appendBits(_*10+T,7),C+=2}else g.appendBits(_,4),C++}}static appendAlphanumericBytes(h,g){const y=h.length;let C=0;for(;C<y;){const _=li.getAlphanumericCode(h.charCodeAt(C));if(_===-1)throw new Xn;if(C+1<y){const T=li.getAlphanumericCode(h.charCodeAt(C+1));if(T===-1)throw new Xn;g.appendBits(_*45+T,11),C+=2}else g.appendBits(_,6),C++}}static append8BitBytes(h,g,y){let C;try{C=z.encode(h,y)}catch(_){throw new Xn(_)}for(let _=0,T=C.length;_!==T;_++){const j=C[_];g.appendBits(j,8)}}static appendKanjiBytes(h,g){let y;try{y=z.encode(h,L.SJIS)}catch(_){throw new Xn(_)}const C=y.length;for(let _=0;_<C;_+=2){const T=y[_]&255,j=y[_+1]&255,F=T<<8&4294967295|j;let U=-1;if(F>=33088&&F<=40956?U=F-33088:F>=57408&&F<=60351&&(U=F-49472),U===-1)throw new Xn("Invalid byte sequence");const ee=(U>>8)*192+(U&255);g.appendBits(ee,13)}}static appendECI(h,g){g.appendBits(mr.ECI.getBits(),4),g.appendBits(h.getValue(),8)}}li.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),li.DEFAULT_BYTE_MODE_ENCODING=L.UTF8.getName();class _f{write(h,g,y,C=null){if(h.length===0)throw new f("Found empty contents");if(g<0||y<0)throw new f("Requested dimensions are too small: "+g+"x"+y);let _=Kn.L,T=_f.QUIET_ZONE_SIZE;C!==null&&(C.get(Ai.ERROR_CORRECTION)!==void 0&&(_=Kn.fromString(C.get(Ai.ERROR_CORRECTION).toString())),C.get(Ai.MARGIN)!==void 0&&(T=Number.parseInt(C.get(Ai.MARGIN).toString(),10)));const j=li.encode(h,_,C);return this.renderResult(j,g,y,T)}writeToDom(h,g,y,C,_=null){typeof h=="string"&&(h=document.querySelector(h));const T=this.write(g,y,C,_);h&&h.appendChild(T)}renderResult(h,g,y,C){const _=h.getMatrix();if(_===null)throw new ze;const T=_.getWidth(),j=_.getHeight(),F=T+C*2,U=j+C*2,ee=Math.max(g,F),oe=Math.max(y,U),xe=Math.min(Math.floor(ee/F),Math.floor(oe/U)),Oe=Math.floor((ee-T*xe)/2),ue=Math.floor((oe-j*xe)/2),Se=this.createSVGElement(ee,oe);for(let Ae=0,Be=ue;Ae<j;Ae++,Be+=xe)for(let lt=0,gt=Oe;lt<T;lt++,gt+=xe)if(_.get(lt,Ae)===1){const vt=this.createSvgRectElement(gt,Be,xe,xe);Se.appendChild(vt)}return Se}createSVGElement(h,g){const y=document.createElementNS(_f.SVG_NS,"svg");return y.setAttributeNS(null,"height",h.toString()),y.setAttributeNS(null,"width",g.toString()),y}createSvgRectElement(h,g,y,C){const _=document.createElementNS(_f.SVG_NS,"rect");return _.setAttributeNS(null,"x",h.toString()),_.setAttributeNS(null,"y",g.toString()),_.setAttributeNS(null,"height",y.toString()),_.setAttributeNS(null,"width",C.toString()),_.setAttributeNS(null,"fill","#000000"),_}}_f.QUIET_ZONE_SIZE=4,_f.SVG_NS="http://www.w3.org/2000/svg";class Nf{encode(h,g,y,C,_){if(h.length===0)throw new f("Found empty contents");if(g!==ie.QR_CODE)throw new f("Can only encode QR_CODE, but got "+g);if(y<0||C<0)throw new f(`Requested dimensions are too small: ${y}x${C}`);let T=Kn.L,j=Nf.QUIET_ZONE_SIZE;_!==null&&(_.get(Ai.ERROR_CORRECTION)!==void 0&&(T=Kn.fromString(_.get(Ai.ERROR_CORRECTION).toString())),_.get(Ai.MARGIN)!==void 0&&(j=Number.parseInt(_.get(Ai.MARGIN).toString(),10)));const F=li.encode(h,T,_);return Nf.renderResult(F,y,C,j)}static renderResult(h,g,y,C){const _=h.getMatrix();if(_===null)throw new ze;const T=_.getWidth(),j=_.getHeight(),F=T+C*2,U=j+C*2,ee=Math.max(g,F),oe=Math.max(y,U),xe=Math.min(Math.floor(ee/F),Math.floor(oe/U)),Oe=Math.floor((ee-T*xe)/2),ue=Math.floor((oe-j*xe)/2),Se=new Y(ee,oe);for(let Ae=0,Be=ue;Ae<j;Ae++,Be+=xe)for(let lt=0,gt=Oe;lt<T;lt++,gt+=xe)_.get(lt,Ae)===1&&Se.setRegion(gt,Be,xe,xe);return Se}}Nf.QUIET_ZONE_SIZE=4;class i1{encode(h,g,y,C,_){let T;switch(g){case ie.QR_CODE:T=new Nf;break;default:throw new f("No encoder available for format "+g)}return T.encode(h,g,y,C,_)}}class Es extends X{constructor(h,g,y,C,_,T,j,F){if(super(T,j),this.yuvData=h,this.dataWidth=g,this.dataHeight=y,this.left=C,this.top=_,C+T>g||_+j>y)throw new f("Crop rectangle does not fit within image data.");F&&this.reverseHorizontal(T,j)}getRow(h,g){if(h<0||h>=this.getHeight())throw new f("Requested row is outside the image: "+h);const y=this.getWidth();(g==null||g.length<y)&&(g=new Uint8ClampedArray(y));const C=(h+this.top)*this.dataWidth+this.left;return v.arraycopy(this.yuvData,C,g,0,y),g}getMatrix(){const h=this.getWidth(),g=this.getHeight();if(h===this.dataWidth&&g===this.dataHeight)return this.yuvData;const y=h*g,C=new Uint8ClampedArray(y);let _=this.top*this.dataWidth+this.left;if(h===this.dataWidth)return v.arraycopy(this.yuvData,_,C,0,y),C;for(let T=0;T<g;T++){const j=T*h;v.arraycopy(this.yuvData,_,C,j,h),_+=this.dataWidth}return C}isCropSupported(){return!0}crop(h,g,y,C){return new Es(this.yuvData,this.dataWidth,this.dataHeight,this.left+h,this.top+g,y,C,!1)}renderThumbnail(){const h=this.getWidth()/Es.THUMBNAIL_SCALE_FACTOR,g=this.getHeight()/Es.THUMBNAIL_SCALE_FACTOR,y=new Int32Array(h*g),C=this.yuvData;let _=this.top*this.dataWidth+this.left;for(let T=0;T<g;T++){const j=T*h;for(let F=0;F<h;F++){const U=C[_+F*Es.THUMBNAIL_SCALE_FACTOR]&255;y[j+F]=4278190080|U*65793}_+=this.dataWidth*Es.THUMBNAIL_SCALE_FACTOR}return y}getThumbnailWidth(){return this.getWidth()/Es.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Es.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(h,g){const y=this.yuvData;for(let C=0,_=this.top*this.dataWidth+this.left;C<g;C++,_+=this.dataWidth){const T=_+h/2;for(let j=_,F=_+h-1;j<T;j++,F--){const U=y[j];y[j]=y[F],y[F]=U}}}invert(){return new Q(this)}}Es.THUMBNAIL_SCALE_FACTOR=2;class Ob extends X{constructor(h,g,y,C,_,T,j){if(super(g,y),this.dataWidth=C,this.dataHeight=_,this.left=T,this.top=j,h.BYTES_PER_ELEMENT===4){const F=g*y,U=new Uint8ClampedArray(F);for(let ee=0;ee<F;ee++){const oe=h[ee],xe=oe>>16&255,Oe=oe>>7&510,ue=oe&255;U[ee]=(xe+Oe+ue)/4&255}this.luminances=U}else this.luminances=h;if(C===void 0&&(this.dataWidth=g),_===void 0&&(this.dataHeight=y),T===void 0&&(this.left=0),j===void 0&&(this.top=0),this.left+g>this.dataWidth||this.top+y>this.dataHeight)throw new f("Crop rectangle does not fit within image data.")}getRow(h,g){if(h<0||h>=this.getHeight())throw new f("Requested row is outside the image: "+h);const y=this.getWidth();(g==null||g.length<y)&&(g=new Uint8ClampedArray(y));const C=(h+this.top)*this.dataWidth+this.left;return v.arraycopy(this.luminances,C,g,0,y),g}getMatrix(){const h=this.getWidth(),g=this.getHeight();if(h===this.dataWidth&&g===this.dataHeight)return this.luminances;const y=h*g,C=new Uint8ClampedArray(y);let _=this.top*this.dataWidth+this.left;if(h===this.dataWidth)return v.arraycopy(this.luminances,_,C,0,y),C;for(let T=0;T<g;T++){const j=T*h;v.arraycopy(this.luminances,_,C,j,h),_+=this.dataWidth}return C}isCropSupported(){return!0}crop(h,g,y,C){return new Ob(this.luminances,y,C,this.dataWidth,this.dataHeight,this.left+h,this.top+g)}invert(){return new Q(this)}}class Pb extends L{static forName(h){return this.getCharacterSetECIByName(h)}}class a1{}a1.ISO_8859_1=L.ISO8859_1;class s1{isCompact(){return this.compact}setCompact(h){this.compact=h}getSize(){return this.size}setSize(h){this.size=h}getLayers(){return this.layers}setLayers(h){this.layers=h}getCodeWords(){return this.codeWords}setCodeWords(h){this.codeWords=h}getMatrix(){return this.matrix}setMatrix(h){this.matrix=h}}class o1{static singletonList(h){return[h]}static min(h,g){return h.sort(g)[0]}}class JC{constructor(h){this.previous=h}getPrevious(){return this.previous}}class up extends JC{constructor(h,g,y){super(h),this.value=g,this.bitCount=y}appendTo(h,g){h.appendBits(this.value,this.bitCount)}add(h,g){return new up(this,h,g)}addBinaryShift(h,g){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new up(this,h,g)}toString(){let h=this.value&(1<<this.bitCount)-1;return h|=1<<this.bitCount,"<"+E.toBinaryString(h|1<<this.bitCount).substring(1)+">"}}class pm extends up{constructor(h,g,y){super(h,0,0),this.binaryShiftStart=g,this.binaryShiftByteCount=y}appendTo(h,g){for(let y=0;y<this.binaryShiftByteCount;y++)(y===0||y===31&&this.binaryShiftByteCount<=62)&&(h.appendBits(31,5),this.binaryShiftByteCount>62?h.appendBits(this.binaryShiftByteCount-31,16):y===0?h.appendBits(Math.min(this.binaryShiftByteCount,31),5):h.appendBits(this.binaryShiftByteCount-31,5)),h.appendBits(g[this.binaryShiftStart+y],8)}addBinaryShift(h,g){return new pm(this,h,g)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Rb(se,h,g){return new pm(se,h,g)}function mm(se,h,g){return new up(se,h,g)}const ZC=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ki=0,dp=1,Qa=2,jb=3,Ml=4,TP=new up(null,0,0),Db=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function IP(se){for(let h of se)k.fill(h,-1);return se[Ki][Ml]=0,se[dp][Ml]=0,se[dp][Ki]=28,se[jb][Ml]=0,se[Qa][Ml]=0,se[Qa][Ki]=15,se}const ek=IP(k.createInt32Array(6,6));class wc{constructor(h,g,y,C){this.token=h,this.mode=g,this.binaryShiftByteCount=y,this.bitCount=C}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(h,g){let y=this.bitCount,C=this.token;if(h!==this.mode){let T=Db[this.mode][h];C=mm(C,T&65535,T>>16),y+=T>>16}let _=h===Qa?4:5;return C=mm(C,g,_),new wc(C,h,0,y+_)}shiftAndAppend(h,g){let y=this.token,C=this.mode===Qa?4:5;return y=mm(y,ek[this.mode][h],C),y=mm(y,g,5),new wc(y,this.mode,0,this.bitCount+C+5)}addBinaryShiftChar(h){let g=this.token,y=this.mode,C=this.bitCount;if(this.mode===Ml||this.mode===Qa){let j=Db[y][Ki];g=mm(g,j&65535,j>>16),C+=j>>16,y=Ki}let _=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,T=new wc(g,y,this.binaryShiftByteCount+1,C+_);return T.binaryShiftByteCount===2078&&(T=T.endBinaryShift(h+1)),T}endBinaryShift(h){if(this.binaryShiftByteCount===0)return this;let g=this.token;return g=Rb(g,h-this.binaryShiftByteCount,this.binaryShiftByteCount),new wc(g,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(h){let g=this.bitCount+(Db[this.mode][h.mode]>>16);return this.binaryShiftByteCount<h.binaryShiftByteCount?g+=wc.calculateBinaryShiftCost(h)-wc.calculateBinaryShiftCost(this):this.binaryShiftByteCount>h.binaryShiftByteCount&&h.binaryShiftByteCount>0&&(g+=10),g<=h.bitCount}toBitArray(h){let g=[];for(let C=this.endBinaryShift(h.length).token;C!==null;C=C.getPrevious())g.unshift(C);let y=new N;for(const C of g)C.appendTo(y,h);return y}toString(){return H.format("%s bits=%d bytes=%d",ZC[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(h){return h.binaryShiftByteCount>62?21:h.binaryShiftByteCount>31?20:h.binaryShiftByteCount>0?10:0}}wc.INITIAL_STATE=new wc(TP,Ki,0,0);function fp(se){const h=H.getCharCode(" "),g=H.getCharCode("."),y=H.getCharCode(",");se[Ki][h]=1;const C=H.getCharCode("Z"),_=H.getCharCode("A");for(let xe=_;xe<=C;xe++)se[Ki][xe]=xe-_+2;se[dp][h]=1;const T=H.getCharCode("z"),j=H.getCharCode("a");for(let xe=j;xe<=T;xe++)se[dp][xe]=xe-j+2;se[Qa][h]=1;const F=H.getCharCode("9"),U=H.getCharCode("0");for(let xe=U;xe<=F;xe++)se[Qa][xe]=xe-U+2;se[Qa][y]=12,se[Qa][g]=13;const ee=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let xe=0;xe<ee.length;xe++)se[jb][H.getCharCode(ee[xe])]=xe;const oe=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let xe=0;xe<oe.length;xe++)H.getCharCode(oe[xe])>0&&(se[Ml][H.getCharCode(oe[xe])]=xe);return se}const Mb=fp(k.createInt32Array(5,256));class gm{constructor(h){this.text=h}encode(){const h=H.getCharCode(" "),g=H.getCharCode(`
`);let y=o1.singletonList(wc.INITIAL_STATE);for(let _=0;_<this.text.length;_++){let T,j=_+1<this.text.length?this.text[_+1]:0;switch(this.text[_]){case H.getCharCode("\r"):T=j===g?2:0;break;case H.getCharCode("."):T=j===h?3:0;break;case H.getCharCode(","):T=j===h?4:0;break;case H.getCharCode(":"):T=j===h?5:0;break;default:T=0}T>0?(y=gm.updateStateListForPair(y,_,T),_++):y=this.updateStateListForChar(y,_)}return o1.min(y,(_,T)=>_.getBitCount()-T.getBitCount()).toBitArray(this.text)}updateStateListForChar(h,g){const y=[];for(let C of h)this.updateStateForChar(C,g,y);return gm.simplifyStates(y)}updateStateForChar(h,g,y){let C=this.text[g]&255,_=Mb[h.getMode()][C]>0,T=null;for(let j=0;j<=Ml;j++){let F=Mb[j][C];if(F>0){if(T==null&&(T=h.endBinaryShift(g)),!_||j===h.getMode()||j===Qa){const U=T.latchAndAppend(j,F);y.push(U)}if(!_&&ek[h.getMode()][j]>=0){const U=T.shiftAndAppend(j,F);y.push(U)}}}if(h.getBinaryShiftByteCount()>0||Mb[h.getMode()][C]===0){let j=h.addBinaryShiftChar(g);y.push(j)}}static updateStateListForPair(h,g,y){const C=[];for(let _ of h)this.updateStateForPair(_,g,y,C);return this.simplifyStates(C)}static updateStateForPair(h,g,y,C){let _=h.endBinaryShift(g);if(C.push(_.latchAndAppend(Ml,y)),h.getMode()!==Ml&&C.push(_.shiftAndAppend(Ml,y)),y===3||y===4){let T=_.latchAndAppend(Qa,16-y).latchAndAppend(Qa,1);C.push(T)}if(h.getBinaryShiftByteCount()>0){let T=h.addBinaryShiftChar(g).addBinaryShiftChar(g+1);C.push(T)}}static simplifyStates(h){let g=[];for(const y of h){let C=!0;for(const _ of g){if(_.isBetterThanOrEqualTo(y)){C=!1;break}y.isBetterThanOrEqualTo(_)&&(g=g.filter(T=>T!==_))}C&&g.push(y)}return g}}class Sn{constructor(){}static encodeBytes(h){return Sn.encode(h,Sn.DEFAULT_EC_PERCENT,Sn.DEFAULT_AZTEC_LAYERS)}static encode(h,g,y){let C=new gm(h).encode(),_=E.truncDivision(C.getSize()*g,100)+11,T=C.getSize()+_,j,F,U,ee,oe;if(y!==Sn.DEFAULT_AZTEC_LAYERS){if(j=y<0,F=Math.abs(y),F>(j?Sn.MAX_NB_BITS_COMPACT:Sn.MAX_NB_BITS))throw new f(H.format("Illegal value %s for layers",y));U=Sn.totalBitsInLayer(F,j),ee=Sn.WORD_SIZE[F];let vt=U-U%ee;if(oe=Sn.stuffBits(C,ee),oe.getSize()+_>vt)throw new f("Data to large for user specified layer");if(j&&oe.getSize()>ee*64)throw new f("Data to large for user specified layer")}else{ee=0,oe=null;for(let vt=0;;vt++){if(vt>Sn.MAX_NB_BITS)throw new f("Data too large for an Aztec code");if(j=vt<=3,F=j?vt+1:vt,U=Sn.totalBitsInLayer(F,j),T>U)continue;(oe==null||ee!==Sn.WORD_SIZE[F])&&(ee=Sn.WORD_SIZE[F],oe=Sn.stuffBits(C,ee));let Zt=U-U%ee;if(!(j&&oe.getSize()>ee*64)&&oe.getSize()+_<=Zt)break}}let xe=Sn.generateCheckWords(oe,U,ee),Oe=oe.getSize()/ee,ue=Sn.generateModeMessage(j,F,Oe),Se=(j?11:14)+F*4,Ae=new Int32Array(Se),Be;if(j){Be=Se;for(let vt=0;vt<Ae.length;vt++)Ae[vt]=vt}else{Be=Se+1+2*E.truncDivision(E.truncDivision(Se,2)-1,15);let vt=E.truncDivision(Se,2),Zt=E.truncDivision(Be,2);for(let Fr=0;Fr<vt;Fr++){let Hs=Fr+E.truncDivision(Fr,15);Ae[vt-Fr-1]=Zt-Hs-1,Ae[vt+Fr]=Zt+Hs+1}}let lt=new Y(Be);for(let vt=0,Zt=0;vt<F;vt++){let Fr=(F-vt)*4+(j?9:12);for(let Hs=0;Hs<Fr;Hs++){let Ti=Hs*2;for(let La=0;La<2;La++)xe.get(Zt+Ti+La)&&lt.set(Ae[vt*2+La],Ae[vt*2+Hs]),xe.get(Zt+Fr*2+Ti+La)&&lt.set(Ae[vt*2+Hs],Ae[Se-1-vt*2-La]),xe.get(Zt+Fr*4+Ti+La)&&lt.set(Ae[Se-1-vt*2-La],Ae[Se-1-vt*2-Hs]),xe.get(Zt+Fr*6+Ti+La)&&lt.set(Ae[Se-1-vt*2-Hs],Ae[vt*2+La])}Zt+=Fr*8}if(Sn.drawModeMessage(lt,j,Be,ue),j)Sn.drawBullsEye(lt,E.truncDivision(Be,2),5);else{Sn.drawBullsEye(lt,E.truncDivision(Be,2),7);for(let vt=0,Zt=0;vt<E.truncDivision(Se,2)-1;vt+=15,Zt+=16)for(let Fr=E.truncDivision(Be,2)&1;Fr<Be;Fr+=2)lt.set(E.truncDivision(Be,2)-Zt,Fr),lt.set(E.truncDivision(Be,2)+Zt,Fr),lt.set(Fr,E.truncDivision(Be,2)-Zt),lt.set(Fr,E.truncDivision(Be,2)+Zt)}let gt=new s1;return gt.setCompact(j),gt.setSize(Be),gt.setLayers(F),gt.setCodeWords(Oe),gt.setMatrix(lt),gt}static drawBullsEye(h,g,y){for(let C=0;C<y;C+=2)for(let _=g-C;_<=g+C;_++)h.set(_,g-C),h.set(_,g+C),h.set(g-C,_),h.set(g+C,_);h.set(g-y,g-y),h.set(g-y+1,g-y),h.set(g-y,g-y+1),h.set(g+y,g-y),h.set(g+y,g-y+1),h.set(g+y,g+y-1)}static generateModeMessage(h,g,y){let C=new N;return h?(C.appendBits(g-1,2),C.appendBits(y-1,6),C=Sn.generateCheckWords(C,28,4)):(C.appendBits(g-1,5),C.appendBits(y-1,11),C=Sn.generateCheckWords(C,40,4)),C}static drawModeMessage(h,g,y,C){let _=E.truncDivision(y,2);if(g)for(let T=0;T<7;T++){let j=_-3+T;C.get(T)&&h.set(j,_-5),C.get(T+7)&&h.set(_+5,j),C.get(20-T)&&h.set(j,_+5),C.get(27-T)&&h.set(_-5,j)}else for(let T=0;T<10;T++){let j=_-5+T+E.truncDivision(T,5);C.get(T)&&h.set(j,_-7),C.get(T+10)&&h.set(_+7,j),C.get(29-T)&&h.set(j,_+7),C.get(39-T)&&h.set(_-7,j)}}static generateCheckWords(h,g,y){let C=h.getSize()/y,_=new hm(Sn.getGF(y)),T=E.truncDivision(g,y),j=Sn.bitsToWords(h,y,T);_.encode(j,T-C);let F=g%y,U=new N;U.appendBits(0,F);for(const ee of Array.from(j))U.appendBits(ee,y);return U}static bitsToWords(h,g,y){let C=new Int32Array(y),_,T;for(_=0,T=h.getSize()/g;_<T;_++){let j=0;for(let F=0;F<g;F++)j|=h.get(_*g+F)?1<<g-F-1:0;C[_]=j}return C}static getGF(h){switch(h){case 4:return Ne.AZTEC_PARAM;case 6:return Ne.AZTEC_DATA_6;case 8:return Ne.AZTEC_DATA_8;case 10:return Ne.AZTEC_DATA_10;case 12:return Ne.AZTEC_DATA_12;default:throw new f("Unsupported word size "+h)}}static stuffBits(h,g){let y=new N,C=h.getSize(),_=(1<<g)-2;for(let T=0;T<C;T+=g){let j=0;for(let F=0;F<g;F++)(T+F>=C||h.get(T+F))&&(j|=1<<g-1-F);(j&_)===_?(y.appendBits(j&_,g),T--):j&_?y.appendBits(j,g):(y.appendBits(j|1,g),T--)}return y}static totalBitsInLayer(h,g){return((g?88:112)+16*h)*h}}Sn.DEFAULT_EC_PERCENT=33,Sn.DEFAULT_AZTEC_LAYERS=0,Sn.MAX_NB_BITS=32,Sn.MAX_NB_BITS_COMPACT=4,Sn.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class xm{encode(h,g,y,C){return this.encodeWithHints(h,g,y,C,null)}encodeWithHints(h,g,y,C,_){let T=a1.ISO_8859_1,j=Sn.DEFAULT_EC_PERCENT,F=Sn.DEFAULT_AZTEC_LAYERS;return _!=null&&(_.has(Ai.CHARACTER_SET)&&(T=Pb.forName(_.get(Ai.CHARACTER_SET).toString())),_.has(Ai.ERROR_CORRECTION)&&(j=E.parseInt(_.get(Ai.ERROR_CORRECTION).toString())),_.has(Ai.AZTEC_LAYERS)&&(F=E.parseInt(_.get(Ai.AZTEC_LAYERS).toString()))),xm.encodeLayers(h,g,y,C,T,j,F)}static encodeLayers(h,g,y,C,_,T,j){if(g!==ie.AZTEC)throw new f("Can only encode AZTEC, but got "+g);let F=Sn.encode(H.getBytes(h,_),T,j);return xm.renderResult(F,y,C)}static renderResult(h,g,y){let C=h.getMatrix();if(C==null)throw new ze;let _=C.getWidth(),T=C.getHeight(),j=Math.max(g,_),F=Math.max(y,T),U=Math.min(j/_,F/T),ee=(j-_*U)/2,oe=(F-T*U)/2,xe=new Y(j,F);for(let Oe=0,ue=oe;Oe<T;Oe++,ue+=U)for(let Se=0,Ae=ee;Se<_;Se++,Ae+=U)C.get(Se,Oe)&&xe.setRegion(Ae,ue,U,U);return xe}}r.AbstractExpandedDecoder=_e,r.ArgumentException=d,r.ArithmeticException=q,r.AztecCode=s1,r.AztecCodeReader=Te,r.AztecCodeWriter=xm,r.AztecDecoder=et,r.AztecDetector=Xe,r.AztecDetectorResult=er,r.AztecEncoder=Sn,r.AztecHighLevelEncoder=gm,r.AztecPoint=qe,r.BarcodeFormat=ie,r.Binarizer=x,r.BinaryBitmap=p,r.BitArray=N,r.BitMatrix=Y,r.BitSource=e1,r.BrowserAztecCodeReader=He,r.BrowserBarcodeReader=gd,r.BrowserCodeReader=ce,r.BrowserDatamatrixCodeReader=HC,r.BrowserMultiFormatReader=Zo,r.BrowserPDF417Reader=NP,r.BrowserQRCodeReader=QC,r.BrowserQRCodeSvgWriter=_f,r.CharacterSetECI=L,r.ChecksumException=m,r.Code128Reader=Ce,r.Code39Reader=ot,r.DataMatrixDecodedBitStreamParser=yc,r.DataMatrixReader=jl,r.DecodeHintType=R,r.DecoderResult=ae,r.DefaultGridSampler=dr,r.DetectorResult=Rr,r.EAN13Reader=Vi,r.EncodeHintType=Ai,r.Exception=c,r.FormatException=O,r.GenericGF=Ne,r.GenericGFPoly=ve,r.GlobalHistogramBinarizer=Z,r.GridSampler=qt,r.GridSamplerInstance=Gt,r.HTMLCanvasElementLuminanceSource=fe,r.HybridBinarizer=re,r.ITFReader=xt,r.IllegalArgumentException=f,r.IllegalStateException=ze,r.InvertedLuminanceSource=Q,r.LuminanceSource=X,r.MathUtils=ut,r.MultiFormatOneDReader=wo,r.MultiFormatReader=YC,r.MultiFormatWriter=i1,r.NotFoundException=W,r.OneDReader=je,r.PDF417DecodedBitStreamParser=tt,r.PDF417DecoderErrorCorrection=VC,r.PDF417Reader=Sa,r.PDF417ResultMetadata=Tb,r.PerspectiveTransform=Lt,r.PlanarYUVLuminanceSource=Es,r.QRCodeByteMatrix=Dl,r.QRCodeDataMask=$s,r.QRCodeDecodedBitStreamParser=di,r.QRCodeDecoderErrorCorrectionLevel=Kn,r.QRCodeDecoderFormatInformation=Ma,r.QRCodeEncoder=li,r.QRCodeEncoderQRCode=Eu,r.QRCodeMaskUtil=Mr,r.QRCodeMatrixUtil=gr,r.QRCodeMode=mr,r.QRCodeReader=xd,r.QRCodeVersion=ar,r.QRCodeWriter=Nf,r.RGBLuminanceSource=Ob,r.RSS14Reader=$r,r.RSSExpandedReader=at,r.ReaderException=Ya,r.ReedSolomonDecoder=De,r.ReedSolomonEncoder=hm,r.ReedSolomonException=Pe,r.Result=V,r.ResultMetadataType=ne,r.ResultPoint=ht,r.StringUtils=H,r.UnsupportedOperationException=B,r.VideoInputDevice=ye,r.WhiteRectangleDetector=ct,r.WriterException=Xn,r.ZXingArrays=k,r.ZXingCharset=Pb,r.ZXingInteger=E,r.ZXingStandardCharsets=a1,r.ZXingStringBuilder=te,r.ZXingStringEncoding=z,r.ZXingSystem=v,r.createAbstractExpandedDecoder=St,Object.defineProperty(r,"__esModule",{value:!0})})})(a8,a8.exports);var vi=a8.exports;const hFe=Bs(vi),pFe=E5({__proto__:null,default:hFe},[vi]);var tG=function(){function e(t,r,n){if(this.formatMap=new Map([[Xt.QR_CODE,vi.BarcodeFormat.QR_CODE],[Xt.AZTEC,vi.BarcodeFormat.AZTEC],[Xt.CODABAR,vi.BarcodeFormat.CODABAR],[Xt.CODE_39,vi.BarcodeFormat.CODE_39],[Xt.CODE_93,vi.BarcodeFormat.CODE_93],[Xt.CODE_128,vi.BarcodeFormat.CODE_128],[Xt.DATA_MATRIX,vi.BarcodeFormat.DATA_MATRIX],[Xt.MAXICODE,vi.BarcodeFormat.MAXICODE],[Xt.ITF,vi.BarcodeFormat.ITF],[Xt.EAN_13,vi.BarcodeFormat.EAN_13],[Xt.EAN_8,vi.BarcodeFormat.EAN_8],[Xt.PDF_417,vi.BarcodeFormat.PDF_417],[Xt.RSS_14,vi.BarcodeFormat.RSS_14],[Xt.RSS_EXPANDED,vi.BarcodeFormat.RSS_EXPANDED],[Xt.UPC_A,vi.BarcodeFormat.UPC_A],[Xt.UPC_E,vi.BarcodeFormat.UPC_E],[Xt.UPC_EAN_EXTENSION,vi.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!pFe)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var i=this.createZXingFormats(t),a=new Map;a.set(vi.DecodeHintType.POSSIBLE_FORMATS,i),a.set(vi.DecodeHintType.TRY_HARDER,!1),this.hints=a}return e.prototype.decodeAsync=function(t){var r=this;return new Promise(function(n,i){try{n(r.decode(t))}catch(a){i(a)}})},e.prototype.decode=function(t){var r=new vi.MultiFormatReader(this.verbose,this.hints),n=new vi.HTMLCanvasElementLuminanceSource(t),i=new vi.BinaryBitmap(new vi.HybridBinarizer(n)),a=r.decode(i);return{text:a.text,format:Eoe.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,i){t.set(r,n)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var r=[],n=0,i=t;n<i.length;n++){var a=i[n];this.formatMap.has(a)?r.push(this.formatMap.get(a)):this.logger.logError("".concat(a," is not supported by")+"ZXingHtml5QrcodeShim")}return r},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),mFe=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},gFe=function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},rG=function(){function e(t,r,n){if(this.formatMap=new Map([[Xt.QR_CODE,"qr_code"],[Xt.AZTEC,"aztec"],[Xt.CODABAR,"codabar"],[Xt.CODE_39,"code_39"],[Xt.CODE_93,"code_93"],[Xt.CODE_128,"code_128"],[Xt.DATA_MATRIX,"data_matrix"],[Xt.ITF,"itf"],[Xt.EAN_13,"ean_13"],[Xt.EAN_8,"ean_8"],[Xt.PDF_417,"pdf417"],[Xt.UPC_A,"upc_a"],[Xt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var i=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return mFe(this,void 0,void 0,function(){var r,n;return gFe(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(t)];case 1:if(r=i.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(r),[2,{text:n.rawValue,format:Eoe.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var r=null,n=0,i=0,a=t;i<a.length;i++){var s=a[i],o=s.boundingBox.width*s.boundingBox.height;o>n&&(n=o,r=s)}if(!r)throw"No largest barcode found";return r},e.prototype.createBarcodeDetectorFormats=function(t){for(var r=[],n=0,i=t;n<i.length;n++){var a=i[n];this.formatMap.has(a)?r.push(this.formatMap.get(a)):this.logger.warn("".concat(a," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,i){t.set(r,n)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),nG=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},iG=function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},xFe=function(){function e(t,r,n,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,r&&rG.isSupported()?(this.primaryDecoder=new rG(t,n,i),this.secondaryDecoder=new tG(t,n,i)):this.primaryDecoder=new tG(t,n,i)}return e.prototype.decodeAsync=function(t){return nG(this,void 0,void 0,function(){var r;return iG(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return nG(this,void 0,void 0,function(){var r,n;return iG(this,function(i){switch(i.label){case 0:r=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,i.sent()];case 3:if(n=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw n;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var r=performance.now()-t;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,r=0,n=this.executionResults;r<n.length;r++){var i=n[r];t+=i}var a=t/this.executionResults.length;console.log("".concat(a," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),I7=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tT=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},rT=function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},koe=function(){function e(t,r){this.name=t,this.track=r}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var r={};r[this.name]=t;var n={advanced:[r]};return this.track.applyConstraints(n)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var r=t[this.name];return r}return null},e}(),vFe=function(e){I7(t,e);function t(r,n){return e.call(this,r,n)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(r){var n={};n[this.name]=r;var i={advanced:[n]};return this.track.applyConstraints(i)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),n=r[this.name];return{min:n.min,max:n.max,step:n.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(koe),yFe=function(e){I7(t,e);function t(r){return e.call(this,"zoom",r)||this}return t}(vFe),bFe=function(e){I7(t,e);function t(r){return e.call(this,"torch",r)||this}return t}(koe),wFe=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new yFe(this.track)},e.prototype.torchFeature=function(){return new bFe(this.track)},e}(),SFe=function(){function e(t,r,n){this.isClosed=!1,this.parentElement=t,this.mediaStream=r,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var r=document.createElement("video");return r.style.width="".concat(t,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var n=t.surface.clientWidth,i=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(n,i),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,r,n,i){return tT(this,void 0,void 0,function(){var a,s;return rT(this,function(o){switch(o.label){case 0:return a=new e(t,r,i),n.aspectRatio?(s={aspectRatio:n.aspectRatio},[4,a.getFirstTrackOrFail().applyConstraints(s)]):[3,2];case 1:o.sent(),o.label=2;case 2:return a.setupSurface(),[2,a]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var r=this,n=function(){setTimeout(t,200),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return tT(this,void 0,void 0,function(){return rT(this,function(r){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(r,n){var i=t.mediaStream.getVideoTracks(),a=i.length,s=0;t.mediaStream.getVideoTracks().forEach(function(o){t.mediaStream.removeTrack(o),o.stop(),++s,s>=a&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),r())})})},e.prototype.getCapabilities=function(){return new wFe(this.getFirstTrackOrFail())},e}(),EFe=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,r,n){return tT(this,void 0,void 0,function(){return rT(this,function(i){return[2,SFe.create(t,this.mediaStream,r,n)]})})},e.create=function(t){return tT(this,void 0,void 0,function(){var r,n;return rT(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return n=i.sent(),[2,new e(n)]}})})},e}(),aG=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},sG=function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},CFe=function(){function e(){}return e.failIfNotSupported=function(){return aG(this,void 0,void 0,function(){return sG(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return aG(this,void 0,void 0,function(){return sG(this,function(r){return[2,EFe.create(t)]})})},e}(),kFe=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},_Fe=function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},NFe=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=av.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=av.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return kFe(this,void 0,void 0,function(){var t,r,n,i,a,s,o;return _Fe(this,function(l){switch(l.label){case 0:return t=function(c){for(var d=c.getVideoTracks(),f=0,p=d;f<p.length;f++){var m=p[f];m.enabled=!1,m.stop(),c.removeTrack(m)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=l.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=l.sent(),i=[],a=0,s=n;a<s.length;a++)o=s[a],o.kind==="videoinput"&&i.push({id:o.deviceId,label:o.label});return t(r),[2,i]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,r){var n=function(a){for(var s=[],o=0,l=a;o<l.length;o++){var c=l[o];c.kind==="video"&&s.push({id:c.id,label:c.label})}t(s)},i=MediaStreamTrack;i.getSources(n)})},e}(),Ji;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Ji||(Ji={}));var AFe=function(){function e(){this.state=Ji.NOT_STARTED,this.onGoingTransactionNewState=Ji.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Ji.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Ji.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Ji.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Ji.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Ji.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case Ji.UNKNOWN:throw"Transition from unknown is not allowed";case Ji.NOT_STARTED:this.failIfNewStateIs(t,[Ji.PAUSED]);break;case Ji.SCANNING:break;case Ji.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,r){for(var n=0,i=r;n<i.length;n++){var a=i[n];if(t===a)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),TFe=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Ji.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Ji.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Ji.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Ji.PAUSED},e}(),IFe=function(){function e(){}return e.create=function(){return new TFe(new AFe)},e}(),OFe=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hl=function(e){OFe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(uFe),PFe=function(){function e(t,r){this.logger=r,this.fps=Hl.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Hl.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Coe.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Kf(this.qrbox)},e.create=function(t,r){return new e(t,r)},e}(),RFe=function(){function e(t,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var n;typeof r=="boolean"?this.verbose=r===!0:r&&(n=r,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new fFe(this.verbose),this.qrcode=new xFe(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=IFe.create()}return e.prototype.start=function(t,r,n,i){var a=this;if(!t)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var s;i?s=i:s=this.verbose?this.logger.log:function(){};var o=PFe.create(r,this.logger);this.clearElement();var l=!1;o.videoConstraints&&(o.isMediaStreamConstraintsValid()?l=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var c=l,d=document.getElementById(this.elementId);d.clientWidth?d.clientWidth:Hl.DEFAULT_WIDTH,d.style.position="relative",this.shouldScan=!0,this.element=d;var f=this,p=this.stateManagerProxy.startTransition(Ji.SCANNING);return new Promise(function(m,x){var v=c?o.videoConstraints:f.createVideoConstraints(t);if(!v){p.cancel(),x("videoConstraints should be defined");return}var b={};(!c||o.aspectRatio)&&(b.aspectRatio=o.aspectRatio);var w={onRenderSurfaceReady:function(k,E){f.setupUi(k,E,o),f.isScanning=!0,f.foreverScan(o,n,s)}};CFe.failIfNotSupported().then(function(k){k.create(v).then(function(E){return E.render(a.element,b,w).then(function(N){f.renderedCamera=N,p.execute(),m(null)}).catch(function(N){p.cancel(),x(N)})}).catch(function(E){p.cancel(),x(av.errorGettingUserMedia(E))})}).catch(function(k){p.cancel(),x(av.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Ji.PAUSED),this.showPausedState(),(Kf(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,r=function(){t.stateManagerProxy.directTransition(Ji.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(Ji.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(t.element){var a=document.getElementById(Hl.SHADED_REGION_ELEMENT_ID);a&&t.element.removeChild(a)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),n(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),r.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,r){return this.scanFileV2(t,r).then(function(n){return n.decodedText})},e.prototype.scanFileV2=function(t,r){var n=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Kf(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,a){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(t);var s=new Image;s.onload=function(){var o=s.width,l=s.height,c=document.getElementById(n.elementId),d=c.clientWidth?c.clientWidth:Hl.DEFAULT_WIDTH,f=Math.max(c.clientHeight?c.clientHeight:l,Hl.FILE_SCAN_MIN_HEIGHT),p=n.computeCanvasDrawConfig(o,l,d,f);if(r){var m=n.createCanvasElement(d,f,"qr-canvas-visible");m.style.display="inline-block",c.appendChild(m);var x=m.getContext("2d");if(!x)throw"Unable to get 2d context from canvas";x.canvas.width=d,x.canvas.height=f,x.drawImage(s,0,0,o,l,p.x,p.y,p.width,p.height)}var v=Hl.FILE_SCAN_HIDDEN_CANVAS_PADDING,b=Math.max(s.width,p.width),w=Math.max(s.height,p.height),k=b+2*v,E=w+2*v,N=n.createCanvasElement(k,E);c.appendChild(N);var P=N.getContext("2d");if(!P)throw"Unable to get 2d context from canvas";P.canvas.width=k,P.canvas.height=E,P.drawImage(s,0,0,o,l,v,v,b,w);try{n.qrcode.decodeRobustlyAsync(N).then(function(R){i(eG.createFromQrcodeResult(R))}).catch(a)}catch(R){a("QR code parse error, error = ".concat(R))}},s.onerror=a,s.onabort=a,s.onstalled=a,s.onsuspend=a,s.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return NFe.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!Coe.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var r=[Xt.QR_CODE,Xt.AZTEC,Xt.CODABAR,Xt.CODE_39,Xt.CODE_93,Xt.CODE_128,Xt.DATA_MATRIX,Xt.MAXICODE,Xt.ITF,Xt.EAN_13,Xt.EAN_8,Xt.PDF_417,Xt.RSS_14,Xt.RSS_EXPANDED,Xt.UPC_A,Xt.UPC_E,Xt.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return r;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],i=0,a=t.formatsToSupport;i<a.length;i++){var s=a[i];cFe(s)?n.push(s):this.logger.warn("Invalid format: ".concat(s," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(Kf(t))return!0;if(!Kf(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(Kf(t.experimentalFeatures))return!0;var r=t.experimentalFeatures;return Kf(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,r,n){var i=this,a=n.qrbox;this.validateQrboxConfig(a);var s=this.toQrdimensions(t,r,a),o=function(c){if(c<Hl.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Hl.MIN_QR_BOX_SIZE,"px.")},l=function(c){return c>t&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),c=t),c};o(s.width),o(s.height),s.width=l(s.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,r,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(t,r)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return n},e.prototype.setupUi=function(t,r,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(t,r,n);var i=Kf(n.qrbox)?{width:t,height:r}:n.qrbox;this.validateQrboxConfig(i);var a=this.toQrdimensions(t,r,i);a.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var s=n.isShadedBoxEnabled()&&a.height<=r,o={x:0,y:0,width:t,height:r},l=s?this.getShadedRegionBounds(t,r,a):o,c=this.createCanvasElement(l.width,l.height),d={willReadFrequently:!0},f=c.getContext("2d",d);f.canvas.width=l.width,f.canvas.height=l.height,this.element.append(c),s&&this.possiblyInsertShadingElement(this.element,t,r,a),this.createScannerPausedUiElement(this.element),this.qrRegion=l,this.context=f,this.canvasElement=c},e.prototype.createScannerPausedUiElement=function(t){var r=document.createElement("div");r.innerText=av.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",t.appendChild(r),this.scannerPausedUiElement=r},e.prototype.scanContext=function(t,r){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return t(i.text,eG.createFromQrcodeResult(i)),n.possiblyUpdateShaders(!0),!0}).catch(function(i){n.possiblyUpdateShaders(!1);var a=av.codeParseError(i);return r(a,dFe.createFrom(a)),!1})},e.prototype.foreverScan=function(t,r,n){var i=this;if(this.shouldScan&&this.renderedCamera){var a=this.renderedCamera.getSurface(),s=a.videoWidth/a.clientWidth,o=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var l=this.qrRegion.width*s,c=this.qrRegion.height*o,d=this.qrRegion.x*s,f=this.qrRegion.y*o;this.context.drawImage(a,d,f,l,c,0,0,this.qrRegion.width,this.qrRegion.height);var p=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(t,r,n)},i.getTimeoutFps(t.fps))};this.scanContext(r,n).then(function(m){!m&&t.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(r,n).finally(function(){p()})):p()}).catch(function(m){i.logger.logError("Error happend while scanning context",m),p()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var r="facingMode",n="deviceId",i={user:!0,environment:!0},a="exact",s=function(x){if(x in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(x,"'")},o=Object.keys(t);if(o.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(o.length," keys");var l=Object.keys(t)[0];if(l!==r&&l!==n)throw"Only '".concat(r,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(l===r){var c=t.facingMode;if(typeof c=="string"){if(s(c))return{facingMode:c}}else if(typeof c=="object")if(a in c){if(s(c["".concat(a)]))return{facingMode:{exact:c["".concat(a)]}}}else throw"'facingMode' should be string or object with"+" ".concat(a," as key.");else{var d=typeof c;throw"Invalid type of 'facingMode' = ".concat(d)}}else{var f=t.deviceId;if(typeof f=="string")return{deviceId:f};if(typeof f=="object"){if(a in f)return{deviceId:{exact:f["".concat(a)]}};throw"'deviceId' should be string or object with"+" ".concat(a," as key.")}else{var p=typeof f;throw"Invalid type of 'deviceId' = ".concat(p)}}}var m=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(m)},e.prototype.computeCanvasDrawConfig=function(t,r,n,i){if(t<=n&&r<=i){var a=(n-t)/2,s=(i-r)/2;return{x:a,y:s,width:t,height:r}}else{var o=t,l=r;return t>n&&(r=n/t*r,t=n),r>i&&(t=i/r*t,r=i),this.logger.log("Image downsampled from "+"".concat(o,"X").concat(l)+" to ".concat(t,"X").concat(r,".")),this.computeCanvasDrawConfig(t,r,n,i)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=t?Hl.BORDER_SHADER_MATCH_COLOR:Hl.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,r,n){var i=t,a=r,s=document.createElement("canvas");return s.style.width="".concat(i,"px"),s.style.height="".concat(a,"px"),s.style.display="none",s.id=Kf(n)?"qr-canvas":n,s},e.prototype.getShadedRegionBounds=function(t,r,n){if(n.width>t||n.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-n.width)/2,y:(r-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(t,r,n,i){if(!(r-i.width<1||n-i.height<1)){var a=document.createElement("div");a.style.position="absolute";var s=(r-i.width)/2,o=(n-i.height)/2;if(a.style.borderLeft="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderRight="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderTop="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderBottom="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id="".concat(Hl.SHADED_REGION_ELEMENT_ID),r-i.width<11||n-i.height<11)this.hasBorderShaders=!1;else{var l=5,c=40;this.insertShaderBorders(a,c,l,-l,null,0,!0),this.insertShaderBorders(a,c,l,-l,null,0,!1),this.insertShaderBorders(a,c,l,null,-l,0,!0),this.insertShaderBorders(a,c,l,null,-l,0,!1),this.insertShaderBorders(a,l,c+l,-l,null,-l,!0),this.insertShaderBorders(a,l,c+l,null,-l,-l,!0),this.insertShaderBorders(a,l,c+l,-l,null,-l,!1),this.insertShaderBorders(a,l,c+l,null,-l,-l,!1),this.hasBorderShaders=!0}t.append(a)}},e.prototype.insertShaderBorders=function(t,r,n,i,a,s,o){var l=document.createElement("div");l.style.position="absolute",l.style.backgroundColor=Hl.BORDER_SHADER_DEFAULT_COLOR,l.style.width="".concat(r,"px"),l.style.height="".concat(n,"px"),i!==null&&(l.style.top="".concat(i,"px")),a!==null&&(l.style.bottom="".concat(a,"px")),o?l.style.left="".concat(s,"px"):l.style.right="".concat(s,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(l),t.appendChild(l)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),oG;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(oG||(oG={}));const jFe=({onScanSuccess:e,onClose:t})=>{const[r,n]=I.useState(null),i=I.useRef(null),a=I.useRef(!1),[s,o]=I.useState(!1),[l,c]=I.useState(!1);return I.useEffect(()=>{i.current||(i.current=new RFe("qr-reader"));const d={fps:20,qrbox:{width:250,height:250},aspectRatio:1},f=(x,v)=>{var b;(b=i.current)!=null&&b.isScanning&&i.current.stop(),e(x),t()},p=(x,v)=>{};return(async()=>{var x,v,b;if(!(a.current||(x=i.current)!=null&&x.isScanning)){a.current=!0,n(null);try{const w=i.current;if(!w)return;await w.start({facingMode:"environment"},d,f,p);try{if(typeof w.getRunningTrack=="function"){const k=w.getRunningTrack(),E=((v=k==null?void 0:k.getCapabilities)==null?void 0:v.call(k))||{};E!=null&&E.torch&&o(!0)}}catch(k){console.warn("Torch not supported or error detecting it:",k)}n(null)}catch(w){(b=i.current)!=null&&b.isScanning||(n("Failed to start the camera. Please ensure permissions are granted."),console.error("Scanner error:",w))}finally{a.current=!1}}})(),()=>{i.current&&i.current.isScanning&&i.current.stop().catch(()=>{})}},[e,t]),u.jsxs("div",{className:"bg-black p-4 rounded-lg relative",children:[u.jsx("div",{id:"qr-reader",className:"rounded-lg overflow-hidden"}),s&&u.jsx("button",{onClick:async()=>{var f;const d=!l;try{await((f=i.current)==null?void 0:f.applyVideoConstraints({advanced:[{torch:d}]})),c(d)}catch{Re.error("Flashlight not available")}},className:`absolute top-6 left-6 z-10 p-3 rounded-full shadow-lg transition-colors ${l?"bg-yellow-400 text-black":"bg-black/50 text-white"}`,children:l?u.jsx(W8e,{size:24}):u.jsx(xoe,{size:24})}),!r&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:u.jsx("div",{className:"w-[280px] h-[280px] border-4 border-accent rounded-lg shadow-lg relative",style:{boxShadow:"0 0 0 9999px rgba(0,0,0,0.5)"},children:u.jsx("div",{className:"scan-laser"})})}),r&&u.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-80 flex flex-col items-center justify-center text-center p-4",children:[u.jsx(ld,{className:"w-12 h-12 text-red-500 mb-4"}),u.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Camera Error"}),u.jsx("p",{className:"text-sm text-gray-300 mb-6",children:r}),u.jsxs("button",{onClick:()=>window.location.reload(),className:"w-full flex items-center justify-center gap-2 p-3 bg-accent hover:bg-blue-700 rounded-lg text-white font-semibold mb-3",children:[u.jsx(ZE,{size:20}),"Try Again"]})]}),u.jsxs("button",{onClick:t,className:"mt-4 w-full flex items-center justify-center gap-2 p-3 bg-red-600 hover:bg-red-700 rounded-lg text-white font-semibold",children:[u.jsx(d8e,{size:20}),"Cancel Scan"]})]})},_oe=({onItemsChange:e,onRequestNewSample:t,externalSelectedProduct:r})=>{const{products:n,sampleCheckouts:i}=Gr(),[a,s]=I.useState(""),[o,l]=I.useState([]),[c,d]=I.useState(!1),[f,p]=I.useState(null),[m,x]=I.useState(""),[v,b]=I.useState(""),w=I.useMemo(()=>{const O=new Set;return i.forEach(D=>{D.actualReturnDate===null&&O.add(String(D.variantId))}),O},[i]),k=I.useMemo(()=>{if(a.length<2)return[];const O=a.toLowerCase();return n.filter(D=>{var L;return!D.isDiscontinued&&(D.name.toLowerCase().includes(O)||((L=D.manufacturerName)==null?void 0:L.toLowerCase().includes(O))||D.variants.some(B=>B.name&&B.name.toLowerCase().includes(O)||B.sku&&B.sku.toLowerCase().includes(O)))})},[a,n]);I.useEffect(()=>{e(o)},[o,e]),I.useEffect(()=>{if(r)if(p(r),b(""),r.variants.length>0){const O=r.variants.find(D=>D.isMaster);x(O?O.id:r.variants[0].id)}else x("")},[r]);const E=O=>{if(p(O),b(""),O.variants.length>0){const D=O.variants.find(L=>L.isMaster);x(D?D.id:O.variants[0].id)}else x("")},N=()=>{if(!f||!m||!v)return;const O=f.variants.find(z=>z.id===m),D=f.variants.find(z=>z.id===v);if(!O||!D)return;if(w.has(String(O.id))){Re.error("This physical sample is currently checked out.");return}const L={variantId:O.id,interestVariantId:D.id,productName:f.name,variantName:O.name||O.size||"Default",interestName:D.name||D.size||"Default",manufacturerName:f.manufacturerName||"",sampleType:"Board",quantity:1};o.findIndex(z=>z.variantId===L.variantId&&z.interestVariantId===L.interestVariantId)>=0?Re.error("Item already in list."):(l(z=>[...z,L]),Re.success(`Added ${L.interestName}`)),p(null),s("")},P=O=>{l(D=>D.filter((L,B)=>B!==O))},R=O=>{d(!1);let D="",L="";try{if(O.includes("?")){const z=new URL(O);D=z.searchParams.get("variantId")||"",L=z.searchParams.get("productId")||""}else D=O;if(!D&&!L)throw new Error("Could not parse ID");let B;if(L)B=n.find(z=>String(z.id)===String(L));else if(D){if(w.has(String(D))){Re.error("This sample is already checked out!");return}for(const z of n)if(z.variants.some(H=>String(H.id)===String(D))){B=z;break}}if(B){if(p(B),D)x(D),b(D);else{const z=B.variants.find(H=>H.isMaster);z&&x(z.id),b("")}Re.success("Item found!")}else Re.error("Item not found in library.")}catch(B){console.error("Scan Error:",B),Re.error("Invalid QR Code")}};return c?u.jsx(jFe,{onScanSuccess:R,onClose:()=>d(!1)}):u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 h-[500px]",children:[u.jsx("div",{className:"flex flex-col h-full border-r border-border pr-4",children:f?u.jsx("div",{className:"flex flex-col h-full animate-in slide-in-from-right-4 fade-in duration-200",children:u.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border flex-1 flex flex-col gap-4",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-lg text-text-primary",children:f.name}),u.jsx("p",{className:"text-sm text-text-secondary",children:f.manufacturerName}),u.jsx("select",{value:m,onChange:O=>x(O.target.value),className:"hidden",children:f.variants.filter(O=>O.isMaster||O.hasSample).sort((O,D)=>O.isMaster===D.isMaster?0:O.isMaster?-1:1).map(O=>u.jsx("option",{value:O.id,children:O.name},O.id))})]}),u.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[u.jsxs("label",{className:"block text-sm font-bold text-text-primary mb-1",children:["Choose Variant ",u.jsx("span",{className:"text-red-500",children:"*"})]}),f.variants.length===0?u.jsx("p",{className:"text-red-500 text-sm",children:"No variants available."}):u.jsxs("select",{value:v,onChange:O=>b(O.target.value),size:5,className:"w-full flex-1 p-2 bg-background border-2 border-primary/20 focus:border-primary rounded text-text-primary cursor-pointer",children:[u.jsx("option",{value:"",disabled:!0,className:"text-text-tertiary",children:"-- Select an option --"}),f.variants.filter(O=>!O.isMaster).sort((O,D)=>(O.name||"").localeCompare(D.name||"")).map(O=>{const D=w.has(String(O.id));return u.jsxs("option",{value:O.id,disabled:D,className:`py-1 flex justify-between ${D?"text-red-400 opacity-70 bg-red-500/10":""}`,children:[O.name," ",O.size?`(${O.size})`:""," ",D?"(Out)":""]},O.id)})]}),!v&&u.jsxs("p",{className:"text-xs text-amber-600 mt-2 flex items-center gap-1",children:[u.jsx(QE,{size:12})," Selection required"]})]}),u.jsxs("div",{className:"mt-auto pt-4 flex gap-3",children:[u.jsx("button",{onClick:()=>p(null),className:"flex-1 py-3 bg-secondary hover:bg-secondary-hover text-on-secondary font-medium rounded-lg transition-colors",children:"Cancel"}),u.jsx("button",{onClick:N,disabled:!v||w.has(m),className:"flex-[2] py-3 bg-primary hover:bg-primary-hover disabled:bg-gray-400 text-on-primary font-bold rounded-lg shadow-md transition-all whitespace-nowrap",children:v?"Add to List":"Select a Style"})]})]})}):u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"relative mb-4",children:[u.jsx(Wo,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-text-secondary"}),u.jsx("input",{type:"text",autoFocus:!0,placeholder:"Search product lines...",value:a,onChange:O=>s(O.target.value),className:"w-full p-3 pl-10 bg-background border-2 border-border rounded-lg text-text-primary focus:border-primary outline-none"})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto space-y-2",children:[a.length>1&&t&&u.jsxs("div",{onClick:()=>t(a),className:"p-3 mb-2 bg-primary/10 hover:bg-primary/20 border border-primary/30 rounded-lg cursor-pointer flex justify-between items-center group animate-in fade-in",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(su,{size:20,className:"text-primary"}),u.jsxs("div",{children:[u.jsxs("p",{className:"font-bold text-primary",children:['Create "',a,'"']}),u.jsx("p",{className:"text-xs text-text-secondary",children:"Add this product to library"})]})]}),u.jsx(sd,{size:16,className:"text-primary"})]}),a.length<2&&u.jsxs("div",{className:"text-center py-8 text-text-tertiary",children:[u.jsx("p",{children:"Type to search for products..."}),u.jsxs("button",{type:"button",onClick:()=>d(!0),className:"mt-4 flex items-center justify-center gap-2 p-3 bg-surface hover:bg-background border border-border rounded-lg text-primary font-semibold transition-colors mx-auto",children:[u.jsx(F8e,{size:20})," Scan QR Code"]})]}),k.map(O=>u.jsxs("div",{onClick:()=>E(O),className:"p-3 bg-background hover:bg-surface border border-border rounded-lg cursor-pointer flex justify-between items-center group",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-lg text-text-primary",children:O.name}),u.jsx("p",{className:"text-xs text-text-secondary",children:O.manufacturerName})]}),u.jsx(sd,{size:16,className:"text-text-tertiary group-hover:text-primary"})]},O.id))]})]})}),u.jsxs("div",{className:"flex flex-col h-full bg-background rounded-lg border border-border p-4",children:[u.jsxs("h4",{className:"font-bold text-text-primary mb-4 border-b border-border pb-2",children:["Checkout List (",o.length,")"]}),u.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-2",children:o.length===0?u.jsx("div",{className:"h-full flex items-center justify-center text-text-tertiary text-sm italic",children:"List is empty. Add items from the left."}):o.map((O,D)=>u.jsxs("div",{className:"bg-surface p-3 rounded border border-border flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-sm text-text-primary",children:O.productName}),u.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[u.jsx("span",{className:"text-xs text-text-secondary",children:"Interested in:"}),u.jsx("span",{className:"text-sm font-bold text-primary",children:O.interestName})]})]}),u.jsx("button",{onClick:()=>P(D),className:"text-text-tertiary hover:text-red-400 p-1",children:u.jsx(Zr,{size:16})})]},`${O.variantId}-${D}`))})]})]})},Ju=({children:e})=>{const t=I.useRef(null);return t.current||(t.current=document.createElement("div")),I.useEffect(()=>{const r=t.current;return document.body.appendChild(r),()=>{document.body.removeChild(r)}},[]),Il.createPortal(e,t.current)},DFe=({customer:e,project:t,checkoutItems:r,returnDate:n})=>{const{systemBranding:i}=Gr();return!e||!t?null:u.jsxs("div",{id:"printable-summary",className:"p-10 bg-white text-black font-sans hidden print:block",children:[u.jsxs("header",{className:"flex justify-between items-start pb-4 border-b-2 border-gray-300",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:(i==null?void 0:i.companyName)||"Subfloor"}),u.jsx("p",{className:"text-gray-600",children:"Sample Checkout Summary"})]}),u.jsxs("div",{className:"text-right text-sm",children:[u.jsx("p",{className:"font-bold text-base",children:e.fullName}),e.phoneNumber&&u.jsx("p",{className:"text-gray-700",children:e.phoneNumber}),e.email&&u.jsx("p",{className:"text-gray-700",children:e.email})]})]}),u.jsxs("main",{className:"mt-8",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h2",{className:"text-xl font-semibold mb-2 pb-1 border-b border-gray-200",children:"Project Details"}),u.jsxs("p",{children:[u.jsx("strong",{className:"font-semibold",children:"Project Name:"})," ",t.projectName]}),u.jsxs("p",{children:[u.jsx("strong",{className:"font-semibold",children:"Project Type:"})," ",t.projectType]})]}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold mb-2 pb-1 border-b border-gray-200",children:"Samples Checked Out"}),u.jsxs("table",{className:"w-full mt-4 text-left border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b-2 border-gray-300",children:[u.jsx("th",{className:"p-2 font-semibold",children:"Product / Variant"}),u.jsx("th",{className:"p-2 font-semibold",children:"Manufacturer"}),u.jsx("th",{className:"p-2 font-semibold",children:"Sample Type"})]})}),u.jsx("tbody",{children:r.map((a,s)=>u.jsxs("tr",{className:"border-b border-gray-200",children:[u.jsxs("td",{className:"p-2 align-top",children:[u.jsx("div",{className:"font-bold",children:a.productName}),u.jsxs("div",{className:"text-sm text-gray-600",children:["Selected: ",a.interestName]})]}),u.jsx("td",{className:"p-2 align-top",children:a.manufacturerName||"N/A"}),u.jsxs("td",{className:"p-2 align-top",children:[a.sampleType," ",u.jsxs("span",{className:"text-sm text-gray-500",children:["(Qty: ",a.quantity,")"]})]})]},s))})]})]})]}),u.jsxs("footer",{className:"mt-12 pt-4 border-t-2 border-gray-300",children:[u.jsxs("p",{className:"font-bold text-lg",children:["Expected Return Date: ",new Date(n).toLocaleDateString()]}),u.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Please return all samples by the date listed above. Thank you!"})]})]})},Noe=()=>Us({queryKey:["currentUser"],queryFn:Jse}),lG={fullName:"",email:"",phoneNumber:"",address:""},cG=e=>{if(!e)return e;const t=e.replace(/[^\d]/g,""),r=t.length;return r<4?t:r<7?`(${t.slice(0,3)}) ${t.slice(3)}`:`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,10)}`},uG=(e,t)=>{const r={};e.fullName.trim()||(r.fullName="Full name is required.");const n=/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/;e.email&&!n.test(e.email)&&(r.email="Must be a valid format (e.g., user@domain.com)."),e.email&&e.email!==t&&(r.confirmEmail="Emails do not match.");const i=e.phoneNumber.replace(/[^\d]/g,"");return e.phoneNumber&&i.length!==10&&(r.phoneNumber="Phone number must be exactly 10 digits."),r},O7=({isOpen:e,onClose:t,customer:r,initialData:n,onSaveSuccess:i})=>{const{data:a}=Noe(),{createCustomer:s,updateCustomer:o,deleteCustomer:l}=Mse(),[c,d]=I.useState(lG),[f,p]=I.useState(""),[m,x]=I.useState({}),v=a==null?void 0:a.roles.includes("Admin"),b=r!==null;I.useEffect(()=>{if(e){if(b&&r){const R=r.email||"";d({fullName:r.fullName||"",email:R,phoneNumber:r.phoneNumber?cG(r.phoneNumber):"",address:r.address||""}),p(R)}else d({...lG,fullName:(n==null?void 0:n.fullName)||""}),p("");x({})}},[e,r,b,n]),I.useEffect(()=>{e&&x(uG(c,f))},[c,f,e]);const w=R=>{const{name:O,value:D}=R.target;d(O==="phoneNumber"?L=>({...L,phoneNumber:cG(D)}):L=>({...L,[O]:D}))},k=async R=>{R.preventDefault();const O=uG(c,f);if(Object.keys(O).length>0){x(O),Re.error("Please fix the errors before submitting.");return}const D={...c,phoneNumber:c.phoneNumber.replace(/[^\d]/g,"")};try{if(b&&r)await o.mutateAsync({...r,...D}),Re.success("Customer updated!"),t();else{const L=await s.mutateAsync(D);Re.success("Customer created!"),i&&i(L),t()}}catch{}},E=async()=>{if(r&&window.confirm(`Delete ${r.fullName}?`))try{await l.mutateAsync(r.id),Re.success("Customer deleted."),t()}catch{}};if(!e)return null;const N=s.isPending||o.isPending||l.isPending,P=N||Object.keys(m).length>0;return u.jsx("div",{className:"fixed inset-0 bg-black/75 flex justify-center z-50 overflow-y-auto",children:u.jsxs("div",{className:"bg-surface-container-high w-full min-h-full md:min-h-0 md:h-auto md:max-h-[90vh] md:max-w-md md:rounded-xl shadow-2xl flex flex-col border border-outline/10 md:my-auto relative",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center bg-surface-container-low md:rounded-t-xl",children:[u.jsxs("h2",{className:"text-xl font-bold text-text-primary flex items-center gap-2",children:[u.jsx(lc,{className:"text-primary"}),b?"Edit Customer":"New Customer"]}),u.jsx("button",{onClick:t,className:"p-2 hover:bg-surface-container-highest rounded-full text-text-secondary hover:text-text-primary",children:u.jsx(Zr,{size:24})})]}),u.jsxs("form",{onSubmit:k,noValidate:!0,className:"flex flex-col h-full md:h-auto",children:[u.jsxs("div",{className:"p-6 space-y-4 flex-grow overflow-y-auto",children:[u.jsxs("div",{children:[u.jsx("input",{type:"text",name:"fullName",placeholder:"Full Name",value:c.fullName,onChange:w,className:`w-full p-3 bg-surface-container-highest border-b-2 rounded-t-md text-text-primary placeholder-text-secondary focus:outline-none focus:border-primary transition-colors ${m.fullName?"border-error":"border-transparent"}`}),m.fullName&&u.jsx("p",{className:"text-error text-xs mt-1 ml-1 font-medium",children:m.fullName})]}),u.jsxs("div",{children:[u.jsx("input",{type:"email",name:"email",placeholder:"Email (Optional)",value:c.email,onChange:w,className:`w-full p-3 bg-surface-container-highest border-b-2 rounded-t-md text-text-primary placeholder-text-secondary focus:outline-none focus:border-primary transition-colors ${m.email?"border-error":"border-transparent"}`}),m.email&&u.jsx("p",{className:"text-error text-xs mt-1 ml-1 font-medium",children:m.email})]}),c.email&&u.jsxs("div",{children:[u.jsx("input",{type:"email",name:"confirmEmail",placeholder:"Confirm Email",value:f,onChange:R=>p(R.target.value),className:`w-full p-3 bg-surface-container-highest border-b-2 rounded-t-md text-text-primary placeholder-text-secondary focus:outline-none focus:border-primary transition-colors ${m.confirmEmail?"border-error":"border-transparent"}`}),m.confirmEmail&&u.jsx("p",{className:"text-error text-xs mt-1 ml-1 font-medium",children:m.confirmEmail})]}),u.jsxs("div",{children:[u.jsx("input",{type:"tel",name:"phoneNumber",placeholder:"Phone Number",value:c.phoneNumber,onChange:w,className:`w-full p-3 bg-surface-container-highest border-b-2 rounded-t-md text-text-primary placeholder-text-secondary focus:outline-none focus:border-primary transition-colors ${m.phoneNumber?"border-error":"border-transparent"}`,maxLength:14}),m.phoneNumber&&u.jsx("p",{className:"text-error text-xs mt-1 ml-1 font-medium",children:m.phoneNumber})]}),u.jsx("input",{type:"text",name:"address",placeholder:"Address",value:c.address,onChange:w,className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary placeholder-text-secondary focus:outline-none focus:border-primary transition-colors"})]}),u.jsxs("div",{className:"p-4 border-t border-outline/10 bg-surface-container-low md:rounded-b-xl flex justify-end gap-3 shrink-0",children:[u.jsx("button",{type:"button",onClick:t,className:"py-2 px-6 bg-surface hover:bg-surface-container-highest border border-outline/20 rounded-full text-text-primary font-medium transition-colors",disabled:N,children:"Cancel"}),b&&v&&u.jsxs("button",{type:"button",onClick:E,className:"py-2 px-6 bg-error-container hover:bg-error/20 text-error rounded-full font-semibold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed mr-auto transition-colors",disabled:N,children:[u.jsx(mo,{size:16}),l.isPending?"Deleting...":"Delete"]}),u.jsx("button",{type:"submit",className:"py-2 px-6 bg-primary hover:bg-primary-hover rounded-full text-on-primary font-semibold shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-all",disabled:P,children:s.isPending||o.isPending?"Saving...":b?"Save Changes":"Add Customer"})]})]})]})})};function Ar(){return Ar=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ar.apply(null,arguments)}function tx(e){"@babel/helpers - typeof";return tx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tx(e)}function MFe(e,t){if(tx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(tx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Aoe(e){var t=MFe(e,"string");return tx(t)=="symbol"?t:t+""}function qd(e,t,r){return(t=Aoe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Er(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dG(Object(r),!0).forEach(function(n){qd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FFe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Aoe(n.key),n)}}function LFe(e,t,r){return t&&fG(e.prototype,t),r&&fG(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s8(e,t){return s8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},s8(e,t)}function BFe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s8(e,t)}function nT(e){return nT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nT(e)}function Toe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Toe=function(){return!!e})()}function UFe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $Fe(e,t){if(t&&(tx(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UFe(e)}function zFe(e){var t=Toe();return function(){var r,n=nT(e);if(t){var i=nT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $Fe(this,r)}}function o8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function HFe(e){if(Array.isArray(e))return o8(e)}function WFe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ioe(e,t){if(e){if(typeof e=="string")return o8(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o8(e,t):void 0}}function VFe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lo(e){return HFe(e)||WFe(e)||Ioe(e)||VFe()}function qFe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function GFe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var KFe=function(){function e(r){var n=this;this._insertTag=function(i){var a;n.tags.length===0?n.insertionPoint?a=n.insertionPoint.nextSibling:n.prepend?a=n.container.firstChild:a=n.before:a=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,a),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(GFe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var a=qFe(i);try{a.insertRule(n,a.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},e}(),Ys="-ms-",iT="-moz-",Hn="-webkit-",Ooe="comm",P7="rule",R7="decl",XFe="@import",Poe="@keyframes",YFe="@layer",QFe=Math.abs,I4=String.fromCharCode,JFe=Object.assign;function ZFe(e,t){return Os(e,0)^45?(((t<<2^Os(e,0))<<2^Os(e,1))<<2^Os(e,2))<<2^Os(e,3):0}function Roe(e){return e.trim()}function e5e(e,t){return(e=t.exec(e))?e[0]:e}function Wn(e,t,r){return e.replace(t,r)}function l8(e,t){return e.indexOf(t)}function Os(e,t){return e.charCodeAt(t)|0}function pS(e,t,r){return e.slice(t,r)}function Fd(e){return e.length}function j7(e){return e.length}function m_(e,t){return t.push(e),e}function t5e(e,t){return e.map(t).join("")}var O4=1,ly=1,joe=0,Al=0,Aa=0,lb="";function P4(e,t,r,n,i,a,s){return{value:e,root:t,parent:r,type:n,props:i,children:a,line:O4,column:ly,length:s,return:""}}function gw(e,t){return JFe(P4("",null,null,"",null,null,0),e,{length:-e.length},t)}function r5e(){return Aa}function n5e(){return Aa=Al>0?Os(lb,--Al):0,ly--,Aa===10&&(ly=1,O4--),Aa}function nc(){return Aa=Al<joe?Os(lb,Al++):0,ly++,Aa===10&&(ly=1,O4++),Aa}function Zd(){return Os(lb,Al)}function BN(){return Al}function tC(e,t){return pS(lb,e,t)}function mS(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Doe(e){return O4=ly=1,joe=Fd(lb=e),Al=0,[]}function Moe(e){return lb="",e}function UN(e){return Roe(tC(Al-1,c8(e===91?e+2:e===40?e+1:e)))}function i5e(e){for(;(Aa=Zd())&&Aa<33;)nc();return mS(e)>2||mS(Aa)>3?"":" "}function a5e(e,t){for(;--t&&nc()&&!(Aa<48||Aa>102||Aa>57&&Aa<65||Aa>70&&Aa<97););return tC(e,BN()+(t<6&&Zd()==32&&nc()==32))}function c8(e){for(;nc();)switch(Aa){case e:return Al;case 34:case 39:e!==34&&e!==39&&c8(Aa);break;case 40:e===41&&c8(e);break;case 92:nc();break}return Al}function s5e(e,t){for(;nc()&&e+Aa!==57;)if(e+Aa===84&&Zd()===47)break;return"/*"+tC(t,Al-1)+"*"+I4(e===47?e:nc())}function o5e(e){for(;!mS(Zd());)nc();return tC(e,Al)}function l5e(e){return Moe($N("",null,null,null,[""],e=Doe(e),0,[0],e))}function $N(e,t,r,n,i,a,s,o,l){for(var c=0,d=0,f=s,p=0,m=0,x=0,v=1,b=1,w=1,k=0,E="",N=i,P=a,R=n,O=E;b;)switch(x=k,k=nc()){case 40:if(x!=108&&Os(O,f-1)==58){l8(O+=Wn(UN(k),"&","&\f"),"&\f")!=-1&&(w=-1);break}case 34:case 39:case 91:O+=UN(k);break;case 9:case 10:case 13:case 32:O+=i5e(x);break;case 92:O+=a5e(BN()-1,7);continue;case 47:switch(Zd()){case 42:case 47:m_(c5e(s5e(nc(),BN()),t,r),l);break;default:O+="/"}break;case 123*v:o[c++]=Fd(O)*w;case 125*v:case 59:case 0:switch(k){case 0:case 125:b=0;case 59+d:w==-1&&(O=Wn(O,/\f/g,"")),m>0&&Fd(O)-f&&m_(m>32?pG(O+";",n,r,f-1):pG(Wn(O," ","")+";",n,r,f-2),l);break;case 59:O+=";";default:if(m_(R=hG(O,t,r,c,d,i,o,E,N=[],P=[],f),a),k===123)if(d===0)$N(O,t,R,R,N,a,f,o,P);else switch(p===99&&Os(O,3)===110?100:p){case 100:case 108:case 109:case 115:$N(e,R,R,n&&m_(hG(e,R,R,0,0,i,o,E,i,N=[],f),P),i,P,f,o,n?N:P);break;default:$N(O,R,R,R,[""],P,0,o,P)}}c=d=m=0,v=w=1,E=O="",f=s;break;case 58:f=1+Fd(O),m=x;default:if(v<1){if(k==123)--v;else if(k==125&&v++==0&&n5e()==125)continue}switch(O+=I4(k),k*v){case 38:w=d>0?1:(O+="\f",-1);break;case 44:o[c++]=(Fd(O)-1)*w,w=1;break;case 64:Zd()===45&&(O+=UN(nc())),p=Zd(),d=f=Fd(E=O+=o5e(BN())),k++;break;case 45:x===45&&Fd(O)==2&&(v=0)}}return a}function hG(e,t,r,n,i,a,s,o,l,c,d){for(var f=i-1,p=i===0?a:[""],m=j7(p),x=0,v=0,b=0;x<n;++x)for(var w=0,k=pS(e,f+1,f=QFe(v=s[x])),E=e;w<m;++w)(E=Roe(v>0?p[w]+" "+k:Wn(k,/&\f/g,p[w])))&&(l[b++]=E);return P4(e,t,r,i===0?P7:o,l,c,d)}function c5e(e,t,r){return P4(e,t,r,Ooe,I4(r5e()),pS(e,2,-2),0)}function pG(e,t,r,n){return P4(e,t,r,R7,pS(e,0,n),pS(e,n+1,-1),n)}function bv(e,t){for(var r="",n=j7(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function u5e(e,t,r,n){switch(e.type){case YFe:if(e.children.length)break;case XFe:case R7:return e.return=e.return||e.value;case Ooe:return"";case Poe:return e.return=e.value+"{"+bv(e.children,n)+"}";case P7:e.value=e.props.join(",")}return Fd(r=bv(e.children,n))?e.return=e.value+"{"+r+"}":""}function d5e(e){var t=j7(e);return function(r,n,i,a){for(var s="",o=0;o<t;o++)s+=e[o](r,n,i,a)||"";return s}}function f5e(e){return function(t){t.root||(t=t.return)&&e(t)}}function h5e(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var p5e=function(t,r,n){for(var i=0,a=0;i=a,a=Zd(),i===38&&a===12&&(r[n]=1),!mS(a);)nc();return tC(t,Al)},m5e=function(t,r){var n=-1,i=44;do switch(mS(i)){case 0:i===38&&Zd()===12&&(r[n]=1),t[n]+=p5e(Al-1,r,n);break;case 2:t[n]+=UN(i);break;case 4:if(i===44){t[++n]=Zd()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=I4(i)}while(i=nc());return t},g5e=function(t,r){return Moe(m5e(Doe(t),r))},mG=new WeakMap,x5e=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!mG.get(n))&&!i){mG.set(t,!0);for(var a=[],s=g5e(r,a),o=n.props,l=0,c=0;l<s.length;l++)for(var d=0;d<o.length;d++,c++)t.props[c]=a[l]?s[l].replace(/&\f/g,o[d]):o[d]+" "+s[l]}}},v5e=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function Foe(e,t){switch(ZFe(e,t)){case 5103:return Hn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Hn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Hn+e+iT+e+Ys+e+e;case 6828:case 4268:return Hn+e+Ys+e+e;case 6165:return Hn+e+Ys+"flex-"+e+e;case 5187:return Hn+e+Wn(e,/(\w+).+(:[^]+)/,Hn+"box-$1$2"+Ys+"flex-$1$2")+e;case 5443:return Hn+e+Ys+"flex-item-"+Wn(e,/flex-|-self/,"")+e;case 4675:return Hn+e+Ys+"flex-line-pack"+Wn(e,/align-content|flex-|-self/,"")+e;case 5548:return Hn+e+Ys+Wn(e,"shrink","negative")+e;case 5292:return Hn+e+Ys+Wn(e,"basis","preferred-size")+e;case 6060:return Hn+"box-"+Wn(e,"-grow","")+Hn+e+Ys+Wn(e,"grow","positive")+e;case 4554:return Hn+Wn(e,/([^-])(transform)/g,"$1"+Hn+"$2")+e;case 6187:return Wn(Wn(Wn(e,/(zoom-|grab)/,Hn+"$1"),/(image-set)/,Hn+"$1"),e,"")+e;case 5495:case 3959:return Wn(e,/(image-set\([^]*)/,Hn+"$1$`$1");case 4968:return Wn(Wn(e,/(.+:)(flex-)?(.*)/,Hn+"box-pack:$3"+Ys+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Hn+e+e;case 4095:case 3583:case 4068:case 2532:return Wn(e,/(.+)-inline(.+)/,Hn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Fd(e)-1-t>6)switch(Os(e,t+1)){case 109:if(Os(e,t+4)!==45)break;case 102:return Wn(e,/(.+:)(.+)-([^]+)/,"$1"+Hn+"$2-$3$1"+iT+(Os(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~l8(e,"stretch")?Foe(Wn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Os(e,t+1)!==115)break;case 6444:switch(Os(e,Fd(e)-3-(~l8(e,"!important")&&10))){case 107:return Wn(e,":",":"+Hn)+e;case 101:return Wn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Hn+(Os(e,14)===45?"inline-":"")+"box$3$1"+Hn+"$2$3$1"+Ys+"$2box$3")+e}break;case 5936:switch(Os(e,t+11)){case 114:return Hn+e+Ys+Wn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Hn+e+Ys+Wn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Hn+e+Ys+Wn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Hn+e+Ys+e+e}return e}var y5e=function(t,r,n,i){if(t.length>-1&&!t.return)switch(t.type){case R7:t.return=Foe(t.value,t.length);break;case Poe:return bv([gw(t,{value:Wn(t.value,"@","@"+Hn)})],i);case P7:if(t.length)return t5e(t.props,function(a){switch(e5e(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return bv([gw(t,{props:[Wn(a,/:(read-\w+)/,":"+iT+"$1")]})],i);case"::placeholder":return bv([gw(t,{props:[Wn(a,/:(plac\w+)/,":"+Hn+"input-$1")]}),gw(t,{props:[Wn(a,/:(plac\w+)/,":"+iT+"$1")]}),gw(t,{props:[Wn(a,/:(plac\w+)/,Ys+"input-$1")]})],i)}return""})}},b5e=[y5e],w5e=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(v){var b=v.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var i=t.stylisPlugins||b5e,a={},s,o=[];s=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(v){for(var b=v.getAttribute("data-emotion").split(" "),w=1;w<b.length;w++)a[b[w]]=!0;o.push(v)});var l,c=[x5e,v5e];{var d,f=[u5e,f5e(function(v){d.insert(v)})],p=d5e(c.concat(i,f)),m=function(b){return bv(l5e(b),p)};l=function(b,w,k,E){d=k,m(b?b+"{"+w.styles+"}":w.styles),E&&(x.inserted[w.name]=!0)}}var x={key:r,sheet:new KFe({key:r,container:s,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:l};return x.sheet.hydrate(o),x},Loe={exports:{}},ni={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bs=typeof Symbol=="function"&&Symbol.for,D7=bs?Symbol.for("react.element"):60103,M7=bs?Symbol.for("react.portal"):60106,R4=bs?Symbol.for("react.fragment"):60107,j4=bs?Symbol.for("react.strict_mode"):60108,D4=bs?Symbol.for("react.profiler"):60114,M4=bs?Symbol.for("react.provider"):60109,F4=bs?Symbol.for("react.context"):60110,F7=bs?Symbol.for("react.async_mode"):60111,L4=bs?Symbol.for("react.concurrent_mode"):60111,B4=bs?Symbol.for("react.forward_ref"):60112,U4=bs?Symbol.for("react.suspense"):60113,S5e=bs?Symbol.for("react.suspense_list"):60120,$4=bs?Symbol.for("react.memo"):60115,z4=bs?Symbol.for("react.lazy"):60116,E5e=bs?Symbol.for("react.block"):60121,C5e=bs?Symbol.for("react.fundamental"):60117,k5e=bs?Symbol.for("react.responder"):60118,_5e=bs?Symbol.for("react.scope"):60119;function xc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case D7:switch(e=e.type,e){case F7:case L4:case R4:case D4:case j4:case U4:return e;default:switch(e=e&&e.$$typeof,e){case F4:case B4:case z4:case $4:case M4:return e;default:return t}}case M7:return t}}}function Boe(e){return xc(e)===L4}ni.AsyncMode=F7;ni.ConcurrentMode=L4;ni.ContextConsumer=F4;ni.ContextProvider=M4;ni.Element=D7;ni.ForwardRef=B4;ni.Fragment=R4;ni.Lazy=z4;ni.Memo=$4;ni.Portal=M7;ni.Profiler=D4;ni.StrictMode=j4;ni.Suspense=U4;ni.isAsyncMode=function(e){return Boe(e)||xc(e)===F7};ni.isConcurrentMode=Boe;ni.isContextConsumer=function(e){return xc(e)===F4};ni.isContextProvider=function(e){return xc(e)===M4};ni.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===D7};ni.isForwardRef=function(e){return xc(e)===B4};ni.isFragment=function(e){return xc(e)===R4};ni.isLazy=function(e){return xc(e)===z4};ni.isMemo=function(e){return xc(e)===$4};ni.isPortal=function(e){return xc(e)===M7};ni.isProfiler=function(e){return xc(e)===D4};ni.isStrictMode=function(e){return xc(e)===j4};ni.isSuspense=function(e){return xc(e)===U4};ni.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===R4||e===L4||e===D4||e===j4||e===U4||e===S5e||typeof e=="object"&&e!==null&&(e.$$typeof===z4||e.$$typeof===$4||e.$$typeof===M4||e.$$typeof===F4||e.$$typeof===B4||e.$$typeof===C5e||e.$$typeof===k5e||e.$$typeof===_5e||e.$$typeof===E5e)};ni.typeOf=xc;Loe.exports=ni;var Uoe=Loe.exports,$oe=Uoe,N5e={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},A5e={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},zoe={};zoe[$oe.ForwardRef]=N5e;zoe[$oe.Memo]=A5e;var T5e=!0;function I5e(e,t,r){var n="";return r.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(n+=i+" ")}),n}var Hoe=function(t,r,n){var i=t.key+"-"+r.name;(n===!1||T5e===!1)&&t.registered[i]===void 0&&(t.registered[i]=r.styles)},O5e=function(t,r,n){Hoe(t,r,n);var i=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var a=r;do t.insert(r===a?"."+i:"",a,t.sheet,!0),a=a.next;while(a!==void 0)}};function P5e(e){for(var t=0,r,n=0,i=e.length;i>=4;++n,i-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var R5e={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},j5e=/[A-Z]|^ms/g,D5e=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Woe=function(t){return t.charCodeAt(1)===45},gG=function(t){return t!=null&&typeof t!="boolean"},Mj=h5e(function(e){return Woe(e)?e:e.replace(j5e,"-$&").toLowerCase()}),xG=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(D5e,function(n,i,a){return Ld={name:i,styles:a,next:Ld},i})}return R5e[t]!==1&&!Woe(t)&&typeof r=="number"&&r!==0?r+"px":r};function gS(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var i=r;if(i.anim===1)return Ld={name:i.name,styles:i.styles,next:Ld},i.name;var a=r;if(a.styles!==void 0){var s=a.next;if(s!==void 0)for(;s!==void 0;)Ld={name:s.name,styles:s.styles,next:Ld},s=s.next;var o=a.styles+";";return o}return M5e(e,t,r)}case"function":{if(e!==void 0){var l=Ld,c=r(e);return Ld=l,gS(e,t,c)}break}}var d=r;return d}function M5e(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=gS(e,t,r[i])+";";else for(var a in r){var s=r[a];if(typeof s!="object"){var o=s;gG(o)&&(n+=Mj(a)+":"+xG(a,o)+";")}else if(Array.isArray(s)&&typeof s[0]=="string"&&t==null)for(var l=0;l<s.length;l++)gG(s[l])&&(n+=Mj(a)+":"+xG(a,s[l])+";");else{var c=gS(e,t,s);switch(a){case"animation":case"animationName":{n+=Mj(a)+":"+c+";";break}default:n+=a+"{"+c+"}"}}}return n}var vG=/label:\s*([^\s;{]+)\s*(;|$)/g,Ld;function Voe(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,i="";Ld=void 0;var a=e[0];if(a==null||a.raw===void 0)n=!1,i+=gS(r,t,a);else{var s=a;i+=s[0]}for(var o=1;o<e.length;o++)if(i+=gS(r,t,e[o]),n){var l=a;i+=l[o]}vG.lastIndex=0;for(var c="",d;(d=vG.exec(i))!==null;)c+="-"+d[1];var f=P5e(i)+c;return{name:f,styles:i,next:Ld}}var F5e=function(t){return t()},L5e=Hv.useInsertionEffect?Hv.useInsertionEffect:!1,B5e=L5e||F5e,qoe=I.createContext(typeof HTMLElement<"u"?w5e({key:"css"}):null);qoe.Provider;var U5e=function(t){return I.forwardRef(function(r,n){var i=I.useContext(qoe);return t(r,i,n)})},$5e=I.createContext({}),L7={}.hasOwnProperty,u8="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",z5e=function(t,r){var n={};for(var i in r)L7.call(r,i)&&(n[i]=r[i]);return n[u8]=t,n},H5e=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return Hoe(r,n,i),B5e(function(){return O5e(r,n,i)}),null},W5e=U5e(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var i=e[u8],a=[n],s="";typeof e.className=="string"?s=I5e(t.registered,a,e.className):e.className!=null&&(s=e.className+" ");var o=Voe(a,void 0,I.useContext($5e));s+=t.key+"-"+o.name;var l={};for(var c in e)L7.call(e,c)&&c!=="css"&&c!==u8&&(l[c]=e[c]);return l.className=s,r&&(l.ref=r),I.createElement(I.Fragment,null,I.createElement(H5e,{cache:t,serialized:o,isStringTag:typeof i=="string"}),I.createElement(i,l))}),V5e=W5e,yr=function(t,r){var n=arguments;if(r==null||!L7.call(r,"css"))return I.createElement.apply(void 0,n);var i=n.length,a=new Array(i);a[0]=V5e,a[1]=z5e(t,r);for(var s=2;s<i;s++)a[s]=n[s];return I.createElement.apply(null,a)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(yr||(yr={}));function B7(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Voe(t)}function q5e(){var e=B7.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function G5e(e){if(Array.isArray(e))return e}function K5e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function X5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ph(e,t){return G5e(e)||K5e(e,t)||Ioe(e,t)||X5e()}function Y5e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function xf(e,t){if(e==null)return{};var r,n,i=Y5e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Q5e(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const J5e=Math.min,Z5e=Math.max,aT=Math.round,g_=Math.floor,sT=e=>({x:e,y:e});function eLe(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function H4(){return typeof window<"u"}function Goe(e){return Xoe(e)?(e.nodeName||"").toLowerCase():"#document"}function Dh(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Koe(e){var t;return(t=(Xoe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Xoe(e){return H4()?e instanceof Node||e instanceof Dh(e).Node:!1}function tLe(e){return H4()?e instanceof Element||e instanceof Dh(e).Element:!1}function U7(e){return H4()?e instanceof HTMLElement||e instanceof Dh(e).HTMLElement:!1}function yG(e){return!H4()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Dh(e).ShadowRoot}const rLe=new Set(["inline","contents"]);function Yoe(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=$7(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!rLe.has(i)}function nLe(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const iLe=new Set(["html","body","#document"]);function aLe(e){return iLe.has(Goe(e))}function $7(e){return Dh(e).getComputedStyle(e)}function sLe(e){if(Goe(e)==="html")return e;const t=e.assignedSlot||e.parentNode||yG(e)&&e.host||Koe(e);return yG(t)?t.host:t}function Qoe(e){const t=sLe(e);return aLe(t)?e.ownerDocument?e.ownerDocument.body:e.body:U7(t)&&Yoe(t)?t:Qoe(t)}function oT(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=Qoe(e),a=i===((n=e.ownerDocument)==null?void 0:n.body),s=Dh(i);if(a){const o=d8(s);return t.concat(s,s.visualViewport||[],Yoe(i)?i:[],o&&r?oT(o):[])}return t.concat(i,oT(i,[],r))}function d8(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function oLe(e){const t=$7(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=U7(e),a=i?e.offsetWidth:r,s=i?e.offsetHeight:n,o=aT(r)!==a||aT(n)!==s;return o&&(r=a,n=s),{width:r,height:n,$:o}}function z7(e){return tLe(e)?e:e.contextElement}function bG(e){const t=z7(e);if(!U7(t))return sT(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:a}=oLe(t);let s=(a?aT(r.width):r.width)/n,o=(a?aT(r.height):r.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const lLe=sT(0);function cLe(e){const t=Dh(e);return!nLe()||!t.visualViewport?lLe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function uLe(e,t,r){return!1}function wG(e,t,r,n){t===void 0&&(t=!1);const i=e.getBoundingClientRect(),a=z7(e);let s=sT(1);t&&(s=bG(e));const o=uLe()?cLe(a):sT(0);let l=(i.left+o.x)/s.x,c=(i.top+o.y)/s.y,d=i.width/s.x,f=i.height/s.y;if(a){const p=Dh(a),m=n;let x=p,v=d8(x);for(;v&&n&&m!==x;){const b=bG(v),w=v.getBoundingClientRect(),k=$7(v),E=w.left+(v.clientLeft+parseFloat(k.paddingLeft))*b.x,N=w.top+(v.clientTop+parseFloat(k.paddingTop))*b.y;l*=b.x,c*=b.y,d*=b.x,f*=b.y,l+=E,c+=N,x=Dh(v),v=d8(x)}}return eLe({width:d,height:f,x:l,y:c})}function Joe(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function dLe(e,t){let r=null,n;const i=Koe(e);function a(){var o;clearTimeout(n),(o=r)==null||o.disconnect(),r=null}function s(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),a();const c=e.getBoundingClientRect(),{left:d,top:f,width:p,height:m}=c;if(o||t(),!p||!m)return;const x=g_(f),v=g_(i.clientWidth-(d+p)),b=g_(i.clientHeight-(f+m)),w=g_(d),E={rootMargin:-x+"px "+-v+"px "+-b+"px "+-w+"px",threshold:Z5e(0,J5e(1,l))||1};let N=!0;function P(R){const O=R[0].intersectionRatio;if(O!==l){if(!N)return s();O?s(!1,O):n=setTimeout(()=>{s(!1,1e-7)},1e3)}O===1&&!Joe(c,e.getBoundingClientRect())&&s(),N=!1}try{r=new IntersectionObserver(P,{...E,root:i.ownerDocument})}catch{r=new IntersectionObserver(P,E)}r.observe(e)}return s(!0),a}function fLe(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=z7(e),d=i||a?[...c?oT(c):[],...oT(t)]:[];d.forEach(w=>{i&&w.addEventListener("scroll",r,{passive:!0}),a&&w.addEventListener("resize",r)});const f=c&&o?dLe(c,r):null;let p=-1,m=null;s&&(m=new ResizeObserver(w=>{let[k]=w;k&&k.target===c&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var E;(E=m)==null||E.observe(t)})),r()}),c&&!l&&m.observe(c),m.observe(t));let x,v=l?wG(e):null;l&&b();function b(){const w=wG(e);v&&!Joe(v,w)&&r(),v=w,x=requestAnimationFrame(b)}return r(),()=>{var w;d.forEach(k=>{i&&k.removeEventListener("scroll",r),a&&k.removeEventListener("resize",r)}),f==null||f(),(w=m)==null||w.disconnect(),m=null,l&&cancelAnimationFrame(x)}}var f8=I.useLayoutEffect,hLe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],lT=function(){};function pLe(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function mLe(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var a=[].concat(n);if(t&&e)for(var s in t)t.hasOwnProperty(s)&&t[s]&&a.push("".concat(pLe(e,s)));return a.filter(function(o){return o}).map(function(o){return String(o).trim()}).join(" ")}var cT=function(t){return CLe(t)?t.filter(Boolean):tx(t)==="object"&&t!==null?[t]:[]},Zoe=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var r=xf(t,hLe);return Er({},r)},na=function(t,r,n){var i=t.cx,a=t.getStyles,s=t.getClassNames,o=t.className;return{css:a(r,t),className:i(n??{},s(r,t),o)}};function W4(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function gLe(e){return W4(e)?window.innerHeight:e.clientHeight}function ele(e){return W4(e)?window.pageYOffset:e.scrollTop}function uT(e,t){if(W4(e)){window.scrollTo(0,t);return}e.scrollTop=t}function xLe(e){var t=getComputedStyle(e),r=t.position==="absolute",n=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var i=e;i=i.parentElement;)if(t=getComputedStyle(i),!(r&&t.position==="static")&&n.test(t.overflow+t.overflowY+t.overflowX))return i;return document.documentElement}function vLe(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function x_(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:lT,i=ele(e),a=t-i,s=10,o=0;function l(){o+=s;var c=vLe(o,i,a,r);uT(e,c),o<r?window.requestAnimationFrame(l):n(e)}l()}function SG(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),i=t.offsetHeight/3;n.bottom+i>r.bottom?uT(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+i,e.scrollHeight)):n.top-i<r.top&&uT(e,Math.max(t.offsetTop-i,0))}function yLe(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function EG(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function bLe(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var tle=!1,wLe={get passive(){return tle=!0}},v_=typeof window<"u"?window:{};v_.addEventListener&&v_.removeEventListener&&(v_.addEventListener("p",lT,wLe),v_.removeEventListener("p",lT,!1));var SLe=tle;function ELe(e){return e!=null}function CLe(e){return Array.isArray(e)}function zw(e,t,r){return e?t:r}var kLe=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var a=Object.entries(t).filter(function(s){var o=ph(s,1),l=o[0];return!n.includes(l)});return a.reduce(function(s,o){var l=ph(o,2),c=l[0],d=l[1];return s[c]=d,s},{})},_Le=["children","innerProps"],NLe=["children","innerProps"];function ALe(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,i=e.placement,a=e.shouldScroll,s=e.isFixedPosition,o=e.controlHeight,l=xLe(r),c={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return c;var d=l.getBoundingClientRect(),f=d.height,p=r.getBoundingClientRect(),m=p.bottom,x=p.height,v=p.top,b=r.offsetParent.getBoundingClientRect(),w=b.top,k=s?window.innerHeight:gLe(l),E=ele(l),N=parseInt(getComputedStyle(r).marginBottom,10),P=parseInt(getComputedStyle(r).marginTop,10),R=w-P,O=k-v,D=R+E,L=f-E-v,B=m-k+E+N,z=E+v-P,H=160;switch(i){case"auto":case"bottom":if(O>=x)return{placement:"bottom",maxHeight:t};if(L>=x&&!s)return a&&x_(l,B,H),{placement:"bottom",maxHeight:t};if(!s&&L>=n||s&&O>=n){a&&x_(l,B,H);var te=s?O-N:L-N;return{placement:"bottom",maxHeight:te}}if(i==="auto"||s){var Y=t,W=s?R:D;return W>=n&&(Y=Math.min(W-N-o,t)),{placement:"top",maxHeight:Y}}if(i==="bottom")return a&&uT(l,B),{placement:"bottom",maxHeight:t};break;case"top":if(R>=x)return{placement:"top",maxHeight:t};if(D>=x&&!s)return a&&x_(l,z,H),{placement:"top",maxHeight:t};if(!s&&D>=n||s&&R>=n){var Z=t;return(!s&&D>=n||s&&R>=n)&&(Z=s?R-P:D-P),a&&x_(l,z,H),{placement:"top",maxHeight:Z}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return c}function TLe(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var rle=function(t){return t==="auto"?"bottom":t},ILe=function(t,r){var n,i=t.placement,a=t.theme,s=a.borderRadius,o=a.spacing,l=a.colors;return Er((n={label:"menu"},qd(n,TLe(i),"100%"),qd(n,"position","absolute"),qd(n,"width","100%"),qd(n,"zIndex",1),n),r?{}:{backgroundColor:l.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:o.menuGutter,marginTop:o.menuGutter})},nle=I.createContext(null),OLe=function(t){var r=t.children,n=t.minMenuHeight,i=t.maxMenuHeight,a=t.menuPlacement,s=t.menuPosition,o=t.menuShouldScrollIntoView,l=t.theme,c=I.useContext(nle)||{},d=c.setPortalPlacement,f=I.useRef(null),p=I.useState(i),m=ph(p,2),x=m[0],v=m[1],b=I.useState(null),w=ph(b,2),k=w[0],E=w[1],N=l.spacing.controlHeight;return f8(function(){var P=f.current;if(P){var R=s==="fixed",O=o&&!R,D=ALe({maxHeight:i,menuEl:P,minHeight:n,placement:a,shouldScroll:O,isFixedPosition:R,controlHeight:N});v(D.maxHeight),E(D.placement),d==null||d(D.placement)}},[i,a,s,o,n,d,N]),r({ref:f,placerProps:Er(Er({},t),{},{placement:k||rle(a),maxHeight:x})})},PLe=function(t){var r=t.children,n=t.innerRef,i=t.innerProps;return yr("div",Ar({},na(t,"menu",{menu:!0}),{ref:n},i),r)},RLe=PLe,jLe=function(t,r){var n=t.maxHeight,i=t.theme.spacing.baseUnit;return Er({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},r?{}:{paddingBottom:i,paddingTop:i})},DLe=function(t){var r=t.children,n=t.innerProps,i=t.innerRef,a=t.isMulti;return yr("div",Ar({},na(t,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:i},n),r)},ile=function(t,r){var n=t.theme,i=n.spacing.baseUnit,a=n.colors;return Er({textAlign:"center"},r?{}:{color:a.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},MLe=ile,FLe=ile,LLe=function(t){var r=t.children,n=r===void 0?"No options":r,i=t.innerProps,a=xf(t,_Le);return yr("div",Ar({},na(Er(Er({},a),{},{children:n,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),n)},BLe=function(t){var r=t.children,n=r===void 0?"Loading...":r,i=t.innerProps,a=xf(t,NLe);return yr("div",Ar({},na(Er(Er({},a),{},{children:n,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),n)},ULe=function(t){var r=t.rect,n=t.offset,i=t.position;return{left:r.left,position:i,top:n,width:r.width,zIndex:1}},$Le=function(t){var r=t.appendTo,n=t.children,i=t.controlElement,a=t.innerProps,s=t.menuPlacement,o=t.menuPosition,l=I.useRef(null),c=I.useRef(null),d=I.useState(rle(s)),f=ph(d,2),p=f[0],m=f[1],x=I.useMemo(function(){return{setPortalPlacement:m}},[]),v=I.useState(null),b=ph(v,2),w=b[0],k=b[1],E=I.useCallback(function(){if(i){var O=yLe(i),D=o==="fixed"?0:window.pageYOffset,L=O[p]+D;(L!==(w==null?void 0:w.offset)||O.left!==(w==null?void 0:w.rect.left)||O.width!==(w==null?void 0:w.rect.width))&&k({offset:L,rect:O})}},[i,o,p,w==null?void 0:w.offset,w==null?void 0:w.rect.left,w==null?void 0:w.rect.width]);f8(function(){E()},[E]);var N=I.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),i&&l.current&&(c.current=fLe(i,l.current,E,{elementResize:"ResizeObserver"in window}))},[i,E]);f8(function(){N()},[N]);var P=I.useCallback(function(O){l.current=O,N()},[N]);if(!r&&o!=="fixed"||!w)return null;var R=yr("div",Ar({ref:P},na(Er(Er({},t),{},{offset:w.offset,position:o,rect:w.rect}),"menuPortal",{"menu-portal":!0}),a),n);return yr(nle.Provider,{value:x},r?Il.createPortal(R,r):R)},zLe=function(t){var r=t.isDisabled,n=t.isRtl;return{label:"container",direction:n?"rtl":void 0,pointerEvents:r?"none":void 0,position:"relative"}},HLe=function(t){var r=t.children,n=t.innerProps,i=t.isDisabled,a=t.isRtl;return yr("div",Ar({},na(t,"container",{"--is-disabled":i,"--is-rtl":a}),n),r)},WLe=function(t,r){var n=t.theme.spacing,i=t.isMulti,a=t.hasValue,s=t.selectProps.controlShouldRenderValue;return Er({alignItems:"center",display:i&&a&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},r?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(n.baseUnit*2,"px")})},VLe=function(t){var r=t.children,n=t.innerProps,i=t.isMulti,a=t.hasValue;return yr("div",Ar({},na(t,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":a}),n),r)},qLe=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},GLe=function(t){var r=t.children,n=t.innerProps;return yr("div",Ar({},na(t,"indicatorsContainer",{indicators:!0}),n),r)},CG,KLe=["size"],XLe=["innerProps","isRtl","size"],YLe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},ale=function(t){var r=t.size,n=xf(t,KLe);return yr("svg",Ar({height:r,width:r,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:YLe},n))},H7=function(t){return yr(ale,Ar({size:20},t),yr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},sle=function(t){return yr(ale,Ar({size:20},t),yr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},ole=function(t,r){var n=t.isFocused,i=t.theme,a=i.spacing.baseUnit,s=i.colors;return Er({label:"indicatorContainer",display:"flex",transition:"color 150ms"},r?{}:{color:n?s.neutral60:s.neutral20,padding:a*2,":hover":{color:n?s.neutral80:s.neutral40}})},QLe=ole,JLe=function(t){var r=t.children,n=t.innerProps;return yr("div",Ar({},na(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),r||yr(sle,null))},ZLe=ole,e7e=function(t){var r=t.children,n=t.innerProps;return yr("div",Ar({},na(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),r||yr(H7,null))},t7e=function(t,r){var n=t.isDisabled,i=t.theme,a=i.spacing.baseUnit,s=i.colors;return Er({label:"indicatorSeparator",alignSelf:"stretch",width:1},r?{}:{backgroundColor:n?s.neutral10:s.neutral20,marginBottom:a*2,marginTop:a*2})},r7e=function(t){var r=t.innerProps;return yr("span",Ar({},r,na(t,"indicatorSeparator",{"indicator-separator":!0})))},n7e=q5e(CG||(CG=Q5e([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),i7e=function(t,r){var n=t.isFocused,i=t.size,a=t.theme,s=a.colors,o=a.spacing.baseUnit;return Er({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},r?{}:{color:n?s.neutral60:s.neutral20,padding:o*2})},Fj=function(t){var r=t.delay,n=t.offset;return yr("span",{css:B7({animation:"".concat(n7e," 1s ease-in-out ").concat(r,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},a7e=function(t){var r=t.innerProps,n=t.isRtl,i=t.size,a=i===void 0?4:i,s=xf(t,XLe);return yr("div",Ar({},na(Er(Er({},s),{},{innerProps:r,isRtl:n,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),r),yr(Fj,{delay:0,offset:n}),yr(Fj,{delay:160,offset:!0}),yr(Fj,{delay:320,offset:!n}))},s7e=function(t,r){var n=t.isDisabled,i=t.isFocused,a=t.theme,s=a.colors,o=a.borderRadius,l=a.spacing;return Er({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},r?{}:{backgroundColor:n?s.neutral5:s.neutral0,borderColor:n?s.neutral10:i?s.primary:s.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:i?s.primary:s.neutral30}})},o7e=function(t){var r=t.children,n=t.isDisabled,i=t.isFocused,a=t.innerRef,s=t.innerProps,o=t.menuIsOpen;return yr("div",Ar({ref:a},na(t,"control",{control:!0,"control--is-disabled":n,"control--is-focused":i,"control--menu-is-open":o}),s,{"aria-disabled":n||void 0}),r)},l7e=o7e,c7e=["data"],u7e=function(t,r){var n=t.theme.spacing;return r?{}:{paddingBottom:n.baseUnit*2,paddingTop:n.baseUnit*2}},d7e=function(t){var r=t.children,n=t.cx,i=t.getStyles,a=t.getClassNames,s=t.Heading,o=t.headingProps,l=t.innerProps,c=t.label,d=t.theme,f=t.selectProps;return yr("div",Ar({},na(t,"group",{group:!0}),l),yr(s,Ar({},o,{selectProps:f,theme:d,getStyles:i,getClassNames:a,cx:n}),c),yr("div",null,r))},f7e=function(t,r){var n=t.theme,i=n.colors,a=n.spacing;return Er({label:"group",cursor:"default",display:"block"},r?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:a.baseUnit*3,paddingRight:a.baseUnit*3,textTransform:"uppercase"})},h7e=function(t){var r=Zoe(t);r.data;var n=xf(r,c7e);return yr("div",Ar({},na(t,"groupHeading",{"group-heading":!0}),n))},p7e=d7e,m7e=["innerRef","isDisabled","isHidden","inputClassName"],g7e=function(t,r){var n=t.isDisabled,i=t.value,a=t.theme,s=a.spacing,o=a.colors;return Er(Er({visibility:n?"hidden":"visible",transform:i?"translateZ(0)":""},x7e),r?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:o.neutral80})},lle={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},x7e={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Er({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},lle)},v7e=function(t){return Er({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},lle)},y7e=function(t){var r=t.cx,n=t.value,i=Zoe(t),a=i.innerRef,s=i.isDisabled,o=i.isHidden,l=i.inputClassName,c=xf(i,m7e);return yr("div",Ar({},na(t,"input",{"input-container":!0}),{"data-value":n||""}),yr("input",Ar({className:r({input:!0},l),ref:a,style:v7e(o),disabled:s},c)))},b7e=y7e,w7e=function(t,r){var n=t.theme,i=n.spacing,a=n.borderRadius,s=n.colors;return Er({label:"multiValue",display:"flex",minWidth:0},r?{}:{backgroundColor:s.neutral10,borderRadius:a/2,margin:i.baseUnit/2})},S7e=function(t,r){var n=t.theme,i=n.borderRadius,a=n.colors,s=t.cropWithEllipsis;return Er({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},r?{}:{borderRadius:i/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},E7e=function(t,r){var n=t.theme,i=n.spacing,a=n.borderRadius,s=n.colors,o=t.isFocused;return Er({alignItems:"center",display:"flex"},r?{}:{borderRadius:a/2,backgroundColor:o?s.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},cle=function(t){var r=t.children,n=t.innerProps;return yr("div",n,r)},C7e=cle,k7e=cle;function _7e(e){var t=e.children,r=e.innerProps;return yr("div",Ar({role:"button"},r),t||yr(H7,{size:14}))}var N7e=function(t){var r=t.children,n=t.components,i=t.data,a=t.innerProps,s=t.isDisabled,o=t.removeProps,l=t.selectProps,c=n.Container,d=n.Label,f=n.Remove;return yr(c,{data:i,innerProps:Er(Er({},na(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),a),selectProps:l},yr(d,{data:i,innerProps:Er({},na(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},r),yr(f,{data:i,innerProps:Er(Er({},na(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(r||"option")},o),selectProps:l}))},A7e=N7e,T7e=function(t,r){var n=t.isDisabled,i=t.isFocused,a=t.isSelected,s=t.theme,o=s.spacing,l=s.colors;return Er({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},r?{}:{backgroundColor:a?l.primary:i?l.primary25:"transparent",color:n?l.neutral20:a?l.neutral0:"inherit",padding:"".concat(o.baseUnit*2,"px ").concat(o.baseUnit*3,"px"),":active":{backgroundColor:n?void 0:a?l.primary:l.primary50}})},I7e=function(t){var r=t.children,n=t.isDisabled,i=t.isFocused,a=t.isSelected,s=t.innerRef,o=t.innerProps;return yr("div",Ar({},na(t,"option",{option:!0,"option--is-disabled":n,"option--is-focused":i,"option--is-selected":a}),{ref:s,"aria-disabled":n},o),r)},O7e=I7e,P7e=function(t,r){var n=t.theme,i=n.spacing,a=n.colors;return Er({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},r?{}:{color:a.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},R7e=function(t){var r=t.children,n=t.innerProps;return yr("div",Ar({},na(t,"placeholder",{placeholder:!0}),n),r)},j7e=R7e,D7e=function(t,r){var n=t.isDisabled,i=t.theme,a=i.spacing,s=i.colors;return Er({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},r?{}:{color:n?s.neutral40:s.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},M7e=function(t){var r=t.children,n=t.isDisabled,i=t.innerProps;return yr("div",Ar({},na(t,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),i),r)},F7e=M7e,L7e={ClearIndicator:e7e,Control:l7e,DropdownIndicator:JLe,DownChevron:sle,CrossIcon:H7,Group:p7e,GroupHeading:h7e,IndicatorsContainer:GLe,IndicatorSeparator:r7e,Input:b7e,LoadingIndicator:a7e,Menu:RLe,MenuList:DLe,MenuPortal:$Le,LoadingMessage:BLe,NoOptionsMessage:LLe,MultiValue:A7e,MultiValueContainer:C7e,MultiValueLabel:k7e,MultiValueRemove:_7e,Option:O7e,Placeholder:j7e,SelectContainer:HLe,SingleValue:F7e,ValueContainer:VLe},B7e=function(t){return Er(Er({},L7e),t.components)},kG=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function U7e(e,t){return!!(e===t||kG(e)&&kG(t))}function $7e(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!U7e(e[r],t[r]))return!1;return!0}function z7e(e,t){t===void 0&&(t=$7e);var r=null;function n(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(r&&r.lastThis===this&&t(i,r.lastArgs))return r.lastResult;var s=e.apply(this,i);return r={lastResult:s,lastArgs:i,lastThis:this},s}return n.clear=function(){r=null},n}var H7e={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},W7e=function(t){return yr("span",Ar({css:H7e},t))},_G=W7e,V7e={guidance:function(t){var r=t.isSearchable,n=t.isMulti,i=t.tabSelectsValue,a=t.context,s=t.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(t["aria-label"]||"Select"," is focused ").concat(r?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var r=t.action,n=t.label,i=n===void 0?"":n,a=t.labels,s=t.isDisabled;switch(r){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return s?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(t){var r=t.context,n=t.focused,i=t.options,a=t.label,s=a===void 0?"":a,o=t.selectValue,l=t.isDisabled,c=t.isSelected,d=t.isAppleDevice,f=function(v,b){return v&&v.length?"".concat(v.indexOf(b)+1," of ").concat(v.length):""};if(r==="value"&&o)return"value ".concat(s," focused, ").concat(f(o,n),".");if(r==="menu"&&d){var p=l?" disabled":"",m="".concat(c?" selected":"").concat(p);return"".concat(s).concat(m,", ").concat(f(i,n),".")}return""},onFilter:function(t){var r=t.inputValue,n=t.resultsMessage;return"".concat(n).concat(r?" for search term "+r:"",".")}},q7e=function(t){var r=t.ariaSelection,n=t.focusedOption,i=t.focusedValue,a=t.focusableOptions,s=t.isFocused,o=t.selectValue,l=t.selectProps,c=t.id,d=t.isAppleDevice,f=l.ariaLiveMessages,p=l.getOptionLabel,m=l.inputValue,x=l.isMulti,v=l.isOptionDisabled,b=l.isSearchable,w=l.menuIsOpen,k=l.options,E=l.screenReaderStatus,N=l.tabSelectsValue,P=l.isLoading,R=l["aria-label"],O=l["aria-live"],D=I.useMemo(function(){return Er(Er({},V7e),f||{})},[f]),L=I.useMemo(function(){var W="";if(r&&D.onChange){var Z=r.option,re=r.options,X=r.removedValue,Q=r.removedValues,fe=r.value,ye=function(ne){return Array.isArray(ne)?null:ne},J=X||Z||ye(fe),ce=J?p(J):"",V=re||Q||void 0,G=V?V.map(p):[],ie=Er({isDisabled:J&&v(J,o),label:ce,labels:G},r);W=D.onChange(ie)}return W},[r,D,v,o,p]),B=I.useMemo(function(){var W="",Z=n||i,re=!!(n&&o&&o.includes(n));if(Z&&D.onFocus){var X={focused:Z,label:p(Z),isDisabled:v(Z,o),isSelected:re,options:a,context:Z===n?"menu":"value",selectValue:o,isAppleDevice:d};W=D.onFocus(X)}return W},[n,i,p,v,D,a,o,d]),z=I.useMemo(function(){var W="";if(w&&k.length&&!P&&D.onFilter){var Z=E({count:a.length});W=D.onFilter({inputValue:m,resultsMessage:Z})}return W},[a,m,w,D,k,E,P]),H=(r==null?void 0:r.action)==="initial-input-focus",te=I.useMemo(function(){var W="";if(D.guidance){var Z=i?"value":w?"menu":"input";W=D.guidance({"aria-label":R,context:Z,isDisabled:n&&v(n,o),isMulti:x,isSearchable:b,tabSelectsValue:N,isInitialFocus:H})}return W},[R,n,i,x,v,b,w,D,o,N,H]),Y=yr(I.Fragment,null,yr("span",{id:"aria-selection"},L),yr("span",{id:"aria-focused"},B),yr("span",{id:"aria-results"},z),yr("span",{id:"aria-guidance"},te));return yr(I.Fragment,null,yr(_G,{id:c},H&&Y),yr(_G,{"aria-live":O,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!H&&Y))},G7e=q7e,h8=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],K7e=new RegExp("["+h8.map(function(e){return e.letters}).join("")+"]","g"),ule={};for(var Lj=0;Lj<h8.length;Lj++)for(var Bj=h8[Lj],Uj=0;Uj<Bj.letters.length;Uj++)ule[Bj.letters[Uj]]=Bj.base;var dle=function(t){return t.replace(K7e,function(r){return ule[r]})},X7e=z7e(dle),NG=function(t){return t.replace(/^\s+|\s+$/g,"")},Y7e=function(t){return"".concat(t.label," ").concat(t.value)},Q7e=function(t){return function(r,n){if(r.data.__isNew__)return!0;var i=Er({ignoreCase:!0,ignoreAccents:!0,stringify:Y7e,trim:!0,matchFrom:"any"},t),a=i.ignoreCase,s=i.ignoreAccents,o=i.stringify,l=i.trim,c=i.matchFrom,d=l?NG(n):n,f=l?NG(o(r)):o(r);return a&&(d=d.toLowerCase(),f=f.toLowerCase()),s&&(d=X7e(d),f=dle(f)),c==="start"?f.substr(0,d.length)===d:f.indexOf(d)>-1}},J7e=["innerRef"];function Z7e(e){var t=e.innerRef,r=xf(e,J7e),n=kLe(r,"onExited","in","enter","exit","appear");return yr("input",Ar({ref:t},n,{css:B7({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var e9e=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()};function t9e(e){var t=e.isEnabled,r=e.onBottomArrive,n=e.onBottomLeave,i=e.onTopArrive,a=e.onTopLeave,s=I.useRef(!1),o=I.useRef(!1),l=I.useRef(0),c=I.useRef(null),d=I.useCallback(function(b,w){if(c.current!==null){var k=c.current,E=k.scrollTop,N=k.scrollHeight,P=k.clientHeight,R=c.current,O=w>0,D=N-P-E,L=!1;D>w&&s.current&&(n&&n(b),s.current=!1),O&&o.current&&(a&&a(b),o.current=!1),O&&w>D?(r&&!s.current&&r(b),R.scrollTop=N,L=!0,s.current=!0):!O&&-w>E&&(i&&!o.current&&i(b),R.scrollTop=0,L=!0,o.current=!0),L&&e9e(b)}},[r,n,i,a]),f=I.useCallback(function(b){d(b,b.deltaY)},[d]),p=I.useCallback(function(b){l.current=b.changedTouches[0].clientY},[]),m=I.useCallback(function(b){var w=l.current-b.changedTouches[0].clientY;d(b,w)},[d]),x=I.useCallback(function(b){if(b){var w=SLe?{passive:!1}:!1;b.addEventListener("wheel",f,w),b.addEventListener("touchstart",p,w),b.addEventListener("touchmove",m,w)}},[m,p,f]),v=I.useCallback(function(b){b&&(b.removeEventListener("wheel",f,!1),b.removeEventListener("touchstart",p,!1),b.removeEventListener("touchmove",m,!1))},[m,p,f]);return I.useEffect(function(){if(t){var b=c.current;return x(b),function(){v(b)}}},[t,x,v]),function(b){c.current=b}}var AG=["boxSizing","height","overflow","paddingRight","position"],TG={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function IG(e){e.cancelable&&e.preventDefault()}function OG(e){e.stopPropagation()}function PG(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function RG(){return"ontouchstart"in window||navigator.maxTouchPoints}var jG=!!(typeof window<"u"&&window.document&&window.document.createElement),xw=0,S1={capture:!1,passive:!1};function r9e(e){var t=e.isEnabled,r=e.accountForScrollbars,n=r===void 0?!0:r,i=I.useRef({}),a=I.useRef(null),s=I.useCallback(function(l){if(jG){var c=document.body,d=c&&c.style;if(n&&AG.forEach(function(x){var v=d&&d[x];i.current[x]=v}),n&&xw<1){var f=parseInt(i.current.paddingRight,10)||0,p=document.body?document.body.clientWidth:0,m=window.innerWidth-p+f||0;Object.keys(TG).forEach(function(x){var v=TG[x];d&&(d[x]=v)}),d&&(d.paddingRight="".concat(m,"px"))}c&&RG()&&(c.addEventListener("touchmove",IG,S1),l&&(l.addEventListener("touchstart",PG,S1),l.addEventListener("touchmove",OG,S1))),xw+=1}},[n]),o=I.useCallback(function(l){if(jG){var c=document.body,d=c&&c.style;xw=Math.max(xw-1,0),n&&xw<1&&AG.forEach(function(f){var p=i.current[f];d&&(d[f]=p)}),c&&RG()&&(c.removeEventListener("touchmove",IG,S1),l&&(l.removeEventListener("touchstart",PG,S1),l.removeEventListener("touchmove",OG,S1)))}},[n]);return I.useEffect(function(){if(t){var l=a.current;return s(l),function(){o(l)}}},[t,s,o]),function(l){a.current=l}}var n9e=function(t){var r=t.target;return r.ownerDocument.activeElement&&r.ownerDocument.activeElement.blur()},i9e={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function a9e(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,i=n===void 0?!0:n,a=e.onBottomArrive,s=e.onBottomLeave,o=e.onTopArrive,l=e.onTopLeave,c=t9e({isEnabled:i,onBottomArrive:a,onBottomLeave:s,onTopArrive:o,onTopLeave:l}),d=r9e({isEnabled:r}),f=function(m){c(m),d(m)};return yr(I.Fragment,null,r&&yr("div",{onClick:n9e,css:i9e}),t(f))}var s9e={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},o9e=function(t){var r=t.name,n=t.onFocus;return yr("input",{required:!0,name:r,tabIndex:-1,"aria-hidden":"true",onFocus:n,css:s9e,value:"",onChange:function(){}})},l9e=o9e;function W7(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function c9e(){return W7(/^iPhone/i)}function fle(){return W7(/^Mac/i)}function u9e(){return W7(/^iPad/i)||fle()&&navigator.maxTouchPoints>1}function d9e(){return c9e()||u9e()}function f9e(){return fle()||d9e()}var h9e=function(t){return t.label},hle=function(t){return t.label},ple=function(t){return t.value},p9e=function(t){return!!t.isDisabled},m9e={clearIndicator:ZLe,container:zLe,control:s7e,dropdownIndicator:QLe,group:u7e,groupHeading:f7e,indicatorsContainer:qLe,indicatorSeparator:t7e,input:g7e,loadingIndicator:i7e,loadingMessage:FLe,menu:ILe,menuList:jLe,menuPortal:ULe,multiValue:w7e,multiValueLabel:S7e,multiValueRemove:E7e,noOptionsMessage:MLe,option:T7e,placeholder:P7e,singleValue:D7e,valueContainer:WLe},g9e={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},x9e=4,mle=4,v9e=38,y9e=mle*2,b9e={baseUnit:mle,controlHeight:v9e,menuGutter:y9e},$j={borderRadius:x9e,colors:g9e,spacing:b9e},w9e={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:EG(),captureMenuScroll:!EG(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:Q7e(),formatGroupLabel:h9e,getOptionLabel:hle,getOptionValue:ple,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:p9e,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!bLe(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var r=t.count;return"".concat(r," result").concat(r!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function DG(e,t,r,n){var i=vle(e,t,r),a=yle(e,t,r),s=xle(e,t),o=dT(e,t);return{type:"option",data:t,isDisabled:i,isSelected:a,label:s,value:o,index:n}}function zN(e,t){return e.options.map(function(r,n){if("options"in r){var i=r.options.map(function(s,o){return DG(e,s,t,o)}).filter(function(s){return FG(e,s)});return i.length>0?{type:"group",data:r,options:i,index:n}:void 0}var a=DG(e,r,t,n);return FG(e,a)?a:void 0}).filter(ELe)}function gle(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,Lo(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function MG(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,Lo(n.options.map(function(i){return{data:i.data,id:"".concat(t,"-").concat(n.index,"-").concat(i.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function S9e(e,t){return gle(zN(e,t))}function FG(e,t){var r=e.inputValue,n=r===void 0?"":r,i=t.data,a=t.isSelected,s=t.label,o=t.value;return(!wle(e)||!a)&&ble(e,{label:s,value:o,data:i},n)}function E9e(e,t){var r=e.focusedValue,n=e.selectValue,i=n.indexOf(r);if(i>-1){var a=t.indexOf(r);if(a>-1)return r;if(i<t.length)return t[i]}return null}function C9e(e,t){var r=e.focusedOption;return r&&t.indexOf(r)>-1?r:t[0]}var zj=function(t,r){var n,i=(n=t.find(function(a){return a.data===r}))===null||n===void 0?void 0:n.id;return i||null},xle=function(t,r){return t.getOptionLabel(r)},dT=function(t,r){return t.getOptionValue(r)};function vle(e,t,r){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,r):!1}function yle(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=dT(e,t);return r.some(function(i){return dT(e,i)===n})}function ble(e,t,r){return e.filterOption?e.filterOption(t,r):!0}var wle=function(t){var r=t.hideSelectedOptions,n=t.isMulti;return r===void 0?n:r},k9e=1,V7=function(e){BFe(r,e);var t=zFe(r);function r(n){var i;if(FFe(this,r),i=t.call(this,n),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.controlRef=null,i.getControlRef=function(l){i.controlRef=l},i.focusedOptionRef=null,i.getFocusedOptionRef=function(l){i.focusedOptionRef=l},i.menuListRef=null,i.getMenuListRef=function(l){i.menuListRef=l},i.inputRef=null,i.getInputRef=function(l){i.inputRef=l},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(l,c){var d=i.props,f=d.onChange,p=d.name;c.name=p,i.ariaOnChange(l,c),f(l,c)},i.setValue=function(l,c,d){var f=i.props,p=f.closeMenuOnSelect,m=f.isMulti,x=f.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:x}),p&&(i.setState({inputIsHiddenAfterUpdate:!m}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(l,{action:c,option:d})},i.selectOption=function(l){var c=i.props,d=c.blurInputOnSelect,f=c.isMulti,p=c.name,m=i.state.selectValue,x=f&&i.isOptionSelected(l,m),v=i.isOptionDisabled(l,m);if(x){var b=i.getOptionValue(l);i.setValue(m.filter(function(w){return i.getOptionValue(w)!==b}),"deselect-option",l)}else if(!v)f?i.setValue([].concat(Lo(m),[l]),"select-option",l):i.setValue(l,"select-option");else{i.ariaOnChange(l,{action:"select-option",option:l,name:p});return}d&&i.blurInput()},i.removeValue=function(l){var c=i.props.isMulti,d=i.state.selectValue,f=i.getOptionValue(l),p=d.filter(function(x){return i.getOptionValue(x)!==f}),m=zw(c,p,p[0]||null);i.onChange(m,{action:"remove-value",removedValue:l}),i.focusInput()},i.clearValue=function(){var l=i.state.selectValue;i.onChange(zw(i.props.isMulti,[],null),{action:"clear",removedValues:l})},i.popValue=function(){var l=i.props.isMulti,c=i.state.selectValue,d=c[c.length-1],f=c.slice(0,c.length-1),p=zw(l,f,f[0]||null);d&&i.onChange(p,{action:"pop-value",removedValue:d})},i.getFocusedOptionId=function(l){return zj(i.state.focusableOptionsWithIds,l)},i.getFocusableOptionsWithIds=function(){return MG(zN(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];return mLe.apply(void 0,[i.props.classNamePrefix].concat(c))},i.getOptionLabel=function(l){return xle(i.props,l)},i.getOptionValue=function(l){return dT(i.props,l)},i.getStyles=function(l,c){var d=i.props.unstyled,f=m9e[l](c,d);f.boxSizing="border-box";var p=i.props.styles[l];return p?p(f,c):f},i.getClassNames=function(l,c){var d,f;return(d=(f=i.props.classNames)[l])===null||d===void 0?void 0:d.call(f,c)},i.getElementId=function(l){return"".concat(i.state.instancePrefix,"-").concat(l)},i.getComponents=function(){return B7e(i.props)},i.buildCategorizedOptions=function(){return zN(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return gle(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(l,c){i.setState({ariaSelection:Er({value:l},c)})},i.onMenuMouseDown=function(l){l.button===0&&(l.stopPropagation(),l.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(l){i.blockOptionHover=!1},i.onControlMouseDown=function(l){if(!l.defaultPrevented){var c=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&i.onMenuClose():c&&i.openMenu("first"):(c&&(i.openAfterFocus=!0),i.focusInput()),l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&l.preventDefault()}},i.onDropdownIndicatorMouseDown=function(l){if(!(l&&l.type==="mousedown"&&l.button!==0)&&!i.props.isDisabled){var c=i.props,d=c.isMulti,f=c.menuIsOpen;i.focusInput(),f?(i.setState({inputIsHiddenAfterUpdate:!d}),i.onMenuClose()):i.openMenu("first"),l.preventDefault()}},i.onClearIndicatorMouseDown=function(l){l&&l.type==="mousedown"&&l.button!==0||(i.clearValue(),l.preventDefault(),i.openAfterFocus=!1,l.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(l){typeof i.props.closeMenuOnScroll=="boolean"?l.target instanceof HTMLElement&&W4(l.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(l)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(l){var c=l.touches,d=c&&c.item(0);d&&(i.initialTouchX=d.clientX,i.initialTouchY=d.clientY,i.userIsDragging=!1)},i.onTouchMove=function(l){var c=l.touches,d=c&&c.item(0);if(d){var f=Math.abs(d.clientX-i.initialTouchX),p=Math.abs(d.clientY-i.initialTouchY),m=5;i.userIsDragging=f>m||p>m}},i.onTouchEnd=function(l){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(l.target)&&i.menuListRef&&!i.menuListRef.contains(l.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(l){i.userIsDragging||i.onControlMouseDown(l)},i.onClearIndicatorTouchEnd=function(l){i.userIsDragging||i.onClearIndicatorMouseDown(l)},i.onDropdownIndicatorTouchEnd=function(l){i.userIsDragging||i.onDropdownIndicatorMouseDown(l)},i.handleInputChange=function(l){var c=i.props.inputValue,d=l.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(d,{action:"input-change",prevInputValue:c}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(l){i.props.onFocus&&i.props.onFocus(l),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(l){var c=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(l),i.onInputChange("",{action:"input-blur",prevInputValue:c}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(l){if(!(i.blockOptionHover||i.state.focusedOption===l)){var c=i.getFocusableOptions(),d=c.indexOf(l);i.setState({focusedOption:l,focusedOptionId:d>-1?i.getFocusedOptionId(l):null})}},i.shouldHideSelectedOptions=function(){return wle(i.props)},i.onValueInputFocus=function(l){l.preventDefault(),l.stopPropagation(),i.focus()},i.onKeyDown=function(l){var c=i.props,d=c.isMulti,f=c.backspaceRemovesValue,p=c.escapeClearsValue,m=c.inputValue,x=c.isClearable,v=c.isDisabled,b=c.menuIsOpen,w=c.onKeyDown,k=c.tabSelectsValue,E=c.openMenuOnFocus,N=i.state,P=N.focusedOption,R=N.focusedValue,O=N.selectValue;if(!v&&!(typeof w=="function"&&(w(l),l.defaultPrevented))){switch(i.blockOptionHover=!0,l.key){case"ArrowLeft":if(!d||m)return;i.focusValue("previous");break;case"ArrowRight":if(!d||m)return;i.focusValue("next");break;case"Delete":case"Backspace":if(m)return;if(R)i.removeValue(R);else{if(!f)return;d?i.popValue():x&&i.clearValue()}break;case"Tab":if(i.isComposing||l.shiftKey||!b||!k||!P||E&&i.isOptionSelected(P,O))return;i.selectOption(P);break;case"Enter":if(l.keyCode===229)break;if(b){if(!P||i.isComposing)return;i.selectOption(P);break}return;case"Escape":b?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:m}),i.onMenuClose()):x&&p&&i.clearValue();break;case" ":if(m)return;if(!b){i.openMenu("first");break}if(!P)return;i.selectOption(P);break;case"ArrowUp":b?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":b?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!b)return;i.focusOption("pageup");break;case"PageDown":if(!b)return;i.focusOption("pagedown");break;case"Home":if(!b)return;i.focusOption("first");break;case"End":if(!b)return;i.focusOption("last");break;default:return}l.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++k9e),i.state.selectValue=cT(n.value),n.menuIsOpen&&i.state.selectValue.length){var a=i.getFocusableOptionsWithIds(),s=i.buildFocusableOptions(),o=s.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=a,i.state.focusedOption=s[o],i.state.focusedOptionId=zj(a,s[o])}return i}return LFe(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&SG(this.menuListRef,this.focusedOptionRef),f9e()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isDisabled,o=a.menuIsOpen,l=this.state.isFocused;(l&&!s&&i.isDisabled||l&&o&&!i.menuIsOpen)&&this.focusInput(),l&&s&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!l&&!s&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(SG(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,a){this.props.onInputChange(i,a)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var a=this,s=this.state,o=s.selectValue,l=s.isFocused,c=this.buildFocusableOptions(),d=i==="first"?0:c.length-1;if(!this.props.isMulti){var f=c.indexOf(o[0]);f>-1&&(d=f)}this.scrollToFocusedOptionOnUpdate=!(l&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:c[d],focusedOptionId:this.getFocusedOptionId(c[d])},function(){return a.onMenuOpen()})}},{key:"focusValue",value:function(i){var a=this.state,s=a.selectValue,o=a.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var l=s.indexOf(o);o||(l=-1);var c=s.length-1,d=-1;if(s.length){switch(i){case"previous":l===0?d=0:l===-1?d=c:d=l-1;break;case"next":l>-1&&l<c&&(d=l+1);break}this.setState({inputIsHidden:d!==-1,focusedValue:s[d]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",a=this.props.pageSize,s=this.state.focusedOption,o=this.getFocusableOptions();if(o.length){var l=0,c=o.indexOf(s);s||(c=-1),i==="up"?l=c>0?c-1:o.length-1:i==="down"?l=(c+1)%o.length:i==="pageup"?(l=c-a,l<0&&(l=0)):i==="pagedown"?(l=c+a,l>o.length-1&&(l=o.length-1)):i==="last"&&(l=o.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:o[l],focusedValue:null,focusedOptionId:this.getFocusedOptionId(o[l])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme($j):Er(Er({},$j),this.props.theme):$j}},{key:"getCommonProps",value:function(){var i=this.clearValue,a=this.cx,s=this.getStyles,o=this.getClassNames,l=this.getValue,c=this.selectOption,d=this.setValue,f=this.props,p=f.isMulti,m=f.isRtl,x=f.options,v=this.hasValue();return{clearValue:i,cx:a,getStyles:s,getClassNames:o,getValue:l,hasValue:v,isMulti:p,isRtl:m,options:x,selectOption:c,selectProps:f,setValue:d,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,a=i.isClearable,s=i.isMulti;return a===void 0?s:a}},{key:"isOptionDisabled",value:function(i,a){return vle(this.props,i,a)}},{key:"isOptionSelected",value:function(i,a){return yle(this.props,i,a)}},{key:"filterOption",value:function(i,a){return ble(this.props,i,a)}},{key:"formatOptionLabel",value:function(i,a){if(typeof this.props.formatOptionLabel=="function"){var s=this.props.inputValue,o=this.state.selectValue;return this.props.formatOptionLabel(i,{context:a,inputValue:s,selectValue:o})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,a=i.isDisabled,s=i.isSearchable,o=i.inputId,l=i.inputValue,c=i.tabIndex,d=i.form,f=i.menuIsOpen,p=i.required,m=this.getComponents(),x=m.Input,v=this.state,b=v.inputIsHidden,w=v.ariaSelection,k=this.commonProps,E=o||this.getElementId("input"),N=Er(Er(Er({"aria-autocomplete":"list","aria-expanded":f,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":p,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},f&&{"aria-controls":this.getElementId("listbox")}),!s&&{"aria-readonly":!0}),this.hasValue()?(w==null?void 0:w.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return s?I.createElement(x,Ar({},k,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:E,innerRef:this.getInputRef,isDisabled:a,isHidden:b,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:c,form:d,type:"text",value:l},N)):I.createElement(Z7e,Ar({id:E,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:lT,onFocus:this.onInputFocus,disabled:a,tabIndex:c,inputMode:"none",form:d,value:""},N))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,a=this.getComponents(),s=a.MultiValue,o=a.MultiValueContainer,l=a.MultiValueLabel,c=a.MultiValueRemove,d=a.SingleValue,f=a.Placeholder,p=this.commonProps,m=this.props,x=m.controlShouldRenderValue,v=m.isDisabled,b=m.isMulti,w=m.inputValue,k=m.placeholder,E=this.state,N=E.selectValue,P=E.focusedValue,R=E.isFocused;if(!this.hasValue()||!x)return w?null:I.createElement(f,Ar({},p,{key:"placeholder",isDisabled:v,isFocused:R,innerProps:{id:this.getElementId("placeholder")}}),k);if(b)return N.map(function(D,L){var B=D===P,z="".concat(i.getOptionLabel(D),"-").concat(i.getOptionValue(D));return I.createElement(s,Ar({},p,{components:{Container:o,Label:l,Remove:c},isFocused:B,isDisabled:v,key:z,index:L,removeProps:{onClick:function(){return i.removeValue(D)},onTouchEnd:function(){return i.removeValue(D)},onMouseDown:function(te){te.preventDefault()}},data:D}),i.formatOptionLabel(D,"value"))});if(w)return null;var O=N[0];return I.createElement(d,Ar({},p,{data:O,isDisabled:v}),this.formatOptionLabel(O,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),a=i.ClearIndicator,s=this.commonProps,o=this.props,l=o.isDisabled,c=o.isLoading,d=this.state.isFocused;if(!this.isClearable()||!a||l||!this.hasValue()||c)return null;var f={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return I.createElement(a,Ar({},s,{innerProps:f,isFocused:d}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),a=i.LoadingIndicator,s=this.commonProps,o=this.props,l=o.isDisabled,c=o.isLoading,d=this.state.isFocused;if(!a||!c)return null;var f={"aria-hidden":"true"};return I.createElement(a,Ar({},s,{innerProps:f,isDisabled:l,isFocused:d}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),a=i.DropdownIndicator,s=i.IndicatorSeparator;if(!a||!s)return null;var o=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused;return I.createElement(s,Ar({},o,{isDisabled:l,isFocused:c}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),a=i.DropdownIndicator;if(!a)return null;var s=this.commonProps,o=this.props.isDisabled,l=this.state.isFocused,c={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return I.createElement(a,Ar({},s,{innerProps:c,isDisabled:o,isFocused:l}))}},{key:"renderMenu",value:function(){var i=this,a=this.getComponents(),s=a.Group,o=a.GroupHeading,l=a.Menu,c=a.MenuList,d=a.MenuPortal,f=a.LoadingMessage,p=a.NoOptionsMessage,m=a.Option,x=this.commonProps,v=this.state.focusedOption,b=this.props,w=b.captureMenuScroll,k=b.inputValue,E=b.isLoading,N=b.loadingMessage,P=b.minMenuHeight,R=b.maxMenuHeight,O=b.menuIsOpen,D=b.menuPlacement,L=b.menuPosition,B=b.menuPortalTarget,z=b.menuShouldBlockScroll,H=b.menuShouldScrollIntoView,te=b.noOptionsMessage,Y=b.onMenuScrollToTop,W=b.onMenuScrollToBottom;if(!O)return null;var Z=function(ce,V){var G=ce.type,ie=ce.data,Ee=ce.isDisabled,ne=ce.isSelected,ae=ce.label,me=ce.value,ve=v===ie,q=Ee?void 0:function(){return i.onOptionHover(ie)},Ne=Ee?void 0:function(){return i.selectOption(ie)},Pe="".concat(i.getElementId("option"),"-").concat(V),ze={id:Pe,onClick:Ne,onMouseMove:q,onMouseOver:q,tabIndex:-1,role:"option","aria-selected":i.state.isAppleDevice?void 0:ne};return I.createElement(m,Ar({},x,{innerProps:ze,data:ie,isDisabled:Ee,isSelected:ne,key:Pe,label:ae,type:G,value:me,isFocused:ve,innerRef:ve?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(ce.data,"menu"))},re;if(this.hasOptions())re=this.getCategorizedOptions().map(function(J){if(J.type==="group"){var ce=J.data,V=J.options,G=J.index,ie="".concat(i.getElementId("group"),"-").concat(G),Ee="".concat(ie,"-heading");return I.createElement(s,Ar({},x,{key:ie,data:ce,options:V,Heading:o,headingProps:{id:Ee,data:J.data},label:i.formatGroupLabel(J.data)}),J.options.map(function(ne){return Z(ne,"".concat(G,"-").concat(ne.index))}))}else if(J.type==="option")return Z(J,"".concat(J.index))});else if(E){var X=N({inputValue:k});if(X===null)return null;re=I.createElement(f,x,X)}else{var Q=te({inputValue:k});if(Q===null)return null;re=I.createElement(p,x,Q)}var fe={minMenuHeight:P,maxMenuHeight:R,menuPlacement:D,menuPosition:L,menuShouldScrollIntoView:H},ye=I.createElement(OLe,Ar({},x,fe),function(J){var ce=J.ref,V=J.placerProps,G=V.placement,ie=V.maxHeight;return I.createElement(l,Ar({},x,fe,{innerRef:ce,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:E,placement:G}),I.createElement(a9e,{captureEnabled:w,onTopArrive:Y,onBottomArrive:W,lockEnabled:z},function(Ee){return I.createElement(c,Ar({},x,{innerRef:function(ae){i.getMenuListRef(ae),Ee(ae)},innerProps:{role:"listbox","aria-multiselectable":x.isMulti,id:i.getElementId("listbox")},isLoading:E,maxHeight:ie,focusedOption:v}),re)}))});return B||L==="fixed"?I.createElement(d,Ar({},x,{appendTo:B,controlElement:this.controlRef,menuPlacement:D,menuPosition:L}),ye):ye}},{key:"renderFormField",value:function(){var i=this,a=this.props,s=a.delimiter,o=a.isDisabled,l=a.isMulti,c=a.name,d=a.required,f=this.state.selectValue;if(d&&!this.hasValue()&&!o)return I.createElement(l9e,{name:c,onFocus:this.onValueInputFocus});if(!(!c||o))if(l)if(s){var p=f.map(function(v){return i.getOptionValue(v)}).join(s);return I.createElement("input",{name:c,type:"hidden",value:p})}else{var m=f.length>0?f.map(function(v,b){return I.createElement("input",{key:"i-".concat(b),name:c,type:"hidden",value:i.getOptionValue(v)})}):I.createElement("input",{name:c,type:"hidden",value:""});return I.createElement("div",null,m)}else{var x=f[0]?this.getOptionValue(f[0]):"";return I.createElement("input",{name:c,type:"hidden",value:x})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,a=this.state,s=a.ariaSelection,o=a.focusedOption,l=a.focusedValue,c=a.isFocused,d=a.selectValue,f=this.getFocusableOptions();return I.createElement(G7e,Ar({},i,{id:this.getElementId("live-region"),ariaSelection:s,focusedOption:o,focusedValue:l,isFocused:c,selectValue:d,focusableOptions:f,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),a=i.Control,s=i.IndicatorsContainer,o=i.SelectContainer,l=i.ValueContainer,c=this.props,d=c.className,f=c.id,p=c.isDisabled,m=c.menuIsOpen,x=this.state.isFocused,v=this.commonProps=this.getCommonProps();return I.createElement(o,Ar({},v,{className:d,innerProps:{id:f,onKeyDown:this.onKeyDown},isDisabled:p,isFocused:x}),this.renderLiveRegion(),I.createElement(a,Ar({},v,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:p,isFocused:x,menuIsOpen:m}),I.createElement(l,Ar({},v,{isDisabled:p}),this.renderPlaceholderOrValue(),this.renderInput()),I.createElement(s,Ar({},v,{isDisabled:p}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,a){var s=a.prevProps,o=a.clearFocusValueOnUpdate,l=a.inputIsHiddenAfterUpdate,c=a.ariaSelection,d=a.isFocused,f=a.prevWasFocused,p=a.instancePrefix,m=i.options,x=i.value,v=i.menuIsOpen,b=i.inputValue,w=i.isMulti,k=cT(x),E={};if(s&&(x!==s.value||m!==s.options||v!==s.menuIsOpen||b!==s.inputValue)){var N=v?S9e(i,k):[],P=v?MG(zN(i,k),"".concat(p,"-option")):[],R=o?E9e(a,k):null,O=C9e(a,N),D=zj(P,O);E={selectValue:k,focusedOption:O,focusedOptionId:D,focusableOptionsWithIds:P,focusedValue:R,clearFocusValueOnUpdate:!1}}var L=l!=null&&i!==s?{inputIsHidden:l,inputIsHiddenAfterUpdate:void 0}:{},B=c,z=d&&f;return d&&!z&&(B={value:zw(w,k,k[0]||null),options:k,action:"initial-input-focus"},z=!f),(c==null?void 0:c.action)==="initial-input-focus"&&(B=null),Er(Er(Er({},E),L),{},{prevProps:i,ariaSelection:B,prevWasFocused:z})}}]),r}(I.Component);V7.defaultProps=w9e;var _9e=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function Sle(e){var t=e.defaultInputValue,r=t===void 0?"":t,n=e.defaultMenuIsOpen,i=n===void 0?!1:n,a=e.defaultValue,s=a===void 0?null:a,o=e.inputValue,l=e.menuIsOpen,c=e.onChange,d=e.onInputChange,f=e.onMenuClose,p=e.onMenuOpen,m=e.value,x=xf(e,_9e),v=I.useState(o!==void 0?o:r),b=ph(v,2),w=b[0],k=b[1],E=I.useState(l!==void 0?l:i),N=ph(E,2),P=N[0],R=N[1],O=I.useState(m!==void 0?m:s),D=ph(O,2),L=D[0],B=D[1],z=I.useCallback(function(X,Q){typeof c=="function"&&c(X,Q),B(X)},[c]),H=I.useCallback(function(X,Q){var fe;typeof d=="function"&&(fe=d(X,Q)),k(fe!==void 0?fe:X)},[d]),te=I.useCallback(function(){typeof p=="function"&&p(),R(!0)},[p]),Y=I.useCallback(function(){typeof f=="function"&&f(),R(!1)},[f]),W=o!==void 0?o:w,Z=l!==void 0?l:P,re=m!==void 0?m:L;return Er(Er({},x),{},{inputValue:W,menuIsOpen:Z,onChange:z,onInputChange:H,onMenuClose:Y,onMenuOpen:te,value:re})}var N9e=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],LG=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=String(t).toLowerCase(),a=String(n.getOptionValue(r)).toLowerCase(),s=String(n.getOptionLabel(r)).toLowerCase();return a===i||s===i},Hj={formatCreateLabel:function(t){return'Create "'.concat(t,'"')},isValidNewOption:function(t,r,n,i){return!(!t||r.some(function(a){return LG(t,a,i)})||n.some(function(a){return LG(t,a,i)}))},getNewOptionData:function(t,r){return{label:r,value:t,__isNew__:!0}}};function A9e(e){var t=e.allowCreateWhileLoading,r=t===void 0?!1:t,n=e.createOptionPosition,i=n===void 0?"last":n,a=e.formatCreateLabel,s=a===void 0?Hj.formatCreateLabel:a,o=e.isValidNewOption,l=o===void 0?Hj.isValidNewOption:o,c=e.getNewOptionData,d=c===void 0?Hj.getNewOptionData:c,f=e.onCreateOption,p=e.options,m=p===void 0?[]:p,x=e.onChange,v=xf(e,N9e),b=v.getOptionValue,w=b===void 0?ple:b,k=v.getOptionLabel,E=k===void 0?hle:k,N=v.inputValue,P=v.isLoading,R=v.isMulti,O=v.value,D=v.name,L=I.useMemo(function(){return l(N,cT(O),m,{getOptionValue:w,getOptionLabel:E})?d(N,s(N)):void 0},[s,d,E,w,N,l,m,O]),B=I.useMemo(function(){return(r||!P)&&L?i==="first"?[L].concat(Lo(m)):[].concat(Lo(m),[L]):m},[r,i,P,L,m]),z=I.useCallback(function(H,te){if(te.action!=="select-option")return x(H,te);var Y=Array.isArray(H)?H:[H];if(Y[Y.length-1]===L){if(f)f(N);else{var W=d(N,N),Z={action:"create-option",name:D,option:W};x(zw(R,[].concat(Lo(cT(O)),[W]),W),Z)}return}x(H,te)},[d,N,R,D,L,f,x,O]);return Er(Er({},v),{},{options:B,onChange:z})}var T9e=I.forwardRef(function(e,t){var r=Sle(e),n=A9e(r);return I.createElement(V7,Ar({ref:t},n))}),xS=T9e;const rC=()=>rr("/api/products"),Ele=()=>rr("/api/import/aliases"),Cle=()=>rr("/api/import/aliases/products"),I9e=async()=>{const e=await fetch(Ele());if(!e.ok)throw new Error("Failed to fetch size aliases.");return e.json()},O9e=async(e,t)=>{const r=await fetch(Ele(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({aliasText:e,mappedSize:t})});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to save alias.")}return r.json()},P9e=async()=>{const e=await fetch(Cle());if(!e.ok)throw new Error("Failed to fetch product aliases.");return e.json()},R9e=async(e,t)=>{const r=await fetch(Cle(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({aliasText:e,mappedProductName:t})});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to save product alias.")}return r.json()},j9e=async(e="")=>{if(!e||e.trim()==="")return[];const t=await fetch(`${rr("/api/search")}?q=${encodeURIComponent(e)}&type=products`);if(!t.ok)return[];const r=await t.json();let n=[];return Array.isArray(r)?n=r:r.samples&&(n=r.samples),Array.from(new Set(n.map(a=>a.title||a.name).filter(Boolean)))},D9e=async()=>{const e=await fetch(`${rr("/api/products")}/names`);if(!e.ok)throw new Error("Failed to fetch all product names.");return e.json()},kle=async()=>{const e=await fetch(`${rC()}/sizes`);if(!e.ok)throw new Error("Failed to fetch unique sizes.");return e.json()},_le=async()=>{const e=await fetch(`${rC()}/sizes/stats`);if(!e.ok){const t=await e.text();throw new Error(`Error ${e.status}: ${t||e.statusText}`)}return e.json()},M9e=async(e,t)=>{const r=await fetch(`${rC()}/sizes`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldValue:e,newValue:t})});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to update size value.")}return r.json()},F9e=async e=>{const t=await fetch(`${rC()}/sizes`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:e})});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to delete size value.")}return t.json()},Nle=async e=>{const t=await fetch(`${rC()}/sizes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:e})});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to create size.")}},Ale=e=>{const t=Da(),r=Tr({mutationFn:$se,onSuccess:()=>{t.invalidateQueries({queryKey:["vendors"]}),Re.success("Vendor created."),e==null||e()},onError:a=>Re.error(`Creation failed: ${a.message}`)}),n=Tr({mutationFn:zse,onSuccess:()=>{t.invalidateQueries({queryKey:["vendors"]}),Re.success("Vendor updated."),e==null||e()},onError:a=>Re.error(`Update failed: ${a.message}`)}),i=Tr({mutationFn:Hse,onSuccess:()=>{t.invalidateQueries({queryKey:["vendors"]}),Re.success("Vendor deleted successfully."),e==null||e()},onError:a=>Re.error(`Deletion failed: ${a.message}`)});return{createVendor:r,updateVendor:n,deleteVendor:i}},L9e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],B9e=e=>{if(!e)return e;const t=e.replace(/[^\d]/g,""),r=t.length;return r<4?t:r<7?`(${t.slice(0,3)}) ${t.slice(3)}`:`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,10)}`},cb=({isOpen:e,onClose:t,vendorToEdit:r,initialVendorType:n})=>{var N;const{data:i}=Noe(),{data:a=[]}=y4(),{createVendor:s,updateVendor:o,deleteVendor:l}=Ale(t),c=s.isPending||o.isPending,d=l.isPending,[f,p]=I.useState({name:"",vendorType:"Supplier",defaultSupplierId:null,defaultProductType:null,websiteUrl:"",portalUrl:"",address:"",phone:"",orderingEmail:"",claimsEmail:"",repName:"",repPhone:"",repEmail:"",defaultMarkup:null,pricingMethod:null,shippingMethod:"",dedicatedShippingDay:null,notes:""});I.useEffect(()=>{const P={name:"",vendorType:"Supplier",defaultSupplierId:null,defaultProductType:null,websiteUrl:"",portalUrl:"",address:"",phone:"",orderingEmail:"",claimsEmail:"",repName:"",repPhone:"",repEmail:"",defaultMarkup:null,pricingMethod:null,shippingMethod:"",dedicatedShippingDay:null,notes:""};r?p({name:r.name||"",vendorType:r.vendorType||null,defaultSupplierId:r.defaultSupplierId||null,defaultProductType:r.defaultProductType||null,websiteUrl:r.websiteUrl||"",portalUrl:r.portalUrl||"",address:r.address||"",phone:r.phone||"",orderingEmail:r.orderingEmail||"",claimsEmail:r.claimsEmail||"",repName:r.repName||"",repPhone:r.repPhone||"",repEmail:r.repEmail||"",defaultMarkup:r.defaultMarkup??null,pricingMethod:r.pricingMethod??null,shippingMethod:r.shippingMethod||"",dedicatedShippingDay:r.dedicatedShippingDay??null,notes:r.notes||""}):(n&&(P.vendorType=n),p(P))},[r,e,n]);const m=P=>{const{name:R,value:O,type:D}=P.target;if(R==="phone"||R==="repPhone"){const L=O.replace(/[^\d]/g,"");L.length<=10&&p(B=>({...B,[R]:B9e(L)}));return}if(D==="checkbox"){const L=P.target.checked;p(B=>({...B,[R]:L}))}else p(R==="dedicatedShippingDay"||R==="defaultProductType"||R==="vendorType"?L=>({...L,[R]:O===""?null:O}):R==="defaultMarkup"?L=>({...L,[R]:O===""?null:parseFloat(O)}):R==="pricingMethod"?L=>({...L,[R]:O===""?null:O}):L=>({...L,[R]:O}))},x=P=>{P.preventDefault();const R={...f,defaultSupplierId:f.vendorType==="Manufacturer"?f.defaultSupplierId:null};r?o.mutate({...r,...R}):s.mutate(R)},v=()=>{r&&window.confirm(`Are you sure you want to delete vendor "${r.name}"? This action cannot be undone.`)&&l.mutate(r.id)},b=a.filter(P=>(P.vendorType==="Supplier"||P.vendorType==="Both")&&P.id!==(r==null?void 0:r.id)),w=P=>{const R=P.target.value,O=R===""?null:parseInt(R),D=a.find(L=>L.id===O);p(L=>({...L,defaultSupplierId:O,shippingMethod:(D==null?void 0:D.shippingMethod)||L.shippingMethod,dedicatedShippingDay:(D==null?void 0:D.dedicatedShippingDay)??L.dedicatedShippingDay}))},k=()=>{const P=a.find(R=>R.id===f.defaultSupplierId);P&&(p(R=>({...R,address:P.address||R.address,phone:P.phone||R.phone,orderingEmail:P.orderingEmail||R.orderingEmail,claimsEmail:P.claimsEmail||R.claimsEmail,repName:P.repName||R.repName,repPhone:P.repPhone||R.repPhone,repEmail:P.repEmail||R.repEmail,websiteUrl:P.websiteUrl||R.websiteUrl,portalUrl:P.portalUrl||R.portalUrl,shippingMethod:P.shippingMethod||R.shippingMethod,dedicatedShippingDay:P.dedicatedShippingDay??R.dedicatedShippingDay})),Re.success(`Copied contact info from ${P.name}`))};if(!e)return null;const E="w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary placeholder:text-text-tertiary focus:outline-none focus:border-primary transition-colors";return u.jsx("div",{className:"fixed inset-0 bg-black/75 z-[60] overflow-y-auto",children:u.jsx("div",{className:"flex min-h-full items-center justify-center p-0 lg:p-4",children:u.jsxs("div",{className:"bg-surface-container-high w-full min-h-full lg:min-h-0 lg:h-auto lg:max-h-[90vh] lg:max-w-4xl lg:rounded-2xl shadow-2xl flex flex-col border border-outline/10 relative",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center bg-surface-container-low lg:rounded-t-2xl sticky top-0 z-10",children:[u.jsxs("h2",{className:"text-xl font-bold text-text-primary flex items-center gap-2",children:[u.jsx(Yg,{className:"text-primary"}),r?"Edit Vendor":"New Vendor"]}),u.jsx("button",{onClick:t,className:"p-2 hover:bg-surface-container-highest rounded-full text-text-secondary hover:text-text-primary transition-colors",children:u.jsx(Zr,{size:24})})]}),u.jsxs("form",{onSubmit:x,className:"flex flex-col flex-grow",children:[u.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 overflow-y-auto flex-grow",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-text-tertiary border-b border-outline/10 pb-2",children:"Contact Info"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Vendor Name"}),u.jsx("input",{type:"text",name:"name",value:f.name,onChange:m,className:E,required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Vendor Type"}),u.jsxs("select",{name:"vendorType",value:f.vendorType??"",onChange:m,className:E,children:[u.jsx("option",{value:"Supplier",children:"Supplier"}),u.jsx("option",{value:"Manufacturer",children:"Manufacturer"}),u.jsx("option",{value:"Both",children:"Both"})]})]}),f.vendorType==="Manufacturer"&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Default Supplier / Distributor"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("select",{name:"defaultSupplierId",value:f.defaultSupplierId??"",onChange:w,className:E,children:[u.jsx("option",{value:"",children:"Select a Supplier..."}),b.map(P=>u.jsx("option",{value:P.id,children:P.name},P.id))]}),f.defaultSupplierId&&u.jsx("button",{type:"button",onClick:k,className:"p-3 bg-primary-container text-primary rounded-lg hover:bg-primary hover:text-on-primary transition-all shadow-sm",title:"Copy Address/Phone/Email from Supplier",children:u.jsx(k7,{size:20})})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Default Product Type"}),u.jsxs("select",{name:"defaultProductType",value:f.defaultProductType??"",onChange:m,className:E,children:[u.jsx("option",{value:"",children:"None"}),oy.map(P=>u.jsx("option",{value:P,children:P},P))]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1 flex items-center gap-1.5",children:[u.jsx(Qg,{size:12})," Website"]}),u.jsx("input",{type:"url",name:"websiteUrl",value:f.websiteUrl,onChange:m,placeholder:"https://...",className:E})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1 flex items-center gap-1.5",children:[u.jsx(Fx,{size:12})," Portal"]}),u.jsx("input",{type:"url",name:"portalUrl",value:f.portalUrl,onChange:m,placeholder:"https://...",className:E})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Main Phone"}),u.jsx("input",{type:"tel",name:"phone",value:f.phone,onChange:m,className:E})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Ordering Email"}),u.jsx("input",{type:"email",name:"orderingEmail",value:f.orderingEmail,onChange:m,className:E})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Claims Email"}),u.jsx("input",{type:"email",name:"claimsEmail",value:f.claimsEmail,onChange:m,className:E})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Address"}),u.jsx("textarea",{name:"address",value:f.address,onChange:m,rows:2,className:E})]})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-text-tertiary border-b border-outline/10 pb-2",children:"Representative"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Rep Name"}),u.jsx("input",{type:"text",name:"repName",value:f.repName,onChange:m,className:E})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Rep Phone"}),u.jsx("input",{type:"tel",name:"repPhone",value:f.repPhone,onChange:m,className:E})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Rep Email"}),u.jsx("input",{type:"email",name:"repEmail",value:f.repEmail,onChange:m,className:E})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-text-tertiary border-b border-outline/10 pb-2",children:"Shipping"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Shipping Method"}),u.jsx("input",{type:"text",name:"shippingMethod",value:f.shippingMethod,placeholder:"LTL, UPS, etc.",onChange:m,className:E})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Delivery Day"}),u.jsxs("select",{name:"dedicatedShippingDay",value:f.dedicatedShippingDay??"",onChange:m,className:E,children:[u.jsx("option",{value:"",children:"None"}),L9e.map((P,R)=>u.jsx("option",{value:R,children:P},R))]})]})]}),u.jsxs("div",{className:"bg-surface-container-low p-4 rounded-xl border border-outline/10 space-y-4",children:[u.jsx("h4",{className:"text-xs font-bold uppercase tracking-wider text-text-tertiary border-b border-outline/10 pb-2",children:"Pricing Overrides"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Markup %"}),u.jsx("input",{type:"number",name:"defaultMarkup",value:f.defaultMarkup??"",placeholder:"Use Global",onChange:m,className:E.replace("bg-surface-container-highest","bg-surface-container-high")})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Method"}),u.jsxs("select",{name:"pricingMethod",value:f.pricingMethod??"",onChange:m,className:E.replace("bg-surface-container-highest","bg-surface-container-high"),children:[u.jsx("option",{value:"",children:"Use Global"}),u.jsx("option",{value:"Markup",children:"Markup"}),u.jsx("option",{value:"Margin",children:"Margin"})]})]})]})]}),u.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[u.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-text-tertiary border-b border-outline/10 pb-2",children:"Internal Notes"}),u.jsx("textarea",{name:"notes",value:f.notes,onChange:m,className:`${E} flex-grow min-h-[300px] resize-none`,placeholder:"Add any specific details about ordering, shipping windows, or claims processes..."})]})]}),u.jsxs("div",{className:"p-4 border-t border-outline/10 bg-surface-container-low lg:rounded-b-2xl flex justify-end gap-3 shrink-0 sticky bottom-0 z-10 lg:static",children:[r&&((N=i==null?void 0:i.roles)==null?void 0:N.includes("Admin"))&&u.jsxs("button",{type:"button",onClick:v,disabled:d,className:"py-2 px-6 bg-error-container hover:bg-error/20 text-error rounded-full font-semibold flex items-center gap-2 disabled:opacity-50 transition-colors mr-auto",children:[u.jsx(mo,{size:16}),u.jsx("span",{children:d?"Deleting...":"Delete"})]}),u.jsx("button",{type:"button",onClick:t,className:"py-2 px-6 bg-surface hover:bg-surface-container-highest border border-outline/20 rounded-full text-text-primary font-medium transition-colors",children:"Cancel"}),u.jsx("button",{type:"submit",className:"py-2 px-6 bg-primary hover:bg-primary-hover rounded-full text-on-primary font-semibold shadow-md transition-all",disabled:c,children:c?r?"Saving...":"Creating...":r?"Save Changes":"Create Vendor"})]})]})]})})})},mh=(e,t,r)=>{if(e<0||t<0)return 0;if(r==="Markup")return e*(1+t/100);{const n=t/100;return n>=1?0:e/(1-n)}},gh=(e,t,r="Customer")=>e&&e.defaultMarkup!==null&&e.defaultMarkup!==void 0?{percentage:Number(e.defaultMarkup),method:e.pricingMethod||t.calculationMethod}:r==="Installer"?{percentage:t.contractorMarkup,method:t.calculationMethod}:{percentage:t.retailMarkup,method:t.calculationMethod},Um=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),Tle=({data:e,qrUrl:t})=>u.jsxs("div",{className:"border-2 border-black w-full h-auto p-2 flex flex-col box-border bg-white text-black break-inside-avoid overflow-hidden",children:[u.jsxs("div",{className:"border-b-2 border-black pb-0.5 mb-1 shrink-0",children:[u.jsx("h2",{className:"text-[10px] font-bold uppercase tracking-wide text-gray-600 leading-none",children:e.manufacturer}),u.jsx("h1",{className:"text-xl font-black leading-none mt-0.5 truncate tracking-tight",children:e.name}),e.subName&&u.jsx("h3",{className:"text-base font-bold leading-none mt-0.5 text-gray-900 truncate",children:e.subName})]}),u.jsxs("div",{className:"flex gap-2 items-start",children:[u.jsx("div",{className:"w-1/3 flex-shrink-0",children:u.jsx("img",{src:t,alt:"QR",className:"w-full h-auto object-contain rendering-pixelated"})}),u.jsxs("div",{className:"flex-1 flex flex-col gap-0.5",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[e.sku?u.jsxs("div",{children:[u.jsx("span",{className:"font-bold block text-[10px] uppercase text-gray-500 leading-none mb-0.5",children:"SKU"}),u.jsx("span",{className:"font-mono font-bold text-sm leading-none",children:e.sku})]}):u.jsx("div",{}),e.size&&u.jsxs("div",{className:"text-right",children:[u.jsx("span",{className:"font-bold block text-[10px] uppercase text-gray-500 leading-none mb-0.5",children:"Size"}),u.jsx("span",{className:"font-bold text-sm leading-none",children:e.size})]})]}),(e.retailPrice||e.cartonSize)&&u.jsx("div",{className:"border-t border-gray-300 my-0.5"}),(e.retailPrice||e.cartonSize)&&u.jsxs("div",{className:"flex justify-between items-end",children:[e.retailPrice&&u.jsxs("div",{children:[u.jsx("span",{className:"font-bold block text-[10px] uppercase text-gray-500 leading-none mb-0.5",children:"Retail"}),u.jsxs("div",{className:"flex items-baseline gap-0.5",children:[u.jsxs("span",{className:"text-xl font-black leading-none tracking-tighter",children:["$",e.retailPrice.toFixed(2)]}),u.jsxs("span",{className:"text-[10px] font-bold text-gray-500",children:["/",e.pricingUnit||e.uom||"Unit"]})]})]}),e.cartonSize&&u.jsxs("div",{className:"text-right",children:[u.jsx("span",{className:"font-bold block text-[10px] uppercase text-gray-500 leading-none mb-0.5",children:"Carton"}),u.jsxs("span",{className:"font-bold text-sm leading-none",children:[e.cartonSize," ",e.uom]})]})]})]})]})]});var Ile={exports:{}};(function(e,t){(function(r,n){e.exports=n(I)})(typeof self<"u"?self:Ve,function(r){return function(){var n={155:function(k){k.exports=r}},i={};function a(k){var E=i[k];if(E!==void 0)return E.exports;var N=i[k]={exports:{}};return n[k](N,N.exports,a),N.exports}a.d=function(k,E){for(var N in E)a.o(E,N)&&!a.o(k,N)&&Object.defineProperty(k,N,{enumerable:!0,get:E[N]})},a.o=function(k,E){return Object.prototype.hasOwnProperty.call(k,E)},a.r=function(k){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(k,"__esModule",{value:!0})};var s={};a.r(s),a.d(s,{useReactToPrint:function(){return w}});var o=a(155);const l="printWindow";function c({level:k="error",messages:E,suppressErrors:N=!1}){N||(k==="error"?console.error(E):k==="warning"?console.warn(E):console.debug(E))}function d(k,E){if(E||!k){const N=document.getElementById(l);N&&document.body.removeChild(N)}}function f(k){return k instanceof Error?k:new Error("Unknown Error")}function p(k,E){const{documentTitle:N,onAfterPrint:P,onPrintError:R,preserveAfterPrint:O,print:D,suppressErrors:L}=E;setTimeout(()=>{var B,z;if(k.contentWindow){let H=function(){P==null||P(),d(O)};if(k.contentWindow.focus(),D)D(k).then(H).catch(te=>{R?R("print",f(te)):c({messages:["An error was thrown by the specified `print` function"],suppressErrors:L})});else{if(k.contentWindow.print){const te=(z=(B=k.contentDocument)===null||B===void 0?void 0:B.title)!==null&&z!==void 0?z:"",Y=k.ownerDocument.title;N&&(k.ownerDocument.title=N,k.contentDocument&&(k.contentDocument.title=N)),k.contentWindow.print(),N&&(k.ownerDocument.title=Y,k.contentDocument&&(k.contentDocument.title=te))}else c({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:L});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(te=>{var Y,W;return((W=(Y=navigator.userAgent)!==null&&Y!==void 0?Y:navigator.vendor)!==null&&W!==void 0?W:"opera"in window&&window.opera).match(te)})?setTimeout(H,500):H()}}else c({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:L})},500)}function m(k){const E=[],N=document.createTreeWalker(k,NodeFilter.SHOW_ELEMENT,null);let P=N.nextNode();for(;P;)E.push(P),P=N.nextNode();return E}function x(k,E,N){const P=m(k),R=m(E);if(P.length===R.length)for(let O=0;O<P.length;O++){const D=P[O],L=R[O],B=D.shadowRoot;if(B!==null){const z=L.attachShadow({mode:B.mode});z.innerHTML=B.innerHTML,x(B,z,N)}}else c({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",k,E],suppressErrors:N})}const v=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function b(k,E,N,P){var R,O,D,L,B;const{contentNode:z,clonedContentNode:H,clonedImgNodes:te,clonedVideoNodes:Y,numResourcesToLoad:W,originalCanvasNodes:Z}=N,{bodyClass:re,fonts:X,ignoreGlobalStyles:Q,pageStyle:fe,nonce:ye,suppressErrors:J,copyShadowRoots:ce}=P;k.onload=null;const V=(R=k.contentDocument)!==null&&R!==void 0?R:(O=k.contentWindow)===null||O===void 0?void 0:O.document;if(V){const G=V.body.appendChild(H);ce&&x(z,G,!!J),X&&(!((D=k.contentDocument)===null||D===void 0)&&D.fonts&&(!((L=k.contentWindow)===null||L===void 0)&&L.FontFace)?X.forEach(q=>{const Ne=new FontFace(q.family,q.source,{weight:q.weight,style:q.style});k.contentDocument.fonts.add(Ne),Ne.loaded.then(()=>{E(Ne)}).catch(Pe=>{E(Ne,["Failed loading the font:",Ne,"Load error:",f(Pe)])})}):(X.forEach(q=>{E(q)}),c({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:J})));const ie=fe??v,Ee=V.createElement("style");ye&&(Ee.setAttribute("nonce",ye),V.head.setAttribute("nonce",ye)),Ee.appendChild(V.createTextNode(ie)),V.head.appendChild(Ee),re&&V.body.classList.add(...re.split(" "));const ne=V.querySelectorAll("canvas");for(let q=0;q<Z.length;++q){const Ne=Z[q],Pe=ne[q];if(Pe===void 0){c({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",Ne],suppressErrors:J});continue}const ze=Pe.getContext("2d");ze&&ze.drawImage(Ne,0,0)}for(let q=0;q<te.length;q++){const Ne=te[q],Pe=Ne.getAttribute("src");if(Pe){const ze=new Image;ze.onload=()=>{E(Ne)},ze.onerror=(De,$e,et,ut,kt)=>{E(Ne,["Error loading <img>",Ne,"Error",kt])},ze.src=Pe}else E(Ne,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',Ne])}for(let q=0;q<Y.length;q++){const Ne=Y[q];Ne.preload="auto";const Pe=Ne.getAttribute("poster");if(Pe){const ze=new Image;ze.onload=()=>{E(Ne)},ze.onerror=(De,$e,et,ut,kt)=>{E(Ne,["Error loading video poster",Pe,"for video",Ne,"Error:",kt])},ze.src=Pe}else Ne.readyState>=2?E(Ne):Ne.src?(Ne.onloadeddata=()=>{E(Ne)},Ne.onerror=(ze,De,$e,et,ut)=>{E(Ne,["Error loading video",Ne,"Error",ut])},Ne.onstalled=()=>{E(Ne,["Loading video stalled, skipping",Ne])}):E(Ne,["Error loading video, `src` is empty",Ne])}const ae="select",me=z.querySelectorAll(ae),ve=V.querySelectorAll(ae);for(let q=0;q<me.length;q++)ve[q].value=me[q].value;if(!Q){const q=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let Ne=0,Pe=q.length;Ne<Pe;++Ne){const ze=q[Ne];if(ze.tagName.toLowerCase()==="style"){const De=V.createElement(ze.tagName),$e=ze.sheet;if($e){let et="";try{const ut=$e.cssRules.length;for(let kt=0;kt<ut;++kt)typeof $e.cssRules[kt].cssText=="string"&&(et+=`${$e.cssRules[kt].cssText}\r
`)}catch(ut){c({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",ze,`Original error: ${f(ut).message}`],level:"warning"})}De.setAttribute("id",`react-to-print-${Ne}`),ye&&De.setAttribute("nonce",ye),De.appendChild(V.createTextNode(et)),V.head.appendChild(De)}}else if(ze.getAttribute("href"))if(ze.hasAttribute("disabled"))c({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",ze],level:"warning"}),E(ze);else{const De=V.createElement(ze.tagName);for(let $e=0,et=ze.attributes.length;$e<et;++$e){const ut=ze.attributes[$e];ut&&De.setAttribute(ut.nodeName,(B=ut.nodeValue)!==null&&B!==void 0?B:"")}De.onload=()=>{E(De)},De.onerror=($e,et,ut,kt,ht)=>{E(De,["Failed to load",De,"Error:",ht])},ye&&De.setAttribute("nonce",ye),V.head.appendChild(De)}else c({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",ze],level:"warning"}),E(ze)}}}W===0&&p(k,P)}function w({bodyClass:k,contentRef:E,copyShadowRoots:N,documentTitle:P,fonts:R,ignoreGlobalStyles:O,nonce:D,onAfterPrint:L,onBeforePrint:B,onPrintError:z,pageStyle:H,preserveAfterPrint:te,print:Y,printIframeProps:W,suppressErrors:Z}){return(0,o.useCallback)(X=>{function Q(){const fe={bodyClass:k,contentRef:E,copyShadowRoots:N,documentTitle:P,fonts:R,ignoreGlobalStyles:O,nonce:D,onAfterPrint:L,onPrintError:z,pageStyle:H,preserveAfterPrint:te,print:Y,suppressErrors:Z},ye=function(V){const G=document.createElement("iframe");return G.width=`${document.documentElement.clientWidth}px`,G.height=`${document.documentElement.clientHeight}px`,G.style.position="absolute",G.style.top=`-${document.documentElement.clientHeight+100}px`,G.style.left=`-${document.documentElement.clientWidth+100}px`,G.id=l,G.srcdoc="<!DOCTYPE html>",V&&(V.allow&&(G.allow=V.allow),V.referrerPolicy!==void 0&&(G.referrerPolicy=V.referrerPolicy),V.sandbox!==void 0&&(G.sandbox=V.sandbox)),G}(W),J=function(V,G){const{contentRef:ie,fonts:Ee,ignoreGlobalStyles:ne,suppressErrors:ae}=G,me=function({contentRef:De,optionalContent:$e,suppressErrors:et}){return $e&&typeof $e=="function"?(De&&c({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),$e()):De?De.current:void c({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:et})}({contentRef:ie,optionalContent:V,suppressErrors:ae});if(!me)return;const ve=me.cloneNode(!0),q=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),Ne=ve.querySelectorAll("img"),Pe=ve.querySelectorAll("video"),ze=Ee?Ee.length:0;return{contentNode:me,clonedContentNode:ve,clonedImgNodes:Ne,clonedVideoNodes:Pe,numResourcesToLoad:(ne?0:q.length)+Ne.length+Pe.length+ze,originalCanvasNodes:me.querySelectorAll("canvas")}}(X,fe);if(!J)return void c({messages:["There is nothing to print"],suppressErrors:Z});const ce=function(V,G,ie){const{suppressErrors:Ee}=V,ne=[],ae=[];return function(me,ve){ne.includes(me)?c({level:"debug",messages:["Tried to mark a resource that has already been handled",me],suppressErrors:Ee}):(ve?(c({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...ve],suppressErrors:Ee}),ae.push(me)):ne.push(me),ne.length+ae.length===G&&p(ie,V))}}(fe,J.numResourcesToLoad,ye);(function(V,G,ie,Ee){V.onload=()=>{b(V,G,ie,Ee)},document.body.appendChild(V)})(ye,ce,J,fe)}d(te,!0),B?B().then(()=>{Q()}).catch(fe=>{z==null||z("onBeforePrint",f(fe))}):Q()},[k,E,N,P,R,O,D,L,B,z,H,te,Y,Z])}return s}()})})(Ile);var Ole=Ile.exports;function Ple({isOpen:e,onClose:t,selectedProducts:r}){const[n,i]=I.useState([]),a=I.useRef(null),[s,o]=I.useState(!1);I.useEffect(()=>{if(e&&r.length>0){const f=[];r.forEach(p=>{const m=r.length===1;f.push({id:p.id,parentId:p.id,isVariant:!1,selected:m&&p.variants.length===0,data:{id:p.id,name:p.name,manufacturer:p.manufacturerName,isVariant:!1}}),p.variants.forEach(x=>{f.push({id:x.id,parentId:p.id,isVariant:!0,selected:!0,data:{id:x.id,name:p.name,subName:x.name,sku:x.sku,size:x.size,manufacturer:p.manufacturerName,retailPrice:x.retailPrice,uom:x.uom,pricingUnit:x.pricingUnit,cartonSize:x.cartonSize,isVariant:!0}})})}),i(f)}},[e,r]);const l=Ole.useReactToPrint({contentRef:a,documentTitle:`Sample_Labels_${new Date().toISOString().slice(0,10)}`,onBeforeGetContent:async()=>{o(!0),await new Promise(f=>setTimeout(f,500)),o(!1)},pageStyle:`
            @page { size: letter; margin: 0.25in; }
            @media print {
                body { -webkit-print-color-adjust: exact; }
                .print-grid { 
                    display: grid !important;
                    grid-template-columns: repeat(2, 1fr) !important;
                    grid-auto-rows: 3.33in !important;
                    gap: 0.16in !important;
                }
                .break-inside-avoid { page-break-inside: avoid; }
            }
        `}),c=f=>{i(p=>p.map(m=>m.id===f?{...m,selected:!m.selected}:m))};if(!e)return null;const d=n.filter(f=>f.selected).length;return u.jsx("div",{className:"fixed inset-0 bg-scrim/80 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-surface-container-high w-full max-w-6xl h-[90vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden border border-outline/20",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center shrink-0",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-xl font-bold text-text-primary flex items-center gap-2",children:[u.jsx(ay,{className:"text-primary"})," Print Labels"]}),u.jsxs("p",{className:"text-sm text-text-secondary",children:[d," labels queued"]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:t,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors",children:"Cancel"}),u.jsxs("button",{onClick:()=>l(),disabled:d===0||s,className:"flex items-center gap-2 py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all disabled:opacity-50",children:[s?u.jsx(I0,{className:"animate-spin"}):u.jsx(ay,{size:20}),"Print Sheets"]})]})]}),u.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[u.jsx("div",{className:"w-1/3 border-r border-outline/10 bg-surface-container overflow-y-auto p-4 space-y-4 scrollbar-thin scrollbar-thumb-surface-container-highest",children:r.map(f=>{const p=n.filter(m=>m.parentId===f.id);return u.jsxs("div",{className:"bg-surface-container-high border border-outline/10 rounded-xl overflow-hidden",children:[u.jsxs("div",{className:"p-3 bg-surface-container-highest border-b border-outline/10 font-bold text-text-primary flex justify-between items-center",children:[u.jsx("span",{children:f.name}),u.jsxs("span",{className:"text-xs font-normal text-text-secondary",children:[p.length," options"]})]}),u.jsx("div",{className:"divide-y divide-outline/10",children:p.map(m=>u.jsxs("div",{onClick:()=>c(m.id),className:`p-3 flex items-center gap-3 cursor-pointer hover:bg-primary-container/20 transition-colors ${m.selected?"bg-primary-container/30":""}`,children:[m.selected?u.jsx(A7,{size:18,className:"text-primary"}):u.jsx(moe,{size:18,className:"text-text-tertiary"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-sm font-medium truncate ${m.selected?"text-primary":"text-text-secondary"}`,children:m.isVariant?m.data.subName:"Full Line Label"}),m.isVariant&&u.jsx("p",{className:"text-xs text-text-tertiary truncate",children:m.data.sku||"No SKU"})]})]},m.id))})]},f.id)})}),u.jsx("div",{className:"flex-1 bg-surface-variant/30 overflow-y-auto p-8 flex justify-center",children:u.jsx("div",{className:"bg-white shadow-2xl p-[0.25in] min-h-[11in] w-[8.5in] scale-75 origin-top text-black",children:u.jsx("div",{ref:a,className:"print-grid",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gridAutoRows:"3.33in",gap:"0"},children:n.filter(f=>f.selected).map(f=>u.jsx("div",{className:"p-2 w-full h-full flex items-center justify-center border border-dashed border-outline/10 print:border-none break-inside-avoid",children:u.jsx(Tle,{data:f.data,qrUrl:`/api/products/${f.isVariant?"variants/":""}${f.id}/qr`})},f.id))})})})]})]})})}const Rle=({initialData:e={},onSave:t,onCancel:r,isSaving:n,saveButtonText:i="Save Changes",existingProduct:a})=>{const{vendors:s,addVendor:o}=Gr(),[l,c]=I.useState({manufacturerId:null,supplierId:null,productType:"",style:"",line:"",sizes:[],finish:"",color:"",sampleFormat:"Loose",boardColors:"",unitCost:null,uom:"",cartonSize:null,sku:"",productUrl:"",...e}),[d,f]=I.useState(""),[p,m]=I.useState(""),[x,v]=I.useState(!1),[b,w]=I.useState([]),[k,E]=I.useState(!1),[N,P]=I.useState("Manufacturer"),[R,O]=I.useState(null),[D,L]=I.useState(!1),[B,z]=I.useState([]);I.useEffect(()=>{(async()=>{try{const ie=await kle();w(ie.map(ne=>({label:ne,value:ne})));const Ee=await Dx();O(Ee)}catch(ie){console.error("Failed to fetch data:",ie)}})()},[]),I.useEffect(()=>{var G,ie;if(e.manufacturerId){const Ee=(G=s.find(ne=>ne.id===e.manufacturerId))==null?void 0:G.name;f(Ee||"")}if(e.supplierId&&e.supplierId!==e.manufacturerId){v(!0);const Ee=(ie=s.find(ne=>ne.id===e.supplierId))==null?void 0:ie.name;m(Ee||"")}},[e,s]);const H=I.useMemo(()=>{var G;return(G=s.find(ie=>ie.id===l.manufacturerId))==null?void 0:G.name},[s,l.manufacturerId]),te=I.useMemo(()=>{var G;return(G=s.find(ie=>ie.id===l.supplierId))==null?void 0:G.name},[s,l.supplierId]),Y=I.useMemo(()=>!d.trim()||d===H?[]:s.filter(G=>(G.vendorType==="Manufacturer"||G.vendorType==="Both")&&G.name.toLowerCase().includes(d.toLowerCase())),[s,d,H]),W=I.useMemo(()=>!p.trim()||p===te?[]:s.filter(G=>(G.vendorType==="Supplier"||G.vendorType==="Both")&&G.name.toLowerCase().includes(p.toLowerCase())),[s,p,te]),Z=G=>{c(ie=>({...ie,manufacturerId:G.id,productType:G.defaultProductType||ie.productType||""})),f(G.name)},re=G=>{c(ie=>({...ie,supplierId:G.id})),m(G.name)},X=G=>{const{name:ie,value:Ee}=G.target;c(ie==="unitCost"||ie==="cartonSize"?ne=>({...ne,[ie]:Ee===""?null:parseFloat(Ee)}):ne=>({...ne,[ie]:Ee}))},Q=I.useCallback(G=>{const ie=l.sizes,ne=(G?G.map(ae=>ae.value):[]).map(ae=>ie.find(ve=>ve.value===ae)||{value:ae,unitCost:null,cartonSize:null,uom:null});c(ae=>({...ae,sizes:ne}))},[l.sizes]),fe=(G,ie,Ee)=>{c(ne=>{const ae=[...ne.sizes];return ie==="unitCost"||ie==="cartonSize"?ae[G]={...ae[G],[ie]:Ee===""?null:Number(Ee)}:ae[G]={...ae[G],[ie]:Ee},{...ne,sizes:ae}})},ye=G=>{if(G.preventDefault(),!l.style||!l.productType)return Re.error("Style and Product Type are required.");if(!l.manufacturerId)return Re.error("Please select a manufacturer.");if(x&&!l.supplierId)return Re.error("Please select a supplier.");t(l)},J=async G=>{await o(G),E(!1)},ce=G=>{if(!a)return;const ie=a.variants.find(ne=>ne.size===G||ne.name===G);if(!ie){Re.error("Save changes before printing new variants.");return}const Ee={...a,variants:[ie]};z([Ee]),L(!0)},V=I.useMemo(()=>{if(!l.unitCost||!R)return null;const G=x?l.supplierId:l.manufacturerId,ie=s.find(ae=>ae.id===G),Ee=gh(ie,R,"Customer");return{price:mh(l.unitCost,Ee.percentage,Ee.method),details:`${Ee.method} ${Ee.percentage}% (${ie!=null&&ie.defaultMarkup?"Vendor Override":"Global Default"})`}},[l.unitCost,l.manufacturerId,l.supplierId,x,s,R]);return u.jsxs(u.Fragment,{children:[u.jsxs("form",{onSubmit:ye,children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Manufacturer *"}),u.jsx("input",{type:"text",value:d,onChange:G=>{f(G.target.value),c(ie=>({...ie,manufacturerId:null}))},className:"w-full p-2 bg-background border border-border rounded text-text-primary",required:!0}),Y.length>0&&u.jsx("div",{className:"absolute z-20 w-full bg-surface border border-border rounded-b-md mt-1 max-h-40 overflow-y-auto",children:Y.map(G=>u.jsx("div",{onClick:()=>Z(G),className:"p-2 hover:bg-background cursor-pointer",children:G.name},G.id))}),d.length>0&&!H&&Y.length===0&&u.jsx("div",{className:"absolute z-20 w-full bg-surface border border-border rounded-b-md mt-1",children:u.jsx("div",{onClick:()=>{P("Manufacturer"),E(!0)},className:"p-2 text-accent font-semibold hover:bg-accent hover:text-white cursor-pointer text-center",children:"+ Add New Manufacturer"})})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",id:"add-sample-diff-supplier",checked:x,onChange:G=>v(G.target.checked),className:"h-4 w-4 rounded text-primary focus:ring-primary bg-background border-border"}),u.jsx("label",{htmlFor:"add-sample-diff-supplier",className:"text-sm text-text-secondary",children:"Different Supplier?"})]}),x&&u.jsxs("div",{className:"relative",children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Supplier"}),u.jsx("input",{type:"text",value:p,onChange:G=>{m(G.target.value),c(ie=>({...ie,supplierId:null}))},className:"w-full p-2 bg-background border border-border rounded text-text-primary",required:!0}),W.length>0&&u.jsx("div",{className:"absolute z-10 w-full bg-surface border border-border rounded-b-md mt-1 max-h-40 overflow-y-auto",children:W.map(G=>u.jsx("div",{onClick:()=>re(G),className:"p-2 hover:bg-background cursor-pointer",children:G.name},G.id))}),p.length>0&&!te&&W.length===0&&u.jsx("div",{className:"absolute z-10 w-full bg-surface border border-border rounded-b-md mt-1",children:u.jsx("div",{onClick:()=>{P("Supplier"),E(!0)},className:"p-2 text-accent font-semibold hover:bg-accent hover:text-white cursor-pointer text-center",children:"+ Add New Supplier"})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Product Type *"}),u.jsxs("select",{name:"productType",value:l.productType,onChange:X,className:"w-full p-2 bg-background border border-border rounded text-text-primary",required:!0,children:[u.jsx("option",{value:"",disabled:!0,children:"-- Select a Type --"}),oy.map(G=>u.jsx("option",{value:G,children:G},G))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Style *"}),u.jsx("input",{type:"text",name:"style",value:l.style,onChange:X,className:"w-full p-2 bg-background border border-border rounded text-text-primary",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Color"}),u.jsx("input",{type:"text",name:"color",value:l.color,onChange:X,className:"w-full p-2 bg-background border border-border rounded text-text-primary"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Line"}),u.jsx("input",{type:"text",name:"line",value:l.line,onChange:X,className:"w-full p-2 bg-background border border-border rounded text-text-primary"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Finish"}),u.jsx("input",{type:"text",name:"finish",value:l.finish,onChange:X,className:"w-full p-2 bg-background border border-border rounded text-text-primary"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Sizes"}),u.jsx(xS,{isMulti:!0,name:"sizes",options:b,value:l.sizes.map(G=>({label:G.value,value:G.value})),onChange:Q,className:"react-select-container mt-1",classNamePrefix:"react-select",placeholder:"Type or select sizes...",styles:{control:G=>({...G,backgroundColor:"var(--color-background)",borderColor:"var(--color-border)"}),input:G=>({...G,color:"var(--color-text-primary)"}),multiValue:G=>({...G,backgroundColor:"var(--color-primary)"}),multiValueLabel:G=>({...G,color:"var(--color-on-primary)"}),multiValueRemove:G=>({...G,color:"var(--color-on-primary)",":hover":{backgroundColor:"var(--color-primary-hover)",color:"var(--color-on-primary)"}}),menu:G=>({...G,backgroundColor:"var(--color-surface)"}),option:(G,{isFocused:ie,isSelected:Ee})=>({...G,backgroundColor:Ee?"var(--color-primary)":ie?"var(--color-background)":void 0,color:Ee?"var(--color-on-primary)":"var(--color-text-primary)",":active":{...G[":active"],backgroundColor:"var(--color-primary-hover)"}})}})]}),l.sizes.length>0&&u.jsxs("div",{className:"bg-surface p-3 rounded border border-border overflow-x-auto",children:[u.jsx("h4",{className:"text-xs font-semibold text-text-secondary uppercase mb-2",children:"Size Variants Pricing"}),u.jsxs("table",{className:"w-full text-sm text-left",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"text-text-secondary border-b border-border",children:[u.jsx("th",{className:"pb-2 px-2",children:"Size"}),u.jsx("th",{className:"pb-2 px-2",children:"Cost"}),u.jsx("th",{className:"pb-2 px-2",children:"UOM"}),u.jsx("th",{className:"pb-2 px-2",children:"Carton"}),u.jsx("th",{className:"pb-2 px-2 text-right",children:"Actions"})," "]})}),u.jsx("tbody",{children:l.sizes.map((G,ie)=>u.jsxs("tr",{className:"border-b border-border last:border-0",children:[u.jsx("td",{className:"py-2 px-2 font-medium text-text-primary",children:G.value}),u.jsx("td",{className:"py-2 px-2",children:u.jsx("input",{type:"number",step:"0.01",placeholder:l.unitCost?`Def: $${l.unitCost}`:"0.00",value:G.unitCost??"",onChange:Ee=>fe(ie,"unitCost",Ee.target.value),className:"w-20 p-1 bg-background border border-border rounded text-xs text-text-primary"})}),u.jsx("td",{className:"py-2 px-2",children:u.jsxs("select",{value:G.uom??"",onChange:Ee=>fe(ie,"uom",Ee.target.value),className:"p-1 bg-background border border-border rounded text-xs text-text-primary w-16",children:[u.jsx("option",{value:"",children:l.uom||"Def"}),lh.map(Ee=>u.jsx("option",{value:Ee,children:Ee},Ee))]})}),u.jsx("td",{className:"py-2 px-2",children:u.jsx("input",{type:"number",step:"0.0001",placeholder:l.cartonSize?`Def: ${l.cartonSize}`:"Qty",value:G.cartonSize??"",onChange:Ee=>fe(ie,"cartonSize",Ee.target.value),className:"w-16 p-1 bg-background border border-border rounded text-xs text-text-primary"})}),u.jsx("td",{className:"py-2 px-2 text-right",children:u.jsx("button",{type:"button",onClick:()=>ce(G.value),className:"p-1 text-text-secondary hover:text-primary hover:bg-background rounded",title:"Print Label",disabled:!a,children:u.jsx(ZA,{size:16})})})]},ie))})]})]}),u.jsxs("div",{className:"p-3 bg-background rounded border border-border space-y-3",children:[u.jsx("h4",{className:"text-sm font-medium text-text-secondary border-b border-border pb-1 mb-2",children:"Default Pricing"}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Unit Cost ($)"}),u.jsx("input",{type:"number",step:"0.01",min:"0",name:"unitCost",value:l.unitCost??"",onChange:X,className:"w-full p-2 bg-surface border border-border rounded text-sm text-text-primary",placeholder:"0.00"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Unit (UOM)"}),u.jsxs("select",{name:"uom",value:l.uom??"",onChange:X,className:"w-full p-2 bg-surface border border-border rounded text-sm text-text-primary",children:[u.jsx("option",{value:"",children:"-- Unit --"}),lh.map(G=>u.jsx("option",{value:G,children:G},G))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Carton Size"}),u.jsx("input",{type:"number",step:"0.0001",min:"0",name:"cartonSize",value:l.cartonSize??"",onChange:X,className:"w-full p-2 bg-surface border border-border rounded text-sm text-text-primary",placeholder:"Qty per box"})]})]}),V&&u.jsxs("div",{className:"mt-2 p-2 bg-green-900/20 border border-green-800/50 rounded flex justify-between items-center",children:[u.jsx("span",{className:"text-xs text-green-400",children:"Suggested Retail:"}),u.jsxs("div",{className:"text-right",children:[u.jsx("span",{className:"font-bold text-green-400 text-sm",children:Um(V.price)}),u.jsx("span",{className:"text-[10px] text-gray-500 block",children:V.details})]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"SKU"}),u.jsx("input",{type:"text",name:"sku",value:l.sku,onChange:X,className:"w-full p-2 bg-background border border-border rounded text-text-primary"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Product URL"}),u.jsx("input",{type:"url",name:"productUrl",value:l.productUrl,onChange:X,className:"w-full p-2 bg-background border border-border rounded text-text-primary"})]})]})]}),u.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-border",children:[u.jsx("button",{type:"button",onClick:r,className:"py-2 px-4 bg-secondary hover:bg-secondary-hover rounded text-on-secondary",children:"Cancel"}),u.jsx("button",{type:"submit",className:"py-2 px-4 bg-primary hover:bg-primary-hover rounded text-on-primary",disabled:n,children:n?"Saving...":i})]})]}),u.jsx(cb,{isOpen:k,onClose:()=>E(!1),onSave:J,initialVendorType:N}),D&&B.length>0&&u.jsx(Ple,{isOpen:D,onClose:()=>L(!1),selectedProducts:B})]})},U9e=({isOpen:e,onClose:t,onSampleCreated:r,initialSearchTerm:n})=>{const{addSample:i}=Gr(),[a,s]=I.useState(!1),o=async l=>{s(!0);try{const{supplierId:c,...d}=l,f=l.supplierId||l.manufacturerId,p={...d,supplierId:f};p.productType!=="Tile"&&(p.sampleFormat=null,p.boardColors="");const m=await i(p);r(m),Re.success(`Sample "${m.style}" created!`),t()}catch(c){console.error("Failed to create sample:",c),Re.error("Could not create sample.")}finally{s(!1)}};return e?u.jsx(u.Fragment,{children:u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[60]",children:u.jsxs("div",{className:"bg-surface-container-high p-8 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-outline/10",onClick:l=>l.stopPropagation(),children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Create New Sample"}),u.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-surface-container-highest text-text-secondary hover:text-text-primary transition-colors",children:u.jsx(Zr,{className:"w-6 h-6"})})]}),u.jsx(Rle,{initialData:{style:n},onSave:o,onCancel:t,isSaving:a,saveButtonText:"Create & Add"})]})})}):null};var $9e=I.forwardRef(function(e,t){var r=Sle(e);return I.createElement(V7,Ar({ref:t},r))}),jle=$9e;const BG=()=>{const e=new Date;return e.setDate(e.getDate()+3),e.toISOString().split("T")[0]},z9e=({isOpen:e,onClose:t})=>{const{addSampleCheckout:r,installers:n}=Gr(),[i,a]=I.useState("PROJECT"),[s,o]=I.useState(null),[l,c]=I.useState(null),[d,f]=I.useState(null),[p,m]=I.useState([]),[x,v]=I.useState(BG()),[b,w]=I.useState(!1),[k,E]=I.useState(!1),[N,P]=I.useState(!1),[R,O]=I.useState(""),[D,L]=I.useState(!1),[B,z]=I.useState(""),[H,te]=I.useState(null),Y=I.useCallback(J=>{m(J)},[]),W=()=>{a("PROJECT"),o(null),c(null),f(null),m([]),v(BG()),E(!1),w(!1),P(!1),O(""),L(!1),z(""),te(null),t()},Z=J=>{o(J),c(null),m([])},re=J=>{O(J),P(!0)},X=J=>{z(J),L(!0)},Q=J=>{te(J),L(!1)},fe=async()=>{if(p.length===0){Re.error("Please add at least one sample.");return}if(!x){Re.error("Please select a return date.");return}if(i==="PROJECT"&&!l){Re.error("Please select a project.");return}if(i==="CUSTOMER"&&!s){Re.error("Please select a customer.");return}if(i==="INSTALLER"&&!d){Re.error("Please select an installer.");return}w(!0);const J=Re.loading(`Checking out ${p.length} item(s)...`);try{const ce=p.map(V=>r({projectId:i==="PROJECT"?l.id:void 0,customerId:i==="CUSTOMER"?s.id:void 0,installerId:i==="INSTALLER"?d.id:void 0,variantId:V.variantId,interestVariantId:V.interestVariantId,sampleType:V.sampleType,quantity:V.quantity,expectedReturnDate:new Date(x).toISOString()}));await Promise.all(ce),Re.success(`${p.length} item(s) checked out successfully.`,{id:J,icon:u.jsx(_4,{className:"text-green-500"})}),E(!0)}catch(ce){console.error("Failed to checkout samples:",ce),Re.error("An error occurred during checkout.",{id:J})}finally{w(!1)}};if(!e)return null;const ye=i==="PROJECT"||i==="CUSTOMER"?s:i==="INSTALLER"?d:null;return u.jsx(Ju,{children:u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"fixed inset-0 bg-scrim/60 z-50 overflow-y-auto",children:[u.jsx("div",{className:"print-only",children:u.jsx(DFe,{customer:ye,project:l,checkoutItems:p,returnDate:x})}),u.jsx("div",{className:"flex min-h-full items-center justify-center p-0 lg:p-4",children:u.jsxs("div",{className:"bg-surface-container-high w-full h-full lg:h-auto lg:max-h-[90vh] lg:max-w-4xl lg:rounded-2xl shadow-2xl flex flex-col border border-outline/20 relative",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center lg:rounded-t-2xl sticky top-0 z-20 no-print bg-surface-container-high",children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"New Sample Checkout"}),u.jsx("button",{onClick:W,className:"p-2 rounded-full hover:bg-surface-container-highest text-text-secondary hover:text-text-primary",children:u.jsx(Zr,{className:"w-6 h-6"})})]}),u.jsxs("fieldset",{disabled:k,className:"flex-1 overflow-y-auto p-4 md:p-8 space-y-8",children:[u.jsxs("section",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-4 text-text-primary px-1",children:"Who is this for?"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[u.jsxs("button",{onClick:()=>a("PROJECT"),className:`p-4 rounded-xl border-2 flex flex-col items-center gap-2 transition-all ${i==="PROJECT"?"border-primary bg-primary-container/30 text-primary":"border-outline/20 bg-surface-container text-text-secondary hover:border-primary/50"}`,children:[u.jsx(Rh,{size:24}),u.jsx("span",{className:"font-bold",children:"Project"})]}),u.jsxs("button",{onClick:()=>a("CUSTOMER"),className:`p-4 rounded-xl border-2 flex flex-col items-center gap-2 transition-all ${i==="CUSTOMER"?"border-primary bg-primary-container/30 text-primary":"border-outline/20 bg-surface-container text-text-secondary hover:border-primary/50"}`,children:[u.jsx(lc,{size:24}),u.jsx("span",{className:"font-bold",children:"Customer Only"})]}),u.jsxs("button",{onClick:()=>a("INSTALLER"),className:`p-4 rounded-xl border-2 flex flex-col items-center gap-2 transition-all ${i==="INSTALLER"?"border-primary bg-primary-container/30 text-primary":"border-outline/20 bg-surface-container text-text-secondary hover:border-primary/50"}`,children:[u.jsx(sb,{size:24}),u.jsx("span",{className:"font-bold",children:"Installer"})]})]})]}),u.jsx("section",{children:(i==="PROJECT"||i==="CUSTOMER")&&u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-lg font-semibold mb-3 text-text-primary px-1",children:"1. Customer"}),s?u.jsxs("div",{className:"bg-surface-container p-4 rounded-xl flex justify-between items-center border border-outline/20",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx(lc,{className:"w-6 h-6 text-primary"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-lg text-text-primary",children:s.fullName}),u.jsx("p",{className:"text-sm text-text-secondary",children:s.email})]})]}),!k&&u.jsx("button",{onClick:()=>{o(null),c(null)},className:"text-sm font-semibold text-primary hover:underline no-print",children:"Change"})]}):u.jsx(Soe,{onCustomerSelect:Z,onRequestNewCustomer:re})]})}),i==="PROJECT"&&s&&u.jsxs("section",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-3 text-text-primary px-1",children:"2. Project"}),l?u.jsxs("div",{className:"bg-surface-container p-4 rounded-xl flex justify-between items-center border border-outline/20",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx(Rh,{className:"w-6 h-6 text-primary"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-lg text-text-primary",children:l.projectName}),u.jsx("p",{className:"text-sm text-text-secondary",children:l.projectType})]})]}),!k&&u.jsx("button",{onClick:()=>c(null),className:"text-sm font-semibold text-primary hover:underline no-print",children:"Change"})]}):u.jsx(lFe,{customer:s,onProjectSelect:J=>c(J)})]}),i==="INSTALLER"&&u.jsxs("section",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-3 text-text-primary px-1",children:"1. Select Installer"}),u.jsx(jle,{options:n.map(J=>({label:J.installerName,value:J})),onChange:J=>f((J==null?void 0:J.value)||null),value:d?{label:d.installerName,value:d}:null,placeholder:"Search installers...",className:"react-select-container",classNamePrefix:"react-select"})]}),(i==="PROJECT"&&l||i==="CUSTOMER"&&s||i==="INSTALLER"&&d)&&u.jsxs("section",{children:[u.jsxs("h3",{className:"text-lg font-semibold mb-3 text-text-primary px-1",children:[i==="PROJECT"?"3.":"2."," Samples & Return Date"]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"returnDate",className:"block text-sm font-medium text-text-secondary mb-2",children:"Expected Return Date"}),u.jsxs("div",{className:"relative",children:[u.jsx(xu,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-secondary w-5 h-5"}),u.jsx("input",{id:"returnDate",type:"date",value:x,onChange:J=>v(J.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg py-2.5 pl-10 pr-4 focus:outline-none focus:ring-2 focus:ring-primary/50 text-text-primary"})]})]}),u.jsx("p",{className:"text-text-secondary mb-4",children:"Search or scan samples to add to the checkout list."}),u.jsx(_oe,{onItemsChange:Y,onRequestNewSample:X,externalSelectedProduct:H})]})]}),u.jsx("div",{className:"p-4 border-t border-outline/10 lg:rounded-b-2xl flex justify-end gap-4 no-print sticky bottom-0 z-20 lg:static bg-surface-container-high",children:k?u.jsxs(u.Fragment,{children:[u.jsx("button",{type:"button",onClick:W,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors font-medium",children:"Close"}),u.jsxs("button",{type:"button",onClick:()=>window.print(),className:"py-3 px-6 rounded-full bg-tertiary hover:bg-tertiary-hover text-on-tertiary flex items-center gap-2 font-semibold shadow-md transition-all",children:[u.jsx(ay,{size:18}),"Print Summary"]})]}):u.jsxs(u.Fragment,{children:[u.jsx("button",{type:"button",onClick:W,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors font-medium",disabled:b,children:"Cancel"}),u.jsx("button",{type:"button",onClick:fe,disabled:!(i==="PROJECT"&&l||i==="CUSTOMER"&&s||i==="INSTALLER"&&d)||p.length===0||b,className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold disabled:opacity-50 disabled:cursor-not-allowed shadow-md",children:b?"Checking Out...":`Finish Checkout (${p.length})`})]})})]})})]}),u.jsx(O7,{isOpen:N,onClose:()=>P(!1),customer:null,initialData:{fullName:R}}),u.jsx(U9e,{isOpen:D,onClose:()=>L(!1),onSampleCreated:Q,initialSearchTerm:B})]})})},H9e="America/Los_Angeles",rf=(e,t=H9e,r={month:"short",day:"numeric",year:"numeric"})=>{if(!e)return"-";const n=new Date(e);if(isNaN(n.getTime()))return"Invalid Date";try{return new Intl.DateTimeFormat("en-US",{...r,timeZone:t}).format(n)}catch{return console.warn(`Invalid timezone '${t}', falling back to UTC.`),new Intl.DateTimeFormat("en-US",{...r,timeZone:"UTC"}).format(n)}},W9e=(e,t)=>{for(const r of t){const n=r.variants.find(i=>String(i.id)===String(e.variantId));if(n)return`${r.name} - ${n.name}`}return"Unknown Sample"},V9e=e=>{switch(e){case sr.NEW:return"bg-surface-container text-text-secondary border border-outline";case sr.SCHEDULED:return"bg-primary-container text-primary font-bold";case sr.ACCEPTED:return"bg-success-container text-success font-bold";case sr.QUOTING:return"bg-secondary-container text-on-secondary-container";case sr.SAMPLE_CHECKOUT:return"bg-warning-container text-warning font-bold";case sr.COMPLETED:return"bg-surface text-text-primary border border-outline";case sr.AWAITING_DECISION:return"bg-surface-container-highest text-text-secondary";case sr.CANCELLED:return"bg-error-container text-error";default:return"bg-surface-container text-text-secondary"}},q9e=(e,t)=>{const r=t.filter(l=>l.projectId===e.id&&l.actualReturnDate===null);if(r.length===0)return null;const n=r.sort((l,c)=>new Date(l.expectedReturnDate).getTime()-new Date(c.expectedReturnDate).getTime())[0],i=new Date;i.setHours(0,0,0,0);const a=new Date(n.expectedReturnDate);a.setHours(0,0,0,0);const s=a.getTime()-i.getTime(),o=Math.ceil(s/(1e3*60*60*24));return o===0?{color:"text-warning",text:"Sample due today"}:o<0?{color:"text-error",text:"Sample is overdue"}:null},G9e=({project:e})=>{const{customers:t,sampleCheckouts:r,products:n,updateSampleCheckout:i,extendSampleCheckout:a,jobs:s,installers:o}=Gr(),l=t.find(v=>v.id===e.customerId),c=V9e(e.status),d=q9e(e,r),f=I.useMemo(()=>{const v=s.find(L=>L.projectId===e.id),b=(v==null?void 0:v.appointments)||[];if(b.length===0)return null;const w=[...b].sort((L,B)=>new Date(L.startDate).getTime()-new Date(B.startDate).getTime()),k=w[0].startDate,E=w[w.length-1].endDate,N=w[0].installerId,P=o.find(L=>L.id===N),R=rf(k),O=rf(E);return{dateString:R===O?R:`${R} - ${O}`,installerName:(P==null?void 0:P.installerName)||(P==null?void 0:P.name)||"Assigned Installer"}},[s,e.id,o]),p=I.useMemo(()=>r.filter(b=>b.projectId===e.id&&b.isSelected).slice(0,4).map(b=>{for(const w of n){if(b.interestVariantId){const E=w.variants.find(N=>String(N.id)===String(b.interestVariantId));if(E)return{url:E.thumbnailUrl||E.imageUrl||w.defaultThumbnailUrl||w.defaultImageUrl,name:E.name}}const k=w.variants.find(E=>String(E.id)===String(b.variantId));if(k)return{url:k.thumbnailUrl||k.imageUrl||w.defaultThumbnailUrl||w.defaultImageUrl,name:k.name}}return null}).filter(Boolean),[r,n,e.id]),m=I.useMemo(()=>r.filter(v=>v.projectId===e.id&&v.actualReturnDate===null),[r,e.id]),x=(v,b)=>{v.stopPropagation(),v.preventDefault(),b()};return u.jsxs(ai,{to:`/projects/${e.id}`,className:"block bg-surface-container-high p-5 rounded-xl shadow-sm hover:shadow-md transition-all duration-300 w-96 flex-shrink-0 border border-outline/10 group",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{className:"min-w-0 pr-2",children:[u.jsx("h3",{className:"font-bold text-lg text-text-primary truncate",children:e.projectName}),u.jsx("p",{className:"text-sm text-text-secondary truncate font-medium",children:l==null?void 0:l.fullName})]}),u.jsxs("div",{className:"flex items-center space-x-2 shrink-0",children:[d&&u.jsx("div",{title:d.text,className:`p-1.5 rounded-full bg-error-container ${d.color}`,children:u.jsx(uS,{size:14})}),u.jsx("div",{className:`text-xs font-semibold px-2 py-1 rounded-full ${c}`,children:e.status})]})]}),f&&u.jsxs("div",{className:"mt-4 flex items-start gap-4 text-sm text-text-secondary",children:[u.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[u.jsx("div",{className:"w-6 h-6 rounded-full bg-primary-container flex items-center justify-center shrink-0",children:u.jsx(xu,{className:"w-3.5 h-3.5 text-primary"})}),u.jsx("span",{className:"truncate",children:f.dateString})]}),u.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[u.jsx("div",{className:"w-6 h-6 rounded-full bg-primary-container flex items-center justify-center shrink-0",children:u.jsx(sb,{className:"w-3.5 h-3.5 text-primary"})}),u.jsx("span",{className:"truncate",children:f.installerName})]})]}),m.length>0&&u.jsxs("div",{className:"mt-4 pt-4 border-t border-outline/20",children:[u.jsx("h4",{className:"text-[10px] font-bold uppercase tracking-wider text-text-tertiary mb-3",children:"Active Samples"}),u.jsx("div",{className:"space-y-2.5",children:m.map(v=>{const b=W9e(v,n);return u.jsxs("div",{className:"flex justify-between items-center text-sm group/sample",children:[u.jsx("span",{className:"text-text-primary truncate",title:b,children:b}),u.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover/sample:opacity-100 transition-opacity",children:[u.jsx("button",{onClick:w=>x(w,()=>a(v)),className:"p-1.5 bg-surface hover:bg-surface-hover text-primary rounded-full border border-outline",children:u.jsx(od,{size:14})}),u.jsx("button",{onClick:w=>x(w,()=>i(v)),className:"p-1.5 bg-primary-container hover:bg-primary text-primary hover:text-on-primary rounded-full",children:u.jsx(T7,{size:14})})]})]},v.id)})})]}),p.length>0&&u.jsx("div",{className:"mt-4 flex gap-2",children:p.map((v,b)=>u.jsx("div",{className:"w-8 h-8 rounded-md bg-surface-container-low border border-outline/20 overflow-hidden shrink-0",title:v==null?void 0:v.name,children:v!=null&&v.url?u.jsx("img",{src:Ia(v.url),alt:(v==null?void 0:v.name)||"Selected variant",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center text-text-tertiary",children:u.jsx(pd,{size:14})})},b))}),u.jsxs("div",{className:"mt-4 flex justify-between items-center text-xs text-text-secondary pt-3 border-t border-outline/10",children:[u.jsx("span",{className:"bg-surface-container px-2 py-1 rounded-md",children:e.projectType}),u.jsx(sd,{className:"w-4 h-4 text-primary group-hover:translate-x-1 transition-transform"})]})]})},fT=({title:e,projects:t})=>u.jsxs("div",{className:"mb-12",children:[e&&u.jsx("h2",{className:"text-2xl font-semibold mb-4 text-text-primary pl-1",children:e}),t.length>0?u.jsx("div",{className:"flex gap-6 overflow-x-auto pb-4 after:content-[''] after:min-w-[1rem]",children:t.map(r=>u.jsx(G9e,{project:r},r.id))}):u.jsx("p",{className:"text-text-secondary italic",children:"No projects in this category."})]}),K9e=({order:e,project:t})=>{const r=new Date;r.setHours(0,0,0,0);let n="No ETA",i="text-text-secondary font-medium";if(e.etaDate){const a=e.etaDate.includes("T")?e.etaDate.split("T")[0]:e.etaDate,s=new Date(`${a}T00:00:00`);s.setHours(0,0,0,0);const o=s.getTime()-r.getTime(),l=Math.ceil(o/(1e3*60*60*24));n=s.toLocaleDateString(),l<0?i="text-error font-bold":l===0?i="text-success font-bold":l<=3&&(i="text-warning font-bold")}return u.jsxs(ai,{to:`/projects/${e.projectId}`,className:"block bg-surface-container-high p-5 rounded-xl shadow-sm hover:shadow-md transition-all duration-300 w-80 flex-shrink-0 border border-outline/10 group",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-lg text-text-primary truncate max-w-[180px]",title:t==null?void 0:t.projectName,children:(t==null?void 0:t.projectName)||"Unknown Project"}),u.jsx("p",{className:"text-sm text-text-secondary truncate font-medium",children:e.supplierName||"Unknown Supplier"})]}),u.jsxs("div",{className:`text-[10px] uppercase tracking-wide font-bold px-2 py-1 rounded-full flex items-center gap-1 ${e.status==="Damage Replacement"?"bg-error-container text-error":"bg-primary-container text-primary"}`,children:[e.status==="Damage Replacement"?u.jsx(ld,{size:10}):u.jsx(O0,{size:10}),e.status==="Damage Replacement"?"Repl.":"Order"]})]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-outline/20",children:[u.jsxs("div",{className:"flex justify-between items-center text-sm mb-2",children:[u.jsx("span",{className:"text-text-secondary",children:"ETA:"}),u.jsx("span",{className:i,children:n})]}),u.jsxs("div",{className:"space-y-1.5",children:[e.lineItems.slice(0,2).map(a=>u.jsx("div",{className:"flex justify-between text-xs text-text-secondary",children:u.jsxs("span",{className:"truncate w-3/4",children:[a.quantity," ",a.unit," - ",a.style]})},a.id)),e.lineItems.length>2&&u.jsxs("p",{className:"text-xs text-text-tertiary italic",children:["+",e.lineItems.length-2," more items..."]})]})]}),u.jsx("div",{className:"mt-5 flex justify-end items-center text-sm text-primary font-medium group-hover:translate-x-1 transition-transform",children:u.jsxs("span",{className:"flex items-center gap-1",children:["View ",u.jsx(sd,{size:16})]})})]})},X9e=({title:e,orders:t,projects:r})=>u.jsxs("div",{className:"mb-12",children:[u.jsxs("h2",{className:"text-2xl font-semibold mb-4 text-text-primary flex items-center gap-2",children:[u.jsx("div",{className:"p-2 bg-primary-container rounded-full text-primary",children:u.jsx(Jg,{size:20})}),e]}),u.jsxs("div",{className:"flex gap-6 overflow-x-auto pb-4 no-scrollbar",children:[t.map(n=>u.jsx(K9e,{order:n,project:r.find(i=>i.id===n.projectId)},n.id)),t.length===0&&u.jsx("p",{className:"text-text-secondary italic",children:"No orders found matching this criteria."})]})]}),Y9e=e=>{const{products:t,projects:r,customers:n,installers:i}=Gr(),a=r.find(d=>d.id===e.projectId),s=n.find(d=>d.id===e.customerId),o=i.find(d=>d.id===e.installerId);let l,c;for(const d of t){const f=d.variants.find(p=>String(p.id)===String(e.variantId));if(f){l=d,c=f;break}}return{product:l,variant:c,project:a,customer:s,installer:o}},Q9e=({checkout:e,onClick:t})=>{const{extendSampleCheckout:r,updateSampleCheckout:n}=Gr(),{product:i,variant:a,project:s,customer:o,installer:l}=Y9e(e);if(!i||!a)return null;const c=async N=>{N.stopPropagation(),await r(e)},d=async N=>{N.stopPropagation(),confirm(`Return "${a.name}"?`)&&await n(e)};let f="bg-surface-container border border-outline text-text-secondary",p="Checked Out";const m=new Date;m.setHours(0,0,0,0);const x=new Date(e.expectedReturnDate);x.setHours(0,0,0,0);const v=new Date(e.checkoutDate),w=Math.ceil((x.getTime()-v.getTime())/(1e3*60*60*24))>3;x<m?(f="bg-error-container text-error font-bold border-none",p="OVERDUE"):x.getTime()===m.getTime()?(f="bg-warning-container text-warning font-bold border-none",p="Due Today"):w?(f="bg-primary-container text-primary font-bold border-none",p="Extended"):p="On Time";const k=a.imageUrl||i.defaultImageUrl,E=`${i.name} - ${a.name}`;return u.jsxs("div",{className:"bg-surface-container-high rounded-xl shadow-sm hover:shadow-md transition-shadow overflow-hidden group flex flex-col cursor-pointer w-80 flex-shrink-0 border border-outline/10",onClick:()=>t(i),children:[u.jsxs("div",{className:"w-full h-48 bg-surface-container-low flex items-center justify-center text-text-secondary relative",children:[k?u.jsx("img",{src:Ia(k),alt:E,className:"w-full h-full object-cover"}):u.jsx("span",{className:"text-sm",children:"No Image"}),u.jsxs("div",{className:`absolute top-3 right-3 px-3 py-1 rounded-full text-xs font-bold shadow-sm flex items-center gap-1 ${f}`,children:[p==="OVERDUE"&&u.jsx(QE,{size:12}),p]})]}),u.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[u.jsx("h3",{className:"font-bold text-base text-text-primary truncate",title:E,children:E}),u.jsx("p",{className:"text-sm text-text-secondary truncate mb-4",children:i.manufacturerName||"N/A"}),u.jsx("div",{className:"flex-grow"}),u.jsxs("div",{className:"mt-auto space-y-3",children:[u.jsxs("div",{className:"flex justify-between items-end text-xs",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-text-secondary block mb-0.5",children:"Checked Out"}),u.jsx("span",{className:"text-text-secondary font-medium block truncate",children:rf(e.checkoutDate)})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("span",{className:"text-text-secondary block mb-0.5",children:"Due Date"}),u.jsx("span",{className:"font-bold text-text-primary block truncate",children:rf(e.expectedReturnDate)})]})]}),u.jsxs("div",{className:"truncate text-xs",children:[u.jsx("span",{className:"text-text-secondary",children:"For: "}),s?u.jsx(ai,{to:`/projects/${s.id}`,className:"text-accent hover:underline font-medium",onClick:N=>N.stopPropagation(),children:s.projectName}):o?u.jsx(ai,{to:`/customers/${o.id}`,className:"text-accent hover:underline font-medium",onClick:N=>N.stopPropagation(),children:o.fullName}):l?u.jsx(ai,{to:`/installers/${l.id}`,className:"text-accent hover:underline font-medium",onClick:N=>N.stopPropagation(),children:l.installerName}):u.jsx("span",{className:"text-text-tertiary font-medium",children:"Unknown"})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-end pt-3",children:[u.jsx("button",{onClick:c,className:"text-xs font-medium text-primary hover:bg-primary-container/20 py-2 px-4 rounded-full transition-colors",children:"Extend"}),u.jsxs("button",{onClick:d,className:"text-xs font-bold bg-secondary hover:bg-secondary-hover text-on-secondary py-2 px-4 rounded-full shadow-sm flex items-center gap-1 transition-colors",children:[u.jsx(T7,{size:12})," Return"]})]})]})]})]})},Dle=({title:e,checkouts:t,onItemClick:r})=>u.jsxs("div",{className:"mb-12",children:[u.jsxs("h2",{className:"text-2xl font-semibold mb-4 text-text-primary flex items-center gap-2",children:[e,t.length>0&&u.jsx("span",{className:"text-sm font-bold bg-primary-container text-on-primary-container px-3 py-1 rounded-full",children:t.length})]}),t.length>0?u.jsx("div",{className:"flex gap-6 overflow-x-auto pb-4 scrollbar-thin scrollbar-thumb-border scrollbar-track-transparent",children:t.map(n=>u.jsx(Q9e,{checkout:n,onClick:r},n.id))}):u.jsx("div",{className:"p-8 text-center bg-surface/30 rounded-lg border border-dashed border-border",children:u.jsx("p",{className:"text-text-secondary italic",children:"No samples are currently checked out."})})]});function J9e(e){const t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)}const Z9e=new Set(["id","createdAt","updatedAt","jobs","lineItems","userEmail","checkoutProjectId","checkoutProjectName","checkoutCustomerName","checkoutId","imageUrl","color","appointments","isOnHold"]);function eBe(e,t){if(!e||!t)return[];const r=[];("isOnHold"in e||"isOnHold"in t)&&e.isOnHold!==t.isOnHold&&r.push(t.isOnHold?"Job was placed On Hold":"Job was taken Off Hold"),("appointments"in e||"appointments"in t)&&JSON.stringify(e.appointments)!==JSON.stringify(t.appointments)&&r.push("Job schedule was updated.");const n=new Set([...Object.keys(e),...Object.keys(t)]);for(const i of n){if(Z9e.has(i))continue;const a=e[i],s=t[i],o=a==null||a===""?null:a,l=s==null||s===""?null:s;if(o===l)continue;const c=J9e(i);o===null?r.push(`'${c}' was set to "${l}"`):l===null?r.push(`'${c}' was cleared (was "${o}")`):typeof o=="boolean"&&typeof l=="boolean"?r.push(`'${c}' changed from "${o?"Yes":"No"}" to "${l?"Yes":"No"}"`):r.push(`'${c}' changed from "${o}" to "${l}"`)}return JSON.stringify(e.lineItems)!==JSON.stringify(t.lineItems)&&r.push("'Line Items' were updated."),r}const ub=({history:e})=>{const t=n=>new Date(n).toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}),r=n=>{const i=n.targetEntity.toLowerCase().replace("_"," ");switch(n.actionType.toUpperCase()){case"CREATE":return`created the ${i}.`;case"UPDATE":return`updated the ${i}.`;case"DELETE":return`deleted the ${i}.`;default:return`${n.actionType.toLowerCase().replace("_"," ")} the ${i}.`}};return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex items-center gap-3 flex-shrink-0",children:[u.jsx(X0,{className:"drag-handle cursor-move text-text-secondary hover:text-text-primary transition-colors",size:20}),u.jsx(Mx,{className:"w-6 h-6 text-primary"}),u.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Change History"})]}),u.jsx("div",{className:"p-4 overflow-y-auto flex-grow bg-surface-container scrollbar-thin scrollbar-thumb-surface-container-highest",children:!e||e.length===0?u.jsx("div",{className:"text-center py-8 text-text-secondary",children:u.jsx("p",{children:"No history available for this item."})}):u.jsx("div",{className:"space-y-4",children:e.map(n=>{var a,s;const i=n.actionType.toUpperCase()==="UPDATE"&&((a=n.details)!=null&&a.before)&&((s=n.details)!=null&&s.after)?eBe(n.details.before,n.details.after):[];return u.jsxs("div",{className:"flex items-start p-3 bg-surface-container-high rounded-xl",children:[u.jsx("div",{className:"flex-shrink-0 mr-3 mt-1",children:u.jsx("span",{className:"flex items-center justify-center h-8 w-8 rounded-full bg-primary-container text-on-primary-container",children:u.jsx(lc,{size:16})})}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("p",{className:"text-sm font-semibold text-text-primary",children:n.userEmail||"Unknown User"}),u.jsx("p",{className:"text-sm text-text-secondary",children:r(n)}),i.length>0&&u.jsx("ul",{className:"mt-2 pl-5 list-disc space-y-1 text-sm text-text-secondary marker:text-primary/50",children:i.map((o,l)=>u.jsx("li",{children:o},l))}),u.jsxs("div",{className:"flex items-center mt-2 text-xs text-text-tertiary",children:[u.jsx(od,{size:12,className:"mr-1.5"}),u.jsx("span",{children:t(n.createdAt)})]})]})]},n.id)})})})]})},Am=e=>{if(!e)return"Sample";const t=[];return e.line&&t.push(e.line),e.style&&t.push(e.style),e.color&&t.push(e.color),t.length===0?`Sample #${e.id}`:t.join(" - ")},tBe={manufacturerId:null,supplierId:null,productType:"",style:"",line:"",sizes:[],finish:"",color:"",sampleFormat:"Loose",boardColors:"",sku:"",productUrl:"",unitCost:null,uom:"",cartonSize:null},rBe=({isOpen:e,onClose:t,sample:r})=>{var kt,ht,Rr,er;const{currentUser:n,vendors:i,sampleCheckouts:a,projects:s,customers:o,installers:l,fetchSamples:c,updateSample:d,addVendor:f,updateSampleCheckout:p,deleteSample:m,extendSampleCheckout:x,toggleSampleDiscontinued:v,sampleHistory:b,fetchSampleHistory:w}=Gr(),[k,E]=I.useState(!1),[N,P]=I.useState(null),[R,O]=I.useState(null),[D,L]=I.useState(""),[B,z]=I.useState(!1),[H,te]=I.useState(!1),[Y,W]=I.useState(!1),Z=I.useRef(null),re=I.useRef(null),[X,Q]=I.useState("checkouts"),[fe,ye]=I.useState(null),[J,ce]=I.useState(!1),[V,G]=I.useState("general"),[ie,Ee]=I.useState(!1);I.useEffect(()=>{(async()=>{try{ye(await Dx())}catch{console.error("Failed to load pricing settings.")}})()},[]);const{checkoutHistory:ne,currentCheckout:ae}=I.useMemo(()=>{if(!r)return{checkoutHistory:[],currentCheckout:null};const ct=a.filter(Lt=>Lt.sampleId===r.id).map(Lt=>{let dr="Unknown",Gt="#";if(Lt.projectId){const qe=s.find(Xe=>Xe.id===Lt.projectId);dr=qe?qe.projectName:"Unknown Project",Gt=`/projects/${Lt.projectId}`}else if(Lt.customerId){const qe=o.find(Xe=>Xe.id===Lt.customerId);dr=qe?qe.fullName:"Unknown Customer",Gt=`/customers/${Lt.customerId}`}else if(Lt.installerId){const qe=l.find(Xe=>Xe.id===Lt.installerId);dr=qe?qe.installerName:"Unknown Installer",Gt=`/installers/${Lt.installerId}`}return{...Lt,entityName:dr,entityLink:Gt}}).sort((Lt,dr)=>new Date(dr.checkoutDate).getTime()-new Date(Lt.checkoutDate).getTime()),qt=ct.find(Lt=>!Lt.actualReturnDate)||null;return{checkoutHistory:ct,currentCheckout:qt}},[r,a,s,o,l]),me=I.useMemo(()=>{if(!r)return tBe;const ct=(r.sizes||[]).map(qt=>{if(typeof qt=="string")return{value:qt,unitCost:null,cartonSize:null,uom:null};const Lt=qt;return{value:Lt.value||Lt.size||"",unitCost:Lt.unitCost,cartonSize:Lt.cartonSize,uom:Lt.uom}});return{manufacturerId:r.manufacturerId||null,supplierId:r.supplierId||null,productType:r.productType||"",style:r.style||"",line:r.line||"",sizes:ct,finish:r.finish||"",color:r.color||"",sampleFormat:r.sampleFormat||"Loose",boardColors:r.boardColors||"",sku:r.sku||"",productUrl:r.productUrl||"",unitCost:r.unitCost||null,uom:r.uom||"",cartonSize:r.cartonSize||null}},[r]);I.useEffect(()=>{e&&r&&(O(r.imageUrl?r.imageUrl:null),P(null),L(""),E(!1),Q("checkouts"),w(r.id))},[r,e,w]);const ve=ct=>{var Lt;const qt=(Lt=ct.target.files)==null?void 0:Lt[0];if(qt){P(qt);const dr=URL.createObjectURL(qt);O(dr),L("")}},q=async()=>{if(!(!D||!r)){W(!0);try{const ct=await fetch("/api/photos/from-url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:D,entityType:"sample",entityId:r.id})});if(!ct.ok)throw new Error("Failed to import from URL");const qt=await ct.json();O(qt.url),Re.success("Image imported successfully!"),P(null),await c()}catch(ct){console.error(ct),Re.error("Could not import image from URL.")}finally{W(!1)}}},Ne=async ct=>{if(r){z(!0);try{if(await d(r.id,ct),N){const qt=new FormData;if(qt.append("photo",N),qt.append("entityType","sample"),qt.append("entityId",String(r.id)),!(await fetch("/api/photos",{method:"POST",body:qt})).ok)throw new Error("Photo upload failed during edit.")}Re.success(`Sample '${Am(r)}' updated successfully!`),E(!1)}catch(qt){console.error("Error updating sample:",qt),Re.error("Failed to update sample.")}finally{z(!1)}}},Pe=async()=>{if(!r||!ae){Re.error("Could not find active checkout record to return.");return}try{await p(ae),Re.success(`'${Am(r)}' has been returned.`),t()}catch(ct){console.error("Failed to return sample:",ct),Re.error("An error occurred while returning the sample.")}},ze=async()=>{if(!r||!ae){Re.error("Could not find active checkout record to extend.");return}try{await x(ae)}catch{Re.error("An error occurred while extending the checkout.")}},De=async()=>{if(r&&window.confirm(`Are you sure you want to permanently delete "${Am(r)}"? This cannot be undone.`)){te(!0);try{await m(r.id),Re.success(`Sample "${Am(r)}" deleted.`),t()}catch(ct){console.error(ct),Re.error(ct.message||"Failed to delete sample.")}finally{te(!1)}}},$e=()=>{const ct=window.open("","_blank");ct&&re.current&&(ct.document.write("<html><head><title>Print QR Code</title>"),ct.document.write("<style>body { text-align: center; font-family: sans-serif; } img { width: 250px; height: 250px; } </style>"),ct.document.write("</head><body>"),ct.document.write(re.current.innerHTML),ct.document.write("</body></html>"),ct.document.close(),ct.print())},et=()=>{if(!r||!r.unitCost||!fe)return null;const ct=r.supplierId||r.manufacturerId,qt=i.find(qe=>qe.id===ct),Lt=gh(qt,fe,"Customer"),dr=mh(Number(r.unitCost),Lt.percentage,Lt.method),Gt=r.cartonSize?dr*Number(r.cartonSize):null;return{retailPrice:dr,cartonPrice:Gt,rules:Lt}},ut=async()=>{if(!r)return;const ct=r.isDiscontinued?"restore":"discontinue";if(confirm(`Are you sure you want to ${ct} "${Am(r)}"?`)){Ee(!0);try{await v(r.id,!r.isDiscontinued),t()}catch{}finally{Ee(!1)}}};return!e||!r?null:u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-surface-container-high p-6 md:p-10 rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-y-auto border border-outline/10",onClick:ct=>ct.stopPropagation(),children:[u.jsxs("div",{className:"flex justify-between items-start mb-6",children:[u.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:k?"Editing Sample":Am(r)}),u.jsxs("button",{onClick:k?()=>E(!1):t,className:"p-2 rounded-full hover:bg-surface-container-highest text-text-primary transition-colors",children:[" ",u.jsx(Zr,{className:"w-6 h-6"})," "]})]}),k?u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[u.jsxs("div",{className:"lg:col-span-3 space-y-4",children:[u.jsx("div",{className:"w-full aspect-square border-2 border-dashed border-outline/20 rounded-xl bg-surface-container-low flex items-center justify-center",children:R?u.jsx("img",{src:R,alt:"Sample Preview",className:"w-full h-full object-cover rounded"}):u.jsx("span",{className:"text-sm text-text-secondary",children:"No Image"})}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("input",{type:"file",accept:"image/*",ref:Z,onChange:ve,className:"hidden"}),u.jsx("button",{type:"button",onClick:()=>{var ct;return(ct=Z.current)==null?void 0:ct.click()},className:"w-full py-2 px-4 bg-secondary hover:bg-secondary-hover rounded-full text-on-secondary font-semibold",children:"Upload File..."}),u.jsx("div",{className:"text-center text-xs text-text-secondary",children:"OR"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"url",placeholder:"Paste image URL...",value:D,onChange:ct=>L(ct.target.value),className:"w-full p-2 bg-surface-container-highest border-transparent rounded-lg text-sm text-text-primary focus:ring-2 focus:ring-primary"}),u.jsx("button",{type:"button",onClick:q,disabled:!D||Y,className:"p-2 bg-primary hover:bg-primary-hover rounded-full text-on-primary disabled:opacity-50",children:Y?"...":u.jsx(JE,{size:16})})]})]})]}),u.jsxs("div",{className:"lg:col-span-9",children:[u.jsx(Rle,{initialData:me,onSave:Ne,onCancel:()=>E(!1),isSaving:B||Y,saveButtonText:"Save Changes"}),((kt=n==null?void 0:n.roles)==null?void 0:kt.includes("Admin"))&&u.jsx("div",{className:"mt-6 pt-6 border-t border-outline/10 flex justify-end",children:u.jsxs("button",{type:"button",onClick:De,className:"py-2 px-6 bg-error-container hover:bg-error/20 text-error rounded-full font-semibold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:H,children:[u.jsx(mo,{size:16}),H?"Deleting...":"Delete Sample"]})})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[u.jsx("div",{className:"lg:col-span-3 space-y-4",children:u.jsx("div",{className:"w-full aspect-square border-2 border-dashed border-outline/10 rounded-xl bg-surface-container-low flex items-center justify-center overflow-hidden",children:R?u.jsx("img",{src:R,alt:"Sample Preview",className:"w-full h-full object-cover"}):u.jsx("span",{className:"text-sm text-text-secondary",children:"No Image"})})}),u.jsx("div",{className:"lg:col-span-6 space-y-4",children:u.jsxs("div",{className:"space-y-3 text-text-secondary",children:[u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Manufacturer:"})," ",r.manufacturerName||"N/A"]}),r.supplierId!==r.manufacturerId&&r.supplierName&&u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Supplier:"})," ",r.supplierName]}),u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Product Type:"})," ",r.productType]}),u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Style:"})," ",r.style]}),r.color&&u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Color:"})," ",r.color]}),r.line&&u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Line:"})," ",r.line]}),r.sizes&&r.sizes.length>0&&u.jsxs("div",{className:"mt-2",children:[u.jsx("p",{className:"font-bold text-text-primary mb-1",children:"Available Sizes:"}),u.jsx("ul",{className:"space-y-1 bg-surface-container-low p-3 rounded-xl border border-outline/10",children:r.sizes.map((ct,qt)=>{var qe;const Lt=typeof ct=="string",dr=Lt?ct:ct.value||ct.size||"Unknown Size";let Gt=null;if(!Lt&&ct.unitCost&&fe){const Xe=r.supplierId||r.manufacturerId,Te=i.find(Ce=>Ce.id===Xe),He=gh(Te,fe,"Customer"),je=mh(Number(ct.unitCost),He.percentage,He.method);Gt=Um(je)}else(qe=et())!=null&&qe.retailPrice&&(Gt=Um(et().retailPrice));return u.jsxs("li",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"font-medium text-text-primary",children:dr}),Gt&&u.jsxs("span",{className:"text-success font-bold",children:[Gt," ",u.jsxs("span",{className:"text-xs text-text-secondary font-normal",children:["/ ",!Lt&&ct.uom?ct.uom:r.uom]})]})]},qt)})})]}),r.finish&&u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Finish:"})," ",r.finish]}),r.productType==="Tile"&&r.sampleFormat&&u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Format:"})," ",r.sampleFormat," Sample"]}),r.productType==="Tile"&&r.sampleFormat==="Board"&&r.boardColors&&u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Board Colors:"})," ",r.boardColors]}),(r.unitCost||r.cartonSize)&&u.jsxs("div",{className:"mt-2 p-4 bg-surface-container-low rounded-xl border border-outline/10",children:[u.jsx("h5",{className:"text-sm font-semibold text-text-primary border-b border-outline/10 pb-2 mb-2",children:"Pricing & Packaging"}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-sm",children:[r.unitCost!==null&&r.unitCost!==void 0&&u.jsxs("p",{className:"text-text-secondary",children:[u.jsx("strong",{className:"text-text-primary",children:"Cost:"})," ",Um(r.unitCost)," / ",r.uom]}),fe&&((ht=et())==null?void 0:ht.retailPrice)&&u.jsxs("p",{className:"text-success font-bold",children:["Retail: ",Um(et().retailPrice)," / ",r.uom]}),r.cartonSize!==null&&r.cartonSize!==void 0&&u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Carton:"})," ",r.cartonSize," ",r.uom]}),fe&&((Rr=et())==null?void 0:Rr.cartonPrice)&&u.jsxs("p",{className:"col-span-2 mt-2 pt-2 border-t border-outline/10 text-success font-medium",children:["Retail per Carton: ",Um(et().cartonPrice)]})]})]}),u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"SKU:"})," ",r.sku||"N/A"]}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx("strong",{className:"text-text-primary",children:"Product Link:"})," ",r.productUrl?u.jsxs("a",{href:r.productUrl,target:"_blank",rel:"noopener noreferrer",className:"text-accent hover:underline flex items-center",children:["Visit Site ",u.jsx(Fx,{size:14,className:"ml-1"})]}):"N/A"]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-outline/10",children:[u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx("strong",{className:"text-text-primary",children:"Status:"})," ",u.jsx("span",{className:`font-bold px-3 py-1 rounded-full text-xs ${r.isAvailable?"bg-success-container text-success":"bg-warning-container text-warning"}`,children:r.isAvailable?"Available":"Checked Out"})]}),r.isDiscontinued&&u.jsxs("p",{className:"mt-2 flex items-center gap-2",children:[u.jsx("strong",{className:"text-text-primary",children:"Archived Status:"})," ",u.jsx("span",{className:"font-bold px-3 py-1 rounded-full text-xs bg-error-container text-error",children:"Discontinued"})]})]})]})}),u.jsx("div",{className:"lg:col-span-3 space-y-4",children:u.jsxs("div",{className:"bg-surface-container-low p-6 rounded-xl text-center border border-outline/10",children:[u.jsxs("h4",{className:"font-semibold text-text-primary mb-2 flex items-center justify-center gap-2",children:[u.jsx(ZA,{})," Sample QR Code"]}),u.jsxs("div",{ref:re,children:[u.jsx("img",{src:`/api/samples/${r.id}/qr`,alt:"Sample QR Code",className:"w-48 h-48 mx-auto bg-white p-2 rounded-md"}),u.jsxs("p",{className:"text-xs text-text-secondary mt-2 font-mono",children:["ID: ",r.id]}),u.jsx("p",{className:"text-sm font-semibold mt-1 text-text-primary",children:Am(r)})]}),u.jsxs("button",{type:"button",onClick:$e,className:"mt-4 w-full flex items-center justify-center gap-2 py-2 px-6 bg-secondary hover:bg-secondary-hover rounded-full text-on-secondary font-semibold",children:[u.jsx(ay,{size:16}),"Print"]})]})})]}),u.jsxs("div",{className:"mt-8 border-t border-outline/10 pt-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("div",{className:"flex items-center",children:u.jsx("h3",{className:"text-xl font-semibold text-text-primary flex items-center",children:X==="checkouts"?u.jsxs(u.Fragment,{children:[u.jsx(xu,{className:"w-6 h-6 mr-2 text-accent"})," Checkout History"]}):u.jsxs(u.Fragment,{children:[u.jsx(Mx,{className:"w-6 h-6 mr-2 text-accent"})," Change History"]})})}),u.jsx("button",{type:"button",onClick:()=>Q(ct=>ct==="checkouts"?"changes":"checkouts"),className:"text-sm text-accent hover:underline",children:X==="checkouts"?"Show Change History":"Show Checkout History"})]}),u.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto pr-2",children:X==="checkouts"?ne.length>0?ne.map(ct=>u.jsxs("li",{className:"bg-surface-container-low p-3 rounded-xl flex justify-between items-center list-none border border-outline/5",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-semibold text-text-primary",children:["Checked out to ",u.jsx(ai,{to:ct.entityLink,className:"text-accent hover:underline",children:ct.entityName})]}),u.jsxs("p",{className:"text-xs text-text-secondary",children:[new Date(ct.checkoutDate).toLocaleDateString()," ",u.jsx(f8e,{className:"inline w-4 h-4 mx-1"})," ",ct.actualReturnDate?new Date(ct.actualReturnDate).toLocaleDateString():"Present"]})]}),u.jsx("span",{className:`px-3 py-1 text-xs rounded-full font-bold ${ct.actualReturnDate?"bg-surface-container text-text-secondary":"bg-warning-container text-warning"}`,children:ct.actualReturnDate?"Returned":"Active"})]},ct.id)):u.jsx("p",{className:"text-text-secondary text-center py-4",children:"No checkout history for this sample."}):u.jsx(ub,{history:b})})]}),u.jsxs("div",{className:"flex justify-end gap-4 mt-8 border-t border-outline/10 pt-6",children:[((er=n==null?void 0:n.roles)==null?void 0:er.includes("Admin"))&&!k&&u.jsx("div",{className:"mr-auto",children:u.jsxs("button",{type:"button",onClick:ut,disabled:ie||!r.isAvailable&&!r.isDiscontinued,className:`flex items-center py-2 px-6 rounded-full font-semibold transition-colors ${r.isDiscontinued?"bg-success-container text-success hover:bg-success/20":"bg-warning-container text-warning hover:bg-warning/20"}`,children:[u.jsx(cS,{className:"w-4 h-4 mr-2"})," ",r.isDiscontinued?"Restore Sample":"Discontinue Sample"]})}),!k&&u.jsxs("div",{className:"flex items-center gap-4",children:[!r.isAvailable&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{type:"button",onClick:ze,className:"flex items-center py-2 px-6 bg-primary-container hover:bg-primary text-primary hover:text-on-primary font-medium rounded-full transition-colors",children:[u.jsx(od,{className:"w-4 h-4 mr-2"})," Extend"]}),u.jsxs("button",{type:"button",onClick:Pe,className:"flex items-center py-2 px-6 bg-secondary hover:bg-secondary-hover text-on-secondary font-medium rounded-full shadow-sm transition-colors",children:[u.jsx(T7,{className:"w-4 h-4 mr-2"})," Return Sample"]})]}),u.jsx("button",{type:"button",onClick:t,className:"py-2 px-6 bg-surface hover:bg-surface-container-highest border border-outline/20 text-text-secondary rounded-full font-medium transition-colors",children:"Close"}),u.jsxs("button",{type:"button",onClick:()=>E(!0),className:"flex items-center py-2 px-6 bg-primary hover:bg-primary-hover rounded-full text-on-primary font-semibold shadow-md transition-all",children:[u.jsx(Xh,{className:"w-4 h-4 mr-2"})," Edit Sample"]})]})]})]})]})}),u.jsx(cb,{isOpen:J,onClose:()=>ce(!1),onSave:f,initialVendorType:V})]})},nBe=()=>{const{data:e=[]}=Kh(),{data:t=[]}=KE(),{data:r=[]}=S4(),{samples:n}=Gr(),[i,a]=I.useState("Recap"),[s,o]=I.useState(!0),[l,c]=I.useState(!1),[d,f]=I.useState(null),p=(E,N)=>{const P=E.createdAt?new Date(E.createdAt).getTime():0,R=N.createdAt?new Date(N.createdAt).getTime():0;return(isNaN(R)?0:R)-(isNaN(P)?0:P)},m=I.useMemo(()=>t.filter(E=>!E.actualReturnDate).sort((E,N)=>new Date(E.expectedReturnDate).getTime()-new Date(N.expectedReturnDate).getTime()),[t]),x=I.useMemo(()=>{const E=new Date;E.setHours(0,0,0,0);const N=new Date(E);return N.setDate(E.getDate()+5),r.filter(P=>{if(P.status!=="Ordered"&&P.status!=="Damage Replacement"||!P.etaDate)return!1;const R=P.etaDate.includes("T")?P.etaDate.split("T")[0]:P.etaDate;return new Date(`${R}T00:00:00`)<=N}).sort((P,R)=>{const O=P.etaDate&&P.etaDate.includes("T")?P.etaDate.split("T")[0]:P.etaDate,D=R.etaDate&&R.etaDate.includes("T")?R.etaDate.split("T")[0]:R.etaDate;return new Date(O).getTime()-new Date(D).getTime()})},[r]),v=I.useMemo(()=>{const E={[sr.QUOTING]:1,[sr.ACCEPTED]:2,[sr.SCHEDULED]:3};return e.filter(N=>N.status===sr.QUOTING||N.status===sr.ACCEPTED||N.status===sr.SCHEDULED).sort((N,P)=>{const R=E[N.status],O=E[P.status];return R!==O?R-O:p(N,P)})},[e]),b=I.useMemo(()=>{if(i===sr.CANCELLED)return e.filter(N=>N.status===sr.CANCELLED).sort(p);if(i===sr.COMPLETED)return e.filter(N=>N.status===sr.COMPLETED).sort(p);const E=e.filter(N=>![sr.COMPLETED,sr.CLOSED,sr.CANCELLED].includes(N.status)).sort(p);return i==="All"?E:E.filter(N=>N.status===i)},[e,i]),w=["Recap","All",sr.NEW,sr.SAMPLE_CHECKOUT,sr.AWAITING_DECISION,sr.QUOTING,sr.ACCEPTED,sr.SCHEDULED,sr.COMPLETED,sr.CANCELLED],k=E=>{const N=n.find(P=>{var R;return P.id===parseInt(E.id)||P.sku===((R=E.variants[0])==null?void 0:R.sku)});N&&f(N)};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 px-1",children:[u.jsx("h1",{className:"text-4xl font-bold text-text-primary tracking-tight",children:"Dashboard"}),u.jsxs("button",{onClick:()=>c(!0),className:"bg-primary hover:bg-primary-hover text-on-primary font-semibold py-3 px-6 rounded-full transition-all shadow-lg hover:shadow-xl flex items-center gap-2",children:[u.jsx(j8e,{size:20}),"New Checkout"]})]}),u.jsxs("div",{className:"flex items-center space-x-2 overflow-x-auto pb-2 px-1 no-scrollbar after:content-[''] after:min-w-[1rem]",children:[u.jsx("button",{onClick:()=>o(!s),className:"flex items-center space-x-2 p-2 rounded-full hover:bg-surface-container-high transition-colors cursor-pointer mr-2 text-text-secondary",children:u.jsx(J6,{className:"w-5 h-5 flex-shrink-0"})}),s&&u.jsx("div",{className:"flex space-x-2",children:w.map(E=>u.jsx("button",{onClick:()=>a(E),className:`px-4 py-2 text-sm rounded-full transition-colors flex-shrink-0 font-medium border ${i===E?"bg-primary-container text-on-primary-container border-transparent":"bg-surface text-text-secondary border-outline hover:bg-surface-container-high"}`,children:E},E))})]}),u.jsx("div",{children:i==="Recap"?u.jsxs("div",{children:[u.jsx(Dle,{title:"Active Sample Checkouts",checkouts:m,onItemClick:k}),u.jsx(X9e,{title:"Upcoming Deliveries (Next 5 Days)",orders:x,projects:e}),u.jsx(fT,{title:"Active Pipeline",projects:v})]}):u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-semibold mb-4 text-text-primary",children:["Projects: ",i]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.length>0?b.map(E=>u.jsx(ai,{to:`/projects/${E.id}`,children:u.jsx(fT,{title:"",projects:[E]})},E.id)):u.jsxs("p",{className:"text-text-secondary col-span-full text-center py-8",children:['No projects match the filter "',i,'".']})})]})}),u.jsx(z9e,{isOpen:l,onClose:()=>c(!1)}),u.jsx(rBe,{isOpen:!!d,onClose:()=>f(null),sample:d})]})},iBe=({currentBuild:e,requiredBuild:t,downloadUrl:r})=>u.jsx(Ju,{children:u.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-scrim/80 backdrop-blur-sm",children:u.jsxs("div",{className:"bg-surface-container-high w-full max-w-md rounded-2xl p-8 shadow-2xl border border-error-container text-center animate-in zoom-in-95 duration-200",children:[u.jsx("div",{className:"mx-auto w-16 h-16 bg-error-container rounded-full flex items-center justify-center mb-6",children:u.jsx(ld,{className:"w-8 h-8 text-on-error-container"})}),u.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"Update Required"}),u.jsx("p",{className:"text-text-secondary mb-6 leading-relaxed",children:"This version of the app is outdated and no longer supported by the server. Please download the latest version to continue."}),u.jsxs("div",{className:"bg-surface-container rounded-xl p-4 mb-8 text-sm text-text-secondary border border-outline/20",children:[u.jsxs("div",{className:"flex justify-between mb-1",children:[u.jsx("span",{children:"Your Build:"}),u.jsx("span",{className:"font-mono text-error",children:e})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Required:"}),u.jsxs("span",{className:"font-mono text-tertiary",children:[t,"+"]})]})]}),u.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full py-3 bg-primary hover:bg-primary-hover text-on-primary rounded-full font-semibold transition-transform active:scale-95 shadow-md",children:[u.jsx(dS,{size:20}),"Download Update"]})]})})}),aBe="Flooring Job Tracker",sBe="A web-based job management application for a flooring store to track a customer's journey from initial sample checkout through quoting, scheduling, and final job closure.",oBe=[],lBe="2.00",cBe=2,uBe=2,dBe="https://github.com/adampdxdotcom/subfloor/releases/download/Android/subfloor-2.00.apk",fBe="https://subfloor.app/update",hBe=!1,UG={name:aBe,description:sBe,requestFramePermissions:oBe,version:lBe,mobileBuild:cBe,minMobileBuild:uBe,apkDownloadUrl:dBe,releaseNotesUrl:fBe,critical:hBe},pBe=()=>{const[e,t]=I.useState(null);return I.useEffect(()=>{const r=async()=>{var i;try{const a=await fetch(rr("/api/system/info"));if(!a.ok)return;const s=await a.json();if((i=window.Capacitor)==null?void 0:i.isNativePlatform()){const l=await QA.getInfo(),c=parseInt(l.build||"0",10),d=parseInt(s.minMobileBuild||"0",10);if(c<d){console.warn(` Force Update Triggered: Build ${c} < ${d}`),t({current:c,required:d,url:s.apkDownloadUrl||"https://github.com"});return}}s.version&&s.version!==UG.version&&qr(l=>u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsxs("span",{className:"font-semibold",children:["New update available!",u.jsxs("span",{className:"block text-xs font-normal opacity-75",children:["v",UG.version,"  v",s.version]})]}),u.jsx("button",{onClick:()=>window.location.reload(),className:"bg-primary text-white px-3 py-1.5 rounded text-sm hover:bg-primary-hover transition-colors",children:"Refresh to Update"})]}),{id:"version-update-toast",duration:1/0,position:"bottom-right",icon:"",style:{border:"1px solid #3b82f6",padding:"16px"}})}catch(a){console.warn("Failed to check version:",a)}};r();const n=setInterval(r,15*60*1e3);return()=>clearInterval(n)},[]),e?u.jsx(iBe,{currentBuild:e.current,requiredBuild:e.required,downloadUrl:e.url}):null},mBe=(e,t)=>{if(!e)return"Not Scheduled";const r=new Date(e);if(!t||r.toDateString()===new Date(t).toDateString())return r.toLocaleDateString("en-US",{month:"short",day:"numeric"});const n=new Date(t),i=r.toLocaleString("default",{month:"short"}),a=r.getDate(),s=n.getDate();return`${i} ${a} - ${s}`},gBe=()=>{const{data:e=[]}=Rx(),{data:t=[]}=Kh(),{data:r=[]}=KE(),[n,i]=I.useState(""),[a,s]=I.useState(!1),o=I.useMemo(()=>{const d=new Set;return r.forEach(f=>{f.actualReturnDate===null&&d.add(f.projectId)}),t.filter(f=>d.has(f.id)).sort((f,p)=>{const m=Math.min(...r.filter(v=>v.projectId===f.id&&!v.actualReturnDate).map(v=>new Date(v.expectedReturnDate).getTime())),x=Math.min(...r.filter(v=>v.projectId===p.id&&!v.actualReturnDate).map(v=>new Date(p.expectedReturnDate).getTime()));return m-x})},[t,r]),l=I.useMemo(()=>{const d={[sr.QUOTING]:1,[sr.ACCEPTED]:2,[sr.SCHEDULED]:3};return t.filter(f=>f.status===sr.QUOTING||f.status===sr.ACCEPTED||f.status===sr.SCHEDULED).sort((f,p)=>{const m=d[f.status],x=d[p.status];if(m!==x)return m-x;const v=f.createdAt?new Date(f.createdAt).getTime():0,b=p.createdAt?new Date(p.createdAt).getTime():0;return(isNaN(b)?0:b)-(isNaN(v)?0:v)})},[t]),c=I.useMemo(()=>{if(!e)return[];const d=n.toLowerCase();return e.filter(f=>{var x,v;const p=(((x=f.fullName)==null?void 0:x.toLowerCase())??"").includes(d),m=(((v=f.email)==null?void 0:v.toLowerCase())??"").includes(d);return p||m}).sort((f,p)=>f.fullName.localeCompare(p.fullName))},[e,n]);return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 px-1",children:[u.jsx("h1",{className:"text-4xl font-bold text-text-primary tracking-tight",children:"Customers"}),u.jsxs("button",{onClick:()=>s(!0),className:"flex items-center justify-center bg-primary hover:bg-primary-hover text-on-primary font-semibold py-3 px-6 rounded-full transition-all shadow-lg hover:shadow-xl md:w-auto w-full",children:[u.jsx(su,{className:"w-5 h-5 mr-2"}),"Add Customer"]})]}),u.jsxs("div",{className:"relative w-full max-w-2xl",children:[u.jsx(Wo,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-secondary",size:20}),u.jsx("input",{type:"text",placeholder:"Search customers...",value:n,onChange:d=>i(d.target.value),className:"w-full pl-12 pr-6 py-4 bg-surface-container-high border-none rounded-full text-text-primary focus:ring-2 focus:ring-primary/50 outline-none transition-shadow shadow-sm hover:shadow-md placeholder:text-text-tertiary"})]}),n===""&&u.jsxs(u.Fragment,{children:[u.jsx(fT,{title:"Projects with Samples Out",projects:o}),u.jsx(fT,{title:"Projects in Active Pipeline",projects:l}),u.jsx("div",{className:"border-t border-outline/10 my-8"}),u.jsx("h2",{className:"text-2xl font-semibold mb-6 text-text-primary pl-1",children:"All Customers"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[c.map(d=>u.jsxs(ai,{to:`/customers/${d.id}`,className:"block bg-surface-container-high p-6 rounded-xl shadow-sm border border-outline/10 hover:shadow-md hover:-translate-y-1 transition-all duration-300 group",children:[u.jsxs("div",{className:"flex items-center mb-4",children:[u.jsx("div",{className:"w-12 h-12 bg-primary-container rounded-full flex items-center justify-center mr-4 shrink-0 text-primary",children:u.jsx(lc,{className:"w-6 h-6"})}),u.jsx("div",{children:u.jsx("h2",{className:"text-xl font-bold text-text-primary truncate",children:d.fullName})})]}),u.jsxs("div",{className:"space-y-2 text-sm text-text-secondary",children:[u.jsxs("p",{className:"flex items-center",children:[u.jsx(Xc,{className:"w-4 h-4 mr-3 shrink-0 opacity-70"})," ",u.jsx("span",{className:"truncate",children:d.email||"N/A"})]}),u.jsxs("p",{className:"flex items-center",children:[u.jsx(y0,{className:"w-4 h-4 mr-3 shrink-0 opacity-70"})," ",u.jsx("span",{className:"truncate",children:d.phoneNumber||"N/A"})]}),u.jsxs("p",{className:"flex items-center",children:[u.jsx(T4,{className:"w-4 h-4 mr-3 shrink-0 opacity-70"})," ",u.jsx("span",{className:"truncate",children:d.address||"N/A"})]})]}),d.jobs&&d.jobs.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"border-t border-outline/10 my-4"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h3",{className:"text-sm font-semibold text-text-secondary flex items-center mb-2",children:[u.jsx(Rh,{className:"w-4 h-4 mr-2"}),"Scheduled Jobs"]}),d.jobs.map(f=>u.jsxs("div",{className:"text-xs text-text-secondary grid grid-cols-3 gap-2 items-center",children:[u.jsx("span",{className:"col-span-1 truncate font-medium text-text-primary",children:f.projectName}),u.jsxs("span",{className:"col-span-1 truncate text-center",children:["(",f.installerName||"N/A",")"]}),u.jsx("span",{className:"col-span-1 truncate text-right",children:mBe(f.scheduledStartDate,f.scheduledEndDate)})]},f.projectId))]})]})]},d.id)),n!==""&&c.length===0&&u.jsx("p",{className:"text-text-secondary col-span-full text-center py-8",children:"No customers match your search."})]}),u.jsx(O7,{isOpen:a,onClose:()=>s(!1),customer:null})]})},q7=({title:e,icon:t,actions:r,children:n,defaultOpen:i=!0})=>{const[a,s]=I.useState(i);return u.jsxs("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10",children:[u.jsxs("div",{className:"flex justify-between items-center p-4 cursor-pointer hover:bg-surface-container-highest/50 transition-colors",onClick:()=>s(!a),children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{className:"text-primary mr-4",children:t}),u.jsx("h2",{className:"text-lg font-bold text-text-primary",children:e})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{onClick:o=>o.stopPropagation(),children:r}),u.jsx(us,{className:`w-6 h-6 text-text-secondary transition-transform duration-300 ${a?"rotate-180":""}`})]})]}),u.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${a?"max-h-[2000px]":"max-h-0"}`,children:u.jsx("div",{className:"px-4 pb-4 pt-2 border-t border-outline/10",children:n})})]})},Mle=({sample:e,onStartProject:t})=>{const r=e,n=r.interestVariantThumbnail||r.productThumbnail,i=r.interestVariantName?`${r.interestVariantName} (${r.productName})`:r.productName||`Sample #${e.id}`;return u.jsxs("div",{className:"bg-surface-container-high p-4 rounded-xl shadow-sm border border-outline/10 flex gap-4 transition-all hover:shadow-md relative group",children:[u.jsxs("div",{className:"w-20 h-20 bg-surface-container-low rounded-lg border border-outline/10 flex items-center justify-center shrink-0 overflow-hidden relative",children:[n?u.jsx("img",{src:Ia(n),alt:i,className:"w-full h-full object-cover"}):u.jsx(pd,{className:"text-text-tertiary w-8 h-8"}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-[10px] text-center py-0.5 truncate",children:e.sampleType||"Sample"})]}),u.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-between py-0.5",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-text-primary text-sm line-clamp-2",title:i,children:i}),u.jsxs("div",{className:"flex items-center gap-1 mt-1.5 text-xs text-text-secondary",children:[u.jsx(xu,{size:12}),u.jsx("span",{children:rf(e.checkoutDate)})]})]}),u.jsx("div",{className:"mt-2",children:e.projectId?u.jsxs("div",{className:"flex items-center gap-1 text-xs text-success font-bold bg-success-container px-3 py-1 rounded-full w-fit",children:[u.jsx(jh,{size:12}),u.jsx("span",{children:"Linked to Project"})]}):u.jsxs("button",{onClick:a=>{a.preventDefault(),t(e)},className:"text-xs font-bold text-on-primary bg-primary hover:bg-primary-hover px-4 py-2 rounded-full flex items-center gap-1 transition-colors shadow-sm",children:["Start Project ",u.jsx(K0,{size:12})]})})]})]})},Fle=({isOpen:e,onClose:t,initialCustomer:r,initialInstaller:n,initialProjectName:i,transferSampleId:a})=>{const s=pu(),{data:o=[]}=gf(),{createProject:l}=Fse(),{createInstaller:c}=b7(),{createCustomer:d}=Mse(),[f,p]=I.useState("SELECT_CUSTOMER"),[m,x]=I.useState(null),[v,b]=I.useState(""),[w,k]=I.useState(yv[0]),[E,N]=I.useState(null),[P,R]=I.useState(""),[O,D]=I.useState(!1),[L,B]=I.useState({installerName:"",contactEmail:"",contactPhone:""}),[z,H]=I.useState(""),[te,Y]=I.useState(""),[W,Z]=I.useState("");I.useEffect(()=>{e&&(r?(x(r),p("CREATE_PROJECT")):(x(null),p("SELECT_CUSTOMER")),N(n||null),R((n==null?void 0:n.installerName)||""),b(i||""),k(yv[0]),H(""),Y(""),Z(""))},[e,r,n,i]);const re=J=>{x(J),p("CREATE_PROJECT")},X=J=>{H(J),p("CREATE_CUSTOMER")},Q=async J=>{J.preventDefault();try{const ce=await d.mutateAsync({fullName:z,email:te||void 0,phoneNumber:W||void 0});x(ce),p("CREATE_PROJECT"),Re.success("Customer created!")}catch{Re.error("Failed to create customer.")}},fe=async J=>{if(J.preventDefault(),!!m){if(!v){Re.error("Project name is required.");return}try{const ce={projectName:v,projectType:w,customerId:m.id,status:"New",finalChoice:null,installerId:E?E.id:void 0},V=await l.mutateAsync(ce);a&&await Yse([a],V.id),Re.success("Project created successfully!"),t(),s(`/projects/${V.id}`)}catch(ce){console.error(ce),Re.error("Failed to create project.")}}},ye=async J=>{J.preventDefault();try{const ce=await c.mutateAsync(L);N(ce),R(ce.installerName),D(!1)}catch{Re.error("Failed to add installer.")}};return e?u.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-2xl shadow-2xl w-full max-w-xl border border-outline/20 relative",children:[u.jsxs("div",{className:"flex items-center mb-6",children:[f!=="SELECT_CUSTOMER"&&u.jsx("button",{onClick:()=>p("SELECT_CUSTOMER"),className:"text-text-secondary hover:text-text-primary p-2 rounded-full hover:bg-surface-container-highest mr-2",children:u.jsx(id,{size:20})}),u.jsx("h2",{className:"text-2xl font-bold text-text-primary flex-grow",children:f==="CREATE_CUSTOMER"?"New Customer":"Start New Project"}),u.jsx("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-2 rounded-full hover:bg-surface-container-highest",children:u.jsx(Zr,{size:20})})]}),f==="SELECT_CUSTOMER"&&u.jsxs("div",{children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1.5",children:"Select Customer"}),u.jsx(Soe,{onCustomerSelect:re,onRequestNewCustomer:X})]}),u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{onClick:t,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors",children:"Cancel"})})]}),f==="CREATE_CUSTOMER"&&u.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[u.jsx("input",{type:"text",placeholder:"Full Name",value:z,onChange:J=>H(J.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",required:!0}),u.jsx("input",{type:"email",placeholder:"Email (Optional)",value:te,onChange:J=>Y(J.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"}),u.jsx("input",{type:"tel",placeholder:"Phone (Optional)",value:W,onChange:J=>Z(J.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"}),u.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[u.jsx("button",{type:"button",onClick:()=>p("SELECT_CUSTOMER"),className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors",children:"Back"}),u.jsx("button",{type:"submit",className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all",children:"Save & Continue"})]})]}),f==="CREATE_PROJECT"&&m&&u.jsxs("form",{onSubmit:fe,className:"space-y-4",children:[!r&&u.jsxs("div",{className:"flex justify-between items-center bg-surface-container p-3 rounded-lg border border-outline/20 text-sm",children:[u.jsx("span",{className:"text-text-primary font-bold",children:m.fullName}),u.jsx("button",{type:"button",onClick:()=>{x(null),p("SELECT_CUSTOMER")},className:"text-primary hover:underline font-medium",children:"Change"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Project Name"}),u.jsx("input",{type:"text",value:v,onChange:J=>b(J.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Project Type"}),u.jsx("select",{value:w,onChange:J=>k(J.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",children:yv.map(J=>u.jsx("option",{value:J,children:J},J))})]}),O?u.jsxs("div",{className:"bg-surface-container p-4 rounded-lg border border-outline/20",children:[u.jsx("h4",{className:"font-semibold text-md mb-3 text-text-primary",children:"New Installer"}),u.jsx("input",{type:"text",placeholder:"Name",value:L.installerName,onChange:J=>B({...L,installerName:J.target.value}),className:"w-full bg-surface-container-low border border-outline/50 rounded-lg px-3 py-2 mb-2 text-sm text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"button",onClick:()=>D(!1),className:"flex-1 py-1.5 px-4 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest text-xs font-medium",children:"Cancel"}),u.jsx("button",{type:"button",onClick:ye,className:"flex-1 py-1.5 px-4 rounded-full bg-primary text-on-primary text-xs font-semibold",children:"Save"})]})]}):u.jsxs("div",{className:"relative",children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Installer (Optional)"}),u.jsx("input",{type:"text",placeholder:"Search installers...",value:P,onChange:J=>{R(J.target.value),N(null)},className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",disabled:!!n}),P&&!E&&!n&&u.jsxs("div",{className:"absolute z-10 w-full bg-surface-container-high border border-outline/20 rounded-lg mt-1 max-h-48 overflow-y-auto shadow-xl",children:[o.filter(J=>J.installerName.toLowerCase().includes(P.toLowerCase())).map(J=>u.jsx("div",{onClick:()=>{N(J),R(J.installerName)},className:"px-4 py-2 hover:bg-primary-container/30 cursor-pointer text-text-primary",children:J.installerName},J.id)),u.jsxs("div",{className:"p-2 border-t border-outline/20 text-center text-primary text-sm cursor-pointer hover:bg-primary-container/30 font-medium",onClick:()=>{B(J=>({...J,installerName:P})),D(!0)},children:['+ Add New "',P,'"']})]})]}),u.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[u.jsx("button",{type:"button",onClick:t,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors",children:"Cancel"}),u.jsx("button",{type:"submit",className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all",children:"Create & Transfer"})]})]})]})}):null},xBe=()=>{const{customerId:e}=wx(),{customers:t,projects:r,fetchCustomerHistory:n,customerHistory:i,systemBranding:a}=Gr();pu();const[s,o]=I.useState(!1),[l,c]=I.useState(null),[d,f]=I.useState(""),[p,m]=I.useState([]),[x,v]=I.useState(!1),b=t.find(E=>E.id===parseInt(e||"")),w=r.filter(E=>E.customerId===(b==null?void 0:b.id));if(I.useEffect(()=>{if(e){const E=parseInt(e);n(E),d6e(E).then(m).catch(console.error)}},[e,n]),!b)return u.jsx("div",{className:"text-center text-text-secondary",children:"Customer not found."});const k=E=>{const N=E.productName||"Flooring";f(`${N} Project`),c(E.id),o(!0)};return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-surface-container-high p-8 rounded-xl shadow-sm border border-outline/10",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start",children:[u.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[u.jsx("div",{className:"w-16 h-16 bg-primary-container rounded-full flex items-center justify-center mr-6 text-primary",children:u.jsx(lc,{className:"w-8 h-8"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:b.fullName}),u.jsxs("p",{className:"text-text-secondary",children:["Customer since ",rf(b.createdAt,a==null?void 0:a.systemTimezone)]})]})]}),u.jsxs("button",{onClick:()=>v(!0),className:"flex items-center bg-surface-container-highest hover:bg-surface-container border border-outline/20 text-text-primary font-medium py-2 px-4 rounded-lg transition-colors",children:[u.jsx(Xh,{className:"w-4 h-4 mr-2"}),"Edit Customer"]})]}),u.jsx("div",{className:"border-t border-outline/10 my-6"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-text-secondary",children:[u.jsxs("p",{className:"flex items-center",children:[u.jsx(Xc,{className:"w-5 h-5 mr-3 text-primary opacity-80"})," ",b.email]}),u.jsxs("p",{className:"flex items-center",children:[u.jsx(y0,{className:"w-5 h-5 mr-3 text-primary opacity-80"})," ",b.phoneNumber]}),u.jsxs("p",{className:"flex items-center col-span-full",children:[u.jsx(T4,{className:"w-5 h-5 mr-3 text-primary opacity-80"})," ",b.address]})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h2",{className:"text-2xl font-bold text-text-primary flex items-center gap-3",children:[u.jsx(Rh,{className:"w-6 h-6"})," Projects"]}),u.jsxs("button",{onClick:()=>{f(""),c(null),o(!0)},className:"flex items-center bg-primary hover:bg-primary-hover text-on-primary font-semibold py-2 px-4 rounded-full shadow-md transition-colors",children:[u.jsx(su,{className:"w-5 h-5 mr-2"}),"New Project"]})]}),u.jsx("div",{className:"space-y-4",children:w.length>0?w.map(E=>u.jsxs(ai,{to:`/projects/${E.id}`,className:"flex justify-between items-center bg-surface-container-high p-5 rounded-xl border border-outline/10 shadow-sm hover:shadow-md hover:bg-surface-container-highest transition-all group",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-lg text-text-primary",children:E.projectName}),u.jsxs("p",{className:"text-sm text-text-secondary flex items-center gap-2 mt-1",children:[u.jsx("span",{className:`w-2 h-2 rounded-full ${E.status==="Completed"?"bg-success":"bg-primary"}`}),E.status]})]}),u.jsx(sd,{className:"w-6 h-6 text-text-secondary group-hover:text-primary transition-colors"})]},E.id)):u.jsx("p",{className:"text-center text-text-secondary py-4",children:"No projects for this customer yet."})})]}),u.jsxs("div",{children:[u.jsx("div",{className:"flex justify-between items-center mb-6",children:u.jsxs("h2",{className:"text-2xl font-bold text-text-primary flex items-center gap-3",children:[u.jsx(pd,{className:"w-6 h-6"})," Sample History"]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[p.map(E=>u.jsx(Mle,{sample:E,onStartProject:k},E.id)),p.length===0&&u.jsx("p",{className:"col-span-full text-center text-text-secondary py-4",children:"No sample history found."})]})]}),u.jsx("div",{children:u.jsx(q7,{title:"Change History",icon:u.jsx(Mx,{className:"w-6 h-6"}),defaultOpen:!1,children:u.jsx(ub,{history:i})})}),u.jsx(Fle,{isOpen:s,onClose:()=>{o(!1),c(null),f("")},initialCustomer:b,initialProjectName:d,transferSampleId:l}),u.jsx(O7,{isOpen:x,onClose:()=>v(!1),customer:b})]})};var Lle={exports:{}},nC={},p8={exports:{}};(function(e,t){(function(r,n){n(t)})(Ve,function(r){function n(ne){return function(me,ve,q,Ne,Pe,ze,De){return ne(me,ve,De)}}function i(ne){return function(me,ve,q,Ne){if(!me||!ve||typeof me!="object"||typeof ve!="object")return ne(me,ve,q,Ne);var Pe=Ne.get(me),ze=Ne.get(ve);if(Pe&&ze)return Pe===ve&&ze===me;Ne.set(me,ve),Ne.set(ve,me);var De=ne(me,ve,q,Ne);return Ne.delete(me),Ne.delete(ve),De}}function a(ne,ae){var me={};for(var ve in ne)me[ve]=ne[ve];for(var ve in ae)me[ve]=ae[ve];return me}function s(ne){return ne.constructor===Object||ne.constructor==null}function o(ne){return typeof ne.then=="function"}function l(ne,ae){return ne===ae||ne!==ne&&ae!==ae}var c="[object Arguments]",d="[object Boolean]",f="[object Date]",p="[object RegExp]",m="[object Map]",x="[object Number]",v="[object Object]",b="[object Set]",w="[object String]",k=Object.prototype.toString;function E(ne){var ae=ne.areArraysEqual,me=ne.areDatesEqual,ve=ne.areMapsEqual,q=ne.areObjectsEqual,Ne=ne.areRegExpsEqual,Pe=ne.areSetsEqual,ze=ne.createIsNestedEqual,De=ze($e);function $e(et,ut,kt){if(et===ut)return!0;if(!et||!ut||typeof et!="object"||typeof ut!="object")return et!==et&&ut!==ut;if(s(et)&&s(ut))return q(et,ut,De,kt);var ht=Array.isArray(et),Rr=Array.isArray(ut);if(ht||Rr)return ht===Rr&&ae(et,ut,De,kt);var er=k.call(et);return er!==k.call(ut)?!1:er===f?me(et,ut,De,kt):er===p?Ne(et,ut,De,kt):er===m?ve(et,ut,De,kt):er===b?Pe(et,ut,De,kt):er===v||er===c?o(et)||o(ut)?!1:q(et,ut,De,kt):er===d||er===x||er===w?l(et.valueOf(),ut.valueOf()):!1}return $e}function N(ne,ae,me,ve){var q=ne.length;if(ae.length!==q)return!1;for(;q-- >0;)if(!me(ne[q],ae[q],q,q,ne,ae,ve))return!1;return!0}var P=i(N);function R(ne,ae){return l(ne.valueOf(),ae.valueOf())}function O(ne,ae,me,ve){var q=ne.size===ae.size;if(!q)return!1;if(!ne.size)return!0;var Ne={},Pe=0;return ne.forEach(function(ze,De){if(q){var $e=!1,et=0;ae.forEach(function(ut,kt){!$e&&!Ne[et]&&($e=me(De,kt,Pe,et,ne,ae,ve)&&me(ze,ut,De,kt,ne,ae,ve))&&(Ne[et]=!0),et++}),Pe++,q=$e}}),q}var D=i(O),L="_owner",B=Object.prototype.hasOwnProperty;function z(ne,ae,me,ve){var q=Object.keys(ne),Ne=q.length;if(Object.keys(ae).length!==Ne)return!1;for(var Pe;Ne-- >0;){if(Pe=q[Ne],Pe===L){var ze=!!ne.$$typeof,De=!!ae.$$typeof;if((ze||De)&&ze!==De)return!1}if(!B.call(ae,Pe)||!me(ne[Pe],ae[Pe],Pe,Pe,ne,ae,ve))return!1}return!0}var H=i(z);function te(ne,ae){return ne.source===ae.source&&ne.flags===ae.flags}function Y(ne,ae,me,ve){var q=ne.size===ae.size;if(!q)return!1;if(!ne.size)return!0;var Ne={};return ne.forEach(function(Pe,ze){if(q){var De=!1,$e=0;ae.forEach(function(et,ut){!De&&!Ne[$e]&&(De=me(Pe,et,ze,ut,ne,ae,ve))&&(Ne[$e]=!0),$e++}),q=De}}),q}var W=i(Y),Z=Object.freeze({areArraysEqual:N,areDatesEqual:R,areMapsEqual:O,areObjectsEqual:z,areRegExpsEqual:te,areSetsEqual:Y,createIsNestedEqual:n}),re=Object.freeze({areArraysEqual:P,areDatesEqual:R,areMapsEqual:D,areObjectsEqual:H,areRegExpsEqual:te,areSetsEqual:W,createIsNestedEqual:n}),X=E(Z);function Q(ne,ae){return X(ne,ae,void 0)}var fe=E(a(Z,{createIsNestedEqual:function(){return l}}));function ye(ne,ae){return fe(ne,ae,void 0)}var J=E(re);function ce(ne,ae){return J(ne,ae,new WeakMap)}var V=E(a(re,{createIsNestedEqual:function(){return l}}));function G(ne,ae){return V(ne,ae,new WeakMap)}function ie(ne){return E(a(Z,ne(Z)))}function Ee(ne){var ae=E(a(re,ne(re)));return function(me,ve,q){return q===void 0&&(q=new WeakMap),ae(me,ve,q)}}r.circularDeepEqual=ce,r.circularShallowEqual=G,r.createCustomCircularEqual=Ee,r.createCustomEqual=ie,r.deepEqual=Q,r.sameValueZeroEqual=l,r.shallowEqual=ye,Object.defineProperty(r,"__esModule",{value:!0})})})(p8,p8.exports);var G7=p8.exports,m8={exports:{}},gi;function Ble(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=Ble(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function $G(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=Ble(e))&&(n&&(n+=" "),n+=t);return n}m8.exports=$G,gi=m8.exports.clsx=$G;var V4=m8.exports,bn={},vBe=function(t,r,n){return t===r?!0:t.className===r.className&&n(t.style,r.style)&&t.width===r.width&&t.autoSize===r.autoSize&&t.cols===r.cols&&t.draggableCancel===r.draggableCancel&&t.draggableHandle===r.draggableHandle&&n(t.verticalCompact,r.verticalCompact)&&n(t.compactType,r.compactType)&&n(t.layout,r.layout)&&n(t.margin,r.margin)&&n(t.containerPadding,r.containerPadding)&&t.rowHeight===r.rowHeight&&t.maxRows===r.maxRows&&t.isBounded===r.isBounded&&t.isDraggable===r.isDraggable&&t.isResizable===r.isResizable&&t.allowOverlap===r.allowOverlap&&t.preventCollision===r.preventCollision&&t.useCSSTransforms===r.useCSSTransforms&&t.transformScale===r.transformScale&&t.isDroppable===r.isDroppable&&n(t.resizeHandles,r.resizeHandles)&&n(t.resizeHandle,r.resizeHandle)&&t.onLayoutChange===r.onLayoutChange&&t.onDragStart===r.onDragStart&&t.onDrag===r.onDrag&&t.onDragStop===r.onDragStop&&t.onResizeStart===r.onResizeStart&&t.onResize===r.onResize&&t.onResizeStop===r.onResizeStop&&t.onDrop===r.onDrop&&n(t.droppingItem,r.droppingItem)&&n(t.innerRef,r.innerRef)};Object.defineProperty(bn,"__esModule",{value:!0});bn.bottom=K7;bn.childrenEqual=wBe;bn.cloneLayout=Ule;bn.cloneLayoutItem=Eg;bn.collides=q4;bn.compact=zle;bn.compactItem=Hle;bn.compactType=DBe;bn.correctBounds=Wle;bn.fastPositionEqual=SBe;bn.fastRGLPropsEqual=void 0;bn.getAllCollisions=Vle;bn.getFirstCollision=Zm;bn.getLayoutItem=X7;bn.getStatics=Y7;bn.modifyLayout=$le;bn.moveElement=Ww;bn.moveElementAwayFromCollision=x8;bn.noop=void 0;bn.perc=CBe;bn.resizeItemInDirection=IBe;bn.setTopLeft=PBe;bn.setTransform=OBe;bn.sortLayoutItems=r9;bn.sortLayoutItemsByColRow=Yle;bn.sortLayoutItemsByRowCol=Xle;bn.synchronizeLayoutWithChildren=RBe;bn.validateLayout=jBe;bn.withLayoutItem=bBe;var zG=G7,Hw=yBe(I);function yBe(e){return e&&e.__esModule?e:{default:e}}function K7(e){let t=0,r;for(let n=0,i=e.length;n<i;n++)r=e[n].y+e[n].h,r>t&&(t=r);return t}function Ule(e){const t=Array(e.length);for(let r=0,n=e.length;r<n;r++)t[r]=Eg(e[r]);return t}function $le(e,t){const r=Array(e.length);for(let n=0,i=e.length;n<i;n++)t.i===e[n].i?r[n]=t:r[n]=e[n];return r}function bBe(e,t,r){let n=X7(e,t);return n?(n=r(Eg(n)),e=$le(e,n),[e,n]):[e,null]}function Eg(e){return{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,minW:e.minW,maxW:e.maxW,minH:e.minH,maxH:e.maxH,moved:!!e.moved,static:!!e.static,isDraggable:e.isDraggable,isResizable:e.isResizable,resizeHandles:e.resizeHandles,isBounded:e.isBounded}}function wBe(e,t){return(0,zG.deepEqual)(Hw.default.Children.map(e,r=>r==null?void 0:r.key),Hw.default.Children.map(t,r=>r==null?void 0:r.key))&&(0,zG.deepEqual)(Hw.default.Children.map(e,r=>r==null?void 0:r.props["data-grid"]),Hw.default.Children.map(t,r=>r==null?void 0:r.props["data-grid"]))}bn.fastRGLPropsEqual=vBe;function SBe(e,t){return e.left===t.left&&e.top===t.top&&e.width===t.width&&e.height===t.height}function q4(e,t){return!(e.i===t.i||e.x+e.w<=t.x||e.x>=t.x+t.w||e.y+e.h<=t.y||e.y>=t.y+t.h)}function zle(e,t,r,n){const i=Y7(e),a=r9(e,t),s=Array(e.length);for(let o=0,l=a.length;o<l;o++){let c=Eg(a[o]);c.static||(c=Hle(i,c,t,r,a,n),i.push(c)),s[e.indexOf(a[o])]=c,c.moved=!1}return s}const EBe={x:"w",y:"h"};function g8(e,t,r,n){const i=EBe[n];t[n]+=1;const a=e.map(s=>s.i).indexOf(t.i);for(let s=a+1;s<e.length;s++){const o=e[s];if(!o.static){if(o.y>t.y+t.h)break;q4(t,o)&&g8(e,o,r+t[i],n)}}t[n]=r}function Hle(e,t,r,n,i,a){const s=r==="vertical",o=r==="horizontal";if(s)for(t.y=Math.min(K7(e),t.y);t.y>0&&!Zm(e,t);)t.y--;else if(o)for(;t.x>0&&!Zm(e,t);)t.x--;let l;for(;(l=Zm(e,t))&&!(r===null&&a);)if(o?g8(i,t,l.x+l.w,"x"):g8(i,t,l.y+l.h,"y"),o&&t.x+t.w>n)for(t.x=n-t.w,t.y++;t.x>0&&!Zm(e,t);)t.x--;return t.y=Math.max(t.y,0),t.x=Math.max(t.x,0),t}function Wle(e,t){const r=Y7(e);for(let n=0,i=e.length;n<i;n++){const a=e[n];if(a.x+a.w>t.cols&&(a.x=t.cols-a.w),a.x<0&&(a.x=0,a.w=t.cols),!a.static)r.push(a);else for(;Zm(r,a);)a.y++}return e}function X7(e,t){for(let r=0,n=e.length;r<n;r++)if(e[r].i===t)return e[r]}function Zm(e,t){for(let r=0,n=e.length;r<n;r++)if(q4(e[r],t))return e[r]}function Vle(e,t){return e.filter(r=>q4(r,t))}function Y7(e){return e.filter(t=>t.static)}function Ww(e,t,r,n,i,a,s,o,l){if(t.static&&t.isDraggable!==!0||t.y===n&&t.x===r)return e;`${t.i}${String(r)}${String(n)}${t.x}${t.y}`;const c=t.x,d=t.y;typeof r=="number"&&(t.x=r),typeof n=="number"&&(t.y=n),t.moved=!0;let f=r9(e,s);(s==="vertical"&&typeof n=="number"?d>=n:s==="horizontal"&&typeof r=="number"?c>=r:!1)&&(f=f.reverse());const m=Vle(f,t),x=m.length>0;if(x&&l)return Ule(e);if(x&&a)return`${t.i}`,t.x=c,t.y=d,t.moved=!1,e;for(let v=0,b=m.length;v<b;v++){const w=m[v];`${t.i}${t.x}${t.y}${w.i}${w.x}${w.y}`,!w.moved&&(w.static?e=x8(e,w,t,i,s):e=x8(e,t,w,i,s))}return e}function x8(e,t,r,n,i,a){const s=i==="horizontal",o=i==="vertical",l=t.static;if(n){n=!1;const f={x:s?Math.max(t.x-r.w,0):r.x,y:o?Math.max(t.y-r.h,0):r.y,w:r.w,h:r.h,i:"-1"},p=Zm(e,f),m=p&&p.y+p.h>t.y,x=p&&t.x+t.w>p.x;if(p){if(m&&o)return Ww(e,r,void 0,t.y+1,n,l,i);if(m&&i==null)return t.y=r.y,r.y=r.y+r.h,e;if(x&&s)return Ww(e,t,r.x,void 0,n,l,i)}else return`${r.i}${f.x}${f.y}`,Ww(e,r,s?f.x:void 0,o?f.y:void 0,n,l,i)}const c=s?r.x+1:void 0,d=o?r.y+1:void 0;return c==null&&d==null?e:Ww(e,r,s?r.x+1:void 0,o?r.y+1:void 0,n,l,i)}function CBe(e){return e*100+"%"}const qle=(e,t,r,n)=>e+r>n?t:r,Gle=(e,t,r)=>e<0?t:r,Kle=e=>Math.max(0,e),Q7=e=>Math.max(0,e),J7=(e,t,r)=>{let{left:n,height:i,width:a}=t;const s=e.top-(i-e.height);return{left:n,width:a,height:Gle(s,e.height,i),top:Q7(s)}},Z7=(e,t,r)=>{let{top:n,left:i,height:a,width:s}=t;return{top:n,height:a,width:qle(e.left,e.width,s,r),left:Kle(i)}},e9=(e,t,r)=>{let{top:n,height:i,width:a}=t;const s=e.left-(a-e.width);return{height:i,width:s<0?e.width:qle(e.left,e.width,a,r),top:Q7(n),left:Kle(s)}},t9=(e,t,r)=>{let{top:n,left:i,height:a,width:s}=t;return{width:s,left:i,height:Gle(n,e.height,a),top:Q7(n)}},kBe=function(){return J7(arguments.length<=0?void 0:arguments[0],Z7(...arguments))},_Be=function(){return J7(arguments.length<=0?void 0:arguments[0],e9(...arguments))},NBe=function(){return t9(arguments.length<=0?void 0:arguments[0],Z7(...arguments))},ABe=function(){return t9(arguments.length<=0?void 0:arguments[0],e9(...arguments))},TBe={n:J7,ne:kBe,e:Z7,se:NBe,s:t9,sw:ABe,w:e9,nw:_Be};function IBe(e,t,r,n){const i=TBe[e];return i?i(t,{...t,...r},n):r}function OBe(e){let{top:t,left:r,width:n,height:i}=e;const a=`translate(${r}px,${t}px)`;return{transform:a,WebkitTransform:a,MozTransform:a,msTransform:a,OTransform:a,width:`${n}px`,height:`${i}px`,position:"absolute"}}function PBe(e){let{top:t,left:r,width:n,height:i}=e;return{top:`${t}px`,left:`${r}px`,width:`${n}px`,height:`${i}px`,position:"absolute"}}function r9(e,t){return t==="horizontal"?Yle(e):t==="vertical"?Xle(e):e}function Xle(e){return e.slice(0).sort(function(t,r){return t.y>r.y||t.y===r.y&&t.x>r.x?1:t.y===r.y&&t.x===r.x?0:-1})}function Yle(e){return e.slice(0).sort(function(t,r){return t.x>r.x||t.x===r.x&&t.y>r.y?1:-1})}function RBe(e,t,r,n,i){e=e||[];const a=[];Hw.default.Children.forEach(t,o=>{if((o==null?void 0:o.key)==null)return;const l=X7(e,String(o.key)),c=o.props["data-grid"];l&&c==null?a.push(Eg(l)):c?a.push(Eg({...c,i:o.key})):a.push(Eg({w:1,h:1,x:0,y:K7(a),i:String(o.key)}))});const s=Wle(a,{cols:r});return i?s:zle(s,n,r)}function jBe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Layout";const r=["x","y","w","h"];if(!Array.isArray(e))throw new Error(t+" must be an array!");for(let n=0,i=e.length;n<i;n++){const a=e[n];for(let s=0;s<r.length;s++){const o=r[s],l=a[o];if(typeof l!="number"||Number.isNaN(l))throw new Error(`ReactGridLayout: ${t}[${n}].${o} must be a number! Received: ${l} (${typeof l})`)}if(typeof a.i<"u"&&typeof a.i!="string")throw new Error(`ReactGridLayout: ${t}[${n}].i must be a string! Received: ${a.i} (${typeof a.i})`)}}function DBe(e){const{verticalCompact:t,compactType:r}=e||{};return t===!1?null:r}const MBe=()=>{};bn.noop=MBe;var vf={};Object.defineProperty(vf,"__esModule",{value:!0});vf.calcGridColWidth=G4;vf.calcGridItemPosition=FBe;vf.calcGridItemWHPx=v8;vf.calcWH=BBe;vf.calcXY=LBe;vf.clamp=eg;function G4(e){const{margin:t,containerPadding:r,containerWidth:n,cols:i}=e;return(n-t[0]*(i-1)-r[0]*2)/i}function v8(e,t,r){return Number.isFinite(e)?Math.round(t*e+Math.max(0,e-1)*r):e}function FBe(e,t,r,n,i,a){const{margin:s,containerPadding:o,rowHeight:l}=e,c=G4(e),d={};return a&&a.resizing?(d.width=Math.round(a.resizing.width),d.height=Math.round(a.resizing.height)):(d.width=v8(n,c,s[0]),d.height=v8(i,l,s[1])),a&&a.dragging?(d.top=Math.round(a.dragging.top),d.left=Math.round(a.dragging.left)):a&&a.resizing&&typeof a.resizing.top=="number"&&typeof a.resizing.left=="number"?(d.top=Math.round(a.resizing.top),d.left=Math.round(a.resizing.left)):(d.top=Math.round((l+s[1])*r+o[1]),d.left=Math.round((c+s[0])*t+o[0])),d}function LBe(e,t,r,n,i){const{margin:a,containerPadding:s,cols:o,rowHeight:l,maxRows:c}=e,d=G4(e);let f=Math.round((r-s[0])/(d+a[0])),p=Math.round((t-s[1])/(l+a[1]));return f=eg(f,0,o-n),p=eg(p,0,c-i),{x:f,y:p}}function BBe(e,t,r,n,i,a){const{margin:s,maxRows:o,cols:l,rowHeight:c}=e,d=G4(e);let f=Math.round((t+s[0])/(d+s[0])),p=Math.round((r+s[1])/(c+s[1])),m=eg(f,0,l-n),x=eg(p,0,o-i);return["sw","w","nw"].indexOf(a)!==-1&&(m=eg(f,0,l)),["nw","n","ne"].indexOf(a)!==-1&&(x=eg(p,0,o)),{w:m,h:x}}function eg(e,t,r){return Math.max(Math.min(e,r),t)}var K4={},Qle={exports:{}},UBe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",$Be=UBe,zBe=$Be;function Jle(){}function Zle(){}Zle.resetWarningCache=Jle;var HBe=function(){function e(n,i,a,s,o,l){if(l!==zBe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Zle,resetWarningCache:Jle};return r.PropTypes=r,r};Qle.exports=HBe();var Yh=Qle.exports;const zt=Bs(Yh);var X4={exports:{}},ece={},sa={},yf={};Object.defineProperty(yf,"__esModule",{value:!0});yf.dontSetMe=KBe;yf.findInArray=WBe;yf.int=GBe;yf.isFunction=VBe;yf.isNum=qBe;function WBe(e,t){for(let r=0,n=e.length;r<n;r++)if(t.apply(t,[e[r],r,e]))return e[r]}function VBe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function qBe(e){return typeof e=="number"&&!isNaN(e)}function GBe(e){return parseInt(e,10)}function KBe(e,t,r){if(e[t])return new Error(`Invalid prop ${t} passed to ${r} - do not set this, set it on the child.`)}var Bx={};Object.defineProperty(Bx,"__esModule",{value:!0});Bx.browserPrefixToKey=rce;Bx.browserPrefixToStyle=XBe;Bx.default=void 0;Bx.getPrefix=tce;const Wj=["Moz","Webkit","O","ms"];function tce(){var r,n;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const t=(n=(r=window.document)==null?void 0:r.documentElement)==null?void 0:n.style;if(!t||e in t)return"";for(let i=0;i<Wj.length;i++)if(rce(e,Wj[i])in t)return Wj[i];return""}function rce(e,t){return t?`${t}${YBe(e)}`:e}function XBe(e,t){return t?`-${t.toLowerCase()}-${e}`:e}function YBe(e){let t="",r=!0;for(let n=0;n<e.length;n++)r?(t+=e[n].toUpperCase(),r=!1):e[n]==="-"?r=!0:t+=e[n];return t}Bx.default=tce();Object.defineProperty(sa,"__esModule",{value:!0});sa.addClassName=ace;sa.addEvent=JBe;sa.addUserSelectStyles=cUe;sa.createCSSTransform=aUe;sa.createSVGTransform=sUe;sa.getTouch=oUe;sa.getTouchIdentifier=lUe;sa.getTranslation=n9;sa.innerHeight=rUe;sa.innerWidth=nUe;sa.matchesSelector=ice;sa.matchesSelectorAndParentsTo=QBe;sa.offsetXYFromParent=iUe;sa.outerHeight=eUe;sa.outerWidth=tUe;sa.removeClassName=sce;sa.removeEvent=ZBe;sa.scheduleRemoveUserSelectStyles=uUe;var ic=yf,HG=nce(Bx);function nce(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(nce=function(i,a){if(!a&&i&&i.__esModule)return i;var s,o,l={__proto__:null,default:i};if(i===null||typeof i!="object"&&typeof i!="function")return l;if(s=a?n:r){if(s.has(i))return s.get(i);s.set(i,l)}for(const c in i)c!=="default"&&{}.hasOwnProperty.call(i,c)&&((o=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(i,c))&&(o.get||o.set)?s(l,c,o):l[c]=i[c]);return l})(e,t)}let y_="";function ice(e,t){return y_||(y_=(0,ic.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(r){return(0,ic.isFunction)(e[r])})),(0,ic.isFunction)(e[y_])?e[y_](t):!1}function QBe(e,t,r){let n=e;do{if(ice(n,t))return!0;if(n===r)return!1;n=n.parentNode}while(n);return!1}function JBe(e,t,r,n){if(!e)return;const i={capture:!0,...n};e.addEventListener?e.addEventListener(t,r,i):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r}function ZBe(e,t,r,n){if(!e)return;const i={capture:!0,...n};e.removeEventListener?e.removeEventListener(t,r,i):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null}function eUe(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,ic.int)(r.borderTopWidth),t+=(0,ic.int)(r.borderBottomWidth),t}function tUe(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,ic.int)(r.borderLeftWidth),t+=(0,ic.int)(r.borderRightWidth),t}function rUe(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,ic.int)(r.paddingTop),t-=(0,ic.int)(r.paddingBottom),t}function nUe(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,ic.int)(r.paddingLeft),t-=(0,ic.int)(r.paddingRight),t}function iUe(e,t,r){const i=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),a=(e.clientX+t.scrollLeft-i.left)/r,s=(e.clientY+t.scrollTop-i.top)/r;return{x:a,y:s}}function aUe(e,t){const r=n9(e,t,"px");return{[(0,HG.browserPrefixToKey)("transform",HG.default)]:r}}function sUe(e,t){return n9(e,t,"")}function n9(e,t,r){let{x:n,y:i}=e,a=`translate(${n}${r},${i}${r})`;if(t){const s=`${typeof t.x=="string"?t.x:t.x+r}`,o=`${typeof t.y=="string"?t.y:t.y+r}`;a=`translate(${s}, ${o})`+a}return a}function oUe(e,t){return e.targetTouches&&(0,ic.findInArray)(e.targetTouches,r=>t===r.identifier)||e.changedTouches&&(0,ic.findInArray)(e.changedTouches,r=>t===r.identifier)}function lUe(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function cUe(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,e.getElementsByTagName("head")[0].appendChild(t)),e.body&&ace(e.body,"react-draggable-transparent-selection")}function uUe(e){window.requestAnimationFrame?window.requestAnimationFrame(()=>{WG(e)}):WG(e)}function WG(e){if(e)try{if(e.body&&sce(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function ace(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp(`(?:^|\\s)${t}(?!\\S)`))||(e.className+=` ${t}`)}function sce(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp(`(?:^|\\s)${t}(?!\\S)`,"g"),"")}var bf={};Object.defineProperty(bf,"__esModule",{value:!0});bf.canDragX=hUe;bf.canDragY=pUe;bf.createCoreData=gUe;bf.createDraggableData=xUe;bf.getBoundPosition=dUe;bf.getControlPosition=mUe;bf.snapToGrid=fUe;var zl=yf,sv=sa;function dUe(e,t,r){if(!e.props.bounds)return[t,r];let{bounds:n}=e.props;n=typeof n=="string"?n:vUe(n);const i=i9(e);if(typeof n=="string"){const{ownerDocument:a}=i,s=a.defaultView;let o;if(n==="parent"?o=i.parentNode:o=i.getRootNode().querySelector(n),!(o instanceof s.HTMLElement))throw new Error('Bounds selector "'+n+'" could not find an element.');const l=o,c=s.getComputedStyle(i),d=s.getComputedStyle(l);n={left:-i.offsetLeft+(0,zl.int)(d.paddingLeft)+(0,zl.int)(c.marginLeft),top:-i.offsetTop+(0,zl.int)(d.paddingTop)+(0,zl.int)(c.marginTop),right:(0,sv.innerWidth)(l)-(0,sv.outerWidth)(i)-i.offsetLeft+(0,zl.int)(d.paddingRight)-(0,zl.int)(c.marginRight),bottom:(0,sv.innerHeight)(l)-(0,sv.outerHeight)(i)-i.offsetTop+(0,zl.int)(d.paddingBottom)-(0,zl.int)(c.marginBottom)}}return(0,zl.isNum)(n.right)&&(t=Math.min(t,n.right)),(0,zl.isNum)(n.bottom)&&(r=Math.min(r,n.bottom)),(0,zl.isNum)(n.left)&&(t=Math.max(t,n.left)),(0,zl.isNum)(n.top)&&(r=Math.max(r,n.top)),[t,r]}function fUe(e,t,r){const n=Math.round(t/e[0])*e[0],i=Math.round(r/e[1])*e[1];return[n,i]}function hUe(e){return e.props.axis==="both"||e.props.axis==="x"}function pUe(e){return e.props.axis==="both"||e.props.axis==="y"}function mUe(e,t,r){const n=typeof t=="number"?(0,sv.getTouch)(e,t):null;if(typeof t=="number"&&!n)return null;const i=i9(r),a=r.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,sv.offsetXYFromParent)(n||e,a,r.props.scale)}function gUe(e,t,r){const n=!(0,zl.isNum)(e.lastX),i=i9(e);return n?{node:i,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:i,deltaX:t-e.lastX,deltaY:r-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:r}}function xUe(e,t){const r=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/r,y:e.state.y+t.deltaY/r,deltaX:t.deltaX/r,deltaY:t.deltaY/r,lastX:e.state.x,lastY:e.state.y}}function vUe(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function i9(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var Y4={},Q4={};Object.defineProperty(Q4,"__esModule",{value:!0});Q4.default=yUe;function yUe(){}Object.defineProperty(Y4,"__esModule",{value:!0});Y4.default=void 0;var Vj=oce(I),Ao=a9(Yh),bUe=a9(Il),Ks=sa,Sp=bf,qj=yf,vw=a9(Q4);function a9(e){return e&&e.__esModule?e:{default:e}}function oce(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(oce=function(i,a){if(!a&&i&&i.__esModule)return i;var s,o,l={__proto__:null,default:i};if(i===null||typeof i!="object"&&typeof i!="function")return l;if(s=a?n:r){if(s.has(i))return s.get(i);s.set(i,l)}for(const c in i)c!=="default"&&{}.hasOwnProperty.call(i,c)&&((o=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(i,c))&&(o.get||o.set)?s(l,c,o):l[c]=i[c]);return l})(e,t)}function To(e,t,r){return(t=wUe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wUe(e){var t=SUe(e,"string");return typeof t=="symbol"?t:t+""}function SUe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const Ru={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Ep=Ru.mouse,J4=class extends Vj.Component{constructor(){super(...arguments),To(this,"dragging",!1),To(this,"lastX",NaN),To(this,"lastY",NaN),To(this,"touchIdentifier",null),To(this,"mounted",!1),To(this,"handleDragStart",t=>{if(this.props.onMouseDown(t),!this.props.allowAnyClick&&typeof t.button=="number"&&t.button!==0)return!1;const r=this.findDOMNode();if(!r||!r.ownerDocument||!r.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:n}=r;if(this.props.disabled||!(t.target instanceof n.defaultView.Node)||this.props.handle&&!(0,Ks.matchesSelectorAndParentsTo)(t.target,this.props.handle,r)||this.props.cancel&&(0,Ks.matchesSelectorAndParentsTo)(t.target,this.props.cancel,r))return;t.type==="touchstart"&&!this.props.allowMobileScroll&&t.preventDefault();const i=(0,Ks.getTouchIdentifier)(t);this.touchIdentifier=i;const a=(0,Sp.getControlPosition)(t,i,this);if(a==null)return;const{x:s,y:o}=a,l=(0,Sp.createCoreData)(this,s,o);(0,vw.default)("DraggableCore: handleDragStart: %j",l),(0,vw.default)("calling",this.props.onStart),!(this.props.onStart(t,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,Ks.addUserSelectStyles)(n),this.dragging=!0,this.lastX=s,this.lastY=o,(0,Ks.addEvent)(n,Ep.move,this.handleDrag),(0,Ks.addEvent)(n,Ep.stop,this.handleDragStop))}),To(this,"handleDrag",t=>{const r=(0,Sp.getControlPosition)(t,this.touchIdentifier,this);if(r==null)return;let{x:n,y:i}=r;if(Array.isArray(this.props.grid)){let o=n-this.lastX,l=i-this.lastY;if([o,l]=(0,Sp.snapToGrid)(this.props.grid,o,l),!o&&!l)return;n=this.lastX+o,i=this.lastY+l}const a=(0,Sp.createCoreData)(this,n,i);if((0,vw.default)("DraggableCore: handleDrag: %j",a),this.props.onDrag(t,a)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=n,this.lastY=i}),To(this,"handleDragStop",t=>{if(!this.dragging)return;const r=(0,Sp.getControlPosition)(t,this.touchIdentifier,this);if(r==null)return;let{x:n,y:i}=r;if(Array.isArray(this.props.grid)){let l=n-this.lastX||0,c=i-this.lastY||0;[l,c]=(0,Sp.snapToGrid)(this.props.grid,l,c),n=this.lastX+l,i=this.lastY+c}const a=(0,Sp.createCoreData)(this,n,i);if(this.props.onStop(t,a)===!1||this.mounted===!1)return!1;const o=this.findDOMNode();o&&this.props.enableUserSelectHack&&(0,Ks.scheduleRemoveUserSelectStyles)(o.ownerDocument),(0,vw.default)("DraggableCore: handleDragStop: %j",a),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,o&&((0,vw.default)("DraggableCore: Removing handlers"),(0,Ks.removeEvent)(o.ownerDocument,Ep.move,this.handleDrag),(0,Ks.removeEvent)(o.ownerDocument,Ep.stop,this.handleDragStop))}),To(this,"onMouseDown",t=>(Ep=Ru.mouse,this.handleDragStart(t))),To(this,"onMouseUp",t=>(Ep=Ru.mouse,this.handleDragStop(t))),To(this,"onTouchStart",t=>(Ep=Ru.touch,this.handleDragStart(t))),To(this,"onTouchEnd",t=>(Ep=Ru.touch,this.handleDragStop(t)))}componentDidMount(){this.mounted=!0;const t=this.findDOMNode();t&&(0,Ks.addEvent)(t,Ru.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const t=this.findDOMNode();if(t){const{ownerDocument:r}=t;(0,Ks.removeEvent)(r,Ru.mouse.move,this.handleDrag),(0,Ks.removeEvent)(r,Ru.touch.move,this.handleDrag),(0,Ks.removeEvent)(r,Ru.mouse.stop,this.handleDragStop),(0,Ks.removeEvent)(r,Ru.touch.stop,this.handleDragStop),(0,Ks.removeEvent)(t,Ru.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Ks.scheduleRemoveUserSelectStyles)(r)}}findDOMNode(){var t,r,n;return(t=this.props)!=null&&t.nodeRef?(n=(r=this.props)==null?void 0:r.nodeRef)==null?void 0:n.current:bUe.default.findDOMNode(this)}render(){return Vj.cloneElement(Vj.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};Y4.default=J4;To(J4,"displayName","DraggableCore");To(J4,"propTypes",{allowAnyClick:Ao.default.bool,allowMobileScroll:Ao.default.bool,children:Ao.default.node.isRequired,disabled:Ao.default.bool,enableUserSelectHack:Ao.default.bool,offsetParent:function(e,t){if(e[t]&&e[t].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Ao.default.arrayOf(Ao.default.number),handle:Ao.default.string,cancel:Ao.default.string,nodeRef:Ao.default.object,onStart:Ao.default.func,onDrag:Ao.default.func,onStop:Ao.default.func,onMouseDown:Ao.default.func,scale:Ao.default.number,className:qj.dontSetMe,style:qj.dontSetMe,transform:qj.dontSetMe});To(J4,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),e.default=void 0;var t=f(I),r=d(Yh),n=d(Il),i=V4,a=sa,s=bf,o=yf,l=d(Y4),c=d(Q4);function d(w){return w&&w.__esModule?w:{default:w}}function f(w,k){if(typeof WeakMap=="function")var E=new WeakMap,N=new WeakMap;return(f=function(P,R){if(!R&&P&&P.__esModule)return P;var O,D,L={__proto__:null,default:P};if(P===null||typeof P!="object"&&typeof P!="function")return L;if(O=R?N:E){if(O.has(P))return O.get(P);O.set(P,L)}for(const B in P)B!=="default"&&{}.hasOwnProperty.call(P,B)&&((D=(O=Object.defineProperty)&&Object.getOwnPropertyDescriptor(P,B))&&(D.get||D.set)?O(L,B,D):L[B]=P[B]);return L})(w,k)}function p(){return p=Object.assign?Object.assign.bind():function(w){for(var k=1;k<arguments.length;k++){var E=arguments[k];for(var N in E)({}).hasOwnProperty.call(E,N)&&(w[N]=E[N])}return w},p.apply(null,arguments)}function m(w,k,E){return(k=x(k))in w?Object.defineProperty(w,k,{value:E,enumerable:!0,configurable:!0,writable:!0}):w[k]=E,w}function x(w){var k=v(w,"string");return typeof k=="symbol"?k:k+""}function v(w,k){if(typeof w!="object"||!w)return w;var E=w[Symbol.toPrimitive];if(E!==void 0){var N=E.call(w,k);if(typeof N!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(w)}class b extends t.Component{static getDerivedStateFromProps(k,E){let{position:N}=k,{prevPropsPosition:P}=E;return N&&(!P||N.x!==P.x||N.y!==P.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:N,prevPropsPosition:P}),{x:N.x,y:N.y,prevPropsPosition:{...N}}):null}constructor(k){super(k),m(this,"onDragStart",(E,N)=>{if((0,c.default)("Draggable: onDragStart: %j",N),this.props.onStart(E,(0,s.createDraggableData)(this,N))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),m(this,"onDrag",(E,N)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",N);const P=(0,s.createDraggableData)(this,N),R={x:P.x,y:P.y,slackX:0,slackY:0};if(this.props.bounds){const{x:D,y:L}=R;R.x+=this.state.slackX,R.y+=this.state.slackY;const[B,z]=(0,s.getBoundPosition)(this,R.x,R.y);R.x=B,R.y=z,R.slackX=this.state.slackX+(D-R.x),R.slackY=this.state.slackY+(L-R.y),P.x=R.x,P.y=R.y,P.deltaX=R.x-this.state.x,P.deltaY=R.y-this.state.y}if(this.props.onDrag(E,P)===!1)return!1;this.setState(R)}),m(this,"onDragStop",(E,N)=>{if(!this.state.dragging||this.props.onStop(E,(0,s.createDraggableData)(this,N))===!1)return!1;(0,c.default)("Draggable: onDragStop: %j",N);const R={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:D,y:L}=this.props.position;R.x=D,R.y=L}this.setState(R)}),this.state={dragging:!1,dragged:!1,x:k.position?k.position.x:k.defaultPosition.x,y:k.position?k.position.y:k.defaultPosition.y,prevPropsPosition:{...k.position},slackX:0,slackY:0,isElementSVG:!1},k.position&&!(k.onDrag||k.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var k,E;return((E=(k=this.props)==null?void 0:k.nodeRef)==null?void 0:E.current)??n.default.findDOMNode(this)}render(){const{axis:k,bounds:E,children:N,defaultPosition:P,defaultClassName:R,defaultClassNameDragging:O,defaultClassNameDragged:D,position:L,positionOffset:B,scale:z,...H}=this.props;let te={},Y=null;const Z=!!!L||this.state.dragging,re=L||P,X={x:(0,s.canDragX)(this)&&Z?this.state.x:re.x,y:(0,s.canDragY)(this)&&Z?this.state.y:re.y};this.state.isElementSVG?Y=(0,a.createSVGTransform)(X,B):te=(0,a.createCSSTransform)(X,B);const Q=(0,i.clsx)(N.props.className||"",R,{[O]:this.state.dragging,[D]:this.state.dragged});return t.createElement(l.default,p({},H,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(N),{className:Q,style:{...N.props.style,...te},transform:Y}))}}e.default=b,m(b,"displayName","Draggable"),m(b,"propTypes",{...l.default.propTypes,axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:o.dontSetMe,style:o.dontSetMe,transform:o.dontSetMe}),m(b,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(ece);const{default:lce,DraggableCore:EUe}=ece;X4.exports=lce;X4.exports.default=lce;X4.exports.DraggableCore=EUe;var cce=X4.exports,Z4={exports:{}},iC={},s9={};s9.__esModule=!0;s9.cloneElement=TUe;var CUe=kUe(I);function kUe(e){return e&&e.__esModule?e:{default:e}}function VG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function qG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VG(Object(r),!0).forEach(function(n){_Ue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _Ue(e,t,r){return t=NUe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NUe(e){var t=AUe(e,"string");return typeof t=="symbol"?t:String(t)}function AUe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TUe(e,t){return t.style&&e.props.style&&(t.style=qG(qG({},e.props.style),t.style)),t.className&&e.props.className&&(t.className=e.props.className+" "+t.className),CUe.default.cloneElement(e,t)}var aC={};aC.__esModule=!0;aC.resizableProps=void 0;var nn=IUe(Yh);function IUe(e){return e&&e.__esModule?e:{default:e}}var OUe={axis:nn.default.oneOf(["both","x","y","none"]),className:nn.default.string,children:nn.default.element.isRequired,draggableOpts:nn.default.shape({allowAnyClick:nn.default.bool,cancel:nn.default.string,children:nn.default.node,disabled:nn.default.bool,enableUserSelectHack:nn.default.bool,offsetParent:nn.default.node,grid:nn.default.arrayOf(nn.default.number),handle:nn.default.string,nodeRef:nn.default.object,onStart:nn.default.func,onDrag:nn.default.func,onStop:nn.default.func,onMouseDown:nn.default.func,scale:nn.default.number}),height:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];if(i.axis==="both"||i.axis==="y"){var a;return(a=nn.default.number).isRequired.apply(a,r)}return nn.default.number.apply(nn.default,r)},handle:nn.default.oneOfType([nn.default.node,nn.default.func]),handleSize:nn.default.arrayOf(nn.default.number),lockAspectRatio:nn.default.bool,maxConstraints:nn.default.arrayOf(nn.default.number),minConstraints:nn.default.arrayOf(nn.default.number),onResizeStop:nn.default.func,onResizeStart:nn.default.func,onResize:nn.default.func,resizeHandles:nn.default.arrayOf(nn.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:nn.default.number,width:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];if(i.axis==="both"||i.axis==="x"){var a;return(a=nn.default.number).isRequired.apply(a,r)}return nn.default.number.apply(nn.default,r)}};aC.resizableProps=OUe;iC.__esModule=!0;iC.default=void 0;var yw=MUe(I),PUe=cce,RUe=s9,jUe=aC,DUe=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function uce(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(uce=function(i){return i?r:t})(e)}function MUe(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=uce(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function y8(){return y8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y8.apply(this,arguments)}function FUe(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function GG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Gj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GG(Object(r),!0).forEach(function(n){LUe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LUe(e,t,r){return t=BUe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BUe(e){var t=UUe(e,"string");return typeof t=="symbol"?t:String(t)}function UUe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $Ue(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,b8(e,t)}function b8(e,t){return b8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},b8(e,t)}var o9=function(e){$Ue(t,e);function t(){for(var n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=e.call.apply(e,[this].concat(a))||this,n.handleRefs={},n.lastHandleRect=null,n.slack=null,n}var r=t.prototype;return r.componentWillUnmount=function(){this.resetData()},r.resetData=function(){this.lastHandleRect=this.slack=null},r.runConstraints=function(i,a){var s=this.props,o=s.minConstraints,l=s.maxConstraints,c=s.lockAspectRatio;if(!o&&!l&&!c)return[i,a];if(c){var d=this.props.width/this.props.height,f=i-this.props.width,p=a-this.props.height;Math.abs(f)>Math.abs(p*d)?a=i/d:i=a*d}var m=i,x=a,v=this.slack||[0,0],b=v[0],w=v[1];return i+=b,a+=w,o&&(i=Math.max(o[0],i),a=Math.max(o[1],a)),l&&(i=Math.min(l[0],i),a=Math.min(l[1],a)),this.slack=[b+(m-i),w+(x-a)],[i,a]},r.resizeHandler=function(i,a){var s=this;return function(o,l){var c=l.node,d=l.deltaX,f=l.deltaY;i==="onResizeStart"&&s.resetData();var p=(s.props.axis==="both"||s.props.axis==="x")&&a!=="n"&&a!=="s",m=(s.props.axis==="both"||s.props.axis==="y")&&a!=="e"&&a!=="w";if(!(!p&&!m)){var x=a[0],v=a[a.length-1],b=c.getBoundingClientRect();if(s.lastHandleRect!=null){if(v==="w"){var w=b.left-s.lastHandleRect.left;d+=w}if(x==="n"){var k=b.top-s.lastHandleRect.top;f+=k}}s.lastHandleRect=b,v==="w"&&(d=-d),x==="n"&&(f=-f);var E=s.props.width+(p?d/s.props.transformScale:0),N=s.props.height+(m?f/s.props.transformScale:0),P=s.runConstraints(E,N);E=P[0],N=P[1];var R=E!==s.props.width||N!==s.props.height,O=typeof s.props[i]=="function"?s.props[i]:null,D=i==="onResize"&&!R;O&&!D&&(o.persist==null||o.persist(),O(o,{node:c,size:{width:E,height:N},handle:a})),i==="onResizeStop"&&s.resetData()}}},r.renderResizeHandle=function(i,a){var s=this.props.handle;if(!s)return yw.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+i,ref:a});if(typeof s=="function")return s(i,a);var o=typeof s.type=="string",l=Gj({ref:a},o?{}:{handleAxis:i});return yw.cloneElement(s,l)},r.render=function(){var i=this,a=this.props,s=a.children,o=a.className,l=a.draggableOpts;a.width,a.height,a.handle,a.handleSize,a.lockAspectRatio,a.axis,a.minConstraints,a.maxConstraints,a.onResize,a.onResizeStop,a.onResizeStart;var c=a.resizeHandles;a.transformScale;var d=FUe(a,DUe);return(0,RUe.cloneElement)(s,Gj(Gj({},d),{},{className:(o?o+" ":"")+"react-resizable",children:[].concat(s.props.children,c.map(function(f){var p,m=(p=i.handleRefs[f])!=null?p:i.handleRefs[f]=yw.createRef();return yw.createElement(PUe.DraggableCore,y8({},l,{nodeRef:m,key:"resizableHandle-"+f,onStop:i.resizeHandler("onResizeStop",f),onStart:i.resizeHandler("onResizeStart",f),onDrag:i.resizeHandler("onResize",f)}),i.renderResizeHandle(f,m))}))}))},t}(yw.Component);iC.default=o9;o9.propTypes=jUe.resizableProps;o9.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var e3={};e3.__esModule=!0;e3.default=void 0;var Kj=qUe(I),zUe=dce(Yh),HUe=dce(iC),WUe=aC,VUe=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function dce(e){return e&&e.__esModule?e:{default:e}}function fce(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(fce=function(i){return i?r:t})(e)}function qUe(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=fce(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function w8(){return w8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w8.apply(this,arguments)}function KG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function hT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KG(Object(r),!0).forEach(function(n){GUe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GUe(e,t,r){return t=KUe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KUe(e){var t=XUe(e,"string");return typeof t=="symbol"?t:String(t)}function XUe(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YUe(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function QUe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,S8(e,t)}function S8(e,t){return S8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},S8(e,t)}var hce=function(e){QUe(t,e);function t(){for(var n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=e.call.apply(e,[this].concat(a))||this,n.state={width:n.props.width,height:n.props.height,propsWidth:n.props.width,propsHeight:n.props.height},n.onResize=function(o,l){var c=l.size;n.props.onResize?(o.persist==null||o.persist(),n.setState(c,function(){return n.props.onResize&&n.props.onResize(o,l)})):n.setState(c)},n}t.getDerivedStateFromProps=function(i,a){return a.propsWidth!==i.width||a.propsHeight!==i.height?{width:i.width,height:i.height,propsWidth:i.width,propsHeight:i.height}:null};var r=t.prototype;return r.render=function(){var i=this.props,a=i.handle,s=i.handleSize;i.onResize;var o=i.onResizeStart,l=i.onResizeStop,c=i.draggableOpts,d=i.minConstraints,f=i.maxConstraints,p=i.lockAspectRatio,m=i.axis;i.width,i.height;var x=i.resizeHandles,v=i.style,b=i.transformScale,w=YUe(i,VUe);return Kj.createElement(HUe.default,{axis:m,draggableOpts:c,handle:a,handleSize:s,height:this.state.height,lockAspectRatio:p,maxConstraints:f,minConstraints:d,onResizeStart:o,onResize:this.onResize,onResizeStop:l,resizeHandles:x,transformScale:b,width:this.state.width},Kj.createElement("div",w8({},w,{style:hT(hT({},v),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},t}(Kj.Component);e3.default=hce;hce.propTypes=hT(hT({},WUe.resizableProps),{},{children:zUe.default.element});Z4.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};Z4.exports.Resizable=iC.default;Z4.exports.ResizableBox=e3.default;var JUe=Z4.exports,xh={};Object.defineProperty(xh,"__esModule",{value:!0});xh.resizeHandleType=xh.resizeHandleAxesType=xh.default=void 0;var un=pce(Yh),ZUe=pce(I);function pce(e){return e&&e.__esModule?e:{default:e}}const e$e=xh.resizeHandleAxesType=un.default.arrayOf(un.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),t$e=xh.resizeHandleType=un.default.oneOfType([un.default.node,un.default.func]);xh.default={className:un.default.string,style:un.default.object,width:un.default.number,autoSize:un.default.bool,cols:un.default.number,draggableCancel:un.default.string,draggableHandle:un.default.string,verticalCompact:function(e){e.verticalCompact},compactType:un.default.oneOf(["vertical","horizontal"]),layout:function(e){var t=e.layout;t!==void 0&&bn.validateLayout(t,"layout")},margin:un.default.arrayOf(un.default.number),containerPadding:un.default.arrayOf(un.default.number),rowHeight:un.default.number,maxRows:un.default.number,isBounded:un.default.bool,isDraggable:un.default.bool,isResizable:un.default.bool,allowOverlap:un.default.bool,preventCollision:un.default.bool,useCSSTransforms:un.default.bool,transformScale:un.default.number,isDroppable:un.default.bool,resizeHandles:e$e,resizeHandle:t$e,onLayoutChange:un.default.func,onDragStart:un.default.func,onDrag:un.default.func,onDragStop:un.default.func,onResizeStart:un.default.func,onResize:un.default.func,onResizeStop:un.default.func,onDrop:un.default.func,droppingItem:un.default.shape({i:un.default.string.isRequired,w:un.default.number.isRequired,h:un.default.number.isRequired}),children:function(e,t){const r=e[t],n={};ZUe.default.Children.forEach(r,function(i){if((i==null?void 0:i.key)!=null){if(n[i.key])throw new Error('Duplicate child key "'+i.key+'" found! This will cause problems in ReactGridLayout.');n[i.key]=!0}})},innerRef:un.default.any};Object.defineProperty(K4,"__esModule",{value:!0});K4.default=void 0;var E1=l9(I),XG=Il,$n=l9(Yh),r$e=cce,n$e=JUe,C1=bn,ks=vf,YG=xh,i$e=l9(V4);function l9(e){return e&&e.__esModule?e:{default:e}}function Id(e,t,r){return(t=a$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a$e(e){var t=s$e(e,"string");return typeof t=="symbol"?t:t+""}function s$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class c9 extends E1.default.Component{constructor(){super(...arguments),Id(this,"state",{resizing:null,dragging:null,className:""}),Id(this,"elementRef",E1.default.createRef()),Id(this,"onDragStart",(t,r)=>{let{node:n}=r;const{onDragStart:i,transformScale:a}=this.props;if(!i)return;const s={top:0,left:0},{offsetParent:o}=n;if(!o)return;const l=o.getBoundingClientRect(),c=n.getBoundingClientRect(),d=c.left/a,f=l.left/a,p=c.top/a,m=l.top/a;s.left=d-f+o.scrollLeft,s.top=p-m+o.scrollTop,this.setState({dragging:s});const{x,y:v}=(0,ks.calcXY)(this.getPositionParams(),s.top,s.left,this.props.w,this.props.h);return i.call(this,this.props.i,x,v,{e:t,node:n,newPosition:s})}),Id(this,"onDrag",(t,r,n)=>{let{node:i,deltaX:a,deltaY:s}=r;const{onDrag:o}=this.props;if(!o)return;if(!this.state.dragging)throw new Error("onDrag called before onDragStart.");let l=this.state.dragging.top+s,c=this.state.dragging.left+a;const{isBounded:d,i:f,w:p,h:m,containerWidth:x}=this.props,v=this.getPositionParams();if(d){const{offsetParent:E}=i;if(E){const{margin:N,rowHeight:P}=this.props,R=E.clientHeight-(0,ks.calcGridItemWHPx)(m,P,N[1]);l=(0,ks.clamp)(l,0,R);const O=(0,ks.calcGridColWidth)(v),D=x-(0,ks.calcGridItemWHPx)(p,O,N[0]);c=(0,ks.clamp)(c,0,D)}}const b={top:l,left:c};n?this.setState({dragging:b}):(0,XG.flushSync)(()=>{this.setState({dragging:b})});const{x:w,y:k}=(0,ks.calcXY)(v,l,c,p,m);return o.call(this,f,w,k,{e:t,node:i,newPosition:b})}),Id(this,"onDragStop",(t,r)=>{let{node:n}=r;const{onDragStop:i}=this.props;if(!i)return;if(!this.state.dragging)throw new Error("onDragEnd called before onDragStart.");const{w:a,h:s,i:o}=this.props,{left:l,top:c}=this.state.dragging,d={top:c,left:l};this.setState({dragging:null});const{x:f,y:p}=(0,ks.calcXY)(this.getPositionParams(),c,l,a,s);return i.call(this,o,f,p,{e:t,node:n,newPosition:d})}),Id(this,"onResizeStop",(t,r,n)=>this.onResizeHandler(t,r,n,"onResizeStop")),Id(this,"onResizeStart",(t,r,n)=>this.onResizeHandler(t,r,n,"onResizeStart")),Id(this,"onResize",(t,r,n)=>this.onResizeHandler(t,r,n,"onResize"))}shouldComponentUpdate(t,r){if(this.props.children!==t.children||this.props.droppingPosition!==t.droppingPosition)return!0;const n=(0,ks.calcGridItemPosition)(this.getPositionParams(this.props),this.props.x,this.props.y,this.props.w,this.props.h,this.state),i=(0,ks.calcGridItemPosition)(this.getPositionParams(t),t.x,t.y,t.w,t.h,r);return!(0,C1.fastPositionEqual)(n,i)||this.props.useCSSTransforms!==t.useCSSTransforms}componentDidMount(){this.moveDroppingItem({})}componentDidUpdate(t){this.moveDroppingItem(t)}moveDroppingItem(t){const{droppingPosition:r}=this.props;if(!r)return;const n=this.elementRef.current;if(!n)return;const i=t.droppingPosition||{left:0,top:0},{dragging:a}=this.state,s=a&&r.left!==i.left||r.top!==i.top;if(!a)this.onDragStart(r.e,{node:n,deltaX:r.left,deltaY:r.top});else if(s){const o=r.left-a.left,l=r.top-a.top;this.onDrag(r.e,{node:n,deltaX:o,deltaY:l},!0)}}getPositionParams(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return{cols:t.cols,containerPadding:t.containerPadding,containerWidth:t.containerWidth,margin:t.margin,maxRows:t.maxRows,rowHeight:t.rowHeight}}createStyle(t){const{usePercentages:r,containerWidth:n,useCSSTransforms:i}=this.props;let a;return i?a=(0,C1.setTransform)(t):(a=(0,C1.setTopLeft)(t),r&&(a.left=(0,C1.perc)(t.left/n),a.width=(0,C1.perc)(t.width/n))),a}mixinDraggable(t,r){return E1.default.createElement(r$e.DraggableCore,{disabled:!r,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:""),scale:this.props.transformScale,nodeRef:this.elementRef},t)}curryResizeHandler(t,r){return(n,i)=>r(n,i,t)}mixinResizable(t,r,n){const{cols:i,minW:a,minH:s,maxW:o,maxH:l,transformScale:c,resizeHandles:d,resizeHandle:f}=this.props,p=this.getPositionParams(),m=(0,ks.calcGridItemPosition)(p,0,0,i,0).width,x=(0,ks.calcGridItemPosition)(p,0,0,a,s),v=(0,ks.calcGridItemPosition)(p,0,0,o,l),b=[x.width,x.height],w=[Math.min(v.width,m),Math.min(v.height,1/0)];return E1.default.createElement(n$e.Resizable,{draggableOpts:{disabled:!n},className:n?void 0:"react-resizable-hide",width:r.width,height:r.height,minConstraints:b,maxConstraints:w,onResizeStop:this.curryResizeHandler(r,this.onResizeStop),onResizeStart:this.curryResizeHandler(r,this.onResizeStart),onResize:this.curryResizeHandler(r,this.onResize),transformScale:c,resizeHandles:d,handle:f},t)}onResizeHandler(t,r,n,i){let{node:a,size:s,handle:o}=r;const l=this.props[i];if(!l)return;const{x:c,y:d,i:f,maxH:p,minH:m,containerWidth:x}=this.props,{minW:v,maxW:b}=this.props;let w=s;a&&(w=(0,C1.resizeItemInDirection)(o,n,s,x),(0,XG.flushSync)(()=>{this.setState({resizing:i==="onResizeStop"?null:w})}));let{w:k,h:E}=(0,ks.calcWH)(this.getPositionParams(),w.width,w.height,c,d,o);k=(0,ks.clamp)(k,Math.max(v,1),b),E=(0,ks.clamp)(E,m,p),l.call(this,f,k,E,{e:t,node:a,size:w,handle:o})}render(){const{x:t,y:r,w:n,h:i,isDraggable:a,isResizable:s,droppingPosition:o,useCSSTransforms:l}=this.props,c=(0,ks.calcGridItemPosition)(this.getPositionParams(),t,r,n,i,this.state),d=E1.default.Children.only(this.props.children);let f=E1.default.cloneElement(d,{ref:this.elementRef,className:(0,i$e.default)("react-grid-item",d.props.className,this.props.className,{static:this.props.static,resizing:!!this.state.resizing,"react-draggable":a,"react-draggable-dragging":!!this.state.dragging,dropping:!!o,cssTransforms:l}),style:{...this.props.style,...d.props.style,...this.createStyle(c)}});return f=this.mixinResizable(f,c,s),f=this.mixinDraggable(f,a),f}}K4.default=c9;Id(c9,"propTypes",{children:$n.default.element,cols:$n.default.number.isRequired,containerWidth:$n.default.number.isRequired,rowHeight:$n.default.number.isRequired,margin:$n.default.array.isRequired,maxRows:$n.default.number.isRequired,containerPadding:$n.default.array.isRequired,x:$n.default.number.isRequired,y:$n.default.number.isRequired,w:$n.default.number.isRequired,h:$n.default.number.isRequired,minW:function(e,t){const r=e[t];if(typeof r!="number")return new Error("minWidth not Number");if(r>e.w||r>e.maxW)return new Error("minWidth larger than item width/maxWidth")},maxW:function(e,t){const r=e[t];if(typeof r!="number")return new Error("maxWidth not Number");if(r<e.w||r<e.minW)return new Error("maxWidth smaller than item width/minWidth")},minH:function(e,t){const r=e[t];if(typeof r!="number")return new Error("minHeight not Number");if(r>e.h||r>e.maxH)return new Error("minHeight larger than item height/maxHeight")},maxH:function(e,t){const r=e[t];if(typeof r!="number")return new Error("maxHeight not Number");if(r<e.h||r<e.minH)return new Error("maxHeight smaller than item height/minHeight")},i:$n.default.string.isRequired,resizeHandles:YG.resizeHandleAxesType,resizeHandle:YG.resizeHandleType,onDragStop:$n.default.func,onDragStart:$n.default.func,onDrag:$n.default.func,onResizeStop:$n.default.func,onResizeStart:$n.default.func,onResize:$n.default.func,isDraggable:$n.default.bool.isRequired,isResizable:$n.default.bool.isRequired,isBounded:$n.default.bool.isRequired,static:$n.default.bool,useCSSTransforms:$n.default.bool.isRequired,transformScale:$n.default.number,className:$n.default.string,handle:$n.default.string,cancel:$n.default.string,droppingPosition:$n.default.shape({e:$n.default.object.isRequired,left:$n.default.number.isRequired,top:$n.default.number.isRequired})});Id(c9,"defaultProps",{className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0,transformScale:1});Object.defineProperty(nC,"__esModule",{value:!0});nC.default=void 0;var Tm=mce(I),Xj=G7,o$e=u9(V4),Lr=bn,l$e=vf,QG=u9(K4),c$e=u9(xh);function u9(e){return e&&e.__esModule?e:{default:e}}function mce(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(mce=function(i,a){if(!a&&i&&i.__esModule)return i;var s,o,l={__proto__:null,default:i};if(i===null||typeof i!="object"&&typeof i!="function")return l;if(s=a?n:r){if(s.has(i))return s.get(i);s.set(i,l)}for(const c in i)c!=="default"&&{}.hasOwnProperty.call(i,c)&&((o=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(i,c))&&(o.get||o.set)?s(l,c,o):l[c]=i[c]);return l})(e,t)}function Js(e,t,r){return(t=u$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u$e(e){var t=d$e(e,"string");return typeof t=="symbol"?t:t+""}function d$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const JG="react-grid-layout";let gce=!1;try{gce=/firefox/i.test(navigator.userAgent)}catch{}class t3 extends Tm.Component{constructor(){super(...arguments),Js(this,"state",{activeDrag:null,layout:(0,Lr.synchronizeLayoutWithChildren)(this.props.layout,this.props.children,this.props.cols,(0,Lr.compactType)(this.props),this.props.allowOverlap),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null,resizing:!1,droppingDOMNode:null,children:[]}),Js(this,"dragEnterCounter",0),Js(this,"onDragStart",(t,r,n,i)=>{let{e:a,node:s}=i;const{layout:o}=this.state,l=(0,Lr.getLayoutItem)(o,t);if(!l)return;const c={w:l.w,h:l.h,x:l.x,y:l.y,placeholder:!0,i:t};return this.setState({oldDragItem:(0,Lr.cloneLayoutItem)(l),oldLayout:o,activeDrag:c}),this.props.onDragStart(o,l,l,null,a,s)}),Js(this,"onDrag",(t,r,n,i)=>{let{e:a,node:s}=i;const{oldDragItem:o}=this.state;let{layout:l}=this.state;const{cols:c,allowOverlap:d,preventCollision:f}=this.props,p=(0,Lr.getLayoutItem)(l,t);if(!p)return;const m={w:p.w,h:p.h,x:p.x,y:p.y,placeholder:!0,i:t};l=(0,Lr.moveElement)(l,p,r,n,!0,f,(0,Lr.compactType)(this.props),c,d),this.props.onDrag(l,o,p,m,a,s),this.setState({layout:d?l:(0,Lr.compact)(l,(0,Lr.compactType)(this.props),c),activeDrag:m})}),Js(this,"onDragStop",(t,r,n,i)=>{let{e:a,node:s}=i;if(!this.state.activeDrag)return;const{oldDragItem:o}=this.state;let{layout:l}=this.state;const{cols:c,preventCollision:d,allowOverlap:f}=this.props,p=(0,Lr.getLayoutItem)(l,t);if(!p)return;l=(0,Lr.moveElement)(l,p,r,n,!0,d,(0,Lr.compactType)(this.props),c,f);const x=f?l:(0,Lr.compact)(l,(0,Lr.compactType)(this.props),c);this.props.onDragStop(x,o,p,null,a,s);const{oldLayout:v}=this.state;this.setState({activeDrag:null,layout:x,oldDragItem:null,oldLayout:null}),this.onLayoutMaybeChanged(x,v)}),Js(this,"onResizeStart",(t,r,n,i)=>{let{e:a,node:s}=i;const{layout:o}=this.state,l=(0,Lr.getLayoutItem)(o,t);l&&(this.setState({oldResizeItem:(0,Lr.cloneLayoutItem)(l),oldLayout:this.state.layout,resizing:!0}),this.props.onResizeStart(o,l,l,null,a,s))}),Js(this,"onResize",(t,r,n,i)=>{let{e:a,node:s,size:o,handle:l}=i;const{oldResizeItem:c}=this.state,{layout:d}=this.state,{cols:f,preventCollision:p,allowOverlap:m}=this.props;let x=!1,v,b,w;const[k,E]=(0,Lr.withLayoutItem)(d,t,P=>{let R;return b=P.x,w=P.y,["sw","w","nw","n","ne"].indexOf(l)!==-1&&(["sw","nw","w"].indexOf(l)!==-1&&(b=P.x+(P.w-r),r=P.x!==b&&b<0?P.w:r,b=b<0?0:b),["ne","n","nw"].indexOf(l)!==-1&&(w=P.y+(P.h-n),n=P.y!==w&&w<0?P.h:n,w=w<0?0:w),x=!0),p&&!m&&(R=(0,Lr.getAllCollisions)(d,{...P,w:r,h:n,x:b,y:w}).filter(D=>D.i!==P.i).length>0,R&&(w=P.y,n=P.h,b=P.x,r=P.w,x=!1)),P.w=r,P.h=n,P});if(!E)return;v=k,x&&(v=(0,Lr.moveElement)(k,E,b,w,!0,this.props.preventCollision,(0,Lr.compactType)(this.props),f,m));const N={w:E.w,h:E.h,x:E.x,y:E.y,static:!0,i:t};this.props.onResize(v,c,E,N,a,s),this.setState({layout:m?v:(0,Lr.compact)(v,(0,Lr.compactType)(this.props),f),activeDrag:N})}),Js(this,"onResizeStop",(t,r,n,i)=>{let{e:a,node:s}=i;const{layout:o,oldResizeItem:l}=this.state,{cols:c,allowOverlap:d}=this.props,f=(0,Lr.getLayoutItem)(o,t),p=d?o:(0,Lr.compact)(o,(0,Lr.compactType)(this.props),c);this.props.onResizeStop(p,l,f,null,a,s);const{oldLayout:m}=this.state;this.setState({activeDrag:null,layout:p,oldResizeItem:null,oldLayout:null,resizing:!1}),this.onLayoutMaybeChanged(p,m)}),Js(this,"onDragOver",t=>{var k;if(t.preventDefault(),t.stopPropagation(),gce&&!((k=t.nativeEvent.target)!=null&&k.classList.contains(JG)))return!1;const{droppingItem:r,onDropDragOver:n,margin:i,cols:a,rowHeight:s,maxRows:o,width:l,containerPadding:c,transformScale:d}=this.props,f=n==null?void 0:n(t);if(f===!1)return this.state.droppingDOMNode&&this.removeDroppingPlaceholder(),!1;const p={...r,...f},{layout:m}=this.state,x=t.currentTarget.getBoundingClientRect(),v=t.clientX-x.left,b=t.clientY-x.top,w={left:v/d,top:b/d,e:t};if(this.state.droppingDOMNode){if(this.state.droppingPosition){const{left:E,top:N}=this.state.droppingPosition;(E!=v||N!=b)&&this.setState({droppingPosition:w})}}else{const E={cols:a,margin:i,maxRows:o,rowHeight:s,containerWidth:l,containerPadding:c||i},N=(0,l$e.calcXY)(E,b,v,p.w,p.h);this.setState({droppingDOMNode:Tm.createElement("div",{key:p.i}),droppingPosition:w,layout:[...m,{...p,x:N.x,y:N.y,static:!1,isDraggable:!0}]})}}),Js(this,"removeDroppingPlaceholder",()=>{const{droppingItem:t,cols:r}=this.props,{layout:n}=this.state,i=(0,Lr.compact)(n.filter(a=>a.i!==t.i),(0,Lr.compactType)(this.props),r,this.props.allowOverlap);this.setState({layout:i,droppingDOMNode:null,activeDrag:null,droppingPosition:void 0})}),Js(this,"onDragLeave",t=>{t.preventDefault(),t.stopPropagation(),this.dragEnterCounter--,this.dragEnterCounter===0&&this.removeDroppingPlaceholder()}),Js(this,"onDragEnter",t=>{t.preventDefault(),t.stopPropagation(),this.dragEnterCounter++}),Js(this,"onDrop",t=>{t.preventDefault(),t.stopPropagation();const{droppingItem:r}=this.props,{layout:n}=this.state,i=n.find(a=>a.i===r.i);this.dragEnterCounter=0,this.removeDroppingPlaceholder(),this.props.onDrop(n,i,t)})}componentDidMount(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)}static getDerivedStateFromProps(t,r){let n;return r.activeDrag?null:(!(0,Xj.deepEqual)(t.layout,r.propsLayout)||t.compactType!==r.compactType?n=t.layout:(0,Lr.childrenEqual)(t.children,r.children)||(n=r.layout),n?{layout:(0,Lr.synchronizeLayoutWithChildren)(n,t.children,t.cols,(0,Lr.compactType)(t),t.allowOverlap),compactType:t.compactType,children:t.children,propsLayout:t.layout}:null)}shouldComponentUpdate(t,r){return this.props.children!==t.children||!(0,Lr.fastRGLPropsEqual)(this.props,t,Xj.deepEqual)||this.state.activeDrag!==r.activeDrag||this.state.mounted!==r.mounted||this.state.droppingPosition!==r.droppingPosition}componentDidUpdate(t,r){if(!this.state.activeDrag){const n=this.state.layout,i=r.layout;this.onLayoutMaybeChanged(n,i)}}containerHeight(){if(!this.props.autoSize)return;const t=(0,Lr.bottom)(this.state.layout),r=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return t*this.props.rowHeight+(t-1)*this.props.margin[1]+r*2+"px"}onLayoutMaybeChanged(t,r){r||(r=this.state.layout),(0,Xj.deepEqual)(r,t)||this.props.onLayoutChange(t)}placeholder(){const{activeDrag:t}=this.state;if(!t)return null;const{width:r,cols:n,margin:i,containerPadding:a,rowHeight:s,maxRows:o,useCSSTransforms:l,transformScale:c}=this.props;return Tm.createElement(QG.default,{w:t.w,h:t.h,x:t.x,y:t.y,i:t.i,className:`react-grid-placeholder ${this.state.resizing?"placeholder-resizing":""}`,containerWidth:r,cols:n,margin:i,containerPadding:a||i,maxRows:o,rowHeight:s,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:l,transformScale:c},Tm.createElement("div",null))}processGridItem(t,r){if(!t||!t.key)return;const n=(0,Lr.getLayoutItem)(this.state.layout,String(t.key));if(!n)return null;const{width:i,cols:a,margin:s,containerPadding:o,rowHeight:l,maxRows:c,isDraggable:d,isResizable:f,isBounded:p,useCSSTransforms:m,transformScale:x,draggableCancel:v,draggableHandle:b,resizeHandles:w,resizeHandle:k}=this.props,{mounted:E,droppingPosition:N}=this.state,P=typeof n.isDraggable=="boolean"?n.isDraggable:!n.static&&d,R=typeof n.isResizable=="boolean"?n.isResizable:!n.static&&f,O=n.resizeHandles||w,D=P&&p&&n.isBounded!==!1;return Tm.createElement(QG.default,{containerWidth:i,cols:a,margin:s,containerPadding:o||s,maxRows:c,rowHeight:l,cancel:v,handle:b,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:P,isResizable:R,isBounded:D,useCSSTransforms:m&&E,usePercentages:!E,transformScale:x,w:n.w,h:n.h,x:n.x,y:n.y,i:n.i,minH:n.minH,minW:n.minW,maxH:n.maxH,maxW:n.maxW,static:n.static,droppingPosition:r?N:void 0,resizeHandles:O,resizeHandle:k},t)}render(){const{className:t,style:r,isDroppable:n,innerRef:i}=this.props,a=(0,o$e.default)(JG,t),s={height:this.containerHeight(),...r};return Tm.createElement("div",{ref:i,className:a,style:s,onDrop:n?this.onDrop:Lr.noop,onDragLeave:n?this.onDragLeave:Lr.noop,onDragEnter:n?this.onDragEnter:Lr.noop,onDragOver:n?this.onDragOver:Lr.noop},Tm.Children.map(this.props.children,o=>this.processGridItem(o)),n&&this.state.droppingDOMNode&&this.processGridItem(this.state.droppingDOMNode,!0),this.placeholder())}}nC.default=t3;Js(t3,"displayName","ReactGridLayout");Js(t3,"propTypes",c$e.default);Js(t3,"defaultProps",{autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isBounded:!1,isDraggable:!0,isResizable:!0,allowOverlap:!1,isDroppable:!1,useCSSTransforms:!0,transformScale:1,verticalCompact:!0,compactType:"vertical",preventCollision:!1,droppingItem:{i:"__dropping-elem__",h:1,w:1},resizeHandles:["se"],onLayoutChange:Lr.noop,onDragStart:Lr.noop,onDrag:Lr.noop,onDragStop:Lr.noop,onResizeStart:Lr.noop,onResize:Lr.noop,onResizeStop:Lr.noop,onDrop:Lr.noop,onDropDragOver:Lr.noop});var r3={},Ux={};Object.defineProperty(Ux,"__esModule",{value:!0});Ux.findOrGenerateResponsiveLayout=p$e;Ux.getBreakpointFromWidth=f$e;Ux.getColsFromBreakpoint=h$e;Ux.sortBreakpoints=d9;var b_=bn;function f$e(e,t){const r=d9(e);let n=r[0];for(let i=1,a=r.length;i<a;i++){const s=r[i];t>e[s]&&(n=s)}return n}function h$e(e,t){if(!t[e])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+e+" is missing!");return t[e]}function p$e(e,t,r,n,i,a){if(e[r])return(0,b_.cloneLayout)(e[r]);let s=e[n];const o=d9(t),l=o.slice(o.indexOf(r));for(let c=0,d=l.length;c<d;c++){const f=l[c];if(e[f]){s=e[f];break}}return s=(0,b_.cloneLayout)(s||[]),(0,b_.compact)((0,b_.correctBounds)(s,{cols:i}),a,i)}function d9(e){return Object.keys(e).sort(function(r,n){return e[r]-e[n]})}Object.defineProperty(r3,"__esModule",{value:!0});r3.default=void 0;var ZG=vce(I),il=xce(Yh),Yj=G7,wv=bn,Im=Ux,m$e=xce(nC);function xce(e){return e&&e.__esModule?e:{default:e}}function vce(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(vce=function(i,a){if(!a&&i&&i.__esModule)return i;var s,o,l={__proto__:null,default:i};if(i===null||typeof i!="object"&&typeof i!="function")return l;if(s=a?n:r){if(s.has(i))return s.get(i);s.set(i,l)}for(const c in i)c!=="default"&&{}.hasOwnProperty.call(i,c)&&((o=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(i,c))&&(o.get||o.set)?s(l,c,o):l[c]=i[c]);return l})(e,t)}function E8(){return E8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E8.apply(null,arguments)}function pT(e,t,r){return(t=g$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g$e(e){var t=x$e(e,"string");return typeof t=="symbol"?t:t+""}function x$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const eK=e=>Object.prototype.toString.call(e);function w_(e,t){return e==null?null:Array.isArray(e)?e:e[t]}class f9 extends ZG.Component{constructor(){super(...arguments),pT(this,"state",this.generateInitialState()),pT(this,"onLayoutChange",t=>{this.props.onLayoutChange(t,{...this.props.layouts,[this.state.breakpoint]:t})})}generateInitialState(){const{width:t,breakpoints:r,layouts:n,cols:i}=this.props,a=(0,Im.getBreakpointFromWidth)(r,t),s=(0,Im.getColsFromBreakpoint)(a,i),o=this.props.verticalCompact===!1?null:this.props.compactType;return{layout:(0,Im.findOrGenerateResponsiveLayout)(n,r,a,a,s,o),breakpoint:a,cols:s}}static getDerivedStateFromProps(t,r){if(!(0,Yj.deepEqual)(t.layouts,r.layouts)){const{breakpoint:n,cols:i}=r;return{layout:(0,Im.findOrGenerateResponsiveLayout)(t.layouts,t.breakpoints,n,n,i,t.compactType),layouts:t.layouts}}return null}componentDidUpdate(t){(this.props.width!=t.width||this.props.breakpoint!==t.breakpoint||!(0,Yj.deepEqual)(this.props.breakpoints,t.breakpoints)||!(0,Yj.deepEqual)(this.props.cols,t.cols))&&this.onWidthChange(t)}onWidthChange(t){const{breakpoints:r,cols:n,layouts:i,compactType:a}=this.props,s=this.props.breakpoint||(0,Im.getBreakpointFromWidth)(this.props.breakpoints,this.props.width),o=this.state.breakpoint,l=(0,Im.getColsFromBreakpoint)(s,n),c={...i};if(o!==s||t.breakpoints!==r||t.cols!==n){o in c||(c[o]=(0,wv.cloneLayout)(this.state.layout));let p=(0,Im.findOrGenerateResponsiveLayout)(c,r,s,o,l,a);p=(0,wv.synchronizeLayoutWithChildren)(p,this.props.children,l,a,this.props.allowOverlap),c[s]=p,this.props.onBreakpointChange(s,l),this.props.onLayoutChange(p,c),this.setState({breakpoint:s,layout:p,cols:l})}const d=w_(this.props.margin,s),f=w_(this.props.containerPadding,s);this.props.onWidthChange(this.props.width,d,l,f)}render(){const{breakpoint:t,breakpoints:r,cols:n,layouts:i,margin:a,containerPadding:s,onBreakpointChange:o,onLayoutChange:l,onWidthChange:c,...d}=this.props;return ZG.createElement(m$e.default,E8({},d,{margin:w_(a,this.state.breakpoint),containerPadding:w_(s,this.state.breakpoint),onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))}}r3.default=f9;pT(f9,"propTypes",{breakpoint:il.default.string,breakpoints:il.default.object,allowOverlap:il.default.bool,cols:il.default.object,margin:il.default.oneOfType([il.default.array,il.default.object]),containerPadding:il.default.oneOfType([il.default.array,il.default.object]),layouts(e,t){if(eK(e[t])!=="[object Object]")throw new Error("Layout property must be an object. Received: "+eK(e[t]));Object.keys(e[t]).forEach(r=>{if(!(r in e.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,wv.validateLayout)(e.layouts[r],"layouts."+r)})},width:il.default.number.isRequired,onBreakpointChange:il.default.func,onLayoutChange:il.default.func,onWidthChange:il.default.func});pT(f9,"defaultProps",{breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},containerPadding:{lg:null,md:null,sm:null,xs:null,xxs:null},layouts:{},margin:[10,10],allowOverlap:!1,onBreakpointChange:wv.noop,onLayoutChange:wv.noop,onWidthChange:wv.noop});var h9={},yce=function(){if(typeof Map<"u")return Map;function e(t,r){var n=-1;return t.some(function(i,a){return i[0]===r?(n=a,!0):!1}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var n=e(this.__entries__,r),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(r,n){var i=e(this.__entries__,r);~i?this.__entries__[i][1]=n:this.__entries__.push([r,n])},t.prototype.delete=function(r){var n=this.__entries__,i=e(n,r);~i&&n.splice(i,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var i=0,a=this.__entries__;i<a.length;i++){var s=a[i];r.call(n,s[1],s[0])}},t}()}(),C8=typeof window<"u"&&typeof document<"u"&&window.document===document,mT=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),v$e=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(mT):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),y$e=2;function b$e(e,t){var r=!1,n=!1,i=0;function a(){r&&(r=!1,e()),n&&o()}function s(){v$e(a)}function o(){var l=Date.now();if(r){if(l-i<y$e)return;n=!0}else r=!0,n=!1,setTimeout(s,t);i=l}return o}var w$e=20,S$e=["top","right","bottom","left","width","height","size","weight"],E$e=typeof MutationObserver<"u",C$e=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=b$e(this.refresh.bind(this),w$e)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,n=r.indexOf(t);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!C8||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),E$e?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!C8||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,n=r===void 0?"":r,i=S$e.some(function(a){return!!~n.indexOf(a)});i&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),bce=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},cy=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||mT},wce=n3(0,0,0,0);function gT(e){return parseFloat(e)||0}function tK(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(n,i){var a=e["border-"+i+"-width"];return n+gT(a)},0)}function k$e(e){for(var t=["top","right","bottom","left"],r={},n=0,i=t;n<i.length;n++){var a=i[n],s=e["padding-"+a];r[a]=gT(s)}return r}function _$e(e){var t=e.getBBox();return n3(0,0,t.width,t.height)}function N$e(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return wce;var n=cy(e).getComputedStyle(e),i=k$e(n),a=i.left+i.right,s=i.top+i.bottom,o=gT(n.width),l=gT(n.height);if(n.boxSizing==="border-box"&&(Math.round(o+a)!==t&&(o-=tK(n,"left","right")+a),Math.round(l+s)!==r&&(l-=tK(n,"top","bottom")+s)),!T$e(e)){var c=Math.round(o+a)-t,d=Math.round(l+s)-r;Math.abs(c)!==1&&(o-=c),Math.abs(d)!==1&&(l-=d)}return n3(i.left,i.top,o,l)}var A$e=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof cy(e).SVGGraphicsElement}:function(e){return e instanceof cy(e).SVGElement&&typeof e.getBBox=="function"}}();function T$e(e){return e===cy(e).document.documentElement}function I$e(e){return C8?A$e(e)?_$e(e):N$e(e):wce}function O$e(e){var t=e.x,r=e.y,n=e.width,i=e.height,a=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,s=Object.create(a.prototype);return bce(s,{x:t,y:r,width:n,height:i,top:r,right:t+n,bottom:i+r,left:t}),s}function n3(e,t,r,n){return{x:e,y:t,width:r,height:n}}var P$e=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=n3(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=I$e(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),R$e=function(){function e(t,r){var n=O$e(r);bce(this,{target:t,contentRect:n})}return e}(),j$e=function(){function e(t,r,n){if(this.activeObservations_=[],this.observations_=new yce,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=n}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof cy(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)||(r.set(t,new P$e(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof cy(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)&&(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new R$e(n.target,n.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),Sce=typeof WeakMap<"u"?new WeakMap:new yce,Ece=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=C$e.getInstance(),n=new j$e(t,r,this);Sce.set(this,n)}return e}();["observe","unobserve","disconnect"].forEach(function(e){Ece.prototype[e]=function(){var t;return(t=Sce.get(this))[e].apply(t,arguments)}});var D$e=function(){return typeof mT.ResizeObserver<"u"?mT.ResizeObserver:Ece}();const M$e=Object.freeze(Object.defineProperty({__proto__:null,default:D$e},Symbol.toStringTag,{value:"Module"})),F$e=WEe(M$e);Object.defineProperty(h9,"__esModule",{value:!0});h9.default=W$e;var S_=Cce(I),L$e=p9(Yh),B$e=p9(F$e),U$e=p9(V4);function p9(e){return e&&e.__esModule?e:{default:e}}function Cce(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(Cce=function(i,a){if(!a&&i&&i.__esModule)return i;var s,o,l={__proto__:null,default:i};if(i===null||typeof i!="object"&&typeof i!="function")return l;if(s=a?n:r){if(s.has(i))return s.get(i);s.set(i,l)}for(const c in i)c!=="default"&&{}.hasOwnProperty.call(i,c)&&((o=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(i,c))&&(o.get||o.set)?s(l,c,o):l[c]=i[c]);return l})(e,t)}function k8(){return k8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k8.apply(null,arguments)}function k1(e,t,r){return(t=$$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $$e(e){var t=z$e(e,"string");return typeof t=="symbol"?t:t+""}function z$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const H$e="react-grid-layout";function W$e(e){var t;return t=class extends S_.Component{constructor(){super(...arguments),k1(this,"state",{width:1280}),k1(this,"elementRef",S_.createRef()),k1(this,"mounted",!1),k1(this,"resizeObserver",void 0)}componentDidMount(){this.mounted=!0,this.resizeObserver=new B$e.default(i=>{if(this.elementRef.current instanceof HTMLElement){const s=i[0].contentRect.width;this.setState({width:s})}});const n=this.elementRef.current;n instanceof HTMLElement&&this.resizeObserver.observe(n)}componentWillUnmount(){this.mounted=!1;const n=this.elementRef.current;n instanceof HTMLElement&&this.resizeObserver.unobserve(n),this.resizeObserver.disconnect()}render(){const{measureBeforeMount:n,...i}=this.props;return n&&!this.mounted?S_.createElement("div",{className:(0,U$e.default)(this.props.className,H$e),style:this.props.style,ref:this.elementRef}):S_.createElement(e,k8({innerRef:this.elementRef},i,this.state))}},k1(t,"defaultProps",{measureBeforeMount:!1}),k1(t,"propTypes",{measureBeforeMount:L$e.default.bool}),t}(function(e){e.exports=nC.default,e.exports.utils=bn,e.exports.calculateUtils=vf,e.exports.Responsive=r3.default,e.exports.Responsive.utils=Ux,e.exports.WidthProvider=h9.default})(Lle);var rK=Lle.exports;const V$e=({project:e,onClose:t,onSave:r})=>{const[n,i]=I.useState({projectName:"",projectType:""});I.useEffect(()=>{e&&i({projectName:e.projectName,projectType:e.projectType})},[e]);const a=o=>{const{name:l,value:c}=o.target;i(d=>({...d,[l]:c}))},s=async o=>{if(o.preventDefault(),!n.projectName.trim()){alert("Project name is required.");return}try{await r({id:e.id,...n}),t()}catch(l){console.error("Failed to update project:",l)}};return u.jsx("div",{className:"fixed inset-0 bg-scrim/60 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-2xl shadow-2xl w-full max-w-lg border border-outline/20",onClick:o=>o.stopPropagation(),children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Edit Project Details"}),u.jsx("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-2 rounded-full hover:bg-surface-container-highest transition-colors",children:u.jsx(Zr,{size:20})})]}),u.jsxs("form",{onSubmit:s,children:[u.jsxs("div",{className:"space-y-5",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"projectName",className:"block text-sm font-medium text-text-secondary mb-1.5 ml-1",children:"Project Name"}),u.jsx("input",{type:"text",id:"projectName",name:"projectName",value:n.projectName,onChange:a,className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none transition-all",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"projectType",className:"block text-sm font-medium text-text-secondary mb-1.5 ml-1",children:"Project Type"}),u.jsx("select",{id:"projectType",name:"projectType",value:n.projectType,onChange:a,className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none transition-all cursor-pointer",children:yv.map(o=>u.jsx("option",{value:o,children:o},o))})]})]}),u.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[u.jsx("button",{type:"button",onClick:t,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors",children:"Cancel"}),u.jsx("button",{type:"submit",className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all active:scale-95",children:"Save Changes"})]})]})]})})},q$e=({changeOrder:e,acceptedQuotes:t,onClose:r,onSave:n})=>{var v;const{currentUser:i}=Gr(),{deleteChangeOrder:a}=E7(),[s,o]=I.useState({description:"",amount:"",type:"Materials",quoteId:void 0}),[l,c]=I.useState(!1),[d,f]=I.useState(!1);I.useEffect(()=>{e&&o({description:e.description,amount:String(e.amount),type:e.type,quoteId:e.quoteId})},[e]);const p=b=>{const{name:w,value:k}=b.target,E=w==="quoteId"?k?parseInt(k,10):null:k;o(N=>({...N,[w]:E}))},m=async b=>{if(b.preventDefault(),!s.description.trim()||!s.amount.trim()){alert("Description and amount are required.");return}c(!0);try{await n({description:s.description,amount:parseFloat(s.amount),type:s.type,quoteId:s.quoteId})}catch(w){console.error("Failed to update change order:",w)}finally{c(!1)}},x=async()=>{if(window.confirm("Are you sure you want to permanently delete this change order?")){f(!0);try{await a(e.id),Re.success("Change order deleted successfully."),r()}catch(b){Re.error(b.message),console.error("Failed to delete change order:",b)}finally{f(!1)}}};return u.jsx("div",{className:"fixed inset-0 bg-scrim/60 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-2xl shadow-2xl w-full max-w-lg border border-outline/20",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Edit Change Order"}),u.jsx("button",{onClick:r,className:"text-text-secondary hover:text-text-primary p-2 rounded-full hover:bg-surface-container-highest transition-colors",children:u.jsx(Zr,{size:20})})]}),u.jsxs("form",{onSubmit:m,className:"flex flex-col",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-text-secondary mb-1",children:"Description"}),u.jsx("input",{type:"text",id:"description",name:"description",value:s.description,onChange:p,className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-text-secondary mb-1",children:"Amount"}),u.jsx("input",{type:"number",step:"0.01",id:"amount",name:"amount",value:s.amount,onChange:p,placeholder:"e.g., -50.00",className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-text-secondary mb-1",children:"Type"}),u.jsxs("select",{id:"type",name:"type",value:s.type,onChange:p,className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",children:[u.jsx("option",{value:"Materials",children:"Materials"}),u.jsx("option",{value:"Labor",children:"Labor"})]})]}),t&&t.length>1&&u.jsxs("div",{children:[u.jsx("label",{htmlFor:"quoteId",className:"block text-sm font-medium text-text-secondary mb-1",children:"For Quote"}),u.jsx("select",{id:"quoteId",name:"quoteId",value:s.quoteId||"",onChange:p,className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",children:t.map((b,w)=>u.jsxs("option",{value:b.id,children:["Quote #",w+1]},b.id))})]})]}),u.jsxs("div",{className:"flex items-center gap-3 mt-8",children:[((v=i==null?void 0:i.roles)==null?void 0:v.includes("Admin"))&&u.jsxs("button",{type:"button",onClick:x,disabled:l||d,className:"py-3 px-6 rounded-full bg-error hover:bg-error-hover text-on-error font-semibold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed mr-auto transition-all shadow-md",children:[u.jsx(mo,{size:16}),d?"Deleting...":"Delete"]}),u.jsxs("div",{className:"flex items-center justify-end gap-3 flex-grow",children:[u.jsx("button",{type:"button",onClick:r,disabled:l||d,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors disabled:opacity-50",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:l||d,className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all disabled:opacity-50",children:l?"Saving...":"Save Changes"})]})]})]})]})})},G$e=e=>{switch(e){case sr.SCHEDULED:return"bg-green-500 text-white";case sr.ACCEPTED:return"bg-teal-500 text-white";case sr.QUOTING:return"bg-accent text-on-accent";case sr.SAMPLE_CHECKOUT:return"bg-yellow-500 text-gray-800";case sr.AWAITING_DECISION:return"bg-secondary text-on-secondary";case sr.NEW:return"bg-gray-500 text-white";case sr.COMPLETED:return"bg-indigo-500 text-white";case sr.CANCELLED:return"bg-red-700 text-white";default:return"bg-secondary text-on-secondary"}},K$e=({project:e,customer:t,activeInstaller:r,projectLead:n,currentUser:i,updateProject:a,onEdit:s,onDeleteProject:o,isDeleting:l,isLayoutEditMode:c,onSaveLayout:d,onCancelLayout:f,onResetLayout:p})=>{var P,R,O;const{users:m,systemBranding:x}=Gr(),[v,b]=I.useState(!1),w=I.useRef(null);I.useEffect(()=>{const D=L=>{w.current&&!w.current.contains(L.target)&&b(!1)};return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[]);const k=D=>{a({id:e.id,status:D}),b(!1)};sr.NEW,sr.SAMPLE_CHECKOUT,sr.AWAITING_DECISION,sr.QUOTING,sr.ACCEPTED,sr.SCHEDULED,sr.COMPLETED,sr.CANCELLED,sr.CLOSED;const E=t!=null&&t.address?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t.address)}`:"#",N=rf(e.createdAt,x==null?void 0:x.systemTimezone);return u.jsxs("div",{className:"bg-surface rounded-lg shadow-md p-6 border border-border",children:[u.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start gap-4 mb-6",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:e.projectName}),c&&u.jsx("button",{onClick:s,className:"p-1.5 text-text-secondary hover:text-text-primary rounded-md bg-background border border-border hover:border-primary transition-all",title:"Edit Project Details",children:u.jsx(Zg,{size:16})})]}),u.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[u.jsxs("span",{className:"flex items-center gap-1 text-xs font-medium px-2.5 py-0.5 rounded bg-background border border-border text-text-secondary",children:[u.jsx(r8,{size:12})," ",e.projectType]}),u.jsxs("span",{className:"flex items-center gap-1 text-xs font-medium px-2.5 py-0.5 rounded bg-background border border-border text-text-secondary",children:[u.jsx(xu,{size:12})," Created: ",N]})]})]}),u.jsxs("div",{className:"flex items-center gap-3 w-full lg:w-auto",children:[c?u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:p,className:"flex items-center px-3 py-2 text-sm font-medium text-yellow-600 bg-yellow-50 hover:bg-yellow-100 rounded-md transition-colors",title:"Reset Default Layout",children:[u.jsx(Lx,{size:16,className:"mr-1"})," Reset"]}),u.jsxs("button",{onClick:f,className:"flex items-center px-3 py-2 text-sm font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded-md transition-colors",title:"Cancel Changes",children:[u.jsx(Zr,{size:16,className:"mr-1"})," Cancel"]}),u.jsxs("button",{onClick:d,className:"flex items-center px-3 py-2 text-sm font-medium text-white bg-primary hover:bg-primary-hover rounded-md shadow-sm transition-colors",title:"Save Layout Changes",children:[u.jsx(vs,{size:16,className:"mr-1"})," Save"]})]}):u.jsx(u.Fragment,{children:((P=i==null?void 0:i.roles)==null?void 0:P.includes("Admin"))&&u.jsxs("button",{onClick:o,disabled:l,className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-text-secondary hover:text-red-600 hover:bg-red-50 rounded-md transition-colors border border-transparent hover:border-red-100",children:[u.jsx(mo,{size:16}),l?"Deleting...":"Delete"]})}),u.jsxs("div",{className:"relative",ref:w,children:[u.jsxs("button",{onClick:()=>c&&b(!v),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold uppercase tracking-wide transition-all shadow-sm 
                                ${G$e(e.status)}
                                ${c?"cursor-pointer hover:ring-2 ring-primary ring-offset-1":"cursor-default"}
                            `,children:[e.status.replace(/_/g," "),c&&u.jsx(Zg,{size:14,className:"opacity-70"})]}),v&&u.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-surface border border-border rounded-lg shadow-xl z-50 overflow-hidden",children:Object.values(sr).map(D=>u.jsx("button",{onClick:()=>k(D),className:`w-full text-left px-4 py-3 text-sm hover:bg-background transition-colors ${e.status===D?"font-bold text-primary bg-primary/5":"text-text-primary"}`,children:D},D))})]})]})]}),u.jsx("div",{className:"h-px bg-border my-4"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsxs("h3",{className:"text-xs font-bold text-text-tertiary uppercase tracking-wider mb-2 flex items-center gap-1",children:[u.jsx(lc,{size:12})," Customer"]}),u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsx(ai,{to:`/customers/${t==null?void 0:t.id}`,className:"font-semibold text-text-primary text-lg hover:text-primary transition-colors",children:(t==null?void 0:t.fullName)||"Unknown Customer"}),(t==null?void 0:t.phoneNumber)&&u.jsxs("div",{className:"flex items-center text-text-secondary text-sm pt-1",children:[u.jsx("span",{className:"mx-2 text-text-tertiary",children:""}),u.jsx(y0,{size:14,className:"mr-1 text-text-tertiary"}),u.jsx("a",{href:`tel:${t.phoneNumber}`,className:"hover:underline hover:text-primary",children:t.phoneNumber})]})]}),t!=null&&t.address?u.jsxs("a",{href:E,target:"_blank",rel:"noreferrer",className:"flex items-center gap-1.5 text-text-secondary hover:text-primary transition-colors text-sm group",children:[u.jsx(T4,{size:14,className:"text-text-tertiary group-hover:text-primary shrink-0"}),t.address]}):u.jsx("span",{className:"text-text-tertiary text-sm italic pl-5",children:"No address on file"})]}),r&&u.jsxs("div",{className:"space-y-1",children:[u.jsxs("h3",{className:"text-xs font-bold text-text-tertiary uppercase tracking-wider mb-2 flex items-center gap-1",children:[u.jsx(S8e,{size:12})," Installer"]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-xs shadow-sm",style:{backgroundColor:r.color||"#6b7280"},children:r.installerName.substring(0,2).toUpperCase()}),u.jsxs("div",{children:[u.jsx("div",{className:"font-semibold text-text-primary",children:r.installerName}),u.jsx("div",{className:"text-xs text-text-secondary",children:r.contactPhone||r.contactEmail||"No contact info"})]})]})]}),n&&u.jsxs("div",{className:"space-y-1",children:[u.jsxs("h3",{className:"text-xs font-bold text-text-tertiary uppercase tracking-wider mb-2 flex items-center gap-1",children:[u.jsx(Rh,{size:12})," Project Lead"]}),u.jsxs("div",{className:"flex items-center gap-3",children:[n.avatarUrl?u.jsx("img",{src:Ia(n.avatarUrl),alt:"Lead",className:"w-8 h-8 rounded-full object-cover shadow-sm"}):u.jsxs("div",{className:"w-8 h-8 rounded-full bg-accent text-on-accent flex items-center justify-center font-bold text-xs",children:[(R=n.firstName)==null?void 0:R[0],(O=n.lastName)==null?void 0:O[0]]}),u.jsxs("div",{children:[u.jsxs("div",{className:"font-semibold text-text-primary",children:[n.firstName," ",n.lastName]}),u.jsx("div",{className:"text-xs text-text-secondary",children:n.email})]})]})]})]})]})},X$e=({selectedProjectId:e,onProjectSelect:t})=>{const{data:r=[],isLoading:n}=Kh(),{data:i=[],isLoading:a}=Rx(),[s,o]=I.useState(""),[l,c]=I.useState(!1),d=n||a,f=I.useMemo(()=>!r||!i?[]:r.map(x=>{const v=i.find(b=>b.id===x.customerId);return{...x,customerName:v?v.fullName:"Unknown Customer"}}),[r,i]),p=I.useMemo(()=>{if(!s)return f.slice(0,10);const x=s.toLowerCase();return f.filter(v=>v.projectName.toLowerCase().includes(x)||v.customerName.toLowerCase().includes(x))},[s,f]),m=f.find(x=>x.id===e);return u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 cursor-pointer flex justify-between items-center",onClick:()=>c(!l),children:[u.jsx("span",{className:m?"text-text-primary":"text-text-tertiary",children:m?`${m.projectName} (${m.customerName})`:"Select a Project..."}),u.jsx(Wo,{size:18,className:"text-text-secondary"})]}),l&&u.jsxs("div",{className:"absolute z-20 w-full bg-surface-container-high border border-outline/20 rounded-lg mt-1 shadow-xl max-h-72 overflow-y-auto flex flex-col",children:[u.jsx("div",{className:"p-2 sticky top-0 bg-surface-container-high border-b border-outline/10",children:u.jsx("input",{type:"text",placeholder:"Search projects...",autoFocus:!0,className:"w-full bg-surface-container border border-outline/50 rounded-md px-2 py-1 text-sm text-text-primary",value:s,onChange:x=>o(x.target.value)})}),d?u.jsxs("div",{className:"p-4 text-center text-text-secondary text-sm flex items-center justify-center gap-2",children:[u.jsx(A4,{size:16,className:"animate-spin"})," Loading..."]}):p.length===0?u.jsx("div",{className:"p-4 text-center text-text-secondary text-sm",children:"No projects found."}):u.jsx("div",{className:"overflow-y-auto",children:p.map(x=>u.jsxs("div",{onClick:()=>{t(x),c(!1),o("")},className:`px-4 py-3 hover:bg-primary-container/30 cursor-pointer flex justify-between items-center ${e===x.id?"bg-primary-container/50":""}`,children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-text-primary font-medium text-sm",children:x.projectName}),u.jsx("div",{className:"text-text-secondary text-xs",children:x.customerName})]}),e===x.id&&u.jsx(ad,{size:16,className:"text-primary"})]},x.id))})]}),l&&u.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>c(!1)})]})},E_=(e,t,r)=>`${e} - ${t}${r?` (${r})`:""}`,nK=e=>e?new Date(e).toISOString().split("T")[0]:"",xT=({isOpen:e,onClose:t,editingOrder:r=null,initialProjectId:n=null,prefillData:i=null})=>{const{data:a=[]}=ab(),{data:s=[]}=y4(),{data:o=[]}=Kh();Ale();const{addMaterialOrder:l,updateMaterialOrder:c}=E4();console.log("AddEditMaterialOrderModal Render:",{addMaterialOrderType:typeof l,addMaterialOrderValue:l});const{data:d=[]}=Us({queryKey:["material_orders","history",r==null?void 0:r.id],queryFn:()=>Xse(r.id),enabled:!!r}),[f,p]=I.useState(n),[m,x]=I.useState(null),[v,b]=I.useState(""),[w,k]=I.useState(""),[E,N]=I.useState("Customer"),[P,R]=I.useState([]),[O,D]=I.useState(""),[L,B]=I.useState(null),[z,H]=I.useState(!1),[te,Y]=I.useState(!1),[W,Z]=I.useState(""),re=o.find(q=>q.id===f),X=I.useMemo(()=>s.filter(q=>q.vendorType==="Supplier"||q.vendorType==="Both"),[s]),[Q,fe]=I.useState(null);I.useEffect(()=>{(async()=>{try{fe(await Dx())}catch{console.error("Failed to load pricing settings.")}})()},[]);const ye=I.useMemo(()=>!v.trim()||m?[]:X.filter(q=>q.name.toLowerCase().includes(v.toLowerCase())),[X,v,m]),J=I.useMemo(()=>{if(O.length<2)return[];const q=O.toLowerCase(),Ne=[];return a.forEach(Pe=>{const ze=(Pe.name||"").toLowerCase().includes(q)||(Pe.manufacturerName||"").toLowerCase().includes(q);Pe.variants.forEach(De=>{const $e=(De.name||"").toLowerCase().includes(q)||(De.sku||"").toLowerCase().includes(q);(ze||$e)&&Ne.push({product:Pe,variant:De})})}),Ne},[a,O]),ce=q=>{x(q);const Ne=s.find(Pe=>Pe.id===q);if(b((Ne==null?void 0:Ne.name)||""),(Ne==null?void 0:Ne.dedicatedShippingDay)!==null&&(Ne==null?void 0:Ne.dedicatedShippingDay)!==void 0){const Pe=Ne.dedicatedShippingDay,ze=new Date;let De=Pe-ze.getDay();De<=0&&(De+=7),De<7&&(De+=7);const $e=new Date;$e.setDate(ze.getDate()+De),k(nK($e.toISOString()))}else k("")};I.useEffect(()=>{if(e)if(r){p(r.projectId),x(r.supplierId||null);const q=s.find(Pe=>Pe.id===r.supplierId);b((q==null?void 0:q.name)||""),N(r.purchaserType||"Customer"),k(nK(r.etaDate)),Z(r.notes||"");const Ne=r.lineItems.map(Pe=>{let ze,De;for(const et of a){const ut=et.variants.find(kt=>Number(kt.id)===Pe.variantId||String(kt.id)===String(Pe.variantId));if(ut){ze=et,De=ut;break}}if(!ze||!De)return null;let $e=Pe.unitPriceSold!==null&&Pe.unitPriceSold!==void 0?Pe.unitPriceSold.toFixed(2):Pe.totalCost&&Pe.quantity?(Pe.totalCost/Pe.quantity).toFixed(2):"";return{product:ze,variant:De,quantity:String(Pe.quantity),unit:Pe.unit||De.pricingUnit||De.uom||"SF",totalCost:Pe.totalCost!=null?String(Pe.totalCost):"",unitSellPrice:$e}}).filter(Boolean);R(Ne)}else if(i){p(i.projectId);const q=i.product.supplierId||i.product.manufacturerId,Ne=s.find(ze=>ze.id===q);Ne?ce(Ne.id):(x(null),b(""));let Pe="";if(Q&&i.variant.unitCost){const ze=gh(Ne,Q,E);Pe=mh(Number(i.variant.unitCost),ze.percentage,ze.method).toFixed(2)}else i.variant.retailPrice&&(Pe=Number(i.variant.retailPrice).toFixed(2));R([{product:i.product,variant:i.variant,quantity:"1",unit:i.variant.pricingUnit||i.variant.uom||"SF",totalCost:Pe,unitSellPrice:Pe}])}else p(n),x(null),b(""),N("Customer"),k(""),R([]),Z("")},[r,e,n,a,s,i,Q]);const V=(q,Ne)=>{B({product:q,variant:Ne}),D(E_(q.name,Ne.name,Ne.size))},G=q=>{N(q),Q&&P.length>0&&R(Ne=>Ne.map(Pe=>{if(Pe.variant.unitCost){const ze=Pe.product.supplierId||Pe.product.manufacturerId,De=s.find(ht=>ht.id===ze),$e=gh(De,Q,q),et=mh(Number(Pe.variant.unitCost),$e.percentage,$e.method),ut=et.toFixed(2),kt=parseFloat(Pe.quantity)||0;return{...Pe,unitSellPrice:ut,totalCost:(kt*et).toFixed(2)}}return Pe}))},ie=()=>{if(L&&!P.some(q=>q.variant.id===L.variant.id)){let q="",Ne=L.variant.pricingUnit||L.variant.uom||"SF";if(Q&&L.variant.unitCost){const Pe=s.find($e=>$e.id===(L.product.supplierId||L.product.manufacturerId)),ze=gh(Pe,Q,E);q=mh(Number(L.variant.unitCost),ze.percentage,ze.method).toFixed(2)}else L.variant.retailPrice&&(q=Number(L.variant.retailPrice).toFixed(2));if(R(Pe=>[...Pe,{product:L.product,variant:L.variant,quantity:"1",unit:Ne,totalCost:q,unitSellPrice:q}]),!m&&L.product.supplierId)ce(L.product.supplierId);else if(!m&&L.product.manufacturerId){const Pe=s.find(ze=>ze.id===L.product.manufacturerId);Pe&&(Pe.vendorType==="Supplier"||Pe.vendorType==="Both")?ce(Pe.id):Pe&&Pe.defaultSupplierId&&ce(Pe.defaultSupplierId)}D(""),B(null)}},Ee=I.useCallback((q,Ne,Pe)=>{R(ze=>{const De=[...ze];De[q][Ne]=Pe;const $e=De[q];if(Ne==="quantity"||Ne==="unitSellPrice"){const et=parseFloat(Ne==="quantity"?Pe:$e.quantity),ut=parseFloat(Ne==="unitSellPrice"?Pe:$e.unitSellPrice||"0");!isNaN(et)&&!isNaN(ut)?De[q].totalCost=(et*ut).toFixed(2):De[q].totalCost=""}return De})},[]),ne=q=>{R(Ne=>Ne.filter(Pe=>Pe.variant.id!==q))},ae=I.useCallback(q=>{const Ne=P[q],Pe=Number(Ne.variant.cartonSize||0),ze=parseFloat(Ne.quantity);if(!ze||!Pe)return;const De=Math.ceil(ze/Pe),et=(parseFloat(Ne.unitSellPrice||"0")*Pe).toFixed(2),ut=(De*parseFloat(et)).toFixed(2);R(kt=>{const ht=[...kt];return ht[q]={...ht[q],quantity:String(De),unit:"Carton",unitSellPrice:et,totalCost:ut},ht})},[P]),me=async q=>{if(q.preventDefault(),!f){Re.error("Please select a project.");return}if(!m){Re.error("Please select a supplier.");return}if(P.length===0){Re.error("Please add at least one line item.");return}Y(!0);const Ne=P.map(ze=>({sampleId:ze.variant.id,variantId:ze.variant.id,quantity:parseFloat(ze.quantity)||0,unit:ze.unit,totalCost:ze.totalCost?parseFloat(ze.totalCost):null,unitPriceSold:ze.unitSellPrice?parseFloat(ze.unitSellPrice):null})),Pe={supplierId:m,etaDate:w||null,purchaserType:E,lineItems:Ne,notes:W};console.log("Submitting Order:",{editingOrder:!!r,orderData:Pe});try{r?(console.log("Calling updateMaterialOrder..."),await c({id:r.id,data:Pe}),Re.success("Order updated successfully")):(console.log("Calling addMaterialOrder..."),await l({...Pe,projectId:f}),Re.success("Order created successfully")),t()}catch(ze){console.error("Failed to save order:",ze),Re.error("Failed to save order.")}finally{Y(!1)}};if(!e)return null;const ve=r?"Edit Material Order":"Create Material Order";return u.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/75 overflow-y-auto",children:[u.jsx("div",{className:"block w-full h-full lg:flex lg:items-center lg:justify-center lg:p-4 lg:min-h-full",children:u.jsxs("div",{className:"bg-surface-container-high w-full min-h-full lg:min-h-0 lg:h-auto lg:max-h-[90vh] lg:max-w-4xl lg:rounded-2xl shadow-2xl flex flex-col border border-outline/10 relative",children:[u.jsxs("div",{className:"p-4 md:p-6 border-b border-outline/10 flex justify-between items-center bg-surface-container-low lg:rounded-t-2xl sticky top-0 z-10",children:[u.jsxs("h2",{className:"text-2xl font-bold text-text-primary flex items-center gap-2",children:[u.jsx(Jg,{className:"text-primary"}),ve]}),u.jsx("button",{onClick:t,className:"p-2 hover:bg-surface-container-highest rounded-full text-text-secondary hover:text-text-primary transition-colors",children:u.jsx(Zr,{size:24})})]}),u.jsxs("form",{onSubmit:me,className:"flex flex-col flex-grow",children:[u.jsxs("div",{className:"p-6 overflow-y-auto flex-grow",children:[!n&&!r&&u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Project"}),u.jsx(X$e,{onProjectSelect:q=>p(q.id),selectedProjectId:f})]}),i&&f&&u.jsxs("div",{className:"mb-6 p-4 bg-primary-container/20 border border-primary-container rounded-xl text-sm text-primary flex items-center gap-2",children:[u.jsx(QE,{size:18}),"Order initiated from selected sample in project ",u.jsx("strong",{children:re==null?void 0:re.projectName}),"."]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[u.jsxs("div",{className:"relative md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Supplier"}),u.jsx("input",{type:"text",placeholder:"Search for a supplier...",value:v,onChange:q=>{b(q.target.value),x(null)},className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors",required:!0}),v&&!m&&u.jsxs("div",{className:"absolute z-20 w-full bg-surface-container-highest border border-outline/10 rounded-b-md mt-1 max-h-40 overflow-y-auto shadow-xl",children:[ye.map(q=>u.jsx("div",{onClick:()=>ce(q.id),className:"p-2 hover:bg-background cursor-pointer text-text-primary",children:q.name},q.id)),u.jsx("div",{onClick:()=>H(!0),className:"p-2 text-accent font-semibold hover:bg-background hover:text-text-primary cursor-pointer text-center border-t border-border",children:"+ Add New Supplier"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"ETA"}),u.jsx("input",{type:"date",value:w,onChange:q=>k(q.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Purchaser"}),u.jsxs("div",{className:"flex bg-surface-container-highest p-1 rounded-lg border border-outline/10",children:[u.jsx("button",{type:"button",onClick:()=>G("Customer"),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors ${E==="Customer"?"bg-surface shadow-sm text-primary":"text-text-secondary hover:text-text-primary"}`,children:"Customer"}),u.jsx("button",{type:"button",onClick:()=>G("Installer"),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors ${E==="Installer"?"bg-surface shadow-sm text-primary":"text-text-secondary hover:text-text-primary"}`,children:"Installer"})]})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-text-secondary mb-1",children:"Notes"}),u.jsx("textarea",{id:"notes",value:W,onChange:q=>Z(q.target.value),rows:2,className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors",placeholder:"Delivery instructions..."})]})]}),u.jsxs("div",{className:"bg-surface-container-low p-4 rounded-xl border border-outline/10 mb-6",children:[u.jsx("h3",{className:"font-semibold mb-3 text-text-primary",children:"Line Items"}),u.jsx("div",{className:"space-y-2 mb-4",children:P.map((q,Ne)=>{const Pe=Number(q.variant.cartonSize||0),ze=q.variant.uom||"SF";return u.jsxs("div",{className:"bg-surface-container-highest border border-outline/5 p-4 rounded-xl mb-3 relative",children:[u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-[1.5fr,1fr,auto,auto,auto,auto,auto] items-end gap-3 md:gap-2",children:[u.jsxs("div",{className:"flex flex-col overflow-hidden col-span-2 md:col-span-1 pr-6 md:pr-0",children:[u.jsx("label",{className:"text-[9px] text-text-secondary uppercase mb-1",children:"Product"}),u.jsx("span",{className:"text-sm text-text-primary md:truncate font-medium leading-tight",title:E_(q.product.name,q.variant.name,q.variant.size),children:E_(q.product.name,q.variant.name,q.variant.size)})]}),u.jsxs("div",{className:"flex flex-col col-span-2 md:col-span-1",children:[u.jsx("label",{className:"text-[9px] text-text-secondary uppercase mb-1",children:"SKU"}),u.jsx("span",{className:"text-sm text-text-secondary p-1.5 bg-surface-container rounded-md border border-outline/10 truncate",children:q.variant.sku||"-"})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-[9px] text-text-secondary uppercase mb-1",children:"Qty"}),u.jsx("input",{type:"number",placeholder:"Qty",value:q.quantity,onChange:De=>Ee(Ne,"quantity",De.target.value),className:"w-full md:w-20 p-1.5 bg-surface-container rounded-md border-transparent text-sm text-text-primary text-center font-bold"})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-[9px] text-text-secondary uppercase mb-1",children:"Unit"}),u.jsx("select",{value:q.unit,onChange:De=>Ee(Ne,"unit",De.target.value),className:"w-full md:w-16 p-1.5 bg-surface-container rounded-md border-transparent text-sm appearance-none text-center text-text-primary cursor-pointer font-medium",children:lh.map(De=>u.jsx("option",{value:De,children:De},De))})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-[9px] text-text-secondary uppercase mb-1",children:"Price"}),u.jsx("input",{type:"number",step:"0.01",placeholder:"Price",value:q.unitSellPrice||"",onChange:De=>Ee(Ne,"unitSellPrice",De.target.value),className:"w-full md:w-24 p-1.5 bg-surface-container rounded-md border-transparent text-sm font-semibold text-success text-right"})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-[9px] text-text-secondary uppercase mb-1",children:"Total"}),u.jsx("input",{type:"number",step:"0.01",placeholder:"Total",value:q.totalCost,onChange:De=>Ee(Ne,"totalCost",De.target.value),className:"w-full md:w-28 p-1.5 bg-surface-container rounded-md border-transparent text-sm text-text-primary font-bold text-right"})]}),u.jsx("button",{type:"button",onClick:()=>ne(q.variant.id),className:"absolute top-2 right-2 md:static md:mb-1 text-red-400 hover:text-red-600",children:u.jsx(N4,{size:20})})]}),q.unit!=="Carton"&&Pe>0&&u.jsx("div",{className:"mt-2 flex justify-end",children:u.jsxs("button",{type:"button",onClick:()=>ae(Ne),disabled:parseFloat(q.quantity)<=0,className:"flex items-center text-xs px-3 py-1.5 rounded-full font-bold text-on-secondary bg-secondary hover:bg-secondary-hover shadow-sm transition-colors mt-2 md:mt-0",title:`Click to convert ${q.quantity} ${q.unit} into full cartons`,children:[u.jsx(k4,{size:12,className:"mr-1"}),parseFloat(q.quantity)>0?`Convert to ${Math.ceil(parseFloat(q.quantity)/Pe)} Cartons`:"Convert to Cartons",u.jsxs("span",{className:"opacity-80 font-normal ml-1",children:["(",Pe," ",ze,"/box)"]})]})})]},q.variant.id)})}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("div",{className:"relative flex-grow",children:[u.jsx("input",{type:"text",placeholder:"Search for product to add...",value:O,onChange:q=>{D(q.target.value),B(null)},className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors"}),O&&!L&&u.jsxs("div",{className:"absolute z-10 w-full bg-surface-container-highest border border-outline/10 rounded-b-md mt-1 max-h-60 overflow-y-auto shadow-xl",children:[J.map(q=>u.jsxs("div",{onClick:()=>V(q.product,q.variant),className:"p-2 hover:bg-background cursor-pointer text-text-primary border-b border-border last:border-0",children:[u.jsx("div",{className:"font-medium",children:E_(q.product.name,q.variant.name,q.variant.size)}),u.jsxs("div",{className:"text-xs text-text-secondary flex justify-between",children:[u.jsx("span",{children:q.product.manufacturerName}),u.jsx("span",{children:q.variant.sku||"No SKU"})]})]},q.variant.id)),J.length===0&&u.jsx("div",{className:"p-4 text-center text-text-secondary text-sm",children:"No products found."})]})]}),u.jsx("button",{type:"button",onClick:ie,disabled:!L,className:"py-2 px-6 bg-primary hover:bg-primary-hover rounded-full text-on-primary font-semibold disabled:opacity-50 shadow-md",children:"Add Item"})]})]}),r&&u.jsx("div",{className:"mt-6",children:u.jsx(q7,{title:"Change History",icon:u.jsx(Mx,{className:"w-6 h-6"}),defaultOpen:!1,children:u.jsx(ub,{history:d})})})]}),u.jsxs("div",{className:"p-4 md:p-6 border-t border-outline/10 bg-surface-container-low lg:rounded-b-2xl flex justify-end gap-4 shrink-0 sticky bottom-0 z-10 lg:static",children:[u.jsx("button",{type:"button",onClick:t,className:"py-2 px-6 bg-surface hover:bg-surface-container-highest border border-outline/20 rounded-full text-text-secondary font-medium transition-colors",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:te||!f,className:"py-2 px-6 bg-primary hover:bg-primary-hover rounded-full text-on-primary font-semibold shadow-md disabled:opacity-50 transition-all",children:te?"Saving...":r?"Save Changes":"Create Order"})]})]})]})}),u.jsx(cb,{isOpen:z,onClose:()=>H(!1),vendorToEdit:null,initialVendorType:"Supplier"})]})},iK=()=>{const e=new Date;e.setDate(e.getDate()+3);const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`},Y$e=(e,t)=>`${e} - ${t}`,Q$e=({project:e})=>{const{data:t=[]}=ab(),{data:r=[]}=KE(e.id),{createSampleCheckout:n,patchSampleCheckout:i,extendSampleCheckout:a,returnSampleCheckout:s}=Qse(),[o,l]=I.useState(!1),[c,d]=I.useState([]),[f,p]=I.useState(iK()),[m,x]=I.useState(!1),[v,b]=I.useState(null),w=I.useMemo(()=>r.filter(z=>z.projectId===e.id).sort((z,H)=>z.isSelected!==H.isSelected?z.isSelected?-1:1:new Date(H.checkoutDate).getTime()-new Date(z.checkoutDate).getTime()),[r,e.id]),k=()=>{d([]),p(iK()),l(!0)},E=()=>{l(!1)},N=I.useCallback(z=>{d(z)},[]),P=async z=>{if(z.preventDefault(),!(c.length===0||!f))try{const H=c.map(te=>n.mutateAsync({projectId:e.id,variantId:te.variantId,interestVariantId:te.interestVariantId,sampleType:te.sampleType,quantity:te.quantity,expectedReturnDate:new Date(f).toISOString()}));await Promise.all(H),Re.success(`Checked out ${c.length} sample(s).`),E()}catch(H){console.error("Checkout failed",H),Re.error("Checkout failed.")}},R=async z=>{if(confirm("Are you sure you want to return this sample?"))try{await s.mutateAsync(z)}catch(H){console.error("Return failed:",H),Re.error("Failed to return sample.")}},O=async z=>{try{await a.mutateAsync(z.id)}catch(H){console.error("Extend failed:",H),Re.error("Failed to extend checkout.")}},D=async z=>{try{await i.mutateAsync({id:z.id,data:{isSelected:!z.isSelected}})}catch{Re.error("Failed to update selection.")}},L=z=>{let H,te;for(const Y of t){if(!Y.variants)continue;const W=Y.variants.find(Z=>String(Z.id)===String(z.variantId));if(W){H=Y,te=W;break}}H&&te?(b({product:H,variant:te,projectId:e.id}),x(!0)):Re.error("Could not find product details for ordering.")},B=z=>{for(const H of t){if(!H.variants)continue;const te=H.variants.find(Y=>String(Y.id)===String(z.variantId));if(te)return Y$e(H.name,te.name)}return"Unknown Sample"};return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center flex-shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(X0,{className:"drag-handle cursor-move text-text-secondary hover:text-text-primary transition-colors",size:20}),u.jsx(pd,{className:"w-6 h-6 text-primary"}),u.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Sample Checkouts"})]}),u.jsxs("button",{onClick:k,className:"bg-primary hover:bg-primary-hover text-on-primary font-semibold py-1 px-4 text-sm rounded-full flex items-center gap-1",children:[u.jsx(su,{size:16})," Check Out"]})]}),u.jsx("div",{className:"p-4 overflow-y-auto flex-grow",children:u.jsxs("div",{className:"space-y-3",children:[w.map(z=>{const H=B(z);return u.jsxs("div",{className:`bg-surface-container p-3 rounded-xl flex justify-between items-center border-l-4 ${z.isSelected?"border-tertiary bg-tertiary-container/20":"border-transparent"}`,children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-text-primary",children:H}),u.jsxs("p",{className:"text-xs text-text-secondary",children:["Expected Return: ",new Date(z.expectedReturnDate).toLocaleDateString()]}),u.jsxs("div",{className:"mt-2 flex gap-2",children:[u.jsxs("button",{onClick:()=>D(z),className:`text-xs flex items-center gap-1 px-2 py-1 rounded-full border transition-colors ${z.isSelected?"bg-tertiary-container text-on-tertiary-container border-tertiary-container/50":"bg-surface-container-high text-text-secondary border-outline/20 hover:bg-surface-container-highest"}`,children:[u.jsx($8e,{size:12}),z.isSelected?"Selected Choice":"Select"]}),z.isSelected&&u.jsxs("button",{onClick:()=>L(z),className:"text-xs flex items-center gap-1 px-2 py-1 rounded-full border border-secondary-container/50 bg-secondary-container text-on-secondary-container hover:brightness-105 transition-all",children:[u.jsx(U8e,{size:12})," Order"]})]})]}),z.actualReturnDate?u.jsxs("div",{className:"text-right",children:[u.jsxs("span",{className:"text-sm text-tertiary flex items-center justify-end",children:[u.jsx(ad,{className:"w-4 h-4 mr-1"})," Returned"]}),u.jsx("span",{className:"text-xs text-text-secondary",children:new Date(z.actualReturnDate).toLocaleDateString()})]}):u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{onClick:()=>O(z),className:"text-sm bg-primary hover:bg-primary-hover text-on-primary py-1 px-3 rounded-full flex items-center gap-1",children:[u.jsx(od,{size:14})," Extend"]}),u.jsx("button",{onClick:()=>R(z),className:"text-sm border border-outline text-text-primary hover:bg-surface-container-highest py-1 px-3 rounded-full",children:"Return"})]})]},z.id)}),w.length===0&&u.jsx("p",{className:"text-text-tertiary text-center py-8 italic text-sm",children:"No samples checked out for this project."})]})}),o&&u.jsx(Ju,{children:u.jsx("div",{className:"fixed inset-0 bg-scrim/60 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-2xl w-full max-w-3xl border border-outline/20 flex flex-col max-h-[90vh]",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h3",{className:"text-2xl font-bold text-text-primary",children:"Check Out Sample"}),u.jsx("button",{onClick:E,className:"text-text-secondary hover:text-text-primary p-2 rounded-full hover:bg-surface-container-highest",children:u.jsx(Zr,{size:20})})]}),u.jsxs("form",{onSubmit:P,className:"flex-1 flex flex-col min-h-0",children:[u.jsxs("div",{className:"space-y-4 flex-1 overflow-y-auto pr-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-text-secondary block mb-2",children:"1. Expected Return Date"}),u.jsx("input",{type:"date",value:f,onChange:z=>p(z.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-text-secondary block mb-2",children:"2. Add Samples"}),u.jsx(_oe,{onItemsChange:N})]})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-outline/10 mt-4",children:[u.jsx("button",{type:"button",onClick:E,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors",children:"Cancel"}),u.jsxs("button",{type:"submit",disabled:c.length===0||!f,className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:["Check Out (",c.length,")"]})]})]})]})})}),m&&u.jsx(Ju,{children:u.jsx(xT,{isOpen:m,onClose:()=>x(!1),initialProjectId:e.id,prefillData:v})})]})},aK={installerName:"",contactEmail:"",contactPhone:"",color:"#ffffff",type:"Managed"},m9=({isOpen:e,onClose:t,installer:r,initialData:n})=>{const[i,a]=I.useState(aK),{createInstaller:s,updateInstaller:o,deleteInstaller:l}=b7(),c=s.isPending||o.isPending,d=l.isPending;I.useEffect(()=>{e&&r?a({installerName:r.installerName||"",contactEmail:r.contactEmail||"",contactPhone:r.contactPhone||"",color:r.color||"#ffffff",type:r.type||"Managed"}):e&&!r&&a({...aK,...n})},[e,r,n]);const f=v=>{const{name:b,value:w}=v.target;let k=w;if(b==="contactPhone"){const E=w.replace(/\D/g,"").slice(0,10);E.length<=3?k=E:E.length<=6?k=`${E.slice(0,3)}-${E.slice(3)}`:k=`${E.slice(0,3)}-${E.slice(3,6)}-${E.slice(6)}`}a(E=>({...E,[b]:k}))},p=v=>{v.preventDefault(),r?o.mutate({...r,...i},{onSuccess:()=>{Re.success("Installer updated."),t()}}):s.mutate(i,{onSuccess:()=>{Re.success("Installer created."),t()}})},m=()=>{r&&window.confirm(`Are you sure you want to permanently delete ${r.installerName}? This action cannot be undone.`)&&l.mutate(r.id,{onSuccess:()=>{Re.success("Installer deleted successfully."),t()}})};if(!e)return null;const x="w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary placeholder-text-secondary focus:outline-none focus:border-primary transition-colors";return u.jsx("div",{className:"fixed inset-0 bg-black/75 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-surface-container-high w-full h-full md:h-auto md:max-w-md md:rounded-2xl shadow-2xl flex flex-col border border-outline/10",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center bg-surface-container-low md:rounded-t-2xl",children:[u.jsxs("h2",{className:"text-xl font-bold text-text-primary flex items-center gap-2",children:[u.jsx(sb,{className:"text-primary"}),r?"Edit Installer":"New Installer"]}),u.jsx("button",{onClick:t,className:"p-2 hover:bg-surface-container-highest rounded-full text-text-secondary hover:text-text-primary transition-colors",children:u.jsx(Zr,{size:24})})]}),u.jsxs("form",{onSubmit:p,className:"flex flex-col h-full md:h-auto",children:[u.jsxs("div",{className:"p-6 space-y-4 flex-grow overflow-y-auto",children:[u.jsx("input",{type:"text",name:"installerName",placeholder:"Installer Name",value:i.installerName,onChange:f,className:x,required:!0}),u.jsxs("select",{name:"type",value:i.type,onChange:f,className:`${x} cursor-pointer`,children:[u.jsx("option",{value:"Managed",children:"Managed Installer (Employee)"}),u.jsx("option",{value:"Unmanaged",children:"Unmanaged Installer (Sub)"})]}),u.jsxs("div",{className:"space-y-4 pt-2",children:[u.jsx("input",{type:"email",name:"contactEmail",placeholder:"Contact Email",value:i.contactEmail,onChange:f,className:x}),u.jsx("input",{type:"tel",name:"contactPhone",placeholder:"Contact Phone",value:i.contactPhone,onChange:f,className:x})]}),u.jsx("div",{className:"pt-4 border-t border-outline/10 mt-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("label",{htmlFor:"color",className:"text-sm font-medium text-text-secondary",children:"Calendar Color"}),u.jsx("input",{type:"color",name:"color",value:i.color,onChange:f,className:"h-10 w-20 p-1 bg-surface-container-highest border border-outline/20 rounded-md cursor-pointer"})]})})]}),u.jsxs("div",{className:"p-4 border-t border-outline/10 bg-surface-container-low md:rounded-b-2xl flex justify-end gap-3 shrink-0",children:[r&&u.jsxs("button",{type:"button",onClick:m,className:"py-2 px-6 bg-error-container hover:bg-error/20 text-error rounded-full font-semibold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed mr-auto transition-colors",disabled:c||d,children:[u.jsx(mo,{size:16}),d?"Deleting...":"Delete"]}),u.jsx("button",{type:"submit",className:"py-2 px-6 bg-primary hover:bg-primary-hover rounded-full text-on-primary font-semibold shadow-md transition-all",disabled:c||d,children:c?"Saving...":r?"Save Changes":"Create Installer"})]})]})]})})},J$e=e=>{const t=Da(),r=Tr({mutationFn:Lse,onSuccess:()=>{t.invalidateQueries({queryKey:["installers"]}),Re.success("Installer created.")},onError:a=>Re.error(`Creation failed: ${a.message}`)}),n=Tr({mutationFn:Bse,onSuccess:()=>{t.invalidateQueries({queryKey:["installers"]}),Re.success("Installer updated.")},onError:a=>Re.error(`Update failed: ${a.message}`)}),i=Tr({mutationFn:Use,onSuccess:()=>{t.invalidateQueries({queryKey:["installers"]}),Re.success("Installer deleted successfully.")},onError:a=>Re.error(`Deletion failed: ${a.message}`)});return{createInstaller:r,updateInstaller:n,deleteInstaller:i}},Z$e=({project:e,isModalOpen:t,onCloseModal:r,onOpenEditModal:n,editingQuoteForModal:i})=>{const{systemBranding:a}=Gr(),{data:s=[]}=b4(e.id),{data:o=[]}=gf(),{addQuote:l,updateQuote:c,acceptQuote:d}=w7();J$e();const[f,p]=I.useState(!1),{data:m=[]}=Us({queryKey:["quotes","history",e.id],queryFn:()=>Wse(e.id),enabled:!!e.id&&f}),[x,v]=I.useState(null),[b,w]=I.useState({installationType:"Managed Installation",materialsAmount:"",laborAmount:"",laborDepositPercentage:"50",quoteDetails:""}),[k,E]=I.useState(""),[N,P]=I.useState(null),[R,O]=I.useState(!1),D=I.useMemo(()=>{if(!k)return[];let W="Managed";return b.installationType==="Unmanaged Installer"&&(W="Unmanaged"),o.filter(Z=>Z.installerName.toLowerCase().includes(k.toLowerCase())&&(Z.type===W||!Z.type))},[o,k,b.installationType]);I.useEffect(()=>{if(N){let W="Managed";b.installationType==="Unmanaged Installer"&&(W="Unmanaged"),N.type&&N.type!==W&&(P(null),E(""))}},[b.installationType,N]);const L=I.useMemo(()=>{const W=parseFloat(b.materialsAmount)||0;if(b.installationType==="Managed Installation"){const Z=parseFloat(b.laborAmount)||0,re=parseFloat(b.laborDepositPercentage)||0;return W+Z*(re/100)}return W},[b]);I.useEffect(()=>{if(t)if(i){v(i);const W=o.find(Z=>Z.id===i.installerId);W?(P(W),E(W.installerName)):(P(null),E("")),w({installationType:i.installationType||"Managed Installation",materialsAmount:String(i.materialsAmount||""),laborAmount:String(i.laborAmount||""),laborDepositPercentage:String(i.laborDepositPercentage||"50"),quoteDetails:i.quoteDetails||""})}else v(null),w({installationType:"Managed Installation",materialsAmount:"",laborAmount:"",laborDepositPercentage:"50",quoteDetails:""}),P(null),E("")},[t,i,o]);const B=async W=>{if(W.preventDefault(),(b.installationType==="Managed Installation"||b.installationType==="Unmanaged Installer")&&!N){qr.error("Please select an installer.");return}const re={projectId:e.id,installerId:(N==null?void 0:N.id)||null,installationType:b.installationType,materialsAmount:parseFloat(b.materialsAmount)||0,laborAmount:b.installationType==="Managed Installation"?parseFloat(b.laborAmount)||0:null,laborDepositPercentage:b.installationType==="Managed Installation"?parseFloat(b.laborDepositPercentage)||50:null,quoteDetails:b.quoteDetails,poNumber:x?x.poNumber:null,status:x?x.status:cl.SENT};try{x?await c({...re,id:x.id}):await l(re),r(),qr.success(x?"Quote updated":"Quote added")}catch(X){console.error(X),qr.error("Failed to save quote")}},z=W=>{P(W),E(W.installerName)},H=()=>{O(!0)},te=async(W,Z,re)=>{W.preventDefault(),W.stopPropagation();try{re===cl.ACCEPTED?await d({id:Z.id,status:re}):await c({id:Z.id,status:re}),qr.success(`Quote ${re.toLowerCase()}`)}catch(X){console.error(X),qr.error("Failed to update quote status")}},Y=async(W,Z)=>{const re=s.find(X=>X.id===W);re&&re.poNumber!==Z&&(await c({id:W,poNumber:Z}),qr.success("PO number updated"))};return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center flex-shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(X0,{className:"drag-handle cursor-move text-text-secondary hover:text-text-primary transition-colors",size:20}),u.jsx(Jc,{className:"w-6 h-6 text-primary"}),u.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Quotes"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{onClick:()=>{v(null),n(null)},className:"bg-primary hover:bg-primary-hover text-on-primary font-semibold py-1 px-4 text-sm rounded-full flex items-center gap-1 transition-all shadow-sm",children:[u.jsx(Zl,{size:16})," Add"]}),u.jsx("button",{onClick:()=>p(!f),className:`p-2 rounded-full transition-colors ${f?"bg-primary-container text-primary font-bold":"text-text-secondary hover:text-text-primary hover:bg-surface-container-highest"}`,title:"Toggle Quote History",children:u.jsx(Mx,{size:18})})]})]}),u.jsx("div",{className:"p-4 overflow-y-auto flex-grow scrollbar-thin scrollbar-thumb-surface-container-highest",children:f?u.jsx(ub,{history:m}):u.jsxs("div",{className:"space-y-3",children:[s.map(W=>{const Z=o.find(X=>X.id===W.installerId),re=(Number(W.materialsAmount)||0)+(Number(W.laborAmount)||0);return u.jsx("div",{className:`block bg-surface-container p-3 rounded-xl border-l-4 hover:bg-surface-container-high transition-colors ${W.status===cl.ACCEPTED?"border-tertiary":W.status===cl.REJECTED?"border-error":"border-secondary"}`,children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-bold text-lg text-text-primary",children:["$",re.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),u.jsx("p",{className:"text-sm text-text-secondary font-medium",children:(Z==null?void 0:Z.installerName)||W.installationType}),u.jsxs("p",{className:"text-xs text-text-secondary mt-2 opacity-80",children:["M: $",Number(W.materialsAmount||0).toLocaleString(),", L: $",Number(W.laborAmount||0).toLocaleString()]}),u.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider bg-surface-container-highest text-text-secondary px-2 py-1 rounded-full mt-2 inline-block border border-outline/5",children:W.installationType})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"font-bold text-xs uppercase tracking-widest text-text-primary",children:W.status}),u.jsx("p",{className:"text-[10px] text-text-tertiary mt-1",children:rf(W.dateSent,a==null?void 0:a.systemTimezone)}),W.status===cl.SENT&&u.jsxs("div",{className:"flex space-x-2 mt-3 items-center",children:[u.jsx("button",{onClick:()=>n(W),className:"p-2 text-text-secondary hover:text-text-primary hover:bg-surface-container-highest rounded-full transition-colors",title:"Edit Quote",children:u.jsx(Xh,{className:"w-4 h-4"})}),u.jsx("button",{onClick:X=>te(X,W,cl.ACCEPTED),className:"p-2 bg-tertiary text-on-tertiary rounded-full hover:bg-tertiary-hover shadow-sm transition-colors",title:"Accept Quote",children:u.jsx(ad,{className:"w-4 h-4"})}),u.jsx("button",{onClick:X=>te(X,W,cl.REJECTED),className:"p-2 bg-error text-on-error rounded-full hover:bg-error-hover shadow-sm transition-colors",title:"Reject Quote",children:u.jsx(Zr,{className:"w-4 h-4"})})]}),W.status===cl.ACCEPTED&&u.jsxs("div",{className:"mt-3 flex items-center",children:[u.jsx("input",{type:"text",placeholder:"Add PO #",defaultValue:W.poNumber||"",onKeyDown:X=>{X.key==="Enter"&&Y(W.id,X.currentTarget.value)},className:"text-xs w-24 p-1.5 bg-surface-container-low border border-outline/50 rounded-lg text-text-primary focus:ring-2 focus:ring-primary/50 outline-none",id:`po-input-${W.id}`}),u.jsx("button",{onClick:()=>{const X=document.getElementById(`po-input-${W.id}`).value;Y(W.id,X)},className:"p-1.5 bg-primary text-on-primary rounded-lg hover:bg-primary-hover ml-1 shadow-sm transition-colors",title:"Save PO",children:u.jsx(vs,{className:"w-3.5 h-3.5"})})]})]})]})},W.id)}),s.length===0&&u.jsx("p",{className:"text-text-tertiary text-center py-8 italic text-sm",children:"No quotes created yet."})]})}),t&&u.jsx(Ju,{children:u.jsx("div",{className:"fixed inset-0 bg-scrim/60 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-2xl w-full max-w-2xl border border-outline/20 shadow-2xl",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h3",{className:"text-2xl font-bold text-text-primary",children:x?"Edit Quote":"Add New Quote"}),u.jsx("button",{onClick:r,className:"text-text-secondary hover:text-text-primary p-2 rounded-full hover:bg-surface-container-highest transition-colors",children:u.jsx(Zr,{size:20})})]}),u.jsxs("form",{onSubmit:B,children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-sm font-semibold text-text-secondary mb-3",children:"Installation Type"}),u.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:oFe.map(W=>u.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer group",children:[u.jsx("input",{type:"radio",name:"installationType",value:W,checked:b.installationType===W,onChange:Z=>w({...b,installationType:Z.target.value}),className:"form-radio h-5 w-5 text-primary bg-surface-container border-outline/50 focus:ring-primary"}),u.jsx("span",{className:"text-text-primary group-hover:text-primary transition-colors",children:W})]},W))})]}),(b.installationType==="Managed Installation"||b.installationType==="Unmanaged Installer")&&u.jsxs("div",{className:"relative mb-6",children:[u.jsx("label",{className:"block text-sm font-semibold text-text-secondary mb-1.5 ml-1",children:"Installer"}),u.jsx("input",{type:"text",placeholder:"Search for an installer...",value:k,onChange:W=>{E(W.target.value),P(null)},className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"}),k&&!N&&u.jsxs("div",{className:"absolute z-10 w-full bg-surface-container-high border border-outline/20 rounded-lg mt-1 max-h-48 overflow-y-auto shadow-xl",children:[D.map(W=>u.jsx("div",{onClick:()=>z(W),className:"px-4 py-2.5 hover:bg-primary-container/30 cursor-pointer text-text-primary transition-colors",children:W.installerName},W.id)),D.length===0&&u.jsxs("div",{className:"p-4 text-center text-text-secondary text-sm",children:["No results. ",u.jsx("button",{type:"button",onClick:H,className:"ml-2 text-primary font-bold hover:underline",children:"Add New"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-text-secondary mb-1.5 ml-1",children:"Materials Cost"}),u.jsx("input",{type:"number",step:"0.01",placeholder:"0.00",value:b.materialsAmount,onChange:W=>w({...b,materialsAmount:W.target.value}),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary focus:ring-2 focus:ring-primary/50 outline-none",required:!0})]}),b.installationType==="Managed Installation"&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-text-secondary mb-1.5 ml-1",children:"Labor Cost"}),u.jsx("input",{type:"number",step:"0.01",placeholder:"0.00",value:b.laborAmount,onChange:W=>w({...b,laborAmount:W.target.value}),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary focus:ring-2 focus:ring-primary/50 outline-none",required:!0})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 items-center",children:[b.installationType==="Managed Installation"&&u.jsxs("div",{className:"relative",children:[u.jsx("label",{className:"block text-sm font-semibold text-text-secondary mb-1.5 ml-1",children:"Installer Deposit %"}),u.jsx("input",{type:"number",value:b.laborDepositPercentage,onChange:W=>w({...b,laborDepositPercentage:W.target.value}),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary focus:ring-2 focus:ring-primary/50 outline-none"}),u.jsx("span",{className:"absolute right-4 top-1/2 mt-3 -translate-y-1/2 text-text-tertiary font-bold",children:"%"})]}),u.jsxs("div",{className:"bg-surface-container p-4 rounded-xl text-center self-end border border-outline/20 shadow-inner",children:[u.jsx("span",{className:"text-xs text-text-secondary uppercase font-bold tracking-wider block mb-1",children:"Required Deposit"}),u.jsxs("span",{className:"text-2xl font-bold text-text-primary",children:["$",L.toFixed(2)]})]})]}),u.jsx("textarea",{placeholder:"Scope of work and specific terms...",value:b.quoteDetails,onChange:W=>w({...b,quoteDetails:W.target.value}),className:"w-full bg-surface-container border border-outline/50 rounded-xl px-4 py-3 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none transition-all",rows:4}),u.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[u.jsx("button",{type:"button",onClick:r,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors font-medium",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:(b.installationType==="Managed Installation"||b.installationType==="Unmanaged Installer")&&!N,className:"py-3 px-8 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-bold shadow-lg transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Save Changes":"Add Quote"})]})]})]})})}),R&&u.jsx(Ju,{children:u.jsx(m9,{isOpen:R,onClose:()=>{O(!1),E("")},installer:null,initialData:{installerName:k,type:b.installationType==="Unmanaged Installer"?"Unmanaged":"Managed"}})})]})},sK=e=>e?new Date(e).toISOString().split("T")[0]:"";let Qj=0;const eze=({project:e,job:t,quotes:r,changeOrders:n})=>{const{data:i=[],isLoading:a}=gf(),s=I.useRef(!1),o=Da(),[l,c]=I.useState({projectId:e.id,poNumber:"",depositReceived:!1,contractsReceived:!1,finalPaymentReceived:!1,isOnHold:!1,appointments:[]}),d=I.useMemo(()=>r.filter(B=>B.status===cl.ACCEPTED),[r]),f=I.useMemo(()=>d.length===0?!1:d.some(B=>B.installationType==="Managed Installation"||B.installationType==="Unmanaged Installer"),[d]),p=I.useMemo(()=>d.some(B=>B.installationType==="Managed Installation"),[d]),m=I.useMemo(()=>{const B=d.map(W=>{const Z=(Number(W.materialsAmount)||0)+(Number(W.laborAmount)||0),re=n.filter(V=>V.quoteId===W.id),X=re.reduce((V,G)=>V+(Number(G.amount)||0),0),Q=Z+X,fe=W.installationType==="Managed Installation"?(Number(W.laborDepositPercentage)||0)/100:0,ye=(Number(W.materialsAmount)||0)+(Number(W.laborAmount)||0)*fe,J=re.reduce((V,G)=>{const ie=Number(G.amount)||0;return V+(G.type==="Materials"?ie:ie*fe)},0),ce=ye+J;return{subtotal:Q,deposit:ce}}),z=n.filter(W=>W.quoteId==null).reduce((W,Z)=>W+(Number(Z.amount)||0),0),H=B.reduce((W,Z)=>W+Z.subtotal,0)+z,te=B.reduce((W,Z)=>W+Z.deposit,0),Y=H-te;return{grandTotal:H,totalDeposit:te,balanceDue:Y}},[d,n]);I.useEffect(()=>{if(t){const B=Array.isArray(t.appointments)&&t.appointments.length>0,z=Array.isArray(l.appointments)&&l.appointments.length>0;if(s.current&&z&&!B)return;c({...t,projectId:e.id,appointments:(t.appointments||[]).map(H=>({...H,_tempId:H.id||Qj++}))}),s.current=!0}else s.current||(c({projectId:e.id,poNumber:"",depositReceived:!1,contractsReceived:!1,finalPaymentReceived:!1,isOnHold:!1,appointments:[{_tempId:Qj++,appointmentName:"Installation",quoteId:d.length===1?d[0].id:void 0,installerId:d.length===1?d[0].installerId:null,startDate:"",endDate:""}]}),s.current=!0)},[t,e.id,d]),I.useEffect(()=>{if(d.length===1&&l.appointments){const B=d[0].id;l.appointments.some(H=>H.quoteId!==B)&&c(H=>({...H,appointments:(H.appointments||[]).map(te=>({...te,quoteId:B,installerId:d[0].installerId}))}))}},[d,l.appointments]);const x=(B,z)=>{c(H=>({...H,[B]:z}))},v=(B,z,H)=>{c(te=>({...te,appointments:(te.appointments||[]).map(Y=>Y._tempId===B?{...Y,[z]:H}:Y)}))},b=(B,z)=>{const H=z?parseInt(z):null,te=d.find(Y=>Y.id===H);c(Y=>({...Y,appointments:(Y.appointments||[]).map(W=>W._tempId===B?{...W,quoteId:H,installerId:(te==null?void 0:te.installerId)||null}:W)}))},w=()=>{var z;const B={_tempId:Qj++,appointmentName:`Part ${(((z=l.appointments)==null?void 0:z.length)||0)+1}`,quoteId:d.length===1?d[0].id:void 0,installerId:d.length===1?d[0].installerId:null,startDate:"",endDate:""};c(H=>({...H,appointments:[...H.appointments||[],B]}))},k=B=>{c(z=>({...z,appointments:(z.appointments||[]).filter(H=>H._tempId!==B)}))},E=Tr({mutationFn:Vse,onSuccess:()=>{o.invalidateQueries({queryKey:["jobs"]}),o.invalidateQueries({queryKey:["project",e.id]})}}),N=Tr({mutationFn:ZMe,onSuccess:()=>{o.invalidateQueries({queryKey:["projects"]}),o.invalidateQueries({queryKey:["project",e.id]})}}),P=async()=>{var W,Z;const B=(W=l.appointments)==null?void 0:W[0],z=e.status===sr.ACCEPTED&&f;if(z&&(!B||!B.startDate)){Re.error("Please enter a Start Date for the first appointment to schedule the job.");return}if(f&&((Z=l.appointments)!=null&&Z.some(re=>!re.quoteId))){Re.error("All appointments must be linked to an Accepted Quote (Scope of Work).");return}if(z&&p&&(!l.depositReceived||!l.contractsReceived)){Re.error("Deposit and Contracts must be marked as received before scheduling a Managed Job.");return}const{appointments:H,...te}=l,Y=(H||[]).map(({_tempId:re,startDate:X,endDate:Q,...fe})=>({...fe,startDate:X&&!X.includes("T")?`${X}T12:00:00`:X,endDate:Q&&!Q.includes("T")?`${Q}T12:00:00`:Q}));try{await E.mutateAsync({...te,depositAmount:m.totalDeposit,appointments:Y}),z&&await N.mutateAsync({id:e.id,status:sr.SCHEDULED}),Re.success("Job details saved successfully.")}catch{Re.error("Failed to save job details. Please try again.")}},R=()=>{x("isOnHold",!l.isOnHold)},O=I.useMemo(()=>{if(!l.appointments||l.appointments.length===0)return null;const B=l.appointments.map(z=>z.endDate?new Date(z.endDate).getTime():0).sort((z,H)=>H-z);return B[0]>0?new Date(B[0]):null},[l.appointments]),D=O?new Date>=O:!1,L=e.status===sr.SCHEDULED||e.status===sr.COMPLETED;return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center flex-shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(X0,{className:"drag-handle cursor-move text-text-secondary hover:text-text-primary transition-colors",size:20}),u.jsx(xu,{className:"w-6 h-6 text-primary"}),u.jsx("h2",{className:"text-xl font-semibold text-text-primary",children:"Job Details & Scheduling"})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("button",{onClick:R,className:`font-semibold py-2 px-4 rounded-full flex items-center gap-2 transition-colors text-sm ${l.isOnHold?"bg-tertiary-container text-on-tertiary-container":"border border-outline text-text-primary hover:bg-surface-container-highest"}`,children:[u.jsx(ld,{className:"w-4 h-4"})," ",l.isOnHold?"ON HOLD":"Place Hold"]}),u.jsxs("button",{onClick:P,className:"bg-primary hover:bg-primary-hover text-on-primary font-semibold py-2 px-4 rounded-full flex items-center gap-2 text-sm disabled:opacity-50",disabled:E.isPending||N.isPending,children:[E.isPending||N.isPending?u.jsx(A4,{className:"w-4 h-4 animate-spin"}):u.jsx(vs,{className:"w-4 h-4"}),"Save Details"]})]})]}),u.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6 flex-grow overflow-hidden",children:[u.jsx("div",{className:"space-y-6 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-surface-container-highest",children:f&&u.jsxs("div",{className:"space-y-3",children:[d.length===0&&u.jsxs("div",{className:"p-3 bg-error-container text-error border border-error rounded-lg flex items-center gap-2",children:[u.jsx(ld,{size:20})," Scheduling requires at least one accepted quote."]}),(l.appointments||[]).map(B=>{var z;return d.find(H=>H.id===B.quoteId),u.jsxs("div",{className:"bg-surface-container p-4 rounded-xl border border-outline/20 relative",children:[(((z=l.appointments)==null?void 0:z.length)||0)>1&&u.jsx("button",{onClick:()=>k(B._tempId),className:"absolute -top-2 -right-2 text-text-secondary hover:text-error bg-surface-container-high p-0.5 rounded-full",children:u.jsx(N4,{size:20})}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"col-span-2",children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Appointment Name"}),u.jsx("input",{type:"text",value:B.appointmentName,onChange:H=>v(B._tempId,"appointmentName",H.target.value),className:"w-full bg-surface-container-low border border-outline/50 rounded-lg px-3 py-2 text-sm text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Start Date"}),u.jsx("input",{type:"date",value:sK(B.startDate),onChange:H=>v(B._tempId,"startDate",H.target.value),className:"w-full bg-surface-container-low border border-outline/50 rounded-lg px-3 py-2 text-sm text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"End Date"}),u.jsx("input",{type:"date",value:sK(B.endDate),onChange:H=>v(B._tempId,"endDate",H.target.value),className:"w-full bg-surface-container-low border border-outline/50 rounded-lg px-3 py-2 text-sm text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"})]}),u.jsxs("div",{className:"col-span-2",children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Scope of Work (via Quote)"}),d.length===1?u.jsx("div",{className:"w-full bg-surface-container-low border border-outline/50 rounded-lg px-3 py-2 text-sm text-text-primary font-medium",children:(()=>{const H=d[0],te=i.find(Y=>Y.id===H.installerId);return`${(te==null?void 0:te.installerName)||"Installer"} ${H.poNumber?`(PO: ${H.poNumber})`:""}`})()}):u.jsxs("select",{value:B.quoteId?String(B.quoteId):"",onChange:H=>b(B._tempId,H.target.value),className:"w-full bg-surface-container-low border border-outline/50 rounded-lg px-3 py-2 text-sm text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none cursor-pointer",disabled:d.length===0,children:[u.jsx("option",{value:"",children:"-- Select Installer (Via Quote) --"}),d.map(H=>{const te=i.find(re=>re.id===H.installerId),Y=te?te.installerName:"Unknown Installer",W=H.installationType!=="Managed Installation"?` - ${H.installationType}`:"",Z=H.poNumber?` (PO: ${H.poNumber})`:"";return u.jsx("option",{value:H.id,children:`${Y}${Z}${W}`},H.id)})]})]})]})]},B._tempId)}),u.jsxs("button",{onClick:w,className:`w-full flex items-center justify-center gap-2 text-sm font-semibold py-2 border-2 border-dashed rounded-xl transition-colors ${d.length>0?"text-primary hover:text-primary-hover border-outline/30 hover:border-primary/80 hover:bg-primary-container/20":"text-text-tertiary border-outline/20 opacity-50 cursor-not-allowed"}`,disabled:d.length===0,children:[u.jsx(su,{size:16})," Add Appointment"]})]})}),u.jsxs("div",{className:"space-y-4 flex flex-col overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-surface-container-highest",children:[u.jsxs("div",{className:"bg-surface-container p-4 rounded-xl space-y-2 border border-outline/20",children:[u.jsxs("div",{className:"flex justify-between items-center font-bold text-lg",children:[u.jsx("span",{className:"text-text-primary",children:"Job Grand Total:"}),u.jsxs("span",{className:"text-text-primary",children:["$",m.grandTotal.toFixed(2)]})]}),u.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[u.jsx("span",{className:"text-text-secondary",children:"Total Deposit Required:"}),u.jsxs("span",{className:"text-text-primary",children:["$",m.totalDeposit.toFixed(2)]})]}),u.jsxs("div",{className:"flex justify-between items-center font-bold text-lg border-t-2 border-tertiary/50 pt-2 mt-2",children:[u.jsx("span",{className:"text-text-primary",children:"Balance Due:"}),u.jsxs("span",{className:"text-tertiary",children:["$",m.balanceDue.toFixed(2)]})]})]}),p&&u.jsxs("div",{className:"pt-2 space-y-3 flex-grow",children:[u.jsxs("label",{className:`flex items-center space-x-2 ${L?"cursor-not-allowed opacity-50":"cursor-pointer"}`,children:[u.jsx("input",{type:"checkbox",checked:l.depositReceived||!1,onChange:B=>x("depositReceived",B.target.checked),disabled:L,className:"form-checkbox h-5 w-5 text-primary bg-surface-container border-outline/50 rounded focus:ring-primary"}),u.jsx("span",{className:"text-text-primary",children:"Deposit Received"})]}),u.jsxs("label",{className:`flex items-center space-x-2 ${L?"cursor-not-allowed opacity-50":"cursor-pointer"}`,children:[u.jsx("input",{type:"checkbox",checked:l.contractsReceived||!1,onChange:B=>x("contractsReceived",B.target.checked),disabled:L,className:"form-checkbox h-5 w-5 text-primary bg-surface-container border-outline/50 rounded focus:ring-primary"}),u.jsx("span",{className:"text-text-primary",children:"Contracts Received"})]}),L&&u.jsxs("label",{className:`flex items-center space-x-2 ${D?"cursor-pointer":"cursor-not-allowed opacity-50"}`,title:D?"":`Available after ${O==null?void 0:O.toLocaleDateString()}`,children:[u.jsx("input",{type:"checkbox",checked:l.finalPaymentReceived||!1,onChange:B=>x("finalPaymentReceived",B.target.checked),disabled:!D,className:"form-checkbox h-5 w-5 text-primary bg-surface-container border-outline/50 rounded focus:ring-primary"}),u.jsx("span",{className:"text-text-primary",children:"Final Payment Received"})]})]})]})]})]})},tze=({project:e,projectChangeOrders:t,acceptedQuotes:r,addChangeOrder:n,onEditChangeOrder:i})=>{const[a,s]=I.useState(""),[o,l]=I.useState(""),[c,d]=I.useState("Materials"),[f,p]=I.useState("");I.useEffect(()=>{r&&r.length>0&&p(String(r[0].id))},[r]);const m=async w=>{if(w.preventDefault(),!a||!o){alert("Please provide a description and an amount.");return}let k;if(f?k=parseInt(f,10):r.length>0&&(k=r[0].id),r.length>1&&!k){alert("Please select which quote this change order applies to.");return}await n({projectId:e.id,quoteId:k,description:a,amount:parseFloat(o),type:c}),s(""),l("")},x=w=>{if(!w||r.length<=1)return null;const k=r.findIndex(E=>E.id===w);return k===-1?"For an unknown quote":`For Quote #${k+1}`},v=r.length>1?"md:grid-cols-4":"md:grid-cols-3",b=r.length>1?"md:col-start-4":"md:col-start-3";return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center flex-shrink-0",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(X0,{className:"drag-handle cursor-move text-text-secondary hover:text-text-primary transition-colors",size:20}),u.jsx(su,{className:"w-6 h-6 text-primary"}),u.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Change Orders"})]})}),u.jsx("div",{className:"p-4 overflow-y-auto flex-grow",children:u.jsxs("div",{className:"space-y-3",children:[t.map(w=>u.jsxs("div",{className:`flex justify-between items-center p-3 rounded-lg bg-surface-container ${Number(w.amount)>=0?"text-tertiary":"text-error"}`,children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:w.description}),u.jsxs("p",{className:"text-xs text-text-secondary",children:[w.type,x(w.quoteId)&&u.jsx("span",{className:"ml-2 pl-2 border-l border-outline/20",children:x(w.quoteId)})]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsxs("span",{className:"font-bold",children:[Number(w.amount)>=0?"+":"","$",Number(w.amount).toFixed(2)]}),u.jsx("button",{onClick:()=>i(w),className:"ml-4 p-1 text-text-secondary hover:text-text-primary rounded-full hover:bg-surface-container-highest transition-colors",title:"Edit Change Order",children:u.jsx(Xh,{size:16})})]})]},w.id)),t.length===0&&u.jsx("p",{className:"text-text-secondary text-center py-4",children:"No change orders added yet."})]})}),u.jsx("div",{className:"p-4 border-t border-outline/10 bg-surface-container-low flex-shrink-0",children:u.jsxs("form",{onSubmit:m,className:`grid grid-cols-1 ${v} gap-4 items-end`,children:[u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Description"}),u.jsx("input",{type:"text",value:a,onChange:w=>s(w.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",required:!0})]}),r.length>1&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"For Quote"}),u.jsx("select",{value:f,onChange:w=>p(w.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",children:r.map((w,k)=>u.jsxs("option",{value:String(w.id),children:["Quote #",k+1]},w.id))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Type"}),u.jsxs("select",{value:c,onChange:w=>d(w.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",children:[u.jsx("option",{value:"Materials",children:"Materials"}),u.jsx("option",{value:"Labor",children:"Labor"})]})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Amount"}),u.jsx("input",{type:"number",step:"0.01",value:o,onChange:w=>l(w.target.value),placeholder:"e.g., -50.00",className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",required:!0})]}),u.jsx("button",{type:"submit",className:`bg-primary hover:bg-primary-hover text-on-primary font-bold py-2.5 px-4 rounded-full transition-all shadow-md active:scale-95 ${b}`,children:"Add"})]})})]})},rze=({project:e,orders:t,isModalOpen:r,onCloseModal:n,editingOrder:i,onEditOrder:a})=>{const{currentUser:s,systemBranding:o}=Gr(),{data:l=[]}=ab(),{deleteMaterialOrder:c}=E4(),d=async p=>{if(window.confirm("Are you sure you want to delete this material order? This action cannot be undone."))try{await c(p),Re.success("Order deleted successfully.")}catch(m){Re.error("Failed to delete order."),console.error("Failed to delete order:",m)}},f=(p,m)=>{if(!l)return m;const x=l.flatMap(v=>v.variants).find(v=>v.id===String(p));return(x==null?void 0:x.pricingUnit)||m||""};return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center flex-shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(X0,{className:"drag-handle cursor-move text-text-secondary hover:text-text-primary transition-colors",size:20}),u.jsx(Jg,{className:"w-6 h-6 text-primary"}),u.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Material Orders"})]}),u.jsx("button",{onClick:()=>a(null),className:"bg-primary hover:bg-primary-hover text-on-primary font-semibold py-1 px-4 text-sm rounded-full",children:"Add Order"})]}),u.jsx("div",{className:"p-4 overflow-y-auto flex-grow scrollbar-thin scrollbar-thumb-surface-container-highest",children:t.length===0?u.jsx("p",{className:"text-text-secondary text-center py-4",children:"No material orders placed yet."}):u.jsx("div",{className:"space-y-4",children:t.map(p=>{var m;return u.jsxs("div",{className:"bg-surface-container p-4 rounded-xl border border-outline/20",children:[u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-text-primary",children:p.supplierName||"N/A"}),u.jsxs("p",{className:"text-xs text-text-secondary",children:["Order Date: ",rf(p.orderDate.split("T")[0]+"T12:00:00",o==null?void 0:o.systemTimezone)]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-xs font-medium bg-secondary-container text-on-secondary-container px-2 py-0.5 rounded-full",children:p.status}),u.jsxs("p",{className:"text-xs text-text-secondary",children:["ETA: ",p.etaDate?rf(p.etaDate.split("T")[0]+"T12:00:00",o==null?void 0:o.systemTimezone):"N/A"]})]}),u.jsx("button",{onClick:()=>a(p),className:"p-1.5 text-text-secondary hover:text-text-primary rounded-full hover:bg-surface-container-highest",children:u.jsx(Xh,{size:16})}),((m=s==null?void 0:s.roles)==null?void 0:m.includes("Admin"))&&u.jsx("button",{onClick:()=>d(p.id),className:"p-1.5 text-error hover:text-error-hover rounded-full hover:bg-error-container/50",children:u.jsx(mo,{size:16})})]})]}),u.jsx("ul",{className:"space-y-2 text-sm border-t border-outline/20 pt-3",children:p.lineItems.map(x=>u.jsxs("li",{className:"flex justify-between items-center text-text-secondary",children:[u.jsxs("span",{children:[x.quantity," ",f(x.sampleId,x.unit)," x ",`${x.style}${x.color?` - ${x.color}`:""}`]}),x.totalCost!=null&&u.jsx("span",{children:Um(Number(x.totalCost))})]},x.id))})]},p.id)})})}),r&&u.jsx(Ju,{children:u.jsx(xT,{isOpen:r,onClose:n,editingOrder:i,initialProjectId:e.id})})]})},g9=()=>rr("/api/jobs"),nze=async e=>{const t=await fetch(`${g9()}/${e}/notes`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch job notes");return t.json()},ize=async(e,t)=>{const r=await fetch(`${g9()}/${e}/notes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t}),credentials:"include"});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to add note")}return r.json()},aze=async e=>{const t=`${g9()}/notes/${e}/pin`,r=await fetch(t,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include"});if(!r.ok)throw new Error("Failed to toggle pin");return r.json()},oK=/@\[(product|project|user|customer|installer):([^|]+)\|([^\]]+)\]/g,i3=({content:e})=>{if(!e)return null;const t=[];let r=0,n;for(;(n=oK.exec(e))!==null;){n.index>r&&t.push(e.substring(r,n.index));const[i,a,s,o]=n;a==="project"?t.push(u.jsxs(ai,{to:`/projects/${s}`,className:"inline-flex items-center text-indigo-700 font-medium hover:underline bg-indigo-100 px-1.5 py-0.5 rounded text-xs mx-0.5 align-baseline",children:[" ",o]},n.index)):a==="product"?t.push(u.jsxs(ai,{to:`/samples?search=${encodeURIComponent(o)}`,className:"inline-flex items-center text-teal-700 font-medium hover:underline bg-teal-100 px-1.5 py-0.5 rounded text-xs mx-0.5 align-baseline",children:[" ",o]},n.index)):a==="user"?t.push(u.jsxs("span",{className:"inline-flex items-center text-blue-700 font-medium bg-blue-100 px-1.5 py-0.5 rounded text-xs mx-0.5 align-baseline cursor-default",children:["@",o]},n.index)):a==="customer"?t.push(u.jsxs(ai,{to:`/customers/${s}`,className:"inline-flex items-center text-amber-700 font-medium hover:underline bg-amber-100 px-1.5 py-0.5 rounded text-xs mx-0.5 align-baseline",children:[" ",o]},n.index)):a==="installer"?t.push(u.jsxs(ai,{to:`/installers/${s}`,className:"inline-flex items-center text-pink-700 font-medium hover:underline bg-pink-100 px-1.5 py-0.5 rounded text-xs mx-0.5 align-baseline",children:[" ",o]},n.index)):t.push(i),r=oK.lastIndex}return r<e.length&&t.push(e.substring(r)),u.jsx("span",{className:"whitespace-pre-wrap leading-relaxed",children:t})};function sze(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function oze(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function lze(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function vT(e){return sze(e)||oze(e)||lze()}function Zc(){return Zc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zc.apply(this,arguments)}function cze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dze(e,t,r){return t&&uze(e.prototype,t),e}function xn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _8(e,t){return _8=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},_8(e,t)}function fze(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_8(e,t)}function Sv(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Sv=function(r){return typeof r}:Sv=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Sv(e)}function HN(e){return typeof Symbol=="function"&&Sv(Symbol.iterator)==="symbol"?HN=function(r){return Sv(r)}:HN=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":Sv(r)},HN(e)}function hze(e,t){return t&&(HN(t)==="object"||typeof t=="function")?t:xn(e)}function yT(e){return yT=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},yT(e)}function hn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pze=function(e,t,r,n,i,a,s,o){if(!e){var l;if(t===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,i,a,s,o],d=0;l=new Error(t.replace(/%s/g,function(){return c[d++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}},mze=pze;const uy=Bs(mze);function gze(e){if(Array.isArray(e))return e}function xze(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var s=e[Symbol.iterator](),o;!(n=(o=s.next()).done)&&(r.push(o.value),!(t&&r.length===t));n=!0);}catch(l){i=!0,a=l}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw a}}return r}function vze(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function bT(e,t){return gze(e)||xze(e,t)||vze()}function yze(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function bze(e,t){if(e==null)return{};var r=yze(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var db=function(t){return t===Object(t)?Object.keys(t):[]},kce=function(t){return t===Object(t)?Object.values(t):[]};function _ce(e,t){var r=Object.assign({},e);return WN(e)&&WN(t)&&db(t).forEach(function(n){WN(t[n])?n in e?r[n]=_ce(e[n],t[n]):Object.assign(r,qd({},n,t[n])):Object.assign(r,qd({},n,t[n]))}),r}var N8=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.reduce(function(a,s){return _ce(a,s)},t)},wze=function(t,r){var n=Object.assign({},t);if(r)for(var i=0;i<r.length;i++)delete n[r[i]];return n},WN=function(t){return t===Object(t)&&!(t instanceof Date)&&!Array.isArray(t)},Sze=function(t){return(t||[]).filter(Boolean)},x9=function(t){return t[0]==="&"},Eze=function(t){return!x9(t)},lK=function(t){return t.replace(/-(\w)/g,function(r,n){return n.toUpperCase()})},Cze=function(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=db(t),i={},a=0,s=n.length;a<s;a+=1){var o=n[a],l=Object.prototype.toString.call(t[o])!=="[object Object]"||o[0]===":"||o[0]==="@"||r.indexOf(o)>=0;l&&(i[o]=t[o])}return i},Nce=function(t,r){for(var n=r.map(lK),i=db(t),a={},s=0,o=i.length;s<o;s+=1){var l=i[s];(r.indexOf(l)>=0||n.indexOf(lK(l))>=0)&&(a[l]=t[l])}return a},kze=function e(t,r){for(var n=N8.apply(void 0,[{},wze(t,r)].concat(Lo(kce(Nce(t,r))))),i=db(n).filter(x9),a=0,s=i.length;a<s;a+=1){var o=i[a],l=e(n[o],r);r.indexOf(o)>=0?(delete n[o],n=N8({},n,l)):n[o]=l}return n};function cK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function uK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cK(Object(r),!0).forEach(function(n){qd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var _ze=["animationName"],Ace=function(t){var r=t.style,n=t.className;return uK(uK({},r?{style:Cze(r,_ze)}:{}),n?{className:n}:{})},Tce=I.createContext(Ace);Tce.Provider;var Ice=function(t){if(t){if(typeof t=="string")return[t];if(!Array.isArray(t)){var r=t;return db(t).reduce(function(n,i){return n.concat(r[i]?[i]:[])},[])}}else return[];return t},Nze={},Aze=function(t){return function(r,n){var i=n||Nze;t.memoize=t.memoize||new WeakMap;var a;t.memoize.has(i)?a=t.memoize.get(i):(a={},t.memoize.set(i,a));var s=Ice(r).join(" ");return s in a?a[s]:a[s]=t(r||[],n)}};function dK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dK(Object(r),!0).forEach(function(n){qd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Tze=function(t){var r=t&&db(t)[0];return r&&r.split("__")[0].split("--")[0]},Ize=function(t,r,n){if(t){var i=t.split(" ")[0],a=[].concat(Lo(r.length===0?n.map(function(s){return"".concat(i,"--").concat(s.substring(1))}):[]),Lo(r.map(function(s){return"".concat(i,"__").concat(s)})));return r.length===0?[t].concat(Lo(a)):a}};function Oce(e){var t=e.style,r=e.className,n=e.classNames,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ace,a=r||Tze(n)||(t==null?void 0:t.className),s=typeof t=="function"?t:Aze(function(f,p){var m=Ice(f);uy(Array.isArray(m),"First parameter must be a string, an array of strings, a plain object with boolean values, or a falsy value."),uy(!p||WN(p),"Optional second parameter must be a plain object.");var x=m.filter(x9),v=m.filter(Eze),b=v.length>0?function(E){return kce(Nce(E,v))}:function(E){return[E]},w=function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return b(kze(N,x))},k=Ize(a,v,x);return Oce(_1(_1(_1({},(t||p)&&{style:N8.apply(void 0,[{}].concat(Lo(w(p)),Lo(w(t))))}),k&&{className:k.join(" ")}),n&&{classNames:n}),i)}),o=_1({},typeof t=="function"?t:{style:t}),l=Lo(new Set([].concat(Lo(o.className?o.className.split(" "):[]),Lo(a?a.split(" "):[])))),c=n?Sze(l.map(function(f){return n[f]})):l,d=i(_1(_1({},o),c.length>0?{className:c.join(" ")}:{}));return Object.assign(s,d),s}function fK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function bw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fK(Object(r),!0).forEach(function(n){qd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Oze=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.reduce(function(i,a){return bw(bw(bw({},i),typeof a=="function"?a:{}),{},{style:bw(bw({},i.style),typeof a=="function"?a.style:a)})},{})},v9=function(t,r,n){var i=r.style,a=r.className,s=r.classNames,o=I.useContext(Tce),l=I.useMemo(function(){return Oce({style:i,className:a,classNames:s},o)},[i,a,s,o]);return l(n,t)},VN=function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},Bd={id:"__id__",display:"__display__"},hK=function(t,r){uy(r==="id"||r==="display",'Second arg must be either "id" or "display", got: "'.concat(r,'"'));var n=t.indexOf(Bd.display),i=t.indexOf(Bd.id);return n<0&&(n=null),i<0&&(i=null),uy(n!==null||i!==null,"The markup '".concat(t,"' does not contain either of the placeholders '__id__' or '__display__'")),n!==null&&i!==null?r==="id"&&i<=n||r==="display"&&n<=i?0:1:0},Pze=function(t){var r=/^\/(.+)\/(\w+)?$/;return new RegExp(t.map(function(n){var i=r.exec(n.toString()),a=bT(i,3),s=a[1],o=a[2];return uy(!o,"RegExp flags are not supported. Change /".concat(s,"/").concat(o," into /").concat(s,"/")),"(".concat(s,")")}).join("|"),"g")},Pce=function(t){var r=0;return t.indexOf("__id__")>=0&&r++,t.indexOf("__display__")>=0&&r++,r},Rze=function(){},sC=function(t,r,n){for(var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Rze,a=Pze(r.map(function(P){return P.regex})),s=2,o=r.map(function(P){var R=P.markup,O=s;return s+=Pce(R)+1,O}),l,c=0,d=0;(l=a.exec(t))!==null;){var f=o.find(function(P){return!!l[P]}),p=o.indexOf(f),m=r[p],x=m.markup,v=m.displayTransform,b=f+hK(x,"id"),w=f+hK(x,"display"),k=l[b],E=v(k,l[w]),N=t.substring(c,l.index);i(N,c,d),d+=N.length,n(l[0],l.index,d,k,E,p,c),d+=E.length,c=a.lastIndex}c<t.length&&i(t.substring(c),c,d)},$m=function(t,r){var n="";return sC(t,r,function(i,a,s,o,l){n+=l},function(i){n+=i}),n},jo=function(t,r,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"START";if(typeof n!="number")return n;var a,s=function(c,d,f){a===void 0&&f+c.length>=n&&(a=d+n-f)},o=function(c,d,f,p,m,x,v){a===void 0&&f+m.length>n&&(i==="NULL"?a=null:a=d+(i==="END"?c.length:0))};return sC(t,r,o,s),a===void 0?t.length:a},x2=function(t,r,n,i){return t.substring(0,r)+i+t.substring(n)},jze=function(t,r,n,i){var a=n.selectionStartBefore,s=n.selectionEndBefore,o=n.selectionEndAfter,l=$m(t,i),c=l.length-r.length;a==="undefined"&&(a=o+c),s==="undefined"&&(s=a),a===s&&s===o&&l.length===r.length&&(a=a-1);var d=r.slice(a,o),f=Math.min(a,o),p=s;a===o&&(p=Math.max(s,a+c));var m=jo(t,i,f,"START"),x=jo(t,i,p,"END"),v=jo(t,i,f,"NULL"),b=jo(t,i,p,"NULL"),w=v===null||b===null,k=x2(t,m,x,d);if(!w){var E=$m(k,i);if(E!==r){for(f=0;r[f]===E[f];)f++;d=r.slice(f,o),p=l.lastIndexOf(r.substring(o)),m=jo(t,i,f,"START"),x=jo(t,i,p,"END"),k=x2(t,m,x,d)}}return k},pK=function(t,r,n){var i=n,a=!1,s=function(l,c,d,f,p,m,x){d<=n&&d+p.length>n&&(i=d,a=!0)};if(sC(t,r,s),a)return i},Vw=function(t,r){var n=[];return sC(t,r,function(i,a,s,o,l,c,d){n.push({id:o,display:l,childIndex:c,index:a,plainTextIndex:s})}),n},Rce=function(t,r){return"".concat(t,"-").concat(r)},C_=function(t){return Object.values(t).reduce(function(r,n){var i=n.results;return r+i.length},0)},Dze=function(t,r){var n=Vw(t,r),i=n[n.length-1];return i?i.plainTextIndex+i.display.length:0},Mze=function(t){var r=VN(t),n=t[t.indexOf(Bd.display)+Bd.display.length],i=t[t.indexOf(Bd.id)+Bd.id.length];return new RegExp(r.replace(Bd.display,"([^".concat(VN(n||""),"]+?)")).replace(Bd.id,"([^".concat(VN(i||""),"]+?)")))},Op=function(t){return I.Children.toArray(t).map(function(r){var n=r.props,i=n.markup,a=n.regex,s=n.displayTransform;return{markup:i,regex:a?Fze(a,i):Mze(i),displayTransform:s||function(o,l){return l||o}}})},Fze=function(t,r){var n=new RegExp(t.toString()+"|").exec("").length-1,i=Pce(r);return uy(n===i,"Number of capturing groups in RegExp ".concat(t.toString()," (").concat(n,") does not match the number of placeholders in the markup '").concat(r,"' (").concat(i,")")),t},Lze=function(t,r,n){return t.replace(Bd.id,r).replace(Bd.display,n)},Bze=[{base:"A",letters:/(&#65;|&#9398;|&#65313;|&#192;|&#193;|&#194;|&#7846;|&#7844;|&#7850;|&#7848;|&#195;|&#256;|&#258;|&#7856;|&#7854;|&#7860;|&#7858;|&#550;|&#480;|&#196;|&#478;|&#7842;|&#197;|&#506;|&#461;|&#512;|&#514;|&#7840;|&#7852;|&#7862;|&#7680;|&#260;|&#570;|&#11375;|[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F])/g},{base:"AA",letters:/(&#42802;|[\uA732])/g},{base:"AE",letters:/(&#198;|&#508;|&#482;|[\u00C6\u01FC\u01E2])/g},{base:"AO",letters:/(&#42804;|[\uA734])/g},{base:"AU",letters:/(&#42806;|[\uA736])/g},{base:"AV",letters:/(&#42808;|&#42810;|[\uA738\uA73A])/g},{base:"AY",letters:/(&#42812;|[\uA73C])/g},{base:"B",letters:/(&#66;|&#9399;|&#65314;|&#7682;|&#7684;|&#7686;|&#579;|&#386;|&#385;|[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181])/g},{base:"C",letters:/(&#67;|&#9400;|&#65315;|&#262;|&#264;|&#266;|&#268;|&#199;|&#7688;|&#391;|&#571;|&#42814;|[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E])/g},{base:"D",letters:/(&#68;|&#9401;|&#65316;|&#7690;|&#270;|&#7692;|&#7696;|&#7698;|&#7694;|&#272;|&#395;|&#394;|&#393;|&#42873;|&#208;|[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779\u00D0])/g},{base:"DZ",letters:/(&#497;|&#452;|[\u01F1\u01C4])/g},{base:"Dz",letters:/(&#498;|&#453;|[\u01F2\u01C5])/g},{base:"E",letters:/(&#69;|&#9402;|&#65317;|&#200;|&#201;|&#202;|&#7872;|&#7870;|&#7876;|&#7874;|&#7868;|&#274;|&#7700;|&#7702;|&#276;|&#278;|&#203;|&#7866;|&#282;|&#516;|&#518;|&#7864;|&#7878;|&#552;|&#7708;|&#280;|&#7704;|&#7706;|&#400;|&#398;|[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E])/g},{base:"F",letters:/(&#70;|&#9403;|&#65318;|&#7710;|&#401;|&#42875;|[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B])/g},{base:"G",letters:/(&#71;|&#9404;|&#65319;|&#500;|&#284;|&#7712;|&#286;|&#288;|&#486;|&#290;|&#484;|&#403;|&#42912;|&#42877;|&#42878;|[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E])/g},{base:"H",letters:/(&#72;|&#9405;|&#65320;|&#292;|&#7714;|&#7718;|&#542;|&#7716;|&#7720;|&#7722;|&#294;|&#11367;|&#11381;|&#42893;|[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D])/g},{base:"I",letters:/(&#73;|&#9406;|&#65321;|&#204;|&#205;|&#206;|&#296;|&#298;|&#300;|&#304;|&#207;|&#7726;|&#7880;|&#463;|&#520;|&#522;|&#7882;|&#302;|&#7724;|&#407;|[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197])/g},{base:"J",letters:/(&#74;|&#9407;|&#65322;|&#308;|&#584;|[\u004A\u24BF\uFF2A\u0134\u0248])/g},{base:"K",letters:/(&#75;|&#9408;|&#65323;|&#7728;|&#488;|&#7730;|&#310;|&#7732;|&#408;|&#11369;|&#42816;|&#42818;|&#42820;|&#42914;|[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2])/g},{base:"L",letters:/(&#76;|&#9409;|&#65324;|&#319;|&#313;|&#317;|&#7734;|&#7736;|&#315;|&#7740;|&#7738;|&#321;|&#573;|&#11362;|&#11360;|&#42824;|&#42822;|&#42880;|[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780])/g},{base:"LJ",letters:/(&#455;|[\u01C7])/g},{base:"Lj",letters:/(&#456;|[\u01C8])/g},{base:"M",letters:/(&#77;|&#9410;|&#65325;|&#7742;|&#7744;|&#7746;|&#11374;|&#412;|[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C])/g},{base:"N",letters:/(&#78;|&#9411;|&#65326;|&#504;|&#323;|&#209;|&#7748;|&#327;|&#7750;|&#325;|&#7754;|&#7752;|&#544;|&#413;|&#42896;|&#42916;|&#330;|[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4\u014A])/g},{base:"NJ",letters:/(&#458;|[\u01CA])/g},{base:"Nj",letters:/(&#459;|[\u01CB])/g},{base:"O",letters:/(&#79;|&#9412;|&#65327;|&#210;|&#211;|&#212;|&#7890;|&#7888;|&#7894;|&#7892;|&#213;|&#7756;|&#556;|&#7758;|&#332;|&#7760;|&#7762;|&#334;|&#558;|&#560;|&#214;|&#554;|&#7886;|&#336;|&#465;|&#524;|&#526;|&#416;|&#7900;|&#7898;|&#7904;|&#7902;|&#7906;|&#7884;|&#7896;|&#490;|&#492;|&#216;|&#510;|&#390;|&#415;|&#42826;|&#42828;|[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C])/g},{base:"OE",letters:/(&#338;|[\u0152])/g},{base:"OI",letters:/(&#418;|[\u01A2])/g},{base:"OO",letters:/(&#42830;|[\uA74E])/g},{base:"OU",letters:/(&#546;|[\u0222])/g},{base:"P",letters:/(&#80;|&#9413;|&#65328;|&#7764;|&#7766;|&#420;|&#11363;|&#42832;|&#42834;|&#42836;|[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754])/g},{base:"Q",letters:/(&#81;|&#9414;|&#65329;|&#42838;|&#42840;|&#586;|[\u0051\u24C6\uFF31\uA756\uA758\u024A])/g},{base:"R",letters:/(&#82;|&#9415;|&#65330;|&#340;|&#7768;|&#344;|&#528;|&#530;|&#7770;|&#7772;|&#342;|&#7774;|&#588;|&#11364;|&#42842;|&#42918;|&#42882;|[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782])/g},{base:"S",letters:/(&#83;|&#9416;|&#65331;|&#7838;|&#346;|&#7780;|&#348;|&#7776;|&#352;|&#7782;|&#7778;|&#7784;|&#536;|&#350;|&#11390;|&#42920;|&#42884;|[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784])/g},{base:"T",letters:/(&#84;|&#9417;|&#65332;|&#7786;|&#356;|&#7788;|&#538;|&#354;|&#7792;|&#7790;|&#358;|&#428;|&#430;|&#574;|&#42886;|[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786])/g},{base:"TH",letters:/(&#222;|[\u00DE])/g},{base:"TZ",letters:/(&#42792;|[\uA728])/g},{base:"U",letters:/(&#85;|&#9418;|&#65333;|&#217;|&#218;|&#219;|&#360;|&#7800;|&#362;|&#7802;|&#364;|&#220;|&#475;|&#471;|&#469;|&#473;|&#7910;|&#366;|&#368;|&#467;|&#532;|&#534;|&#431;|&#7914;|&#7912;|&#7918;|&#7916;|&#7920;|&#7908;|&#7794;|&#370;|&#7798;|&#7796;|&#580;|[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244])/g},{base:"V",letters:/(&#86;|&#9419;|&#65334;|&#7804;|&#7806;|&#434;|&#42846;|&#581;|[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245])/g},{base:"VY",letters:/(&#42848;|[\uA760])/g},{base:"W",letters:/(&#87;|&#9420;|&#65335;|&#7808;|&#7810;|&#372;|&#7814;|&#7812;|&#7816;|&#11378;|[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72])/g},{base:"X",letters:/(&#88;|&#9421;|&#65336;|&#7818;|&#7820;|[\u0058\u24CD\uFF38\u1E8A\u1E8C])/g},{base:"Y",letters:/(&#89;|&#9422;|&#65337;|&#7922;|&#221;|&#374;|&#7928;|&#562;|&#7822;|&#376;|&#7926;|&#7924;|&#435;|&#590;|&#7934;|[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE])/g},{base:"Z",letters:/(&#90;|&#9423;|&#65338;|&#377;|&#7824;|&#379;|&#381;|&#7826;|&#7828;|&#437;|&#548;|&#11391;|&#11371;|&#42850;|[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762])/g},{base:"a",letters:/(&#97;|&#9424;|&#65345;|&#7834;|&#224;|&#225;|&#226;|&#7847;|&#7845;|&#7851;|&#7849;|&#227;|&#257;|&#259;|&#7857;|&#7855;|&#7861;|&#7859;|&#551;|&#481;|&#228;|&#479;|&#7843;|&#229;|&#507;|&#462;|&#513;|&#515;|&#7841;|&#7853;|&#7863;|&#7681;|&#261;|&#11365;|&#592;|[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250])/g},{base:"aa",letters:/(&#42803;|[\uA733])/g},{base:"ae",letters:/(&#230;|&#509;|&#483;|[\u00E6\u01FD\u01E3])/g},{base:"ao",letters:/(&#42805;|[\uA735])/g},{base:"au",letters:/(&#42807;|[\uA737])/g},{base:"av",letters:/(&#42809;|&#42811;|[\uA739\uA73B])/g},{base:"ay",letters:/(&#42813;|[\uA73D])/g},{base:"b",letters:/(&#98;|&#9425;|&#65346;|&#7683;|&#7685;|&#7687;|&#384;|&#387;|&#595;|[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253])/g},{base:"c",letters:/(&#99;|&#9426;|&#65347;|&#263;|&#265;|&#267;|&#269;|&#231;|&#7689;|&#392;|&#572;|&#42815;|&#8580;|[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184])/g},{base:"d",letters:/(&#100;|&#9427;|&#65348;|&#7691;|&#271;|&#7693;|&#7697;|&#7699;|&#7695;|&#273;|&#396;|&#598;|&#599;|&#42874;|&#240;|[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A\u00F0])/g},{base:"dz",letters:/(&#499;|&#454;|[\u01F3\u01C6])/g},{base:"e",letters:/(&#101;|&#9428;|&#65349;|&#232;|&#233;|&#234;|&#7873;|&#7871;|&#7877;|&#7875;|&#7869;|&#275;|&#7701;|&#7703;|&#277;|&#279;|&#235;|&#7867;|&#283;|&#517;|&#519;|&#7865;|&#7879;|&#553;|&#7709;|&#281;|&#7705;|&#7707;|&#583;|&#603;|&#477;|[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD])/g},{base:"f",letters:/(&#102;|&#9429;|&#65350;|&#7711;|&#402;|&#42876;|[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C])/g},{base:"g",letters:/(&#103;|&#9430;|&#65351;|&#501;|&#285;|&#7713;|&#287;|&#289;|&#487;|&#291;|&#485;|&#608;|&#42913;|&#7545;|&#42879;|[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F])/g},{base:"h",letters:/(&#104;|&#9431;|&#65352;|&#293;|&#7715;|&#7719;|&#543;|&#7717;|&#7721;|&#7723;|&#7830;|&#295;|&#11368;|&#11382;|&#613;|[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265])/g},{base:"hv",letters:/(&#405;|[\u0195])/g},{base:"i",letters:/(&#105;|&#9432;|&#65353;|&#236;|&#237;|&#238;|&#297;|&#299;|&#301;|&#239;|&#7727;|&#7881;|&#464;|&#521;|&#523;|&#7883;|&#303;|&#7725;|&#616;|&#305;|[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131])/g},{base:"ij",letters:/(&#307;|[\u0133])/g},{base:"j",letters:/(&#106;|&#9433;|&#65354;|&#309;|&#496;|&#585;|[\u006A\u24D9\uFF4A\u0135\u01F0\u0249])/g},{base:"k",letters:/(&#107;|&#9434;|&#65355;|&#7729;|&#489;|&#7731;|&#311;|&#7733;|&#409;|&#11370;|&#42817;|&#42819;|&#42821;|&#42915;|[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3])/g},{base:"l",letters:/(&#108;|&#9435;|&#65356;|&#320;|&#314;|&#318;|&#7735;|&#7737;|&#316;|&#7741;|&#7739;|&#322;|&#410;|&#619;|&#11361;|&#42825;|&#42881;|&#42823;|[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u0142\u019A\u026B\u2C61\uA749\uA781\uA747])/g},{base:"lj",letters:/(&#457;|[\u01C9])/g},{base:"m",letters:/(&#109;|&#9436;|&#65357;|&#7743;|&#7745;|&#7747;|&#625;|&#623;|[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F])/g},{base:"n",letters:/(&#110;|&#9437;|&#65358;|&#505;|&#324;|&#241;|&#7749;|&#328;|&#7751;|&#326;|&#7755;|&#7753;|&#414;|&#626;|&#329;|&#42897;|&#42917;|&#331;|[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5\u014B])/g},{base:"nj",letters:/(&#460;|[\u01CC])/g},{base:"o",letters:/(&#111;|&#9438;|&#65359;|&#242;|&#243;|&#244;|&#7891;|&#7889;|&#7895;|&#7893;|&#245;|&#7757;|&#557;|&#7759;|&#333;|&#7761;|&#7763;|&#335;|&#559;|&#561;|&#246;|&#555;|&#7887;|&#337;|&#466;|&#525;|&#527;|&#417;|&#7901;|&#7899;|&#7905;|&#7903;|&#7907;|&#7885;|&#7897;|&#491;|&#493;|&#248;|&#511;|&#596;|&#42827;|&#42829;|&#629;|[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275])/g},{base:"oe",letters:/(&#339;|[\u0153])/g},{base:"oi",letters:/(&#419;|[\u01A3])/g},{base:"ou",letters:/(&#547;|[\u0223])/g},{base:"oo",letters:/(&#42831;|[\uA74F])/g},{base:"p",letters:/(&#112;|&#9439;|&#65360;|&#7765;|&#7767;|&#421;|&#7549;|&#42833;|&#42835;|&#42837;|[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755])/g},{base:"q",letters:/(&#113;|&#9440;|&#65361;|&#587;|&#42839;|&#42841;|[\u0071\u24E0\uFF51\u024B\uA757\uA759])/g},{base:"r",letters:/(&#114;|&#9441;|&#65362;|&#341;|&#7769;|&#345;|&#529;|&#531;|&#7771;|&#7773;|&#343;|&#7775;|&#589;|&#637;|&#42843;|&#42919;|&#42883;|[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783])/g},{base:"s",letters:/(&#115;|&#9442;|&#65363;|&#347;|&#7781;|&#349;|&#7777;|&#353;|&#7783;|&#7779;|&#7785;|&#537;|&#351;|&#575;|&#42921;|&#42885;|&#7835;|&#383;|[\u0073\u24E2\uFF53\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B\u017F])/g},{base:"ss",letters:/(&#223;|[\u00DF])/g},{base:"t",letters:/(&#116;|&#9443;|&#65364;|&#7787;|&#7831;|&#357;|&#7789;|&#539;|&#355;|&#7793;|&#7791;|&#359;|&#429;|&#648;|&#11366;|&#42887;|[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787])/g},{base:"th",letters:/(&#254;|[\u00FE])/g},{base:"tz",letters:/(&#42793;|[\uA729])/g},{base:"u",letters:/(&#117;|&#9444;|&#65365;|&#249;|&#250;|&#251;|&#361;|&#7801;|&#363;|&#7803;|&#365;|&#252;|&#476;|&#472;|&#470;|&#474;|&#7911;|&#367;|&#369;|&#468;|&#533;|&#535;|&#432;|&#7915;|&#7913;|&#7919;|&#7917;|&#7921;|&#7909;|&#7795;|&#371;|&#7799;|&#7797;|&#649;|[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289])/g},{base:"v",letters:/(&#118;|&#9445;|&#65366;|&#7805;|&#7807;|&#651;|&#42847;|&#652;|[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C])/g},{base:"vy",letters:/(&#42849;|[\uA761])/g},{base:"w",letters:/(&#119;|&#9446;|&#65367;|&#7809;|&#7811;|&#373;|&#7815;|&#7813;|&#7832;|&#7817;|&#11379;|[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73])/g},{base:"x",letters:/(&#120;|&#9447;|&#65368;|&#7819;|&#7821;|[\u0078\u24E7\uFF58\u1E8B\u1E8D])/g},{base:"y",letters:/(&#121;|&#9448;|&#65369;|&#7923;|&#253;|&#375;|&#7929;|&#563;|&#7823;|&#255;|&#7927;|&#7833;|&#7925;|&#436;|&#591;|&#7935;|[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF])/g},{base:"z",letters:/(&#122;|&#9449;|&#65370;|&#378;|&#7825;|&#380;|&#382;|&#7827;|&#7829;|&#438;|&#549;|&#576;|&#11372;|&#42851;|[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763])/g}],Uze=function(t){var r=t;return Bze.forEach(function(n){r=r.replace(n.letters,n.base)}),r},mK=function(t){return Uze(t).toLowerCase()},jce=function(t,r,n){return n?mK(t).indexOf(mK(r)):t.toLowerCase().indexOf(r.toLowerCase())},$ze=function(){return!!document.documentMode},A8=function(t){return typeof t=="number"},zze=function(t){return t===Object(t)?Object.keys(t):[]},Hze=function(t){for(var r,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];var s=(r=[]).concat.apply(r,i);return Object.keys(t).reduce(function(o,l){return t.hasOwnProperty(l)&&!s.includes(l)&&t[l]!==void 0&&(o[l]=t[l]),o},{})},Wze=["style","className","classNames"];function gK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function xK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gK(Object(r),!0).forEach(function(n){hn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function a3(e,t){var r=function(i){var a=function(l){var c=l.style,d=l.className,f=l.classNames,p=bze(l,Wze),m=t?t(p):void 0,x=v9(e,{style:c,className:d,classNames:f},m);return Hr.createElement(i,Zc({},p,{style:x}))},s=i.displayName||i.name||"Component";return a.displayName="defaultStyle(".concat(s,")"),Hr.forwardRef(function(o,l){return a(xK(xK({},o),{},{ref:l}))})};return r}var Vze=function(t,r){return t.hasOwnProperty(r)?t[r]++:t[r]=0,r+"_"+t[r]};function Dce(e){var t=e.selectionStart,r=e.selectionEnd,n=e.value,i=n===void 0?"":n,a=e.onCaretPositionChange,s=e.containerRef,o=e.children;e.singleLine;var l=e.style,c=I.useState({left:void 0,top:void 0}),d=bT(c,2),f=d[0],p=d[1],m=I.useState(),x=bT(m,2),v=x[0],b=x[1];I.useEffect(function(){w()});var w=function(){if(v){var Y=v.offsetLeft,W=v.offsetTop;if(!(f.left===Y&&f.top===W)){var Z={left:Y,top:W};p(Z),a(Z)}}},k=Op(o),E;r===t&&(E=jo(i,k,t,"START"));var N=[],P={},R=N,O=0,D=function(Y,W,Z){if(A8(E)&&E>=W&&E<=W+Y.length){var re=E-W;R.push(B(Y.substring(0,re),O)),R=[B(Y.substring(re),O)]}else R.push(B(Y,O));O++},L=function(Y,W,Z,re,X,Q,fe){var ye=Vze(P,re);R.push(z(re,X,Q,ye))},B=function(Y,W){return Hr.createElement("span",Zc({},l("substring"),{key:W}),Y)},z=function(Y,W,Z,re){var X={id:Y,display:W,key:re},Q=I.Children.toArray(o)[Z];return Hr.cloneElement(Q,X)},H=function(Y){return Hr.createElement("span",Zc({},l("caret"),{ref:b,key:"caret"}),Y)};return sC(i,k,L,D),R.push(" "),R!==N&&N.push(H(R)),Hr.createElement("div",Zc({},l,{ref:s}),N)}Dce.propTypes={selectionStart:zt.number,selectionEnd:zt.number,value:zt.string.isRequired,onCaretPositionChange:zt.func.isRequired,containerRef:zt.oneOfType([zt.func,zt.shape({current:typeof Element>"u"?zt.any:zt.instanceOf(Element)})]),children:zt.oneOfType([zt.element,zt.arrayOf(zt.element)]).isRequired};var qze=a3({position:"relative",boxSizing:"border-box",width:"100%",color:"transparent",overflow:"hidden",whiteSpace:"pre-wrap",wordWrap:"break-word",border:"1px solid transparent",textAlign:"start","&singleLine":{whiteSpace:"pre",wordWrap:null},substring:{visibility:"hidden"}},function(e){return{"&singleLine":e.singleLine}}),Gze=qze(Dce);function Mce(e){var t=e.id,r=e.focused,n=e.ignoreAccents,i=e.index,a=e.onClick,s=e.onMouseEnter,o=e.query,l=e.renderSuggestion,c=e.suggestion,d=e.style;e.className,e.classNames;var f={onClick:a,onMouseEnter:s},p=function(){var b=m(),w=x(b);return l?l(c,o,w,i,r):w},m=function(){if(typeof c=="string")return c;var b=c.id,w=c.display;return b===void 0||!w?b:w},x=function(b){var w=jce(b,o,n);return w===-1?Hr.createElement("span",d("display"),b):Hr.createElement("span",d("display"),b.substring(0,w),Hr.createElement("b",d("highlight"),b.substring(w,w+o.length)),b.substring(w+o.length))};return Hr.createElement("li",Zc({id:t,role:"option","aria-selected":r},f,d),p())}Mce.propTypes={id:zt.string.isRequired,query:zt.string.isRequired,index:zt.number.isRequired,ignoreAccents:zt.bool,suggestion:zt.oneOfType([zt.string,zt.shape({id:zt.oneOfType([zt.string,zt.number]).isRequired,display:zt.string})]).isRequired,renderSuggestion:zt.func,focused:zt.bool};var Kze=a3({cursor:"pointer"},function(e){return{"&focused":e.focused}}),Xze=Kze(Mce);function Yze(e){var t=e.style,r=e.className,n=e.classNames,i=v9(Qze,{style:t,className:r,classNames:n}),a=i("spinner");return Hr.createElement("div",i,Hr.createElement("div",a,Hr.createElement("div",a(["element","element1"])),Hr.createElement("div",a(["element","element2"])),Hr.createElement("div",a(["element","element3"])),Hr.createElement("div",a(["element","element4"])),Hr.createElement("div",a(["element","element5"]))))}var Qze={};function Fce(e){var t=e.id,r=e.suggestions,n=r===void 0?{}:r,i=e.a11ySuggestionsListLabel,a=e.focusIndex,s=e.position,o=e.left,l=e.right,c=e.top,d=e.scrollFocusedIntoView,f=e.isLoading,p=e.isOpened,m=e.onSelect,x=m===void 0?function(){return null}:m,v=e.ignoreAccents,b=e.containerRef,w=e.children,k=e.style,E=e.customSuggestionsContainer,N=e.onMouseDown,P=e.onMouseEnter,R=I.useState(void 0),O=bT(R,2),D=O[0],L=O[1];I.useEffect(function(){if(!(!D||D.offsetHeight>=D.scrollHeight||!d)){var Z=D.scrollTop,re=D.children[a].getBoundingClientRect(),X=re.top,Q=re.bottom,fe=D.getBoundingClientRect(),ye=fe.top;X=X-ye+Z,Q=Q-ye+Z,X<Z?D.scrollTop=X:Q>D.offsetHeight&&(D.scrollTop=Q-D.offsetHeight)}},[a,d,D]);var B=function(){var re=Hr.createElement("ul",Zc({ref:L,id:t,role:"listbox","aria-label":i},k("list")),Object.values(n).reduce(function(X,Q){var fe=Q.results,ye=Q.queryInfo;return[].concat(vT(X),vT(fe.map(function(J,ce){return z(J,ye,X.length+ce)})))},[]));return E?E(re):re},z=function(re,X,Q){var fe=Q===a,ye=X.childIndex,J=X.query,ce=I.Children.toArray(w)[ye].props.renderSuggestion;return Hr.createElement(Xze,{style:k("item"),key:"".concat(ye,"-").concat(W(re)),id:Rce(t,Q),query:J,index:Q,ignoreAccents:v,renderSuggestion:ce,suggestion:re,focused:fe,onClick:function(){return Y(re,X)},onMouseEnter:function(){return te(Q)}})},H=function(){if(f)return Hr.createElement(Yze,{style:k("loadingIndicator")})},te=function(re,X){P&&P(re)},Y=function(re,X){x(re,X)},W=function(re){return typeof re=="string"?re:re.id};return p?Hr.createElement("div",Zc({},Oze({position:s||"absolute",left:o,right:l,top:c},k),{onMouseDown:N,ref:b}),B(),H()):null}Fce.propTypes={id:zt.string.isRequired,suggestions:zt.object.isRequired,a11ySuggestionsListLabel:zt.string,focusIndex:zt.number,position:zt.string,left:zt.number,right:zt.number,top:zt.number,scrollFocusedIntoView:zt.bool,isLoading:zt.bool,isOpened:zt.bool.isRequired,onSelect:zt.func,ignoreAccents:zt.bool,customSuggestionsContainer:zt.func,containerRef:zt.oneOfType([zt.func,zt.shape({current:typeof Element>"u"?zt.any:zt.instanceOf(Element)})])};var Jze=a3({zIndex:1,backgroundColor:"white",marginTop:14,minWidth:100,list:{margin:0,padding:0,listStyleType:"none"}}),Zze=Jze(Fce);function vK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ju(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vK(Object(r),!0).forEach(function(n){hn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eHe(e){var t=tHe();return function(){var n=yT(e),i;if(t){var a=yT(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return hze(this,i)}}function tHe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var rHe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t instanceof RegExp)return t;var n=r.allowSpaceInQuery,i=VN(t);return new RegExp("(?:^|\\s)(".concat(i,"([^").concat(n?"":"\\s").concat(i,"]*))$"))},nHe=function(t,r){return t instanceof Array?function(n,i){for(var a=[],s=0,o=t.length;s<o;++s){var l=t[s].display||t[s].id;jce(l,n,r)>=0&&a.push(t[s])}return a}:t},N1={TAB:9,RETURN:13,ESC:27,UP:38,DOWN:40},k_=!1,Lce={singleLine:zt.bool,allowSpaceInQuery:zt.bool,allowSuggestionsAboveCursor:zt.bool,forceSuggestionsAboveCursor:zt.bool,ignoreAccents:zt.bool,a11ySuggestionsListLabel:zt.string,value:zt.string,onKeyDown:zt.func,customSuggestionsContainer:zt.func,onSelect:zt.func,onBlur:zt.func,onChange:zt.func,suggestionsPortalHost:typeof Element>"u"?zt.any:zt.PropTypes.instanceOf(Element),inputRef:zt.oneOfType([zt.func,zt.shape({current:typeof Element>"u"?zt.any:zt.instanceOf(Element)})]),children:zt.oneOfType([zt.element,zt.arrayOf(zt.element)]).isRequired},y9=function(e){fze(r,e);var t=eHe(r);function r(n){var i;return cze(this,r),i=t.call(this,n),hn(xn(i),"setContainerElement",function(a){i.containerElement=a}),hn(xn(i),"getInputProps",function(){var a=i.props,s=a.readOnly,o=a.disabled,l=a.style,c=Hze(i.props,["style","classNames","className"],zze(Lce));return ju(ju(ju(ju({},c),l("input")),{},{value:i.getPlainText(),onScroll:i.updateHighlighterScroll},!s&&!o&&{onChange:i.handleChange,onSelect:i.handleSelect,onKeyDown:i.handleKeyDown,onBlur:i.handleBlur,onCompositionStart:i.handleCompositionStart,onCompositionEnd:i.handleCompositionEnd}),i.isOpened()&&{role:"combobox","aria-controls":i.uuidSuggestionsOverlay,"aria-expanded":!0,"aria-autocomplete":"list","aria-haspopup":"listbox","aria-activedescendant":Rce(i.uuidSuggestionsOverlay,i.state.focusIndex)})}),hn(xn(i),"renderControl",function(){var a=i.props,s=a.singleLine,o=a.style,l=i.getInputProps();return Hr.createElement("div",o("control"),i.renderHighlighter(),s?i.renderInput(l):i.renderTextarea(l))}),hn(xn(i),"renderInput",function(a){return Hr.createElement("input",Zc({type:"text",ref:i.setInputRef},a))}),hn(xn(i),"renderTextarea",function(a){return Hr.createElement("textarea",Zc({ref:i.setInputRef},a))}),hn(xn(i),"setInputRef",function(a){i.inputElement=a;var s=i.props.inputRef;typeof s=="function"?s(a):s&&(s.current=a)}),hn(xn(i),"setSuggestionsElement",function(a){i.suggestionsElement=a}),hn(xn(i),"renderSuggestionsOverlay",function(){if(!A8(i.state.selectionStart))return null;var a=i.state.suggestionsPosition,s=a.position,o=a.left,l=a.top,c=a.right,d=Hr.createElement(Zze,{id:i.uuidSuggestionsOverlay,style:i.props.style("suggestions"),position:s,left:o,top:l,right:c,focusIndex:i.state.focusIndex,scrollFocusedIntoView:i.state.scrollFocusedIntoView,containerRef:i.setSuggestionsElement,suggestions:i.state.suggestions,customSuggestionsContainer:i.props.customSuggestionsContainer,onSelect:i.addMention,onMouseDown:i.handleSuggestionsMouseDown,onMouseEnter:i.handleSuggestionsMouseEnter,isLoading:i.isLoading(),isOpened:i.isOpened(),ignoreAccents:i.props.ignoreAccents,a11ySuggestionsListLabel:i.props.a11ySuggestionsListLabel},i.props.children);return i.props.suggestionsPortalHost?vL.createPortal(d,i.props.suggestionsPortalHost):d}),hn(xn(i),"renderHighlighter",function(){var a=i.state,s=a.selectionStart,o=a.selectionEnd,l=i.props,c=l.singleLine,d=l.children,f=l.value,p=l.style;return Hr.createElement(Gze,{containerRef:i.setHighlighterElement,style:p("highlighter"),value:f,singleLine:c,selectionStart:s,selectionEnd:o,onCaretPositionChange:i.handleCaretPositionChange},d)}),hn(xn(i),"setHighlighterElement",function(a){i.highlighterElement=a}),hn(xn(i),"handleCaretPositionChange",function(a){i.setState({caretPosition:a})}),hn(xn(i),"getPlainText",function(){return $m(i.props.value||"",Op(i.props.children))}),hn(xn(i),"executeOnChange",function(a){for(var s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];if(i.props.onChange){var c;return(c=i.props).onChange.apply(c,[a].concat(o))}if(i.props.valueLink){var d;return(d=i.props.valueLink).requestChange.apply(d,[a.target.value].concat(o))}}),hn(xn(i),"handleChange",function(a){if(k_=!1,$ze()){var s=document.activeElement&&document.activeElement.contentDocument||document;if(s.activeElement!==a.target)return}var o=i.props.value||"",l=Op(i.props.children),c=a.target.value,d=i.state.selectionStart;d==null&&(d=a.target.selectionStart);var f=i.state.selectionEnd;f==null&&(f=a.target.selectionEnd);var p=jze(o,c,{selectionStartBefore:d,selectionEndBefore:f,selectionEndAfter:a.target.selectionEnd},l);c=$m(p,l);var m=a.target.selectionStart,x=a.target.selectionEnd,v=!1,b=pK(o,l,m);b!==void 0&&i.state.selectionEnd>b&&(m=b+(a.nativeEvent.data?a.nativeEvent.data.length:0),x=m,v=!0),i.setState({selectionStart:m,selectionEnd:x,setSelectionAfterMentionChange:v});var w=Vw(p,l);a.nativeEvent.isComposing&&m===x&&i.updateMentionsQueries(i.inputElement.value,m);var k={target:{value:p}};i.executeOnChange(k,p,c,w)}),hn(xn(i),"handleSelect",function(a){if(i.setState({selectionStart:a.target.selectionStart,selectionEnd:a.target.selectionEnd}),!k_){var s=i.inputElement;a.target.selectionStart===a.target.selectionEnd?i.updateMentionsQueries(s.value,a.target.selectionStart):i.clearSuggestions(),i.updateHighlighterScroll(),i.props.onSelect(a)}}),hn(xn(i),"handleKeyDown",function(a){var s=C_(i.state.suggestions);if(s===0||!i.suggestionsElement){i.props.onKeyDown(a);return}switch(Object.values(N1).indexOf(a.keyCode)>=0&&(a.preventDefault(),a.stopPropagation()),a.keyCode){case N1.ESC:{i.clearSuggestions();return}case N1.DOWN:{i.shiftFocus(1);return}case N1.UP:{i.shiftFocus(-1);return}case N1.RETURN:{i.selectFocused();return}case N1.TAB:{i.selectFocused();return}default:return}}),hn(xn(i),"shiftFocus",function(a){var s=C_(i.state.suggestions);i.setState({focusIndex:(s+i.state.focusIndex+a)%s,scrollFocusedIntoView:!0})}),hn(xn(i),"selectFocused",function(){var a=i.state,s=a.suggestions,o=a.focusIndex,l=Object.values(s).reduce(function(f,p){var m=p.results,x=p.queryInfo;return[].concat(vT(f),vT(m.map(function(v){return{result:v,queryInfo:x}})))},[])[o],c=l.result,d=l.queryInfo;i.addMention(c,d),i.setState({focusIndex:0})}),hn(xn(i),"handleBlur",function(a){var s=i._suggestionsMouseDown;i._suggestionsMouseDown=!1,s||i.setState({selectionStart:null,selectionEnd:null}),window.setTimeout(function(){i.updateHighlighterScroll()},1),i.props.onBlur(a,s)}),hn(xn(i),"handleSuggestionsMouseDown",function(a){i._suggestionsMouseDown=!0}),hn(xn(i),"handleSuggestionsMouseEnter",function(a){i.setState({focusIndex:a,scrollFocusedIntoView:!1})}),hn(xn(i),"updateSuggestionsPosition",function(){var a=i.state.caretPosition,s=i.props,o=s.suggestionsPortalHost,l=s.allowSuggestionsAboveCursor,c=s.forceSuggestionsAboveCursor;if(!(!a||!i.suggestionsElement)){var d=i.suggestionsElement,f=i.highlighterElement,p=f.getBoundingClientRect(),m=Jj(f,"font-size"),x={left:p.left+a.left,top:p.top+a.top+m},v=Math.max(document.documentElement.clientHeight,window.innerHeight||0);if(d){var b={};if(o){b.position="fixed";var w=x.left,k=x.top;w-=Jj(d,"margin-left"),k-=Jj(d,"margin-top"),w-=f.scrollLeft,k-=f.scrollTop;var E=Math.max(document.documentElement.clientWidth,window.innerWidth||0);w+d.offsetWidth>E?b.left=Math.max(0,E-d.offsetWidth):b.left=w,l&&k+d.offsetHeight>v&&d.offsetHeight<k-m||c?b.top=Math.max(0,k-d.offsetHeight-m):b.top=k}else{var N=a.left-f.scrollLeft,P=a.top-f.scrollTop;N+d.offsetWidth>i.containerElement.offsetWidth?b.right=0:b.left=N,l&&x.top-f.scrollTop+d.offsetHeight>v&&d.offsetHeight<p.top-m-f.scrollTop||c?b.top=P-d.offsetHeight-m:b.top=P}b.left===i.state.suggestionsPosition.left&&b.top===i.state.suggestionsPosition.top&&b.position===i.state.suggestionsPosition.position||i.setState({suggestionsPosition:b})}}}),hn(xn(i),"updateHighlighterScroll",function(){var a=i.inputElement,s=i.highlighterElement;!a||!s||(s.scrollLeft=a.scrollLeft,s.scrollTop=a.scrollTop,s.height=a.height)}),hn(xn(i),"handleCompositionStart",function(){k_=!0}),hn(xn(i),"handleCompositionEnd",function(){k_=!1}),hn(xn(i),"setSelection",function(a,s){if(!(a===null||s===null)){var o=i.inputElement;if(o.setSelectionRange)o.setSelectionRange(a,s);else if(o.createTextRange){var l=o.createTextRange();l.collapse(!0),l.moveEnd("character",s),l.moveStart("character",a),l.select()}}}),hn(xn(i),"updateMentionsQueries",function(a,s){i._queryId++,i.suggestions={},i.setState({suggestions:{}});var o=i.props.value||"",l=i.props.children,c=Op(l),d=jo(o,c,s,"NULL");if(d!==null){var f=Dze(o.substring(0,d),c),p=a.substring(f,s);Hr.Children.forEach(l,function(m,x){if(m){var v=rHe(m.props.trigger,i.props),b=p.match(v);if(b){var w=f+p.indexOf(b[1],b.index);i.queryData(b[2],x,w,w+b[1].length,a)}}})}}),hn(xn(i),"clearSuggestions",function(){i._queryId++,i.suggestions={},i.setState({suggestions:{},focusIndex:0})}),hn(xn(i),"queryData",function(a,s,o,l,c){var d=i.props,f=d.children,p=d.ignoreAccents,m=I.Children.toArray(f)[s],x=nHe(m.props.data,p),v=x(a,i.updateSuggestions.bind(null,i._queryId,s,a,o,l,c));v instanceof Array&&i.updateSuggestions(i._queryId,s,a,o,l,c,v)}),hn(xn(i),"updateSuggestions",function(a,s,o,l,c,d,f){if(a===i._queryId){i.suggestions=ju(ju({},i.suggestions),{},hn({},s,{queryInfo:{childIndex:s,query:o,querySequenceStart:l,querySequenceEnd:c,plainTextValue:d},results:f}));var p=i.state.focusIndex,m=C_(i.suggestions);i.setState({suggestions:i.suggestions,focusIndex:p>=m?Math.max(m-1,0):p})}}),hn(xn(i),"addMention",function(a,s){var o=a.id,l=a.display,c=s.childIndex,d=s.querySequenceStart,f=s.querySequenceEnd,p=s.plainTextValue,m=i.props.value||"",x=Op(i.props.children),v=I.Children.toArray(i.props.children)[c],b=v.props,w=b.markup,k=b.displayTransform,E=b.appendSpaceOnAdd,N=b.onAdd,P=jo(m,x,d,"START"),R=P+f-d,O=Lze(w,o,l);E&&(O+=" ");var D=x2(m,P,R,O);i.inputElement.focus();var L=k(o,l);E&&(L+=" ");var B=d+L.length;i.setState({selectionStart:B,selectionEnd:B,setSelectionAfterMentionChange:!0});var z={target:{value:D}},H=Vw(D,x),te=x2(p,d,f,L);i.executeOnChange(z,D,te,H),N&&N(o,l,P,R),i.clearSuggestions()}),hn(xn(i),"isLoading",function(){var a=!1;return Hr.Children.forEach(i.props.children,function(s){a=a||s&&s.props.isLoading}),a}),hn(xn(i),"isOpened",function(){return A8(i.state.selectionStart)&&(C_(i.state.suggestions)!==0||i.isLoading())}),hn(xn(i),"_queryId",0),i.suggestions={},i.uuidSuggestionsOverlay=Math.random().toString(16).substring(2),i.handleCopy=i.handleCopy.bind(xn(i)),i.handleCut=i.handleCut.bind(xn(i)),i.handlePaste=i.handlePaste.bind(xn(i)),i.state={focusIndex:0,selectionStart:null,selectionEnd:null,suggestions:{},caretPosition:null,suggestionsPosition:{},setSelectionAfterHandlePaste:!1},i}return dze(r,[{key:"componentDidMount",value:function(){document.addEventListener("copy",this.handleCopy),document.addEventListener("cut",this.handleCut),document.addEventListener("paste",this.handlePaste),this.updateSuggestionsPosition()}},{key:"componentDidUpdate",value:function(i,a){a.suggestionsPosition===this.state.suggestionsPosition&&this.updateSuggestionsPosition(),this.state.setSelectionAfterMentionChange&&(this.setState({setSelectionAfterMentionChange:!1}),this.setSelection(this.state.selectionStart,this.state.selectionEnd)),this.state.setSelectionAfterHandlePaste&&(this.setState({setSelectionAfterHandlePaste:!1}),this.setSelection(this.state.selectionStart,this.state.selectionEnd))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("copy",this.handleCopy),document.removeEventListener("cut",this.handleCut),document.removeEventListener("paste",this.handlePaste)}},{key:"render",value:function(){return Hr.createElement("div",Zc({ref:this.setContainerElement},this.props.style),this.renderControl(),this.renderSuggestionsOverlay())}},{key:"handlePaste",value:function(i){if(i.target===this.inputElement&&this.supportsClipboardActions(i)){i.preventDefault();var a=this.state,s=a.selectionStart,o=a.selectionEnd,l=this.props,c=l.value,d=l.children,f=Op(d),p=jo(c,f,s,"START"),m=jo(c,f,o,"END"),x=i.clipboardData.getData("text/react-mentions"),v=i.clipboardData.getData("text/plain"),b=x2(c,p,m,x||v).replace(/\r/g,""),w=$m(b,f),k={target:ju(ju({},i.target),{},{value:b})};this.executeOnChange(k,b,w,Vw(b,f));var E=pK(c,f,s),N=(E||s)+$m(x||v,f).length;this.setState({selectionStart:N,selectionEnd:N,setSelectionAfterHandlePaste:!0})}}},{key:"saveSelectionToClipboard",value:function(i){var a=this.inputElement.selectionStart,s=this.inputElement.selectionEnd,o=this.props,l=o.children,c=o.value,d=Op(l),f=jo(c,d,a,"START"),p=jo(c,d,s,"END");i.clipboardData.setData("text/plain",i.target.value.slice(a,s)),i.clipboardData.setData("text/react-mentions",c.slice(f,p))}},{key:"supportsClipboardActions",value:function(i){return!!i.clipboardData}},{key:"handleCopy",value:function(i){i.target===this.inputElement&&this.supportsClipboardActions(i)&&(i.preventDefault(),this.saveSelectionToClipboard(i))}},{key:"handleCut",value:function(i){if(i.target===this.inputElement&&this.supportsClipboardActions(i)){i.preventDefault(),this.saveSelectionToClipboard(i);var a=this.state,s=a.selectionStart,o=a.selectionEnd,l=this.props,c=l.children,d=l.value,f=Op(c),p=jo(d,f,s,"START"),m=jo(d,f,o,"END"),x=[d.slice(0,p),d.slice(m)].join(""),v=$m(x,f),b={target:ju(ju({},i.target),{},{value:v})};this.executeOnChange(b,x,v,Vw(d,f))}}}]),r}(Hr.Component);hn(y9,"propTypes",Lce);hn(y9,"defaultProps",{ignoreAccents:!1,singleLine:!1,allowSuggestionsAboveCursor:!1,onKeyDown:function(){return null},onSelect:function(){return null},onBlur:function(){return null}});var Jj=function(t,r){var n=parseFloat(window.getComputedStyle(t,null).getPropertyValue(r));return isFinite(n)?n:0},iHe=typeof navigator<"u"&&/iPhone|iPad|iPod/i.test(navigator.userAgent),aHe=a3({position:"relative",overflowY:"visible",input:{display:"block",width:"100%",position:"absolute",margin:0,top:0,left:0,boxSizing:"border-box",backgroundColor:"transparent",fontFamily:"inherit",fontSize:"inherit",letterSpacing:"inherit"},"&multiLine":{input:ju({height:"100%",bottom:0,overflow:"hidden",resize:"none"},iHe?{marginTop:1,marginLeft:-3}:null)}},function(e){var t=e.singleLine;return{"&singleLine":t,"&multiLine":!t}}),sHe=aHe(y9),oHe={fontWeight:"inherit"},zm=function(t){var r=t.display,n=t.style,i=t.className,a=t.classNames,s=v9(oHe,{style:n,className:i,classNames:a});return Hr.createElement("strong",s,r)};zm.propTypes={onAdd:zt.func,onRemove:zt.func,renderSuggestion:zt.func,trigger:zt.oneOfType([zt.string,zt.instanceOf(RegExp)]),markup:zt.string,displayTransform:zt.func,allowSpaceInQuery:zt.bool,isLoading:zt.bool};zm.defaultProps={trigger:"@",markup:"@[__display__](__id__)",displayTransform:function(t,r){return r||t},onAdd:function(){return null},onRemove:function(){return null},renderSuggestion:null,isLoading:!1,appendSpaceOnAdd:!1};const lHe=()=>Us({queryKey:["users"],queryFn:C7}),wT=({value:e,onChange:t,placeholder:r,onKeyDown:n,minHeight:i=40,maxHeight:a=120,rightElement:s,singleLine:o=!1})=>{const{data:l=[]}=lHe(),{data:c=[]}=Kh(),{data:d=[]}=ab(),{data:f=[]}=Rx(),{data:p=[]}=gf(),m=I.useMemo(()=>l.map(N=>({id:N.userId,display:N.firstName?`${N.firstName} ${N.lastName}`:N.email})),[l]),x=I.useMemo(()=>c.map(N=>({id:String(N.id),display:N.projectName})),[c]),v=I.useMemo(()=>d.map(N=>({id:N.id,display:N.name})),[d]),b=I.useMemo(()=>f.map(N=>({id:String(N.id),display:N.fullName})),[f]),w=I.useMemo(()=>p.map(N=>({id:String(N.id),display:N.installerName})),[p]),k={control:{fontSize:14,fontWeight:"normal"},"&multiLine":{control:{fontFamily:"inherit",minHeight:o?void 0:i,maxHeight:o?void 0:a},highlighter:{padding:12,border:"1px solid transparent"},input:{padding:12,border:"1px solid var(--color-outline-variant, #49454F)",borderRadius:"0.75rem",backgroundColor:"var(--color-surface-container, #1F1B16)",color:"var(--color-text-primary)",overflow:"auto",height:"100%",outline:"none"}},"&singleLine":{display:"inline-block",width:"100%",highlighter:{padding:12,border:"2px solid transparent"},input:{padding:12,border:"1px solid var(--color-outline-variant, #49454F)",borderRadius:"0.75rem",backgroundColor:"var(--color-surface-container, #1F1B16)",color:"var(--color-text-primary)",outline:"none",width:"100%"}},suggestions:{list:{backgroundColor:"var(--color-surface-container-high, #2A2826)",border:"1px solid var(--color-outline, #9C8F83)",borderRadius:"0.75rem",fontSize:12,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.5)",zIndex:99999,width:250,maxHeight:200,overflow:"auto",marginTop:4},item:{padding:"8px 12px",borderBottom:"1px solid var(--color-outline-variant, #49454F)",color:"var(--color-text-secondary)","&focused":{backgroundColor:"var(--color-primary-container, #51443B)",color:"var(--color-on-primary-container, #FFDDB7)"}}}},E=(N,P,R,O,D)=>u.jsx("div",{className:`flex items-center gap-2 ${D?"font-bold":""}`,children:u.jsx("span",{children:R})});return u.jsxs("div",{className:"mention-input-wrapper w-full flex flex-col gap-2",children:[u.jsxs("div",{className:"flex items-end gap-2",children:[u.jsx("div",{className:"flex-1 min-w-0 relative",children:u.jsxs(sHe,{value:e,onChange:N=>t(N.target.value),placeholder:r,style:k,onKeyDown:n,allowSpaceInQuery:!0,className:"flex-1",singleLine:o,suggestionsPortalHost:document.body,children:[u.jsx(zm,{trigger:"@",data:m,markup:"@[user:__id__|__display__]",style:{backgroundColor:"var(--color-secondary-container)",color:"var(--color-on-secondary-container)",borderRadius:4,padding:"1px 3px"},renderSuggestion:E,displayTransform:(N,P)=>`@${P}`}),u.jsx(zm,{trigger:"!",data:x,markup:"@[project:__id__|__display__]",style:{backgroundColor:"var(--color-tertiary-container)",color:"var(--color-on-tertiary-container)",borderRadius:4,padding:"1px 3px"},renderSuggestion:E,displayTransform:(N,P)=>` ${P}`}),u.jsx(zm,{trigger:"#",data:v,markup:"@[product:__id__|__display__]",style:{backgroundColor:"var(--color-primary-container)",color:"var(--color-on-primary-container)",borderRadius:4,padding:"1px 3px"},renderSuggestion:E,displayTransform:(N,P)=>` ${P}`}),u.jsx(zm,{trigger:"\\",data:b,markup:"@[customer:__id__|__display__]",style:{backgroundColor:"var(--color-error-container)",color:"var(--color-on-error-container)",borderRadius:4,padding:"1px 3px"},renderSuggestion:E,displayTransform:(N,P)=>` ${P}`}),u.jsx(zm,{trigger:"+",data:w,markup:"@[installer:__id__|__display__]",style:{backgroundColor:"var(--color-surface-variant)",color:"var(--color-on-surface-variant)",borderRadius:4,padding:"1px 3px"},renderSuggestion:E,displayTransform:(N,P)=>` ${P}`})]})}),s&&u.jsx("div",{className:"shrink-0 pb-1",children:s})]}),!o&&u.jsxs("div",{className:"flex flex-wrap gap-3 text-[10px] text-text-secondary px-1",children:[u.jsxs("div",{className:"flex items-center gap-1 cursor-help",title:"Mention a User",children:[u.jsx("span",{className:"font-mono bg-surface-container-highest border border-outline/20 px-1 rounded",children:"@"})," User"]}),u.jsxs("div",{className:"flex items-center gap-1 cursor-help",title:"Link a Project",children:[u.jsx("span",{className:"font-mono bg-surface-container-highest border border-outline/20 px-1 rounded",children:"!"})," Project"]}),u.jsxs("div",{className:"flex items-center gap-1 cursor-help",title:"Link a Product",children:[u.jsx("span",{className:"font-mono bg-surface-container-highest border border-outline/20 px-1 rounded",children:"#"})," Product"]}),u.jsxs("div",{className:"flex items-center gap-1 cursor-help",title:"Link a Customer",children:[u.jsx("span",{className:"font-mono bg-surface-container-highest border border-outline/20 px-1 rounded",children:"\\"})," Customer"]}),u.jsxs("div",{className:"flex items-center gap-1 cursor-help",title:"Link an Installer",children:[u.jsx("span",{className:"font-mono bg-surface-container-highest border border-outline/20 px-1 rounded",children:"+"})," Installer"]})]})]})},cHe=({job:e})=>{const{currentUser:t}=Gr(),[r,n]=I.useState([]),[i,a]=I.useState(""),[s,o]=I.useState(!1),[l,c]=I.useState(!0),d=I.useRef(null);I.useEffect(()=>{let x=!0;const v=async()=>{try{const w=await nze(e.id);x&&(n(w),c(!1))}catch(w){console.error(w),Re.error("Failed to load notes history.")}};v();const b=setInterval(v,5e3);return()=>{x=!1,clearInterval(b)}},[e.id]),I.useEffect(()=>{d.current&&(d.current.scrollTop=d.current.scrollHeight)},[r]);const f=async x=>{if(x==null||x.preventDefault(),!!i.trim()){o(!0);try{const v=await ize(e.id,i);n(b=>[...b,v]),a("")}catch(v){console.error(v),Re.error("Failed to send note.")}finally{o(!1)}}},p=x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),f())},m=async x=>{try{await aze(x),n(v=>v.map(b=>b.id===x?{...b,isPinned:!b.isPinned}:b)),Re.success("Note updated")}catch{Re.error("Failed to pin note")}};return u.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex items-center gap-3 flex-shrink-0",children:[u.jsx(X0,{className:"drag-handle cursor-move text-text-secondary hover:text-text-primary transition-colors",size:20}),u.jsx(P8e,{size:20,className:"text-primary"}),u.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Job Notes"})]}),u.jsx("div",{ref:d,className:"flex-grow overflow-y-auto p-4 space-y-4 bg-surface-container scrollbar-thin scrollbar-thumb-surface-container-highest",children:l?u.jsx("div",{className:"text-center text-text-secondary py-4 text-sm",children:"Loading timeline..."}):r.length===0?u.jsx("div",{className:"text-center text-text-tertiary py-8 italic text-sm",children:"No notes yet. Start the conversation below."}):r.map(x=>{const v=x.userId===(t==null?void 0:t.userId);return u.jsxs("div",{className:`flex gap-3 group ${v?"flex-row-reverse":""}`,children:[u.jsx("div",{className:"flex-shrink-0 mt-1",children:x.authorAvatar?u.jsx("img",{src:x.authorAvatar,alt:x.authorName,className:"w-8 h-8 rounded-full object-cover border-2 border-surface-container-high"}):u.jsxs(u.Fragment,{children:[u.jsx("img",{src:`https://www.gravatar.com/avatar/${hS(x.authorEmail||x.authorName)}?s=40&d=mp`,alt:x.authorName,className:"w-8 h-8 rounded-full border-2 border-surface-container-high object-cover",onError:b=>{var w;b.target.style.display="none",(w=b.target.nextElementSibling)==null||w.classList.remove("hidden")}}),u.jsx("div",{className:"hidden w-8 h-8 rounded-full bg-primary-container text-on-primary-container flex items-center justify-center text-sm font-bold border-2 border-surface-container-high",children:x.authorName?x.authorName.charAt(0).toUpperCase():"U"})]})}),u.jsxs("div",{className:`flex flex-col max-w-[85%] ${v?"items-end":"items-start"}`,children:[u.jsxs("div",{className:`flex items-baseline gap-2 mb-1 ${v?"flex-row-reverse":""}`,children:[u.jsx("span",{className:"text-xs font-bold text-text-primary",children:x.authorName}),u.jsx("span",{className:"text-[10px] text-text-tertiary",children:x.createdAt?new Date(x.createdAt).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown Date"}),u.jsx("button",{onClick:()=>m(x.id),className:`transition-opacity ${x.isPinned?"opacity-100 text-tertiary":"opacity-0 group-hover:opacity-100 text-text-tertiary hover:text-text-primary"}`,title:x.isPinned?"Unpin from Calendar":"Pin to Calendar",children:u.jsx(D8e,{size:14,fill:x.isPinned?"currentColor":"none"})})]}),u.jsx("div",{className:`p-3 rounded-xl text-sm whitespace-pre-wrap shadow-sm relative ${x.isPinned?"ring-2 ring-tertiary/80":""} ${v?"bg-primary text-on-primary rounded-tr-none":"bg-secondary-container text-on-secondary-container rounded-tl-none"}`,children:u.jsx(i3,{content:x.content})})]})]},x.id)})}),u.jsx("div",{className:"p-3 bg-surface-container-low border-t border-outline/10 flex-shrink-0",children:u.jsxs("form",{onSubmit:f,className:"flex items-end gap-2",children:[u.jsx("div",{className:"flex-1",children:u.jsx(wT,{value:i,onChange:a,onKeyDown:p,placeholder:"Type a note...",minHeight:40})}),u.jsx("button",{type:"submit",disabled:!i.trim()||s,className:"flex-shrink-0 h-[42px] w-[42px] flex items-center justify-center bg-primary hover:bg-primary-hover text-on-primary rounded-full disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm",children:u.jsx(sy,{size:18})})]})})]})},uHe=async(e,t)=>{const{data:r}=await cr.get(`/api/photos/${e}/${t}`);return r},dHe=(e,t)=>Us({queryKey:["files",e,t],queryFn:()=>uHe(e,t),enabled:!!t}),fHe=(e,t)=>{const r=Da(),n=["files",e,t];return{uploadFiles:Tr({mutationFn:async({files:i,category:a})=>{const s=new FormData;s.append("entityType",e),s.append("entityId",String(t)),s.append("category",a),Array.from(i).forEach(l=>s.append("photos",l));const{data:o}=await cr.post("/api/photos",s,{headers:{"Content-Type":"multipart/form-data"}});return o},onSuccess:()=>r.invalidateQueries({queryKey:n})}),deleteFile:Tr({mutationFn:async i=>{await cr.delete(`/api/photos/${i}`)},onSuccess:()=>r.invalidateQueries({queryKey:n})})}},Bce=({imageUrl:e,onClose:t,altText:r="Image Preview"})=>(I.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),Il.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[99999] bg-black/95 flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:t,children:[u.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex justify-between items-start z-[101] bg-gradient-to-b from-black/50 to-transparent",children:[u.jsx("span",{className:"text-white/70 text-sm font-mono ml-2 mt-1 truncate max-w-[80%]",children:r}),u.jsx("button",{onClick:n=>{n.stopPropagation(),t()},className:"p-2 bg-white/10 hover:bg-white/20 text-white rounded-full transition-colors backdrop-blur-sm",children:u.jsx(Zr,{size:24})})]}),u.jsx("div",{className:"relative w-full h-full flex items-center justify-center",onClick:n=>n.stopPropagation(),children:u.jsx("img",{src:e,alt:r,className:"max-w-full max-h-full object-contain shadow-2xl rounded-sm"})})]}),document.body)),hHe=({project:e})=>{const{data:t=[],isLoading:r}=dHe("PROJECT",e.id),{uploadFiles:n,deleteFile:i}=fHe("PROJECT",e.id),[a,s]=I.useState("SITE"),[o,l]=I.useState(new Set),[c,d]=I.useState(!1),[f,p]=I.useState(null),m=I.useRef(null),x=(Array.isArray(t)?t:[]).filter(E=>(E.category||"SITE")===a),v=async E=>{if(E.target.files&&E.target.files.length>0){const N=Re.loading(`Uploading ${a==="SITE"?"photos":"documents"}...`);try{await n.mutateAsync({files:E.target.files,category:a}),Re.success("Upload complete!",{id:N})}catch{Re.error("Upload failed.",{id:N})}m.current&&(m.current.value="")}},b=E=>{l(N=>{const P=new Set(N);return P.has(E)?P.delete(E):P.add(E),P})},w=async()=>{if(!window.confirm(`Delete ${o.size} items?`))return;const E=Re.loading("Deleting...");try{await Promise.all(Array.from(o).map(N=>i.mutateAsync(N))),Re.success("Deleted!",{id:E}),l(new Set),d(!1)}catch{Re.error("Delete failed.",{id:E})}},k=E=>{c?b(E.id):a==="SITE"?p(Ia(E.url)):window.open(Ia(E.url),"_blank")};return u.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[u.jsx("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center shrink-0",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(X0,{size:20,className:"drag-handle text-text-secondary cursor-move hover:text-text-primary shrink-0"}),u.jsxs("h3",{className:"text-xl font-semibold text-text-primary flex items-center gap-2",children:[u.jsx(Jd,{size:20})," Project Files"]})]})}),u.jsxs("div",{className:"border-b border-outline/10 bg-surface-container-low shrink-0",children:[u.jsxs("div",{className:"flex justify-between items-center px-4 py-2",children:[u.jsxs("div",{className:"flex space-x-2 bg-surface-container-highest p-1 rounded-full",children:[u.jsxs("button",{onClick:()=>{s("SITE"),d(!1)},className:`px-3 py-1 rounded-full text-sm font-medium transition-all flex items-center gap-2 ${a==="SITE"?"bg-primary-container text-on-primary-container shadow-sm":"text-text-secondary hover:text-text-primary"}`,children:[u.jsx(vv,{size:16})," Site Photos"]}),u.jsxs("button",{onClick:()=>{s("DOCUMENT"),d(!1)},className:`px-3 py-1 rounded-full text-sm font-medium transition-all flex items-center gap-2 ${a==="DOCUMENT"?"bg-primary-container text-on-primary-container shadow-sm":"text-text-secondary hover:text-text-primary"}`,children:[u.jsx(Jc,{size:16})," Documents"]})]}),u.jsx("div",{className:"flex items-center gap-2",children:c?u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:w,disabled:o.size===0,className:"px-3 py-1.5 bg-error hover:bg-error-hover text-on-error text-xs font-bold rounded-full disabled:opacity-50 transition-colors shadow-sm",children:["Delete (",o.size,")"]}),u.jsx("button",{onClick:()=>{d(!1),l(new Set)},className:"px-3 py-1.5 border border-outline text-text-primary hover:bg-surface-container-highest text-xs font-bold rounded-full transition-colors",children:"Cancel"})]}):u.jsxs(u.Fragment,{children:[x.length>0&&u.jsx("button",{onClick:()=>d(!0),className:"px-3 py-1.5 text-xs font-medium text-text-secondary hover:text-text-primary hover:bg-surface-container-highest rounded-full transition-colors",children:"Select"}),u.jsxs("button",{onClick:()=>{var E;return(E=m.current)==null?void 0:E.click()},className:"flex items-center gap-1 px-3 py-1.5 bg-primary text-on-primary text-xs font-bold rounded-full hover:bg-primary-hover shadow-md transition-all",children:[a==="SITE"?u.jsx(vv,{size:14}):u.jsx(Jc,{size:14})," Add"]})]})})]}),u.jsx("input",{type:"file",multiple:!0,accept:a==="SITE"?"image/*":".pdf,.doc,.docx,.xls,.xlsx,image/*",className:"hidden",ref:m,onChange:v})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-surface-container",children:r?u.jsx("div",{className:"text-center py-8 text-text-secondary text-xs",children:"Loading..."}):x.length===0?u.jsxs("div",{onClick:()=>{var E;return(E=m.current)==null?void 0:E.click()},className:"h-full flex flex-col items-center justify-center text-text-tertiary cursor-pointer hover:bg-surface-container-low border-2 border-dashed border-outline/30 rounded-xl transition-colors p-4",children:[a==="SITE"?u.jsx(vv,{size:32,className:"mb-2 opacity-50"}):u.jsx(Jc,{size:32,className:"mb-2 opacity-50"}),u.jsxs("span",{className:"text-sm font-medium",children:["No ",a==="SITE"?"photos":"documents"," yet"]}),u.jsx("span",{className:"text-xs",children:"Click to upload"})]}):a==="SITE"?u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2",children:x.map(E=>{const N=o.has(E.id);return u.jsxs("div",{onClick:()=>k(E),className:`relative aspect-square rounded-lg overflow-hidden cursor-pointer group border-2 transition-all ${N?"border-primary ring-2 ring-primary/50":"border-transparent hover:border-outline/50"}`,children:[u.jsx("img",{src:Ia(E.thumbnailUrl||E.url),alt:"Project Site",className:"w-full h-full object-cover",loading:"lazy"}),c&&u.jsx("div",{className:`absolute top-1.5 right-1.5 rounded-full bg-surface p-0.5 ${N?"text-primary":"text-outline"}`,children:u.jsx(jh,{size:18,fill:N?"currentColor":"none"})}),!c&&u.jsx("div",{className:"absolute inset-0 bg-scrim/0 group-hover:bg-scrim/30 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100",children:u.jsx(O8e,{className:"text-white drop-shadow-md",size:20})})]},E.id)})}):u.jsx("div",{className:"space-y-2",children:x.map(E=>{var O,D;const N=o.has(E.id),P=((O=E.mimeType)==null?void 0:O.includes("pdf"))||E.url.endsWith(".pdf"),R=((D=E.mimeType)==null?void 0:D.includes("image"))||E.thumbnailUrl;return u.jsxs("div",{onClick:()=>c?b(E.id):window.open(Ia(E.url),"_blank"),className:`flex items-center p-3 rounded-xl border transition-all cursor-pointer ${N?"border-primary bg-primary-container/20 shadow-sm":"border-outline/20 bg-surface-container-high hover:border-primary/50"}`,children:[u.jsx("div",{className:"w-10 h-10 rounded-lg bg-surface-container-highest border border-outline/10 flex items-center justify-center mr-3 text-text-secondary shrink-0 overflow-hidden",children:R?u.jsx("img",{src:Ia(E.thumbnailUrl||E.url),className:"w-full h-full object-cover"}):u.jsx(loe,{size:20,className:P?"text-error":"text-primary"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-text-primary truncate",children:E.fileName||"Untitled Document"}),u.jsx("p",{className:"text-xs text-text-tertiary",children:new Date(E.createdAt).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})})]}),c?u.jsx("div",{className:`shrink-0 ${N?"text-primary":"text-outline"}`,children:u.jsx(jh,{size:20,fill:N?"currentColor":"none"})}):u.jsx("button",{className:"p-2 text-text-tertiary hover:text-primary transition-colors",children:u.jsx(JE,{size:16})})]},E.id)})})}),f&&u.jsx(Bce,{imageUrl:f,onClose:()=>p(null),altText:"Project Photo"})]})},Zj=({children:e,isLocked:t,title:r,message:n="Available after Quote Acceptance"})=>t?u.jsxs("div",{className:"relative w-full h-full overflow-hidden flex flex-col",children:[r&&u.jsx("div",{className:"p-4 border-b border-outline/10",children:u.jsx("h3",{className:"font-bold text-xl text-text-secondary opacity-70",children:r})}),u.jsx("div",{className:"flex-1 opacity-40 pointer-events-none filter blur-[1px] p-4 overflow-hidden relative",children:e}),u.jsxs("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center bg-surface-container/30 backdrop-blur-[1px]",children:[u.jsx("div",{className:"bg-surface-container-highest/90 border border-outline/20 p-4 rounded-full shadow-lg mb-2",children:u.jsx(N7,{className:"w-6 h-6 text-text-secondary"})}),u.jsx("p",{className:"font-semibold text-text-secondary text-sm bg-surface-container-highest/80 px-3 py-1 rounded-full border border-outline/20",children:n})]})]}):u.jsx(u.Fragment,{children:e}),pHe=rK.WidthProvider(rK.Responsive),mHe=()=>{var He;const{projectId:e}=wx(),t=pu(),{currentUser:r,isLayoutEditMode:n,toggleLayoutEditMode:i,saveCurrentUserPreferences:a,projectHistory:s,fetchProjectHistory:o,updateJob:l,refreshNotifications:c,users:d}=Gr(),{data:f=[]}=Kh(),{data:p=[]}=Rx(),{data:m=[]}=b4(),{data:x=[]}=qse(),{data:v=[]}=Kse(),{data:b=[]}=S4(),{data:w=[]}=gf(),k=Fse(),E=w7(),N=Gse(),P=E7(),R=b7(),[O,D]=I.useState(null),[L,B]=I.useState(!1),[z,H]=I.useState(null),[te,Y]=I.useState(null),[W,Z]=I.useState(null),[re,X]=I.useState(!1),Q=I.useMemo(()=>parseInt(e||"",10),[e]),fe=I.useMemo(()=>f.find(je=>je.id===Q),[f,Q]),ye=I.useMemo(()=>x.find(je=>je.projectId===Q),[x,Q]),J=I.useMemo(()=>p.find(je=>je.id===(fe==null?void 0:fe.customerId)),[p,fe]),ce=m.filter(je=>je.projectId===(fe==null?void 0:fe.id)),V=ce.find(je=>je.status==="Accepted"),G=(V==null?void 0:V.installerId)||((He=ce.find(je=>je.installerId))==null?void 0:He.installerId),ie=I.useMemo(()=>w.find(je=>je.id===G),[w,G]),Ee=I.useMemo(()=>d.find(je=>je.userId===(fe==null?void 0:fe.managerId)),[d,fe]),ne=I.useMemo(()=>({lg:[{i:"quotes",x:0,y:0,w:4,h:7,minH:5,minW:3},{i:"sample-checkouts",x:4,y:0,w:4,h:7,minH:4,minW:3},{i:"notes",x:8,y:0,w:4,h:7,minH:4,minW:3},{i:"job-details",x:0,y:7,w:12,h:9,minH:7,minW:6},{i:"material-orders",x:0,y:16,w:6,h:6,minH:4,minW:3},{i:"change-orders",x:6,y:16,w:6,h:6,minH:5,minW:3},{i:"photos",x:0,y:22,w:4,h:5,minH:4,minW:3},{i:"history",x:4,y:22,w:8,h:5,minH:4,minW:6}]}),[]),[ae,me]=I.useState(ne),[ve,q]=I.useState(ae);I.useEffect(()=>{var Ce;const je=(Ce=r==null?void 0:r.preferences)==null?void 0:Ce.projectLayouts;if(je&&Object.keys(je).length>0){const ot={...ne};Object.keys(je).forEach(xt=>{const Dt=je[xt]||[],Cr=(ne[xt]||[]).filter(wn=>!Dt.find(fr=>fr.i===wn.i));ot[xt]=[...Dt,...Cr]}),me(ot)}},[r,ne]),I.useEffect(()=>{n&&q(ae)},[n,ae]);const Ne=I.useCallback(async()=>{if(!isNaN(Q)){o(Q);try{if(!ye){const je=await JMe(Q);je&&l(je)}}catch{console.error("Could not load job schedule details.")}}},[Q,o,l,ye]);I.useEffect(()=>{Ne()},[Q,Ne]),I.useEffect(()=>{Q&&!isNaN(Q)&&bMe(Q).then(()=>c())},[Q,c]);const Pe=(je,Ce)=>{me(Ce)},ze=()=>{a({projectLayouts:ae}),Re.success("Layout saved!"),i()},De=()=>{me(ve),i()},$e=()=>{window.confirm("Are you sure you want to reset the layout to its default?")&&(me(ne),a({projectLayouts:ne}),Re.success("Layout has been reset."),i())},et=je=>{Z(je)},ut=async()=>{if(!(!fe||!J)&&window.confirm(`Are you sure you want to permanently delete the project "${fe.projectName}"?`)){X(!0);try{await k.deleteProject(fe.id),Re.success("Project deleted successfully."),t(`/customers/${J.id}`)}catch(je){Re.error(je.message||"Failed to delete project.")}finally{X(!1)}}},kt=async je=>{ye&&await N.saveJobDetails({projectId:fe.id,notes:je})},ht=async je=>k.updateProject(je),Rr=async je=>E.addQuote(je),er=async je=>E.updateQuote(je),ct=async je=>N.saveJobDetails(je),qt=async je=>R.addInstaller(je),Lt=async je=>P.addChangeOrder(je),dr=async(je,Ce)=>P.updateChangeOrder({id:je,data:Ce});if(!fe)return u.jsx("div",{className:"text-center p-8",children:"Project not found."});const Gt=ce.some(je=>je.status===cl.ACCEPTED),qe=ce.filter(je=>je.status===cl.ACCEPTED),Xe=v.filter(je=>je.projectId===fe.id),Te=b.filter(je=>je.projectId===fe.id);return u.jsxs("div",{className:"space-y-8",children:[u.jsx(K$e,{project:fe,customer:J,activeInstaller:ie,projectLead:Ee,currentUser:r,updateProject:ht,onEdit:()=>B(!0),onDeleteProject:ut,isDeleting:re,isLayoutEditMode:n,onSaveLayout:ze,onCancelLayout:De,onResetLayout:$e}),u.jsxs(pHe,{className:`layout ${n?"edit-mode":""}`,layouts:ae,onLayoutChange:Pe,breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},rowHeight:30,draggableHandle:".drag-handle",isDraggable:n,isResizable:n,children:[u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:u.jsx(Z$e,{project:fe,projectQuotes:ce,installers:w,addQuote:Rr,updateQuote:er,updateProject:ht,addInstaller:qt,saveJobDetails:ct,isModalOpen:O==="quote",onCloseModal:()=>D(null),onOpenEditModal:je=>{H(je),D("quote")},editingQuoteForModal:z})},"quotes"),u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:u.jsx(Zj,{isLocked:!Gt,title:"Job Financials & Schedule",children:Gt?u.jsx(eze,{project:fe,job:ye,quotes:ce,changeOrders:Xe,saveJobDetails:ct,updateProject:ht}):u.jsx("div",{className:"h-full w-full bg-surface/50"})})},"job-details"),u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:ye?u.jsx(cHe,{job:ye,onSaveNotes:kt}):u.jsx("div",{className:"flex items-center justify-center h-full text-text-tertiary",children:"Loading notes..."})},"notes"),u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:u.jsx(Q$e,{project:fe})},"sample-checkouts"),u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:u.jsx(Zj,{isLocked:!Gt,title:"Change Orders",children:Gt?u.jsx(tze,{project:fe,projectChangeOrders:Xe,acceptedQuotes:qe,addChangeOrder:Lt,onEditChangeOrder:et}):u.jsx("div",{className:"h-full w-full bg-surface/50"})})},"change-orders"),u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:u.jsx(Zj,{isLocked:!Gt,title:"Material Orders",children:Gt?u.jsx(rze,{project:fe,orders:Te,isModalOpen:O==="order",onCloseModal:()=>{D(null),Y(null)},editingOrder:te,onEditOrder:je=>{Y(je),D("order")}}):u.jsx("div",{className:"h-full w-full bg-surface/50"})})},"material-orders"),u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:u.jsx(hHe,{project:fe})},"photos"),u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:u.jsx(ub,{history:s})},"history")]}),L&&fe&&u.jsx(V$e,{project:fe,onClose:()=>B(!1),onSave:ht}),W&&u.jsx(q$e,{changeOrder:W,acceptedQuotes:qe,onClose:()=>Z(null),onSave:async je=>{await dr(W.id,je),Z(null)}})]})},yK=({installers:e,users:t,selectedInstallerIds:r,selectedUserIds:n,showDeliveries:i,onInstallerChange:a,onUserChange:s,onShowDeliveriesChange:o})=>{const[l,c]=I.useState(!1),d=I.useRef(null),[f,p]=I.useState("installers"),[m,x]=I.useState(new Set),[v,b]=I.useState(new Set),[w,k]=I.useState(!0);I.useEffect(()=>{l&&(x(new Set(r)),b(new Set(n)),k(i))},[l,r,n,i]),I.useEffect(()=>{const X=Q=>{window.innerWidth>=768&&d.current&&!d.current.contains(Q.target)&&c(!1)};return document.addEventListener("mousedown",X),()=>document.removeEventListener("mousedown",X)},[d]);const E=()=>a(new Set(e.map(X=>X.id))),N=()=>a(new Set),P=X=>a(new Set([X])),R=X=>{const Q=new Set(r);Q.has(X)?Q.delete(X):Q.add(X),a(Q)},O=()=>s(new Set(t.map(X=>X.userId))),D=()=>s(new Set),L=X=>s(new Set([X])),B=X=>{const Q=new Set(n);Q.has(X)?Q.delete(X):Q.add(X),s(Q)},z=X=>{const Q=new Set(m);Q.has(X)?Q.delete(X):Q.add(X),x(Q)},H=X=>{const Q=new Set(v);Q.has(X)?Q.delete(X):Q.add(X),b(Q)},te=X=>{x(new Set([X]))},Y=X=>{b(new Set([X]))},W=()=>{a(m),s(v),o(w),c(!1)},Z=()=>{x(new Set(e.map(X=>X.id))),b(new Set(t.map(X=>X.userId))),k(!0)},re=r.size+n.size;return u.jsxs("div",{className:"relative",ref:d,children:[u.jsxs("button",{onClick:()=>c(!l),className:"flex items-center gap-2 px-4 py-2 rounded-full bg-surface-container-high hover:bg-surface-container-highest transition-colors border border-outline/10 hover:border-outline/20 shadow-sm","aria-label":"Filter calendar",children:[u.jsx(J6,{size:20,className:"text-primary"}),u.jsx("span",{className:"font-medium text-text-primary",children:"Filter"}),re>0&&u.jsx("span",{className:"bg-primary text-on-primary text-xs font-bold rounded-full min-w-[20px] h-5 px-1 flex items-center justify-center",children:re})]}),l&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"hidden md:block absolute top-full right-0 mt-2 w-80 bg-surface-container-high border border-outline/10 rounded-xl shadow-2xl z-20 overflow-hidden ring-1 ring-black/5",children:u.jsxs("div",{className:"max-h-[70vh] overflow-y-auto",children:[u.jsx("div",{className:"p-3 border-b border-outline/10 bg-surface-container-low",children:u.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-surface-container-highest cursor-pointer transition-colors",children:[u.jsx("input",{type:"checkbox",checked:i,onChange:X=>o(X.target.checked),className:"h-5 w-5 rounded border-outline/20 text-primary focus:ring-primary bg-surface-container-highest cursor-pointer"}),u.jsxs("span",{className:"text-sm font-medium text-text-primary flex items-center gap-2",children:[u.jsx(O0,{size:14})," Material Deliveries"]})]})}),u.jsx("div",{className:"p-3 bg-surface-container-highest/50 border-b border-outline/5",children:u.jsx("h4",{className:"font-bold text-text-secondary text-xs uppercase tracking-wider",children:"Installers"})}),u.jsxs("div",{className:"flex justify-between px-3 py-2 bg-surface-container-low border-b border-outline/5",children:[u.jsx("button",{onClick:E,className:"text-xs text-primary font-medium hover:text-primary-hover",children:"Select All"}),u.jsx("button",{onClick:N,className:"text-xs text-text-secondary hover:text-text-primary",children:"Deselect All"})]}),u.jsx("div",{className:"p-2 space-y-1",children:(e||[]).map(X=>u.jsxs("div",{className:"group flex items-center justify-between p-2 rounded-lg hover:bg-surface-container-highest cursor-pointer transition-colors",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("input",{type:"checkbox",checked:r.has(X.id),onChange:()=>R(X.id),className:"h-4 w-4 rounded border-outline/20 text-primary focus:ring-primary bg-surface-container-highest cursor-pointer"}),u.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:X.color||"#6b7280"}}),u.jsx("span",{className:`text-sm ${r.has(X.id)?"text-text-primary font-medium":"text-text-secondary"}`,children:X.installerName})]}),u.jsx("button",{onClick:Q=>{Q.preventDefault(),P(X.id)},className:"opacity-0 group-hover:opacity-100 text-xs text-primary font-bold hover:bg-primary-container px-2 py-0.5 rounded transition-all",children:"Only"})]},`installer-${X.id}`))}),u.jsx("div",{className:"p-3 bg-surface-container-highest/50 border-y border-outline/5 mt-2",children:u.jsx("h4",{className:"font-bold text-text-secondary text-xs uppercase tracking-wider",children:"Users"})}),u.jsxs("div",{className:"flex justify-between px-3 py-2 bg-surface-container-low border-b border-outline/5",children:[u.jsx("button",{onClick:O,className:"text-xs text-primary font-medium hover:text-primary-hover",children:"Select All"}),u.jsx("button",{onClick:D,className:"text-xs text-text-secondary hover:text-text-primary",children:"Deselect All"})]}),u.jsx("div",{className:"p-2 space-y-1",children:(t||[]).map(X=>u.jsxs("div",{className:"group flex items-center justify-between p-2 rounded-lg hover:bg-surface-container-highest cursor-pointer transition-colors",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("input",{type:"checkbox",checked:n.has(X.userId),onChange:()=>B(X.userId),className:"h-4 w-4 rounded border-outline/20 text-primary focus:ring-primary bg-surface-container-highest cursor-pointer"}),u.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:X.color||"#6b7280"}}),u.jsx("span",{className:`text-sm ${n.has(X.userId)?"text-text-primary font-medium":"text-text-secondary"}`,children:X.email})]}),u.jsx("button",{onClick:Q=>{Q.preventDefault(),L(X.userId)},className:"opacity-0 group-hover:opacity-100 text-xs text-primary font-bold hover:bg-primary-container px-2 py-0.5 rounded transition-all",children:"Only"})]},`user-${X.userId}`))})]})}),u.jsxs("div",{className:"md:hidden fixed inset-0 bg-surface-container-low z-50 flex flex-col animate-in slide-in-from-bottom-5 duration-200",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-outline/10 bg-surface-container-high",children:[u.jsxs("h2",{className:"text-xl font-bold text-text-primary flex items-center gap-2",children:[u.jsx(J6,{size:20})," Filter Calendar"]}),u.jsx("button",{onClick:()=>c(!1),className:"p-2 bg-surface-container-highest rounded-full text-text-secondary hover:text-text-primary",children:u.jsx(Zr,{size:24})})]}),u.jsxs("div",{className:"flex border-b border-outline/10 bg-surface-container-high",children:[u.jsxs("button",{onClick:()=>p("installers"),className:`flex-1 py-4 font-semibold text-sm uppercase tracking-wide transition-colors ${f==="installers"?"border-b-2 border-primary text-primary":"text-text-secondary"}`,children:["Installers (",m.size,")"]}),u.jsxs("button",{onClick:()=>p("users"),className:`flex-1 py-4 font-semibold text-sm uppercase tracking-wide transition-colors ${f==="users"?"border-b-2 border-primary text-primary":"text-text-secondary"}`,children:["Users (",v.size,")"]})]}),u.jsx("div",{className:"p-4 bg-surface-container-low border-b border-outline/10",children:u.jsxs("div",{className:"flex items-center justify-between bg-surface-container-high p-4 rounded-xl border border-outline/5 shadow-sm",children:[u.jsxs("span",{className:"font-medium text-text-primary flex items-center gap-2",children:[u.jsx(O0,{size:18})," Show Deliveries"]}),u.jsx("div",{className:`w-12 h-7 rounded-full p-1 cursor-pointer transition-colors ${w?"bg-primary":"bg-gray-300"}`,onClick:()=>k(!w),children:u.jsx("div",{className:`bg-white w-5 h-5 rounded-full shadow-md transform transition-transform ${w?"translate-x-5":""}`})})]})}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-surface-container-low",children:[f==="installers"&&u.jsxs("div",{className:"space-y-2",children:[e.map(X=>{const Q=m.has(X.id);return u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>z(X.id),className:`flex-1 flex items-center justify-between p-4 rounded-xl border text-left transition-all ${Q?"bg-primary-container border-primary shadow-sm":"bg-surface-container-high border-outline/10"}`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-4 h-4 rounded-full flex-shrink-0",style:{backgroundColor:X.color||"#6b7280"}}),u.jsx("span",{className:`font-medium ${Q?"text-primary":"text-text-primary"}`,children:X.installerName})]}),Q&&u.jsx(ad,{size:20,className:"text-primary"})]}),u.jsx("button",{onClick:()=>te(X.id),className:"px-4 font-bold text-xs uppercase tracking-wide text-primary border border-outline/10 rounded-xl hover:bg-primary-container bg-surface-container-high shadow-sm",children:"Only"})]},X.id)}),e.length===0&&u.jsx("p",{className:"text-text-secondary text-center p-4",children:"No installers found."})]}),f==="users"&&u.jsxs("div",{className:"space-y-2",children:[t.map(X=>{const Q=v.has(X.userId);return u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>H(X.userId),className:`flex-1 flex items-center justify-between p-4 rounded-xl border text-left transition-all ${Q?"bg-primary-container border-primary shadow-sm":"bg-surface-container-high border-outline/10"}`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-4 h-4 rounded-full flex-shrink-0",style:{backgroundColor:X.color||"#6b7280"}}),u.jsx("span",{className:`font-medium ${Q?"text-primary":"text-text-primary"}`,children:X.email})]}),Q&&u.jsx(ad,{size:20,className:"text-primary"})]}),u.jsx("button",{onClick:()=>Y(X.userId),className:"px-4 font-bold text-xs uppercase tracking-wide text-primary border border-outline/10 rounded-xl hover:bg-primary-container bg-surface-container-high shadow-sm",children:"Only"})]},X.userId)}),t.length===0&&u.jsx("p",{className:"text-text-secondary text-center p-4",children:"No users found."})]})]}),u.jsxs("div",{className:"p-4 bg-surface-container-high border-t border-outline/10 flex gap-3",children:[u.jsxs("button",{onClick:Z,className:"flex-1 py-3 text-text-primary font-medium hover:bg-surface-container-highest rounded-full transition-colors border border-outline/10 flex items-center justify-center gap-2",children:[u.jsx(Lx,{size:18})," Reset All"]}),u.jsx("button",{onClick:W,className:"flex-1 py-3 bg-primary text-on-primary font-bold rounded-full shadow-lg hover:bg-primary-hover transition-colors",children:"Apply Filters"})]})]})]})]})},b9=()=>rr("/api/events"),gHe=async e=>{const t=await fetch(b9(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create event");return t.json()},xHe=async(e,t)=>{const r=await fetch(`${b9()}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to update event");return r.json()},vHe=async e=>{if(!(await fetch(`${b9()}/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete event")};function yHe(e,t){const r=CHe(t);return"formatToParts"in r?wHe(r,e):SHe(r,e)}const bHe={year:0,month:1,day:2,hour:3,minute:4,second:5};function wHe(e,t){try{const r=e.formatToParts(t),n=[];for(let i=0;i<r.length;i++){const a=bHe[r[i].type];a!==void 0&&(n[a]=parseInt(r[i].value,10))}return n}catch(r){if(r instanceof RangeError)return[NaN];throw r}}function SHe(e,t){const r=e.format(t),n=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(r);return[parseInt(n[3],10),parseInt(n[1],10),parseInt(n[2],10),parseInt(n[4],10),parseInt(n[5],10),parseInt(n[6],10)]}const eD={},bK=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),EHe=bK==="06/25/2014, 00:00:00"||bK==="06/25/2014 00:00:00";function CHe(e){return eD[e]||(eD[e]=EHe?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),eD[e]}function w9(e,t,r,n,i,a,s){const o=new Date(0);return o.setUTCFullYear(e,t,r),o.setUTCHours(n,i,a,s),o}const wK=36e5,kHe=6e4,tD={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Uce(e,t,r){if(!e)return 0;let n=tD.timezoneZ.exec(e);if(n)return 0;let i,a;if(n=tD.timezoneHH.exec(e),n)return i=parseInt(n[1],10),SK(i)?-(i*wK):NaN;if(n=tD.timezoneHHMM.exec(e),n){i=parseInt(n[2],10);const s=parseInt(n[3],10);return SK(i,s)?(a=Math.abs(i)*wK+s*kHe,n[1]==="+"?-a:a):NaN}if(AHe(e)){t=new Date(t||Date.now());const s=_He(t),o=T8(s,e);return-NHe(t,o,e)}return NaN}function _He(e){return w9(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function T8(e,t){const r=yHe(e,t),n=w9(r[0],r[1]-1,r[2],r[3]%24,r[4],r[5],0).getTime();let i=e.getTime();const a=i%1e3;return i-=a>=0?a:1e3+a,n-i}function NHe(e,t,r){let i=e.getTime()-t;const a=T8(new Date(i),r);if(t===a)return t;i-=a-t;const s=T8(new Date(i),r);return a===s?a:Math.max(a,s)}function SK(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}const EK={};function AHe(e){if(EK[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),EK[e]=!0,!0}catch{return!1}}function CK(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+e-+t}const $ce=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,rD=36e5,kK=6e4,THe=2,Bo={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:$ce};function _K(e,t={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);const r=t.additionalDigits==null?THe:Number(t.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(Object.prototype.toString.call(e)!=="[object String]")return new Date(NaN);const n=IHe(e),{year:i,restDateString:a}=OHe(n.date,r),s=PHe(a,i);if(s===null||isNaN(s.getTime()))return new Date(NaN);if(s){const o=s.getTime();let l=0,c;if(n.time&&(l=RHe(n.time),l===null||isNaN(l)))return new Date(NaN);if(n.timeZone||t.timeZone){if(c=Uce(n.timeZone||t.timeZone,new Date(o+l)),isNaN(c))return new Date(NaN)}else c=CK(new Date(o+l)),c=CK(new Date(o+l+c));return new Date(o+l+c)}else return new Date(NaN)}function IHe(e){const t={};let r=Bo.dateTimePattern.exec(e),n;if(r?(t.date=r[1],n=r[3]):(r=Bo.datePattern.exec(e),r?(t.date=r[1],n=r[2]):(t.date=null,n=e)),n){const i=Bo.timeZone.exec(n);i?(t.time=n.replace(i[1],""),t.timeZone=i[1].trim()):t.time=n}return t}function OHe(e,t){if(e){const r=Bo.YYY[t],n=Bo.YYYYY[t];let i=Bo.YYYY.exec(e)||n.exec(e);if(i){const a=i[1];return{year:parseInt(a,10),restDateString:e.slice(a.length)}}if(i=Bo.YY.exec(e)||r.exec(e),i){const a=i[1];return{year:parseInt(a,10)*100,restDateString:e.slice(a.length)}}}return{year:null}}function PHe(e,t){if(t===null)return null;let r,n,i;if(!e||!e.length)return r=new Date(0),r.setUTCFullYear(t),r;let a=Bo.MM.exec(e);if(a)return r=new Date(0),n=parseInt(a[1],10)-1,AK(t,n)?(r.setUTCFullYear(t,n),r):new Date(NaN);if(a=Bo.DDD.exec(e),a){r=new Date(0);const s=parseInt(a[1],10);return MHe(t,s)?(r.setUTCFullYear(t,0,s),r):new Date(NaN)}if(a=Bo.MMDD.exec(e),a){r=new Date(0),n=parseInt(a[1],10)-1;const s=parseInt(a[2],10);return AK(t,n,s)?(r.setUTCFullYear(t,n,s),r):new Date(NaN)}if(a=Bo.Www.exec(e),a)return i=parseInt(a[1],10)-1,TK(i)?NK(t,i):new Date(NaN);if(a=Bo.WwwD.exec(e),a){i=parseInt(a[1],10)-1;const s=parseInt(a[2],10)-1;return TK(i,s)?NK(t,i,s):new Date(NaN)}return null}function RHe(e){let t,r,n=Bo.HH.exec(e);if(n)return t=parseFloat(n[1].replace(",",".")),nD(t)?t%24*rD:NaN;if(n=Bo.HHMM.exec(e),n)return t=parseInt(n[1],10),r=parseFloat(n[2].replace(",",".")),nD(t,r)?t%24*rD+r*kK:NaN;if(n=Bo.HHMMSS.exec(e),n){t=parseInt(n[1],10),r=parseInt(n[2],10);const i=parseFloat(n[3].replace(",","."));return nD(t,r,i)?t%24*rD+r*kK+i*1e3:NaN}return null}function NK(e,t,r){t=t||0,r=r||0;const n=new Date(0);n.setUTCFullYear(e,0,4);const i=n.getUTCDay()||7,a=t*7+r+1-i;return n.setUTCDate(n.getUTCDate()+a),n}const jHe=[31,28,31,30,31,30,31,31,30,31,30,31],DHe=[31,29,31,30,31,30,31,31,30,31,30,31];function zce(e){return e%400===0||e%4===0&&e%100!==0}function AK(e,t,r){if(t<0||t>11)return!1;if(r!=null){if(r<1)return!1;const n=zce(e);if(n&&r>DHe[t]||!n&&r>jHe[t])return!1}return!0}function MHe(e,t){if(t<1)return!1;const r=zce(e);return!(r&&t>366||!r&&t>365)}function TK(e,t){return!(e<0||e>52||t!=null&&(t<0||t>6))}function nD(e,t,r){return!(e<0||e>=25||t!=null&&(t<0||t>=60)||r!=null&&(r<0||r>=60))}function __(e,t,r){if(typeof e=="string"&&!e.match($ce))return _K(e,{...r,timeZone:t});e=_K(e,r);const n=w9(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()).getTime(),i=Uce(t,new Date(n));return new Date(n+i)}const iD=e=>{const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`},A1=e=>{const t=new Date(e);return t.setHours(0,0,0,0),t},N_=(e,t)=>{const r=new Date(e);return t==="material_order_eta"?new Date(r.getTime()+r.getTimezoneOffset()*6e4):r},Hce=e=>e?e.replace(/@\[\w+:[\w-]+\|([^\]]+)\]/g,"$1"):"",FHe=e=>{if(!e)return"#FFFFFF";const t=e.replace("#",""),r=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),i=parseInt(t.substring(4,6),16);return(.299*r+.587*n+.114*i)/255>.5?"#000000":"#FFFFFF"},Wce=(e,t,r,n)=>{var a;if(e.type!=="user_appointment")return e.backgroundColor||"#6b7280";const i=e.fullEvent;if(i&&i.attendees&&i.attendees.length===1){const s=i.attendees[0];if(s.color)return s.color;if(s.attendeeType==="user"){if(n&&n.userId===s.attendeeId)return((a=n.preferences)==null?void 0:a.calendarColor)||"#3B82FF";{const o=(t||[]).find(l=>l.userId===s.attendeeId);return(o==null?void 0:o.color)||"#3B82FF"}}else{const o=(r||[]).find(l=>String(l.id)===s.attendeeId);return(o==null?void 0:o.color)||"#3B82FF"}}return"#3B82FF"},LHe=()=>{const{users:e,currentUser:t,systemBranding:r}=Gr(),{data:n=[]}=gf(),[i,a]=I.useState([]),[s,o]=I.useState(!0),[l,c]=I.useState(new Date),[d,f]=I.useState(new Set),[p,m]=I.useState(new Set),[x,v]=I.useState(!0),[b,w]=I.useState(!1),[k,E]=I.useState(null),[N,P]=I.useState(null),[R,O]=I.useState(null),[D,L]=I.useState(null);I.useEffect(()=>{n&&n.length>0&&f(new Set(n.map(me=>me.id))),e&&e.length>0&&m(new Set(e.map(me=>me.userId)))},[n,e]);const B=I.useCallback(async()=>{o(!0);const me=new URLSearchParams,ve=Array.from(d);ve.length>0&&me.append("installers",ve.join(","));const q=Array.from(p);q.length>0&&me.append("users",q.join(","));try{const Ne=await fetch(rr(`/api/calendar/events?${me.toString()}`),{credentials:"include"});if(!Ne.ok)throw new Error("Failed to fetch calendar events");const Pe=await Ne.json();a(Pe)}catch(Ne){console.error("Error fetching calendar events:",Ne)}finally{o(!1)}},[d,p]);I.useEffect(()=>{B()},[l,B]);const z=new Date(l.getFullYear(),l.getMonth(),1),H=new Date(l.getFullYear(),l.getMonth()+1,0),te=new Date(z);te.setDate(te.getDate()-te.getDay());const Y=new Date(H);Y.setDate(Y.getDate()+(6-Y.getDay()));const W=[];let Z=new Date(te);for(;Z<=Y;)W.push(new Date(Z)),Z.setDate(Z.getDate()+1);const re=new Date(l);re.setDate(l.getDate()-l.getDay());const X=Array.from({length:7},(me,ve)=>{const q=new Date(re);return q.setDate(re.getDate()+ve),q}),Q=me=>{const ve=A1(me);return i.filter(Ne=>{if(!Ne.start||!Ne.end||!x&&Ne.type==="material_order_eta")return!1;const Pe=A1(N_(Ne.start,Ne.type)),ze=A1(N_(Ne.end,Ne.type));return ve>=Pe&&ve<=ze}).sort((Ne,Pe)=>{const ze=new Date(Ne.start).getTime(),De=new Date(Pe.start).getTime();if(ze!==De)return ze-De;const $e=new Date(Ne.end).getTime(),et=new Date(Pe.end).getTime(),ut=$e-ze,kt=et-De;return ut!==kt?kt-ut:Ne.id-Pe.id})},fe=me=>{const ve=new Date(l);ve.setMonth(ve.getMonth()+me),c(ve)},ye=me=>{const ve=new Date(l);ve.setDate(ve.getDate()+me*7),c(ve)},J=me=>{E(null),P(me),w(!0)},ce=me=>{E(me),P(null),w(!0),O(null)},V=me=>{O(me)},G=()=>{B()},ie=()=>{w(!1),E(null),P(null),L(null)},Ee=me=>{const ve=new Date;return me.getDate()===ve.getDate()&&me.getMonth()===ve.getMonth()&&me.getFullYear()===ve.getFullYear()},ne=(me,ve,q="grid")=>{var qe,Xe,Te;const Ne=A1(N_(me.start,me.type)),Pe=A1(N_(me.end,me.type)),ze=A1(ve),De=ze.getTime()===Ne.getTime(),$e=ze.getTime()===Pe.getTime(),et=ve.getDay()===0,ut=q==="list"||De||et||R!==null,kt=me.type==="user_appointment",Rr=me.type==="material_order_eta"&&((qe=me.fullEvent)==null?void 0:qe.status)==="Received",er=me.type==="appointment"&&((Xe=me.fullEvent)==null?void 0:Xe.isJobComplete);let ct=me.type==="appointment"?`${me.title} (${me.customerName.split(" ")[0]})`:me.title;me.type==="appointment"&&me.poNumber&&(ct+=` - PO: ${me.poNumber}`),ct=Hce(ct);const qt=Wce(me,e||[],n||[],t),Lt=FHe(qt);let dr="block text-xs p-1 truncate relative overflow-hidden mb-1";q==="list"?dr="block text-sm p-2 rounded relative overflow-hidden mb-2":R!==null||De&&$e?dr+=" rounded":De?dr+=" rounded-l":$e&&(dr+=" rounded-r-md"),me.isOnHold&&(dr+=" on-hold-event");const Gt=me.isOnHold?{color:"#a0a0a0"}:{backgroundColor:qt,color:Lt};if((Rr||er||me.projectStatus==="Completed")&&!me.isOnHold&&(Gt.backgroundImage="repeating-linear-gradient(45deg, transparent, transparent 5px, rgba(0,0,0,0.2) 5px, rgba(0,0,0,0.2) 10px)",ct=` ${ct}`),kt){const je=((Te=me.fullEvent)==null?void 0:Te.isAllDay)?"All Day":new Date(me.start).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"});return u.jsxs("div",{onClick:Ce=>{Ce.stopPropagation(),ce(me.fullEvent)},className:`${dr} cursor-pointer`,style:{backgroundColor:qt,color:Lt},title:ct,children:[u.jsx("span",{className:"font-bold",children:je}),u.jsx("span",{className:"ml-1",children:ut?ct:""})]},me.appointmentId)}else return u.jsx("div",{className:`${dr} cursor-pointer hover:brightness-110`,style:Gt,title:ct,onClick:He=>{He.stopPropagation(),L(me)},children:ut?ct:""},me.appointmentId)};if(s)return u.jsx("div",{className:"text-center p-8",children:"Loading Calendar..."});const ae=2;return u.jsxs("div",{className:"flex flex-col h-full gap-4 md:gap-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4 px-1",children:[u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 md:gap-6 w-full md:w-auto",children:[u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-text-primary tracking-tight",children:"Calendar"})}),u.jsxs("div",{className:"flex flex-row items-center justify-between gap-4 w-full md:w-auto",children:[u.jsxs("div",{className:"flex items-center bg-surface-container-high rounded-full border border-outline/10 p-1 shadow-sm flex-shrink-0",children:[u.jsx("button",{onClick:()=>fe(-1),className:"p-2 rounded-full hover:bg-surface-container-highest text-text-secondary hover:text-text-primary transition-colors",children:u.jsx(Wq,{size:20})}),u.jsx("span",{className:"font-bold text-sm md:text-lg px-2 md:px-4 min-w-[120px] md:min-w-[180px] text-center text-text-primary",children:l.toLocaleString("default",{month:"short",year:"numeric"})}),u.jsx("button",{onClick:()=>fe(1),className:"p-2 rounded-full hover:bg-surface-container-highest text-text-secondary hover:text-text-primary transition-colors",children:u.jsx(sd,{size:20})})]}),u.jsx("div",{className:"block md:hidden w-full max-w-[200px]",children:u.jsx(yK,{installers:n,users:e,selectedInstallerIds:d,selectedUserIds:p,showDeliveries:x,onInstallerChange:f,onUserChange:m,onShowDeliveriesChange:v})})]})]}),u.jsx("div",{className:"hidden md:block w-full md:w-auto",children:u.jsx(yK,{installers:n,users:e,selectedInstallerIds:d,selectedUserIds:p,showDeliveries:x,onInstallerChange:f,onUserChange:m,onShowDeliveriesChange:v})})]}),u.jsxs("div",{className:"md:hidden flex-1 flex flex-col gap-4",children:[u.jsxs("div",{className:"flex justify-between items-center bg-surface p-3 rounded-lg border border-border shadow-sm",children:[u.jsxs("button",{onClick:()=>ye(-1),className:"flex items-center text-sm font-medium text-text-secondary hover:text-primary",children:[u.jsx(Wq,{size:16,className:"mr-1"})," Prev Week"]}),u.jsxs("span",{className:"text-sm font-bold text-text-primary",children:["Week of ",re.toLocaleDateString(void 0,{month:"short",day:"numeric"})]}),u.jsxs("button",{onClick:()=>ye(1),className:"flex items-center text-sm font-medium text-text-secondary hover:text-primary",children:["Next Week ",u.jsx(sd,{size:16,className:"ml-1"})]})]}),u.jsx("div",{className:"space-y-4",children:X.map((me,ve)=>{const q=Q(me),Ne=Ee(me);return u.jsxs("div",{className:`bg-surface border ${Ne?"border-primary":"border-border"} rounded-lg shadow-sm overflow-hidden`,children:[u.jsxs("div",{className:"flex justify-between items-center p-3 bg-background border-b border-border",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:`text-lg font-bold w-8 h-8 flex items-center justify-center rounded-full ${Ne?"bg-primary text-on-primary":"text-text-primary"}`,children:me.getDate()}),u.jsx("span",{className:"font-semibold text-text-primary",children:me.toLocaleDateString(void 0,{weekday:"long"})})]}),u.jsx("button",{onClick:()=>J(me),className:"p-1.5 bg-secondary/10 text-secondary hover:bg-secondary/20 rounded-md transition-colors",children:u.jsx(Zl,{size:18})})]}),u.jsx("div",{className:"p-3 min-h-[60px]",children:q.length>0?q.map(Pe=>ne(Pe,me,"list")):u.jsx("p",{className:"text-sm text-text-tertiary italic",children:"No events scheduled"})})]},ve)})})]}),u.jsxs("div",{className:"hidden md:flex bg-surface-container-high p-6 rounded-xl shadow-sm border border-outline/10 flex-1 flex-col min-h-0 relative",children:[u.jsx("div",{className:"grid grid-cols-7 text-center font-semibold text-text-primary border-b border-outline/10 pb-2 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(me=>u.jsx("div",{children:me},me))}),u.jsx("div",{className:"grid grid-cols-7 grid-rows-6 flex-1",children:W.map((me,ve)=>{const q=Q(me),Ne=me.getMonth()===l.getMonth(),Pe=q.slice(0,ae),ze=q.length-ae;return u.jsxs("div",{onClick:()=>J(me),className:`border border-outline/10 flex flex-col cursor-pointer transition-colors ${Ne?"hover:bg-surface-container-highest bg-surface-container-low":"bg-surface-container-lowest text-text-secondary opacity-50"}`,children:[u.jsx("span",{className:`font-semibold mb-1 self-start p-1 ml-1 mt-1 ${Ee(me)?"bg-primary text-on-primary rounded-full w-7 h-7 flex items-center justify-center shadow-md":"w-7 h-7 flex items-center justify-center text-text-primary"}`,children:me.getDate()}),u.jsxs("div",{className:"flex-1 overflow-hidden px-1",children:[Pe.map(De=>ne(De,me)),ze>0&&u.jsxs("div",{onClick:De=>{De.stopPropagation(),V(me)},className:"text-xs text-text-secondary font-medium hover:text-primary cursor-pointer mt-1 bg-surface/50 rounded p-1 text-center",children:["+ ",ze," More"]})]})]},ve)})})]}),R&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-2xl shadow-2xl w-full max-w-md max-h-[80vh] flex flex-col border border-outline/10",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-outline/10 pb-2",children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:R.toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"})}),u.jsx("button",{onClick:()=>O(null),className:"text-text-secondary hover:text-text-primary p-2 hover:bg-surface-container-highest rounded-full",children:u.jsx(Zr,{size:24})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:Q(R).map(me=>ne(me,R))}),u.jsx("div",{className:"mt-4 pt-4 border-t border-outline/10 flex justify-end",children:u.jsx("button",{onClick:()=>{O(null),J(R)},className:"bg-primary hover:bg-primary-hover text-on-primary px-4 py-2 rounded-full text-sm font-semibold shadow-md transition-colors",children:"+ Add New Event"})})]})}),b&&u.jsx(UHe,{isOpen:b,onClose:ie,event:k,selectedDate:N,onSaveSuccess:G}),D&&u.jsx(BHe,{event:D,onClose:()=>L(null),users:e||[],installers:n||[],currentUser:t})]})},BHe=({event:e,onClose:t,users:r,installers:n,currentUser:i})=>{const a=Wce(e,r,n,i),s=e.fullEvent||{},o=new Date(e.start),l=new Date(e.end),c=o.toDateString()===l.toDateString()?o.toLocaleDateString([],{weekday:"long",month:"long",day:"numeric"}):`${o.toLocaleDateString([],{month:"short",day:"numeric"})} - ${l.toLocaleDateString([],{month:"short",day:"numeric"})}`;return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",onClick:t,children:u.jsxs("div",{className:"bg-surface-container-high rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden animate-in fade-in zoom-in duration-200 border border-outline/10",onClick:d=>d.stopPropagation(),children:[u.jsx("div",{className:"h-2 w-full",style:{backgroundColor:a}}),u.jsxs("div",{className:"p-5",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-4 h-4 rounded mt-1.5 shrink-0",style:{backgroundColor:a}}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold text-text-primary leading-tight",children:e.title}),u.jsx("p",{className:"text-sm text-text-secondary mt-1",children:c})]})]}),u.jsx("button",{onClick:t,className:"text-text-tertiary hover:text-text-primary p-1 rounded-full hover:bg-surface-container-highest transition-colors",children:u.jsx(Zr,{size:20})})]}),u.jsxs("div",{className:"space-y-4 pl-7",children:[e.type==="material_order_eta"?u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-start gap-3 text-sm text-text-secondary",children:[u.jsx(Jg,{size:18,className:"text-text-tertiary shrink-0 mt-0.5"}),u.jsxs("div",{children:[u.jsxs("p",{children:[u.jsx("span",{className:"font-medium text-text-primary",children:"Supplier:"})," ",s.supplierName]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-medium text-text-primary",children:"Status:"})," ",s.status]})]})]}),s.items&&Array.isArray(s.items)&&u.jsx("div",{className:"space-y-2 mt-2",children:s.items.map((d,f)=>u.jsxs("div",{className:"flex gap-3 p-2 bg-surface-container-low rounded-lg border border-outline/10",children:[u.jsx("div",{className:"w-10 h-10 bg-surface-container-highest rounded-md border border-outline/10 shrink-0 overflow-hidden",children:d.image?u.jsx("img",{src:Ia(d.image),alt:"",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center text-text-tertiary",children:u.jsx(Jg,{size:14})})}),u.jsxs("div",{className:"text-sm overflow-hidden",children:[u.jsx("p",{className:"font-medium text-text-primary truncate",title:d.name,children:d.name}),u.jsxs("p",{className:"text-xs text-text-secondary",children:[d.quantity," ",d.unit]})]})]},f))})]}):u.jsxs(u.Fragment,{children:[s.address&&u.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[u.jsx(T4,{size:18,className:"text-text-tertiary shrink-0 mt-0.5"}),u.jsx("a",{href:`https://maps.google.com/?q=${encodeURIComponent(s.address)}`,target:"_blank",rel:"noreferrer",className:"text-text-primary hover:underline hover:text-primary",children:s.address})]}),u.jsxs("div",{className:"flex items-start gap-3 text-sm text-text-secondary",children:[u.jsx(Jc,{size:18,className:"text-text-tertiary shrink-0 mt-0.5"}),u.jsxs("div",{children:[u.jsxs("p",{children:[u.jsx("span",{className:"font-medium text-text-primary",children:"Project:"})," ",s.projectName]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-medium text-text-primary",children:"Customer:"})," ",e.customerName]}),s.installerName&&u.jsxs("p",{children:[u.jsx("span",{className:"font-medium text-text-primary",children:"Installer:"})," ",s.installerName]})]})]}),s.pinnedNotes&&u.jsxs("div",{className:"mt-3 p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-md text-sm text-text-primary",children:[u.jsx("p",{className:"text-xs font-bold text-yellow-600 mb-1 flex items-center gap-1",children:" IMPORTANT NOTES"}),u.jsx(i3,{content:s.pinnedNotes})]})]}),u.jsx("div",{className:"pt-2 border-t border-border mt-2",children:u.jsxs(ai,{to:`/projects/${e.id}`,className:"inline-flex items-center gap-2 text-primary hover:text-primary-hover font-semibold text-sm",children:["Open Project Details ",u.jsx(K0,{size:16})]})})]})]})]})})},UHe=({isOpen:e,onClose:t,event:r,selectedDate:n,onSaveSuccess:i})=>{var ie,Ee;const{users:a,currentUser:s,systemBranding:o}=Gr(),{data:l=[]}=gf(),c=o==null?void 0:o.systemTimezone,d=!r||s&&r.createdByUserId===s.userId,[f,p]=I.useState(!r),[m,x]=I.useState(""),[v,b]=I.useState(""),[w,k]=I.useState(""),[E,N]=I.useState(""),[P,R]=I.useState("09:00"),[O,D]=I.useState("10:00"),[L,B]=I.useState(!1),[z,H]=I.useState(!1),[te,Y]=I.useState([]),[W,Z]=I.useState(!1),[re,X]=I.useState(!1),Q=Hr.useMemo(()=>[...(a||[]).map(ne=>({label:ne.email,value:`user-${ne.userId}`,type:"user",color:ne.color})),...(l||[]).map(ne=>({label:ne.installerName,value:`installer-${String(ne.id)}`,type:"installer",color:ne.color}))],[a,l]);I.useEffect(()=>{var ne;if(r){x(r.title),b(r.notes||"");const ae=new Date(r.startTime),me=new Date(r.endTime);if(k(iD(ae)),N(iD(me)),R(ae.toTimeString().substring(0,5)),D(me.toTimeString().substring(0,5)),B(r.isAllDay||!1),H(r.isPublic||!1),r.attendees){const ve=r.attendees.map(q=>{var Ne;if(q.attendeeType==="user"){const Pe=(a||[]).find(De=>De.userId===q.attendeeId);let ze=(Pe==null?void 0:Pe.color)||null;return!ze&&s&&s.userId===q.attendeeId&&(ze=(Ne=s.preferences)==null?void 0:Ne.calendarColor),Pe?{label:Pe.email,value:`user-${Pe.userId}`,type:"user",color:ze}:null}else{const Pe=(l||[]).find(ze=>String(ze.id)===q.attendeeId);return Pe?{label:Pe.installerName,value:`installer-${String(Pe.id)}`,type:"installer",color:Pe.color}:null}}).filter(q=>q!==null);Y(ve)}}else if(n){x(""),b("");const ae=iD(n);k(ae),N(ae),R("09:00"),D("10:00"),B(!1),H(!1),Y(s?[{label:s.email,value:`user-${s.userId}`,type:"user",color:(ne=s.preferences)==null?void 0:ne.calendarColor}]:[])}},[r,n,a,l,s]);const fe=async()=>{if(!m){Re.error("Title is required.");return}Z(!0);try{const ne=c||"America/Los_Angeles";let ae,me;L?(ae=__(`${w}T00:00:00`,ne),me=__(`${E}T23:59:59`,ne)):(ae=__(`${w}T${P}:00`,ne),me=__(`${E}T${O}:00`,ne));const ve={title:m,notes:v,startTime:ae.toISOString(),endTime:me.toISOString(),isAllDay:L,isPublic:z,jobId:null,attendees:te.map(q=>({attendeeId:q.value.substring(q.value.indexOf("-")+1),attendeeType:q.type}))};r?await xHe(r.id,ve):await gHe(ve),Re.success(r?"Updated!":"Created!"),i(),t()}catch{Re.error("Failed to save.")}finally{Z(!1)}},ye=async()=>{if(!(!r||!window.confirm("Delete this appointment?"))){X(!0);try{await vHe(r.id),Re.success("Deleted."),i(),t()}catch{Re.error("Failed to delete.")}finally{X(!1)}}},J=async ne=>{if(r)try{if(!(await fetch(rr(`/api/events/${r.id}/respond`),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:ne}),credentials:"include"})).ok)throw new Error("Failed");Re.success(`Invitation ${ne}`),i(),t()}catch{Re.error("Could not update status")}};if(!e)return null;const ce=(ie=r==null?void 0:r.attendees)==null?void 0:ie.find(ne=>ne.attendeeType==="user"&&ne.attendeeId===(s==null?void 0:s.userId)),V=(ce==null?void 0:ce.status)||"pending",G=!!r&&!d&&ce&&V==="pending";return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-surface-container-high p-8 rounded-2xl shadow-2xl w-full max-w-lg relative border border-outline/10",children:[u.jsxs("div",{className:"flex justify-between items-start mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:r?f?"Edit Appointment":"Appointment Details":"New Appointment"}),u.jsxs("div",{className:"flex items-center gap-2",children:[r&&!f&&d&&u.jsx("button",{onClick:()=>p(!0),className:"p-2 text-primary hover:bg-surface-container-highest rounded-full transition-colors",title:"Edit",children:u.jsx(Zg,{size:18})}),u.jsx("button",{onClick:t,className:"p-2 text-text-secondary hover:text-text-primary rounded-full hover:bg-surface-container-highest transition-colors",children:u.jsx(Zr,{size:20})})]})]}),!f&&r?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-1",children:u.jsx("span",{dangerouslySetInnerHTML:{__html:Hce(r.title)}})}),u.jsxs("div",{className:"flex items-center text-text-secondary text-sm",children:[u.jsx(od,{size:16,className:"mr-2"}),new Date(r.startTime).toLocaleString([],{dateStyle:"medium",timeStyle:"short"})," - ",new Date(r.endTime).toLocaleString([],{timeStyle:"short"})]}),r.isPublic&&u.jsxs("div",{className:"flex items-center text-xs text-primary mt-1",children:[u.jsx(Qg,{size:12,className:"mr-1"})," Public Event"]})]}),u.jsx("div",{className:"bg-surface-container-low p-4 rounded-xl border border-outline/10 max-h-60 overflow-y-auto",children:u.jsx(i3,{content:r.notes||"No notes provided."})}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-semibold text-text-secondary mb-2",children:"Attendees"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:(Ee=r.attendees)==null?void 0:Ee.map((ne,ae)=>{var Pe,ze;const ve=ne.attendeeType==="user"?(Pe=a.find(De=>De.userId===ne.attendeeId))==null?void 0:Pe.email:(ze=l.find(De=>String(De.id)===ne.attendeeId))==null?void 0:ze.installerName;let q=od,Ne="text-yellow-500";return ne.status==="accepted"&&(q=ad,Ne="text-green-500"),ne.status==="declined"&&(q=N4,Ne="text-red-500"),u.jsxs("div",{className:"flex items-center bg-surface-container-highest border border-outline/10 px-3 py-1 rounded-full text-xs",children:[u.jsx(q,{size:12,className:`mr-1 ${Ne}`}),u.jsx("span",{className:"text-text-primary",children:ve||"Unknown"})]},ae)})})]}),G&&u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-outline/10",children:[u.jsx("span",{className:"text-sm text-text-secondary self-center mr-auto",children:"You are invited:"}),u.jsx("button",{onClick:()=>J("declined"),className:"px-4 py-2 text-sm border border-error text-error rounded-full hover:bg-error/10 font-medium transition-colors",children:"Decline"}),u.jsx("button",{onClick:()=>J("accepted"),className:"px-4 py-2 text-sm bg-success text-on-success rounded-full hover:bg-success-hover font-medium transition-colors",children:"Accept"})]})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Title"}),u.jsx(wT,{value:m,onChange:x,placeholder:"Event Title...",singleLine:!0})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:"Start"}),u.jsx("input",{type:"date",value:w,onChange:ne=>k(ne.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors mb-2"}),!L&&u.jsx("input",{type:"time",value:P,onChange:ne=>R(ne.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:"End"}),u.jsx("input",{type:"date",value:E,onChange:ne=>N(ne.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors mb-2"}),!L&&u.jsx("input",{type:"time",value:O,onChange:ne=>D(ne.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors"})]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"checkbox",id:"isAllDay",checked:L,onChange:ne=>B(ne.target.checked),className:"w-4 h-4 text-primary bg-surface-container-highest border-outline/20 rounded focus:ring-primary"}),u.jsx("label",{htmlFor:"isAllDay",className:"text-sm font-medium text-text-primary cursor-pointer",children:"All Day"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"checkbox",id:"isPublic",checked:z,onChange:ne=>H(ne.target.checked),className:"w-4 h-4 text-primary bg-surface-container-highest border-outline/20 rounded focus:ring-primary"}),u.jsxs("label",{htmlFor:"isPublic",className:"text-sm font-medium text-text-primary cursor-pointer flex items-center",children:[z?u.jsx(Qg,{size:14,className:"mr-1"}):u.jsx(N7,{size:14,className:"mr-1"}),z?"Public Event":"Private"]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:"Attendees"}),u.jsx(jle,{isMulti:!0,options:Q,value:te,onChange:Y,className:"react-select-container mt-1",classNamePrefix:"react-select",styles:{control:ne=>({...ne,backgroundColor:"var(--color-surface-container-highest)",borderColor:"transparent",borderRadius:"0.5rem",padding:"0.2rem"}),input:ne=>({...ne,color:"var(--color-text-primary)"}),multiValue:ne=>({...ne,backgroundColor:"var(--color-surface-container-low)"}),multiValueLabel:ne=>({...ne,color:"var(--color-text-primary)"}),menu:ne=>({...ne,backgroundColor:"var(--color-surface-container-highest)"}),option:(ne,{isFocused:ae,isSelected:me})=>({...ne,backgroundColor:me?"var(--color-primary)":ae?"var(--color-surface-container-highest)":void 0,color:me?"var(--color-on-primary)":"var(--color-text-primary)"})}})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Notes"}),u.jsx(wT,{value:v,onChange:b,placeholder:"Add notes...",minHeight:80})]}),u.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[r&&u.jsx("button",{type:"button",onClick:ye,disabled:re,className:"py-2 px-4 bg-error-container hover:bg-error/20 text-error rounded-full font-semibold mr-auto flex items-center justify-center transition-colors",children:u.jsx(mo,{size:16})}),u.jsx("button",{type:"button",onClick:()=>r?p(!1):t(),className:"py-2 px-6 bg-surface hover:bg-surface-container-highest border border-outline/20 rounded-full text-text-secondary font-medium transition-colors",children:"Cancel"}),u.jsx("button",{type:"button",onClick:fe,disabled:W,className:"py-2 px-6 bg-primary hover:bg-primary-hover rounded-full text-on-primary font-bold shadow-md transition-all",children:W?"Saving...":"Save"})]})]})]})})};function T1(e,t,r){let n=r.initialDeps??[],i;function a(){var s,o,l,c;let d;r.key&&((s=r.debug)!=null&&s.call(r))&&(d=Date.now());const f=e();if(!(f.length!==n.length||f.some((x,v)=>n[v]!==x)))return i;n=f;let m;if(r.key&&((o=r.debug)!=null&&o.call(r))&&(m=Date.now()),i=t(...f),r.key&&((l=r.debug)!=null&&l.call(r))){const x=Math.round((Date.now()-d)*100)/100,v=Math.round((Date.now()-m)*100)/100,b=v/16,w=(k,E)=>{for(k=String(k);k.length<E;)k=" "+k;return k};console.info(`%c ${w(v,5)} /${w(x,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*b,120))}deg 100% 31%);`,r==null?void 0:r.key)}return(c=r==null?void 0:r.onChange)==null||c.call(r,i),i}return a.updateDeps=s=>{n=s},a}function IK(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const $He=(e,t)=>Math.abs(e-t)<1.01,zHe=(e,t,r)=>{let n;return function(...i){e.clearTimeout(n),n=e.setTimeout(()=>t.apply(this,i),r)}},OK=e=>{const{offsetWidth:t,offsetHeight:r}=e;return{width:t,height:r}},HHe=e=>e,WHe=e=>{const t=Math.max(e.startIndex-e.overscan,0),r=Math.min(e.endIndex+e.overscan,e.count-1),n=[];for(let i=t;i<=r;i++)n.push(i);return n},VHe=(e,t)=>{const r=e.scrollElement;if(!r)return;const n=e.targetWindow;if(!n)return;const i=s=>{const{width:o,height:l}=s;t({width:Math.round(o),height:Math.round(l)})};if(i(OK(r)),!n.ResizeObserver)return()=>{};const a=new n.ResizeObserver(s=>{const o=()=>{const l=s[0];if(l!=null&&l.borderBoxSize){const c=l.borderBoxSize[0];if(c){i({width:c.inlineSize,height:c.blockSize});return}}i(OK(r))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return a.observe(r,{box:"border-box"}),()=>{a.unobserve(r)}},PK={passive:!0},RK=typeof window>"u"?!0:"onscrollend"in window,qHe=(e,t)=>{const r=e.scrollElement;if(!r)return;const n=e.targetWindow;if(!n)return;let i=0;const a=e.options.useScrollendEvent&&RK?()=>{}:zHe(n,()=>{t(i,!1)},e.options.isScrollingResetDelay),s=d=>()=>{const{horizontal:f,isRtl:p}=e.options;i=f?r.scrollLeft*(p&&-1||1):r.scrollTop,a(),t(i,d)},o=s(!0),l=s(!1);l(),r.addEventListener("scroll",o,PK);const c=e.options.useScrollendEvent&&RK;return c&&r.addEventListener("scrollend",l,PK),()=>{r.removeEventListener("scroll",o),c&&r.removeEventListener("scrollend",l)}},GHe=(e,t,r)=>{if(t!=null&&t.borderBoxSize){const n=t.borderBoxSize[0];if(n)return Math.round(n[r.options.horizontal?"inlineSize":"blockSize"])}return e[r.options.horizontal?"offsetWidth":"offsetHeight"]},KHe=(e,{adjustments:t=0,behavior:r},n)=>{var i,a;const s=e+t;(a=(i=n.scrollElement)==null?void 0:i.scrollTo)==null||a.call(i,{[n.options.horizontal?"left":"top"]:s,behavior:r})};class XHe{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let r=null;const n=()=>r||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:r=new this.targetWindow.ResizeObserver(i=>{i.forEach(a=>{const s=()=>{this._measureElement(a.target,a)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(s):s()})}));return{disconnect:()=>{var i;(i=n())==null||i.disconnect(),r=null},observe:i=>{var a;return(a=n())==null?void 0:a.observe(i,{box:"border-box"})},unobserve:i=>{var a;return(a=n())==null?void 0:a.unobserve(i)}}})(),this.range=null,this.setOptions=r=>{Object.entries(r).forEach(([n,i])=>{typeof i>"u"&&delete r[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:HHe,rangeExtractor:WHe,onChange:()=>{},measureElement:GHe,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...r}},this.notify=r=>{var n,i;(i=(n=this.options).onChange)==null||i.call(n,this,r)},this.maybeNotify=T1(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),r=>{this.notify(r)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(r=>r()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var r;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.maybeNotify();return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((r=this.scrollElement)==null?void 0:r.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,a)=>{this.scrollAdjustments=0,this.scrollDirection=a?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=a,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(r,n)=>{const i=new Map,a=new Map;for(let s=n-1;s>=0;s--){const o=r[s];if(i.has(o.lane))continue;const l=a.get(o.lane);if(l==null||o.end>l.end?a.set(o.lane,o):o.end<l.end&&i.set(o.lane,!0),i.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((s,o)=>s.end===o.end?s.index-o.index:s.end-o.end)[0]:void 0},this.getMeasurementOptions=T1(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(r,n,i,a,s)=>(this.pendingMeasuredCacheIndexes=[],{count:r,paddingStart:n,scrollMargin:i,getItemKey:a,enabled:s}),{key:!1}),this.getMeasurements=T1(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:r,paddingStart:n,scrollMargin:i,getItemKey:a,enabled:s},o)=>{if(!s)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(d=>{this.itemSizeCache.set(d.key,d.size)}));const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const c=this.measurementsCache.slice(0,l);for(let d=l;d<r;d++){const f=a(d),p=this.options.lanes===1?c[d-1]:this.getFurthestMeasurement(c,d),m=p?p.end+this.options.gap:n+i,x=o.get(f),v=typeof x=="number"?x:this.options.estimateSize(d),b=m+v,w=p?p.lane:d%this.options.lanes;c[d]={index:d,start:m,size:v,end:b,key:f,lane:w}}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=T1(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(r,n,i,a)=>this.range=r.length>0&&n>0?YHe({measurements:r,outerSize:n,scrollOffset:i,lanes:a}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=T1(()=>{let r=null,n=null;const i=this.calculateRange();return i&&(r=i.startIndex,n=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,r,n]),[this.options.rangeExtractor,this.options.overscan,this.options.count,r,n]},(r,n,i,a,s)=>a===null||s===null?[]:r({startIndex:a,endIndex:s,overscan:n,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=r=>{const n=this.options.indexAttribute,i=r.getAttribute(n);return i?parseInt(i,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(r,n)=>{const i=this.indexFromElement(r),a=this.measurementsCache[i];if(!a)return;const s=a.key,o=this.elementsCache.get(s);o!==r&&(o&&this.observer.unobserve(o),this.observer.observe(r),this.elementsCache.set(s,r)),r.isConnected&&this.resizeItem(i,this.options.measureElement(r,n,this))},this.resizeItem=(r,n)=>{const i=this.measurementsCache[r];if(!i)return;const a=this.itemSizeCache.get(i.key)??i.size,s=n-a;s!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,s,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=s,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,n)),this.notify(!1))},this.measureElement=r=>{if(!r){this.elementsCache.forEach((n,i)=>{n.isConnected||(this.observer.unobserve(n),this.elementsCache.delete(i))});return}this._measureElement(r,void 0)},this.getVirtualItems=T1(()=>[this.getVirtualIndexes(),this.getMeasurements()],(r,n)=>{const i=[];for(let a=0,s=r.length;a<s;a++){const o=r[a],l=n[o];i.push(l)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=r=>{const n=this.getMeasurements();if(n.length!==0)return IK(n[Vce(0,n.length-1,i=>IK(n[i]).start,r)])},this.getOffsetForAlignment=(r,n,i=0)=>{const a=this.getSize(),s=this.getScrollOffset();n==="auto"&&(n=r>=s+a?"end":"start"),n==="center"?r+=(i-a)/2:n==="end"&&(r-=a);const o=this.getTotalSize()+this.options.scrollMargin-a;return Math.max(Math.min(o,r),0)},this.getOffsetForIndex=(r,n="auto")=>{r=Math.max(0,Math.min(r,this.options.count-1));const i=this.measurementsCache[r];if(!i)return;const a=this.getSize(),s=this.getScrollOffset();if(n==="auto")if(i.end>=s+a-this.options.scrollPaddingEnd)n="end";else if(i.start<=s+this.options.scrollPaddingStart)n="start";else return[s,n];const o=n==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,n,i.size),n]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(r,{align:n="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(r,n),{adjustments:void 0,behavior:i})},this.scrollToIndex=(r,{align:n="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),r=Math.max(0,Math.min(r,this.options.count-1));let a=0;const s=10,o=c=>{if(!this.targetWindow)return;const d=this.getOffsetForIndex(r,c);if(!d){console.warn("Failed to get offset for index:",r);return}const[f,p]=d;this._scrollToOffset(f,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{const m=this.getScrollOffset(),x=this.getOffsetForIndex(r,p);if(!x){console.warn("Failed to get offset for index:",r);return}$He(x[0],m)||l(p)})},l=c=>{this.targetWindow&&(a++,a<s?this.targetWindow.requestAnimationFrame(()=>o(c)):console.warn(`Failed to scroll to index ${r} after ${s} attempts.`))};o(n)},this.scrollBy=(r,{behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+r,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var r;const n=this.getMeasurements();let i;if(n.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((r=n[n.length-1])==null?void 0:r.end)??0;else{const a=Array(this.options.lanes).fill(null);let s=n.length-1;for(;s>=0&&a.some(o=>o===null);){const o=n[s];a[o.lane]===null&&(a[o.lane]=o.end),s--}i=Math.max(...a.filter(o=>o!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(r,{adjustments:n,behavior:i})=>{this.options.scrollToFn(r,{behavior:i,adjustments:n},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(t)}}const Vce=(e,t,r,n)=>{for(;e<=t;){const i=(e+t)/2|0,a=r(i);if(a<n)e=i+1;else if(a>n)t=i-1;else return i}return e>0?e-1:0};function YHe({measurements:e,outerSize:t,scrollOffset:r,lanes:n}){const i=e.length-1,a=l=>e[l].start;if(e.length<=n)return{startIndex:0,endIndex:i};let s=Vce(0,i,a,r),o=s;if(n===1)for(;o<i&&e[o].end<r+t;)o++;else if(n>1){const l=Array(n).fill(0);for(;o<i&&l.some(d=>d<r+t);){const d=e[o];l[d.lane]=d.end,o++}const c=Array(n).fill(r+t);for(;s>=0&&c.some(d=>d>=r);){const d=e[s];c[d.lane]=d.start,s--}s=Math.max(0,s-s%n),o=Math.min(i,o+(n-1-o%n))}return{startIndex:s,endIndex:o}}const jK=typeof document<"u"?I.useLayoutEffect:I.useEffect;function QHe(e){const t=I.useReducer(()=>({}),{})[1],r={...e,onChange:(i,a)=>{var s;a?Il.flushSync(t):t(),(s=e.onChange)==null||s.call(e,i,a)}},[n]=I.useState(()=>new XHe(r));return n.setOptions(r),jK(()=>n._didMount(),[]),jK(()=>n._willUpdate()),n}function qce(e){return QHe({observeElementRect:VHe,observeElementOffset:qHe,scrollToFn:KHe,...e})}const JHe=()=>{const[e,t]=I.useState(4);return I.useEffect(()=>{const r=()=>{const n=window.innerWidth;n<768?t(1):n<1024?t(2):n<1280?t(3):t(4)};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),e},Gce=({initialData:e,onSave:t,onCancel:r,isSaving:n})=>{var ce;const{vendors:i,addVendor:a}=Gr(),[s,o]=I.useState((e==null?void 0:e.name)||""),[l,c]=I.useState((e==null?void 0:e.manufacturerId)||""),[d,f]=I.useState((e==null?void 0:e.supplierId)||""),[p,m]=I.useState((e==null?void 0:e.productType)||oy[0]),[x,v]=I.useState((e==null?void 0:e.description)||""),[b,w]=I.useState((e==null?void 0:e.productLineUrl)||""),[k,E]=I.useState(((ce=e==null?void 0:e.variants)==null?void 0:ce.some(V=>V.isMaster))||!1),[N,P]=I.useState(null),[R,O]=I.useState(""),[D,L]=I.useState("upload"),[B,z]=I.useState((e==null?void 0:e.defaultImageUrl)||null),[H,te]=I.useState(!1),[Y,W]=I.useState(""),[Z,re]=I.useState(null);I.useEffect(()=>{e!=null&&e.defaultImageUrl&&e.defaultImageUrl.startsWith("http")&&(O(e.defaultImageUrl),L("url"))},[e==null?void 0:e.defaultImageUrl]),I.useEffect(()=>{if(l&&typeof l=="number"){const V=i.find(G=>G.id===l);V&&(V.defaultSupplierId&&f(V.defaultSupplierId),V.defaultProductType&&m(V.defaultProductType))}},[l,i]);const X=V=>i.filter(G=>G.vendorType===V||G.vendorType==="Both").map(G=>({value:G.id,label:G.name})),Q=V=>{var G;(G=V.target.files)!=null&&G[0]&&(P(V.target.files[0]),z(URL.createObjectURL(V.target.files[0])),O(""))},fe=(V,G)=>{W(V),re(G),te(!0)},ye=async V=>{try{const G={...V,vendorType:Z==="manufacturer"?"Manufacturer":"Supplier"};await a(G),te(!1),re(null)}catch(G){console.error(G)}},J=async V=>{if(V.preventDefault(),!s||!l){Re.error("Name and Manufacturer are required.");return}const G=new FormData;G.append("name",s),G.append("manufacturerId",String(l)),d&&G.append("supplierId",String(d)),G.append("productType",p),G.append("description",x),G.append("productLineUrl",b),G.append("hasMasterBoard",String(k)),D==="upload"&&N?G.append("image",N):D==="url"&&R&&G.append("defaultImageUrl",R),await t(G)};return u.jsxs("form",{onSubmit:J,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"w-full aspect-video bg-background border-2 border-dashed border-border rounded-lg flex items-center justify-center relative overflow-hidden group",children:[B?u.jsx("img",{src:B,alt:"Preview",className:"w-full h-full object-cover"}):u.jsx("span",{className:"text-text-secondary text-sm",children:"Default Product Image"}),u.jsx("div",{className:"absolute inset-0 bg-scrim/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:D==="upload"?u.jsxs("label",{className:"cursor-pointer bg-primary-container text-on-primary-container px-4 py-2 rounded-full text-sm font-bold flex items-center gap-2 shadow-md hover:brightness-110 transition-all",children:[u.jsx(ob,{size:16})," Change File",u.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Q})]}):null})]}),u.jsxs("div",{className:"flex gap-6 text-sm text-text-secondary",children:[u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"imgType",checked:D==="upload",onChange:()=>L("upload"),className:"form-radio h-4 w-4 text-primary bg-surface-container-low border-outline/50"}),"Upload File"]}),u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"imgType",checked:D==="url",onChange:()=>L("url"),className:"form-radio h-4 w-4 text-primary bg-surface-container-low border-outline/50"}),"Paste URL"]})]}),D==="url"&&u.jsx("input",{type:"text",placeholder:"https://manufacturer.com/image.jpg",value:R,onChange:V=>{O(V.target.value),z(V.target.value)},className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Product Line Name *"}),u.jsx("input",{type:"text",required:!0,value:s,onChange:V=>o(V.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",placeholder:"e.g. Forever Oak Collection"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Manufacturer"}),u.jsx(xS,{isClearable:!0,options:X("Manufacturer"),value:l?X("Manufacturer").find(V=>V.value===l):null,onChange:V=>c(V?V.value:""),onCreateOption:V=>fe(V,"manufacturer"),className:"react-select-container",classNamePrefix:"react-select",placeholder:"Select or Create Manufacturer..."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Preferred Supplier"}),u.jsx(xS,{isClearable:!0,options:X("Supplier"),value:d?X("Supplier").find(V=>V.value===d):null,onChange:V=>f(V?V.value:""),onCreateOption:V=>fe(V,"supplier"),className:"react-select-container",classNamePrefix:"react-select",placeholder:"Select or Create Supplier..."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Product Type *"}),u.jsx("select",{value:p,onChange:V=>m(V.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",children:oy.map(V=>u.jsx("option",{value:V,children:V},V))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Website URL"}),u.jsx("input",{type:"url",value:b,onChange:V=>w(V.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",placeholder:"https://manufacturer.com/product"})]}),u.jsxs("div",{className:"flex items-center gap-2 pt-4",children:[u.jsx("input",{type:"checkbox",id:"masterBoard",checked:k,onChange:V=>E(V.target.checked),className:"form-checkbox h-4 w-4 text-primary bg-surface-container-low border-outline/50 rounded-sm focus:ring-primary"}),u.jsx("label",{htmlFor:"masterBoard",className:"text-sm font-medium text-text-primary cursor-pointer",children:'Inventory includes a "Master Board" / Strap Set?'})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Description / Notes"}),u.jsx("textarea",{value:x,onChange:V=>v(V.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none h-24"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-outline/10",children:[u.jsx("button",{type:"button",onClick:r,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:n,className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Saving...":u.jsxs(u.Fragment,{children:[u.jsx(vs,{size:18})," Save Product Line"]})})]}),H&&u.jsx(cb,{isOpen:H,onClose:()=>te(!1),initialVendorType:Z==="manufacturer"?"Manufacturer":"Supplier",onSave:ye})]})},ZHe=({productId:e,productType:t,manufacturerId:r,pricingSettings:n,onClose:i,onSuccess:a})=>{const{vendors:s,addVariantsBatch:o}=Gr(),[l,c]=I.useState({unitCost:"",retailPrice:"",cartonSize:"",wearLayer:"",thickness:"",uom:"SF",pricingUnit:"SF",sku:"",style:"",finish:"",hasSample:!1}),[d,f]=I.useState([]),[p,m]=I.useState([]),[x,v]=I.useState([]),[b,w]=I.useState([]);I.useEffect(()=>{N()},[]);const E=t==="Carpet"||t==="Sheet Product"?{color:"Colors / Styles",size:"Roll Widths",showPackaging:!1,showTechSpecs:!1}:t==="LVP"||t==="LVT"||t==="Laminate"||t==="Hardwood"?{color:"Colors",size:"Plank Sizes",showPackaging:!0,showTechSpecs:!0}:{color:"Colors",size:"Sizes",showPackaging:!0,showTechSpecs:!1},N=async()=>{try{const D=await _le();w(D.map(L=>({label:L.value,value:L.value})))}catch(D){console.error(D)}},P=D=>{const L=parseFloat(D);let B=l.retailPrice;if(!isNaN(L)&&n&&L>0){const z=s.find(Y=>Y.id===r),H=gh(z,n,"Customer");B=mh(L,H.percentage,H.method).toFixed(2)}else D===""&&(B="");c({...l,unitCost:D,retailPrice:B})};I.useEffect(()=>{if(d.length===0&&p.length===0){v([]);return}const D=[],L=d.length>0?d:[{label:"",value:""}],B=p.length>0?p:[{label:"",value:""}];L.forEach(z=>{B.forEach(H=>{!z.value&&!H.value||D.push({name:z.value,size:H.value,...l,sku:l.sku,wearLayer:l.wearLayer,thickness:l.thickness,unitCost:parseFloat(l.unitCost)||0,retailPrice:parseFloat(l.retailPrice)||0,cartonSize:parseFloat(l.cartonSize)||0,hasSample:l.hasSample})})}),v(D)},[d,p,l]);const R=async()=>{if(x.length!==0)try{await o(e,x),a([]),i()}catch(D){console.error(D)}},O={control:D=>({...D,backgroundColor:"var(--color-surface)",borderColor:"var(--color-border)",color:"var(--color-text-primary)"}),menu:D=>({...D,backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)",zIndex:9999}),option:(D,L)=>({...D,backgroundColor:L.isFocused?"var(--color-background)":"var(--color-surface)",color:"var(--color-text-primary)",cursor:"pointer"}),multiValue:D=>({...D,backgroundColor:"var(--color-primary)",color:"var(--color-on-primary)"}),multiValueLabel:D=>({...D,color:"var(--color-on-primary)"}),multiValueRemove:D=>({...D,color:"var(--color-on-primary)",":hover":{backgroundColor:"var(--color-primary-hover)",color:"var(--color-on-primary)"}}),input:D=>({...D,color:"var(--color-text-primary)"})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 overflow-y-auto",children:u.jsxs("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-5xl flex flex-col max-h-[90vh]",children:[u.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-border",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-bold text-text-primary flex items-center gap-2",children:[u.jsx(k4,{size:24,className:"text-primary"}),"Variant Generator"]}),u.jsx("p",{className:"text-text-secondary text-sm mt-1",children:"Cross-multiply lists to create variants in bulk."})]}),u.jsx("button",{onClick:i,className:"text-text-secondary hover:text-text-primary transition-colors",children:u.jsx(Zr,{size:24})})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-6 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[u.jsxs("div",{className:"bg-background p-4 rounded-lg border border-border",children:[u.jsx("h3",{className:"font-semibold text-text-primary mb-4 text-sm uppercase tracking-wider",children:"1. Common Pricing & Specs"}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{className:"col-span-2",children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Common SKU (Optional)"}),u.jsx("input",{type:"text",value:l.sku,onChange:D=>c({...l,sku:D.target.value}),className:"w-full p-2 bg-surface border border-border rounded text-text-primary",placeholder:"e.g. Base SKU"})]}),E.showTechSpecs&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Wear Layer"}),u.jsx("input",{type:"text",value:l.wearLayer,onChange:D=>c({...l,wearLayer:D.target.value}),className:"w-full p-2 bg-surface border border-border rounded text-text-primary",placeholder:"20mil"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Thickness"}),u.jsx("input",{type:"text",value:l.thickness,onChange:D=>c({...l,thickness:D.target.value}),className:"w-full p-2 bg-surface border border-border rounded text-text-primary",placeholder:"5mm"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Unit Cost"}),u.jsx("input",{type:"number",step:"0.01",value:l.unitCost,onChange:D=>P(D.target.value),className:"w-full p-2 bg-surface border border-border rounded text-text-primary"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Retail Price"}),u.jsx("input",{type:"number",step:"0.01",value:l.retailPrice,onChange:D=>c({...l,retailPrice:D.target.value}),className:"w-full p-2 bg-surface border border-border rounded text-text-primary"})]}),u.jsxs("div",{className:"col-span-2",children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Pricing Unit"}),u.jsx("select",{value:l.pricingUnit,onChange:D=>c({...l,pricingUnit:D.target.value}),className:"w-full p-2 bg-surface border border-border rounded text-text-primary",children:lh.map(D=>u.jsx("option",{value:D,children:D},D))})]}),E.showPackaging&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"col-span-2 border-t border-border my-1"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Carton Size"}),u.jsx("input",{type:"number",step:"0.01",value:l.cartonSize,onChange:D=>c({...l,cartonSize:D.target.value}),className:"w-full p-2 bg-surface border border-border rounded text-text-primary"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Packaging UOM"}),u.jsx("select",{value:l.uom,onChange:D=>c({...l,uom:D.target.value}),className:"w-full p-2 bg-surface border border-border rounded text-text-primary",children:lh.map(D=>u.jsx("option",{value:D,children:D},D))})]})]}),u.jsx("div",{className:"col-span-2",children:u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:l.hasSample,onChange:D=>c({...l,hasSample:D.target.checked}),className:"rounded border-border bg-surface text-primary focus:ring-primary"}),u.jsx("span",{className:"text-sm text-text-primary",children:"We carry samples for these"})]})})]})]}),u.jsxs("div",{className:"bg-background p-4 rounded-lg border border-border",children:[u.jsx("h3",{className:"font-semibold text-text-primary mb-4 text-sm uppercase tracking-wider",children:"2. Define Lists"}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:E.color}),u.jsx("p",{className:"text-xs text-text-secondary mb-2",children:"Type a name and press Enter"}),u.jsx(xS,{isMulti:!0,placeholder:`e.g. ${E.color.includes("Style")?"Berber, Plush...":"Oak, Maple..."}`,styles:O,onChange:D=>f(D),value:d})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:E.size}),u.jsx("p",{className:"text-xs text-text-secondary mb-2",children:"Select existing or type new"}),u.jsx(xS,{isMulti:!0,placeholder:`e.g. ${E.size.includes("Width")?"12', 15'...":"12x24, Mosaic..."}`,options:b,styles:O,onChange:D=>m(D),value:p})]})]})]}),u.jsxs("div",{className:"lg:col-span-2 flex flex-col h-full",children:[u.jsxs("h3",{className:"font-semibold text-text-primary mb-4 text-sm uppercase tracking-wider flex justify-between items-center",children:[u.jsxs("span",{children:["3. Preview (",x.length," items)"]}),x.length>0&&u.jsx("span",{className:"text-xs text-primary font-normal",children:"Ready to generate"})]}),u.jsx("div",{className:"flex-1 bg-background border border-border rounded-lg overflow-hidden flex flex-col",children:x.length===0?u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-text-secondary p-8 text-center opacity-50",children:[u.jsx(K0,{size:48,className:"mb-4"}),u.jsx("p",{className:"text-lg",children:"Enter Data & Lists to see preview"})]}):u.jsx("div",{className:"overflow-auto flex-1",children:u.jsxs("table",{className:"w-full text-left border-collapse",children:[u.jsx("thead",{className:"bg-surface sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-3 text-xs font-medium text-text-secondary border-b border-border",children:E.color}),u.jsx("th",{className:"p-3 text-xs font-medium text-text-secondary border-b border-border",children:"SKU"}),u.jsx("th",{className:"p-3 text-xs font-medium text-text-secondary border-b border-border",children:E.size}),u.jsx("th",{className:"p-3 text-xs font-medium text-text-secondary border-b border-border text-right",children:"Cost"}),u.jsx("th",{className:"p-3 text-xs font-medium text-text-secondary border-b border-border text-right",children:"Retail"}),E.showPackaging&&u.jsx("th",{className:"p-3 text-xs font-medium text-text-secondary border-b border-border",children:"Carton"})]})}),u.jsx("tbody",{children:x.map((D,L)=>u.jsxs("tr",{className:"border-b border-border hover:bg-surface/50",children:[u.jsx("td",{className:"p-3 text-sm text-text-primary font-medium",children:D.name||u.jsx("span",{className:"italic text-text-secondary",children:"--"})}),u.jsx("td",{className:"p-3 text-sm text-text-secondary",children:D.sku||u.jsx("span",{className:"italic text-text-secondary",children:"--"})}),u.jsx("td",{className:"p-3 text-sm text-text-primary",children:D.size||u.jsx("span",{className:"italic text-text-secondary",children:"--"})}),u.jsxs("td",{className:"p-3 text-sm text-text-primary text-right",children:["$",D.unitCost.toFixed(2)," / ",D.pricingUnit]}),u.jsxs("td",{className:"p-3 text-sm text-text-primary text-right",children:["$",D.retailPrice.toFixed(2)," / ",D.pricingUnit]}),E.showPackaging&&u.jsxs("td",{className:"p-3 text-sm text-text-primary",children:[D.cartonSize," ",D.uom]})]},L))})]})})})]})]}),u.jsxs("div",{className:"p-6 border-t border-border flex justify-end gap-3 bg-surface",children:[u.jsx("button",{onClick:i,className:"px-4 py-2 text-text-primary hover:bg-background rounded-md transition-colors",children:"Cancel"}),u.jsxs("button",{onClick:R,disabled:x.length===0,className:"px-6 py-2 bg-primary text-on-primary font-medium rounded-md hover:bg-primary-hover disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[u.jsx(Zl,{size:18}),"Generate ",x.length," Variants"]})]})]})})},eWe=({onClose:e,onSave:t,currentPreview:r})=>{const[n,i]=I.useState(null),[a,s]=I.useState(""),[o,l]=I.useState(r||null),c=I.useRef(null),d=m=>{var v;const x=(v=m.target.files)==null?void 0:v[0];x&&(i(x),l(URL.createObjectURL(x)),s(""))},f=m=>{s(m),l(m),i(null)},p=()=>{if(!n&&!a){Re.error("Please select a file or enter a URL");return}t(n,a),e()};return u.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 p-4",children:u.jsxs("div",{className:"bg-surface w-full max-w-md rounded-lg shadow-xl overflow-hidden border border-border animate-in fade-in zoom-in-95 duration-200",children:[u.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border bg-background",children:[u.jsx("h3",{className:"font-bold text-text-primary",children:"Update Variant Image"}),u.jsx("button",{onClick:e,className:"text-text-secondary hover:text-text-primary",children:u.jsx(Zr,{size:20})})]}),u.jsxs("div",{className:"p-6",children:[u.jsx("div",{className:"mb-6 flex justify-center",children:u.jsx("div",{className:"w-32 h-32 bg-background border border-border rounded-lg overflow-hidden flex items-center justify-center shadow-inner",children:o?u.jsx("img",{src:o,alt:"Preview",className:"w-full h-full object-cover"}):u.jsx(Jd,{className:"text-border",size:48})})}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("input",{type:"file",ref:c,accept:"image/*",onChange:d,className:"hidden"}),u.jsxs("button",{onClick:()=>{var m;return(m=c.current)==null?void 0:m.click()},className:"w-full py-4 border border-dashed border-border hover:border-primary rounded-lg flex items-center justify-center gap-3 text-text-secondary hover:text-primary hover:bg-surface transition-colors",children:[u.jsx(ob,{size:20}),u.jsxs("div",{className:"text-left",children:[u.jsx("p",{className:"text-sm font-medium",children:n?"Change Selected File":"Click to Upload File"}),n&&u.jsx("p",{className:"text-xs text-primary",children:n.name})]})]}),u.jsxs("div",{className:"relative flex items-center py-2",children:[u.jsx("div",{className:"flex-grow border-t border-border"}),u.jsx("span",{className:"flex-shrink-0 mx-4 text-xs text-text-tertiary uppercase",children:"OR Paste URL"}),u.jsx("div",{className:"flex-grow border-t border-border"})]}),u.jsx("input",{type:"text",placeholder:"https://example.com/image.jpg",value:a,onChange:m=>f(m.target.value),className:"w-full p-2 bg-background border border-border rounded focus:border-primary focus:outline-none text-text-primary text-sm"})]})]}),u.jsxs("div",{className:"p-4 border-t border-border bg-background flex justify-end gap-3",children:[u.jsx("button",{onClick:e,className:"px-4 py-2 text-text-secondary hover:text-text-primary text-sm",children:"Cancel"}),u.jsxs("button",{onClick:p,disabled:!n&&!a,className:"px-6 py-2 bg-primary text-on-primary rounded text-sm font-medium hover:bg-primary-hover disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[u.jsx(ad,{size:16})," Apply Image"]})]})]})})},S9=({isOpen:e,onClose:t,product:r})=>{const{products:n,vendors:i,updateProduct:a,deleteProduct:s,addVariant:o,updateVariant:l}=Gr(),{batchUpdateVariants:c,duplicateProduct:d}=y7(),f=n.find(Te=>Te.id===r.id)||r,[p,m]=I.useState(!1),[x,v]=I.useState(!1),[b,w]=I.useState(!1),[k,E]=I.useState(null),[N,P]=I.useState({}),[R,O]=I.useState(!1),[D,L]=I.useState(new Set),[B,z]=I.useState(new Set(["unitCost","retailPrice"])),[H,te]=I.useState(!1),[Y,W]=I.useState([]),[Z,re]=I.useState(!1),[X,Q]=I.useState({file:null,url:null,preview:null}),[fe,ye]=I.useState(null),J=I.useRef(null),[ce,V]=I.useState(null),[G,ie]=I.useState(null),Ee=Da(),{mutate:ne}=Tr({mutationFn:Dse,onSuccess:()=>{Re.success("Variant deleted."),Ee.invalidateQueries({queryKey:["products"]}),Ee.invalidateQueries({queryKey:["discontinuedProducts"]})},onError:Te=>{Re.error(Te.message||"Failed to delete variant.")}}),ae=Ole.useReactToPrint({contentRef:J,documentTitle:`Label_${f.name}`,onAfterPrint:()=>V(null)});I.useEffect(()=>{e&&Dx().then(ye).catch(console.error)},[e]),I.useEffect(()=>{if(ce&&J.current){const Te=setTimeout(()=>{ae()},500);return()=>clearTimeout(Te)}},[ce,ae]);const ve=(()=>{const Te=f.productType;return Te==="Carpet"||Te==="Sheet Product"?{color:"Color / Style",size:"Width",showPackaging:!1,showTechSpecs:!1}:Te==="LVP"||Te==="LVT"||Te==="Laminate"||Te==="Hardwood"?{color:"Color",size:"Plank Size",showPackaging:!0,showTechSpecs:!0}:{color:"Color",size:"Size",showPackaging:!0,showTechSpecs:!1}})();if(!e)return null;const q=Te=>Ia(Te),Ne=async Te=>{v(!0);try{await a(f.id,Te),m(!1)}catch(He){console.error(He)}finally{v(!1)}},Pe=async()=>{if(confirm(`Delete "${f.name}" and ALL its variants?`))try{await s(f.id),t()}catch(Te){console.error(Te)}},ze=async()=>{const Te=!f.isDiscontinued,He=Te?"Discontinue":"Restore";if(confirm(`Are you sure you want to ${He} this product line?`))try{const je=new FormData;je.append("isDiscontinued",String(Te)),await a(f.id,je),Re.success(`Product ${Te?"discontinued":"restored"}.`),Te&&t()}catch(je){console.error(je),Re.error(`Failed to ${He.toLowerCase()} product.`)}},De=async()=>{if(confirm(`Create a copy of "${f.name}"?`))try{await d.mutateAsync(f.id),Re.success("Product line duplicated."),t()}catch(Te){console.error(Te),Re.error("Failed to duplicate product.")}},$e=Te=>{L(He=>{const je=new Set(He);return je.has(Te)?je.delete(Te):je.add(Te),je})},et=()=>{const Te=f.variants.filter(je=>je.id!==k).map(je=>je.id),He=Te.every(je=>D.has(je));L(He?new Set:new Set(Te))},ut=Te=>{z(He=>{const je=new Set(He);return je.has(Te)?je.delete(Te):je.add(Te),je})},kt=(Te,He)=>{let je=[];if(Te==="product")je=[f];else if(Te==="variant"&&He){const Ce=f.variants.find(ot=>ot.id===He);Ce&&(je=[{...f,variants:[Ce]}])}else Te==="batch"&&(je=[{...f,variants:f.variants.filter(Ce=>D.has(Ce.id))}]);je.length>0&&(W(je),te(!0))},ht=async Te=>{if(Te)try{const He=new FormData;He.append("defaultImageUrl",Te),await a(f.id,He),Re.success("Main product image updated!")}catch(He){console.error(He),Re.error("Failed to update main image.")}},Rr=()=>{const Te="NEW_"+Date.now();E(Te),O(!1),L(new Set),P({name:"",size:"",sku:"",unitCost:0,retailPrice:0,wearLayer:"",thickness:"",hasSample:!1,cartonSize:0,uom:"SF",pricingUnit:"SF"}),Q({file:null,url:null,preview:null})},er=Te=>{P({name:Te.name,size:Te.size,sku:Te.sku,unitCost:Te.unitCost,retailPrice:Te.retailPrice,wearLayer:Te.wearLayer,thickness:Te.thickness,hasSample:Te.hasSample,cartonSize:Te.cartonSize,uom:Te.uom,pricingUnit:Te.pricingUnit}),E(Te.id);const He=q(Te.imageUrl);Q({file:null,url:null,preview:He||null}),O(!1),L(new Set)},ct=()=>{E(null),P({}),Q({file:null,url:null,preview:null}),L(new Set)},qt=Te=>{confirm("Delete this variant?")&&ne(Te)},Lt=Te=>{const He=parseFloat(Te);let je=N.retailPrice||0;if(!isNaN(He)&&fe){const Ce=i.find(xt=>xt.id===f.manufacturerId),ot=gh(Ce,fe,"Customer");je=Number(mh(He,ot.percentage,ot.method).toFixed(2))}else Te===""&&(je=N.retailPrice);P(Ce=>({...Ce,unitCost:He,retailPrice:je}))},dr=(Te,He)=>{let je=null;Te?je=URL.createObjectURL(Te):He&&(je=He),Q({file:Te,url:He,preview:je})},Gt=async()=>{if(!N.name)return Re.error("Name is required.");const Te=new FormData;Te.append("name",N.name),N.size&&Te.append("size",N.size),N.sku&&Te.append("sku",N.sku),N.wearLayer&&Te.append("wearLayer",N.wearLayer),N.thickness&&Te.append("thickness",N.thickness),N.unitCost!==void 0&&Te.append("unitCost",String(N.unitCost)),N.retailPrice!==void 0&&Te.append("retailPrice",String(N.retailPrice)),N.hasSample!==void 0&&Te.append("hasSample",String(N.hasSample)),N.cartonSize!==void 0&&Te.append("cartonSize",String(N.cartonSize)),N.uom&&Te.append("uom",N.uom),N.pricingUnit&&Te.append("pricingUnit",N.pricingUnit),X.file?Te.append("image",X.file):X.url&&Te.append("imageUrl",X.url);try{if(k&&!k.startsWith("NEW_"))if(await l(k,Te),R&&D.size>0){const He={},je=Ce=>Ce===void 0?null:Ce;B.has("size")&&(He.size=je(N.size)),B.has("sku")&&(He.sku=je(N.sku)),B.has("wearLayer")&&(He.wearLayer=je(N.wearLayer)),B.has("thickness")&&(He.thickness=je(N.thickness)),B.has("unitCost")&&(He.unitCost=je(N.unitCost)),B.has("retailPrice")&&(He.retailPrice=je(N.retailPrice)),B.has("cartonSize")&&(He.cartonSize=je(N.cartonSize)),B.has("uom")&&(He.uom=je(N.uom)),B.has("pricingUnit")&&(He.pricingUnit=je(N.pricingUnit)),Object.keys(He).length>0&&(await c.mutateAsync({ids:Array.from(D),updates:He}),Re.success(`Updated source + ${D.size} other variants!`))}else Re.success("Variant updated.");else await o(f.id,Te),Re.success("Variant created.");ct(),L(new Set)}catch(He){console.error(He),Re.error(He.message||"Failed to save.")}},qe=Te=>{Re.success(`${Te.length} variants created!`),w(!1)},Xe=(Te,He,je)=>{if(!k||!R)return u.jsx("th",{className:`p-3 ${je||""}`,children:Te});const Ce=B.has(He);return u.jsx("th",{className:`p-3 ${je||""}`,children:u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("span",{children:Te}),u.jsxs("label",{className:"flex items-center gap-1 text-[10px] font-normal cursor-pointer bg-black/5 px-1 rounded hover:bg-black/10 w-fit",children:[u.jsx("input",{type:"checkbox",className:"w-3 h-3 accent-primary",checked:Ce,onChange:()=>ut(He)})," Copy"]})]})})};return u.jsxs("div",{className:"fixed inset-0 z-[60] bg-background flex flex-col lg:static lg:z-0 lg:bg-surface-container-high lg:rounded-2xl lg:border lg:border-outline/20 lg:h-[calc(100vh-140px)]",children:[u.jsx("div",{style:{position:"absolute",top:-1e4,left:-1e4},children:u.jsx("div",{ref:J,className:"p-4 w-[3.5in] h-[2in]",children:ce&&u.jsx(Tle,{data:ce.data,qrUrl:ce.qrUrl})})}),u.jsxs("div",{className:"w-full h-full flex flex-col overflow-hidden",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex items-center",children:[u.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-surface-container-highest text-text-secondary hover:text-text-primary mr-2",children:u.jsx(id,{size:24})}),u.jsxs("h2",{className:"text-xl font-bold text-text-primary flex items-center gap-2 flex-grow",children:[p?"Edit Product Line":f.name,!p&&f.isDiscontinued&&u.jsx("span",{className:"text-xs font-bold bg-error-container text-on-error-container px-2 py-0.5 rounded-full",children:"DISCONTINUED"})]}),u.jsx("div",{className:"flex items-center gap-2",children:p?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:ze,className:`p-2 rounded border transition-colors ${f.isDiscontinued?"bg-tertiary-container text-on-tertiary-container border-tertiary-container/50":"bg-surface-container-highest hover:bg-error-container/50 text-text-secondary hover:text-error border-outline/20"}`,title:f.isDiscontinued?"Restore to Active Library":"Archive / Discontinue",children:f.isDiscontinued?u.jsx(Lx,{size:20}):u.jsx(cS,{size:20})}),u.jsx("button",{onClick:De,className:"p-2 hover:bg-surface-container-highest rounded-full text-text-secondary hover:text-primary",title:"Duplicate Product Line",children:u.jsx(m8e,{size:20})}),u.jsx("button",{onClick:Pe,className:"p-2 hover:bg-surface-container-highest rounded-full text-text-secondary hover:text-error",title:"Permanently Delete",children:u.jsx(mo,{size:24})})]}):u.jsx("button",{onClick:()=>m(!0),className:"p-2 hover:bg-surface-container-highest rounded-full text-text-secondary hover:text-primary",children:u.jsx(Zg,{size:24})})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:p?u.jsx(Gce,{initialData:f,onSave:Ne,onCancel:()=>m(!1),isSaving:x}):u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[u.jsx("div",{className:"w-48 h-48 bg-surface-container rounded-lg flex-shrink-0 overflow-hidden border border-outline/20",children:f.defaultImageUrl?u.jsx("div",{className:"w-full h-full cursor-zoom-in group relative",onClick:()=>ie({url:q(f.defaultImageUrl),alt:f.name}),children:u.jsx("img",{src:q(f.defaultImageUrl),className:"w-full h-full object-cover transition-transform group-hover:scale-105"})}):u.jsx("div",{className:"w-full h-full flex items-center justify-center text-text-tertiary",children:u.jsx(Jd,{size:48,className:"opacity-50"})})}),u.jsxs("div",{className:"flex-1 space-y-2",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("span",{className:"block text-text-secondary text-xs uppercase tracking-wide",children:"Manufacturer"}),u.jsx("span",{className:"font-medium text-text-primary",children:f.manufacturerName})]}),u.jsx("div",{className:"flex gap-2",children:u.jsx("button",{onClick:()=>kt("product"),className:"p-2 bg-surface-container-highest hover:bg-surface-variant/30 border border-outline/20 rounded-full text-text-secondary",title:"Print Line Label",children:u.jsx(ZA,{size:16})})})]}),u.jsx("p",{className:"text-text-primary mt-1 text-sm",children:f.description||"No description provided."})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-end mb-4",children:[u.jsx("h3",{className:"text-lg font-bold text-text-primary",children:"Product Variants"}),!k&&u.jsxs("div",{className:"flex gap-2",children:[D.size>0&&u.jsxs("button",{onClick:()=>kt("batch"),className:"text-sm flex items-center gap-2 bg-primary text-on-primary px-3 py-1.5 rounded-full font-bold animate-in fade-in",children:[u.jsx(ay,{size:16})," Print Labels (",D.size,")"]}),u.jsx("div",{className:"w-px h-6 bg-outline/20 mx-2"}),u.jsxs("button",{onClick:()=>w(!0),className:"text-sm flex items-center gap-2 bg-surface-container-highest border border-primary-container text-primary px-3 py-1.5 rounded-full",children:[u.jsx(k4,{size:16})," Batch Generator"]}),u.jsxs("button",{onClick:Rr,className:"text-sm flex items-center gap-2 bg-secondary-container text-on-secondary-container px-3 py-1.5 rounded-full",children:[u.jsx(Zl,{size:16})," Add Variant"]})]})]}),u.jsx("div",{className:"bg-surface-container rounded-lg border border-outline/10 overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm text-left whitespace-nowrap",children:[u.jsx("thead",{className:"bg-surface-container-highest text-text-secondary border-b border-outline/10",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-3 w-12 text-center",children:"Img"}),u.jsx("th",{className:"p-3",children:ve.color}),Xe(ve.size,"size"),ve.showTechSpecs&&Xe("Wear Layer","wearLayer"),ve.showTechSpecs&&Xe("Thickness","thickness"),Xe("SKU","sku"),ve.showPackaging&&Xe("Carton Qty","cartonSize"),ve.showPackaging&&Xe("Unit","uom"),Xe("Cost","unitCost","text-right"),Xe("Pricing Unit","pricingUnit","text-center w-24"),Xe("Retail","retailPrice","text-right"),u.jsx("th",{className:"p-3 text-center",children:"Sample?"}),u.jsx("th",{className:"p-3 text-center",children:"Status"}),u.jsx("th",{className:"p-3 w-24 text-center",children:R?u.jsxs("div",{className:"flex justify-center items-center gap-1",children:[u.jsx("button",{onClick:et,className:"p-1 rounded-md text-primary hover:bg-primary-container/30",title:"Select All",children:u.jsx(A7,{size:18})}),u.jsx("button",{onClick:()=>{O(!1),L(new Set)},className:"p-1 rounded-md text-text-secondary hover:text-error hover:bg-error-container/30",title:"Cancel Selection",children:u.jsx(Zr,{size:18})})]}):u.jsx("button",{onClick:()=>O(!0),className:"p-1 rounded-md text-text-secondary hover:text-primary transition-colors",title:"Select Multiple",children:u.jsx(A8e,{size:18})})}),u.jsx("th",{className:"p-3 w-20 text-center",children:"Actions"})]})}),u.jsxs("tbody",{className:"divide-y divide-outline/10",children:[f.variants.map(Te=>k===Te.id?u.jsxs("tr",{className:"bg-primary/5 border-l-4 border-primary",children:[u.jsx("td",{className:"p-2 text-center",children:u.jsx("button",{type:"button",onClick:()=>re(!0),className:"w-8 h-8 rounded border bg-white flex items-center justify-center",children:u.jsx(Jd,{size:14})})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",placeholder:ve.color,className:"w-full p-1 border border-primary rounded-md font-bold bg-surface-container",value:N.name||"",onChange:He=>P({...N,name:He.target.value})})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",placeholder:ve.size,className:"w-full p-1 border border-primary rounded-md bg-surface-container",value:N.size||"",onChange:He=>P({...N,size:He.target.value})})}),ve.showTechSpecs&&u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",className:"w-full p-1 border border-primary rounded-md bg-surface-container",value:N.wearLayer||"",onChange:He=>P({...N,wearLayer:He.target.value}),placeholder:"20mil"})}),ve.showTechSpecs&&u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",className:"w-full p-1 border border-primary rounded-md bg-surface-container",value:N.thickness||"",onChange:He=>P({...N,thickness:He.target.value}),placeholder:"5mm"})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",className:"w-full p-1 border border-primary rounded-md bg-surface-container",value:N.sku||"",onChange:He=>P({...N,sku:He.target.value})})}),ve.showPackaging&&u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"number",className:"w-20 p-1 border border-primary rounded-md bg-surface-container",value:N.cartonSize||"",onChange:He=>P({...N,cartonSize:parseFloat(He.target.value)}),placeholder:"Qty"})}),ve.showPackaging&&u.jsx("td",{className:"p-2",children:u.jsx("select",{className:"p-1 border border-primary rounded-md text-xs bg-surface-container w-full",value:N.uom||"SF",onChange:He=>P({...N,uom:He.target.value}),children:lh.map(He=>u.jsx("option",{value:He,children:He},He))})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"number",className:"w-full p-1 border border-primary rounded-md text-right bg-surface-container",value:N.unitCost||"",onChange:He=>Lt(He.target.value)})}),u.jsx("td",{className:"p-2",children:u.jsx("select",{className:"w-full p-1 border border-primary rounded-md text-xs bg-surface-container",value:N.pricingUnit||"SF",onChange:He=>P({...N,pricingUnit:He.target.value}),children:lh.map(He=>u.jsx("option",{value:He,children:He},He))})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"number",className:"w-full p-1 border border-primary rounded-md text-right bg-surface-container",value:N.retailPrice||"",onChange:He=>P({...N,retailPrice:Number(He.target.value)})})}),u.jsx("td",{className:"p-2 text-center",children:u.jsx("input",{type:"checkbox",className:"form-checkbox h-4 w-4 text-primary bg-surface-container-low border-outline/50 rounded",checked:N.hasSample??Te.hasSample,onChange:He=>P({...N,hasSample:He.target.checked})})}),u.jsx("td",{className:"p-2 text-center text-xs font-bold text-primary",children:"EDITING"}),u.jsx("td",{className:"p-2 text-center",children:u.jsx("button",{type:"button",onClick:()=>{O(!R)},className:`p-1.5 rounded-md ${R?"bg-secondary-container text-on-secondary-container":"text-text-tertiary"}`,title:"Copy to selected",children:u.jsx(k7,{size:16})})}),u.jsxs("td",{className:"p-2 flex justify-center items-center gap-2",children:[u.jsx("button",{type:"button",onClick:Gt,className:"p-1.5 rounded-md bg-tertiary text-on-tertiary",children:u.jsx(vs,{size:16})}),u.jsx("button",{type:"button",onClick:ct,className:"p-1.5 rounded-md text-error",children:u.jsx(Zr,{size:16})})]})]},Te.id):u.jsxs("tr",{className:`hover:bg-surface-container-highest transition-colors ${D.has(Te.id)?"bg-primary-container/30":""}`,children:[u.jsx("td",{className:"p-2 text-center",children:u.jsx("div",{className:`w-10 h-10 bg-surface-variant rounded overflow-hidden mx-auto border border-outline/10 ${Te.imageUrl?"cursor-zoom-in hover:ring-2 hover:ring-primary/50":""}`,onClick:He=>{Te.imageUrl&&(He.stopPropagation(),ie({url:q(Te.imageUrl),alt:Te.name}))},children:Te.imageUrl?u.jsx("img",{src:q(Te.imageUrl),className:"w-full h-full object-cover"}):null})}),u.jsx("td",{className:"p-3 font-medium text-text-primary",children:Te.name}),u.jsx("td",{className:"p-3 text-text-secondary",children:Te.size||"-"}),ve.showTechSpecs&&u.jsx("td",{className:"p-3 text-text-secondary",children:Te.wearLayer||"-"}),ve.showTechSpecs&&u.jsx("td",{className:"p-3 text-text-secondary",children:Te.thickness||"-"}),u.jsx("td",{className:"p-3 text-text-secondary",children:Te.sku||"-"}),ve.showPackaging&&u.jsx("td",{className:"p-3 text-text-secondary text-xs font-mono",children:Te.cartonSize||"-"}),ve.showPackaging&&u.jsx("td",{className:"p-3 text-text-secondary text-xs font-mono",children:Te.uom||"-"}),u.jsx("td",{className:"p-3 text-right text-text-secondary",children:Te.unitCost?`$${Number(Te.unitCost).toFixed(2)}`:"-"}),u.jsxs("td",{className:"p-3 text-center text-text-secondary text-xs font-mono bg-black/5 rounded mx-1",children:["/",Te.pricingUnit||Te.uom||"Unit"]}),u.jsx("td",{className:"p-3 text-right text-text-secondary font-medium",children:Te.retailPrice?`$${Number(Te.retailPrice).toFixed(2)}`:"-"}),u.jsx("td",{className:"p-3 text-center",children:u.jsx("div",{className:`w-3 h-3 rounded-full mx-auto ${Te.hasSample?"bg-green-500":"bg-gray-300"}`})}),u.jsx("td",{className:"p-3 text-center text-xs text-text-tertiary",children:Te.hasSample?"Available":"Order Only"}),u.jsx("td",{className:"p-3 text-center",children:R?u.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-primary cursor-pointer",checked:D.has(Te.id),onChange:()=>$e(Te.id)}):u.jsx("button",{type:"button",onClick:()=>kt("variant",Te.id),className:"text-text-secondary hover:text-primary",children:u.jsx(ZA,{size:18})})}),u.jsxs("td",{className:"p-3 flex justify-center gap-2 opacity-50 hover:opacity-100 transition-opacity",children:[Te.imageUrl&&u.jsx("button",{type:"button",onClick:()=>ht(Te.imageUrl),className:"text-text-secondary hover:text-yellow-500",title:"Set as Main Image",children:u.jsx(goe,{size:16})}),u.jsx("button",{type:"button",onClick:()=>er(Te),className:"text-text-secondary hover:text-primary",children:u.jsx(Zg,{size:16})}),u.jsx("button",{type:"button",onClick:()=>qt(Te.id),className:"text-text-secondary hover:text-red-500",children:u.jsx(mo,{size:16})})]})]},Te.id)),(k==null?void 0:k.startsWith("NEW_"))&&u.jsxs("tr",{className:"bg-primary/5 animate-in fade-in",children:[u.jsx("td",{className:"p-2",children:u.jsx("button",{type:"button",onClick:()=>re(!0),className:"w-10 h-10 border rounded-md flex items-center justify-center bg-white",children:u.jsx(Jd,{size:14})})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{autoFocus:!0,type:"text",className:"w-full p-1 border rounded-md bg-surface-container",placeholder:ve.color,value:N.name||"",onChange:Te=>P({...N,name:Te.target.value})})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",className:"w-full p-1 border rounded-md bg-surface-container",placeholder:ve.size,value:N.size||"",onChange:Te=>P({...N,size:Te.target.value})})}),ve.showTechSpecs&&u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",className:"w-full p-1 border rounded-md bg-surface-container",value:N.wearLayer||"",onChange:Te=>P({...N,wearLayer:Te.target.value}),placeholder:"Wear Layer"})}),ve.showTechSpecs&&u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",className:"w-full p-1 border rounded-md bg-surface-container",value:N.thickness||"",onChange:Te=>P({...N,thickness:Te.target.value}),placeholder:"Thickness"})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",className:"w-full p-1 border rounded-md bg-surface-container",value:N.sku||"",onChange:Te=>P({...N,sku:Te.target.value})})}),ve.showPackaging&&u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"number",className:"w-20 p-1 border rounded-md bg-surface-container",value:N.cartonSize||"",onChange:Te=>P({...N,cartonSize:parseFloat(Te.target.value)}),placeholder:"Qty"})}),ve.showPackaging&&u.jsx("td",{className:"p-2",children:u.jsx("select",{className:"w-full p-1 border rounded-md text-xs bg-surface-container",value:N.uom||"SF",onChange:Te=>P({...N,uom:Te.target.value}),children:lh.map(Te=>u.jsx("option",{value:Te,children:Te},Te))})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"number",className:"w-full p-1 border rounded-md text-right bg-surface-container",value:N.unitCost||"",onChange:Te=>Lt(Te.target.value)})}),u.jsx("td",{className:"p-2",children:u.jsx("select",{className:"w-full p-1 border border-primary rounded-md text-xs bg-surface-container",value:N.pricingUnit||"SF",onChange:Te=>P({...N,pricingUnit:Te.target.value}),children:lh.map(Te=>u.jsx("option",{value:Te,children:Te},Te))})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"number",className:"w-full p-1 border border-primary rounded-md text-right bg-surface-container",value:N.retailPrice||"",onChange:Te=>P({...N,retailPrice:Number(Te.target.value)})})}),u.jsx("td",{className:"p-2 text-center",children:u.jsx("input",{type:"checkbox",className:"form-checkbox h-4 w-4 text-primary bg-surface-container-low border-outline/50 rounded",checked:N.hasSample??!0,onChange:Te=>P({...N,hasSample:Te.target.checked})})}),u.jsx("td",{className:"p-2 text-center text-xs font-bold text-green-600",children:"NEW"}),u.jsxs("td",{colSpan:2,className:"p-2 flex justify-center gap-1",children:[u.jsx("button",{type:"button",onClick:Gt,className:"p-1 text-tertiary",children:u.jsx(vs,{size:18})}),u.jsx("button",{type:"button",onClick:ct,className:"p-1 text-error",children:u.jsx(Zr,{size:18})})]})]})]})]})})]})]})}),G&&u.jsx(Bce,{imageUrl:G.url,altText:G.alt,onClose:()=>ie(null)}),b&&u.jsx(ZHe,{productId:f.id,productType:f.productType,manufacturerId:f.manufacturerId,pricingSettings:fe,onClose:()=>w(!1),onSuccess:qe}),Z&&u.jsx(eWe,{currentPreview:X.preview,onClose:()=>re(!1),onSave:dr}),u.jsx(Ple,{isOpen:H,onClose:()=>te(!1),selectedProducts:Y})]})]})},Kce=({product:e,pricingSettings:t,onClick:r,showDiscontinuedStyle:n,isSelected:i,isSelectionMode:a})=>{const{vendors:s}=Gr(),l=(()=>{if(!e.variants||e.variants.length===0||!t)return null;const c=e.supplierId||e.manufacturerId,d=s.find(E=>E.id===c),f=gh(d,t,"Customer"),p=e.variants.filter(E=>E.unitCost),m=p.map(E=>mh(Number(E.unitCost),f.percentage,f.method));if(m.length===0)return null;const x=Math.min(...m),v=Math.max(...m),b=x===v?`$${x.toFixed(2)}`:`$${x.toFixed(2)} - $${v.toFixed(2)}`,w=p.find(E=>E.pricingUnit)||p[0],k=(w==null?void 0:w.pricingUnit)||(w==null?void 0:w.uom)||"Unit";return{priceStr:b,unitLabel:k}})();return u.jsxs("div",{className:`bg-surface-container-high rounded-xl shadow-sm border overflow-hidden group flex flex-col cursor-pointer hover:shadow-md hover:-translate-y-1 transition-all h-full relative
                ${i?"border-primary ring-2 ring-primary/80":"border-outline/10"}
            `,onClick:()=>r(e),children:[(a||i)&&u.jsx("div",{className:"absolute top-2.5 left-2.5 z-10 text-primary",children:i?u.jsx(jh,{size:24,className:"fill-surface-container-high"}):u.jsx(h8e,{size:24,className:"text-white/80 drop-shadow-md"})}),u.jsxs("div",{className:"w-full h-48 bg-surface-container flex items-center justify-center relative",children:[e.defaultThumbnailUrl||e.defaultImageUrl?u.jsx("img",{src:Ia(e.defaultThumbnailUrl||e.defaultImageUrl),alt:e.name,className:"w-full h-full object-cover",loading:"lazy"}):u.jsxs("div",{className:"text-center p-4",children:[u.jsx("span",{className:"text-4xl opacity-20 font-bold text-text-tertiary block mb-2",children:e.name.substring(0,2).toUpperCase()}),u.jsx("span",{className:"text-xs text-text-secondary",children:"No Image"})]}),u.jsxs("div",{className:"absolute top-2 right-2 bg-scrim/60 text-white text-xs px-2 py-1 rounded-full backdrop-blur-sm",children:[e.variants.length," Variants"]})]}),u.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[u.jsx("h3",{className:"font-bold text-lg text-text-primary truncate",title:e.name,children:e.name}),u.jsx("p",{className:"text-sm text-text-secondary truncate",children:e.manufacturerName||"Unknown Vendor"}),u.jsx("div",{className:"mt-2",children:l?u.jsxs("p",{className:"text-sm font-semibold text-tertiary",children:[l.priceStr," ",u.jsxs("span",{className:"text-text-secondary font-normal text-xs",children:["/ ",l.unitLabel]})]}):u.jsx("p",{className:"text-xs text-text-tertiary italic",children:"No pricing set"})}),u.jsx("div",{className:"flex-grow"}),n&&u.jsx("div",{className:"mb-2 text-center bg-error-container text-on-error-container text-xs font-bold py-1 rounded-full uppercase tracking-wider",children:"Discontinued"}),u.jsxs("div",{className:"flex justify-between items-center mt-4 pt-3 border-t border-outline/10",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs font-semibold bg-surface-container-highest text-text-secondary px-2 py-1 rounded-full",children:e.productType}),e.productLineUrl&&u.jsx("a",{href:e.productLineUrl,target:"_blank",rel:"noreferrer",className:"text-text-tertiary hover:text-primary p-1 rounded-full hover:bg-surface-container-highest transition-colors",title:"Open Product Website",onClick:c=>c.stopPropagation(),children:u.jsx(g8e,{size:14})})]}),u.jsx(sd,{size:18,className:"text-text-secondary"})]})]})]})},tWe=()=>{const{data:e=[],isLoading:t}=ab(),{data:r=[]}=KE(),n=y7(),[i,a]=rie(),s=i.get("search")||"",[o,l]=I.useState(s),[c,d]=I.useState(!1),[f,p]=I.useState(null);I.useEffect(()=>{const X=i.get("search")||"";X!==o&&l(X)},[i]);const m=X=>{const Q=X.target.value;l(Q);const fe=new URLSearchParams(i);Q?fe.set("search",Q):fe.delete("search"),a(fe,{replace:!0})},[x,v]=I.useState("active");I.useEffect(()=>{(async()=>{try{p(await Dx())}catch{console.error("Failed to load pricing settings for library view.")}})()},[]);const[b,w]=I.useState(!1),[k,E]=I.useState(!1),[N,P]=I.useState(null);I.useEffect(()=>{const X=i.get("open");if(X&&e.length>0){const Q=e.find(fe=>String(fe.id)===X);Q&&(P(Q),E(!0))}},[i,e]);const R=()=>{if(E(!1),i.has("open")){const X=new URLSearchParams(i);X.delete("open"),a(X,{replace:!0})}},O=()=>{d(!1)},D=I.useMemo(()=>r.filter(X=>X.actualReturnDate===null).sort((X,Q)=>new Date(X.expectedReturnDate).getTime()-new Date(Q.expectedReturnDate).getTime()),[r]),L=I.useMemo(()=>{let X=e.filter(fe=>x==="active"?!fe.isDiscontinued:fe.isDiscontinued);const Q=o.toLowerCase();return Q?X.filter(fe=>{var V;const ye=fe.name.toLowerCase().includes(Q),J=(V=fe.manufacturerName)==null?void 0:V.toLowerCase().includes(Q),ce=fe.variants.some(G=>G.name&&G.name.toLowerCase().includes(Q)||G.size&&G.size.toLowerCase().includes(Q)||G.sku&&G.sku.toLowerCase().includes(Q));return ye||J||ce}):X},[e,o,x]),B=I.useRef(null),z=JHe(),[H,te]=I.useState(600);I.useEffect(()=>{const X=()=>{const Q=window.innerHeight-280;te(Q<400?400:Q)};return X(),window.addEventListener("resize",X),()=>window.removeEventListener("resize",X)},[]);const Y=Math.ceil(L.length/z),W=qce({count:Y,getScrollElement:()=>B.current,estimateSize:()=>320,overscan:5}),Z=async X=>{w(!0);try{await n.addProduct.mutateAsync(X),Re.success("Product added successfully!"),O()}catch(Q){console.error(Q),Re.error("Failed to add product.")}finally{w(!1)}},re=X=>{P(X),E(!0)};return t?u.jsx("div",{className:"flex items-center justify-center h-64 text-text-secondary",children:"Loading library..."}):k&&N?u.jsx(S9,{isOpen:k,onClose:R,product:N}):u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 px-1 w-full",children:[u.jsx("h1",{className:"text-4xl font-bold text-text-primary tracking-tight",children:"Sample Library"}),u.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-4 w-full md:w-auto",children:[u.jsxs("div",{className:"bg-surface-container-high p-1 rounded-full flex items-center shadow-inner",children:[u.jsxs("button",{onClick:()=>v("active"),className:`flex-1 flex items-center justify-center gap-2 px-6 py-2 rounded-full text-sm font-medium transition-all ${x==="active"?"bg-surface shadow text-primary":"text-text-secondary hover:text-text-primary hover:bg-surface-container-highest"}`,children:[u.jsx(uoe,{size:16})," Active"]}),u.jsxs("button",{onClick:()=>v("discontinued"),className:`flex-1 flex items-center justify-center gap-2 px-6 py-2 rounded-full text-sm font-medium transition-all ${x==="discontinued"?"bg-surface shadow text-error":"text-text-secondary hover:text-text-primary hover:bg-surface-container-highest"}`,children:[u.jsx(cS,{size:16})," Discontinued"]})]}),x==="active"&&u.jsxs("button",{onClick:()=>d(!0),className:"flex items-center justify-center bg-primary hover:bg-primary-hover text-on-primary font-semibold py-3 px-6 rounded-full transition-all shadow-lg hover:shadow-xl",children:[u.jsx(su,{className:"w-5 h-5 mr-2"}),"Add Product"]})]})]}),u.jsxs("div",{className:"relative w-full max-w-2xl",children:[u.jsx(Wo,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-secondary",size:20}),u.jsx("input",{type:"text",placeholder:"Search by style, color, manufacturer, type, or SKU...",value:o,onChange:m,className:"w-full pl-12 pr-6 py-4 bg-surface-container-high border-none rounded-full text-text-primary focus:ring-2 focus:ring-primary/50 outline-none transition-shadow shadow-sm hover:shadow-md placeholder:text-text-tertiary"})]}),o===""&&x==="active"&&D.length>0&&u.jsxs(u.Fragment,{children:[u.jsx(Dle,{title:"Currently Checked Out",checkouts:D,onItemClick:re}),u.jsx("div",{className:"border-t border-outline/10 my-8"}),u.jsx("h2",{className:"text-2xl font-semibold mb-6 text-text-primary pl-1",children:"All Products"})]}),u.jsxs("div",{ref:B,className:"overflow-y-auto w-full relative rounded-xl",style:{height:H},children:[u.jsx("div",{style:{height:`${W.getTotalSize()}px`,width:"100%",position:"relative"},children:W.getVirtualItems().map(X=>{const Q=X.index*z,fe=t?[]:L.slice(Q,Q+z);return u.jsxs("div",{"data-index":X.index,ref:W.measureElement,className:"absolute top-0 left-0 w-full flex gap-6 p-4",style:{transform:`translateY(${X.start}px)`},children:[fe.map(ye=>u.jsx("div",{className:"flex-1 min-w-0",children:u.jsx(Kce,{product:ye,pricingSettings:f,onClick:re,showDiscontinuedStyle:x==="discontinued"})},ye.id)),fe.length<z&&Array.from({length:z-fe.length}).map((ye,J)=>u.jsx("div",{className:"flex-1"},`spacer-${J}`))]},X.key)})}),L.length===0&&u.jsx("p",{className:"text-text-secondary col-span-full text-center py-10",children:"No products found."})]}),c&&u.jsx("div",{className:"fixed inset-0 bg-black/75 flex justify-center z-50 overflow-y-auto",children:u.jsxs("div",{className:"bg-surface-container-high w-full min-h-full md:min-h-0 md:h-auto md:max-h-[90vh] md:max-w-3xl md:rounded-xl shadow-2xl flex flex-col border border-outline/10 md:my-auto relative",onClick:X=>X.stopPropagation(),children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center bg-surface-container-low md:rounded-t-xl",children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Create New Product Line"}),u.jsx("button",{onClick:O,className:"p-2 hover:bg-surface-container-highest rounded-full text-text-secondary hover:text-text-primary",children:u.jsx(Zr,{size:24})})]}),u.jsx("div",{className:"p-6 overflow-y-auto flex-grow",children:u.jsx(Gce,{onSave:Z,onCancel:O,isSaving:b})})]})})]})},rWe=(e,t)=>{const r=new Date(e),n=new Date(t),i=r.toLocaleString("default",{month:"short"}),a=r.getDate(),s=n.getDate();return a===s?`${i} ${a}`:`${i} ${a} - ${s}`},nWe=()=>{const{data:e=[],isLoading:t}=gf(),[r,n]=I.useState(!1),[i,a]=I.useState(null),[s,o]=I.useState(""),l=I.useMemo(()=>{if(!e)return[];const p=s.toLowerCase();return e.filter(m=>{var b,w;const x=(((b=m.installerName)==null?void 0:b.toLowerCase())??"").includes(p),v=(((w=m.contactEmail)==null?void 0:w.toLowerCase())??"").includes(p);return x||v})},[e,s]),c=()=>{a(null),n(!0)},d=(p,m)=>{p.preventDefault(),p.stopPropagation(),a(m),n(!0)},f=()=>{n(!1),a(null)};return t?u.jsx("div",{className:"flex items-center justify-center h-64 text-text-secondary",children:"Loading installers..."}):u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 px-1",children:[u.jsx("h1",{className:"text-4xl font-bold text-text-primary tracking-tight",children:"Installers"}),u.jsxs("button",{onClick:c,className:"flex items-center justify-center bg-primary hover:bg-primary-hover text-on-primary font-semibold py-3 px-6 rounded-full transition-all shadow-lg hover:shadow-xl md:w-auto w-full",children:[u.jsx(su,{className:"w-5 h-5 mr-2"}),"Add Installer"]})]}),u.jsxs("div",{className:"relative w-full max-w-2xl",children:[u.jsx(Wo,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-secondary",size:20}),u.jsx("input",{type:"text",placeholder:"Search installers by name or email...",value:s,onChange:p=>o(p.target.value),className:"w-full pl-12 pr-6 py-4 bg-surface-container-high border-none rounded-full text-text-primary focus:ring-2 focus:ring-primary/50 outline-none transition-shadow shadow-sm hover:shadow-md placeholder:text-text-tertiary"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[l.map(p=>u.jsxs(ai,{to:`/installers/${p.id}`,className:"relative block bg-surface-container-high p-6 rounded-xl shadow-sm border border-outline/10 hover:shadow-md hover:-translate-y-1 transition-all duration-300 group",children:[u.jsxs("div",{className:"flex items-center mb-4",children:[u.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mr-4 shrink-0 shadow-sm border-2 border-surface",style:{backgroundColor:p.color||"#6b7280"},children:u.jsx(lc,{className:"w-6 h-6 text-white"})}),u.jsx("div",{children:u.jsx("h2",{className:"text-xl font-bold text-text-primary truncate",children:p.installerName})})]}),u.jsxs("div",{className:"space-y-2 text-sm text-text-secondary",children:[u.jsxs("p",{className:"flex items-center",children:[u.jsx(Xc,{className:"w-4 h-4 mr-3 shrink-0 opacity-70"})," ",u.jsx("span",{className:"truncate",children:p.contactEmail||"N/A"})]}),u.jsxs("p",{className:"flex items-center",children:[u.jsx(y0,{className:"w-4 h-4 mr-3 shrink-0 opacity-70"})," ",u.jsx("span",{className:"truncate",children:p.contactPhone||"N/A"})]})]}),u.jsx("div",{className:"border-t border-outline/10 my-4"}),u.jsxs("div",{className:"mb-4",children:[u.jsxs("h3",{className:"text-sm font-semibold text-text-secondary flex items-center mb-1",children:[u.jsx(pd,{className:"w-4 h-4 mr-2"}),"Active Samples"]}),u.jsx("p",{className:"text-xs text-text-primary ml-6",children:p.activeSampleCount&&p.activeSampleCount>0?u.jsxs("span",{className:"font-bold text-primary",children:[p.activeSampleCount," items checked out"]}):"No samples checked out"})]}),p.jobs&&p.jobs.length>0&&u.jsx(u.Fragment,{children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h3",{className:"text-sm font-semibold text-text-secondary flex items-center mb-2",children:[u.jsx(Rh,{className:"w-4 h-4 mr-2"}),"Scheduled Jobs"]}),p.jobs.map((m,x)=>u.jsxs("div",{className:"text-xs text-text-secondary grid grid-cols-3 gap-2 items-center",children:[u.jsx("span",{className:"col-span-1 truncate font-medium text-text-primary",children:m.projectName}),u.jsxs("span",{className:"col-span-1 truncate text-center",children:["(",m.customerName||"N/A",")"]}),u.jsx("span",{className:"col-span-1 truncate text-right",children:rWe(m.scheduledStartDate,m.scheduledEndDate)})]},`${m.projectId}-${x}`))]})}),u.jsx("button",{onClick:m=>d(m,p),className:"absolute top-4 right-4 text-text-secondary hover:text-primary p-2 rounded-full hover:bg-surface-container-highest transition-colors opacity-0 group-hover:opacity-100",title:"Edit Installer",children:u.jsx(Xh,{className:"w-4 h-4"})})]},p.id)),e.length===0&&u.jsx("p",{className:"text-text-secondary col-span-full text-center py-8",children:"No installers have been added yet."}),e.length>0&&l.length===0&&u.jsx("p",{className:"text-text-secondary col-span-full text-center py-8",children:"No installers match your search."})]}),u.jsx(m9,{isOpen:r,onClose:f,installer:i})]})},iWe=(e,t)=>{if(!e)return"Not Scheduled Yet";const r=new Date(e),n=t?new Date(t):null;return!n||r.toDateString()===n.toDateString()?`Scheduled: ${r.toLocaleDateString()}`:`Scheduled: ${r.toLocaleDateString()} - ${n.toLocaleDateString()}`},aWe=()=>{const{installerId:e}=wx();pu();const{installers:t,isLoading:r,installerHistory:n,fetchInstallerHistory:i}=Gr(),[a,s]=I.useState([]),[o,l]=I.useState(!0),[c,d]=I.useState([]),[f,p]=I.useState(!1),[m,x]=I.useState(null),[v,b]=I.useState(!1),w=t.find(E=>E.id===parseInt(e||""));I.useEffect(()=>{(async()=>{if(e){l(!0);try{const N=await fetch(`/api/projects?installerId=${e}`);if(!N.ok)throw new Error("Failed to fetch projects");const P=await N.json();s(P)}catch(N){console.error("Failed to fetch installer projects:",N),Re.error("Could not load assigned projects.")}finally{l(!1)}}})(),e&&(i(parseInt(e)),f6e(parseInt(e)).then(d).catch(console.error))},[e,i]);const k=E=>{x(E),p(!0)};return r?u.jsx("div",{className:"text-center py-12 text-text-secondary",children:"Loading installer details..."}):w?u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-surface-container-high p-8 rounded-xl shadow-sm border border-outline/10",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mr-6 shadow-sm border-2 border-surface",style:{backgroundColor:w.color||"#4A5568"},children:u.jsx(lc,{className:"w-8 h-8 text-white"})}),u.jsx("div",{children:u.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:w.installerName})})]}),u.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 py-2 px-6 bg-primary-container hover:bg-primary text-primary hover:text-on-primary rounded-full font-semibold transition-all shadow-sm",children:[u.jsx(Xh,{size:16}),"Edit"]})]}),u.jsx("div",{className:"border-t border-outline/10 my-6"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-text-secondary",children:[u.jsxs("p",{className:"flex items-center",children:[u.jsx(Xc,{className:"w-5 h-5 mr-3 text-primary opacity-80"})," ",w.contactEmail||"N/A"]}),u.jsxs("p",{className:"flex items-center",children:[u.jsx(y0,{className:"w-5 h-5 mr-3 text-primary opacity-80"})," ",w.contactPhone||"N/A"]})]})]}),u.jsx("div",{children:u.jsx(q7,{title:"Change History",icon:u.jsx(Mx,{className:"w-6 h-6"}),defaultOpen:!1,children:u.jsx(ub,{history:n})})}),u.jsxs("div",{children:[u.jsx("div",{className:"flex justify-between items-center mb-6 px-1",children:u.jsxs("h2",{className:"text-2xl font-bold text-text-primary flex items-center gap-3",children:[u.jsx(pd,{className:"w-6 h-6"})," Sample History"]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[c.map(E=>u.jsx(Mle,{sample:E,onStartProject:k},E.id)),c.length===0&&u.jsx("p",{className:"col-span-full text-center text-text-secondary py-8 bg-surface-container-low rounded-xl border border-dashed border-outline/20",children:"No active samples for this installer."})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"flex justify-between items-center mb-6 px-1",children:u.jsxs("h2",{className:"text-2xl font-bold text-text-primary flex items-center gap-3",children:[u.jsx(Rh,{className:"w-6 h-6"})," Assigned Projects"]})}),u.jsx("div",{className:"space-y-4",children:o?u.jsx("p",{className:"text-text-secondary",children:"Loading projects..."}):a.length>0?a.map(E=>u.jsxs("div",{className:"bg-surface-container-high p-5 rounded-xl border border-outline/10 shadow-sm flex flex-col md:flex-row justify-between items-start md:items-center gap-4 hover:shadow-md transition-shadow",children:[u.jsxs("div",{children:[u.jsx(ai,{to:`/projects/${E.projectId}`,className:"text-lg font-bold text-text-primary hover:text-primary transition-colors",children:E.projectName}),u.jsxs("p",{className:"text-sm text-text-secondary flex items-center mt-1",children:[u.jsx(lc,{className:"w-4 h-4 mr-2"}),E.customerName]})]}),u.jsxs("div",{className:"text-left md:text-right w-full md:w-auto border-t border-outline/10 md:border-none pt-4 md:pt-0",children:[u.jsxs("p",{className:"text-md font-bold text-success flex items-center md:justify-end",children:[u.jsx(fS,{className:"w-5 h-5 mr-2"}),new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(E.projectTotal)]}),u.jsxs("p",{className:"text-sm text-text-secondary flex items-center md:justify-end mt-1",children:[u.jsx(xu,{className:"w-4 h-4 mr-2"}),iWe(E.scheduledStartDate,E.scheduledEndDate)]})]})]},E.projectId)):u.jsx("div",{className:"text-center text-text-secondary bg-surface-container-low p-12 rounded-xl border border-dashed border-outline/20",children:u.jsx("p",{children:"No accepted projects assigned to this installer yet."})})})]}),v&&u.jsx(m9,{isOpen:v,onClose:()=>b(!1),installer:w}),u.jsx(Fle,{isOpen:f,onClose:()=>{p(!1),x(null)},initialInstaller:w,transferSampleId:m==null?void 0:m.id,initialProjectName:m?`Project for Sample #${m.id}`:""})]}):u.jsx("div",{className:"text-center py-12 text-text-secondary",children:"Installer not found."})},sWe=()=>{const{quoteId:e}=wx(),t=e?parseInt(e,10):void 0,{data:r=[],isLoading:n}=b4(),i=r.find(m=>m.id===t),{data:a=[]}=Kh(),{data:s=[]}=Rx(),{data:o=[]}=gf(),l=a.find(m=>m.id===(i==null?void 0:i.projectId)),c=s.find(m=>m.id===(l==null?void 0:l.customerId)),d=o.find(m=>m.id===(i==null?void 0:i.installerId)),f=m=>m===cl.ACCEPTED?{color:"bg-primary-container text-primary",text:"Accepted"}:m===cl.REJECTED?{color:"bg-error-container text-error",text:"Rejected"}:{color:"bg-secondary-container text-text-secondary",text:"Sent"};if(n)return u.jsx("div",{className:"text-center p-8 text-text-secondary",children:"Loading quote details..."});if(!i)return u.jsx("div",{className:"text-center p-8 text-text-secondary",children:"Quote not found."});const p=f(i.status);return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 px-1",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-4xl font-bold text-text-primary tracking-tight",children:"Quote Details"}),l&&c&&u.jsxs("p",{className:"text-md text-text-secondary mt-2",children:["For ",u.jsx(ai,{to:`/projects/${l.id}`,className:"font-semibold text-primary hover:underline",children:l.projectName})]})]}),u.jsx("div",{className:`text-sm font-bold px-4 py-1.5 rounded-full ${p.color}`,children:p.text})]}),u.jsxs("div",{className:"bg-surface-container-high rounded-2xl shadow-sm p-6 md:p-8 border border-outline/10",children:[u.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-lg font-semibold mb-3 text-text-primary flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-primary-container rounded-full text-primary",children:u.jsx(fS,{size:18})}),"Materials Amount"]}),u.jsxs("p",{className:"text-5xl font-bold text-text-primary tracking-tight",children:["$",parseFloat(i.materialsAmount||0).toFixed(2)]}),u.jsxs("h2",{className:"text-lg font-semibold mt-4 mb-3 text-text-primary flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-primary-container rounded-full text-primary",children:u.jsx(fS,{size:18})}),"Labor Amount"]}),u.jsxs("p",{className:"text-5xl font-bold text-text-primary tracking-tight",children:["$",parseFloat(i.laborAmount||0).toFixed(2)]})]}),u.jsxs("div",{children:[u.jsxs("h2",{className:"text-lg font-semibold mb-3 text-text-primary flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-primary-container rounded-full text-primary",children:u.jsx(sb,{size:18})}),"Assigned Installer"]}),d?u.jsx(ai,{to:`/installers/${d.id}`,className:"text-2xl font-bold text-text-primary hover:text-primary transition-colors",children:d.installerName}):u.jsx("p",{className:"text-2xl font-semibold text-text-secondary",children:"Not Assigned"})]})]}),u.jsx("div",{className:"border-t border-outline/10 my-8"}),u.jsxs("div",{children:[u.jsxs("h2",{className:"text-lg font-semibold mb-4 text-text-primary flex items-center gap-3",children:[u.jsx(Jc,{className:"w-5 h-5 text-primary"})," Details"]}),u.jsx("div",{className:"bg-surface-container-low p-5 rounded-xl border border-outline/5",children:u.jsx("p",{className:"text-text-primary whitespace-pre-wrap leading-relaxed",children:i.quoteDetails||"No details provided."})})]}),u.jsx("div",{className:"border-t border-outline/10 my-8"}),u.jsxs("div",{children:[u.jsxs("h2",{className:"text-lg font-semibold mb-3 text-text-primary flex items-center gap-3",children:[u.jsx(xu,{className:"w-5 h-5 text-primary"})," Timeline"]}),u.jsxs("p",{className:"text-text-secondary font-medium",children:["Sent on: ",u.jsx("span",{className:"text-text-primary",children:new Date(i.dateSent).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]})]})},oWe=()=>{const{currentUser:e}=Gr(),[t,r]=I.useState([]),[n,i]=I.useState([]),[a,s]=I.useState(!0),[o,l]=I.useState(""),[c,d]=I.useState(""),[f,p]=I.useState(""),[m,x]=I.useState("User");I.useEffect(()=>{(async()=>{try{s(!0);const[N,P]=await Promise.all([C7(),C6e()]);r(N.sort((R,O)=>R.email.localeCompare(O.email))),i(P)}catch(N){qr.error("Could not load user management data."),console.error(N)}finally{s(!1)}})()},[]);const v=async E=>{if(E.preventDefault(),!o){qr.error("Email is required to send an invitation.");return}try{const N=await v6e(o,c,f,m),P={...N,roles:[m],firstName:c,lastName:f};r([...t,P].sort((R,O)=>R.email.localeCompare(O.email))),qr.success(`Invitation sent to ${N.email}!`),l(""),d(""),p(""),x("User")}catch(N){qr.error(`Failed to create user: ${N.message}`)}},b=async E=>{if((e==null?void 0:e.userId)===E.userId){qr.error("You cannot delete your own account.");return}if(window.confirm(`Are you sure you want to delete user "${E.email}"? This action cannot be undone.`))try{await y6e(E.userId),r(t.filter(N=>N.userId!==E.userId)),qr.success("User deleted successfully.")}catch(N){qr.error(`Failed to delete user: ${N.message}`)}},w=(E,N,P)=>{r(R=>R.map(O=>{if(O.userId===E){const D=P?[...O.roles,N]:O.roles.filter(L=>L!==N);return{...O,roles:D}}return O}))},k=async E=>{try{await k6e(E.userId,E.roles),qr.success(`Roles for ${E.email} updated successfully.`)}catch(N){qr.error(`Failed to update roles: ${N.message}`)}};return u.jsx("section",{className:"md:bg-surface-container-low md:p-8 md:rounded-2xl md:border md:border-outline/10 max-w-6xl mx-auto transition-all",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-8",children:[u.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[u.jsxs("h3",{className:"text-xl font-bold mb-4 text-text-primary flex items-center gap-2",children:[u.jsx(ex,{className:"w-5 h-5 text-primary"})," Existing Users"]}),a?u.jsx("p",{className:"text-text-secondary",children:"Loading users..."}):u.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto pr-2",children:t.map(E=>u.jsxs("div",{className:"bg-surface-container-highest/30 p-4 rounded-2xl border border-outline/10 hover:border-outline/30 transition-colors",children:[u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[E.avatarUrl?u.jsx("img",{src:E.avatarUrl,alt:E.email,className:"w-12 h-12 rounded-full object-cover border-2 border-surface-container-low shadow-sm"}):u.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold text-lg border-2 border-surface-container-low shadow-sm",children:(E.firstName?E.firstName[0]:E.email[0]).toUpperCase()}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-text-primary text-base",children:E.firstName?`${E.firstName} ${E.lastName}`:"No Name Set"}),u.jsx("p",{className:"text-xs font-medium text-text-secondary",children:E.email})]})]}),u.jsx("button",{onClick:()=>b(E),disabled:(e==null?void 0:e.userId)===E.userId,className:"text-error/80 hover:text-error p-2 rounded-full hover:bg-error/10 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"Delete User",children:u.jsx(mo,{size:18})})]}),u.jsxs("div",{className:"flex flex-wrap items-center gap-4 border-t border-outline/10 pt-3",children:[u.jsx("div",{className:"flex gap-4 items-center",children:n.map(N=>u.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-text-secondary cursor-pointer hover:text-text-primary transition-colors",children:[u.jsx("input",{type:"checkbox",checked:E.roles.includes(N.name),onChange:P=>w(E.userId,N.name,P.target.checked),disabled:(e==null?void 0:e.userId)===E.userId&&N.name==="Admin",className:"w-4 h-4 rounded border-outline/30 text-primary focus:ring-primary bg-surface-container-low"}),N.name]},N.id))}),u.jsxs("button",{onClick:()=>k(E),className:"ml-auto flex items-center gap-2 py-1.5 px-4 text-xs font-bold bg-primary/10 hover:bg-primary hover:text-on-primary text-primary rounded-full transition-all",children:[u.jsx(vs,{size:14})," Save"]})]})]},E.userId))})]}),u.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[u.jsx("h3",{className:"text-xl font-bold mb-4 text-text-primary",children:"Invite New User"}),u.jsxs("form",{onSubmit:v,className:"space-y-5 bg-surface-container-highest/30 p-6 rounded-2xl border border-outline/10",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-bold text-text-secondary uppercase tracking-wider mb-1",children:["Email Address ",u.jsx("span",{className:"text-error",children:"*"})]}),u.jsx("input",{type:"email",value:o,onChange:E=>l(E.target.value),className:"block w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-lg text-text-primary placeholder:text-text-secondary/50 focus:border-primary focus:outline-none transition-all",placeholder:"new.user@example.com",autoComplete:"off"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-text-secondary uppercase tracking-wider mb-1",children:"First Name"}),u.jsx("input",{type:"text",value:c,onChange:E=>d(E.target.value),className:"block w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-lg text-text-primary placeholder:text-text-secondary/50 focus:border-primary focus:outline-none transition-all",placeholder:"John"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-text-secondary uppercase tracking-wider mb-1",children:"Last Name"}),u.jsx("input",{type:"text",value:f,onChange:E=>p(E.target.value),className:"block w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-lg text-text-primary placeholder:text-text-secondary/50 focus:border-primary focus:outline-none transition-all",placeholder:"Doe"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-text-secondary uppercase tracking-wider mb-1",children:"Initial Role"}),u.jsx("select",{value:m,onChange:E=>x(E.target.value),className:"block w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-lg text-text-primary focus:border-primary focus:outline-none transition-all cursor-pointer",children:n.map(E=>u.jsx("option",{value:E.name,children:E.name},E.id))})]}),u.jsxs("div",{className:"pt-4",children:[u.jsxs("button",{type:"submit",className:"w-full bg-primary hover:bg-primary-hover text-on-primary py-3 px-6 rounded-full font-bold shadow-sm flex items-center justify-center gap-2 transition-all hover:shadow-md",children:[u.jsx(ex,{size:18})," Send Invitation"]}),u.jsx("p",{className:"text-xs text-text-tertiary mt-2 text-center",children:"The user will receive an email with a link to set their password."})]})]})]})]})})},lWe=({primary:e,secondary:t,accent:r,background:n,surface:i})=>{const a={"--preview-primary":e,"--preview-secondary":t,"--preview-accent":r,"--preview-bg":n,"--preview-surface":i};return u.jsxs("div",{className:"w-full h-full min-h-[400px] rounded-xl overflow-hidden border border-border shadow-xl flex flex-col",style:a,children:[u.jsxs("div",{className:"h-6 bg-gray-900 flex items-center px-3 gap-1.5",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-500/80"}),u.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-yellow-500/80"}),u.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500/80"})]}),u.jsxs("div",{className:"flex flex-1 overflow-hidden font-sans text-xs",children:[u.jsxs("div",{style:{backgroundColor:"color-mix(in srgb, var(--preview-surface), var(--preview-bg) 50%)"},className:"w-16 sm:w-48 flex flex-col p-3 gap-4",children:[u.jsx("div",{className:"h-8 w-8 sm:w-32 bg-gray-500/20 rounded mb-2 animate-pulse"}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsxs("div",{style:{backgroundColor:"color-mix(in srgb, var(--preview-primary), var(--preview-surface) 85%)",color:"var(--preview-primary)"},className:"p-2 rounded-full flex items-center gap-2 font-bold",children:[u.jsx(coe,{size:14})," ",u.jsx("span",{className:"hidden sm:inline",children:"Dashboard"})]}),u.jsxs("div",{className:"p-2 rounded-full flex items-center gap-2 hover:bg-black/5 text-gray-400",children:[u.jsx(ex,{size:14})," ",u.jsx("span",{className:"hidden sm:inline",children:"Customers"})]}),u.jsxs("div",{className:"p-2 rounded-full flex items-center gap-2 hover:bg-black/5 text-gray-400",children:[u.jsx(eC,{size:14})," ",u.jsx("span",{className:"hidden sm:inline",children:"Settings"})]})]})]}),u.jsxs("div",{style:{backgroundColor:"var(--preview-bg)"},className:"flex-1 flex flex-col relative",children:[u.jsxs("div",{className:"h-12 flex items-center justify-between px-4 mt-2",children:[u.jsx("h1",{className:"font-bold text-lg",style:{color:"white"},children:"Dashboard"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("div",{style:{backgroundColor:"color-mix(in srgb, var(--preview-surface) 90%, #fff)",color:"gray"},className:"h-8 w-8 rounded-full flex items-center justify-center",children:u.jsx(Wo,{size:14})}),u.jsxs("div",{style:{backgroundColor:"color-mix(in srgb, var(--preview-surface) 90%, #fff)",color:"gray"},className:"h-8 w-8 rounded-full flex items-center justify-center relative",children:[u.jsx(uS,{size:14}),u.jsx("div",{style:{backgroundColor:"var(--preview-accent)"},className:"absolute top-0 right-0 w-2.5 h-2.5 rounded-full border-2 border-white"})]})]})]}),u.jsxs("div",{className:"p-4 space-y-4 overflow-hidden",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{style:{backgroundColor:"color-mix(in srgb, var(--preview-surface) 90%, #fff)"},className:"p-4 rounded-xl shadow-sm",children:[u.jsx("div",{className:"mb-1 text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Active Jobs"}),u.jsx("div",{style:{color:"white"},className:"text-2xl font-bold",children:"12"}),u.jsx("div",{style:{color:"var(--preview-primary)",backgroundColor:"color-mix(in srgb, var(--preview-primary), var(--preview-surface) 85%)"},className:"text-[10px] font-bold mt-2 px-2 py-0.5 rounded-full w-fit",children:"On Track"})]}),u.jsxs("div",{style:{backgroundColor:"color-mix(in srgb, var(--preview-surface) 90%, #fff)"},className:"p-4 rounded-xl shadow-sm",children:[u.jsx("div",{className:"mb-1 text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Pending"}),u.jsx("div",{style:{color:"white"},className:"text-2xl font-bold",children:"5"}),u.jsx("div",{style:{color:"var(--preview-accent)",backgroundColor:"color-mix(in srgb, var(--preview-accent), var(--preview-surface) 85%)"},className:"text-[10px] font-bold mt-2 px-2 py-0.5 rounded-full w-fit",children:"Action Needed"})]})]}),u.jsxs("div",{className:"flex gap-2 mt-4",children:[u.jsx("button",{style:{backgroundColor:"var(--preview-primary)",color:"#fff"},className:"px-4 py-2 rounded-full shadow-md font-bold",children:"Save"}),u.jsx("button",{style:{color:"gray",backgroundColor:"color-mix(in srgb, var(--preview-surface) 90%, #fff)"},className:"px-4 py-2 rounded-full shadow-sm font-medium",children:"Cancel"})]})]}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-t from-black/20 to-transparent pointer-events-none"})]})]})]})},aD=e=>{const t=parseInt(e.substr(1,2),16),r=parseInt(e.substr(3,2),16),n=parseInt(e.substr(5,2),16);return(t*299+r*587+n*114)/1e3>=128?"#000000":"#ffffff"},cWe=()=>{const{systemBranding:e,refreshBranding:t}=Gr(),[r,n]=I.useState("Subfloor"),[i,a]=I.useState("America/Los_Angeles"),[s,o]=I.useState(null),[l,c]=I.useState(null),[d,f]=I.useState("#2563eb"),[p,m]=I.useState("#4b5563"),[x,v]=I.useState("#0d9488"),[b,w]=I.useState("#111827"),[k,E]=I.useState("#1f2937"),[N,P]=I.useState(null),[R,O]=I.useState(null),[D,L]=I.useState(!1),[B,z]=I.useState("#ef4444"),[H,te]=I.useState("#f59e0b"),[Y,W]=I.useState("#10b981"),[Z,re]=I.useState(null),X="";I.useEffect(()=>()=>{N&&URL.revokeObjectURL(N),R&&URL.revokeObjectURL(R)},[N,R]),I.useEffect(()=>{e&&(re({companyName:e.companyName,systemTimezone:e.systemTimezone,primaryColor:e.primaryColor,secondaryColor:e.secondaryColor,accentColor:e.accentColor,backgroundColor:e.backgroundColor,surfaceColor:e.surfaceColor,errorColor:e.errorColor||"#ef4444",warningColor:e.warningColor||"#f59e0b",successColor:e.successColor||"#10b981"}),e.companyName&&n(e.companyName),e.systemTimezone&&a(e.systemTimezone),e.primaryColor&&f(e.primaryColor),e.secondaryColor&&m(e.secondaryColor),e.accentColor&&v(e.accentColor),e.backgroundColor&&w(e.backgroundColor),e.surfaceColor&&E(e.surfaceColor),e.errorColor&&z(e.errorColor),e.warningColor&&te(e.warningColor),e.successColor&&W(e.successColor))},[e]);const Q=()=>{Z&&window.confirm("Discard unsaved changes and reset to last saved state?")&&(n(Z.companyName||"Subfloor"),a(Z.systemTimezone||"America/Los_Angeles"),f(Z.primaryColor||"#2563eb"),m(Z.secondaryColor||"#4b5563"),v(Z.accentColor||"#0d9488"),w(Z.backgroundColor||"#111827"),E(Z.surfaceColor||"#1f2937"),z(Z.errorColor||"#ef4444"),te(Z.warningColor||"#f59e0b"),W(Z.successColor||"#10b981"),qr.success("Reset to last saved settings."))},fe=(ce,V)=>{var Ee;const G=(Ee=ce.target.files)==null?void 0:Ee[0];if(!G)return;V==="logo"&&N&&URL.revokeObjectURL(N),V==="favicon"&&R&&URL.revokeObjectURL(R);const ie=URL.createObjectURL(G);V==="logo"?(o(G),P(ie)):(c(G),O(ie))},ye=async ce=>{if(window.confirm(`Are you sure you want to remove the current ${ce}?`))try{await P6e(ce),await t(),qr.success(`${ce==="logo"?"Company Logo":"Favicon"} removed.`),ce==="logo"?(o(null),N&&URL.revokeObjectURL(N),P(null)):(c(null),R&&URL.revokeObjectURL(R),O(null))}catch(V){console.error(V),qr.error("Failed to delete branding.")}},J=async()=>{L(!0);const ce=new FormData;s&&ce.append("logo",s),l&&ce.append("favicon",l),ce.append("companyName",r),ce.append("systemTimezone",i),ce.append("primaryColor",d),ce.append("onPrimary",aD(d)),ce.append("secondaryColor",p),ce.append("onSecondary",aD(p)),ce.append("accentColor",x),ce.append("onAccent",aD(x)),ce.append("backgroundColor",b),ce.append("surfaceColor",k),ce.append("errorColor",B),ce.append("warningColor",H),ce.append("successColor",Y);try{await I6e(ce),await t(),qr.success("Branding updated successfully!"),o(null),c(null),N&&URL.revokeObjectURL(N),R&&URL.revokeObjectURL(R),P(null),O(null)}catch(V){console.error(V),qr.error(V.message||"Failed to upload branding.")}finally{L(!1)}};return u.jsxs("section",{children:[u.jsxs("h2",{className:"text-2xl font-bold text-text-primary mb-6 flex items-center gap-3",children:[u.jsx(aoe,{className:"w-7 h-7 text-accent"}),"System Branding"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-0 md:gap-6 mb-8",children:[u.jsxs("div",{className:"py-6 border-b border-outline/10 md:border-b-0 md:bg-surface-container-low md:p-6 md:rounded-xl md:border md:border-outline/10",children:[u.jsxs("h3",{className:"text-lg font-medium text-text-primary mb-2 flex items-center gap-2",children:[u.jsx(Yg,{className:"w-5 h-5 text-secondary"})," Company Name"]}),u.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Appears in email footers and titles."}),u.jsx("input",{type:"text",value:r,onChange:ce=>n(ce.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-all placeholder:text-text-tertiary",placeholder:"e.g. Acme Flooring Co."})]}),u.jsxs("div",{className:"py-6 border-b border-outline/10 md:border-b-0 md:bg-surface-container-low md:p-6 md:rounded-xl md:border md:border-outline/10",children:[u.jsxs("h3",{className:"text-lg font-medium text-text-primary mb-2 flex items-center gap-2",children:[u.jsx(Qg,{className:"w-5 h-5 text-secondary"})," System Timezone"]}),u.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Used for all dates and scheduling."}),u.jsxs("select",{value:i,onChange:ce=>a(ce.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-all cursor-pointer",children:[u.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (US & Canada)"}),u.jsx("option",{value:"America/Denver",children:"Mountain Time (US & Canada)"}),u.jsx("option",{value:"America/Chicago",children:"Central Time (US & Canada)"}),u.jsx("option",{value:"America/New_York",children:"Eastern Time (US & Canada)"}),u.jsx("option",{value:"UTC",children:"UTC (Universal)"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-0 md:gap-8",children:[u.jsxs("div",{className:"py-6 border-b border-outline/10 md:border-b-0 md:bg-surface-container-low md:p-6 md:rounded-xl md:border md:border-outline/10",children:[u.jsx("h3",{className:"text-lg font-medium text-text-primary mb-2",children:"Company Logo"}),u.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Displayed in the top-left of the application sidebar. Transparent PNG recommended."}),u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsx("div",{className:"relative h-32 w-full flex items-center justify-center bg-surface-container-highest rounded-lg border-2 border-dashed border-outline/20 group",children:N?u.jsxs(u.Fragment,{children:[u.jsx("img",{src:N,alt:"New Logo Preview",className:"max-h-24 max-w-full object-contain"}),u.jsx("span",{className:"absolute top-2 right-2 bg-primary-container text-primary text-xs px-2 py-1 rounded-full font-bold",children:"New"})]}):e!=null&&e.logoUrl?u.jsxs(u.Fragment,{children:[u.jsx("img",{src:`${X}${e.logoUrl}`,alt:"Current Logo",className:"max-h-24 max-w-full object-contain"}),u.jsx("button",{onClick:()=>ye("logo"),className:"absolute top-2 right-2 p-2 bg-red-500/80 hover:bg-red-600 text-white rounded transition-opacity opacity-0 group-hover:opacity-100",title:"Remove Logo",children:u.jsx(mo,{size:16})})]}):u.jsx("span",{className:"text-text-secondary",children:"No Logo Set"})}),u.jsx("input",{type:"file",accept:"image/*",onChange:ce=>fe(ce,"logo"),className:"block w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-on-primary hover:file:bg-primary-hover"})]})]}),u.jsxs("div",{className:"py-6 border-b border-outline/10 md:border-b-0 md:bg-surface-container-low md:p-6 md:rounded-xl md:border md:border-outline/10",children:[u.jsx("h3",{className:"text-lg font-medium text-text-primary mb-2",children:"Browser Favicon"}),u.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Displayed in the browser tab. Square image (PNG or ICO) required."}),u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsx("div",{className:"relative h-32 w-full flex items-center justify-center bg-surface-container-highest rounded-lg border-2 border-dashed border-outline/20 group",children:R?u.jsxs(u.Fragment,{children:[u.jsx("img",{src:R,alt:"New Favicon Preview",className:"w-16 h-16 object-contain"}),u.jsx("span",{className:"absolute top-2 right-2 bg-primary-container text-primary text-xs px-2 py-1 rounded-full font-bold",children:"New"})]}):e!=null&&e.faviconUrl?u.jsxs(u.Fragment,{children:[u.jsx("img",{src:`${X}${e.faviconUrl}`,alt:"Current Favicon",className:"w-16 h-16 object-contain"}),u.jsx("button",{onClick:()=>ye("favicon"),className:"absolute top-2 right-2 p-2 bg-red-500/80 hover:bg-red-600 text-white rounded transition-opacity opacity-0 group-hover:opacity-100",title:"Remove Favicon",children:u.jsx(mo,{size:16})})]}):u.jsx("span",{className:"text-text-secondary text-xs",children:"None"})}),u.jsx("input",{type:"file",accept:".ico,.png",onChange:ce=>fe(ce,"favicon"),className:"block w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-on-primary hover:file:bg-primary-hover"})]})]})]}),u.jsxs("div",{className:"mt-8 pt-6 border-t border-outline/10",children:[u.jsxs("h3",{className:"text-lg font-medium text-text-primary mb-4 flex items-center gap-2",children:[u.jsx(hoe,{className:"w-5 h-5 text-accent"}),"Theme Colors"]}),u.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-8",children:[u.jsxs("div",{className:"xl:col-span-5 space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[u.jsx("h4",{className:"text-xs font-bold text-text-secondary uppercase tracking-wider",children:"Brand Identity"}),u.jsx(Cp,{label:"Primary Color",value:d,onChange:f}),u.jsx(Cp,{label:"Secondary Color",value:p,onChange:m}),u.jsx(Cp,{label:"Accent Color",value:x,onChange:v})]}),u.jsx("div",{className:"border-t border-outline/10 my-4"}),u.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[u.jsx("h4",{className:"text-xs font-bold text-text-secondary uppercase tracking-wider",children:"Interface Theme"}),u.jsx(Cp,{label:"Page Background",value:b,onChange:w}),u.jsx(Cp,{label:"Card Surface",value:k,onChange:E})]}),u.jsx("div",{className:"border-t border-outline/10 my-4"}),u.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[u.jsx("h4",{className:"text-xs font-bold text-text-secondary uppercase tracking-wider",children:"Status Colors"}),u.jsx(Cp,{label:"Success (Green)",value:Y,onChange:W}),u.jsx(Cp,{label:"Warning (Orange)",value:H,onChange:te}),u.jsx(Cp,{label:"Error (Red)",value:B,onChange:z})]})]}),u.jsx("div",{className:"xl:col-span-7",children:u.jsxs("div",{className:"sticky top-6",children:[u.jsxs("div",{className:"flex justify-between items-end mb-2",children:[u.jsx("h4",{className:"text-xs font-bold text-text-secondary uppercase tracking-wider",children:"Live Preview"}),u.jsx("span",{className:"text-[10px] text-text-secondary bg-surface-container-low border border-outline/10 px-3 py-1 rounded-full",children:"Changes applied on Save"})]}),u.jsxs("div",{className:"mb-4 text-xs text-text-secondary space-y-1",children:[u.jsxs("p",{children:[" ",u.jsx("strong",{children:"Primary:"})," Buttons, Active Tabs, Links"]}),u.jsxs("p",{children:[" ",u.jsx("strong",{children:"Secondary:"})," Borders, Lines, Inactive Icons"]}),u.jsxs("p",{children:[" ",u.jsx("strong",{children:"Accent:"})," Status Badges, Notification Dots"]})]}),u.jsx(lWe,{primary:d,secondary:p,accent:x,background:b,surface:k})]})})]})]}),u.jsxs("div",{className:"mt-8 flex justify-end border-t border-outline/10 pt-4",children:[u.jsxs("button",{onClick:Q,className:"flex items-center gap-2 text-text-secondary hover:text-text-primary font-medium py-2 px-6 rounded-full hover:bg-surface-container-highest mr-auto transition-colors",children:[u.jsx(Lx,{size:16})," Reset Changes"]}),u.jsxs("button",{onClick:J,disabled:D,className:"flex items-center gap-2 bg-primary hover:bg-primary-hover text-on-primary font-bold py-2 px-8 rounded-full shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[u.jsx(vs,{size:18}),D?"Uploading...":"Save Branding"]})]})]})},Cp=({label:e,value:t,onChange:r})=>u.jsxs("div",{className:"py-3 border-b border-outline/10 md:border-b-0 md:bg-surface-container-low md:p-4 md:rounded-xl md:border md:border-outline/10 flex items-center justify-between group hover:border-primary/50 transition-colors md:shadow-sm",children:[u.jsx("label",{className:"text-sm font-medium text-text-primary",children:e}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-xs text-text-secondary font-mono opacity-50 group-hover:opacity-100 transition-opacity",children:t}),u.jsx("div",{className:"relative w-10 h-10 rounded-full overflow-hidden border-2 border-surface shadow-sm ring-1 ring-outline/10 hover:ring-primary transition-all",children:u.jsx("input",{type:"color",value:t,onChange:n=>r(n.target.value),className:"absolute -top-4 -left-4 w-20 h-20 p-0 border-0 cursor-pointer"})})]})]}),DK=({title:e,endpoint:t,warningMessage:r,icon:n})=>{const[i,a]=I.useState(null),[s,o]=I.useState(!1),l=d=>{d.target.files&&a(d.target.files[0])},c=async d=>{if(d.preventDefault(),!i)return Re.error("Please select a file.");if(!window.confirm(r))return;o(!0);const f=Re.loading(`Restoring ${e}...`),p=new FormData;p.append("backupFile",i);try{const m=await fetch(t,{method:"POST",body:p});if(!m.ok){const x=await m.json();throw new Error(x.error||"Restore failed")}if(Re.success("Restore successful!",{id:f}),t.includes("database")){try{await W0.signOut()}catch{}window.location.href="/auth"}else setTimeout(()=>window.location.reload(),1500)}catch(m){console.error(m),Re.error(m.message,{id:f})}finally{o(!1)}};return u.jsxs("form",{onSubmit:c,className:"flex flex-col h-full",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n&&u.jsx(n,{className:"w-5 h-5 text-text-secondary"}),u.jsx("h3",{className:"font-semibold text-text-primary",children:e})]}),u.jsx("div",{className:"flex-1 bg-background rounded border border-border border-dashed p-4 flex flex-col justify-center items-center gap-2 hover:border-primary transition-colors",children:u.jsx("input",{type:"file",accept:".zip",onChange:l,className:"w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-surface file:text-text-primary hover:file:bg-primary hover:file:text-on-primary"})}),u.jsxs("button",{type:"submit",disabled:!i||s,className:"mt-4 w-full bg-secondary hover:bg-secondary-hover text-on-secondary font-bold py-2 px-4 rounded transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx(soe,{size:16}),s?"Restoring...":"Start Restore"]})]})},uWe=()=>{const[e,t]=I.useState(null),[r,n]=I.useState(null),[i,a]=I.useState(!1),s=async o=>{if(o.preventDefault(),!e||!r)return Re.error("Please select both files.");if(!window.confirm("WARNING: You are about to overwrite the ENTIRE system (Database + Images). This cannot be undone. Continue?"))return;a(!0);const l=Re.loading("Starting Full System Restore...");try{Re.loading("Step 1/2: Restoring Images...",{id:l});const c=new FormData;if(c.append("backupFile",r),!(await fetch("/api/restore/images",{method:"POST",body:c})).ok)throw new Error("Image restore failed. Aborting DB restore.");Re.loading("Step 2/2: Restoring Database...",{id:l});const f=new FormData;if(f.append("backupFile",e),!(await fetch("/api/restore/database",{method:"POST",body:f})).ok)throw new Error("Database restore failed.");Re.success("Full System Restore Complete! Redirecting...",{id:l});try{await W0.signOut()}catch{}window.location.href="/auth"}catch(c){console.error(c),Re.error(c.message||"Restore Failed",{id:l})}finally{a(!1)}};return u.jsxs("form",{onSubmit:s,className:"bg-surface-container rounded-xl border border-outline/10 p-6",children:[u.jsx("h3",{className:"text-lg font-bold text-text-primary mb-2 text-center",children:"Full System Restore"}),u.jsx("p",{className:"text-text-secondary text-sm text-center mb-6",children:"Upload both files to restore the entire application state in one go."}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-text-secondary mb-2 flex items-center gap-2",children:[u.jsx(JA,{size:16})," Database File"]}),u.jsx("input",{type:"file",accept:".zip",onChange:o=>o.target.files&&t(o.target.files[0]),className:"w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border file:border-outline file:bg-surface-container-high file:text-text-primary hover:file:bg-primary-container/30 transition-colors cursor-pointer"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-text-secondary mb-2 flex items-center gap-2",children:[u.jsx(Jd,{size:16})," Images File"]}),u.jsx("input",{type:"file",accept:".zip",onChange:o=>o.target.files&&n(o.target.files[0]),className:"w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border file:border-outline file:bg-surface-container-high file:text-text-primary hover:file:bg-primary-container/30 transition-colors cursor-pointer"})]})]}),u.jsxs("button",{type:"submit",disabled:!e||!r||i,className:"w-full bg-error hover:bg-error-hover text-on-error font-bold py-3 px-6 rounded-full transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[u.jsx(Lx,{size:18}),i?"Restoring System...":"Restore Everything"]})]})},dWe=()=>u.jsxs("div",{className:"space-y-8",children:[u.jsxs("section",{className:"py-6 border-b border-outline/10 md:bg-surface-container-low md:p-8 md:rounded-2xl md:shadow-sm md:border md:border-outline/10 md:border-b-outline/10",children:[u.jsxs("h2",{className:"text-xl font-semibold text-text-primary mb-3 flex items-center gap-3",children:[u.jsx(dS,{className:"w-6 h-6 text-primary"}),"Create Backups"]}),u.jsx("p",{className:"text-text-secondary mb-6 text-sm",children:"Download ZIP archives of your critical data. Store these in a safe location."}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("a",{href:"/api/backup/database",download:!0,className:"flex flex-col items-center justify-center p-6 bg-surface-container-highest border border-outline/10 rounded-xl hover:border-primary/50 hover:bg-primary/5 transition-all group",children:[u.jsx(JA,{className:"w-8 h-8 text-primary group-hover:text-primary mb-3"}),u.jsx("span",{className:"font-bold text-text-primary",children:"Database Backup"}),u.jsx("span",{className:"text-xs text-text-secondary",children:"Customers, Projects, Settings"})]}),u.jsxs("a",{href:"/api/backup/images",download:!0,className:"flex flex-col items-center justify-center p-6 bg-surface-container-highest border border-outline/10 rounded-xl hover:border-primary/50 hover:bg-primary/5 transition-all group",children:[u.jsx(Jd,{className:"w-8 h-8 text-primary group-hover:text-primary mb-3"}),u.jsx("span",{className:"font-bold text-text-primary",children:"Image Library Backup"}),u.jsx("span",{className:"text-xs text-text-secondary",children:"Photos, Logos, Uploads"})]})]})]}),u.jsxs("section",{className:"py-6 md:bg-surface-container-low md:p-8 md:rounded-2xl md:shadow-sm md:border md:border-outline/10",children:[u.jsxs("h2",{className:"text-xl font-semibold text-text-primary mb-3 flex items-center gap-3",children:[u.jsx(Lx,{className:"w-6 h-6 text-primary"}),"System Recovery"]}),u.jsxs("div",{className:"bg-error/10 border border-error/20 rounded-xl p-4 mb-8 text-sm text-text-primary flex gap-3 items-start",children:[u.jsx("span",{className:"text-error font-bold",children:"Warning:"})," Restoring will permanently overwrite existing data. Ensure you have a recent backup before proceeding."]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsx("div",{children:u.jsx(DK,{title:"Database Only",icon:JA,endpoint:"/api/restore/database",warningMessage:"Overwrite current database? Current data will be lost."})}),u.jsx("div",{className:"lg:border-l lg:border-outline/10 lg:pl-8",children:u.jsx(DK,{title:"Images Only",icon:Jd,endpoint:"/api/restore/images",warningMessage:"Overwrite image library? New images may be lost."})})]}),u.jsx("div",{className:"border-t border-outline/10 my-8"}),u.jsx("div",{className:"max-w-2xl mx-auto",children:u.jsx(uWe,{})})]})]}),fWe=()=>{const{currentUser:e,saveCurrentUserPreferences:t,updateCurrentUserProfile:r,uploadCurrentUserAvatar:n,deleteCurrentUserAvatar:i}=Gr(),{isEnabled:a,enableBiometrics:s,disableBiometrics:o}=G8e(),[l,c]=I.useState("#ffffff"),[d,f]=I.useState(""),[p,m]=I.useState(""),[x,v]=I.useState(""),[b,w]=I.useState(""),[k,E]=I.useState(null),[N,P]=I.useState(!1);I.useEffect(()=>{var Z;(async()=>{try{const re=await fetch(rr("/api/preferences/calendar-token"),{credentials:"include"});if(re.ok){const X=await re.json();E(X.token)}}catch(re){console.error("Failed to fetch calendar token",re)}})(),(Z=e==null?void 0:e.preferences)!=null&&Z.calendarColor&&c(e.preferences.calendarColor),e&&(f(e.firstName||""),m(e.lastName||""))},[e]);const R=W=>{const Z=W.target.value;c(Z)},O=async()=>{if(!e)return;const W={...e.preferences,calendarColor:l};await t(W),qr.success("Color preference saved!")},D=async()=>{try{const W=await fetch(rr("/api/preferences/calendar-token"),{method:"POST",credentials:"include"});if(W.ok){const Z=await W.json();E(Z.token),qr.success("Calendar link generated!")}}catch{qr.error("Failed to generate link")}},L=()=>{const W=(e==null?void 0:e.id)||(e==null?void 0:e.userId);if(!e||!W||!k){qr.error("User ID not found. Please refresh.");return}const Z=rr("").replace(/\/$/,""),X=`${Z.startsWith("http")?Z:window.location.origin}/api/calendar/feed/${W}/${k}`;navigator.clipboard.writeText(X),P(!0),qr.success("Link copied to clipboard!"),setTimeout(()=>P(!1),2e3)},B=async()=>{await r(d,p)},z=async W=>{W.target.files&&W.target.files[0]&&await n(W.target.files[0])},H=async()=>{window.confirm("Remove your custom profile picture?")&&await i()},te=async()=>{if(!x||!b){qr.error("Please fill in both password fields.");return}try{await E6e(x,b),qr.success("Password changed successfully!"),v(""),w("")}catch(W){qr.error(W.message)}},Y=async()=>{a?window.confirm("Disable biometric security?")&&(o(),qr.success("Biometrics disabled")):await s()&&qr.success("Biometrics enabled!")};return u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-6",children:"My Settings"}),u.jsxs("div",{className:"space-y-6 max-w-md",children:[u.jsxs("div",{className:"flex flex-col items-center mb-6",children:[u.jsxs("div",{className:"relative w-28 h-28 mb-4",children:[e!=null&&e.avatarUrl?u.jsx("img",{src:e.avatarUrl,alt:"Profile",className:"w-full h-full rounded-full object-cover border-4 border-surface shadow-md"}):u.jsx("div",{className:"w-full h-full rounded-full bg-surface-container-highest flex items-center justify-center border-4 border-surface shadow-md text-3xl font-bold text-primary",children:d?`${d[0]}${p[0]||""}`.toUpperCase():e==null?void 0:e.email[0].toUpperCase()}),(e==null?void 0:e.avatarUrl)&&u.jsx("button",{onClick:H,className:"absolute top-0 right-0 bg-error-container text-error p-1.5 rounded-full shadow-sm hover:bg-error hover:text-white transition-colors z-10 border-2 border-surface",title:"Remove Picture",children:u.jsx(mo,{size:12})}),u.jsx("label",{htmlFor:"avatar-upload",className:"absolute bottom-0 right-0 bg-primary hover:bg-primary-hover text-on-primary p-2.5 rounded-full cursor-pointer shadow-lg transition-colors border-2 border-surface",children:u.jsx(vv,{size:18})}),u.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",className:"hidden",onChange:z})]}),u.jsx("p",{className:"text-xs text-text-secondary font-medium",children:"Click camera icon to change"})]}),u.jsxs("div",{className:"space-y-5",children:[u.jsx("h3",{className:"text-lg font-bold text-text-primary border-b border-outline/10 pb-2",children:"Profile Information"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"First Name"}),u.jsx("input",{type:"text",value:d,onChange:W=>f(W.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Last Name"}),u.jsx("input",{type:"text",value:p,onChange:W=>m(W.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors"})]})]}),u.jsxs("button",{onClick:B,className:"flex items-center gap-2 py-2 px-6 text-sm bg-primary hover:bg-primary-hover text-on-primary rounded-full font-semibold shadow-sm transition-all hover:shadow-md",children:[u.jsx(vs,{size:16})," Update Profile"]})]}),u.jsx("h3",{className:"text-lg font-bold text-text-primary border-b border-outline/10 pb-2 pt-6",children:"Security"}),u.jsxs("div",{className:"space-y-5",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Current Password"}),u.jsx("input",{type:"password",value:x,onChange:W=>v(W.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors",placeholder:"Required to verify identity"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"New Password"}),u.jsx("input",{type:"password",value:b,onChange:W=>w(W.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors",placeholder:"Minimum 8 characters"})]}),u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{onClick:te,className:"py-2 px-6 text-sm bg-surface-container-high border border-outline/20 text-text-primary hover:bg-surface-container-highest rounded-full font-medium transition-colors",children:"Change Password"})})]}),Xg.isNativePlatform()&&u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-lg font-bold text-text-primary border-b border-outline/10 pb-2 pt-6",children:"App Security"}),u.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface-container-low rounded-xl border border-outline/10",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-full ${a?"bg-success-container text-success":"bg-surface-container-highest text-text-secondary"}`,children:u.jsx(Z6,{size:24})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-text-primary",children:"Biometric Lock"}),u.jsx("p",{className:"text-xs text-text-secondary",children:"Require Face ID / Fingerprint after 5m inactivity"})]})]}),u.jsx("button",{onClick:Y,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${a?"bg-primary":"bg-surface-container-highest"}`,children:u.jsx("span",{className:`${a?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]})]}),u.jsx("h3",{className:"text-lg font-bold text-text-primary border-b border-outline/10 pb-2 pt-6",children:"Preferences"}),u.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface-container-low rounded-xl border border-outline/10",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(hoe,{className:"w-6 h-6 text-accent"}),u.jsx("label",{htmlFor:"userColor",className:"font-medium text-text-secondary",children:"My Calendar Color"})]}),u.jsx("div",{className:"relative w-10 h-10 rounded-full overflow-hidden border-2 border-surface shadow-sm ring-1 ring-outline/10 hover:ring-primary transition-all",children:u.jsx("input",{type:"color",id:"userColor",value:l,onChange:R,className:"absolute -top-4 -left-4 w-20 h-20 p-0 border-0 cursor-pointer"})})]}),u.jsx("div",{className:"flex justify-end",children:u.jsxs("button",{onClick:O,className:"flex items-center gap-2 py-2 px-6 text-sm bg-primary hover:bg-primary-hover text-on-primary rounded-full font-semibold shadow-sm transition-all hover:shadow-md",children:[u.jsx(vs,{size:16})," Save Calendar Color"]})}),u.jsx("h3",{className:"text-lg font-bold text-text-primary border-b border-outline/10 pb-2 pt-6",children:"Calendar Sync"}),u.jsxs("div",{className:"bg-surface-container-low rounded-xl border border-outline/10 p-5",children:[u.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[u.jsx("div",{className:"p-2 bg-primary-container rounded-lg text-primary",children:u.jsx(xu,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-text-primary",children:"Sync to Phone"}),u.jsx("p",{className:"text-sm text-text-secondary",children:"See your jobs and appointments in Google Calendar, Apple Calendar, or Outlook."})]})]}),k?u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:L,className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-surface-container-highest hover:bg-surface-container-high border border-transparent hover:border-outline/10 text-text-primary rounded-full font-medium transition-all",children:[N?u.jsx(ad,{size:16,className:"text-success"}):u.jsx(k7,{size:16}),N?"Copied!":"Copy Link"]}),u.jsx("button",{onClick:()=>{confirm("Resetting this link will disconnect all current devices. Continue?")&&D()},className:"px-3 py-2 bg-error-container hover:bg-error/20 text-error border border-transparent rounded-full transition-colors",title:"Reset Link",children:u.jsx(ZE,{size:16})})]}),u.jsx("p",{className:"text-xs text-text-tertiary",children:`Paste this link into your calendar app's "Subscribe by URL" or "Add Calendar from Internet" section.`})]}):u.jsx("button",{onClick:D,className:"w-full py-2 bg-primary hover:bg-primary-hover text-on-primary rounded-full font-bold transition-colors shadow-md",children:"Generate Sync Link"})]})]})]})},hWe=()=>{const[e,t]=I.useState([]),[r,n]=I.useState(!0),[i,a]=I.useState(null),[s,o]=I.useState(""),[l,c]=I.useState(""),d=I.useCallback(async()=>{try{n(!0);const b=await _le();t(b)}catch(b){Re.error("Could not load sample sizes."),console.error(b)}finally{n(!1)}},[]);I.useEffect(()=>{d()},[d]);const f=b=>{a(b),o(b)},p=()=>{a(null),o("")},m=async b=>{const w=s.trim();if(!w||b===w){p();return}try{await M9e(b,w),Re.success(`Size '${b}' updated to '${w}'.`),p(),await d()}catch(k){Re.error(`Update failed: ${k.message}`)}},x=async b=>{b.preventDefault();const w=l.trim();if(w)try{await Nle(w),Re.success(`Size '${w}' created.`),c(""),await d()}catch(k){Re.error(`Create failed: ${k.message}`)}},v=async b=>{const w=e.find(E=>E.value===b),k=w&&w.usageCount>0?`WARNING: This size is currently in use by ${w.usageCount} variants. Deletion will fail unless usage is 0.`:"";if(window.confirm(`Are you sure you want to delete the size "${b}" from the system? ${k}`))try{await F9e(b),Re.success(`Size '${b}' successfully deleted.`),await d()}catch(E){Re.error(`Delete failed: ${E.message}`)}};return r?u.jsxs("div",{className:"flex items-center justify-center p-8",children:[u.jsx(A4,{className:"animate-spin"})," ",u.jsx("span",{className:"ml-2",children:"Loading sizes..."})]}):u.jsxs("section",{className:"md:bg-surface-container-low md:p-8 md:rounded-2xl md:border md:border-outline/10 max-w-4xl mx-auto transition-all",children:[u.jsx("h2",{className:"text-2xl font-semibold text-text-primary mb-4",children:"Manage Sample Sizes"}),u.jsx("p",{className:"text-text-secondary mb-6 max-w-2xl",children:"Here you can clean up typos or remove unused sample sizes from the suggestion list."}),u.jsxs("form",{onSubmit:x,className:"flex gap-2 mb-6 max-w-md",children:[u.jsx("input",{type:"text",value:l,onChange:b=>c(b.target.value),placeholder:"Add new size (e.g. 24x48)",className:"flex-grow p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-lg text-text-primary placeholder-text-secondary focus:border-primary focus:outline-none transition-all"}),u.jsxs("button",{type:"submit",disabled:!l.trim(),className:"px-6 py-2 bg-primary text-on-primary rounded-full hover:bg-primary-hover disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors font-bold shadow-sm",children:[u.jsx(Zl,{size:18}),"Add"]})]}),u.jsxs("div",{className:"max-w-xl space-y-0 divide-y divide-outline/10 border border-outline/10 rounded-xl overflow-hidden",children:[e.map(b=>u.jsxs("div",{className:"bg-surface-container-highest/30 p-4 flex items-center justify-between group hover:bg-surface-container-highest/60 transition-colors",children:[i===b.value?u.jsx("input",{type:"text",value:s,onChange:w=>o(w.target.value),className:"flex-grow p-2 bg-surface-container-high border-b-2 border-primary text-text-primary focus:outline-none",autoFocus:!0}):u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("span",{className:"text-text-primary font-medium",children:b.value}),b.usageCount>0&&u.jsxs("span",{className:"text-xs px-2 py-0.5 bg-surface-container-high text-text-secondary rounded-full border border-outline/10",children:[b.usageCount," variant",b.usageCount!==1?"s":""]})]}),u.jsx("div",{className:"flex items-center gap-2 ml-4",children:i===b.value?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>m(b.value),className:"p-2 text-primary hover:bg-primary/10 rounded-full transition-colors",children:u.jsx(vs,{size:18})}),u.jsx("button",{onClick:p,className:"p-2 text-error hover:bg-error/10 rounded-full transition-colors",children:u.jsx(Zr,{size:18})})]}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>f(b.value),className:"p-2 text-text-secondary hover:text-primary hover:bg-primary/10 rounded-full transition-colors",children:u.jsx(Xh,{size:18})}),u.jsx("button",{onClick:()=>v(b.value),disabled:b.usageCount>0,title:b.usageCount>0?"Cannot delete size currently in use":"Delete size",className:`p-2 rounded-full transition-colors ${b.usageCount>0?"text-outline/40 cursor-not-allowed":"text-error/80 hover:text-error hover:bg-error/10"}`,children:u.jsx(mo,{size:18})})]})})]},b.value)),e.length===0&&!r&&u.jsx("p",{className:"text-text-secondary italic text-center py-4",children:"No custom sizes have been created yet."})]})]})},pWe=async e=>{try{return(await cr.post(rr("/api/reports/dashboard/send-test"),{settings:e})).data}catch(t){throw console.error("Error sending test dashboard email:",t),t}},mWe=async(e={})=>{try{return(await cr.get(rr("/api/report-generator/products"),{params:e})).data}catch(t){throw console.error("Error fetching product report:",t),t}},gWe=async(e={})=>{try{return(await cr.get(rr("/api/report-generator/jobs"),{params:e})).data}catch(t){throw console.error("Error fetching job report:",t),t}},xWe=async(e={})=>{try{return(await cr.get(rr("/api/report-generator/installers"),{params:e})).data}catch(t){throw console.error("Error fetching installer report:",t),t}},MK={isEnabled:!1,includeAllUpdates:!0,includePersonalAppointments:!0,personalAppointmentsDays:7,frequency:"daily",includeSamplesDue:!0,includeUpcomingJobs:!0,upcomingJobsDays:7,includePendingQuotes:!0,pendingQuotesDays:14},vWe=()=>{const{currentUser:e,saveCurrentUserPreferences:t,isDataLoading:r}=Gr(),[n,i]=I.useState(MK),[a,s]=I.useState(!0),[o,l]=I.useState(!0),[c,d]=I.useState(!1);I.useEffect(()=>{var x,v;if(!r&&e){const b=((x=e.preferences)==null?void 0:x.dashboardEmail)||{};i({...MK,...b}),s(((v=e.preferences)==null?void 0:v.notifyUpcomingJobs)!==!1),l(!1)}},[e,r]);const f=(x,v)=>{let b=v;x==="personalAppointmentsDays"&&(b=Math.max(1,parseInt(v,10)||1)),i(x==="includeAllUpdates"?w=>({...w,[x]:b,includeSamplesDue:b,includeUpcomingJobs:b,includePendingQuotes:b}):w=>({...w,[x]:b}))},p=async()=>{if(!e){qr.error("User not found.");return}const x={...e.preferences,dashboardEmail:n,notifyUpcomingJobs:a};await t(x)},m=async()=>{var x,v;d(!0),qr.loading("Sending test email...");try{await pWe(n),qr.dismiss(),qr.success(`Test email sent to ${e==null?void 0:e.email}!`)}catch(b){qr.dismiss();const w=((v=(x=b.response)==null?void 0:x.data)==null?void 0:v.error)||"An unknown error occurred.";qr.error(`Failed to send test: ${w}`)}finally{d(!1)}};return o?u.jsx("div",{className:"text-center p-8",children:"Loading settings..."}):u.jsxs("div",{className:"space-y-8 max-w-5xl mx-auto",children:[u.jsxs("section",{className:"md:bg-surface-container-low md:p-8 md:rounded-2xl md:border md:border-outline/10 transition-all",children:[u.jsxs("h2",{className:"text-2xl font-semibold text-text-primary mb-2 flex items-center gap-3",children:[u.jsx(uS,{className:"w-7 h-7 text-accent"}),"My Daily Update Email"]}),u.jsx("p",{className:"text-text-secondary mb-6",children:"Configure a daily summary email with system updates and your personal appointments. This email is sent only to you."}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between py-6 border-b border-outline/10 md:border md:bg-surface-container-highest md:rounded-xl md:p-6 md:border-outline/10",children:[u.jsx("label",{htmlFor:"isEnabled",className:"font-medium text-lg text-text-primary",children:"Receive Daily Update Email"}),u.jsxs("div",{className:"relative inline-block w-14 h-8 align-middle select-none transition duration-200 ease-in",children:[u.jsx("input",{type:"checkbox",id:"isEnabled",checked:n.isEnabled,onChange:x=>f("isEnabled",x.target.checked),className:"peer absolute block w-8 h-8 rounded-full bg-surface border-4 border-outline appearance-none cursor-pointer checked:right-0 checked:border-primary checked:bg-primary transition-all duration-200"}),u.jsx("label",{htmlFor:"isEnabled",className:"block overflow-hidden h-8 rounded-full bg-surface-container-highest border border-outline/20 cursor-pointer peer-checked:bg-primary/20 transition-colors"})]})]}),n.isEnabled&&u.jsx("div",{className:"space-y-6 pt-2",children:u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-medium text-text-primary mb-2",children:"Content to Include"}),u.jsxs("div",{className:"space-y-4 py-4 md:p-6 md:bg-surface-container-highest md:rounded-xl md:border md:border-outline/10",children:[u.jsxs("label",{className:"flex items-center gap-3",children:[u.jsx("input",{type:"checkbox",checked:n.includeAllUpdates,onChange:x=>f("includeAllUpdates",x.target.checked),className:"w-5 h-5 rounded border-outline/30 text-primary focus:ring-primary bg-surface-container-high"}),u.jsx("span",{className:"text-text-primary",children:"Include all system updates (samples, jobs, quotes, etc.)"})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("input",{type:"checkbox",id:"includePersonalAppointments",checked:n.includePersonalAppointments,onChange:x=>f("includePersonalAppointments",x.target.checked),className:"w-5 h-5 rounded border-outline/30 text-primary focus:ring-primary bg-surface-container-high"}),u.jsx("label",{htmlFor:"includePersonalAppointments",className:"text-text-primary",children:"Include my personal appointments for the next"}),u.jsx("input",{type:"number",value:n.personalAppointmentsDays,onChange:x=>f("personalAppointmentsDays",x.target.value),disabled:!n.includePersonalAppointments,className:"w-16 p-1 bg-surface-container-high border border-outline/20 rounded text-center text-text-primary disabled:opacity-50 focus:border-primary focus:outline-none"}),u.jsx("label",{htmlFor:"includePersonalAppointments",className:"text-text-primary",children:"days"})]})]})]})}),u.jsx("div",{className:"flex justify-end items-center gap-4 pt-4 mt-4 border-t border-outline/10",children:u.jsxs("button",{onClick:m,disabled:c,className:"flex items-center gap-2 py-2 px-6 text-sm bg-surface-container-highest hover:bg-surface-container-highest/80 rounded-full text-text-primary font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[u.jsx(sy,{size:18})," ",c?"Sending...":"Send Test"]})})]})]}),u.jsxs("section",{className:"md:bg-surface-container-low md:p-8 md:rounded-2xl md:border md:border-outline/10 transition-all",children:[u.jsxs("h2",{className:"text-xl font-semibold text-text-primary mb-2 flex items-center gap-3",children:[u.jsx(uS,{className:"w-6 h-6 text-accent"}),"Project Alerts"]}),u.jsxs("div",{className:"py-6 border-b border-outline/10 md:border md:bg-surface-container-highest md:rounded-xl md:p-6 md:border-outline/10 mt-4",children:[u.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:a,onChange:x=>s(x.target.checked),className:"w-5 h-5 rounded border-outline/30 text-primary focus:ring-primary bg-surface-container-high"}),u.jsx("span",{className:"text-text-primary font-medium",children:"Email me 2 days before my jobs start"})]}),u.jsx("p",{className:"text-xs text-text-secondary mt-2 ml-8",children:"If enabled, you will receive an individual email reminder for every project where you are assigned as the Project Lead."})]}),u.jsx("div",{className:"flex justify-end pt-8",children:u.jsxs("button",{onClick:p,className:"flex items-center gap-2 py-3 px-8 text-base bg-primary hover:bg-primary-hover rounded-full text-on-primary font-bold shadow-sm transition-all hover:shadow-md",children:[u.jsx(vs,{size:18})," Save My Settings"]})})]})]})},A_=()=>({withCredentials:!0,headers:{"Content-Type":"application/json"}}),B1={getAll:async()=>(await cr.get(rr("/api/email-templates"),A_())).data,getByKey:async e=>(await cr.get(rr(`/api/email-templates/${e}`),A_())).data,update:async(e,t)=>(await cr.put(rr(`/api/email-templates/${e}`),t,A_())).data,sendTest:async(e,t)=>{await cr.post(rr(`/api/email-templates/${e}/test`),{email:t},A_())}};var Xce={exports:{}},Yce={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dy=I;function yWe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bWe=typeof Object.is=="function"?Object.is:yWe,wWe=dy.useState,SWe=dy.useEffect,EWe=dy.useLayoutEffect,CWe=dy.useDebugValue;function kWe(e,t){var r=t(),n=wWe({inst:{value:r,getSnapshot:t}}),i=n[0].inst,a=n[1];return EWe(function(){i.value=r,i.getSnapshot=t,sD(i)&&a({inst:i})},[e,r,t]),SWe(function(){return sD(i)&&a({inst:i}),e(function(){sD(i)&&a({inst:i})})},[e]),CWe(r),r}function sD(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!bWe(e,r)}catch{return!0}}function _We(e,t){return t()}var NWe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_We:kWe;Yce.useSyncExternalStore=dy.useSyncExternalStore!==void 0?dy.useSyncExternalStore:NWe;Xce.exports=Yce;var E9=Xce.exports;function Ts(e){this.content=e}Ts.prototype={constructor:Ts,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,r){var n=r&&r!=e?this.remove(r):this,i=n.find(e),a=n.content.slice();return i==-1?a.push(r||e,t):(a[i+1]=t,r&&(a[i]=r)),new Ts(a)},remove:function(e){var t=this.find(e);if(t==-1)return this;var r=this.content.slice();return r.splice(t,2),new Ts(r)},addToStart:function(e,t){return new Ts([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var r=this.remove(e).content.slice();return r.push(e,t),new Ts(r)},addBefore:function(e,t,r){var n=this.remove(t),i=n.content.slice(),a=n.find(e);return i.splice(a==-1?i.length:a,0,t,r),new Ts(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=Ts.from(e),e.size?new Ts(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=Ts.from(e),e.size?new Ts(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Ts.from(e);for(var r=0;r<e.content.length;r+=2)t=t.remove(e.content[r]);return t},toObject:function(){var e={};return this.forEach(function(t,r){e[t]=r}),e},get size(){return this.content.length>>1}};Ts.from=function(e){if(e instanceof Ts)return e;var t=[];if(e)for(var r in e)t.push(r,e[r]);return new Ts(t)};function Qce(e,t,r){for(let n=0;;n++){if(n==e.childCount||n==t.childCount)return e.childCount==t.childCount?null:r;let i=e.child(n),a=t.child(n);if(i==a){r+=i.nodeSize;continue}if(!i.sameMarkup(a))return r;if(i.isText&&i.text!=a.text){for(let s=0;i.text[s]==a.text[s];s++)r++;return r}if(i.content.size||a.content.size){let s=Qce(i.content,a.content,r+1);if(s!=null)return s}r+=i.nodeSize}}function Jce(e,t,r,n){for(let i=e.childCount,a=t.childCount;;){if(i==0||a==0)return i==a?null:{a:r,b:n};let s=e.child(--i),o=t.child(--a),l=s.nodeSize;if(s==o){r-=l,n-=l;continue}if(!s.sameMarkup(o))return{a:r,b:n};if(s.isText&&s.text!=o.text){let c=0,d=Math.min(s.text.length,o.text.length);for(;c<d&&s.text[s.text.length-c-1]==o.text[o.text.length-c-1];)c++,r--,n--;return{a:r,b:n}}if(s.content.size||o.content.size){let c=Jce(s.content,o.content,r-1,n-1);if(c)return c}r-=l,n-=l}}class It{constructor(t,r){if(this.content=t,this.size=r||0,r==null)for(let n=0;n<t.length;n++)this.size+=t[n].nodeSize}nodesBetween(t,r,n,i=0,a){for(let s=0,o=0;o<r;s++){let l=this.content[s],c=o+l.nodeSize;if(c>t&&n(l,i+o,a||null,s)!==!1&&l.content.size){let d=o+1;l.nodesBetween(Math.max(0,t-d),Math.min(l.content.size,r-d),n,i+d)}o=c}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,r,n,i){let a="",s=!0;return this.nodesBetween(t,r,(o,l)=>{let c=o.isText?o.text.slice(Math.max(t,l)-l,r-l):o.isLeaf?i?typeof i=="function"?i(o):i:o.type.spec.leafText?o.type.spec.leafText(o):"":"";o.isBlock&&(o.isLeaf&&c||o.isTextblock)&&n&&(s?s=!1:a+=n),a+=c},0),a}append(t){if(!t.size)return this;if(!this.size)return t;let r=this.lastChild,n=t.firstChild,i=this.content.slice(),a=0;for(r.isText&&r.sameMarkup(n)&&(i[i.length-1]=r.withText(r.text+n.text),a=1);a<t.content.length;a++)i.push(t.content[a]);return new It(i,this.size+t.size)}cut(t,r=this.size){if(t==0&&r==this.size)return this;let n=[],i=0;if(r>t)for(let a=0,s=0;s<r;a++){let o=this.content[a],l=s+o.nodeSize;l>t&&((s<t||l>r)&&(o.isText?o=o.cut(Math.max(0,t-s),Math.min(o.text.length,r-s)):o=o.cut(Math.max(0,t-s-1),Math.min(o.content.size,r-s-1))),n.push(o),i+=o.nodeSize),s=l}return new It(n,i)}cutByIndex(t,r){return t==r?It.empty:t==0&&r==this.content.length?this:new It(this.content.slice(t,r))}replaceChild(t,r){let n=this.content[t];if(n==r)return this;let i=this.content.slice(),a=this.size+r.nodeSize-n.nodeSize;return i[t]=r,new It(i,a)}addToStart(t){return new It([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new It(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(t.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let r=this.content[t];if(!r)throw new RangeError("Index "+t+" out of range for "+this);return r}maybeChild(t){return this.content[t]||null}forEach(t){for(let r=0,n=0;r<this.content.length;r++){let i=this.content[r];t(i,n,r),n+=i.nodeSize}}findDiffStart(t,r=0){return Qce(this,t,r)}findDiffEnd(t,r=this.size,n=t.size){return Jce(this,t,r,n)}findIndex(t){if(t==0)return T_(0,t);if(t==this.size)return T_(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let r=0,n=0;;r++){let i=this.child(r),a=n+i.nodeSize;if(a>=t)return a==t?T_(r+1,a):T_(r,n);n=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,r){if(!r)return It.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new It(r.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return It.empty;let r,n=0;for(let i=0;i<t.length;i++){let a=t[i];n+=a.nodeSize,i&&a.isText&&t[i-1].sameMarkup(a)?(r||(r=t.slice(0,i)),r[r.length-1]=a.withText(r[r.length-1].text+a.text)):r&&r.push(a)}return new It(r||t,n)}static from(t){if(!t)return It.empty;if(t instanceof It)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new It([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}It.empty=new It([],0);const oD={index:0,offset:0};function T_(e,t){return oD.index=e,oD.offset=t,oD}function ST(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let r=Array.isArray(e);if(Array.isArray(t)!=r)return!1;if(r){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!ST(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!ST(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}let ci=class I8{constructor(t,r){this.type=t,this.attrs=r}addToSet(t){let r,n=!1;for(let i=0;i<t.length;i++){let a=t[i];if(this.eq(a))return t;if(this.type.excludes(a.type))r||(r=t.slice(0,i));else{if(a.type.excludes(this.type))return t;!n&&a.type.rank>this.type.rank&&(r||(r=t.slice(0,i)),r.push(this),n=!0),r&&r.push(a)}}return r||(r=t.slice()),n||r.push(this),r}removeFromSet(t){for(let r=0;r<t.length;r++)if(this.eq(t[r]))return t.slice(0,r).concat(t.slice(r+1));return t}isInSet(t){for(let r=0;r<t.length;r++)if(this.eq(t[r]))return!0;return!1}eq(t){return this==t||this.type==t.type&&ST(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let r in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let n=t.marks[r.type];if(!n)throw new RangeError(`There is no mark type ${r.type} in this schema`);let i=n.create(r.attrs);return n.checkAttrs(i.attrs),i}static sameSet(t,r){if(t==r)return!0;if(t.length!=r.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].eq(r[n]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return I8.none;if(t instanceof I8)return[t];let r=t.slice();return r.sort((n,i)=>n.type.rank-i.type.rank),r}};ci.none=[];class ET extends Error{}class Vt{constructor(t,r,n){this.content=t,this.openStart=r,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,r){let n=eue(this.content,t+this.openStart,r);return n&&new Vt(n,this.openStart,this.openEnd)}removeBetween(t,r){return new Vt(Zce(this.content,t+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,r){if(!r)return Vt.empty;let n=r.openStart||0,i=r.openEnd||0;if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Vt(It.fromJSON(t,r.content),n,i)}static maxOpen(t,r=!0){let n=0,i=0;for(let a=t.firstChild;a&&!a.isLeaf&&(r||!a.type.spec.isolating);a=a.firstChild)n++;for(let a=t.lastChild;a&&!a.isLeaf&&(r||!a.type.spec.isolating);a=a.lastChild)i++;return new Vt(t,n,i)}}Vt.empty=new Vt(It.empty,0,0);function Zce(e,t,r){let{index:n,offset:i}=e.findIndex(t),a=e.maybeChild(n),{index:s,offset:o}=e.findIndex(r);if(i==t||a.isText){if(o!=r&&!e.child(s).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(r))}if(n!=s)throw new RangeError("Removing non-flat range");return e.replaceChild(n,a.copy(Zce(a.content,t-i-1,r-i-1)))}function eue(e,t,r,n){let{index:i,offset:a}=e.findIndex(t),s=e.maybeChild(i);if(a==t||s.isText)return n&&!n.canReplace(i,i,r)?null:e.cut(0,t).append(r).append(e.cut(t));let o=eue(s.content,t-a-1,r,s);return o&&e.replaceChild(i,s.copy(o))}function AWe(e,t,r){if(r.openStart>e.depth)throw new ET("Inserted content deeper than insertion position");if(e.depth-r.openStart!=t.depth-r.openEnd)throw new ET("Inconsistent open depths");return tue(e,t,r,0)}function tue(e,t,r,n){let i=e.index(n),a=e.node(n);if(i==t.index(n)&&n<e.depth-r.openStart){let s=tue(e,t,r,n+1);return a.copy(a.content.replaceChild(i,s))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&e.depth==n&&t.depth==n){let s=e.parent,o=s.content;return kg(s,o.cut(0,e.parentOffset).append(r.content).append(o.cut(t.parentOffset)))}else{let{start:s,end:o}=TWe(r,e);return kg(a,nue(e,s,o,t,n))}else return kg(a,CT(e,t,n))}function rue(e,t){if(!t.type.compatibleContent(e.type))throw new ET("Cannot join "+t.type.name+" onto "+e.type.name)}function O8(e,t,r){let n=e.node(r);return rue(n,t.node(r)),n}function Cg(e,t){let r=t.length-1;r>=0&&e.isText&&e.sameMarkup(t[r])?t[r]=e.withText(t[r].text+e.text):t.push(e)}function v2(e,t,r,n){let i=(t||e).node(r),a=0,s=t?t.index(r):i.childCount;e&&(a=e.index(r),e.depth>r?a++:e.textOffset&&(Cg(e.nodeAfter,n),a++));for(let o=a;o<s;o++)Cg(i.child(o),n);t&&t.depth==r&&t.textOffset&&Cg(t.nodeBefore,n)}function kg(e,t){return e.type.checkContent(t),e.copy(t)}function nue(e,t,r,n,i){let a=e.depth>i&&O8(e,t,i+1),s=n.depth>i&&O8(r,n,i+1),o=[];return v2(null,e,i,o),a&&s&&t.index(i)==r.index(i)?(rue(a,s),Cg(kg(a,nue(e,t,r,n,i+1)),o)):(a&&Cg(kg(a,CT(e,t,i+1)),o),v2(t,r,i,o),s&&Cg(kg(s,CT(r,n,i+1)),o)),v2(n,null,i,o),new It(o)}function CT(e,t,r){let n=[];if(v2(null,e,r,n),e.depth>r){let i=O8(e,t,r+1);Cg(kg(i,CT(e,t,r+1)),n)}return v2(t,null,r,n),new It(n)}function TWe(e,t){let r=t.depth-e.openStart,i=t.node(r).copy(e.content);for(let a=r-1;a>=0;a--)i=t.node(a).copy(It.from(i));return{start:i.resolveNoCache(e.openStart+r),end:i.resolveNoCache(i.content.size-e.openEnd-r)}}class vS{constructor(t,r,n){this.pos=t,this.path=r,this.parentOffset=n,this.depth=r.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,r=this.index(this.depth);if(r==t.childCount)return null;let n=this.pos-this.path[this.path.length-1],i=t.child(r);return n?t.child(r).cut(n):i}get nodeBefore(){let t=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(t).cut(0,r):t==0?null:this.parent.child(t-1)}posAtIndex(t,r){r=this.resolveDepth(r);let n=this.path[r*3],i=r==0?0:this.path[r*3-1]+1;for(let a=0;a<t;a++)i+=n.child(a).nodeSize;return i}marks(){let t=this.parent,r=this.index();if(t.content.size==0)return ci.none;if(this.textOffset)return t.child(r).marks;let n=t.maybeChild(r-1),i=t.maybeChild(r);if(!n){let o=n;n=i,i=o}let a=n.marks;for(var s=0;s<a.length;s++)a[s].type.spec.inclusive===!1&&(!i||!a[s].isInSet(i.marks))&&(a=a[s--].removeFromSet(a));return a}marksAcross(t){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let n=r.marks,i=t.parent.maybeChild(t.index());for(var a=0;a<n.length;a++)n[a].type.spec.inclusive===!1&&(!i||!n[a].isInSet(i.marks))&&(n=n[a--].removeFromSet(n));return n}sharedDepth(t){for(let r=this.depth;r>0;r--)if(this.start(r)<=t&&this.end(r)>=t)return r;return 0}blockRange(t=this,r){if(t.pos<this.pos)return t.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!r||r(this.node(n))))return new kT(this,t,n);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let r=1;r<=this.depth;r++)t+=(t?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return t+":"+this.parentOffset}static resolve(t,r){if(!(r>=0&&r<=t.content.size))throw new RangeError("Position "+r+" out of range");let n=[],i=0,a=r;for(let s=t;;){let{index:o,offset:l}=s.content.findIndex(a),c=a-l;if(n.push(s,o,i+l),!c||(s=s.child(o),s.isText))break;a=c-1,i+=l+1}return new vS(r,n,a)}static resolveCached(t,r){let n=FK.get(t);if(n)for(let a=0;a<n.elts.length;a++){let s=n.elts[a];if(s.pos==r)return s}else FK.set(t,n=new IWe);let i=n.elts[n.i]=vS.resolve(t,r);return n.i=(n.i+1)%OWe,i}}class IWe{constructor(){this.elts=[],this.i=0}}const OWe=12,FK=new WeakMap;class kT{constructor(t,r,n){this.$from=t,this.$to=r,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const PWe=Object.create(null);let vh=class P8{constructor(t,r,n,i=ci.none){this.type=t,this.attrs=r,this.marks=i,this.content=n||It.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,r,n,i=0){this.content.nodesBetween(t,r,n,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,r,n,i){return this.content.textBetween(t,r,n,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,r,n){return this.type==t&&ST(this.attrs,r||t.defaultAttrs||PWe)&&ci.sameSet(this.marks,n||ci.none)}copy(t=null){return t==this.content?this:new P8(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new P8(this.type,this.attrs,this.content,t)}cut(t,r=this.content.size){return t==0&&r==this.content.size?this:this.copy(this.content.cut(t,r))}slice(t,r=this.content.size,n=!1){if(t==r)return Vt.empty;let i=this.resolve(t),a=this.resolve(r),s=n?0:i.sharedDepth(r),o=i.start(s),c=i.node(s).content.cut(i.pos-o,a.pos-o);return new Vt(c,i.depth-s,a.depth-s)}replace(t,r,n){return AWe(this.resolve(t),this.resolve(r),n)}nodeAt(t){for(let r=this;;){let{index:n,offset:i}=r.content.findIndex(t);if(r=r.maybeChild(n),!r)return null;if(i==t||r.isText)return r;t-=i+1}}childAfter(t){let{index:r,offset:n}=this.content.findIndex(t);return{node:this.content.maybeChild(r),index:r,offset:n}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:r,offset:n}=this.content.findIndex(t);if(n<t)return{node:this.content.child(r),index:r,offset:n};let i=this.content.child(r-1);return{node:i,index:r-1,offset:n-i.nodeSize}}resolve(t){return vS.resolveCached(this,t)}resolveNoCache(t){return vS.resolve(this,t)}rangeHasMark(t,r,n){let i=!1;return r>t&&this.nodesBetween(t,r,a=>(n.isInSet(a.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),iue(this.marks,t)}contentMatchAt(t){let r=this.type.contentMatch.matchFragment(this.content,0,t);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(t,r,n=It.empty,i=0,a=n.childCount){let s=this.contentMatchAt(t).matchFragment(n,i,a),o=s&&s.matchFragment(this.content,r);if(!o||!o.validEnd)return!1;for(let l=i;l<a;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0}canReplaceWith(t,r,n,i){if(i&&!this.type.allowsMarks(i))return!1;let a=this.contentMatchAt(t).matchType(n),s=a&&a.matchFragment(this.content,r);return s?s.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=ci.none;for(let r=0;r<this.marks.length;r++){let n=this.marks[r];n.type.checkAttrs(n.attrs),t=n.addToSet(t)}if(!ci.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let t={type:this.type.name};for(let r in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(r=>r.toJSON())),t}static fromJSON(t,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let n;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=r.marks.map(t.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(r.text,n)}let i=It.fromJSON(t,r.content),a=t.nodeType(r.type).create(r.attrs,i,n);return a.type.checkAttrs(a.attrs),a}};vh.prototype.text=void 0;class _T extends vh{constructor(t,r,n,i){if(super(t,r,null,i),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):iue(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,r){return this.text.slice(t,r)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new _T(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new _T(this.type,this.attrs,t,this.marks)}cut(t=0,r=this.text.length){return t==0&&r==this.text.length?this:this.withText(this.text.slice(t,r))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function iue(e,t){for(let r=e.length-1;r>=0;r--)t=e[r].type.name+"("+t+")";return t}class rx{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,r){let n=new RWe(t,r);if(n.next==null)return rx.empty;let i=aue(n);n.next&&n.err("Unexpected trailing text");let a=UWe(BWe(i));return $We(a,n),a}matchType(t){for(let r=0;r<this.next.length;r++)if(this.next[r].type==t)return this.next[r].next;return null}matchFragment(t,r=0,n=t.childCount){let i=this;for(let a=r;i&&a<n;a++)i=i.matchType(t.child(a).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:r}=this.next[t];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(t){for(let r=0;r<this.next.length;r++)for(let n=0;n<t.next.length;n++)if(this.next[r].type==t.next[n].type)return!0;return!1}fillBefore(t,r=!1,n=0){let i=[this];function a(s,o){let l=s.matchFragment(t,n);if(l&&(!r||l.validEnd))return It.from(o.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:d,next:f}=s.next[c];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let p=a(f,o.concat(d));if(p)return p}}return null}return a(this,[])}findWrapping(t){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==t)return this.wrapCache[n+1];let r=this.computeWrapping(t);return this.wrapCache.push(t,r),r}computeWrapping(t){let r=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let i=n.shift(),a=i.match;if(a.matchType(t)){let s=[];for(let o=i;o.type;o=o.via)s.push(o.type);return s.reverse()}for(let s=0;s<a.next.length;s++){let{type:o,next:l}=a.next[s];!o.isLeaf&&!o.hasRequiredAttrs()&&!(o.name in r)&&(!i.type||l.validEnd)&&(n.push({match:o.contentMatch,type:o,via:i}),r[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function r(n){t.push(n);for(let i=0;i<n.next.length;i++)t.indexOf(n.next[i].next)==-1&&r(n.next[i].next)}return r(this),t.map((n,i)=>{let a=i+(n.validEnd?"*":" ")+" ";for(let s=0;s<n.next.length;s++)a+=(s?", ":"")+n.next[s].type.name+"->"+t.indexOf(n.next[s].next);return a}).join(`
`)}}rx.empty=new rx(!0);class RWe{constructor(t,r){this.string=t,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function aue(e){let t=[];do t.push(jWe(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function jWe(e){let t=[];do t.push(DWe(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function DWe(e){let t=LWe(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=MWe(e,t);else break;return t}function LK(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function MWe(e,t){let r=LK(e),n=r;return e.eat(",")&&(e.next!="}"?n=LK(e):n=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:t}}function FWe(e,t){let r=e.nodeTypes,n=r[t];if(n)return[n];let i=[];for(let a in r){let s=r[a];s.isInGroup(t)&&i.push(s)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function LWe(e){if(e.eat("(")){let t=aue(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=FWe(e,e.next).map(r=>(e.inline==null?e.inline=r.isInline:e.inline!=r.isInline&&e.err("Mixing inline and block content"),{type:"name",value:r}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function BWe(e){let t=[[]];return i(a(e,0),r()),t;function r(){return t.push([])-1}function n(s,o,l){let c={term:l,to:o};return t[s].push(c),c}function i(s,o){s.forEach(l=>l.to=o)}function a(s,o){if(s.type=="choice")return s.exprs.reduce((l,c)=>l.concat(a(c,o)),[]);if(s.type=="seq")for(let l=0;;l++){let c=a(s.exprs[l],o);if(l==s.exprs.length-1)return c;i(c,o=r())}else if(s.type=="star"){let l=r();return n(o,l),i(a(s.expr,l),l),[n(l)]}else if(s.type=="plus"){let l=r();return i(a(s.expr,o),l),i(a(s.expr,l),l),[n(l)]}else{if(s.type=="opt")return[n(o)].concat(a(s.expr,o));if(s.type=="range"){let l=o;for(let c=0;c<s.min;c++){let d=r();i(a(s.expr,l),d),l=d}if(s.max==-1)i(a(s.expr,l),l);else for(let c=s.min;c<s.max;c++){let d=r();n(l,d),i(a(s.expr,l),d),l=d}return[n(l)]}else{if(s.type=="name")return[n(o,void 0,s.value)];throw new Error("Unknown expr type")}}}}function sue(e,t){return t-e}function BK(e,t){let r=[];return n(t),r.sort(sue);function n(i){let a=e[i];if(a.length==1&&!a[0].term)return n(a[0].to);r.push(i);for(let s=0;s<a.length;s++){let{term:o,to:l}=a[s];!o&&r.indexOf(l)==-1&&n(l)}}}function UWe(e){let t=Object.create(null);return r(BK(e,0));function r(n){let i=[];n.forEach(s=>{e[s].forEach(({term:o,to:l})=>{if(!o)return;let c;for(let d=0;d<i.length;d++)i[d][0]==o&&(c=i[d][1]);BK(e,l).forEach(d=>{c||i.push([o,c=[]]),c.indexOf(d)==-1&&c.push(d)})})});let a=t[n.join(",")]=new rx(n.indexOf(e.length-1)>-1);for(let s=0;s<i.length;s++){let o=i[s][1].sort(sue);a.next.push({type:i[s][0],next:t[o.join(",")]||r(o)})}return a}}function $We(e,t){for(let r=0,n=[e];r<n.length;r++){let i=n[r],a=!i.validEnd,s=[];for(let o=0;o<i.next.length;o++){let{type:l,next:c}=i.next[o];s.push(l.name),a&&!(l.isText||l.hasRequiredAttrs())&&(a=!1),n.indexOf(c)==-1&&n.push(c)}a&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function oue(e){let t=Object.create(null);for(let r in e){let n=e[r];if(!n.hasDefault)return null;t[r]=n.default}return t}function lue(e,t){let r=Object.create(null);for(let n in e){let i=t&&t[n];if(i===void 0){let a=e[n];if(a.hasDefault)i=a.default;else throw new RangeError("No value supplied for attribute "+n)}r[n]=i}return r}function cue(e,t,r,n){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${r} of type ${i}`);for(let i in e){let a=e[i];a.validate&&a.validate(t[i])}}function uue(e,t){let r=Object.create(null);if(t)for(let n in t)r[n]=new HWe(e,n,t[n]);return r}let UK=class due{constructor(t,r,n){this.name=t,this.schema=r,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=uue(t,n.attrs),this.defaultAttrs=oue(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==rx.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:lue(this.attrs,t)}create(t=null,r,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new vh(this,this.computeAttrs(t),It.from(r),ci.setFrom(n))}createChecked(t=null,r,n){return r=It.from(r),this.checkContent(r),new vh(this,this.computeAttrs(t),r,ci.setFrom(n))}createAndFill(t=null,r,n){if(t=this.computeAttrs(t),r=It.from(r),r.size){let s=this.contentMatch.fillBefore(r);if(!s)return null;r=s.append(r)}let i=this.contentMatch.matchFragment(r),a=i&&i.fillBefore(It.empty,!0);return a?new vh(this,t,r.append(a),ci.setFrom(n)):null}validContent(t){let r=this.contentMatch.matchFragment(t);if(!r||!r.validEnd)return!1;for(let n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){cue(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let r=0;r<t.length;r++)if(!this.allowsMarkType(t[r].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let r;for(let n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?r&&r.push(t[n]):r||(r=t.slice(0,n));return r?r.length?r:ci.none:t}static compile(t,r){let n=Object.create(null);t.forEach((a,s)=>n[a]=new due(a,r,s));let i=r.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let a in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function zWe(e,t,r){let n=r.split("|");return i=>{let a=i===null?"null":typeof i;if(n.indexOf(a)<0)throw new RangeError(`Expected value of type ${n} for attribute ${t} on type ${e}, got ${a}`)}}class HWe{constructor(t,r,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?zWe(t,r,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class s3{constructor(t,r,n,i){this.name=t,this.rank=r,this.schema=n,this.spec=i,this.attrs=uue(t,i.attrs),this.excluded=null;let a=oue(this.attrs);this.instance=a?new ci(this,a):null}create(t=null){return!t&&this.instance?this.instance:new ci(this,lue(this.attrs,t))}static compile(t,r){let n=Object.create(null),i=0;return t.forEach((a,s)=>n[a]=new s3(a,i++,r,s)),n}removeFromSet(t){for(var r=0;r<t.length;r++)t[r].type==this&&(t=t.slice(0,r).concat(t.slice(r+1)),r--);return t}isInSet(t){for(let r=0;r<t.length;r++)if(t[r].type==this)return t[r]}checkAttrs(t){cue(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class fue{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let i in t)r[i]=t[i];r.nodes=Ts.from(t.nodes),r.marks=Ts.from(t.marks||{}),this.nodes=UK.compile(this.spec.nodes,this),this.marks=s3.compile(this.spec.marks,this);let n=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let a=this.nodes[i],s=a.spec.content||"",o=a.spec.marks;if(a.contentMatch=n[s]||(n[s]=rx.parse(s,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet=o=="_"?null:o?$K(this,o.split(" ")):o==""||!a.inlineContent?[]:null}for(let i in this.marks){let a=this.marks[i],s=a.spec.excludes;a.excluded=s==null?[a]:s==""?[]:$K(this,s.split(" "))}this.nodeFromJSON=i=>vh.fromJSON(this,i),this.markFromJSON=i=>ci.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,r=null,n,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof UK){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(r,n,i)}text(t,r){let n=this.nodes.text;return new _T(n,n.defaultAttrs,t,ci.setFrom(r))}mark(t,r){return typeof t=="string"&&(t=this.marks[t]),t.create(r)}nodeType(t){let r=this.nodes[t];if(!r)throw new RangeError("Unknown node type: "+t);return r}}function $K(e,t){let r=[];for(let n=0;n<t.length;n++){let i=t[n],a=e.marks[i],s=a;if(a)r.push(a);else for(let o in e.marks){let l=e.marks[o];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&r.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[n]+"'")}return r}function WWe(e){return e.tag!=null}function VWe(e){return e.style!=null}let y2=class R8{constructor(t,r){this.schema=t,this.rules=r,this.tags=[],this.styles=[];let n=this.matchedStyles=[];r.forEach(i=>{if(WWe(i))this.tags.push(i);else if(VWe(i)){let a=/[^=]*/.exec(i.style)[0];n.indexOf(a)<0&&n.push(a),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let a=t.nodes[i.node];return a.contentMatch.matchType(a)})}parse(t,r={}){let n=new HK(this,r,!1);return n.addAll(t,ci.none,r.from,r.to),n.finish()}parseSlice(t,r={}){let n=new HK(this,r,!0);return n.addAll(t,ci.none,r.from,r.to),Vt.maxOpen(n.finish())}matchTag(t,r,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let a=this.tags[i];if(KWe(t,a.tag)&&(a.namespace===void 0||t.namespaceURI==a.namespace)&&(!a.context||r.matchesContext(a.context))){if(a.getAttrs){let s=a.getAttrs(t);if(s===!1)continue;a.attrs=s||void 0}return a}}}matchStyle(t,r,n,i){for(let a=i?this.styles.indexOf(i)+1:0;a<this.styles.length;a++){let s=this.styles[a],o=s.style;if(!(o.indexOf(t)!=0||s.context&&!n.matchesContext(s.context)||o.length>t.length&&(o.charCodeAt(t.length)!=61||o.slice(t.length+1)!=r))){if(s.getAttrs){let l=s.getAttrs(r);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(t){let r=[];function n(i){let a=i.priority==null?50:i.priority,s=0;for(;s<r.length;s++){let o=r[s];if((o.priority==null?50:o.priority)<a)break}r.splice(s,0,i)}for(let i in t.marks){let a=t.marks[i].spec.parseDOM;a&&a.forEach(s=>{n(s=WK(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in t.nodes){let a=t.nodes[i].spec.parseDOM;a&&a.forEach(s=>{n(s=WK(s)),s.node||s.ignore||s.mark||(s.node=i)})}return r}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new R8(t,R8.schemaRules(t)))}};const hue={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},qWe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},pue={ol:!0,ul:!0},yS=1,j8=2,b2=4;function zK(e,t,r){return t!=null?(t?yS:0)|(t==="full"?j8:0):e&&e.whitespace=="pre"?yS|j8:r&~b2}class I_{constructor(t,r,n,i,a,s){this.type=t,this.attrs=r,this.marks=n,this.solid=i,this.options=s,this.content=[],this.activeMarks=ci.none,this.match=a||(s&b2?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(It.from(t));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let n=this.type.contentMatch,i;return(i=n.findWrapping(t.type))?(this.match=n,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&yS)){let n=this.content[this.content.length-1],i;if(n&&n.isText&&(i=/[ \t\r\n\u000c]+$/.exec(n.text))){let a=n;n.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=a.withText(a.text.slice(0,a.text.length-i[0].length))}}let r=It.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(It.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!hue.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class HK{constructor(t,r,n){this.parser=t,this.options=r,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let i=r.topNode,a,s=zK(null,r.preserveWhitespace,0)|(n?b2:0);i?a=new I_(i.type,i.attrs,ci.none,!0,r.topMatch||i.type.contentMatch,s):n?a=new I_(null,null,ci.none,!0,null,s):a=new I_(t.schema.topNodeType,null,ci.none,!0,null,s),this.nodes=[a],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,r){t.nodeType==3?this.addTextNode(t,r):t.nodeType==1&&this.addElement(t,r)}addTextNode(t,r){let n=t.nodeValue,i=this.top,a=i.options&j8?"full":this.localPreserveWS||(i.options&yS)>0,{schema:s}=this.parser;if(a==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(n)){if(a)if(a==="full")n=n.replace(/\r\n?/g,`
`);else if(s.linebreakReplacement&&/[\r\n]/.test(n)&&this.top.findWrapping(s.linebreakReplacement.create())){let o=n.split(/\r?\n|\r/);for(let l=0;l<o.length;l++)l&&this.insertNode(s.linebreakReplacement.create(),r,!0),o[l]&&this.insertNode(s.text(o[l]),r,!/\S/.test(o[l]));n=""}else n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],l=t.previousSibling;(!o||l&&l.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(n=n.slice(1))}n&&this.insertNode(s.text(n),r,!/\S/.test(n)),this.findInText(t)}else this.findInside(t)}addElement(t,r,n){let i=this.localPreserveWS,a=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let s=t.nodeName.toLowerCase(),o;pue.hasOwnProperty(s)&&this.parser.normalizeLists&&GWe(t);let l=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(o=this.parser.matchTag(t,this,n));e:if(l?l.ignore:qWe.hasOwnProperty(s))this.findInside(t),this.ignoreFallback(t,r);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(t=l.skip);let c,d=this.needsBlock;if(hue.hasOwnProperty(s))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),c=!0,a.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,r);break e}let f=l&&l.skip?r:this.readStyles(t,r);f&&this.addAll(t,f),c&&this.sync(a),this.needsBlock=d}else{let c=this.readStyles(t,r);c&&this.addElementByRule(t,l,c,l.consuming===!1?o:void 0)}this.localPreserveWS=i}leafFallback(t,r){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),r)}ignoreFallback(t,r){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(t,r){let n=t.style;if(n&&n.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let a=this.parser.matchedStyles[i],s=n.getPropertyValue(a);if(s)for(let o=void 0;;){let l=this.parser.matchStyle(a,s,this,o);if(!l)break;if(l.ignore)return null;if(l.clearMark?r=r.filter(c=>!l.clearMark(c)):r=r.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)o=l;else break}}return r}addElementByRule(t,r,n,i){let a,s;if(r.node)if(s=this.parser.schema.nodes[r.node],s.isLeaf)this.insertNode(s.create(r.attrs),n,t.nodeName=="BR")||this.leafFallback(t,n);else{let l=this.enter(s,r.attrs||null,n,r.preserveWhitespace);l&&(a=!0,n=l)}else{let l=this.parser.schema.marks[r.mark];n=n.concat(l.create(r.attrs))}let o=this.top;if(s&&s.isLeaf)this.findInside(t);else if(i)this.addElement(t,n,i);else if(r.getContent)this.findInside(t),r.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l,n,!1));else{let l=t;typeof r.contentElement=="string"?l=t.querySelector(r.contentElement):typeof r.contentElement=="function"?l=r.contentElement(t):r.contentElement&&(l=r.contentElement),this.findAround(t,l,!0),this.addAll(l,n),this.findAround(t,l,!1)}a&&this.sync(o)&&this.open--}addAll(t,r,n,i){let a=n||0;for(let s=n?t.childNodes[n]:t.firstChild,o=i==null?null:t.childNodes[i];s!=o;s=s.nextSibling,++a)this.findAtPoint(t,a),this.addDOM(s,r);this.findAtPoint(t,a)}findPlace(t,r,n){let i,a;for(let s=this.open,o=0;s>=0;s--){let l=this.nodes[s],c=l.findWrapping(t);if(c&&(!i||i.length>c.length+o)&&(i=c,a=l,!c.length))break;if(l.solid){if(n)break;o+=2}}if(!i)return null;this.sync(a);for(let s=0;s<i.length;s++)r=this.enterInner(i[s],null,r,!1);return r}insertNode(t,r,n){if(t.isInline&&this.needsBlock&&!this.top.type){let a=this.textblockFromContext();a&&(r=this.enterInner(a,null,r))}let i=this.findPlace(t,r,n);if(i){this.closeExtra();let a=this.top;a.match&&(a.match=a.match.matchType(t.type));let s=ci.none;for(let o of i.concat(t.marks))(a.type?a.type.allowsMarkType(o.type):VK(o.type,t.type))&&(s=o.addToSet(s));return a.content.push(t.mark(s)),!0}return!1}enter(t,r,n,i){let a=this.findPlace(t.create(r),n,!1);return a&&(a=this.enterInner(t,r,n,!0,i)),a}enterInner(t,r,n,i=!1,a){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(t);let o=zK(t,a,s.options);s.options&b2&&s.content.length==0&&(o|=b2);let l=ci.none;return n=n.filter(c=>(s.type?s.type.allowsMarkType(c.type):VK(c.type,t))?(l=c.addToSet(l),!1):!0),this.nodes.push(new I_(t,r,l,i,null,o)),this.open++,n}closeExtra(t=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let r=this.open;r>=0;r--){if(this.nodes[r]==t)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=yS)}return!1}get currentPos(){this.closeExtra();let t=0;for(let r=this.open;r>=0;r--){let n=this.nodes[r].content;for(let i=n.length-1;i>=0;i--)t+=n[i].nodeSize;r&&t++}return t}findAtPoint(t,r){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==r&&(this.find[n].pos=this.currentPos)}findInside(t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&t.nodeType==1&&t.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(t,r,n){if(t!=r&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&r.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&(this.find[r].pos=this.currentPos-(t.nodeValue.length-this.find[r].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let r=t.split("/"),n=this.options.context,i=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),a=-(n?n.depth+1:0)+(i?0:1),s=(o,l)=>{for(;o>=0;o--){let c=r[o];if(c==""){if(o==r.length-1||o==0)continue;for(;l>=a;l--)if(s(o-1,l))return!0;return!1}else{let d=l>0||l==0&&i?this.nodes[l].type:n&&l>=a?n.node(l-a).type:null;if(!d||d.name!=c&&!d.isInGroup(c))return!1;l--}}return!0};return s(r.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let r=t.depth;r>=0;r--){let n=t.node(r).contentMatchAt(t.indexAfter(r)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}}}function GWe(e){for(let t=e.firstChild,r=null;t;t=t.nextSibling){let n=t.nodeType==1?t.nodeName.toLowerCase():null;n&&pue.hasOwnProperty(n)&&r?(r.appendChild(t),t=r):n=="li"?r=t:n&&(r=null)}}function KWe(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function WK(e){let t={};for(let r in e)t[r]=e[r];return t}function VK(e,t){let r=t.schema.nodes;for(let n in r){let i=r[n];if(!i.allowsMarkType(e))continue;let a=[],s=o=>{a.push(o);for(let l=0;l<o.edgeCount;l++){let{type:c,next:d}=o.edge(l);if(c==t||a.indexOf(d)<0&&s(d))return!0}};if(s(i.contentMatch))return!0}}class $x{constructor(t,r){this.nodes=t,this.marks=r}serializeFragment(t,r={},n){n||(n=lD(r).createDocumentFragment());let i=n,a=[];return t.forEach(s=>{if(a.length||s.marks.length){let o=0,l=0;for(;o<a.length&&l<s.marks.length;){let c=s.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(a[o][0])||c.type.spec.spanning===!1)break;o++,l++}for(;o<a.length;)i=a.pop()[1];for(;l<s.marks.length;){let c=s.marks[l++],d=this.serializeMark(c,s.isInline,r);d&&(a.push([c,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(s,r))}),n}serializeNodeInner(t,r){let{dom:n,contentDOM:i}=qN(lD(r),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,r,i)}return n}serializeNode(t,r={}){let n=this.serializeNodeInner(t,r);for(let i=t.marks.length-1;i>=0;i--){let a=this.serializeMark(t.marks[i],t.isInline,r);a&&((a.contentDOM||a.dom).appendChild(n),n=a.dom)}return n}serializeMark(t,r,n={}){let i=this.marks[t.type.name];return i&&qN(lD(n),i(t,r),null,t.attrs)}static renderSpec(t,r,n=null,i){return qN(t,r,n,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new $x(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let r=qK(t.nodes);return r.text||(r.text=n=>n.text),r}static marksFromSchema(t){return qK(t.marks)}}function qK(e){let t={};for(let r in e){let n=e[r].spec.toDOM;n&&(t[r]=n)}return t}function lD(e){return e.document||window.document}const GK=new WeakMap;function XWe(e){let t=GK.get(e);return t===void 0&&GK.set(e,t=YWe(e)),t}function YWe(e){let t=null;function r(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")t||(t=[]),t.push(n);else for(let i=0;i<n.length;i++)r(n[i]);else for(let i in n)r(n[i])}return r(e),t}function qN(e,t,r,n){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],a;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(a=XWe(n))&&a.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(r=i.slice(0,s),i=i.slice(s+1));let o,l=r?e.createElementNS(r,i):e.createElement(i),c=t[1],d=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){d=2;for(let f in c)if(c[f]!=null){let p=f.indexOf(" ");p>0?l.setAttributeNS(f.slice(0,p),f.slice(p+1),c[f]):f=="style"&&l.style?l.style.cssText=c[f]:l.setAttribute(f,c[f])}}for(let f=d;f<t.length;f++){let p=t[f];if(p===0){if(f<t.length-1||f>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:m,contentDOM:x}=qN(e,p,r,n);if(l.appendChild(m),x){if(o)throw new RangeError("Multiple content holes");o=x}}}return{dom:l,contentDOM:o}}const mue=65535,gue=Math.pow(2,16);function QWe(e,t){return e+t*gue}function KK(e){return e&mue}function JWe(e){return(e-(e&mue))/gue}const xue=1,vue=2,GN=4,yue=8;class D8{constructor(t,r,n){this.pos=t,this.delInfo=r,this.recover=n}get deleted(){return(this.delInfo&yue)>0}get deletedBefore(){return(this.delInfo&(xue|GN))>0}get deletedAfter(){return(this.delInfo&(vue|GN))>0}get deletedAcross(){return(this.delInfo&GN)>0}}class Kl{constructor(t,r=!1){if(this.ranges=t,this.inverted=r,!t.length&&Kl.empty)return Kl.empty}recover(t){let r=0,n=KK(t);if(!this.inverted)for(let i=0;i<n;i++)r+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[n*3]+r+JWe(t)}mapResult(t,r=1){return this._map(t,r,!1)}map(t,r=1){return this._map(t,r,!0)}_map(t,r,n){let i=0,a=this.inverted?2:1,s=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let l=this.ranges[o]-(this.inverted?i:0);if(l>t)break;let c=this.ranges[o+a],d=this.ranges[o+s],f=l+c;if(t<=f){let p=c?t==l?-1:t==f?1:r:r,m=l+i+(p<0?0:d);if(n)return m;let x=t==(r<0?l:f)?null:QWe(o/3,t-l),v=t==l?vue:t==f?xue:GN;return(r<0?t!=l:t!=f)&&(v|=yue),new D8(m,v,x)}i+=d-c}return n?t+i:new D8(t+i,0,null)}touches(t,r){let n=0,i=KK(r),a=this.inverted?2:1,s=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let l=this.ranges[o]-(this.inverted?n:0);if(l>t)break;let c=this.ranges[o+a],d=l+c;if(t<=d&&o==i*3)return!0;n+=this.ranges[o+s]-c}return!1}forEach(t){let r=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,a=0;i<this.ranges.length;i+=3){let s=this.ranges[i],o=s-(this.inverted?a:0),l=s+(this.inverted?0:a),c=this.ranges[i+r],d=this.ranges[i+n];t(o,o+c,l,l+d),a+=d-c}}invert(){return new Kl(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?Kl.empty:new Kl(t<0?[0,-t,0]:[0,0,t])}}Kl.empty=new Kl([]);class bS{constructor(t,r,n=0,i=t?t.length:0){this.mirror=r,this.from=n,this.to=i,this._maps=t||[],this.ownData=!(t||r)}get maps(){return this._maps}slice(t=0,r=this.maps.length){return new bS(this._maps,this.mirror,t,r)}appendMap(t,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(t){for(let r=0,n=this._maps.length;r<t._maps.length;r++){let i=t.getMirror(r);this.appendMap(t._maps[r],i!=null&&i<r?n+i:void 0)}}getMirror(t){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==t)return this.mirror[r+(r%2?-1:1)]}}setMirror(t,r){this.mirror||(this.mirror=[]),this.mirror.push(t,r)}appendMappingInverted(t){for(let r=t.maps.length-1,n=this._maps.length+t._maps.length;r>=0;r--){let i=t.getMirror(r);this.appendMap(t._maps[r].invert(),i!=null&&i>r?n-i-1:void 0)}}invert(){let t=new bS;return t.appendMappingInverted(this),t}map(t,r=1){if(this.mirror)return this._map(t,r,!0);for(let n=this.from;n<this.to;n++)t=this._maps[n].map(t,r);return t}mapResult(t,r=1){return this._map(t,r,!1)}_map(t,r,n){let i=0;for(let a=this.from;a<this.to;a++){let s=this._maps[a],o=s.mapResult(t,r);if(o.recover!=null){let l=this.getMirror(a);if(l!=null&&l>a&&l<this.to){a=l,t=this._maps[l].recover(o.recover);continue}}i|=o.delInfo,t=o.pos}return n?t:new D8(t,i,null)}}const cD=Object.create(null);let yo=class{getMap(){return Kl.empty}merge(t){return null}static fromJSON(t,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=cD[r.stepType];if(!n)throw new RangeError(`No step type ${r.stepType} defined`);return n.fromJSON(t,r)}static jsonID(t,r){if(t in cD)throw new RangeError("Duplicate use of step JSON ID "+t);return cD[t]=r,r.prototype.jsonID=t,r}};class Oa{constructor(t,r){this.doc=t,this.failed=r}static ok(t){return new Oa(t,null)}static fail(t){return new Oa(null,t)}static fromReplace(t,r,n,i){try{return Oa.ok(t.replace(r,n,i))}catch(a){if(a instanceof ET)return Oa.fail(a.message);throw a}}}function C9(e,t,r){let n=[];for(let i=0;i<e.childCount;i++){let a=e.child(i);a.content.size&&(a=a.copy(C9(a.content,t,a))),a.isInline&&(a=t(a,r,i)),n.push(a)}return It.fromArray(n)}class a0 extends yo{constructor(t,r,n){super(),this.from=t,this.to=r,this.mark=n}apply(t){let r=t.slice(this.from,this.to),n=t.resolve(this.from),i=n.node(n.sharedDepth(this.to)),a=new Vt(C9(r.content,(s,o)=>!s.isAtom||!o.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),r.openStart,r.openEnd);return Oa.fromReplace(t,this.from,this.to,a)}invert(){return new qu(this.from,this.to,this.mark)}map(t){let r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new a0(r.pos,n.pos,this.mark)}merge(t){return t instanceof a0&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new a0(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new a0(r.from,r.to,t.markFromJSON(r.mark))}}yo.jsonID("addMark",a0);class qu extends yo{constructor(t,r,n){super(),this.from=t,this.to=r,this.mark=n}apply(t){let r=t.slice(this.from,this.to),n=new Vt(C9(r.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),r.openStart,r.openEnd);return Oa.fromReplace(t,this.from,this.to,n)}invert(){return new a0(this.from,this.to,this.mark)}map(t){let r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new qu(r.pos,n.pos,this.mark)}merge(t){return t instanceof qu&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new qu(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new qu(r.from,r.to,t.markFromJSON(r.mark))}}yo.jsonID("removeMark",qu);class s0 extends yo{constructor(t,r){super(),this.pos=t,this.mark=r}apply(t){let r=t.nodeAt(this.pos);if(!r)return Oa.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return Oa.fromReplace(t,this.pos,this.pos+1,new Vt(It.from(n),0,r.isLeaf?0:1))}invert(t){let r=t.nodeAt(this.pos);if(r){let n=this.mark.addToSet(r.marks);if(n.length==r.marks.length){for(let i=0;i<r.marks.length;i++)if(!r.marks[i].isInSet(n))return new s0(this.pos,r.marks[i]);return new s0(this.pos,this.mark)}}return new nx(this.pos,this.mark)}map(t){let r=t.mapResult(this.pos,1);return r.deletedAfter?null:new s0(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new s0(r.pos,t.markFromJSON(r.mark))}}yo.jsonID("addNodeMark",s0);class nx extends yo{constructor(t,r){super(),this.pos=t,this.mark=r}apply(t){let r=t.nodeAt(this.pos);if(!r)return Oa.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return Oa.fromReplace(t,this.pos,this.pos+1,new Vt(It.from(n),0,r.isLeaf?0:1))}invert(t){let r=t.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new s0(this.pos,this.mark)}map(t){let r=t.mapResult(this.pos,1);return r.deletedAfter?null:new nx(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new nx(r.pos,t.markFromJSON(r.mark))}}yo.jsonID("removeNodeMark",nx);class ds extends yo{constructor(t,r,n,i=!1){super(),this.from=t,this.to=r,this.slice=n,this.structure=i}apply(t){return this.structure&&M8(t,this.from,this.to)?Oa.fail("Structure replace would overwrite content"):Oa.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new Kl([this.from,this.to-this.from,this.slice.size])}invert(t){return new ds(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deletedAcross&&n.deletedAcross?null:new ds(r.pos,Math.max(r.pos,n.pos),this.slice,this.structure)}merge(t){if(!(t instanceof ds)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let r=this.slice.size+t.slice.size==0?Vt.empty:new Vt(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new ds(this.from,this.to+(t.to-t.from),r,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let r=this.slice.size+t.slice.size==0?Vt.empty:new Vt(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new ds(t.from,this.to,r,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ds(r.from,r.to,Vt.fromJSON(t,r.slice),!!r.structure)}}yo.jsonID("replace",ds);class gs extends yo{constructor(t,r,n,i,a,s,o=!1){super(),this.from=t,this.to=r,this.gapFrom=n,this.gapTo=i,this.slice=a,this.insert=s,this.structure=o}apply(t){if(this.structure&&(M8(t,this.from,this.gapFrom)||M8(t,this.gapTo,this.to)))return Oa.fail("Structure gap-replace would overwrite content");let r=t.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return Oa.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,r.content);return n?Oa.fromReplace(t,this.from,this.to,n):Oa.fail("Content does not fit in gap")}getMap(){return new Kl([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let r=this.gapTo-this.gapFrom;return new gs(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),i=this.from==this.gapFrom?r.pos:t.map(this.gapFrom,-1),a=this.to==this.gapTo?n.pos:t.map(this.gapTo,1);return r.deletedAcross&&n.deletedAcross||i<r.pos||a>n.pos?null:new gs(r.pos,n.pos,i,a,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new gs(r.from,r.to,r.gapFrom,r.gapTo,Vt.fromJSON(t,r.slice),r.insert,!!r.structure)}}yo.jsonID("replaceAround",gs);function M8(e,t,r){let n=e.resolve(t),i=r-t,a=n.depth;for(;i>0&&a>0&&n.indexAfter(a)==n.node(a).childCount;)a--,i--;if(i>0){let s=n.node(a).maybeChild(n.indexAfter(a));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function ZWe(e,t,r,n){let i=[],a=[],s,o;e.doc.nodesBetween(t,r,(l,c,d)=>{if(!l.isInline)return;let f=l.marks;if(!n.isInSet(f)&&d.type.allowsMarkType(n.type)){let p=Math.max(c,t),m=Math.min(c+l.nodeSize,r),x=n.addToSet(f);for(let v=0;v<f.length;v++)f[v].isInSet(x)||(s&&s.to==p&&s.mark.eq(f[v])?s.to=m:i.push(s=new qu(p,m,f[v])));o&&o.to==p?o.to=m:a.push(o=new a0(p,m,n))}}),i.forEach(l=>e.step(l)),a.forEach(l=>e.step(l))}function eVe(e,t,r,n){let i=[],a=0;e.doc.nodesBetween(t,r,(s,o)=>{if(!s.isInline)return;a++;let l=null;if(n instanceof s3){let c=s.marks,d;for(;d=n.isInSet(c);)(l||(l=[])).push(d),c=d.removeFromSet(c)}else n?n.isInSet(s.marks)&&(l=[n]):l=s.marks;if(l&&l.length){let c=Math.min(o+s.nodeSize,r);for(let d=0;d<l.length;d++){let f=l[d],p;for(let m=0;m<i.length;m++){let x=i[m];x.step==a-1&&f.eq(i[m].style)&&(p=x)}p?(p.to=c,p.step=a):i.push({style:f,from:Math.max(o,t),to:c,step:a})}}}),i.forEach(s=>e.step(new qu(s.from,s.to,s.style)))}function k9(e,t,r,n=r.contentMatch,i=!0){let a=e.doc.nodeAt(t),s=[],o=t+1;for(let l=0;l<a.childCount;l++){let c=a.child(l),d=o+c.nodeSize,f=n.matchType(c.type);if(!f)s.push(new ds(o,d,Vt.empty));else{n=f;for(let p=0;p<c.marks.length;p++)r.allowsMarkType(c.marks[p].type)||e.step(new qu(o,d,c.marks[p]));if(i&&c.isText&&r.whitespace!="pre"){let p,m=/\r?\n|\r/g,x;for(;p=m.exec(c.text);)x||(x=new Vt(It.from(r.schema.text(" ",r.allowedMarks(c.marks))),0,0)),s.push(new ds(o+p.index,o+p.index+p[0].length,x))}}o=d}if(!n.validEnd){let l=n.fillBefore(It.empty,!0);e.replace(o,o,new Vt(l,0,0))}for(let l=s.length-1;l>=0;l--)e.step(s[l])}function tVe(e,t,r){return(t==0||e.canReplace(t,e.childCount))&&(r==e.childCount||e.canReplace(0,r))}function fb(e){let r=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth,i=0,a=0;;--n){let s=e.$from.node(n),o=e.$from.index(n)+i,l=e.$to.indexAfter(n)-a;if(n<e.depth&&s.canReplace(o,l,r))return n;if(n==0||s.type.spec.isolating||!tVe(s,o,l))break;o&&(i=1),l<s.childCount&&(a=1)}return null}function rVe(e,t,r){let{$from:n,$to:i,depth:a}=t,s=n.before(a+1),o=i.after(a+1),l=s,c=o,d=It.empty,f=0;for(let x=a,v=!1;x>r;x--)v||n.index(x)>0?(v=!0,d=It.from(n.node(x).copy(d)),f++):l--;let p=It.empty,m=0;for(let x=a,v=!1;x>r;x--)v||i.after(x+1)<i.end(x)?(v=!0,p=It.from(i.node(x).copy(p)),m++):c++;e.step(new gs(l,c,s,o,new Vt(d.append(p),f,m),d.size-f,!0))}function _9(e,t,r=null,n=e){let i=nVe(e,t),a=i&&iVe(n,t);return a?i.map(XK).concat({type:t,attrs:r}).concat(a.map(XK)):null}function XK(e){return{type:e,attrs:null}}function nVe(e,t){let{parent:r,startIndex:n,endIndex:i}=e,a=r.contentMatchAt(n).findWrapping(t);if(!a)return null;let s=a.length?a[0]:t;return r.canReplaceWith(n,i,s)?a:null}function iVe(e,t){let{parent:r,startIndex:n,endIndex:i}=e,a=r.child(n),s=t.contentMatch.findWrapping(a.type);if(!s)return null;let l=(s.length?s[s.length-1]:t).contentMatch;for(let c=n;l&&c<i;c++)l=l.matchType(r.child(c).type);return!l||!l.validEnd?null:s}function aVe(e,t,r){let n=It.empty;for(let s=r.length-1;s>=0;s--){if(n.size){let o=r[s].type.contentMatch.matchFragment(n);if(!o||!o.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=It.from(r[s].type.create(r[s].attrs,n))}let i=t.start,a=t.end;e.step(new gs(i,a,i,a,new Vt(n,0,0),r.length,!0))}function sVe(e,t,r,n,i){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=e.steps.length;e.doc.nodesBetween(t,r,(s,o)=>{let l=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(n,l)&&oVe(e.doc,e.mapping.slice(a).map(o),n)){let c=null;if(n.schema.linebreakReplacement){let m=n.whitespace=="pre",x=!!n.contentMatch.matchType(n.schema.linebreakReplacement);m&&!x?c=!1:!m&&x&&(c=!0)}c===!1&&wue(e,s,o,a),k9(e,e.mapping.slice(a).map(o,1),n,void 0,c===null);let d=e.mapping.slice(a),f=d.map(o,1),p=d.map(o+s.nodeSize,1);return e.step(new gs(f,p,f+1,p-1,new Vt(It.from(n.create(l,null,s.marks)),0,0),1,!0)),c===!0&&bue(e,s,o,a),!1}})}function bue(e,t,r,n){t.forEach((i,a)=>{if(i.isText){let s,o=/\r?\n|\r/g;for(;s=o.exec(i.text);){let l=e.mapping.slice(n).map(r+1+a+s.index);e.replaceWith(l,l+1,t.type.schema.linebreakReplacement.create())}}})}function wue(e,t,r,n){t.forEach((i,a)=>{if(i.type==i.type.schema.linebreakReplacement){let s=e.mapping.slice(n).map(r+1+a);e.replaceWith(s,s+1,t.type.schema.text(`
`))}})}function oVe(e,t,r){let n=e.resolve(t),i=n.index();return n.parent.canReplaceWith(i,i+1,r)}function lVe(e,t,r,n,i){let a=e.doc.nodeAt(t);if(!a)throw new RangeError("No node at given position");r||(r=a.type);let s=r.create(n,null,i||a.marks);if(a.isLeaf)return e.replaceWith(t,t+a.nodeSize,s);if(!r.validContent(a.content))throw new RangeError("Invalid content for node type "+r.name);e.step(new gs(t,t+a.nodeSize,t+1,t+a.nodeSize-1,new Vt(It.from(s),0,0),1,!0))}function yh(e,t,r=1,n){let i=e.resolve(t),a=i.depth-r,s=n&&n[n.length-1]||i.parent;if(a<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,d=r-2;c>a;c--,d--){let f=i.node(c),p=i.index(c);if(f.type.spec.isolating)return!1;let m=f.content.cutByIndex(p,f.childCount),x=n&&n[d+1];x&&(m=m.replaceChild(0,x.type.create(x.attrs)));let v=n&&n[d]||f;if(!f.canReplace(p+1,f.childCount)||!v.type.validContent(m))return!1}let o=i.indexAfter(a),l=n&&n[0];return i.node(a).canReplaceWith(o,o,l?l.type:i.node(a+1).type)}function cVe(e,t,r=1,n){let i=e.doc.resolve(t),a=It.empty,s=It.empty;for(let o=i.depth,l=i.depth-r,c=r-1;o>l;o--,c--){a=It.from(i.node(o).copy(a));let d=n&&n[c];s=It.from(d?d.type.create(d.attrs,s):i.node(o).copy(s))}e.step(new ds(t,t,new Vt(a.append(s),r,r),!0))}function Y0(e,t){let r=e.resolve(t),n=r.index();return Sue(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function uVe(e,t){t.content.size||e.type.compatibleContent(t.type);let r=e.contentMatchAt(e.childCount),{linebreakReplacement:n}=e.type.schema;for(let i=0;i<t.childCount;i++){let a=t.child(i),s=a.type==n?e.type.schema.nodes.text:a.type;if(r=r.matchType(s),!r||!e.type.allowsMarks(a.marks))return!1}return r.validEnd}function Sue(e,t){return!!(e&&t&&!e.isLeaf&&uVe(e,t))}function o3(e,t,r=-1){let n=e.resolve(t);for(let i=n.depth;;i--){let a,s,o=n.index(i);if(i==n.depth?(a=n.nodeBefore,s=n.nodeAfter):r>0?(a=n.node(i+1),o++,s=n.node(i).maybeChild(o)):(a=n.node(i).maybeChild(o-1),s=n.node(i+1)),a&&!a.isTextblock&&Sue(a,s)&&n.node(i).canReplace(o,o+1))return t;if(i==0)break;t=r<0?n.before(i):n.after(i)}}function dVe(e,t,r){let n=null,{linebreakReplacement:i}=e.doc.type.schema,a=e.doc.resolve(t-r),s=a.node().type;if(i&&s.inlineContent){let d=s.whitespace=="pre",f=!!s.contentMatch.matchType(i);d&&!f?n=!1:!d&&f&&(n=!0)}let o=e.steps.length;if(n===!1){let d=e.doc.resolve(t+r);wue(e,d.node(),d.before(),o)}s.inlineContent&&k9(e,t+r-1,s,a.node().contentMatchAt(a.index()),n==null);let l=e.mapping.slice(o),c=l.map(t-r);if(e.step(new ds(c,l.map(t+r,-1),Vt.empty,!0)),n===!0){let d=e.doc.resolve(c);bue(e,d.node(),d.before(),e.steps.length)}return e}function fVe(e,t,r){let n=e.resolve(t);if(n.parent.canReplaceWith(n.index(),n.index(),r))return t;if(n.parentOffset==0)for(let i=n.depth-1;i>=0;i--){let a=n.index(i);if(n.node(i).canReplaceWith(a,a,r))return n.before(i+1);if(a>0)return null}if(n.parentOffset==n.parent.content.size)for(let i=n.depth-1;i>=0;i--){let a=n.indexAfter(i);if(n.node(i).canReplaceWith(a,a,r))return n.after(i+1);if(a<n.node(i).childCount)return null}return null}function Eue(e,t,r){let n=e.resolve(t);if(!r.content.size)return t;let i=r.content;for(let a=0;a<r.openStart;a++)i=i.firstChild.content;for(let a=1;a<=(r.openStart==0&&r.size?2:1);a++)for(let s=n.depth;s>=0;s--){let o=s==n.depth?0:n.pos<=(n.start(s+1)+n.end(s+1))/2?-1:1,l=n.index(s)+(o>0?1:0),c=n.node(s),d=!1;if(a==1)d=c.canReplace(l,l,i);else{let f=c.contentMatchAt(l).findWrapping(i.firstChild.type);d=f&&c.canReplaceWith(l,l,f[0])}if(d)return o==0?n.pos:o<0?n.before(s+1):n.after(s+1)}return null}function l3(e,t,r=t,n=Vt.empty){if(t==r&&!n.size)return null;let i=e.resolve(t),a=e.resolve(r);return Cue(i,a,n)?new ds(t,r,n):new hVe(i,a,n).fit()}function Cue(e,t,r){return!r.openStart&&!r.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),r.content)}class hVe{constructor(t,r,n){this.$from=t,this.$to=r,this.unplaced=n,this.frontier=[],this.placed=It.empty;for(let i=0;i<=t.depth;i++){let a=t.node(i);this.frontier.push({type:a.type,match:a.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=It.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(t<0?this.$to:n.doc.resolve(t));if(!i)return null;let a=this.placed,s=n.depth,o=i.depth;for(;s&&o&&a.childCount==1;)a=a.firstChild.content,s--,o--;let l=new Vt(a,s,o);return t>-1?new gs(n.pos,t,this.$to.pos,this.$to.end(),l,r):l.size||n.pos!=this.$to.pos?new ds(n.pos,i.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let r=this.unplaced.content,n=0,i=this.unplaced.openEnd;n<t;n++){let a=r.firstChild;if(r.childCount>1&&(i=0),a.type.spec.isolating&&i<=n){t=n;break}r=a.content}for(let r=1;r<=2;r++)for(let n=r==1?t:this.unplaced.openStart;n>=0;n--){let i,a=null;n?(a=uD(this.unplaced.content,n-1).firstChild,i=a.content):i=this.unplaced.content;let s=i.firstChild;for(let o=this.depth;o>=0;o--){let{type:l,match:c}=this.frontier[o],d,f=null;if(r==1&&(s?c.matchType(s.type)||(f=c.fillBefore(It.from(s),!1)):a&&l.compatibleContent(a.type)))return{sliceDepth:n,frontierDepth:o,parent:a,inject:f};if(r==2&&s&&(d=c.findWrapping(s.type)))return{sliceDepth:n,frontierDepth:o,parent:a,wrap:d};if(a&&c.matchType(a.type))break}}}openMore(){let{content:t,openStart:r,openEnd:n}=this.unplaced,i=uD(t,r);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Vt(t,r+1,Math.max(n,i.size+r>=t.size-n?r+1:0)),!0)}dropNode(){let{content:t,openStart:r,openEnd:n}=this.unplaced,i=uD(t,r);if(i.childCount<=1&&r>0){let a=t.size-r<=r+i.size;this.unplaced=new Vt(qw(t,r-1,1),r-1,a?r-1:n)}else this.unplaced=new Vt(qw(t,r,1),r,n)}placeNodes({sliceDepth:t,frontierDepth:r,parent:n,inject:i,wrap:a}){for(;this.depth>r;)this.closeFrontierNode();if(a)for(let v=0;v<a.length;v++)this.openFrontierNode(a[v]);let s=this.unplaced,o=n?n.content:s.content,l=s.openStart-t,c=0,d=[],{match:f,type:p}=this.frontier[r];if(i){for(let v=0;v<i.childCount;v++)d.push(i.child(v));f=f.matchFragment(i)}let m=o.size+t-(s.content.size-s.openEnd);for(;c<o.childCount;){let v=o.child(c),b=f.matchType(v.type);if(!b)break;c++,(c>1||l==0||v.content.size)&&(f=b,d.push(kue(v.mark(p.allowedMarks(v.marks)),c==1?l:0,c==o.childCount?m:-1)))}let x=c==o.childCount;x||(m=-1),this.placed=Gw(this.placed,r,It.from(d)),this.frontier[r].match=f,x&&m<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let v=0,b=o;v<m;v++){let w=b.lastChild;this.frontier.push({type:w.type,match:w.contentMatchAt(w.childCount)}),b=w.content}this.unplaced=x?t==0?Vt.empty:new Vt(qw(s.content,t-1,1),t-1,m<0?s.openEnd:t-1):new Vt(qw(s.content,t,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],r;if(!t.type.isTextblock||!dD(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(t){e:for(let r=Math.min(this.depth,t.depth);r>=0;r--){let{match:n,type:i}=this.frontier[r],a=r<t.depth&&t.end(r+1)==t.pos+(t.depth-(r+1)),s=dD(t,r,i,n,a);if(s){for(let o=r-1;o>=0;o--){let{match:l,type:c}=this.frontier[o],d=dD(t,o,c,l,!0);if(!d||d.childCount)continue e}return{depth:r,fit:s,move:a?t.doc.resolve(t.after(r+1)):t}}}}close(t){let r=this.findCloseLevel(t);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=Gw(this.placed,r.depth,r.fit)),t=r.move;for(let n=r.depth+1;n<=t.depth;n++){let i=t.node(n),a=i.type.contentMatch.fillBefore(i.content,!0,t.index(n));this.openFrontierNode(i.type,i.attrs,a)}return t}openFrontierNode(t,r=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=Gw(this.placed,this.depth,It.from(t.create(r,n))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(It.empty,!0);r.childCount&&(this.placed=Gw(this.placed,this.frontier.length,r))}}function qw(e,t,r){return t==0?e.cutByIndex(r,e.childCount):e.replaceChild(0,e.firstChild.copy(qw(e.firstChild.content,t-1,r)))}function Gw(e,t,r){return t==0?e.append(r):e.replaceChild(e.childCount-1,e.lastChild.copy(Gw(e.lastChild.content,t-1,r)))}function uD(e,t){for(let r=0;r<t;r++)e=e.firstChild.content;return e}function kue(e,t,r){if(t<=0)return e;let n=e.content;return t>1&&(n=n.replaceChild(0,kue(n.firstChild,t-1,n.childCount==1?r-1:0))),t>0&&(n=e.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(e.type.contentMatch.matchFragment(n).fillBefore(It.empty,!0)))),e.copy(n)}function dD(e,t,r,n,i){let a=e.node(t),s=i?e.indexAfter(t):e.index(t);if(s==a.childCount&&!r.compatibleContent(a.type))return null;let o=n.fillBefore(a.content,!0,s);return o&&!pVe(r,a.content,s)?o:null}function pVe(e,t,r){for(let n=r;n<t.childCount;n++)if(!e.allowsMarks(t.child(n).marks))return!0;return!1}function mVe(e){return e.spec.defining||e.spec.definingForContent}function gVe(e,t,r,n){if(!n.size)return e.deleteRange(t,r);let i=e.doc.resolve(t),a=e.doc.resolve(r);if(Cue(i,a,n))return e.step(new ds(t,r,n));let s=Nue(i,a);s[s.length-1]==0&&s.pop();let o=-(i.depth+1);s.unshift(o);for(let p=i.depth,m=i.pos-1;p>0;p--,m--){let x=i.node(p).type.spec;if(x.defining||x.definingAsContext||x.isolating)break;s.indexOf(p)>-1?o=p:i.before(p)==m&&s.splice(1,0,-p)}let l=s.indexOf(o),c=[],d=n.openStart;for(let p=n.content,m=0;;m++){let x=p.firstChild;if(c.push(x),m==n.openStart)break;p=x.content}for(let p=d-1;p>=0;p--){let m=c[p],x=mVe(m.type);if(x&&!m.sameMarkup(i.node(Math.abs(o)-1)))d=p;else if(x||!m.type.isTextblock)break}for(let p=n.openStart;p>=0;p--){let m=(p+d+1)%(n.openStart+1),x=c[m];if(x)for(let v=0;v<s.length;v++){let b=s[(v+l)%s.length],w=!0;b<0&&(w=!1,b=-b);let k=i.node(b-1),E=i.index(b-1);if(k.canReplaceWith(E,E,x.type,x.marks))return e.replace(i.before(b),w?a.after(b):r,new Vt(_ue(n.content,0,n.openStart,m),m,n.openEnd))}}let f=e.steps.length;for(let p=s.length-1;p>=0&&(e.replace(t,r,n),!(e.steps.length>f));p--){let m=s[p];m<0||(t=i.before(m),r=a.after(m))}}function _ue(e,t,r,n,i){if(t<r){let a=e.firstChild;e=e.replaceChild(0,a.copy(_ue(a.content,t+1,r,n,a)))}if(t>n){let a=i.contentMatchAt(0),s=a.fillBefore(e).append(e);e=s.append(a.matchFragment(s).fillBefore(It.empty,!0))}return e}function xVe(e,t,r,n){if(!n.isInline&&t==r&&e.doc.resolve(t).parent.content.size){let i=fVe(e.doc,t,n.type);i!=null&&(t=r=i)}e.replaceRange(t,r,new Vt(It.from(n),0,0))}function vVe(e,t,r){let n=e.doc.resolve(t),i=e.doc.resolve(r),a=Nue(n,i);for(let s=0;s<a.length;s++){let o=a[s],l=s==a.length-1;if(l&&o==0||n.node(o).type.contentMatch.validEnd)return e.delete(n.start(o),i.end(o));if(o>0&&(l||n.node(o-1).canReplace(n.index(o-1),i.indexAfter(o-1))))return e.delete(n.before(o),i.after(o))}for(let s=1;s<=n.depth&&s<=i.depth;s++)if(t-n.start(s)==n.depth-s&&r>n.end(s)&&i.end(s)-r!=i.depth-s&&n.start(s-1)==i.start(s-1)&&n.node(s-1).canReplace(n.index(s-1),i.index(s-1)))return e.delete(n.before(s),r);e.delete(t,r)}function Nue(e,t){let r=[],n=Math.min(e.depth,t.depth);for(let i=n;i>=0;i--){let a=e.start(i);if(a<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(a==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==a-1)&&r.push(i)}return r}class Ev extends yo{constructor(t,r,n){super(),this.pos=t,this.attr=r,this.value=n}apply(t){let r=t.nodeAt(this.pos);if(!r)return Oa.fail("No node at attribute step's position");let n=Object.create(null);for(let a in r.attrs)n[a]=r.attrs[a];n[this.attr]=this.value;let i=r.type.create(n,null,r.marks);return Oa.fromReplace(t,this.pos,this.pos+1,new Vt(It.from(i),0,r.isLeaf?0:1))}getMap(){return Kl.empty}invert(t){return new Ev(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let r=t.mapResult(this.pos,1);return r.deletedAfter?null:new Ev(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ev(r.pos,r.attr,r.value)}}yo.jsonID("attr",Ev);class wS extends yo{constructor(t,r){super(),this.attr=t,this.value=r}apply(t){let r=Object.create(null);for(let i in t.attrs)r[i]=t.attrs[i];r[this.attr]=this.value;let n=t.type.create(r,t.content,t.marks);return Oa.ok(n)}getMap(){return Kl.empty}invert(t){return new wS(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new wS(r.attr,r.value)}}yo.jsonID("docAttr",wS);let fy=class extends Error{};fy=function e(t){let r=Error.call(this,t);return r.__proto__=e.prototype,r};fy.prototype=Object.create(Error.prototype);fy.prototype.constructor=fy;fy.prototype.name="TransformError";class Aue{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new bS}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let r=this.maybeStep(t);if(r.failed)throw new fy(r.failed);return this}maybeStep(t){let r=t.apply(this.doc);return r.failed||this.addStep(t,r.doc),r}get docChanged(){return this.steps.length>0}addStep(t,r){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=r}replace(t,r=t,n=Vt.empty){let i=l3(this.doc,t,r,n);return i&&this.step(i),this}replaceWith(t,r,n){return this.replace(t,r,new Vt(It.from(n),0,0))}delete(t,r){return this.replace(t,r,Vt.empty)}insert(t,r){return this.replaceWith(t,t,r)}replaceRange(t,r,n){return gVe(this,t,r,n),this}replaceRangeWith(t,r,n){return xVe(this,t,r,n),this}deleteRange(t,r){return vVe(this,t,r),this}lift(t,r){return rVe(this,t,r),this}join(t,r=1){return dVe(this,t,r),this}wrap(t,r){return aVe(this,t,r),this}setBlockType(t,r=t,n,i=null){return sVe(this,t,r,n,i),this}setNodeMarkup(t,r,n=null,i){return lVe(this,t,r,n,i),this}setNodeAttribute(t,r,n){return this.step(new Ev(t,r,n)),this}setDocAttribute(t,r){return this.step(new wS(t,r)),this}addNodeMark(t,r){return this.step(new s0(t,r)),this}removeNodeMark(t,r){let n=this.doc.nodeAt(t);if(!n)throw new RangeError("No node at position "+t);if(r instanceof ci)r.isInSet(n.marks)&&this.step(new nx(t,r));else{let i=n.marks,a,s=[];for(;a=r.isInSet(i);)s.push(new nx(t,a)),i=a.removeFromSet(i);for(let o=s.length-1;o>=0;o--)this.step(s[o])}return this}split(t,r=1,n){return cVe(this,t,r,n),this}addMark(t,r,n){return ZWe(this,t,r,n),this}removeMark(t,r,n){return eVe(this,t,r,n),this}clearIncompatible(t,r,n){return k9(this,t,r,n),this}}const fD=Object.create(null);class dn{constructor(t,r,n){this.$anchor=t,this.$head=r,this.ranges=n||[new yVe(t.min(r),t.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let r=0;r<t.length;r++)if(t[r].$from.pos!=t[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,r=Vt.empty){let n=r.content.lastChild,i=null;for(let o=0;o<r.openEnd;o++)i=n,n=n.lastChild;let a=t.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:l,$to:c}=s[o],d=t.mapping.slice(a);t.replaceRange(d.map(l.pos),d.map(c.pos),o?Vt.empty:r),o==0&&JK(t,a,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,r){let n=t.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:s,$to:o}=i[a],l=t.mapping.slice(n),c=l.map(s.pos),d=l.map(o.pos);a?t.deleteRange(c,d):(t.replaceRangeWith(c,d,r),JK(t,n,r.isInline?-1:1))}}static findFrom(t,r,n=!1){let i=t.parent.inlineContent?new Ur(t):U1(t.node(0),t.parent,t.pos,t.index(),r,n);if(i)return i;for(let a=t.depth-1;a>=0;a--){let s=r<0?U1(t.node(0),t.node(a),t.before(a+1),t.index(a),r,n):U1(t.node(0),t.node(a),t.after(a+1),t.index(a)+1,r,n);if(s)return s}return null}static near(t,r=1){return this.findFrom(t,r)||this.findFrom(t,-r)||new ac(t.node(0))}static atStart(t){return U1(t,t,0,0,1)||new ac(t)}static atEnd(t){return U1(t,t,t.content.size,t.childCount,-1)||new ac(t)}static fromJSON(t,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=fD[r.type];if(!n)throw new RangeError(`No selection type ${r.type} defined`);return n.fromJSON(t,r)}static jsonID(t,r){if(t in fD)throw new RangeError("Duplicate use of selection JSON ID "+t);return fD[t]=r,r.prototype.jsonID=t,r}getBookmark(){return Ur.between(this.$anchor,this.$head).getBookmark()}}dn.prototype.visible=!0;class yVe{constructor(t,r){this.$from=t,this.$to=r}}let YK=!1;function QK(e){!YK&&!e.parent.inlineContent&&(YK=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Ur extends dn{constructor(t,r=t){QK(t),QK(r),super(t,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,r){let n=t.resolve(r.map(this.head));if(!n.parent.inlineContent)return dn.near(n);let i=t.resolve(r.map(this.anchor));return new Ur(i.parent.inlineContent?i:n,n)}replace(t,r=Vt.empty){if(super.replace(t,r),r==Vt.empty){let n=this.$from.marksAcross(this.$to);n&&t.ensureMarks(n)}}eq(t){return t instanceof Ur&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new c3(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ur(t.resolve(r.anchor),t.resolve(r.head))}static create(t,r,n=r){let i=t.resolve(r);return new this(i,n==r?i:t.resolve(n))}static between(t,r,n){let i=t.pos-r.pos;if((!n||i)&&(n=i>=0?1:-1),!r.parent.inlineContent){let a=dn.findFrom(r,n,!0)||dn.findFrom(r,-n,!0);if(a)r=a.$head;else return dn.near(r,n)}return t.parent.inlineContent||(i==0?t=r:(t=(dn.findFrom(t,-n,!0)||dn.findFrom(t,n,!0)).$anchor,t.pos<r.pos!=i<0&&(t=r))),new Ur(t,r)}}dn.jsonID("text",Ur);class c3{constructor(t,r){this.anchor=t,this.head=r}map(t){return new c3(t.map(this.anchor),t.map(this.head))}resolve(t){return Ur.between(t.resolve(this.anchor),t.resolve(this.head))}}class pr extends dn{constructor(t){let r=t.nodeAfter,n=t.node(0).resolve(t.pos+r.nodeSize);super(t,n),this.node=r}map(t,r){let{deleted:n,pos:i}=r.mapResult(this.anchor),a=t.resolve(i);return n?dn.near(a):new pr(a)}content(){return new Vt(It.from(this.node),0,0)}eq(t){return t instanceof pr&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new N9(this.anchor)}static fromJSON(t,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new pr(t.resolve(r.anchor))}static create(t,r){return new pr(t.resolve(r))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}pr.prototype.visible=!1;dn.jsonID("node",pr);class N9{constructor(t){this.anchor=t}map(t){let{deleted:r,pos:n}=t.mapResult(this.anchor);return r?new c3(n,n):new N9(n)}resolve(t){let r=t.resolve(this.anchor),n=r.nodeAfter;return n&&pr.isSelectable(n)?new pr(r):dn.near(r)}}class ac extends dn{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,r=Vt.empty){if(r==Vt.empty){t.delete(0,t.doc.content.size);let n=dn.atStart(t.doc);n.eq(t.selection)||t.setSelection(n)}else super.replace(t,r)}toJSON(){return{type:"all"}}static fromJSON(t){return new ac(t)}map(t){return new ac(t)}eq(t){return t instanceof ac}getBookmark(){return bVe}}dn.jsonID("all",ac);const bVe={map(){return this},resolve(e){return new ac(e)}};function U1(e,t,r,n,i,a=!1){if(t.inlineContent)return Ur.create(e,r);for(let s=n-(i>0?0:1);i>0?s<t.childCount:s>=0;s+=i){let o=t.child(s);if(o.isAtom){if(!a&&pr.isSelectable(o))return pr.create(e,r-(i<0?o.nodeSize:0))}else{let l=U1(e,o,r+i,i<0?o.childCount:0,i,a);if(l)return l}r+=o.nodeSize*i}return null}function JK(e,t,r){let n=e.steps.length-1;if(n<t)return;let i=e.steps[n];if(!(i instanceof ds||i instanceof gs))return;let a=e.mapping.maps[n],s;a.forEach((o,l,c,d)=>{s==null&&(s=d)}),e.setSelection(dn.near(e.doc.resolve(s),r))}const ZK=1,O_=2,eX=4;class wVe extends Aue{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|ZK)&~O_,this.storedMarks=null,this}get selectionSet(){return(this.updated&ZK)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=O_,this}ensureMarks(t){return ci.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&O_)>0}addStep(t,r){super.addStep(t,r),this.updated=this.updated&~O_,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,r=!0){let n=this.selection;return r&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||ci.none))),n.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,r,n){let i=this.doc.type.schema;if(r==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(n==null&&(n=r),!t)return this.deleteRange(r,n);let a=this.storedMarks;if(!a){let s=this.doc.resolve(r);a=n==r?s.marks():s.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,i.text(t,a)),!this.selection.empty&&this.selection.to==r+t.length&&this.setSelection(dn.near(this.selection.$to)),this}}setMeta(t,r){return this.meta[typeof t=="string"?t:t.key]=r,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=eX,this}get scrolledIntoView(){return(this.updated&eX)>0}}function tX(e,t){return!t||!e?e:e.bind(t)}class Kw{constructor(t,r,n){this.name=t,this.init=tX(r.init,n),this.apply=tX(r.apply,n)}}const SVe=[new Kw("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new Kw("selection",{init(e,t){return e.selection||dn.atStart(t.doc)},apply(e){return e.selection}}),new Kw("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,r,n){return n.selection.$cursor?e.storedMarks:null}}),new Kw("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class hD{constructor(t,r){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=SVe.slice(),r&&r.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new Kw(n.key,n.spec.state,n))})}}class ov{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,r=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=r){let i=this.config.plugins[n];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let r=[t],n=this.applyInner(t),i=null;for(;;){let a=!1;for(let s=0;s<this.config.plugins.length;s++){let o=this.config.plugins[s];if(o.spec.appendTransaction){let l=i?i[s].n:0,c=i?i[s].state:this,d=l<r.length&&o.spec.appendTransaction.call(o,l?r.slice(l):r,c,n);if(d&&n.filterTransaction(d,s)){if(d.setMeta("appendedTransaction",t),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<s?{state:n,n:r.length}:{state:this,n:0})}r.push(d),n=n.applyInner(d),a=!0}i&&(i[s]={state:n,n:r.length})}}if(!a)return{state:n,transactions:r}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new ov(this.config),n=this.config.fields;for(let i=0;i<n.length;i++){let a=n[i];r[a.name]=a.apply(t,this[a.name],this,r)}return r}get tr(){return new wVe(this)}static create(t){let r=new hD(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new ov(r);for(let i=0;i<r.fields.length;i++)n[r.fields[i].name]=r.fields[i].init(t,n);return n}reconfigure(t){let r=new hD(this.schema,t.plugins),n=r.fields,i=new ov(r);for(let a=0;a<n.length;a++){let s=n[a].name;i[s]=this.hasOwnProperty(s)?this[s]:n[a].init(t,i)}return i}toJSON(t){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(n=>n.toJSON())),t&&typeof t=="object")for(let n in t){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[n],a=i.spec.state;a&&a.toJSON&&(r[n]=a.toJSON.call(i,this[i.key]))}return r}static fromJSON(t,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new hD(t.schema,t.plugins),a=new ov(i);return i.fields.forEach(s=>{if(s.name=="doc")a.doc=vh.fromJSON(t.schema,r.doc);else if(s.name=="selection")a.selection=dn.fromJSON(a.doc,r.selection);else if(s.name=="storedMarks")r.storedMarks&&(a.storedMarks=r.storedMarks.map(t.schema.markFromJSON));else{if(n)for(let o in n){let l=n[o],c=l.spec.state;if(l.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(r,o)){a[s.name]=c.fromJSON.call(l,t,r[o],a);return}}a[s.name]=s.init(t,a)}}),a}}function Tue(e,t,r){for(let n in e){let i=e[n];i instanceof Function?i=i.bind(t):n=="handleDOMEvents"&&(i=Tue(i,t,{})),r[n]=i}return r}class Fi{constructor(t){this.spec=t,this.props={},t.props&&Tue(t.props,this,this.props),this.key=t.key?t.key.key:Iue("plugin")}getState(t){return t[this.key]}}const pD=Object.create(null);function Iue(e){return e in pD?e+"$"+ ++pD[e]:(pD[e]=0,e+"$")}class va{constructor(t="key"){this.key=Iue(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const A9=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function Oue(e,t){let{$cursor:r}=e.selection;return!r||(t?!t.endOfTextblock("backward",e):r.parentOffset>0)?null:r}const Pue=(e,t,r)=>{let n=Oue(e,r);if(!n)return!1;let i=T9(n);if(!i){let s=n.blockRange(),o=s&&fb(s);return o==null?!1:(t&&t(e.tr.lift(s,o).scrollIntoView()),!0)}let a=i.nodeBefore;if($ue(e,i,t,-1))return!0;if(n.parent.content.size==0&&(hy(a,"end")||pr.isSelectable(a)))for(let s=n.depth;;s--){let o=l3(e.doc,n.before(s),n.after(s),Vt.empty);if(o&&o.slice.size<o.to-o.from){if(t){let l=e.tr.step(o);l.setSelection(hy(a,"end")?dn.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):pr.create(l.doc,i.pos-a.nodeSize)),t(l.scrollIntoView())}return!0}if(s==1||n.node(s-1).childCount>1)break}return a.isAtom&&i.depth==n.depth-1?(t&&t(e.tr.delete(i.pos-a.nodeSize,i.pos).scrollIntoView()),!0):!1},EVe=(e,t,r)=>{let n=Oue(e,r);if(!n)return!1;let i=T9(n);return i?Rue(e,i,t):!1},CVe=(e,t,r)=>{let n=Due(e,r);if(!n)return!1;let i=I9(n);return i?Rue(e,i,t):!1};function Rue(e,t,r){let n=t.nodeBefore,i=n,a=t.pos-1;for(;!i.isTextblock;a--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let s=t.nodeAfter,o=s,l=t.pos+1;for(;!o.isTextblock;l++){if(o.type.spec.isolating)return!1;let d=o.firstChild;if(!d)return!1;o=d}let c=l3(e.doc,a,l,Vt.empty);if(!c||c.from!=a||c instanceof ds&&c.slice.size>=l-a)return!1;if(r){let d=e.tr.step(c);d.setSelection(Ur.create(d.doc,a)),r(d.scrollIntoView())}return!0}function hy(e,t,r=!1){for(let n=e;n;n=t=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&n.childCount!=1)return!1}return!1}const jue=(e,t,r)=>{let{$head:n,empty:i}=e.selection,a=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",e):n.parentOffset>0)return!1;a=T9(n)}let s=a&&a.nodeBefore;return!s||!pr.isSelectable(s)?!1:(t&&t(e.tr.setSelection(pr.create(e.doc,a.pos-s.nodeSize)).scrollIntoView()),!0)};function T9(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function Due(e,t){let{$cursor:r}=e.selection;return!r||(t?!t.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)?null:r}const Mue=(e,t,r)=>{let n=Due(e,r);if(!n)return!1;let i=I9(n);if(!i)return!1;let a=i.nodeAfter;if($ue(e,i,t,1))return!0;if(n.parent.content.size==0&&(hy(a,"start")||pr.isSelectable(a))){let s=l3(e.doc,n.before(),n.after(),Vt.empty);if(s&&s.slice.size<s.to-s.from){if(t){let o=e.tr.step(s);o.setSelection(hy(a,"start")?dn.findFrom(o.doc.resolve(o.mapping.map(i.pos)),1):pr.create(o.doc,o.mapping.map(i.pos))),t(o.scrollIntoView())}return!0}}return a.isAtom&&i.depth==n.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+a.nodeSize).scrollIntoView()),!0):!1},Fue=(e,t,r)=>{let{$head:n,empty:i}=e.selection,a=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)return!1;a=I9(n)}let s=a&&a.nodeAfter;return!s||!pr.isSelectable(s)?!1:(t&&t(e.tr.setSelection(pr.create(e.doc,a.pos)).scrollIntoView()),!0)};function I9(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let r=e.node(t);if(e.index(t)+1<r.childCount)return e.doc.resolve(e.after(t+1));if(r.type.spec.isolating)break}return null}const kVe=(e,t)=>{let r=e.selection,n=r instanceof pr,i;if(n){if(r.node.isTextblock||!Y0(e.doc,r.from))return!1;i=r.from}else if(i=o3(e.doc,r.from,-1),i==null)return!1;if(t){let a=e.tr.join(i);n&&a.setSelection(pr.create(a.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(a.scrollIntoView())}return!0},_Ve=(e,t)=>{let r=e.selection,n;if(r instanceof pr){if(r.node.isTextblock||!Y0(e.doc,r.to))return!1;n=r.to}else if(n=o3(e.doc,r.to,1),n==null)return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0},NVe=(e,t)=>{let{$from:r,$to:n}=e.selection,i=r.blockRange(n),a=i&&fb(i);return a==null?!1:(t&&t(e.tr.lift(i,a).scrollIntoView()),!0)},Lue=(e,t)=>{let{$head:r,$anchor:n}=e.selection;return!r.parent.type.spec.code||!r.sameParent(n)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function O9(e){for(let t=0;t<e.edgeCount;t++){let{type:r}=e.edge(t);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const AVe=(e,t)=>{let{$head:r,$anchor:n}=e.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let i=r.node(-1),a=r.indexAfter(-1),s=O9(i.contentMatchAt(a));if(!s||!i.canReplaceWith(a,a,s))return!1;if(t){let o=r.after(),l=e.tr.replaceWith(o,o,s.createAndFill());l.setSelection(dn.near(l.doc.resolve(o),1)),t(l.scrollIntoView())}return!0},Bue=(e,t)=>{let r=e.selection,{$from:n,$to:i}=r;if(r instanceof ac||n.parent.inlineContent||i.parent.inlineContent)return!1;let a=O9(i.parent.contentMatchAt(i.indexAfter()));if(!a||!a.isTextblock)return!1;if(t){let s=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos,o=e.tr.insert(s,a.createAndFill());o.setSelection(Ur.create(o.doc,s+1)),t(o.scrollIntoView())}return!0},Uue=(e,t)=>{let{$cursor:r}=e.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let a=r.before();if(yh(e.doc,a))return t&&t(e.tr.split(a).scrollIntoView()),!0}let n=r.blockRange(),i=n&&fb(n);return i==null?!1:(t&&t(e.tr.lift(n,i).scrollIntoView()),!0)};function TVe(e){return(t,r)=>{let{$from:n,$to:i}=t.selection;if(t.selection instanceof pr&&t.selection.node.isBlock)return!n.parentOffset||!yh(t.doc,n.pos)?!1:(r&&r(t.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let a=[],s,o,l=!1,c=!1;for(let m=n.depth;;m--)if(n.node(m).isBlock){l=n.end(m)==n.pos+(n.depth-m),c=n.start(m)==n.pos-(n.depth-m),o=O9(n.node(m-1).contentMatchAt(n.indexAfter(m-1))),a.unshift(l&&o?{type:o}:null),s=m;break}else{if(m==1)return!1;a.unshift(null)}let d=t.tr;(t.selection instanceof Ur||t.selection instanceof ac)&&d.deleteSelection();let f=d.mapping.map(n.pos),p=yh(d.doc,f,a.length,a);if(p||(a[0]=o?{type:o}:null,p=yh(d.doc,f,a.length,a)),!p)return!1;if(d.split(f,a.length,a),!l&&c&&n.node(s).type!=o){let m=d.mapping.map(n.before(s)),x=d.doc.resolve(m);o&&n.node(s-1).canReplaceWith(x.index(),x.index()+1,o)&&d.setNodeMarkup(d.mapping.map(n.before(s)),o)}return r&&r(d.scrollIntoView()),!0}}const IVe=TVe(),OVe=(e,t)=>{let{$from:r,to:n}=e.selection,i,a=r.sharedDepth(n);return a==0?!1:(i=r.before(a),t&&t(e.tr.setSelection(pr.create(e.doc,i))),!0)};function PVe(e,t,r){let n=t.nodeBefore,i=t.nodeAfter,a=t.index();return!n||!i||!n.type.compatibleContent(i.type)?!1:!n.content.size&&t.parent.canReplace(a-1,a)?(r&&r(e.tr.delete(t.pos-n.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(a,a+1)||!(i.isTextblock||Y0(e.doc,t.pos))?!1:(r&&r(e.tr.join(t.pos).scrollIntoView()),!0)}function $ue(e,t,r,n){let i=t.nodeBefore,a=t.nodeAfter,s,o,l=i.type.spec.isolating||a.type.spec.isolating;if(!l&&PVe(e,t,r))return!0;let c=!l&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(s=(o=i.contentMatchAt(i.childCount)).findWrapping(a.type))&&o.matchType(s[0]||a.type).validEnd){if(r){let m=t.pos+a.nodeSize,x=It.empty;for(let w=s.length-1;w>=0;w--)x=It.from(s[w].create(null,x));x=It.from(i.copy(x));let v=e.tr.step(new gs(t.pos-1,m,t.pos,m,new Vt(x,1,0),s.length,!0)),b=v.doc.resolve(m+2*s.length);b.nodeAfter&&b.nodeAfter.type==i.type&&Y0(v.doc,b.pos)&&v.join(b.pos),r(v.scrollIntoView())}return!0}let d=a.type.spec.isolating||n>0&&l?null:dn.findFrom(t,1),f=d&&d.$from.blockRange(d.$to),p=f&&fb(f);if(p!=null&&p>=t.depth)return r&&r(e.tr.lift(f,p).scrollIntoView()),!0;if(c&&hy(a,"start",!0)&&hy(i,"end")){let m=i,x=[];for(;x.push(m),!m.isTextblock;)m=m.lastChild;let v=a,b=1;for(;!v.isTextblock;v=v.firstChild)b++;if(m.canReplace(m.childCount,m.childCount,v.content)){if(r){let w=It.empty;for(let E=x.length-1;E>=0;E--)w=It.from(x[E].copy(w));let k=e.tr.step(new gs(t.pos-x.length,t.pos+a.nodeSize,t.pos+b,t.pos+a.nodeSize-b,new Vt(w,x.length,0),0,!0));r(k.scrollIntoView())}return!0}}return!1}function zue(e){return function(t,r){let n=t.selection,i=e<0?n.$from:n.$to,a=i.depth;for(;i.node(a).isInline;){if(!a)return!1;a--}return i.node(a).isTextblock?(r&&r(t.tr.setSelection(Ur.create(t.doc,e<0?i.start(a):i.end(a)))),!0):!1}}const RVe=zue(-1),jVe=zue(1);function DVe(e,t=null){return function(r,n){let{$from:i,$to:a}=r.selection,s=i.blockRange(a),o=s&&_9(s,e,t);return o?(n&&n(r.tr.wrap(s,o).scrollIntoView()),!0):!1}}function rX(e,t=null){return function(r,n){let i=!1;for(let a=0;a<r.selection.ranges.length&&!i;a++){let{$from:{pos:s},$to:{pos:o}}=r.selection.ranges[a];r.doc.nodesBetween(s,o,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(e,t)))if(l.type==e)i=!0;else{let d=r.doc.resolve(c),f=d.index();i=d.parent.canReplaceWith(f,f+1,e)}})}if(!i)return!1;if(n){let a=r.tr;for(let s=0;s<r.selection.ranges.length;s++){let{$from:{pos:o},$to:{pos:l}}=r.selection.ranges[s];a.setBlockType(o,l,e,t)}n(a.scrollIntoView())}return!0}}function P9(...e){return function(t,r,n){for(let i=0;i<e.length;i++)if(e[i](t,r,n))return!0;return!1}}P9(A9,Pue,jue);P9(A9,Mue,Fue);P9(Lue,Bue,Uue,IVe);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function MVe(e,t=null){return function(r,n){let{$from:i,$to:a}=r.selection,s=i.blockRange(a);if(!s)return!1;let o=n?r.tr:null;return FVe(o,s,e,t)?(n&&n(o.scrollIntoView()),!0):!1}}function FVe(e,t,r,n=null){let i=!1,a=t,s=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(r)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let l=s.resolve(t.start-2);a=new kT(l,l,t.depth),t.endIndex<t.parent.childCount&&(t=new kT(t.$from,s.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let o=_9(a,r,n,t);return o?(e&&LVe(e,t,o,i,r),!0):!1}function LVe(e,t,r,n,i){let a=It.empty;for(let d=r.length-1;d>=0;d--)a=It.from(r[d].type.create(r[d].attrs,a));e.step(new gs(t.start-(n?2:0),t.end,t.start,t.end,new Vt(a,0,0),r.length,!0));let s=0;for(let d=0;d<r.length;d++)r[d].type==i&&(s=d+1);let o=r.length-s,l=t.start+r.length-(n?2:0),c=t.parent;for(let d=t.startIndex,f=t.endIndex,p=!0;d<f;d++,p=!1)!p&&yh(e.doc,l,o)&&(e.split(l,o),l+=2*o),l+=c.child(d).nodeSize;return e}function BVe(e){return function(t,r){let{$from:n,$to:i}=t.selection,a=n.blockRange(i,s=>s.childCount>0&&s.firstChild.type==e);return a?r?n.node(a.depth-1).type==e?UVe(t,r,e,a):$Ve(t,r,a):!0:!1}}function UVe(e,t,r,n){let i=e.tr,a=n.end,s=n.$to.end(n.depth);a<s&&(i.step(new gs(a-1,s,a,s,new Vt(It.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new kT(i.doc.resolve(n.$from.pos),i.doc.resolve(s),n.depth));const o=fb(n);if(o==null)return!1;i.lift(n,o);let l=i.doc.resolve(i.mapping.map(a,-1)-1);return Y0(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),t(i.scrollIntoView()),!0}function $Ve(e,t,r){let n=e.tr,i=r.parent;for(let m=r.end,x=r.endIndex-1,v=r.startIndex;x>v;x--)m-=i.child(x).nodeSize,n.delete(m-1,m+1);let a=n.doc.resolve(r.start),s=a.nodeAfter;if(n.mapping.map(r.end)!=r.start+a.nodeAfter.nodeSize)return!1;let o=r.startIndex==0,l=r.endIndex==i.childCount,c=a.node(-1),d=a.index(-1);if(!c.canReplace(d+(o?0:1),d+1,s.content.append(l?It.empty:It.from(i))))return!1;let f=a.pos,p=f+s.nodeSize;return n.step(new gs(f-(o?1:0),p+(l?1:0),f+1,p-1,new Vt((o?It.empty:It.from(i.copy(It.empty))).append(l?It.empty:It.from(i.copy(It.empty))),o?0:1,l?0:1),o?0:1)),t(n.scrollIntoView()),!0}function zVe(e){return function(t,r){let{$from:n,$to:i}=t.selection,a=n.blockRange(i,c=>c.childCount>0&&c.firstChild.type==e);if(!a)return!1;let s=a.startIndex;if(s==0)return!1;let o=a.parent,l=o.child(s-1);if(l.type!=e)return!1;if(r){let c=l.lastChild&&l.lastChild.type==o.type,d=It.from(c?e.create():null),f=new Vt(It.from(e.create(null,It.from(o.type.create(null,d)))),c?3:1,0),p=a.start,m=a.end;r(t.tr.step(new gs(p-(c?3:1),m,p,m,f,1,!0)).scrollIntoView())}return!0}}const Rs=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},py=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let F8=null;const Qf=function(e,t,r){let n=F8||(F8=document.createRange());return n.setEnd(e,r??e.nodeValue.length),n.setStart(e,t||0),n},HVe=function(){F8=null},ix=function(e,t,r,n){return r&&(nX(e,t,r,n,-1)||nX(e,t,r,n,1))},WVe=/^(img|br|input|textarea|hr)$/i;function nX(e,t,r,n,i){for(var a;;){if(e==r&&t==n)return!0;if(t==(i<0?0:Gc(e))){let s=e.parentNode;if(!s||s.nodeType!=1||oC(e)||WVe.test(e.nodeName)||e.contentEditable=="false")return!1;t=Rs(e)+(i<0?0:1),e=s}else if(e.nodeType==1){let s=e.childNodes[t+(i<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((a=s.pmViewDesc)===null||a===void 0)&&a.ignoreForSelection)t+=i;else return!1;else e=s,t=i<0?Gc(e):0}else return!1}}function Gc(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function VVe(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=Gc(e)}else if(e.parentNode&&!oC(e))t=Rs(e),e=e.parentNode;else return null}}function qVe(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!oC(e))t=Rs(e)+1,e=e.parentNode;else return null}}function GVe(e,t,r){for(let n=t==0,i=t==Gc(e);n||i;){if(e==r)return!0;let a=Rs(e);if(e=e.parentNode,!e)return!1;n=n&&a==0,i=i&&a==Gc(e)}}function oC(e){let t;for(let r=e;r&&!(t=r.pmViewDesc);r=r.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const u3=function(e){return e.focusNode&&ix(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function Hm(e,t){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=e,r.key=r.code=t,r}function KVe(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function XVe(e,t,r){if(e.caretPositionFromPoint)try{let n=e.caretPositionFromPoint(t,r);if(n)return{node:n.offsetNode,offset:Math.min(Gc(n.offsetNode),n.offset)}}catch{}if(e.caretRangeFromPoint){let n=e.caretRangeFromPoint(t,r);if(n)return{node:n.startContainer,offset:Math.min(Gc(n.startContainer),n.startOffset)}}}const nf=typeof navigator<"u"?navigator:null,iX=typeof document<"u"?document:null,Q0=nf&&nf.userAgent||"",L8=/Edge\/(\d+)/.exec(Q0),Hue=/MSIE \d/.exec(Q0),B8=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Q0),Sl=!!(Hue||B8||L8),b0=Hue?document.documentMode:B8?+B8[1]:L8?+L8[1]:0,eu=!Sl&&/gecko\/(\d+)/i.test(Q0);eu&&+(/Firefox\/(\d+)/.exec(Q0)||[0,0])[1];const U8=!Sl&&/Chrome\/(\d+)/.exec(Q0),hs=!!U8,Wue=U8?+U8[1]:0,go=!Sl&&!!nf&&/Apple Computer/.test(nf.vendor),my=go&&(/Mobile\/\w+/.test(Q0)||!!nf&&nf.maxTouchPoints>2),Hc=my||(nf?/Mac/.test(nf.platform):!1),Vue=nf?/Win/.test(nf.platform):!1,ch=/Android \d/.test(Q0),lC=!!iX&&"webkitFontSmoothing"in iX.documentElement.style,YVe=lC?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function QVe(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Wf(e,t){return typeof e=="number"?e:e[t]}function JVe(e){let t=e.getBoundingClientRect(),r=t.width/e.offsetWidth||1,n=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*r,top:t.top,bottom:t.top+e.clientHeight*n}}function aX(e,t,r){let n=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,a=e.dom.ownerDocument;for(let s=r||e.dom;s;){if(s.nodeType!=1){s=py(s);continue}let o=s,l=o==a.body,c=l?QVe(a):JVe(o),d=0,f=0;if(t.top<c.top+Wf(n,"top")?f=-(c.top-t.top+Wf(i,"top")):t.bottom>c.bottom-Wf(n,"bottom")&&(f=t.bottom-t.top>c.bottom-c.top?t.top+Wf(i,"top")-c.top:t.bottom-c.bottom+Wf(i,"bottom")),t.left<c.left+Wf(n,"left")?d=-(c.left-t.left+Wf(i,"left")):t.right>c.right-Wf(n,"right")&&(d=t.right-c.right+Wf(i,"right")),d||f)if(l)a.defaultView.scrollBy(d,f);else{let m=o.scrollLeft,x=o.scrollTop;f&&(o.scrollTop+=f),d&&(o.scrollLeft+=d);let v=o.scrollLeft-m,b=o.scrollTop-x;t={left:t.left-v,top:t.top-b,right:t.right-v,bottom:t.bottom-b}}let p=l?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(p))break;s=p=="absolute"?s.offsetParent:py(s)}}function ZVe(e){let t=e.dom.getBoundingClientRect(),r=Math.max(0,t.top),n,i;for(let a=(t.left+t.right)/2,s=r+1;s<Math.min(innerHeight,t.bottom);s+=5){let o=e.root.elementFromPoint(a,s);if(!o||o==e.dom||!e.dom.contains(o))continue;let l=o.getBoundingClientRect();if(l.top>=r-20){n=o,i=l.top;break}}return{refDOM:n,refTop:i,stack:que(e.dom)}}function que(e){let t=[],r=e.ownerDocument;for(let n=e;n&&(t.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),e!=r);n=py(n));return t}function eqe({refDOM:e,refTop:t,stack:r}){let n=e?e.getBoundingClientRect().top:0;Gue(r,n==0?0:n-t)}function Gue(e,t){for(let r=0;r<e.length;r++){let{dom:n,top:i,left:a}=e[r];n.scrollTop!=i+t&&(n.scrollTop=i+t),n.scrollLeft!=a&&(n.scrollLeft=a)}}let I1=null;function tqe(e){if(e.setActive)return e.setActive();if(I1)return e.focus(I1);let t=que(e);e.focus(I1==null?{get preventScroll(){return I1={preventScroll:!0},!0}}:void 0),I1||(I1=!1,Gue(t,0))}function Kue(e,t){let r,n=2e8,i,a=0,s=t.top,o=t.top,l,c;for(let d=e.firstChild,f=0;d;d=d.nextSibling,f++){let p;if(d.nodeType==1)p=d.getClientRects();else if(d.nodeType==3)p=Qf(d).getClientRects();else continue;for(let m=0;m<p.length;m++){let x=p[m];if(x.top<=s&&x.bottom>=o){s=Math.max(x.bottom,s),o=Math.min(x.top,o);let v=x.left>t.left?x.left-t.left:x.right<t.left?t.left-x.right:0;if(v<n){r=d,n=v,i=v&&r.nodeType==3?{left:x.right<t.left?x.right:x.left,top:t.top}:t,d.nodeType==1&&v&&(a=f+(t.left>=(x.left+x.right)/2?1:0));continue}}else x.top>t.top&&!l&&x.left<=t.left&&x.right>=t.left&&(l=d,c={left:Math.max(x.left,Math.min(x.right,t.left)),top:x.top});!r&&(t.left>=x.right&&t.top>=x.top||t.left>=x.left&&t.top>=x.bottom)&&(a=f+1)}}return!r&&l&&(r=l,i=c,n=0),r&&r.nodeType==3?rqe(r,i):!r||n&&r.nodeType==1?{node:e,offset:a}:Kue(r,i)}function rqe(e,t){let r=e.nodeValue.length,n=document.createRange(),i;for(let a=0;a<r;a++){n.setEnd(e,a+1),n.setStart(e,a);let s=Pp(n,1);if(s.top!=s.bottom&&R9(t,s)){i={node:e,offset:a+(t.left>=(s.left+s.right)/2?1:0)};break}}return n.detach(),i||{node:e,offset:0}}function R9(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function nqe(e,t){let r=e.parentNode;return r&&/^li$/i.test(r.nodeName)&&t.left<e.getBoundingClientRect().left?r:e}function iqe(e,t,r){let{node:n,offset:i}=Kue(t,r),a=-1;if(n.nodeType==1&&!n.firstChild){let s=n.getBoundingClientRect();a=s.left!=s.right&&r.left>(s.left+s.right)/2?1:-1}return e.docView.posFromDOM(n,i,a)}function aqe(e,t,r,n){let i=-1;for(let a=t,s=!1;a!=e.dom;){let o=e.docView.nearestDesc(a,!0),l;if(!o)return null;if(o.dom.nodeType==1&&(o.node.isBlock&&o.parent||!o.contentDOM)&&((l=o.dom.getBoundingClientRect()).width||l.height)&&(o.node.isBlock&&o.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(o.dom.nodeName)&&(!s&&l.left>n.left||l.top>n.top?i=o.posBefore:(!s&&l.right<n.left||l.bottom<n.top)&&(i=o.posAfter),s=!0),!o.contentDOM&&i<0&&!o.node.isText))return(o.node.isBlock?n.top<(l.top+l.bottom)/2:n.left<(l.left+l.right)/2)?o.posBefore:o.posAfter;a=o.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,r,-1)}function Xue(e,t,r){let n=e.childNodes.length;if(n&&r.top<r.bottom)for(let i=Math.max(0,Math.min(n-1,Math.floor(n*(t.top-r.top)/(r.bottom-r.top))-2)),a=i;;){let s=e.childNodes[a];if(s.nodeType==1){let o=s.getClientRects();for(let l=0;l<o.length;l++){let c=o[l];if(R9(t,c))return Xue(s,t,c)}}if((a=(a+1)%n)==i)break}return e}function sqe(e,t){let r=e.dom.ownerDocument,n,i=0,a=XVe(r,t.left,t.top);a&&({node:n,offset:i}=a);let s=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top),o;if(!s||!e.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=e.dom.getBoundingClientRect();if(!R9(t,c)||(s=Xue(e.dom,t,c),!s))return null}if(go)for(let c=s;n&&c;c=py(c))c.draggable&&(n=void 0);if(s=nqe(s,t),n){if(eu&&n.nodeType==1&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let d=n.childNodes[i],f;d.nodeName=="IMG"&&(f=d.getBoundingClientRect()).right<=t.left&&f.bottom>t.top&&i++}let c;lC&&i&&n.nodeType==1&&(c=n.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=t.top&&i--,n==e.dom&&i==n.childNodes.length-1&&n.lastChild.nodeType==1&&t.top>n.lastChild.getBoundingClientRect().bottom?o=e.state.doc.content.size:(i==0||n.nodeType!=1||n.childNodes[i-1].nodeName!="BR")&&(o=aqe(e,n,i,t))}o==null&&(o=iqe(e,s,t));let l=e.docView.nearestDesc(s,!0);return{pos:o,inside:l?l.posAtStart-l.border:-1}}function sX(e){return e.top<e.bottom||e.left<e.right}function Pp(e,t){let r=e.getClientRects();if(r.length){let n=r[t<0?0:r.length-1];if(sX(n))return n}return Array.prototype.find.call(r,sX)||e.getBoundingClientRect()}const oqe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Yue(e,t,r){let{node:n,offset:i,atom:a}=e.docView.domFromPos(t,r<0?-1:1),s=lC||eu;if(n.nodeType==3)if(s&&(oqe.test(n.nodeValue)||(r<0?!i:i==n.nodeValue.length))){let l=Pp(Qf(n,i,i),r);if(eu&&i&&/\s/.test(n.nodeValue[i-1])&&i<n.nodeValue.length){let c=Pp(Qf(n,i-1,i-1),-1);if(c.top==l.top){let d=Pp(Qf(n,i,i+1),-1);if(d.top!=l.top)return ww(d,d.left<c.left)}}return l}else{let l=i,c=i,d=r<0?1:-1;return r<0&&!i?(c++,d=-1):r>=0&&i==n.nodeValue.length?(l--,d=1):r<0?l--:c++,ww(Pp(Qf(n,l,c),d),d<0)}if(!e.state.doc.resolve(t-(a||0)).parent.inlineContent){if(a==null&&i&&(r<0||i==Gc(n))){let l=n.childNodes[i-1];if(l.nodeType==1)return mD(l.getBoundingClientRect(),!1)}if(a==null&&i<Gc(n)){let l=n.childNodes[i];if(l.nodeType==1)return mD(l.getBoundingClientRect(),!0)}return mD(n.getBoundingClientRect(),r>=0)}if(a==null&&i&&(r<0||i==Gc(n))){let l=n.childNodes[i-1],c=l.nodeType==3?Qf(l,Gc(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return ww(Pp(c,1),!1)}if(a==null&&i<Gc(n)){let l=n.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Qf(l,0,s?0:1):l.nodeType==1?l:null:null;if(c)return ww(Pp(c,-1),!0)}return ww(Pp(n.nodeType==3?Qf(n):n,-r),r>=0)}function ww(e,t){if(e.width==0)return e;let r=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:r,right:r}}function mD(e,t){if(e.height==0)return e;let r=t?e.top:e.bottom;return{top:r,bottom:r,left:e.left,right:e.right}}function Que(e,t,r){let n=e.state,i=e.root.activeElement;n!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return r()}finally{n!=t&&e.updateState(n),i!=e.dom&&i&&i.focus()}}function lqe(e,t,r){let n=t.selection,i=r=="up"?n.$from:n.$to;return Que(e,t,()=>{let{node:a}=e.docView.domFromPos(i.pos,r=="up"?-1:1);for(;;){let o=e.docView.nearestDesc(a,!0);if(!o)break;if(o.node.isBlock){a=o.contentDOM||o.dom;break}a=o.dom.parentNode}let s=Yue(e,i.pos,1);for(let o=a.firstChild;o;o=o.nextSibling){let l;if(o.nodeType==1)l=o.getClientRects();else if(o.nodeType==3)l=Qf(o,0,o.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let d=l[c];if(d.bottom>d.top+1&&(r=="up"?s.top-d.top>(d.bottom-s.top)*2:d.bottom-s.bottom>(s.bottom-d.top)*2))return!1}}return!0})}const cqe=/[\u0590-\u08ac]/;function uqe(e,t,r){let{$head:n}=t.selection;if(!n.parent.isTextblock)return!1;let i=n.parentOffset,a=!i,s=i==n.parent.content.size,o=e.domSelection();return o?!cqe.test(n.parent.textContent)||!o.modify?r=="left"||r=="backward"?a:s:Que(e,t,()=>{let{focusNode:l,focusOffset:c,anchorNode:d,anchorOffset:f}=e.domSelectionRange(),p=o.caretBidiLevel;o.modify("move",r,"character");let m=n.depth?e.docView.domAfterPos(n.before()):e.dom,{focusNode:x,focusOffset:v}=e.domSelectionRange(),b=x&&!m.contains(x.nodeType==1?x:x.parentNode)||l==x&&c==v;try{o.collapse(d,f),l&&(l!=d||c!=f)&&o.extend&&o.extend(l,c)}catch{}return p!=null&&(o.caretBidiLevel=p),b}):n.pos==n.start()||n.pos==n.end()}let oX=null,lX=null,cX=!1;function dqe(e,t,r){return oX==t&&lX==r?cX:(oX=t,lX=r,cX=r=="up"||r=="down"?lqe(e,t,r):uqe(e,t,r))}const tu=0,uX=1,tg=2,af=3;class cC{constructor(t,r,n,i){this.parent=t,this.children=r,this.dom=n,this.contentDOM=i,this.dirty=tu,n.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,r,n){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let r=0;r<this.children.length;r++)t+=this.children[r].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let r=0,n=this.posAtStart;;r++){let i=this.children[r];if(i==t)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,r,n){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(n<0){let a,s;if(t==this.contentDOM)a=t.childNodes[r-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;a=t.previousSibling}for(;a&&!((s=a.pmViewDesc)&&s.parent==this);)a=a.previousSibling;return a?this.posBeforeChild(s)+s.size:this.posAtStart}else{let a,s;if(t==this.contentDOM)a=t.childNodes[r];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;a=t.nextSibling}for(;a&&!((s=a.pmViewDesc)&&s.parent==this);)a=a.nextSibling;return a?this.posBeforeChild(s):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=r>Rs(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let a=t;;a=a.parentNode){if(a==this.dom){i=!1;break}if(a.previousSibling)break}if(i==null&&r==t.childNodes.length)for(let a=t;;a=a.parentNode){if(a==this.dom){i=!0;break}if(a.nextSibling)break}}return i??n>0?this.posAtEnd:this.posAtStart}nearestDesc(t,r=!1){for(let n=!0,i=t;i;i=i.parentNode){let a=this.getDesc(i),s;if(a&&(!r||a.node))if(n&&(s=a.nodeDOM)&&!(s.nodeType==1?s.contains(t.nodeType==1?t:t.parentNode):s==t))n=!1;else return a}}getDesc(t){let r=t.pmViewDesc;for(let n=r;n;n=n.parent)if(n==this)return r}posFromDOM(t,r,n){for(let i=t;i;i=i.parentNode){let a=this.getDesc(i);if(a)return a.localPosFromDOM(t,r,n)}return-1}descAt(t){for(let r=0,n=0;r<this.children.length;r++){let i=this.children[r],a=n+i.size;if(n==t&&a!=n){for(;!i.border&&i.children.length;)for(let s=0;s<i.children.length;s++){let o=i.children[s];if(o.size){i=o;break}}return i}if(t<a)return i.descAt(t-n-i.border);n=a}}domFromPos(t,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let n=0,i=0;for(let a=0;n<this.children.length;n++){let s=this.children[n],o=a+s.size;if(o>t||s instanceof Zue){i=t-a;break}a=o}if(i)return this.children[n].domFromPos(i-this.children[n].border,r);for(let a;n&&!(a=this.children[n-1]).size&&a instanceof Jue&&a.side>=0;n--);if(r<=0){let a,s=!0;for(;a=n?this.children[n-1]:null,!(!a||a.dom.parentNode==this.contentDOM);n--,s=!1);return a&&r&&s&&!a.border&&!a.domAtom?a.domFromPos(a.size,r):{node:this.contentDOM,offset:a?Rs(a.dom)+1:0}}else{let a,s=!0;for(;a=n<this.children.length?this.children[n]:null,!(!a||a.dom.parentNode==this.contentDOM);n++,s=!1);return a&&s&&!a.border&&!a.domAtom?a.domFromPos(0,r):{node:this.contentDOM,offset:a?Rs(a.dom):this.contentDOM.childNodes.length}}}parseRange(t,r,n=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,a=-1;for(let s=n,o=0;;o++){let l=this.children[o],c=s+l.size;if(i==-1&&t<=c){let d=s+l.border;if(t>=d&&r<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,r,d);t=s;for(let f=o;f>0;f--){let p=this.children[f-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){i=Rs(p.dom)+1;break}t-=p.size}i==-1&&(i=0)}if(i>-1&&(c>r||o==this.children.length-1)){r=c;for(let d=o+1;d<this.children.length;d++){let f=this.children[d];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){a=Rs(f.dom);break}r+=f.size}a==-1&&(a=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:t,to:r,fromOffset:i,toOffset:a}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[t<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(t)}domAfterPos(t){let{node:r,offset:n}=this.domFromPos(t,0);if(r.nodeType!=1||n==r.childNodes.length)throw new RangeError("No node after pos "+t);return r.childNodes[n]}setSelection(t,r,n,i=!1){let a=Math.min(t,r),s=Math.max(t,r);for(let m=0,x=0;m<this.children.length;m++){let v=this.children[m],b=x+v.size;if(a>x&&s<b)return v.setSelection(t-x-v.border,r-x-v.border,n,i);x=b}let o=this.domFromPos(t,t?-1:1),l=r==t?o:this.domFromPos(r,r?-1:1),c=n.root.getSelection(),d=n.domSelectionRange(),f=!1;if((eu||go)&&t==r){let{node:m,offset:x}=o;if(m.nodeType==3){if(f=!!(x&&m.nodeValue[x-1]==`
`),f&&x==m.nodeValue.length)for(let v=m,b;v;v=v.parentNode){if(b=v.nextSibling){b.nodeName=="BR"&&(o=l={node:b.parentNode,offset:Rs(b)+1});break}let w=v.pmViewDesc;if(w&&w.node&&w.node.isBlock)break}}else{let v=m.childNodes[x-1];f=v&&(v.nodeName=="BR"||v.contentEditable=="false")}}if(eu&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let m=d.focusNode.childNodes[d.focusOffset];m&&m.contentEditable=="false"&&(i=!0)}if(!(i||f&&go)&&ix(o.node,o.offset,d.anchorNode,d.anchorOffset)&&ix(l.node,l.offset,d.focusNode,d.focusOffset))return;let p=!1;if((c.extend||t==r)&&!(f&&eu)){c.collapse(o.node,o.offset);try{t!=r&&c.extend(l.node,l.offset),p=!0}catch{}}if(!p){if(t>r){let x=o;o=l,l=x}let m=document.createRange();m.setEnd(l.node,l.offset),m.setStart(o.node,o.offset),c.removeAllRanges(),c.addRange(m)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,r){for(let n=0,i=0;i<this.children.length;i++){let a=this.children[i],s=n+a.size;if(n==s?t<=s&&r>=n:t<s&&r>n){let o=n+a.border,l=s-a.border;if(t>=o&&r<=l){this.dirty=t==n||r==s?tg:uX,t==o&&r==l&&(a.contentLost||a.dom.parentNode!=this.contentDOM)?a.dirty=af:a.markDirty(t-o,r-o);return}else a.dirty=a.dom==a.contentDOM&&a.dom.parentNode==this.contentDOM&&!a.children.length?tg:af}n=s}this.dirty=tg}markParentsDirty(){let t=1;for(let r=this.parent;r;r=r.parent,t++){let n=t==1?tg:uX;r.dirty<n&&(r.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class Jue extends cC{constructor(t,r,n,i){let a,s=r.type.toDOM;if(typeof s=="function"&&(s=s(n,()=>{if(!a)return i;if(a.parent)return a.parent.posBeforeChild(a)})),!r.type.spec.raw){if(s.nodeType!=1){let o=document.createElement("span");o.appendChild(s),s=o}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(t,[],s,null),this.widget=r,this.widget=r,a=this}matchesWidget(t){return this.dirty==tu&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let r=this.widget.spec.stopEvent;return r?r(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class fqe extends cC{constructor(t,r,n,i){super(t,[],r,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(t,r){return t!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class ax extends cC{constructor(t,r,n,i,a){super(t,[],n,i),this.mark=r,this.spec=a}static create(t,r,n,i){let a=i.nodeViews[r.type.name],s=a&&a(r,i,n);return(!s||!s.dom)&&(s=$x.renderSpec(document,r.type.spec.toDOM(r,n),null,r.attrs)),new ax(t,r,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&af||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=af&&this.mark.eq(t)}markDirty(t,r){if(super.markDirty(t,r),this.dirty!=tu){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=tu}}slice(t,r,n){let i=ax.create(this.parent,this.mark,!0,n),a=this.children,s=this.size;r<s&&(a=z8(a,r,s,n)),t>0&&(a=z8(a,0,t,n));for(let o=0;o<a.length;o++)a[o].parent=i;return i.children=a,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class w0 extends cC{constructor(t,r,n,i,a,s,o,l,c){super(t,[],a,s),this.node=r,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=o}static create(t,r,n,i,a,s){let o=a.nodeViews[r.type.name],l,c=o&&o(r,a,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},n,i),d=c&&c.dom,f=c&&c.contentDOM;if(r.isText){if(!d)d=document.createTextNode(r.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:f}=$x.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!f&&!r.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),r.type.spec.draggable&&(d.draggable=!0));let p=d;return d=rde(d,n,r),c?l=new hqe(t,r,n,i,d,f||null,p,c,a,s+1):r.isText?new d3(t,r,n,i,d,p,a):new w0(t,r,n,i,d,f||null,p,a,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let n=this.children[r];if(this.dom.contains(n.dom.parentNode)){t.contentElement=n.dom.parentNode;break}}t.contentElement||(t.getContent=()=>It.empty)}return t}matchesNode(t,r,n){return this.dirty==tu&&t.eq(this.node)&&NT(r,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,r){let n=this.node.inlineContent,i=r,a=t.composing?this.localCompositionInfo(t,r):null,s=a&&a.pos>-1?a:null,o=a&&a.pos<0,l=new mqe(this,s&&s.node,t);vqe(this.node,this.innerDeco,(c,d,f)=>{c.spec.marks?l.syncToMarks(c.spec.marks,n,t):c.type.side>=0&&!f&&l.syncToMarks(d==this.node.childCount?ci.none:this.node.child(d).marks,n,t),l.placeWidget(c,t,i)},(c,d,f,p)=>{l.syncToMarks(c.marks,n,t);let m;l.findNodeMatch(c,d,f,p)||o&&t.state.selection.from>i&&t.state.selection.to<i+c.nodeSize&&(m=l.findIndexWithChild(a.node))>-1&&l.updateNodeAt(c,d,f,m,t)||l.updateNextNode(c,d,f,t,p,i)||l.addNode(c,d,f,t,i),i+=c.nodeSize}),l.syncToMarks([],n,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==tg)&&(s&&this.protectLocalComposition(t,s),ede(this.contentDOM,this.children,t),my&&yqe(this.dom))}localCompositionInfo(t,r){let{from:n,to:i}=t.state.selection;if(!(t.state.selection instanceof Ur)||n<r||i>r+this.node.content.size)return null;let a=t.input.compositionNode;if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let s=a.nodeValue,o=bqe(this.node.content,s,n-r,i-r);return o<0?null:{node:a,pos:o,text:s}}else return{node:a,pos:-1,text:""}}protectLocalComposition(t,{node:r,pos:n,text:i}){if(this.getDesc(r))return;let a=r;for(;a.parentNode!=this.contentDOM;a=a.parentNode){for(;a.previousSibling;)a.parentNode.removeChild(a.previousSibling);for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling);a.pmViewDesc&&(a.pmViewDesc=void 0)}let s=new fqe(this,a,r,i);t.input.compositionNodes.push(s),this.children=z8(this.children,n,n+i.length,t,s)}update(t,r,n,i){return this.dirty==af||!t.sameMarkup(this.node)?!1:(this.updateInner(t,r,n,i),!0)}updateInner(t,r,n,i){this.updateOuterDeco(r),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=tu}updateOuterDeco(t){if(NT(t,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=tde(this.dom,this.nodeDOM,$8(this.outerDeco,this.node,r),$8(t,this.node,r)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function dX(e,t,r,n,i){rde(n,t,e);let a=new w0(void 0,e,t,r,n,n,n,i,0);return a.contentDOM&&a.updateChildren(i,0),a}class d3 extends w0{constructor(t,r,n,i,a,s,o){super(t,r,n,i,a,null,s,o,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,r,n,i){return this.dirty==af||this.dirty!=tu&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=tu||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=tu,!0)}inParent(){let t=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,r,n){return t==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(t,r,n)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,r,n){let i=this.node.cut(t,r),a=document.createTextNode(i.text);return new d3(this.parent,i,this.outerDeco,this.innerDeco,a,a,n)}markDirty(t,r){super.markDirty(t,r),this.dom!=this.nodeDOM&&(t==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=af)}get domAtom(){return!1}isText(t){return this.node.text==t}}class Zue extends cC{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==tu&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class hqe extends w0{constructor(t,r,n,i,a,s,o,l,c,d){super(t,r,n,i,a,s,o,c,d),this.spec=l}update(t,r,n,i){if(this.dirty==af)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let a=this.spec.update(t,r,n);return a&&this.updateInner(t,r,n,i),a}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,r,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,r,n,i){this.spec.setSelection?this.spec.setSelection(t,r,n.root):super.setSelection(t,r,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function ede(e,t,r){let n=e.firstChild,i=!1;for(let a=0;a<t.length;a++){let s=t[a],o=s.dom;if(o.parentNode==e){for(;o!=n;)n=fX(n),i=!0;n=n.nextSibling}else i=!0,e.insertBefore(o,n);if(s instanceof ax){let l=n?n.previousSibling:e.lastChild;ede(s.contentDOM,s.children,r),n=l?l.nextSibling:e.firstChild}}for(;n;)n=fX(n),i=!0;i&&r.trackWrites==e&&(r.trackWrites=null)}const w2=function(e){e&&(this.nodeName=e)};w2.prototype=Object.create(null);const rg=[new w2];function $8(e,t,r){if(e.length==0)return rg;let n=r?rg[0]:new w2,i=[n];for(let a=0;a<e.length;a++){let s=e[a].type.attrs;if(s){s.nodeName&&i.push(n=new w2(s.nodeName));for(let o in s){let l=s[o];l!=null&&(r&&i.length==1&&i.push(n=new w2(t.isInline?"span":"div")),o=="class"?n.class=(n.class?n.class+" ":"")+l:o=="style"?n.style=(n.style?n.style+";":"")+l:o!="nodeName"&&(n[o]=l))}}}return i}function tde(e,t,r,n){if(r==rg&&n==rg)return t;let i=t;for(let a=0;a<n.length;a++){let s=n[a],o=r[a];if(a){let l;o&&o.nodeName==s.nodeName&&i!=e&&(l=i.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(i),o=rg[0]),i=l}pqe(i,o||rg[0],s)}return i}function pqe(e,t,r){for(let n in t)n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)&&e.removeAttribute(n);for(let n in r)n!="class"&&n!="style"&&n!="nodeName"&&r[n]!=t[n]&&e.setAttribute(n,r[n]);if(t.class!=r.class){let n=t.class?t.class.split(" ").filter(Boolean):[],i=r.class?r.class.split(" ").filter(Boolean):[];for(let a=0;a<n.length;a++)i.indexOf(n[a])==-1&&e.classList.remove(n[a]);for(let a=0;a<i.length;a++)n.indexOf(i[a])==-1&&e.classList.add(i[a]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=r.style){if(t.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=n.exec(t.style);)e.style.removeProperty(i[1])}r.style&&(e.style.cssText+=r.style)}}function rde(e,t,r){return tde(e,e,rg,$8(t,r,e.nodeType!=1))}function NT(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].type.eq(t[r].type))return!1;return!0}function fX(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class mqe{constructor(t,r,n){this.lock=r,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=gqe(t.node.content,t)}destroyBetween(t,r){if(t!=r){for(let n=t;n<r;n++)this.top.children[n].destroy();this.top.children.splice(t,r-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,r,n){let i=0,a=this.stack.length>>1,s=Math.min(a,t.length);for(;i<s&&(i==a-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<a;)this.destroyRest(),this.top.dirty=tu,this.index=this.stack.pop(),this.top=this.stack.pop(),a--;for(;a<t.length;){this.stack.push(this.top,this.index+1);let o=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(t[a])&&!this.isLocked(c.dom)){o=l;break}}if(o>-1)o>this.index&&(this.changed=!0,this.destroyBetween(this.index,o)),this.top=this.top.children[this.index];else{let l=ax.create(this.top,t[a],r,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,a++}}findNodeMatch(t,r,n,i){let a=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(t,r,n))a=this.top.children.indexOf(s,this.index);else for(let o=this.index,l=Math.min(this.top.children.length,o+5);o<l;o++){let c=this.top.children[o];if(c.matchesNode(t,r,n)&&!this.preMatch.matched.has(c)){a=o;break}}return a<0?!1:(this.destroyBetween(this.index,a),this.index++,!0)}updateNodeAt(t,r,n,i,a){let s=this.top.children[i];return s.dirty==af&&s.dom==s.contentDOM&&(s.dirty=tg),s.update(t,r,n,a)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let r=t.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let n=t.pmViewDesc;if(n){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==n)return i}return-1}t=r}}updateNextNode(t,r,n,i,a,s){for(let o=this.index;o<this.top.children.length;o++){let l=this.top.children[o];if(l instanceof w0){let c=this.preMatch.matched.get(l);if(c!=null&&c!=a)return!1;let d=l.dom,f,p=this.isLocked(d)&&!(t.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==t.text&&l.dirty!=af&&NT(r,l.outerDeco));if(!p&&l.update(t,r,n,i))return this.destroyBetween(this.index,o),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!p&&(f=this.recreateWrapper(l,t,r,n,i,s)))return this.destroyBetween(this.index,o),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=tg,f.updateChildren(i,s+1),f.dirty=tu),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,r,n,i,a,s){if(t.dirty||r.isAtom||!t.children.length||!t.node.content.eq(r.content)||!NT(n,t.outerDeco)||!i.eq(t.innerDeco))return null;let o=w0.create(this.top,r,n,i,a,s);if(o.contentDOM){o.children=t.children,t.children=[];for(let l of o.children)l.parent=o}return t.destroy(),o}addNode(t,r,n,i,a){let s=w0.create(this.top,t,r,n,i,a);s.contentDOM&&s.updateChildren(i,a+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(t,r,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let a=new Jue(this.top,t,r,n);this.top.children.splice(this.index++,0,a),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],r=this.top;for(;t instanceof ax;)r=t,t=r.children[r.children.length-1];(!t||!(t instanceof d3)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((go||hs)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(t,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(t))this.index++;else{let n=document.createElement(t);t=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),t=="BR"&&(n.className="ProseMirror-trailingBreak");let i=new Zue(this.top,[],n,null);r!=this.top?r.children.push(i):r.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function gqe(e,t){let r=t,n=r.children.length,i=e.childCount,a=new Map,s=[];e:for(;i>0;){let o;for(;;)if(n){let c=r.children[n-1];if(c instanceof ax)r=c,n=c.children.length;else{o=c,n--;break}}else{if(r==t)break e;n=r.parent.children.indexOf(r),r=r.parent}let l=o.node;if(l){if(l!=e.child(i-1))break;--i,a.set(o,i),s.push(o)}}return{index:i,matched:a,matches:s.reverse()}}function xqe(e,t){return e.type.side-t.type.side}function vqe(e,t,r,n){let i=t.locals(e),a=0;if(i.length==0){for(let c=0;c<e.childCount;c++){let d=e.child(c);n(d,i,t.forChild(a,d),c),a+=d.nodeSize}return}let s=0,o=[],l=null;for(let c=0;;){let d,f;for(;s<i.length&&i[s].to==a;){let b=i[s++];b.widget&&(d?(f||(f=[d])).push(b):d=b)}if(d)if(f){f.sort(xqe);for(let b=0;b<f.length;b++)r(f[b],c,!!l)}else r(d,c,!!l);let p,m;if(l)m=-1,p=l,l=null;else if(c<e.childCount)m=c,p=e.child(c++);else break;for(let b=0;b<o.length;b++)o[b].to<=a&&o.splice(b--,1);for(;s<i.length&&i[s].from<=a&&i[s].to>a;)o.push(i[s++]);let x=a+p.nodeSize;if(p.isText){let b=x;s<i.length&&i[s].from<b&&(b=i[s].from);for(let w=0;w<o.length;w++)o[w].to<b&&(b=o[w].to);b<x&&(l=p.cut(b-a),p=p.cut(0,b-a),x=b,m=-1)}else for(;s<i.length&&i[s].to<x;)s++;let v=p.isInline&&!p.isLeaf?o.filter(b=>!b.inline):o.slice();n(p,v,t.forChild(a,p),m),a=x}}function yqe(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function bqe(e,t,r,n){for(let i=0,a=0;i<e.childCount&&a<=n;){let s=e.child(i++),o=a;if(a+=s.nodeSize,!s.isText)continue;let l=s.text;for(;i<e.childCount;){let c=e.child(i++);if(a+=c.nodeSize,!c.isText)break;l+=c.text}if(a>=r){if(a>=n&&l.slice(n-t.length-o,n-o)==t)return n-t.length;let c=o<n?l.lastIndexOf(t,n-o-1):-1;if(c>=0&&c+t.length+o>=r)return o+c;if(r==n&&l.length>=n+t.length-o&&l.slice(n-o,n-o+t.length)==t)return n}}return-1}function z8(e,t,r,n,i){let a=[];for(let s=0,o=0;s<e.length;s++){let l=e[s],c=o,d=o+=l.size;c>=r||d<=t?a.push(l):(c<t&&a.push(l.slice(0,t-c,n)),i&&(a.push(i),i=void 0),d>r&&a.push(l.slice(r-c,l.size,n)))}return a}function j9(e,t=null){let r=e.domSelectionRange(),n=e.state.doc;if(!r.focusNode)return null;let i=e.docView.nearestDesc(r.focusNode),a=i&&i.size==0,s=e.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(s<0)return null;let o=n.resolve(s),l,c;if(u3(r)){for(l=s;i&&!i.node;)i=i.parent;let f=i.node;if(i&&f.isAtom&&pr.isSelectable(f)&&i.parent&&!(f.isInline&&GVe(r.focusNode,r.focusOffset,i.dom))){let p=i.posBefore;c=new pr(s==p?o:n.resolve(p))}}else{if(r instanceof e.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let f=s,p=s;for(let m=0;m<r.rangeCount;m++){let x=r.getRangeAt(m);f=Math.min(f,e.docView.posFromDOM(x.startContainer,x.startOffset,1)),p=Math.max(p,e.docView.posFromDOM(x.endContainer,x.endOffset,-1))}if(f<0)return null;[l,s]=p==e.state.selection.anchor?[p,f]:[f,p],o=n.resolve(s)}else l=e.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(l<0)return null}let d=n.resolve(l);if(!c){let f=t=="pointer"||e.state.selection.head<o.pos&&!a?1:-1;c=D9(e,d,o,f)}return c}function nde(e){return e.editable?e.hasFocus():ade(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function bh(e,t=!1){let r=e.state.selection;if(ide(e,r),!!nde(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&hs){let n=e.domSelectionRange(),i=e.domObserver.currentSelection;if(n.anchorNode&&i.anchorNode&&ix(n.anchorNode,n.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)Sqe(e);else{let{anchor:n,head:i}=r,a,s;hX&&!(r instanceof Ur)&&(r.$from.parent.inlineContent||(a=pX(e,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(s=pX(e,r.to))),e.docView.setSelection(n,i,e,t),hX&&(a&&mX(a),s&&mX(s)),r.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&wqe(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const hX=go||hs&&Wue<63;function pX(e,t){let{node:r,offset:n}=e.docView.domFromPos(t,0),i=n<r.childNodes.length?r.childNodes[n]:null,a=n?r.childNodes[n-1]:null;if(go&&i&&i.contentEditable=="false")return gD(i);if((!i||i.contentEditable=="false")&&(!a||a.contentEditable=="false")){if(i)return gD(i);if(a)return gD(a)}}function gD(e){return e.contentEditable="true",go&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function mX(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function wqe(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let r=e.domSelectionRange(),n=r.anchorNode,i=r.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(r.anchorNode!=n||r.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!nde(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function Sqe(e){let t=e.domSelection();if(!t)return;let r=e.cursorWrapper.dom,n=r.nodeName=="IMG";n?t.collapse(r.parentNode,Rs(r)+1):t.collapse(r,0),!n&&!e.state.selection.visible&&Sl&&b0<=11&&(r.disabled=!0,r.disabled=!1)}function ide(e,t){if(t instanceof pr){let r=e.docView.descAt(t.from);r!=e.lastSelectedViewDesc&&(gX(e),r&&r.selectNode(),e.lastSelectedViewDesc=r)}else gX(e)}function gX(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function D9(e,t,r,n){return e.someProp("createSelectionBetween",i=>i(e,t,r))||Ur.between(t,r,n)}function xX(e){return e.editable&&!e.hasFocus()?!1:ade(e)}function ade(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function Eqe(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),r=e.domSelectionRange();return ix(t.node,t.offset,r.anchorNode,r.anchorOffset)}function H8(e,t){let{$anchor:r,$head:n}=e.selection,i=t>0?r.max(n):r.min(n),a=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return a&&dn.findFrom(a,t)}function Mp(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function vX(e,t,r){let n=e.state.selection;if(n instanceof Ur)if(r.indexOf("s")>-1){let{$head:i}=n,a=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;let s=e.state.doc.resolve(i.pos+a.nodeSize*(t<0?-1:1));return Mp(e,new Ur(n.$anchor,s))}else if(n.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=H8(e.state,t);return i&&i instanceof pr?Mp(e,i):!1}else if(!(Hc&&r.indexOf("m")>-1)){let i=n.$head,a=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,s;if(!a||a.isText)return!1;let o=t<0?i.pos-a.nodeSize:i.pos;return a.isAtom||(s=e.docView.descAt(o))&&!s.contentDOM?pr.isSelectable(a)?Mp(e,new pr(t<0?e.state.doc.resolve(i.pos-a.nodeSize):i)):lC?Mp(e,new Ur(e.state.doc.resolve(t<0?o:o+a.nodeSize))):!1:!1}}else return!1;else{if(n instanceof pr&&n.node.isInline)return Mp(e,new Ur(t>0?n.$to:n.$from));{let i=H8(e.state,t);return i?Mp(e,i):!1}}}function AT(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function S2(e,t){let r=e.pmViewDesc;return r&&r.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function O1(e,t){return t<0?Cqe(e):kqe(e)}function Cqe(e){let t=e.domSelectionRange(),r=t.focusNode,n=t.focusOffset;if(!r)return;let i,a,s=!1;for(eu&&r.nodeType==1&&n<AT(r)&&S2(r.childNodes[n],-1)&&(s=!0);;)if(n>0){if(r.nodeType!=1)break;{let o=r.childNodes[n-1];if(S2(o,-1))i=r,a=--n;else if(o.nodeType==3)r=o,n=r.nodeValue.length;else break}}else{if(sde(r))break;{let o=r.previousSibling;for(;o&&S2(o,-1);)i=r.parentNode,a=Rs(o),o=o.previousSibling;if(o)r=o,n=AT(r);else{if(r=r.parentNode,r==e.dom)break;n=0}}}s?W8(e,r,n):i&&W8(e,i,a)}function kqe(e){let t=e.domSelectionRange(),r=t.focusNode,n=t.focusOffset;if(!r)return;let i=AT(r),a,s;for(;;)if(n<i){if(r.nodeType!=1)break;let o=r.childNodes[n];if(S2(o,1))a=r,s=++n;else break}else{if(sde(r))break;{let o=r.nextSibling;for(;o&&S2(o,1);)a=o.parentNode,s=Rs(o)+1,o=o.nextSibling;if(o)r=o,n=0,i=AT(r);else{if(r=r.parentNode,r==e.dom)break;n=i=0}}}a&&W8(e,a,s)}function sde(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function _qe(e,t){for(;e&&t==e.childNodes.length&&!oC(e);)t=Rs(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let r=e.childNodes[t];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;e=r,t=0}}function Nqe(e,t){for(;e&&!t&&!oC(e);)t=Rs(e),e=e.parentNode;for(;e&&t;){let r=e.childNodes[t-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;e=r,t=e.childNodes.length}}function W8(e,t,r){if(t.nodeType!=3){let a,s;(s=_qe(t,r))?(t=s,r=0):(a=Nqe(t,r))&&(t=a,r=a.nodeValue.length)}let n=e.domSelection();if(!n)return;if(u3(n)){let a=document.createRange();a.setEnd(t,r),a.setStart(t,r),n.removeAllRanges(),n.addRange(a)}else n.extend&&n.extend(t,r);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&bh(e)},50)}function yX(e,t){let r=e.state.doc.resolve(t);if(!(hs||Vue)&&r.parent.inlineContent){let i=e.coordsAtPos(t);if(t>r.start()){let a=e.coordsAtPos(t-1),s=(a.top+a.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(a.left-i.left)>1)return a.left<i.left?"ltr":"rtl"}if(t<r.end()){let a=e.coordsAtPos(t+1),s=(a.top+a.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(a.left-i.left)>1)return a.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function bX(e,t,r){let n=e.state.selection;if(n instanceof Ur&&!n.empty||r.indexOf("s")>-1||Hc&&r.indexOf("m")>-1)return!1;let{$from:i,$to:a}=n;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let s=H8(e.state,t);if(s&&s instanceof pr)return Mp(e,s)}if(!i.parent.inlineContent){let s=t<0?i:a,o=n instanceof ac?dn.near(s,t):dn.findFrom(s,t);return o?Mp(e,o):!1}return!1}function wX(e,t){if(!(e.state.selection instanceof Ur))return!0;let{$head:r,$anchor:n,empty:i}=e.state.selection;if(!r.sameParent(n))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let a=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(a&&!a.isText){let s=e.state.tr;return t<0?s.delete(r.pos-a.nodeSize,r.pos):s.delete(r.pos,r.pos+a.nodeSize),e.dispatch(s),!0}return!1}function SX(e,t,r){e.domObserver.stop(),t.contentEditable=r,e.domObserver.start()}function Aqe(e){if(!go||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:r}=e.domSelectionRange();if(t&&t.nodeType==1&&r==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let n=t.firstChild;SX(e,n,"true"),setTimeout(()=>SX(e,n,"false"),20)}return!1}function Tqe(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function Iqe(e,t){let r=t.keyCode,n=Tqe(t);if(r==8||Hc&&r==72&&n=="c")return wX(e,-1)||O1(e,-1);if(r==46&&!t.shiftKey||Hc&&r==68&&n=="c")return wX(e,1)||O1(e,1);if(r==13||r==27)return!0;if(r==37||Hc&&r==66&&n=="c"){let i=r==37?yX(e,e.state.selection.from)=="ltr"?-1:1:-1;return vX(e,i,n)||O1(e,i)}else if(r==39||Hc&&r==70&&n=="c"){let i=r==39?yX(e,e.state.selection.from)=="ltr"?1:-1:1;return vX(e,i,n)||O1(e,i)}else{if(r==38||Hc&&r==80&&n=="c")return bX(e,-1,n)||O1(e,-1);if(r==40||Hc&&r==78&&n=="c")return Aqe(e)||bX(e,1,n)||O1(e,1);if(n==(Hc?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function M9(e,t){e.someProp("transformCopied",m=>{t=m(t,e)});let r=[],{content:n,openStart:i,openEnd:a}=t;for(;i>1&&a>1&&n.childCount==1&&n.firstChild.childCount==1;){i--,a--;let m=n.firstChild;r.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),n=m.content}let s=e.someProp("clipboardSerializer")||$x.fromSchema(e.state.schema),o=fde(),l=o.createElement("div");l.appendChild(s.serializeFragment(n,{document:o}));let c=l.firstChild,d,f=0;for(;c&&c.nodeType==1&&(d=dde[c.nodeName.toLowerCase()]);){for(let m=d.length-1;m>=0;m--){let x=o.createElement(d[m]);for(;l.firstChild;)x.appendChild(l.firstChild);l.appendChild(x),f++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${a}${f?` -${f}`:""} ${JSON.stringify(r)}`);let p=e.someProp("clipboardTextSerializer",m=>m(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:p,slice:t}}function ode(e,t,r,n,i){let a=i.parent.type.spec.code,s,o;if(!r&&!t)return null;let l=!!t&&(n||a||!r);if(l){if(e.someProp("transformPastedText",p=>{t=p(t,a||n,e)}),a)return o=new Vt(It.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",p=>{o=p(o,e,!0)}),o;let f=e.someProp("clipboardTextParser",p=>p(t,i,n,e));if(f)o=f;else{let p=i.marks(),{schema:m}=e.state,x=$x.fromSchema(m);s=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(v=>{let b=s.appendChild(document.createElement("p"));v&&b.appendChild(x.serializeNode(m.text(v,p)))})}}else e.someProp("transformPastedHTML",f=>{r=f(r,e)}),s=jqe(r),lC&&Dqe(s);let c=s&&s.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let f=+d[3];f>0;f--){let p=s.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;s=p}if(o||(o=(e.someProp("clipboardParser")||e.someProp("domParser")||y2.fromSchema(e.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||d),context:i,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!Oqe.test(p.parentNode.nodeName)?{ignore:!0}:null}})),d)o=Mqe(EX(o,+d[1],+d[2]),d[4]);else if(o=Vt.maxOpen(Pqe(o.content,i),!0),o.openStart||o.openEnd){let f=0,p=0;for(let m=o.content.firstChild;f<o.openStart&&!m.type.spec.isolating;f++,m=m.firstChild);for(let m=o.content.lastChild;p<o.openEnd&&!m.type.spec.isolating;p++,m=m.lastChild);o=EX(o,f,p)}return e.someProp("transformPasted",f=>{o=f(o,e,l)}),o}const Oqe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Pqe(e,t){if(e.childCount<2)return e;for(let r=t.depth;r>=0;r--){let i=t.node(r).contentMatchAt(t.index(r)),a,s=[];if(e.forEach(o=>{if(!s)return;let l=i.findWrapping(o.type),c;if(!l)return s=null;if(c=s.length&&a.length&&cde(l,a,o,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=ude(s[s.length-1],a.length));let d=lde(o,l);s.push(d),i=i.matchType(d.type),a=l}}),s)return It.from(s)}return e}function lde(e,t,r=0){for(let n=t.length-1;n>=r;n--)e=t[n].create(null,It.from(e));return e}function cde(e,t,r,n,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let a=cde(e,t,r,n.lastChild,i+1);if(a)return n.copy(n.content.replaceChild(n.childCount-1,a));if(n.contentMatchAt(n.childCount).matchType(i==e.length-1?r.type:e[i+1]))return n.copy(n.content.append(It.from(lde(r,e,i+1))))}}function ude(e,t){if(t==0)return e;let r=e.content.replaceChild(e.childCount-1,ude(e.lastChild,t-1)),n=e.contentMatchAt(e.childCount).fillBefore(It.empty,!0);return e.copy(r.append(n))}function V8(e,t,r,n,i,a){let s=t<0?e.firstChild:e.lastChild,o=s.content;return e.childCount>1&&(a=0),i<n-1&&(o=V8(o,t,r,n,i+1,a)),i>=r&&(o=t<0?s.contentMatchAt(0).fillBefore(o,a<=i).append(o):o.append(s.contentMatchAt(s.childCount).fillBefore(It.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(o))}function EX(e,t,r){return t<e.openStart&&(e=new Vt(V8(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),r<e.openEnd&&(e=new Vt(V8(e.content,1,r,e.openEnd,0,0),e.openStart,r)),e}const dde={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let CX=null;function fde(){return CX||(CX=document.implementation.createHTMLDocument("title"))}let xD=null;function Rqe(e){let t=window.trustedTypes;return t?(xD||(xD=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),xD.createHTML(e)):e}function jqe(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let r=fde().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(e),i;if((i=n&&dde[n[1].toLowerCase()])&&(e=i.map(a=>"<"+a+">").join("")+e+i.map(a=>"</"+a+">").reverse().join("")),r.innerHTML=Rqe(e),i)for(let a=0;a<i.length;a++)r=r.querySelector(i[a])||r;return r}function Dqe(e){let t=e.querySelectorAll(hs?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<t.length;r++){let n=t[r];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),n)}}function Mqe(e,t){if(!e.size)return e;let r=e.content.firstChild.type.schema,n;try{n=JSON.parse(t)}catch{return e}let{content:i,openStart:a,openEnd:s}=e;for(let o=n.length-2;o>=0;o-=2){let l=r.nodes[n[o]];if(!l||l.hasRequiredAttrs())break;i=It.from(l.create(n[o+1],i)),a++,s++}return new Vt(i,a,s)}const Vo={},qo={},Fqe={touchstart:!0,touchmove:!0};class Lqe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Bqe(e){for(let t in Vo){let r=Vo[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=n=>{$qe(e,n)&&!F9(e,n)&&(e.editable||!(n.type in qo))&&r(e,n)},Fqe[t]?{passive:!0}:void 0)}go&&e.dom.addEventListener("input",()=>null),q8(e)}function o0(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function Uqe(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function q8(e){e.someProp("handleDOMEvents",t=>{for(let r in t)e.input.eventHandlers[r]||e.dom.addEventListener(r,e.input.eventHandlers[r]=n=>F9(e,n))})}function F9(e,t){return e.someProp("handleDOMEvents",r=>{let n=r[t.type];return n?n(e,t)||t.defaultPrevented:!1})}function $qe(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let r=t.target;r!=e.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(t))return!1;return!0}function zqe(e,t){!F9(e,t)&&Vo[t.type]&&(e.editable||!(t.type in qo))&&Vo[t.type](e,t)}qo.keydown=(e,t)=>{let r=t;if(e.input.shiftKey=r.keyCode==16||r.shiftKey,!pde(e,r)&&(e.input.lastKeyCode=r.keyCode,e.input.lastKeyCodeTime=Date.now(),!(ch&&hs&&r.keyCode==13)))if(r.keyCode!=229&&e.domObserver.forceFlush(),my&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let n=Date.now();e.input.lastIOSEnter=n,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==n&&(e.someProp("handleKeyDown",i=>i(e,Hm(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",n=>n(e,r))||Iqe(e,r)?r.preventDefault():o0(e,"key")};qo.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};qo.keypress=(e,t)=>{let r=t;if(pde(e,r)||!r.charCode||r.ctrlKey&&!r.altKey||Hc&&r.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,r))){r.preventDefault();return}let n=e.state.selection;if(!(n instanceof Ur)||!n.$from.sameParent(n.$to)){let i=String.fromCharCode(r.charCode),a=()=>e.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",s=>s(e,n.$from.pos,n.$to.pos,i,a))&&e.dispatch(a()),r.preventDefault()}};function f3(e){return{left:e.clientX,top:e.clientY}}function Hqe(e,t){let r=t.x-e.clientX,n=t.y-e.clientY;return r*r+n*n<100}function L9(e,t,r,n,i){if(n==-1)return!1;let a=e.state.doc.resolve(n);for(let s=a.depth+1;s>0;s--)if(e.someProp(t,o=>s>a.depth?o(e,r,a.nodeAfter,a.before(s),i,!0):o(e,r,a.node(s),a.before(s),i,!1)))return!0;return!1}function Cv(e,t,r){if(e.focused||e.focus(),e.state.selection.eq(t))return;let n=e.state.tr.setSelection(t);n.setMeta("pointer",!0),e.dispatch(n)}function Wqe(e,t){if(t==-1)return!1;let r=e.state.doc.resolve(t),n=r.nodeAfter;return n&&n.isAtom&&pr.isSelectable(n)?(Cv(e,new pr(r)),!0):!1}function Vqe(e,t){if(t==-1)return!1;let r=e.state.selection,n,i;r instanceof pr&&(n=r.node);let a=e.state.doc.resolve(t);for(let s=a.depth+1;s>0;s--){let o=s>a.depth?a.nodeAfter:a.node(s);if(pr.isSelectable(o)){n&&r.$from.depth>0&&s>=r.$from.depth&&a.before(r.$from.depth+1)==r.$from.pos?i=a.before(r.$from.depth):i=a.before(s);break}}return i!=null?(Cv(e,pr.create(e.state.doc,i)),!0):!1}function qqe(e,t,r,n,i){return L9(e,"handleClickOn",t,r,n)||e.someProp("handleClick",a=>a(e,t,n))||(i?Vqe(e,r):Wqe(e,r))}function Gqe(e,t,r,n){return L9(e,"handleDoubleClickOn",t,r,n)||e.someProp("handleDoubleClick",i=>i(e,t,n))}function Kqe(e,t,r,n){return L9(e,"handleTripleClickOn",t,r,n)||e.someProp("handleTripleClick",i=>i(e,t,n))||Xqe(e,r,n)}function Xqe(e,t,r){if(r.button!=0)return!1;let n=e.state.doc;if(t==-1)return n.inlineContent?(Cv(e,Ur.create(n,0,n.content.size)),!0):!1;let i=n.resolve(t);for(let a=i.depth+1;a>0;a--){let s=a>i.depth?i.nodeAfter:i.node(a),o=i.before(a);if(s.inlineContent)Cv(e,Ur.create(n,o+1,o+1+s.content.size));else if(pr.isSelectable(s))Cv(e,pr.create(n,o));else continue;return!0}}function B9(e){return TT(e)}const hde=Hc?"metaKey":"ctrlKey";Vo.mousedown=(e,t)=>{let r=t;e.input.shiftKey=r.shiftKey;let n=B9(e),i=Date.now(),a="singleClick";i-e.input.lastClick.time<500&&Hqe(r,e.input.lastClick)&&!r[hde]&&e.input.lastClick.button==r.button&&(e.input.lastClick.type=="singleClick"?a="doubleClick":e.input.lastClick.type=="doubleClick"&&(a="tripleClick")),e.input.lastClick={time:i,x:r.clientX,y:r.clientY,type:a,button:r.button};let s=e.posAtCoords(f3(r));s&&(a=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new Yqe(e,s,r,!!n)):(a=="doubleClick"?Gqe:Kqe)(e,s.pos,s.inside,r)?r.preventDefault():o0(e,"pointer"))};class Yqe{constructor(t,r,n,i){this.view=t,this.pos=r,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!n[hde],this.allowDefault=n.shiftKey;let a,s;if(r.inside>-1)a=t.state.doc.nodeAt(r.inside),s=r.inside;else{let d=t.state.doc.resolve(r.pos);a=d.parent,s=d.depth?d.before():0}const o=i?null:n.target,l=o?t.docView.nearestDesc(o,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=t.state;(n.button==0&&a.type.spec.draggable&&a.type.spec.selectable!==!1||c instanceof pr&&c.from<=s&&c.to>s)&&(this.mightDrag={node:a,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&eu&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),o0(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>bh(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(f3(t))),this.updateAllowDefault(t),this.allowDefault||!r?o0(this.view,"pointer"):qqe(this.view,r.pos,r.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||go&&this.mightDrag&&!this.mightDrag.node.isAtom||hs&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(Cv(this.view,dn.near(this.view.state.doc.resolve(r.pos))),t.preventDefault()):o0(this.view,"pointer")}move(t){this.updateAllowDefault(t),o0(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}Vo.touchstart=e=>{e.input.lastTouch=Date.now(),B9(e),o0(e,"pointer")};Vo.touchmove=e=>{e.input.lastTouch=Date.now(),o0(e,"pointer")};Vo.contextmenu=e=>B9(e);function pde(e,t){return e.composing?!0:go&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const Qqe=ch?5e3:-1;qo.compositionstart=qo.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,r=t.selection.$to;if(t.selection instanceof Ur&&(t.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)||hs&&Vue&&Jqe(e)))e.markCursor=e.state.storedMarks||r.marks(),TT(e,!0),e.markCursor=null;else if(TT(e,!t.selection.empty),eu&&t.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=e.domSelectionRange();for(let i=n.focusNode,a=n.focusOffset;i&&i.nodeType==1&&a!=0;){let s=a<0?i.lastChild:i.childNodes[a-1];if(!s)break;if(s.nodeType==3){let o=e.domSelection();o&&o.collapse(s,s.nodeValue.length);break}else i=s,a=-1}}e.input.composing=!0}mde(e,Qqe)};function Jqe(e){let{focusNode:t,focusOffset:r}=e.domSelectionRange();if(!t||t.nodeType!=1||r>=t.childNodes.length)return!1;let n=t.childNodes[r];return n.nodeType==1&&n.contentEditable=="false"}qo.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,mde(e,20))};function mde(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>TT(e),t))}function gde(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=eGe());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function Zqe(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let r=VVe(t.focusNode,t.focusOffset),n=qVe(t.focusNode,t.focusOffset);if(r&&n&&r!=n){let i=n.pmViewDesc,a=e.domObserver.lastChangedTextNode;if(r==a||n==a)return a;if(!i||!i.isText(n.nodeValue))return n;if(e.input.compositionNode==n){let s=r.pmViewDesc;if(!(!s||!s.isText(r.nodeValue)))return n}}return r||n}function eGe(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function TT(e,t=!1){if(!(ch&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),gde(e),t||e.docView&&e.docView.dirty){let r=j9(e),n=e.state.selection;return r&&!r.eq(n)?e.dispatch(e.state.tr.setSelection(r)):(e.markCursor||t)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function tGe(e,t){if(!e.dom.parentNode)return;let r=e.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(t),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),e.focus()},50)}const SS=Sl&&b0<15||my&&YVe<604;Vo.copy=qo.cut=(e,t)=>{let r=t,n=e.state.selection,i=r.type=="cut";if(n.empty)return;let a=SS?null:r.clipboardData,s=n.content(),{dom:o,text:l}=M9(e,s);a?(r.preventDefault(),a.clearData(),a.setData("text/html",o.innerHTML),a.setData("text/plain",l)):tGe(e,o),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function rGe(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function nGe(e,t){if(!e.dom.parentNode)return;let r=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,n=e.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),n.parentNode&&n.parentNode.removeChild(n),r?ES(e,n.value,null,i,t):ES(e,n.textContent,n.innerHTML,i,t)},50)}function ES(e,t,r,n,i){let a=ode(e,t,r,n,e.state.selection.$from);if(e.someProp("handlePaste",l=>l(e,i,a||Vt.empty)))return!0;if(!a)return!1;let s=rGe(a),o=s?e.state.tr.replaceSelectionWith(s,n):e.state.tr.replaceSelection(a);return e.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function xde(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let r=e.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}qo.paste=(e,t)=>{let r=t;if(e.composing&&!ch)return;let n=SS?null:r.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;n&&ES(e,xde(n),n.getData("text/html"),i,r)?r.preventDefault():nGe(e,r)};class vde{constructor(t,r,n){this.slice=t,this.move=r,this.node=n}}const iGe=Hc?"altKey":"ctrlKey";function yde(e,t){let r=e.someProp("dragCopies",n=>!n(t));return r??!t[iGe]}Vo.dragstart=(e,t)=>{let r=t,n=e.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let i=e.state.selection,a=i.empty?null:e.posAtCoords(f3(r)),s;if(!(a&&a.pos>=i.from&&a.pos<=(i instanceof pr?i.to-1:i.to))){if(n&&n.mightDrag)s=pr.create(e.state.doc,n.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let f=e.docView.nearestDesc(r.target,!0);f&&f.node.type.spec.draggable&&f!=e.docView&&(s=pr.create(e.state.doc,f.posBefore))}}let o=(s||e.state.selection).content(),{dom:l,text:c,slice:d}=M9(e,o);(!r.dataTransfer.files.length||!hs||Wue>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(SS?"Text":"text/html",l.innerHTML),r.dataTransfer.effectAllowed="copyMove",SS||r.dataTransfer.setData("text/plain",c),e.dragging=new vde(d,yde(e,r),s)};Vo.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};qo.dragover=qo.dragenter=(e,t)=>t.preventDefault();qo.drop=(e,t)=>{try{aGe(e,t,e.dragging)}finally{e.dragging=null}};function aGe(e,t,r){if(!t.dataTransfer)return;let n=e.posAtCoords(f3(t));if(!n)return;let i=e.state.doc.resolve(n.pos),a=r&&r.slice;a?e.someProp("transformPasted",m=>{a=m(a,e,!1)}):a=ode(e,xde(t.dataTransfer),SS?null:t.dataTransfer.getData("text/html"),!1,i);let s=!!(r&&yde(e,t));if(e.someProp("handleDrop",m=>m(e,t,a||Vt.empty,s))){t.preventDefault();return}if(!a)return;t.preventDefault();let o=a?Eue(e.state.doc,i.pos,a):i.pos;o==null&&(o=i.pos);let l=e.state.tr;if(s){let{node:m}=r;m?m.replace(l):l.deleteSelection()}let c=l.mapping.map(o),d=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,f=l.doc;if(d?l.replaceRangeWith(c,c,a.content.firstChild):l.replaceRange(c,c,a),l.doc.eq(f))return;let p=l.doc.resolve(c);if(d&&pr.isSelectable(a.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(a.content.firstChild))l.setSelection(new pr(p));else{let m=l.mapping.map(o);l.mapping.maps[l.mapping.maps.length-1].forEach((x,v,b,w)=>m=w),l.setSelection(D9(e,p,l.doc.resolve(m)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))}Vo.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&bh(e)},20))};Vo.blur=(e,t)=>{let r=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),r.relatedTarget&&e.dom.contains(r.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};Vo.beforeinput=(e,t)=>{if(hs&&ch&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:n}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=n||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",a=>a(e,Hm(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in qo)Vo[e]=qo[e];function CS(e,t){if(e==t)return!0;for(let r in e)if(e[r]!==t[r])return!1;for(let r in t)if(!(r in e))return!1;return!0}class IT{constructor(t,r){this.toDOM=t,this.spec=r||_g,this.side=this.spec.side||0}map(t,r,n,i){let{pos:a,deleted:s}=t.mapResult(r.from+i,this.side<0?-1:1);return s?null:new uo(a-n,a-n,this)}valid(){return!0}eq(t){return this==t||t instanceof IT&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&CS(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class S0{constructor(t,r){this.attrs=t,this.spec=r||_g}map(t,r,n,i){let a=t.map(r.from+i,this.spec.inclusiveStart?-1:1)-n,s=t.map(r.to+i,this.spec.inclusiveEnd?1:-1)-n;return a>=s?null:new uo(a,s,this)}valid(t,r){return r.from<r.to}eq(t){return this==t||t instanceof S0&&CS(this.attrs,t.attrs)&&CS(this.spec,t.spec)}static is(t){return t.type instanceof S0}destroy(){}}class U9{constructor(t,r){this.attrs=t,this.spec=r||_g}map(t,r,n,i){let a=t.mapResult(r.from+i,1);if(a.deleted)return null;let s=t.mapResult(r.to+i,-1);return s.deleted||s.pos<=a.pos?null:new uo(a.pos-n,s.pos-n,this)}valid(t,r){let{index:n,offset:i}=t.content.findIndex(r.from),a;return i==r.from&&!(a=t.child(n)).isText&&i+a.nodeSize==r.to}eq(t){return this==t||t instanceof U9&&CS(this.attrs,t.attrs)&&CS(this.spec,t.spec)}destroy(){}}class uo{constructor(t,r,n){this.from=t,this.to=r,this.type=n}copy(t,r){return new uo(t,r,this.type)}eq(t,r=0){return this.type.eq(t.type)&&this.from+r==t.from&&this.to+r==t.to}map(t,r,n){return this.type.map(t,this,r,n)}static widget(t,r,n){return new uo(t,t,new IT(r,n))}static inline(t,r,n,i){return new uo(t,r,new S0(n,i))}static node(t,r,n,i){return new uo(t,r,new U9(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof S0}get widget(){return this.type instanceof IT}}const $1=[],_g={};class Ri{constructor(t,r){this.local=t.length?t:$1,this.children=r.length?r:$1}static create(t,r){return r.length?OT(r,t,0,_g):Zs}find(t,r,n){let i=[];return this.findInner(t??0,r??1e9,i,0,n),i}findInner(t,r,n,i,a){for(let s=0;s<this.local.length;s++){let o=this.local[s];o.from<=r&&o.to>=t&&(!a||a(o.spec))&&n.push(o.copy(o.from+i,o.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<r&&this.children[s+1]>t){let o=this.children[s]+1;this.children[s+2].findInner(t-o,r-o,n,i+o,a)}}map(t,r,n){return this==Zs||t.maps.length==0?this:this.mapInner(t,r,0,0,n||_g)}mapInner(t,r,n,i,a){let s;for(let o=0;o<this.local.length;o++){let l=this.local[o].map(t,n,i);l&&l.type.valid(r,l)?(s||(s=[])).push(l):a.onRemove&&a.onRemove(this.local[o].spec)}return this.children.length?sGe(this.children,s||[],t,r,n,i,a):s?new Ri(s.sort(Ng),$1):Zs}add(t,r){return r.length?this==Zs?Ri.create(t,r):this.addInner(t,r,0):this}addInner(t,r,n){let i,a=0;t.forEach((o,l)=>{let c=l+n,d;if(d=wde(r,o,c)){for(i||(i=this.children.slice());a<i.length&&i[a]<l;)a+=3;i[a]==l?i[a+2]=i[a+2].addInner(o,d,c+1):i.splice(a,0,l,l+o.nodeSize,OT(d,o,c+1,_g)),a+=3}});let s=bde(a?Sde(r):r,-n);for(let o=0;o<s.length;o++)s[o].type.valid(t,s[o])||s.splice(o--,1);return new Ri(s.length?this.local.concat(s).sort(Ng):this.local,i||this.children)}remove(t){return t.length==0||this==Zs?this:this.removeInner(t,0)}removeInner(t,r){let n=this.children,i=this.local;for(let a=0;a<n.length;a+=3){let s,o=n[a]+r,l=n[a+1]+r;for(let d=0,f;d<t.length;d++)(f=t[d])&&f.from>o&&f.to<l&&(t[d]=null,(s||(s=[])).push(f));if(!s)continue;n==this.children&&(n=this.children.slice());let c=n[a+2].removeInner(s,o+1);c!=Zs?n[a+2]=c:(n.splice(a,3),a-=3)}if(i.length){for(let a=0,s;a<t.length;a++)if(s=t[a])for(let o=0;o<i.length;o++)i[o].eq(s,r)&&(i==this.local&&(i=this.local.slice()),i.splice(o--,1))}return n==this.children&&i==this.local?this:i.length||n.length?new Ri(i,n):Zs}forChild(t,r){if(this==Zs)return this;if(r.isLeaf)return Ri.empty;let n,i;for(let o=0;o<this.children.length;o+=3)if(this.children[o]>=t){this.children[o]==t&&(n=this.children[o+2]);break}let a=t+1,s=a+r.content.size;for(let o=0;o<this.local.length;o++){let l=this.local[o];if(l.from<s&&l.to>a&&l.type instanceof S0){let c=Math.max(a,l.from)-a,d=Math.min(s,l.to)-a;c<d&&(i||(i=[])).push(l.copy(c,d))}}if(i){let o=new Ri(i.sort(Ng),$1);return n?new Wp([o,n]):o}return n||Zs}eq(t){if(this==t)return!0;if(!(t instanceof Ri)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(t.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=t.children[r]||this.children[r+1]!=t.children[r+1]||!this.children[r+2].eq(t.children[r+2]))return!1;return!0}locals(t){return $9(this.localsInner(t))}localsInner(t){if(this==Zs)return $1;if(t.inlineContent||!this.local.some(S0.is))return this.local;let r=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof S0||r.push(this.local[n]);return r}forEachSet(t){t(this)}}Ri.empty=new Ri([],[]);Ri.removeOverlap=$9;const Zs=Ri.empty;class Wp{constructor(t){this.members=t}map(t,r){const n=this.members.map(i=>i.map(t,r,_g));return Wp.from(n)}forChild(t,r){if(r.isLeaf)return Ri.empty;let n=[];for(let i=0;i<this.members.length;i++){let a=this.members[i].forChild(t,r);a!=Zs&&(a instanceof Wp?n=n.concat(a.members):n.push(a))}return Wp.from(n)}eq(t){if(!(t instanceof Wp)||t.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(t.members[r]))return!1;return!0}locals(t){let r,n=!0;for(let i=0;i<this.members.length;i++){let a=this.members[i].localsInner(t);if(a.length)if(!r)r=a;else{n&&(r=r.slice(),n=!1);for(let s=0;s<a.length;s++)r.push(a[s])}}return r?$9(n?r:r.sort(Ng)):$1}static from(t){switch(t.length){case 0:return Zs;case 1:return t[0];default:return new Wp(t.every(r=>r instanceof Ri)?t:t.reduce((r,n)=>r.concat(n instanceof Ri?n:n.members),[]))}}forEachSet(t){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(t)}}function sGe(e,t,r,n,i,a,s){let o=e.slice();for(let c=0,d=a;c<r.maps.length;c++){let f=0;r.maps[c].forEach((p,m,x,v)=>{let b=v-x-(m-p);for(let w=0;w<o.length;w+=3){let k=o[w+1];if(k<0||p>k+d-f)continue;let E=o[w]+d-f;m>=E?o[w+1]=p<=E?-2:-1:p>=d&&b&&(o[w]+=b,o[w+1]+=b)}f+=b}),d=r.maps[c].map(d,-1)}let l=!1;for(let c=0;c<o.length;c+=3)if(o[c+1]<0){if(o[c+1]==-2){l=!0,o[c+1]=-1;continue}let d=r.map(e[c]+a),f=d-i;if(f<0||f>=n.content.size){l=!0;continue}let p=r.map(e[c+1]+a,-1),m=p-i,{index:x,offset:v}=n.content.findIndex(f),b=n.maybeChild(x);if(b&&v==f&&v+b.nodeSize==m){let w=o[c+2].mapInner(r,b,d+1,e[c]+a+1,s);w!=Zs?(o[c]=f,o[c+1]=m,o[c+2]=w):(o[c+1]=-2,l=!0)}else l=!0}if(l){let c=oGe(o,e,t,r,i,a,s),d=OT(c,n,0,s);t=d.local;for(let f=0;f<o.length;f+=3)o[f+1]<0&&(o.splice(f,3),f-=3);for(let f=0,p=0;f<d.children.length;f+=3){let m=d.children[f];for(;p<o.length&&o[p]<m;)p+=3;o.splice(p,0,d.children[f],d.children[f+1],d.children[f+2])}}return new Ri(t.sort(Ng),o)}function bde(e,t){if(!t||!e.length)return e;let r=[];for(let n=0;n<e.length;n++){let i=e[n];r.push(new uo(i.from+t,i.to+t,i.type))}return r}function oGe(e,t,r,n,i,a,s){function o(l,c){for(let d=0;d<l.local.length;d++){let f=l.local[d].map(n,i,c);f?r.push(f):s.onRemove&&s.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)o(l.children[d+2],l.children[d]+c+1)}for(let l=0;l<e.length;l+=3)e[l+1]==-1&&o(e[l+2],t[l]+a+1);return r}function wde(e,t,r){if(t.isLeaf)return null;let n=r+t.nodeSize,i=null;for(let a=0,s;a<e.length;a++)(s=e[a])&&s.from>r&&s.to<n&&((i||(i=[])).push(s),e[a]=null);return i}function Sde(e){let t=[];for(let r=0;r<e.length;r++)e[r]!=null&&t.push(e[r]);return t}function OT(e,t,r,n){let i=[],a=!1;t.forEach((o,l)=>{let c=wde(e,o,l+r);if(c){a=!0;let d=OT(c,o,r+l+1,n);d!=Zs&&i.push(l,l+o.nodeSize,d)}});let s=bde(a?Sde(e):e,-r).sort(Ng);for(let o=0;o<s.length;o++)s[o].type.valid(t,s[o])||(n.onRemove&&n.onRemove(s[o].spec),s.splice(o--,1));return s.length||i.length?new Ri(s,i):Zs}function Ng(e,t){return e.from-t.from||e.to-t.to}function $9(e){let t=e;for(let r=0;r<t.length-1;r++){let n=t[r];if(n.from!=n.to)for(let i=r+1;i<t.length;i++){let a=t[i];if(a.from==n.from){a.to!=n.to&&(t==e&&(t=e.slice()),t[i]=a.copy(a.from,n.to),kX(t,i+1,a.copy(n.to,a.to)));continue}else{a.from<n.to&&(t==e&&(t=e.slice()),t[r]=n.copy(n.from,a.from),kX(t,i,n.copy(a.from,n.to)));break}}}return t}function kX(e,t,r){for(;t<e.length&&Ng(r,e[t])>0;)t++;e.splice(t,0,r)}function vD(e){let t=[];return e.someProp("decorations",r=>{let n=r(e.state);n&&n!=Zs&&t.push(n)}),e.cursorWrapper&&t.push(Ri.create(e.state.doc,[e.cursorWrapper.deco])),Wp.from(t)}const lGe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},cGe=Sl&&b0<=11;class uGe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class dGe{constructor(t,r){this.view=t,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new uGe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let i=0;i<n.length;i++)this.queue.push(n[i]);Sl&&b0<=11&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),cGe&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,lGe)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let r=0;r<t.length;r++)this.queue.push(t[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(xX(this.view)){if(this.suppressingSelectionUpdates)return bh(this.view);if(Sl&&b0<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&ix(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let r=new Set,n;for(let a=t.focusNode;a;a=py(a))r.add(a);for(let a=t.anchorNode;a;a=py(a))if(r.has(a)){n=a;break}let i=n&&this.view.docView.nearestDesc(n);if(i&&i.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&xX(t)&&!this.ignoreSelectionChange(n),a=-1,s=-1,o=!1,l=[];if(t.editable)for(let d=0;d<r.length;d++){let f=this.registerMutation(r[d],l);f&&(a=a<0?f.from:Math.min(f.from,a),s=s<0?f.to:Math.max(f.to,s),f.typeOver&&(o=!0))}if(eu&&l.length){let d=l.filter(f=>f.nodeName=="BR");if(d.length==2){let[f,p]=d;f.parentNode&&f.parentNode.parentNode==p.parentNode?p.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let p of d){let m=p.parentNode;m&&m.nodeName=="LI"&&(!f||pGe(t,f)!=m)&&p.remove()}}}else if((hs||go)&&l.some(d=>d.nodeName=="BR")&&(t.input.lastKeyCode==8||t.input.lastKeyCode==46)){for(let d of l)if(d.nodeName=="BR"&&d.parentNode){let f=d.nextSibling;f&&f.nodeType==1&&f.contentEditable=="false"&&d.parentNode.removeChild(d)}}let c=null;a<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&u3(n)&&(c=j9(t))&&c.eq(dn.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,bh(t),this.currentSelection.set(n),t.scrollToSelection()):(a>-1||i)&&(a>-1&&(t.docView.markDirty(a,s),fGe(t)),this.handleDOMChange(a,s,o,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(n)||bh(t),this.currentSelection.set(n))}registerMutation(t,r){if(r.indexOf(t.target)>-1)return null;let n=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(n==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!n||n.ignoreMutation(t))return null;if(t.type=="childList"){for(let d=0;d<t.addedNodes.length;d++){let f=t.addedNodes[d];r.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(t.target))return{from:n.posBefore,to:n.posAfter};let i=t.previousSibling,a=t.nextSibling;if(Sl&&b0<=11&&t.addedNodes.length)for(let d=0;d<t.addedNodes.length;d++){let{previousSibling:f,nextSibling:p}=t.addedNodes[d];(!f||Array.prototype.indexOf.call(t.addedNodes,f)<0)&&(i=f),(!p||Array.prototype.indexOf.call(t.addedNodes,p)<0)&&(a=p)}let s=i&&i.parentNode==t.target?Rs(i)+1:0,o=n.localPosFromDOM(t.target,s,-1),l=a&&a.parentNode==t.target?Rs(a):t.target.childNodes.length,c=n.localPosFromDOM(t.target,l,1);return{from:o,to:c}}else return t.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=t.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let _X=new WeakMap,NX=!1;function fGe(e){if(!_X.has(e)&&(_X.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=eu,NX)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),NX=!0}}function AX(e,t){let r=t.startContainer,n=t.startOffset,i=t.endContainer,a=t.endOffset,s=e.domAtPos(e.state.selection.anchor);return ix(s.node,s.offset,i,a)&&([r,n,i,a]=[i,a,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:a}}function hGe(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return AX(e,i)}let r;function n(i){i.preventDefault(),i.stopImmediatePropagation(),r=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",n,!0),r?AX(e,r):null}function pGe(e,t){for(let r=t.parentNode;r&&r!=e.dom;r=r.parentNode){let n=e.docView.nearestDesc(r,!0);if(n&&n.node.isBlock)return r}return null}function mGe(e,t,r){let{node:n,fromOffset:i,toOffset:a,from:s,to:o}=e.docView.parseRange(t,r),l=e.domSelectionRange(),c,d=l.anchorNode;if(d&&e.dom.contains(d.nodeType==1?d:d.parentNode)&&(c=[{node:d,offset:l.anchorOffset}],u3(l)||c.push({node:l.focusNode,offset:l.focusOffset})),hs&&e.input.lastKeyCode===8)for(let b=a;b>i;b--){let w=n.childNodes[b-1],k=w.pmViewDesc;if(w.nodeName=="BR"&&!k){a=b;break}if(!k||k.size)break}let f=e.state.doc,p=e.someProp("domParser")||y2.fromSchema(e.state.schema),m=f.resolve(s),x=null,v=p.parse(n,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:i,to:a,preserveWhitespace:m.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:gGe,context:m});if(c&&c[0].pos!=null){let b=c[0].pos,w=c[1]&&c[1].pos;w==null&&(w=b),x={anchor:b+s,head:w+s}}return{doc:v,sel:x,from:s,to:o}}function gGe(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(go&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(e.parentNode.lastChild==e||go&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const xGe=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function vGe(e,t,r,n,i){let a=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let O=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,D=j9(e,O);if(D&&!e.state.selection.eq(D)){if(hs&&ch&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",B=>B(e,Hm(13,"Enter"))))return;let L=e.state.tr.setSelection(D);O=="pointer"?L.setMeta("pointer",!0):O=="key"&&L.scrollIntoView(),a&&L.setMeta("composition",a),e.dispatch(L)}return}let s=e.state.doc.resolve(t),o=s.sharedDepth(r);t=s.before(o+1),r=e.state.doc.resolve(r).after(o+1);let l=e.state.selection,c=mGe(e,t,r),d=e.state.doc,f=d.slice(c.from,c.to),p,m;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(p=e.state.selection.to,m="end"):(p=e.state.selection.from,m="start"),e.input.lastKeyCode=null;let x=wGe(f.content,c.doc.content,c.from,p,m);if(x&&e.input.domChangeCount++,(my&&e.input.lastIOSEnter>Date.now()-225||ch)&&i.some(O=>O.nodeType==1&&!xGe.test(O.nodeName))&&(!x||x.endA>=x.endB)&&e.someProp("handleKeyDown",O=>O(e,Hm(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!x)if(n&&l instanceof Ur&&!l.empty&&l.$head.sameParent(l.$anchor)&&!e.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))x={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let O=TX(e,e.state.doc,c.sel);if(O&&!O.eq(e.state.selection)){let D=e.state.tr.setSelection(O);a&&D.setMeta("composition",a),e.dispatch(D)}}return}e.state.selection.from<e.state.selection.to&&x.start==x.endB&&e.state.selection instanceof Ur&&(x.start>e.state.selection.from&&x.start<=e.state.selection.from+2&&e.state.selection.from>=c.from?x.start=e.state.selection.from:x.endA<e.state.selection.to&&x.endA>=e.state.selection.to-2&&e.state.selection.to<=c.to&&(x.endB+=e.state.selection.to-x.endA,x.endA=e.state.selection.to)),Sl&&b0<=11&&x.endB==x.start+1&&x.endA==x.start&&x.start>c.from&&c.doc.textBetween(x.start-c.from-1,x.start-c.from+1)==" "&&(x.start--,x.endA--,x.endB--);let v=c.doc.resolveNoCache(x.start-c.from),b=c.doc.resolveNoCache(x.endB-c.from),w=d.resolve(x.start),k=v.sameParent(b)&&v.parent.inlineContent&&w.end()>=x.endA;if((my&&e.input.lastIOSEnter>Date.now()-225&&(!k||i.some(O=>O.nodeName=="DIV"||O.nodeName=="P"))||!k&&v.pos<c.doc.content.size&&(!v.sameParent(b)||!v.parent.inlineContent)&&v.pos<b.pos&&!/\S/.test(c.doc.textBetween(v.pos,b.pos,"","")))&&e.someProp("handleKeyDown",O=>O(e,Hm(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>x.start&&bGe(d,x.start,x.endA,v,b)&&e.someProp("handleKeyDown",O=>O(e,Hm(8,"Backspace")))){ch&&hs&&e.domObserver.suppressSelectionUpdates();return}hs&&x.endB==x.start&&(e.input.lastChromeDelete=Date.now()),ch&&!k&&v.start()!=b.start()&&b.parentOffset==0&&v.depth==b.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==x.endA&&(x.endB-=2,b=c.doc.resolveNoCache(x.endB-c.from),setTimeout(()=>{e.someProp("handleKeyDown",function(O){return O(e,Hm(13,"Enter"))})},20));let E=x.start,N=x.endA,P=O=>{let D=O||e.state.tr.replace(E,N,c.doc.slice(x.start-c.from,x.endB-c.from));if(c.sel){let L=TX(e,D.doc,c.sel);L&&!(hs&&e.composing&&L.empty&&(x.start!=x.endB||e.input.lastChromeDelete<Date.now()-100)&&(L.head==E||L.head==D.mapping.map(N)-1)||Sl&&L.empty&&L.head==E)&&D.setSelection(L)}return a&&D.setMeta("composition",a),D.scrollIntoView()},R;if(k)if(v.pos==b.pos){Sl&&b0<=11&&v.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>bh(e),20));let O=P(e.state.tr.delete(E,N)),D=d.resolve(x.start).marksAcross(d.resolve(x.endA));D&&O.ensureMarks(D),e.dispatch(O)}else if(x.endA==x.endB&&(R=yGe(v.parent.content.cut(v.parentOffset,b.parentOffset),w.parent.content.cut(w.parentOffset,x.endA-w.start())))){let O=P(e.state.tr);R.type=="add"?O.addMark(E,N,R.mark):O.removeMark(E,N,R.mark),e.dispatch(O)}else if(v.parent.child(v.index()).isText&&v.index()==b.index()-(b.textOffset?0:1)){let O=v.parent.textBetween(v.parentOffset,b.parentOffset),D=()=>P(e.state.tr.insertText(O,E,N));e.someProp("handleTextInput",L=>L(e,E,N,O,D))||e.dispatch(D())}else e.dispatch(P());else e.dispatch(P())}function TX(e,t,r){return Math.max(r.anchor,r.head)>t.content.size?null:D9(e,t.resolve(r.anchor),t.resolve(r.head))}function yGe(e,t){let r=e.firstChild.marks,n=t.firstChild.marks,i=r,a=n,s,o,l;for(let d=0;d<n.length;d++)i=n[d].removeFromSet(i);for(let d=0;d<r.length;d++)a=r[d].removeFromSet(a);if(i.length==1&&a.length==0)o=i[0],s="add",l=d=>d.mark(o.addToSet(d.marks));else if(i.length==0&&a.length==1)o=a[0],s="remove",l=d=>d.mark(o.removeFromSet(d.marks));else return null;let c=[];for(let d=0;d<t.childCount;d++)c.push(l(t.child(d)));if(It.from(c).eq(e))return{mark:o,type:s}}function bGe(e,t,r,n,i){if(r-t<=i.pos-n.pos||yD(n,!0,!1)<i.pos)return!1;let a=e.resolve(t);if(!n.parent.isTextblock){let o=a.nodeAfter;return o!=null&&r==t+o.nodeSize}if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;let s=e.resolve(yD(a,!0,!0));return!s.parent.isTextblock||s.pos>r||yD(s,!0,!1)<r?!1:n.parent.content.cut(n.parentOffset).eq(s.parent.content)}function yD(e,t,r){let n=e.depth,i=t?e.end():e.pos;for(;n>0&&(t||e.indexAfter(n)==e.node(n).childCount);)n--,i++,t=!1;if(r){let a=e.node(n).maybeChild(e.indexAfter(n));for(;a&&!a.isLeaf;)a=a.firstChild,i++}return i}function wGe(e,t,r,n,i){let a=e.findDiffStart(t,r);if(a==null)return null;let{a:s,b:o}=e.findDiffEnd(t,r+e.size,r+t.size);if(i=="end"){let l=Math.max(0,a-Math.min(s,o));n-=s+l-a}if(s<a&&e.size<t.size){let l=n<=a&&n>=s?a-n:0;a-=l,a&&a<t.size&&IX(t.textBetween(a-1,a+1))&&(a+=l?1:-1),o=a+(o-s),s=a}else if(o<a){let l=n<=a&&n>=o?a-n:0;a-=l,a&&a<e.size&&IX(e.textBetween(a-1,a+1))&&(a+=l?1:-1),s=a+(s-o),o=a}return{start:a,endA:s,endB:o}}function IX(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),r=e.charCodeAt(1);return t>=56320&&t<=57343&&r>=55296&&r<=56319}class Ede{constructor(t,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Lqe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(DX),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=RX(this),PX(this),this.nodeViews=jX(this),this.docView=dX(this.state.doc,OX(this),vD(this),this.dom,this),this.domObserver=new dGe(this,(n,i,a,s)=>vGe(this,n,i,a,s)),this.domObserver.start(),Bqe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let r in t)this._props[r]=t[r];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&q8(this);let r=this._props;this._props=t,t.plugins&&(t.plugins.forEach(DX),this.directPlugins=t.plugins),this.updateStateInner(t.state,r)}setProps(t){let r={};for(let n in this._props)r[n]=this._props[n];r.state=this.state;for(let n in t)r[n]=t[n];this.update(r)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,r){var n;let i=this.state,a=!1,s=!1;t.storedMarks&&this.composing&&(gde(this),s=!0),this.state=t;let o=i.plugins!=t.plugins||this._props.plugins!=r.plugins;if(o||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let m=jX(this);EGe(m,this.nodeViews)&&(this.nodeViews=m,a=!0)}(o||r.handleDOMEvents!=this._props.handleDOMEvents)&&q8(this),this.editable=RX(this),PX(this);let l=vD(this),c=OX(this),d=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=a||!this.docView.matchesNode(t.doc,c,l);(f||!t.selection.eq(i.selection))&&(s=!0);let p=d=="preserve"&&s&&this.dom.style.overflowAnchor==null&&ZVe(this);if(s){this.domObserver.stop();let m=f&&(Sl||hs)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&SGe(i.selection,t.selection);if(f){let x=hs?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Zqe(this)),(a||!this.docView.update(t.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=dX(t.doc,c,l,this.dom,this)),x&&!this.trackWrites&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Eqe(this))?bh(this,m):(ide(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((n=this.dragging)===null||n===void 0)&&n.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():p&&eqe(p)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof pr){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&aX(this,r.getBoundingClientRect(),t)}else aX(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let n=this.pluginViews[r];n.update&&n.update(this,t)}}updateDraggedNode(t,r){let n=t.node,i=-1;if(this.state.doc.nodeAt(n.from)==n.node)i=n.from;else{let a=n.from+(this.state.doc.content.size-r.doc.content.size);(a>0&&this.state.doc.nodeAt(a))==n.node&&(i=a)}this.dragging=new vde(t.slice,t.move,i<0?void 0:pr.create(this.state.doc,i))}someProp(t,r){let n=this._props&&this._props[t],i;if(n!=null&&(i=r?r(n):n))return i;for(let s=0;s<this.directPlugins.length;s++){let o=this.directPlugins[s].props[t];if(o!=null&&(i=r?r(o):o))return i}let a=this.state.plugins;if(a)for(let s=0;s<a.length;s++){let o=a[s].props[t];if(o!=null&&(i=r?r(o):o))return i}}hasFocus(){if(Sl){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&tqe(this.dom),bh(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return t||document}updateRoot(){this._root=null}posAtCoords(t){return sqe(this,t)}coordsAtPos(t,r=1){return Yue(this,t,r)}domAtPos(t,r=0){return this.docView.domFromPos(t,r)}nodeDOM(t){let r=this.docView.descAt(t);return r?r.nodeDOM:null}posAtDOM(t,r,n=-1){let i=this.docView.posFromDOM(t,r,n);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,r){return dqe(this,r||this.state,t)}pasteHTML(t,r){return ES(this,"",t,!1,r||new ClipboardEvent("paste"))}pasteText(t,r){return ES(this,t,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(t){return M9(this,t)}destroy(){this.docView&&(Uqe(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],vD(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,HVe())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return zqe(this,t)}domSelectionRange(){let t=this.domSelection();return t?go&&this.root.nodeType===11&&KVe(this.dom.ownerDocument)==this.dom&&hGe(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}Ede.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function OX(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(e.state)),r)for(let n in r)n=="class"?t.class+=" "+r[n]:n=="style"?t.style=(t.style?t.style+";":"")+r[n]:!t[n]&&n!="contenteditable"&&n!="nodeName"&&(t[n]=String(r[n]))}),t.translate||(t.translate="no"),[uo.node(0,e.state.doc.content.size,t)]}function PX(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:uo.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function RX(e){return!e.someProp("editable",t=>t(e.state)===!1)}function SGe(e,t){let r=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(r)!=t.$anchor.start(r)}function jX(e){let t=Object.create(null);function r(n){for(let i in n)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=n[i])}return e.someProp("nodeViews",r),e.someProp("markViews",r),t}function EGe(e,t){let r=0,n=0;for(let i in e){if(e[i]!=t[i])return!0;r++}for(let i in t)n++;return r!=n}function DX(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var P0={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},PT={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},CGe=typeof navigator<"u"&&/Mac/.test(navigator.platform),kGe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var js=0;js<10;js++)P0[48+js]=P0[96+js]=String(js);for(var js=1;js<=24;js++)P0[js+111]="F"+js;for(var js=65;js<=90;js++)P0[js]=String.fromCharCode(js+32),PT[js]=String.fromCharCode(js);for(var bD in P0)PT.hasOwnProperty(bD)||(PT[bD]=P0[bD]);function _Ge(e){var t=CGe&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||kGe&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",r=!t&&e.key||(e.shiftKey?PT:P0)[e.keyCode]||e.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}const NGe=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),AGe=typeof navigator<"u"&&/Win/.test(navigator.platform);function TGe(e){let t=e.split(/-(?!$)/),r=t[t.length-1];r=="Space"&&(r=" ");let n,i,a,s;for(let o=0;o<t.length-1;o++){let l=t[o];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))a=!0;else if(/^mod$/i.test(l))NGe?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return n&&(r="Alt-"+r),i&&(r="Ctrl-"+r),s&&(r="Meta-"+r),a&&(r="Shift-"+r),r}function IGe(e){let t=Object.create(null);for(let r in e)t[TGe(r)]=e[r];return t}function wD(e,t,r=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),r&&t.shiftKey&&(e="Shift-"+e),e}function OGe(e){return new Fi({props:{handleKeyDown:Cde(e)}})}function Cde(e){let t=IGe(e);return function(r,n){let i=_Ge(n),a,s=t[wD(i,n)];if(s&&s(r.state,r.dispatch,r))return!0;if(i.length==1&&i!=" "){if(n.shiftKey){let o=t[wD(i,n,!1)];if(o&&o(r.state,r.dispatch,r))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(AGe&&n.ctrlKey&&n.altKey)&&(a=P0[n.keyCode])&&a!=i){let o=t[wD(a,n)];if(o&&o(r.state,r.dispatch,r))return!0}}return!1}}var PGe=Object.defineProperty,z9=(e,t)=>{for(var r in t)PGe(e,r,{get:t[r],enumerable:!0})};function h3(e){const{state:t,transaction:r}=e;let{selection:n}=r,{doc:i}=r,{storedMarks:a}=r;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return a},get selection(){return n},get doc(){return i},get tr(){return n=r.selection,i=r.doc,a=r.storedMarks,r}}}var p3=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:n}=t,{tr:i}=r,a=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([s,o])=>[s,(...c)=>{const d=o(...c)(a);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&n.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:n,state:i}=this,{view:a}=n,s=[],o=!!e,l=e||i.tr,c=()=>(!o&&t&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(l),s.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,p])=>[f,(...x)=>{const v=this.buildProps(l,t),b=p(...x)(v);return s.push(b),d}])),run:c};return d}createCan(e){const{rawCommands:t,state:r}=this,n=!1,i=e||r.tr,a=this.buildProps(i,n);return{...Object.fromEntries(Object.entries(t).map(([o,l])=>[o,(...c)=>l(...c)({...a,dispatch:void 0})])),chain:()=>this.createChain(i,n)}}buildProps(e,t=!0){const{rawCommands:r,editor:n,state:i}=this,{view:a}=n,s={tr:e,editor:n,view:a,state:h3({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([o,l])=>[o,(...c)=>l(...c)(s)]))}};return s}},kde={};z9(kde,{blur:()=>RGe,clearContent:()=>jGe,clearNodes:()=>DGe,command:()=>MGe,createParagraphNear:()=>FGe,cut:()=>LGe,deleteCurrentNode:()=>BGe,deleteNode:()=>UGe,deleteRange:()=>$Ge,deleteSelection:()=>zGe,enter:()=>HGe,exitCode:()=>WGe,extendMarkRange:()=>VGe,first:()=>qGe,focus:()=>GGe,forEach:()=>KGe,insertContent:()=>XGe,insertContentAt:()=>JGe,joinBackward:()=>tKe,joinDown:()=>eKe,joinForward:()=>rKe,joinItemBackward:()=>nKe,joinItemForward:()=>iKe,joinTextblockBackward:()=>aKe,joinTextblockForward:()=>sKe,joinUp:()=>ZGe,keyboardShortcut:()=>lKe,lift:()=>cKe,liftEmptyBlock:()=>uKe,liftListItem:()=>dKe,newlineInCode:()=>fKe,resetAttributes:()=>hKe,scrollIntoView:()=>pKe,selectAll:()=>mKe,selectNodeBackward:()=>gKe,selectNodeForward:()=>xKe,selectParentNode:()=>vKe,selectTextblockEnd:()=>yKe,selectTextblockStart:()=>bKe,setContent:()=>wKe,setMark:()=>$Ke,setMeta:()=>zKe,setNode:()=>HKe,setNodeSelection:()=>WKe,setTextDirection:()=>VKe,setTextSelection:()=>qKe,sinkListItem:()=>GKe,splitBlock:()=>KKe,splitListItem:()=>XKe,toggleList:()=>YKe,toggleMark:()=>QKe,toggleNode:()=>JKe,toggleWrap:()=>ZKe,undoInputRule:()=>eXe,unsetAllMarks:()=>tXe,unsetMark:()=>rXe,unsetTextDirection:()=>nXe,updateAttributes:()=>iXe,wrapIn:()=>aXe,wrapInList:()=>sXe});var RGe=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var r;e.isDestroyed||(t.dom.blur(),(r=window==null?void 0:window.getSelection())==null||r.removeAllRanges())}),!0),jGe=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),DGe=()=>({state:e,tr:t,dispatch:r})=>{const{selection:n}=t,{ranges:i}=n;return r&&i.forEach(({$from:a,$to:s})=>{e.doc.nodesBetween(a.pos,s.pos,(o,l)=>{if(o.type.isText)return;const{doc:c,mapping:d}=t,f=c.resolve(d.map(l)),p=c.resolve(d.map(l+o.nodeSize)),m=f.blockRange(p);if(!m)return;const x=fb(m);if(o.type.isTextblock){const{defaultType:v}=f.parent.contentMatchAt(f.index());t.setNodeMarkup(m.start,v)}(x||x===0)&&t.lift(m,x)})}),!0},MGe=e=>t=>e(t),FGe=()=>({state:e,dispatch:t})=>Bue(e,t),LGe=(e,t)=>({editor:r,tr:n})=>{const{state:i}=r,a=i.doc.slice(e.from,e.to);n.deleteRange(e.from,e.to);const s=n.mapping.map(t);return n.insert(s,a.content),n.setSelection(new Ur(n.doc.resolve(Math.max(s-1,0)))),!0},BGe=()=>({tr:e,dispatch:t})=>{const{selection:r}=e,n=r.$anchor.node();if(n.content.size>0)return!1;const i=e.selection.$anchor;for(let a=i.depth;a>0;a-=1)if(i.node(a).type===n.type){if(t){const o=i.before(a),l=i.after(a);e.delete(o,l).scrollIntoView()}return!0}return!1};function Ra(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}var UGe=e=>({tr:t,state:r,dispatch:n})=>{const i=Ra(e,r.schema),a=t.selection.$anchor;for(let s=a.depth;s>0;s-=1)if(a.node(s).type===i){if(n){const l=a.before(s),c=a.after(s);t.delete(l,c).scrollIntoView()}return!0}return!1},$Ge=e=>({tr:t,dispatch:r})=>{const{from:n,to:i}=e;return r&&t.delete(n,i),!0},zGe=()=>({state:e,dispatch:t})=>A9(e,t),HGe=()=>({commands:e})=>e.keyboardShortcut("Enter"),WGe=()=>({state:e,dispatch:t})=>AVe(e,t);function H9(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function RT(e,t,r={strict:!0}){const n=Object.keys(t);return n.length?n.every(i=>r.strict?t[i]===e[i]:H9(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function _de(e,t,r={}){return e.find(n=>n.type===t&&RT(Object.fromEntries(Object.keys(r).map(i=>[i,n.attrs[i]])),r))}function MX(e,t,r={}){return!!_de(e,t,r)}function W9(e,t,r){var n;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if((!i.node||!i.node.marks.some(d=>d.type===t))&&(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(d=>d.type===t)||(r=r||((n=i.node.marks[0])==null?void 0:n.attrs),!_de([...i.node.marks],t,r)))return;let s=i.index,o=e.start()+i.offset,l=s+1,c=o+i.node.nodeSize;for(;s>0&&MX([...e.parent.child(s-1).marks],t,r);)s-=1,o-=e.parent.child(s).nodeSize;for(;l<e.parent.childCount&&MX([...e.parent.child(l).marks],t,r);)c+=e.parent.child(l).nodeSize,l+=1;return{from:o,to:c}}function Qh(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}var VGe=(e,t={})=>({tr:r,state:n,dispatch:i})=>{const a=Qh(e,n.schema),{doc:s,selection:o}=r,{$from:l,from:c,to:d}=o;if(i){const f=W9(l,a,t);if(f&&f.from<=c&&f.to>=d){const p=Ur.create(s,f.from,f.to);r.setSelection(p)}}return!0},qGe=e=>t=>{const r=typeof e=="function"?e(t):e;for(let n=0;n<r.length;n+=1)if(r[n](t))return!0;return!1};function Nde(e){return e instanceof Ur}function ng(e=0,t=0,r=0){return Math.min(Math.max(e,t),r)}function Ade(e,t=null){if(!t)return null;const r=dn.atStart(e),n=dn.atEnd(e);if(t==="start"||t===!0)return r;if(t==="end")return n;const i=r.from,a=n.to;return t==="all"?Ur.create(e,ng(0,i,a),ng(e.content.size,i,a)):Ur.create(e,ng(t,i,a),ng(t,i,a))}function Tde(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function m3(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var GGe=(e=null,t={})=>({editor:r,view:n,tr:i,dispatch:a})=>{t={scrollIntoView:!0,...t};const s=()=>{(m3()||Tde())&&n.dom.focus(),requestAnimationFrame(()=>{r.isDestroyed||(n.focus(),t!=null&&t.scrollIntoView&&r.commands.scrollIntoView())})};if(n.hasFocus()&&e===null||e===!1)return!0;if(a&&e===null&&!Nde(r.state.selection))return s(),!0;const o=Ade(i.doc,e)||r.state.selection,l=r.state.selection.eq(o);return a&&(l||i.setSelection(o),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},KGe=(e,t)=>r=>e.every((n,i)=>t(n,{...r,index:i})),XGe=(e,t)=>({tr:r,commands:n})=>n.insertContentAt({from:r.selection.from,to:r.selection.to},e,t),Ide=e=>{const t=e.childNodes;for(let r=t.length-1;r>=0;r-=1){const n=t[r];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?e.removeChild(n):n.nodeType===1&&Ide(n)}return e};function P_(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,r=new window.DOMParser().parseFromString(t,"text/html").body;return Ide(r)}function kS(e,t,r){if(e instanceof vh||e instanceof It)return e;r={slice:!0,parseOptions:{},...r};const n=typeof e=="object"&&e!==null,i=typeof e=="string";if(n)try{if(Array.isArray(e)&&e.length>0)return It.fromArray(e.map(o=>t.nodeFromJSON(o)));const s=t.nodeFromJSON(e);return r.errorOnInvalidContent&&s.check(),s}catch(a){if(r.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:a});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",a),kS("",t,r)}if(i){if(r.errorOnInvalidContent){let s=!1,o="";const l=new fue({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,o=typeof c=="string"?c:c.outerHTML,null)}]}})});if(r.slice?y2.fromSchema(l).parseSlice(P_(e),r.parseOptions):y2.fromSchema(l).parse(P_(e),r.parseOptions),r.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${o}`)})}const a=y2.fromSchema(t);return r.slice?a.parseSlice(P_(e),r.parseOptions).content:a.parse(P_(e),r.parseOptions)}return kS("",t,r)}function YGe(e,t,r){const n=e.steps.length-1;if(n<t)return;const i=e.steps[n];if(!(i instanceof ds||i instanceof gs))return;const a=e.mapping.maps[n];let s=0;a.forEach((o,l,c,d)=>{s===0&&(s=d)}),e.setSelection(dn.near(e.doc.resolve(s),r))}var QGe=e=>!("type"in e),JGe=(e,t,r)=>({tr:n,dispatch:i,editor:a})=>{var s;if(i){r={parseOptions:a.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let o;const l=b=>{a.emit("contentError",{editor:a,error:b,disableCollaboration:()=>{"collaboration"in a.storage&&typeof a.storage.collaboration=="object"&&a.storage.collaboration&&(a.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...r.parseOptions};if(!r.errorOnInvalidContent&&!a.options.enableContentCheck&&a.options.emitContentError)try{kS(t,a.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(b){l(b)}try{o=kS(t,a.schema,{parseOptions:c,errorOnInvalidContent:(s=r.errorOnInvalidContent)!=null?s:a.options.enableContentCheck})}catch(b){return l(b),!1}let{from:d,to:f}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},p=!0,m=!0;if((QGe(o)?o:[o]).forEach(b=>{b.check(),p=p?b.isText&&b.marks.length===0:!1,m=m?b.isBlock:!1}),d===f&&m){const{parent:b}=n.doc.resolve(d);b.isTextblock&&!b.type.spec.code&&!b.childCount&&(d-=1,f+=1)}let v;if(p){if(Array.isArray(t))v=t.map(b=>b.text||"").join("");else if(t instanceof It){let b="";t.forEach(w=>{w.text&&(b+=w.text)}),v=b}else typeof t=="object"&&t&&t.text?v=t.text:v=t;n.insertText(v,d,f)}else{v=o;const b=n.doc.resolve(d),w=b.node(),k=b.parentOffset===0,E=w.isText||w.isTextblock,N=w.content.size>0;k&&E&&N&&(d=Math.max(0,d-1)),n.replaceWith(d,f,v)}r.updateSelection&&YGe(n,n.steps.length-1,-1),r.applyInputRules&&n.setMeta("applyInputRules",{from:d,text:v}),r.applyPasteRules&&n.setMeta("applyPasteRules",{from:d,text:v})}return!0},ZGe=()=>({state:e,dispatch:t})=>kVe(e,t),eKe=()=>({state:e,dispatch:t})=>_Ve(e,t),tKe=()=>({state:e,dispatch:t})=>Pue(e,t),rKe=()=>({state:e,dispatch:t})=>Mue(e,t),nKe=()=>({state:e,dispatch:t,tr:r})=>{try{const n=o3(e.doc,e.selection.$from.pos,-1);return n==null?!1:(r.join(n,2),t&&t(r),!0)}catch{return!1}},iKe=()=>({state:e,dispatch:t,tr:r})=>{try{const n=o3(e.doc,e.selection.$from.pos,1);return n==null?!1:(r.join(n,2),t&&t(r),!0)}catch{return!1}},aKe=()=>({state:e,dispatch:t})=>EVe(e,t),sKe=()=>({state:e,dispatch:t})=>CVe(e,t);function Ode(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function oKe(e){const t=e.split(/-(?!$)/);let r=t[t.length-1];r==="Space"&&(r=" ");let n,i,a,s;for(let o=0;o<t.length-1;o+=1){const l=t[o];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))a=!0;else if(/^mod$/i.test(l))m3()||Ode()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return n&&(r=`Alt-${r}`),i&&(r=`Ctrl-${r}`),s&&(r=`Meta-${r}`),a&&(r=`Shift-${r}`),r}var lKe=e=>({editor:t,view:r,tr:n,dispatch:i})=>{const a=oKe(e).split(/-(?!$)/),s=a.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),o=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{r.someProp("handleKeyDown",c=>c(r,o))});return l==null||l.steps.forEach(c=>{const d=c.map(n.mapping);d&&i&&n.maybeStep(d)}),!0};function R0(e,t,r={}){const{from:n,to:i,empty:a}=e.selection,s=t?Ra(t,e.schema):null,o=[];e.doc.nodesBetween(n,i,(f,p)=>{if(f.isText)return;const m=Math.max(n,p),x=Math.min(i,p+f.nodeSize);o.push({node:f,from:m,to:x})});const l=i-n,c=o.filter(f=>s?s.name===f.node.type.name:!0).filter(f=>RT(f.node.attrs,r,{strict:!1}));return a?!!c.length:c.reduce((f,p)=>f+p.to-p.from,0)>=l}var cKe=(e,t={})=>({state:r,dispatch:n})=>{const i=Ra(e,r.schema);return R0(r,i,t)?NVe(r,n):!1},uKe=()=>({state:e,dispatch:t})=>Uue(e,t),dKe=e=>({state:t,dispatch:r})=>{const n=Ra(e,t.schema);return BVe(n)(t,r)},fKe=()=>({state:e,dispatch:t})=>Lue(e,t);function g3(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function FX(e,t){const r=typeof t=="string"?[t]:t;return Object.keys(e).reduce((n,i)=>(r.includes(i)||(n[i]=e[i]),n),{})}var hKe=(e,t)=>({tr:r,state:n,dispatch:i})=>{let a=null,s=null;const o=g3(typeof e=="string"?e:e.name,n.schema);if(!o)return!1;o==="node"&&(a=Ra(e,n.schema)),o==="mark"&&(s=Qh(e,n.schema));let l=!1;return r.selection.ranges.forEach(c=>{n.doc.nodesBetween(c.$from.pos,c.$to.pos,(d,f)=>{a&&a===d.type&&(l=!0,i&&r.setNodeMarkup(f,void 0,FX(d.attrs,t))),s&&d.marks.length&&d.marks.forEach(p=>{s===p.type&&(l=!0,i&&r.addMark(f,f+d.nodeSize,s.create(FX(p.attrs,t))))})})}),l},pKe=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),mKe=()=>({tr:e,dispatch:t})=>{if(t){const r=new ac(e.doc);e.setSelection(r)}return!0},gKe=()=>({state:e,dispatch:t})=>jue(e,t),xKe=()=>({state:e,dispatch:t})=>Fue(e,t),vKe=()=>({state:e,dispatch:t})=>OVe(e,t),yKe=()=>({state:e,dispatch:t})=>jVe(e,t),bKe=()=>({state:e,dispatch:t})=>RVe(e,t);function G8(e,t,r={},n={}){return kS(e,t,{slice:!1,parseOptions:r,errorOnInvalidContent:n.errorOnInvalidContent})}var wKe=(e,{errorOnInvalidContent:t,emitUpdate:r=!0,parseOptions:n={}}={})=>({editor:i,tr:a,dispatch:s,commands:o})=>{const{doc:l}=a;if(n.preserveWhitespace!=="full"){const c=G8(e,i.schema,n,{errorOnInvalidContent:t??i.options.enableContentCheck});return s&&a.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!r),!0}return s&&a.setMeta("preventUpdate",!r),o.insertContentAt({from:0,to:l.content.size},e,{parseOptions:n,errorOnInvalidContent:t??i.options.enableContentCheck})};function Pde(e,t){const r=Qh(t,e.schema),{from:n,to:i,empty:a}=e.selection,s=[];a?(e.storedMarks&&s.push(...e.storedMarks),s.push(...e.selection.$head.marks())):e.doc.nodesBetween(n,i,l=>{s.push(...l.marks)});const o=s.find(l=>l.type.name===r.name);return o?{...o.attrs}:{}}function Rde(e,t){const r=new Aue(e);return t.forEach(n=>{n.steps.forEach(i=>{r.step(i)})}),r}function SKe(e){for(let t=0;t<e.edgeCount;t+=1){const{type:r}=e.edge(t);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function EKe(e,t,r){const n=[];return e.nodesBetween(t.from,t.to,(i,a)=>{r(i)&&n.push({node:i,pos:a})}),n}function CKe(e,t){for(let r=e.depth;r>0;r-=1){const n=e.node(r);if(t(n))return{pos:r>0?e.before(r):0,start:e.start(r),depth:r,node:n}}}function x3(e){return t=>CKe(t.$from,e)}function xr(e,t,r){return e.config[t]===void 0&&e.parent?xr(e.parent,t,r):typeof e.config[t]=="function"?e.config[t].bind({...r,parent:e.parent?xr(e.parent,t,r):null}):e.config[t]}function V9(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},n=xr(t,"addExtensions",r);return n?[t,...V9(n())]:t}).flat(10)}function q9(e,t){const r=$x.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(r),i.innerHTML}function jde(e){return typeof e=="function"}function Jn(e,t=void 0,...r){return jde(e)?t?e.bind(t)(...r):e(...r):e}function kKe(e={}){return Object.keys(e).length===0&&e.constructor===Object}function gy(e){const t=e.filter(i=>i.type==="extension"),r=e.filter(i=>i.type==="node"),n=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:r,markExtensions:n}}function Dde(e){const t=[],{nodeExtensions:r,markExtensions:n}=gy(e),i=[...r,...n],a={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(s=>{const o={name:s.name,options:s.options,storage:s.storage,extensions:i},l=xr(s,"addGlobalAttributes",o);if(!l)return;l().forEach(d=>{d.types.forEach(f=>{Object.entries(d.attributes).forEach(([p,m])=>{t.push({type:f,name:p,attribute:{...a,...m}})})})})}),i.forEach(s=>{const o={name:s.name,options:s.options,storage:s.storage},l=xr(s,"addAttributes",o);if(!l)return;const c=l();Object.entries(c).forEach(([d,f])=>{const p={...a,...f};typeof(p==null?void 0:p.default)=="function"&&(p.default=p.default()),p!=null&&p.isRequired&&(p==null?void 0:p.default)===void 0&&delete p.default,t.push({type:s.name,name:d,attribute:p})})}),t}function Ci(...e){return e.filter(t=>!!t).reduce((t,r)=>{const n={...t};return Object.entries(r).forEach(([i,a])=>{if(!n[i]){n[i]=a;return}if(i==="class"){const o=a?String(a).split(" "):[],l=n[i]?n[i].split(" "):[],c=o.filter(d=>!l.includes(d));n[i]=[...l,...c].join(" ")}else if(i==="style"){const o=a?a.split(";").map(d=>d.trim()).filter(Boolean):[],l=n[i]?n[i].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;l.forEach(d=>{const[f,p]=d.split(":").map(m=>m.trim());c.set(f,p)}),o.forEach(d=>{const[f,p]=d.split(":").map(m=>m.trim());c.set(f,p)}),n[i]=Array.from(c.entries()).map(([d,f])=>`${d}: ${f}`).join("; ")}else n[i]=a}),n},{})}function _S(e,t){return t.filter(r=>r.type===e.type.name).filter(r=>r.attribute.rendered).map(r=>r.attribute.renderHTML?r.attribute.renderHTML(e.attrs)||{}:{[r.name]:e.attrs[r.name]}).reduce((r,n)=>Ci(r,n),{})}function _Ke(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function LX(e,t){return"style"in e?e:{...e,getAttrs:r=>{const n=e.getAttrs?e.getAttrs(r):e.attrs;if(n===!1)return!1;const i=t.reduce((a,s)=>{const o=s.attribute.parseHTML?s.attribute.parseHTML(r):_Ke(r.getAttribute(s.name));return o==null?a:{...a,[s.name]:o}},{});return{...n,...i}}}}function BX(e){return Object.fromEntries(Object.entries(e).filter(([t,r])=>t==="attrs"&&kKe(r)?!1:r!=null))}function UX(e){var t,r;const n={};return!((t=e==null?void 0:e.attribute)!=null&&t.isRequired)&&"default"in((e==null?void 0:e.attribute)||{})&&(n.default=e.attribute.default),((r=e==null?void 0:e.attribute)==null?void 0:r.validate)!==void 0&&(n.validate=e.attribute.validate),[e.name,n]}function NKe(e,t){var r;const n=Dde(e),{nodeExtensions:i,markExtensions:a}=gy(e),s=(r=i.find(c=>xr(c,"topNode")))==null?void 0:r.name,o=Object.fromEntries(i.map(c=>{const d=n.filter(w=>w.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:t},p=e.reduce((w,k)=>{const E=xr(k,"extendNodeSchema",f);return{...w,...E?E(c):{}}},{}),m=BX({...p,content:Jn(xr(c,"content",f)),marks:Jn(xr(c,"marks",f)),group:Jn(xr(c,"group",f)),inline:Jn(xr(c,"inline",f)),atom:Jn(xr(c,"atom",f)),selectable:Jn(xr(c,"selectable",f)),draggable:Jn(xr(c,"draggable",f)),code:Jn(xr(c,"code",f)),whitespace:Jn(xr(c,"whitespace",f)),linebreakReplacement:Jn(xr(c,"linebreakReplacement",f)),defining:Jn(xr(c,"defining",f)),isolating:Jn(xr(c,"isolating",f)),attrs:Object.fromEntries(d.map(UX))}),x=Jn(xr(c,"parseHTML",f));x&&(m.parseDOM=x.map(w=>LX(w,d)));const v=xr(c,"renderHTML",f);v&&(m.toDOM=w=>v({node:w,HTMLAttributes:_S(w,d)}));const b=xr(c,"renderText",f);return b&&(m.toText=b),[c.name,m]})),l=Object.fromEntries(a.map(c=>{const d=n.filter(b=>b.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:t},p=e.reduce((b,w)=>{const k=xr(w,"extendMarkSchema",f);return{...b,...k?k(c):{}}},{}),m=BX({...p,inclusive:Jn(xr(c,"inclusive",f)),excludes:Jn(xr(c,"excludes",f)),group:Jn(xr(c,"group",f)),spanning:Jn(xr(c,"spanning",f)),code:Jn(xr(c,"code",f)),attrs:Object.fromEntries(d.map(UX))}),x=Jn(xr(c,"parseHTML",f));x&&(m.parseDOM=x.map(b=>LX(b,d)));const v=xr(c,"renderHTML",f);return v&&(m.toDOM=b=>v({mark:b,HTMLAttributes:_S(b,d)})),[c.name,m]}));return new fue({topNode:s,nodes:o,marks:l})}function AKe(e){const t=e.filter((r,n)=>e.indexOf(r)!==n);return Array.from(new Set(t))}function G9(e){return e.sort((r,n)=>{const i=xr(r,"priority")||100,a=xr(n,"priority")||100;return i>a?-1:i<a?1:0})}function Mde(e){const t=G9(V9(e)),r=AKe(t.map(n=>n.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(n=>`'${n}'`).join(", ")}]. This can lead to issues.`),t}function Fde(e,t,r){const{from:n,to:i}=t,{blockSeparator:a=`

`,textSerializers:s={}}=r||{};let o="";return e.nodesBetween(n,i,(l,c,d,f)=>{var p;l.isBlock&&c>n&&(o+=a);const m=s==null?void 0:s[l.type.name];if(m)return d&&(o+=m({node:l,pos:c,parent:d,index:f,range:t})),!1;l.isText&&(o+=(p=l==null?void 0:l.text)==null?void 0:p.slice(Math.max(n,c)-c,i-c))}),o}function TKe(e,t){const r={from:0,to:e.content.size};return Fde(e,r,t)}function Lde(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,r])=>[t,r.spec.toText]))}function IKe(e,t){const r=Ra(t,e.schema),{from:n,to:i}=e.selection,a=[];e.doc.nodesBetween(n,i,o=>{a.push(o)});const s=a.reverse().find(o=>o.type.name===r.name);return s?{...s.attrs}:{}}function Bde(e,t){const r=g3(typeof t=="string"?t:t.name,e.schema);return r==="node"?IKe(e,t):r==="mark"?Pde(e,t):{}}function OKe(e,t=JSON.stringify){const r={};return e.filter(n=>{const i=t(n);return Object.prototype.hasOwnProperty.call(r,i)?!1:r[i]=!0})}function PKe(e){const t=OKe(e);return t.length===1?t:t.filter((r,n)=>!t.filter((a,s)=>s!==n).some(a=>r.oldRange.from>=a.oldRange.from&&r.oldRange.to<=a.oldRange.to&&r.newRange.from>=a.newRange.from&&r.newRange.to<=a.newRange.to))}function Ude(e){const{mapping:t,steps:r}=e,n=[];return t.maps.forEach((i,a)=>{const s=[];if(i.ranges.length)i.forEach((o,l)=>{s.push({from:o,to:l})});else{const{from:o,to:l}=r[a];if(o===void 0||l===void 0)return;s.push({from:o,to:l})}s.forEach(({from:o,to:l})=>{const c=t.slice(a).map(o,-1),d=t.slice(a).map(l),f=t.invert().map(c,-1),p=t.invert().map(d);n.push({oldRange:{from:f,to:p},newRange:{from:c,to:d}})})}),PKe(n)}function K9(e,t,r){const n=[];return e===t?r.resolve(e).marks().forEach(i=>{const a=r.resolve(e),s=W9(a,i.type);s&&n.push({mark:i,...s})}):r.nodesBetween(e,t,(i,a)=>{!i||(i==null?void 0:i.nodeSize)===void 0||n.push(...i.marks.map(s=>({from:a,to:a+i.nodeSize,mark:s})))}),n}var RKe=(e,t,r,n=20)=>{const i=e.doc.resolve(r);let a=n,s=null;for(;a>0&&s===null;){const o=i.node(a);(o==null?void 0:o.type.name)===t?s=o:a-=1}return[s,a]};function SD(e,t){return t.nodes[e]||t.marks[e]||null}function KN(e,t,r){return Object.fromEntries(Object.entries(r).filter(([n])=>{const i=e.find(a=>a.type===t&&a.name===n);return i?i.attribute.keepOnSplit:!1}))}var jKe=(e,t=500)=>{let r="";const n=e.parentOffset;return e.parent.nodesBetween(Math.max(0,n-t),n,(i,a,s,o)=>{var l,c;const d=((c=(l=i.type.spec).toText)==null?void 0:c.call(l,{node:i,pos:a,parent:s,index:o}))||i.textContent||"%leaf%";r+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,n-a))}),r};function K8(e,t,r={}){const{empty:n,ranges:i}=e.selection,a=t?Qh(t,e.schema):null;if(n)return!!(e.storedMarks||e.selection.$from.marks()).filter(f=>a?a.name===f.type.name:!0).find(f=>RT(f.attrs,r,{strict:!1}));let s=0;const o=[];if(i.forEach(({$from:f,$to:p})=>{const m=f.pos,x=p.pos;e.doc.nodesBetween(m,x,(v,b)=>{if(!v.isText&&!v.marks.length)return;const w=Math.max(m,b),k=Math.min(x,b+v.nodeSize),E=k-w;s+=E,o.push(...v.marks.map(N=>({mark:N,from:w,to:k})))})}),s===0)return!1;const l=o.filter(f=>a?a.name===f.mark.type.name:!0).filter(f=>RT(f.mark.attrs,r,{strict:!1})).reduce((f,p)=>f+p.to-p.from,0),c=o.filter(f=>a?f.mark.type!==a&&f.mark.type.excludes(a):!0).reduce((f,p)=>f+p.to-p.from,0);return(l>0?l+c:l)>=s}function DKe(e,t,r={}){if(!t)return R0(e,null,r)||K8(e,null,r);const n=g3(t,e.schema);return n==="node"?R0(e,t,r):n==="mark"?K8(e,t,r):!1}var MKe=(e,t)=>{const{$from:r,$to:n,$anchor:i}=e.selection;if(t){const a=x3(o=>o.type.name===t)(e.selection);if(!a)return!1;const s=e.doc.resolve(a.pos+1);return i.pos+1===s.end()}return!(n.parentOffset<n.parent.nodeSize-2||r.pos!==n.pos)},FKe=e=>{const{$from:t,$to:r}=e.selection;return!(t.parentOffset>0||t.pos!==r.pos)};function $X(e,t){return Array.isArray(t)?t.some(r=>(typeof r=="string"?r:r.name)===e.name):t}function zX(e,t){const{nodeExtensions:r}=gy(t),n=r.find(s=>s.name===e);if(!n)return!1;const i={name:n.name,options:n.options,storage:n.storage},a=Jn(xr(n,"group",i));return typeof a!="string"?!1:a.split(" ").includes("list")}function v3(e,{checkChildren:t=!0,ignoreWhitespace:r=!1}={}){var n;if(r){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((n=e.text)!=null?n:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let i=!0;return e.content.forEach(a=>{i!==!1&&(v3(a,{ignoreWhitespace:r,checkChildren:t})||(i=!1))}),i}return!1}function $de(e){return e instanceof pr}var zde=class Hde{constructor(t){this.position=t}static fromJSON(t){return new Hde(t.position)}toJSON(){return{position:this.position}}};function LKe(e,t){const r=t.mapping.mapResult(e.position);return{position:new zde(r.pos),mapResult:r}}function BKe(e){return new zde(e)}function UKe(e,t,r){var n;const{selection:i}=t;let a=null;if(Nde(i)&&(a=i.$cursor),a){const o=(n=e.storedMarks)!=null?n:a.marks();return a.parent.type.allowsMarkType(r)&&(!!r.isInSet(o)||!o.some(c=>c.type.excludes(r)))}const{ranges:s}=i;return s.some(({$from:o,$to:l})=>{let c=o.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(r):!1;return e.doc.nodesBetween(o.pos,l.pos,(d,f,p)=>{if(c)return!1;if(d.isInline){const m=!p||p.type.allowsMarkType(r),x=!!r.isInSet(d.marks)||!d.marks.some(v=>v.type.excludes(r));c=m&&x}return!c}),c})}var $Ke=(e,t={})=>({tr:r,state:n,dispatch:i})=>{const{selection:a}=r,{empty:s,ranges:o}=a,l=Qh(e,n.schema);if(i)if(s){const c=Pde(n,l);r.addStoredMark(l.create({...c,...t}))}else o.forEach(c=>{const d=c.$from.pos,f=c.$to.pos;n.doc.nodesBetween(d,f,(p,m)=>{const x=Math.max(m,d),v=Math.min(m+p.nodeSize,f);p.marks.find(w=>w.type===l)?p.marks.forEach(w=>{l===w.type&&r.addMark(x,v,l.create({...w.attrs,...t}))}):r.addMark(x,v,l.create(t))})});return UKe(n,r,l)},zKe=(e,t)=>({tr:r})=>(r.setMeta(e,t),!0),HKe=(e,t={})=>({state:r,dispatch:n,chain:i})=>{const a=Ra(e,r.schema);let s;return r.selection.$anchor.sameParent(r.selection.$head)&&(s=r.selection.$anchor.parent.attrs),a.isTextblock?i().command(({commands:o})=>rX(a,{...s,...t})(r)?!0:o.clearNodes()).command(({state:o})=>rX(a,{...s,...t})(o,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},WKe=e=>({tr:t,dispatch:r})=>{if(r){const{doc:n}=t,i=ng(e,0,n.content.size),a=pr.create(n,i);t.setSelection(a)}return!0},VKe=(e,t)=>({tr:r,state:n,dispatch:i})=>{const{selection:a}=n;let s,o;return typeof t=="number"?(s=t,o=t):t&&"from"in t&&"to"in t?(s=t.from,o=t.to):(s=a.from,o=a.to),i&&r.doc.nodesBetween(s,o,(l,c)=>{l.isText||r.setNodeMarkup(c,void 0,{...l.attrs,dir:e})}),!0},qKe=e=>({tr:t,dispatch:r})=>{if(r){const{doc:n}=t,{from:i,to:a}=typeof e=="number"?{from:e,to:e}:e,s=Ur.atStart(n).from,o=Ur.atEnd(n).to,l=ng(i,s,o),c=ng(a,s,o),d=Ur.create(n,l,c);t.setSelection(d)}return!0},GKe=e=>({state:t,dispatch:r})=>{const n=Ra(e,t.schema);return zVe(n)(t,r)};function HX(e,t){const r=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(r){const n=r.filter(i=>t==null?void 0:t.includes(i.type.name));e.tr.ensureMarks(n)}}var KKe=({keepMarks:e=!0}={})=>({tr:t,state:r,dispatch:n,editor:i})=>{const{selection:a,doc:s}=t,{$from:o,$to:l}=a,c=i.extensionManager.attributes,d=KN(c,o.node().type.name,o.node().attrs);if(a instanceof pr&&a.node.isBlock)return!o.parentOffset||!yh(s,o.pos)?!1:(n&&(e&&HX(r,i.extensionManager.splittableMarks),t.split(o.pos).scrollIntoView()),!0);if(!o.parent.isBlock)return!1;const f=l.parentOffset===l.parent.content.size,p=o.depth===0?void 0:SKe(o.node(-1).contentMatchAt(o.indexAfter(-1)));let m=f&&p?[{type:p,attrs:d}]:void 0,x=yh(t.doc,t.mapping.map(o.pos),1,m);if(!m&&!x&&yh(t.doc,t.mapping.map(o.pos),1,p?[{type:p}]:void 0)&&(x=!0,m=p?[{type:p,attrs:d}]:void 0),n){if(x&&(a instanceof Ur&&t.deleteSelection(),t.split(t.mapping.map(o.pos),1,m),p&&!f&&!o.parentOffset&&o.parent.type!==p)){const v=t.mapping.map(o.before()),b=t.doc.resolve(v);o.node(-1).canReplaceWith(b.index(),b.index()+1,p)&&t.setNodeMarkup(t.mapping.map(o.before()),p)}e&&HX(r,i.extensionManager.splittableMarks),t.scrollIntoView()}return x},XKe=(e,t={})=>({tr:r,state:n,dispatch:i,editor:a})=>{var s;const o=Ra(e,n.schema),{$from:l,$to:c}=n.selection,d=n.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(c))return!1;const f=l.node(-1);if(f.type!==o)return!1;const p=a.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==o||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let w=It.empty;const k=l.index(-1)?1:l.index(-2)?2:3;for(let D=l.depth-k;D>=l.depth-3;D-=1)w=It.from(l.node(D).copy(w));const E=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,N={...KN(p,l.node().type.name,l.node().attrs),...t},P=((s=o.contentMatch.defaultType)==null?void 0:s.createAndFill(N))||void 0;w=w.append(It.from(o.createAndFill(null,P)||void 0));const R=l.before(l.depth-(k-1));r.replace(R,l.after(-E),new Vt(w,4-k,0));let O=-1;r.doc.nodesBetween(R,r.doc.content.size,(D,L)=>{if(O>-1)return!1;D.isTextblock&&D.content.size===0&&(O=L+1)}),O>-1&&r.setSelection(Ur.near(r.doc.resolve(O))),r.scrollIntoView()}return!0}const m=c.pos===l.end()?f.contentMatchAt(0).defaultType:null,x={...KN(p,f.type.name,f.attrs),...t},v={...KN(p,l.node().type.name,l.node().attrs),...t};r.delete(l.pos,c.pos);const b=m?[{type:o,attrs:x},{type:m,attrs:v}]:[{type:o,attrs:x}];if(!yh(r.doc,l.pos,2))return!1;if(i){const{selection:w,storedMarks:k}=n,{splittableMarks:E}=a.extensionManager,N=k||w.$to.parentOffset&&w.$from.marks();if(r.split(l.pos,2,b).scrollIntoView(),!N||!i)return!0;const P=N.filter(R=>E.includes(R.type.name));r.ensureMarks(P)}return!0},ED=(e,t)=>{const r=x3(s=>s.type===t)(e.selection);if(!r)return!0;const n=e.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(n===void 0)return!0;const i=e.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&Y0(e.doc,r.pos)&&e.join(r.pos),!0},CD=(e,t)=>{const r=x3(s=>s.type===t)(e.selection);if(!r)return!0;const n=e.doc.resolve(r.start).after(r.depth);if(n===void 0)return!0;const i=e.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&Y0(e.doc,n)&&e.join(n),!0},YKe=(e,t,r,n={})=>({editor:i,tr:a,state:s,dispatch:o,chain:l,commands:c,can:d})=>{const{extensions:f,splittableMarks:p}=i.extensionManager,m=Ra(e,s.schema),x=Ra(t,s.schema),{selection:v,storedMarks:b}=s,{$from:w,$to:k}=v,E=w.blockRange(k),N=b||v.$to.parentOffset&&v.$from.marks();if(!E)return!1;const P=x3(R=>zX(R.type.name,f))(v);if(E.depth>=1&&P&&E.depth-P.depth<=1){if(P.node.type===m)return c.liftListItem(x);if(zX(P.node.type.name,f)&&m.validContent(P.node.content)&&o)return l().command(()=>(a.setNodeMarkup(P.pos,m),!0)).command(()=>ED(a,m)).command(()=>CD(a,m)).run()}return!r||!N||!o?l().command(()=>d().wrapInList(m,n)?!0:c.clearNodes()).wrapInList(m,n).command(()=>ED(a,m)).command(()=>CD(a,m)).run():l().command(()=>{const R=d().wrapInList(m,n),O=N.filter(D=>p.includes(D.type.name));return a.ensureMarks(O),R?!0:c.clearNodes()}).wrapInList(m,n).command(()=>ED(a,m)).command(()=>CD(a,m)).run()},QKe=(e,t={},r={})=>({state:n,commands:i})=>{const{extendEmptyMarkRange:a=!1}=r,s=Qh(e,n.schema);return K8(n,s,t)?i.unsetMark(s,{extendEmptyMarkRange:a}):i.setMark(s,t)},JKe=(e,t,r={})=>({state:n,commands:i})=>{const a=Ra(e,n.schema),s=Ra(t,n.schema),o=R0(n,a,r);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),o?i.setNode(s,l):i.setNode(a,{...l,...r})},ZKe=(e,t={})=>({state:r,commands:n})=>{const i=Ra(e,r.schema);return R0(r,i,t)?n.lift(i):n.wrapIn(i,t)},eXe=()=>({state:e,dispatch:t})=>{const r=e.plugins;for(let n=0;n<r.length;n+=1){const i=r[n];let a;if(i.spec.isInputRules&&(a=i.getState(e))){if(t){const s=e.tr,o=a.transform;for(let l=o.steps.length-1;l>=0;l-=1)s.step(o.steps[l].invert(o.docs[l]));if(a.text){const l=s.doc.resolve(a.from).marks();s.replaceWith(a.from,a.to,e.schema.text(a.text,l))}else s.delete(a.from,a.to)}return!0}}return!1},tXe=()=>({tr:e,dispatch:t})=>{const{selection:r}=e,{empty:n,ranges:i}=r;return n||t&&i.forEach(a=>{e.removeMark(a.$from.pos,a.$to.pos)}),!0},rXe=(e,t={})=>({tr:r,state:n,dispatch:i})=>{var a;const{extendEmptyMarkRange:s=!1}=t,{selection:o}=r,l=Qh(e,n.schema),{$from:c,empty:d,ranges:f}=o;if(!i)return!0;if(d&&s){let{from:p,to:m}=o;const x=(a=c.marks().find(b=>b.type===l))==null?void 0:a.attrs,v=W9(c,l,x);v&&(p=v.from,m=v.to),r.removeMark(p,m,l)}else f.forEach(p=>{r.removeMark(p.$from.pos,p.$to.pos,l)});return r.removeStoredMark(l),!0},nXe=e=>({tr:t,state:r,dispatch:n})=>{const{selection:i}=r;let a,s;return typeof e=="number"?(a=e,s=e):e&&"from"in e&&"to"in e?(a=e.from,s=e.to):(a=i.from,s=i.to),n&&t.doc.nodesBetween(a,s,(o,l)=>{if(o.isText)return;const c={...o.attrs};delete c.dir,t.setNodeMarkup(l,void 0,c)}),!0},iXe=(e,t={})=>({tr:r,state:n,dispatch:i})=>{let a=null,s=null;const o=g3(typeof e=="string"?e:e.name,n.schema);if(!o)return!1;o==="node"&&(a=Ra(e,n.schema)),o==="mark"&&(s=Qh(e,n.schema));let l=!1;return r.selection.ranges.forEach(c=>{const d=c.$from.pos,f=c.$to.pos;let p,m,x,v;r.selection.empty?n.doc.nodesBetween(d,f,(b,w)=>{a&&a===b.type&&(l=!0,x=Math.max(w,d),v=Math.min(w+b.nodeSize,f),p=w,m=b)}):n.doc.nodesBetween(d,f,(b,w)=>{w<d&&a&&a===b.type&&(l=!0,x=Math.max(w,d),v=Math.min(w+b.nodeSize,f),p=w,m=b),w>=d&&w<=f&&(a&&a===b.type&&(l=!0,i&&r.setNodeMarkup(w,void 0,{...b.attrs,...t})),s&&b.marks.length&&b.marks.forEach(k=>{if(s===k.type&&(l=!0,i)){const E=Math.max(w,d),N=Math.min(w+b.nodeSize,f);r.addMark(E,N,s.create({...k.attrs,...t}))}}))}),m&&(p!==void 0&&i&&r.setNodeMarkup(p,void 0,{...m.attrs,...t}),s&&m.marks.length&&m.marks.forEach(b=>{s===b.type&&i&&r.addMark(x,v,s.create({...b.attrs,...t}))}))}),l},aXe=(e,t={})=>({state:r,dispatch:n})=>{const i=Ra(e,r.schema);return DVe(i,t)(r,n)},sXe=(e,t={})=>({state:r,dispatch:n})=>{const i=Ra(e,r.schema);return MVe(i,t)(r,n)},oXe=class{constructor(){this.callbacks={}}on(t,r){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(r),this}emit(t,...r){const n=this.callbacks[t];return n&&n.forEach(i=>i.apply(this,r)),this}off(t,r){const n=this.callbacks[t];return n&&(r?this.callbacks[t]=n.filter(i=>i!==r):delete this.callbacks[t]),this}once(t,r){const n=(...i)=>{this.off(t,n),r.apply(this,i)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},y3=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},lXe=(e,t)=>{if(H9(t))return t.exec(e);const r=t(e);if(!r)return null;const n=[r.text];return n.index=r.index,n.input=e,n.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(r.replaceWith)),n};function R_(e){var t;const{editor:r,from:n,to:i,text:a,rules:s,plugin:o}=e,{view:l}=r;if(l.composing)return!1;const c=l.state.doc.resolve(n);if(c.parent.type.spec.code||(t=c.nodeBefore||c.nodeAfter)!=null&&t.marks.find(p=>p.type.spec.code))return!1;let d=!1;const f=jKe(c)+a;return s.forEach(p=>{if(d)return;const m=lXe(f,p.find);if(!m)return;const x=l.state.tr,v=h3({state:l.state,transaction:x}),b={from:n-(m[0].length-a.length),to:i},{commands:w,chain:k,can:E}=new p3({editor:r,state:v});p.handler({state:v,range:b,match:m,commands:w,chain:k,can:E})===null||!x.steps.length||(p.undoable&&x.setMeta(o,{transform:x,from:n,to:i,text:a}),l.dispatch(x),d=!0)}),d}function cXe(e){const{editor:t,rules:r}=e,n=new Fi({state:{init(){return null},apply(i,a,s){const o=i.getMeta(n);if(o)return o;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=q9(It.from(d),s.schema);const{from:f}=l,p=f+d.length;R_({editor:t,from:f,to:p,text:d,rules:r,plugin:n})}),i.selectionSet||i.docChanged?null:a}},props:{handleTextInput(i,a,s,o){return R_({editor:t,from:a,to:s,text:o,rules:r,plugin:n})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:a}=i.state.selection;a&&R_({editor:t,from:a.pos,to:a.pos,text:"",rules:r,plugin:n})}),!1)},handleKeyDown(i,a){if(a.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?R_({editor:t,from:s.pos,to:s.pos,text:`
`,rules:r,plugin:n}):!1}},isInputRules:!0});return n}function uXe(e){return Object.prototype.toString.call(e).slice(8,-1)}function j_(e){return uXe(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function Wde(e,t){const r={...e};return j_(e)&&j_(t)&&Object.keys(t).forEach(n=>{j_(t[n])&&j_(e[n])?r[n]=Wde(e[n],t[n]):r[n]=t[n]}),r}var X9=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...Jn(xr(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Jn(xr(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Wde(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},zx=class Vde extends X9{constructor(){super(...arguments),this.type="mark"}static create(t={}){const r=typeof t=="function"?t():t;return new Vde(r)}static handleExit({editor:t,mark:r}){const{tr:n}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(c=>(c==null?void 0:c.type.name)===r.name))return!1;const l=s.find(c=>(c==null?void 0:c.type.name)===r.name);return l&&n.removeStoredMark(l),n.insertText(" ",i.pos),t.view.dispatch(n),!0}return!1}configure(t){return super.configure(t)}extend(t){const r=typeof t=="function"?t():t;return super.extend(r)}};function dXe(e){return typeof e=="number"}var fXe=class{constructor(e){this.find=e.find,this.handler=e.handler}},hXe=(e,t,r)=>{if(H9(t))return[...e.matchAll(t)];const n=t(e,r);return n?n.map(i=>{const a=[i.text];return a.index=i.index,a.input=e,a.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),a.push(i.replaceWith)),a}):[]};function pXe(e){const{editor:t,state:r,from:n,to:i,rule:a,pasteEvent:s,dropEvent:o}=e,{commands:l,chain:c,can:d}=new p3({editor:t,state:r}),f=[];return r.doc.nodesBetween(n,i,(m,x)=>{var v,b,w,k,E;if((b=(v=m.type)==null?void 0:v.spec)!=null&&b.code||!(m.isText||m.isTextblock||m.isInline))return;const N=(E=(k=(w=m.content)==null?void 0:w.size)!=null?k:m.nodeSize)!=null?E:0,P=Math.max(n,x),R=Math.min(i,x+N);if(P>=R)return;const O=m.isText?m.text||"":m.textBetween(P-x,R-x,void 0,"");hXe(O,a.find,s).forEach(L=>{if(L.index===void 0)return;const B=P+L.index+1,z=B+L[0].length,H={from:r.tr.mapping.map(B),to:r.tr.mapping.map(z)},te=a.handler({state:r,range:H,match:L,commands:l,chain:c,can:d,pasteEvent:s,dropEvent:o});f.push(te)})}),f.every(m=>m!==null)}var D_=null,mXe=e=>{var t;const r=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=r.clipboardData)==null||t.setData("text/html",e),r};function gXe(e){const{editor:t,rules:r}=e;let n=null,i=!1,a=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,o;try{o=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{o=null}const l=({state:d,from:f,to:p,rule:m,pasteEvt:x})=>{const v=d.tr,b=h3({state:d,transaction:v});if(!(!pXe({editor:t,state:b,from:Math.max(f-1,0),to:p.b-1,rule:m,pasteEvent:x,dropEvent:o})||!v.steps.length)){try{o=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{o=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,v}};return r.map(d=>new Fi({view(f){const p=x=>{var v;n=(v=f.dom.parentElement)!=null&&v.contains(x.target)?f.dom.parentElement:null,n&&(D_=t)},m=()=>{D_&&(D_=null)};return window.addEventListener("dragstart",p),window.addEventListener("dragend",m),{destroy(){window.removeEventListener("dragstart",p),window.removeEventListener("dragend",m)}}},props:{handleDOMEvents:{drop:(f,p)=>{if(a=n===f.dom.parentElement,o=p,!a){const m=D_;m!=null&&m.isEditable&&setTimeout(()=>{const x=m.state.selection;x&&m.commands.deleteRange({from:x.from,to:x.to})},10)}return!1},paste:(f,p)=>{var m;const x=(m=p.clipboardData)==null?void 0:m.getData("text/html");return s=p,i=!!(x!=null&&x.includes("data-pm-slice")),!1}}},appendTransaction:(f,p,m)=>{const x=f[0],v=x.getMeta("uiEvent")==="paste"&&!i,b=x.getMeta("uiEvent")==="drop"&&!a,w=x.getMeta("applyPasteRules"),k=!!w;if(!v&&!b&&!k)return;if(k){let{text:P}=w;typeof P=="string"?P=P:P=q9(It.from(P),m.schema);const{from:R}=w,O=R+P.length,D=mXe(P);return l({rule:d,state:m,from:R,to:{b:O},pasteEvt:D})}const E=p.doc.content.findDiffStart(m.doc.content),N=p.doc.content.findDiffEnd(m.doc.content);if(!(!dXe(E)||!N||E===N.b))return l({rule:d,state:m,from:E,to:N,pasteEvt:s})}}))}var b3=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.baseExtensions=e,this.extensions=Mde(e),this.schema=NKe(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:SD(t.name,this.schema)},n=xr(t,"addCommands",r);return n?{...e,...n()}:e},{})}get plugins(){const{editor:e}=this;return G9([...this.extensions].reverse()).flatMap(n=>{const i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:SD(n.name,this.schema)},a=[],s=xr(n,"addKeyboardShortcuts",i);let o={};if(n.type==="mark"&&xr(n,"exitable",i)&&(o.ArrowRight=()=>zx.handleExit({editor:e,mark:n})),s){const p=Object.fromEntries(Object.entries(s()).map(([m,x])=>[m,()=>x({editor:e})]));o={...o,...p}}const l=OGe(o);a.push(l);const c=xr(n,"addInputRules",i);if($X(n,e.options.enableInputRules)&&c){const p=c();if(p&&p.length){const m=cXe({editor:e,rules:p}),x=Array.isArray(m)?m:[m];a.push(...x)}}const d=xr(n,"addPasteRules",i);if($X(n,e.options.enablePasteRules)&&d){const p=d();if(p&&p.length){const m=gXe({editor:e,rules:p});a.push(...m)}}const f=xr(n,"addProseMirrorPlugins",i);if(f){const p=f();a.push(...p)}return a})}get attributes(){return Dde(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=gy(this.extensions);return Object.fromEntries(t.filter(r=>!!xr(r,"addNodeView")).map(r=>{const n=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:Ra(r.name,this.schema)},a=xr(r,"addNodeView",i);if(!a)return[];const s=a();if(!s)return[];const o=(l,c,d,f,p)=>{const m=_S(l,n);return s({node:l,view:c,getPos:d,decorations:f,innerDecorations:p,editor:e,extension:r,HTMLAttributes:m})};return[r.name,o]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=gy(this.extensions);return Object.fromEntries(t.filter(r=>!!xr(r,"addMarkView")).map(r=>{const n=this.attributes.filter(o=>o.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:Qh(r.name,this.schema)},a=xr(r,"addMarkView",i);if(!a)return[];const s=(o,l,c)=>{const d=_S(o,n);return a()({mark:o,view:l,inline:c,editor:e,extension:r,HTMLAttributes:d,updateAttributes:f=>{OXe(o,e,f)}})};return[r.name,s]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var r;const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:SD(t.name,this.schema)};t.type==="mark"&&((r=Jn(xr(t,"keepOnSplit",n)))==null||r)&&this.splittableMarks.push(t.name);const i=xr(t,"onBeforeCreate",n),a=xr(t,"onCreate",n),s=xr(t,"onUpdate",n),o=xr(t,"onSelectionUpdate",n),l=xr(t,"onTransaction",n),c=xr(t,"onFocus",n),d=xr(t,"onBlur",n),f=xr(t,"onDestroy",n);i&&this.editor.on("beforeCreate",i),a&&this.editor.on("create",a),s&&this.editor.on("update",s),o&&this.editor.on("selectionUpdate",o),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),d&&this.editor.on("blur",d),f&&this.editor.on("destroy",f)})}};b3.resolve=Mde;b3.sort=G9;b3.flatten=V9;var xXe={};z9(xXe,{ClipboardTextSerializer:()=>Gde,Commands:()=>Kde,Delete:()=>Xde,Drop:()=>Yde,Editable:()=>Qde,FocusEvents:()=>Zde,Keymap:()=>efe,Paste:()=>tfe,Tabindex:()=>rfe,TextDirection:()=>nfe,focusEventsPluginKey:()=>Jde});var oa=class qde extends X9{constructor(){super(...arguments),this.type="extension"}static create(t={}){const r=typeof t=="function"?t():t;return new qde(r)}configure(t){return super.configure(t)}extend(t){const r=typeof t=="function"?t():t;return super.extend(r)}},Gde=oa.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Fi({key:new va("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:r}=e,{doc:n,selection:i}=t,{ranges:a}=i,s=Math.min(...a.map(d=>d.$from.pos)),o=Math.max(...a.map(d=>d.$to.pos)),l=Lde(r);return Fde(n,{from:s,to:o},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),Kde=oa.create({name:"commands",addCommands(){return{...kde}}}),Xde=oa.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var r,n,i;const a=()=>{var s,o,l,c;if((c=(l=(o=(s=this.editor.options.coreExtensionOptions)==null?void 0:s.delete)==null?void 0:o.filterTransaction)==null?void 0:l.call(o,e))!=null?c:e.getMeta("y-sync$"))return;const d=Rde(e.before,[e,...t]);Ude(d).forEach(m=>{d.mapping.mapResult(m.oldRange.from).deletedAfter&&d.mapping.mapResult(m.oldRange.to).deletedBefore&&d.before.nodesBetween(m.oldRange.from,m.oldRange.to,(x,v)=>{const b=v+x.nodeSize-2,w=m.oldRange.from<=v&&b<=m.oldRange.to;this.editor.emit("delete",{type:"node",node:x,from:v,to:b,newFrom:d.mapping.map(v),newTo:d.mapping.map(b),deletedRange:m.oldRange,newRange:m.newRange,partial:!w,editor:this.editor,transaction:e,combinedTransform:d})})});const p=d.mapping;d.steps.forEach((m,x)=>{var v,b;if(m instanceof qu){const w=p.slice(x).map(m.from,-1),k=p.slice(x).map(m.to),E=p.invert().map(w,-1),N=p.invert().map(k),P=(v=d.doc.nodeAt(w-1))==null?void 0:v.marks.some(O=>O.eq(m.mark)),R=(b=d.doc.nodeAt(k))==null?void 0:b.marks.some(O=>O.eq(m.mark));this.editor.emit("delete",{type:"mark",mark:m.mark,from:m.from,to:m.to,deletedRange:{from:E,to:N},newRange:{from:w,to:k},partial:!!(R||P),editor:this.editor,transaction:e,combinedTransform:d})}})};(i=(n=(r=this.editor.options.coreExtensionOptions)==null?void 0:r.delete)==null?void 0:n.async)==null||i?setTimeout(a,0):a()}}),Yde=oa.create({name:"drop",addProseMirrorPlugins(){return[new Fi({key:new va("tiptapDrop"),props:{handleDrop:(e,t,r,n)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:r,moved:n})}}})]}}),Qde=oa.create({name:"editable",addProseMirrorPlugins(){return[new Fi({key:new va("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Jde=new va("focusEvents"),Zde=oa.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new Fi({key:Jde,props:{handleDOMEvents:{focus:(t,r)=>{e.isFocused=!0;const n=e.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return t.dispatch(n),!1},blur:(t,r)=>{e.isFocused=!1;const n=e.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return t.dispatch(n),!1}}}})]}}),efe=oa.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:o})=>{const{selection:l,doc:c}=o,{empty:d,$anchor:f}=l,{pos:p,parent:m}=f,x=f.parent.isTextblock&&p>0?o.doc.resolve(p-1):f,v=x.parent.type.spec.isolating,b=f.pos-f.parentOffset,w=v&&x.parent.childCount===1?b===f.pos:dn.atStart(c).from===p;return!d||!m.type.isTextblock||m.textContent.length||!w||w&&f.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...n},a={...n,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return m3()||Ode()?a:i},addProseMirrorPlugins(){return[new Fi({key:new va("clearDocument"),appendTransaction:(e,t,r)=>{if(e.some(v=>v.getMeta("composition")))return;const n=e.some(v=>v.docChanged)&&!t.doc.eq(r.doc),i=e.some(v=>v.getMeta("preventClearDocument"));if(!n||i)return;const{empty:a,from:s,to:o}=t.selection,l=dn.atStart(t.doc).from,c=dn.atEnd(t.doc).to;if(a||!(s===l&&o===c)||!v3(r.doc))return;const p=r.tr,m=h3({state:r,transaction:p}),{commands:x}=new p3({editor:this.editor,state:m});if(x.clearNodes(),!!p.steps.length)return p}})]}}),tfe=oa.create({name:"paste",addProseMirrorPlugins(){return[new Fi({key:new va("tiptapPaste"),props:{handlePaste:(e,t,r)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:r})}}})]}}),rfe=oa.create({name:"tabindex",addProseMirrorPlugins(){return[new Fi({key:new va("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),nfe=oa.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:e}=gy(this.extensions);return[{types:e.filter(t=>t.name!=="text").map(t=>t.name),attributes:{dir:{default:this.options.direction,parseHTML:t=>{const r=t.getAttribute("dir");return r&&(r==="ltr"||r==="rtl"||r==="auto")?r:this.options.direction},renderHTML:t=>t.dir?{dir:t.dir}:{}}}}]},addProseMirrorPlugins(){return[new Fi({key:new va("textDirection"),props:{attributes:()=>{const e=this.options.direction;return e?{dir:e}:{}}}})]}}),vXe=class z1{constructor(t,r,n=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=t,this.editor=r,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let r=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}r=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:r,to:n},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),r=this.resolvedPos.doc.resolve(t);return new z1(r,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new z1(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new z1(t,this.editor)}get children(){const t=[];return this.node.content.forEach((r,n)=>{const i=r.isBlock&&!r.isTextblock,a=r.isAtom&&!r.isText,s=this.pos+n+(a?0:1);if(s<0||s>this.resolvedPos.doc.nodeSize-2)return;const o=this.resolvedPos.doc.resolve(s);if(!i&&o.depth<=this.depth)return;const l=new z1(o,this.editor,i,i?r:null);i&&(l.actualDepth=this.depth+1),t.push(new z1(o,this.editor,i,i?r:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,r={}){let n=null,i=this.parent;for(;i&&!n;){if(i.node.type.name===t)if(Object.keys(r).length>0){const a=i.node.attrs,s=Object.keys(r);for(let o=0;o<s.length;o+=1){const l=s[o];if(a[l]!==r[l])break}}else n=i;i=i.parent}return n}querySelector(t,r={}){return this.querySelectorAll(t,r,!0)[0]||null}querySelectorAll(t,r={},n=!1){let i=[];if(!this.children||this.children.length===0)return i;const a=Object.keys(r);return this.children.forEach(s=>{n&&i.length>0||(s.node.type.name===t&&a.every(l=>r[l]===s.node.attrs[l])&&i.push(s),!(n&&i.length>0)&&(i=i.concat(s.querySelectorAll(t,r,n))))}),i}setAttribute(t){const{tr:r}=this.editor.state;r.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(r)}},yXe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function bXe(e,t,r){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}var wXe=class extends oXe{constructor(e={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:LKe,createMappablePosition:BKe},this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:i,moved:a})=>this.options.onDrop(n,i,a)),this.on("paste",({event:n,slice:i})=>this.options.onPaste(n,i)),this.on("delete",this.options.onDelete);const t=this.createDoc(),r=Ade(t,this.options.autofocus);this.editorState=ov.create({doc:t,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e!=null&&e.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=bXe(yXe,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(this.editorView)return this.editorView[t];if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const r=jde(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(i=>{const a=typeof i=="string"?`${i}$`:i.key;r=r.filter(s=>!s.key.startsWith(a))}),t.length===r.length)return;const n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}createExtensionManager(){var e,t;const n=[...this.options.enableCoreExtensions?[Qde,Gde.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),Kde,Zde,efe,rfe,Yde,tfe,Xde,nfe.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new b3(n,this)}createCommandManager(){this.commandManager=new p3({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=G8(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(r=>r.name!=="collaboration"),this.createExtensionManager()}}),e=G8(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new Ede(e,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)==null?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.prependClass(),this.injectCSS();const n=this.view.dom;n.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(c=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(c)});return}const{state:t,transactions:r}=this.state.applyTransaction(e),n=!this.state.selection.eq(t.selection),i=r.includes(e),a=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:r.slice(1)}),n&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=r.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),o=s==null?void 0:s.getMeta("focus"),l=s==null?void 0:s.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:s}),l&&this.emit("blur",{editor:this,event:l.event,transaction:s}),!(e.getMeta("preventUpdate")||!r.some(c=>c.docChanged)||a.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:r.slice(1)})}getAttributes(e){return Bde(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,n=typeof e=="string"?t:e;return DKe(this.state,r,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return q9(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return TKe(this.state.doc,{blockSeparator:t,textSerializers:{...Lde(this.schema),...r}})}get isEmpty(){return v3(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var r;return((r=this.$doc)==null?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)==null?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new vXe(t,this)}get $doc(){return this.$pos(0)}};function xy(e){return new y3({find:e.find,handler:({state:t,range:r,match:n})=>{const i=Jn(e.getAttributes,void 0,n);if(i===!1||i===null)return null;const{tr:a}=t,s=n[n.length-1],o=n[0];if(s){const l=o.search(/\S/),c=r.from+o.indexOf(s),d=c+s.length;if(K9(r.from,r.to,t.doc).filter(m=>m.mark.type.excluded.find(v=>v===e.type&&v!==m.mark.type)).filter(m=>m.to>c).length)return null;d<r.to&&a.delete(d,r.to),c>r.from&&a.delete(r.from+l,c);const p=r.from+l+s.length;a.addMark(r.from+l,p,e.type.create(i||{})),a.removeStoredMark(e.type)}},undoable:e.undoable})}function ife(e){return new y3({find:e.find,handler:({state:t,range:r,match:n})=>{const i=Jn(e.getAttributes,void 0,n)||{},{tr:a}=t,s=r.from;let o=r.to;const l=e.type.create(i);if(n[1]){const c=n[0].lastIndexOf(n[1]);let d=s+c;d>o?d=o:o=d+n[1].length;const f=n[0][n[0].length-1];a.insertText(f,s+n[0].length-1),a.replaceWith(d,o,l)}else if(n[0]){const c=e.type.isInline?s:s-1;a.insert(c,e.type.create(i)).delete(a.mapping.map(s),a.mapping.map(o))}a.scrollIntoView()},undoable:e.undoable})}function X8(e){return new y3({find:e.find,handler:({state:t,range:r,match:n})=>{const i=t.doc.resolve(r.from),a=Jn(e.getAttributes,void 0,n)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(r.from,r.to).setBlockType(r.from,r.from,e.type,a)},undoable:e.undoable})}function vy(e){return new y3({find:e.find,handler:({state:t,range:r,match:n,chain:i})=>{const a=Jn(e.getAttributes,void 0,n)||{},s=t.tr.delete(r.from,r.to),l=s.doc.resolve(r.from).blockRange(),c=l&&_9(l,e.type,a);if(!c)return null;if(s.wrap(l,c),e.keepMarks&&e.editor){const{selection:f,storedMarks:p}=t,{splittableMarks:m}=e.editor.extensionManager,x=p||f.$to.parentOffset&&f.$from.marks();if(x){const v=x.filter(b=>m.includes(b.type.name));s.ensureMarks(v)}}if(e.keepAttributes){const f=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,a).run()}const d=s.doc.resolve(r.from-1).nodeBefore;d&&d.type===e.type&&Y0(s.doc,r.from-1)&&(!e.joinPredicate||e.joinPredicate(n,d))&&s.join(r.from-1)},undoable:e.undoable})}var SXe=e=>"touches"in e,EXe=class{constructor(e){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.lastEditableState=void 0,this.handleMap=new Map,this.handleMouseMove=o=>{if(!this.isResizing||!this.activeHandle)return;const l=o.clientX-this.startX,c=o.clientY-this.startY;this.handleResize(l,c)},this.handleTouchMove=o=>{if(!this.isResizing||!this.activeHandle)return;const l=o.touches[0];if(!l)return;const c=l.clientX-this.startX,d=l.clientY-this.startY;this.handleResize(c,d)},this.handleMouseUp=()=>{if(!this.isResizing)return;const o=this.element.offsetWidth,l=this.element.offsetHeight;this.onCommit(o,l),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=o=>{o.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=o=>{o.key==="Shift"&&(this.isShiftKeyPressed=!1)};var t,r,n,i,a,s;this.node=e.node,this.editor=e.editor,this.element=e.element,this.contentElement=e.contentElement,this.getPos=e.getPos,this.onResize=e.onResize,this.onCommit=e.onCommit,this.onUpdate=e.onUpdate,(t=e.options)!=null&&t.min&&(this.minSize={...this.minSize,...e.options.min}),(r=e.options)!=null&&r.max&&(this.maxSize=e.options.max),(n=e==null?void 0:e.options)!=null&&n.directions&&(this.directions=e.options.directions),(i=e.options)!=null&&i.preserveAspectRatio&&(this.preserveAspectRatio=e.options.preserveAspectRatio),(a=e.options)!=null&&a.className&&(this.classNames={container:e.options.className.container||"",wrapper:e.options.className.wrapper||"",handle:e.options.className.handle||"",resizing:e.options.className.resizing||""}),(s=e.options)!=null&&s.createCustomHandle&&(this.createCustomHandle=e.options.createCustomHandle),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles(),this.editor.on("update",this.handleEditorUpdate.bind(this))}get dom(){return this.container}get contentDOM(){return this.contentElement}handleEditorUpdate(){const e=this.editor.isEditable;e!==this.lastEditableState&&(this.lastEditableState=e,e?e&&this.handleMap.size===0&&this.attachHandles():this.removeHandles())}update(e,t,r){return e.type!==this.node.type?!1:(this.node=e,this.onUpdate?this.onUpdate(e,t,r):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.editor.off("update",this.handleEditorUpdate.bind(this)),this.container.remove()}createContainer(){const e=document.createElement("div");return e.dataset.resizeContainer="",e.dataset.node=this.node.type.name,e.style.display="flex",this.classNames.container&&(e.className=this.classNames.container),e.appendChild(this.wrapper),e}createWrapper(){const e=document.createElement("div");return e.style.position="relative",e.style.display="block",e.dataset.resizeWrapper="",this.classNames.wrapper&&(e.className=this.classNames.wrapper),e.appendChild(this.element),e}createHandle(e){const t=document.createElement("div");return t.dataset.resizeHandle=e,t.style.position="absolute",this.classNames.handle&&(t.className=this.classNames.handle),t}positionHandle(e,t){const r=t.includes("top"),n=t.includes("bottom"),i=t.includes("left"),a=t.includes("right");r&&(e.style.top="0"),n&&(e.style.bottom="0"),i&&(e.style.left="0"),a&&(e.style.right="0"),(t==="top"||t==="bottom")&&(e.style.left="0",e.style.right="0"),(t==="left"||t==="right")&&(e.style.top="0",e.style.bottom="0")}attachHandles(){this.directions.forEach(e=>{let t;this.createCustomHandle?t=this.createCustomHandle(e):t=this.createHandle(e),t instanceof HTMLElement||(console.warn(`[ResizableNodeView] createCustomHandle("${e}") did not return an HTMLElement. Falling back to default handle.`),t=this.createHandle(e)),this.createCustomHandle||this.positionHandle(t,e),t.addEventListener("mousedown",r=>this.handleResizeStart(r,e)),t.addEventListener("touchstart",r=>this.handleResizeStart(r,e)),this.handleMap.set(e,t),this.wrapper.appendChild(t)})}removeHandles(){this.handleMap.forEach(e=>e.remove()),this.handleMap.clear()}applyInitialSize(){const e=this.node.attrs.width,t=this.node.attrs.height;e?(this.element.style.width=`${e}px`,this.initialWidth=e):this.initialWidth=this.element.offsetWidth,t?(this.element.style.height=`${t}px`,this.initialHeight=t):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(e,t){e.preventDefault(),e.stopPropagation(),this.isResizing=!0,this.activeHandle=t,SXe(e)?(this.startX=e.touches[0].clientX,this.startY=e.touches[0].clientY):(this.startX=e.clientX,this.startY=e.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(e,t){if(!this.activeHandle)return;const r=this.preserveAspectRatio||this.isShiftKeyPressed,{width:n,height:i}=this.calculateNewDimensions(this.activeHandle,e,t),a=this.applyConstraints(n,i,r);this.element.style.width=`${a.width}px`,this.element.style.height=`${a.height}px`,this.onResize&&this.onResize(a.width,a.height)}calculateNewDimensions(e,t,r){let n=this.startWidth,i=this.startHeight;const a=e.includes("right"),s=e.includes("left"),o=e.includes("bottom"),l=e.includes("top");return a?n=this.startWidth+t:s&&(n=this.startWidth-t),o?i=this.startHeight+r:l&&(i=this.startHeight-r),(e==="right"||e==="left")&&(n=this.startWidth+(a?t:-t)),(e==="top"||e==="bottom")&&(i=this.startHeight+(o?r:-r)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(n,i,e):{width:n,height:i}}applyConstraints(e,t,r){var n,i,a,s;if(!r){let c=Math.max(this.minSize.width,e),d=Math.max(this.minSize.height,t);return(n=this.maxSize)!=null&&n.width&&(c=Math.min(this.maxSize.width,c)),(i=this.maxSize)!=null&&i.height&&(d=Math.min(this.maxSize.height,d)),{width:c,height:d}}let o=e,l=t;return o<this.minSize.width&&(o=this.minSize.width,l=o/this.aspectRatio),l<this.minSize.height&&(l=this.minSize.height,o=l*this.aspectRatio),(a=this.maxSize)!=null&&a.width&&o>this.maxSize.width&&(o=this.maxSize.width,l=o/this.aspectRatio),(s=this.maxSize)!=null&&s.height&&l>this.maxSize.height&&(l=this.maxSize.height,o=l*this.aspectRatio),{width:o,height:l}}applyAspectRatio(e,t,r){const n=r==="left"||r==="right",i=r==="top"||r==="bottom";return n?{width:e,height:e/this.aspectRatio}:i?{width:t*this.aspectRatio,height:t}:{width:e,height:e/this.aspectRatio}}};function CXe(e,t){const{selection:r}=e,{$from:n}=r;if(r instanceof pr){const a=n.index();return n.parent.canReplaceWith(a,a+1,t)}let i=n.depth;for(;i>=0;){const a=n.index(i);if(n.node(i).contentMatchAt(a).matchType(t))return!0;i-=1}return!1}function kXe(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}var _Xe={};z9(_Xe,{createAtomBlockMarkdownSpec:()=>NXe,createBlockMarkdownSpec:()=>AXe,createInlineMarkdownSpec:()=>afe,parseAttributes:()=>Y9,parseIndentedBlocks:()=>Y8,renderNestedMarkdownContent:()=>J9,serializeAttributes:()=>Q9});function Y9(e){if(!(e!=null&&e.trim()))return{};const t={},r=[],n=e.replace(/["']([^"']*)["']/g,c=>(r.push(c),`__QUOTED_${r.length-1}__`)),i=n.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const c=i.map(d=>d.trim().slice(1));t.class=c.join(" ")}const a=n.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);a&&(t.id=a[1]);const s=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(n.matchAll(s)).forEach(([,c,d])=>{var f;const p=parseInt(((f=d.match(/__QUOTED_(\d+)__/))==null?void 0:f[1])||"0",10),m=r[p];m&&(t[c]=m.slice(1,-1))});const l=n.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(d=>{d.match(/^[a-zA-Z][\w-]*$/)&&(t[d]=!0)}),t}function Q9(e){if(!e||Object.keys(e).length===0)return"";const t=[];return e.class&&String(e.class).split(/\s+/).filter(Boolean).forEach(n=>t.push(`.${n}`)),e.id&&t.push(`#${e.id}`),Object.entries(e).forEach(([r,n])=>{r==="class"||r==="id"||(n===!0?t.push(r):n!==!1&&n!=null&&t.push(`${r}="${String(n)}"`))}),t.join(" ")}function NXe(e){const{nodeName:t,name:r,parseAttributes:n=Y9,serializeAttributes:i=Q9,defaultAttributes:a={},requiredAttributes:s=[],allowedAttributes:o}=e,l=r||t,c=d=>{if(!o)return d;const f={};return o.forEach(p=>{p in d&&(f[p]=d[p])}),f};return{parseMarkdown:(d,f)=>{const p={...a,...d.attributes};return f.createNode(t,p,[])},markdownTokenizer:{name:t,level:"block",start(d){var f;const p=new RegExp(`^:::${l}(?:\\s|$)`,"m"),m=(f=d.match(p))==null?void 0:f.index;return m!==void 0?m:-1},tokenize(d,f,p){const m=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),x=d.match(m);if(!x)return;const v=x[1]||"",b=n(v);if(!s.find(k=>!(k in b)))return{type:t,raw:x[0],attributes:b}}},renderMarkdown:d=>{const f=c(d.attrs||{}),p=i(f),m=p?` {${p}}`:"";return`:::${l}${m} :::`}}}function AXe(e){const{nodeName:t,name:r,getContent:n,parseAttributes:i=Y9,serializeAttributes:a=Q9,defaultAttributes:s={},content:o="block",allowedAttributes:l}=e,c=r||t,d=f=>{if(!l)return f;const p={};return l.forEach(m=>{m in f&&(p[m]=f[m])}),p};return{parseMarkdown:(f,p)=>{let m;if(n){const v=n(f);m=typeof v=="string"?[{type:"text",text:v}]:v}else o==="block"?m=p.parseChildren(f.tokens||[]):m=p.parseInline(f.tokens||[]);const x={...s,...f.attributes};return p.createNode(t,x,m)},markdownTokenizer:{name:t,level:"block",start(f){var p;const m=new RegExp(`^:::${c}`,"m"),x=(p=f.match(m))==null?void 0:p.index;return x!==void 0?x:-1},tokenize(f,p,m){var x;const v=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),b=f.match(v);if(!b)return;const[w,k=""]=b,E=i(k);let N=1;const P=w.length;let R="";const O=/^:::([\w-]*)(\s.*)?/gm,D=f.slice(P);for(O.lastIndex=0;;){const L=O.exec(D);if(L===null)break;const B=L.index,z=L[1];if(!((x=L[2])!=null&&x.endsWith(":::"))){if(z)N+=1;else if(N-=1,N===0){const H=D.slice(0,B);R=H.trim();const te=f.slice(0,P+B+L[0].length);let Y=[];if(R)if(o==="block")for(Y=m.blockTokens(H),Y.forEach(W=>{W.text&&(!W.tokens||W.tokens.length===0)&&(W.tokens=m.inlineTokens(W.text))});Y.length>0;){const W=Y[Y.length-1];if(W.type==="paragraph"&&(!W.text||W.text.trim()===""))Y.pop();else break}else Y=m.inlineTokens(R);return{type:t,raw:te,attributes:E,content:R,tokens:Y}}}}}},renderMarkdown:(f,p)=>{const m=d(f.attrs||{}),x=a(m),v=x?` {${x}}`:"",b=p.renderChildren(f.content||[],`

`);return`:::${c}${v}

${b}

:::`}}}function TXe(e){if(!e.trim())return{};const t={},r=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let n=r.exec(e);for(;n!==null;){const[,i,a,s]=n;t[i]=a||s,n=r.exec(e)}return t}function IXe(e){return Object.entries(e).filter(([,t])=>t!=null).map(([t,r])=>`${t}="${r}"`).join(" ")}function afe(e){const{nodeName:t,name:r,getContent:n,parseAttributes:i=TXe,serializeAttributes:a=IXe,defaultAttributes:s={},selfClosing:o=!1,allowedAttributes:l}=e,c=r||t,d=p=>{if(!l)return p;const m={};return l.forEach(x=>{const v=typeof x=="string"?x:x.name,b=typeof x=="string"?void 0:x.skipIfDefault;if(v in p){const w=p[v];if(b!==void 0&&w===b)return;m[v]=w}}),m},f=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(p,m)=>{const x={...s,...p.attributes};if(o)return m.createNode(t,x);const v=n?n(p):p.content||"";return v?m.createNode(t,x,[m.createTextNode(v)]):m.createNode(t,x,[])},markdownTokenizer:{name:t,level:"inline",start(p){const m=o?new RegExp(`\\[${f}\\s*[^\\]]*\\]`):new RegExp(`\\[${f}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${f}\\]`),x=p.match(m),v=x==null?void 0:x.index;return v!==void 0?v:-1},tokenize(p,m,x){const v=o?new RegExp(`^\\[${f}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${f}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${f}\\]`),b=p.match(v);if(!b)return;let w="",k="";if(o){const[,N]=b;k=N}else{const[,N,P]=b;k=N,w=P||""}const E=i(k.trim());return{type:t,raw:b[0],content:w.trim(),attributes:E}}},renderMarkdown:p=>{let m="";n?m=n(p):p.content&&p.content.length>0&&(m=p.content.filter(w=>w.type==="text").map(w=>w.text).join(""));const x=d(p.attrs||{}),v=a(x),b=v?` ${v}`:"";return o?`[${c}${b}]`:`[${c}${b}]${m}[/${c}]`}}}function Y8(e,t,r){var n,i,a,s;const o=e.split(`
`),l=[];let c="",d=0;const f=t.baseIndentSize||2;for(;d<o.length;){const p=o[d],m=p.match(t.itemPattern);if(!m){if(l.length>0)break;if(p.trim()===""){d+=1,c=`${c}${p}
`;continue}else return}const x=t.extractItemData(m),{indentLevel:v,mainContent:b}=x;c=`${c}${p}
`;const w=[b];for(d+=1;d<o.length;){const P=o[d];if(P.trim()===""){const O=o.slice(d+1).findIndex(B=>B.trim()!=="");if(O===-1)break;if((((i=(n=o[d+1+O].match(/^(\s*)/))==null?void 0:n[1])==null?void 0:i.length)||0)>v){w.push(P),c=`${c}${P}
`,d+=1;continue}else break}if((((s=(a=P.match(/^(\s*)/))==null?void 0:a[1])==null?void 0:s.length)||0)>v)w.push(P),c=`${c}${P}
`,d+=1;else break}let k;const E=w.slice(1);if(E.length>0){const P=E.map(R=>R.slice(v+f)).join(`
`);P.trim()&&(t.customNestedParser?k=t.customNestedParser(P):k=r.blockTokens(P))}const N=t.createToken(x,k);l.push(N)}if(l.length!==0)return{items:l,raw:c}}function J9(e,t,r,n){if(!e||!Array.isArray(e.content))return"";const i=typeof r=="function"?r(n):r,[a,...s]=e.content,o=t.renderChildren([a]),l=[`${i}${o}`];return s&&s.length>0&&s.forEach(c=>{const d=t.renderChildren([c]);if(d){const f=d.split(`
`).map(p=>p?t.indent(p):"").join(`
`);l.push(f)}}),l.join(`
`)}function OXe(e,t,r={}){const{state:n}=t,{doc:i,tr:a}=n,s=e;i.descendants((o,l)=>{const c=a.mapping.map(l),d=a.mapping.map(l)+o.nodeSize;let f=null;if(o.marks.forEach(m=>{if(m!==s)return!1;f=m}),!f)return;let p=!1;if(Object.keys(r).forEach(m=>{r[m]!==f.attrs[m]&&(p=!0)}),p){const m=e.type.create({...e.attrs,...r});a.removeMark(c,d,e.type),a.addMark(c,d,m)}}),a.docChanged&&t.view.dispatch(a)}var Yo=class sfe extends X9{constructor(){super(...arguments),this.type="node"}static create(t={}){const r=typeof t=="function"?t():t;return new sfe(r)}configure(t){return super.configure(t)}extend(t){const r=typeof t=="function"?t():t;return super.extend(r)}},PXe=class{constructor(e,t,r){this.isDragging=!1,this.component=e,this.editor=t.editor,this.options={stopEvent:null,ignoreMutation:null,...r},this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.innerDecorations=t.innerDecorations,this.view=t.view,this.HTMLAttributes=t.HTMLAttributes,this.getPos=t.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var t,r,n,i,a,s,o;const{view:l}=this.editor,c=e.target,d=c.nodeType===3?(t=c.parentElement)==null?void 0:t.closest("[data-drag-handle]"):c.closest("[data-drag-handle]");if(!this.dom||(r=this.contentDOM)!=null&&r.contains(c)||!d)return;let f=0,p=0;if(this.dom!==d){const k=this.dom.getBoundingClientRect(),E=d.getBoundingClientRect(),N=(i=e.offsetX)!=null?i:(n=e.nativeEvent)==null?void 0:n.offsetX,P=(s=e.offsetY)!=null?s:(a=e.nativeEvent)==null?void 0:a.offsetY;f=E.x-k.x+N,p=E.y-k.y+P}const m=this.dom.cloneNode(!0);try{const k=this.dom.getBoundingClientRect();m.style.width=`${Math.round(k.width)}px`,m.style.height=`${Math.round(k.height)}px`,m.style.boxSizing="border-box",m.style.pointerEvents="none"}catch{}let x=null;try{x=document.createElement("div"),x.style.position="absolute",x.style.top="-9999px",x.style.left="-9999px",x.style.pointerEvents="none",x.appendChild(m),document.body.appendChild(x),(o=e.dataTransfer)==null||o.setDragImage(m,f,p)}finally{x&&setTimeout(()=>{try{x==null||x.remove()}catch{}},0)}const v=this.getPos();if(typeof v!="number")return;const b=pr.create(l.state.doc,v),w=l.state.tr.setSelection(b);l.dispatch(w)}stopEvent(e){var t;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const r=e.target;if(!(this.dom.contains(r)&&!((t=this.contentDOM)!=null&&t.contains(r))))return!1;const i=e.type.startsWith("drag"),a=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!a&&!i)return!0;const{isEditable:o}=this.editor,{isDragging:l}=this,c=!!this.node.type.spec.draggable,d=pr.isSelectable(this.node),f=e.type==="copy",p=e.type==="paste",m=e.type==="cut",x=e.type==="mousedown";if(!c&&d&&i&&e.target===this.dom&&e.preventDefault(),c&&i&&!l&&e.target===this.dom)return e.preventDefault(),!1;if(c&&o&&!l&&x){const v=r.closest("[data-drag-handle]");v&&(this.dom===v||this.dom.contains(v))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(l||a||f||p||m||x&&d)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(m3()||Tde())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:t})=>{const r=this.getPos();return typeof r!="number"?!1:(t.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if(typeof e!="number")return;const t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}};function sx(e){return new fXe({find:e.find,handler:({state:t,range:r,match:n,pasteEvent:i})=>{const a=Jn(e.getAttributes,void 0,n,i);if(a===!1||a===null)return null;const{tr:s}=t,o=n[n.length-1],l=n[0];let c=r.to;if(o){const d=l.search(/\S/),f=r.from+l.indexOf(o),p=f+o.length;if(K9(r.from,r.to,t.doc).filter(x=>x.mark.type.excluded.find(b=>b===e.type&&b!==x.mark.type)).filter(x=>x.to>f).length)return null;p<r.to&&s.delete(p,r.to),f>r.from&&s.delete(r.from+d,f),c=r.from+d+o.length,s.addMark(r.from+d,c,e.type.create(a||{})),s.removeStoredMark(e.type)}}})}var RXe=Object.getOwnPropertyNames,jXe=Object.getOwnPropertySymbols,DXe=Object.prototype.hasOwnProperty;function WX(e,t){return function(n,i,a){return e(n,i,a)&&t(n,i,a)}}function M_(e){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,i);var a=i.cache,s=a.get(r),o=a.get(n);if(s&&o)return s===n&&o===r;a.set(r,n),a.set(n,r);var l=e(r,n,i);return a.delete(r),a.delete(n),l}}function MXe(e){return e!=null?e[Symbol.toStringTag]:void 0}function VX(e){return RXe(e).concat(jXe(e))}var FXe=Object.hasOwn||function(e,t){return DXe.call(e,t)};function Hx(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var LXe="__v",BXe="__o",UXe="_owner",qX=Object.getOwnPropertyDescriptor,GX=Object.keys;function $Xe(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function zXe(e,t){return Hx(e.getTime(),t.getTime())}function HXe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function WXe(e,t){return e===t}function KX(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var i=new Array(n),a=e.entries(),s,o,l=0;(s=a.next())&&!s.done;){for(var c=t.entries(),d=!1,f=0;(o=c.next())&&!o.done;){if(i[f]){f++;continue}var p=s.value,m=o.value;if(r.equals(p[0],m[0],l,f,e,t,r)&&r.equals(p[1],m[1],p[0],m[0],e,t,r)){d=i[f]=!0;break}f++}if(!d)return!1;l++}return!0}var VXe=Hx;function qXe(e,t,r){var n=GX(e),i=n.length;if(GX(t).length!==i)return!1;for(;i-- >0;)if(!ofe(e,t,r,n[i]))return!1;return!0}function Sw(e,t,r){var n=VX(e),i=n.length;if(VX(t).length!==i)return!1;for(var a,s,o;i-- >0;)if(a=n[i],!ofe(e,t,r,a)||(s=qX(e,a),o=qX(t,a),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function GXe(e,t){return Hx(e.valueOf(),t.valueOf())}function KXe(e,t){return e.source===t.source&&e.flags===t.flags}function XX(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var i=new Array(n),a=e.values(),s,o;(s=a.next())&&!s.done;){for(var l=t.values(),c=!1,d=0;(o=l.next())&&!o.done;){if(!i[d]&&r.equals(s.value,o.value,s.value,o.value,e,t,r)){c=i[d]=!0;break}d++}if(!c)return!1}return!0}function XXe(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function YXe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function ofe(e,t,r,n){return(n===UXe||n===BXe||n===LXe)&&(e.$$typeof||t.$$typeof)?!0:FXe(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var QXe="[object Arguments]",JXe="[object Boolean]",ZXe="[object Date]",eYe="[object Error]",tYe="[object Map]",rYe="[object Number]",nYe="[object Object]",iYe="[object RegExp]",aYe="[object Set]",sYe="[object String]",oYe="[object URL]",lYe=Array.isArray,YX=typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView:null,QX=Object.assign,cYe=Object.prototype.toString.call.bind(Object.prototype.toString);function uYe(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,i=e.areFunctionsEqual,a=e.areMapsEqual,s=e.areNumbersEqual,o=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,p=e.areUrlsEqual,m=e.unknownTagComparators;return function(v,b,w){if(v===b)return!0;if(v==null||b==null)return!1;var k=typeof v;if(k!==typeof b)return!1;if(k!=="object")return k==="number"?s(v,b,w):k==="function"?i(v,b,w):!1;var E=v.constructor;if(E!==b.constructor)return!1;if(E===Object)return o(v,b,w);if(lYe(v))return t(v,b,w);if(YX!=null&&YX(v))return f(v,b,w);if(E===Date)return r(v,b,w);if(E===RegExp)return c(v,b,w);if(E===Map)return a(v,b,w);if(E===Set)return d(v,b,w);var N=cYe(v);if(N===ZXe)return r(v,b,w);if(N===iYe)return c(v,b,w);if(N===tYe)return a(v,b,w);if(N===aYe)return d(v,b,w);if(N===nYe)return typeof v.then!="function"&&typeof b.then!="function"&&o(v,b,w);if(N===oYe)return p(v,b,w);if(N===eYe)return n(v,b,w);if(N===QXe)return o(v,b,w);if(N===JXe||N===rYe||N===sYe)return l(v,b,w);if(m){var P=m[N];if(!P){var R=MXe(v);R&&(P=m[R])}if(P)return P(v,b,w)}return!1}}function dYe(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,i={areArraysEqual:n?Sw:$Xe,areDatesEqual:zXe,areErrorsEqual:HXe,areFunctionsEqual:WXe,areMapsEqual:n?WX(KX,Sw):KX,areNumbersEqual:VXe,areObjectsEqual:n?Sw:qXe,arePrimitiveWrappersEqual:GXe,areRegExpsEqual:KXe,areSetsEqual:n?WX(XX,Sw):XX,areTypedArraysEqual:n?Sw:XXe,areUrlsEqual:YXe,unknownTagComparators:void 0};if(r&&(i=QX({},i,r(i))),t){var a=M_(i.areArraysEqual),s=M_(i.areMapsEqual),o=M_(i.areObjectsEqual),l=M_(i.areSetsEqual);i=QX({},i,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:l})}return i}function fYe(e){return function(t,r,n,i,a,s,o){return e(t,r,o)}}function hYe(e){var t=e.circular,r=e.comparator,n=e.createState,i=e.equals,a=e.strict;if(n)return function(l,c){var d=n(),f=d.cache,p=f===void 0?t?new WeakMap:void 0:f,m=d.meta;return r(l,c,{cache:p,equals:i,meta:m,strict:a})};if(t)return function(l,c){return r(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var s={cache:void 0,equals:i,meta:void 0,strict:a};return function(l,c){return r(l,c,s)}}var pYe=J0();J0({strict:!0});J0({circular:!0});J0({circular:!0,strict:!0});J0({createInternalComparator:function(){return Hx}});J0({strict:!0,createInternalComparator:function(){return Hx}});J0({circular:!0,createInternalComparator:function(){return Hx}});J0({circular:!0,createInternalComparator:function(){return Hx},strict:!0});function J0(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,i=e.createState,a=e.strict,s=a===void 0?!1:a,o=dYe(e),l=uYe(o),c=n?n(l):fYe(l);return hYe({circular:r,comparator:l,createState:i,equals:c,strict:s})}var lfe={exports:{}},cfe={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w3=I,mYe=E9;function gYe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xYe=typeof Object.is=="function"?Object.is:gYe,vYe=mYe.useSyncExternalStore,yYe=w3.useRef,bYe=w3.useEffect,wYe=w3.useMemo,SYe=w3.useDebugValue;cfe.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var a=yYe(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=wYe(function(){function l(m){if(!c){if(c=!0,d=m,m=n(m),i!==void 0&&s.hasValue){var x=s.value;if(i(x,m))return f=x}return f=m}if(x=f,xYe(d,m))return x;var v=n(m);return i!==void 0&&i(x,v)?(d=m,x):(d=m,f=v)}var c=!1,d,f,p=r===void 0?null:r;return[function(){return l(t())},p===null?void 0:function(){return l(p())}]},[t,r,n,i]);var o=vYe(e,a[0],a[1]);return bYe(function(){s.hasValue=!0,s.value=o},[o]),SYe(o),o};lfe.exports=cfe;var ufe=lfe.exports,EYe=(...e)=>t=>{e.forEach(r=>{typeof r=="function"?r(t):r&&(r.current=t)})},CYe=({contentComponent:e})=>{const t=E9.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return u.jsx(u.Fragment,{children:Object.values(t)})};function kYe(){const e=new Set;let t={};return{subscribe(r){return e.add(r),()=>{e.delete(r)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(r,n){t={...t,[r]:vL.createPortal(n.reactElement,n.element,r)},e.forEach(i=>i())},removeRenderer(r){const n={...t};delete n[r],t=n,e.forEach(i=>i())}}}var _Ye=class extends Hr.Component{constructor(e){var t;super(e),this.editorContentRef=Hr.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(e.view.dom),e.setOptions({element:t}),e.contentComponent=kYe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((e=t.view.dom)!=null&&e.firstChild))return;const r=document.createElement("div");r.append(t.view.dom),t.setOptions({element:r})}catch{}}}render(){const{editor:e,innerRef:t,...r}=this.props;return u.jsxs(u.Fragment,{children:[u.jsx("div",{ref:EYe(t,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&u.jsx(CYe,{contentComponent:e.contentComponent})]})}},NYe=I.forwardRef((e,t)=>{const r=Hr.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return Hr.createElement(_Ye,{key:r,innerRef:t,...e})}),AYe=Hr.memo(NYe),TYe=typeof window<"u"?I.useLayoutEffect:I.useEffect,IYe=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(n=>n())},r=this.editor;return r.on("transaction",t),()=>{r.off("transaction",t)}}}};function OYe(e){var t;const[r]=I.useState(()=>new IYe(e.editor)),n=ufe.useSyncExternalStoreWithSelector(r.subscribe,r.getSnapshot,r.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:pYe);return TYe(()=>r.watch(e.editor),[e.editor,r]),I.useDebugValue(n),n}var PYe=!1,Q8=typeof window>"u",RYe=Q8||!!(typeof window<"u"&&window.next),jYe=class dfe{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(r=>r())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Q8||RYe?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...n)=>{var i,a;return(a=(i=this.options.current).onBeforeCreate)==null?void 0:a.call(i,...n)},onBlur:(...n)=>{var i,a;return(a=(i=this.options.current).onBlur)==null?void 0:a.call(i,...n)},onCreate:(...n)=>{var i,a;return(a=(i=this.options.current).onCreate)==null?void 0:a.call(i,...n)},onDestroy:(...n)=>{var i,a;return(a=(i=this.options.current).onDestroy)==null?void 0:a.call(i,...n)},onFocus:(...n)=>{var i,a;return(a=(i=this.options.current).onFocus)==null?void 0:a.call(i,...n)},onSelectionUpdate:(...n)=>{var i,a;return(a=(i=this.options.current).onSelectionUpdate)==null?void 0:a.call(i,...n)},onTransaction:(...n)=>{var i,a;return(a=(i=this.options.current).onTransaction)==null?void 0:a.call(i,...n)},onUpdate:(...n)=>{var i,a;return(a=(i=this.options.current).onUpdate)==null?void 0:a.call(i,...n)},onContentError:(...n)=>{var i,a;return(a=(i=this.options.current).onContentError)==null?void 0:a.call(i,...n)},onDrop:(...n)=>{var i,a;return(a=(i=this.options.current).onDrop)==null?void 0:a.call(i,...n)},onPaste:(...n)=>{var i,a;return(a=(i=this.options.current).onPaste)==null?void 0:a.call(i,...n)},onDelete:(...n)=>{var i,a;return(a=(i=this.options.current).onDelete)==null?void 0:a.call(i,...n)}};return new wXe(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,r){return Object.keys(t).every(n=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)?!0:n==="extensions"&&t.extensions&&r.extensions?t.extensions.length!==r.extensions.length?!1:t.extensions.every((i,a)=>{var s;return i===((s=r.extensions)==null?void 0:s[a])}):t[n]===r[n])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?dfe.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((n,i)=>n===t[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,r=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){r&&r.setOptions(this.options.current);return}r&&!r.isDestroyed&&(r.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function DYe(e={},t=[]){const r=I.useRef(e);r.current=e;const[n]=I.useState(()=>new jYe(r)),i=E9.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return I.useDebugValue(i),I.useEffect(n.onRender(t)),OYe({editor:i,selector:({transactionNumber:a})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&a===0?0:a+1}),i}var MYe=I.createContext({editor:null});MYe.Consumer;var ffe=I.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),FYe=()=>I.useContext(ffe),LYe=Hr.forwardRef((e,t)=>{const{onDragStart:r}=FYe(),n=e.as||"div";return u.jsx(n,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...e.style}})});function JX(e){return!!(typeof e=="function"&&e.prototype&&e.prototype.isReactComponent)}function ZX(e){return!!(typeof e=="object"&&e.$$typeof&&(e.$$typeof.toString()==="Symbol(react.forward_ref)"||e.$$typeof.description==="react.forward_ref"))}function BYe(e){return!!(typeof e=="object"&&e.$$typeof&&(e.$$typeof.toString()==="Symbol(react.memo)"||e.$$typeof.description==="react.memo"))}function UYe(e){if(JX(e)||ZX(e))return!0;if(BYe(e)){const t=e.type;if(t)return JX(t)||ZX(t)}return!1}function $Ye(){try{if(I.version)return parseInt(I.version.split(".")[0],10)>=19}catch{}return!1}var hfe=class{constructor(e,{editor:t,props:r={},as:n="div",className:i=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=t,this.props=r,this.element=document.createElement(n),this.element.classList.add("react-renderer"),i&&this.element.classList.add(...i.split(" ")),this.editor.isInitialized?Il.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.render()})}render(){var e;const t=this.component,r=this.props,n=this.editor,i=$Ye(),a=UYe(t),s={...r};s.ref&&!(i||a)&&delete s.ref,!s.ref&&(i||a)&&(s.ref=o=>{this.ref=o}),this.reactElement=u.jsx(t,{...s}),(e=n==null?void 0:n.contentComponent)==null||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;const t=this.editor;(e=t==null?void 0:t.contentComponent)==null||e.removeRenderer(this.id);try{this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}catch{}}updateAttributes(e){Object.keys(e).forEach(t=>{this.element.setAttribute(t,e[t])})}};Hr.createContext({markViewContentRef:()=>{}});var zYe=class extends PXe{constructor(e,t,r){if(super(e,t,r),this.selectionRafId=null,!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const n=this.dom.querySelector("[data-node-view-content]");if(!n)return;n.appendChild(this.contentDOMElement)}}mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(l={})=>this.updateAttributes(l),deleteNode:()=>this.deleteNode(),ref:I.createRef()};if(!this.component.displayName){const l=c=>c.charAt(0).toUpperCase()+c.substring(1);this.component.displayName=l(this.extension.name)}const n={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:l=>{l&&this.contentDOMElement&&l.firstChild!==this.contentDOMElement&&(l.hasAttribute("data-node-view-wrapper")&&l.removeAttribute("data-node-view-wrapper"),l.appendChild(this.contentDOMElement))}},i=this.component,a=I.memo(l=>u.jsx(ffe.Provider,{value:n,children:I.createElement(i,l)}));a.displayName="ReactNodeView";let s=this.node.isInline?"span":"div";this.options.as&&(s=this.options.as);const{className:o=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new hfe(a,{editor:this.editor,props:e,as:s,className:`node-${this.node.type.name} ${o}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!((e=this.renderer.element.firstElementChild)!=null&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){this.selectionRafId&&(cancelAnimationFrame(this.selectionRafId),this.selectionRafId=null),this.selectionRafId=requestAnimationFrame(()=>{this.selectionRafId=null;const{from:e,to:t}=this.editor.state.selection,r=this.getPos();if(typeof r=="number")if(e<=r&&t>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}})}update(e,t,r){const n=i=>{this.renderer.updateProps(i),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const i=this.node,a=this.decorations,s=this.innerDecorations;return this.node=e,this.decorations=t,this.innerDecorations=r,this.options.update({oldNode:i,oldDecorations:a,newNode:e,newDecorations:t,oldInnerDecorations:s,innerDecorations:r,updateProps:()=>n({node:e,decorations:t,innerDecorations:r})})}return e===this.node&&this.decorations===t&&this.innerDecorations===r||(this.node=e,this.decorations=t,this.innerDecorations=r,n({node:e,decorations:t,innerDecorations:r})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null,this.selectionRafId&&(cancelAnimationFrame(this.selectionRafId),this.selectionRafId=null)}updateElementAttributes(){if(this.options.attrs){let e={};if(typeof this.options.attrs=="function"){const t=this.editor.extensionManager.attributes,r=_S(this.node,t);e=this.options.attrs({node:this.node,HTMLAttributes:r})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}};function HYe(e,t){return r=>r.editor.contentComponent?new zYe(e,r,t):{}}var jT=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:r,...n}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,n,r]},WYe=/^\s*>\s$/,VYe=Yo.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return jT("blockquote",{...Ci(this.options.HTMLAttributes,e),children:jT("slot",{})})},parseMarkdown:(e,t)=>t.createNode("blockquote",void 0,t.parseChildren(e.tokens||[])),renderMarkdown:(e,t)=>{if(!e.content)return"";const r=">",n=[];return e.content.forEach(i=>{const o=t.renderChildren([i]).split(`
`).map(l=>l.trim()===""?r:`${r} ${l}`);n.push(o.join(`
`))}),n.join(`
${r}
`)},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[vy({find:WYe,type:this.type})]}}),qYe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,GYe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,KYe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,XYe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,YYe=zx.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return jT("strong",{...Ci(this.options.HTMLAttributes,e),children:jT("slot",{})})},markdownTokenName:"strong",parseMarkdown:(e,t)=>t.applyMark("bold",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`**${t.renderChildren(e)}**`,addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[xy({find:qYe,type:this.type}),xy({find:KYe,type:this.type})]},addPasteRules(){return[sx({find:GYe,type:this.type}),sx({find:XYe,type:this.type})]}}),QYe=/(^|[^`])`([^`]+)`(?!`)$/,JYe=/(^|[^`])`([^`]+)`(?!`)/g,ZYe=zx.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",Ci(this.options.HTMLAttributes,e),0]},markdownTokenName:"codespan",parseMarkdown:(e,t)=>t.applyMark("code",[{type:"text",text:e.text||""}]),renderMarkdown:(e,t)=>e.content?`\`${t.renderChildren(e.content)}\``:"",addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[xy({find:QYe,type:this.type})]},addPasteRules(){return[sx({find:JYe,type:this.type})]}}),kD=4,eQe=/^```([a-z]+)?[\s\n]$/,tQe=/^~~~([a-z]+)?[\s\n]$/,rQe=Yo.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:kD,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:r}=this.options;if(!r)return null;const a=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(s=>s.startsWith(r)).map(s=>s.replace(r,""))[0];return a||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",Ci(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(e,t)=>{var r;return((r=e.raw)==null?void 0:r.startsWith("```"))===!1&&e.codeBlockStyle!=="indented"?[]:t.createNode("codeBlock",{language:e.lang||null},e.text?[t.createTextNode(e.text)]:[])},renderMarkdown:(e,t)=>{var r;let n="";const i=((r=e.attrs)==null?void 0:r.language)||"";return e.content?n=[`\`\`\`${i}`,t.renderChildren(e.content),"```"].join(`
`):n=`\`\`\`${i}

\`\`\``,n},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,r=t.pos===1;return!e||t.parent.type.name!==this.name?!1:r||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const r=(t=this.options.tabSize)!=null?t:kD,{state:n}=e,{selection:i}=n,{$from:a,empty:s}=i;if(a.parent.type!==this.type)return!1;const o=" ".repeat(r);return s?e.commands.insertContent(o):e.commands.command(({tr:l})=>{const{from:c,to:d}=i,m=n.doc.textBetween(c,d,`
`,`
`).split(`
`).map(x=>o+x).join(`
`);return l.replaceWith(c,d,n.schema.text(m)),!0})},"Shift-Tab":({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const r=(t=this.options.tabSize)!=null?t:kD,{state:n}=e,{selection:i}=n,{$from:a,empty:s}=i;return a.parent.type!==this.type?!1:s?e.commands.command(({tr:o})=>{var l;const{pos:c}=a,d=a.start(),f=a.end(),m=n.doc.textBetween(d,f,`
`,`
`).split(`
`);let x=0,v=0;const b=c-d;for(let R=0;R<m.length;R+=1){if(v+m[R].length>=b){x=R;break}v+=m[R].length+1}const k=((l=m[x].match(/^ */))==null?void 0:l[0])||"",E=Math.min(k.length,r);if(E===0)return!0;let N=d;for(let R=0;R<x;R+=1)N+=m[R].length+1;return o.delete(N,N+E),c-N<=E&&o.setSelection(Ur.create(o.doc,N)),!0}):e.commands.command(({tr:o})=>{const{from:l,to:c}=i,p=n.doc.textBetween(l,c,`
`,`
`).split(`
`).map(m=>{var x;const v=((x=m.match(/^ */))==null?void 0:x[0])||"",b=Math.min(v.length,r);return m.slice(b)}).join(`
`);return o.replaceWith(l,c,n.schema.text(p)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:r}=t,{$from:n,empty:i}=r;if(!i||n.parent.type!==this.type)return!1;const a=n.parentOffset===n.parent.nodeSize-2,s=n.parent.textContent.endsWith(`

`);return!a||!s?!1:e.chain().command(({tr:o})=>(o.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:r,doc:n}=t,{$from:i,empty:a}=r;if(!a||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const o=i.after();return o===void 0?!1:n.nodeAt(o)?e.commands.command(({tr:c})=>(c.setSelection(dn.near(n.resolve(o))),!0)):e.commands.exitCode()}}},addInputRules(){return[X8({find:eQe,type:this.type,getAttributes:e=>({language:e[1]})}),X8({find:tQe,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new Fi({key:new va("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const r=t.clipboardData.getData("text/plain"),n=t.clipboardData.getData("vscode-editor-data"),i=n?JSON.parse(n):void 0,a=i==null?void 0:i.mode;if(!r||!a)return!1;const{tr:s,schema:o}=e.state,l=o.text(r.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:a},l)),s.selection.$from.parent.type!==this.type&&s.setSelection(Ur.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),e.dispatch(s),!0}}})]}}),nQe=Yo.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`

`):""}),iQe=Yo.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",Ci(this.options.HTMLAttributes,e)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:r,editor:n})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:i,storedMarks:a}=r;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:o}=n.extensionManager,l=a||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:c,dispatch:d})=>{if(d&&l&&s){const f=l.filter(p=>o.includes(p.type.name));c.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),pfe=Yo.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,Ci(this.options.HTMLAttributes,t),0]},parseMarkdown:(e,t)=>t.createNode("heading",{level:e.depth||1},t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>{var r;const n=(r=e.attrs)!=null&&r.level?parseInt(e.attrs.level,10):1,i="#".repeat(n);return e.content?`${i} ${t.renderChildren(e.content)}`:""},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>X8({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),aQe=pfe,sQe=Yo.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",Ci(this.options.HTMLAttributes,e)]},markdownTokenName:"hr",parseMarkdown:(e,t)=>t.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!CXe(t,t.schema.nodes[this.name]))return!1;const{selection:r}=t,{$to:n}=r,i=e();return $de(r)?i.insertContentAt(n.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:a,tr:s,dispatch:o})=>{if(o){const{$to:l}=s.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?s.setSelection(Ur.create(s.doc,l.pos+1)):l.nodeAfter.isBlock?s.setSelection(pr.create(s.doc,l.pos)):s.setSelection(Ur.create(s.doc,l.pos));else{const d=a.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,f=d==null?void 0:d.create();f&&(s.insert(c,f),s.setSelection(Ur.create(s.doc,c+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[ife({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),oQe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,lQe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,cQe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,uQe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,dQe=zx.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",Ci(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(e,t)=>t.applyMark("italic",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`*${t.renderChildren(e)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[xy({find:oQe,type:this.type}),xy({find:cQe,type:this.type})]},addPasteRules(){return[sx({find:lQe,type:this.type}),sx({find:uQe,type:this.type})]}});const fQe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",hQe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",J8="numeric",Z8="ascii",eF="alpha",E2="asciinumeric",Xw="alphanumeric",tF="domain",mfe="emoji",pQe="scheme",mQe="slashscheme",_D="whitespace";function gQe(e,t){return e in t||(t[e]=[]),t[e]}function ig(e,t,r){t[J8]&&(t[E2]=!0,t[Xw]=!0),t[Z8]&&(t[E2]=!0,t[eF]=!0),t[E2]&&(t[Xw]=!0),t[eF]&&(t[Xw]=!0),t[Xw]&&(t[tF]=!0),t[mfe]&&(t[tF]=!0);for(const n in t){const i=gQe(n,r);i.indexOf(e)<0&&i.push(e)}}function xQe(e,t){const r={};for(const n in t)t[n].indexOf(e)>=0&&(r[n]=!0);return r}function dl(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}dl.groups={};dl.prototype={accepts(){return!!this.t},go(e){const t=this,r=t.j[e];if(r)return r;for(let n=0;n<t.jr.length;n++){const i=t.jr[n][0],a=t.jr[n][1];if(a&&i.test(e))return a}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,r,n){for(let i=0;i<e.length;i++)this.tt(e[i],t,r,n)},tr(e,t,r,n){n=n||dl.groups;let i;return t&&t.j?i=t:(i=new dl(t),r&&n&&ig(t,r,n)),this.jr.push([e,i]),i},ts(e,t,r,n){let i=this;const a=e.length;if(!a)return i;for(let s=0;s<a-1;s++)i=i.tt(e[s]);return i.tt(e[a-1],t,r,n)},tt(e,t,r,n){n=n||dl.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const a=t;let s,o=i.go(e);if(o?(s=new dl,Object.assign(s.j,o.j),s.jr.push.apply(s.jr,o.jr),s.jd=o.jd,s.t=o.t):s=new dl,a){if(n)if(s.t&&typeof s.t=="string"){const l=Object.assign(xQe(s.t,n),r);ig(a,l,n)}else r&&ig(a,r,n);s.t=a}return i.j[e]=s,s}};const cn=(e,t,r,n,i)=>e.ta(t,r,n,i),Yi=(e,t,r,n,i)=>e.tr(t,r,n,i),eY=(e,t,r,n,i)=>e.ts(t,r,n,i),Rt=(e,t,r,n,i)=>e.tt(t,r,n,i),Xf="WORD",rF="UWORD",gfe="ASCIINUMERICAL",xfe="ALPHANUMERICAL",NS="LOCALHOST",nF="TLD",iF="UTLD",XN="SCHEME",H1="SLASH_SCHEME",Z9="NUM",aF="WS",eB="NL",C2="OPENBRACE",k2="CLOSEBRACE",DT="OPENBRACKET",MT="CLOSEBRACKET",FT="OPENPAREN",LT="CLOSEPAREN",BT="OPENANGLEBRACKET",UT="CLOSEANGLEBRACKET",$T="FULLWIDTHLEFTPAREN",zT="FULLWIDTHRIGHTPAREN",HT="LEFTCORNERBRACKET",WT="RIGHTCORNERBRACKET",VT="LEFTWHITECORNERBRACKET",qT="RIGHTWHITECORNERBRACKET",GT="FULLWIDTHLESSTHAN",KT="FULLWIDTHGREATERTHAN",XT="AMPERSAND",YT="APOSTROPHE",QT="ASTERISK",Fp="AT",JT="BACKSLASH",ZT="BACKTICK",eI="CARET",Vp="COLON",tB="COMMA",tI="DOLLAR",Od="DOT",rI="EQUALS",rB="EXCLAMATION",Fc="HYPHEN",_2="PERCENT",nI="PIPE",iI="PLUS",aI="POUND",N2="QUERY",nB="QUOTE",vfe="FULLWIDTHMIDDLEDOT",iB="SEMI",Pd="SLASH",A2="TILDE",sI="UNDERSCORE",yfe="EMOJI",oI="SYM";var bfe=Object.freeze({__proto__:null,ALPHANUMERICAL:xfe,AMPERSAND:XT,APOSTROPHE:YT,ASCIINUMERICAL:gfe,ASTERISK:QT,AT:Fp,BACKSLASH:JT,BACKTICK:ZT,CARET:eI,CLOSEANGLEBRACKET:UT,CLOSEBRACE:k2,CLOSEBRACKET:MT,CLOSEPAREN:LT,COLON:Vp,COMMA:tB,DOLLAR:tI,DOT:Od,EMOJI:yfe,EQUALS:rI,EXCLAMATION:rB,FULLWIDTHGREATERTHAN:KT,FULLWIDTHLEFTPAREN:$T,FULLWIDTHLESSTHAN:GT,FULLWIDTHMIDDLEDOT:vfe,FULLWIDTHRIGHTPAREN:zT,HYPHEN:Fc,LEFTCORNERBRACKET:HT,LEFTWHITECORNERBRACKET:VT,LOCALHOST:NS,NL:eB,NUM:Z9,OPENANGLEBRACKET:BT,OPENBRACE:C2,OPENBRACKET:DT,OPENPAREN:FT,PERCENT:_2,PIPE:nI,PLUS:iI,POUND:aI,QUERY:N2,QUOTE:nB,RIGHTCORNERBRACKET:WT,RIGHTWHITECORNERBRACKET:qT,SCHEME:XN,SEMI:iB,SLASH:Pd,SLASH_SCHEME:H1,SYM:oI,TILDE:A2,TLD:nF,UNDERSCORE:sI,UTLD:iF,UWORD:rF,WORD:Xf,WS:aF});const Vf=/[a-z]/,Ew=new RegExp("\\p{L}","u"),ND=new RegExp("\\p{Emoji}","u"),qf=/\d/,AD=/\s/,tY="\r",TD=`
`,vQe="",yQe="",ID="";let F_=null,L_=null;function bQe(e=[]){const t={};dl.groups=t;const r=new dl;F_==null&&(F_=rY(fQe)),L_==null&&(L_=rY(hQe)),Rt(r,"'",YT),Rt(r,"{",C2),Rt(r,"}",k2),Rt(r,"[",DT),Rt(r,"]",MT),Rt(r,"(",FT),Rt(r,")",LT),Rt(r,"<",BT),Rt(r,">",UT),Rt(r,"",$T),Rt(r,"",zT),Rt(r,"",HT),Rt(r,"",WT),Rt(r,"",VT),Rt(r,"",qT),Rt(r,"",GT),Rt(r,"",KT),Rt(r,"&",XT),Rt(r,"*",QT),Rt(r,"@",Fp),Rt(r,"`",ZT),Rt(r,"^",eI),Rt(r,":",Vp),Rt(r,",",tB),Rt(r,"$",tI),Rt(r,".",Od),Rt(r,"=",rI),Rt(r,"!",rB),Rt(r,"-",Fc),Rt(r,"%",_2),Rt(r,"|",nI),Rt(r,"+",iI),Rt(r,"#",aI),Rt(r,"?",N2),Rt(r,'"',nB),Rt(r,"/",Pd),Rt(r,";",iB),Rt(r,"~",A2),Rt(r,"_",sI),Rt(r,"\\",JT),Rt(r,"",vfe);const n=Yi(r,qf,Z9,{[J8]:!0});Yi(n,qf,n);const i=Yi(n,Vf,gfe,{[E2]:!0}),a=Yi(n,Ew,xfe,{[Xw]:!0}),s=Yi(r,Vf,Xf,{[Z8]:!0});Yi(s,qf,i),Yi(s,Vf,s),Yi(i,qf,i),Yi(i,Vf,i);const o=Yi(r,Ew,rF,{[eF]:!0});Yi(o,Vf),Yi(o,qf,a),Yi(o,Ew,o),Yi(a,qf,a),Yi(a,Vf),Yi(a,Ew,a);const l=Rt(r,TD,eB,{[_D]:!0}),c=Rt(r,tY,aF,{[_D]:!0}),d=Yi(r,AD,aF,{[_D]:!0});Rt(r,ID,d),Rt(c,TD,l),Rt(c,ID,d),Yi(c,AD,d),Rt(d,tY),Rt(d,TD),Yi(d,AD,d),Rt(d,ID,d);const f=Yi(r,ND,yfe,{[mfe]:!0});Rt(f,"#"),Yi(f,ND,f),Rt(f,vQe,f);const p=Rt(f,yQe);Rt(p,"#"),Yi(p,ND,f);const m=[[Vf,s],[qf,i]],x=[[Vf,null],[Ew,o],[qf,a]];for(let v=0;v<F_.length;v++)kp(r,F_[v],nF,Xf,m);for(let v=0;v<L_.length;v++)kp(r,L_[v],iF,rF,x);ig(nF,{tld:!0,ascii:!0},t),ig(iF,{utld:!0,alpha:!0},t),kp(r,"file",XN,Xf,m),kp(r,"mailto",XN,Xf,m),kp(r,"http",H1,Xf,m),kp(r,"https",H1,Xf,m),kp(r,"ftp",H1,Xf,m),kp(r,"ftps",H1,Xf,m),ig(XN,{scheme:!0,ascii:!0},t),ig(H1,{slashscheme:!0,ascii:!0},t),e=e.sort((v,b)=>v[0]>b[0]?1:-1);for(let v=0;v<e.length;v++){const b=e[v][0],k=e[v][1]?{[pQe]:!0}:{[mQe]:!0};b.indexOf("-")>=0?k[tF]=!0:Vf.test(b)?qf.test(b)?k[E2]=!0:k[Z8]=!0:k[J8]=!0,eY(r,b,b,k)}return eY(r,"localhost",NS,{ascii:!0}),r.jd=new dl(oI),{start:r,tokens:Object.assign({groups:t},bfe)}}function wfe(e,t){const r=wQe(t.replace(/[A-Z]/g,o=>o.toLowerCase())),n=r.length,i=[];let a=0,s=0;for(;s<n;){let o=e,l=null,c=0,d=null,f=-1,p=-1;for(;s<n&&(l=o.go(r[s]));)o=l,o.accepts()?(f=0,p=0,d=o):f>=0&&(f+=r[s].length,p++),c+=r[s].length,a+=r[s].length,s++;a-=f,s-=p,c-=f,i.push({t:d.t,v:t.slice(a-c,a),s:a-c,e:a})}return i}function wQe(e){const t=[],r=e.length;let n=0;for(;n<r;){let i=e.charCodeAt(n),a,s=i<55296||i>56319||n+1===r||(a=e.charCodeAt(n+1))<56320||a>57343?e[n]:e.slice(n,n+2);t.push(s),n+=s.length}return t}function kp(e,t,r,n,i){let a;const s=t.length;for(let o=0;o<s-1;o++){const l=t[o];e.j[l]?a=e.j[l]:(a=new dl(n),a.jr=i.slice(),e.j[l]=a),e=a}return a=new dl(r),a.jr=i.slice(),e.j[t[s-1]]=a,a}function rY(e){const t=[],r=[];let n=0,i="0123456789";for(;n<e.length;){let a=0;for(;i.indexOf(e[n+a])>=0;)a++;if(a>0){t.push(r.join(""));for(let s=parseInt(e.substring(n,n+a),10);s>0;s--)r.pop();n+=a}else r.push(e[n]),n++}return t}const AS={defaultProtocol:"http",events:null,format:nY,formatHref:nY,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function aB(e,t=null){let r=Object.assign({},AS);e&&(r=Object.assign(r,e instanceof aB?e.o:e));const n=r.ignoreTags,i=[];for(let a=0;a<n.length;a++)i.push(n[a].toUpperCase());this.o=r,t&&(this.defaultRender=t),this.ignoreTags=i}aB.prototype={o:AS,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,r){const n=t!=null;let i=this.o[e];return i&&(typeof i=="object"?(i=r.t in i?i[r.t]:AS[e],typeof i=="function"&&n&&(i=i(t,r))):typeof i=="function"&&n&&(i=i(t,r.t,r)),i)},getObj(e,t,r){let n=this.o[e];return typeof n=="function"&&t!=null&&(n=n(t,r.t,r)),n},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function nY(e){return e}function Sfe(e,t){this.t="token",this.v=e,this.tk=t}Sfe.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),r=e.get("truncate",t,this),n=e.get("format",t,this);return r&&n.length>r?n.substring(0,r)+"":n},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=AS.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,r=this.toHref(e.get("defaultProtocol")),n=e.get("formatHref",r,this),i=e.get("tagName",r,t),a=this.toFormattedString(e),s={},o=e.get("className",r,t),l=e.get("target",r,t),c=e.get("rel",r,t),d=e.getObj("attributes",r,t),f=e.getObj("events",r,t);return s.href=n,o&&(s.class=o),l&&(s.target=l),c&&(s.rel=c),d&&Object.assign(s,d),{tagName:i,attributes:s,content:a,eventListeners:f}}};function S3(e,t){class r extends Sfe{constructor(i,a){super(i,a),this.t=e}}for(const n in t)r.prototype[n]=t[n];return r.t=e,r}const iY=S3("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),aY=S3("text"),SQe=S3("nl"),B_=S3("url",{isLink:!0,toHref(e=AS.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==NS&&e[1].t===Vp}}),Nc=e=>new dl(e);function EQe({groups:e}){const t=e.domain.concat([XT,QT,Fp,JT,ZT,eI,tI,rI,Fc,Z9,_2,nI,iI,aI,Pd,oI,A2,sI]),r=[YT,Vp,tB,Od,rB,_2,N2,nB,iB,BT,UT,C2,k2,MT,DT,FT,LT,$T,zT,HT,WT,VT,qT,GT,KT],n=[XT,YT,QT,JT,ZT,eI,tI,rI,Fc,C2,k2,_2,nI,iI,aI,N2,Pd,oI,A2,sI],i=Nc(),a=Rt(i,A2);cn(a,n,a),cn(a,e.domain,a);const s=Nc(),o=Nc(),l=Nc();cn(i,e.domain,s),cn(i,e.scheme,o),cn(i,e.slashscheme,l),cn(s,n,a),cn(s,e.domain,s);const c=Rt(s,Fp);Rt(a,Fp,c),Rt(o,Fp,c),Rt(l,Fp,c);const d=Rt(a,Od);cn(d,n,a),cn(d,e.domain,a);const f=Nc();cn(c,e.domain,f),cn(f,e.domain,f);const p=Rt(f,Od);cn(p,e.domain,f);const m=Nc(iY);cn(p,e.tld,m),cn(p,e.utld,m),Rt(c,NS,m);const x=Rt(f,Fc);Rt(x,Fc,x),cn(x,e.domain,f),cn(m,e.domain,f),Rt(m,Od,p),Rt(m,Fc,x);const v=Rt(m,Vp);cn(v,e.numeric,iY);const b=Rt(s,Fc),w=Rt(s,Od);Rt(b,Fc,b),cn(b,e.domain,s),cn(w,n,a),cn(w,e.domain,s);const k=Nc(B_);cn(w,e.tld,k),cn(w,e.utld,k),cn(k,e.domain,s),cn(k,n,a),Rt(k,Od,w),Rt(k,Fc,b),Rt(k,Fp,c);const E=Rt(k,Vp),N=Nc(B_);cn(E,e.numeric,N);const P=Nc(B_),R=Nc();cn(P,t,P),cn(P,r,R),cn(R,t,P),cn(R,r,R),Rt(k,Pd,P),Rt(N,Pd,P);const O=Rt(o,Vp),D=Rt(l,Vp),L=Rt(D,Pd),B=Rt(L,Pd);cn(o,e.domain,s),Rt(o,Od,w),Rt(o,Fc,b),cn(l,e.domain,s),Rt(l,Od,w),Rt(l,Fc,b),cn(O,e.domain,P),Rt(O,Pd,P),Rt(O,N2,P),cn(B,e.domain,P),cn(B,t,P),Rt(B,Pd,P);const z=[[C2,k2],[DT,MT],[FT,LT],[BT,UT],[$T,zT],[HT,WT],[VT,qT],[GT,KT]];for(let H=0;H<z.length;H++){const[te,Y]=z[H],W=Rt(P,te);Rt(R,te,W),Rt(W,Y,P);const Z=Nc(B_);cn(W,t,Z);const re=Nc();cn(W,r),cn(Z,t,Z),cn(Z,r,re),cn(re,t,Z),cn(re,r,re),Rt(Z,Y,P),Rt(re,Y,P)}return Rt(i,NS,k),Rt(i,eB,SQe),{start:i,tokens:bfe}}function CQe(e,t,r){let n=r.length,i=0,a=[],s=[];for(;i<n;){let o=e,l=null,c=null,d=0,f=null,p=-1;for(;i<n&&!(l=o.go(r[i].t));)s.push(r[i++]);for(;i<n&&(c=l||o.go(r[i].t));)l=null,o=c,o.accepts()?(p=0,f=o):p>=0&&p++,i++,d++;if(p<0)i-=d,i<n&&(s.push(r[i]),i++);else{s.length>0&&(a.push(OD(aY,t,s)),s=[]),i-=p,d-=p;const m=f.t,x=r.slice(i-d,i);a.push(OD(m,t,x))}}return s.length>0&&a.push(OD(aY,t,s)),a}function OD(e,t,r){const n=r[0].s,i=r[r.length-1].e,a=t.slice(n,i);return new e(a,r)}const kQe=typeof console<"u"&&console&&console.warn||(()=>{}),_Qe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",yi={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function NQe(){return dl.groups={},yi.scanner=null,yi.parser=null,yi.tokenQueue=[],yi.pluginQueue=[],yi.customSchemes=[],yi.initialized=!1,yi}function sY(e,t=!1){if(yi.initialized&&kQe(`linkifyjs: already initialized - will not register custom scheme "${e}" ${_Qe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);yi.customSchemes.push([e,t])}function AQe(){yi.scanner=bQe(yi.customSchemes);for(let e=0;e<yi.tokenQueue.length;e++)yi.tokenQueue[e][1]({scanner:yi.scanner});yi.parser=EQe(yi.scanner.tokens);for(let e=0;e<yi.pluginQueue.length;e++)yi.pluginQueue[e][1]({scanner:yi.scanner,parser:yi.parser});return yi.initialized=!0,yi}function sB(e){return yi.initialized||AQe(),CQe(yi.parser.start,e,wfe(yi.scanner.start,e))}sB.scan=wfe;function Efe(e,t=null,r=null){if(t&&typeof t=="object"){if(r)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);r=t,t=null}const n=new aB(r),i=sB(e),a=[];for(let s=0;s<i.length;s++){const o=i[s];o.isLink&&(!t||o.t===t)&&n.check(o)&&a.push(o.toFormattedObject(n))}return a}var oB="[\0- -\u2029]",TQe=new RegExp(oB),IQe=new RegExp(`${oB}$`),OQe=new RegExp(oB,"g");function PQe(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function RQe(e){return new Fi({key:new va("autolink"),appendTransaction:(t,r,n)=>{const i=t.some(c=>c.docChanged)&&!r.doc.eq(n.doc),a=t.some(c=>c.getMeta("preventAutolink"));if(!i||a)return;const{tr:s}=n,o=Rde(r.doc,[...t]);if(Ude(o).forEach(({newRange:c})=>{const d=EKe(n.doc,c,m=>m.isTextblock);let f,p;if(d.length>1)f=d[0],p=n.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(d.length){const m=n.doc.textBetween(c.from,c.to," "," ");if(!IQe.test(m))return;f=d[0],p=n.doc.textBetween(f.pos,c.to,void 0," ")}if(f&&p){const m=p.split(TQe).filter(Boolean);if(m.length<=0)return!1;const x=m[m.length-1],v=f.pos+p.lastIndexOf(x);if(!x)return!1;const b=sB(x).map(w=>w.toObject(e.defaultProtocol));if(!PQe(b))return!1;b.filter(w=>w.isLink).map(w=>({...w,from:v+w.start+1,to:v+w.end+1})).filter(w=>n.schema.marks.code?!n.doc.rangeHasMark(w.from,w.to,n.schema.marks.code):!0).filter(w=>e.validate(w.value)).filter(w=>e.shouldAutoLink(w.value)).forEach(w=>{K9(w.from,w.to,n.doc).some(k=>k.mark.type===e.type)||s.addMark(w.from,w.to,e.type.create({href:w.href}))})}}),!!s.steps.length)return s}})}function jQe(e){return new Fi({key:new va("handleClickLink"),props:{handleClick:(t,r,n)=>{var i,a;if(n.button!==0||!t.editable)return!1;let s=!1;if(e.enableClickSelection&&(s=e.editor.commands.extendMarkRange(e.type.name)),e.openOnClick){let o=null;if(n.target instanceof HTMLAnchorElement)o=n.target;else{let f=n.target;const p=[];for(;f.nodeName!=="DIV";)p.push(f),f=f.parentNode;o=p.find(m=>m.nodeName==="A")}if(!o)return s;const l=Bde(t.state,e.type.name),c=(i=o==null?void 0:o.href)!=null?i:l.href,d=(a=o==null?void 0:o.target)!=null?a:l.target;o&&c&&(window.open(c,d),s=!0)}return s}}})}function DQe(e){return new Fi({key:new va("handlePasteLink"),props:{handlePaste:(t,r,n)=>{const{shouldAutoLink:i}=e,{state:a}=t,{selection:s}=a,{empty:o}=s;if(o)return!1;let l="";n.content.forEach(d=>{l+=d.textContent});const c=Efe(l,{defaultProtocol:e.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!c||i!==void 0&&!i(c.href)?!1:e.editor.commands.setMark(e.type,{href:c.href})}}})}function Om(e,t){const r=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(n=>{const i=typeof n=="string"?n:n.scheme;i&&r.push(i)}),!e||e.replace(OQe,"").match(new RegExp(`^(?:(?:${r.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Cfe=zx.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){sY(e);return}sY(e.scheme,e.optionalSlashes)})},onDestroy(){NQe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!Om(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:r=>!!Om(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!Om(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Ci(this.options.HTMLAttributes,e),0]:["a",Ci(this.options.HTMLAttributes,{...e,href:""}),0]},markdownTokenName:"link",parseMarkdown:(e,t)=>t.applyMark("link",t.parseInline(e.tokens||[]),{href:e.href,title:e.title||null}),renderMarkdown:(e,t)=>{var r;const n=((r=e.attrs)==null?void 0:r.href)||"";return`[${t.renderChildren(e)}](${n})`},addCommands(){return{setLink:e=>({chain:t})=>{const{href:r}=e;return this.options.isAllowedUri(r,{defaultValidate:n=>!!Om(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:r}=e||{};return r&&!this.options.isAllowedUri(r,{defaultValidate:n=>!!Om(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[sx({find:e=>{const t=[];if(e){const{protocols:r,defaultProtocol:n}=this.options,i=Efe(e).filter(a=>a.isLink&&this.options.isAllowedUri(a.value,{defaultValidate:s=>!!Om(s,r),protocols:r,defaultProtocol:n}));i.length&&i.forEach(a=>{this.options.shouldAutoLink(a.value)&&t.push({text:a.value,data:{href:a.href},index:a.start})})}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:r}=this.options;return this.options.autolink&&e.push(RQe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:i=>!!Om(i,t),protocols:t,defaultProtocol:r}),shouldAutoLink:this.options.shouldAutoLink})),e.push(jQe({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(DQe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),e}}),MQe=Cfe,FQe=Object.defineProperty,LQe=(e,t)=>{for(var r in t)FQe(e,r,{get:t[r],enumerable:!0})},BQe="listItem",oY="textStyle",lY=/^\s*([-+*])\s$/,kfe=Yo.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",Ci(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>e.type!=="list"||e.ordered?[]:{type:"bulletList",content:e.items?t.parseChildren(e.items):[]},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(BQe,this.editor.getAttributes(oY)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=vy({find:lY,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=vy({find:lY,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(oY),editor:this.editor})),[e]}}),_fe=Yo.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",Ci(this.options.HTMLAttributes,e),0]},markdownTokenName:"list_item",parseMarkdown:(e,t)=>{if(e.type!=="list_item")return[];let r=[];if(e.tokens&&e.tokens.length>0)if(e.tokens.some(i=>i.type==="paragraph"))r=t.parseChildren(e.tokens);else{const i=e.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(r=[{type:"paragraph",content:t.parseInline(i.tokens)}],e.tokens.length>1){const s=e.tokens.slice(1),o=t.parseChildren(s);r.push(...o)}}else r=t.parseChildren(e.tokens)}return r.length===0&&(r=[{type:"paragraph",content:[]}]),{type:"listItem",content:r}},renderMarkdown:(e,t,r)=>J9(e,t,n=>n.parentType==="bulletList"?"- ":n.parentType==="orderedList"?`${n.index+1}. `:"- ",r),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),UQe={};LQe(UQe,{findListItemPos:()=>uC,getNextListDepth:()=>lB,handleBackspace:()=>sF,handleDelete:()=>oF,hasListBefore:()=>Nfe,hasListItemAfter:()=>$Qe,hasListItemBefore:()=>Afe,listItemHasSubList:()=>Tfe,nextListIsDeeper:()=>Ife,nextListIsHigher:()=>Ofe});var uC=(e,t)=>{const{$from:r}=t.selection,n=Ra(e,t.schema);let i=null,a=r.depth,s=r.pos,o=null;for(;a>0&&o===null;)i=r.node(a),i.type===n?o=a:(a-=1,s-=1);return o===null?null:{$pos:t.doc.resolve(s),depth:o}},lB=(e,t)=>{const r=uC(e,t);if(!r)return!1;const[,n]=RKe(t,e,r.$pos.pos+4);return n},Nfe=(e,t,r)=>{const{$anchor:n}=e.selection,i=Math.max(0,n.pos-2),a=e.doc.resolve(i).node();return!(!a||!r.includes(a.type.name))},Afe=(e,t)=>{var r;const{$anchor:n}=t.selection,i=t.doc.resolve(n.pos-2);return!(i.index()===0||((r=i.nodeBefore)==null?void 0:r.type.name)!==e)},Tfe=(e,t,r)=>{if(!r)return!1;const n=Ra(e,t.schema);let i=!1;return r.descendants(a=>{a.type===n&&(i=!0)}),i},sF=(e,t,r)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!R0(e.state,t)&&Nfe(e.state,t,r)){const{$anchor:o}=e.state.selection,l=e.state.doc.resolve(o.before()-1),c=[];l.node().descendants((p,m)=>{p.type.name===t&&c.push({node:p,pos:m})});const d=c.at(-1);if(!d)return!1;const f=e.state.doc.resolve(l.start()+d.pos+1);return e.chain().cut({from:o.start()-1,to:o.end()+1},f.end()).joinForward().run()}if(!R0(e.state,t)||!FKe(e.state))return!1;const n=uC(t,e.state);if(!n)return!1;const a=e.state.doc.resolve(n.$pos.pos-2).node(n.depth),s=Tfe(t,e.state,a);return Afe(t,e.state)&&!s?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},Ife=(e,t)=>{const r=lB(e,t),n=uC(e,t);return!n||!r?!1:r>n.depth},Ofe=(e,t)=>{const r=lB(e,t),n=uC(e,t);return!n||!r?!1:r<n.depth},oF=(e,t)=>{if(!R0(e.state,t)||!MKe(e.state,t))return!1;const{selection:r}=e.state,{$from:n,$to:i}=r;return!r.empty&&n.sameParent(i)?!1:Ife(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():Ofe(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},$Qe=(e,t)=>{var r;const{$anchor:n}=t.selection,i=t.doc.resolve(n.pos-n.parentOffset-2);return!(i.index()===i.parent.childCount-1||((r=i.nodeAfter)==null?void 0:r.type.name)!==e)},Pfe=oa.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:r})=>{e.state.schema.nodes[r]!==void 0&&oF(e,r)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:r})=>{e.state.schema.nodes[r]!==void 0&&oF(e,r)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{e.state.schema.nodes[r]!==void 0&&sF(e,r,n)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{e.state.schema.nodes[r]!==void 0&&sF(e,r,n)&&(t=!0)}),t}}}}),cY=/^(\s*)(\d+)\.\s+(.*)$/,zQe=/^\s/;function HQe(e){const t=[];let r=0,n=0;for(;r<e.length;){const i=e[r],a=i.match(cY);if(!a)break;const[,s,o,l]=a,c=s.length;let d=l,f=r+1;const p=[i];for(;f<e.length;){const m=e[f];if(m.match(cY))break;if(m.trim()==="")p.push(m),d+=`
`,f+=1;else if(m.match(zQe))p.push(m),d+=`
${m.slice(c+2)}`,f+=1;else break}t.push({indent:c,number:parseInt(o,10),content:d.trim(),raw:p.join(`
`)}),n=f,r=f}return[t,n]}function Rfe(e,t,r){var n;const i=[];let a=0;for(;a<e.length;){const s=e[a];if(s.indent===t){const o=s.content.split(`
`),l=((n=o[0])==null?void 0:n.trim())||"",c=[];l&&c.push({type:"paragraph",raw:l,tokens:r.inlineTokens(l)});const d=o.slice(1).join(`
`).trim();if(d){const m=r.blockTokens(d);c.push(...m)}let f=a+1;const p=[];for(;f<e.length&&e[f].indent>t;)p.push(e[f]),f+=1;if(p.length>0){const m=Math.min(...p.map(v=>v.indent)),x=Rfe(p,m,r);c.push({type:"list",ordered:!0,start:p[0].number,items:x,raw:p.map(v=>v.raw).join(`
`)})}i.push({type:"list_item",raw:s.raw,tokens:c}),a=f}else a+=1}return i}function WQe(e,t){return e.map(r=>{if(r.type!=="list_item")return t.parseChildren([r])[0];const n=[];return r.tokens&&r.tokens.length>0&&r.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")n.push(...t.parseChildren([i]));else if(i.type==="text"&&i.tokens){const a=t.parseChildren([i]);n.push({type:"paragraph",content:a})}else{const a=t.parseChildren([i]);a.length>0&&n.push(...a)}}),{type:"listItem",content:n}})}var VQe="listItem",uY="textStyle",dY=/^(\d+)\.\s$/,jfe=Yo.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...r}=e;return t===1?["ol",Ci(this.options.HTMLAttributes,r),0]:["ol",Ci(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>{if(e.type!=="list"||!e.ordered)return[];const r=e.start||1,n=e.items?WQe(e.items,t):[];return r!==1?{type:"orderedList",attrs:{start:r},content:n}:{type:"orderedList",content:n}},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:e=>{const t=e.match(/^(\s*)(\d+)\.\s+/),r=t==null?void 0:t.index;return r!==void 0?r:-1},tokenize:(e,t,r)=>{var n;const i=e.split(`
`),[a,s]=HQe(i);if(a.length===0)return;const o=Rfe(a,0,r);return o.length===0?void 0:{type:"list",ordered:!0,start:((n=a[0])==null?void 0:n.number)||1,items:o,raw:i.slice(0,s).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(VQe,this.editor.getAttributes(uY)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=vy({find:dY,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,r)=>r.childCount+r.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=vy({find:dY,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(uY)}),joinPredicate:(t,r)=>r.childCount+r.attrs.start===+t[1],editor:this.editor})),[e]}}),qQe=/^\s*(\[([( |x])?\])\s$/,GQe=Yo.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",Ci(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(e,t)=>{const r=[];if(e.tokens&&e.tokens.length>0?r.push(t.createNode("paragraph",{},t.parseInline(e.tokens))):e.text?r.push(t.createNode("paragraph",{},[t.createNode("text",{text:e.text})])):r.push(t.createNode("paragraph",{},[])),e.nestedTokens&&e.nestedTokens.length>0){const n=t.parseChildren(e.nestedTokens);r.push(...n)}return t.createNode("taskItem",{checked:e.checked||!1},r)},renderMarkdown:(e,t)=>{var r;const i=`- [${(r=e.attrs)!=null&&r.checked?"x":" "}] `;return J9(e,t,i)},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:r,editor:n})=>{const i=document.createElement("li"),a=document.createElement("label"),s=document.createElement("span"),o=document.createElement("input"),l=document.createElement("div"),c=d=>{var f,p;o.ariaLabel=((p=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:p.call(f,d,o.checked))||`Task item checkbox for ${d.textContent||"empty task item"}`};return c(e),a.contentEditable="false",o.type="checkbox",o.addEventListener("mousedown",d=>d.preventDefault()),o.addEventListener("change",d=>{if(!n.isEditable&&!this.options.onReadOnlyChecked){o.checked=!o.checked;return}const{checked:f}=d.target;n.isEditable&&typeof r=="function"&&n.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const m=r();if(typeof m!="number")return!1;const x=p.doc.nodeAt(m);return p.setNodeMarkup(m,void 0,{...x==null?void 0:x.attrs,checked:f}),!0}).run(),!n.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,f)||(o.checked=!o.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([d,f])=>{i.setAttribute(d,f)}),i.dataset.checked=e.attrs.checked,o.checked=e.attrs.checked,a.append(o,s),i.append(a,l),Object.entries(t).forEach(([d,f])=>{i.setAttribute(d,f)}),{dom:i,contentDOM:l,update:d=>d.type!==this.type?!1:(i.dataset.checked=d.attrs.checked,o.checked=d.attrs.checked,c(d),!0)}}},addInputRules(){return[vy({find:qQe,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),KQe=Yo.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",Ci(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},parseMarkdown:(e,t)=>t.createNode("taskList",{},t.parseChildren(e.items||[])),renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(e){var t;const r=(t=e.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:t.index;return r!==void 0?r:-1},tokenize(e,t,r){const n=a=>{const s=Y8(a,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,l)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:r.inlineTokens(o.mainContent),nestedTokens:l}),customNestedParser:n},r);return s?[{type:"taskList",raw:s.raw,items:s.items}]:r.blockTokens(a)},i=Y8(e,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,s)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:r.inlineTokens(a.mainContent),nestedTokens:s}),customNestedParser:n},r);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});oa.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(kfe.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(_fe.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(Pfe.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(jfe.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(GQe.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(KQe.configure(this.options.taskList)),e}});var XQe=Yo.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",Ci(this.options.HTMLAttributes,e),0]},parseMarkdown:(e,t)=>{const r=e.tokens||[];return r.length===1&&r[0].type==="image"?t.parseChildren([r[0]]):t.createNode("paragraph",void 0,t.parseInline(r))},renderMarkdown:(e,t)=>!e||!Array.isArray(e.content)?"":t.renderChildren(e.content),addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),YQe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,QQe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,JQe=zx.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",Ci(this.options.HTMLAttributes,e),0]},markdownTokenName:"del",parseMarkdown:(e,t)=>t.applyMark("strike",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`~~${t.renderChildren(e)}~~`,addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[xy({find:YQe,type:this.type})]},addPasteRules(){return[sx({find:QQe,type:this.type})]}}),ZQe=Yo.create({name:"text",group:"inline",parseMarkdown:e=>({type:"text",text:e.text||""}),renderMarkdown:e=>e.text||""}),eJe=zx.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",Ci(this.options.HTMLAttributes,e),0]},parseMarkdown(e,t){return t.applyMark(this.name||"underline",t.parseInline(e.tokens||[]))},renderMarkdown(e,t){return`++${t.renderChildren(e)}++`},markdownTokenizer:{name:"underline",level:"inline",start(e){return e.indexOf("++")},tokenize(e,t,r){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(e);if(!i)return;const a=i[2].trim();return{type:"underline",raw:i[0],text:a,tokens:r.inlineTokens(a)}}},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function tJe(e={}){return new Fi({view(t){return new rJe(t,e)}})}class rJe{constructor(t,r){var n;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=r.width)!==null&&n!==void 0?n:1,this.color=r.color===!1?void 0:r.color||"black",this.class=r.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let a=s=>{this[i](s)};return t.dom.addEventListener(i,a),{name:i,handler:a}})}destroy(){this.handlers.forEach(({name:t,handler:r})=>this.editorView.dom.removeEventListener(t,r))}update(t,r){this.cursorPos!=null&&r.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),r=!t.parent.inlineContent,n,i=this.editorView.dom,a=i.getBoundingClientRect(),s=a.width/i.offsetWidth,o=a.height/i.offsetHeight;if(r){let f=t.nodeBefore,p=t.nodeAfter;if(f||p){let m=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(m){let x=m.getBoundingClientRect(),v=f?x.bottom:x.top;f&&p&&(v=(v+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let b=this.width/2*o;n={left:x.left,right:x.right,top:v-b,bottom:v+b}}}}if(!n){let f=this.editorView.coordsAtPos(this.cursorPos),p=this.width/2*s;n={left:f.left-p,right:f.left+p,top:f.top,bottom:f.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r);let c,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,d=-pageYOffset;else{let f=l.getBoundingClientRect(),p=f.width/l.offsetWidth,m=f.height/l.offsetHeight;c=f.left-l.scrollLeft*p,d=f.top-l.scrollTop*m}this.element.style.left=(n.left-c)/s+"px",this.element.style.top=(n.top-d)/o+"px",this.element.style.width=(n.right-n.left)/s+"px",this.element.style.height=(n.bottom-n.top)/o+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let r=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),n=r&&r.inside>=0&&this.editorView.state.doc.nodeAt(r.inside),i=n&&n.type.spec.disableDropCursor,a=typeof i=="function"?i(this.editorView,r,t):i;if(r&&!a){let s=r.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let o=Eue(this.editorView.state.doc,s,this.editorView.dragging.slice);o!=null&&(s=o)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class ta extends dn{constructor(t){super(t,t)}map(t,r){let n=t.resolve(r.map(this.head));return ta.valid(n)?new ta(n):dn.near(n)}content(){return Vt.empty}eq(t){return t instanceof ta&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ta(t.resolve(r.pos))}getBookmark(){return new cB(this.anchor)}static valid(t){let r=t.parent;if(r.isTextblock||!nJe(t)||!iJe(t))return!1;let n=r.type.spec.allowGapCursor;if(n!=null)return n;let i=r.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,r,n=!1){e:for(;;){if(!n&&ta.valid(t))return t;let i=t.pos,a=null;for(let s=t.depth;;s--){let o=t.node(s);if(r>0?t.indexAfter(s)<o.childCount:t.index(s)>0){a=o.child(r>0?t.indexAfter(s):t.index(s)-1);break}else if(s==0)return null;i+=r;let l=t.doc.resolve(i);if(ta.valid(l))return l}for(;;){let s=r>0?a.firstChild:a.lastChild;if(!s){if(a.isAtom&&!a.isText&&!pr.isSelectable(a)){t=t.doc.resolve(i+a.nodeSize*r),n=!1;continue e}break}a=s,i+=r;let o=t.doc.resolve(i);if(ta.valid(o))return o}return null}}}ta.prototype.visible=!1;ta.findFrom=ta.findGapCursorFrom;dn.jsonID("gapcursor",ta);class cB{constructor(t){this.pos=t}map(t){return new cB(t.map(this.pos))}resolve(t){let r=t.resolve(this.pos);return ta.valid(r)?new ta(r):dn.near(r)}}function Dfe(e){return e.isAtom||e.spec.isolating||e.spec.createGapCursor}function nJe(e){for(let t=e.depth;t>=0;t--){let r=e.index(t),n=e.node(t);if(r==0){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||Dfe(i.type))return!0;if(i.inlineContent)return!1}}return!0}function iJe(e){for(let t=e.depth;t>=0;t--){let r=e.indexAfter(t),n=e.node(t);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||Dfe(i.type))return!0;if(i.inlineContent)return!1}}return!0}function aJe(){return new Fi({props:{decorations:cJe,createSelectionBetween(e,t,r){return t.pos==r.pos&&ta.valid(r)?new ta(r):null},handleClick:oJe,handleKeyDown:sJe,handleDOMEvents:{beforeinput:lJe}}})}const sJe=Cde({ArrowLeft:U_("horiz",-1),ArrowRight:U_("horiz",1),ArrowUp:U_("vert",-1),ArrowDown:U_("vert",1)});function U_(e,t){const r=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(n,i,a){let s=n.selection,o=t>0?s.$to:s.$from,l=s.empty;if(s instanceof Ur){if(!a.endOfTextblock(r)||o.depth==0)return!1;l=!1,o=n.doc.resolve(t>0?o.after():o.before())}let c=ta.findGapCursorFrom(o,t,l);return c?(i&&i(n.tr.setSelection(new ta(c))),!0):!1}}function oJe(e,t,r){if(!e||!e.editable)return!1;let n=e.state.doc.resolve(t);if(!ta.valid(n))return!1;let i=e.posAtCoords({left:r.clientX,top:r.clientY});return i&&i.inside>-1&&pr.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new ta(n))),!0)}function lJe(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof ta))return!1;let{$from:r}=e.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(e.state.schema.nodes.text);if(!n)return!1;let i=It.empty;for(let s=n.length-1;s>=0;s--)i=It.from(n[s].createAndFill(null,i));let a=e.state.tr.replace(r.pos,r.pos,new Vt(i,0,0));return a.setSelection(Ur.near(a.doc.resolve(r.pos+1))),e.dispatch(a),!1}function cJe(e){if(!(e.selection instanceof ta))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",Ri.create(e.doc,[uo.widget(e.selection.head,t,{key:"gapcursor"})])}var lI=200,xs=function(){};xs.prototype.append=function(t){return t.length?(t=xs.from(t),!this.length&&t||t.length<lI&&this.leafAppend(t)||this.length<lI&&t.leafPrepend(this)||this.appendInner(t)):this};xs.prototype.prepend=function(t){return t.length?xs.from(t).append(this):this};xs.prototype.appendInner=function(t){return new uJe(this,t)};xs.prototype.slice=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=this.length),t>=r?xs.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,r))};xs.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};xs.prototype.forEach=function(t,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length),r<=n?this.forEachInner(t,r,n,0):this.forEachInvertedInner(t,r,n,0)};xs.prototype.map=function(t,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length);var i=[];return this.forEach(function(a,s){return i.push(t(a,s))},r,n),i};xs.from=function(t){return t instanceof xs?t:t&&t.length?new Mfe(t):xs.empty};var Mfe=function(e){function t(n){e.call(this),this.values=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,a){return i==0&&a==this.length?this:new t(this.values.slice(i,a))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,a,s,o){for(var l=a;l<s;l++)if(i(this.values[l],o+l)===!1)return!1},t.prototype.forEachInvertedInner=function(i,a,s,o){for(var l=a-1;l>=s;l--)if(i(this.values[l],o+l)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=lI)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=lI)return new t(i.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(t.prototype,r),t}(xs);xs.empty=new Mfe([]);var uJe=function(e){function t(r,n){e.call(this),this.left=r,this.right=n,this.length=r.length+n.length,this.depth=Math.max(r.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},t.prototype.forEachInner=function(n,i,a,s){var o=this.left.length;if(i<o&&this.left.forEachInner(n,i,Math.min(a,o),s)===!1||a>o&&this.right.forEachInner(n,Math.max(i-o,0),Math.min(this.length,a)-o,s+o)===!1)return!1},t.prototype.forEachInvertedInner=function(n,i,a,s){var o=this.left.length;if(i>o&&this.right.forEachInvertedInner(n,i-o,Math.max(a,o)-o,s+o)===!1||a<o&&this.left.forEachInvertedInner(n,Math.min(i,o),a,s)===!1)return!1},t.prototype.sliceInner=function(n,i){if(n==0&&i==this.length)return this;var a=this.left.length;return i<=a?this.left.slice(n,i):n>=a?this.right.slice(n-a,i-a):this.left.slice(n,a).append(this.right.slice(0,i-a))},t.prototype.leafAppend=function(n){var i=this.right.leafAppend(n);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(n){var i=this.left.leafPrepend(n);if(i)return new t(i,this.right)},t.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new t(this.left,new t(this.right,n)):new t(this,n)},t}(xs);const dJe=500;class $u{constructor(t,r){this.items=t,this.eventCount=r}popEvent(t,r){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let i,a;r&&(i=this.remapping(n,this.items.length),a=i.maps.length);let s=t.tr,o,l,c=[],d=[];return this.items.forEach((f,p)=>{if(!f.step){i||(i=this.remapping(n,p+1),a=i.maps.length),a--,d.push(f);return}if(i){d.push(new Rd(f.map));let m=f.step.map(i.slice(a)),x;m&&s.maybeStep(m).doc&&(x=s.mapping.maps[s.mapping.maps.length-1],c.push(new Rd(x,void 0,void 0,c.length+d.length))),a--,x&&i.appendMap(x,a)}else s.maybeStep(f.step);if(f.selection)return o=i?f.selection.map(i.slice(a)):f.selection,l=new $u(this.items.slice(0,n).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:o}}addTransform(t,r,n,i){let a=[],s=this.eventCount,o=this.items,l=!i&&o.length?o.get(o.length-1):null;for(let d=0;d<t.steps.length;d++){let f=t.steps[d].invert(t.docs[d]),p=new Rd(t.mapping.maps[d],f,r),m;(m=l&&l.merge(p))&&(p=m,d?a.pop():o=o.slice(0,o.length-1)),a.push(p),r&&(s++,r=void 0),i||(l=p)}let c=s-n.depth;return c>hJe&&(o=fJe(o,c),s-=c),new $u(o.append(a),s)}remapping(t,r){let n=new bS;return this.items.forEach((i,a)=>{let s=i.mirrorOffset!=null&&a-i.mirrorOffset>=t?n.maps.length-i.mirrorOffset:void 0;n.appendMap(i.map,s)},t,r),n}addMaps(t){return this.eventCount==0?this:new $u(this.items.append(t.map(r=>new Rd(r))),this.eventCount)}rebased(t,r){if(!this.eventCount)return this;let n=[],i=Math.max(0,this.items.length-r),a=t.mapping,s=t.steps.length,o=this.eventCount;this.items.forEach(p=>{p.selection&&o--},i);let l=r;this.items.forEach(p=>{let m=a.getMirror(--l);if(m==null)return;s=Math.min(s,m);let x=a.maps[m];if(p.step){let v=t.steps[m].invert(t.docs[m]),b=p.selection&&p.selection.map(a.slice(l+1,m));b&&o++,n.push(new Rd(x,v,b))}else n.push(new Rd(x))},i);let c=[];for(let p=r;p<s;p++)c.push(new Rd(a.maps[p]));let d=this.items.slice(0,i).append(c).append(n),f=new $u(d,o);return f.emptyItemCount()>dJe&&(f=f.compress(this.items.length-n.length)),f}emptyItemCount(){let t=0;return this.items.forEach(r=>{r.step||t++}),t}compress(t=this.items.length){let r=this.remapping(0,t),n=r.maps.length,i=[],a=0;return this.items.forEach((s,o)=>{if(o>=t)i.push(s),s.selection&&a++;else if(s.step){let l=s.step.map(r.slice(n)),c=l&&l.getMap();if(n--,c&&r.appendMap(c,n),l){let d=s.selection&&s.selection.map(r.slice(n));d&&a++;let f=new Rd(c.invert(),l,d),p,m=i.length-1;(p=i.length&&i[m].merge(f))?i[m]=p:i.push(f)}}else s.map&&n--},this.items.length,0),new $u(xs.from(i.reverse()),a)}}$u.empty=new $u(xs.empty,0);function fJe(e,t){let r;return e.forEach((n,i)=>{if(n.selection&&t--==0)return r=i,!1}),e.slice(r)}class Rd{constructor(t,r,n,i){this.map=t,this.step=r,this.selection=n,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let r=t.step.merge(this.step);if(r)return new Rd(r.getMap().invert(),r,this.selection)}}}class Lp{constructor(t,r,n,i,a){this.done=t,this.undone=r,this.prevRanges=n,this.prevTime=i,this.prevComposition=a}}const hJe=20;function pJe(e,t,r,n){let i=r.getMeta(Ag),a;if(i)return i.historyState;r.getMeta(xJe)&&(e=new Lp(e.done,e.undone,null,0,-1));let s=r.getMeta("appendedTransaction");if(r.steps.length==0)return e;if(s&&s.getMeta(Ag))return s.getMeta(Ag).redo?new Lp(e.done.addTransform(r,void 0,n,YN(t)),e.undone,fY(r.mapping.maps),e.prevTime,e.prevComposition):new Lp(e.done,e.undone.addTransform(r,void 0,n,YN(t)),null,e.prevTime,e.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let o=r.getMeta("composition"),l=e.prevTime==0||!s&&e.prevComposition!=o&&(e.prevTime<(r.time||0)-n.newGroupDelay||!mJe(r,e.prevRanges)),c=s?PD(e.prevRanges,r.mapping):fY(r.mapping.maps);return new Lp(e.done.addTransform(r,l?t.selection.getBookmark():void 0,n,YN(t)),$u.empty,c,r.time,o??e.prevComposition)}else return(a=r.getMeta("rebased"))?new Lp(e.done.rebased(r,a),e.undone.rebased(r,a),PD(e.prevRanges,r.mapping),e.prevTime,e.prevComposition):new Lp(e.done.addMaps(r.mapping.maps),e.undone.addMaps(r.mapping.maps),PD(e.prevRanges,r.mapping),e.prevTime,e.prevComposition)}function mJe(e,t){if(!t)return!1;if(!e.docChanged)return!0;let r=!1;return e.mapping.maps[0].forEach((n,i)=>{for(let a=0;a<t.length;a+=2)n<=t[a+1]&&i>=t[a]&&(r=!0)}),r}function fY(e){let t=[];for(let r=e.length-1;r>=0&&t.length==0;r--)e[r].forEach((n,i,a,s)=>t.push(a,s));return t}function PD(e,t){if(!e)return null;let r=[];for(let n=0;n<e.length;n+=2){let i=t.map(e[n],1),a=t.map(e[n+1],-1);i<=a&&r.push(i,a)}return r}function gJe(e,t,r){let n=YN(t),i=Ag.get(t).spec.config,a=(r?e.undone:e.done).popEvent(t,n);if(!a)return null;let s=a.selection.resolve(a.transform.doc),o=(r?e.done:e.undone).addTransform(a.transform,t.selection.getBookmark(),i,n),l=new Lp(r?o:a.remaining,r?a.remaining:o,null,0,-1);return a.transform.setSelection(s).setMeta(Ag,{redo:r,historyState:l})}let RD=!1,hY=null;function YN(e){let t=e.plugins;if(hY!=t){RD=!1,hY=t;for(let r=0;r<t.length;r++)if(t[r].spec.historyPreserveItems){RD=!0;break}}return RD}const Ag=new va("history"),xJe=new va("closeHistory");function vJe(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Fi({key:Ag,state:{init(){return new Lp($u.empty,$u.empty,null,0,-1)},apply(t,r,n){return pJe(r,n,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,r){let n=r.inputType,i=n=="historyUndo"?Lfe:n=="historyRedo"?Bfe:null;return!i||!t.editable?!1:(r.preventDefault(),i(t.state,t.dispatch))}}}})}function Ffe(e,t){return(r,n)=>{let i=Ag.getState(r);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(n){let a=gJe(i,r,e);a&&n(t?a.scrollIntoView():a)}return!0}}const Lfe=Ffe(!1,!0),Bfe=Ffe(!0,!0);oa.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc;if(((e==null?void 0:e.mode)||this.options.mode)==="textSize"){const n=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(n)}return t.nodeSize},this.storage.words=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc,r=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(r)}},addProseMirrorPlugins(){let e=!1;return[new Fi({key:new va("characterCount"),appendTransaction:(t,r,n)=>{if(e)return;const i=this.options.limit;if(i==null||i===0){e=!0;return}const a=this.storage.characters({node:n.doc});if(a>i){const s=a-i,o=0,l=s;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const c=n.tr.deleteRange(o,l);return e=!0,c}e=!0},filterTransaction:(t,r)=>{const n=this.options.limit;if(!t.docChanged||n===0||n===null||n===void 0)return!0;const i=this.storage.characters({node:r.doc}),a=this.storage.characters({node:t.doc});if(a<=n||i>n&&a>n&&a<=i)return!0;if(i>n&&a>n&&a>i||!t.getMeta("paste"))return!1;const o=t.selection.$head.pos,l=a-n,c=o-l,d=o;return t.deleteRange(c,d),!(this.storage.characters({node:t.doc})>n)}})]}});var yJe=oa.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[tJe(this.options)]}});oa.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Fi({key:new va("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:r,isFocused:n}=this.editor,{anchor:i}=t,a=[];if(!r||!n)return Ri.create(e,[]);let s=0;this.options.mode==="deepest"&&e.descendants((l,c)=>{if(l.isText)return;if(!(i>=c&&i<=c+l.nodeSize-1))return!1;s+=1});let o=0;return e.descendants((l,c)=>{if(l.isText||!(i>=c&&i<=c+l.nodeSize-1))return!1;if(o+=1,this.options.mode==="deepest"&&s-o>0||this.options.mode==="shallowest"&&o>1)return this.options.mode==="deepest";a.push(uo.node(c,c+l.nodeSize,{class:this.options.className}))}),Ri.create(e,a)}}})]}});var bJe=oa.create({name:"gapCursor",addProseMirrorPlugins(){return[aJe()]},extendNodeSchema(e){var t;const r={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=Jn(xr(e,"allowGapCursor",r)))!=null?t:null}}});oa.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Fi({key:new va("placeholder"),props:{decorations:({doc:e,selection:t})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=t,i=[];if(!r)return null;const a=this.editor.isEmpty;return e.descendants((s,o)=>{const l=n>=o&&n<=o+s.nodeSize,c=!s.isLeaf&&v3(s);if((l||!this.options.showOnlyCurrent)&&c){const d=[this.options.emptyNodeClass];a&&d.push(this.options.emptyEditorClass);const f=uo.node(o,o+s.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:s,pos:o,hasAnchor:l}):this.options.placeholder});i.push(f)}return this.options.includeChildren}),Ri.create(e,i)}}})]}});oa.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new Fi({key:new va("selection"),props:{decorations(r){return r.selection.empty||e.isFocused||!e.isEditable||$de(r.selection)||e.view.dragging?null:Ri.create(r.doc,[uo.inline(r.selection.from,r.selection.to,{class:t.className})])}}})]}});function pY({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||(t==null?void 0:t.type)===e}var wJe=oa.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var e;const t=new va(this.name),r=this.options.node||((e=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:e.name)||"paragraph",n=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(r).includes(i.name));return[new Fi({key:t,appendTransaction:(i,a,s)=>{const{doc:o,tr:l,schema:c}=s,d=t.getState(s),f=o.content.size,p=c.nodes[r];if(d)return l.insert(f,p.create())},state:{init:(i,a)=>{const s=a.tr.doc.lastChild;return!pY({node:s,types:n})},apply:(i,a)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return a;const s=i.doc.lastChild;return!pY({node:s,types:n})}}})]}}),SJe=oa.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>Lfe(e,t),redo:()=>({state:e,dispatch:t})=>Bfe(e,t)}},addProseMirrorPlugins(){return[vJe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),EJe=oa.create({name:"starterKit",addExtensions(){var e,t,r,n;const i=[];return this.options.bold!==!1&&i.push(YYe.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(VYe.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(kfe.configure(this.options.bulletList)),this.options.code!==!1&&i.push(ZYe.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(rQe.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(nQe.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(yJe.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(bJe.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(iQe.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(pfe.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(SJe.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(sQe.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(dQe.configure(this.options.italic)),this.options.listItem!==!1&&i.push(_fe.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(Pfe.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&i.push(Cfe.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&i.push(jfe.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(XQe.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(JQe.configure(this.options.strike)),this.options.text!==!1&&i.push(ZQe.configure(this.options.text)),this.options.underline!==!1&&i.push(eJe.configure((r=this.options)==null?void 0:r.underline)),this.options.trailingNode!==!1&&i.push(wJe.configure((n=this.options)==null?void 0:n.trailingNode)),i}}),CJe=EJe,kJe=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,_Je=Yo.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",Ci(this.options.HTMLAttributes,e)]},parseMarkdown:(e,t)=>t.createNode("image",{src:e.href,title:e.title,alt:e.text}),renderMarkdown:e=>{var t,r,n,i,a,s;const o=(r=(t=e.attrs)==null?void 0:t.src)!=null?r:"",l=(i=(n=e.attrs)==null?void 0:n.alt)!=null?i:"",c=(s=(a=e.attrs)==null?void 0:a.title)!=null?s:"";return c?`![${l}](${o} "${c}")`:`![${l}](${o})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u")return null;const{directions:e,minWidth:t,minHeight:r,alwaysPreserveAspectRatio:n}=this.options.resize;return({node:i,getPos:a,HTMLAttributes:s,editor:o})=>{const l=document.createElement("img");Object.entries(s).forEach(([f,p])=>{if(p!=null)switch(f){case"width":case"height":break;default:l.setAttribute(f,p);break}}),l.src=s.src;const c=new EXe({element:l,editor:o,node:i,getPos:a,onResize:(f,p)=>{l.style.width=`${f}px`,l.style.height=`${p}px`},onCommit:(f,p)=>{const m=a();m!==void 0&&this.editor.chain().setNodeSelection(m).updateAttributes(this.name,{width:f,height:p}).run()},onUpdate:(f,p,m)=>f.type===i.type,options:{directions:e,min:{width:t,height:r},preserveAspectRatio:n===!0}}),d=c.dom;return d.style.visibility="hidden",d.style.pointerEvents="none",l.onload=()=>{d.style.visibility="",d.style.pointerEvents=""},c}},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[ife({find:kJe,type:this.type,getAttributes:e=>{const[,,t,r,n]=e;return{src:r,alt:t,title:n}}})]}}),NJe=_Je,AJe=oa.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{const t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.map(r=>t.updateAttributes(r,{textAlign:e})).some(r=>r):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).some(t=>t),toggleTextAlign:e=>({editor:t,commands:r})=>this.options.alignments.includes(e)?t.isActive({textAlign:e})?r.unsetTextAlign():r.setTextAlign(e):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),TJe=AJe;function IJe(e){var t;const{char:r,allowSpaces:n,allowToIncludeChar:i,allowedPrefixes:a,startOfLine:s,$position:o}=e,l=n&&!i,c=kXe(r),d=new RegExp(`\\s${c}$`),f=s?"^":"",p=i?"":c,m=l?new RegExp(`${f}${c}.*?(?=\\s${p}|$)`,"gm"):new RegExp(`${f}(?:^)?${c}[^\\s${p}]*`,"gm"),x=((t=o.nodeBefore)==null?void 0:t.isText)&&o.nodeBefore.text;if(!x)return null;const v=o.pos-x.length,b=Array.from(x.matchAll(m)).pop();if(!b||b.input===void 0||b.index===void 0)return null;const w=b.input.slice(Math.max(0,b.index-1),b.index),k=new RegExp(`^[${a==null?void 0:a.join("")}\0]?$`).test(w);if(a!==null&&!k)return null;const E=v+b.index;let N=E+b[0].length;return l&&d.test(x.slice(N-1,N+1))&&(b[0]+=" ",N+=1),E<o.pos&&N>=o.pos?{range:{from:E,to:N},query:b[0].slice(r.length),text:b[0]}:null}var OJe=new va("suggestion");function PJe({pluginKey:e=OJe,editor:t,char:r="@",allowSpaces:n=!1,allowToIncludeChar:i=!1,allowedPrefixes:a=[" "],startOfLine:s=!1,decorationTag:o="span",decorationClass:l="suggestion",decorationContent:c="",decorationEmptyClass:d="is-empty",command:f=()=>null,items:p=()=>[],render:m=()=>({}),allow:x=()=>!0,findSuggestionMatch:v=IJe}){let b;const w=m==null?void 0:m(),k=()=>{const R=t.state.selection.$anchor.pos,O=t.view.coordsAtPos(R),{top:D,right:L,bottom:B,left:z}=O;try{return new DOMRect(z,D,L-z,B-D)}catch{return null}},E=(R,O)=>O?()=>{const D=e.getState(t.state),L=D==null?void 0:D.decorationId,B=R.dom.querySelector(`[data-decoration-id="${L}"]`);return(B==null?void 0:B.getBoundingClientRect())||null}:k;function N(R,O){var D;try{const B=e.getState(R.state),z=B!=null&&B.decorationId?R.dom.querySelector(`[data-decoration-id="${B.decorationId}"]`):null,H={editor:t,range:(B==null?void 0:B.range)||{from:0,to:0},query:(B==null?void 0:B.query)||null,text:(B==null?void 0:B.text)||null,items:[],command:te=>f({editor:t,range:(B==null?void 0:B.range)||{from:0,to:0},props:te}),decorationNode:z,clientRect:E(R,z)};(D=w==null?void 0:w.onExit)==null||D.call(w,H)}catch{}const L=R.state.tr.setMeta(O,{exit:!0});R.dispatch(L)}const P=new Fi({key:e,view(){return{update:async(R,O)=>{var D,L,B,z,H,te,Y;const W=(D=this.key)==null?void 0:D.getState(O),Z=(L=this.key)==null?void 0:L.getState(R.state),re=W.active&&Z.active&&W.range.from!==Z.range.from,X=!W.active&&Z.active,Q=W.active&&!Z.active,fe=!X&&!Q&&W.query!==Z.query,ye=X||re&&fe,J=fe||re,ce=Q||re&&fe;if(!ye&&!J&&!ce)return;const V=ce&&!ye?W:Z,G=R.dom.querySelector(`[data-decoration-id="${V.decorationId}"]`);b={editor:t,range:V.range,query:V.query,text:V.text,items:[],command:ie=>f({editor:t,range:V.range,props:ie}),decorationNode:G,clientRect:E(R,G)},ye&&((B=w==null?void 0:w.onBeforeStart)==null||B.call(w,b)),J&&((z=w==null?void 0:w.onBeforeUpdate)==null||z.call(w,b)),(J||ye)&&(b.items=await p({editor:t,query:V.query})),ce&&((H=w==null?void 0:w.onExit)==null||H.call(w,b)),J&&((te=w==null?void 0:w.onUpdate)==null||te.call(w,b)),ye&&((Y=w==null?void 0:w.onStart)==null||Y.call(w,b))},destroy:()=>{var R;b&&((R=w==null?void 0:w.onExit)==null||R.call(w,b))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply(R,O,D,L){const{isEditable:B}=t,{composing:z}=t.view,{selection:H}=R,{empty:te,from:Y}=H,W={...O},Z=R.getMeta(e);if(Z&&Z.exit)return W.active=!1,W.decorationId=null,W.range={from:0,to:0},W.query=null,W.text=null,W;if(W.composing=z,B&&(te||t.view.composing)){(Y<O.range.from||Y>O.range.to)&&!z&&!O.composing&&(W.active=!1);const re=v({char:r,allowSpaces:n,allowToIncludeChar:i,allowedPrefixes:a,startOfLine:s,$position:H.$from}),X=`id_${Math.floor(Math.random()*4294967295)}`;re&&x({editor:t,state:L,range:re.range,isActive:O.active})?(W.active=!0,W.decorationId=O.decorationId?O.decorationId:X,W.range=re.range,W.query=re.query,W.text=re.text):W.active=!1}else W.active=!1;return W.active||(W.decorationId=null,W.range={from:0,to:0},W.query=null,W.text=null),W}},props:{handleKeyDown(R,O){var D,L,B,z;const{active:H,range:te}=P.getState(R.state);if(!H)return!1;if(O.key==="Escape"||O.key==="Esc"){const W=P.getState(R.state),Z=(D=b==null?void 0:b.decorationNode)!=null?D:null,re=Z??(W!=null&&W.decorationId?R.dom.querySelector(`[data-decoration-id="${W.decorationId}"]`):null);if(((L=w==null?void 0:w.onKeyDown)==null?void 0:L.call(w,{view:R,event:O,range:W.range}))||!1)return!0;const Q={editor:t,range:W.range,query:W.query,text:W.text,items:[],command:fe=>f({editor:t,range:W.range,props:fe}),decorationNode:re,clientRect:re?()=>re.getBoundingClientRect()||null:null};return(B=w==null?void 0:w.onExit)==null||B.call(w,Q),N(R,e),!0}return((z=w==null?void 0:w.onKeyDown)==null?void 0:z.call(w,{view:R,event:O,range:te}))||!1},decorations(R){const{active:O,range:D,decorationId:L,query:B}=P.getState(R);if(!O)return null;const z=!(B!=null&&B.length),H=[l];return z&&H.push(d),Ri.create(R.doc,[uo.inline(D.from,D.to,{nodeName:o,class:H.join(" "),"data-decoration-id":L,"data-decoration-content":c})])}}});return P}function RJe({editor:e,overrideSuggestionOptions:t,extensionName:r,char:n="@"}){const i=new va;return{editor:e,char:n,pluginKey:i,command:({editor:a,range:s,props:o})=>{var l,c,d;const f=a.view.state.selection.$to.nodeAfter;((l=f==null?void 0:f.text)==null?void 0:l.startsWith(" "))&&(s.to+=1),a.chain().focus().insertContentAt(s,[{type:r,attrs:{...o,mentionSuggestionChar:n}},{type:"text",text:" "}]).run(),(d=(c=a.view.dom.ownerDocument.defaultView)==null?void 0:c.getSelection())==null||d.collapseToEnd()},allow:({state:a,range:s})=>{const o=a.doc.resolve(s.from),l=a.schema.nodes[r];return!!o.parent.type.contentMatch.matchType(l)},...t}}function Ufe(e){return(e.options.suggestions.length?e.options.suggestions:[e.options.suggestion]).map(t=>RJe({editor:e.editor,overrideSuggestionOptions:t,extensionName:e.name,char:t.char}))}function mY(e,t){const r=Ufe(e),n=r.find(i=>i.char===t);return n||(r.length?r[0]:null)}var jJe=Yo.create({name:"mention",priority:101,addOptions(){return{HTMLAttributes:{},renderText({node:e,suggestion:t}){var r,n;return`${(r=t==null?void 0:t.char)!=null?r:"@"}${(n=e.attrs.label)!=null?n:e.attrs.id}`},deleteTriggerWithBackspace:!1,renderHTML({options:e,node:t,suggestion:r}){var n,i;return["span",Ci(this.HTMLAttributes,e.HTMLAttributes),`${(n=r==null?void 0:r.char)!=null?n:"@"}${(i=t.attrs.label)!=null?i:t.attrs.id}`]},suggestions:[],suggestion:{}}},group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes(){return{id:{default:null,parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>e.id?{"data-id":e.id}:{}},label:{default:null,parseHTML:e=>e.getAttribute("data-label"),renderHTML:e=>e.label?{"data-label":e.label}:{}},mentionSuggestionChar:{default:"@",parseHTML:e=>e.getAttribute("data-mention-suggestion-char"),renderHTML:e=>({"data-mention-suggestion-char":e.mentionSuggestionChar})}}},parseHTML(){return[{tag:`span[data-type="${this.name}"]`}]},renderHTML({node:e,HTMLAttributes:t}){const r=mY(this,e.attrs.mentionSuggestionChar);if(this.options.renderLabel!==void 0)return console.warn("renderLabel is deprecated use renderText and renderHTML instead"),["span",Ci({"data-type":this.name},this.options.HTMLAttributes,t),this.options.renderLabel({options:this.options,node:e,suggestion:r})];const n={...this.options};n.HTMLAttributes=Ci({"data-type":this.name},this.options.HTMLAttributes,t);const i=this.options.renderHTML({options:n,node:e,suggestion:r});return typeof i=="string"?["span",Ci({"data-type":this.name},this.options.HTMLAttributes,t),i]:i},...afe({nodeName:"mention",name:"@",selfClosing:!0,allowedAttributes:["id","label",{name:"mentionSuggestionChar",skipIfDefault:"@"}],parseAttributes:e=>{const t={},r=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let n=r.exec(e);for(;n!==null;){const[,i,a,s]=n,o=a??s;t[i==="char"?"mentionSuggestionChar":i]=o,n=r.exec(e)}return t},serializeAttributes:e=>Object.entries(e).filter(([,t])=>t!=null).map(([t,r])=>`${t==="mentionSuggestionChar"?"char":t}="${r}"`).join(" ")}),renderText({node:e}){const t={options:this.options,node:e,suggestion:mY(this,e.attrs.mentionSuggestionChar)};return this.options.renderLabel!==void 0?(console.warn("renderLabel is deprecated use renderText and renderHTML instead"),this.options.renderLabel(t)):this.options.renderText(t)},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command(({tr:e,state:t})=>{let r=!1;const{selection:n}=t,{empty:i,anchor:a}=n;if(!i)return!1;let s=new vh,o=0;return t.doc.nodesBetween(a-1,a,(l,c)=>{if(l.type.name===this.name)return r=!0,s=l,o=c,!1}),r&&e.insertText(this.options.deleteTriggerWithBackspace?"":s.attrs.mentionSuggestionChar,o,o+s.nodeSize),r})}},addProseMirrorPlugins(){return Ufe(this).map(PJe)}}),DJe=jJe,El="top",ou="bottom",lu="right",Cl="left",uB="auto",dC=[El,ou,lu,Cl],yy="start",TS="end",MJe="clippingParents",$fe="viewport",Cw="popper",FJe="reference",gY=dC.reduce(function(e,t){return e.concat([t+"-"+yy,t+"-"+TS])},[]),zfe=[].concat(dC,[uB]).reduce(function(e,t){return e.concat([t,t+"-"+yy,t+"-"+TS])},[]),LJe="beforeRead",BJe="read",UJe="afterRead",$Je="beforeMain",zJe="main",HJe="afterMain",WJe="beforeWrite",VJe="write",qJe="afterWrite",GJe=[LJe,BJe,UJe,$Je,zJe,HJe,WJe,VJe,qJe];function sf(e){return e?(e.nodeName||"").toLowerCase():null}function cc(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ox(e){var t=cc(e).Element;return e instanceof t||e instanceof Element}function ru(e){var t=cc(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function dB(e){if(typeof ShadowRoot>"u")return!1;var t=cc(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function KJe(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},i=t.attributes[r]||{},a=t.elements[r];!ru(a)||!sf(a)||(Object.assign(a.style,n),Object.keys(i).forEach(function(s){var o=i[s];o===!1?a.removeAttribute(s):a.setAttribute(s,o===!0?"":o)}))})}function XJe(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var i=t.elements[n],a=t.attributes[n]||{},s=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),o=s.reduce(function(l,c){return l[c]="",l},{});!ru(i)||!sf(i)||(Object.assign(i.style,o),Object.keys(a).forEach(function(l){i.removeAttribute(l)}))})}}const Hfe={name:"applyStyles",enabled:!0,phase:"write",fn:KJe,effect:XJe,requires:["computeStyles"]};function ef(e){return e.split("-")[0]}var Tg=Math.max,cI=Math.min,by=Math.round;function lF(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Wfe(){return!/^((?!chrome|android).)*safari/i.test(lF())}function wy(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),i=1,a=1;t&&ru(e)&&(i=e.offsetWidth>0&&by(n.width)/e.offsetWidth||1,a=e.offsetHeight>0&&by(n.height)/e.offsetHeight||1);var s=ox(e)?cc(e):window,o=s.visualViewport,l=!Wfe()&&r,c=(n.left+(l&&o?o.offsetLeft:0))/i,d=(n.top+(l&&o?o.offsetTop:0))/a,f=n.width/i,p=n.height/a;return{width:f,height:p,top:d,right:c+f,bottom:d+p,left:c,x:c,y:d}}function fB(e){var t=wy(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function Vfe(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&dB(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Mh(e){return cc(e).getComputedStyle(e)}function YJe(e){return["table","td","th"].indexOf(sf(e))>=0}function Z0(e){return((ox(e)?e.ownerDocument:e.document)||window.document).documentElement}function E3(e){return sf(e)==="html"?e:e.assignedSlot||e.parentNode||(dB(e)?e.host:null)||Z0(e)}function xY(e){return!ru(e)||Mh(e).position==="fixed"?null:e.offsetParent}function QJe(e){var t=/firefox/i.test(lF()),r=/Trident/i.test(lF());if(r&&ru(e)){var n=Mh(e);if(n.position==="fixed")return null}var i=E3(e);for(dB(i)&&(i=i.host);ru(i)&&["html","body"].indexOf(sf(i))<0;){var a=Mh(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function fC(e){for(var t=cc(e),r=xY(e);r&&YJe(r)&&Mh(r).position==="static";)r=xY(r);return r&&(sf(r)==="html"||sf(r)==="body"&&Mh(r).position==="static")?t:r||QJe(e)||t}function hB(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function T2(e,t,r){return Tg(e,cI(t,r))}function JJe(e,t,r){var n=T2(e,t,r);return n>r?r:n}function qfe(){return{top:0,right:0,bottom:0,left:0}}function Gfe(e){return Object.assign({},qfe(),e)}function Kfe(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var ZJe=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,Gfe(typeof t!="number"?t:Kfe(t,dC))};function eZe(e){var t,r=e.state,n=e.name,i=e.options,a=r.elements.arrow,s=r.modifiersData.popperOffsets,o=ef(r.placement),l=hB(o),c=[Cl,lu].indexOf(o)>=0,d=c?"height":"width";if(!(!a||!s)){var f=ZJe(i.padding,r),p=fB(a),m=l==="y"?El:Cl,x=l==="y"?ou:lu,v=r.rects.reference[d]+r.rects.reference[l]-s[l]-r.rects.popper[d],b=s[l]-r.rects.reference[l],w=fC(a),k=w?l==="y"?w.clientHeight||0:w.clientWidth||0:0,E=v/2-b/2,N=f[m],P=k-p[d]-f[x],R=k/2-p[d]/2+E,O=T2(N,R,P),D=l;r.modifiersData[n]=(t={},t[D]=O,t.centerOffset=O-R,t)}}function tZe(e){var t=e.state,r=e.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||Vfe(t.elements.popper,i)&&(t.elements.arrow=i))}const rZe={name:"arrow",enabled:!0,phase:"main",fn:eZe,effect:tZe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Sy(e){return e.split("-")[1]}var nZe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function iZe(e,t){var r=e.x,n=e.y,i=t.devicePixelRatio||1;return{x:by(r*i)/i||0,y:by(n*i)/i||0}}function vY(e){var t,r=e.popper,n=e.popperRect,i=e.placement,a=e.variation,s=e.offsets,o=e.position,l=e.gpuAcceleration,c=e.adaptive,d=e.roundOffsets,f=e.isFixed,p=s.x,m=p===void 0?0:p,x=s.y,v=x===void 0?0:x,b=typeof d=="function"?d({x:m,y:v}):{x:m,y:v};m=b.x,v=b.y;var w=s.hasOwnProperty("x"),k=s.hasOwnProperty("y"),E=Cl,N=El,P=window;if(c){var R=fC(r),O="clientHeight",D="clientWidth";if(R===cc(r)&&(R=Z0(r),Mh(R).position!=="static"&&o==="absolute"&&(O="scrollHeight",D="scrollWidth")),R=R,i===El||(i===Cl||i===lu)&&a===TS){N=ou;var L=f&&R===P&&P.visualViewport?P.visualViewport.height:R[O];v-=L-n.height,v*=l?1:-1}if(i===Cl||(i===El||i===ou)&&a===TS){E=lu;var B=f&&R===P&&P.visualViewport?P.visualViewport.width:R[D];m-=B-n.width,m*=l?1:-1}}var z=Object.assign({position:o},c&&nZe),H=d===!0?iZe({x:m,y:v},cc(r)):{x:m,y:v};if(m=H.x,v=H.y,l){var te;return Object.assign({},z,(te={},te[N]=k?"0":"",te[E]=w?"0":"",te.transform=(P.devicePixelRatio||1)<=1?"translate("+m+"px, "+v+"px)":"translate3d("+m+"px, "+v+"px, 0)",te))}return Object.assign({},z,(t={},t[N]=k?v+"px":"",t[E]=w?m+"px":"",t.transform="",t))}function aZe(e){var t=e.state,r=e.options,n=r.gpuAcceleration,i=n===void 0?!0:n,a=r.adaptive,s=a===void 0?!0:a,o=r.roundOffsets,l=o===void 0?!0:o,c={placement:ef(t.placement),variation:Sy(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,vY(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,vY(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const sZe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:aZe,data:{}};var $_={passive:!0};function oZe(e){var t=e.state,r=e.instance,n=e.options,i=n.scroll,a=i===void 0?!0:i,s=n.resize,o=s===void 0?!0:s,l=cc(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&c.forEach(function(d){d.addEventListener("scroll",r.update,$_)}),o&&l.addEventListener("resize",r.update,$_),function(){a&&c.forEach(function(d){d.removeEventListener("scroll",r.update,$_)}),o&&l.removeEventListener("resize",r.update,$_)}}const lZe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:oZe,data:{}};var cZe={left:"right",right:"left",bottom:"top",top:"bottom"};function QN(e){return e.replace(/left|right|bottom|top/g,function(t){return cZe[t]})}var uZe={start:"end",end:"start"};function yY(e){return e.replace(/start|end/g,function(t){return uZe[t]})}function pB(e){var t=cc(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function mB(e){return wy(Z0(e)).left+pB(e).scrollLeft}function dZe(e,t){var r=cc(e),n=Z0(e),i=r.visualViewport,a=n.clientWidth,s=n.clientHeight,o=0,l=0;if(i){a=i.width,s=i.height;var c=Wfe();(c||!c&&t==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:a,height:s,x:o+mB(e),y:l}}function fZe(e){var t,r=Z0(e),n=pB(e),i=(t=e.ownerDocument)==null?void 0:t.body,a=Tg(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Tg(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),o=-n.scrollLeft+mB(e),l=-n.scrollTop;return Mh(i||r).direction==="rtl"&&(o+=Tg(r.clientWidth,i?i.clientWidth:0)-a),{width:a,height:s,x:o,y:l}}function gB(e){var t=Mh(e),r=t.overflow,n=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function Xfe(e){return["html","body","#document"].indexOf(sf(e))>=0?e.ownerDocument.body:ru(e)&&gB(e)?e:Xfe(E3(e))}function I2(e,t){var r;t===void 0&&(t=[]);var n=Xfe(e),i=n===((r=e.ownerDocument)==null?void 0:r.body),a=cc(n),s=i?[a].concat(a.visualViewport||[],gB(n)?n:[]):n,o=t.concat(s);return i?o:o.concat(I2(E3(s)))}function cF(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function hZe(e,t){var r=wy(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function bY(e,t,r){return t===$fe?cF(dZe(e,r)):ox(t)?hZe(t,r):cF(fZe(Z0(e)))}function pZe(e){var t=I2(E3(e)),r=["absolute","fixed"].indexOf(Mh(e).position)>=0,n=r&&ru(e)?fC(e):e;return ox(n)?t.filter(function(i){return ox(i)&&Vfe(i,n)&&sf(i)!=="body"}):[]}function mZe(e,t,r,n){var i=t==="clippingParents"?pZe(e):[].concat(t),a=[].concat(i,[r]),s=a[0],o=a.reduce(function(l,c){var d=bY(e,c,n);return l.top=Tg(d.top,l.top),l.right=cI(d.right,l.right),l.bottom=cI(d.bottom,l.bottom),l.left=Tg(d.left,l.left),l},bY(e,s,n));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Yfe(e){var t=e.reference,r=e.element,n=e.placement,i=n?ef(n):null,a=n?Sy(n):null,s=t.x+t.width/2-r.width/2,o=t.y+t.height/2-r.height/2,l;switch(i){case El:l={x:s,y:t.y-r.height};break;case ou:l={x:s,y:t.y+t.height};break;case lu:l={x:t.x+t.width,y:o};break;case Cl:l={x:t.x-r.width,y:o};break;default:l={x:t.x,y:t.y}}var c=i?hB(i):null;if(c!=null){var d=c==="y"?"height":"width";switch(a){case yy:l[c]=l[c]-(t[d]/2-r[d]/2);break;case TS:l[c]=l[c]+(t[d]/2-r[d]/2);break}}return l}function IS(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=n===void 0?e.placement:n,a=r.strategy,s=a===void 0?e.strategy:a,o=r.boundary,l=o===void 0?MJe:o,c=r.rootBoundary,d=c===void 0?$fe:c,f=r.elementContext,p=f===void 0?Cw:f,m=r.altBoundary,x=m===void 0?!1:m,v=r.padding,b=v===void 0?0:v,w=Gfe(typeof b!="number"?b:Kfe(b,dC)),k=p===Cw?FJe:Cw,E=e.rects.popper,N=e.elements[x?k:p],P=mZe(ox(N)?N:N.contextElement||Z0(e.elements.popper),l,d,s),R=wy(e.elements.reference),O=Yfe({reference:R,element:E,placement:i}),D=cF(Object.assign({},E,O)),L=p===Cw?D:R,B={top:P.top-L.top+w.top,bottom:L.bottom-P.bottom+w.bottom,left:P.left-L.left+w.left,right:L.right-P.right+w.right},z=e.modifiersData.offset;if(p===Cw&&z){var H=z[i];Object.keys(B).forEach(function(te){var Y=[lu,ou].indexOf(te)>=0?1:-1,W=[El,ou].indexOf(te)>=0?"y":"x";B[te]+=H[W]*Y})}return B}function gZe(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=r.boundary,a=r.rootBoundary,s=r.padding,o=r.flipVariations,l=r.allowedAutoPlacements,c=l===void 0?zfe:l,d=Sy(n),f=d?o?gY:gY.filter(function(x){return Sy(x)===d}):dC,p=f.filter(function(x){return c.indexOf(x)>=0});p.length===0&&(p=f);var m=p.reduce(function(x,v){return x[v]=IS(e,{placement:v,boundary:i,rootBoundary:a,padding:s})[ef(v)],x},{});return Object.keys(m).sort(function(x,v){return m[x]-m[v]})}function xZe(e){if(ef(e)===uB)return[];var t=QN(e);return[yY(e),t,yY(t)]}function vZe(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var i=r.mainAxis,a=i===void 0?!0:i,s=r.altAxis,o=s===void 0?!0:s,l=r.fallbackPlacements,c=r.padding,d=r.boundary,f=r.rootBoundary,p=r.altBoundary,m=r.flipVariations,x=m===void 0?!0:m,v=r.allowedAutoPlacements,b=t.options.placement,w=ef(b),k=w===b,E=l||(k||!x?[QN(b)]:xZe(b)),N=[b].concat(E).reduce(function(V,G){return V.concat(ef(G)===uB?gZe(t,{placement:G,boundary:d,rootBoundary:f,padding:c,flipVariations:x,allowedAutoPlacements:v}):G)},[]),P=t.rects.reference,R=t.rects.popper,O=new Map,D=!0,L=N[0],B=0;B<N.length;B++){var z=N[B],H=ef(z),te=Sy(z)===yy,Y=[El,ou].indexOf(H)>=0,W=Y?"width":"height",Z=IS(t,{placement:z,boundary:d,rootBoundary:f,altBoundary:p,padding:c}),re=Y?te?lu:Cl:te?ou:El;P[W]>R[W]&&(re=QN(re));var X=QN(re),Q=[];if(a&&Q.push(Z[H]<=0),o&&Q.push(Z[re]<=0,Z[X]<=0),Q.every(function(V){return V})){L=z,D=!1;break}O.set(z,Q)}if(D)for(var fe=x?3:1,ye=function(G){var ie=N.find(function(Ee){var ne=O.get(Ee);if(ne)return ne.slice(0,G).every(function(ae){return ae})});if(ie)return L=ie,"break"},J=fe;J>0;J--){var ce=ye(J);if(ce==="break")break}t.placement!==L&&(t.modifiersData[n]._skip=!0,t.placement=L,t.reset=!0)}}const yZe={name:"flip",enabled:!0,phase:"main",fn:vZe,requiresIfExists:["offset"],data:{_skip:!1}};function wY(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function SY(e){return[El,lu,ou,Cl].some(function(t){return e[t]>=0})}function bZe(e){var t=e.state,r=e.name,n=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,s=IS(t,{elementContext:"reference"}),o=IS(t,{altBoundary:!0}),l=wY(s,n),c=wY(o,i,a),d=SY(l),f=SY(c);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":f})}const wZe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:bZe};function SZe(e,t,r){var n=ef(e),i=[Cl,El].indexOf(n)>=0?-1:1,a=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,s=a[0],o=a[1];return s=s||0,o=(o||0)*i,[Cl,lu].indexOf(n)>=0?{x:o,y:s}:{x:s,y:o}}function EZe(e){var t=e.state,r=e.options,n=e.name,i=r.offset,a=i===void 0?[0,0]:i,s=zfe.reduce(function(d,f){return d[f]=SZe(f,t.rects,a),d},{}),o=s[t.placement],l=o.x,c=o.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[n]=s}const CZe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:EZe};function kZe(e){var t=e.state,r=e.name;t.modifiersData[r]=Yfe({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const _Ze={name:"popperOffsets",enabled:!0,phase:"read",fn:kZe,data:{}};function NZe(e){return e==="x"?"y":"x"}function AZe(e){var t=e.state,r=e.options,n=e.name,i=r.mainAxis,a=i===void 0?!0:i,s=r.altAxis,o=s===void 0?!1:s,l=r.boundary,c=r.rootBoundary,d=r.altBoundary,f=r.padding,p=r.tether,m=p===void 0?!0:p,x=r.tetherOffset,v=x===void 0?0:x,b=IS(t,{boundary:l,rootBoundary:c,padding:f,altBoundary:d}),w=ef(t.placement),k=Sy(t.placement),E=!k,N=hB(w),P=NZe(N),R=t.modifiersData.popperOffsets,O=t.rects.reference,D=t.rects.popper,L=typeof v=="function"?v(Object.assign({},t.rects,{placement:t.placement})):v,B=typeof L=="number"?{mainAxis:L,altAxis:L}:Object.assign({mainAxis:0,altAxis:0},L),z=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,H={x:0,y:0};if(R){if(a){var te,Y=N==="y"?El:Cl,W=N==="y"?ou:lu,Z=N==="y"?"height":"width",re=R[N],X=re+b[Y],Q=re-b[W],fe=m?-D[Z]/2:0,ye=k===yy?O[Z]:D[Z],J=k===yy?-D[Z]:-O[Z],ce=t.elements.arrow,V=m&&ce?fB(ce):{width:0,height:0},G=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:qfe(),ie=G[Y],Ee=G[W],ne=T2(0,O[Z],V[Z]),ae=E?O[Z]/2-fe-ne-ie-B.mainAxis:ye-ne-ie-B.mainAxis,me=E?-O[Z]/2+fe+ne+Ee+B.mainAxis:J+ne+Ee+B.mainAxis,ve=t.elements.arrow&&fC(t.elements.arrow),q=ve?N==="y"?ve.clientTop||0:ve.clientLeft||0:0,Ne=(te=z==null?void 0:z[N])!=null?te:0,Pe=re+ae-Ne-q,ze=re+me-Ne,De=T2(m?cI(X,Pe):X,re,m?Tg(Q,ze):Q);R[N]=De,H[N]=De-re}if(o){var $e,et=N==="x"?El:Cl,ut=N==="x"?ou:lu,kt=R[P],ht=P==="y"?"height":"width",Rr=kt+b[et],er=kt-b[ut],ct=[El,Cl].indexOf(w)!==-1,qt=($e=z==null?void 0:z[P])!=null?$e:0,Lt=ct?Rr:kt-O[ht]-D[ht]-qt+B.altAxis,dr=ct?kt+O[ht]+D[ht]-qt-B.altAxis:er,Gt=m&&ct?JJe(Lt,kt,dr):T2(m?Lt:Rr,kt,m?dr:er);R[P]=Gt,H[P]=Gt-kt}t.modifiersData[n]=H}}const TZe={name:"preventOverflow",enabled:!0,phase:"main",fn:AZe,requiresIfExists:["offset"]};function IZe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function OZe(e){return e===cc(e)||!ru(e)?pB(e):IZe(e)}function PZe(e){var t=e.getBoundingClientRect(),r=by(t.width)/e.offsetWidth||1,n=by(t.height)/e.offsetHeight||1;return r!==1||n!==1}function RZe(e,t,r){r===void 0&&(r=!1);var n=ru(t),i=ru(t)&&PZe(t),a=Z0(t),s=wy(e,i,r),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!r)&&((sf(t)!=="body"||gB(a))&&(o=OZe(t)),ru(t)?(l=wy(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):a&&(l.x=mB(a))),{x:s.left+o.scrollLeft-l.x,y:s.top+o.scrollTop-l.y,width:s.width,height:s.height}}function jZe(e){var t=new Map,r=new Set,n=[];e.forEach(function(a){t.set(a.name,a)});function i(a){r.add(a.name);var s=[].concat(a.requires||[],a.requiresIfExists||[]);s.forEach(function(o){if(!r.has(o)){var l=t.get(o);l&&i(l)}}),n.push(a)}return e.forEach(function(a){r.has(a.name)||i(a)}),n}function DZe(e){var t=jZe(e);return GJe.reduce(function(r,n){return r.concat(t.filter(function(i){return i.phase===n}))},[])}function MZe(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function FZe(e){var t=e.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var EY={placement:"bottom",modifiers:[],strategy:"absolute"};function CY(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function LZe(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,i=t.defaultOptions,a=i===void 0?EY:i;return function(o,l,c){c===void 0&&(c=a);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},EY,a),modifiersData:{},elements:{reference:o,popper:l},attributes:{},styles:{}},f=[],p=!1,m={state:d,setOptions:function(w){var k=typeof w=="function"?w(d.options):w;v(),d.options=Object.assign({},a,d.options,k),d.scrollParents={reference:ox(o)?I2(o):o.contextElement?I2(o.contextElement):[],popper:I2(l)};var E=DZe(FZe([].concat(n,d.options.modifiers)));return d.orderedModifiers=E.filter(function(N){return N.enabled}),x(),m.update()},forceUpdate:function(){if(!p){var w=d.elements,k=w.reference,E=w.popper;if(CY(k,E)){d.rects={reference:RZe(k,fC(E),d.options.strategy==="fixed"),popper:fB(E)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(B){return d.modifiersData[B.name]=Object.assign({},B.data)});for(var N=0;N<d.orderedModifiers.length;N++){if(d.reset===!0){d.reset=!1,N=-1;continue}var P=d.orderedModifiers[N],R=P.fn,O=P.options,D=O===void 0?{}:O,L=P.name;typeof R=="function"&&(d=R({state:d,options:D,name:L,instance:m})||d)}}}},update:MZe(function(){return new Promise(function(b){m.forceUpdate(),b(d)})}),destroy:function(){v(),p=!0}};if(!CY(o,l))return m;m.setOptions(c).then(function(b){!p&&c.onFirstUpdate&&c.onFirstUpdate(b)});function x(){d.orderedModifiers.forEach(function(b){var w=b.name,k=b.options,E=k===void 0?{}:k,N=b.effect;if(typeof N=="function"){var P=N({state:d,name:w,instance:m,options:E}),R=function(){};f.push(P||R)}})}function v(){f.forEach(function(b){return b()}),f=[]}return m}}var BZe=[lZe,_Ze,sZe,Hfe,CZe,yZe,TZe,rZe,wZe],UZe=LZe({defaultModifiers:BZe}),$Ze="tippy-box",Qfe="tippy-content",zZe="tippy-backdrop",Jfe="tippy-arrow",Zfe="tippy-svg-arrow",Dm={passive:!0,capture:!0},ehe=function(){return document.body};function jD(e,t,r){if(Array.isArray(e)){var n=e[t];return n??(Array.isArray(r)?r[t]:r)}return e}function xB(e,t){var r={}.toString.call(e);return r.indexOf("[object")===0&&r.indexOf(t+"]")>-1}function the(e,t){return typeof e=="function"?e.apply(void 0,t):e}function kY(e,t){if(t===0)return e;var r;return function(n){clearTimeout(r),r=setTimeout(function(){e(n)},t)}}function HZe(e){return e.split(/\s+/).filter(Boolean)}function W1(e){return[].concat(e)}function _Y(e,t){e.indexOf(t)===-1&&e.push(t)}function WZe(e){return e.filter(function(t,r){return e.indexOf(t)===r})}function VZe(e){return e.split("-")[0]}function uI(e){return[].slice.call(e)}function NY(e){return Object.keys(e).reduce(function(t,r){return e[r]!==void 0&&(t[r]=e[r]),t},{})}function O2(){return document.createElement("div")}function C3(e){return["Element","Fragment"].some(function(t){return xB(e,t)})}function qZe(e){return xB(e,"NodeList")}function GZe(e){return xB(e,"MouseEvent")}function KZe(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function XZe(e){return C3(e)?[e]:qZe(e)?uI(e):Array.isArray(e)?e:uI(document.querySelectorAll(e))}function DD(e,t){e.forEach(function(r){r&&(r.style.transitionDuration=t+"ms")})}function AY(e,t){e.forEach(function(r){r&&r.setAttribute("data-state",t)})}function YZe(e){var t,r=W1(e),n=r[0];return n!=null&&(t=n.ownerDocument)!=null&&t.body?n.ownerDocument:document}function QZe(e,t){var r=t.clientX,n=t.clientY;return e.every(function(i){var a=i.popperRect,s=i.popperState,o=i.props,l=o.interactiveBorder,c=VZe(s.placement),d=s.modifiersData.offset;if(!d)return!0;var f=c==="bottom"?d.top.y:0,p=c==="top"?d.bottom.y:0,m=c==="right"?d.left.x:0,x=c==="left"?d.right.x:0,v=a.top-n+f>l,b=n-a.bottom-p>l,w=a.left-r+m>l,k=r-a.right-x>l;return v||b||w||k})}function MD(e,t,r){var n=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){e[n](i,r)})}function TY(e,t){for(var r=t;r;){var n;if(e.contains(r))return!0;r=r.getRootNode==null||(n=r.getRootNode())==null?void 0:n.host}return!1}var Ud={isTouch:!1},IY=0;function JZe(){Ud.isTouch||(Ud.isTouch=!0,window.performance&&document.addEventListener("mousemove",rhe))}function rhe(){var e=performance.now();e-IY<20&&(Ud.isTouch=!1,document.removeEventListener("mousemove",rhe)),IY=e}function ZZe(){var e=document.activeElement;if(KZe(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function eet(){document.addEventListener("touchstart",JZe,Dm),window.addEventListener("blur",ZZe)}var tet=typeof window<"u"&&typeof document<"u",ret=tet?!!window.msCrypto:!1,net={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},iet={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Gu=Object.assign({appendTo:ehe,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},net,iet),aet=Object.keys(Gu),set=function(t){var r=Object.keys(t);r.forEach(function(n){Gu[n]=t[n]})};function nhe(e){var t=e.plugins||[],r=t.reduce(function(n,i){var a=i.name,s=i.defaultValue;if(a){var o;n[a]=e[a]!==void 0?e[a]:(o=Gu[a])!=null?o:s}return n},{});return Object.assign({},e,r)}function oet(e,t){var r=t?Object.keys(nhe(Object.assign({},Gu,{plugins:t}))):aet,n=r.reduce(function(i,a){var s=(e.getAttribute("data-tippy-"+a)||"").trim();if(!s)return i;if(a==="content")i[a]=s;else try{i[a]=JSON.parse(s)}catch{i[a]=s}return i},{});return n}function OY(e,t){var r=Object.assign({},t,{content:the(t.content,[e])},t.ignoreAttributes?{}:oet(e,t.plugins));return r.aria=Object.assign({},Gu.aria,r.aria),r.aria={expanded:r.aria.expanded==="auto"?t.interactive:r.aria.expanded,content:r.aria.content==="auto"?t.interactive?null:"describedby":r.aria.content},r}var cet=function(){return"innerHTML"};function uF(e,t){e[cet()]=t}function PY(e){var t=O2();return e===!0?t.className=Jfe:(t.className=Zfe,C3(e)?t.appendChild(e):uF(t,e)),t}function RY(e,t){C3(t.content)?(uF(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?uF(e,t.content):e.textContent=t.content)}function dF(e){var t=e.firstElementChild,r=uI(t.children);return{box:t,content:r.find(function(n){return n.classList.contains(Qfe)}),arrow:r.find(function(n){return n.classList.contains(Jfe)||n.classList.contains(Zfe)}),backdrop:r.find(function(n){return n.classList.contains(zZe)})}}function ihe(e){var t=O2(),r=O2();r.className=$Ze,r.setAttribute("data-state","hidden"),r.setAttribute("tabindex","-1");var n=O2();n.className=Qfe,n.setAttribute("data-state","hidden"),RY(n,e.props),t.appendChild(r),r.appendChild(n),i(e.props,e.props);function i(a,s){var o=dF(t),l=o.box,c=o.content,d=o.arrow;s.theme?l.setAttribute("data-theme",s.theme):l.removeAttribute("data-theme"),typeof s.animation=="string"?l.setAttribute("data-animation",s.animation):l.removeAttribute("data-animation"),s.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?l.setAttribute("role",s.role):l.removeAttribute("role"),(a.content!==s.content||a.allowHTML!==s.allowHTML)&&RY(c,e.props),s.arrow?d?a.arrow!==s.arrow&&(l.removeChild(d),l.appendChild(PY(s.arrow))):l.appendChild(PY(s.arrow)):d&&l.removeChild(d)}return{popper:t,onUpdate:i}}ihe.$$tippy=!0;var uet=1,z_=[],FD=[];function det(e,t){var r=OY(e,Object.assign({},Gu,nhe(NY(t)))),n,i,a,s=!1,o=!1,l=!1,c=!1,d,f,p,m=[],x=kY(Pe,r.interactiveDebounce),v,b=uet++,w=null,k=WZe(r.plugins),E={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},N={id:b,reference:e,popper:O2(),popperInstance:w,props:r,state:E,plugins:k,clearDelayTimeouts:Lt,setProps:dr,setContent:Gt,show:qe,hide:Xe,hideWithInteractivity:Te,enable:ct,disable:qt,unmount:He,destroy:je};if(!r.render)return N;var P=r.render(N),R=P.popper,O=P.onUpdate;R.setAttribute("data-tippy-root",""),R.id="tippy-"+N.id,N.popper=R,e._tippy=N,R._tippy=N;var D=k.map(function(Ce){return Ce.fn(N)}),L=e.hasAttribute("aria-expanded");return ve(),fe(),re(),X("onCreate",[N]),r.showOnCreate&&Rr(),R.addEventListener("mouseenter",function(){N.props.interactive&&N.state.isVisible&&N.clearDelayTimeouts()}),R.addEventListener("mouseleave",function(){N.props.interactive&&N.props.trigger.indexOf("mouseenter")>=0&&Y().addEventListener("mousemove",x)}),N;function B(){var Ce=N.props.touch;return Array.isArray(Ce)?Ce:[Ce,0]}function z(){return B()[0]==="hold"}function H(){var Ce;return!!((Ce=N.props.render)!=null&&Ce.$$tippy)}function te(){return v||e}function Y(){var Ce=te().parentNode;return Ce?YZe(Ce):document}function W(){return dF(R)}function Z(Ce){return N.state.isMounted&&!N.state.isVisible||Ud.isTouch||d&&d.type==="focus"?0:jD(N.props.delay,Ce?0:1,Gu.delay)}function re(Ce){Ce===void 0&&(Ce=!1),R.style.pointerEvents=N.props.interactive&&!Ce?"":"none",R.style.zIndex=""+N.props.zIndex}function X(Ce,ot,xt){if(xt===void 0&&(xt=!0),D.forEach(function(Pt){Pt[Ce]&&Pt[Ce].apply(Pt,ot)}),xt){var Dt;(Dt=N.props)[Ce].apply(Dt,ot)}}function Q(){var Ce=N.props.aria;if(Ce.content){var ot="aria-"+Ce.content,xt=R.id,Dt=W1(N.props.triggerTarget||e);Dt.forEach(function(Pt){var Cr=Pt.getAttribute(ot);if(N.state.isVisible)Pt.setAttribute(ot,Cr?Cr+" "+xt:xt);else{var wn=Cr&&Cr.replace(xt,"").trim();wn?Pt.setAttribute(ot,wn):Pt.removeAttribute(ot)}})}}function fe(){if(!(L||!N.props.aria.expanded)){var Ce=W1(N.props.triggerTarget||e);Ce.forEach(function(ot){N.props.interactive?ot.setAttribute("aria-expanded",N.state.isVisible&&ot===te()?"true":"false"):ot.removeAttribute("aria-expanded")})}}function ye(){Y().removeEventListener("mousemove",x),z_=z_.filter(function(Ce){return Ce!==x})}function J(Ce){if(!(Ud.isTouch&&(l||Ce.type==="mousedown"))){var ot=Ce.composedPath&&Ce.composedPath()[0]||Ce.target;if(!(N.props.interactive&&TY(R,ot))){if(W1(N.props.triggerTarget||e).some(function(xt){return TY(xt,ot)})){if(Ud.isTouch||N.state.isVisible&&N.props.trigger.indexOf("click")>=0)return}else X("onClickOutside",[N,Ce]);N.props.hideOnClick===!0&&(N.clearDelayTimeouts(),N.hide(),o=!0,setTimeout(function(){o=!1}),N.state.isMounted||ie())}}}function ce(){l=!0}function V(){l=!1}function G(){var Ce=Y();Ce.addEventListener("mousedown",J,!0),Ce.addEventListener("touchend",J,Dm),Ce.addEventListener("touchstart",V,Dm),Ce.addEventListener("touchmove",ce,Dm)}function ie(){var Ce=Y();Ce.removeEventListener("mousedown",J,!0),Ce.removeEventListener("touchend",J,Dm),Ce.removeEventListener("touchstart",V,Dm),Ce.removeEventListener("touchmove",ce,Dm)}function Ee(Ce,ot){ae(Ce,function(){!N.state.isVisible&&R.parentNode&&R.parentNode.contains(R)&&ot()})}function ne(Ce,ot){ae(Ce,ot)}function ae(Ce,ot){var xt=W().box;function Dt(Pt){Pt.target===xt&&(MD(xt,"remove",Dt),ot())}if(Ce===0)return ot();MD(xt,"remove",f),MD(xt,"add",Dt),f=Dt}function me(Ce,ot,xt){xt===void 0&&(xt=!1);var Dt=W1(N.props.triggerTarget||e);Dt.forEach(function(Pt){Pt.addEventListener(Ce,ot,xt),m.push({node:Pt,eventType:Ce,handler:ot,options:xt})})}function ve(){z()&&(me("touchstart",Ne,{passive:!0}),me("touchend",ze,{passive:!0})),HZe(N.props.trigger).forEach(function(Ce){if(Ce!=="manual")switch(me(Ce,Ne),Ce){case"mouseenter":me("mouseleave",ze);break;case"focus":me(ret?"focusout":"blur",De);break;case"focusin":me("focusout",De);break}})}function q(){m.forEach(function(Ce){var ot=Ce.node,xt=Ce.eventType,Dt=Ce.handler,Pt=Ce.options;ot.removeEventListener(xt,Dt,Pt)}),m=[]}function Ne(Ce){var ot,xt=!1;if(!(!N.state.isEnabled||$e(Ce)||o)){var Dt=((ot=d)==null?void 0:ot.type)==="focus";d=Ce,v=Ce.currentTarget,fe(),!N.state.isVisible&&GZe(Ce)&&z_.forEach(function(Pt){return Pt(Ce)}),Ce.type==="click"&&(N.props.trigger.indexOf("mouseenter")<0||s)&&N.props.hideOnClick!==!1&&N.state.isVisible?xt=!0:Rr(Ce),Ce.type==="click"&&(s=!xt),xt&&!Dt&&er(Ce)}}function Pe(Ce){var ot=Ce.target,xt=te().contains(ot)||R.contains(ot);if(!(Ce.type==="mousemove"&&xt)){var Dt=ht().concat(R).map(function(Pt){var Cr,wn=Pt._tippy,fr=(Cr=wn.popperInstance)==null?void 0:Cr.state;return fr?{popperRect:Pt.getBoundingClientRect(),popperState:fr,props:r}:null}).filter(Boolean);QZe(Dt,Ce)&&(ye(),er(Ce))}}function ze(Ce){var ot=$e(Ce)||N.props.trigger.indexOf("click")>=0&&s;if(!ot){if(N.props.interactive){N.hideWithInteractivity(Ce);return}er(Ce)}}function De(Ce){N.props.trigger.indexOf("focusin")<0&&Ce.target!==te()||N.props.interactive&&Ce.relatedTarget&&R.contains(Ce.relatedTarget)||er(Ce)}function $e(Ce){return Ud.isTouch?z()!==Ce.type.indexOf("touch")>=0:!1}function et(){ut();var Ce=N.props,ot=Ce.popperOptions,xt=Ce.placement,Dt=Ce.offset,Pt=Ce.getReferenceClientRect,Cr=Ce.moveTransition,wn=H()?dF(R).arrow:null,fr=Pt?{getBoundingClientRect:Pt,contextElement:Pt.contextElement||te()}:e,Vi={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(We){var Je=We.state;if(H()){var rt=W(),_t=rt.box;["placement","reference-hidden","escaped"].forEach(function(Ut){Ut==="placement"?_t.setAttribute("data-placement",Je.placement):Je.attributes.popper["data-popper-"+Ut]?_t.setAttribute("data-"+Ut,""):_t.removeAttribute("data-"+Ut)}),Je.attributes.popper={}}}},jn=[{name:"offset",options:{offset:Dt}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Cr}},Vi];H()&&wn&&jn.push({name:"arrow",options:{element:wn,padding:3}}),jn.push.apply(jn,(ot==null?void 0:ot.modifiers)||[]),N.popperInstance=UZe(fr,R,Object.assign({},ot,{placement:xt,onFirstUpdate:p,modifiers:jn}))}function ut(){N.popperInstance&&(N.popperInstance.destroy(),N.popperInstance=null)}function kt(){var Ce=N.props.appendTo,ot,xt=te();N.props.interactive&&Ce===ehe||Ce==="parent"?ot=xt.parentNode:ot=the(Ce,[xt]),ot.contains(R)||ot.appendChild(R),N.state.isMounted=!0,et()}function ht(){return uI(R.querySelectorAll("[data-tippy-root]"))}function Rr(Ce){N.clearDelayTimeouts(),Ce&&X("onTrigger",[N,Ce]),G();var ot=Z(!0),xt=B(),Dt=xt[0],Pt=xt[1];Ud.isTouch&&Dt==="hold"&&Pt&&(ot=Pt),ot?n=setTimeout(function(){N.show()},ot):N.show()}function er(Ce){if(N.clearDelayTimeouts(),X("onUntrigger",[N,Ce]),!N.state.isVisible){ie();return}if(!(N.props.trigger.indexOf("mouseenter")>=0&&N.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(Ce.type)>=0&&s)){var ot=Z(!1);ot?i=setTimeout(function(){N.state.isVisible&&N.hide()},ot):a=requestAnimationFrame(function(){N.hide()})}}function ct(){N.state.isEnabled=!0}function qt(){N.hide(),N.state.isEnabled=!1}function Lt(){clearTimeout(n),clearTimeout(i),cancelAnimationFrame(a)}function dr(Ce){if(!N.state.isDestroyed){X("onBeforeUpdate",[N,Ce]),q();var ot=N.props,xt=OY(e,Object.assign({},ot,NY(Ce),{ignoreAttributes:!0}));N.props=xt,ve(),ot.interactiveDebounce!==xt.interactiveDebounce&&(ye(),x=kY(Pe,xt.interactiveDebounce)),ot.triggerTarget&&!xt.triggerTarget?W1(ot.triggerTarget).forEach(function(Dt){Dt.removeAttribute("aria-expanded")}):xt.triggerTarget&&e.removeAttribute("aria-expanded"),fe(),re(),O&&O(ot,xt),N.popperInstance&&(et(),ht().forEach(function(Dt){requestAnimationFrame(Dt._tippy.popperInstance.forceUpdate)})),X("onAfterUpdate",[N,Ce])}}function Gt(Ce){N.setProps({content:Ce})}function qe(){var Ce=N.state.isVisible,ot=N.state.isDestroyed,xt=!N.state.isEnabled,Dt=Ud.isTouch&&!N.props.touch,Pt=jD(N.props.duration,0,Gu.duration);if(!(Ce||ot||xt||Dt)&&!te().hasAttribute("disabled")&&(X("onShow",[N],!1),N.props.onShow(N)!==!1)){if(N.state.isVisible=!0,H()&&(R.style.visibility="visible"),re(),G(),N.state.isMounted||(R.style.transition="none"),H()){var Cr=W(),wn=Cr.box,fr=Cr.content;DD([wn,fr],0)}p=function(){var jn;if(!(!N.state.isVisible||c)){if(c=!0,R.offsetHeight,R.style.transition=N.props.moveTransition,H()&&N.props.animation){var Jo=W(),We=Jo.box,Je=Jo.content;DD([We,Je],Pt),AY([We,Je],"visible")}Q(),fe(),_Y(FD,N),(jn=N.popperInstance)==null||jn.forceUpdate(),X("onMount",[N]),N.props.animation&&H()&&ne(Pt,function(){N.state.isShown=!0,X("onShown",[N])})}},kt()}}function Xe(){var Ce=!N.state.isVisible,ot=N.state.isDestroyed,xt=!N.state.isEnabled,Dt=jD(N.props.duration,1,Gu.duration);if(!(Ce||ot||xt)&&(X("onHide",[N],!1),N.props.onHide(N)!==!1)){if(N.state.isVisible=!1,N.state.isShown=!1,c=!1,s=!1,H()&&(R.style.visibility="hidden"),ye(),ie(),re(!0),H()){var Pt=W(),Cr=Pt.box,wn=Pt.content;N.props.animation&&(DD([Cr,wn],Dt),AY([Cr,wn],"hidden"))}Q(),fe(),N.props.animation?H()&&Ee(Dt,N.unmount):N.unmount()}}function Te(Ce){Y().addEventListener("mousemove",x),_Y(z_,x),x(Ce)}function He(){N.state.isVisible&&N.hide(),N.state.isMounted&&(ut(),ht().forEach(function(Ce){Ce._tippy.unmount()}),R.parentNode&&R.parentNode.removeChild(R),FD=FD.filter(function(Ce){return Ce!==N}),N.state.isMounted=!1,X("onHidden",[N]))}function je(){N.state.isDestroyed||(N.clearDelayTimeouts(),N.unmount(),q(),delete e._tippy,N.state.isDestroyed=!0,X("onDestroy",[N]))}}function hC(e,t){t===void 0&&(t={});var r=Gu.plugins.concat(t.plugins||[]);eet();var n=Object.assign({},t,{plugins:r}),i=XZe(e),a=i.reduce(function(s,o){var l=o&&det(o,n);return l&&s.push(l),s},[]);return C3(e)?a[0]:a}hC.defaultProps=Gu;hC.setDefaultProps=set;hC.currentInput=Ud;Object.assign({},Hfe,{effect:function(t){var r=t.state,n={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(r.elements.popper.style,n.popper),r.styles=n,r.elements.arrow&&Object.assign(r.elements.arrow.style,n.arrow)}});hC.setDefaultProps({render:ihe});const fet=I.forwardRef((e,t)=>{const[r,n]=I.useState(0),i=d=>{const f=e.items[d];f&&e.command({id:f.id,label:f.label,anchor:f.anchor})},a=()=>{n((r+e.items.length-1)%e.items.length)},s=()=>{n((r+1)%e.items.length)},o=()=>{i(r)};I.useEffect(()=>n(0),[e.items]),I.useImperativeHandle(t,()=>({onKeyDown:({event:d})=>d.key==="ArrowUp"?(a(),!0):d.key==="ArrowDown"?(s(),!0):d.key==="Enter"?(o(),!0):!1}));const l=e.query||"",c=e.items.length>0;return u.jsx("div",{className:"bg-surface border border-border rounded-lg shadow-xl overflow-hidden min-w-[200px] z-50 flex flex-col",children:c?e.items.map((d,f)=>u.jsxs("button",{className:`flex items-center gap-2 text-left px-3 py-2 text-sm w-full transition-colors ${f===r?"bg-primary text-on-primary":"bg-surface text-text-primary hover:bg-background"}`,onClick:()=>i(f),children:[d.type==="section"?u.jsx(E8e,{size:14,className:f===r?"text-on-primary":"text-text-secondary"}):u.jsx(Jc,{size:14,className:f===r?"text-on-primary":"text-text-secondary"}),u.jsxs("div",{className:"flex flex-col min-w-0",children:[u.jsx("span",{className:"truncate font-medium",children:d.label}),d.type==="section"&&u.jsx("span",{className:"text-[10px] opacity-70",children:"Section"})]})]},f)):u.jsx("div",{className:"px-3 py-2 text-sm text-text-secondary italic",children:l.length===0?"Start typing to search...":"No articles found."})})}),het={items:async({query:e})=>{if(!e)return[];try{return(await cr.get(`/api/kb/search?q=${e}`)).data.slice(0,5)}catch(t){return console.error(t),[]}},render:()=>{let e,t;return{onStart:r=>{e=new hfe(fet,{props:r,editor:r.editor}),r.clientRect&&(t=hC("body",{getReferenceClientRect:r.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"}))},onUpdate(r){e.updateProps(r),e.updateProps({query:r.query}),r.clientRect&&t[0].setProps({getReferenceClientRect:r.clientRect})},onKeyDown(r){var n;return r.event.key==="Escape"?(t[0].hide(),!0):(n=e.ref)==null?void 0:n.onKeyDown(r)},onExit(){t[0].destroy(),e.destroy()}}}};function pet({onClose:e,onSelect:t}){const[r,n]=I.useState("upload"),[i,a]=I.useState("KB"),[s,o]=I.useState([]),[l,c]=I.useState(!1),[d,f]=I.useState(!1);I.useEffect(()=>{r==="library"&&p()},[r,i]);const p=async()=>{c(!0);try{const x=await cr.get(`/api/kb/images?source=${i}`);o(x.data)}catch(x){console.error(x)}finally{c(!1)}},m=async x=>{var w;const v=(w=x.target.files)==null?void 0:w[0];if(!v)return;const b=new FormData;b.append("file",v),f(!0);try{const k=await cr.post("/api/kb/images",b,{headers:{"Content-Type":"multipart/form-data"}});t(k.data.url)}catch(k){console.error(k),Re.error("Upload failed")}finally{f(!1)}};return u.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:e,children:u.jsxs("div",{className:"bg-surface border border-border w-full max-w-2xl h-[600px] flex flex-col rounded-xl shadow-2xl overflow-hidden",onClick:x=>x.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border bg-background",children:[u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:()=>n("upload"),className:`px-3 py-1 text-sm font-bold rounded-full transition-colors ${r==="upload"?"bg-primary text-on-primary":"text-text-secondary hover:bg-surface"}`,children:"Upload New"}),u.jsx("button",{onClick:()=>n("library"),className:`px-3 py-1 text-sm font-bold rounded-full transition-colors ${r==="library"?"bg-primary text-on-primary":"text-text-secondary hover:bg-surface"}`,children:"Library"})]}),r==="library"&&u.jsxs("select",{className:"bg-background border border-border rounded px-2 py-1 text-xs",value:i,onChange:x=>a(x.target.value),children:[u.jsx("option",{value:"KB",children:"KB Assets"}),u.jsx("option",{value:"PROJECT",children:"Job Photos"}),u.jsx("option",{value:"ALL",children:"All Images"})]}),u.jsx("button",{onClick:e,className:"text-text-secondary hover:text-text-primary",children:u.jsx(Zr,{size:20})})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-surface",children:[r==="upload"&&u.jsx("div",{className:"h-full flex flex-col items-center justify-center border-2 border-dashed border-border rounded-xl bg-background/50 hover:bg-background/80 transition-colors",children:d?u.jsxs("div",{className:"text-center",children:[u.jsx(I0,{className:"animate-spin mx-auto mb-2 text-primary",size:48}),u.jsx("p",{className:"text-text-secondary font-medium",children:"Optimizing & Uploading..."})]}):u.jsxs("label",{className:"cursor-pointer text-center p-12 w-full h-full flex flex-col items-center justify-center",children:[u.jsx("div",{className:"bg-primary/10 p-4 rounded-full mb-4 text-primary",children:u.jsx(ob,{size:32})}),u.jsx("h3",{className:"text-lg font-bold text-text-primary",children:"Click to Upload"}),u.jsx("p",{className:"text-text-secondary text-sm mt-2",children:"Images, PDFs, Docs supported"}),u.jsx("input",{type:"file",className:"hidden",accept:"*",onChange:m})]})}),r==="library"&&u.jsx("div",{children:l?u.jsx("div",{className:"flex justify-center p-12",children:u.jsx(I0,{className:"animate-spin text-primary"})}):s.length===0?u.jsx("div",{className:"text-center py-12 text-text-tertiary",children:"No images found."}):u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-4",children:s.map(x=>{var v;return u.jsxs("button",{onClick:()=>t(x.url),className:"group relative aspect-square rounded-lg overflow-hidden border border-border hover:border-primary focus:ring-2 ring-primary focus:outline-none",children:[(v=x.mimeType)!=null&&v.startsWith("image/")||x.url.match(/\.(jpeg|jpg|gif|png|webp)$/i)?u.jsx("img",{src:x.thumbnailUrl||x.url,alt:"",className:"w-full h-full object-cover transition-transform group-hover:scale-110"}):u.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-surface-hover text-text-secondary",children:[u.jsx(Jc,{size:48,className:"mb-2"}),u.jsx("span",{className:"text-xs px-2 text-center truncate w-full",children:x.fileName||"Document"})]}),u.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:u.jsx("span",{className:"text-white text-xs font-bold bg-black/50 px-2 py-1 rounded",children:"Select"})})]},x.id)})})})]})]})})}function met(e){const{node:t,updateAttributes:r,selected:n}=e,[i,a]=I.useState(!1),s=I.useRef(null),o=I.useRef(0),l=I.useRef(0),c=w=>{w.preventDefault(),w.stopPropagation(),s.current&&(a(!0),o.current=w.clientX,l.current=s.current.offsetWidth,document.addEventListener("mousemove",d),document.addEventListener("mouseup",f))},d=I.useCallback(w=>{const E=w.clientX-o.current,N=Math.max(100,l.current+E);r({width:N})},[r]),f=I.useCallback(()=>{a(!1),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",f)},[d]),p=w=>{w.stopPropagation(),s.current&&(a(!0),o.current=w.touches[0].clientX,l.current=s.current.offsetWidth,document.addEventListener("touchmove",m,{passive:!1}),document.addEventListener("touchend",x))},m=I.useCallback(w=>{w.preventDefault();const E=w.touches[0].clientX-o.current,N=Math.max(100,l.current+E);r({width:N})},[r]),x=I.useCallback(()=>{a(!1),document.removeEventListener("touchmove",m),document.removeEventListener("touchend",x)},[m]),v=t.attrs.align||"center";let b={};return v==="left"?b={float:"left",marginRight:"1rem"}:v==="right"?b={float:"right",marginLeft:"1rem"}:b={display:"block",marginLeft:"auto",marginRight:"auto",textAlign:"center"},u.jsxs(LYe,{className:"relative transition-all my-4 mb-8",style:b,children:[u.jsxs("div",{className:`relative inline-block group ${n||i?"ring-2 ring-primary rounded":""}`,children:[u.jsx("img",{ref:s,src:t.attrs.src,alt:t.attrs.alt,title:t.attrs.title,width:t.attrs.width,className:"block rounded max-w-full h-auto"}),u.jsx("div",{className:`absolute bottom-2 right-2 w-6 h-6 md:w-4 md:h-4 bg-primary border-2 border-white rounded-full cursor-nwse-resize shadow-md
                        ${n||i?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity`,onMouseDown:c,onTouchStart:p}),i&&u.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded pointer-events-none",children:[t.attrs.width,"px"]})]}),(n||t.attrs.caption)&&u.jsx("div",{className:`text-center mt-2 ${n?"opacity-100":"opacity-70"} transition-opacity`,children:u.jsx("input",{className:"bg-transparent text-center text-sm text-text-secondary placeholder-text-tertiary border-none focus:ring-0 focus:outline-none w-full italic",placeholder:"Add a caption...",value:t.attrs.caption||"",onChange:w=>r({caption:w.target.value}),onMouseDown:w=>w.stopPropagation(),onClick:w=>w.stopPropagation()})})]})}const get=`
  .ProseMirror p { margin-bottom: 0.75em; line-height: 1.6; overflow-wrap: break-word; }
  .ProseMirror p:empty::before { content: " "; display: inline-block; }
  .ProseMirror h1 { font-size: 1.75em; font-weight: 800; margin-top: 1.5em; margin-bottom: 0.5em; color: var(--color-text-primary); }
  .ProseMirror h2 { font-size: 1.4em; font-weight: 700; margin-top: 1.25em; margin-bottom: 0.5em; color: var(--color-text-primary); }
  .ProseMirror h3 { font-size: 1.2em; font-weight: 600; margin-top: 1em; margin-bottom: 0.5em; color: var(--color-text-primary); }
  .ProseMirror ul { list-style-type: disc; padding-left: 1.5em; margin-bottom: 1em; }
  .ProseMirror ol { list-style-type: decimal; padding-left: 1.5em; margin-bottom: 1em; }
  .ProseMirror a { color: var(--color-primary); text-decoration: underline; cursor: pointer; }
  .ProseMirror img { max-width: 100%; height: auto; border-radius: 0.5rem; margin: 1em 0; display: inline-block; }
  
  /* Style for the Wiki Link Bubble inside the Editor */
  .ProseMirror .kb-mention {
      color: var(--color-primary);
      background-color: color-mix(in srgb, var(--color-primary), white 85%); 
      padding: 0.1rem 0.3rem;
      border-radius: 0.3rem;
      font-weight: 600;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.2s;
      /* FIX: Allow chips to wrap on mobile */
      white-space: normal;
      display: inline-block;
      margin-bottom: 2px;
  }
  .ProseMirror .kb-mention:hover {
      background-color: var(--color-primary);
      color: var(--color-on-primary);
  }
  .ProseMirror:focus { outline: none; }

  /* Text Alignment Styles */
  .ProseMirror p.is-right { text-align: right; }
  .ProseMirror p.is-center { text-align: center; }
  .ProseMirror p.is-left { text-align: left; }
`,xet=({editor:e,onOpenMedia:t})=>{if(!e)return null;const r=s=>`p-2 rounded hover:bg-surface transition-colors ${s?"text-primary bg-primary/10":"text-text-secondary"}`,n=()=>{const s=e.getAttributes("link").href,o=window.prompt("URL",s);if(o!==null){if(o===""){e.chain().focus().extendMarkRange("link").unsetLink().run();return}e.chain().focus().extendMarkRange("link").setLink({href:o}).run()}},i=s=>{e.isActive("image")?e.chain().focus().updateAttributes("image",{align:s}).run():e.chain().focus().setTextAlign(s).run()},a=s=>e.isActive("image")?e.getAttributes("image").align===s:e.isActive({textAlign:s});return u.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-border p-2 bg-background z-10",children:[u.jsx("button",{onClick:()=>e.chain().focus().toggleBold().run(),className:r(e.isActive("bold"))+" shrink-0",title:"Bold",children:u.jsx(o8e,{size:18})}),u.jsx("button",{onClick:()=>e.chain().focus().toggleItalic().run(),className:r(e.isActive("italic"))+" shrink-0",title:"Italic",children:u.jsx(N8e,{size:18})}),u.jsx("button",{onClick:n,className:r(e.isActive("link"))+" shrink-0",title:"Add Link",children:u.jsx(Fx,{size:18})}),u.jsx("button",{onClick:t,className:r(!1)+" shrink-0",title:"Insert Image",children:u.jsx(Jd,{size:18})}),u.jsx("div",{className:"w-px h-6 bg-border mx-2 shrink-0"}),u.jsx("button",{onClick:()=>e.chain().focus().toggleHeading({level:1}).run(),className:r(e.isActive("heading",{level:1}))+" shrink-0",title:"Heading 1",children:u.jsx(C8e,{size:18})}),u.jsx("button",{onClick:()=>e.chain().focus().toggleHeading({level:2}).run(),className:r(e.isActive("heading",{level:2}))+" shrink-0",title:"Heading 2",children:u.jsx(k8e,{size:18})}),u.jsx("div",{className:"w-px h-6 bg-border mx-2 shrink-0"}),u.jsx("button",{onClick:()=>i("left"),className:r(a("left"))+" shrink-0",title:"Align Left",children:u.jsx(i8e,{size:18})}),u.jsx("button",{onClick:()=>i("center"),className:r(a("center"))+" shrink-0",title:"Align Center",children:u.jsx(n8e,{size:18})}),u.jsx("button",{onClick:()=>i("right"),className:r(a("right"))+" shrink-0",title:"Align Right",children:u.jsx(a8e,{size:18})}),u.jsx("div",{className:"w-px h-6 bg-border mx-2 shrink-0"}),u.jsx("button",{onClick:()=>e.chain().focus().toggleBulletList().run(),className:r(e.isActive("bulletList"))+" shrink-0",title:"Bullet List",children:u.jsx(I8e,{size:18})}),u.jsx("button",{onClick:()=>e.chain().focus().toggleOrderedList().run(),className:r(e.isActive("orderedList"))+" shrink-0",title:"Ordered List",children:u.jsx(T8e,{size:18})})]})},ahe=({content:e,onChange:t,editable:r=!0})=>{const[n,i]=I.useState(!1),a=DYe({extensions:[CJe.configure({heading:!1,codeBlock:!1}),aQe.configure({levels:[1,2,3]}).extend({addAttributes(){return{id:{default:null,parseHTML:o=>o.getAttribute("id"),renderHTML:o=>o.id?{id:o.id}:{}}}}}),MQe.configure({openOnClick:!1}),TJe.configure({types:["heading","paragraph"]}),NJe.extend({addAttributes(){var o;return{...(o=this.parent)==null?void 0:o.call(this),width:{default:null,parseHTML:l=>l.getAttribute("width"),renderHTML:l=>({width:l.width})},align:{default:"center",parseHTML:l=>l.getAttribute("align"),renderHTML:l=>({align:l.align})},caption:{default:"",parseHTML:l=>l.getAttribute("data-caption"),renderHTML:l=>({"data-caption":l.caption})}}},addNodeView(){return HYe(met)}}).configure({inline:!0}),DJe.configure({HTMLAttributes:{class:"kb-mention"},suggestion:{...het,char:"[[",allowSpaces:!0},addAttributes(){return{id:{default:null},anchor:{default:null,parseHTML:o=>o.getAttribute("data-anchor"),renderHTML:o=>({"data-anchor":o.anchor})},label:{default:null,parseHTML:o=>o.getAttribute("data-label"),renderHTML:o=>({"data-label":o.label})}}},renderText({node:o}){return`${o.attrs.label??o.attrs.id}`}})],content:e,editable:r,onUpdate:({editor:o})=>{t(o.getHTML())},editorProps:{attributes:{class:"h-full outline-none text-text-primary"},handlePaste:(o,l,c)=>{var f;const d=(f=l.clipboardData)==null?void 0:f.items[0];if((d==null?void 0:d.kind)==="file"){l.preventDefault();const p=d.getAsFile();return p&&s(p,o),!0}return!1},handleDrop:(o,l,c,d)=>{if(!d&&l.dataTransfer&&l.dataTransfer.files&&l.dataTransfer.files[0]){const f=l.dataTransfer.files[0];return l.preventDefault(),s(f,o),!0}return!1}}}),s=async(o,l)=>{const c=o.type.startsWith("image/"),d=Re.loading(c?"Uploading image...":"Uploading file..."),f=new FormData;f.append("file",o);try{const p=await cr.post("/api/kb/images",f,{headers:{"Content-Type":"multipart/form-data"}}),{url:m}=p.data,{schema:x}=l.state;if(c){const v=x.nodes.image.create({src:m}),b=l.state.tr.replaceSelectionWith(v);l.dispatch(b)}else{const v=x.marks.link.create({href:m}),b=x.text(` ${o.name}`,[v]),w=l.state.tr.replaceSelectionWith(b);l.dispatch(w)}Re.success("Uploaded!",{id:d})}catch(p){console.error(p),Re.error("Upload failed",{id:d})}};return u.jsxs("div",{className:`border border-border rounded-lg overflow-hidden h-full flex flex-col ${r?"bg-surface":"bg-transparent border-0"}`,children:[u.jsx("style",{children:get}),r&&u.jsx(xet,{editor:a,onOpenMedia:()=>i(!0)}),u.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-6 cursor-text",onClick:()=>a==null?void 0:a.commands.focus(),children:u.jsx(AYe,{editor:a})}),n&&u.jsx(pet,{onClose:()=>i(!1),onSelect:o=>{o.match(/\.(jpeg|jpg|gif|png|webp|svg|bmp)$/i)!=null?a==null||a.chain().focus().setImage({src:o}).run():a==null||a.chain().focus().insertContent(`<a href="${o}" target="_blank"> Attachment</a> `).run(),i(!1)}})]})},vet=({templateKey:e,onClose:t,onSave:r})=>{const[n,i]=I.useState(null),[a,s]=I.useState(""),[o,l]=I.useState(""),[c,d]=I.useState(!0),[f,p]=I.useState(!1),[m,x]=I.useState(""),[v,b]=I.useState(!1);I.useEffect(()=>{e&&w()},[e]);const w=async()=>{if(e){d(!0);try{const P=await B1.getByKey(e);i(P),s(P.subject),l(P.body_content||"<p>Start typing to override the system default...</p>")}catch(P){console.error(P)}finally{d(!1)}}},k=async()=>{if(e){p(!0);try{await B1.update(e,{subject:a,body_content:o}),r(),t()}catch(P){console.error(P),alert("Failed to save template")}finally{p(!1)}}},E=async()=>{if(confirm("Are you sure? This will delete your custom template and revert to the system default file.")&&e){p(!0);try{await B1.update(e,{subject:(n==null?void 0:n.subject)||"",body_content:null}),r(),t()}catch(P){console.error(P)}finally{p(!1)}}},N=async()=>{if(!(!m||!e))try{await B1.update(e,{subject:a,body_content:o}),await B1.sendTest(e,m),alert(`Test email sent to ${m}`),b(!1)}catch{alert("Failed to send test email")}};return e?u.jsx(Ju,{children:u.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6",children:[u.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),u.jsxs("div",{className:"relative w-full max-w-4xl bg-surface rounded-xl shadow-2xl flex flex-col max-h-[90vh]",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border bg-surface-highlight rounded-t-xl",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:c?"Loading...":`Edit: ${n==null?void 0:n.description}`}),u.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Customize the email content. Leave empty to use system default."})]}),u.jsx("button",{onClick:t,className:"p-2 hover:bg-black/5 rounded-full text-text-secondary",children:u.jsx(Zr,{size:20})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:c?u.jsx("div",{className:"flex justify-center p-12",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Subject Line"}),u.jsx("input",{type:"text",value:a,onChange:P=>s(P.target.value),className:"w-full p-2 bg-background border border-border rounded-lg text-text-primary focus:ring-2 focus:ring-primary focus:border-transparent outline-none"})]}),(n==null?void 0:n.available_variables)&&n.available_variables.length>0&&u.jsxs("div",{className:"p-3 bg-blue-50/50 border border-blue-100 rounded-lg text-sm text-text-secondary",children:[u.jsx("span",{className:"font-semibold text-blue-600 block mb-1",children:"Available Variables:"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:n.available_variables.map(P=>u.jsx("code",{className:"px-1.5 py-0.5 bg-white border border-blue-200 rounded text-blue-800 text-xs cursor-pointer hover:bg-blue-50",onClick:()=>{navigator.clipboard.writeText(`{{${P}}}`),alert(`Copied {{${P}}} to clipboard!`)},title:"Click to copy",children:`{{${P}}}`},P))})]}),u.jsx("div",{className:"border border-border rounded-lg overflow-hidden min-h-[400px] flex flex-col",children:u.jsx(ahe,{content:o,onChange:l,placeholder:"Write your email content here..."})})]})}),u.jsxs("div",{className:"p-4 border-t border-border bg-surface-highlight rounded-b-xl flex justify-between items-center",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Revert to original system template",children:[u.jsx(ZE,{size:16}),u.jsx("span",{className:"hidden sm:inline",children:"Reset to Default"})]}),u.jsx("div",{className:"relative flex items-center",children:v?u.jsxs("div",{className:"flex items-center gap-2 bg-background border border-border rounded-lg p-1 animate-in fade-in slide-in-from-left-5",children:[u.jsx("input",{type:"email",placeholder:"your@email.com",value:m,onChange:P=>x(P.target.value),className:"text-sm bg-transparent outline-none px-2 w-48 text-text-primary"}),u.jsx("button",{onClick:N,className:"p-1.5 bg-primary text-white rounded hover:bg-primary-hover",children:u.jsx(sy,{size:14})}),u.jsx("button",{onClick:()=>b(!1),className:"p-1.5 text-text-secondary hover:text-text-primary",children:u.jsx(Zr,{size:14})})]}):u.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 px-3 py-2 text-sm text-text-secondary hover:bg-black/5 rounded-lg transition-colors",children:[u.jsx(sy,{size:16}),u.jsx("span",{className:"hidden sm:inline",children:"Send Test"})]})})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-text-secondary hover:text-text-primary transition-colors",children:"Cancel"}),u.jsx("button",{onClick:k,disabled:f||c,className:"flex items-center gap-2 px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-hover transition-colors font-medium disabled:opacity-50",children:f?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white/30 border-t-white"}),"Saving..."]}):u.jsxs(u.Fragment,{children:[u.jsx(vs,{size:18}),"Save Template"]})})]})]})]})]})}):null},yet={dailyUpdateTime:"07:00",timezone:"America/New_York",pastDueReminders:{isEnabled:!1,frequencyDays:2},upcomingJobReminders:{isEnabled:!1}},bet=["America/New_York","America/Chicago","America/Denver","America/Los_Angeles","America/Phoenix","America/Anchorage","Pacific/Honolulu"],wet=()=>{var b;const[e,t]=I.useState(yet),[r,n]=I.useState({emailUser:"",emailPass:""}),[i,a]=I.useState(!1),[s,o]=I.useState(!0),[l,c]=I.useState([]),[d,f]=I.useState(null);I.useEffect(()=>{(async()=>{try{const[k,E]=await Promise.all([KA("email"),KA("email_settings")]);t(N=>({...N,...k,dailyUpdateTime:k.dailyUpdateTime||N.dailyUpdateTime,timezone:k.timezone||N.timezone,pastDueReminders:{...N.pastDueReminders,...k.pastDueReminders||{}},upcomingJobReminders:{isEnabled:!1,...k.upcomingJobReminders||{}}})),n({emailUser:E.emailUser||"",emailPass:E.emailPass||""})}catch(k){console.error("Failed to fetch system email settings:",k),qr.error("Could not load system email settings.")}finally{o(!1)}})(),p()},[]);const p=async()=>{try{const w=await B1.getAll();c(w)}catch(w){console.error("Failed to fetch email templates:",w)}},m=(w,k)=>{if(w.startsWith("pastDueReminders.")){const E=w.split(".")[1];let N=k;E==="frequencyDays"&&(N=Math.max(1,parseInt(k,10)||1)),t(P=>({...P,pastDueReminders:{...P.pastDueReminders,[E]:N}}))}else if(w.startsWith("upcomingJobReminders.")){const E=w.split(".")[1];t(N=>({...N,upcomingJobReminders:{...N.upcomingJobReminders||{isEnabled:!1},[E]:k}}))}else t(E=>({...E,[w]:k}))},x=async()=>{const w=qr.loading("Sending test email...");try{await A6e(),qr.success("Test email sent!",{id:w})}catch{qr.error("Failed to send test email.",{id:w})}},v=async()=>{try{await Promise.all([Q6("email",e),Q6("email_settings",r)]),qr.success("System email settings saved successfully!")}catch(w){console.error("Failed to save system email settings:",w),qr.error("Failed to save system email settings.")}};return s?u.jsx("div",{className:"p-4 text-center text-text-secondary",children:"Loading system settings..."}):u.jsxs("section",{className:"md:bg-surface-container-low md:p-8 md:rounded-2xl md:border md:border-outline/10 max-w-5xl mx-auto transition-all",children:[u.jsxs("h2",{className:"text-2xl font-semibold text-text-primary mb-2 flex items-center gap-3",children:[u.jsx(Xc,{className:"w-7 h-7 text-accent"}),"System-Wide Email Settings"]}),u.jsx("p",{className:"text-text-secondary mb-6",children:"These settings are global and affect all users and automated emails sent to customers."}),u.jsxs("div",{className:"space-y-6 pt-6 mb-8",children:[u.jsxs("h3",{className:"text-lg font-medium text-text-primary mb-2 flex items-center gap-2",children:[u.jsx(N7,{className:"w-4 h-4 text-secondary"})," SMTP Credentials (Gmail)"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Gmail Address"}),u.jsx("input",{type:"email",value:r.emailUser,onChange:w=>n(k=>({...k,emailUser:w.target.value})),placeholder:"company@gmail.com",className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-all placeholder:text-text-tertiary"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"App Password"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:i?"text":"password",value:r.emailPass,onChange:w=>n(k=>({...k,emailPass:w.target.value})),placeholder:r.emailPass==="********"?"********":"Enter App Password",className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-all pr-10"}),u.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-text-secondary hover:text-text-primary",children:i?u.jsx(ooe,{size:16}):u.jsx(_7,{size:16})})]}),u.jsx("p",{className:"text-xs text-text-tertiary mt-1",children:'Use an "App Password" generated from your Google Account settings, not your login password.'})]})]}),u.jsx("div",{className:"mt-2 flex justify-end",children:u.jsxs("button",{onClick:x,type:"button",className:"text-sm flex items-center gap-2 text-primary hover:text-primary-hover font-bold bg-primary/5 hover:bg-primary/10 px-4 py-2 rounded-full transition-colors",children:[u.jsx(sy,{size:16})," Send Test Email"]})})]}),u.jsxs("div",{className:"space-y-6 border-t border-outline/10 pt-6 mb-8",children:[u.jsxs("h3",{className:"text-lg font-medium text-text-primary mb-2 flex items-center gap-2",children:[u.jsx(od,{className:"w-4 h-4 text-secondary"})," Company Communication Schedule"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"p-4 bg-surface-container-highest rounded-xl border border-outline/10 flex flex-col gap-2",children:[u.jsx("label",{className:"text-sm font-medium text-text-secondary",children:"Send daily updates at:"}),u.jsx("input",{type:"time",value:e.dailyUpdateTime||"07:00",onChange:w=>t(k=>({...k,dailyUpdateTime:w.target.value})),className:"p-2 bg-surface-container-low border border-outline/10 rounded-lg text-text-primary cursor-pointer w-full focus:border-primary focus:outline-none"})]}),u.jsxs("div",{className:"p-4 bg-surface-container-highest rounded-xl border border-outline/10 flex flex-col gap-2",children:[u.jsxs("label",{className:"text-sm font-medium text-text-secondary flex items-center gap-2",children:[u.jsx(Qg,{size:14})," Server Timezone"]}),u.jsx("select",{value:e.timezone||"America/New_York",onChange:w=>t(k=>({...k,timezone:w.target.value})),className:"p-2 bg-surface-container-low border border-outline/10 rounded-lg text-text-primary w-full focus:border-primary focus:outline-none",children:bet.map(w=>u.jsx("option",{value:w,children:w},w))})]})]})]}),u.jsxs("div",{className:"space-y-4 border-t border-outline/10 pt-6 mb-8",children:[u.jsx("h3",{className:"text-lg font-medium text-text-primary mb-2",children:"Customer Automations"}),u.jsxs("div",{className:"flex items-center justify-between py-4 border-b border-outline/10 md:bg-surface-container-highest md:border md:rounded-xl md:p-6 md:border-outline/10",children:[u.jsx("label",{htmlFor:"pastDueIsEnabled",className:"font-medium text-text-primary",children:"Enable Past Due Reminders"}),u.jsxs("div",{className:"relative inline-block w-14 h-8 align-middle select-none transition duration-200 ease-in",children:[u.jsx("input",{type:"checkbox",id:"pastDueIsEnabled",checked:e.pastDueReminders.isEnabled,onChange:w=>m("pastDueReminders.isEnabled",w.target.checked),className:"peer absolute block w-8 h-8 rounded-full bg-surface border-4 border-outline appearance-none cursor-pointer checked:right-0 checked:border-primary checked:bg-primary transition-all duration-200"}),u.jsx("label",{htmlFor:"pastDueIsEnabled",className:"block overflow-hidden h-8 rounded-full bg-surface-container-highest border border-outline/20 cursor-pointer peer-checked:bg-primary/20 transition-colors"})]})]}),e.pastDueReminders.isEnabled&&u.jsx("div",{className:"p-4 bg-surface-container-highest/50 rounded-xl border border-outline/10 ml-4 border-l-4 border-l-primary",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("label",{htmlFor:"pastDueFrequencyDays",className:"text-text-secondary",children:"Send reminder every"}),u.jsx("input",{type:"number",id:"pastDueFrequencyDays",value:e.pastDueReminders.frequencyDays,onChange:w=>m("pastDueReminders.frequencyDays",w.target.value),className:"w-20 p-1 bg-surface-container-low border border-outline/20 rounded text-text-primary text-center focus:border-primary focus:outline-none"}),u.jsx("label",{htmlFor:"pastDueFrequencyDays",className:"text-text-secondary",children:"days for overdue samples."})]})}),u.jsxs("div",{className:"flex items-center justify-between py-4 border-b border-outline/10 md:bg-surface-container-highest md:border md:rounded-xl md:p-6 md:border-outline/10",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("label",{htmlFor:"upcomingJobIsEnabled",className:"font-medium text-text-primary flex items-center gap-2",children:["Enable Upcoming Job Reminders ",u.jsx(xu,{size:16,className:"text-primary"})]}),u.jsx("span",{className:"text-sm text-text-secondary mt-1",children:"Automatically emails customers 2 business days before a job starts."})]}),u.jsxs("div",{className:"relative inline-block w-14 h-8 align-middle select-none transition duration-200 ease-in",children:[u.jsx("input",{type:"checkbox",id:"upcomingJobIsEnabled",checked:((b=e.upcomingJobReminders)==null?void 0:b.isEnabled)||!1,onChange:w=>m("upcomingJobReminders.isEnabled",w.target.checked),className:"peer absolute block w-8 h-8 rounded-full bg-surface border-4 border-outline appearance-none cursor-pointer checked:right-0 checked:border-primary checked:bg-primary transition-all duration-200"}),u.jsx("label",{htmlFor:"upcomingJobIsEnabled",className:"block overflow-hidden h-8 rounded-full bg-surface-container-highest border border-outline/20 cursor-pointer peer-checked:bg-primary/20 transition-colors"})]})]})]}),u.jsxs("div",{className:"space-y-6 border-t border-outline/10 pt-6",children:[u.jsxs("h3",{className:"text-lg font-medium text-text-primary mb-2 flex items-center gap-2",children:[u.jsx(x8e,{className:"w-4 h-4 text-secondary"})," Message Templates"]}),u.jsx("p",{className:"text-sm text-text-secondary",children:"Customize the automated emails sent by the system."}),u.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[l.map(w=>u.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface-container-highest border border-outline/10 rounded-xl hover:border-primary/50 transition-colors group",children:[u.jsxs("div",{children:[u.jsx("div",{className:"font-medium text-text-primary",children:w.description}),u.jsxs("div",{className:"text-xs text-text-secondary mt-0.5",children:["Subject: ",w.subject]})]}),u.jsx("button",{onClick:()=>f(w.key),className:"px-4 py-2 text-sm font-bold text-primary bg-surface-container-low border border-outline/10 rounded-full hover:bg-primary hover:text-on-primary transition-all opacity-100 md:opacity-0 md:group-hover:opacity-100",children:"Edit"})]},w.key)),l.length===0&&u.jsx("div",{className:"text-sm text-text-secondary italic p-4 text-center",children:"No templates loaded."})]})]}),u.jsx("div",{className:"mt-8 pt-6 border-t border-outline/10 flex justify-end",children:u.jsxs("button",{onClick:v,className:"flex items-center gap-2 py-3 px-8 text-base bg-primary hover:bg-primary-hover text-on-primary rounded-full font-bold shadow-sm transition-all hover:shadow-md",children:[u.jsx(vs,{size:18})," Save System Settings"]})}),d&&u.jsx(vet,{templateKey:d,onClose:()=>f(null),onSave:p})]})},Eet=()=>{const[e,t]=I.useState(!0),[r,n]=I.useState(!1),[i,a]=I.useState({retailMarkup:40,contractorMarkup:20,calculationMethod:"Markup"});I.useEffect(()=>{(async()=>{try{const c=await Dx();a({retailMarkup:c.retailMarkup??40,contractorMarkup:c.contractorMarkup??20,calculationMethod:c.calculationMethod??"Markup"})}catch(c){console.error("Failed to load pricing settings:",c),Re.error("Could not load pricing configuration.")}finally{t(!1)}})()},[]);const s=async()=>{n(!0);try{await T6e(i),Re.success("Pricing configuration saved.")}catch(l){console.error("Failed to save pricing:",l),Re.error("Failed to save changes.")}finally{n(!1)}},o=(l,c)=>{if(i.calculationMethod==="Markup")return(l*(1+c/100)).toFixed(2);{const d=c/100;return d>=1?"Error":(l/(1-d)).toFixed(2)}};return e?u.jsx("div",{className:"p-6 text-center text-text-secondary",children:"Loading configuration..."}):u.jsxs("section",{className:"md:bg-surface-container-low md:p-8 md:rounded-2xl md:border md:border-outline/10 max-w-4xl mx-auto transition-all",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-8 md:mb-8 pb-4 border-b border-outline/10",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-surface-container-high flex items-center justify-center text-primary",children:u.jsx(fS,{size:24,className:"text-primary"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Pricing Configuration"}),u.jsx("p",{className:"text-sm text-text-secondary",children:"Set the global defaults for product pricing."})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12",children:[u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Calculation Method"}),u.jsxs("div",{className:"flex bg-surface-container-highest p-1 rounded-full border border-outline/10",children:[u.jsx("button",{onClick:()=>a({...i,calculationMethod:"Markup"}),className:`flex-1 py-2 px-4 rounded-full text-sm font-bold transition-all ${i.calculationMethod==="Markup"?"bg-primary text-on-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,children:"Markup"}),u.jsx("button",{onClick:()=>a({...i,calculationMethod:"Margin"}),className:`flex-1 py-2 px-4 rounded-full text-sm font-bold transition-all ${i.calculationMethod==="Margin"?"bg-primary text-on-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,children:"Margin"})]}),u.jsx("p",{className:"text-xs text-text-secondary mt-2",children:i.calculationMethod==="Markup"?"Cost + (Cost  %)":"Cost  (100% - %)"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Default Retail Percentage"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"number",value:i.retailMarkup,onChange:l=>a({...i,retailMarkup:parseFloat(l.target.value)||0}),className:"w-full bg-surface-container-highest border-b-2 border-transparent rounded-t-lg py-3 pl-4 pr-10 text-text-primary focus:border-primary focus:outline-none transition-all"}),u.jsx("div",{className:"absolute right-3 top-2.5 text-text-secondary",children:u.jsx(Xq,{size:16})})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Default Contractor Percentage"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"number",value:i.contractorMarkup,onChange:l=>a({...i,contractorMarkup:parseFloat(l.target.value)||0}),className:"w-full bg-surface-container-highest border-b-2 border-transparent rounded-t-lg py-3 pl-4 pr-10 text-text-primary focus:border-primary focus:outline-none transition-all"}),u.jsx("div",{className:"absolute right-3 top-2.5 text-text-secondary",children:u.jsx(Xq,{size:16})})]})]}),u.jsxs("button",{onClick:s,disabled:r,className:"flex items-center justify-center w-full py-3 px-6 bg-primary hover:bg-primary-hover text-on-primary font-bold rounded-full transition-colors disabled:opacity-50 shadow-sm",children:[u.jsx(vs,{size:18,className:"mr-2"}),r?"Saving...":"Save Configuration"]})]}),u.jsxs("div",{className:"bg-surface-container-highest rounded-2xl border border-outline/10 p-6 flex flex-col justify-center",children:[u.jsxs("h3",{className:"text-sm font-bold text-text-primary mb-4 flex items-center gap-2",children:[u.jsx(k4,{size:16,className:"text-accent"})," Live Example"]}),u.jsxs("div",{className:"space-y-6 text-sm",children:[u.jsxs("div",{className:"p-4 bg-surface-container-low rounded-xl border border-outline/10 text-center",children:[u.jsx("p",{className:"text-text-secondary mb-1",children:"If Unit Cost is:"}),u.jsx("p",{className:"text-xl font-bold text-text-primary",children:"$100.00"})]}),u.jsxs("div",{className:"space-y-6 px-4",children:[u.jsxs("div",{className:"flex justify-between items-center border-b border-outline/10 pb-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-text-secondary text-xs uppercase tracking-wider mb-1",children:"Retail Price"}),u.jsxs("p",{className:"text-xs text-text-secondary",children:[i.calculationMethod," of ",i.retailMarkup,"%"]})]}),u.jsxs("p",{className:"text-2xl font-bold text-primary",children:["$",o(100,i.retailMarkup)]})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-text-secondary text-xs uppercase tracking-wider mb-1",children:"Contractor Price"}),u.jsxs("p",{className:"text-xs text-text-secondary",children:[i.calculationMethod," of ",i.contractorMarkup,"%"]})]}),u.jsxs("p",{className:"text-2xl font-bold text-secondary",children:["$",o(100,i.contractorMarkup)]})]})]})]})]})]})]})},jY=[{version:"Version 2.0",date:"December 27, 2025",title:"Establish Update Notifications",type:"feature",changes:["Created a system that checks in to a central location to determine if an update is available.","Users are presented with a link to update instructions.","Image downloads from Github."]},{version:"Session 34",date:"Current",title:"System Email Customization",type:"feature",changes:["Added 'Message Templates' to Settings > Communications.","Implemented a full Rich Text Editor for system emails.","Added variable support (e.g., {{customer_name}}) for dynamic content.","Created database-backed template storage with file-system fallbacks."]},{version:"Session 33",date:"Recent",title:"Connected Operating System",type:"major",changes:["Universal Search 2.0: Smart detection of products vs variants.","iCal Subscription: Sync Job/Delivery schedule to Google/Apple Calendar.","Pinned Job Notes: Highlight critical info (Gate Codes) in chat and calendar.","Dashboard Logistics: Visual 'Selected Variants' gallery and Date Ranges on cards.","Interactive Calendar Pop-ups: Preview events without page reloads."]},{version:"Session 32.5",date:"Mobile Sprint",title:"Native Android & Hardware Integration",type:"infrastructure",changes:["Native Android App (Capacitor) released.","Hardware Integration: 'Notch' handling, Safe Area layouts, and Back Button logic.","Warehouse Scanner: Rear-camera optimization, Flashlight toggle, and Laser UI.","Offline-Ready Architecture: 'Server Connect' screen for dynamic API URLs."]},{version:"Session 31",date:"Mobile Sprint",title:"Mobile UX & Calendar Overhaul",type:"feature",changes:["Mobile Agenda View: Replaced grid with a touch-friendly list for phones.","Advanced Filtering: Full-screen mobile filter for Users/Installers.","Full-Screen Sheets: Standardized modal interactions for small screens."]},{version:"Session 30",date:"Logistics Sprint",title:"Warehouse & Mobile Operations",type:"major",changes:["App-ification: Viewport locking and touch optimizations.","Receive Order 2.0: Mobile-first photo upload and file accumulation.","Mobile Dashboard: Expanded touch targets and simplified cards.","Fixed Timezone bugs causing dates to appear as 'Yesterday'."]},{version:"Session 29",date:"Workflow Sprint",title:"Advanced Logistics & Financials",type:"feature",changes:["Interest Tracking: Link specific colors to generic sample boards.","'Early Access' Jobs: Create notes/photos before a quote is accepted.","Financial Integration: Link Appointments to specific PO Numbers.","Direct Checkouts: Assign samples to Leads or Installers without a Project."]},{version:"Session 28",date:"Automation Sprint",title:"Automated Reminders & Printing",type:"feature",changes:["Automated Job Reminders: T-Minus 2 Day alerts for customers.","Team Calendar: Invite system with Accept/Decline status.","Printing Infrastructure: Unified Print Queue for labels/QR codes."]},{version:"Session 27",date:"Scheduling Sprint",title:"Robust Team Scheduling",type:"major",changes:["Fixed critical data-loss bug in Job Details save.","Event Visibility Rules: Public vs Private vs Invited.","Installer Management: Managed vs Unmanaged (Subcontractor) types."]},{version:"Session 26",date:"Data Sprint",title:"Supply Chain & Smart Forms",type:"feature",changes:["Supply Chain Logic: Auto-link Brands to Default Suppliers.","Smart Forms: Dynamic inputs for Tile (Packaging) vs Carpet (Rolls).","System Status Ticker: Real-time feedback bar in the header.","Vendor CRM: Digital footprint tracking (Portals/Websites)."]},{version:"Session 25",date:"Stability Sprint",title:"Infrastructure Repairs",type:"fix",changes:["Fixed Production File Upload paths.","Product Duplication: Deep-copy product lines and variants.","Unified Modals: Standardized Installer and Product editing.","Restored 'On-the-Fly' creation in Quick Checkout."]},{version:"Session 24",date:"Feature Sprint",title:"Knowledge Base (Wiki)",type:"major",changes:["Full CMS: Rich text editor with image resizing and tables.","Smart Linking: Use '[[' to link between articles.","Version History: 'Time Machine' to revert content changes.","Mobile-First Reading Experience."]},{version:"Session 21",date:"DevOps",title:"Zero-Config Setup",type:"infrastructure",changes:["Self-Healing Infrastructure.","First-Run Wizard for Admin setup.","Dynamic Database Initialization."]},{version:"Session 20",date:"Performance",title:"Performance Architecture",type:"infrastructure",changes:["React Query Migration: Instant cache-based navigation.","Virtualization: Rendering thousands of rows with zero lag.","Image Optimization Pipeline (Sharp)."]},{version:"Session 19",date:"Feature Sprint",title:"Intelligence & Collaboration",type:"major",changes:["Universal Import Tool: Excel/CSV parsing with column mapping.","Central Messaging: Direct Chat and Notifications.","Smart Mentions: Use @User, !Project, #Product in text.","Business Intelligence: Revenue trends and charts."]},{version:"Session 16",date:"Production",title:"Production Build",type:"infrastructure",changes:["Discontinued Samples subsystem.","Monolith Container architecture.","Hardened Backup & Restore tools."]},{version:"Session 15",date:"UI Sprint",title:"Branding & Theming",type:"feature",changes:["White-Label Engine: Custom Logo and Favicon uploads.","Theme Engine: Semantic CSS variables for Light/Dark modes.","System-wide UI refactor ('The Scrub')."]},{version:"Session 14",date:"Feature Sprint",title:"User Identity & Pricing",type:"major",changes:["User Profiles: Avatars and Name management.","Pricing Engine: Cost vs Retail with Markup/Margin logic.","Product Variants: Advanced packaging data (Cartons/SF).","Advanced Material Ordering with Unit Conversion."]},{version:"Session 13",date:"Feature Sprint",title:"Email Automation",type:"feature",changes:["Internal Daily Update emails.","Automated Customer Reminders (Due Tomorrow/Past Due).","System vs User Preference architecture split."]},{version:"Session 12",date:"Feature Sprint",title:"Calendar & Appointments",type:"major",changes:["User-Specific Calendar Colors.","Multi-Entity Attendees (Users + Installers).","Unified Calendar Filter."]},{version:"Session 11",date:"UI Sprint",title:"Project Dashboard Refactor",type:"feature",changes:["Draggable/Resizable Dashboard Widgets.","Edit Mode with user preference persistence.","Grid Layout implementation."]},{version:"Session 10",date:"Data Sprint",title:"Intelligent Sample Data",type:"major",changes:["Multi-Size Bubble Selector.","Administrative Size Management.","Massive refactor of Sample Data Model."]},{version:"Session 9",date:"UI Sprint",title:"Scheduling Refactor",type:"major",changes:["Job Appointments Table (Multi-day jobs).","Dashboard Carousels (Active Pipeline).","Installer Search."]},{version:"Session 8",date:"Security Sprint",title:"RBAC & Auditing",type:"major",changes:["Role-Based Access Control (Admin vs User).","User Management UI.","Full-Stack Auditing System.","Customer Creation validation overhaul."]},{version:"Session 7",date:"Stability Sprint",title:"Full-Stack Stabilization",type:"fix",changes:["Fixed Quote Acceptance workflow.","Solved 'Reload Loop' (Caddy/Vite websocket fix).","Unified 'On-the-Fly' creation UI."]},{version:"Session 6",date:"Auth Sprint",title:"Authentication",type:"infrastructure",changes:["Implemented SuperTokens for secure login.","Transitioned from single-user to multi-user architecture."]},{version:"Session 5",date:"Feature Sprint",title:"Vendor Management",type:"major",changes:["Dedicated Vendor Directory.","Intelligent Autofill for Orders.","Deep integration with Products and Samples."]},{version:"Session 4",date:"Ops Sprint",title:"Backup & Restore",type:"feature",changes:["Full Database Backup/Restore tools.","Image Archive handling.","Extend Checkout functionality."]},{version:"Session 3",date:"Foundational",title:"Core Architecture",type:"major",changes:["Full-Stack Refactor (Service Layer).","Quick Checkout & QR Code System.","Installation Types logic.","Mobile Responsiveness."]}],Cet={major:goe,feature:xoe,fix:u8e,infrastructure:eC},ket={major:"text-on-tertiary-container bg-tertiary-container border-tertiary-container/50",feature:"text-on-secondary-container bg-secondary-container border-secondary-container/50",fix:"text-on-primary-container bg-primary-container border-primary-container/50",infrastructure:"text-text-secondary bg-surface-container-highest border-outline/50"},_et=()=>{const[e,t]=I.useState(""),r=I.useMemo(()=>{if(!e)return jY;const n=e.toLowerCase();return jY.filter(i=>i.title.toLowerCase().includes(n)||i.version.toLowerCase().includes(n)||i.changes.some(a=>a.toLowerCase().includes(n)))},[e]);return u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"mb-8 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"System Updates"}),u.jsx("p",{className:"text-text-secondary",children:"Track the evolution of the platform."})]}),u.jsxs("div",{className:"relative w-full md:w-80",children:[u.jsx(Wo,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-secondary",size:20}),u.jsx("input",{type:"text",placeholder:"Search changes...",value:e,onChange:n=>t(n.target.value),className:"w-full pl-12 pr-6 py-3 bg-surface-container-high border-none rounded-full text-text-primary focus:ring-2 focus:ring-primary/50 outline-none transition-shadow shadow-sm hover:shadow-md placeholder:text-text-tertiary"})]})]}),u.jsxs("div",{className:"relative border-l-2 border-outline/10 ml-3 md:ml-6 space-y-12 pb-12",children:[r.map((n,i)=>{const a=Cet[n.type]||w8e,s=i===0&&!e;return u.jsxs("div",{className:"relative pl-6 md:pl-12",children:[u.jsx("div",{className:`absolute -left-[9px] top-0 md:top-6 w-5 h-5 rounded-full border-2 border-surface flex items-center justify-center z-10 ${s?"bg-primary scale-125":"bg-surface-container-highest text-text-secondary border-outline/20"}`,children:s?u.jsx("div",{className:"w-2 h-2 bg-on-primary rounded-full animate-pulse"}):null}),u.jsxs("div",{className:`group relative transition-all md:p-6 md:rounded-2xl md:border ${s?"md:bg-surface-container-high md:border-primary/40 md:shadow-lg md:shadow-primary/10":"md:bg-surface-container-low md:border-outline/10 hover:md:border-primary/40 hover:md:shadow-md"}`,children:[u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-2 md:gap-4 mb-3 md:mb-4",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[u.jsxs("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full border capitalize flex items-center gap-1.5 ${ket[n.type]}`,children:[u.jsx(a,{size:12}),n.type]}),u.jsx("span",{className:"text-sm font-mono text-text-tertiary",children:n.version})]}),u.jsx("h3",{className:"text-lg font-bold text-text-primary mt-1",children:n.title})]}),u.jsx("div",{className:"text-xs md:text-sm text-text-secondary font-medium bg-surface-container-highest self-start md:self-auto px-3 py-1 rounded-lg border border-outline/10",children:n.date})]}),u.jsx("ul",{className:"space-y-3 md:space-y-2 pl-1",children:n.changes.map((o,l)=>u.jsxs("li",{className:"flex items-start gap-3 text-text-secondary group-hover:text-text-primary transition-colors",children:[u.jsx("span",{className:"mt-2.5 md:mt-2 w-1.5 h-1.5 rounded-full bg-outline/30 group-hover:bg-primary shrink-0 transition-colors"}),u.jsx("span",{className:"leading-relaxed",children:o})]},l))})]})]},n.version)}),r.length===0&&u.jsx("div",{className:"pl-12 text-text-secondary italic",children:"No updates found matching your search."})]})]})},Net=async()=>{const e=await fetch(rr("/api/media"),{headers:{"Content-Type":"application/json"}});if(!e.ok){const t=await e.json().catch(()=>({error:"Failed to fetch media assets"}));throw new Error(t.error)}return e.json()},Aet=async e=>{const t=await fetch(rr("/api/media"),{method:"POST",body:e});if(!t.ok){const r=await t.json().catch(()=>({error:"Failed to upload media asset"}));throw new Error(r.error)}return t.json()},Tet=async e=>{const t=await fetch(rr(`/api/media/${e}`),{method:"DELETE"});if(!t.ok){const r=await t.json().catch(()=>({error:"Failed to delete media asset"}));throw new Error(r.error)}},Iet=()=>Us({queryKey:["mediaAssets"],queryFn:Net,staleTime:1e3*60*5}),Oet=()=>{const e=Da();return Tr({mutationFn:t=>Aet(t),onSuccess:()=>{Re.success("Media asset uploaded successfully!"),e.invalidateQueries({queryKey:["mediaAssets"]})},onError:t=>{Re.error(`Upload failed: ${t.message}`)}})},Pet=()=>{const e=Da();return Tr({mutationFn:t=>Tet(t),onSuccess:()=>{Re.success("Media asset deleted."),e.invalidateQueries({queryKey:["mediaAssets"]})},onError:t=>{Re.error(`Delete failed: ${t.message}`)}})},Ret=({asset:e})=>{const t=e.fileType.startsWith("image/"),r=e.thumbnailPath||e.filePath,n=e.usageCount===0;return u.jsxs("div",{className:"group relative aspect-square flex flex-col rounded-xl border border-outline/10 bg-surface-container-low shadow-sm transition-all hover:shadow-md hover:border-outline/50",children:[u.jsx("div",{className:"relative flex-1 overflow-hidden rounded-t-xl",children:t?u.jsx("img",{src:Ia(r),alt:e.filePath,className:"h-full w-full object-cover"}):u.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center bg-surface-container text-text-secondary",children:[u.jsx(Jc,{className:"h-1/3 w-1/3 opacity-50"}),u.jsx("span",{className:"mt-2 text-xs font-mono uppercase tracking-widest",children:e.fileType.split("/")[1]||"File"})]})}),u.jsxs("div",{className:"p-2 text-xs",children:[u.jsx("p",{className:"truncate font-mono text-text-secondary",title:e.filePath,children:e.filePath}),u.jsxs("p",{className:`mt-1 flex items-center gap-1.5 font-semibold ${n?"text-text-tertiary":"text-primary"}`,children:[u.jsx(Fx,{size:12}),u.jsxs("span",{children:["In Use: ",e.usageCount]})]})]})]})},jet=["branding","avatars","jobs","products","misc"],Det=({isOpen:e,onClose:t})=>{const[r,n]=I.useState(null),[i,a]=I.useState("misc"),[s,o]=I.useState(null),[l,c]=I.useState(!1),d=Oet(),f=w=>{if(w)if(n(w),w.type.startsWith("image/")){const k=new FileReader;k.onloadend=()=>{o(k.result)},k.readAsDataURL(w)}else o(null)},p=I.useCallback(()=>{n(null),o(null),a("misc"),d.reset()},[d]),m=()=>{p(),t()},x=async w=>{if(w.preventDefault(),!r||!i||d.isPending)return;const k=new FormData;k.append("file",r),k.append("category",i),d.mutate(k,{onSuccess:()=>{m()}})},v=(w,k)=>{w.preventDefault(),w.stopPropagation(),c(k)},b=w=>{v(w,!1),w.dataTransfer.files&&w.dataTransfer.files[0]&&f(w.dataTransfer.files[0])};return e?u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-scrim/80 p-4",children:u.jsxs("div",{className:"relative w-full max-w-lg rounded-2xl bg-surface-container-high shadow-xl border border-outline/20",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-outline/10",children:[u.jsx("h2",{className:"text-lg font-bold text-text-primary",children:"Upload New Media"}),u.jsx("button",{onClick:m,className:"rounded-full p-2 hover:bg-surface-container-highest",children:u.jsx(Zr,{size:20,className:"text-text-secondary"})})]}),u.jsxs("form",{onSubmit:x,children:[u.jsxs("div",{className:"p-6 space-y-4",children:[u.jsxs("div",{onDragEnter:w=>v(w,!0),onDragLeave:w=>v(w,!1),onDragOver:w=>w.preventDefault(),onDrop:b,className:`relative flex flex-col items-center justify-center rounded-xl border-2 border-dashed p-8 text-center transition-colors
                ${l?"border-primary bg-primary/10":"border-outline/50 bg-surface-container"}`,children:[u.jsx(soe,{size:40,className:"text-primary"}),u.jsxs("p",{className:"mt-2 font-semibold text-text-primary",children:["Drag & drop file or"," ",u.jsxs("label",{className:"cursor-pointer text-primary underline hover:text-primary-hover",children:["browse",u.jsx("input",{type:"file",className:"hidden",onChange:w=>{var k;return f(((k=w.target.files)==null?void 0:k[0])||null)}})]})]}),u.jsx("p",{className:"text-xs text-text-secondary",children:"Any file type supported"})]}),r&&u.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-outline/20 bg-surface-container p-3",children:[u.jsx("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-md bg-surface-container-lowest",children:s?u.jsx("img",{src:s,alt:"Preview",className:"h-full w-full rounded-md object-cover"}):u.jsx(loe,{size:24,className:"text-text-secondary"})}),u.jsxs("div",{className:"flex-1 overflow-hidden",children:[u.jsx("p",{className:"truncate font-medium text-text-primary",children:r.name}),u.jsxs("p",{className:"text-xs text-text-secondary",children:[(r.size/1024).toFixed(2)," KB"]})]}),u.jsx("button",{type:"button",onClick:()=>f(null),className:"rounded-full p-1 text-text-secondary hover:bg-surface-container-highest",children:u.jsx(Zr,{size:16})})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"category",className:"mb-1 block text-sm font-medium text-text-secondary",children:"Category"}),u.jsx("select",{id:"category",value:i,onChange:w=>a(w.target.value),className:"w-full rounded-lg border border-outline/50 bg-surface-container px-3 py-2.5 text-text-primary outline-none focus:ring-2 focus:ring-primary/50",children:jet.map(w=>u.jsx("option",{value:w,className:"capitalize",children:w.charAt(0).toUpperCase()+w.slice(1)},w))})]})]}),u.jsxs("div",{className:"flex justify-end gap-3 rounded-b-2xl border-t border-outline/10 bg-surface-container p-4",children:[u.jsx("button",{type:"button",onClick:m,className:"rounded-full border border-outline px-6 py-2.5 text-sm font-semibold text-text-primary transition-colors hover:bg-surface-container-highest",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:!r||!i||d.isPending,className:"flex items-center justify-center rounded-full bg-primary px-6 py-2.5 text-sm font-semibold text-on-primary shadow-sm transition-opacity hover:bg-primary-hover disabled:cursor-not-allowed disabled:opacity-50",children:d.isPending?u.jsxs(u.Fragment,{children:[u.jsx(I0,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):"Upload File"})]})]})]})}):null},Met=({asset:e,onClose:t})=>{const{mutateAsync:r}=Pet(),n=new Date(e.createdAt).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}),i=e.filePath.split("/").pop()||"Unknown File",a=async()=>{let s=`Are you sure you want to delete this file?

This action cannot be undone.`;e.usageCount>0&&(s=` WARNING: This image is currently active in ${e.usageCount} place(s).

Deleting it will break images in those records.

Delete anyhow?`),window.confirm(s)&&(await r(e.id),t())};return u.jsxs("div",{className:`
      /* Mobile: Full Screen Overlay */
      fixed inset-0 z-[60] bg-background flex flex-col
      /* Desktop: Embedded Container (overrides fixed/inset/z-index) */
      md:static md:z-0 md:h-[700px] md:bg-surface-container-low md:rounded-2xl md:border md:border-outline-variant md:overflow-hidden
    `,children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-outline-variant bg-surface md:bg-surface-container-low",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:t,className:"p-2 -ml-2 rounded-full hover:bg-surface-container-highest transition-colors text-on-surface",children:u.jsx(id,{size:24})}),u.jsx("h3",{className:"text-lg font-semibold text-text-primary truncate max-w-[200px] md:max-w-md",children:i})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-error-container hover:text-error transition-colors text-secondary",title:"Delete File",children:u.jsx(mo,{size:20})}),u.jsx("a",{href:Ia(e.filePath),download:!0,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full hover:bg-surface-container-highest transition-colors text-primary",title:"Open Original",children:u.jsx(JE,{size:20})})]})]}),u.jsx("div",{className:"flex-1 relative overflow-hidden bg-black/5 flex items-center justify-center p-4",children:u.jsx("img",{src:Ia(e.filePath),alt:"Preview",className:"max-w-full max-h-full object-contain shadow-lg rounded-sm"})}),u.jsx("div",{className:"bg-surface-container p-4 md:p-6 border-t border-outline-variant",children:u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-8",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-xs uppercase font-bold tracking-wider",children:[u.jsx(e8,{size:14}),"Category"]}),u.jsx("div",{className:"text-text-primary font-medium capitalize",children:e.category})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-xs uppercase font-bold tracking-wider",children:[u.jsx(b8e,{size:14}),"Type"]}),u.jsx("div",{className:"text-text-primary font-medium uppercase",children:e.fileType.replace(".","")})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-xs uppercase font-bold tracking-wider",children:[u.jsx(pd,{size:14}),"Usage"]}),u.jsx("div",{className:"text-text-primary font-medium",children:e.usageCount===0?"Unused":`In Use (${e.usageCount})`})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-xs uppercase font-bold tracking-wider",children:[u.jsx(xu,{size:14}),"Uploaded"]}),u.jsx("div",{className:"text-text-primary font-medium",children:n})]})]})})]})},Fet=()=>{const{data:e,isLoading:t,isError:r,error:n}=Iet(),[i,a]=I.useState(!1),[s,o]=I.useState(null);return s?u.jsx(Met,{asset:s,onClose:()=>o(null)}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Media Library"}),u.jsx("p",{className:"mt-1 text-text-secondary",children:"Manage all uploaded images, documents, and other files across the system."})]}),u.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 rounded-full bg-primary px-4 py-2 text-sm font-semibold text-on-primary shadow-sm transition-colors hover:bg-primary-hover",children:[u.jsx(ob,{size:16}),"Upload Media"]})]}),t&&u.jsx("div",{className:"flex justify-center items-center h-64",children:u.jsx(I0,{className:"w-8 h-8 animate-spin text-primary"})}),r&&u.jsxs("div",{className:"rounded-xl border border-error-container bg-error-container/20 p-8 text-center text-on-error-container",children:[u.jsx(ld,{className:"w-12 h-12 mx-auto"}),u.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"Could not load media assets"}),u.jsx("p",{className:"mt-2 text-sm",children:(n==null?void 0:n.message)||"An unknown error occurred."})]}),e&&u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:e.map(l=>u.jsx("div",{onClick:()=>o(l),className:"cursor-pointer transition-transform hover:scale-[1.02] active:scale-95",children:u.jsx(Ret,{asset:l})},l.id))}),u.jsx(Det,{isOpen:i,onClose:()=>a(!1)})]})},kw=[{id:"personal",label:"My Settings",tabs:[{id:"mySettings",label:"Profile",icon:z8e,adminOnly:!1},{id:"notifications",label:"Notifications",icon:uS,adminOnly:!1}]},{id:"communications",label:"Communications",tabs:[{id:"email",label:"Email Settings",icon:Xc,adminOnly:!0}]},{id:"product",label:"Product Management",tabs:[{id:"pricing",label:"Pricing",icon:fS,adminOnly:!0},{id:"data",label:"Data Management",icon:v8e,adminOnly:!0}]},{id:"system",label:"System",tabs:[{id:"media",label:"Media Library",icon:Jd,adminOnly:!0},{id:"branding",label:"Branding",icon:aoe,adminOnly:!0},{id:"users",label:"Users",icon:ex,adminOnly:!0},{id:"backup",label:"Backup",icon:dS,adminOnly:!0},{id:"changelog",label:"What's New",icon:poe,adminOnly:!1}]}],Let=()=>{var p,m;const{currentUser:e}=Gr(),t=(p=e==null?void 0:e.roles)==null?void 0:p.includes("Admin"),[r,n]=I.useState("mySettings"),i=kw.flatMap(x=>x.tabs),a=kw.find(x=>x.tabs.some(v=>v.id===r))||kw[0],[s,o]=I.useState(!0);I.useEffect(()=>{const x=i.find(v=>v.id===r);x!=null&&x.adminOnly&&!t&&n("mySettings")},[t,r,i]);const l=()=>{switch(r){case"mySettings":return u.jsx(fWe,{});case"notifications":return u.jsx(vWe,{});case"email":return u.jsx(wet,{});case"pricing":return u.jsx(Eet,{});case"branding":return u.jsx(cWe,{});case"users":return u.jsx(oWe,{});case"data":return u.jsx(hWe,{});case"backup":return u.jsx(dWe,{});case"changelog":return u.jsx(_et,{});case"media":return u.jsx(Fet,{});default:return null}},c=x=>{n(x),o(!1),window.scrollTo({top:0,behavior:"smooth"})},d=()=>{o(!0)},f=(m=i.find(x=>x.id===r))==null?void 0:m.label;return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"px-1 flex items-center gap-4",children:[u.jsx("button",{onClick:d,className:`md:hidden p-2 -ml-2 rounded-full hover:bg-surface-container-highest transition-colors ${s?"hidden":"block"}`,children:u.jsx(id,{className:"w-6 h-6 text-text-primary"})}),u.jsx("div",{className:`w-12 h-12 bg-primary-container rounded-full flex items-center justify-center flex-shrink-0 text-primary ${s?"flex":"hidden md:flex"}`,children:u.jsx(eC,{className:"w-6 h-6"})}),u.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-text-primary tracking-tight",children:s?"Settings":f})]}),u.jsxs("div",{className:"hidden md:block space-y-6",children:[u.jsx("div",{className:"flex border-b border-outline/10 overflow-x-auto",children:kw.map(x=>{const v=x.tabs.filter(w=>!w.adminOnly||t);if(v.length===0)return null;const b=a.id===x.id;return u.jsx("button",{onClick:()=>n(v[0].id),className:`px-6 py-3 text-sm font-bold uppercase tracking-wider transition-colors whitespace-nowrap border-b-2 mb-[-2px]
                                    ${b?"text-primary border-primary":"text-text-secondary border-transparent hover:text-text-primary hover:border-outline/20"}`,children:x.label},x.id)})}),u.jsx("div",{className:"flex flex-wrap gap-2",children:a.tabs.map(x=>{if(x.adminOnly&&!t)return null;const v=r===x.id,b=x.icon;return u.jsxs("button",{onClick:()=>n(x.id),className:`flex items-center px-5 py-2 rounded-full text-sm font-medium transition-colors border shadow-sm
                                    ${v?"bg-primary text-on-primary border-transparent":"bg-surface-container-high text-text-secondary border-outline/10 hover:border-primary/50 hover:text-text-primary"}
                                `,children:[b&&u.jsx(b,{className:"w-4 h-4 mr-2"}),x.label]},x.id)})})]}),u.jsx("div",{className:`md:hidden space-y-6 ${s?"block":"hidden"}`,children:kw.map(x=>{const v=x.tabs.filter(b=>!b.adminOnly||t);return v.length===0?null:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"px-4 text-xs font-bold text-primary uppercase tracking-wider",children:x.label}),u.jsx("div",{className:"bg-surface-container-low rounded-2xl overflow-hidden shadow-sm border border-outline/10 divide-y divide-outline/10",children:v.map(b=>{const w=b.icon;return u.jsxs("button",{onClick:()=>c(b.id),className:"w-full flex items-center p-4 hover:bg-surface-container-highest transition-colors active:bg-primary/5",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-surface-container flex items-center justify-center mr-4 text-primary",children:w&&u.jsx(w,{className:"w-5 h-5"})}),u.jsx("span",{className:"flex-1 text-left text-base font-medium text-text-primary",children:b.label}),u.jsx(sd,{className:"w-5 h-5 text-outline/40"})]},b.id)})})]},x.id)})}),u.jsx("div",{className:`
                bg-surface-container-high rounded-2xl shadow-sm overflow-hidden border border-outline/10 min-h-[400px]
                ${s?"hidden md:block":"block"}
            `,children:u.jsx("div",{className:"p-4 md:p-8",children:u.jsx(l,{})})})]})},Bet=()=>{const{data:e=[]}=y4(),{vendors:t}=Gr(),r=qMe(),[n,i]=I.useState(!1),[a,s]=I.useState(null),[o,l]=I.useState(""),c=I.useMemo(()=>{if(!o)return e;const m=o.toLowerCase();return e.filter(x=>x.name.toLowerCase().includes(m)||x.repName&&x.repName.toLowerCase().includes(m))},[e,o]),d=m=>{s(null),i(!0)},f=()=>{s(null),i(!1)},p=async m=>{try{if("id"in m){const{id:x,...v}=m;await r.updateVendor.mutateAsync({id:x,data:v}),Re.success("Vendor updated successfully!")}else await r.addVendor.mutateAsync(m),Re.success("Vendor added successfully!");f()}catch(x){console.error("Failed to save vendor:",x),Re.error(x.message||"Failed to save vendor.")}};return u.jsxs("div",{className:"container mx-auto",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 px-1 mb-8",children:[u.jsx("h1",{className:"text-4xl font-bold text-text-primary tracking-tight",children:"Vendor Directory"}),u.jsxs("button",{onClick:()=>d(),className:"flex items-center gap-2 bg-primary hover:bg-primary-hover text-on-primary font-semibold py-3 px-6 rounded-full transition-all shadow-lg hover:shadow-xl",children:[u.jsx(su,{size:20}),"Add Vendor"]})]}),u.jsxs("div",{className:"relative w-full max-w-2xl mb-8",children:[u.jsx(Wo,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-secondary",size:20}),u.jsx("input",{type:"text",placeholder:"Search by vendor name or rep name...",value:o,onChange:m=>l(m.target.value),className:"w-full pl-12 pr-6 py-4 bg-surface-container-high border-none rounded-full text-text-primary focus:ring-2 focus:ring-primary/50 outline-none transition-shadow shadow-sm hover:shadow-md placeholder:text-text-tertiary"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(m=>{var x;return u.jsx(ai,{to:`/vendors/${m.id}`,className:"bg-surface-container-high rounded-xl shadow-sm border border-outline/10 p-6 flex flex-col justify-between hover:shadow-md transition-all duration-200 group",children:u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary mb-2 group-hover:text-primary truncate flex-1 pr-2 transition-colors",children:m.name}),u.jsxs("div",{className:"flex gap-1",children:[m.portalUrl&&u.jsx("a",{href:m.portalUrl,target:"_blank",rel:"noopener noreferrer",onClick:v=>v.stopPropagation(),className:"p-1.5 text-text-tertiary hover:text-primary hover:bg-primary-container rounded-full transition-colors",title:"Open Dealer Portal",children:u.jsx(Fx,{size:16})}),m.websiteUrl&&u.jsx("a",{href:m.websiteUrl,target:"_blank",rel:"noopener noreferrer",onClick:v=>v.stopPropagation(),className:"p-1.5 text-text-tertiary hover:text-primary hover:bg-primary-container rounded-full transition-colors",title:"Open Website",children:u.jsx(Qg,{size:16})})]})]}),u.jsxs("div",{className:"flex items-center flex-wrap gap-2 text-sm text-text-secondary mb-5",children:[(m.vendorType==="Manufacturer"||m.vendorType==="Both")&&u.jsxs("span",{className:"flex items-center gap-1.5 bg-surface-container px-2 py-1 rounded-md border border-outline/10",children:[u.jsx(Yg,{size:14})," Manufacturer"]}),(m.vendorType==="Supplier"||m.vendorType==="Both")&&u.jsxs("span",{className:"flex items-center gap-1.5 bg-surface-container px-2 py-1 rounded-md border border-outline/10",children:[u.jsx(O0,{size:14})," Supplier"]}),(m.vendorType==="Manufacturer"||m.vendorType==="Both")&&u.jsxs("span",{className:"flex items-center gap-1.5 bg-primary-container text-primary px-2 py-0.5 rounded-full text-xs font-bold ml-auto",children:[u.jsx(pd,{size:12})," ",m.sampleCount||0," Samples"]})]}),m.defaultSupplierId&&u.jsxs("div",{className:"mb-4 text-sm text-text-secondary bg-surface-container-low p-3 rounded-lg border border-outline/5",children:["Distributor: ",u.jsx("span",{className:"font-medium text-text-primary",children:(x=t.find(v=>v.id===m.defaultSupplierId))==null?void 0:x.name})]}),u.jsx("p",{className:"text-sm text-text-secondary mb-1",children:m.address}),u.jsx("p",{className:"text-sm text-text-secondary",children:m.phone}),(m.repName||m.repPhone)&&u.jsxs("div",{className:"mt-4 pt-4 border-t border-outline/10",children:[u.jsx("p",{className:"font-semibold text-text-primary",children:m.repName}),u.jsx("p",{className:"text-sm text-text-secondary",children:m.repPhone})]})]})},m.id)})}),c.length===0&&u.jsx("div",{className:"text-center py-10 col-span-full",children:u.jsx("p",{className:"text-text-secondary",children:o?"No vendors match your search.":"No vendors found."})}),u.jsx(cb,{isOpen:n,onClose:f,onSave:p,vendorToEdit:a})]})},Uet=({vendor:e})=>u.jsxs(ai,{to:`/vendors/${e.id}`,className:"block bg-surface p-4 rounded-lg shadow-md hover:shadow-lg hover:bg-background border border-border transition-all duration-300 w-80 flex-shrink-0",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsx("h3",{className:"font-bold text-lg text-text-primary truncate pr-2",children:e.name}),u.jsx(sd,{className:"w-5 h-5 text-accent flex-shrink-0"})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs text-text-secondary mb-3",children:[e.vendorType==="Manufacturer"&&u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(Yg,{size:12})," Manufacturer"]}),e.vendorType==="Both"&&u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(Yg,{size:12})," Mfg & Dist"]}),u.jsxs("span",{className:"flex items-center gap-1 bg-background/50 px-2 py-0.5 rounded-full border border-border",children:[u.jsx(pd,{size:12})," ",e.sampleCount||0," Products"]})]}),u.jsxs("div",{className:"text-sm text-text-secondary space-y-1",children:[u.jsx("p",{className:"truncate",children:e.repName||"No Rep Listed"}),u.jsx("p",{className:"truncate",children:e.phone||e.orderingEmail||"No Contact Info"})]})]}),$et=({title:e,vendors:t})=>t.length===0?null:u.jsxs("div",{className:"mb-8",children:[u.jsx("h2",{className:"text-xl font-bold mb-4 text-text-primary",children:e}),u.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 scrollbar-thin scrollbar-thumb-border scrollbar-track-transparent",children:t.map(r=>u.jsx(Uet,{vendor:r},r.id))})]}),zet=()=>{const{vendorId:e}=wx(),{vendors:t,products:r,isLoading:n,updateVendor:i}=Gr(),[a,s]=I.useState(null),[o,l]=I.useState(""),[c,d]=I.useState("All"),[f,p]=I.useState(null),[m,x]=I.useState(!1),[v,b]=I.useState(!1);I.useEffect(()=>{Dx().then(s).catch(console.error)},[]);const w=I.useMemo(()=>t.find(H=>H.id===parseInt(e||"")),[t,e]),k=I.useMemo(()=>w!=null&&w.defaultSupplierId?t.find(H=>H.id===w.defaultSupplierId):null,[w,t]),E=I.useMemo(()=>t.filter(H=>H.defaultSupplierId===(w==null?void 0:w.id)),[w,t]),N=I.useMemo(()=>w?r.filter(H=>H.manufacturerId===w.id):[],[w,r]),P=I.useMemo(()=>{let H=N;if(c!=="All"&&(H=H.filter(te=>te.productType===c)),o){const te=o.toLowerCase();H=H.filter(Y=>{const W=Y.name.toLowerCase().includes(te),Z=Y.variants.some(re=>re.name&&re.name.toLowerCase().includes(te)||re.sku&&re.sku.toLowerCase().includes(te));return W||Z})}return H},[N,c,o]),R=I.useMemo(()=>[...new Set(N.map(H=>H.productType).filter(Boolean))].sort(),[N]),O=H=>{p(H),x(!0)},D=()=>{p(null),x(!1)},L=async H=>{try{await i(H),Re.success("Vendor updated successfully!"),b(!1)}catch(te){console.error("Failed to save vendor:",te),Re.error(te.message||"Failed to save vendor.")}};if(n)return u.jsx("div",{className:"text-center p-8 text-text-secondary",children:"Loading vendor details..."});if(!w)return u.jsx("div",{className:"text-center p-8 text-text-secondary",children:"Vendor not found."});const B=w.vendorType==="Manufacturer"||w.vendorType==="Both",z=w.vendorType==="Supplier"||w.vendorType==="Both";return u.jsxs("div",{className:"container mx-auto space-y-8",children:[u.jsx("div",{className:"bg-surface-container-high p-8 rounded-xl shadow-sm border border-outline/10",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:w.name}),u.jsxs("div",{className:"flex items-center flex-wrap gap-x-4 gap-y-2 text-sm text-text-secondary mt-2 font-medium",children:[B&&u.jsxs("span",{className:"flex items-center gap-2 px-3 py-1 rounded-full bg-surface-container border border-outline/10",children:[u.jsx(Yg,{size:14})," Manufacturer"]}),z&&u.jsxs("span",{className:"flex items-center gap-2 px-3 py-1 rounded-full bg-surface-container border border-outline/10",children:[u.jsx(O0,{size:14})," Supplier"]})]})]}),u.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 bg-primary-container hover:bg-primary text-primary hover:text-on-primary font-semibold py-2 px-6 rounded-full transition-all shadow-sm",children:[u.jsx(Xh,{size:18}),"Edit Vendor"]})]})}),z&&E.length>0&&u.jsx($et,{title:"Supplied Manufacturers",vendors:E}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:[u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-xl border border-outline/10 shadow-sm",children:[u.jsx("h3",{className:"font-semibold text-xl mb-4 text-text-primary",children:"Contact Information"}),u.jsxs("div",{className:"space-y-3 text-text-secondary",children:[u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Address:"})," ",w.address||"N/A"]}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(y0,{size:14})," ",w.phone||"N/A"]}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(Xc,{size:14})," Ordering: ",w.orderingEmail||"N/A"]}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(Xc,{size:14})," Claims: ",w.claimsEmail||"N/A"]}),(w.websiteUrl||w.portalUrl)&&u.jsxs("div",{className:"pt-2 mt-2 border-t border-outline/10 space-y-2",children:[w.websiteUrl&&u.jsxs("a",{href:w.websiteUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-primary hover:underline font-medium",children:[u.jsx(Qg,{size:14})," Website"]}),w.portalUrl&&u.jsxs("a",{href:w.portalUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-primary hover:underline font-medium",children:[u.jsx(Fx,{size:14})," Dealer Portal"]})]})]})]}),u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-xl border border-outline/10 shadow-sm",children:[u.jsx("h3",{className:"font-semibold text-xl mb-4 text-text-primary",children:"Sales Representative"}),u.jsxs("div",{className:"space-y-3 text-text-secondary",children:[u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(lc,{size:14})," ",w.repName||"N/A"]}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(y0,{size:14})," ",w.repPhone||"N/A"]}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(Xc,{size:14})," ",w.repEmail||"N/A"]})]})]}),u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-xl border border-outline/10 shadow-sm",children:[u.jsx("h3",{className:"font-semibold text-xl mb-4 text-text-primary",children:"Other Details"}),u.jsxs("div",{className:"space-y-3 text-text-secondary",children:[u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Shipping:"})," ",w.shippingMethod||"N/A"]}),k&&u.jsxs("div",{className:"mt-2 p-4 bg-surface-container-low border border-outline/5 rounded-lg",children:[u.jsx("p",{className:"text-xs text-text-tertiary uppercase font-bold mb-1",children:"Fulfilled By"}),u.jsx("p",{className:"text-text-primary font-bold",children:k.name}),k.phone&&u.jsxs("p",{className:"text-sm flex items-center gap-1 mt-1",children:[u.jsx(y0,{size:12})," ",k.phone]}),k.orderingEmail&&u.jsxs("p",{className:"text-sm flex items-center gap-1",children:[u.jsx(Xc,{size:12})," ",k.orderingEmail]})]}),u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Notes:"})," ",w.notes||"N/A"]})]})]})]}),B&&u.jsxs("div",{children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 border-t border-outline/10 pt-8",children:[u.jsxs("h2",{className:"text-3xl font-bold text-text-primary mb-4 md:mb-0",children:["Product Lines (",P.length,")"]}),u.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[u.jsxs("div",{className:"relative flex-grow min-w-[300px]",children:[u.jsx(Wo,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-secondary",size:18}),u.jsx("input",{type:"text",placeholder:"Search style or color...",value:o,onChange:H=>l(H.target.value),className:"w-full bg-surface-container-high border-none rounded-full py-3 pl-12 pr-6 focus:outline-none focus:ring-2 focus:ring-primary/50 shadow-sm"})]}),u.jsxs("select",{value:c,onChange:H=>d(H.target.value),className:"bg-surface-container-high border-none rounded-full py-3 px-6 focus:outline-none focus:ring-2 focus:ring-primary/50 shadow-sm text-text-primary font-medium cursor-pointer",children:[u.jsx("option",{value:"All",children:"All Product Types"}),R.map(H=>u.jsx("option",{value:H,children:H},H))]})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:P.map(H=>u.jsx(Kce,{product:H,pricingSettings:a,onClick:O},H.id))}),P.length===0&&N.length>0&&u.jsx("p",{className:"text-center text-text-secondary py-8 col-span-full",children:"No products match your current filters."})]}),m&&f&&u.jsx(S9,{isOpen:m,onClose:D,product:f}),v&&w&&u.jsx(cb,{isOpen:v,onClose:()=>b(!1),onSave:L,vendorToEdit:w})]})},Het=({isOpen:e,onClose:t,order:r,onReceive:n,onReportDamage:i})=>{const[a,s]=I.useState("RECEIVE"),[o,l]=I.useState(!1),[c,d]=I.useState(""),[f,p]=I.useState(""),[m,x]=I.useState(!0),[v,b]=I.useState([]),[w,k]=I.useState(new Set),[E,N]=I.useState(""),[P,R]=I.useState("");if(I.useEffect(()=>{e&&(s("RECEIVE"),d(new Date().toISOString().split("T")[0]),p(""),x(!0),k(new Set),N(""),R(""),b([]),l(!1))},[e,r]),!e||!r)return null;const O=r.purchaserType==="Installer"?r.installerEmail?r.installerName:null:r.customerEmail?r.customerName:null,D=!!(r.purchaserType==="Installer"&&r.installerEmail||r.purchaserType==="Customer"&&r.customerEmail),L=Y=>{const W=new Set(w);W.has(Y)?W.delete(Y):W.add(Y),k(W)},B=Y=>{Y.target.files&&Y.target.files.length>0&&b(W=>[...W,...Array.from(Y.target.files)])},z=Y=>{b(W=>W.filter((Z,re)=>re!==Y))},H=async Y=>{Y.preventDefault(),l(!0);try{await n(r.id,{dateReceived:c,notes:f,sendEmailNotification:D&&m,files:v}),t()}catch(W){console.error(W),l(!1)}},te=async Y=>{if(Y.preventDefault(),w.size===0)return alert("Please select at least one damaged item.");l(!0);const W=r.lineItems.filter(Z=>w.has(Z.id)).map(Z=>({sampleId:Z.variantId,quantity:Z.quantity,unit:Z.unit||"SF"}));try{await i(r.id,{items:W,replacementEta:E,notes:P,sendEmailNotification:D&&m,files:v}),t()}catch(Z){console.error(Z),l(!1)}};return u.jsx("div",{className:"fixed inset-0 bg-scrim/60 z-50 overflow-y-auto",children:u.jsx("div",{className:"flex min-h-full items-center justify-center p-0 lg:p-4",children:u.jsxs("div",{className:"bg-surface-container-high w-full h-full lg:h-auto lg:max-h-[90vh] lg:max-w-lg lg:rounded-2xl shadow-2xl flex flex-col border border-outline/20 relative",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center lg:rounded-t-2xl sticky top-0 z-10 bg-surface-container-high",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[a==="DAMAGE"?u.jsx(ld,{className:"text-error w-6 h-6"}):u.jsx(O0,{className:"text-primary w-6 h-6"}),u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:a==="DAMAGE"?"Report Damage":"Receive Order"})]}),u.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-surface-container-highest text-text-secondary hover:text-text-primary",children:u.jsx(Zr,{size:24})})]}),u.jsxs("div",{className:"p-6 overflow-y-auto flex-grow",children:[a==="RECEIVE"&&u.jsxs("form",{id:"receive-form",onSubmit:H,className:"space-y-4",children:[u.jsxs("p",{className:"text-sm text-text-secondary mb-4",children:["Mark this order as arrived. This will update the status to ",u.jsx("strong",{children:"Received"}),"."]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Date Received"}),u.jsx("input",{type:"date",required:!0,value:c,onChange:Y=>d(Y.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Notes (Optional)"}),u.jsx("textarea",{value:f,onChange:Y=>p(Y.target.value),placeholder:"e.g. Left in garage, Box 2 looks slightly crushed...",className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary h-24 resize-none placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Paperwork (Packing Slip / BOL)"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("label",{className:"border border-outline/20 bg-surface-container hover:bg-surface-container-highest rounded-xl p-4 flex flex-col items-center justify-center cursor-pointer transition-colors shadow-sm",children:[u.jsx("input",{type:"file",multiple:!0,accept:".pdf, .png, .jpg, .jpeg",className:"hidden",onChange:B}),u.jsx(e8,{className:"w-6 h-6 text-primary mb-2"}),u.jsx("span",{className:"text-xs font-bold text-text-primary",children:"Upload Files"})]}),u.jsxs("label",{className:"border border-outline/20 bg-surface-container hover:bg-surface-container-highest rounded-xl p-4 flex flex-col items-center justify-center cursor-pointer transition-colors shadow-sm",children:[u.jsx("input",{type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:B}),u.jsx(vv,{className:"w-6 h-6 text-primary mb-2"}),u.jsx("span",{className:"text-xs font-bold text-text-primary",children:"Take Photo"})]})]}),v.length>0&&u.jsx("div",{className:"bg-surface-container border border-outline/20 rounded-xl p-2 space-y-2",children:v.map((Y,W)=>u.jsxs("div",{className:"flex items-center justify-between p-2 bg-surface-container-highest rounded-lg shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[Y.type.startsWith("image/")?u.jsx("img",{src:URL.createObjectURL(Y),alt:"Preview",className:"w-8 h-8 object-cover rounded-md"}):u.jsx(Jc,{className:"w-8 h-8 text-text-tertiary"}),u.jsx("span",{className:"text-xs font-medium truncate max-w-[150px] md:max-w-[200px]",children:Y.name})]}),u.jsx("button",{type:"button",onClick:()=>z(W),className:"text-text-tertiary hover:text-error",children:u.jsx(Zr,{size:16})})]},W))})]}),D&&u.jsxs("button",{type:"button",onClick:()=>x(!m),className:`w-full text-left p-4 rounded-lg border-2 transition-all flex items-center gap-4 group ${m?"border-primary bg-primary-container/30":"border-outline/20 bg-surface-container hover:bg-surface-container-highest"}`,children:[u.jsx("div",{className:`p-2 rounded-full ${m?"bg-primary text-on-primary":"bg-secondary-container text-on-secondary-container"}`,children:m?u.jsx(Xc,{size:24}):u.jsx(Kq,{size:24})}),u.jsxs("div",{children:[u.jsx("p",{className:`font-bold ${m?"text-primary":"text-text-secondary"}`,children:m?"Sending Email Notification":"Email Notification Disabled"}),u.jsx("p",{className:"text-sm text-text-secondary",children:m?`Will notify ${O}`:`Click to enable notification for ${O}`})]})]}),u.jsx("div",{className:"pt-4 flex items-center justify-between",children:u.jsxs("button",{type:"button",onClick:()=>s("DAMAGE"),className:"text-error hover:bg-error-container/30 text-sm font-semibold flex items-center gap-1 px-2 py-1 rounded-full transition-colors",children:[u.jsx(ld,{size:16}),"Report Damage?"]})})]}),a==="DAMAGE"&&u.jsxs("form",{id:"damage-form",onSubmit:te,className:"space-y-4",children:[u.jsxs("div",{className:"bg-surface-container border border-outline/20 p-3 rounded-xl text-sm text-text-secondary mb-4",children:["This will mark the current order as ",u.jsx("strong",{children:"Received"})," and create a new ",u.jsx("strong",{children:"Replacement Order"})," for the selected items."]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Which items are damaged?"}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border border-outline/20 rounded-xl p-2 bg-surface-container",children:r.lineItems.map(Y=>u.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-surface-container-highest rounded-lg cursor-pointer group",children:[u.jsx("input",{type:"checkbox",checked:w.has(Y.id),onChange:()=>L(Y.id),className:"form-checkbox h-4 w-4 text-primary bg-surface-container-low border-outline/50 rounded-sm focus:ring-primary"}),u.jsxs("div",{className:"text-sm",children:[u.jsxs("span",{className:"font-medium text-text-primary",children:[Y.quantity," ",Y.unit]}),u.jsx("span",{className:"text-text-secondary mx-2",children:"-"}),u.jsxs("span",{className:"text-text-secondary",children:[Y.style," ",Y.color?`(${Y.color})`:""]})]})]},Y.id))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Replacement ETA"}),u.jsx("input",{type:"date",required:!0,value:E,onChange:Y=>N(Y.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Damage Notes"}),u.jsx("textarea",{required:!0,value:P,onChange:Y=>R(Y.target.value),placeholder:"Describe the damage...",className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary h-20 resize-none placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Damage Photos / Evidence"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[u.jsxs("label",{className:"border border-error-container bg-error-container/30 hover:bg-error-container/50 rounded-xl p-4 flex flex-col items-center justify-center cursor-pointer transition-colors shadow-sm",children:[u.jsx("input",{type:"file",multiple:!0,accept:".pdf, .png, .jpg, .jpeg",className:"hidden",onChange:B}),u.jsx(e8,{className:"w-6 h-6 text-error mb-2"}),u.jsx("span",{className:"text-xs font-bold text-on-error-container",children:"Upload Files"})]}),u.jsxs("label",{className:"border border-error-container bg-error-container/30 hover:bg-error-container/50 rounded-xl p-4 flex flex-col items-center justify-center cursor-pointer transition-colors shadow-sm",children:[u.jsx("input",{type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:B}),u.jsx(vv,{className:"w-6 h-6 text-error mb-2"}),u.jsx("span",{className:"text-xs font-bold text-on-error-container",children:"Take Photo"})]})]}),v.length>0&&u.jsx("div",{className:"bg-surface-container border border-outline/20 rounded-xl p-2 space-y-2",children:v.map((Y,W)=>u.jsxs("div",{className:"flex items-center justify-between p-2 bg-surface-container-highest rounded-lg shadow-sm border-l-2 border-error",children:[u.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[Y.type.startsWith("image/")?u.jsx("img",{src:URL.createObjectURL(Y),alt:"Preview",className:"w-8 h-8 object-cover rounded-md"}):u.jsx(Jc,{className:"w-8 h-8 text-text-tertiary"}),u.jsx("span",{className:"text-xs font-medium truncate max-w-[150px] md:max-w-[200px]",children:Y.name})]}),u.jsx("button",{type:"button",onClick:()=>z(W),className:"text-text-tertiary hover:text-error",children:u.jsx(Zr,{size:16})})]},W))})]}),D&&u.jsxs("button",{type:"button",onClick:()=>x(!m),className:`w-full text-left p-4 rounded-lg border-2 transition-all flex items-center gap-4 group ${m?"border-error bg-error-container/30":"border-outline/20 bg-surface-container hover:bg-surface-container-highest"}`,children:[u.jsx("div",{className:`p-2 rounded-full ${m?"bg-error text-on-error":"bg-secondary-container text-on-secondary-container"}`,children:m?u.jsx(Xc,{size:24}):u.jsx(Kq,{size:24})}),u.jsxs("div",{children:[u.jsx("p",{className:`font-bold ${m?"text-error":"text-text-secondary"}`,children:m?"Sending Damage Alert":"Alert Disabled"}),u.jsx("p",{className:"text-sm text-text-secondary",children:m?`Will notify ${O}`:`Click to enable alert for ${O}`})]})]})]})]}),u.jsx("div",{className:"p-4 border-t border-outline/10 bg-surface-container-high lg:rounded-b-2xl flex justify-end gap-3 shrink-0 sticky bottom-0 z-10 lg:static",children:a==="DAMAGE"?u.jsxs(u.Fragment,{children:[u.jsxs("button",{type:"button",onClick:()=>s("RECEIVE"),className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors flex items-center gap-2",children:[u.jsx(id,{size:16})," Back"]}),u.jsx("button",{form:"damage-form",type:"submit",disabled:o,className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all disabled:opacity-50",children:o?"Processing...":"Submit Damage Report"})]}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:t,type:"button",className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors",children:"Cancel"}),u.jsxs("button",{form:"receive-form",type:"submit",disabled:o,className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all flex items-center gap-2 disabled:opacity-50",children:[u.jsx(_4,{size:18}),o?"Receiving...":"Mark as Received"]})]})})]})})})},Wet=()=>{const{data:e=[]}=Kh(),{data:t=[]}=S4(),r=E4(),[n,i]=I.useState(""),[a,s]=I.useState(null),[o,l]=I.useState(!1),[c,d]=I.useState(null),[f,p]=I.useState(null),[m,x]=I.useState(!1),[v,b]=I.useState(new Set),w=D=>{b(L=>{const B=new Set(L);return B.has(D)?B.delete(D):B.add(D),B})},k=I.useMemo(()=>{const D=[],L=new Map;return t.forEach(B=>{var z;L.has(B.projectId)||L.set(B.projectId,[]),(z=L.get(B.projectId))==null||z.push(B)}),e.forEach(B=>{let z=L.get(B.id)||[];m||(z=z.filter(te=>te.status==="Ordered"||te.status==="Damage Replacement"));const H=!n||B.projectName.toLowerCase().includes(n.toLowerCase())||z.some(te=>{var Y;return(Y=te.supplierName)==null?void 0:Y.toLowerCase().includes(n.toLowerCase())});z.length>0&&H&&D.push({project:B,orders:z.sort((te,Y)=>new Date(Y.orderDate).getTime()-new Date(te.orderDate).getTime())})}),D.sort((B,z)=>{const H=B.orders.some(Y=>Y.status==="Ordered"),te=z.orders.some(Y=>Y.status==="Ordered");return H&&!te?-1:!H&&te?1:0})},[e,t,n,m]),E=D=>{s(D)},N=D=>{d(D.id),l(!0)},P=()=>{d(null),l(!0)},R=async(D,L)=>{await r.receiveMaterialOrder({id:D,data:L})},O=async(D,L)=>{await r.reportMaterialOrderDamage({id:D,data:L})};return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 px-1",children:[u.jsxs("div",{children:[u.jsxs("h1",{className:"text-4xl font-bold text-text-primary tracking-tight flex items-center gap-3",children:[u.jsx(O0,{className:"text-primary w-8 h-8"})," Order Dashboard"]}),u.jsx("p",{className:"text-text-secondary text-sm mt-1 ml-11 font-medium",children:"Track, receive, and manage material orders."})]}),u.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full md:w-auto mt-4 md:mt-0",children:[u.jsxs("button",{onClick:()=>x(!m),className:"w-full md:w-auto justify-center bg-surface-container-high border border-outline/10 hover:bg-surface-container-highest text-text-secondary font-medium py-3 px-6 rounded-full flex items-center gap-2 transition-colors",children:[m?u.jsx(ooe,{size:20}):u.jsx(_7,{size:20}),m?"Hide Received":"Show Received"]}),u.jsxs("button",{onClick:P,className:"w-full md:w-auto justify-center bg-primary hover:bg-primary-hover text-on-primary font-semibold py-3 px-6 rounded-full flex items-center gap-2 shadow-lg hover:shadow-xl transition-all",children:[u.jsx(Zl,{size:20})," New Order"]})]})]}),u.jsxs("div",{className:"relative w-full max-w-2xl",children:[u.jsx(Wo,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-text-secondary",size:20}),u.jsx("input",{type:"text",placeholder:"Search projects or suppliers...",value:n,onChange:D=>i(D.target.value),className:"w-full pl-12 pr-6 py-4 bg-surface-container-high border-none rounded-full text-text-primary focus:ring-2 focus:ring-primary/50 outline-none transition-shadow shadow-sm hover:shadow-md placeholder:text-text-tertiary"})]}),k.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-text-secondary",children:[u.jsx(Jg,{size:48,className:"mb-4 opacity-50"}),u.jsx("p",{className:"text-lg font-medium",children:"No active orders found."}),u.jsx("p",{className:"text-sm",children:"Create a material order from a Job Detail page to see it here."})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:k.map(({project:D,orders:L})=>{var W;const B=v.has(D.id),z=B?L:L.slice(0,2),H=L.length-z.length,Y=`${((W=L[0])==null?void 0:W.customerName)||"N/A"}'s Project`;return u.jsxs("div",{className:"bg-surface-container-high border border-outline/10 rounded-xl shadow-sm flex flex-col transition-all duration-200 hover:shadow-md",children:[u.jsxs("div",{className:"p-5 border-b border-outline/10 flex justify-between items-start bg-surface-container-low rounded-t-xl",children:[u.jsxs("div",{className:"min-w-0 pr-2",children:[u.jsx(ai,{to:`/projects/${D.id}`,className:"font-bold text-xl text-primary hover:text-primary-hover hover:underline truncate block",title:"View Project",children:Y}),u.jsx("p",{className:"text-xs text-text-secondary truncate",children:D.projectName})]}),u.jsx("button",{onClick:()=>N(D),className:"flex-shrink-0 p-2 bg-surface-container-highest hover:bg-primary-container text-primary rounded-full transition-colors",title:"Add Order",children:u.jsx(Zl,{size:18})})]}),u.jsx("div",{className:"p-5 space-y-6 flex-grow",children:z.map(Z=>u.jsxs("div",{className:`relative border-l-4 pl-3 py-1 ${Z.status==="Received"?"border-success":Z.status==="Damage Replacement"?"border-error":"border-primary"}`,children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsx("span",{className:"font-semibold text-text-primary text-sm truncate max-w-[60%]",children:Z.supplierName||"Unknown Supplier"}),u.jsxs("div",{className:"flex items-center",children:[Z.status==="Received"?u.jsxs("span",{className:"text-xs font-bold text-success flex items-center gap-1",children:[u.jsx(_4,{size:12})," Received"]}):Z.status==="Damage Replacement"?u.jsxs("span",{className:"text-xs font-bold text-error flex items-center gap-1",children:[u.jsx(ld,{size:12})," Replacement"]}):u.jsxs("span",{className:"text-xs font-bold text-primary flex items-center gap-1",children:[u.jsx(od,{size:12})," Ordered"]}),u.jsx("button",{onClick:()=>p(Z),className:"p-1.5 text-text-tertiary hover:text-primary hover:bg-surface-container-highest rounded-full transition-colors ml-2",title:"Edit Order Details",children:u.jsx(Zg,{size:12})})]})]}),u.jsxs("div",{className:"flex gap-4 mb-3",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-[10px] uppercase tracking-wide text-text-tertiary block font-bold",children:"Ordered"}),u.jsx("span",{className:"text-sm font-medium text-text-primary",children:new Date(Z.orderDate.split("T")[0]+"T12:00:00").toLocaleDateString()})]}),Z.etaDate&&u.jsxs("div",{children:[u.jsx("span",{className:"text-[10px] uppercase tracking-wide text-text-tertiary block font-bold",children:"ETA"}),u.jsx("span",{className:`text-sm font-medium ${new Date(Z.etaDate.split("T")[0]+"T12:00:00")<new Date&&Z.status!=="Received"?"text-error font-bold":"text-text-primary"}`,children:new Date(Z.etaDate.split("T")[0]+"T12:00:00").toLocaleDateString()})]})]}),u.jsxs("ul",{className:"text-xs text-text-secondary mb-3 bg-surface-container-low p-3 rounded-lg border border-outline/10",children:[Z.lineItems.slice(0,3).map(re=>u.jsx("li",{className:"flex justify-between",children:u.jsxs("span",{className:"truncate w-3/4",children:[re.quantity," ",re.unit," - ",re.style]})},re.id)),Z.lineItems.length>3&&u.jsxs("li",{className:"text-text-tertiary italic",children:["+",Z.lineItems.length-3," more..."]})]}),Z.status!=="Received"&&u.jsxs("button",{onClick:()=>E(Z),className:"w-full py-4 md:py-2 bg-primary hover:bg-primary-hover text-on-primary text-lg md:text-xs font-bold md:font-semibold rounded-full md:rounded-full flex items-center justify-center gap-3 md:gap-2 transition-colors shadow-sm mt-3 md:mt-0",children:[u.jsx(Jg,{className:"w-6 h-6 md:w-3.5 md:h-3.5"})," Receive Order"]})]},Z.id))}),L.length>2&&u.jsx("button",{onClick:()=>w(D.id),className:"w-full py-3 border-t border-outline/10 flex items-center justify-center gap-1 text-xs font-semibold text-text-secondary hover:text-primary hover:bg-surface-container-highest transition-colors rounded-b-xl",children:B?u.jsxs(u.Fragment,{children:["Show Less ",u.jsx(ro,{size:14})]}):u.jsxs(u.Fragment,{children:["Show ",H," More ",u.jsx(us,{size:14})]})})]},D.id)})}),a&&u.jsx(Ju,{children:u.jsx(Het,{isOpen:!!a,onClose:()=>s(null),order:a,onReceive:R,onReportDamage:O})}),o&&u.jsx(Ju,{children:u.jsx(xT,{isOpen:o,onClose:()=>l(!1),editingOrder:null,initialProjectId:c})}),f&&u.jsx(Ju,{children:u.jsx(xT,{isOpen:!!f,onClose:()=>p(null),editingOrder:f})})]})},Vet=(e,t)=>{if(!e||e.length===0){alert("No data to export");return}const r=Object.keys(e[0]),n=[r.join(","),...e.map(o=>r.map(l=>{let c=o[l];if(c==null)return"";let d=String(c);return(d.includes(",")||d.includes('"')||d.includes(`
`))&&(d=`"${d.replace(/"/g,'""')}"`),d}).join(","))].join(`
`),i=new Blob([n],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(i),s=document.createElement("a");s.setAttribute("href",a),s.setAttribute("download",`${t}_${new Date().toISOString().split("T")[0]}.csv`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)},DY=e=>{const t=Number(e)||0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)},qet=({data:e,sortConfig:t,onSort:r,hiddenColumns:n,showCost:i,onRowClick:a})=>{const s=o=>!n.includes(o);return u.jsxs("table",{className:"min-w-full text-left text-sm whitespace-nowrap",children:[u.jsx("thead",{className:"uppercase tracking-wider border-b-2 border-gray-200 bg-gray-50 print:bg-transparent",children:u.jsxs("tr",{children:[s("manufacturer")&&u.jsx("th",{onClick:()=>r("manufacturer_name"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Manufacturer ",(t==null?void 0:t.key)==="manufacturer_name"&&(t.direction==="asc"?u.jsx(ro,{className:"w-4 h-4"}):u.jsx(us,{className:"w-4 h-4"}))]})}),s("product")&&u.jsx("th",{onClick:()=>r("product_name"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Product ",(t==null?void 0:t.key)==="product_name"&&(t.direction==="asc"?u.jsx(ro,{className:"w-4 h-4"}):u.jsx(us,{className:"w-4 h-4"}))]})}),s("style_size")&&u.jsx("th",{onClick:()=>r("variant_size"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Style / Size ",(t==null?void 0:t.key)==="variant_size"&&(t.direction==="asc"?u.jsx(ro,{className:"w-4 h-4"}):u.jsx(us,{className:"w-4 h-4"}))]})}),s("sku")&&u.jsx("th",{onClick:()=>r("sku"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["SKU ",(t==null?void 0:t.key)==="sku"&&(t.direction==="asc"?u.jsx(ro,{className:"w-4 h-4"}):u.jsx(us,{className:"w-4 h-4"}))]})}),s("carton")&&u.jsx("th",{onClick:()=>r("carton_size"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Carton ",(t==null?void 0:t.key)==="carton_size"&&(t.direction==="asc"?u.jsx(ro,{className:"w-4 h-4"}):u.jsx(us,{className:"w-4 h-4"}))]})}),i&&u.jsx("th",{onClick:()=>r("unit_cost"),className:"px-4 py-3 font-semibold text-red-600 print:text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Unit Cost ",(t==null?void 0:t.key)==="unit_cost"&&(t.direction==="asc"?u.jsx(ro,{className:"w-4 h-4"}):u.jsx(us,{className:"w-4 h-4"}))]})}),s("retail")&&u.jsx("th",{onClick:()=>r("retail_price"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Retail Price ",(t==null?void 0:t.key)==="retail_price"&&(t.direction==="asc"?u.jsx(ro,{className:"w-4 h-4"}):u.jsx(us,{className:"w-4 h-4"}))]})})]})}),u.jsxs("tbody",{className:"divide-y divide-gray-100",children:[e.map((o,l)=>u.jsxs("tr",{className:"hover:bg-indigo-50 cursor-pointer transition-colors break-inside-avoid",onClick:()=>a(o),children:[s("manufacturer")&&u.jsx("td",{className:"px-4 py-2 text-gray-600",children:o.manufacturer_name}),s("product")&&u.jsxs("td",{className:"px-4 py-2 text-gray-900 font-medium",children:[o.product_name,u.jsx("span",{className:"ml-2 text-xs text-gray-500 bg-gray-100 px-1 rounded",children:o.product_type})]}),s("style_size")&&u.jsxs("td",{className:"px-4 py-2 text-gray-600",children:[o.variant_style&&u.jsx("span",{className:"mr-1",children:o.variant_style}),o.variant_color&&u.jsx("span",{className:"mr-1",children:o.variant_color}),o.variant_size&&u.jsxs("span",{className:"ml-1 text-gray-500",children:["(",o.variant_size,")"]})]}),s("sku")&&u.jsx("td",{className:"px-4 py-2 text-gray-500 font-mono text-xs",children:o.sku||"-"}),s("carton")&&u.jsx("td",{className:"px-4 py-2 text-gray-600 font-mono text-xs",children:o.carton_size?`${o.carton_size} ${o.uom||""}`:"-"}),i&&u.jsxs("td",{className:"px-4 py-2 text-red-600 print:text-gray-900 font-mono",children:[DY(o.unit_cost)," / ",o.uom]}),s("retail")&&u.jsxs("td",{className:"px-4 py-2 text-gray-900 font-mono font-bold",children:[DY(o.retail_price)," / ",o.uom]})]},l)),u.jsx("tr",{className:"bg-gray-100 font-bold border-t-2 border-gray-300",children:u.jsxs("td",{colSpan:10,className:"px-4 py-3 text-sm text-gray-600",children:["Showing ",e.length," Variants"]})})]})]})},H_=e=>{const t=Number(e)||0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)},Get=e=>e?new Date(e).toLocaleDateString():"-",Ket=({data:e,sortConfig:t,onSort:r,hiddenColumns:n,showCost:i,onRowClick:a})=>{const s=o=>!n.includes(o);return u.jsxs("table",{className:"min-w-full text-left text-sm whitespace-nowrap",children:[u.jsx("thead",{className:"uppercase tracking-wider border-b-2 border-gray-200 bg-gray-50 print:bg-transparent",children:u.jsxs("tr",{children:[s("date")&&u.jsx("th",{onClick:()=>r("created_at"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Date ",(t==null?void 0:t.key)==="created_at"&&(t.direction==="asc"?u.jsx(ro,{className:"w-4 h-4"}):u.jsx(us,{className:"w-4 h-4"}))]})}),s("customer")&&u.jsx("th",{onClick:()=>r("customer_name"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Customer ",(t==null?void 0:t.key)==="customer_name"&&(t.direction==="asc"?u.jsx(ro,{className:"w-4 h-4"}):u.jsx(us,{className:"w-4 h-4"}))]})}),s("project")&&u.jsx("th",{onClick:()=>r("project_name"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Project ",(t==null?void 0:t.key)==="project_name"&&(t.direction==="asc"?u.jsx(ro,{className:"w-4 h-4"}):u.jsx(us,{className:"w-4 h-4"}))]})}),s("status")&&u.jsx("th",{onClick:()=>r("status"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Status ",(t==null?void 0:t.key)==="status"&&(t.direction==="asc"?u.jsx(ro,{className:"w-4 h-4"}):u.jsx(us,{className:"w-4 h-4"}))]})}),i&&u.jsx("th",{className:"px-4 py-3 font-semibold text-red-600",children:"Est. Cost"}),s("total")&&u.jsx("th",{onClick:()=>r("total_value"),className:"px-4 py-3 font-semibold text-gray-900 text-right cursor-pointer hover:bg-gray-100 select-none flex justify-end",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Total Value ",(t==null?void 0:t.key)==="total_value"&&(t.direction==="asc"?u.jsx(ro,{className:"w-4 h-4"}):u.jsx(us,{className:"w-4 h-4"}))]})})]})}),u.jsxs("tbody",{className:"divide-y divide-gray-100",children:[e.map((o,l)=>u.jsxs("tr",{className:"hover:bg-indigo-50 cursor-pointer transition-colors break-inside-avoid",onClick:()=>a(o),children:[s("date")&&u.jsx("td",{className:"px-4 py-2 text-gray-600",children:Get(o.created_at)}),s("customer")&&u.jsx("td",{className:"px-4 py-2 text-gray-900 font-medium",children:o.customer_name}),s("project")&&u.jsx("td",{className:"px-4 py-2 text-gray-600",children:o.project_name}),s("status")&&u.jsx("td",{className:"px-4 py-2",children:u.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700 border border-gray-300",children:o.status})}),i&&u.jsx("td",{className:"px-4 py-2 text-red-600 font-mono",children:H_(Number(o.material_cost)+Number(o.labor_cost))}),s("total")&&u.jsx("td",{className:"px-4 py-2 text-gray-900 font-mono font-bold text-right",children:Number(o.total_value)>0?H_(o.total_value):"-"})]},l)),u.jsx("tr",{className:"bg-gray-100 font-bold border-t-2 border-gray-300",children:u.jsxs("td",{colSpan:100,className:"px-4 py-3 text-right flex justify-between",children:[u.jsx("span",{children:"TOTAL PIPELINE:"}),u.jsxs("div",{className:"flex gap-4",children:[i&&u.jsx("span",{className:"font-mono text-red-700",children:H_(e.reduce((o,l)=>o+(Number(l.material_cost)+Number(l.labor_cost)),0))}),s("total")&&u.jsx("span",{className:"font-mono text-lg",children:H_(e.reduce((o,l)=>o+Number(l.total_value),0))})]})]})})]})]})},MY=e=>{const t=Number(e)||0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)},Xet=({data:e,sortConfig:t,onSort:r,hiddenColumns:n,onRowClick:i})=>{const a=s=>!n.includes(s);return u.jsxs("table",{className:"min-w-full text-left text-sm whitespace-nowrap",children:[u.jsx("thead",{className:"uppercase tracking-wider border-b-2 border-gray-200 bg-gray-50 print:bg-transparent",children:u.jsxs("tr",{children:[a("installer")&&u.jsx("th",{onClick:()=>r("installer_name"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Installer Name ",(t==null?void 0:t.key)==="installer_name"&&(t.direction==="asc"?u.jsx(ro,{className:"w-4 h-4"}):u.jsx(us,{className:"w-4 h-4"}))]})}),a("jobs")&&u.jsx("th",{onClick:()=>r("appointment_count"),className:"px-4 py-3 font-semibold text-gray-900 text-center cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Jobs (Period) ",(t==null?void 0:t.key)==="appointment_count"&&(t.direction==="asc"?u.jsx(ro,{className:"w-4 h-4"}):u.jsx(us,{className:"w-4 h-4"}))]})}),a("labor")&&u.jsx("th",{onClick:()=>r("total_labor_value"),className:"px-4 py-3 font-semibold text-gray-900 text-right cursor-pointer hover:bg-gray-100 select-none flex justify-end",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Labor Value ",(t==null?void 0:t.key)==="total_labor_value"&&(t.direction==="asc"?u.jsx(ro,{className:"w-4 h-4"}):u.jsx(us,{className:"w-4 h-4"}))]})})]})}),u.jsxs("tbody",{className:"divide-y divide-gray-100",children:[e.map((s,o)=>u.jsxs("tr",{className:"hover:bg-indigo-50 cursor-pointer transition-colors break-inside-avoid",onClick:()=>i(s),children:[a("installer")&&u.jsxs("td",{className:"px-4 py-3 text-gray-900 font-medium flex items-center gap-2",children:[u.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:s.color||"#ccc"}}),s.installer_name]}),a("jobs")&&u.jsx("td",{className:"px-4 py-3 text-center text-gray-600",children:s.appointment_count}),a("labor")&&u.jsx("td",{className:"px-4 py-3 text-right text-gray-900 font-mono font-bold",children:MY(s.total_labor_value)})]},o)),u.jsx("tr",{className:"bg-gray-100 font-bold border-t-2 border-gray-300",children:u.jsx("td",{colSpan:10,className:"px-4 py-3",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{children:"TOTALS:"}),a("labor")&&u.jsx("span",{className:"font-mono text-lg text-gray-900",children:MY(e.reduce((s,o)=>s+Number(o.total_labor_value),0))})]})})})]})]})};var Yet=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function vB(e){if(typeof e!="string")return!1;var t=Yet;return t.includes(e)}var Qet=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Jet=new Set(Qet);function she(e){return typeof e!="string"?!1:Jet.has(e)}function ohe(e){return typeof e=="string"&&e.startsWith("data-")}function Fh(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(she(r)||ohe(r))&&(t[r]=e[r]);return t}function yB(e){if(e==null)return null;if(I.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Fh(t)}return typeof e=="object"&&!Array.isArray(e)?Fh(e):null}function cu(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(she(r)||ohe(r)||vB(r))&&(t[r]=e[r]);return t}var Zet=["children","width","height","viewBox","className","style","title","desc"];function fF(){return fF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fF.apply(null,arguments)}function ett(e,t){if(e==null)return{};var r,n,i=ttt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ttt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var lhe=I.forwardRef((e,t)=>{var{children:r,width:n,height:i,viewBox:a,className:s,style:o,title:l,desc:c}=e,d=ett(e,Zet),f=a||{width:n,height:i,x:0,y:0},p=gi("recharts-surface",s);return I.createElement("svg",fF({},cu(d),{className:p,width:n,height:i,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),I.createElement("title",null,l),I.createElement("desc",null,c),r)}),rtt=["children","className"];function hF(){return hF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hF.apply(null,arguments)}function ntt(e,t){if(e==null)return{};var r,n,i=itt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function itt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Lh=I.forwardRef((e,t)=>{var{children:r,className:n}=e,i=ntt(e,rtt),a=gi("recharts-layer",n);return I.createElement("g",hF({className:a},cu(i),{ref:t}),r)}),att=I.createContext(null);function pi(e){return function(){return e}}const che=Math.cos,dI=Math.sin,md=Math.sqrt,fI=Math.PI,k3=2*fI,pF=Math.PI,mF=2*pF,Mm=1e-6,stt=mF-Mm;function uhe(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function ott(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return uhe;const r=10**t;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class ltt{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?uhe:ott(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,a,s){this._append`C${+t},${+r},${+n},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(t,r,n,i,a){if(t=+t,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=n-t,c=i-r,d=s-t,f=o-r,p=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>Mm)if(!(Math.abs(f*l-c*d)>Mm)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-s,x=i-o,v=l*l+c*c,b=m*m+x*x,w=Math.sqrt(v),k=Math.sqrt(p),E=a*Math.tan((pF-Math.acos((v+p-b)/(2*w*k)))/2),N=E/k,P=E/w;Math.abs(N-1)>Mm&&this._append`L${t+N*d},${r+N*f}`,this._append`A${a},${a},0,0,${+(f*m>d*x)},${this._x1=t+P*l},${this._y1=r+P*c}`}}arc(t,r,n,i,a,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(i),l=n*Math.sin(i),c=t+o,d=r+l,f=1^s,p=s?i-a:a-i;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>Mm||Math.abs(this._y1-d)>Mm)&&this._append`L${c},${d}`,n&&(p<0&&(p=p%mF+mF),p>stt?this._append`A${n},${n},0,1,${f},${t-o},${r-l}A${n},${n},0,1,${f},${this._x1=c},${this._y1=d}`:p>Mm&&this._append`A${n},${n},0,${+(p>=pF)},${f},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function bB(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new ltt(t)}function wB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function dhe(e){this._context=e}dhe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function _3(e){return new dhe(e)}function fhe(e){return e[0]}function hhe(e){return e[1]}function phe(e,t){var r=pi(!0),n=null,i=_3,a=null,s=bB(o);e=typeof e=="function"?e:e===void 0?fhe:pi(e),t=typeof t=="function"?t:t===void 0?hhe:pi(t);function o(l){var c,d=(l=wB(l)).length,f,p=!1,m;for(n==null&&(a=i(m=s())),c=0;c<=d;++c)!(c<d&&r(f=l[c],c,l))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(f,c,l),+t(f,c,l));if(m)return a=null,m+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:pi(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:pi(+l),o):t},o.defined=function(l){return arguments.length?(r=typeof l=="function"?l:pi(!!l),o):r},o.curve=function(l){return arguments.length?(i=l,n!=null&&(a=i(n)),o):i},o.context=function(l){return arguments.length?(l==null?n=a=null:a=i(n=l),o):n},o}function W_(e,t,r){var n=null,i=pi(!0),a=null,s=_3,o=null,l=bB(c);e=typeof e=="function"?e:e===void 0?fhe:pi(+e),t=typeof t=="function"?t:pi(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?hhe:pi(+r);function c(f){var p,m,x,v=(f=wB(f)).length,b,w=!1,k,E=new Array(v),N=new Array(v);for(a==null&&(o=s(k=l())),p=0;p<=v;++p){if(!(p<v&&i(b=f[p],p,f))===w)if(w=!w)m=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),x=p-1;x>=m;--x)o.point(E[x],N[x]);o.lineEnd(),o.areaEnd()}w&&(E[p]=+e(b,p,f),N[p]=+t(b,p,f),o.point(n?+n(b,p,f):E[p],r?+r(b,p,f):N[p]))}if(k)return o=null,k+""||null}function d(){return phe().defined(i).curve(s).context(a)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:pi(+f),n=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:pi(+f),c):e},c.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:pi(+f),c):n},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:pi(+f),r=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:pi(+f),c):t},c.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:pi(+f),c):r},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(r)},c.lineX1=function(){return d().x(n).y(t)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:pi(!!f),c):i},c.curve=function(f){return arguments.length?(s=f,a!=null&&(o=s(a)),c):s},c.context=function(f){return arguments.length?(f==null?a=o=null:o=s(a=f),c):a},c}class mhe{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function ctt(e){return new mhe(e,!0)}function utt(e){return new mhe(e,!1)}const SB={draw(e,t){const r=md(t/fI);e.moveTo(r,0),e.arc(0,0,r,0,k3)}},dtt={draw(e,t){const r=md(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},ghe=md(1/3),ftt=ghe*2,htt={draw(e,t){const r=md(t/ftt),n=r*ghe;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},ptt={draw(e,t){const r=md(t),n=-r/2;e.rect(n,n,r,r)}},mtt=.8908130915292852,xhe=dI(fI/10)/dI(7*fI/10),gtt=dI(k3/10)*xhe,xtt=-che(k3/10)*xhe,vtt={draw(e,t){const r=md(t*mtt),n=gtt*r,i=xtt*r;e.moveTo(0,-r),e.lineTo(n,i);for(let a=1;a<5;++a){const s=k3*a/5,o=che(s),l=dI(s);e.lineTo(l*r,-o*r),e.lineTo(o*n-l*i,l*n+o*i)}e.closePath()}},LD=md(3),ytt={draw(e,t){const r=-md(t/(LD*3));e.moveTo(0,r*2),e.lineTo(-LD*r,-r),e.lineTo(LD*r,-r),e.closePath()}},Ac=-.5,Tc=md(3)/2,gF=1/md(12),btt=(gF/2+1)*3,wtt={draw(e,t){const r=md(t/btt),n=r/2,i=r*gF,a=n,s=r*gF+r,o=-a,l=s;e.moveTo(n,i),e.lineTo(a,s),e.lineTo(o,l),e.lineTo(Ac*n-Tc*i,Tc*n+Ac*i),e.lineTo(Ac*a-Tc*s,Tc*a+Ac*s),e.lineTo(Ac*o-Tc*l,Tc*o+Ac*l),e.lineTo(Ac*n+Tc*i,Ac*i-Tc*n),e.lineTo(Ac*a+Tc*s,Ac*s-Tc*a),e.lineTo(Ac*o+Tc*l,Ac*l-Tc*o),e.closePath()}};function Stt(e,t){let r=null,n=bB(i);e=typeof e=="function"?e:pi(e||SB),t=typeof t=="function"?t:pi(t===void 0?64:+t);function i(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:pi(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:pi(+a),i):t},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function hI(){}function pI(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function vhe(e){this._context=e}vhe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:pI(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:pI(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ett(e){return new vhe(e)}function yhe(e){this._context=e}yhe.prototype={areaStart:hI,areaEnd:hI,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:pI(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ctt(e){return new yhe(e)}function bhe(e){this._context=e}bhe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:pI(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ktt(e){return new bhe(e)}function whe(e){this._context=e}whe.prototype={areaStart:hI,areaEnd:hI,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function _tt(e){return new whe(e)}function FY(e){return e<0?-1:1}function LY(e,t,r){var n=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(n||i<0&&-0),s=(r-e._y1)/(i||n<0&&-0),o=(a*i+s*n)/(n+i);return(FY(a)+FY(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function BY(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function BD(e,t,r){var n=e._x0,i=e._y0,a=e._x1,s=e._y1,o=(a-n)/3;e._context.bezierCurveTo(n+o,i+o*t,a-o,s-o*r,a,s)}function mI(e){this._context=e}mI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:BD(this,this._t0,BY(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,BD(this,BY(this,r=LY(this,e,t)),r);break;default:BD(this,this._t0,r=LY(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function She(e){this._context=new Ehe(e)}(She.prototype=Object.create(mI.prototype)).point=function(e,t){mI.prototype.point.call(this,t,e)};function Ehe(e){this._context=e}Ehe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,a){this._context.bezierCurveTo(t,e,n,r,a,i)}};function Ntt(e){return new mI(e)}function Att(e){return new She(e)}function Che(e){this._context=e}Che.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=UY(e),i=UY(t),a=0,s=1;s<r;++a,++s)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function UY(e){var t,r=e.length-1,n,i=new Array(r),a=new Array(r),s=new Array(r);for(i[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,s[t]-=n*s[t-1];for(i[r-1]=s[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(s[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function Ttt(e){return new Che(e)}function N3(e,t){this._context=e,this._t=t}N3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Itt(e){return new N3(e,.5)}function Ott(e){return new N3(e,0)}function Ptt(e){return new N3(e,1)}function Ey(e,t){if((s=e.length)>1)for(var r=1,n,i,a=e[t[0]],s,o=a.length;r<s;++r)for(i=a,a=e[t[r]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function xF(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Rtt(e,t){return e[t]}function jtt(e){const t=[];return t.key=e,t}function Dtt(){var e=pi([]),t=xF,r=Ey,n=Rtt;function i(a){var s=Array.from(e.apply(this,arguments),jtt),o,l=s.length,c=-1,d;for(const f of a)for(o=0,++c;o<l;++o)(s[o][c]=[0,+n(f,s[o].key,c,a)]).data=f;for(o=0,d=wB(t(s));o<l;++o)s[d[o]].index=o;return r(s,d),s}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:pi(Array.from(a)),i):e},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:pi(+a),i):n},i.order=function(a){return arguments.length?(t=a==null?xF:typeof a=="function"?a:pi(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(r=a??Ey,i):r},i}function Mtt(e,t){if((n=e.length)>0){for(var r,n,i=0,a=e[0].length,s;i<a;++i){for(s=r=0;r<n;++r)s+=e[r][i][1]||0;if(s)for(r=0;r<n;++r)e[r][i][1]/=s}Ey(e,t)}}function Ftt(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,a=n.length;r<a;++r){for(var s=0,o=0;s<i;++s)o+=e[s][r][1]||0;n[r][1]+=n[r][0]=-o/2}Ey(e,t)}}function Ltt(e,t){if(!(!((s=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,a,s;n<a;++n){for(var o=0,l=0,c=0;o<s;++o){for(var d=e[t[o]],f=d[n][1]||0,p=d[n-1][1]||0,m=(f-p)/2,x=0;x<o;++x){var v=e[t[x]],b=v[n][1]||0,w=v[n-1][1]||0;m+=b-w}l+=f,c+=m*f}i[n-1][1]+=i[n-1][0]=r,l&&(r-=c/l)}i[n-1][1]+=i[n-1][0]=r,Ey(e,t)}}var A3={},khe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(khe);var EB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(EB);var T3={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(T3);var I3={},_he={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(_he);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_he,r=T3;function n(i){if(Array.isArray(i))return i.map(r.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const a=[],s=i.length;if(s===0)return a;let o=0,l="",c="",d=!1;for(i.charCodeAt(0)===46&&(a.push(""),o++);o<s;){const f=i[o];c?f==="\\"&&o+1<s?(o++,l+=i[o]):f===c?c="":l+=f:d?f==='"'||f==="'"?c=f:f==="]"?(d=!1,a.push(l),l=""):l+=f:f==="["?(d=!0,l&&(a.push(l),l="")):f==="."?l&&(a.push(l),l=""):l+=f,o++}return l&&a.push(l),a}e.toPath=n})(I3);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=khe,r=EB,n=T3,i=I3;function a(o,l,c){if(o==null)return c;switch(typeof l){case"string":{if(t.isUnsafeProperty(l))return c;const d=o[l];return d===void 0?r.isDeepKey(l)?a(o,i.toPath(l),c):c:d}case"number":case"symbol":{typeof l=="number"&&(l=n.toKey(l));const d=o[l];return d===void 0?c:d}default:{if(Array.isArray(l))return s(o,l,c);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),t.isUnsafeProperty(l))return c;const d=o[l];return d===void 0?c:d}}}function s(o,l,c){if(l.length===0)return c;let d=o;for(let f=0;f<l.length;f++){if(d==null||t.isUnsafeProperty(l[f]))return c;d=d[l[f]]}return d===void 0?c:d}e.get=a})(A3);var Btt=A3.get;const Cy=Bs(Btt);var hl=e=>e===0?0:e>0?1:-1,cd=e=>typeof e=="number"&&e!=+e,Bh=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ur=e=>(typeof e=="number"||e instanceof Number)&&!cd(e),of=e=>ur(e)||typeof e=="string",Utt=0,OS=e=>{var t=++Utt;return"".concat(e||"").concat(t)},ud=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ur(t)&&typeof t!="string")return n;var a;if(Bh(t)){if(r==null)return n;var s=t.indexOf("%");a=r*parseFloat(t.slice(0,s))/100}else a=+t;return cd(a)&&(a=n),i&&r!=null&&a>r&&(a=r),a},Nhe=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function Is(e,t,r){return ur(e)&&ur(t)?e+r*(t-e):t}function $tt(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Cy(n,t))===r)}var ys=e=>e===null||typeof e>"u",pC=e=>ys(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function ztt(e){return e!=null}function mC(){}var Htt=["type","size","sizeType"];function vF(){return vF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vF.apply(null,arguments)}function $Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function zY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$Y(Object(r),!0).forEach(function(n){Wtt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$Y(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wtt(e,t,r){return(t=Vtt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vtt(e){var t=qtt(e,"string");return typeof t=="symbol"?t:t+""}function qtt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gtt(e,t){if(e==null)return{};var r,n,i=Ktt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Ktt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ahe={symbolCircle:SB,symbolCross:dtt,symbolDiamond:htt,symbolSquare:ptt,symbolStar:vtt,symbolTriangle:ytt,symbolWye:wtt},Xtt=Math.PI/180,Ytt=e=>{var t="symbol".concat(pC(e));return Ahe[t]||SB},Qtt=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*Xtt;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Jtt=(e,t)=>{Ahe["symbol".concat(pC(e))]=t},The=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,i=Gtt(e,Htt),a=zY(zY({},i),{},{type:t,size:r,sizeType:n}),s="circle";typeof t=="string"&&(s=t);var o=()=>{var p=Ytt(s),m=Stt().type(p).size(Qtt(r,n,s)),x=m();if(x!==null)return x},{className:l,cx:c,cy:d}=a,f=cu(a);return ur(c)&&ur(d)&&ur(r)?I.createElement("path",vF({},f,{className:gi("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(d,")"),d:o()})):null};The.registerSymbol=Jtt;var Ihe=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,Ztt=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(I.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{vB(i)&&(n[i]=a=>r[i](r,a))}),n},ert=(e,t,r)=>n=>(e(t,r,n),null),CB=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(i=>{var a=e[i];vB(i)&&typeof a=="function"&&(n||(n={}),n[i]=ert(a,t,r))}),n};function HY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function trt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HY(Object(r),!0).forEach(function(n){rrt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rrt(e,t,r){return(t=nrt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nrt(e){var t=irt(e,"string");return typeof t=="symbol"?t:t+""}function irt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vc(e,t){var r=trt({},e),n=t,i=Object.keys(t),a=i.reduce((s,o)=>(s[o]===void 0&&n[o]!==void 0&&(s[o]=n[o]),s),r);return a}var Ohe={},Phe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const i=new Map;for(let a=0;a<r.length;a++){const s=r[a],o=n(s);i.has(o)||i.set(o,s)}return Array.from(i.values())}e.uniqBy=t})(Phe);var kB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(kB);var Rhe={},O3={},jhe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(jhe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jhe;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(O3);var Dhe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Dhe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=O3,r=Dhe;function n(i){return r.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=n})(Rhe);var Mhe={},Fhe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=A3;function r(n){return function(i){return t.get(i,n)}}e.property=r})(Fhe);var Lhe={},_B={},Bhe={},NB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(NB);var AB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(AB);var TB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(TB);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NB,r=AB,n=TB;function i(d,f,p){return typeof p!="function"?i(d,f,()=>{}):a(d,f,function m(x,v,b,w,k,E){const N=p(x,v,b,w,k,E);return N!==void 0?!!N:a(x,v,m,E)},new Map)}function a(d,f,p,m){if(f===d)return!0;switch(typeof f){case"object":return s(d,f,p,m);case"function":return Object.keys(f).length>0?a(d,{...f},p,m):n.eq(d,f);default:return t.isObject(d)?typeof f=="string"?f==="":!0:n.eq(d,f)}}function s(d,f,p,m){if(f==null)return!0;if(Array.isArray(f))return l(d,f,p,m);if(f instanceof Map)return o(d,f,p,m);if(f instanceof Set)return c(d,f,p,m);const x=Object.keys(f);if(d==null)return x.length===0;if(x.length===0)return!0;if(m!=null&&m.has(f))return m.get(f)===d;m==null||m.set(f,d);try{for(let v=0;v<x.length;v++){const b=x[v];if(!r.isPrimitive(d)&&!(b in d)||f[b]===void 0&&d[b]!==void 0||f[b]===null&&d[b]!==null||!p(d[b],f[b],b,d,f,m))return!1}return!0}finally{m==null||m.delete(f)}}function o(d,f,p,m){if(f.size===0)return!0;if(!(d instanceof Map))return!1;for(const[x,v]of f.entries()){const b=d.get(x);if(p(b,v,x,d,f,m)===!1)return!1}return!0}function l(d,f,p,m){if(f.length===0)return!0;if(!Array.isArray(d))return!1;const x=new Set;for(let v=0;v<f.length;v++){const b=f[v];let w=!1;for(let k=0;k<d.length;k++){if(x.has(k))continue;const E=d[k];let N=!1;if(p(E,b,v,d,f,m)&&(N=!0),N){x.add(k),w=!0;break}}if(!w)return!1}return!0}function c(d,f,p,m){return f.size===0?!0:d instanceof Set?l([...d],[...f],p,m):!1}e.isMatchWith=i,e.isSetMatch=c})(Bhe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bhe;function r(n,i){return t.isMatchWith(n,i,()=>{})}e.isMatch=r})(_B);var Uhe={},IB={},$he={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})($he);var OB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(OB);var PB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",o="[object Date]",l="[object Map]",c="[object Set]",d="[object Array]",f="[object Function]",p="[object ArrayBuffer]",m="[object Object]",x="[object Error]",v="[object DataView]",b="[object Uint8Array]",w="[object Uint8ClampedArray]",k="[object Uint16Array]",E="[object Uint32Array]",N="[object BigUint64Array]",P="[object Int8Array]",R="[object Int16Array]",O="[object Int32Array]",D="[object BigInt64Array]",L="[object Float32Array]",B="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=p,e.arrayTag=d,e.bigInt64ArrayTag=D,e.bigUint64ArrayTag=N,e.booleanTag=i,e.dataViewTag=v,e.dateTag=o,e.errorTag=x,e.float32ArrayTag=L,e.float64ArrayTag=B,e.functionTag=f,e.int16ArrayTag=R,e.int32ArrayTag=O,e.int8ArrayTag=P,e.mapTag=l,e.numberTag=n,e.objectTag=m,e.regexpTag=t,e.setTag=c,e.stringTag=r,e.symbolTag=s,e.uint16ArrayTag=k,e.uint32ArrayTag=E,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=w})(PB);var zhe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(zhe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$he,r=OB,n=PB,i=AB,a=zhe;function s(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,p,m=new Map,x=void 0){const v=x==null?void 0:x(d,f,p,m);if(v!==void 0)return v;if(i.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const b=new Array(d.length);m.set(d,b);for(let w=0;w<d.length;w++)b[w]=o(d[w],w,p,m,x);return Object.hasOwn(d,"index")&&(b.index=d.index),Object.hasOwn(d,"input")&&(b.input=d.input),b}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const b=new RegExp(d.source,d.flags);return b.lastIndex=d.lastIndex,b}if(d instanceof Map){const b=new Map;m.set(d,b);for(const[w,k]of d)b.set(w,o(k,w,p,m,x));return b}if(d instanceof Set){const b=new Set;m.set(d,b);for(const w of d)b.add(o(w,void 0,p,m,x));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(a.isTypedArray(d)){const b=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,b);for(let w=0;w<d.length;w++)b[w]=o(d[w],w,p,m,x);return b}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const b=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,b),l(b,d,p,m,x),b}if(typeof File<"u"&&d instanceof File){const b=new File([d],d.name,{type:d.type});return m.set(d,b),l(b,d,p,m,x),b}if(typeof Blob<"u"&&d instanceof Blob){const b=new Blob([d],{type:d.type});return m.set(d,b),l(b,d,p,m,x),b}if(d instanceof Error){const b=new d.constructor;return m.set(d,b),b.message=d.message,b.name=d.name,b.stack=d.stack,b.cause=d.cause,l(b,d,p,m,x),b}if(d instanceof Boolean){const b=new Boolean(d.valueOf());return m.set(d,b),l(b,d,p,m,x),b}if(d instanceof Number){const b=new Number(d.valueOf());return m.set(d,b),l(b,d,p,m,x),b}if(d instanceof String){const b=new String(d.valueOf());return m.set(d,b),l(b,d,p,m,x),b}if(typeof d=="object"&&c(d)){const b=Object.create(Object.getPrototypeOf(d));return m.set(d,b),l(b,d,p,m,x),b}return d}function l(d,f,p=d,m,x){const v=[...Object.keys(f),...t.getSymbols(f)];for(let b=0;b<v.length;b++){const w=v[b],k=Object.getOwnPropertyDescriptor(d,w);(k==null||k.writable)&&(d[w]=o(f[w],w,p,m,x))}}function c(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=s,e.cloneDeepWithImpl=o,e.copyProperties=l})(IB);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IB;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(Uhe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_B,r=Uhe;function n(i){return i=r.cloneDeep(i),a=>t.isMatch(a,i)}e.matches=n})(Lhe);var Hhe={},Whe={},Vhe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IB,r=PB;function n(i,a){return t.cloneDeepWith(i,(s,o,l,c)=>{const d=a==null?void 0:a(s,o,l,c);if(d!==void 0)return d;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new i.constructor(i==null?void 0:i.valueOf());return t.copyProperties(f,i),f}case r.argumentsTag:{const f={};return t.copyProperties(f,i),f.length=i.length,f[Symbol.iterator]=i[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n})(Vhe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Vhe;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(Whe);var qhe={},RB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(RB);var Ghe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OB;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(Ghe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EB,r=RB,n=Ghe,i=I3;function a(s,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&t.isDeepKey(o)&&(s==null?void 0:s[o])==null?l=i.toPath(o):l=[o],l.length===0)return!1;let c=s;for(let d=0;d<l.length;d++){const f=l[d];if((c==null||!Object.hasOwn(c,f))&&!((Array.isArray(c)||n.isArguments(c))&&r.isIndex(f)&&f<c.length))return!1;c=c[f]}return!0}e.has=a})(qhe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_B,r=T3,n=Whe,i=A3,a=qhe;function s(o,l){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return l=n.cloneDeep(l),function(c){const d=i.get(c,o);return d===void 0?a.has(c,o):l===void 0?d===void 0:t.isMatch(d,l)}}e.matchesProperty=s})(Hhe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kB,r=Fhe,n=Lhe,i=Hhe;function a(s){if(s==null)return t.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):n.matches(s);case"string":case"symbol":case"number":return r.property(s)}}e.iteratee=a})(Mhe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Phe,r=kB,n=Rhe,i=Mhe;function a(s,o=r.identity){return n.isArrayLikeObject(s)?t.uniqBy(Array.from(s),i.iteratee(o)):[]}e.uniqBy=a})(Ohe);var art=Ohe.uniqBy;const WY=Bs(art);function srt(e,t,r){return t===!0?WY(e,r):typeof t=="function"?WY(e,t):e}var jB=I.createContext(null),ort=e=>e,ya=()=>{var e=I.useContext(jB);return e?e.store.dispatch:ort},JN=()=>{},lrt=()=>JN,crt=(e,t)=>e===t;function br(e){var t=I.useContext(jB);return ufe.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:lrt,t?t.store.getState:JN,t?t.store.getState:JN,t?e:JN,crt)}function urt(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function drt(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function frt(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var VY=e=>Array.isArray(e)?e:[e];function hrt(e){const t=Array.isArray(e[0])?e[0]:e;return frt(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function prt(e,t){const r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var mrt=class{constructor(e){this.value=e}deref(){return this.value}},grt=typeof WeakRef<"u"?WeakRef:mrt,xrt=0,qY=1;function V_(){return{s:xrt,v:void 0,o:null,p:null}}function Khe(e,t={}){let r=V_();const{resultEqualityCheck:n}=t;let i,a=0;function s(){var f;let o=r;const{length:l}=arguments;for(let p=0,m=l;p<m;p++){const x=arguments[p];if(typeof x=="function"||typeof x=="object"&&x!==null){let v=o.o;v===null&&(o.o=v=new WeakMap);const b=v.get(x);b===void 0?(o=V_(),v.set(x,o)):o=b}else{let v=o.p;v===null&&(o.p=v=new Map);const b=v.get(x);b===void 0?(o=V_(),v.set(x,o)):o=b}}const c=o;let d;if(o.s===qY)d=o.v;else if(d=e.apply(null,arguments),a++,n){const p=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;p!=null&&n(p,d)&&(d=p,a!==0&&a--),i=typeof d=="object"&&d!==null||typeof d=="function"?new grt(d):d}return c.s=qY,c.v=d,d}return s.clearCache=()=>{r=V_(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function vrt(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...i)=>{let a=0,s=0,o,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),urt(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const d={...r,...l},{memoize:f,memoizeOptions:p=[],argsMemoize:m=Khe,argsMemoizeOptions:x=[]}=d,v=VY(p),b=VY(x),w=hrt(i),k=f(function(){return a++,c.apply(null,arguments)},...v),E=m(function(){s++;const P=prt(w,arguments);return o=k.apply(null,P),o},...b);return Object.assign(E,{resultFunc:c,memoizedResultFunc:k,dependencies:w,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:f,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var st=vrt(Khe),yrt=Object.assign((e,t=st)=>{drt(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((s,o,l)=>(s[r[l]]=o,s),{}))},{withTypes:()=>yrt}),Xhe={},Yhe={},Qhe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,a)=>{if(n!==i){const s=t(n),o=t(i);if(s===o&&s===0){if(n<i)return a==="desc"?1:-1;if(n>i)return a==="desc"?-1:1}return a==="desc"?o-s:s-o}return 0};e.compareValues=r})(Qhe);var Jhe={},DB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(DB);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DB,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||s!=null&&Object.hasOwn(s,a)}e.isKey=i})(Jhe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qhe,r=Jhe,n=I3;function i(a,s,o,l){if(a==null)return[];o=l?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(m=>String(m));const c=(m,x)=>{let v=m;for(let b=0;b<x.length&&v!=null;++b)v=v[x[b]];return v},d=(m,x)=>x==null||m==null?x:typeof m=="object"&&"key"in m?Object.hasOwn(x,m.key)?x[m.key]:c(x,m.path):typeof m=="function"?m(x):Array.isArray(m)?c(x,m):typeof x=="object"?x[m]:x,f=s.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:n.toPath(m)}));return a.map(m=>({original:m,criteria:f.map(x=>d(x,m))})).slice().sort((m,x)=>{for(let v=0;v<f.length;v++){const b=t.compareValues(m.criteria[v],x.criteria[v],o[v]);if(b!==0)return b}return 0}).map(m=>m.original)}e.orderBy=i})(Yhe);var Zhe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const i=[],a=Math.floor(n),s=(o,l)=>{for(let c=0;c<o.length;c++){const d=o[c];Array.isArray(d)&&l<a?s(d,l+1):i.push(d)}};return s(r,0),i}e.flatten=t})(Zhe);var MB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RB,r=O3,n=NB,i=TB;function a(s,o,l){return n.isObject(l)&&(typeof o=="number"&&r.isArrayLike(l)&&t.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?i.eq(l[o],s):!1}e.isIterateeCall=a})(MB);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yhe,r=Zhe,n=MB;function i(a,...s){const o=s.length;return o>1&&n.isIterateeCall(a,s[0],s[1])?s=[]:o>2&&n.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),t.orderBy(a,r.flatten(s),["asc"])}e.sortBy=i})(Xhe);var brt=Xhe.sortBy;const P3=Bs(brt);var epe=e=>e.legend.settings,wrt=e=>e.legend.size,Srt=e=>e.legend.payload;st([Srt,epe],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?P3(n,r):n});var q_=1;function Ert(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=I.useState({height:0,left:0,top:0,width:0}),n=I.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-t.height)>q_||Math.abs(s.left-t.left)>q_||Math.abs(s.top-t.top)>q_||Math.abs(s.width-t.width)>q_)&&r({height:s.height,left:s.left,top:s.top,width:s.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Ns(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Crt=typeof Symbol=="function"&&Symbol.observable||"@@observable",GY=Crt,UD=()=>Math.random().toString(36).substring(7).split("").join("."),krt={INIT:`@@redux/INIT${UD()}`,REPLACE:`@@redux/REPLACE${UD()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${UD()}`},gI=krt;function FB(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function tpe(e,t,r){if(typeof e!="function")throw new Error(Ns(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ns(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ns(1));return r(tpe)(e,t)}let n=e,i=t,a=new Map,s=a,o=0,l=!1;function c(){s===a&&(s=new Map,a.forEach((b,w)=>{s.set(w,b)}))}function d(){if(l)throw new Error(Ns(3));return i}function f(b){if(typeof b!="function")throw new Error(Ns(4));if(l)throw new Error(Ns(5));let w=!0;c();const k=o++;return s.set(k,b),function(){if(w){if(l)throw new Error(Ns(6));w=!1,c(),s.delete(k),a=null}}}function p(b){if(!FB(b))throw new Error(Ns(7));if(typeof b.type>"u")throw new Error(Ns(8));if(typeof b.type!="string")throw new Error(Ns(17));if(l)throw new Error(Ns(9));try{l=!0,i=n(i,b)}finally{l=!1}return(a=s).forEach(k=>{k()}),b}function m(b){if(typeof b!="function")throw new Error(Ns(10));n=b,p({type:gI.REPLACE})}function x(){const b=f;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(Ns(11));function k(){const N=w;N.next&&N.next(d())}return k(),{unsubscribe:b(k)}},[GY](){return this}}}return p({type:gI.INIT}),{dispatch:p,subscribe:f,getState:d,replaceReducer:m,[GY]:x}}function _rt(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:gI.INIT})>"u")throw new Error(Ns(12));if(typeof r(void 0,{type:gI.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ns(13))})}function rpe(e){const t=Object.keys(e),r={};for(let a=0;a<t.length;a++){const s=t[a];typeof e[s]=="function"&&(r[s]=e[s])}const n=Object.keys(r);let i;try{_rt(r)}catch(a){i=a}return function(s={},o){if(i)throw i;let l=!1;const c={};for(let d=0;d<n.length;d++){const f=n[d],p=r[f],m=s[f],x=p(m,o);if(typeof x>"u")throw o&&o.type,new Error(Ns(14));c[f]=x,l=l||x!==m}return l=l||n.length!==Object.keys(s).length,l?c:s}}function xI(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function Nrt(...e){return t=>(r,n)=>{const i=t(r,n);let a=()=>{throw new Error(Ns(15))};const s={getState:i.getState,dispatch:(l,...c)=>a(l,...c)},o=e.map(l=>l(s));return a=xI(...o)(i.dispatch),{...i,dispatch:a}}}function npe(e){return FB(e)&&"type"in e&&typeof e.type=="string"}var ipe=Symbol.for("immer-nothing"),KY=Symbol.for("immer-draftable"),Go=Symbol.for("immer-state");function zu(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ec=Object,ky=ec.getPrototypeOf,vI="constructor",R3="prototype",yF="configurable",yI="enumerable",ZN="writable",PS="value",Uh=e=>!!e&&!!e[Go];function lf(e){var t;return e?ape(e)||j3(e)||!!e[KY]||!!((t=e[vI])!=null&&t[KY])||D3(e)||M3(e):!1}var Art=ec[R3][vI].toString(),XY=new WeakMap;function ape(e){if(!e||!LB(e))return!1;const t=ky(e);if(t===null||t===ec[R3])return!0;const r=ec.hasOwnProperty.call(t,vI)&&t[vI];if(r===Object)return!0;if(!V1(r))return!1;let n=XY.get(r);return n===void 0&&(n=Function.toString.call(r),XY.set(r,n)),n===Art}function gC(e,t,r=!0){xC(e)===0?(r?Reflect.ownKeys(e):ec.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function xC(e){const t=e[Go];return t?t.type_:j3(e)?1:D3(e)?2:M3(e)?3:0}var YY=(e,t,r=xC(e))=>r===2?e.has(t):ec[R3].hasOwnProperty.call(e,t),bF=(e,t,r=xC(e))=>r===2?e.get(t):e[t],bI=(e,t,r,n=xC(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function Trt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var j3=Array.isArray,D3=e=>e instanceof Map,M3=e=>e instanceof Set,LB=e=>typeof e=="object",V1=e=>typeof e=="function",$D=e=>typeof e=="boolean",Zf=e=>e.copy_||e.base_,BB=e=>e.modified_?e.copy_:e.base_;function wF(e,t){if(D3(e))return new Map(e);if(M3(e))return new Set(e);if(j3(e))return Array[R3].slice.call(e);const r=ape(e);if(t===!0||t==="class_only"&&!r){const n=ec.getOwnPropertyDescriptors(e);delete n[Go];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const s=i[a],o=n[s];o[ZN]===!1&&(o[ZN]=!0,o[yF]=!0),(o.get||o.set)&&(n[s]={[yF]:!0,[ZN]:!0,[yI]:o[yI],[PS]:e[s]})}return ec.create(ky(e),n)}else{const n=ky(e);if(n!==null&&r)return{...e};const i=ec.create(n);return ec.assign(i,e)}}function UB(e,t=!1){return F3(e)||Uh(e)||(xC(e)>1&&ec.defineProperties(e,{set:G_,add:G_,clear:G_,delete:G_}),ec.freeze(e),t&&gC(e,(r,n)=>{UB(n,!0)},!1)),e}function Irt(){zu(2)}var G_={[PS]:Irt};function F3(e){return e===null||!LB(e)?!0:ec.isFrozen(e)}var wI="MapSet",SF="Patches",spe={};function _y(e){const t=spe[e];return t||zu(0,e),t}var Ort=e=>!!spe[e],RS,ope=()=>RS,Prt=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Ort(wI)?_y(wI):void 0});function QY(e,t){t&&(e.patchPlugin_=_y(SF),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function EF(e){CF(e),e.drafts_.forEach(Rrt),e.drafts_=null}function CF(e){e===RS&&(RS=e.parent_)}var JY=e=>RS=Prt(RS,e);function Rrt(e){const t=e[Go];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function ZY(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[Go].modified_&&(EF(t),zu(4)),lf(e)&&(e=eQ(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(r[Go].base_,e,t)}else e=eQ(t,r);return jrt(t,e,!0),EF(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==ipe?e:void 0}function eQ(e,t){if(F3(t))return t;const r=t[Go];if(!r)return $B(t,e.handledSet_,e);if(!L3(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);upe(r,e)}return r.copy_}function jrt(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&UB(t,r)}function lpe(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var L3=(e,t)=>e.scope_===t,Drt=[];function cpe(e,t,r,n){const i=Zf(e),a=e.type_;if(n!==void 0&&bF(i,n,a)===t){bI(i,n,r,a);return}if(!e.draftLocations_){const o=e.draftLocations_=new Map;gC(i,(l,c)=>{if(Uh(c)){const d=o.get(c)||[];d.push(l),o.set(c,d)}})}const s=e.draftLocations_.get(t)??Drt;for(const o of s)bI(i,o,r,a)}function Mrt(e,t,r){e.callbacks_.push(function(i){var o;const a=t;if(!a||!L3(a,i))return;(o=i.mapSetPlugin_)==null||o.fixSetContents(a);const s=BB(a);cpe(e,a.draft_??a,s,r),upe(a,i)})}function upe(e,t){var n;if(e.modified_&&!e.finalized_&&(e.type_===3||(((n=e.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:i}=t;if(i){const a=i.getPath(e);a&&i.generatePatches_(e,a,t)}lpe(e)}}function Frt(e,t,r){const{scope_:n}=e;if(Uh(r)){const i=r[Go];L3(i,n)&&i.callbacks_.push(function(){eA(e);const s=BB(i);cpe(e,r,s,t)})}else lf(r)&&e.callbacks_.push(function(){const a=Zf(e);bF(a,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&$B(bF(e.copy_,t,e.type_),n.handledSet_,n)})}function $B(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||Uh(e)||t.has(e)||!lf(e)||F3(e)||(t.add(e),gC(e,(n,i)=>{if(Uh(i)){const a=i[Go];if(L3(a,r)){const s=BB(a);bI(e,n,s,e.type_),lpe(a)}}else lf(i)&&$B(i,t,r)})),e}function Lrt(e,t){const r=j3(e),n={type_:r?1:0,scope_:t?t.scope_:ope(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,a=zB;r&&(i=[n],a=jS);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return n.draft_=o,n.revoke_=s,[o,n]}var zB={get(e,t){if(t===Go)return e;const r=Zf(e);if(!YY(r,t,e.type_))return Brt(e,r,t);const n=r[t];if(e.finalized_||!lf(n))return n;if(n===zD(e.base_,t)){eA(e);const i=e.type_===1?+t:t,a=_F(e.scope_,n,e,i);return e.copy_[i]=a}return n},has(e,t){return t in Zf(e)},ownKeys(e){return Reflect.ownKeys(Zf(e))},set(e,t,r){const n=dpe(Zf(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=zD(Zf(e),t),a=i==null?void 0:i[Go];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(Trt(r,i)&&(r!==void 0||YY(e.base_,t,e.type_)))return!0;eA(e),kF(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),Frt(e,t,r)),!0},deleteProperty(e,t){return eA(e),zD(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),kF(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Zf(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[ZN]:!0,[yF]:e.type_!==1||t!=="length",[yI]:n[yI],[PS]:r[t]}},defineProperty(){zu(11)},getPrototypeOf(e){return ky(e.base_)},setPrototypeOf(){zu(12)}},jS={};gC(zB,(e,t)=>{jS[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}});jS.deleteProperty=function(e,t){return jS.set.call(this,e,t,void 0)};jS.set=function(e,t,r){return zB.set.call(this,e[0],t,r,e[0])};function zD(e,t){const r=e[Go];return(r?Zf(r):e)[t]}function Brt(e,t,r){var i;const n=dpe(t,r);return n?PS in n?n[PS]:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function dpe(e,t){if(!(t in e))return;let r=ky(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=ky(r)}}function kF(e){e.modified_||(e.modified_=!0,e.parent_&&kF(e.parent_))}function eA(e){e.copy_||(e.assigned_=new Map,e.copy_=wF(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Urt=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,i)=>{if(V1(r)&&!V1(n)){const s=n;n=r;const o=this;return function(c=s,...d){return o.produce(c,f=>n.call(this,f,...d))}}V1(n)||zu(6),i!==void 0&&!V1(i)&&zu(7);let a;if(lf(r)){const s=JY(this),o=_F(s,r,void 0);let l=!0;try{a=n(o),l=!1}finally{l?EF(s):CF(s)}return QY(s,i),ZY(a,s)}else if(!r||!LB(r)){if(a=n(r),a===void 0&&(a=r),a===ipe&&(a=void 0),this.autoFreeze_&&UB(a,!0),i){const s=[],o=[];_y(SF).generateReplacementPatches_(r,a,{patches_:s,inversePatches_:o}),i(s,o)}return a}else zu(1,r)},this.produceWithPatches=(r,n)=>{if(V1(r))return(o,...l)=>this.produceWithPatches(o,c=>r(c,...l));let i,a;return[this.produce(r,n,(o,l)=>{i=o,a=l}),i,a]},$D(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),$D(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),$D(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){lf(t)||zu(8),Uh(t)&&(t=Zu(t));const r=JY(this),n=_F(r,t,void 0);return n[Go].isManual_=!0,CF(r),n}finishDraft(t,r){const n=t&&t[Go];(!n||!n.isManual_)&&zu(9);const{scope_:i}=n;return QY(i,r),ZY(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const a=r[n];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}n>-1&&(r=r.slice(n+1));const i=_y(SF).applyPatches_;return Uh(t)?i(t,r):this.produce(t,a=>i(a,r))}};function _F(e,t,r,n){const[i,a]=D3(t)?_y(wI).proxyMap_(t,r):M3(t)?_y(wI).proxySet_(t,r):Lrt(t,r);return((r==null?void 0:r.scope_)??ope()).drafts_.push(i),a.callbacks_=(r==null?void 0:r.callbacks_)??[],a.key_=n,r&&n!==void 0?Mrt(r,a,n):a.callbacks_.push(function(l){var d;(d=l.mapSetPlugin_)==null||d.fixSetContents(a);const{patchPlugin_:c}=l;a.modified_&&c&&c.generatePatches_(a,[],l)}),i}function Zu(e){return Uh(e)||zu(10,e),fpe(e)}function fpe(e){if(!lf(e)||F3(e))return e;const t=e[Go];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=wF(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=wF(e,!0);return gC(r,(i,a)=>{bI(r,i,fpe(a))},n),t&&(t.finalized_=!1),r}var $rt=new Urt,hpe=$rt.produce;function ppe(e){return({dispatch:r,getState:n})=>i=>a=>typeof a=="function"?a(r,n,e):i(a)}var zrt=ppe(),Hrt=ppe,Wrt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?xI:xI.apply(null,arguments)};function uu(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(sc(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>npe(n)&&n.type===e,r}var mpe=class Yw extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Yw.prototype)}static get[Symbol.species](){return Yw}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Yw(...t[0].concat(this)):new Yw(...t.concat(this))}};function tQ(e){return lf(e)?hpe(e,()=>{}):e}function K_(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function Vrt(e){return typeof e=="boolean"}var qrt=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=t??{};let s=new mpe;return r&&(Vrt(r)?s.push(zrt):s.push(Hrt(r.extraArgument))),s},gpe="RTK_autoBatch",Oi=()=>e=>({payload:e,meta:{[gpe]:!0}}),rQ=e=>t=>{setTimeout(t,e)},xpe=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,a=!1,s=!1;const o=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:rQ(10):e.type==="callback"?e.queueNotification:rQ(e.timeout),c=()=>{s=!1,a&&(a=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>i&&d(),p=n.subscribe(f);return o.add(d),()=>{p(),o.delete(d)}},dispatch(d){var f;try{return i=!((f=d==null?void 0:d.meta)!=null&&f[gpe]),a=!i,a&&(s||(s=!0,l(c))),n.dispatch(d)}finally{i=!0}}})},Grt=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new mpe(e);return n&&i.push(xpe(typeof n=="object"?n:void 0)),i};function Krt(e){const t=qrt(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(FB(r))o=rpe(r);else throw new Error(sc(1));let l;typeof n=="function"?l=n(t):l=t();let c=xI;i&&(c=Wrt({trace:!1,...typeof i=="object"&&i}));const d=Nrt(...l),f=Grt(d);let p=typeof s=="function"?s(f):f();const m=c(...p);return tpe(o,a,m)}function vpe(e){const t={},r=[];let n;const i={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(sc(28));if(o in t)throw new Error(sc(29));return t[o]=s,i},addAsyncThunk(a,s){return s.pending&&(t[a.pending.type]=s.pending),s.rejected&&(t[a.rejected.type]=s.rejected),s.fulfilled&&(t[a.fulfilled.type]=s.fulfilled),s.settled&&r.push({matcher:a.settled,reducer:s.settled}),i},addMatcher(a,s){return r.push({matcher:a,reducer:s}),i},addDefaultCase(a){return n=a,i}};return e(i),[t,r,n]}function Xrt(e){return typeof e=="function"}function Yrt(e,t){let[r,n,i]=vpe(t),a;if(Xrt(e))a=()=>tQ(e());else{const o=tQ(e);a=()=>o}function s(o=a(),l){let c=[r[l.type],...n.filter(({matcher:d})=>d(l)).map(({reducer:d})=>d)];return c.filter(d=>!!d).length===0&&(c=[i]),c.reduce((d,f)=>{if(f)if(Uh(d)){const m=f(d,l);return m===void 0?d:m}else{if(lf(d))return hpe(d,p=>f(p,l));{const p=f(d,l);if(p===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return d},o)}return s.getInitialState=a,s}var Qrt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Jrt=(e=21)=>{let t="",r=e;for(;r--;)t+=Qrt[Math.random()*64|0];return t},Zrt=Symbol.for("rtk-slice-createasyncthunk");function ent(e,t){return`${e}/${t}`}function tnt({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[Zrt];return function(i){const{name:a,reducerPath:s=a}=i;if(!a)throw new Error(sc(11));const o=(typeof i.reducers=="function"?i.reducers(nnt()):i.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(N,P){const R=typeof N=="string"?N:N.type;if(!R)throw new Error(sc(12));if(R in c.sliceCaseReducersByType)throw new Error(sc(13));return c.sliceCaseReducersByType[R]=P,d},addMatcher(N,P){return c.sliceMatchers.push({matcher:N,reducer:P}),d},exposeAction(N,P){return c.actionCreators[N]=P,d},exposeCaseReducer(N,P){return c.sliceCaseReducersByName[N]=P,d}};l.forEach(N=>{const P=o[N],R={reducerName:N,type:ent(a,N),createNotation:typeof i.reducers=="function"};ant(P)?ont(R,P,d,t):int(R,P,d)});function f(){const[N={},P=[],R=void 0]=typeof i.extraReducers=="function"?vpe(i.extraReducers):[i.extraReducers],O={...N,...c.sliceCaseReducersByType};return Yrt(i.initialState,D=>{for(let L in O)D.addCase(L,O[L]);for(let L of c.sliceMatchers)D.addMatcher(L.matcher,L.reducer);for(let L of P)D.addMatcher(L.matcher,L.reducer);R&&D.addDefaultCase(R)})}const p=N=>N,m=new Map,x=new WeakMap;let v;function b(N,P){return v||(v=f()),v(N,P)}function w(){return v||(v=f()),v.getInitialState()}function k(N,P=!1){function R(D){let L=D[N];return typeof L>"u"&&P&&(L=K_(x,R,w)),L}function O(D=p){const L=K_(m,P,()=>new WeakMap);return K_(L,D,()=>{const B={};for(const[z,H]of Object.entries(i.selectors??{}))B[z]=rnt(H,D,()=>K_(x,D,w),P);return B})}return{reducerPath:N,getSelectors:O,get selectors(){return O(R)},selectSlice:R}}const E={name:a,reducer:b,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:w,...k(s),injectInto(N,{reducerPath:P,...R}={}){const O=P??s;return N.inject({reducerPath:O,reducer:b},R),{...E,...k(O,!0)}}};return E}}function rnt(e,t,r,n){function i(a,...s){let o=t(a);return typeof o>"u"&&n&&(o=r()),e(o,...s)}return i.unwrapped=e,i}var Pl=tnt();function nnt(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function int({type:e,reducerName:t,createNotation:r},n,i){let a,s;if("reducer"in n){if(r&&!snt(n))throw new Error(sc(17));a=n.reducer,s=n.prepare}else a=n;i.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,s?uu(e,s):uu(e))}function ant(e){return e._reducerDefinitionType==="asyncThunk"}function snt(e){return e._reducerDefinitionType==="reducerWithPrepare"}function ont({type:e,reducerName:t},r,n,i){if(!i)throw new Error(sc(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:l,settled:c,options:d}=r,f=i(e,a,d);n.exposeAction(t,f),s&&n.addCase(f.fulfilled,s),o&&n.addCase(f.pending,o),l&&n.addCase(f.rejected,l),c&&n.addMatcher(f.settled,c),n.exposeCaseReducer(t,{fulfilled:s||X_,pending:o||X_,rejected:l||X_,settled:c||X_})}function X_(){}var lnt="task",ype="listener",bpe="completed",HB="cancelled",cnt=`task-${HB}`,unt=`task-${bpe}`,NF=`${ype}-${HB}`,dnt=`${ype}-${bpe}`,B3=class{constructor(e){kR(this,"name","TaskAbortError");kR(this,"message");this.code=e,this.message=`${lnt} ${HB} (reason: ${e})`}},WB=(e,t)=>{if(typeof e!="function")throw new TypeError(sc(32))},SI=()=>{},wpe=(e,t=SI)=>(e.catch(t),e),Spe=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Ig=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Og=e=>{if(e.aborted){const{reason:t}=e;throw new B3(t)}};function Epe(e,t){let r=SI;return new Promise((n,i)=>{const a=()=>i(new B3(e.reason));if(e.aborted){a();return}r=Spe(e,a),t.finally(()=>r()).then(n,i)}).finally(()=>{r=SI})}var fnt=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof B3?"cancelled":"rejected",error:r}}finally{t==null||t()}},EI=e=>t=>wpe(Epe(e,t).then(r=>(Og(e),r))),Cpe=e=>{const t=EI(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:kv}=Object,nQ={},U3="listenerMiddleware",hnt=(e,t)=>{const r=n=>Spe(e,()=>Ig(n,e.reason));return(n,i)=>{WB(n);const a=new AbortController;r(a);const s=fnt(async()=>{Og(e),Og(a.signal);const o=await n({pause:EI(a.signal),delay:Cpe(a.signal),signal:a.signal});return Og(a.signal),o},()=>Ig(a,unt));return i!=null&&i.autoJoin&&t.push(s.catch(SI)),{result:EI(e)(s),cancel(){Ig(a,cnt)}}}},pnt=(e,t)=>{const r=async(n,i)=>{Og(t);let a=()=>{};const o=[new Promise((l,c)=>{let d=e({predicate:n,effect:(f,p)=>{p.unsubscribe(),l([f,p.getState(),p.getOriginalState()])}});a=()=>{d(),c()}})];i!=null&&o.push(new Promise(l=>setTimeout(l,i,null)));try{const l=await Epe(t,Promise.race(o));return Og(t),l}finally{a()}};return(n,i)=>wpe(r(n,i))},kpe=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:a}=e;if(t)i=uu(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(sc(21));return WB(a),{predicate:i,type:t,effect:a}},_pe=kv(e=>{const{type:t,predicate:r,effect:n}=kpe(e);return{id:Jrt(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(sc(22))}}},{withTypes:()=>_pe}),iQ=(e,t)=>{const{type:r,effect:n,predicate:i}=kpe(t);return Array.from(e.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===i)&&a.effect===n)},AF=e=>{e.pending.forEach(t=>{Ig(t,NF)})},mnt=(e,t)=>()=>{for(const r of t.keys())AF(r);e.clear()},aQ=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Npe=kv(uu(`${U3}/add`),{withTypes:()=>Npe}),gnt=uu(`${U3}/removeAll`),Ape=kv(uu(`${U3}/remove`),{withTypes:()=>Ape}),xnt=(...e)=>{console.error(`${U3}/error`,...e)},vC=(e={})=>{const t=new Map,r=new Map,n=m=>{const x=r.get(m)??0;r.set(m,x+1)},i=m=>{const x=r.get(m)??1;x===1?r.delete(m):r.set(m,x-1)},{extra:a,onError:s=xnt}=e;WB(s);const o=m=>(m.unsubscribe=()=>t.delete(m.id),t.set(m.id,m),x=>{m.unsubscribe(),x!=null&&x.cancelActive&&AF(m)}),l=m=>{const x=iQ(t,m)??_pe(m);return o(x)};kv(l,{withTypes:()=>l});const c=m=>{const x=iQ(t,m);return x&&(x.unsubscribe(),m.cancelActive&&AF(x)),!!x};kv(c,{withTypes:()=>c});const d=async(m,x,v,b)=>{const w=new AbortController,k=pnt(l,w.signal),E=[];try{m.pending.add(w),n(m),await Promise.resolve(m.effect(x,kv({},v,{getOriginalState:b,condition:(N,P)=>k(N,P).then(Boolean),take:k,delay:Cpe(w.signal),pause:EI(w.signal),extra:a,signal:w.signal,fork:hnt(w.signal,E),unsubscribe:m.unsubscribe,subscribe:()=>{t.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((N,P,R)=>{N!==w&&(Ig(N,NF),R.delete(N))})},cancel:()=>{Ig(w,NF),m.pending.delete(w)},throwIfCancelled:()=>{Og(w.signal)}})))}catch(N){N instanceof B3||aQ(s,N,{raisedBy:"effect"})}finally{await Promise.all(E),Ig(w,dnt),i(m),m.pending.delete(w)}},f=mnt(t,r);return{middleware:m=>x=>v=>{if(!npe(v))return x(v);if(Npe.match(v))return l(v.payload);if(gnt.match(v)){f();return}if(Ape.match(v))return c(v.payload);let b=m.getState();const w=()=>{if(b===nQ)throw new Error(sc(23));return b};let k;try{if(k=x(v),t.size>0){const E=m.getState(),N=Array.from(t.values());for(const P of N){let R=!1;try{R=P.predicate(v,E,b)}catch(O){R=!1,aQ(s,O,{raisedBy:"predicate"})}R&&d(P,v,m,w)}}}finally{b=nQ}return k},startListening:l,stopListening:c,clearListeners:f}};function sc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var vnt={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Tpe=Pl({name:"chartLayout",initialState:vnt,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,i,a;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:ynt,setLayout:bnt,setChartSize:wnt,setScale:Snt}=Tpe.actions,Ent=Tpe.reducer;function Ipe(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function sQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function lv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sQ(Object(r),!0).forEach(function(n){Cnt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cnt(e,t,r){return(t=knt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function knt(e){var t=_nt(e,"string");return typeof t=="symbol"?t:t+""}function _nt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fo(e,t,r){return ys(e)||ys(t)?r:of(t)?Cy(e,t,r):typeof t=="function"?t(e):r}var Nnt=(e,t,r)=>{if(t&&r){var{width:n,height:i}=r,{align:a,verticalAlign:s,layout:o}=t;if((o==="vertical"||o==="horizontal"&&s==="middle")&&a!=="center"&&ur(e[a]))return lv(lv({},e),{},{[a]:e[a]+(n||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&s!=="middle"&&ur(e[s]))return lv(lv({},e),{},{[s]:e[s]+(i||0)})}return e},Wx=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Ope=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var i,a,s=e.map(o=>(o.coordinate===t&&(i=!0),o.coordinate===r&&(a=!0),o.coordinate));return i||s.push(t),a||s.push(r),s},Ppe=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:i,range:a,scale:s,realScaleType:o,isCategorical:l,categoricalDomain:c,tickCount:d,ticks:f,niceTicks:p,axisType:m}=e;if(!s)return null;var x=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,v=i==="category"&&s.bandwidth?s.bandwidth()/x:0;if(v=m==="angleAxis"&&a&&a.length>=2?hl(a[0]-a[1])*2*v:v,f||p){var b=(f||p||[]).map((w,k)=>{var E=n?n.indexOf(w):w;return{coordinate:s(E)+v,value:w,offset:v,index:k}});return b.filter(w=>!cd(w.coordinate))}return l&&c?c.map((w,k)=>({coordinate:s(w)+v,value:w,index:k,offset:v})):s.ticks&&d!=null?s.ticks(d).map((w,k)=>({coordinate:s(w)+v,value:w,offset:v,index:k})):s.domain().map((w,k)=>({coordinate:s(w)+v,value:n?n[w]:w,index:k,offset:v}))},oQ=1e-4,Ant=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),i=Math.min(n[0],n[1])-oQ,a=Math.max(n[0],n[1])+oQ,s=e(t[0]),o=e(t[r-1]);(s<i||s>a||o<i||o>a)&&e.domain([t[0],t[r-1]])}},Tnt=(e,t)=>{if(!t||t.length!==2||!ur(t[0])||!ur(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!ur(e[0])||e[0]<r)&&(i[0]=r),(!ur(e[1])||e[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},Int=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,a=0,s=0;s<t;++s){var o=cd(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=i,e[s][r][1]=i+o,i=e[s][r][1]):(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1])}},Ont=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,a=0;a<t;++a){var s=cd(e[a][r][1])?e[a][r][0]:e[a][r][1];s>=0?(e[a][r][0]=i,e[a][r][1]=i+s,i=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},Pnt={sign:Int,expand:Mtt,none:Ey,silhouette:Ftt,wiggle:Ltt,positive:Ont},Rnt=(e,t,r)=>{var n=Pnt[r],i=Dtt().keys(t).value((a,s)=>Number(fo(a,s,0))).order(xF).offset(n);return i(e)};function jnt(e){return e==null?void 0:String(e)}var lQ=e=>{var{axis:t,ticks:r,offset:n,bandSize:i,entry:a,index:s}=e;if(t.type==="category")return r[s]?r[s].coordinate+n:null;var o=fo(a,t.dataKey,t.scale.domain()[s]);return ys(o)?null:t.scale(o)-i/2+n},Dnt=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},Mnt=e=>{var t=e.flat(2).filter(ur);return[Math.min(...t),Math.max(...t)]},Fnt=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],Lnt=(e,t,r)=>{if(e!=null)return Fnt(Object.keys(e).reduce((n,i)=>{var a=e[i],{stackedData:s}=a,o=s.reduce((l,c)=>{var d=Ipe(c,t,r),f=Mnt(d);return[Math.min(l[0],f[0]),Math.max(l[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},cQ=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,uQ=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,CI=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var i=P3(t,d=>d.coordinate),a=1/0,s=1,o=i.length;s<o;s++){var l=i[s],c=i[s-1];a=Math.min((l.coordinate||0)-(c.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function dQ(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:i,name:a}=e;return lv(lv({},t),{},{dataKey:r,payload:n,value:i,name:a})}function Rpe(e,t){if(e)return String(e);if(typeof t=="string")return t}var Bnt=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},Unt=(e,t)=>t==="centric"?e.angle:e.radius,Jh=e=>e.layout.width,Zh=e=>e.layout.height,$nt=e=>e.layout.scale,jpe=e=>e.layout.margin,$3=st(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),z3=st(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),znt="data-recharts-item-index",Hnt="data-recharts-item-data-key",yC=60;function fQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Y_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fQ(Object(r),!0).forEach(function(n){Wnt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wnt(e,t,r){return(t=Vnt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vnt(e){var t=qnt(e,"string");return typeof t=="symbol"?t:t+""}function qnt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gnt=e=>e.brush.height;function Knt(e){var t=z3(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:yC;return r+i}return r},0)}function Xnt(e){var t=z3(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:yC;return r+i}return r},0)}function Ynt(e){var t=$3(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function Qnt(e){var t=$3(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var ws=st([Jh,Zh,jpe,Gnt,Knt,Xnt,Ynt,Qnt,epe,wrt],(e,t,r,n,i,a,s,o,l,c)=>{var d={left:(r.left||0)+i,right:(r.right||0)+a},f={top:(r.top||0)+s,bottom:(r.bottom||0)+o},p=Y_(Y_({},f),d),m=p.bottom;p.bottom+=n,p=Nnt(p,l,c);var x=e-p.left-p.right,v=t-p.top-p.bottom;return Y_(Y_({brushBottom:m},p),{},{width:Math.max(x,0),height:Math.max(v,0)})}),Jnt=st(ws,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),VB=st(Jh,Zh,(e,t)=>({x:0,y:0,width:e,height:t})),Znt=I.createContext(null),Rl=()=>I.useContext(Znt)!=null,H3=e=>e.brush,W3=st([H3,ws,jpe],(e,t,r)=>({height:e.height,x:ur(e.x)?e.x:t.left,y:ur(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:ur(e.width)?e.width:t.width})),Dpe={},Mpe={},Fpe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:i,edges:a}={}){let s,o=null;const l=a!=null&&a.includes("leading"),c=a==null||a.includes("trailing"),d=()=>{o!==null&&(r.apply(s,o),s=void 0,o=null)},f=()=>{c&&d(),v()};let p=null;const m=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,f()},n)},x=()=>{p!==null&&(clearTimeout(p),p=null)},v=()=>{x(),s=void 0,o=null},b=()=>{d()},w=function(...k){if(i!=null&&i.aborted)return;s=this,o=k;const E=p==null;m(),l&&E&&d()};return w.schedule=m,w.cancel=v,w.flush=b,i==null||i.addEventListener("abort",v,{once:!0}),w}e.debounce=t})(Fpe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Fpe;function r(n,i=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:o=!0,maxWait:l}=a,c=Array(2);s&&(c[0]="leading"),o&&(c[1]="trailing");let d,f=null;const p=t.debounce(function(...v){d=n.apply(this,v),f=null},i,{edges:c}),m=function(...v){return l!=null&&(f===null&&(f=Date.now()),Date.now()-f>=l)?(d=n.apply(this,v),f=Date.now(),p.cancel(),p.schedule(),d):(p.apply(this,v),d)},x=()=>(p.flush(),d);return m.cancel=p.cancel,m.flush=x,m}e.debounce=r})(Mpe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Mpe;function r(n,i=0,a={}){const{leading:s=!0,trailing:o=!0}=a;return t.debounce(n,i,{leading:s,maxWait:i,trailing:o})}e.throttle=r})(Dpe);var eit=Dpe.throttle;const tit=Bs(eit);var kI=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(r.replace(/%s/g,()=>i[s++]))}},Lpe=(e,t,r)=>{var{width:n="100%",height:i="100%",aspect:a,maxHeight:s}=r,o=Bh(n)?e:Number(n),l=Bh(i)?t:Number(i);return a&&a>0&&(o?l=o/a:l&&(o=l*a),s&&l!=null&&l>s&&(l=s)),{calculatedWidth:o,calculatedHeight:l}},rit={width:0,height:0,overflow:"visible"},nit={width:0,overflowX:"visible"},iit={height:0,overflowY:"visible"},ait={},sit=e=>{var{width:t,height:r}=e,n=Bh(t),i=Bh(r);return n&&i?rit:n?nit:i?iit:ait};function oit(e){var{width:t,height:r,aspect:n}=e,i=t,a=r;return i===void 0&&a===void 0?(i="100%",a="100%"):i===void 0?i=n&&n>0?void 0:"100%":a===void 0&&(a=n&&n>0?void 0:"100%"),{width:i,height:a}}function xa(e){return Number.isFinite(e)}function cf(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function TF(){return TF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},TF.apply(null,arguments)}function hQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function pQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hQ(Object(r),!0).forEach(function(n){lit(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lit(e,t,r){return(t=cit(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cit(e){var t=uit(e,"string");return typeof t=="symbol"?t:t+""}function uit(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bpe=I.createContext({width:-1,height:-1});function dit(e){return cf(e.width)&&cf(e.height)}function Upe(e){var{children:t,width:r,height:n}=e,i=I.useMemo(()=>({width:r,height:n}),[r,n]);return dit(i)?I.createElement(Bpe.Provider,{value:i},t):null}var qB=()=>I.useContext(Bpe),fit=I.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:i,height:a,minWidth:s=0,minHeight:o,maxHeight:l,children:c,debounce:d=0,id:f,className:p,onResize:m,style:x={}}=e,v=I.useRef(null),b=I.useRef();b.current=m,I.useImperativeHandle(t,()=>v.current);var[w,k]=I.useState({containerWidth:n.width,containerHeight:n.height}),E=I.useCallback((D,L)=>{k(B=>{var z=Math.round(D),H=Math.round(L);return B.containerWidth===z&&B.containerHeight===H?B:{containerWidth:z,containerHeight:H}})},[]);I.useEffect(()=>{if(v.current==null||typeof ResizeObserver>"u")return mC;var D=H=>{var te,{width:Y,height:W}=H[0].contentRect;E(Y,W),(te=b.current)===null||te===void 0||te.call(b,Y,W)};d>0&&(D=tit(D,d,{trailing:!0,leading:!1}));var L=new ResizeObserver(D),{width:B,height:z}=v.current.getBoundingClientRect();return E(B,z),L.observe(v.current),()=>{L.disconnect()}},[E,d]);var{containerWidth:N,containerHeight:P}=w;kI(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:R,calculatedHeight:O}=Lpe(N,P,{width:i,height:a,aspect:r,maxHeight:l});return kI(R!=null&&R>0||O!=null&&O>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,R,O,i,a,s,o,r),I.createElement("div",{id:f?"".concat(f):void 0,className:gi("recharts-responsive-container",p),style:pQ(pQ({},x),{},{width:i,height:a,minWidth:s,minHeight:o,maxHeight:l}),ref:v},I.createElement("div",{style:sit({width:i,height:a})},I.createElement(Upe,{width:R,height:O},c)))}),hit=I.forwardRef((e,t)=>{var r=qB();if(cf(r.width)&&cf(r.height))return e.children;var{width:n,height:i}=oit({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:a,calculatedHeight:s}=Lpe(void 0,void 0,{width:n,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return ur(a)&&ur(s)?I.createElement(Upe,{width:a,height:s},e.children):I.createElement(fit,TF({},e,{width:n,height:i,ref:t}))});function $pe(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var V3=()=>{var e,t=Rl(),r=br(Jnt),n=br(W3),i=(e=br(H3))===null||e===void 0?void 0:e.padding;return!t||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},pit={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},zpe=()=>{var e;return(e=br(ws))!==null&&e!==void 0?e:pit},Hpe=()=>br(Jh),Wpe=()=>br(Zh),ii=e=>e.layout.layoutType,q3=()=>br(ii),mit=()=>{var e=q3();return e!==void 0},G3=e=>{var t=ya(),r=Rl(),{width:n,height:i}=e,a=qB(),s=n,o=i;return a&&(s=a.width>0?a.width:n,o=a.height>0?a.height:i),I.useEffect(()=>{!r&&cf(s)&&cf(o)&&t(wnt({width:s,height:o}))},[t,r,s,o]),null},Vpe=Symbol.for("immer-nothing"),mQ=Symbol.for("immer-draftable"),uc=Symbol.for("immer-state");function Hu(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var DS=Object.getPrototypeOf;function Ny(e){return!!e&&!!e[uc]}function lx(e){var t;return e?qpe(e)||Array.isArray(e)||!!e[mQ]||!!((t=e.constructor)!=null&&t[mQ])||bC(e)||X3(e):!1}var git=Object.prototype.constructor.toString(),gQ=new WeakMap;function qpe(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=gQ.get(r);return n===void 0&&(n=Function.toString.call(r),gQ.set(r,n)),n===git}function _I(e,t,r=!0){K3(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function K3(e){const t=e[uc];return t?t.type_:Array.isArray(e)?1:bC(e)?2:X3(e)?3:0}function IF(e,t){return K3(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Gpe(e,t,r){const n=K3(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function xit(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function bC(e){return e instanceof Map}function X3(e){return e instanceof Set}function Fm(e){return e.copy_||e.base_}function OF(e,t){if(bC(e))return new Map(e);if(X3(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=qpe(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[uc];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const s=i[a],o=n[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[s]})}return Object.create(DS(e),n)}else{const n=DS(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function GB(e,t=!1){return Y3(e)||Ny(e)||!lx(e)||(K3(e)>1&&Object.defineProperties(e,{set:Q_,add:Q_,clear:Q_,delete:Q_}),Object.freeze(e),t&&Object.values(e).forEach(r=>GB(r,!0))),e}function vit(){Hu(2)}var Q_={value:vit};function Y3(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var yit={};function cx(e){const t=yit[e];return t||Hu(0,e),t}var MS;function Kpe(){return MS}function bit(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function xQ(e,t){t&&(cx("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function PF(e){RF(e),e.drafts_.forEach(wit),e.drafts_=null}function RF(e){e===MS&&(MS=e.parent_)}function vQ(e){return MS=bit(MS,e)}function wit(e){const t=e[uc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function yQ(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[uc].modified_&&(PF(t),Hu(4)),lx(e)&&(e=NI(t,e),t.parent_||AI(t,e)),t.patches_&&cx("Patches").generateReplacementPatches_(r[uc].base_,e,t.patches_,t.inversePatches_)):e=NI(t,r,[]),PF(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Vpe?e:void 0}function NI(e,t,r){if(Y3(t))return t;const n=e.immer_.shouldUseStrictIteration(),i=t[uc];if(!i)return _I(t,(a,s)=>bQ(e,i,t,a,s,r),n),t;if(i.scope_!==e)return t;if(!i.modified_)return AI(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,o=!1;i.type_===3&&(s=new Set(a),a.clear(),o=!0),_I(s,(l,c)=>bQ(e,i,a,l,c,r,o),n),AI(e,a,!1),r&&e.patches_&&cx("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function bQ(e,t,r,n,i,a,s){if(i==null||typeof i!="object"&&!s)return;const o=Y3(i);if(!(o&&!s)){if(Ny(i)){const l=a&&t&&t.type_!==3&&!IF(t.assigned_,n)?a.concat(n):void 0,c=NI(e,i,l);if(Gpe(r,n,c),Ny(c))e.canAutoFreeze_=!1;else return}else s&&r.add(i);if(lx(i)&&!o){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===i&&o)return;NI(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(bC(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&AI(e,i)}}}function AI(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&GB(t,r)}function Sit(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Kpe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,a=KB;r&&(i=[n],a=FS);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return n.draft_=o,n.revoke_=s,o}var KB={get(e,t){if(t===uc)return e;const r=Fm(e);if(!IF(r,t))return Eit(e,r,t);const n=r[t];return e.finalized_||!lx(n)?n:n===HD(e.base_,t)?(WD(e),e.copy_[t]=DF(n,e)):n},has(e,t){return t in Fm(e)},ownKeys(e){return Reflect.ownKeys(Fm(e))},set(e,t,r){const n=Xpe(Fm(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=HD(Fm(e),t),a=i==null?void 0:i[uc];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(xit(r,i)&&(r!==void 0||IF(e.base_,t)))return!0;WD(e),jF(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return HD(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,WD(e),jF(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Fm(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Hu(11)},getPrototypeOf(e){return DS(e.base_)},setPrototypeOf(){Hu(12)}},FS={};_I(KB,(e,t)=>{FS[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});FS.deleteProperty=function(e,t){return FS.set.call(this,e,t,void 0)};FS.set=function(e,t,r){return KB.set.call(this,e[0],t,r,e[0])};function HD(e,t){const r=e[uc];return(r?Fm(r):e)[t]}function Eit(e,t,r){var i;const n=Xpe(t,r);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function Xpe(e,t){if(!(t in e))return;let r=DS(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=DS(r)}}function jF(e){e.modified_||(e.modified_=!0,e.parent_&&jF(e.parent_))}function WD(e){e.copy_||(e.copy_=OF(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Cit=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const a=r;r=t;const s=this;return function(l=a,...c){return s.produce(l,d=>r.call(this,d,...c))}}typeof r!="function"&&Hu(6),n!==void 0&&typeof n!="function"&&Hu(7);let i;if(lx(t)){const a=vQ(this),s=DF(t,void 0);let o=!0;try{i=r(s),o=!1}finally{o?PF(a):RF(a)}return xQ(a,n),yQ(i,a)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===Vpe&&(i=void 0),this.autoFreeze_&&GB(i,!0),n){const a=[],s=[];cx("Patches").generateReplacementPatches_(t,i,a,s),n(a,s)}return i}else Hu(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(s,...o)=>this.produceWithPatches(s,l=>t(l,...o));let n,i;return[this.produce(t,r,(s,o)=>{n=s,i=o}),n,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){lx(e)||Hu(8),Ny(e)&&(e=kit(e));const t=vQ(this),r=DF(e,void 0);return r[uc].isManual_=!0,RF(t),r}finishDraft(e,t){const r=e&&e[uc];(!r||!r.isManual_)&&Hu(9);const{scope_:n}=r;return xQ(n,t),yQ(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=cx("Patches").applyPatches_;return Ny(e)?n(e,t):this.produce(e,i=>n(i,t))}};function DF(e,t){const r=bC(e)?cx("MapSet").proxyMap_(e,t):X3(e)?cx("MapSet").proxySet_(e,t):Sit(e,t);return(t?t.scope_:Kpe()).drafts_.push(r),r}function kit(e){return Ny(e)||Hu(10,e),Ype(e)}function Ype(e){if(!lx(e)||Y3(e))return e;const t=e[uc];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=OF(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=OF(e,!0);return _I(r,(i,a)=>{Gpe(r,i,Ype(a))},n),t&&(t.finalized_=!1),r}var _it=new Cit;_it.produce;var Nit={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Qpe=Pl({name:"legend",initialState:Nit,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Oi()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,i=Zu(e).payload.indexOf(r);i>-1&&(e.payload[i]=n)},prepare:Oi()},removeLegendPayload:{reducer(e,t){var r=Zu(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Oi()}}}),{setLegendSize:$Nt,setLegendSettings:zNt,addLegendPayload:Ait,replaceLegendPayload:Tit,removeLegendPayload:Iit}=Qpe.actions,Oit=Qpe.reducer;function MF(){return MF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},MF.apply(null,arguments)}function wQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function VD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wQ(Object(r),!0).forEach(function(n){Pit(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pit(e,t,r){return(t=Rit(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rit(e){var t=jit(e,"string");return typeof t=="symbol"?t:t+""}function jit(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dit(e){return Array.isArray(e)&&of(e[0])&&of(e[1])?e.join(" ~ "):e}var Mit=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:i={},payload:a,formatter:s,itemSorter:o,wrapperClassName:l,labelClassName:c,label:d,labelFormatter:f,accessibilityLayer:p=!1}=e,m=()=>{if(a&&a.length){var P={padding:0,margin:0},R=(o?P3(a,o):a).map((O,D)=>{if(O.type==="none")return null;var L=O.formatter||s||Dit,{value:B,name:z}=O,H=B,te=z;if(L){var Y=L(B,z,O,D,a);if(Array.isArray(Y))[H,te]=Y;else if(Y!=null)H=Y;else return null}var W=VD({display:"block",paddingTop:4,paddingBottom:4,color:O.color||"#000"},n);return I.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(D),style:W},of(te)?I.createElement("span",{className:"recharts-tooltip-item-name"},te):null,of(te)?I.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,I.createElement("span",{className:"recharts-tooltip-item-value"},H),I.createElement("span",{className:"recharts-tooltip-item-unit"},O.unit||""))});return I.createElement("ul",{className:"recharts-tooltip-item-list",style:P},R)}return null},x=VD({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),v=VD({margin:0},i),b=!ys(d),w=b?d:"",k=gi("recharts-default-tooltip",l),E=gi("recharts-tooltip-label",c);b&&f&&a!==void 0&&a!==null&&(w=f(d,a));var N=p?{role:"status","aria-live":"assertive"}:{};return I.createElement("div",MF({className:k,style:x},N),I.createElement("p",{className:E,style:v},I.isValidElement(w)?w:"".concat(w)),m())},_w="recharts-tooltip-wrapper",Fit={visibility:"hidden"};function Lit(e){var{coordinate:t,translateX:r,translateY:n}=e;return gi(_w,{["".concat(_w,"-right")]:ur(r)&&t&&ur(t.x)&&r>=t.x,["".concat(_w,"-left")]:ur(r)&&t&&ur(t.x)&&r<t.x,["".concat(_w,"-bottom")]:ur(n)&&t&&ur(t.y)&&n>=t.y,["".concat(_w,"-top")]:ur(n)&&t&&ur(t.y)&&n<t.y})}function SQ(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:l,viewBoxDimension:c}=e;if(a&&ur(a[n]))return a[n];var d=r[n]-o-(i>0?i:0),f=r[n]+i;if(t[n])return s[n]?d:f;var p=l[n];if(p==null)return 0;if(s[n]){var m=d,x=p;return m<x?Math.max(f,p):Math.max(d,p)}if(c==null)return 0;var v=f+o,b=p+c;return v>b?Math.max(d,p):Math.max(f,p)}function Bit(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function Uit(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:i,reverseDirection:a,tooltipBox:s,useTranslate3d:o,viewBox:l}=e,c,d,f;return s.height>0&&s.width>0&&r?(d=SQ({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),f=SQ({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),c=Bit({translateX:d,translateY:f,useTranslate3d:o})):c=Fit,{cssProperties:c,cssClasses:Lit({translateX:d,translateY:f,coordinate:r})}}function EQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function J_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EQ(Object(r),!0).forEach(function(n){FF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FF(e,t,r){return(t=$it(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $it(e){var t=zit(e,"string");return typeof t=="symbol"?t:t+""}function zit(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Hit extends I.PureComponent{constructor(){super(...arguments),FF(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),FF(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:l,offset:c,position:d,reverseDirection:f,useTranslate3d:p,viewBox:m,wrapperStyle:x,lastBoundingBox:v,innerRef:b,hasPortalFromProps:w}=this.props,{cssClasses:k,cssProperties:E}=Uit({allowEscapeViewBox:r,coordinate:s,offsetTopLeft:c,position:d,reverseDirection:f,tooltipBox:{height:v.height,width:v.width},useTranslate3d:p,viewBox:m}),N=w?{}:J_(J_({transition:l&&t?"transform ".concat(n,"ms ").concat(i):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),P=J_(J_({},N),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},x);return I.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:k,style:P,ref:b},a)}}var Wit=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),hb={devToolsEnabled:!1,isSsr:Wit()},Jpe=()=>{var e;return(e=br(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function LF(){return LF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LF.apply(null,arguments)}function CQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function kQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CQ(Object(r),!0).forEach(function(n){Vit(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vit(e,t,r){return(t=qit(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qit(e){var t=Git(e,"string");return typeof t=="symbol"?t:t+""}function Git(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _Q={curveBasisClosed:Ctt,curveBasisOpen:ktt,curveBasis:Ett,curveBumpX:ctt,curveBumpY:utt,curveLinearClosed:_tt,curveLinear:_3,curveMonotoneX:Ntt,curveMonotoneY:Att,curveNatural:Ttt,curveStep:Itt,curveStepAfter:Ptt,curveStepBefore:Ott},TI=e=>xa(e.x)&&xa(e.y),NQ=e=>e.base!=null&&TI(e.base)&&TI(e),Nw=e=>e.x,Aw=e=>e.y,Kit=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(pC(e));return(r==="curveMonotone"||r==="curveBump")&&t?_Q["".concat(r).concat(t==="vertical"?"Y":"X")]:_Q[r]||_3},Xit=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:i,connectNulls:a=!1}=e,s=Kit(t,i),o=a?r.filter(TI):r,l;if(Array.isArray(n)){var c=r.map((m,x)=>kQ(kQ({},m),{},{base:n[x]}));i==="vertical"?l=W_().y(Aw).x1(Nw).x0(m=>m.base.x):l=W_().x(Nw).y1(Aw).y0(m=>m.base.y);var d=l.defined(NQ).curve(s),f=a?c.filter(NQ):c;return d(f)}i==="vertical"&&ur(n)?l=W_().y(Aw).x1(Nw).x0(n):ur(n)?l=W_().x(Nw).y1(Aw).y0(n):l=phe().x(Nw).y(Aw);var p=l.defined(TI).curve(s);return p(o)},Zpe=e=>{var{className:t,points:r,path:n,pathRef:i}=e;if((!r||!r.length)&&!n)return null;var a=r&&r.length?Xit(e):n;return I.createElement("path",LF({},Fh(e),Ztt(e),{className:gi("recharts-curve",t),d:a===null?void 0:a,ref:i}))},Yit=["x","y","top","left","width","height","className"];function BF(){return BF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BF.apply(null,arguments)}function AQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Qit(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AQ(Object(r),!0).forEach(function(n){Jit(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jit(e,t,r){return(t=Zit(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zit(e){var t=eat(e,"string");return typeof t=="symbol"?t:t+""}function eat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tat(e,t){if(e==null)return{};var r,n,i=rat(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function rat(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var nat=(e,t,r,n,i,a)=>"M".concat(e,",").concat(i,"v").concat(n,"M").concat(a,",").concat(t,"h").concat(r),iat=e=>{var{x:t=0,y:r=0,top:n=0,left:i=0,width:a=0,height:s=0,className:o}=e,l=tat(e,Yit),c=Qit({x:t,y:r,top:n,left:i,width:a,height:s},l);return!ur(t)||!ur(r)||!ur(a)||!ur(s)||!ur(n)||!ur(i)?null:I.createElement("path",BF({},cu(c),{className:gi("recharts-cross",o),d:nat(t,r,a,s,n,i)}))};function aat(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function TQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function IQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TQ(Object(r),!0).forEach(function(n){sat(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sat(e,t,r){return(t=oat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oat(e){var t=lat(e,"string");return typeof t=="symbol"?t:t+""}function lat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cat=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),e0e=(e,t,r)=>e.map(n=>"".concat(cat(n)," ").concat(t,"ms ").concat(r)).join(","),uat=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(i=>n.includes(i))),LS=(e,t)=>Object.keys(t).reduce((r,n)=>IQ(IQ({},r),{},{[n]:e(n,t[n])}),{});function OQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function $a(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OQ(Object(r),!0).forEach(function(n){dat(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dat(e,t,r){return(t=fat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fat(e){var t=hat(e,"string");return typeof t=="symbol"?t:t+""}function hat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var II=(e,t,r)=>e+(t-e)*r,UF=e=>{var{from:t,to:r}=e;return t!==r},t0e=(e,t,r)=>{var n=LS((i,a)=>{if(UF(a)){var[s,o]=e(a.from,a.to,a.velocity);return $a($a({},a),{},{from:s,velocity:o})}return a},t);return r<1?LS((i,a)=>UF(a)?$a($a({},a),{},{velocity:II(a.velocity,n[i].velocity,r),from:II(a.from,n[i].from,r)}):a,t):t0e(e,n,r-1)};function pat(e,t,r,n,i,a){var s,o=n.reduce((p,m)=>$a($a({},p),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),l=()=>LS((p,m)=>m.from,o),c=()=>!Object.values(o).filter(UF).length,d=null,f=p=>{s||(s=p);var m=p-s,x=m/r.dt;o=t0e(r,o,x),i($a($a($a({},e),t),l())),s=p,c()||(d=a.setTimeout(f))};return()=>(d=a.setTimeout(f),()=>{var p;(p=d)===null||p===void 0||p()})}function mat(e,t,r,n,i,a,s){var o=null,l=i.reduce((f,p)=>$a($a({},f),{},{[p]:[e[p],t[p]]}),{}),c,d=f=>{c||(c=f);var p=(f-c)/n,m=LS((v,b)=>II(...b,r(p)),l);if(a($a($a($a({},e),t),m)),p<1)o=s.setTimeout(d);else{var x=LS((v,b)=>II(...b,r(1)),l);a($a($a($a({},e),t),x))}};return()=>(o=s.setTimeout(d),()=>{var f;(f=o)===null||f===void 0||f()})}const gat=(e,t,r,n,i,a)=>{var s=uat(e,t);return r==null?()=>(i($a($a({},e),t)),()=>{}):r.isStepper===!0?pat(e,t,r,s,i,a):mat(e,t,r,n,s,i,a)};var OI=1e-4,r0e=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],n0e=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),PQ=(e,t)=>r=>{var n=r0e(e,t);return n0e(n,r)},xat=(e,t)=>r=>{var n=r0e(e,t),i=[...n.map((a,s)=>a*s).slice(1),0];return n0e(i,r)},vat=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i,a=r[0].split("(");if(a[0]==="cubic-bezier"&&((i=a[1])===null||i===void 0?void 0:i.split(")")[0].split(",").length)===4){var s=a[1].split(")")[0].split(",").map(o=>parseFloat(o));return[s[0],s[1],s[2],s[3]]}}}return r.length===4?r:[0,0,1,1]},yat=(e,t,r,n)=>{var i=PQ(e,r),a=PQ(t,n),s=xat(e,r),o=c=>c>1?1:c<0?0:c,l=c=>{for(var d=c>1?1:c,f=d,p=0;p<8;++p){var m=i(f)-d,x=s(f);if(Math.abs(m-d)<OI||x<OI)return a(f);f=o(f-m/x)}return a(f)};return l.isStepper=!1,l},RQ=function(){return yat(...vat(...arguments))},bat=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=t,a=(s,o,l)=>{var c=-(s-o)*r,d=l*n,f=l+(c-d)*i/1e3,p=l*i/1e3+s;return Math.abs(p-o)<OI&&Math.abs(f)<OI?[o,0]:[p,f]};return a.isStepper=!0,a.dt=i,a},wat=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return RQ(e);case"spring":return bat();default:if(e.split("(")[0]==="cubic-bezier")return RQ(e)}return typeof e=="function"?e:null};function Sat(e){var t,r=()=>null,n=!1,i=null,a=s=>{if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,[l,...c]=o;if(typeof l=="number"){i=e.setTimeout(a.bind(null,c),l);return}a(l),i=e.setTimeout(a.bind(null,c));return}typeof s=="string"&&(t=s,r(t)),typeof s=="object"&&(t=s,r(t)),typeof s=="function"&&s()}};return{stop:()=>{n=!0},start:s=>{n=!1,i&&(i(),i=null),a(s)},subscribe:s=>(r=s,()=>{r=()=>null}),getTimeoutController:()=>e}}class Eat{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,a=s=>{s-n>=r?t(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function Cat(){return Sat(new Eat)}var kat=I.createContext(Cat);function _at(e,t){var r=I.useContext(kat);return I.useMemo(()=>t??r(e),[e,t,r])}var Nat={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},jQ={t:0},qD={t:1};function XB(e){var t=vc(e,Nat),{isActive:r,canBegin:n,duration:i,easing:a,begin:s,onAnimationEnd:o,onAnimationStart:l,children:c}=t,d=r==="auto"?!hb.isSsr:r,f=_at(t.animationId,t.animationManager),[p,m]=I.useState(d?jQ:qD),x=I.useRef(null);return I.useEffect(()=>{d||m(qD)},[d]),I.useEffect(()=>{if(!d||!n)return mC;var v=gat(jQ,qD,wat(a),i,m,f.getTimeoutController()),b=()=>{x.current=v()};return f.start([l,s,b,i,o]),()=>{f.stop(),x.current&&x.current(),o()}},[d,n,i,a,s,l,o,f]),c(p.t)}function YB(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=I.useRef(OS(t)),n=I.useRef(e);return n.current!==e&&(r.current=OS(t),n.current=e),r.current}var Aat=["radius"],Tat=["radius"];function DQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function MQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DQ(Object(r),!0).forEach(function(n){Iat(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Iat(e,t,r){return(t=Oat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oat(e){var t=Pat(e,"string");return typeof t=="symbol"?t:t+""}function Pat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PI(){return PI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},PI.apply(null,arguments)}function FQ(e,t){if(e==null)return{};var r,n,i=Rat(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Rat(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var LQ=(e,t,r,n,i)=>{var a=Math.min(Math.abs(r)/2,Math.abs(n)/2),s=n>=0?1:-1,o=r>=0?1:-1,l=n>=0&&r>=0||n<0&&r<0?1:0,c;if(a>0&&i instanceof Array){for(var d=[0,0,0,0],f=0,p=4;f<p;f++)d[f]=i[f]>a?a:i[f];c="M".concat(e,",").concat(t+s*d[0]),d[0]>0&&(c+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(l,",").concat(e+o*d[0],",").concat(t)),c+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(c+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(l,`,
        `).concat(e+r,",").concat(t+s*d[1])),c+="L ".concat(e+r,",").concat(t+n-s*d[2]),d[2]>0&&(c+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(l,`,
        `).concat(e+r-o*d[2],",").concat(t+n)),c+="L ".concat(e+o*d[3],",").concat(t+n),d[3]>0&&(c+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(l,`,
        `).concat(e,",").concat(t+n-s*d[3])),c+="Z"}else if(a>0&&i===+i&&i>0){var m=Math.min(a,i);c="M ".concat(e,",").concat(t+s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(e+o*m,",").concat(t,`
            L `).concat(e+r-o*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(e+r,",").concat(t+s*m,`
            L `).concat(e+r,",").concat(t+n-s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(e+r-o*m,",").concat(t+n,`
            L `).concat(e+o*m,",").concat(t+n,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(e,",").concat(t+n-s*m," Z")}else c="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return c},BQ={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},i0e=e=>{var t=vc(e,BQ),r=I.useRef(null),[n,i]=I.useState(-1);I.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var re=r.current.getTotalLength();re&&i(re)}catch{}},[]);var{x:a,y:s,width:o,height:l,radius:c,className:d}=t,{animationEasing:f,animationDuration:p,animationBegin:m,isAnimationActive:x,isUpdateAnimationActive:v}=t,b=I.useRef(o),w=I.useRef(l),k=I.useRef(a),E=I.useRef(s),N=I.useMemo(()=>({x:a,y:s,width:o,height:l,radius:c}),[a,s,o,l,c]),P=YB(N,"rectangle-");if(a!==+a||s!==+s||o!==+o||l!==+l||o===0||l===0)return null;var R=gi("recharts-rectangle",d);if(!v){var O=cu(t),{radius:D}=O,L=FQ(O,Aat);return I.createElement("path",PI({},L,{radius:typeof c=="number"?c:void 0,className:R,d:LQ(a,s,o,l,c)}))}var B=b.current,z=w.current,H=k.current,te=E.current,Y="0px ".concat(n===-1?1:n,"px"),W="".concat(n,"px 0px"),Z=e0e(["strokeDasharray"],p,typeof f=="string"?f:BQ.animationEasing);return I.createElement(XB,{animationId:P,key:P,canBegin:n>0,duration:p,easing:f,isActive:v,begin:m},re=>{var X=Is(B,o,re),Q=Is(z,l,re),fe=Is(H,a,re),ye=Is(te,s,re);r.current&&(b.current=X,w.current=Q,k.current=fe,E.current=ye);var J;x?re>0?J={transition:Z,strokeDasharray:W}:J={strokeDasharray:Y}:J={strokeDasharray:W};var ce=cu(t),{radius:V}=ce,G=FQ(ce,Tat);return I.createElement("path",PI({},G,{radius:typeof c=="number"?c:void 0,className:R,d:LQ(fe,ye,X,Q,c),ref:r,style:MQ(MQ({},J),t.style)}))})};function UQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function $Q(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UQ(Object(r),!0).forEach(function(n){jat(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jat(e,t,r){return(t=Dat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dat(e){var t=Mat(e,"string");return typeof t=="symbol"?t:t+""}function Mat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RI=Math.PI/180,Fat=e=>e*180/Math.PI,Ms=(e,t,r,n)=>({x:e+Math.cos(-RI*n)*r,y:t+Math.sin(-RI*n)*r}),Lat=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Bat=(e,t)=>{var{x:r,y:n}=e,{x:i,y:a}=t;return Math.sqrt((r-i)**2+(n-a)**2)},Uat=(e,t)=>{var{x:r,y:n}=e,{cx:i,cy:a}=t,s=Bat({x:r,y:n},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var o=(r-i)/s,l=Math.acos(o);return n>a&&(l=2*Math.PI-l),{radius:s,angle:Fat(l),angleInRadian:l}},$at=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),i=Math.floor(r/360),a=Math.min(n,i);return{startAngle:t-a*360,endAngle:r-a*360}},zat=(e,t)=>{var{startAngle:r,endAngle:n}=t,i=Math.floor(r/360),a=Math.floor(n/360),s=Math.min(i,a);return e+s*360},Hat=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:i,angle:a}=Uat({x:r,y:n},t),{innerRadius:s,outerRadius:o}=t;if(i<s||i>o||i===0)return null;var{startAngle:l,endAngle:c}=$at(t),d=a,f;if(l<=c){for(;d>c;)d-=360;for(;d<l;)d+=360;f=d>=l&&d<=c}else{for(;d>l;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=l}return f?$Q($Q({},t),{},{radius:i,angle:zat(d,t)}):null};function a0e(e){var{cx:t,cy:r,radius:n,startAngle:i,endAngle:a}=e,s=Ms(t,r,n,i),o=Ms(t,r,n,a);return{points:[s,o],cx:t,cy:r,radius:n,startAngle:i,endAngle:a}}function $F(){return $F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$F.apply(null,arguments)}var Wat=(e,t)=>{var r=hl(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Z_=e=>{var{cx:t,cy:r,radius:n,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:l}=e,c=o*(s?1:-1)+n,d=Math.asin(o/c)/RI,f=l?i:i+a*d,p=Ms(t,r,c,f),m=Ms(t,r,n,f),x=l?i-a*d:i,v=Ms(t,r,c*Math.cos(d*RI),x);return{center:p,circleTangency:m,lineTangency:v,theta:d}},s0e=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:a,endAngle:s}=e,o=Wat(a,s),l=a+o,c=Ms(t,r,i,a),d=Ms(t,r,i,l),f="M ".concat(c.x,",").concat(c.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(a>l),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var p=Ms(t,r,n,a),m=Ms(t,r,n,l);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(a<=l),`,
            `).concat(p.x,",").concat(p.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},Vat=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:l,endAngle:c}=e,d=hl(c-l),{circleTangency:f,lineTangency:p,theta:m}=Z_({cx:t,cy:r,radius:i,angle:l,sign:d,cornerRadius:a,cornerIsExternal:o}),{circleTangency:x,lineTangency:v,theta:b}=Z_({cx:t,cy:r,radius:i,angle:c,sign:-d,cornerRadius:a,cornerIsExternal:o}),w=o?Math.abs(l-c):Math.abs(l-c)-m-b;if(w<0)return s?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):s0e({cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:l,endAngle:c});var k="M ".concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(w>180),",").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
  `);if(n>0){var{circleTangency:E,lineTangency:N,theta:P}=Z_({cx:t,cy:r,radius:n,angle:l,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:R,lineTangency:O,theta:D}=Z_({cx:t,cy:r,radius:n,angle:c,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),L=o?Math.abs(l-c):Math.abs(l-c)-P-D;if(L<0&&a===0)return"".concat(k,"L").concat(t,",").concat(r,"Z");k+="L".concat(O.x,",").concat(O.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(R.x,",").concat(R.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(L>180),",").concat(+(d>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,"Z")}else k+="L".concat(t,",").concat(r,"Z");return k},qat={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},o0e=e=>{var t=vc(e,qat),{cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d,className:f}=t;if(a<i||c===d)return null;var p=gi("recharts-sector",f),m=a-i,x=ud(s,m,0,!0),v;return x>0&&Math.abs(c-d)<360?v=Vat({cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:Math.min(x,m/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}):v=s0e({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:c,endAngle:d}),I.createElement("path",$F({},cu(t),{className:p,d:v}))};function Gat(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(Ihe(t)){if(e==="centric"){var{cx:n,cy:i,innerRadius:a,outerRadius:s,angle:o}=t,l=Ms(n,i,a,o),c=Ms(n,i,s,o);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return a0e(t)}}var l0e={},c0e={},u0e={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DB;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(u0e);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=u0e;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(c0e);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MB,r=c0e;function n(i,a,s){s&&typeof s!="number"&&t.isIterateeCall(i,a,s)&&(a=s=void 0),i=r.toFinite(i),a===void 0?(a=i,i=0):a=r.toFinite(a),s=s===void 0?i<a?1:-1:r.toFinite(s);const o=Math.max(Math.ceil((a-i)/(s||1)),0),l=new Array(o);for(let c=0;c<o;c++)l[c]=i,i+=s;return l}e.range=n})(l0e);var Kat=l0e.range;const d0e=Bs(Kat);function E0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Xat(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function QB(e){let t,r,n;e.length!==2?(t=E0,r=(o,l)=>E0(e(o),l),n=(o,l)=>e(o)-l):(t=e===E0||e===Xat?e:Yat,r=e,n=e);function i(o,l,c=0,d=o.length){if(c<d){if(t(l,l)!==0)return d;do{const f=c+d>>>1;r(o[f],l)<0?c=f+1:d=f}while(c<d)}return c}function a(o,l,c=0,d=o.length){if(c<d){if(t(l,l)!==0)return d;do{const f=c+d>>>1;r(o[f],l)<=0?c=f+1:d=f}while(c<d)}return c}function s(o,l,c=0,d=o.length){const f=i(o,l,c,d-1);return f>c&&n(o[f-1],l)>-n(o[f],l)?f-1:f}return{left:i,center:s,right:a}}function Yat(){return 0}function f0e(e){return e===null?NaN:+e}function*Qat(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Jat=QB(E0),wC=Jat.right;QB(f0e).center;class zQ extends Map{constructor(t,r=tst){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(HQ(this,t))}has(t){return super.has(HQ(this,t))}set(t,r){return super.set(Zat(this,t),r)}delete(t){return super.delete(est(this,t))}}function HQ({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Zat({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function est({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function tst(e){return e!==null&&typeof e=="object"?e.valueOf():e}function rst(e=E0){if(e===E0)return h0e;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function h0e(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const nst=Math.sqrt(50),ist=Math.sqrt(10),ast=Math.sqrt(2);function jI(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),s=a>=nst?10:a>=ist?5:a>=ast?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/s,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*s,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=r&&r<2?jI(e,t,r*2):[o,l,c]}function zF(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,a,s]=n?jI(t,e,r):jI(e,t,r);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(n)if(s<0)for(let c=0;c<o;++c)l[c]=(a-c)/-s;else for(let c=0;c<o;++c)l[c]=(a-c)*s;else if(s<0)for(let c=0;c<o;++c)l[c]=(i+c)/-s;else for(let c=0;c<o;++c)l[c]=(i+c)*s;return l}function HF(e,t,r){return t=+t,e=+e,r=+r,jI(e,t,r)[2]}function WF(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?HF(t,e,r):HF(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function WQ(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function VQ(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function p0e(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?h0e:rst(i);n>r;){if(n-r>600){const l=n-r+1,c=t-r+1,d=Math.log(l),f=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*f*(l-f)/l)*(c-l/2<0?-1:1),m=Math.max(r,Math.floor(t-c*f/l+p)),x=Math.min(n,Math.floor(t+(l-c)*f/l+p));p0e(e,t,m,x,i)}const a=e[t];let s=r,o=n;for(Tw(e,r,t),i(e[n],a)>0&&Tw(e,r,n);s<o;){for(Tw(e,s,o),++s,--o;i(e[s],a)<0;)++s;for(;i(e[o],a)>0;)--o}i(e[r],a)===0?Tw(e,r,o):(++o,Tw(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function Tw(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function sst(e,t,r){if(e=Float64Array.from(Qat(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return VQ(e);if(t>=1)return WQ(e);var n,i=(n-1)*t,a=Math.floor(i),s=WQ(p0e(e,a).subarray(0,a+1)),o=VQ(e.subarray(a+1));return s+(o-s)*(i-a)}}function ost(e,t,r=f0e){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,a=Math.floor(i),s=+r(e[a],a,e),o=+r(e[a+1],a+1,e);return s+(o-s)*(i-a)}}function lst(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(i);++n<i;)a[n]=e+n*r;return a}function vu(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ep(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const VF=Symbol("implicit");function JB(){var e=new zQ,t=[],r=[],n=VF;function i(a){let s=e.get(a);if(s===void 0){if(n!==VF)return n;e.set(a,s=t.push(a)-1)}return r[s%r.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new zQ;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return JB(t,r).unknown(n)},vu.apply(i,arguments),i}function ZB(){var e=JB().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,a,s,o=!1,l=0,c=0,d=.5;delete e.unknown;function f(){var p=t().length,m=i<n,x=m?i:n,v=m?n:i;a=(v-x)/Math.max(1,p-l+c*2),o&&(a=Math.floor(a)),x+=(v-x-a*(p-l))*d,s=a*(1-l),o&&(x=Math.round(x),s=Math.round(s));var b=lst(p).map(function(w){return x+a*w});return r(m?b.reverse():b)}return e.domain=function(p){return arguments.length?(t(p),f()):t()},e.range=function(p){return arguments.length?([n,i]=p,n=+n,i=+i,f()):[n,i]},e.rangeRound=function(p){return[n,i]=p,n=+n,i=+i,o=!0,f()},e.bandwidth=function(){return s},e.step=function(){return a},e.round=function(p){return arguments.length?(o=!!p,f()):o},e.padding=function(p){return arguments.length?(l=Math.min(1,c=+p),f()):l},e.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),f()):l},e.paddingOuter=function(p){return arguments.length?(c=+p,f()):c},e.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),f()):d},e.copy=function(){return ZB(t(),[n,i]).round(o).paddingInner(l).paddingOuter(c).align(d)},vu.apply(f(),arguments)}function m0e(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return m0e(t())},e}function cst(){return m0e(ZB.apply(null,arguments).paddingInner(1))}function eU(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function g0e(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function SC(){}var BS=.7,DI=1/BS,_v="\\s*([+-]?\\d+)\\s*",US="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ust=/^#([0-9a-f]{3,8})$/,dst=new RegExp(`^rgb\\(${_v},${_v},${_v}\\)$`),fst=new RegExp(`^rgb\\(${tf},${tf},${tf}\\)$`),hst=new RegExp(`^rgba\\(${_v},${_v},${_v},${US}\\)$`),pst=new RegExp(`^rgba\\(${tf},${tf},${tf},${US}\\)$`),mst=new RegExp(`^hsl\\(${US},${tf},${tf}\\)$`),gst=new RegExp(`^hsla\\(${US},${tf},${tf},${US}\\)$`),qQ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};eU(SC,$S,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:GQ,formatHex:GQ,formatHex8:xst,formatHsl:vst,formatRgb:KQ,toString:KQ});function GQ(){return this.rgb().formatHex()}function xst(){return this.rgb().formatHex8()}function vst(){return x0e(this).formatHsl()}function KQ(){return this.rgb().formatRgb()}function $S(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=ust.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?XQ(t):r===3?new pl(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?eN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?eN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=dst.exec(e))?new pl(t[1],t[2],t[3],1):(t=fst.exec(e))?new pl(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=hst.exec(e))?eN(t[1],t[2],t[3],t[4]):(t=pst.exec(e))?eN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=mst.exec(e))?JQ(t[1],t[2]/100,t[3]/100,1):(t=gst.exec(e))?JQ(t[1],t[2]/100,t[3]/100,t[4]):qQ.hasOwnProperty(e)?XQ(qQ[e]):e==="transparent"?new pl(NaN,NaN,NaN,0):null}function XQ(e){return new pl(e>>16&255,e>>8&255,e&255,1)}function eN(e,t,r,n){return n<=0&&(e=t=r=NaN),new pl(e,t,r,n)}function yst(e){return e instanceof SC||(e=$S(e)),e?(e=e.rgb(),new pl(e.r,e.g,e.b,e.opacity)):new pl}function qF(e,t,r,n){return arguments.length===1?yst(e):new pl(e,t,r,n??1)}function pl(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}eU(pl,qF,g0e(SC,{brighter(e){return e=e==null?DI:Math.pow(DI,e),new pl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?BS:Math.pow(BS,e),new pl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new pl(Pg(this.r),Pg(this.g),Pg(this.b),MI(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:YQ,formatHex:YQ,formatHex8:bst,formatRgb:QQ,toString:QQ}));function YQ(){return`#${ag(this.r)}${ag(this.g)}${ag(this.b)}`}function bst(){return`#${ag(this.r)}${ag(this.g)}${ag(this.b)}${ag((isNaN(this.opacity)?1:this.opacity)*255)}`}function QQ(){const e=MI(this.opacity);return`${e===1?"rgb(":"rgba("}${Pg(this.r)}, ${Pg(this.g)}, ${Pg(this.b)}${e===1?")":`, ${e})`}`}function MI(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Pg(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ag(e){return e=Pg(e),(e<16?"0":"")+e.toString(16)}function JQ(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Wu(e,t,r,n)}function x0e(e){if(e instanceof Wu)return new Wu(e.h,e.s,e.l,e.opacity);if(e instanceof SC||(e=$S(e)),!e)return new Wu;if(e instanceof Wu)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),s=NaN,o=a-i,l=(a+i)/2;return o?(t===a?s=(r-n)/o+(r<n)*6:r===a?s=(n-t)/o+2:s=(t-r)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new Wu(s,o,l,e.opacity)}function wst(e,t,r,n){return arguments.length===1?x0e(e):new Wu(e,t,r,n??1)}function Wu(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}eU(Wu,wst,g0e(SC,{brighter(e){return e=e==null?DI:Math.pow(DI,e),new Wu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?BS:Math.pow(BS,e),new Wu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new pl(GD(e>=240?e-240:e+120,i,n),GD(e,i,n),GD(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Wu(ZQ(this.h),tN(this.s),tN(this.l),MI(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=MI(this.opacity);return`${e===1?"hsl(":"hsla("}${ZQ(this.h)}, ${tN(this.s)*100}%, ${tN(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ZQ(e){return e=(e||0)%360,e<0?e+360:e}function tN(e){return Math.max(0,Math.min(1,e||0))}function GD(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const tU=e=>()=>e;function Sst(e,t){return function(r){return e+r*t}}function Est(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Cst(e){return(e=+e)==1?v0e:function(t,r){return r-t?Est(t,r,e):tU(isNaN(t)?r:t)}}function v0e(e,t){var r=t-e;return r?Sst(e,r):tU(isNaN(e)?t:e)}const eJ=function e(t){var r=Cst(t);function n(i,a){var s=r((i=qF(i)).r,(a=qF(a)).r),o=r(i.g,a.g),l=r(i.b,a.b),c=v0e(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=o(d),i.b=l(d),i.opacity=c(d),i+""}}return n.gamma=e,n}(1);function kst(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=e[i]*(1-a)+t[i]*a;return n}}function _st(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Nst(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),a=new Array(r),s;for(s=0;s<n;++s)i[s]=pb(e[s],t[s]);for(;s<r;++s)a[s]=t[s];return function(o){for(s=0;s<n;++s)a[s]=i[s](o);return a}}function Ast(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function FI(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Tst(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=pb(e[i],t[i]):n[i]=t[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var GF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,KD=new RegExp(GF.source,"g");function Ist(e){return function(){return e}}function Ost(e){return function(t){return e(t)+""}}function Pst(e,t){var r=GF.lastIndex=KD.lastIndex=0,n,i,a,s=-1,o=[],l=[];for(e=e+"",t=t+"";(n=GF.exec(e))&&(i=KD.exec(t));)(a=i.index)>r&&(a=t.slice(r,a),o[s]?o[s]+=a:o[++s]=a),(n=n[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:FI(n,i)})),r=KD.lastIndex;return r<t.length&&(a=t.slice(r),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?Ost(l[0].x):Ist(t):(t=l.length,function(c){for(var d=0,f;d<t;++d)o[(f=l[d]).i]=f.x(c);return o.join("")})}function pb(e,t){var r=typeof t,n;return t==null||r==="boolean"?tU(t):(r==="number"?FI:r==="string"?(n=$S(t))?(t=n,eJ):Pst:t instanceof $S?eJ:t instanceof Date?Ast:_st(t)?kst:Array.isArray(t)?Nst:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Tst:FI)(e,t)}function rU(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Rst(e,t){t===void 0&&(t=e,e=pb);for(var r=0,n=t.length-1,i=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(i,i=t[++r]);return function(s){var o=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return a[o](s-o)}}function jst(e){return function(){return e}}function LI(e){return+e}var tJ=[0,1];function Uo(e){return e}function KF(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:jst(isNaN(t)?NaN:.5)}function Dst(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function Mst(e,t,r){var n=e[0],i=e[1],a=t[0],s=t[1];return i<n?(n=KF(i,n),a=r(s,a)):(n=KF(n,i),a=r(a,s)),function(o){return a(n(o))}}function Fst(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),a=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)i[s]=KF(e[s],e[s+1]),a[s]=r(t[s],t[s+1]);return function(o){var l=wC(e,o,1,n)-1;return a[l](i[l](o))}}function EC(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Q3(){var e=tJ,t=tJ,r=pb,n,i,a,s=Uo,o,l,c;function d(){var p=Math.min(e.length,t.length);return s!==Uo&&(s=Dst(e[0],e[p-1])),o=p>2?Fst:Mst,l=c=null,f}function f(p){return p==null||isNaN(p=+p)?a:(l||(l=o(e.map(n),t,r)))(n(s(p)))}return f.invert=function(p){return s(i((c||(c=o(t,e.map(n),FI)))(p)))},f.domain=function(p){return arguments.length?(e=Array.from(p,LI),d()):e.slice()},f.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},f.rangeRound=function(p){return t=Array.from(p),r=rU,d()},f.clamp=function(p){return arguments.length?(s=p?!0:Uo,d()):s!==Uo},f.interpolate=function(p){return arguments.length?(r=p,d()):r},f.unknown=function(p){return arguments.length?(a=p,f):a},function(p,m){return n=p,i=m,d()}}function nU(){return Q3()(Uo,Uo)}function Lst(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function BI(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Ay(e){return e=BI(Math.abs(e)),e?e[1]:NaN}function Bst(e,t){return function(r,n){for(var i=r.length,a=[],s=0,o=e[0],l=0;i>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),a.push(r.substring(i-=o,i+o)),!((l+=o+1)>n));)o=e[s=(s+1)%e.length];return a.reverse().join(t)}}function Ust(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var $st=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function zS(e){if(!(t=$st.exec(e)))throw new Error("invalid format: "+e);var t;return new iU({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}zS.prototype=iU.prototype;function iU(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}iU.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function zst(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var y0e;function Hst(e,t){var r=BI(e,t);if(!r)return e+"";var n=r[0],i=r[1],a=i-(y0e=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+BI(e,Math.max(0,t+a-1))[0]}function rJ(e,t){var r=BI(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const nJ={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Lst,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>rJ(e*100,t),r:rJ,s:Hst,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function iJ(e){return e}var aJ=Array.prototype.map,sJ=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Wst(e){var t=e.grouping===void 0||e.thousands===void 0?iJ:Bst(aJ.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?iJ:Ust(aJ.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(f){f=zS(f);var p=f.fill,m=f.align,x=f.sign,v=f.symbol,b=f.zero,w=f.width,k=f.comma,E=f.precision,N=f.trim,P=f.type;P==="n"?(k=!0,P="g"):nJ[P]||(E===void 0&&(E=12),N=!0,P="g"),(b||p==="0"&&m==="=")&&(b=!0,p="0",m="=");var R=v==="$"?r:v==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",O=v==="$"?n:/[%p]/.test(P)?s:"",D=nJ[P],L=/[defgprs%]/.test(P);E=E===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function B(z){var H=R,te=O,Y,W,Z;if(P==="c")te=D(z)+te,z="";else{z=+z;var re=z<0||1/z<0;if(z=isNaN(z)?l:D(Math.abs(z),E),N&&(z=zst(z)),re&&+z==0&&x!=="+"&&(re=!1),H=(re?x==="("?x:o:x==="-"||x==="("?"":x)+H,te=(P==="s"?sJ[8+y0e/3]:"")+te+(re&&x==="("?")":""),L){for(Y=-1,W=z.length;++Y<W;)if(Z=z.charCodeAt(Y),48>Z||Z>57){te=(Z===46?i+z.slice(Y+1):z.slice(Y))+te,z=z.slice(0,Y);break}}}k&&!b&&(z=t(z,1/0));var X=H.length+z.length+te.length,Q=X<w?new Array(w-X+1).join(p):"";switch(k&&b&&(z=t(Q+z,Q.length?w-te.length:1/0),Q=""),m){case"<":z=H+z+te+Q;break;case"=":z=H+Q+z+te;break;case"^":z=Q.slice(0,X=Q.length>>1)+H+z+te+Q.slice(X);break;default:z=Q+H+z+te;break}return a(z)}return B.toString=function(){return f+""},B}function d(f,p){var m=c((f=zS(f),f.type="f",f)),x=Math.max(-8,Math.min(8,Math.floor(Ay(p)/3)))*3,v=Math.pow(10,-x),b=sJ[8+x/3];return function(w){return m(v*w)+b}}return{format:c,formatPrefix:d}}var rN,aU,b0e;Vst({thousands:",",grouping:[3],currency:["$",""]});function Vst(e){return rN=Wst(e),aU=rN.format,b0e=rN.formatPrefix,rN}function qst(e){return Math.max(0,-Ay(Math.abs(e)))}function Gst(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ay(t)/3)))*3-Ay(Math.abs(e)))}function Kst(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ay(t)-Ay(e))+1}function w0e(e,t,r,n){var i=WF(e,t,r),a;switch(n=zS(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=Gst(i,s))&&(n.precision=a),b0e(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=Kst(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=qst(i))&&(n.precision=a-(n.type==="%")*2);break}}return aU(n)}function em(e){var t=e.domain;return e.ticks=function(r){var n=t();return zF(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return w0e(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,a=n.length-1,s=n[i],o=n[a],l,c,d=10;for(o<s&&(c=s,s=o,o=c,c=i,i=a,a=c);d-- >0;){if(c=HF(s,o,r),c===l)return n[i]=s,n[a]=o,t(n);if(c>0)s=Math.floor(s/c)*c,o=Math.ceil(o/c)*c;else if(c<0)s=Math.ceil(s*c)/c,o=Math.floor(o*c)/c;else break;l=c}return e},e}function S0e(){var e=nU();return e.copy=function(){return EC(e,S0e())},vu.apply(e,arguments),em(e)}function E0e(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,LI),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return E0e(e).unknown(t)},e=arguments.length?Array.from(e,LI):[0,1],em(r)}function C0e(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],a=e[n],s;return a<i&&(s=r,r=n,n=s,s=i,i=a,a=s),e[r]=t.floor(i),e[n]=t.ceil(a),e}function oJ(e){return Math.log(e)}function lJ(e){return Math.exp(e)}function Xst(e){return-Math.log(-e)}function Yst(e){return-Math.exp(-e)}function Qst(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Jst(e){return e===10?Qst:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Zst(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function cJ(e){return(t,r)=>-e(-t,r)}function sU(e){const t=e(oJ,lJ),r=t.domain;let n=10,i,a;function s(){return i=Zst(n),a=Jst(n),r()[0]<0?(i=cJ(i),a=cJ(a),e(Xst,Yst)):e(oJ,lJ),t}return t.base=function(o){return arguments.length?(n=+o,s()):n},t.domain=function(o){return arguments.length?(r(o),s()):r()},t.ticks=o=>{const l=r();let c=l[0],d=l[l.length-1];const f=d<c;f&&([c,d]=[d,c]);let p=i(c),m=i(d),x,v;const b=o==null?10:+o;let w=[];if(!(n%1)&&m-p<b){if(p=Math.floor(p),m=Math.ceil(m),c>0){for(;p<=m;++p)for(x=1;x<n;++x)if(v=p<0?x/a(-p):x*a(p),!(v<c)){if(v>d)break;w.push(v)}}else for(;p<=m;++p)for(x=n-1;x>=1;--x)if(v=p>0?x/a(-p):x*a(p),!(v<c)){if(v>d)break;w.push(v)}w.length*2<b&&(w=zF(c,d,b))}else w=zF(p,m,Math.min(m-p,b)).map(a);return f?w.reverse():w},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=zS(l)).precision==null&&(l.trim=!0),l=aU(l)),o===1/0)return l;const c=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/a(Math.round(i(d)));return f*n<n-.5&&(f*=n),f<=c?l(d):""}},t.nice=()=>r(C0e(r(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),t}function k0e(){const e=sU(Q3()).domain([1,10]);return e.copy=()=>EC(e,k0e()).base(e.base()),vu.apply(e,arguments),e}function uJ(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function dJ(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function oU(e){var t=1,r=e(uJ(t),dJ(t));return r.constant=function(n){return arguments.length?e(uJ(t=+n),dJ(t)):t},em(r)}function _0e(){var e=oU(Q3());return e.copy=function(){return EC(e,_0e()).constant(e.constant())},vu.apply(e,arguments)}function fJ(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function eot(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function tot(e){return e<0?-e*e:e*e}function lU(e){var t=e(Uo,Uo),r=1;function n(){return r===1?e(Uo,Uo):r===.5?e(eot,tot):e(fJ(r),fJ(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},em(t)}function cU(){var e=lU(Q3());return e.copy=function(){return EC(e,cU()).exponent(e.exponent())},vu.apply(e,arguments),e}function rot(){return cU.apply(null,arguments).exponent(.5)}function hJ(e){return Math.sign(e)*e*e}function not(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function N0e(){var e=nU(),t=[0,1],r=!1,n;function i(a){var s=not(e(a));return isNaN(s)?n:r?Math.round(s):s}return i.invert=function(a){return e.invert(hJ(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,LI)).map(hJ)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return N0e(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},vu.apply(i,arguments),em(i)}function A0e(){var e=[],t=[],r=[],n;function i(){var s=0,o=Math.max(1,t.length);for(r=new Array(o-1);++s<o;)r[s-1]=ost(e,s/o);return a}function a(s){return s==null||isNaN(s=+s)?n:t[wC(r,s)]}return a.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(E0),i()},a.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return A0e().domain(e).range(t).unknown(n)},vu.apply(a,arguments)}function T0e(){var e=0,t=1,r=1,n=[.5],i=[0,1],a;function s(l){return l!=null&&l<=l?i[wC(n,l,0,r)]:a}function o(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},s.range=function(l){return arguments.length?(r=(i=Array.from(l)).length-1,o()):i.slice()},s.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[e,n[0]]:c>=r?[n[r-1],t]:[n[c-1],n[c]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return n.slice()},s.copy=function(){return T0e().domain([e,t]).range(i).unknown(a)},vu.apply(em(s),arguments)}function I0e(){var e=[.5],t=[0,1],r,n=1;function i(a){return a!=null&&a<=a?t[wC(e,a,0,n)]:r}return i.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return I0e().domain(e).range(t).unknown(r)},vu.apply(i,arguments)}const XD=new Date,YD=new Date;function qa(e,t,r,n){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const l=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let c;do l.push(c=new Date(+a)),t(a,o),e(a);while(c<a&&a<s);return l},i.filter=a=>qa(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!a(s););else for(;--o>=0;)for(;t(s,1),!a(s););}),r&&(i.count=(a,s)=>(XD.setTime(+a),YD.setTime(+s),e(XD),e(YD),Math.floor(r(XD,YD))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?s=>n(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const UI=qa(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);UI.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?qa(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):UI);UI.range;const uh=1e3,Yc=uh*60,dh=Yc*60,$h=dh*24,uU=$h*7,pJ=$h*30,QD=$h*365,sg=qa(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*uh)},(e,t)=>(t-e)/uh,e=>e.getUTCSeconds());sg.range;const dU=qa(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*uh)},(e,t)=>{e.setTime(+e+t*Yc)},(e,t)=>(t-e)/Yc,e=>e.getMinutes());dU.range;const fU=qa(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Yc)},(e,t)=>(t-e)/Yc,e=>e.getUTCMinutes());fU.range;const hU=qa(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*uh-e.getMinutes()*Yc)},(e,t)=>{e.setTime(+e+t*dh)},(e,t)=>(t-e)/dh,e=>e.getHours());hU.range;const pU=qa(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*dh)},(e,t)=>(t-e)/dh,e=>e.getUTCHours());pU.range;const CC=qa(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Yc)/$h,e=>e.getDate()-1);CC.range;const J3=qa(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/$h,e=>e.getUTCDate()-1);J3.range;const O0e=qa(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/$h,e=>Math.floor(e/$h));O0e.range;function Vx(e){return qa(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Yc)/uU)}const Z3=Vx(0),$I=Vx(1),iot=Vx(2),aot=Vx(3),Ty=Vx(4),sot=Vx(5),oot=Vx(6);Z3.range;$I.range;iot.range;aot.range;Ty.range;sot.range;oot.range;function qx(e){return qa(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/uU)}const eP=qx(0),zI=qx(1),lot=qx(2),cot=qx(3),Iy=qx(4),uot=qx(5),dot=qx(6);eP.range;zI.range;lot.range;cot.range;Iy.range;uot.range;dot.range;const mU=qa(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());mU.range;const gU=qa(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());gU.range;const zh=qa(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());zh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:qa(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});zh.range;const Hh=qa(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Hh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:qa(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Hh.range;function P0e(e,t,r,n,i,a){const s=[[sg,1,uh],[sg,5,5*uh],[sg,15,15*uh],[sg,30,30*uh],[a,1,Yc],[a,5,5*Yc],[a,15,15*Yc],[a,30,30*Yc],[i,1,dh],[i,3,3*dh],[i,6,6*dh],[i,12,12*dh],[n,1,$h],[n,2,2*$h],[r,1,uU],[t,1,pJ],[t,3,3*pJ],[e,1,QD]];function o(c,d,f){const p=d<c;p&&([c,d]=[d,c]);const m=f&&typeof f.range=="function"?f:l(c,d,f),x=m?m.range(c,+d+1):[];return p?x.reverse():x}function l(c,d,f){const p=Math.abs(d-c)/f,m=QB(([,,b])=>b).right(s,p);if(m===s.length)return e.every(WF(c/QD,d/QD,f));if(m===0)return UI.every(Math.max(WF(c,d,f),1));const[x,v]=s[p/s[m-1][2]<s[m][2]/p?m-1:m];return x.every(v)}return[o,l]}const[fot,hot]=P0e(Hh,gU,eP,O0e,pU,fU),[pot,mot]=P0e(zh,mU,Z3,CC,hU,dU);function JD(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ZD(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Iw(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function got(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,a=e.days,s=e.shortDays,o=e.months,l=e.shortMonths,c=Ow(i),d=Pw(i),f=Ow(a),p=Pw(a),m=Ow(s),x=Pw(s),v=Ow(o),b=Pw(o),w=Ow(l),k=Pw(l),E={a:re,A:X,b:Q,B:fe,c:null,d:bJ,e:bJ,f:Bot,g:Xot,G:Qot,H:Mot,I:Fot,j:Lot,L:R0e,m:Uot,M:$ot,p:ye,q:J,Q:EJ,s:CJ,S:zot,u:Hot,U:Wot,V:Vot,w:qot,W:Got,x:null,X:null,y:Kot,Y:Yot,Z:Jot,"%":SJ},N={a:ce,A:V,b:G,B:ie,c:null,d:wJ,e:wJ,f:rlt,g:flt,G:plt,H:Zot,I:elt,j:tlt,L:D0e,m:nlt,M:ilt,p:Ee,q:ne,Q:EJ,s:CJ,S:alt,u:slt,U:olt,V:llt,w:clt,W:ult,x:null,X:null,y:dlt,Y:hlt,Z:mlt,"%":SJ},P={a:B,A:z,b:H,B:te,c:Y,d:vJ,e:vJ,f:Pot,g:xJ,G:gJ,H:yJ,I:yJ,j:Aot,L:Oot,m:Not,M:Tot,p:L,q:_ot,Q:jot,s:Dot,S:Iot,u:wot,U:Sot,V:Eot,w:bot,W:Cot,x:W,X:Z,y:xJ,Y:gJ,Z:kot,"%":Rot};E.x=R(r,E),E.X=R(n,E),E.c=R(t,E),N.x=R(r,N),N.X=R(n,N),N.c=R(t,N);function R(ae,me){return function(ve){var q=[],Ne=-1,Pe=0,ze=ae.length,De,$e,et;for(ve instanceof Date||(ve=new Date(+ve));++Ne<ze;)ae.charCodeAt(Ne)===37&&(q.push(ae.slice(Pe,Ne)),($e=mJ[De=ae.charAt(++Ne)])!=null?De=ae.charAt(++Ne):$e=De==="e"?" ":"0",(et=me[De])&&(De=et(ve,$e)),q.push(De),Pe=Ne+1);return q.push(ae.slice(Pe,Ne)),q.join("")}}function O(ae,me){return function(ve){var q=Iw(1900,void 0,1),Ne=D(q,ae,ve+="",0),Pe,ze;if(Ne!=ve.length)return null;if("Q"in q)return new Date(q.Q);if("s"in q)return new Date(q.s*1e3+("L"in q?q.L:0));if(me&&!("Z"in q)&&(q.Z=0),"p"in q&&(q.H=q.H%12+q.p*12),q.m===void 0&&(q.m="q"in q?q.q:0),"V"in q){if(q.V<1||q.V>53)return null;"w"in q||(q.w=1),"Z"in q?(Pe=ZD(Iw(q.y,0,1)),ze=Pe.getUTCDay(),Pe=ze>4||ze===0?zI.ceil(Pe):zI(Pe),Pe=J3.offset(Pe,(q.V-1)*7),q.y=Pe.getUTCFullYear(),q.m=Pe.getUTCMonth(),q.d=Pe.getUTCDate()+(q.w+6)%7):(Pe=JD(Iw(q.y,0,1)),ze=Pe.getDay(),Pe=ze>4||ze===0?$I.ceil(Pe):$I(Pe),Pe=CC.offset(Pe,(q.V-1)*7),q.y=Pe.getFullYear(),q.m=Pe.getMonth(),q.d=Pe.getDate()+(q.w+6)%7)}else("W"in q||"U"in q)&&("w"in q||(q.w="u"in q?q.u%7:"W"in q?1:0),ze="Z"in q?ZD(Iw(q.y,0,1)).getUTCDay():JD(Iw(q.y,0,1)).getDay(),q.m=0,q.d="W"in q?(q.w+6)%7+q.W*7-(ze+5)%7:q.w+q.U*7-(ze+6)%7);return"Z"in q?(q.H+=q.Z/100|0,q.M+=q.Z%100,ZD(q)):JD(q)}}function D(ae,me,ve,q){for(var Ne=0,Pe=me.length,ze=ve.length,De,$e;Ne<Pe;){if(q>=ze)return-1;if(De=me.charCodeAt(Ne++),De===37){if(De=me.charAt(Ne++),$e=P[De in mJ?me.charAt(Ne++):De],!$e||(q=$e(ae,ve,q))<0)return-1}else if(De!=ve.charCodeAt(q++))return-1}return q}function L(ae,me,ve){var q=c.exec(me.slice(ve));return q?(ae.p=d.get(q[0].toLowerCase()),ve+q[0].length):-1}function B(ae,me,ve){var q=m.exec(me.slice(ve));return q?(ae.w=x.get(q[0].toLowerCase()),ve+q[0].length):-1}function z(ae,me,ve){var q=f.exec(me.slice(ve));return q?(ae.w=p.get(q[0].toLowerCase()),ve+q[0].length):-1}function H(ae,me,ve){var q=w.exec(me.slice(ve));return q?(ae.m=k.get(q[0].toLowerCase()),ve+q[0].length):-1}function te(ae,me,ve){var q=v.exec(me.slice(ve));return q?(ae.m=b.get(q[0].toLowerCase()),ve+q[0].length):-1}function Y(ae,me,ve){return D(ae,t,me,ve)}function W(ae,me,ve){return D(ae,r,me,ve)}function Z(ae,me,ve){return D(ae,n,me,ve)}function re(ae){return s[ae.getDay()]}function X(ae){return a[ae.getDay()]}function Q(ae){return l[ae.getMonth()]}function fe(ae){return o[ae.getMonth()]}function ye(ae){return i[+(ae.getHours()>=12)]}function J(ae){return 1+~~(ae.getMonth()/3)}function ce(ae){return s[ae.getUTCDay()]}function V(ae){return a[ae.getUTCDay()]}function G(ae){return l[ae.getUTCMonth()]}function ie(ae){return o[ae.getUTCMonth()]}function Ee(ae){return i[+(ae.getUTCHours()>=12)]}function ne(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var me=R(ae+="",E);return me.toString=function(){return ae},me},parse:function(ae){var me=O(ae+="",!1);return me.toString=function(){return ae},me},utcFormat:function(ae){var me=R(ae+="",N);return me.toString=function(){return ae},me},utcParse:function(ae){var me=O(ae+="",!0);return me.toString=function(){return ae},me}}}var mJ={"-":"",_:" ",0:"0"},Ss=/^\s*\d+/,xot=/^%/,vot=/[\\^$*+?|[\]().{}]/g;function Bn(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(t)+i:i)}function yot(e){return e.replace(vot,"\\$&")}function Ow(e){return new RegExp("^(?:"+e.map(yot).join("|")+")","i")}function Pw(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function bot(e,t,r){var n=Ss.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function wot(e,t,r){var n=Ss.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function Sot(e,t,r){var n=Ss.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function Eot(e,t,r){var n=Ss.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function Cot(e,t,r){var n=Ss.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function gJ(e,t,r){var n=Ss.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function xJ(e,t,r){var n=Ss.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function kot(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function _ot(e,t,r){var n=Ss.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function Not(e,t,r){var n=Ss.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function vJ(e,t,r){var n=Ss.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Aot(e,t,r){var n=Ss.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function yJ(e,t,r){var n=Ss.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Tot(e,t,r){var n=Ss.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Iot(e,t,r){var n=Ss.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function Oot(e,t,r){var n=Ss.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Pot(e,t,r){var n=Ss.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Rot(e,t,r){var n=xot.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function jot(e,t,r){var n=Ss.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Dot(e,t,r){var n=Ss.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function bJ(e,t){return Bn(e.getDate(),t,2)}function Mot(e,t){return Bn(e.getHours(),t,2)}function Fot(e,t){return Bn(e.getHours()%12||12,t,2)}function Lot(e,t){return Bn(1+CC.count(zh(e),e),t,3)}function R0e(e,t){return Bn(e.getMilliseconds(),t,3)}function Bot(e,t){return R0e(e,t)+"000"}function Uot(e,t){return Bn(e.getMonth()+1,t,2)}function $ot(e,t){return Bn(e.getMinutes(),t,2)}function zot(e,t){return Bn(e.getSeconds(),t,2)}function Hot(e){var t=e.getDay();return t===0?7:t}function Wot(e,t){return Bn(Z3.count(zh(e)-1,e),t,2)}function j0e(e){var t=e.getDay();return t>=4||t===0?Ty(e):Ty.ceil(e)}function Vot(e,t){return e=j0e(e),Bn(Ty.count(zh(e),e)+(zh(e).getDay()===4),t,2)}function qot(e){return e.getDay()}function Got(e,t){return Bn($I.count(zh(e)-1,e),t,2)}function Kot(e,t){return Bn(e.getFullYear()%100,t,2)}function Xot(e,t){return e=j0e(e),Bn(e.getFullYear()%100,t,2)}function Yot(e,t){return Bn(e.getFullYear()%1e4,t,4)}function Qot(e,t){var r=e.getDay();return e=r>=4||r===0?Ty(e):Ty.ceil(e),Bn(e.getFullYear()%1e4,t,4)}function Jot(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Bn(t/60|0,"0",2)+Bn(t%60,"0",2)}function wJ(e,t){return Bn(e.getUTCDate(),t,2)}function Zot(e,t){return Bn(e.getUTCHours(),t,2)}function elt(e,t){return Bn(e.getUTCHours()%12||12,t,2)}function tlt(e,t){return Bn(1+J3.count(Hh(e),e),t,3)}function D0e(e,t){return Bn(e.getUTCMilliseconds(),t,3)}function rlt(e,t){return D0e(e,t)+"000"}function nlt(e,t){return Bn(e.getUTCMonth()+1,t,2)}function ilt(e,t){return Bn(e.getUTCMinutes(),t,2)}function alt(e,t){return Bn(e.getUTCSeconds(),t,2)}function slt(e){var t=e.getUTCDay();return t===0?7:t}function olt(e,t){return Bn(eP.count(Hh(e)-1,e),t,2)}function M0e(e){var t=e.getUTCDay();return t>=4||t===0?Iy(e):Iy.ceil(e)}function llt(e,t){return e=M0e(e),Bn(Iy.count(Hh(e),e)+(Hh(e).getUTCDay()===4),t,2)}function clt(e){return e.getUTCDay()}function ult(e,t){return Bn(zI.count(Hh(e)-1,e),t,2)}function dlt(e,t){return Bn(e.getUTCFullYear()%100,t,2)}function flt(e,t){return e=M0e(e),Bn(e.getUTCFullYear()%100,t,2)}function hlt(e,t){return Bn(e.getUTCFullYear()%1e4,t,4)}function plt(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Iy(e):Iy.ceil(e),Bn(e.getUTCFullYear()%1e4,t,4)}function mlt(){return"+0000"}function SJ(){return"%"}function EJ(e){return+e}function CJ(e){return Math.floor(+e/1e3)}var P1,F0e,L0e;glt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function glt(e){return P1=got(e),F0e=P1.format,P1.parse,L0e=P1.utcFormat,P1.utcParse,P1}function xlt(e){return new Date(e)}function vlt(e){return e instanceof Date?+e:+new Date(+e)}function xU(e,t,r,n,i,a,s,o,l,c){var d=nU(),f=d.invert,p=d.domain,m=c(".%L"),x=c(":%S"),v=c("%I:%M"),b=c("%I %p"),w=c("%a %d"),k=c("%b %d"),E=c("%B"),N=c("%Y");function P(R){return(l(R)<R?m:o(R)<R?x:s(R)<R?v:a(R)<R?b:n(R)<R?i(R)<R?w:k:r(R)<R?E:N)(R)}return d.invert=function(R){return new Date(f(R))},d.domain=function(R){return arguments.length?p(Array.from(R,vlt)):p().map(xlt)},d.ticks=function(R){var O=p();return e(O[0],O[O.length-1],R??10)},d.tickFormat=function(R,O){return O==null?P:c(O)},d.nice=function(R){var O=p();return(!R||typeof R.range!="function")&&(R=t(O[0],O[O.length-1],R??10)),R?p(C0e(O,R)):d},d.copy=function(){return EC(d,xU(e,t,r,n,i,a,s,o,l,c))},d}function ylt(){return vu.apply(xU(pot,mot,zh,mU,Z3,CC,hU,dU,sg,F0e).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function blt(){return vu.apply(xU(fot,hot,Hh,gU,eP,J3,pU,fU,sg,L0e).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function tP(){var e=0,t=1,r,n,i,a,s=Uo,o=!1,l;function c(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(a(f)-r)*i,o?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([e,t]=f,r=a(e=+e),n=a(t=+t),i=r===n?0:1/(n-r),c):[e,t]},c.clamp=function(f){return arguments.length?(o=!!f,c):o},c.interpolator=function(f){return arguments.length?(s=f,c):s};function d(f){return function(p){var m,x;return arguments.length?([m,x]=p,s=f(m,x),c):[s(0),s(1)]}}return c.range=d(pb),c.rangeRound=d(rU),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return a=f,r=f(e),n=f(t),i=r===n?0:1/(n-r),c}}function tm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function B0e(){var e=em(tP()(Uo));return e.copy=function(){return tm(e,B0e())},ep.apply(e,arguments)}function U0e(){var e=sU(tP()).domain([1,10]);return e.copy=function(){return tm(e,U0e()).base(e.base())},ep.apply(e,arguments)}function $0e(){var e=oU(tP());return e.copy=function(){return tm(e,$0e()).constant(e.constant())},ep.apply(e,arguments)}function vU(){var e=lU(tP());return e.copy=function(){return tm(e,vU()).exponent(e.exponent())},ep.apply(e,arguments)}function wlt(){return vU.apply(null,arguments).exponent(.5)}function z0e(){var e=[],t=Uo;function r(n){if(n!=null&&!isNaN(n=+n))return t((wC(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(E0),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>sst(e,a/n))},r.copy=function(){return z0e(t).domain(e)},ep.apply(r,arguments)}function rP(){var e=0,t=.5,r=1,n=1,i,a,s,o,l,c=Uo,d,f=!1,p;function m(v){return isNaN(v=+v)?p:(v=.5+((v=+d(v))-a)*(n*v<n*a?o:l),c(f?Math.max(0,Math.min(1,v)):v))}m.domain=function(v){return arguments.length?([e,t,r]=v,i=d(e=+e),a=d(t=+t),s=d(r=+r),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),n=a<i?-1:1,m):[e,t,r]},m.clamp=function(v){return arguments.length?(f=!!v,m):f},m.interpolator=function(v){return arguments.length?(c=v,m):c};function x(v){return function(b){var w,k,E;return arguments.length?([w,k,E]=b,c=Rst(v,[w,k,E]),m):[c(0),c(.5),c(1)]}}return m.range=x(pb),m.rangeRound=x(rU),m.unknown=function(v){return arguments.length?(p=v,m):p},function(v){return d=v,i=v(e),a=v(t),s=v(r),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),n=a<i?-1:1,m}}function H0e(){var e=em(rP()(Uo));return e.copy=function(){return tm(e,H0e())},ep.apply(e,arguments)}function W0e(){var e=sU(rP()).domain([.1,1,10]);return e.copy=function(){return tm(e,W0e()).base(e.base())},ep.apply(e,arguments)}function V0e(){var e=oU(rP());return e.copy=function(){return tm(e,V0e()).constant(e.constant())},ep.apply(e,arguments)}function yU(){var e=lU(rP());return e.copy=function(){return tm(e,yU()).exponent(e.exponent())},ep.apply(e,arguments)}function Slt(){return yU.apply(null,arguments).exponent(.5)}const Qw=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:ZB,scaleDiverging:H0e,scaleDivergingLog:W0e,scaleDivergingPow:yU,scaleDivergingSqrt:Slt,scaleDivergingSymlog:V0e,scaleIdentity:E0e,scaleImplicit:VF,scaleLinear:S0e,scaleLog:k0e,scaleOrdinal:JB,scalePoint:cst,scalePow:cU,scaleQuantile:A0e,scaleQuantize:T0e,scaleRadial:N0e,scaleSequential:B0e,scaleSequentialLog:U0e,scaleSequentialPow:vU,scaleSequentialQuantile:z0e,scaleSequentialSqrt:wlt,scaleSequentialSymlog:$0e,scaleSqrt:rot,scaleSymlog:_0e,scaleThreshold:I0e,scaleTime:ylt,scaleUtc:blt,tickFormat:w0e},Symbol.toStringTag,{value:"Module"}));var rm=e=>e.chartData,Elt=st([rm],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),bU=(e,t,r,n)=>n?Elt(e):rm(e);function j0(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(xa(t)&&xa(r))return!0}return!1}function kJ(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function q0e(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,i,a;if(xa(r))i=r;else if(typeof r=="function")return;if(xa(n))a=n;else if(typeof n=="function")return;var s=[i,a];if(j0(s))return s}}function Clt(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(j0(n))return kJ(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[i,a]=e,s,o;if(i==="auto")t!=null&&(s=Math.min(...t));else if(ur(i))s=i;else if(typeof i=="function")try{t!=null&&(s=i(t==null?void 0:t[0]))}catch{}else if(typeof i=="string"&&cQ.test(i)){var l=cQ.exec(i);if(l==null||t==null)s=void 0;else{var c=+l[1];s=t[0]-c}}else s=t==null?void 0:t[0];if(a==="auto")t!=null&&(o=Math.max(...t));else if(ur(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t==null?void 0:t[1]))}catch{}else if(typeof a=="string"&&uQ.test(a)){var d=uQ.exec(a);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t==null?void 0:t[1];var p=[s,o];if(j0(p))return t==null?p:kJ(p,t,r)}}}var mb=1e9,klt={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},SU,Di=!0,du="[DecimalError] ",Rg=du+"Invalid argument: ",wU=du+"Exponent out of range: ",gb=Math.floor,Lm=Math.pow,_lt=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Xl,ss=1e7,wi=7,G0e=9007199254740991,HI=gb(G0e/wi),Qt={};Qt.absoluteValue=Qt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Qt.comparedTo=Qt.cmp=function(e){var t,r,n,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(n=a.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};Qt.decimalPlaces=Qt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*wi;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Qt.dividedBy=Qt.div=function(e){return wh(this,new this.constructor(e))};Qt.dividedToIntegerBy=Qt.idiv=function(e){var t=this,r=t.constructor;return ui(wh(t,new r(e),0,1),r.precision)};Qt.equals=Qt.eq=function(e){return!this.cmp(e)};Qt.exponent=function(){return Pa(this)};Qt.greaterThan=Qt.gt=function(e){return this.cmp(e)>0};Qt.greaterThanOrEqualTo=Qt.gte=function(e){return this.cmp(e)>=0};Qt.isInteger=Qt.isint=function(){return this.e>this.d.length-2};Qt.isNegative=Qt.isneg=function(){return this.s<0};Qt.isPositive=Qt.ispos=function(){return this.s>0};Qt.isZero=function(){return this.s===0};Qt.lessThan=Qt.lt=function(e){return this.cmp(e)<0};Qt.lessThanOrEqualTo=Qt.lte=function(e){return this.cmp(e)<1};Qt.logarithm=Qt.log=function(e){var t,r=this,n=r.constructor,i=n.precision,a=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Xl))throw Error(du+"NaN");if(r.s<1)throw Error(du+(r.s?"NaN":"-Infinity"));return r.eq(Xl)?new n(0):(Di=!1,t=wh(HS(r,a),HS(e,a),a),Di=!0,ui(t,i))};Qt.minus=Qt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Y0e(t,e):K0e(t,(e.s=-e.s,e))};Qt.modulo=Qt.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(du+"NaN");return r.s?(Di=!1,t=wh(r,e,0,1).times(e),Di=!0,r.minus(t)):ui(new n(r),i)};Qt.naturalExponential=Qt.exp=function(){return X0e(this)};Qt.naturalLogarithm=Qt.ln=function(){return HS(this)};Qt.negated=Qt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Qt.plus=Qt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?K0e(t,e):Y0e(t,(e.s=-e.s,e))};Qt.precision=Qt.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Rg+e);if(t=Pa(i)+1,n=i.d.length-1,r=n*wi+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Qt.squareRoot=Qt.sqrt=function(){var e,t,r,n,i,a,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(du+"NaN")}for(e=Pa(o),Di=!1,i=Math.sqrt(+o),i==0||i==1/0?(t=Gd(o.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=gb((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(i.toString()),r=l.precision,i=s=r+3;;)if(a=n,n=a.plus(wh(o,a,s+2)).times(.5),Gd(a.d).slice(0,s)===(t=Gd(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),i==s&&t=="4999"){if(ui(a,r+1,0),a.times(a).eq(o)){n=a;break}}else if(t!="9999")break;s+=4}return Di=!0,ui(n,r)};Qt.times=Qt.mul=function(e){var t,r,n,i,a,s,o,l,c,d=this,f=d.constructor,p=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,l=p.length,c=m.length,l<c&&(a=p,p=m,m=a,s=l,l=c,c=s),a=[],s=l+c,n=s;n--;)a.push(0);for(n=c;--n>=0;){for(t=0,i=l+n;i>n;)o=a[i]+m[n]*p[i-n-1]+t,a[i--]=o%ss|0,t=o/ss|0;a[i]=(a[i]+t)%ss|0}for(;!a[--s];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,Di?ui(e,f.precision):e};Qt.toDecimalPlaces=Qt.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(uf(e,0,mb),t===void 0?t=n.rounding:uf(t,0,8),ui(r,e+Pa(r)+1,t))};Qt.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=ux(n,!0):(uf(e,0,mb),t===void 0?t=i.rounding:uf(t,0,8),n=ui(new i(n),e+1,t),r=ux(n,!0,e+1)),r};Qt.toFixed=function(e,t){var r,n,i=this,a=i.constructor;return e===void 0?ux(i):(uf(e,0,mb),t===void 0?t=a.rounding:uf(t,0,8),n=ui(new a(i),e+Pa(i)+1,t),r=ux(n.abs(),!1,e+Pa(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Qt.toInteger=Qt.toint=function(){var e=this,t=e.constructor;return ui(new t(e),Pa(e)+1,t.rounding)};Qt.toNumber=function(){return+this};Qt.toPower=Qt.pow=function(e){var t,r,n,i,a,s,o=this,l=o.constructor,c=12,d=+(e=new l(e));if(!e.s)return new l(Xl);if(o=new l(o),!o.s){if(e.s<1)throw Error(du+"Infinity");return o}if(o.eq(Xl))return o;if(n=l.precision,e.eq(Xl))return ui(o,n);if(t=e.e,r=e.d.length-1,s=t>=r,a=o.s,s){if((r=d<0?-d:d)<=G0e){for(i=new l(Xl),t=Math.ceil(n/wi+4),Di=!1;r%2&&(i=i.times(o),NJ(i.d,t)),r=gb(r/2),r!==0;)o=o.times(o),NJ(o.d,t);return Di=!0,e.s<0?new l(Xl).div(i):ui(i,n)}}else if(a<0)throw Error(du+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,Di=!1,i=e.times(HS(o,n+c)),Di=!0,i=X0e(i),i.s=a,i};Qt.toPrecision=function(e,t){var r,n,i=this,a=i.constructor;return e===void 0?(r=Pa(i),n=ux(i,r<=a.toExpNeg||r>=a.toExpPos)):(uf(e,1,mb),t===void 0?t=a.rounding:uf(t,0,8),i=ui(new a(i),e,t),r=Pa(i),n=ux(i,e<=r||r<=a.toExpNeg,e)),n};Qt.toSignificantDigits=Qt.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(uf(e,1,mb),t===void 0?t=n.rounding:uf(t,0,8)),ui(new n(r),e,t)};Qt.toString=Qt.valueOf=Qt.val=Qt.toJSON=Qt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Pa(e),r=e.constructor;return ux(e,t<=r.toExpNeg||t>=r.toExpPos)};function K0e(e,t){var r,n,i,a,s,o,l,c,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Di?ui(t,f):t;if(l=e.d,c=t.d,s=e.e,i=t.e,l=l.slice(),a=s-i,a){for(a<0?(n=l,a=-a,o=c.length):(n=c,i=s,o=l.length),s=Math.ceil(f/wi),o=s>o?s+1:o+1,a>o&&(a=o,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(o=l.length,a=c.length,o-a<0&&(a=o,n=c,c=l,l=n),r=0;a;)r=(l[--a]=l[a]+c[a]+r)/ss|0,l[a]%=ss;for(r&&(l.unshift(r),++i),o=l.length;l[--o]==0;)l.pop();return t.d=l,t.e=i,Di?ui(t,f):t}function uf(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Rg+e)}function Gd(e){var t,r,n,i=e.length-1,a="",s=e[0];if(i>0){for(a+=s,t=1;t<i;t++)n=e[t]+"",r=wi-n.length,r&&(a+=Bp(r)),a+=n;s=e[t],n=s+"",r=wi-n.length,r&&(a+=Bp(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var wh=function(){function e(n,i){var a,s=0,o=n.length;for(n=n.slice();o--;)a=n[o]*i+s,n[o]=a%ss|0,s=a/ss|0;return s&&n.unshift(s),n}function t(n,i,a,s){var o,l;if(a!=s)l=a>s?1:-1;else for(o=l=0;o<a;o++)if(n[o]!=i[o]){l=n[o]>i[o]?1:-1;break}return l}function r(n,i,a){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*ss+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s){var o,l,c,d,f,p,m,x,v,b,w,k,E,N,P,R,O,D,L=n.constructor,B=n.s==i.s?1:-1,z=n.d,H=i.d;if(!n.s)return new L(n);if(!i.s)throw Error(du+"Division by zero");for(l=n.e-i.e,O=H.length,P=z.length,m=new L(B),x=m.d=[],c=0;H[c]==(z[c]||0);)++c;if(H[c]>(z[c]||0)&&--l,a==null?k=a=L.precision:s?k=a+(Pa(n)-Pa(i))+1:k=a,k<0)return new L(0);if(k=k/wi+2|0,c=0,O==1)for(d=0,H=H[0],k++;(c<P||d)&&k--;c++)E=d*ss+(z[c]||0),x[c]=E/H|0,d=E%H|0;else{for(d=ss/(H[0]+1)|0,d>1&&(H=e(H,d),z=e(z,d),O=H.length,P=z.length),N=O,v=z.slice(0,O),b=v.length;b<O;)v[b++]=0;D=H.slice(),D.unshift(0),R=H[0],H[1]>=ss/2&&++R;do d=0,o=t(H,v,O,b),o<0?(w=v[0],O!=b&&(w=w*ss+(v[1]||0)),d=w/R|0,d>1?(d>=ss&&(d=ss-1),f=e(H,d),p=f.length,b=v.length,o=t(f,v,p,b),o==1&&(d--,r(f,O<p?D:H,p))):(d==0&&(o=d=1),f=H.slice()),p=f.length,p<b&&f.unshift(0),r(v,f,b),o==-1&&(b=v.length,o=t(H,v,O,b),o<1&&(d++,r(v,O<b?D:H,b))),b=v.length):o===0&&(d++,v=[0]),x[c++]=d,o&&v[0]?v[b++]=z[N]||0:(v=[z[N]],b=1);while((N++<P||v[0]!==void 0)&&k--)}return x[0]||x.shift(),m.e=l,ui(m,s?a+Pa(m)+1:a)}}();function X0e(e,t){var r,n,i,a,s,o,l=0,c=0,d=e.constructor,f=d.precision;if(Pa(e)>16)throw Error(wU+Pa(e));if(!e.s)return new d(Xl);for(Di=!1,o=f,s=new d(.03125);e.abs().gte(.1);)e=e.times(s),c+=5;for(n=Math.log(Lm(2,c))/Math.LN10*2+5|0,o+=n,r=i=a=new d(Xl),d.precision=o;;){if(i=ui(i.times(e),o),r=r.times(++l),s=a.plus(wh(i,r,o)),Gd(s.d).slice(0,o)===Gd(a.d).slice(0,o)){for(;c--;)a=ui(a.times(a),o);return d.precision=f,t==null?(Di=!0,ui(a,f)):a}a=s}}function Pa(e){for(var t=e.e*wi,r=e.d[0];r>=10;r/=10)t++;return t}function eM(e,t,r){if(t>e.LN10.sd())throw Di=!0,r&&(e.precision=r),Error(du+"LN10 precision limit exceeded");return ui(new e(e.LN10),t)}function Bp(e){for(var t="";e--;)t+="0";return t}function HS(e,t){var r,n,i,a,s,o,l,c,d,f=1,p=10,m=e,x=m.d,v=m.constructor,b=v.precision;if(m.s<1)throw Error(du+(m.s?"NaN":"-Infinity"));if(m.eq(Xl))return new v(0);if(t==null?(Di=!1,c=b):c=t,m.eq(10))return t==null&&(Di=!0),eM(v,c);if(c+=p,v.precision=c,r=Gd(x),n=r.charAt(0),a=Pa(m),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=Gd(m.d),n=r.charAt(0),f++;a=Pa(m),n>1?(m=new v("0."+r),a++):m=new v(n+"."+r.slice(1))}else return l=eM(v,c+2,b).times(a+""),m=HS(new v(n+"."+r.slice(1)),c-p).plus(l),v.precision=b,t==null?(Di=!0,ui(m,b)):m;for(o=s=m=wh(m.minus(Xl),m.plus(Xl),c),d=ui(m.times(m),c),i=3;;){if(s=ui(s.times(d),c),l=o.plus(wh(s,new v(i),c)),Gd(l.d).slice(0,c)===Gd(o.d).slice(0,c))return o=o.times(2),a!==0&&(o=o.plus(eM(v,c+2,b).times(a+""))),o=wh(o,new v(f),c),v.precision=b,t==null?(Di=!0,ui(o,b)):o;o=l,i+=2}}function _J(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=gb(r/wi),e.d=[],n=(r+1)%wi,r<0&&(n+=wi),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=wi;n<i;)e.d.push(+t.slice(n,n+=wi));t=t.slice(n),n=wi-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),Di&&(e.e>HI||e.e<-HI))throw Error(wU+r)}else e.s=0,e.e=0,e.d=[0];return e}function ui(e,t,r){var n,i,a,s,o,l,c,d,f=e.d;for(s=1,a=f[0];a>=10;a/=10)s++;if(n=t-s,n<0)n+=wi,i=t,c=f[d=0];else{if(d=Math.ceil((n+1)/wi),a=f.length,d>=a)return e;for(c=a=f[d],s=1;a>=10;a/=10)s++;n%=wi,i=n-wi+s}if(r!==void 0&&(a=Lm(10,s-i-1),o=c/a%10|0,l=t<0||f[d+1]!==void 0||c%a,l=r<4?(o||l)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||l||r==6&&(n>0?i>0?c/Lm(10,s-i):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return l?(a=Pa(e),f.length=1,t=t-a-1,f[0]=Lm(10,(wi-t%wi)%wi),e.e=gb(-t/wi)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,a=1,d--):(f.length=d+1,a=Lm(10,wi-n),f[d]=i>0?(c/Lm(10,s-i)%Lm(10,i)|0)*a:0),l)for(;;)if(d==0){(f[0]+=a)==ss&&(f[0]=1,++e.e);break}else{if(f[d]+=a,f[d]!=ss)break;f[d--]=0,a=1}for(n=f.length;f[--n]===0;)f.pop();if(Di&&(e.e>HI||e.e<-HI))throw Error(wU+Pa(e));return e}function Y0e(e,t){var r,n,i,a,s,o,l,c,d,f,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),Di?ui(t,m):t;if(l=e.d,f=t.d,n=t.e,c=e.e,l=l.slice(),s=c-n,s){for(d=s<0,d?(r=l,s=-s,o=f.length):(r=f,n=c,o=l.length),i=Math.max(Math.ceil(m/wi),o)+2,s>i&&(s=i,r.length=1),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else{for(i=l.length,o=f.length,d=i<o,d&&(o=i),i=0;i<o;i++)if(l[i]!=f[i]){d=l[i]<f[i];break}s=0}for(d&&(r=l,l=f,f=r,t.s=-t.s),o=l.length,i=f.length-o;i>0;--i)l[o++]=0;for(i=f.length;i>s;){if(l[--i]<f[i]){for(a=i;a&&l[--a]===0;)l[a]=ss-1;--l[a],l[i]+=ss}l[i]-=f[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,Di?ui(t,m):t):new p(0)}function ux(e,t,r){var n,i=Pa(e),a=Gd(e.d),s=a.length;return t?(r&&(n=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+Bp(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Bp(-i-1)+a,r&&(n=r-s)>0&&(a+=Bp(n))):i>=s?(a+=Bp(i+1-s),r&&(n=r-i-1)>0&&(a=a+"."+Bp(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(a+="."),a+=Bp(n))),e.s<0?"-"+a:a}function NJ(e,t){if(e.length>t)return e.length=t,!0}function Q0e(e){var t,r,n;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Rg+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return _J(s,a.toString())}else if(typeof a!="string")throw Error(Rg+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,_lt.test(a))_J(s,a);else throw Error(Rg+a)}if(i.prototype=Qt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=Q0e,i.config=i.set=Nlt,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function Nlt(e){if(!e||typeof e!="object")throw Error(du+"Object expected");var t,r,n,i=["precision",1,mb,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(gb(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(Rg+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Rg+r+": "+n);return this}var SU=Q0e(klt);Xl=new SU(1);const ei=SU;var Alt=e=>e,J0e={},Z0e=e=>e===J0e,AJ=e=>function t(){return arguments.length===0||arguments.length===1&&Z0e(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},eme=(e,t)=>e===1?t:AJ(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=n.filter(s=>s!==J0e).length;return a>=e?t(...n):eme(e-a,AJ(function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];var c=n.map(d=>Z0e(d)?o.shift():d);return t(...c,...o)}))}),Tlt=e=>eme(e.length,e),XF=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},Ilt=Tlt((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),Olt=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return Alt;var i=r.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce((o,l)=>l(o),a(...arguments))}},YF=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function tme(e){var t;return e===0?t=1:t=Math.floor(new ei(e).abs().log(10).toNumber())+1,t}function rme(e,t,r){for(var n=new ei(e),i=0,a=[];n.lt(t)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}var nme=e=>{var[t,r]=e,[n,i]=[t,r];return t>r&&([n,i]=[r,t]),[n,i]},ime=(e,t,r)=>{if(e.lte(0))return new ei(0);var n=tme(e.toNumber()),i=new ei(10).pow(n),a=e.div(i),s=n!==1?.05:.1,o=new ei(Math.ceil(a.div(s).toNumber())).add(r).mul(s),l=o.mul(i);return t?new ei(l.toNumber()):new ei(Math.ceil(l.toNumber()))},Plt=(e,t,r)=>{var n=new ei(1),i=new ei(e);if(!i.isint()&&r){var a=Math.abs(e);a<1?(n=new ei(10).pow(tme(e)-1),i=new ei(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new ei(Math.floor(e)))}else e===0?i=new ei(Math.floor((t-1)/2)):r||(i=new ei(Math.floor(e)));var s=Math.floor((t-1)/2),o=Olt(Ilt(l=>i.add(new ei(l-s).mul(n)).toNumber()),XF);return o(0,t)},ame=function(t,r,n,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ei(0),tickMin:new ei(0),tickMax:new ei(0)};var s=ime(new ei(r).sub(t).div(n-1),i,a),o;t<=0&&r>=0?o=new ei(0):(o=new ei(t).add(r).div(2),o=o.sub(new ei(o).mod(s)));var l=Math.ceil(o.sub(t).div(s).toNumber()),c=Math.ceil(new ei(r).sub(o).div(s).toNumber()),d=l+c+1;return d>n?ame(t,r,n,i,a+1):(d<n&&(c=r>0?c+(n-d):c,l=r>0?l:l+(n-d)),{step:s,tickMin:o.sub(new ei(l).mul(s)),tickMax:o.add(new ei(c).mul(s))})},Rlt=function(t){var[r,n]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[o,l]=nme([r,n]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...XF(0,i-1).map(()=>1/0)]:[...XF(0,i-1).map(()=>-1/0),l];return r>n?YF(c):c}if(o===l)return Plt(o,i,a);var{step:d,tickMin:f,tickMax:p}=ame(o,l,s,a,0),m=rme(f,p.add(new ei(.1).mul(d)),d);return r>n?YF(m):m},jlt=function(t,r){var[n,i]=t,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=nme([n,i]);if(s===-1/0||o===1/0)return[n,i];if(s===o)return[s];var l=Math.max(r,2),c=ime(new ei(o).sub(s).div(l-1),a,0),d=[...rme(new ei(s),new ei(o),c),o];return a===!1&&(d=d.map(f=>Math.round(f))),n>i?YF(d):d},sme=e=>e.rootProps.maxBarSize,Dlt=e=>e.rootProps.barGap,ome=e=>e.rootProps.barCategoryGap,Mlt=e=>e.rootProps.barSize,nP=e=>e.rootProps.stackOffset,lme=e=>e.rootProps.reverseStackOrder,EU=e=>e.options.chartName,CU=e=>e.rootProps.syncId,cme=e=>e.rootProps.syncMethod,kU=e=>e.options.eventEmitter,$o={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},ih={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Vl={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},iP=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},Flt={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ih.angleAxisId,includeHidden:!1,name:void 0,reversed:ih.reversed,scale:ih.scale,tick:ih.tick,tickCount:void 0,ticks:void 0,type:ih.type,unit:void 0},Llt={allowDataOverflow:Vl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Vl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Vl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Vl.scale,tick:Vl.tick,tickCount:Vl.tickCount,ticks:void 0,type:Vl.type,unit:void 0},Blt={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:ih.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ih.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ih.scale,tick:ih.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Ult={allowDataOverflow:Vl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Vl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Vl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Vl.scale,tick:Vl.tick,tickCount:Vl.tickCount,ticks:void 0,type:"category",unit:void 0},_U=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Blt:Flt,NU=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?Ult:Llt,aP=e=>e.polarOptions,AU=st([Jh,Zh,ws],Lat),ume=st([aP,AU],(e,t)=>{if(e!=null)return ud(e.innerRadius,t,0)}),dme=st([aP,AU],(e,t)=>{if(e!=null)return ud(e.outerRadius,t,t*.8)}),$lt=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},fme=st([aP],$lt);st([_U,fme],iP);var hme=st([AU,ume,dme],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});st([NU,hme],iP);var pme=st([ii,aP,ume,dme,Jh,Zh],(e,t,r,n,i,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:s,cy:o,startAngle:l,endAngle:c}=t;return{cx:ud(s,i,i/2),cy:ud(o,a,a/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:c,clockWise:!1}}}),Ga=(e,t)=>t,sP=(e,t,r)=>r;function TU(e){return e==null?void 0:e.id}function mme(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:i,dataKey:a}=r,s=new Map;return e.forEach(o=>{var l,c=(l=o.data)!==null&&l!==void 0?l:n;if(!(c==null||c.length===0)){var d=TU(o);c.forEach((f,p)=>{var m=a==null||i?p:String(fo(f,a,null)),x=fo(f,o.dataKey,0),v;s.has(m)?v=s.get(m):v={},Object.assign(v,{[d]:x}),s.set(m,v)})}}),Array.from(s.values())}function oP(e){return e.stackId!=null&&e.dataKey!=null}var lP=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function cP(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function zlt(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Ka=e=>{var t=ii(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},xb=e=>e.tooltip.settings.axisId;function TJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function WI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TJ(Object(r),!0).forEach(function(n){Hlt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hlt(e,t,r){return(t=Wlt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wlt(e){var t=Vlt(e,"string");return typeof t=="symbol"?t:t+""}function Vlt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QF=[0,"auto"],rs={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},gme=(e,t)=>e.cartesianAxis.xAxis[t],tp=(e,t)=>{var r=gme(e,t);return r??rs},ns={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:QF,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:yC},xme=(e,t)=>e.cartesianAxis.yAxis[t],rp=(e,t)=>{var r=xme(e,t);return r??ns},qlt={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},IU=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??qlt},Qo=(e,t,r)=>{switch(t){case"xAxis":return tp(e,r);case"yAxis":return rp(e,r);case"zAxis":return IU(e,r);case"angleAxis":return _U(e,r);case"radiusAxis":return NU(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Glt=(e,t,r)=>{switch(t){case"xAxis":return tp(e,r);case"yAxis":return rp(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},kC=(e,t,r)=>{switch(t){case"xAxis":return tp(e,r);case"yAxis":return rp(e,r);case"angleAxis":return _U(e,r);case"radiusAxis":return NU(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},vme=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function yme(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var OU=e=>e.graphicalItems.cartesianItems,Klt=st([Ga,sP],yme),bme=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),_C=st([OU,Qo,Klt],bme,{memoizeOptions:{resultEqualityCheck:cP}}),wme=st([_C],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(oP)),Sme=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Xlt=st([_C],Sme),Eme=e=>e.map(t=>t.data).filter(Boolean).flat(1),Ylt=st([_C],Eme,{memoizeOptions:{resultEqualityCheck:cP}}),Cme=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=t;return e.length>0?e:r.slice(n,i+1)},PU=st([Ylt,bU],Cme),kme=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:fo(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(i=>({value:fo(i,n)}))):e.map(n=>({value:n})),uP=st([PU,Qo,_C],kme);function _me(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function tA(e){if(of(e)||e instanceof Date){var t=Number(e);if(xa(t))return t}}function IJ(e){if(Array.isArray(e)){var t=[tA(e[0]),tA(e[1])];return j0(t)?t:void 0}var r=tA(e);if(r!=null)return[r,r]}function Wh(e){return e.map(tA).filter(ztt)}function Qlt(e,t,r){return!r||typeof t!="number"||cd(t)?[]:r.length?Wh(r.flatMap(n=>{var i=fo(e,n.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!xa(a)||!xa(s)))return[t-a,t+s]})):[]}var Xa=e=>{var t=Ka(e),r=xb(e);return kC(e,t,r)},NC=st([Xa],e=>e==null?void 0:e.dataKey),Jlt=st([wme,bU,Xa],mme),Nme=(e,t,r,n)=>{var i={},a=t.reduce((s,o)=>(o.stackId==null||(s[o.stackId]==null&&(s[o.stackId]=[]),s[o.stackId].push(o)),s),i);return Object.fromEntries(Object.entries(a).map(s=>{var[o,l]=s,c=n?[...l].reverse():l,d=c.map(TU);return[o,{stackedData:Rnt(e,d,r),graphicalItems:c}]}))},JF=st([Jlt,wme,nP,lme],Nme),Ame=(e,t,r,n)=>{var{dataStartIndex:i,dataEndIndex:a}=t;if(n==null&&r!=="zAxis"){var s=Lnt(e,i,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},Zlt=st([Qo],e=>e.allowDataOverflow),RU=e=>{var t;if(e==null||!("domain"in e))return QF;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Wh(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:QF},Tme=st([Qo],RU),Ime=st([Tme,Zlt],q0e),ect=st([JF,rm,Ga,Ime],Ame,{memoizeOptions:{resultEqualityCheck:lP}}),jU=e=>e.errorBars,tct=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>_me(r,n)),VI=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),o=Math.max(...a);return[s,o]}},Ome=(e,t,r,n,i)=>{var a,s;if(r.length>0&&e.forEach(o=>{r.forEach(l=>{var c,d,f=(c=n[l.id])===null||c===void 0?void 0:c.filter(w=>_me(i,w)),p=fo(o,(d=t.dataKey)!==null&&d!==void 0?d:l.dataKey),m=Qlt(o,p,f);if(m.length>=2){var x=Math.min(...m),v=Math.max(...m);(a==null||x<a)&&(a=x),(s==null||v>s)&&(s=v)}var b=IJ(p);b!=null&&(a=a==null?b[0]:Math.min(a,b[0]),s=s==null?b[1]:Math.max(s,b[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(o=>{var l=IJ(fo(o,t.dataKey));l!=null&&(a=a==null?l[0]:Math.min(a,l[0]),s=s==null?l[1]:Math.max(s,l[1]))}),xa(a)&&xa(s))return[a,s]},rct=st([PU,Qo,Xlt,jU,Ga],Ome,{memoizeOptions:{resultEqualityCheck:lP}});function nct(e){var{value:t}=e;if(of(t)||t instanceof Date)return t}var ict=(e,t,r)=>{var n=e.map(nct).filter(i=>i!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&Nhe(n))?d0e(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},Pme=e=>e.referenceElements.dots,vb=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),act=st([Pme,Ga,sP],vb),Rme=e=>e.referenceElements.areas,sct=st([Rme,Ga,sP],vb),jme=e=>e.referenceElements.lines,oct=st([jme,Ga,sP],vb),Dme=(e,t)=>{var r=Wh(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},lct=st(act,Ga,Dme),Mme=(e,t)=>{var r=Wh(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},cct=st([sct,Ga],Mme);function uct(e){var t;if(e.x!=null)return Wh([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:Wh(r)}function dct(e){var t;if(e.y!=null)return Wh([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:Wh(r)}var Fme=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?uct(n):dct(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},fct=st([oct,Ga],Fme),hct=st(lct,fct,cct,(e,t,r)=>VI(e,r,t)),Lme=(e,t,r,n,i,a,s,o)=>{if(r!=null)return r;var l=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",c=l?VI(n,a,i):VI(a,i);return Clt(t,c,e.allowDataOverflow)},pct=st([Qo,Tme,Ime,ect,rct,hct,ii,Ga],Lme,{memoizeOptions:{resultEqualityCheck:lP}}),mct=[0,1],Bme=(e,t,r,n,i,a,s)=>{if(!((e==null||r==null||r.length===0)&&s===void 0)){var{dataKey:o,type:l}=e,c=Wx(t,a);if(c&&o==null){var d;return d0e(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return l==="category"?ict(n,e,c):i==="expand"?mct:s}},DU=st([Qo,ii,PU,uP,nP,Ga,pct],Bme),Ume=(e,t,r,n,i)=>{if(e!=null){var{scale:a,type:s}=e;if(a==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":s==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(pC(a));return o in Qw?o:"point"}}},AC=st([Qo,ii,vme,EU,Ga],Ume);function gct(e){if(e!=null){if(e in Qw)return Qw[e]();var t="scale".concat(pC(e));if(t in Qw)return Qw[t]()}}function MU(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var i=gct(t);if(i!=null){var a=i.domain(r).range(n);return Ant(a),a}}}var $me=(e,t,r)=>{var n=RU(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&j0(e))return Rlt(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&j0(e))return jlt(e,t.tickCount,t.allowDecimals)}},FU=st([DU,kC,AC],$me),zme=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&j0(t)&&Array.isArray(r)&&r.length>0){var i=t[0],a=r[0],s=t[1],o=r[r.length-1];return[Math.min(i,a),Math.max(s,o)]}return t},xct=st([Qo,DU,FU,Ga],zme),vct=st(uP,Qo,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Wh(e.map(o=>o.value))).sort((o,l)=>o-l);if(n.length<2)return 1/0;var i=n[n.length-1]-n[0];if(i===0)return 1/0;for(var a=0;a<n.length-1;a++){var s=n[a+1]-n[a];r=Math.min(r,s)}return r/i}}),Hme=st(vct,ii,ome,ws,(e,t,r,n)=>n,(e,t,r,n,i)=>{if(!xa(e))return 0;var a=t==="vertical"?n.height:n.width;if(i==="gap")return e*a/2;if(i==="no-gap"){var s=ud(r,e*a),o=e*a/2;return o-s-(o-s)/a*s}return 0}),yct=(e,t)=>{var r=tp(e,t);return r==null||typeof r.padding!="string"?0:Hme(e,"xAxis",t,r.padding)},bct=(e,t)=>{var r=rp(e,t);return r==null||typeof r.padding!="string"?0:Hme(e,"yAxis",t,r.padding)},wct=st(tp,yct,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((r=i.left)!==null&&r!==void 0?r:0)+t,right:((n=i.right)!==null&&n!==void 0?n:0)+t}}),Sct=st(rp,bct,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((r=i.top)!==null&&r!==void 0?r:0)+t,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+t}}),Ect=st([ws,wct,W3,H3,(e,t,r)=>r],(e,t,r,n,i)=>{var{padding:a}=n;return i?[a.left,r.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),Cct=st([ws,ii,Sct,W3,H3,(e,t,r)=>r],(e,t,r,n,i,a)=>{var{padding:s}=i;return a?[n.height-s.bottom,s.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),TC=(e,t,r,n)=>{var i;switch(t){case"xAxis":return Ect(e,r,n);case"yAxis":return Cct(e,r,n);case"zAxis":return(i=IU(e,r))===null||i===void 0?void 0:i.range;case"angleAxis":return fme(e);case"radiusAxis":return hme(e,r);default:return}},Wme=st([Qo,TC],iP),yb=st([Qo,AC,xct,Wme],MU);st([_C,jU,Ga],tct);function Vme(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var dP=(e,t)=>t,fP=(e,t,r)=>r,kct=st($3,dP,fP,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Vme)),_ct=st(z3,dP,fP,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Vme)),qme=(e,t)=>({width:e.width,height:t.height}),Nct=(e,t)=>{var r=typeof t.width=="number"?t.width:yC;return{width:r,height:e.height}},Gme=st(ws,tp,qme),Act=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},Tct=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},Ict=st(Zh,ws,kct,dP,fP,(e,t,r,n,i)=>{var a={},s;return r.forEach(o=>{var l=qme(t,o);s==null&&(s=Act(t,n,e));var c=n==="top"&&!i||n==="bottom"&&i;a[o.id]=s-Number(c)*l.height,s+=(c?-1:1)*l.height}),a}),Oct=st(Jh,ws,_ct,dP,fP,(e,t,r,n,i)=>{var a={},s;return r.forEach(o=>{var l=Nct(t,o);s==null&&(s=Tct(t,n,e));var c=n==="left"&&!i||n==="right"&&i;a[o.id]=s-Number(c)*l.width,s+=(c?-1:1)*l.width}),a}),Pct=(e,t)=>{var r=tp(e,t);if(r!=null)return Ict(e,r.orientation,r.mirror)},Rct=st([ws,tp,Pct,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r==null?void 0:r[n];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),jct=(e,t)=>{var r=rp(e,t);if(r!=null)return Oct(e,r.orientation,r.mirror)},Dct=st([ws,rp,jct,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r==null?void 0:r[n];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),Kme=st(ws,rp,(e,t)=>{var r=typeof t.width=="number"?t.width:yC;return{width:r,height:e.height}}),OJ=(e,t,r)=>{switch(t){case"xAxis":return Gme(e,r).width;case"yAxis":return Kme(e,r).height;default:return}},Xme=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=r,o=Wx(e,n),l=t.map(c=>c.value);if(s&&o&&a==="category"&&i&&Nhe(l))return l}},LU=st([ii,uP,Qo,Ga],Xme),Yme=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:a}=r,s=Wx(e,n);if(s&&(i==="number"||a!=="auto"))return t.map(o=>o.value)}},BU=st([ii,uP,kC,Ga],Yme),PJ=st([ii,Glt,AC,yb,LU,BU,TC,FU,Ga],(e,t,r,n,i,a,s,o,l)=>{if(t!=null){var c=Wx(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:a,duplicateDomain:i,isCategorical:c,niceTicks:o,range:s,realScaleType:r,scale:n}}}),Mct=(e,t,r,n,i,a,s,o,l)=>{if(!(t==null||n==null)){var c=Wx(e,l),{type:d,ticks:f,tickCount:p}=t,m=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,x=d==="category"&&n.bandwidth?n.bandwidth()/m:0;x=l==="angleAxis"&&a!=null&&a.length>=2?hl(a[0]-a[1])*2*x:x;var v=f||i;if(v){var b=v.map((w,k)=>{var E=s?s.indexOf(w):w;return{index:k,coordinate:n(E)+x,value:w,offset:x}});return b.filter(w=>xa(w.coordinate))}return c&&o?o.map((w,k)=>({coordinate:n(w)+x,value:w,index:k,offset:x})).filter(w=>xa(w.coordinate)):n.ticks?n.ticks(p).map(w=>({coordinate:n(w)+x,value:w,offset:x})):n.domain().map((w,k)=>({coordinate:n(w)+x,value:s?s[w]:w,index:k,offset:x}))}},Qme=st([ii,kC,AC,yb,FU,TC,LU,BU,Ga],Mct),Fct=(e,t,r,n,i,a,s)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=Wx(e,s),{tickCount:l}=t,c=0;return c=s==="angleAxis"&&(n==null?void 0:n.length)>=2?hl(n[0]-n[1])*2*c:c,o&&a?a.map((d,f)=>({coordinate:r(d)+c,value:d,index:f,offset:c})):r.ticks?r.ticks(l).map(d=>({coordinate:r(d)+c,value:d,offset:c})):r.domain().map((d,f)=>({coordinate:r(d)+c,value:i?i[d]:d,index:f,offset:c}))}},Oy=st([ii,kC,yb,TC,LU,BU,Ga],Fct),Py=st(Qo,yb,(e,t)=>{if(!(e==null||t==null))return WI(WI({},e),{},{scale:t})}),Lct=st([Qo,AC,DU,Wme],MU);st((e,t,r)=>IU(e,r),Lct,(e,t)=>{if(!(e==null||t==null))return WI(WI({},e),{},{scale:t})});var Bct=st([ii,$3,z3],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Jme=e=>e.options.defaultTooltipEventType,Zme=e=>e.options.validateTooltipEventTypes;function ege(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function UU(e,t){var r=Jme(e),n=Zme(e);return ege(t,r,n)}function Uct(e){return br(t=>UU(t,e))}var tge=(e,t)=>{var r,n=Number(t);if(!(cd(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},$ct=e=>e.tooltip.settings,qp={active:!1,index:null,dataKey:void 0,coordinate:void 0},zct={itemInteraction:{click:qp,hover:qp},axisInteraction:{click:qp,hover:qp},keyboardInteraction:qp,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},rge=Pl({name:"tooltip",initialState:zct,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Oi()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,i=Zu(e).tooltipItemPayloads.indexOf(r);i>-1&&(e.tooltipItemPayloads[i]=n)},prepare:Oi()},removeTooltipEntrySettings:{reducer(e,t){var r=Zu(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Oi()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Hct,replaceTooltipEntrySettings:Wct,removeTooltipEntrySettings:Vct,setTooltipSettingsState:qct,setActiveMouseOverItemIndex:nge,mouseLeaveItem:Gct,mouseLeaveChart:ige,setActiveClickItemIndex:Kct,setMouseOverAxisIndex:age,setMouseClickAxisIndex:Xct,setSyncInteraction:ZF,setKeyboardInteraction:e5}=rge.actions,Yct=rge.reducer;function RJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function nN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RJ(Object(r),!0).forEach(function(n){Qct(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qct(e,t,r){return(t=Jct(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jct(e){var t=Zct(e,"string");return typeof t=="symbol"?t:t+""}function Zct(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eut(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function tut(e){return e.index!=null}var sge=(e,t,r,n)=>{if(t==null)return qp;var i=eut(e,t,r);if(i==null)return qp;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(tut(i)){if(a)return nN(nN({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return nN(nN({},qp),{},{coordinate:i.coordinate})};function rut(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function nut(e,t){var r=rut(e),n=t[0],i=t[1];if(r===void 0)return!1;var a=Math.min(n,i),s=Math.max(n,i);return r>=a&&r<=s}function iut(e,t,r){if(r==null||t==null)return!0;var n=fo(e,t);return n==null||!j0(r)?!0:nut(n,r)}var $U=(e,t,r,n)=>{var i=e==null?void 0:e.index;if(i==null)return null;var a=Number(i);if(!xa(a))return i;var s=0,o=1/0;t.length>0&&(o=t.length-1);var l=Math.max(s,Math.min(a,o)),c=t[l];return c==null||iut(c,r,n)?String(l):null},oge=(e,t,r,n,i,a,s,o)=>{if(!(a==null||o==null)){var l=s[0],c=l==null?void 0:o(l.positions,a);if(c!=null)return c;var d=i==null?void 0:i[Number(a)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},lge=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return r==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var s;return((s=a.settings)===null||s===void 0?void 0:s.dataKey)===i})},IC=e=>e.options.tooltipPayloadSearcher,bb=e=>e.tooltip;function jJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function DJ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jJ(Object(r),!0).forEach(function(n){aut(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aut(e,t,r){return(t=sut(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sut(e){var t=out(e,"string");return typeof t=="symbol"?t:t+""}function out(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lut(e,t){return e??t}var cge=(e,t,r,n,i,a,s)=>{if(!(t==null||a==null)){var{chartData:o,computedData:l,dataStartIndex:c,dataEndIndex:d}=r,f=[];return e.reduce((p,m)=>{var x,{dataDefinedOnItem:v,settings:b}=m,w=lut(v,o),k=Array.isArray(w)?Ipe(w,c,d):w,E=(x=b==null?void 0:b.dataKey)!==null&&x!==void 0?x:n,N=b==null?void 0:b.nameKey,P;if(n&&Array.isArray(k)&&!Array.isArray(k[0])&&s==="axis"?P=$tt(k,n,i):P=a(k,t,l,N),Array.isArray(P))P.forEach(O=>{var D=DJ(DJ({},b),{},{name:O.name,unit:O.unit,color:void 0,fill:void 0});p.push(dQ({tooltipEntrySettings:D,dataKey:O.dataKey,payload:O.payload,value:fo(O.payload,O.dataKey),name:O.name}))});else{var R;p.push(dQ({tooltipEntrySettings:b,dataKey:E,payload:P,value:fo(P,E),name:(R=fo(P,N))!==null&&R!==void 0?R:b==null?void 0:b.name}))}return p},f)}},zU=st([Xa,ii,vme,EU,Ka],Ume),cut=st([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),uut=st([Ka,xb],yme),OC=st([cut,Xa,uut],bme,{memoizeOptions:{resultEqualityCheck:cP}}),dut=st([OC],e=>e.filter(oP)),fut=st([OC],Eme,{memoizeOptions:{resultEqualityCheck:cP}}),wb=st([fut,rm],Cme),hut=st([dut,rm,Xa],mme),HU=st([wb,Xa,OC],kme),uge=st([Xa],RU),put=st([Xa],e=>e.allowDataOverflow),dge=st([uge,put],q0e),mut=st([OC],e=>e.filter(oP)),gut=st([hut,mut,nP,lme],Nme),xut=st([gut,rm,Ka,dge],Ame),vut=st([OC],Sme),yut=st([wb,Xa,vut,jU,Ka],Ome,{memoizeOptions:{resultEqualityCheck:lP}}),but=st([Pme,Ka,xb],vb),wut=st([but,Ka],Dme),Sut=st([Rme,Ka,xb],vb),Eut=st([Sut,Ka],Mme),Cut=st([jme,Ka,xb],vb),kut=st([Cut,Ka],Fme),_ut=st([wut,kut,Eut],VI),Nut=st([Xa,uge,dge,xut,yut,_ut,ii,Ka],Lme),PC=st([Xa,ii,wb,HU,nP,Ka,Nut],Bme),Aut=st([PC,Xa,zU],$me),Tut=st([Xa,PC,Aut,Ka],zme),fge=e=>{var t=Ka(e),r=xb(e),n=!1;return TC(e,t,r,n)},hge=st([Xa,fge],iP),pge=st([Xa,zU,Tut,hge],MU),Iut=st([ii,HU,Xa,Ka],Xme),Out=st([ii,HU,Xa,Ka],Yme),Put=(e,t,r,n,i,a,s,o)=>{if(t){var{type:l}=t,c=Wx(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=l==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?hl(i[0]-i[1])*2*f:f,c&&s?s.map((p,m)=>({coordinate:n(p)+f,value:p,index:m,offset:f})):n.domain().map((p,m)=>({coordinate:n(p)+f,value:a?a[p]:p,index:m,offset:f}))}}},np=st([ii,Xa,zU,pge,fge,Iut,Out,Ka],Put),WU=st([Jme,Zme,$ct],(e,t,r)=>ege(r.shared,e,t)),mge=e=>e.tooltip.settings.trigger,VU=e=>e.tooltip.settings.defaultIndex,hP=st([bb,WU,mge,VU],sge),Ry=st([hP,wb,NC,PC],$U),gge=st([np,Ry],tge),xge=st([hP],e=>{if(e)return e.dataKey}),vge=st([bb,WU,mge,VU],lge),Rut=st([Jh,Zh,ii,ws,np,VU,vge,IC],oge),jut=st([hP,Rut],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),Dut=st([hP],e=>e.active),Mut=st([vge,Ry,rm,NC,gge,IC,WU],cge);st([Mut],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function MJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function FJ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MJ(Object(r),!0).forEach(function(n){Fut(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fut(e,t,r){return(t=Lut(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lut(e){var t=But(e,"string");return typeof t=="symbol"?t:t+""}function But(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Uut=()=>br(Xa),$ut=()=>{var e=Uut(),t=br(np),r=br(pge);return CI(!e||!r?void 0:FJ(FJ({},e),{},{scale:r}),t)};function LJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function R1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LJ(Object(r),!0).forEach(function(n){zut(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zut(e,t,r){return(t=Hut(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hut(e){var t=Wut(e,"string");return typeof t=="symbol"?t:t+""}function Wut(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vut=(e,t,r,n)=>{var i=t.find(a=>a&&a.index===r);if(i){if(e==="horizontal")return{x:i.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},qut=(e,t,r,n)=>{var i=t.find(c=>c&&c.index===r);if(i){if(e==="centric"){var a=i.coordinate,{radius:s}=n;return R1(R1(R1({},n),Ms(n.cx,n.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:l}=n;return R1(R1(R1({},n),Ms(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Gut(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var yge=(e,t,r,n,i)=>{var a,s=-1,o=(a=t==null?void 0:t.length)!==null&&a!==void 0?a:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var l=0;l<o;l++){var c=l>0?r[l-1].coordinate:r[o-1].coordinate,d=r[l].coordinate,f=l>=o-1?r[0].coordinate:r[l+1].coordinate,p=void 0;if(hl(d-c)!==hl(f-d)){var m=[];if(hl(f-d)===hl(i[1]-i[0])){p=f;var x=d+i[1]-i[0];m[0]=Math.min(x,(x+c)/2),m[1]=Math.max(x,(x+c)/2)}else{p=c;var v=f+i[1]-i[0];m[0]=Math.min(d,(v+d)/2),m[1]=Math.max(d,(v+d)/2)}var b=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(e>b[0]&&e<=b[1]||e>=m[0]&&e<=m[1]){({index:s}=r[l]);break}}else{var w=Math.min(c,f),k=Math.max(c,f);if(e>(w+d)/2&&e<=(k+d)/2){({index:s}=r[l]);break}}}else if(t){for(var E=0;E<o;E++)if(E===0&&e<=(t[E].coordinate+t[E+1].coordinate)/2||E>0&&E<o-1&&e>(t[E].coordinate+t[E-1].coordinate)/2&&e<=(t[E].coordinate+t[E+1].coordinate)/2||E===o-1&&e>(t[E].coordinate+t[E-1].coordinate)/2){({index:s}=t[E]);break}}return s},Kut=()=>br(EU),qU=(e,t)=>t,bge=(e,t,r)=>r,GU=(e,t,r,n)=>n,Xut=st(np,e=>P3(e,t=>t.coordinate)),KU=st([bb,qU,bge,GU],sge),XU=st([KU,wb,NC,PC],$U),Yut=(e,t,r)=>{if(t!=null){var n=bb(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},wge=st([bb,qU,bge,GU],lge),qI=st([Jh,Zh,ii,ws,np,GU,wge,IC],oge),Qut=st([KU,qI],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),Sge=st([np,XU],tge),Jut=st([wge,XU,rm,NC,Sge,IC,qU],cge),Zut=st([KU,XU],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),edt=(e,t,r,n,i,a,s)=>{if(!(!e||!r||!n||!i)&&Gut(e,s)){var o=Bnt(e,t),l=yge(o,a,i,r,n),c=Vut(t,i,l,e);return{activeIndex:String(l),activeCoordinate:c}}},tdt=(e,t,r,n,i,a,s)=>{if(!(!e||!n||!i||!a||!r)){var o=Hat(e,r);if(o){var l=Unt(o,t),c=yge(l,s,a,n,i),d=qut(t,a,c,o);return{activeIndex:String(c),activeCoordinate:d}}}},rdt=(e,t,r,n,i,a,s,o)=>{if(!(!e||!t||!n||!i||!a))return t==="horizontal"||t==="vertical"?edt(e,t,n,i,a,s,o):tdt(e,t,r,n,i,a,s)},ndt=st(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),idt=st(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values($o)),r=Array.from(new Set(t));return r.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:zlt}});function BJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function UJ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BJ(Object(r),!0).forEach(function(n){adt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function adt(e,t,r){return(t=sdt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sdt(e){var t=odt(e,"string");return typeof t=="symbol"?t:t+""}function odt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ldt={},cdt={zIndexMap:Object.values($o).reduce((e,t)=>UJ(UJ({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),ldt)},udt=new Set(Object.values($o));function ddt(e){return udt.has(e)}var Ege=Pl({name:"zIndex",initialState:cdt,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Oi()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!ddt(r)&&delete e.zIndexMap[r])},prepare:Oi()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:i}=t.payload;e.zIndexMap[r]?i?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:i?void 0:n,panoramaElementId:i?n:void 0}},prepare:Oi()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:Oi()}}}),{registerZIndexPortal:fdt,unregisterZIndexPortal:hdt,registerZIndexPortalId:pdt,unregisterZIndexPortalId:mdt}=Ege.actions,gdt=Ege.reducer;function ip(e){var{zIndex:t,children:r}=e,n=mit(),i=n&&t!==void 0&&t!==0,a=Rl(),s=ya();I.useLayoutEffect(()=>i?(s(fdt({zIndex:t})),()=>{s(hdt({zIndex:t}))}):mC,[s,t,i]);var o=br(c=>ndt(c,t,a));if(!i)return r;if(!o)return null;var l=document.getElementById(o);return l?Il.createPortal(r,l):null}function t5(){return t5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t5.apply(null,arguments)}function $J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function iN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$J(Object(r),!0).forEach(function(n){xdt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$J(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xdt(e,t,r){return(t=vdt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vdt(e){var t=ydt(e,"string");return typeof t=="symbol"?t:t+""}function ydt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bdt(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return I.isValidElement(t)?I.cloneElement(t,n):I.createElement(r,n)}function wdt(e){var t,{coordinate:r,payload:n,index:i,offset:a,tooltipAxisBandSize:s,layout:o,cursor:l,tooltipEventType:c,chartName:d}=e,f=r,p=n,m=i;if(!l||!f||d!=="ScatterChart"&&c!=="axis")return null;var x,v,b;if(d==="ScatterChart")x=f,v=iat,b=$o.cursorLine;else if(d==="BarChart")x=aat(o,f,a,s),v=i0e,b=$o.cursorRectangle;else if(o==="radial"&&Ihe(f)){var{cx:w,cy:k,radius:E,startAngle:N,endAngle:P}=a0e(f);x={cx:w,cy:k,startAngle:N,endAngle:P,innerRadius:E,outerRadius:E},v=o0e,b=$o.cursorLine}else x={points:Gat(o,f,a)},v=Zpe,b=$o.cursorLine;var R=typeof l=="object"&&"className"in l?l.className:void 0,O=iN(iN(iN(iN({stroke:"#ccc",pointerEvents:"none"},a),x),yB(l)),{},{payload:p,payloadIndex:m,className:gi("recharts-tooltip-cursor",R)});return I.createElement(ip,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:b},I.createElement(bdt,{cursor:l,cursorComp:v,cursorProps:O}))}function Sdt(e){var t=$ut(),r=zpe(),n=q3(),i=Kut();return t==null||r==null||n==null||i==null?null:I.createElement(wdt,t5({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:i}))}var Cge=I.createContext(null),Edt=()=>I.useContext(Cge),kge={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function a(l,c,d,f,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new i(d,f||l,p),x=r?r+c:c;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],m]:l._events[x].push(m):(l._events[x]=m,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],d,f;if(this._eventsCount===0)return c;for(f in d=this._events)t.call(d,f)&&c.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},o.prototype.listeners=function(c){var d=r?r+c:c,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,m=f.length,x=new Array(m);p<m;p++)x[p]=f[p].fn;return x},o.prototype.listenerCount=function(c){var d=r?r+c:c,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(c,d,f,p,m,x){var v=r?r+c:c;if(!this._events[v])return!1;var b=this._events[v],w=arguments.length,k,E;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),w){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,f),!0;case 4:return b.fn.call(b.context,d,f,p),!0;case 5:return b.fn.call(b.context,d,f,p,m),!0;case 6:return b.fn.call(b.context,d,f,p,m,x),!0}for(E=1,k=new Array(w-1);E<w;E++)k[E-1]=arguments[E];b.fn.apply(b.context,k)}else{var N=b.length,P;for(E=0;E<N;E++)switch(b[E].once&&this.removeListener(c,b[E].fn,void 0,!0),w){case 1:b[E].fn.call(b[E].context);break;case 2:b[E].fn.call(b[E].context,d);break;case 3:b[E].fn.call(b[E].context,d,f);break;case 4:b[E].fn.call(b[E].context,d,f,p);break;default:if(!k)for(P=1,k=new Array(w-1);P<w;P++)k[P-1]=arguments[P];b[E].fn.apply(b[E].context,k)}}return!0},o.prototype.on=function(c,d,f){return a(this,c,d,f,!1)},o.prototype.once=function(c,d,f){return a(this,c,d,f,!0)},o.prototype.removeListener=function(c,d,f,p){var m=r?r+c:c;if(!this._events[m])return this;if(!d)return s(this,m),this;var x=this._events[m];if(x.fn)x.fn===d&&(!p||x.once)&&(!f||x.context===f)&&s(this,m);else{for(var v=0,b=[],w=x.length;v<w;v++)(x[v].fn!==d||p&&!x[v].once||f&&x[v].context!==f)&&b.push(x[v]);b.length?this._events[m]=b.length===1?b[0]:b:s(this,m)}return this},o.prototype.removeAllListeners=function(c){var d;return c?(d=r?r+c:c,this._events[d]&&s(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(kge);var Cdt=kge.exports;const kdt=Bs(Cdt);var WS=new kdt,r5="recharts.syncEvent.tooltip",zJ="recharts.syncEvent.brush";function _dt(e,t){if(t){var r=Number.parseInt(t,10);if(!cd(r))return e==null?void 0:e[r]}}var Ndt={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},_ge=Pl({name:"options",initialState:Ndt,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Adt=_ge.reducer,{createEventEmitter:Tdt}=_ge.actions;function Idt(e){return e.tooltip.syncInteraction}var Odt={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Nge=Pl({name:"chartData",initialState:Odt,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:HJ,setDataStartEndIndexes:Pdt,setComputedData:HNt}=Nge.actions,Rdt=Nge.reducer,jdt=["x","y"];function WJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function j1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WJ(Object(r),!0).forEach(function(n){Ddt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ddt(e,t,r){return(t=Mdt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mdt(e){var t=Fdt(e,"string");return typeof t=="symbol"?t:t+""}function Fdt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ldt(e,t){if(e==null)return{};var r,n,i=Bdt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Bdt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Udt(){var e=br(CU),t=br(kU),r=ya(),n=br(cme),i=br(np),a=q3(),s=V3(),o=br(l=>l.rootProps.className);I.useEffect(()=>{if(e==null)return mC;var l=(c,d,f)=>{if(t!==f&&e===c){if(n==="index"){var p;if(s&&d!==null&&d!==void 0&&(p=d.payload)!==null&&p!==void 0&&p.coordinate&&d.payload.sourceViewBox){var m=d.payload.coordinate,{x,y:v}=m,b=Ldt(m,jdt),{x:w,y:k,width:E,height:N}=d.payload.sourceViewBox,P=j1(j1({},b),{},{x:s.x+(E?(x-w)/E:0)*s.width,y:s.y+(N?(v-k)/N:0)*s.height});r(j1(j1({},d),{},{payload:j1(j1({},d.payload),{},{coordinate:P})}))}else r(d);return}if(i!=null){var R;if(typeof n=="function"){var O={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},D=n(i,O);R=i[D]}else n==="value"&&(R=i.find(Z=>String(Z.value)===d.payload.label));var{coordinate:L}=d.payload;if(R==null||d.payload.active===!1||L==null||s==null){r(ZF({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:B,y:z}=L,H=Math.min(B,s.x+s.width),te=Math.min(z,s.y+s.height),Y={x:a==="horizontal"?R.coordinate:H,y:a==="horizontal"?te:R.coordinate},W=ZF({active:d.payload.active,coordinate:Y,dataKey:d.payload.dataKey,index:String(R.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox});r(W)}}};return WS.on(r5,l),()=>{WS.off(r5,l)}},[o,r,t,e,n,i,a,s])}function $dt(){var e=br(CU),t=br(kU),r=ya();I.useEffect(()=>{if(e==null)return mC;var n=(i,a,s)=>{t!==s&&e===i&&r(Pdt(a))};return WS.on(zJ,n),()=>{WS.off(zJ,n)}},[r,t,e])}function zdt(){var e=ya();I.useEffect(()=>{e(Tdt())},[e]),Udt(),$dt()}function Hdt(e,t,r,n,i,a){var s=br(m=>Yut(m,e,t)),o=br(kU),l=br(CU),c=br(cme),d=br(Idt),f=d==null?void 0:d.active,p=V3();I.useEffect(()=>{if(!f&&l!=null&&o!=null){var m=ZF({active:a,coordinate:r,dataKey:s,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:p});WS.emit(r5,l,m,o)}},[f,r,s,i,n,o,l,c,a,p])}function VJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function qJ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VJ(Object(r),!0).forEach(function(n){Wdt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wdt(e,t,r){return(t=Vdt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vdt(e){var t=qdt(e,"string");return typeof t=="symbol"?t:t+""}function qdt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gdt(e){return e.dataKey}function Kdt(e,t){return I.isValidElement(e)?I.cloneElement(e,t):typeof e=="function"?I.createElement(e,t):I.createElement(Mit,t)}var GJ=[],Xdt={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!hb.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Ydt(e){var t,r,n=vc(e,Xdt),{active:i,allowEscapeViewBox:a,animationDuration:s,animationEasing:o,content:l,filterNull:c,isAnimationActive:d,offset:f,payloadUniqBy:p,position:m,reverseDirection:x,useTranslate3d:v,wrapperStyle:b,cursor:w,shared:k,trigger:E,defaultIndex:N,portal:P,axisId:R}=n,O=ya(),D=typeof N=="number"?String(N):N;I.useEffect(()=>{O(qct({shared:k,trigger:E,axisId:R,active:i,defaultIndex:D}))},[O,k,E,R,i,D]);var L=V3(),B=Jpe(),z=Uct(k),{activeIndex:H,isActive:te}=(t=br(Ee=>Zut(Ee,z,E,D)))!==null&&t!==void 0?t:{},Y=br(Ee=>Jut(Ee,z,E,D)),W=br(Ee=>Sge(Ee,z,E,D)),Z=br(Ee=>Qut(Ee,z,E,D)),re=Y,X=Edt(),Q=(r=i??te)!==null&&r!==void 0?r:!1,[fe,ye]=Ert([re,Q]),J=z==="axis"?W:void 0;Hdt(z,E,Z,J,H,Q);var ce=P??X;if(ce==null||L==null||z==null)return null;var V=re??GJ;Q||(V=GJ),c&&V.length&&(V=srt(V.filter(Ee=>Ee.value!=null&&(Ee.hide!==!0||n.includeHidden)),p,Gdt));var G=V.length>0,ie=I.createElement(Hit,{allowEscapeViewBox:a,animationDuration:s,animationEasing:o,isAnimationActive:d,active:Q,coordinate:Z,hasPayload:G,offset:f,position:m,reverseDirection:x,useTranslate3d:v,viewBox:L,wrapperStyle:b,lastBoundingBox:fe,innerRef:ye,hasPortalFromProps:!!P},Kdt(l,qJ(qJ({},n),{},{payload:V,label:J,active:Q,activeIndex:H,coordinate:Z,accessibilityLayer:B})));return I.createElement(I.Fragment,null,Il.createPortal(ie,ce),Q&&I.createElement(Sdt,{cursor:w,tooltipEventType:z,coordinate:Z,payload:V,index:H}))}var YU=e=>null;YU.displayName="Cell";function Qdt(e,t,r){return(t=Jdt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jdt(e){var t=Zdt(e,"string");return typeof t=="symbol"?t:t+""}function Zdt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class eft{constructor(t){Qdt(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function KJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function tft(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KJ(Object(r),!0).forEach(function(n){rft(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rft(e,t,r){return(t=nft(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nft(e){var t=ift(e,"string");return typeof t=="symbol"?t:t+""}function ift(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aft={cacheSize:2e3,enableCache:!0},Age=tft({},aft),XJ=new eft(Age.cacheSize),sft={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},YJ="recharts_measurement_span";function oft(e,t){var r=t.fontSize||"",n=t.fontFamily||"",i=t.fontWeight||"",a=t.fontStyle||"",s=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o)}var QJ=(e,t)=>{try{var r=document.getElementById(YJ);r||(r=document.createElement("span"),r.setAttribute("id",YJ),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,sft,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},P2=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||hb.isSsr)return{width:0,height:0};if(!Age.enableCache)return QJ(t,r);var n=oft(t,r),i=XJ.get(n);if(i)return i;var a=QJ(t,r);return XJ.set(n,a),a},JJ=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ZJ=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,lft=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,cft=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Tge={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},uft=Object.keys(Tge),cv="NaN";function dft(e,t){return e*Tge[t]}class ol{static parse(t){var r,[,n,i]=(r=cft.exec(t))!==null&&r!==void 0?r:[];return new ol(parseFloat(n),i??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,cd(t)&&(this.unit=""),r!==""&&!lft.test(r)&&(this.num=NaN,this.unit=""),uft.includes(r)&&(this.num=dft(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new ol(NaN,""):new ol(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ol(NaN,""):new ol(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ol(NaN,""):new ol(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ol(NaN,""):new ol(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return cd(this.num)}}function Ige(e){if(e.includes(cv))return cv;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,i,a]=(r=JJ.exec(t))!==null&&r!==void 0?r:[],s=ol.parse(n??""),o=ol.parse(a??""),l=i==="*"?s.multiply(o):s.divide(o);if(l.isNaN())return cv;t=t.replace(JJ,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,d,f,p]=(c=ZJ.exec(t))!==null&&c!==void 0?c:[],m=ol.parse(d??""),x=ol.parse(p??""),v=f==="+"?m.add(x):m.subtract(x);if(v.isNaN())return cv;t=t.replace(ZJ,v.toString())}return t}var eZ=/\(([^()]*)\)/;function fft(e){for(var t=e,r;(r=eZ.exec(t))!=null;){var[,n]=r;t=t.replace(eZ,Ige(n))}return t}function hft(e){var t=e.replace(/\s+/g,"");return t=fft(t),t=Ige(t),t}function pft(e){try{return hft(e)}catch{return cv}}function tM(e){var t=pft(e.slice(5,-1));return t===cv?"":t}var mft=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],gft=["dx","dy","angle","className","breakAll"];function n5(){return n5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n5.apply(null,arguments)}function tZ(e,t){if(e==null)return{};var r,n,i=xft(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function xft(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Oge=/[ \f\n\r\t\v\u2028\u2029]+/,Pge=e=>{var{children:t,breakAll:r,style:n}=e;try{var i=[];ys(t)||(r?i=t.toString().split(""):i=t.toString().split(Oge));var a=i.map(o=>({word:o,width:P2(o,n).width})),s=r?0:P2("",n).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function vft(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var Rge=(e,t,r,n)=>e.reduce((i,a)=>{var{word:s,width:o}=a,l=i[i.length-1];if(l&&o!=null&&(t==null||n||l.width+o+r<Number(t)))l.words.push(s),l.width+=o+r;else{var c={words:[s],width:o};i.push(c)}return i},[]),jge=e=>e.reduce((t,r)=>t.width>r.width?t:r),yft="",rZ=(e,t,r,n,i,a,s,o)=>{var l=e.slice(0,t),c=Pge({breakAll:r,style:n,children:l+yft});if(!c)return[!1,[]];var d=Rge(c.wordsWithComputedWidth,a,s,o),f=d.length>i||jge(d).width>Number(a);return[f,d]},bft=(e,t,r,n,i)=>{var{maxLines:a,children:s,style:o,breakAll:l}=e,c=ur(a),d=String(s),f=Rge(t,n,r,i);if(!c||i)return f;var p=f.length>a||jge(f).width>Number(n);if(!p)return f;for(var m=0,x=d.length-1,v=0,b;m<=x&&v<=d.length-1;){var w=Math.floor((m+x)/2),k=w-1,[E,N]=rZ(d,k,l,o,a,n,r,i),[P]=rZ(d,w,l,o,a,n,r,i);if(!E&&!P&&(m=w+1),E&&P&&(x=w-1),!E&&P){b=N;break}v++}return b||f},nZ=e=>{var t=ys(e)?[]:e.toString().split(Oge);return[{words:t,width:void 0}]},wft=e=>{var{width:t,scaleToFit:r,children:n,style:i,breakAll:a,maxLines:s}=e;if((t||r)&&!hb.isSsr){var o,l,c=Pge({breakAll:a,children:n,style:i});if(c){var{wordsWithComputedWidth:d,spaceWidth:f}=c;o=d,l=f}else return nZ(n);return bft({breakAll:a,children:n,maxLines:s,style:i},o,l,t,!!r)}return nZ(n)},Dge="#808080",Sft={angle:0,breakAll:!1,capHeight:"0.71em",fill:Dge,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},QU=I.forwardRef((e,t)=>{var r=vc(e,Sft),{x:n,y:i,lineHeight:a,capHeight:s,fill:o,scaleToFit:l,textAnchor:c,verticalAnchor:d}=r,f=tZ(r,mft),p=I.useMemo(()=>wft({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:l,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,l,f.style,f.width]),{dx:m,dy:x,angle:v,className:b,breakAll:w}=f,k=tZ(f,gft);if(!of(n)||!of(i)||p.length===0)return null;var E=Number(n)+(ur(m)?m:0),N=Number(i)+(ur(x)?x:0);if(!xa(E)||!xa(N))return null;var P;switch(d){case"start":P=tM("calc(".concat(s,")"));break;case"middle":P=tM("calc(".concat((p.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:P=tM("calc(".concat(p.length-1," * -").concat(a,")"));break}var R=[];if(l){var O=p[0].width,{width:D}=f;R.push("scale(".concat(ur(D)&&ur(O)?D/O:1,")"))}return v&&R.push("rotate(".concat(v,", ").concat(E,", ").concat(N,")")),R.length&&(k.transform=R.join(" ")),I.createElement("text",n5({},cu(k),{ref:t,x:E,y:N,className:gi("recharts-text",b),textAnchor:c,fill:o.includes("url")?Dge:o}),p.map((L,B)=>{var z=L.words.join(w?"":" ");return I.createElement("tspan",{x:E,dy:B===0?P:a,key:"".concat(z,"-").concat(B)},z)}))});QU.displayName="Text";var Eft=["labelRef"];function Cft(e,t){if(e==null)return{};var r,n,i=kft(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function kft(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function iZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ha(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iZ(Object(r),!0).forEach(function(n){_ft(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _ft(e,t,r){return(t=Nft(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nft(e){var t=Aft(e,"string");return typeof t=="symbol"?t:t+""}function Aft(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ah(){return ah=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ah.apply(null,arguments)}var Mge=I.createContext(null),Tft=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:i,width:a,height:s,children:o}=e,l=I.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:i,width:a,height:s}),[t,r,n,i,a,s]);return I.createElement(Mge.Provider,{value:l},o)},Fge=()=>{var e=I.useContext(Mge),t=V3();return e||$pe(t)},Ift=I.createContext(null),Oft=()=>{var e=I.useContext(Ift),t=br(pme);return e||t},Pft=e=>{var{value:t,formatter:r}=e,n=ys(e.children)?t:e.children;return typeof r=="function"?r(n):n},JU=e=>e!=null&&typeof e=="function",Rft=(e,t)=>{var r=hl(t-e),n=Math.min(Math.abs(t-e),360);return r*n},jft=(e,t,r,n,i)=>{var{offset:a,className:s}=e,{cx:o,cy:l,innerRadius:c,outerRadius:d,startAngle:f,endAngle:p,clockWise:m}=i,x=(c+d)/2,v=Rft(f,p),b=v>=0?1:-1,w,k;switch(t){case"insideStart":w=f+b*a,k=m;break;case"insideEnd":w=p-b*a,k=!m;break;case"end":w=p+b*a,k=m;break;default:throw new Error("Unsupported position ".concat(t))}k=v<=0?k:!k;var E=Ms(o,l,x,w),N=Ms(o,l,x,w+(k?1:-1)*359),P="M".concat(E.x,",").concat(E.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(k?0:1,`,
    `).concat(N.x,",").concat(N.y),R=ys(e.id)?OS("recharts-radial-line-"):e.id;return I.createElement("text",ah({},n,{dominantBaseline:"central",className:gi("recharts-radial-bar-label",s)}),I.createElement("defs",null,I.createElement("path",{id:R,d:P})),I.createElement("textPath",{xlinkHref:"#".concat(R)},r))},Dft=(e,t,r)=>{var{cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:o,endAngle:l}=e,c=(o+l)/2;if(r==="outside"){var{x:d,y:f}=Ms(n,i,s+t,c);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var p=(a+s)/2,{x:m,y:x}=Ms(n,i,p,c);return{x:m,y:x,textAnchor:"middle",verticalAnchor:"middle"}},i5=e=>"cx"in e&&ur(e.cx),Mft=(e,t)=>{var{parentViewBox:r,offset:n,position:i}=e,a;r!=null&&!i5(r)&&(a=r);var{x:s,y:o,upperWidth:l,lowerWidth:c,height:d}=t,f=s,p=s+(l-c)/2,m=(f+p)/2,x=(l+c)/2,v=f+l/2,b=d>=0?1:-1,w=b*n,k=b>0?"end":"start",E=b>0?"start":"end",N=l>=0?1:-1,P=N*n,R=N>0?"end":"start",O=N>0?"start":"end";if(i==="top"){var D={x:f+l/2,y:o-w,textAnchor:"middle",verticalAnchor:k};return ha(ha({},D),a?{height:Math.max(o-a.y,0),width:l}:{})}if(i==="bottom"){var L={x:p+c/2,y:o+d+w,textAnchor:"middle",verticalAnchor:E};return ha(ha({},L),a?{height:Math.max(a.y+a.height-(o+d),0),width:c}:{})}if(i==="left"){var B={x:m-P,y:o+d/2,textAnchor:R,verticalAnchor:"middle"};return ha(ha({},B),a?{width:Math.max(B.x-a.x,0),height:d}:{})}if(i==="right"){var z={x:m+x+P,y:o+d/2,textAnchor:O,verticalAnchor:"middle"};return ha(ha({},z),a?{width:Math.max(a.x+a.width-z.x,0),height:d}:{})}var H=a?{width:x,height:d}:{};return i==="insideLeft"?ha({x:m+P,y:o+d/2,textAnchor:O,verticalAnchor:"middle"},H):i==="insideRight"?ha({x:m+x-P,y:o+d/2,textAnchor:R,verticalAnchor:"middle"},H):i==="insideTop"?ha({x:f+l/2,y:o+w,textAnchor:"middle",verticalAnchor:E},H):i==="insideBottom"?ha({x:p+c/2,y:o+d-w,textAnchor:"middle",verticalAnchor:k},H):i==="insideTopLeft"?ha({x:f+P,y:o+w,textAnchor:O,verticalAnchor:E},H):i==="insideTopRight"?ha({x:f+l-P,y:o+w,textAnchor:R,verticalAnchor:E},H):i==="insideBottomLeft"?ha({x:p+P,y:o+d-w,textAnchor:O,verticalAnchor:k},H):i==="insideBottomRight"?ha({x:p+c-P,y:o+d-w,textAnchor:R,verticalAnchor:k},H):i&&typeof i=="object"&&(ur(i.x)||Bh(i.x))&&(ur(i.y)||Bh(i.y))?ha({x:s+ud(i.x,x),y:o+ud(i.y,d),textAnchor:"end",verticalAnchor:"end"},H):ha({x:v,y:o+d/2,textAnchor:"middle",verticalAnchor:"middle"},H)},Fft={angle:0,offset:5,zIndex:$o.label,position:"middle",textBreakAll:!1};function Up(e){var t=vc(e,Fft),{viewBox:r,position:n,value:i,children:a,content:s,className:o="",textBreakAll:l,labelRef:c}=t,d=Oft(),f=Fge(),p=n==="center"?f:d??f,m,x,v;if(r==null?m=p:i5(r)?m=r:m=$pe(r),!m||ys(i)&&ys(a)&&!I.isValidElement(s)&&typeof s!="function")return null;var b=ha(ha({},t),{},{viewBox:m});if(I.isValidElement(s)){var{labelRef:w}=b,k=Cft(b,Eft);return I.cloneElement(s,k)}if(typeof s=="function"){if(x=I.createElement(s,b),I.isValidElement(x))return x}else x=Pft(t);var E=cu(t);if(i5(m)){if(n==="insideStart"||n==="insideEnd"||n==="end")return jft(t,n,x,E,m);v=Dft(m,t.offset,t.position)}else v=Mft(t,m);return I.createElement(ip,{zIndex:t.zIndex},I.createElement(QU,ah({ref:c,className:gi("recharts-label",o)},E,v,{textAnchor:vft(E.textAnchor)?E.textAnchor:v.textAnchor,breakAll:l}),x))}Up.displayName="Label";var Lft=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?I.createElement(Up,ah({key:"label-implicit"},n)):of(e)?I.createElement(Up,ah({key:"label-implicit",value:e},n)):I.isValidElement(e)?e.type===Up?I.cloneElement(e,ha({key:"label-implicit"},n)):I.createElement(Up,ah({key:"label-implicit",content:e},n)):JU(e)?I.createElement(Up,ah({key:"label-implicit",content:e},n)):e&&typeof e=="object"?I.createElement(Up,ah({},e,{key:"label-implicit"},n)):null};function Bft(e){var{label:t,labelRef:r}=e,n=Fge();return Lft(t,n,r)||null}var Lge={},Bge={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(Bge);var Uge={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(Uge);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bge,r=Uge,n=O3;function i(a){if(n.isArrayLike(a))return t.last(r.toArray(a))}e.last=i})(Lge);var Uft=Lge.last;const $ft=Bs(Uft);var zft=["valueAccessor"],Hft=["dataKey","clockWise","id","textBreakAll","zIndex"];function GI(){return GI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},GI.apply(null,arguments)}function aZ(e,t){if(e==null)return{};var r,n,i=Wft(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Wft(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Vft=e=>Array.isArray(e.value)?$ft(e.value):e.value,$ge=I.createContext(void 0),qft=$ge.Provider,zge=I.createContext(void 0);zge.Provider;function Gft(){return I.useContext($ge)}function Kft(){return I.useContext(zge)}function rA(e){var{valueAccessor:t=Vft}=e,r=aZ(e,zft),{dataKey:n,clockWise:i,id:a,textBreakAll:s,zIndex:o}=r,l=aZ(r,Hft),c=Gft(),d=Kft(),f=c||d;return!f||!f.length?null:I.createElement(ip,{zIndex:o??$o.label},I.createElement(Lh,{className:"recharts-label-list"},f.map((p,m)=>{var x,v=ys(n)?t(p,m):fo(p&&p.payload,n),b=ys(a)?{}:{id:"".concat(a,"-").concat(m)};return I.createElement(Up,GI({key:"label-".concat(m)},cu(p),l,b,{fill:(x=r.fill)!==null&&x!==void 0?x:p.fill,parentViewBox:p.parentViewBox,value:v,textBreakAll:s,viewBox:p.viewBox,index:m,zIndex:0}))})))}rA.displayName="LabelList";function Xft(e){var{label:t}=e;return t?t===!0?I.createElement(rA,{key:"labelList-implicit"}):I.isValidElement(t)||JU(t)?I.createElement(rA,{key:"labelList-implicit",content:t}):typeof t=="object"?I.createElement(rA,GI({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var Yft={radiusAxis:{},angleAxis:{}},Hge=Pl({name:"polarAxis",initialState:Yft,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:WNt,removeRadiusAxis:VNt,addAngleAxis:qNt,removeAngleAxis:GNt}=Hge.actions,Qft=Hge.reducer,sZ=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",oZ=null,rM=null,Wge=e=>{if(e===oZ&&Array.isArray(rM))return rM;var t=[];return I.Children.forEach(e,r=>{ys(r)||(Uoe.isFragment(r)?t=t.concat(Wge(r.props.children)):t.push(r))}),rM=t,oZ=e,t};function Jft(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(i=>sZ(i)):n=[sZ(t)],Wge(e).forEach(i=>{var a=Cy(i,"type.displayName")||Cy(i,"type.name");a&&n.indexOf(a)!==-1&&r.push(i)}),r}var Vge={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var i;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const a=r[Symbol.toStringTag];return a==null||!((i=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&i.writable)?!1:r.toString()===`[object ${a}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(Vge);var Zft=Vge.isPlainObject;const eht=Bs(Zft);function lZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function cZ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lZ(Object(r),!0).forEach(function(n){tht(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tht(e,t,r){return(t=rht(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rht(e){var t=nht(e,"string");return typeof t=="symbol"?t:t+""}function nht(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KI(){return KI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},KI.apply(null,arguments)}var uZ=(e,t,r,n,i)=>{var a=r-n,s;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+r,",").concat(t),s+="L ".concat(e+r-a/2,",").concat(t+i),s+="L ".concat(e+r-a/2-n,",").concat(t+i),s+="L ".concat(e,",").concat(t," Z"),s},iht={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},aht=e=>{var t=vc(e,iht),{x:r,y:n,upperWidth:i,lowerWidth:a,height:s,className:o}=t,{animationEasing:l,animationDuration:c,animationBegin:d,isUpdateAnimationActive:f}=t,p=I.useRef(null),[m,x]=I.useState(-1),v=I.useRef(i),b=I.useRef(a),w=I.useRef(s),k=I.useRef(r),E=I.useRef(n),N=YB(e,"trapezoid-");if(I.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var Y=p.current.getTotalLength();Y&&x(Y)}catch{}},[]),r!==+r||n!==+n||i!==+i||a!==+a||s!==+s||i===0&&a===0||s===0)return null;var P=gi("recharts-trapezoid",o);if(!f)return I.createElement("g",null,I.createElement("path",KI({},cu(t),{className:P,d:uZ(r,n,i,a,s)})));var R=v.current,O=b.current,D=w.current,L=k.current,B=E.current,z="0px ".concat(m===-1?1:m,"px"),H="".concat(m,"px 0px"),te=e0e(["strokeDasharray"],c,l);return I.createElement(XB,{animationId:N,key:N,canBegin:m>0,duration:c,easing:l,isActive:f,begin:d},Y=>{var W=Is(R,i,Y),Z=Is(O,a,Y),re=Is(D,s,Y),X=Is(L,r,Y),Q=Is(B,n,Y);p.current&&(v.current=W,b.current=Z,w.current=re,k.current=X,E.current=Q);var fe=Y>0?{transition:te,strokeDasharray:H}:{strokeDasharray:z};return I.createElement("path",KI({},cu(t),{className:P,d:uZ(X,Q,W,Z,re),ref:p,style:cZ(cZ({},fe),t.style)}))})},sht=["option","shapeType","propTransformer","activeClassName"];function oht(e,t){if(e==null)return{};var r,n,i=lht(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function lht(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function dZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function XI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dZ(Object(r),!0).forEach(function(n){cht(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cht(e,t,r){return(t=uht(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uht(e){var t=dht(e,"string");return typeof t=="symbol"?t:t+""}function dht(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fht(e,t){return XI(XI({},t),e)}function hht(e,t){return e==="symbols"}function fZ(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return I.createElement(i0e,r);case"trapezoid":return I.createElement(aht,r);case"sector":return I.createElement(o0e,r);case"symbols":if(hht(t))return I.createElement(The,r);break;case"curve":return I.createElement(Zpe,r);default:return null}}function pht(e){return I.isValidElement(e)?e.props:e}function mht(e){var{option:t,shapeType:r,propTransformer:n=fht,activeClassName:i="recharts-active-shape"}=e,a=oht(e,sht),s;if(I.isValidElement(t))s=I.cloneElement(t,XI(XI({},a),pht(t)));else if(typeof t=="function")s=t(a);else if(eht(t)&&typeof t!="boolean"){var o=n(t,a);s=I.createElement(fZ,{shapeType:r,elementProps:o})}else{var l=a;s=I.createElement(fZ,{shapeType:r,elementProps:l})}return a.isActive?I.createElement(Lh,{className:i},s):s}var qge=(e,t)=>{var r=ya();return(n,i)=>a=>{e==null||e(n,i,a),r(nge({activeIndex:String(i),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},Gge=e=>{var t=ya();return(r,n)=>i=>{e==null||e(r,n,i),t(Gct())}},Kge=(e,t)=>{var r=ya();return(n,i)=>a=>{e==null||e(n,i,a),r(Kct({activeIndex:String(i),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function ght(e){var{tooltipEntrySettings:t}=e,r=ya(),n=Rl(),i=I.useRef(null);return I.useLayoutEffect(()=>{n||(i.current===null?r(Hct(t)):i.current!==t&&r(Wct({prev:i.current,next:t})),i.current=t)},[t,r,n]),I.useLayoutEffect(()=>()=>{i.current&&(r(Vct(i.current)),i.current=null)},[r]),null}function xht(e){var{legendPayload:t}=e,r=ya(),n=Rl(),i=I.useRef(null);return I.useLayoutEffect(()=>{n||(i.current===null?r(Ait(t)):i.current!==t&&r(Tit({prev:i.current,next:t})),i.current=t)},[r,n,t]),I.useLayoutEffect(()=>()=>{i.current&&(r(Iit(i.current)),i.current=null)},[r]),null}var nM,vht=()=>{var[e]=I.useState(()=>OS("uid-"));return e},yht=(nM=Hv.useId)!==null&&nM!==void 0?nM:vht;function Xge(e,t){var r=yht();return t||(e?"".concat(e,"-").concat(r):r)}var bht=I.createContext(void 0),wht=e=>{var{id:t,type:r,children:n}=e,i=Xge("recharts-".concat(r),t);return I.createElement(bht.Provider,{value:i},n(i))},Sht={cartesianItems:[],polarItems:[]},Yge=Pl({name:"graphicalItems",initialState:Sht,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Oi()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,i=Zu(e).cartesianItems.indexOf(r);i>-1&&(e.cartesianItems[i]=n)},prepare:Oi()},removeCartesianGraphicalItem:{reducer(e,t){var r=Zu(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Oi()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Oi()},removePolarGraphicalItem:{reducer(e,t){var r=Zu(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Oi()}}}),{addCartesianGraphicalItem:Eht,replaceCartesianGraphicalItem:Cht,removeCartesianGraphicalItem:kht,addPolarGraphicalItem:KNt,removePolarGraphicalItem:XNt}=Yge.actions,_ht=Yge.reducer,Nht=e=>{var t=ya(),r=I.useRef(null);return I.useLayoutEffect(()=>{r.current===null?t(Eht(e)):r.current!==e&&t(Cht({prev:r.current,next:e})),r.current=e},[t,e]),I.useLayoutEffect(()=>()=>{r.current&&(t(kht(r.current)),r.current=null)},[t]),null},Aht=I.memo(Nht);function hZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function pZ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hZ(Object(r),!0).forEach(function(n){Tht(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tht(e,t,r){return(t=Iht(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Iht(e){var t=Oht(e,"string");return typeof t=="symbol"?t:t+""}function Oht(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pht={xAxis:{},yAxis:{},zAxis:{}},Qge=Pl({name:"cartesianAxis",initialState:Pht,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Oi()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Oi()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Oi()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Oi()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Oi()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Oi()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Oi()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Oi()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Oi()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,i=e.yAxis[r];if(i){var a=i.widthHistory||[];if(a.length===3&&a[0]===a[2]&&n===a[1]&&n!==i.width&&Math.abs(n-a[0])<=1)return;var s=[...a,n].slice(-3);e.yAxis[r]=pZ(pZ({},e.yAxis[r]),{},{width:n,widthHistory:s})}}}}),{addXAxis:Rht,replaceXAxis:jht,removeXAxis:Dht,addYAxis:Mht,replaceYAxis:Fht,removeYAxis:Lht,addZAxis:YNt,replaceZAxis:QNt,removeZAxis:JNt,updateYAxisWidth:Bht}=Qge.actions,Uht=Qge.reducer,$ht=st([ws],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),zht=st([$ht,Jh,Zh],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Jge=()=>br(zht),Hht="Invariant failed";function Wht(e,t){throw new Error(Hht)}var Vht=["x","y"];function a5(){return a5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a5.apply(null,arguments)}function mZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Rw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mZ(Object(r),!0).forEach(function(n){qht(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qht(e,t,r){return(t=Ght(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ght(e){var t=Kht(e,"string");return typeof t=="symbol"?t:t+""}function Kht(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xht(e,t){if(e==null)return{};var r,n,i=Yht(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Yht(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Qht(e,t){var{x:r,y:n}=e,i=Xht(e,Vht),a="".concat(r),s=parseInt(a,10),o="".concat(n),l=parseInt(o,10),c="".concat(t.height||i.height),d=parseInt(c,10),f="".concat(t.width||i.width),p=parseInt(f,10);return Rw(Rw(Rw(Rw(Rw({},t),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:d,width:p,name:t.name,radius:t.radius})}function YI(e){return I.createElement(mht,a5({shapeType:"rectangle",propTransformer:Qht,activeClassName:"recharts-active-bar"},e))}var Jht=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,i)=>{if(ur(t))return t;var a=ur(n)||ys(n);return a?t(n,i):(a||Wht(),r)}},Zht={},Zge=Pl({name:"errorBars",initialState:Zht,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:i}=t.payload;e[r]&&(e[r]=e[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?i:a))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:ZNt,replaceErrorBar:eAt,removeErrorBar:tAt}=Zge.actions,ept=Zge.reducer,tpt=["children"];function rpt(e,t){if(e==null)return{};var r,n,i=npt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function npt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ipt={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},apt=I.createContext(ipt);function spt(e){var{children:t}=e,r=rpt(e,tpt);return I.createElement(apt.Provider,{value:r},t)}function exe(e,t){var r,n,i=br(c=>tp(c,e)),a=br(c=>rp(c,t)),s=(r=i==null?void 0:i.allowDataOverflow)!==null&&r!==void 0?r:rs.allowDataOverflow,o=(n=a==null?void 0:a.allowDataOverflow)!==null&&n!==void 0?n:ns.allowDataOverflow,l=s||o;return{needClip:l,needClipX:s,needClipY:o}}function opt(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,i=Jge(),{needClipX:a,needClipY:s,needClip:o}=exe(t,r);if(!o||!i)return null;var{x:l,y:c,width:d,height:f}=i;return I.createElement("clipPath",{id:"clipPath-".concat(n)},I.createElement("rect",{x:a?l:l-d/2,y:s?c:c-f/2,width:a?d:d*2,height:s?f:f*2}))}function lpt(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&xa(e.zIndex)?e.zIndex:t}var cpt={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RC=I;function upt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var dpt=typeof Object.is=="function"?Object.is:upt,fpt=RC.useSyncExternalStore,hpt=RC.useRef,ppt=RC.useEffect,mpt=RC.useMemo,gpt=RC.useDebugValue;cpt.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var a=hpt(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=mpt(function(){function l(m){if(!c){if(c=!0,d=m,m=n(m),i!==void 0&&s.hasValue){var x=s.value;if(i(x,m))return f=x}return f=m}if(x=f,dpt(d,m))return x;var v=n(m);return i!==void 0&&i(x,v)?(d=m,x):(d=m,f=v)}var c=!1,d,f,p=r===void 0?null:r;return[function(){return l(t())},p===null?void 0:function(){return l(p())}]},[t,r,n,i]);var o=fpt(e,a[0],a[1]);return ppt(function(){s.hasValue=!0,s.value=o},[o]),gpt(o),o};function xpt(e){e()}function vpt(){let e=null,t=null;return{clear(){e=null,t=null},notify(){xpt(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var gZ={notify(){},get:()=>[]};function ypt(e,t){let r,n=gZ,i=0,a=!1;function s(v){d();const b=n.subscribe(v);let w=!1;return()=>{w||(w=!0,b(),f())}}function o(){n.notify()}function l(){x.onStateChange&&x.onStateChange()}function c(){return a}function d(){i++,r||(r=e.subscribe(l),n=vpt())}function f(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=gZ)}function p(){a||(a=!0,d())}function m(){a&&(a=!1,f())}const x={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:c,trySubscribe:p,tryUnsubscribe:m,getListeners:()=>n};return x}var bpt=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wpt=bpt(),Spt=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Ept=Spt(),Cpt=()=>wpt||Ept?I.useLayoutEffect:I.useEffect,kpt=Cpt();function xZ(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function _pt(e,t){if(xZ(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i])||!xZ(e[r[i]],t[r[i]]))return!1;return!0}var iM=Symbol.for("react-redux-context"),aM=typeof globalThis<"u"?globalThis:{};function Npt(){if(!I.createContext)return{};const e=aM[iM]??(aM[iM]=new Map);let t=e.get(I.createContext);return t||(t=I.createContext(null),e.set(I.createContext,t)),t}var Apt=Npt();function Tpt(e){const{children:t,context:r,serverState:n,store:i}=e,a=I.useMemo(()=>{const l=ypt(i);return{store:i,subscription:l,getServerState:n?()=>n:void 0}},[i,n]),s=I.useMemo(()=>i.getState(),[i]);kpt(()=>{const{subscription:l}=a;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),s!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[a,s]);const o=r||Apt;return I.createElement(o.Provider,{value:a},t)}var Ipt=Tpt,Opt=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function Ppt(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function ZU(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(Opt.has(n)){if(e[n]==null&&t[n]==null)continue;if(!_pt(e[n],t[n]))return!1}else if(!Ppt(e[n],t[n]))return!1;return!0}var Rpt=["onMouseEnter","onMouseLeave","onClick"],jpt=["value","background","tooltipPosition"],Dpt=["id"],Mpt=["onMouseEnter","onClick","onMouseLeave"];function Vh(){return Vh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vh.apply(null,arguments)}function vZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Fo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vZ(Object(r),!0).forEach(function(n){Fpt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fpt(e,t,r){return(t=Lpt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lpt(e){var t=Bpt(e,"string");return typeof t=="symbol"?t:t+""}function Bpt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QI(e,t){if(e==null)return{};var r,n,i=Upt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Upt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var $pt=e=>{var{dataKey:t,name:r,fill:n,legendType:i,hide:a}=e;return[{inactive:a,dataKey:t,type:i,color:n,value:Rpe(r,t),payload:e}]},zpt=I.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:i,name:a,hide:s,unit:o,tooltipType:l}=e,c={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:Rpe(a,t),hide:s,type:l,color:i,unit:o}};return I.createElement(ght,{tooltipEntrySettings:c})});function Hpt(e){var t=br(Ry),{data:r,dataKey:n,background:i,allOtherBarProps:a}=e,{onMouseEnter:s,onMouseLeave:o,onClick:l}=a,c=QI(a,Rpt),d=qge(s,n),f=Gge(o),p=Kge(l,n);if(!i||r==null)return null;var m=yB(i);return I.createElement(ip,{zIndex:lpt(i,$o.barBackground)},r.map((x,v)=>{var{value:b,background:w,tooltipPosition:k}=x,E=QI(x,jpt);if(!w)return null;var N=d(x,v),P=f(x,v),R=p(x,v),O=Fo(Fo(Fo(Fo(Fo({option:i,isActive:String(v)===t},E),{},{fill:"#eee"},w),m),CB(c,x,v)),{},{onMouseEnter:N,onMouseLeave:P,onClick:R,dataKey:n,index:v,className:"recharts-bar-background-rectangle"});return I.createElement(YI,Vh({key:"background-bar-".concat(v)},O))}))}function Wpt(e){var{showLabels:t,children:r,rects:n}=e,i=n==null?void 0:n.map(a=>{var s={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return Fo(Fo({},s),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:s,fill:a.fill})});return I.createElement(qft,{value:t?i:void 0},r)}function Vpt(e){var{shape:t,activeBar:r,baseProps:n,entry:i,index:a,dataKey:s}=e,o=br(Ry),l=br(xge),c=r&&String(a)===o&&(l==null||s===l),d=c?r:t;return c?I.createElement(ip,{zIndex:$o.activeBar},I.createElement(YI,Vh({},n,{name:String(n.name)},i,{isActive:c,option:d,index:a,dataKey:s}))):I.createElement(YI,Vh({},n,{name:String(n.name)},i,{isActive:c,option:d,index:a,dataKey:s}))}function qpt(e){var{shape:t,baseProps:r,entry:n,index:i,dataKey:a}=e;return I.createElement(YI,Vh({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:i,dataKey:a}))}function Gpt(e){var t,{data:r,props:n}=e,i=(t=Fh(n))!==null&&t!==void 0?t:{},{id:a}=i,s=QI(i,Dpt),{shape:o,dataKey:l,activeBar:c}=n,{onMouseEnter:d,onClick:f,onMouseLeave:p}=n,m=QI(n,Mpt),x=qge(d,l),v=Gge(p),b=Kge(f,l);return r?I.createElement(I.Fragment,null,r.map((w,k)=>I.createElement(Lh,Vh({key:"rectangle-".concat(w==null?void 0:w.x,"-").concat(w==null?void 0:w.y,"-").concat(w==null?void 0:w.value,"-").concat(k),className:"recharts-bar-rectangle"},CB(m,w,k),{onMouseEnter:x(w,k),onMouseLeave:v(w,k),onClick:b(w,k)}),c?I.createElement(Vpt,{shape:o,activeBar:c,baseProps:s,entry:w,index:k,dataKey:l}):I.createElement(qpt,{shape:o,baseProps:s,entry:w,index:k,dataKey:l})))):null}function Kpt(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:l,onAnimationEnd:c,onAnimationStart:d}=t,f=r.current,p=YB(t,"recharts-bar-"),[m,x]=I.useState(!1),v=!m,b=I.useCallback(()=>{typeof c=="function"&&c(),x(!1)},[c]),w=I.useCallback(()=>{typeof d=="function"&&d(),x(!0)},[d]);return I.createElement(Wpt,{showLabels:v,rects:n},I.createElement(XB,{animationId:p,begin:s,duration:o,isActive:a,easing:l,onAnimationEnd:b,onAnimationStart:w,key:p},k=>{var E=k===1?n:n==null?void 0:n.map((N,P)=>{var R=f&&f[P];if(R)return Fo(Fo({},N),{},{x:Is(R.x,N.x,k),y:Is(R.y,N.y,k),width:Is(R.width,N.width,k),height:Is(R.height,N.height,k)});if(i==="horizontal"){var O=Is(0,N.height,k),D=Is(N.stackedBarStart,N.y,k);return Fo(Fo({},N),{},{y:D,height:O})}var L=Is(0,N.width,k),B=Is(N.stackedBarStart,N.x,k);return Fo(Fo({},N),{},{width:L,x:B})});return k>0&&(r.current=E??null),E==null?null:I.createElement(Lh,null,I.createElement(Gpt,{props:t,data:E}))}),I.createElement(Xft,{label:t.label}),t.children)}function Xpt(e){var t=I.useRef(null);return I.createElement(Kpt,{previousRectanglesRef:t,props:e})}var txe=0,Ypt=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:fo(e,t)}};class Qpt extends I.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:i,xAxisId:a,yAxisId:s,needClip:o,background:l,id:c}=this.props;if(t||r==null)return null;var d=gi("recharts-bar",i),f=c;return I.createElement(Lh,{className:d,id:c},o&&I.createElement("defs",null,I.createElement(opt,{clipPathId:f,xAxisId:a,yAxisId:s})),I.createElement(Lh,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},I.createElement(Hpt,{data:r,dataKey:n,background:l,allOtherBarProps:this.props}),I.createElement(Xpt,this.props)))}}var Jpt={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:txe,xAxisId:0,yAxisId:0,zIndex:$o.bar};function Zpt(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:l,animationEasing:c,isAnimationActive:d}=e,{needClip:f}=exe(t,r),p=q3(),m=Rl(),x=Jft(e.children,YU),v=br(k=>N0t(k,t,r,m,e.id,x));if(p!=="vertical"&&p!=="horizontal")return null;var b,w=v==null?void 0:v[0];return w==null||w.height==null||w.width==null?b=0:b=p==="vertical"?w.height/2:w.width/2,I.createElement(spt,{xAxisId:t,yAxisId:r,data:v,dataPointFormatter:Ypt,errorBarOffset:b},I.createElement(Qpt,Vh({},e,{layout:p,needClip:f,data:v,xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:l,animationEasing:c,isAnimationActive:d})))}function e0t(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:i,bandSize:a,xAxis:s,yAxis:o,xAxisTicks:l,yAxisTicks:c,stackedData:d,displayedData:f,offset:p,cells:m,parentViewBox:x,dataStartIndex:v}=e,b=t==="horizontal"?o:s,w=d?b.scale.domain():null,k=Dnt({numericAxis:b}),E=b.scale(k);return f.map((N,P)=>{var R,O,D,L,B,z;d?R=Tnt(d[P+v],w):(R=fo(N,r),Array.isArray(R)||(R=[k,R]));var H=Jht(n,txe)(R[1],P);if(t==="horizontal"){var te,[Y,W]=[o.scale(R[0]),o.scale(R[1])];O=lQ({axis:s,ticks:l,bandSize:a,offset:i.offset,entry:N,index:P}),D=(te=W??Y)!==null&&te!==void 0?te:void 0,L=i.size;var Z=Y-W;if(B=cd(Z)?0:Z,z={x:O,y:p.top,width:L,height:p.height},Math.abs(H)>0&&Math.abs(B)<Math.abs(H)){var re=hl(B||H)*(Math.abs(H)-Math.abs(B));D-=re,B+=re}}else{var[X,Q]=[s.scale(R[0]),s.scale(R[1])];if(O=X,D=lQ({axis:o,ticks:c,bandSize:a,offset:i.offset,entry:N,index:P}),L=Q-X,B=i.size,z={x:p.left,y:D,width:p.width,height:B},Math.abs(H)>0&&Math.abs(L)<Math.abs(H)){var fe=hl(L||H)*(Math.abs(H)-Math.abs(L));L+=fe}}if(O==null||D==null||L==null||B==null)return null;var ye=Fo(Fo({},N),{},{stackedBarStart:E,x:O,y:D,width:L,height:B,value:d?R:R[1],payload:N,background:z,tooltipPosition:{x:O+L/2,y:D+B/2},parentViewBox:x},m&&m[P]&&m[P].props);return ye}).filter(Boolean)}function t0t(e){var t=vc(e,Jpt),r=Rl();return I.createElement(wht,{id:t.id,type:"bar"},n=>I.createElement(I.Fragment,null,I.createElement(xht,{legendPayload:$pt(t)}),I.createElement(zpt,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),I.createElement(Aht,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:jnt(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),I.createElement(ip,{zIndex:t.zIndex},I.createElement(Zpt,Vh({},t,{id:n})))))}var rxe=I.memo(t0t,ZU);rxe.displayName="Bar";function yZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function aN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yZ(Object(r),!0).forEach(function(n){r0t(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function r0t(e,t,r){return(t=n0t(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n0t(e){var t=i0t(e,"string");return typeof t=="symbol"?t:t+""}function i0t(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var a0t=(e,t)=>t,s0t=(e,t,r)=>r,o0t=(e,t,r,n)=>n,l0t=(e,t,r,n,i)=>i,jC=st([OU,l0t],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),c0t=st([jC],e=>e==null?void 0:e.maxBarSize),u0t=(e,t,r,n,i,a)=>a,bZ=(e,t,r)=>{var n=r??e;if(!ys(n))return ud(n,t,0)},d0t=st([ii,OU,a0t,s0t,o0t],(e,t,r,n,i)=>t.filter(a=>e==="horizontal"?a.xAxisId===r:a.yAxisId===n).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),f0t=(e,t,r,n)=>{var i=ii(e);return i==="horizontal"?JF(e,"yAxis",r,n):JF(e,"xAxis",t,n)},h0t=(e,t,r)=>{var n=ii(e);return n==="horizontal"?OJ(e,"xAxis",t):OJ(e,"yAxis",r)},p0t=(e,t,r)=>{var n={},i=e.filter(oP),a=e.filter(c=>c.stackId==null),s=i.reduce((c,d)=>(c[d.stackId]||(c[d.stackId]=[]),c[d.stackId].push(d),c),n),o=Object.entries(s).map(c=>{var[d,f]=c,p=f.map(x=>x.dataKey),m=bZ(t,r,f[0].barSize);return{stackId:d,dataKeys:p,barSize:m}}),l=a.map(c=>{var d=[c.dataKey].filter(p=>p!=null),f=bZ(t,r,c.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...o,...l]},m0t=st([d0t,Mlt,h0t],p0t),g0t=(e,t,r,n,i)=>{var a,s,o=jC(e,t,r,n,i);if(o!=null){var l=ii(e),c=sme(e),{maxBarSize:d}=o,f=ys(d)?c:d,p,m;return l==="horizontal"?(p=Py(e,"xAxis",t,n),m=Oy(e,"xAxis",t,n)):(p=Py(e,"yAxis",r,n),m=Oy(e,"yAxis",r,n)),(a=(s=CI(p,m,!0))!==null&&s!==void 0?s:f)!==null&&a!==void 0?a:0}},nxe=(e,t,r,n)=>{var i=ii(e),a,s;return i==="horizontal"?(a=Py(e,"xAxis",t,n),s=Oy(e,"xAxis",t,n)):(a=Py(e,"yAxis",r,n),s=Oy(e,"yAxis",r,n)),CI(a,s)};function x0t(e,t,r,n,i){var a=n.length;if(!(a<1)){var s=ud(e,r,0,!0),o,l=[];if(xa(n[0].barSize)){var c=!1,d=r/a,f=n.reduce((w,k)=>w+(k.barSize||0),0);f+=(a-1)*s,f>=r&&(f-=(a-1)*s,s=0),f>=r&&d>0&&(c=!0,d*=.9,f=a*d);var p=(r-f)/2>>0,m={offset:p-s,size:0};o=n.reduce((w,k)=>{var E,N={stackId:k.stackId,dataKeys:k.dataKeys,position:{offset:m.offset+m.size+s,size:c?d:(E=k.barSize)!==null&&E!==void 0?E:0}},P=[...w,N];return m=P[P.length-1].position,P},l)}else{var x=ud(t,r,0,!0);r-2*x-(a-1)*s<=0&&(s=0);var v=(r-2*x-(a-1)*s)/a;v>1&&(v>>=0);var b=xa(i)?Math.min(v,i):v;o=n.reduce((w,k,E)=>[...w,{stackId:k.stackId,dataKeys:k.dataKeys,position:{offset:x+(v+s)*E+(v-b)/2,size:b}}],l)}return o}}var v0t=(e,t,r,n,i,a,s)=>{var o=ys(s)?t:s,l=x0t(r,n,i!==a?i:a,e,o);return i!==a&&l!=null&&(l=l.map(c=>aN(aN({},c),{},{position:aN(aN({},c.position),{},{offset:c.position.offset-i/2})}))),l},y0t=st([m0t,sme,Dlt,ome,g0t,nxe,c0t],v0t),b0t=(e,t,r,n)=>Py(e,"xAxis",t,n),w0t=(e,t,r,n)=>Py(e,"yAxis",r,n),S0t=(e,t,r,n)=>Oy(e,"xAxis",t,n),E0t=(e,t,r,n)=>Oy(e,"yAxis",r,n),C0t=st([y0t,jC],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),k0t=(e,t)=>{var r=TU(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var i=e[n];if(i){var{stackedData:a}=i;if(a)return a.find(s=>s.key===r)}}}},_0t=st([f0t,jC],k0t),N0t=st([ws,VB,b0t,w0t,S0t,E0t,C0t,ii,bU,nxe,_0t,jC,u0t],(e,t,r,n,i,a,s,o,l,c,d,f,p)=>{var{chartData:m,dataStartIndex:x,dataEndIndex:v}=l;if(!(f==null||s==null||t==null||o!=="horizontal"&&o!=="vertical"||r==null||n==null||i==null||a==null||c==null)){var{data:b}=f,w;if(b!=null&&b.length>0?w=b:w=m==null?void 0:m.slice(x,v+1),w!=null)return e0t({layout:o,barSettings:f,pos:s,parentViewBox:t,bandSize:c,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,stackedData:d,displayedData:w,offset:e,cells:p,dataStartIndex:x})}}),A0t=e=>{var{chartData:t}=e,r=ya(),n=Rl();return I.useEffect(()=>n?()=>{}:(r(HJ(t)),()=>{r(HJ(void 0))}),[t,r,n]),null},wZ={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},ixe=Pl({name:"brush",initialState:wZ,reducers:{setBrushSettings(e,t){return t.payload==null?wZ:t.payload}}}),{setBrushSettings:rAt}=ixe.actions,T0t=ixe.reducer;function I0t(e,t,r){return(t=O0t(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O0t(e){var t=P0t(e,"string");return typeof t=="symbol"?t:t+""}function P0t(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class e${static create(t){return new e$(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(r){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],i=r[r.length-1];return n<=i?t>=n&&t<=i:t>=i&&t<=n}}I0t(e$,"EPS",1e-4);function R0t(e){return(e%180+180)%180}var j0t=function(t){var{width:r,height:n}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=R0t(i),s=a*Math.PI/180,o=Math.atan(n/r),l=s>o&&s<Math.PI-o?n/Math.sin(s):r/Math.cos(s);return Math.abs(l)},D0t={dots:[],areas:[],lines:[]},axe=Pl({name:"referenceElements",initialState:D0t,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Zu(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Zu(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Zu(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:nAt,removeDot:iAt,addArea:aAt,removeArea:sAt,addLine:oAt,removeLine:lAt}=axe.actions,M0t=axe.reducer,F0t=I.createContext(void 0),L0t=e=>{var{children:t}=e,[r]=I.useState("".concat(OS("recharts"),"-clip")),n=Jge();if(n==null)return null;var{x:i,y:a,width:s,height:o}=n;return I.createElement(F0t.Provider,{value:r},I.createElement("defs",null,I.createElement("clipPath",{id:r},I.createElement("rect",{x:i,y:a,height:o,width:s}))),t)};function sxe(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function B0t(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return j0t(n,r)}function U0t(e,t,r){var n=r==="width",{x:i,y:a,width:s,height:o}=e;return t===1?{start:n?i:a,end:n?i+s:a+o}:{start:n?i+s:a+o,end:n?i:a}}function JI(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-i)<=0}function $0t(e,t){return sxe(e,t+1)}function z0t(e,t,r,n,i){for(var a=(n||[]).slice(),{start:s,end:o}=t,l=0,c=1,d=s,f=function(){var x=n==null?void 0:n[l];if(x===void 0)return{v:sxe(n,c)};var v=l,b,w=()=>(b===void 0&&(b=r(x,v)),b),k=x.coordinate,E=l===0||JI(e,k,w,d,o);E||(l=0,d=s,c+=1),E&&(d=k+e*(w()/2+i),l+=c)},p;c<=a.length;)if(p=f(),p)return p.v;return[]}function SZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function eo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SZ(Object(r),!0).forEach(function(n){H0t(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function H0t(e,t,r){return(t=W0t(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W0t(e){var t=V0t(e,"string");return typeof t=="symbol"?t:t+""}function V0t(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q0t(e,t,r,n,i){for(var a=(n||[]).slice(),s=a.length,{start:o}=t,{end:l}=t,c=function(p){var m=a[p],x,v=()=>(x===void 0&&(x=r(m,p)),x);if(p===s-1){var b=e*(m.coordinate+e*v()/2-l);a[p]=m=eo(eo({},m),{},{tickCoord:b>0?m.coordinate-b*e:m.coordinate})}else a[p]=m=eo(eo({},m),{},{tickCoord:m.coordinate});if(m.tickCoord!=null){var w=JI(e,m.tickCoord,v,o,l);w&&(l=m.tickCoord-e*(v()/2+i),a[p]=eo(eo({},m),{},{isShow:!0}))}},d=s-1;d>=0;d--)c(d);return a}function G0t(e,t,r,n,i,a){var s=(n||[]).slice(),o=s.length,{start:l,end:c}=t;if(a){var d=n[o-1],f=r(d,o-1),p=e*(d.coordinate+e*f/2-c);if(s[o-1]=d=eo(eo({},d),{},{tickCoord:p>0?d.coordinate-p*e:d.coordinate}),d.tickCoord!=null){var m=JI(e,d.tickCoord,()=>f,l,c);m&&(c=d.tickCoord-e*(f/2+i),s[o-1]=eo(eo({},d),{},{isShow:!0}))}}for(var x=a?o-1:o,v=function(k){var E=s[k],N,P=()=>(N===void 0&&(N=r(E,k)),N);if(k===0){var R=e*(E.coordinate-e*P()/2-l);s[k]=E=eo(eo({},E),{},{tickCoord:R<0?E.coordinate-R*e:E.coordinate})}else s[k]=E=eo(eo({},E),{},{tickCoord:E.coordinate});if(E.tickCoord!=null){var O=JI(e,E.tickCoord,P,l,c);O&&(l=E.tickCoord+e*(P()/2+i),s[k]=eo(eo({},E),{},{isShow:!0}))}},b=0;b<x;b++)v(b);return s}function t$(e,t,r){var{tick:n,ticks:i,viewBox:a,minTickGap:s,orientation:o,interval:l,tickFormatter:c,unit:d,angle:f}=e;if(!i||!i.length||!n)return[];if(ur(l)||hb.isSsr){var p;return(p=$0t(i,ur(l)?l:0))!==null&&p!==void 0?p:[]}var m=[],x=o==="top"||o==="bottom"?"width":"height",v=d&&x==="width"?P2(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=(E,N)=>{var P=typeof c=="function"?c(E.value,N):E.value;return x==="width"?B0t(P2(P,{fontSize:t,letterSpacing:r}),v,f):P2(P,{fontSize:t,letterSpacing:r})[x]},w=i.length>=2?hl(i[1].coordinate-i[0].coordinate):1,k=U0t(a,w,x);return l==="equidistantPreserveStart"?z0t(w,k,b,i,s):(l==="preserveStart"||l==="preserveStartEnd"?m=G0t(w,k,b,i,s,l==="preserveStartEnd"):m=q0t(w,k,b,i,s),m.filter(E=>E.isShow))}var K0t=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:a=0}=e,s=0;if(t){Array.from(t).forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>s&&(s=f.width)}});var o=r?r.getBoundingClientRect().width:0,l=i+a,c=s+l+o+(r?n:0);return Math.round(c)}return 0},X0t=["axisLine","width","height","className","hide","ticks","axisType"];function Y0t(e,t){if(e==null)return{};var r,n,i=Q0t(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Q0t(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function dx(){return dx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dx.apply(null,arguments)}function EZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Na(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EZ(Object(r),!0).forEach(function(n){J0t(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function J0t(e,t,r){return(t=Z0t(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z0t(e){var t=emt(e,"string");return typeof t=="symbol"?t:t+""}function emt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Sh={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:$o.axis};function tmt(e){var{x:t,y:r,width:n,height:i,orientation:a,mirror:s,axisLine:o,otherSvgProps:l}=e;if(!o)return null;var c=Na(Na(Na({},l),Fh(o)),{},{fill:"none"});if(a==="top"||a==="bottom"){var d=+(a==="top"&&!s||a==="bottom"&&s);c=Na(Na({},c),{},{x1:t,y1:r+d*i,x2:t+n,y2:r+d*i})}else{var f=+(a==="left"&&!s||a==="right"&&s);c=Na(Na({},c),{},{x1:t+f*n,y1:r,x2:t+f*n,y2:r+i})}return I.createElement("line",dx({},c,{className:gi("recharts-cartesian-axis-line",Cy(o,"className"))}))}function rmt(e,t,r,n,i,a,s,o,l){var c,d,f,p,m,x,v=o?-1:1,b=e.tickSize||s,w=ur(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":c=d=e.coordinate,p=r+ +!o*i,f=p-v*b,x=f-v*l,m=w;break;case"left":f=p=e.coordinate,d=t+ +!o*n,c=d-v*b,m=c-v*l,x=w;break;case"right":f=p=e.coordinate,d=t+ +o*n,c=d+v*b,m=c+v*l,x=w;break;default:c=d=e.coordinate,p=r+ +o*i,f=p+v*b,x=f+v*l,m=w;break}return{line:{x1:c,y1:f,x2:d,y2:p},tick:{x:m,y:x}}}function nmt(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function imt(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function amt(e){var{option:t,tickProps:r,value:n}=e,i,a=gi(r.className,"recharts-cartesian-axis-tick-value");if(I.isValidElement(t))i=I.cloneElement(t,Na(Na({},r),{},{className:a}));else if(typeof t=="function")i=t(Na(Na({},r),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(s=gi(s,t==null?void 0:t.className)),i=I.createElement(QU,dx({},r,{className:s}),n)}return i}var smt=I.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:i,stroke:a,tickFormatter:s,unit:o,padding:l,tickTextProps:c,orientation:d,mirror:f,x:p,y:m,width:x,height:v,tickSize:b,tickMargin:w,fontSize:k,letterSpacing:E,getTicksConfig:N,events:P,axisType:R}=e,O=t$(Na(Na({},N),{},{ticks:r}),k,E),D=nmt(d,f),L=imt(d,f),B=Fh(N),z=yB(n),H={};typeof i=="object"&&(H=i);var te=Na(Na({},B),{},{fill:"none"},H),Y=O.map(re=>Na({entry:re},rmt(re,p,m,x,v,d,b,f,w))),W=Y.map(re=>{var{entry:X,line:Q}=re;return I.createElement(Lh,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(X.value,"-").concat(X.coordinate,"-").concat(X.tickCoord)},i&&I.createElement("line",dx({},te,Q,{className:gi("recharts-cartesian-axis-tick-line",Cy(i,"className"))})))}),Z=Y.map((re,X)=>{var{entry:Q,tick:fe}=re,ye=Na(Na(Na(Na({textAnchor:D,verticalAnchor:L},B),{},{stroke:"none",fill:a},z),fe),{},{index:X,payload:Q,visibleTicksCount:O.length,tickFormatter:s,padding:l},c);return I.createElement(Lh,dx({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Q.value,"-").concat(Q.coordinate,"-").concat(Q.tickCoord)},CB(P,Q,X)),n&&I.createElement(amt,{option:n,tickProps:ye,value:"".concat(typeof s=="function"?s(Q.value,X):Q.value).concat(o||"")}))});return I.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(R,"-ticks")},Z.length>0&&I.createElement(ip,{zIndex:$o.label},I.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(R,"-tick-labels"),ref:t},Z)),W.length>0&&I.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(R,"-tick-lines")},W))}),omt=I.forwardRef((e,t)=>{var{axisLine:r,width:n,height:i,className:a,hide:s,ticks:o,axisType:l}=e,c=Y0t(e,X0t),[d,f]=I.useState(""),[p,m]=I.useState(""),x=I.useRef(null);I.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var b;return K0t({ticks:x.current,label:(b=e.labelRef)===null||b===void 0?void 0:b.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var v=I.useCallback(b=>{if(b){var w=b.getElementsByClassName("recharts-cartesian-axis-tick-value");x.current=w;var k=w[0];if(k){var E=window.getComputedStyle(k),N=E.fontSize,P=E.letterSpacing;(N!==d||P!==p)&&(f(N),m(P))}}},[d,p]);return s||n!=null&&n<=0||i!=null&&i<=0?null:I.createElement(ip,{zIndex:e.zIndex},I.createElement(Lh,{className:gi("recharts-cartesian-axis",a)},I.createElement(tmt,{x:e.x,y:e.y,width:n,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Fh(e)}),I.createElement(smt,{ref:v,axisType:l,events:c,fontSize:d,getTicksConfig:e,height:e.height,letterSpacing:p,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:o,unit:e.unit,width:e.width,x:e.x,y:e.y}),I.createElement(Tft,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},I.createElement(Bft,{label:e.label,labelRef:e.labelRef}),e.children)))}),r$=I.forwardRef((e,t)=>{var r=vc(e,Sh);return I.createElement(omt,dx({},r,{ref:t}))});r$.displayName="CartesianAxis";var lmt=["x1","y1","x2","y2","key"],cmt=["offset"],umt=["xAxisId","yAxisId"],dmt=["xAxisId","yAxisId"];function CZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function so(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CZ(Object(r),!0).forEach(function(n){fmt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fmt(e,t,r){return(t=hmt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hmt(e){var t=pmt(e,"string");return typeof t=="symbol"?t:t+""}function pmt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function og(){return og=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},og.apply(null,arguments)}function ZI(e,t){if(e==null)return{};var r,n,i=mmt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function mmt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var gmt=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:i,width:a,height:s,ry:o}=e;return I.createElement("rect",{x:n,y:i,ry:o,width:a,height:s,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function oxe(e){var{option:t,lineItemProps:r}=e,n;if(I.isValidElement(t))n=I.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var i,{x1:a,y1:s,x2:o,y2:l,key:c}=r,d=ZI(r,lmt),f=(i=Fh(d))!==null&&i!==void 0?i:{},{offset:p}=f,m=ZI(f,cmt);n=I.createElement("line",og({},m,{x1:a,y1:s,x2:o,y2:l,fill:"none",key:c}))}return n}function xmt(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=e,o=ZI(e,umt),l=i.map((c,d)=>{var f=so(so({},o),{},{x1:t,y1:c,x2:t+r,y2:c,key:"line-".concat(d),index:d});return I.createElement(oxe,{key:"line-".concat(d),option:n,lineItemProps:f})});return I.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function vmt(e){var{y:t,height:r,vertical:n=!0,verticalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=e,o=ZI(e,dmt),l=i.map((c,d)=>{var f=so(so({},o),{},{x1:c,y1:t,x2:c,y2:t+r,key:"line-".concat(d),index:d});return I.createElement(oxe,{option:n,lineItemProps:f,key:"line-".concat(d)})});return I.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function ymt(e){var{horizontalFill:t,fillOpacity:r,x:n,y:i,width:a,height:s,horizontalPoints:o,horizontal:l=!0}=e;if(!l||!t||!t.length||o==null)return null;var c=o.map(f=>Math.round(f+i-i)).sort((f,p)=>f-p);i!==c[0]&&c.unshift(0);var d=c.map((f,p)=>{var m=!c[p+1],x=m?i+s-f:c[p+1]-f;if(x<=0)return null;var v=p%t.length;return I.createElement("rect",{key:"react-".concat(p),y:f,x:n,height:x,width:a,stroke:"none",fill:t[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return I.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function bmt(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:i,y:a,width:s,height:o,verticalPoints:l}=e;if(!t||!r||!r.length)return null;var c=l.map(f=>Math.round(f+i-i)).sort((f,p)=>f-p);i!==c[0]&&c.unshift(0);var d=c.map((f,p)=>{var m=!c[p+1],x=m?i+s-f:c[p+1]-f;if(x<=0)return null;var v=p%r.length;return I.createElement("rect",{key:"react-".concat(p),x:f,y:a,width:x,height:o,stroke:"none",fill:r[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return I.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var wmt=(e,t)=>{var{xAxis:r,width:n,height:i,offset:a}=e;return Ope(t$(so(so(so({},Sh),r),{},{ticks:Ppe(r),viewBox:{x:0,y:0,width:n,height:i}})),a.left,a.left+a.width,t)},Smt=(e,t)=>{var{yAxis:r,width:n,height:i,offset:a}=e;return Ope(t$(so(so(so({},Sh),r),{},{ticks:Ppe(r),viewBox:{x:0,y:0,width:n,height:i}})),a.top,a.top+a.height,t)},Emt={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:$o.grid};function lxe(e){var t=Hpe(),r=Wpe(),n=zpe(),i=so(so({},vc(e,Emt)),{},{x:ur(e.x)?e.x:n.left,y:ur(e.y)?e.y:n.top,width:ur(e.width)?e.width:n.width,height:ur(e.height)?e.height:n.height}),{xAxisId:a,yAxisId:s,x:o,y:l,width:c,height:d,syncWithTicks:f,horizontalValues:p,verticalValues:m}=i,x=Rl(),v=br(L=>PJ(L,"xAxis",a,x)),b=br(L=>PJ(L,"yAxis",s,x));if(!cf(c)||!cf(d)||!ur(o)||!ur(l))return null;var w=i.verticalCoordinatesGenerator||wmt,k=i.horizontalCoordinatesGenerator||Smt,{horizontalPoints:E,verticalPoints:N}=i;if((!E||!E.length)&&typeof k=="function"){var P=p&&p.length,R=k({yAxis:b?so(so({},b),{},{ticks:P?p:b.ticks}):void 0,width:t??c,height:r??d,offset:n},P?!0:f);kI(Array.isArray(R),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof R,"]")),Array.isArray(R)&&(E=R)}if((!N||!N.length)&&typeof w=="function"){var O=m&&m.length,D=w({xAxis:v?so(so({},v),{},{ticks:O?m:v.ticks}):void 0,width:t??c,height:r??d,offset:n},O?!0:f);kI(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(N=D)}return I.createElement(ip,{zIndex:i.zIndex},I.createElement("g",{className:"recharts-cartesian-grid"},I.createElement(gmt,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),I.createElement(ymt,og({},i,{horizontalPoints:E})),I.createElement(bmt,og({},i,{verticalPoints:N})),I.createElement(xmt,og({},i,{offset:n,horizontalPoints:E,xAxis:v,yAxis:b})),I.createElement(vmt,og({},i,{offset:n,verticalPoints:N,xAxis:v,yAxis:b}))))}lxe.displayName="CartesianGrid";var Cmt=["domain","range"],kmt=["domain","range"];function kZ(e,t){if(e==null)return{};var r,n,i=_mt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _mt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function _Z(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function cxe(e,t){if(e===t)return!0;var{domain:r,range:n}=e,i=kZ(e,Cmt),{domain:a,range:s}=t,o=kZ(t,kmt);return!_Z(r,a)||!_Z(n,s)?!1:ZU(i,o)}var Nmt=["dangerouslySetInnerHTML","ticks"],Amt=["id"];function s5(){return s5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s5.apply(null,arguments)}function NZ(e,t){if(e==null)return{};var r,n,i=Tmt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Tmt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Imt(e){var t=ya(),r=I.useRef(null);return I.useLayoutEffect(()=>{r.current===null?t(Rht(e)):r.current!==e&&t(jht({prev:r.current,next:e})),r.current=e},[e,t]),I.useLayoutEffect(()=>()=>{r.current&&(t(Dht(r.current)),r.current=null)},[t]),null}var Omt=e=>{var{xAxisId:t,className:r}=e,n=br(VB),i=Rl(),a="xAxis",s=br(b=>yb(b,a,t,i)),o=br(b=>Qme(b,a,t,i)),l=br(b=>Gme(b,t)),c=br(b=>Rct(b,t)),d=br(b=>gme(b,t));if(l==null||c==null||d==null)return null;var{dangerouslySetInnerHTML:f,ticks:p}=e,m=NZ(e,Nmt),{id:x}=d,v=NZ(d,Amt);return I.createElement(r$,s5({},m,v,{scale:s,x:c.x,y:c.y,width:l.width,height:l.height,className:gi("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:o,axisType:a}))},Pmt={allowDataOverflow:rs.allowDataOverflow,allowDecimals:rs.allowDecimals,allowDuplicatedCategory:rs.allowDuplicatedCategory,angle:rs.angle,axisLine:Sh.axisLine,height:rs.height,hide:!1,includeHidden:rs.includeHidden,interval:rs.interval,minTickGap:rs.minTickGap,mirror:rs.mirror,orientation:rs.orientation,padding:rs.padding,reversed:rs.reversed,scale:rs.scale,tick:rs.tick,tickCount:rs.tickCount,tickLine:Sh.tickLine,tickSize:Sh.tickSize,type:rs.type,xAxisId:0},Rmt=e=>{var t=vc(e,Pmt);return I.createElement(I.Fragment,null,I.createElement(Imt,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),I.createElement(Omt,t))},uxe=I.memo(Rmt,cxe);uxe.displayName="XAxis";var jmt=["dangerouslySetInnerHTML","ticks"],Dmt=["id"];function o5(){return o5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o5.apply(null,arguments)}function AZ(e,t){if(e==null)return{};var r,n,i=Mmt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Mmt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Fmt(e){var t=ya(),r=I.useRef(null);return I.useLayoutEffect(()=>{r.current===null?t(Mht(e)):r.current!==e&&t(Fht({prev:r.current,next:e})),r.current=e},[e,t]),I.useLayoutEffect(()=>()=>{r.current&&(t(Lht(r.current)),r.current=null)},[t]),null}var Lmt=e=>{var{yAxisId:t,className:r,width:n,label:i}=e,a=I.useRef(null),s=I.useRef(null),o=br(VB),l=Rl(),c=ya(),d="yAxis",f=br(P=>yb(P,d,t,l)),p=br(P=>Kme(P,t)),m=br(P=>Dct(P,t)),x=br(P=>Qme(P,d,t,l)),v=br(P=>xme(P,t));if(I.useLayoutEffect(()=>{if(!(n!=="auto"||!p||JU(i)||I.isValidElement(i)||v==null)){var P=a.current;if(P){var R=P.getCalculatedWidth();Math.round(p.width)!==Math.round(R)&&c(Bht({id:t,width:R}))}}},[x,p,c,i,t,n,v]),p==null||m==null||v==null)return null;var{dangerouslySetInnerHTML:b,ticks:w}=e,k=AZ(e,jmt),{id:E}=v,N=AZ(v,Dmt);return I.createElement(r$,o5({},k,N,{ref:a,labelRef:s,scale:f,x:m.x,y:m.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:p.width,height:p.height,className:gi("recharts-".concat(d," ").concat(d),r),viewBox:o,ticks:x,axisType:d}))},Bmt={allowDataOverflow:ns.allowDataOverflow,allowDecimals:ns.allowDecimals,allowDuplicatedCategory:ns.allowDuplicatedCategory,angle:ns.angle,axisLine:Sh.axisLine,hide:!1,includeHidden:ns.includeHidden,interval:ns.interval,minTickGap:ns.minTickGap,mirror:ns.mirror,orientation:ns.orientation,padding:ns.padding,reversed:ns.reversed,scale:ns.scale,tick:ns.tick,tickCount:ns.tickCount,tickLine:Sh.tickLine,tickSize:Sh.tickSize,type:ns.type,width:ns.width,yAxisId:0},Umt=e=>{var t=vc(e,Bmt);return I.createElement(I.Fragment,null,I.createElement(Fmt,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),I.createElement(Lmt,t))},dxe=I.memo(Umt,cxe);dxe.displayName="YAxis";var $mt=(e,t)=>t,n$=st([$mt,ii,pme,Ka,hge,np,Xut,ws],rdt),i$=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},fxe=uu("mouseClick"),hxe=vC();hxe.startListening({actionCreator:fxe,effect:(e,t)=>{var r=e.payload,n=n$(t.getState(),i$(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(Xct({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var l5=uu("mouseMove"),pxe=vC(),sN=null;pxe.startListening({actionCreator:l5,effect:(e,t)=>{var r=e.payload;sN!==null&&cancelAnimationFrame(sN);var n=i$(r);sN=requestAnimationFrame(()=>{var i=t.getState(),a=UU(i,i.tooltip.settings.shared);if(a==="axis"){var s=n$(i,n);(s==null?void 0:s.activeIndex)!=null?t.dispatch(age({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(ige())}sN=null})}});var TZ={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},mxe=Pl({name:"rootProps",initialState:TZ,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:TZ.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),zmt=mxe.reducer,{updateOptions:Hmt}=mxe.actions,gxe=Pl({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:cAt}=gxe.actions,Wmt=gxe.reducer,xxe=uu("keyDown"),vxe=uu("focus"),a$=vC();a$.startListening({actionCreator:xxe,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=$U(i,wb(r),NC(r),PC(r)),o=s==null?-1:Number(s);if(!(!Number.isFinite(o)||o<0)){var l=np(r);if(a==="Enter"){var c=qI(r,"axis","hover",String(i.index));t.dispatch(e5({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:c}));return}var d=Bct(r),f=d==="left-to-right"?1:-1,p=a==="ArrowRight"?1:-1,m=o+p*f;if(!(l==null||m>=l.length||m<0)){var x=qI(r,"axis","hover",String(m));t.dispatch(e5({active:!0,activeIndex:m.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}}});a$.startListening({actionCreator:vxe,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var a="0",s=qI(r,"axis","hover",String(a));t.dispatch(e5({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:s}))}}}});var Pc=uu("externalEvent"),yxe=vC(),sM=new Map;yxe.startListening({actionCreator:Pc,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var i=n.type,a=sM.get(i);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var o=t.getState(),l={activeCoordinate:jut(o),activeDataKey:xge(o),activeIndex:Ry(o),activeLabel:gge(o),activeTooltipIndex:Ry(o),isTooltipActive:Dut(o)};r(l,n)}finally{sM.delete(i)}});sM.set(i,s)}}});var Vmt=st([bb],e=>e.tooltipItemPayloads),qmt=st([Vmt,IC,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var i=e.find(o=>o.settings.dataKey===n);if(i!=null){var{positions:a}=i;if(a!=null){var s=t(a,r);return s}}}),bxe=uu("touchMove"),wxe=vC();wxe.startListening({actionCreator:bxe,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),i=UU(n,n.tooltip.settings.shared);if(i==="axis"){var a=n$(n,i$({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(age({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var s,o=r.touches[0];if(document.elementFromPoint==null)return;var l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute(znt),d=(s=l.getAttribute(Hnt))!==null&&s!==void 0?s:void 0,f=qmt(t.getState(),c,d);t.dispatch(nge({activeDataKey:d,activeIndex:c,activeCoordinate:f}))}}}});var Gmt=rpe({brush:T0t,cartesianAxis:Uht,chartData:Rdt,errorBars:ept,graphicalItems:_ht,layout:Ent,legend:Oit,options:Adt,polarAxis:Qft,polarOptions:Wmt,referenceElements:M0t,rootProps:zmt,tooltip:Yct,zIndex:gdt}),Kmt=function(t){return Krt({reducer:Gmt,preloadedState:t,middleware:r=>{var n;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((n="es6")!==null&&n!==void 0?n:"")}).concat([hxe.middleware,pxe.middleware,a$.middleware,yxe.middleware,wxe.middleware])},enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(xpe({type:"raf"}))},devTools:hb.devToolsEnabled})};function Xmt(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,i=Rl(),a=I.useRef(null);if(i)return r;a.current==null&&(a.current=Kmt(t));var s=jB;return I.createElement(Ipt,{context:s,store:a.current},r)}function Ymt(e){var{layout:t,margin:r}=e,n=ya(),i=Rl();return I.useEffect(()=>{i||(n(bnt(t)),n(ynt(r)))},[n,i,t,r]),null}var Qmt=I.memo(Ymt,ZU);function Jmt(e){var t=ya();return I.useEffect(()=>{t(Hmt(e))},[t,e]),null}function IZ(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",i=Xge("".concat(n).concat(t)),a=ya();return I.useLayoutEffect(()=>(a(pdt({zIndex:t,elementId:i,isPanorama:r})),()=>{a(mdt({zIndex:t,isPanorama:r}))}),[a,t,i,r]),I.createElement("g",{id:i})}function OZ(e){var{children:t,isPanorama:r}=e,n=br(idt);if(!n||n.length===0)return t;var i=n.filter(s=>s<0),a=n.filter(s=>s>0);return I.createElement(I.Fragment,null,i.map(s=>I.createElement(IZ,{key:s,zIndex:s,isPanorama:r})),t,a.map(s=>I.createElement(IZ,{key:s,zIndex:s,isPanorama:r})))}var Zmt=["children"];function egt(e,t){if(e==null)return{};var r,n,i=tgt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function tgt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function eO(){return eO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eO.apply(null,arguments)}var rgt={width:"100%",height:"100%",display:"block"},ngt=I.forwardRef((e,t)=>{var r=Hpe(),n=Wpe(),i=Jpe();if(!cf(r)||!cf(n))return null;var{children:a,otherAttributes:s,title:o,desc:l}=e,c,d;return s!=null&&(typeof s.tabIndex=="number"?c=s.tabIndex:c=i?0:void 0,typeof s.role=="string"?d=s.role:d=i?"application":void 0),I.createElement(lhe,eO({},s,{title:o,desc:l,role:d,tabIndex:c,width:r,height:n,style:rgt,ref:t}),a)}),igt=e=>{var{children:t}=e,r=br(W3);if(!r)return null;var{width:n,height:i,y:a,x:s}=r;return I.createElement(lhe,{width:n,height:i,x:s,y:a},t)},PZ=I.forwardRef((e,t)=>{var{children:r}=e,n=egt(e,Zmt),i=Rl();return i?I.createElement(igt,null,I.createElement(OZ,{isPanorama:!0},r)):I.createElement(ngt,eO({ref:t},n),I.createElement(OZ,{isPanorama:!1},r))});function agt(){var e=ya(),[t,r]=I.useState(null),n=br($nt);return I.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),a=i.width/t.offsetWidth;xa(a)&&a!==n&&e(Snt(a))}},[t,e,n]),r}function RZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function sgt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RZ(Object(r),!0).forEach(function(n){ogt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ogt(e,t,r){return(t=lgt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lgt(e){var t=cgt(e,"string");return typeof t=="symbol"?t:t+""}function cgt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fx(){return fx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fx.apply(null,arguments)}var ugt=()=>(zdt(),null);function tO(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var dgt=I.forwardRef((e,t)=>{var r,n,i=I.useRef(null),[a,s]=I.useState({containerWidth:tO((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:tO((n=e.style)===null||n===void 0?void 0:n.height)}),o=I.useCallback((c,d)=>{s(f=>{var p=Math.round(c),m=Math.round(d);return f.containerWidth===p&&f.containerHeight===m?f:{containerWidth:p,containerHeight:m}})},[]),l=I.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null&&typeof ResizeObserver<"u"){var{width:d,height:f}=c.getBoundingClientRect();o(d,f);var p=x=>{var{width:v,height:b}=x[0].contentRect;o(v,b)},m=new ResizeObserver(p);m.observe(c),i.current=m}},[t,o]);return I.useEffect(()=>()=>{var c=i.current;c!=null&&c.disconnect()},[o]),I.createElement(I.Fragment,null,I.createElement(G3,{width:a.containerWidth,height:a.containerHeight}),I.createElement("div",fx({ref:l},e)))}),fgt=I.forwardRef((e,t)=>{var{width:r,height:n}=e,[i,a]=I.useState({containerWidth:tO(r),containerHeight:tO(n)}),s=I.useCallback((l,c)=>{a(d=>{var f=Math.round(l),p=Math.round(c);return d.containerWidth===f&&d.containerHeight===p?d:{containerWidth:f,containerHeight:p}})},[]),o=I.useCallback(l=>{if(typeof t=="function"&&t(l),l!=null){var{width:c,height:d}=l.getBoundingClientRect();s(c,d)}},[t,s]);return I.createElement(I.Fragment,null,I.createElement(G3,{width:i.containerWidth,height:i.containerHeight}),I.createElement("div",fx({ref:o},e)))}),hgt=I.forwardRef((e,t)=>{var{width:r,height:n}=e;return I.createElement(I.Fragment,null,I.createElement(G3,{width:r,height:n}),I.createElement("div",fx({ref:t},e)))}),pgt=I.forwardRef((e,t)=>{var{width:r,height:n}=e;return Bh(r)||Bh(n)?I.createElement(fgt,fx({},e,{ref:t})):I.createElement(hgt,fx({},e,{ref:t}))});function mgt(e){return e===!0?dgt:pgt}var ggt=I.forwardRef((e,t)=>{var{children:r,className:n,height:i,onClick:a,onContextMenu:s,onDoubleClick:o,onMouseDown:l,onMouseEnter:c,onMouseLeave:d,onMouseMove:f,onMouseUp:p,onTouchEnd:m,onTouchMove:x,onTouchStart:v,style:b,width:w,responsive:k,dispatchTouchEvents:E=!0}=e,N=I.useRef(null),P=ya(),[R,O]=I.useState(null),[D,L]=I.useState(null),B=agt(),z=qB(),H=(z==null?void 0:z.width)>0?z.width:w,te=(z==null?void 0:z.height)>0?z.height:i,Y=I.useCallback(ae=>{B(ae),typeof t=="function"&&t(ae),O(ae),L(ae),ae!=null&&(N.current=ae)},[B,t,O,L]),W=I.useCallback(ae=>{P(fxe(ae)),P(Pc({handler:a,reactEvent:ae}))},[P,a]),Z=I.useCallback(ae=>{P(l5(ae)),P(Pc({handler:c,reactEvent:ae}))},[P,c]),re=I.useCallback(ae=>{P(ige()),P(Pc({handler:d,reactEvent:ae}))},[P,d]),X=I.useCallback(ae=>{P(l5(ae)),P(Pc({handler:f,reactEvent:ae}))},[P,f]),Q=I.useCallback(()=>{P(vxe())},[P]),fe=I.useCallback(ae=>{P(xxe(ae.key))},[P]),ye=I.useCallback(ae=>{P(Pc({handler:s,reactEvent:ae}))},[P,s]),J=I.useCallback(ae=>{P(Pc({handler:o,reactEvent:ae}))},[P,o]),ce=I.useCallback(ae=>{P(Pc({handler:l,reactEvent:ae}))},[P,l]),V=I.useCallback(ae=>{P(Pc({handler:p,reactEvent:ae}))},[P,p]),G=I.useCallback(ae=>{P(Pc({handler:v,reactEvent:ae}))},[P,v]),ie=I.useCallback(ae=>{E&&P(bxe(ae)),P(Pc({handler:x,reactEvent:ae}))},[P,E,x]),Ee=I.useCallback(ae=>{P(Pc({handler:m,reactEvent:ae}))},[P,m]),ne=mgt(k);return I.createElement(Cge.Provider,{value:R},I.createElement(att.Provider,{value:D},I.createElement(ne,{width:H??(b==null?void 0:b.width),height:te??(b==null?void 0:b.height),className:gi("recharts-wrapper",n),style:sgt({position:"relative",cursor:"default",width:H,height:te},b),onClick:W,onContextMenu:ye,onDoubleClick:J,onFocus:Q,onKeyDown:fe,onMouseDown:ce,onMouseEnter:Z,onMouseLeave:re,onMouseMove:X,onMouseUp:V,onTouchEnd:Ee,onTouchMove:ie,onTouchStart:G,ref:Y},I.createElement(ugt,null),r)))}),xgt=["width","height","responsive","children","className","style","compact","title","desc"];function vgt(e,t){if(e==null)return{};var r,n,i=ygt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ygt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var bgt=I.forwardRef((e,t)=>{var{width:r,height:n,responsive:i,children:a,className:s,style:o,compact:l,title:c,desc:d}=e,f=vgt(e,xgt),p=Fh(f);return l?I.createElement(I.Fragment,null,I.createElement(G3,{width:r,height:n}),I.createElement(PZ,{otherAttributes:p,title:c,desc:d},a)):I.createElement(ggt,{className:s,style:o,width:r,height:n,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},I.createElement(PZ,{otherAttributes:p,title:c,desc:d,ref:t},I.createElement(L0t,null,a)))});function c5(){return c5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c5.apply(null,arguments)}var wgt={top:5,right:5,bottom:5,left:5},Sgt={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:wgt,reverseStackOrder:!1,syncMethod:"index",responsive:!1},Egt=I.forwardRef(function(t,r){var n,i=vc(t.categoricalChartProps,Sgt),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,categoricalChartProps:c}=t,d={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,eventEmitter:void 0};return I.createElement(Xmt,{preloadedState:{options:d},reduxStoreName:(n=c.id)!==null&&n!==void 0?n:a},I.createElement(A0t,{chartData:c.data}),I.createElement(Qmt,{layout:i.layout,margin:i.margin}),I.createElement(Jmt,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),I.createElement(bgt,c5({},i,{ref:r})))}),Cgt=["axis","item"],kgt=I.forwardRef((e,t)=>I.createElement(Egt,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Cgt,tooltipPayloadSearcher:_dt,categoricalChartProps:e,ref:t}));const _gt=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(e),Ngt=({data:e,type:t})=>{const r=I.useMemo(()=>{if(!e||e.length===0)return[];if(t==="jobs"){const a=e.reduce((s,o)=>{const l=new Date(o.created_at),c=l.toLocaleDateString("en-US",{month:"short",year:"numeric"}),d=`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}`;return s[d]||(s[d]={name:c,value:0,sortKey:d}),s[d].value+=Number(o.total_value||0),s},{});return Object.values(a).sort((s,o)=>s.sortKey.localeCompare(o.sortKey))}if(t==="installers")return e.filter(a=>Number(a.total_labor_value)>0).map(a=>({name:a.installer_name,value:Number(a.total_labor_value),color:a.color||"#4f46e5"})).sort((a,s)=>s.value-a.value);if(t==="products"){const a=e.reduce((s,o)=>{const l=o.manufacturer_name||"Unknown";return s[l]||(s[l]={name:l,value:0}),s[l].value+=1,s},{});return Object.values(a).sort((s,o)=>o.value-s.value).slice(0,15)}return[]},[e,t]);if(r.length===0)return null;const n=t==="products"?"Count":"Value",i="#4f46e5";return u.jsxs("div",{className:"h-80 w-full bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-6 print:break-inside-avoid",children:[u.jsxs("h3",{className:"text-sm font-bold text-gray-500 uppercase mb-4",children:[t==="jobs"&&"Revenue Trend (Based on Filters)",t==="installers"&&"Labor Value Distribution",t==="products"&&"Variants by Manufacturer (Top 15)"]}),u.jsx(hit,{width:"100%",height:"100%",children:u.jsxs(kgt,{data:r,margin:{top:5,right:30,left:20,bottom:5},children:[u.jsx(lxe,{strokeDasharray:"3 3",vertical:!1}),u.jsx(uxe,{dataKey:"name",tick:{fontSize:12},interval:0,angle:r.length>10?-45:0,textAnchor:r.length>10?"end":"middle",height:r.length>10?60:30}),u.jsx(dxe,{tickFormatter:a=>t==="products"?a:`$${a/1e3}k`,tick:{fontSize:12}}),u.jsx(Ydt,{formatter:a=>[t==="products"?a:_gt(a),n]}),u.jsx(rxe,{dataKey:"value",fill:i,radius:[4,4,0,0],children:t==="installers"&&r.map((a,s)=>u.jsx(YU,{fill:a.color||i},`cell-${s}`))})]})})]})},jZ=e=>e?new Date(e).toLocaleDateString():"-",Agt=({title:e,dateRange:t})=>{const{systemBranding:r}=Gr(),n=(r==null?void 0:r.logoUrl)||"/logo.png";return u.jsx("div",{className:"hidden print:flex flex-col mb-8 border-b-2 border-gray-800 pb-4",children:u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("img",{src:n,alt:"Logo",className:"h-16 object-contain"}),u.jsxs("div",{className:"text-right",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e}),u.jsxs("p",{className:"text-gray-600 text-sm",children:["Generated: ",new Date().toLocaleDateString()]}),t&&u.jsxs("p",{className:"text-gray-600 text-sm",children:["Period: ",t]})]})]})})},Tgt=["unit_cost","retail_price","total_value","material_cost","labor_cost","appointment_count","total_labor_value","carton_size"];function Igt(){const{vendors:e,products:t,fetchProducts:r}=Gr(),[n,i]=I.useState("products"),[a,s]=I.useState(!1),[o,l]=I.useState(null),[c,d]=I.useState([]),[f,p]=I.useState(null),[m,x]=I.useState(!1),v=pu(),[b,w]=I.useState(!1),[k,E]=I.useState(!0),N=new Date,P=new Date(N.getFullYear(),N.getMonth(),1),[R,O]=I.useState(P.toISOString().split("T")[0]),[D,L]=I.useState(N.toISOString().split("T")[0]),[B,z]=I.useState(""),[H,te]=I.useState(""),[Y,W]=I.useState(null),[Z,re]=I.useState([]),[X,Q]=I.useState(!1),[fe]=I.useState("All"),[ye]=I.useState(""),J=async()=>{s(!0),l(null),d([]);try{if(n==="products"){const ve=await mWe({includeDiscontinued:!1,manufacturerId:B,productType:H});d(ve)}else if(n==="jobs"){const ve=await gWe({startDate:R,endDate:D,status:fe});d(ve)}else if(n==="installers"){const ve=await xWe({startDate:R,endDate:D,installerId:ye});d(ve)}}catch(ve){console.error(ve),l("Failed to load report data. Please try again.")}finally{s(!1)}};I.useEffect(()=>{d([]),l(null),re([])},[n]);const ce=()=>{J()},V=()=>{window.print()},G=()=>{const ve=n==="products"?"PriceList":n==="jobs"?"JobPipeline":"InstallerActivity";Vet(Ee(),ve)},ie=ve=>{let q="asc";Y&&Y.key===ve&&Y.direction==="asc"&&(q="desc"),W({key:ve,direction:q})},Ee=()=>Y?[...c].sort((ve,q)=>{const Ne=ve[Y.key],Pe=q[Y.key];if(Ne===null)return 1;if(Pe===null)return-1;if(Tgt.includes(Y.key)){const ze=parseFloat(Ne)||0,De=parseFloat(Pe)||0;return Y.direction==="asc"?ze-De:De-ze}return Y.direction==="asc"?String(Ne).localeCompare(String(Pe)):String(Pe).localeCompare(String(Ne))}):c,ne=ve=>{re(q=>q.includes(ve)?q.filter(Ne=>Ne!==ve):[...q,ve])},ae=ve=>!Z.includes(ve),me=async ve=>{if(n==="jobs")v(`/projects/${ve.id}`);else if(n==="installers")v(`/installers/${ve.id}`);else if(n==="products"){t.length===0&&await r();const q=t.find(Ne=>Ne.id===ve.product_id);q&&(p(q),x(!0))}};return u.jsxs("div",{className:"flex h-full bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden",children:[u.jsxs("div",{className:"w-64 bg-surface-container-low border-r border-outline/10 flex-shrink-0 flex flex-col print:hidden",children:[u.jsx("div",{className:"p-6 border-b border-outline/10",children:u.jsx("h2",{className:"text-lg font-bold text-text-primary",children:"Reports"})}),u.jsxs("nav",{className:"flex-1 p-4 space-y-1",children:[u.jsxs("button",{onClick:()=>i("products"),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-full transition-colors ${n==="products"?"bg-primary-container text-primary font-bold":"text-text-secondary hover:bg-surface-container-highest hover:text-text-primary"}`,children:[u.jsx(Jc,{className:"mr-3 h-5 w-5"}),"Price List / Inventory"]}),u.jsxs("button",{onClick:()=>i("jobs"),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-full transition-colors ${n==="jobs"?"bg-primary-container text-primary font-bold":"text-text-secondary hover:bg-surface-container-highest hover:text-text-primary"}`,children:[u.jsx(Rh,{className:"mr-3 h-5 w-5"}),"Job Pipeline"]}),u.jsxs("button",{onClick:()=>i("installers"),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-full transition-colors ${n==="installers"?"bg-primary-container text-primary font-bold":"text-text-secondary hover:bg-surface-container-highest hover:text-text-primary"}`,children:[u.jsx(ex,{className:"mr-3 h-5 w-5"}),"Installer Activity"]})]})]}),u.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-surface print:block print:h-auto print:overflow-visible",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-outline/10 bg-surface-container-high flex flex-wrap items-end justify-between gap-4 print:hidden",children:[u.jsxs("div",{className:"flex items-end gap-3",children:[n==="products"?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-xs text-text-secondary font-bold uppercase mb-1",children:"Manufacturer"}),u.jsxs("select",{className:"h-10 border border-outline/10 rounded-lg px-3 text-sm bg-surface-container-highest text-text-primary min-w-[160px] focus:outline-none focus:ring-2 focus:ring-primary/50",value:B,onChange:ve=>z(ve.target.value),children:[u.jsx("option",{value:"",children:"All Manufacturers"}),e.filter(ve=>ve.vendorType!=="Supplier").sort((ve,q)=>ve.name.localeCompare(q.name)).map(ve=>u.jsx("option",{value:ve.id,children:ve.name},ve.id))]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-xs text-text-secondary font-bold uppercase mb-1",children:"Product Type"}),u.jsxs("select",{className:"h-10 border border-outline/10 rounded-lg px-3 text-sm bg-surface-container-highest text-text-primary min-w-[140px] focus:outline-none focus:ring-2 focus:ring-primary/50",value:H,onChange:ve=>te(ve.target.value),children:[u.jsx("option",{value:"",children:"All Types"}),oy.map(ve=>u.jsx("option",{value:ve,children:ve},ve))]})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-xs text-text-secondary font-bold uppercase mb-1",children:"From"}),u.jsx("input",{type:"date",className:"h-10 border border-outline/10 rounded-lg px-3 text-sm bg-surface-container-highest text-text-primary focus:outline-none focus:ring-2 focus:ring-primary/50",value:R,onChange:ve=>O(ve.target.value)})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-xs text-text-secondary font-bold uppercase mb-1",children:"To"}),u.jsx("input",{type:"date",className:"h-10 border border-outline/10 rounded-lg px-3 text-sm bg-surface-container-highest text-text-primary focus:outline-none focus:ring-2 focus:ring-primary/50",value:D,onChange:ve=>L(ve.target.value)})]})]}),u.jsxs("button",{onClick:ce,className:"h-10 flex items-center gap-2 px-6 bg-primary text-on-primary text-sm font-bold rounded-full hover:bg-primary-hover shadow-md active:scale-95 transition-all",title:"Run or Refresh Report",children:[u.jsx(M8e,{className:"w-4 h-4"}),"Run"]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"relative",children:[u.jsxs("button",{onClick:()=>Q(!X),className:"h-10 flex items-center gap-2 px-4 bg-surface-container-highest text-text-secondary border border-outline/10 rounded-full hover:bg-surface-container-high shadow-sm text-sm font-medium transition-colors",children:[u.jsx(B8e,{className:"h-4 w-4"}),"Columns"]}),X&&u.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-surface-container-high rounded-xl shadow-xl border border-outline/10 z-50 p-2",children:[u.jsx("div",{className:"text-xs font-bold text-text-secondary uppercase px-2 mb-2",children:"Toggle Columns"}),u.jsxs("div",{className:"space-y-1",children:[n==="products"&&u.jsx(u.Fragment,{children:["Manufacturer","Product","Style_Size","SKU","Carton","Retail"].map(ve=>u.jsxs("label",{className:"flex items-center px-2 py-2 hover:bg-surface-container-highest rounded-lg cursor-pointer text-text-primary",children:[u.jsx("input",{type:"checkbox",checked:ae(ve.toLowerCase()),onChange:()=>ne(ve.toLowerCase()),className:"rounded border-outline/20 text-primary mr-2 bg-surface-container-low"}),u.jsx("span",{className:"text-sm",children:ve.replace("_"," / ")})]},ve))}),n==="jobs"&&u.jsx(u.Fragment,{children:["Date","Customer","Project","Status","Total"].map(ve=>u.jsxs("label",{className:"flex items-center px-2 py-2 hover:bg-surface-container-highest rounded-lg cursor-pointer text-text-primary",children:[u.jsx("input",{type:"checkbox",checked:ae(ve.toLowerCase()),onChange:()=>ne(ve.toLowerCase()),className:"rounded border-outline/20 text-primary mr-2 bg-surface-container-low"}),u.jsx("span",{className:"text-sm",children:ve})]},ve))}),n==="installers"&&u.jsx(u.Fragment,{children:["Installer","Jobs","Labor"].map(ve=>u.jsxs("label",{className:"flex items-center px-2 py-2 hover:bg-surface-container-highest rounded-lg cursor-pointer text-text-primary",children:[u.jsx("input",{type:"checkbox",checked:ae(ve.toLowerCase()),onChange:()=>ne(ve.toLowerCase()),className:"rounded border-outline/20 text-primary mr-2 bg-surface-container-low"}),u.jsx("span",{className:"text-sm",children:ve})]},ve))})]}),u.jsx("div",{className:"fixed inset-0 z-[-1]",onClick:()=>Q(!1)})]})]}),u.jsxs("div",{className:"flex items-center border border-outline/10 rounded-full bg-surface-container-highest shadow-sm overflow-hidden h-10",children:[c.length>0&&u.jsx("button",{onClick:()=>E(!k),className:`p-3 border-r border-outline/10 hover:bg-surface-container-high transition-colors ${k?"text-primary bg-primary-container":"text-text-secondary"}`,title:k?"Hide Chart":"Show Chart",children:u.jsx(s8e,{className:"h-4 w-4"})}),u.jsx("button",{onClick:()=>w(!b),className:`p-3 hover:bg-surface-container-high transition-colors ${b?"text-error bg-error-container":"text-text-secondary"}`,title:b?"Hide Costs":"Show Costs",children:u.jsx(_7,{className:"h-4 w-4"})})]}),c.length>0&&u.jsxs("button",{onClick:G,className:"h-10 flex items-center gap-2 px-4 bg-surface-container-highest text-text-secondary border border-outline/10 rounded-full hover:bg-surface-container-high shadow-sm text-sm font-medium",children:[u.jsx(JE,{className:"h-4 w-4"}),"Export CSV"]}),u.jsxs("button",{onClick:V,className:"h-10 flex items-center gap-2 px-4 bg-secondary text-on-secondary rounded-full hover:bg-secondary-hover shadow-sm text-sm font-medium ml-2",children:[u.jsx(ay,{className:"h-4 w-4"}),"Print"]})]})]}),u.jsxs("div",{className:"flex-1 overflow-auto p-8 print:p-0 print:overflow-visible bg-surface",children:[u.jsx(Agt,{title:n==="products"?"Product Price List":n==="jobs"?"Job Pipeline Report":"Installer Activity Report",dateRange:R&&D?`${jZ(R)} - ${jZ(D)}`:void 0}),o&&u.jsxs("div",{className:"mb-4 p-4 bg-error-container border-l-4 border-error text-error rounded-r-lg",children:[u.jsx("p",{className:"font-bold",children:"Error"}),u.jsx("p",{children:o})]}),a?u.jsx("div",{className:"flex justify-center items-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):u.jsxs("div",{className:"min-w-full",children:[k&&c.length>0&&u.jsx(Ngt,{data:Ee(),type:n}),c.length>0&&n==="products"&&u.jsx(qet,{data:Ee(),sortConfig:Y,onSort:ie,hiddenColumns:Z,showCost:b,onRowClick:me}),c.length>0&&n==="jobs"&&u.jsx(Ket,{data:Ee(),sortConfig:Y,onSort:ie,hiddenColumns:Z,showCost:b,onRowClick:me}),c.length>0&&n==="installers"&&u.jsx(Xet,{data:Ee(),sortConfig:Y,onSort:ie,hiddenColumns:Z,onRowClick:me}),c.length===0&&!o&&u.jsx("div",{className:"text-center py-12 text-text-tertiary italic border-2 border-dashed border-outline/20 rounded-xl bg-surface-container-low",children:'No data generated. Adjust filters and click "Run Report".'})]})]})]}),m&&f&&u.jsx(S9,{isOpen:m,onClose:()=>x(!1),product:f})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var rO={};rO.version="0.18.5";var Sxe=1252,Ogt=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],s$={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},o$=function(e){Ogt.indexOf(e)!=-1&&(Sxe=s$[0]=e)};function Pgt(){o$(1252)}var Ku=function(e){o$(e)};function l$(){Ku(1200),Pgt()}function DZ(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function Rgt(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function Exe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Jw=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?Rgt(e.slice(2)):t==254&&r==255?Exe(e.slice(2)):t==65279?e.slice(1):e},oN=function(t){return String.fromCharCode(t)},MZ=function(t){return String.fromCharCode(t)},VS,l0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function qS(e){for(var t="",r=0,n=0,i=0,a=0,s=0,o=0,l=0,c=0;c<e.length;)r=e.charCodeAt(c++),a=r>>2,n=e.charCodeAt(c++),s=(r&3)<<4|n>>4,i=e.charCodeAt(c++),o=(n&15)<<2|i>>6,l=i&63,isNaN(n)?o=l=64:isNaN(i)&&(l=64),t+=l0.charAt(a)+l0.charAt(s)+l0.charAt(o)+l0.charAt(l);return t}function dc(e){var t="",r=0,n=0,i=0,a=0,s=0,o=0,l=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<e.length;)a=l0.indexOf(e.charAt(c++)),s=l0.indexOf(e.charAt(c++)),r=a<<2|s>>4,t+=String.fromCharCode(r),o=l0.indexOf(e.charAt(c++)),n=(s&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),l=l0.indexOf(e.charAt(c++)),i=(o&3)<<6|l,l!==64&&(t+=String.fromCharCode(i));return t}var pn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),ap=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function D0(e){return pn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function FZ(e){return pn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Yl=function(t){return pn?ap(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function pP(e){if(typeof ArrayBuffer>"u")return Yl(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function nm(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function jgt(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function c$(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return c$(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var fs=pn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:ap(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),i=0;for(t=0,r=0;t<e.length;r+=i,++t)if(i=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function Dgt(e){for(var t=[],r=0,n=e.length+250,i=D0(e.length+255),a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s<128)i[r++]=s;else if(s<2048)i[r++]=192|s>>6&31,i[r++]=128|s&63;else if(s>=55296&&s<57344){s=(s&1023)+64;var o=e.charCodeAt(++a)&1023;i[r++]=240|s>>8&7,i[r++]=128|s>>2&63,i[r++]=128|o>>6&15|(s&3)<<4,i[r++]=128|o&63}else i[r++]=224|s>>12&15,i[r++]=128|s>>6&63,i[r++]=128|s&63;r>n&&(t.push(i.slice(0,r)),r=0,i=D0(65535),n=65530)}return t.push(i.slice(0,r)),fs(t)}var Ho=/\u0000/g,Zw=/[\u0001-\u0006]/g;function Nv(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Xu(e,t){var r=""+e;return r.length>=t?r:ea("0",t-r.length)+r}function u$(e,t){var r=""+e;return r.length>=t?r:ea(" ",t-r.length)+r}function nO(e,t){var r=""+e;return r.length>=t?r:r+ea(" ",t-r.length)}function Mgt(e,t){var r=""+Math.round(e);return r.length>=t?r:ea("0",t-r.length)+r}function Fgt(e,t){var r=""+e;return r.length>=t?r:ea("0",t-r.length)+r}var LZ=Math.pow(2,32);function D1(e,t){if(e>LZ||e<-LZ)return Mgt(e,t);var r=Math.round(e);return Fgt(r,t)}function iO(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var BZ=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],oM=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Lgt(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Pr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},UZ={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Bgt={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function aO(e,t,r){for(var n=e<0?-1:1,i=e*n,a=0,s=1,o=0,l=1,c=0,d=0,f=Math.floor(i);c<t&&(f=Math.floor(i),o=f*s+a,d=f*c+l,!(i-f<5e-8));)i=1/(i-f),a=s,s=o,l=c,c=d;if(d>t&&(c>t?(d=l,o=a):(d=c,o=s)),!r)return[0,n*o,d];var p=Math.floor(n*o/d);return[p,n*o-p*d,d]}function lg(e,t,r){if(e>2958465||e<0)return null;var n=e|0,i=Math.floor(86400*(e-n)),a=0,s=[],o={D:n,T:i,u:86400*(e-n)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++n,++o.D)),n===60)s=r?[1317,10,29]:[1900,2,29],a=3;else if(n===0)s=r?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),s=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),n<60&&(a=(a+6)%7),r&&(a=Vgt(l,s))}return o.y=s[0],o.m=s[1],o.d=s[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=a,o}var Cxe=new Date(1899,11,31,0,0,0),Ugt=Cxe.getTime(),$gt=new Date(1900,2,1,0,0,0);function kxe(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=$gt&&(r+=24*60*60*1e3),(r-(Ugt+(e.getTimezoneOffset()-Cxe.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function d$(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function zgt(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Hgt(e){var t=e<0?12:11,r=d$(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Wgt(e){var t=d$(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function GS(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=Hgt(e):t===10?r=e.toFixed(10).substr(0,12):r=Wgt(e),d$(zgt(r.toUpperCase()))}function hx(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):GS(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return fu(14,kxe(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Vgt(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function qgt(e,t,r,n){var i="",a=0,s=0,o=r.y,l,c=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(t.length){case 1:case 2:l=r.m,c=t.length;break;case 3:return oM[r.m-1][1];case 5:return oM[r.m-1][0];default:return oM[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:l=r.d,c=t.length;break;case 3:return BZ[r.q][0];default:return BZ[r.q][1]}break;case 104:switch(t.length){case 1:case 2:l=1+(r.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:l=r.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:l=r.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Xu(r.S,t.length):(n>=2?s=n===3?1e3:100:s=n===1?10:1,a=Math.round(s*(r.S+r.u)),a>=60*s&&(a=0),t==="s"?a===0?"0":""+a/s:(i=Xu(a,2+n),t==="ss"?i.substr(0,2):"."+i.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}c=t.length===3?1:2;break;case 101:l=o,c=1;break}var d=c>0?Xu(l,c):"";return d}function c0(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var _xe=/%/g;function Ggt(e,t,r){var n=t.replace(_xe,""),i=t.length-n.length;return Eh(e,n,r*Math.pow(10,2*i))+ea("%",i)}function Kgt(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Eh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function Nxe(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Nxe(e,-t);var i=e.indexOf(".");i===-1&&(i=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%i;if(a<0&&(a+=i),r=(t/Math.pow(10,a)).toPrecision(n+1+(i+a)%i),r.indexOf("e")===-1){var s=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+a):r+="E+"+(s-a);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,i)+"."+r.substr(2+i),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,d){return l+c+d.substr(0,(i+a)%i)+"."+d.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Axe=/# (\?+)( ?)\/( ?)(\d+)/;function Xgt(e,t,r){var n=parseInt(e[4],10),i=Math.round(t*n),a=Math.floor(i/n),s=i-a*n,o=n;return r+(a===0?"":""+a)+" "+(s===0?ea(" ",e[1].length+1+e[4].length):u$(s,e[1].length)+e[2]+"/"+e[3]+Xu(o,e[4].length))}function Ygt(e,t,r){return r+(t===0?"":""+t)+ea(" ",e[1].length+2+e[4].length)}var Txe=/^#*0*\.([0#]+)/,Ixe=/\).*[0#]/,Oxe=/\(###\) ###\\?-####/;function Do(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function $Z(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function zZ(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function Qgt(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function Jgt(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Rc(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Ixe)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Rc("n",n,r):"("+Rc("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Kgt(e,t,r);if(t.indexOf("%")!==-1)return Ggt(e,t,r);if(t.indexOf("E")!==-1)return Nxe(t,r);if(t.charCodeAt(0)===36)return"$"+Rc(e,t.substr(t.charAt(1)==" "?2:1),r);var i,a,s,o,l=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+D1(l,t.length);if(t.match(/^[#?]+$/))return i=D1(r,0),i==="0"&&(i=""),i.length>t.length?i:Do(t.substr(0,t.length-i.length))+i;if(a=t.match(Axe))return Xgt(a,l,c);if(t.match(/^#+0+$/))return c+D1(l,t.length-t.indexOf("0"));if(a=t.match(Txe))return i=$Z(r,a[1].length).replace(/^([^\.]+)$/,"$1."+Do(a[1])).replace(/\.$/,"."+Do(a[1])).replace(/\.(\d*)$/,function(x,v){return"."+v+ea("0",Do(a[1]).length-v.length)}),t.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return c+$Z(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return c+c0(D1(l,0));if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Rc(e,t,-r):c0(""+(Math.floor(r)+Qgt(r,a[1].length)))+"."+Xu(zZ(r,a[1].length),a[1].length);if(a=t.match(/^#,#*,#0/))return Rc(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Nv(Rc(e,t.replace(/[\\-]/g,""),r)),s=0,Nv(Nv(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return s<i.length?i.charAt(s++):x==="0"?"0":""}));if(t.match(Oxe))return i=Rc(e,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(a[4].length,7),o=aO(l,Math.pow(10,s)-1,!1),i=""+c,d=Eh("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),i+=d+a[2]+"/"+a[3],d=nO(o[2],s),d.length<a[4].length&&(d=Do(a[4].substr(a[4].length-d.length))+d),i+=d,i;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(a[1].length,a[4].length),7),o=aO(l,Math.pow(10,s)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?u$(o[1],s)+a[2]+"/"+a[3]+nO(o[2],s):ea(" ",2*s+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return i=D1(r,0),t.length<=i.length?i:Do(t.substr(0,t.length-i.length))+i;if(a=t.match(/^([#0?]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),s=i.indexOf(".");var f=t.indexOf(".")-s,p=t.length-i.length-f;return Do(t.substr(0,f)+i+t.substr(t.length-p))}if(a=t.match(/^00,000\.([#0]*0)$/))return s=zZ(r,a[1].length),r<0?"-"+Rc(e,t,-r):c0(Jgt(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?Xu(0,3-x.length):"")+x})+"."+Xu(s,a[1].length);switch(t){case"###,##0.00":return Rc(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=c0(D1(l,0));return m!=="0"?c+m:"";case"###,###.00":return Rc(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Rc(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Zgt(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Eh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function ext(e,t,r){var n=t.replace(_xe,""),i=t.length-n.length;return Eh(e,n,r*Math.pow(10,2*i))+ea("%",i)}function Pxe(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Pxe(e,-t);var i=e.indexOf(".");i===-1&&(i=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%i;if(a<0&&(a+=i),r=(t/Math.pow(10,a)).toPrecision(n+1+(i+a)%i),!r.match(/[Ee]/)){var s=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+a):r+="E+"+(s-a),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,d){return l+c+d.substr(0,(i+a)%i)+"."+d.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function _d(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Ixe)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?_d("n",n,r):"("+_d("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Zgt(e,t,r);if(t.indexOf("%")!==-1)return ext(e,t,r);if(t.indexOf("E")!==-1)return Pxe(t,r);if(t.charCodeAt(0)===36)return"$"+_d(e,t.substr(t.charAt(1)==" "?2:1),r);var i,a,s,o,l=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+Xu(l,t.length);if(t.match(/^[#?]+$/))return i=""+r,r===0&&(i=""),i.length>t.length?i:Do(t.substr(0,t.length-i.length))+i;if(a=t.match(Axe))return Ygt(a,l,c);if(t.match(/^#+0+$/))return c+Xu(l,t.length-t.indexOf("0"));if(a=t.match(Txe))return i=(""+r).replace(/^([^\.]+)$/,"$1."+Do(a[1])).replace(/\.$/,"."+Do(a[1])),i=i.replace(/\.(\d*)$/,function(x,v){return"."+v+ea("0",Do(a[1]).length-v.length)}),t.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return c+c0(""+l);if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+_d(e,t,-r):c0(""+r)+"."+ea("0",a[1].length);if(a=t.match(/^#,#*,#0/))return _d(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Nv(_d(e,t.replace(/[\\-]/g,""),r)),s=0,Nv(Nv(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return s<i.length?i.charAt(s++):x==="0"?"0":""}));if(t.match(Oxe))return i=_d(e,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(a[4].length,7),o=aO(l,Math.pow(10,s)-1,!1),i=""+c,d=Eh("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),i+=d+a[2]+"/"+a[3],d=nO(o[2],s),d.length<a[4].length&&(d=Do(a[4].substr(a[4].length-d.length))+d),i+=d,i;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(a[1].length,a[4].length),7),o=aO(l,Math.pow(10,s)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?u$(o[1],s)+a[2]+"/"+a[3]+nO(o[2],s):ea(" ",2*s+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return i=""+r,t.length<=i.length?i:Do(t.substr(0,t.length-i.length))+i;if(a=t.match(/^([#0]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),s=i.indexOf(".");var f=t.indexOf(".")-s,p=t.length-i.length-f;return Do(t.substr(0,f)+i+t.substr(t.length-p))}if(a=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+_d(e,t,-r):c0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?Xu(0,3-x.length):"")+x})+"."+Xu(0,a[1].length);switch(t){case"###,###":case"##,###":case"#,###":var m=c0(""+l);return m!=="0"?c+m:"";default:if(t.match(/\.[0#?]*$/))return _d(e,t.slice(0,t.lastIndexOf(".")),r)+Do(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Eh(e,t,r){return(r|0)===r?_d(e,t,r):Rc(e,t,r)}function txt(e){for(var t=[],r=!1,n=0,i=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(i,n-i),i=n+1}if(t[t.length]=e.substr(i),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var Rxe=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Sb(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":iO(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(Rxe))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function rxt(e,t,r,n){for(var i=[],a="",s=0,o="",l="t",c,d,f,p="H";s<e.length;)switch(o=e.charAt(s)){case"G":if(!iO(e,s))throw new Error("unrecognized character "+o+" in "+e);i[i.length]={t:"G",v:"General"},s+=7;break;case'"':for(a="";(f=e.charCodeAt(++s))!==34&&s<e.length;)a+=String.fromCharCode(f);i[i.length]={t:"t",v:a},++s;break;case"\\":var m=e.charAt(++s),x=m==="("||m===")"?m:"t";i[i.length]={t:x,v:m},++s;break;case"_":i[i.length]={t:"t",v:" "},s+=2;break;case"@":i[i.length]={t:"T",v:t},++s;break;case"B":case"b":if(e.charAt(s+1)==="1"||e.charAt(s+1)==="2"){if(c==null&&(c=lg(t,r,e.charAt(s+1)==="2"),c==null))return"";i[i.length]={t:"X",v:e.substr(s,2)},l=o,s+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||c==null&&(c=lg(t,r),c==null))return"";for(a=o;++s<e.length&&e.charAt(s).toLowerCase()===o;)a+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=p),i[i.length]={t:o,v:a},l=o;break;case"A":case"a":case"":var v={t:o,v:o};if(c==null&&(c=lg(t,r)),e.substr(s,3).toUpperCase()==="A/P"?(c!=null&&(v.v=c.H>=12?"P":"A"),v.t="T",p="h",s+=3):e.substr(s,5).toUpperCase()==="AM/PM"?(c!=null&&(v.v=c.H>=12?"PM":"AM"),v.t="T",s+=5,p="h"):e.substr(s,5).toUpperCase()==="/"?(c!=null&&(v.v=c.H>=12?"":""),v.t="T",s+=5,p="h"):(v.t="t",++s),c==null&&v.t==="T")return"";i[i.length]=v,l=o;break;case"[":for(a=o;e.charAt(s++)!=="]"&&s<e.length;)a+=e.charAt(s);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(Rxe)){if(c==null&&(c=lg(t,r),c==null))return"";i[i.length]={t:"Z",v:a.toLowerCase()},l=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",Sb(e)||(i[i.length]={t:"t",v:a}));break;case".":if(c!=null){for(a=o;++s<e.length&&(o=e.charAt(s))==="0";)a+=o;i[i.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++s<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(s))>-1;)a+=o;i[i.length]={t:"n",v:a};break;case"?":for(a=o;e.charAt(++s)===o;)a+=o;i[i.length]={t:o,v:a},l=o;break;case"*":++s,(e.charAt(s)==" "||e.charAt(s)=="*")&&++s;break;case"(":case")":i[i.length]={t:n===1?"t":o,v:o},++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;s<e.length&&"0123456789".indexOf(e.charAt(++s))>-1;)a+=e.charAt(s);i[i.length]={t:"D",v:a};break;case" ":i[i.length]={t:o,v:o},++s;break;case"$":i[i.length]={t:"t",v:"$"},++s;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);i[i.length]={t:"t",v:o},++s;break}var b=0,w=0,k;for(s=i.length-1,l="t";s>=0;--s)switch(i[s].t){case"h":case"H":i[s].t=p,l="h",b<1&&(b=1);break;case"s":(k=i[s].v.match(/\.0+$/))&&(w=Math.max(w,k[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":l=i[s].t;break;case"m":l==="s"&&(i[s].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&i[s].v.match(/[Hh]/)&&(b=1),b<2&&i[s].v.match(/[Mm]/)&&(b=2),b<3&&i[s].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var E="",N;for(s=0;s<i.length;++s)switch(i[s].t){case"t":case"T":case" ":case"D":break;case"X":i[s].v="",i[s].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[s].v=qgt(i[s].t.charCodeAt(0),i[s].v,c,w),i[s].t="t";break;case"n":case"?":for(N=s+1;i[N]!=null&&((o=i[N].t)==="?"||o==="D"||(o===" "||o==="t")&&i[N+1]!=null&&(i[N+1].t==="?"||i[N+1].t==="t"&&i[N+1].v==="/")||i[s].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[N].v==="/"||i[N].v===" "&&i[N+1]!=null&&i[N+1].t=="?"));)i[s].v+=i[N].v,i[N]={v:"",t:";"},++N;E+=i[s].v,s=N-1;break;case"G":i[s].t="t",i[s].v=hx(t,r);break}var P="",R,O;if(E.length>0){E.charCodeAt(0)==40?(R=t<0&&E.charCodeAt(0)===45?-t:t,O=Eh("n",E,R)):(R=t<0&&n>1?-t:t,O=Eh("n",E,R),R<0&&i[0]&&i[0].t=="t"&&(O=O.substr(1),i[0].v="-"+i[0].v)),N=O.length-1;var D=i.length;for(s=0;s<i.length;++s)if(i[s]!=null&&i[s].t!="t"&&i[s].v.indexOf(".")>-1){D=s;break}var L=i.length;if(D===i.length&&O.indexOf("E")===-1){for(s=i.length-1;s>=0;--s)i[s]==null||"n?".indexOf(i[s].t)===-1||(N>=i[s].v.length-1?(N-=i[s].v.length,i[s].v=O.substr(N+1,i[s].v.length)):N<0?i[s].v="":(i[s].v=O.substr(0,N+1),N=-1),i[s].t="t",L=s);N>=0&&L<i.length&&(i[L].v=O.substr(0,N+1)+i[L].v)}else if(D!==i.length&&O.indexOf("E")===-1){for(N=O.indexOf(".")-1,s=D;s>=0;--s)if(!(i[s]==null||"n?".indexOf(i[s].t)===-1)){for(d=i[s].v.indexOf(".")>-1&&s===D?i[s].v.indexOf(".")-1:i[s].v.length-1,P=i[s].v.substr(d+1);d>=0;--d)N>=0&&(i[s].v.charAt(d)==="0"||i[s].v.charAt(d)==="#")&&(P=O.charAt(N--)+P);i[s].v=P,i[s].t="t",L=s}for(N>=0&&L<i.length&&(i[L].v=O.substr(0,N+1)+i[L].v),N=O.indexOf(".")+1,s=D;s<i.length;++s)if(!(i[s]==null||"n?(".indexOf(i[s].t)===-1&&s!==D)){for(d=i[s].v.indexOf(".")>-1&&s===D?i[s].v.indexOf(".")+1:0,P=i[s].v.substr(0,d);d<i[s].v.length;++d)N<O.length&&(P+=O.charAt(N++));i[s].v=P,i[s].t="t",L=s}}}for(s=0;s<i.length;++s)i[s]!=null&&"n?".indexOf(i[s].t)>-1&&(R=n>1&&t<0&&s>0&&i[s-1].v==="-"?-t:t,i[s].v=Eh(i[s].t,i[s].v,R),i[s].t="t");var B="";for(s=0;s!==i.length;++s)i[s]!=null&&(B+=i[s].v);return B}var HZ=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function WZ(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function nxt(e,t){var r=txt(e),n=r.length,i=r[n-1].indexOf("@");if(n<4&&i>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||i>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=i>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=i>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=i>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var a=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,a];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var s=r[0].match(HZ),o=r[1].match(HZ);return WZ(t,s)?[n,r[0]]:WZ(t,o)?[n,r[1]]:[n,r[s!=null&&o!=null?2:1]]}return[n,a]}function fu(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Pr)[e],n==null&&(n=r.table&&r.table[UZ[e]]||Pr[UZ[e]]),n==null&&(n=Bgt[e]||"General");break}if(iO(n,0))return hx(t,r);t instanceof Date&&(t=kxe(t,r.date1904));var i=nxt(n,t);if(iO(i[1]))return hx(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return rxt(i[1],t,r,i[0])}function Ch(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Pr[r]==null){t<0&&(t=r);continue}if(Pr[r]==e){t=r;break}}t<0&&(t=391)}return Pr[t]=e,t}function mP(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Ch(e[t],t)}function Eb(){Pr=Lgt()}var ixt={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},jxe=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function axt(e){var t=typeof e=="number"?Pr[e]:e;return t=t.replace(jxe,"(\\d+)"),new RegExp("^"+t+"$")}function sxt(e,t,r){var n=-1,i=-1,a=-1,s=-1,o=-1,l=-1;(t.match(jxe)||[]).forEach(function(f,p){var m=parseInt(r[p+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=m;break;case"d":a=m;break;case"h":s=m;break;case"s":l=m;break;case"m":s>=0?o=m:i=m;break}}),l>=0&&o==-1&&i>=0&&(o=i,i=-1);var c=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var d=("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return s==-1&&o==-1&&l==-1?c:n==-1&&i==-1&&a==-1?d:c+"T"+d}var oxt=function(){var e={};e.version="1.2.0";function t(){for(var O=0,D=new Array(256),L=0;L!=256;++L)O=L,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,D[L]=O;return typeof Int32Array<"u"?new Int32Array(D):D}var r=t();function n(O){var D=0,L=0,B=0,z=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(B=0;B!=256;++B)z[B]=O[B];for(B=0;B!=256;++B)for(L=O[B],D=256+B;D<4096;D+=256)L=z[D]=L>>>8^O[L&255];var H=[];for(B=1;B!=16;++B)H[B-1]=typeof Int32Array<"u"?z.subarray(B*256,B*256+256):z.slice(B*256,B*256+256);return H}var i=n(r),a=i[0],s=i[1],o=i[2],l=i[3],c=i[4],d=i[5],f=i[6],p=i[7],m=i[8],x=i[9],v=i[10],b=i[11],w=i[12],k=i[13],E=i[14];function N(O,D){for(var L=D^-1,B=0,z=O.length;B<z;)L=L>>>8^r[(L^O.charCodeAt(B++))&255];return~L}function P(O,D){for(var L=D^-1,B=O.length-15,z=0;z<B;)L=E[O[z++]^L&255]^k[O[z++]^L>>8&255]^w[O[z++]^L>>16&255]^b[O[z++]^L>>>24]^v[O[z++]]^x[O[z++]]^m[O[z++]]^p[O[z++]]^f[O[z++]]^d[O[z++]]^c[O[z++]]^l[O[z++]]^o[O[z++]]^s[O[z++]]^a[O[z++]]^r[O[z++]];for(B+=15;z<B;)L=L>>>8^r[(L^O[z++])&255];return~L}function R(O,D){for(var L=D^-1,B=0,z=O.length,H=0,te=0;B<z;)H=O.charCodeAt(B++),H<128?L=L>>>8^r[(L^H)&255]:H<2048?(L=L>>>8^r[(L^(192|H>>6&31))&255],L=L>>>8^r[(L^(128|H&63))&255]):H>=55296&&H<57344?(H=(H&1023)+64,te=O.charCodeAt(B++)&1023,L=L>>>8^r[(L^(240|H>>8&7))&255],L=L>>>8^r[(L^(128|H>>2&63))&255],L=L>>>8^r[(L^(128|te>>6&15|(H&3)<<4))&255],L=L>>>8^r[(L^(128|te&63))&255]):(L=L>>>8^r[(L^(224|H>>12&15))&255],L=L>>>8^r[(L^(128|H>>6&63))&255],L=L>>>8^r[(L^(128|H&63))&255]);return~L}return e.table=r,e.bstr=N,e.buf=P,e.str=R,e}(),vr=function(){var t={};t.version="1.2.1";function r(de,he){for(var we=de.split("/"),_e=he.split("/"),pe=0,ge=0,Fe=Math.min(we.length,_e.length);pe<Fe;++pe){if(ge=we[pe].length-_e[pe].length)return ge;if(we[pe]!=_e[pe])return we[pe]<_e[pe]?-1:1}return we.length-_e.length}function n(de){if(de.charAt(de.length-1)=="/")return de.slice(0,-1).indexOf("/")===-1?de:n(de.slice(0,-1));var he=de.lastIndexOf("/");return he===-1?de:de.slice(0,he+1)}function i(de){if(de.charAt(de.length-1)=="/")return i(de.slice(0,-1));var he=de.lastIndexOf("/");return he===-1?de:de.slice(he+1)}function a(de,he){typeof he=="string"&&(he=new Date(he));var we=he.getHours();we=we<<6|he.getMinutes(),we=we<<5|he.getSeconds()>>>1,de.write_shift(2,we);var _e=he.getFullYear()-1980;_e=_e<<4|he.getMonth()+1,_e=_e<<5|he.getDate(),de.write_shift(2,_e)}function s(de){var he=de.read_shift(2)&65535,we=de.read_shift(2)&65535,_e=new Date,pe=we&31;we>>>=5;var ge=we&15;we>>>=4,_e.setMilliseconds(0),_e.setFullYear(we+1980),_e.setMonth(ge-1),_e.setDate(pe);var Fe=he&31;he>>>=5;var it=he&63;return he>>>=6,_e.setHours(he),_e.setMinutes(it),_e.setSeconds(Fe<<1),_e}function o(de){Ps(de,0);for(var he={},we=0;de.l<=de.length-4;){var _e=de.read_shift(2),pe=de.read_shift(2),ge=de.l+pe,Fe={};switch(_e){case 21589:we=de.read_shift(1),we&1&&(Fe.mtime=de.read_shift(4)),pe>5&&(we&2&&(Fe.atime=de.read_shift(4)),we&4&&(Fe.ctime=de.read_shift(4))),Fe.mtime&&(Fe.mt=new Date(Fe.mtime*1e3));break}de.l=ge,he[_e]=Fe}return he}var l;function c(){return l||(l={})}function d(de,he){if(de[0]==80&&de[1]==75)return wn(de,he);if((de[0]|32)==109&&(de[1]|32)==105)return Ut(de,he);if(de.length<512)throw new Error("CFB file size "+de.length+" < 512");var we=3,_e=512,pe=0,ge=0,Fe=0,it=0,Ge=0,Ye=[],Ze=de.slice(0,512);Ps(Ze,0);var wt=f(Ze);switch(we=wt[0],we){case 3:_e=512;break;case 4:_e=4096;break;case 0:if(wt[1]==0)return wn(de,he);default:throw new Error("Major Version: Expected 3 or 4 saw "+we)}_e!==512&&(Ze=de.slice(0,_e),Ps(Ze,28));var At=de.slice(0,_e);p(Ze,we);var dt=Ze.read_shift(4,"i");if(we===3&&dt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+dt);Ze.l+=4,Fe=Ze.read_shift(4,"i"),Ze.l+=4,Ze.chk("00100000","Mini Stream Cutoff Size: "),it=Ze.read_shift(4,"i"),pe=Ze.read_shift(4,"i"),Ge=Ze.read_shift(4,"i"),ge=Ze.read_shift(4,"i");for(var St=-1,Ot=0;Ot<109&&(St=Ze.read_shift(4,"i"),!(St<0));++Ot)Ye[Ot]=St;var Kt=m(de,_e);b(Ge,ge,Kt,_e,Ye);var at=k(Kt,Fe,Ye,_e);at[Fe].name="!Directory",pe>0&&it!==te&&(at[it].name="!MiniFAT"),at[Ye[0]].name="!FAT",at.fat_addrs=Ye,at.ssz=_e;var Vn={},$r=[],wo=[],gd=[];E(Fe,at,Kt,$r,pe,Vn,wo,it),x(wo,gd,$r),$r.shift();var gn={FileIndex:wo,FullPaths:gd};return he&&he.raw&&(gn.raw={header:At,sectors:Kt}),gn}function f(de){if(de[de.l]==80&&de[de.l+1]==75)return[0,0];de.chk(Y,"Header Signature: "),de.l+=16;var he=de.read_shift(2,"u");return[de.read_shift(2,"u"),he]}function p(de,he){var we=9;switch(de.l+=2,we=de.read_shift(2)){case 9:if(he!=3)throw new Error("Sector Shift: Expected 9 saw "+we);break;case 12:if(he!=4)throw new Error("Sector Shift: Expected 12 saw "+we);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+we)}de.chk("0600","Mini Sector Shift: "),de.chk("000000000000","Reserved: ")}function m(de,he){for(var we=Math.ceil(de.length/he)-1,_e=[],pe=1;pe<we;++pe)_e[pe-1]=de.slice(pe*he,(pe+1)*he);return _e[we-1]=de.slice(we*he),_e}function x(de,he,we){for(var _e=0,pe=0,ge=0,Fe=0,it=0,Ge=we.length,Ye=[],Ze=[];_e<Ge;++_e)Ye[_e]=Ze[_e]=_e,he[_e]=we[_e];for(;it<Ze.length;++it)_e=Ze[it],pe=de[_e].L,ge=de[_e].R,Fe=de[_e].C,Ye[_e]===_e&&(pe!==-1&&Ye[pe]!==pe&&(Ye[_e]=Ye[pe]),ge!==-1&&Ye[ge]!==ge&&(Ye[_e]=Ye[ge])),Fe!==-1&&(Ye[Fe]=_e),pe!==-1&&_e!=Ye[_e]&&(Ye[pe]=Ye[_e],Ze.lastIndexOf(pe)<it&&Ze.push(pe)),ge!==-1&&_e!=Ye[_e]&&(Ye[ge]=Ye[_e],Ze.lastIndexOf(ge)<it&&Ze.push(ge));for(_e=1;_e<Ge;++_e)Ye[_e]===_e&&(ge!==-1&&Ye[ge]!==ge?Ye[_e]=Ye[ge]:pe!==-1&&Ye[pe]!==pe&&(Ye[_e]=Ye[pe]));for(_e=1;_e<Ge;++_e)if(de[_e].type!==0){if(it=_e,it!=Ye[it])do it=Ye[it],he[_e]=he[it]+"/"+he[_e];while(it!==0&&Ye[it]!==-1&&it!=Ye[it]);Ye[_e]=-1}for(he[0]+="/",_e=1;_e<Ge;++_e)de[_e].type!==2&&(he[_e]+="/")}function v(de,he,we){for(var _e=de.start,pe=de.size,ge=[],Fe=_e;we&&pe>0&&Fe>=0;)ge.push(he.slice(Fe*H,Fe*H+H)),pe-=H,Fe=Wm(we,Fe*4);return ge.length===0?pt(0):fs(ge).slice(0,de.size)}function b(de,he,we,_e,pe){var ge=te;if(de===te){if(he!==0)throw new Error("DIFAT chain shorter than expected")}else if(de!==-1){var Fe=we[de],it=(_e>>>2)-1;if(!Fe)return;for(var Ge=0;Ge<it&&(ge=Wm(Fe,Ge*4))!==te;++Ge)pe.push(ge);b(Wm(Fe,_e-4),he-1,we,_e,pe)}}function w(de,he,we,_e,pe){var ge=[],Fe=[];pe||(pe=[]);var it=_e-1,Ge=0,Ye=0;for(Ge=he;Ge>=0;){pe[Ge]=!0,ge[ge.length]=Ge,Fe.push(de[Ge]);var Ze=we[Math.floor(Ge*4/_e)];if(Ye=Ge*4&it,_e<4+Ye)throw new Error("FAT boundary crossed: "+Ge+" 4 "+_e);if(!de[Ze])break;Ge=Wm(de[Ze],Ye)}return{nodes:ge,data:ree([Fe])}}function k(de,he,we,_e){var pe=de.length,ge=[],Fe=[],it=[],Ge=[],Ye=_e-1,Ze=0,wt=0,At=0,dt=0;for(Ze=0;Ze<pe;++Ze)if(it=[],At=Ze+he,At>=pe&&(At-=pe),!Fe[At]){Ge=[];var St=[];for(wt=At;wt>=0;){St[wt]=!0,Fe[wt]=!0,it[it.length]=wt,Ge.push(de[wt]);var Ot=we[Math.floor(wt*4/_e)];if(dt=wt*4&Ye,_e<4+dt)throw new Error("FAT boundary crossed: "+wt+" 4 "+_e);if(!de[Ot]||(wt=Wm(de[Ot],dt),St[wt]))break}ge[At]={nodes:it,data:ree([Ge])}}return ge}function E(de,he,we,_e,pe,ge,Fe,it){for(var Ge=0,Ye=_e.length?2:0,Ze=he[de].data,wt=0,At=0,dt;wt<Ze.length;wt+=128){var St=Ze.slice(wt,wt+128);Ps(St,64),At=St.read_shift(2),dt=v$(St,0,At-Ye),_e.push(dt);var Ot={name:dt,type:St.read_shift(1),color:St.read_shift(1),L:St.read_shift(4,"i"),R:St.read_shift(4,"i"),C:St.read_shift(4,"i"),clsid:St.read_shift(16),state:St.read_shift(4,"i"),start:0,size:0},Kt=St.read_shift(2)+St.read_shift(2)+St.read_shift(2)+St.read_shift(2);Kt!==0&&(Ot.ct=N(St,St.l-8));var at=St.read_shift(2)+St.read_shift(2)+St.read_shift(2)+St.read_shift(2);at!==0&&(Ot.mt=N(St,St.l-8)),Ot.start=St.read_shift(4,"i"),Ot.size=St.read_shift(4,"i"),Ot.size<0&&Ot.start<0&&(Ot.size=Ot.type=0,Ot.start=te,Ot.name=""),Ot.type===5?(Ge=Ot.start,pe>0&&Ge!==te&&(he[Ge].name="!StreamData")):Ot.size>=4096?(Ot.storage="fat",he[Ot.start]===void 0&&(he[Ot.start]=w(we,Ot.start,he.fat_addrs,he.ssz)),he[Ot.start].name=Ot.name,Ot.content=he[Ot.start].data.slice(0,Ot.size)):(Ot.storage="minifat",Ot.size<0?Ot.size=0:Ge!==te&&Ot.start!==te&&he[Ge]&&(Ot.content=v(Ot,he[Ge].data,(he[it]||{}).data))),Ot.content&&Ps(Ot.content,0),ge[dt]=Ot,Fe.push(Ot)}}function N(de,he){return new Date((Gl(de,he+4)/1e7*Math.pow(2,32)+Gl(de,he)/1e7-11644473600)*1e3)}function P(de,he){return c(),d(l.readFileSync(de),he)}function R(de,he){var we=he&&he.type;switch(we||pn&&Buffer.isBuffer(de)&&(we="buffer"),we||"base64"){case"file":return P(de,he);case"base64":return d(Yl(dc(de)),he);case"binary":return d(Yl(de),he)}return d(de,he)}function O(de,he){var we=he||{},_e=we.root||"Root Entry";if(de.FullPaths||(de.FullPaths=[]),de.FileIndex||(de.FileIndex=[]),de.FullPaths.length!==de.FileIndex.length)throw new Error("inconsistent CFB structure");de.FullPaths.length===0&&(de.FullPaths[0]=_e+"/",de.FileIndex[0]={name:_e,type:5}),we.CLSID&&(de.FileIndex[0].clsid=we.CLSID),D(de)}function D(de){var he="Sh33tJ5";if(!vr.find(de,"/"+he)){var we=pt(4);we[0]=55,we[1]=we[3]=50,we[2]=54,de.FileIndex.push({name:he,type:2,content:we,size:4,L:69,R:69,C:69}),de.FullPaths.push(de.FullPaths[0]+he),L(de)}}function L(de,he){O(de);for(var we=!1,_e=!1,pe=de.FullPaths.length-1;pe>=0;--pe){var ge=de.FileIndex[pe];switch(ge.type){case 0:_e?we=!0:(de.FileIndex.pop(),de.FullPaths.pop());break;case 1:case 2:case 5:_e=!0,isNaN(ge.R*ge.L*ge.C)&&(we=!0),ge.R>-1&&ge.L>-1&&ge.R==ge.L&&(we=!0);break;default:we=!0;break}}if(!(!we&&!he)){var Fe=new Date(1987,1,19),it=0,Ge=Object.create?Object.create(null):{},Ye=[];for(pe=0;pe<de.FullPaths.length;++pe)Ge[de.FullPaths[pe]]=!0,de.FileIndex[pe].type!==0&&Ye.push([de.FullPaths[pe],de.FileIndex[pe]]);for(pe=0;pe<Ye.length;++pe){var Ze=n(Ye[pe][0]);_e=Ge[Ze],_e||(Ye.push([Ze,{name:i(Ze).replace("/",""),type:1,clsid:Z,ct:Fe,mt:Fe,content:null}]),Ge[Ze]=!0)}for(Ye.sort(function(dt,St){return r(dt[0],St[0])}),de.FullPaths=[],de.FileIndex=[],pe=0;pe<Ye.length;++pe)de.FullPaths[pe]=Ye[pe][0],de.FileIndex[pe]=Ye[pe][1];for(pe=0;pe<Ye.length;++pe){var wt=de.FileIndex[pe],At=de.FullPaths[pe];if(wt.name=i(At).replace("/",""),wt.L=wt.R=wt.C=-(wt.color=1),wt.size=wt.content?wt.content.length:0,wt.start=0,wt.clsid=wt.clsid||Z,pe===0)wt.C=Ye.length>1?1:-1,wt.size=0,wt.type=5;else if(At.slice(-1)=="/"){for(it=pe+1;it<Ye.length&&n(de.FullPaths[it])!=At;++it);for(wt.C=it>=Ye.length?-1:it,it=pe+1;it<Ye.length&&n(de.FullPaths[it])!=n(At);++it);wt.R=it>=Ye.length?-1:it,wt.type=1}else n(de.FullPaths[pe+1]||"")==n(At)&&(wt.R=pe+1),wt.type=2}}}function B(de,he){var we=he||{};if(we.fileType=="mad")return ir(de,we);switch(L(de),we.fileType){case"zip":return Vi(de,we)}var _e=function(dt){for(var St=0,Ot=0,Kt=0;Kt<dt.FileIndex.length;++Kt){var at=dt.FileIndex[Kt];if(at.content){var Vn=at.content.length;Vn>0&&(Vn<4096?St+=Vn+63>>6:Ot+=Vn+511>>9)}}for(var $r=dt.FullPaths.length+3>>2,wo=St+7>>3,gd=St+127>>7,gn=wo+Ot+$r+gd,en=gn+127>>7,tn=en<=109?0:Math.ceil((en-109)/127);gn+en+tn+127>>7>en;)tn=++en<=109?0:Math.ceil((en-109)/127);var So=[1,tn,en,gd,$r,Ot,St,0];return dt.FileIndex[0].size=St<<6,So[7]=(dt.FileIndex[0].start=So[0]+So[1]+So[2]+So[3]+So[4]+So[5])+(So[6]+7>>3),So}(de),pe=pt(_e[7]<<9),ge=0,Fe=0;{for(ge=0;ge<8;++ge)pe.write_shift(1,W[ge]);for(ge=0;ge<8;++ge)pe.write_shift(2,0);for(pe.write_shift(2,62),pe.write_shift(2,3),pe.write_shift(2,65534),pe.write_shift(2,9),pe.write_shift(2,6),ge=0;ge<3;++ge)pe.write_shift(2,0);for(pe.write_shift(4,0),pe.write_shift(4,_e[2]),pe.write_shift(4,_e[0]+_e[1]+_e[2]+_e[3]-1),pe.write_shift(4,0),pe.write_shift(4,4096),pe.write_shift(4,_e[3]?_e[0]+_e[1]+_e[2]-1:te),pe.write_shift(4,_e[3]),pe.write_shift(-4,_e[1]?_e[0]-1:te),pe.write_shift(4,_e[1]),ge=0;ge<109;++ge)pe.write_shift(-4,ge<_e[2]?_e[1]+ge:-1)}if(_e[1])for(Fe=0;Fe<_e[1];++Fe){for(;ge<236+Fe*127;++ge)pe.write_shift(-4,ge<_e[2]?_e[1]+ge:-1);pe.write_shift(-4,Fe===_e[1]-1?te:Fe+1)}var it=function(dt){for(Fe+=dt;ge<Fe-1;++ge)pe.write_shift(-4,ge+1);dt&&(++ge,pe.write_shift(-4,te))};for(Fe=ge=0,Fe+=_e[1];ge<Fe;++ge)pe.write_shift(-4,re.DIFSECT);for(Fe+=_e[2];ge<Fe;++ge)pe.write_shift(-4,re.FATSECT);it(_e[3]),it(_e[4]);for(var Ge=0,Ye=0,Ze=de.FileIndex[0];Ge<de.FileIndex.length;++Ge)Ze=de.FileIndex[Ge],Ze.content&&(Ye=Ze.content.length,!(Ye<4096)&&(Ze.start=Fe,it(Ye+511>>9)));for(it(_e[6]+7>>3);pe.l&511;)pe.write_shift(-4,re.ENDOFCHAIN);for(Fe=ge=0,Ge=0;Ge<de.FileIndex.length;++Ge)Ze=de.FileIndex[Ge],Ze.content&&(Ye=Ze.content.length,!(!Ye||Ye>=4096)&&(Ze.start=Fe,it(Ye+63>>6)));for(;pe.l&511;)pe.write_shift(-4,re.ENDOFCHAIN);for(ge=0;ge<_e[4]<<2;++ge){var wt=de.FullPaths[ge];if(!wt||wt.length===0){for(Ge=0;Ge<17;++Ge)pe.write_shift(4,0);for(Ge=0;Ge<3;++Ge)pe.write_shift(4,-1);for(Ge=0;Ge<12;++Ge)pe.write_shift(4,0);continue}Ze=de.FileIndex[ge],ge===0&&(Ze.start=Ze.size?Ze.start-1:te);var At=ge===0&&we.root||Ze.name;if(Ye=2*(At.length+1),pe.write_shift(64,At,"utf16le"),pe.write_shift(2,Ye),pe.write_shift(1,Ze.type),pe.write_shift(1,Ze.color),pe.write_shift(-4,Ze.L),pe.write_shift(-4,Ze.R),pe.write_shift(-4,Ze.C),Ze.clsid)pe.write_shift(16,Ze.clsid,"hex");else for(Ge=0;Ge<4;++Ge)pe.write_shift(4,0);pe.write_shift(4,Ze.state||0),pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(4,Ze.start),pe.write_shift(4,Ze.size),pe.write_shift(4,0)}for(ge=1;ge<de.FileIndex.length;++ge)if(Ze=de.FileIndex[ge],Ze.size>=4096)if(pe.l=Ze.start+1<<9,pn&&Buffer.isBuffer(Ze.content))Ze.content.copy(pe,pe.l,0,Ze.size),pe.l+=Ze.size+511&-512;else{for(Ge=0;Ge<Ze.size;++Ge)pe.write_shift(1,Ze.content[Ge]);for(;Ge&511;++Ge)pe.write_shift(1,0)}for(ge=1;ge<de.FileIndex.length;++ge)if(Ze=de.FileIndex[ge],Ze.size>0&&Ze.size<4096)if(pn&&Buffer.isBuffer(Ze.content))Ze.content.copy(pe,pe.l,0,Ze.size),pe.l+=Ze.size+63&-64;else{for(Ge=0;Ge<Ze.size;++Ge)pe.write_shift(1,Ze.content[Ge]);for(;Ge&63;++Ge)pe.write_shift(1,0)}if(pn)pe.l=pe.length;else for(;pe.l<pe.length;)pe.write_shift(1,0);return pe}function z(de,he){var we=de.FullPaths.map(function(Ge){return Ge.toUpperCase()}),_e=we.map(function(Ge){var Ye=Ge.split("/");return Ye[Ye.length-(Ge.slice(-1)=="/"?2:1)]}),pe=!1;he.charCodeAt(0)===47?(pe=!0,he=we[0].slice(0,-1)+he):pe=he.indexOf("/")!==-1;var ge=he.toUpperCase(),Fe=pe===!0?we.indexOf(ge):_e.indexOf(ge);if(Fe!==-1)return de.FileIndex[Fe];var it=!ge.match(Zw);for(ge=ge.replace(Ho,""),it&&(ge=ge.replace(Zw,"!")),Fe=0;Fe<we.length;++Fe)if((it?we[Fe].replace(Zw,"!"):we[Fe]).replace(Ho,"")==ge||(it?_e[Fe].replace(Zw,"!"):_e[Fe]).replace(Ho,"")==ge)return de.FileIndex[Fe];return null}var H=64,te=-2,Y="d0cf11e0a1b11ae1",W=[208,207,17,224,161,177,26,225],Z="00000000000000000000000000000000",re={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:te,FREESECT:-1,HEADER_SIGNATURE:Y,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Z,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function X(de,he,we){c();var _e=B(de,we);l.writeFileSync(he,_e)}function Q(de){for(var he=new Array(de.length),we=0;we<de.length;++we)he[we]=String.fromCharCode(de[we]);return he.join("")}function fe(de,he){var we=B(de,he);switch(he&&he.type||"buffer"){case"file":return c(),l.writeFileSync(he.filename,we),we;case"binary":return typeof we=="string"?we:Q(we);case"base64":return qS(typeof we=="string"?we:Q(we));case"buffer":if(pn)return Buffer.isBuffer(we)?we:ap(we);case"array":return typeof we=="string"?Yl(we):we}return we}var ye;function J(de){try{var he=de.InflateRaw,we=new he;if(we._processChunk(new Uint8Array([3,0]),we._finishFlushFlag),we.bytesRead)ye=de;else throw new Error("zlib does not expose bytesRead")}catch(_e){console.error("cannot use native zlib: "+(_e.message||_e))}}function ce(de,he){if(!ye)return Pt(de,he);var we=ye.InflateRaw,_e=new we,pe=_e._processChunk(de.slice(de.l),_e._finishFlushFlag);return de.l+=_e.bytesRead,pe}function V(de){return ye?ye.deflateRawSync(de):Xe(de)}var G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ie=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Ee=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ne(de){var he=(de<<1|de<<11)&139536|(de<<5|de<<15)&558144;return(he>>16|he>>8|he)&255}for(var ae=typeof Uint8Array<"u",me=ae?new Uint8Array(256):[],ve=0;ve<256;++ve)me[ve]=ne(ve);function q(de,he){var we=me[de&255];return he<=8?we>>>8-he:(we=we<<8|me[de>>8&255],he<=16?we>>>16-he:(we=we<<8|me[de>>16&255],we>>>24-he))}function Ne(de,he){var we=he&7,_e=he>>>3;return(de[_e]|(we<=6?0:de[_e+1]<<8))>>>we&3}function Pe(de,he){var we=he&7,_e=he>>>3;return(de[_e]|(we<=5?0:de[_e+1]<<8))>>>we&7}function ze(de,he){var we=he&7,_e=he>>>3;return(de[_e]|(we<=4?0:de[_e+1]<<8))>>>we&15}function De(de,he){var we=he&7,_e=he>>>3;return(de[_e]|(we<=3?0:de[_e+1]<<8))>>>we&31}function $e(de,he){var we=he&7,_e=he>>>3;return(de[_e]|(we<=1?0:de[_e+1]<<8))>>>we&127}function et(de,he,we){var _e=he&7,pe=he>>>3,ge=(1<<we)-1,Fe=de[pe]>>>_e;return we<8-_e||(Fe|=de[pe+1]<<8-_e,we<16-_e)||(Fe|=de[pe+2]<<16-_e,we<24-_e)||(Fe|=de[pe+3]<<24-_e),Fe&ge}function ut(de,he,we){var _e=he&7,pe=he>>>3;return _e<=5?de[pe]|=(we&7)<<_e:(de[pe]|=we<<_e&255,de[pe+1]=(we&7)>>8-_e),he+3}function kt(de,he,we){var _e=he&7,pe=he>>>3;return we=(we&1)<<_e,de[pe]|=we,he+1}function ht(de,he,we){var _e=he&7,pe=he>>>3;return we<<=_e,de[pe]|=we&255,we>>>=8,de[pe+1]=we,he+8}function Rr(de,he,we){var _e=he&7,pe=he>>>3;return we<<=_e,de[pe]|=we&255,we>>>=8,de[pe+1]=we&255,de[pe+2]=we>>>8,he+16}function er(de,he){var we=de.length,_e=2*we>he?2*we:he+5,pe=0;if(we>=he)return de;if(pn){var ge=FZ(_e);if(de.copy)de.copy(ge);else for(;pe<de.length;++pe)ge[pe]=de[pe];return ge}else if(ae){var Fe=new Uint8Array(_e);if(Fe.set)Fe.set(de);else for(;pe<we;++pe)Fe[pe]=de[pe];return Fe}return de.length=_e,de}function ct(de){for(var he=new Array(de),we=0;we<de;++we)he[we]=0;return he}function qt(de,he,we){var _e=1,pe=0,ge=0,Fe=0,it=0,Ge=de.length,Ye=ae?new Uint16Array(32):ct(32);for(ge=0;ge<32;++ge)Ye[ge]=0;for(ge=Ge;ge<we;++ge)de[ge]=0;Ge=de.length;var Ze=ae?new Uint16Array(Ge):ct(Ge);for(ge=0;ge<Ge;++ge)Ye[pe=de[ge]]++,_e<pe&&(_e=pe),Ze[ge]=0;for(Ye[0]=0,ge=1;ge<=_e;++ge)Ye[ge+16]=it=it+Ye[ge-1]<<1;for(ge=0;ge<Ge;++ge)it=de[ge],it!=0&&(Ze[ge]=Ye[it+16]++);var wt=0;for(ge=0;ge<Ge;++ge)if(wt=de[ge],wt!=0)for(it=q(Ze[ge],_e)>>_e-wt,Fe=(1<<_e+4-wt)-1;Fe>=0;--Fe)he[it|Fe<<wt]=wt&15|ge<<4;return _e}var Lt=ae?new Uint16Array(512):ct(512),dr=ae?new Uint16Array(32):ct(32);if(!ae){for(var Gt=0;Gt<512;++Gt)Lt[Gt]=0;for(Gt=0;Gt<32;++Gt)dr[Gt]=0}(function(){for(var de=[],he=0;he<32;he++)de.push(5);qt(de,dr,32);var we=[];for(he=0;he<=143;he++)we.push(8);for(;he<=255;he++)we.push(9);for(;he<=279;he++)we.push(7);for(;he<=287;he++)we.push(8);qt(we,Lt,288)})();var qe=function(){for(var he=ae?new Uint8Array(32768):[],we=0,_e=0;we<Ee.length-1;++we)for(;_e<Ee[we+1];++_e)he[_e]=we;for(;_e<32768;++_e)he[_e]=29;var pe=ae?new Uint8Array(259):[];for(we=0,_e=0;we<ie.length-1;++we)for(;_e<ie[we+1];++_e)pe[_e]=we;function ge(it,Ge){for(var Ye=0;Ye<it.length;){var Ze=Math.min(65535,it.length-Ye),wt=Ye+Ze==it.length;for(Ge.write_shift(1,+wt),Ge.write_shift(2,Ze),Ge.write_shift(2,~Ze&65535);Ze-- >0;)Ge[Ge.l++]=it[Ye++]}return Ge.l}function Fe(it,Ge){for(var Ye=0,Ze=0,wt=ae?new Uint16Array(32768):[];Ze<it.length;){var At=Math.min(65535,it.length-Ze);if(At<10){for(Ye=ut(Ge,Ye,+(Ze+At==it.length)),Ye&7&&(Ye+=8-(Ye&7)),Ge.l=Ye/8|0,Ge.write_shift(2,At),Ge.write_shift(2,~At&65535);At-- >0;)Ge[Ge.l++]=it[Ze++];Ye=Ge.l*8;continue}Ye=ut(Ge,Ye,+(Ze+At==it.length)+2);for(var dt=0;At-- >0;){var St=it[Ze];dt=(dt<<5^St)&32767;var Ot=-1,Kt=0;if((Ot=wt[dt])&&(Ot|=Ze&-32768,Ot>Ze&&(Ot-=32768),Ot<Ze))for(;it[Ot+Kt]==it[Ze+Kt]&&Kt<250;)++Kt;if(Kt>2){St=pe[Kt],St<=22?Ye=ht(Ge,Ye,me[St+1]>>1)-1:(ht(Ge,Ye,3),Ye+=5,ht(Ge,Ye,me[St-23]>>5),Ye+=3);var at=St<8?0:St-4>>2;at>0&&(Rr(Ge,Ye,Kt-ie[St]),Ye+=at),St=he[Ze-Ot],Ye=ht(Ge,Ye,me[St]>>3),Ye-=3;var Vn=St<4?0:St-2>>1;Vn>0&&(Rr(Ge,Ye,Ze-Ot-Ee[St]),Ye+=Vn);for(var $r=0;$r<Kt;++$r)wt[dt]=Ze&32767,dt=(dt<<5^it[Ze])&32767,++Ze;At-=Kt-1}else St<=143?St=St+48:Ye=kt(Ge,Ye,1),Ye=ht(Ge,Ye,me[St]),wt[dt]=Ze&32767,++Ze}Ye=ht(Ge,Ye,0)-1}return Ge.l=(Ye+7)/8|0,Ge.l}return function(Ge,Ye){return Ge.length<8?ge(Ge,Ye):Fe(Ge,Ye)}}();function Xe(de){var he=pt(50+Math.floor(de.length*1.1)),we=qe(de,he);return he.slice(0,we)}var Te=ae?new Uint16Array(32768):ct(32768),He=ae?new Uint16Array(32768):ct(32768),je=ae?new Uint16Array(128):ct(128),Ce=1,ot=1;function xt(de,he){var we=De(de,he)+257;he+=5;var _e=De(de,he)+1;he+=5;var pe=ze(de,he)+4;he+=4;for(var ge=0,Fe=ae?new Uint8Array(19):ct(19),it=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ge=1,Ye=ae?new Uint8Array(8):ct(8),Ze=ae?new Uint8Array(8):ct(8),wt=Fe.length,At=0;At<pe;++At)Fe[G[At]]=ge=Pe(de,he),Ge<ge&&(Ge=ge),Ye[ge]++,he+=3;var dt=0;for(Ye[0]=0,At=1;At<=Ge;++At)Ze[At]=dt=dt+Ye[At-1]<<1;for(At=0;At<wt;++At)(dt=Fe[At])!=0&&(it[At]=Ze[dt]++);var St=0;for(At=0;At<wt;++At)if(St=Fe[At],St!=0){dt=me[it[At]]>>8-St;for(var Ot=(1<<7-St)-1;Ot>=0;--Ot)je[dt|Ot<<St]=St&7|At<<3}var Kt=[];for(Ge=1;Kt.length<we+_e;)switch(dt=je[$e(de,he)],he+=dt&7,dt>>>=3){case 16:for(ge=3+Ne(de,he),he+=2,dt=Kt[Kt.length-1];ge-- >0;)Kt.push(dt);break;case 17:for(ge=3+Pe(de,he),he+=3;ge-- >0;)Kt.push(0);break;case 18:for(ge=11+$e(de,he),he+=7;ge-- >0;)Kt.push(0);break;default:Kt.push(dt),Ge<dt&&(Ge=dt);break}var at=Kt.slice(0,we),Vn=Kt.slice(we);for(At=we;At<286;++At)at[At]=0;for(At=_e;At<30;++At)Vn[At]=0;return Ce=qt(at,Te,286),ot=qt(Vn,He,30),he}function Dt(de,he){if(de[0]==3&&!(de[1]&3))return[D0(he),2];for(var we=0,_e=0,pe=FZ(he||1<<18),ge=0,Fe=pe.length>>>0,it=0,Ge=0;!(_e&1);){if(_e=Pe(de,we),we+=3,_e>>>1)_e>>1==1?(it=9,Ge=5):(we=xt(de,we),it=Ce,Ge=ot);else{we&7&&(we+=8-(we&7));var Ye=de[we>>>3]|de[(we>>>3)+1]<<8;if(we+=32,Ye>0)for(!he&&Fe<ge+Ye&&(pe=er(pe,ge+Ye),Fe=pe.length);Ye-- >0;)pe[ge++]=de[we>>>3],we+=8;continue}for(;;){!he&&Fe<ge+32767&&(pe=er(pe,ge+32767),Fe=pe.length);var Ze=et(de,we,it),wt=_e>>>1==1?Lt[Ze]:Te[Ze];if(we+=wt&15,wt>>>=4,!(wt>>>8&255))pe[ge++]=wt;else{if(wt==256)break;wt-=257;var At=wt<8?0:wt-4>>2;At>5&&(At=0);var dt=ge+ie[wt];At>0&&(dt+=et(de,we,At),we+=At),Ze=et(de,we,Ge),wt=_e>>>1==1?dr[Ze]:He[Ze],we+=wt&15,wt>>>=4;var St=wt<4?0:wt-2>>1,Ot=Ee[wt];for(St>0&&(Ot+=et(de,we,St),we+=St),!he&&Fe<dt&&(pe=er(pe,dt+100),Fe=pe.length);ge<dt;)pe[ge]=pe[ge-Ot],++ge}}}return he?[pe,we+7>>>3]:[pe.slice(0,ge),we+7>>>3]}function Pt(de,he){var we=de.slice(de.l||0),_e=Dt(we,he);return de.l+=_e[1],_e[0]}function Cr(de,he){if(de)typeof console<"u"&&console.error(he);else throw new Error(he)}function wn(de,he){var we=de;Ps(we,0);var _e=[],pe=[],ge={FileIndex:_e,FullPaths:pe};O(ge,{root:he.root});for(var Fe=we.length-4;(we[Fe]!=80||we[Fe+1]!=75||we[Fe+2]!=5||we[Fe+3]!=6)&&Fe>=0;)--Fe;we.l=Fe+4,we.l+=4;var it=we.read_shift(2);we.l+=6;var Ge=we.read_shift(4);for(we.l=Ge,Fe=0;Fe<it;++Fe){we.l+=20;var Ye=we.read_shift(4),Ze=we.read_shift(4),wt=we.read_shift(2),At=we.read_shift(2),dt=we.read_shift(2);we.l+=8;var St=we.read_shift(4),Ot=o(we.slice(we.l+wt,we.l+wt+At));we.l+=wt+At+dt;var Kt=we.l;we.l=St+4,fr(we,Ye,Ze,ge,Ot),we.l=Kt}return ge}function fr(de,he,we,_e,pe){de.l+=2;var ge=de.read_shift(2),Fe=de.read_shift(2),it=s(de);if(ge&8257)throw new Error("Unsupported ZIP encryption");for(var Ge=de.read_shift(4),Ye=de.read_shift(4),Ze=de.read_shift(4),wt=de.read_shift(2),At=de.read_shift(2),dt="",St=0;St<wt;++St)dt+=String.fromCharCode(de[de.l++]);if(At){var Ot=o(de.slice(de.l,de.l+At));(Ot[21589]||{}).mt&&(it=Ot[21589].mt),((pe||{})[21589]||{}).mt&&(it=pe[21589].mt)}de.l+=At;var Kt=de.slice(de.l,de.l+Ye);switch(Fe){case 8:Kt=ce(de,Ze);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Fe)}var at=!1;ge&8&&(Ge=de.read_shift(4),Ge==134695760&&(Ge=de.read_shift(4),at=!0),Ye=de.read_shift(4),Ze=de.read_shift(4)),Ye!=he&&Cr(at,"Bad compressed size: "+he+" != "+Ye),Ze!=we&&Cr(at,"Bad uncompressed size: "+we+" != "+Ze),$t(_e,dt,Kt,{unsafe:!0,mt:it})}function Vi(de,he){var we=he||{},_e=[],pe=[],ge=pt(1),Fe=we.compression?8:0,it=0,Ge=0,Ye=0,Ze=0,wt=0,At=de.FullPaths[0],dt=At,St=de.FileIndex[0],Ot=[],Kt=0;for(Ge=1;Ge<de.FullPaths.length;++Ge)if(dt=de.FullPaths[Ge].slice(At.length),St=de.FileIndex[Ge],!(!St.size||!St.content||dt=="Sh33tJ5")){var at=Ze,Vn=pt(dt.length);for(Ye=0;Ye<dt.length;++Ye)Vn.write_shift(1,dt.charCodeAt(Ye)&127);Vn=Vn.slice(0,Vn.l),Ot[wt]=oxt.buf(St.content,0);var $r=St.content;Fe==8&&($r=V($r)),ge=pt(30),ge.write_shift(4,67324752),ge.write_shift(2,20),ge.write_shift(2,it),ge.write_shift(2,Fe),St.mt?a(ge,St.mt):ge.write_shift(4,0),ge.write_shift(-4,Ot[wt]),ge.write_shift(4,$r.length),ge.write_shift(4,St.content.length),ge.write_shift(2,Vn.length),ge.write_shift(2,0),Ze+=ge.length,_e.push(ge),Ze+=Vn.length,_e.push(Vn),Ze+=$r.length,_e.push($r),ge=pt(46),ge.write_shift(4,33639248),ge.write_shift(2,0),ge.write_shift(2,20),ge.write_shift(2,it),ge.write_shift(2,Fe),ge.write_shift(4,0),ge.write_shift(-4,Ot[wt]),ge.write_shift(4,$r.length),ge.write_shift(4,St.content.length),ge.write_shift(2,Vn.length),ge.write_shift(2,0),ge.write_shift(2,0),ge.write_shift(2,0),ge.write_shift(2,0),ge.write_shift(4,0),ge.write_shift(4,at),Kt+=ge.l,pe.push(ge),Kt+=Vn.length,pe.push(Vn),++wt}return ge=pt(22),ge.write_shift(4,101010256),ge.write_shift(2,0),ge.write_shift(2,0),ge.write_shift(2,wt),ge.write_shift(2,wt),ge.write_shift(4,Kt),ge.write_shift(4,Ze),ge.write_shift(2,0),fs([fs(_e),fs(pe),ge])}var jn={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Jo(de,he){if(de.ctype)return de.ctype;var we=de.name||"",_e=we.match(/\.([^\.]+)$/);return _e&&jn[_e[1]]||he&&(_e=(we=he).match(/[\.\\]([^\.\\])+$/),_e&&jn[_e[1]])?jn[_e[1]]:"application/octet-stream"}function We(de){for(var he=qS(de),we=[],_e=0;_e<he.length;_e+=76)we.push(he.slice(_e,_e+76));return we.join(`\r
`)+`\r
`}function Je(de){var he=de.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ye){var Ze=Ye.charCodeAt(0).toString(16).toUpperCase();return"="+(Ze.length==1?"0"+Ze:Ze)});he=he.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),he.charAt(0)==`
`&&(he="=0D"+he.slice(1)),he=he.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var we=[],_e=he.split(`\r
`),pe=0;pe<_e.length;++pe){var ge=_e[pe];if(ge.length==0){we.push("");continue}for(var Fe=0;Fe<ge.length;){var it=76,Ge=ge.slice(Fe,Fe+it);Ge.charAt(it-1)=="="?it--:Ge.charAt(it-2)=="="?it-=2:Ge.charAt(it-3)=="="&&(it-=3),Ge=ge.slice(Fe,Fe+it),Fe+=it,Fe<ge.length&&(Ge+="="),we.push(Ge)}}return we.join(`\r
`)}function rt(de){for(var he=[],we=0;we<de.length;++we){for(var _e=de[we];we<=de.length&&_e.charAt(_e.length-1)=="=";)_e=_e.slice(0,_e.length-1)+de[++we];he.push(_e)}for(var pe=0;pe<he.length;++pe)he[pe]=he[pe].replace(/[=][0-9A-Fa-f]{2}/g,function(ge){return String.fromCharCode(parseInt(ge.slice(1),16))});return Yl(he.join(`\r
`))}function _t(de,he,we){for(var _e="",pe="",ge="",Fe,it=0;it<10;++it){var Ge=he[it];if(!Ge||Ge.match(/^\s*$/))break;var Ye=Ge.match(/^(.*?):\s*([^\s].*)$/);if(Ye)switch(Ye[1].toLowerCase()){case"content-location":_e=Ye[2].trim();break;case"content-type":ge=Ye[2].trim();break;case"content-transfer-encoding":pe=Ye[2].trim();break}}switch(++it,pe.toLowerCase()){case"base64":Fe=Yl(dc(he.slice(it).join("")));break;case"quoted-printable":Fe=rt(he.slice(it));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+pe)}var Ze=$t(de,_e.slice(we.length),Fe,{unsafe:!0});ge&&(Ze.ctype=ge)}function Ut(de,he){if(Q(de.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var we=he&&he.root||"",_e=(pn&&Buffer.isBuffer(de)?de.toString("binary"):Q(de)).split(`\r
`),pe=0,ge="";for(pe=0;pe<_e.length;++pe)if(ge=_e[pe],!!/^Content-Location:/i.test(ge)&&(ge=ge.slice(ge.indexOf("file")),we||(we=ge.slice(0,ge.lastIndexOf("/")+1)),ge.slice(0,we.length)!=we))for(;we.length>0&&(we=we.slice(0,we.length-1),we=we.slice(0,we.lastIndexOf("/")+1),ge.slice(0,we.length)!=we););var Fe=(_e[1]||"").match(/boundary="(.*?)"/);if(!Fe)throw new Error("MAD cannot find boundary");var it="--"+(Fe[1]||""),Ge=[],Ye=[],Ze={FileIndex:Ge,FullPaths:Ye};O(Ze);var wt,At=0;for(pe=0;pe<_e.length;++pe){var dt=_e[pe];dt!==it&&dt!==it+"--"||(At++&&_t(Ze,_e.slice(wt,pe),we),wt=pe)}return Ze}function ir(de,he){var we=he||{},_e=we.boundary||"SheetJS";_e="------="+_e;for(var pe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+_e.slice(2)+'"',"","",""],ge=de.FullPaths[0],Fe=ge,it=de.FileIndex[0],Ge=1;Ge<de.FullPaths.length;++Ge)if(Fe=de.FullPaths[Ge].slice(ge.length),it=de.FileIndex[Ge],!(!it.size||!it.content||Fe=="Sh33tJ5")){Fe=Fe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Kt){return"_x"+Kt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Kt){return"_u"+Kt.charCodeAt(0).toString(16)+"_"});for(var Ye=it.content,Ze=pn&&Buffer.isBuffer(Ye)?Ye.toString("binary"):Q(Ye),wt=0,At=Math.min(1024,Ze.length),dt=0,St=0;St<=At;++St)(dt=Ze.charCodeAt(St))>=32&&dt<128&&++wt;var Ot=wt>=At*4/5;pe.push(_e),pe.push("Content-Location: "+(we.root||"file:///C:/SheetJS/")+Fe),pe.push("Content-Transfer-Encoding: "+(Ot?"quoted-printable":"base64")),pe.push("Content-Type: "+Jo(it,Fe)),pe.push(""),pe.push(Ot?Je(Ze):We(Ze))}return pe.push(_e+`--\r
`),pe.join(`\r
`)}function tr(de){var he={};return O(he,de),he}function $t(de,he,we,_e){var pe=_e&&_e.unsafe;pe||O(de);var ge=!pe&&vr.find(de,he);if(!ge){var Fe=de.FullPaths[0];he.slice(0,Fe.length)==Fe?Fe=he:(Fe.slice(-1)!="/"&&(Fe+="/"),Fe=(Fe+he).replace("//","/")),ge={name:i(he),type:2},de.FileIndex.push(ge),de.FullPaths.push(Fe),pe||vr.utils.cfb_gc(de)}return ge.content=we,ge.size=we?we.length:0,_e&&(_e.CLSID&&(ge.clsid=_e.CLSID),_e.mt&&(ge.mt=_e.mt),_e.ct&&(ge.ct=_e.ct)),ge}function kr(de,he){O(de);var we=vr.find(de,he);if(we){for(var _e=0;_e<de.FileIndex.length;++_e)if(de.FileIndex[_e]==we)return de.FileIndex.splice(_e,1),de.FullPaths.splice(_e,1),!0}return!1}function Jt(de,he,we){O(de);var _e=vr.find(de,he);if(_e){for(var pe=0;pe<de.FileIndex.length;++pe)if(de.FileIndex[pe]==_e)return de.FileIndex[pe].name=i(we),de.FullPaths[pe]=we,!0}return!1}function Un(de){L(de,!0)}return t.find=z,t.read=R,t.parse=d,t.write=fe,t.writeFile=X,t.utils={cfb_new:tr,cfb_add:$t,cfb_del:kr,cfb_mov:Jt,cfb_gc:Un,ReadShift:R2,CheckField:r1e,prep_blob:Ps,bconcat:fs,use_zlib:J,_deflateRaw:Xe,_inflateRaw:Pt,consts:re},t}();function lxt(e){return typeof e=="string"?pP(e):Array.isArray(e)?jgt(e):e}function DC(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=pP(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Kd(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var i=new Blob([lxt(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,e);if(typeof saveAs<"u")return saveAs(i,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:e,saveAs:!0});var s=document.createElement("a");if(s.download!=null)return s.download=e,s.href=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=nm(t)),o.write(t),o.close(),t}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+e)}function cxt(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function aa(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function VZ(e,t){for(var r=[],n=aa(e),i=0;i!==n.length;++i)r[e[n[i]][t]]==null&&(r[e[n[i]][t]]=n[i]);return r}function gP(e){for(var t=[],r=aa(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function xP(e){for(var t=[],r=aa(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function uxt(e){for(var t=[],r=aa(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var sO=new Date(1899,11,30,0,0,0);function Va(e,t){var r=e.getTime(),n=sO.getTime()+(e.getTimezoneOffset()-sO.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var Dxe=new Date,dxt=sO.getTime()+(Dxe.getTimezoneOffset()-sO.getTimezoneOffset())*6e4,qZ=Dxe.getTimezoneOffset();function vP(e){var t=new Date;return t.setTime(e*24*60*60*1e3+dxt),t.getTimezoneOffset()!==qZ&&t.setTime(t.getTime()+(t.getTimezoneOffset()-qZ)*6e4),t}function fxt(e){var t=0,r=0,n=!1,i=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!i)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var a=1;a!=i.length;++a)if(i[a]){switch(r=1,a>3&&(n=!0),i[a].slice(i[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+i[a].slice(i[a].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(i[a],10)}return t}var GZ=new Date("2017-02-19T19:06:09.000Z"),Mxe=isNaN(GZ.getFullYear())?new Date("2/19/17"):GZ,hxt=Mxe.getFullYear()==2017;function ki(e,t){var r=new Date(e);if(hxt)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(Mxe.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var i=e.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return e.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function px(e,t){if(pn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Kd(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Kd(Exe(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Kd(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Kd(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(a){return r[a]||a})}catch{}for(var n=[],i=0;i!=e.length;++i)n.push(String.fromCharCode(e[i]));return n.join("")}function _i(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=_i(e[r]));return t}function ea(e,t){for(var r="";r.length<t;)r+=e;return r}function ed(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(i,a){return r=-r,a}),!isNaN(t=Number(n)))?t/r:t}var pxt=["january","february","march","april","may","june","july","august","september","october","november","december"];function jy(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),i=t.getMonth(),a=t.getDate();if(isNaN(a))return r;var s=e.toLowerCase();if(s.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(s=s.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),s.length>3&&pxt.indexOf(s)==-1)return r}else if(s.match(/[a-z]/))return r;return n<0||n>8099?r:(i>0||a>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var mxt=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,i){if(e||typeof n=="string")return r.split(n);for(var a=r.split(n),s=[a[0]],o=1;o<a.length;++o)s.push(i),s.push(a[o]);return s}}();function Fxe(e){return e?e.content&&e.type?px(e.content,!0):e.data?Jw(e.data):e.asNodeBuffer&&pn?Jw(e.asNodeBuffer().toString("binary")):e.asBinary?Jw(e.asBinary()):e._data&&e._data.getContent?Jw(px(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function Lxe(e){if(!e)return null;if(e.data)return DZ(e.data);if(e.asNodeBuffer&&pn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?DZ(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function gxt(e){return e&&e.name.slice(-4)===".bin"?Lxe(e):Fxe(e)}function Lc(e,t){for(var r=e.FullPaths||aa(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),i=n.replace(/\\/g,"/"),a=0;a<r.length;++a){var s=r[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==s||i==s)return e.files?e.files[r[a]]:e.FileIndex[a]}return null}function f$(e,t){var r=Lc(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Ca(e,t,r){if(!r)return gxt(f$(e,t));if(!t)return null;try{return Ca(e,t)}catch{return null}}function Ql(e,t,r){if(!r)return Fxe(f$(e,t));if(!t)return null;try{return Ql(e,t)}catch{return null}}function xxt(e,t,r){return Lxe(f$(e,t))}function KZ(e){for(var t=e.FullPaths||aa(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function sn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return pn?n=ap(r):n=Dgt(r),vr.utils.cfb_add(e,t,n)}vr.utils.cfb_add(e,t,r)}else e.file(t,r)}function h$(){return vr.utils.cfb_new()}function Bxe(e,t){switch(t.type){case"base64":return vr.read(e,{type:"base64"});case"binary":return vr.read(e,{type:"binary"});case"buffer":case"array":return vr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function e2(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var i=n.shift();i===".."?r.pop():i!=="."&&r.push(i)}return r.join("/")}var ba=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,vxt=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,XZ=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,yxt=/<[^>]*>/g,bo=ba.match(XZ)?XZ:yxt,bxt=/<\w*:/,wxt=/<(\/?)\w+:/;function Dr(e,t,r){for(var n={},i=0,a=0;i!==e.length&&!((a=e.charCodeAt(i))===32||a===10||a===13);++i);if(t||(n[0]=e.slice(0,i)),i===e.length)return n;var s=e.match(vxt),o=0,l="",c=0,d="",f="",p=1;if(s)for(c=0;c!=s.length;++c){for(f=s[c],a=0;a!=f.length&&f.charCodeAt(a)!==61;++a);for(d=f.slice(0,a).trim();f.charCodeAt(a+1)==32;)++a;for(p=(i=f.charCodeAt(a+1))==34||i==39?1:0,l=f.slice(a+1+p,f.length-p),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=l,n[d.toLowerCase()]=l;else{var m=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[m]&&d.slice(o-3,o)=="ext")continue;n[m]=l,n[m.toLowerCase()]=l}}return n}function wf(e){return e.replace(wxt,"<$1")}var Uxe={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},p$=gP(Uxe),Pn=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var i=n+"",a=i.indexOf("<![CDATA[");if(a==-1)return i.replace(e,function(o,l){return Uxe[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,l){return String.fromCharCode(parseInt(l,16))});var s=i.indexOf("]]>");return r(i.slice(0,a))+i.slice(a+9,s)+r(i.slice(s+3))}}(),m$=/[&<>'"]/g,Sxt=/[\u0000-\u0008\u000b-\u001f]/g;function ti(e){var t=e+"";return t.replace(m$,function(r){return p$[r]}).replace(Sxt,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function YZ(e){return ti(e).replace(/ /g,"_x0020_")}var $xe=/[\u0000-\u001f]/g;function g$(e){var t=e+"";return t.replace(m$,function(r){return p$[r]}).replace(/\n/g,"<br/>").replace($xe,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function Ext(e){var t=e+"";return t.replace(m$,function(r){return p$[r]}).replace($xe,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var QZ=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function Cxt(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Si(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function lM(e){for(var t="",r=0,n=0,i=0,a=0,s=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(i=e.charCodeAt(r++),n>191&&n<224){s=(n&31)<<6,s|=i&63,t+=String.fromCharCode(s);continue}if(a=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(i&63)<<6|a&63);continue}s=e.charCodeAt(r++),o=((n&7)<<18|(i&63)<<12|(a&63)<<6|s&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function JZ(e){var t=D0(2*e.length),r,n,i=1,a=0,s=0,o;for(n=0;n<e.length;n+=i)i=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),i=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),i=3):(i=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,s=55296+(r>>>10&1023),r=56320+(r&1023)),s!==0&&(t[a++]=s&255,t[a++]=s>>>8,s=0),t[a++]=r%256,t[a++]=r>>>8;return t.slice(0,a).toString("ucs2")}function ZZ(e){return ap(e,"binary").toString("utf8")}var lN="foo bar baz",si=pn&&(ZZ(lN)==lM(lN)&&ZZ||JZ(lN)==lM(lN)&&JZ)||lM,Kd=pn?function(e){return ap(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,i=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,i=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(i>>18&7))),t.push(String.fromCharCode(144+(i>>12&63))),t.push(String.fromCharCode(128+(i>>6&63))),t.push(String.fromCharCode(128+(i&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},KS=function(){var e={};return function(r,n){var i=r+"|"+(n||"");return e[i]?e[i]:e[i]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),zxe=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<e.length;++i)n=n.replace(e[i][0],e[i][1]);return n}}(),kxt=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),_xt=/<\/?(?:vt:)?variant>/g,Nxt=/<(?:vt:)([^>]*)>([\s\S]*)</;function eee(e,t){var r=Dr(e),n=e.match(kxt(r.baseType))||[],i=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return i}return n.forEach(function(a){var s=a.replace(_xt,"").match(Nxt);s&&i.push({v:si(s[2]),t:s[1]})}),i}var Hxe=/(^\s|\s$|\n)/;function Ds(e,t){return"<"+e+(t.match(Hxe)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function XS(e){return aa(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Ft(e,t,r){return"<"+e+(r!=null?XS(r):"")+(t!=null?(t.match(Hxe)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function u5(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function Axt(e,t){switch(typeof e){case"string":var r=Ft("vt:lpwstr",ti(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Ft((e|0)==e?"vt:i4":"vt:r8",ti(String(e)));case"boolean":return Ft("vt:bool",e?"true":"false")}if(e instanceof Date)return Ft("vt:filetime",u5(e));throw new Error("Unable to serialize "+e)}function x$(e){if(pn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return si(nm(c$(e)));throw new Error("Bad input format: expected Buffer or string")}var YS=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Ha={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Gx=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],ql={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Txt(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),i=e[t+6]&15,a=5;a>=0;--a)i=i*256+e[t+a];return n==2047?i==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,i+=Math.pow(2,52)),r*Math.pow(2,n-52)*i)}function Ixt(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,i=0,a=0,s=n?-t:t;isFinite(s)?s==0?i=a=0:(i=Math.floor(Math.log(s)/Math.LN2),a=s*Math.pow(2,52-i),i<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?i=-1022:(a-=Math.pow(2,52),i+=1023)):(i=2047,a=isNaN(t)?26985:0);for(var o=0;o<=5;++o,a/=256)e[r+o]=a&255;e[r+6]=(i&15)<<4|a&15,e[r+7]=i>>4|n}var tee=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var i=0,a=e[0][n].length;i<a;i+=r)t.push.apply(t,e[0][n].slice(i,i+r));return t},ree=pn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:ap(t)})):tee(e)}:tee,nee=function(e,t,r){for(var n=[],i=t;i<r;i+=2)n.push(String.fromCharCode(fh(e,i)));return n.join("").replace(Ho,"")},v$=pn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Ho,""):nee(e,t,r)}:nee,iee=function(e,t,r){for(var n=[],i=t;i<t+r;++i)n.push(("0"+e[i].toString(16)).slice(-2));return n.join("")},Wxe=pn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):iee(e,t,r)}:iee,aee=function(e,t,r){for(var n=[],i=t;i<r;i++)n.push(String.fromCharCode(q1(e,i)));return n.join("")},MC=pn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):aee(t,r,n)}:aee,Vxe=function(e,t){var r=Gl(e,t);return r>0?MC(e,t+4,t+4+r-1):""},qxe=Vxe,Gxe=function(e,t){var r=Gl(e,t);return r>0?MC(e,t+4,t+4+r-1):""},Kxe=Gxe,Xxe=function(e,t){var r=2*Gl(e,t);return r>0?MC(e,t+4,t+4+r-1):""},Yxe=Xxe,Qxe=function(t,r){var n=Gl(t,r);return n>0?v$(t,r+4,r+4+n):""},Jxe=Qxe,Zxe=function(e,t){var r=Gl(e,t);return r>0?MC(e,t+4,t+4+r):""},e1e=Zxe,t1e=function(e,t){return Txt(e,t)},oO=t1e,y$=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};pn&&(qxe=function(t,r){if(!Buffer.isBuffer(t))return Vxe(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},Kxe=function(t,r){if(!Buffer.isBuffer(t))return Gxe(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},Yxe=function(t,r){if(!Buffer.isBuffer(t))return Xxe(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},Jxe=function(t,r){if(!Buffer.isBuffer(t))return Qxe(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},e1e=function(t,r){if(!Buffer.isBuffer(t))return Zxe(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},oO=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):t1e(t,r)},y$=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var q1=function(e,t){return e[t]},fh=function(e,t){return e[t+1]*256+e[t]},Oxt=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Gl=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Wm=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Pxt=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function R2(e,t){var r="",n,i,a=[],s,o,l,c;switch(t){case"dbcs":if(c=this.l,pn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(l=0;l<e;++l)r+=String.fromCharCode(fh(this,c)),c+=2;e*=2;break;case"utf8":r=MC(this,this.l,this.l+e);break;case"utf16le":e*=2,r=v$(this,this.l,this.l+e);break;case"wstr":return R2.call(this,e,"dbcs");case"lpstr-ansi":r=qxe(this,this.l),e=4+Gl(this,this.l);break;case"lpstr-cp":r=Kxe(this,this.l),e=4+Gl(this,this.l);break;case"lpwstr":r=Yxe(this,this.l),e=4+2*Gl(this,this.l);break;case"lpp4":e=4+Gl(this,this.l),r=Jxe(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Gl(this,this.l),r=e1e(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(s=q1(this,this.l+e++))!==0;)a.push(oN(s));r=a.join("");break;case"_wstr":for(e=0,r="";(s=fh(this,this.l+e))!==0;)a.push(oN(s)),e+=2;e+=2,r=a.join("");break;case"dbcs-cont":for(r="",c=this.l,l=0;l<e;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return s=q1(this,c),this.l=c+1,o=R2.call(this,e-l,s?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(oN(fh(this,c))),c+=2}r=a.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",c=this.l,l=0;l!=e;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return s=q1(this,c),this.l=c+1,o=R2.call(this,e-l,s?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(oN(q1(this,c))),c+=1}r=a.join("");break;default:switch(e){case 1:return n=q1(this,this.l),this.l++,n;case 2:return n=(t==="i"?Oxt:fh)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(n=(e>0?Wm:Pxt)(this,this.l),this.l+=4,n):(i=Gl(this,this.l),this.l+=4,i);case 8:case-8:if(t==="f")return e==8?i=oO(this,this.l):i=oO([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;e=8;case 16:r=Wxe(this,this.l,e);break}}return this.l+=e,r}var Rxt=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},jxt=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},Dxt=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function Mxt(e,t,r){var n=0,i=0;if(r==="dbcs"){for(i=0;i!=t.length;++i)Dxt(this,t.charCodeAt(i),this.l+2*i);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=t.length;++i)this[this.l+i]=t.charCodeAt(i)&255;n=t.length}else if(r==="hex"){for(;i<e;++i)this[this.l++]=parseInt(t.slice(2*i,2*i+2),16)||0;return this}else if(r==="utf16le"){var a=Math.min(this.l+e,this.length);for(i=0;i<Math.min(t.length,e);++i){var s=t.charCodeAt(i);this[this.l++]=s&255,this[this.l++]=s>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,Rxt(this,t,this.l);break;case 8:if(n=8,r==="f"){Ixt(this,t,this.l);break}case 16:break;case-4:n=4,jxt(this,t,this.l);break}return this.l+=n,this}function r1e(e,t){var r=Wxe(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Ps(e,t){e.l=t,e.read_shift=R2,e.chk=r1e,e.write_shift=Mxt}function xo(e,t){e.l+=t}function pt(e){var t=D0(e);return Ps(t,0),t}function sp(e,t,r){if(e){var n,i,a;Ps(e,e.l||0);for(var s=e.length,o=0,l=0;e.l<s;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var c=rE[o]||rE[65535];for(n=e.read_shift(1),a=n&127,i=1;i<4&&n&128;++i)a+=((n=e.read_shift(1))&127)<<7*i;l=e.l+a;var d=c.f&&c.f(e,a,r);if(e.l=l,t(d,c,o))return}}}function kl(){var e=[],t=pn?256:2048,r=function(c){var d=pt(c);return Ps(d,0),d},n=r(t),i=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},a=function(c){return n&&c<n.length-n.l?n:(i(),n=r(Math.max(c+1,t)))},s=function(){return i(),fs(e)},o=function(c){i(),n=c,n.l==null&&(n.l=n.length),a(t)};return{next:a,push:o,end:s,_bufs:e}}function Ct(e,t,r,n){var i=+t,a;if(!isNaN(i)){n||(n=rE[i].p||(r||[]).length||0),a=1+(i>=128?1:0)+1,n>=128&&++a,n>=16384&&++a,n>=2097152&&++a;var s=e.next(a);i<=127?s.write_shift(1,i):(s.write_shift(1,(i&127)+128),s.write_shift(1,i>>7));for(var o=0;o!=4;++o)if(n>=128)s.write_shift(1,(n&127)+128),n>>=7;else{s.write_shift(1,n);break}n>0&&y$(r)&&e.push(r)}}function j2(e,t,r){var n=_i(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function see(e,t,r){var n=_i(e);return n.s=j2(n.s,t.s,r),n.e=j2(n.e,t.s,r),n}function D2(e,t){if(e.cRel&&e.c<0)for(e=_i(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=_i(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=jr(e);return!e.cRel&&e.cRel!=null&&(r=Bxt(r)),!e.rRel&&e.rRel!=null&&(r=Fxt(r)),r}function cM(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Ui(e.s.c)+":"+(e.e.cRel?"":"$")+Ui(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+ga(e.s.r)+":"+(e.e.rRel?"":"$")+ga(e.e.r):D2(e.s,t.biff)+":"+D2(e.e,t.biff)}function b$(e){return parseInt(Lxt(e),10)-1}function ga(e){return""+(e+1)}function Fxt(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Lxt(e){return e.replace(/\$(\d+)$/,"$1")}function w$(e){for(var t=Uxt(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function Ui(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Bxt(e){return e.replace(/^([A-Z])/,"$$$1")}function Uxt(e){return e.replace(/^\$([A-Z])/,"$1")}function $xt(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function $i(e){for(var t=0,r=0,n=0;n<e.length;++n){var i=e.charCodeAt(n);i>=48&&i<=57?t=10*t+(i-48):i>=65&&i<=90&&(r=26*r+(i-64))}return{c:r-1,r:t-1}}function jr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Tl(e){var t=e.indexOf(":");return t==-1?{s:$i(e),e:$i(e)}:{s:$i(e.slice(0,t)),e:$i(e.slice(t+1))}}function Jr(e,t){return typeof t>"u"||typeof t=="number"?Jr(e.s,e.e):(typeof e!="string"&&(e=jr(e)),typeof t!="string"&&(t=jr(t)),e==t?e:e+":"+t)}function Rn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,i=0,a=e.length;for(r=0;n<a&&!((i=e.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(t.s.c=--r,r=0;n<a&&!((i=e.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;if(t.s.r=--r,n===a||i!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=a&&!((i=e.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(t.e.c=--r,r=0;n!=a&&!((i=e.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;return t.e.r=--r,t}function oee(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=fu(e.z,r?Va(t):t)}catch{}try{return e.w=fu((e.XF||{}).numFmtId||(r?14:0),r?Va(t):t)}catch{return""+t}}function qh(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?op[e.v]||e.v:t==null?oee(e,e.v):oee(e,t))}function im(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function n1e(e,t,r){var n=r||{},i=e?Array.isArray(e):n.dense,a=e||(i?[]:{}),s=0,o=0;if(a&&n.origin!=null){if(typeof n.origin=="number")s=n.origin;else{var l=typeof n.origin=="string"?$i(n.origin):n.origin;s=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var d=Rn(a["!ref"]);c.s.c=d.s.c,c.s.r=d.s.r,c.e.c=Math.max(c.e.c,d.e.c),c.e.r=Math.max(c.e.r,d.e.r),s==-1&&(c.e.r=s=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=t[f].length;++p)if(!(typeof t[f][p]>"u")){var m={v:t[f][p]},x=s+f,v=o+p;if(c.s.r>x&&(c.s.r=x),c.s.c>v&&(c.s.c=v),c.e.r<x&&(c.e.r=x),c.e.c<v&&(c.e.c=v),t[f][p]&&typeof t[f][p]=="object"&&!Array.isArray(t[f][p])&&!(t[f][p]instanceof Date))m=t[f][p];else if(Array.isArray(m.v)&&(m.f=t[f][p][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||Pr[14],n.cellDates?(m.t="d",m.w=fu(m.z,Va(m.v))):(m.t="n",m.v=Va(m.v),m.w=fu(m.z,m.v))):m.t="s";if(i)a[x]||(a[x]=[]),a[x][v]&&a[x][v].z&&(m.z=a[x][v].z),a[x][v]=m;else{var b=jr({c:v,r:x});a[b]&&a[b].z&&(m.z=a[b].z),a[b]=m}}}return c.s.c<1e7&&(a["!ref"]=Jr(c)),a}function Cb(e,t){return n1e(null,e,t)}function zxt(e){return e.read_shift(4,"i")}function td(e,t){return t||(t=pt(4)),t.write_shift(4,e),t}function ho(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function ps(e,t){var r=!1;return t==null&&(r=!0,t=pt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function Hxt(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Wxt(e,t){return t||(t=pt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function S$(e,t){var r=e.l,n=e.read_shift(1),i=ho(e),a=[],s={t:i,h:i};if(n&1){for(var o=e.read_shift(4),l=0;l!=o;++l)a.push(Hxt(e));s.r=a}else s.r=[{ich:0,ifnt:0}];return e.l=r+t,s}function Vxt(e,t){var r=!1;return t==null&&(r=!0,t=pt(15+4*e.t.length)),t.write_shift(1,0),ps(e.t,t),r?t.slice(0,t.l):t}var qxt=S$;function Gxt(e,t){var r=!1;return t==null&&(r=!0,t=pt(23+4*e.t.length)),t.write_shift(1,1),ps(e.t,t),t.write_shift(4,1),Wxt({},t),r?t.slice(0,t.l):t}function yu(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Kx(e,t){return t==null&&(t=pt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Xx(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Yx(e,t){return t==null&&(t=pt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Kxt=ho,i1e=ps;function E$(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function lO(e,t){var r=!1;return t==null&&(r=!0,t=pt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Xxt=ho,d5=E$,C$=lO;function k$(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var i=n===0?oO([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Wm(t,0)>>2;return r?i/100:i}function a1e(e,t){t==null&&(t=pt(4));var r=0,n=0,i=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?i:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function s1e(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function Yxt(e,t){return t||(t=pt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Qx=s1e,kb=Yxt;function co(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function mx(e,t){return(t||pt(8)).write_shift(8,e,"f")}function Qxt(e){var t={},r=e.read_shift(1),n=r>>>1,i=e.read_shift(1),a=e.read_shift(2,"i"),s=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=i;var c=jg[i];c&&(t.rgb=JS(c));break;case 2:t.rgb=JS([s,o,l]);break;case 3:t.theme=i;break}return a!=0&&(t.tint=a>0?a/32767:a/32768),t}function cO(e,t){if(t||(t=pt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function Jxt(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function Zxt(e,t){t||(t=pt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function o1e(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function e1t(e){return o1e(e,1)}function t1t(e){return o1e(e,2)}var _$=2,ll=3,cN=11,lee=12,uO=19,uN=64,r1t=65,n1t=71,i1t=4108,a1t=4126,ls=80,l1e=81,s1t=[ls,l1e],f5={1:{n:"CodePage",t:_$},2:{n:"Category",t:ls},3:{n:"PresentationFormat",t:ls},4:{n:"ByteCount",t:ll},5:{n:"LineCount",t:ll},6:{n:"ParagraphCount",t:ll},7:{n:"SlideCount",t:ll},8:{n:"NoteCount",t:ll},9:{n:"HiddenCount",t:ll},10:{n:"MultimediaClipCount",t:ll},11:{n:"ScaleCrop",t:cN},12:{n:"HeadingPairs",t:i1t},13:{n:"TitlesOfParts",t:a1t},14:{n:"Manager",t:ls},15:{n:"Company",t:ls},16:{n:"LinksUpToDate",t:cN},17:{n:"CharacterCount",t:ll},19:{n:"SharedDoc",t:cN},22:{n:"HyperlinksChanged",t:cN},23:{n:"AppVersion",t:ll,p:"version"},24:{n:"DigSig",t:r1t},26:{n:"ContentType",t:ls},27:{n:"ContentStatus",t:ls},28:{n:"Language",t:ls},29:{n:"Version",t:ls},255:{},2147483648:{n:"Locale",t:uO},2147483651:{n:"Behavior",t:uO},1919054434:{}},h5={1:{n:"CodePage",t:_$},2:{n:"Title",t:ls},3:{n:"Subject",t:ls},4:{n:"Author",t:ls},5:{n:"Keywords",t:ls},6:{n:"Comments",t:ls},7:{n:"Template",t:ls},8:{n:"LastAuthor",t:ls},9:{n:"RevNumber",t:ls},10:{n:"EditTime",t:uN},11:{n:"LastPrinted",t:uN},12:{n:"CreatedDate",t:uN},13:{n:"ModifiedDate",t:uN},14:{n:"PageCount",t:ll},15:{n:"WordCount",t:ll},16:{n:"CharCount",t:ll},17:{n:"Thumbnail",t:n1t},18:{n:"Application",t:ls},19:{n:"DocSecurity",t:ll},255:{},2147483648:{n:"Locale",t:uO},2147483651:{n:"Behavior",t:uO},1919054434:{}},cee={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},o1t=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function l1t(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var c1t=l1t([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),jg=_i(c1t),op={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},c1e={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},p5={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},dN={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function N$(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function u1t(e){var t=N$();if(!e||!e.match)return t;var r={};if((e.match(bo)||[]).forEach(function(n){var i=Dr(n);switch(i[0].replace(bxt,"<")){case"<?xml":break;case"<Types":t.xmlns=i["xmlns"+(i[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[i.Extension]=i.ContentType;break;case"<Override":t[p5[i.ContentType]]!==void 0&&t[p5[i.ContentType]].push(i.PartName);break}}),t.xmlns!==Ha.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function u1e(e,t){var r=uxt(p5),n=[],i;n[n.length]=ba,n[n.length]=Ft("Types",null,{xmlns:Ha.CT,"xmlns:xsd":Ha.xsd,"xmlns:xsi":Ha.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Ft("Default",null,{Extension:l[0],ContentType:l[1]})}));var a=function(l){e[l]&&e[l].length>0&&(i=e[l][0],n[n.length]=Ft("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:dN[l][t.bookType]||dN[l].xlsx}))},s=function(l){(e[l]||[]).forEach(function(c){n[n.length]=Ft("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:dN[l][t.bookType]||dN[l].xlsx})})},o=function(l){(e[l]||[]).forEach(function(c){n[n.length]=Ft("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:r[l][0]})})};return a("workbooks"),s("sheets"),s("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),s("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var yn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function QS(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function M2(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(bo)||[]).forEach(function(i){var a=Dr(i);if(a[0]==="<Relationship"){var s={};s.Type=a.Type,s.Target=a.Target,s.Id=a.Id,a.TargetMode&&(s.TargetMode=a.TargetMode);var o=a.TargetMode==="External"?a.Target:e2(a.Target,t);r[o]=s,n[a.Id]=s}}),r["!id"]=n,r}function Av(e){var t=[ba,Ft("Relationships",null,{xmlns:Ha.RELS})];return aa(e["!id"]).forEach(function(r){t[t.length]=Ft("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Zn(e,t,r,n,i,a){if(i||(i={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,i.Id="rId"+t,i.Type=n,i.Target=r,[yn.HLINK,yn.XPATH,yn.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),e["!id"][i.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][i.Id]=i,e[("/"+i.Target).replace("//","/")]=i,t}var d1t="application/vnd.oasis.opendocument.spreadsheet";function f1t(e,t){for(var r=x$(e),n,i;n=YS.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(i=Dr(n[0],!1),i.path=="/"&&i.type!==d1t)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function h1t(e){var t=[ba];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function uee(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function p1t(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function m1t(e){var t=[ba];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(uee(e[r][0],e[r][1])),t.push(p1t("",e[r][0]));return t.push(uee("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function d1e(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+rO.version+"</meta:generator></office:meta></office:document-meta>"}var nu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],g1t=function(){for(var e=new Array(nu.length),t=0;t<nu.length;++t){var r=nu[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function f1e(e){var t={};e=si(e);for(var r=0;r<nu.length;++r){var n=nu[r],i=e.match(g1t[r]);i!=null&&i.length>0&&(t[n[1]]=Pn(i[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=ki(t[n[1]]))}return t}function uM(e,t,r,n,i){i[e]!=null||t==null||t===""||(i[e]=t,t=ti(t),n[n.length]=r?Ft(e,t,r):Ds(e,t))}function h1e(e,t){var r=t||{},n=[ba,Ft("cp:coreProperties",null,{"xmlns:cp":Ha.CORE_PROPS,"xmlns:dc":Ha.dc,"xmlns:dcterms":Ha.dcterms,"xmlns:dcmitype":Ha.dcmitype,"xmlns:xsi":Ha.xsi})],i={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&uM("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:u5(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i),e.ModifiedDate!=null&&uM("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:u5(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i));for(var a=0;a!=nu.length;++a){var s=nu[a],o=r.Props&&r.Props[s[1]]!=null?r.Props[s[1]]:e?e[s[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&uM(s[0],o,null,n,i)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Dg=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],p1e=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function m1e(e,t,r,n){var i=[];if(typeof e=="string")i=eee(e,n);else for(var a=0;a<e.length;++a)i=i.concat(e[a].map(function(d){return{v:d}}));var s=typeof t=="string"?eee(t,n).map(function(d){return d.v}):t,o=0,l=0;if(s.length>0)for(var c=0;c!==i.length;c+=2){switch(l=+i[c+1].v,i[c].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=s.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=l,r.DefinedNames=s.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=s.slice(o,o+l);break}o+=l}}function x1t(e,t,r){var n={};return t||(t={}),e=si(e),Dg.forEach(function(i){var a=(e.match(KS(i[0]))||[])[1];switch(i[2]){case"string":a&&(t[i[1]]=Pn(a));break;case"bool":t[i[1]]=a==="true";break;case"raw":var s=e.match(new RegExp("<"+i[0]+"[^>]*>([\\s\\S]*?)</"+i[0]+">"));s&&s.length>0&&(n[i[1]]=s[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&m1e(n.HeadingPairs,n.TitlesOfParts,t,r),t}function g1e(e){var t=[],r=Ft;return e||(e={}),e.Application="SheetJS",t[t.length]=ba,t[t.length]=Ft("Properties",null,{xmlns:Ha.EXT_PROPS,"xmlns:vt":Ha.vt}),Dg.forEach(function(n){if(e[n[1]]!==void 0){var i;switch(n[2]){case"string":i=ti(String(e[n[1]]));break;case"bool":i=e[n[1]]?"true":"false";break}i!==void 0&&(t[t.length]=r(n[0],i))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+ti(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var v1t=/<[^>]+>[^<]*/g;function y1t(e,t){var r={},n="",i=e.match(v1t);if(i)for(var a=0;a!=i.length;++a){var s=i[a],o=Dr(s);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Pn(o.name);break;case"</property>":n=null;break;default:if(s.indexOf("<vt:")===0){var l=s.split(">"),c=l[0].slice(4),d=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":r[n]=Pn(d);break;case"bool":r[n]=Si(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=ki(d);break;case"cy":case"error":r[n]=Pn(d);break;default:if(c.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",s,c,l)}}else if(s.slice(0,2)!=="</"){if(t.WTF)throw new Error(s)}}}return r}function x1e(e){var t=[ba,Ft("Properties",null,{xmlns:Ha.CUST_PROPS,"xmlns:vt":Ha.vt})];if(!e)return t.join("");var r=1;return aa(e).forEach(function(i){++r,t[t.length]=Ft("property",Axt(e[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:ti(i)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var m5={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},dM;function b1t(e,t,r){dM||(dM=gP(m5)),t=dM[t]||t,e[t]=r}function w1t(e,t){var r=[];return aa(m5).map(function(n){for(var i=0;i<nu.length;++i)if(nu[i][1]==n)return nu[i];for(i=0;i<Dg.length;++i)if(Dg[i][1]==n)return Dg[i];throw n}).forEach(function(n){if(e[n[1]]!=null){var i=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),r.push(Ds(m5[n[1]]||n[1],i))}}),Ft("DocumentProperties",r.join(""),{xmlns:ql.o})}function S1t(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",i=[];return e&&aa(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)){for(var s=0;s<nu.length;++s)if(a==nu[s][1])return;for(s=0;s<Dg.length;++s)if(a==Dg[s][1])return;for(s=0;s<r.length;++s)if(a==r[s])return;var o=e[a],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),i.push(Ft(YZ(a),o,{"dt:dt":l}))}}),t&&aa(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)&&!(e&&Object.prototype.hasOwnProperty.call(e,a))){var s=t[a],o="string";typeof s=="number"?(o="float",s=String(s)):s===!0||s===!1?(o="boolean",s=s?"1":"0"):s instanceof Date?(o="dateTime.tz",s=s.toISOString()):s=String(s),i.push(Ft(YZ(a),s,{"dt:dt":o}))}}),"<"+n+' xmlns="'+ql.o+'">'+i.join("")+"</"+n+">"}function A$(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function E1t(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),i=(r-n)/Math.pow(2,32);n*=1e7,i*=1e7;var a=n/Math.pow(2,32)|0;a>0&&(n=n%Math.pow(2,32),i+=a);var s=pt(8);return s.write_shift(4,n),s.write_shift(4,i),s}function v1e(e,t,r){var n=e.l,i=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return i}function y1e(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function b1e(e,t,r){return t===31?y1e(e):v1e(e,t,r)}function g5(e,t,r){return b1e(e,t,r===!1?0:4)}function C1t(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return b1e(e,t,0)}function k1t(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var i=e.l;r[n]=e.read_shift(0,"lpwstr").replace(Ho,""),e.l-i&2&&(e.l+=2)}return r}function _1t(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(Ho,"");return r}function N1t(e){var t=e.l,r=dO(e,l1e);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=dO(e,ll);return[r,n]}function A1t(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(N1t(e));return r}function dee(e,t){for(var r=e.read_shift(4),n={},i=0;i!=r;++i){var a=e.read_shift(4),s=e.read_shift(4);n[a]=e.read_shift(s,t===1200?"utf16le":"utf8").replace(Ho,"").replace(Zw,"!"),t===1200&&s%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function w1e(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function T1t(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function dO(e,t,r){var n=e.read_shift(2),i,a=r||{};if(e.l+=2,t!==lee&&n!==t&&s1t.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===lee?n:t){case 2:return i=e.read_shift(2,"i"),a.raw||(e.l+=2),i;case 3:return i=e.read_shift(4,"i"),i;case 11:return e.read_shift(4)!==0;case 19:return i=e.read_shift(4),i;case 30:return v1e(e,n,4).replace(Ho,"");case 31:return y1e(e);case 64:return A$(e);case 65:return w1e(e);case 71:return T1t(e);case 80:return g5(e,n,!a.raw).replace(Ho,"");case 81:return C1t(e,n).replace(Ho,"");case 4108:return A1t(e);case 4126:case 4127:return n==4127?k1t(e):_1t(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function fee(e,t){var r=pt(4),n=pt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=pt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=E1t(t);break;case 31:case 80:for(n=pt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return fs([r,n])}function hee(e,t){var r=e.l,n=e.read_shift(4),i=e.read_shift(4),a=[],s=0,o=0,l=-1,c={};for(s=0;s!=i;++s){var d=e.read_shift(4),f=e.read_shift(4);a[s]=[d,f+r]}a.sort(function(k,E){return k[1]-E[1]});var p={};for(s=0;s!=i;++s){if(e.l!==a[s][1]){var m=!0;if(s>0&&t)switch(t[a[s-1][0]].t){case 2:e.l+2===a[s][1]&&(e.l+=2,m=!1);break;case 80:e.l<=a[s][1]&&(e.l=a[s][1],m=!1);break;case 4108:e.l<=a[s][1]&&(e.l=a[s][1],m=!1);break}if((!t||s==0)&&e.l<=a[s][1]&&(m=!1,e.l=a[s][1]),m)throw new Error("Read Error: Expected address "+a[s][1]+" at "+e.l+" :"+s)}if(t){var x=t[a[s][0]];if(p[x.n]=dO(e,x.t,{raw:!0}),x.p==="version"&&(p[x.n]=String(p[x.n]>>16)+"."+("0000"+String(p[x.n]&65535)).slice(-4)),x.n=="CodePage")switch(p[x.n]){case 0:p[x.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Ku(o=p[x.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+p[x.n])}}else if(a[s][0]===1){if(o=p.CodePage=dO(e,_$),Ku(o),l!==-1){var v=e.l;e.l=a[l][1],c=dee(e,o),e.l=v}}else if(a[s][0]===0){if(o===0){l=s,e.l=a[s+1][1];continue}c=dee(e,o)}else{var b=c[a[s][0]],w;switch(e[e.l]){case 65:e.l+=4,w=w1e(e);break;case 30:e.l+=4,w=g5(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,w=g5(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,w=e.read_shift(4,"i");break;case 19:e.l+=4,w=e.read_shift(4);break;case 5:e.l+=4,w=e.read_shift(8,"f");break;case 11:e.l+=4,w=fa(e,4);break;case 64:e.l+=4,w=ki(A$(e));break;default:throw new Error("unparsed value: "+e[e.l])}p[b]=w}}return e.l=r+n,p}var S1e=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function I1t(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function pee(e,t,r){var n=pt(8),i=[],a=[],s=8,o=0,l=pt(8),c=pt(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),a.push(l),i.push(c),s+=8+l.length,!t){c=pt(8),c.write_shift(4,0),i.unshift(c);var d=[pt(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(l=pt(8+2*(f.length+1)+(f.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,f.length+1),l.write_shift(0,f,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=fs(d),a.unshift(l),s+=8+l.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(S1e.indexOf(e[o][0])>-1||p1e.indexOf(e[o][0])>-1)&&e[o][1]!=null){var p=e[o][1],m=0;if(t){m=+t[e[o][0]];var x=r[m];if(x.p=="version"&&typeof p=="string"){var v=p.split(".");p=(+v[0]<<16)+(+v[1]||0)}l=fee(x.t,p)}else{var b=I1t(p);b==-1&&(b=31,p=String(p)),l=fee(b,p)}a.push(l),c=pt(8),c.write_shift(4,t?m:2+o),i.push(c),s+=8+l.length}var w=8*(a.length+1);for(o=0;o<a.length;++o)i[o].write_shift(4,w),w+=a[o].length;return n.write_shift(4,s),n.write_shift(4,a.length),fs([n].concat(i).concat(a))}function mee(e,t,r){var n=e.content;if(!n)return{};Ps(n,0);var i,a,s,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var c=n.read_shift(4),d=n.read_shift(16);if(d!==vr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(i=n.read_shift(4),i!==1&&i!==2)throw new Error("Unrecognized #Sets: "+i);if(a=n.read_shift(16),o=n.read_shift(4),i===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);i===2&&(s=n.read_shift(16),l=n.read_shift(4));var f=hee(n,t),p={SystemIdentifier:c};for(var m in f)p[m]=f[m];if(p.FMTID=a,i===1)return p;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var x;try{x=hee(n,null)}catch{}for(m in x)p[m]=x[m];return p.FMTID=[a,s],p}function gee(e,t,r,n,i,a){var s=pt(i?68:48),o=[s];s.write_shift(2,65534),s.write_shift(2,0),s.write_shift(4,842412599),s.write_shift(16,vr.utils.consts.HEADER_CLSID,"hex"),s.write_shift(4,i?2:1),s.write_shift(16,t,"hex"),s.write_shift(4,i?68:48);var l=pee(e,r,n);if(o.push(l),i){var c=pee(i,null,null);s.write_shift(16,a,"hex"),s.write_shift(4,68+l.length),o.push(c)}return fs(o)}function _p(e,t){return e.read_shift(t),null}function O1t(e,t){t||(t=pt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function P1t(e,t,r){for(var n=[],i=e.l+t;e.l<i;)n.push(r(e,i-e.l));if(i!==e.l)throw new Error("Slurp error");return n}function fa(e,t){return e.read_shift(t)===1}function Mo(e,t){return t||(t=pt(2)),t.write_shift(2,+!!e),t}function ka(e){return e.read_shift(2,"u")}function $c(e,t){return t||(t=pt(2)),t.write_shift(2,e),t}function E1e(e,t){return P1t(e,t,ka)}function R1t(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function C1e(e,t,r){return r||(r=pt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function FC(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),i="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var a=e.read_shift(1);a&&(i="dbcs-cont")}else r.biff==12&&(i="wstr");r.biff>=2&&r.biff<=5&&(i="cpstr");var s=n?e.read_shift(n,i):"";return s}function j1t(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,i=r&8,a=1+(r&1),s=0,o,l={};i&&(s=e.read_shift(2)),n&&(o=e.read_shift(4));var c=a==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,c);return i&&(e.l+=4*s),n&&(e.l+=o),l.t=d,i||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function D1t(e){var t=e.t||"",r=pt(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=pt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var i=[r,n];return fs(i)}function gx(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var i=e.read_shift(1);return i===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function LC(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):gx(e,n,r)}function Jx(e,t,r){if(r.biff>5)return LC(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function k1e(e,t,r){return r||(r=pt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function M1t(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function F1t(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var i=e.read_shift((n?t-24:t)>>1,"utf16le").replace(Ho,"");return n&&(e.l+=24),i}function L1t(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var i=e.read_shift(4);if(i===0)return r+n.replace(/\\/g,"/");var a=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var s=e.read_shift(a>>1,"utf16le").replace(Ho,"");return r+s}function B1t(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return F1t(e);case"0303000000000000c000000000000046":return L1t(e);default:throw new Error("Unsupported Moniker "+r)}}function fN(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Ho,""):"";return r}function xee(e,t){t||(t=pt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function U1t(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var i=e.read_shift(2);e.l+=2;var a,s,o,l,c="",d,f;i&16&&(a=fN(e,r-e.l)),i&128&&(s=fN(e,r-e.l)),(i&257)===257&&(o=fN(e,r-e.l)),(i&257)===1&&(l=B1t(e,r-e.l)),i&8&&(c=fN(e,r-e.l)),i&32&&(d=e.read_shift(16)),i&64&&(f=A$(e)),e.l=r;var p=s||o||l||"";p&&c&&(p+="#"+c),p||(p="#"+c),i&2&&p.charAt(0)=="/"&&p.charAt(1)!="/"&&(p="file://"+p);var m={Target:p};return d&&(m.guid=d),f&&(m.time=f),a&&(m.Tooltip=a),m}function $1t(e){var t=pt(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var i=n.indexOf("#"),a=i>-1?31:23;switch(n.charAt(0)){case"#":a=28;break;case".":a&=-3;break}t.write_shift(4,2),t.write_shift(4,a);var s=[8,6815827,6619237,4849780,83];for(r=0;r<s.length;++r)t.write_shift(4,s[r]);if(a==28)n=n.slice(1),xee(n,t);else if(a&2){for(s="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<s.length;++r)t.write_shift(1,parseInt(s[r],16));var o=i>-1?n.slice(0,i):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),a&8&&xee(i>-1?n.slice(i+1):"",t)}else{for(s="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<s.length;++r)t.write_shift(1,parseInt(s[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(t.write_shift(2,l),t.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)t.write_shift(1,n.charCodeAt(r+3*l)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function _1e(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),i=e.read_shift(1);return[t,r,n,i]}function N1e(e,t){var r=_1e(e);return r[3]=0,r}function Sf(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function xx(e,t,r,n){return n||(n=pt(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function z1t(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function H1t(e,t,r){return t===0?"":Jx(e,t,r)}function W1t(e,t,r){var n=r.biff>8?4:2,i=e.read_shift(n),a=e.read_shift(n,"i"),s=e.read_shift(n,"i");return[i,a,s]}function A1e(e){var t=e.read_shift(2),r=k$(e);return[t,r]}function V1t(e,t,r){e.l+=4,t-=4;var n=e.l+t,i=FC(e,t,r),a=e.read_shift(2);if(n-=e.l,a!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+a);return e.l+=a,i}function yP(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(2);return{s:{c:n,r:t},e:{c:i,r}}}function T1e(e,t){return t||(t=pt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function I1e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),i=e.read_shift(1);return{s:{c:n,r:t},e:{c:i,r}}}var q1t=I1e;function O1e(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function G1t(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function K1t(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Xs(e){e.l+=2,e.l+=e.read_shift(2)}var X1t={0:Xs,4:Xs,5:Xs,6:Xs,7:K1t,8:Xs,9:Xs,10:Xs,11:Xs,12:Xs,13:G1t,14:Xs,15:Xs,16:Xs,17:Xs,18:Xs,19:Xs,20:Xs,21:O1e};function Y1t(e,t){for(var r=e.l+t,n=[];e.l<r;){var i=e.read_shift(2);e.l-=2;try{n.push(X1t[i](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function hN(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function T$(e,t,r){var n=1536,i=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,i=8;break;case"biff4":n=4,i=6;break;case"biff3":n=3,i=6;break;case"biff2":n=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=pt(i);return a.write_shift(2,n),a.write_shift(2,t),i>4&&a.write_shift(2,29282),i>6&&a.write_shift(2,1997),i>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function Q1t(e,t){return t===0||e.read_shift(2),1200}function J1t(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,i=Jx(e,0,r);return e.read_shift(t+n-e.l),i}function Z1t(e,t){var r=!t||t.biff==8,n=pt(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function evt(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function tvt(e,t,r){var n=e.read_shift(4),i=e.read_shift(1)&3,a=e.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var s=FC(e,0,r);return s.length===0&&(s="Sheet1"),{pos:n,hs:i,dt:a,name:s}}function rvt(e,t){var r=!t||t.biff>=8?2:1,n=pt(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var i=n.slice(0,n.l);return i.l=n.l,i}function nvt(e,t){for(var r=e.l+t,n=e.read_shift(4),i=e.read_shift(4),a=[],s=0;s!=i&&e.l<r;++s)a.push(j1t(e));return a.Count=n,a.Unique=i,a}function ivt(e,t){var r=pt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],i=0;i<e.length;++i)n[i]=D1t(e[i]);var a=fs([r].concat(n));return a.parts=[r.length].concat(n.map(function(s){return s.length})),a}function avt(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function svt(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function ovt(e){var t=z1t(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function lvt(e){return e.read_shift(2),e.read_shift(4)}function vee(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var i=e.read_shift(2);r&&r.biff==2&&(n=1-(i>>15),i&=32767);var a={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[a,i]}function cvt(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2);return{Pos:[t,r],Dim:[n,i],Flags:a,CurTab:s,FirstTab:o,Selected:l,TabRatio:c}}function uvt(){var e=pt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function dvt(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function fvt(e){var t=pt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function hvt(){}function pvt(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=FC(e,0,r),n}function mvt(e,t){var r=e.name||"Arial",n=t&&t.biff==5,i=n?15+r.length:16+2*r.length,a=pt(i);return a.write_shift(2,e.sz*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,r.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),a}function gvt(e){var t=Sf(e);return t.isst=e.read_shift(4),t}function xvt(e,t,r,n){var i=pt(10);return xx(e,t,n,i),i.write_shift(4,r),i}function vvt(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,i=Sf(e);r.biff==2&&e.l++;var a=LC(e,n-e.l,r);return i.val=a,i}function yvt(e,t,r,n,i){var a=!i||i.biff==8,s=pt(8+ +a+(1+a)*r.length);return xx(e,t,n,s),s.write_shift(2,r.length),a&&s.write_shift(1,1),s.write_shift((1+a)*r.length,r,a?"utf16le":"sbcs"),s}function bvt(e,t,r){var n=e.read_shift(2),i=Jx(e,0,r);return[n,i]}function wvt(e,t,r,n){var i=r&&r.biff==5;n||(n=pt(i?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(i?1:2,t.length),i||n.write_shift(1,1),n.write_shift((i?1:2)*t.length,t,i?"sbcs":"utf16le");var a=n.length>n.l?n.slice(0,n.l):n;return a.l==null&&(a.l=a.length),a}var Svt=Jx;function yee(e,t,r){var n=e.l+t,i=r.biff==8||!r.biff?4:2,a=e.read_shift(i),s=e.read_shift(i),o=e.read_shift(2),l=e.read_shift(2);return e.l=n,{s:{r:a,c:o},e:{r:s,c:l}}}function Evt(e,t){var r=t.biff==8||!t.biff?4:2,n=pt(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function Cvt(e){var t=e.read_shift(2),r=e.read_shift(2),n=A1e(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function kvt(e,t){for(var r=e.l+t-2,n=e.read_shift(2),i=e.read_shift(2),a=[];e.l<r;)a.push(A1e(e));if(e.l!==r)throw new Error("MulRK read error");var s=e.read_shift(2);if(a.length!=s-i+1)throw new Error("MulRK length mismatch");return{r:n,c:i,C:s,rkrec:a}}function _vt(e,t){for(var r=e.l+t-2,n=e.read_shift(2),i=e.read_shift(2),a=[];e.l<r;)a.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var s=e.read_shift(2);if(a.length!=s-i+1)throw new Error("MulBlank length mismatch");return{r:n,c:i,C:s,ixfe:a}}function Nvt(e,t,r,n){var i={},a=e.read_shift(4),s=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(2);return i.patternType=o1t[o>>26],n.cellStyles&&(i.alc=a&7,i.fWrap=a>>3&1,i.alcV=a>>4&7,i.fJustLast=a>>7&1,i.trot=a>>8&255,i.cIndent=a>>16&15,i.fShrinkToFit=a>>20&1,i.iReadOrder=a>>22&2,i.fAtrNum=a>>26&1,i.fAtrFnt=a>>27&1,i.fAtrAlc=a>>28&1,i.fAtrBdr=a>>29&1,i.fAtrPat=a>>30&1,i.fAtrProt=a>>31&1,i.dgLeft=s&15,i.dgRight=s>>4&15,i.dgTop=s>>8&15,i.dgBottom=s>>12&15,i.icvLeft=s>>16&127,i.icvRight=s>>23&127,i.grbitDiag=s>>30&3,i.icvTop=o&127,i.icvBottom=o>>7&127,i.icvDiag=o>>14&127,i.dgDiag=o>>21&15,i.icvFore=l&127,i.icvBack=l>>7&127,i.fsxButton=l>>14&1),i}function Avt(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=Nvt(e,t,n.fStyle,r),n}function bee(e,t,r,n){var i=r&&r.biff==5;n||(n=pt(i?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var a=0;return e.numFmtId>0&&i&&(a|=1024),n.write_shift(4,a),n.write_shift(4,0),i||n.write_shift(4,0),n.write_shift(2,0),n}function Tvt(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function Ivt(e){var t=pt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function wee(e,t,r){var n=Sf(e);(r.biff==2||t==9)&&++e.l;var i=R1t(e);return n.val=i,n.t=i===!0||i===!1?"b":"e",n}function Ovt(e,t,r,n,i,a){var s=pt(8);return xx(e,t,n,s),C1e(r,a,s),s}function Pvt(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Sf(e),i=co(e);return n.val=i,n}function Rvt(e,t,r,n){var i=pt(14);return xx(e,t,n,i),mx(r,i),i}var See=H1t;function jvt(e,t,r){var n=e.l+t,i=e.read_shift(2),a=e.read_shift(2);if(r.sbcch=a,a==1025||a==14849)return[a,i];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var s=gx(e,a),o=[];n>e.l;)o.push(LC(e));return[a,i,s,o]}function Eee(e,t,r){var n=e.read_shift(2),i,a={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(i=V1t(e,t-2,r)),a.body=i||e.read_shift(t-2),typeof i=="string"&&(a.Name=i),a}var Dvt=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function Cee(e,t,r){var n=e.l+t,i=e.read_shift(2),a=e.read_shift(1),s=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),l=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var c=gx(e,s,r);i&32&&(c=Dvt[c.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||o===0||!(d>0)?[]:Y2t(e,d,r,o);return{chKey:a,Name:c,itab:l,rgce:f}}function P1e(e,t,r){if(r.biff<8)return Mvt(e,t,r);for(var n=[],i=e.l+t,a=e.read_shift(r.biff>8?4:2);a--!==0;)n.push(W1t(e,r.biff>8?12:6,r));if(e.l!=i)throw new Error("Bad ExternSheet: "+e.l+" != "+i);return n}function Mvt(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=FC(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function Fvt(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),i=e.read_shift(2),a=gx(e,n,r),s=gx(e,i,r);return[a,s]}function Lvt(e,t,r){var n=I1e(e);e.l++;var i=e.read_shift(1);return t-=8,[Q2t(e,t,r),i,n]}function kee(e,t,r){var n=q1t(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,K2t(e,t,r)]}function Bvt(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function Uvt(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),i=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),o=Jx(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:i},o,s,a]}}function $vt(e,t,r){return Uvt(e,t,r)}function zvt(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(yP(e));return r}function Hvt(e){var t=pt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)T1e(e[r],t);return t}function Wvt(e,t,r){if(r&&r.biff<8)return qvt(e,t,r);var n=O1e(e),i=Y1t(e,t-22,n[1]);return{cmo:n,ft:i}}var Vvt={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var i=e.read_shift(1);return e.l+=i,e.l=r,{fmt:n}}};function qvt(e,t,r){e.l+=4;var n=e.read_shift(2),i=e.read_shift(2),a=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var s=[];return s.push((Vvt[n]||xo)(e,t,r)),{cmo:[i,n,a],ft:s}}function Gvt(e,t,r){var n=e.l,i="";try{e.l+=4;var a=(r.lastobj||{cmo:[0,0]}).cmo[1],s;[0,5,7,11,12,14].indexOf(a)==-1?e.l+=6:s=M1t(e,6,r);var o=e.read_shift(2);e.read_shift(2),ka(e,2);var l=e.read_shift(2);e.l+=l;for(var c=1;c<e.lens.length-1;++c){if(e.l-n!=e.lens[c])throw new Error("TxO: bad continue record");var d=e[e.l],f=gx(e,e.lens[c+1]-e.lens[c]-1);if(i+=f,i.length>=(d?o:2*o))break}if(i.length!==o&&i.length!==o*2)throw new Error("cchText: "+o+" != "+i.length);return e.l=n+t,{t:i}}catch{return e.l=n+t,{t:i}}}function Kvt(e,t){var r=yP(e);e.l+=16;var n=U1t(e,t-24);return[r,n]}function Xvt(e){var t=pt(24),r=$i(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)t.write_shift(1,parseInt(n[i],16));return fs([t,$1t(e[1])])}function Yvt(e,t){e.read_shift(2);var r=yP(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(Ho,""),[r,n]}function Qvt(e){var t=e[1].Tooltip,r=pt(10+2*(t.length+1));r.write_shift(2,2048);var n=$i(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var i=0;i<t.length;++i)r.write_shift(2,t.charCodeAt(i));return r.write_shift(2,0),r}function Jvt(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=cee[r]||r,r=e.read_shift(2),t[1]=cee[r]||r,t}function Zvt(e){return e||(e=pt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function eyt(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(N1e(e));return r}function tyt(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(N1e(e));return r}function ryt(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function R1e(e,t,r){if(!r.cellStyles)return xo(e,t);var n=r&&r.biff>=12?4:2,i=e.read_shift(n),a=e.read_shift(n),s=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(2);n==2&&(e.l+=2);var c={s:i,e:a,w:s,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}function nyt(e,t){var r=pt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function iyt(e,t){var r={};return t<32||(e.l+=16,r.header=co(e),r.footer=co(e),e.l+=2),r}function ayt(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var i=e.read_shift(1);return e.l+=3,i&16&&(n.area=!0),n}function syt(e){for(var t=pt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var oyt=Sf,lyt=E1e,cyt=LC;function uyt(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),i={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,i}function dyt(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Sf(e);++e.l;var i=Jx(e,t-7,r);return n.t="str",n.val=i,n}function fyt(e){var t=Sf(e);++e.l;var r=co(e);return t.t="n",t.val=r,t}function hyt(e,t,r){var n=pt(15);return zC(n,e,t),n.write_shift(8,r,"f"),n}function pyt(e){var t=Sf(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function myt(e,t,r){var n=pt(9);return zC(n,e,t),n.write_shift(2,r),n}function gyt(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function xyt(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function vyt(e,t,r){var n=e.l+t,i=Sf(e),a=e.read_shift(2),s=gx(e,a,r);return e.l=n,i.t="str",i.val=s,i}var yyt=[2,3,48,49,131,139,140,245],x5=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=gP({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var c=[],d=D0(1);switch(l.type){case"base64":d=Yl(dc(o));break;case"binary":d=Yl(o);break;case"buffer":case"array":d=o;break}Ps(d,0);var f=d.read_shift(1),p=!!(f&136),m=!1,x=!1;switch(f){case 2:break;case 3:break;case 48:m=!0,p=!0;break;case 49:m=!0,p=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var v=0,b=521;f==2&&(v=d.read_shift(2)),d.l+=3,f!=2&&(v=d.read_shift(4)),v>1048576&&(v=1e6),f!=2&&(b=d.read_shift(2));var w=d.read_shift(2),k=l.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(k=e[d[d.l]]),d.l+=1,d.l+=2),x&&(d.l+=36);for(var E=[],N={},P=Math.min(d.length,f==2?521:b-10-(m?264:0)),R=x?32:11;d.l<P&&d[d.l]!=13;)switch(N={},N.name=VS.utils.decode(k,d.slice(d.l,d.l+R)).replace(/[\u0000\r\n].*$/g,""),d.l+=R,N.type=String.fromCharCode(d.read_shift(1)),f!=2&&!x&&(N.offset=d.read_shift(4)),N.len=d.read_shift(1),f==2&&(N.offset=d.read_shift(2)),N.dec=d.read_shift(1),N.name.length&&E.push(N),f!=2&&(d.l+=x?13:14),N.type){case"B":(!m||N.len!=8)&&l.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+N.type)}if(d[d.l]!==13&&(d.l=b-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=b;var O=0,D=0;for(c[0]=[],D=0;D!=E.length;++D)c[0][D]=E[D].name;for(;v-- >0;){if(d[d.l]===42){d.l+=w;continue}for(++d.l,c[++O]=[],D=0,D=0;D!=E.length;++D){var L=d.slice(d.l,d.l+E[D].len);d.l+=E[D].len,Ps(L,0);var B=VS.utils.decode(k,L);switch(E[D].type){case"C":B.trim().length&&(c[O][D]=B.replace(/\s+$/,""));break;case"D":B.length===8?c[O][D]=new Date(+B.slice(0,4),+B.slice(4,6)-1,+B.slice(6,8)):c[O][D]=B;break;case"F":c[O][D]=parseFloat(B.trim());break;case"+":case"I":c[O][D]=x?L.read_shift(-4,"i")^2147483648:L.read_shift(4,"i");break;case"L":switch(B.trim().toUpperCase()){case"Y":case"T":c[O][D]=!0;break;case"N":case"F":c[O][D]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+B+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));c[O][D]="##MEMO##"+(x?parseInt(B.trim(),10):L.read_shift(4));break;case"N":B=B.replace(/\u0000/g,"").trim(),B&&B!="."&&(c[O][D]=+B||0);break;case"@":c[O][D]=new Date(L.read_shift(-8,"f")-621356832e5);break;case"T":c[O][D]=new Date((L.read_shift(4)-2440588)*864e5+L.read_shift(4));break;case"Y":c[O][D]=L.read_shift(4,"i")/1e4+L.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[O][D]=-L.read_shift(-8,"f");break;case"B":if(m&&E[D].len==8){c[O][D]=L.read_shift(8,"f");break}case"G":case"P":L.l+=E[D].len;break;case"0":if(E[D].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+E[D].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=E,c}function n(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var d=Cb(r(o,c),c);return d["!cols"]=c.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete c.DBF,d}function i(o,l){try{return im(n(o,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function s(o,l){var c=l||{};if(+c.codepage>=0&&Ku(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var d=kl(),f=pO(o,{header:1,raw:!0,cellDates:!0}),p=f[0],m=f.slice(1),x=o["!cols"]||[],v=0,b=0,w=0,k=1;for(v=0;v<p.length;++v){if(((x[v]||{}).DBF||{}).name){p[v]=x[v].DBF.name,++w;continue}if(p[v]!=null){if(++w,typeof p[v]=="number"&&(p[v]=p[v].toString(10)),typeof p[v]!="string")throw new Error("DBF Invalid column name "+p[v]+" |"+typeof p[v]+"|");if(p.indexOf(p[v])!==v){for(b=0;b<1024;++b)if(p.indexOf(p[v]+"_"+b)==-1){p[v]+="_"+b;break}}}}var E=Rn(o["!ref"]),N=[],P=[],R=[];for(v=0;v<=E.e.c-E.s.c;++v){var O="",D="",L=0,B=[];for(b=0;b<m.length;++b)m[b][v]!=null&&B.push(m[b][v]);if(B.length==0||p[v]==null){N[v]="?";continue}for(b=0;b<B.length;++b){switch(typeof B[b]){case"number":D="B";break;case"string":D="C";break;case"boolean":D="L";break;case"object":D=B[b]instanceof Date?"D":"C";break;default:D="C"}L=Math.max(L,String(B[b]).length),O=O&&O!=D?"C":D}L>250&&(L=250),D=((x[v]||{}).DBF||{}).type,D=="C"&&x[v].DBF.len>L&&(L=x[v].DBF.len),O=="B"&&D=="N"&&(O="N",R[v]=x[v].DBF.dec,L=x[v].DBF.len),P[v]=O=="C"||D=="N"?L:a[O]||0,k+=P[v],N[v]=O}var z=d.next(32);for(z.write_shift(4,318902576),z.write_shift(4,m.length),z.write_shift(2,296+32*w),z.write_shift(2,k),v=0;v<4;++v)z.write_shift(4,0);for(z.write_shift(4,0|(+t[Sxe]||3)<<8),v=0,b=0;v<p.length;++v)if(p[v]!=null){var H=d.next(32),te=(p[v].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);H.write_shift(1,te,"sbcs"),H.write_shift(1,N[v]=="?"?"C":N[v],"sbcs"),H.write_shift(4,b),H.write_shift(1,P[v]||a[N[v]]||0),H.write_shift(1,R[v]||0),H.write_shift(1,2),H.write_shift(4,0),H.write_shift(1,0),H.write_shift(4,0),H.write_shift(4,0),b+=P[v]||a[N[v]]||0}var Y=d.next(264);for(Y.write_shift(4,13),v=0;v<65;++v)Y.write_shift(4,0);for(v=0;v<m.length;++v){var W=d.next(k);for(W.write_shift(1,0),b=0;b<p.length;++b)if(p[b]!=null)switch(N[b]){case"L":W.write_shift(1,m[v][b]==null?63:m[v][b]?84:70);break;case"B":W.write_shift(8,m[v][b]||0,"f");break;case"N":var Z="0";for(typeof m[v][b]=="number"&&(Z=m[v][b].toFixed(R[b]||0)),w=0;w<P[b]-Z.length;++w)W.write_shift(1,32);W.write_shift(1,Z,"sbcs");break;case"D":m[v][b]?(W.write_shift(4,("0000"+m[v][b].getFullYear()).slice(-4),"sbcs"),W.write_shift(2,("00"+(m[v][b].getMonth()+1)).slice(-2),"sbcs"),W.write_shift(2,("00"+m[v][b].getDate()).slice(-2),"sbcs")):W.write_shift(8,"00000000","sbcs");break;case"C":var re=String(m[v][b]!=null?m[v][b]:"").slice(0,P[b]);for(W.write_shift(1,re,"sbcs"),w=0;w<P[b]-re.length;++w)W.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:i,to_sheet:n,from_sheet:s}}(),j1e=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+aa(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(p,m){var x=e[m];return typeof x=="number"?MZ(x):x},n=function(p,m,x){var v=m.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return v==59?p:MZ(v)};e["|"]=254;function i(p,m){switch(m.type){case"base64":return a(dc(p),m);case"binary":return a(p,m);case"buffer":return a(pn&&Buffer.isBuffer(p)?p.toString("binary"):nm(p),m);case"array":return a(px(p),m)}throw new Error("Unrecognized type "+m.type)}function a(p,m){var x=p.split(/[\n\r]+/),v=-1,b=-1,w=0,k=0,E=[],N=[],P=null,R={},O=[],D=[],L=[],B=0,z;for(+m.codepage>=0&&Ku(+m.codepage);w!==x.length;++w){B=0;var H=x[w].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),te=H.replace(/;;/g,"\0").split(";").map(function(G){return G.replace(/\u0000/g,";")}),Y=te[0],W;if(H.length>0)switch(Y){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":te[1].charAt(0)=="P"&&N.push(H.slice(3).replace(/;;/g,";"));break;case"C":var Z=!1,re=!1,X=!1,Q=!1,fe=-1,ye=-1;for(k=1;k<te.length;++k)switch(te[k].charAt(0)){case"A":break;case"X":b=parseInt(te[k].slice(1))-1,re=!0;break;case"Y":for(v=parseInt(te[k].slice(1))-1,re||(b=0),z=E.length;z<=v;++z)E[z]=[];break;case"K":W=te[k].slice(1),W.charAt(0)==='"'?W=W.slice(1,W.length-1):W==="TRUE"?W=!0:W==="FALSE"?W=!1:isNaN(ed(W))?isNaN(jy(W).getDate())||(W=ki(W)):(W=ed(W),P!==null&&Sb(P)&&(W=vP(W))),Z=!0;break;case"E":Q=!0;var J=Tv(te[k].slice(1),{r:v,c:b});E[v][b]=[E[v][b],J];break;case"S":X=!0,E[v][b]=[E[v][b],"S5S"];break;case"G":break;case"R":fe=parseInt(te[k].slice(1))-1;break;case"C":ye=parseInt(te[k].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+H)}if(Z&&(E[v][b]&&E[v][b].length==2?E[v][b][0]=W:E[v][b]=W,P=null),X){if(Q)throw new Error("SYLK shared formula cannot have own formula");var ce=fe>-1&&E[fe][ye];if(!ce||!ce[1])throw new Error("SYLK shared formula cannot find base");E[v][b][1]=J1e(ce[1],{r:v-fe,c:b-ye})}break;case"F":var V=0;for(k=1;k<te.length;++k)switch(te[k].charAt(0)){case"X":b=parseInt(te[k].slice(1))-1,++V;break;case"Y":for(v=parseInt(te[k].slice(1))-1,z=E.length;z<=v;++z)E[z]=[];break;case"M":B=parseInt(te[k].slice(1))/20;break;case"F":break;case"G":break;case"P":P=N[parseInt(te[k].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(L=te[k].slice(1).split(" "),z=parseInt(L[0],10);z<=parseInt(L[1],10);++z)B=parseInt(L[2],10),D[z-1]=B===0?{hidden:!0}:{wch:B},M0(D[z-1]);break;case"C":b=parseInt(te[k].slice(1))-1,D[b]||(D[b]={});break;case"R":v=parseInt(te[k].slice(1))-1,O[v]||(O[v]={}),B>0?(O[v].hpt=B,O[v].hpx=My(B)):B===0&&(O[v].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+H)}V<1&&(P=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+H)}}return O.length>0&&(R["!rows"]=O),D.length>0&&(R["!cols"]=D),m&&m.sheetRows&&(E=E.slice(0,m.sheetRows)),[E,R]}function s(p,m){var x=i(p,m),v=x[0],b=x[1],w=Cb(v,m);return aa(b).forEach(function(k){w[k]=b[k]}),w}function o(p,m){return im(s(p,m),m)}function l(p,m,x,v){var b="C;Y"+(x+1)+";X"+(v+1)+";K";switch(p.t){case"n":b+=p.v||0,p.f&&!p.F&&(b+=";E"+D$(p.f,{r:x,c:v}));break;case"b":b+=p.v?"TRUE":"FALSE";break;case"e":b+=p.w||p.v;break;case"d":b+='"'+(p.w||p.v)+'"';break;case"s":b+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function c(p,m){m.forEach(function(x,v){var b="F;W"+(v+1)+" "+(v+1)+" ";x.hidden?b+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=ZS(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=eE(x.wpx)),typeof x.wch=="number"&&(b+=Math.round(x.wch))),b.charAt(b.length-1)!=" "&&p.push(b)})}function d(p,m){m.forEach(function(x,v){var b="F;";x.hidden?b+="M0;":x.hpt?b+="M"+20*x.hpt+";":x.hpx&&(b+="M"+20*tE(x.hpx)+";"),b.length>2&&p.push(b+"R"+(v+1))})}function f(p,m){var x=["ID;PWXL;N;E"],v=[],b=Rn(p["!ref"]),w,k=Array.isArray(p),E=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),p["!cols"]&&c(x,p["!cols"]),p["!rows"]&&d(x,p["!rows"]),x.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var N=b.s.r;N<=b.e.r;++N)for(var P=b.s.c;P<=b.e.c;++P){var R=jr({r:N,c:P});w=k?(p[N]||[])[P]:p[R],!(!w||w.v==null&&(!w.f||w.F))&&v.push(l(w,p,N,P))}return x.join(E)+E+v.join(E)+E+"E"+E}return{to_workbook:o,to_sheet:s,from_sheet:f}}(),D1e=function(){function e(a,s){switch(s.type){case"base64":return t(dc(a),s);case"binary":return t(a,s);case"buffer":return t(pn&&Buffer.isBuffer(a)?a.toString("binary"):nm(a),s);case"array":return t(px(a),s)}throw new Error("Unrecognized type "+s.type)}function t(a,s){for(var o=a.split(`
`),l=-1,c=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++l]=[],c=0;continue}if(!(l<0)){var p=o[d].trim().split(","),m=p[0],x=p[1];++d;for(var v=o[d]||"";(v.match(/["]/g)||[]).length&1&&d<o.length-1;)v+=`
`+o[++d];switch(v=v.trim(),+m){case-1:if(v==="BOT"){f[++l]=[],c=0;continue}else if(v!=="EOD")throw new Error("Unrecognized DIF special command "+v);break;case 0:v==="TRUE"?f[l][c]=!0:v==="FALSE"?f[l][c]=!1:isNaN(ed(x))?isNaN(jy(x).getDate())?f[l][c]=x:f[l][c]=ki(x):f[l][c]=ed(x),++c;break;case 1:v=v.slice(1,v.length-1),v=v.replace(/""/g,'"'),v&&v.match(/^=".*"$/)&&(v=v.slice(2,-1)),f[l][c++]=v!==""?v:null;break}if(v==="EOD")break}}return s&&s.sheetRows&&(f=f.slice(0,s.sheetRows)),f}function r(a,s){return Cb(e(a,s),s)}function n(a,s){return im(r(a,s),s)}var i=function(){var a=function(l,c,d,f,p){l.push(c),l.push(d+","+f),l.push('"'+p.replace(/"/g,'""')+'"')},s=function(l,c,d,f){l.push(c+","+d),l.push(c==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(l){var c=[],d=Rn(l["!ref"]),f,p=Array.isArray(l);a(c,"TABLE",0,1,"sheetjs"),a(c,"VECTORS",0,d.e.r-d.s.r+1,""),a(c,"TUPLES",0,d.e.c-d.s.c+1,""),a(c,"DATA",0,0,"");for(var m=d.s.r;m<=d.e.r;++m){s(c,-1,0,"BOT");for(var x=d.s.c;x<=d.e.c;++x){var v=jr({r:m,c:x});if(f=p?(l[m]||[])[x]:l[v],!f){s(c,1,0,"");continue}switch(f.t){case"n":var b=f.w;!b&&f.v!=null&&(b=f.v),b==null?f.f&&!f.F?s(c,1,0,"="+f.f):s(c,1,0,""):s(c,0,b,"V");break;case"b":s(c,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":s(c,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=fu(f.z||Pr[14],Va(ki(f.v)))),s(c,0,f.w,"V");break;default:s(c,1,0,"")}}}s(c,-1,0,"EOD");var w=`\r
`,k=c.join(w);return k}}();return{to_workbook:n,to_sheet:r,from_sheet:i}}(),M1e=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,p){for(var m=f.split(`
`),x=-1,v=-1,b=0,w=[];b!==m.length;++b){var k=m[b].trim().split(":");if(k[0]==="cell"){var E=$i(k[1]);if(w.length<=E.r)for(x=w.length;x<=E.r;++x)w[x]||(w[x]=[]);switch(x=E.r,v=E.c,k[2]){case"t":w[x][v]=e(k[3]);break;case"v":w[x][v]=+k[3];break;case"vtf":var N=k[k.length-1];case"vtc":switch(k[3]){case"nl":w[x][v]=!!+k[4];break;default:w[x][v]=+k[4];break}k[2]=="vtf"&&(w[x][v]=[w[x][v],N])}}}return p&&p.sheetRows&&(w=w.slice(0,p.sheetRows)),w}function n(f,p){return Cb(r(f,p),p)}function i(f,p){return im(n(f,p),p)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),s=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(f){if(!f||!f["!ref"])return"";for(var p=[],m=[],x,v="",b=Tl(f["!ref"]),w=Array.isArray(f),k=b.s.r;k<=b.e.r;++k)for(var E=b.s.c;E<=b.e.c;++E)if(v=jr({r:k,c:E}),x=w?(f[k]||[])[E]:f[v],!(!x||x.v==null||x.t==="z")){switch(m=["cell",v,"t"],x.t){case"s":case"str":m.push(t(x.v));break;case"n":x.f?(m[2]="vtf",m[3]="n",m[4]=x.v,m[5]=t(x.f)):(m[2]="v",m[3]=x.v);break;case"b":m[2]="vt"+(x.f?"f":"c"),m[3]="nl",m[4]=x.v?"1":"0",m[5]=t(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var N=Va(ki(x.v));m[2]="vtc",m[3]="nd",m[4]=""+N,m[5]=x.w||fu(x.z||Pr[14],N);break;case"e":continue}p.push(m.join(":"))}return p.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function d(f){return[a,s,o,s,c(f),l].join(`
`)}return{to_workbook:i,to_sheet:n,from_sheet:d}}(),Dy=function(){function e(d,f,p,m,x){x.raw?f[p][m]=d:d===""||(d==="TRUE"?f[p][m]=!0:d==="FALSE"?f[p][m]=!1:isNaN(ed(d))?isNaN(jy(d).getDate())?f[p][m]=d:f[p][m]=ki(d):f[p][m]=ed(d))}function t(d,f){var p=f||{},m=[];if(!d||d.length===0)return m;for(var x=d.split(/[\r\n]/),v=x.length-1;v>=0&&x[v].length===0;)--v;for(var b=10,w=0,k=0;k<=v;++k)w=x[k].indexOf(" "),w==-1?w=x[k].length:w++,b=Math.max(b,w);for(k=0;k<=v;++k){m[k]=[];var E=0;for(e(x[k].slice(0,b).trim(),m,k,E,p),E=1;E<=(x[k].length-b)/10+1;++E)e(x[k].slice(b+(E-1)*10,b+E*10).trim(),m,k,E,p)}return p.sheetRows&&(m=m.slice(0,p.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function i(d){for(var f={},p=!1,m=0,x=0;m<d.length;++m)(x=d.charCodeAt(m))==34?p=!p:!p&&x in r&&(f[x]=(f[x]||0)+1);x=[];for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&x.push([f[m],m]);if(!x.length){f=n;for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&x.push([f[m],m])}return x.sort(function(v,b){return v[0]-b[0]||n[v[1]]-n[b[1]]}),r[x.pop()[1]]||44}function a(d,f){var p=f||{},m="",x=p.dense?[]:{},v={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(m=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(m=d.charAt(4),d=d.slice(6)):m=i(d.slice(0,1024)):p&&p.FS?m=p.FS:m=i(d.slice(0,1024));var b=0,w=0,k=0,E=0,N=0,P=m.charCodeAt(0),R=!1,O=0,D=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var L=p.dateNF!=null?axt(p.dateNF):null;function B(){var z=d.slice(E,N),H={};if(z.charAt(0)=='"'&&z.charAt(z.length-1)=='"'&&(z=z.slice(1,-1).replace(/""/g,'"')),z.length===0)H.t="z";else if(p.raw)H.t="s",H.v=z;else if(z.trim().length===0)H.t="s",H.v=z;else if(z.charCodeAt(0)==61)z.charCodeAt(1)==34&&z.charCodeAt(z.length-1)==34?(H.t="s",H.v=z.slice(2,-1).replace(/""/g,'"')):jwt(z)?(H.t="n",H.f=z.slice(1)):(H.t="s",H.v=z);else if(z=="TRUE")H.t="b",H.v=!0;else if(z=="FALSE")H.t="b",H.v=!1;else if(!isNaN(k=ed(z)))H.t="n",p.cellText!==!1&&(H.w=z),H.v=k;else if(!isNaN(jy(z).getDate())||L&&z.match(L)){H.z=p.dateNF||Pr[14];var te=0;L&&z.match(L)&&(z=sxt(z,p.dateNF,z.match(L)||[]),te=1),p.cellDates?(H.t="d",H.v=ki(z,te)):(H.t="n",H.v=Va(ki(z,te))),p.cellText!==!1&&(H.w=fu(H.z,H.v instanceof Date?Va(H.v):H.v)),p.cellNF||delete H.z}else H.t="s",H.v=z;if(H.t=="z"||(p.dense?(x[b]||(x[b]=[]),x[b][w]=H):x[jr({c:w,r:b})]=H),E=N+1,D=d.charCodeAt(E),v.e.c<w&&(v.e.c=w),v.e.r<b&&(v.e.r=b),O==P)++w;else if(w=0,++b,p.sheetRows&&p.sheetRows<=b)return!0}e:for(;N<d.length;++N)switch(O=d.charCodeAt(N)){case 34:D===34&&(R=!R);break;case P:case 10:case 13:if(!R&&B())break e;break}return N-E>0&&B(),x["!ref"]=Jr(v),x}function s(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?a(d,f):Cb(t(d,f),f)}function o(d,f){var p="",m=f.type=="string"?[0,0,0,0]:H$(d,f);switch(f.type){case"base64":p=dc(d);break;case"binary":p=d;break;case"buffer":f.codepage==65001?p=d.toString("utf8"):f.codepage&&typeof VS<"u"||(p=pn&&Buffer.isBuffer(d)?d.toString("binary"):nm(d));break;case"array":p=px(d);break;case"string":p=d;break;default:throw new Error("Unrecognized type "+f.type)}return m[0]==239&&m[1]==187&&m[2]==191?p=si(p.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?p=si(p):f.type=="binary"&&typeof VS<"u",p.slice(0,19)=="socialcalc:version:"?M1e.to_sheet(f.type=="string"?p:si(p),f):s(p,f)}function l(d,f){return im(o(d,f),f)}function c(d){for(var f=[],p=Rn(d["!ref"]),m,x=Array.isArray(d),v=p.s.r;v<=p.e.r;++v){for(var b=[],w=p.s.c;w<=p.e.c;++w){var k=jr({r:v,c:w});if(m=x?(d[v]||[])[w]:d[k],!m||m.v==null){b.push("          ");continue}for(var E=(m.w||(qh(m),m.w)||"").slice(0,10);E.length<10;)E+=" ";b.push(E+(w===0?" ":""))}f.push(b.join(""))}return f.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}}();function byt(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var i=j1e.to_workbook(e,r);return r.WTF=n,i}catch(a){if(r.WTF=n,!a.message.match(/SYLK bad record ID/)&&n)throw a;return Dy.to_workbook(e,t)}}var Mg=function(){function e(J,ce,V){if(J){Ps(J,J.l||0);for(var G=V.Enum||fe;J.l<J.length;){var ie=J.read_shift(2),Ee=G[ie]||G[65535],ne=J.read_shift(2),ae=J.l+ne,me=Ee.f&&Ee.f(J,ne,V);if(J.l=ae,ce(me,Ee,ie))return}}}function t(J,ce){switch(ce.type){case"base64":return r(Yl(dc(J)),ce);case"binary":return r(Yl(J),ce);case"buffer":case"array":return r(J,ce)}throw"Unsupported type "+ce.type}function r(J,ce){if(!J)return J;var V=ce||{},G=V.dense?[]:{},ie="Sheet1",Ee="",ne=0,ae={},me=[],ve=[],q={s:{r:0,c:0},e:{r:0,c:0}},Ne=V.sheetRows||0;if(J[2]==0&&(J[3]==8||J[3]==9)&&J.length>=16&&J[14]==5&&J[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(J[2]==2)V.Enum=fe,e(J,function($e,et,ut){switch(ut){case 0:V.vers=$e,$e>=4096&&(V.qpro=!0);break;case 6:q=$e;break;case 204:$e&&(Ee=$e);break;case 222:Ee=$e;break;case 15:case 51:V.qpro||($e[1].v=$e[1].v.slice(1));case 13:case 14:case 16:ut==14&&($e[2]&112)==112&&($e[2]&15)>1&&($e[2]&15)<15&&($e[1].z=V.dateNF||Pr[14],V.cellDates&&($e[1].t="d",$e[1].v=vP($e[1].v))),V.qpro&&$e[3]>ne&&(G["!ref"]=Jr(q),ae[ie]=G,me.push(ie),G=V.dense?[]:{},q={s:{r:0,c:0},e:{r:0,c:0}},ne=$e[3],ie=Ee||"Sheet"+(ne+1),Ee="");var kt=V.dense?(G[$e[0].r]||[])[$e[0].c]:G[jr($e[0])];if(kt){kt.t=$e[1].t,kt.v=$e[1].v,$e[1].z!=null&&(kt.z=$e[1].z),$e[1].f!=null&&(kt.f=$e[1].f);break}V.dense?(G[$e[0].r]||(G[$e[0].r]=[]),G[$e[0].r][$e[0].c]=$e[1]):G[jr($e[0])]=$e[1];break}},V);else if(J[2]==26||J[2]==14)V.Enum=ye,J[2]==14&&(V.qpro=!0,J.l=0),e(J,function($e,et,ut){switch(ut){case 204:ie=$e;break;case 22:$e[1].v=$e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if($e[3]>ne&&(G["!ref"]=Jr(q),ae[ie]=G,me.push(ie),G=V.dense?[]:{},q={s:{r:0,c:0},e:{r:0,c:0}},ne=$e[3],ie="Sheet"+(ne+1)),Ne>0&&$e[0].r>=Ne)break;V.dense?(G[$e[0].r]||(G[$e[0].r]=[]),G[$e[0].r][$e[0].c]=$e[1]):G[jr($e[0])]=$e[1],q.e.c<$e[0].c&&(q.e.c=$e[0].c),q.e.r<$e[0].r&&(q.e.r=$e[0].r);break;case 27:$e[14e3]&&(ve[$e[14e3][0]]=$e[14e3][1]);break;case 1537:ve[$e[0]]=$e[1],$e[0]==ne&&(ie=$e[1]);break}},V);else throw new Error("Unrecognized LOTUS BOF "+J[2]);if(G["!ref"]=Jr(q),ae[Ee||ie]=G,me.push(Ee||ie),!ve.length)return{SheetNames:me,Sheets:ae};for(var Pe={},ze=[],De=0;De<ve.length;++De)ae[me[De]]?(ze.push(ve[De]||me[De]),Pe[ve[De]]=ae[ve[De]]||ae[me[De]]):(ze.push(ve[De]),Pe[ve[De]]={"!ref":"A1"});return{SheetNames:ze,Sheets:Pe}}function n(J,ce){var V=ce||{};if(+V.codepage>=0&&Ku(+V.codepage),V.type=="string")throw new Error("Cannot write WK1 to JS string");var G=kl(),ie=Rn(J["!ref"]),Ee=Array.isArray(J),ne=[];Bt(G,0,a(1030)),Bt(G,6,l(ie));for(var ae=Math.min(ie.e.r,8191),me=ie.s.r;me<=ae;++me)for(var ve=ga(me),q=ie.s.c;q<=ie.e.c;++q){me===ie.s.r&&(ne[q]=Ui(q));var Ne=ne[q]+ve,Pe=Ee?(J[me]||[])[q]:J[Ne];if(!(!Pe||Pe.t=="z"))if(Pe.t=="n")(Pe.v|0)==Pe.v&&Pe.v>=-32768&&Pe.v<=32767?Bt(G,13,m(me,q,Pe.v)):Bt(G,14,v(me,q,Pe.v));else{var ze=qh(Pe);Bt(G,15,f(me,q,ze.slice(0,239)))}}return Bt(G,1),G.end()}function i(J,ce){var V=ce||{};if(+V.codepage>=0&&Ku(+V.codepage),V.type=="string")throw new Error("Cannot write WK3 to JS string");var G=kl();Bt(G,0,s(J));for(var ie=0,Ee=0;ie<J.SheetNames.length;++ie)(J.Sheets[J.SheetNames[ie]]||{})["!ref"]&&Bt(G,27,Q(J.SheetNames[ie],Ee++));var ne=0;for(ie=0;ie<J.SheetNames.length;++ie){var ae=J.Sheets[J.SheetNames[ie]];if(!(!ae||!ae["!ref"])){for(var me=Rn(ae["!ref"]),ve=Array.isArray(ae),q=[],Ne=Math.min(me.e.r,8191),Pe=me.s.r;Pe<=Ne;++Pe)for(var ze=ga(Pe),De=me.s.c;De<=me.e.c;++De){Pe===me.s.r&&(q[De]=Ui(De));var $e=q[De]+ze,et=ve?(ae[Pe]||[])[De]:ae[$e];if(!(!et||et.t=="z"))if(et.t=="n")Bt(G,23,B(Pe,De,ne,et.v));else{var ut=qh(et);Bt(G,22,O(Pe,De,ne,ut.slice(0,239)))}}++ne}}return Bt(G,1),G.end()}function a(J){var ce=pt(2);return ce.write_shift(2,J),ce}function s(J){var ce=pt(26);ce.write_shift(2,4096),ce.write_shift(2,4),ce.write_shift(4,0);for(var V=0,G=0,ie=0,Ee=0;Ee<J.SheetNames.length;++Ee){var ne=J.SheetNames[Ee],ae=J.Sheets[ne];if(!(!ae||!ae["!ref"])){++ie;var me=Tl(ae["!ref"]);V<me.e.r&&(V=me.e.r),G<me.e.c&&(G=me.e.c)}}return V>8191&&(V=8191),ce.write_shift(2,V),ce.write_shift(1,ie),ce.write_shift(1,G),ce.write_shift(2,0),ce.write_shift(2,0),ce.write_shift(1,1),ce.write_shift(1,2),ce.write_shift(4,0),ce.write_shift(4,0),ce}function o(J,ce,V){var G={s:{c:0,r:0},e:{c:0,r:0}};return ce==8&&V.qpro?(G.s.c=J.read_shift(1),J.l++,G.s.r=J.read_shift(2),G.e.c=J.read_shift(1),J.l++,G.e.r=J.read_shift(2),G):(G.s.c=J.read_shift(2),G.s.r=J.read_shift(2),ce==12&&V.qpro&&(J.l+=2),G.e.c=J.read_shift(2),G.e.r=J.read_shift(2),ce==12&&V.qpro&&(J.l+=2),G.s.c==65535&&(G.s.c=G.e.c=G.s.r=G.e.r=0),G)}function l(J){var ce=pt(8);return ce.write_shift(2,J.s.c),ce.write_shift(2,J.s.r),ce.write_shift(2,J.e.c),ce.write_shift(2,J.e.r),ce}function c(J,ce,V){var G=[{c:0,r:0},{t:"n",v:0},0,0];return V.qpro&&V.vers!=20768?(G[0].c=J.read_shift(1),G[3]=J.read_shift(1),G[0].r=J.read_shift(2),J.l+=2):(G[2]=J.read_shift(1),G[0].c=J.read_shift(2),G[0].r=J.read_shift(2)),G}function d(J,ce,V){var G=J.l+ce,ie=c(J,ce,V);if(ie[1].t="s",V.vers==20768){J.l++;var Ee=J.read_shift(1);return ie[1].v=J.read_shift(Ee,"utf8"),ie}return V.qpro&&J.l++,ie[1].v=J.read_shift(G-J.l,"cstr"),ie}function f(J,ce,V){var G=pt(7+V.length);G.write_shift(1,255),G.write_shift(2,ce),G.write_shift(2,J),G.write_shift(1,39);for(var ie=0;ie<G.length;++ie){var Ee=V.charCodeAt(ie);G.write_shift(1,Ee>=128?95:Ee)}return G.write_shift(1,0),G}function p(J,ce,V){var G=c(J,ce,V);return G[1].v=J.read_shift(2,"i"),G}function m(J,ce,V){var G=pt(7);return G.write_shift(1,255),G.write_shift(2,ce),G.write_shift(2,J),G.write_shift(2,V,"i"),G}function x(J,ce,V){var G=c(J,ce,V);return G[1].v=J.read_shift(8,"f"),G}function v(J,ce,V){var G=pt(13);return G.write_shift(1,255),G.write_shift(2,ce),G.write_shift(2,J),G.write_shift(8,V,"f"),G}function b(J,ce,V){var G=J.l+ce,ie=c(J,ce,V);if(ie[1].v=J.read_shift(8,"f"),V.qpro)J.l=G;else{var Ee=J.read_shift(2);N(J.slice(J.l,J.l+Ee),ie),J.l+=Ee}return ie}function w(J,ce,V){var G=ce&32768;return ce&=-32769,ce=(G?J:0)+(ce>=8192?ce-16384:ce),(G?"":"$")+(V?Ui(ce):ga(ce))}var k={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},E=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function N(J,ce){Ps(J,0);for(var V=[],G=0,ie="",Ee="",ne="",ae="";J.l<J.length;){var me=J[J.l++];switch(me){case 0:V.push(J.read_shift(8,"f"));break;case 1:Ee=w(ce[0].c,J.read_shift(2),!0),ie=w(ce[0].r,J.read_shift(2),!1),V.push(Ee+ie);break;case 2:{var ve=w(ce[0].c,J.read_shift(2),!0),q=w(ce[0].r,J.read_shift(2),!1);Ee=w(ce[0].c,J.read_shift(2),!0),ie=w(ce[0].r,J.read_shift(2),!1),V.push(ve+q+":"+Ee+ie)}break;case 3:if(J.l<J.length){console.error("WK1 premature formula end");return}break;case 4:V.push("("+V.pop()+")");break;case 5:V.push(J.read_shift(2));break;case 6:{for(var Ne="";me=J[J.l++];)Ne+=String.fromCharCode(me);V.push('"'+Ne.replace(/"/g,'""')+'"')}break;case 8:V.push("-"+V.pop());break;case 23:V.push("+"+V.pop());break;case 22:V.push("NOT("+V.pop()+")");break;case 20:case 21:ae=V.pop(),ne=V.pop(),V.push(["AND","OR"][me-20]+"("+ne+","+ae+")");break;default:if(me<32&&E[me])ae=V.pop(),ne=V.pop(),V.push(ne+E[me]+ae);else if(k[me]){if(G=k[me][1],G==69&&(G=J[J.l++]),G>V.length){console.error("WK1 bad formula parse 0x"+me.toString(16)+":|"+V.join("|")+"|");return}var Pe=V.slice(-G);V.length-=G,V.push(k[me][0]+"("+Pe.join(",")+")")}else return me<=7?console.error("WK1 invalid opcode "+me.toString(16)):me<=24?console.error("WK1 unsupported op "+me.toString(16)):me<=30?console.error("WK1 invalid opcode "+me.toString(16)):me<=115?console.error("WK1 unsupported function opcode "+me.toString(16)):console.error("WK1 unrecognized opcode "+me.toString(16))}}V.length==1?ce[1].f=""+V[0]:console.error("WK1 bad formula parse |"+V.join("|")+"|")}function P(J){var ce=[{c:0,r:0},{t:"n",v:0},0];return ce[0].r=J.read_shift(2),ce[3]=J[J.l++],ce[0].c=J[J.l++],ce}function R(J,ce){var V=P(J);return V[1].t="s",V[1].v=J.read_shift(ce-4,"cstr"),V}function O(J,ce,V,G){var ie=pt(6+G.length);ie.write_shift(2,J),ie.write_shift(1,V),ie.write_shift(1,ce),ie.write_shift(1,39);for(var Ee=0;Ee<G.length;++Ee){var ne=G.charCodeAt(Ee);ie.write_shift(1,ne>=128?95:ne)}return ie.write_shift(1,0),ie}function D(J,ce){var V=P(J);V[1].v=J.read_shift(2);var G=V[1].v>>1;if(V[1].v&1)switch(G&7){case 0:G=(G>>3)*5e3;break;case 1:G=(G>>3)*500;break;case 2:G=(G>>3)/20;break;case 3:G=(G>>3)/200;break;case 4:G=(G>>3)/2e3;break;case 5:G=(G>>3)/2e4;break;case 6:G=(G>>3)/16;break;case 7:G=(G>>3)/64;break}return V[1].v=G,V}function L(J,ce){var V=P(J),G=J.read_shift(4),ie=J.read_shift(4),Ee=J.read_shift(2);if(Ee==65535)return G===0&&ie===3221225472?(V[1].t="e",V[1].v=15):G===0&&ie===3489660928?(V[1].t="e",V[1].v=42):V[1].v=0,V;var ne=Ee&32768;return Ee=(Ee&32767)-16446,V[1].v=(1-ne*2)*(ie*Math.pow(2,Ee+32)+G*Math.pow(2,Ee)),V}function B(J,ce,V,G){var ie=pt(14);if(ie.write_shift(2,J),ie.write_shift(1,V),ie.write_shift(1,ce),G==0)return ie.write_shift(4,0),ie.write_shift(4,0),ie.write_shift(2,65535),ie;var Ee=0,ne=0,ae=0,me=0;return G<0&&(Ee=1,G=-G),ne=Math.log2(G)|0,G/=Math.pow(2,ne-31),me=G>>>0,me&2147483648||(G/=2,++ne,me=G>>>0),G-=me,me|=2147483648,me>>>=0,G*=Math.pow(2,32),ae=G>>>0,ie.write_shift(4,ae),ie.write_shift(4,me),ne+=16383+(Ee?32768:0),ie.write_shift(2,ne),ie}function z(J,ce){var V=L(J);return J.l+=ce-14,V}function H(J,ce){var V=P(J),G=J.read_shift(4);return V[1].v=G>>6,V}function te(J,ce){var V=P(J),G=J.read_shift(8,"f");return V[1].v=G,V}function Y(J,ce){var V=te(J);return J.l+=ce-10,V}function W(J,ce){return J[J.l+ce-1]==0?J.read_shift(ce,"cstr"):""}function Z(J,ce){var V=J[J.l++];V>ce-1&&(V=ce-1);for(var G="";G.length<V;)G+=String.fromCharCode(J[J.l++]);return G}function re(J,ce,V){if(!(!V.qpro||ce<21)){var G=J.read_shift(1);J.l+=17,J.l+=1,J.l+=2;var ie=J.read_shift(ce-21,"cstr");return[G,ie]}}function X(J,ce){for(var V={},G=J.l+ce;J.l<G;){var ie=J.read_shift(2);if(ie==14e3){for(V[ie]=[0,""],V[ie][0]=J.read_shift(2);J[J.l];)V[ie][1]+=String.fromCharCode(J[J.l]),J.l++;J.l++}}return V}function Q(J,ce){var V=pt(5+J.length);V.write_shift(2,14e3),V.write_shift(2,ce);for(var G=0;G<J.length;++G){var ie=J.charCodeAt(G);V[V.l++]=ie>127?95:ie}return V[V.l++]=0,V}var fe={0:{n:"BOF",f:ka},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:W},222:{n:"SHEETNAMELP",f:Z},65535:{n:""}},ye={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:R},23:{n:"NUMBER17",f:L},24:{n:"NUMBER18",f:D},25:{n:"FORMULA19",f:z},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:X},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:H},38:{n:"??"},39:{n:"NUMBER27",f:te},40:{n:"FORMULA28",f:Y},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:W},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:re},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:i,to_workbook:t}}();function wyt(e){var t={},r=e.match(bo),n=0,i=!1;if(r)for(;n!=r.length;++n){var a=Dr(r[n]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;t.cp=s$[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=a.val;break;case"<sz":t.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":a.rgb&&(t.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a[0].charCodeAt(1)!==47&&!i)throw new Error("Unrecognized rich format "+a[0])}}return t}var Syt=function(){var e=KS("t"),t=KS("rPr");function r(a){var s=a.match(e);if(!s)return{t:"s",v:""};var o={t:"s",v:Pn(s[1])},l=a.match(t);return l&&(o.s=wyt(l[1])),o}var n=/<(?:\w+:)?r>/g,i=/<\/(?:\w+:)?r>/;return function(s){return s.replace(n,"").split(i).map(r).filter(function(o){return o.v})}}(),Eyt=function(){var t=/(\r\n|\n)/g;function r(i,a,s){var o=[];i.u&&o.push("text-decoration: underline;"),i.uval&&o.push("text-underline-style:"+i.uval+";"),i.sz&&o.push("font-size:"+i.sz+"pt;"),i.outline&&o.push("text-effect: outline;"),i.shadow&&o.push("text-shadow: auto;"),a.push('<span style="'+o.join("")+'">'),i.b&&(a.push("<b>"),s.push("</b>")),i.i&&(a.push("<i>"),s.push("</i>")),i.strike&&(a.push("<s>"),s.push("</s>"));var l=i.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(a.push("<"+l+">"),s.push("</"+l+">")),s.push("</span>"),i}function n(i){var a=[[],i.v,[]];return i.v?(i.s&&r(i.s,a[0],a[2]),a[0].join("")+a[1].replace(t,"<br/>")+a[2].join("")):""}return function(a){return a.map(n).join("")}}(),Cyt=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,kyt=/<(?:\w+:)?r>/,_yt=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function I$(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Pn(si(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=si(e),r&&(n.h=g$(n.t))):e.match(kyt)&&(n.r=si(e),n.t=Pn(si((e.replace(_yt,"").match(Cyt)||[]).join("").replace(bo,""))),r&&(n.h=Eyt(Syt(n.r)))),n):{t:""}}var Nyt=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Ayt=/<(?:\w+:)?(?:si|sstItem)>/g,Tyt=/<\/(?:\w+:)?(?:si|sstItem)>/;function Iyt(e,t){var r=[],n="";if(!e)return r;var i=e.match(Nyt);if(i){n=i[2].replace(Ayt,"").split(Tyt);for(var a=0;a!=n.length;++a){var s=I$(n[a].trim(),t);s!=null&&(r[r.length]=s)}i=Dr(i[1]),r.Count=i.count,r.Unique=i.uniqueCount}return r}var Oyt=/^\s|\s$|[\t\n\r]/;function F1e(e,t){if(!t.bookSST)return"";var r=[ba];r[r.length]=Ft("sst",null,{xmlns:Gx[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var i=e[n],a="<si>";i.r?a+=i.r:(a+="<t",i.t||(i.t=""),i.t.match(Oyt)&&(a+=' xml:space="preserve"'),a+=">"+ti(i.t)+"</t>"),a+="</si>",r[r.length]=a}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function Pyt(e){return[e.read_shift(4),e.read_shift(4)]}function Ryt(e,t){var r=[],n=!1;return sp(e,function(a,s,o){switch(o){case 159:r.Count=a[0],r.Unique=a[1];break;case 19:r.push(a);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(s.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function jyt(e,t){return t||(t=pt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var Dyt=Vxt;function Myt(e){var t=kl();Ct(t,159,jyt(e));for(var r=0;r<e.length;++r)Ct(t,19,Dyt(e[r]));return Ct(t,160),t.end()}function L1e(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function kh(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function Fyt(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=kh(e,4),t.U=kh(e,4),t.W=kh(e,4),t}function Lyt(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},i=e.read_shift(4),a=[];i-- >0;)a.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=a,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function Byt(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(Lyt(e));return t}function Uyt(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function $yt(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=kh(e,4),t.U=kh(e,4),t.W=kh(e,4),t}function zyt(e){var t=$yt(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function B1e(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var i=!1;switch(n.AlgID){case 26126:case 26127:case 26128:i=n.Flags==36;break;case 26625:i=n.Flags==4;break;case 0:i=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!i)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function U1e(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function Hyt(e){var t=kh(e);switch(t.Minor){case 2:return[t.Minor,Wyt(e)];case 3:return[t.Minor,Vyt()];case 4:return[t.Minor,qyt(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function Wyt(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=B1e(e,r),i=U1e(e,e.length-e.l);return{t:"Std",h:n,v:i}}function Vyt(){throw new Error("File is password-protected: ECMA-376 Extensible")}function qyt(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(bo,function(a){var s=Dr(a);switch(wf(s[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=s[o]});break;case"<dataIntegrity":n.encryptedHmacKey=s.encryptedHmacKey,n.encryptedHmacValue=s.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=s.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(s);break;default:throw s[0]}}),n}function Gyt(e,t){var r={},n=r.EncryptionVersionInfo=kh(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var i=e.read_shift(4);return t-=4,r.EncryptionHeader=B1e(e,i),t-=i,r.EncryptionVerifier=U1e(e,t),r}function Kyt(e){var t={},r=t.EncryptionVersionInfo=kh(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function O$(e){var t=0,r,n=L1e(e),i=n.length+1,a,s,o,l,c;for(r=D0(i),r[0]=n.length,a=1;a!=i;++a)r[a]=n[a-1];for(a=i-1;a>=0;--a)s=r[a],o=t&16384?1:0,l=t<<1&32767,c=o|l,t=c^s;return t^52811}var $1e=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(s){return(s/2|s*128)&255},i=function(s,o){return n(s^o)},a=function(s){for(var o=t[s.length-1],l=104,c=s.length-1;c>=0;--c)for(var d=s[c],f=0;f!=7;++f)d&64&&(o^=r[l]),d*=2,--l;return o};return function(s){for(var o=L1e(s),l=a(o),c=o.length,d=D0(16),f=0;f!=16;++f)d[f]=0;var p,m,x;for((c&1)===1&&(p=l>>8,d[c]=i(e[0],p),--c,p=l&255,m=o[o.length-1],d[c]=i(m,p));c>0;)--c,p=l>>8,d[c]=i(o[c],p),--c,p=l&255,d[c]=i(o[c],p);for(c=15,x=15-o.length;x>0;)p=l>>8,d[c]=i(e[x],p),--c,--x,p=l&255,d[c]=i(o[c],p),--c,--x;return d}}(),Xyt=function(e,t,r,n,i){i||(i=t),n||(n=$1e(e));var a,s;for(a=0;a!=t.length;++a)s=t[a],s^=n[r],s=(s>>5|s<<3)&255,i[a]=s,++r;return[i,r,n]},Yyt=function(e){var t=0,r=$1e(e);return function(n){var i=Xyt("",n,t,r);return t=i[1],i[0]}};function Qyt(e,t,r,n){var i={key:ka(e),verificationBytes:ka(e)};return r.password&&(i.verifier=O$(r.password)),n.valid=i.verificationBytes===i.verifier,n.valid&&(n.insitu=Yyt(r.password)),i}function Jyt(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=Kyt(e):n.Data=Gyt(e,t),n}function Zyt(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?Jyt(e,t-2,n):Qyt(e,r.biff>=8?t:t-2,r,n),n}var z1e=function(){function e(i,a){switch(a.type){case"base64":return t(dc(i),a);case"binary":return t(i,a);case"buffer":return t(pn&&Buffer.isBuffer(i)?i.toString("binary"):nm(i),a);case"array":return t(px(i),a)}throw new Error("Unrecognized type "+a.type)}function t(i,a){var s=a||{},o=s.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var p=/\\\w+\b/g,m=0,x,v=-1;x=p.exec(d);){switch(x[0]){case"\\cell":var b=d.slice(m,p.lastIndex-x[0].length);if(b[0]==" "&&(b=b.slice(1)),++v,b.length){var w={v:b,t:"s"};Array.isArray(o)?o[f][v]=w:o[jr({r:f,c:v})]=w}break}m=p.lastIndex}v>c.e.c&&(c.e.c=v)}),o["!ref"]=Jr(c),o}function r(i,a){return im(e(i,a),a)}function n(i){for(var a=["{\\rtf1\\ansi"],s=Rn(i["!ref"]),o,l=Array.isArray(i),c=s.s.r;c<=s.e.r;++c){a.push("\\trowd\\trautofit1");for(var d=s.s.c;d<=s.e.c;++d)a.push("\\cellx"+(d+1));for(a.push("\\pard\\intbl"),d=s.s.c;d<=s.e.c;++d){var f=jr({r:c,c:d});o=l?(i[c]||[])[d]:i[f],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(qh(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function ebt(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function JS(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function tbt(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.max(t,r,n),a=Math.min(t,r,n),s=i-a;if(s===0)return[0,0,t];var o=0,l=0,c=i+a;switch(l=s/(c>1?2-c:c),i){case t:o=((r-n)/s+6)%6;break;case r:o=(n-t)/s+2;break;case n:o=(t-r)/s+4;break}return[o/6,l,c/2]}function rbt(e){var t=e[0],r=e[1],n=e[2],i=r*2*(n<.5?n:1-n),a=n-i/2,s=[a,a,a],o=6*t,l;if(r!==0)switch(o|0){case 0:case 6:l=i*o,s[0]+=i,s[1]+=l;break;case 1:l=i*(2-o),s[0]+=l,s[1]+=i;break;case 2:l=i*(o-2),s[1]+=i,s[2]+=l;break;case 3:l=i*(4-o),s[1]+=l,s[2]+=i;break;case 4:l=i*(o-4),s[2]+=i,s[0]+=l;break;case 5:l=i*(6-o),s[2]+=l,s[0]+=i;break}for(var c=0;c!=3;++c)s[c]=Math.round(s[c]*255);return s}function fO(e,t){if(t===0)return e;var r=tbt(ebt(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),JS(rbt(r))}var H1e=6,nbt=15,ibt=1,oo=H1e;function ZS(e){return Math.floor((e+Math.round(128/oo)/256)*oo)}function eE(e){return Math.floor((e-5)/oo*100+.5)/100}function hO(e){return Math.round((e*oo+5)/oo*256)/256}function fM(e){return hO(eE(ZS(e)))}function P$(e){var t=Math.abs(e-fM(e)),r=oo;if(t>.005)for(oo=ibt;oo<nbt;++oo)Math.abs(e-fM(e))<=t&&(t=Math.abs(e-fM(e)),r=oo);oo=r}function M0(e){e.width?(e.wpx=ZS(e.width),e.wch=eE(e.wpx),e.MDW=oo):e.wpx?(e.wch=eE(e.wpx),e.width=hO(e.wch),e.MDW=oo):typeof e.wch=="number"&&(e.width=hO(e.wch),e.wpx=ZS(e.width),e.MDW=oo),e.customWidth&&delete e.customWidth}var abt=96,W1e=abt;function tE(e){return e*96/W1e}function My(e){return e*W1e/96}var sbt={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function obt(e,t,r,n){t.Borders=[];var i={},a=!1;(e[0].match(bo)||[]).forEach(function(s){var o=Dr(s);switch(wf(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":i={},o.diagonalUp&&(i.diagonalUp=Si(o.diagonalUp)),o.diagonalDown&&(i.diagonalDown=Si(o.diagonalDown)),t.Borders.push(i);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in borders")}})}function lbt(e,t,r,n){t.Fills=[];var i={},a=!1;(e[0].match(bo)||[]).forEach(function(s){var o=Dr(s);switch(wf(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":i={},t.Fills.push(i);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(i),i={};break;case"<patternFill":case"<patternFill>":o.patternType&&(i.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":i.bgColor||(i.bgColor={}),o.indexed&&(i.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(i.bgColor.theme=parseInt(o.theme,10)),o.tint&&(i.bgColor.tint=parseFloat(o.tint)),o.rgb&&(i.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":i.fgColor||(i.fgColor={}),o.theme&&(i.fgColor.theme=parseInt(o.theme,10)),o.tint&&(i.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(i.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fills")}})}function cbt(e,t,r,n){t.Fonts=[];var i={},a=!1;(e[0].match(bo)||[]).forEach(function(s){var o=Dr(s);switch(wf(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(i),i={};break;case"<name":o.val&&(i.name=si(o.val));break;case"<name/>":case"</name>":break;case"<b":i.bold=o.val?Si(o.val):1;break;case"<b/>":i.bold=1;break;case"<i":i.italic=o.val?Si(o.val):1;break;case"<i/>":i.italic=1;break;case"<u":switch(o.val){case"none":i.underline=0;break;case"single":i.underline=1;break;case"double":i.underline=2;break;case"singleAccounting":i.underline=33;break;case"doubleAccounting":i.underline=34;break}break;case"<u/>":i.underline=1;break;case"<strike":i.strike=o.val?Si(o.val):1;break;case"<strike/>":i.strike=1;break;case"<outline":i.outline=o.val?Si(o.val):1;break;case"<outline/>":i.outline=1;break;case"<shadow":i.shadow=o.val?Si(o.val):1;break;case"<shadow/>":i.shadow=1;break;case"<condense":i.condense=o.val?Si(o.val):1;break;case"<condense/>":i.condense=1;break;case"<extend":i.extend=o.val?Si(o.val):1;break;case"<extend/>":i.extend=1;break;case"<sz":o.val&&(i.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(i.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(i.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(i.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=s$[parseInt(o.val,10)];break;case"<color":if(i.color||(i.color={}),o.auto&&(i.color.auto=Si(o.auto)),o.rgb)i.color.rgb=o.rgb.slice(-6);else if(o.indexed){i.color.index=parseInt(o.indexed,10);var l=jg[i.color.index];i.color.index==81&&(l=jg[1]),l||(l=jg[1]),i.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(i.color.theme=parseInt(o.theme,10),o.tint&&(i.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(i.color.rgb=fO(r.themeElements.clrScheme[i.color.theme].rgb,i.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fonts")}})}function ubt(e,t,r){t.NumberFmt=[];for(var n=aa(Pr),i=0;i<n.length;++i)t.NumberFmt[n[i]]=Pr[n[i]];var a=e[0].match(bo);if(a)for(i=0;i<a.length;++i){var s=Dr(a[i]);switch(wf(s[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Pn(si(s.formatCode)),l=parseInt(s.numFmtId,10);if(t.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&t.NumberFmt[l]!=null;--l);t.NumberFmt[l]=o}Ch(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+s[0]+" in numFmts")}}}function dbt(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Ft("numFmt",null,{numFmtId:n,formatCode:ti(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Ft("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var pN=["numFmtId","fillId","fontId","borderId","xfId"],mN=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function fbt(e,t,r){t.CellXf=[];var n,i=!1;(e[0].match(bo)||[]).forEach(function(a){var s=Dr(a),o=0;switch(wf(s[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=s,delete n[0],o=0;o<pN.length;++o)n[pN[o]]&&(n[pN[o]]=parseInt(n[pN[o]],10));for(o=0;o<mN.length;++o)n[mN[o]]&&(n[mN[o]]=Si(n[mN[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};s.vertical&&(l.vertical=s.vertical),s.horizontal&&(l.horizontal=s.horizontal),s.textRotation!=null&&(l.textRotation=s.textRotation),s.indent&&(l.indent=s.indent),s.wrapText&&(l.wrapText=Si(s.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(r&&r.WTF&&!i)throw new Error("unrecognized "+s[0]+" in cellXfs")}})}function hbt(e){var t=[];return t[t.length]=Ft("cellXfs",null),e.forEach(function(r){t[t.length]=Ft("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Ft("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var pbt=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,i=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,c){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(t))&&ubt(f,d,c),(f=o.match(i))&&cbt(f,d,l,c),(f=o.match(n))&&lbt(f,d,l,c),(f=o.match(a))&&obt(f,d,l,c),(f=o.match(r))&&fbt(f,d,c),d}}();function V1e(e,t){var r=[ba,Ft("styleSheet",null,{xmlns:Gx[0],"xmlns:vt":Ha.vt})],n;return e.SSF&&(n=dbt(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=hbt(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function mbt(e,t){var r=e.read_shift(2),n=ho(e);return[r,n]}function gbt(e,t,r){r||(r=pt(6+4*t.length)),r.write_shift(2,e),ps(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function xbt(e,t,r){var n={};n.sz=e.read_shift(2)/20;var i=Jxt(e);i.fItalic&&(n.italic=1),i.fCondense&&(n.condense=1),i.fExtend&&(n.extend=1),i.fShadow&&(n.shadow=1),i.fOutline&&(n.outline=1),i.fStrikeout&&(n.strike=1);var a=e.read_shift(2);switch(a===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var s=e.read_shift(1);s!=0&&(n.underline=s);var o=e.read_shift(1);o>0&&(n.family=o);var l=e.read_shift(1);switch(l>0&&(n.charset=l),e.l++,n.color=Qxt(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=ho(e),n}function vbt(e,t){t||(t=pt(25+4*32)),t.write_shift(2,e.sz*20),Zxt(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),cO(e.color,t);var n=0;return n=2,t.write_shift(1,n),ps(e.name,t),t.length>t.l?t.slice(0,t.l):t}var ybt=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],hM,bbt=xo;function _ee(e,t){t||(t=pt(4*3+8*7+16*1)),hM||(hM=gP(ybt));var r=hM[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(cO({auto:1},t),cO({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function wbt(e,t){var r=e.l+t,n=e.read_shift(2),i=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:i}}function q1e(e,t,r){r||(r=pt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function jw(e,t){return t||(t=pt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Sbt=xo;function Ebt(e,t){return t||(t=pt(51)),t.write_shift(1,0),jw(null,t),jw(null,t),jw(null,t),jw(null,t),jw(null,t),t.length>t.l?t.slice(0,t.l):t}function Cbt(e,t){return t||(t=pt(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),lO(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function kbt(e,t,r){var n=pt(2052);return n.write_shift(4,e),lO(t,n),lO(r,n),n.length>n.l?n.slice(0,n.l):n}function _bt(e,t,r){var n={};n.NumberFmt=[];for(var i in Pr)n.NumberFmt[i]=Pr[i];n.CellXf=[],n.Fonts=[];var a=[],s=!1;return sp(e,function(l,c,d){switch(d){case 44:n.NumberFmt[l[0]]=l[1],Ch(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(l.color.rgb=fO(t.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:a.push(d),s=!0;break;case 38:a.pop(),s=!1;break;default:if(c.T>0)a.push(d);else if(c.T<0)a.pop();else if(!s||r.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function Nbt(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)t[i]!=null&&++r}),r!=0&&(Ct(e,615,td(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)t[i]!=null&&Ct(e,44,gbt(i,t[i]))}),Ct(e,616))}}function Abt(e){var t=1;Ct(e,611,td(t)),Ct(e,43,vbt({sz:12,color:{theme:1},name:"Calibri",family:2})),Ct(e,612)}function Tbt(e){var t=2;Ct(e,603,td(t)),Ct(e,45,_ee({patternType:"none"})),Ct(e,45,_ee({patternType:"gray125"})),Ct(e,604)}function Ibt(e){var t=1;Ct(e,613,td(t)),Ct(e,46,Ebt()),Ct(e,614)}function Obt(e){var t=1;Ct(e,626,td(t)),Ct(e,47,q1e({numFmtId:0},65535)),Ct(e,627)}function Pbt(e,t){Ct(e,617,td(t.length)),t.forEach(function(r){Ct(e,47,q1e(r,0))}),Ct(e,618)}function Rbt(e){var t=1;Ct(e,619,td(t)),Ct(e,48,Cbt({xfId:0,name:"Normal"})),Ct(e,620)}function jbt(e){var t=0;Ct(e,505,td(t)),Ct(e,506)}function Dbt(e){var t=0;Ct(e,508,kbt(t,"TableStyleMedium9","PivotStyleMedium4")),Ct(e,509)}function Mbt(e,t){var r=kl();return Ct(r,278),Nbt(r,e.SSF),Abt(r),Tbt(r),Ibt(r),Obt(r),Pbt(r,t.cellXfs),Rbt(r),jbt(r),Dbt(r),Ct(r,279),r.end()}var Fbt=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Lbt(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(bo)||[]).forEach(function(i){var a=Dr(i);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=a.val;break;case"<a:sysClr":n.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(t.themeElements.clrScheme[Fbt.indexOf(a[0])]=n,n={}):n.name=a[0].slice(3,a[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function Bbt(){}function Ubt(){}var $bt=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,zbt=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Hbt=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Wbt(e,t,r){t.themeElements={};var n;[["clrScheme",$bt,Lbt],["fontScheme",zbt,Bbt],["fmtScheme",Hbt,Ubt]].forEach(function(i){if(!(n=e.match(i[1])))throw new Error(i[0]+" not found in themeElements");i[2](n,t,r)})}var Vbt=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function G1e(e,t){(!e||e.length===0)&&(e=R$());var r,n={};if(!(r=e.match(Vbt)))throw new Error("themeElements not found in theme");return Wbt(r[0],n,t),n.raw=e,n}function R$(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[ba];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function qbt(e,t,r){var n=e.l+t,i=e.read_shift(4);if(i!==124226){if(!r.cellStyles){e.l=n;return}var a=e.slice(e.l);e.l=n;var s;try{s=Bxe(a,{type:"array"})}catch{return}var o=Ql(s,"theme/theme/theme1.xml",!0);if(o)return G1e(o,r)}}function Gbt(e){return e.read_shift(4)}function Kbt(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=Xbt(e,4);break;case 2:t.xclrValue=_1e(e);break;case 3:t.xclrValue=Gbt(e);break;case 4:e.l+=4;break}return e.l+=8,t}function Xbt(e,t){return xo(e,t)}function Ybt(e,t){return xo(e,t)}function Qbt(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=Kbt(e);break;case 6:n[1]=Ybt(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function Jbt(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var i=e.read_shift(2),a=[];i-- >0;)a.push(Qbt(e,r-e.l));return{ixfe:n,ext:a}}function Zbt(e,t){t.forEach(function(r){switch(r[0]){}})}function ewt(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:ho(e)}}function twt(e){var t=pt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),ps(e.name,t),t.slice(0,t.l)}function rwt(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function nwt(e){var t=pt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function iwt(e,t){var r=pt(8+2*t.length);return r.write_shift(4,e),ps(t,r),r.slice(0,r.l)}function awt(e){return e.l+=4,e.read_shift(4)!=0}function swt(e,t){var r=pt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function owt(e,t,r){var n={Types:[],Cell:[],Value:[]},i=r||{},a=[],s=!1,o=2;return sp(e,function(l,c,d){switch(d){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:a.push(d),s=!0;break;case 36:a.pop(),s=!1;break;default:if(!c.T){if(!s||i.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function lwt(){var e=kl();return Ct(e,332),Ct(e,334,td(1)),Ct(e,335,twt({name:"XLDAPR",version:12e4,flags:3496657072})),Ct(e,336),Ct(e,339,iwt(1,"XLDAPR")),Ct(e,52),Ct(e,35,td(514)),Ct(e,4096,td(0)),Ct(e,4097,$c(1)),Ct(e,36),Ct(e,53),Ct(e,340),Ct(e,337,swt(1)),Ct(e,51,nwt([[1,0]])),Ct(e,338),Ct(e,333),e.end()}function cwt(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var i=!1,a=2,s;return e.replace(bo,function(o){var l=Dr(o);switch(wf(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var c=0;c<n.Types.length;++c)n.Types[c].name==l.name&&(s=n.Types[c]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):a==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;case"<rvb":if(!s)break;s.offsets||(s.offsets=[]),s.offsets.push(+l.i);break;default:if(!i&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function K1e(){var e=[ba];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function uwt(e){var t=[];if(!e)return t;var r=1;return(e.match(bo)||[]).forEach(function(n){var i=Dr(n);switch(i[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete i[0],i.i?r=i.i:i.i=r,t.push(i);break}}),t}function dwt(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=jr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function fwt(e,t,r){var n=[];return sp(e,function(a,s,o){switch(o){case 63:n.push(a);break;default:if(!s.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function hwt(e,t,r,n){if(!e)return e;var i=n||{},a=!1;sp(e,function(o,l,c){switch(c){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!l.T){if(!a||i.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}},i)}function pwt(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var uv=1024;function X1e(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),i=[Ft("xml",null,{"xmlns:v":ql.v,"xmlns:o":ql.o,"xmlns:x":ql.x,"xmlns:mv":ql.mv}).replace(/\/>/,">"),Ft("o:shapelayout",Ft("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Ft("v:shapetype",[Ft("v:stroke",null,{joinstyle:"miter"}),Ft("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];uv<e*1e3;)uv+=1e3;return t.forEach(function(a){var s=$i(a[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Ft("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,c=Ft("v:fill",l,o),d={on:"t",obscured:"t"};++uv,i=i.concat(["<v:shape"+XS({id:"_x0000_s"+uv,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",c,Ft("v:shadow",null,d),Ft("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Ds("x:Anchor",[s.c+1,0,s.r+1,0,s.c+3,20,s.r+5,20].join(",")),Ds("x:AutoFill","False"),Ds("x:Row",String(s.r)),Ds("x:Column",String(s.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function Nee(e,t,r,n){var i=Array.isArray(e),a;t.forEach(function(s){var o=$i(s.ref);if(i?(e[o.r]||(e[o.r]=[]),a=e[o.r][o.c]):a=e[s.ref],!a){a={t:"z"},i?e[o.r][o.c]=a:e[s.ref]=a;var l=Rn(e["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var c=Jr(l);c!==e["!ref"]&&(e["!ref"]=c)}a.c||(a.c=[]);var d={a:s.author,t:s.t,r:s.r,T:r};s.h&&(d.h=s.h);for(var f=a.c.length-1;f>=0;--f){if(!r&&a.c[f].T)return;r&&!a.c[f].T&&a.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}a.c.push(d)})}function mwt(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],i=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);i&&i[1]&&i[1].split(/<\/\w*:?author>/).forEach(function(s){if(!(s===""||s.trim()==="")){var o=s.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var a=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(s){if(!(s===""||s.trim()==="")){var o=s.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=Dr(o[0]),c={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=$i(l.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=s.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),p=!!f&&!!f[1]&&I$(f[1])||{r:"",t:"",h:""};c.r=p.r,p.r=="<t></t>"&&(p.t=p.h=""),c.t=(p.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(c.h=p.h),n.push(c)}}}}),n}function Y1e(e){var t=[ba,Ft("comments",null,{xmlns:Gx[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(i){var a=ti(i.a);r.indexOf(a)==-1&&(r.push(a),t.push("<author>"+a+"</author>")),i.T&&i.ID&&r.indexOf("tc="+i.ID)==-1&&(r.push("tc="+i.ID),t.push("<author>tc="+i.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var i=0,a=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?i=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(i=r.indexOf(ti(l.a))),a.push(l.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+i+'"><text>'),a.length<=1)t.push(Ds("t",ti(a[0]||"")));else{for(var s=`Comment:
    `+a[0]+`
`,o=1;o<a.length;++o)s+=`Reply:
    `+a[o]+`
`;t.push(Ds("t",ti(s)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function gwt(e,t){var r=[],n=!1,i={},a=0;return e.replace(bo,function(o,l){var c=Dr(o);switch(wf(c[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":i={author:c.personId,guid:c.id,ref:c.ref,T:1};break;case"</threadedComment>":i.t!=null&&r.push(i);break;case"<text>":case"<text":a=l+o.length;break;case"</text>":i.t=e.slice(a,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return o}),r}function xwt(e,t,r){var n=[ba,Ft("ThreadedComments",null,{xmlns:Ha.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(i){var a="";(i[1]||[]).forEach(function(s,o){if(!s.T){delete s.ID;return}s.a&&t.indexOf(s.a)==-1&&t.push(s.a);var l={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?a=l.id:l.parentId=a,s.ID=l.id,s.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(s.a)).slice(-12)+"}"),n.push(Ft("threadedComment",Ds("text",s.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function vwt(e,t){var r=[],n=!1;return e.replace(bo,function(a){var s=Dr(a);switch(wf(s[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:s.displayname,id:s.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+s[0]+" in threaded comments")}return a}),r}function ywt(e){var t=[ba,Ft("personList",null,{xmlns:Ha.TCMNT,"xmlns:x":Gx[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Ft("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function bwt(e){var t={};t.iauthor=e.read_shift(4);var r=Qx(e);return t.rfx=r.s,t.ref=jr(r.s),e.l+=16,t}function wwt(e,t){return t==null&&(t=pt(36)),t.write_shift(4,e[1].iauthor),kb(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var Swt=ho;function Ewt(e){return ps(e.slice(0,54))}function Cwt(e,t){var r=[],n=[],i={},a=!1;return sp(e,function(o,l,c){switch(c){case 632:n.push(o);break;case 635:i=o;break;case 637:i.t=o.t,i.h=o.h,i.r=o.r;break;case 636:if(i.author=n[i.iauthor],delete i.iauthor,t.sheetRows&&i.rfx&&t.sheetRows<=i.rfx.r)break;i.t||(i.t=""),delete i.rfx,r.push(i);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!a||t.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}}),r}function kwt(e){var t=kl(),r=[];return Ct(t,628),Ct(t,630),e.forEach(function(n){n[1].forEach(function(i){r.indexOf(i.a)>-1||(r.push(i.a.slice(0,54)),Ct(t,632,Ewt(i.a)))})}),Ct(t,631),Ct(t,633),e.forEach(function(n){n[1].forEach(function(i){i.iauthor=r.indexOf(i.a);var a={s:$i(n[0]),e:$i(n[0])};Ct(t,635,wwt([a,i])),i.t&&i.t.length>0&&Ct(t,637,Gxt(i)),Ct(t,636),delete i.iauthor})}),Ct(t,634),Ct(t,629),t.end()}var _wt="application/vnd.ms-office.vbaProject";function Nwt(e){var t=vr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var i=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");vr.utils.cfb_add(t,i,e.FileIndex[n].content)}}),vr.write(t)}function Awt(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var i=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&vr.utils.cfb_add(e,i,t.FileIndex[n].content)}})}var Q1e=["xlsb","xlsm","xlam","biff8","xla"];function Twt(){return{"!type":"dialog"}}function Iwt(){return{"!type":"dialog"}}function Owt(){return{"!type":"macro"}}function Pwt(){return{"!type":"macro"}}var Tv=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,i,a,s){var o=!1,l=!1;a.length==0?l=!0:a.charAt(0)=="["&&(l=!0,a=a.slice(1,-1)),s.length==0?o=!0:s.charAt(0)=="["&&(o=!0,s=s.slice(1,-1));var c=a.length>0?parseInt(a,10)|0:0,d=s.length>0?parseInt(s,10)|0:0;return o?d+=t.c:--d,l?c+=t.r:--c,i+(o?"":"$")+Ui(d)+(l?"":"$")+ga(c)}return function(i,a){return t=a,i.replace(e,r)}}(),j$=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,D$=function(){return function(t,r){return t.replace(j$,function(n,i,a,s,o,l){var c=w$(s)-(a?0:r.c),d=b$(l)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",p=c==0?"":a?c+1:"["+c+"]";return i+"R"+f+"C"+p})}}();function J1e(e,t){return e.replace(j$,function(r,n,i,a,s,o){return n+(i=="$"?i+a:Ui(w$(a)+t.c))+(s=="$"?s+o:ga(b$(o)+t.r))})}function Rwt(e,t,r){var n=Tl(t),i=n.s,a=$i(r),s={r:a.r-i.r,c:a.c-i.c};return J1e(e,s)}function jwt(e){return e.length!=1}function Aee(e){return e.replace(/_xlfn\./g,"")}function Ea(e){e.l+=1}function F0(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Z1e(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return eve(e);r.biff==12&&(n=4)}var i=e.read_shift(n),a=e.read_shift(n),s=F0(e),o=F0(e);return{s:{r:i,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function eve(e){var t=F0(e),r=F0(e),n=e.read_shift(1),i=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:i,cRel:r[1],rRel:r[2]}}}function Dwt(e,t,r){if(r.biff<8)return eve(e);var n=e.read_shift(r.biff==12?4:2),i=e.read_shift(r.biff==12?4:2),a=F0(e),s=F0(e);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:i,c:s[0],cRel:s[1],rRel:s[2]}}}function tve(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return Mwt(e);var n=e.read_shift(r&&r.biff==12?4:2),i=F0(e);return{r:n,c:i[0],cRel:i[1],rRel:i[2]}}function Mwt(e){var t=F0(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function Fwt(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Lwt(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return Bwt(e);var i=e.read_shift(n>=12?4:2),a=e.read_shift(2),s=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;i>524287;)i-=1048576;if(s==1)for(;a>8191;)a=a-16384;return{r:i,c:a,cRel:s,rRel:o}}function Bwt(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,i=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),i==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:i,rRel:n}}function Uwt(e,t,r){var n=(e[e.l++]&96)>>5,i=Z1e(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,i]}function $wt(e,t,r){var n=(e[e.l++]&96)>>5,i=e.read_shift(2,"i"),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}var s=Z1e(e,a,r);return[n,i,s]}function zwt(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Hwt(e,t,r){var n=(e[e.l++]&96)>>5,i=e.read_shift(2),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}return e.l+=a,[n,i]}function Wwt(e,t,r){var n=(e[e.l++]&96)>>5,i=Dwt(e,t-1,r);return[n,i]}function Vwt(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function Tee(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function qwt(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),i=[],a=0;a<=n;++a)i.push(e.read_shift(r&&r.biff==2?1:2));return i}function Gwt(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Kwt(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Xwt(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function Ywt(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function rve(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function Qwt(e){return e.read_shift(2),rve(e)}function Jwt(e){return e.read_shift(2),rve(e)}function Zwt(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var i=tve(e,0,r);return[n,i]}function e2t(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var i=Lwt(e,0,r);return[n,i]}function t2t(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var i=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var a=tve(e,0,r);return[n,i,a]}function r2t(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var i=e.read_shift(r&&r.biff<=3?1:2);return[aSt[i],ave[i],n]}function n2t(e,t,r){var n=e[e.l++],i=e.read_shift(1),a=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:i2t(e);return[i,(a[0]===0?ave:iSt)[a[1]]]}function i2t(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function a2t(e,t,r){e.l+=r&&r.biff==2?3:4}function s2t(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),i=e.read_shift(r&&r.biff==2?1:2);return[n,i]}function o2t(e){return e.l++,op[e.read_shift(1)]}function l2t(e){return e.l++,e.read_shift(2)}function c2t(e){return e.l++,e.read_shift(1)!==0}function u2t(e){return e.l++,co(e)}function d2t(e,t,r){return e.l++,FC(e,t-1,r)}function f2t(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=fa(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=op[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=co(e);break;case 2:r[1]=Jx(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function h2t(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),i=[],a=0;a!=n;++a)i.push((r.biff==12?Qx:yP)(e));return i}function p2t(e,t,r){var n=0,i=0;r.biff==12?(n=e.read_shift(4),i=e.read_shift(4)):(i=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--i==0&&(i=256));for(var a=0,s=[];a!=n&&(s[a]=[]);++a)for(var o=0;o!=i;++o)s[a][o]=f2t(e,r.biff);return s}function m2t(e,t,r){var n=e.read_shift(1)>>>5&3,i=!r||r.biff>=8?4:2,a=e.read_shift(i);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,a]}function g2t(e,t,r){if(r.biff==5)return x2t(e);var n=e.read_shift(1)>>>5&3,i=e.read_shift(2),a=e.read_shift(4);return[n,i,a]}function x2t(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function v2t(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var i=e.read_shift(r&&r.biff==2?1:2);return[n,i]}function y2t(e,t,r){var n=e.read_shift(1)>>>5&3,i=e.read_shift(r&&r.biff==2?1:2);return[n,i]}function b2t(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function w2t(e,t,r){var n=(e[e.l++]&96)>>5,i=e.read_shift(2),a=4;if(r)switch(r.biff){case 5:a=15;break;case 12:a=6;break}return e.l+=a,[n,i]}var S2t=xo,E2t=xo,C2t=xo;function BC(e,t,r){return e.l+=2,[Fwt(e)]}function M$(e){return e.l+=6,[]}var k2t=BC,_2t=M$,N2t=M$,A2t=BC;function nve(e){return e.l+=2,[ka(e),e.read_shift(2)&1]}var T2t=BC,I2t=nve,O2t=M$,P2t=BC,R2t=BC,j2t=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function D2t(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),i=e.read_shift(2),a=e.read_shift(2),s=j2t[r>>2&31];return{ixti:t,coltype:r&3,rt:s,idx:n,c:i,C:a}}function M2t(e){return e.l+=2,[e.read_shift(4)]}function F2t(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function L2t(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function B2t(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function U2t(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function $2t(e){return e.l+=4,[0,0]}var Iee={1:{n:"PtgExp",f:s2t},2:{n:"PtgTbl",f:C2t},3:{n:"PtgAdd",f:Ea},4:{n:"PtgSub",f:Ea},5:{n:"PtgMul",f:Ea},6:{n:"PtgDiv",f:Ea},7:{n:"PtgPower",f:Ea},8:{n:"PtgConcat",f:Ea},9:{n:"PtgLt",f:Ea},10:{n:"PtgLe",f:Ea},11:{n:"PtgEq",f:Ea},12:{n:"PtgGe",f:Ea},13:{n:"PtgGt",f:Ea},14:{n:"PtgNe",f:Ea},15:{n:"PtgIsect",f:Ea},16:{n:"PtgUnion",f:Ea},17:{n:"PtgRange",f:Ea},18:{n:"PtgUplus",f:Ea},19:{n:"PtgUminus",f:Ea},20:{n:"PtgPercent",f:Ea},21:{n:"PtgParen",f:Ea},22:{n:"PtgMissArg",f:Ea},23:{n:"PtgStr",f:d2t},26:{n:"PtgSheet",f:F2t},27:{n:"PtgEndSheet",f:L2t},28:{n:"PtgErr",f:o2t},29:{n:"PtgBool",f:c2t},30:{n:"PtgInt",f:l2t},31:{n:"PtgNum",f:u2t},32:{n:"PtgArray",f:Vwt},33:{n:"PtgFunc",f:r2t},34:{n:"PtgFuncVar",f:n2t},35:{n:"PtgName",f:m2t},36:{n:"PtgRef",f:Zwt},37:{n:"PtgArea",f:Uwt},38:{n:"PtgMemArea",f:v2t},39:{n:"PtgMemErr",f:S2t},40:{n:"PtgMemNoMem",f:E2t},41:{n:"PtgMemFunc",f:y2t},42:{n:"PtgRefErr",f:b2t},43:{n:"PtgAreaErr",f:zwt},44:{n:"PtgRefN",f:e2t},45:{n:"PtgAreaN",f:Wwt},46:{n:"PtgMemAreaN",f:B2t},47:{n:"PtgMemNoMemN",f:U2t},57:{n:"PtgNameX",f:g2t},58:{n:"PtgRef3d",f:t2t},59:{n:"PtgArea3d",f:$wt},60:{n:"PtgRefErr3d",f:w2t},61:{n:"PtgAreaErr3d",f:Hwt},255:{}},z2t={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},H2t={1:{n:"PtgElfLel",f:nve},2:{n:"PtgElfRw",f:P2t},3:{n:"PtgElfCol",f:k2t},6:{n:"PtgElfRwV",f:R2t},7:{n:"PtgElfColV",f:A2t},10:{n:"PtgElfRadical",f:T2t},11:{n:"PtgElfRadicalS",f:O2t},13:{n:"PtgElfColS",f:_2t},15:{n:"PtgElfColSV",f:N2t},16:{n:"PtgElfRadicalLel",f:I2t},25:{n:"PtgList",f:D2t},29:{n:"PtgSxName",f:M2t},255:{}},W2t={0:{n:"PtgAttrNoop",f:$2t},1:{n:"PtgAttrSemi",f:Ywt},2:{n:"PtgAttrIf",f:Kwt},4:{n:"PtgAttrChoose",f:qwt},8:{n:"PtgAttrGoto",f:Gwt},16:{n:"PtgAttrSum",f:a2t},32:{n:"PtgAttrBaxcel",f:Tee},33:{n:"PtgAttrBaxcel",f:Tee},64:{n:"PtgAttrSpace",f:Qwt},65:{n:"PtgAttrSpaceSemi",f:Jwt},128:{n:"PtgAttrIfError",f:Xwt},255:{}};function UC(e,t,r,n){if(n.biff<8)return xo(e,t);for(var i=e.l+t,a=[],s=0;s!==r.length;++s)switch(r[s][0]){case"PtgArray":r[s][1]=p2t(e,0,n),a.push(r[s][1]);break;case"PtgMemArea":r[s][2]=h2t(e,r[s][1],n),a.push(r[s][2]);break;case"PtgExp":n&&n.biff==12&&(r[s][1][1]=e.read_shift(4),a.push(r[s][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[s][0]}return t=i-e.l,t!==0&&a.push(xo(e,t)),a}function $C(e,t,r){for(var n=e.l+t,i,a,s=[];n!=e.l;)t=n-e.l,a=e[e.l],i=Iee[a]||Iee[z2t[a]],(a===24||a===25)&&(i=(a===24?H2t:W2t)[e[e.l+1]]),!i||!i.f?xo(e,t):s.push([i.n,i.f(e,t,r)]);return s}function V2t(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],i=[],a=0;a<n.length;++a){var s=n[a];if(s)switch(s[0]){case 2:i.push('"'+s[1].replace(/"/g,'""')+'"');break;default:i.push(s[1])}else i.push("")}t.push(i.join(","))}return t.join(";")}var q2t={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function G2t(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function ive(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var i="";if(r.biff>8)switch(e[n[0]][0]){case 357:return i=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?i:i+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return i=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?i:i+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return e[n[0]][0][3]?(i=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?i:i+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function Oee(e,t,r){var n=ive(e,t,r);return n=="#REF"?n:G2t(n,r)}function no(e,t,r,n,i){var a=i&&i.biff||8,s={s:{c:0,r:0}},o=[],l,c,d,f=0,p=0,m,x="";if(!e[0]||!e[0][0])return"";for(var v=-1,b="",w=0,k=e[0].length;w<k;++w){var E=e[0][w];switch(E[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),v>=0){switch(e[0][v][1][0]){case 0:b=ea(" ",e[0][v][1][1]);break;case 1:b=ea("\r",e[0][v][1][1]);break;default:if(b="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}c=c+b,v=-1}o.push(c+q2t[E[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=j2(E[1][1],s,i),o.push(D2(d,a));break;case"PtgRefN":d=r?j2(E[1][1],r,i):E[1][1],o.push(D2(d,a));break;case"PtgRef3d":f=E[1][1],d=j2(E[1][2],s,i),x=Oee(n,f,i),o.push(x+"!"+D2(d,a));break;case"PtgFunc":case"PtgFuncVar":var N=E[1][0],P=E[1][1];N||(N=0),N&=127;var R=N==0?[]:o.slice(-N);o.length-=N,P==="User"&&(P=R.shift()),o.push(P+"("+R.join(",")+")");break;case"PtgBool":o.push(E[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(E[1]);break;case"PtgNum":o.push(String(E[1]));break;case"PtgStr":o.push('"'+E[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(E[1]);break;case"PtgAreaN":m=see(E[1][1],r?{s:r}:s,i),o.push(cM(m,i));break;case"PtgArea":m=see(E[1][1],s,i),o.push(cM(m,i));break;case"PtgArea3d":f=E[1][1],m=E[1][2],x=Oee(n,f,i),o.push(x+"!"+cM(m,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=E[1][2];var O=(n.names||[])[p-1]||(n[0]||[])[p],D=O?O.Name:"SH33TJSNAME"+String(p);D&&D.slice(0,6)=="_xlfn."&&!i.xlfn&&(D=D.slice(6)),o.push(D);break;case"PtgNameX":var L=E[1][1];p=E[1][2];var B;if(i.biff<=5)L<0&&(L=-L),n[L]&&(B=n[L][p]);else{var z="";if(((n[L]||[])[0]||[])[0]==14849||(((n[L]||[])[0]||[])[0]==1025?n[L][p]&&n[L][p].itab>0&&(z=n.SheetNames[n[L][p].itab-1]+"!"):z=n.SheetNames[p-1]+"!"),n[L]&&n[L][p])z+=n[L][p].Name;else if(n[0]&&n[0][p])z+=n[0][p].Name;else{var H=(ive(n,L,i)||"").split(";;");H[p-1]?z=H[p-1]:z+="SH33TJSERRX"}o.push(z);break}B||(B={Name:"SH33TJSERRY"}),o.push(B.Name);break;case"PtgParen":var te="(",Y=")";if(v>=0){switch(b="",e[0][v][1][0]){case 2:te=ea(" ",e[0][v][1][1])+te;break;case 3:te=ea("\r",e[0][v][1][1])+te;break;case 4:Y=ea(" ",e[0][v][1][1])+Y;break;case 5:Y=ea("\r",e[0][v][1][1])+Y;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}v=-1}o.push(te+o.pop()+Y);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:E[1][1],r:E[1][0]};var W={c:r.c,r:r.r};if(n.sharedf[jr(d)]){var Z=n.sharedf[jr(d)];o.push(no(Z,s,W,n,i))}else{var re=!1;for(l=0;l!=n.arrayf.length;++l)if(c=n.arrayf[l],!(d.c<c[0].s.c||d.c>c[0].e.c)&&!(d.r<c[0].s.r||d.r>c[0].e.r)){o.push(no(c[1],s,W,n,i)),re=!0;break}re||o.push(E[1])}break;case"PtgArray":o.push("{"+V2t(E[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":v=w;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+E[1].idx+"[#"+E[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(E));default:throw new Error("Unrecognized Formula Token: "+String(E))}var X=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&v>=0&&X.indexOf(e[0][w][0])==-1){E=e[0][v];var Q=!0;switch(E[1][0]){case 4:Q=!1;case 0:b=ea(" ",E[1][1]);break;case 5:Q=!1;case 1:b=ea("\r",E[1][1]);break;default:if(b="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+E[1][0])}o.push((Q?b:"")+o.pop()+(Q?"":b)),v=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function K2t(e,t,r){var n=e.l+t,i=r.biff==2?1:2,a,s=e.read_shift(i);if(s==65535)return[[],xo(e,t-2)];var o=$C(e,s,r);return t!==s+i&&(a=UC(e,t-s-i,o,r)),e.l=n,[o,a]}function X2t(e,t,r){var n=e.l+t,i=r.biff==2?1:2,a,s=e.read_shift(i);if(s==65535)return[[],xo(e,t-2)];var o=$C(e,s,r);return t!==s+i&&(a=UC(e,t-s-i,o,r)),e.l=n,[o,a]}function Y2t(e,t,r,n){var i=e.l+t,a=$C(e,n,r),s;return i!==e.l&&(s=UC(e,i-e.l,a,r)),[a,s]}function Q2t(e,t,r){var n=e.l+t,i,a=e.read_shift(2),s=$C(e,a,r);return a==65535?[[],xo(e,t-2)]:(t!==a+2&&(i=UC(e,n-a-2,s,r)),[s,i])}function J2t(e){var t;if(fh(e,e.l+6)!==65535)return[co(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function Z2t(e){if(e==null){var t=pt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return mx(e);return mx(0)}function pM(e,t,r){var n=e.l+t,i=Sf(e);r.biff==2&&++e.l;var a=J2t(e),s=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=X2t(e,n-e.l,r);return{cell:i,val:a[0],formula:o,shared:s>>3&1,tt:a[1]}}function eSt(e,t,r,n,i){var a=xx(t,r,i),s=Z2t(e.v),o=pt(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var c=pt(e.bf.length),d=0;d<e.bf.length;++d)c[d]=e.bf[d];var f=fs([a,s,o,c]);return f}function bP(e,t,r){var n=e.read_shift(4),i=$C(e,n,r),a=e.read_shift(4),s=a>0?UC(e,a,i,r):null;return[i,s]}var tSt=bP,wP=bP,rSt=bP,nSt=bP,iSt={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},ave={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},aSt={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Pee(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function sSt(e){var t="of:="+e.replace(j$,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function mM(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function oSt(e){return e.replace(/\./,"!")}var F2={},Iv={},L2=typeof Map<"u";function F$(e,t,r){var n=0,i=e.length;if(r){if(L2?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var a=L2?r.get(t):r[t];n<a.length;++n)if(e[a[n]].t===t)return e.Count++,a[n]}}else for(;n<i;++n)if(e[n].t===t)return e.Count++,n;return e[i]={t},e.Count++,e.Unique++,r&&(L2?(r.has(t)||r.set(t,[]),r.get(t).push(i)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(i))),i}function SP(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(oo=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=eE(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=hO(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Fg(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function am(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],i=60,a=e.length;if(n==null&&r.ssf){for(;i<392;++i)if(r.ssf[i]==null){Ch(t.z,i),r.ssf[i]=t.z,r.revssf[t.z]=n=i;break}}for(i=0;i!=a;++i)if(e[i].numFmtId===n)return i;return e[a]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function sve(e,t,r,n,i,a){try{n.cellNF&&(e.z=Pr[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=ki(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Pr[t]==null&&Ch(ixt[t]||"General",t),e.t==="e")e.w=e.w||op[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=GS(e.v);else if(e.t==="d"){var s=Va(e.v);(s|0)===s?e.w=s.toString(10):e.w=GS(s)}else{if(e.v===void 0)return"";e.w=hx(e.v,Iv)}else e.t==="d"?e.w=fu(t,Va(e.v),Iv):e.w=fu(t,e.v,Iv)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=a.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=fO(i.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=i.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=fO(i.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=i.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&a.Fills)throw o}}}function lSt(e,t,r){if(e&&e["!ref"]){var n=Rn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function cSt(e,t){var r=Rn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=Jr(r))}var uSt=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,dSt=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,fSt=/<(?:\w:)?hyperlink [^>]*>/mg,hSt=/"(\w*:\w*)"/,pSt=/<(?:\w:)?col\b[^>]*[\/]?>/g,mSt=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,gSt=/<(?:\w:)?pageMargins[^>]*\/>/g,ove=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,xSt=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,vSt=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function ySt(e,t,r,n,i,a,s){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",d="",f=e.match(dSt);f?(c=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):c=d=e;var p=c.match(ove);p?L$(p[0],o,i,r):(p=c.match(xSt))&&wSt(p[0],p[1]||"",o,i,r);var m=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var x=c.slice(m,m+50).match(hSt);x&&cSt(o,x[1])}var v=c.match(vSt);v&&v[1]&&jSt(v[1],i);var b=[];if(t.cellStyles){var w=c.match(pSt);w&&TSt(b,w)}f&&FSt(f[1],o,t,l,a,s);var k=d.match(mSt);k&&(o["!autofilter"]=OSt(k[0]));var E=[],N=d.match(uSt);if(N)for(m=0;m!=N.length;++m)E[m]=Rn(N[m].slice(N[m].indexOf('"')+1));var P=d.match(fSt);P&&_St(o,P,n);var R=d.match(gSt);if(R&&(o["!margins"]=NSt(Dr(R[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=Jr(l)),t.sheetRows>0&&o["!ref"]){var O=Rn(o["!ref"]);t.sheetRows<=+O.e.r&&(O.e.r=t.sheetRows-1,O.e.r>l.e.r&&(O.e.r=l.e.r),O.e.r<O.s.r&&(O.s.r=O.e.r),O.e.c>l.e.c&&(O.e.c=l.e.c),O.e.c<O.s.c&&(O.s.c=O.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Jr(O))}return b.length>0&&(o["!cols"]=b),E.length>0&&(o["!merges"]=E),o}function bSt(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+Jr(e[r])+'"/>';return t+"</mergeCells>"}function L$(e,t,r,n){var i=Dr(e);r.Sheets[n]||(r.Sheets[n]={}),i.codeName&&(r.Sheets[n].CodeName=Pn(si(i.codeName)))}function wSt(e,t,r,n,i){L$(e.slice(0,e.indexOf(">")),r,n,i)}function SSt(e,t,r,n,i){var a=!1,s={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var l=t.SheetNames[r];try{t.Workbook&&(l=t.Workbook.Sheets[r].CodeName||l)}catch{}a=!0,s.codeName=Kd(ti(l))}if(e&&e["!outline"]){var c={summaryBelow:1,summaryRight:1};e["!outline"].above&&(c.summaryBelow=0),e["!outline"].left&&(c.summaryRight=0),o=(o||"")+Ft("outlinePr",null,c)}!a&&!o||(i[i.length]=Ft("sheetPr",o,s))}var ESt=["objects","scenarios","selectLockedCells","selectUnlockedCells"],CSt=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function kSt(e){var t={sheet:1};return ESt.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),CSt.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=O$(e.password).toString(16).toUpperCase()),Ft("sheetProtection",null,t)}function _St(e,t,r){for(var n=Array.isArray(e),i=0;i!=t.length;++i){var a=Dr(si(t[i]),!0);if(!a.ref)return;var s=((r||{})["!id"]||[])[a.id];s?(a.Target=s.Target,a.location&&(a.Target+="#"+Pn(a.location))):(a.Target="#"+Pn(a.location),s={Target:a.Target,TargetMode:"Internal"}),a.Rel=s,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=Rn(a.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var d=jr({c,r:l});n?(e[l]||(e[l]=[]),e[l][c]||(e[l][c]={t:"z",v:void 0}),e[l][c].l=a):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=a)}}}function NSt(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function ASt(e){return Fg(e),Ft("pageMargins",null,e)}function TSt(e,t){for(var r=!1,n=0;n!=t.length;++n){var i=Dr(t[n],!0);i.hidden&&(i.hidden=Si(i.hidden));var a=parseInt(i.min,10)-1,s=parseInt(i.max,10)-1;for(i.outlineLevel&&(i.level=+i.outlineLevel||0),delete i.min,delete i.max,i.width=+i.width,!r&&i.width&&(r=!0,P$(i.width)),M0(i);a<=s;)e[a++]=_i(i)}}function ISt(e,t){for(var r=["<cols>"],n,i=0;i!=t.length;++i)(n=t[i])&&(r[r.length]=Ft("col",null,SP(i,n)));return r[r.length]="</cols>",r.join("")}function OSt(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function PSt(e,t,r,n){var i=typeof e.ref=="string"?e.ref:Jr(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,s=Tl(i);s.s.r==s.e.r&&(s.e.r=Tl(t["!ref"]).e.r,i=Jr(s));for(var o=0;o<a.length;++o){var l=a[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+i;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),Ft("autoFilter",null,{ref:i})}var RSt=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function jSt(e,t){t.Views||(t.Views=[{}]),(e.match(RSt)||[]).forEach(function(r,n){var i=Dr(r);t.Views[n]||(t.Views[n]={}),+i.zoomScale&&(t.Views[n].zoom=+i.zoomScale),Si(i.rightToLeft)&&(t.Views[n].RTL=!0)})}function DSt(e,t,r,n){var i={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Ft("sheetViews",Ft("sheetView",null,i),{})}function MSt(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var i="",a=e.t,s=e.v;if(e.t!=="z")switch(e.t){case"b":i=e.v?"1":"0";break;case"n":i=""+e.v;break;case"e":i=op[e.v];break;case"d":n&&n.cellDates?i=ki(e.v,-1).toISOString():(e=_i(e),e.t="n",i=""+(e.v=Va(ki(e.v)))),typeof e.z>"u"&&(e.z=Pr[14]);break;default:i=e.v;break}var o=Ds("v",ti(i)),l={r:t},c=am(n.cellXfs,e,n);switch(c!==0&&(l.s=c),e.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=Ds("v",""+F$(n.Strings,e.v,n.revStrings)),l.t="s";break}l.t="str";break}if(e.t!=a&&(e.t=a,e.v=s),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=Ft("f",ti(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(l.cm=1),Ft("c",o,l)}var FSt=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,i=/ref=["']([^"']*)["']/,a=KS("v"),s=KS("f");return function(l,c,d,f,p,m){for(var x=0,v="",b=[],w=[],k=0,E=0,N=0,P="",R,O,D=0,L=0,B,z,H=0,te=0,Y=Array.isArray(m.CellXf),W,Z=[],re=[],X=Array.isArray(c),Q=[],fe={},ye=!1,J=!!d.sheetStubs,ce=l.split(t),V=0,G=ce.length;V!=G;++V){v=ce[V].trim();var ie=v.length;if(ie!==0){var Ee=0;e:for(x=0;x<ie;++x)switch(v[x]){case">":if(v[x-1]!="/"){++x;break e}if(d&&d.cellStyles){if(O=Dr(v.slice(Ee,x),!0),D=O.r!=null?parseInt(O.r,10):D+1,L=-1,d.sheetRows&&d.sheetRows<D)continue;fe={},ye=!1,O.ht&&(ye=!0,fe.hpt=parseFloat(O.ht),fe.hpx=My(fe.hpt)),O.hidden=="1"&&(ye=!0,fe.hidden=!0),O.outlineLevel!=null&&(ye=!0,fe.level=+O.outlineLevel),ye&&(Q[D-1]=fe)}break;case"<":Ee=x;break}if(Ee>=x)break;if(O=Dr(v.slice(Ee,x),!0),D=O.r!=null?parseInt(O.r,10):D+1,L=-1,!(d.sheetRows&&d.sheetRows<D)){f.s.r>D-1&&(f.s.r=D-1),f.e.r<D-1&&(f.e.r=D-1),d&&d.cellStyles&&(fe={},ye=!1,O.ht&&(ye=!0,fe.hpt=parseFloat(O.ht),fe.hpx=My(fe.hpt)),O.hidden=="1"&&(ye=!0,fe.hidden=!0),O.outlineLevel!=null&&(ye=!0,fe.level=+O.outlineLevel),ye&&(Q[D-1]=fe)),b=v.slice(x).split(e);for(var ne=0;ne!=b.length&&b[ne].trim().charAt(0)=="<";++ne);for(b=b.slice(ne),x=0;x!=b.length;++x)if(v=b[x].trim(),v.length!==0){if(w=v.match(r),k=x,E=0,N=0,v="<c "+(v.slice(0,1)=="<"?">":"")+v,w!=null&&w.length===2){for(k=0,P=w[1],E=0;E!=P.length&&!((N=P.charCodeAt(E)-64)<1||N>26);++E)k=26*k+N;--k,L=k}else++L;for(E=0;E!=v.length&&v.charCodeAt(E)!==62;++E);if(++E,O=Dr(v.slice(0,E),!0),O.r||(O.r=jr({r:D-1,c:L})),P=v.slice(E),R={t:""},(w=P.match(a))!=null&&w[1]!==""&&(R.v=Pn(w[1])),d.cellFormula){if((w=P.match(s))!=null&&w[1]!==""){if(R.f=Pn(si(w[1])).replace(/\r\n/g,`
`),d.xlfn||(R.f=Aee(R.f)),w[0].indexOf('t="array"')>-1)R.F=(P.match(i)||[])[1],R.F.indexOf(":")>-1&&Z.push([Rn(R.F),R.F]);else if(w[0].indexOf('t="shared"')>-1){z=Dr(w[0]);var ae=Pn(si(w[1]));d.xlfn||(ae=Aee(ae)),re[parseInt(z.si,10)]=[z,ae,O.r]}}else(w=P.match(/<f[^>]*\/>/))&&(z=Dr(w[0]),re[z.si]&&(R.f=Rwt(re[z.si][1],re[z.si][2],O.r)));var me=$i(O.r);for(E=0;E<Z.length;++E)me.r>=Z[E][0].s.r&&me.r<=Z[E][0].e.r&&me.c>=Z[E][0].s.c&&me.c<=Z[E][0].e.c&&(R.F=Z[E][1])}if(O.t==null&&R.v===void 0)if(R.f||R.F)R.v=0,R.t="n";else if(J)R.t="z";else continue;else R.t=O.t||"n";switch(f.s.c>L&&(f.s.c=L),f.e.c<L&&(f.e.c=L),R.t){case"n":if(R.v==""||R.v==null){if(!J)continue;R.t="z"}else R.v=parseFloat(R.v);break;case"s":if(typeof R.v>"u"){if(!J)continue;R.t="z"}else B=F2[parseInt(R.v,10)],R.v=B.t,R.r=B.r,d.cellHTML&&(R.h=B.h);break;case"str":R.t="s",R.v=R.v!=null?si(R.v):"",d.cellHTML&&(R.h=g$(R.v));break;case"inlineStr":w=P.match(n),R.t="s",w!=null&&(B=I$(w[1]))?(R.v=B.t,d.cellHTML&&(R.h=B.h)):R.v="";break;case"b":R.v=Si(R.v);break;case"d":d.cellDates?R.v=ki(R.v,1):(R.v=Va(ki(R.v,1)),R.t="n");break;case"e":(!d||d.cellText!==!1)&&(R.w=R.v),R.v=c1e[R.v];break}if(H=te=0,W=null,Y&&O.s!==void 0&&(W=m.CellXf[O.s],W!=null&&(W.numFmtId!=null&&(H=W.numFmtId),d.cellStyles&&W.fillId!=null&&(te=W.fillId))),sve(R,H,te,d,p,m),d.cellDates&&Y&&R.t=="n"&&Sb(Pr[H])&&(R.t="d",R.v=vP(R.v)),O.cm&&d.xlmeta){var ve=(d.xlmeta.Cell||[])[+O.cm-1];ve&&ve.type=="XLDAPR"&&(R.D=!0)}if(X){var q=$i(O.r);c[q.r]||(c[q.r]=[]),c[q.r][q.c]=R}else c[O.r]=R}}}}Q.length>0&&(c["!rows"]=Q)}}();function LSt(e,t,r,n){var i=[],a=[],s=Rn(e["!ref"]),o="",l,c="",d=[],f=0,p=0,m=e["!rows"],x=Array.isArray(e),v={r:c},b,w=-1;for(p=s.s.c;p<=s.e.c;++p)d[p]=Ui(p);for(f=s.s.r;f<=s.e.r;++f){for(a=[],c=ga(f),p=s.s.c;p<=s.e.c;++p){l=d[p]+c;var k=x?(e[f]||[])[p]:e[l];k!==void 0&&(o=MSt(k,l,e,t))!=null&&a.push(o)}(a.length>0||m&&m[f])&&(v={r:c},m&&m[f]&&(b=m[f],b.hidden&&(v.hidden=1),w=-1,b.hpx?w=tE(b.hpx):b.hpt&&(w=b.hpt),w>-1&&(v.ht=w,v.customHeight=1),b.level&&(v.outlineLevel=b.level)),i[i.length]=Ft("row",a.join(""),v))}if(m)for(;f<m.length;++f)m&&m[f]&&(v={r:f+1},b=m[f],b.hidden&&(v.hidden=1),w=-1,b.hpx?w=tE(b.hpx):b.hpt&&(w=b.hpt),w>-1&&(v.ht=w,v.customHeight=1),b.level&&(v.outlineLevel=b.level),i[i.length]=Ft("row","",v));return i.join("")}function lve(e,t,r,n){var i=[ba,Ft("worksheet",null,{xmlns:Gx[0],"xmlns:r":Ha.r})],a=r.SheetNames[e],s=0,o="",l=r.Sheets[a];l==null&&(l={});var c=l["!ref"]||"A1",d=Rn(c);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),c=Jr(d)}n||(n={}),l["!comments"]=[];var f=[];SSt(l,r,e,t,i),i[i.length]=Ft("dimension",null,{ref:c}),i[i.length]=DSt(l,t,e,r),t.sheetFormat&&(i[i.length]=Ft("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(i[i.length]=ISt(l,l["!cols"])),i[s=i.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=LSt(l,t),o.length>0&&(i[i.length]=o)),i.length>s+1&&(i[i.length]="</sheetData>",i[s]=i[s].replace("/>",">")),l["!protect"]&&(i[i.length]=kSt(l["!protect"])),l["!autofilter"]!=null&&(i[i.length]=PSt(l["!autofilter"],l,r,e)),l["!merges"]!=null&&l["!merges"].length>0&&(i[i.length]=bSt(l["!merges"]));var p=-1,m,x=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach(function(v){v[1].Target&&(m={ref:v[0]},v[1].Target.charAt(0)!="#"&&(x=Zn(n,-1,ti(v[1].Target).replace(/#.*$/,""),yn.HLINK),m["r:id"]="rId"+x),(p=v[1].Target.indexOf("#"))>-1&&(m.location=ti(v[1].Target.slice(p+1))),v[1].Tooltip&&(m.tooltip=ti(v[1].Tooltip)),i[i.length]=Ft("hyperlink",null,m))}),i[i.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(i[i.length]=ASt(l["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(i[i.length]=Ds("ignoredErrors",Ft("ignoredError",null,{numberStoredAsText:1,sqref:c}))),f.length>0&&(x=Zn(n,-1,"../drawings/drawing"+(e+1)+".xml",yn.DRAW),i[i.length]=Ft("drawing",null,{"r:id":"rId"+x}),l["!drawing"]=f),l["!comments"].length>0&&(x=Zn(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",yn.VML),i[i.length]=Ft("legacyDrawing",null,{"r:id":"rId"+x}),l["!legacy"]=x),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function BSt(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var i=e.read_shift(2);e.l+=1;var a=e.read_shift(1);return e.l=n,a&7&&(r.level=a&7),a&16&&(r.hidden=!0),a&32&&(r.hpt=i/20),r}function USt(e,t,r){var n=pt(145),i=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var a=320;i.hpx?a=tE(i.hpx)*20:i.hpt&&(a=i.hpt*20),n.write_shift(2,a),n.write_shift(1,0);var s=0;i.level&&(s|=i.level),i.hidden&&(s|=16),(i.hpx||i.hpt)&&(s|=32),n.write_shift(1,s),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var c={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,p=-1,m=d<<10;m<d+1<<10;++m){c.c=m;var x=Array.isArray(r)?(r[c.r]||[])[c.c]:r[jr(c)];x&&(f<0&&(f=m),p=m)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,p))}var v=n.l;return n.l=l,n.write_shift(4,o),n.l=v,n.length>n.l?n.slice(0,n.l):n}function $St(e,t,r,n){var i=USt(n,r,t);(i.length>17||(t["!rows"]||[])[n])&&Ct(e,0,i)}var zSt=Qx,HSt=kb;function WSt(){}function VSt(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=Kxt(e),r}function qSt(e,t,r){r==null&&(r=pt(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var i=1;i<3;++i)r.write_shift(1,0);return cO({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),i1e(e,r),r.slice(0,r.l)}function GSt(e){var t=yu(e);return[t]}function KSt(e,t,r){return r==null&&(r=pt(8)),Kx(t,r)}function XSt(e){var t=Xx(e);return[t]}function YSt(e,t,r){return r==null&&(r=pt(4)),Yx(t,r)}function QSt(e){var t=yu(e),r=e.read_shift(1);return[t,r,"b"]}function JSt(e,t,r){return r==null&&(r=pt(9)),Kx(t,r),r.write_shift(1,e.v?1:0),r}function ZSt(e){var t=Xx(e),r=e.read_shift(1);return[t,r,"b"]}function eEt(e,t,r){return r==null&&(r=pt(5)),Yx(t,r),r.write_shift(1,e.v?1:0),r}function tEt(e){var t=yu(e),r=e.read_shift(1);return[t,r,"e"]}function rEt(e,t,r){return r==null&&(r=pt(9)),Kx(t,r),r.write_shift(1,e.v),r}function nEt(e){var t=Xx(e),r=e.read_shift(1);return[t,r,"e"]}function iEt(e,t,r){return r==null&&(r=pt(8)),Yx(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function aEt(e){var t=yu(e),r=e.read_shift(4);return[t,r,"s"]}function sEt(e,t,r){return r==null&&(r=pt(12)),Kx(t,r),r.write_shift(4,t.v),r}function oEt(e){var t=Xx(e),r=e.read_shift(4);return[t,r,"s"]}function lEt(e,t,r){return r==null&&(r=pt(8)),Yx(t,r),r.write_shift(4,t.v),r}function cEt(e){var t=yu(e),r=co(e);return[t,r,"n"]}function uEt(e,t,r){return r==null&&(r=pt(16)),Kx(t,r),mx(e.v,r),r}function cve(e){var t=Xx(e),r=co(e);return[t,r,"n"]}function dEt(e,t,r){return r==null&&(r=pt(12)),Yx(t,r),mx(e.v,r),r}function fEt(e){var t=yu(e),r=k$(e);return[t,r,"n"]}function hEt(e,t,r){return r==null&&(r=pt(12)),Kx(t,r),a1e(e.v,r),r}function pEt(e){var t=Xx(e),r=k$(e);return[t,r,"n"]}function mEt(e,t,r){return r==null&&(r=pt(8)),Yx(t,r),a1e(e.v,r),r}function gEt(e){var t=yu(e),r=S$(e);return[t,r,"is"]}function xEt(e){var t=yu(e),r=ho(e);return[t,r,"str"]}function vEt(e,t,r){return r==null&&(r=pt(12+4*e.v.length)),Kx(t,r),ps(e.v,r),r.length>r.l?r.slice(0,r.l):r}function yEt(e){var t=Xx(e),r=ho(e);return[t,r,"str"]}function bEt(e,t,r){return r==null&&(r=pt(8+4*e.v.length)),Yx(t,r),ps(e.v,r),r.length>r.l?r.slice(0,r.l):r}function wEt(e,t,r){var n=e.l+t,i=yu(e);i.r=r["!row"];var a=e.read_shift(1),s=[i,a,"b"];if(r.cellFormula){e.l+=2;var o=wP(e,n-e.l,r);s[3]=no(o,null,i,r.supbooks,r)}else e.l=n;return s}function SEt(e,t,r){var n=e.l+t,i=yu(e);i.r=r["!row"];var a=e.read_shift(1),s=[i,a,"e"];if(r.cellFormula){e.l+=2;var o=wP(e,n-e.l,r);s[3]=no(o,null,i,r.supbooks,r)}else e.l=n;return s}function EEt(e,t,r){var n=e.l+t,i=yu(e);i.r=r["!row"];var a=co(e),s=[i,a,"n"];if(r.cellFormula){e.l+=2;var o=wP(e,n-e.l,r);s[3]=no(o,null,i,r.supbooks,r)}else e.l=n;return s}function CEt(e,t,r){var n=e.l+t,i=yu(e);i.r=r["!row"];var a=ho(e),s=[i,a,"str"];if(r.cellFormula){e.l+=2;var o=wP(e,n-e.l,r);s[3]=no(o,null,i,r.supbooks,r)}else e.l=n;return s}var kEt=Qx,_Et=kb;function NEt(e,t){return t==null&&(t=pt(4)),t.write_shift(4,e),t}function AEt(e,t){var r=e.l+t,n=Qx(e),i=E$(e),a=ho(e),s=ho(e),o=ho(e);e.l=r;var l={rfx:n,relId:i,loc:a,display:o};return s&&(l.Tooltip=s),l}function TEt(e,t){var r=pt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));kb({s:$i(e[0]),e:$i(e[0])},r),C$("rId"+t,r);var n=e[1].Target.indexOf("#"),i=n==-1?"":e[1].Target.slice(n+1);return ps(i||"",r),ps(e[1].Tooltip||"",r),ps("",r),r.slice(0,r.l)}function IEt(){}function OEt(e,t,r){var n=e.l+t,i=s1e(e),a=e.read_shift(1),s=[i];if(s[2]=a,r.cellFormula){var o=tSt(e,n-e.l,r);s[1]=o}else e.l=n;return s}function PEt(e,t,r){var n=e.l+t,i=Qx(e),a=[i];if(r.cellFormula){var s=nSt(e,n-e.l,r);a[1]=s,e.l=n}else e.l=n;return a}function REt(e,t,r){r==null&&(r=pt(18));var n=SP(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var i=0;return t.hidden&&(i|=1),typeof n.width=="number"&&(i|=2),t.level&&(i|=t.level<<8),r.write_shift(2,i),r}var uve=["left","right","top","bottom","header","footer"];function jEt(e){var t={};return uve.forEach(function(r){t[r]=co(e)}),t}function DEt(e,t){return t==null&&(t=pt(6*8)),Fg(e),uve.forEach(function(r){mx(e[r],t)}),t}function MEt(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function FEt(e,t,r){r==null&&(r=pt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function LEt(e){var t=pt(24);return t.write_shift(4,4),t.write_shift(4,1),kb(e,t),t}function BEt(e,t){return t==null&&(t=pt(16*4+2)),t.write_shift(2,e.password?O$(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function UEt(){}function $Et(){}function zEt(e,t,r,n,i,a,s){if(!e)return e;var o=t||{};n||(n={"!id":{}});var l=o.dense?[]:{},c,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,p=!1,m,x,v,b,w,k,E,N,P,R=[];o.biff=12,o["!row"]=0;var O=0,D=!1,L=[],B={},z=o.supbooks||i.supbooks||[[]];if(z.sharedf=B,z.arrayf=L,z.SheetNames=i.SheetNames||i.Sheets.map(function(X){return X.name}),!o.supbooks&&(o.supbooks=z,i.Names))for(var H=0;H<i.Names.length;++H)z[0][H+1]=i.Names[H];var te=[],Y=[],W=!1;rE[16]={n:"BrtShortReal",f:cve};var Z;if(sp(e,function(Q,fe,ye){if(!p)switch(ye){case 148:c=Q;break;case 0:m=Q,o.sheetRows&&o.sheetRows<=m.r&&(p=!0),N=ga(b=m.r),o["!row"]=m.r,(Q.hidden||Q.hpt||Q.level!=null)&&(Q.hpt&&(Q.hpx=My(Q.hpt)),Y[Q.r]=Q);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(x={t:Q[2]},Q[2]){case"n":x.v=Q[1];break;case"s":E=F2[Q[1]],x.v=E.t,x.r=E.r;break;case"b":x.v=!!Q[1];break;case"e":x.v=Q[1],o.cellText!==!1&&(x.w=op[x.v]);break;case"str":x.t="s",x.v=Q[1];break;case"is":x.t="s",x.v=Q[1].t;break}if((v=s.CellXf[Q[0].iStyleRef])&&sve(x,v.numFmtId,null,o,a,s),w=Q[0].c==-1?w+1:Q[0].c,o.dense?(l[b]||(l[b]=[]),l[b][w]=x):l[Ui(w)+N]=x,o.cellFormula){for(D=!1,O=0;O<L.length;++O){var J=L[O];m.r>=J[0].s.r&&m.r<=J[0].e.r&&w>=J[0].s.c&&w<=J[0].e.c&&(x.F=Jr(J[0]),D=!0)}!D&&Q.length>3&&(x.f=Q[3])}if(d.s.r>m.r&&(d.s.r=m.r),d.s.c>w&&(d.s.c=w),d.e.r<m.r&&(d.e.r=m.r),d.e.c<w&&(d.e.c=w),o.cellDates&&v&&x.t=="n"&&Sb(Pr[v.numFmtId])){var ce=lg(x.v);ce&&(x.t="d",x.v=new Date(ce.y,ce.m-1,ce.d,ce.H,ce.M,ce.S,ce.u))}Z&&(Z.type=="XLDAPR"&&(x.D=!0),Z=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;x={t:"z",v:void 0},w=Q[0].c==-1?w+1:Q[0].c,o.dense?(l[b]||(l[b]=[]),l[b][w]=x):l[Ui(w)+N]=x,d.s.r>m.r&&(d.s.r=m.r),d.s.c>w&&(d.s.c=w),d.e.r<m.r&&(d.e.r=m.r),d.e.c<w&&(d.e.c=w),Z&&(Z.type=="XLDAPR"&&(x.D=!0),Z=void 0);break;case 176:R.push(Q);break;case 49:Z=((o.xlmeta||{}).Cell||[])[Q-1];break;case 494:var V=n["!id"][Q.relId];for(V?(Q.Target=V.Target,Q.loc&&(Q.Target+="#"+Q.loc),Q.Rel=V):Q.relId==""&&(Q.Target="#"+Q.loc),b=Q.rfx.s.r;b<=Q.rfx.e.r;++b)for(w=Q.rfx.s.c;w<=Q.rfx.e.c;++w)o.dense?(l[b]||(l[b]=[]),l[b][w]||(l[b][w]={t:"z",v:void 0}),l[b][w].l=Q):(k=jr({c:w,r:b}),l[k]||(l[k]={t:"z",v:void 0}),l[k].l=Q);break;case 426:if(!o.cellFormula)break;L.push(Q),P=o.dense?l[b][w]:l[Ui(w)+N],P.f=no(Q[1],d,{r:m.r,c:w},z,o),P.F=Jr(Q[0]);break;case 427:if(!o.cellFormula)break;B[jr(Q[0].s)]=Q[1],P=o.dense?l[b][w]:l[Ui(w)+N],P.f=no(Q[1],d,{r:m.r,c:w},z,o);break;case 60:if(!o.cellStyles)break;for(;Q.e>=Q.s;)te[Q.e--]={width:Q.w/256,hidden:!!(Q.flags&1),level:Q.level},W||(W=!0,P$(Q.w/256)),M0(te[Q.e+1]);break;case 161:l["!autofilter"]={ref:Jr(Q)};break;case 476:l["!margins"]=Q;break;case 147:i.Sheets[r]||(i.Sheets[r]={}),Q.name&&(i.Sheets[r].CodeName=Q.name),(Q.above||Q.left)&&(l["!outline"]={above:Q.above,left:Q.left});break;case 137:i.Views||(i.Views=[{}]),i.Views[0]||(i.Views[0]={}),Q.RTL&&(i.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!fe.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+ye.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(d.s.r<2e6||c&&(c.e.r>0||c.e.c>0||c.s.r>0||c.s.c>0))&&(l["!ref"]=Jr(c||d)),o.sheetRows&&l["!ref"]){var re=Rn(l["!ref"]);o.sheetRows<=+re.e.r&&(re.e.r=o.sheetRows-1,re.e.r>d.e.r&&(re.e.r=d.e.r),re.e.r<re.s.r&&(re.s.r=re.e.r),re.e.c>d.e.c&&(re.e.c=d.e.c),re.e.c<re.s.c&&(re.s.c=re.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Jr(re))}return R.length>0&&(l["!merges"]=R),te.length>0&&(l["!cols"]=te),Y.length>0&&(l["!rows"]=Y),l}function HEt(e,t,r,n,i,a,s){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=_i(t),t.z=t.z||Pr[14],t.v=Va(ki(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var l={r,c:n};switch(l.s=am(i.cellXfs,t,i),t.l&&a["!links"].push([jr(l),t.l]),t.c&&a["!comments"].push([jr(l),t.c]),t.t){case"s":case"str":return i.bookSST?(o=F$(i.Strings,t.v,i.revStrings),l.t="s",l.v=o,s?Ct(e,18,lEt(t,l)):Ct(e,7,sEt(t,l))):(l.t="str",s?Ct(e,17,bEt(t,l)):Ct(e,6,vEt(t,l))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?s?Ct(e,13,mEt(t,l)):Ct(e,2,hEt(t,l)):s?Ct(e,16,dEt(t,l)):Ct(e,5,uEt(t,l)),!0;case"b":return l.t="b",s?Ct(e,15,eEt(t,l)):Ct(e,4,JSt(t,l)),!0;case"e":return l.t="e",s?Ct(e,14,iEt(t,l)):Ct(e,3,rEt(t,l)),!0}return s?Ct(e,12,YSt(t,l)):Ct(e,1,KSt(t,l)),!0}function WEt(e,t,r,n){var i=Rn(t["!ref"]||"A1"),a,s="",o=[];Ct(e,145);var l=Array.isArray(t),c=i.e.r;t["!rows"]&&(c=Math.max(i.e.r,t["!rows"].length-1));for(var d=i.s.r;d<=c;++d){s=ga(d),$St(e,t,i,d);var f=!1;if(d<=i.e.r)for(var p=i.s.c;p<=i.e.c;++p){d===i.s.r&&(o[p]=Ui(p)),a=o[p]+s;var m=l?(t[d]||[])[p]:t[a];if(!m){f=!1;continue}f=HEt(e,m,d,p,n,t,f)}}Ct(e,146)}function VEt(e,t){!t||!t["!merges"]||(Ct(e,177,NEt(t["!merges"].length)),t["!merges"].forEach(function(r){Ct(e,176,_Et(r))}),Ct(e,178))}function qEt(e,t){!t||!t["!cols"]||(Ct(e,390),t["!cols"].forEach(function(r,n){r&&Ct(e,60,REt(n,r))}),Ct(e,391))}function GEt(e,t){!t||!t["!ref"]||(Ct(e,648),Ct(e,649,LEt(Rn(t["!ref"]))),Ct(e,650))}function KEt(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var i=Zn(r,-1,n[1].Target.replace(/#.*$/,""),yn.HLINK);Ct(e,494,TEt(n,i))}}),delete t["!links"]}function XEt(e,t,r,n){if(t["!comments"].length>0){var i=Zn(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",yn.VML);Ct(e,551,C$("rId"+i)),t["!legacy"]=i}}function YEt(e,t,r,n){if(t["!autofilter"]){var i=t["!autofilter"],a=typeof i.ref=="string"?i.ref:Jr(i.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=Tl(a);o.s.r==o.e.r&&(o.e.r=Tl(t["!ref"]).e.r,a=Jr(o));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Ct(e,161,kb(Rn(a))),Ct(e,162)}}function QEt(e,t,r){Ct(e,133),Ct(e,137,FEt(t,r)),Ct(e,138),Ct(e,134)}function JEt(e,t){t["!protect"]&&Ct(e,535,BEt(t["!protect"]))}function ZEt(e,t,r,n){var i=kl(),a=r.SheetNames[e],s=r.Sheets[a]||{},o=a;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var l=Rn(s["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return s["!links"]=[],s["!comments"]=[],Ct(i,129),(r.vbaraw||s["!outline"])&&Ct(i,147,qSt(o,s["!outline"])),Ct(i,148,HSt(l)),QEt(i,s,r.Workbook),qEt(i,s),WEt(i,s,e,t),JEt(i,s),YEt(i,s,r,e),VEt(i,s),KEt(i,s,n),s["!margins"]&&Ct(i,476,DEt(s["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&GEt(i,s),XEt(i,s,e,n),Ct(i,130),i.end()}function eCt(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var s=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);s&&(t[+s[1]]=r?+s[2]:s[2])});var i=Pn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){n=a.replace(/<.*?>/g,"")}),[t,i,n]}function tCt(e,t,r,n,i,a){var s=a||{"!type":"chart"};if(!e)return a;var o=0,l=0,c="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var p=eCt(f);d.s.r=d.s.c=0,d.e.c=o,c=Ui(o),p[0].forEach(function(m,x){s[c+ga(x)]={t:"n",v:m,z:p[1]},l=x}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(s["!ref"]=Jr(d)),s}function rCt(e,t,r,n,i){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},s,o=e.match(ove);return o&&L$(o[0],a,i,r),(s=e.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=s[1]),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}function nCt(e,t){e.l+=10;var r=ho(e);return{name:r}}function iCt(e,t,r,n,i){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},s=!1;return sp(e,function(l,c,d){switch(d){case 550:a["!rel"]=l;break;case 651:i.Sheets[r]||(i.Sheets[r]={}),l.name&&(i.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!(c.T>0)){if(!(c.T<0)){if(!s||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}var B$=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],aCt=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],sCt=[],oCt=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function Ree(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],i=0;i!=t.length;++i){var a=t[i];if(n[a[0]]==null)n[a[0]]=a[1];else switch(a[2]){case"bool":typeof n[a[0]]=="string"&&(n[a[0]]=Si(n[a[0]]));break;case"int":typeof n[a[0]]=="string"&&(n[a[0]]=parseInt(n[a[0]],10));break}}}function jee(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Si(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function dve(e){jee(e.WBProps,B$),jee(e.CalcPr,oCt),Ree(e.WBView,aCt),Ree(e.Sheets,sCt),Iv.date1904=Si(e.WBProps.date1904)}function lCt(e){return!e.Workbook||!e.Workbook.WBProps?"false":Si(e.Workbook.WBProps.date1904)?"true":"false"}var cCt="][*?/\\".split("");function fve(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return cCt.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function uCt(e,t,r){e.forEach(function(n,i){fve(n);for(var a=0;a<i;++a)if(n==e[a])throw new Error("Duplicate Sheet Name: "+n);if(r){var s=t&&t[i]&&t[i].CodeName||n;if(s.charCodeAt(0)==95&&s.length>22)throw new Error("Bad Code Name: Worksheet"+s)}})}function dCt(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];uCt(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)lSt(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var fCt=/<\w+:workbook/;function hCt(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,i="xmlns",a={},s=0;if(e.replace(bo,function(l,c){var d=Dr(l);switch(wf(d[0])){case"<?xml":break;case"<workbook":l.match(fCt)&&(i="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=d[i];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":B$.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Si(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=si(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Pn(si(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":a={},a.Name=si(d.name),d.comment&&(a.Comment=d.comment),d.localSheetId&&(a.Sheet=+d.localSheetId),Si(d.hidden||"0")&&(a.Hidden=!0),s=c+l.length;break;case"</definedName>":a.Ref=Pn(si(e.slice(s,c))),r.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),Gx.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return dve(r),r}function hve(e){var t=[ba];t[t.length]=Ft("workbook",null,{xmlns:Gx[0],"xmlns:r":Ha.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(B$.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Ft("workbookPr",null,n);var i=e.Workbook&&e.Workbook.Sheets||[],a=0;if(i&&i[0]&&i[0].Hidden){for(t[t.length]="<bookViews>",a=0;a!=e.SheetNames.length&&!(!i[a]||!i[a].Hidden);++a);a==e.SheetNames.length&&(a=0),t[t.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",a=0;a!=e.SheetNames.length;++a){var s={name:ti(e.SheetNames[a].slice(0,31))};if(s.sheetId=""+(a+1),s["r:id"]="rId"+(a+1),i[a])switch(i[a].Hidden){case 1:s.state="hidden";break;case 2:s.state="veryHidden";break}t[t.length]=Ft("sheet",null,s)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(t[t.length]=Ft("definedName",ti(o.Ref),l))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function pCt(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=d5(e),r.name=ho(e),r}function mCt(e,t){return t||(t=pt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),C$(e.strRelID,t),ps(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function gCt(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var i=t>8?ho(e):"";return i.length>0&&(r.CodeName=i),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function xCt(e,t){t||(t=pt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),i1e(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function vCt(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function yCt(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var i=e.read_shift(4),a=Xxt(e),s=rSt(e,0,r),o=E$(e);e.l=n;var l={Name:a,Ptg:s};return i<268435455&&(l.Sheet=i),o&&(l.Comment=o),l}function bCt(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],i=!1;t||(t={}),t.biff=12;var a=[],s=[[]];return s.SheetNames=[],s.XTI=[],rE[16]={n:"BrtFRTArchID$",f:vCt},sp(e,function(l,c,d){switch(d){case 156:s.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(t.SID=l.Sheet),l.Ref=no(l.Ptg,null,null,s,t),delete t.SID,delete l.Ptg,a.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:s[0].length?s.push([d,l]):s[0]=[d,l],s[s.length-1].XTI=[];break;case 362:s.length===0&&(s[0]=[],s[0].XTI=[]),s[s.length-1].XTI=s[s.length-1].XTI.concat(l),s.XTI=s.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),i=!0;break;case 36:n.pop(),i=!1;break;case 37:n.push(d),i=!0;break;case 38:n.pop(),i=!1;break;case 16:break;default:if(!c.T){if(!i||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),dve(r),r.Names=a,r.supbooks=s,r}function wCt(e,t){Ct(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,i={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Ct(e,156,mCt(i))}Ct(e,144)}function SCt(e,t){t||(t=pt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return ps("SheetJS",t),ps(rO.version,t),ps(rO.version,t),ps("7262",t),t.length>t.l?t.slice(0,t.l):t}function ECt(e,t){t||(t=pt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function CCt(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,i=-1,a=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&i==-1?i=n:r[n].Hidden==1&&a==-1&&(a=n);a>i||(Ct(e,135),Ct(e,158,ECt(i)),Ct(e,136))}}function kCt(e,t){var r=kl();return Ct(r,131),Ct(r,128,SCt()),Ct(r,153,xCt(e.Workbook&&e.Workbook.WBProps||null)),CCt(r,e),wCt(r,e),Ct(r,132),r.end()}function _Ct(e,t,r){return t.slice(-4)===".bin"?bCt(e,r):hCt(e,r)}function NCt(e,t,r,n,i,a,s,o){return t.slice(-4)===".bin"?zEt(e,n,r,i,a,s,o):ySt(e,n,r,i,a,s,o)}function ACt(e,t,r,n,i,a,s,o){return t.slice(-4)===".bin"?iCt(e,n,r,i,a):rCt(e,n,r,i,a)}function TCt(e,t,r,n,i,a,s,o){return t.slice(-4)===".bin"?Owt():Pwt()}function ICt(e,t,r,n,i,a,s,o){return t.slice(-4)===".bin"?Twt():Iwt()}function OCt(e,t,r,n){return t.slice(-4)===".bin"?_bt(e,r,n):pbt(e,r,n)}function PCt(e,t,r){return G1e(e,r)}function RCt(e,t,r){return t.slice(-4)===".bin"?Ryt(e,r):Iyt(e,r)}function jCt(e,t,r){return t.slice(-4)===".bin"?Cwt(e,r):mwt(e,r)}function DCt(e,t,r){return t.slice(-4)===".bin"?fwt(e):uwt(e)}function MCt(e,t,r,n){return r.slice(-4)===".bin"?hwt(e,t,r,n):void 0}function FCt(e,t,r){return t.slice(-4)===".bin"?owt(e,t,r):cwt(e,t,r)}function LCt(e,t,r){return(t.slice(-4)===".bin"?kCt:hve)(e)}function BCt(e,t,r,n,i){return(t.slice(-4)===".bin"?ZEt:lve)(e,r,n,i)}function UCt(e,t,r){return(t.slice(-4)===".bin"?Mbt:V1e)(e,r)}function $Ct(e,t,r){return(t.slice(-4)===".bin"?Myt:F1e)(e,r)}function zCt(e,t,r){return(t.slice(-4)===".bin"?kwt:Y1e)(e)}function HCt(e){return(e.slice(-4)===".bin"?lwt:K1e)()}var pve=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,mve=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Pu(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var i=e.match(pve),a,s,o,l;if(i)for(l=0;l!=i.length;++l)a=i[l].match(mve),(s=a[1].indexOf(":"))===-1?n[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(s+1),n[o]=a[2].slice(1,a[2].length-1));return n}function WCt(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(pve),i,a,s,o;if(n)for(o=0;o!=n.length;++o)i=n[o].match(mve),(a=i[1].indexOf(":"))===-1?r[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?s="xmlns"+i[1].slice(6):s=i[1].slice(a+1),r[s]=i[2].slice(1,i[2].length-1));return r}var B2;function VCt(e,t){var r=B2[e]||Pn(e);return r==="General"?hx(t):fu(r,t)}function qCt(e,t,r,n){var i=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":i=Si(n);break;case"i2":case"int":i=parseInt(n,10);break;case"r4":case"float":i=parseFloat(n);break;case"date":case"dateTime.tz":i=ki(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Pn(t)]=i}function GCt(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||op[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=GS(e.v):e.w=hx(e.v):e.w=VCt(t||"General",e.v)}catch(a){if(r.WTF)throw a}try{var n=B2[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&Sb(n)){var i=lg(e.v);i&&(e.t="d",e.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}catch(a){if(r.WTF)throw a}}}function KCt(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=sbt[n.Pattern]||n.Pattern)}e[t.ID]=t}function XCt(e,t,r,n,i,a,s,o,l,c){var d="General",f=n.StyleID,p={};c=c||{};var m=[],x=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&s&&(f=s.StyleID);a[f]!==void 0&&(a[f].nf&&(d=a[f].nf),a[f].Interior&&m.push(a[f].Interior),!!a[f].Parent);)f=a[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Si(e);break;case"String":n.t="s",n.r=QZ(Pn(e)),n.v=e.indexOf("<")>-1?Pn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(ki(e)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=Pn(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=c1e[e],c.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=QZ(t||e));break}if(GCt(n,d,c),c.cellFormula!==!1)if(n.Formula){var v=Pn(n.Formula);v.charCodeAt(0)==61&&(v=v.slice(1)),n.f=Tv(v,i),delete n.Formula,n.ArrayRange=="RC"?n.F=Tv("RC:RC",i):n.ArrayRange&&(n.F=Tv(n.ArrayRange,i),l.push([Rn(n.F),n.F]))}else for(x=0;x<l.length;++x)i.r>=l[x][0].s.r&&i.r<=l[x][0].e.r&&i.c>=l[x][0].s.c&&i.c<=l[x][0].e.c&&(n.F=l[x][1]);c.cellStyles&&(m.forEach(function(b){!p.patternType&&b.patternType&&(p.patternType=b.patternType)}),n.s=p),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function YCt(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function gM(e,t){var r=t||{};Eb();var n=Jw(x$(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=si(n));var i=n.slice(0,1024).toLowerCase(),a=!1;if(i=i.replace(/".*?"/g,""),(i.indexOf(">")&1023)>Math.min(i.indexOf(",")&1023,i.indexOf(";")&1023)){var s=_i(r);return s.type="string",Dy.to_workbook(n,s)}if(i.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(et){i.indexOf("<"+et)>=0&&(a=!0)}),a)return Dkt(n,r);B2={"General Number":"General","General Date":Pr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Pr[15],"Short Date":Pr[14],"Long Time":Pr[19],"Medium Time":Pr[18],"Short Time":Pr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Pr[2],Standard:Pr[4],Percent:Pr[10],Scientific:Pr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],c,d={},f=[],p=r.dense?[]:{},m="",x={},v={},b=Pu('<Data ss:Type="String">'),w=0,k=0,E=0,N={s:{r:2e6,c:2e6},e:{r:0,c:0}},P={},R={},O="",D=0,L=[],B={},z={},H=0,te=[],Y=[],W={},Z=[],re,X=!1,Q=[],fe=[],ye={},J=0,ce=0,V={Sheets:[],WBProps:{date1904:!1}},G={};YS.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ie="";o=YS.exec(n);)switch(o[3]=(ie=o[3]).toLowerCase()){case"data":if(ie=="data"){if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?XCt(n.slice(w,o.index),O,b,l[l.length-1][0]=="comment"?W:x,{c:k,r:E},P,Z[k],v,Q,r):(O="",b=Pu(o[0]),w=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(Y.length>0&&(x.c=Y),(!r.sheetRows||r.sheetRows>E)&&x.v!==void 0&&(r.dense?(p[E]||(p[E]=[]),p[E][k]=x):p[Ui(k)+ga(E)]=x),x.HRef&&(x.l={Target:Pn(x.HRef)},x.HRefScreenTip&&(x.l.Tooltip=x.HRefScreenTip),delete x.HRef,delete x.HRefScreenTip),(x.MergeAcross||x.MergeDown)&&(J=k+(parseInt(x.MergeAcross,10)|0),ce=E+(parseInt(x.MergeDown,10)|0),L.push({s:{c:k,r:E},e:{c:J,r:ce}})),!r.sheetStubs)x.MergeAcross?k=J+1:++k;else if(x.MergeAcross||x.MergeDown){for(var Ee=k;Ee<=J;++Ee)for(var ne=E;ne<=ce;++ne)(Ee>k||ne>E)&&(r.dense?(p[ne]||(p[ne]=[]),p[ne][Ee]={t:"z"}):p[Ui(Ee)+ga(ne)]={t:"z"});k=J+1}else++k;else x=WCt(o[0]),x.Index&&(k=+x.Index-1),k<N.s.c&&(N.s.c=k),k>N.e.c&&(N.e.c=k),o[0].slice(-2)==="/>"&&++k,Y=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(E<N.s.r&&(N.s.r=E),E>N.e.r&&(N.e.r=E),o[0].slice(-2)==="/>"&&(v=Pu(o[0]),v.Index&&(E=+v.Index-1)),k=0,++E):(v=Pu(o[0]),v.Index&&(E=+v.Index-1),ye={},(v.AutoFitHeight=="0"||v.Height)&&(ye.hpx=parseInt(v.Height,10),ye.hpt=tE(ye.hpx),fe[E]=ye),v.Hidden=="1"&&(ye.hidden=!0,fe[E]=ye));break;case"worksheet":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));f.push(m),N.s.r<=N.e.r&&N.s.c<=N.e.c&&(p["!ref"]=Jr(N),r.sheetRows&&r.sheetRows<=N.e.r&&(p["!fullref"]=p["!ref"],N.e.r=r.sheetRows-1,p["!ref"]=Jr(N))),L.length&&(p["!merges"]=L),Z.length>0&&(p["!cols"]=Z),fe.length>0&&(p["!rows"]=fe),d[m]=p}else N={s:{r:2e6,c:2e6},e:{r:0,c:0}},E=k=0,l.push([o[3],!1]),c=Pu(o[0]),m=Pn(c.Name),p=r.dense?[]:{},L=[],Q=[],fe=[],G={name:m,Hidden:0},V.Sheets.push(G);break;case"table":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),Z=[],X=!1}break;case"style":o[1]==="/"?KCt(P,R,r):R=Pu(o[0]);break;case"numberformat":R.nf=Pn(Pu(o[0]).Format||"General"),B2[R.nf]&&(R.nf=B2[R.nf]);for(var ae=0;ae!=392&&Pr[ae]!=R.nf;++ae);if(ae==392){for(ae=57;ae!=392;++ae)if(Pr[ae]==null){Ch(R.nf,ae);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(re=Pu(o[0]),re.Hidden&&(re.hidden=!0,delete re.Hidden),re.Width&&(re.wpx=parseInt(re.Width,10)),!X&&re.wpx>10){X=!0,oo=H1e;for(var me=0;me<Z.length;++me)Z[me]&&M0(Z[me])}X&&M0(re),Z[re.Index-1||Z.length]=re;for(var ve=0;ve<+re.Span;++ve)Z[Z.length]=_i(re);break;case"namedrange":if(o[1]==="/")break;V.Names||(V.Names=[]);var q=Dr(o[0]),Ne={Name:q.Name,Ref:Tv(q.RefersTo.slice(1),{r:0,c:0})};V.Sheets.length>0&&(Ne.Sheet=V.Sheets.length-1),V.Names.push(Ne);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?O+=n.slice(D,o.index):D=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;R.Interior=Pu(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?b1t(B,ie,n.slice(H,o.index)):H=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));YCt(W),Y.push(W)}else l.push([o[3],!1]),c=Pu(o[0]),W={a:c.Author};break;case"autofilter":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Pe=Pu(o[0]);p["!autofilter"]={ref:Tv(Pe.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return Bee(n,r);var ze=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ze=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ze=!1}break;case"excelworkbook":switch(o[3]){case"date1904":V.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ze=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:ze=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(H,o.index)){case"SheetHidden":G.Hidden=1;break;case"SheetVeryHidden":G.Hidden=2;break}else H=o.index+o[0].length;break;case"header":p["!margins"]||Fg(p["!margins"]={},"xlml"),isNaN(+Dr(o[0]).Margin)||(p["!margins"].header=+Dr(o[0]).Margin);break;case"footer":p["!margins"]||Fg(p["!margins"]={},"xlml"),isNaN(+Dr(o[0]).Margin)||(p["!margins"].footer=+Dr(o[0]).Margin);break;case"pagemargins":var De=Dr(o[0]);p["!margins"]||Fg(p["!margins"]={},"xlml"),isNaN(+De.Top)||(p["!margins"].top=+De.Top),isNaN(+De.Left)||(p["!margins"].left=+De.Left),isNaN(+De.Right)||(p["!margins"].right=+De.Right),isNaN(+De.Bottom)||(p["!margins"].bottom=+De.Bottom);break;case"displayrighttoleft":V.Views||(V.Views=[]),V.Views[0]||(V.Views[0]={}),V.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ze=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ze=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ze=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ze=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ze=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ze=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ze=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ze=!1}break;case"smarttags":break;default:ze=!1;break}if(ze||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?qCt(z,ie,te,n.slice(H,o.index)):(te=o,H=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var $e={};return!r.bookSheets&&!r.bookProps&&($e.Sheets=d),$e.SheetNames=f,$e.Workbook=V,$e.SSF=_i(Pr),$e.Props=B,$e.Custprops=z,$e}function v5(e,t){switch($$(t=t||{}),t.type||"base64"){case"base64":return gM(dc(e),t);case"binary":case"buffer":case"file":return gM(e,t);case"array":return gM(nm(e),t)}}function QCt(e,t){var r=[];return e.Props&&r.push(w1t(e.Props,t)),e.Custprops&&r.push(S1t(e.Props,e.Custprops)),r.join("")}function JCt(){return""}function ZCt(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,i){var a=[];a.push(Ft("NumberFormat",null,{"ss:Format":ti(Pr[n.numFmtId])}));var s={"ss:ID":"s"+(21+i)};r.push(Ft("Style",a.join(""),s))}),Ft("Styles",r.join(""))}function gve(e){return Ft("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+D$(e.Ref,{r:0,c:0})})}function ekt(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var i=t[n];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||r.push(gve(i)))}return Ft("Names",r.join(""))}function tkt(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var i=n.Workbook.Names,a=[],s=0;s<i.length;++s){var o=i[s];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||a.push(gve(o)))}return a.join("")}function rkt(e,t,r,n){if(!e)return"";var i=[];if(e["!margins"]&&(i.push("<PageSetup>"),e["!margins"].header&&i.push(Ft("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&i.push(Ft("Footer",null,{"x:Margin":e["!margins"].footer})),i.push(Ft("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),i.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)i.push(Ft("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<r&&!(n.Workbook.Sheets[a]&&!n.Workbook.Sheets[a].Hidden);++a);a==r&&i.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),e["!protect"]&&(i.push(Ds("ProtectContents","True")),e["!protect"].objects&&i.push(Ds("ProtectObjects","True")),e["!protect"].scenarios&&i.push(Ds("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?i.push(Ds("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&i.push(Ds("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(s){e["!protect"][s[0]]&&i.push("<"+s[1]+"/>")})),i.length==0?"":Ft("WorksheetOptions",i.join(""),{xmlns:ql.x})}function nkt(e){return e.map(function(t){var r=Cxt(t.t||""),n=Ft("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Ft("Comment",n,{"ss:Author":t.a})}).join("")}function ikt(e,t,r,n,i,a,s){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+ti(D$(e.f,s))),e.F&&e.F.slice(0,t.length)==t){var l=$i(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==s.r?"":"["+(l.r-s.r)+"]")+"C"+(l.c==s.c?"":"["+(l.c-s.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=ti(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=ti(e.l.Tooltip))),r["!merges"])for(var c=r["!merges"],d=0;d!=c.length;++d)c[d].s.c!=s.c||c[d].s.r!=s.r||(c[d].e.c>c[d].s.c&&(o["ss:MergeAcross"]=c[d].e.c-c[d].s.c),c[d].e.r>c[d].s.r&&(o["ss:MergeDown"]=c[d].e.r-c[d].s.r));var f="",p="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",p=String(e.v);break;case"b":f="Boolean",p=e.v?"1":"0";break;case"e":f="Error",p=op[e.v];break;case"d":f="DateTime",p=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Pr[14]);break;case"s":f="String",p=Ext(e.v||"");break}var m=am(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+m),o["ss:Index"]=s.c+1;var x=e.v!=null?p:"",v=e.t=="z"?"":'<Data ss:Type="'+f+'">'+x+"</Data>";return(e.c||[]).length>0&&(v+=nkt(e.c)),Ft("Cell",v,o)}function akt(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=My(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function skt(e,t,r,n){if(!e["!ref"])return"";var i=Rn(e["!ref"]),a=e["!merges"]||[],s=0,o=[];e["!cols"]&&e["!cols"].forEach(function(b,w){M0(b);var k=!!b.width,E=SP(w,b),N={"ss:Index":w+1};k&&(N["ss:Width"]=ZS(E.width)),b.hidden&&(N["ss:Hidden"]="1"),o.push(Ft("Column",null,N))});for(var l=Array.isArray(e),c=i.s.r;c<=i.e.r;++c){for(var d=[akt(c,(e["!rows"]||[])[c])],f=i.s.c;f<=i.e.c;++f){var p=!1;for(s=0;s!=a.length;++s)if(!(a[s].s.c>f)&&!(a[s].s.r>c)&&!(a[s].e.c<f)&&!(a[s].e.r<c)){(a[s].s.c!=f||a[s].s.r!=c)&&(p=!0);break}if(!p){var m={r:c,c:f},x=jr(m),v=l?(e[c]||[])[f]:e[x];d.push(ikt(v,x,e,t,r,n,m))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function okt(e,t,r){var n=[],i=r.SheetNames[e],a=r.Sheets[i],s=a?tkt(a,t,e,r):"";return s.length>0&&n.push("<Names>"+s+"</Names>"),s=a?skt(a,t,e,r):"",s.length>0&&n.push("<Table>"+s+"</Table>"),n.push(rkt(a,t,e,r)),n.join("")}function lkt(e,t){t||(t={}),e.SSF||(e.SSF=_i(Pr)),e.SSF&&(Eb(),mP(e.SSF),t.revssf=xP(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],am(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(QCt(e,t)),r.push(JCt()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Ft("Worksheet",okt(n,t,e),{"ss:Name":ti(e.SheetNames[n])}));return r[2]=ZCt(e,t),r[3]=ekt(e),ba+Ft("Workbook",r.join(""),{xmlns:ql.ss,"xmlns:o":ql.o,"xmlns:x":ql.x,"xmlns:ss":ql.ss,"xmlns:dt":ql.dt,"xmlns:html":ql.html})}function ckt(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=e1t(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=t1t(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var ukt=[60,1084,2066,2165,2175];function dkt(e,t,r,n,i){var a=n,s=[],o=r.slice(r.l,r.l+a);if(i&&i.enc&&i.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:i.enc.insitu(o)}s.push(o),r.l+=a;for(var l=fh(r,r.l),c=y5[l],d=0;c!=null&&ukt.indexOf(l)>-1;)a=fh(r,r.l+2),d=r.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),o=r.slice(d,r.l+4+a),s.push(o),r.l+=4+a,c=y5[l=fh(r,r.l)];var f=fs(s);Ps(f,0);var p=0;f.lens=[];for(var m=0;m<s.length;++m)f.lens.push(p),p+=s[m].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,i)}function kd(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Pr[n])}catch(a){if(t.WTF)throw a}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||op[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=GS(e.v):e.w=hx(e.v):e.w=fu(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(a){if(t.WTF)throw a}if(t.cellDates&&n&&e.t=="n"&&Sb(Pr[n]||String(n))){var i=lg(e.v);i&&(e.t="d",e.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}}function gN(e,t,r){return{v:e,ixfe:t,t:r}}function fkt(e,t){var r={opts:{}},n={},i=t.dense?[]:{},a={},s={},o=null,l=[],c="",d={},f,p="",m,x,v,b,w={},k=[],E,N,P=[],R=[],O={Sheets:[],WBProps:{date1904:!1},Views:[{}]},D={},L=function(Xe){return Xe<8?jg[Xe]:Xe<64&&R[Xe-8]||jg[Xe]},B=function(Xe,Te,He){var je=Te.XF.data;if(!(!je||!je.patternType||!He||!He.cellStyles)){Te.s={},Te.s.patternType=je.patternType;var Ce;(Ce=JS(L(je.icvFore)))&&(Te.s.fgColor={rgb:Ce}),(Ce=JS(L(je.icvBack)))&&(Te.s.bgColor={rgb:Ce})}},z=function(Xe,Te,He){if(!(ye>1)&&!(He.sheetRows&&Xe.r>=He.sheetRows)){if(He.cellStyles&&Te.XF&&Te.XF.data&&B(Xe,Te,He),delete Te.ixfe,delete Te.XF,f=Xe,p=jr(Xe),(!s||!s.s||!s.e)&&(s={s:{r:0,c:0},e:{r:0,c:0}}),Xe.r<s.s.r&&(s.s.r=Xe.r),Xe.c<s.s.c&&(s.s.c=Xe.c),Xe.r+1>s.e.r&&(s.e.r=Xe.r+1),Xe.c+1>s.e.c&&(s.e.c=Xe.c+1),He.cellFormula&&Te.f){for(var je=0;je<k.length;++je)if(!(k[je][0].s.c>Xe.c||k[je][0].s.r>Xe.r)&&!(k[je][0].e.c<Xe.c||k[je][0].e.r<Xe.r)){Te.F=Jr(k[je][0]),(k[je][0].s.c!=Xe.c||k[je][0].s.r!=Xe.r)&&delete Te.f,Te.f&&(Te.f=""+no(k[je][1],s,Xe,Q,H));break}}He.dense?(i[Xe.r]||(i[Xe.r]=[]),i[Xe.r][Xe.c]=Te):i[p]=Te}},H={enc:!1,sbcch:0,snames:[],sharedf:w,arrayf:k,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(H.password=t.password);var te,Y=[],W=[],Z=[],re=[],X=!1,Q=[];Q.SheetNames=H.snames,Q.sharedf=H.sharedf,Q.arrayf=H.arrayf,Q.names=[],Q.XTI=[];var fe=0,ye=0,J=0,ce=[],V=[],G;H.codepage=1200,Ku(1200);for(var ie=!1;e.l<e.length-1;){var Ee=e.l,ne=e.read_shift(2);if(ne===0&&fe===10)break;var ae=e.l===e.length?0:e.read_shift(2),me=y5[ne];if(me&&me.f){if(t.bookSheets&&fe===133&&ne!==133)break;if(fe=ne,me.r===2||me.r==12){var ve=e.read_shift(2);if(ae-=2,!H.enc&&ve!==ne&&((ve&255)<<8|ve>>8)!==ne)throw new Error("rt mismatch: "+ve+"!="+ne);me.r==12&&(e.l+=10,ae-=10)}var q={};if(ne===10?q=me.f(e,ae,H):q=dkt(ne,me,e,ae,H),ye==0&&[9,521,1033,2057].indexOf(fe)===-1)continue;switch(ne){case 34:r.opts.Date1904=O.WBProps.date1904=q;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(H.enc||(e.l=0),H.enc=q,!t.password)throw new Error("File is password-protected");if(q.valid==null)throw new Error("Encryption scheme unsupported");if(!q.valid)throw new Error("Password is incorrect");break;case 92:H.lastuser=q;break;case 66:var Ne=Number(q);switch(Ne){case 21010:Ne=1200;break;case 32768:Ne=1e4;break;case 32769:Ne=1252;break}Ku(H.codepage=Ne),ie=!0;break;case 317:H.rrtabid=q;break;case 25:H.winlocked=q;break;case 439:r.opts.RefreshAll=q;break;case 12:r.opts.CalcCount=q;break;case 16:r.opts.CalcDelta=q;break;case 17:r.opts.CalcIter=q;break;case 13:r.opts.CalcMode=q;break;case 14:r.opts.CalcPrecision=q;break;case 95:r.opts.CalcSaveRecalc=q;break;case 15:H.CalcRefMode=q;break;case 2211:r.opts.FullCalc=q;break;case 129:q.fDialog&&(i["!type"]="dialog"),q.fBelow||((i["!outline"]||(i["!outline"]={})).above=!0),q.fRight||((i["!outline"]||(i["!outline"]={})).left=!0);break;case 224:P.push(q);break;case 430:Q.push([q]),Q[Q.length-1].XTI=[];break;case 35:case 547:Q[Q.length-1].push(q);break;case 24:case 536:G={Name:q.Name,Ref:no(q.rgce,s,null,Q,H)},q.itab>0&&(G.Sheet=q.itab-1),Q.names.push(G),Q[0]||(Q[0]=[],Q[0].XTI=[]),Q[Q.length-1].push(q),q.Name=="_xlnm._FilterDatabase"&&q.itab>0&&q.rgce&&q.rgce[0]&&q.rgce[0][0]&&q.rgce[0][0][0]=="PtgArea3d"&&(V[q.itab-1]={ref:Jr(q.rgce[0][0][1][2])});break;case 22:H.ExternCount=q;break;case 23:Q.length==0&&(Q[0]=[],Q[0].XTI=[]),Q[Q.length-1].XTI=Q[Q.length-1].XTI.concat(q),Q.XTI=Q.XTI.concat(q);break;case 2196:if(H.biff<8)break;G!=null&&(G.Comment=q[1]);break;case 18:i["!protect"]=q;break;case 19:q!==0&&H.WTF&&console.error("Password verifier: "+q);break;case 133:a[q.pos]=q,H.snames.push(q.name);break;case 10:{if(--ye)break;if(s.e){if(s.e.r>0&&s.e.c>0){if(s.e.r--,s.e.c--,i["!ref"]=Jr(s),t.sheetRows&&t.sheetRows<=s.e.r){var Pe=s.e.r;s.e.r=t.sheetRows-1,i["!fullref"]=i["!ref"],i["!ref"]=Jr(s),s.e.r=Pe}s.e.r++,s.e.c++}Y.length>0&&(i["!merges"]=Y),W.length>0&&(i["!objects"]=W),Z.length>0&&(i["!cols"]=Z),re.length>0&&(i["!rows"]=re),O.Sheets.push(D)}c===""?d=i:n[c]=i,i=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(H.biff===8&&(H.biff={9:2,521:3,1033:4}[ne]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[q.BIFFVer]||8),H.biffguess=q.BIFFVer==0,q.BIFFVer==0&&q.dt==4096&&(H.biff=5,ie=!0,Ku(H.codepage=28591)),H.biff==8&&q.BIFFVer==0&&q.dt==16&&(H.biff=2),ye++)break;if(i=t.dense?[]:{},H.biff<8&&!ie&&(ie=!0,Ku(H.codepage=t.codepage||1252)),H.biff<5||q.BIFFVer==0&&q.dt==4096){c===""&&(c="Sheet1"),s={s:{r:0,c:0},e:{r:0,c:0}};var ze={pos:e.l-ae,name:c};a[ze.pos]=ze,H.snames.push(c)}else c=(a[Ee]||{name:""}).name;q.dt==32&&(i["!type"]="chart"),q.dt==64&&(i["!type"]="macro"),Y=[],W=[],H.arrayf=k=[],Z=[],re=[],X=!1,D={Hidden:(a[Ee]||{hs:0}).hs,name:c}}break;case 515:case 3:case 2:i["!type"]=="chart"&&(t.dense?(i[q.r]||[])[q.c]:i[jr({c:q.c,r:q.r})])&&++q.c,E={ixfe:q.ixfe,XF:P[q.ixfe]||{},v:q.val,t:"n"},J>0&&(E.z=ce[E.ixfe>>8&63]),kd(E,t,r.opts.Date1904),z({c:q.c,r:q.r},E,t);break;case 5:case 517:E={ixfe:q.ixfe,XF:P[q.ixfe],v:q.val,t:q.t},J>0&&(E.z=ce[E.ixfe>>8&63]),kd(E,t,r.opts.Date1904),z({c:q.c,r:q.r},E,t);break;case 638:E={ixfe:q.ixfe,XF:P[q.ixfe],v:q.rknum,t:"n"},J>0&&(E.z=ce[E.ixfe>>8&63]),kd(E,t,r.opts.Date1904),z({c:q.c,r:q.r},E,t);break;case 189:for(var De=q.c;De<=q.C;++De){var $e=q.rkrec[De-q.c][0];E={ixfe:$e,XF:P[$e],v:q.rkrec[De-q.c][1],t:"n"},J>0&&(E.z=ce[E.ixfe>>8&63]),kd(E,t,r.opts.Date1904),z({c:De,r:q.r},E,t)}break;case 6:case 518:case 1030:{if(q.val=="String"){o=q;break}if(E=gN(q.val,q.cell.ixfe,q.tt),E.XF=P[E.ixfe],t.cellFormula){var et=q.formula;if(et&&et[0]&&et[0][0]&&et[0][0][0]=="PtgExp"){var ut=et[0][0][1][0],kt=et[0][0][1][1],ht=jr({r:ut,c:kt});w[ht]?E.f=""+no(q.formula,s,q.cell,Q,H):E.F=((t.dense?(i[ut]||[])[kt]:i[ht])||{}).F}else E.f=""+no(q.formula,s,q.cell,Q,H)}J>0&&(E.z=ce[E.ixfe>>8&63]),kd(E,t,r.opts.Date1904),z(q.cell,E,t),o=q}break;case 7:case 519:if(o)o.val=q,E=gN(q,o.cell.ixfe,"s"),E.XF=P[E.ixfe],t.cellFormula&&(E.f=""+no(o.formula,s,o.cell,Q,H)),J>0&&(E.z=ce[E.ixfe>>8&63]),kd(E,t,r.opts.Date1904),z(o.cell,E,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{k.push(q);var Rr=jr(q[0].s);if(m=t.dense?(i[q[0].s.r]||[])[q[0].s.c]:i[Rr],t.cellFormula&&m){if(!o||!Rr||!m)break;m.f=""+no(q[1],s,q[0],Q,H),m.F=Jr(q[0])}}break;case 1212:{if(!t.cellFormula)break;if(p){if(!o)break;w[jr(o.cell)]=q[0],m=t.dense?(i[o.cell.r]||[])[o.cell.c]:i[jr(o.cell)],(m||{}).f=""+no(q[0],s,f,Q,H)}}break;case 253:E=gN(l[q.isst].t,q.ixfe,"s"),l[q.isst].h&&(E.h=l[q.isst].h),E.XF=P[E.ixfe],J>0&&(E.z=ce[E.ixfe>>8&63]),kd(E,t,r.opts.Date1904),z({c:q.c,r:q.r},E,t);break;case 513:t.sheetStubs&&(E={ixfe:q.ixfe,XF:P[q.ixfe],t:"z"},J>0&&(E.z=ce[E.ixfe>>8&63]),kd(E,t,r.opts.Date1904),z({c:q.c,r:q.r},E,t));break;case 190:if(t.sheetStubs)for(var er=q.c;er<=q.C;++er){var ct=q.ixfe[er-q.c];E={ixfe:ct,XF:P[ct],t:"z"},J>0&&(E.z=ce[E.ixfe>>8&63]),kd(E,t,r.opts.Date1904),z({c:er,r:q.r},E,t)}break;case 214:case 516:case 4:E=gN(q.val,q.ixfe,"s"),E.XF=P[E.ixfe],J>0&&(E.z=ce[E.ixfe>>8&63]),kd(E,t,r.opts.Date1904),z({c:q.c,r:q.r},E,t);break;case 0:case 512:ye===1&&(s=q);break;case 252:l=q;break;case 1054:if(H.biff==4){ce[J++]=q[1];for(var qt=0;qt<J+163&&Pr[qt]!=q[1];++qt);qt>=163&&Ch(q[1],J+163)}else Ch(q[1],q[0]);break;case 30:{ce[J++]=q;for(var Lt=0;Lt<J+163&&Pr[Lt]!=q;++Lt);Lt>=163&&Ch(q,J+163)}break;case 229:Y=Y.concat(q);break;case 93:W[q.cmo[0]]=H.lastobj=q;break;case 438:H.lastobj.TxO=q;break;case 127:H.lastobj.ImData=q;break;case 440:for(b=q[0].s.r;b<=q[0].e.r;++b)for(v=q[0].s.c;v<=q[0].e.c;++v)m=t.dense?(i[b]||[])[v]:i[jr({c:v,r:b})],m&&(m.l=q[1]);break;case 2048:for(b=q[0].s.r;b<=q[0].e.r;++b)for(v=q[0].s.c;v<=q[0].e.c;++v)m=t.dense?(i[b]||[])[v]:i[jr({c:v,r:b})],m&&m.l&&(m.l.Tooltip=q[1]);break;case 28:{if(H.biff<=5&&H.biff>=2)break;m=t.dense?(i[q[0].r]||[])[q[0].c]:i[jr(q[0])];var dr=W[q[2]];m||(t.dense?(i[q[0].r]||(i[q[0].r]=[]),m=i[q[0].r][q[0].c]={t:"z"}):m=i[jr(q[0])]={t:"z"},s.e.r=Math.max(s.e.r,q[0].r),s.s.r=Math.min(s.s.r,q[0].r),s.e.c=Math.max(s.e.c,q[0].c),s.s.c=Math.min(s.s.c,q[0].c)),m.c||(m.c=[]),x={a:q[1],t:dr.TxO.t},m.c.push(x)}break;case 2173:Zbt(P[q.ixfe],q.ext);break;case 125:{if(!H.cellStyles)break;for(;q.e>=q.s;)Z[q.e--]={width:q.w/256,level:q.level||0,hidden:!!(q.flags&1)},X||(X=!0,P$(q.w/256)),M0(Z[q.e+1])}break;case 520:{var Gt={};q.level!=null&&(re[q.r]=Gt,Gt.level=q.level),q.hidden&&(re[q.r]=Gt,Gt.hidden=!0),q.hpt&&(re[q.r]=Gt,Gt.hpt=q.hpt,Gt.hpx=My(q.hpt))}break;case 38:case 39:case 40:case 41:i["!margins"]||Fg(i["!margins"]={}),i["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ne]]=q;break;case 161:i["!margins"]||Fg(i["!margins"]={}),i["!margins"].header=q.header,i["!margins"].footer=q.footer;break;case 574:q.RTL&&(O.Views[0].RTL=!0);break;case 146:R=q;break;case 2198:te=q;break;case 140:N=q;break;case 442:c?D.CodeName=q||D.name:O.WBProps.CodeName=q||"ThisWorkbook";break}}else me||console.error("Missing Info for XLS Record 0x"+ne.toString(16)),e.l+=ae}return r.SheetNames=aa(a).sort(function(qe,Xe){return Number(qe)-Number(Xe)}).map(function(qe){return a[qe].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&V.forEach(function(qe,Xe){r.Sheets[r.SheetNames[Xe]]["!autofilter"]=qe}),r.Strings=l,r.SSF=_i(Pr),H.enc&&(r.Encryption=H.enc),te&&(r.Themes=te),r.Metadata={},N!==void 0&&(r.Metadata.Country=N),Q.names.length>0&&(O.Names=Q.names),r.Workbook=O,r}var U2={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function hkt(e,t,r){var n=vr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var i=mee(n,f5,U2.DSI);for(var a in i)t[a]=i[a]}catch(c){if(r.WTF)throw c}var s=vr.find(e,"/!SummaryInformation");if(s&&s.size>0)try{var o=mee(s,h5,U2.SI);for(var l in o)t[l]==null&&(t[l]=o[l])}catch(c){if(r.WTF)throw c}t.HeadingPairs&&t.TitlesOfParts&&(m1e(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function pkt(e,t){var r=[],n=[],i=[],a=0,s,o=VZ(f5,"n"),l=VZ(h5,"n");if(e.Props)for(s=aa(e.Props),a=0;a<s.length;++a)(Object.prototype.hasOwnProperty.call(o,s[a])?r:Object.prototype.hasOwnProperty.call(l,s[a])?n:i).push([s[a],e.Props[s[a]]]);if(e.Custprops)for(s=aa(e.Custprops),a=0;a<s.length;++a)Object.prototype.hasOwnProperty.call(e.Props||{},s[a])||(Object.prototype.hasOwnProperty.call(o,s[a])?r:Object.prototype.hasOwnProperty.call(l,s[a])?n:i).push([s[a],e.Custprops[s[a]]]);var c=[];for(a=0;a<i.length;++a)S1e.indexOf(i[a][0])>-1||p1e.indexOf(i[a][0])>-1||i[a][1]!=null&&c.push(i[a]);n.length&&vr.utils.cfb_add(t,"/SummaryInformation",gee(n,U2.SI,l,h5)),(r.length||c.length)&&vr.utils.cfb_add(t,"/DocumentSummaryInformation",gee(r,U2.DSI,o,f5,c.length?c:null,U2.UDI))}function xve(e,t){t||(t={}),$$(t),l$(),t.codepage&&o$(t.codepage);var r,n;if(e.FullPaths){if(vr.find(e,"/encryption"))throw new Error("File is password-protected");r=vr.find(e,"!CompObj"),n=vr.find(e,"/Workbook")||vr.find(e,"/Book")}else{switch(t.type){case"base64":e=Yl(dc(e));break;case"binary":e=Yl(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Ps(e,0),n={content:e}}var i,a;if(r&&ckt(r),t.bookProps&&!t.bookSheets)i={};else{var s=pn?"buffer":"array";if(n&&n.content)i=fkt(n.content,t);else if((a=vr.find(e,"PerfectOffice_MAIN"))&&a.content)i=Mg.to_workbook(a.content,(t.type=s,t));else if((a=vr.find(e,"NativeContent_MAIN"))&&a.content)i=Mg.to_workbook(a.content,(t.type=s,t));else throw(a=vr.find(e,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&vr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(i.vbaraw=Nwt(e))}var o={};return e.FullPaths&&hkt(e,o,t),i.Props=i.Custprops=o,t.bookFiles&&(i.cfb=e),i}function mkt(e,t){var r=t||{},n=vr.utils.cfb_new({root:"R"}),i="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":i="/Workbook",r.biff=8;break;case"biff5":i="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return vr.utils.cfb_add(n,i,vve(e,r)),r.biff==8&&(e.Props||e.Custprops)&&pkt(e,n),r.biff==8&&e.vbaraw&&Awt(n,vr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var rE={0:{f:BSt},1:{f:GSt},2:{f:fEt},3:{f:tEt},4:{f:QSt},5:{f:cEt},6:{f:xEt},7:{f:aEt},8:{f:CEt},9:{f:EEt},10:{f:wEt},11:{f:SEt},12:{f:XSt},13:{f:pEt},14:{f:nEt},15:{f:ZSt},16:{f:cve},17:{f:yEt},18:{f:oEt},19:{f:S$},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:yCt},40:{},42:{},43:{f:xbt},44:{f:mbt},45:{f:bbt},46:{f:Sbt},47:{f:wbt},48:{},49:{f:zxt},50:{},51:{f:rwt},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:R1e},62:{f:gEt},63:{f:dwt},64:{f:UEt},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:xo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:MEt},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:VSt},148:{f:zSt,p:16},151:{f:IEt},152:{},153:{f:gCt},154:{},155:{},156:{f:pCt},157:{},158:{},159:{T:1,f:Pyt},160:{T:-1},161:{T:1,f:Qx},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:kEt},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:ewt},336:{T:-1},337:{f:awt,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:d5},357:{},358:{},359:{},360:{T:1},361:{},362:{f:P1e},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:OEt},427:{f:PEt},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:jEt},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:WSt},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:AEt},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:d5},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Swt},633:{T:1},634:{T:-1},635:{T:1,f:bwt},636:{T:-1},637:{f:qxt},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:nCt},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:$Et},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},y5={6:{f:pM},10:{f:_p},12:{f:ka},13:{f:ka},14:{f:fa},15:{f:fa},16:{f:co},17:{f:fa},18:{f:fa},19:{f:ka},20:{f:See},21:{f:See},23:{f:P1e},24:{f:Cee},25:{f:fa},26:{},27:{},28:{f:$vt},29:{},34:{f:fa},35:{f:Eee},38:{f:co},39:{f:co},40:{f:co},41:{f:co},42:{f:fa},43:{f:fa},47:{f:Zyt},49:{f:pvt},51:{f:ka},60:{},61:{f:cvt},64:{f:fa},65:{f:hvt},66:{f:ka},77:{},80:{},81:{},82:{},85:{f:ka},89:{},90:{},91:{},92:{f:J1t},93:{f:Wvt},94:{},95:{f:fa},96:{},97:{},99:{f:fa},125:{f:R1e},128:{f:Tvt},129:{f:evt},130:{f:ka},131:{f:fa},132:{f:fa},133:{f:tvt},134:{},140:{f:Jvt},141:{f:ka},144:{},146:{f:tyt},151:{},152:{},153:{},154:{},155:{},156:{f:ka},157:{},158:{},160:{f:lyt},161:{f:iyt},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:kvt},190:{f:_vt},193:{f:_p},197:{},198:{},199:{},200:{},201:{},202:{f:fa},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ka},220:{},221:{f:fa},222:{},224:{f:Avt},225:{f:Q1t},226:{f:_p},227:{},229:{f:zvt},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:nvt},253:{f:gvt},255:{f:avt},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:E1e},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:fa},353:{f:_p},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:jvt},431:{f:fa},432:{},433:{},434:{},437:{},438:{f:Gvt},439:{f:fa},440:{f:Kvt},441:{},442:{f:LC},443:{},444:{f:ka},445:{},446:{},448:{f:_p},449:{f:lvt,r:2},450:{f:_p},512:{f:yee},513:{f:oyt},515:{f:Pvt},516:{f:vvt},517:{f:wee},519:{f:cyt},520:{f:svt},523:{},545:{f:kee},549:{f:vee},566:{},574:{f:dvt},638:{f:Cvt},659:{},1048:{},1054:{f:bvt},1084:{},1212:{f:Lvt},2048:{f:Yvt},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:hN},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:_p},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:ryt,r:12},2173:{f:Jbt,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:fa,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Fvt,r:12},2197:{},2198:{f:qbt,r:12},2199:{},2200:{},2201:{},2202:{f:Bvt,r:12},2203:{f:_p},2204:{},2205:{},2206:{},2207:{},2211:{f:ovt},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ka},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:ayt},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:eyt},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:yee},1:{},2:{f:pyt},3:{f:fyt},4:{f:dyt},5:{f:wee},7:{f:gyt},8:{},9:{f:hN},11:{},22:{f:ka},30:{f:Svt},31:{},32:{},33:{f:kee},36:{},37:{f:vee},50:{f:xyt},62:{},52:{},67:{},68:{f:ka},69:{},86:{},126:{},127:{f:uyt},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:vyt},223:{},234:{},354:{},421:{},518:{f:pM},521:{f:hN},536:{f:Cee},547:{f:Eee},561:{},579:{},1030:{f:pM},1033:{f:hN},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Bt(e,t,r,n){var i=t;if(!isNaN(i)){var a=n||(r||[]).length||0,s=e.next(4);s.write_shift(2,i),s.write_shift(2,a),a>0&&y$(r)&&e.push(r)}}function gkt(e,t,r,n){var i=(r||[]).length||0;if(i<=8224)return Bt(e,t,r,i);var a=t;if(!isNaN(a)){for(var s=r.parts||[],o=0,l=0,c=0;c+(s[o]||8224)<=8224;)c+=s[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,a),d.write_shift(2,c),e.push(r.slice(l,l+c)),l+=c;l<i;){for(d=e.next(4),d.write_shift(2,60),c=0;c+(s[o]||8224)<=8224;)c+=s[o]||8224,o++;d.write_shift(2,c),e.push(r.slice(l,l+c)),l+=c}}}function zC(e,t,r){return e||(e=pt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function xkt(e,t,r,n){var i=pt(9);return zC(i,e,t),C1e(r,n||"b",i),i}function vkt(e,t,r){var n=pt(8+2*r.length);return zC(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function ykt(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var i=t.t=="d"?Va(ki(t.v)):t.v;i==(i|0)&&i>=0&&i<65536?Bt(e,2,myt(r,n,i)):Bt(e,3,hyt(r,n,i));return;case"b":case"e":Bt(e,5,xkt(r,n,t.v,t.t));return;case"s":case"str":Bt(e,4,vkt(r,n,(t.v||"").slice(0,255)));return}Bt(e,1,zC(null,r,n))}function bkt(e,t,r,n){var i=Array.isArray(t),a=Rn(t["!ref"]||"A1"),s,o="",l=[];if(a.e.c>255||a.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),s=Jr(a)}for(var c=a.s.r;c<=a.e.r;++c){o=ga(c);for(var d=a.s.c;d<=a.e.c;++d){c===a.s.r&&(l[d]=Ui(d)),s=l[d]+o;var f=i?(t[c]||[])[d]:t[s];f&&ykt(e,f,c,d)}}}function wkt(e,t){for(var r=t||{},n=kl(),i=0,a=0;a<e.SheetNames.length;++a)e.SheetNames[a]==r.sheet&&(i=a);if(i==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Bt(n,r.biff==4?1033:r.biff==3?521:9,T$(e,16,r)),bkt(n,e.Sheets[e.SheetNames[i]],i,r),Bt(n,10),n.end()}function Skt(e,t,r){Bt(e,49,mvt({sz:12,name:"Arial"},r))}function Ekt(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)t[i]!=null&&Bt(e,1054,wvt(i,t[i],r))})}function Ckt(e,t){var r=pt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Bt(e,2151,r),r=pt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),T1e(Rn(t["!ref"]||"A1"),r),r.write_shift(4,4),Bt(e,2152,r)}function kkt(e,t){for(var r=0;r<16;++r)Bt(e,224,bee({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){Bt(e,224,bee(n,0,t))})}function _kt(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];Bt(e,440,Xvt(n)),n[1].Tooltip&&Bt(e,2048,Qvt(n))}delete t["!links"]}function Nkt(e,t){if(t){var r=0;t.forEach(function(n,i){++r<=256&&n&&Bt(e,125,nyt(SP(i,n),i))})}}function Akt(e,t,r,n,i){var a=16+am(i.cellXfs,t,i);if(t.v==null&&!t.bf){Bt(e,513,xx(r,n,a));return}if(t.bf)Bt(e,6,eSt(t,r,n,i,a));else switch(t.t){case"d":case"n":var s=t.t=="d"?Va(ki(t.v)):t.v;Bt(e,515,Rvt(r,n,s,a));break;case"b":case"e":Bt(e,517,Ovt(r,n,t.v,a,i,t.t));break;case"s":case"str":if(i.bookSST){var o=F$(i.Strings,t.v,i.revStrings);Bt(e,253,xvt(r,n,o,a))}else Bt(e,516,yvt(r,n,(t.v||"").slice(0,255),a,i));break;default:Bt(e,513,xx(r,n,a))}}function Tkt(e,t,r){var n=kl(),i=r.SheetNames[e],a=r.Sheets[i]||{},s=(r||{}).Workbook||{},o=(s.Sheets||[])[e]||{},l=Array.isArray(a),c=t.biff==8,d,f="",p=[],m=Rn(a["!ref"]||"A1"),x=c?65536:16384;if(m.e.c>255||m.e.r>=x){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,x-1)}Bt(n,2057,T$(r,16,t)),Bt(n,13,$c(1)),Bt(n,12,$c(100)),Bt(n,15,Mo(!0)),Bt(n,17,Mo(!1)),Bt(n,16,mx(.001)),Bt(n,95,Mo(!0)),Bt(n,42,Mo(!1)),Bt(n,43,Mo(!1)),Bt(n,130,$c(1)),Bt(n,128,Ivt()),Bt(n,131,Mo(!1)),Bt(n,132,Mo(!1)),c&&Nkt(n,a["!cols"]),Bt(n,512,Evt(m,t)),c&&(a["!links"]=[]);for(var v=m.s.r;v<=m.e.r;++v){f=ga(v);for(var b=m.s.c;b<=m.e.c;++b){v===m.s.r&&(p[b]=Ui(b)),d=p[b]+f;var w=l?(a[v]||[])[b]:a[d];w&&(Akt(n,w,v,b,t),c&&w.l&&a["!links"].push([d,w.l]))}}var k=o.CodeName||o.name||i;return c&&Bt(n,574,fvt((s.Views||[])[0])),c&&(a["!merges"]||[]).length&&Bt(n,229,Hvt(a["!merges"])),c&&_kt(n,a),Bt(n,442,k1e(k)),c&&Ckt(n,a),Bt(n,10),n.end()}function Ikt(e,t,r){var n=kl(),i=(e||{}).Workbook||{},a=i.Sheets||[],s=i.WBProps||{},o=r.biff==8,l=r.biff==5;if(Bt(n,2057,T$(e,5,r)),r.bookType=="xla"&&Bt(n,135),Bt(n,225,o?$c(1200):null),Bt(n,193,O1t(2)),l&&Bt(n,191),l&&Bt(n,192),Bt(n,226),Bt(n,92,Z1t("SheetJS",r)),Bt(n,66,$c(o?1200:1252)),o&&Bt(n,353,$c(0)),o&&Bt(n,448),Bt(n,317,syt(e.SheetNames.length)),o&&e.vbaraw&&Bt(n,211),o&&e.vbaraw){var c=s.CodeName||"ThisWorkbook";Bt(n,442,k1e(c))}Bt(n,156,$c(17)),Bt(n,25,Mo(!1)),Bt(n,18,Mo(!1)),Bt(n,19,$c(0)),o&&Bt(n,431,Mo(!1)),o&&Bt(n,444,$c(0)),Bt(n,61,uvt()),Bt(n,64,Mo(!1)),Bt(n,141,$c(0)),Bt(n,34,Mo(lCt(e)=="true")),Bt(n,14,Mo(!0)),o&&Bt(n,439,Mo(!1)),Bt(n,218,$c(0)),Skt(n,e,r),Ekt(n,e.SSF,r),kkt(n,r),o&&Bt(n,352,Mo(!1));var d=n.end(),f=kl();o&&Bt(f,140,Zvt()),o&&r.Strings&&gkt(f,252,ivt(r.Strings)),Bt(f,10);var p=f.end(),m=kl(),x=0,v=0;for(v=0;v<e.SheetNames.length;++v)x+=(o?12:11)+(o?2:1)*e.SheetNames[v].length;var b=d.length+x+p.length;for(v=0;v<e.SheetNames.length;++v){var w=a[v]||{};Bt(m,133,rvt({pos:b,hs:w.Hidden||0,dt:0,name:e.SheetNames[v]},r)),b+=t[v].length}var k=m.end();if(x!=k.length)throw new Error("BS8 "+x+" != "+k.length);var E=[];return d.length&&E.push(d),k.length&&E.push(k),p.length&&E.push(p),fs(E)}function Okt(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=_i(Pr)),e&&e.SSF&&(Eb(),mP(e.SSF),r.revssf=xP(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,z$(r),r.cellXfs=[],am(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var i=0;i<e.SheetNames.length;++i)n[n.length]=Tkt(i,r,e);return n.unshift(Ikt(e,n,r)),fs(n)}function vve(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var i=Tl(n["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var a=t||{};switch(a.biff||2){case 8:case 5:return Okt(e,t);case 4:case 3:case 2:return wkt(e,t)}throw new Error("invalid type "+a.bookType+" for BIFF")}function Dee(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var i=e.match(/<table/i);if(!i)throw new Error("Invalid HTML: could not find <table>");var a=e.match(/<\/table/i),s=i.index,o=a&&a.index||e.length,l=mxt(e.slice(s,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,d=0,f=0,p=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},x=[];for(s=0;s<l.length;++s){var v=l[s].trim(),b=v.slice(0,3).toLowerCase();if(b=="<tr"){if(++c,r.sheetRows&&r.sheetRows<=c){--c;break}d=0;continue}if(!(b!="<td"&&b!="<th")){var w=v.split(/<\/t[dh]>/i);for(o=0;o<w.length;++o){var k=w[o].trim();if(k.match(/<t[dh]/i)){for(var E=k,N=0;E.charAt(0)=="<"&&(N=E.indexOf(">"))>-1;)E=E.slice(N+1);for(var P=0;P<x.length;++P){var R=x[P];R.s.c==d&&R.s.r<c&&c<=R.e.r&&(d=R.e.c+1,P=-1)}var O=Dr(k.slice(0,k.indexOf(">")));p=O.colspan?+O.colspan:1,((f=+O.rowspan)>1||p>1)&&x.push({s:{r:c,c:d},e:{r:c+(f||1)-1,c:d+p-1}});var D=O.t||O["data-t"]||"";if(!E.length){d+=p;continue}if(E=zxe(E),m.s.r>c&&(m.s.r=c),m.e.r<c&&(m.e.r=c),m.s.c>d&&(m.s.c=d),m.e.c<d&&(m.e.c=d),!E.length){d+=p;continue}var L={t:"s",v:E};r.raw||!E.trim().length||D=="s"||(E==="TRUE"?L={t:"b",v:!0}:E==="FALSE"?L={t:"b",v:!1}:isNaN(ed(E))?isNaN(jy(E).getDate())||(L={t:"d",v:ki(E)},r.cellDates||(L={t:"n",v:Va(L.v)}),L.z=r.dateNF||Pr[14]):L={t:"n",v:ed(E)}),r.dense?(n[c]||(n[c]=[]),n[c][d]=L):n[jr({r:c,c:d})]=L,d+=p}}}}return n["!ref"]=Jr(m),x.length&&(n["!merges"]=x),n}function Pkt(e,t,r,n){for(var i=e["!merges"]||[],a=[],s=t.s.c;s<=t.e.c;++s){for(var o=0,l=0,c=0;c<i.length;++c)if(!(i[c].s.r>r||i[c].s.c>s)&&!(i[c].e.r<r||i[c].e.c<s)){if(i[c].s.r<r||i[c].s.c<s){o=-1;break}o=i[c].e.r-i[c].s.r+1,l=i[c].e.c-i[c].s.c+1;break}if(!(o<0)){var d=jr({r,c:s}),f=n.dense?(e[r]||[])[s]:e[d],p=f&&f.v!=null&&(f.h||g$(f.w||(qh(f),f.w)||""))||"",m={};o>1&&(m.rowspan=o),l>1&&(m.colspan=l),n.editable?p='<span contenteditable="true">'+p+"</span>":f&&(m["data-t"]=f&&f.t||"z",f.v!=null&&(m["data-v"]=f.v),f.z!=null&&(m["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+f.l.Target+'">'+p+"</a>")),m.id=(n.id||"sjs")+"-"+d,a.push(Ft("td",p,m))}}var x="<tr>";return x+a.join("")+"</tr>"}var Rkt='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',jkt="</body></html>";function Dkt(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return im(Dee(r[0],t),t);var n=V$();return r.forEach(function(i,a){q$(n,Dee(i,t),"Sheet"+(a+1))}),n}function Mkt(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function yve(e,t){var r=t||{},n=r.header!=null?r.header:Rkt,i=r.footer!=null?r.footer:jkt,a=[n],s=Tl(e["!ref"]);r.dense=Array.isArray(e),a.push(Mkt(e,s,r));for(var o=s.s.r;o<=s.e.r;++o)a.push(Pkt(e,s,o,r));return a.push("</table>"+i),a.join("")}function bve(e,t,r){var n=r||{},i=0,a=0;if(n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var s=typeof n.origin=="string"?$i(n.origin):n.origin;i=s.r,a=s.c}var o=t.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:i,c:a}};if(e["!ref"]){var d=Tl(e["!ref"]);c.s.r=Math.min(c.s.r,d.s.r),c.s.c=Math.min(c.s.c,d.s.c),c.e.r=Math.max(c.e.r,d.e.r),c.e.c=Math.max(c.e.c,d.e.c),i==-1&&(c.e.r=i=d.e.r+1)}var f=[],p=0,m=e["!rows"]||(e["!rows"]=[]),x=0,v=0,b=0,w=0,k=0,E=0;for(e["!cols"]||(e["!cols"]=[]);x<o.length&&v<l;++x){var N=o[x];if(Mee(N)){if(n.display)continue;m[v]={hidden:!0}}var P=N.children;for(b=w=0;b<P.length;++b){var R=P[b];if(!(n.display&&Mee(R))){var O=R.hasAttribute("data-v")?R.getAttribute("data-v"):R.hasAttribute("v")?R.getAttribute("v"):zxe(R.innerHTML),D=R.getAttribute("data-z")||R.getAttribute("z");for(p=0;p<f.length;++p){var L=f[p];L.s.c==w+a&&L.s.r<v+i&&v+i<=L.e.r&&(w=L.e.c+1-a,p=-1)}E=+R.getAttribute("colspan")||1,((k=+R.getAttribute("rowspan")||1)>1||E>1)&&f.push({s:{r:v+i,c:w+a},e:{r:v+i+(k||1)-1,c:w+a+(E||1)-1}});var B={t:"s",v:O},z=R.getAttribute("data-t")||R.getAttribute("t")||"";O!=null&&(O.length==0?B.t=z||"z":n.raw||O.trim().length==0||z=="s"||(O==="TRUE"?B={t:"b",v:!0}:O==="FALSE"?B={t:"b",v:!1}:isNaN(ed(O))?isNaN(jy(O).getDate())||(B={t:"d",v:ki(O)},n.cellDates||(B={t:"n",v:Va(B.v)}),B.z=n.dateNF||Pr[14]):B={t:"n",v:ed(O)})),B.z===void 0&&D!=null&&(B.z=D);var H="",te=R.getElementsByTagName("A");if(te&&te.length)for(var Y=0;Y<te.length&&!(te[Y].hasAttribute("href")&&(H=te[Y].getAttribute("href"),H.charAt(0)!="#"));++Y);H&&H.charAt(0)!="#"&&(B.l={Target:H}),n.dense?(e[v+i]||(e[v+i]=[]),e[v+i][w+a]=B):e[jr({c:w+a,r:v+i})]=B,c.e.c<w+a&&(c.e.c=w+a),w+=E}}++v}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),c.e.r=Math.max(c.e.r,v-1+i),e["!ref"]=Jr(c),v>=l&&(e["!fullref"]=Jr((c.e.r=o.length-x+v-1+i,c))),e}function wve(e,t){var r=t||{},n=r.dense?[]:{};return bve(n,e,t)}function Fkt(e,t){return im(wve(e,t),t)}function Mee(e){var t="",r=Lkt(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Lkt(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Bkt(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,i){return Array(parseInt(i,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Pn(t.replace(/<[^>]*>/g,""));return[r]}var Fee={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Sve(e,t){var r=t||{},n=x$(e),i=[],a,s,o={name:""},l="",c=0,d,f,p={},m=[],x=r.dense?[]:{},v,b,w={value:""},k="",E=0,N=[],P=-1,R=-1,O={s:{r:1e6,c:1e7},e:{r:0,c:0}},D=0,L={},B=[],z={},H=0,te=0,Y=[],W=1,Z=1,re=[],X={Names:[]},Q={},fe=["",""],ye=[],J={},ce="",V=0,G=!1,ie=!1,Ee=0;for(YS.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");v=YS.exec(n);)switch(v[3]=v[3].replace(/_.*$/,"")){case"table":case"":v[1]==="/"?(O.e.c>=O.s.c&&O.e.r>=O.s.r?x["!ref"]=Jr(O):x["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=O.e.r&&(x["!fullref"]=x["!ref"],O.e.r=r.sheetRows-1,x["!ref"]=Jr(O)),B.length&&(x["!merges"]=B),Y.length&&(x["!rows"]=Y),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),m.push(d.name),p[d.name]=x,ie=!1):v[0].charAt(v[0].length-2)!=="/"&&(d=Dr(v[0],!1),P=R=-1,O.s.r=O.s.c=1e7,O.e.r=O.e.c=0,x=r.dense?[]:{},B=[],Y=[],ie=!0);break;case"table-row-group":v[1]==="/"?--D:++D;break;case"table-row":case"":if(v[1]==="/"){P+=W,W=1;break}if(f=Dr(v[0],!1),f.?P=f.-1:P==-1&&(P=0),W=+f["number-rows-repeated"]||1,W<10)for(Ee=0;Ee<W;++Ee)D>0&&(Y[P+Ee]={level:D});R=-1;break;case"covered-table-cell":v[1]!=="/"&&++R,r.sheetStubs&&(r.dense?(x[P]||(x[P]=[]),x[P][R]={t:"z"}):x[jr({r:P,c:R})]={t:"z"}),k="",N=[];break;case"table-cell":case"":if(v[0].charAt(v[0].length-2)==="/")++R,w=Dr(v[0],!1),Z=parseInt(w["number-columns-repeated"]||"1",10),b={t:"z",v:null},w.formula&&r.cellFormula!=!1&&(b.f=Pee(Pn(w.formula))),(w.||w["value-type"])=="string"&&(b.t="s",b.v=Pn(w["string-value"]||""),r.dense?(x[P]||(x[P]=[]),x[P][R]=b):x[jr({r:P,c:R})]=b),R+=Z-1;else if(v[1]!=="/"){++R,k="",E=0,N=[],Z=1;var ne=W?P+W-1:P;if(R>O.e.c&&(O.e.c=R),R<O.s.c&&(O.s.c=R),P<O.s.r&&(O.s.r=P),ne>O.e.r&&(O.e.r=ne),w=Dr(v[0],!1),ye=[],J={},b={t:w.||w["value-type"],v:null},r.cellFormula)if(w.formula&&(w.formula=Pn(w.formula)),w["number-matrix-columns-spanned"]&&w["number-matrix-rows-spanned"]&&(H=parseInt(w["number-matrix-rows-spanned"],10)||0,te=parseInt(w["number-matrix-columns-spanned"],10)||0,z={s:{r:P,c:R},e:{r:P+H-1,c:R+te-1}},b.F=Jr(z),re.push([z,b.F])),w.formula)b.f=Pee(w.formula);else for(Ee=0;Ee<re.length;++Ee)P>=re[Ee][0].s.r&&P<=re[Ee][0].e.r&&R>=re[Ee][0].s.c&&R<=re[Ee][0].e.c&&(b.F=re[Ee][1]);switch((w["number-columns-spanned"]||w["number-rows-spanned"])&&(H=parseInt(w["number-rows-spanned"],10)||0,te=parseInt(w["number-columns-spanned"],10)||0,z={s:{r:P,c:R},e:{r:P+H-1,c:R+te-1}},B.push(z)),w["number-columns-repeated"]&&(Z=parseInt(w["number-columns-repeated"],10)),b.t){case"boolean":b.t="b",b.v=Si(w["boolean-value"]);break;case"float":b.t="n",b.v=parseFloat(w.value);break;case"percentage":b.t="n",b.v=parseFloat(w.value);break;case"currency":b.t="n",b.v=parseFloat(w.value);break;case"date":b.t="d",b.v=ki(w["date-value"]),r.cellDates||(b.t="n",b.v=Va(b.v)),b.z="m/d/yy";break;case"time":b.t="n",b.v=fxt(w["time-value"])/86400,r.cellDates&&(b.t="d",b.v=vP(b.v)),b.z="HH:MM:SS";break;case"number":b.t="n",b.v=parseFloat(w.);break;default:if(b.t==="string"||b.t==="text"||!b.t)b.t="s",w["string-value"]!=null&&(k=Pn(w["string-value"]),N=[]);else throw new Error("Unsupported value type "+b.t)}}else{if(G=!1,b.t==="s"&&(b.v=k||"",N.length&&(b.R=N),G=E==0),Q.Target&&(b.l=Q),ye.length>0&&(b.c=ye,ye=[]),k&&r.cellText!==!1&&(b.w=k),G&&(b.t="z",delete b.v),(!G||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=P))for(var ae=0;ae<W;++ae){if(Z=parseInt(w["number-columns-repeated"]||"1",10),r.dense)for(x[P+ae]||(x[P+ae]=[]),x[P+ae][R]=ae==0?b:_i(b);--Z>0;)x[P+ae][R+Z]=_i(b);else for(x[jr({r:P+ae,c:R})]=b;--Z>0;)x[jr({r:P+ae,c:R+Z})]=_i(b);O.e.c<=R&&(O.e.c=R)}Z=parseInt(w["number-columns-repeated"]||"1",10),R+=Z-1,Z=0,b={},k="",N=[]}Q={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(v[1]==="/"){if((a=i.pop())[0]!==v[3])throw"Bad state: "+a}else v[0].charAt(v[0].length-2)!=="/"&&i.push([v[3],!0]);break;case"annotation":if(v[1]==="/"){if((a=i.pop())[0]!==v[3])throw"Bad state: "+a;J.t=k,N.length&&(J.R=N),J.a=ce,ye.push(J)}else v[0].charAt(v[0].length-2)!=="/"&&i.push([v[3],!1]);ce="",V=0,k="",E=0,N=[];break;case"creator":v[1]==="/"?ce=n.slice(V,v.index):V=v.index+v[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(v[1]==="/"){if((a=i.pop())[0]!==v[3])throw"Bad state: "+a}else v[0].charAt(v[0].length-2)!=="/"&&i.push([v[3],!1]);k="",E=0,N=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(v[1]==="/"){if(L[o.name]=l,(a=i.pop())[0]!==v[3])throw"Bad state: "+a}else v[0].charAt(v[0].length-2)!=="/"&&(l="",o=Dr(v[0],!1),i.push([v[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(i[i.length-1][0]){case"time-style":case"date-style":s=Dr(v[0],!1),l+=Fee[v[3]][s.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(i[i.length-1][0]){case"time-style":case"date-style":s=Dr(v[0],!1),l+=Fee[v[3]][s.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(v[0].slice(-2)==="/>")break;if(v[1]==="/")switch(i[i.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(c,v.index);break}else c=v.index+v[0].length;break;case"named-range":s=Dr(v[0],!1),fe=mM(s["cell-range-address"]);var me={Name:s.name,Ref:fe[0]+"!"+fe[1]};ie&&(me.Sheet=m.length),X.Names.push(me);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(i[i.length-1][0])>-1)break;if(v[1]==="/"&&(!w||!w["string-value"])){var ve=Bkt(n.slice(E,v.index));k=(k.length>0?k+`
`:"")+ve[0]}else Dr(v[0],!1),E=v.index+v[0].length;break;case"s":break;case"database-range":if(v[1]==="/")break;try{fe=mM(Dr(v[0])["target-range-address"]),p[fe[0]]["!autofilter"]={ref:fe[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(v[1]!=="/"){if(Q=Dr(v[0],!1),!Q.href)break;Q.Target=Pn(Q.href),delete Q.href,Q.Target.charAt(0)=="#"&&Q.Target.indexOf(".")>-1?(fe=mM(Q.Target.slice(1)),Q.Target="#"+fe[0]+"!"+fe[1]):Q.Target.match(/^\.\.[\\\/]/)&&(Q.Target=Q.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(v[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(v)}}var q={Sheets:p,SheetNames:m,Workbook:X};return r.bookSheets&&delete q.Sheets,q}function Lee(e,t){t=t||{},Lc(e,"META-INF/manifest.xml")&&f1t(Ca(e,"META-INF/manifest.xml"),t);var r=Ql(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=Sve(si(r),t);return Lc(e,"meta.xml")&&(n.Props=f1e(Ca(e,"meta.xml"))),n}function Bee(e,t){return Sve(e,t)}var Ukt=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+XS({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return ba+t}}(),Uee=function(){var e=function(a){return ti(a).replace(/  +/g,function(s){return'<text:s text:c="'+s.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(a,s,o){var l=[];l.push('      <table:table table:name="'+ti(s.SheetNames[o])+`" table:style-name="ta1">
`);var c=0,d=0,f=Tl(a["!ref"]||"A1"),p=a["!merges"]||[],m=0,x=Array.isArray(a);if(a["!cols"])for(d=0;d<=f.e.c;++d)l.push("        <table:table-column"+(a["!cols"][d]?' table:style-name="co'+a["!cols"][d].ods+'"':"")+`></table:table-column>
`);var v="",b=a["!rows"]||[];for(c=0;c<f.s.r;++c)v=b[c]?' table:style-name="ro'+b[c].ods+'"':"",l.push("        <table:table-row"+v+`></table:table-row>
`);for(;c<=f.e.r;++c){for(v=b[c]?' table:style-name="ro'+b[c].ods+'"':"",l.push("        <table:table-row"+v+`>
`),d=0;d<f.s.c;++d)l.push(t);for(;d<=f.e.c;++d){var w=!1,k={},E="";for(m=0;m!=p.length;++m)if(!(p[m].s.c>d)&&!(p[m].s.r>c)&&!(p[m].e.c<d)&&!(p[m].e.r<c)){(p[m].s.c!=d||p[m].s.r!=c)&&(w=!0),k["table:number-columns-spanned"]=p[m].e.c-p[m].s.c+1,k["table:number-rows-spanned"]=p[m].e.r-p[m].s.r+1;break}if(w){l.push(r);continue}var N=jr({r:c,c:d}),P=x?(a[c]||[])[d]:a[N];if(P&&P.f&&(k["table:formula"]=ti(sSt(P.f)),P.F&&P.F.slice(0,N.length)==N)){var R=Tl(P.F);k["table:number-matrix-columns-spanned"]=R.e.c-R.s.c+1,k["table:number-matrix-rows-spanned"]=R.e.r-R.s.r+1}if(!P){l.push(t);continue}switch(P.t){case"b":E=P.v?"TRUE":"FALSE",k["office:value-type"]="boolean",k["office:boolean-value"]=P.v?"true":"false";break;case"n":E=P.w||String(P.v||0),k["office:value-type"]="float",k["office:value"]=P.v||0;break;case"s":case"str":E=P.v==null?"":P.v,k["office:value-type"]="string";break;case"d":E=P.w||ki(P.v).toISOString(),k["office:value-type"]="date",k["office:date-value"]=ki(P.v).toISOString(),k["table:style-name"]="ce1";break;default:l.push(t);continue}var O=e(E);if(P.l&&P.l.Target){var D=P.l.Target;D=D.charAt(0)=="#"?"#"+oSt(D.slice(1)):D,D.charAt(0)!="#"&&!D.match(/^\w+:/)&&(D="../"+D),O=Ft("text:a",O,{"xlink:href":D.replace(/&/g,"&amp;")})}l.push("          "+Ft("table:table-cell",Ft("text:p",O,{}),k)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},i=function(a,s){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var o=0;s.SheetNames.map(function(c){return s.Sheets[c]}).forEach(function(c){if(c&&c["!cols"]){for(var d=0;d<c["!cols"].length;++d)if(c["!cols"][d]){var f=c["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;M0(f),f.ods=o;var p=c["!cols"][d].wpx+"px";a.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),a.push(`  </style:style>
`),++o}}});var l=0;s.SheetNames.map(function(c){return s.Sheets[c]}).forEach(function(c){if(c&&c["!rows"]){for(var d=0;d<c["!rows"].length;++d)if(c["!rows"][d]){c["!rows"][d].ods=l;var f=c["!rows"][d].hpx+"px";a.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),a.push(`  </style:style>
`),++l}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(s,o){var l=[ba],c=XS({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=XS({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+c+d+`>
`),l.push(d1e().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+c+`>
`),i(l,s),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var f=0;f!=s.SheetNames.length;++f)l.push(n(s.Sheets[s.SheetNames[f]],s,f));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function Eve(e,t){if(t.bookType=="fods")return Uee(e,t);var r=h$(),n="",i=[],a=[];return n="mimetype",sn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",sn(r,n,Uee(e,t)),i.push([n,"text/xml"]),a.push([n,"ContentFile"]),n="styles.xml",sn(r,n,Ukt(e,t)),i.push([n,"text/xml"]),a.push([n,"StylesFile"]),n="meta.xml",sn(r,n,ba+d1e()),i.push([n,"text/xml"]),a.push([n,"MetadataFile"]),n="manifest.rdf",sn(r,n,m1t(a)),i.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",sn(r,n,h1t(i)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function vx(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function b5(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):si(nm(e))}function $kt(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Yl(Kd(e))}function zkt(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function L0(e){var t=e.reduce(function(i,a){return i+a.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(i){r.set(i,n),n+=i.length}),r}function $ee(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function Hkt(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,i=t+13;i>=t;--i)n=n*256+e[i];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function Wkt(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,i=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var a=0;i>=1;++a,i/=256)e[t+a]=i&255;e[t+15]|=r>=0?0:128}function nE(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function Qn(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function ia(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Ln(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],i=nE(e,r),a=i&7;i=Math.floor(i/8);var s=0,o;if(i==0)break;switch(a){case 0:{for(var l=r[0];e[r[0]++]>=128;);o=e.slice(l,r[0])}break;case 5:s=4,o=e.slice(r[0],r[0]+s),r[0]+=s;break;case 1:s=8,o=e.slice(r[0],r[0]+s),r[0]+=s;break;case 2:s=nE(e,r),o=e.slice(r[0],r[0]+s),r[0]+=s;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(i," at offset ").concat(n))}var c={data:o,type:a};t[i]==null?t[i]=[c]:t[i].push(c)}return t}function _s(e){var t=[];return e.forEach(function(r,n){r.forEach(function(i){i.data&&(t.push(Qn(n*8+i.type)),i.type==2&&t.push(Qn(i.data.length)),t.push(i.data))})}),L0(t)}function U$(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function jc(e){for(var t,r=[],n=[0];n[0]<e.length;){var i=nE(e,n),a=Ln(e.slice(n[0],n[0]+i));n[0]+=i;var s={id:ia(a[1][0].data),messages:[]};a[2].forEach(function(o){var l=Ln(o.data),c=ia(l[3][0].data);s.messages.push({meta:l,data:e.slice(n[0],n[0]+c)}),n[0]+=c}),(t=a[3])!=null&&t[0]&&(s.merge=ia(a[3][0].data)>>>0>0),r.push(s)}return r}function M1(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:Qn(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Qn(+!!r.merge),type:0}]);var i=[];r.messages.forEach(function(s){i.push(s.data),s.meta[3]=[{type:0,data:Qn(s.data.length)}],n[2].push({data:_s(s.meta),type:2})});var a=_s(n);t.push(Qn(a.length)),t.push(a),i.forEach(function(s){return t.push(s)})}),L0(t)}function Vkt(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=nE(t,r),i=[];r[0]<t.length;){var a=t[r[0]]&3;if(a==0){var s=t[r[0]++]>>2;if(s<60)++s;else{var o=s-59;s=t[r[0]],o>1&&(s|=t[r[0]+1]<<8),o>2&&(s|=t[r[0]+2]<<16),o>3&&(s|=t[r[0]+3]<<24),s>>>=0,s++,r[0]+=o}i.push(t.slice(r[0],r[0]+s)),r[0]+=s;continue}else{var l=0,c=0;if(a==1?(c=(t[r[0]]>>2&7)+4,l=(t[r[0]++]&224)<<3,l|=t[r[0]++]):(c=(t[r[0]++]>>2)+1,a==2?(l=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(l=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),i=[L0(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(i.push(i[0].slice(-l)),c-=l;c>=i[i.length-1].length;)i.push(i[i.length-1]),c-=i[i.length-1].length;i.push(i[0].slice(-l,-l+c))}}var d=L0(i);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Dc(e){for(var t=[],r=0;r<e.length;){var n=e[r++],i=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(Vkt(n,e.slice(r,r+i))),r+=i}if(r!==e.length)throw new Error("data is not a valid framed stream!");return L0(t)}function F1(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),i=new Uint8Array(4);t.push(i);var a=Qn(n),s=a.length;t.push(a),n<=60?(s++,t.push(new Uint8Array([n-1<<2]))):n<=256?(s+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(s+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(s+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(s+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),s+=n,i[0]=0,i[1]=s&255,i[2]=s>>8&255,i[3]=s>>16&255,r+=n}return L0(t)}function qkt(e,t,r,n){var i=vx(e),a=i.getUint32(4,!0),s=(n>1?12:8)+$ee(a&(n>1?3470:398))*4,o=-1,l=-1,c=NaN,d=new Date(2001,0,1);a&512&&(o=i.getUint32(s,!0),s+=4),s+=$ee(a&(n>1?12288:4096))*4,a&16&&(l=i.getUint32(s,!0),s+=4),a&32&&(c=i.getFloat64(s,!0),s+=8),a&64&&(d.setTime(d.getTime()+i.getFloat64(s,!0)*1e3),s+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:c>0};break;case 7:f={t:"n",v:c/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(l>-1)f={t:"s",v:t[l]};else if(!isNaN(c))f={t:"n",v:c};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function Gkt(e,t,r){var n=vx(e),i=n.getUint32(8,!0),a=12,s=-1,o=-1,l=NaN,c=NaN,d=new Date(2001,0,1);i&1&&(l=Hkt(e,a),a+=16),i&2&&(c=n.getFloat64(a,!0),a+=8),i&4&&(d.setTime(d.getTime()+n.getFloat64(a,!0)*1e3),a+=8),i&8&&(o=n.getUint32(a,!0),a+=4),i&16&&(s=n.getUint32(a,!0),a+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:l};break;case 3:f={t:"s",v:t[o]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:c>0};break;case 7:f={t:"n",v:c/86400};break;case 8:f={t:"e",v:0};break;case 9:if(s>-1)f={t:"s",v:r[s]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(i&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(i&31," : ").concat(e.slice(0,4)))}return f}function xM(e,t){var r=new Uint8Array(32),n=vx(r),i=12,a=0;switch(r[0]=5,e.t){case"n":r[1]=2,Wkt(r,i,e.v),a|=1,i+=16;break;case"b":r[1]=6,n.setFloat64(i,e.v?1:0,!0),a|=2,i+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(i,t.indexOf(e.v),!0),a|=8,i+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,a,!0),r.slice(0,i)}function vM(e,t){var r=new Uint8Array(32),n=vx(r),i=12,a=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(i,e.v,!0),a|=32,i+=8;break;case"b":r[2]=6,n.setFloat64(i,e.v?1:0,!0),a|=32,i+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(i,t.indexOf(e.v),!0),a|=16,i+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,a,!0),r.slice(0,i)}function Kkt(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return qkt(e,t,r,e[0]);case 5:return Gkt(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function to(e){var t=Ln(e);return nE(t[1][0].data)}function zee(e,t){var r=Ln(t.data),n=ia(r[1][0].data),i=r[3],a=[];return(i||[]).forEach(function(s){var o=Ln(s.data),l=ia(o[1][0].data)>>>0;switch(n){case 1:a[l]=b5(o[3][0].data);break;case 8:{var c=e[to(o[9][0].data)][0],d=Ln(c.data),f=e[to(d[1][0].data)][0],p=ia(f.meta[1][0].data);if(p!=2001)throw new Error("2000 unexpected reference to ".concat(p));var m=Ln(f.data);a[l]=m[3].map(function(x){return b5(x.data)}).join("")}break}}),a}function Xkt(e,t){var r,n,i,a,s,o,l,c,d,f,p,m,x,v,b=Ln(e),w=ia(b[1][0].data)>>>0,k=ia(b[2][0].data)>>>0,E=((n=(r=b[8])==null?void 0:r[0])==null?void 0:n.data)&&ia(b[8][0].data)>0||!1,N,P;if((a=(i=b[7])==null?void 0:i[0])!=null&&a.data&&t!=0)N=(o=(s=b[7])==null?void 0:s[0])==null?void 0:o.data,P=(c=(l=b[6])==null?void 0:l[0])==null?void 0:c.data;else if((f=(d=b[4])==null?void 0:d[0])!=null&&f.data&&t!=1)N=(m=(p=b[4])==null?void 0:p[0])==null?void 0:m.data,P=(v=(x=b[3])==null?void 0:x[0])==null?void 0:v.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var R=E?4:1,O=vx(N),D=[],L=0;L<N.length/2;++L){var B=O.getUint16(L*2,!0);B<65535&&D.push([L,B])}if(D.length!=k)throw"Expected ".concat(k," cells, found ").concat(D.length);var z=[];for(L=0;L<D.length-1;++L)z[D[L][0]]=P.subarray(D[L][1]*R,D[L+1][1]*R);return D.length>=1&&(z[D[D.length-1][0]]=P.subarray(D[D.length-1][1]*R)),{R:w,cells:z}}function Ykt(e,t){var r,n=Ln(t.data),i=(r=n==null?void 0:n[7])!=null&&r[0]?ia(n[7][0].data)>>>0>0?1:0:-1,a=U$(n[5],function(s){return Xkt(s,i)});return{nrows:ia(n[4][0].data)>>>0,data:a.reduce(function(s,o){return s[o.R]||(s[o.R]=[]),o.cells.forEach(function(l,c){if(s[o.R][c])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(c));s[o.R][c]=l}),s},[])}}function Qkt(e,t,r){var n,i=Ln(t.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(ia(i[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(i[6][0].data));if(a.e.c=(ia(i[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(i[7][0].data));r["!ref"]=Jr(a);var s=Ln(i[4][0].data),o=zee(e,e[to(s[4][0].data)][0]),l=(n=s[17])!=null&&n[0]?zee(e,e[to(s[17][0].data)][0]):[],c=Ln(s[3][0].data),d=0;c[1].forEach(function(f){var p=Ln(f.data),m=e[to(p[2][0].data)][0],x=ia(m.meta[1][0].data);if(x!=6002)throw new Error("6001 unexpected reference to ".concat(x));var v=Ykt(e,m);v.data.forEach(function(b,w){b.forEach(function(k,E){var N=jr({r:d+w,c:E}),P=Kkt(k,o,l);P&&(r[N]=P)})}),d+=v.nrows})}function Jkt(e,t){var r=Ln(t.data),n={"!ref":"A1"},i=e[to(r[2][0].data)],a=ia(i[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return Qkt(e,i[0],n),n}function Zkt(e,t){var r,n=Ln(t.data),i={name:(r=n[1])!=null&&r[0]?b5(n[1][0].data):"",sheets:[]},a=U$(n[2],to);return a.forEach(function(s){e[s].forEach(function(o){var l=ia(o.meta[1][0].data);l==6e3&&i.sheets.push(Jkt(e,o))})}),i}function e_t(e,t){var r=V$(),n=Ln(t.data),i=U$(n[1],to);if(i.forEach(function(a){e[a].forEach(function(s){var o=ia(s.meta[1][0].data);if(o==2){var l=Zkt(e,s);l.sheets.forEach(function(c,d){q$(r,c,d==0?l.name:l.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function yM(e){var t,r,n,i,a={},s=[];if(e.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var c;try{c=Dc(l.content)}catch(f){return console.log("?? "+l.content.length+" "+(f.message||f))}var d;try{d=jc(c)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){a[f.id]=f.messages,s.push(f.id)})}}),!s.length)throw new Error("File has no messages");var o=((i=(n=(r=(t=a==null?void 0:a[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:i[0].data)&&ia(a[1][0].meta[1][0].data)==1&&a[1][0];if(o||s.forEach(function(l){a[l].forEach(function(c){var d=ia(c.meta[1][0].data)>>>0;if(d==1)if(!o)o=c;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return e_t(a,o)}function t_t(e,t,r){var n,i,a,s;if(!((n=e[6])!=null&&n[0])||!((i=e[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var o=((s=(a=e[8])==null?void 0:a[0])==null?void 0:s.data)&&ia(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,c=vx(e[7][0].data),d=0,f=[],p=vx(e[4][0].data),m=0,x=[],v=0;v<t.length;++v){if(t[v]==null){c.setUint16(v*2,65535,!0),p.setUint16(v*2,65535);continue}c.setUint16(v*2,d,!0),p.setUint16(v*2,m,!0);var b,w;switch(typeof t[v]){case"string":b=xM({t:"s",v:t[v]},r),w=vM({t:"s",v:t[v]},r);break;case"number":b=xM({t:"n",v:t[v]},r),w=vM({t:"n",v:t[v]},r);break;case"boolean":b=xM({t:"b",v:t[v]},r),w=vM({t:"b",v:t[v]},r);break;default:throw new Error("Unsupported value "+t[v])}f.push(b),d+=b.length,x.push(w),m+=w.length,++l}for(e[2][0].data=Qn(l);v<e[7][0].data.length/2;++v)c.setUint16(v*2,65535,!0),p.setUint16(v*2,65535,!0);return e[6][0].data=L0(f),e[3][0].data=L0(x),l}function r_t(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Tl(r["!ref"]);n.s.r=n.s.c=0;var i=!1;n.e.c>9&&(i=!0,n.e.c=9),n.e.r>49&&(i=!0,n.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Jr(n)));var a=pO(r,{range:n,header:1}),s=["~Sh33tJ5~"];a.forEach(function(ce){return ce.forEach(function(V){typeof V=="string"&&s.push(V)})});var o={},l=[],c=vr.read(t.numbers,{type:"base64"});c.FileIndex.map(function(ce,V){return[ce,c.FullPaths[V]]}).forEach(function(ce){var V=ce[0],G=ce[1];if(V.type==2&&V.name.match(/\.iwa/)){var ie=V.content,Ee=Dc(ie),ne=jc(Ee);ne.forEach(function(ae){l.push(ae.id),o[ae.id]={deps:[],location:G,type:ia(ae.messages[0].meta[1][0].data)}})}}),l.sort(function(ce,V){return ce-V});var d=l.filter(function(ce){return ce>1}).map(function(ce){return[ce,Qn(ce)]});c.FileIndex.map(function(ce,V){return[ce,c.FullPaths[V]]}).forEach(function(ce){var V=ce[0];if(ce[1],!!V.name.match(/\.iwa/)){var G=jc(Dc(V.content));G.forEach(function(ie){ie.messages.forEach(function(Ee){d.forEach(function(ne){ie.messages.some(function(ae){return ia(ae.meta[1][0].data)!=11006&&zkt(ae.data,ne[1])})&&o[ne[0]].deps.push(ie.id)})})})}});for(var f=vr.find(c,o[1].location),p=jc(Dc(f.content)),m,x=0;x<p.length;++x){var v=p[x];v.id==1&&(m=v)}var b=to(Ln(m.messages[0].data)[1][0].data);for(f=vr.find(c,o[b].location),p=jc(Dc(f.content)),x=0;x<p.length;++x)v=p[x],v.id==b&&(m=v);for(b=to(Ln(m.messages[0].data)[2][0].data),f=vr.find(c,o[b].location),p=jc(Dc(f.content)),x=0;x<p.length;++x)v=p[x],v.id==b&&(m=v);for(b=to(Ln(m.messages[0].data)[2][0].data),f=vr.find(c,o[b].location),p=jc(Dc(f.content)),x=0;x<p.length;++x)v=p[x],v.id==b&&(m=v);var w=Ln(m.messages[0].data);{w[6][0].data=Qn(n.e.r+1),w[7][0].data=Qn(n.e.c+1);var k=to(w[46][0].data),E=vr.find(c,o[k].location),N=jc(Dc(E.content));{for(var P=0;P<N.length&&N[P].id!=k;++P);if(N[P].id!=k)throw"Bad ColumnRowUIDMapArchive";var R=Ln(N[P].messages[0].data);R[1]=[],R[2]=[],R[3]=[];for(var O=0;O<=n.e.c;++O){var D=[];D[1]=D[2]=[{type:0,data:Qn(O+420690)}],R[1].push({type:2,data:_s(D)}),R[2].push({type:0,data:Qn(O)}),R[3].push({type:0,data:Qn(O)})}R[4]=[],R[5]=[],R[6]=[];for(var L=0;L<=n.e.r;++L)D=[],D[1]=D[2]=[{type:0,data:Qn(L+726270)}],R[4].push({type:2,data:_s(D)}),R[5].push({type:0,data:Qn(L)}),R[6].push({type:0,data:Qn(L)});N[P].messages[0].data=_s(R)}E.content=F1(M1(N)),E.size=E.content.length,delete w[46];var B=Ln(w[4][0].data);{B[7][0].data=Qn(n.e.r+1);var z=Ln(B[1][0].data),H=to(z[2][0].data);E=vr.find(c,o[H].location),N=jc(Dc(E.content));{if(N[0].id!=H)throw"Bad HeaderStorageBucket";var te=Ln(N[0].messages[0].data);for(L=0;L<a.length;++L){var Y=Ln(te[2][0].data);Y[1][0].data=Qn(L),Y[4][0].data=Qn(a[L].length),te[2][L]={type:te[2][0].type,data:_s(Y)}}N[0].messages[0].data=_s(te)}E.content=F1(M1(N)),E.size=E.content.length;var W=to(B[2][0].data);E=vr.find(c,o[W].location),N=jc(Dc(E.content));{if(N[0].id!=W)throw"Bad HeaderStorageBucket";for(te=Ln(N[0].messages[0].data),O=0;O<=n.e.c;++O)Y=Ln(te[2][0].data),Y[1][0].data=Qn(O),Y[4][0].data=Qn(n.e.r+1),te[2][O]={type:te[2][0].type,data:_s(Y)};N[0].messages[0].data=_s(te)}E.content=F1(M1(N)),E.size=E.content.length;var Z=to(B[4][0].data);(function(){for(var ce=vr.find(c,o[Z].location),V=jc(Dc(ce.content)),G,ie=0;ie<V.length;++ie){var Ee=V[ie];Ee.id==Z&&(G=Ee)}var ne=Ln(G.messages[0].data);{ne[3]=[];var ae=[];s.forEach(function(q,Ne){ae[1]=[{type:0,data:Qn(Ne)}],ae[2]=[{type:0,data:Qn(1)}],ae[3]=[{type:2,data:$kt(q)}],ne[3].push({type:2,data:_s(ae)})})}G.messages[0].data=_s(ne);var me=M1(V),ve=F1(me);ce.content=ve,ce.size=ce.content.length})();var re=Ln(B[3][0].data);{var X=re[1][0];delete re[2];var Q=Ln(X.data);{var fe=to(Q[2][0].data);(function(){for(var ce=vr.find(c,o[fe].location),V=jc(Dc(ce.content)),G,ie=0;ie<V.length;++ie){var Ee=V[ie];Ee.id==fe&&(G=Ee)}var ne=Ln(G.messages[0].data);{delete ne[6],delete re[7];var ae=new Uint8Array(ne[5][0].data);ne[5]=[];for(var me=0,ve=0;ve<=n.e.r;++ve){var q=Ln(ae);me+=t_t(q,a[ve],s),q[1][0].data=Qn(ve),ne[5].push({data:_s(q),type:2})}ne[1]=[{type:0,data:Qn(n.e.c+1)}],ne[2]=[{type:0,data:Qn(n.e.r+1)}],ne[3]=[{type:0,data:Qn(me)}],ne[4]=[{type:0,data:Qn(n.e.r+1)}]}G.messages[0].data=_s(ne);var Ne=M1(V),Pe=F1(Ne);ce.content=Pe,ce.size=ce.content.length})()}X.data=_s(Q)}B[3][0].data=_s(re)}w[4][0].data=_s(B)}m.messages[0].data=_s(w);var ye=M1(p),J=F1(ye);return f.content=J,f.size=f.content.length,c}function Cve(e){return function(r){for(var n=0;n!=e.length;++n){var i=e[n];r[i[0]]===void 0&&(r[i[0]]=i[1]),i[2]==="n"&&(r[i[0]]=Number(r[i[0]]))}}}function $$(e){Cve([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function z$(e){Cve([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function n_t(e){return yn.WS.indexOf(e)>-1?"sheet":e==yn.CS?"chart":e==yn.DS?"dialog":e==yn.MS?"macro":e&&e.length?e:"sheet"}function i_t(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,n_t(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function a_t(e,t,r,n,i,a,s,o,l,c,d,f){try{a[n]=M2(Ql(e,r,!0),t);var p=Ca(e,t),m;switch(o){case"sheet":m=NCt(p,t,i,l,a[n],c,d,f);break;case"chart":if(m=ACt(p,t,i,l,a[n],c,d,f),!m||!m["!drawel"])break;var x=e2(m["!drawel"].Target,t),v=QS(x),b=pwt(Ql(e,x,!0),M2(Ql(e,v,!0),x)),w=e2(b,x),k=QS(w);m=tCt(Ql(e,w,!0),w,l,M2(Ql(e,k,!0),w),c,m);break;case"macro":m=TCt(p,t,i,l,a[n],c,d,f);break;case"dialog":m=ICt(p,t,i,l,a[n],c,d,f);break;default:throw new Error("Unrecognized sheet type "+o)}s[n]=m;var E=[];a&&a[n]&&aa(a[n]).forEach(function(N){var P="";if(a[n][N].Type==yn.CMNT){P=e2(a[n][N].Target,t);var R=jCt(Ca(e,P,!0),P,l);if(!R||!R.length)return;Nee(m,R,!1)}a[n][N].Type==yn.TCMNT&&(P=e2(a[n][N].Target,t),E=E.concat(gwt(Ca(e,P,!0),l)))}),E&&E.length&&Nee(m,E,!0,l.people||[])}catch(N){if(l.WTF)throw N}}function Ic(e){return e.charAt(0)=="/"?e.slice(1):e}function s_t(e,t){if(Eb(),t=t||{},$$(t),Lc(e,"META-INF/manifest.xml")||Lc(e,"objectdata.xml"))return Lee(e,t);if(Lc(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof yM<"u"){if(e.FileIndex)return yM(e);var r=vr.utils.cfb_new();return KZ(e).forEach(function(Y){sn(r,Y,xxt(e,Y))}),yM(r)}throw new Error("Unsupported NUMBERS file")}if(!Lc(e,"[Content_Types].xml"))throw Lc(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Lc(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=KZ(e),i=u1t(Ql(e,"[Content_Types].xml")),a=!1,s,o;if(i.workbooks.length===0&&(o="xl/workbook.xml",Ca(e,o,!0)&&i.workbooks.push(o)),i.workbooks.length===0){if(o="xl/workbook.bin",!Ca(e,o,!0))throw new Error("Could not find workbook");i.workbooks.push(o),a=!0}i.workbooks[0].slice(-3)=="bin"&&(a=!0);var l={},c={};if(!t.bookSheets&&!t.bookProps){if(F2=[],i.sst)try{F2=RCt(Ca(e,Ic(i.sst)),i.sst,t)}catch(Y){if(t.WTF)throw Y}t.cellStyles&&i.themes.length&&(l=PCt(Ql(e,i.themes[0].replace(/^\//,""),!0)||"",i.themes[0],t)),i.style&&(c=OCt(Ca(e,Ic(i.style)),i.style,l,t))}i.links.map(function(Y){try{var W=M2(Ql(e,QS(Ic(Y))),Y);return MCt(Ca(e,Ic(Y)),W,Y,t)}catch{}});var d=_Ct(Ca(e,Ic(i.workbooks[0])),i.workbooks[0],t),f={},p="";i.coreprops.length&&(p=Ca(e,Ic(i.coreprops[0]),!0),p&&(f=f1e(p)),i.extprops.length!==0&&(p=Ca(e,Ic(i.extprops[0]),!0),p&&x1t(p,f,t)));var m={};(!t.bookSheets||t.bookProps)&&i.custprops.length!==0&&(p=Ql(e,Ic(i.custprops[0]),!0),p&&(m=y1t(p,t)));var x={};if((t.bookSheets||t.bookProps)&&(d.Sheets?s=d.Sheets.map(function(W){return W.name}):f.Worksheets&&f.SheetNames.length>0&&(s=f.SheetNames),t.bookProps&&(x.Props=f,x.Custprops=m),t.bookSheets&&typeof s<"u"&&(x.SheetNames=s),t.bookSheets?x.SheetNames:t.bookProps))return x;s={};var v={};t.bookDeps&&i.calcchain&&(v=DCt(Ca(e,Ic(i.calcchain)),i.calcchain));var b=0,w={},k,E;{var N=d.Sheets;f.Worksheets=N.length,f.SheetNames=[];for(var P=0;P!=N.length;++P)f.SheetNames[P]=N[P].name}var R=a?"bin":"xml",O=i.workbooks[0].lastIndexOf("/"),D=(i.workbooks[0].slice(0,O+1)+"_rels/"+i.workbooks[0].slice(O+1)+".rels").replace(/^\//,"");Lc(e,D)||(D="xl/_rels/workbook."+R+".rels");var L=M2(Ql(e,D,!0),D.replace(/_rels.*/,"s5s"));(i.metadata||[]).length>=1&&(t.xlmeta=FCt(Ca(e,Ic(i.metadata[0])),i.metadata[0],t)),(i.people||[]).length>=1&&(t.people=vwt(Ca(e,Ic(i.people[0])),t)),L&&(L=i_t(L,d.Sheets));var B=Ca(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=f.Worksheets;++b){var z="sheet";if(L&&L[b]?(k="xl/"+L[b][1].replace(/[\/]?xl\//,""),Lc(e,k)||(k=L[b][1]),Lc(e,k)||(k=D.replace(/_rels\/.*$/,"")+L[b][1]),z=L[b][2]):(k="xl/worksheets/sheet"+(b+1-B)+"."+R,k=k.replace(/sheet0\./,"sheet.")),E=k.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(b!=t.sheets)continue e;break;case"string":if(f.SheetNames[b].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var H=!1,te=0;te!=t.sheets.length;++te)typeof t.sheets[te]=="number"&&t.sheets[te]==b&&(H=1),typeof t.sheets[te]=="string"&&t.sheets[te].toLowerCase()==f.SheetNames[b].toLowerCase()&&(H=1);if(!H)continue e}}a_t(e,k,E,f.SheetNames[b],b,w,s,z,t,d,l,c)}return x={Directory:i,Workbook:d,Props:f,Custprops:m,Deps:v,Sheets:s,SheetNames:f.SheetNames,Strings:F2,Styles:c,Themes:l,SSF:_i(Pr)},t&&t.bookFiles&&(e.files?(x.keys=n,x.files=e.files):(x.keys=[],x.files={},e.FullPaths.forEach(function(Y,W){Y=Y.replace(/^Root Entry[\/]/,""),x.keys.push(Y),x.files[Y]=e.FileIndex[W]}))),t&&t.bookVBA&&(i.vba.length>0?x.vbaraw=Ca(e,Ic(i.vba[0]),!0):i.defaults&&i.defaults.bin===_wt&&(x.vbaraw=Ca(e,"xl/vbaProject.bin",!0))),x}function o_t(e,t){var r=t||{},n="Workbook",i=vr.find(e,n);try{if(n="/!DataSpaces/Version",i=vr.find(e,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(Fyt(i.content),n="/!DataSpaces/DataSpaceMap",i=vr.find(e,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=Byt(i.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",i=vr.find(e,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=Uyt(i.content);if(s.length!=1||s[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",i=vr.find(e,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);zyt(i.content)}catch{}if(n="/EncryptionInfo",i=vr.find(e,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=Hyt(i.content);if(n="/EncryptedPackage",i=vr.find(e,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],i.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],i.content,r.password||"",r);throw new Error("File is password-protected")}function l_t(e,t){return t.bookType=="ods"?Eve(e,t):t.bookType=="numbers"?r_t(e,t):t.bookType=="xlsb"?c_t(e,t):u_t(e,t)}function c_t(e,t){uv=1024,e&&!e.SSF&&(e.SSF=_i(Pr)),e&&e.SSF&&(Eb(),mP(e.SSF),t.revssf=xP(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,L2?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=Q1e.indexOf(t.bookType)>-1,i=N$();z$(t=t||{});var a=h$(),s="",o=0;if(t.cellXfs=[],am(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),s="docProps/core.xml",sn(a,s,h1e(e.Props,t)),i.coreprops.push(s),Zn(t.rels,2,s,yn.CORE_PROPS),s="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],c=0;c<e.SheetNames.length;++c)(e.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}for(e.Props.Worksheets=e.Props.SheetNames.length,sn(a,s,g1e(e.Props)),i.extprops.push(s),Zn(t.rels,3,s,yn.EXT_PROPS),e.Custprops!==e.Props&&aa(e.Custprops||{}).length>0&&(s="docProps/custom.xml",sn(a,s,x1e(e.Custprops)),i.custprops.push(s),Zn(t.rels,4,s,yn.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],p=(f||{})["!type"]||"sheet";switch(p){case"chart":default:s="xl/worksheets/sheet"+o+"."+r,sn(a,s,BCt(o-1,s,t,e,d)),i.sheets.push(s),Zn(t.wbrels,-1,"worksheets/sheet"+o+"."+r,yn.WS[0])}if(f){var m=f["!comments"],x=!1,v="";m&&m.length>0&&(v="xl/comments"+o+"."+r,sn(a,v,zCt(m,v)),i.comments.push(v),Zn(d,-1,"../comments"+o+"."+r,yn.CMNT),x=!0),f["!legacy"]&&x&&sn(a,"xl/drawings/vmlDrawing"+o+".vml",X1e(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&sn(a,QS(s),Av(d))}return t.Strings!=null&&t.Strings.length>0&&(s="xl/sharedStrings."+r,sn(a,s,$Ct(t.Strings,s,t)),i.strs.push(s),Zn(t.wbrels,-1,"sharedStrings."+r,yn.SST)),s="xl/workbook."+r,sn(a,s,LCt(e,s)),i.workbooks.push(s),Zn(t.rels,1,s,yn.WB),s="xl/theme/theme1.xml",sn(a,s,R$(e.Themes,t)),i.themes.push(s),Zn(t.wbrels,-1,"theme/theme1.xml",yn.THEME),s="xl/styles."+r,sn(a,s,UCt(e,s,t)),i.styles.push(s),Zn(t.wbrels,-1,"styles."+r,yn.STY),e.vbaraw&&n&&(s="xl/vbaProject.bin",sn(a,s,e.vbaraw),i.vba.push(s),Zn(t.wbrels,-1,"vbaProject.bin",yn.VBA)),s="xl/metadata."+r,sn(a,s,HCt(s)),i.metadata.push(s),Zn(t.wbrels,-1,"metadata."+r,yn.XLMETA),sn(a,"[Content_Types].xml",u1e(i,t)),sn(a,"_rels/.rels",Av(t.rels)),sn(a,"xl/_rels/workbook."+r+".rels",Av(t.wbrels)),delete t.revssf,delete t.ssf,a}function u_t(e,t){uv=1024,e&&!e.SSF&&(e.SSF=_i(Pr)),e&&e.SSF&&(Eb(),mP(e.SSF),t.revssf=xP(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,L2?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=Q1e.indexOf(t.bookType)>-1,i=N$();z$(t=t||{});var a=h$(),s="",o=0;if(t.cellXfs=[],am(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),s="docProps/core.xml",sn(a,s,h1e(e.Props,t)),i.coreprops.push(s),Zn(t.rels,2,s,yn.CORE_PROPS),s="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],c=0;c<e.SheetNames.length;++c)(e.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}e.Props.Worksheets=e.Props.SheetNames.length,sn(a,s,g1e(e.Props)),i.extprops.push(s),Zn(t.rels,3,s,yn.EXT_PROPS),e.Custprops!==e.Props&&aa(e.Custprops||{}).length>0&&(s="docProps/custom.xml",sn(a,s,x1e(e.Custprops)),i.custprops.push(s),Zn(t.rels,4,s,yn.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},p=e.Sheets[e.SheetNames[o-1]],m=(p||{})["!type"]||"sheet";switch(m){case"chart":default:s="xl/worksheets/sheet"+o+"."+r,sn(a,s,lve(o-1,t,e,f)),i.sheets.push(s),Zn(t.wbrels,-1,"worksheets/sheet"+o+"."+r,yn.WS[0])}if(p){var x=p["!comments"],v=!1,b="";if(x&&x.length>0){var w=!1;x.forEach(function(k){k[1].forEach(function(E){E.T==!0&&(w=!0)})}),w&&(b="xl/threadedComments/threadedComment"+o+"."+r,sn(a,b,xwt(x,d,t)),i.threadedcomments.push(b),Zn(f,-1,"../threadedComments/threadedComment"+o+"."+r,yn.TCMNT)),b="xl/comments"+o+"."+r,sn(a,b,Y1e(x)),i.comments.push(b),Zn(f,-1,"../comments"+o+"."+r,yn.CMNT),v=!0}p["!legacy"]&&v&&sn(a,"xl/drawings/vmlDrawing"+o+".vml",X1e(o,p["!comments"])),delete p["!comments"],delete p["!legacy"]}f["!id"].rId1&&sn(a,QS(s),Av(f))}return t.Strings!=null&&t.Strings.length>0&&(s="xl/sharedStrings."+r,sn(a,s,F1e(t.Strings,t)),i.strs.push(s),Zn(t.wbrels,-1,"sharedStrings."+r,yn.SST)),s="xl/workbook."+r,sn(a,s,hve(e)),i.workbooks.push(s),Zn(t.rels,1,s,yn.WB),s="xl/theme/theme1.xml",sn(a,s,R$(e.Themes,t)),i.themes.push(s),Zn(t.wbrels,-1,"theme/theme1.xml",yn.THEME),s="xl/styles."+r,sn(a,s,V1e(e,t)),i.styles.push(s),Zn(t.wbrels,-1,"styles."+r,yn.STY),e.vbaraw&&n&&(s="xl/vbaProject.bin",sn(a,s,e.vbaraw),i.vba.push(s),Zn(t.wbrels,-1,"vbaProject.bin",yn.VBA)),s="xl/metadata."+r,sn(a,s,K1e()),i.metadata.push(s),Zn(t.wbrels,-1,"metadata."+r,yn.XLMETA),d.length>1&&(s="xl/persons/person.xml",sn(a,s,ywt(d)),i.people.push(s),Zn(t.wbrels,-1,"persons/person.xml",yn.PEOPLE)),sn(a,"[Content_Types].xml",u1e(i,t)),sn(a,"_rels/.rels",Av(t.rels)),sn(a,"xl/_rels/workbook."+r+".rels",Av(t.wbrels)),delete t.revssf,delete t.ssf,a}function H$(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=dc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function d_t(e,t){return vr.find(e,"EncryptedPackage")?o_t(e,t):xve(e,t)}function f_t(e,t){var r,n=e,i=t||{};return i.type||(i.type=pn&&Buffer.isBuffer(e)?"buffer":"base64"),r=Bxe(n,i),s_t(r,i)}function kve(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return v5(e.slice(r),t);default:break e}return Dy.to_workbook(e,t)}function h_t(e,t){var r="",n=H$(e,t);switch(t.type){case"base64":r=dc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=px(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=si(r)),t.type="binary",kve(r,t)}function p_t(e,t){var r=e;return t.type=="base64"&&(r=dc(r)),r=VS.utils.decode(1200,r.slice(2),"str"),t.type="binary",kve(r,t)}function m_t(e){return e.match(/[^\x00-\x7F]/)?Kd(e):e}function bM(e,t,r,n){return n?(r.type="string",Dy.to_workbook(e,r)):Dy.to_workbook(t,r)}function w5(e,t){l$();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return w5(new Uint8Array(e),(r=_i(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,i=[0,0,0,0],a=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Iv={},r.dateNF&&(Iv.dateNF=r.dateNF),r.type||(r.type=pn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=pn?"buffer":"binary",n=cxt(e),typeof Uint8Array<"u"&&!pn&&(r.type="array")),r.type=="string"&&(a=!0,r.type="binary",r.codepage=65001,n=m_t(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var s=new ArrayBuffer(3),o=new Uint8Array(s);if(o.foo="bar",!o.foo)return r=_i(r),r.type="array",w5(c$(n),r)}switch((i=H$(n,r))[0]){case 208:if(i[1]===207&&i[2]===17&&i[3]===224&&i[4]===161&&i[5]===177&&i[6]===26&&i[7]===225)return d_t(vr.read(n,r),r);break;case 9:if(i[1]<=8)return xve(n,r);break;case 60:return v5(n,r);case 73:if(i[1]===73&&i[2]===42&&i[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(i[1]===68)return byt(n,r);break;case 84:if(i[1]===65&&i[2]===66&&i[3]===76)return D1e.to_workbook(n,r);break;case 80:return i[1]===75&&i[2]<9&&i[3]<9?f_t(n,r):bM(e,n,r,a);case 239:return i[3]===60?v5(n,r):bM(e,n,r,a);case 255:if(i[1]===254)return p_t(n,r);if(i[1]===0&&i[2]===2&&i[3]===0)return Mg.to_workbook(n,r);break;case 0:if(i[1]===0&&(i[2]>=2&&i[3]===0||i[2]===0&&(i[3]===8||i[3]===9)))return Mg.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return x5.to_workbook(n,r);case 123:if(i[1]===92&&i[2]===114&&i[3]===116)return z1e.to_workbook(n,r);break;case 10:case 13:case 32:return h_t(n,r);case 137:if(i[1]===80&&i[2]===78&&i[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return yyt.indexOf(i[0])>-1&&i[2]<=12&&i[3]<=31?x5.to_workbook(n,r):bM(e,n,r,a)}function _ve(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return DC(t.file,vr.write(e,{type:pn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return vr.write(e,t)}function g_t(e,t){var r=_i(t||{}),n=l_t(e,r);return x_t(n,r)}function x_t(e,t){var r={},n=pn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var i=e.FullPaths?vr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof i=="string"){if(t.type=="binary"||t.type=="base64")return i;i=new Uint8Array(pP(i))}return t.password&&typeof encrypt_agile<"u"?_ve(encrypt_agile(i,t.password),t):t.type==="file"?DC(t.file,i):t.type=="string"?si(i):i}function v_t(e,t){var r=t||{},n=mkt(e,r);return _ve(n,r)}function Nd(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return qS(Kd(n));case"binary":return Kd(n);case"string":return e;case"file":return DC(t.file,n,"utf8");case"buffer":return pn?ap(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Nd(n,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function y_t(e,t){switch(t.type){case"base64":return qS(e);case"binary":return e;case"string":return e;case"file":return DC(t.file,e,"binary");case"buffer":return pn?ap(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function xN(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?qS(r):t.type=="string"?si(r):r;case"file":return DC(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function Nve(e,t){l$(),dCt(e);var r=_i(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=Nve(e,r);return r.type="array",pP(n)}var i=0;if(r.sheet&&(typeof r.sheet=="number"?i=r.sheet:i=e.SheetNames.indexOf(r.sheet),!e.SheetNames[i]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Nd(lkt(e,r),r);case"slk":case"sylk":return Nd(j1e.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"htm":case"html":return Nd(yve(e.Sheets[e.SheetNames[i]],r),r);case"txt":return y_t(Ave(e.Sheets[e.SheetNames[i]],r),r);case"csv":return Nd(W$(e.Sheets[e.SheetNames[i]],r),r,"\uFEFF");case"dif":return Nd(D1e.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"dbf":return xN(x5.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"prn":return Nd(Dy.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"rtf":return Nd(z1e.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"eth":return Nd(M1e.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"fods":return Nd(Eve(e,r),r);case"wk1":return xN(Mg.sheet_to_wk1(e.Sheets[e.SheetNames[i]],r),r);case"wk3":return xN(Mg.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),xN(vve(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),v_t(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return g_t(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function b_t(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function w_t(e,t,r){var n={};return n.type="file",n.file=t,b_t(n),Nve(e,n)}function S_t(e,t,r,n,i,a,s,o){var l=ga(r),c=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,p=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:r,enumerable:!1})}catch{p.__rowNum__=r}else p.__rowNum__=r;if(!s||e[r])for(var m=t.s.c;m<=t.e.c;++m){var x=s?e[r][m]:e[n[m]+l];if(x===void 0||x.t===void 0){if(c===void 0)continue;a[m]!=null&&(p[a[m]]=c);continue}var v=x.v;switch(x.t){case"z":if(v==null)break;continue;case"e":v=v==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(a[m]!=null){if(v==null)if(x.t=="e"&&v===null)p[a[m]]=null;else if(c!==void 0)p[a[m]]=c;else if(d&&v===null)p[a[m]]=null;else continue;else p[a[m]]=d&&(x.t!=="n"||x.t==="n"&&o.rawNumbers!==!1)?v:qh(x,v,o);v!=null&&(f=!1)}}return{row:p,isempty:f}}function pO(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,i=1,a=[],s=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},d=c.range!=null?c.range:e["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof d){case"string":l=Rn(d);break;case"number":l=Rn(e["!ref"]),l.s.r=d;break;default:l=d}n>0&&(i=0);var f=ga(l.s.r),p=[],m=[],x=0,v=0,b=Array.isArray(e),w=l.s.r,k=0,E={};b&&!e[w]&&(e[w]=[]);var N=c.skipHidden&&e["!cols"]||[],P=c.skipHidden&&e["!rows"]||[];for(k=l.s.c;k<=l.e.c;++k)if(!(N[k]||{}).hidden)switch(p[k]=Ui(k),r=b?e[w][k]:e[p[k]+f],n){case 1:a[k]=k-l.s.c;break;case 2:a[k]=p[k];break;case 3:a[k]=c.header[k-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=s=qh(r,null,c),v=E[s]||0,!v)E[s]=1;else{do o=s+"_"+v++;while(E[o]);E[s]=v,E[o]=1}a[k]=o}for(w=l.s.r+i;w<=l.e.r;++w)if(!(P[w]||{}).hidden){var R=S_t(e,l,w,p,n,a,b,c);(R.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(m[x++]=R.row)}return m.length=x,m}var Hee=/"/g;function E_t(e,t,r,n,i,a,s,o){for(var l=!0,c=[],d="",f=ga(r),p=t.s.c;p<=t.e.c;++p)if(n[p]){var m=o.dense?(e[r]||[])[p]:e[n[p]+f];if(m==null)d="";else if(m.v!=null){l=!1,d=""+(o.rawNumbers&&m.t=="n"?m.v:qh(m,null,o));for(var x=0,v=0;x!==d.length;++x)if((v=d.charCodeAt(x))===i||v===a||v===34||o.forceQuotes){d='"'+d.replace(Hee,'""')+'"';break}d=="ID"&&(d='"ID"')}else m.f!=null&&!m.F?(l=!1,d="="+m.f,d.indexOf(",")>=0&&(d='"'+d.replace(Hee,'""')+'"')):d="";c.push(d)}return o.blankrows===!1&&l?null:c.join(s)}function W$(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var i=Rn(e["!ref"]),a=n.FS!==void 0?n.FS:",",s=a.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),c=new RegExp((a=="|"?"\\|":a)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var p=n.skipHidden&&e["!cols"]||[],m=n.skipHidden&&e["!rows"]||[],x=i.s.c;x<=i.e.c;++x)(p[x]||{}).hidden||(f[x]=Ui(x));for(var v=0,b=i.s.r;b<=i.e.r;++b)(m[b]||{}).hidden||(d=E_t(e,i,b,f,s,l,a,n),d!=null&&(n.strip&&(d=d.replace(c,"")),(d||n.blankrows!==!1)&&r.push((v++?o:"")+d)));return delete n.dense,r.join("")}function Ave(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=W$(e,t);return r}function C_t(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var i=Rn(e["!ref"]),a="",s=[],o,l=[],c=Array.isArray(e);for(o=i.s.c;o<=i.e.c;++o)s[o]=Ui(o);for(var d=i.s.r;d<=i.e.r;++d)for(a=ga(d),o=i.s.c;o<=i.e.c;++o)if(t=s[o]+a,r=c?(e[d]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=t+"="+n}return l}function Tve(e,t,r){var n=r||{},i=+!n.skipHeader,a=e||{},s=0,o=0;if(a&&n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var l=typeof n.origin=="string"?$i(n.origin):n.origin;s=l.r,o=l.c}var c,d={s:{c:0,r:0},e:{c:o,r:s+t.length-1+i}};if(a["!ref"]){var f=Rn(a["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),s==-1&&(s=f.e.r+1,d.e.r=s+t.length-1+i)}else s==-1&&(s=0,d.e.r=t.length-1+i);var p=n.header||[],m=0;t.forEach(function(v,b){aa(v).forEach(function(w){(m=p.indexOf(w))==-1&&(p[m=p.length]=w);var k=v[w],E="z",N="",P=jr({c:o+m,r:s+b+i});c=iE(a,P),k&&typeof k=="object"&&!(k instanceof Date)?a[P]=k:(typeof k=="number"?E="n":typeof k=="boolean"?E="b":typeof k=="string"?E="s":k instanceof Date?(E="d",n.cellDates||(E="n",k=Va(k)),N=n.dateNF||Pr[14]):k===null&&n.nullError&&(E="e",k=0),c?(c.t=E,c.v=k,delete c.w,delete c.R,N&&(c.z=N)):a[P]=c={t:E,v:k},N&&(c.z=N))})}),d.e.c=Math.max(d.e.c,o+p.length-1);var x=ga(s);if(i)for(m=0;m<p.length;++m)a[Ui(m+o)+x]={t:"s",v:p[m]};return a["!ref"]=Jr(d),a}function k_t(e,t){return Tve(null,e,t)}function iE(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=$i(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?iE(e,jr(t)):iE(e,jr({r:t,c:r||0}))}function __t(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function V$(){return{SheetNames:[],Sheets:{}}}function q$(e,t,r,n){var i=1;if(!r)for(;i<=65535&&e.SheetNames.indexOf(r="Sheet"+i)!=-1;++i,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);i=a&&+a[2]||0;var s=a&&a[1]||r;for(++i;i<=65535&&e.SheetNames.indexOf(r=s+i)!=-1;++i);}if(fve(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function N_t(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=__t(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function A_t(e,t){return e.z=t,e}function Ive(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function T_t(e,t,r){return Ive(e,"#"+t,r)}function I_t(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function O_t(e,t,r,n){for(var i=typeof t!="string"?t:Rn(t),a=typeof t=="string"?t:Jr(t),s=i.s.r;s<=i.e.r;++s)for(var o=i.s.c;o<=i.e.c;++o){var l=iE(e,s,o);l.t="n",l.F=a,delete l.v,s==i.s.r&&o==i.s.c&&(l.f=r,n&&(l.D=!0))}return e}var $2={encode_col:Ui,encode_row:ga,encode_cell:jr,encode_range:Jr,decode_col:w$,decode_row:b$,split_cell:$xt,decode_cell:$i,decode_range:Tl,format_cell:qh,sheet_add_aoa:n1e,sheet_add_json:Tve,sheet_add_dom:bve,aoa_to_sheet:Cb,json_to_sheet:k_t,table_to_sheet:wve,table_to_book:Fkt,sheet_to_csv:W$,sheet_to_txt:Ave,sheet_to_json:pO,sheet_to_html:yve,sheet_to_formulae:C_t,sheet_to_row_object_array:pO,sheet_get_cell:iE,book_new:V$,book_append_sheet:q$,book_set_sheet_visibility:N_t,cell_set_number_format:A_t,cell_set_hyperlink:Ive,cell_set_internal_link:T_t,cell_add_comment:I_t,sheet_set_array_formula:O_t,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Ove=e=>new Promise((t,r)=>{const n=new FileReader;n.onload=i=>{var a;try{const s=(a=i.target)==null?void 0:a.result,o=w5(s,{type:"binary"}),l=o.SheetNames[0],c=o.Sheets[l],d=$2.sheet_to_json(c,{header:1});if(d.length===0){r(new Error("File is empty"));return}const f=d[0],p=$2.sheet_to_json(c);t({fileName:e.name,headers:f,rows:p})}catch(s){r(s)}},n.onerror=i=>r(i),n.readAsBinaryString(e)}),Pve=e=>{if(!e)return"";const t=e.trim(),r=/^(\d+(?:\.\d+)?)\s*(?:["']|mm|cm|in)?\s*[xX]\s*(\d+(?:\.\d+)?)\s*(?:["']|mm|cm|in)?$/i,n=t.match(r);return n?`${n[1]}"x${n[2]}"`:t},P_t=Object.freeze(Object.defineProperty({__proto__:null,normalizeSize:Pve,readExcelFile:Ove},Symbol.toStringTag,{value:"Module"})),R_t=({onDataLoaded:e})=>{const[t,r]=I.useState(!1),[n,i]=I.useState(!1),a=async c=>{i(!0);try{const d=await Ove(c),f=[d.headers,...d.rows.map(p=>d.headers.map(m=>p[m]))];if(f.length===0){Re.error("File appears to be empty.");return}e(f,c.name)}catch(d){console.error(d),Re.error(d.message||"Failed to parse file.")}finally{i(!1)}},s=I.useCallback(c=>{c.preventDefault(),c.stopPropagation(),c.type==="dragenter"||c.type==="dragover"?r(!0):c.type==="dragleave"&&r(!1)},[]),o=I.useCallback(c=>{c.preventDefault(),c.stopPropagation(),r(!1),c.dataTransfer.files&&c.dataTransfer.files[0]&&a(c.dataTransfer.files[0])},[]),l=c=>{c.preventDefault(),c.target.files&&c.target.files[0]&&a(c.target.files[0])};return u.jsxs("div",{className:`relative border-2 border-dashed rounded-xl p-12 text-center transition-all ${t?"border-primary bg-primary-container/20 scale-[1.02]":"border-outline/20 bg-surface-container-low hover:bg-surface-container"}`,onDragEnter:s,onDragLeave:s,onDragOver:s,onDrop:o,children:[u.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:l,accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",disabled:n}),u.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 pointer-events-none",children:[u.jsx("div",{className:`p-4 rounded-full shadow-sm transition-colors ${t?"bg-primary-container text-primary":"bg-surface-container-high text-primary/70"}`,children:u.jsx(ob,{className:`w-8 h-8 ${n?"animate-bounce":""}`})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-lg font-bold text-text-primary",children:n?"Reading file...":"Click to upload or drag and drop"}),u.jsx("p",{className:"text-sm text-text-secondary",children:"Excel (.xlsx) or CSV files"})]})]})]})},Wee=[{key:"manufacturer",label:"Manufacturer",required:!1},{key:"productName",label:"Product Name (Line)",required:!0},{key:"variantName",label:"Variant Name (Color)",required:!1},{key:"sku",label:"SKU",required:!1},{key:"size",label:"Size",required:!1},{key:"cartonSize",label:"Carton Size",required:!1},{key:"unitCost",label:"Unit Cost",required:!0},{key:"retailPrice",label:"Retail Price",required:!1}],j_t=e=>typeof e!="string"?e:e.replace(/[\u0000-\u001F\u007F-\u009F]/g,"").trim(),D_t=({rawData:e,fileName:t,onBack:r,onComplete:n,isGeneratingPreview:i,onDefaultsChange:a})=>{var W;const{vendors:s}=Gr(),[o,l]=I.useState({}),[c,d]=I.useState("variant_match"),[f,p]=I.useState([]),[m,x]=I.useState(""),[v,b]=I.useState(""),[w,k]=I.useState(!1),[E,N]=I.useState(""),[P,R]=I.useState(""),O=e.reduce((Z,re)=>Math.max(Z,re.length),0),D=Array.from({length:O},(Z,re)=>re),L=e.find(Z=>Z.length>0)||[];I.useEffect(()=>{cr.get("/api/import/profiles").then(Z=>p(Z.data)).catch(Z=>console.error("Failed to load profiles",Z))},[]);const B=(Z,re)=>{l(X=>({...X,[Z]:re}))},z=Z=>{const re=Z.target.value;N(re);const X=s.find(Q=>Q.id===Number(re));X!=null&&X.defaultProductType&&R(X.defaultProductType)},H=Z=>{const re=Z.target.value;if(x(re),re){const X=f.find(Q=>Q.id===Number(re));if(X){const Q=X.mappingRules;l(Q.mapping||Q),Q.defaults&&(N(Q.defaults.manufacturerId||""),R(Q.defaults.productType||""))}}else l({}),N(""),R("")},te=async(Z=!1)=>{var X;const re=Z?(X=f.find(Q=>Q.id===Number(m)))==null?void 0:X.profileName:v;if(!re)return Re.error("Enter a profile name first.");try{const Q=await cr.post("/api/import/profiles",{profileName:re,mappingRules:{mapping:o,defaults:{manufacturerId:E,productType:P}}});Re.success(Z?"Profile updated!":"Profile saved!"),p(fe=>[...fe.filter(J=>J.id!==Q.data.id),Q.data].sort((J,ce)=>J.profileName.localeCompare(ce.profileName))),Z||(x(String(Q.data.id)),k(!1))}catch(Q){console.error(Q),Re.error("Failed to save profile.")}},Y=()=>{const Z=Wee.filter(Q=>Q.required&&!o[Q.key]);if(Z.length>0){Re.error(`Missing required fields: ${Z.map(Q=>Q.label).join(", ")}`);return}const re={manufacturerId:E?Number(E):null,productType:P||null};a(re);const X=e.map((Q,fe)=>{const ye={originalRowIndex:fe};return Object.entries(o).forEach(([J,ce])=>{if(ce!==""){const V=parseInt(ce);if(V>=Q.length)return;let G=Q[V];if(typeof G=="string"&&(G=j_t(G),G===""&&(G=null)),["unitCost","retailPrice","cartonSize"].includes(J)&&G!==null){typeof G=="string"&&(G=G.replace(/[^0-9.-]+/g,""));const ie=parseFloat(G);G=isNaN(ie)?null:ie}ye[J]=G}}),ye}).filter(Q=>Q.productName);n(X,c)};return u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[u.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gray-50 flex flex-wrap justify-between items-center gap-4",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Map Columns"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Match your Excel columns to Joblogger fields."})]}),u.jsxs("div",{className:"flex items-center gap-2 bg-white p-2 rounded-lg border border-gray-200 shadow-sm",children:[u.jsx("span",{className:"text-sm font-medium text-gray-700 pl-2",children:"Load Profile:"}),u.jsxs("select",{className:"border-none text-sm focus:ring-0 text-indigo-600 font-bold bg-transparent",value:m,onChange:H,children:[u.jsx("option",{value:"",children:"-- None --"}),f.map(Z=>u.jsx("option",{value:Z.id,children:Z.profileName},Z.id))]})]})]}),u.jsxs("div",{className:"p-8 grid grid-cols-1 lg:grid-cols-2 gap-12",children:[u.jsxs("div",{className:"space-y-6",children:[Wee.map(Z=>u.jsxs("div",{className:"flex items-center justify-between group",children:[u.jsxs("label",{className:`text-sm ${Z.required?"font-bold text-gray-900":"text-gray-500"}`,children:[Z.label," ",Z.required&&u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{className:`w-64 text-sm rounded-md shadow-sm border ${o[Z.key]?"border-indigo-300 bg-indigo-50 text-indigo-900":"border-gray-300"}`,value:o[Z.key]||"",onChange:re=>B(Z.key,re.target.value),children:[u.jsx("option",{value:"",children:"(Skip)"}),D.map(re=>u.jsxs("option",{value:String(re),children:["Col ",String.fromCharCode(65+re),L[re]?`: ${String(L[re]).substring(0,20)}`:""]},re))]})]},Z.key)),u.jsxs("div",{className:"pt-6 border-t border-gray-100 mt-6",children:[u.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Import Strategy"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("label",{className:`border p-4 rounded-lg cursor-pointer transition-all ${c==="variant_match"?"border-indigo-500 bg-indigo-50 ring-1 ring-indigo-500":"border-gray-200 hover:border-gray-300"}`,children:[u.jsx("input",{type:"radio",name:"strategy",className:"hidden",checked:c==="variant_match",onChange:()=>d("variant_match")}),u.jsx("div",{className:"font-bold text-sm text-gray-900 mb-1",children:"Variant Match"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Update specific colors/sizes. Best for detailed price lists."})]}),u.jsxs("label",{className:`border p-4 rounded-lg cursor-pointer transition-all ${c==="product_line_match"?"border-indigo-500 bg-indigo-50 ring-1 ring-indigo-500":"border-gray-200 hover:border-gray-300"}`,children:[u.jsx("input",{type:"radio",name:"strategy",className:"hidden",checked:c==="product_line_match",onChange:()=>d("product_line_match")}),u.jsx("div",{className:"font-bold text-sm text-gray-900 mb-1",children:"Line Match"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Update ALL variants of a product to this price. Best for generic price lists."})]})]})]})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-indigo-50 rounded-xl p-6 border border-indigo-100",children:[u.jsx("h3",{className:"font-bold text-indigo-900 mb-2",children:"Global Defaults"}),u.jsxs("p",{className:"text-xs text-indigo-700 mb-4",children:["If the CSV is missing this data, use these values for ",u.jsx("strong",{children:"New Products"}),"."]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-indigo-800 uppercase mb-1",children:"Manufacturer"}),u.jsxs("select",{className:"w-full text-sm rounded border-indigo-200",value:E,onChange:z,children:[u.jsx("option",{value:"",children:"-- None (Use CSV) --"}),s.sort((Z,re)=>Z.name.localeCompare(re.name)).map(Z=>u.jsx("option",{value:Z.id,children:Z.name},Z.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-indigo-800 uppercase mb-1",children:"Product Type"}),u.jsxs("select",{className:"w-full text-sm rounded border-indigo-200",value:P,onChange:Z=>R(Z.target.value),children:[u.jsx("option",{value:"",children:"-- None --"}),oy.map(Z=>u.jsx("option",{value:Z,children:Z},Z))]})]})]})]}),u.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200 h-fit",children:[u.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Save this Mapping"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"If you receive this file format regularly, save it as a profile to auto-fill these fields next time."}),m&&!w&&u.jsxs("button",{onClick:()=>te(!0),className:"w-full mb-3 text-sm font-bold text-indigo-700 bg-indigo-100 hover:bg-indigo-200 py-2 rounded flex items-center justify-center gap-2 transition-colors",children:[u.jsx(ZE,{size:16}),' Update "',(W=f.find(Z=>Z.id===Number(m)))==null?void 0:W.profileName,'"']}),w?u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",placeholder:"Profile Name",className:"flex-1 text-sm rounded border-gray-300",value:v,onChange:Z=>b(Z.target.value)}),u.jsx("button",{onClick:()=>te(!1),className:"bg-indigo-600 text-white px-3 rounded text-xs font-bold",children:"Save"}),u.jsx("button",{onClick:()=>k(!1),className:"text-gray-500 px-2",children:u.jsx(Zr,{size:16})})]}):u.jsxs("button",{onClick:()=>k(!0),className:"text-sm font-medium text-indigo-600 hover:text-indigo-800 flex items-center gap-2",children:[u.jsx(vs,{size:16})," Save as New Profile"]}),u.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[u.jsx("h4",{className:"font-bold text-xs text-gray-400 uppercase tracking-wide mb-2",children:"Sample Data (First Data Row)"}),u.jsx("div",{className:"space-y-2 text-xs font-mono text-gray-600",children:D.slice(0,8).map(Z=>u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("span",{className:"font-bold text-gray-400 w-8",children:["Col ",String.fromCharCode(65+Z)]}),u.jsx("span",{className:"truncate",children:L[Z]||u.jsx("i",{className:"text-gray-300",children:"(empty)"})})]},Z))})]})]})]})]}),u.jsxs("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex justify-between",children:[u.jsxs("button",{onClick:r,className:"text-gray-600 hover:text-gray-900 font-medium flex items-center gap-2",children:[u.jsx(id,{size:16})," Back"]}),u.jsx("button",{onClick:Y,disabled:i,className:"bg-indigo-600 text-white px-6 py-2 rounded-lg shadow-sm hover:bg-indigo-700 font-bold flex items-center gap-2 disabled:bg-indigo-400 disabled:cursor-not-allowed",children:i?u.jsx(u.Fragment,{children:"Processing..."}):u.jsxs(u.Fragment,{children:["Preview Updates ",u.jsx(K0,{size:16})]})})]})]})},Dw=e=>!e&&e!==0?"-":`$${Number(e).toFixed(2)}`,M_t=({results:e,onExecute:t,isExecuting:r,onBack:n})=>{const[i,a]=I.useState([]);I.useEffect(()=>{const x=e.map(v=>({...v,isSkipped:v.status==="error",hasSample:!1}));x.sort((v,b)=>{const w=k=>k==="error"?0:k==="new"?1:k==="update"?2:3;return w(v.status)-w(b.status)}),a(x)},[e]);const s=x=>{a(v=>{const b=[...v];return b[x].isSkipped=!b[x].isSkipped,b})},o=x=>{a(v=>{const b=[...v];return b[x].hasSample=!b[x].hasSample,b})},l=(x,v)=>{a(b=>{const w=[...b];return w[x].productName=v,w})},c=x=>{a(v=>{let b=[...v];if(x==="all")b=b.map(w=>({...w,hasSample:!0}));else if(x==="none")b=b.map(w=>({...w,hasSample:!1}));else if(x==="line_board"){const w=new Set(b.map(P=>P.productName)),k=new Set(b.filter(P=>P.isMaster).map(P=>P.productName));b=[...[...w].filter(P=>!k.has(P)).map(P=>({productName:P,variantName:"Master Sample",sku:"",unitCost:0,retailPrice:0,status:"new",isSkipped:!1,hasSample:!0,isMaster:!0,message:"Generated Line Board",details:{matchType:"generated"}})),...b]}return b})},d=i.filter(x=>!x.isSkipped),f={updates:d.filter(x=>x.status==="update").length,matches:d.filter(x=>x.status==="match").length,new:d.filter(x=>x.status==="new").length,samples:d.filter(x=>x.hasSample).length,errors:i.filter(x=>x.status==="error").length},p=I.useRef(null),m=qce({count:i.length,getScrollElement:()=>p.current,estimateSize:()=>60,overscan:10});return u.jsxs("div",{className:"bg-surface-container-high rounded-xl shadow-sm border border-outline/20 overflow-hidden flex flex-col h-[600px]",children:[u.jsxs("div",{className:"p-6 border-b border-outline/10 bg-surface-container-low flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Review Changes"}),u.jsx("p",{className:"text-sm text-text-secondary",children:"Review prices and select which items to add to inventory."})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-success-container text-success rounded-full text-xs font-bold uppercase",children:[u.jsx(jh,{size:14})," ",f.updates," Updates"]}),u.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-surface-container-highest text-text-secondary rounded-full text-xs font-bold uppercase border border-outline/20",children:[u.jsx(jh,{size:14})," ",f.matches," Matched (No Change)"]}),u.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-primary-container text-primary rounded-full text-xs font-bold uppercase",children:[u.jsx(su,{size:14})," ",f.new," New"]}),u.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-tertiary-container text-tertiary rounded-full text-xs font-bold uppercase",children:[u.jsx(uoe,{size:14})," ",f.samples," Samples"]})]})]}),u.jsx("div",{ref:p,className:"flex-1 overflow-auto bg-surface-container relative",children:u.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[u.jsx("thead",{className:"bg-surface-container-low text-text-secondary uppercase text-xs sticky top-0 z-10 border-b border-outline/10 shadow-sm",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-3 font-bold w-24",children:"Action"}),u.jsx("th",{className:"p-3 font-bold",children:"Product Match (Editable)"}),u.jsx("th",{className:"p-3 font-bold",children:"SKU / Details"}),u.jsx("th",{className:"p-3 font-bold",children:"Spec Changes"}),u.jsx("th",{className:"p-3 font-bold w-48 bg-surface-container-highest/50",children:u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("span",{children:"Physical Sample"}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:()=>c("all"),className:"px-1.5 py-0.5 text-[10px] bg-outline/10 hover:bg-outline/20 rounded text-text-primary",children:"All"}),u.jsx("button",{onClick:()=>c("none"),className:"px-1.5 py-0.5 text-[10px] bg-outline/10 hover:bg-outline/20 rounded text-text-primary",children:"None"}),u.jsxs("button",{onClick:()=>c("line_board"),className:"px-1.5 py-0.5 text-[10px] bg-tertiary-container text-tertiary hover:brightness-110 rounded flex items-center gap-1",children:[u.jsx(su,{size:10})," Line Bd"]})]})]})}),u.jsx("th",{className:"p-3 font-bold text-right",children:"Old Cost"}),u.jsx("th",{className:"p-3 font-bold text-right",children:"New Cost"}),u.jsx("th",{className:"p-3 font-bold text-right",children:"Diff"})]})}),u.jsxs("tbody",{className:"divide-y divide-outline/10",children:[m.getVirtualItems().length>0&&u.jsx("tr",{children:u.jsx("td",{style:{height:`${m.getVirtualItems()[0].start}px`},colSpan:8})}),m.getVirtualItems().map(x=>{var w,k,E;const v=i[x.index],b=x.index;return u.jsx(Hr.Fragment,{children:u.jsxs("tr",{"data-index":x.index,ref:m.measureElement,className:`hover:bg-surface-container-highest transition-colors ${v.isSkipped?"opacity-50 grayscale":""} ${v.isMaster?"bg-tertiary-container/10":""}`,children:[u.jsx("td",{className:"p-3",children:u.jsx("button",{onClick:()=>s(b),className:`text-xs font-bold px-2 py-1 rounded-lg border transition-all w-full text-center
                                                ${v.isSkipped?"bg-surface-container-highest text-text-secondary border-outline/20":v.status==="update"?"bg-success-container text-success border-success/30":v.status==="new"?"bg-primary-container text-primary border-primary/30":v.status==="match"?"bg-surface-container text-text-tertiary border-outline/20 opacity-70":"bg-error-container text-error border-error/30 cursor-default"}`,disabled:v.status==="error",children:v.isSkipped?"SKIP":v.status==="match"?"MATCH":v.status.toUpperCase()})}),u.jsxs("td",{className:"p-3",children:[u.jsx("input",{type:"text",className:"font-medium text-text-primary bg-transparent border-b border-transparent hover:border-outline focus:border-primary focus:outline-none w-full transition-colors",value:v.productName,onChange:N=>l(b,N.target.value),disabled:v.isSkipped}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[v.isMaster&&u.jsx("span",{className:"text-[10px] font-bold bg-tertiary text-on-tertiary px-1.5 py-0.5 rounded",children:"MASTER"}),v.variantName&&u.jsx("div",{className:"text-xs text-text-secondary",children:v.variantName})]}),v.status==="error"&&u.jsx("div",{className:"text-xs text-error font-bold mt-1",children:v.message})]}),u.jsx("td",{className:"p-3 text-text-secondary font-mono text-xs",children:v.sku||"-"}),u.jsx("td",{className:"p-3 text-xs",children:((w=v.affectedVariants)==null?void 0:w.length)>0&&((k=v.affectedVariants[0].changes)==null?void 0:k.length)>0?u.jsx("ul",{className:"list-disc pl-4 space-y-0.5",children:v.affectedVariants[0].changes.filter(N=>N!=="Cost").map((N,P)=>u.jsx("li",{className:"text-tertiary font-medium",children:N},P))}):u.jsx("span",{className:"text-text-secondary opacity-30",children:"-"})}),u.jsx("td",{className:"p-3 bg-surface-container-highest/20 text-center",children:u.jsx("button",{onClick:()=>o(b),disabled:v.isSkipped,className:`p-1 rounded transition-colors ${v.hasSample?"text-primary":"text-outline/40 hover:text-outline"}`,children:v.hasSample?u.jsx(A7,{size:20}):u.jsx(moe,{size:20})})}),v.affectedVariants&&v.affectedVariants.length===1?u.jsxs(u.Fragment,{children:[u.jsx("td",{className:"p-3 text-right text-text-secondary",children:Dw(v.affectedVariants[0].oldCost)}),u.jsx("td",{className:"p-3 text-right font-bold text-text-primary",children:Dw(v.unitCost)}),u.jsx("td",{className:"p-3 text-right",children:(()=>{const N=Number(v.unitCost)-Number(v.affectedVariants[0].oldCost);return N>0?u.jsxs("span",{className:"text-error text-xs",children:["+",Dw(N)]}):N<0?u.jsx("span",{className:"text-success text-xs",children:Dw(N)}):u.jsx("span",{className:"text-text-secondary",children:"-"})})()})]}):v.status==="new"?u.jsxs(u.Fragment,{children:[u.jsx("td",{className:"p-3 text-right text-text-secondary",children:"-"}),u.jsx("td",{className:"p-3 text-right font-bold text-primary",children:Dw(v.unitCost)}),u.jsx("td",{className:"p-3 text-right text-primary text-xs",children:"NEW"})]}):u.jsx("td",{colSpan:3,className:"p-3 text-center text-xs text-text-secondary italic",children:((E=v.affectedVariants)==null?void 0:E.length)>1?`Updating ${v.affectedVariants.length} variants`:"-"})]})},x.key)}),m.getVirtualItems().length>0&&u.jsx("tr",{children:u.jsx("td",{style:{height:`${m.getTotalSize()-m.getVirtualItems()[m.getVirtualItems().length-1].end}px`},colSpan:8})})]})]})}),u.jsxs("div",{className:"p-6 border-t border-outline/10 bg-surface-container-low flex justify-between items-center",children:[u.jsx("button",{onClick:n,className:"text-text-secondary hover:text-text-primary font-bold text-sm",disabled:r,children:"Back to Mapping"}),u.jsx("button",{onClick:()=>t(d),disabled:r||f.updates===0&&f.new===0,className:`flex items-center gap-2 px-6 py-3 rounded-full shadow-md font-bold text-on-primary transition-all ${r?"bg-surface-container-highest text-text-secondary cursor-not-allowed":"bg-primary hover:bg-primary-hover active:scale-95"}`,children:r?"Importing...":u.jsxs(u.Fragment,{children:["Import ",u.jsx("span",{className:"bg-white/20 px-1.5 rounded text-sm",children:f.updates+f.new})," Items"]})})]})]})},F_t=({onFileSelect:e})=>{const t=I.useRef(null),r=s=>{s.preventDefault(),s.stopPropagation()},n=s=>{s.preventDefault(),s.stopPropagation(),s.dataTransfer.files&&s.dataTransfer.files[0]&&a(s.dataTransfer.files[0])},i=s=>{s.target.files&&s.target.files[0]&&a(s.target.files[0])},a=s=>{["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(s.type)||s.name.endsWith(".xlsx")||s.name.endsWith(".xls")?e(s):Re.error("Please upload a valid Excel file (.xlsx, .xls)")};return u.jsxs("div",{className:"flex flex-col items-center justify-center w-full max-w-2xl mx-auto mt-8",children:[u.jsxs("div",{className:"w-full p-10 bg-surface-container-high border-2 border-dashed border-outline/20 rounded-2xl hover:border-primary hover:bg-surface-container-highest transition-all cursor-pointer shadow-sm group",onDragOver:r,onDrop:n,onClick:()=>{var s;return(s=t.current)==null?void 0:s.click()},children:[u.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[u.jsx("div",{className:"p-4 bg-primary-container rounded-full group-hover:brightness-110 transition-colors",children:u.jsx(ob,{className:"w-8 h-8 text-primary"})}),u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-xl font-bold text-text-primary",children:"Drop your messy Excel file here"}),u.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"or click to browse (.xlsx, .xls)"})]})]}),u.jsx("input",{ref:t,type:"file",className:"hidden",accept:".xlsx,.xls",onChange:i})]}),u.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4 w-full text-center",children:[u.jsxs("div",{className:"bg-surface-container-high p-4 rounded-xl border border-outline/10",children:[u.jsx("div",{className:"font-bold text-text-primary mb-1",children:"1. Upload"}),u.jsx("p",{className:"text-xs text-text-secondary",children:"Import the raw vendor file"})]}),u.jsxs("div",{className:"bg-surface-container-high p-4 rounded-xl border border-outline/10",children:[u.jsx("div",{className:"font-bold text-text-primary mb-1",children:"2. Scan"}),u.jsx("p",{className:"text-xs text-text-secondary",children:"Auto-detect sizes from descriptions"})]}),u.jsxs("div",{className:"bg-surface-container-high p-4 rounded-xl border border-outline/10",children:[u.jsx("div",{className:"font-bold text-text-primary mb-1",children:"3. Clean"}),u.jsx("p",{className:"text-xs text-text-secondary",children:"Review, standardize, and import"})]})]})]})},Vee=({data:e,onConfirm:t,onBack:r,isBrainLoading:n})=>{const[i,a]=Hr.useState(null),s=e.rows.slice(0,5);return u.jsxs("div",{className:"w-full max-w-5xl mx-auto bg-surface-container-high rounded-xl shadow-sm border border-outline/20 overflow-hidden flex flex-col h-[600px]",children:[u.jsxs("div",{className:"p-6 border-b border-outline/10 bg-surface-container-low flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Select Description Column"}),u.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Which column contains the product name and size info?"})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-bold text-text-secondary hover:text-text-primary transition-colors",children:"Back"}),u.jsx("button",{disabled:!i||n,onClick:()=>i&&t(i),className:`flex items-center gap-2 px-6 py-2 rounded-full text-sm font-bold transition-all ${i&&!n?"bg-primary text-on-primary hover:bg-primary-hover shadow-sm":"bg-surface-container-highest text-text-secondary cursor-not-allowed"}`,children:n?u.jsxs(u.Fragment,{children:[u.jsx(I0,{className:"w-4 h-4 animate-spin"})," Loading Memory..."]}):u.jsxs(u.Fragment,{children:["Next: Clean Sizes ",u.jsx(K0,{className:"w-4 h-4"})]})})]})]}),u.jsx("div",{className:"overflow-auto flex-1 p-6",children:u.jsxs("table",{className:"min-w-full text-sm text-left border-collapse",children:[u.jsx("thead",{className:"text-xs uppercase bg-surface-container sticky top-0 z-10",children:u.jsx("tr",{children:e.headers.map(o=>u.jsx("th",{scope:"col",className:`px-6 py-4 cursor-pointer hover:bg-surface-container-highest border-b-2 transition-colors ${i===o?"bg-primary-container border-primary text-primary":"border-outline/10 text-text-secondary"}`,onClick:()=>a(o),children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"radio",checked:i===o,onChange:()=>a(o),className:"w-4 h-4 text-primary bg-surface-container border-outline focus:ring-primary accent-primary"}),u.jsx("span",{className:"font-bold tracking-wide",children:o})]})},o))})}),u.jsx("tbody",{className:"divide-y divide-outline/10",children:s.map((o,l)=>u.jsx("tr",{className:"bg-surface-container-high hover:bg-surface-container-highest transition-colors",children:e.headers.map(c=>{var d;return u.jsx("td",{className:`px-6 py-4 text-text-secondary ${i===c?"bg-primary-container/20 text-text-primary font-medium":""}`,children:u.jsx("div",{className:"truncate max-w-[200px]",children:((d=o[c])==null?void 0:d.toString())||""})},`${l}-${c}`)})},l))})]})})]})},qee=({rows:e,knownSizes:t,setRows:r,setKnownSizes:n,onExport:i,onReset:a,mode:s,knownProductAliases:o})=>{const[l,c]=I.useState("ALL"),[d,f]=I.useState(null),[p,m]=I.useState(null),[x,v]=I.useState(""),[b,w]=I.useState(""),[k,E]=I.useState([]),N=I.useRef(null),P=Y=>s==="SIZES"?{targetText:Y.sizeTargetText||"",status:Y.sizeStatus||"UNKNOWN",value:Y.extractedSize||""}:s==="NAMES"?{targetText:Y.nameTargetText||"",status:Y.nameStatus||"UNKNOWN",value:Y.extractedName||""}:s==="PRICES"?{targetText:Y.priceTargetText||"",status:Y.priceStatus||"UNKNOWN",value:Y.extractedPrice||""}:{targetText:"",status:"UNKNOWN",value:""};I.useEffect(()=>{if(s!=="NAMES"){E([]);return}const Y=setTimeout(()=>{if(!b){E([]);return}j9e(b).then(W=>{E(W)})},300);return()=>clearTimeout(Y)},[b,s]);const R=I.useMemo(()=>({total:e.length,matched:e.filter(Y=>P(Y).status==="MATCHED").length,unknown:e.filter(Y=>P(Y).status==="UNKNOWN"||P(Y).status==="NEW").length}),[e,s]),O=I.useMemo(()=>{let Y=e.filter(W=>{const{status:Z}=P(W);return l==="ALL"?!0:l==="MATCHED"?Z==="MATCHED":l==="UNKNOWN"?Z==="UNKNOWN"||Z==="NEW":!0});if(s==="NAMES"){const W=new Map;return Y.forEach(Z=>{const re=P(Z).targetText;re&&!W.has(re)?W.set(re,{...Z,count:1}):re&&W.get(re).count++}),Array.from(W.values())}return Y},[e,l,s]);I.useEffect(()=>{const Y=W=>{if(W.target.closest(".selection-tooltip"))return;const Z=window.getSelection();(!Z||Z.isCollapsed)&&f(null)};return document.addEventListener("mousedown",Y),()=>document.removeEventListener("mousedown",Y)},[]);const D=(Y,W)=>{const Z=window.getSelection();if(!Z||Z.isCollapsed)return;const re=Z.toString().trim();if(re.length>0){const X=Z.getRangeAt(0).getBoundingClientRect();f({id:W,text:re,x:X.left+X.width/2,y:X.top-10})}},L=()=>{var Y;d&&(r(W=>W.map(Z=>{if(Z.id!==d.id)return Z;const re=t.some(X=>X.label.toLowerCase()===d.text.toLowerCase());return{...Z,extractedSize:d.text,sizeSelectionSource:d.text,sizeStatus:re?"MATCHED":"NEW",manualOverride:!0}})),f(null),(Y=window.getSelection())==null||Y.removeAllRanges())},B=(Y,W,Z)=>{r(s==="NAMES"?re=>re.map(X=>P(X).targetText===Z?{...X,extractedName:W,nameStatus:W?"NEW":"UNKNOWN",manualOverride:!0}:X):re=>re.map(X=>{if(X.id!==Y)return X;const Q=W.toLowerCase().trim(),fe=t.some(ye=>ye.label.toLowerCase()===Q);return{...X,extractedSize:W,sizeStatus:fe?"MATCHED":"NEW",manualOverride:!0}}))},z=Y=>{const{value:W,targetText:Z}=P(Y);if(!W)return;const re=W.trim();if(s==="NAMES"){const ie=Z;R9e(ie,re).then(()=>Re.success(`Learned: "${ie}" -> "${re}"`)).catch(()=>Re.error("Failed to save naming rule")),r(Ee=>Ee.map(ne=>P(ne).targetText===ie?{...ne,extractedName:re,nameStatus:"MATCHED",manualOverride:!1}:ne));return}const X=t.findIndex(ie=>ie.label.toLowerCase()===re.toLowerCase());let Q=[...t];const fe=[];if(Y.sizeSelectionSource&&Y.sizeSelectionSource.toLowerCase()!==re.toLowerCase()&&fe.push(Y.sizeSelectionSource),X>=0){const ie=Q[X],Ee=fe.filter(ne=>{var ae;return!((ae=ie.matchers)!=null&&ae.some(me=>me.toLowerCase()===ne.toLowerCase()))&&ne.toLowerCase()!==ie.label.toLowerCase()});Ee.length>0&&(Q[X]={...ie,matchers:[...ie.matchers||[],...Ee]})}else Q.push({id:Date.now().toString(),label:re,matchers:fe});n(Q);const ye=Y.sizeSelectionSource||Z;ye&&ye.toLowerCase()!==re.toLowerCase()&&O9e(ye.trim(),re).then(()=>Re.success(`Learned: "${ye}" = "${re}"`)).catch(()=>Re.error("Failed to save rule.")),Nle(re).catch(()=>{});const J=[re,...fe],V=re.replace(/["']/g,"").split("x");let G=null;V.length===2&&!isNaN(parseFloat(V[0]))&&(G=new RegExp(`\\b${V[0].trim()}\\s*x\\s*${V[1].trim()}\\b`,"i")),r(ie=>ie.map(Ee=>{const{status:ne,targetText:ae}=P(Ee),me=(ae||"").toLowerCase(),ve=(ye||"").toLowerCase();if(ne!=="MATCHED"){if(me===ve||J.some(q=>me.includes(q.toLowerCase())))return{...Ee,extractedSize:re,sizeStatus:"MATCHED"};if(G&&G.test(ae||""))return{...Ee,extractedSize:re,sizeStatus:"MATCHED"}}return Ee}))},H=Y=>{m(Y.id),v(Y.label)},te=(Y,W)=>{if(p!==Y)return;const Z=x.trim();if(!Z){m(null);return}if(Z===W){m(null);return}n(re=>re.map(X=>X.id===Y?{...X,label:Z}:X)),r(re=>re.map(X=>X.extractedSize===W?{...X,extractedSize:Z}:X)),m(null)};return u.jsxs("div",{className:"flex flex-col h-screen max-h-[85vh] bg-surface-container-high rounded-xl shadow-sm border border-outline/20 overflow-hidden relative",children:[d&&u.jsxs("div",{className:"fixed z-50 transform -translate-x-1/2 -translate-y-full mb-2 selection-tooltip",style:{left:d.x,top:d.y},children:[u.jsxs("button",{onClick:L,className:"bg-text-primary text-background text-xs font-bold py-1.5 px-3 rounded-lg shadow-lg flex items-center gap-1 hover:brightness-110 transition-colors",children:[u.jsx(R8e,{className:"w-3 h-3"}),"Set as Size"]}),u.jsx("div",{className:"w-2 h-2 bg-text-primary transform rotate-45 absolute bottom-[-4px] left-1/2 -translate-x-1/2"})]}),u.jsx("div",{className:"p-4 border-b border-outline/10 bg-surface-container-low flex flex-wrap gap-4 justify-between items-center",children:u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>c("ALL"),className:`px-3 py-1.5 text-sm font-bold rounded-full transition-colors border ${l==="ALL"?"bg-primary-container text-primary border-primary":"text-text-secondary border-transparent hover:bg-surface-container-highest"}`,children:["All (",R.total,")"]}),u.jsxs("button",{onClick:()=>c("MATCHED"),className:`px-3 py-1.5 text-sm font-bold rounded-full transition-colors border ${l==="MATCHED"?"bg-success-container text-success border-success":"text-text-secondary border-transparent hover:bg-surface-container-highest"}`,children:["Matched (",R.matched,")"]}),u.jsxs("button",{onClick:()=>c("UNKNOWN"),className:`px-3 py-1.5 text-sm font-bold rounded-full transition-colors border ${l==="UNKNOWN"?"bg-warning-container text-warning border-warning":"text-text-secondary border-transparent hover:bg-surface-container-highest"}`,children:["Review Needed (",R.unknown,")"]})]})}),u.jsxs("div",{className:"flex flex-1 overflow-hidden relative",ref:N,children:[u.jsx("div",{className:"flex-1 overflow-auto bg-surface-container",children:u.jsxs("table",{className:"min-w-full divide-y divide-outline/10",children:[u.jsx("thead",{className:"bg-surface-container sticky top-0 z-10 shadow-sm",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-text-secondary uppercase tracking-wider",children:"Original Description"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-text-secondary uppercase tracking-wider w-48",children:s==="SIZES"?"Extracted Size":s==="NAMES"?"Mapped Name":"Clean Price"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-text-secondary uppercase tracking-wider w-32",children:"Status"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-text-secondary uppercase tracking-wider w-32",children:"Actions"})]})}),u.jsxs("tbody",{className:"bg-surface-container-high divide-y divide-outline/10",children:[O.map(Y=>{const{targetText:W,status:Z,value:re}=P(Y);return u.jsxs("tr",{className:`group/row transition-colors ${Z==="UNKNOWN"?"bg-warning-container/5":"hover:bg-surface-container-highest/30"}`,children:[u.jsxs("td",{className:"px-6 py-4 text-sm text-text-primary break-words max-w-md cursor-text relative",onMouseUp:X=>D(X,Y.id),children:[u.jsx("span",{className:"font-medium opacity-90",children:W}),Y.count>1&&u.jsxs("span",{className:"ml-3 inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-bold bg-surface-container-highest text-text-secondary border border-outline/10 shadow-sm",children:["x",Y.count]})]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("input",{type:"text",value:re,onChange:X=>B(Y.id,X.target.value,W),onDragOver:X=>{X.preventDefault(),X.dataTransfer.dropEffect="copy"},onDrop:X=>{X.preventDefault();const Q=X.dataTransfer.getData("application/size")||X.dataTransfer.getData("application/product-name");Q&&B(Y.id,Q,W)},className:`w-full px-4 py-2 text-sm border rounded-full focus:ring-2 focus:ring-offset-0 outline-none transition-all shadow-sm ${Z==="MATCHED"?"border-success/30 bg-success-container/30 text-text-primary focus:ring-success/50":Z==="NEW"?"border-primary/30 bg-primary-container/30 text-text-primary focus:ring-primary/50":"border-transparent bg-surface-container-highest text-text-primary focus:bg-surface-container focus:border-primary/30 focus:ring-primary/50"}`,placeholder:s==="NAMES"?"Drag or type name...":"?"})}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[Z==="MATCHED"&&u.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-success-container text-success",children:[u.jsx(ad,{className:"w-3 h-3 mr-1"})," Match"]}),Z==="NEW"&&u.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-primary-container text-primary",children:[u.jsx(QE,{className:"w-3 h-3 mr-1"})," New Entry"]}),Z==="UNKNOWN"&&u.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-warning-container text-warning",children:[u.jsx(Zr,{className:"w-3 h-3 mr-1"})," Missing"]})]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-text-secondary",children:(Z==="NEW"||Z==="MATCHED"&&Y.manualOverride)&&u.jsx("button",{onClick:()=>z(Y),className:"text-primary hover:text-primary-hover flex items-center text-xs font-bold uppercase tracking-wide",title:Y.manualOverride?`Update rule for "${re}"`:`Add "${re}" to memory`,children:Y.manualOverride?u.jsxs(u.Fragment,{children:[u.jsx(ZE,{className:"w-3 h-3 mr-1"})," Change Rule"]}):u.jsxs(u.Fragment,{children:[u.jsx(Zl,{className:"w-3 h-3 mr-1"})," Learn Rule"]})})})]},`${Y.id}-${s}`)}),O.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"px-6 py-12 text-center text-text-secondary",children:"No rows found for this filter."})})]})]})}),s==="SIZES"&&u.jsxs("div",{className:"w-64 bg-surface-container-high border-l border-outline/10 flex flex-col shadow-xl z-20",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 bg-surface-container-low",children:[u.jsxs("h3",{className:"font-bold text-text-primary flex items-center gap-2",children:[u.jsx(vs,{className:"w-4 h-4"})," Known Sizes"]}),u.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Drag size to row to apply."})]}),u.jsx("div",{className:"overflow-y-auto flex-1 p-2 space-y-1",children:t.map(Y=>u.jsx("div",{draggable:!p,onDragStart:W=>{W.dataTransfer.setData("application/size",Y.label),W.dataTransfer.effectAllowed="copy"},className:`group flex items-center justify-between px-3 py-2 text-sm text-text-primary bg-surface-container-highest rounded-lg hover:bg-surface-container transition-colors ${p?"":"cursor-grab active:cursor-grabbing"}`,children:p===Y.id?u.jsx("input",{autoFocus:!0,value:x,onChange:W=>v(W.target.value),onBlur:()=>te(Y.id,Y.label),onKeyDown:W=>{W.key==="Enter"&&te(Y.id,Y.label),W.key==="Escape"&&m(null)},className:"w-full bg-surface-container border border-primary rounded px-1 py-0.5 outline-none text-sm text-text-primary"}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center flex-1 gap-2 overflow-hidden",children:[u.jsx(qq,{className:"w-3 h-3 text-text-secondary flex-shrink-0"}),u.jsx("span",{className:"font-mono cursor-pointer hover:text-primary truncate",onClick:()=>H(Y),title:"Click to edit",children:Y.label})]}),u.jsx("button",{onClick:W=>{W.stopPropagation(),n(Z=>Z.filter(re=>re.id!==Y.id))},className:"opacity-0 group-hover:opacity-100 text-text-secondary hover:text-error ml-2",children:u.jsx(Zr,{className:"w-3 h-3"})})]})},Y.id))}),u.jsx("div",{className:"p-4 border-t border-outline/10 bg-surface-container-low",children:u.jsxs("form",{onSubmit:Y=>{Y.preventDefault();const Z=Y.target.elements.namedItem("newSize");Z.value&&(z({id:Date.now().toString(),extractedSize:Z.value,sizeTargetText:Z.value,sizeStatus:"NEW"}),Z.value="")},className:"flex gap-2",children:[u.jsx("input",{name:"newSize",className:"flex-1 px-3 py-1.5 text-sm bg-surface-container border border-outline/20 rounded-md text-text-primary focus:border-primary focus:ring-1 focus:ring-primary outline-none",placeholder:"Add size..."}),u.jsx("button",{type:"submit",className:"p-1.5 bg-primary text-on-primary rounded-md hover:bg-primary-hover",children:u.jsx(Zl,{className:"w-4 h-4"})})]})})]}),s==="NAMES"&&u.jsxs("div",{className:"w-72 bg-surface-container-high border-l border-outline/10 flex flex-col shadow-xl z-20",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 bg-surface-container-low space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("h3",{className:"font-bold text-text-primary flex items-center gap-2",children:[u.jsx(c8e,{className:"w-4 h-4"})," Existing Products"]}),u.jsx("span",{className:"text-[10px] bg-surface-container-highest px-2 py-0.5 rounded-full text-text-secondary font-mono",children:k.length})]}),u.jsxs("div",{className:"relative group",children:[u.jsx(Wo,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-text-secondary group-focus-within:text-primary transition-colors"}),u.jsx("input",{value:b,onChange:Y=>w(Y.target.value),placeholder:"Search products...",className:"w-full pl-9 pr-3 py-2 text-sm bg-surface-container border border-transparent focus:border-primary/20 rounded-lg text-text-primary focus:bg-surface-container-high focus:ring-2 focus:ring-primary/20 outline-none transition-all"})]})]}),u.jsxs("div",{className:"overflow-y-auto flex-1 p-2 space-y-1",children:[k.map((Y,W)=>u.jsx("div",{draggable:!0,onDragStart:Z=>{Z.dataTransfer.setData("application/product-name",Y),Z.dataTransfer.effectAllowed="copy"},className:"group flex items-center justify-between px-3 py-2 text-sm text-text-primary bg-surface-container-highest rounded-lg hover:bg-surface-container transition-colors cursor-grab active:cursor-grabbing border border-transparent hover:border-outline/10",children:u.jsxs("div",{className:"flex items-center flex-1 gap-2 overflow-hidden",children:[u.jsx(qq,{className:"w-3 h-3 text-text-secondary flex-shrink-0 opacity-50 group-hover:opacity-100 transition-opacity"}),u.jsx("span",{className:"font-medium truncate",children:Y})]})},W)),k.length===0&&u.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center text-text-secondary px-6",children:[u.jsx(Wo,{className:"w-8 h-8 mb-2 opacity-20"}),u.jsxs("p",{className:"text-xs",children:['No products found matching "',b,'"']})]})]})]})]})]})},L_t=({onClose:e,onComplete:t,initialData:r,fileName:n})=>{const[i,a]=I.useState("upload"),[s,o]=I.useState(null),[l,c]=I.useState({size:null,name:null}),[d,f]=I.useState([]),[p,m]=I.useState([]),[x,v]=I.useState([]),[b,w]=I.useState([]),[k,E]=I.useState(!0),[N,P]=I.useState(!1);I.useEffect(()=>{if(r&&r.length>0&&i==="upload"){const te=r[0],W=r.slice(1).map(Z=>{const re={};return te.forEach((X,Q)=>{re[X]=Z[Q]}),re});o({name:n||"Uploaded File",headers:te,rows:W}),f(W.map((Z,re)=>({id:re.toString(),originalData:Z,sizeStatus:"UNKNOWN",nameStatus:"UNKNOWN"}))),a("selectSizeColumn")}},[r,n]),I.useEffect(()=>{const te=d.some(Y=>Y.manualOverride);P(te)},[d]),I.useEffect(()=>{(async()=>{E(!0);try{const[Y,W,Z,re]=await Promise.all([kle(),I9e(),P9e(),D9e()]);v(Z||[]);const X=Z.map(ye=>({searchText:ye.aliasText.toLowerCase(),resultText:ye.mappedProductName}));re.forEach(ye=>{X.push({searchText:ye.toLowerCase(),resultText:ye})}),X.sort((ye,J)=>J.searchText.length-ye.searchText.length),w(X);const Q=new Set([...Y||[],...(W||[]).map(ye=>ye.mappedSize)]),fe=Array.from(Q).map(ye=>({id:ye,label:ye,matchers:(W||[]).filter(J=>J.mappedSize===ye).map(J=>J.aliasText)}));m(fe)}catch(Y){console.error("Failed to load cleaner brain:",Y)}finally{E(!1)}})()},[]);const R=te=>{},O=te=>{s&&(c(Y=>({...Y,size:te})),f(Y=>Y.map((W,Z)=>{var ye;const X=((ye=W.originalData[te])==null?void 0:ye.toString())||"";let Q=W.extractedSize||Pve(X),fe=W.sizeStatus||"UNKNOWN";if(fe==="UNKNOWN")if(p.some(ce=>ce.label.toLowerCase()===Q.toLowerCase()))fe="MATCHED";else{const ce=p.find(V=>{var G;return(G=V.matchers)==null?void 0:G.some(ie=>X.toLowerCase().includes(ie.toLowerCase()))});ce&&(Q=ce.label,fe="MATCHED")}return{...W,sizeTargetText:X,extractedSize:Q,sizeStatus:fe}})),a("cleanSizes"))},D=()=>{a("selectNameColumn")},L=te=>{s&&(c(Y=>({...Y,name:te})),f(Y=>Y.map(W=>{var Q;const Z=((Q=W.originalData[te])==null?void 0:Q.toString())||"";let re=W.extractedName||Z.trim(),X=W.nameStatus||"UNKNOWN";if(X==="UNKNOWN"){const fe=Z.trim().toLowerCase(),ye=b.find(J=>fe.includes(J.searchText));ye&&(re=ye.resultText,X="MATCHED")}return{...W,nameTargetText:Z,extractedName:re,nameStatus:X}})),a("cleanNames"))},B=()=>{if(!s){e();return}const te=s.rows.map((Y,W)=>{const Z={...Y},re=d[W];return re&&(l.size&&re.extractedSize&&(Z[l.size]=re.extractedSize),l.name&&re.extractedName&&(Z[l.name]=re.extractedName)),Z});t(te),e()},z=()=>{confirm("Start over with a new file?")&&(a("upload"),o(null),c({size:null,name:null}),f([]))},H=()=>{const te=()=>{switch(i){case"upload":return"Step 1: Upload your messy vendor file.";case"selectSizeColumn":return"Step 2: Select the column containing SIZES.";case"cleanSizes":return"Step 3: Clean & verify product sizes.";case"selectNameColumn":return"Step 4: Select the column containing PRODUCT NAMES.";case"cleanNames":return"Step 5: Clean & verify product names.";default:return""}};return u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-outline/10 bg-surface-container-high",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Spreadsheet Cleaner"}),u.jsx("p",{className:"text-text-secondary text-sm",children:te()})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[i==="cleanSizes"&&u.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-5 py-2.5 rounded-full font-bold bg-primary text-on-primary hover:bg-primary-hover shadow-md transition-all",children:["Next: Clean Names ",u.jsx(K0,{size:18})]}),i==="cleanNames"&&u.jsxs("button",{onClick:B,className:"flex items-center gap-2 px-5 py-2.5 rounded-full font-bold bg-primary text-on-primary hover:bg-primary-hover shadow-md transition-all",children:["Finish Cleaning ",u.jsx(ad,{size:18})]}),u.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-surface-container-highest text-text-secondary transition-colors",children:u.jsx(Zr,{size:24})})]})]})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 md:p-8",children:u.jsxs("div",{className:"w-full max-w-6xl h-full max-h-[90vh] bg-surface-container rounded-2xl shadow-2xl overflow-hidden flex flex-col animate-in fade-in zoom-in-95 duration-200",children:[H(),u.jsxs("div",{className:"flex-1 overflow-auto bg-surface-container p-6",children:[i==="upload"&&u.jsx("div",{className:"h-full flex flex-col items-center justify-center",children:u.jsx(F_t,{onFileSelect:te=>{YE(async()=>{const{readExcelFile:Y}=await Promise.resolve().then(()=>P_t);return{readExcelFile:Y}},void 0).then(({readExcelFile:Y})=>{Y(te).then(R).catch(W=>alert(W.message))})}})}),i==="selectSizeColumn"&&s&&u.jsx(Vee,{data:s,onConfirm:O,onBack:()=>a("upload"),isBrainLoading:k}),i==="selectNameColumn"&&s&&u.jsx(Vee,{data:s,onConfirm:L,onBack:()=>a("cleanSizes"),isBrainLoading:k}),i==="cleanSizes"&&u.jsx(qee,{rows:d,knownSizes:p,setRows:f,setKnownSizes:m,onExport:D,onReset:z,mode:"SIZES",knownProductAliases:x,nameMatchers:b}),i==="cleanNames"&&u.jsx(qee,{rows:d,knownSizes:p,setRows:f,setKnownSizes:m,onExport:B,onReset:z,mode:"NAMES",knownProductAliases:x,nameMatchers:b})]})]})})},B_t=()=>{var D;const[e,t]=I.useState(1),[r,n]=I.useState(!1),[i,a]=I.useState(null),[s,o]=I.useState(null),[l,c]=I.useState([]),[d,f]=I.useState(!1),[p,m]=I.useState("variant_match"),[x,v]=I.useState({}),b=(L,B)=>{a(L),o(B)},w=()=>{n(!0)},k=()=>{!i||i.length<2||(a(L=>L?L.slice(1):[]),Re.success("Top row removed."))},E=()=>{a(null),o(null)},N=L=>{if(!L||L.length===0)return;const B=i?i[0]:Object.keys(L[0]),z=L.map(te=>B.map(Y=>te[Y])),H=[B,...z];a(H),n(!1),t(2)},P=()=>{const L=["Manufacturer","Collection","Color","Item Description","SKU","Cost"],B=[["Global Floors","Nebula Series","Stardust","Nebula Stardust Tile 12x24 Matte","NB-100",3.49],["Global Floors","Nebula Series","Cosmos","Nebula Cosmos Tile 12x24 Matte","NB-101",3.49],["Global Floors","Rustic Woods","Oak Natural","LVP Plank 7 inch x 48 inch Click","RW-200",2.99],["Global Floors","Rustic Woods","Oak Dark","LVP Plank 7 inch x 48 inch Click","RW-201",2.99],["Global Floors","Metro Subway","White Gloss","Ceramic Wall Tile 3 by 6","MT-300",.89]],z=$2.aoa_to_sheet([L,...B]),H=$2.book_new();$2.book_append_sheet(H,z,"Inventory"),w_t(H,"messy_vendor_file.xlsx")},R=async(L,B)=>{f(!0),m(B);try{const z=await cr.post("/api/import/preview",{mappedRows:L,strategy:B,defaults:x});c(z.data),t(3)}catch(z){console.error(z),Re.error("Failed to generate preview.")}finally{f(!1)}},O=async L=>{if(confirm("Are you sure you want to apply these changes to the database?")){f(!0);try{const B=await cr.post("/api/import/execute",{previewResults:L,strategy:p,defaults:x});Re.success(`Import complete! ${B.data.updates} updated, ${B.data.created} created.`),t(1),a(null),o(null)}catch(B){console.error(B),Re.error("Import failed. Check console for details.")}finally{f(!1)}}};return u.jsxs("div",{className:"space-y-8",children:[u.jsx("div",{className:"bg-surface-container-high p-8 rounded-xl shadow-sm border border-outline/10",children:u.jsxs("div",{children:[u.jsx("h1",{className:"text-4xl font-bold text-text-primary tracking-tight",children:"Import Inventory"}),u.jsx("p",{className:"text-text-secondary mt-1 font-medium",children:"Upload vendor price lists to update products in bulk."})]})}),u.jsxs("div",{className:"bg-surface-container-high rounded-xl shadow-sm border border-outline/10 overflow-hidden",children:[u.jsx("div",{className:"bg-surface-container-low border-b border-outline/10 p-8",children:u.jsxs("div",{className:"flex items-center justify-between max-w-3xl mx-auto",children:[u.jsxs("div",{className:`flex flex-col items-center transition-colors ${e>=1?"text-primary":"text-text-secondary"}`,children:[u.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold mb-2 transition-colors ${e>=1?"bg-primary-container text-primary":"bg-surface-container-highest text-text-tertiary border border-outline/10"}`,children:e>1?u.jsx(jh,{size:24}):"1"}),u.jsx("span",{className:"text-sm font-medium",children:"Upload & Clean"})]}),u.jsx("div",{className:`flex-1 h-0.5 mx-4 transition-colors ${e>1?"bg-primary":"bg-outline/20"}`}),u.jsxs("div",{className:`flex flex-col items-center transition-colors ${e>=2?"text-primary":"text-text-secondary"}`,children:[u.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold mb-2 transition-colors ${e>=2?"bg-primary-container text-primary":"bg-surface-container-highest text-text-tertiary border border-outline/10"}`,children:e>2?u.jsx(jh,{size:24}):"2"}),u.jsx("span",{className:"text-sm font-medium",children:"Map Columns"})]}),u.jsx("div",{className:`flex-1 h-0.5 mx-4 transition-colors ${e>2?"bg-primary":"bg-outline/20"}`}),u.jsxs("div",{className:`flex flex-col items-center transition-colors ${e>=3?"text-primary":"text-text-secondary"}`,children:[u.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold mb-2 transition-colors ${e>=3?"bg-primary-container text-primary":"bg-surface-container-highest text-text-tertiary border border-outline/10"}`,children:"3"}),u.jsx("span",{className:"text-sm font-medium",children:"Review & Import"})]})]})}),u.jsxs("div",{className:"p-8",children:[e===1&&!i&&u.jsxs("div",{className:"max-w-2xl mx-auto space-y-8",children:[u.jsx("div",{className:"bg-surface-container-low rounded-2xl border border-outline/10 p-1 shadow-sm",children:u.jsx(R_t,{onDataLoaded:b})}),u.jsx("div",{className:"flex flex-col md:flex-row gap-4 justify-center items-center text-center md:text-left",children:u.jsxs("button",{onClick:P,className:"flex items-center gap-2 px-4 py-2 text-sm text-text-secondary hover:text-primary transition-colors",children:[u.jsx(JE,{size:16})," Download Test File"]})})]}),e===1&&i&&u.jsxs("div",{className:"space-y-6 w-full animate-in fade-in slide-in-from-bottom-4 duration-500",children:[u.jsxs("div",{className:"bg-surface-container rounded-xl p-4 border border-outline/10 flex flex-wrap gap-4 justify-between items-center shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-success-container rounded-lg text-success",children:u.jsx(y8e,{size:24})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-text-primary text-lg",children:s}),u.jsxs("p",{className:"text-sm text-text-secondary",children:[i.length," rows detected"]})]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:k,className:"px-4 py-2 text-sm font-bold text-error bg-error-container/20 hover:bg-error-container/40 rounded-lg transition-colors border border-error/20",children:"Remove Top Row"}),u.jsx("div",{className:"h-8 w-px bg-outline/20 mx-2"}),u.jsx("button",{onClick:E,className:"px-4 py-2 text-sm font-bold text-text-secondary hover:bg-surface-container-high rounded-lg transition-colors",children:"Cancel"}),u.jsxs("button",{onClick:w,className:"px-6 py-2 text-sm font-bold text-on-primary bg-primary hover:bg-primary-hover rounded-full shadow-md transition-all active:scale-95 flex items-center gap-2",children:["Next: Clean Data ",u.jsx(poe,{size:16})]})]})]}),u.jsxs("div",{className:"bg-surface-container rounded-xl border border-outline/10 overflow-hidden shadow-sm",children:[u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left text-sm",children:[u.jsx("thead",{className:"bg-surface-container-high border-b border-outline/10 text-text-secondary uppercase text-xs",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-3 w-12 text-center",children:"#"}),(D=i[0])==null?void 0:D.map((L,B)=>u.jsx("th",{className:"p-3 font-bold border-r border-outline/5 last:border-0 whitespace-nowrap",children:B<5?`Col ${String.fromCharCode(65+B)}`:`Col ${B}`},B))]})}),u.jsx("tbody",{className:"divide-y divide-outline/5",children:i.slice(0,8).map((L,B)=>u.jsxs("tr",{className:"hover:bg-surface-container-high/50 transition-colors",children:[u.jsx("td",{className:"p-3 text-center text-text-secondary text-xs font-mono border-r border-outline/5",children:B+1}),L.map((z,H)=>u.jsx("td",{className:"p-3 text-text-primary border-r border-outline/5 last:border-0 max-w-xs truncate",children:z},H))]},B))})]})}),u.jsxs("div",{className:"p-3 bg-surface-container-low border-t border-outline/10 text-center text-xs text-text-secondary",children:["Showing first 8 rows of ",i.length]})]})]}),e===2&&u.jsx(D_t,{rawData:i||[],fileName:s||"Unknown File",onBack:()=>t(1),onComplete:R,isGeneratingPreview:d,onDefaultsChange:v}),e===3&&u.jsx(M_t,{results:l,onExecute:O,isExecuting:d,onBack:()=>t(2)})]})]}),r&&u.jsx(L_t,{onClose:()=>n(!1),onComplete:N,initialData:i||void 0,fileName:s||void 0})]})},Gee=()=>{const{partnerId:e}=wx(),t=pu(),{currentUser:r,refreshNotifications:n}=Gr(),[i,a]=I.useState([]),[s,o]=I.useState(null),[l,c]=I.useState([]),[d,f]=I.useState(""),[p,m]=I.useState("inbox"),[x,v]=I.useState(""),[b,w]=I.useState(!1),[k,E]=I.useState([]),N=I.useRef(null),P=Y=>Y?Y.replace(/@\[(\w+):[^|]+\|([^\]]+)\]/g,(W,Z,re)=>Z==="user"?`@${re}`:Z==="project"?` ${re}`:Z==="product"?` ${re}`:Z==="customer"?` ${re}`:Z==="installer"?` ${re}`:re):"No messages yet";I.useEffect(()=>{if(!e){o(null);return}/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test(e)?o(e):cr.post(`/api/messages/start/${e}`).then(W=>{t(`/messages/${W.data.conversationId}`,{replace:!0})}).catch(W=>{console.error("Failed to resolve conversation",W),t("/messages")})},[e,t]);const R=async()=>{try{const Y=await cr.get("/api/messages/conversations",{params:{archived:p==="archived"}});a(Y.data)}catch(Y){console.error("Failed to load conversations",Y)}},O=async()=>{if(s)try{const Y=await cr.get(`/api/messages/${s}`);c(Y.data),a(W=>W.map(Z=>Z.conversationId===s?{...Z,unreadCount:0}:Z)),n()}catch(Y){console.error("Failed to load messages",Y)}};I.useEffect(()=>{R(),s&&O();const Y=setInterval(()=>{R(),s&&O()},5e3);return()=>clearInterval(Y)},[s,p]),I.useEffect(()=>{N.current&&(N.current.scrollTop=N.current.scrollHeight)},[l]);const D=Y=>{if(Y==null||Y.preventDefault(),!d.trim()||!s)return;const W=/@\[user:([^|]+)\|([^\]]+)\]/g;let Z;const re=new Set;for(;(Z=W.exec(d))!==null;)re.add(Z[1]);if(re.size===0){L();return}const X=i.find(ce=>ce.conversationId===s);if(!X){L();return}const Q=new Set(X.participants.map(ce=>ce.userId));r&&Q.add(r.userId);const fe=[];let ye;const J=/@\[user:([^|]+)\|([^\]]+)\]/g;for(;(ye=J.exec(d))!==null;){const ce=ye[1],V=ye[2];Q.has(ce)||fe.push(V)}fe.length>0?(E(fe),w(!0)):L()},L=async()=>{if(s)try{await cr.post(`/api/messages/${s}`,{content:d}),f(""),w(!1),E([]),O(),R()}catch(Y){console.error(Y)}},B=async()=>{if(!s)return;const Y=i.find(Z=>Z.conversationId===s);if(!Y)return;const W=!Y.isArchived;try{await cr.patch(`/api/messages/${s}/archive`,{isArchived:W}),a(Z=>Z.filter(re=>re.conversationId!==s)),W?(o(null),t("/messages")):R()}catch(Z){console.error(Z)}},z=Y=>{Y.key==="Enter"&&!Y.shiftKey&&(Y.preventDefault(),D())},H=i.find(Y=>Y.conversationId===s)||null,te=i.filter(Y=>Y.title.toLowerCase().includes(x.toLowerCase()));return u.jsxs("div",{className:"flex bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:[u.jsxs("div",{className:`
                bg-surface-container-low border-r border-outline/10 flex-col 
                ${s?"hidden md:flex":"flex w-full"} 
                md:w-80
            `,children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("h2",{className:"text-lg font-bold text-text-primary flex items-center gap-2",children:[u.jsx(t8,{className:"w-5 h-5 text-primary"}),"Messages"]}),u.jsxs("div",{className:"flex bg-surface-container-high rounded-full p-1 border border-outline/10 shadow-sm",children:[u.jsx("button",{onClick:()=>m("inbox"),className:`p-1.5 rounded-full transition-colors ${p==="inbox"?"bg-primary-container text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,title:"Inbox",children:u.jsx(Gq,{size:16})}),u.jsx("button",{onClick:()=>m("archived"),className:`p-1.5 rounded-full transition-colors ${p==="archived"?"bg-primary-container text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,title:"Archived",children:u.jsx(cS,{size:16})})]})]}),u.jsxs("div",{className:"relative",children:[u.jsx(Wo,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-secondary",size:16}),u.jsx("input",{type:"text",placeholder:"Search...",className:"w-full pl-10 pr-4 py-2 bg-surface-container-highest border-none rounded-full text-sm text-text-primary focus:ring-2 focus:ring-primary/50 outline-none transition-shadow shadow-sm",value:x,onChange:Y=>v(Y.target.value)})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:[te.map(Y=>{var X;const W=s===Y.conversationId,Z=((X=Y.participants[0])==null?void 0:X.avatarUrl)||`https://www.gravatar.com/avatar/${hS(Y.title)}?s=40&d=mp`,re=Y.participants.length>1;return u.jsxs("div",{onClick:()=>t(`/messages/${Y.conversationId}`),className:`flex items-center gap-3 p-3 cursor-pointer rounded-xl transition-all ${W?"bg-primary-container text-on-primary-container":"hover:bg-surface-container-highest text-text-secondary"}`,children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:Z,className:"w-10 h-10 rounded-full bg-surface-container-highest object-cover border border-outline/10"}),re&&u.jsx("div",{className:"absolute -bottom-1 -right-1 bg-surface-container rounded-full p-0.5 border border-outline/10 shadow-sm",children:u.jsx(ex,{size:12,className:"text-text-secondary"})})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("p",{className:`font-bold truncate text-sm ${W?"text-primary":"text-text-primary"}`,children:Y.title}),Y.unreadCount>0&&u.jsx("span",{className:"bg-error-container text-error text-[10px] px-1.5 py-0.5 rounded-full font-bold shadow-sm",children:Y.unreadCount})]}),u.jsx("p",{className:`text-xs truncate ${Y.unreadCount>0?"text-text-primary font-bold":"opacity-80"}`,children:P(Y.lastMessage)})]})]},Y.conversationId)}),x.length>1&&u.jsx(U_t,{query:x,navigate:t}),te.length===0&&x.length<2&&u.jsx("div",{className:"text-center p-8 text-text-tertiary text-sm",children:p==="inbox"?"No active conversations.":"No archived conversations."})]})]}),u.jsxs("div",{className:`
                flex-col bg-surface relative 
                ${s?"flex w-full":"hidden md:flex"} 
                flex-1
            `,children:[u.jsx("div",{className:"absolute inset-0 opacity-[0.02] pointer-events-none bg-[radial-gradient(#000_1px,transparent_1px)] [background-size:16px_16px]"}),s?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex items-center justify-between bg-surface-container-high shadow-sm z-10",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:()=>t("/messages"),className:"md:hidden p-2 -ml-2 text-text-secondary hover:text-text-primary",children:u.jsx(id,{size:20})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-text-primary text-lg leading-tight",children:(H==null?void 0:H.title)||"Loading..."}),(H==null?void 0:H.type)==="GROUP"&&u.jsxs("p",{className:"text-xs text-text-secondary",children:[H.participants.length+1," participants"]})]})]}),u.jsx("button",{onClick:B,className:"p-2 text-text-secondary hover:text-primary transition-colors rounded-full hover:bg-surface-container-highest",title:H!=null&&H.isArchived?"Unarchive":"Archive",children:H!=null&&H.isArchived?u.jsx(Gq,{size:20}):u.jsx(cS,{size:20})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 z-0",ref:N,children:l.map(Y=>{const W=Y.senderId===(r==null?void 0:r.userId);return u.jsxs("div",{className:`flex ${W?"justify-end":"justify-start"}`,children:[!W&&u.jsx("img",{src:Y.senderAvatar||`https://www.gravatar.com/avatar/${hS(Y.senderName)}?s=40&d=mp`,className:"w-8 h-8 rounded-full mr-2 self-end mb-1 border border-outline/10 shadow-sm",title:Y.senderName}),u.jsxs("div",{className:`max-w-[75%] px-4 py-3 rounded-2xl shadow-sm text-sm ${W?"bg-primary text-on-primary rounded-br-none":"bg-surface-container-highest text-text-primary rounded-bl-none"}`,children:[!W&&(H==null?void 0:H.type)==="GROUP"&&u.jsx("p",{className:"text-[10px] font-bold opacity-70 mb-1",children:Y.senderName}),u.jsx(i3,{content:Y.content}),u.jsx("p",{className:`text-[10px] mt-1 text-right ${W?"opacity-70":"text-text-secondary"}`,children:new Date(Y.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},Y.id)})}),u.jsx("form",{onSubmit:D,className:"p-4 bg-surface-container-high border-t border-outline/10 z-10",children:u.jsx(wT,{value:d,onChange:f,placeholder:"Type a message... Use @ to mention",onKeyDown:z,rightElement:u.jsx("button",{type:"submit",disabled:!d.trim(),className:"bg-primary text-on-primary p-2 rounded-full hover:bg-primary-hover transition-colors h-10 w-10 flex items-center justify-center shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:u.jsx(sy,{size:18})})})})]}):u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-text-tertiary opacity-40",children:[u.jsx(t8,{size:64,className:"mb-4 bg-surface-container-highest p-6 rounded-full"}),u.jsx("p",{className:"text-lg font-medium",children:"Select a conversation"})]})]}),b&&u.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-2xl max-w-md w-full border border-outline/10 animate-in fade-in zoom-in duration-200",children:u.jsxs("div",{className:"p-8",children:[u.jsxs("div",{className:"flex items-center gap-3 text-warning mb-4",children:[u.jsx("div",{className:"bg-warning-container p-2 rounded-full",children:u.jsx(ld,{size:24})}),u.jsx("h3",{className:"text-lg font-bold text-text-primary",children:"Add Users to Chat?"})]}),u.jsxs("p",{className:"text-text-secondary mb-4",children:["You mentioned ",u.jsx("strong",{children:k.join(", ")}),"."]}),u.jsxs("p",{className:"text-text-secondary mb-6 text-sm bg-surface-container-low p-4 rounded-xl border border-outline/5",children:[" ",u.jsx("strong",{children:"Note:"})," By sending this message, they will be added to this conversation and will be able to see the ",u.jsx("strong",{children:"entire chat history"}),"."]}),u.jsxs("div",{className:"flex gap-3 justify-end",children:[u.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 text-sm font-medium text-text-secondary hover:bg-surface-container-highest rounded-full transition-colors",children:"Cancel"}),u.jsx("button",{onClick:L,className:"px-6 py-2 text-sm font-bold bg-primary text-on-primary rounded-full hover:bg-primary-hover shadow-md transition-colors",children:"Confirm & Add"})]})]})})})]})},U_t=({query:e,navigate:t})=>{const[r,n]=I.useState([]);return I.useEffect(()=>{const a=setTimeout(async()=>{try{const s=await cr.get(`/api/messages/search-users?query=${e}`);n(s.data)}catch{}},300);return()=>clearTimeout(a)},[e]),r.length===0?null:u.jsxs("div",{className:"mt-2 border-t border-outline/10 pt-2 px-2",children:[u.jsx("p",{className:"px-4 text-xs font-bold text-text-tertiary mb-1 uppercase tracking-wider",children:"Start New Chat"}),r.map(i=>u.jsxs("div",{onClick:()=>{cr.post(`/api/messages/start/${i.userId}`).then(a=>{t(`/messages/${a.data.conversationId}`)})},className:"flex items-center gap-3 p-3 cursor-pointer hover:bg-surface-container-highest rounded-xl transition-colors",children:[u.jsx("img",{src:i.avatarUrl||`https://www.gravatar.com/avatar/${hS(i.email)}?s=40&d=mp`,className:"w-8 h-8 rounded-full bg-surface-container-highest"}),u.jsxs("div",{children:[u.jsxs("p",{className:"text-sm font-medium text-text-primary",children:[i.firstName," ",i.lastName]}),u.jsx("p",{className:"text-xs text-text-secondary",children:i.email})]})]},i.userId))]})};function $_t(){const[e,t]=I.useState(1),[r,n]=I.useState(!1),[i,a]=I.useState(null),[s,o]=I.useState(!0),[l,c]=I.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",companyName:"",publicUrl:window.location.origin});I.useEffect(()=>{fetch("/api/setup/status").then(v=>v.json()).then(v=>{v.isSupertokensSecure===!1&&o(!1)}).catch(console.error)},[]);const d=v=>{c(b=>({...b,[v.target.name]:v.target.value}))},f=()=>{if(e===1){if(!l.firstName||!l.lastName||!l.email||!l.password){a("All fields are required.");return}if(l.password!==l.confirmPassword){a("Passwords do not match.");return}if(l.password.length<8){a("Password must be at least 8 characters.");return}}a(null),t(2)},p=async()=>{if(!l.companyName||!l.publicUrl){a("Company Name and System URL are required.");return}n(!0),a(null);try{const v=await fetch("/api/setup/init",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),b=await v.json();if(!v.ok)throw new Error(b.error||"Setup failed");window.location.href="/auth"}catch(v){a(v.message),n(!1)}},m="w-full bg-neutral-800/50 border border-neutral-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-transparent placeholder-neutral-500",x="block text-sm font-medium text-neutral-400 mb-1.5";return u.jsx("div",{className:"min-h-screen bg-neutral-950 flex items-center justify-center p-4 font-sans text-neutral-200",children:u.jsxs("div",{className:"w-full max-w-lg",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-neutral-100 mb-2 tracking-tight",children:"Welcome to Subfloor"}),u.jsx("p",{className:"text-neutral-400",children:"Let's get your system ready for business."})]}),!s&&u.jsxs("div",{className:"mb-6 bg-warning-container/20 border border-warning/30 rounded-xl p-4 flex items-start gap-3",children:[u.jsx(ld,{className:"w-5 h-5 text-warning flex-shrink-0 mt-0.5"}),u.jsxs("div",{className:"text-sm text-neutral-200",children:[u.jsx("strong",{className:"block text-warning mb-1 font-bold",children:"Security Warning: No API Key Detected"}),"Your authentication service is running in insecure mode. Please add ",u.jsx("code",{className:"bg-black/30 px-1 rounded",children:"SUPERTOKENS_API_KEY"})," to your environment variables and restart."]})]}),u.jsxs("div",{className:"bg-neutral-900 border border-neutral-800 rounded-2xl shadow-2xl overflow-hidden",children:[u.jsxs("div",{className:"p-6 border-b border-neutral-800",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-colors ${e>=1?"bg-primary text-on-primary shadow-sm":"bg-neutral-800 text-neutral-500"}`,children:"1"}),u.jsx("div",{className:`h-1 w-8 transition-colors ${e>=2?"bg-primary":"bg-neutral-800"}`}),u.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-colors ${e>=2?"bg-primary text-on-primary shadow-sm":"bg-neutral-800 text-neutral-500"}`,children:"2"})]}),u.jsx("span",{className:"text-sm font-bold text-neutral-500 uppercase tracking-wider",children:e===1?"Create Admin":"System Config"})]}),u.jsx("h2",{className:"text-xl font-bold text-neutral-100",children:e===1?"Create Admin Account":"Company Settings"}),u.jsx("p",{className:"text-sm text-neutral-400 mt-1 font-medium",children:e===1?"This user will have full access to all settings.":"Configure how your team will access the system."})]}),u.jsxs("div",{className:"p-6 space-y-4",children:[i&&u.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg text-sm text-red-300",children:i}),e===1?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"firstName",className:x,children:"First Name"}),u.jsx("input",{id:"firstName",name:"firstName",type:"text",value:l.firstName,onChange:d,className:m,placeholder:"Jane"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"lastName",className:x,children:"Last Name"}),u.jsx("input",{id:"lastName",name:"lastName",type:"text",value:l.lastName,onChange:d,className:m,placeholder:"Doe"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:x,children:"Email Address"}),u.jsx("input",{id:"email",name:"email",type:"email",value:l.email,onChange:d,className:m,placeholder:"admin@company.com"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:x,children:"Password"}),u.jsx("input",{id:"password",name:"password",type:"password",value:l.password,onChange:d,className:m})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"confirmPassword",className:x,children:"Confirm"}),u.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:l.confirmPassword,onChange:d,className:m})]})]}),u.jsxs("button",{onClick:f,className:"w-full mt-4 bg-primary hover:bg-primary-hover text-on-primary font-bold py-3 px-6 rounded-full transition-all shadow-md flex items-center justify-center",children:["Next Step ",u.jsx(K0,{className:"w-4 h-4 ml-2"})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"companyName",className:x,children:"Company Name"}),u.jsx("input",{id:"companyName",name:"companyName",type:"text",value:l.companyName,onChange:d,className:m,placeholder:"My Flooring Co."}),u.jsx("p",{className:"text-xs text-neutral-500 mt-1 font-medium",children:"This will appear on emails and invoices."})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"publicUrl",className:x,children:"System URL"}),u.jsx("input",{id:"publicUrl",name:"publicUrl",type:"text",value:l.publicUrl,onChange:d,className:m}),u.jsxs("div",{className:"flex items-start gap-2 mt-3 bg-neutral-950/50 p-3 rounded-xl border border-neutral-800/50",children:[u.jsx(jh,{className:"w-4 h-4 text-success mt-0.5 flex-shrink-0"}),u.jsxs("p",{className:"text-xs text-neutral-400 leading-relaxed font-medium",children:["We detected ",u.jsx("strong",{children:window.location.origin}),". Only change this if you are using a proxy or custom domain."]})]})]}),u.jsxs("div",{className:"flex gap-3 mt-6",children:[u.jsx("button",{onClick:()=>t(1),className:"w-1/3 py-3 px-4 text-neutral-400 font-bold hover:text-neutral-100 hover:bg-neutral-800 rounded-full transition-colors",children:"Back"}),u.jsxs("button",{onClick:p,disabled:r,className:"w-2/3 bg-success hover:bg-success-hover text-on-success font-bold py-3 px-6 rounded-full transition-all shadow-md flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:[r?u.jsx(I0,{className:"w-5 h-5 animate-spin mr-2"}):u.jsx(L8e,{className:"w-5 h-5 mr-2"}),"Initialize System"]})]})]})]})]})]})})}const Rve=`
  .kb-read-content h1 { font-size: 1.75em; font-weight: 800; margin-top: 1.5em; margin-bottom: 0.5em; color: var(--color-text-primary); scroll-margin-top: 2rem; }
  .kb-read-content h2 { font-size: 1.4em; font-weight: 700; margin-top: 1.25em; margin-bottom: 0.5em; color: var(--color-text-primary); scroll-margin-top: 2rem; }
  .kb-read-content h3 { font-size: 1.2em; font-weight: 600; margin-top: 1em; margin-bottom: 0.5em; color: var(--color-text-primary); scroll-margin-top: 2rem; }
  .kb-read-content p { margin-bottom: 0.75em; line-height: 1.6; color: var(--color-text-primary); overflow-wrap: break-word; }
  .kb-read-content p:empty::before { content: " "; display: inline-block; }
  .kb-read-content ul { list-style-type: disc; padding-left: 1.5em; margin-bottom: 1em; color: var(--color-text-primary); }
  .kb-read-content ol { list-style-type: decimal; padding-left: 1.5em; margin-bottom: 1em; color: var(--color-text-primary); }
  .kb-read-content a { color: var(--color-primary); text-decoration: underline; cursor: pointer; }
  .kb-read-content strong { font-weight: bold; color: var(--color-text-primary); }
  
  /* FILE ATTACHMENT LINKS */
  .kb-read-content a[href*="/uploads/"] {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background-color: var(--color-surface);
      border: 1px solid var(--color-border);
      padding: 0.25rem 0.75rem;
      border-radius: 999px;
      text-decoration: none;
      font-weight: 500;
      font-size: 0.9em;
      transition: all 0.2s;
      margin: 0.25rem 0;
  }
  .kb-read-content a[href*="/uploads/"]:hover {
      border-color: var(--color-primary);
      background-color: color-mix(in srgb, var(--color-primary), transparent 95%);
  }
  
  /* CAPTION & FIGURE STYLES */
  .kb-read-content figure { display: table; margin: 1.5em auto; max-width: 100%; }
  .kb-read-content figcaption { text-align: center; font-size: 0.85em; color: var(--color-text-secondary); font-style: italic; margin-top: 0.5em; width: 100%; }
  .kb-read-content figure img { margin: 0 !important; float: none !important; display: block; }
  
  /* IMAGE STYLES */
  .kb-read-content img { 
      max-width: 100%; 
      height: auto; 
      border-radius: 0.5rem; 
      margin: 1.5em auto; 
      display: block;    
      cursor: zoom-in; 
      box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); 
  }
  .kb-read-content img[align="left"] { 
      float: left; margin: 0.5em 1.5em 1em 0; display: inline-block; 
  }
  .kb-read-content img[align="right"] { 
      float: right; margin: 0.5em 0 1em 1.5em; display: inline-block; 
  }
  .kb-read-content img[align="center"] { display: block; margin: 1.5em auto; }
  
  /* WIKI LINKS */
  .kb-read-content .kb-mention {
      color: var(--color-primary);
      background-color: color-mix(in srgb, var(--color-primary), white 85%);
      padding: 0.1rem 0.3rem;
      border-radius: 0.3rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
  }
  .kb-read-content .kb-mention:hover {
      background-color: var(--color-primary);
      color: var(--color-on-primary);
  }
`;function z_t({articleId:e,onClose:t,onRestore:r}){const[n,i]=I.useState([]),[a,s]=I.useState(null),[o,l]=I.useState(!0),[c,d]=I.useState(!1);I.useEffect(()=>{f()},[e]);const f=async()=>{try{const x=await cr.get(`/api/kb/articles/${e}/history`);i(x.data),window.innerWidth>=768&&x.data.length>0&&s(x.data[0])}catch(x){console.error(x),Re.error("Failed to load history")}finally{l(!1)}},p=x=>{s(x),d(!0)},m=()=>{a&&(r(a.previousContent),Re.success("Content restored. Please Save to confirm."))};return u.jsxs("div",{className:"flex flex-col h-full bg-surface",children:[u.jsx("style",{children:Rve}),u.jsx("div",{className:"p-4 border-b border-border bg-background flex justify-between items-center",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{onClick:t,className:"text-text-secondary hover:text-text-primary flex items-center gap-1 text-sm",children:[u.jsx(id,{size:16})," Back"]}),u.jsx("span",{className:"text-border",children:"|"}),u.jsxs("h2",{className:"font-bold text-lg flex items-center gap-2 text-text-primary",children:[u.jsx(od,{size:18,className:"text-primary"})," History"]})]})}),u.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[u.jsxs("div",{className:`
                    w-full md:w-80 border-r border-border bg-background/50 overflow-y-auto p-2
                    ${c?"hidden md:block":"block"}
                `,children:[u.jsx("h3",{className:"text-xs font-bold text-text-tertiary uppercase tracking-wider mb-2 px-2 mt-2",children:"Revisions"}),n.length===0&&!o&&u.jsx("div",{className:"p-4 text-center text-text-secondary text-sm",children:"No history found."}),n.map(x=>u.jsxs("button",{onClick:()=>p(x),className:`w-full text-left p-3 rounded-lg mb-1 transition-colors border group relative ${(a==null?void 0:a.id)===x.id?"bg-primary/10 border-primary/50 ring-1 ring-primary":"bg-surface border-transparent hover:border-border"}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-6 h-6 rounded-full bg-surface-hover flex items-center justify-center text-text-secondary",children:u.jsx(lc,{size:12})}),u.jsx("span",{className:"text-xs font-bold text-text-primary truncate max-w-[120px]",children:x.authorName||"Unknown"})]}),u.jsx("span",{className:"text-[10px] text-text-tertiary",children:new Date(x.createdAt).toLocaleDateString()})]}),u.jsxs("div",{className:"text-xs text-text-secondary pl-8 flex justify-between items-center",children:[u.jsx("span",{children:new Date(x.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),u.jsx(sd,{size:14,className:"opacity-0 group-hover:opacity-100 md:hidden text-primary"})]})]},x.id))]}),u.jsx("div",{className:`
                    flex-1 flex flex-col bg-surface absolute inset-0 md:static z-10 md:z-auto
                    ${c?"block":"hidden md:flex"}
                `,children:a?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"p-3 border-b border-border bg-background/50 flex justify-between items-center shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>d(!1),className:"md:hidden p-1 -ml-1 text-text-secondary",children:u.jsx(id,{size:18})}),u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("span",{className:"text-xs font-bold text-text-primary",children:["Snapshot from ",new Date(a.createdAt).toLocaleString()]}),u.jsxs("span",{className:"text-[10px] text-text-tertiary md:hidden",children:["By ",a.authorName]})]})]}),u.jsxs("button",{onClick:m,className:"flex items-center gap-2 bg-primary text-on-primary px-3 py-1.5 rounded text-sm font-bold hover:bg-primary-hover shadow-sm",children:[u.jsx(Lx,{size:14})," ",u.jsx("span",{className:"hidden sm:inline",children:"Restore"})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-8",children:u.jsx("div",{className:"kb-read-content opacity-90",dangerouslySetInnerHTML:{__html:a.previousContent}})})]}):u.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-text-tertiary p-4 text-center",children:[u.jsx(od,{size:48,className:"mb-4 opacity-20"}),u.jsx("p",{children:"Select a revision from the list to preview."})]})})]})]})}const H_t=({onClose:e,onSave:t})=>{const[r,n]=I.useState("");return u.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:e,children:u.jsxs("div",{className:"bg-surface border border-border p-6 rounded-lg w-full max-w-sm shadow-xl",onClick:i=>i.stopPropagation(),children:[u.jsx("h3",{className:"font-bold text-text-primary mb-4",children:"New Category"}),u.jsx("input",{autoFocus:!0,className:"w-full bg-background border border-border rounded p-2 text-text-primary mb-4 focus:ring-2 focus:ring-primary outline-none",placeholder:"e.g. Installation Guides",value:r,onChange:i=>n(i.target.value),onKeyDown:i=>i.key==="Enter"&&t(r)}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{onClick:e,className:"px-3 py-1.5 text-text-secondary hover:text-text-primary",children:"Cancel"}),u.jsx("button",{onClick:()=>t(r),disabled:!r,className:"px-3 py-1.5 bg-primary text-on-primary rounded font-bold hover:bg-primary-hover disabled:opacity-50",children:"Create"})]})]})})},W_t=e=>e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""),V_t=e=>{const r=new DOMParser().parseFromString(e,"text/html");return r.querySelectorAll("h1, h2, h3").forEach(n=>{n.id||(n.id=W_t(n.textContent||""))}),r.body.innerHTML},Kee=e=>{const r=new DOMParser().parseFromString(e,"text/html"),n=[];return r.querySelectorAll("h1, h2, h3").forEach(i=>{i.id&&i.textContent&&n.push({id:i.id,text:i.textContent,level:parseInt(i.tagName.substring(1))})}),n};function q_t(){var G,ie,Ee;const{currentUser:e}=Gr(),t=(G=e==null?void 0:e.roles)==null?void 0:G.includes("Admin"),[r,n]=I.useState("list"),[i,a]=I.useState([]),[s,o]=I.useState(null),[l,c]=I.useState([]),[d,f]=I.useState(""),[p,m]=I.useState(null),[x,v]=I.useState(!1),[b,w]=I.useState(null),[k,E]=I.useState(!1),[N,P]=I.useState(""),[R,O]=I.useState(""),[D,L]=I.useState(""),[B,z]=I.useState([]),[H,te]=I.useState(""),[Y,W]=I.useState([]);I.useEffect(()=>{Z()},[]),I.useEffect(()=>{const ne=setTimeout(()=>{d?re(null,d):s&&re(s)},300);return()=>clearTimeout(ne)},[s,d]),I.useEffect(()=>{s&&f("")},[s]),I.useEffect(()=>{if(p&&b){const ne=setTimeout(()=>{const ae=document.getElementById(b);ae&&(ae.scrollIntoView({behavior:"smooth",block:"start"}),w(null))},300);return()=>clearTimeout(ne)}},[p,b]),I.useEffect(()=>{r==="read"&&p&&setTimeout(()=>{const ne=document.querySelector(".kb-read-content");ne&&(ne.querySelectorAll("img").forEach(ae=>{const me=ae.getAttribute("src");me&&!me.startsWith("http")&&(ae.src=Ia(me))}),ne.querySelectorAll("img[data-caption]").forEach(ae=>{if(ae.parentElement.tagName==="FIGURE")return;const me=ae.getAttribute("data-caption");if(!me)return;const ve=document.createElement("figure"),q=document.createElement("figcaption");q.innerText=me;const Ne=ae.getAttribute("align");Ne==="left"?(ve.style.float="left",ve.style.margin="0.5em 1.5em 1em 0"):Ne==="right"&&(ve.style.float="right",ve.style.margin="0.5em 0 1em 1.5em"),ae.parentNode.insertBefore(ve,ae),ve.appendChild(ae),ve.appendChild(q)}))},100)},[r,p]);const Z=async()=>{try{const ne=await cr.get(rr("/api/kb/categories"),{withCredentials:!0});a(ne.data),!s&&ne.data.length>0&&o(ne.data[0].id)}catch(ne){console.error(ne)}},re=async(ne,ae)=>{try{let me="/api/kb/search";if(ae)me+=`?q=${encodeURIComponent(ae)}`;else if(ne)me+=`?cat=${ne}`;else return;const ve=await cr.get(rr(me),{withCredentials:!0});c(ve.data)}catch(me){console.error(me)}},X=async ne=>{try{await cr.post(rr("/api/kb/categories"),{name:ne},{withCredentials:!0}),Re.success("Category created"),Z(),v(!1)}catch{Re.error("Failed to create category")}},Q=(ne="")=>{P(ne),O("<p>Start writing...</p>"),L(s||""),z([]),m(null),f(""),n("edit")},fe=ne=>{m(null),cr.get(rr(`/api/kb/articles/${ne.id}`),{withCredentials:!0}).then(ae=>{m(ae.data),W(Kee(ae.data.content)),n("read")})},ye=()=>{p&&(P(p.title),O(p.content||""),L(p.category_id||""),z(p.tags||[]),n("edit"))},J=async()=>{if(!N)return Re.error("Title is required");if(!D)return Re.error("Category is required");const ne=V_t(R);try{const ae={title:N,content:ne,categoryId:Number(D),isPublished:!0,tags:B};if(p!=null&&p.id){const me=await cr.put(rr(`/api/kb/articles/${p.id}`),ae,{withCredentials:!0});Re.success("Article updated"),m({...p,id:p==null?void 0:p.id,title:N,content:ne,tags:B,updated_at:me.data.updated_at})}else{const me=await cr.post(rr("/api/kb/articles"),ae,{withCredentials:!0});Re.success("Article created"),m({...me.data,author_name:e==null?void 0:e.firstName,title:N,content:ne,tags:B})}re(Number(D)),o(Number(D)),W(Kee(ne)),n("read")}catch(ae){console.error(ae),Re.error("Failed to save")}},ce=()=>{H&&!B.includes(H.trim())&&(z([...B,H.trim()]),te(""))},V=ne=>{O(ne),z((p==null?void 0:p.tags)||[]),n("edit")};return u.jsxs("div",{className:"h-full flex flex-col",children:[u.jsx("div",{className:"bg-surface-container-high p-8 rounded-xl shadow-sm mb-6 border border-outline/10 flex-shrink-0",children:u.jsxs("div",{children:[u.jsx("h1",{className:"text-4xl font-bold text-text-primary tracking-tight",children:"Knowledge Base"}),u.jsx("p",{className:"text-text-secondary mt-1 font-medium",children:"Manage documentation, guides, and internal resources."})]})}),u.jsxs("div",{className:"flex-1 flex min-h-0 bg-surface-container-high border border-outline/10 rounded-xl overflow-hidden shadow-sm relative",children:[u.jsxs("div",{className:`border-r border-outline/10 bg-surface-container-low flex flex-col transition-all duration-200 
                    ${k?"absolute inset-0 z-50 w-full":"hidden md:flex w-64"}
                `,children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center bg-surface-container-low",children:[u.jsxs("h2",{className:"font-bold text-text-primary flex items-center gap-2",children:[u.jsx(Vq,{className:"text-primary w-5 h-5"})," Library"]}),u.jsxs("div",{className:"flex items-center gap-2",children:[t&&u.jsx("button",{onClick:()=>v(!0),className:"text-primary hover:bg-primary-container p-2 rounded-full transition-colors",title:"New Category",children:u.jsx(Zl,{size:18})}),u.jsx("button",{onClick:()=>E(!1),className:"md:hidden text-text-secondary p-1",children:u.jsx(Zr,{size:20})})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:[i.length===0&&u.jsx("div",{className:"text-sm text-text-tertiary p-4 text-center",children:"No categories yet."}),i.map(ne=>u.jsxs("div",{children:[u.jsxs("button",{onClick:()=>{o(ne.id)},className:`w-full flex items-center gap-2 px-3 py-2 text-sm rounded-md transition-colors ${s===ne.id?"bg-primary-container text-primary font-bold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary"}`,children:[u.jsx(Vq,{size:16,className:s===ne.id?"text-primary":"text-text-tertiary"}),u.jsx("span",{className:"truncate",children:ne.name})]}),s===ne.id&&u.jsxs("div",{className:"ml-4 border-l border-outline/20 pl-2 mt-1 space-y-0.5",children:[l.map(ae=>u.jsx("button",{onClick:()=>{fe(ae),E(!1)},className:`block w-full text-left px-2 py-1.5 text-xs truncate rounded-md ${(p==null?void 0:p.id)===ae.id?"text-primary bg-primary-container/30 font-medium":"text-text-secondary hover:text-text-primary hover:bg-surface-container-high"}`,children:ae.title},ae.id)),l.length===0&&u.jsx("div",{className:"text-[10px] text-text-tertiary px-2 py-1 italic",children:"No articles"})]})]},ne.id))]})]}),u.jsxs("div",{className:"flex-1 flex flex-col bg-surface",children:[r==="list"&&u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"p-4 md:p-6 border-b border-outline/10 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-surface-container-high",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:()=>E(!0),className:"md:hidden text-primary hover:bg-primary/10 p-1 rounded",children:u.jsx(foe,{size:24})}),u.jsx("div",{children:d?u.jsx("h1",{className:"text-xl md:text-2xl font-bold text-text-primary",children:"Search Results"}):u.jsxs(u.Fragment,{children:[u.jsx("h1",{className:"text-xl md:text-2xl font-bold text-text-primary",children:((ie=i.find(ne=>ne.id===s))==null?void 0:ie.name)||"Library"}),u.jsxs("p",{className:"text-text-secondary text-xs md:text-sm font-medium",children:[l.length," articles"]})]})})]}),t&&s&&u.jsx("button",{onClick:()=>Q(),className:"md:hidden text-primary bg-primary/10 p-2 rounded-full",children:u.jsx(Zl,{size:20})})]}),u.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[u.jsxs("div",{className:"relative w-full md:w-64 lg:w-80",children:[u.jsx(Wo,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-tertiary",size:16}),u.jsx("input",{className:"w-full bg-surface-container-highest border-none rounded-full pl-9 pr-4 py-2 text-sm focus:ring-2 focus:ring-primary/50 outline-none transition-shadow shadow-sm",placeholder:"Search...",value:d,onChange:ne=>f(ne.target.value)})]}),t&&s&&u.jsxs("button",{onClick:()=>Q(),className:"hidden md:flex items-center gap-2 bg-primary text-on-primary px-4 py-2 rounded-full font-bold shadow-md hover:bg-primary-hover transition-colors",children:[u.jsx(Zl,{size:18})," New Article"]})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-surface",children:[t&&d&&u.jsxs("button",{onClick:()=>Q(d),className:"w-full mb-4 p-4 border border-dashed border-primary/50 bg-primary-container/20 rounded-xl flex items-center justify-center gap-2 text-primary font-bold hover:bg-primary-container/40 transition-colors",children:[u.jsx(Zl,{size:18}),'Create new article: "',d,'"']}),l.length===0?u.jsx("div",{className:"text-center py-8 text-text-tertiary",children:!t&&u.jsx("p",{children:"No articles found."})}):u.jsx("div",{className:"grid grid-cols-1 gap-4",children:l.map(ne=>u.jsxs("div",{onClick:()=>fe(ne),className:"p-5 rounded-xl border border-outline/10 bg-surface-container-high hover:border-primary hover:shadow-md transition-all cursor-pointer group",children:[u.jsx("h3",{className:"font-bold text-lg text-text-primary group-hover:text-primary mb-1",children:ne.title}),u.jsxs("div",{className:"flex items-center gap-4 text-xs text-text-secondary",children:[u.jsxs("span",{className:"font-medium",children:["Updated ",new Date(ne.updated_at).toLocaleDateString()]}),ne.tags&&ne.tags.length>0&&u.jsxs("span",{className:"flex items-center gap-1 bg-surface-container px-2 py-0.5 rounded-full",children:[u.jsx(r8,{size:12})," ",ne.tags.join(", ")]})]})]},ne.id))})]})]}),r==="read"&&p&&u.jsxs("div",{className:"flex flex-col h-full relative bg-surface",children:[u.jsxs("div",{className:"p-6 border-b border-outline/10 flex justify-between items-start bg-surface-container-high",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsxs("button",{onClick:()=>n("list"),className:"text-sm text-text-secondary hover:text-text-primary flex items-center gap-1 font-medium",children:[u.jsx(id,{size:14})," Back"]}),u.jsx("span",{className:"text-border",children:"|"}),u.jsx("span",{className:"text-xs text-primary font-bold uppercase tracking-wider bg-primary-container px-2 py-0.5 rounded",children:(Ee=i.find(ne=>ne.id===p.category_id))==null?void 0:Ee.name})]}),u.jsx("h1",{className:"text-3xl font-bold text-text-primary tracking-tight",children:p.title}),u.jsxs("p",{className:"text-xs text-text-secondary mt-2 font-medium",children:["Last updated ",new Date(p.updated_at).toLocaleDateString()]})]}),t&&u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>n("history"),className:"p-2 text-text-secondary hover:text-primary hover:bg-surface-container-highest rounded-full transition-all",title:"View History",children:u.jsx(Mx,{size:20})}),u.jsx("button",{onClick:ye,className:"p-2 text-text-secondary hover:text-primary hover:bg-surface-container-highest rounded-full transition-all",title:"Edit Article",children:u.jsx(Zg,{size:20})})]})]}),u.jsxs("div",{className:"flex-1 overflow-hidden flex bg-surface",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 flow-root",onClick:ne=>{var me;if(ne.target instanceof HTMLImageElement){window.open(ne.target.src,"_blank");return}const ae=ne.target.closest(".kb-mention");if(ae){const ve=ae.getAttribute("data-id"),q=ae.getAttribute("data-anchor");if(ve){if(Number(ve)===p.id&&q){(me=document.getElementById(q))==null||me.scrollIntoView({behavior:"smooth"});return}Number(ve)!==p.id&&(q&&w(q),fe({id:ve}))}}},children:[u.jsx("style",{children:Rve}),u.jsx("div",{className:"kb-read-content max-w-3xl mx-auto",dangerouslySetInnerHTML:{__html:p.content}})]}),Y.length>0&&u.jsxs("div",{className:"w-64 border-l border-outline/10 bg-surface-container-low p-6 hidden xl:block overflow-y-auto",children:[u.jsx("h4",{className:"font-bold text-text-secondary text-xs uppercase tracking-wider mb-4",children:"On this page"}),u.jsx("div",{className:"space-y-2 border-l border-outline/20",children:Y.map((ne,ae)=>u.jsxs("div",{className:"group flex items-center justify-between pl-3 hover:border-l hover:-ml-[1px] hover:border-primary transition-all",children:[u.jsx("a",{href:`#${ne.id}`,className:`block text-xs hover:text-primary truncate ${ne.level===3?"ml-2 text-text-tertiary":"text-text-secondary font-medium"}`,children:ne.text}),u.jsx("button",{onClick:me=>{me.preventDefault(),navigator.clipboard.writeText(`${window.location.href}#${ne.id}`),Re.success("Section link copied!")},className:"opacity-0 group-hover:opacity-100 p-1 text-text-tertiary hover:text-primary transition-opacity",title:"Copy Link to Section",children:u.jsx(Fx,{size:12})})]},ae))})]})]})]}),r==="history"&&p&&u.jsx(z_t,{articleId:p.id,onClose:()=>n("read"),onRestore:V}),r==="edit"&&u.jsxs("div",{className:"flex flex-col h-full bg-surface",children:[u.jsxs("div",{className:"p-6 border-b border-outline/10 flex justify-between items-start bg-surface-container-high",children:[u.jsxs("div",{className:"w-full mr-4",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2 h-6",children:[u.jsxs("button",{onClick:()=>n(p?"read":"list"),className:"text-sm text-text-secondary hover:text-text-primary flex items-center gap-1 font-medium",children:[u.jsx(id,{size:14})," Cancel"]}),u.jsx("span",{className:"text-border",children:"|"}),u.jsxs("select",{value:D,onChange:ne=>L(ne.target.value),className:"bg-transparent text-xs font-bold uppercase tracking-wider text-primary border-none outline-none cursor-pointer hover:bg-primary-container rounded px-1 -ml-1 transition-colors",children:[u.jsx("option",{value:"",disabled:!0,children:"Select Category"}),i.map(ne=>u.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]}),u.jsx("input",{type:"text",placeholder:"Article Title",className:"w-full text-3xl font-bold bg-transparent border-none outline-none placeholder-text-tertiary text-text-primary p-0 m-0 focus:ring-0 tracking-tight",value:N,onChange:ne=>P(ne.target.value)}),u.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[B.map(ne=>u.jsxs("span",{className:"text-xs bg-primary-container text-primary px-2 py-0.5 rounded-full flex items-center gap-1 font-medium",children:[ne,u.jsx("button",{onClick:()=>z(B.filter(ae=>ae!==ne)),children:u.jsx(Zr,{size:12})})]},ne)),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(r8,{size:14,className:"text-text-tertiary"}),u.jsx("input",{className:"bg-transparent border-none outline-none text-xs text-text-primary placeholder-text-tertiary min-w-[80px]",placeholder:"Add tag...",value:H,onChange:ne=>te(ne.target.value),onKeyDown:ne=>ne.key==="Enter"&&ce()})]})]})]}),u.jsx("div",{className:"flex-shrink-0",children:u.jsxs("button",{onClick:J,className:"flex items-center gap-2 bg-primary text-on-primary px-6 py-2 rounded-full font-bold shadow-md hover:bg-primary-hover transition-colors",children:[u.jsx(vs,{size:18})," Save"]})})]}),u.jsx("div",{className:"flex-1 overflow-hidden p-0 md:p-8 w-full flex flex-col",children:u.jsx(ahe,{content:R,onChange:O})})]})]})]}),x&&u.jsx(H_t,{onClose:()=>v(!1),onSave:X})]})}function G_t(){const[e,t]=I.useState(""),[r,n]=I.useState(""),i=()=>{let a=e.trim();if(a){!a.startsWith("http://")&&!a.startsWith("https://")&&(a=`https://${a}`),a=a.replace(/\/$/,"");try{new URL(a)}catch{n("Invalid URL format. Must be like: https://flooring.mycompany.com");return}console.log(" SAVING SERVER URL:",a),localStorage.setItem(Y6,a),window.location.reload()}};return u.jsx("div",{className:"min-h-screen bg-neutral-950 flex items-center justify-center p-4 font-sans text-neutral-200",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-neutral-100 mb-2 tracking-tight",children:"Connect to Server"}),u.jsx("p",{className:"text-neutral-400",children:"Enter your server address to connect."})]}),u.jsxs("div",{className:"bg-neutral-900 border border-neutral-800 rounded-2xl shadow-2xl p-6",children:[u.jsx("label",{className:"block text-sm font-medium text-neutral-400 mb-1.5",children:"Server URL"}),u.jsx("input",{type:"url",value:e,onChange:a=>{t(a.target.value),n("")},placeholder:"https://subfloor.mycompany.com",className:"w-full bg-neutral-800/50 border border-neutral-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-transparent placeholder-neutral-500"}),r&&u.jsx("p",{className:"text-red-400 text-sm mt-2",children:r}),u.jsx("button",{onClick:i,className:"mt-6 w-full bg-primary hover:bg-primary-hover text-on-primary font-semibold py-3 px-6 rounded-full transition-all shadow-lg hover:shadow-xl flex items-center justify-center",children:"Connect"}),u.jsx("button",{onClick:()=>{localStorage.removeItem(Y6),window.location.reload()},className:"mt-4 w-full text-neutral-500 text-sm hover:text-neutral-300 transition-colors",children:"Clear Saved Server"})]})]})})}const K_t=()=>{const e=pu(),t=Ol();return I.useEffect(()=>{var i;if(!((i=window.Capacitor)==null?void 0:i.isNativePlatform()))return;const n=QA.addListener("backButton",({canGoBack:a})=>{const s=document.querySelector('[aria-label="Close modal"]');if(s&&s.offsetParent!==null){s.click();return}const o=document.getElementById("sidebar-overlay");if(o){o.click();return}t.pathname==="/"||t.pathname==="/auth"?QA.exitApp():e(-1)});return()=>{n.then(a=>a.remove())}},[e,t]),null},vN=(e,t)=>{let r=parseInt(e.replace("#",""),16),n=Math.round(2.55*t),i=(r>>16)-n,a=(r>>8&255)-n,s=(r&255)-n;return"#"+(16777216+(i<255?i<1?0:i:255)*65536+(a<255?a<1?0:a:255)*256+(s<255?s<1?0:s:255)).toString(16).slice(1)},wM=e=>{const t=parseInt(e.substr(1,2),16),r=parseInt(e.substr(3,2),16),n=parseInt(e.substr(5,2),16);return(t*299+r*587+n*114)/1e3>=128?"#000000":"#ffffff"},X_t=()=>{const{systemBranding:e}=Gr();return Hr.useEffect(()=>{if(e!=null&&e.faviconUrl){const r=document.querySelector("link[rel*='icon']")||document.createElement("link");r.type="image/x-icon",r.rel="icon",r.href=Ia(e.faviconUrl),document.getElementsByTagName("head")[0].appendChild(r)}e!=null&&e.companyName&&(document.title=`Subfloor for ${e.companyName}`);const t=document.documentElement;e!=null&&e.primaryColor&&(t.style.setProperty("--color-primary",e.primaryColor),t.style.setProperty("--color-primary-hover",vN(e.primaryColor,10)),t.style.setProperty("--color-on-primary",wM(e.primaryColor))),e!=null&&e.secondaryColor&&(t.style.setProperty("--color-secondary",e.secondaryColor),t.style.setProperty("--color-secondary-hover",vN(e.secondaryColor,10)),t.style.setProperty("--color-on-secondary",wM(e.secondaryColor))),e!=null&&e.accentColor&&(t.style.setProperty("--color-accent",e.accentColor),t.style.setProperty("--color-accent-hover",vN(e.accentColor,10)),t.style.setProperty("--color-on-accent",wM(e.accentColor))),e!=null&&e.backgroundColor&&t.style.setProperty("--color-background",e.backgroundColor),e!=null&&e.surfaceColor&&t.style.setProperty("--color-surface",e.surfaceColor),e!=null&&e.textPrimaryColor&&t.style.setProperty("--color-text-primary",e.textPrimaryColor),e!=null&&e.textSecondaryColor&&t.style.setProperty("--color-text-secondary",e.textSecondaryColor),e!=null&&e.surfaceColor&&t.style.setProperty("--color-border",vN(e.surfaceColor,-10))},[e]),null};function Y_t(){var o;const[e,t]=I.useState(null),[r,n]=I.useState(!1),i=u.jsxs(u.Fragment,{children:[u.jsx(aje,{position:"bottom-center"}),u.jsx(K8e,{})]}),a=(o=window.Capacitor)==null?void 0:o.isNativePlatform(),s=!!localStorage.getItem("subfloor_server_url");return I.useEffect(()=>{if(a&&!s){t(null);return}fetch(rr("/api/setup/status")).then(l=>l.json()).then(l=>t(l.initialized)).catch(l=>{console.error("Failed to check setup status",l),a?n(!0):t(!0)})},[a,s]),a&&(!s||r)?u.jsxs(u.Fragment,{children:[i,u.jsx(G_t,{})]}):e===null?u.jsxs("div",{className:"flex items-center justify-center h-screen bg-slate-950",children:[i,u.jsx(I0,{className:"w-8 h-8 text-blue-500 animate-spin"})]}):e===!1?u.jsx($_t,{}):u.jsxs(j6e,{children:[i,u.jsx(pBe,{}),u.jsx(X_t,{}),u.jsx(q8e,{children:u.jsxs(Zne,{children:[u.jsx(K_t,{}),u.jsxs(Qne,{children:[mae.getSuperTokensRoutesForReactRouterDom(yAe,[gae.EmailPasswordPreBuiltUI]),u.jsxs(da,{path:"/",element:u.jsx(W0.SessionAuth,{children:u.jsx(sFe,{})}),children:[u.jsx(da,{index:!0,element:u.jsx(nBe,{})}),u.jsx(da,{path:"customers",element:u.jsx(gBe,{})}),u.jsx(da,{path:"customers/:customerId",element:u.jsx(xBe,{})}),u.jsx(da,{path:"projects/:projectId",element:u.jsx(mHe,{})}),u.jsx(da,{path:"samples",element:u.jsx(tWe,{})}),u.jsx(da,{path:"reports",element:u.jsx(Igt,{})}),u.jsx(da,{path:"import",element:u.jsx(B_t,{})}),u.jsx(da,{path:"messages",element:u.jsx(Gee,{})}),u.jsx(da,{path:"messages/:partnerId",element:u.jsx(Gee,{})}),u.jsx(da,{path:"kb",element:u.jsx(q_t,{})}),u.jsx(da,{path:"vendors",element:u.jsx(Bet,{})}),u.jsx(da,{path:"vendors/:vendorId",element:u.jsx(zet,{})}),u.jsx(da,{path:"orders",element:u.jsx(Wet,{})}),u.jsx(da,{path:"installers",element:u.jsx(nWe,{})}),u.jsx(da,{path:"installers/:installerId",element:u.jsx(aWe,{})}),u.jsx(da,{path:"quotes/:quoteId",element:u.jsx(sWe,{})}),u.jsx(da,{path:"calendar",element:u.jsx(LHe,{})}),u.jsx(da,{path:"settings",element:u.jsx(Let,{})})]})]})]})})]})}var G$={},bu={};Object.defineProperty(bu,"__esModule",{value:!0});var sm=mn,Q_t=ja,J_t=Tx;bu.SuperTokensWrapper=sm.SuperTokensWrapper;bu.changeLanguage=sm.changeLanguage;bu.default=sm.SuperTokensAPIWrapper;bu.init=sm.init;bu.isRecipeInitialized=sm.isRecipeInitialized;bu.loadTranslation=sm.loadTranslation;bu.redirectToAuth=sm.redirectToAuth;bu.useUserContext=sm.useUserContext;bu.getTranslationFunction=Q_t.getTranslationFunction;bu.useTranslation=J_t.useTranslation;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(bu)})(G$);const Z_t=Bs(G$);var jve={},wu={};Object.defineProperty(wu,"__esModule",{value:!0});var zn=Mi,eNt=a4,Np=s4,Ef=function(){function e(){}return e.init=function(t){return Np.EmailPassword.init(t)},e.signOut=function(t){return zn.__awaiter(this,void 0,void 0,function(){return zn.__generator(this,function(r){return[2,Np.EmailPassword.getInstanceOrThrow().signOut({userContext:zn.getNormalisedUserContext(t==null?void 0:t.userContext)})]})})},e.submitNewPassword=function(t){return zn.__awaiter(this,void 0,void 0,function(){return zn.__generator(this,function(r){return[2,Np.EmailPassword.getInstanceOrThrow().webJSRecipe.submitNewPassword(zn.__assign(zn.__assign({},t),{userContext:zn.getNormalisedUserContext(t.userContext)}))]})})},e.sendPasswordResetEmail=function(t){return zn.__awaiter(this,void 0,void 0,function(){return zn.__generator(this,function(r){return[2,Np.EmailPassword.getInstanceOrThrow().webJSRecipe.sendPasswordResetEmail(zn.__assign(zn.__assign({},t),{userContext:zn.getNormalisedUserContext(t.userContext)}))]})})},e.signUp=function(t){return zn.__awaiter(this,void 0,void 0,function(){return zn.__generator(this,function(r){return[2,Np.EmailPassword.getInstanceOrThrow().webJSRecipe.signUp(zn.__assign(zn.__assign({},t),{userContext:zn.getNormalisedUserContext(t.userContext)}))]})})},e.signIn=function(t){return zn.__awaiter(this,void 0,void 0,function(){return zn.__generator(this,function(r){return[2,Np.EmailPassword.getInstanceOrThrow().webJSRecipe.signIn(zn.__assign(zn.__assign({},t),{userContext:zn.getNormalisedUserContext(t.userContext)}))]})})},e.doesEmailExist=function(t){return zn.__awaiter(this,void 0,void 0,function(){return zn.__generator(this,function(r){return[2,Np.EmailPassword.getInstanceOrThrow().webJSRecipe.doesEmailExist(zn.__assign(zn.__assign({},t),{userContext:zn.getNormalisedUserContext(t.userContext)}))]})})},e.getResetPasswordTokenFromURL=function(t){return Np.EmailPassword.getInstanceOrThrow().webJSRecipe.getResetPasswordTokenFromURL(zn.__assign(zn.__assign({},t),{userContext:zn.getNormalisedUserContext(t==null?void 0:t.userContext)}))},e.ComponentsOverrideProvider=eNt.Provider,e}(),tNt=Ef.init,rNt=Ef.signOut,nNt=Ef.submitNewPassword,iNt=Ef.sendPasswordResetEmail,aNt=Ef.signUp,sNt=Ef.signIn,oNt=Ef.doesEmailExist,lNt=Ef.getResetPasswordTokenFromURL,cNt=Ef.ComponentsOverrideProvider;wu.EmailPasswordComponentsOverrideProvider=cNt;wu.default=Ef;wu.doesEmailExist=oNt;wu.getResetPasswordTokenFromURL=lNt;wu.init=tNt;wu.sendPasswordResetEmail=iNt;wu.signIn=sNt;wu.signOut=rNt;wu.signUp=aNt;wu.submitNewPassword=nNt;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(wu)})(jve);const uNt=Bs(jve);console.log(" SuperTokens Config Loaded");const Dve=v7()||window.location.origin,Mve=window.location.origin;console.log(" SuperTokens API:",Dve);console.log(" SuperTokens Website:",Mve);Z_t.init({appInfo:{appName:"Subfloor",apiDomain:Dve,websiteDomain:Mve,apiBasePath:"/api/auth",websiteBasePath:"/auth"},recipeList:[uNt.init({useShadowDom:!1,disableSignUp:!0,style:{container:{border:"1px solid var(--color-border)",backgroundColor:"var(--color-surface)",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",borderRadius:"0.5rem",fontFamily:"inherit"},headerTitle:{color:"var(--color-text-primary)",fontFamily:"inherit"},label:{color:"var(--color-text-secondary)"},input:{backgroundColor:"var(--color-background)",color:"var(--color-text-primary)",border:"1px solid var(--color-border)"},button:{backgroundColor:"var(--color-primary)",color:"var(--color-on-primary)",borderRadius:"0.5rem",fontWeight:"700",border:"none",textTransform:"uppercase"},link:{color:"var(--color-accent)"},superTokensBranding:{display:"none"}}}),z4e.init()]});const dNt=new Aje({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1,refetchOnWindowFocus:!0}}}),Fve=document.getElementById("root");if(!Fve)throw new Error("Could not find root element to mount to");const fNt=SM.createRoot(Fve);fNt.render(u.jsx(Hr.StrictMode,{children:u.jsx(Tje,{client:dNt,children:u.jsx(G$.SuperTokensWrapper,{children:u.jsx(Y_t,{})})})}));export{noe as W,jNt as a,C4 as r};
