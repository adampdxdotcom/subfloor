var uCe=Object.defineProperty;var fW=e=>{throw TypeError(e)};var dCe=(e,t,r)=>t in e?uCe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var HR=(e,t,r)=>dCe(e,typeof t!="symbol"?t+"":t,r),WR=(e,t,r)=>t.has(e)||fW("Cannot "+r);var Le=(e,t,r)=>(WR(e,t,"read from private field"),r?r.call(e):t.get(e)),hr=(e,t,r)=>t.has(e)?fW("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Wt=(e,t,r,n)=>(WR(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),un=(e,t,r)=>(WR(e,t,"access private method"),r);var Xk=(e,t,r,n)=>({set _(i){Wt(e,t,i,r)},get _(){return Le(e,t,n)}});function V5(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Ve=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function fCe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var Nte={exports:{}},OO={},Ate={exports:{}},Nn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kE=Symbol.for("react.element"),hCe=Symbol.for("react.portal"),pCe=Symbol.for("react.fragment"),mCe=Symbol.for("react.strict_mode"),gCe=Symbol.for("react.profiler"),xCe=Symbol.for("react.provider"),vCe=Symbol.for("react.context"),yCe=Symbol.for("react.forward_ref"),bCe=Symbol.for("react.suspense"),wCe=Symbol.for("react.memo"),SCe=Symbol.for("react.lazy"),hW=Symbol.iterator;function ECe(e){return e===null||typeof e!="object"?null:(e=hW&&e[hW]||e["@@iterator"],typeof e=="function"?e:null)}var Tte={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ite=Object.assign,Ote={};function Zy(e,t,r){this.props=e,this.context=t,this.refs=Ote,this.updater=r||Tte}Zy.prototype.isReactComponent={};Zy.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zy.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Pte(){}Pte.prototype=Zy.prototype;function q5(e,t,r){this.props=e,this.context=t,this.refs=Ote,this.updater=r||Tte}var G5=q5.prototype=new Pte;G5.constructor=q5;Ite(G5,Zy.prototype);G5.isPureReactComponent=!0;var pW=Array.isArray,Rte=Object.prototype.hasOwnProperty,K5={current:null},jte={key:!0,ref:!0,__self:!0,__source:!0};function Dte(e,t,r){var n,i={},a=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(a=""+t.key),t)Rte.call(t,n)&&!jte.hasOwnProperty(n)&&(i[n]=t[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:kE,type:e,key:a,ref:s,props:i,_owner:K5.current}}function CCe(e,t){return{$$typeof:kE,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function X5(e){return typeof e=="object"&&e!==null&&e.$$typeof===kE}function kCe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var mW=/\/+/g;function VR(e,t){return typeof e=="object"&&e!==null&&e.key!=null?kCe(""+e.key):t.toString(36)}function jN(e,t,r,n,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case kE:case hCe:s=!0}}if(s)return s=e,i=i(s),e=n===""?"."+VR(s,0):n,pW(i)?(r="",e!=null&&(r=e.replace(mW,"$&/")+"/"),jN(i,t,r,"",function(c){return c})):i!=null&&(X5(i)&&(i=CCe(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(mW,"$&/")+"/")+e)),t.push(i)),1;if(s=0,n=n===""?".":n+":",pW(e))for(var o=0;o<e.length;o++){a=e[o];var l=n+VR(a,o);s+=jN(a,t,r,l,i)}else if(l=ECe(e),typeof l=="function")for(e=l.call(e),o=0;!(a=e.next()).done;)a=a.value,l=n+VR(a,o++),s+=jN(a,t,r,l,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Yk(e,t,r){if(e==null)return e;var n=[],i=0;return jN(e,n,"","",function(a){return t.call(r,a,i++)}),n}function _Ce(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var el={current:null},DN={transition:null},NCe={ReactCurrentDispatcher:el,ReactCurrentBatchConfig:DN,ReactCurrentOwner:K5};function Mte(){throw Error("act(...) is not supported in production builds of React.")}Nn.Children={map:Yk,forEach:function(e,t,r){Yk(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Yk(e,function(){t++}),t},toArray:function(e){return Yk(e,function(t){return t})||[]},only:function(e){if(!X5(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Nn.Component=Zy;Nn.Fragment=pCe;Nn.Profiler=gCe;Nn.PureComponent=q5;Nn.StrictMode=mCe;Nn.Suspense=bCe;Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NCe;Nn.act=Mte;Nn.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Ite({},e.props),i=e.key,a=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,s=K5.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)Rte.call(t,l)&&!jte.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:kE,type:e.type,key:i,ref:a,props:n,_owner:s}};Nn.createContext=function(e){return e={$$typeof:vCe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:xCe,_context:e},e.Consumer=e};Nn.createElement=Dte;Nn.createFactory=function(e){var t=Dte.bind(null,e);return t.type=e,t};Nn.createRef=function(){return{current:null}};Nn.forwardRef=function(e){return{$$typeof:yCe,render:e}};Nn.isValidElement=X5;Nn.lazy=function(e){return{$$typeof:SCe,_payload:{_status:-1,_result:e},_init:_Ce}};Nn.memo=function(e,t){return{$$typeof:wCe,type:e,compare:t===void 0?null:t}};Nn.startTransition=function(e){var t=DN.transition;DN.transition={};try{e()}finally{DN.transition=t}};Nn.unstable_act=Mte;Nn.useCallback=function(e,t){return el.current.useCallback(e,t)};Nn.useContext=function(e){return el.current.useContext(e)};Nn.useDebugValue=function(){};Nn.useDeferredValue=function(e){return el.current.useDeferredValue(e)};Nn.useEffect=function(e,t){return el.current.useEffect(e,t)};Nn.useId=function(){return el.current.useId()};Nn.useImperativeHandle=function(e,t,r){return el.current.useImperativeHandle(e,t,r)};Nn.useInsertionEffect=function(e,t){return el.current.useInsertionEffect(e,t)};Nn.useLayoutEffect=function(e,t){return el.current.useLayoutEffect(e,t)};Nn.useMemo=function(e,t){return el.current.useMemo(e,t)};Nn.useReducer=function(e,t,r){return el.current.useReducer(e,t,r)};Nn.useRef=function(e){return el.current.useRef(e)};Nn.useState=function(e){return el.current.useState(e)};Nn.useSyncExternalStore=function(e,t,r){return el.current.useSyncExternalStore(e,t,r)};Nn.useTransition=function(){return el.current.useTransition()};Nn.version="18.3.1";Ate.exports=Nn;var I=Ate.exports;const Vr=Vs(I),ay=V5({__proto__:null,default:Vr},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ACe=I,TCe=Symbol.for("react.element"),ICe=Symbol.for("react.fragment"),OCe=Object.prototype.hasOwnProperty,PCe=ACe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,RCe={key:!0,ref:!0,__self:!0,__source:!0};function Fte(e,t,r){var n,i={},a=null,s=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)OCe.call(t,n)&&!RCe.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:TCe,type:e,key:a,ref:s,props:i,_owner:PCe.current}}OO.Fragment=ICe;OO.jsx=Fte;OO.jsxs=Fte;Nte.exports=OO;var u=Nte.exports,$M={},Lte={exports:{}},vc={},Bte={exports:{}},Ute={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(J,Y){var pe=J.length;J.push(Y);e:for(;0<pe;){var _e=pe-1>>>1,ee=J[_e];if(0<i(ee,Y))J[_e]=Y,J[pe]=ee,pe=_e;else break e}}function r(J){return J.length===0?null:J[0]}function n(J){if(J.length===0)return null;var Y=J[0],pe=J.pop();if(pe!==Y){J[0]=pe;e:for(var _e=0,ee=J.length,de=ee>>>1;_e<de;){var G=2*(_e+1)-1,q=J[G],ne=G+1,Se=J[ne];if(0>i(q,pe))ne<ee&&0>i(Se,q)?(J[_e]=Se,J[ne]=pe,_e=ne):(J[_e]=q,J[G]=pe,_e=G);else if(ne<ee&&0>i(Se,pe))J[_e]=Se,J[ne]=pe,_e=ne;else break e}}return Y}function i(J,Y){var pe=J.sortIndex-Y.sortIndex;return pe!==0?pe:J.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],c=[],d=1,f=null,p=3,m=!1,x=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(J){for(var Y=r(c);Y!==null;){if(Y.callback===null)n(c);else if(Y.startTime<=J)n(c),Y.sortIndex=Y.expirationTime,t(l,Y);else break;Y=r(c)}}function A(J){if(y=!1,C(J),!x)if(r(l)!==null)x=!0,Q(j);else{var Y=r(c);Y!==null&&te(A,Y.startTime-J)}}function j(J,Y){x=!1,y&&(y=!1,S(D),D=-1),m=!0;var pe=p;try{for(C(Y),f=r(l);f!==null&&(!(f.expirationTime>Y)||J&&!H());){var _e=f.callback;if(typeof _e=="function"){f.callback=null,p=f.priorityLevel;var ee=_e(f.expirationTime<=Y);Y=e.unstable_now(),typeof ee=="function"?f.callback=ee:f===r(l)&&n(l),C(Y)}else n(l);f=r(l)}if(f!==null)var de=!0;else{var G=r(c);G!==null&&te(A,G.startTime-Y),de=!1}return de}finally{f=null,p=pe,m=!1}}var P=!1,O=null,D=-1,L=5,B=-1;function H(){return!(e.unstable_now()-B<L)}function z(){if(O!==null){var J=e.unstable_now();B=J;var Y=!0;try{Y=O(!0,J)}finally{Y?ie():(P=!1,O=null)}}else P=!1}var ie;if(typeof _=="function")ie=function(){_(z)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,W=X.port2;X.port1.onmessage=z,ie=function(){W.postMessage(null)}}else ie=function(){b(z,0)};function Q(J){O=J,P||(P=!0,ie())}function te(J,Y){D=b(function(){J(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_continueExecution=function(){x||m||(x=!0,Q(j))},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(J){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var pe=p;p=Y;try{return J()}finally{p=pe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(J,Y){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var pe=p;p=J;try{return Y()}finally{p=pe}},e.unstable_scheduleCallback=function(J,Y,pe){var _e=e.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?_e+pe:_e):pe=_e,J){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=pe+ee,J={id:d++,callback:Y,priorityLevel:J,startTime:pe,expirationTime:ee,sortIndex:-1},pe>_e?(J.sortIndex=pe,t(c,J),r(l)===null&&J===r(c)&&(y?(S(D),D=-1):y=!0,te(A,pe-_e))):(J.sortIndex=ee,t(l,J),x||m||(x=!0,Q(j))),J},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(J){var Y=p;return function(){var pe=p;p=Y;try{return J.apply(this,arguments)}finally{p=pe}}}})(Ute);Bte.exports=Ute;var jCe=Bte.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DCe=I,hc=jCe;function jt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $te=new Set,nS={};function Px(e,t){sy(e,t),sy(e+"Capture",t)}function sy(e,t){for(nS[e]=t,e=0;e<t.length;e++)$te.add(t[e])}var Mh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zM=Object.prototype.hasOwnProperty,MCe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gW={},xW={};function FCe(e){return zM.call(xW,e)?!0:zM.call(gW,e)?!1:MCe.test(e)?xW[e]=!0:(gW[e]=!0,!1)}function LCe(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function BCe(e,t,r,n){if(t===null||typeof t>"u"||LCe(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function tl(e,t,r,n,i,a,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var Ws={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ws[e]=new tl(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ws[t]=new tl(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ws[e]=new tl(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ws[e]=new tl(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ws[e]=new tl(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ws[e]=new tl(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ws[e]=new tl(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ws[e]=new tl(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ws[e]=new tl(e,5,!1,e.toLowerCase(),null,!1,!1)});var Y5=/[\-:]([a-z])/g;function Q5(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Y5,Q5);Ws[t]=new tl(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Y5,Q5);Ws[t]=new tl(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Y5,Q5);Ws[t]=new tl(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ws[e]=new tl(e,1,!1,e.toLowerCase(),null,!1,!1)});Ws.xlinkHref=new tl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ws[e]=new tl(e,1,!1,e.toLowerCase(),null,!0,!0)});function J5(e,t,r,n){var i=Ws.hasOwnProperty(t)?Ws[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(BCe(t,r,i,n)&&(r=null),n||i===null?FCe(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var rp=DCe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qk=Symbol.for("react.element"),cv=Symbol.for("react.portal"),uv=Symbol.for("react.fragment"),Z5=Symbol.for("react.strict_mode"),HM=Symbol.for("react.profiler"),zte=Symbol.for("react.provider"),Hte=Symbol.for("react.context"),eL=Symbol.for("react.forward_ref"),WM=Symbol.for("react.suspense"),VM=Symbol.for("react.suspense_list"),tL=Symbol.for("react.memo"),Wp=Symbol.for("react.lazy"),Wte=Symbol.for("react.offscreen"),vW=Symbol.iterator;function hw(e){return e===null||typeof e!="object"?null:(e=vW&&e[vW]||e["@@iterator"],typeof e=="function"?e:null)}var Xi=Object.assign,qR;function Qw(e){if(qR===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);qR=t&&t[1]||""}return`
`+qR+e}var GR=!1;function KR(e,t){if(!e||GR)return"";GR=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),a=n.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=o);break}}}finally{GR=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Qw(e):""}function UCe(e){switch(e.tag){case 5:return Qw(e.type);case 16:return Qw("Lazy");case 13:return Qw("Suspense");case 19:return Qw("SuspenseList");case 0:case 2:case 15:return e=KR(e.type,!1),e;case 11:return e=KR(e.type.render,!1),e;case 1:return e=KR(e.type,!0),e;default:return""}}function qM(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case uv:return"Fragment";case cv:return"Portal";case HM:return"Profiler";case Z5:return"StrictMode";case WM:return"Suspense";case VM:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Hte:return(e.displayName||"Context")+".Consumer";case zte:return(e._context.displayName||"Context")+".Provider";case eL:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case tL:return t=e.displayName||null,t!==null?t:qM(e.type)||"Memo";case Wp:t=e._payload,e=e._init;try{return qM(e(t))}catch{}}return null}function $Ce(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qM(t);case 8:return t===Z5?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function D0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Vte(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zCe(e){var t=Vte(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,a.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Jk(e){e._valueTracker||(e._valueTracker=zCe(e))}function qte(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Vte(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function vA(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function GM(e,t){var r=t.checked;return Xi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function yW(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=D0(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Gte(e,t){t=t.checked,t!=null&&J5(e,"checked",t,!1)}function KM(e,t){Gte(e,t);var r=D0(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?XM(e,t.type,r):t.hasOwnProperty("defaultValue")&&XM(e,t.type,D0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function bW(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function XM(e,t,r){(t!=="number"||vA(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Jw=Array.isArray;function Nv(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+D0(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function YM(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(jt(91));return Xi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function wW(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(jt(92));if(Jw(r)){if(1<r.length)throw Error(jt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:D0(r)}}function Kte(e,t){var r=D0(t.value),n=D0(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function SW(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Xte(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function QM(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Xte(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Zk,Yte=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Zk=Zk||document.createElement("div"),Zk.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Zk.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function iS(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var g2={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},HCe=["Webkit","ms","Moz","O"];Object.keys(g2).forEach(function(e){HCe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),g2[t]=g2[e]})});function Qte(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||g2.hasOwnProperty(e)&&g2[e]?(""+t).trim():t+"px"}function Jte(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Qte(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var WCe=Xi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function JM(e,t){if(t){if(WCe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(jt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(jt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(jt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(jt(62))}}function ZM(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var e6=null;function rL(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var t6=null,Av=null,Tv=null;function EW(e){if(e=AE(e)){if(typeof t6!="function")throw Error(jt(280));var t=e.stateNode;t&&(t=MO(t),t6(e.stateNode,e.type,t))}}function Zte(e){Av?Tv?Tv.push(e):Tv=[e]:Av=e}function ere(){if(Av){var e=Av,t=Tv;if(Tv=Av=null,EW(e),t)for(e=0;e<t.length;e++)EW(t[e])}}function tre(e,t){return e(t)}function rre(){}var XR=!1;function nre(e,t,r){if(XR)return e(t,r);XR=!0;try{return tre(e,t,r)}finally{XR=!1,(Av!==null||Tv!==null)&&(rre(),ere())}}function aS(e,t){var r=e.stateNode;if(r===null)return null;var n=MO(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(jt(231,t,typeof r));return r}var r6=!1;if(Mh)try{var pw={};Object.defineProperty(pw,"passive",{get:function(){r6=!0}}),window.addEventListener("test",pw,pw),window.removeEventListener("test",pw,pw)}catch{r6=!1}function VCe(e,t,r,n,i,a,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var x2=!1,yA=null,bA=!1,n6=null,qCe={onError:function(e){x2=!0,yA=e}};function GCe(e,t,r,n,i,a,s,o,l){x2=!1,yA=null,VCe.apply(qCe,arguments)}function KCe(e,t,r,n,i,a,s,o,l){if(GCe.apply(this,arguments),x2){if(x2){var c=yA;x2=!1,yA=null}else throw Error(jt(198));bA||(bA=!0,n6=c)}}function Rx(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function ire(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function CW(e){if(Rx(e)!==e)throw Error(jt(188))}function XCe(e){var t=e.alternate;if(!t){if(t=Rx(e),t===null)throw Error(jt(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return CW(i),e;if(a===n)return CW(i),t;a=a.sibling}throw Error(jt(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,o=i.child;o;){if(o===r){s=!0,r=i,n=a;break}if(o===n){s=!0,n=i,r=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===r){s=!0,r=a,n=i;break}if(o===n){s=!0,n=a,r=i;break}o=o.sibling}if(!s)throw Error(jt(189))}}if(r.alternate!==n)throw Error(jt(190))}if(r.tag!==3)throw Error(jt(188));return r.stateNode.current===r?e:t}function are(e){return e=XCe(e),e!==null?sre(e):null}function sre(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=sre(e);if(t!==null)return t;e=e.sibling}return null}var ore=hc.unstable_scheduleCallback,kW=hc.unstable_cancelCallback,YCe=hc.unstable_shouldYield,QCe=hc.unstable_requestPaint,wa=hc.unstable_now,JCe=hc.unstable_getCurrentPriorityLevel,nL=hc.unstable_ImmediatePriority,lre=hc.unstable_UserBlockingPriority,wA=hc.unstable_NormalPriority,ZCe=hc.unstable_LowPriority,cre=hc.unstable_IdlePriority,PO=null,nf=null;function eke(e){if(nf&&typeof nf.onCommitFiberRoot=="function")try{nf.onCommitFiberRoot(PO,e,void 0,(e.current.flags&128)===128)}catch{}}var ad=Math.clz32?Math.clz32:nke,tke=Math.log,rke=Math.LN2;function nke(e){return e>>>=0,e===0?32:31-(tke(e)/rke|0)|0}var e_=64,t_=4194304;function Zw(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function SA(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,s=r&268435455;if(s!==0){var o=s&~i;o!==0?n=Zw(o):(a&=s,a!==0&&(n=Zw(a)))}else s=r&~i,s!==0?n=Zw(s):a!==0&&(n=Zw(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ad(t),i=1<<r,n|=e[r],t&=~i;return n}function ike(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ake(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-ad(a),o=1<<s,l=i[s];l===-1?(!(o&r)||o&n)&&(i[s]=ike(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}function i6(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ure(){var e=e_;return e_<<=1,!(e_&4194240)&&(e_=64),e}function YR(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function _E(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ad(t),e[t]=r}function ske(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-ad(r),a=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~a}}function iL(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ad(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var oi=0;function dre(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var fre,aL,hre,pre,mre,a6=!1,r_=[],w0=null,S0=null,E0=null,sS=new Map,oS=new Map,Jp=[],oke="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _W(e,t){switch(e){case"focusin":case"focusout":w0=null;break;case"dragenter":case"dragleave":S0=null;break;case"mouseover":case"mouseout":E0=null;break;case"pointerover":case"pointerout":sS.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":oS.delete(t.pointerId)}}function mw(e,t,r,n,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},t!==null&&(t=AE(t),t!==null&&aL(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function lke(e,t,r,n,i){switch(t){case"focusin":return w0=mw(w0,e,t,r,n,i),!0;case"dragenter":return S0=mw(S0,e,t,r,n,i),!0;case"mouseover":return E0=mw(E0,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return sS.set(a,mw(sS.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,oS.set(a,mw(oS.get(a)||null,e,t,r,n,i)),!0}return!1}function gre(e){var t=rg(e.target);if(t!==null){var r=Rx(t);if(r!==null){if(t=r.tag,t===13){if(t=ire(r),t!==null){e.blockedOn=t,mre(e.priority,function(){hre(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function MN(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=s6(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);e6=n,r.target.dispatchEvent(n),e6=null}else return t=AE(r),t!==null&&aL(t),e.blockedOn=r,!1;t.shift()}return!0}function NW(e,t,r){MN(e)&&r.delete(t)}function cke(){a6=!1,w0!==null&&MN(w0)&&(w0=null),S0!==null&&MN(S0)&&(S0=null),E0!==null&&MN(E0)&&(E0=null),sS.forEach(NW),oS.forEach(NW)}function gw(e,t){e.blockedOn===t&&(e.blockedOn=null,a6||(a6=!0,hc.unstable_scheduleCallback(hc.unstable_NormalPriority,cke)))}function lS(e){function t(i){return gw(i,e)}if(0<r_.length){gw(r_[0],e);for(var r=1;r<r_.length;r++){var n=r_[r];n.blockedOn===e&&(n.blockedOn=null)}}for(w0!==null&&gw(w0,e),S0!==null&&gw(S0,e),E0!==null&&gw(E0,e),sS.forEach(t),oS.forEach(t),r=0;r<Jp.length;r++)n=Jp[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Jp.length&&(r=Jp[0],r.blockedOn===null);)gre(r),r.blockedOn===null&&Jp.shift()}var Iv=rp.ReactCurrentBatchConfig,EA=!0;function uke(e,t,r,n){var i=oi,a=Iv.transition;Iv.transition=null;try{oi=1,sL(e,t,r,n)}finally{oi=i,Iv.transition=a}}function dke(e,t,r,n){var i=oi,a=Iv.transition;Iv.transition=null;try{oi=4,sL(e,t,r,n)}finally{oi=i,Iv.transition=a}}function sL(e,t,r,n){if(EA){var i=s6(e,t,r,n);if(i===null)sj(e,t,n,CA,r),_W(e,n);else if(lke(i,e,t,r,n))n.stopPropagation();else if(_W(e,n),t&4&&-1<oke.indexOf(e)){for(;i!==null;){var a=AE(i);if(a!==null&&fre(a),a=s6(e,t,r,n),a===null&&sj(e,t,n,CA,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else sj(e,t,n,null,r)}}var CA=null;function s6(e,t,r,n){if(CA=null,e=rL(n),e=rg(e),e!==null)if(t=Rx(e),t===null)e=null;else if(r=t.tag,r===13){if(e=ire(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return CA=e,null}function xre(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(JCe()){case nL:return 1;case lre:return 4;case wA:case ZCe:return 16;case cre:return 536870912;default:return 16}default:return 16}}var h0=null,oL=null,FN=null;function vre(){if(FN)return FN;var e,t=oL,r=t.length,n,i="value"in h0?h0.value:h0.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===i[a-n];n++);return FN=i.slice(e,1<n?1-n:void 0)}function LN(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function n_(){return!0}function AW(){return!1}function yc(e){function t(r,n,i,a,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?n_:AW,this.isPropagationStopped=AW,this}return Xi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=n_)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=n_)},persist:function(){},isPersistent:n_}),t}var eb={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lL=yc(eb),NE=Xi({},eb,{view:0,detail:0}),fke=yc(NE),QR,JR,xw,RO=Xi({},NE,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cL,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xw&&(xw&&e.type==="mousemove"?(QR=e.screenX-xw.screenX,JR=e.screenY-xw.screenY):JR=QR=0,xw=e),QR)},movementY:function(e){return"movementY"in e?e.movementY:JR}}),TW=yc(RO),hke=Xi({},RO,{dataTransfer:0}),pke=yc(hke),mke=Xi({},NE,{relatedTarget:0}),ZR=yc(mke),gke=Xi({},eb,{animationName:0,elapsedTime:0,pseudoElement:0}),xke=yc(gke),vke=Xi({},eb,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yke=yc(vke),bke=Xi({},eb,{data:0}),IW=yc(bke),wke={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ske={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eke={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cke(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Eke[e])?!!t[e]:!1}function cL(){return Cke}var kke=Xi({},NE,{key:function(e){if(e.key){var t=wke[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=LN(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ske[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cL,charCode:function(e){return e.type==="keypress"?LN(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?LN(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_ke=yc(kke),Nke=Xi({},RO,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),OW=yc(Nke),Ake=Xi({},NE,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cL}),Tke=yc(Ake),Ike=Xi({},eb,{propertyName:0,elapsedTime:0,pseudoElement:0}),Oke=yc(Ike),Pke=Xi({},RO,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rke=yc(Pke),jke=[9,13,27,32],uL=Mh&&"CompositionEvent"in window,v2=null;Mh&&"documentMode"in document&&(v2=document.documentMode);var Dke=Mh&&"TextEvent"in window&&!v2,yre=Mh&&(!uL||v2&&8<v2&&11>=v2),PW=" ",RW=!1;function bre(e,t){switch(e){case"keyup":return jke.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wre(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var dv=!1;function Mke(e,t){switch(e){case"compositionend":return wre(t);case"keypress":return t.which!==32?null:(RW=!0,PW);case"textInput":return e=t.data,e===PW&&RW?null:e;default:return null}}function Fke(e,t){if(dv)return e==="compositionend"||!uL&&bre(e,t)?(e=vre(),FN=oL=h0=null,dv=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return yre&&t.locale!=="ko"?null:t.data;default:return null}}var Lke={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jW(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Lke[e.type]:t==="textarea"}function Sre(e,t,r,n){Zte(n),t=kA(t,"onChange"),0<t.length&&(r=new lL("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var y2=null,cS=null;function Bke(e){Rre(e,0)}function jO(e){var t=pv(e);if(qte(t))return e}function Uke(e,t){if(e==="change")return t}var Ere=!1;if(Mh){var ej;if(Mh){var tj="oninput"in document;if(!tj){var DW=document.createElement("div");DW.setAttribute("oninput","return;"),tj=typeof DW.oninput=="function"}ej=tj}else ej=!1;Ere=ej&&(!document.documentMode||9<document.documentMode)}function MW(){y2&&(y2.detachEvent("onpropertychange",Cre),cS=y2=null)}function Cre(e){if(e.propertyName==="value"&&jO(cS)){var t=[];Sre(t,cS,e,rL(e)),nre(Bke,t)}}function $ke(e,t,r){e==="focusin"?(MW(),y2=t,cS=r,y2.attachEvent("onpropertychange",Cre)):e==="focusout"&&MW()}function zke(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return jO(cS)}function Hke(e,t){if(e==="click")return jO(t)}function Wke(e,t){if(e==="input"||e==="change")return jO(t)}function Vke(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var dd=typeof Object.is=="function"?Object.is:Vke;function uS(e,t){if(dd(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!zM.call(t,i)||!dd(e[i],t[i]))return!1}return!0}function FW(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function LW(e,t){var r=FW(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=FW(r)}}function kre(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kre(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _re(){for(var e=window,t=vA();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=vA(e.document)}return t}function dL(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function qke(e){var t=_re(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&kre(r.ownerDocument.documentElement,r)){if(n!==null&&dL(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!e.extend&&a>n&&(i=n,n=a,a=i),i=LW(r,a);var s=LW(r,n);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Gke=Mh&&"documentMode"in document&&11>=document.documentMode,fv=null,o6=null,b2=null,l6=!1;function BW(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;l6||fv==null||fv!==vA(n)||(n=fv,"selectionStart"in n&&dL(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),b2&&uS(b2,n)||(b2=n,n=kA(o6,"onSelect"),0<n.length&&(t=new lL("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=fv)))}function i_(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var hv={animationend:i_("Animation","AnimationEnd"),animationiteration:i_("Animation","AnimationIteration"),animationstart:i_("Animation","AnimationStart"),transitionend:i_("Transition","TransitionEnd")},rj={},Nre={};Mh&&(Nre=document.createElement("div").style,"AnimationEvent"in window||(delete hv.animationend.animation,delete hv.animationiteration.animation,delete hv.animationstart.animation),"TransitionEvent"in window||delete hv.transitionend.transition);function DO(e){if(rj[e])return rj[e];if(!hv[e])return e;var t=hv[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Nre)return rj[e]=t[r];return e}var Are=DO("animationend"),Tre=DO("animationiteration"),Ire=DO("animationstart"),Ore=DO("transitionend"),Pre=new Map,UW="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Y0(e,t){Pre.set(e,t),Px(t,[e])}for(var nj=0;nj<UW.length;nj++){var ij=UW[nj],Kke=ij.toLowerCase(),Xke=ij[0].toUpperCase()+ij.slice(1);Y0(Kke,"on"+Xke)}Y0(Are,"onAnimationEnd");Y0(Tre,"onAnimationIteration");Y0(Ire,"onAnimationStart");Y0("dblclick","onDoubleClick");Y0("focusin","onFocus");Y0("focusout","onBlur");Y0(Ore,"onTransitionEnd");sy("onMouseEnter",["mouseout","mouseover"]);sy("onMouseLeave",["mouseout","mouseover"]);sy("onPointerEnter",["pointerout","pointerover"]);sy("onPointerLeave",["pointerout","pointerover"]);Px("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Px("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Px("onBeforeInput",["compositionend","keypress","textInput","paste"]);Px("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Px("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Px("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var e2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yke=new Set("cancel close invalid load scroll toggle".split(" ").concat(e2));function $W(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,KCe(n,t,void 0,e),e.currentTarget=null}function Rre(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var s=n.length-1;0<=s;s--){var o=n[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;$W(i,o,c),a=l}else for(s=0;s<n.length;s++){if(o=n[s],l=o.instance,c=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;$W(i,o,c),a=l}}}if(bA)throw e=n6,bA=!1,n6=null,e}function Si(e,t){var r=t[h6];r===void 0&&(r=t[h6]=new Set);var n=e+"__bubble";r.has(n)||(jre(t,e,2,!1),r.add(n))}function aj(e,t,r){var n=0;t&&(n|=4),jre(r,e,n,t)}var a_="_reactListening"+Math.random().toString(36).slice(2);function dS(e){if(!e[a_]){e[a_]=!0,$te.forEach(function(r){r!=="selectionchange"&&(Yke.has(r)||aj(r,!1,e),aj(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[a_]||(t[a_]=!0,aj("selectionchange",!1,t))}}function jre(e,t,r,n){switch(xre(t)){case 1:var i=uke;break;case 4:i=dke;break;default:i=sL}r=i.bind(null,t,r,e),i=void 0,!r6||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function sj(e,t,r,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;o!==null;){if(s=rg(o),s===null)return;if(l=s.tag,l===5||l===6){n=a=s;continue e}o=o.parentNode}}n=n.return}nre(function(){var c=a,d=rL(r),f=[];e:{var p=Pre.get(e);if(p!==void 0){var m=lL,x=e;switch(e){case"keypress":if(LN(r)===0)break e;case"keydown":case"keyup":m=_ke;break;case"focusin":x="focus",m=ZR;break;case"focusout":x="blur",m=ZR;break;case"beforeblur":case"afterblur":m=ZR;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=TW;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=pke;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Tke;break;case Are:case Tre:case Ire:m=xke;break;case Ore:m=Oke;break;case"scroll":m=fke;break;case"wheel":m=Rke;break;case"copy":case"cut":case"paste":m=yke;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=OW}var y=(t&4)!==0,b=!y&&e==="scroll",S=y?p!==null?p+"Capture":null:p;y=[];for(var _=c,C;_!==null;){C=_;var A=C.stateNode;if(C.tag===5&&A!==null&&(C=A,S!==null&&(A=aS(_,S),A!=null&&y.push(fS(_,A,C)))),b)break;_=_.return}0<y.length&&(p=new m(p,x,null,r,d),f.push({event:p,listeners:y}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&r!==e6&&(x=r.relatedTarget||r.fromElement)&&(rg(x)||x[Fh]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(x=r.relatedTarget||r.toElement,m=c,x=x?rg(x):null,x!==null&&(b=Rx(x),x!==b||x.tag!==5&&x.tag!==6)&&(x=null)):(m=null,x=c),m!==x)){if(y=TW,A="onMouseLeave",S="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(y=OW,A="onPointerLeave",S="onPointerEnter",_="pointer"),b=m==null?p:pv(m),C=x==null?p:pv(x),p=new y(A,_+"leave",m,r,d),p.target=b,p.relatedTarget=C,A=null,rg(d)===c&&(y=new y(S,_+"enter",x,r,d),y.target=C,y.relatedTarget=b,A=y),b=A,m&&x)t:{for(y=m,S=x,_=0,C=y;C;C=P1(C))_++;for(C=0,A=S;A;A=P1(A))C++;for(;0<_-C;)y=P1(y),_--;for(;0<C-_;)S=P1(S),C--;for(;_--;){if(y===S||S!==null&&y===S.alternate)break t;y=P1(y),S=P1(S)}y=null}else y=null;m!==null&&zW(f,p,m,y,!1),x!==null&&b!==null&&zW(f,b,x,y,!0)}}e:{if(p=c?pv(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var j=Uke;else if(jW(p))if(Ere)j=Wke;else{j=zke;var P=$ke}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(j=Hke);if(j&&(j=j(e,c))){Sre(f,j,r,d);break e}P&&P(e,p,c),e==="focusout"&&(P=p._wrapperState)&&P.controlled&&p.type==="number"&&XM(p,"number",p.value)}switch(P=c?pv(c):window,e){case"focusin":(jW(P)||P.contentEditable==="true")&&(fv=P,o6=c,b2=null);break;case"focusout":b2=o6=fv=null;break;case"mousedown":l6=!0;break;case"contextmenu":case"mouseup":case"dragend":l6=!1,BW(f,r,d);break;case"selectionchange":if(Gke)break;case"keydown":case"keyup":BW(f,r,d)}var O;if(uL)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else dv?bre(e,r)&&(D="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(D="onCompositionStart");D&&(yre&&r.locale!=="ko"&&(dv||D!=="onCompositionStart"?D==="onCompositionEnd"&&dv&&(O=vre()):(h0=d,oL="value"in h0?h0.value:h0.textContent,dv=!0)),P=kA(c,D),0<P.length&&(D=new IW(D,e,null,r,d),f.push({event:D,listeners:P}),O?D.data=O:(O=wre(r),O!==null&&(D.data=O)))),(O=Dke?Mke(e,r):Fke(e,r))&&(c=kA(c,"onBeforeInput"),0<c.length&&(d=new IW("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:c}),d.data=O))}Rre(f,t)})}function fS(e,t,r){return{instance:e,listener:t,currentTarget:r}}function kA(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=aS(e,r),a!=null&&n.unshift(fS(e,a,i)),a=aS(e,t),a!=null&&n.push(fS(e,a,i))),e=e.return}return n}function P1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function zW(e,t,r,n,i){for(var a=t._reactName,s=[];r!==null&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&c!==null&&(o=c,i?(l=aS(r,a),l!=null&&s.unshift(fS(r,l,o))):i||(l=aS(r,a),l!=null&&s.push(fS(r,l,o)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var Qke=/\r\n?/g,Jke=/\u0000|\uFFFD/g;function HW(e){return(typeof e=="string"?e:""+e).replace(Qke,`
`).replace(Jke,"")}function s_(e,t,r){if(t=HW(t),HW(e)!==t&&r)throw Error(jt(425))}function _A(){}var c6=null,u6=null;function d6(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var f6=typeof setTimeout=="function"?setTimeout:void 0,Zke=typeof clearTimeout=="function"?clearTimeout:void 0,WW=typeof Promise=="function"?Promise:void 0,e_e=typeof queueMicrotask=="function"?queueMicrotask:typeof WW<"u"?function(e){return WW.resolve(null).then(e).catch(t_e)}:f6;function t_e(e){setTimeout(function(){throw e})}function oj(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),lS(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);lS(t)}function C0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function VW(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var tb=Math.random().toString(36).slice(2),Xd="__reactFiber$"+tb,hS="__reactProps$"+tb,Fh="__reactContainer$"+tb,h6="__reactEvents$"+tb,r_e="__reactListeners$"+tb,n_e="__reactHandles$"+tb;function rg(e){var t=e[Xd];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Fh]||r[Xd]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=VW(e);e!==null;){if(r=e[Xd])return r;e=VW(e)}return t}e=r,r=e.parentNode}return null}function AE(e){return e=e[Xd]||e[Fh],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function pv(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(jt(33))}function MO(e){return e[hS]||null}var p6=[],mv=-1;function Q0(e){return{current:e}}function Ti(e){0>mv||(e.current=p6[mv],p6[mv]=null,mv--)}function bi(e,t){mv++,p6[mv]=e.current,e.current=t}var M0={},bo=Q0(M0),wl=Q0(!1),Qg=M0;function oy(e,t){var r=e.type.contextTypes;if(!r)return M0;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Sl(e){return e=e.childContextTypes,e!=null}function NA(){Ti(wl),Ti(bo)}function qW(e,t,r){if(bo.current!==M0)throw Error(jt(168));bi(bo,t),bi(wl,r)}function Dre(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(jt(108,$Ce(e)||"Unknown",i));return Xi({},r,n)}function AA(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||M0,Qg=bo.current,bi(bo,e),bi(wl,wl.current),!0}function GW(e,t,r){var n=e.stateNode;if(!n)throw Error(jt(169));r?(e=Dre(e,t,Qg),n.__reactInternalMemoizedMergedChildContext=e,Ti(wl),Ti(bo),bi(bo,e)):Ti(wl),bi(wl,r)}var sh=null,FO=!1,lj=!1;function Mre(e){sh===null?sh=[e]:sh.push(e)}function i_e(e){FO=!0,Mre(e)}function J0(){if(!lj&&sh!==null){lj=!0;var e=0,t=oi;try{var r=sh;for(oi=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}sh=null,FO=!1}catch(i){throw sh!==null&&(sh=sh.slice(e+1)),ore(nL,J0),i}finally{oi=t,lj=!1}}return null}var gv=[],xv=0,TA=null,IA=0,Yc=[],Qc=0,Jg=null,ph=1,mh="";function Hm(e,t){gv[xv++]=IA,gv[xv++]=TA,TA=e,IA=t}function Fre(e,t,r){Yc[Qc++]=ph,Yc[Qc++]=mh,Yc[Qc++]=Jg,Jg=e;var n=ph;e=mh;var i=32-ad(n)-1;n&=~(1<<i),r+=1;var a=32-ad(t)+i;if(30<a){var s=i-i%5;a=(n&(1<<s)-1).toString(32),n>>=s,i-=s,ph=1<<32-ad(t)+i|r<<i|n,mh=a+e}else ph=1<<a|r<<i|n,mh=e}function fL(e){e.return!==null&&(Hm(e,1),Fre(e,1,0))}function hL(e){for(;e===TA;)TA=gv[--xv],gv[xv]=null,IA=gv[--xv],gv[xv]=null;for(;e===Jg;)Jg=Yc[--Qc],Yc[Qc]=null,mh=Yc[--Qc],Yc[Qc]=null,ph=Yc[--Qc],Yc[Qc]=null}var oc=null,ic=null,Ui=!1,Gu=null;function Lre(e,t){var r=eu(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function KW(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,oc=e,ic=C0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,oc=e,ic=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Jg!==null?{id:ph,overflow:mh}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=eu(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,oc=e,ic=null,!0):!1;default:return!1}}function m6(e){return(e.mode&1)!==0&&(e.flags&128)===0}function g6(e){if(Ui){var t=ic;if(t){var r=t;if(!KW(e,t)){if(m6(e))throw Error(jt(418));t=C0(r.nextSibling);var n=oc;t&&KW(e,t)?Lre(n,r):(e.flags=e.flags&-4097|2,Ui=!1,oc=e)}}else{if(m6(e))throw Error(jt(418));e.flags=e.flags&-4097|2,Ui=!1,oc=e}}}function XW(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;oc=e}function o_(e){if(e!==oc)return!1;if(!Ui)return XW(e),Ui=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!d6(e.type,e.memoizedProps)),t&&(t=ic)){if(m6(e))throw Bre(),Error(jt(418));for(;t;)Lre(e,t),t=C0(t.nextSibling)}if(XW(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(jt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ic=C0(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ic=null}}else ic=oc?C0(e.stateNode.nextSibling):null;return!0}function Bre(){for(var e=ic;e;)e=C0(e.nextSibling)}function ly(){ic=oc=null,Ui=!1}function pL(e){Gu===null?Gu=[e]:Gu.push(e)}var a_e=rp.ReactCurrentBatchConfig;function vw(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(jt(309));var n=r.stateNode}if(!n)throw Error(jt(147,e));var i=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},t._stringRef=a,t)}if(typeof e!="string")throw Error(jt(284));if(!r._owner)throw Error(jt(290,e))}return e}function l_(e,t){throw e=Object.prototype.toString.call(t),Error(jt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function YW(e){var t=e._init;return t(e._payload)}function Ure(e){function t(S,_){if(e){var C=S.deletions;C===null?(S.deletions=[_],S.flags|=16):C.push(_)}}function r(S,_){if(!e)return null;for(;_!==null;)t(S,_),_=_.sibling;return null}function n(S,_){for(S=new Map;_!==null;)_.key!==null?S.set(_.key,_):S.set(_.index,_),_=_.sibling;return S}function i(S,_){return S=A0(S,_),S.index=0,S.sibling=null,S}function a(S,_,C){return S.index=C,e?(C=S.alternate,C!==null?(C=C.index,C<_?(S.flags|=2,_):C):(S.flags|=2,_)):(S.flags|=1048576,_)}function s(S){return e&&S.alternate===null&&(S.flags|=2),S}function o(S,_,C,A){return _===null||_.tag!==6?(_=mj(C,S.mode,A),_.return=S,_):(_=i(_,C),_.return=S,_)}function l(S,_,C,A){var j=C.type;return j===uv?d(S,_,C.props.children,A,C.key):_!==null&&(_.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Wp&&YW(j)===_.type)?(A=i(_,C.props),A.ref=vw(S,_,C),A.return=S,A):(A=VN(C.type,C.key,C.props,null,S.mode,A),A.ref=vw(S,_,C),A.return=S,A)}function c(S,_,C,A){return _===null||_.tag!==4||_.stateNode.containerInfo!==C.containerInfo||_.stateNode.implementation!==C.implementation?(_=gj(C,S.mode,A),_.return=S,_):(_=i(_,C.children||[]),_.return=S,_)}function d(S,_,C,A,j){return _===null||_.tag!==7?(_=Pg(C,S.mode,A,j),_.return=S,_):(_=i(_,C),_.return=S,_)}function f(S,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return _=mj(""+_,S.mode,C),_.return=S,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Qk:return C=VN(_.type,_.key,_.props,null,S.mode,C),C.ref=vw(S,null,_),C.return=S,C;case cv:return _=gj(_,S.mode,C),_.return=S,_;case Wp:var A=_._init;return f(S,A(_._payload),C)}if(Jw(_)||hw(_))return _=Pg(_,S.mode,C,null),_.return=S,_;l_(S,_)}return null}function p(S,_,C,A){var j=_!==null?_.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return j!==null?null:o(S,_,""+C,A);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Qk:return C.key===j?l(S,_,C,A):null;case cv:return C.key===j?c(S,_,C,A):null;case Wp:return j=C._init,p(S,_,j(C._payload),A)}if(Jw(C)||hw(C))return j!==null?null:d(S,_,C,A,null);l_(S,C)}return null}function m(S,_,C,A,j){if(typeof A=="string"&&A!==""||typeof A=="number")return S=S.get(C)||null,o(_,S,""+A,j);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Qk:return S=S.get(A.key===null?C:A.key)||null,l(_,S,A,j);case cv:return S=S.get(A.key===null?C:A.key)||null,c(_,S,A,j);case Wp:var P=A._init;return m(S,_,C,P(A._payload),j)}if(Jw(A)||hw(A))return S=S.get(C)||null,d(_,S,A,j,null);l_(_,A)}return null}function x(S,_,C,A){for(var j=null,P=null,O=_,D=_=0,L=null;O!==null&&D<C.length;D++){O.index>D?(L=O,O=null):L=O.sibling;var B=p(S,O,C[D],A);if(B===null){O===null&&(O=L);break}e&&O&&B.alternate===null&&t(S,O),_=a(B,_,D),P===null?j=B:P.sibling=B,P=B,O=L}if(D===C.length)return r(S,O),Ui&&Hm(S,D),j;if(O===null){for(;D<C.length;D++)O=f(S,C[D],A),O!==null&&(_=a(O,_,D),P===null?j=O:P.sibling=O,P=O);return Ui&&Hm(S,D),j}for(O=n(S,O);D<C.length;D++)L=m(O,S,D,C[D],A),L!==null&&(e&&L.alternate!==null&&O.delete(L.key===null?D:L.key),_=a(L,_,D),P===null?j=L:P.sibling=L,P=L);return e&&O.forEach(function(H){return t(S,H)}),Ui&&Hm(S,D),j}function y(S,_,C,A){var j=hw(C);if(typeof j!="function")throw Error(jt(150));if(C=j.call(C),C==null)throw Error(jt(151));for(var P=j=null,O=_,D=_=0,L=null,B=C.next();O!==null&&!B.done;D++,B=C.next()){O.index>D?(L=O,O=null):L=O.sibling;var H=p(S,O,B.value,A);if(H===null){O===null&&(O=L);break}e&&O&&H.alternate===null&&t(S,O),_=a(H,_,D),P===null?j=H:P.sibling=H,P=H,O=L}if(B.done)return r(S,O),Ui&&Hm(S,D),j;if(O===null){for(;!B.done;D++,B=C.next())B=f(S,B.value,A),B!==null&&(_=a(B,_,D),P===null?j=B:P.sibling=B,P=B);return Ui&&Hm(S,D),j}for(O=n(S,O);!B.done;D++,B=C.next())B=m(O,S,D,B.value,A),B!==null&&(e&&B.alternate!==null&&O.delete(B.key===null?D:B.key),_=a(B,_,D),P===null?j=B:P.sibling=B,P=B);return e&&O.forEach(function(z){return t(S,z)}),Ui&&Hm(S,D),j}function b(S,_,C,A){if(typeof C=="object"&&C!==null&&C.type===uv&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Qk:e:{for(var j=C.key,P=_;P!==null;){if(P.key===j){if(j=C.type,j===uv){if(P.tag===7){r(S,P.sibling),_=i(P,C.props.children),_.return=S,S=_;break e}}else if(P.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Wp&&YW(j)===P.type){r(S,P.sibling),_=i(P,C.props),_.ref=vw(S,P,C),_.return=S,S=_;break e}r(S,P);break}else t(S,P);P=P.sibling}C.type===uv?(_=Pg(C.props.children,S.mode,A,C.key),_.return=S,S=_):(A=VN(C.type,C.key,C.props,null,S.mode,A),A.ref=vw(S,_,C),A.return=S,S=A)}return s(S);case cv:e:{for(P=C.key;_!==null;){if(_.key===P)if(_.tag===4&&_.stateNode.containerInfo===C.containerInfo&&_.stateNode.implementation===C.implementation){r(S,_.sibling),_=i(_,C.children||[]),_.return=S,S=_;break e}else{r(S,_);break}else t(S,_);_=_.sibling}_=gj(C,S.mode,A),_.return=S,S=_}return s(S);case Wp:return P=C._init,b(S,_,P(C._payload),A)}if(Jw(C))return x(S,_,C,A);if(hw(C))return y(S,_,C,A);l_(S,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,_!==null&&_.tag===6?(r(S,_.sibling),_=i(_,C),_.return=S,S=_):(r(S,_),_=mj(C,S.mode,A),_.return=S,S=_),s(S)):r(S,_)}return b}var cy=Ure(!0),$re=Ure(!1),OA=Q0(null),PA=null,vv=null,mL=null;function gL(){mL=vv=PA=null}function xL(e){var t=OA.current;Ti(OA),e._currentValue=t}function x6(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ov(e,t){PA=e,mL=vv=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(vl=!0),e.firstContext=null)}function du(e){var t=e._currentValue;if(mL!==e)if(e={context:e,memoizedValue:t,next:null},vv===null){if(PA===null)throw Error(jt(308));vv=e,PA.dependencies={lanes:0,firstContext:e}}else vv=vv.next=e;return t}var ng=null;function vL(e){ng===null?ng=[e]:ng.push(e)}function zre(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,vL(t)):(r.next=i.next,i.next=r),t.interleaved=r,Lh(e,n)}function Lh(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Vp=!1;function yL(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hre(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wh(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function k0(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,jn&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Lh(e,r)}return i=n.interleaved,i===null?(t.next=t,vL(n)):(t.next=i.next,i.next=t),n.interleaved=t,Lh(e,r)}function BN(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,iL(e,r)}}function QW(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=s:a=a.next=s,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function RA(e,t,r,n){var i=e.updateQueue;Vp=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,s===null?a=c:s.next=c,s=l;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==s&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(a!==null){var f=i.baseState;s=0,d=c=l=null,o=a;do{var p=o.lane,m=o.eventTime;if((n&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var x=e,y=o;switch(p=t,m=r,y.tag){case 1:if(x=y.payload,typeof x=="function"){f=x.call(m,f,p);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=y.payload,p=typeof x=="function"?x.call(m,f,p):x,p==null)break e;f=Xi({},f,p);break e;case 2:Vp=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,p=i.effects,p===null?i.effects=[o]:p.push(o))}else m={eventTime:m,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=m,l=f):d=d.next=m,s|=p;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;p=o,o=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);ex|=s,e.lanes=s,e.memoizedState=f}}function JW(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(jt(191,i));i.call(n)}}}var TE={},af=Q0(TE),pS=Q0(TE),mS=Q0(TE);function ig(e){if(e===TE)throw Error(jt(174));return e}function bL(e,t){switch(bi(mS,t),bi(pS,e),bi(af,TE),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:QM(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=QM(t,e)}Ti(af),bi(af,t)}function uy(){Ti(af),Ti(pS),Ti(mS)}function Wre(e){ig(mS.current);var t=ig(af.current),r=QM(t,e.type);t!==r&&(bi(pS,e),bi(af,r))}function wL(e){pS.current===e&&(Ti(af),Ti(pS))}var Vi=Q0(0);function jA(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cj=[];function SL(){for(var e=0;e<cj.length;e++)cj[e]._workInProgressVersionPrimary=null;cj.length=0}var UN=rp.ReactCurrentDispatcher,uj=rp.ReactCurrentBatchConfig,Zg=0,Ki=null,qa=null,ms=null,DA=!1,w2=!1,gS=0,s_e=0;function Js(){throw Error(jt(321))}function EL(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!dd(e[r],t[r]))return!1;return!0}function CL(e,t,r,n,i,a){if(Zg=a,Ki=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,UN.current=e===null||e.memoizedState===null?u_e:d_e,e=r(n,i),w2){a=0;do{if(w2=!1,gS=0,25<=a)throw Error(jt(301));a+=1,ms=qa=null,t.updateQueue=null,UN.current=f_e,e=r(n,i)}while(w2)}if(UN.current=MA,t=qa!==null&&qa.next!==null,Zg=0,ms=qa=Ki=null,DA=!1,t)throw Error(jt(300));return e}function kL(){var e=gS!==0;return gS=0,e}function Md(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ms===null?Ki.memoizedState=ms=e:ms=ms.next=e,ms}function fu(){if(qa===null){var e=Ki.alternate;e=e!==null?e.memoizedState:null}else e=qa.next;var t=ms===null?Ki.memoizedState:ms.next;if(t!==null)ms=t,qa=e;else{if(e===null)throw Error(jt(310));qa=e,e={memoizedState:qa.memoizedState,baseState:qa.baseState,baseQueue:qa.baseQueue,queue:qa.queue,next:null},ms===null?Ki.memoizedState=ms=e:ms=ms.next=e}return ms}function xS(e,t){return typeof t=="function"?t(e):t}function dj(e){var t=fu(),r=t.queue;if(r===null)throw Error(jt(311));r.lastRenderedReducer=e;var n=qa,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var o=s=null,l=null,c=a;do{var d=c.lane;if((Zg&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=f,s=n):l=l.next=f,Ki.lanes|=d,ex|=d}c=c.next}while(c!==null&&c!==a);l===null?s=n:l.next=o,dd(n,t.memoizedState)||(vl=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do a=i.lane,Ki.lanes|=a,ex|=a,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function fj(e){var t=fu(),r=t.queue;if(r===null)throw Error(jt(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do a=e(a,s.action),s=s.next;while(s!==i);dd(a,t.memoizedState)||(vl=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function Vre(){}function qre(e,t){var r=Ki,n=fu(),i=t(),a=!dd(n.memoizedState,i);if(a&&(n.memoizedState=i,vl=!0),n=n.queue,_L(Xre.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||ms!==null&&ms.memoizedState.tag&1){if(r.flags|=2048,vS(9,Kre.bind(null,r,n,i,t),void 0,null),ws===null)throw Error(jt(349));Zg&30||Gre(r,t,i)}return i}function Gre(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ki.updateQueue,t===null?(t={lastEffect:null,stores:null},Ki.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Kre(e,t,r,n){t.value=r,t.getSnapshot=n,Yre(t)&&Qre(e)}function Xre(e,t,r){return r(function(){Yre(t)&&Qre(e)})}function Yre(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!dd(e,r)}catch{return!0}}function Qre(e){var t=Lh(e,1);t!==null&&sd(t,e,1,-1)}function ZW(e){var t=Md();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xS,lastRenderedState:e},t.queue=e,e=e.dispatch=c_e.bind(null,Ki,e),[t.memoizedState,e]}function vS(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ki.updateQueue,t===null?(t={lastEffect:null,stores:null},Ki.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Jre(){return fu().memoizedState}function $N(e,t,r,n){var i=Md();Ki.flags|=e,i.memoizedState=vS(1|t,r,void 0,n===void 0?null:n)}function LO(e,t,r,n){var i=fu();n=n===void 0?null:n;var a=void 0;if(qa!==null){var s=qa.memoizedState;if(a=s.destroy,n!==null&&EL(n,s.deps)){i.memoizedState=vS(t,r,a,n);return}}Ki.flags|=e,i.memoizedState=vS(1|t,r,a,n)}function eV(e,t){return $N(8390656,8,e,t)}function _L(e,t){return LO(2048,8,e,t)}function Zre(e,t){return LO(4,2,e,t)}function ene(e,t){return LO(4,4,e,t)}function tne(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function rne(e,t,r){return r=r!=null?r.concat([e]):null,LO(4,4,tne.bind(null,t,e),r)}function NL(){}function nne(e,t){var r=fu();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&EL(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function ine(e,t){var r=fu();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&EL(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function ane(e,t,r){return Zg&21?(dd(r,t)||(r=ure(),Ki.lanes|=r,ex|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,vl=!0),e.memoizedState=r)}function o_e(e,t){var r=oi;oi=r!==0&&4>r?r:4,e(!0);var n=uj.transition;uj.transition={};try{e(!1),t()}finally{oi=r,uj.transition=n}}function sne(){return fu().memoizedState}function l_e(e,t,r){var n=N0(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},one(e))lne(t,r);else if(r=zre(e,t,r,n),r!==null){var i=Ko();sd(r,e,n,i),cne(r,t,n)}}function c_e(e,t,r){var n=N0(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(one(e))lne(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,o=a(s,r);if(i.hasEagerState=!0,i.eagerState=o,dd(o,s)){var l=t.interleaved;l===null?(i.next=i,vL(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}r=zre(e,t,i,n),r!==null&&(i=Ko(),sd(r,e,n,i),cne(r,t,n))}}function one(e){var t=e.alternate;return e===Ki||t!==null&&t===Ki}function lne(e,t){w2=DA=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function cne(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,iL(e,r)}}var MA={readContext:du,useCallback:Js,useContext:Js,useEffect:Js,useImperativeHandle:Js,useInsertionEffect:Js,useLayoutEffect:Js,useMemo:Js,useReducer:Js,useRef:Js,useState:Js,useDebugValue:Js,useDeferredValue:Js,useTransition:Js,useMutableSource:Js,useSyncExternalStore:Js,useId:Js,unstable_isNewReconciler:!1},u_e={readContext:du,useCallback:function(e,t){return Md().memoizedState=[e,t===void 0?null:t],e},useContext:du,useEffect:eV,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,$N(4194308,4,tne.bind(null,t,e),r)},useLayoutEffect:function(e,t){return $N(4194308,4,e,t)},useInsertionEffect:function(e,t){return $N(4,2,e,t)},useMemo:function(e,t){var r=Md();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Md();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=l_e.bind(null,Ki,e),[n.memoizedState,e]},useRef:function(e){var t=Md();return e={current:e},t.memoizedState=e},useState:ZW,useDebugValue:NL,useDeferredValue:function(e){return Md().memoizedState=e},useTransition:function(){var e=ZW(!1),t=e[0];return e=o_e.bind(null,e[1]),Md().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ki,i=Md();if(Ui){if(r===void 0)throw Error(jt(407));r=r()}else{if(r=t(),ws===null)throw Error(jt(349));Zg&30||Gre(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,eV(Xre.bind(null,n,a,e),[e]),n.flags|=2048,vS(9,Kre.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=Md(),t=ws.identifierPrefix;if(Ui){var r=mh,n=ph;r=(n&~(1<<32-ad(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=gS++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=s_e++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},d_e={readContext:du,useCallback:nne,useContext:du,useEffect:_L,useImperativeHandle:rne,useInsertionEffect:Zre,useLayoutEffect:ene,useMemo:ine,useReducer:dj,useRef:Jre,useState:function(){return dj(xS)},useDebugValue:NL,useDeferredValue:function(e){var t=fu();return ane(t,qa.memoizedState,e)},useTransition:function(){var e=dj(xS)[0],t=fu().memoizedState;return[e,t]},useMutableSource:Vre,useSyncExternalStore:qre,useId:sne,unstable_isNewReconciler:!1},f_e={readContext:du,useCallback:nne,useContext:du,useEffect:_L,useImperativeHandle:rne,useInsertionEffect:Zre,useLayoutEffect:ene,useMemo:ine,useReducer:fj,useRef:Jre,useState:function(){return fj(xS)},useDebugValue:NL,useDeferredValue:function(e){var t=fu();return qa===null?t.memoizedState=e:ane(t,qa.memoizedState,e)},useTransition:function(){var e=fj(xS)[0],t=fu().memoizedState;return[e,t]},useMutableSource:Vre,useSyncExternalStore:qre,useId:sne,unstable_isNewReconciler:!1};function zu(e,t){if(e&&e.defaultProps){t=Xi({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function v6(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Xi({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var BO={isMounted:function(e){return(e=e._reactInternals)?Rx(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ko(),i=N0(e),a=wh(n,i);a.payload=t,r!=null&&(a.callback=r),t=k0(e,a,i),t!==null&&(sd(t,e,i,n),BN(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ko(),i=N0(e),a=wh(n,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=k0(e,a,i),t!==null&&(sd(t,e,i,n),BN(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ko(),n=N0(e),i=wh(r,n);i.tag=2,t!=null&&(i.callback=t),t=k0(e,i,n),t!==null&&(sd(t,e,n,r),BN(t,e,n))}};function tV(e,t,r,n,i,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,s):t.prototype&&t.prototype.isPureReactComponent?!uS(r,n)||!uS(i,a):!0}function une(e,t,r){var n=!1,i=M0,a=t.contextType;return typeof a=="object"&&a!==null?a=du(a):(i=Sl(t)?Qg:bo.current,n=t.contextTypes,a=(n=n!=null)?oy(e,i):M0),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=BO,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function rV(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&BO.enqueueReplaceState(t,t.state,null)}function y6(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},yL(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=du(a):(a=Sl(t)?Qg:bo.current,i.context=oy(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(v6(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&BO.enqueueReplaceState(i,i.state,null),RA(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function dy(e,t){try{var r="",n=t;do r+=UCe(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function hj(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function b6(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var h_e=typeof WeakMap=="function"?WeakMap:Map;function dne(e,t,r){r=wh(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){LA||(LA=!0,I6=n),b6(e,t)},r}function fne(e,t,r){r=wh(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){b6(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){b6(e,t),typeof n!="function"&&(_0===null?_0=new Set([this]):_0.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function nV(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new h_e;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=N_e.bind(null,e,t,r),t.then(e,e))}function iV(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function aV(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=wh(-1,1),t.tag=2,k0(r,t,1))),r.lanes|=1),e)}var p_e=rp.ReactCurrentOwner,vl=!1;function Lo(e,t,r,n){t.child=e===null?$re(t,null,r,n):cy(t,e.child,r,n)}function sV(e,t,r,n,i){r=r.render;var a=t.ref;return Ov(t,i),n=CL(e,t,r,n,a,i),r=kL(),e!==null&&!vl?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Bh(e,t,i)):(Ui&&r&&fL(t),t.flags|=1,Lo(e,t,n,i),t.child)}function oV(e,t,r,n,i){if(e===null){var a=r.type;return typeof a=="function"&&!DL(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,hne(e,t,a,n,i)):(e=VN(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var s=a.memoizedProps;if(r=r.compare,r=r!==null?r:uS,r(s,n)&&e.ref===t.ref)return Bh(e,t,i)}return t.flags|=1,e=A0(a,n),e.ref=t.ref,e.return=t,t.child=e}function hne(e,t,r,n,i){if(e!==null){var a=e.memoizedProps;if(uS(a,n)&&e.ref===t.ref)if(vl=!1,t.pendingProps=n=a,(e.lanes&i)!==0)e.flags&131072&&(vl=!0);else return t.lanes=e.lanes,Bh(e,t,i)}return w6(e,t,r,n,i)}function pne(e,t,r){var n=t.pendingProps,i=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},bi(bv,Yl),Yl|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,bi(bv,Yl),Yl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,bi(bv,Yl),Yl|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,bi(bv,Yl),Yl|=n;return Lo(e,t,i,r),t.child}function mne(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function w6(e,t,r,n,i){var a=Sl(r)?Qg:bo.current;return a=oy(t,a),Ov(t,i),r=CL(e,t,r,n,a,i),n=kL(),e!==null&&!vl?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Bh(e,t,i)):(Ui&&n&&fL(t),t.flags|=1,Lo(e,t,r,i),t.child)}function lV(e,t,r,n,i){if(Sl(r)){var a=!0;AA(t)}else a=!1;if(Ov(t,i),t.stateNode===null)zN(e,t),une(t,r,n),y6(t,r,n,i),n=!0;else if(e===null){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=r.contextType;typeof c=="object"&&c!==null?c=du(c):(c=Sl(r)?Qg:bo.current,c=oy(t,c));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==n||l!==c)&&rV(t,s,n,c),Vp=!1;var p=t.memoizedState;s.state=p,RA(t,n,s,i),l=t.memoizedState,o!==n||p!==l||wl.current||Vp?(typeof d=="function"&&(v6(t,r,d,n),l=t.memoizedState),(o=Vp||tV(t,r,o,n,p,l,c))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),s.props=n,s.state=l,s.context=c,n=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,Hre(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:zu(t.type,o),s.props=c,f=t.pendingProps,p=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=du(l):(l=Sl(r)?Qg:bo.current,l=oy(t,l));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||p!==l)&&rV(t,s,n,l),Vp=!1,p=t.memoizedState,s.state=p,RA(t,n,s,i);var x=t.memoizedState;o!==f||p!==x||wl.current||Vp?(typeof m=="function"&&(v6(t,r,m,n),x=t.memoizedState),(c=Vp||tV(t,r,c,n,p,x,l)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,x,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,x,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=x),s.props=n,s.state=x,s.context=l,n=c):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return S6(e,t,r,n,a,i)}function S6(e,t,r,n,i,a){mne(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return i&&GW(t,r,!1),Bh(e,t,a);n=t.stateNode,p_e.current=t;var o=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=cy(t,e.child,null,a),t.child=cy(t,null,o,a)):Lo(e,t,o,a),t.memoizedState=n.state,i&&GW(t,r,!0),t.child}function gne(e){var t=e.stateNode;t.pendingContext?qW(e,t.pendingContext,t.pendingContext!==t.context):t.context&&qW(e,t.context,!1),bL(e,t.containerInfo)}function cV(e,t,r,n,i){return ly(),pL(i),t.flags|=256,Lo(e,t,r,n),t.child}var E6={dehydrated:null,treeContext:null,retryLane:0};function C6(e){return{baseLanes:e,cachePool:null,transitions:null}}function xne(e,t,r){var n=t.pendingProps,i=Vi.current,a=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),bi(Vi,i&1),e===null)return g6(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,a?(n=t.mode,a=t.child,s={mode:"hidden",children:s},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=zO(s,n,0,null),e=Pg(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=C6(r),t.memoizedState=E6,e):AL(t,s));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return m_e(e,t,s,n,o,i,r);if(a){a=n.fallback,s=t.mode,i=e.child,o=i.sibling;var l={mode:"hidden",children:n.children};return!(s&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=A0(i,l),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=A0(o,a):(a=Pg(a,s,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,s=e.child.memoizedState,s=s===null?C6(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~r,t.memoizedState=E6,n}return a=e.child,e=a.sibling,n=A0(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function AL(e,t){return t=zO({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function c_(e,t,r,n){return n!==null&&pL(n),cy(t,e.child,null,r),e=AL(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function m_e(e,t,r,n,i,a,s){if(r)return t.flags&256?(t.flags&=-257,n=hj(Error(jt(422))),c_(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=zO({mode:"visible",children:n.children},i,0,null),a=Pg(a,i,s,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&cy(t,e.child,null,s),t.child.memoizedState=C6(s),t.memoizedState=E6,a);if(!(t.mode&1))return c_(e,t,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,a=Error(jt(419)),n=hj(a,n,void 0),c_(e,t,s,n)}if(o=(s&e.childLanes)!==0,vl||o){if(n=ws,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Lh(e,i),sd(n,e,i,-1))}return jL(),n=hj(Error(jt(421))),c_(e,t,s,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=A_e.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ic=C0(i.nextSibling),oc=t,Ui=!0,Gu=null,e!==null&&(Yc[Qc++]=ph,Yc[Qc++]=mh,Yc[Qc++]=Jg,ph=e.id,mh=e.overflow,Jg=t),t=AL(t,n.children),t.flags|=4096,t)}function uV(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),x6(e.return,t,r)}function pj(e,t,r,n,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function vne(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(Lo(e,t,n.children,r),n=Vi.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uV(e,r,t);else if(e.tag===19)uV(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(bi(Vi,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&jA(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),pj(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&jA(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}pj(t,!0,r,null,a);break;case"together":pj(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zN(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bh(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ex|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(jt(153));if(t.child!==null){for(e=t.child,r=A0(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=A0(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function g_e(e,t,r){switch(t.tag){case 3:gne(t),ly();break;case 5:Wre(t);break;case 1:Sl(t.type)&&AA(t);break;case 4:bL(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;bi(OA,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(bi(Vi,Vi.current&1),t.flags|=128,null):r&t.child.childLanes?xne(e,t,r):(bi(Vi,Vi.current&1),e=Bh(e,t,r),e!==null?e.sibling:null);bi(Vi,Vi.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return vne(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),bi(Vi,Vi.current),n)break;return null;case 22:case 23:return t.lanes=0,pne(e,t,r)}return Bh(e,t,r)}var yne,k6,bne,wne;yne=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};k6=function(){};bne=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,ig(af.current);var a=null;switch(r){case"input":i=GM(e,i),n=GM(e,n),a=[];break;case"select":i=Xi({},i,{value:void 0}),n=Xi({},n,{value:void 0}),a=[];break;case"textarea":i=YM(e,i),n=YM(e,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=_A)}JM(r,n);var s;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var o=i[c];for(s in o)o.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(nS.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in n){var l=n[c];if(o=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(a||(a=[]),a.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(nS.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Si("scroll",e),a||o===l||(a=[])):(a=a||[]).push(c,l))}r&&(a=a||[]).push("style",r);var c=a;(t.updateQueue=c)&&(t.flags|=4)}};wne=function(e,t,r,n){r!==n&&(t.flags|=4)};function yw(e,t){if(!Ui)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Zs(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function x_e(e,t,r){var n=t.pendingProps;switch(hL(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zs(t),null;case 1:return Sl(t.type)&&NA(),Zs(t),null;case 3:return n=t.stateNode,uy(),Ti(wl),Ti(bo),SL(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(o_(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Gu!==null&&(R6(Gu),Gu=null))),k6(e,t),Zs(t),null;case 5:wL(t);var i=ig(mS.current);if(r=t.type,e!==null&&t.stateNode!=null)bne(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(jt(166));return Zs(t),null}if(e=ig(af.current),o_(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[Xd]=t,n[hS]=a,e=(t.mode&1)!==0,r){case"dialog":Si("cancel",n),Si("close",n);break;case"iframe":case"object":case"embed":Si("load",n);break;case"video":case"audio":for(i=0;i<e2.length;i++)Si(e2[i],n);break;case"source":Si("error",n);break;case"img":case"image":case"link":Si("error",n),Si("load",n);break;case"details":Si("toggle",n);break;case"input":yW(n,a),Si("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Si("invalid",n);break;case"textarea":wW(n,a),Si("invalid",n)}JM(r,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?n.textContent!==o&&(a.suppressHydrationWarning!==!0&&s_(n.textContent,o,e),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&s_(n.textContent,o,e),i=["children",""+o]):nS.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&Si("scroll",n)}switch(r){case"input":Jk(n),bW(n,a,!0);break;case"textarea":Jk(n),SW(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=_A)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Xte(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[Xd]=t,e[hS]=n,yne(e,t,!1,!1),t.stateNode=e;e:{switch(s=ZM(r,n),r){case"dialog":Si("cancel",e),Si("close",e),i=n;break;case"iframe":case"object":case"embed":Si("load",e),i=n;break;case"video":case"audio":for(i=0;i<e2.length;i++)Si(e2[i],e);i=n;break;case"source":Si("error",e),i=n;break;case"img":case"image":case"link":Si("error",e),Si("load",e),i=n;break;case"details":Si("toggle",e),i=n;break;case"input":yW(e,n),i=GM(e,n),Si("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Xi({},n,{value:void 0}),Si("invalid",e);break;case"textarea":wW(e,n),i=YM(e,n),Si("invalid",e);break;default:i=n}JM(r,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?Jte(e,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Yte(e,l)):a==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&iS(e,l):typeof l=="number"&&iS(e,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(nS.hasOwnProperty(a)?l!=null&&a==="onScroll"&&Si("scroll",e):l!=null&&J5(e,a,l,s))}switch(r){case"input":Jk(e),bW(e,n,!1);break;case"textarea":Jk(e),SW(e);break;case"option":n.value!=null&&e.setAttribute("value",""+D0(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Nv(e,!!n.multiple,a,!1):n.defaultValue!=null&&Nv(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=_A)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Zs(t),null;case 6:if(e&&t.stateNode!=null)wne(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(jt(166));if(r=ig(mS.current),ig(af.current),o_(t)){if(n=t.stateNode,r=t.memoizedProps,n[Xd]=t,(a=n.nodeValue!==r)&&(e=oc,e!==null))switch(e.tag){case 3:s_(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&s_(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Xd]=t,t.stateNode=n}return Zs(t),null;case 13:if(Ti(Vi),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ui&&ic!==null&&t.mode&1&&!(t.flags&128))Bre(),ly(),t.flags|=98560,a=!1;else if(a=o_(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(jt(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(jt(317));a[Xd]=t}else ly(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Zs(t),a=!1}else Gu!==null&&(R6(Gu),Gu=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Vi.current&1?Ya===0&&(Ya=3):jL())),t.updateQueue!==null&&(t.flags|=4),Zs(t),null);case 4:return uy(),k6(e,t),e===null&&dS(t.stateNode.containerInfo),Zs(t),null;case 10:return xL(t.type._context),Zs(t),null;case 17:return Sl(t.type)&&NA(),Zs(t),null;case 19:if(Ti(Vi),a=t.memoizedState,a===null)return Zs(t),null;if(n=(t.flags&128)!==0,s=a.rendering,s===null)if(n)yw(a,!1);else{if(Ya!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=jA(e),s!==null){for(t.flags|=128,yw(a,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return bi(Vi,Vi.current&1|2),t.child}e=e.sibling}a.tail!==null&&wa()>fy&&(t.flags|=128,n=!0,yw(a,!1),t.lanes=4194304)}else{if(!n)if(e=jA(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),yw(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!Ui)return Zs(t),null}else 2*wa()-a.renderingStartTime>fy&&r!==1073741824&&(t.flags|=128,n=!0,yw(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(r=a.last,r!==null?r.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=wa(),t.sibling=null,r=Vi.current,bi(Vi,n?r&1|2:r&1),t):(Zs(t),null);case 22:case 23:return RL(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Yl&1073741824&&(Zs(t),t.subtreeFlags&6&&(t.flags|=8192)):Zs(t),null;case 24:return null;case 25:return null}throw Error(jt(156,t.tag))}function v_e(e,t){switch(hL(t),t.tag){case 1:return Sl(t.type)&&NA(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return uy(),Ti(wl),Ti(bo),SL(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return wL(t),null;case 13:if(Ti(Vi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(jt(340));ly()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ti(Vi),null;case 4:return uy(),null;case 10:return xL(t.type._context),null;case 22:case 23:return RL(),null;case 24:return null;default:return null}}var u_=!1,uo=!1,y_e=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function yv(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){aa(e,t,n)}else r.current=null}function _6(e,t,r){try{r()}catch(n){aa(e,t,n)}}var dV=!1;function b_e(e,t){if(c6=EA,e=_re(),dL(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var s=0,o=-1,l=-1,c=0,d=0,f=e,p=null;t:for(;;){for(var m;f!==r||i!==0&&f.nodeType!==3||(o=s+i),f!==a||n!==0&&f.nodeType!==3||(l=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break t;if(p===r&&++c===i&&(o=s),p===a&&++d===n&&(l=s),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(u6={focusedElem:e,selectionRange:r},EA=!1,Yt=t;Yt!==null;)if(t=Yt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Yt=e;else for(;Yt!==null;){t=Yt;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var y=x.memoizedProps,b=x.memoizedState,S=t.stateNode,_=S.getSnapshotBeforeUpdate(t.elementType===t.type?y:zu(t.type,y),b);S.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var C=t.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(jt(163))}}catch(A){aa(t,t.return,A)}if(e=t.sibling,e!==null){e.return=t.return,Yt=e;break}Yt=t.return}return x=dV,dV=!1,x}function S2(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&_6(t,r,a)}i=i.next}while(i!==n)}}function UO(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function N6(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Sne(e){var t=e.alternate;t!==null&&(e.alternate=null,Sne(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xd],delete t[hS],delete t[h6],delete t[r_e],delete t[n_e])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ene(e){return e.tag===5||e.tag===3||e.tag===4}function fV(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ene(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function A6(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=_A));else if(n!==4&&(e=e.child,e!==null))for(A6(e,t,r),e=e.sibling;e!==null;)A6(e,t,r),e=e.sibling}function T6(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(T6(e,t,r),e=e.sibling;e!==null;)T6(e,t,r),e=e.sibling}var js=null,Vu=!1;function Ap(e,t,r){for(r=r.child;r!==null;)Cne(e,t,r),r=r.sibling}function Cne(e,t,r){if(nf&&typeof nf.onCommitFiberUnmount=="function")try{nf.onCommitFiberUnmount(PO,r)}catch{}switch(r.tag){case 5:uo||yv(r,t);case 6:var n=js,i=Vu;js=null,Ap(e,t,r),js=n,Vu=i,js!==null&&(Vu?(e=js,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):js.removeChild(r.stateNode));break;case 18:js!==null&&(Vu?(e=js,r=r.stateNode,e.nodeType===8?oj(e.parentNode,r):e.nodeType===1&&oj(e,r),lS(e)):oj(js,r.stateNode));break;case 4:n=js,i=Vu,js=r.stateNode.containerInfo,Vu=!0,Ap(e,t,r),js=n,Vu=i;break;case 0:case 11:case 14:case 15:if(!uo&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&_6(r,t,s),i=i.next}while(i!==n)}Ap(e,t,r);break;case 1:if(!uo&&(yv(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){aa(r,t,o)}Ap(e,t,r);break;case 21:Ap(e,t,r);break;case 22:r.mode&1?(uo=(n=uo)||r.memoizedState!==null,Ap(e,t,r),uo=n):Ap(e,t,r);break;default:Ap(e,t,r)}}function hV(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new y_e),t.forEach(function(n){var i=T_e.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Du(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,s=t,o=s;e:for(;o!==null;){switch(o.tag){case 5:js=o.stateNode,Vu=!1;break e;case 3:js=o.stateNode.containerInfo,Vu=!0;break e;case 4:js=o.stateNode.containerInfo,Vu=!0;break e}o=o.return}if(js===null)throw Error(jt(160));Cne(a,s,i),js=null,Vu=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){aa(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)kne(t,e),t=t.sibling}function kne(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Du(t,e),Id(e),n&4){try{S2(3,e,e.return),UO(3,e)}catch(y){aa(e,e.return,y)}try{S2(5,e,e.return)}catch(y){aa(e,e.return,y)}}break;case 1:Du(t,e),Id(e),n&512&&r!==null&&yv(r,r.return);break;case 5:if(Du(t,e),Id(e),n&512&&r!==null&&yv(r,r.return),e.flags&32){var i=e.stateNode;try{iS(i,"")}catch(y){aa(e,e.return,y)}}if(n&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,s=r!==null?r.memoizedProps:a,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&Gte(i,a),ZM(o,s);var c=ZM(o,a);for(s=0;s<l.length;s+=2){var d=l[s],f=l[s+1];d==="style"?Jte(i,f):d==="dangerouslySetInnerHTML"?Yte(i,f):d==="children"?iS(i,f):J5(i,d,f,c)}switch(o){case"input":KM(i,a);break;case"textarea":Kte(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?Nv(i,!!a.multiple,m,!1):p!==!!a.multiple&&(a.defaultValue!=null?Nv(i,!!a.multiple,a.defaultValue,!0):Nv(i,!!a.multiple,a.multiple?[]:"",!1))}i[hS]=a}catch(y){aa(e,e.return,y)}}break;case 6:if(Du(t,e),Id(e),n&4){if(e.stateNode===null)throw Error(jt(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(y){aa(e,e.return,y)}}break;case 3:if(Du(t,e),Id(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{lS(t.containerInfo)}catch(y){aa(e,e.return,y)}break;case 4:Du(t,e),Id(e);break;case 13:Du(t,e),Id(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(OL=wa())),n&4&&hV(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(uo=(c=uo)||d,Du(t,e),uo=c):Du(t,e),Id(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(Yt=e,d=e.child;d!==null;){for(f=Yt=d;Yt!==null;){switch(p=Yt,m=p.child,p.tag){case 0:case 11:case 14:case 15:S2(4,p,p.return);break;case 1:yv(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(y){aa(n,r,y)}}break;case 5:yv(p,p.return);break;case 22:if(p.memoizedState!==null){mV(f);continue}}m!==null?(m.return=p,Yt=m):mV(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=Qte("display",s))}catch(y){aa(e,e.return,y)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(y){aa(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Du(t,e),Id(e),n&4&&hV(e);break;case 21:break;default:Du(t,e),Id(e)}}function Id(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Ene(r)){var n=r;break e}r=r.return}throw Error(jt(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(iS(i,""),n.flags&=-33);var a=fV(e);T6(e,a,i);break;case 3:case 4:var s=n.stateNode.containerInfo,o=fV(e);A6(e,o,s);break;default:throw Error(jt(161))}}catch(l){aa(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function w_e(e,t,r){Yt=e,_ne(e)}function _ne(e,t,r){for(var n=(e.mode&1)!==0;Yt!==null;){var i=Yt,a=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||u_;if(!s){var o=i.alternate,l=o!==null&&o.memoizedState!==null||uo;o=u_;var c=uo;if(u_=s,(uo=l)&&!c)for(Yt=i;Yt!==null;)s=Yt,l=s.child,s.tag===22&&s.memoizedState!==null?gV(i):l!==null?(l.return=s,Yt=l):gV(i);for(;a!==null;)Yt=a,_ne(a),a=a.sibling;Yt=i,u_=o,uo=c}pV(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Yt=a):pV(e)}}function pV(e){for(;Yt!==null;){var t=Yt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:uo||UO(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!uo)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:zu(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&JW(t,a,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}JW(t,s,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&lS(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(jt(163))}uo||t.flags&512&&N6(t)}catch(p){aa(t,t.return,p)}}if(t===e){Yt=null;break}if(r=t.sibling,r!==null){r.return=t.return,Yt=r;break}Yt=t.return}}function mV(e){for(;Yt!==null;){var t=Yt;if(t===e){Yt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Yt=r;break}Yt=t.return}}function gV(e){for(;Yt!==null;){var t=Yt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{UO(4,t)}catch(l){aa(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(l){aa(t,i,l)}}var a=t.return;try{N6(t)}catch(l){aa(t,a,l)}break;case 5:var s=t.return;try{N6(t)}catch(l){aa(t,s,l)}}}catch(l){aa(t,t.return,l)}if(t===e){Yt=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Yt=o;break}Yt=t.return}}var S_e=Math.ceil,FA=rp.ReactCurrentDispatcher,TL=rp.ReactCurrentOwner,nu=rp.ReactCurrentBatchConfig,jn=0,ws=null,Da=null,Hs=0,Yl=0,bv=Q0(0),Ya=0,yS=null,ex=0,$O=0,IL=0,E2=null,gl=null,OL=0,fy=1/0,ih=null,LA=!1,I6=null,_0=null,d_=!1,p0=null,BA=0,C2=0,O6=null,HN=-1,WN=0;function Ko(){return jn&6?wa():HN!==-1?HN:HN=wa()}function N0(e){return e.mode&1?jn&2&&Hs!==0?Hs&-Hs:a_e.transition!==null?(WN===0&&(WN=ure()),WN):(e=oi,e!==0||(e=window.event,e=e===void 0?16:xre(e.type)),e):1}function sd(e,t,r,n){if(50<C2)throw C2=0,O6=null,Error(jt(185));_E(e,r,n),(!(jn&2)||e!==ws)&&(e===ws&&(!(jn&2)&&($O|=r),Ya===4&&Zp(e,Hs)),El(e,n),r===1&&jn===0&&!(t.mode&1)&&(fy=wa()+500,FO&&J0()))}function El(e,t){var r=e.callbackNode;ake(e,t);var n=SA(e,e===ws?Hs:0);if(n===0)r!==null&&kW(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&kW(r),t===1)e.tag===0?i_e(xV.bind(null,e)):Mre(xV.bind(null,e)),e_e(function(){!(jn&6)&&J0()}),r=null;else{switch(dre(n)){case 1:r=nL;break;case 4:r=lre;break;case 16:r=wA;break;case 536870912:r=cre;break;default:r=wA}r=jne(r,Nne.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Nne(e,t){if(HN=-1,WN=0,jn&6)throw Error(jt(327));var r=e.callbackNode;if(Pv()&&e.callbackNode!==r)return null;var n=SA(e,e===ws?Hs:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=UA(e,n);else{t=n;var i=jn;jn|=2;var a=Tne();(ws!==e||Hs!==t)&&(ih=null,fy=wa()+500,Og(e,t));do try{k_e();break}catch(o){Ane(e,o)}while(!0);gL(),FA.current=a,jn=i,Da!==null?t=0:(ws=null,Hs=0,t=Ya)}if(t!==0){if(t===2&&(i=i6(e),i!==0&&(n=i,t=P6(e,i))),t===1)throw r=yS,Og(e,0),Zp(e,n),El(e,wa()),r;if(t===6)Zp(e,n);else{if(i=e.current.alternate,!(n&30)&&!E_e(i)&&(t=UA(e,n),t===2&&(a=i6(e),a!==0&&(n=a,t=P6(e,a))),t===1))throw r=yS,Og(e,0),Zp(e,n),El(e,wa()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(jt(345));case 2:Wm(e,gl,ih);break;case 3:if(Zp(e,n),(n&130023424)===n&&(t=OL+500-wa(),10<t)){if(SA(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Ko(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=f6(Wm.bind(null,e,gl,ih),t);break}Wm(e,gl,ih);break;case 4:if(Zp(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var s=31-ad(n);a=1<<s,s=t[s],s>i&&(i=s),n&=~a}if(n=i,n=wa()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*S_e(n/1960))-n,10<n){e.timeoutHandle=f6(Wm.bind(null,e,gl,ih),n);break}Wm(e,gl,ih);break;case 5:Wm(e,gl,ih);break;default:throw Error(jt(329))}}}return El(e,wa()),e.callbackNode===r?Nne.bind(null,e):null}function P6(e,t){var r=E2;return e.current.memoizedState.isDehydrated&&(Og(e,t).flags|=256),e=UA(e,t),e!==2&&(t=gl,gl=r,t!==null&&R6(t)),e}function R6(e){gl===null?gl=e:gl.push.apply(gl,e)}function E_e(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!dd(a(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zp(e,t){for(t&=~IL,t&=~$O,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ad(t),n=1<<r;e[r]=-1,t&=~n}}function xV(e){if(jn&6)throw Error(jt(327));Pv();var t=SA(e,0);if(!(t&1))return El(e,wa()),null;var r=UA(e,t);if(e.tag!==0&&r===2){var n=i6(e);n!==0&&(t=n,r=P6(e,n))}if(r===1)throw r=yS,Og(e,0),Zp(e,t),El(e,wa()),r;if(r===6)throw Error(jt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Wm(e,gl,ih),El(e,wa()),null}function PL(e,t){var r=jn;jn|=1;try{return e(t)}finally{jn=r,jn===0&&(fy=wa()+500,FO&&J0())}}function tx(e){p0!==null&&p0.tag===0&&!(jn&6)&&Pv();var t=jn;jn|=1;var r=nu.transition,n=oi;try{if(nu.transition=null,oi=1,e)return e()}finally{oi=n,nu.transition=r,jn=t,!(jn&6)&&J0()}}function RL(){Yl=bv.current,Ti(bv)}function Og(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Zke(r)),Da!==null)for(r=Da.return;r!==null;){var n=r;switch(hL(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&NA();break;case 3:uy(),Ti(wl),Ti(bo),SL();break;case 5:wL(n);break;case 4:uy();break;case 13:Ti(Vi);break;case 19:Ti(Vi);break;case 10:xL(n.type._context);break;case 22:case 23:RL()}r=r.return}if(ws=e,Da=e=A0(e.current,null),Hs=Yl=t,Ya=0,yS=null,IL=$O=ex=0,gl=E2=null,ng!==null){for(t=0;t<ng.length;t++)if(r=ng[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var s=a.next;a.next=i,n.next=s}r.pending=n}ng=null}return e}function Ane(e,t){do{var r=Da;try{if(gL(),UN.current=MA,DA){for(var n=Ki.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}DA=!1}if(Zg=0,ms=qa=Ki=null,w2=!1,gS=0,TL.current=null,r===null||r.return===null){Ya=1,yS=t,Da=null;break}e:{var a=e,s=r.return,o=r,l=t;if(t=Hs,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=iV(s);if(m!==null){m.flags&=-257,aV(m,s,o,a,t),m.mode&1&&nV(a,c,t),t=m,l=c;var x=t.updateQueue;if(x===null){var y=new Set;y.add(l),t.updateQueue=y}else x.add(l);break e}else{if(!(t&1)){nV(a,c,t),jL();break e}l=Error(jt(426))}}else if(Ui&&o.mode&1){var b=iV(s);if(b!==null){!(b.flags&65536)&&(b.flags|=256),aV(b,s,o,a,t),pL(dy(l,o));break e}}a=l=dy(l,o),Ya!==4&&(Ya=2),E2===null?E2=[a]:E2.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var S=dne(a,l,t);QW(a,S);break e;case 1:o=l;var _=a.type,C=a.stateNode;if(!(a.flags&128)&&(typeof _.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(_0===null||!_0.has(C)))){a.flags|=65536,t&=-t,a.lanes|=t;var A=fne(a,o,t);QW(a,A);break e}}a=a.return}while(a!==null)}One(r)}catch(j){t=j,Da===r&&r!==null&&(Da=r=r.return);continue}break}while(!0)}function Tne(){var e=FA.current;return FA.current=MA,e===null?MA:e}function jL(){(Ya===0||Ya===3||Ya===2)&&(Ya=4),ws===null||!(ex&268435455)&&!($O&268435455)||Zp(ws,Hs)}function UA(e,t){var r=jn;jn|=2;var n=Tne();(ws!==e||Hs!==t)&&(ih=null,Og(e,t));do try{C_e();break}catch(i){Ane(e,i)}while(!0);if(gL(),jn=r,FA.current=n,Da!==null)throw Error(jt(261));return ws=null,Hs=0,Ya}function C_e(){for(;Da!==null;)Ine(Da)}function k_e(){for(;Da!==null&&!YCe();)Ine(Da)}function Ine(e){var t=Rne(e.alternate,e,Yl);e.memoizedProps=e.pendingProps,t===null?One(e):Da=t,TL.current=null}function One(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=v_e(r,t),r!==null){r.flags&=32767,Da=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ya=6,Da=null;return}}else if(r=x_e(r,t,Yl),r!==null){Da=r;return}if(t=t.sibling,t!==null){Da=t;return}Da=t=e}while(t!==null);Ya===0&&(Ya=5)}function Wm(e,t,r){var n=oi,i=nu.transition;try{nu.transition=null,oi=1,__e(e,t,r,n)}finally{nu.transition=i,oi=n}return null}function __e(e,t,r,n){do Pv();while(p0!==null);if(jn&6)throw Error(jt(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(jt(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(ske(e,a),e===ws&&(Da=ws=null,Hs=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||d_||(d_=!0,jne(wA,function(){return Pv(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=nu.transition,nu.transition=null;var s=oi;oi=1;var o=jn;jn|=4,TL.current=null,b_e(e,r),kne(r,e),qke(u6),EA=!!c6,u6=c6=null,e.current=r,w_e(r),QCe(),jn=o,oi=s,nu.transition=a}else e.current=r;if(d_&&(d_=!1,p0=e,BA=i),a=e.pendingLanes,a===0&&(_0=null),eke(r.stateNode),El(e,wa()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(LA)throw LA=!1,e=I6,I6=null,e;return BA&1&&e.tag!==0&&Pv(),a=e.pendingLanes,a&1?e===O6?C2++:(C2=0,O6=e):C2=0,J0(),null}function Pv(){if(p0!==null){var e=dre(BA),t=nu.transition,r=oi;try{if(nu.transition=null,oi=16>e?16:e,p0===null)var n=!1;else{if(e=p0,p0=null,BA=0,jn&6)throw Error(jt(331));var i=jn;for(jn|=4,Yt=e.current;Yt!==null;){var a=Yt,s=a.child;if(Yt.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(Yt=c;Yt!==null;){var d=Yt;switch(d.tag){case 0:case 11:case 15:S2(8,d,a)}var f=d.child;if(f!==null)f.return=d,Yt=f;else for(;Yt!==null;){d=Yt;var p=d.sibling,m=d.return;if(Sne(d),d===c){Yt=null;break}if(p!==null){p.return=m,Yt=p;break}Yt=m}}}var x=a.alternate;if(x!==null){var y=x.child;if(y!==null){x.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}Yt=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,Yt=s;else e:for(;Yt!==null;){if(a=Yt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:S2(9,a,a.return)}var S=a.sibling;if(S!==null){S.return=a.return,Yt=S;break e}Yt=a.return}}var _=e.current;for(Yt=_;Yt!==null;){s=Yt;var C=s.child;if(s.subtreeFlags&2064&&C!==null)C.return=s,Yt=C;else e:for(s=_;Yt!==null;){if(o=Yt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:UO(9,o)}}catch(j){aa(o,o.return,j)}if(o===s){Yt=null;break e}var A=o.sibling;if(A!==null){A.return=o.return,Yt=A;break e}Yt=o.return}}if(jn=i,J0(),nf&&typeof nf.onPostCommitFiberRoot=="function")try{nf.onPostCommitFiberRoot(PO,e)}catch{}n=!0}return n}finally{oi=r,nu.transition=t}}return!1}function vV(e,t,r){t=dy(r,t),t=dne(e,t,1),e=k0(e,t,1),t=Ko(),e!==null&&(_E(e,1,t),El(e,t))}function aa(e,t,r){if(e.tag===3)vV(e,e,r);else for(;t!==null;){if(t.tag===3){vV(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(_0===null||!_0.has(n))){e=dy(r,e),e=fne(t,e,1),t=k0(t,e,1),e=Ko(),t!==null&&(_E(t,1,e),El(t,e));break}}t=t.return}}function N_e(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ko(),e.pingedLanes|=e.suspendedLanes&r,ws===e&&(Hs&r)===r&&(Ya===4||Ya===3&&(Hs&130023424)===Hs&&500>wa()-OL?Og(e,0):IL|=r),El(e,t)}function Pne(e,t){t===0&&(e.mode&1?(t=t_,t_<<=1,!(t_&130023424)&&(t_=4194304)):t=1);var r=Ko();e=Lh(e,t),e!==null&&(_E(e,t,r),El(e,r))}function A_e(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Pne(e,r)}function T_e(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(jt(314))}n!==null&&n.delete(t),Pne(e,r)}var Rne;Rne=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||wl.current)vl=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return vl=!1,g_e(e,t,r);vl=!!(e.flags&131072)}else vl=!1,Ui&&t.flags&1048576&&Fre(t,IA,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;zN(e,t),e=t.pendingProps;var i=oy(t,bo.current);Ov(t,r),i=CL(null,t,n,e,i,r);var a=kL();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Sl(n)?(a=!0,AA(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,yL(t),i.updater=BO,t.stateNode=i,i._reactInternals=t,y6(t,n,e,r),t=S6(null,t,n,!0,a,r)):(t.tag=0,Ui&&a&&fL(t),Lo(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(zN(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=O_e(n),e=zu(n,e),i){case 0:t=w6(null,t,n,e,r);break e;case 1:t=lV(null,t,n,e,r);break e;case 11:t=sV(null,t,n,e,r);break e;case 14:t=oV(null,t,n,zu(n.type,e),r);break e}throw Error(jt(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:zu(n,i),w6(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:zu(n,i),lV(e,t,n,i,r);case 3:e:{if(gne(t),e===null)throw Error(jt(387));n=t.pendingProps,a=t.memoizedState,i=a.element,Hre(e,t),RA(t,n,null,r);var s=t.memoizedState;if(n=s.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=dy(Error(jt(423)),t),t=cV(e,t,n,r,i);break e}else if(n!==i){i=dy(Error(jt(424)),t),t=cV(e,t,n,r,i);break e}else for(ic=C0(t.stateNode.containerInfo.firstChild),oc=t,Ui=!0,Gu=null,r=$re(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ly(),n===i){t=Bh(e,t,r);break e}Lo(e,t,n,r)}t=t.child}return t;case 5:return Wre(t),e===null&&g6(t),n=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,s=i.children,d6(n,i)?s=null:a!==null&&d6(n,a)&&(t.flags|=32),mne(e,t),Lo(e,t,s,r),t.child;case 6:return e===null&&g6(t),null;case 13:return xne(e,t,r);case 4:return bL(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=cy(t,null,n,r):Lo(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:zu(n,i),sV(e,t,n,i,r);case 7:return Lo(e,t,t.pendingProps,r),t.child;case 8:return Lo(e,t,t.pendingProps.children,r),t.child;case 12:return Lo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,bi(OA,n._currentValue),n._currentValue=s,a!==null)if(dd(a.value,s)){if(a.children===i.children&&!wl.current){t=Bh(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(a.tag===1){l=wh(-1,r&-r),l.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),x6(a.return,r,t),o.lanes|=r;break}l=l.next}}else if(a.tag===10)s=a.type===t.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(jt(341));s.lanes|=r,o=s.alternate,o!==null&&(o.lanes|=r),x6(s,r,t),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Lo(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Ov(t,r),i=du(i),n=n(i),t.flags|=1,Lo(e,t,n,r),t.child;case 14:return n=t.type,i=zu(n,t.pendingProps),i=zu(n.type,i),oV(e,t,n,i,r);case 15:return hne(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:zu(n,i),zN(e,t),t.tag=1,Sl(n)?(e=!0,AA(t)):e=!1,Ov(t,r),une(t,n,i),y6(t,n,i,r),S6(null,t,n,!0,e,r);case 19:return vne(e,t,r);case 22:return pne(e,t,r)}throw Error(jt(156,t.tag))};function jne(e,t){return ore(e,t)}function I_e(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function eu(e,t,r,n){return new I_e(e,t,r,n)}function DL(e){return e=e.prototype,!(!e||!e.isReactComponent)}function O_e(e){if(typeof e=="function")return DL(e)?1:0;if(e!=null){if(e=e.$$typeof,e===eL)return 11;if(e===tL)return 14}return 2}function A0(e,t){var r=e.alternate;return r===null?(r=eu(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function VN(e,t,r,n,i,a){var s=2;if(n=e,typeof e=="function")DL(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case uv:return Pg(r.children,i,a,t);case Z5:s=8,i|=8;break;case HM:return e=eu(12,r,t,i|2),e.elementType=HM,e.lanes=a,e;case WM:return e=eu(13,r,t,i),e.elementType=WM,e.lanes=a,e;case VM:return e=eu(19,r,t,i),e.elementType=VM,e.lanes=a,e;case Wte:return zO(r,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case zte:s=10;break e;case Hte:s=9;break e;case eL:s=11;break e;case tL:s=14;break e;case Wp:s=16,n=null;break e}throw Error(jt(130,e==null?e:typeof e,""))}return t=eu(s,r,t,i),t.elementType=e,t.type=n,t.lanes=a,t}function Pg(e,t,r,n){return e=eu(7,e,n,t),e.lanes=r,e}function zO(e,t,r,n){return e=eu(22,e,n,t),e.elementType=Wte,e.lanes=r,e.stateNode={isHidden:!1},e}function mj(e,t,r){return e=eu(6,e,null,t),e.lanes=r,e}function gj(e,t,r){return t=eu(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function P_e(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=YR(0),this.expirationTimes=YR(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=YR(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ML(e,t,r,n,i,a,s,o,l){return e=new P_e(e,t,r,o,l),t===1?(t=1,a===!0&&(t|=8)):t=0,a=eu(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},yL(a),e}function R_e(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cv,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Dne(e){if(!e)return M0;e=e._reactInternals;e:{if(Rx(e)!==e||e.tag!==1)throw Error(jt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Sl(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(jt(171))}if(e.tag===1){var r=e.type;if(Sl(r))return Dre(e,r,t)}return t}function Mne(e,t,r,n,i,a,s,o,l){return e=ML(r,n,!0,e,i,a,s,o,l),e.context=Dne(null),r=e.current,n=Ko(),i=N0(r),a=wh(n,i),a.callback=t??null,k0(r,a,i),e.current.lanes=i,_E(e,i,n),El(e,n),e}function HO(e,t,r,n){var i=t.current,a=Ko(),s=N0(i);return r=Dne(r),t.context===null?t.context=r:t.pendingContext=r,t=wh(a,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=k0(i,t,s),e!==null&&(sd(e,i,s,a),BN(e,i,s)),s}function $A(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function yV(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function FL(e,t){yV(e,t),(e=e.alternate)&&yV(e,t)}function j_e(){return null}var Fne=typeof reportError=="function"?reportError:function(e){console.error(e)};function LL(e){this._internalRoot=e}WO.prototype.render=LL.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(jt(409));HO(e,t,null,null)};WO.prototype.unmount=LL.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;tx(function(){HO(null,e,null,null)}),t[Fh]=null}};function WO(e){this._internalRoot=e}WO.prototype.unstable_scheduleHydration=function(e){if(e){var t=pre();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Jp.length&&t!==0&&t<Jp[r].priority;r++);Jp.splice(r,0,e),r===0&&gre(e)}};function BL(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function VO(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function bV(){}function D_e(e,t,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var c=$A(s);a.call(c)}}var s=Mne(t,n,e,0,null,!1,!1,"",bV);return e._reactRootContainer=s,e[Fh]=s.current,dS(e.nodeType===8?e.parentNode:e),tx(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var c=$A(l);o.call(c)}}var l=ML(e,0,!1,null,null,!1,!1,"",bV);return e._reactRootContainer=l,e[Fh]=l.current,dS(e.nodeType===8?e.parentNode:e),tx(function(){HO(t,l,r,n)}),l}function qO(e,t,r,n,i){var a=r._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var l=$A(s);o.call(l)}}HO(t,s,e,i)}else s=D_e(r,t,e,i,n);return $A(s)}fre=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Zw(t.pendingLanes);r!==0&&(iL(t,r|1),El(t,wa()),!(jn&6)&&(fy=wa()+500,J0()))}break;case 13:tx(function(){var n=Lh(e,1);if(n!==null){var i=Ko();sd(n,e,1,i)}}),FL(e,1)}};aL=function(e){if(e.tag===13){var t=Lh(e,134217728);if(t!==null){var r=Ko();sd(t,e,134217728,r)}FL(e,134217728)}};hre=function(e){if(e.tag===13){var t=N0(e),r=Lh(e,t);if(r!==null){var n=Ko();sd(r,e,t,n)}FL(e,t)}};pre=function(){return oi};mre=function(e,t){var r=oi;try{return oi=e,t()}finally{oi=r}};t6=function(e,t,r){switch(t){case"input":if(KM(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=MO(n);if(!i)throw Error(jt(90));qte(n),KM(n,i)}}}break;case"textarea":Kte(e,r);break;case"select":t=r.value,t!=null&&Nv(e,!!r.multiple,t,!1)}};tre=PL;rre=tx;var M_e={usingClientEntryPoint:!1,Events:[AE,pv,MO,Zte,ere,PL]},bw={findFiberByHostInstance:rg,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},F_e={bundleType:bw.bundleType,version:bw.version,rendererPackageName:bw.rendererPackageName,rendererConfig:bw.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rp.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=are(e),e===null?null:e.stateNode},findFiberByHostInstance:bw.findFiberByHostInstance||j_e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var f_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!f_.isDisabled&&f_.supportsFiber)try{PO=f_.inject(F_e),nf=f_}catch{}}vc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M_e;vc.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!BL(t))throw Error(jt(200));return R_e(e,t,null,r)};vc.createRoot=function(e,t){if(!BL(e))throw Error(jt(299));var r=!1,n="",i=Fne;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=ML(e,1,!1,null,null,r,!1,n,i),e[Fh]=t.current,dS(e.nodeType===8?e.parentNode:e),new LL(t)};vc.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(jt(188)):(e=Object.keys(e).join(","),Error(jt(268,e)));return e=are(t),e=e===null?null:e.stateNode,e};vc.flushSync=function(e){return tx(e)};vc.hydrate=function(e,t,r){if(!VO(t))throw Error(jt(200));return qO(null,e,t,!0,r)};vc.hydrateRoot=function(e,t,r){if(!BL(e))throw Error(jt(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",s=Fne;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=Mne(t,null,e,1,r??null,i,!1,a,s),e[Fh]=t.current,dS(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new WO(t)};vc.render=function(e,t,r){if(!VO(t))throw Error(jt(200));return qO(null,e,t,!1,r)};vc.unmountComponentAtNode=function(e){if(!VO(e))throw Error(jt(40));return e._reactRootContainer?(tx(function(){qO(null,null,e,!1,function(){e._reactRootContainer=null,e[Fh]=null})}),!0):!1};vc.unstable_batchedUpdates=PL;vc.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!VO(r))throw Error(jt(200));if(e==null||e._reactInternals===void 0)throw Error(jt(38));return qO(e,t,r,!1,n)};vc.version="18.3.1-next-f1338f8080-20240426";function Lne(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Lne)}catch(e){console.error(e)}}Lne(),Lte.exports=vc;var Ml=Lte.exports;const UL=Vs(Ml),L_e=V5({__proto__:null,default:UL},[Ml]);var wV=Ml;$M.createRoot=wV.createRoot,$M.hydrateRoot=wV.hydrateRoot;/**
 * @remix-run/router v1.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ki(){return ki=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ki.apply(this,arguments)}var xi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(xi||(xi={}));const SV="popstate";function Bne(e){e===void 0&&(e={});let{initialEntries:t=["/"],initialIndex:r,v5Compat:n=!1}=e,i;i=t.map((m,x)=>d(m,typeof m=="string"?null:m.state,x===0?"default":void 0));let a=l(r??i.length-1),s=xi.Pop,o=null;function l(m){return Math.min(Math.max(m,0),i.length-1)}function c(){return i[a]}function d(m,x,y){x===void 0&&(x=null);let b=rx(i?c().pathname:"/",m,x,y);return Uh(b.pathname.charAt(0)==="/","relative pathnames are not supported in memory history: "+JSON.stringify(m)),b}function f(m){return typeof m=="string"?m:fd(m)}return{get index(){return a},get action(){return s},get location(){return c()},createHref:f,createURL(m){return new URL(f(m),"http://localhost")},encodeLocation(m){let x=typeof m=="string"?bu(m):m;return{pathname:x.pathname||"",search:x.search||"",hash:x.hash||""}},push(m,x){s=xi.Push;let y=d(m,x);a+=1,i.splice(a,i.length,y),n&&o&&o({action:s,location:y,delta:1})},replace(m,x){s=xi.Replace;let y=d(m,x);i[a]=y,n&&o&&o({action:s,location:y,delta:0})},go(m){s=xi.Pop;let x=l(a+m),y=i[x];a=x,o&&o({action:s,location:y,delta:m})},listen(m){return o=m,()=>{o=null}}}}function Une(e){e===void 0&&(e={});function t(n,i){let{pathname:a,search:s,hash:o}=n.location;return rx("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:fd(i)}return zne(t,r,null,e)}function $ne(e){e===void 0&&(e={});function t(i,a){let{pathname:s="/",search:o="",hash:l=""}=bu(i.location.hash.substr(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),rx("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(i,a){let s=i.document.querySelector("base"),o="";if(s&&s.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");o=c===-1?l:l.slice(0,c)}return o+"#"+(typeof a=="string"?a:fd(a))}function n(i,a){Uh(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return zne(t,r,n,e)}function Er(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Uh(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function B_e(){return Math.random().toString(36).substr(2,8)}function EV(e,t){return{usr:e.state,key:e.key,idx:t}}function rx(e,t,r,n){return r===void 0&&(r=null),ki({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?bu(t):t,{state:r,key:t&&t.key||n||B_e()})}function fd(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function bu(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function zne(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,s=i.history,o=xi.Pop,l=null,c=d();c==null&&(c=0,s.replaceState(ki({},s.state,{idx:c}),""));function d(){return(s.state||{idx:null}).idx}function f(){o=xi.Pop;let b=d(),S=b==null?null:b-c;c=b,l&&l({action:o,location:y.location,delta:S})}function p(b,S){o=xi.Push;let _=rx(y.location,b,S);r&&r(_,b),c=d()+1;let C=EV(_,c),A=y.createHref(_);try{s.pushState(C,"",A)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;i.location.assign(A)}a&&l&&l({action:o,location:y.location,delta:1})}function m(b,S){o=xi.Replace;let _=rx(y.location,b,S);r&&r(_,b),c=d();let C=EV(_,c),A=y.createHref(_);s.replaceState(C,"",A),a&&l&&l({action:o,location:y.location,delta:0})}function x(b){let S=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof b=="string"?b:fd(b);return _=_.replace(/ $/,"%20"),Er(S,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,S)}let y={get action(){return o},get location(){return e(i,s)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(SV,f),l=b,()=>{i.removeEventListener(SV,f),l=null}},createHref(b){return t(i,b)},createURL:x,encodeLocation(b){let S=x(b);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:p,replace:m,go(b){return s.go(b)}};return y}var Li;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Li||(Li={}));const U_e=new Set(["lazy","caseSensitive","path","id","index","children"]);function $_e(e){return e.index===!0}function j6(e,t,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),e.map((i,a)=>{let s=[...r,a],o=typeof i.id=="string"?i.id:s.join("-");if(Er(i.index!==!0||!i.children,"Cannot specify children on an index route"),Er(!n[o],'Found a route id collision on id "'+o+`".  Route id's must be globally unique within Data Router usages`),$_e(i)){let l=ki({},i,t(i),{id:o});return n[o]=l,l}else{let l=ki({},i,t(i),{id:o,children:void 0});return n[o]=l,i.children&&(l.children=j6(i.children,t,s,n)),l}})}function ag(e,t,r){r===void 0&&(r="/");let n=typeof t=="string"?bu(t):t,i=Pl(n.pathname||"/",r);if(i==null)return null;let a=Wne(e);z_e(a);let s=null;for(let o=0;s==null&&o<a.length;++o){let l=eNe(i);s=Q_e(a[o],l)}return s}function Hne(e,t){let{route:r,pathname:n,params:i}=e;return{id:r.id,pathname:n,params:i,data:t[r.id],handle:r.handle}}function Wne(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(a,s,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};l.relativePath.startsWith("/")&&(Er(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=sf([n,l.relativePath]),d=r.concat(l);a.children&&a.children.length>0&&(Er(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Wne(a.children,t,d,c)),!(a.path==null&&!a.index)&&t.push({path:c,score:X_e(c,a.index),routesMeta:d})};return e.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,s);else for(let l of Vne(a.path))i(a,s,l)}),t}function Vne(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let s=Vne(n.join("/")),o=[];return o.push(...s.map(l=>l===""?a:[a,l].join("/"))),i&&o.push(...s),o.map(l=>e.startsWith("/")&&l===""?"/":l)}function z_e(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Y_e(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const H_e=/^:[\w-]+$/,W_e=3,V_e=2,q_e=1,G_e=10,K_e=-2,CV=e=>e==="*";function X_e(e,t){let r=e.split("/"),n=r.length;return r.some(CV)&&(n+=K_e),t&&(n+=V_e),r.filter(i=>!CV(i)).reduce((i,a)=>i+(H_e.test(a)?W_e:a===""?q_e:G_e),n)}function Y_e(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function Q_e(e,t){let{routesMeta:r}=e,n={},i="/",a=[];for(let s=0;s<r.length;++s){let o=r[s],l=s===r.length-1,c=i==="/"?t:t.slice(i.length)||"/",d=bS({path:o.relativePath,caseSensitive:o.caseSensitive,end:l},c);if(!d)return null;Object.assign(n,d.params);let f=o.route;a.push({params:n,pathname:sf([i,d.pathname]),pathnameBase:rNe(sf([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=sf([i,d.pathnameBase]))}return a}function J_e(e,t){t===void 0&&(t={});let r=e;r.endsWith("*")&&r!=="*"&&!r.endsWith("/*")&&(Uh(!1,'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".')),r=r.replace(/\*$/,"/*"));const n=r.startsWith("/")?"/":"",i=s=>s==null?"":typeof s=="string"?s:String(s),a=r.split(/\/+/).map((s,o,l)=>{if(o===l.length-1&&s==="*")return i(t["*"]);const d=s.match(/^:([\w-]+)(\??)$/);if(d){const[,f,p]=d;let m=t[f];return Er(p==="?"||m!=null,'Missing ":'+f+'" param'),i(m)}return s.replace(/\?$/g,"")}).filter(s=>!!s);return n+a.join("/")}function bS(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Z_e(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((c,d,f)=>{let{paramName:p,isOptional:m}=d;if(p==="*"){let y=o[f]||"";s=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const x=o[f];return m&&!x?c[p]=void 0:c[p]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:s,pattern:e}}function Z_e(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Uh(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function eNe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Uh(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Pl(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function qne(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?bu(e):e;return{pathname:r?r.startsWith("/")?r:tNe(r,t):t,search:nNe(n),hash:iNe(i)}}function tNe(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function xj(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Gne(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function GO(e,t){let r=Gne(e);return t?r.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function KO(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=bu(e):(i=ki({},e),Er(!i.pathname||!i.pathname.includes("?"),xj("?","pathname","search",i)),Er(!i.pathname||!i.pathname.includes("#"),xj("#","pathname","hash",i)),Er(!i.search||!i.search.includes("#"),xj("#","search","hash",i)));let a=e===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=r;else{let f=t.length-1;if(!n&&s.startsWith("..")){let p=s.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}o=f>=0?t[f]:"/"}let l=qne(i,o),c=s&&s!=="/"&&s.endsWith("/"),d=(a||s===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const sf=e=>e.join("/").replace(/\/\/+/g,"/"),rNe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),nNe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,iNe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,aNe=function(t,r){r===void 0&&(r={});let n=typeof r=="number"?{status:r}:r,i=new Headers(n.headers);return i.has("Content-Type")||i.set("Content-Type","application/json; charset=utf-8"),new Response(JSON.stringify(t),ki({},n,{headers:i}))};class zA extends Error{}class sNe{constructor(t,r){this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],Er(t&&typeof t=="object"&&!Array.isArray(t),"defer() only accepts plain objects");let n;this.abortPromise=new Promise((a,s)=>n=s),this.controller=new AbortController;let i=()=>n(new zA("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",i),this.controller.signal.addEventListener("abort",i),this.data=Object.entries(t).reduce((a,s)=>{let[o,l]=s;return Object.assign(a,{[o]:this.trackPromise(o,l)})},{}),this.done&&this.unlistenAbortSignal(),this.init=r}trackPromise(t,r){if(!(r instanceof Promise))return r;this.deferredKeys.push(t),this.pendingKeysSet.add(t);let n=Promise.race([r,this.abortPromise]).then(i=>this.onSettle(n,t,void 0,i),i=>this.onSettle(n,t,i));return n.catch(()=>{}),Object.defineProperty(n,"_tracked",{get:()=>!0}),n}onSettle(t,r,n,i){if(this.controller.signal.aborted&&n instanceof zA)return this.unlistenAbortSignal(),Object.defineProperty(t,"_error",{get:()=>n}),Promise.reject(n);if(this.pendingKeysSet.delete(r),this.done&&this.unlistenAbortSignal(),n===void 0&&i===void 0){let a=new Error('Deferred data for key "'+r+'" resolved/rejected with `undefined`, you must resolve/reject with a value or `null`.');return Object.defineProperty(t,"_error",{get:()=>a}),this.emit(!1,r),Promise.reject(a)}return i===void 0?(Object.defineProperty(t,"_error",{get:()=>n}),this.emit(!1,r),Promise.reject(n)):(Object.defineProperty(t,"_data",{get:()=>i}),this.emit(!1,r),i)}emit(t,r){this.subscribers.forEach(n=>n(t,r))}subscribe(t){return this.subscribers.add(t),()=>this.subscribers.delete(t)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach((t,r)=>this.pendingKeysSet.delete(r)),this.emit(!0)}async resolveData(t){let r=!1;if(!this.done){let n=()=>this.cancel();t.addEventListener("abort",n),r=await new Promise(i=>{this.subscribe(a=>{t.removeEventListener("abort",n),(a||this.done)&&i(a)})})}return r}get done(){return this.pendingKeysSet.size===0}get unwrappedData(){return Er(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((t,r)=>{let[n,i]=r;return Object.assign(t,{[n]:lNe(i)})},{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}function oNe(e){return e instanceof Promise&&e._tracked===!0}function lNe(e){if(!oNe(e))return e;if(e._error)throw e._error;return e._data}const cNe=function(t,r){r===void 0&&(r={});let n=typeof r=="number"?{status:r}:r;return new sNe(t,n)},Kne=function(t,r){r===void 0&&(r=302);let n=r;typeof n=="number"?n={status:n}:typeof n.status>"u"&&(n.status=302);let i=new Headers(n.headers);return i.set("Location",t),new Response(null,ki({},n,{headers:i}))},uNe=(e,t)=>{let r=Kne(e,t);return r.headers.set("X-Remix-Reload-Document","true"),r};class XO{constructor(t,r,n,i){i===void 0&&(i=!1),this.status=t,this.statusText=r||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function YO(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Xne=["post","put","patch","delete"],dNe=new Set(Xne),fNe=["get",...Xne],hNe=new Set(fNe),pNe=new Set([301,302,303,307,308]),mNe=new Set([307,308]),vj={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Yne={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ev={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},$L=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gNe=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),Qne="remix-router-transitions";function zL(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",n=!r;Er(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(e.mapRouteProperties)i=e.mapRouteProperties;else if(e.detectErrorBoundary){let We=e.detectErrorBoundary;i=Je=>({hasErrorBoundary:We(Je)})}else i=gNe;let a={},s=j6(e.routes,i,void 0,a),o,l=e.basename||"/",c=e.unstable_dataStrategy||bNe,d=ki({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},e.future),f=null,p=new Set,m=null,x=null,y=null,b=e.hydrationData!=null,S=ag(s,e.history.location,l),_=null;if(S==null){let We=qc(404,{pathname:e.history.location.pathname}),{matches:Je,route:rt}=jV(s);S=Je,_={[rt.id]:We}}let C,A=S.some(We=>We.route.lazy),j=S.some(We=>We.route.loader);if(A)C=!1;else if(!j)C=!0;else if(d.v7_partialHydration){let We=e.hydrationData?e.hydrationData.loaderData:null,Je=e.hydrationData?e.hydrationData.errors:null,rt=_t=>_t.route.loader?typeof _t.route.loader=="function"&&_t.route.loader.hydrate===!0?!1:We&&We[_t.route.id]!==void 0||Je&&Je[_t.route.id]!==void 0:!0;if(Je){let _t=S.findIndex(Ut=>Je[Ut.route.id]!==void 0);C=S.slice(0,_t+1).every(rt)}else C=S.every(rt)}else C=e.hydrationData!=null;let P,O={historyAction:e.history.action,location:e.history.location,matches:S,initialized:C,navigation:vj,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||_,fetchers:new Map,blockers:new Map},D=xi.Pop,L=!1,B,H=!1,z=new Map,ie=null,X=!1,W=!1,Q=[],te=[],J=new Map,Y=0,pe=-1,_e=new Map,ee=new Set,de=new Map,G=new Map,q=new Set,ne=new Map,Se=new Map,re=!1;function ae(){if(f=e.history.listen(We=>{let{action:Je,location:rt,delta:_t}=We;if(re){re=!1;return}Uh(Se.size===0||_t!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ut=Pt({currentLocation:O.location,nextLocation:rt,historyAction:Je});if(Ut&&_t!=null){re=!0,e.history.go(_t*-1),Dt(Ut,{state:"blocked",location:rt,proceed(){Dt(Ut,{state:"proceeding",proceed:void 0,reset:void 0,location:rt}),e.history.go(_t)},reset(){let ir=new Map(O.blockers);ir.set(Ut,ev),V({blockers:ir})}});return}return De(Je,rt)}),r){PNe(t,z);let We=()=>RNe(t,z);t.addEventListener("pagehide",We),ie=()=>t.removeEventListener("pagehide",We)}return O.initialized||De(xi.Pop,O.location,{initialHydration:!0}),P}function ge(){f&&f(),ie&&ie(),p.clear(),B&&B.abort(),O.fetchers.forEach((We,Je)=>qe(Je)),O.blockers.forEach((We,Je)=>xt(Je))}function Ee(We){return p.add(We),()=>p.delete(We)}function V(We,Je){Je===void 0&&(Je={}),O=ki({},O,We);let rt=[],_t=[];d.v7_fetcherPersist&&O.fetchers.forEach((Ut,ir)=>{Ut.state==="idle"&&(q.has(ir)?_t.push(ir):rt.push(ir))}),[...p].forEach(Ut=>Ut(O,{deletedFetchers:_t,unstable_viewTransitionOpts:Je.viewTransitionOpts,unstable_flushSync:Je.flushSync===!0})),d.v7_fetcherPersist&&(rt.forEach(Ut=>O.fetchers.delete(Ut)),_t.forEach(Ut=>qe(Ut)))}function Ae(We,Je,rt){var _t,Ut;let{flushSync:ir}=rt===void 0?{}:rt,tr=O.actionData!=null&&O.navigation.formMethod!=null&&qu(O.navigation.formMethod)&&O.navigation.state==="loading"&&((_t=We.state)==null?void 0:_t._isRedirect)!==!0,$t;Je.actionData?Object.keys(Je.actionData).length>0?$t=Je.actionData:$t=null:tr?$t=O.actionData:$t=null;let _r=Je.loaderData?PV(O.loaderData,Je.loaderData,Je.matches||[],Je.errors):O.loaderData,Jt=O.blockers;Jt.size>0&&(Jt=new Map(Jt),Jt.forEach((fe,ye)=>Jt.set(ye,ev)));let Hn=L===!0||O.navigation.formMethod!=null&&qu(O.navigation.formMethod)&&((Ut=We.state)==null?void 0:Ut._isRedirect)!==!0;o&&(s=o,o=void 0),X||D===xi.Pop||(D===xi.Push?e.history.push(We,We.state):D===xi.Replace&&e.history.replace(We,We.state));let ue;if(D===xi.Pop){let fe=z.get(O.location.pathname);fe&&fe.has(We.pathname)?ue={currentLocation:O.location,nextLocation:We}:z.has(We.pathname)&&(ue={currentLocation:We,nextLocation:O.location})}else if(H){let fe=z.get(O.location.pathname);fe?fe.add(We.pathname):(fe=new Set([We.pathname]),z.set(O.location.pathname,fe)),ue={currentLocation:O.location,nextLocation:We}}V(ki({},Je,{actionData:$t,loaderData:_r,historyAction:D,location:We,initialized:!0,navigation:vj,revalidation:"idle",restoreScrollPosition:Fn(We,Je.matches||O.matches),preventScrollReset:Hn,blockers:Jt}),{viewTransitionOpts:ue,flushSync:ir===!0}),D=xi.Pop,L=!1,H=!1,X=!1,W=!1,Q=[],te=[]}async function Pe(We,Je){if(typeof We=="number"){e.history.go(We);return}let rt=D6(O.location,O.matches,l,d.v7_prependBasename,We,d.v7_relativeSplatPath,Je==null?void 0:Je.fromRouteId,Je==null?void 0:Je.relative),{path:_t,submission:Ut,error:ir}=kV(d.v7_normalizeFormMethod,!1,rt,Je),tr=O.location,$t=rx(O.location,_t,Je&&Je.state);$t=ki({},$t,e.history.encodeLocation($t));let _r=Je&&Je.replace!=null?Je.replace:void 0,Jt=xi.Push;_r===!0?Jt=xi.Replace:_r===!1||Ut!=null&&qu(Ut.formMethod)&&Ut.formAction===O.location.pathname+O.location.search&&(Jt=xi.Replace);let Hn=Je&&"preventScrollReset"in Je?Je.preventScrollReset===!0:void 0,ue=(Je&&Je.unstable_flushSync)===!0,fe=Pt({currentLocation:tr,nextLocation:$t,historyAction:Jt});if(fe){Dt(fe,{state:"blocked",location:$t,proceed(){Dt(fe,{state:"proceeding",proceed:void 0,reset:void 0,location:$t}),Pe(We,Je)},reset(){let ye=new Map(O.blockers);ye.set(fe,ev),V({blockers:ye})}});return}return await De(Jt,$t,{submission:Ut,pendingError:ir,preventScrollReset:Hn,replace:Je&&Je.replace,enableViewTransition:Je&&Je.unstable_viewTransition,flushSync:ue})}function ze(){if(qt(),V({revalidation:"loading"}),O.navigation.state!=="submitting"){if(O.navigation.state==="idle"){De(O.historyAction,O.location,{startUninterruptedRevalidation:!0});return}De(D||O.historyAction,O.navigation.location,{overrideNavigation:O.navigation})}}async function De(We,Je,rt){B&&B.abort(),B=null,D=We,X=(rt&&rt.startUninterruptedRevalidation)===!0,Qi(O.location,O.matches),L=(rt&&rt.preventScrollReset)===!0,H=(rt&&rt.enableViewTransition)===!0;let _t=o||s,Ut=rt&&rt.overrideNavigation,ir=ag(_t,Je,l),tr=(rt&&rt.flushSync)===!0;if(!ir){let fe=qc(404,{pathname:Je.pathname}),{matches:ye,route:ke}=jV(_t);kr(),Ae(Je,{matches:ye,loaderData:{},errors:{[ke.id]:fe}},{flushSync:tr});return}if(O.initialized&&!W&&_Ne(O.location,Je)&&!(rt&&rt.submission&&qu(rt.submission.formMethod))){Ae(Je,{matches:ir},{flushSync:tr});return}B=new AbortController;let $t=R1(e.history,Je,B.signal,rt&&rt.submission),_r;if(rt&&rt.pendingError)_r=[k2(ir).route.id,{type:Li.error,error:rt.pendingError}];else if(rt&&rt.submission&&qu(rt.submission.formMethod)){let fe=await $e($t,Je,rt.submission,ir,{replace:rt.replace,flushSync:tr});if(fe.shortCircuited)return;_r=fe.pendingActionResult,Ut=yj(Je,rt.submission),tr=!1,$t=R1(e.history,$t.url,$t.signal)}let{shortCircuited:Jt,loaderData:Hn,errors:ue}=await et($t,Je,ir,Ut,rt&&rt.submission,rt&&rt.fetcherSubmission,rt&&rt.replace,rt&&rt.initialHydration===!0,tr,_r);Jt||(B=null,Ae(Je,ki({matches:ir},RV(_r),{loaderData:Hn,errors:ue})))}async function $e(We,Je,rt,_t,Ut){Ut===void 0&&(Ut={}),qt();let ir=INe(Je,rt);V({navigation:ir},{flushSync:Ut.flushSync===!0});let tr,$t=F6(_t,Je);if(!$t.route.action&&!$t.route.lazy)tr={type:Li.error,error:qc(405,{method:We.method,pathname:Je.pathname,routeId:$t.route.id})};else if(tr=(await er("action",We,[$t],_t))[0],We.signal.aborted)return{shortCircuited:!0};if(og(tr)){let _r;return Ut&&Ut.replace!=null?_r=Ut.replace:_r=TV(tr.response.headers.get("Location"),new URL(We.url),l)===O.location.pathname+O.location.search,await jr(We,tr,{submission:rt,replace:_r}),{shortCircuited:!0}}if(sg(tr))throw qc(400,{type:"defer-action"});if(Jc(tr)){let _r=k2(_t,$t.route.id);return(Ut&&Ut.replace)!==!0&&(D=xi.Push),{pendingActionResult:[_r.route.id,tr]}}return{pendingActionResult:[$t.route.id,tr]}}async function et(We,Je,rt,_t,Ut,ir,tr,$t,_r,Jt){let Hn=_t||yj(Je,Ut),ue=Ut||ir||FV(Hn),fe=o||s,[ye,ke]=_V(e.history,O,rt,ue,Je,d.v7_partialHydration&&$t===!0,d.unstable_skipActionErrorRevalidation,W,Q,te,q,de,ee,fe,l,Jt);if(kr(dt=>!(rt&&rt.some(St=>St.route.id===dt))||ye&&ye.some(St=>St.route.id===dt)),pe=++Y,ye.length===0&&ke.length===0){let dt=je();return Ae(Je,ki({matches:rt,loaderData:{},errors:Jt&&Jc(Jt[1])?{[Jt[0]]:Jt[1].error}:null},RV(Jt),dt?{fetchers:new Map(O.fetchers)}:{}),{flushSync:_r}),{shortCircuited:!0}}if(!X&&(!d.v7_partialHydration||!$t)){ke.forEach(St=>{let Ot=O.fetchers.get(St.key),Kt=ww(void 0,Ot?Ot.data:void 0);O.fetchers.set(St.key,Kt)});let dt;Jt&&!Jc(Jt[1])?dt={[Jt[0]]:Jt[1].data}:O.actionData&&(Object.keys(O.actionData).length===0?dt=null:dt=O.actionData),V(ki({navigation:Hn},dt!==void 0?{actionData:dt}:{},ke.length>0?{fetchers:new Map(O.fetchers)}:{}),{flushSync:_r})}ke.forEach(dt=>{J.has(dt.key)&&Te(dt.key),dt.controller&&J.set(dt.key,dt.controller)});let he=()=>ke.forEach(dt=>Te(dt.key));B&&B.signal.addEventListener("abort",he);let{loaderResults:me,fetcherResults:Fe}=await ct(O.matches,rt,ye,ke,We);if(We.signal.aborted)return{shortCircuited:!0};B&&B.signal.removeEventListener("abort",he),ke.forEach(dt=>J.delete(dt.key));let it=DV([...me,...Fe]);if(it){if(it.idx>=ye.length){let dt=ke[it.idx-ye.length].key;ee.add(dt)}return await jr(We,it.result,{replace:tr}),{shortCircuited:!0}}let{loaderData:Ge,errors:Ye}=OV(O,rt,ye,me,Jt,ke,Fe,ne);ne.forEach((dt,St)=>{dt.subscribe(Ot=>{(Ot||dt.done)&&ne.delete(St)})}),d.v7_partialHydration&&$t&&O.errors&&Object.entries(O.errors).filter(dt=>{let[St]=dt;return!ye.some(Ot=>Ot.route.id===St)}).forEach(dt=>{let[St,Ot]=dt;Ye=Object.assign(Ye||{},{[St]:Ot})});let Ze=je(),wt=we(pe),At=Ze||wt||ke.length>0;return ki({loaderData:Ge,errors:Ye},At?{fetchers:new Map(O.fetchers)}:{})}function ut(We,Je,rt,_t){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");J.has(We)&&Te(We);let Ut=(_t&&_t.unstable_flushSync)===!0,ir=o||s,tr=D6(O.location,O.matches,l,d.v7_prependBasename,rt,d.v7_relativeSplatPath,Je,_t==null?void 0:_t.relative),$t=ag(ir,tr,l);if(!$t){dr(We,Je,qc(404,{pathname:tr}),{flushSync:Ut});return}let{path:_r,submission:Jt,error:Hn}=kV(d.v7_normalizeFormMethod,!0,tr,_t);if(Hn){dr(We,Je,Hn,{flushSync:Ut});return}let ue=F6($t,_r);if(L=(_t&&_t.preventScrollReset)===!0,Jt&&qu(Jt.formMethod)){kt(We,Je,_r,ue,$t,Ut,Jt);return}de.set(We,{routeId:Je,path:_r}),ht(We,Je,_r,ue,$t,Ut,Jt)}async function kt(We,Je,rt,_t,Ut,ir,tr){if(qt(),de.delete(We),!_t.route.action&&!_t.route.lazy){let Kt=qc(405,{method:tr.formMethod,pathname:rt,routeId:Je});dr(We,Je,Kt,{flushSync:ir});return}let $t=O.fetchers.get(We);Lt(We,ONe(tr,$t),{flushSync:ir});let _r=new AbortController,Jt=R1(e.history,rt,_r.signal,tr);J.set(We,_r);let Hn=Y,fe=(await er("action",Jt,[_t],Ut))[0];if(Jt.signal.aborted){J.get(We)===_r&&J.delete(We);return}if(d.v7_fetcherPersist&&q.has(We)){if(og(fe)||Jc(fe)){Lt(We,Bp(void 0));return}}else{if(og(fe))if(J.delete(We),pe>Hn){Lt(We,Bp(void 0));return}else return ee.add(We),Lt(We,ww(tr)),jr(Jt,fe,{fetcherSubmission:tr});if(Jc(fe)){dr(We,Je,fe.error);return}}if(sg(fe))throw qc(400,{type:"defer-action"});let ye=O.navigation.location||O.location,ke=R1(e.history,ye,_r.signal),he=o||s,me=O.navigation.state!=="idle"?ag(he,O.navigation.location,l):O.matches;Er(me,"Didn't find any matches after fetcher action");let Fe=++Y;_e.set(We,Fe);let it=ww(tr,fe.data);O.fetchers.set(We,it);let[Ge,Ye]=_V(e.history,O,me,tr,ye,!1,d.unstable_skipActionErrorRevalidation,W,Q,te,q,de,ee,he,l,[_t.route.id,fe]);Ye.filter(Kt=>Kt.key!==We).forEach(Kt=>{let at=Kt.key,Xn=O.fetchers.get(at),Hr=ww(void 0,Xn?Xn.data:void 0);O.fetchers.set(at,Hr),J.has(at)&&Te(at),Kt.controller&&J.set(at,Kt.controller)}),V({fetchers:new Map(O.fetchers)});let Ze=()=>Ye.forEach(Kt=>Te(Kt.key));_r.signal.addEventListener("abort",Ze);let{loaderResults:wt,fetcherResults:At}=await ct(O.matches,me,Ge,Ye,ke);if(_r.signal.aborted)return;_r.signal.removeEventListener("abort",Ze),_e.delete(We),J.delete(We),Ye.forEach(Kt=>J.delete(Kt.key));let dt=DV([...wt,...At]);if(dt){if(dt.idx>=Ge.length){let Kt=Ye[dt.idx-Ge.length].key;ee.add(Kt)}return jr(ke,dt.result)}let{loaderData:St,errors:Ot}=OV(O,O.matches,Ge,wt,void 0,Ye,At,ne);if(O.fetchers.has(We)){let Kt=Bp(fe.data);O.fetchers.set(We,Kt)}we(Fe),O.navigation.state==="loading"&&Fe>pe?(Er(D,"Expected pending action"),B&&B.abort(),Ae(O.navigation.location,{matches:me,loaderData:St,errors:Ot,fetchers:new Map(O.fetchers)})):(V({errors:Ot,loaderData:PV(O.loaderData,St,me,Ot),fetchers:new Map(O.fetchers)}),W=!1)}async function ht(We,Je,rt,_t,Ut,ir,tr){let $t=O.fetchers.get(We);Lt(We,ww(tr,$t?$t.data:void 0),{flushSync:ir});let _r=new AbortController,Jt=R1(e.history,rt,_r.signal);J.set(We,_r);let Hn=Y,fe=(await er("loader",Jt,[_t],Ut))[0];if(sg(fe)&&(fe=await tie(fe,Jt.signal,!0)||fe),J.get(We)===_r&&J.delete(We),!Jt.signal.aborted){if(q.has(We)){Lt(We,Bp(void 0));return}if(og(fe))if(pe>Hn){Lt(We,Bp(void 0));return}else{ee.add(We),await jr(Jt,fe);return}if(Jc(fe)){dr(We,Je,fe.error);return}Er(!sg(fe),"Unhandled fetcher deferred data"),Lt(We,Bp(fe.data))}}async function jr(We,Je,rt){let{submission:_t,fetcherSubmission:Ut,replace:ir}=rt===void 0?{}:rt;Je.response.headers.has("X-Remix-Revalidate")&&(W=!0);let tr=Je.response.headers.get("Location");Er(tr,"Expected a Location header on the redirect Response"),tr=TV(tr,new URL(We.url),l);let $t=rx(O.location,tr,{_isRedirect:!0});if(r){let ye=!1;if(Je.response.headers.has("X-Remix-Reload-Document"))ye=!0;else if($L.test(tr)){const ke=e.history.createURL(tr);ye=ke.origin!==t.location.origin||Pl(ke.pathname,l)==null}if(ye){ir?t.location.replace(tr):t.location.assign(tr);return}}B=null;let _r=ir===!0?xi.Replace:xi.Push,{formMethod:Jt,formAction:Hn,formEncType:ue}=O.navigation;!_t&&!Ut&&Jt&&Hn&&ue&&(_t=FV(O.navigation));let fe=_t||Ut;if(mNe.has(Je.response.status)&&fe&&qu(fe.formMethod))await De(_r,$t,{submission:ki({},fe,{formAction:tr}),preventScrollReset:L});else{let ye=yj($t,_t);await De(_r,$t,{overrideNavigation:ye,fetcherSubmission:Ut,preventScrollReset:L})}}async function er(We,Je,rt,_t){try{let Ut=await wNe(c,We,Je,rt,_t,a,i);return await Promise.all(Ut.map((ir,tr)=>{if(NNe(ir)){let $t=ir.result;return{type:Li.redirect,response:CNe($t,Je,rt[tr].route.id,_t,l,d.v7_relativeSplatPath)}}return ENe(ir)}))}catch(Ut){return rt.map(()=>({type:Li.error,error:Ut}))}}async function ct(We,Je,rt,_t,Ut){let[ir,...tr]=await Promise.all([rt.length?er("loader",Ut,rt,Je):[],..._t.map($t=>{if($t.matches&&$t.match&&$t.controller){let _r=R1(e.history,$t.path,$t.controller.signal);return er("loader",_r,[$t.match],$t.matches).then(Jt=>Jt[0])}else return Promise.resolve({type:Li.error,error:qc(404,{pathname:$t.path})})})]);return await Promise.all([MV(We,rt,ir,ir.map(()=>Ut.signal),!1,O.loaderData),MV(We,_t.map($t=>$t.match),tr,_t.map($t=>$t.controller?$t.controller.signal:null),!0)]),{loaderResults:ir,fetcherResults:tr}}function qt(){W=!0,Q.push(...kr()),de.forEach((We,Je)=>{J.has(Je)&&(te.push(Je),Te(Je))})}function Lt(We,Je,rt){rt===void 0&&(rt={}),O.fetchers.set(We,Je),V({fetchers:new Map(O.fetchers)},{flushSync:(rt&&rt.flushSync)===!0})}function dr(We,Je,rt,_t){_t===void 0&&(_t={});let Ut=k2(O.matches,Je);qe(We),V({errors:{[Ut.route.id]:rt},fetchers:new Map(O.fetchers)},{flushSync:(_t&&_t.flushSync)===!0})}function Gt(We){return d.v7_fetcherPersist&&(G.set(We,(G.get(We)||0)+1),q.has(We)&&q.delete(We)),O.fetchers.get(We)||Yne}function qe(We){let Je=O.fetchers.get(We);J.has(We)&&!(Je&&Je.state==="loading"&&_e.has(We))&&Te(We),de.delete(We),_e.delete(We),ee.delete(We),q.delete(We),O.fetchers.delete(We)}function Xe(We){if(d.v7_fetcherPersist){let Je=(G.get(We)||0)-1;Je<=0?(G.delete(We),q.add(We)):G.set(We,Je)}else qe(We);V({fetchers:new Map(O.fetchers)})}function Te(We){let Je=J.get(We);Er(Je,"Expected fetch controller: "+We),Je.abort(),J.delete(We)}function He(We){for(let Je of We){let rt=Gt(Je),_t=Bp(rt.data);O.fetchers.set(Je,_t)}}function je(){let We=[],Je=!1;for(let rt of ee){let _t=O.fetchers.get(rt);Er(_t,"Expected fetcher: "+rt),_t.state==="loading"&&(ee.delete(rt),We.push(rt),Je=!0)}return He(We),Je}function we(We){let Je=[];for(let[rt,_t]of _e)if(_t<We){let Ut=O.fetchers.get(rt);Er(Ut,"Expected fetcher: "+rt),Ut.state==="loading"&&(Te(rt),_e.delete(rt),Je.push(rt))}return He(Je),Je.length>0}function ot(We,Je){let rt=O.blockers.get(We)||ev;return Se.get(We)!==Je&&Se.set(We,Je),rt}function xt(We){O.blockers.delete(We),Se.delete(We)}function Dt(We,Je){let rt=O.blockers.get(We)||ev;Er(rt.state==="unblocked"&&Je.state==="blocked"||rt.state==="blocked"&&Je.state==="blocked"||rt.state==="blocked"&&Je.state==="proceeding"||rt.state==="blocked"&&Je.state==="unblocked"||rt.state==="proceeding"&&Je.state==="unblocked","Invalid blocker state transition: "+rt.state+" -> "+Je.state);let _t=new Map(O.blockers);_t.set(We,Je),V({blockers:_t})}function Pt(We){let{currentLocation:Je,nextLocation:rt,historyAction:_t}=We;if(Se.size===0)return;Se.size>1&&Uh(!1,"A router only supports one blocker at a time");let Ut=Array.from(Se.entries()),[ir,tr]=Ut[Ut.length-1],$t=O.blockers.get(ir);if(!($t&&$t.state==="proceeding")&&tr({currentLocation:Je,nextLocation:rt,historyAction:_t}))return ir}function kr(We){let Je=[];return ne.forEach((rt,_t)=>{(!We||We(_t))&&(rt.cancel(),Je.push(_t),ne.delete(_t))}),Je}function Cn(We,Je,rt){if(m=We,y=Je,x=rt||null,!b&&O.navigation===vj){b=!0;let _t=Fn(O.location,O.matches);_t!=null&&V({restoreScrollPosition:_t})}return()=>{m=null,y=null,x=null}}function fr(We,Je){return x&&x(We,Je.map(_t=>Hne(_t,O.loaderData)))||We.key}function Qi(We,Je){if(m&&y){let rt=fr(We,Je);m[rt]=y()}}function Fn(We,Je){if(m){let rt=fr(We,Je),_t=m[rt];if(typeof _t=="number")return _t}return null}function il(We){a={},o=j6(We,i,void 0,a)}return P={get basename(){return l},get future(){return d},get state(){return O},get routes(){return s},get window(){return t},initialize:ae,subscribe:Ee,enableScrollRestoration:Cn,navigate:Pe,fetch:ut,revalidate:ze,createHref:We=>e.history.createHref(We),encodeLocation:We=>e.history.encodeLocation(We),getFetcher:Gt,deleteFetcher:Xe,dispose:ge,getBlocker:ot,deleteBlocker:xt,_internalFetchControllers:J,_internalActiveDeferreds:ne,_internalSetRoutes:il},P}function xNe(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function D6(e,t,r,n,i,a,s,o){let l,c;if(s){l=[];for(let f of t)if(l.push(f),f.route.id===s){c=f;break}}else l=t,c=t[t.length-1];let d=KO(i||".",GO(l,a),Pl(e.pathname,r)||e.pathname,o==="path");return i==null&&(d.search=e.search,d.hash=e.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!HL(d.search)&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),n&&r!=="/"&&(d.pathname=d.pathname==="/"?r:sf([r,d.pathname])),fd(d)}function kV(e,t,r,n){if(!n||!xNe(n))return{path:r};if(n.formMethod&&!TNe(n.formMethod))return{path:r,error:qc(405,{method:n.formMethod})};let i=()=>({path:r,error:qc(400,{type:"invalid-body"})}),a=n.formMethod||"get",s=e?a.toUpperCase():a.toLowerCase(),o=Zne(r);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!qu(s))return i();let p=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((m,x)=>{let[y,b]=x;return""+m+y+"="+b+`
`},""):String(n.body);return{path:r,submission:{formMethod:s,formAction:o,formEncType:n.formEncType,formData:void 0,json:void 0,text:p}}}else if(n.formEncType==="application/json"){if(!qu(s))return i();try{let p=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:r,submission:{formMethod:s,formAction:o,formEncType:n.formEncType,formData:void 0,json:p,text:void 0}}}catch{return i()}}}Er(typeof FormData=="function","FormData is not available in this environment");let l,c;if(n.formData)l=M6(n.formData),c=n.formData;else if(n.body instanceof FormData)l=M6(n.body),c=n.body;else if(n.body instanceof URLSearchParams)l=n.body,c=IV(l);else if(n.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(n.body),c=IV(l)}catch{return i()}let d={formMethod:s,formAction:o,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(qu(d.formMethod))return{path:r,submission:d};let f=bu(r);return t&&f.search&&HL(f.search)&&l.append("index",""),f.search="?"+l,{path:fd(f),submission:d}}function vNe(e,t){let r=e;if(t){let n=e.findIndex(i=>i.route.id===t);n>=0&&(r=e.slice(0,n))}return r}function _V(e,t,r,n,i,a,s,o,l,c,d,f,p,m,x,y){let b=y?Jc(y[1])?y[1].error:y[1].data:void 0,S=e.createURL(t.location),_=e.createURL(i),C=y&&Jc(y[1])?y[0]:void 0,A=C?vNe(r,C):r,j=y?y[1].statusCode:void 0,P=s&&j&&j>=400,O=A.filter((L,B)=>{let{route:H}=L;if(H.lazy)return!0;if(H.loader==null)return!1;if(a)return typeof H.loader!="function"||H.loader.hydrate?!0:t.loaderData[H.id]===void 0&&(!t.errors||t.errors[H.id]===void 0);if(yNe(t.loaderData,t.matches[B],L)||l.some(X=>X===L.route.id))return!0;let z=t.matches[B],ie=L;return NV(L,ki({currentUrl:S,currentParams:z.params,nextUrl:_,nextParams:ie.params},n,{actionResult:b,unstable_actionStatus:j,defaultShouldRevalidate:P?!1:o||S.pathname+S.search===_.pathname+_.search||S.search!==_.search||Jne(z,ie)}))}),D=[];return f.forEach((L,B)=>{if(a||!r.some(W=>W.route.id===L.routeId)||d.has(B))return;let H=ag(m,L.path,x);if(!H){D.push({key:B,routeId:L.routeId,path:L.path,matches:null,match:null,controller:null});return}let z=t.fetchers.get(B),ie=F6(H,L.path),X=!1;p.has(B)?X=!1:c.includes(B)?X=!0:z&&z.state!=="idle"&&z.data===void 0?X=o:X=NV(ie,ki({currentUrl:S,currentParams:t.matches[t.matches.length-1].params,nextUrl:_,nextParams:r[r.length-1].params},n,{actionResult:b,unstable_actionStatus:j,defaultShouldRevalidate:P?!1:o})),X&&D.push({key:B,routeId:L.routeId,path:L.path,matches:H,match:ie,controller:new AbortController})}),[O,D]}function yNe(e,t,r){let n=!t||r.route.id!==t.route.id,i=e[r.route.id]===void 0;return n||i}function Jne(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function NV(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}async function AV(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let i=r[e.id];Er(i,"No route found in manifest");let a={};for(let s in n){let l=i[s]!==void 0&&s!=="hasErrorBoundary";Uh(!l,'Route "'+i.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+s+'" will be ignored.')),!l&&!U_e.has(s)&&(a[s]=n[s])}Object.assign(i,a),Object.assign(i,ki({},t(i),{lazy:void 0}))}function bNe(e){return Promise.all(e.matches.map(t=>t.resolve()))}async function wNe(e,t,r,n,i,a,s,o){let l=n.reduce((f,p)=>f.add(p.route.id),new Set),c=new Set,d=await e({matches:i.map(f=>{let p=l.has(f.route.id);return ki({},f,{shouldLoad:p,resolve:x=>(c.add(f.route.id),p?SNe(t,r,f,a,s,x,o):Promise.resolve({type:Li.data,result:void 0}))})}),request:r,params:i[0].params,context:o});return i.forEach(f=>Er(c.has(f.route.id),'`match.resolve()` was not called for route id "'+f.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),d.filter((f,p)=>l.has(i[p].route.id))}async function SNe(e,t,r,n,i,a,s){let o,l,c=d=>{let f,p=new Promise((y,b)=>f=b);l=()=>f(),t.signal.addEventListener("abort",l);let m=y=>typeof d!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+r.route.id+"]"))):d({request:t,params:r.params,context:s},...y!==void 0?[y]:[]),x;return a?x=a(y=>m(y)):x=(async()=>{try{return{type:"data",result:await m()}}catch(y){return{type:"error",result:y}}})(),Promise.race([x,p])};try{let d=r.route[e];if(r.route.lazy)if(d){let f,[p]=await Promise.all([c(d).catch(m=>{f=m}),AV(r.route,i,n)]);if(f!==void 0)throw f;o=p}else if(await AV(r.route,i,n),d=r.route[e],d)o=await c(d);else if(e==="action"){let f=new URL(t.url),p=f.pathname+f.search;throw qc(405,{method:t.method,pathname:p,routeId:r.route.id})}else return{type:Li.data,result:void 0};else if(d)o=await c(d);else{let f=new URL(t.url),p=f.pathname+f.search;throw qc(404,{pathname:p})}Er(o.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(d){return{type:Li.error,result:d}}finally{l&&t.signal.removeEventListener("abort",l)}return o}async function ENe(e){let{result:t,type:r,status:n}=e;if(eie(t)){let s;try{let o=t.headers.get("Content-Type");o&&/\bapplication\/json\b/.test(o)?t.body==null?s=null:s=await t.json():s=await t.text()}catch(o){return{type:Li.error,error:o}}return r===Li.error?{type:Li.error,error:new XO(t.status,t.statusText,s),statusCode:t.status,headers:t.headers}:{type:Li.data,data:s,statusCode:t.status,headers:t.headers}}if(r===Li.error)return{type:Li.error,error:t,statusCode:YO(t)?t.status:n};if(ANe(t)){var i,a;return{type:Li.deferred,deferredData:t,statusCode:(i=t.init)==null?void 0:i.status,headers:((a=t.init)==null?void 0:a.headers)&&new Headers(t.init.headers)}}return{type:Li.data,data:t,statusCode:n}}function CNe(e,t,r,n,i,a){let s=e.headers.get("Location");if(Er(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!$L.test(s)){let o=n.slice(0,n.findIndex(l=>l.route.id===r)+1);s=D6(new URL(t.url),o,i,!0,s,a),e.headers.set("Location",s)}return e}function TV(e,t,r){if($L.test(e)){let n=e,i=n.startsWith("//")?new URL(t.protocol+n):new URL(n),a=Pl(i.pathname,r)!=null;if(i.origin===t.origin&&a)return i.pathname+i.search+i.hash}return e}function R1(e,t,r,n){let i=e.createURL(Zne(t)).toString(),a={signal:r};if(n&&qu(n.formMethod)){let{formMethod:s,formEncType:o}=n;a.method=s.toUpperCase(),o==="application/json"?(a.headers=new Headers({"Content-Type":o}),a.body=JSON.stringify(n.json)):o==="text/plain"?a.body=n.text:o==="application/x-www-form-urlencoded"&&n.formData?a.body=M6(n.formData):a.body=n.formData}return new Request(i,a)}function M6(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,typeof n=="string"?n:n.name);return t}function IV(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function kNe(e,t,r,n,i,a){let s={},o=null,l,c=!1,d={},f=n&&Jc(n[1])?n[1].error:void 0;return r.forEach((p,m)=>{let x=t[m].route.id;if(Er(!og(p),"Cannot handle redirect results in processLoaderData"),Jc(p)){let y=p.error;f!==void 0&&(y=f,f=void 0),o=o||{};{let b=k2(e,x);o[b.route.id]==null&&(o[b.route.id]=y)}s[x]=void 0,c||(c=!0,l=YO(p.error)?p.error.status:500),p.headers&&(d[x]=p.headers)}else sg(p)?(i.set(x,p.deferredData),s[x]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(d[x]=p.headers)):(s[x]=p.data,p.statusCode&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(d[x]=p.headers))}),f!==void 0&&n&&(o={[n[0]]:f},s[n[0]]=void 0),{loaderData:s,errors:o,statusCode:l||200,loaderHeaders:d}}function OV(e,t,r,n,i,a,s,o){let{loaderData:l,errors:c}=kNe(t,r,n,i,o);for(let d=0;d<a.length;d++){let{key:f,match:p,controller:m}=a[d];Er(s!==void 0&&s[d]!==void 0,"Did not find corresponding fetcher result");let x=s[d];if(!(m&&m.signal.aborted))if(Jc(x)){let y=k2(e.matches,p==null?void 0:p.route.id);c&&c[y.route.id]||(c=ki({},c,{[y.route.id]:x.error})),e.fetchers.delete(f)}else if(og(x))Er(!1,"Unhandled fetcher revalidation redirect");else if(sg(x))Er(!1,"Unhandled fetcher deferred data");else{let y=Bp(x.data);e.fetchers.set(f,y)}}return{loaderData:l,errors:c}}function PV(e,t,r,n){let i=ki({},t);for(let a of r){let s=a.route.id;if(t.hasOwnProperty(s)?t[s]!==void 0&&(i[s]=t[s]):e[s]!==void 0&&a.route.loader&&(i[s]=e[s]),n&&n.hasOwnProperty(s))break}return i}function RV(e){return e?Jc(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function k2(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function jV(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function qc(e,t){let{pathname:r,routeId:n,method:i,type:a}=t===void 0?{}:t,s="Unknown Server Error",o="Unknown @remix-run/router error";return e===400?(s="Bad Request",i&&r&&n?o="You made a "+i+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":a==="defer-action"?o="defer() is not supported in actions":a==="invalid-body"&&(o="Unable to encode submission body")):e===403?(s="Forbidden",o='Route "'+n+'" does not match URL "'+r+'"'):e===404?(s="Not Found",o='No route matches URL "'+r+'"'):e===405&&(s="Method Not Allowed",i&&r&&n?o="You made a "+i.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":i&&(o='Invalid request method "'+i.toUpperCase()+'"')),new XO(e||500,s,new Error(o),!0)}function DV(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(og(r))return{result:r,idx:t}}}function Zne(e){let t=typeof e=="string"?bu(e):e;return fd(ki({},t,{hash:""}))}function _Ne(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function NNe(e){return eie(e.result)&&pNe.has(e.result.status)}function sg(e){return e.type===Li.deferred}function Jc(e){return e.type===Li.error}function og(e){return(e&&e.type)===Li.redirect}function ANe(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function eie(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function TNe(e){return hNe.has(e.toLowerCase())}function qu(e){return dNe.has(e.toLowerCase())}async function MV(e,t,r,n,i,a){for(let s=0;s<r.length;s++){let o=r[s],l=t[s];if(!l)continue;let c=e.find(f=>f.route.id===l.route.id),d=c!=null&&!Jne(c,l)&&(a&&a[l.route.id])!==void 0;if(sg(o)&&(i||d)){let f=n[s];Er(f,"Expected an AbortSignal for revalidating fetcher deferred result"),await tie(o,f,i).then(p=>{p&&(r[s]=p||r[s])})}}}async function tie(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:Li.data,data:e.deferredData.unwrappedData}}catch(i){return{type:Li.error,error:i}}return{type:Li.data,data:e.deferredData.data}}}function HL(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function F6(e,t){let r=typeof t=="string"?bu(t).search:t.search;if(e[e.length-1].route.index&&HL(r||""))return e[e.length-1];let n=Gne(e);return n[n.length-1]}function FV(e){let{formMethod:t,formAction:r,formEncType:n,text:i,formData:a,json:s}=e;if(!(!t||!r||!n)){if(i!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:i};if(a!=null)return{formMethod:t,formAction:r,formEncType:n,formData:a,json:void 0,text:void 0};if(s!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:s,text:void 0}}}function yj(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function INe(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function ww(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function ONe(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Bp(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function PNe(e,t){try{let r=e.sessionStorage.getItem(Qne);if(r){let n=JSON.parse(r);for(let[i,a]of Object.entries(n||{}))a&&Array.isArray(a)&&t.set(i,new Set(a||[]))}}catch{}}function RNe(e,t){if(t.size>0){let r={};for(let[n,i]of t)r[n]=[...i];try{e.sessionStorage.setItem(Qne,JSON.stringify(r))}catch(n){Uh(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}/**
 * React Router v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function F0(){return F0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F0.apply(this,arguments)}const rb=I.createContext(null),IE=I.createContext(null),HA=I.createContext(null),bc=I.createContext(null),nb=I.createContext(null),wc=I.createContext({outlet:null,matches:[],isDataRoute:!1}),rie=I.createContext(null);function nie(e,t){let{relative:r}=t===void 0?{}:t;Z0()||Er(!1);let{basename:n,navigator:i}=I.useContext(bc),{hash:a,pathname:s,search:o}=ib(e,{relative:r}),l=s;return n!=="/"&&(l=s==="/"?n:sf([n,s])),i.createHref({pathname:l,search:o,hash:a})}function Z0(){return I.useContext(nb)!=null}function Fl(){return Z0()||Er(!1),I.useContext(nb).location}function jNe(){return I.useContext(nb).navigationType}function DNe(e){Z0()||Er(!1);let{pathname:t}=Fl();return I.useMemo(()=>bS(e,t),[t,e])}function iie(e){I.useContext(bc).static||I.useLayoutEffect(e)}function wu(){let{isDataRoute:e}=I.useContext(wc);return e?XNe():MNe()}function MNe(){Z0()||Er(!1);let e=I.useContext(rb),{basename:t,future:r,navigator:n}=I.useContext(bc),{matches:i}=I.useContext(wc),{pathname:a}=Fl(),s=JSON.stringify(GO(i,r.v7_relativeSplatPath)),o=I.useRef(!1);return iie(()=>{o.current=!0}),I.useCallback(function(c,d){if(d===void 0&&(d={}),!o.current)return;if(typeof c=="number"){n.go(c);return}let f=KO(c,JSON.parse(s),a,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:sf([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,s,a,e])}const aie=I.createContext(null);function FNe(){return I.useContext(aie)}function sie(e){let t=I.useContext(wc).outlet;return t&&I.createElement(aie.Provider,{value:e},t)}function jx(){let{matches:e}=I.useContext(wc),t=e[e.length-1];return t?t.params:{}}function ib(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=I.useContext(bc),{matches:i}=I.useContext(wc),{pathname:a}=Fl(),s=JSON.stringify(GO(i,n.v7_relativeSplatPath));return I.useMemo(()=>KO(e,JSON.parse(s),a,r==="path"),[e,s,a,r])}function oie(e,t){return lie(e,t)}function lie(e,t,r,n){Z0()||Er(!1);let{navigator:i}=I.useContext(bc),{matches:a}=I.useContext(wc),s=a[a.length-1],o=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let c=Fl(),d;if(t){var f;let b=typeof t=="string"?bu(t):t;l==="/"||(f=b.pathname)!=null&&f.startsWith(l)||Er(!1),d=b}else d=c;let p=d.pathname||"/",m=p;if(l!=="/"){let b=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(b.length).join("/")}let x=ag(e,{pathname:m}),y=cie(x&&x.map(b=>Object.assign({},b,{params:Object.assign({},o,b.params),pathname:sf([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:sf([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,r,n);return t&&y?I.createElement(nb.Provider,{value:{location:F0({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:xi.Pop}},y):y}function LNe(){let e=pie(),t=YO(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),r?I.createElement("pre",{style:i},r):null,null)}const BNe=I.createElement(LNe,null);class UNe extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?I.createElement(wc.Provider,{value:this.props.routeContext},I.createElement(rie.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $Ne(e){let{routeContext:t,match:r,children:n}=e,i=I.useContext(rb);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),I.createElement(wc.Provider,{value:t},n)}function cie(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if((a=r)!=null&&a.errors)e=r.matches;else return null}let s=e,o=(i=r)==null?void 0:i.errors;if(o!=null){let d=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);d>=0||Er(!1),s=s.slice(0,Math.min(s.length,d+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:p,errors:m}=r,x=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||x){l=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((d,f,p)=>{let m,x=!1,y=null,b=null;r&&(m=o&&f.route.id?o[f.route.id]:void 0,y=f.route.errorElement||BNe,l&&(c<0&&p===0?(YNe("route-fallback"),x=!0,b=null):c===p&&(x=!0,b=f.route.hydrateFallbackElement||null)));let S=t.concat(s.slice(0,p+1)),_=()=>{let C;return m?C=y:x?C=b:f.route.Component?C=I.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=d,I.createElement($Ne,{match:f,routeContext:{outlet:d,matches:S,isDataRoute:r!=null},children:C})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?I.createElement(UNe,{location:r.location,revalidation:r.revalidation,component:y,error:m,children:_(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):_()},null)}var uie=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(uie||{}),Rl=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Rl||{});function WL(e){let t=I.useContext(rb);return t||Er(!1),t}function em(e){let t=I.useContext(IE);return t||Er(!1),t}function zNe(e){let t=I.useContext(wc);return t||Er(!1),t}function OE(e){let t=zNe(),r=t.matches[t.matches.length-1];return r.route.id||Er(!1),r.route.id}function die(){return OE(Rl.UseRouteId)}function fie(){return em(Rl.UseNavigation).navigation}function HNe(){let e=WL(),t=em(Rl.UseRevalidator);return I.useMemo(()=>({revalidate:e.router.revalidate,state:t.revalidation}),[e.router.revalidate,t.revalidation])}function hie(){let{matches:e,loaderData:t}=em(Rl.UseMatches);return I.useMemo(()=>e.map(r=>Hne(r,t)),[e,t])}function WNe(){let e=em(Rl.UseLoaderData),t=OE(Rl.UseLoaderData);if(e.errors&&e.errors[t]!=null){console.error("You cannot `useLoaderData` in an errorElement (routeId: "+t+")");return}return e.loaderData[t]}function VNe(e){return em(Rl.UseRouteLoaderData).loaderData[e]}function qNe(){let e=em(Rl.UseActionData),t=OE(Rl.UseLoaderData);return e.actionData?e.actionData[t]:void 0}function pie(){var e;let t=I.useContext(rie),r=em(Rl.UseRouteError),n=OE(Rl.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function mie(){let e=I.useContext(HA);return e==null?void 0:e._data}function GNe(){let e=I.useContext(HA);return e==null?void 0:e._error}let KNe=0;function gie(e){let{router:t,basename:r}=WL(uie.UseBlocker),n=em(Rl.UseBlocker),[i,a]=I.useState(""),s=I.useCallback(o=>{if(typeof e!="function")return!!e;if(r==="/")return e(o);let{currentLocation:l,nextLocation:c,historyAction:d}=o;return e({currentLocation:F0({},l,{pathname:Pl(l.pathname,r)||l.pathname}),nextLocation:F0({},c,{pathname:Pl(c.pathname,r)||c.pathname}),historyAction:d})},[r,e]);return I.useEffect(()=>{let o=String(++KNe);return a(o),()=>t.deleteBlocker(o)},[t]),I.useEffect(()=>{i!==""&&t.getBlocker(i,s)},[t,i,s]),i&&n.blockers.has(i)?n.blockers.get(i):ev}function XNe(){let{router:e}=WL(),t=OE(Rl.UseNavigateStable),r=I.useRef(!1);return iie(()=>{r.current=!0}),I.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,F0({fromRouteId:t},a)))},[e,t])}const LV={};function YNe(e,t,r){LV[e]||(LV[e]=!0)}const QNe="startTransition",BV=ay[QNe];function JNe(e){let{basename:t,children:r,initialEntries:n,initialIndex:i,future:a}=e,s=I.useRef();s.current==null&&(s.current=Bne({initialEntries:n,initialIndex:i,v5Compat:!0}));let o=s.current,[l,c]=I.useState({action:o.action,location:o.location}),{v7_startTransition:d}=a||{},f=I.useCallback(p=>{d&&BV?BV(()=>c(p)):c(p)},[c,d]);return I.useLayoutEffect(()=>o.listen(f),[o,f]),I.createElement(ab,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:a})}function ZNe(e){let{to:t,replace:r,state:n,relative:i}=e;Z0()||Er(!1);let{future:a,static:s}=I.useContext(bc),{matches:o}=I.useContext(wc),{pathname:l}=Fl(),c=wu(),d=KO(t,GO(o,a.v7_relativeSplatPath),l,i==="path"),f=JSON.stringify(d);return I.useEffect(()=>c(JSON.parse(f),{replace:r,state:n,relative:i}),[c,f,i,r,n]),null}function xie(e){return sie(e.context)}function xa(e){Er(!1)}function ab(e){let{basename:t="/",children:r=null,location:n,navigationType:i=xi.Pop,navigator:a,static:s=!1,future:o}=e;Z0()&&Er(!1);let l=t.replace(/^\/*/,"/"),c=I.useMemo(()=>({basename:l,navigator:a,static:s,future:F0({v7_relativeSplatPath:!1},o)}),[l,o,a,s]);typeof n=="string"&&(n=bu(n));let{pathname:d="/",search:f="",hash:p="",state:m=null,key:x="default"}=n,y=I.useMemo(()=>{let b=Pl(d,l);return b==null?null:{location:{pathname:b,search:f,hash:p,state:m,key:x},navigationType:i}},[l,d,f,p,m,x,i]);return y==null?null:I.createElement(bc.Provider,{value:c},I.createElement(nb.Provider,{children:r,value:y}))}function vie(e){let{children:t,location:r}=e;return oie(wS(t),r)}function eAe(e){let{children:t,errorElement:r,resolve:n}=e;return I.createElement(rAe,{resolve:n,errorElement:r},I.createElement(nAe,null,t))}var Fc=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(Fc||{});const tAe=new Promise(()=>{});class rAe extends I.Component{constructor(t){super(t),this.state={error:null}}static getDerivedStateFromError(t){return{error:t}}componentDidCatch(t,r){console.error("<Await> caught the following error during render",t,r)}render(){let{children:t,errorElement:r,resolve:n}=this.props,i=null,a=Fc.pending;if(!(n instanceof Promise))a=Fc.success,i=Promise.resolve(),Object.defineProperty(i,"_tracked",{get:()=>!0}),Object.defineProperty(i,"_data",{get:()=>n});else if(this.state.error){a=Fc.error;let s=this.state.error;i=Promise.reject().catch(()=>{}),Object.defineProperty(i,"_tracked",{get:()=>!0}),Object.defineProperty(i,"_error",{get:()=>s})}else n._tracked?(i=n,a=i._error!==void 0?Fc.error:i._data!==void 0?Fc.success:Fc.pending):(a=Fc.pending,Object.defineProperty(n,"_tracked",{get:()=>!0}),i=n.then(s=>Object.defineProperty(n,"_data",{get:()=>s}),s=>Object.defineProperty(n,"_error",{get:()=>s})));if(a===Fc.error&&i._error instanceof zA)throw tAe;if(a===Fc.error&&!r)throw i._error;if(a===Fc.error)return I.createElement(HA.Provider,{value:i,children:r});if(a===Fc.success)return I.createElement(HA.Provider,{value:i,children:t});throw i}}function nAe(e){let{children:t}=e,r=mie(),n=typeof t=="function"?t(r):t;return I.createElement(I.Fragment,null,n)}function wS(e,t){t===void 0&&(t=[]);let r=[];return I.Children.forEach(e,(n,i)=>{if(!I.isValidElement(n))return;let a=[...t,i];if(n.type===I.Fragment){r.push.apply(r,wS(n.props.children,a));return}n.type!==xa&&Er(!1),!n.props.index||!n.props.children||Er(!1);let s={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=wS(n.props.children,a)),r.push(s)}),r}function iAe(e){return cie(e)}function VL(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:I.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:I.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:I.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}function aAe(e,t){return zL({basename:t==null?void 0:t.basename,future:F0({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:Bne({initialEntries:t==null?void 0:t.initialEntries,initialIndex:t==null?void 0:t.initialIndex}),hydrationData:t==null?void 0:t.hydrationData,routes:e,mapRouteProperties:VL,unstable_dataStrategy:t==null?void 0:t.unstable_dataStrategy}).initialize()}/**
 * React Router DOM v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cl(){return Cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cl.apply(this,arguments)}function qL(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}const qN="get",bj="application/x-www-form-urlencoded";function QO(e){return e!=null&&typeof e.tagName=="string"}function sAe(e){return QO(e)&&e.tagName.toLowerCase()==="button"}function oAe(e){return QO(e)&&e.tagName.toLowerCase()==="form"}function lAe(e){return QO(e)&&e.tagName.toLowerCase()==="input"}function cAe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function uAe(e,t){return e.button===0&&(!t||t==="_self")&&!cAe(e)}function WA(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function dAe(e,t){let r=WA(e);return t&&t.forEach((n,i)=>{r.has(i)||t.getAll(i).forEach(a=>{r.append(i,a)})}),r}let h_=null;function fAe(){if(h_===null)try{new FormData(document.createElement("form"),0),h_=!1}catch{h_=!0}return h_}const hAe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wj(e){return e!=null&&!hAe.has(e)?null:e}function pAe(e,t){let r,n,i,a,s;if(oAe(e)){let o=e.getAttribute("action");n=o?Pl(o,t):null,r=e.getAttribute("method")||qN,i=wj(e.getAttribute("enctype"))||bj,a=new FormData(e)}else if(sAe(e)||lAe(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||o.getAttribute("action");if(n=l?Pl(l,t):null,r=e.getAttribute("formmethod")||o.getAttribute("method")||qN,i=wj(e.getAttribute("formenctype"))||wj(o.getAttribute("enctype"))||bj,a=new FormData(o,e),!fAe()){let{name:c,type:d,value:f}=e;if(d==="image"){let p=c?c+".":"";a.append(p+"x","0"),a.append(p+"y","0")}else c&&a.append(c,f)}}else{if(QO(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=qN,n=null,i=bj,s=e}return a&&i==="text/plain"&&(s=a,a=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:a,body:s}}const mAe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],gAe=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],xAe=["fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","unstable_viewTransition"],vAe="6";try{window.__reactRouterVersion=vAe}catch{}function yAe(e,t){return zL({basename:t==null?void 0:t.basename,future:Cl({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:Une({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||yie(),routes:e,mapRouteProperties:VL,unstable_dataStrategy:t==null?void 0:t.unstable_dataStrategy,window:t==null?void 0:t.window}).initialize()}function bAe(e,t){return zL({basename:t==null?void 0:t.basename,future:Cl({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:$ne({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||yie(),routes:e,mapRouteProperties:VL,unstable_dataStrategy:t==null?void 0:t.unstable_dataStrategy,window:t==null?void 0:t.window}).initialize()}function yie(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=Cl({},t,{errors:wAe(t.errors)})),t}function wAe(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,i]of t)if(i&&i.__type==="RouteErrorResponse")r[n]=new XO(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let a=window[i.__subType];if(typeof a=="function")try{let s=new a(i.message);s.stack="",r[n]=s}catch{}}if(r[n]==null){let a=new Error(i.message);a.stack="",r[n]=a}}else r[n]=i;return r}const GL=I.createContext({isTransitioning:!1}),KL=I.createContext(new Map),SAe="startTransition",L0=ay[SAe],EAe="flushSync",UV=L_e[EAe],CAe="useId",$V=ay[CAe];function kAe(e){L0?L0(e):e()}function Sw(e){UV?UV(e):e()}class _Ae{constructor(){this.status="pending",this.promise=new Promise((t,r)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",r(n))}})}}function NAe(e){let{fallbackElement:t,router:r,future:n}=e,[i,a]=I.useState(r.state),[s,o]=I.useState(),[l,c]=I.useState({isTransitioning:!1}),[d,f]=I.useState(),[p,m]=I.useState(),[x,y]=I.useState(),b=I.useRef(new Map),{v7_startTransition:S}=n||{},_=I.useCallback(O=>{S?kAe(O):O()},[S]),C=I.useCallback((O,D)=>{let{deletedFetchers:L,unstable_flushSync:B,unstable_viewTransitionOpts:H}=D;L.forEach(ie=>b.current.delete(ie)),O.fetchers.forEach((ie,X)=>{ie.data!==void 0&&b.current.set(X,ie.data)});let z=r.window==null||typeof r.window.document.startViewTransition!="function";if(!H||z){B?Sw(()=>a(O)):_(()=>a(O));return}if(B){Sw(()=>{p&&(d&&d.resolve(),p.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:H.currentLocation,nextLocation:H.nextLocation})});let ie=r.window.document.startViewTransition(()=>{Sw(()=>a(O))});ie.finished.finally(()=>{Sw(()=>{f(void 0),m(void 0),o(void 0),c({isTransitioning:!1})})}),Sw(()=>m(ie));return}p?(d&&d.resolve(),p.skipTransition(),y({state:O,currentLocation:H.currentLocation,nextLocation:H.nextLocation})):(o(O),c({isTransitioning:!0,flushSync:!1,currentLocation:H.currentLocation,nextLocation:H.nextLocation}))},[r.window,p,d,b,_]);I.useLayoutEffect(()=>r.subscribe(C),[r,C]),I.useEffect(()=>{l.isTransitioning&&!l.flushSync&&f(new _Ae)},[l]),I.useEffect(()=>{if(d&&s&&r.window){let O=s,D=d.promise,L=r.window.document.startViewTransition(async()=>{_(()=>a(O)),await D});L.finished.finally(()=>{f(void 0),m(void 0),o(void 0),c({isTransitioning:!1})}),m(L)}},[_,s,d,r.window]),I.useEffect(()=>{d&&s&&i.location.key===s.location.key&&d.resolve()},[d,p,i.location,s]),I.useEffect(()=>{!l.isTransitioning&&x&&(o(x.state),c({isTransitioning:!0,flushSync:!1,currentLocation:x.currentLocation,nextLocation:x.nextLocation}),y(void 0))},[l.isTransitioning,x]),I.useEffect(()=>{},[]);let A=I.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:O=>r.navigate(O),push:(O,D,L)=>r.navigate(O,{state:D,preventScrollReset:L==null?void 0:L.preventScrollReset}),replace:(O,D,L)=>r.navigate(O,{replace:!0,state:D,preventScrollReset:L==null?void 0:L.preventScrollReset})}),[r]),j=r.basename||"/",P=I.useMemo(()=>({router:r,navigator:A,static:!1,basename:j}),[r,A,j]);return I.createElement(I.Fragment,null,I.createElement(rb.Provider,{value:P},I.createElement(IE.Provider,{value:i},I.createElement(KL.Provider,{value:b.current},I.createElement(GL.Provider,{value:l},I.createElement(ab,{basename:j,location:i.location,navigationType:i.historyAction,navigator:A,future:{v7_relativeSplatPath:r.future.v7_relativeSplatPath}},i.initialized||r.future.v7_partialHydration?I.createElement(AAe,{routes:r.routes,future:r.future,state:i}):t))))),null)}function AAe(e){let{routes:t,future:r,state:n}=e;return lie(t,void 0,n,r)}function bie(e){let{basename:t,children:r,future:n,window:i}=e,a=I.useRef();a.current==null&&(a.current=Une({window:i,v5Compat:!0}));let s=a.current,[o,l]=I.useState({action:s.action,location:s.location}),{v7_startTransition:c}=n||{},d=I.useCallback(f=>{c&&L0?L0(()=>l(f)):l(f)},[l,c]);return I.useLayoutEffect(()=>s.listen(d),[s,d]),I.createElement(ab,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:s,future:n})}function TAe(e){let{basename:t,children:r,future:n,window:i}=e,a=I.useRef();a.current==null&&(a.current=$ne({window:i,v5Compat:!0}));let s=a.current,[o,l]=I.useState({action:s.action,location:s.location}),{v7_startTransition:c}=n||{},d=I.useCallback(f=>{c&&L0?L0(()=>l(f)):l(f)},[l,c]);return I.useLayoutEffect(()=>s.listen(d),[s,d]),I.createElement(ab,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:s,future:n})}function IAe(e){let{basename:t,children:r,future:n,history:i}=e,[a,s]=I.useState({action:i.action,location:i.location}),{v7_startTransition:o}=n||{},l=I.useCallback(c=>{o&&L0?L0(()=>s(c)):s(c)},[s,o]);return I.useLayoutEffect(()=>i.listen(l),[i,l]),I.createElement(ab,{basename:t,children:r,location:a.location,navigationType:a.action,navigator:i,future:n})}const OAe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PAe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ui=I.forwardRef(function(t,r){let{onClick:n,relative:i,reloadDocument:a,replace:s,state:o,target:l,to:c,preventScrollReset:d,unstable_viewTransition:f}=t,p=qL(t,mAe),{basename:m}=I.useContext(bc),x,y=!1;if(typeof c=="string"&&PAe.test(c)&&(x=c,OAe))try{let C=new URL(window.location.href),A=c.startsWith("//")?new URL(C.protocol+c):new URL(c),j=Pl(A.pathname,m);A.origin===C.origin&&j!=null?c=j+A.search+A.hash:y=!0}catch{}let b=nie(c,{relative:i}),S=Sie(c,{replace:s,state:o,target:l,preventScrollReset:d,relative:i,unstable_viewTransition:f});function _(C){n&&n(C),C.defaultPrevented||S(C)}return I.createElement("a",Cl({},p,{href:x||b,onClick:y||a?n:_,ref:r,target:l}))}),Gl=I.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:i=!1,className:a="",end:s=!1,style:o,to:l,unstable_viewTransition:c,children:d}=t,f=qL(t,gAe),p=ib(l,{relative:f.relative}),m=Fl(),x=I.useContext(IE),{navigator:y,basename:b}=I.useContext(bc),S=x!=null&&Nie(p)&&c===!0,_=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,C=m.pathname,A=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;i||(C=C.toLowerCase(),A=A?A.toLowerCase():null,_=_.toLowerCase()),A&&b&&(A=Pl(A,b)||A);const j=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let P=C===_||!s&&C.startsWith(_)&&C.charAt(j)==="/",O=A!=null&&(A===_||!s&&A.startsWith(_)&&A.charAt(_.length)==="/"),D={isActive:P,isPending:O,isTransitioning:S},L=P?n:void 0,B;typeof a=="function"?B=a(D):B=[a,P?"active":null,O?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let H=typeof o=="function"?o(D):o;return I.createElement(ui,Cl({},f,{"aria-current":L,className:B,ref:r,style:H,to:l,unstable_viewTransition:c}),typeof d=="function"?d(D):d)}),wie=I.forwardRef((e,t)=>{let{fetcherKey:r,navigate:n,reloadDocument:i,replace:a,state:s,method:o=qN,action:l,onSubmit:c,relative:d,preventScrollReset:f,unstable_viewTransition:p}=e,m=qL(e,xAe),x=YL(),y=kie(l,{relative:d}),b=o.toLowerCase()==="get"?"get":"post",S=_=>{if(c&&c(_),_.defaultPrevented)return;_.preventDefault();let C=_.nativeEvent.submitter,A=(C==null?void 0:C.getAttribute("formmethod"))||o;x(C||_.currentTarget,{fetcherKey:r,method:A,navigate:n,replace:a,state:s,relative:d,preventScrollReset:f,unstable_viewTransition:p})};return I.createElement("form",Cl({ref:t,method:b,action:y,onSubmit:i?c:S},m))});function RAe(e){let{getKey:t,storageKey:r}=e;return _ie({getKey:t,storageKey:r}),null}var hy;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(hy||(hy={}));var SS;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(SS||(SS={}));function JO(e){let t=I.useContext(rb);return t||Er(!1),t}function XL(e){let t=I.useContext(IE);return t||Er(!1),t}function Sie(e,t){let{target:r,replace:n,state:i,preventScrollReset:a,relative:s,unstable_viewTransition:o}=t===void 0?{}:t,l=wu(),c=Fl(),d=ib(e,{relative:s});return I.useCallback(f=>{if(uAe(f,r)){f.preventDefault();let p=n!==void 0?n:fd(c)===fd(d);l(e,{replace:p,state:i,preventScrollReset:a,relative:s,unstable_viewTransition:o})}},[c,l,d,n,i,r,e,a,s,o])}function Eie(e){let t=I.useRef(WA(e)),r=I.useRef(!1),n=Fl(),i=I.useMemo(()=>dAe(n.search,r.current?null:t.current),[n.search]),a=wu(),s=I.useCallback((o,l)=>{const c=WA(typeof o=="function"?o(i):o);r.current=!0,a("?"+c,l)},[a,i]);return[i,s]}function jAe(){if(typeof document>"u")throw new Error("You are calling submit during the server render. Try calling submit within a `useEffect` or callback instead.")}let DAe=0,Cie=()=>"__"+String(++DAe)+"__";function YL(){let{router:e}=JO(hy.UseSubmit),{basename:t}=I.useContext(bc),r=die();return I.useCallback(function(n,i){i===void 0&&(i={}),jAe();let{action:a,method:s,encType:o,formData:l,body:c}=pAe(n,t);if(i.navigate===!1){let d=i.fetcherKey||Cie();e.fetch(d,r,i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||s,formEncType:i.encType||o,unstable_flushSync:i.unstable_flushSync})}else e.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||s,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:r,unstable_flushSync:i.unstable_flushSync,unstable_viewTransition:i.unstable_viewTransition})},[e,t,r])}function kie(e,t){let{relative:r}=t===void 0?{}:t,{basename:n}=I.useContext(bc),i=I.useContext(wc);i||Er(!1);let[a]=i.matches.slice(-1),s=Cl({},ib(e||".",{relative:r})),o=Fl();if(e==null){s.search=o.search;let l=new URLSearchParams(s.search);l.has("index")&&l.get("index")===""&&(l.delete("index"),s.search=l.toString()?"?"+l.toString():"")}return(!e||e===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:sf([n,s.pathname])),fd(s)}function MAe(e){var t;let{key:r}=e===void 0?{}:e,{router:n}=JO(hy.UseFetcher),i=XL(SS.UseFetcher),a=I.useContext(KL),s=I.useContext(wc),o=(t=s.matches[s.matches.length-1])==null?void 0:t.route.id;a||Er(!1),s||Er(!1),o==null&&Er(!1);let l=$V?$V():"",[c,d]=I.useState(r||l);r&&r!==c?d(r):c||d(Cie()),I.useEffect(()=>(n.getFetcher(c),()=>{n.deleteFetcher(c)}),[n,c]);let f=I.useCallback((_,C)=>{o||Er(!1),n.fetch(c,o,_,C)},[c,o,n]),p=YL(),m=I.useCallback((_,C)=>{p(_,Cl({},C,{navigate:!1,fetcherKey:c}))},[c,p]),x=I.useMemo(()=>I.forwardRef((C,A)=>I.createElement(wie,Cl({},C,{navigate:!1,fetcherKey:c,ref:A}))),[c]),y=i.fetchers.get(c)||Yne,b=a.get(c);return I.useMemo(()=>Cl({Form:x,submit:m,load:f},y,{data:b}),[x,m,f,y,b])}function FAe(){let e=XL(SS.UseFetchers);return Array.from(e.fetchers.entries()).map(t=>{let[r,n]=t;return Cl({},n,{key:r})})}const zV="react-router-scroll-positions";let p_={};function _ie(e){let{getKey:t,storageKey:r}=e===void 0?{}:e,{router:n}=JO(hy.UseScrollRestoration),{restoreScrollPosition:i,preventScrollReset:a}=XL(SS.UseScrollRestoration),{basename:s}=I.useContext(bc),o=Fl(),l=hie(),c=fie();I.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),BAe(I.useCallback(()=>{if(c.state==="idle"){let d=(t?t(o,l):null)||o.key;p_[d]=window.scrollY}try{sessionStorage.setItem(r||zV,JSON.stringify(p_))}catch{}window.history.scrollRestoration="auto"},[r,t,c.state,o,l])),typeof document<"u"&&(I.useLayoutEffect(()=>{try{let d=sessionStorage.getItem(r||zV);d&&(p_=JSON.parse(d))}catch{}},[r]),I.useLayoutEffect(()=>{let d=t&&s!=="/"?(p,m)=>t(Cl({},p,{pathname:Pl(p.pathname,s)||p.pathname}),m):t,f=n==null?void 0:n.enableScrollRestoration(p_,()=>window.scrollY,d);return()=>f&&f()},[n,s,t]),I.useLayoutEffect(()=>{if(i!==!1){if(typeof i=="number"){window.scrollTo(0,i);return}if(o.hash){let d=document.getElementById(decodeURIComponent(o.hash.slice(1)));if(d){d.scrollIntoView();return}}a!==!0&&window.scrollTo(0,0)}},[o,i,a]))}function LAe(e,t){let{capture:r}=t||{};I.useEffect(()=>{let n=r!=null?{capture:r}:void 0;return window.addEventListener("beforeunload",e,n),()=>{window.removeEventListener("beforeunload",e,n)}},[e,r])}function BAe(e,t){let{capture:r}={};I.useEffect(()=>{let n=r!=null?{capture:r}:void 0;return window.addEventListener("pagehide",e,n),()=>{window.removeEventListener("pagehide",e,n)}},[e,r])}function UAe(e){let{when:t,message:r}=e,n=gie(t);I.useEffect(()=>{n.state==="blocked"&&(window.confirm(r)?setTimeout(n.proceed,0):n.reset())},[n,r]),I.useEffect(()=>{n.state==="blocked"&&!t&&n.reset()},[n,t])}function Nie(e,t){t===void 0&&(t={});let r=I.useContext(GL);r==null&&Er(!1);let{basename:n}=JO(hy.useViewTransitionState),i=ib(e,{relative:t.relative});if(!r.isTransitioning)return!1;let a=Pl(r.currentLocation.pathname,n)||r.currentLocation.pathname,s=Pl(r.nextLocation.pathname,n)||r.nextLocation.pathname;return bS(i.pathname,s)!=null||bS(i.pathname,a)!=null}const $Ae=Object.freeze(Object.defineProperty({__proto__:null,AbortedDeferredError:zA,Await:eAe,BrowserRouter:bie,Form:wie,HashRouter:TAe,Link:ui,MemoryRouter:JNe,NavLink:Gl,Navigate:ZNe,get NavigationType(){return xi},Outlet:xie,Route:xa,Router:ab,RouterProvider:NAe,Routes:vie,ScrollRestoration:RAe,UNSAFE_DataRouterContext:rb,UNSAFE_DataRouterStateContext:IE,UNSAFE_ErrorResponseImpl:XO,UNSAFE_FetchersContext:KL,UNSAFE_LocationContext:nb,UNSAFE_NavigationContext:bc,UNSAFE_RouteContext:wc,UNSAFE_ViewTransitionContext:GL,UNSAFE_useRouteId:die,UNSAFE_useScrollRestoration:_ie,createBrowserRouter:yAe,createHashRouter:bAe,createMemoryRouter:aAe,createPath:fd,createRoutesFromChildren:wS,createRoutesFromElements:wS,createSearchParams:WA,defer:cNe,generatePath:J_e,isRouteErrorResponse:YO,json:aNe,matchPath:bS,matchRoutes:ag,parsePath:bu,redirect:Kne,redirectDocument:uNe,renderMatches:iAe,resolvePath:qne,unstable_HistoryRouter:IAe,unstable_usePrompt:UAe,unstable_useViewTransitionState:Nie,useActionData:qNe,useAsyncError:GNe,useAsyncValue:mie,useBeforeUnload:LAe,useBlocker:gie,useFetcher:MAe,useFetchers:FAe,useFormAction:kie,useHref:nie,useInRouterContext:Z0,useLinkClickHandler:Sie,useLoaderData:WNe,useLocation:Fl,useMatch:DNe,useMatches:hie,useNavigate:wu,useNavigation:fie,useNavigationType:jNe,useOutlet:sie,useOutletContext:FNe,useParams:jx,useResolvedPath:ib,useRevalidator:HNe,useRouteError:pie,useRouteLoaderData:VNe,useRoutes:oie,useSearchParams:Eie,useSubmit:YL},Symbol.toStringTag,{value:"Module"}));var tm={},Yi={},zi={},sb={},Aie={},PE={},zAe=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(PE,"__esModule",{value:!0});PE.STGeneralError=void 0;var HAe=function(e){zAe(t,e);function t(r){var n=e.call(this,r)||this;return n.isSuperTokensGeneralError=!0,n}return t.isThisError=function(r){return r.isSuperTokensGeneralError===!0},t}(Error);PE.STGeneralError=HAe;(function(e){function t(n){for(var i in n)e.hasOwnProperty(i)||(e[i]=n[i])}e.__esModule=!0;let r=PE;r.default!==void 0?t(r):t({default:r,...r})})(Aie);Object.defineProperty(sb,"__esModule",{value:!0});var WAe=Aie;sb.default=WAe.STGeneralError;var QL={},JL={},Tie={},Dx={},ZO={},Su={},e4={},Yd=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},Qd=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(e4,"__esModule",{value:!0});e4.defaultWindowHandlerImplementation=void 0;function Rn(){if(typeof window>"u")throw Error("If you are using this package with server-side rendering, please make sure that you are checking if the window object is defined.");return window}var VAe={key:function(e){return Yd(this,void 0,void 0,function(){return Qd(this,function(t){return[2,Rn().localStorage.key(e)]})})},clear:function(){return Yd(this,void 0,void 0,function(){return Qd(this,function(e){return[2,Rn().localStorage.clear()]})})},getItem:function(e){return Yd(this,void 0,void 0,function(){return Qd(this,function(t){return[2,Rn().localStorage.getItem(e)]})})},removeItem:function(e){return Yd(this,void 0,void 0,function(){return Qd(this,function(t){return[2,Rn().localStorage.removeItem(e)]})})},setItem:function(e,t){return Yd(this,void 0,void 0,function(){return Qd(this,function(r){return[2,Rn().localStorage.setItem(e,t)]})})},keySync:function(e){return Rn().localStorage.key(e)},clearSync:function(){return Rn().localStorage.clear()},getItemSync:function(e){return Rn().localStorage.getItem(e)},removeItemSync:function(e){return Rn().localStorage.removeItem(e)},setItemSync:function(e,t){return Rn().localStorage.setItem(e,t)}},qAe={key:function(e){return Yd(this,void 0,void 0,function(){return Qd(this,function(t){return[2,Rn().sessionStorage.key(e)]})})},clear:function(){return Yd(this,void 0,void 0,function(){return Qd(this,function(e){return[2,Rn().sessionStorage.clear()]})})},getItem:function(e){return Yd(this,void 0,void 0,function(){return Qd(this,function(t){return[2,Rn().sessionStorage.getItem(e)]})})},removeItem:function(e){return Yd(this,void 0,void 0,function(){return Qd(this,function(t){return[2,Rn().sessionStorage.removeItem(e)]})})},setItem:function(e,t){return Yd(this,void 0,void 0,function(){return Qd(this,function(r){return[2,Rn().sessionStorage.setItem(e,t)]})})},keySync:function(e){return Rn().sessionStorage.key(e)},clearSync:function(){return Rn().sessionStorage.clear()},getItemSync:function(e){return Rn().sessionStorage.getItem(e)},removeItemSync:function(e){return Rn().sessionStorage.removeItem(e)},setItemSync:function(e,t){return Rn().sessionStorage.setItem(e,t)}};e4.defaultWindowHandlerImplementation={history:{replaceState:function(e,t,r){return Rn().history.replaceState(e,t,r)},getState:function(){return Rn().history.state}},location:{getHref:function(){return Rn().location.href},setHref:function(e){Rn().location.href=e},getSearch:function(){return Rn().location.search},getHash:function(){return Rn().location.hash},getPathName:function(){return Rn().location.pathname},assign:function(e){Rn().location.assign(e)},getHostName:function(){return Rn().location.hostname},getHost:function(){return Rn().location.host},getOrigin:function(){return Rn().location.origin}},getDocument:function(){return Rn().document},getWindowUnsafe:function(){return Rn().window},localStorage:VAe,sessionStorage:qAe};Object.defineProperty(Su,"__esModule",{value:!0});Su.WindowHandlerReference=void 0;var GAe=e4,Iie=function(){function e(t){var r=function(n){return n};t!==void 0&&(r=t),this.windowHandler=r(GAe.defaultWindowHandlerImplementation)}return e.init=function(t){e.instance===void 0&&(e.instance=new e(t))},e.getReferenceOrThrow=function(){if(e.instance===void 0)throw new Error("SuperTokensWindowHandler must be initialized before calling this method.");return e.instance},e}();Su.WindowHandlerReference=Iie;Su.default=Iie;var HV=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},WV=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(ZO,"__esModule",{value:!0});ZO.defaultCookieHandlerImplementation=void 0;var VV=Su;ZO.defaultCookieHandlerImplementation={getCookie:function(){return HV(this,void 0,void 0,function(){return WV(this,function(e){return[2,VV.default.getReferenceOrThrow().windowHandler.getWindowUnsafe().document.cookie]})})},setCookie:function(e){return HV(this,void 0,void 0,function(){return WV(this,function(t){return VV.default.getReferenceOrThrow().windowHandler.getWindowUnsafe().document.cookie=e,[2]})})}};Object.defineProperty(Dx,"__esModule",{value:!0});Dx.CookieHandlerReference=void 0;var KAe=ZO,Oie=function(){function e(t){var r=function(n){return n};t!==void 0&&(r=t),this.cookieHandler=r(KAe.defaultCookieHandlerImplementation)}return e.init=function(t){e.instance===void 0&&(e.instance=new e(t))},e.getReferenceOrThrow=function(){if(e.instance===void 0)throw new Error("SuperTokensCookieHandler must be initialized before calling this method.");return e.instance},e}();Dx.CookieHandlerReference=Oie;Dx.default=Oie;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(Dx)})(Tie);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CookieHandlerReference=void 0;var t=Tie;Object.defineProperty(e,"CookieHandlerReference",{enumerable:!0,get:function(){return t.CookieHandlerReference}})})(JL);(function(e){function t(n){for(var i in n)e.hasOwnProperty(i)||(e[i]=n[i])}e.__esModule=!0;let r=JL;r.default!==void 0?t(r):t({default:r,...r})})(QL);var Pie={},t4={};Object.defineProperty(t4,"__esModule",{value:!0});var XAe=function(){function e(t){var r=this;this.getAsStringDangerous=function(){return r.value},this.value=Rie(t)}return e}();t4.default=XAe;function Rie(e,t){t===void 0&&(t=!1);function r(i){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(i)}e=e.trim();try{if(!e.startsWith("http://")&&!e.startsWith("https://"))throw new Error("Error converting to proper URL");var n=new URL(e);return t?n.hostname.startsWith("localhost")||r(n.hostname)?e="http://"+n.host:e="https://"+n.host:e=n.protocol+"//"+n.host,e}catch{}if(e.startsWith("/"))throw new Error("Please provide a valid domain name");if(e.indexOf(".")===0&&(e=e.substr(1)),(e.indexOf(".")!==-1||e.startsWith("localhost"))&&!e.startsWith("http://")&&!e.startsWith("https://")){e="https://"+e;try{return new URL(e),Rie(e,!0)}catch{}}throw new Error("Please provide a valid domain name")}(function(e){function t(n){for(var i in n)e.hasOwnProperty(i)||(e[i]=n[i])}e.__esModule=!0;let r=t4;r.default!==void 0?t(r):t({default:r,...r})})(Pie);var r4={},ob={};Object.defineProperty(ob,"__esModule",{value:!0});var YAe=function(){function e(t){var r=this;this.startsWith=function(n){return r.value.startsWith(n.value)},this.appendPath=function(n){return new e(r.value+n.value)},this.getAsStringDangerous=function(){return r.value},this.value=L6(t)}return e}();ob.default=YAe;function L6(e){e=e.trim();try{if(!e.startsWith("http://")&&!e.startsWith("https://"))throw new Error("Error converting to proper URL");var t=new URL(e);return e=t.pathname,e.charAt(e.length-1)==="/"?e.substr(0,e.length-1):e}catch{}if((QAe(e)||e.startsWith("localhost"))&&!e.startsWith("http://")&&!e.startsWith("https://"))return e="http://"+e,L6(e);e.charAt(0)!=="/"&&(e="/"+e);try{return new URL("http://example.com"+e),L6("http://example.com"+e)}catch{throw new Error("Please provide a valid URL path")}}function QAe(e){if(e.indexOf(".")===-1||e.startsWith("/"))return!1;try{var t=new URL(e);return t.hostname.indexOf(".")!==-1}catch{}try{var t=new URL("http://"+e);return t.hostname.indexOf(".")!==-1}catch{}return!1}(function(e){function t(n){for(var i in n)e.hasOwnProperty(i)||(e[i]=n[i])}e.__esModule=!0;let r=ob;r.default!==void 0?t(r):t({default:r,...r})})(r4);var lb={},n4={},ZL={};(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(Su)})(ZL);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WindowHandlerReference=void 0;var t=ZL;Object.defineProperty(e,"WindowHandlerReference",{enumerable:!0,get:function(){return t.WindowHandlerReference}})})(n4);(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(n4)})(lb);(function(e){var t={},r=I,n=sb,i=QL,a=Pie,s=r4,o=lb;function l(qe){return qe&&qe.__esModule?qe:{default:qe}}var c=l(n),d=l(a),f=l(s),p=function(qe,Xe){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Te,He){Te.__proto__=He}||function(Te,He){for(var je in He)Object.prototype.hasOwnProperty.call(He,je)&&(Te[je]=He[je])},p(qe,Xe)};function m(qe,Xe){if(typeof Xe!="function"&&Xe!==null)throw new TypeError("Class extends value "+String(Xe)+" is not a constructor or null");p(qe,Xe);function Te(){this.constructor=qe}qe.prototype=Xe===null?Object.create(Xe):(Te.prototype=Xe.prototype,new Te)}e.__assign=function(){return e.__assign=Object.assign||function(Xe){for(var Te,He=1,je=arguments.length;He<je;He++){Te=arguments[He];for(var we in Te)Object.prototype.hasOwnProperty.call(Te,we)&&(Xe[we]=Te[we])}return Xe},e.__assign.apply(this,arguments)};function x(qe,Xe){var Te={};for(var He in qe)Object.prototype.hasOwnProperty.call(qe,He)&&Xe.indexOf(He)<0&&(Te[He]=qe[He]);if(qe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var je=0,He=Object.getOwnPropertySymbols(qe);je<He.length;je++)Xe.indexOf(He[je])<0&&Object.prototype.propertyIsEnumerable.call(qe,He[je])&&(Te[He[je]]=qe[He[je]]);return Te}function y(qe,Xe,Te,He){function je(we){return we instanceof Te?we:new Te(function(ot){ot(we)})}return new(Te||(Te=Promise))(function(we,ot){function xt(kr){try{Pt(He.next(kr))}catch(Cn){ot(Cn)}}function Dt(kr){try{Pt(He.throw(kr))}catch(Cn){ot(Cn)}}function Pt(kr){kr.done?we(kr.value):je(kr.value).then(xt,Dt)}Pt((He=He.apply(qe,Xe||[])).next())})}function b(qe,Xe){var Te={label:0,sent:function(){if(we[0]&1)throw we[1];return we[1]},trys:[],ops:[]},He,je,we,ot=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return ot.next=xt(0),ot.throw=xt(1),ot.return=xt(2),typeof Symbol=="function"&&(ot[Symbol.iterator]=function(){return this}),ot;function xt(Pt){return function(kr){return Dt([Pt,kr])}}function Dt(Pt){if(He)throw new TypeError("Generator is already executing.");for(;ot&&(ot=0,Pt[0]&&(Te=0)),Te;)try{if(He=1,je&&(we=Pt[0]&2?je.return:Pt[0]?je.throw||((we=je.return)&&we.call(je),0):je.next)&&!(we=we.call(je,Pt[1])).done)return we;switch(je=0,we&&(Pt=[Pt[0]&2,we.value]),Pt[0]){case 0:case 1:we=Pt;break;case 4:return Te.label++,{value:Pt[1],done:!1};case 5:Te.label++,je=Pt[1],Pt=[0];continue;case 7:Pt=Te.ops.pop(),Te.trys.pop();continue;default:if(we=Te.trys,!(we=we.length>0&&we[we.length-1])&&(Pt[0]===6||Pt[0]===2)){Te=0;continue}if(Pt[0]===3&&(!we||Pt[1]>we[0]&&Pt[1]<we[3])){Te.label=Pt[1];break}if(Pt[0]===6&&Te.label<we[1]){Te.label=we[1],we=Pt;break}if(we&&Te.label<we[2]){Te.label=we[2],Te.ops.push(Pt);break}we[2]&&Te.ops.pop(),Te.trys.pop();continue}Pt=Xe.call(qe,Te)}catch(kr){Pt=[6,kr],je=0}finally{He=we=0}if(Pt[0]&5)throw Pt[1];return{value:Pt[0]?Pt[1]:void 0,done:!0}}}function S(qe,Xe,Te){if(Te||arguments.length===2)for(var He=0,je=Xe.length,we;He<je;He++)(we||!(He in Xe))&&(we||(we=Array.prototype.slice.call(Xe,0,He)),we[He]=Xe[He]);return qe.concat(we||Array.prototype.slice.call(Xe))}typeof SuppressedError=="function"&&SuppressedError;var _="rid",C="tenantId",A="/auth",j="/auth",P="supertokens-root",O=`
If you are trying to use this method doing server-side-rendering, please make sure you move this method inside a componentDidMount method or useEffect hook.`,D="0.51.0",L="com.supertokens.auth-react",B=!1;function H(){B=!0}function z(qe){B&&console.log("".concat(L,' {t: "').concat(new Date().toISOString(),'", message: "').concat(qe,'", supertokens-auth-react-ver: "').concat(D,'"}'))}var ie=["experimental"];function X(qe){var Xe=new URLSearchParams(qe);return Xe.get(_)}function W(qe){for(var Xe=new URL(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHref()),Te=0,He=qe;Te<He.length;Te++){var je=He[Te];Xe.searchParams.delete(je)}o.WindowHandlerReference.getReferenceOrThrow().windowHandler.history.replaceState(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.history.getState(),"",Xe.toString())}function Q(qe,Xe){var Te=new URL(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHref());Te.searchParams.set(qe,Xe),o.WindowHandlerReference.getReferenceOrThrow().windowHandler.history.replaceState(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.history.getState(),"",Te.toString())}function te(){W(["error","message"])}function J(qe){var Xe=new URLSearchParams(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getSearch());return Xe.get(qe)}function Y(){return o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHash().substring(1)}function pe(){var qe=J("redirectToPath");if(qe!==null)try{var Xe=void 0;try{Xe=new URL(qe)}catch{var Te=qe.startsWith("/")?"http://localhost":"http://localhost/";Xe=new URL("".concat(Te).concat(qe))}var He=new f.default(qe).getAsStringDangerous(),je=Xe.search||"",we=Xe.hash||"",ot=He+je+we;return He.length===0&&ot.length>0&&!ot.startsWith("/")?"/"+ot:ot}catch{return}}function _e(){var qe;return(qe=J(C))!==null&&qe!==void 0?qe:void 0}function ee(qe,Xe,Te,He){var je=qe.appInfo.websiteBasePath.appendPath(new f.default(Xe)).getAsStringDangerous(),we=new URLSearchParams;return Te.tenantIdFromQueryParams!==void 0&&we.set(C,Te.tenantIdFromQueryParams),He!==void 0&&Object.entries(He).forEach(function(ot){var xt=ot[0],Dt=ot[1];Dt!==void 0&&we.set(xt,Dt)}),we.toString()!==""?"".concat(je,"?").concat(we.toString()):je}function de(){try{return t.TEST_MODE==="testing"||t.REACT_APP_TEST_MODE==="testing"}catch{return!1}}function G(qe){if(qe===void 0)throw new Error("Please provide the appInfo object when calling supertokens.init");if(qe.apiDomain===void 0)throw new Error("Please provide your apiDomain inside the appInfo object when calling supertokens.init");if(qe.appName===void 0)throw new Error("Please provide your appName inside the appInfo object when calling supertokens.init");if(qe.websiteDomain===void 0)throw new Error("Please provide your websiteDomain inside the appInfo object when calling supertokens.init");var Xe=new f.default("");return qe.apiGatewayPath!==void 0&&(Xe=new f.default(qe.apiGatewayPath)),{appName:qe.appName,apiDomain:new d.default(qe.apiDomain),websiteDomain:new d.default(qe.websiteDomain),apiBasePath:Xe.appendPath(q(A,qe.apiBasePath)),websiteBasePath:q(j,qe.websiteBasePath)}}function q(qe,Xe){return Xe!==void 0?new f.default(Xe):new f.default(qe)}function ne(qe,Xe){return y(this,void 0,void 0,function(){var Te,He,je;return b(this,function(we){switch(we.label){case 0:if(Te=[],Xe.length!==qe.length)throw Error("Are you sending too many / too few formFields?");He=function(ot){var xt,Dt,Pt,kr;return b(this,function(Cn){switch(Cn.label){case 0:return xt=Xe[ot],Dt=qe.find(function(fr){return fr.id===xt.id}),Pt=Dt.value,Dt.id==="email"&&(Pt=Pt.trim()),[4,xt.validate(Pt)];case 1:return kr=Cn.sent(),kr!==void 0&&Te.push({error:kr,id:xt.id}),[2]}})},je=0,we.label=1;case 1:return je<Xe.length?[5,He(je)]:[3,4];case 2:we.sent(),we.label=3;case 3:return je++,[3,1];case 4:return[2,Te]}})})}function Se(){return new f.default(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getPathName())}function re(){var qe=Se().getAsStringDangerous();return qe+o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getSearch()+o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHash()}function ae(qe,Xe){if(Xe===void 0)return qe;try{var Te=new URL(qe);return Object.entries(Xe).forEach(function(we){var ot=we[0],xt=we[1];Te.searchParams.set(ot,xt)}),Te.href}catch{var He=qe.startsWith("/")?"http://localhost":"http://localhost/",je=new URL("".concat(He).concat(qe));return Object.entries(Xe).forEach(function(ot){var xt=ot[0],Dt=ot[1];je.searchParams.set(xt,Dt)}),"".concat(je.pathname).concat(je.search).concat(je.hash)}}function ge(qe){return qe.endsWith("/")?qe:qe+"/"}function Ee(qe){return function(){var Xe=X(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getSearch());return Xe===qe}}function V(qe){qe.trim()===""&&(qe="/"),o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.setHref(qe)}function Ae(qe,Xe){qe.trim()===""&&(qe="/"),"push"in Xe?Xe.push(qe):Xe(qe)}function Pe(){return new d.default(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getOrigin())}function ze(qe){return y(this,void 0,void 0,function(){var Xe;return b(this,function(Te){return Xe=o.WindowHandlerReference.getReferenceOrThrow().windowHandler.localStorage.getItem(qe),Xe==null?[2,null]:[2,Xe]})})}function De(qe,Xe){return y(this,void 0,void 0,function(){return b(this,function(Te){switch(Te.label){case 0:return[4,o.WindowHandlerReference.getReferenceOrThrow().windowHandler.localStorage.setItem(qe,Xe)];case 1:return Te.sent(),[2]}})})}function $e(qe){return y(this,void 0,void 0,function(){return b(this,function(Xe){switch(Xe.label){case 0:return[4,o.WindowHandlerReference.getReferenceOrThrow().windowHandler.localStorage.removeItem(qe)];case 1:return Xe.sent(),[2]}})})}function et(qe,Xe){var Te=e.__assign({},qe);for(var He in Xe)typeof Te[He]=="object"&&typeof Xe[He]=="object"?Te[He]=et(Te[He],Xe[He]):Te[He]=Xe[He];return Te}function ut(qe){function Xe(je){je=je.trim().toLowerCase(),je.startsWith(".")&&(je=je.substring(1)),!je.startsWith("http://")&&!je.startsWith("https://")&&(je="http://"+je);try{var we=new URL(je);return je=we.hostname,je.startsWith(".")&&(je=je.substring(1)),je}catch{throw new Error("Please provide a valid cookie scope")}}function Te(je){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(je)}var He=Xe(qe);return He==="localhost"||Te(He)?He:qe.startsWith(".")?"."+He:He}function kt(){try{return ut(o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHostName())}catch{return}}function ht(qe){return y(this,void 0,void 0,function(){var Xe,Te,He,je,we;return b(this,function(ot){switch(ot.label){case 0:return Te="; ",[4,i.CookieHandlerReference.getReferenceOrThrow().cookieHandler.getCookie()];case 1:return Xe=Te+ot.sent(),He=Xe.split("; "+qe+"="),He.length>=2&&(je=He.pop(),je!==void 0)?(we=je.split(";").shift(),we===void 0?[2,null]:[2,we]):[2,null]}})})}function jr(qe,Xe,Te){return y(this,void 0,void 0,function(){var He,je;return b(this,function(we){switch(we.label){case 0:return He="Thu, 01 Jan 1970 00:00:01 GMT",je="",Xe!==void 0&&(je=Xe,He=void 0),Te==="localhost"||Te===o.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHostName()||Te===void 0?He===void 0?[3,2]:[4,i.CookieHandlerReference.getReferenceOrThrow().cookieHandler.setCookie("".concat(qe,"=").concat(je,";expires=").concat(He,";path=/;samesite=lax"))]:[3,5];case 1:return we.sent(),[3,4];case 2:return[4,i.CookieHandlerReference.getReferenceOrThrow().cookieHandler.setCookie("".concat(qe,"=").concat(je,";expires=Fri, 31 Dec 9999 23:59:59 GMT;path=/;samesite=lax"))];case 3:we.sent(),we.label=4;case 4:return[3,9];case 5:return He===void 0?[3,7]:[4,i.CookieHandlerReference.getReferenceOrThrow().cookieHandler.setCookie("".concat(qe,"=").concat(je,";expires=").concat(He,";domain=").concat(Te,";path=/;samesite=lax"))];case 6:return we.sent(),[3,9];case 7:return[4,i.CookieHandlerReference.getReferenceOrThrow().cookieHandler.setCookie("".concat(qe,"=").concat(je,";domain=").concat(Te,";expires=Fri, 31 Dec 9999 23:59:59 GMT;path=/;samesite=lax"))];case 8:we.sent(),we.label=9;case 9:return[2]}})})}function er(qe){return qe===void 0?{}:qe}var ct=function(qe,Xe,Te,He){He===void 0&&(He=!0);var je=r.useRef(),we=r.useState(void 0),ot=we[0],xt=we[1];if(r.useEffect(function(){var Dt=function(kr){return y(void 0,void 0,void 0,function(){var Cn,fr,Qi;return b(this,function(Fn){switch(Fn.label){case 0:return Fn.trys.push([0,2,,9]),je.current===void 0&&(je.current=qe()),[4,je.current];case 1:return Cn=Fn.sent(),kr.aborted||Xe(Cn),[3,9];case 2:if(fr=Fn.sent(),kr.aborted)return[3,8];if(Te===void 0)return[3,7];Fn.label=3;case 3:return Fn.trys.push([3,5,,6]),[4,Te(fr,Cn)];case 4:return Fn.sent(),[3,6];case 5:return Qi=Fn.sent(),xt(Qi),[3,6];case 6:return[3,8];case 7:xt(fr),Fn.label=8;case 8:return[3,9];case 9:return[2]}})})};if(He){var Pt=new AbortController;return Dt(Pt.signal),function(){Pt.abort()}}},[xt,je,qe,Xe,Te,He]),ot)throw ot};function qt(){var qe=r.useState(void 0),Xe=qe[0],Te=qe[1];if(Xe)throw Xe;return Te}var Lt=function(qe){var Xe=qe.apiFields,Te=qe.fieldUpdates,He=qe.callAPI;return y(void 0,void 0,void 0,function(){var je,we,ot,xt;return b(this,function(Dt){switch(Dt.label){case 0:return Dt.trys.push([0,2,,3]),[4,He(Xe||[],function(Pt,kr){return Te.push({id:Pt,value:kr})})];case 1:return je=Dt.sent(),[3,3];case 2:if(xt=Dt.sent(),c.default.isThisError(xt))we=xt;else if(xt instanceof Response)ot=xt;else throw xt;return[3,3];case 3:return[2,{result:je,generalError:we,fetchError:ot}]}})})};function dr(qe){return{id:qe.id,initialized:!qe.init,version:qe.version,exports:qe.exports,compatibleAuthReactSDKVersions:qe.compatibleAuthReactSDKVersions,compatibleWebJSSDKVersions:qe.compatibleWebJSSDKVersions}}function Gt(qe){var Xe=Object.keys(qe),Te=Xe.reduce(function(He,je){var we;return ie.includes(je)?He:e.__assign(e.__assign({},He),(we={},we[je]=qe[je],we))},{});return Te}e.SSR_ERROR=O,e.ST_ROOT_ID=P,e.TENANT_ID_QUERY_PARAM=C,e.__awaiter=y,e.__extends=m,e.__generator=b,e.__rest=x,e.__spreadArray=S,e.appendQueryParamsToURL=ae,e.appendTrailingSlashToURL=ge,e.clearErrorQueryParam=te,e.clearQueryParams=W,e.enableLogging=H,e.getCookieValue=ht,e.getCurrentNormalisedUrlPath=Se,e.getCurrentNormalisedUrlPathWithQueryParamsAndFragments=re,e.getDefaultCookieScope=kt,e.getDefaultRedirectionURLForPath=ee,e.getLocalStorage=ze,e.getNormalisedUserContext=er,e.getOriginOfPage=Pe,e.getPublicConfig=Gt,e.getPublicPlugin=dr,e.getQueryParams=J,e.getRedirectToPathFromURL=pe,e.getTenantIdFromQueryParams=_e,e.getURLHash=Y,e.handleCallAPI=Lt,e.isTest=de,e.logDebugMessage=z,e.matchRecipeIdUsingQueryParams=Ee,e.mergeObjects=et,e.normaliseCookieScopeOrThrowError=ut,e.normaliseInputAppInfoOrThrowError=G,e.package_version=D,e.redirectWithFullPageReload=V,e.redirectWithNavigate=Ae,e.removeFromLocalStorage=$e,e.setFrontendCookie=jr,e.setLocalStorage=De,e.updateQueryParam=Q,e.useOnMountAPICall=ct,e.useRethrowInRender=qt,e.validateForm=ne})(zi);var e7={},i4={},$r={},py={};Object.defineProperty(py,"__esModule",{value:!0});py.SSR_ERROR=py.DEFAULT_API_BASE_PATH=void 0;py.DEFAULT_API_BASE_PATH="/auth";py.SSR_ERROR=`
If you are trying to use this method doing server-side-rendering, please make sure you move this method inside a componentDidMount method or useEffect hook.`;var a4={};Object.defineProperty(a4,"__esModule",{value:!0});a4.nonPublicConfigProperties=void 0;a4.nonPublicConfigProperties=["experimental"];var jie={},s4={},fo={},RE={};Object.defineProperty(RE,"__esModule",{value:!0});RE.isAnIpAddress=void 0;function Die(e){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)}RE.isAnIpAddress=Die;var JAe=function(){function e(t){var r=this;this.getAsStringDangerous=function(){return r.value},this.value=Mie(t)}return e}();RE.default=JAe;function Mie(e,t){t===void 0&&(t=!1),e=e.trim();try{if(!e.startsWith("http://")&&!e.startsWith("https://"))throw new Error("converting to proper URL");var r=new URL(e);return t?r.hostname.startsWith("localhost")||Die(r.hostname)?e="http://"+r.host:e="https://"+r.host:e=r.protocol+"//"+r.host,e}catch{}if(e.startsWith("/"))throw new Error("Please provide a valid domain name");if(e.indexOf(".")===0&&(e=e.substr(1)),(e.indexOf(".")!==-1||e.startsWith("localhost"))&&!e.startsWith("http://")&&!e.startsWith("https://")){e="https://"+e;try{return new URL(e),Mie(e,!0)}catch{}}throw new Error("Please provide a valid domain name")}var t7={};Object.defineProperty(t7,"__esModule",{value:!0});var ZAe=function(){function e(t){var r=this;this.startsWith=function(n){return r.value.startsWith(n.value)},this.appendPath=function(n){return new e(r.value+n.value)},this.getAsStringDangerous=function(){return r.value},this.value=B6(t)}return e}();t7.default=ZAe;function B6(e){e=e.trim();try{if(!e.startsWith("http://")&&!e.startsWith("https://"))throw new Error("converting to proper URL");var t=new URL(e);return e=t.pathname,e.charAt(e.length-1)==="/"?e.substr(0,e.length-1):e}catch{}if((eTe(e)||e.startsWith("localhost"))&&!e.startsWith("http://")&&!e.startsWith("https://"))return e="http://"+e,B6(e);e.charAt(0)!=="/"&&(e="/"+e);try{return new URL("http://example.com"+e),B6("http://example.com"+e)}catch{throw new Error("Please provide a valid URL path")}}function eTe(e){if(e.indexOf(".")===-1||e.startsWith("/"))return!1;try{var t=new URL(e);return t.hostname.indexOf(".")!==-1}catch{}try{var t=new URL("http://"+e);return t.hostname.indexOf(".")!==-1}catch{}return!1}var U6=Ve&&Ve.__assign||function(){return U6=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},U6.apply(this,arguments)},qV=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},GV=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(fo,"__esModule",{value:!0});fo.matchesDomainOrSubdomain=fo.getNormalisedUserContext=fo.validateAndNormaliseInputOrThrowError=fo.normaliseSessionScopeOrThrowError=fo.normaliseURLPathOrThrowError=fo.normaliseURLDomainOrThrowError=void 0;var Fie=RE,tTe=t7,rTe=Su;function Lie(e){var t=new Fie.default(e).getAsStringDangerous();return t}fo.normaliseURLDomainOrThrowError=Lie;function $6(e){return new tTe.default(e).getAsStringDangerous()}fo.normaliseURLPathOrThrowError=$6;function z6(e){function t(n){n=n.trim().toLowerCase(),n.startsWith(".")&&(n=n.substr(1)),!n.startsWith("http://")&&!n.startsWith("https://")&&(n="http://"+n);try{var i=new URL(n);return n=i.hostname,n}catch{throw new Error("Please provide a valid sessionScope")}}var r=t(e);return r==="localhost"||(0,Fie.isAnIpAddress)(r)?r:e.startsWith(".")?"."+r:r}fo.normaliseSessionScopeOrThrowError=z6;function nTe(e){var t=this,r=Lie(e.apiDomain),n=$6("/auth");e.apiBasePath!==void 0&&(n=$6(e.apiBasePath));var i=rTe.default.getReferenceOrThrow().windowHandler.location.getHostName(),a=z6(e!==void 0&&e.sessionTokenFrontendDomain!==void 0?e.sessionTokenFrontendDomain:i),s=401;e.sessionExpiredStatusCode!==void 0&&(s=e.sessionExpiredStatusCode);var o=403;if(e.invalidClaimStatusCode!==void 0&&(o=e.invalidClaimStatusCode),s===o)throw new Error("sessionExpiredStatusCode and invalidClaimStatusCode cannot be the same.");var l=!0;e.autoAddCredentials!==void 0&&(l=e.autoAddCredentials);var c=!1;e.isInIframe!==void 0&&(c=e.isInIframe);var d=void 0;e.sessionTokenBackendDomain!==void 0&&(d=z6(e.sessionTokenBackendDomain));var f=10;if(e.maxRetryAttemptsForSessionRefresh!==void 0){if(e.maxRetryAttemptsForSessionRefresh<0)throw new Error("maxRetryAttemptsForSessionRefresh must be greater than or equal to 0.");f=e.maxRetryAttemptsForSessionRefresh}var p=function(b){return qV(t,void 0,void 0,function(){return GV(this,function(S){return[2,{url:b.url,requestInit:b.requestInit}]})})};e.preAPIHook!==void 0&&(p=e.preAPIHook);var m=function(){return qV(t,void 0,void 0,function(){return GV(this,function(b){return[2]})})};e.postAPIHook!==void 0&&(m=e.postAPIHook);var x=function(){};e.onHandleEvent!==void 0&&(x=e.onHandleEvent);var y=U6({functions:function(b){return b}},e.override);return{apiDomain:r,apiBasePath:n,sessionTokenFrontendDomain:a,sessionExpiredStatusCode:s,invalidClaimStatusCode:o,autoAddCredentials:l,isInIframe:c,tokenTransferMethod:e.tokenTransferMethod!==void 0?e.tokenTransferMethod:"cookie",sessionTokenBackendDomain:d,maxRetryAttemptsForSessionRefresh:f,preAPIHook:p,postAPIHook:m,onHandleEvent:x,override:y}}fo.validateAndNormaliseInputOrThrowError=nTe;function iTe(e){return e===void 0?{}:e}fo.getNormalisedUserContext=iTe;function aTe(e,t){for(var r=e.split("."),n=0;n<r.length;n++){var i=r.slice(n).join(".");if(i===t||".".concat(i)===t)return!0}return!1}fo.matchesDomainOrSubdomain=aTe;var cb={},o4={};(function(e){var t={},r=Ve&&Ve.__awaiter||function(a,s,o,l){function c(d){return d instanceof o?d:new o(function(f){f(d)})}return new(o||(o=Promise))(function(d,f){function p(y){try{x(l.next(y))}catch(b){f(b)}}function m(y){try{x(l.throw(y))}catch(b){f(b)}}function x(y){y.done?d(y.value):c(y.value).then(p,m)}x((l=l.apply(a,s||[])).next())})},n=Ve&&Ve.__generator||function(a,s){var o={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},l,c,d,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(x){return function(y){return m([x,y])}}function m(x){if(l)throw new TypeError("Generator is already executing.");for(;o;)try{if(l=1,c&&(d=x[0]&2?c.return:x[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,x[1])).done)return d;switch(c=0,d&&(x=[x[0]&2,d.value]),x[0]){case 0:case 1:d=x;break;case 4:return o.label++,{value:x[1],done:!1};case 5:o.label++,c=x[1],x=[0];continue;case 7:x=o.ops.pop(),o.trys.pop();continue;default:if(d=o.trys,!(d=d.length>0&&d[d.length-1])&&(x[0]===6||x[0]===2)){o=0;continue}if(x[0]===3&&(!d||x[1]>d[0]&&x[1]<d[3])){o.label=x[1];break}if(x[0]===6&&o.label<d[1]){o.label=d[1],d=x;break}if(d&&o.label<d[2]){o.label=d[2],o.ops.push(x);break}d[2]&&o.ops.pop(),o.trys.pop();continue}x=s.call(a,o)}catch(y){x=[6,y],c=0}finally{l=d=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ProcessState=e.PROCESS_STATE=void 0,function(a){a[a.CALLING_INTERCEPTION_REQUEST=0]="CALLING_INTERCEPTION_REQUEST",a[a.CALLING_INTERCEPTION_RESPONSE=1]="CALLING_INTERCEPTION_RESPONSE"}(e.PROCESS_STATE||(e.PROCESS_STATE={}));var i=function(){function a(){var s=this;this.history=[],this.addState=function(o){try{process!==void 0&&t!==void 0&&t.TEST_MODE==="testing"&&s.history.push(o)}catch{}},this.getEventByLastEventByName=function(o){for(var l=s.history.length-1;l>=0;l--)if(s.history[l]==o)return s.history[l]},this.reset=function(){s.history=[]},this.waitForEvent=function(o,l){return l===void 0&&(l=7e3),r(s,void 0,void 0,function(){var c,d=this;return n(this,function(f){return c=Date.now(),[2,new Promise(function(p){var m=d;function x(){var y=m.getEventByLastEventByName(o);y===void 0?Date.now()-c>l?p(void 0):setTimeout(x,1e3):p(y)}x()})]})})}}return a.getInstance=function(){return a.instance==null&&(a.instance=new a),a.instance},a}();e.ProcessState=i})(o4);var B0={};Object.defineProperty(B0,"__esModule",{value:!0});B0.supported_fdi=B0.package_version=void 0;B0.package_version="20.1.6";B0.supported_fdi=["1.16","1.17","1.18","1.19","2.0","3.0","3.1","4.0","4.1"];var Mx={},r7={},n7={};Object.defineProperty(n7,"__esModule",{value:!0});var sTe=function(){function e(){var t=this;this.locked=new Map,this.addToLocked=function(r,n){var i=t.locked.get(r);i===void 0?n===void 0?t.locked.set(r,[]):t.locked.set(r,[n]):n!==void 0&&(i.unshift(n),t.locked.set(r,i))},this.isLocked=function(r){return t.locked.has(r)},this.lock=function(r){return new Promise(function(n,i){t.isLocked(r)?t.addToLocked(r,n):(t.addToLocked(r),n())})},this.unlock=function(r){var n=t.locked.get(r);if(n===void 0||n.length===0){t.locked.delete(r);return}var i=n.pop();t.locked.set(r,n),i!==void 0&&setTimeout(i,0)}}return e.getInstance=function(){return e.instance===void 0&&(e.instance=new e),e.instance},e}();function oTe(){return sTe.getInstance()}n7.default=oTe;var Ku=Ve&&Ve.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(c){try{l(n.next(c))}catch(d){a(d)}}function o(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):new r(function(d){d(c.value)}).then(s,o)}l((n=n.apply(e,t||[])).next())})},Xu=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Ew=Ve;Object.defineProperty(r7,"__esModule",{value:!0});var j1=n7,Sj="browser-tabs-lock-key",m_={key:function(e){return Ku(Ew,void 0,void 0,function(){return Xu(this,function(t){throw new Error("Unsupported")})})},getItem:function(e){return Ku(Ew,void 0,void 0,function(){return Xu(this,function(t){throw new Error("Unsupported")})})},clear:function(){return Ku(Ew,void 0,void 0,function(){return Xu(this,function(e){return[2,window.localStorage.clear()]})})},removeItem:function(e){return Ku(Ew,void 0,void 0,function(){return Xu(this,function(t){throw new Error("Unsupported")})})},setItem:function(e,t){return Ku(Ew,void 0,void 0,function(){return Xu(this,function(r){throw new Error("Unsupported")})})},keySync:function(e){return window.localStorage.key(e)},getItemSync:function(e){return window.localStorage.getItem(e)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(e){return window.localStorage.removeItem(e)},setItemSync:function(e,t){return window.localStorage.setItem(e,t)}};function Ej(e){return new Promise(function(t){return setTimeout(t,e)})}function H6(e){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",r="",n=0;n<e;n++){var i=Math.floor(Math.random()*t.length);r+=t[i]}return r}function lTe(){return Date.now().toString()+H6(15)}var cTe=function(){function e(t){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=lTe(),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=t,e.waiters===void 0&&(e.waiters=[])}return e.prototype.acquireLock=function(t,r){return r===void 0&&(r=5e3),Ku(this,void 0,void 0,function(){var n,i,a,s,o,l,c,d;return Xu(this,function(f){switch(f.label){case 0:n=Date.now()+H6(4),i=Date.now()+r,a=Sj+"-"+t,s=this.storageHandler===void 0?m_:this.storageHandler,f.label=1;case 1:return Date.now()<i?[4,Ej(30)]:[3,8];case 2:return f.sent(),o=s.getItemSync(a),o!==null?[3,5]:(l=this.id+"-"+t+"-"+n,[4,Ej(Math.floor(Math.random()*25))]);case 3:return f.sent(),s.setItemSync(a,JSON.stringify({id:this.id,iat:n,timeoutKey:l,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,Ej(30)];case 4:return f.sent(),c=s.getItemSync(a),c!==null&&(d=JSON.parse(c),d.id===this.id&&d.iat===n)?(this.acquiredIatSet.add(n),this.refreshLockWhileAcquired(a,n),[2,!0]):[3,7];case 5:return e.lockCorrector(this.storageHandler===void 0?m_:this.storageHandler),[4,this.waitForSomethingToChange(i)];case 6:f.sent(),f.label=7;case 7:return n=Date.now()+H6(4),[3,1];case 8:return[2,!1]}})})},e.prototype.refreshLockWhileAcquired=function(t,r){return Ku(this,void 0,void 0,function(){var n=this;return Xu(this,function(i){return setTimeout(function(){return Ku(n,void 0,void 0,function(){var a,s,o;return Xu(this,function(l){switch(l.label){case 0:return[4,j1.default().lock(r)];case 1:if(l.sent(),!this.acquiredIatSet.has(r))return j1.default().unlock(r),[2];if(a=this.storageHandler===void 0?m_:this.storageHandler,s=a.getItemSync(t),s!==null)o=JSON.parse(s),o.timeRefreshed=Date.now(),a.setItemSync(t,JSON.stringify(o)),j1.default().unlock(r);else return j1.default().unlock(r),[2];return this.refreshLockWhileAcquired(t,r),[2]}})})},1e3),[2]})})},e.prototype.waitForSomethingToChange=function(t){return Ku(this,void 0,void 0,function(){return Xu(this,function(r){switch(r.label){case 0:return[4,new Promise(function(n){var i=!1,a=Date.now(),s=50,o=!1;function l(){if(o||(window.removeEventListener("storage",l),e.removeFromWaiting(l),clearTimeout(c),o=!0),!i){i=!0;var d=s-(Date.now()-a);d>0?setTimeout(n,d):n(null)}}window.addEventListener("storage",l),e.addToWaiting(l);var c=setTimeout(l,Math.max(0,t-Date.now()))})];case 1:return r.sent(),[2]}})})},e.addToWaiting=function(t){this.removeFromWaiting(t),e.waiters!==void 0&&e.waiters.push(t)},e.removeFromWaiting=function(t){e.waiters!==void 0&&(e.waiters=e.waiters.filter(function(r){return r!==t}))},e.notifyWaiters=function(){if(e.waiters!==void 0){var t=e.waiters.slice();t.forEach(function(r){return r()})}},e.prototype.releaseLock=function(t){return Ku(this,void 0,void 0,function(){return Xu(this,function(r){switch(r.label){case 0:return[4,this.releaseLock__private__(t)];case 1:return[2,r.sent()]}})})},e.prototype.releaseLock__private__=function(t){return Ku(this,void 0,void 0,function(){var r,n,i,a;return Xu(this,function(s){switch(s.label){case 0:return r=this.storageHandler===void 0?m_:this.storageHandler,n=Sj+"-"+t,i=r.getItemSync(n),i===null?[2]:(a=JSON.parse(i),a.id!==this.id?[3,2]:[4,j1.default().lock(a.iat)]);case 1:s.sent(),this.acquiredIatSet.delete(a.iat),r.removeItemSync(n),j1.default().unlock(a.iat),e.notifyWaiters(),s.label=2;case 2:return[2]}})})},e.lockCorrector=function(t){for(var r=Date.now()-5e3,n=t,i=[],a=0;;){var s=n.keySync(a);if(s===null)break;i.push(s),a++}for(var o=!1,l=0;l<i.length;l++){var c=i[l];if(c.includes(Sj)){var d=n.getItemSync(c);if(d!==null){var f=JSON.parse(d);(f.timeRefreshed===void 0&&f.timeAcquired<r||f.timeRefreshed!==void 0&&f.timeRefreshed<r)&&(n.removeItemSync(c),o=!0)}}}o&&e.notifyWaiters()},e.waiters=void 0,e}();r7.default=cTe;Object.defineProperty(Mx,"__esModule",{value:!0});Mx.LockFactoryReference=void 0;var uTe=r7,dTe=function(e){return function(){return Promise.resolve(new uTe.default(e))}},Bie=function(){function e(t){this.lockFactory=t}return e.init=function(t,r){this.instance===void 0&&(this.instance=new e(t??dTe(r)))},e.getReferenceOrThrow=function(){if(e.instance===void 0)throw new Error("SuperTokensLockReference must be initialized before calling this method.");return e.instance},e}();Mx.LockFactoryReference=Bie;Mx.default=Bie;var iu={};Object.defineProperty(iu,"__esModule",{value:!0});iu.logDebugMessage=iu.disableLogging=iu.enableLogging=void 0;var fTe=B0,hTe="com.supertokens",i7=!1;function pTe(){i7=!0}iu.enableLogging=pTe;function mTe(){i7=!1}iu.disableLogging=mTe;function gTe(e){i7&&console.log("".concat(hTe,' {t: "').concat(new Date().toISOString(),'", message: "').concat(e,'", supertokens-website-ver: "').concat(fTe.package_version,'"}'))}iu.logDebugMessage=gTe;var yf={},l4={};Object.defineProperty(l4,"__esModule",{value:!0});l4.DateProvider=void 0;var KV=Su,xTe=function(){function e(){this.clockSkewInMillis=0,this.thresholdInSeconds=7}return e.init=function(){if(e.instance===void 0){e.instance=new e;var t=KV.default.getReferenceOrThrow().windowHandler.localStorage,r=t.getItemSync(e.CLOCK_SKEW_KEY),n=r!==null?parseInt(r,10):0;e.instance.setClientClockSkewInMillis(n)}},e.getReferenceOrThrow=function(){if(e.instance===void 0)throw new Error("DateProvider must be initialized before calling this method.");return e.instance},e.prototype.getThresholdInSeconds=function(){return this.thresholdInSeconds},e.prototype.setThresholdInSeconds=function(t){this.thresholdInSeconds=t},e.prototype.setClientClockSkewInMillis=function(t){this.clockSkewInMillis=Math.abs(t)>=this.thresholdInSeconds*1e3?t:0;var r=KV.default.getReferenceOrThrow().windowHandler.localStorage;r.setItemSync(e.CLOCK_SKEW_KEY,String(t))},e.prototype.getClientClockSkewInMillis=function(){return this.clockSkewInMillis},e.prototype.now=function(){return Date.now()+this.getClientClockSkewInMillis()},e.CLOCK_SKEW_KEY="__st_clockSkewInMillis",e}();l4.DateProvider=xTe;Object.defineProperty(yf,"__esModule",{value:!0});yf.DateProviderReference=void 0;var XV=l4,Uie=function(){function e(t){t!==void 0?this.dateProvider=t():(XV.DateProvider.init(),this.dateProvider=XV.DateProvider.getReferenceOrThrow())}return e.init=function(t){e.instance===void 0&&(e.instance=new e(t))},e.getReferenceOrThrow=function(){if(e.instance===void 0)throw new Error("SuperTokensDateProvider must be initialized before calling this method.");return e.instance},e}();yf.DateProviderReference=Uie;yf.default=Uie;(function(e){var t=Ve&&Ve.__assign||function(){return t=Object.assign||function(G){for(var q,ne=1,Se=arguments.length;ne<Se;ne++){q=arguments[ne];for(var re in q)Object.prototype.hasOwnProperty.call(q,re)&&(G[re]=q[re])}return G},t.apply(this,arguments)},r=Ve&&Ve.__awaiter||function(G,q,ne,Se){function re(ae){return ae instanceof ne?ae:new ne(function(ge){ge(ae)})}return new(ne||(ne=Promise))(function(ae,ge){function Ee(Pe){try{Ae(Se.next(Pe))}catch(ze){ge(ze)}}function V(Pe){try{Ae(Se.throw(Pe))}catch(ze){ge(ze)}}function Ae(Pe){Pe.done?ae(Pe.value):re(Pe.value).then(Ee,V)}Ae((Se=Se.apply(G,q||[])).next())})},n=Ve&&Ve.__generator||function(G,q){var ne={label:0,sent:function(){if(ae[0]&1)throw ae[1];return ae[1]},trys:[],ops:[]},Se,re,ae,ge;return ge={next:Ee(0),throw:Ee(1),return:Ee(2)},typeof Symbol=="function"&&(ge[Symbol.iterator]=function(){return this}),ge;function Ee(Ae){return function(Pe){return V([Ae,Pe])}}function V(Ae){if(Se)throw new TypeError("Generator is already executing.");for(;ne;)try{if(Se=1,re&&(ae=Ae[0]&2?re.return:Ae[0]?re.throw||((ae=re.return)&&ae.call(re),0):re.next)&&!(ae=ae.call(re,Ae[1])).done)return ae;switch(re=0,ae&&(Ae=[Ae[0]&2,ae.value]),Ae[0]){case 0:case 1:ae=Ae;break;case 4:return ne.label++,{value:Ae[1],done:!1};case 5:ne.label++,re=Ae[1],Ae=[0];continue;case 7:Ae=ne.ops.pop(),ne.trys.pop();continue;default:if(ae=ne.trys,!(ae=ae.length>0&&ae[ae.length-1])&&(Ae[0]===6||Ae[0]===2)){ne=0;continue}if(Ae[0]===3&&(!ae||Ae[1]>ae[0]&&Ae[1]<ae[3])){ne.label=Ae[1];break}if(Ae[0]===6&&ne.label<ae[1]){ne.label=ae[1],ae=Ae;break}if(ae&&ne.label<ae[2]){ne.label=ae[2],ne.ops.push(Ae);break}ae[2]&&ne.ops.pop(),ne.trys.pop();continue}Ae=q.call(G,ne)}catch(Pe){Ae=[6,Pe],re=0}finally{Se=ae=0}if(Ae[0]&5)throw Ae[1];return{value:Ae[0]?Ae[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.updateClockSkewUsingFrontToken=e.fireSessionUpdateEventsIfNecessary=e.setFrontToken=e.getFrontToken=e.setAntiCSRF=e.saveLastAccessTokenUpdate=e.getTokenForHeaderAuth=e.setToken=e.getStorageNameForToken=e.getLocalSessionState=e.onInvalidClaimResponse=e.onTokenUpdate=e.onUnauthorisedResponse=e.FrontToken=e.AntiCsrfToken=void 0;var i=o4,a=B0,s=Dx,o=Su,l=Mx,c=iu,d=yf,f=function(){function G(){}return G.getToken=function(q){return r(this,void 0,void 0,function(){var ne;return n(this,function(Se){switch(Se.label){case 0:return(0,c.logDebugMessage)("AntiCsrfToken.getToken: called"),q===void 0?(G.tokenInfo=void 0,(0,c.logDebugMessage)("AntiCsrfToken.getToken: returning undefined"),[2,void 0]):G.tokenInfo!==void 0?[3,2]:[4,Q()];case 1:return ne=Se.sent(),ne===null?((0,c.logDebugMessage)("AntiCsrfToken.getToken: returning undefined"),[2,void 0]):(G.tokenInfo={antiCsrf:ne,associatedAccessTokenUpdate:q},[3,4]);case 2:return G.tokenInfo.associatedAccessTokenUpdate===q?[3,4]:(G.tokenInfo=void 0,[4,G.getToken(q)]);case 3:return[2,Se.sent()];case 4:return(0,c.logDebugMessage)("AntiCsrfToken.getToken: returning: "+G.tokenInfo.antiCsrf),[2,G.tokenInfo.antiCsrf]}})})},G.removeToken=function(){return r(this,void 0,void 0,function(){return n(this,function(q){switch(q.label){case 0:return(0,c.logDebugMessage)("AntiCsrfToken.removeToken: called"),G.tokenInfo=void 0,[4,te(void 0)];case 1:return q.sent(),[2]}})})},G.setItem=function(q,ne){return r(this,void 0,void 0,function(){return n(this,function(Se){switch(Se.label){case 0:return q===void 0?(G.tokenInfo=void 0,[2]):((0,c.logDebugMessage)("AntiCsrfToken.setItem: called"),[4,te(ne)]);case 1:return Se.sent(),G.tokenInfo={antiCsrf:ne,associatedAccessTokenUpdate:q},[2]}})})},G}();e.AntiCsrfToken=f;var p=function(){function G(){}return G.getTokenInfo=function(){return r(this,void 0,void 0,function(){var q,ne;return n(this,function(Se){switch(Se.label){case 0:return(0,c.logDebugMessage)("FrontToken.getTokenInfo: called"),[4,pe()];case 1:return q=Se.sent(),q!==null?[3,5]:[4,P(!1)];case 2:return Se.sent().status!=="EXISTS"?[3,4]:[4,new Promise(function(re){G.waiters.push(re)})];case 3:return Se.sent(),[2,G.getTokenInfo()];case 4:return[2,void 0];case 5:return ne=Y(q),(0,c.logDebugMessage)("FrontToken.getTokenInfo: returning ate: "+ne.ate),(0,c.logDebugMessage)("FrontToken.getTokenInfo: returning uid: "+ne.uid),(0,c.logDebugMessage)("FrontToken.getTokenInfo: returning up: "+ne.up),[2,ne]}})})},G.removeToken=function(){return r(this,void 0,void 0,function(){return n(this,function(q){switch(q.label){case 0:return(0,c.logDebugMessage)("FrontToken.removeToken: called"),[4,_e(void 0)];case 1:return q.sent(),[4,D("access","")];case 2:return q.sent(),[4,D("refresh","")];case 3:return q.sent(),[4,f.removeToken()];case 4:return q.sent(),G.waiters.forEach(function(ne){return ne(void 0)}),G.waiters=[],[2]}})})},G.setItem=function(q){return r(this,void 0,void 0,function(){return n(this,function(ne){switch(ne.label){case 0:return[4,W()];case 1:return ne.sent(),q==="remove"?[2,G.removeToken()]:((0,c.logDebugMessage)("FrontToken.setItem: called"),[4,_e(q)]);case 2:return ne.sent(),G.waiters.forEach(function(Se){return Se(void 0)}),G.waiters=[],[2]}})})},G.doesTokenExists=function(){return r(this,void 0,void 0,function(){var q;return n(this,function(ne){switch(ne.label){case 0:return[4,J()];case 1:return q=ne.sent(),[2,q!==null]}})})},G.waiters=[],G}();e.FrontToken=p;var m=function(){function G(){}G.init=function(ne,Se){(0,c.logDebugMessage)("init: called"),(0,c.logDebugMessage)("init: Input apiBasePath: "+ne.apiBasePath),(0,c.logDebugMessage)("init: Input apiDomain: "+ne.apiDomain),(0,c.logDebugMessage)("init: Input autoAddCredentials: "+ne.autoAddCredentials),(0,c.logDebugMessage)("init: Input sessionTokenBackendDomain: "+ne.sessionTokenBackendDomain),(0,c.logDebugMessage)("init: Input isInIframe: "+ne.isInIframe),(0,c.logDebugMessage)("init: Input sessionExpiredStatusCode: "+ne.sessionExpiredStatusCode),(0,c.logDebugMessage)("init: Input sessionTokenFrontendDomain: "+ne.sessionTokenFrontendDomain),(0,c.logDebugMessage)("init: Input tokenTransferMethod: "+ne.tokenTransferMethod);var re=o.default.getReferenceOrThrow().windowHandler.getWindowUnsafe();G.env=re===void 0||re.fetch===void 0?Ve:re,G.refreshTokenUrl=ne.apiDomain+ne.apiBasePath+"/session/refresh",G.signOutUrl=ne.apiDomain+ne.apiBasePath+"/signout",G.rid="session",G.config=ne,G.env.__supertokensOriginalFetch===void 0&&((0,c.logDebugMessage)("init: __supertokensOriginalFetch is undefined"),G.env.__supertokensOriginalFetch=G.env.fetch.bind(G.env),G.env.__supertokensSessionRecipe=Se,G.env.fetch=G.env.__supertokensSessionRecipe.addFetchInterceptorsAndReturnModifiedFetch({originalFetch:G.env.__supertokensOriginalFetch,userContext:{}}),G.env.__supertokensSessionRecipe.addXMLHttpRequestInterceptor({userContext:{}})),G.recipeImpl=G.env.__supertokensSessionRecipe,G.initCalled=!0};var q;return q=G,G.initCalled=!1,G.doRequest=function(ne,Se,re){return r(void 0,void 0,void 0,function(){var ae,ge,Ee,V,Ae,Pe,ze,De,$e,et,ut,kt,ht,jr,er;return n(q,function(ct){switch(ct.label){case 0:if(!G.initCalled)throw Error("init function not called");(0,c.logDebugMessage)("doRequest: start of fetch interception"),ae=!1;try{ge=void 0,typeof re=="string"?ge=re:typeof re=="object"&&(typeof re.url=="string"?ge=re.url:typeof re.href=="string"&&(ge=re.href)),ae=!G.recipeImpl.shouldDoInterceptionBasedOnUrl(ge,G.config.apiDomain,G.config.sessionTokenBackendDomain)}catch(qt){if(qt.message==="Please provide a valid domain name")(0,c.logDebugMessage)("doRequest: Trying shouldDoInterceptionBasedOnUrl with location.origin"),ae=!G.recipeImpl.shouldDoInterceptionBasedOnUrl(o.default.getReferenceOrThrow().windowHandler.location.getOrigin(),G.config.apiDomain,G.config.sessionTokenBackendDomain);else throw qt}return(0,c.logDebugMessage)("doRequest: Value of doNotDoInterception: "+ae),ae?((0,c.logDebugMessage)("doRequest: Returning without interception"),[4,ne(Se)]):[3,2];case 1:return[2,ct.sent()];case 2:return Ee=new Headers(Se!==void 0&&Se.headers!==void 0?Se.headers:re.headers),Ee.has("Authorization")?[4,B("access")]:[3,5];case 3:return V=ct.sent(),[4,B("refresh")];case 4:Ae=ct.sent(),V!==void 0&&Ae!==void 0&&Ee.get("Authorization")==="Bearer ".concat(V)&&((0,c.logDebugMessage)("doRequest: Removing Authorization from user provided headers because it contains our access token"),Ee.delete("Authorization")),ct.label=5;case 5:(0,c.logDebugMessage)("doRequest: Interception started"),i.ProcessState.getInstance().addState(i.PROCESS_STATE.CALLING_INTERCEPTION_REQUEST),Pe=0,ze=void 0,ct.label=6;case 6:return[4,P(!0)];case 7:return De=ct.sent(),$e=new Headers(Ee),et=t(t({},Se),{headers:$e}),De.status!=="EXISTS"?[3,9]:[4,f.getToken(De.lastAccessTokenUpdate)];case 8:ut=ct.sent(),ut!==void 0&&((0,c.logDebugMessage)("doRequest: Adding anti-csrf token to request"),$e.set("anti-csrf",ut)),ct.label=9;case 9:return G.config.autoAddCredentials&&((0,c.logDebugMessage)("doRequest: Adding credentials include"),et===void 0?et={credentials:"include"}:et.credentials===void 0&&(et=t(t({},et),{credentials:"include"}))),$e.has("rid")?(0,c.logDebugMessage)("doRequest: rid header was already there in request"):((0,c.logDebugMessage)("doRequest: Adding rid header: anti-csrf"),$e.set("rid","anti-csrf")),kt=G.config.tokenTransferMethod,(0,c.logDebugMessage)("doRequest: Adding st-auth-mode header: "+kt),$e.set("st-auth-mode",kt),[4,z($e)];case 10:return ct.sent(),(0,c.logDebugMessage)("doRequest: Making user's http call"),[4,ne(et)];case 11:return ht=ct.sent(),(0,c.logDebugMessage)("doRequest: User's http call ended"),[4,ie(ht)];case 12:if(ct.sent(),ee(De.status==="EXISTS",ht.status,ht.headers.get("front-token")),ht.status!==G.config.sessionExpiredStatusCode)return[3,14];if((0,c.logDebugMessage)("doRequest: Status code is: "+ht.status),Pe>=G.config.maxRetryAttemptsForSessionRefresh)throw(0,c.logDebugMessage)("doRequest: Maximum session refresh attempts reached. sessionRefreshAttempts: ".concat(Pe,", maxRetryAttemptsForSessionRefresh: ").concat(G.config.maxRetryAttemptsForSessionRefresh)),jr="Received a 401 response from ".concat(re,". Attempted to refresh the session and retry the request with the updated session tokens ").concat(G.config.maxRetryAttemptsForSessionRefresh," times, but each attempt resulted in a 401 error. The maximum session refresh limit has been reached. Please investigate your API. To increase the session refresh attempts, update maxRetryAttemptsForSessionRefresh in the config."),console.error(jr),new Error(jr);return[4,C(De)];case 13:if(er=ct.sent(),Pe++,(0,c.logDebugMessage)("doRequest: sessionRefreshAttempts: "+Pe),er.result!=="RETRY"){if((0,c.logDebugMessage)("doRequest: Not retrying original request"),er.error!==void 0)if(er.error instanceof Response)ze=er.error;else throw er.error;else ze=ht;return[3,18]}return(0,c.logDebugMessage)("doRequest: Retrying original request"),[3,17];case 14:return ht.status!==G.config.invalidClaimStatusCode?[3,16]:[4,j(ht)];case 15:ct.sent(),ct.label=16;case 16:return[2,ht];case 17:return[3,6];case 18:return[2,ze]}})})},G.attemptRefreshingSession=function(){return r(void 0,void 0,void 0,function(){var ne,Se;return n(q,function(re){switch(re.label){case 0:if(!G.initCalled)throw Error("init function not called");return[4,P(!1)];case 1:return ne=re.sent(),[4,C(ne)];case 2:if(Se=re.sent(),Se.result==="API_ERROR")throw Se.error;return[2,Se.result==="RETRY"]}})})},G}();e.default=m;var x="st-last-access-token-update",y="st-refresh-token",b="st-access-token",S="sAntiCsrf",_="sFrontToken";function C(G){return r(this,void 0,void 0,function(){var q,ne,Se,re,ae,ge,Ee,V,Ae,Pe,ze,De,$e,et,ut;return n(this,function(kt){switch(kt.label){case 0:return[4,l.default.getReferenceOrThrow().lockFactory()];case 1:q=kt.sent(),kt.label=2;case 2:return(0,c.logDebugMessage)("onUnauthorisedResponse: trying to acquire lock"),[4,q.acquireLock("REFRESH_TOKEN_USE",1e3)];case 3:if(!kt.sent())return[3,21];(0,c.logDebugMessage)("onUnauthorisedResponse: lock acquired"),kt.label=4;case 4:return kt.trys.push([4,17,19,21]),[4,P(!1)];case 5:return ne=kt.sent(),ne.status==="NOT_EXISTS"?((0,c.logDebugMessage)("onUnauthorisedResponse: Not refreshing because local session state is NOT_EXISTS"),m.config.onHandleEvent({action:"UNAUTHORISED",sessionExpiredOrRevoked:!1,userContext:{}}),[2,{result:"SESSION_EXPIRED"}]):(Se=ne.status==="EXISTS",re=G.status==="EXISTS",ae=ne.status!==G.status,ge="lastAccessTokenUpdate"in ne&&"lastAccessTokenUpdate"in G&&ne.lastAccessTokenUpdate!==G.lastAccessTokenUpdate,ae&&Se?((0,c.logDebugMessage)("onUnauthorisedResponse: Retrying early because session status has changed and postLockLSS.status is EXISTS"),[2,{result:"RETRY"}]):Se&&re&&ge?((0,c.logDebugMessage)("onUnauthorisedResponse: Retrying early because pre and post lastAccessTokenUpdate don't match"),[2,{result:"RETRY"}]):(Ee=new Headers,G.status!=="EXISTS"?[3,7]:[4,f.getToken(G.lastAccessTokenUpdate)]));case 6:V=kt.sent(),V!==void 0&&((0,c.logDebugMessage)("onUnauthorisedResponse: Adding anti-csrf token to refresh API call"),Ee.set("anti-csrf",V)),kt.label=7;case 7:return(0,c.logDebugMessage)("onUnauthorisedResponse: Adding rid and fdi-versions to refresh call header"),Ee.set("rid",m.rid),Ee.set("fdi-version",a.supported_fdi.join(",")),Ae=m.config.tokenTransferMethod,(0,c.logDebugMessage)("onUnauthorisedResponse: Adding st-auth-mode header: "+Ae),Ee.set("st-auth-mode",Ae),[4,z(Ee,!0)];case 8:return kt.sent(),(0,c.logDebugMessage)("onUnauthorisedResponse: Calling refresh pre API hook"),[4,m.config.preAPIHook({action:"REFRESH_SESSION",requestInit:{method:"post",credentials:"include",headers:Ee},url:m.refreshTokenUrl,userContext:{}})];case 9:return Pe=kt.sent(),(0,c.logDebugMessage)("onUnauthorisedResponse: Making refresh call"),[4,m.env.__supertokensOriginalFetch(Pe.url,Pe.requestInit)];case 10:return ze=kt.sent(),(0,c.logDebugMessage)("onUnauthorisedResponse: Refresh call ended"),[4,ie(ze)];case 11:return kt.sent(),(0,c.logDebugMessage)("onUnauthorisedResponse: Refresh status code is: "+ze.status),De=ze.status===m.config.sessionExpiredStatusCode,ze.headers.get("front-token")!==null?[3,14]:De?[4,p.setItem("remove")]:[3,13];case 12:return kt.sent(),[3,14];case 13:if(ze.status===200)throw $e="The 'front-token' header is missing from a successful refresh-session response. The most likely causes are proxy settings (e.g.: 'front-token' missing from 'access-control-expose-headers' or a proxy stripping this header). Please investigate your API.",console.error($e),new Error($e);kt.label=14;case 14:if(ee(G.status==="EXISTS",ze.status,De&&ze.headers.get("front-token")===null?"remove":ze.headers.get("front-token")),ze.status>=300)throw ze;return[4,m.config.postAPIHook({action:"REFRESH_SESSION",fetchResponse:ze.clone(),requestInit:Pe.requestInit,url:Pe.url,userContext:{}})];case 15:return kt.sent(),[4,P(!1)];case 16:return kt.sent().status==="NOT_EXISTS"?((0,c.logDebugMessage)("onUnauthorisedResponse: local session doesn't exist, so returning session expired"),[2,{result:"SESSION_EXPIRED"}]):(m.config.onHandleEvent({action:"REFRESH_SESSION",userContext:{}}),(0,c.logDebugMessage)("onUnauthorisedResponse: Sending RETRY signal"),[2,{result:"RETRY"}]);case 17:return et=kt.sent(),[4,P(!1)];case 18:return kt.sent().status==="NOT_EXISTS"?((0,c.logDebugMessage)("onUnauthorisedResponse: local session doesn't exist, so returning session expired"),[2,{result:"SESSION_EXPIRED",error:et}]):((0,c.logDebugMessage)("onUnauthorisedResponse: sending API_ERROR"),[2,{result:"API_ERROR",error:et}]);case 19:return[4,q.releaseLock("REFRESH_TOKEN_USE")];case 20:return kt.sent(),(0,c.logDebugMessage)("onUnauthorisedResponse: Released lock"),[7];case 21:return[4,P(!1)];case 22:return ut=kt.sent(),ut.status==="NOT_EXISTS"?((0,c.logDebugMessage)("onUnauthorisedResponse: lock acquired failed and local session doesn't exist, so sending SESSION_EXPIRED"),[2,{result:"SESSION_EXPIRED"}]):ut.status!==G.status||ut.status==="EXISTS"&&G.status==="EXISTS"&&ut.lastAccessTokenUpdate!==G.lastAccessTokenUpdate?((0,c.logDebugMessage)("onUnauthorisedResponse: lock acquired failed and retrying early because pre and post lastAccessTokenUpdate don't match"),[2,{result:"RETRY"}]):[3,2];case 23:return[2]}})})}e.onUnauthorisedResponse=C;function A(){(0,c.logDebugMessage)("onTokenUpdate: firing ACCESS_TOKEN_PAYLOAD_UPDATED event"),m.config.onHandleEvent({action:"ACCESS_TOKEN_PAYLOAD_UPDATED",userContext:{}})}e.onTokenUpdate=A;function j(G){return r(this,void 0,void 0,function(){var q;return n(this,function(ne){switch(ne.label){case 0:return ne.trys.push([0,2,,3]),[4,m.recipeImpl.getInvalidClaimsFromResponse({response:G,userContext:{}})];case 1:return q=ne.sent(),q&&m.config.onHandleEvent({action:"API_INVALID_CLAIM",claimValidationErrors:q,userContext:{}}),[3,3];case 2:return ne.sent(),[3,3];case 3:return[2]}})})}e.onInvalidClaimResponse=j;function P(G){return r(this,void 0,void 0,function(){var q,ne,Se,re,ae,ge,Ee;return n(this,function(V){switch(V.label){case 0:return(0,c.logDebugMessage)("getLocalSessionState: called"),[4,H(x)];case 1:return q=V.sent(),[4,p.doesTokenExists()];case 2:return ne=V.sent(),ne&&q!==void 0?((0,c.logDebugMessage)("getLocalSessionState: returning EXISTS since both frontToken and lastAccessTokenUpdate exists"),[2,{status:"EXISTS",lastAccessTokenUpdate:q}]):[3,3];case 3:return q?((0,c.logDebugMessage)("getLocalSessionState: returning NOT_EXISTS since frontToken was cleared but lastAccessTokenUpdate exists"),[2,{status:"NOT_EXISTS"}]):[3,4];case 4:return Se={status:"MAY_EXIST"},G?((0,c.logDebugMessage)("getLocalSessionState: trying to refresh"),[4,C(Se)]):[3,8];case 5:return re=V.sent(),re.result!=="RETRY"?((0,c.logDebugMessage)("getLocalSessionState: return NOT_EXISTS in case error from backend"+re.result),[2,{status:"NOT_EXISTS"}]):[4,H(x)];case 6:return ae=V.sent(),[4,p.doesTokenExists()];case 7:if(ge=V.sent(),!ge||ae===void 0)throw Ee="Failed to retrieve local session state from cookies after a successful session refresh. This indicates a configuration error or that the browser is preventing cookie writes.",console.error(Ee),new Error(Ee);return(0,c.logDebugMessage)("getLocalSessionState: returning EXISTS since both frontToken and lastAccessTokenUpdate exists post refresh"),[2,{status:"EXISTS",lastAccessTokenUpdate:ae}];case 8:return(0,c.logDebugMessage)("getLocalSessionState: returning: "+Se.status),[2,Se]}})})}e.getLocalSessionState=P;function O(G){switch(G){case"access":return b;case"refresh":return y}}e.getStorageNameForToken=O;function D(G,q){var ne=O(G);return q!==""?((0,c.logDebugMessage)("setToken: saved ".concat(G," token into cookies")),L(ne,q,Date.now()+31536e5)):((0,c.logDebugMessage)("setToken: cleared ".concat(G," token from cookies")),L(ne,q,0))}e.setToken=D;function L(G,q,ne){var Se="Fri, 31 Dec 9999 23:59:59 GMT";ne!==Number.MAX_SAFE_INTEGER&&(Se=new Date(ne).toUTCString());var re=m.config.sessionTokenFrontendDomain;return re==="localhost"||re===o.default.getReferenceOrThrow().windowHandler.location.getHostName()?s.default.getReferenceOrThrow().cookieHandler.setCookie("".concat(G,"=").concat(q,";expires=").concat(Se,";path=/;samesite=").concat(m.config.isInIframe?"none;secure":"lax")):s.default.getReferenceOrThrow().cookieHandler.setCookie("".concat(G,"=").concat(q,";expires=").concat(Se,";domain=").concat(re,";path=/;samesite=").concat(m.config.isInIframe?"none;secure":"lax"))}function B(G){return r(this,void 0,void 0,function(){var q;return n(this,function(ne){return q=O(G),[2,H(q)]})})}e.getTokenForHeaderAuth=B;function H(G){return r(this,void 0,void 0,function(){var q,ne,Se,re;return n(this,function(ae){switch(ae.label){case 0:return ne="; ",[4,s.default.getReferenceOrThrow().cookieHandler.getCookie()];case 1:return q=ne+ae.sent(),Se=q.split("; "+G+"="),Se.length>=2&&(re=Se.pop(),re!==void 0)?[2,re.split(";").shift()]:[2,void 0]}})})}function z(G,q){return q===void 0&&(q=!1),r(this,void 0,void 0,function(){var ne,Se;return n(this,function(re){switch(re.label){case 0:return(0,c.logDebugMessage)("setTokenHeaders: adding existing tokens as header"),[4,B("access")];case 1:return ne=re.sent(),[4,B("refresh")];case 2:return Se=re.sent(),(q||ne!==void 0)&&Se!==void 0?G.has("Authorization")?(0,c.logDebugMessage)("setAuthorizationHeaderIfRequired: Authorization header defined by the user, not adding"):((0,c.logDebugMessage)("setAuthorizationHeaderIfRequired: added authorization header"),G.set("Authorization","Bearer ".concat(q?Se:ne))):(0,c.logDebugMessage)("setAuthorizationHeaderIfRequired: token for header based auth not found"),[2]}})})}function ie(G){return r(this,void 0,void 0,function(){var q,ne,Se,re,ae;return n(this,function(ge){switch(ge.label){case 0:return(0,c.logDebugMessage)("saveTokensFromHeaders: Saving updated tokens from the response headers"),q=G.headers.get("st-refresh-token"),q===null?[3,2]:((0,c.logDebugMessage)("saveTokensFromHeaders: saving new refresh token"),[4,D("refresh",q)]);case 1:ge.sent(),ge.label=2;case 2:return ne=G.headers.get("st-access-token"),ne===null?[3,4]:((0,c.logDebugMessage)("saveTokensFromHeaders: saving new access token"),[4,D("access",ne)]);case 3:ge.sent(),ge.label=4;case 4:return Se=G.headers.get("front-token"),Se===null?[3,6]:((0,c.logDebugMessage)("saveTokensFromHeaders: Setting sFrontToken: "+Se),[4,p.setItem(Se)]);case 5:ge.sent(),(0,e.updateClockSkewUsingFrontToken)({frontToken:Se,responseHeaders:G.headers}),ge.label=6;case 6:return re=G.headers.get("anti-csrf"),re===null?[3,9]:[4,P(!1)];case 7:return ae=ge.sent(),ae.status!=="EXISTS"?[3,9]:((0,c.logDebugMessage)("saveTokensFromHeaders: Setting anti-csrf token"),[4,f.setItem(ae.lastAccessTokenUpdate,re)]);case 8:ge.sent(),ge.label=9;case 9:return[2]}})})}var X=void 0;function W(){return r(this,void 0,void 0,function(){var G;return n(this,function(q){switch(q.label){case 0:return(0,c.logDebugMessage)("saveLastAccessTokenUpdate: called"),G=Date.now().toString(),(0,c.logDebugMessage)("saveLastAccessTokenUpdate: setting "+G),[4,L(x,G,Number.MAX_SAFE_INTEGER)];case 1:return q.sent(),X!==void 0?[3,3]:[4,H(x)];case 2:X=q.sent()===G,q.label=3;case 3:return X===!1&&console.warn("Saving to cookies was not successful, this indicates a configuration error or the browser preventing us from writing the cookies."),[4,L("sIRTFrontend","",0)];case 4:return q.sent(),[2]}})})}e.saveLastAccessTokenUpdate=W;function Q(){return r(this,void 0,void 0,function(){function G(){return r(this,void 0,void 0,function(){var ne,Se,re,ae,ge;return n(this,function(Ee){switch(Ee.label){case 0:return Se="; ",[4,s.default.getReferenceOrThrow().cookieHandler.getCookie()];case 1:return ne=Se+Ee.sent(),re=ne.split("; "+S+"="),re.length>=2&&(ae=re.pop(),ae!==void 0)?(ge=ae.split(";").shift(),ge===void 0?[2,null]:[2,ge]):[2,null]}})})}var q;return n(this,function(ne){switch(ne.label){case 0:return(0,c.logDebugMessage)("getAntiCSRFToken: called"),[4,P(!0)];case 1:return ne.sent().status!=="EXISTS"?((0,c.logDebugMessage)("getAntiCSRFToken: Returning because local session state != EXISTS"),[2,null]):[4,G()];case 2:return q=ne.sent(),(0,c.logDebugMessage)("getAntiCSRFToken: returning: "+q),[2,q]}})})}function te(G){return r(this,void 0,void 0,function(){return n(this,function(q){switch(q.label){case 0:return(0,c.logDebugMessage)("setAntiCSRF: called: "+G),G===void 0?[3,2]:[4,L(S,G,Number.MAX_SAFE_INTEGER)];case 1:return q.sent(),[3,4];case 2:return[4,L(S,"",0)];case 3:q.sent(),q.label=4;case 4:return[2]}})})}e.setAntiCSRF=te;function J(){return r(this,void 0,void 0,function(){var G;return n(this,function(q){switch(q.label){case 0:return(0,c.logDebugMessage)("getFrontTokenFromCookie: called"),[4,H(_)];case 1:return G=q.sent(),[2,G===void 0?null:G]}})})}function Y(G){return JSON.parse(decodeURIComponent(escape(atob(G))))}function pe(){return r(this,void 0,void 0,function(){var G;return n(this,function(q){switch(q.label){case 0:return(0,c.logDebugMessage)("getFrontToken: called"),[4,P(!0)];case 1:return q.sent().status!=="EXISTS"?((0,c.logDebugMessage)("getFrontToken: Returning because sIRTFrontend != EXISTS"),[2,null]):[4,J()];case 2:return G=q.sent(),(0,c.logDebugMessage)("getFrontToken: returning: "+G),[2,G]}})})}e.getFrontToken=pe;function _e(G){return r(this,void 0,void 0,function(){var q,ne,Se;return n(this,function(re){switch(re.label){case 0:return(0,c.logDebugMessage)("setFrontToken: called"),[4,J()];case 1:return q=re.sent(),q!==null&&G!==void 0&&(ne=Y(q).up,Se=Y(G).up,JSON.stringify(ne)!==JSON.stringify(Se)&&A()),G!==void 0?[3,3]:[4,L(_,"",0)];case 2:return re.sent(),[3,5];case 3:return[4,L(_,G,Number.MAX_SAFE_INTEGER)];case 4:re.sent(),re.label=5;case 5:return[2]}})})}e.setFrontToken=_e;function ee(G,q,ne){if(ne==null){(0,c.logDebugMessage)("fireSessionUpdateEventsIfNecessary returning early because the front token was not updated");return}var Se=ne!=="remove";(0,c.logDebugMessage)("fireSessionUpdateEventsIfNecessary wasLoggedIn: ".concat(G," frontTokenExistsAfter: ").concat(Se," status: ").concat(q)),G?Se||(q===m.config.sessionExpiredStatusCode?((0,c.logDebugMessage)("onUnauthorisedResponse: firing UNAUTHORISED event"),m.config.onHandleEvent({action:"UNAUTHORISED",sessionExpiredOrRevoked:!0,userContext:{}})):((0,c.logDebugMessage)("onUnauthorisedResponse: firing SIGN_OUT event"),m.config.onHandleEvent({action:"SIGN_OUT",userContext:{}}))):Se&&((0,c.logDebugMessage)("onUnauthorisedResponse: firing SESSION_CREATED event"),m.config.onHandleEvent({action:"SESSION_CREATED",userContext:{}}))}e.fireSessionUpdateEventsIfNecessary=ee;var de=function(G){var q=G.frontToken,ne=G.responseHeaders;if((0,c.logDebugMessage)("updateClockSkewUsingFrontToken: frontToken: "+q),q==null||q==="remove"){(0,c.logDebugMessage)("updateClockSkewUsingFrontToken: the access token payload wasn't updated or is being removed, skipping clock skew update");return}var Se=Y(q),re=m.recipeImpl.calculateClockSkewInMillis({accessTokenPayload:Se.up,responseHeaders:ne});d.default.getReferenceOrThrow().dateProvider.setClientClockSkewInMillis(re),(0,c.logDebugMessage)("updateClockSkewUsingFrontToken: Client clock synchronized successfully")};e.updateClockSkewUsingFrontToken=de})(cb);var Fx={};Object.defineProperty(Fx,"__esModule",{value:!0});Fx.SessionClaimValidatorStore=void 0;var $ie=function(){function e(){}return e.claimValidatorsAddedByOtherRecipes=[],e.addClaimValidatorFromOtherRecipe=function(t){e.claimValidatorsAddedByOtherRecipes.push(t)},e.getClaimValidatorsAddedByOtherRecipes=function(){return e.claimValidatorsAddedByOtherRecipes},e}();Fx.SessionClaimValidatorStore=$ie;Fx.default=$ie;Object.defineProperty(s4,"__esModule",{value:!0});s4.getGlobalClaimValidators=void 0;var vTe=fo,yTe=cb,bTe=Fx;function wTe(e,t){var r=(0,vTe.getNormalisedUserContext)(t),n=bTe.default.getClaimValidatorsAddedByOtherRecipes(),i=yTe.default.recipeImpl.getGlobalClaimValidators({claimValidatorsAddedByOtherRecipes:n,userContext:r}),a=e!==void 0?e(i,r):i;return a}s4.getGlobalClaimValidators=wTe;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(s4)})(jie);var STe={},m0=Ve&&Ve.__assign||function(){return m0=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},m0.apply(this,arguments)};Object.defineProperty($r,"__esModule",{value:!0});$r.getPublicConfig=$r.getPublicPlugin=$r.applyPlugins=$r.normaliseUser=$r.normaliseUserResponse=$r.getGlobalClaimValidators=$r.getHashFromLocation=$r.getNormalisedUserContext=$r.checkForSSRErrorAndAppendIfNeeded=$r.getAllQueryParams=$r.getQueryParams=$r.isTest=$r.normaliseInputAppInfoOrThrowError=$r.appendQueryParamsToURL=void 0;var a7=n4,zie=py,ETe=t4,VA=ob,CTe=a4,kTe=jie;function _Te(e,t){if(t===void 0)return e;try{var r=new URL(e);return Object.entries(t).forEach(function(a){var s=a[0],o=a[1];r.searchParams.set(s,o)}),r.href}catch{var n=e.startsWith("/")?"http:localhost":"http://localhost/",i=new URL("".concat(n).concat(e));return Object.entries(t).forEach(function(s){var o=s[0],l=s[1];i.searchParams.set(o,l)}),"".concat(i.pathname).concat(i.search)}}$r.appendQueryParamsToURL=_Te;function NTe(e,t){return t!==void 0?new VA.default(t):new VA.default(e)}function ATe(e){if(e===void 0)throw new Error("Please provide the appInfo object when calling supertokens.init");if(e.apiDomain===void 0)throw new Error("Please provide your apiDomain inside the appInfo object when calling supertokens.init");if(e.appName===void 0)throw new Error("Please provide your appName inside the appInfo object when calling supertokens.init");var t=new VA.default("");return e.apiGatewayPath!==void 0&&(t=new VA.default(e.apiGatewayPath)),{appName:e.appName,apiDomain:new ETe.default(e.apiDomain),apiBasePath:t.appendPath(NTe(zie.DEFAULT_API_BASE_PATH,e.apiBasePath))}}$r.normaliseInputAppInfoOrThrowError=ATe;function TTe(){try{return STe.TEST_MODE==="testing"}catch{return!1}}$r.isTest=TTe;function ITe(e){var t=new URLSearchParams(a7.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getSearch()),r=t.get(e);if(r!==null)return r}$r.getQueryParams=ITe;function OTe(){return new URLSearchParams(a7.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getSearch())}$r.getAllQueryParams=OTe;function PTe(e){return typeof window>"u"&&(e=e+zie.SSR_ERROR),e}$r.checkForSSRErrorAndAppendIfNeeded=PTe;function RTe(e){return e===void 0?{}:e}$r.getNormalisedUserContext=RTe;function jTe(){return a7.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHash().substring(1)}$r.getHashFromLocation=jTe;function DTe(e){var t=e.overrideGlobalClaimValidators,r=e.userContext;return(0,kTe.getGlobalClaimValidators)(t,r)}$r.getGlobalClaimValidators=DTe;function MTe(e,t){return"createdNewRecipeUser"in t?t:{createdNewRecipeUser:t.createdNewUser,user:Hie(e,t.user)}}$r.normaliseUserResponse=MTe;function Hie(e,t){if("loginMethods"in t)return t;var r=t.email!==void 0?[t.email]:[],n=t.phoneNumber!==void 0?[t.phoneNumber]:[],i=t.thirdParty!==void 0?[t.thirdParty]:[],a=t.webauthn!==void 0?t.webauthn:{credentialIds:[]};return{id:t.id,emails:r,phoneNumbers:n,thirdParty:i,webauthn:a,isPrimaryUser:!1,tenantIds:t.tenantIds,timeJoined:t.timeJoined,loginMethods:[{recipeId:e,recipeUserId:t.id,timeJoined:t.timeJoined,tenantIds:t.tenantIds,email:t.email,phoneNumber:t.email}]}}$r.normaliseUser=Hie;function FTe(e,t,r){for(var n,i=m0({},t??{}),a=[(n=i.override)===null||n===void 0?void 0:n.functions],s=0,o=r;s<o.length;s++){var l=o[s],c=l[e];c&&(i=m0({},c.config?c.config(i):i),c.functions!==void 0&&a.push(c.functions))}return a=a.reverse().filter(function(d){return d!==void 0}),a.length>0&&(i.override=m0(m0({},i.override),{functions:function(d,f){for(var p=0,m=a;p<m.length;p++){var x=m[p];f.override(x)}return d}})),i}$r.applyPlugins=FTe;function LTe(e){return{id:e.id,initialized:!e.init,version:e.version,exports:e.exports,compatibleWebJSSDKVersions:e.compatibleWebJSSDKVersions}}$r.getPublicPlugin=LTe;function BTe(e){var t=Object.keys(e),r=t.reduce(function(n,i){var a;return CTe.nonPublicConfigProperties.includes(i)?n:m0(m0({},n),(a={},a[i]=e[i],a))},{});return r}$r.getPublicConfig=BTe;var ub={},c4={};Object.defineProperty(c4,"__esModule",{value:!0});var UTe=function(){function e(t){this.config=t}return e}();c4.default=UTe;var s7={},Wie={},o7={},Sh={},u4={},$Te=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},zTe=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(u4,"__esModule",{value:!0});u4.createAxiosErrorFromFetchResp=void 0;function HTe(e,t,r,n,i){return e.config=t,r&&(e.code=r),e.request=n,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}function WTe(e){return $Te(this,void 0,void 0,function(){var t,r,n,i,a;return zTe(this,function(s){switch(s.label){case 0:if(t={url:e.url,headers:e.headers},r="status"in e,!r)return[3,12];if(i=e.headers.get("content-type"),a=void 0,i!==null)return[3,5];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,e.text()];case 2:return a=s.sent(),[3,4];case 3:return s.sent(),a="",[3,4];case 4:return[3,11];case 5:return i.includes("application/json")?[4,e.json()]:[3,7];case 6:return a=s.sent(),[3,11];case 7:return i.includes("text/")?[4,e.text()]:[3,9];case 8:return a=s.sent(),[3,11];case 9:return[4,e.blob()];case 10:a=s.sent(),s.label=11;case 11:n={data:a,status:e.status,statusText:e.statusText,headers:e.headers,config:t,request:void 0},s.label=12;case 12:return[2,HTe(r?new Error("Request failed with status code "+e.status):e,t,e.code,void 0,n)]}})})}u4.createAxiosErrorFromFetchResp=WTe;var _i=Ve&&Ve.__assign||function(){return _i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},_i.apply(this,arguments)},Lx=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},Bx=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Sh,"__esModule",{value:!0});Sh.responseErrorInterceptor=Sh.responseInterceptor=Sh.interceptorFunctionRequestFulfilled=void 0;var VTe=u4,vr=cb,qA=o4,l7=Su,Mr=iu;function qTe(e){e.__supertokensSessionRefreshAttempts===void 0&&(e.__supertokensSessionRefreshAttempts=0),e.__supertokensSessionRefreshAttempts++}function GTe(e){return e.__supertokensSessionRefreshAttempts===void 0&&(e.__supertokensSessionRefreshAttempts=0),e.__supertokensSessionRefreshAttempts>=vr.default.config.maxRetryAttemptsForSessionRefresh}function c7(e){var t=e.url===void 0?"":e.url,r=e.baseURL;return r!==void 0&&(t.charAt(0)==="/"&&r.charAt(r.length-1)==="/"?t=r+t.substr(1):t.charAt(0)!=="/"&&r.charAt(r.length-1)!=="/"?t=r+"/"+t:t=r+t),t}function KTe(e){return Lx(this,void 0,void 0,function(){var t,r,n,i,a,s;return Bx(this,function(o){switch(o.label){case 0:(0,Mr.logDebugMessage)("interceptorFunctionRequestFulfilled: started axios interception"),t=c7(e),r=!1;try{r=typeof t=="string"&&!vr.default.recipeImpl.shouldDoInterceptionBasedOnUrl(t,vr.default.config.apiDomain,vr.default.config.sessionTokenBackendDomain)}catch(l){if(l.message==="Please provide a valid domain name")(0,Mr.logDebugMessage)("interceptorFunctionRequestFulfilled: Trying shouldDoInterceptionBasedOnUrl with location.origin"),r=!vr.default.recipeImpl.shouldDoInterceptionBasedOnUrl(l7.default.getReferenceOrThrow().windowHandler.location.getOrigin(),vr.default.config.apiDomain,vr.default.config.sessionTokenBackendDomain);else throw l}return(0,Mr.logDebugMessage)("interceptorFunctionRequestFulfilled: Value of doNotDoInterception: "+r),r?((0,Mr.logDebugMessage)("interceptorFunctionRequestFulfilled: Returning config unchanged"),[2,e]):((0,Mr.logDebugMessage)("interceptorFunctionRequestFulfilled: Modifying config"),qA.ProcessState.getInstance().addState(qA.PROCESS_STATE.CALLING_INTERCEPTION_REQUEST),[4,(0,vr.getLocalSessionState)(!0)]);case 1:return n=o.sent(),i=e,n.status!=="EXISTS"?[3,3]:[4,vr.AntiCsrfToken.getToken(n.lastAccessTokenUpdate)];case 2:a=o.sent(),a!==void 0&&((0,Mr.logDebugMessage)("interceptorFunctionRequestFulfilled: Adding anti-csrf token to request"),i=_i(_i({},i),{headers:i===void 0?{"anti-csrf":a}:_i(_i({},i.headers),{"anti-csrf":a})})),o.label=3;case 3:return vr.default.config.autoAddCredentials&&i.withCredentials===void 0&&((0,Mr.logDebugMessage)("interceptorFunctionRequestFulfilled: Adding credentials include"),i=_i(_i({},i),{withCredentials:!0})),(0,Mr.logDebugMessage)("interceptorFunctionRequestFulfilled: Adding rid header: anti-csrf (it may be overriden by the user's provided rid)"),i=_i(_i({},i),{headers:i===void 0?{rid:"anti-csrf"}:_i({rid:"anti-csrf"},i.headers)}),s=vr.default.config.tokenTransferMethod,(0,Mr.logDebugMessage)("interceptorFunctionRequestFulfilled: Adding st-auth-mode header: "+s),i.headers["st-auth-mode"]=s,[4,qie(i)];case 4:return i=o.sent(),[4,Vie(i)];case 5:return o.sent(),(0,Mr.logDebugMessage)("interceptorFunctionRequestFulfilled: returning modified config"),[2,i]}})})}Sh.interceptorFunctionRequestFulfilled=KTe;function XTe(e){var t=this;return function(r){return Lx(t,void 0,void 0,function(){var n,i,a,s;return Bx(this,function(o){switch(o.label){case 0:if(n=!1,!vr.default.initCalled)throw new Error("init function not called");(0,Mr.logDebugMessage)("responseInterceptor: started"),(0,Mr.logDebugMessage)("responseInterceptor: already intercepted: "+r.headers["x-supertokens-xhr-intercepted"]),i=c7(r.config);try{n=typeof i=="string"&&!vr.default.recipeImpl.shouldDoInterceptionBasedOnUrl(i,vr.default.config.apiDomain,vr.default.config.sessionTokenBackendDomain)||!!r.headers["x-supertokens-xhr-intercepted"]}catch(l){if(l.message==="Please provide a valid domain name")(0,Mr.logDebugMessage)("responseInterceptor: Trying shouldDoInterceptionBasedOnUrl with location.origin"),n=!vr.default.recipeImpl.shouldDoInterceptionBasedOnUrl(l7.default.getReferenceOrThrow().windowHandler.location.getOrigin(),vr.default.config.apiDomain,vr.default.config.sessionTokenBackendDomain)||!!r.headers["x-supertokens-xhr-intercepted"];else throw l}return(0,Mr.logDebugMessage)("responseInterceptor: Value of doNotDoInterception: "+n),n?((0,Mr.logDebugMessage)("responseInterceptor: Returning without interception"),[2,r]):((0,Mr.logDebugMessage)("responseInterceptor: Interception started"),qA.ProcessState.getInstance().addState(qA.PROCESS_STATE.CALLING_INTERCEPTION_RESPONSE),[4,(0,vr.getLocalSessionState)(!1)]);case 1:return a=o.sent(),[4,W6(r)];case 2:return o.sent(),(0,vr.fireSessionUpdateEventsIfNecessary)(a.status==="EXISTS",r.status,r.headers["front-token"]),r.status!==vr.default.config.sessionExpiredStatusCode?[3,3]:((0,Mr.logDebugMessage)("responseInterceptor: Status code is: "+r.status),s=r.config,[2,u7.doRequest(function(l){return e(l)},s,i,r,void 0,!0)]);case 3:return r.status!==vr.default.config.invalidClaimStatusCode?[3,5]:[4,(0,vr.onInvalidClaimResponse)(r)];case 4:o.sent(),o.label=5;case 5:return[2,r]}})})}}Sh.responseInterceptor=XTe;function YTe(e){var t=this;return function(r){return Lx(t,void 0,void 0,function(){var n;return Bx(this,function(i){switch(i.label){case 0:if((0,Mr.logDebugMessage)("responseErrorInterceptor: called"),(0,Mr.logDebugMessage)("responseErrorInterceptor: already intercepted: "+(r.response&&r.response.headers["x-supertokens-xhr-intercepted"])),r.response===void 0||r.response.headers["x-supertokens-xhr-intercepted"])throw r;return r.response!==void 0&&r.response.status===vr.default.config.sessionExpiredStatusCode?((0,Mr.logDebugMessage)("responseErrorInterceptor: Status code is: "+r.response.status),n=r.config,[2,u7.doRequest(function(a){return e(a)},n,c7(n),void 0,r,!0)]):[3,1];case 1:return r.response!==void 0&&r.response.status===vr.default.config.invalidClaimStatusCode?[4,(0,vr.onInvalidClaimResponse)(r.response)]:[3,3];case 2:i.sent(),i.label=3;case 3:throw r}})})}}Sh.responseErrorInterceptor=YTe;var u7=function(){function e(){}var t;return t=e,e.doRequest=function(r,n,i,a,s,o){return o===void 0&&(o=!1),Lx(void 0,void 0,void 0,function(){var l,c,d,f,p,m,x,y,_,b,S,_,C,A,j;return Bx(t,function(P){switch(P.label){case 0:if(!vr.default.initCalled)throw Error("init function not called");(0,Mr.logDebugMessage)("doRequest: called"),l=!1;try{l=typeof i=="string"&&!vr.default.recipeImpl.shouldDoInterceptionBasedOnUrl(i,vr.default.config.apiDomain,vr.default.config.sessionTokenBackendDomain)&&o}catch(O){if(O.message==="Please provide a valid domain name")(0,Mr.logDebugMessage)("doRequest: Trying shouldDoInterceptionBasedOnUrl with location.origin"),l=!vr.default.recipeImpl.shouldDoInterceptionBasedOnUrl(l7.default.getReferenceOrThrow().windowHandler.location.getOrigin(),vr.default.config.apiDomain,vr.default.config.sessionTokenBackendDomain)&&o;else throw O}if((0,Mr.logDebugMessage)("doRequest: Value of doNotDoInterception: "+l),!l)return[3,2];if((0,Mr.logDebugMessage)("doRequest: Returning without interception"),s!==void 0)throw s;return a!==void 0?[2,a]:[4,r(n)];case 1:return[2,P.sent()];case 2:return(0,Mr.logDebugMessage)("doRequest: Interception started"),[4,qie(n)];case 3:n=P.sent(),c=void 0,P.label=4;case 4:return[4,(0,vr.getLocalSessionState)(!0)];case 5:return d=P.sent(),f=n,d.status!=="EXISTS"?[3,7]:[4,vr.AntiCsrfToken.getToken(d.lastAccessTokenUpdate)];case 6:p=P.sent(),p!==void 0&&((0,Mr.logDebugMessage)("doRequest: Adding anti-csrf token to request"),f=_i(_i({},f),{headers:f===void 0?{"anti-csrf":p}:_i(_i({},f.headers),{"anti-csrf":p})})),P.label=7;case 7:return vr.default.config.autoAddCredentials&&f.withCredentials===void 0&&((0,Mr.logDebugMessage)("doRequest: Adding credentials include"),f=_i(_i({},f),{withCredentials:!0})),(0,Mr.logDebugMessage)("doRequest: Adding rid header: anti-csrf (May get overriden by user's rid)"),f=_i(_i({},f),{headers:f===void 0?{rid:"anti-csrf"}:_i({rid:"anti-csrf"},f.headers)}),m=vr.default.config.tokenTransferMethod,(0,Mr.logDebugMessage)("doRequest: Adding st-auth-mode header: "+m),f.headers["st-auth-mode"]=m,[4,Vie(f)];case 8:P.sent(),P.label=9;case 9:if(P.trys.push([9,14,,27]),x=s,y=a,s=void 0,a=void 0,x!==void 0)throw(0,Mr.logDebugMessage)("doRequest: Not making call because localPrevError is not undefined"),x;return y!==void 0?(0,Mr.logDebugMessage)("doRequest: Not making call because localPrevResponse is not undefined"):(0,Mr.logDebugMessage)("doRequest: Making user's http call"),y!==void 0?[3,11]:[4,r(f)];case 10:return b=P.sent(),[3,12];case 11:b=y,P.label=12;case 12:return _=b,(0,Mr.logDebugMessage)("doRequest: User's http call ended"),[4,W6(_)];case 13:return P.sent(),(0,vr.fireSessionUpdateEventsIfNecessary)(d.status==="EXISTS",_.status,_.headers["front-token"]),[2,_];case 14:return S=P.sent(),_=S.response,_===void 0?[3,25]:[4,W6(_)];case 15:if(P.sent(),(0,vr.fireSessionUpdateEventsIfNecessary)(d.status==="EXISTS",_.status,_.headers["front-token"]),_.status!==vr.default.config.sessionExpiredStatusCode)return[3,21];if((0,Mr.logDebugMessage)("doRequest: Status code is: "+_.status),GTe(n))throw(0,Mr.logDebugMessage)("doRequest: Maximum session refresh attempts reached. sessionRefreshAttempts: ".concat(n.__supertokensSessionRefreshAttempts,", maxRetryAttemptsForSessionRefresh: ").concat(vr.default.config.maxRetryAttemptsForSessionRefresh)),C="Received a 401 response from ".concat(i,". Attempted to refresh the session and retry the request with the updated session tokens ").concat(vr.default.config.maxRetryAttemptsForSessionRefresh," times, but each attempt resulted in a 401 error. The maximum session refresh limit has been reached. Please investigate your API. To increase the session refresh attempts, update maxRetryAttemptsForSessionRefresh in the config."),console.error(C),new Error(C);return[4,(0,vr.onUnauthorisedResponse)(d)];case 16:return A=P.sent(),qTe(n),(0,Mr.logDebugMessage)("doRequest: sessionRefreshAttempts: "+n.__supertokensSessionRefreshAttempts),A.result==="RETRY"?[3,20]:((0,Mr.logDebugMessage)("doRequest: Not retrying original request"),A.error===void 0?[3,18]:[4,(0,VTe.createAxiosErrorFromFetchResp)(A.error)]);case 17:return j=P.sent(),[3,19];case 18:j=S,P.label=19;case 19:return c=j,[3,28];case 20:return(0,Mr.logDebugMessage)("doRequest: Retrying original request"),[3,24];case 21:return _.status!==vr.default.config.invalidClaimStatusCode?[3,23]:[4,(0,vr.onInvalidClaimResponse)(_)];case 22:P.sent(),P.label=23;case 23:throw S;case 24:return[3,26];case 25:throw S;case 26:return[3,27];case 27:return[3,4];case 28:throw c}})})},e}();Sh.default=u7;function Vie(e){return Lx(this,void 0,void 0,function(){var t,r;return Bx(this,function(n){switch(n.label){case 0:return e.headers===void 0&&(e.headers={}),(0,Mr.logDebugMessage)("setAuthorizationHeaderIfRequired: adding existing tokens as header"),[4,(0,vr.getTokenForHeaderAuth)("access")];case 1:return t=n.sent(),[4,(0,vr.getTokenForHeaderAuth)("refresh")];case 2:return r=n.sent(),t!==void 0&&r!==void 0?e.headers.Authorization!==void 0||e.headers.authorization!==void 0?(0,Mr.logDebugMessage)("setAuthorizationHeaderIfRequired: Authorization header defined by the user, not adding"):((0,Mr.logDebugMessage)("setAuthorizationHeaderIfRequired: added authorization header"),e.headers=_i(_i({},e.headers),{Authorization:"Bearer ".concat(t)}),e.__supertokensAddedAuthHeader=!0):(0,Mr.logDebugMessage)("setAuthorizationHeaderIfRequired: token for header based auth not found"),[2]}})})}function W6(e){return Lx(this,void 0,void 0,function(){var t,r,n,i,a,s;return Bx(this,function(o){switch(o.label){case 0:return(0,Mr.logDebugMessage)("saveTokensFromHeaders: Saving updated tokens from the response"),t=e.headers["st-refresh-token"],t===void 0?[3,2]:((0,Mr.logDebugMessage)("saveTokensFromHeaders: saving new refresh token"),[4,(0,vr.setToken)("refresh",t)]);case 1:o.sent(),o.label=2;case 2:return r=e.headers["st-access-token"],r===void 0?[3,4]:((0,Mr.logDebugMessage)("saveTokensFromHeaders: saving new access token"),[4,(0,vr.setToken)("access",r)]);case 3:o.sent(),o.label=4;case 4:return n=e.headers["front-token"],n===void 0?[3,6]:((0,Mr.logDebugMessage)("doRequest: Setting sFrontToken: "+n),[4,vr.FrontToken.setItem(n)]);case 5:o.sent(),i=new Headers,Object.entries(e.headers).forEach(function(l){var c=l[0],d=l[1];Array.isArray(d)?d.forEach(function(f){return i.append(c,f)}):i.append(c,d)}),(0,vr.updateClockSkewUsingFrontToken)({frontToken:n,responseHeaders:i}),o.label=6;case 6:return a=e.headers["anti-csrf"],a===void 0?[3,9]:[4,(0,vr.getLocalSessionState)(!1)];case 7:return s=o.sent(),s.status!=="EXISTS"?[3,9]:((0,Mr.logDebugMessage)("doRequest: Setting anti-csrf token"),[4,vr.AntiCsrfToken.setItem(s.lastAccessTokenUpdate,a)]);case 8:o.sent(),o.label=9;case 9:return[2]}})})}function qie(e){return Lx(this,void 0,void 0,function(){var t,r,n,i;return Bx(this,function(a){switch(a.label){case 0:return[4,(0,vr.getTokenForHeaderAuth)("access")];case 1:return t=a.sent(),[4,(0,vr.getTokenForHeaderAuth)("refresh")];case 2:return r=a.sent(),n=e.headers.Authorization||e.headers.authorization,t!==void 0&&r!==void 0&&(n==="Bearer ".concat(t)||"__supertokensAddedAuthHeader"in e)?((0,Mr.logDebugMessage)("removeAuthHeaderIfMatchesLocalToken: Removing Authorization from user provided headers because it contains our access token"),i=_i(_i({},e),{headers:_i({},e.headers)}),delete i.headers.authorization,delete i.headers.Authorization,[2,i]):[2,e]}})})}var d4={},lg=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},cg=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(d4,"__esModule",{value:!0});d4.addInterceptorsToXMLHttpRequest=void 0;var Gn=cb,hn=iu,QTe=Su,g_=o4,JTe=["readystatechange","abort","error","load","loadend","loadstart","progress","timeout"];function ZTe(){var e=new Promise(function(r){return setTimeout(r,0)}),t=XMLHttpRequest;(0,hn.logDebugMessage)("addInterceptorsToXMLHttpRequest called"),XMLHttpRequest=function(){var r=new t,n=this,i=[],a=[],s={},o,l=new Map,c=e;function d(P){c=c.finally(function(){var O;return(O=P())===null||O===void 0?void 0:O.catch(function(D){var L=new ProgressEvent("error");L.error=D,n.onerror!==void 0&&n.onerror!==null&&n.onerror(L),b("error",L)})})}var f="",p=!1,m=void 0,x,y=0;n.onload=null,n.onreadystatechange=null,n.onloadend=null,n.addEventListener=function(P,O,D){var L=l.get(P);L===void 0&&(L=new Set,l.set(P,L)),L.add(O)},n.removeEventListener=function(P,O){var D=l.get(P);D===void 0&&(D=new Set,l.set(P,D)),D.delete(O)};function b(P,O){var D=l.get(P);(0,hn.logDebugMessage)("XHRInterceptor dispatching ".concat(O.type," to ").concat(D?D.size:0," listeners")),D&&Array.from(D).forEach(function(L){return L.apply(n,[O])})}function S(){return lg(this,void 0,void 0,function(){var P,O,D;return cg(this,function(L){switch(L.label){case 0:if(m===void 0)throw new Error("Should never come here..");if((0,hn.logDebugMessage)("XHRInterceptor.handleRetryPostRefreshing: preRequestLSS "+m.status),y>=Gn.default.config.maxRetryAttemptsForSessionRefresh)throw(0,hn.logDebugMessage)("XHRInterceptor.handleRetryPostRefreshing: Maximum session refresh attempts reached. sessionRefreshAttempts: ".concat(y,", maxRetryAttemptsForSessionRefresh: ").concat(Gn.default.config.maxRetryAttemptsForSessionRefresh)),s.status=0,s.statusText="",s.responseType="",P="Received a 401 response from ".concat(f,". Attempted to refresh the session and retry the request with the updated session tokens ").concat(Gn.default.config.maxRetryAttemptsForSessionRefresh," times, but each attempt resulted in a 401 error. The maximum session refresh limit has been reached. Please investigate your API. To increase the session refresh attempts, update maxRetryAttemptsForSessionRefresh in the config."),console.error(P),new Error(P);return[4,(0,Gn.onUnauthorisedResponse)(m)];case 1:if(O=L.sent(),y++,(0,hn.logDebugMessage)("XHRInterceptor.handleRetryPostRefreshing: sessionRefreshAttempts: "+y),O.result!=="RETRY"){if((0,hn.logDebugMessage)("XHRInterceptor.handleRetryPostRefreshing: Not retrying original request "+!!O.error),O.error!==void 0)throw O.error;return[2,!0]}return(0,hn.logDebugMessage)("XHRInterceptor.handleRetryPostRefreshing: Retrying original request"),D=new t,A(n,D,!0),i.forEach(function(B){B(D)}),j(D,x),[2,!1]}})})}function _(P){return lg(this,void 0,void 0,function(){var O,D,L,B,H;return cg(this,function(z){switch(z.label){case 0:if(p)return(0,hn.logDebugMessage)("XHRInterceptor.handleResponse: Returning without interception"),[2,!0];z.label=1;case 1:return z.trys.push([1,7,,11]),(0,hn.logDebugMessage)("XHRInterceptor.handleResponse: Interception started"),g_.ProcessState.getInstance().addState(g_.PROCESS_STATE.CALLING_INTERCEPTION_RESPONSE),O=P.status,D=nIe(P),[4,rIe(D)];case 2:return z.sent(),(0,Gn.fireSessionUpdateEventsIfNecessary)(m.status==="EXISTS",O,D.get("front-token")),O!==Gn.default.config.sessionExpiredStatusCode?[3,4]:((0,hn.logDebugMessage)("responseInterceptor: Status code is: "+O),[4,S()]);case 3:return[2,z.sent()];case 4:return O!==Gn.default.config.invalidClaimStatusCode?[3,6]:[4,(0,Gn.onInvalidClaimResponse)({data:P.responseText})];case 5:z.sent(),z.label=6;case 6:return[2,!0];case 7:return L=z.sent(),(0,hn.logDebugMessage)("XHRInterceptor.handleResponse: caught error"),L.status===void 0?[3,9]:[4,eIe(L)];case 8:if(B=z.sent(),s.status=B.status,s.statusText=B.statusText,s.responseType=B.responseType,o=B.headers,B.responseType==="json")try{s.response=JSON.parse(B.responseText)}catch{s.response=B.responseText}else s.response=B.responseText;return s.responseText=B.responseText,[3,10];case 9:H=new ProgressEvent("error"),H.error=L,n.onerror!==void 0&&n.onerror!==null&&n.onerror(H),b("error",H),z.label=10;case 10:return[2,!0];case 11:return[2]}})})}n.open=function(P,O){(0,hn.logDebugMessage)("XHRInterceptor.open called");var D=arguments;f=O;try{p=typeof f=="string"&&!Gn.default.recipeImpl.shouldDoInterceptionBasedOnUrl(f,Gn.default.config.apiDomain,Gn.default.config.sessionTokenBackendDomain)||typeof f!="string"&&!Gn.default.recipeImpl.shouldDoInterceptionBasedOnUrl(f.toString(),Gn.default.config.apiDomain,Gn.default.config.sessionTokenBackendDomain)}catch(L){if(L.message==="Please provide a valid domain name")(0,hn.logDebugMessage)("XHRInterceptor.open: Trying shouldDoInterceptionBasedOnUrl with location.origin"),p=!Gn.default.recipeImpl.shouldDoInterceptionBasedOnUrl(QTe.default.getReferenceOrThrow().windowHandler.location.getOrigin(),Gn.default.config.apiDomain,Gn.default.config.sessionTokenBackendDomain);else throw L}d(function(){i.push(function(L){L.open.apply(L,D)}),r.open.apply(r,D)})},n.send=function(P){x=P,j(r,x)},n.setRequestHeader=function(P,O){var D=this;if((0,hn.logDebugMessage)("XHRInterceptor.setRequestHeader: Called with ".concat(P)),p){d(function(){return r.setRequestHeader(P,O)});return}P!=="anti-csrf"&&d(function(){return lg(D,void 0,void 0,function(){var L,B;return cg(this,function(H){switch(H.label){case 0:return P.toLowerCase()!=="authorization"?[3,3]:((0,hn.logDebugMessage)("XHRInterceptor.setRequestHeader: checking if user provided auth header matches local token"),[4,(0,Gn.getTokenForHeaderAuth)("access")]);case 1:return L=H.sent(),[4,(0,Gn.getTokenForHeaderAuth)("refresh")];case 2:if(B=H.sent(),L!==void 0&&B!==void 0&&O==="Bearer ".concat(L))return(0,hn.logDebugMessage)("XHRInterceptor.setRequestHeader: skipping Authorization from user provided headers because it contains our access token"),[2];H.label=3;case 3:return i.push(function(z){z.setRequestHeader(P,O)}),a.push({name:P,value:O}),r.setRequestHeader(P,O),[2]}})})})};var C=void 0;A(n,r,!1);function A(P,O,D){var L,B=["load","loadend","readystatechange"];(0,hn.logDebugMessage)("XHRInterceptor.setUpXHR called");for(var H=function(Y){(0,hn.logDebugMessage)("XHRInterceptor added listener for event ".concat(Y)),O.addEventListener(Y,function(pe){(0,hn.logDebugMessage)("XHRInterceptor got event ".concat(Y)),B.includes(Y)||b(Y,pe)})},z=0,ie=JTe;z<ie.length;z++){var X=ie[z];H(X)}if(O.onload=function(Y){L===void 0&&(L=_(O)),L.then(function(pe){pe&&(P.onload&&P.onload(Y),b("load",Y))})},O.onreadystatechange=function(Y){O.readyState===t.DONE?(L===void 0&&(L=_(O)),L.then(function(pe){pe&&(P.onreadystatechange&&P.onreadystatechange(Y),b("readystatechange",Y))})):(P.onreadystatechange&&P.onreadystatechange(Y),b("readystatechange",Y))},O.onloadend=function(Y){L===void 0&&(L=_(O)),L.then(function(pe){pe&&(P.onloadend&&P.onloadend(Y),b("loadend",Y))})},P.getAllResponseHeaders=function(){var Y;return o?(Y="",o.forEach(function(pe,_e){return Y+="".concat(_e,": ").concat(pe,`\r
`)})):Y=O.getAllResponseHeaders(),Y+`x-supertokens-xhr-intercepted: true\r
`},P.getResponseHeader=function(Y){return Y==="x-supertokens-xhr-intercepted"?"true":o?o.get(Y):O.getResponseHeader(Y)},C===void 0){C=[];for(var W in O)W in P||C.push(W)}for(var Q=function(Y){typeof O[Y]=="function"?Object.defineProperty(P,Y,{configurable:!0,value:function(){var pe=arguments;return D||i.push(function(_e){_e[Y].apply(_e,pe)}),O[Y].apply(O,pe)}}):Object.defineProperty(P,Y,{configurable:!0,get:function(){return s[Y]!==void 0?s[Y]:O[Y]},set:function(pe){D||i.push(function(_e){_e[Y]=pe}),(0,hn.logDebugMessage)("XHRInterceptor.set[".concat(Y,"] = ").concat(pe)),O[Y]=pe}})},te=0,J=C;te<J.length;te++){var W=J[te];Q(W)}}function j(P,O){var D=this;if((0,hn.logDebugMessage)("XHRInterceptor.send: called"),(0,hn.logDebugMessage)("XHRInterceptor.send: Value of doNotDoInterception: "+p),p){(0,hn.logDebugMessage)("XHRInterceptor.send: Returning without interception"),d(function(){return P.send(O)});return}(0,hn.logDebugMessage)("XHRInterceptor.send: Interception started"),g_.ProcessState.getInstance().addState(g_.PROCESS_STATE.CALLING_INTERCEPTION_REQUEST),d(function(){return lg(D,void 0,void 0,function(){var L,B;return cg(this,function(H){switch(H.label){case 0:return[4,(0,Gn.getLocalSessionState)(!0)];case 1:return m=H.sent(),m.status!=="EXISTS"?[3,3]:[4,Gn.AntiCsrfToken.getToken(m.lastAccessTokenUpdate)];case 2:L=H.sent(),L!==void 0&&((0,hn.logDebugMessage)("XHRInterceptor.send: Adding anti-csrf token to request"),P.setRequestHeader("anti-csrf",L)),H.label=3;case 3:return Gn.default.config.autoAddCredentials&&((0,hn.logDebugMessage)("XHRInterceptor.send: Adding credentials include"),n.withCredentials=!0),a.some(function(z){return z.name==="rid"})?(0,hn.logDebugMessage)("XHRInterceptor.send: rid header was already there in request"):((0,hn.logDebugMessage)("XHRInterceptor.send: Adding rid header: anti-csrf"),P.setRequestHeader("rid","anti-csrf")),B=Gn.default.config.tokenTransferMethod,a.some(function(z){return z.name==="st-auth-mode"})?(0,hn.logDebugMessage)("XHRInterceptor.send: st-auth-mode header was already there in request"):((0,hn.logDebugMessage)("XHRInterceptor.send: Adding st-auth-mode header: "+B),P.setRequestHeader("st-auth-mode",B)),[4,tIe(P,a)];case 4:return H.sent(),(0,hn.logDebugMessage)("XHRInterceptor.send: Making user's http call"),[2,P.send(O)]}})})})}},XMLHttpRequest.__interceptedBySuperTokens=!0,XMLHttpRequest.__original=t}d4.addInterceptorsToXMLHttpRequest=ZTe;function eIe(e){return lg(this,void 0,void 0,function(){var t,r,n,i,a;return cg(this,function(s){switch(s.label){case 0:if(t=e.headers.get("content-type"),r="",n="text",t!==null)return[3,5];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,e.text()];case 2:return r=s.sent(),[3,4];case 3:return s.sent(),r="",[3,4];case 4:return[3,9];case 5:return t.includes("application/json")?(n="json",a=(i=JSON).stringify,[4,e.json()]):[3,7];case 6:return r=a.apply(i,[s.sent()]),[3,9];case 7:return t.includes("text/")?[4,e.text()]:[3,9];case 8:r=s.sent(),s.label=9;case 9:return[2,{status:e.status,responseText:r,statusText:e.statusText,responseType:n,headers:e.headers}]}})})}function tIe(e,t){return lg(this,void 0,void 0,function(){var r,n;return cg(this,function(i){switch(i.label){case 0:return(0,hn.logDebugMessage)("setAuthorizationHeaderIfRequired: adding existing tokens as header"),[4,(0,Gn.getTokenForHeaderAuth)("access")];case 1:return r=i.sent(),[4,(0,Gn.getTokenForHeaderAuth)("refresh")];case 2:return n=i.sent(),r!==void 0&&n!==void 0?t.some(function(a){var s=a.name;return s.toLowerCase()==="authorization"})?(0,hn.logDebugMessage)("setAuthorizationHeaderIfRequired: Authorization header defined by the user, not adding"):r!==void 0&&((0,hn.logDebugMessage)("setAuthorizationHeaderIfRequired: added authorization header"),e.setRequestHeader("Authorization","Bearer ".concat(r))):(0,hn.logDebugMessage)("setAuthorizationHeaderIfRequired: token for header based auth not found"),[2]}})})}function rIe(e){return lg(this,void 0,void 0,function(){var t,r,n,i,a;return cg(this,function(s){switch(s.label){case 0:return(0,hn.logDebugMessage)("saveTokensFromHeaders: Saving updated tokens from the response"),t=e.get("st-refresh-token"),t===null?[3,2]:((0,hn.logDebugMessage)("saveTokensFromHeaders: saving new refresh token"),[4,(0,Gn.setToken)("refresh",t)]);case 1:s.sent(),s.label=2;case 2:return r=e.get("st-access-token"),r===null?[3,4]:((0,hn.logDebugMessage)("saveTokensFromHeaders: saving new access token"),[4,(0,Gn.setToken)("access",r)]);case 3:s.sent(),s.label=4;case 4:return n=e.get("front-token"),n===null?[3,6]:((0,hn.logDebugMessage)("saveTokensFromHeaders: Setting sFrontToken: "+n),[4,Gn.FrontToken.setItem(n)]);case 5:s.sent(),(0,Gn.updateClockSkewUsingFrontToken)({frontToken:n,responseHeaders:e}),s.label=6;case 6:return i=e.get("anti-csrf"),i===null?[3,9]:[4,(0,Gn.getLocalSessionState)(!1)];case 7:return a=s.sent(),a.status!=="EXISTS"?[3,9]:((0,hn.logDebugMessage)("saveTokensFromHeaders: Setting anti-csrf token"),[4,Gn.AntiCsrfToken.setItem(a.lastAccessTokenUpdate,i)]);case 8:s.sent(),s.label=9;case 9:return[2]}})})}function nIe(e){return new Headers(e.getAllResponseHeaders().split(`\r
`).map(function(t){var r=t.indexOf(": ");return r===-1?["",""]:[t.slice(0,r),t.slice(r+2)]}).filter(function(t){return t[0].length!==0}))}var V6=Ve&&Ve.__assign||function(){return V6=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},V6.apply(this,arguments)},Tp=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},Ip=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(o7,"__esModule",{value:!0});var Vf=cb,x_=Sh,iIe=B0,Qn=iu,aIe=PE,sIe=d4,v_=fo,YV=yf,oIe=Mx,Cj=100,QV="CLAIM_REFRESH_LOCK";function lIe(e){return{addXMLHttpRequestInterceptor:function(t){(0,Qn.logDebugMessage)("addXMLHttpRequestInterceptorAndReturnModified: called"),(0,sIe.addInterceptorsToXMLHttpRequest)()},addFetchInterceptorsAndReturnModifiedFetch:function(t){return(0,Qn.logDebugMessage)("addFetchInterceptorsAndReturnModifiedFetch: called"),function(r,n){return Tp(this,void 0,void 0,function(){return Ip(this,function(i){switch(i.label){case 0:return[4,Vf.default.doRequest(function(a){return t.originalFetch(typeof r=="object"&&"clone"in r?r.clone():r,V6({},a))},n,r)];case 1:return[2,i.sent()]}})})}},addAxiosInterceptors:function(t){if((0,Qn.logDebugMessage)("addAxiosInterceptors: called"),XMLHttpRequest.__interceptedBySuperTokens){console.warn("Not adding axios interceptor since XMLHttpRequest is already added. This is just a warning."),console.warn("Our axios and XMLHttpRequest interceptors cannot be used at the same time."),console.warn("Since XMLHttpRequest is added automatically and supports axios by default, you can just remove addAxiosInterceptors from your code."),console.warn("If you want to continue using our axios interceptor, you can override addXMLHttpRequestInterceptor with an empty function."),(0,Qn.logDebugMessage)("addAxiosInterceptors: not adding, because XHR interceptors are already in place");return}for(var r=t.axiosInstance.interceptors.request,n=0;n<r.handlers.length;n++)if(r.handlers[n].fulfilled===x_.interceptorFunctionRequestFulfilled){(0,Qn.logDebugMessage)("addAxiosInterceptors: not adding because already added on this instance");return}t.axiosInstance.interceptors.request.use(x_.interceptorFunctionRequestFulfilled,function(i){return Tp(this,void 0,void 0,function(){return Ip(this,function(a){throw i})})}),t.axiosInstance.interceptors.response.use((0,x_.responseInterceptor)(t.axiosInstance),(0,x_.responseErrorInterceptor)(t.axiosInstance))},getUserId:function(t){return Tp(this,void 0,void 0,function(){var r;return Ip(this,function(n){switch(n.label){case 0:return(0,Qn.logDebugMessage)("getUserId: called"),[4,Vf.FrontToken.getTokenInfo()];case 1:if(r=n.sent(),r===void 0)throw new Error("No session exists");return(0,Qn.logDebugMessage)("getUserId: returning: "+r.uid),[2,r.uid]}})})},getAccessTokenPayloadSecurely:function(t){return Tp(this,void 0,void 0,function(){var r,n;return Ip(this,function(i){switch(i.label){case 0:return(0,Qn.logDebugMessage)("getAccessTokenPayloadSecurely: called"),[4,Vf.FrontToken.getTokenInfo()];case 1:if(r=i.sent(),r===void 0)throw new Error("No session exists");return r.ate<YV.default.getReferenceOrThrow().dateProvider.now()?((0,Qn.logDebugMessage)("getAccessTokenPayloadSecurely: access token expired. Refreshing session"),[4,Vf.default.attemptRefreshingSession()]):[3,5];case 2:return n=i.sent(),n?[4,this.getAccessTokenPayloadSecurely({userContext:t.userContext})]:[3,4];case 3:return[2,i.sent()];case 4:throw new Error("Could not refresh session");case 5:return(0,Qn.logDebugMessage)("getAccessTokenPayloadSecurely: returning: "+JSON.stringify(r.up)),[2,r.up]}})})},doesSessionExist:function(t){return Tp(this,void 0,void 0,function(){var r,n,i;return Ip(this,function(a){switch(a.label){case 0:return(0,Qn.logDebugMessage)("doesSessionExist: called"),[4,Vf.FrontToken.getTokenInfo()];case 1:return r=a.sent(),r===void 0?((0,Qn.logDebugMessage)("doesSessionExist: access token does not exist locally"),[2,!1]):r.ate<YV.default.getReferenceOrThrow().dateProvider.now()?((0,Qn.logDebugMessage)("doesSessionExist: access token expired. Refreshing session"),[4,(0,Vf.getLocalSessionState)(!1)]):[3,4];case 2:return n=a.sent(),[4,(0,Vf.onUnauthorisedResponse)(n)];case 3:return i=a.sent(),[2,i.result==="RETRY"];case 4:return[2,!0]}})})},signOut:function(t){return Tp(this,void 0,void 0,function(){var r,n,i,a;return Ip(this,function(s){switch(s.label){case 0:return(0,Qn.logDebugMessage)("signOut: called"),[4,this.doesSessionExist(t)];case 1:return s.sent()?((0,Qn.logDebugMessage)("signOut: Calling refresh pre API hook"),[4,e.preAPIHook({action:"SIGN_OUT",requestInit:{method:"post",headers:{"fdi-version":iIe.supported_fdi.join(","),rid:Vf.default.rid}},url:Vf.default.signOutUrl,userContext:t.userContext})]):((0,Qn.logDebugMessage)("signOut: exiting early because session does not exist"),(0,Qn.logDebugMessage)("signOut: firing SIGN_OUT event"),e.onHandleEvent({action:"SIGN_OUT",userContext:t.userContext}),[2]);case 2:return r=s.sent(),(0,Qn.logDebugMessage)("signOut: Calling API"),[4,fetch(r.url,r.requestInit)];case 3:if(n=s.sent(),(0,Qn.logDebugMessage)("signOut: API ended"),(0,Qn.logDebugMessage)("signOut: API responded with status code: "+n.status),n.status===e.sessionExpiredStatusCode)return[2];if(n.status>=300)throw n;return[4,e.postAPIHook({action:"SIGN_OUT",requestInit:r.requestInit,url:r.url,fetchResponse:n.clone(),userContext:t.userContext})];case 4:return s.sent(),[4,n.clone().json()];case 5:if(i=s.sent(),i.status==="GENERAL_ERROR")throw(0,Qn.logDebugMessage)("doRequest: Throwing general error"),a=i.message===void 0?"No Error Message Provided":i.message,new aIe.STGeneralError(a);return[2]}})})},getInvalidClaimsFromResponse:function(t){return Tp(this,void 0,void 0,function(){var r;return Ip(this,function(n){switch(n.label){case 0:return"body"in t.response?[4,t.response.clone().json()]:[3,2];case 1:return r=n.sent(),[3,3];case 2:typeof t.response.data=="string"?r=JSON.parse(t.response.data):r=t.response.data,n.label=3;case 3:return[2,r.claimValidationErrors]}})})},getGlobalClaimValidators:function(t){return t.claimValidatorsAddedByOtherRecipes},validateClaims:function(t){return Tp(this,void 0,void 0,function(){var r,n,i,a,s,o,p,l,c,d,f,p,m;return Ip(this,function(x){switch(x.label){case 0:n=0,x.label=1;case 1:return++n<Cj?[4,oIe.default.getReferenceOrThrow().lockFactory()]:[3,20];case 2:return i=x.sent(),(0,Qn.logDebugMessage)("validateClaims: trying to acquire claim refresh lock"),[4,i.acquireLock(QV)];case 3:if(a=x.sent(),!a)return[3,18];x.label=4;case 4:return x.trys.push([4,,15,17]),[4,this.getAccessTokenPayloadSecurely({userContext:t.userContext})];case 5:r=x.sent(),(0,Qn.logDebugMessage)("validateClaims: claim refresh lock acquired"),s=0,o=t.claimValidators,x.label=6;case 6:return s<o.length?(p=o[s],[4,p.shouldRefresh(r,t.userContext)]):[3,14];case 7:if(!x.sent())return[3,13];x.label=8;case 8:return x.trys.push([8,10,,11]),[4,p.refresh(t.userContext)];case 9:return x.sent(),[3,11];case 10:return l=x.sent(),console.error("Encountered an error while refreshing validator ".concat(p.id),l),[3,11];case 11:return[4,this.getAccessTokenPayloadSecurely({userContext:t.userContext})];case 12:r=x.sent(),x.label=13;case 13:return s++,[3,6];case 14:return[3,17];case 15:return(0,Qn.logDebugMessage)("validateClaims: releasing claim refresh lock"),[4,i.releaseLock(QV)];case 16:return x.sent(),[7];case 17:return[3,20];case 18:(0,Qn.logDebugMessage)("validateClaims: Retrying refresh lock ".concat(n,"/").concat(Cj)),x.label=19;case 19:return[3,1];case 20:return n!==Cj?[3,22]:((0,Qn.logDebugMessage)("validateClaims: ran out of retries while trying to acquire claim refresh lock"),[4,this.getAccessTokenPayloadSecurely({userContext:t.userContext})]);case 21:r=x.sent(),x.label=22;case 22:c=[],d=0,f=t.claimValidators,x.label=23;case 23:return d<f.length?(p=f[d],[4,p.validate(r,t.userContext)]):[3,26];case 24:m=x.sent(),m.isValid||c.push({id:p.id,reason:m.reason}),x.label=25;case 25:return d++,[3,23];case 26:return[2,c]}})})},shouldDoInterceptionBasedOnUrl:function(t,r,n){if((0,Qn.logDebugMessage)("shouldDoInterceptionBasedOnUrl: toCheckUrl: "+t+" apiDomain: "+r+" sessionTokenBackendDomain: "+n),t.includes("superTokensDoNotDoInterception"))return!1;t=(0,v_.normaliseURLDomainOrThrowError)(t);var i=new URL(t),a=i.hostname,s=!1;if(r!==""){r=(0,v_.normaliseURLDomainOrThrowError)(r);var o=new URL(r);s=a===o.hostname}if(n===void 0||s)return s;var l=(0,v_.normaliseSessionScopeOrThrowError)(n);return(0,v_.matchesDomainOrSubdomain)(a,l)},calculateClockSkewInMillis:function(t){var r=t.accessTokenPayload;(0,Qn.logDebugMessage)("calculateClockSkewInMillis: called");var n=r==null?void 0:r.iat;if(n===void 0||typeof n!="number")return(0,Qn.logDebugMessage)("calculateClockSkewInMillis: payload iat is undefined or not a number. This may happen due to an unsupported backend sdk. Returning 0"),0;var i=n*1e3,a=i-Date.now();return(0,Qn.logDebugMessage)("calculateClockSkewInMillis: returning "+a),a}}}o7.default=lIe;var bf={},f4={},GA=Ve&&Ve.__assign||function(){return GA=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},GA.apply(this,arguments)};Object.defineProperty(f4,"__esModule",{value:!0});f4.getProxyObject=void 0;function cIe(e){for(var t=GA(GA({},e),{_call:function(o,l){throw new Error("This function should only be called through the recipe object")}}),r=Object.keys(t),n=function(o){o!=="_call"&&(t[o]=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return this._call(o,l)})},i=0,a=r;i<a.length;i++){var s=a[i];n(s)}return t}f4.getProxyObject=cIe;Object.defineProperty(bf,"__esModule",{value:!0});bf.OverrideableBuilder=void 0;var uIe=f4,Gie=function(){function e(t){this.layers=[t],this.proxies=[]}return e.prototype.override=function(t){for(var r=(0,uIe.getProxyObject)(this.layers[0]),n=t(r,this),i=0,a=Object.keys(this.layers[0]);i<a.length;i++){var s=a[i];n[s]===r[s]||s==="_call"?delete n[s]:n[s]===void 0&&(n[s]=null)}return this.layers.push(n),this.proxies.push(r),this},e.prototype.build=function(){var t=this;if(this.result)return this.result;this.result={};for(var r=0,n=this.layers;r<n.length;r++)for(var i=n[r],a=0,s=Object.keys(i);a<s.length;a++){var o=s[a],l=i[o];l!==void 0&&(l===null?this.result[o]=void 0:typeof l=="function"?this.result[o]=l.bind(this.result):this.result[o]=l)}for(var c=function(p){var m=d.proxies[p];m._call=function(x,y){for(var b=p;b>=0;--b){var S=t.layers[b][x];if(S!=null)return S.bind(t.result).apply(void 0,y)}}},d=this,f=0;f<this.proxies.length;++f)c(f);return this.result},e}();bf.OverrideableBuilder=Gie;bf.default=Gie;var Cw={},JV;function Kie(){if(JV)return Cw;JV=1,Object.defineProperty(Cw,"__esModule",{value:!0}),Cw.PrimitiveClaim=void 0;var e=yf,t=function(){function r(n){var i=this;this.validators={hasValue:function(a,s,o){s===void 0&&(s=i.defaultMaxAgeInSeconds);var l=e.default.getReferenceOrThrow().dateProvider;return{id:o!==void 0?o:i.id,refresh:function(c){return i.refresh(c)},shouldRefresh:function(c,d){if(s!==void 0&&s<l.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(l.getThresholdInSeconds()));return i.getValueFromPayload(c,d)===void 0||s!==void 0&&c[i.id].t<l.now()-s*1e3},validate:function(c,d){var f=i.getValueFromPayload(c,d);if(f===void 0)return{isValid:!1,reason:{message:"value does not exist",expectedValue:a,actualValue:f}};var p=(l.now()-i.getLastFetchedTime(c,d))/1e3;return s!==void 0&&p>s?{isValid:!1,reason:{message:"expired",ageInSeconds:p,maxAgeInSeconds:s}}:f!==a?{isValid:!1,reason:{message:"wrong value",expectedValue:a,actualValue:f}}:{isValid:!0}}}}},this.id=n.id,this.refresh=n.refresh,this.defaultMaxAgeInSeconds=n.defaultMaxAgeInSeconds}return r.prototype.getValueFromPayload=function(n,i){return n[this.id]!==void 0?n[this.id].v:void 0},r.prototype.getLastFetchedTime=function(n,i){return n[this.id]!==void 0?n[this.id].t:void 0},r}();return Cw.PrimitiveClaim=t,Cw}var kw={},ZV;function dIe(){if(ZV)return kw;ZV=1;var e=Ve&&Ve.__awaiter||function(i,a,s,o){function l(c){return c instanceof s?c:new s(function(d){d(c)})}return new(s||(s=Promise))(function(c,d){function f(x){try{m(o.next(x))}catch(y){d(y)}}function p(x){try{m(o.throw(x))}catch(y){d(y)}}function m(x){x.done?c(x.value):l(x.value).then(f,p)}m((o=o.apply(i,a||[])).next())})},t=Ve&&Ve.__generator||function(i,a){var s={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,l,c,d;return d={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(m){return function(x){return p([m,x])}}function p(m){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,l&&(c=m[0]&2?l.return:m[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,m[1])).done)return c;switch(l=0,c&&(m=[m[0]&2,c.value]),m[0]){case 0:case 1:c=m;break;case 4:return s.label++,{value:m[1],done:!1};case 5:s.label++,l=m[1],m=[0];continue;case 7:m=s.ops.pop(),s.trys.pop();continue;default:if(c=s.trys,!(c=c.length>0&&c[c.length-1])&&(m[0]===6||m[0]===2)){s=0;continue}if(m[0]===3&&(!c||m[1]>c[0]&&m[1]<c[3])){s.label=m[1];break}if(m[0]===6&&s.label<c[1]){s.label=c[1],c=m;break}if(c&&s.label<c[2]){s.label=c[2],s.ops.push(m);break}c[2]&&s.ops.pop(),s.trys.pop();continue}m=a.call(i,s)}catch(x){m=[6,x],l=0}finally{o=c=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}};Object.defineProperty(kw,"__esModule",{value:!0}),kw.PrimitiveArrayClaim=void 0;var r=yf,n=function(){function i(a){var s=this;this.validators={includes:function(o,l,c){l===void 0&&(l=s.defaultMaxAgeInSeconds);var d=r.default.getReferenceOrThrow().dateProvider;return{id:c!==void 0?c:s.id,refresh:function(f){return s.refresh(f)},shouldRefresh:function(f,p){if(l!==void 0&&l<d.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(d.getThresholdInSeconds()));return s.getValueFromPayload(f,p)===void 0||l!==void 0&&f[s.id].t<d.now()-l*1e3},validate:function(f,p){return e(s,void 0,void 0,function(){var m,x;return t(this,function(y){return m=this.getValueFromPayload(f,p),m===void 0?[2,{isValid:!1,reason:{message:"value does not exist",expectedToInclude:o,actualValue:m}}]:(x=(d.now()-this.getLastFetchedTime(f,p))/1e3,l!==void 0&&x>l?[2,{isValid:!1,reason:{message:"expired",ageInSeconds:x,maxAgeInSeconds:l}}]:m.includes(o)?[2,{isValid:!0}]:[2,{isValid:!1,reason:{message:"wrong value",expectedToInclude:o,actualValue:m}}])})})}}},excludes:function(o,l,c){l===void 0&&(l=s.defaultMaxAgeInSeconds);var d=r.default.getReferenceOrThrow().dateProvider;return{id:c!==void 0?c:s.id,refresh:function(f){return s.refresh(f)},shouldRefresh:function(f,p){if(l!==void 0&&l<d.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(d.getThresholdInSeconds()));return s.getValueFromPayload(f,p)===void 0||l!==void 0&&f[s.id].t<d.now()-l*1e3},validate:function(f,p){return e(s,void 0,void 0,function(){var m,x;return t(this,function(y){return m=this.getValueFromPayload(f,p),m===void 0?[2,{isValid:!1,reason:{message:"value does not exist",expectedToNotInclude:o,actualValue:m}}]:(x=(d.now()-this.getLastFetchedTime(f,p))/1e3,l!==void 0&&x>l?[2,{isValid:!1,reason:{message:"expired",ageInSeconds:x,maxAgeInSeconds:l}}]:m.includes(o)?[2,{isValid:!1,reason:{message:"wrong value",expectedToNotInclude:o,actualValue:m}}]:[2,{isValid:!0}])})})}}},includesAll:function(o,l,c){l===void 0&&(l=s.defaultMaxAgeInSeconds);var d=r.default.getReferenceOrThrow().dateProvider;return{id:c!==void 0?c:s.id,refresh:function(f){return s.refresh(f)},shouldRefresh:function(f,p){if(l!==void 0&&l<d.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(d.getThresholdInSeconds()));return s.getValueFromPayload(f,p)===void 0||l!==void 0&&f[s.id].t<d.now()-l*1e3},validate:function(f,p){return e(s,void 0,void 0,function(){var m,x,y,b;return t(this,function(S){return m=this.getValueFromPayload(f,p),m===void 0?[2,{isValid:!1,reason:{message:"value does not exist",expectedToInclude:o,actualValue:m}}]:(x=(d.now()-this.getLastFetchedTime(f,p))/1e3,l!==void 0&&x>l?[2,{isValid:!1,reason:{message:"expired",ageInSeconds:x,maxAgeInSeconds:l}}]:(y=new Set(m),b=o.every(function(_){return y.has(_)}),[2,b?{isValid:b}:{isValid:b,reason:{message:"wrong value",expectedToInclude:o,actualValue:m}}]))})})}}},includesAny:function(o,l,c){l===void 0&&(l=s.defaultMaxAgeInSeconds);var d=r.default.getReferenceOrThrow().dateProvider;return{id:c!==void 0?c:s.id,refresh:function(f){return s.refresh(f)},shouldRefresh:function(f,p){if(l!==void 0&&l<d.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(d.getThresholdInSeconds()));return s.getValueFromPayload(f,p)===void 0||l!==void 0&&f[s.id].t<d.now()-l*1e3},validate:function(f,p){return e(s,void 0,void 0,function(){var m,x,y,b;return t(this,function(S){return m=this.getValueFromPayload(f,p),m===void 0?[2,{isValid:!1,reason:{message:"value does not exist",expectedToInclude:o,actualValue:m}}]:(x=(d.now()-this.getLastFetchedTime(f,p))/1e3,l!==void 0&&x>l?[2,{isValid:!1,reason:{message:"expired",ageInSeconds:x,maxAgeInSeconds:l}}]:(y=new Set(m),b=o.some(function(_){return y.has(_)}),[2,b?{isValid:b}:{isValid:b,reason:{message:"wrong value",expectedToIncludeAtLeastOneOf:o,actualValue:m}}]))})})}}},excludesAll:function(o,l,c){l===void 0&&(l=s.defaultMaxAgeInSeconds);var d=r.default.getReferenceOrThrow().dateProvider;return{id:c!==void 0?c:s.id,refresh:function(f){return s.refresh(f)},shouldRefresh:function(f,p){if(l!==void 0&&l<d.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(d.getThresholdInSeconds()));return s.getValueFromPayload(f,p)===void 0||l!==void 0&&f[s.id].t<d.now()-l*1e3},validate:function(f,p){return e(s,void 0,void 0,function(){var m,x,y,b;return t(this,function(S){return m=this.getValueFromPayload(f,p),m===void 0?[2,{isValid:!1,reason:{message:"value does not exist",expectedToNotInclude:o,actualValue:m}}]:(x=(d.now()-this.getLastFetchedTime(f,p))/1e3,l!==void 0&&x>l?[2,{isValid:!1,reason:{message:"expired",ageInSeconds:x,maxAgeInSeconds:l}}]:(y=new Set(m),b=o.every(function(_){return!y.has(_)}),[2,b?{isValid:b}:{isValid:b,reason:{message:"wrong value",expectedToNotInclude:o,actualValue:m}}]))})})}}}},this.id=a.id,this.refresh=a.refresh,this.defaultMaxAgeInSeconds=a.defaultMaxAgeInSeconds}return i.prototype.getValueFromPayload=function(a,s){return a[this.id]!==void 0?a[this.id].v:void 0},i.prototype.getLastFetchedTime=function(a,s){return a[this.id]!==void 0?a[this.id].t:void 0},i}();return kw.PrimitiveArrayClaim=n,kw}var _w={},eq;function fIe(){if(eq)return _w;eq=1;var e=Ve&&Ve.__extends||function(){var i=function(a,s){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(o[c]=l[c])},i(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");i(a,s);function o(){this.constructor=a}a.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}(),t=Ve&&Ve.__assign||function(){return t=Object.assign||function(i){for(var a,s=1,o=arguments.length;s<o;s++){a=arguments[s];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])}return i},t.apply(this,arguments)};Object.defineProperty(_w,"__esModule",{value:!0}),_w.BooleanClaim=void 0;var r=Kie(),n=function(i){e(a,i);function a(s){var o=i.call(this,s)||this;return o.validators=t(t({},o.validators),{isTrue:function(l){return o.validators.hasValue(!0,l)},isFalse:function(l){return o.validators.hasValue(!1,l)}}),o}return a}(r.PrimitiveClaim);return _w.BooleanClaim=n,_w}(function(e){var t=Ve&&Ve.__awaiter||function(S,_,C,A){function j(P){return P instanceof C?P:new C(function(O){O(P)})}return new(C||(C=Promise))(function(P,O){function D(H){try{B(A.next(H))}catch(z){O(z)}}function L(H){try{B(A.throw(H))}catch(z){O(z)}}function B(H){H.done?P(H.value):j(H.value).then(D,L)}B((A=A.apply(S,_||[])).next())})},r=Ve&&Ve.__generator||function(S,_){var C={label:0,sent:function(){if(P[0]&1)throw P[1];return P[1]},trys:[],ops:[]},A,j,P,O;return O={next:D(0),throw:D(1),return:D(2)},typeof Symbol=="function"&&(O[Symbol.iterator]=function(){return this}),O;function D(B){return function(H){return L([B,H])}}function L(B){if(A)throw new TypeError("Generator is already executing.");for(;C;)try{if(A=1,j&&(P=B[0]&2?j.return:B[0]?j.throw||((P=j.return)&&P.call(j),0):j.next)&&!(P=P.call(j,B[1])).done)return P;switch(j=0,P&&(B=[B[0]&2,P.value]),B[0]){case 0:case 1:P=B;break;case 4:return C.label++,{value:B[1],done:!1};case 5:C.label++,j=B[1],B=[0];continue;case 7:B=C.ops.pop(),C.trys.pop();continue;default:if(P=C.trys,!(P=P.length>0&&P[P.length-1])&&(B[0]===6||B[0]===2)){C=0;continue}if(B[0]===3&&(!P||B[1]>P[0]&&B[1]<P[3])){C.label=B[1];break}if(B[0]===6&&C.label<P[1]){C.label=P[1],P=B;break}if(P&&C.label<P[2]){C.label=P[2],C.ops.push(B);break}P[2]&&C.ops.pop(),C.trys.pop();continue}B=_.call(S,C)}catch(H){B=[6,H],j=0}finally{A=P=0}if(B[0]&5)throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.BooleanClaim=e.PrimitiveArrayClaim=e.PrimitiveClaim=e.getInvalidClaimsFromResponse=e.getClaimValue=e.validateClaims=e.signOut=e.addAxiosInterceptors=e.doesSessionExist=e.attemptRefreshingSession=e.getAccessToken=e.getAccessTokenPayloadSecurely=e.getUserId=e.init=void 0;var n=cb,i=o7,a=bf,s=fo,o=Dx,l=Su,c=Mx,d=Fx,f=iu,p=yf,m=function(){function S(){}S.init=function(C){o.default.init(C.cookieHandler),l.default.init(C.windowHandler),p.default.init(C.dateProvider),c.default.init(C.lockFactory,l.default.getReferenceOrThrow().windowHandler.localStorage);var A=(0,s.validateAndNormaliseInputOrThrowError)(C);C.enableDebugLogs!==void 0&&C.enableDebugLogs&&(0,f.enableLogging)();var j=new a.default((0,i.default)({onHandleEvent:A.onHandleEvent,preAPIHook:A.preAPIHook,postAPIHook:A.postAPIHook,sessionExpiredStatusCode:A.sessionExpiredStatusCode})).override(A.override.functions).build();n.default.init(A,j),S.axiosInterceptorQueue.forEach(function(P){P()}),S.axiosInterceptorQueue=[]},S.getUserId=function(C){return n.default.recipeImpl.getUserId({userContext:(0,s.getNormalisedUserContext)(C===void 0?void 0:C.userContext)})},S.getAccessTokenPayloadSecurely=function(C){return t(this,void 0,void 0,function(){return r(this,function(A){return[2,n.default.recipeImpl.getAccessTokenPayloadSecurely({userContext:(0,s.getNormalisedUserContext)(C===void 0?void 0:C.userContext)})]})})};var _;return _=S,S.axiosInterceptorQueue=[],S.attemptRefreshingSession=function(){return t(void 0,void 0,void 0,function(){return r(_,function(C){return[2,n.default.attemptRefreshingSession()]})})},S.doesSessionExist=function(C){return n.default.recipeImpl.doesSessionExist({userContext:(0,s.getNormalisedUserContext)(C===void 0?void 0:C.userContext)})},S.addAxiosInterceptors=function(C,A){n.default.initCalled?n.default.recipeImpl.addAxiosInterceptors({axiosInstance:C,userContext:(0,s.getNormalisedUserContext)(A)}):S.axiosInterceptorQueue.push(function(){n.default.recipeImpl.addAxiosInterceptors({axiosInstance:C,userContext:(0,s.getNormalisedUserContext)(A)})})},S.signOut=function(C){return n.default.recipeImpl.signOut({userContext:(0,s.getNormalisedUserContext)(C===void 0?void 0:C.userContext)})},S.getInvalidClaimsFromResponse=function(C){return t(this,void 0,void 0,function(){return r(this,function(A){return[2,n.default.recipeImpl.getInvalidClaimsFromResponse({response:C.response,userContext:(0,s.getNormalisedUserContext)(C.userContext)})]})})},S.getClaimValue=function(C){return t(this,void 0,void 0,function(){var A,j;return r(this,function(P){switch(P.label){case 0:return A=(0,s.getNormalisedUserContext)(C===void 0?void 0:C.userContext),[4,S.getAccessTokenPayloadSecurely({userContext:A})];case 1:return j=P.sent(),[2,C.claim.getValueFromPayload(j,A)]}})})},S.validateClaims=function(C,A){var j=(0,s.getNormalisedUserContext)(A),P=d.SessionClaimValidatorStore.getClaimValidatorsAddedByOtherRecipes(),O=n.default.recipeImpl.getGlobalClaimValidators({claimValidatorsAddedByOtherRecipes:P,userContext:j}),D=C!==void 0?C(O,j):O;return D.length===0?[]:n.default.recipeImpl.validateClaims({claimValidators:D,userContext:(0,s.getNormalisedUserContext)(A)})},S.getAccessToken=function(C){return t(void 0,void 0,void 0,function(){return r(_,function(A){switch(A.label){case 0:return[4,n.default.recipeImpl.doesSessionExist({userContext:(0,s.getNormalisedUserContext)(C===void 0?void 0:C.userContext)})];case 1:return A.sent()?[2,(0,n.getTokenForHeaderAuth)("access")]:[2,void 0]}})})},S}();e.default=m,e.init=m.init,e.getUserId=m.getUserId,e.getAccessTokenPayloadSecurely=m.getAccessTokenPayloadSecurely,e.getAccessToken=m.getAccessToken,e.attemptRefreshingSession=m.attemptRefreshingSession,e.doesSessionExist=m.doesSessionExist,e.addAxiosInterceptors=m.addAxiosInterceptors,e.signOut=m.signOut,e.validateClaims=m.validateClaims,e.getClaimValue=m.getClaimValue,e.getInvalidClaimsFromResponse=m.getInvalidClaimsFromResponse;var x=Kie();Object.defineProperty(e,"PrimitiveClaim",{enumerable:!0,get:function(){return x.PrimitiveClaim}});var y=dIe();Object.defineProperty(e,"PrimitiveArrayClaim",{enumerable:!0,get:function(){return y.PrimitiveArrayClaim}});var b=fIe();Object.defineProperty(e,"BooleanClaim",{enumerable:!0,get:function(){return b.BooleanClaim}})})(Wie);(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(Wie)})(s7);var jE={};Object.defineProperty(jE,"__esModule",{value:!0});jE.EMAILVERIFICATION_CLAIM_ID=void 0;jE.EMAILVERIFICATION_CLAIM_ID="st-ev";var hIe=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zc=Ve&&Ve.__assign||function(){return zc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},zc.apply(this,arguments)},y_=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},b_=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},tq=Ve&&Ve.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(ub,"__esModule",{value:!0});ub.Recipe=void 0;var pIe=c4,Mu=s7,kj=$r,mIe=jE,rq=[mIe.EMAILVERIFICATION_CLAIM_ID],Xie=function(e){hIe(t,e);function t(r){var n=e.call(this,r)||this;return n.getUserId=function(i){return Mu.default.getUserId({userContext:i.userContext})},n.getAccessToken=function(i){return y_(n,void 0,void 0,function(){return b_(this,function(a){return[2,Mu.default.getAccessToken({userContext:i.userContext})]})})},n.getAccessTokenPayloadSecurely=function(i){return y_(n,void 0,void 0,function(){return b_(this,function(a){return[2,Mu.default.getAccessTokenPayloadSecurely({userContext:i.userContext})]})})},n.doesSessionExist=function(i){return Mu.default.doesSessionExist({userContext:i.userContext})},n.signOut=function(i){return Mu.default.signOut({userContext:i.userContext})},n.attemptRefreshingSession=function(){return y_(n,void 0,void 0,function(){return b_(this,function(i){return[2,Mu.default.attemptRefreshingSession()]})})},n.validateClaims=function(i){return Mu.default.validateClaims(i.overrideGlobalClaimValidators,i.userContext)},Mu.default.init(zc(zc({},r),{override:{functions:function(i,a){var s;return a.override(function(o){return zc(zc({},o),{getGlobalClaimValidators:function(l){var c=o.getGlobalClaimValidators(l);return tq(tq([],c.filter(function(d){return rq.includes(d.id)}),!0),c.filter(function(d){return!rq.includes(d.id)}),!0)}})}),!((s=r.override)===null||s===void 0)&&s.functions&&a.override(r.override.functions),i}},preAPIHook:function(i){return y_(n,void 0,void 0,function(){var a,s;return b_(this,function(o){return a=new Headers(i.requestInit.headers),a.set("rid",r.recipeId),s=zc(zc({},i),{requestInit:zc(zc({},i.requestInit),{headers:a})}),r.preAPIHook===void 0?[2,s]:[2,r.preAPIHook(i)]})})},apiDomain:r.appInfo.apiDomain.getAsStringDangerous(),apiBasePath:r.appInfo.apiBasePath.getAsStringDangerous()})),n}return t.init=function(r){return function(n,i,a,s){return t.instance=new t(zc(zc({},(0,kj.applyPlugins)(t.RECIPE_ID,r,s??[])),{appInfo:n,recipeId:t.RECIPE_ID,enableDebugLogs:a})),t.instance}},t.prototype.getClaimValue=function(r){return Mu.default.getClaimValue(r)},t.prototype.getInvalidClaimsFromResponse=function(r){return Mu.default.getInvalidClaimsFromResponse(r)},t.addAxiosInterceptors=function(r,n){return Mu.default.addAxiosInterceptors(r,n)},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of Session found. Ensure that the 'Session.init' method is called within the 'SuperTokens.init' recipeList.";throw r=(0,kj.checkForSSRErrorAndAppendIfNeeded)(r),Error(r)}return t.instance},t.reset=function(){(0,kj.isTest)()&&(t.instance=void 0)},t.RECIPE_ID="session",t}(pIe.default);ub.Recipe=Xie;ub.default=Xie;(function(e){var t=Ve&&Ve.__awaiter||function(_,C,A,j){function P(O){return O instanceof A?O:new A(function(D){D(O)})}return new(A||(A=Promise))(function(O,D){function L(z){try{H(j.next(z))}catch(ie){D(ie)}}function B(z){try{H(j.throw(z))}catch(ie){D(ie)}}function H(z){z.done?O(z.value):P(z.value).then(L,B)}H((j=j.apply(_,C||[])).next())})},r=Ve&&Ve.__generator||function(_,C){var A={label:0,sent:function(){if(O[0]&1)throw O[1];return O[1]},trys:[],ops:[]},j,P,O,D;return D={next:L(0),throw:L(1),return:L(2)},typeof Symbol=="function"&&(D[Symbol.iterator]=function(){return this}),D;function L(H){return function(z){return B([H,z])}}function B(H){if(j)throw new TypeError("Generator is already executing.");for(;A;)try{if(j=1,P&&(O=H[0]&2?P.return:H[0]?P.throw||((O=P.return)&&O.call(P),0):P.next)&&!(O=O.call(P,H[1])).done)return O;switch(P=0,O&&(H=[H[0]&2,O.value]),H[0]){case 0:case 1:O=H;break;case 4:return A.label++,{value:H[1],done:!1};case 5:A.label++,P=H[1],H=[0];continue;case 7:H=A.ops.pop(),A.trys.pop();continue;default:if(O=A.trys,!(O=O.length>0&&O[O.length-1])&&(H[0]===6||H[0]===2)){A=0;continue}if(H[0]===3&&(!O||H[1]>O[0]&&H[1]<O[3])){A.label=H[1];break}if(H[0]===6&&A.label<O[1]){A.label=O[1],O=H;break}if(O&&A.label<O[2]){A.label=O[2],A.ops.push(H);break}O[2]&&A.ops.pop(),A.trys.pop();continue}H=C.call(_,A)}catch(z){H=[6,z],P=0}finally{j=O=0}if(H[0]&5)throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.getInvalidClaimsFromResponse=e.getClaimValue=e.validateClaims=e.signOut=e.addAxiosInterceptors=e.doesSessionExist=e.attemptRefreshingSession=e.getAccessToken=e.getAccessTokenPayloadSecurely=e.getUserId=e.init=e.BooleanClaim=e.PrimitiveArrayClaim=e.PrimitiveClaim=void 0;var n=$r,i=ub,a=function(){function _(){}return _.init=function(C){return i.default.init(C)},_.getUserId=function(C){return i.default.getInstanceOrThrow().getUserId({userContext:(0,n.getNormalisedUserContext)(C==null?void 0:C.userContext)})},_.getAccessToken=function(C){return i.default.getInstanceOrThrow().getAccessToken({userContext:(0,n.getNormalisedUserContext)(C==null?void 0:C.userContext)})},_.getAccessTokenPayloadSecurely=function(C){return t(this,void 0,void 0,function(){return r(this,function(A){return[2,i.default.getInstanceOrThrow().getAccessTokenPayloadSecurely({userContext:(0,n.getNormalisedUserContext)(C==null?void 0:C.userContext)})]})})},_.attemptRefreshingSession=function(){return t(this,void 0,void 0,function(){return r(this,function(C){return[2,i.default.getInstanceOrThrow().attemptRefreshingSession()]})})},_.doesSessionExist=function(C){return i.default.getInstanceOrThrow().doesSessionExist({userContext:(0,n.getNormalisedUserContext)(C==null?void 0:C.userContext)})},_.addAxiosInterceptors=function(C,A){return i.default.addAxiosInterceptors(C,(0,n.getNormalisedUserContext)(A))},_.signOut=function(C){return i.default.getInstanceOrThrow().signOut({userContext:(0,n.getNormalisedUserContext)(C==null?void 0:C.userContext)})},_.getClaimValue=function(C){return i.default.getInstanceOrThrow().getClaimValue({claim:C.claim,userContext:(0,n.getNormalisedUserContext)(C==null?void 0:C.userContext)})},_.validateClaims=function(C){return i.default.getInstanceOrThrow().validateClaims({overrideGlobalClaimValidators:C==null?void 0:C.overrideGlobalClaimValidators,userContext:(0,n.getNormalisedUserContext)(C==null?void 0:C.userContext)})},_.getInvalidClaimsFromResponse=function(C){return i.default.getInstanceOrThrow().getInvalidClaimsFromResponse({response:C.response,userContext:(0,n.getNormalisedUserContext)(C==null?void 0:C.userContext)})},_}();e.default=a;var s=a.init;e.init=s;var o=a.getUserId;e.getUserId=o;var l=a.getAccessTokenPayloadSecurely;e.getAccessTokenPayloadSecurely=l;var c=a.getAccessToken;e.getAccessToken=c;var d=a.attemptRefreshingSession;e.attemptRefreshingSession=d;var f=a.doesSessionExist;e.doesSessionExist=f;var p=a.addAxiosInterceptors;e.addAxiosInterceptors=p;var m=a.signOut;e.signOut=m;var x=a.validateClaims;e.validateClaims=x;var y=a.getClaimValue;e.getClaimValue=y;var b=a.getInvalidClaimsFromResponse;e.getInvalidClaimsFromResponse=b;var S=s7;Object.defineProperty(e,"PrimitiveClaim",{enumerable:!0,get:function(){return S.PrimitiveClaim}}),Object.defineProperty(e,"PrimitiveArrayClaim",{enumerable:!0,get:function(){return S.PrimitiveArrayClaim}}),Object.defineProperty(e,"BooleanClaim",{enumerable:!0,get:function(){return S.BooleanClaim}})})(i4);(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(i4)})(e7);var d7={},Ux={},Ua={},Yie={},DE={},f7={},$x={};Object.defineProperty($x,"__esModule",{value:!0});$x.PostSuperTokensInitCallbacks=void 0;var gIe=function(){function e(){}return e.addPostInitCallback=function(t){e.postInitCallbacks.push(t)},e.runPostInitCallbacks=function(){for(var t=0,r=e.postInitCallbacks;t<r.length;t++){var n=r[t];n()}},e.postInitCallbacks=[],e}();$x.PostSuperTokensInitCallbacks=gIe;var zx={},h4={},Hx={},ME={},nq=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},iq=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(ME,"__esModule",{value:!0});ME.normaliseRecipeModuleConfig=void 0;function xIe(e){var t=this,r=e.preAPIHook;r===void 0&&(r=function(i){return nq(t,void 0,void 0,function(){return iq(this,function(a){return[2,i]})})});var n=e.postAPIHook;return n===void 0&&(n=function(){return nq(t,void 0,void 0,function(){return iq(this,function(i){return[2]})})}),{recipeId:e.recipeId,appInfo:e.appInfo,clientType:e.clientType,preAPIHook:r,postAPIHook:n}}ME.normaliseRecipeModuleConfig=xIe;Object.defineProperty(Hx,"__esModule",{value:!0});Hx.normaliseAuthRecipe=void 0;var vIe=ME;function yIe(e){return(0,vIe.normaliseRecipeModuleConfig)(e)}Hx.normaliseAuthRecipe=yIe;var _2=Ve&&Ve.__assign||function(){return _2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},_2.apply(this,arguments)};Object.defineProperty(h4,"__esModule",{value:!0});h4.normaliseUserInput=void 0;var bIe=Hx;function wIe(e){var t=_2({functions:function(r){return r}},e.override);return _2(_2({},(0,bIe.normaliseAuthRecipe)(e)),{override:t})}h4.normaliseUserInput=wIe;var FE={},Wx={},nx={};Object.defineProperty(nx,"__esModule",{value:!0});nx.supported_fdi=nx.package_version=void 0;nx.package_version="0.16.0";nx.supported_fdi=["3.1","4.0","4.1","4.2"];var ls=Ve&&Ve.__assign||function(){return ls=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ls.apply(this,arguments)},qf=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},Gf=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Wx,"__esModule",{value:!0});var SIe=ob,EIe=nx,CIe=sb,kIe=function(){function e(r,n){var i=this;this.recipeId=r,this.appInfo=n,this.getPath=function(a){for(var s,o,l=typeof a=="string"?a:a.path,c=typeof a=="string"?{}:(s=a.pathParams)!==null&&s!==void 0?s:{},d=typeof a=="string"?{}:(o=a.queryParams)!==null&&o!==void 0?o:{},f=String(l),p=0,m=Object.entries(c);p<m.length;p++){var x=m[p],y=x[0],b=x[1];f=f.replace(new RegExp("<".concat(y,">"),"g"),String(b))}f=new SIe.default(f).getAsStringDangerous(),f.startsWith("/public/")&&(f=f.substring(7));var S=new URLSearchParams(d),_=S.toString();return _.length>0&&(f+="?"+S.toString()),f},this.safelyStringifyBody=function(a){return a?JSON.stringify(a):"{}"},this.get=function(a,s,o,l){return qf(i,void 0,void 0,function(){var c,d,f;return Gf(this,function(p){switch(p.label){case 0:return c=this.getFullUrl(a),[4,this.fetch(c,ls(ls({method:"GET"},s),{body:void 0}),o,l)];case 1:return d=p.sent(),[4,this.getResponseJsonOrThrowGeneralError(d)];case 2:return f=p.sent(),[2,{jsonBody:f,fetchResponse:d}]}})})},this.post=function(a,s,o,l){return qf(i,void 0,void 0,function(){var c,d;return Gf(this,function(f){switch(f.label){case 0:return[4,this.fetch(this.getFullUrl(a),ls(ls({method:"POST"},s),{body:this.safelyStringifyBody(s.body)}),o,l)];case 1:return c=f.sent(),[4,this.getResponseJsonOrThrowGeneralError(c)];case 2:return d=f.sent(),[2,{jsonBody:d,fetchResponse:c}]}})})},this.delete=function(a,s,o,l){return qf(i,void 0,void 0,function(){var c,d;return Gf(this,function(f){switch(f.label){case 0:return[4,this.fetch(this.getFullUrl(a),ls(ls({method:"DELETE"},s),{body:this.safelyStringifyBody(s.body)}),o,l)];case 1:return c=f.sent(),[4,this.getResponseJsonOrThrowGeneralError(c)];case 2:return d=f.sent(),[2,{jsonBody:d,fetchResponse:c}]}})})},this.put=function(a,s,o,l){return qf(i,void 0,void 0,function(){var c,d;return Gf(this,function(f){switch(f.label){case 0:return[4,this.fetch(this.getFullUrl(a),ls(ls({method:"PUT"},s),{body:this.safelyStringifyBody(s.body)}),o,l)];case 1:return c=f.sent(),[4,this.getResponseJsonOrThrowGeneralError(c)];case 2:return d=f.sent(),[2,{jsonBody:d,fetchResponse:c}]}})})},this.fetch=function(a,s,o,l){return qf(i,void 0,void 0,function(){var c,d,f,p,m,x;return Gf(this,function(y){switch(y.label){case 0:return s===void 0?c={}:c=s.headers,[4,this.callPreAPIHook({preAPIHook:o,url:a,requestInit:ls(ls({},s),{headers:ls(ls({},c),{"fdi-version":EIe.supported_fdi.join(","),"Content-Type":"application/json",rid:this.recipeId})})})];case 1:return d=y.sent(),f=d.requestInit,p=d.url,[4,fetch(p,f)];case 2:if(m=y.sent(),m.status>=300)throw m;return l===void 0?[3,4]:(x=m.clone(),[4,l({requestInit:f,url:a,fetchResponse:x})]);case 3:y.sent(),y.label=4;case 4:return[2,m]}})})},this.callPreAPIHook=function(a){return qf(i,void 0,void 0,function(){var s;return Gf(this,function(o){switch(o.label){case 0:return a.preAPIHook===void 0?[2,{url:a.url,requestInit:a.requestInit}]:[4,a.preAPIHook({url:a.url,requestInit:a.requestInit})];case 1:return s=o.sent(),[2,s]}})})},this.getFullUrl=function(a){var s=i.appInfo.apiBasePath.getAsStringDangerous(),o=i.getPath(a);return"".concat(i.appInfo.apiDomain.getAsStringDangerous()).concat(s).concat(o)},this.getResponseJsonOrThrowGeneralError=function(a){return qf(i,void 0,void 0,function(){var s,o;return Gf(this,function(l){switch(l.label){case 0:return[4,a.clone().json()];case 1:if(s=l.sent(),s.status==="GENERAL_ERROR")throw o=s.message===void 0?"No Error Message Provided":s.message,new CIe.default(o);return[2,s]}})})}}var t;return t=e,e.preparePreAPIHook=function(r){var n=r.recipePreAPIHook,i=r.action,a=r.options,s=r.userContext;return function(o){return qf(void 0,void 0,void 0,function(){var l;return Gf(t,function(c){switch(c.label){case 0:return[4,n(ls(ls({},o),{action:i,userContext:s}))];case 1:return l=c.sent(),a===void 0||a.preAPIHook===void 0?[2,l]:[2,a.preAPIHook({url:l.url,requestInit:l.requestInit,userContext:s})]}})})}},e.preparePostAPIHook=function(r){var n=r.recipePostAPIHook,i=r.action,a=r.userContext;return function(s){return qf(void 0,void 0,void 0,function(){return Gf(t,function(o){switch(o.label){case 0:return[4,n(ls(ls({},s),{userContext:a,action:i}))];case 1:return o.sent(),[2]}})})}},e}();Wx.default=kIe;var _Ie=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},NIe=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(FE,"__esModule",{value:!0});FE.getRecipeImplementation=void 0;var _j=Wx,AIe=$r;function Qie(e){var t=new _j.default(e.recipeId,e.appInfo);return{getTenantId:function(){var r=(0,AIe.getQueryParams)("tenantId");if((r==null?void 0:r.trim())!=="")return r},getLoginMethods:function(r){var n=r.tenantId,i=r.options,a=r.userContext;return _Ie(this,void 0,void 0,function(){var s,o,l,c,d;return NIe(this,function(f){switch(f.label){case 0:return s={},e.clientType!==void 0&&(s.clientType=e.clientType),[4,t.get({path:"/<tenantId>/loginmethods",pathParams:{tenantId:n||"public"},queryParams:s},{},_j.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"GET_LOGIN_METHODS",options:i,userContext:a}),_j.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"GET_LOGIN_METHODS",userContext:a}))];case 1:return o=f.sent(),l=o.jsonBody,c=o.fetchResponse,l.firstFactors===void 0?(d=[],l.emailPassword.enabled&&d.push("emailpassword"),l.thirdParty.enabled&&d.push("thirdparty"),l.passwordless.enabled&&(d.push("otp-email"),d.push("otp-phone"),d.push("link-email"),d.push("link-phone"))):d=l.firstFactors,[2,{status:"OK",thirdParty:{providers:l.thirdParty.providers},firstFactors:d,fetchResponse:c}]}})})}}}FE.default=Qie;FE.getRecipeImplementation=Qie;var db={},TIe=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),IIe=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},OIe=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(db,"__esModule",{value:!0});var PIe=c4,RIe=ub,jIe=function(e){TIe(t,e);function t(r){var n=e.call(this,r)||this;return n.signOut=function(i){return IIe(n,void 0,void 0,function(){return OIe(this,function(a){switch(a.label){case 0:return[4,RIe.default.getInstanceOrThrow().signOut({userContext:i.userContext})];case 1:return[2,a.sent()]}})})},n}return t}(PIe.default);db.default=jIe;var DIe=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),KA=Ve&&Ve.__assign||function(){return KA=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},KA.apply(this,arguments)};Object.defineProperty(zx,"__esModule",{value:!0});zx.Recipe=void 0;var MIe=h4,FIe=bf,LIe=FE,Nj=$r,BIe=db,Jie=function(e){DIe(t,e);function t(r){var n=e.call(this,(0,MIe.normaliseUserInput)(r))||this,i=new FIe.default((0,LIe.default)({recipeId:n.config.recipeId,appInfo:n.config.appInfo,clientType:n.config.clientType,preAPIHook:n.config.preAPIHook,postAPIHook:n.config.postAPIHook}));return n.recipeImplementation=i.override(n.config.override.functions).build(),n}return t.init=function(r){return function(n,i,a,s){return t.instance=new t(KA(KA({},(0,Nj.applyPlugins)(t.RECIPE_ID,r,s??[])),{recipeId:t.RECIPE_ID,appInfo:n,clientType:i})),t.instance}},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of Multitenancy found. Ensure that 'SuperTokens.init' method has been called.";throw r=(0,Nj.checkForSSRErrorAndAppendIfNeeded)(r),Error(r)}return t.instance},t.reset=function(){(0,Nj.isTest)()&&(t.instance=void 0)},t.RECIPE_ID="multitenancy",t}(BIe.default);zx.Recipe=Jie;zx.default=Jie;var Zie={},h7={};(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(yf)})(h7);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DateProviderReference=void 0;var t=h7;Object.defineProperty(e,"DateProviderReference",{enumerable:!0,get:function(){return t.DateProviderReference}})})(Zie);var p4={};Object.defineProperty(p4,"__esModule",{value:!0});p4.isVersionCompatible=void 0;var Aj=function(e){var t=e.match(/^(\d+)\.(\d+)\.(\d+)(?:-(.+))?$/);if(!t)throw new Error("Invalid version format: ".concat(e));return{major:parseInt(t[1]),minor:parseInt(t[2]),patch:parseInt(t[3]),prerelease:t[4]}},aq=function(e,t){return e.major!==t.major?e.major-t.major:e.minor!==t.minor?e.minor-t.minor:e.patch!==t.patch?e.patch-t.patch:e.prerelease&&!t.prerelease?-1:!e.prerelease&&t.prerelease?1:e.prerelease&&t.prerelease?e.prerelease.localeCompare(t.prerelease):0},UIe=function(e,t){var r=Aj(e);if(t===e)return!0;var n=t.match(/^([<>=~^]+)\s*(.+)$/);if(n){var i=n[1],a=n[2],s=Aj(a),o=aq(r,s);switch(i){case">=":return o>=0;case">":return o>0;case"<=":return o<=0;case"<":return o<0;case"=":case"==":return o===0;case"~":return r.major===s.major&&r.minor===s.minor&&r.patch>=s.patch;case"^":return s.major===0?r.major===0&&r.minor===s.minor&&r.patch>=s.patch:r.major===s.major&&r.minor>=s.minor;default:return!1}}var l=t.match(/^(\d+)\.(\d+)\.x$/);if(l)return r.major===parseInt(l[1],10)&&r.minor===parseInt(l[2],10);var c=t.match(/^(\d+)\.x$/);if(c)return r.major===parseInt(c[1],10);var d=Aj(t);return aq(r,d)===0},$Ie=function(e,t){for(var r=Array.isArray(t)?t:[t],n=0,i=r;n<i.length;n++){var a=i[n];if(UIe(e,a))return!0}return!1};p4.isVersionCompatible=$Ie;var Fd=Ve&&Ve.__assign||function(){return Fd=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Fd.apply(this,arguments)},zIe=Ve&&Ve.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};Object.defineProperty(f7,"__esModule",{value:!0});var Op=$r,HIe=JL,WIe=n4,sq=$x,Tj=zx,VIe=Zie,w_=nx,qIe=p4,GIe=function(){function e(t){var r=this,n;if(this.recipeList=[],this.pluginList=[],this.appInfo=(0,Op.normaliseInputAppInfoOrThrowError)(t.appInfo),t.recipeList===void 0||t.recipeList.length===0)throw new Error("Please provide at least one recipe to the supertokens.init function call. See https://supertokens.io/docs/emailpassword/quick-setup/frontend");var i=[];if(!((n=t.experimental)===null||n===void 0)&&n.plugins)for(var a=0,s=t.experimental.plugins;a<s.length;a++){var o=s[a];if(o.compatibleWebJSSDKVersions){var l=(0,qIe.isVersionCompatible)(w_.package_version,o.compatibleWebJSSDKVersions);if(!l)throw new Error("Incompatible SDK version for plugin ".concat(o.id,'. Version "').concat(w_.package_version,'" not found in compatible versions: ').concat(JSON.stringify(o.compatibleWebJSSDKVersions)))}if(o.dependencies){var c=o.dependencies((0,Op.getPublicConfig)(Fd(Fd({},t),{appInfo:this.appInfo})),i.map(Op.getPublicPlugin),w_.package_version);if(c.status==="ERROR")throw new Error(c.message);c.pluginsToAdd&&i.push.apply(i,c.pluginsToAdd)}i.push(o)}var d=i.filter(function(S,_){return i.some(function(C,A){return C.id===S.id&&A!==_})});if(d.length>0)throw new Error("Duplicate plugin IDs: ".concat(d.map(function(S){return S.id}).join(", ")));this.pluginList=i.map(Op.getPublicPlugin);for(var f=function(S){var _=i[S];if(_.config){var C=_.config((0,Op.getPublicConfig)(Fd(Fd({},t),{appInfo:p.appInfo})))||{};C.appInfo;var A=zIe(C,["appInfo"]);t=Fd(Fd({},t),A)}var j=i[S].init;j&&sq.PostSuperTokensInitCallbacks.addPostInitCallback(function(){j((0,Op.getPublicConfig)(Fd(Fd({},t),{appInfo:r.appInfo})),r.pluginList,w_.package_version),r.pluginList[S].initialized=!0})},p=this,m=0;m<this.pluginList.length;m+=1)f(m);var x=i.filter(function(S){return S.overrideMap!==void 0}).map(function(S){return S.overrideMap}),y=!1;t.enableDebugLogs!==void 0&&(y=t.enableDebugLogs);var b=!1;this.recipeList=t.recipeList.map(function(S){var _=S(r.appInfo,t.clientType,y,x);return _.config.recipeId===Tj.Recipe.RECIPE_ID&&(b=!0),_}),b||this.recipeList.push(Tj.Recipe.init()(this.appInfo,t.clientType,y,x))}return e.init=function(t){if(HIe.CookieHandlerReference.init(t.cookieHandler),WIe.WindowHandlerReference.init(t.windowHandler),VIe.DateProviderReference.init(t.dateProvider),e.instance!==void 0){console.warn("SuperTokens was already initialized");return}e.instance=new e(t),sq.PostSuperTokensInitCallbacks.runPostInitCallbacks()},e.getInstanceOrThrow=function(){if(e.instance===void 0){var t="SuperTokens must be initialized before calling this method.";throw t=(0,Op.checkForSSRErrorAndAppendIfNeeded)(t),new Error(t)}return e.instance},e.reset=function(){if(!(0,Op.isTest)()){console.warn("Calling reset() is only supported during testing");return}Tj.Recipe.reset(),e.instance=void 0},e}();f7.default=GIe;Object.defineProperty(DE,"__esModule",{value:!0});DE.init=void 0;var KIe=f7,eae=function(){function e(){}return e.init=function(t){KIe.default.init(t)},e}();DE.default=eae;DE.init=eae.init;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(DE)})(Yie);var m4={};(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t($x)})(m4);var tae={},rae={},my={},XIe=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),XA=Ve&&Ve.__assign||function(){return XA=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},XA.apply(this,arguments)},oq=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},lq=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(my,"__esModule",{value:!0});my.AllowedDomainsClaim=my.AllowedDomainsClaimClass=void 0;var YIe=ZL,QIe=i4,nae=function(e){XIe(t,e);function t(){var r=e.call(this,{id:"st-t-dmns",refresh:function(){return oq(r,void 0,void 0,function(){return lq(this,function(n){return[2]})})},defaultMaxAgeInSeconds:Number.MAX_SAFE_INTEGER})||this;return r.validators=XA(XA({},r.validators),{hasAccessToCurrentDomain:function(){return{id:r.id,refresh:r.refresh,shouldRefresh:function(){return!1},validate:function(n,i){return oq(r,void 0,void 0,function(){var a,s;return lq(this,function(o){return a=YIe.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHostName(),s=this.validators.includes(a,Number.MAX_SAFE_INTEGER,this.id),[2,s.validate(n,i)]})})}}}}),r}return t}(QIe.PrimitiveArrayClaim);my.AllowedDomainsClaimClass=nae;my.AllowedDomainsClaim=new nae;(function(e){var t=Ve&&Ve.__assign||function(){return t=Object.assign||function(c){for(var d,f=1,p=arguments.length;f<p;f++){d=arguments[f];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(c[m]=d[m])}return c},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AllowedDomainsClaim=e.getTenantId=e.getLoginMethods=e.init=void 0;var r=$r,n=my;Object.defineProperty(e,"AllowedDomainsClaim",{enumerable:!0,get:function(){return n.AllowedDomainsClaim}});var i=zx,a=function(){function c(){}return c.init=function(d){return i.default.init(d)},c.getLoginMethods=function(d){return i.default.getInstanceOrThrow().recipeImplementation.getLoginMethods(t(t({},d),{userContext:(0,r.getNormalisedUserContext)(d==null?void 0:d.userContext)}))},c.getTenantId=function(d){return i.default.getInstanceOrThrow().recipeImplementation.getTenantId(t(t({},d),{userContext:(0,r.getNormalisedUserContext)(d==null?void 0:d.userContext)}))},c.AllowedDomainsClaim=n.AllowedDomainsClaim,c}();e.default=a;var s=a.init;e.init=s;var o=a.getLoginMethods;e.getLoginMethods=o;var l=a.getTenantId;e.getTenantId=l})(rae);(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(rae)})(tae);var g4={};(function(e){function t(n){for(var i in n)e.hasOwnProperty(i)||(e[i]=n[i])}e.__esModule=!0;let r=$r;r.default!==void 0?t(r):t({default:r,...r})})(g4);var Mt=zi,JIe=Yie,ZIe=QL,cq=m4,eOe=lb,tOe=tae,rOe=g4;function iae(e){return e&&e.__esModule?e:{default:e}}var nOe=iae(JIe),Ij=iae(tOe),aae=function(){function e(t){this.config=t}return e}();function sae(e){var t=this;e===void 0&&(e={});var r=e.onHandleEvent,n=e.getRedirectionURL,i=e.preAPIHook,a=e.postAPIHook;r===void 0&&(r=function(o){}),n===void 0&&(n=function(o){return Mt.__awaiter(t,void 0,void 0,function(){return Mt.__generator(this,function(l){return[2,void 0]})})}),i===void 0&&(i=function(o){return Mt.__awaiter(t,void 0,void 0,function(){return Mt.__generator(this,function(l){return[2,o]})})}),a===void 0&&(a=function(){return Mt.__awaiter(t,void 0,void 0,function(){return Mt.__generator(this,function(o){return[2]})})});var s=e.style===void 0?"":e.style;return Mt.__assign(Mt.__assign({},e),{getRedirectionURL:n,onHandleEvent:r,preAPIHook:i,postAPIHook:a,recipeRootStyle:s})}function iOe(e){return Mt.__assign(Mt.__assign({},sae(e)),{override:Mt.__assign({functions:function(t){return t}},e==null?void 0:e.override)})}function aOe(e,t){return e.firstFactors.some(function(r){return t.some(function(n){return n.firstFactorIds.includes(r)})})}var q6=function(e){Mt.__extends(t,e);function t(r,n){n===void 0&&(n=Ij.default);var i=e.call(this,r)||this;return i.webJSRecipe=n,i.recipeID=t.RECIPE_ID,i.dynamicLoginMethodsCache={},i}return t.prototype.getCurrentDynamicLoginMethods=function(r){var n;return Mt.__awaiter(this,void 0,void 0,function(){var i,a,s;return Mt.__generator(this,function(o){switch(o.label){case 0:return YA.usesDynamicLoginMethods===!1?[2,void 0]:(i=rOe.getNormalisedUserContext(r.userContext),[4,t.getInstanceOrThrow().webJSRecipe.getTenantId()]);case 1:return a=(n=o.sent())!==null&&n!==void 0?n:"public",this.dynamicLoginMethodsCache[a]===void 0&&(this.dynamicLoginMethodsCache[a]=t.getDynamicLoginMethods({tenantId:a,userContext:i})),[4,this.dynamicLoginMethodsCache[a]];case 2:if(s=o.sent(),!aOe(s,YA.getInstanceOrThrow().recipeList.filter(function(l){return"firstFactorIds"in l})))throw new Error("Initialized recipes have no overlap with core recipes or could not load login methods");return[2,s]}})})},t.getDynamicLoginMethods=function(r){return Mt.__awaiter(this,void 0,void 0,function(){var n,i,a;return Mt.__generator(this,function(s){switch(s.label){case 0:return[4,Ij.default.getLoginMethods(r)];case 1:return n=s.sent(),i=n.thirdParty,a=n.firstFactors,[2,{thirdparty:i,firstFactors:a}]}})})},t.init=function(r){var n=iOe(r);return{recipeID:t.RECIPE_ID,authReact:function(i){return t.instance=new t(Mt.__assign(Mt.__assign({},n),{appInfo:i,recipeId:t.RECIPE_ID})),t.instance},webJS:Ij.default.init(Mt.__assign({},n))}},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of Multitenancy found. Make sure to call the Multitenancy.init method.See https://supertokens.io/docs/multitenancy/quick-setup/frontend";throw typeof window>"u"&&(r=r+Mt.SSR_ERROR),Error(r)}return t.instance},t.reset=function(){Mt.isTest()&&(t.instance=void 0)},t.RECIPE_ID="multitenancy",t}(aae),oae={en:{AUTH_PAGE_HEADER_TITLE_SIGN_IN_AND_UP:"Sign Up / Sign In",AUTH_PAGE_HEADER_TITLE_SIGN_IN:"Sign In",AUTH_PAGE_HEADER_TITLE_SIGN_UP:"Sign Up",AUTH_PAGE_HEADER_TITLE_SIGN_IN_UP_TO_APP:" to continue to ",AUTH_PAGE_HEADER_SUBTITLE_SIGN_IN_START:"Not registered yet?",AUTH_PAGE_HEADER_SUBTITLE_SIGN_IN_SIGN_UP_LINK:"Sign Up",AUTH_PAGE_HEADER_SUBTITLE_SIGN_IN_END:"",AUTH_PAGE_HEADER_SUBTITLE_SIGN_UP_START:"Already have an account?",AUTH_PAGE_HEADER_SUBTITLE_SIGN_UP_SIGN_IN_LINK:"Sign In",AUTH_PAGE_HEADER_SUBTITLE_SIGN_UP_END:"",AUTH_PAGE_FOOTER_START:"By continuing, you agree to our ",AUTH_PAGE_FOOTER_TOS:"Terms of Service",AUTH_PAGE_FOOTER_AND:" and ",AUTH_PAGE_FOOTER_PP:"Privacy Policy",AUTH_PAGE_FOOTER_END:"",DIVIDER_OR:"or",BRANDING_POWERED_BY_START:"Powered by ",BRANDING_POWERED_BY_END:"",SOMETHING_WENT_WRONG_ERROR:"Something went wrong. Please try again.",SOMETHING_WENT_WRONG_ERROR_RELOAD:"Something went wrong. Please try again later or reload the page."}},sOe=function(){function e(){this.handlers=new Map}return e.prototype.emit=function(t,r){for(var n=this.handlers.get(t)||[],i=0,a=n;i<a.length;i++){var s=a[i];s(t,r)}},e.prototype.on=function(t,r){var n=this.handlers.get(t)||[];this.handlers.set(t,n.concat(r))},e.prototype.off=function(t,r){var n=this.handlers.get(t)||[];this.handlers.set(t,n.filter(function(i){return i!==r}))},e}(),lae="sCurrLanguage";function oOe(e,t){return Mt.__awaiter(this,void 0,void 0,function(){return Mt.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Mt.setFrontendCookie(lae,e,t)];case 1:return r.sent(),[3,3];case 2:return r.sent(),[3,3];case 3:return[2]}})})}function cae(){return Mt.__awaiter(this,void 0,void 0,function(){return Mt.__generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Mt.getCookieValue(lae)];case 1:return[2,e.sent()];case 2:return e.sent(),[2,null];case 3:return[2]}})})}var lOe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=YA.getInstanceOrThrow().languageTranslations,n=r.translationEventSource,i=r.userTranslationFunc,a=r.defaultLanguage,s=r.userTranslationStore,o=Mt.__spreadArray(Mt.__spreadArray([oae],e,!0),[s],!1).reduce(Mt.mergeObjects,{}),l=function(){return o},c=function(b){o=b},d=a,f=function(){return d},p=function(b){d=b},m=function(b,S){p(S)},x=function(b,S){c(Mt.mergeObjects(o,S))};n.off("LanguageChange",m),n.off("TranslationLoaded",x),n.on("LanguageChange",m),n.on("TranslationLoaded",x),cae().then(function(b){b&&p(b)});var y=function(b,S){if(S===void 0&&(S={}),i)return i(b);if(f()!==void 0){var _=l()[f()]&&l()[f()][b],C=l()[a]&&l()[a][b];return _===void 0?C!==void 0?C:b:_.replace(/{(\w+)}/g,function(A,j){return S[j]||A})}throw new Error("Should never come here")};return y},Oj=function(e){var t=e.match(/^(\d+)\.(\d+)\.(\d+)(?:-(.+))?$/);if(!t)throw new Error("Invalid version format: ".concat(e));return{major:parseInt(t[1]),minor:parseInt(t[2]),patch:parseInt(t[3]),prerelease:t[4]}},uq=function(e,t){return e.major!==t.major?e.major-t.major:e.minor!==t.minor?e.minor-t.minor:e.patch!==t.patch?e.patch-t.patch:e.prerelease&&!t.prerelease?-1:!e.prerelease&&t.prerelease?1:e.prerelease&&t.prerelease?e.prerelease.localeCompare(t.prerelease):0},cOe=function(e,t){var r=Oj(e);if(t===e)return!0;var n=t.match(/^([<>=~^]+)\s*(.+)$/);if(n){var i=n[1],a=n[2],s=Oj(a),o=uq(r,s);switch(i){case">=":return o>=0;case">":return o>0;case"<=":return o<=0;case"<":return o<0;case"=":case"==":return o===0;case"~":return r.major===s.major&&r.minor===s.minor&&r.patch>=s.patch;case"^":return s.major===0?r.major===0&&r.minor===s.minor&&r.patch>=s.patch:r.major===s.major&&r.minor>=s.minor;default:return!1}}var l=t.match(/^(\d+)\.(\d+)\.x$/);if(l)return r.major===parseInt(l[1],10)&&r.minor===parseInt(l[2],10);var c=t.match(/^(\d+)\.x$/);if(c)return r.major===parseInt(c[1],10);var d=Oj(t);return uq(r,d)===0},uOe=function(e,t){for(var r=Array.isArray(t)?t:[t],n=0,i=r;n<i.length;n++){var a=i[n];if(cOe(e,a))return!0}return!1},YA=function(){function e(t,r){var n=this,i,a,s,o,l,c,d,f;if(this.pluginList=[],this.recipeList=[],this.componentOverrides={},this.pluginRouteHandlers=[],this.changeLanguage=function(D){return Mt.__awaiter(n,void 0,void 0,function(){return Mt.__generator(this,function(L){switch(L.label){case 0:return[4,oOe(D,this.languageTranslations.currentLanguageCookieScope)];case 1:return L.sent(),this.languageTranslations.translationEventSource.emit("LanguageChange",D),[2]}})})},this.redirectToAuth=function(D){return Mt.__awaiter(n,void 0,void 0,function(){var L,B;return Mt.__generator(this,function(H){switch(H.label){case 0:return L=D.queryParams===void 0?{}:D.queryParams,D.show!==void 0&&(L.show=D.show),D.redirectBack===!0&&(L.redirectToPath=Mt.getCurrentNormalisedUrlPathWithQueryParamsAndFragments()),[4,this.getRedirectUrl({action:"TO_AUTH",showSignIn:D.show==="signin",tenantIdFromQueryParams:Mt.getTenantIdFromQueryParams()},D.userContext)];case 1:return B=H.sent(),B===null?(Mt.logDebugMessage("Skipping redirection because the user override returned null"),[2]):(B=Mt.appendQueryParamsToURL(B,L),[2,this.redirectToUrl(B,D.navigate)])}})})},this.redirectToUrl=function(D,L){return Mt.__awaiter(n,void 0,void 0,function(){return Mt.__generator(this,function(B){return dOe(this.appInfo,D,L),[2]})})},this.redirect=function(D,L,B,H){return Mt.__awaiter(n,void 0,void 0,function(){var z;return Mt.__generator(this,function(ie){switch(ie.label){case 0:return[4,this.getRedirectUrl(D,Mt.getNormalisedUserContext(H))];case 1:return z=ie.sent(),z===null?(Mt.logDebugMessage("Skipping redirection because the user override returned null for context ".concat(JSON.stringify(D,null,2))),[2]):(z=Mt.appendQueryParamsToURL(z,B),[2,e.getInstanceOrThrow().redirectToUrl(z,L)])}})})},this.appInfo=Mt.normaliseInputAppInfoOrThrowError(t.appInfo),t.recipeList===void 0||t.recipeList.length===0)throw new Error("Please provide at least one recipe to the supertokens.init function call. See https://supertokens.io/docs/emailpassword/quick-setup/frontend");this.componentOverrides={};for(var p=0,m=r;p<m.length;p++){var x=m[p];if(x.overrideMap!==void 0)for(var y=0,b=Object.keys(x.overrideMap);y<b.length;y++){var S=b[y];this.componentOverrides[S]=Mt.__assign(Mt.__assign({},this.componentOverrides[S]),(a=(i=x.overrideMap[S])===null||i===void 0?void 0:i.components)!==null&&a!==void 0?a:{})}this.componentOverrides.authRecipe=Mt.__assign(Mt.__assign({},(s=this.componentOverrides.authRecipe)!==null&&s!==void 0?s:{}),(o=x.generalAuthRecipeComponentOverrides)!==null&&o!==void 0?o:{})}this.pluginList=r.map(Mt.getPublicPlugin);for(var _=Mt.getPublicConfig(Mt.__assign(Mt.__assign({},t),{appInfo:this.appInfo})),C=function(D){var L,B=r[D].init;B&&!A.pluginList[D].initialized&&cq.PostSuperTokensInitCallbacks.addPostInitCallback(function(){B(_,n.pluginList,Mt.package_version),n.pluginList[D].initialized=!0});var H=r[D].routeHandlers;if(H){var z=[];if(typeof H=="function"){var ie=H(_,A.pluginList,Mt.package_version);if(ie.status==="ERROR")throw new Error(ie.message);z=ie.routeHandlers}else z=H;(L=A.pluginRouteHandlers).push.apply(L,z)}},A=this,j=0;j<this.pluginList.length;j+=1)C(j);var P=t.languageTranslations===void 0?{}:t.languageTranslations;this.languageTranslations={defaultLanguage:P.defaultLanguage===void 0?"en":P.defaultLanguage,currentLanguageCookieScope:P.currentLanguageCookieScope!==void 0?Mt.normaliseCookieScopeOrThrowError(P.currentLanguageCookieScope):Mt.getDefaultCookieScope(),userTranslationStore:P.translations!==void 0?P.translations:{},translationEventSource:new sOe,userTranslationFunc:P.translationFunc};var O=!!(t!=null&&t.enableDebugLogs);O&&Mt.enableLogging(),this.userGetRedirectionURL=t.getRedirectionURL,this.recipeList=t.recipeList.map(function(D){var L=D.authReact;return L(n.appInfo,O)}),this.rootStyle=(l=t.style)!==null&&l!==void 0?l:"",this.privacyPolicyLink=t.privacyPolicyLink,this.termsOfServiceLink=t.termsOfServiceLink,this.useShadowDom=(c=t.useShadowDom)!==null&&c!==void 0?c:!0,this.defaultToSignUp=(d=t.defaultToSignUp)!==null&&d!==void 0?d:!1,this.disableAuthRoute=(f=t.disableAuthRoute)!==null&&f!==void 0?f:!1}return e.init=function(t){var r,n;if(ZIe.CookieHandlerReference.init(t.cookieHandler),eOe.WindowHandlerReference.init(t.windowHandler),e.instance!==void 0){console.warn("SuperTokens was already initialized");return}e.usesDynamicLoginMethods=(r=t.usesDynamicLoginMethods)!==null&&r!==void 0?r:!1;var i=t.recipeList.find(function(S){return S.recipeID===q6.RECIPE_ID})!==void 0?t.recipeList:t.recipeList.concat(q6.init({})),a=Mt.normaliseInputAppInfoOrThrowError(t.appInfo),s=Mt.getPublicConfig(Mt.__assign(Mt.__assign({},t),{appInfo:a})),o=[];if(!((n=t.experimental)===null||n===void 0)&&n.plugins)for(var l=0,c=t.experimental.plugins;l<c.length;l++){var d=c[l];if(d.compatibleAuthReactSDKVersions){var f=uOe(Mt.package_version,d.compatibleAuthReactSDKVersions);if(!f)throw new Error("Incompatible SDK version for plugin ".concat(d.id,'. Version "').concat(Mt.package_version,'" not found in compatible versions: ').concat(JSON.stringify(d.compatibleAuthReactSDKVersions)))}if(d.dependencies){var p=d.dependencies(s,o.map(Mt.getPublicPlugin),Mt.package_version);if(p.status==="ERROR")throw new Error(p.message);p.pluginsToAdd&&o.push.apply(o,p.pluginsToAdd)}o.push(d)}var m=o.filter(function(S,_){return o.some(function(C,A){return C.id===S.id&&A!==_})});if(m.length>0)throw new Error("Duplicate plugin IDs: ".concat(m.map(function(S){return S.id}).join(", ")));for(var x=0,y=o;x<y.length;x++){var d=y[x];if(d.config){var b=d.config(Mt.getPublicConfig(Mt.__assign(Mt.__assign({},t),{appInfo:a})))||{};delete b.appInfo,t=Mt.__assign(Mt.__assign({},t),b)}}nOe.default.init(Mt.__assign(Mt.__assign({},t),{recipeList:i.map(function(S){var _=S.webJS;return _}),experimental:{plugins:o.map(function(S){return{id:S.id,overrideMap:S.overrideMap}})}})),e.instance=new e(Mt.__assign(Mt.__assign({},t),{recipeList:i}),o),cq.PostSuperTokensInitCallbacks.runPostInitCallbacks()},e.getInstance=function(){return e.instance},e.getInstanceOrThrow=function(){if(e.instance===void 0){var t="SuperTokens must be initialized before calling this method.";throw typeof window>"u"&&(t=t+Mt.SSR_ERROR),new Error(t)}return e.instance},e.prototype.getRecipeOrThrow=function(t){var r=this.recipeList.find(function(n){return n.config.recipeId===t});if(r===void 0)throw new Error("Missing recipe: ".concat(t));return r},e.prototype.loadTranslation=function(t){this.languageTranslations.translationEventSource.emit("TranslationLoaded",t)},e.prototype.getRedirectUrl=function(t,r){var n;return Mt.__awaiter(this,void 0,void 0,function(){var i,a,s,o;return Mt.__generator(this,function(l){switch(l.label){case 0:return this.userGetRedirectionURL?[4,this.userGetRedirectionURL(t,r)]:[3,2];case 1:if(i=l.sent(),i!==void 0)return[2,i];l.label=2;case 2:if(t.action==="TO_AUTH")return a=this.appInfo.websiteBasePath.getAsStringDangerous(),s=Mt.appendTrailingSlashToURL(a),t.tenantIdFromQueryParams?[2,Mt.appendQueryParamsToURL(s,(o={},o[Mt.TENANT_ID_QUERY_PARAM]=t.tenantIdFromQueryParams,o))]:[2,s];if(t.action==="SUCCESS")return[2,(n=t.redirectToPath)!==null&&n!==void 0?n:"/"];throw new Error("Should never come here: unexpected redirection context")}})})},e.reset=function(){Mt.isTest()&&(e.instance=void 0)},e.usesDynamicLoginMethods=!1,e}();function dOe(e,t,r){try{new URL(t)}catch{var n=Mt.getOriginOfPage().getAsStringDangerous();if(n!==e.websiteDomain.getAsStringDangerous()){t="".concat(e.websiteDomain.getAsStringDangerous()).concat(t),Mt.redirectWithFullPageReload(t);return}if(r!==void 0){Mt.redirectWithNavigate(t,r);return}}Mt.redirectWithFullPageReload(t)}Ua.BaseRecipeModule=aae;Ua.Multitenancy=q6;Ua.SuperTokens=YA;Ua.defaultTranslationsCommon=oae;Ua.getCurrentLanguageFromCookie=cae;Ua.getTranslationFunction=lOe;Ua.normaliseRecipeModuleConfig=sae;var Pj=zi,fOe=u,hOe=I,pOe=Ua;function mOe(e){return e&&e.__esModule?e:{default:e}}var dq=mOe(hOe),gOe=function(e,t){e===void 0&&(e={});var r=dq.default.createContext(e),n=function(){var a,s=dq.default.useContext(r);return Pj.__assign(Pj.__assign({},(a=pOe.SuperTokens.getInstance())===null||a===void 0?void 0:a.componentOverrides[t]),s)},i=function(a){var s=a.children,o=a.components;return fOe.jsx(r.Provider,Pj.__assign({value:o},{children:s}))};return[n,i,r.Consumer]};Ux.createGenericComponentsOverrideContext=gOe;var Eu={},p7={},uae={},ed={},LE={},x4={},N2=Ve&&Ve.__assign||function(){return N2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},N2.apply(this,arguments)};Object.defineProperty(x4,"__esModule",{value:!0});x4.normaliseUserInput=void 0;var xOe=Hx;function vOe(e){var t=N2({functions:function(r){return r}},e.override);return N2(N2({},(0,xOe.normaliseAuthRecipe)(e)),{override:t})}x4.normaliseUserInput=vOe;var BE={},Rj=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},jj=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(BE,"__esModule",{value:!0});BE.getRecipeImplementation=void 0;var Fm=Wx;function dae(e){var t=new Fm.default(e.recipeId,e.appInfo);return{getLoginChallengeInfo:function(r){var n=r.loginChallenge,i=r.options,a=r.userContext;return Rj(this,void 0,void 0,function(){var s,o,l;return jj(this,function(c){switch(c.label){case 0:return[4,t.get({path:"/oauth/login/info",pathParams:void 0,queryParams:{loginChallenge:n}},{},Fm.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"GET_LOGIN_CHALLENGE_INFO",options:i,userContext:a}),Fm.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"GET_LOGIN_CHALLENGE_INFO",userContext:a}))];case 1:return s=c.sent(),o=s.jsonBody,l=s.fetchResponse,[2,{status:"OK",info:o.info,fetchResponse:l}]}})})},getRedirectURLToContinueOAuthFlow:function(r){var n=r.loginChallenge,i=r.options,a=r.userContext;return Rj(this,void 0,void 0,function(){var s,o,l;return jj(this,function(c){switch(c.label){case 0:return[4,t.get({path:"/oauth/login",pathParams:void 0,queryParams:{loginChallenge:n}},{},Fm.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"GET_REDIRECT_URL_TO_CONTINUE_OAUTH_FLOW",options:i,userContext:a}),Fm.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"GET_REDIRECT_URL_TO_CONTINUE_OAUTH_FLOW",userContext:a}))];case 1:return s=c.sent(),o=s.jsonBody,l=s.fetchResponse,[2,{status:"OK",frontendRedirectTo:o.frontendRedirectTo,fetchResponse:l}]}})})},logOut:function(r){var n=r.logoutChallenge,i=r.options,a=r.userContext;return Rj(this,void 0,void 0,function(){var s,o,l;return jj(this,function(c){switch(c.label){case 0:return[4,t.post("/oauth/logout",{body:{logoutChallenge:n}},Fm.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"LOG_OUT",options:i,userContext:a}),Fm.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"LOG_OUT",userContext:a}))];case 1:return s=c.sent(),o=s.jsonBody,l=s.fetchResponse,[2,{status:"OK",frontendRedirectTo:o.frontendRedirectTo,fetchResponse:l}]}})})}}}BE.default=dae;BE.getRecipeImplementation=dae;var yOe=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),QA=Ve&&Ve.__assign||function(){return QA=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},QA.apply(this,arguments)};Object.defineProperty(LE,"__esModule",{value:!0});LE.Recipe=void 0;var bOe=x4,wOe=bf,SOe=BE,Dj=$r,EOe=db,fae=function(e){yOe(t,e);function t(r){var n=e.call(this,(0,bOe.normaliseUserInput)(r))||this,i=new wOe.default((0,SOe.default)({recipeId:n.config.recipeId,appInfo:n.config.appInfo,clientType:n.config.clientType,preAPIHook:n.config.preAPIHook,postAPIHook:n.config.postAPIHook}));return n.recipeImplementation=i.override(n.config.override.functions).build(),n}return t.init=function(r){return function(n,i,a,s){return t.instance=new t(QA(QA({},(0,Dj.applyPlugins)(t.RECIPE_ID,r,s??[])),{recipeId:t.RECIPE_ID,appInfo:n,clientType:i})),t.instance}},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of OAuth2Provider found. Ensure that the 'OAuth2Provider.init' method is called within the 'SuperTokens.init' recipeList.";throw r=(0,Dj.checkForSSRErrorAndAppendIfNeeded)(r),Error(r)}return t.instance},t.reset=function(){(0,Dj.isTest)()&&(t.instance=void 0)},t.RECIPE_ID="oauth2provider",t}(EOe.default);LE.Recipe=fae;LE.default=fae;var qp=Ve&&Ve.__assign||function(){return qp=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},qp.apply(this,arguments)};Object.defineProperty(ed,"__esModule",{value:!0});ed.logOut=ed.getRedirectURLToContinueOAuthFlow=ed.getLoginChallengeInfo=ed.init=void 0;var Mj=$r,S_=LE,UE=function(){function e(){}return e.init=function(t){return S_.default.init(t)},e.getLoginChallengeInfo=function(t){return S_.default.getInstanceOrThrow().recipeImplementation.getLoginChallengeInfo(qp(qp({},t),{userContext:(0,Mj.getNormalisedUserContext)(t.userContext)}))},e.getRedirectURLToContinueOAuthFlow=function(t){return S_.default.getInstanceOrThrow().recipeImplementation.getRedirectURLToContinueOAuthFlow(qp(qp({},t),{userContext:(0,Mj.getNormalisedUserContext)(t.userContext)}))},e.logOut=function(t){return S_.default.getInstanceOrThrow().recipeImplementation.logOut(qp(qp({},t),{userContext:(0,Mj.getNormalisedUserContext)(t.userContext)}))},e}();ed.default=UE;var COe=UE.init;ed.init=COe;var kOe=UE.getLoginChallengeInfo;ed.getLoginChallengeInfo=kOe;var _Oe=UE.getRedirectURLToContinueOAuthFlow;ed.getRedirectURLToContinueOAuthFlow=_Oe;var NOe=UE.logOut;ed.logOut=NOe;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(ed)})(uae);var fb={},Od=zi,fq=Ua,AOe=function(e){Od.__extends(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.redirect=function(n,i,a,s){return Od.__awaiter(r,void 0,void 0,function(){var o;return Od.__generator(this,function(l){switch(l.label){case 0:return[4,this.getRedirectUrl(n,Od.getNormalisedUserContext(s))];case 1:return o=l.sent(),o===null?(Od.logDebugMessage("Skipping redirection because the user override returned null for context ".concat(JSON.stringify(n,null,2))),[2]):(o=Od.appendQueryParamsToURL(o,a),[2,fq.SuperTokens.getInstanceOrThrow().redirectToUrl(o,i)])}})})},r.getRedirectUrl=function(n,i){return Od.__awaiter(r,void 0,void 0,function(){var a;return Od.__generator(this,function(s){switch(s.label){case 0:return[4,this.config.getRedirectionURL(n,i)];case 1:return a=s.sent(),a!==void 0?[2,a]:[4,this.getDefaultRedirectionURL(n,i)];case 2:return[2,s.sent()]}})})},r}return t.prototype.getDefaultRedirectionURL=function(r,n){return Od.__awaiter(this,void 0,void 0,function(){return Od.__generator(this,function(i){throw new Error("getDefaultRedirectionURL is not implemented.")})})},t}(fq.BaseRecipeModule);fb.RecipeModule=AOe;var Pa=zi,TOe=uae,IOe=fb,OOe=Ua;function POe(e){return e&&e.__esModule?e:{default:e}}var hq=POe(TOe),ROe=function(e){return function(t){return Pa.__assign(Pa.__assign({},t),{getLoginChallengeInfo:function(r){return Pa.__awaiter(this,void 0,void 0,function(){var n;return Pa.__generator(this,function(i){switch(i.label){case 0:return[4,t.getLoginChallengeInfo(r)];case 1:return n=i.sent(),e({action:"LOADED_LOGIN_CHALLENGE",loginChallenge:r.loginChallenge,loginInfo:n.info,userContext:r.userContext}),[2,n]}})})},logOut:function(r){return Pa.__awaiter(this,void 0,void 0,function(){var n;return Pa.__generator(this,function(i){switch(i.label){case 0:return[4,t.logOut(r)];case 1:return n=i.sent(),e({action:"OAUTH2_LOGOUT_SUCCESS",frontendRedirectTo:n.frontendRedirectTo,userContext:r.userContext}),[2,n]}})})}})}};function jOe(e){var t;return Pa.__assign(Pa.__assign({},OOe.normaliseRecipeModuleConfig(e)),{disableDefaultUI:(t=e==null?void 0:e.disableDefaultUI)!==null&&t!==void 0?t:!1,tryRefreshPage:Pa.__assign({disableDefaultUI:!1},e==null?void 0:e.tryRefreshPage),oauth2LogoutScreen:Pa.__assign({disableDefaultUI:!1,style:""},e==null?void 0:e.oauth2LogoutScreen),override:Pa.__assign({functions:function(r){return r}},e==null?void 0:e.override)})}var DOe=function(e){Pa.__extends(t,e);function t(r,n){n===void 0&&(n=hq.default);var i=e.call(this,r)||this;return i.webJSRecipe=n,i.recipeID=t.RECIPE_ID,i}return t.init=function(r){var n=jOe(r);return{recipeID:t.RECIPE_ID,authReact:function(i){return t.instance=new t(Pa.__assign(Pa.__assign({},n),{appInfo:i,recipeId:t.RECIPE_ID})),t.instance},webJS:hq.default.init(Pa.__assign(Pa.__assign({},n),{override:{functions:function(i,a){var s=ROe(n.onHandleEvent);return a.override(s),a.override(n.override.functions),i}}}))}},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of OAuth2Provider found. Make sure to call the OAuth2Provider.init method.See https://supertokens.io/docs/oauth2/quick-setup/frontend";throw typeof window>"u"&&(r=r+Pa.SSR_ERROR),Error(r)}return t.instance},t.getInstance=function(){return t.instance},t.prototype.getDefaultRedirectionURL=function(r){return Pa.__awaiter(this,void 0,void 0,function(){return Pa.__generator(this,function(n){if(r.action==="SUCCESS_OAUTH2"||r.action==="CONTINUE_OAUTH2_AFTER_REFRESH"||r.action==="POST_OAUTH2_LOGOUT_REDIRECT")return[2,r.frontendRedirectTo];throw new Error("Should never come here: unknown action in OAuth2Provider.getDefaultRedirectionURL")})})},t.reset=function(){Pa.isTest()&&(t.instance=void 0)},t.RECIPE_ID="oauth2provider",t}(IOe.RecipeModule);p7.OAuth2Provider=DOe;var wn=zi,MOe=e7,A2=Ua,FOe=p7,LOe=fb,BOe=g4,UOe=lb;function $Oe(e){return e&&e.__esModule?e:{default:e}}var Fj=$Oe(MOe);function zOe(e){var t,r,n;e===void 0&&(e={});var i=(r=(t=e.accessDeniedScreen)===null||t===void 0?void 0:t.style)!==null&&r!==void 0?r:"",a={style:i},s=wn.__assign({functions:function(o){return o}},e.override);return wn.__assign(wn.__assign({},A2.normaliseRecipeModuleConfig(e)),{invalidClaimStatusCode:(n=e.invalidClaimStatusCode)!==null&&n!==void 0?n:403,accessDeniedScreen:a,override:s})}var hae=function(e){var t=e.invalidClaims,r=e.overrideGlobalClaimValidators,n=e.userContext;return wn.__awaiter(void 0,void 0,void 0,function(){var i,a,s,o,l,c,d;return wn.__generator(this,function(f){switch(f.label){case 0:i=BOe.getGlobalClaimValidators({overrideGlobalClaimValidators:r,userContext:n}),a=void 0,s=function(p){var m,x,y;return wn.__generator(this,function(b){switch(b.label){case 0:return m=t.find(function(S){return S.id===p.id}),m===void 0?[3,2]:(x=p.onFailureRedirection,x?[4,x({reason:m.reason,userContext:n})]:[3,2]);case 1:if(y=b.sent(),y!==void 0)return[2,{value:{redirectPath:y,failedClaim:m}}];b.label=2;case 2:return p.showAccessDeniedOnFailure!==!1&&a===void 0&&(a=m),[2]}})},o=0,l=i,f.label=1;case 1:return o<l.length?(c=l[o],[5,s(c)]):[3,4];case 2:if(d=f.sent(),typeof d=="object")return[2,d.value];f.label=3;case 3:return o++,[3,1];case 4:return[2,{redirectPath:void 0,failedClaim:a}]}})})};function pae(e){var t=UOe.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHref(),r;try{new URL(e),r=e}catch{if(!e.startsWith("/"))throw new Error("onFailureRedirectionURL returned a relative url: ".concat(e));var n=A2.SuperTokens.getInstanceOrThrow().appInfo;r="".concat(n.websiteDomain.getAsStringDangerous()).concat(e)}return t===r}var HOe=function(e){wn.__extends(t,e);function t(r,n){n===void 0&&(n=Fj.default);var i=e.call(this,r)||this;return i.webJSRecipe=n,i.recipeID=t.RECIPE_ID,i.eventListeners=new Set,i.getUserId=function(a){return i.webJSRecipe.getUserId(a)},i.getAccessToken=function(a){return i.webJSRecipe.getAccessToken(a)},i.getClaimValue=function(a){return i.webJSRecipe.getClaimValue(a)},i.getAccessTokenPayloadSecurely=function(a){return wn.__awaiter(i,void 0,void 0,function(){return wn.__generator(this,function(s){return[2,this.webJSRecipe.getAccessTokenPayloadSecurely(a)]})})},i.doesSessionExist=function(a){return i.webJSRecipe.doesSessionExist(a)},i.signOut=function(a){return i.webJSRecipe.signOut(a)},i.attemptRefreshingSession=function(){return wn.__awaiter(i,void 0,void 0,function(){return wn.__generator(this,function(a){return[2,this.webJSRecipe.attemptRefreshingSession()]})})},i.validateClaims=function(a){return i.webJSRecipe.validateClaims(a)},i.getInvalidClaimsFromResponse=function(a){return i.webJSRecipe.getInvalidClaimsFromResponse(a)},i.addEventListener=function(a){return i.eventListeners.add(a),function(){return i.eventListeners.delete(a)}},i.validateGlobalClaimsAndHandleSuccessRedirection=function(a,s,o,l,c){return wn.__awaiter(i,void 0,void 0,function(){var d,f,p,m,x;return wn.__generator(this,function(y){switch(y.label){case 0:return l=wn.getNormalisedUserContext(l),[4,this.doesSessionExist({userContext:l})];case 1:return y.sent()?[4,this.validateClaims({userContext:l})]:[2,A2.SuperTokens.getInstanceOrThrow().redirectToAuth({navigate:c,redirectBack:!1,userContext:l})];case 2:return d=y.sent(),d.length>0?a===void 0?[3,4]:(f=JSON.stringify({successRedirectContext:a,redirectToPath:o}),[4,wn.setLocalStorage("supertokens-success-redirection-context",f)]):[3,6];case 3:y.sent(),y.label=4;case 4:return[4,hae({invalidClaims:d,userContext:l})];case 5:if(p=y.sent(),p.redirectPath!==void 0){if(pae(p.redirectPath))throw new Error("onFailureRedirectionURL returned the current URL (".concat(p.redirectPath,") during success redirection. This indicates that the user is in a stuck state."));return[2,A2.SuperTokens.getInstanceOrThrow().redirectToUrl(p.redirectPath,c)]}y.label=6;case 6:return a!==void 0?[3,13]:[4,wn.getLocalStorage("supertokens-success-redirection-context")];case 7:if(m=y.sent(),m===null)return[3,12];y.label=8;case 8:return y.trys.push([8,,9,11]),x=JSON.parse(m),a=x.successRedirectContext,o===void 0&&(o=x.redirectToPath),[3,11];case 9:return[4,wn.removeFromLocalStorage("supertokens-success-redirection-context")];case 10:return y.sent(),[7];case 11:return[3,13];case 12:a={recipeId:s,action:"SUCCESS",createdNewUser:!1,isNewRecipeUser:!1,newSessionCreated:!1,tenantIdFromQueryParams:wn.getTenantIdFromQueryParams()},y.label=13;case 13:if(a===void 0)throw new Error("This should never happen: successRedirectContext undefined ");return a.action==="SUCCESS_OAUTH2"?[2,FOe.OAuth2Provider.getInstanceOrThrow().redirect(a,c,{},l)]:(a.action==="SUCCESS"&&o!==void 0&&(a.redirectToPath=o),[2,A2.SuperTokens.getInstanceOrThrow().redirect(a,c,{},l)])}})})},i.getDefaultRedirectionURL=function(){return wn.__awaiter(i,void 0,void 0,function(){return wn.__generator(this,function(a){return[2,"/"]})})},i.notifyListeners=function(a){return wn.__awaiter(i,void 0,void 0,function(){var s;return wn.__generator(this,function(o){switch(o.label){case 0:return[4,this.getSessionContext(a)];case 1:return s=o.sent(),Array.from(this.eventListeners).forEach(function(l){return l(wn.__assign({sessionContext:s},a))}),[2]}})})},i}return t.prototype.getSessionContext=function(r){var n=r.action,i=r.userContext;return wn.__awaiter(this,void 0,void 0,function(){var a,s,o;return wn.__generator(this,function(l){switch(l.label){case 0:return n==="SESSION_CREATED"||n==="REFRESH_SESSION"||n==="API_INVALID_CLAIM"||n==="ACCESS_TOKEN_PAYLOAD_UPDATED"?[4,Promise.all([this.getUserId({userContext:i}),this.getAccessTokenPayloadSecurely({userContext:i})])]:[3,2];case 1:return a=l.sent(),s=a[0],o=a[1],[2,{doesSessionExist:!0,accessTokenPayload:o,userId:s}];case 2:if(n==="SIGN_OUT"||n==="UNAUTHORISED")return[2,{doesSessionExist:!1,accessTokenPayload:{},userId:""}];throw new Error("Unhandled recipe event: ".concat(n))}})})},t.addAxiosInterceptors=function(r,n){return Fj.default.addAxiosInterceptors(r,n)},t.init=function(r){var n=this,i=zOe(r);return{recipeID:t.RECIPE_ID,authReact:function(a){return t.instance=new t(wn.__assign(wn.__assign({},i),{appInfo:a,recipeId:t.RECIPE_ID})),t.instance},webJS:Fj.default.init(wn.__assign(wn.__assign({},i),{onHandleEvent:function(a){i.onHandleEvent!==void 0&&i.onHandleEvent(a),t.getInstanceOrThrow().notifyListeners(a)},preAPIHook:function(a){return wn.__awaiter(n,void 0,void 0,function(){var s;return wn.__generator(this,function(o){return s=wn.__assign(wn.__assign({},a),{requestInit:wn.__assign(wn.__assign({},a.requestInit),{headers:wn.__assign(wn.__assign({},a.requestInit.headers),{rid:t.RECIPE_ID})})}),i.preAPIHook===void 0?[2,s]:[2,i.preAPIHook(a)]})})}}))}},t.getInstanceOrThrow=function(){if(t.instance===void 0)throw Error("No instance of Session found. Make sure to call the Session.init method. See https://supertokens.io/docs/emailpassword/quick-setup/frontend");return t.instance},t.getInstance=function(){return t.instance},t.reset=function(){wn.isTest()&&(t.instance=void 0)},t.RECIPE_ID="session",t}(LOe.RecipeModule),WOe={EMAILPASSWORD:"emailpassword",OTP_EMAIL:"otp-email",OTP_PHONE:"otp-phone",LINK_EMAIL:"link-email",LINK_PHONE:"link-phone",THIRDPARTY:"thirdparty",TOTP:"totp",WEBAUTHN:"webauthn"};Eu.FactorIds=WOe;Eu.Session=HOe;Eu.getFailureRedirectionInfo=hae;Eu.validateAndCompareOnFailureRedirectionURLToCurrent=pae;var VOe=Ux,qOe=Eu,mae=VOe.createGenericComponentsOverrideContext(void 0,qOe.Session.RECIPE_ID),GOe=mae[0],KOe=mae[1];d7.Provider=KOe;d7.useContext=GOe;var vn={},Vx={},E_=zi,XOe=u,Ym=I,YOe=Ua;function QOe(e){return e&&e.__esModule?e:{default:e}}var JOe=QOe(Ym),ZOe=function(){throw new Error("Cannot use translation func outside TranslationContext provider.")},gae=JOe.default.createContext({translate:ZOe}),e4e=function(){return Ym.useContext(gae).translate},t4e=function(e){var t=e.children,r=e.defaultLanguage,n=e.userTranslationFunc,i=e.defaultStore,a=e.translationControlEventSource,s=Ym.useState(i),o=s[0],l=s[1],c=Ym.useState(void 0),d=c[0],f=c[1];Ym.useEffect(function(){function m(){return E_.__awaiter(this,void 0,void 0,function(){var x,y;return E_.__generator(this,function(b){switch(b.label){case 0:return[4,YOe.getCurrentLanguageFromCookie()];case 1:return x=b.sent(),y=x===null?r:x,f(function(S){return S!==void 0?S:y}),[2]}})})}m()},[r,f]),Ym.useEffect(function(){var m=function(y,b){f(b)},x=function(y,b){l(function(S){return E_.mergeObjects(S,b)})};return a.on("LanguageChange",m),a.on("TranslationLoaded",x),function(){a.off("LanguageChange",m),a.off("TranslationLoaded",x)}});var p=Ym.useCallback(function(m){if(n!==void 0)return n(m);if(d!==void 0){var x=o[d]&&o[d][m],y=o[r]&&o[r][m];return x===void 0?y!==void 0?y:m:x}throw new Error("Should never come here")},[o,d,r,n]);return d===void 0?null:XOe.jsx(gae.Provider,E_.__assign({value:{translate:p}},{children:t}))};Vx.TranslationContextProvider=t4e;Vx.useTranslation=e4e;var m7={},r4e=Ux,n4e=Ua,xae=r4e.createGenericComponentsOverrideContext(void 0,n4e.Multitenancy.RECIPE_ID),i4e=xae[0],a4e=xae[1];m7.Provider=a4e;m7.useContext=i4e;var hb={},vae={},yae={},$E={},ix={},T2=Ve&&Ve.__assign||function(){return T2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},T2.apply(this,arguments)};Object.defineProperty(ix,"__esModule",{value:!0});ix.checkFactorRequirement=ix.normaliseUserInput=void 0;var s4e=Hx;function o4e(e){var t=T2({functions:function(r){return r}},e.override);return T2(T2({},(0,s4e.normaliseAuthRecipe)(e)),{override:t})}ix.normaliseUserInput=o4e;function l4e(e,t){return{id:e,isValid:t[e]!==void 0,message:"Not completed"}}ix.checkFactorRequirement=l4e;var pq=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},mq=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty($E,"__esModule",{value:!0});$E.MultiFactorAuthClaimClass=void 0;var Lj=ix,c4e=function(){function e(t){var r=this;this.getRecipeImpl=t,this.id="st-mfa",this.validators={hasCompletedMFARequirementsForAuth:function(){return{id:r.id,refresh:function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return r.refresh.apply(r,n)},shouldRefresh:function(n,i){var a=r.getValueFromPayload(n,i);return a===void 0},validate:function(n,i){return pq(r,void 0,void 0,function(){var a;return mq(this,function(s){return a=this.getValueFromPayload(n,i),a===void 0?[2,{isValid:!1,reason:{message:"MFA info not available in payload"}}]:a.v?[2,{isValid:!0}]:[2,{isValid:!1,reason:{message:"not all required factors have been completed"}}]})})}}},hasCompletedFactors:function(n){return{id:r.id,shouldRefresh:function(i,a){var s=r.getValueFromPayload(i,a);return s===void 0},refresh:function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return r.refresh.apply(r,i)},validate:function(i,a){var s=r.getValueFromPayload(i,a);if(s===void 0)return{isValid:!1,reason:{message:"MFA info not available in payload"}};for(var o=s.c,l=0,c=n;l<c.length;l++){var d=c[l];if(typeof d=="object"&&"oneOf"in d){var f=d.oneOf.map(function(p){return(0,Lj.checkFactorRequirement)(p,o)}).filter(function(p){return p.isValid===!1});if(f.length===d.oneOf.length)return{isValid:!1,reason:{message:"All factor checkers failed in the list",oneOf:d.oneOf,failures:f}}}else if(typeof d=="object"&&"allOfInAnyOrder"in d){var f=d.allOfInAnyOrder.map(function(m){return(0,Lj.checkFactorRequirement)(m,o)}).filter(function(m){return m.isValid===!1});if(f.length!==0)return{isValid:!1,reason:{message:"Some factor checkers failed in the list",allOfInAnyOrder:d.allOfInAnyOrder,failures:f}}}else{var f=(0,Lj.checkFactorRequirement)(d,o);if(f.isValid!==!0)return{isValid:!1,reason:{message:"Factor validation failed: "+f.message,factorId:f.id}}}}return{isValid:!0}}}}}}return e.prototype.refresh=function(t){return pq(this,void 0,void 0,function(){return mq(this,function(r){switch(r.label){case 0:return[4,this.getRecipeImpl().resyncSessionAndFetchMFAInfo(t)];case 1:return r.sent(),[2]}})})},e.prototype.getValueFromPayload=function(t,r){if(t[this.id]!==void 0)return{c:t[this.id].c,v:t[this.id].v}},e.prototype.getLastFetchedTime=function(t,r){var n;return(n=t[this.id])===null||n===void 0?void 0:n.t},e}();$E.MultiFactorAuthClaimClass=c4e;var zE={},HE={},JA=Ve&&Ve.__assign||function(){return JA=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},JA.apply(this,arguments)},u4e=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},d4e=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(HE,"__esModule",{value:!0});HE.getRecipeImplementation=void 0;var Bj=Wx;function bae(e){var t=new Bj.default(e.recipeId,e.appInfo);return{resyncSessionAndFetchMFAInfo:function(r){var n=r.options,i=r.userContext;return u4e(this,void 0,void 0,function(){var a,s,o;return d4e(this,function(l){switch(l.label){case 0:return[4,t.put("/mfa/info",{},Bj.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"GET_MFA_INFO",options:n,userContext:i}),Bj.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"GET_MFA_INFO",userContext:i}))];case 1:return a=l.sent(),s=a.jsonBody,o=a.fetchResponse,[2,JA(JA({},s),{fetchResponse:o})]}})})}}}HE.default=bae;HE.getRecipeImplementation=bae;var g7={};(function(e){function t(n){for(var i in n)e.hasOwnProperty(i)||(e[i]=n[i])}e.__esModule=!0;let r=Fx;r.default!==void 0?t(r):t({default:r,...r})})(g7);var f4e=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZA=Ve&&Ve.__assign||function(){return ZA=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ZA.apply(this,arguments)};Object.defineProperty(zE,"__esModule",{value:!0});zE.Recipe=void 0;var h4e=ix,p4e=bf,m4e=HE,Uj=$r,g4e=db,x4e=$x,v4e=g7,y4e=$E,wae=function(e){f4e(t,e);function t(r){var n=e.call(this,(0,h4e.normaliseUserInput)(r))||this,i=new p4e.default((0,m4e.default)({recipeId:n.config.recipeId,appInfo:n.config.appInfo,clientType:n.config.clientType,preAPIHook:n.config.preAPIHook,postAPIHook:n.config.postAPIHook}));return n.recipeImplementation=i.override(n.config.override.functions).build(),x4e.PostSuperTokensInitCallbacks.addPostInitCallback(function(){v4e.SessionClaimValidatorStore.addClaimValidatorFromOtherRecipe(t.MultiFactorAuthClaim.validators.hasCompletedMFARequirementsForAuth())}),n}return t.init=function(r){return function(n,i,a,s){return t.instance=new t(ZA(ZA({},(0,Uj.applyPlugins)(t.RECIPE_ID,r,s??[])),{recipeId:t.RECIPE_ID,appInfo:n,clientType:i})),t.instance}},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of MultiFactorAuth found. Make sure to call the MultiFactorAuth.init method.";throw r=(0,Uj.checkForSSRErrorAndAppendIfNeeded)(r),Error(r)}return t.instance},t.reset=function(){(0,Uj.isTest)()&&(t.instance=void 0)},t.RECIPE_ID="multifactorauth",t.MultiFactorAuthClaim=new y4e.MultiFactorAuthClaimClass(function(){return t.getInstanceOrThrow().recipeImplementation}),t}(g4e.default);zE.Recipe=wae;zE.default=wae;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MultiFactorAuthClaimClass=e.MultiFactorAuthClaim=e.resyncSessionAndFetchMFAInfo=e.init=void 0;var t=$E;Object.defineProperty(e,"MultiFactorAuthClaimClass",{enumerable:!0,get:function(){return t.MultiFactorAuthClaimClass}});var r=zE,n=$r,i=function(){function l(){}return l.init=function(c){return r.default.init(c)},l.resyncSessionAndFetchMFAInfo=function(c){var d;return r.default.getInstanceOrThrow().recipeImplementation.resyncSessionAndFetchMFAInfo({options:(d=c==null?void 0:c.options)!==null&&d!==void 0?d:{},userContext:(0,n.getNormalisedUserContext)(c==null?void 0:c.userContext)})},l.MultiFactorAuthClaim=r.default.MultiFactorAuthClaim,l}();e.default=i;var a=i.init;e.init=a;var s=i.resyncSessionAndFetchMFAInfo;e.resyncSessionAndFetchMFAInfo=s;var o=i.MultiFactorAuthClaim;e.MultiFactorAuthClaim=o})(yae);(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(yae)})(vae);var x7={},v7={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SessionClaimValidatorStore=void 0;var t=g7;Object.defineProperty(e,"SessionClaimValidatorStore",{enumerable:!0,get:function(){return t.SessionClaimValidatorStore}})})(v7);(function(e){function t(n){for(var i in n)e.hasOwnProperty(i)||(e[i]=n[i])}e.__esModule=!0;let r=v7;r.default!==void 0?t(r):t({default:r,...r})})(x7);var or=zi,Sae=vae,gq=g4,b4e=m4,w4e=x7,Eae=lb,G6=Ua,S4e=fb,E4e=Eu;function C4e(e){return e&&e.__esModule?e:{default:e}}var xq=C4e(Sae),Cae="/mfa",GN="st-mfa-info-cache",Nw=void 0,k4e=function(e){return function(t){return or.__assign(or.__assign({},t),{resyncSessionAndFetchMFAInfo:function(r){return or.__awaiter(this,void 0,void 0,function(){var n,i,o,a,s,o,l;return or.__generator(this,function(c){switch(c.label){case 0:return n=Eae.WindowHandlerReference.getReferenceOrThrow(),[4,Nw];case 1:return c.sent(),[4,n.windowHandler.sessionStorage.getItem(GN)];case 2:if(i=c.sent(),i!==null&&(o=JSON.parse(i),o.t>Date.now()-1e3))return[2,or.__assign(or.__assign({},o.v),{fetchResponse:new Response(null,{status:304})})];c.label=3;case 3:return Nw===void 0?[3,5]:[4,Nw];case 4:return c.sent(),[3,3];case 5:Nw=new Promise(function(d){return a=d}),c.label=6;case 6:return c.trys.push([6,,11,12]),[4,n.windowHandler.sessionStorage.getItem(GN)];case 7:return s=c.sent(),s!==null&&(o=JSON.parse(s),o.t>Date.now()-1e3)?[2,or.__assign(or.__assign({},o.v),{fetchResponse:new Response(null,{status:304})})]:[4,t.resyncSessionAndFetchMFAInfo(r)];case 8:return l=c.sent(),l.status!=="OK"?[3,10]:[4,n.windowHandler.sessionStorage.setItem(GN,JSON.stringify({t:Date.now(),v:{emails:l.emails,phoneNumbers:l.phoneNumbers,factors:l.factors,status:l.status}}))];case 9:c.sent(),c.label=10;case 10:return[2,l];case 11:return Nw=void 0,a(),[7];case 12:return[2]}})})}})}},_4e=function(){function e(t,r,n){var i=this;this.webJSClaim=new Sae.MultiFactorAuthClaimClass(function(){return t().webJSRecipe}),this.refresh=this.webJSClaim.refresh,this.getLastFetchedTime=this.webJSClaim.getLastFetchedTime,this.getValueFromPayload=this.webJSClaim.getValueFromPayload,this.id=this.webJSClaim.id;var a=function(s){var o=s.reason,l=s.userContext;return or.__awaiter(i,void 0,void 0,function(){var c,d,p,f,p;return or.__generator(this,function(m){switch(m.label){case 0:return c=t(),d=o.oneOf||o.allOfInAnyOrder||(o.factorId!==void 0?[o.factorId]:void 0),d===void 0?[3,1]:(or.logDebugMessage("Redirecting to MFA on next array from validation failure: "+d.join(", ")),p=c.getSecondaryFactors(l).filter(function(x){return d.factors.next.includes(x.id)}).map(function(x){return x.id}),p.length===1?[2,r({action:"GO_TO_FACTOR",factorId:p[0]},l)]:[2,r({action:"FACTOR_CHOOSER",nextFactorOptions:d},l)]);case 1:return[4,c.webJSRecipe.resyncSessionAndFetchMFAInfo({userContext:l})];case 2:return f=m.sent(),p=c.getSecondaryFactors(l).filter(function(x){return f.factors.next.includes(x.id)}).map(function(x){return x.id}),or.logDebugMessage("Redirecting to MFA on next array from backend: "+p.join(", ")),p.length===1?[2,r({action:"GO_TO_FACTOR",factorId:p[0]},l)]:[2,r({action:"FACTOR_CHOOSER"},l)];case 3:return[2,void 0]}})})};this.validators=or.__assign(or.__assign({},this.webJSClaim.validators),{hasCompletedMFARequirementsForAuth:function(s,o){s===void 0&&(s=!0),o===void 0&&(o=!0);var l=i.webJSClaim.validators.hasCompletedMFARequirementsForAuth();return or.__assign(or.__assign({},l),{showAccessDeniedOnFailure:o,onFailureRedirection:n??function(c){var d=c.reason,f=c.userContext;return s?a({reason:d,userContext:f}):void 0}})},hasCompletedFactors:function(s,o,l){o===void 0&&(o=!0),l===void 0&&(l=!0);var c=i.webJSClaim.validators.hasCompletedFactors(s);return or.__assign(or.__assign({},c),{showAccessDeniedOnFailure:l,onFailureRedirection:n??function(d){var f=d.reason,p=d.userContext;return o?a({reason:f,userContext:p}):void 0}})}})}return e}();function N4e(e){var t;e===void 0&&(e={});var r=e.disableDefaultUI===!0,n=or.__assign({functions:function(i){return i}},e.override);return or.__assign(or.__assign({},G6.normaliseRecipeModuleConfig(e)),{disableDefaultUI:r,firstFactors:e==null?void 0:e.firstFactors,getSecondaryFactorInfo:function(i){return i},factorChooserScreen:(t=e.factorChooserScreen)!==null&&t!==void 0?t:{},override:n})}function A4e(e,t,r,n){or.logDebugMessage("getAvailableFactors: allowed to setup: ".concat(e.allowedToSetup)),or.logDebugMessage("getAvailableFactors: already setup: ".concat(e.alreadySetup)),or.logDebugMessage("getAvailableFactors: next from factorInfo: ".concat(e.next)),or.logDebugMessage("getAvailableFactors: nextArrayQueryParam: ".concat(t)),or.logDebugMessage("getAvailableFactors: secondary factors: ".concat(r.getSecondaryFactors(n).map(function(s){return s.id})));var i=t!==void 0?t.split(","):e.next,a=r.getSecondaryFactors(n).filter(function(s){var o=s.id;return i.length===0?e.allowedToSetup.includes(o)||e.alreadySetup.includes(o):i.includes(o)});return a}var T4e=function(e){or.__extends(t,e);function t(n,i){i===void 0&&(i=xq.default);var a=e.call(this,n)||this;return a.webJSRecipe=i,a.recipeID=t.RECIPE_ID,a.secondaryFactors=[],a.getDefaultRedirectionURL=function(s,o){return or.__awaiter(a,void 0,void 0,function(){var l,c;return or.__generator(this,function(d){if(s.action==="FACTOR_CHOOSER")return l=s.nextFactorOptions&&s.nextFactorOptions.length>0?s.nextFactorOptions.join(","):void 0,[2,or.getDefaultRedirectionURLForPath(this.config,Cae,s,{n:l,stepUp:s.stepUp?"true":void 0})];if(s.action==="GO_TO_FACTOR"){if(c=this.getSecondaryFactors(o).find(function(f){return f.id===s.factorId}),c!==void 0)return[2,or.getDefaultRedirectionURLForPath(this.config,c.path,s,{setup:s.forceSetup?"true":void 0,stepUp:s.stepUp?"true":void 0})];throw new Error("Requested redirect to unknown factor id: "+s.factorId)}else return[2,"/"]})})},b4e.PostSuperTokensInitCallbacks.addPostInitCallback(function(){var s=t.MultiFactorAuthClaim.validators.hasCompletedMFARequirementsForAuth();w4e.SessionClaimValidatorStore.addClaimValidatorFromOtherRecipe(s),E4e.Session.getInstanceOrThrow().addEventListener(function(){var o=Eae.WindowHandlerReference.getReferenceOrThrow();o.windowHandler.sessionStorage.removeItemSync(GN)})}),a}t.init=function(n){var i=N4e(n);return{recipeID:t.RECIPE_ID,authReact:function(a){return t.instance=new t(or.__assign(or.__assign({},i),{appInfo:a,recipeId:t.RECIPE_ID})),t.instance},webJS:xq.default.init(or.__assign(or.__assign({},i),{override:{functions:function(a,s){var o=k4e(i.onHandleEvent);return s.override(o),s.override(i.override.functions),a}}}))}},t.getInstance=function(){return t.instance},t.getInstanceOrThrow=function(){if(t.instance===void 0){var n="No instance of MultiFactorAuth found. Make sure to call the MultiFactorAuth.init method.";throw typeof window>"u"&&(n=n+or.SSR_ERROR),Error(n)}return t.instance},t.prototype.addMFAFactors=function(n){this.secondaryFactors=or.__spreadArray(or.__spreadArray([],this.secondaryFactors.filter(function(i){return n.every(function(a){return i.id!==a.id})}),!0),n,!0)},t.prototype.isFirstFactorEnabledOnClient=function(n){return this.config.firstFactors===void 0||this.config.firstFactors.includes(n)},t.prototype.getSecondaryFactors=function(n){return this.config.getSecondaryFactorInfo(this.secondaryFactors,n)},t.prototype.redirectToFactor=function(n){var i=n.factorId,a=n.forceSetup,s=n.stepUp,o=n.redirectBack,l=n.navigate,c=n.userContext;return or.__awaiter(this,void 0,void 0,function(){var d,f,f;return or.__generator(this,function(p){switch(p.label){case 0:return[4,this.getRedirectUrl({action:"GO_TO_FACTOR",forceSetup:a,stepUp:s,factorId:i,tenantIdFromQueryParams:or.getTenantIdFromQueryParams()},gq.getNormalisedUserContext(c))];case 1:return d=p.sent(),d===null?[2]:(o?(f=or.getCurrentNormalisedUrlPathWithQueryParamsAndFragments(),d=or.appendQueryParamsToURL(d,{redirectToPath:f})):(f=or.getRedirectToPathFromURL(),f&&(d=or.appendQueryParamsToURL(d,{redirectToPath:f}))),[2,G6.SuperTokens.getInstanceOrThrow().redirectToUrl(d,l)])}})})},t.prototype.redirectToFactorChooser=function(n){var i=n.redirectBack,a=i===void 0?!1:i,s=n.nextFactorOptions,o=s===void 0?[]:s,l=n.stepUp,c=n.navigate,d=n.userContext;return or.__awaiter(this,void 0,void 0,function(){var f,p,p;return or.__generator(this,function(m){switch(m.label){case 0:return[4,this.getRedirectUrl({action:"FACTOR_CHOOSER",nextFactorOptions:o,stepUp:l,tenantIdFromQueryParams:or.getTenantIdFromQueryParams()},gq.getNormalisedUserContext(d))];case 1:return f=m.sent(),f===null?[2]:(a?(p=or.getCurrentNormalisedUrlPathWithQueryParamsAndFragments(),f=or.appendQueryParamsToURL(f,{redirectToPath:p})):(p=or.getRedirectToPathFromURL(),p&&(f=or.appendQueryParamsToURL(f,{redirectToPath:p}))),[2,G6.SuperTokens.getInstanceOrThrow().redirectToUrl(f,c)])}})})},t.reset=function(){or.isTest()&&(t.instance=void 0)};var r;return r=t,t.RECIPE_ID="multifactorauth",t.MultiFactorAuthClaim=new _4e(function(){return t.getInstanceOrThrow()},function(n,i){return or.__awaiter(void 0,void 0,void 0,function(){return or.__generator(r,function(a){switch(a.label){case 0:return[4,this.getInstanceOrThrow().getRedirectUrl(or.__assign(or.__assign({},n),{tenantIdFromQueryParams:or.getTenantIdFromQueryParams()}),i)];case 1:return[2,a.sent()||void 0]}})})}),t}(S4e.RecipeModule);hb.DEFAULT_FACTOR_CHOOSER_PATH=Cae;hb.MultiFactorAuth=T4e;hb.getAvailableFactors=A4e;var v4={},I4e=zi,O4e=Ua;function P4e(e){return O4e.normaliseRecipeModuleConfig(e)}function kae(e,t){if(t.length!==0)for(var r=function(a){var s=e[a],o=t.filter(function(d){return!s.factorIds.includes(d)});if(o.length===0)return{value:[s]};var l=e.filter(function(d){return d.factorIds.every(function(f){return o.includes(f)})});if(l.length!==0){var c=kae(l,o);if(c!==void 0)return{value:I4e.__spreadArray([s],c,!0)}}},n=0;n<e.length;++n){var i=r(n);if(typeof i=="object")return i.value}}v4.normaliseAuthRecipe=P4e;v4.selectComponentsToCoverAllFirstFactors=kae;var ft=zi,Et=u,Qr=I,Zr=Ua,R4e=r4,rm=Vx,j4e=lb,D4e=Ml,M4e=m7,KN=hb,In=Eu,C_=p7,F4e=Ux,L4e=v4,B4e=ob;function y7(e){return e&&e.__esModule?e:{default:e}}var lc=y7(Qr),U4e=y7(R4e),_ae=y7(B4e),y4=lc.default.createContext("IS_DEFAULT");function Nae(){return Et.jsx("svg",ft.__assign({version:"1.1",viewBox:"25 25 50 50","data-supertokens":"spinnerIcon"},{children:Et.jsxs("circle",ft.__assign({cx:"50",cy:"50",r:"20",fill:"none",stroke:"rgb(var(--palette-primary))",strokeWidth:"5",strokeLinecap:"round",strokeDashoffset:"0",strokeDasharray:"100, 200"},{children:[Et.jsx("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"4s",repeatCount:"indefinite"}),Et.jsx("animate",{attributeName:"stroke-dashoffset",values:"0;-30;-124",dur:"2s",repeatCount:"indefinite"}),Et.jsx("animate",{attributeName:"stroke-dasharray",values:"0,200;110,200;110,200",dur:"2s",repeatCount:"indefinite"})]}))}))}var $4e=function(e){var t=Qr.useContext(y4);if(t==="IS_DEFAULT")throw new Error("Cannot use component override outside ComponentOverrideContext provider.");var r=t[e];return r===void 0?null:r},WE=function(e,t){var r=e+"_Override";return t.displayName=r,function(n){var i=$4e(r);return i!==null?Et.jsx(i,ft.__assign({DefaultComponent:t},n)):Et.jsx(t,ft.__assign({},n))}},z4e=`[data-supertokens~="container"] {
    --palette-background: 255, 255, 255;
    --palette-inputBackground: 250, 250, 250;
    --palette-inputBorder: 224, 224, 224;
    --palette-primary: 28, 34, 42;
    --palette-primaryBorder: 45, 54, 68;
    --palette-success: 65, 167, 0;
    --palette-successBackground: 217, 255, 191;
    --palette-error: 255, 23, 23;
    --palette-errorBackground: 255, 241, 235;
    --palette-textTitle: 0, 0, 0;
    --palette-textLabel: 0, 0, 0;
    --palette-textInput: 0, 0, 0;
    --palette-textPrimary: 128, 128, 128;
    --palette-textLink: 0, 122, 255;
    --palette-buttonText: 255, 255, 255;
    --palette-textGray: 54, 54, 54;
    --palette-superTokensBrandingBackground: 242, 245, 246;
    --palette-superTokensBrandingText: 173, 189, 196;
    --palette-buttonGreyedOut: 221, 221, 221;
    --palette-caution: 124, 96, 62;
    --palette-errorDark: 207, 54, 68;

    --font-size-0: 12px;
    --font-size-1: 14px;
    --font-size-2: 16px;
    --font-size-3: 19px;
    --font-size-4: 24px;
    --font-size-5: 28px;
}
/*
 * Default styles.
 */
@keyframes slideTop {
    0% {
        transform: translateY(-5px);
    }
    100% {
        transform: translateY(0px);
    }
}
@keyframes swing-in-top-fwd {
    0% {
        transform: rotateX(-100deg);
        transform-origin: top;
        opacity: 0;
    }
    100% {
        transform: rotateX(0deg);
        transform-origin: top;
        opacity: 1;
    }
}
[data-supertokens~="container"] {
    font-family: "Arial", sans-serif;
    margin: 12px auto;
    margin-top: 26px;
    margin-bottom: 26px;
    width: 420px;
    text-align: center;
    border-radius: 8px;
    box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.16);
    background-color: rgb(var(--palette-background));
}
@media (max-width: 440px) {
    [data-supertokens~="container"] {
        width: 95vw;
    }
}
[data-supertokens~="row"] {
    margin: 0 auto;
    width: 76%;
    padding-top: 30px;
    padding-bottom: 10px;
}
[data-supertokens~="superTokensBranding"] {
    display: block;
    margin: 10px auto 0;
    background: rgb(var(--palette-superTokensBrandingBackground));
    color: rgb(var(--palette-superTokensBrandingText));
    text-decoration: none;
    width: -webkit-fit-content;
    width: -moz-fit-content;
    width: fit-content;
    border-radius: 6px 6px 0 0;
    padding: 4px 9px;
    font-weight: 400;
    font-size: var(--font-size-0);
    letter-spacing: 0.4px;
}
[data-supertokens~="generalError"] {
    background: rgb(var(--palette-errorBackground));
    padding-top: 10px;
    padding-bottom: 10px;
    margin-bottom: 10px;
    margin-top: 24px;
    padding-left: 18px;
    padding-right: 18px;
    letter-spacing: 0.2px;
    font-size: var(--font-size-1);
    border-radius: 8px;
    color: rgb(var(--palette-error));
    animation: swing-in-top-fwd 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
    word-wrap: break-word;
}
[data-supertokens~="headerTitle"] {
    font-size: var(--font-size-4);
    line-height: 27.6px;
    letter-spacing: 0.58px;
    font-weight: 700;
    margin-bottom: 20px;
    color: rgb(var(--palette-textTitle));
}
[data-supertokens~="headerSubtitle"] {
    font-weight: 400;
    color: rgb(var(--palette-textGray));
    margin-bottom: 21px;
}
[data-supertokens~="headerSubtitle"][data-supertokens~="secondaryText"] {
    color: rgb(var(--palette-textGray));
    font-weight: 400;
}
[data-supertokens~="privacyPolicyAndTermsAndConditions"] {
    max-width: 300px;
    margin-top: 10px;
}
[data-supertokens~="privacyPolicyAndTermsAndConditions"] a {
    line-height: 21px;
}
/* TODO: split the link style into separate things*/
/* We add this before primary and secondary text, because if they are applied to the same element the other ones take priority */
[data-supertokens~="link"] {
    padding-left: 3px;
    padding-right: 3px;
    color: rgb(var(--palette-textLink));
    font-size: var(--font-size-1);
    cursor: pointer;
    letter-spacing: 0.16px;
    line-height: 26px;
}
[data-supertokens~="primaryText"] {
    font-size: var(--font-size-2);
    font-weight: 400;
    letter-spacing: 0.4px;
    line-height: 21px;
    color: rgb(var(--palette-textLabel));
}
[data-supertokens~="secondaryText"] {
    font-size: var(--font-size-1);
    font-weight: 400;
    letter-spacing: 0.4px;
    color: rgb(var(--palette-textPrimary));
}
[data-supertokens~="secondaryText"] strong {
    font-weight: 600;
}
[data-supertokens~="divider"] {
    margin-top: 1.5em;
    margin-bottom: 1.5em;
    border-bottom: 0.3px solid #dddddd;
    align-items: center;
    padding-bottom: 5px;
    flex: 3 3;
}
[data-supertokens~="headerTinyTitle"] {
    margin-top: 24px;
    font-size: var(--font-size-5);
    letter-spacing: 1.1px;
    font-weight: 700;
    line-height: 28px;
}
[data-supertokens~="secondaryLinkWithArrow"] {
    margin-top: 10px;
    margin-bottom: 30px;
    cursor: pointer;
}
[data-supertokens~="secondaryLinkWithArrow"]:hover {
    position: relative;
    left: 2px;
    word-spacing: 4px;
}
[data-supertokens~="generalSuccess"] {
    color: rgb(var(--palette-success));
    font-size: var(--font-size-1);
    background: rgb(var(--palette-successBackground));
    animation: swing-in-top-fwd 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
    padding: 9px 15px 9px 15px;
    border-radius: 6px;
    display: inline-block;
}
[data-supertokens~="spinner"] {
    width: 80px;
    height: auto;
    padding-top: 20px;
    padding-bottom: 40px;
    margin: 0 auto;
}
[data-supertokens~="error"] {
    color: rgb(var(--palette-error));
}
[data-supertokens~="linkButton"] {
    font-family: "Arial", sans-serif;
    background-color: transparent;
    border: 0;
}
[data-supertokens~="secondaryLinkWithLeftArrow"] {
    color: rgb(var(--palette-textGray));
    font-weight: 400;
    margin-top: 10px;
    margin-bottom: 40px;
    cursor: pointer;
}
[data-supertokens~="secondaryLinkWithLeftArrow"] svg {
    margin-right: 0.3em;
}
[data-supertokens~="secondaryLinkWithLeftArrow"]:hover svg {
    position: relative;
    left: -4px;
}
[data-supertokens~="button"] {
    font-family: "Arial", sans-serif;
    background-color: rgb(var(--palette-primary));
    color: rgb(var(--palette-buttonText));
    width: 100%;
    height: 34px;
    font-weight: 600;
    border-width: 1px;
    border-style: solid;
    border-radius: 6px;
    border-color: rgb(var(--palette-primaryBorder));
    background-position: center;
    transition: all 0.4s;
    background-size: 12000%;
    cursor: pointer;
}
[data-supertokens~="buttonGreyedOut"] {
    background-color: rgb(var(--palette-buttonGreyedOut));
    border-color: rgb(var(--palette-buttonGreyedOut));
}
[data-supertokens~="buttonWithIcon"] {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}
[data-supertokens~="button"]:disabled {
    border: none;
    cursor: no-drop;
}
[data-supertokens~="button"]:active {
    outline: none;
    transition: all 0s;
    background-size: 100%;
    filter: brightness(0.85);
}
[data-supertokens~="button"]:focus {
    outline: none;
}
[data-supertokens~="backButtonCommon"] {
    width: 16px;
    height: 13px;
}
[data-supertokens~="backButton"] {
    cursor: pointer;
    border: none;
    background-color: transparent;
    padding: 0px;
}
[data-supertokens~="backButtonPlaceholder"] {
    display: block;
}
[data-supertokens~="delayedRender"] {
    animation-duration: 0.1s;
    animation-name: animate-fade;
    animation-delay: 0.2s;
    animation-fill-mode: backwards;
}
@keyframes animate-fade {
    0% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}
[data-supertokens~="footerLinkGroupVert"] {
    display: flex;
    flex-direction: column;
    margin-top: 10px;
    gap: 24px;
}
[data-supertokens~="footerLinkGroupVert"] > div {
    cursor: pointer;
    margin: 0;
}
[data-supertokens~="footerLinkGroupVert"] [data-supertokens~="secondaryText"] {
    font-weight: 400;
}
[data-supertokens~="footerLinkGroupVert"] [data-supertokens~="secondaryLinkWithLeftArrow"] {
    font-weight: 400;
    position: relative;
    left: -6px; /* half the width of the left arrow */
}
@media (max-width: 360px) {
    [data-supertokens~="footerLinkGroupVert"] {
        flex-direction: column;
    }
    [data-supertokens~="footerLinkGroupVert"] > div {
        margin: 0 auto;
    }
}
[data-supertokens~="footerLinkGroupVert"] div:only-child {
    margin-left: auto;
    margin-right: auto;
    margin-top: 14px;
}
[data-supertokens~="withBackButton"] {
    position: relative;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
[data-supertokens~="dividerWithOr"] {
    padding-top: 5px;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    color: rgb(var(--palette-textPrimary));
}
[data-supertokens~="dividerText"] {
    flex: 1 1;
    font-weight: 400;
    font-size: var(--font-size-1);
}
[data-supertokens~="formLabelWithLinkWrapper"] {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
[data-supertokens~="formLabelLinkBtn"] {
    width: auto;
    margin-top: 0;
    line-height: 24px;
    font-size: var(--font-size-0);
}
[data-supertokens~="formLabelLinkBtn"]:hover {
    text-decoration: underline;
}
[data-supertokens~="formLabelLinkBtn"]:disabled {
    color: rgb(var(--palette-textPrimary));
    cursor: default;
    text-decoration: none;
}
[data-supertokens~="authComponentList"] {
    padding-bottom: 20px;
}
[data-supertokens~="authPageTitleOAuthClient"] {
    color: rgb(var(--palette-textGray));
    font-size: var(--font-size-1);
    font-weight: 400;
    margin: 10px 0 25px;
}
[data-supertokens~="authPageTitleOAuthClientUrl"] {
    text-decoration: none;
}
[data-supertokens~="authPageTitleOAuthClientLogo"] {
    width: 44px;
    height: 44px;
    margin-bottom: 10px;
}
[data-supertokens~="authPageTitleOAuthClient"] [data-supertokens~="authPageTitleOAuthClientName"] {
    color: rgb(var(--palette-textTitle));
}
[data-supertokens~="buttonWithArrow"] {
    border-radius: 6px;
    border: 1px solid #d0d5dd;
    width: 100%;
    color: rgb(var(--palette-textGray));
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 5px;
    margin: 24px 0;
    min-height: 48px;
    cursor: pointer;
}
[data-supertokens~="buttonWithArrow"]:hover {
    background-color: rgb(var(--palette-inputBackground));
}
[data-supertokens~="buttonWithArrow"] [data-supertokens~="secondaryText"] {
    font-weight: 700;
    font-size: var(--font-size-2);
    color: rgb(var(--palette-textGray));
    margin: 0;
}
[data-supertokens~="buttonWithArrow"]:hover [data-supertokens~="secondaryLinkWithRightArrow"] ~ svg {
    position: relative;
    left: 2px;
}
[data-supertokens~="buttonWithArrow"]:hover [data-supertokens~="secondaryLinkWithLeftArrow"] svg {
    position: relative;
    left: -2px;
}
[data-supertokens~="buttonWithArrow"] [data-supertokens~="secondaryLinkWithLeftArrow"] {
    display: flex;
    align-items: center;
}
`,H4e=function(e){var t=e.children,r=e.userStyles;return Et.jsxs(Qr.Fragment,{children:[t,Et.jsxs("style",{children:[z4e,r.join(`
`)]})]})},W4e=function(){return Et.jsx("div",ft.__assign({"data-supertokens":"container delayedRender"},{children:Et.jsx("div",ft.__assign({"data-supertokens":"row"},{children:Et.jsx("div",ft.__assign({"data-supertokens":"spinner delayedRender"},{children:Et.jsx(Nae,{})}))}))}))},V4e=WE("MultitenancyDynamicLoginMethodsSpinnerTheme",W4e),q4e=function(e){var t=Zr.SuperTokens.getInstanceOrThrow().rootStyle;return Et.jsx(H4e,ft.__assign({userStyles:[t,e.config.recipeRootStyle]},{children:Et.jsx(V4e,{})}))},b4=function(){var e=Zr.Multitenancy.getInstanceOrThrow(),t=M4e.useContext();return Et.jsx(y4.Provider,ft.__assign({value:t},{children:Et.jsx(b7,ft.__assign({useShadowDom:Zr.SuperTokens.getInstanceOrThrow().useShadowDom},{children:Et.jsx(q4e,{config:e.config})}))}))},Aae=lc.default.createContext(void 0),G4e=function(){var e=lc.default.useContext(Aae);if(e===void 0)throw new Error("useDynamicLoginMethods used outside of a valid provider (FeatureWrapper)");return e},Tae=function(e){var t=e.value,r=e.children,n=t===void 0?{loaded:!1}:{loaded:!0,loginMethods:t};return Et.jsx(Aae.Provider,ft.__assign({value:n},{children:r}))},w4=lc.default.createContext(void 0),pb=function(){return lc.default.useContext(w4)},K6=function(e){var t=e.children,r=e.userContext,n=Qr.useState(ft.getNormalisedUserContext(r))[0];return Et.jsx(w4.Provider,ft.__assign({value:n},{children:t}))};function K4e(e){var t=e.children,r=e.useShadowDom,n=e.defaultStore,i=pb(),a=ft.useRethrowInRender(),s=Qr.useState(void 0),o=s[0],l=s[1],c=Zr.SuperTokens.getInstanceOrThrow();return Qr.useEffect(function(){o||Zr.Multitenancy.getInstanceOrThrow().getCurrentDynamicLoginMethods({userContext:i}).then(function(d){return l(d)},function(d){return a(d)})},[o,l]),Zr.SuperTokens.usesDynamicLoginMethods&&!o?Et.jsx(b4,{}):Et.jsx(Tae,ft.__assign({value:o},{children:Et.jsx(rm.TranslationContextProvider,ft.__assign({defaultLanguage:c.languageTranslations.defaultLanguage,defaultStore:ft.mergeObjects(n,c.languageTranslations.userTranslationStore),translationControlEventSource:c.languageTranslations.translationEventSource,userTranslationFunc:c.languageTranslations.userTranslationFunc},{children:Et.jsx(b7,ft.__assign({useShadowDom:r},{children:t}))}))}))}function X4e(e){var t=e.children,r=Qr.useRef(null),n=Qr.useState(),i=n[0],a=n[1];return Qr.useEffect(function(){r.current&&a(function(s){return s||r.current.shadowRoot||r.current.attachShadow({mode:"open",delegatesFocus:!1})})},[r]),Et.jsx("div",ft.__assign({id:ft.ST_ROOT_ID,ref:r},{children:i&&D4e.createPortal(t,i)}))}function b7(e){var t=e.children,r=e.useShadowDom;return r===!1?Et.jsxs("div",ft.__assign({id:ft.ST_ROOT_ID},{children:[t,Et.jsx(vq,{})]})):Et.jsxs(X4e,{children:[t,Et.jsx(vq,{})]})}function vq(){return Et.jsx("style",ft.__assign({type:"text/css"},{children:"input.supertokens-input:-webkit-autofill,input.supertokens-input:-webkit-autofill:focus,input.supertokens-input:-webkit-autofill:hover,select:-webkit-autofill,select:-webkit-autofill:focus,select:-webkit-autofill:hover,textarea:-webkit-autofill,textarea:-webkit-autofill:focus,textarea:-webkit-autofill:hover{transition:background-color 5000s ease-in-out 0s}"}))}var w7=lc.default.createContext({loading:!0,isDefault:!0}),Iae=function(){var e=lc.default.useContext(w7);if(e.isDefault===!0)throw new Error("Cannot use useSessionContext outside auth wrapper components.");return e},Oae=F4e.createGenericComponentsOverrideContext({},"authRecipe"),Y4e=Oae[0],Pae=Oae[1];function Rae(){var e=rm.useTranslation();return Et.jsxs("a",ft.__assign({"data-supertokens":"superTokensBranding",href:"https://supertokens.com?utm_campaign=poweredby",target:"_blank"},{children:[e("BRANDING_POWERED_BY_START"),Et.jsx("strong",{children:"SuperTokens"}),e("BRANDING_POWERED_BY_END")]}))}function S7(e){return e.userContext!==void 0?Et.jsx(K6,ft.__assign({userContext:e.userContext},{children:e.children})):Et.jsx(w4.Consumer,{children:function(t){return t===void 0?Et.jsx(K6,{children:e.children}):e.children}})}function jae(e){var t=e.error,r=rm.useTranslation();return Et.jsx("div",ft.__assign({"data-supertokens":"generalError"},{children:r(t)}))}var Q4e=`[data-supertokens~="container"] {
    --palette-background: 255, 255, 255;
    --palette-inputBackground: 250, 250, 250;
    --palette-inputBorder: 224, 224, 224;
    --palette-primary: 28, 34, 42;
    --palette-primaryBorder: 45, 54, 68;
    --palette-success: 65, 167, 0;
    --palette-successBackground: 217, 255, 191;
    --palette-error: 255, 23, 23;
    --palette-errorBackground: 255, 241, 235;
    --palette-textTitle: 0, 0, 0;
    --palette-textLabel: 0, 0, 0;
    --palette-textInput: 0, 0, 0;
    --palette-textPrimary: 128, 128, 128;
    --palette-textLink: 0, 122, 255;
    --palette-buttonText: 255, 255, 255;
    --palette-textGray: 54, 54, 54;
    --palette-superTokensBrandingBackground: 242, 245, 246;
    --palette-superTokensBrandingText: 173, 189, 196;
    --palette-buttonGreyedOut: 221, 221, 221;
    --palette-caution: 124, 96, 62;
    --palette-errorDark: 207, 54, 68;

    --font-size-0: 12px;
    --font-size-1: 14px;
    --font-size-2: 16px;
    --font-size-3: 19px;
    --font-size-4: 24px;
    --font-size-5: 28px;
}
/*
 * Default styles.
 */
@keyframes slideTop {
    0% {
        transform: translateY(-5px);
    }
    100% {
        transform: translateY(0px);
    }
}
@keyframes swing-in-top-fwd {
    0% {
        transform: rotateX(-100deg);
        transform-origin: top;
        opacity: 0;
    }
    100% {
        transform: rotateX(0deg);
        transform-origin: top;
        opacity: 1;
    }
}
[data-supertokens~="container"] {
    font-family: "Arial", sans-serif;
    margin: 12px auto;
    margin-top: 26px;
    margin-bottom: 26px;
    width: 420px;
    text-align: center;
    border-radius: 8px;
    box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.16);
    background-color: rgb(var(--palette-background));
}
@media (max-width: 440px) {
    [data-supertokens~="container"] {
        width: 95vw;
    }
}
[data-supertokens~="row"] {
    margin: 0 auto;
    width: 76%;
    padding-top: 30px;
    padding-bottom: 10px;
}
[data-supertokens~="superTokensBranding"] {
    display: block;
    margin: 10px auto 0;
    background: rgb(var(--palette-superTokensBrandingBackground));
    color: rgb(var(--palette-superTokensBrandingText));
    text-decoration: none;
    width: -webkit-fit-content;
    width: -moz-fit-content;
    width: fit-content;
    border-radius: 6px 6px 0 0;
    padding: 4px 9px;
    font-weight: 400;
    font-size: var(--font-size-0);
    letter-spacing: 0.4px;
}
[data-supertokens~="generalError"] {
    background: rgb(var(--palette-errorBackground));
    padding-top: 10px;
    padding-bottom: 10px;
    margin-bottom: 10px;
    margin-top: 24px;
    padding-left: 18px;
    padding-right: 18px;
    letter-spacing: 0.2px;
    font-size: var(--font-size-1);
    border-radius: 8px;
    color: rgb(var(--palette-error));
    animation: swing-in-top-fwd 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
    word-wrap: break-word;
}
[data-supertokens~="headerTitle"] {
    font-size: var(--font-size-4);
    line-height: 27.6px;
    letter-spacing: 0.58px;
    font-weight: 700;
    margin-bottom: 20px;
    color: rgb(var(--palette-textTitle));
}
[data-supertokens~="headerSubtitle"] {
    font-weight: 400;
    color: rgb(var(--palette-textGray));
    margin-bottom: 21px;
}
[data-supertokens~="headerSubtitle"][data-supertokens~="secondaryText"] {
    color: rgb(var(--palette-textGray));
    font-weight: 400;
}
[data-supertokens~="privacyPolicyAndTermsAndConditions"] {
    max-width: 300px;
    margin-top: 10px;
}
[data-supertokens~="privacyPolicyAndTermsAndConditions"] a {
    line-height: 21px;
}
/* TODO: split the link style into separate things*/
/* We add this before primary and secondary text, because if they are applied to the same element the other ones take priority */
[data-supertokens~="link"] {
    padding-left: 3px;
    padding-right: 3px;
    color: rgb(var(--palette-textLink));
    font-size: var(--font-size-1);
    cursor: pointer;
    letter-spacing: 0.16px;
    line-height: 26px;
}
[data-supertokens~="primaryText"] {
    font-size: var(--font-size-2);
    font-weight: 400;
    letter-spacing: 0.4px;
    line-height: 21px;
    color: rgb(var(--palette-textLabel));
}
[data-supertokens~="secondaryText"] {
    font-size: var(--font-size-1);
    font-weight: 400;
    letter-spacing: 0.4px;
    color: rgb(var(--palette-textPrimary));
}
[data-supertokens~="secondaryText"] strong {
    font-weight: 600;
}
[data-supertokens~="divider"] {
    margin-top: 1.5em;
    margin-bottom: 1.5em;
    border-bottom: 0.3px solid #dddddd;
    align-items: center;
    padding-bottom: 5px;
    flex: 3 3;
}
[data-supertokens~="headerTinyTitle"] {
    margin-top: 24px;
    font-size: var(--font-size-5);
    letter-spacing: 1.1px;
    font-weight: 700;
    line-height: 28px;
}
[data-supertokens~="secondaryLinkWithArrow"] {
    margin-top: 10px;
    margin-bottom: 30px;
    cursor: pointer;
}
[data-supertokens~="secondaryLinkWithArrow"]:hover {
    position: relative;
    left: 2px;
    word-spacing: 4px;
}
[data-supertokens~="generalSuccess"] {
    color: rgb(var(--palette-success));
    font-size: var(--font-size-1);
    background: rgb(var(--palette-successBackground));
    animation: swing-in-top-fwd 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
    padding: 9px 15px 9px 15px;
    border-radius: 6px;
    display: inline-block;
}
[data-supertokens~="spinner"] {
    width: 80px;
    height: auto;
    padding-top: 20px;
    padding-bottom: 40px;
    margin: 0 auto;
}
[data-supertokens~="error"] {
    color: rgb(var(--palette-error));
}
[data-supertokens~="linkButton"] {
    font-family: "Arial", sans-serif;
    background-color: transparent;
    border: 0;
}
[data-supertokens~="secondaryLinkWithLeftArrow"] {
    color: rgb(var(--palette-textGray));
    font-weight: 400;
    margin-top: 10px;
    margin-bottom: 40px;
    cursor: pointer;
}
[data-supertokens~="secondaryLinkWithLeftArrow"] svg {
    margin-right: 0.3em;
}
[data-supertokens~="secondaryLinkWithLeftArrow"]:hover svg {
    position: relative;
    left: -4px;
}
[data-supertokens~="button"] {
    font-family: "Arial", sans-serif;
    background-color: rgb(var(--palette-primary));
    color: rgb(var(--palette-buttonText));
    width: 100%;
    height: 34px;
    font-weight: 600;
    border-width: 1px;
    border-style: solid;
    border-radius: 6px;
    border-color: rgb(var(--palette-primaryBorder));
    background-position: center;
    transition: all 0.4s;
    background-size: 12000%;
    cursor: pointer;
}
[data-supertokens~="buttonGreyedOut"] {
    background-color: rgb(var(--palette-buttonGreyedOut));
    border-color: rgb(var(--palette-buttonGreyedOut));
}
[data-supertokens~="buttonWithIcon"] {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}
[data-supertokens~="button"]:disabled {
    border: none;
    cursor: no-drop;
}
[data-supertokens~="button"]:active {
    outline: none;
    transition: all 0s;
    background-size: 100%;
    filter: brightness(0.85);
}
[data-supertokens~="button"]:focus {
    outline: none;
}
[data-supertokens~="backButtonCommon"] {
    width: 16px;
    height: 13px;
}
[data-supertokens~="backButton"] {
    cursor: pointer;
    border: none;
    background-color: transparent;
    padding: 0px;
}
[data-supertokens~="backButtonPlaceholder"] {
    display: block;
}
[data-supertokens~="delayedRender"] {
    animation-duration: 0.1s;
    animation-name: animate-fade;
    animation-delay: 0.2s;
    animation-fill-mode: backwards;
}
@keyframes animate-fade {
    0% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}
[data-supertokens~="footerLinkGroupVert"] {
    display: flex;
    flex-direction: column;
    margin-top: 10px;
    gap: 24px;
}
[data-supertokens~="footerLinkGroupVert"] > div {
    cursor: pointer;
    margin: 0;
}
[data-supertokens~="footerLinkGroupVert"] [data-supertokens~="secondaryText"] {
    font-weight: 400;
}
[data-supertokens~="footerLinkGroupVert"] [data-supertokens~="secondaryLinkWithLeftArrow"] {
    font-weight: 400;
    position: relative;
    left: -6px; /* half the width of the left arrow */
}
@media (max-width: 360px) {
    [data-supertokens~="footerLinkGroupVert"] {
        flex-direction: column;
    }
    [data-supertokens~="footerLinkGroupVert"] > div {
        margin: 0 auto;
    }
}
[data-supertokens~="footerLinkGroupVert"] div:only-child {
    margin-left: auto;
    margin-right: auto;
    margin-top: 14px;
}
[data-supertokens~="withBackButton"] {
    position: relative;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
[data-supertokens~="dividerWithOr"] {
    padding-top: 5px;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    color: rgb(var(--palette-textPrimary));
}
[data-supertokens~="dividerText"] {
    flex: 1 1;
    font-weight: 400;
    font-size: var(--font-size-1);
}
[data-supertokens~="formLabelWithLinkWrapper"] {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
[data-supertokens~="formLabelLinkBtn"] {
    width: auto;
    margin-top: 0;
    line-height: 24px;
    font-size: var(--font-size-0);
}
[data-supertokens~="formLabelLinkBtn"]:hover {
    text-decoration: underline;
}
[data-supertokens~="formLabelLinkBtn"]:disabled {
    color: rgb(var(--palette-textPrimary));
    cursor: default;
    text-decoration: none;
}
[data-supertokens~="authComponentList"] {
    padding-bottom: 20px;
}
[data-supertokens~="authPageTitleOAuthClient"] {
    color: rgb(var(--palette-textGray));
    font-size: var(--font-size-1);
    font-weight: 400;
    margin: 10px 0 25px;
}
[data-supertokens~="authPageTitleOAuthClientUrl"] {
    text-decoration: none;
}
[data-supertokens~="authPageTitleOAuthClientLogo"] {
    width: 44px;
    height: 44px;
    margin-bottom: 10px;
}
[data-supertokens~="authPageTitleOAuthClient"] [data-supertokens~="authPageTitleOAuthClientName"] {
    color: rgb(var(--palette-textTitle));
}
[data-supertokens~="buttonWithArrow"] {
    border-radius: 6px;
    border: 1px solid #d0d5dd;
    width: 100%;
    color: rgb(var(--palette-textGray));
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 5px;
    margin: 24px 0;
    min-height: 48px;
    cursor: pointer;
}
[data-supertokens~="buttonWithArrow"]:hover {
    background-color: rgb(var(--palette-inputBackground));
}
[data-supertokens~="buttonWithArrow"] [data-supertokens~="secondaryText"] {
    font-weight: 700;
    font-size: var(--font-size-2);
    color: rgb(var(--palette-textGray));
    margin: 0;
}
[data-supertokens~="buttonWithArrow"]:hover [data-supertokens~="secondaryLinkWithRightArrow"] ~ svg {
    position: relative;
    left: 2px;
}
[data-supertokens~="buttonWithArrow"]:hover [data-supertokens~="secondaryLinkWithLeftArrow"] svg {
    position: relative;
    left: -2px;
}
[data-supertokens~="buttonWithArrow"] [data-supertokens~="secondaryLinkWithLeftArrow"] {
    display: flex;
    align-items: center;
}
`,J4e=function(e){var t=e.children,r=e.userStyles;return Et.jsxs(Qr.Fragment,{children:[t,Et.jsxs("style",{children:[Q4e,r.join(`
`)]})]})},E7=WE("AuthPageComponentList",function(t){for(var r=rm.useTranslation(),n=[t.authComponents[0]],i=function(s){n.push(function(){return Et.jsxs("div",ft.__assign({"data-supertokens":"dividerWithOr"},{children:[Et.jsx("div",{"data-supertokens":"divider"}),Et.jsx("div",ft.__assign({"data-supertokens":"dividerText"},{children:r("DIVIDER_OR")})),Et.jsx("div",{"data-supertokens":"divider"})]}),"divider-".concat(s))}),n.push(t.authComponents[s])},a=1;a<t.authComponents.length;++a)i(a);return Et.jsx("div",ft.__assign({"data-supertokens":"authComponentList"},{children:n.map(function(s){return s(ft.__assign({},t))})}))}),C7=WE("AuthPageFooter",function(t){var r=t.hasSeparateSignUpView,n=t.isSignUp,i=t.termsOfServiceLink,a=t.privacyPolicyLink,s=rm.useTranslation();return i===void 0&&a===void 0||r&&!n?null:Et.jsxs("div",ft.__assign({"data-supertokens":"secondaryText privacyPolicyAndTermsAndConditions"},{children:[s("AUTH_PAGE_FOOTER_START"),i!==void 0&&Et.jsx("a",ft.__assign({"data-supertokens":"link",href:i,target:"_blank",rel:"noopener noreferer"},{children:s("AUTH_PAGE_FOOTER_TOS")})),i!==void 0&&a!==void 0&&s("AUTH_PAGE_FOOTER_AND"),a!==void 0&&Et.jsx("a",ft.__assign({"data-supertokens":"link",href:a,target:"_blank",rel:"noopener noreferer"},{children:s("AUTH_PAGE_FOOTER_PP")})),s("AUTH_PAGE_FOOTER_END")]}))});function Z4e(e){var t=e.color;return Et.jsx("svg",ft.__assign({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"13",viewBox:"0 0 16 13","data-supertokens":"heavyArrowLeftIcon"},{children:Et.jsx("path",{fill:t,d:"M13 6.8h.022H3.8l2.9 2.9a.761.761 0 0 1 0 1.07l-.451.451a.754.754 0 0 1-1.064 0L.22 6.254a.759.759 0 0 1 0-1.068L5.186.22a.755.755 0 0 1 1.064 0l.45.451a.746.746 0 0 1 .22.532.724.724 0 0 1-.22.522l-2.93 2.92h9.24a.781.781 0 0 1 .764.773v.638A.766.766 0 0 1 13 6.8z",transform:"translate(1.182 .708)"})}))}function Dae(e){var t=e.onClick;return Et.jsx("button",ft.__assign({onClick:t,"data-supertokens":"backButton backButtonCommon"},{children:Et.jsx(Z4e,{color:"rgb(var(--palette-textTitle))"})}))}var k7=WE("AuthPageHeader",function(t){var r=t.onSignInUpSwitcherClick,n=t.hasSeparateSignUpView,i=t.isSignUp,a=t.showBackButton,s=t.resetFactorList,o=t.oauth2ClientInfo,l=t.headerLabel,c=t.hideSignInSwitcher,d=c===void 0?!1:c,f=rm.useTranslation();return Et.jsxs(Qr.Fragment,{children:[(o==null?void 0:o.logoUri)&&Et.jsx("img",{src:o.logoUri,alt:o.clientName,"data-supertokens":"authPageTitleOAuthClientLogo"}),Et.jsxs("div",ft.__assign({"data-supertokens":"headerTitle withBackButton"},{children:[a?Et.jsx(Dae,{onClick:s}):Et.jsx("span",{"data-supertokens":"backButtonPlaceholder backButtonCommon"}),f(l!==void 0?l:n?i?"AUTH_PAGE_HEADER_TITLE_SIGN_UP":"AUTH_PAGE_HEADER_TITLE_SIGN_IN":"AUTH_PAGE_HEADER_TITLE_SIGN_IN_AND_UP"),Et.jsx("span",{"data-supertokens":"backButtonPlaceholder backButtonCommon"})]})),o&&o.clientName!==void 0&&o.clientName.length>0&&Et.jsxs("div",ft.__assign({"data-supertokens":"authPageTitleOAuthClient"},{children:[f("AUTH_PAGE_HEADER_TITLE_SIGN_IN_UP_TO_APP"),o.clientUri!==void 0?Et.jsx("a",ft.__assign({"data-supertokens":"authPageTitleOAuthClientUrl link",href:o.clientUri},{children:o.clientName})):Et.jsx("span",ft.__assign({"data-supertokens":"authPageTitleOAuthClientName"},{children:o.clientName}))]})),!d&&n&&(i?Et.jsxs("div",ft.__assign({"data-supertokens":"headerSubtitle secondaryText"},{children:[f("AUTH_PAGE_HEADER_SUBTITLE_SIGN_UP_START"),Et.jsx("span",ft.__assign({"data-supertokens":"link",onClick:r},{children:f("AUTH_PAGE_HEADER_SUBTITLE_SIGN_UP_SIGN_IN_LINK")})),f("AUTH_PAGE_HEADER_SUBTITLE_SIGN_UP_END")]})):Et.jsxs("div",ft.__assign({"data-supertokens":"headerSubtitle secondaryText"},{children:[f("AUTH_PAGE_HEADER_SUBTITLE_SIGN_IN_START"),Et.jsx("span",ft.__assign({"data-supertokens":"link",onClick:r},{children:f("AUTH_PAGE_HEADER_SUBTITLE_SIGN_IN_SIGN_UP_LINK")})),f("AUTH_PAGE_HEADER_SUBTITLE_SIGN_IN_END")]}))),Et.jsx("div",{"data-supertokens":"divider"})]})});function _7(e){return e.fullPageCompWithPreloadedInfo?Et.jsx(Et.Fragment,{children:e.fullPageCompWithPreloadedInfo.component(ft.__assign(ft.__assign({},e),{preloadInfo:e.fullPageCompWithPreloadedInfo.preloadInfo,showBackButton:e.showBackButton}))}):Et.jsxs("div",ft.__assign({"data-supertokens":"container authPage ".concat(e.factorIds.length>1?"multiFactor":"singleFactor")},{children:[Et.jsxs("div",ft.__assign({"data-supertokens":"row"},{children:[Et.jsx(k7,{factorIds:e.factorIds,isSignUp:e.isSignUp,onSignInUpSwitcherClick:e.onSignInUpSwitcherClick,hasSeparateSignUpView:e.hasSeparateSignUpView,resetFactorList:e.resetFactorList,showBackButton:e.showBackButton,oauth2ClientInfo:e.oauth2ClientInfo}),e.error!==void 0&&Et.jsx(jae,{error:e.error}),Et.jsx(E7,ft.__assign({},e)),Et.jsx(C7,{factorIds:e.factorIds,isSignUp:e.isSignUp,hasSeparateSignUpView:e.hasSeparateSignUpView,privacyPolicyLink:e.privacyPolicyLink,termsOfServiceLink:e.termsOfServiceLink})]})),Et.jsx(Rae,{})]}))}function e3e(e){var t=Zr.SuperTokens.getInstanceOrThrow().rootStyle;return Et.jsx(S7,ft.__assign({userContext:e.userContext},{children:Et.jsx(J4e,ft.__assign({userStyles:[t]},{children:Et.jsx(_7,ft.__assign({},e))}))}))}var t3e={signin:"SOMETHING_WENT_WRONG_ERROR",no_email_present:"THIRD_PARTY_ERROR_NO_EMAIL",restart_link:"ERROR_SIGN_IN_UP_LINK"},Mae=function(e){var t=Y4e();return Et.jsx(K6,ft.__assign({userContext:e.userContext},{children:Et.jsx(A7,ft.__assign({requireAuth:!1,doRedirection:!1},{children:Et.jsx(y4.Provider,ft.__assign({value:t},{children:Et.jsx(r3e,ft.__assign({},e))}))}))}))},r3e=function(e){var t,r,n,i,a;if(e.factors!==void 0&&e.factors.length===0)throw new Error("The factors array cannot be empty");var s=j4e.WindowHandlerReference.getReferenceOrThrow().windowHandler,o=new URLSearchParams(s.location.getSearch()),l=o.get("show"),c=e.useSignUpStateFromQueryString!==!0||l===null?void 0:l==="signup",d=o.get("error")!==null&&(r=(t=o.get("message"))!==null&&t!==void 0?t:o.get("error"))!==null&&r!==void 0?r:void 0;d=d!==void 0?(n=t3e[d])!==null&&n!==void 0?n:d:void 0;var f=Qr.useRef(l),p=Qr.useRef(d),m=o.get("loginChallenge"),x=o.get("forceFreshAuth")==="true",y=Iae(),b=pb(),S=ft.useRethrowInRender(),_=Qr.useState(void 0),C=_[0],A=_[1],j=Qr.useState(void 0),P=j[0],O=j[1],D=Qr.useState(d),L=D[0],B=D[1],H=Qr.useState(!1),z=H[0],ie=H[1],X=Zr.SuperTokens.getInstanceOrThrow(),W=Qr.useState(e.factors),Q=W[0],te=W[1],J=Qr.useState((a=(i=e.isSignUp)!==null&&i!==void 0?i:c)!==null&&a!==void 0?a:X.defaultToSignUp),Y=J[0],pe=J[1],_e=Qr.useState(0),ee=_e[0],de=_e[1],G=Qr.useRef({buildReq:void 0});Qr.useEffect(function(){if(e.useSignUpStateFromQueryString&&f.current!==l){var De=e.useSignUpStateFromQueryString!==!0||l===null?void 0:l==="signup";f.current=l;var $e=De??X.defaultToSignUp;Y!==$e&&(pe($e),de(function(et){return et+1}))}}),Qr.useEffect(function(){p.current!==d&&(p.current=d,B(d))});var q=Qr.useCallback(function(){e.useSignUpStateFromQueryString===!0&&ft.updateQueryParam("show",Y?"signin":"signup"),B(void 0),pe(!Y),de(function(De){return De+1})},[Y,pe,de,B,e.useSignUpStateFromQueryString]);Qr.useEffect(function(){C||Zr.Multitenancy.getInstanceOrThrow().getCurrentDynamicLoginMethods({userContext:b}).then(function(De){return A(De)},function(De){return S(De)})},[C,A]),ft.useOnMountAPICall(function(){return ft.__awaiter(void 0,void 0,void 0,function(){var De;return ft.__generator(this,function($e){return P?[2]:(De=C_.OAuth2Provider.getInstance(),De!==void 0&&m!==null?[2,De.webJSRecipe.getLoginChallengeInfo({loginChallenge:m,userContext:b})]:[2,void 0])})})},function(De){return ft.__awaiter(void 0,void 0,void 0,function(){return ft.__generator(this,function($e){return De!==void 0&&(De.status==="OK"?O(De.info):B("SOMETHING_WENT_WRONG_ERROR")),[2]})})},function(){ft.clearQueryParams(["loginChallenge"]),B("SOMETHING_WENT_WRONG_ERROR")}),Qr.useEffect(function(){if(!z&&y.loading===!1)if(y.doesSessionExist)if(e.onSessionAlreadyExists!==void 0)e.onSessionAlreadyExists();else if(e.redirectOnSessionExists!==!1&&!x){In.Session.getInstanceOrThrow().config.onHandleEvent({action:"SESSION_ALREADY_EXISTS"});var De=C_.OAuth2Provider.getInstance();m!==null&&De!==void 0?function(){return ft.__awaiter(this,void 0,void 0,function(){var $e;return ft.__generator(this,function(et){switch(et.label){case 0:return[4,De.webJSRecipe.getRedirectURLToContinueOAuthFlow({loginChallenge:m,userContext:b})];case 1:return $e=et.sent().frontendRedirectTo,[2,In.Session.getInstanceOrThrow().validateGlobalClaimsAndHandleSuccessRedirection({action:"SUCCESS_OAUTH2",frontendRedirectTo:$e,createdNewUser:!1,isNewRecipeUser:!1,newSessionCreated:!1,tenantIdFromQueryParams:ft.getTenantIdFromQueryParams(),recipeId:In.Session.RECIPE_ID},In.Session.RECIPE_ID,ft.getRedirectToPathFromURL(),b,e.navigate)]}})})}().catch(S):In.Session.getInstanceOrThrow().validateGlobalClaimsAndHandleSuccessRedirection(void 0,In.Session.RECIPE_ID,ft.getRedirectToPathFromURL(),b,e.navigate).catch(S)}else ie(!0);else ie(!0)},[y.loading]);var ne=Qr.useState(),Se=ne[0],re=ne[1],ae=Q!==void 0&&(e.factors===void 0||e.factors.some(function(De){return!Q.includes(De)})),ge=Zr.SuperTokens.getInstanceOrThrow(),Ee=ge.privacyPolicyLink,V=ge.termsOfServiceLink;Qr.useEffect(function(){var De=new AbortController;if(G.current.buildReq!==ee)return z&&(C!==void 0||!Zr.SuperTokens.usesDynamicLoginMethods)&&n3e(e.preBuiltUIList,C,b,Q,Y,re,De.signal).then(function(){G.current.buildReq=ee},S),function(){De.abort()}},[z,ee,de,e.preBuiltUIList,C,b,Q,Y,re,S]);var Ae=Qr.useCallback(function(De){return ft.__awaiter(void 0,void 0,void 0,function(){var $e,et;return ft.__generator(this,function(ut){switch(ut.label){case 0:return $e=C_.OAuth2Provider.getInstance(),m===null||$e===void 0?[2,In.Session.getInstanceOrThrow().validateGlobalClaimsAndHandleSuccessRedirection(ft.__assign(ft.__assign({},De),{action:"SUCCESS",tenantIdFromQueryParams:ft.getTenantIdFromQueryParams(),redirectToPath:ft.getRedirectToPathFromURL()}),De.recipeId,ft.getRedirectToPathFromURL(),b,e.navigate)]:[4,$e.webJSRecipe.getRedirectURLToContinueOAuthFlow({loginChallenge:m,userContext:b})];case 1:return et=ut.sent().frontendRedirectTo,[2,In.Session.getInstanceOrThrow().validateGlobalClaimsAndHandleSuccessRedirection(ft.__assign(ft.__assign({},De),{action:"SUCCESS_OAUTH2",tenantIdFromQueryParams:ft.getTenantIdFromQueryParams(),frontendRedirectTo:et}),De.recipeId,ft.getRedirectToPathFromURL(),b,e.navigate)]}})})},[m]),Pe=Se!==void 0&&(m===null||P!==void 0||C_.OAuth2Provider.getInstance()===void 0)?ft.__assign(ft.__assign({},Se),{oauth2ClientInfo:P,onAuthSuccess:Ae,error:L,onError:function(De){B(De)},clearError:function(){return B(void 0)},navigate:e.navigate,onSignInUpSwitcherClick:q,privacyPolicyLink:Ee,rebuildAuthPage:function(){return de(function(De){return De+1})},setFactorList:function(De){te(De),de(function($e){return $e+1})},resetFactorList:function(){te(e.factors),de(function(De){return De+1})},showBackButton:ae,termsOfServiceLink:V,userContext:b}):void 0,ze=Qr.useMemo(function(){var De=Zr.defaultTranslationsCommon;if(Se!==void 0)for(var $e=0,et=e.preBuiltUIList;$e<et.length;$e++){var ut=et[$e];De=ft.mergeObjects(De,ut.languageTranslations)}return De=ft.mergeObjects(De,X.languageTranslations.userTranslationStore),De},[X.languageTranslations.userTranslationStore,Se]);return Pe===void 0?Et.jsx(b4,{}):Et.jsx(Tae,ft.__assign({value:C},{children:Et.jsx(rm.TranslationContextProvider,ft.__assign({defaultLanguage:X.languageTranslations.defaultLanguage,defaultStore:ze,translationControlEventSource:X.languageTranslations.translationEventSource,userTranslationFunc:X.languageTranslations.userTranslationFunc},{children:Et.jsx(b7,ft.__assign({useShadowDom:X.useShadowDom},{children:Et.jsxs(Qr.Fragment,{children:[e.children===void 0&&Et.jsx(e3e,ft.__assign({},Pe)),e.children&&lc.default.Children.map(e.children,function(De){return lc.default.isValidElement(De)?lc.default.cloneElement(De,Pe):De})]})}))}))}))};function n3e(e,t,r,n,i,a,s){var o,l,c,d,f;return ft.__awaiter(this,void 0,void 0,function(){var p,m,x,y,b,S,_,C,A,j,P,O,D,L,B,H,z,ie,X,W,Q,te,J,Y;return ft.__generator(this,function(pe){switch(pe.label){case 0:if(p=Zr.SuperTokens.getInstanceOrThrow().recipeList.filter(function(_e){return"firstFactorIds"in _e}),m=(c=(o=n??(t==null?void 0:t.firstFactors))!==null&&o!==void 0?o:(l=KN.MultiFactorAuth.getInstance())===null||l===void 0?void 0:l.config.firstFactors)!==null&&c!==void 0?c:p.reduce(function(_e,ee){return ft.__spreadArray(ft.__spreadArray([],_e,!0),ee.getFirstFactorsForAuthPage(),!0)},[]),n===void 0&&(t==null?void 0:t.firstFactors)===void 0&&((d=KN.MultiFactorAuth.getInstance())===null||d===void 0?void 0:d.config.firstFactors)===void 0&&(x=p.filter(function(_e){return!e.some(function(ee){return ee.recipeInstance.recipeID===_e.recipeID})}),x.length>0))throw new Error("Factor list not set but PreBuiltUI not added for ".concat(x.map(function(_e){return _e.recipeID})));if(m.length===0)throw new Error("There are no enabled factors to show");if(m.includes(In.FactorIds.THIRDPARTY)&&(y=e.find(function(_e){return _e.recipeInstance.recipeID===In.FactorIds.THIRDPARTY}),y!==void 0&&y.recipeInstance.config.signInAndUpFeature.providers.length===0&&(!Zr.SuperTokens.usesDynamicLoginMethods||t.thirdparty.providers.length===0)&&(m=m.filter(function(_e){return _e!==In.FactorIds.THIRDPARTY}),m.length===0)))throw new Error("The only enabled first factor is thirdparty, but no providers were defined. Please define at least one provider.");for(b=e.some(function(_e){return _e.requiresSignUpPage&&_e.recipeInstance.firstFactorIds.some(function(ee){return m.includes(ee)})}),S=b&&i,_=[],C=0,A=e;C<A.length;C++)j=A[C],_.push.apply(_,j.getAuthComponents());P=0,O=_,pe.label=1;case 1:return P<O.length?(D=O[P],D.type!=="FULL_PAGE"?[3,3]:[4,D.preloadInfoAndRunChecks(m,r,S)]):[3,4];case 2:if(L=pe.sent(),s.aborted)return[2];if(L.shouldDisplay)return a({authComponents:[],fullPageCompWithPreloadedInfo:{component:D.component,preloadInfo:L.preloadInfo},isSignUp:S,hasSeparateSignUpView:b,factorIds:m}),[2];pe.label=3;case 3:return P++,[3,1];case 4:if(s.aborted)return[2];if(B=_.filter(function(_e){return _e.type!=="FULL_PAGE"&&_e.factorIds.every(function(ee){return m.includes(ee)})}),B=B.filter(function(_e){return _e.type==="SIGN_IN_UP"||(S?_e.type==="SIGN_UP":_e.type==="SIGN_IN")}),B.sort(function(_e,ee){return ee.factorIds.length-_e.factorIds.length}),H=L4e.selectComponentsToCoverAllFirstFactors(B,m),H===void 0){for(z=new Set,ie=0,X=B;ie<X.length;ie++)for(W=X[ie],Q=0,te=W.factorIds;Q<te.length;Q++)J=te[Q],z.add(J);throw Y=n!==void 0?"local state or props":(t==null?void 0:t.firstFactors)!==void 0?"dynamic tenant configuration":((f=KN.MultiFactorAuth.getInstance())===null||f===void 0?void 0:f.config.firstFactors)!==void 0?"the config passed to the MFA recipe":"all recipes initialized",new Error("Couldn't cover all first factors: ".concat(m.join(", ")," (from ").concat(Y,"), available components: ").concat(Array.from(z).join(", "),`.
`)+`You may have missed adding a recipe into the list of prebuiltUIs passed to list of prebuiltUIs passed to getSuperTokensRoutesForReactRouterDom, canHandleRoute, handleRoute functions or the AuthPage component.
Another common error is adding a non-existent factor id into the list, e.g.: passwordless instead of otp-email/phone`)}return a({authComponents:H.sort(function(_e,ee){return _e.displayOrder-ee.displayOrder}).map(function(_e){return _e.component}),factorIds:m,hasSeparateSignUpView:b,isSignUp:S}),[2]}})})}var Rv=[{rid:"thirdpartyemailpassword",includes:["thirdparty","emailpassword"],factorsProvided:[In.FactorIds.THIRDPARTY,In.FactorIds.EMAILPASSWORD]},{rid:"thirdpartypasswordless",includes:["thirdparty","passwordless"],factorsProvided:[In.FactorIds.THIRDPARTY,In.FactorIds.OTP_PHONE,In.FactorIds.OTP_EMAIL,In.FactorIds.LINK_PHONE,In.FactorIds.LINK_EMAIL]},{rid:"emailpassword",includes:["emailpassword"],factorsProvided:[In.FactorIds.EMAILPASSWORD]},{rid:"passwordless",includes:["passwordless"],factorsProvided:[In.FactorIds.OTP_PHONE,In.FactorIds.OTP_EMAIL,In.FactorIds.LINK_PHONE,In.FactorIds.LINK_EMAIL]},{rid:"thirdparty",includes:["thirdparty"],factorsProvided:[In.FactorIds.THIRDPARTY]}];function yq(e,t){for(var r,n,i=function(D,L){if(e.every(function(H){return L.includes(H)})){var B=t.find(function(H){return H.recipeID===D});if(B&&(r=D,n=B,e.length===L.length))return ft.logDebugMessage("Rendering ".concat(D," because it matches factors: ").concat(e," exactly")),{value:B}}},a=0,s=Rv;a<s.length;a++){var o=s[a],l=o.rid,c=o.factorsProvided,d=i(l,c);if(typeof d=="object")return d.value}if(n!==void 0)return ft.logDebugMessage("Rendering ".concat(r," to cover ").concat(e," as a fallback")),n;var f=[];e.includes(In.FactorIds.EMAILPASSWORD)&&f.push("emailpassword"),e.includes(In.FactorIds.THIRDPARTY)&&f.push("thirdparty"),[In.FactorIds.OTP_PHONE,In.FactorIds.OTP_EMAIL,In.FactorIds.LINK_PHONE,In.FactorIds.LINK_EMAIL].some(function(D){return e.includes(D)})&&f.push("passwordless"),ft.logDebugMessage("Choosing component using fallback logic w/ ".concat(f.join(", ")," enabled"));for(var p=f.length,m=function(D,L){if(p===L.length&&L.every(function(H){return f.includes(H)})){var B=t.find(function(H){return H.recipeID===D});if(B)return{value:B}}},x=0,y=Rv;x<y.length;x++){var b=y[x],l=b.rid,S=b.includes,_=m(l,S);if(typeof _=="object")return _.value}for(var C=function(D,L){if(L.some(function(H){return f.includes(H)})){var B=t.find(function(H){return H.recipeID===D});if(B)return{value:B}}},A=0,j=Rv;A<j.length;A++){var P=j[A],l=P.rid,S=P.includes,O=C(l,S);if(typeof O=="object")return O.value}throw new Error("No enabled recipes overlap with the requested firstFactors: "+e)}var N7=function(){function e(){var t=this;this.getPathsToFeatureComponentWithRecipeIdMap=function(){if(t.pathsToFeatureComponentWithRecipeIdMap!==void 0)return t.pathsToFeatureComponentWithRecipeIdMap;for(var r={},n=t.getFeatures(),i=Object.keys(n),a=0;a<i.length;a++){var s=i[a];r[s]===void 0&&(r[s]=[]),r[s].push(n[s])}return t.pathsToFeatureComponentWithRecipeIdMap=r,t.pathsToFeatureComponentWithRecipeIdMap},this.requiresSignUpPage=!1}return e.getMatchingComponentForRouteAndRecipeIdFromPreBuiltUIList=function(t,r,n,i){var a=t.getAsStringDangerous(),s=a===Zr.SuperTokens.getInstanceOrThrow().appInfo.websiteBasePath.getAsStringDangerous(),o=r.reduce(function(p,m){for(var x=m.getPathsToFeatureComponentWithRecipeIdMap(),y=function(j,P){(j===a||new RegExp("^"+j.replace(/:\w+/g,"[^/]+").replace(/\/\*/g,"/[^/]+")+"$").test(a))&&(p=p.concat(P.map(function(O){return{comp:O,route:j}})))},b=0,S=Object.entries(x);b<S.length;b++){var _=S[b],C=_[0],A=_[1];y(C,A)}return p},[]),l=o.find(function(p){return p.comp.matches()}),c;o.length===0?c=void 0:l!==void 0?c=l.comp:c=o[0].comp;var d=o.find(function(p){var m=Rv.map(function(x){return x.rid});return!m.includes(p.comp.recipeID)||p.route!==Zr.SuperTokens.getInstanceOrThrow().appInfo.websiteBasePath.getAsStringDangerous()});if(d)return d.comp;if(n)return c;var f=KN.MultiFactorAuth.getInstance();if(Zr.SuperTokens.usesDynamicLoginMethods===!1)return l?l.comp:s&&f&&f.config.firstFactors!==void 0?yq(f.config.firstFactors,o.map(function(p){return p.comp})):c;if(i===void 0)throw new Error("Should never come here: dynamic login methods info has not been loaded but recipeRouter rendered");if(l&&(!Rv.map(function(p){return p.rid}).includes(l.comp.recipeID)||Rv.some(function(p){return p.rid===l.comp.recipeID&&p.factorsProvided.some(function(m){return i.firstFactors.includes(m)})})))return l.comp;if(s)return yq(i.firstFactors,o.map(function(p){return p.comp}))},e}();function Rg(e){var t,r,n=pb(),i=ft.useRethrowInRender(),a=Qr.useState(void 0),s=a[0],o=a[1],l=(t=e.getReactRouterDomWithCustomHistory())===null||t===void 0?void 0:t.useHistoryCustom(),c=e.path,d=c===Zr.SuperTokens.getInstanceOrThrow().appInfo.websiteBasePath.getAsStringDangerous(),f=Zr.SuperTokens.getInstanceOrThrow().pluginRouteHandlers,p=(r=e.getReactRouterDomWithCustomHistory())===null||r===void 0?void 0:r.useLocation(),m=lc.default.useMemo(function(){if(!d){var x=new U4e.default(c),y=f.find(function(S){return S.path===c});if(y)return{component:y.handler,recipeId:void 0};if(s!==void 0||Zr.SuperTokens.usesDynamicLoginMethods===!1){var b=N7.getMatchingComponentForRouteAndRecipeIdFromPreBuiltUIList(x,e.preBuiltUIList,!1,s);return b===void 0&&Zr.SuperTokens.usesDynamicLoginMethods===!0&&Lae({navigate:l,redirectBack:!1}),b}}},[c,p,s,e.preBuiltUIList]);return Qr.useEffect(function(){s||Zr.Multitenancy.getInstanceOrThrow().getCurrentDynamicLoginMethods({userContext:n}).then(function(x){return o(x)},function(x){return i(x)})},[s,o]),d?Et.jsx(Mae,{preBuiltUIList:e.preBuiltUIList,navigate:l,useSignUpStateFromQueryString:!0}):Zr.SuperTokens.usesDynamicLoginMethods&&s===void 0?Et.jsx(b4,{}):m===void 0||s===void 0&&Zr.SuperTokens.usesDynamicLoginMethods?null:Et.jsx(m.component,{navigate:l})}function i3e(e){var t=e.getReactRouterDomWithCustomHistory,r=e.recipeList,n=e.basePath,i=t();if(i===void 0)return[];for(var a=i.router.Route,s=Object.values(r.reduce(function(p,m){var x=m.getPathsToFeatureComponentWithRecipeIdMap();return Object.keys(x).forEach(function(y){y=y===""?"/":y;var b=bq(n,y);y in p||(p[y]=Et.jsx(a,ft.__assign({exact:!0,path:b},{children:Et.jsx(Rg,{getReactRouterDomWithCustomHistory:t,preBuiltUIList:r,path:y})}),"st-".concat(y)))}),p},{})),o=Zr.SuperTokens.getInstanceOrThrow().pluginRouteHandlers,l=0,c=o;l<c.length;l++){var d=c[l],f=d.path;s.push(Et.jsx(a,ft.__assign({exact:!0,path:f},{children:Et.jsx(Rg,{getReactRouterDomWithCustomHistory:t,preBuiltUIList:r,path:f})}),"st-plugin-".concat(f)))}if(!Zr.SuperTokens.getInstanceOrThrow().disableAuthRoute&&r.some(function(p){return p.getAuthComponents().length!==0})){var f=Zr.SuperTokens.getInstanceOrThrow().appInfo.websiteBasePath.appendPath(new _ae.default("/")).getAsStringDangerous();s.push(Et.jsx(a,ft.__assign({exact:!0,path:bq(n,f)},{children:Et.jsx(Rg,{getReactRouterDomWithCustomHistory:t,preBuiltUIList:r,path:f})}),"st-/auth"))}return s}function bq(e,t){var r=t;if(e!==void 0)if(r.startsWith(e))r=r.slice(e.length),r.startsWith("/")||(r="/"+r);else throw new Error("basePath has to be a prefix of websiteBasePath passed to SuperTokens.init");return r}function a3e(e){var t=e.getReactRouterDomWithCustomHistory,r=e.recipeList,n=e.basePath,i=t();if(i===void 0)return[];for(var a=i.router.Route,s=Object.values(r.reduce(function(p,m){var x=m.getPathsToFeatureComponentWithRecipeIdMap();return Object.keys(x).forEach(function(y){y=y===""?"/":y;var b=wq(n,y);y in p||(p[y]=Et.jsx(a,{path:b,element:Et.jsx(Rg,{getReactRouterDomWithCustomHistory:t,preBuiltUIList:r,path:y})},"st-".concat(y)))}),p},{})),o=Zr.SuperTokens.getInstanceOrThrow().pluginRouteHandlers,l=0,c=o;l<c.length;l++){var d=c[l],f=d.path;s.push(Et.jsx(a,{path:f,element:Et.jsx(Rg,{getReactRouterDomWithCustomHistory:t,preBuiltUIList:r,path:f})},"st-plugin-".concat(f)))}if(!Zr.SuperTokens.getInstanceOrThrow().disableAuthRoute&&r.some(function(p){return p.getAuthComponents().length!==0})){var f=Zr.SuperTokens.getInstanceOrThrow().appInfo.websiteBasePath.appendPath(new _ae.default("/")).getAsStringDangerous();s.push(Et.jsx(a,{path:wq(n,f),element:Et.jsx(Rg,{getReactRouterDomWithCustomHistory:t,preBuiltUIList:r,path:f})},"st-/auth"))}return s}function wq(e,t){if(e!==void 0)if(t.startsWith(e))t=t.slice(e.length),t.startsWith("/")||(t="/"+t);else throw new Error("basePath has to be a prefix of websiteBasePath passed to SuperTokens.init");return t}var qx=function(){function e(){}return e.getSuperTokensRoutesForReactRouterDom=function(t,r,n){if(r===void 0&&(r=[]),t===void 0||r.length===0)throw new Error('Please use getSuperTokensRoutesForReactRouterDom like getSuperTokensRoutesForReactRouterDom(require("react-router-dom"), [EmailPasswordPreBuiltUI]) in your render function');var i=r.map(function(s){return s.getInstanceOrInitAndGetInstance()});if(e.reactRouterDomIsV6===void 0&&(e.reactRouterDomIsV6=t.withRouter===void 0),e.reactRouterDomIsV6){if(e.reactRouterDom===void 0){var a=function(){var s=t.useNavigate(),o=lc.default.useState(void 0),l=o[0],c=o[1];return lc.default.useEffect(function(){l!==void 0&&(c(void 0),s(l))},[l,s,c]),c};e.reactRouterDom={router:t,useHistoryCustom:a,useLocation:t.useLocation}}return a3e({getReactRouterDomWithCustomHistory:e.getReactRouterDomWithCustomHistory,recipeList:i,basePath:n})}return e.reactRouterDom===void 0&&(e.reactRouterDom={router:t,useHistoryCustom:t.useHistory,useLocation:t.useLocation}),i3e({getReactRouterDomWithCustomHistory:e.getReactRouterDomWithCustomHistory,recipeList:i,basePath:n})},e.canHandleRoute=function(t){var r=t.map(function(a){return a.getInstanceOrInitAndGetInstance()}),n=ft.getCurrentNormalisedUrlPath().getAsStringDangerous(),i=n===Zr.SuperTokens.getInstanceOrThrow().appInfo.websiteBasePath.getAsStringDangerous();return i?!Zr.SuperTokens.getInstanceOrThrow().disableAuthRoute:N7.getMatchingComponentForRouteAndRecipeIdFromPreBuiltUIList(ft.getCurrentNormalisedUrlPath(),r,!0)!==void 0},e.getRoutingComponent=function(t){var r=t.map(function(n){return n.getInstanceOrInitAndGetInstance()});return Et.jsx(Rg,{getReactRouterDomWithCustomHistory:e.getReactRouterDomWithCustomHistory,path:ft.getCurrentNormalisedUrlPath().getAsStringDangerous(),preBuiltUIList:r})},e.languageTranslations=Zr.defaultTranslationsCommon,e.getReactRouterDomWithCustomHistory=function(){return e.reactRouterDom},e.AuthPage=function(t){return Et.jsx(Mae,ft.__assign({},t,{preBuiltUIList:t.preBuiltUIList.map(function(r){return r.getInstanceOrInitAndGetInstance()})}))},e.AuthPageTheme=_7,e.AuthPageFooter=C7,e.AuthPageHeader=k7,e.AuthPageComponentList=E7,e.AuthRecipeComponentsOverrideContextProvider=Pae,e}(),s3e=qx.languageTranslations,o3e=qx.getSuperTokensRoutesForReactRouterDom,l3e=qx.canHandleRoute,c3e=qx.getRoutingComponent,u3e=qx.AuthPage,d3e=function(e){var t,r=e.children,n=ft.__rest(e,["children"]),i=Qr.useRef(n.requireAuth);if(n.requireAuth!==i.current)throw new Error('requireAuth prop should not change. If you are seeing this, it probably means that you are using SessionAuth in multiple routes with different values for requireAuth. To solve this, try adding the "key" prop to all uses of SessionAuth like <SessionAuth key="someUniqueKeyPerRoute" requireAuth={...}>');var a=Qr.useState({loading:!0}),s=a[0],o=a[1],l=Qr.useCallback(function(S){o(function(_){return JSON.stringify(_)!==JSON.stringify(S)?S:_})},[o]),c=Qr.useRef(),d=Qr.useRef((t=qx.getReactRouterDomWithCustomHistory())===null||t===void 0?void 0:t.useHistoryCustom),f;try{d.current&&(f=d.current())}catch{}var p=pb(),m=ft.useRethrowInRender(),x=Qr.useCallback(function(){Zr.SuperTokens.getInstanceOrThrow().redirectToAuth({navigate:f,userContext:p,redirectBack:!0})},[]),y=Qr.useCallback(function(){return ft.__awaiter(void 0,void 0,void 0,function(){var S,_,C,A,j;return ft.__generator(this,function(P){switch(P.label){case 0:return c.current===void 0&&(c.current=In.Session.getInstanceOrThrow()),[4,c.current.doesSessionExist({userContext:p})];case 1:if(S=P.sent(),S===!1)return[2,{loading:!1,doesSessionExist:!1,accessTokenPayload:{},invalidClaims:[],userId:""}];P.label=2;case 2:return P.trys.push([2,4,,6]),[4,c.current.validateClaims({overrideGlobalClaimValidators:n.overrideGlobalClaimValidators,userContext:p})];case 3:return _=P.sent(),[3,6];case 4:return C=P.sent(),[4,c.current.doesSessionExist({userContext:p})];case 5:if(P.sent())throw C;return[2,{loading:!1,doesSessionExist:!1,accessTokenPayload:{},invalidClaims:[],userId:""}];case 6:return P.trys.push([6,9,,11]),j={loading:!1,doesSessionExist:!0,invalidClaims:_},[4,c.current.getAccessTokenPayloadSecurely({userContext:p})];case 7:return j.accessTokenPayload=P.sent(),[4,c.current.getUserId({userContext:p})];case 8:return[2,(j.userId=P.sent(),j)];case 9:return A=P.sent(),[4,c.current.doesSessionExist({userContext:p})];case 10:if(P.sent())throw A;return[2,{loading:!1,doesSessionExist:!1,accessTokenPayload:{},invalidClaims:[],userId:""}];case 11:return[2]}})})},[]),b=Qr.useCallback(function(S){return ft.__awaiter(void 0,void 0,void 0,function(){var _,C;return ft.__generator(this,function(A){switch(A.label){case 0:if(s.loading===!1)return[2];if(n.doRedirection===!1)return[3,8];if(!S.doesSessionExist&&n.requireAuth!==!1)return x(),[2];if(S.invalidClaims.length===0)return[3,8];_=void 0,A.label=1;case 1:return A.trys.push([1,6,,7]),[4,In.getFailureRedirectionInfo({invalidClaims:S.invalidClaims,overrideGlobalClaimValidators:n.overrideGlobalClaimValidators,userContext:p})];case 2:return _=A.sent(),_.redirectPath===void 0?[3,5]:In.validateAndCompareOnFailureRedirectionURLToCurrent(_.redirectPath)?(l(S),[2]):[3,3];case 3:return[4,Zr.SuperTokens.getInstanceOrThrow().redirectToUrl(_.redirectPath,f)];case 4:return[2,A.sent()];case 5:return[3,7];case 6:throw C=A.sent(),m(C),C;case 7:if(n.accessDeniedScreen!==void 0&&_.failedClaim!==void 0)return console.warn({message:"Showing access denied screen because a claim validator failed",claimValidationError:_.failedClaim}),[2,l(ft.__assign(ft.__assign({},S),{accessDeniedValidatorError:_.failedClaim}))];A.label=8;case 8:return l(S),[2]}})})},[s.loading,n.doRedirection,n.requireAuth,n.overrideGlobalClaimValidators,n.accessDeniedScreen,x,p,f]);return ft.useOnMountAPICall(y,b),Qr.useEffect(function(){function S(_){return ft.__awaiter(this,void 0,void 0,function(){var C,A,j,P;return ft.__generator(this,function(O){switch(O.label){case 0:switch(C=_.action,C){case"SESSION_CREATED":return[3,1];case"REFRESH_SESSION":return[3,1];case"ACCESS_TOKEN_PAYLOAD_UPDATED":return[3,1];case"API_INVALID_CLAIM":return[3,1];case"SIGN_OUT":return[3,11];case"UNAUTHORISED":return[3,12]}return[3,13];case 1:return[4,c.current.validateClaims({overrideGlobalClaimValidators:n.overrideGlobalClaimValidators,userContext:p})];case 2:if(A=O.sent(),n.doRedirection===!1)return[3,10];j=void 0,O.label=3;case 3:return O.trys.push([3,8,,9]),[4,In.getFailureRedirectionInfo({invalidClaims:A,overrideGlobalClaimValidators:n.overrideGlobalClaimValidators,userContext:p})];case 4:return j=O.sent(),j.redirectPath?In.validateAndCompareOnFailureRedirectionURLToCurrent(j.redirectPath)?(l(ft.__assign(ft.__assign({},_.sessionContext),{loading:!1,invalidClaims:A})),[3,7]):[3,5]:[3,7];case 5:return[4,Zr.SuperTokens.getInstanceOrThrow().redirectToUrl(j.redirectPath,f)];case 6:return[2,O.sent()];case 7:return[3,9];case 8:throw P=O.sent(),m(P),P;case 9:if(n.accessDeniedScreen!==void 0&&j.failedClaim!==void 0)return console.warn({message:"Showing access denied screen because a claim validator failed",claimValidationError:j.failedClaim}),[2,l(ft.__assign(ft.__assign({},_.sessionContext),{loading:!1,invalidClaims:A,accessDeniedValidatorError:j.failedClaim}))];O.label=10;case 10:return l(ft.__assign(ft.__assign({},_.sessionContext),{loading:!1,invalidClaims:A})),[2];case 11:return l(ft.__assign(ft.__assign({},_.sessionContext),{loading:!1,invalidClaims:[]})),[2];case 12:return l(ft.__assign(ft.__assign({},_.sessionContext),{loading:!1,invalidClaims:[]})),n.onSessionExpired!==void 0?n.onSessionExpired():n.requireAuth!==!1&&n.doRedirection!==!1&&x(),[2];case 13:return[2]}})})}if(c.current===void 0&&(c.current=In.Session.getInstanceOrThrow()),s.loading===!1)return c.current.addEventListener(S)},[n,l,s.loading,p,f,x]),n.requireAuth!==!1&&(s.loading||!s.doesSessionExist)?null:!s.loading&&s.accessDeniedValidatorError&&n.accessDeniedScreen?Et.jsx(n.accessDeniedScreen,{userContext:p,navigate:f,validationError:s.accessDeniedValidatorError}):Et.jsx(w7.Provider,ft.__assign({value:s},{children:r}))},A7=function(e){return Et.jsx(S7,ft.__assign({userContext:e.userContext},{children:Et.jsx(d3e,ft.__assign({},e))}))},Fae=function(e){return Et.jsx(A7,ft.__assign({},e,{requireAuth:!1,doRedirection:!1}))},mb=function(){function e(){}e.init=function(r){Zr.SuperTokens.init(r)},e.changeLanguage=function(r){return Zr.SuperTokens.getInstanceOrThrow().changeLanguage(r)},e.loadTranslation=function(r){return Zr.SuperTokens.getInstanceOrThrow().loadTranslation(r)},e.isRecipeInitialized=function(r){return Zr.SuperTokens.getInstanceOrThrow().recipeList.map(function(n){return n.recipeID}).includes(r)};var t;return t=e,e.SuperTokensWrapper=Fae,e.redirectToAuth=function(r){return ft.__awaiter(void 0,void 0,void 0,function(){var n;return ft.__generator(t,function(i){return[2,Zr.SuperTokens.getInstanceOrThrow().redirectToAuth(ft.__assign(ft.__assign({},r),{redirectBack:(n=r==null?void 0:r.redirectBack)!==null&&n!==void 0?n:!0,userContext:ft.getNormalisedUserContext(r==null?void 0:r.userContext)}))]})})},e.useTranslation=rm.useTranslation,e.getTranslationFunction=Zr.getTranslationFunction,e.useUserContext=pb,e}(),f3e=mb.init,h3e=mb.changeLanguage,p3e=mb.loadTranslation,Lae=mb.redirectToAuth,m3e=mb.isRecipeInitialized;vn.AuthPage=u3e;vn.AuthPageComponentList=E7;vn.AuthPageFooter=C7;vn.AuthPageHeader=k7;vn.AuthPageTheme=_7;vn.BackButton=Dae;vn.ComponentOverrideContext=y4;vn.DynamicLoginMethodsSpinner=b4;vn.FeatureWrapper=K4e;vn.GeneralError=jae;vn.Provider=Pae;vn.RecipeRouter=N7;vn.SessionAuthWrapper=A7;vn.SessionContext=w7;vn.SpinnerIcon=Nae;vn.SuperTokensAPIWrapper=mb;vn.SuperTokensBranding=Rae;vn.SuperTokensWrapper=Fae;vn.UI=qx;vn.UserContextContext=w4;vn.UserContextWrapper=S7;vn.canHandleRoute=l3e;vn.changeLanguage=h3e;vn.getRoutingComponent=c3e;vn.getSuperTokensRoutesForReactRouterDom=o3e;vn.init=f3e;vn.isRecipeInitialized=m3e;vn.languageTranslations=s3e;vn.loadTranslation=p3e;vn.redirectToAuth=Lae;vn.useDynamicLoginMethods=G4e;vn.useSessionContext=Iae;vn.useUserContext=pb;vn.withOverride=WE;Object.defineProperty(Yi,"__esModule",{value:!0});var Un=zi,T7=e7,g3e=d7,Fu=Eu,eT=vn,x3e=function(e){Un.__extends(t,e);function t(r){var n=e.call(this,r)||this,i=Un.__assign({},n.validators),a=function(o){var l=i[o];i[o]=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return Un.__assign(Un.__assign({},l.apply(void 0,c)),{onFailureRedirection:r.onFailureRedirection,showAccessDeniedOnFailure:r.showAccessDeniedOnFailure})}};for(var s in i)a(s);return n.validators=i,n}return t}(T7.BooleanClaim),v3e=function(e){Un.__extends(t,e);function t(r){var n=e.call(this,r)||this,i=Un.__assign({},n.validators),a=function(o){var l=i[o];i[o]=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return Un.__assign(Un.__assign({},l.apply(void 0,c)),{onFailureRedirection:r.onFailureRedirection,showAccessDeniedOnFailure:r.showAccessDeniedOnFailure})}};for(var s in i)a(s);return n.validators=i,n}return t}(T7.PrimitiveArrayClaim),y3e=function(e){Un.__extends(t,e);function t(r){var n=e.call(this,r)||this,i=Un.__assign({},n.validators),a=function(o){var l=i[o];i[o]=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return Un.__assign(Un.__assign({},l.apply(void 0,c)),{onFailureRedirection:r.onFailureRedirection,showAccessDeniedOnFailure:r.showAccessDeniedOnFailure})}};for(var s in i)a(s);return n.validators=i,n}return t}(T7.PrimitiveClaim),b3e=function(e){var t=eT.useSessionContext();return t.loading?{loading:!0}:t.doesSessionExist===!1?{loading:!1,doesSessionExist:!1,value:void 0}:{loading:!1,doesSessionExist:!0,value:e.getValueFromPayload(t.accessTokenPayload)}},Co=function(){function e(){}return e.init=function(t){return Fu.Session.init(t)},e.getUserId=function(t){return Un.__awaiter(this,void 0,void 0,function(){return Un.__generator(this,function(r){return[2,Fu.Session.getInstanceOrThrow().getUserId({userContext:Un.getNormalisedUserContext(t==null?void 0:t.userContext)})]})})},e.getAccessToken=function(t){return Un.__awaiter(this,void 0,void 0,function(){return Un.__generator(this,function(r){return[2,Fu.Session.getInstanceOrThrow().getAccessToken({userContext:Un.getNormalisedUserContext(t==null?void 0:t.userContext)})]})})},e.getAccessTokenPayloadSecurely=function(t){return Un.__awaiter(this,void 0,void 0,function(){return Un.__generator(this,function(r){return[2,Fu.Session.getInstanceOrThrow().getAccessTokenPayloadSecurely({userContext:Un.getNormalisedUserContext(t==null?void 0:t.userContext)})]})})},e.attemptRefreshingSession=function(){return Un.__awaiter(this,void 0,void 0,function(){return Un.__generator(this,function(t){return[2,Fu.Session.getInstanceOrThrow().attemptRefreshingSession()]})})},e.doesSessionExist=function(t){return Un.__awaiter(this,void 0,void 0,function(){return Un.__generator(this,function(r){return[2,Fu.Session.getInstanceOrThrow().doesSessionExist({userContext:Un.getNormalisedUserContext(t==null?void 0:t.userContext)})]})})},e.addAxiosInterceptors=function(t,r){return Fu.Session.addAxiosInterceptors(t,Un.getNormalisedUserContext(r))},e.signOut=function(t){return Un.__awaiter(this,void 0,void 0,function(){return Un.__generator(this,function(r){return[2,Fu.Session.getInstanceOrThrow().signOut({userContext:Un.getNormalisedUserContext(t==null?void 0:t.userContext)})]})})},e.validateClaims=function(t){return Fu.Session.getInstanceOrThrow().validateClaims({overrideGlobalClaimValidators:t==null?void 0:t.overrideGlobalClaimValidators,userContext:Un.getNormalisedUserContext(t==null?void 0:t.userContext)})},e.getInvalidClaimsFromResponse=function(t){return Fu.Session.getInstanceOrThrow().getInvalidClaimsFromResponse(t)},e.getClaimValue=function(t){return Fu.Session.getInstanceOrThrow().getClaimValue({claim:t.claim,userContext:Un.getNormalisedUserContext(t==null?void 0:t.userContext)})},e.useSessionContext=eT.useSessionContext,e.useClaimValue=b3e,e.SessionAuth=eT.SessionAuthWrapper,e.ComponentsOverrideProvider=g3e.Provider,e}(),w3e=Co.useSessionContext,S3e=Co.useClaimValue,E3e=Co.SessionAuth,C3e=Co.init,k3e=Co.getUserId,_3e=Co.getAccessToken,N3e=Co.getAccessTokenPayloadSecurely,A3e=Co.attemptRefreshingSession,T3e=Co.doesSessionExist,I3e=Co.addAxiosInterceptors,O3e=Co.signOut,P3e=Co.validateClaims,R3e=Co.getInvalidClaimsFromResponse,j3e=Co.getClaimValue,D3e=Co.ComponentsOverrideProvider;Yi.SessionContext=eT.SessionContext;Yi.BooleanClaim=x3e;Yi.PrimitiveArrayClaim=v3e;Yi.PrimitiveClaim=y3e;Yi.SessionAuth=E3e;Yi.SessionComponentsOverrideProvider=D3e;Yi.addAxiosInterceptors=I3e;Yi.attemptRefreshingSession=A3e;Yi.default=Co;Yi.doesSessionExist=T3e;Yi.getAccessToken=_3e;Yi.getAccessTokenPayloadSecurely=N3e;Yi.getClaimValue=j3e;Yi.getInvalidClaimsFromResponse=R3e;Yi.getUserId=k3e;Yi.init=C3e;Yi.signOut=O3e;Yi.useClaimValue=S3e;Yi.useSessionContext=w3e;Yi.validateClaims=P3e;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(Yi)})(tm);const M3e=Vs(tm);var Bae={},Sc={};Object.defineProperty(Sc,"__esModule",{value:!0});var bd=vn;Sc.AuthPage=bd.AuthPage;Sc.AuthPageComponentList=bd.AuthPageComponentList;Sc.AuthPageFooter=bd.AuthPageFooter;Sc.AuthPageHeader=bd.AuthPageHeader;Sc.AuthPageTheme=bd.AuthPageTheme;Sc.AuthRecipeComponentsOverrideContextProvider=bd.Provider;Sc.canHandleRoute=bd.canHandleRoute;Sc.default=bd.UI;Sc.getRoutingComponent=bd.getRoutingComponent;Sc.getSuperTokensRoutesForReactRouterDom=bd.getSuperTokensRoutesForReactRouterDom;Sc.languageTranslations=bd.languageTranslations;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(Sc)})(Bae);var Uae={},S4={},wf={},I7={},F3e=Ux,L3e=hb,$ae=F3e.createGenericComponentsOverrideContext(void 0,L3e.MultiFactorAuth.RECIPE_ID),B3e=$ae[0],U3e=$ae[1];I7.Provider=U3e;I7.useContext=B3e;Object.defineProperty(wf,"__esModule",{value:!0});var D1=zi,$3e=I7,Vm=hb,zae=Eu,Gx=function(){function e(){}return e.init=function(t){return Vm.MultiFactorAuth.init(t)},e.resyncSessionAndFetchMFAInfo=function(t){return Vm.MultiFactorAuth.getInstanceOrThrow().webJSRecipe.resyncSessionAndFetchMFAInfo(D1.__assign(D1.__assign({},t),{userContext:D1.getNormalisedUserContext(t==null?void 0:t.userContext)}))},e.redirectToFactor=function(t){var r,n,i;return Vm.MultiFactorAuth.getInstanceOrThrow().redirectToFactor({factorId:t.factorId,forceSetup:(r=t.forceSetup)!==null&&r!==void 0?r:!1,redirectBack:(n=t.redirectBack)!==null&&n!==void 0?n:!0,stepUp:(i=t.stepUp)!==null&&i!==void 0?i:!1,navigate:t.navigate,userContext:D1.getNormalisedUserContext(t.userContext)})},e.redirectToFactorChooser=function(t){var r,n,i;return Vm.MultiFactorAuth.getInstanceOrThrow().redirectToFactorChooser({nextFactorOptions:(r=t.nextFactorOptions)!==null&&r!==void 0?r:[],redirectBack:(n=t.redirectBack)!==null&&n!==void 0?n:!0,stepUp:(i=t.stepUp)!==null&&i!==void 0?i:!1,navigate:t.navigate,userContext:D1.getNormalisedUserContext(t.userContext)})},e.getSecondaryFactors=function(t){return Vm.MultiFactorAuth.getInstanceOrThrow().getSecondaryFactors(D1.getNormalisedUserContext(t.userContext))},e.MultiFactorAuthClaim=Vm.MultiFactorAuth.MultiFactorAuthClaim,e.FactorIds=zae.FactorIds,e.ComponentsOverrideProvider=$3e.Provider,e}(),z3e=Gx.init,H3e=Gx.resyncSessionAndFetchMFAInfo,W3e=Gx.redirectToFactor,V3e=Gx.redirectToFactorChooser,q3e=Gx.getSecondaryFactors,G3e=Gx.ComponentsOverrideProvider,K3e=Vm.MultiFactorAuth.MultiFactorAuthClaim;wf.FactorIds=zae.FactorIds;wf.MultiFactorAuthClaim=K3e;wf.MultiFactorAuthComponentsOverrideProvider=G3e;wf.default=Gx;wf.getSecondaryFactors=q3e;wf.init=z3e;wf.redirectToFactor=W3e;wf.redirectToFactorChooser=V3e;wf.resyncSessionAndFetchMFAInfo=H3e;var E4={},C4={},Hae={},ba={},VE={},k4={},I2=Ve&&Ve.__assign||function(){return I2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},I2.apply(this,arguments)};Object.defineProperty(k4,"__esModule",{value:!0});k4.normaliseUserInput=void 0;var X3e=Hx;function Y3e(e){var t=I2({functions:function(r){return r}},e.override);return I2(I2({},(0,X3e.normaliseAuthRecipe)(e)),{override:t})}k4.normaliseUserInput=Y3e;var qE={},tT=Ve&&Ve.__assign||function(){return tT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},tT.apply(this,arguments)},Aw=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},Tw=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(qE,"__esModule",{value:!0});qE.getRecipeImplementation=void 0;var Lu=Wx,k_=zx,__=$r;function Wae(e){var t=new Lu.default(e.recipeId,e.appInfo);return{submitNewPassword:function(r){var n=r.formFields,i=r.options,a=r.userContext;return Aw(this,void 0,void 0,function(){var s,o,l,c,d;return Tw(this,function(f){switch(f.label){case 0:return s=this.getTenantIdFromURL({userContext:a}),o=this.getResetPasswordTokenFromURL({userContext:a}),[4,t.post({path:"/<tenantId>/user/password/reset",pathParams:{tenantId:s||"public"}},{body:{formFields:n,token:o,method:"token"}},Lu.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"SUBMIT_NEW_PASSWORD",options:i,userContext:a}),Lu.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"SUBMIT_NEW_PASSWORD",userContext:a}))];case 1:return l=f.sent(),c=l.jsonBody,d=l.fetchResponse,c.status==="FIELD_ERROR"?[2,{status:"FIELD_ERROR",formFields:c.formFields,fetchResponse:d}]:c.status==="RESET_PASSWORD_INVALID_TOKEN_ERROR"?[2,{status:c.status,fetchResponse:d}]:[2,tT(tT({},c),{fetchResponse:d})]}})})},sendPasswordResetEmail:function(r){var n=r.formFields,i=r.options,a=r.userContext;return Aw(this,void 0,void 0,function(){var s,o,l,c,d,f,p;return Tw(this,function(m){switch(m.label){case 0:return d=(c=t).post,f={path:"/<tenantId>/user/password/reset/token"},p={},[4,k_.default.getInstanceOrThrow().recipeImplementation.getTenantId({userContext:a})];case 1:return[4,d.apply(c,[(f.pathParams=(p.tenantId=m.sent()||"public",p),f),{body:{formFields:n}},Lu.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"SEND_RESET_PASSWORD_EMAIL",options:i,userContext:a}),Lu.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"SEND_RESET_PASSWORD_EMAIL",userContext:a})])];case 2:return s=m.sent(),o=s.jsonBody,l=s.fetchResponse,o.status==="FIELD_ERROR"?[2,{status:"FIELD_ERROR",formFields:o.formFields,fetchResponse:l}]:o.status==="PASSWORD_RESET_NOT_ALLOWED"?[2,{status:o.status,reason:o.reason,fetchResponse:l}]:[2,{status:o.status,fetchResponse:l}]}})})},signUp:function(r){var n=r.formFields,i=r.shouldTryLinkingWithSessionUser,a=r.options,s=r.userContext;return Aw(this,void 0,void 0,function(){var o,l,c,d,f,p,m;return Tw(this,function(x){switch(x.label){case 0:return f=(d=t).post,p={path:"/<tenantId>/signup"},m={},[4,k_.default.getInstanceOrThrow().recipeImplementation.getTenantId({userContext:s})];case 1:return[4,f.apply(d,[(p.pathParams=(m.tenantId=x.sent()||"public",m),p),{body:{formFields:n,shouldTryLinkingWithSessionUser:i}},Lu.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"EMAIL_PASSWORD_SIGN_UP",options:a,userContext:s}),Lu.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"EMAIL_PASSWORD_SIGN_UP",userContext:s})])];case 2:return o=x.sent(),l=o.jsonBody,c=o.fetchResponse,l.status==="FIELD_ERROR"?[2,{status:"FIELD_ERROR",formFields:l.formFields,fetchResponse:c}]:l.status==="SIGN_UP_NOT_ALLOWED"?[2,{status:"SIGN_UP_NOT_ALLOWED",reason:l.reason,fetchResponse:c}]:[2,{status:l.status,user:(0,__.normaliseUser)("emailpassword",l.user),fetchResponse:c}]}})})},signIn:function(r){var n=r.formFields,i=r.shouldTryLinkingWithSessionUser,a=r.options,s=r.userContext;return Aw(this,void 0,void 0,function(){var o,l,c,d,f,p,m;return Tw(this,function(x){switch(x.label){case 0:return f=(d=t).post,p={path:"/<tenantId>/signin"},m={},[4,k_.default.getInstanceOrThrow().recipeImplementation.getTenantId({userContext:s})];case 1:return[4,f.apply(d,[(p.pathParams=(m.tenantId=x.sent()||"public",m),p),{body:{formFields:n,shouldTryLinkingWithSessionUser:i}},Lu.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"EMAIL_PASSWORD_SIGN_IN",options:a,userContext:s}),Lu.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"EMAIL_PASSWORD_SIGN_IN",userContext:s})])];case 2:return o=x.sent(),l=o.jsonBody,c=o.fetchResponse,l.status==="FIELD_ERROR"?[2,{status:"FIELD_ERROR",formFields:l.formFields,fetchResponse:c}]:l.status==="WRONG_CREDENTIALS_ERROR"?[2,{status:"WRONG_CREDENTIALS_ERROR",fetchResponse:c}]:l.status==="SIGN_IN_NOT_ALLOWED"?[2,{status:"SIGN_IN_NOT_ALLOWED",reason:l.reason,fetchResponse:c}]:[2,{status:"OK",user:(0,__.normaliseUser)("emailpassword",l.user),fetchResponse:c}]}})})},doesEmailExist:function(r){var n=r.email,i=r.options,a=r.userContext;return Aw(this,void 0,void 0,function(){var s,o,l,c,d,f,p;return Tw(this,function(m){switch(m.label){case 0:return d=(c=t).get,f={path:"/<tenantId>/emailpassword/email/exists"},p={},[4,k_.default.getInstanceOrThrow().recipeImplementation.getTenantId({userContext:a})];case 1:return[4,d.apply(c,[(f.pathParams=(p.tenantId=m.sent()||"public",p),f.queryParams={email:n},f),{},Lu.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"EMAIL_EXISTS",options:i,userContext:a}),Lu.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,action:"EMAIL_EXISTS",userContext:a})])];case 2:return s=m.sent(),o=s.jsonBody,l=s.fetchResponse,[2,{status:o.status,doesExist:o.exists,fetchResponse:l}]}})})},getResetPasswordTokenFromURL:function(){var r=(0,__.getQueryParams)("token");return r===void 0?"":r},getTenantIdFromURL:function(){return(0,__.getQueryParams)("tenantId")}}}qE.default=Wae;qE.getRecipeImplementation=Wae;var Q3e=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rT=Ve&&Ve.__assign||function(){return rT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},rT.apply(this,arguments)};Object.defineProperty(VE,"__esModule",{value:!0});VE.Recipe=void 0;var J3e=k4,Z3e=qE,ePe=bf,$j=$r,tPe=db,Vae=function(e){Q3e(t,e);function t(r){var n=e.call(this,(0,J3e.normaliseUserInput)(r))||this,i=new ePe.default((0,Z3e.default)({recipeId:n.config.recipeId,appInfo:n.config.appInfo,clientType:n.config.clientType,preAPIHook:n.config.preAPIHook,postAPIHook:n.config.postAPIHook}));return n.recipeImplementation=i.override(n.config.override.functions).build(),n}return t.init=function(r){return function(n,i,a,s){return t.instance=new t(rT(rT({},(0,$j.applyPlugins)(t.RECIPE_ID,r,s??[])),{recipeId:t.RECIPE_ID,clientType:i,appInfo:n})),t.instance}},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of EmailPassword found. Ensure that the 'EmailPassword.init' method is called within the 'SuperTokens.init' recipeList.";throw r=(0,$j.checkForSSRErrorAndAppendIfNeeded)(r),Error(r)}return t.instance},t.reset=function(){(0,$j.isTest)()&&(t.instance=void 0)},t.RECIPE_ID="emailpassword",t}(tPe.default);VE.Recipe=Vae;VE.default=Vae;var no=Ve&&Ve.__assign||function(){return no=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},no.apply(this,arguments)};Object.defineProperty(ba,"__esModule",{value:!0});ba.signOut=ba.getTenantIdFromURL=ba.getResetPasswordTokenFromURL=ba.doesEmailExist=ba.signIn=ba.signUp=ba.sendPasswordResetEmail=ba.submitNewPassword=ba.init=void 0;var Kf=VE,Pp=$r,Sf=function(){function e(){}return e.init=function(t){return Kf.default.init(t)},e.signOut=function(t){return Kf.default.getInstanceOrThrow().signOut({userContext:(0,Pp.getNormalisedUserContext)(t==null?void 0:t.userContext)})},e.submitNewPassword=function(t){return Kf.default.getInstanceOrThrow().recipeImplementation.submitNewPassword(no(no({},t),{userContext:(0,Pp.getNormalisedUserContext)(t.userContext)}))},e.sendPasswordResetEmail=function(t){return Kf.default.getInstanceOrThrow().recipeImplementation.sendPasswordResetEmail(no(no({},t),{userContext:(0,Pp.getNormalisedUserContext)(t.userContext)}))},e.signUp=function(t){return Kf.default.getInstanceOrThrow().recipeImplementation.signUp(no(no({},t),{shouldTryLinkingWithSessionUser:t==null?void 0:t.shouldTryLinkingWithSessionUser,userContext:(0,Pp.getNormalisedUserContext)(t.userContext)}))},e.signIn=function(t){return Kf.default.getInstanceOrThrow().recipeImplementation.signIn(no(no({},t),{shouldTryLinkingWithSessionUser:t==null?void 0:t.shouldTryLinkingWithSessionUser,userContext:(0,Pp.getNormalisedUserContext)(t.userContext)}))},e.doesEmailExist=function(t){return Kf.default.getInstanceOrThrow().recipeImplementation.doesEmailExist(no(no({},t),{userContext:(0,Pp.getNormalisedUserContext)(t.userContext)}))},e.getResetPasswordTokenFromURL=function(t){return Kf.default.getInstanceOrThrow().recipeImplementation.getResetPasswordTokenFromURL(no(no({},t),{userContext:(0,Pp.getNormalisedUserContext)(t==null?void 0:t.userContext)}))},e.getTenantIdFromURL=function(t){return Kf.default.getInstanceOrThrow().recipeImplementation.getTenantIdFromURL(no(no({},t),{userContext:(0,Pp.getNormalisedUserContext)(t==null?void 0:t.userContext)}))},e}();ba.default=Sf;var rPe=Sf.init;ba.init=rPe;var nPe=Sf.submitNewPassword;ba.submitNewPassword=nPe;var iPe=Sf.sendPasswordResetEmail;ba.sendPasswordResetEmail=iPe;var aPe=Sf.signUp;ba.signUp=aPe;var sPe=Sf.signIn;ba.signIn=sPe;var oPe=Sf.doesEmailExist;ba.doesEmailExist=oPe;var lPe=Sf.signOut;ba.signOut=lPe;var cPe=Sf.getResetPasswordTokenFromURL;ba.getResetPasswordTokenFromURL=cPe;var uPe=Sf.getTenantIdFromURL;ba.getTenantIdFromURL=uPe;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(ba)})(Hae);var qae={},Xf=zi,dPe=fb,Sq=Eu,fPe=function(e){Xf.__extends(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.getAuthRecipeDefaultRedirectionURL=function(n){return Xf.__awaiter(r,void 0,void 0,function(){return Xf.__generator(this,function(i){throw new Error("Should never come here")})})},r.signOut=function(n){return Xf.__awaiter(r,void 0,void 0,function(){return Xf.__generator(this,function(i){switch(i.label){case 0:return[4,Sq.Session.getInstanceOrThrow().signOut({userContext:Xf.getNormalisedUserContext(n==null?void 0:n.userContext)})];case 1:return[2,i.sent()]}})})},r.doesSessionExist=function(n){return Xf.__awaiter(r,void 0,void 0,function(){return Xf.__generator(this,function(i){switch(i.label){case 0:return[4,Sq.Session.getInstanceOrThrow().doesSessionExist({userContext:Xf.getNormalisedUserContext(n==null?void 0:n.userContext)})];case 1:return[2,i.sent()]}})})},r}return t}(dPe.RecipeModule);qae.AuthRecipe=fPe;var GE={},hPe=["email","password"],pPe="/reset-password";GE.DEFAULT_RESET_PASSWORD_PATH=pPe;GE.MANDATORY_FORM_FIELDS_ID_ARRAY=hPe;var KE={},U0=zi;function mPe(e){return U0.__awaiter(this,void 0,void 0,function(){var t;return U0.__generator(this,function(r){return typeof e!="string"?[2,"ERROR_EMAIL_NON_STRING"]:(e=e.trim(),t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,e.match(t)===null?[2,"ERROR_EMAIL_INVALID"]:[2,void 0])})})}function gPe(e){return U0.__awaiter(this,void 0,void 0,function(){return U0.__generator(this,function(t){return typeof e!="string"?[2,"ERROR_PASSWORD_NON_STRING"]:e.length<8?[2,"ERROR_PASSWORD_TOO_SHORT"]:e.length>=100?[2,"ERROR_PASSWORD_TOO_LONG"]:e.match(/^.*[A-Za-z]+.*$/)===null?[2,"ERROR_PASSWORD_NO_ALPHA"]:e.match(/^.*[0-9]+.*$/)===null?[2,"ERROR_PASSWORD_NO_NUM"]:[2,void 0]})})}function xPe(e){return U0.__awaiter(this,void 0,void 0,function(){return U0.__generator(this,function(t){return typeof e!="string"?[2,"ERROR_PASSWORD_NON_STRING"]:[2,void 0]})})}function vPe(e){return U0.__awaiter(this,void 0,void 0,function(){return U0.__generator(this,function(t){return[2,void 0]})})}KE.defaultEmailValidator=mPe;KE.defaultLoginPasswordValidator=xPe;KE.defaultPasswordValidator=gPe;KE.defaultValidate=vPe;var Gr=zi,yPe=Hae,bPe=qae,t2=Eu,O7=GE,wPe=v4,_4=KE;function SPe(e){return e&&e.__esModule?e:{default:e}}var Eq=SPe(yPe),EPe=function(e){return function(t){return Gr.__assign(Gr.__assign({},t),{submitNewPassword:function(r){return Gr.__awaiter(this,void 0,void 0,function(){var n;return Gr.__generator(this,function(i){switch(i.label){case 0:return[4,t.submitNewPassword(Gr.__assign(Gr.__assign({},r),{formFields:[r.formFields[0]]}))];case 1:return n=i.sent(),n.status==="OK"&&e({action:"PASSWORD_RESET_SUCCESSFUL",userContext:r.userContext}),[2,n]}})})},sendPasswordResetEmail:function(r){return Gr.__awaiter(this,void 0,void 0,function(){var n;return Gr.__generator(this,function(i){switch(i.label){case 0:return[4,t.sendPasswordResetEmail(r)];case 1:return n=i.sent(),n.status==="OK"&&e({action:"RESET_PASSWORD_EMAIL_SENT",email:r.formFields.find(function(a){var s=a.id;return s==="email"}).value,userContext:r.userContext}),[2,n]}})})},signUp:function(r){return Gr.__awaiter(this,void 0,void 0,function(){var n,i,a;return Gr.__generator(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,t2.Session.getInstanceOrThrow().getAccessTokenPayloadSecurely({userContext:r.userContext})];case 1:return n=s.sent(),[3,3];case 2:return s.sent(),n=void 0,[3,3];case 3:return[4,t.signUp(r)];case 4:if(i=s.sent(),i.status!=="OK")return[3,9];a=void 0,s.label=5;case 5:return s.trys.push([5,7,,8]),[4,t2.Session.getInstanceOrThrow().getAccessTokenPayloadSecurely({userContext:r.userContext})];case 6:return a=s.sent(),[3,8];case 7:return s.sent(),a=void 0,[3,8];case 8:e({action:"SUCCESS",isNewRecipeUser:!0,createdNewSession:a!==void 0&&(n===void 0||n.sessionHandle!==a.sessionHandle),user:i.user,userContext:r.userContext}),s.label=9;case 9:return[2,i]}})})},signIn:function(r){return Gr.__awaiter(this,void 0,void 0,function(){var n,i,a;return Gr.__generator(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,t2.Session.getInstanceOrThrow().getAccessTokenPayloadSecurely({userContext:r.userContext})];case 1:return n=s.sent(),[3,3];case 2:return s.sent(),n=void 0,[3,3];case 3:return[4,t.signIn(r)];case 4:if(i=s.sent(),i.status!=="OK")return[3,9];a=void 0,s.label=5;case 5:return s.trys.push([5,7,,8]),[4,t2.Session.getInstanceOrThrow().getAccessTokenPayloadSecurely({userContext:r.userContext})];case 6:return a=s.sent(),[3,8];case 7:return s.sent(),a=void 0,[3,8];case 8:e({action:"SUCCESS",isNewRecipeUser:!1,createdNewSession:a!==void 0&&(n===void 0||n.sessionHandle!==a.sessionHandle),user:i.user,userContext:r.userContext}),s.label=9;case 9:return[2,i]}})})}})}};function CPe(e){e===void 0&&(e={});var t=kPe(e.signInAndUpFeature),r=t.signUpForm.formFields.find(function(s){return s.id==="password"}),n=t.signUpForm.formFields.find(function(s){return s.id==="email"}),i=IPe(r.validate,n,e.resetPasswordUsingTokenFeature),a=Gr.__assign({functions:function(s){return s}},e.override);return Gr.__assign(Gr.__assign({},wPe.normaliseAuthRecipe(e)),{signInAndUpFeature:t,resetPasswordUsingTokenFeature:i,override:a})}function kPe(e){e===void 0&&(e={});var t=_Pe(e.signUpForm),r=t.formFields.reduce(function(i,a){return a.id==="email"?Gr.__spreadArray(Gr.__spreadArray([],i,!0),[a],!1):a.id==="password"?Gr.__spreadArray(Gr.__spreadArray([],i,!0),[Gr.__assign(Gr.__assign({},a),{autoComplete:"current-password",validate:_4.defaultLoginPasswordValidator})],!1):i},[]),n=NPe(r,e.signInForm);return{signUpForm:t,signInForm:n}}function _Pe(e){e===void 0&&(e={});var t=APe(),r=[];e.formFields!==void 0&&(r=e.formFields);var n=Kae(t,r),i=e.style!==void 0?e.style:"";return{style:i,formFields:n}}function NPe(e,t){t===void 0&&(t={});var r=[];t.formFields!==void 0&&(r=t.formFields.filter(function(a){return O7.MANDATORY_FORM_FIELDS_ID_ARRAY.includes(a.id)}).map(function(a){return Gr.__assign(Gr.__assign({},a),{optional:!1})}));var n=Kae(e,r),i=t.style!==void 0?t.style:"";return{style:i,formFields:n}}function APe(){return[Gae(),TPe()]}function Gae(){return{id:"email",label:"EMAIL_PASSWORD_EMAIL_LABEL",placeholder:"EMAIL_PASSWORD_EMAIL_PLACEHOLDER",validate:_4.defaultEmailValidator,optional:!1,autoComplete:"email"}}function TPe(){return{id:"password",label:"EMAIL_PASSWORD_PASSWORD_LABEL",placeholder:"EMAIL_PASSWORD_PASSWORD_PLACEHOLDER",validate:_4.defaultPasswordValidator,optional:!1,autoComplete:"new-password"}}function IPe(e,t,r){r===void 0&&(r={});var n=r.disableDefaultUI===!0,i=r.submitNewPasswordForm!==void 0&&r.submitNewPasswordForm.style!==void 0?r.submitNewPasswordForm.style:"",a={style:i,formFields:[{id:"password",label:"EMAIL_PASSWORD_NEW_PASSWORD_LABEL",placeholder:"EMAIL_PASSWORD_NEW_PASSWORD_PLACEHOLDER",validate:e,optional:!1,autoComplete:"new-password"},{id:"confirm-password",label:"EMAIL_PASSWORD_CONFIRM_PASSWORD_LABEL",placeholder:"EMAIL_PASSWORD_CONFIRM_PASSWORD_PLACEHOLDER",validate:e,optional:!1,autoComplete:"new-password"}]},s=r.enterEmailForm!==void 0&&r.enterEmailForm.style!==void 0?r.enterEmailForm.style:"",o={style:s,formFields:[Gr.__assign(Gr.__assign({},Gae()),{validate:t.validate,placeholder:"",autofocus:!0})]};return{disableDefaultUI:n,submitNewPasswordForm:a,enterEmailForm:o}}function Kae(e,t){for(var r=e,n=0;n<t.length;n++){for(var i=t[n],a=!0,s=0;s<r.length;s++){var o=r[s];if(i.id===o.id){var l=o.optional;i.optional!==void 0&&(l=i.optional),O7.MANDATORY_FORM_FIELDS_ID_ARRAY.includes(i.id)&&(l=!1),r[s]=Gr.__assign(Gr.__assign(Gr.__assign({},r[s]),i),{optional:l}),a=!1;break}}a&&r.push(Gr.__assign({optional:!1,placeholder:i.label,validate:_4.defaultValidate},i))}return r.map(function(c){return OPe(c)})}function OPe(e){var t=this;if(e.optional===!1&&e.nonOptionalErrorMsg==="")throw new Error("nonOptionalErrorMsg for field ".concat(e.id," cannot be an empty string"));return Gr.__assign(Gr.__assign({},e),{validate:function(r){return Gr.__awaiter(t,void 0,void 0,function(){return Gr.__generator(this,function(n){switch(n.label){case 0:return r===""&&e.optional===!1?e.nonOptionalErrorMsg!==void 0?[2,e.nonOptionalErrorMsg]:[2,"ERROR_NON_OPTIONAL"]:[4,e.validate(r)];case 1:return[2,n.sent()]}})})}})}var PPe=function(e){Gr.__extends(t,e);function t(r,n){n===void 0&&(n=Eq.default);var i=e.call(this,r)||this;return i.webJSRecipe=n,i.recipeID=t.RECIPE_ID,i.firstFactorIds=[t2.FactorIds.EMAILPASSWORD],i.getDefaultRedirectionURL=function(a){return Gr.__awaiter(i,void 0,void 0,function(){return Gr.__generator(this,function(s){return a.action==="RESET_PASSWORD"?[2,Gr.getDefaultRedirectionURLForPath(this.config,O7.DEFAULT_RESET_PASSWORD_PATH,a)]:[2,this.getAuthRecipeDefaultRedirectionURL(a)]})})},i}return t.prototype.getFirstFactorsForAuthPage=function(){return this.firstFactorIds},t.init=function(r){var n=CPe(r);return{recipeID:t.RECIPE_ID,authReact:function(i){return t.instance=new t(Gr.__assign(Gr.__assign({},n),{appInfo:i,recipeId:t.RECIPE_ID})),t.instance},webJS:Eq.default.init(Gr.__assign(Gr.__assign({},n),{override:{functions:function(i,a){var s=EPe(n.onHandleEvent);return a.override(s),a.override(n.override.functions),i}}}))}},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of EmailPassword found. Make sure to call the EmailPassword.init method.See https://supertokens.io/docs/emailpassword/quick-setup/frontend";throw typeof window>"u"&&(r=r+Gr.SSR_ERROR),Error(r)}return t.instance},t.reset=function(){Gr.isTest()&&(t.instance=void 0)},t.RECIPE_ID="emailpassword",t}(bPe.AuthRecipe);C4.EmailPassword=PPe;var RPe=Ux,jPe=C4,Xae=RPe.createGenericComponentsOverrideContext(void 0,jPe.EmailPassword.RECIPE_ID),DPe=Xae[0],MPe=Xae[1];E4.Provider=MPe;E4.useContext=DPe;var P7={},Cq=u,FPe=I,kq=zi,LPe=Ua,BPe=`/* Copyright (c) 2021, VRAI Labs and/or its affiliates. All rights reserved.
 *
 * This software is licensed under the Apache License, Version 2.0 (the
 * "License") as published by the Apache Software Foundation.
 *
 * You may not use this file except in compliance with the License. You may
 * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations
 * under the License.
 */

[data-supertokens~="container"] {
    --palette-background: 255, 255, 255;
    --palette-inputBackground: 250, 250, 250;
    --palette-inputBorder: 224, 224, 224;
    --palette-primary: 28, 34, 42;
    --palette-primaryBorder: 45, 54, 68;
    --palette-success: 65, 167, 0;
    --palette-successBackground: 217, 255, 191;
    --palette-error: 255, 23, 23;
    --palette-errorBackground: 255, 241, 235;
    --palette-textTitle: 0, 0, 0;
    --palette-textLabel: 0, 0, 0;
    --palette-textInput: 0, 0, 0;
    --palette-textPrimary: 128, 128, 128;
    --palette-textLink: 0, 122, 255;
    --palette-buttonText: 255, 255, 255;
    --palette-textGray: 54, 54, 54;
    --palette-superTokensBrandingBackground: 242, 245, 246;
    --palette-superTokensBrandingText: 173, 189, 196;
    --palette-buttonGreyedOut: 221, 221, 221;
    --palette-caution: 124, 96, 62;
    --palette-errorDark: 207, 54, 68;

    --font-size-0: 12px;
    --font-size-1: 14px;
    --font-size-2: 16px;
    --font-size-3: 19px;
    --font-size-4: 24px;
    --font-size-5: 28px;
}

/*
 * Default styles.
 */

@keyframes slideTop {
    0% {
        transform: translateY(-5px);
    }
    100% {
        transform: translateY(0px);
    }
}

@keyframes swing-in-top-fwd {
    0% {
        transform: rotateX(-100deg);
        transform-origin: top;
        opacity: 0;
    }
    100% {
        transform: rotateX(0deg);
        transform-origin: top;
        opacity: 1;
    }
}

[data-supertokens~="container"] {
    font-family: "Arial", sans-serif;
    margin: 12px auto;
    margin-top: 26px;
    margin-bottom: 26px;
    width: 420px;
    text-align: center;
    border-radius: 8px;
    box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.16);
    background-color: rgb(var(--palette-background));
}

@media (max-width: 440px) {
    [data-supertokens~="container"] {
        width: 95vw;
    }
}

[data-supertokens~="row"] {
    margin: 0 auto;
    width: 76%;
    padding-top: 30px;
    padding-bottom: 10px;
}

[data-supertokens~="superTokensBranding"] {
    display: block;
    margin: 10px auto 0;
    background: rgb(var(--palette-superTokensBrandingBackground));
    color: rgb(var(--palette-superTokensBrandingText));
    text-decoration: none;
    width: -webkit-fit-content;
    width: -moz-fit-content;
    width: fit-content;
    border-radius: 6px 6px 0 0;
    padding: 4px 9px;
    font-weight: 400;
    font-size: var(--font-size-0);
    letter-spacing: 0.4px;
}

[data-supertokens~="generalError"] {
    background: rgb(var(--palette-errorBackground));
    padding-top: 10px;
    padding-bottom: 10px;
    margin-bottom: 10px;
    margin-top: 24px;
    padding-left: 18px;
    padding-right: 18px;
    letter-spacing: 0.2px;
    font-size: var(--font-size-1);
    border-radius: 8px;
    color: rgb(var(--palette-error));
    animation: swing-in-top-fwd 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
    word-wrap: break-word;
}

[data-supertokens~="headerTitle"] {
    font-size: var(--font-size-4);
    line-height: 27.6px;
    letter-spacing: 0.58px;
    font-weight: 700;
    margin-bottom: 20px;
    color: rgb(var(--palette-textTitle));
}

[data-supertokens~="headerSubtitle"] {
    font-weight: 400;
    color: rgb(var(--palette-textGray));
    margin-bottom: 21px;
}

[data-supertokens~="headerSubtitle"][data-supertokens~="secondaryText"] {
    color: rgb(var(--palette-textGray));
    font-weight: 400;
}

[data-supertokens~="privacyPolicyAndTermsAndConditions"] {
    max-width: 300px;
    margin-top: 10px;
}

[data-supertokens~="privacyPolicyAndTermsAndConditions"] a {
    line-height: 21px;
}

/* TODO: split the link style into separate things*/

/* We add this before primary and secondary text, because if they are applied to the same element the other ones take priority */

[data-supertokens~="link"] {
    padding-left: 3px;
    padding-right: 3px;
    color: rgb(var(--palette-textLink));
    font-size: var(--font-size-1);
    cursor: pointer;
    letter-spacing: 0.16px;
    line-height: 26px;
}

[data-supertokens~="primaryText"] {
    font-size: var(--font-size-2);
    font-weight: 400;
    letter-spacing: 0.4px;
    line-height: 21px;
    color: rgb(var(--palette-textLabel));
}

[data-supertokens~="secondaryText"] {
    font-size: var(--font-size-1);
    font-weight: 400;
    letter-spacing: 0.4px;
    color: rgb(var(--palette-textPrimary));
}

[data-supertokens~="secondaryText"] strong {
    font-weight: 600;
}

[data-supertokens~="divider"] {
    margin-top: 1.5em;
    margin-bottom: 1.5em;
    border-bottom: 0.3px solid #dddddd;
    align-items: center;
    padding-bottom: 5px;
    flex: 3 3;
}

[data-supertokens~="headerTinyTitle"] {
    margin-top: 24px;
    font-size: var(--font-size-5);
    letter-spacing: 1.1px;
    font-weight: 700;
    line-height: 28px;
}

[data-supertokens~="secondaryLinkWithArrow"] {
    margin-top: 10px;
    margin-bottom: 30px;
    cursor: pointer;
}

[data-supertokens~="secondaryLinkWithArrow"]:hover {
    position: relative;
    left: 2px;
    word-spacing: 4px;
}

[data-supertokens~="generalSuccess"] {
    color: rgb(var(--palette-success));
    font-size: var(--font-size-1);
    background: rgb(var(--palette-successBackground));
    animation: swing-in-top-fwd 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
    padding: 9px 15px 9px 15px;
    border-radius: 6px;
    display: inline-block;
}

[data-supertokens~="spinner"] {
    width: 80px;
    height: auto;
    padding-top: 20px;
    padding-bottom: 40px;
    margin: 0 auto;
}

[data-supertokens~="error"] {
    color: rgb(var(--palette-error));
}

[data-supertokens~="linkButton"] {
    font-family: "Arial", sans-serif;
    background-color: transparent;
    border: 0;
}

[data-supertokens~="secondaryLinkWithLeftArrow"] {
    color: rgb(var(--palette-textGray));
    font-weight: 400;
    margin-top: 10px;
    margin-bottom: 40px;
    cursor: pointer;
}

[data-supertokens~="secondaryLinkWithLeftArrow"] svg {
    margin-right: 0.3em;
}

[data-supertokens~="secondaryLinkWithLeftArrow"]:hover svg {
    position: relative;
    left: -4px;
}

[data-supertokens~="button"] {
    font-family: "Arial", sans-serif;
    background-color: rgb(var(--palette-primary));
    color: rgb(var(--palette-buttonText));
    width: 100%;
    height: 34px;
    font-weight: 600;
    border-width: 1px;
    border-style: solid;
    border-radius: 6px;
    border-color: rgb(var(--palette-primaryBorder));
    background-position: center;
    transition: all 0.4s;
    background-size: 12000%;
    cursor: pointer;
}

[data-supertokens~="buttonGreyedOut"] {
    background-color: rgb(var(--palette-buttonGreyedOut));
    border-color: rgb(var(--palette-buttonGreyedOut));
}

[data-supertokens~="buttonWithIcon"] {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

[data-supertokens~="button"]:disabled {
    border: none;
    cursor: no-drop;
}

[data-supertokens~="button"]:active {
    outline: none;
    transition: all 0s;
    background-size: 100%;
    filter: brightness(0.85);
}

[data-supertokens~="button"]:focus {
    outline: none;
}

[data-supertokens~="backButtonCommon"] {
    width: 16px;
    height: 13px;
}

[data-supertokens~="backButton"] {
    cursor: pointer;
    border: none;
    background-color: transparent;
    padding: 0px;
}

[data-supertokens~="backButtonPlaceholder"] {
    display: block;
}

[data-supertokens~="delayedRender"] {
    animation-duration: 0.1s;
    animation-name: animate-fade;
    animation-delay: 0.2s;
    animation-fill-mode: backwards;
}

@keyframes animate-fade {
    0% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}

[data-supertokens~="footerLinkGroupVert"] {
    display: flex;
    flex-direction: column;
    margin-top: 10px;
    gap: 24px;
}

[data-supertokens~="footerLinkGroupVert"] > div {
    cursor: pointer;
    margin: 0;
}

[data-supertokens~="footerLinkGroupVert"] [data-supertokens~="secondaryText"] {
    font-weight: 400;
}

[data-supertokens~="footerLinkGroupVert"] [data-supertokens~="secondaryLinkWithLeftArrow"] {
    font-weight: 400;
    position: relative;
    left: -6px; /* half the width of the left arrow */
}

@media (max-width: 360px) {
    [data-supertokens~="footerLinkGroupVert"] {
        flex-direction: column;
    }
    [data-supertokens~="footerLinkGroupVert"] > div {
        margin: 0 auto;
    }
}

[data-supertokens~="footerLinkGroupVert"] div:only-child {
    margin-left: auto;
    margin-right: auto;
    margin-top: 14px;
}

[data-supertokens~="withBackButton"] {
    position: relative;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

[data-supertokens~="dividerWithOr"] {
    padding-top: 5px;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    color: rgb(var(--palette-textPrimary));
}

[data-supertokens~="dividerText"] {
    flex: 1 1;
    font-weight: 400;
    font-size: var(--font-size-1);
}

[data-supertokens~="formLabelWithLinkWrapper"] {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

[data-supertokens~="formLabelLinkBtn"] {
    width: auto;
    margin-top: 0;
    line-height: 24px;
    font-size: var(--font-size-0);
}

[data-supertokens~="formLabelLinkBtn"]:hover {
    text-decoration: underline;
}

[data-supertokens~="formLabelLinkBtn"]:disabled {
    color: rgb(var(--palette-textPrimary));
    cursor: default;
    text-decoration: none;
}

[data-supertokens~="authComponentList"] {
    padding-bottom: 20px;
}

[data-supertokens~="authPageTitleOAuthClient"] {
    color: rgb(var(--palette-textGray));
    font-size: var(--font-size-1);
    font-weight: 400;
    margin: 10px 0 25px;
}

[data-supertokens~="authPageTitleOAuthClientUrl"] {
    text-decoration: none;
}

[data-supertokens~="authPageTitleOAuthClientLogo"] {
    width: 44px;
    height: 44px;
    margin-bottom: 10px;
}

[data-supertokens~="authPageTitleOAuthClient"] [data-supertokens~="authPageTitleOAuthClientName"] {
    color: rgb(var(--palette-textTitle));
}

[data-supertokens~="buttonWithArrow"] {
    border-radius: 6px;
    border: 1px solid #d0d5dd;
    width: 100%;
    color: rgb(var(--palette-textGray));
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 5px;
    margin: 24px 0;
    min-height: 48px;
    cursor: pointer;
}

[data-supertokens~="buttonWithArrow"]:hover {
    background-color: rgb(var(--palette-inputBackground));
}

[data-supertokens~="buttonWithArrow"] [data-supertokens~="secondaryText"] {
    font-weight: 700;
    font-size: var(--font-size-2);
    color: rgb(var(--palette-textGray));
    margin: 0;
}

[data-supertokens~="buttonWithArrow"]:hover [data-supertokens~="secondaryLinkWithRightArrow"] ~ svg {
    position: relative;
    left: 2px;
}

[data-supertokens~="buttonWithArrow"]:hover [data-supertokens~="secondaryLinkWithLeftArrow"] svg {
    position: relative;
    left: -2px;
}

[data-supertokens~="buttonWithArrow"] [data-supertokens~="secondaryLinkWithLeftArrow"] {
    display: flex;
    align-items: center;
}

[data-supertokens~="inputContainer"] {
    margin-top: 6px;
}

[data-supertokens~="inputWrapper"] {
    box-sizing: border-box;
    width: 100%;
    display: flex;
    align-items: center;
    background-color: rgb(var(--palette-inputBackground));
    height: 34px;
    border-radius: 6px;
    border: 1px solid rgb(var(--palette-inputBorder));
}

[data-supertokens~="inputWrapper"][focus-within] {
    background-color: rgba(var(--palette-inputBackground), 0.25);
    border: 1px solid rgb(var(--palette-primary));
    box-shadow: 0 0 0 0.2rem rgba(var(--palette-primary), 0.25);
    outline: none;
}

[data-supertokens~="inputWrapper"]:focus-within {
    background-color: rgba(var(--palette-inputBackground), 0.25);
    border: 1px solid rgb(var(--palette-primary));
    box-shadow: 0 0 0 0.2rem rgba(var(--palette-primary), 0.25);
    outline: none;
}

[data-supertokens~="inputError"] {
    border: 1px solid rgb(var(--palette-error));
    box-shadow: 0 0 0 0.2rem rgba(var(--palette-error), 0.25);
    outline: none;
}

[data-supertokens~="inputError"][focus-within] {
    border: 1px solid rgb(var(--palette-error));
    box-shadow: 0 0 0 0.2rem rgba(var(--palette-error), 0.25);
    outline: none;
}

[data-supertokens~="inputError"]:focus-within {
    border: 1px solid rgb(var(--palette-error));
    box-shadow: 0 0 0 0.2rem rgba(var(--palette-error), 0.25);
    outline: none;
}

[data-supertokens~="input"] {
    box-sizing: border-box;
    padding-left: 15px;
    filter: none;
    color: rgb(var(--palette-textInput));
    background-color: transparent;
    border-radius: 6px;
    font-size: var(--font-size-1);
    border: none;
    padding-right: 25px;
    letter-spacing: 1.2px;
    flex: 9 1 75%;
    width: 75%;
    height: 32px;
}

[data-supertokens~="input"]:focus {
    border: none;
    outline: none;
}

[data-supertokens~="input"]:-webkit-autofill,
[data-supertokens~="input"]:-webkit-autofill:hover,
[data-supertokens~="input"]:-webkit-autofill:focus,
[data-supertokens~="input"]:-webkit-autofill:active {
    -webkit-text-fill-color: rgb(var(--palette-textInput));
    box-shadow: 0 0 0 30px rgb(var(--palette-inputBackground)) inset;
}

[data-supertokens~="inputAdornment"] {
    justify-content: center;
    margin-right: 5px;
}

[data-supertokens~="showPassword"] {
    cursor: pointer;
}

[data-supertokens~="enterEmailSuccessMessage"] {
    margin-top: 15px;
    margin-bottom: 15px;
    word-break: break-word;
}

[data-supertokens~="submitNewPasswordSuccessMessage"] {
    margin-top: 15px;
    margin-bottom: 15px;
}

[data-supertokens~="inputErrorMessage"] {
    padding-top: 5px;
    padding-bottom: 5px;
    color: rgb(var(--palette-error));
    line-height: 24px;
    font-weight: 400;
    font-size: var(--font-size-1);
    text-align: left;
    animation: slideTop 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
    max-width: 330px;
}

@media (max-width: 440px) {
    [data-supertokens~="inputErrorMessage"] {
        max-width: 250px;
    }
}

[data-supertokens~="inputErrorSymbol"] {
    margin-right: 5px;
    top: 1px;
    position: relative;
    left: 2px;
}

[data-supertokens~="label"] {
    text-align: left;
    font-weight: 700;
    font-size: var(--font-size-0);
    line-height: 24px;
    color: rgb(var(--palette-textLabel));
}

[data-supertokens~="formRow"] {
    display: flex;
    flex-direction: column;
    padding-top: 0px;
    padding-bottom: 20px;
}

[data-supertokens~="formRow"][data-supertokens~="hasError"] {
    padding-bottom: 0;
}

[data-supertokens~="formRow"]:last-child {
    padding-bottom: 0;
}

[data-supertokens~="sendVerifyEmailIcon"] {
    margin-top: 11px;
}

[data-supertokens~="primaryText"][data-supertokens~="sendVerifyEmailText"] {
    text-align: center;
    letter-spacing: 0.8px;
    color: rgb(var(--palette-textPrimary));
}

[data-supertokens~="secondaryLinkWithArrow"] {
    margin-top: 10px;
    margin-bottom: 30px;
    cursor: pointer;
    font-weight: 700;
}

[data-supertokens~="sendVerifyEmailResend"] {
    margin-top: 13px;
    font-weight: 400;
}

[data-supertokens~="sendVerifyEmailResend"]:hover {
    text-decoration: underline;
}

[data-supertokens~="noFormRow"] {
    padding-bottom: 25px;
}

[data-supertokens~="emailVerificationButtonWrapper"] {
    padding-top: 25px;
    max-width: 96px;
    margin: 0 auto;
}

[data-supertokens~="resendEmailLink"] {
    display: inline-block;
}

[data-supertokens~="resetPasswordEmailForm"] {
    padding-bottom: 20px;
}

[data-supertokens~="resetPasswordPasswordForm"] {
    padding-bottom: 20px;
}
`,UPe=function(e){var t=e.children,r=e.userStyles;return Cq.jsxs(FPe.Fragment,{children:[t,Cq.jsxs("style",{children:[BPe,r.join(`
`)]})]})},$Pe={en:kq.__assign(kq.__assign({},LPe.defaultTranslationsCommon.en),{EMAIL_VERIFICATION_RESEND_SUCCESS:"Email resent",EMAIL_VERIFICATION_SEND_TITLE:"Verify your email!",EMAIL_VERIFICATION_SEND_DESC_START:"",EMAIL_VERIFICATION_SEND_DESC_STRONG:"Please click on the link",EMAIL_VERIFICATION_SEND_DESC_END:" in the email we just sent you to confirm your email address.",EMAIL_VERIFICATION_RESEND_BTN:"Resend Email",EMAIL_VERIFICATION_LOGOUT:"Logout ",EMAIL_VERIFICATION_SUCCESS:"Email verification successful!",EMAIL_VERIFICATION_CONTINUE_BTN:"CONTINUE",EMAIL_VERIFICATION_CONTINUE_LINK:"Continue",EMAIL_VERIFICATION_EXPIRED:"The email verification link has expired",EMAIL_VERIFICATION_ERROR_TITLE:"Something went wrong",EMAIL_VERIFICATION_ERROR_DESC:"We encountered an unexpected error. Please contact support for assistance",EMAIL_VERIFICATION_LINK_CLICKED_HEADER:"Verify your email address",EMAIL_VERIFICATION_LINK_CLICKED_DESC:"Please click on the button below to verify your email address",EMAIL_VERIFICATION_LINK_CLICKED_CONTINUE_BUTTON:"CONTINUE"})};P7.ThemeBase=UPe;P7.defaultTranslationsEmailVerification=$Pe;var Yae={},zPe=zi,_q=u;function HPe(e){var t=e.color;return _q.jsx("svg",zPe.__assign({width:"6",height:"8",viewBox:"0 0 6 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:_q.jsx("path",{d:"M0.372871 3.24407C-0.0875903 3.64284 -0.0875899 4.35716 0.372872 4.75593L3.84535 7.76318C4.49299 8.32406 5.5 7.864 5.5 7.00725L5.5 0.992749C5.5 0.135997 4.49299 -0.324056 3.84535 0.23682L0.372871 3.24407Z",fill:"".concat(t)})}))}Yae.ArrowLeftIcon=HPe;var gb={},R7={},WPe=zi,zj=u,VPe=Vx;function qPe(e){var t=e.type,r=e.label,n=e.disabled,i=e.isLoading,a=e.onClick,s=e.isGreyedOut,o=e.icon,l=VPe.useTranslation();n===void 0&&(n=!1);var c="button";return s&&(c+=" buttonGreyedOut"),o&&(c+=" buttonWithIcon"),zj.jsxs("button",WPe.__assign({type:t,disabled:n,onClick:a,"data-supertokens":c},{children:[o&&zj.jsx("div",{children:o()}),zj.jsxs("div",{children:[l(r),i&&"..."]})]}))}R7.Button=qPe;var on=zi,Sr=u,fs=I,GPe=GE,KPe=R7,j7=Vx;function XPe(e){return e&&e.__esModule?e:{default:e}}var YPe=XPe(fs);function X6(e){var t=e.children,r=e.hasError;return Sr.jsx("div",on.__assign({"data-supertokens":["formRow",r?"hasError":""].join(" ")},{children:t}))}function QPe(){return Sr.jsx("svg",on.__assign({xmlns:"http://www.w3.org/2000/svg",width:"14.862",height:"12.033",viewBox:"0 0 14.862 12.033","data-supertokens":"checkedIcon"},{children:Sr.jsx("path",{fill:"rgb(var(--palette-primary))",d:"M12.629 49L5.06 56.572l-2.829-2.829L0 55.977l5.057 5.057.654-.651 9.152-9.152z",transform:"translate(0 -49)"})}))}function Qae(){return Sr.jsx("svg",on.__assign({xmlns:"http://www.w3.org/2000/svg",width:"17",height:"15",viewBox:"0 0 17 15","data-supertokens":"errorIcon"},{children:Sr.jsxs("g",{children:[Sr.jsx("g",on.__assign({className:"Asdf",fill:"rgb(var(--palette-error))"},{children:Sr.jsx("path",{d:"M13.568 14.75H3.432c-.63 0-1.195-.325-1.512-.869-.317-.544-.32-1.196-.01-1.744l5.067-8.943c.315-.556.884-.887 1.523-.887.639 0 1.208.331 1.523.887l5.067 8.943c.31.548.307 1.2-.01 1.744s-.882.869-1.512.869z",transform:"translate(-824.894 -352.829) translate(824.894 352.829)"})})),Sr.jsx("text",on.__assign({fill:"#fff",fontSize:"10px",fontWeight:"700",transform:"translate(-824.894 -352.829) translate(832.014 365.198)"},{children:Sr.jsx("tspan",on.__assign({x:"0",y:"0"},{children:"!"}))}))]})}))}function JPe(e){var t=e.showPassword;return t===!0?Sr.jsx("div",{children:Sr.jsx("svg",on.__assign({xmlns:"http://www.w3.org/2000/svg",width:"18.391",height:"16.276",viewBox:"0 0 18.391 16.276","data-supertokens":"showPasswordIcon show"},{children:Sr.jsxs("g",{children:[Sr.jsx("g",{children:Sr.jsx("g",{children:Sr.jsx("g",{children:Sr.jsx("path",{fill:"rgb(var(--palette-textPrimary))",d:"M29.289 100.33c-2.4-3.63-5.619-5.63-9.069-5.63s-6.67 2-9.069 5.63a.767.767 0 0 0 0 .845c2.4 3.63 5.619 5.63 9.069 5.63s6.67-2 9.069-5.63a.767.767 0 0 0 0-.845zm-9.069 4.944c-2.785 0-5.435-1.6-7.5-4.519 2.065-2.92 4.715-4.519 7.5-4.519s5.435 1.6 7.5 4.519c-2.064 2.92-4.711 4.519-7.5 4.519z",transform:"translate(-822 -420.048) translate(822 422.035) translate(-11.025 -94.7)"})})})}),Sr.jsxs("g",on.__assign({fill:"rgb(var(--palette-textPrimary))",stroke:"rgb(var(--palette-inputBackground))",transform:"translate(-822 -420.048) translate(827.164 424.055)"},{children:[Sr.jsx("circle",{cx:"4.036",cy:"4.036",r:"4.036",stroke:"none"}),Sr.jsx("circle",{cx:"4.036",cy:"4.036",r:"3.536",fill:"none"})]})),Sr.jsx("path",{fill:"none",stroke:"#707070",strokeLinecap:"round",strokeWidth:"2.25px",d:"M11.981 0L0 11.981",transform:"translate(-822 -420.048) translate(825.084 421.639)"}),Sr.jsx("path",{fill:"none",stroke:"rgb(var(--palette-inputBackground))",strokeLinecap:"round",d:"M13.978 0L0 13.978",transform:"translate(-822 -420.048) translate(825.084 421.639)"})]})}))}):Sr.jsx("div",{children:Sr.jsx("svg",on.__assign({xmlns:"http://www.w3.org/2000/svg",width:"18.281",height:"12.033",viewBox:"0 0 18.281 12.033","data-supertokens":"showPasswordIcon hide"},{children:Sr.jsxs("g",{children:[Sr.jsx("g",{children:Sr.jsx("g",{children:Sr.jsx("g",{children:Sr.jsx("path",{fill:"rgb(var(--palette-textPrimary))",d:"M29.18 100.3c-2.384-3.608-5.586-5.6-9.015-5.6s-6.63 1.989-9.015 5.6a.763.763 0 0 0 0 .84c2.384 3.608 5.586 5.6 9.015 5.6s6.63-1.989 9.015-5.6a.763.763 0 0 0 0-.84zm-9.015 4.914c-2.769 0-5.4-1.589-7.459-4.492 2.052-2.9 4.686-4.492 7.459-4.492s5.4 1.589 7.459 4.492c-2.056 2.899-4.686 4.489-7.458 4.489z",transform:"translate(-822 -422.088) translate(822 422.088) translate(-11.025 -94.7)"})})})}),Sr.jsxs("g",on.__assign({fill:"rgb(var(--palette-textPrimary))",stroke:"rgb(var(--palette-inputBackground))",transform:"translate(-822 -422.088) translate(827.133 424.096)"},{children:[Sr.jsx("circle",{cx:"4.012",cy:"4.012",r:"4.012",stroke:"none"}),Sr.jsx("circle",{cx:"4.012",cy:"4.012",r:"3.512",fill:"none"})]}))]})}))})}var ZPe=function(e){var t=e.type,r=e.name,n=e.hasError,i=e.autoComplete,a=e.onInputFocus,s=e.onInputBlur,o=e.onChange,l=e.value,c=e.placeholder,d=e.validated,f=e.autofocus,p=j7.useTranslation(),m=fs.useState(!1),x=m[0],y=m[1];function b(){a!==void 0&&a(l)}function S(){s!==void 0&&s(l)}function _(A){o&&o(A.target.value)}i===void 0&&(i="off");var C=t;return t==="password"&&x===!0&&(C="text"),Sr.jsx("div",on.__assign({"data-supertokens":"inputContainer"},{children:Sr.jsxs("div",on.__assign({"data-supertokens":["inputWrapper",n?"inputError":""].join(" ")},{children:[Sr.jsx("input",{autoFocus:f,autoComplete:i,"data-supertokens":"input input-".concat(r),className:"supertokens-input",onFocus:b,onBlur:S,type:C,name:r,placeholder:p(c),onChange:_,value:l}),n===!0&&Sr.jsx("div",on.__assign({"data-supertokens":"inputAdornment inputAdornmentError"},{children:Sr.jsx(Qae,{})})),d===!0&&n===!1&&Sr.jsx("div",on.__assign({"data-supertokens":"inputAdornment inputAdornmentSuccess"},{children:Sr.jsx(QPe,{})})),t==="password"&&l.length>0&&Sr.jsx("div",on.__assign({onClick:function(){return y(x===!1)},"data-supertokens":"inputAdornment showPassword"},{children:Sr.jsx(JPe,{showPassword:x})}))]}))}))};function eRe(e){var t=e.error,r=j7.useTranslation();return Sr.jsx("div",on.__assign({"data-supertokens":"inputErrorMessage"},{children:r(t)}))}function Jae(e){var t=e.value,r=e.showIsRequired,n=j7.useTranslation();return Sr.jsxs("div",on.__assign({"data-supertokens":"label"},{children:[n(t),r&&t&&t.trim()!==""&&" *"]}))}var Hj=function(e){if(e.getDefaultValue!==void 0){var t=e.getDefaultValue();if(typeof t!="string")throw new Error("getDefaultValue for ".concat(e.id," must return a string"));return t}return""};function tRe(e){var t=e.field,r=e.type,n=e.fstate,i=e.onInputFocus,a=e.onInputBlur,s=e.onInputChange,o=fs.useCallback(function(d){i({id:t.id,value:d})},[i,t.id]),l=fs.useCallback(function(d){a({id:t.id,value:d})},[a,t.id]),c=fs.useCallback(function(d){s({id:t.id,value:d})},[s,t.id]);return t.inputComponent!==void 0?Sr.jsx(t.inputComponent,{type:r,name:t.id,validated:n.validated===!0,placeholder:t.placeholder,value:n.value,autoComplete:t.autoComplete,autofocus:t.autofocus,onInputFocus:o,onInputBlur:l,onChange:c,hasError:n.error!==void 0},t.id):Sr.jsx(ZPe,{type:r,name:t.id,validated:n.validated===!0,placeholder:t.placeholder,value:n.value,autoComplete:t.autoComplete,onInputFocus:o,onInputBlur:l,onChange:c,autofocus:t.autofocus,hasError:n.error!==void 0},t.id)}var rRe=function(e){var t=e.footer,r=e.buttonLabel,n=e.showLabels,i=e.validateOnBlur,a=e.formFields,s=fs.useRef(new AbortController);fs.useEffect(function(){return s.current=new AbortController,function(){s.current.abort()}},[s]);var o=fs.useState(e.formFields.map(function(_){return{id:_.id,value:Hj(_)}})),l=o[0],c=o[1];fs.useEffect(function(){c(function(_){var C=_,A=e.formFields.filter(function(j){return!l.some(function(P){return j.id===P.id})});return A.length>0&&(_=on.__spreadArray(on.__spreadArray([],_,!0),A.map(function(j){return{id:j.id,value:Hj(j)}}),!0)),l.some(function(j){return!e.formFields.some(function(P){return P.id===j.id})})&&(C=_.filter(function(j){return e.formFields.some(function(P){return P.id===j.id})})),C})},[e.formFields,c]);var d=fs.useState(!1),f=d[0],p=d[1],m=fs.useCallback(function(_,C){c(function(A){var j=A.find(function(P){return P.id===_});return j===void 0?on.__spreadArray(on.__spreadArray([],A,!0),[C({id:_,value:""})],!1):A.filter(function(P){return P.id!==j.id}).concat(C(j))})},[c]),x=fs.useCallback(function(_){m(_.id,function(C){return on.__assign(on.__assign({},C),{validated:!1})})},[m]),y=fs.useCallback(function(_){return on.__awaiter(void 0,void 0,void 0,function(){var C,A,j;return on.__generator(this,function(P){switch(P.label){case 0:return i?(C=e.formFields.find(function(O){return O.id===_.id}),C&&_.value!==""?[4,C.validate(_.value)]:[3,2]):[2];case 1:return j=P.sent(),[3,3];case 2:j=void 0,P.label=3;case 3:return A=j,m(_.id,function(O){return on.__assign(on.__assign({},O),{error:A,validated:A===void 0&&_.value.length!==0})}),[2]}})})},[i,m,e.formFields]),b=fs.useCallback(function(_){if(typeof _.value!="string")throw new Error("".concat(_.id," value must be a string"));m(_.id,function(C){return on.__assign(on.__assign({},C),{value:_.value,error:void 0})}),e.clearError()},[m]),S=fs.useCallback(function(_){return on.__awaiter(void 0,void 0,void 0,function(){var C,A,j,P,O,D,L,B,H,z,ie,X,W;return on.__generator(this,function(Q){switch(Q.label){case 0:_.preventDefault(),p(!0),c(function(te){return te.map(function(J){return on.__assign(on.__assign({},J),{error:void 0})})}),C=a==null?void 0:a.map(function(te){var J=l==null?void 0:l.find(function(Y){return Y.id===te.id});return{id:te.id,value:J===void 0?"":J.value}}),A=[],Q.label=1;case 1:return Q.trys.push([1,3,4,5]),[4,on.handleCallAPI({apiFields:C,fieldUpdates:A,callAPI:e.callAPI})];case 2:if(j=Q.sent(),P=j.result,O=j.generalError,D=j.fetchError,s!=null&&s.current.signal.aborted)return[2];if(O!==void 0||P!==void 0&&P.status!=="OK")for(L=function(te){var J=A.find(function(Y){return Y.id===te.id});(J||te.clearOnSubmit===!0)&&m&&m(te.id,function(Y){return on.__assign(on.__assign({},Y),{value:J?J.value:""})})},B=0,H=a||[];B<H.length;B++)z=H[B],L(z);if(O!==void 0)e.onError(O.message);else if(D!==void 0)if(e.onFetchError)e.onFetchError(D);else throw D;else{if(P.status==="OK"&&(p(!1),e.clearError(),e.onSuccess!==void 0&&e.onSuccess(P)),s!=null&&s.current.signal.aborted)return[2];P.status==="FIELD_ERROR"&&(ie=P.formFields,X=function(te){var J,Y=(J=ie.find(function(_e){return _e.id===te.id}))===null||J===void 0?void 0:J.error;if(Y==="Field is not optional"){var pe=a==null?void 0:a.find(function(_e){return _e.id===te.id});if((pe==null?void 0:pe.nonOptionalErrorMsg)!==void 0)return pe==null?void 0:pe.nonOptionalErrorMsg}return Y},c(function(te){return te.map(function(J){return on.__assign(on.__assign({},J),{error:X(J)})})}))}return[3,5];case 3:return W=Q.sent(),console.error(W),e.onError("SOMETHING_WENT_WRONG_ERROR"),[3,5];case 4:return p(!1),[7];case 5:return[2]}})})},[p,c,e,a,l,m]);return Sr.jsx(Zae.Provider,on.__assign({value:l},{children:Sr.jsxs("form",on.__assign({autoComplete:"on",noValidate:!0,onSubmit:S,"data-supertokens":e.formDataSupertokens},{children:[a.filter(function(_){return _.hidden!==!0}).map(function(_){var C="text";GPe.MANDATORY_FORM_FIELDS_ID_ARRAY.includes(_.id)&&(C=_.id),_.id==="confirm-password"&&(C="password");var A=l.find(function(j){return j.id===_.id})||{id:_.id,value:Hj(_)};return Sr.jsx(X6,on.__assign({hasError:A.error!==void 0},{children:Sr.jsxs(fs.Fragment,{children:[n&&(_.labelComponent!==void 0?_.labelComponent:Sr.jsx(Jae,{value:_.label,showIsRequired:_.showIsRequired})),Sr.jsx(tRe,{type:C,field:_,fstate:A,onInputFocus:x,onInputBlur:y,onInputChange:b}),A.error&&Sr.jsx(eRe,{error:A.error})]})}),_.id)}),Sr.jsx(X6,{children:Sr.jsxs(fs.Fragment,{children:[Sr.jsx(KPe.Button,{disabled:f,isLoading:f,type:"submit",label:r}),t]})},"form-button")]}))}))},Zae=YPe.default.createContext(void 0),nRe=function(){var e=fs.useContext(Zae);if(e===void 0)throw new Error("useFormState used outside FormBase");return e};gb.ErrorIcon=Qae;gb.FormBase=rRe;gb.FormRow=X6;gb.Label=Jae;gb.useFormFields=nRe;var ese={};(function(e){function t(n){for(var i in n)e.hasOwnProperty(i)||(e[i]=n[i])}e.__esModule=!0;let r=sb;r.default!==void 0?t(r):t({default:r,...r})})(ese);var tse={},iRe=zi,aRe=u,sRe=vn;function oRe(e){var t=e.children,r=e.recipeComponentOverrides;return aRe.jsx(sRe.ComponentOverrideContext.Provider,iRe.__assign({value:r},{children:t}))}tse.AuthComponentWrapper=oRe;var Ef={},xb={},rse={},nse={},XE={},N4={},O2=Ve&&Ve.__assign||function(){return O2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},O2.apply(this,arguments)};Object.defineProperty(N4,"__esModule",{value:!0});N4.normaliseUserInput=void 0;var lRe=ME;function cRe(e){var t=O2({functions:function(r){return r}},e.override);return O2(O2({},(0,lRe.normaliseRecipeModuleConfig)(e)),{override:t})}N4.normaliseUserInput=cRe;var YE={},Wj=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},Vj=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(YE,"__esModule",{value:!0});YE.getRecipeImplementation=void 0;var Lm=Wx,Nq=$r;function ise(e){var t=new Lm.default(e.recipeId,e.appInfo);return{verifyEmail:function(r){var n=r.options,i=r.userContext;return Wj(this,void 0,void 0,function(){var a,s,o,l,c;return Vj(this,function(d){switch(d.label){case 0:return a=this.getEmailVerificationTokenFromURL({userContext:i}),s=this.getTenantIdFromURL({userContext:i}),[4,t.post({path:"/<tenantId>/user/email/verify",pathParams:{tenantId:s||"public"}},{body:{method:"token",token:a}},Lm.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"VERIFY_EMAIL",options:n,userContext:i}),Lm.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,userContext:i,action:"VERIFY_EMAIL"}))];case 1:return o=d.sent(),l=o.jsonBody,c=o.fetchResponse,[2,{status:l.status,fetchResponse:c}]}})})},isEmailVerified:function(r){var n=r.options,i=r.userContext;return Wj(this,void 0,void 0,function(){var a,s,o;return Vj(this,function(l){switch(l.label){case 0:return[4,t.get("/user/email/verify",{},Lm.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"IS_EMAIL_VERIFIED",options:n,userContext:i}),Lm.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,userContext:i,action:"IS_EMAIL_VERIFIED"}))];case 1:return a=l.sent(),s=a.jsonBody,o=a.fetchResponse,[2,{status:"OK",isVerified:s.isVerified,fetchResponse:o}]}})})},sendVerificationEmail:function(r){var n=r.options,i=r.userContext;return Wj(this,void 0,void 0,function(){var a,s,o;return Vj(this,function(l){switch(l.label){case 0:return[4,t.post("/user/email/verify/token",{body:void 0},Lm.default.preparePreAPIHook({recipePreAPIHook:e.preAPIHook,action:"SEND_VERIFY_EMAIL",options:n,userContext:i}),Lm.default.preparePostAPIHook({recipePostAPIHook:e.postAPIHook,userContext:i,action:"SEND_VERIFY_EMAIL"}))];case 1:return a=l.sent(),s=a.jsonBody,o=a.fetchResponse,[2,{status:s.status,fetchResponse:o}]}})})},getEmailVerificationTokenFromURL:function(){var r=(0,Nq.getQueryParams)("token");return r===void 0?"":r},getTenantIdFromURL:function(){return(0,Nq.getQueryParams)("tenantId")}}}YE.default=ise;YE.getRecipeImplementation=ise;var QE={},uRe=Ve&&Ve.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nT=Ve&&Ve.__assign||function(){return nT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},nT.apply(this,arguments)},Aq=Ve&&Ve.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},Tq=Ve&&Ve.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(QE,"__esModule",{value:!0});QE.EmailVerificationClaimClass=void 0;var ase=h7,dRe=i4,fRe=jE;function hRe(e){return Math.max(e,ase.DateProviderReference.getReferenceOrThrow().dateProvider.getThresholdInSeconds())}var pRe=function(e){uRe(t,e);function t(r){var n=e.call(this,{id:fRe.EMAILVERIFICATION_CLAIM_ID,refresh:function(i){return Aq(n,void 0,void 0,function(){return Tq(this,function(a){switch(a.label){case 0:return[4,r().isEmailVerified({userContext:i})];case 1:return a.sent(),[2]}})})}})||this;return n.validators=nT(nT({},n.validators),{isVerified:function(i,a){return{id:n.id,refresh:n.refresh,shouldRefresh:function(s,o){var l=ase.DateProviderReference.getReferenceOrThrow().dateProvider;if(i=i??hRe(10),a!==void 0&&a<l.getThresholdInSeconds())throw new Error("maxAgeInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(l.getThresholdInSeconds()));if(i<l.getThresholdInSeconds())throw new Error("refetchTimeOnFalseInSeconds must be greater than or equal to the DateProvider threshold value -> ".concat(l.getThresholdInSeconds()));var c=n.getValueFromPayload(s,o);if(c===void 0)return!0;var d=l.now(),f=n.getLastFetchedTime(s,o);return a!==void 0&&f<d-a*1e3||c===!1&&f<d-i*1e3},validate:function(s,o){return Aq(n,void 0,void 0,function(){var l;return Tq(this,function(c){return l=this.getValueFromPayload(s,o),[2,l===!0?{isValid:!0}:{isValid:!1,reason:{message:"wrong value",expectedValue:!0,actualValue:l}}]})})}}}}),n}return t}(dRe.BooleanClaim);QE.EmailVerificationClaimClass=pRe;var iT=Ve&&Ve.__assign||function(){return iT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},iT.apply(this,arguments)};Object.defineProperty(XE,"__esModule",{value:!0});XE.Recipe=void 0;var mRe=v7,gRe=N4,xRe=YE,vRe=bf,qj=$r,yRe=QE,bRe=$x,sse=function(){function e(t){this.config=(0,gRe.normaliseUserInput)(t);var r=new vRe.default((0,xRe.default)({recipeId:this.config.recipeId,appInfo:this.config.appInfo,clientType:this.config.clientType,preAPIHook:this.config.preAPIHook,postAPIHook:this.config.postAPIHook}));this.recipeImplementation=r.override(this.config.override.functions).build(),bRe.PostSuperTokensInitCallbacks.addPostInitCallback(function(){mRe.SessionClaimValidatorStore.addClaimValidatorFromOtherRecipe(e.EmailVerificationClaim.validators.isVerified(10))})}return e.init=function(t){return function(r,n,i,a){return e.instance=new e(iT(iT({},(0,qj.applyPlugins)(e.RECIPE_ID,t,a??[])),{appInfo:r,clientType:n,recipeId:e.RECIPE_ID})),e.instance}},e.getInstanceOrThrow=function(){if(e.instance===void 0){var t="No instance of EmailVerification found. Ensure that the 'EmailVerification.init' method is called within the 'SuperTokens.init' recipeList.";throw t=(0,qj.checkForSSRErrorAndAppendIfNeeded)(t),Error(t)}return e.instance},e.reset=function(){(0,qj.isTest)()&&(e.instance=void 0)},e.RECIPE_ID="emailverification",e.EmailVerificationClaim=new yRe.EmailVerificationClaimClass(function(){return e.getInstanceOrThrow().recipeImplementation}),e}();XE.Recipe=sse;XE.default=sse;(function(e){var t=Ve&&Ve.__assign||function(){return t=Object.assign||function(m){for(var x,y=1,b=arguments.length;y<b;y++){x=arguments[y];for(var S in x)Object.prototype.hasOwnProperty.call(x,S)&&(m[S]=x[S])}return m},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.EmailVerificationClaimClass=e.EmailVerificationClaim=e.getTenantIdFromURL=e.getEmailVerificationTokenFromURL=e.isEmailVerified=e.sendVerificationEmail=e.verifyEmail=e.init=void 0;var r=XE,n=$r,i=QE;Object.defineProperty(e,"EmailVerificationClaimClass",{enumerable:!0,get:function(){return i.EmailVerificationClaimClass}});var a=function(){function m(){}return m.init=function(x){return r.default.init(x)},m.verifyEmail=function(x){return r.default.getInstanceOrThrow().recipeImplementation.verifyEmail(t(t({},x),{userContext:(0,n.getNormalisedUserContext)(x==null?void 0:x.userContext)}))},m.sendVerificationEmail=function(x){return r.default.getInstanceOrThrow().recipeImplementation.sendVerificationEmail(t(t({},x),{userContext:(0,n.getNormalisedUserContext)(x==null?void 0:x.userContext)}))},m.isEmailVerified=function(x){return r.default.getInstanceOrThrow().recipeImplementation.isEmailVerified(t(t({},x),{userContext:(0,n.getNormalisedUserContext)(x==null?void 0:x.userContext)}))},m.getEmailVerificationTokenFromURL=function(x){return r.default.getInstanceOrThrow().recipeImplementation.getEmailVerificationTokenFromURL(t(t({},x),{userContext:(0,n.getNormalisedUserContext)(x==null?void 0:x.userContext)}))},m.getTenantIdFromURL=function(x){return r.default.getInstanceOrThrow().recipeImplementation.getTenantIdFromURL(t(t({},x),{userContext:(0,n.getNormalisedUserContext)(x==null?void 0:x.userContext)}))},m.EmailVerificationClaim=r.default.EmailVerificationClaim,m}();e.default=a;var s=a.init;e.init=s;var o=a.verifyEmail;e.verifyEmail=o;var l=a.sendVerificationEmail;e.sendVerificationEmail=l;var c=a.isEmailVerified;e.isEmailVerified=c;var d=a.getEmailVerificationTokenFromURL;e.getEmailVerificationTokenFromURL=d;var f=a.getTenantIdFromURL;e.getTenantIdFromURL=f;var p=a.EmailVerificationClaim;e.EmailVerificationClaim=p})(nse);(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(nse)})(rse);var wRe=Ux,vi=zi,ose=rse,SRe=m4,ERe=x7,CRe=fb,kRe=Ua;function _Re(e){return e&&e.__esModule?e:{default:e}}var Iq=_Re(ose),lse="/verify-email",NRe=function(e){vi.__extends(t,e);function t(r,n){var i=e.call(this,r)||this,a=vi.__assign({},i.validators),s=function(l){var c=a[l];a[l]=function(){for(var d=[],f=0;f<arguments.length;f++)d[f]=arguments[f];return vi.__assign(vi.__assign({},c.apply(void 0,d)),{onFailureRedirection:function(p){if(n!==void 0)return n(p);var m=D7.getInstanceOrThrow();if(m.config.mode==="REQUIRED")return m.getRedirectUrl({action:"VERIFY_EMAIL",tenantIdFromQueryParams:vi.getTenantIdFromQueryParams()},p.userContext)},showAccessDeniedOnFailure:!1})}};for(var o in a)s(o);return i.validators=a,i}return t}(ose.EmailVerificationClaimClass),ARe=function(e){return function(t){return vi.__assign(vi.__assign({},t),{verifyEmail:function(r){return vi.__awaiter(this,void 0,void 0,function(){var n;return vi.__generator(this,function(i){switch(i.label){case 0:return[4,t.verifyEmail(r)];case 1:return n=i.sent(),n.status==="OK"&&e({action:"EMAIL_VERIFIED_SUCCESSFUL",userContext:r.userContext}),[2,n]}})})},sendVerificationEmail:function(r){return vi.__awaiter(this,void 0,void 0,function(){var n;return vi.__generator(this,function(i){switch(i.label){case 0:return[4,t.sendVerificationEmail(r)];case 1:return n=i.sent(),n.status==="OK"&&e({action:"VERIFY_EMAIL_SENT",userContext:r.userContext}),[2,n]}})})}})}};function TRe(e){e===void 0&&(e={});var t=e.disableDefaultUI===!0,r=e.mode===void 0?"REQUIRED":e.mode,n=e.sendVerifyEmailScreen!==void 0&&e.sendVerifyEmailScreen.style!==void 0?e.sendVerifyEmailScreen.style:"",i={style:n},a=e.verifyEmailLinkClickedScreen!==void 0&&e.verifyEmailLinkClickedScreen.style!==void 0?e.verifyEmailLinkClickedScreen.style:"",s={style:a},o=vi.__assign({functions:function(l){return l}},e.override);return vi.__assign(vi.__assign({},kRe.normaliseRecipeModuleConfig(e)),{disableDefaultUI:t,mode:r,sendVerifyEmailScreen:i,verifyEmailLinkClickedScreen:s,override:o})}var D7=function(e){vi.__extends(t,e);function t(r,n){n===void 0&&(n=Iq.default);var i=e.call(this,r)||this;return i.webJSRecipe=n,i.recipeID=t.RECIPE_ID,i.getDefaultRedirectionURL=function(a){return vi.__awaiter(i,void 0,void 0,function(){return vi.__generator(this,function(s){return a.action==="VERIFY_EMAIL"?[2,vi.getDefaultRedirectionURLForPath(this.config,lse,a)]:[2,"/"]})})},SRe.PostSuperTokensInitCallbacks.addPostInitCallback(function(){var a=t.EmailVerificationClaim.validators.isVerified(10);ERe.SessionClaimValidatorStore.addClaimValidatorFromOtherRecipe(a)}),i}return t.init=function(r){var n=TRe(r);return{recipeID:t.RECIPE_ID,authReact:function(i){return t.instance=new t(vi.__assign(vi.__assign({},n),{appInfo:i,recipeId:t.RECIPE_ID})),t.instance},webJS:Iq.default.init(vi.__assign(vi.__assign({},n),{override:{functions:function(i,a){var s=ARe(n.onHandleEvent);return a.override(s),a.override(n.override.functions),i}}}))}},t.getInstanceOrThrow=function(){if(t.instance===void 0){var r="No instance of EmailVerification found. Make sure to call the EmailVerification.init method.";throw typeof window>"u"&&(r=r+vi.SSR_ERROR),Error(r)}return t.instance},t.prototype.isEmailVerified=function(r){return vi.__awaiter(this,void 0,void 0,function(){return vi.__generator(this,function(n){switch(n.label){case 0:return[4,this.webJSRecipe.isEmailVerified({userContext:r})];case 1:return[2,n.sent()]}})})},t.reset=function(){vi.isTest()&&(t.instance=void 0)},t.RECIPE_ID="emailverification",t.EmailVerificationClaim=new NRe(function(){return t.getInstanceOrThrow().webJSRecipe}),t}(CRe.RecipeModule),cse=wRe.createGenericComponentsOverrideContext(void 0,D7.RECIPE_ID),IRe=cse[0],ORe=cse[1];xb.DEFAULT_VERIFY_EMAIL_PATH=lse;xb.EmailVerification=D7;xb.Provider=ORe;xb.useContext=IRe;Object.defineProperty(Ef,"__esModule",{value:!0});var ss=zi,Up=xb,Kx=function(){function e(){}return e.init=function(t){return Up.EmailVerification.init(t)},e.isEmailVerified=function(t){return ss.__awaiter(this,void 0,void 0,function(){return ss.__generator(this,function(r){return[2,Up.EmailVerification.getInstanceOrThrow().webJSRecipe.isEmailVerified(ss.__assign(ss.__assign({},t),{userContext:ss.getNormalisedUserContext(t==null?void 0:t.userContext)}))]})})},e.verifyEmail=function(t){return ss.__awaiter(this,void 0,void 0,function(){return ss.__generator(this,function(r){return[2,Up.EmailVerification.getInstanceOrThrow().webJSRecipe.verifyEmail(ss.__assign(ss.__assign({},t),{userContext:ss.getNormalisedUserContext(t==null?void 0:t.userContext)}))]})})},e.sendVerificationEmail=function(t){return ss.__awaiter(this,void 0,void 0,function(){return ss.__generator(this,function(r){return[2,Up.EmailVerification.getInstanceOrThrow().webJSRecipe.sendVerificationEmail(ss.__assign(ss.__assign({},t),{userContext:ss.getNormalisedUserContext(t==null?void 0:t.userContext)}))]})})},e.getEmailVerificationTokenFromURL=function(t){return Up.EmailVerification.getInstanceOrThrow().webJSRecipe.getEmailVerificationTokenFromURL(ss.__assign(ss.__assign({},t),{userContext:ss.getNormalisedUserContext(t==null?void 0:t.userContext)}))},e.EmailVerificationClaim=Up.EmailVerification.EmailVerificationClaim,e.ComponentsOverrideProvider=Up.Provider,e}(),PRe=Kx.init,RRe=Kx.isEmailVerified,jRe=Kx.verifyEmail,DRe=Kx.sendVerificationEmail,MRe=Kx.getEmailVerificationTokenFromURL,FRe=Kx.ComponentsOverrideProvider,LRe=Up.EmailVerification.EmailVerificationClaim;Ef.EmailVerificationClaim=LRe;Ef.EmailVerificationComponentsOverrideProvider=FRe;Ef.default=Kx;Ef.getEmailVerificationTokenFromURL=MRe;Ef.init=PRe;Ef.isEmailVerified=RRe;Ef.sendVerificationEmail=DRe;Ef.verifyEmail=jRe;var Tt=zi,lr=u,BRe=r4,la=vn,M1=E4,kl=I,jg=Ua,A4=P7,T4=Vx,URe=Yae,gy=gb,$Re=ese,zRe=R7,use=tse,dse=Ef,fse=xb,hse=Yi,xy=Eu,Y6=C4,HRe=sb,WRe=GE;function M7(e){return e&&e.__esModule?e:{default:e}}function VRe(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}var qRe=M7(BRe),Jd=VRe(kl),aT=M7($Re),GRe=M7(HRe);function KRe(e){var t=e.onClick,r=T4.useTranslation();return lr.jsxs("div",Tt.__assign({"data-supertokens":"secondaryText secondaryLinkWithLeftArrow",onClick:t},{children:[lr.jsx(URe.ArrowLeftIcon,{color:"rgb(var(--palette-secondaryText))"}),r("EMAIL_PASSWORD_RESET_SIGN_IN_LINK")]}))}var XRe=function(e){var t=T4.useTranslation(),r=la.useUserContext(),n=kl.useState("READY"),i=n[0],a=n[1],s=kl.useState(""),o=s[0],l=s[1],c=function(){a("SENT")},d=function(){a("READY")},f=e.formFields,p=t("EMAIL_PASSWORD_RESET_SEND_BEFORE_EMAIL")+(o!==void 0&&o.length>0?o:t("EMAIL_PASSWORD_RESET_SEND_FALLBACK_EMAIL"))+t("EMAIL_PASSWORD_RESET_SEND_AFTER_EMAIL");return i==="SENT"?lr.jsx("div",Tt.__assign({"data-supertokens":"container"},{children:lr.jsxs("div",Tt.__assign({"data-supertokens":"row"},{children:[lr.jsxs("div",Tt.__assign({"data-supertokens":"primaryText enterEmailSuccessMessage"},{children:[p,lr.jsx("span",Tt.__assign({"data-supertokens":"link resendEmailLink",onClick:d},{children:t("EMAIL_PASSWORD_RESET_RESEND_LINK")}))]})),lr.jsx(KRe,{onClick:e.onBackButtonClicked})]}))})):lr.jsx("div",Tt.__assign({"data-supertokens":"container resetPasswordEmailForm"},{children:lr.jsxs("div",Tt.__assign({"data-supertokens":"row"},{children:[lr.jsxs("div",Tt.__assign({"data-supertokens":"headerTitle withBackButton"},{children:[lr.jsx(la.BackButton,{onClick:e.onBackButtonClicked}),t("EMAIL_PASSWORD_RESET_HEADER_TITLE"),lr.jsx("span",{"data-supertokens":"backButtonPlaceholder backButtonCommon"})]})),lr.jsx("div",Tt.__assign({"data-supertokens":"headerSubtitle secondaryText"},{children:t("EMAIL_PASSWORD_RESET_HEADER_SUBTITLE")})),e.error!==void 0&&lr.jsx(la.GeneralError,{error:e.error}),lr.jsx(gy.FormBase,{clearError:e.clearError,onError:e.onError,formFields:f,buttonLabel:"EMAIL_PASSWORD_RESET_SEND_BTN",onSuccess:c,callAPI:function(m){return Tt.__awaiter(void 0,void 0,void 0,function(){var x,y,b;return Tt.__generator(this,function(S){switch(S.label){case 0:return[4,Tt.validateForm(m,e.config.resetPasswordUsingTokenFeature.enterEmailForm.formFields)];case 1:return x=S.sent(),x.length>0?[2,{status:"FIELD_ERROR",formFields:x}]:(y=m.find(function(_){return _.id==="email"}),y!==void 0&&l(y.value),[4,e.recipeImplementation.sendPasswordResetEmail({formFields:m,userContext:r})]);case 2:return b=S.sent(),b.status==="PASSWORD_RESET_NOT_ALLOWED"?[2,{status:"FIELD_ERROR",formFields:[{id:"email",error:b.reason}]}]:[2,b]}})})},showLabels:!0,validateOnBlur:!0,footer:e.footer})]}))}))},YRe=la.withOverride("EmailPasswordResetPasswordEmail",XRe),QRe=function(e){var t=T4.useTranslation(),r=la.useUserContext(),n=kl.useState("READY"),i=n[0],a=n[1],s=function(){a("SUCCESS")},o=e.formFields,l=e.onSignInClicked;return i==="SUCCESS"?lr.jsx("div",Tt.__assign({"data-supertokens":"container"},{children:lr.jsxs("div",Tt.__assign({"data-supertokens":"row"},{children:[lr.jsx("div",Tt.__assign({"data-supertokens":"headerTitle"},{children:t("EMAIL_PASSWORD_RESET_SUBMIT_PW_SUCCESS_HEADER_TITLE")})),lr.jsx(gy.FormRow,{children:lr.jsxs(kl.Fragment,{children:[lr.jsx("div",Tt.__assign({"data-supertokens":"primaryText submitNewPasswordSuccessMessage"},{children:t("EMAIL_PASSWORD_RESET_SUBMIT_PW_SUCCESS_DESC")})),lr.jsx(zRe.Button,{disabled:!1,isLoading:!1,type:"button",onClick:l,label:"EMAIL_PASSWORD_RESET_SUBMIT_PW_SUCCESS_SIGN_IN_BTN"})]})},"form-button")]}))})):lr.jsx("div",Tt.__assign({"data-supertokens":"container resetPasswordPasswordForm"},{children:lr.jsxs("div",Tt.__assign({"data-supertokens":"row"},{children:[lr.jsx("div",Tt.__assign({"data-supertokens":"headerTitle"},{children:t("EMAIL_PASSWORD_RESET_SUBMIT_PW_HEADER_TITLE")})),lr.jsx("div",Tt.__assign({"data-supertokens":"headerSubtitle secondaryText"},{children:t("EMAIL_PASSWORD_RESET_SUBMIT_PW_HEADER_SUBTITLE")})),e.error!==void 0&&lr.jsx(la.GeneralError,{error:e.error}),lr.jsx(gy.FormBase,{formFields:o,clearError:e.clearError,onError:e.onError,buttonLabel:"EMAIL_PASSWORD_RESET_SUBMIT_PW_CHANGE_PW_BTN",onSuccess:s,validateOnBlur:!0,callAPI:function(c){return Tt.__awaiter(void 0,void 0,void 0,function(){var d,f;return Tt.__generator(this,function(p){switch(p.label){case 0:return[4,Tt.validateForm(c,e.config.resetPasswordUsingTokenFeature.submitNewPasswordForm.formFields)];case 1:return d=p.sent(),d.length>0?[2,{status:"FIELD_ERROR",formFields:d}]:c[0].value!==c[1].value?[2,{status:"FIELD_ERROR",formFields:[{id:c[1].id,error:"ERROR_CONFIRM_PASSWORD_NO_MATCH"}]}]:[4,e.recipeImplementation.submitNewPassword({formFields:c,userContext:r})];case 2:if(f=p.sent(),f.status==="RESET_PASSWORD_INVALID_TOKEN_ERROR")throw new aT.default("EMAIL_PASSWORD_RESET_PASSWORD_INVALID_TOKEN_ERROR");return[2,f.status==="FIELD_ERROR"?f:{status:"OK"}]}})})},showLabels:!0,footer:e.footer})]}))}))},JRe=la.withOverride("EmailPasswordSubmitNewPassword",QRe);function ZRe(e){return e.submitNewPasswordForm!==void 0?lr.jsx(JRe,Tt.__assign({},e.submitNewPasswordForm)):lr.jsx(YRe,Tt.__assign({},e.enterEmailForm))}function F7(e){var t=jg.SuperTokens.getInstanceOrThrow().rootStyle,r=e.submitNewPasswordForm?e.config.resetPasswordUsingTokenFeature.submitNewPasswordForm.style:e.config.resetPasswordUsingTokenFeature.enterEmailForm.style;return lr.jsx(la.UserContextWrapper,Tt.__assign({userContext:e.userContext},{children:lr.jsx(A4.ThemeBase,Tt.__assign({userStyles:[t,e.config.recipeRootStyle,r]},{children:lr.jsx(ZRe,Tt.__assign({},e))}))}))}var Q6={en:Tt.__assign(Tt.__assign(Tt.__assign({},jg.defaultTranslationsCommon.en),A4.defaultTranslationsEmailVerification.en),{EMAIL_PASSWORD_EMAIL_LABEL:"Email",EMAIL_PASSWORD_EMAIL_PLACEHOLDER:"Email address",EMAIL_PASSWORD_PASSWORD_LABEL:"Password",EMAIL_PASSWORD_PASSWORD_PLACEHOLDER:"Password",EMAIL_PASSWORD_SIGN_IN_FORGOT_PW_LINK:"Forgot password?",EMAIL_PASSWORD_SIGN_IN_SUBMIT_BTN:"SIGN IN",EMAIL_PASSWORD_SIGN_IN_WRONG_CREDENTIALS_ERROR:"Incorrect email and password combination",EMAIL_PASSWORD_SIGN_UP_SUBMIT_BTN:"SIGN UP",EMAIL_PASSWORD_EMAIL_ALREADY_EXISTS:"This email already exists. Please sign in instead",EMAIL_PASSWORD_RESET_HEADER_TITLE:"Reset your password",EMAIL_PASSWORD_RESET_HEADER_SUBTITLE:"We will send you an email to reset your password",EMAIL_PASSWORD_RESET_SEND_FALLBACK_EMAIL:"your account",EMAIL_PASSWORD_RESET_SEND_BEFORE_EMAIL:"A password reset email has been sent to ",EMAIL_PASSWORD_RESET_SEND_AFTER_EMAIL:", if it exists in our system. ",EMAIL_PASSWORD_RESET_RESEND_LINK:"Resend or change email",EMAIL_PASSWORD_RESET_SEND_BTN:"Email me",EMAIL_PASSWORD_RESET_SIGN_IN_LINK:"Sign In",EMAIL_PASSWORD_RESET_SUBMIT_PW_SUCCESS_HEADER_TITLE:"Success!",EMAIL_PASSWORD_RESET_SUBMIT_PW_SUCCESS_DESC:"Your password has been updated successfully",EMAIL_PASSWORD_RESET_SUBMIT_PW_SUCCESS_SIGN_IN_BTN:"SIGN IN",EMAIL_PASSWORD_NEW_PASSWORD_LABEL:"New password",EMAIL_PASSWORD_NEW_PASSWORD_PLACEHOLDER:"New password",EMAIL_PASSWORD_CONFIRM_PASSWORD_LABEL:"Confirm password",EMAIL_PASSWORD_CONFIRM_PASSWORD_PLACEHOLDER:"Confirm your password",EMAIL_PASSWORD_RESET_SUBMIT_PW_HEADER_TITLE:"Change your password",EMAIL_PASSWORD_RESET_SUBMIT_PW_HEADER_SUBTITLE:"Enter a new password below to change your password",EMAIL_PASSWORD_RESET_SUBMIT_PW_CHANGE_PW_BTN:"CHANGE PASSWORD",EMAIL_PASSWORD_RESET_PASSWORD_INVALID_TOKEN_ERROR:"Invalid password reset token",ERROR_EMAIL_NON_STRING:"Email must be of type string",ERROR_EMAIL_INVALID:"Email is invalid",ERROR_PASSWORD_NON_STRING:"Password must be of type string",ERROR_PASSWORD_TOO_SHORT:"Password must contain at least 8 characters, including a number",ERROR_PASSWORD_TOO_LONG:"Password's length must be lesser than 100 characters",ERROR_PASSWORD_NO_ALPHA:"Password must contain at least one alphabet",ERROR_PASSWORD_NO_NUM:"Password must contain at least one number",ERROR_CONFIRM_PASSWORD_NO_MATCH:"Confirmation password doesn't match",ERROR_NON_OPTIONAL:"Field is not optional","This email already exists. Please sign in instead.":void 0,"Field is not optional":void 0,"Password must contain at least 8 characters, including a number":void 0,"Password's length must be lesser than 100 characters":void 0,"Password must contain at least one alphabet":void 0,"Password must contain at least one number":void 0,"Email is invalid":void 0,"Reset password link was not created because of account take over risk. Please contact support. (ERR_CODE_001)":void 0,"Cannot sign up due to security reasons. Please try logging in, use a different login method or contact support. (ERR_CODE_007)":void 0,"Cannot sign in due to security reasons. Please try resetting your password, use a different login method or contact support. (ERR_CODE_008)":void 0,"Cannot sign in / up due to security reasons. Please contact support. (ERR_CODE_009)":void 0,"Cannot sign in / up due to security reasons. Please contact support. (ERR_CODE_010)":void 0,"Cannot sign in / up due to security reasons. Please contact support. (ERR_CODE_011)":void 0,"Cannot sign in / up due to security reasons. Please contact support. (ERR_CODE_012)":void 0,"Cannot sign in / up due to security reasons. Please contact support. (ERR_CODE_013)":void 0,"Cannot sign in / up due to security reasons. Please contact support. (ERR_CODE_014)":void 0,"Cannot sign in / up due to security reasons. Please contact support. (ERR_CODE_015)":void 0,"Cannot sign in / up due to security reasons. Please contact support. (ERR_CODE_016)":void 0})},eje=function(e){var t=Tt.getQueryParams("token"),r=la.useUserContext();e.userContext!==void 0&&(r=e.userContext);var n=Jd.useState(),i=n[0],a=n[1],s=e.recipe.config.resetPasswordUsingTokenFeature.enterEmailForm,o=e.recipe.config.resetPasswordUsingTokenFeature.submitNewPasswordForm,l=t==null?void 0:{error:i,onError:function(p){return a(p)},clearError:function(){return a(void 0)},styleFromInit:o.style,formFields:o.formFields,recipeImplementation:e.recipe.webJSRecipe,config:e.recipe.config,onSignInClicked:function(){jg.SuperTokens.getInstanceOrThrow().redirectToAuth({show:"signin",navigate:e.navigate,redirectBack:!1,userContext:r})},token:t},c={onBackButtonClicked:function(){return jg.SuperTokens.getInstanceOrThrow().redirectToAuth({show:"signin",navigate:e.navigate,redirectBack:!1,userContext:r})},error:i,onError:function(p){return a(p)},clearError:function(){return a(void 0)},styleFromInit:s.style,formFields:s.formFields,recipeImplementation:e.recipe.webJSRecipe,config:e.recipe.config},d={config:e.recipe.config,submitNewPasswordForm:l,enterEmailForm:c},f=e.useComponentOverrides();return lr.jsx(la.ComponentOverrideContext.Provider,Tt.__assign({value:f},{children:lr.jsx(la.FeatureWrapper,Tt.__assign({useShadowDom:jg.SuperTokens.getInstanceOrThrow().useShadowDom,defaultStore:Q6},{children:lr.jsxs(kl.Fragment,{children:[e.children===void 0&&lr.jsx(F7,Tt.__assign({},d)),e.children&&Jd.Children.map(e.children,function(p){return Jd.isValidElement(p)?Jd.cloneElement(p,d):p})]})}))}))},tje=la.withOverride("EmailPasswordSignInForm",function(t){var r=this,n=la.useUserContext();return lr.jsx(gy.FormBase,{formFields:t.formFields,clearError:t.clearError,onError:t.onError,onFetchError:t.onFetchError,buttonLabel:"EMAIL_PASSWORD_SIGN_IN_SUBMIT_BTN",onSuccess:t.onSuccess,callAPI:function(i){return Tt.__awaiter(r,void 0,void 0,function(){var a,s;return Tt.__generator(this,function(o){switch(o.label){case 0:return[4,Tt.validateForm(i,t.config.signInAndUpFeature.signInForm.formFields)];case 1:return a=o.sent(),a.length>0?[2,{status:"FIELD_ERROR",formFields:a}]:[4,t.recipeImplementation.signIn({formFields:i,shouldTryLinkingWithSessionUser:!1,userContext:n})];case 2:if(s=o.sent(),s.status==="WRONG_CREDENTIALS_ERROR")throw new aT.default("EMAIL_PASSWORD_SIGN_IN_WRONG_CREDENTIALS_ERROR");if(s.status==="SIGN_IN_NOT_ALLOWED")throw new aT.default(s.reason);return[2,s]}})})},validateOnBlur:!1,showLabels:!0,footer:t.footer})});function rje(e){var t=jg.SuperTokens.getInstanceOrThrow().rootStyle,r=e.config.signInAndUpFeature.signInForm.style;return lr.jsx(la.UserContextWrapper,Tt.__assign({userContext:e.userContext},{children:lr.jsx(A4.ThemeBase,Tt.__assign({userStyles:[t,e.config.recipeRootStyle,r]},{children:lr.jsx(tje,Tt.__assign({},e))}))}))}function nje(e,t,r,n,i,a,s){var o=this,l=la.useSessionContext(),c=kl.useMemo(function(){return aje(e.webJSRecipe)},[e]),d=Tt.useRethrowInRender(),f=T4.useTranslation(),p=kl.useCallback(function(){return Tt.__awaiter(o,void 0,void 0,function(){var m;return Tt.__generator(this,function(x){switch(x.label){case 0:return x.trys.push([0,2,,3]),[4,xy.Session.getInstanceOrThrow().getAccessTokenPayloadSecurely({userContext:a})];case 1:return m=x.sent(),[3,3];case 2:return x.sent(),m=void 0,[3,3];case 3:return[2,t({createdNewUser:!1,isNewRecipeUser:!1,newSessionCreated:l.loading||!l.doesSessionExist||m!==void 0&&l.accessTokenPayload.sessionHandle!==m.sessionHandle,recipeId:Y6.EmailPassword.RECIPE_ID}).catch(d)]}})})},[e,a,s]);return kl.useMemo(function(){var m=function(){return e.redirect({action:"RESET_PASSWORD",tenantIdFromQueryParams:Tt.getTenantIdFromQueryParams()},s,void 0,a)},x=e.config.signInAndUpFeature,y=x.signInForm,b=y.formFields.map(function(S){return S.id!=="password"?S:Tt.__assign(Tt.__assign({},S),{labelComponent:lr.jsxs("div",Tt.__assign({"data-supertokens":"formLabelWithLinkWrapper"},{children:[lr.jsx(gy.Label,{value:S.label,"data-supertokens":"passwordInputLabel"}),lr.jsx("a",Tt.__assign({onClick:m,"data-supertokens":"link linkButton formLabelLinkBtn forgotPasswordLink"},{children:f("EMAIL_PASSWORD_SIGN_IN_FORGOT_PW_LINK")}))]}))})});return{recipeImplementation:c,config:e.config,styleFromInit:y.style,formFields:b,error:r,clearError:i,onError:n,onFetchError:function(S){return Tt.__awaiter(o,void 0,void 0,function(){var _,C;return Tt.__generator(this,function(A){switch(A.label){case 0:return S.status!==xy.Session.getInstanceOrThrow().config.invalidClaimStatusCode?[3,5]:[4,hse.getInvalidClaimsFromResponse({response:S,userContext:a})];case 1:if(_=A.sent(),!_.some(function(j){return j.id===dse.EmailVerificationClaim.id}))return[3,5];A.label=2;case 2:return A.trys.push([2,4,,5]),C=fse.EmailVerification.getInstanceOrThrow(),[4,C.redirect({action:"VERIFY_EMAIL",tenantIdFromQueryParams:Tt.getTenantIdFromQueryParams()},s,void 0,a)];case 3:return A.sent(),[2];case 4:return A.sent(),[3,5];case 5:return n("SOMETHING_WENT_WRONG_ERROR"),[2]}})})},onSuccess:p,onForgotPasswordClick:m,userContext:a}},[e,r,a])}var ije=function(e){var t=nje(e.recipe,e.onAuthSuccess,e.error,e.onError,e.clearError,e.userContext,e.navigate),r=e.useComponentOverrides();return lr.jsx(use.AuthComponentWrapper,Tt.__assign({recipeComponentOverrides:r},{children:lr.jsxs(kl.Fragment,{children:[e.children===void 0&&lr.jsx(rje,Tt.__assign({},t)),e.children&&Jd.Children.map(e.children,function(n){return Jd.isValidElement(n)?Jd.cloneElement(n,Tt.__assign({},t)):n})]})}))},aje=function(e){return Tt.__assign(Tt.__assign({},e),{signIn:function(t){return Tt.__awaiter(this,void 0,void 0,function(){var r;return Tt.__generator(this,function(n){switch(n.label){case 0:return[4,e.signIn(Tt.__assign(Tt.__assign({},t),{shouldTryLinkingWithSessionUser:!1}))];case 1:return r=n.sent(),[2,r]}})})},signUp:function(t){return Tt.__awaiter(this,void 0,void 0,function(){var r;return Tt.__generator(this,function(n){switch(n.label){case 0:return[4,e.signUp(Tt.__assign(Tt.__assign({},t),{shouldTryLinkingWithSessionUser:!1}))];case 1:return r=n.sent(),[2,r]}})})}})},sje=la.withOverride("EmailPasswordSignUpForm",function(t){var r=this,n=la.useUserContext();return lr.jsx(gy.FormBase,{formFields:t.formFields,clearError:t.clearError,onError:t.onError,onFetchError:t.onFetchError,buttonLabel:"EMAIL_PASSWORD_SIGN_UP_SUBMIT_BTN",onSuccess:t.onSuccess,callAPI:function(i){return Tt.__awaiter(r,void 0,void 0,function(){var a,s;return Tt.__generator(this,function(o){switch(o.label){case 0:return[4,Tt.validateForm(i,t.config.signInAndUpFeature.signUpForm.formFields)];case 1:return a=o.sent(),a.length>0?[2,{status:"FIELD_ERROR",formFields:a}]:[4,t.recipeImplementation.signUp({formFields:i,shouldTryLinkingWithSessionUser:!1,userContext:n})];case 2:if(s=o.sent(),s.status==="SIGN_UP_NOT_ALLOWED")throw new GRe.default(s.reason);return[2,s]}})})},validateOnBlur:!0,showLabels:!0,footer:t.footer})});function oje(e){var t=jg.SuperTokens.getInstanceOrThrow().rootStyle,r=e.config.signInAndUpFeature.signUpForm.style;return lr.jsx(la.UserContextWrapper,Tt.__assign({userContext:e.userContext},{children:lr.jsx(A4.ThemeBase,Tt.__assign({userStyles:[t,e.config.recipeRootStyle,r]},{children:lr.jsx(sje,Tt.__assign({},e))}))}))}function lje(e,t,r,n,i,a,s){var o=this,l=la.useSessionContext(),c=kl.useMemo(function(){return e&&uje(e.webJSRecipe)},[e]),d=Tt.useRethrowInRender(),f=kl.useCallback(function(p){return Tt.__awaiter(o,void 0,void 0,function(){var m;return Tt.__generator(this,function(x){switch(x.label){case 0:return x.trys.push([0,2,,3]),[4,xy.Session.getInstanceOrThrow().getAccessTokenPayloadSecurely({userContext:a})];case 1:return m=x.sent(),[3,3];case 2:return x.sent(),m=void 0,[3,3];case 3:return[2,t({createdNewUser:p.user.loginMethods.length===1,isNewRecipeUser:!0,newSessionCreated:l.loading||!l.doesSessionExist||m!==void 0&&l.accessTokenPayload.sessionHandle!==m.sessionHandle,recipeId:e.recipeID}).catch(d)]}})})},[e,a,s]);return kl.useMemo(function(){var p=e.config.signInAndUpFeature,m=p.signUpForm;return{recipeImplementation:c,config:e.config,styleFromInit:m.style,formFields:dje(m.formFields,e,a),onFetchError:function(x){return Tt.__awaiter(o,void 0,void 0,function(){var y,b;return Tt.__generator(this,function(S){switch(S.label){case 0:return x.status!==xy.Session.getInstanceOrThrow().config.invalidClaimStatusCode?[3,5]:[4,hse.getInvalidClaimsFromResponse({response:x,userContext:a})];case 1:if(y=S.sent(),!y.some(function(_){return _.id===dse.EmailVerificationClaim.id}))return[3,5];S.label=2;case 2:return S.trys.push([2,4,,5]),b=fse.EmailVerification.getInstanceOrThrow(),[4,b.redirect({action:"VERIFY_EMAIL",tenantIdFromQueryParams:Tt.getTenantIdFromQueryParams()},s,void 0,a)];case 3:return S.sent(),[2];case 4:return S.sent(),[3,5];case 5:return n("SOMETHING_WENT_WRONG_ERROR"),[2]}})})},onSuccess:f,userContext:a,error:r,onError:n,clearError:i}},[e,r,a])}var cje=function(e){var t=la.useUserContext();e.userContext!==void 0&&(t=e.userContext);var r=lje(e.recipe,e.onAuthSuccess,e.error,e.onError,e.clearError,t,e.navigate),n=e.useComponentOverrides();return lr.jsx(use.AuthComponentWrapper,Tt.__assign({recipeComponentOverrides:n},{children:lr.jsxs(kl.Fragment,{children:[e.children===void 0&&lr.jsx(oje,Tt.__assign({},r)),e.children&&Jd.Children.map(e.children,function(i){return Jd.isValidElement(i)?Jd.cloneElement(i,Tt.__assign({},r)):i})]})}))},uje=function(e){return Tt.__assign(Tt.__assign({},e),{signIn:function(t){return Tt.__awaiter(this,void 0,void 0,function(){var r;return Tt.__generator(this,function(n){switch(n.label){case 0:return[4,e.signIn(Tt.__assign(Tt.__assign({},t),{shouldTryLinkingWithSessionUser:!1}))];case 1:return r=n.sent(),[2,r]}})})},signUp:function(t){return Tt.__awaiter(this,void 0,void 0,function(){var r;return Tt.__generator(this,function(n){switch(n.label){case 0:return[4,e.signUp(Tt.__assign(Tt.__assign({},t),{shouldTryLinkingWithSessionUser:!1}))];case 1:return r=n.sent(),[2,r]}})})}})};function dje(e,t,r){var n=this,i=e.length===2;return e.map(function(a){return Tt.__assign(Tt.__assign({},a),{showIsRequired:function(){return i?!1:a.optional===!1}(),validate:function(){return a.id!=="email"?a.validate:function(s){return Tt.__awaiter(n,void 0,void 0,function(){var o,l,c;return Tt.__generator(this,function(d){switch(d.label){case 0:return[4,a.validate(s)];case 1:if(o=d.sent(),o!==void 0)return[2,o];if(typeof s!="string")return[2,"GENERAL_ERROR_EMAIL_NON_STRING"];d.label=2;case 2:return d.trys.push([2,4,,5]),[4,t.webJSRecipe.doesEmailExist({email:s,userContext:r})];case 3:return l=d.sent().doesExist,l?[2,"EMAIL_PASSWORD_EMAIL_ALREADY_EXISTS"]:[3,5];case 4:return c=d.sent(),aT.default.isThisError(c)?[2,c.message]:[3,5];case 5:return[2,void 0]}})})}}()})})}var pse=function(e){Tt.__extends(t,e);function t(r){var n=e.call(this)||this;return n.recipeInstance=r,n.languageTranslations=Q6,n.getFeatures=function(i){i===void 0&&(i=M1.useContext);var a={};if(n.recipeInstance.config.resetPasswordUsingTokenFeature.disableDefaultUI!==!0){var s=n.recipeInstance.config.appInfo.websiteBasePath.appendPath(new qRe.default(WRe.DEFAULT_RESET_PASSWORD_PATH));a[s.getAsStringDangerous()]={matches:Tt.matchRecipeIdUsingQueryParams(n.recipeInstance.config.recipeId),component:function(o){return n.getFeatureComponent("resetpassword",o,i)},recipeID:Y6.EmailPassword.RECIPE_ID}}return a},n.getFeatureComponent=function(i,a,s){if(s===void 0&&(s=M1.useContext),i==="resetpassword")return lr.jsx(la.UserContextWrapper,Tt.__assign({userContext:a.userContext},{children:lr.jsx(eje,Tt.__assign({recipe:n.recipeInstance},a,{useComponentOverrides:s}))}));throw new Error("Should never come here.")},n.requiresSignUpPage=!0,n}return t.getInstanceOrInitAndGetInstance=function(){if(t.instance===void 0){var r=Y6.EmailPassword.getInstanceOrThrow();t.instance=new t(r)}return t.instance},t.getFeatures=function(r){return r===void 0&&(r=M1.useContext),t.getInstanceOrInitAndGetInstance().getFeatures(r)},t.getFeatureComponent=function(r,n,i){return i===void 0&&(i=M1.useContext),t.getInstanceOrInitAndGetInstance().getFeatureComponent(r,n,i)},t.prototype.getAuthComponents=function(){var r=this;return[{factorIds:[xy.FactorIds.EMAILPASSWORD],displayOrder:2,type:"SIGN_UP",component:function(n){return lr.jsx(cje,Tt.__assign({recipe:r.recipeInstance,useComponentOverrides:M1.useContext},n),"emailpassword-sign-up")}},{factorIds:[xy.FactorIds.EMAILPASSWORD],displayOrder:2,type:"SIGN_IN",component:function(n){return lr.jsx(ije,Tt.__assign({recipe:r.recipeInstance,useComponentOverrides:M1.useContext},n),"emailpassword-sign-in")}}]},t.reset=function(){Tt.isTest()&&(t.instance=void 0)},t.languageTranslations=Q6,t.ResetPasswordUsingToken=function(r){return t.getInstanceOrInitAndGetInstance().getFeatureComponent("resetpassword",r)},t.ResetPasswordUsingTokenTheme=F7,t}(la.RecipeRouter),fje=pse.ResetPasswordUsingToken;S4.EmailPasswordPreBuiltUI=pse;S4.ResetPasswordUsingToken=fje;S4.ResetPasswordUsingTokenTheme=F7;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(S4)})(Uae);let hje={data:""},pje=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||hje},mje=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,gje=/\/\*[^]*?\*\/|  +/g,Oq=/\n+/g,e0=(e,t)=>{let r="",n="",i="";for(let a in e){let s=e[a];a[0]=="@"?a[1]=="i"?r=a+" "+s+";":n+=a[1]=="f"?e0(s,a):a+"{"+e0(s,a[1]=="k"?"":t)+"}":typeof s=="object"?n+=e0(s,t?t.replace(/([^,])+/g,o=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,o):o?o+" "+l:l)):a):s!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=e0.p?e0.p(a,s):a+":"+s+";")}return r+(t&&i?t+"{"+i+"}":i)+n},Yf={},mse=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+mse(e[r]);return t}return e},xje=(e,t,r,n,i)=>{let a=mse(e),s=Yf[a]||(Yf[a]=(l=>{let c=0,d=11;for(;c<l.length;)d=101*d+l.charCodeAt(c++)>>>0;return"go"+d})(a));if(!Yf[s]){let l=a!==e?e:(c=>{let d,f,p=[{}];for(;d=mje.exec(c.replace(gje,""));)d[4]?p.shift():d[3]?(f=d[3].replace(Oq," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][d[1]]=d[2].replace(Oq," ").trim();return p[0]})(e);Yf[s]=e0(i?{["@keyframes "+s]:l}:l,r?"":"."+s)}let o=r&&Yf.g?Yf.g:null;return r&&(Yf.g=Yf[s]),((l,c,d,f)=>{f?c.data=c.data.replace(f,l):c.data.indexOf(l)===-1&&(c.data=d?l+c.data:c.data+l)})(Yf[s],t,n,o),s},vje=(e,t,r)=>e.reduce((n,i,a)=>{let s=t[a];if(s&&s.call){let o=s(r),l=o&&o.props&&o.props.className||/^go/.test(o)&&o;s=l?"."+l:o&&typeof o=="object"?o.props?"":e0(o,""):o===!1?"":o}return n+i+(s??"")},"");function I4(e){let t=this||{},r=e.call?e(t.p):e;return xje(r.unshift?r.raw?vje(r,[].slice.call(arguments,1),t.p):r.reduce((n,i)=>Object.assign(n,i&&i.call?i(t.p):i),{}):r,pje(t.target),t.g,t.o,t.k)}let gse,J6,Z6;I4.bind({g:1});let $h=I4.bind({k:1});function yje(e,t,r,n){e0.p=t,gse=e,J6=r,Z6=n}function nm(e,t){let r=this||{};return function(){let n=arguments;function i(a,s){let o=Object.assign({},a),l=o.className||i.className;r.p=Object.assign({theme:J6&&J6()},o),r.o=/ *go\d+/.test(l),o.className=I4.apply(r,n)+(l?" "+l:"");let c=e;return e[0]&&(c=o.as||e,delete o.as),Z6&&c[0]&&Z6(o),gse(c,o)}return i}}var bje=e=>typeof e=="function",sT=(e,t)=>bje(e)?e(t):e,wje=(()=>{let e=0;return()=>(++e).toString()})(),xse=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Sje=20,L7="default",vse=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case 2:let{toast:n}=t;return vse(e,{type:e.toasts.find(s=>s.id===n.id)?1:0,toast:n});case 3:let{toastId:i}=t;return{...e,toasts:e.toasts.map(s=>s.id===i||i===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+a}))}}},XN=[],yse={toasts:[],pausedAt:void 0,settings:{toastLimit:Sje}},Zd={},bse=(e,t=L7)=>{Zd[t]=vse(Zd[t]||yse,e),XN.forEach(([r,n])=>{r===t&&n(Zd[t])})},wse=e=>Object.keys(Zd).forEach(t=>bse(e,t)),Eje=e=>Object.keys(Zd).find(t=>Zd[t].toasts.some(r=>r.id===e)),O4=(e=L7)=>t=>{bse(t,e)},Cje={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},kje=(e={},t=L7)=>{let[r,n]=I.useState(Zd[t]||yse),i=I.useRef(Zd[t]);I.useEffect(()=>(i.current!==Zd[t]&&n(Zd[t]),XN.push([t,n]),()=>{let s=XN.findIndex(([o])=>o===t);s>-1&&XN.splice(s,1)}),[t]);let a=r.toasts.map(s=>{var o,l,c;return{...e,...e[s.type],...s,removeDelay:s.removeDelay||((o=e[s.type])==null?void 0:o.removeDelay)||(e==null?void 0:e.removeDelay),duration:s.duration||((l=e[s.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||Cje[s.type],style:{...e.style,...(c=e[s.type])==null?void 0:c.style,...s.style}}});return{...r,toasts:a}},_je=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||wje()}),JE=e=>(t,r)=>{let n=_je(t,e,r);return O4(n.toasterId||Eje(n.id))({type:2,toast:n}),n.id},Re=(e,t)=>JE("blank")(e,t);Re.error=JE("error");Re.success=JE("success");Re.loading=JE("loading");Re.custom=JE("custom");Re.dismiss=(e,t)=>{let r={type:3,toastId:e};t?O4(t)(r):wse(r)};Re.dismissAll=e=>Re.dismiss(void 0,e);Re.remove=(e,t)=>{let r={type:4,toastId:e};t?O4(t)(r):wse(r)};Re.removeAll=e=>Re.remove(void 0,e);Re.promise=(e,t,r)=>{let n=Re.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(i=>{let a=t.success?sT(t.success,i):void 0;return a?Re.success(a,{id:n,...r,...r==null?void 0:r.success}):Re.dismiss(n),i}).catch(i=>{let a=t.error?sT(t.error,i):void 0;a?Re.error(a,{id:n,...r,...r==null?void 0:r.error}):Re.dismiss(n)}),e};var Nje=1e3,Sse=(e,t="default")=>{let{toasts:r,pausedAt:n}=kje(e,t),i=I.useRef(new Map).current,a=I.useCallback((f,p=Nje)=>{if(i.has(f))return;let m=setTimeout(()=>{i.delete(f),s({type:4,toastId:f})},p);i.set(f,m)},[]);I.useEffect(()=>{if(n)return;let f=Date.now(),p=r.map(m=>{if(m.duration===1/0)return;let x=(m.duration||0)+m.pauseDuration-(f-m.createdAt);if(x<0){m.visible&&Re.dismiss(m.id);return}return setTimeout(()=>Re.dismiss(m.id,t),x)});return()=>{p.forEach(m=>m&&clearTimeout(m))}},[r,n,t]);let s=I.useCallback(O4(t),[t]),o=I.useCallback(()=>{s({type:5,time:Date.now()})},[s]),l=I.useCallback((f,p)=>{s({type:1,toast:{id:f,height:p}})},[s]),c=I.useCallback(()=>{n&&s({type:6,time:Date.now()})},[n,s]),d=I.useCallback((f,p)=>{let{reverseOrder:m=!1,gutter:x=8,defaultPosition:y}=p||{},b=r.filter(C=>(C.position||y)===(f.position||y)&&C.height),S=b.findIndex(C=>C.id===f.id),_=b.filter((C,A)=>A<S&&C.visible).length;return b.filter(C=>C.visible).slice(...m?[_+1]:[0,_]).reduce((C,A)=>C+(A.height||0)+x,0)},[r]);return I.useEffect(()=>{r.forEach(f=>{if(f.dismissed)a(f.id,f.removeDelay);else{let p=i.get(f.id);p&&(clearTimeout(p),i.delete(f.id))}})},[r,a]),{toasts:r,handlers:{updateHeight:l,startPause:o,endPause:c,calculateOffset:d}}},Aje=$h`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Tje=$h`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ije=$h`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Oje=nm("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Aje} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Tje} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Ije} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Pje=$h`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Rje=nm("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Pje} 1s linear infinite;
`,jje=$h`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Dje=$h`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Mje=nm("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${jje} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Dje} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Fje=nm("div")`
  position: absolute;
`,Lje=nm("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Bje=$h`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Uje=nm("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Bje} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,$je=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?I.createElement(Uje,null,t):t:r==="blank"?null:I.createElement(Lje,null,I.createElement(Rje,{...n}),r!=="loading"&&I.createElement(Fje,null,r==="error"?I.createElement(Oje,{...n}):I.createElement(Mje,{...n})))},zje=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Hje=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,Wje="0%{opacity:0;} 100%{opacity:1;}",Vje="0%{opacity:1;} 100%{opacity:0;}",qje=nm("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Gje=nm("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Kje=(e,t)=>{let r=e.includes("top")?1:-1,[n,i]=xse()?[Wje,Vje]:[zje(r),Hje(r)];return{animation:t?`${$h(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${$h(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Xje=I.memo(({toast:e,position:t,style:r,children:n})=>{let i=e.height?Kje(e.position||t||"top-center",e.visible):{opacity:0},a=I.createElement($je,{toast:e}),s=I.createElement(Gje,{...e.ariaProps},sT(e.message,e));return I.createElement(qje,{className:e.className,style:{...i,...r,...e.style}},typeof n=="function"?n({icon:a,message:s}):I.createElement(I.Fragment,null,a,s))});yje(I.createElement);var Yje=({id:e,className:t,style:r,onHeightUpdate:n,children:i})=>{let a=I.useCallback(s=>{if(s){let o=()=>{let l=s.getBoundingClientRect().height;n(e,l)};o(),new MutationObserver(o).observe(s,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return I.createElement("div",{ref:a,className:t,style:r},i)},Qje=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:xse()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...i}},Jje=I4`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,N_=16,Zje=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:i,toasterId:a,containerStyle:s,containerClassName:o})=>{let{toasts:l,handlers:c}=Sse(r,a);return I.createElement("div",{"data-rht-toaster":a||"",style:{position:"fixed",zIndex:9999,top:N_,left:N_,right:N_,bottom:N_,pointerEvents:"none",...s},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(d=>{let f=d.position||t,p=c.calculateOffset(d,{reverseOrder:e,gutter:n,defaultPosition:t}),m=Qje(f,p);return I.createElement(Yje,{id:d.id,key:d.id,onHeightUpdate:c.updateHeight,className:d.visible?Jje:"",style:m},d.type==="custom"?sT(d.message,d):i?i(d):I.createElement(Xje,{toast:d,position:f}))}))},Kr=Re,vb=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},eDe={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},i0,W5,gte,tDe=(gte=class{constructor(){hr(this,i0,eDe);hr(this,W5,!1)}setTimeoutProvider(e){Wt(this,i0,e)}setTimeout(e,t){return Le(this,i0).setTimeout(e,t)}clearTimeout(e){Le(this,i0).clearTimeout(e)}setInterval(e,t){return Le(this,i0).setInterval(e,t)}clearInterval(e){Le(this,i0).clearInterval(e)}},i0=new WeakMap,W5=new WeakMap,gte),ug=new tDe;function rDe(e){setTimeout(e,0)}var ax=typeof window>"u"||"Deno"in globalThis;function Bo(){}function nDe(e,t){return typeof e=="function"?e(t):e}function e8(e){return typeof e=="number"&&e>=0&&e!==1/0}function Ese(e,t){return Math.max(e+(t||0)-Date.now(),0)}function T0(e,t){return typeof e=="function"?e(t):e}function Kc(e,t){return typeof e=="function"?e(t):e}function Pq(e,t){const{type:r="all",exact:n,fetchStatus:i,predicate:a,queryKey:s,stale:o}=e;if(s){if(n){if(t.queryHash!==B7(s,t.options))return!1}else if(!ES(t.queryKey,s))return!1}if(r!=="all"){const l=t.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||i&&i!==t.state.fetchStatus||a&&!a(t))}function Rq(e,t){const{exact:r,status:n,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(r){if(sx(t.options.mutationKey)!==sx(a))return!1}else if(!ES(t.options.mutationKey,a))return!1}return!(n&&t.state.status!==n||i&&!i(t))}function B7(e,t){return((t==null?void 0:t.queryKeyHashFn)||sx)(e)}function sx(e){return JSON.stringify(e,(t,r)=>t8(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function ES(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>ES(e[r],t[r])):!1}var iDe=Object.prototype.hasOwnProperty;function Cse(e,t){if(e===t)return e;const r=jq(e)&&jq(t);if(!r&&!(t8(e)&&t8(t)))return t;const i=(r?e:Object.keys(e)).length,a=r?t:Object.keys(t),s=a.length,o=r?new Array(s):{};let l=0;for(let c=0;c<s;c++){const d=r?c:a[c],f=e[d],p=t[d];if(f===p){o[d]=f,(r?c<i:iDe.call(e,d))&&l++;continue}if(f===null||p===null||typeof f!="object"||typeof p!="object"){o[d]=p;continue}const m=Cse(f,p);o[d]=m,m===f&&l++}return i===s&&l===i?e:o}function oT(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function jq(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function t8(e){if(!Dq(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Dq(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Dq(e){return Object.prototype.toString.call(e)==="[object Object]"}function aDe(e){return new Promise(t=>{ug.setTimeout(t,e)})}function r8(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Cse(e,t):t}function sDe(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function oDe(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var U7=Symbol();function kse(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===U7?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function _se(e,t){return typeof e=="function"?e(...t):!!e}var Sg,a0,Gv,xte,lDe=(xte=class extends vb{constructor(){super();hr(this,Sg);hr(this,a0);hr(this,Gv);Wt(this,Gv,t=>{if(!ax&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Le(this,a0)||this.setEventListener(Le(this,Gv))}onUnsubscribe(){var t;this.hasListeners()||((t=Le(this,a0))==null||t.call(this),Wt(this,a0,void 0))}setEventListener(t){var r;Wt(this,Gv,t),(r=Le(this,a0))==null||r.call(this),Wt(this,a0,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){Le(this,Sg)!==t&&(Wt(this,Sg,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Le(this,Sg)=="boolean"?Le(this,Sg):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Sg=new WeakMap,a0=new WeakMap,Gv=new WeakMap,xte),$7=new lDe;function n8(){let e,t;const r=new Promise((i,a)=>{e=i,t=a});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),e(i)},r.reject=i=>{n({status:"rejected",reason:i}),t(i)},r}var cDe=rDe;function uDe(){let e=[],t=0,r=o=>{o()},n=o=>{o()},i=cDe;const a=o=>{t?e.push(o):i(()=>{r(o)})},s=()=>{const o=e;e=[],o.length&&i(()=>{n(()=>{o.forEach(l=>{r(l)})})})};return{batch:o=>{let l;t++;try{l=o()}finally{t--,t||s()}return l},batchCalls:o=>(...l)=>{a(()=>{o(...l)})},schedule:a,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{i=o}}}var Ka=uDe(),Kv,s0,Xv,vte,dDe=(vte=class extends vb{constructor(){super();hr(this,Kv,!0);hr(this,s0);hr(this,Xv);Wt(this,Xv,t=>{if(!ax&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){Le(this,s0)||this.setEventListener(Le(this,Xv))}onUnsubscribe(){var t;this.hasListeners()||((t=Le(this,s0))==null||t.call(this),Wt(this,s0,void 0))}setEventListener(t){var r;Wt(this,Xv,t),(r=Le(this,s0))==null||r.call(this),Wt(this,s0,t(this.setOnline.bind(this)))}setOnline(t){Le(this,Kv)!==t&&(Wt(this,Kv,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return Le(this,Kv)}},Kv=new WeakMap,s0=new WeakMap,Xv=new WeakMap,vte),lT=new dDe;function fDe(e){return Math.min(1e3*2**e,3e4)}function Nse(e){return(e??"online")==="online"?lT.isOnline():!0}var i8=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Ase(e){let t=!1,r=0,n;const i=n8(),a=()=>i.status!=="pending",s=y=>{var b;if(!a()){const S=new i8(y);p(S),(b=e.onCancel)==null||b.call(e,S)}},o=()=>{t=!0},l=()=>{t=!1},c=()=>$7.isFocused()&&(e.networkMode==="always"||lT.isOnline())&&e.canRun(),d=()=>Nse(e.networkMode)&&e.canRun(),f=y=>{a()||(n==null||n(),i.resolve(y))},p=y=>{a()||(n==null||n(),i.reject(y))},m=()=>new Promise(y=>{var b;n=S=>{(a()||c())&&y(S)},(b=e.onPause)==null||b.call(e)}).then(()=>{var y;n=void 0,a()||(y=e.onContinue)==null||y.call(e)}),x=()=>{if(a())return;let y;const b=r===0?e.initialPromise:void 0;try{y=b??e.fn()}catch(S){y=Promise.reject(S)}Promise.resolve(y).then(f).catch(S=>{var P;if(a())return;const _=e.retry??(ax?0:3),C=e.retryDelay??fDe,A=typeof C=="function"?C(r,S):C,j=_===!0||typeof _=="number"&&r<_||typeof _=="function"&&_(r,S);if(t||!j){p(S);return}r++,(P=e.onFail)==null||P.call(e,r,S),aDe(A).then(()=>c()?void 0:m()).then(()=>{t?p(S):x()})})};return{promise:i,status:()=>i.status,cancel:s,continue:()=>(n==null||n(),i),cancelRetry:o,continueRetry:l,canStart:d,start:()=>(d()?x():m().then(x),i)}}var Eg,yte,Tse=(yte=class{constructor(){hr(this,Eg)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),e8(this.gcTime)&&Wt(this,Eg,ug.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ax?1/0:5*60*1e3))}clearGcTimeout(){Le(this,Eg)&&(ug.clearTimeout(Le(this,Eg)),Wt(this,Eg,void 0))}},Eg=new WeakMap,yte),Cg,Yv,Vc,kg,ds,bE,_g,Hu,th,bte,hDe=(bte=class extends Tse{constructor(t){super();hr(this,Hu);hr(this,Cg);hr(this,Yv);hr(this,Vc);hr(this,kg);hr(this,ds);hr(this,bE);hr(this,_g);Wt(this,_g,!1),Wt(this,bE,t.defaultOptions),this.setOptions(t.options),this.observers=[],Wt(this,kg,t.client),Wt(this,Vc,Le(this,kg).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Wt(this,Cg,Fq(this.options)),this.state=t.state??Le(this,Cg),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Le(this,ds))==null?void 0:t.promise}setOptions(t){if(this.options={...Le(this,bE),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=Fq(this.options);r.data!==void 0&&(this.setState(Mq(r.data,r.dataUpdatedAt)),Wt(this,Cg,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Le(this,Vc).remove(this)}setData(t,r){const n=r8(this.state.data,t,this.options);return un(this,Hu,th).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){un(this,Hu,th).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,i;const r=(n=Le(this,ds))==null?void 0:n.promise;return(i=Le(this,ds))==null||i.cancel(t),r?r.then(Bo).catch(Bo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Le(this,Cg))}isActive(){return this.observers.some(t=>Kc(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===U7||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>T0(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Ese(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Le(this,ds))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Le(this,ds))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Le(this,Vc).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Le(this,ds)&&(Le(this,_g)?Le(this,ds).cancel({revert:!0}):Le(this,ds).cancelRetry()),this.scheduleGc()),Le(this,Vc).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||un(this,Hu,th).call(this,{type:"invalidate"})}async fetch(t,r){var l,c,d,f,p,m,x,y,b,S,_,C;if(this.state.fetchStatus!=="idle"&&((l=Le(this,ds))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Le(this,ds))return Le(this,ds).continueRetry(),Le(this,ds).promise}if(t&&this.setOptions(t),!this.options.queryFn){const A=this.observers.find(j=>j.options.queryFn);A&&this.setOptions(A.options)}const n=new AbortController,i=A=>{Object.defineProperty(A,"signal",{enumerable:!0,get:()=>(Wt(this,_g,!0),n.signal)})},a=()=>{const A=kse(this.options,r),P=(()=>{const O={client:Le(this,kg),queryKey:this.queryKey,meta:this.meta};return i(O),O})();return Wt(this,_g,!1),this.options.persister?this.options.persister(A,P,this):A(P)},o=(()=>{const A={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Le(this,kg),state:this.state,fetchFn:a};return i(A),A})();(c=this.options.behavior)==null||c.onFetch(o,this),Wt(this,Yv,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&un(this,Hu,th).call(this,{type:"fetch",meta:(f=o.fetchOptions)==null?void 0:f.meta}),Wt(this,ds,Ase({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,onCancel:A=>{A instanceof i8&&A.revert&&this.setState({...Le(this,Yv),fetchStatus:"idle"}),n.abort()},onFail:(A,j)=>{un(this,Hu,th).call(this,{type:"failed",failureCount:A,error:j})},onPause:()=>{un(this,Hu,th).call(this,{type:"pause"})},onContinue:()=>{un(this,Hu,th).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const A=await Le(this,ds).start();if(A===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(A),(m=(p=Le(this,Vc).config).onSuccess)==null||m.call(p,A,this),(y=(x=Le(this,Vc).config).onSettled)==null||y.call(x,A,this.state.error,this),A}catch(A){if(A instanceof i8){if(A.silent)return Le(this,ds).promise;if(A.revert){if(this.state.data===void 0)throw A;return this.state.data}}throw un(this,Hu,th).call(this,{type:"error",error:A}),(S=(b=Le(this,Vc).config).onError)==null||S.call(b,A,this),(C=(_=Le(this,Vc).config).onSettled)==null||C.call(_,this.state.data,A,this),A}finally{this.scheduleGc()}}},Cg=new WeakMap,Yv=new WeakMap,Vc=new WeakMap,kg=new WeakMap,ds=new WeakMap,bE=new WeakMap,_g=new WeakMap,Hu=new WeakSet,th=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Ise(n.data,this.options),fetchMeta:t.meta??null};case"success":const i={...n,...Mq(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Wt(this,Yv,t.manual?i:void 0),i;case"error":const a=t.error;return{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Ka.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),Le(this,Vc).notify({query:this,type:"updated",action:t})})},bte);function Ise(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Nse(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Mq(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Fq(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var dl,Pn,wE,Mo,Ng,Qv,lh,o0,SE,Jv,Zv,Ag,Tg,l0,ey,Jn,r2,a8,s8,o8,l8,c8,u8,d8,Ose,wte,pDe=(wte=class extends vb{constructor(t,r){super();hr(this,Jn);hr(this,dl);hr(this,Pn);hr(this,wE);hr(this,Mo);hr(this,Ng);hr(this,Qv);hr(this,lh);hr(this,o0);hr(this,SE);hr(this,Jv);hr(this,Zv);hr(this,Ag);hr(this,Tg);hr(this,l0);hr(this,ey,new Set);this.options=r,Wt(this,dl,t),Wt(this,o0,null),Wt(this,lh,n8()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Le(this,Pn).addObserver(this),Lq(Le(this,Pn),this.options)?un(this,Jn,r2).call(this):this.updateResult(),un(this,Jn,l8).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return f8(Le(this,Pn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return f8(Le(this,Pn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,un(this,Jn,c8).call(this),un(this,Jn,u8).call(this),Le(this,Pn).removeObserver(this)}setOptions(t){const r=this.options,n=Le(this,Pn);if(this.options=Le(this,dl).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Kc(this.options.enabled,Le(this,Pn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");un(this,Jn,d8).call(this),Le(this,Pn).setOptions(this.options),r._defaulted&&!oT(this.options,r)&&Le(this,dl).getQueryCache().notify({type:"observerOptionsUpdated",query:Le(this,Pn),observer:this});const i=this.hasListeners();i&&Bq(Le(this,Pn),n,this.options,r)&&un(this,Jn,r2).call(this),this.updateResult(),i&&(Le(this,Pn)!==n||Kc(this.options.enabled,Le(this,Pn))!==Kc(r.enabled,Le(this,Pn))||T0(this.options.staleTime,Le(this,Pn))!==T0(r.staleTime,Le(this,Pn)))&&un(this,Jn,a8).call(this);const a=un(this,Jn,s8).call(this);i&&(Le(this,Pn)!==n||Kc(this.options.enabled,Le(this,Pn))!==Kc(r.enabled,Le(this,Pn))||a!==Le(this,l0))&&un(this,Jn,o8).call(this,a)}getOptimisticResult(t){const r=Le(this,dl).getQueryCache().build(Le(this,dl),t),n=this.createResult(r,t);return gDe(this,n)&&(Wt(this,Mo,n),Wt(this,Qv,this.options),Wt(this,Ng,Le(this,Pn).state)),n}getCurrentResult(){return Le(this,Mo)}trackResult(t,r){return new Proxy(t,{get:(n,i)=>(this.trackProp(i),r==null||r(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&Le(this,lh).status==="pending"&&Le(this,lh).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(t){Le(this,ey).add(t)}getCurrentQuery(){return Le(this,Pn)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=Le(this,dl).defaultQueryOptions(t),n=Le(this,dl).getQueryCache().build(Le(this,dl),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return un(this,Jn,r2).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),Le(this,Mo)))}createResult(t,r){var L;const n=Le(this,Pn),i=this.options,a=Le(this,Mo),s=Le(this,Ng),o=Le(this,Qv),c=t!==n?t.state:Le(this,wE),{state:d}=t;let f={...d},p=!1,m;if(r._optimisticResults){const B=this.hasListeners(),H=!B&&Lq(t,r),z=B&&Bq(t,n,r,i);(H||z)&&(f={...f,...Ise(d.data,t.options)}),r._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:x,errorUpdatedAt:y,status:b}=f;m=f.data;let S=!1;if(r.placeholderData!==void 0&&m===void 0&&b==="pending"){let B;a!=null&&a.isPlaceholderData&&r.placeholderData===(o==null?void 0:o.placeholderData)?(B=a.data,S=!0):B=typeof r.placeholderData=="function"?r.placeholderData((L=Le(this,Zv))==null?void 0:L.state.data,Le(this,Zv)):r.placeholderData,B!==void 0&&(b="success",m=r8(a==null?void 0:a.data,B,r),p=!0)}if(r.select&&m!==void 0&&!S)if(a&&m===(s==null?void 0:s.data)&&r.select===Le(this,SE))m=Le(this,Jv);else try{Wt(this,SE,r.select),m=r.select(m),m=r8(a==null?void 0:a.data,m,r),Wt(this,Jv,m),Wt(this,o0,null)}catch(B){Wt(this,o0,B)}Le(this,o0)&&(x=Le(this,o0),m=Le(this,Jv),y=Date.now(),b="error");const _=f.fetchStatus==="fetching",C=b==="pending",A=b==="error",j=C&&_,P=m!==void 0,D={status:b,fetchStatus:f.fetchStatus,isPending:C,isSuccess:b==="success",isError:A,isInitialLoading:j,isLoading:j,data:m,dataUpdatedAt:f.dataUpdatedAt,error:x,errorUpdatedAt:y,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>c.dataUpdateCount||f.errorUpdateCount>c.errorUpdateCount,isFetching:_,isRefetching:_&&!C,isLoadingError:A&&!P,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:A&&P,isStale:z7(t,r),refetch:this.refetch,promise:Le(this,lh),isEnabled:Kc(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const B=ie=>{D.status==="error"?ie.reject(D.error):D.data!==void 0&&ie.resolve(D.data)},H=()=>{const ie=Wt(this,lh,D.promise=n8());B(ie)},z=Le(this,lh);switch(z.status){case"pending":t.queryHash===n.queryHash&&B(z);break;case"fulfilled":(D.status==="error"||D.data!==z.value)&&H();break;case"rejected":(D.status!=="error"||D.error!==z.reason)&&H();break}}return D}updateResult(){const t=Le(this,Mo),r=this.createResult(Le(this,Pn),this.options);if(Wt(this,Ng,Le(this,Pn).state),Wt(this,Qv,this.options),Le(this,Ng).data!==void 0&&Wt(this,Zv,Le(this,Pn)),oT(r,t))return;Wt(this,Mo,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!Le(this,ey).size)return!0;const s=new Set(a??Le(this,ey));return this.options.throwOnError&&s.add("error"),Object.keys(Le(this,Mo)).some(o=>{const l=o;return Le(this,Mo)[l]!==t[l]&&s.has(l)})};un(this,Jn,Ose).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&un(this,Jn,l8).call(this)}},dl=new WeakMap,Pn=new WeakMap,wE=new WeakMap,Mo=new WeakMap,Ng=new WeakMap,Qv=new WeakMap,lh=new WeakMap,o0=new WeakMap,SE=new WeakMap,Jv=new WeakMap,Zv=new WeakMap,Ag=new WeakMap,Tg=new WeakMap,l0=new WeakMap,ey=new WeakMap,Jn=new WeakSet,r2=function(t){un(this,Jn,d8).call(this);let r=Le(this,Pn).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Bo)),r},a8=function(){un(this,Jn,c8).call(this);const t=T0(this.options.staleTime,Le(this,Pn));if(ax||Le(this,Mo).isStale||!e8(t))return;const n=Ese(Le(this,Mo).dataUpdatedAt,t)+1;Wt(this,Ag,ug.setTimeout(()=>{Le(this,Mo).isStale||this.updateResult()},n))},s8=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Le(this,Pn)):this.options.refetchInterval)??!1},o8=function(t){un(this,Jn,u8).call(this),Wt(this,l0,t),!(ax||Kc(this.options.enabled,Le(this,Pn))===!1||!e8(Le(this,l0))||Le(this,l0)===0)&&Wt(this,Tg,ug.setInterval(()=>{(this.options.refetchIntervalInBackground||$7.isFocused())&&un(this,Jn,r2).call(this)},Le(this,l0)))},l8=function(){un(this,Jn,a8).call(this),un(this,Jn,o8).call(this,un(this,Jn,s8).call(this))},c8=function(){Le(this,Ag)&&(ug.clearTimeout(Le(this,Ag)),Wt(this,Ag,void 0))},u8=function(){Le(this,Tg)&&(ug.clearInterval(Le(this,Tg)),Wt(this,Tg,void 0))},d8=function(){const t=Le(this,dl).getQueryCache().build(Le(this,dl),this.options);if(t===Le(this,Pn))return;const r=Le(this,Pn);Wt(this,Pn,t),Wt(this,wE,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Ose=function(t){Ka.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(Le(this,Mo))}),Le(this,dl).getQueryCache().notify({query:Le(this,Pn),type:"observerResultsUpdated"})})},wte);function mDe(e,t){return Kc(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Lq(e,t){return mDe(e,t)||e.state.data!==void 0&&f8(e,t,t.refetchOnMount)}function f8(e,t,r){if(Kc(t.enabled,e)!==!1&&T0(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&z7(e,t)}return!1}function Bq(e,t,r,n){return(e!==t||Kc(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&z7(e,r)}function z7(e,t){return Kc(t.enabled,e)!==!1&&e.isStaleByTime(T0(t.staleTime,e))}function gDe(e,t){return!oT(e.getCurrentResult(),t)}function Uq(e){return{onFetch:(t,r)=>{var d,f,p,m,x;const n=t.options,i=(p=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,a=((m=t.state.data)==null?void 0:m.pages)||[],s=((x=t.state.data)==null?void 0:x.pageParams)||[];let o={pages:[],pageParams:[]},l=0;const c=async()=>{let y=!1;const b=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(t.signal.aborted?y=!0:t.signal.addEventListener("abort",()=>{y=!0}),t.signal)})},S=kse(t.options,t.fetchOptions),_=async(C,A,j)=>{if(y)return Promise.reject();if(A==null&&C.pages.length)return Promise.resolve(C);const O=(()=>{const H={client:t.client,queryKey:t.queryKey,pageParam:A,direction:j?"backward":"forward",meta:t.options.meta};return b(H),H})(),D=await S(O),{maxPages:L}=t.options,B=j?oDe:sDe;return{pages:B(C.pages,D,L),pageParams:B(C.pageParams,A,L)}};if(i&&a.length){const C=i==="backward",A=C?xDe:$q,j={pages:a,pageParams:s},P=A(n,j);o=await _(j,P,C)}else{const C=e??a.length;do{const A=l===0?s[0]??n.initialPageParam:$q(n,o);if(l>0&&A==null)break;o=await _(o,A),l++}while(l<C)}return o};t.options.persister?t.fetchFn=()=>{var y,b;return(b=(y=t.options).persister)==null?void 0:b.call(y,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=c}}}function $q(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function xDe(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var EE,zd,Fo,Ig,Hd,$p,Ste,vDe=(Ste=class extends Tse{constructor(t){super();hr(this,Hd);hr(this,EE);hr(this,zd);hr(this,Fo);hr(this,Ig);Wt(this,EE,t.client),this.mutationId=t.mutationId,Wt(this,Fo,t.mutationCache),Wt(this,zd,[]),this.state=t.state||Pse(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Le(this,zd).includes(t)||(Le(this,zd).push(t),this.clearGcTimeout(),Le(this,Fo).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Wt(this,zd,Le(this,zd).filter(r=>r!==t)),this.scheduleGc(),Le(this,Fo).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Le(this,zd).length||(this.state.status==="pending"?this.scheduleGc():Le(this,Fo).remove(this))}continue(){var t;return((t=Le(this,Ig))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,o,l,c,d,f,p,m,x,y,b,S,_,C,A,j,P,O,D,L;const r=()=>{un(this,Hd,$p).call(this,{type:"continue"})},n={client:Le(this,EE),meta:this.options.meta,mutationKey:this.options.mutationKey};Wt(this,Ig,Ase({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(B,H)=>{un(this,Hd,$p).call(this,{type:"failed",failureCount:B,error:H})},onPause:()=>{un(this,Hd,$p).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Le(this,Fo).canRun(this)}));const i=this.state.status==="pending",a=!Le(this,Ig).canStart();try{if(i)r();else{un(this,Hd,$p).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(s=Le(this,Fo).config).onMutate)==null?void 0:o.call(s,t,this,n));const H=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t,n));H!==this.state.context&&un(this,Hd,$p).call(this,{type:"pending",context:H,variables:t,isPaused:a})}const B=await Le(this,Ig).start();return await((f=(d=Le(this,Fo).config).onSuccess)==null?void 0:f.call(d,B,t,this.state.context,this,n)),await((m=(p=this.options).onSuccess)==null?void 0:m.call(p,B,t,this.state.context,n)),await((y=(x=Le(this,Fo).config).onSettled)==null?void 0:y.call(x,B,null,this.state.variables,this.state.context,this,n)),await((S=(b=this.options).onSettled)==null?void 0:S.call(b,B,null,t,this.state.context,n)),un(this,Hd,$p).call(this,{type:"success",data:B}),B}catch(B){try{throw await((C=(_=Le(this,Fo).config).onError)==null?void 0:C.call(_,B,t,this.state.context,this,n)),await((j=(A=this.options).onError)==null?void 0:j.call(A,B,t,this.state.context,n)),await((O=(P=Le(this,Fo).config).onSettled)==null?void 0:O.call(P,void 0,B,this.state.variables,this.state.context,this,n)),await((L=(D=this.options).onSettled)==null?void 0:L.call(D,void 0,B,t,this.state.context,n)),B}finally{un(this,Hd,$p).call(this,{type:"error",error:B})}}finally{Le(this,Fo).runNext(this)}}},EE=new WeakMap,zd=new WeakMap,Fo=new WeakMap,Ig=new WeakMap,Hd=new WeakSet,$p=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Ka.batch(()=>{Le(this,zd).forEach(n=>{n.onMutationUpdate(t)}),Le(this,Fo).notify({mutation:this,type:"updated",action:t})})},Ste);function Pse(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ch,Wu,CE,Ete,yDe=(Ete=class extends vb{constructor(t={}){super();hr(this,ch);hr(this,Wu);hr(this,CE);this.config=t,Wt(this,ch,new Set),Wt(this,Wu,new Map),Wt(this,CE,0)}build(t,r,n){const i=new vDe({client:t,mutationCache:this,mutationId:++Xk(this,CE)._,options:t.defaultMutationOptions(r),state:n});return this.add(i),i}add(t){Le(this,ch).add(t);const r=A_(t);if(typeof r=="string"){const n=Le(this,Wu).get(r);n?n.push(t):Le(this,Wu).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Le(this,ch).delete(t)){const r=A_(t);if(typeof r=="string"){const n=Le(this,Wu).get(r);if(n)if(n.length>1){const i=n.indexOf(t);i!==-1&&n.splice(i,1)}else n[0]===t&&Le(this,Wu).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=A_(t);if(typeof r=="string"){const n=Le(this,Wu).get(r),i=n==null?void 0:n.find(a=>a.state.status==="pending");return!i||i===t}else return!0}runNext(t){var n;const r=A_(t);if(typeof r=="string"){const i=(n=Le(this,Wu).get(r))==null?void 0:n.find(a=>a!==t&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ka.batch(()=>{Le(this,ch).forEach(t=>{this.notify({type:"removed",mutation:t})}),Le(this,ch).clear(),Le(this,Wu).clear()})}getAll(){return Array.from(Le(this,ch))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Rq(r,n))}findAll(t={}){return this.getAll().filter(r=>Rq(t,r))}notify(t){Ka.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Ka.batch(()=>Promise.all(t.map(r=>r.continue().catch(Bo))))}},ch=new WeakMap,Wu=new WeakMap,CE=new WeakMap,Ete);function A_(e){var t;return(t=e.options.scope)==null?void 0:t.id}var uh,c0,fl,dh,Dh,YN,h8,Cte,bDe=(Cte=class extends vb{constructor(r,n){super();hr(this,Dh);hr(this,uh);hr(this,c0);hr(this,fl);hr(this,dh);Wt(this,uh,r),this.setOptions(n),this.bindMethods(),un(this,Dh,YN).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var i;const n=this.options;this.options=Le(this,uh).defaultMutationOptions(r),oT(this.options,n)||Le(this,uh).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Le(this,fl),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&sx(n.mutationKey)!==sx(this.options.mutationKey)?this.reset():((i=Le(this,fl))==null?void 0:i.state.status)==="pending"&&Le(this,fl).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=Le(this,fl))==null||r.removeObserver(this)}onMutationUpdate(r){un(this,Dh,YN).call(this),un(this,Dh,h8).call(this,r)}getCurrentResult(){return Le(this,c0)}reset(){var r;(r=Le(this,fl))==null||r.removeObserver(this),Wt(this,fl,void 0),un(this,Dh,YN).call(this),un(this,Dh,h8).call(this)}mutate(r,n){var i;return Wt(this,dh,n),(i=Le(this,fl))==null||i.removeObserver(this),Wt(this,fl,Le(this,uh).getMutationCache().build(Le(this,uh),this.options)),Le(this,fl).addObserver(this),Le(this,fl).execute(r)}},uh=new WeakMap,c0=new WeakMap,fl=new WeakMap,dh=new WeakMap,Dh=new WeakSet,YN=function(){var n;const r=((n=Le(this,fl))==null?void 0:n.state)??Pse();Wt(this,c0,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},h8=function(r){Ka.batch(()=>{var n,i,a,s,o,l,c,d;if(Le(this,dh)&&this.hasListeners()){const f=Le(this,c0).variables,p=Le(this,c0).context,m={client:Le(this,uh),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((i=(n=Le(this,dh)).onSuccess)==null||i.call(n,r.data,f,p,m),(s=(a=Le(this,dh)).onSettled)==null||s.call(a,r.data,null,f,p,m)):(r==null?void 0:r.type)==="error"&&((l=(o=Le(this,dh)).onError)==null||l.call(o,r.error,f,p,m),(d=(c=Le(this,dh)).onSettled)==null||d.call(c,void 0,r.error,f,p,m))}this.listeners.forEach(f=>{f(Le(this,c0))})})},Cte),Wd,kte,wDe=(kte=class extends vb{constructor(t={}){super();hr(this,Wd);this.config=t,Wt(this,Wd,new Map)}build(t,r,n){const i=r.queryKey,a=r.queryHash??B7(i,r);let s=this.get(a);return s||(s=new hDe({client:t,queryKey:i,queryHash:a,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(i)}),this.add(s)),s}add(t){Le(this,Wd).has(t.queryHash)||(Le(this,Wd).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Le(this,Wd).get(t.queryHash);r&&(t.destroy(),r===t&&Le(this,Wd).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ka.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Le(this,Wd).get(t)}getAll(){return[...Le(this,Wd).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Pq(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>Pq(t,n)):r}notify(t){Ka.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Ka.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ka.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Wd=new WeakMap,kte),na,u0,d0,ty,ry,f0,ny,iy,_te,SDe=(_te=class{constructor(e={}){hr(this,na);hr(this,u0);hr(this,d0);hr(this,ty);hr(this,ry);hr(this,f0);hr(this,ny);hr(this,iy);Wt(this,na,e.queryCache||new wDe),Wt(this,u0,e.mutationCache||new yDe),Wt(this,d0,e.defaultOptions||{}),Wt(this,ty,new Map),Wt(this,ry,new Map),Wt(this,f0,0)}mount(){Xk(this,f0)._++,Le(this,f0)===1&&(Wt(this,ny,$7.subscribe(async e=>{e&&(await this.resumePausedMutations(),Le(this,na).onFocus())})),Wt(this,iy,lT.subscribe(async e=>{e&&(await this.resumePausedMutations(),Le(this,na).onOnline())})))}unmount(){var e,t;Xk(this,f0)._--,Le(this,f0)===0&&((e=Le(this,ny))==null||e.call(this),Wt(this,ny,void 0),(t=Le(this,iy))==null||t.call(this),Wt(this,iy,void 0))}isFetching(e){return Le(this,na).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Le(this,u0).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Le(this,na).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=Le(this,na).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(T0(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return Le(this,na).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),i=Le(this,na).get(n.queryHash),a=i==null?void 0:i.state.data,s=nDe(t,a);if(s!==void 0)return Le(this,na).build(this,n).setData(s,{...r,manual:!0})}setQueriesData(e,t,r){return Ka.batch(()=>Le(this,na).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Le(this,na).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Le(this,na);Ka.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Le(this,na);return Ka.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Ka.batch(()=>Le(this,na).findAll(e).map(i=>i.cancel(r)));return Promise.all(n).then(Bo).catch(Bo)}invalidateQueries(e,t={}){return Ka.batch(()=>(Le(this,na).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Ka.batch(()=>Le(this,na).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,r);return r.throwOnError||(a=a.catch(Bo)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(Bo)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Le(this,na).build(this,t);return r.isStaleByTime(T0(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Bo).catch(Bo)}fetchInfiniteQuery(e){return e.behavior=Uq(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Bo).catch(Bo)}ensureInfiniteQueryData(e){return e.behavior=Uq(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return lT.isOnline()?Le(this,u0).resumePausedMutations():Promise.resolve()}getQueryCache(){return Le(this,na)}getMutationCache(){return Le(this,u0)}getDefaultOptions(){return Le(this,d0)}setDefaultOptions(e){Wt(this,d0,e)}setQueryDefaults(e,t){Le(this,ty).set(sx(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Le(this,ty).values()],r={};return t.forEach(n=>{ES(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){Le(this,ry).set(sx(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Le(this,ry).values()],r={};return t.forEach(n=>{ES(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Le(this,d0).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=B7(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===U7&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Le(this,d0).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Le(this,na).clear(),Le(this,u0).clear()}},na=new WeakMap,u0=new WeakMap,d0=new WeakMap,ty=new WeakMap,ry=new WeakMap,f0=new WeakMap,ny=new WeakMap,iy=new WeakMap,_te),Rse=I.createContext(void 0),$a=e=>{const t=I.useContext(Rse);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},EDe=({client:e,children:t})=>(I.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),u.jsx(Rse.Provider,{value:e,children:t})),jse=I.createContext(!1),CDe=()=>I.useContext(jse);jse.Provider;function kDe(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var _De=I.createContext(kDe()),NDe=()=>I.useContext(_De),ADe=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},TDe=e=>{I.useEffect(()=>{e.clearReset()},[e])},IDe=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(i&&e.data===void 0||_se(r,[e.error,n])),ODe=e=>{if(e.suspense){const r=i=>i==="static"?i:Math.max(i??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...i)=>r(n(...i)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},PDe=(e,t)=>e.isLoading&&e.isFetching&&!t,RDe=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,zq=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function jDe(e,t,r){var f,p,m,x,y;const n=CDe(),i=NDe(),a=$a(),s=a.defaultQueryOptions(e);(p=(f=a.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,s),s._optimisticResults=n?"isRestoring":"optimistic",ODe(s),ADe(s,i),TDe(i);const o=!a.getQueryCache().get(s.queryHash),[l]=I.useState(()=>new t(a,s)),c=l.getOptimisticResult(s),d=!n&&e.subscribed!==!1;if(I.useSyncExternalStore(I.useCallback(b=>{const S=d?l.subscribe(Ka.batchCalls(b)):Bo;return l.updateResult(),S},[l,d]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),I.useEffect(()=>{l.setOptions(s)},[s,l]),RDe(s,c))throw zq(s,l,i);if(IDe({result:c,errorResetBoundary:i,throwOnError:s.throwOnError,query:a.getQueryCache().get(s.queryHash),suspense:s.suspense}))throw c.error;if((x=(m=a.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||x.call(m,s,c),s.experimental_prefetchInRender&&!ax&&PDe(c,n)){const b=o?zq(s,l,i):(y=a.getQueryCache().get(s.queryHash))==null?void 0:y.promise;b==null||b.catch(Bo).finally(()=>{l.updateResult()})}return s.notifyOnChangeProps?c:l.trackResult(c)}function qs(e,t){return jDe(e,pDe)}function Ir(e,t){const r=$a(),[n]=I.useState(()=>new bDe(r,e));I.useEffect(()=>{n.setOptions(e)},[n,e]);const i=I.useSyncExternalStore(I.useCallback(s=>n.subscribe(Ka.batchCalls(s)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),a=I.useCallback((s,o)=>{n.mutate(s,o).catch(Bo)},[n]);if(i.error&&_se(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}function Dse(e,t){return function(){return e.apply(t,arguments)}}const{toString:DDe}=Object.prototype,{getPrototypeOf:H7}=Object,{iterator:P4,toStringTag:Mse}=Symbol,R4=(e=>t=>{const r=DDe.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),wd=e=>(e=e.toLowerCase(),t=>R4(t)===e),j4=e=>t=>typeof t===e,{isArray:yb}=Array,vy=j4("undefined");function ZE(e){return e!==null&&!vy(e)&&e.constructor!==null&&!vy(e.constructor)&&_l(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Fse=wd("ArrayBuffer");function MDe(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Fse(e.buffer),t}const FDe=j4("string"),_l=j4("function"),Lse=j4("number"),eC=e=>e!==null&&typeof e=="object",LDe=e=>e===!0||e===!1,QN=e=>{if(R4(e)!=="object")return!1;const t=H7(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Mse in e)&&!(P4 in e)},BDe=e=>{if(!eC(e)||ZE(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},UDe=wd("Date"),$De=wd("File"),zDe=wd("Blob"),HDe=wd("FileList"),WDe=e=>eC(e)&&_l(e.pipe),VDe=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||_l(e.append)&&((t=R4(e))==="formdata"||t==="object"&&_l(e.toString)&&e.toString()==="[object FormData]"))},qDe=wd("URLSearchParams"),[GDe,KDe,XDe,YDe]=["ReadableStream","Request","Response","Headers"].map(wd),QDe=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tC(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),yb(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{if(ZE(e))return;const a=r?Object.getOwnPropertyNames(e):Object.keys(e),s=a.length;let o;for(n=0;n<s;n++)o=a[n],t.call(null,e[o],o,e)}}function Bse(e,t){if(ZE(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,i;for(;n-- >0;)if(i=r[n],t===i.toLowerCase())return i;return null}const dg=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Use=e=>!vy(e)&&e!==dg;function p8(){const{caseless:e,skipUndefined:t}=Use(this)&&this||{},r={},n=(i,a)=>{const s=e&&Bse(r,a)||a;QN(r[s])&&QN(i)?r[s]=p8(r[s],i):QN(i)?r[s]=p8({},i):yb(i)?r[s]=i.slice():(!t||!vy(i))&&(r[s]=i)};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&tC(arguments[i],n);return r}const JDe=(e,t,r,{allOwnKeys:n}={})=>(tC(t,(i,a)=>{r&&_l(i)?e[a]=Dse(i,r):e[a]=i},{allOwnKeys:n}),e),ZDe=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),eMe=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},tMe=(e,t,r,n)=>{let i,a,s;const o={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)s=i[a],(!n||n(s,e,t))&&!o[s]&&(t[s]=e[s],o[s]=!0);e=r!==!1&&H7(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},rMe=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},nMe=e=>{if(!e)return null;if(yb(e))return e;let t=e.length;if(!Lse(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},iMe=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&H7(Uint8Array)),aMe=(e,t)=>{const n=(e&&e[P4]).call(e);let i;for(;(i=n.next())&&!i.done;){const a=i.value;t.call(e,a[0],a[1])}},sMe=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},oMe=wd("HTMLFormElement"),lMe=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),Hq=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),cMe=wd("RegExp"),$se=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};tC(r,(i,a)=>{let s;(s=t(i,a,e))!==!1&&(n[a]=s||i)}),Object.defineProperties(e,n)},uMe=e=>{$se(e,(t,r)=>{if(_l(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(_l(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},dMe=(e,t)=>{const r={},n=i=>{i.forEach(a=>{r[a]=!0})};return yb(e)?n(e):n(String(e).split(t)),r},fMe=()=>{},hMe=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function pMe(e){return!!(e&&_l(e.append)&&e[Mse]==="FormData"&&e[P4])}const mMe=e=>{const t=new Array(10),r=(n,i)=>{if(eC(n)){if(t.indexOf(n)>=0)return;if(ZE(n))return n;if(!("toJSON"in n)){t[i]=n;const a=yb(n)?[]:{};return tC(n,(s,o)=>{const l=r(s,i+1);!vy(l)&&(a[o]=l)}),t[i]=void 0,a}}return n};return r(e,0)},gMe=wd("AsyncFunction"),xMe=e=>e&&(eC(e)||_l(e))&&_l(e.then)&&_l(e.catch),zse=((e,t)=>e?setImmediate:t?((r,n)=>(dg.addEventListener("message",({source:i,data:a})=>{i===dg&&a===r&&n.length&&n.shift()()},!1),i=>{n.push(i),dg.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",_l(dg.postMessage)),vMe=typeof queueMicrotask<"u"?queueMicrotask.bind(dg):typeof process<"u"&&process.nextTick||zse,yMe=e=>e!=null&&_l(e[P4]),nt={isArray:yb,isArrayBuffer:Fse,isBuffer:ZE,isFormData:VDe,isArrayBufferView:MDe,isString:FDe,isNumber:Lse,isBoolean:LDe,isObject:eC,isPlainObject:QN,isEmptyObject:BDe,isReadableStream:GDe,isRequest:KDe,isResponse:XDe,isHeaders:YDe,isUndefined:vy,isDate:UDe,isFile:$De,isBlob:zDe,isRegExp:cMe,isFunction:_l,isStream:WDe,isURLSearchParams:qDe,isTypedArray:iMe,isFileList:HDe,forEach:tC,merge:p8,extend:JDe,trim:QDe,stripBOM:ZDe,inherits:eMe,toFlatObject:tMe,kindOf:R4,kindOfTest:wd,endsWith:rMe,toArray:nMe,forEachEntry:aMe,matchAll:sMe,isHTMLForm:oMe,hasOwnProperty:Hq,hasOwnProp:Hq,reduceDescriptors:$se,freezeMethods:uMe,toObjectSet:dMe,toCamelCase:lMe,noop:fMe,toFiniteNumber:hMe,findKey:Bse,global:dg,isContextDefined:Use,isSpecCompliantForm:pMe,toJSONObject:mMe,isAsyncFn:gMe,isThenable:xMe,setImmediate:zse,asap:vMe,isIterable:yMe};function Jr(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}nt.inherits(Jr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:nt.toJSONObject(this.config),code:this.code,status:this.status}}});const Hse=Jr.prototype,Wse={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Wse[e]={value:e}});Object.defineProperties(Jr,Wse);Object.defineProperty(Hse,"isAxiosError",{value:!0});Jr.from=(e,t,r,n,i,a)=>{const s=Object.create(Hse);nt.toFlatObject(e,s,function(d){return d!==Error.prototype},c=>c!=="isAxiosError");const o=e&&e.message?e.message:"Error",l=t==null&&e?e.code:t;return Jr.call(s,o,l,r,n,i),e&&s.cause==null&&Object.defineProperty(s,"cause",{value:e,configurable:!0}),s.name=e&&e.name||"Error",a&&Object.assign(s,a),s};const bMe=null;function m8(e){return nt.isPlainObject(e)||nt.isArray(e)}function Vse(e){return nt.endsWith(e,"[]")?e.slice(0,-2):e}function Wq(e,t,r){return e?e.concat(t).map(function(i,a){return i=Vse(i),!r&&a?"["+i+"]":i}).join(r?".":""):t}function wMe(e){return nt.isArray(e)&&!e.some(m8)}const SMe=nt.toFlatObject(nt,{},null,function(t){return/^is[A-Z]/.test(t)});function D4(e,t,r){if(!nt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=nt.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,b){return!nt.isUndefined(b[y])});const n=r.metaTokens,i=r.visitor||d,a=r.dots,s=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&nt.isSpecCompliantForm(t);if(!nt.isFunction(i))throw new TypeError("visitor must be a function");function c(x){if(x===null)return"";if(nt.isDate(x))return x.toISOString();if(nt.isBoolean(x))return x.toString();if(!l&&nt.isBlob(x))throw new Jr("Blob is not supported. Use a Buffer instead.");return nt.isArrayBuffer(x)||nt.isTypedArray(x)?l&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function d(x,y,b){let S=x;if(x&&!b&&typeof x=="object"){if(nt.endsWith(y,"{}"))y=n?y:y.slice(0,-2),x=JSON.stringify(x);else if(nt.isArray(x)&&wMe(x)||(nt.isFileList(x)||nt.endsWith(y,"[]"))&&(S=nt.toArray(x)))return y=Vse(y),S.forEach(function(C,A){!(nt.isUndefined(C)||C===null)&&t.append(s===!0?Wq([y],A,a):s===null?y:y+"[]",c(C))}),!1}return m8(x)?!0:(t.append(Wq(b,y,a),c(x)),!1)}const f=[],p=Object.assign(SMe,{defaultVisitor:d,convertValue:c,isVisitable:m8});function m(x,y){if(!nt.isUndefined(x)){if(f.indexOf(x)!==-1)throw Error("Circular reference detected in "+y.join("."));f.push(x),nt.forEach(x,function(S,_){(!(nt.isUndefined(S)||S===null)&&i.call(t,S,nt.isString(_)?_.trim():_,y,p))===!0&&m(S,y?y.concat(_):[_])}),f.pop()}}if(!nt.isObject(e))throw new TypeError("data must be an object");return m(e),t}function Vq(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function W7(e,t){this._pairs=[],e&&D4(e,this,t)}const qse=W7.prototype;qse.append=function(t,r){this._pairs.push([t,r])};qse.toString=function(t){const r=t?function(n){return t.call(this,n,Vq)}:Vq;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function EMe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Gse(e,t,r){if(!t)return e;const n=r&&r.encode||EMe;nt.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let a;if(i?a=i(t,r):a=nt.isURLSearchParams(t)?t.toString():new W7(t,r).toString(n),a){const s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class qq{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){nt.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Kse={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},CMe=typeof URLSearchParams<"u"?URLSearchParams:W7,kMe=typeof FormData<"u"?FormData:null,_Me=typeof Blob<"u"?Blob:null,NMe={isBrowser:!0,classes:{URLSearchParams:CMe,FormData:kMe,Blob:_Me},protocols:["http","https","file","blob","url","data"]},V7=typeof window<"u"&&typeof document<"u",g8=typeof navigator=="object"&&navigator||void 0,AMe=V7&&(!g8||["ReactNative","NativeScript","NS"].indexOf(g8.product)<0),TMe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",IMe=V7&&window.location.href||"http://localhost",OMe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:V7,hasStandardBrowserEnv:AMe,hasStandardBrowserWebWorkerEnv:TMe,navigator:g8,origin:IMe},Symbol.toStringTag,{value:"Module"})),mo={...OMe,...NMe};function PMe(e,t){return D4(e,new mo.classes.URLSearchParams,{visitor:function(r,n,i,a){return mo.isNode&&nt.isBuffer(r)?(this.append(n,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}function RMe(e){return nt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function jMe(e){const t={},r=Object.keys(e);let n;const i=r.length;let a;for(n=0;n<i;n++)a=r[n],t[a]=e[a];return t}function Xse(e){function t(r,n,i,a){let s=r[a++];if(s==="__proto__")return!0;const o=Number.isFinite(+s),l=a>=r.length;return s=!s&&nt.isArray(i)?i.length:s,l?(nt.hasOwnProp(i,s)?i[s]=[i[s],n]:i[s]=n,!o):((!i[s]||!nt.isObject(i[s]))&&(i[s]=[]),t(r,n,i[s],a)&&nt.isArray(i[s])&&(i[s]=jMe(i[s])),!o)}if(nt.isFormData(e)&&nt.isFunction(e.entries)){const r={};return nt.forEachEntry(e,(n,i)=>{t(RMe(n),i,r,0)}),r}return null}function DMe(e,t,r){if(nt.isString(e))try{return(t||JSON.parse)(e),nt.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const rC={transitional:Kse,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,a=nt.isObject(t);if(a&&nt.isHTMLForm(t)&&(t=new FormData(t)),nt.isFormData(t))return i?JSON.stringify(Xse(t)):t;if(nt.isArrayBuffer(t)||nt.isBuffer(t)||nt.isStream(t)||nt.isFile(t)||nt.isBlob(t)||nt.isReadableStream(t))return t;if(nt.isArrayBufferView(t))return t.buffer;if(nt.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return PMe(t,this.formSerializer).toString();if((o=nt.isFileList(t))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return D4(o?{"files[]":t}:t,l&&new l,this.formSerializer)}}return a||i?(r.setContentType("application/json",!1),DMe(t)):t}],transformResponse:[function(t){const r=this.transitional||rC.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(nt.isResponse(t)||nt.isReadableStream(t))return t;if(t&&nt.isString(t)&&(n&&!this.responseType||i)){const s=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(o){if(s)throw o.name==="SyntaxError"?Jr.from(o,Jr.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:mo.classes.FormData,Blob:mo.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};nt.forEach(["delete","get","head","post","put","patch"],e=>{rC.headers[e]={}});const MMe=nt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),FMe=e=>{const t={};let r,n,i;return e&&e.split(`
`).forEach(function(s){i=s.indexOf(":"),r=s.substring(0,i).trim().toLowerCase(),n=s.substring(i+1).trim(),!(!r||t[r]&&MMe[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},Gq=Symbol("internals");function Iw(e){return e&&String(e).trim().toLowerCase()}function JN(e){return e===!1||e==null?e:nt.isArray(e)?e.map(JN):String(e)}function LMe(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const BMe=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Gj(e,t,r,n,i){if(nt.isFunction(n))return n.call(this,t,r);if(i&&(t=r),!!nt.isString(t)){if(nt.isString(n))return t.indexOf(n)!==-1;if(nt.isRegExp(n))return n.test(t)}}function UMe(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function $Me(e,t){const r=nt.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(i,a,s){return this[n].call(this,t,i,a,s)},configurable:!0})})}let Nl=class{constructor(t){t&&this.set(t)}set(t,r,n){const i=this;function a(o,l,c){const d=Iw(l);if(!d)throw new Error("header name must be a non-empty string");const f=nt.findKey(i,d);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||l]=JN(o))}const s=(o,l)=>nt.forEach(o,(c,d)=>a(c,d,l));if(nt.isPlainObject(t)||t instanceof this.constructor)s(t,r);else if(nt.isString(t)&&(t=t.trim())&&!BMe(t))s(FMe(t),r);else if(nt.isObject(t)&&nt.isIterable(t)){let o={},l,c;for(const d of t){if(!nt.isArray(d))throw TypeError("Object iterator must return a key-value pair");o[c=d[0]]=(l=o[c])?nt.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}s(o,r)}else t!=null&&a(r,t,n);return this}get(t,r){if(t=Iw(t),t){const n=nt.findKey(this,t);if(n){const i=this[n];if(!r)return i;if(r===!0)return LMe(i);if(nt.isFunction(r))return r.call(this,i,n);if(nt.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Iw(t),t){const n=nt.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Gj(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let i=!1;function a(s){if(s=Iw(s),s){const o=nt.findKey(n,s);o&&(!r||Gj(n,n[o],o,r))&&(delete n[o],i=!0)}}return nt.isArray(t)?t.forEach(a):a(t),i}clear(t){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const a=r[n];(!t||Gj(this,this[a],a,t,!0))&&(delete this[a],i=!0)}return i}normalize(t){const r=this,n={};return nt.forEach(this,(i,a)=>{const s=nt.findKey(n,a);if(s){r[s]=JN(i),delete r[a];return}const o=t?UMe(a):String(a).trim();o!==a&&delete r[a],r[o]=JN(i),n[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return nt.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=t&&nt.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[Gq]=this[Gq]={accessors:{}}).accessors,i=this.prototype;function a(s){const o=Iw(s);n[o]||($Me(i,s),n[o]=!0)}return nt.isArray(t)?t.forEach(a):a(t),this}};Nl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);nt.reduceDescriptors(Nl.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});nt.freezeMethods(Nl);function Kj(e,t){const r=this||rC,n=t||r,i=Nl.from(n.headers);let a=n.data;return nt.forEach(e,function(o){a=o.call(r,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function Yse(e){return!!(e&&e.__CANCEL__)}function bb(e,t,r){Jr.call(this,e??"canceled",Jr.ERR_CANCELED,t,r),this.name="CanceledError"}nt.inherits(bb,Jr,{__CANCEL__:!0});function Qse(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Jr("Request failed with status code "+r.status,[Jr.ERR_BAD_REQUEST,Jr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function zMe(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function HMe(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i=0,a=0,s;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),d=n[a];s||(s=c),r[i]=l,n[i]=c;let f=a,p=0;for(;f!==i;)p+=r[f++],f=f%e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),c-s<t)return;const m=d&&c-d;return m?Math.round(p*1e3/m):void 0}}function WMe(e,t){let r=0,n=1e3/t,i,a;const s=(c,d=Date.now())=>{r=d,i=null,a&&(clearTimeout(a),a=null),e(...c)};return[(...c)=>{const d=Date.now(),f=d-r;f>=n?s(c,d):(i=c,a||(a=setTimeout(()=>{a=null,s(i)},n-f)))},()=>i&&s(i)]}const cT=(e,t,r=3)=>{let n=0;const i=HMe(50,250);return WMe(a=>{const s=a.loaded,o=a.lengthComputable?a.total:void 0,l=s-n,c=i(l),d=s<=o;n=s;const f={loaded:s,total:o,progress:o?s/o:void 0,bytes:l,rate:c||void 0,estimated:c&&o&&d?(o-s)/c:void 0,event:a,lengthComputable:o!=null,[t?"download":"upload"]:!0};e(f)},r)},Kq=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Xq=e=>(...t)=>nt.asap(()=>e(...t)),VMe=mo.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,mo.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(mo.origin),mo.navigator&&/(msie|trident)/i.test(mo.navigator.userAgent)):()=>!0,qMe=mo.hasStandardBrowserEnv?{write(e,t,r,n,i,a,s){if(typeof document>"u")return;const o=[`${e}=${encodeURIComponent(t)}`];nt.isNumber(r)&&o.push(`expires=${new Date(r).toUTCString()}`),nt.isString(n)&&o.push(`path=${n}`),nt.isString(i)&&o.push(`domain=${i}`),a===!0&&o.push("secure"),nt.isString(s)&&o.push(`SameSite=${s}`),document.cookie=o.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function GMe(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function KMe(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Jse(e,t,r){let n=!GMe(t);return e&&(n||r==!1)?KMe(e,t):t}const Yq=e=>e instanceof Nl?{...e}:e;function ox(e,t){t=t||{};const r={};function n(c,d,f,p){return nt.isPlainObject(c)&&nt.isPlainObject(d)?nt.merge.call({caseless:p},c,d):nt.isPlainObject(d)?nt.merge({},d):nt.isArray(d)?d.slice():d}function i(c,d,f,p){if(nt.isUndefined(d)){if(!nt.isUndefined(c))return n(void 0,c,f,p)}else return n(c,d,f,p)}function a(c,d){if(!nt.isUndefined(d))return n(void 0,d)}function s(c,d){if(nt.isUndefined(d)){if(!nt.isUndefined(c))return n(void 0,c)}else return n(void 0,d)}function o(c,d,f){if(f in t)return n(c,d);if(f in e)return n(void 0,c)}const l={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(c,d,f)=>i(Yq(c),Yq(d),f,!0)};return nt.forEach(Object.keys({...e,...t}),function(d){const f=l[d]||i,p=f(e[d],t[d],d);nt.isUndefined(p)&&f!==o||(r[d]=p)}),r}const Zse=e=>{const t=ox({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:a,headers:s,auth:o}=t;if(t.headers=s=Nl.from(s),t.url=Gse(Jse(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&s.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),nt.isFormData(r)){if(mo.hasStandardBrowserEnv||mo.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(nt.isFunction(r.getHeaders)){const l=r.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([d,f])=>{c.includes(d.toLowerCase())&&s.set(d,f)})}}if(mo.hasStandardBrowserEnv&&(n&&nt.isFunction(n)&&(n=n(t)),n||n!==!1&&VMe(t.url))){const l=i&&a&&qMe.read(a);l&&s.set(i,l)}return t},XMe=typeof XMLHttpRequest<"u",YMe=XMe&&function(e){return new Promise(function(r,n){const i=Zse(e);let a=i.data;const s=Nl.from(i.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:c}=i,d,f,p,m,x;function y(){m&&m(),x&&x(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function S(){if(!b)return;const C=Nl.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),j={data:!o||o==="text"||o==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:C,config:e,request:b};Qse(function(O){r(O),y()},function(O){n(O),y()},j),b=null}"onloadend"in b?b.onloadend=S:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(S)},b.onabort=function(){b&&(n(new Jr("Request aborted",Jr.ECONNABORTED,e,b)),b=null)},b.onerror=function(A){const j=A&&A.message?A.message:"Network Error",P=new Jr(j,Jr.ERR_NETWORK,e,b);P.event=A||null,n(P),b=null},b.ontimeout=function(){let A=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const j=i.transitional||Kse;i.timeoutErrorMessage&&(A=i.timeoutErrorMessage),n(new Jr(A,j.clarifyTimeoutError?Jr.ETIMEDOUT:Jr.ECONNABORTED,e,b)),b=null},a===void 0&&s.setContentType(null),"setRequestHeader"in b&&nt.forEach(s.toJSON(),function(A,j){b.setRequestHeader(j,A)}),nt.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),o&&o!=="json"&&(b.responseType=i.responseType),c&&([p,x]=cT(c,!0),b.addEventListener("progress",p)),l&&b.upload&&([f,m]=cT(l),b.upload.addEventListener("progress",f),b.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(d=C=>{b&&(n(!C||C.type?new bb(null,e,b):C),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const _=zMe(i.url);if(_&&mo.protocols.indexOf(_)===-1){n(new Jr("Unsupported protocol "+_+":",Jr.ERR_BAD_REQUEST,e));return}b.send(a||null)})},QMe=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,i;const a=function(c){if(!i){i=!0,o();const d=c instanceof Error?c:this.reason;n.abort(d instanceof Jr?d:new bb(d instanceof Error?d.message:d))}};let s=t&&setTimeout(()=>{s=null,a(new Jr(`timeout ${t} of ms exceeded`,Jr.ETIMEDOUT))},t);const o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(a):c.removeEventListener("abort",a)}),e=null)};e.forEach(c=>c.addEventListener("abort",a));const{signal:l}=n;return l.unsubscribe=()=>nt.asap(o),l}},JMe=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,i;for(;n<r;)i=n+t,yield e.slice(n,i),n=i},ZMe=async function*(e,t){for await(const r of e6e(e))yield*JMe(r,t)},e6e=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},Qq=(e,t,r,n)=>{const i=ZMe(e,t);let a=0,s,o=l=>{s||(s=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await i.next();if(c){o(),l.close();return}let f=d.byteLength;if(r){let p=a+=f;r(p)}l.enqueue(new Uint8Array(d))}catch(c){throw o(c),c}},cancel(l){return o(l),i.return()}},{highWaterMark:2})},Jq=64*1024,{isFunction:T_}=nt,t6e=(({Request:e,Response:t})=>({Request:e,Response:t}))(nt.global),{ReadableStream:Zq,TextEncoder:eG}=nt.global,tG=(e,...t)=>{try{return!!e(...t)}catch{return!1}},r6e=e=>{e=nt.merge.call({skipUndefined:!0},t6e,e);const{fetch:t,Request:r,Response:n}=e,i=t?T_(t):typeof fetch=="function",a=T_(r),s=T_(n);if(!i)return!1;const o=i&&T_(Zq),l=i&&(typeof eG=="function"?(x=>y=>x.encode(y))(new eG):async x=>new Uint8Array(await new r(x).arrayBuffer())),c=a&&o&&tG(()=>{let x=!1;const y=new r(mo.origin,{body:new Zq,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!y}),d=s&&o&&tG(()=>nt.isReadableStream(new n("").body)),f={stream:d&&(x=>x.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!f[x]&&(f[x]=(y,b)=>{let S=y&&y[x];if(S)return S.call(y);throw new Jr(`Response type '${x}' is not supported`,Jr.ERR_NOT_SUPPORT,b)})});const p=async x=>{if(x==null)return 0;if(nt.isBlob(x))return x.size;if(nt.isSpecCompliantForm(x))return(await new r(mo.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(nt.isArrayBufferView(x)||nt.isArrayBuffer(x))return x.byteLength;if(nt.isURLSearchParams(x)&&(x=x+""),nt.isString(x))return(await l(x)).byteLength},m=async(x,y)=>{const b=nt.toFiniteNumber(x.getContentLength());return b??p(y)};return async x=>{let{url:y,method:b,data:S,signal:_,cancelToken:C,timeout:A,onDownloadProgress:j,onUploadProgress:P,responseType:O,headers:D,withCredentials:L="same-origin",fetchOptions:B}=Zse(x),H=t||fetch;O=O?(O+"").toLowerCase():"text";let z=QMe([_,C&&C.toAbortSignal()],A),ie=null;const X=z&&z.unsubscribe&&(()=>{z.unsubscribe()});let W;try{if(P&&c&&b!=="get"&&b!=="head"&&(W=await m(D,S))!==0){let _e=new r(y,{method:"POST",body:S,duplex:"half"}),ee;if(nt.isFormData(S)&&(ee=_e.headers.get("content-type"))&&D.setContentType(ee),_e.body){const[de,G]=Kq(W,cT(Xq(P)));S=Qq(_e.body,Jq,de,G)}}nt.isString(L)||(L=L?"include":"omit");const Q=a&&"credentials"in r.prototype,te={...B,signal:z,method:b.toUpperCase(),headers:D.normalize().toJSON(),body:S,duplex:"half",credentials:Q?L:void 0};ie=a&&new r(y,te);let J=await(a?H(ie,B):H(y,te));const Y=d&&(O==="stream"||O==="response");if(d&&(j||Y&&X)){const _e={};["status","statusText","headers"].forEach(q=>{_e[q]=J[q]});const ee=nt.toFiniteNumber(J.headers.get("content-length")),[de,G]=j&&Kq(ee,cT(Xq(j),!0))||[];J=new n(Qq(J.body,Jq,de,()=>{G&&G(),X&&X()}),_e)}O=O||"text";let pe=await f[nt.findKey(f,O)||"text"](J,x);return!Y&&X&&X(),await new Promise((_e,ee)=>{Qse(_e,ee,{data:pe,headers:Nl.from(J.headers),status:J.status,statusText:J.statusText,config:x,request:ie})})}catch(Q){throw X&&X(),Q&&Q.name==="TypeError"&&/Load failed|fetch/i.test(Q.message)?Object.assign(new Jr("Network Error",Jr.ERR_NETWORK,x,ie),{cause:Q.cause||Q}):Jr.from(Q,Q&&Q.code,x,ie)}}},n6e=new Map,eoe=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:i}=t,a=[n,i,r];let s=a.length,o=s,l,c,d=n6e;for(;o--;)l=a[o],c=d.get(l),c===void 0&&d.set(l,c=o?new Map:r6e(t)),d=c;return c};eoe();const q7={http:bMe,xhr:YMe,fetch:{get:eoe}};nt.forEach(q7,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const rG=e=>`- ${e}`,i6e=e=>nt.isFunction(e)||e===null||e===!1;function a6e(e,t){e=nt.isArray(e)?e:[e];const{length:r}=e;let n,i;const a={};for(let s=0;s<r;s++){n=e[s];let o;if(i=n,!i6e(n)&&(i=q7[(o=String(n)).toLowerCase()],i===void 0))throw new Jr(`Unknown adapter '${o}'`);if(i&&(nt.isFunction(i)||(i=i.get(t))))break;a[o||"#"+s]=i}if(!i){const s=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=r?s.length>1?`since :
`+s.map(rG).join(`
`):" "+rG(s[0]):"as no adapter specified";throw new Jr("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i}const toe={getAdapter:a6e,adapters:q7};function Xj(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new bb(null,e)}function nG(e){return Xj(e),e.headers=Nl.from(e.headers),e.data=Kj.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),toe.getAdapter(e.adapter||rC.adapter,e)(e).then(function(n){return Xj(e),n.data=Kj.call(e,e.transformResponse,n),n.headers=Nl.from(n.headers),n},function(n){return Yse(n)||(Xj(e),n&&n.response&&(n.response.data=Kj.call(e,e.transformResponse,n.response),n.response.headers=Nl.from(n.response.headers))),Promise.reject(n)})}const roe="1.13.2",M4={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{M4[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const iG={};M4.transitional=function(t,r,n){function i(a,s){return"[Axios v"+roe+"] Transitional option '"+a+"'"+s+(n?". "+n:"")}return(a,s,o)=>{if(t===!1)throw new Jr(i(s," has been removed"+(r?" in "+r:"")),Jr.ERR_DEPRECATED);return r&&!iG[s]&&(iG[s]=!0,console.warn(i(s," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,s,o):!0}};M4.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function s6e(e,t,r){if(typeof e!="object")throw new Jr("options must be an object",Jr.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const a=n[i],s=t[a];if(s){const o=e[a],l=o===void 0||s(o,a,e);if(l!==!0)throw new Jr("option "+a+" must be "+l,Jr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Jr("Unknown option "+a,Jr.ERR_BAD_OPTION)}}const ZN={assertOptions:s6e,validators:M4},Pd=ZN.validators;let Dg=class{constructor(t){this.defaults=t||{},this.interceptors={request:new qq,response:new qq}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?a&&!String(n.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+a):n.stack=a}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=ox(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:a}=r;n!==void 0&&ZN.assertOptions(n,{silentJSONParsing:Pd.transitional(Pd.boolean),forcedJSONParsing:Pd.transitional(Pd.boolean),clarifyTimeoutError:Pd.transitional(Pd.boolean)},!1),i!=null&&(nt.isFunction(i)?r.paramsSerializer={serialize:i}:ZN.assertOptions(i,{encode:Pd.function,serialize:Pd.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),ZN.assertOptions(r,{baseUrl:Pd.spelling("baseURL"),withXsrfToken:Pd.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let s=a&&nt.merge(a.common,a[r.method]);a&&nt.forEach(["delete","get","head","post","put","patch","common"],x=>{delete a[x]}),r.headers=Nl.concat(s,a);const o=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(l=l&&y.synchronous,o.unshift(y.fulfilled,y.rejected))});const c=[];this.interceptors.response.forEach(function(y){c.push(y.fulfilled,y.rejected)});let d,f=0,p;if(!l){const x=[nG.bind(this),void 0];for(x.unshift(...o),x.push(...c),p=x.length,d=Promise.resolve(r);f<p;)d=d.then(x[f++],x[f++]);return d}p=o.length;let m=r;for(;f<p;){const x=o[f++],y=o[f++];try{m=x(m)}catch(b){y.call(this,b);break}}try{d=nG.call(this,m)}catch(x){return Promise.reject(x)}for(f=0,p=c.length;f<p;)d=d.then(c[f++],c[f++]);return d}getUri(t){t=ox(this.defaults,t);const r=Jse(t.baseURL,t.url,t.allowAbsoluteUrls);return Gse(r,t.params,t.paramsSerializer)}};nt.forEach(["delete","get","head","options"],function(t){Dg.prototype[t]=function(r,n){return this.request(ox(n||{},{method:t,url:r,data:(n||{}).data}))}});nt.forEach(["post","put","patch"],function(t){function r(n){return function(a,s,o){return this.request(ox(o||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:s}))}}Dg.prototype[t]=r(),Dg.prototype[t+"Form"]=r(!0)});let o6e=class noe{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});const n=this;this.promise.then(i=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](i);n._listeners=null}),this.promise.then=i=>{let a;const s=new Promise(o=>{n.subscribe(o),a=o}).then(i);return s.cancel=function(){n.unsubscribe(a)},s},t(function(a,s,o){n.reason||(n.reason=new bb(a,s,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new noe(function(i){t=i}),cancel:t}}};function l6e(e){return function(r){return e.apply(null,r)}}function c6e(e){return nt.isObject(e)&&e.isAxiosError===!0}const x8={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(x8).forEach(([e,t])=>{x8[t]=e});function ioe(e){const t=new Dg(e),r=Dse(Dg.prototype.request,t);return nt.extend(r,Dg.prototype,t,{allOwnKeys:!0}),nt.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return ioe(ox(e,i))},r}const cr=ioe(rC);cr.Axios=Dg;cr.CanceledError=bb;cr.CancelToken=o6e;cr.isCancel=Yse;cr.VERSION=roe;cr.toFormData=D4;cr.AxiosError=Jr;cr.Cancel=cr.CanceledError;cr.all=function(t){return Promise.all(t)};cr.spread=l6e;cr.isAxiosError=c6e;cr.mergeConfig=ox;cr.AxiosHeaders=Nl;cr.formToJSON=e=>Xse(nt.isHTMLForm(e)?new FormData(e):e);cr.getAdapter=toe.getAdapter;cr.HttpStatusCode=x8;cr.default=cr;const{Axios:fAt,AxiosError:hAt,CanceledError:pAt,isCancel:mAt,CancelToken:gAt,VERSION:xAt,all:vAt,Cancel:yAt,isAxiosError:bAt,spread:wAt,toFormData:SAt,AxiosHeaders:EAt,HttpStatusCode:CAt,formToJSON:kAt,getAdapter:_At,mergeConfig:NAt}=cr,v8="subfloor_server_url",G7=()=>{var r;if(!((r=window.Capacitor)==null?void 0:r.isNativePlatform()))return"";const t=localStorage.getItem(v8);return t?t.replace(/\/$/,""):""},rr=e=>{const t=G7(),r=e.startsWith("/")?e:`/${e}`;return`${t}${r}`},Ma=e=>{if(!e)return"";if(e.startsWith("http"))return e;let t=e.startsWith("/")?e:`/${e}`;return!t.startsWith("/uploads/")&&!t.startsWith("/api/")&&(t=`/uploads${t}`),`${G7()}${t}`},u6e=async()=>(await cr.get(rr("/api/notifications"))).data,d6e=async()=>(await cr.get(rr("/api/notifications/unread-count"))).data.count,f6e=async e=>{await cr.patch(rr(`/api/notifications/${e}/read`))},h6e=async()=>{await cr.patch(rr("/api/notifications/read-all"))},p6e=async e=>{await cr.patch(rr(`/api/notifications/mark-reference/${e}`))},m6e=e=>qs({queryKey:["notifications","unreadCount"],queryFn:d6e,refetchInterval:1e4,enabled:e,initialData:0}),Sd=()=>rr("/api/products"),g6e=async()=>{const e=await fetch(Sd());if(!e.ok)throw new Error("Failed to fetch products");return e.json()},x6e=async e=>{const t=await fetch(`${Sd()}/${e}/history`);if(!t.ok)throw new Error("Failed to fetch product history");return t.json()},v6e=async e=>{const t=await fetch(Sd(),{method:"POST",body:e});if(!t.ok){const r=await t.json().catch(()=>({error:"Failed to create product"}));throw new Error(r.error||"Failed to create product")}return t.json()},y6e=async(e,t)=>{const r=await fetch(`${Sd()}/${e}`,{method:"PATCH",body:t});if(!r.ok){const n=await r.json().catch(()=>({error:"Failed to update product"}));throw new Error(n.error||"Failed to update product")}return r.json()},b6e=async e=>{const t=await fetch(`${Sd()}/${e}/duplicate`,{method:"POST"});if(!t.ok){const r=await t.json().catch(()=>({error:"Failed to duplicate product"}));throw new Error(r.error||"Failed to duplicate product")}return t.json()},w6e=async e=>{const t=await fetch(`${Sd()}/${e}`,{method:"DELETE"});if(!t.ok){const r=await t.json().catch(()=>({error:"Failed to delete product"}));throw new Error(r.error||"Failed to delete product")}},S6e=async(e,t)=>{const r=await fetch(`${Sd()}/${e}/variants`,{method:"POST",body:t});if(!r.ok){const n=await r.json().catch(()=>({error:"Failed to add variant"}));throw new Error(n.error||"Failed to add variant")}return r.json()},E6e=async(e,t)=>{const r=await fetch(`${Sd()}/${e}/variants/batch`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({variants:t})});if(!r.ok){const n=await r.json().catch(()=>({error:"Failed to batch create variants."}));throw new Error(n.error||"Failed to batch create variants.")}return r.json()},C6e=async(e,t)=>{const r=await fetch(`${Sd()}/variants/${e}`,{method:"PATCH",body:t});if(!r.ok){const n=await r.json().catch(()=>({error:"Failed to update variant"}));throw new Error(n.error||"Failed to update variant")}return r.json()},k6e=async(e,t)=>{const r=await fetch(`${Sd()}/variants/batch-update`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:e,updates:t})});if(!r.ok){const n=await r.json().catch(()=>({error:"Failed to batch update variants"}));throw new Error(n.error||"Failed to batch update variants")}},aoe=async e=>{const t=await fetch(`${Sd()}/variants/${e}`,{method:"DELETE"});if(!t.ok){const r=await t.json().catch(()=>({error:"Failed to delete variant"}));throw new Error(r.error||"Failed to delete variant")}},wb=(e=!0)=>qs({queryKey:["products"],queryFn:g6e,enabled:e}),K7=()=>{const e=$a(),t=()=>e.invalidateQueries({queryKey:["products"]});return{addProduct:Ir({mutationFn:v6e,onSuccess:t}),updateProduct:Ir({mutationFn:({id:r,formData:n})=>y6e(r,n),onSuccess:t}),duplicateProduct:Ir({mutationFn:b6e,onSuccess:t}),deleteProduct:Ir({mutationFn:w6e,onSuccess:t}),addVariant:Ir({mutationFn:({productId:r,formData:n})=>S6e(r,n),onSuccess:t}),addVariantsBatch:Ir({mutationFn:({productId:r,variants:n})=>E6e(r,n),onSuccess:t}),updateVariant:Ir({mutationFn:({variantId:r,formData:n})=>C6e(r,n),onSuccess:t}),batchUpdateVariants:Ir({mutationFn:({ids:r,updates:n})=>k6e(r,n),onSuccess:t}),deleteVariant:Ir({mutationFn:aoe,onSuccess:t})}},nC=()=>rr("/api/customers"),_6e=async()=>{const e=await fetch(nC());if(!e.ok)throw new Error("Failed to fetch customers.");return e.json()},N6e=async e=>{const t=await fetch(nC(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create customer.");return t.json()},A6e=async e=>{const t=await fetch(`${nC()}/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update customer.");return t.json()},T6e=async e=>{const t=await fetch(`${nC()}/${e}`,{method:"DELETE"});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to delete customer.")}},I6e=async e=>{const t=await fetch(`${nC()}/${e}/history`);if(!t.ok)throw new Error("Failed to fetch customer history.");return t.json()},Xx=()=>qs({queryKey:["customers"],queryFn:_6e}),soe=()=>{const e=$a(),t=Ir({mutationFn:N6e,onSuccess:()=>{e.invalidateQueries({queryKey:["customers"]})}}),r=Ir({mutationFn:A6e,onSuccess:i=>{e.invalidateQueries({queryKey:["customers"]}),e.invalidateQueries({queryKey:["customer",i.id]})}}),n=Ir({mutationFn:T6e,onSuccess:()=>{e.invalidateQueries({queryKey:["customers"]})}});return{createCustomer:t,updateCustomer:r,deleteCustomer:n}},iC=()=>rr("/api/projects"),O6e=async e=>{const r=iC(),n=await fetch(r);if(!n.ok)throw new Error("Failed to fetch projects.");return n.json()},P6e=async e=>{const t=await fetch(iC(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create project.");return t.json()},R6e=async e=>{const t=await fetch(`${iC()}/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update project.");return t.json()},j6e=async e=>{const t=await fetch(`${iC()}/${e}`,{method:"DELETE"});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to delete project.")}},D6e=async e=>{const t=await fetch(`${iC()}/${e}/history`);if(!t.ok)throw new Error("Failed to fetch project history.");return t.json()},np=(e=!0)=>qs({queryKey:["projects"],queryFn:()=>O6e(),enabled:e}),ooe=()=>{const e=$a();return{addProject:Ir({mutationFn:P6e,onSuccess:()=>e.invalidateQueries({queryKey:["projects"]})}),updateProject:Ir({mutationFn:R6e,onSuccess:()=>e.invalidateQueries({queryKey:["projects"]})}),deleteProject:Ir({mutationFn:j6e,onSuccess:()=>e.invalidateQueries({queryKey:["projects"]})})}},aC=()=>rr("/api/installers"),M6e=async()=>{const e=await fetch(aC());if(!e.ok)throw new Error("Failed to fetch installers.");return e.json()},loe=async e=>{const t=await fetch(aC(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create installer.");return t.json()},coe=async e=>{const t=await fetch(`${aC()}/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update installer.");return t.json()},uoe=async e=>{const t=await fetch(`${aC()}/${e}`,{method:"DELETE"});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to delete installer.")}},F6e=async e=>{const t=await fetch(`${aC()}/${e}/history`);if(!t.ok)throw new Error("Failed to fetch installer history.");return t.json()},Cf=(e=!0)=>qs({queryKey:["installers"],queryFn:M6e,enabled:e}),X7=()=>{const e=$a(),t=Ir({mutationFn:loe,onSuccess:()=>{e.invalidateQueries({queryKey:["installers"]})}}),r=Ir({mutationFn:coe,onSuccess:()=>{e.invalidateQueries({queryKey:["installers"]})}}),n=Ir({mutationFn:uoe,onSuccess:()=>{e.invalidateQueries({queryKey:["installers"]})}});return{createInstaller:t,updateInstaller:r,deleteInstaller:n}},sC=()=>rr("/api/vendors"),L6e=async()=>{const e=await fetch(sC());if(!e.ok)throw new Error("Failed to fetch vendors.");return e.json()},doe=async e=>{const t=await fetch(sC(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to create vendor")}return t.json()},foe=async e=>{const{id:t,...r}=e,n=await fetch(`${sC()}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!n.ok){const i=await n.json();throw new Error(i.error||"Failed to update vendor")}return n.json()},hoe=async e=>{const t=await fetch(`${sC()}/${e}`,{method:"DELETE"});if(!t.ok){if(t.status===409)throw new Error("Cannot delete vendor because it is currently in use.");const r=await t.json().catch(()=>({}));throw new Error(r.error||"Failed to delete vendor")}},B6e=async e=>{const t=await fetch(`${sC()}/${e}/history`);if(!t.ok)throw new Error("Failed to fetch vendor history.");return t.json()},F4=(e=!0)=>qs({queryKey:["vendors"],queryFn:L6e,enabled:e}),U6e=e=>{const t=$a(),r=Ir({mutationFn:doe,onSuccess:()=>{t.invalidateQueries({queryKey:["vendors"]})}}),n=Ir({mutationFn:foe,onSuccess:()=>{t.invalidateQueries({queryKey:["vendors"]})}}),i=Ir({mutationFn:hoe,onSuccess:()=>{t.invalidateQueries({queryKey:["vendors"]})}});return{createVendor:r,updateVendor:n,deleteVendor:i}},oC=()=>rr("/api/quotes"),$6e=async()=>{const e=await fetch(oC());if(!e.ok)throw new Error("Failed to fetch quotes.");return e.json()},z6e=async e=>{const t=await fetch(oC(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to add quote.");return t.json()},H6e=async e=>{const t=await fetch(`${oC()}/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update quote.");return t.json()},W6e=async e=>{const t=await fetch(`${oC()}/${e.id}/accept`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const r=await t.json().catch(()=>({message:"Failed to accept quote."}));throw new Error(r.message)}return t.json()},poe=async e=>{const t=await fetch(`${oC()}/project/${e}/history`);if(!t.ok)throw new Error("Failed to fetch quote history.");return t.json()},L4=e=>qs({queryKey:["quotes"],queryFn:()=>$6e(),select:t=>e?t.filter(r=>r.projectId===e):t}),Y7=()=>{const e=$a(),t=Ir({mutationFn:i=>z6e(i),onSuccess:(i,a)=>{e.invalidateQueries({queryKey:["quotes"]}),e.invalidateQueries({queryKey:["quotes",a.projectId]}),e.invalidateQueries({queryKey:["quotes","history",a.projectId]}),e.invalidateQueries({queryKey:["projects"]})}}),r=Ir({mutationFn:i=>H6e(i),onSuccess:i=>{e.invalidateQueries({queryKey:["quotes"]}),e.invalidateQueries({queryKey:["quotes",i.projectId]}),e.invalidateQueries({queryKey:["quotes","history",i.projectId]})}}),n=Ir({mutationFn:i=>W6e(i),onSuccess:i=>{const{updatedQuote:a}=i;e.invalidateQueries({queryKey:["quotes"]}),e.invalidateQueries({queryKey:["quotes",a.projectId]}),e.invalidateQueries({queryKey:["quotes","history",a.projectId]}),e.invalidateQueries({queryKey:["projects"]}),e.invalidateQueries({queryKey:["jobs"]})}});return{addQuote:t.mutateAsync,updateQuote:r.mutateAsync,acceptQuote:n.mutateAsync}},Q7=()=>rr("/api/jobs"),V6e=async()=>{const e=await fetch(Q7());if(!e.ok)throw new Error("Failed to fetch jobs.");return(await e.json()).map(r=>({...r,appointments:r.appointments||[]}))},q6e=async e=>{const t=await fetch(`${Q7()}/project/${e}`);if(t.status===404)return null;if(!t.ok)throw new Error(`Failed to fetch job for project ${e}. Status: ${t.status}`);return t.json()},moe=async e=>{const t=await fetch(Q7(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const r=await t.json().catch(()=>({error:"Failed to save job details."}));throw new Error(r.error||"Failed to save job details.")}return t.json()},G6e=async e=>{const{id:t,...r}=e,n=await fetch(rr(`/api/projects/${t}`),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!n.ok){const i=await n.json().catch(()=>({error:"Failed to update project."}));throw new Error(i.error||"Failed to update project.")}},goe=()=>qs({queryKey:["jobs"],queryFn:V6e}),xoe=()=>{const e=$a();return{saveJobDetails:Ir({mutationFn:moe,onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["jobs"]}),e.invalidateQueries({queryKey:["job"]}),e.invalidateQueries({queryKey:["projects"]}),r.projectId&&(e.invalidateQueries({queryKey:["project",r.projectId]}),e.invalidateQueries({queryKey:["job",r.projectId]})),e.invalidateQueries({queryKey:["material_orders"]})}})}},B4=()=>rr("/api/change-orders"),K6e=async()=>{const e=await fetch(B4());if(!e.ok)throw new Error("Failed to fetch change orders.");return e.json()},X6e=async e=>{const t=await fetch(B4(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to add change order.");return t.json()},Y6e=async(e,t)=>{const r=await fetch(`${B4()}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to update change order.");return r.json()},Q6e=async e=>{const t=await fetch(`${B4()}/${e}`,{method:"DELETE"});if(!t.ok){if(t.status===403||t.status===404){const r=await t.json();throw new Error(r.error||"Failed to delete change order.")}throw new Error("Failed to delete change order.")}},voe=(e=!0)=>qs({queryKey:["changeOrders"],queryFn:K6e,enabled:e}),J7=()=>{const e=$a(),t=Ir({mutationFn:i=>X6e(i),onSuccess:(i,a)=>{e.invalidateQueries({queryKey:["change_orders",a.projectId]}),e.invalidateQueries({queryKey:["projects"]})}}),r=Ir({mutationFn:({id:i,data:a})=>Y6e(i,a),onSuccess:i=>{e.invalidateQueries({queryKey:["change_orders",i.projectId]}),e.invalidateQueries({queryKey:["projects"]})}}),n=Ir({mutationFn:i=>Q6e(i),onSuccess:()=>{e.invalidateQueries({queryKey:["change_orders"]}),e.invalidateQueries({queryKey:["projects"]})}});return{addChangeOrder:t.mutateAsync,updateChangeOrder:r.mutateAsync,deleteChangeOrder:n.mutateAsync}},Yx=()=>rr("/api/orders"),J6e=async()=>{const e=await fetch(Yx());if(!e.ok)throw new Error("Failed to fetch material orders.");return e.json()},Z6e=async e=>{const t=await fetch(Yx(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to create material order")}return t.json()},e8e=async(e,t)=>{const r=await fetch(`${Yx()}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to update material order")}return r.json()},t8e=async e=>{const t=await fetch(`${Yx()}/${e}`,{method:"DELETE"});if(!t.ok){const r=await t.json().catch(()=>({}));throw new Error(r.error||"Failed to delete material order")}},yoe=async e=>{const t=await fetch(`${Yx()}/${e}/history`);if(!t.ok)throw new Error("Failed to fetch material order history.");return t.json()},r8e=async(e,t)=>{const r=new FormData;r.append("dateReceived",t.dateReceived),r.append("notes",t.notes),r.append("sendEmailNotification",String(t.sendEmailNotification)),t.files&&t.files.length>0&&Array.from(t.files).forEach(i=>{r.append("paperwork",i)});const n=await fetch(`${Yx()}/${e}/receive`,{method:"POST",body:r});if(!n.ok){const i=await n.json().catch(()=>({}));throw new Error(i.error||"Failed to receive material order")}return n.json()},n8e=async(e,t)=>{const r=new FormData;r.append("items",JSON.stringify(t.items)),r.append("replacementEta",t.replacementEta),r.append("notes",t.notes),r.append("sendEmailNotification",String(t.sendEmailNotification)),t.files&&t.files.length>0&&Array.from(t.files).forEach(i=>{r.append("damagePhotos",i)});const n=await fetch(`${Yx()}/${e}/damage`,{method:"POST",body:r});if(!n.ok){const i=await n.json().catch(()=>({}));throw new Error(i.error||"Failed to report damage")}return n.json()},U4=e=>qs({queryKey:["material_orders"],queryFn:()=>J6e(),select:t=>t}),$4=()=>{const e=$a(),t=Ir({mutationFn:s=>Z6e(s),onSuccess:s=>{s.projectId&&e.invalidateQueries({queryKey:["material_orders",s.projectId]}),e.invalidateQueries({queryKey:["material_orders"]}),e.invalidateQueries({queryKey:["orders"]})}}),r=Ir({mutationFn:({id:s,data:o})=>e8e(s,o),onSuccess:s=>{s.projectId&&e.invalidateQueries({queryKey:["material_orders",s.projectId]}),e.invalidateQueries({queryKey:["material_orders"]}),e.invalidateQueries({queryKey:["orders"]}),e.invalidateQueries({queryKey:["material_orders","history",s.id]})}}),n=Ir({mutationFn:s=>t8e(s),onSuccess:()=>{e.invalidateQueries({queryKey:["material_orders"]}),e.invalidateQueries({queryKey:["orders"]})}}),i=Ir({mutationFn:({id:s,data:o})=>r8e(s,o),onSuccess:s=>{s.projectId&&e.invalidateQueries({queryKey:["material_orders",s.projectId]}),e.invalidateQueries({queryKey:["orders"]}),e.invalidateQueries({queryKey:["material_orders","history",s.id]})}}),a=Ir({mutationFn:({id:s,data:o})=>n8e(s,o),onSuccess:s=>{const{originalOrder:o,replacementOrder:l}=s;o.projectId&&e.invalidateQueries({queryKey:["material_orders",o.projectId]}),e.invalidateQueries({queryKey:["material_orders"]}),e.invalidateQueries({queryKey:["orders"]}),e.invalidateQueries({queryKey:["material_orders","history",o.id]}),l&&e.invalidateQueries({queryKey:["material_orders","history",l.id]})}});return{addMaterialOrder:t.mutateAsync,updateMaterialOrder:r.mutateAsync,deleteMaterialOrder:n.mutateAsync,receiveMaterialOrder:i.mutateAsync,reportMaterialOrderDamage:a.mutateAsync}},im=()=>rr("/api/sample-checkouts"),i8e=async e=>{const t=im(),r=e?`${t}?projectId=${e}`:t,n=await fetch(r,{credentials:"include"});if(!n.ok)throw new Error("Failed to fetch sample checkouts.");return n.json()},a8e=async e=>{const t=await fetch(`${im()}?customerId=${e}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch customer samples.");return t.json()},s8e=async e=>{const t=await fetch(`${im()}?installerId=${e}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch installer samples.");return t.json()},o8e=async e=>{const t=await fetch(im(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!t.ok)throw new Error("Failed to check out sample.");return t.json()},l8e=async e=>{const t=await fetch(`${im()}/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({}),credentials:"include"});if(!t.ok)throw new Error("Failed to return sample.");return t.json()},c8e=async(e,t)=>{const r=await fetch(`${im()}/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});if(!r.ok)throw new Error("Failed to update sample checkout.");return r.json()},u8e=async e=>{const t=await fetch(`${im()}/${e}/extend`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!t.ok)throw new Error("Failed to extend sample checkout.");return t.json()},boe=async(e,t)=>{await fetch(`${im()}/transfer`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({checkoutIds:e,projectId:t}),credentials:"include"})},lC=e=>qs({queryKey:e?["sample_checkouts","project",e]:["sample_checkouts"],queryFn:()=>i8e(e)}),woe=()=>{const e=$a(),t=o=>{e.invalidateQueries({queryKey:["sample_checkouts"]}),o!=null&&o.projectId&&e.invalidateQueries({queryKey:["sample_checkouts","project",o.projectId]}),o!=null&&o.customerId&&e.invalidateQueries({queryKey:["sample_checkouts","customer",o.customerId]}),o!=null&&o.installerId&&e.invalidateQueries({queryKey:["sample_checkouts","installer",o.installerId]}),e.invalidateQueries({queryKey:["samples"]}),e.invalidateQueries({queryKey:["products"]})},r=Ir({mutationFn:o=>o8e(o),onSuccess:o=>{t(o)}}),n=Ir({mutationFn:o=>l8e(o),onSuccess:o=>{t(o)}}),i=Ir({mutationFn:({id:o,data:l})=>c8e(o,l),onSuccess:o=>{t(o)}}),a=Ir({mutationFn:o=>u8e(o),onSuccess:o=>{t(o)}}),s=Ir({mutationFn:({checkoutIds:o,projectId:l})=>boe(o,l),onSuccess:(o,l)=>{e.invalidateQueries({queryKey:["sample_checkouts"]}),e.invalidateQueries({queryKey:["sample_checkouts","project",l.projectId]})}});return{addSampleCheckout:r.mutateAsync,returnSampleCheckout:n.mutateAsync,updateSampleCheckout:i.mutateAsync,patchSampleCheckout:i.mutateAsync,extendSampleCheckout:a.mutateAsync,transferCheckouts:s.mutateAsync}},d8e=()=>{const[e,t]=I.useState([]),[r,n]=I.useState([]),[i,a]=I.useState([]),[s,o]=I.useState([]),[l,c]=I.useState([]),[d,f]=I.useState([]),[p,m]=I.useState([]),x=I.useCallback(async(P,O,D,L)=>{try{const B=await O(L);D(B)}catch(B){console.error(`Error fetching ${P} history:`,B),Re.error(`Could not load ${P} history.`),D([])}},[]),y=I.useCallback(P=>x("customer",I6e,t,P),[x]),b=I.useCallback(P=>x("project",D6e,n,P),[x]),S=I.useCallback(P=>x("quote",poe,a,P),[x]),_=I.useCallback(P=>x("installer",F6e,o,P),[x]),C=I.useCallback(P=>x("vendor",B6e,c,P),[x]),A=I.useCallback(P=>x("product",O=>x6e(String(O)),f,P),[x]),j=I.useCallback(P=>x("order",yoe,m,P),[x]);return{customerHistory:e,fetchCustomerHistory:y,projectHistory:r,fetchProjectHistory:b,quotesHistory:i,fetchQuotesHistory:S,installerHistory:s,fetchInstallerHistory:_,vendorHistory:l,fetchVendorHistory:C,sampleHistory:d,fetchSampleHistory:A,materialOrderHistory:p,fetchMaterialOrderHistory:j}},Z7=async()=>{const e=await fetch(rr("/api/users"));if(!e.ok)throw new Error("Failed to fetch users");return e.json()},f8e=async(e,t,r,n)=>{const i=await fetch(rr("/api/users"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,firstName:t,lastName:r,role:n})});if(!i.ok){const a=await i.json();throw new Error(a.message||"Failed to create user")}return i.json()},h8e=async e=>{const t=await fetch(rr(`/api/users/${e}`),{method:"DELETE"});if(!t.ok){const r=await t.json();throw new Error(r.message||"Failed to delete user")}},Soe=async()=>{const e=await fetch(rr("/api/users/me"));if(!e.ok)throw new Error("Failed to fetch current user");return e.json()},p8e=async(e,t)=>{const r=await fetch(rr("/api/users/me/profile"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:e,lastName:t})});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to update profile")}return r.json()},m8e=async e=>{const t=new FormData;t.append("avatar",e);const r=await fetch(rr("/api/users/me/avatar"),{method:"POST",body:t});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to upload avatar")}return r.json()},g8e=async()=>{if(!(await fetch(rr("/api/users/me/avatar"),{method:"DELETE"})).ok)throw new Error("Failed to delete avatar")},x8e=async(e,t)=>{const r=await fetch(rr("/api/users/me/password"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:e,newPassword:t})});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to change password")}},v8e=async()=>{const e=await fetch(rr("/api/roles"));if(!e.ok)throw new Error("Failed to fetch roles");return e.json()},y8e=async(e,t)=>{const r=await fetch(rr(`/api/users/${e}/roles`),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({roles:t})});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to update user roles")}},Eoe=()=>rr("/api/preferences"),cC=()=>rr("/api/preferences/system"),b8e=async()=>{try{const e=await fetch(Eoe());if(!e.ok)throw new Error(`Failed to fetch preferences with status: ${e.status}`);return e.json()}catch(e){return console.error("Failed to fetch user preferences:",e),{}}},w8e=async e=>{try{const t=await fetch(Eoe(),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to save preferences.")}return t.json()}catch(t){throw console.error("Failed to save user preferences:",t),t}},uT=async e=>{const t=await fetch(`${cC()}/${e}`);if(!t.ok)throw new Error(`Failed to fetch system preference: ${e}`);return t.json()},y8=async(e,t)=>{if(!(await fetch(`${cC()}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw new Error(`Failed to save system preference: ${e}`)},S8e=async()=>{if(!(await fetch(`${cC()}/email_test`,{method:"POST"})).ok)throw new Error("Failed to send test email.")},Qx=async()=>uT("pricing"),E8e=async e=>y8("pricing",e),C8e=async e=>{const t=await fetch(`${cC()}/branding`,{method:"POST",body:e});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to upload branding files.")}return t.json()},k8e=uT,_8e=async e=>{const t=await fetch(`${cC()}/branding/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Failed to delete ${e}.`);return t.json()};var dT={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */dT.exports;(function(e,t){(function(){var r,n="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",o="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,d="__lodash_placeholder__",f=1,p=2,m=4,x=1,y=2,b=1,S=2,_=4,C=8,A=16,j=32,P=64,O=128,D=256,L=512,B=30,H="...",z=800,ie=16,X=1,W=2,Q=3,te=1/0,J=9007199254740991,Y=17976931348623157e292,pe=NaN,_e=4294967295,ee=_e-1,de=_e>>>1,G=[["ary",O],["bind",b],["bindKey",S],["curry",C],["curryRight",A],["flip",L],["partial",j],["partialRight",P],["rearg",D]],q="[object Arguments]",ne="[object Array]",Se="[object AsyncFunction]",re="[object Boolean]",ae="[object Date]",ge="[object DOMException]",Ee="[object Error]",V="[object Function]",Ae="[object GeneratorFunction]",Pe="[object Map]",ze="[object Number]",De="[object Null]",$e="[object Object]",et="[object Promise]",ut="[object Proxy]",kt="[object RegExp]",ht="[object Set]",jr="[object String]",er="[object Symbol]",ct="[object Undefined]",qt="[object WeakMap]",Lt="[object WeakSet]",dr="[object ArrayBuffer]",Gt="[object DataView]",qe="[object Float32Array]",Xe="[object Float64Array]",Te="[object Int8Array]",He="[object Int16Array]",je="[object Int32Array]",we="[object Uint8Array]",ot="[object Uint8ClampedArray]",xt="[object Uint16Array]",Dt="[object Uint32Array]",Pt=/\b__p \+= '';/g,kr=/\b(__p \+=) '' \+/g,Cn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,fr=/&(?:amp|lt|gt|quot|#39);/g,Qi=/[&<>"']/g,Fn=RegExp(fr.source),il=RegExp(Qi.source),We=/<%-([\s\S]+?)%>/g,Je=/<%([\s\S]+?)%>/g,rt=/<%=([\s\S]+?)%>/g,_t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ut=/^\w*$/,ir=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tr=/[\\^$.*+?()[\]{}|]/g,$t=RegExp(tr.source),_r=/^\s+/,Jt=/\s/,Hn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ue=/\{\n\/\* \[wrapped with (.+)\] \*/,fe=/,? & /,ye=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ke=/[()=,{}\[\]\/\s]/,he=/\\(\\)?/g,me=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Fe=/\w*$/,it=/^[-+]0x[0-9a-f]+$/i,Ge=/^0b[01]+$/i,Ye=/^\[object .+?Constructor\]$/,Ze=/^0o[0-7]+$/i,wt=/^(?:0|[1-9]\d*)$/,At=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,dt=/($^)/,St=/['\n\r\u2028\u2029\\]/g,Ot="\\ud800-\\udfff",Kt="\\u0300-\\u036f",at="\\ufe20-\\ufe2f",Xn="\\u20d0-\\u20ff",Hr=Kt+at+Xn,No="\\u2700-\\u27bf",kd="a-z\\xdf-\\xf6\\xf8-\\xff",yn="\\xac\\xb1\\xd7\\xf7",rn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",nn="\\u2000-\\u206f",Ao=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",m1="A-Z\\xc0-\\xd6\\xd8-\\xde",g1="\\ufe0e\\ufe0f",Ji=yn+rn+nn+Ao,kc="[']",$P="["+Ot+"]",Ri="["+Ji+"]",Ul="["+Hr+"]",nk="\\d+",xp="["+No+"]",Zn="["+kd+"]",za="[^"+Ot+Ji+nk+No+kd+m1+"]",Qe="\\ud83c[\\udffb-\\udfff]",Ie="(?:"+Ul+"|"+Qe+")",ar="[^"+Ot+"]",Zi="(?:\\ud83c[\\udde6-\\uddff]){2}",Gs="[\\ud800-\\udbff][\\udc00-\\udfff]",vp="["+m1+"]",x1="\\u200d",To="(?:"+Zn+"|"+za+")",mr="(?:"+vp+"|"+za+")",gi="(?:"+kc+"(?:d|ll|m|re|s|t|ve))?",zb="(?:"+kc+"(?:D|LL|M|RE|S|T|VE))?",ik=Ie+"?",v1="["+g1+"]?",y1="(?:"+x1+"(?:"+[ar,Zi,Gs].join("|")+")"+v1+ik+")*",Hb="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",zP="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",pa=v1+ik+y1,vm="(?:"+[xp,Zi,Gs].join("|")+")"+pa,_d="(?:"+[ar+Ul+"?",Ul,Zi,Gs,$P].join("|")+")",Nr=RegExp(kc,"g"),HP=RegExp(Ul,"g"),Wr=RegExp(Qe+"(?="+Qe+")|"+_d+pa,"g"),Ha=RegExp([vp+"?"+Zn+"+"+gi+"(?="+[Ri,vp,"$"].join("|")+")",mr+"+"+zb+"(?="+[Ri,vp+To,"$"].join("|")+")",vp+"?"+To+"+"+gi,vp+"+"+zb,zP,Hb,nk,vm].join("|"),"g"),WP=RegExp("["+x1+Ot+Hr+g1+"]"),Wb=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ak=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Pf=-1,fi={};fi[qe]=fi[Xe]=fi[Te]=fi[He]=fi[je]=fi[we]=fi[ot]=fi[xt]=fi[Dt]=!0,fi[q]=fi[ne]=fi[dr]=fi[re]=fi[Gt]=fi[ae]=fi[Ee]=fi[V]=fi[Pe]=fi[ze]=fi[$e]=fi[kt]=fi[ht]=fi[jr]=fi[qt]=!1;var Ln={};Ln[q]=Ln[ne]=Ln[dr]=Ln[Gt]=Ln[re]=Ln[ae]=Ln[qe]=Ln[Xe]=Ln[Te]=Ln[He]=Ln[je]=Ln[Pe]=Ln[ze]=Ln[$e]=Ln[kt]=Ln[ht]=Ln[jr]=Ln[er]=Ln[we]=Ln[ot]=Ln[xt]=Ln[Dt]=!0,Ln[Ee]=Ln[V]=Ln[qt]=!1;var ym={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},bm={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},sk={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},wm={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Sm=parseFloat,Ks=parseInt,Vb=typeof Ve=="object"&&Ve&&Ve.Object===Object&&Ve,ok=typeof self=="object"&&self&&self.Object===Object&&self,Na=Vb||ok||Function("return this")(),qb=t&&!t.nodeType&&t,Rf=qb&&!0&&e&&!e.nodeType&&e,lk=Rf&&Rf.exports===qb,Bn=lk&&Vb.process,Io=function(){try{var ce=Rf&&Rf.require&&Rf.require("util").types;return ce||Bn&&Bn.binding&&Bn.binding("util")}catch{}}(),Em=Io&&Io.isArrayBuffer,Tu=Io&&Io.isDate,ck=Io&&Io.isMap,tt=Io&&Io.isRegExp,Yr=Io&&Io.isSet,Aa=Io&&Io.isTypedArray;function rs(ce,be,Ne){switch(Ne.length){case 0:return ce.call(be);case 1:return ce.call(be,Ne[0]);case 2:return ce.call(be,Ne[0],Ne[1]);case 3:return ce.call(be,Ne[0],Ne[1],Ne[2])}return ce.apply(be,Ne)}function uk(ce,be,Ne,Be){for(var lt=-1,gt=ce==null?0:ce.length;++lt<gt;){var vt=ce[lt];be(Be,vt,Ne(vt),ce)}return Be}function al(ce,be){for(var Ne=-1,Be=ce==null?0:ce.length;++Ne<Be&&be(ce[Ne],Ne,ce)!==!1;);return ce}function VP(ce,be){for(var Ne=ce==null?0:ce.length;Ne--&&be(ce[Ne],Ne,ce)!==!1;);return ce}function dk(ce,be){for(var Ne=-1,Be=ce==null?0:ce.length;++Ne<Be;)if(!be(ce[Ne],Ne,ce))return!1;return!0}function _c(ce,be){for(var Ne=-1,Be=ce==null?0:ce.length,lt=0,gt=[];++Ne<Be;){var vt=ce[Ne];be(vt,Ne,ce)&&(gt[lt++]=vt)}return gt}function ji(ce,be){var Ne=ce==null?0:ce.length;return!!Ne&&Ts(ce,be,0)>-1}function Cm(ce,be,Ne){for(var Be=-1,lt=ce==null?0:ce.length;++Be<lt;)if(Ne(be,ce[Be]))return!0;return!1}function Lr(ce,be){for(var Ne=-1,Be=ce==null?0:ce.length,lt=Array(Be);++Ne<Be;)lt[Ne]=be(ce[Ne],Ne,ce);return lt}function $l(ce,be){for(var Ne=-1,Be=be.length,lt=ce.length;++Ne<Be;)ce[lt+Ne]=be[Ne];return ce}function Iu(ce,be,Ne,Be){var lt=-1,gt=ce==null?0:ce.length;for(Be&&gt&&(Ne=ce[++lt]);++lt<gt;)Ne=be(Ne,ce[lt],lt,ce);return Ne}function ei(ce,be,Ne,Be){var lt=ce==null?0:ce.length;for(Be&&lt&&(Ne=ce[--lt]);lt--;)Ne=be(Ne,ce[lt],lt,ce);return Ne}function gr(ce,be){for(var Ne=-1,Be=ce==null?0:ce.length;++Ne<Be;)if(be(ce[Ne],Ne,ce))return!0;return!1}var qP=S1("length");function hi(ce){return ce.split("")}function jf(ce){return ce.match(ye)||[]}function Df(ce,be,Ne){var Be;return Ne(ce,function(lt,gt,vt){if(be(lt,gt,vt))return Be=gt,!1}),Be}function b1(ce,be,Ne,Be){for(var lt=ce.length,gt=Ne+(Be?1:-1);Be?gt--:++gt<lt;)if(be(ce[gt],gt,ce))return gt;return-1}function Ts(ce,be,Ne){return be===be?v(ce,be,Ne):b1(ce,Kb,Ne)}function Gb(ce,be,Ne,Be){for(var lt=Ne-1,gt=ce.length;++lt<gt;)if(Be(ce[lt],be))return lt;return-1}function Kb(ce){return ce!==ce}function w1(ce,be){var Ne=ce==null?0:ce.length;return Ne?km(ce,be)/Ne:pe}function S1(ce){return function(be){return be==null?r:be[ce]}}function E1(ce){return function(be){return ce==null?r:ce[be]}}function fk(ce,be,Ne,Be,lt){return lt(ce,function(gt,vt,Zt){Ne=Be?(Be=!1,gt):be(Ne,gt,vt,Zt)}),Ne}function yp(ce,be){var Ne=ce.length;for(ce.sort(be);Ne--;)ce[Ne]=ce[Ne].value;return ce}function km(ce,be){for(var Ne,Be=-1,lt=ce.length;++Be<lt;){var gt=be(ce[Be]);gt!==r&&(Ne=Ne===r?gt:Ne+gt)}return Ne}function Xb(ce,be){for(var Ne=-1,Be=Array(ce);++Ne<ce;)Be[Ne]=be(Ne);return Be}function _m(ce,be){return Lr(be,function(Ne){return[Ne,ce[Ne]]})}function hk(ce){return ce&&ce.slice(0,R(ce)+1).replace(_r,"")}function ea(ce){return function(be){return ce(be)}}function bp(ce,be){return Lr(be,function(Ne){return ce[Ne]})}function ns(ce,be){return ce.has(be)}function Yb(ce,be){for(var Ne=-1,Be=ce.length;++Ne<Be&&Ts(be,ce[Ne],0)>-1;);return Ne}function zl(ce,be){for(var Ne=ce.length;Ne--&&Ts(be,ce[Ne],0)>-1;);return Ne}function GP(ce,be){for(var Ne=ce.length,Be=0;Ne--;)ce[Ne]===be&&++Be;return Be}var Qb=E1(ym),KP=E1(bm);function pk(ce){return"\\"+wm[ce]}function Nc(ce,be){return ce==null?r:ce[be]}function wp(ce){return WP.test(ce)}function Jb(ce){return Wb.test(ce)}function Nm(ce){for(var be,Ne=[];!(be=ce.next()).done;)Ne.push(be.value);return Ne}function kn(ce){var be=-1,Ne=Array(ce.size);return ce.forEach(function(Be,lt){Ne[++be]=[lt,Be]}),Ne}function Am(ce,be){return function(Ne){return ce(be(Ne))}}function se(ce,be){for(var Ne=-1,Be=ce.length,lt=0,gt=[];++Ne<Be;){var vt=ce[Ne];(vt===be||vt===d)&&(ce[Ne]=d,gt[lt++]=Ne)}return gt}function h(ce){var be=-1,Ne=Array(ce.size);return ce.forEach(function(Be){Ne[++be]=Be}),Ne}function g(ce){var be=-1,Ne=Array(ce.size);return ce.forEach(function(Be){Ne[++be]=[Be,Be]}),Ne}function v(ce,be,Ne){for(var Be=Ne-1,lt=ce.length;++Be<lt;)if(ce[Be]===be)return Be;return-1}function E(ce,be,Ne){for(var Be=Ne+1;Be--;)if(ce[Be]===be)return Be;return Be}function k(ce){return wp(ce)?U(ce):qP(ce)}function T(ce){return wp(ce)?Z(ce):hi(ce)}function R(ce){for(var be=ce.length;be--&&Jt.test(ce.charAt(be)););return be}var F=E1(sk);function U(ce){for(var be=Wr.lastIndex=0;Wr.test(ce);)++be;return be}function Z(ce){return ce.match(Wr)||[]}function oe(ce){return ce.match(Ha)||[]}var xe=function ce(be){be=be==null?Na:Oe.defaults(Na.Object(),be,Oe.pick(Na,ak));var Ne=be.Array,Be=be.Date,lt=be.Error,gt=be.Function,vt=be.Math,Zt=be.Object,Br=be.RegExp,Xs=be.String,Di=be.TypeError,Wa=Ne.prototype,ti=gt.prototype,Mi=Zt.prototype,is=be["__core-js_shared__"],Ou=ti.toString,An=Mi.hasOwnProperty,XP=0,mk=function(){var w=/[^.]+$/.exec(is&&is.keys&&is.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""}(),gk=Mi.toString,sye=Ou.call(Zt),oye=Na._,lye=Br("^"+Ou.call(An).replace(tr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xk=lk?be.Buffer:r,Sp=be.Symbol,vk=be.Uint8Array,Cz=xk?xk.allocUnsafe:r,yk=Am(Zt.getPrototypeOf,Zt),kz=Zt.create,_z=Mi.propertyIsEnumerable,bk=Wa.splice,Nz=Sp?Sp.isConcatSpreadable:r,Zb=Sp?Sp.iterator:r,Tm=Sp?Sp.toStringTag:r,wk=function(){try{var w=jm(Zt,"defineProperty");return w({},"",{}),w}catch{}}(),cye=be.clearTimeout!==Na.clearTimeout&&be.clearTimeout,uye=Be&&Be.now!==Na.Date.now&&Be.now,dye=be.setTimeout!==Na.setTimeout&&be.setTimeout,Sk=vt.ceil,Ek=vt.floor,YP=Zt.getOwnPropertySymbols,fye=xk?xk.isBuffer:r,Az=be.isFinite,hye=Wa.join,pye=Am(Zt.keys,Zt),Va=vt.max,Ys=vt.min,mye=Be.now,gye=be.parseInt,Tz=vt.random,xye=Wa.reverse,QP=jm(be,"DataView"),ew=jm(be,"Map"),JP=jm(be,"Promise"),C1=jm(be,"Set"),tw=jm(be,"WeakMap"),rw=jm(Zt,"create"),Ck=tw&&new tw,k1={},vye=Dm(QP),yye=Dm(ew),bye=Dm(JP),wye=Dm(C1),Sye=Dm(tw),kk=Sp?Sp.prototype:r,nw=kk?kk.valueOf:r,Iz=kk?kk.toString:r;function ve(w){if(ta(w)&&!qr(w)&&!(w instanceof Tn)){if(w instanceof Ac)return w;if(An.call(w,"__wrapped__"))return OH(w)}return new Ac(w)}var _1=function(){function w(){}return function(N){if(!Wi(N))return{};if(kz)return kz(N);w.prototype=N;var M=new w;return w.prototype=r,M}}();function _k(){}function Ac(w,N){this.__wrapped__=w,this.__actions__=[],this.__chain__=!!N,this.__index__=0,this.__values__=r}ve.templateSettings={escape:We,evaluate:Je,interpolate:rt,variable:"",imports:{_:ve}},ve.prototype=_k.prototype,ve.prototype.constructor=ve,Ac.prototype=_1(_k.prototype),Ac.prototype.constructor=Ac;function Tn(w){this.__wrapped__=w,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_e,this.__views__=[]}function Eye(){var w=new Tn(this.__wrapped__);return w.__actions__=sl(this.__actions__),w.__dir__=this.__dir__,w.__filtered__=this.__filtered__,w.__iteratees__=sl(this.__iteratees__),w.__takeCount__=this.__takeCount__,w.__views__=sl(this.__views__),w}function Cye(){if(this.__filtered__){var w=new Tn(this);w.__dir__=-1,w.__filtered__=!0}else w=this.clone(),w.__dir__*=-1;return w}function kye(){var w=this.__wrapped__.value(),N=this.__dir__,M=qr(w),K=N<0,le=M?w.length:0,Ce=Fbe(0,le,this.__views__),Me=Ce.start,Ue=Ce.end,Ke=Ue-Me,yt=K?Ue:Me-1,bt=this.__iteratees__,Nt=bt.length,Ht=0,nr=Ys(Ke,this.__takeCount__);if(!M||!K&&le==Ke&&nr==Ke)return eH(w,this.__actions__);var Or=[];e:for(;Ke--&&Ht<nr;){yt+=N;for(var cn=-1,Pr=w[yt];++cn<Nt;){var _n=bt[cn],On=_n.iteratee,Vl=_n.type,Ro=On(Pr);if(Vl==W)Pr=Ro;else if(!Ro){if(Vl==X)continue e;break e}}Or[Ht++]=Pr}return Or}Tn.prototype=_1(_k.prototype),Tn.prototype.constructor=Tn;function Im(w){var N=-1,M=w==null?0:w.length;for(this.clear();++N<M;){var K=w[N];this.set(K[0],K[1])}}function _ye(){this.__data__=rw?rw(null):{},this.size=0}function Nye(w){var N=this.has(w)&&delete this.__data__[w];return this.size-=N?1:0,N}function Aye(w){var N=this.__data__;if(rw){var M=N[w];return M===l?r:M}return An.call(N,w)?N[w]:r}function Tye(w){var N=this.__data__;return rw?N[w]!==r:An.call(N,w)}function Iye(w,N){var M=this.__data__;return this.size+=this.has(w)?0:1,M[w]=rw&&N===r?l:N,this}Im.prototype.clear=_ye,Im.prototype.delete=Nye,Im.prototype.get=Aye,Im.prototype.has=Tye,Im.prototype.set=Iye;function Mf(w){var N=-1,M=w==null?0:w.length;for(this.clear();++N<M;){var K=w[N];this.set(K[0],K[1])}}function Oye(){this.__data__=[],this.size=0}function Pye(w){var N=this.__data__,M=Nk(N,w);if(M<0)return!1;var K=N.length-1;return M==K?N.pop():bk.call(N,M,1),--this.size,!0}function Rye(w){var N=this.__data__,M=Nk(N,w);return M<0?r:N[M][1]}function jye(w){return Nk(this.__data__,w)>-1}function Dye(w,N){var M=this.__data__,K=Nk(M,w);return K<0?(++this.size,M.push([w,N])):M[K][1]=N,this}Mf.prototype.clear=Oye,Mf.prototype.delete=Pye,Mf.prototype.get=Rye,Mf.prototype.has=jye,Mf.prototype.set=Dye;function Ff(w){var N=-1,M=w==null?0:w.length;for(this.clear();++N<M;){var K=w[N];this.set(K[0],K[1])}}function Mye(){this.size=0,this.__data__={hash:new Im,map:new(ew||Mf),string:new Im}}function Fye(w){var N=Bk(this,w).delete(w);return this.size-=N?1:0,N}function Lye(w){return Bk(this,w).get(w)}function Bye(w){return Bk(this,w).has(w)}function Uye(w,N){var M=Bk(this,w),K=M.size;return M.set(w,N),this.size+=M.size==K?0:1,this}Ff.prototype.clear=Mye,Ff.prototype.delete=Fye,Ff.prototype.get=Lye,Ff.prototype.has=Bye,Ff.prototype.set=Uye;function Om(w){var N=-1,M=w==null?0:w.length;for(this.__data__=new Ff;++N<M;)this.add(w[N])}function $ye(w){return this.__data__.set(w,l),this}function zye(w){return this.__data__.has(w)}Om.prototype.add=Om.prototype.push=$ye,Om.prototype.has=zye;function Pu(w){var N=this.__data__=new Mf(w);this.size=N.size}function Hye(){this.__data__=new Mf,this.size=0}function Wye(w){var N=this.__data__,M=N.delete(w);return this.size=N.size,M}function Vye(w){return this.__data__.get(w)}function qye(w){return this.__data__.has(w)}function Gye(w,N){var M=this.__data__;if(M instanceof Mf){var K=M.__data__;if(!ew||K.length<i-1)return K.push([w,N]),this.size=++M.size,this;M=this.__data__=new Ff(K)}return M.set(w,N),this.size=M.size,this}Pu.prototype.clear=Hye,Pu.prototype.delete=Wye,Pu.prototype.get=Vye,Pu.prototype.has=qye,Pu.prototype.set=Gye;function Oz(w,N){var M=qr(w),K=!M&&Mm(w),le=!M&&!K&&Np(w),Ce=!M&&!K&&!le&&I1(w),Me=M||K||le||Ce,Ue=Me?Xb(w.length,Xs):[],Ke=Ue.length;for(var yt in w)(N||An.call(w,yt))&&!(Me&&(yt=="length"||le&&(yt=="offset"||yt=="parent")||Ce&&(yt=="buffer"||yt=="byteLength"||yt=="byteOffset")||$f(yt,Ke)))&&Ue.push(yt);return Ue}function Pz(w){var N=w.length;return N?w[cR(0,N-1)]:r}function Kye(w,N){return Uk(sl(w),Pm(N,0,w.length))}function Xye(w){return Uk(sl(w))}function ZP(w,N,M){(M!==r&&!Ru(w[N],M)||M===r&&!(N in w))&&Lf(w,N,M)}function iw(w,N,M){var K=w[N];(!(An.call(w,N)&&Ru(K,M))||M===r&&!(N in w))&&Lf(w,N,M)}function Nk(w,N){for(var M=w.length;M--;)if(Ru(w[M][0],N))return M;return-1}function Yye(w,N,M,K){return Ep(w,function(le,Ce,Me){N(K,le,M(le),Me)}),K}function Rz(w,N){return w&&Ad(N,as(N),w)}function Qye(w,N){return w&&Ad(N,ll(N),w)}function Lf(w,N,M){N=="__proto__"&&wk?wk(w,N,{configurable:!0,enumerable:!0,value:M,writable:!0}):w[N]=M}function eR(w,N){for(var M=-1,K=N.length,le=Ne(K),Ce=w==null;++M<K;)le[M]=Ce?r:jR(w,N[M]);return le}function Pm(w,N,M){return w===w&&(M!==r&&(w=w<=M?w:M),N!==r&&(w=w>=N?w:N)),w}function Tc(w,N,M,K,le,Ce){var Me,Ue=N&f,Ke=N&p,yt=N&m;if(M&&(Me=le?M(w,K,le,Ce):M(w)),Me!==r)return Me;if(!Wi(w))return w;var bt=qr(w);if(bt){if(Me=Bbe(w),!Ue)return sl(w,Me)}else{var Nt=Qs(w),Ht=Nt==V||Nt==Ae;if(Np(w))return nH(w,Ue);if(Nt==$e||Nt==q||Ht&&!le){if(Me=Ke||Ht?{}:SH(w),!Ue)return Ke?Abe(w,Qye(Me,w)):Nbe(w,Rz(Me,w))}else{if(!Ln[Nt])return le?w:{};Me=Ube(w,Nt,Ue)}}Ce||(Ce=new Pu);var nr=Ce.get(w);if(nr)return nr;Ce.set(w,Me),QH(w)?w.forEach(function(Pr){Me.add(Tc(Pr,N,M,Pr,w,Ce))}):XH(w)&&w.forEach(function(Pr,_n){Me.set(_n,Tc(Pr,N,M,_n,w,Ce))});var Or=yt?Ke?bR:yR:Ke?ll:as,cn=bt?r:Or(w);return al(cn||w,function(Pr,_n){cn&&(_n=Pr,Pr=w[_n]),iw(Me,_n,Tc(Pr,N,M,_n,w,Ce))}),Me}function Jye(w){var N=as(w);return function(M){return jz(M,w,N)}}function jz(w,N,M){var K=M.length;if(w==null)return!K;for(w=Zt(w);K--;){var le=M[K],Ce=N[le],Me=w[le];if(Me===r&&!(le in w)||!Ce(Me))return!1}return!0}function Dz(w,N,M){if(typeof w!="function")throw new Di(s);return dw(function(){w.apply(r,M)},N)}function aw(w,N,M,K){var le=-1,Ce=ji,Me=!0,Ue=w.length,Ke=[],yt=N.length;if(!Ue)return Ke;M&&(N=Lr(N,ea(M))),K?(Ce=Cm,Me=!1):N.length>=i&&(Ce=ns,Me=!1,N=new Om(N));e:for(;++le<Ue;){var bt=w[le],Nt=M==null?bt:M(bt);if(bt=K||bt!==0?bt:0,Me&&Nt===Nt){for(var Ht=yt;Ht--;)if(N[Ht]===Nt)continue e;Ke.push(bt)}else Ce(N,Nt,K)||Ke.push(bt)}return Ke}var Ep=lH(Nd),Mz=lH(rR,!0);function Zye(w,N){var M=!0;return Ep(w,function(K,le,Ce){return M=!!N(K,le,Ce),M}),M}function Ak(w,N,M){for(var K=-1,le=w.length;++K<le;){var Ce=w[K],Me=N(Ce);if(Me!=null&&(Ue===r?Me===Me&&!Wl(Me):M(Me,Ue)))var Ue=Me,Ke=Ce}return Ke}function ebe(w,N,M,K){var le=w.length;for(M=an(M),M<0&&(M=-M>le?0:le+M),K=K===r||K>le?le:an(K),K<0&&(K+=le),K=M>K?0:ZH(K);M<K;)w[M++]=N;return w}function Fz(w,N){var M=[];return Ep(w,function(K,le,Ce){N(K,le,Ce)&&M.push(K)}),M}function Is(w,N,M,K,le){var Ce=-1,Me=w.length;for(M||(M=zbe),le||(le=[]);++Ce<Me;){var Ue=w[Ce];N>0&&M(Ue)?N>1?Is(Ue,N-1,M,K,le):$l(le,Ue):K||(le[le.length]=Ue)}return le}var tR=cH(),Lz=cH(!0);function Nd(w,N){return w&&tR(w,N,as)}function rR(w,N){return w&&Lz(w,N,as)}function Tk(w,N){return _c(N,function(M){return zf(w[M])})}function Rm(w,N){N=kp(N,w);for(var M=0,K=N.length;w!=null&&M<K;)w=w[Td(N[M++])];return M&&M==K?w:r}function Bz(w,N,M){var K=N(w);return qr(w)?K:$l(K,M(w))}function Oo(w){return w==null?w===r?ct:De:Tm&&Tm in Zt(w)?Mbe(w):Xbe(w)}function nR(w,N){return w>N}function tbe(w,N){return w!=null&&An.call(w,N)}function rbe(w,N){return w!=null&&N in Zt(w)}function nbe(w,N,M){return w>=Ys(N,M)&&w<Va(N,M)}function iR(w,N,M){for(var K=M?Cm:ji,le=w[0].length,Ce=w.length,Me=Ce,Ue=Ne(Ce),Ke=1/0,yt=[];Me--;){var bt=w[Me];Me&&N&&(bt=Lr(bt,ea(N))),Ke=Ys(bt.length,Ke),Ue[Me]=!M&&(N||le>=120&&bt.length>=120)?new Om(Me&&bt):r}bt=w[0];var Nt=-1,Ht=Ue[0];e:for(;++Nt<le&&yt.length<Ke;){var nr=bt[Nt],Or=N?N(nr):nr;if(nr=M||nr!==0?nr:0,!(Ht?ns(Ht,Or):K(yt,Or,M))){for(Me=Ce;--Me;){var cn=Ue[Me];if(!(cn?ns(cn,Or):K(w[Me],Or,M)))continue e}Ht&&Ht.push(Or),yt.push(nr)}}return yt}function ibe(w,N,M,K){return Nd(w,function(le,Ce,Me){N(K,M(le),Ce,Me)}),K}function sw(w,N,M){N=kp(N,w),w=_H(w,N);var K=w==null?w:w[Td(Oc(N))];return K==null?r:rs(K,w,M)}function Uz(w){return ta(w)&&Oo(w)==q}function abe(w){return ta(w)&&Oo(w)==dr}function sbe(w){return ta(w)&&Oo(w)==ae}function ow(w,N,M,K,le){return w===N?!0:w==null||N==null||!ta(w)&&!ta(N)?w!==w&&N!==N:obe(w,N,M,K,ow,le)}function obe(w,N,M,K,le,Ce){var Me=qr(w),Ue=qr(N),Ke=Me?ne:Qs(w),yt=Ue?ne:Qs(N);Ke=Ke==q?$e:Ke,yt=yt==q?$e:yt;var bt=Ke==$e,Nt=yt==$e,Ht=Ke==yt;if(Ht&&Np(w)){if(!Np(N))return!1;Me=!0,bt=!1}if(Ht&&!bt)return Ce||(Ce=new Pu),Me||I1(w)?yH(w,N,M,K,le,Ce):jbe(w,N,Ke,M,K,le,Ce);if(!(M&x)){var nr=bt&&An.call(w,"__wrapped__"),Or=Nt&&An.call(N,"__wrapped__");if(nr||Or){var cn=nr?w.value():w,Pr=Or?N.value():N;return Ce||(Ce=new Pu),le(cn,Pr,M,K,Ce)}}return Ht?(Ce||(Ce=new Pu),Dbe(w,N,M,K,le,Ce)):!1}function lbe(w){return ta(w)&&Qs(w)==Pe}function aR(w,N,M,K){var le=M.length,Ce=le,Me=!K;if(w==null)return!Ce;for(w=Zt(w);le--;){var Ue=M[le];if(Me&&Ue[2]?Ue[1]!==w[Ue[0]]:!(Ue[0]in w))return!1}for(;++le<Ce;){Ue=M[le];var Ke=Ue[0],yt=w[Ke],bt=Ue[1];if(Me&&Ue[2]){if(yt===r&&!(Ke in w))return!1}else{var Nt=new Pu;if(K)var Ht=K(yt,bt,Ke,w,N,Nt);if(!(Ht===r?ow(bt,yt,x|y,K,Nt):Ht))return!1}}return!0}function $z(w){if(!Wi(w)||Wbe(w))return!1;var N=zf(w)?lye:Ye;return N.test(Dm(w))}function cbe(w){return ta(w)&&Oo(w)==kt}function ube(w){return ta(w)&&Qs(w)==ht}function dbe(w){return ta(w)&&qk(w.length)&&!!fi[Oo(w)]}function zz(w){return typeof w=="function"?w:w==null?cl:typeof w=="object"?qr(w)?Vz(w[0],w[1]):Wz(w):uW(w)}function sR(w){if(!uw(w))return pye(w);var N=[];for(var M in Zt(w))An.call(w,M)&&M!="constructor"&&N.push(M);return N}function fbe(w){if(!Wi(w))return Kbe(w);var N=uw(w),M=[];for(var K in w)K=="constructor"&&(N||!An.call(w,K))||M.push(K);return M}function oR(w,N){return w<N}function Hz(w,N){var M=-1,K=ol(w)?Ne(w.length):[];return Ep(w,function(le,Ce,Me){K[++M]=N(le,Ce,Me)}),K}function Wz(w){var N=SR(w);return N.length==1&&N[0][2]?CH(N[0][0],N[0][1]):function(M){return M===w||aR(M,w,N)}}function Vz(w,N){return CR(w)&&EH(N)?CH(Td(w),N):function(M){var K=jR(M,w);return K===r&&K===N?DR(M,w):ow(N,K,x|y)}}function Ik(w,N,M,K,le){w!==N&&tR(N,function(Ce,Me){if(le||(le=new Pu),Wi(Ce))hbe(w,N,Me,M,Ik,K,le);else{var Ue=K?K(_R(w,Me),Ce,Me+"",w,N,le):r;Ue===r&&(Ue=Ce),ZP(w,Me,Ue)}},ll)}function hbe(w,N,M,K,le,Ce,Me){var Ue=_R(w,M),Ke=_R(N,M),yt=Me.get(Ke);if(yt){ZP(w,M,yt);return}var bt=Ce?Ce(Ue,Ke,M+"",w,N,Me):r,Nt=bt===r;if(Nt){var Ht=qr(Ke),nr=!Ht&&Np(Ke),Or=!Ht&&!nr&&I1(Ke);bt=Ke,Ht||nr||Or?qr(Ue)?bt=Ue:ma(Ue)?bt=sl(Ue):nr?(Nt=!1,bt=nH(Ke,!0)):Or?(Nt=!1,bt=iH(Ke,!0)):bt=[]:fw(Ke)||Mm(Ke)?(bt=Ue,Mm(Ue)?bt=eW(Ue):(!Wi(Ue)||zf(Ue))&&(bt=SH(Ke))):Nt=!1}Nt&&(Me.set(Ke,bt),le(bt,Ke,K,Ce,Me),Me.delete(Ke)),ZP(w,M,bt)}function qz(w,N){var M=w.length;if(M)return N+=N<0?M:0,$f(N,M)?w[N]:r}function Gz(w,N,M){N.length?N=Lr(N,function(Ce){return qr(Ce)?function(Me){return Rm(Me,Ce.length===1?Ce[0]:Ce)}:Ce}):N=[cl];var K=-1;N=Lr(N,ea(Ar()));var le=Hz(w,function(Ce,Me,Ue){var Ke=Lr(N,function(yt){return yt(Ce)});return{criteria:Ke,index:++K,value:Ce}});return yp(le,function(Ce,Me){return _be(Ce,Me,M)})}function pbe(w,N){return Kz(w,N,function(M,K){return DR(w,K)})}function Kz(w,N,M){for(var K=-1,le=N.length,Ce={};++K<le;){var Me=N[K],Ue=Rm(w,Me);M(Ue,Me)&&lw(Ce,kp(Me,w),Ue)}return Ce}function mbe(w){return function(N){return Rm(N,w)}}function lR(w,N,M,K){var le=K?Gb:Ts,Ce=-1,Me=N.length,Ue=w;for(w===N&&(N=sl(N)),M&&(Ue=Lr(w,ea(M)));++Ce<Me;)for(var Ke=0,yt=N[Ce],bt=M?M(yt):yt;(Ke=le(Ue,bt,Ke,K))>-1;)Ue!==w&&bk.call(Ue,Ke,1),bk.call(w,Ke,1);return w}function Xz(w,N){for(var M=w?N.length:0,K=M-1;M--;){var le=N[M];if(M==K||le!==Ce){var Ce=le;$f(le)?bk.call(w,le,1):fR(w,le)}}return w}function cR(w,N){return w+Ek(Tz()*(N-w+1))}function gbe(w,N,M,K){for(var le=-1,Ce=Va(Sk((N-w)/(M||1)),0),Me=Ne(Ce);Ce--;)Me[K?Ce:++le]=w,w+=M;return Me}function uR(w,N){var M="";if(!w||N<1||N>J)return M;do N%2&&(M+=w),N=Ek(N/2),N&&(w+=w);while(N);return M}function mn(w,N){return NR(kH(w,N,cl),w+"")}function xbe(w){return Pz(O1(w))}function vbe(w,N){var M=O1(w);return Uk(M,Pm(N,0,M.length))}function lw(w,N,M,K){if(!Wi(w))return w;N=kp(N,w);for(var le=-1,Ce=N.length,Me=Ce-1,Ue=w;Ue!=null&&++le<Ce;){var Ke=Td(N[le]),yt=M;if(Ke==="__proto__"||Ke==="constructor"||Ke==="prototype")return w;if(le!=Me){var bt=Ue[Ke];yt=K?K(bt,Ke,Ue):r,yt===r&&(yt=Wi(bt)?bt:$f(N[le+1])?[]:{})}iw(Ue,Ke,yt),Ue=Ue[Ke]}return w}var Yz=Ck?function(w,N){return Ck.set(w,N),w}:cl,ybe=wk?function(w,N){return wk(w,"toString",{configurable:!0,enumerable:!1,value:FR(N),writable:!0})}:cl;function bbe(w){return Uk(O1(w))}function Ic(w,N,M){var K=-1,le=w.length;N<0&&(N=-N>le?0:le+N),M=M>le?le:M,M<0&&(M+=le),le=N>M?0:M-N>>>0,N>>>=0;for(var Ce=Ne(le);++K<le;)Ce[K]=w[K+N];return Ce}function wbe(w,N){var M;return Ep(w,function(K,le,Ce){return M=N(K,le,Ce),!M}),!!M}function Ok(w,N,M){var K=0,le=w==null?K:w.length;if(typeof N=="number"&&N===N&&le<=de){for(;K<le;){var Ce=K+le>>>1,Me=w[Ce];Me!==null&&!Wl(Me)&&(M?Me<=N:Me<N)?K=Ce+1:le=Ce}return le}return dR(w,N,cl,M)}function dR(w,N,M,K){var le=0,Ce=w==null?0:w.length;if(Ce===0)return 0;N=M(N);for(var Me=N!==N,Ue=N===null,Ke=Wl(N),yt=N===r;le<Ce;){var bt=Ek((le+Ce)/2),Nt=M(w[bt]),Ht=Nt!==r,nr=Nt===null,Or=Nt===Nt,cn=Wl(Nt);if(Me)var Pr=K||Or;else yt?Pr=Or&&(K||Ht):Ue?Pr=Or&&Ht&&(K||!nr):Ke?Pr=Or&&Ht&&!nr&&(K||!cn):nr||cn?Pr=!1:Pr=K?Nt<=N:Nt<N;Pr?le=bt+1:Ce=bt}return Ys(Ce,ee)}function Qz(w,N){for(var M=-1,K=w.length,le=0,Ce=[];++M<K;){var Me=w[M],Ue=N?N(Me):Me;if(!M||!Ru(Ue,Ke)){var Ke=Ue;Ce[le++]=Me===0?0:Me}}return Ce}function Jz(w){return typeof w=="number"?w:Wl(w)?pe:+w}function Hl(w){if(typeof w=="string")return w;if(qr(w))return Lr(w,Hl)+"";if(Wl(w))return Iz?Iz.call(w):"";var N=w+"";return N=="0"&&1/w==-te?"-0":N}function Cp(w,N,M){var K=-1,le=ji,Ce=w.length,Me=!0,Ue=[],Ke=Ue;if(M)Me=!1,le=Cm;else if(Ce>=i){var yt=N?null:Pbe(w);if(yt)return h(yt);Me=!1,le=ns,Ke=new Om}else Ke=N?[]:Ue;e:for(;++K<Ce;){var bt=w[K],Nt=N?N(bt):bt;if(bt=M||bt!==0?bt:0,Me&&Nt===Nt){for(var Ht=Ke.length;Ht--;)if(Ke[Ht]===Nt)continue e;N&&Ke.push(Nt),Ue.push(bt)}else le(Ke,Nt,M)||(Ke!==Ue&&Ke.push(Nt),Ue.push(bt))}return Ue}function fR(w,N){return N=kp(N,w),w=_H(w,N),w==null||delete w[Td(Oc(N))]}function Zz(w,N,M,K){return lw(w,N,M(Rm(w,N)),K)}function Pk(w,N,M,K){for(var le=w.length,Ce=K?le:-1;(K?Ce--:++Ce<le)&&N(w[Ce],Ce,w););return M?Ic(w,K?0:Ce,K?Ce+1:le):Ic(w,K?Ce+1:0,K?le:Ce)}function eH(w,N){var M=w;return M instanceof Tn&&(M=M.value()),Iu(N,function(K,le){return le.func.apply(le.thisArg,$l([K],le.args))},M)}function hR(w,N,M){var K=w.length;if(K<2)return K?Cp(w[0]):[];for(var le=-1,Ce=Ne(K);++le<K;)for(var Me=w[le],Ue=-1;++Ue<K;)Ue!=le&&(Ce[le]=aw(Ce[le]||Me,w[Ue],N,M));return Cp(Is(Ce,1),N,M)}function tH(w,N,M){for(var K=-1,le=w.length,Ce=N.length,Me={};++K<le;){var Ue=K<Ce?N[K]:r;M(Me,w[K],Ue)}return Me}function pR(w){return ma(w)?w:[]}function mR(w){return typeof w=="function"?w:cl}function kp(w,N){return qr(w)?w:CR(w,N)?[w]:IH(Yn(w))}var Sbe=mn;function _p(w,N,M){var K=w.length;return M=M===r?K:M,!N&&M>=K?w:Ic(w,N,M)}var rH=cye||function(w){return Na.clearTimeout(w)};function nH(w,N){if(N)return w.slice();var M=w.length,K=Cz?Cz(M):new w.constructor(M);return w.copy(K),K}function gR(w){var N=new w.constructor(w.byteLength);return new vk(N).set(new vk(w)),N}function Ebe(w,N){var M=N?gR(w.buffer):w.buffer;return new w.constructor(M,w.byteOffset,w.byteLength)}function Cbe(w){var N=new w.constructor(w.source,Fe.exec(w));return N.lastIndex=w.lastIndex,N}function kbe(w){return nw?Zt(nw.call(w)):{}}function iH(w,N){var M=N?gR(w.buffer):w.buffer;return new w.constructor(M,w.byteOffset,w.length)}function aH(w,N){if(w!==N){var M=w!==r,K=w===null,le=w===w,Ce=Wl(w),Me=N!==r,Ue=N===null,Ke=N===N,yt=Wl(N);if(!Ue&&!yt&&!Ce&&w>N||Ce&&Me&&Ke&&!Ue&&!yt||K&&Me&&Ke||!M&&Ke||!le)return 1;if(!K&&!Ce&&!yt&&w<N||yt&&M&&le&&!K&&!Ce||Ue&&M&&le||!Me&&le||!Ke)return-1}return 0}function _be(w,N,M){for(var K=-1,le=w.criteria,Ce=N.criteria,Me=le.length,Ue=M.length;++K<Me;){var Ke=aH(le[K],Ce[K]);if(Ke){if(K>=Ue)return Ke;var yt=M[K];return Ke*(yt=="desc"?-1:1)}}return w.index-N.index}function sH(w,N,M,K){for(var le=-1,Ce=w.length,Me=M.length,Ue=-1,Ke=N.length,yt=Va(Ce-Me,0),bt=Ne(Ke+yt),Nt=!K;++Ue<Ke;)bt[Ue]=N[Ue];for(;++le<Me;)(Nt||le<Ce)&&(bt[M[le]]=w[le]);for(;yt--;)bt[Ue++]=w[le++];return bt}function oH(w,N,M,K){for(var le=-1,Ce=w.length,Me=-1,Ue=M.length,Ke=-1,yt=N.length,bt=Va(Ce-Ue,0),Nt=Ne(bt+yt),Ht=!K;++le<bt;)Nt[le]=w[le];for(var nr=le;++Ke<yt;)Nt[nr+Ke]=N[Ke];for(;++Me<Ue;)(Ht||le<Ce)&&(Nt[nr+M[Me]]=w[le++]);return Nt}function sl(w,N){var M=-1,K=w.length;for(N||(N=Ne(K));++M<K;)N[M]=w[M];return N}function Ad(w,N,M,K){var le=!M;M||(M={});for(var Ce=-1,Me=N.length;++Ce<Me;){var Ue=N[Ce],Ke=K?K(M[Ue],w[Ue],Ue,M,w):r;Ke===r&&(Ke=w[Ue]),le?Lf(M,Ue,Ke):iw(M,Ue,Ke)}return M}function Nbe(w,N){return Ad(w,ER(w),N)}function Abe(w,N){return Ad(w,bH(w),N)}function Rk(w,N){return function(M,K){var le=qr(M)?uk:Yye,Ce=N?N():{};return le(M,w,Ar(K,2),Ce)}}function N1(w){return mn(function(N,M){var K=-1,le=M.length,Ce=le>1?M[le-1]:r,Me=le>2?M[2]:r;for(Ce=w.length>3&&typeof Ce=="function"?(le--,Ce):r,Me&&Po(M[0],M[1],Me)&&(Ce=le<3?r:Ce,le=1),N=Zt(N);++K<le;){var Ue=M[K];Ue&&w(N,Ue,K,Ce)}return N})}function lH(w,N){return function(M,K){if(M==null)return M;if(!ol(M))return w(M,K);for(var le=M.length,Ce=N?le:-1,Me=Zt(M);(N?Ce--:++Ce<le)&&K(Me[Ce],Ce,Me)!==!1;);return M}}function cH(w){return function(N,M,K){for(var le=-1,Ce=Zt(N),Me=K(N),Ue=Me.length;Ue--;){var Ke=Me[w?Ue:++le];if(M(Ce[Ke],Ke,Ce)===!1)break}return N}}function Tbe(w,N,M){var K=N&b,le=cw(w);function Ce(){var Me=this&&this!==Na&&this instanceof Ce?le:w;return Me.apply(K?M:this,arguments)}return Ce}function uH(w){return function(N){N=Yn(N);var M=wp(N)?T(N):r,K=M?M[0]:N.charAt(0),le=M?_p(M,1).join(""):N.slice(1);return K[w]()+le}}function A1(w){return function(N){return Iu(lW(oW(N).replace(Nr,"")),w,"")}}function cw(w){return function(){var N=arguments;switch(N.length){case 0:return new w;case 1:return new w(N[0]);case 2:return new w(N[0],N[1]);case 3:return new w(N[0],N[1],N[2]);case 4:return new w(N[0],N[1],N[2],N[3]);case 5:return new w(N[0],N[1],N[2],N[3],N[4]);case 6:return new w(N[0],N[1],N[2],N[3],N[4],N[5]);case 7:return new w(N[0],N[1],N[2],N[3],N[4],N[5],N[6])}var M=_1(w.prototype),K=w.apply(M,N);return Wi(K)?K:M}}function Ibe(w,N,M){var K=cw(w);function le(){for(var Ce=arguments.length,Me=Ne(Ce),Ue=Ce,Ke=T1(le);Ue--;)Me[Ue]=arguments[Ue];var yt=Ce<3&&Me[0]!==Ke&&Me[Ce-1]!==Ke?[]:se(Me,Ke);if(Ce-=yt.length,Ce<M)return mH(w,N,jk,le.placeholder,r,Me,yt,r,r,M-Ce);var bt=this&&this!==Na&&this instanceof le?K:w;return rs(bt,this,Me)}return le}function dH(w){return function(N,M,K){var le=Zt(N);if(!ol(N)){var Ce=Ar(M,3);N=as(N),M=function(Ue){return Ce(le[Ue],Ue,le)}}var Me=w(N,M,K);return Me>-1?le[Ce?N[Me]:Me]:r}}function fH(w){return Uf(function(N){var M=N.length,K=M,le=Ac.prototype.thru;for(w&&N.reverse();K--;){var Ce=N[K];if(typeof Ce!="function")throw new Di(s);if(le&&!Me&&Lk(Ce)=="wrapper")var Me=new Ac([],!0)}for(K=Me?K:M;++K<M;){Ce=N[K];var Ue=Lk(Ce),Ke=Ue=="wrapper"?wR(Ce):r;Ke&&kR(Ke[0])&&Ke[1]==(O|C|j|D)&&!Ke[4].length&&Ke[9]==1?Me=Me[Lk(Ke[0])].apply(Me,Ke[3]):Me=Ce.length==1&&kR(Ce)?Me[Ue]():Me.thru(Ce)}return function(){var yt=arguments,bt=yt[0];if(Me&&yt.length==1&&qr(bt))return Me.plant(bt).value();for(var Nt=0,Ht=M?N[Nt].apply(this,yt):bt;++Nt<M;)Ht=N[Nt].call(this,Ht);return Ht}})}function jk(w,N,M,K,le,Ce,Me,Ue,Ke,yt){var bt=N&O,Nt=N&b,Ht=N&S,nr=N&(C|A),Or=N&L,cn=Ht?r:cw(w);function Pr(){for(var _n=arguments.length,On=Ne(_n),Vl=_n;Vl--;)On[Vl]=arguments[Vl];if(nr)var Ro=T1(Pr),ql=GP(On,Ro);if(K&&(On=sH(On,K,le,nr)),Ce&&(On=oH(On,Ce,Me,nr)),_n-=ql,nr&&_n<yt){var ga=se(On,Ro);return mH(w,N,jk,Pr.placeholder,M,On,ga,Ue,Ke,yt-_n)}var ju=Nt?M:this,Wf=Ht?ju[w]:w;return _n=On.length,Ue?On=Ybe(On,Ue):Or&&_n>1&&On.reverse(),bt&&Ke<_n&&(On.length=Ke),this&&this!==Na&&this instanceof Pr&&(Wf=cn||cw(Wf)),Wf.apply(ju,On)}return Pr}function hH(w,N){return function(M,K){return ibe(M,w,N(K),{})}}function Dk(w,N){return function(M,K){var le;if(M===r&&K===r)return N;if(M!==r&&(le=M),K!==r){if(le===r)return K;typeof M=="string"||typeof K=="string"?(M=Hl(M),K=Hl(K)):(M=Jz(M),K=Jz(K)),le=w(M,K)}return le}}function xR(w){return Uf(function(N){return N=Lr(N,ea(Ar())),mn(function(M){var K=this;return w(N,function(le){return rs(le,K,M)})})})}function Mk(w,N){N=N===r?" ":Hl(N);var M=N.length;if(M<2)return M?uR(N,w):N;var K=uR(N,Sk(w/k(N)));return wp(N)?_p(T(K),0,w).join(""):K.slice(0,w)}function Obe(w,N,M,K){var le=N&b,Ce=cw(w);function Me(){for(var Ue=-1,Ke=arguments.length,yt=-1,bt=K.length,Nt=Ne(bt+Ke),Ht=this&&this!==Na&&this instanceof Me?Ce:w;++yt<bt;)Nt[yt]=K[yt];for(;Ke--;)Nt[yt++]=arguments[++Ue];return rs(Ht,le?M:this,Nt)}return Me}function pH(w){return function(N,M,K){return K&&typeof K!="number"&&Po(N,M,K)&&(M=K=r),N=Hf(N),M===r?(M=N,N=0):M=Hf(M),K=K===r?N<M?1:-1:Hf(K),gbe(N,M,K,w)}}function Fk(w){return function(N,M){return typeof N=="string"&&typeof M=="string"||(N=Pc(N),M=Pc(M)),w(N,M)}}function mH(w,N,M,K,le,Ce,Me,Ue,Ke,yt){var bt=N&C,Nt=bt?Me:r,Ht=bt?r:Me,nr=bt?Ce:r,Or=bt?r:Ce;N|=bt?j:P,N&=~(bt?P:j),N&_||(N&=-4);var cn=[w,N,le,nr,Nt,Or,Ht,Ue,Ke,yt],Pr=M.apply(r,cn);return kR(w)&&NH(Pr,cn),Pr.placeholder=K,AH(Pr,w,N)}function vR(w){var N=vt[w];return function(M,K){if(M=Pc(M),K=K==null?0:Ys(an(K),292),K&&Az(M)){var le=(Yn(M)+"e").split("e"),Ce=N(le[0]+"e"+(+le[1]+K));return le=(Yn(Ce)+"e").split("e"),+(le[0]+"e"+(+le[1]-K))}return N(M)}}var Pbe=C1&&1/h(new C1([,-0]))[1]==te?function(w){return new C1(w)}:UR;function gH(w){return function(N){var M=Qs(N);return M==Pe?kn(N):M==ht?g(N):_m(N,w(N))}}function Bf(w,N,M,K,le,Ce,Me,Ue){var Ke=N&S;if(!Ke&&typeof w!="function")throw new Di(s);var yt=K?K.length:0;if(yt||(N&=-97,K=le=r),Me=Me===r?Me:Va(an(Me),0),Ue=Ue===r?Ue:an(Ue),yt-=le?le.length:0,N&P){var bt=K,Nt=le;K=le=r}var Ht=Ke?r:wR(w),nr=[w,N,M,K,le,bt,Nt,Ce,Me,Ue];if(Ht&&Gbe(nr,Ht),w=nr[0],N=nr[1],M=nr[2],K=nr[3],le=nr[4],Ue=nr[9]=nr[9]===r?Ke?0:w.length:Va(nr[9]-yt,0),!Ue&&N&(C|A)&&(N&=-25),!N||N==b)var Or=Tbe(w,N,M);else N==C||N==A?Or=Ibe(w,N,Ue):(N==j||N==(b|j))&&!le.length?Or=Obe(w,N,M,K):Or=jk.apply(r,nr);var cn=Ht?Yz:NH;return AH(cn(Or,nr),w,N)}function xH(w,N,M,K){return w===r||Ru(w,Mi[M])&&!An.call(K,M)?N:w}function vH(w,N,M,K,le,Ce){return Wi(w)&&Wi(N)&&(Ce.set(N,w),Ik(w,N,r,vH,Ce),Ce.delete(N)),w}function Rbe(w){return fw(w)?r:w}function yH(w,N,M,K,le,Ce){var Me=M&x,Ue=w.length,Ke=N.length;if(Ue!=Ke&&!(Me&&Ke>Ue))return!1;var yt=Ce.get(w),bt=Ce.get(N);if(yt&&bt)return yt==N&&bt==w;var Nt=-1,Ht=!0,nr=M&y?new Om:r;for(Ce.set(w,N),Ce.set(N,w);++Nt<Ue;){var Or=w[Nt],cn=N[Nt];if(K)var Pr=Me?K(cn,Or,Nt,N,w,Ce):K(Or,cn,Nt,w,N,Ce);if(Pr!==r){if(Pr)continue;Ht=!1;break}if(nr){if(!gr(N,function(_n,On){if(!ns(nr,On)&&(Or===_n||le(Or,_n,M,K,Ce)))return nr.push(On)})){Ht=!1;break}}else if(!(Or===cn||le(Or,cn,M,K,Ce))){Ht=!1;break}}return Ce.delete(w),Ce.delete(N),Ht}function jbe(w,N,M,K,le,Ce,Me){switch(M){case Gt:if(w.byteLength!=N.byteLength||w.byteOffset!=N.byteOffset)return!1;w=w.buffer,N=N.buffer;case dr:return!(w.byteLength!=N.byteLength||!Ce(new vk(w),new vk(N)));case re:case ae:case ze:return Ru(+w,+N);case Ee:return w.name==N.name&&w.message==N.message;case kt:case jr:return w==N+"";case Pe:var Ue=kn;case ht:var Ke=K&x;if(Ue||(Ue=h),w.size!=N.size&&!Ke)return!1;var yt=Me.get(w);if(yt)return yt==N;K|=y,Me.set(w,N);var bt=yH(Ue(w),Ue(N),K,le,Ce,Me);return Me.delete(w),bt;case er:if(nw)return nw.call(w)==nw.call(N)}return!1}function Dbe(w,N,M,K,le,Ce){var Me=M&x,Ue=yR(w),Ke=Ue.length,yt=yR(N),bt=yt.length;if(Ke!=bt&&!Me)return!1;for(var Nt=Ke;Nt--;){var Ht=Ue[Nt];if(!(Me?Ht in N:An.call(N,Ht)))return!1}var nr=Ce.get(w),Or=Ce.get(N);if(nr&&Or)return nr==N&&Or==w;var cn=!0;Ce.set(w,N),Ce.set(N,w);for(var Pr=Me;++Nt<Ke;){Ht=Ue[Nt];var _n=w[Ht],On=N[Ht];if(K)var Vl=Me?K(On,_n,Ht,N,w,Ce):K(_n,On,Ht,w,N,Ce);if(!(Vl===r?_n===On||le(_n,On,M,K,Ce):Vl)){cn=!1;break}Pr||(Pr=Ht=="constructor")}if(cn&&!Pr){var Ro=w.constructor,ql=N.constructor;Ro!=ql&&"constructor"in w&&"constructor"in N&&!(typeof Ro=="function"&&Ro instanceof Ro&&typeof ql=="function"&&ql instanceof ql)&&(cn=!1)}return Ce.delete(w),Ce.delete(N),cn}function Uf(w){return NR(kH(w,r,jH),w+"")}function yR(w){return Bz(w,as,ER)}function bR(w){return Bz(w,ll,bH)}var wR=Ck?function(w){return Ck.get(w)}:UR;function Lk(w){for(var N=w.name+"",M=k1[N],K=An.call(k1,N)?M.length:0;K--;){var le=M[K],Ce=le.func;if(Ce==null||Ce==w)return le.name}return N}function T1(w){var N=An.call(ve,"placeholder")?ve:w;return N.placeholder}function Ar(){var w=ve.iteratee||LR;return w=w===LR?zz:w,arguments.length?w(arguments[0],arguments[1]):w}function Bk(w,N){var M=w.__data__;return Hbe(N)?M[typeof N=="string"?"string":"hash"]:M.map}function SR(w){for(var N=as(w),M=N.length;M--;){var K=N[M],le=w[K];N[M]=[K,le,EH(le)]}return N}function jm(w,N){var M=Nc(w,N);return $z(M)?M:r}function Mbe(w){var N=An.call(w,Tm),M=w[Tm];try{w[Tm]=r;var K=!0}catch{}var le=gk.call(w);return K&&(N?w[Tm]=M:delete w[Tm]),le}var ER=YP?function(w){return w==null?[]:(w=Zt(w),_c(YP(w),function(N){return _z.call(w,N)}))}:$R,bH=YP?function(w){for(var N=[];w;)$l(N,ER(w)),w=yk(w);return N}:$R,Qs=Oo;(QP&&Qs(new QP(new ArrayBuffer(1)))!=Gt||ew&&Qs(new ew)!=Pe||JP&&Qs(JP.resolve())!=et||C1&&Qs(new C1)!=ht||tw&&Qs(new tw)!=qt)&&(Qs=function(w){var N=Oo(w),M=N==$e?w.constructor:r,K=M?Dm(M):"";if(K)switch(K){case vye:return Gt;case yye:return Pe;case bye:return et;case wye:return ht;case Sye:return qt}return N});function Fbe(w,N,M){for(var K=-1,le=M.length;++K<le;){var Ce=M[K],Me=Ce.size;switch(Ce.type){case"drop":w+=Me;break;case"dropRight":N-=Me;break;case"take":N=Ys(N,w+Me);break;case"takeRight":w=Va(w,N-Me);break}}return{start:w,end:N}}function Lbe(w){var N=w.match(ue);return N?N[1].split(fe):[]}function wH(w,N,M){N=kp(N,w);for(var K=-1,le=N.length,Ce=!1;++K<le;){var Me=Td(N[K]);if(!(Ce=w!=null&&M(w,Me)))break;w=w[Me]}return Ce||++K!=le?Ce:(le=w==null?0:w.length,!!le&&qk(le)&&$f(Me,le)&&(qr(w)||Mm(w)))}function Bbe(w){var N=w.length,M=new w.constructor(N);return N&&typeof w[0]=="string"&&An.call(w,"index")&&(M.index=w.index,M.input=w.input),M}function SH(w){return typeof w.constructor=="function"&&!uw(w)?_1(yk(w)):{}}function Ube(w,N,M){var K=w.constructor;switch(N){case dr:return gR(w);case re:case ae:return new K(+w);case Gt:return Ebe(w,M);case qe:case Xe:case Te:case He:case je:case we:case ot:case xt:case Dt:return iH(w,M);case Pe:return new K;case ze:case jr:return new K(w);case kt:return Cbe(w);case ht:return new K;case er:return kbe(w)}}function $be(w,N){var M=N.length;if(!M)return w;var K=M-1;return N[K]=(M>1?"& ":"")+N[K],N=N.join(M>2?", ":" "),w.replace(Hn,`{
/* [wrapped with `+N+`] */
`)}function zbe(w){return qr(w)||Mm(w)||!!(Nz&&w&&w[Nz])}function $f(w,N){var M=typeof w;return N=N??J,!!N&&(M=="number"||M!="symbol"&&wt.test(w))&&w>-1&&w%1==0&&w<N}function Po(w,N,M){if(!Wi(M))return!1;var K=typeof N;return(K=="number"?ol(M)&&$f(N,M.length):K=="string"&&N in M)?Ru(M[N],w):!1}function CR(w,N){if(qr(w))return!1;var M=typeof w;return M=="number"||M=="symbol"||M=="boolean"||w==null||Wl(w)?!0:Ut.test(w)||!_t.test(w)||N!=null&&w in Zt(N)}function Hbe(w){var N=typeof w;return N=="string"||N=="number"||N=="symbol"||N=="boolean"?w!=="__proto__":w===null}function kR(w){var N=Lk(w),M=ve[N];if(typeof M!="function"||!(N in Tn.prototype))return!1;if(w===M)return!0;var K=wR(M);return!!K&&w===K[0]}function Wbe(w){return!!mk&&mk in w}var Vbe=is?zf:zR;function uw(w){var N=w&&w.constructor,M=typeof N=="function"&&N.prototype||Mi;return w===M}function EH(w){return w===w&&!Wi(w)}function CH(w,N){return function(M){return M==null?!1:M[w]===N&&(N!==r||w in Zt(M))}}function qbe(w){var N=Wk(w,function(K){return M.size===c&&M.clear(),K}),M=N.cache;return N}function Gbe(w,N){var M=w[1],K=N[1],le=M|K,Ce=le<(b|S|O),Me=K==O&&M==C||K==O&&M==D&&w[7].length<=N[8]||K==(O|D)&&N[7].length<=N[8]&&M==C;if(!(Ce||Me))return w;K&b&&(w[2]=N[2],le|=M&b?0:_);var Ue=N[3];if(Ue){var Ke=w[3];w[3]=Ke?sH(Ke,Ue,N[4]):Ue,w[4]=Ke?se(w[3],d):N[4]}return Ue=N[5],Ue&&(Ke=w[5],w[5]=Ke?oH(Ke,Ue,N[6]):Ue,w[6]=Ke?se(w[5],d):N[6]),Ue=N[7],Ue&&(w[7]=Ue),K&O&&(w[8]=w[8]==null?N[8]:Ys(w[8],N[8])),w[9]==null&&(w[9]=N[9]),w[0]=N[0],w[1]=le,w}function Kbe(w){var N=[];if(w!=null)for(var M in Zt(w))N.push(M);return N}function Xbe(w){return gk.call(w)}function kH(w,N,M){return N=Va(N===r?w.length-1:N,0),function(){for(var K=arguments,le=-1,Ce=Va(K.length-N,0),Me=Ne(Ce);++le<Ce;)Me[le]=K[N+le];le=-1;for(var Ue=Ne(N+1);++le<N;)Ue[le]=K[le];return Ue[N]=M(Me),rs(w,this,Ue)}}function _H(w,N){return N.length<2?w:Rm(w,Ic(N,0,-1))}function Ybe(w,N){for(var M=w.length,K=Ys(N.length,M),le=sl(w);K--;){var Ce=N[K];w[K]=$f(Ce,M)?le[Ce]:r}return w}function _R(w,N){if(!(N==="constructor"&&typeof w[N]=="function")&&N!="__proto__")return w[N]}var NH=TH(Yz),dw=dye||function(w,N){return Na.setTimeout(w,N)},NR=TH(ybe);function AH(w,N,M){var K=N+"";return NR(w,$be(K,Qbe(Lbe(K),M)))}function TH(w){var N=0,M=0;return function(){var K=mye(),le=ie-(K-M);if(M=K,le>0){if(++N>=z)return arguments[0]}else N=0;return w.apply(r,arguments)}}function Uk(w,N){var M=-1,K=w.length,le=K-1;for(N=N===r?K:N;++M<N;){var Ce=cR(M,le),Me=w[Ce];w[Ce]=w[M],w[M]=Me}return w.length=N,w}var IH=qbe(function(w){var N=[];return w.charCodeAt(0)===46&&N.push(""),w.replace(ir,function(M,K,le,Ce){N.push(le?Ce.replace(he,"$1"):K||M)}),N});function Td(w){if(typeof w=="string"||Wl(w))return w;var N=w+"";return N=="0"&&1/w==-te?"-0":N}function Dm(w){if(w!=null){try{return Ou.call(w)}catch{}try{return w+""}catch{}}return""}function Qbe(w,N){return al(G,function(M){var K="_."+M[0];N&M[1]&&!ji(w,K)&&w.push(K)}),w.sort()}function OH(w){if(w instanceof Tn)return w.clone();var N=new Ac(w.__wrapped__,w.__chain__);return N.__actions__=sl(w.__actions__),N.__index__=w.__index__,N.__values__=w.__values__,N}function Jbe(w,N,M){(M?Po(w,N,M):N===r)?N=1:N=Va(an(N),0);var K=w==null?0:w.length;if(!K||N<1)return[];for(var le=0,Ce=0,Me=Ne(Sk(K/N));le<K;)Me[Ce++]=Ic(w,le,le+=N);return Me}function Zbe(w){for(var N=-1,M=w==null?0:w.length,K=0,le=[];++N<M;){var Ce=w[N];Ce&&(le[K++]=Ce)}return le}function ewe(){var w=arguments.length;if(!w)return[];for(var N=Ne(w-1),M=arguments[0],K=w;K--;)N[K-1]=arguments[K];return $l(qr(M)?sl(M):[M],Is(N,1))}var twe=mn(function(w,N){return ma(w)?aw(w,Is(N,1,ma,!0)):[]}),rwe=mn(function(w,N){var M=Oc(N);return ma(M)&&(M=r),ma(w)?aw(w,Is(N,1,ma,!0),Ar(M,2)):[]}),nwe=mn(function(w,N){var M=Oc(N);return ma(M)&&(M=r),ma(w)?aw(w,Is(N,1,ma,!0),r,M):[]});function iwe(w,N,M){var K=w==null?0:w.length;return K?(N=M||N===r?1:an(N),Ic(w,N<0?0:N,K)):[]}function awe(w,N,M){var K=w==null?0:w.length;return K?(N=M||N===r?1:an(N),N=K-N,Ic(w,0,N<0?0:N)):[]}function swe(w,N){return w&&w.length?Pk(w,Ar(N,3),!0,!0):[]}function owe(w,N){return w&&w.length?Pk(w,Ar(N,3),!0):[]}function lwe(w,N,M,K){var le=w==null?0:w.length;return le?(M&&typeof M!="number"&&Po(w,N,M)&&(M=0,K=le),ebe(w,N,M,K)):[]}function PH(w,N,M){var K=w==null?0:w.length;if(!K)return-1;var le=M==null?0:an(M);return le<0&&(le=Va(K+le,0)),b1(w,Ar(N,3),le)}function RH(w,N,M){var K=w==null?0:w.length;if(!K)return-1;var le=K-1;return M!==r&&(le=an(M),le=M<0?Va(K+le,0):Ys(le,K-1)),b1(w,Ar(N,3),le,!0)}function jH(w){var N=w==null?0:w.length;return N?Is(w,1):[]}function cwe(w){var N=w==null?0:w.length;return N?Is(w,te):[]}function uwe(w,N){var M=w==null?0:w.length;return M?(N=N===r?1:an(N),Is(w,N)):[]}function dwe(w){for(var N=-1,M=w==null?0:w.length,K={};++N<M;){var le=w[N];K[le[0]]=le[1]}return K}function DH(w){return w&&w.length?w[0]:r}function fwe(w,N,M){var K=w==null?0:w.length;if(!K)return-1;var le=M==null?0:an(M);return le<0&&(le=Va(K+le,0)),Ts(w,N,le)}function hwe(w){var N=w==null?0:w.length;return N?Ic(w,0,-1):[]}var pwe=mn(function(w){var N=Lr(w,pR);return N.length&&N[0]===w[0]?iR(N):[]}),mwe=mn(function(w){var N=Oc(w),M=Lr(w,pR);return N===Oc(M)?N=r:M.pop(),M.length&&M[0]===w[0]?iR(M,Ar(N,2)):[]}),gwe=mn(function(w){var N=Oc(w),M=Lr(w,pR);return N=typeof N=="function"?N:r,N&&M.pop(),M.length&&M[0]===w[0]?iR(M,r,N):[]});function xwe(w,N){return w==null?"":hye.call(w,N)}function Oc(w){var N=w==null?0:w.length;return N?w[N-1]:r}function vwe(w,N,M){var K=w==null?0:w.length;if(!K)return-1;var le=K;return M!==r&&(le=an(M),le=le<0?Va(K+le,0):Ys(le,K-1)),N===N?E(w,N,le):b1(w,Kb,le,!0)}function ywe(w,N){return w&&w.length?qz(w,an(N)):r}var bwe=mn(MH);function MH(w,N){return w&&w.length&&N&&N.length?lR(w,N):w}function wwe(w,N,M){return w&&w.length&&N&&N.length?lR(w,N,Ar(M,2)):w}function Swe(w,N,M){return w&&w.length&&N&&N.length?lR(w,N,r,M):w}var Ewe=Uf(function(w,N){var M=w==null?0:w.length,K=eR(w,N);return Xz(w,Lr(N,function(le){return $f(le,M)?+le:le}).sort(aH)),K});function Cwe(w,N){var M=[];if(!(w&&w.length))return M;var K=-1,le=[],Ce=w.length;for(N=Ar(N,3);++K<Ce;){var Me=w[K];N(Me,K,w)&&(M.push(Me),le.push(K))}return Xz(w,le),M}function AR(w){return w==null?w:xye.call(w)}function kwe(w,N,M){var K=w==null?0:w.length;return K?(M&&typeof M!="number"&&Po(w,N,M)?(N=0,M=K):(N=N==null?0:an(N),M=M===r?K:an(M)),Ic(w,N,M)):[]}function _we(w,N){return Ok(w,N)}function Nwe(w,N,M){return dR(w,N,Ar(M,2))}function Awe(w,N){var M=w==null?0:w.length;if(M){var K=Ok(w,N);if(K<M&&Ru(w[K],N))return K}return-1}function Twe(w,N){return Ok(w,N,!0)}function Iwe(w,N,M){return dR(w,N,Ar(M,2),!0)}function Owe(w,N){var M=w==null?0:w.length;if(M){var K=Ok(w,N,!0)-1;if(Ru(w[K],N))return K}return-1}function Pwe(w){return w&&w.length?Qz(w):[]}function Rwe(w,N){return w&&w.length?Qz(w,Ar(N,2)):[]}function jwe(w){var N=w==null?0:w.length;return N?Ic(w,1,N):[]}function Dwe(w,N,M){return w&&w.length?(N=M||N===r?1:an(N),Ic(w,0,N<0?0:N)):[]}function Mwe(w,N,M){var K=w==null?0:w.length;return K?(N=M||N===r?1:an(N),N=K-N,Ic(w,N<0?0:N,K)):[]}function Fwe(w,N){return w&&w.length?Pk(w,Ar(N,3),!1,!0):[]}function Lwe(w,N){return w&&w.length?Pk(w,Ar(N,3)):[]}var Bwe=mn(function(w){return Cp(Is(w,1,ma,!0))}),Uwe=mn(function(w){var N=Oc(w);return ma(N)&&(N=r),Cp(Is(w,1,ma,!0),Ar(N,2))}),$we=mn(function(w){var N=Oc(w);return N=typeof N=="function"?N:r,Cp(Is(w,1,ma,!0),r,N)});function zwe(w){return w&&w.length?Cp(w):[]}function Hwe(w,N){return w&&w.length?Cp(w,Ar(N,2)):[]}function Wwe(w,N){return N=typeof N=="function"?N:r,w&&w.length?Cp(w,r,N):[]}function TR(w){if(!(w&&w.length))return[];var N=0;return w=_c(w,function(M){if(ma(M))return N=Va(M.length,N),!0}),Xb(N,function(M){return Lr(w,S1(M))})}function FH(w,N){if(!(w&&w.length))return[];var M=TR(w);return N==null?M:Lr(M,function(K){return rs(N,r,K)})}var Vwe=mn(function(w,N){return ma(w)?aw(w,N):[]}),qwe=mn(function(w){return hR(_c(w,ma))}),Gwe=mn(function(w){var N=Oc(w);return ma(N)&&(N=r),hR(_c(w,ma),Ar(N,2))}),Kwe=mn(function(w){var N=Oc(w);return N=typeof N=="function"?N:r,hR(_c(w,ma),r,N)}),Xwe=mn(TR);function Ywe(w,N){return tH(w||[],N||[],iw)}function Qwe(w,N){return tH(w||[],N||[],lw)}var Jwe=mn(function(w){var N=w.length,M=N>1?w[N-1]:r;return M=typeof M=="function"?(w.pop(),M):r,FH(w,M)});function LH(w){var N=ve(w);return N.__chain__=!0,N}function Zwe(w,N){return N(w),w}function $k(w,N){return N(w)}var e2e=Uf(function(w){var N=w.length,M=N?w[0]:0,K=this.__wrapped__,le=function(Ce){return eR(Ce,w)};return N>1||this.__actions__.length||!(K instanceof Tn)||!$f(M)?this.thru(le):(K=K.slice(M,+M+(N?1:0)),K.__actions__.push({func:$k,args:[le],thisArg:r}),new Ac(K,this.__chain__).thru(function(Ce){return N&&!Ce.length&&Ce.push(r),Ce}))});function t2e(){return LH(this)}function r2e(){return new Ac(this.value(),this.__chain__)}function n2e(){this.__values__===r&&(this.__values__=JH(this.value()));var w=this.__index__>=this.__values__.length,N=w?r:this.__values__[this.__index__++];return{done:w,value:N}}function i2e(){return this}function a2e(w){for(var N,M=this;M instanceof _k;){var K=OH(M);K.__index__=0,K.__values__=r,N?le.__wrapped__=K:N=K;var le=K;M=M.__wrapped__}return le.__wrapped__=w,N}function s2e(){var w=this.__wrapped__;if(w instanceof Tn){var N=w;return this.__actions__.length&&(N=new Tn(this)),N=N.reverse(),N.__actions__.push({func:$k,args:[AR],thisArg:r}),new Ac(N,this.__chain__)}return this.thru(AR)}function o2e(){return eH(this.__wrapped__,this.__actions__)}var l2e=Rk(function(w,N,M){An.call(w,M)?++w[M]:Lf(w,M,1)});function c2e(w,N,M){var K=qr(w)?dk:Zye;return M&&Po(w,N,M)&&(N=r),K(w,Ar(N,3))}function u2e(w,N){var M=qr(w)?_c:Fz;return M(w,Ar(N,3))}var d2e=dH(PH),f2e=dH(RH);function h2e(w,N){return Is(zk(w,N),1)}function p2e(w,N){return Is(zk(w,N),te)}function m2e(w,N,M){return M=M===r?1:an(M),Is(zk(w,N),M)}function BH(w,N){var M=qr(w)?al:Ep;return M(w,Ar(N,3))}function UH(w,N){var M=qr(w)?VP:Mz;return M(w,Ar(N,3))}var g2e=Rk(function(w,N,M){An.call(w,M)?w[M].push(N):Lf(w,M,[N])});function x2e(w,N,M,K){w=ol(w)?w:O1(w),M=M&&!K?an(M):0;var le=w.length;return M<0&&(M=Va(le+M,0)),Gk(w)?M<=le&&w.indexOf(N,M)>-1:!!le&&Ts(w,N,M)>-1}var v2e=mn(function(w,N,M){var K=-1,le=typeof N=="function",Ce=ol(w)?Ne(w.length):[];return Ep(w,function(Me){Ce[++K]=le?rs(N,Me,M):sw(Me,N,M)}),Ce}),y2e=Rk(function(w,N,M){Lf(w,M,N)});function zk(w,N){var M=qr(w)?Lr:Hz;return M(w,Ar(N,3))}function b2e(w,N,M,K){return w==null?[]:(qr(N)||(N=N==null?[]:[N]),M=K?r:M,qr(M)||(M=M==null?[]:[M]),Gz(w,N,M))}var w2e=Rk(function(w,N,M){w[M?0:1].push(N)},function(){return[[],[]]});function S2e(w,N,M){var K=qr(w)?Iu:fk,le=arguments.length<3;return K(w,Ar(N,4),M,le,Ep)}function E2e(w,N,M){var K=qr(w)?ei:fk,le=arguments.length<3;return K(w,Ar(N,4),M,le,Mz)}function C2e(w,N){var M=qr(w)?_c:Fz;return M(w,Vk(Ar(N,3)))}function k2e(w){var N=qr(w)?Pz:xbe;return N(w)}function _2e(w,N,M){(M?Po(w,N,M):N===r)?N=1:N=an(N);var K=qr(w)?Kye:vbe;return K(w,N)}function N2e(w){var N=qr(w)?Xye:bbe;return N(w)}function A2e(w){if(w==null)return 0;if(ol(w))return Gk(w)?k(w):w.length;var N=Qs(w);return N==Pe||N==ht?w.size:sR(w).length}function T2e(w,N,M){var K=qr(w)?gr:wbe;return M&&Po(w,N,M)&&(N=r),K(w,Ar(N,3))}var I2e=mn(function(w,N){if(w==null)return[];var M=N.length;return M>1&&Po(w,N[0],N[1])?N=[]:M>2&&Po(N[0],N[1],N[2])&&(N=[N[0]]),Gz(w,Is(N,1),[])}),Hk=uye||function(){return Na.Date.now()};function O2e(w,N){if(typeof N!="function")throw new Di(s);return w=an(w),function(){if(--w<1)return N.apply(this,arguments)}}function $H(w,N,M){return N=M?r:N,N=w&&N==null?w.length:N,Bf(w,O,r,r,r,r,N)}function zH(w,N){var M;if(typeof N!="function")throw new Di(s);return w=an(w),function(){return--w>0&&(M=N.apply(this,arguments)),w<=1&&(N=r),M}}var IR=mn(function(w,N,M){var K=b;if(M.length){var le=se(M,T1(IR));K|=j}return Bf(w,K,N,M,le)}),HH=mn(function(w,N,M){var K=b|S;if(M.length){var le=se(M,T1(HH));K|=j}return Bf(N,K,w,M,le)});function WH(w,N,M){N=M?r:N;var K=Bf(w,C,r,r,r,r,r,N);return K.placeholder=WH.placeholder,K}function VH(w,N,M){N=M?r:N;var K=Bf(w,A,r,r,r,r,r,N);return K.placeholder=VH.placeholder,K}function qH(w,N,M){var K,le,Ce,Me,Ue,Ke,yt=0,bt=!1,Nt=!1,Ht=!0;if(typeof w!="function")throw new Di(s);N=Pc(N)||0,Wi(M)&&(bt=!!M.leading,Nt="maxWait"in M,Ce=Nt?Va(Pc(M.maxWait)||0,N):Ce,Ht="trailing"in M?!!M.trailing:Ht);function nr(ga){var ju=K,Wf=le;return K=le=r,yt=ga,Me=w.apply(Wf,ju),Me}function Or(ga){return yt=ga,Ue=dw(_n,N),bt?nr(ga):Me}function cn(ga){var ju=ga-Ke,Wf=ga-yt,dW=N-ju;return Nt?Ys(dW,Ce-Wf):dW}function Pr(ga){var ju=ga-Ke,Wf=ga-yt;return Ke===r||ju>=N||ju<0||Nt&&Wf>=Ce}function _n(){var ga=Hk();if(Pr(ga))return On(ga);Ue=dw(_n,cn(ga))}function On(ga){return Ue=r,Ht&&K?nr(ga):(K=le=r,Me)}function Vl(){Ue!==r&&rH(Ue),yt=0,K=Ke=le=Ue=r}function Ro(){return Ue===r?Me:On(Hk())}function ql(){var ga=Hk(),ju=Pr(ga);if(K=arguments,le=this,Ke=ga,ju){if(Ue===r)return Or(Ke);if(Nt)return rH(Ue),Ue=dw(_n,N),nr(Ke)}return Ue===r&&(Ue=dw(_n,N)),Me}return ql.cancel=Vl,ql.flush=Ro,ql}var P2e=mn(function(w,N){return Dz(w,1,N)}),R2e=mn(function(w,N,M){return Dz(w,Pc(N)||0,M)});function j2e(w){return Bf(w,L)}function Wk(w,N){if(typeof w!="function"||N!=null&&typeof N!="function")throw new Di(s);var M=function(){var K=arguments,le=N?N.apply(this,K):K[0],Ce=M.cache;if(Ce.has(le))return Ce.get(le);var Me=w.apply(this,K);return M.cache=Ce.set(le,Me)||Ce,Me};return M.cache=new(Wk.Cache||Ff),M}Wk.Cache=Ff;function Vk(w){if(typeof w!="function")throw new Di(s);return function(){var N=arguments;switch(N.length){case 0:return!w.call(this);case 1:return!w.call(this,N[0]);case 2:return!w.call(this,N[0],N[1]);case 3:return!w.call(this,N[0],N[1],N[2])}return!w.apply(this,N)}}function D2e(w){return zH(2,w)}var M2e=Sbe(function(w,N){N=N.length==1&&qr(N[0])?Lr(N[0],ea(Ar())):Lr(Is(N,1),ea(Ar()));var M=N.length;return mn(function(K){for(var le=-1,Ce=Ys(K.length,M);++le<Ce;)K[le]=N[le].call(this,K[le]);return rs(w,this,K)})}),OR=mn(function(w,N){var M=se(N,T1(OR));return Bf(w,j,r,N,M)}),GH=mn(function(w,N){var M=se(N,T1(GH));return Bf(w,P,r,N,M)}),F2e=Uf(function(w,N){return Bf(w,D,r,r,r,N)});function L2e(w,N){if(typeof w!="function")throw new Di(s);return N=N===r?N:an(N),mn(w,N)}function B2e(w,N){if(typeof w!="function")throw new Di(s);return N=N==null?0:Va(an(N),0),mn(function(M){var K=M[N],le=_p(M,0,N);return K&&$l(le,K),rs(w,this,le)})}function U2e(w,N,M){var K=!0,le=!0;if(typeof w!="function")throw new Di(s);return Wi(M)&&(K="leading"in M?!!M.leading:K,le="trailing"in M?!!M.trailing:le),qH(w,N,{leading:K,maxWait:N,trailing:le})}function $2e(w){return $H(w,1)}function z2e(w,N){return OR(mR(N),w)}function H2e(){if(!arguments.length)return[];var w=arguments[0];return qr(w)?w:[w]}function W2e(w){return Tc(w,m)}function V2e(w,N){return N=typeof N=="function"?N:r,Tc(w,m,N)}function q2e(w){return Tc(w,f|m)}function G2e(w,N){return N=typeof N=="function"?N:r,Tc(w,f|m,N)}function K2e(w,N){return N==null||jz(w,N,as(N))}function Ru(w,N){return w===N||w!==w&&N!==N}var X2e=Fk(nR),Y2e=Fk(function(w,N){return w>=N}),Mm=Uz(function(){return arguments}())?Uz:function(w){return ta(w)&&An.call(w,"callee")&&!_z.call(w,"callee")},qr=Ne.isArray,Q2e=Em?ea(Em):abe;function ol(w){return w!=null&&qk(w.length)&&!zf(w)}function ma(w){return ta(w)&&ol(w)}function J2e(w){return w===!0||w===!1||ta(w)&&Oo(w)==re}var Np=fye||zR,Z2e=Tu?ea(Tu):sbe;function eSe(w){return ta(w)&&w.nodeType===1&&!fw(w)}function tSe(w){if(w==null)return!0;if(ol(w)&&(qr(w)||typeof w=="string"||typeof w.splice=="function"||Np(w)||I1(w)||Mm(w)))return!w.length;var N=Qs(w);if(N==Pe||N==ht)return!w.size;if(uw(w))return!sR(w).length;for(var M in w)if(An.call(w,M))return!1;return!0}function rSe(w,N){return ow(w,N)}function nSe(w,N,M){M=typeof M=="function"?M:r;var K=M?M(w,N):r;return K===r?ow(w,N,r,M):!!K}function PR(w){if(!ta(w))return!1;var N=Oo(w);return N==Ee||N==ge||typeof w.message=="string"&&typeof w.name=="string"&&!fw(w)}function iSe(w){return typeof w=="number"&&Az(w)}function zf(w){if(!Wi(w))return!1;var N=Oo(w);return N==V||N==Ae||N==Se||N==ut}function KH(w){return typeof w=="number"&&w==an(w)}function qk(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=J}function Wi(w){var N=typeof w;return w!=null&&(N=="object"||N=="function")}function ta(w){return w!=null&&typeof w=="object"}var XH=ck?ea(ck):lbe;function aSe(w,N){return w===N||aR(w,N,SR(N))}function sSe(w,N,M){return M=typeof M=="function"?M:r,aR(w,N,SR(N),M)}function oSe(w){return YH(w)&&w!=+w}function lSe(w){if(Vbe(w))throw new lt(a);return $z(w)}function cSe(w){return w===null}function uSe(w){return w==null}function YH(w){return typeof w=="number"||ta(w)&&Oo(w)==ze}function fw(w){if(!ta(w)||Oo(w)!=$e)return!1;var N=yk(w);if(N===null)return!0;var M=An.call(N,"constructor")&&N.constructor;return typeof M=="function"&&M instanceof M&&Ou.call(M)==sye}var RR=tt?ea(tt):cbe;function dSe(w){return KH(w)&&w>=-J&&w<=J}var QH=Yr?ea(Yr):ube;function Gk(w){return typeof w=="string"||!qr(w)&&ta(w)&&Oo(w)==jr}function Wl(w){return typeof w=="symbol"||ta(w)&&Oo(w)==er}var I1=Aa?ea(Aa):dbe;function fSe(w){return w===r}function hSe(w){return ta(w)&&Qs(w)==qt}function pSe(w){return ta(w)&&Oo(w)==Lt}var mSe=Fk(oR),gSe=Fk(function(w,N){return w<=N});function JH(w){if(!w)return[];if(ol(w))return Gk(w)?T(w):sl(w);if(Zb&&w[Zb])return Nm(w[Zb]());var N=Qs(w),M=N==Pe?kn:N==ht?h:O1;return M(w)}function Hf(w){if(!w)return w===0?w:0;if(w=Pc(w),w===te||w===-te){var N=w<0?-1:1;return N*Y}return w===w?w:0}function an(w){var N=Hf(w),M=N%1;return N===N?M?N-M:N:0}function ZH(w){return w?Pm(an(w),0,_e):0}function Pc(w){if(typeof w=="number")return w;if(Wl(w))return pe;if(Wi(w)){var N=typeof w.valueOf=="function"?w.valueOf():w;w=Wi(N)?N+"":N}if(typeof w!="string")return w===0?w:+w;w=hk(w);var M=Ge.test(w);return M||Ze.test(w)?Ks(w.slice(2),M?2:8):it.test(w)?pe:+w}function eW(w){return Ad(w,ll(w))}function xSe(w){return w?Pm(an(w),-J,J):w===0?w:0}function Yn(w){return w==null?"":Hl(w)}var vSe=N1(function(w,N){if(uw(N)||ol(N)){Ad(N,as(N),w);return}for(var M in N)An.call(N,M)&&iw(w,M,N[M])}),tW=N1(function(w,N){Ad(N,ll(N),w)}),Kk=N1(function(w,N,M,K){Ad(N,ll(N),w,K)}),ySe=N1(function(w,N,M,K){Ad(N,as(N),w,K)}),bSe=Uf(eR);function wSe(w,N){var M=_1(w);return N==null?M:Rz(M,N)}var SSe=mn(function(w,N){w=Zt(w);var M=-1,K=N.length,le=K>2?N[2]:r;for(le&&Po(N[0],N[1],le)&&(K=1);++M<K;)for(var Ce=N[M],Me=ll(Ce),Ue=-1,Ke=Me.length;++Ue<Ke;){var yt=Me[Ue],bt=w[yt];(bt===r||Ru(bt,Mi[yt])&&!An.call(w,yt))&&(w[yt]=Ce[yt])}return w}),ESe=mn(function(w){return w.push(r,vH),rs(rW,r,w)});function CSe(w,N){return Df(w,Ar(N,3),Nd)}function kSe(w,N){return Df(w,Ar(N,3),rR)}function _Se(w,N){return w==null?w:tR(w,Ar(N,3),ll)}function NSe(w,N){return w==null?w:Lz(w,Ar(N,3),ll)}function ASe(w,N){return w&&Nd(w,Ar(N,3))}function TSe(w,N){return w&&rR(w,Ar(N,3))}function ISe(w){return w==null?[]:Tk(w,as(w))}function OSe(w){return w==null?[]:Tk(w,ll(w))}function jR(w,N,M){var K=w==null?r:Rm(w,N);return K===r?M:K}function PSe(w,N){return w!=null&&wH(w,N,tbe)}function DR(w,N){return w!=null&&wH(w,N,rbe)}var RSe=hH(function(w,N,M){N!=null&&typeof N.toString!="function"&&(N=gk.call(N)),w[N]=M},FR(cl)),jSe=hH(function(w,N,M){N!=null&&typeof N.toString!="function"&&(N=gk.call(N)),An.call(w,N)?w[N].push(M):w[N]=[M]},Ar),DSe=mn(sw);function as(w){return ol(w)?Oz(w):sR(w)}function ll(w){return ol(w)?Oz(w,!0):fbe(w)}function MSe(w,N){var M={};return N=Ar(N,3),Nd(w,function(K,le,Ce){Lf(M,N(K,le,Ce),K)}),M}function FSe(w,N){var M={};return N=Ar(N,3),Nd(w,function(K,le,Ce){Lf(M,le,N(K,le,Ce))}),M}var LSe=N1(function(w,N,M){Ik(w,N,M)}),rW=N1(function(w,N,M,K){Ik(w,N,M,K)}),BSe=Uf(function(w,N){var M={};if(w==null)return M;var K=!1;N=Lr(N,function(Ce){return Ce=kp(Ce,w),K||(K=Ce.length>1),Ce}),Ad(w,bR(w),M),K&&(M=Tc(M,f|p|m,Rbe));for(var le=N.length;le--;)fR(M,N[le]);return M});function USe(w,N){return nW(w,Vk(Ar(N)))}var $Se=Uf(function(w,N){return w==null?{}:pbe(w,N)});function nW(w,N){if(w==null)return{};var M=Lr(bR(w),function(K){return[K]});return N=Ar(N),Kz(w,M,function(K,le){return N(K,le[0])})}function zSe(w,N,M){N=kp(N,w);var K=-1,le=N.length;for(le||(le=1,w=r);++K<le;){var Ce=w==null?r:w[Td(N[K])];Ce===r&&(K=le,Ce=M),w=zf(Ce)?Ce.call(w):Ce}return w}function HSe(w,N,M){return w==null?w:lw(w,N,M)}function WSe(w,N,M,K){return K=typeof K=="function"?K:r,w==null?w:lw(w,N,M,K)}var iW=gH(as),aW=gH(ll);function VSe(w,N,M){var K=qr(w),le=K||Np(w)||I1(w);if(N=Ar(N,4),M==null){var Ce=w&&w.constructor;le?M=K?new Ce:[]:Wi(w)?M=zf(Ce)?_1(yk(w)):{}:M={}}return(le?al:Nd)(w,function(Me,Ue,Ke){return N(M,Me,Ue,Ke)}),M}function qSe(w,N){return w==null?!0:fR(w,N)}function GSe(w,N,M){return w==null?w:Zz(w,N,mR(M))}function KSe(w,N,M,K){return K=typeof K=="function"?K:r,w==null?w:Zz(w,N,mR(M),K)}function O1(w){return w==null?[]:bp(w,as(w))}function XSe(w){return w==null?[]:bp(w,ll(w))}function YSe(w,N,M){return M===r&&(M=N,N=r),M!==r&&(M=Pc(M),M=M===M?M:0),N!==r&&(N=Pc(N),N=N===N?N:0),Pm(Pc(w),N,M)}function QSe(w,N,M){return N=Hf(N),M===r?(M=N,N=0):M=Hf(M),w=Pc(w),nbe(w,N,M)}function JSe(w,N,M){if(M&&typeof M!="boolean"&&Po(w,N,M)&&(N=M=r),M===r&&(typeof N=="boolean"?(M=N,N=r):typeof w=="boolean"&&(M=w,w=r)),w===r&&N===r?(w=0,N=1):(w=Hf(w),N===r?(N=w,w=0):N=Hf(N)),w>N){var K=w;w=N,N=K}if(M||w%1||N%1){var le=Tz();return Ys(w+le*(N-w+Sm("1e-"+((le+"").length-1))),N)}return cR(w,N)}var ZSe=A1(function(w,N,M){return N=N.toLowerCase(),w+(M?sW(N):N)});function sW(w){return MR(Yn(w).toLowerCase())}function oW(w){return w=Yn(w),w&&w.replace(At,Qb).replace(HP,"")}function eEe(w,N,M){w=Yn(w),N=Hl(N);var K=w.length;M=M===r?K:Pm(an(M),0,K);var le=M;return M-=N.length,M>=0&&w.slice(M,le)==N}function tEe(w){return w=Yn(w),w&&il.test(w)?w.replace(Qi,KP):w}function rEe(w){return w=Yn(w),w&&$t.test(w)?w.replace(tr,"\\$&"):w}var nEe=A1(function(w,N,M){return w+(M?"-":"")+N.toLowerCase()}),iEe=A1(function(w,N,M){return w+(M?" ":"")+N.toLowerCase()}),aEe=uH("toLowerCase");function sEe(w,N,M){w=Yn(w),N=an(N);var K=N?k(w):0;if(!N||K>=N)return w;var le=(N-K)/2;return Mk(Ek(le),M)+w+Mk(Sk(le),M)}function oEe(w,N,M){w=Yn(w),N=an(N);var K=N?k(w):0;return N&&K<N?w+Mk(N-K,M):w}function lEe(w,N,M){w=Yn(w),N=an(N);var K=N?k(w):0;return N&&K<N?Mk(N-K,M)+w:w}function cEe(w,N,M){return M||N==null?N=0:N&&(N=+N),gye(Yn(w).replace(_r,""),N||0)}function uEe(w,N,M){return(M?Po(w,N,M):N===r)?N=1:N=an(N),uR(Yn(w),N)}function dEe(){var w=arguments,N=Yn(w[0]);return w.length<3?N:N.replace(w[1],w[2])}var fEe=A1(function(w,N,M){return w+(M?"_":"")+N.toLowerCase()});function hEe(w,N,M){return M&&typeof M!="number"&&Po(w,N,M)&&(N=M=r),M=M===r?_e:M>>>0,M?(w=Yn(w),w&&(typeof N=="string"||N!=null&&!RR(N))&&(N=Hl(N),!N&&wp(w))?_p(T(w),0,M):w.split(N,M)):[]}var pEe=A1(function(w,N,M){return w+(M?" ":"")+MR(N)});function mEe(w,N,M){return w=Yn(w),M=M==null?0:Pm(an(M),0,w.length),N=Hl(N),w.slice(M,M+N.length)==N}function gEe(w,N,M){var K=ve.templateSettings;M&&Po(w,N,M)&&(N=r),w=Yn(w),N=Kk({},N,K,xH);var le=Kk({},N.imports,K.imports,xH),Ce=as(le),Me=bp(le,Ce),Ue,Ke,yt=0,bt=N.interpolate||dt,Nt="__p += '",Ht=Br((N.escape||dt).source+"|"+bt.source+"|"+(bt===rt?me:dt).source+"|"+(N.evaluate||dt).source+"|$","g"),nr="//# sourceURL="+(An.call(N,"sourceURL")?(N.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Pf+"]")+`
`;w.replace(Ht,function(Pr,_n,On,Vl,Ro,ql){return On||(On=Vl),Nt+=w.slice(yt,ql).replace(St,pk),_n&&(Ue=!0,Nt+=`' +
__e(`+_n+`) +
'`),Ro&&(Ke=!0,Nt+=`';
`+Ro+`;
__p += '`),On&&(Nt+=`' +
((__t = (`+On+`)) == null ? '' : __t) +
'`),yt=ql+Pr.length,Pr}),Nt+=`';
`;var Or=An.call(N,"variable")&&N.variable;if(!Or)Nt=`with (obj) {
`+Nt+`
}
`;else if(ke.test(Or))throw new lt(o);Nt=(Ke?Nt.replace(Pt,""):Nt).replace(kr,"$1").replace(Cn,"$1;"),Nt="function("+(Or||"obj")+`) {
`+(Or?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ue?", __e = _.escape":"")+(Ke?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Nt+`return __p
}`;var cn=cW(function(){return gt(Ce,nr+"return "+Nt).apply(r,Me)});if(cn.source=Nt,PR(cn))throw cn;return cn}function xEe(w){return Yn(w).toLowerCase()}function vEe(w){return Yn(w).toUpperCase()}function yEe(w,N,M){if(w=Yn(w),w&&(M||N===r))return hk(w);if(!w||!(N=Hl(N)))return w;var K=T(w),le=T(N),Ce=Yb(K,le),Me=zl(K,le)+1;return _p(K,Ce,Me).join("")}function bEe(w,N,M){if(w=Yn(w),w&&(M||N===r))return w.slice(0,R(w)+1);if(!w||!(N=Hl(N)))return w;var K=T(w),le=zl(K,T(N))+1;return _p(K,0,le).join("")}function wEe(w,N,M){if(w=Yn(w),w&&(M||N===r))return w.replace(_r,"");if(!w||!(N=Hl(N)))return w;var K=T(w),le=Yb(K,T(N));return _p(K,le).join("")}function SEe(w,N){var M=B,K=H;if(Wi(N)){var le="separator"in N?N.separator:le;M="length"in N?an(N.length):M,K="omission"in N?Hl(N.omission):K}w=Yn(w);var Ce=w.length;if(wp(w)){var Me=T(w);Ce=Me.length}if(M>=Ce)return w;var Ue=M-k(K);if(Ue<1)return K;var Ke=Me?_p(Me,0,Ue).join(""):w.slice(0,Ue);if(le===r)return Ke+K;if(Me&&(Ue+=Ke.length-Ue),RR(le)){if(w.slice(Ue).search(le)){var yt,bt=Ke;for(le.global||(le=Br(le.source,Yn(Fe.exec(le))+"g")),le.lastIndex=0;yt=le.exec(bt);)var Nt=yt.index;Ke=Ke.slice(0,Nt===r?Ue:Nt)}}else if(w.indexOf(Hl(le),Ue)!=Ue){var Ht=Ke.lastIndexOf(le);Ht>-1&&(Ke=Ke.slice(0,Ht))}return Ke+K}function EEe(w){return w=Yn(w),w&&Fn.test(w)?w.replace(fr,F):w}var CEe=A1(function(w,N,M){return w+(M?" ":"")+N.toUpperCase()}),MR=uH("toUpperCase");function lW(w,N,M){return w=Yn(w),N=M?r:N,N===r?Jb(w)?oe(w):jf(w):w.match(N)||[]}var cW=mn(function(w,N){try{return rs(w,r,N)}catch(M){return PR(M)?M:new lt(M)}}),kEe=Uf(function(w,N){return al(N,function(M){M=Td(M),Lf(w,M,IR(w[M],w))}),w});function _Ee(w){var N=w==null?0:w.length,M=Ar();return w=N?Lr(w,function(K){if(typeof K[1]!="function")throw new Di(s);return[M(K[0]),K[1]]}):[],mn(function(K){for(var le=-1;++le<N;){var Ce=w[le];if(rs(Ce[0],this,K))return rs(Ce[1],this,K)}})}function NEe(w){return Jye(Tc(w,f))}function FR(w){return function(){return w}}function AEe(w,N){return w==null||w!==w?N:w}var TEe=fH(),IEe=fH(!0);function cl(w){return w}function LR(w){return zz(typeof w=="function"?w:Tc(w,f))}function OEe(w){return Wz(Tc(w,f))}function PEe(w,N){return Vz(w,Tc(N,f))}var REe=mn(function(w,N){return function(M){return sw(M,w,N)}}),jEe=mn(function(w,N){return function(M){return sw(w,M,N)}});function BR(w,N,M){var K=as(N),le=Tk(N,K);M==null&&!(Wi(N)&&(le.length||!K.length))&&(M=N,N=w,w=this,le=Tk(N,as(N)));var Ce=!(Wi(M)&&"chain"in M)||!!M.chain,Me=zf(w);return al(le,function(Ue){var Ke=N[Ue];w[Ue]=Ke,Me&&(w.prototype[Ue]=function(){var yt=this.__chain__;if(Ce||yt){var bt=w(this.__wrapped__),Nt=bt.__actions__=sl(this.__actions__);return Nt.push({func:Ke,args:arguments,thisArg:w}),bt.__chain__=yt,bt}return Ke.apply(w,$l([this.value()],arguments))})}),w}function DEe(){return Na._===this&&(Na._=oye),this}function UR(){}function MEe(w){return w=an(w),mn(function(N){return qz(N,w)})}var FEe=xR(Lr),LEe=xR(dk),BEe=xR(gr);function uW(w){return CR(w)?S1(Td(w)):mbe(w)}function UEe(w){return function(N){return w==null?r:Rm(w,N)}}var $Ee=pH(),zEe=pH(!0);function $R(){return[]}function zR(){return!1}function HEe(){return{}}function WEe(){return""}function VEe(){return!0}function qEe(w,N){if(w=an(w),w<1||w>J)return[];var M=_e,K=Ys(w,_e);N=Ar(N),w-=_e;for(var le=Xb(K,N);++M<w;)N(M);return le}function GEe(w){return qr(w)?Lr(w,Td):Wl(w)?[w]:sl(IH(Yn(w)))}function KEe(w){var N=++XP;return Yn(w)+N}var XEe=Dk(function(w,N){return w+N},0),YEe=vR("ceil"),QEe=Dk(function(w,N){return w/N},1),JEe=vR("floor");function ZEe(w){return w&&w.length?Ak(w,cl,nR):r}function eCe(w,N){return w&&w.length?Ak(w,Ar(N,2),nR):r}function tCe(w){return w1(w,cl)}function rCe(w,N){return w1(w,Ar(N,2))}function nCe(w){return w&&w.length?Ak(w,cl,oR):r}function iCe(w,N){return w&&w.length?Ak(w,Ar(N,2),oR):r}var aCe=Dk(function(w,N){return w*N},1),sCe=vR("round"),oCe=Dk(function(w,N){return w-N},0);function lCe(w){return w&&w.length?km(w,cl):0}function cCe(w,N){return w&&w.length?km(w,Ar(N,2)):0}return ve.after=O2e,ve.ary=$H,ve.assign=vSe,ve.assignIn=tW,ve.assignInWith=Kk,ve.assignWith=ySe,ve.at=bSe,ve.before=zH,ve.bind=IR,ve.bindAll=kEe,ve.bindKey=HH,ve.castArray=H2e,ve.chain=LH,ve.chunk=Jbe,ve.compact=Zbe,ve.concat=ewe,ve.cond=_Ee,ve.conforms=NEe,ve.constant=FR,ve.countBy=l2e,ve.create=wSe,ve.curry=WH,ve.curryRight=VH,ve.debounce=qH,ve.defaults=SSe,ve.defaultsDeep=ESe,ve.defer=P2e,ve.delay=R2e,ve.difference=twe,ve.differenceBy=rwe,ve.differenceWith=nwe,ve.drop=iwe,ve.dropRight=awe,ve.dropRightWhile=swe,ve.dropWhile=owe,ve.fill=lwe,ve.filter=u2e,ve.flatMap=h2e,ve.flatMapDeep=p2e,ve.flatMapDepth=m2e,ve.flatten=jH,ve.flattenDeep=cwe,ve.flattenDepth=uwe,ve.flip=j2e,ve.flow=TEe,ve.flowRight=IEe,ve.fromPairs=dwe,ve.functions=ISe,ve.functionsIn=OSe,ve.groupBy=g2e,ve.initial=hwe,ve.intersection=pwe,ve.intersectionBy=mwe,ve.intersectionWith=gwe,ve.invert=RSe,ve.invertBy=jSe,ve.invokeMap=v2e,ve.iteratee=LR,ve.keyBy=y2e,ve.keys=as,ve.keysIn=ll,ve.map=zk,ve.mapKeys=MSe,ve.mapValues=FSe,ve.matches=OEe,ve.matchesProperty=PEe,ve.memoize=Wk,ve.merge=LSe,ve.mergeWith=rW,ve.method=REe,ve.methodOf=jEe,ve.mixin=BR,ve.negate=Vk,ve.nthArg=MEe,ve.omit=BSe,ve.omitBy=USe,ve.once=D2e,ve.orderBy=b2e,ve.over=FEe,ve.overArgs=M2e,ve.overEvery=LEe,ve.overSome=BEe,ve.partial=OR,ve.partialRight=GH,ve.partition=w2e,ve.pick=$Se,ve.pickBy=nW,ve.property=uW,ve.propertyOf=UEe,ve.pull=bwe,ve.pullAll=MH,ve.pullAllBy=wwe,ve.pullAllWith=Swe,ve.pullAt=Ewe,ve.range=$Ee,ve.rangeRight=zEe,ve.rearg=F2e,ve.reject=C2e,ve.remove=Cwe,ve.rest=L2e,ve.reverse=AR,ve.sampleSize=_2e,ve.set=HSe,ve.setWith=WSe,ve.shuffle=N2e,ve.slice=kwe,ve.sortBy=I2e,ve.sortedUniq=Pwe,ve.sortedUniqBy=Rwe,ve.split=hEe,ve.spread=B2e,ve.tail=jwe,ve.take=Dwe,ve.takeRight=Mwe,ve.takeRightWhile=Fwe,ve.takeWhile=Lwe,ve.tap=Zwe,ve.throttle=U2e,ve.thru=$k,ve.toArray=JH,ve.toPairs=iW,ve.toPairsIn=aW,ve.toPath=GEe,ve.toPlainObject=eW,ve.transform=VSe,ve.unary=$2e,ve.union=Bwe,ve.unionBy=Uwe,ve.unionWith=$we,ve.uniq=zwe,ve.uniqBy=Hwe,ve.uniqWith=Wwe,ve.unset=qSe,ve.unzip=TR,ve.unzipWith=FH,ve.update=GSe,ve.updateWith=KSe,ve.values=O1,ve.valuesIn=XSe,ve.without=Vwe,ve.words=lW,ve.wrap=z2e,ve.xor=qwe,ve.xorBy=Gwe,ve.xorWith=Kwe,ve.zip=Xwe,ve.zipObject=Ywe,ve.zipObjectDeep=Qwe,ve.zipWith=Jwe,ve.entries=iW,ve.entriesIn=aW,ve.extend=tW,ve.extendWith=Kk,BR(ve,ve),ve.add=XEe,ve.attempt=cW,ve.camelCase=ZSe,ve.capitalize=sW,ve.ceil=YEe,ve.clamp=YSe,ve.clone=W2e,ve.cloneDeep=q2e,ve.cloneDeepWith=G2e,ve.cloneWith=V2e,ve.conformsTo=K2e,ve.deburr=oW,ve.defaultTo=AEe,ve.divide=QEe,ve.endsWith=eEe,ve.eq=Ru,ve.escape=tEe,ve.escapeRegExp=rEe,ve.every=c2e,ve.find=d2e,ve.findIndex=PH,ve.findKey=CSe,ve.findLast=f2e,ve.findLastIndex=RH,ve.findLastKey=kSe,ve.floor=JEe,ve.forEach=BH,ve.forEachRight=UH,ve.forIn=_Se,ve.forInRight=NSe,ve.forOwn=ASe,ve.forOwnRight=TSe,ve.get=jR,ve.gt=X2e,ve.gte=Y2e,ve.has=PSe,ve.hasIn=DR,ve.head=DH,ve.identity=cl,ve.includes=x2e,ve.indexOf=fwe,ve.inRange=QSe,ve.invoke=DSe,ve.isArguments=Mm,ve.isArray=qr,ve.isArrayBuffer=Q2e,ve.isArrayLike=ol,ve.isArrayLikeObject=ma,ve.isBoolean=J2e,ve.isBuffer=Np,ve.isDate=Z2e,ve.isElement=eSe,ve.isEmpty=tSe,ve.isEqual=rSe,ve.isEqualWith=nSe,ve.isError=PR,ve.isFinite=iSe,ve.isFunction=zf,ve.isInteger=KH,ve.isLength=qk,ve.isMap=XH,ve.isMatch=aSe,ve.isMatchWith=sSe,ve.isNaN=oSe,ve.isNative=lSe,ve.isNil=uSe,ve.isNull=cSe,ve.isNumber=YH,ve.isObject=Wi,ve.isObjectLike=ta,ve.isPlainObject=fw,ve.isRegExp=RR,ve.isSafeInteger=dSe,ve.isSet=QH,ve.isString=Gk,ve.isSymbol=Wl,ve.isTypedArray=I1,ve.isUndefined=fSe,ve.isWeakMap=hSe,ve.isWeakSet=pSe,ve.join=xwe,ve.kebabCase=nEe,ve.last=Oc,ve.lastIndexOf=vwe,ve.lowerCase=iEe,ve.lowerFirst=aEe,ve.lt=mSe,ve.lte=gSe,ve.max=ZEe,ve.maxBy=eCe,ve.mean=tCe,ve.meanBy=rCe,ve.min=nCe,ve.minBy=iCe,ve.stubArray=$R,ve.stubFalse=zR,ve.stubObject=HEe,ve.stubString=WEe,ve.stubTrue=VEe,ve.multiply=aCe,ve.nth=ywe,ve.noConflict=DEe,ve.noop=UR,ve.now=Hk,ve.pad=sEe,ve.padEnd=oEe,ve.padStart=lEe,ve.parseInt=cEe,ve.random=JSe,ve.reduce=S2e,ve.reduceRight=E2e,ve.repeat=uEe,ve.replace=dEe,ve.result=zSe,ve.round=sCe,ve.runInContext=ce,ve.sample=k2e,ve.size=A2e,ve.snakeCase=fEe,ve.some=T2e,ve.sortedIndex=_we,ve.sortedIndexBy=Nwe,ve.sortedIndexOf=Awe,ve.sortedLastIndex=Twe,ve.sortedLastIndexBy=Iwe,ve.sortedLastIndexOf=Owe,ve.startCase=pEe,ve.startsWith=mEe,ve.subtract=oCe,ve.sum=lCe,ve.sumBy=cCe,ve.template=gEe,ve.times=qEe,ve.toFinite=Hf,ve.toInteger=an,ve.toLength=ZH,ve.toLower=xEe,ve.toNumber=Pc,ve.toSafeInteger=xSe,ve.toString=Yn,ve.toUpper=vEe,ve.trim=yEe,ve.trimEnd=bEe,ve.trimStart=wEe,ve.truncate=SEe,ve.unescape=EEe,ve.uniqueId=KEe,ve.upperCase=CEe,ve.upperFirst=MR,ve.each=BH,ve.eachRight=UH,ve.first=DH,BR(ve,function(){var w={};return Nd(ve,function(N,M){An.call(ve.prototype,M)||(w[M]=N)}),w}(),{chain:!1}),ve.VERSION=n,al(["bind","bindKey","curry","curryRight","partial","partialRight"],function(w){ve[w].placeholder=ve}),al(["drop","take"],function(w,N){Tn.prototype[w]=function(M){M=M===r?1:Va(an(M),0);var K=this.__filtered__&&!N?new Tn(this):this.clone();return K.__filtered__?K.__takeCount__=Ys(M,K.__takeCount__):K.__views__.push({size:Ys(M,_e),type:w+(K.__dir__<0?"Right":"")}),K},Tn.prototype[w+"Right"]=function(M){return this.reverse()[w](M).reverse()}}),al(["filter","map","takeWhile"],function(w,N){var M=N+1,K=M==X||M==Q;Tn.prototype[w]=function(le){var Ce=this.clone();return Ce.__iteratees__.push({iteratee:Ar(le,3),type:M}),Ce.__filtered__=Ce.__filtered__||K,Ce}}),al(["head","last"],function(w,N){var M="take"+(N?"Right":"");Tn.prototype[w]=function(){return this[M](1).value()[0]}}),al(["initial","tail"],function(w,N){var M="drop"+(N?"":"Right");Tn.prototype[w]=function(){return this.__filtered__?new Tn(this):this[M](1)}}),Tn.prototype.compact=function(){return this.filter(cl)},Tn.prototype.find=function(w){return this.filter(w).head()},Tn.prototype.findLast=function(w){return this.reverse().find(w)},Tn.prototype.invokeMap=mn(function(w,N){return typeof w=="function"?new Tn(this):this.map(function(M){return sw(M,w,N)})}),Tn.prototype.reject=function(w){return this.filter(Vk(Ar(w)))},Tn.prototype.slice=function(w,N){w=an(w);var M=this;return M.__filtered__&&(w>0||N<0)?new Tn(M):(w<0?M=M.takeRight(-w):w&&(M=M.drop(w)),N!==r&&(N=an(N),M=N<0?M.dropRight(-N):M.take(N-w)),M)},Tn.prototype.takeRightWhile=function(w){return this.reverse().takeWhile(w).reverse()},Tn.prototype.toArray=function(){return this.take(_e)},Nd(Tn.prototype,function(w,N){var M=/^(?:filter|find|map|reject)|While$/.test(N),K=/^(?:head|last)$/.test(N),le=ve[K?"take"+(N=="last"?"Right":""):N],Ce=K||/^find/.test(N);le&&(ve.prototype[N]=function(){var Me=this.__wrapped__,Ue=K?[1]:arguments,Ke=Me instanceof Tn,yt=Ue[0],bt=Ke||qr(Me),Nt=function(_n){var On=le.apply(ve,$l([_n],Ue));return K&&Ht?On[0]:On};bt&&M&&typeof yt=="function"&&yt.length!=1&&(Ke=bt=!1);var Ht=this.__chain__,nr=!!this.__actions__.length,Or=Ce&&!Ht,cn=Ke&&!nr;if(!Ce&&bt){Me=cn?Me:new Tn(this);var Pr=w.apply(Me,Ue);return Pr.__actions__.push({func:$k,args:[Nt],thisArg:r}),new Ac(Pr,Ht)}return Or&&cn?w.apply(this,Ue):(Pr=this.thru(Nt),Or?K?Pr.value()[0]:Pr.value():Pr)})}),al(["pop","push","shift","sort","splice","unshift"],function(w){var N=Wa[w],M=/^(?:push|sort|unshift)$/.test(w)?"tap":"thru",K=/^(?:pop|shift)$/.test(w);ve.prototype[w]=function(){var le=arguments;if(K&&!this.__chain__){var Ce=this.value();return N.apply(qr(Ce)?Ce:[],le)}return this[M](function(Me){return N.apply(qr(Me)?Me:[],le)})}}),Nd(Tn.prototype,function(w,N){var M=ve[N];if(M){var K=M.name+"";An.call(k1,K)||(k1[K]=[]),k1[K].push({name:N,func:M})}}),k1[jk(r,S).name]=[{name:"wrapper",func:r}],Tn.prototype.clone=Eye,Tn.prototype.reverse=Cye,Tn.prototype.value=kye,ve.prototype.at=e2e,ve.prototype.chain=t2e,ve.prototype.commit=r2e,ve.prototype.next=n2e,ve.prototype.plant=a2e,ve.prototype.reverse=s2e,ve.prototype.toJSON=ve.prototype.valueOf=ve.prototype.value=o2e,ve.prototype.first=ve.prototype.head,Zb&&(ve.prototype[Zb]=i2e),ve},Oe=xe();Rf?((Rf.exports=Oe)._=Oe,qb._=Oe):Na._=Oe}).call(Ve)})(dT,dT.exports);var N8e=dT.exports;const Coe=I.createContext(void 0),Yj={customers:[],projects:[],samples:[],sampleCheckouts:[],installers:[],quotes:[],jobs:[],changeOrders:[],materialOrders:[],vendors:[],users:[]},A8e=({children:e})=>{const t=tm.useSessionContext(),r=$a(),[n,i]=I.useState(Yj),[a,s]=I.useState(null),[o,l]=I.useState(!0),[c,d]=I.useState(null),[f,p]=I.useState([]),[m,x]=I.useState(!1),{data:y=0}=m6e(!!c),{data:b=[],isLoading:S}=wb(!!c),_=K7(),{data:C=[],isLoading:A}=Xx(),{data:j=[],isLoading:P}=np(!!c),{data:O=[],isLoading:D}=Cf(!!c),{data:L=[],isLoading:B}=F4(!!c),{data:H=[],isLoading:z}=L4(),ie=Y7(),{data:X=[],isLoading:W}=goe(),Q=xoe(),{data:te=[],isLoading:J}=voe(),Y=J7(),{data:pe=[],isLoading:_e}=U4(),ee=$4(),{data:de=[],isLoading:G}=lC(),q=woe(),{customerHistory:ne,fetchCustomerHistory:Se,projectHistory:re,fetchProjectHistory:ae,quotesHistory:ge,fetchQuotesHistory:Ee,installerHistory:V,fetchInstallerHistory:Ae,vendorHistory:Pe,fetchVendorHistory:ze,sampleHistory:De,fetchSampleHistory:$e,materialOrderHistory:et,fetchMaterialOrderHistory:ut}=d8e(),kt=()=>{x(he=>!he)},ht=I.useCallback(N8e.debounce(he=>{d(me=>{var it,Ge,Ye,Ze;if(!me)return null;const Fe={...me.preferences,...he,calendarColor:he.calendarColor||((it=me.preferences)==null?void 0:it.calendarColor),dashboardEmail:{...((Ge=me.preferences)==null?void 0:Ge.dashboardEmail)||{},...he.dashboardEmail||{}},calendar_user_colors:{...((Ye=me.preferences)==null?void 0:Ye.calendar_user_colors)||{},...he.calendar_user_colors||{}},projectLayouts:he.projectLayouts||((Ze=me.preferences)==null?void 0:Ze.projectLayouts)};return w8e(Fe).then(()=>Re.success("Preferences saved!")).catch(wt=>{console.error("Failed to save preferences:",wt),Re.error("Could not save your preferences.")}),{...me,preferences:Fe}})},1e3),[]),jr=I.useCallback(async()=>{try{const he=await Soe(),me=await b8e();d({...he,preferences:me})}catch(he){console.error("Failed to fetch current user:",he),d(null)}},[]),er=I.useCallback(async()=>{try{const he=await k8e("branding");s(he)}catch(he){console.error("Failed to fetch branding:",he)}},[]);I.useEffect(()=>{if(a){const he=document.documentElement;a.primaryColor&&he.style.setProperty("--color-primary",a.primaryColor),a.secondaryColor&&(he.style.setProperty("--color-secondary",a.secondaryColor),he.style.setProperty("--color-border",a.secondaryColor)),a.accentColor&&he.style.setProperty("--color-accent",a.accentColor),a.backgroundColor&&he.style.setProperty("--color-background",a.backgroundColor),a.surfaceColor&&he.style.setProperty("--color-surface",a.surfaceColor),a.textPrimaryColor&&he.style.setProperty("--color-text-primary",a.textPrimaryColor),a.textSecondaryColor&&he.style.setProperty("--color-text-secondary",a.textSecondaryColor)}},[a]);const ct=I.useCallback(async()=>{try{const he=await Z7();p(he)}catch(he){console.error("Failed to fetch all users:",he),p([])}},[]),qt=I.useCallback(async()=>{l(!0);try{await Promise.all([er()]),i({customers:[],projects:[],samples:[],products:[],sampleCheckouts:[],installers:[],quotes:[],jobs:[],changeOrders:[],materialOrders:[],vendors:[],users:[]})}catch(he){console.error("Initial data fetch failed (likely no session):",he),i(Yj)}finally{l(!1)}},[er]);I.useEffect(()=>{if(t.loading){l(!0);return}t.doesSessionExist?jr().then(()=>{qt(),ct()}):(i(Yj),d(null),l(!1))},[t.doesSessionExist,t.loading,qt,jr,ct]);const Lt=async()=>{await r.invalidateQueries({queryKey:["products"]})},dr=async he=>{try{const me=await _.addProduct.mutateAsync(he);return Re.success("Product created successfully"),me}catch(me){throw console.error("Failed to add product",me),Re.error(me.message||"Failed to add product"),me}},Gt=async(he,me)=>{try{await _.updateProduct.mutateAsync({id:he,formData:me}),Re.success("Product updated successfully")}catch(Fe){throw console.error("Failed to update product",Fe),Re.error(Fe.message),Fe}},qe=async he=>{try{await _.deleteProduct.mutateAsync(he),Re.success("Product deleted successfully")}catch(me){throw console.error("Failed to delete product",me),Re.error(me.message),me}},Xe=async(he,me)=>{try{const Fe=await _.addVariant.mutateAsync({productId:he,formData:me});return Re.success("Variant added successfully"),Fe}catch(Fe){throw console.error("Failed to add variant",Fe),Re.error(Fe.message),Fe}},Te=I.useCallback(async(he,me)=>{try{const Fe=await _.addVariantsBatch.mutateAsync({productId:he,variants:me});Re.success(`Generated ${Fe.length} variants successfully`)}catch(Fe){throw console.error("Failed to batch add variants",Fe),Re.error(Fe.message||"Failed to add variants batch"),Fe}},[_.addVariantsBatch]),He=async(he,me)=>{try{const Fe=await _.updateVariant.mutateAsync({variantId:he,formData:me});return Re.success("Variant updated successfully"),Fe}catch(Fe){throw console.error("Failed to update variant",Fe),Re.error(Fe.message),Fe}},je=async(he,me)=>{try{await _.deleteVariant.mutateAsync({variantId:he,productId:me}),Re.success("Variant deleted successfully")}catch(Fe){throw console.error("Failed to delete variant",Fe),Re.error(Fe.message),Fe}},we=Lt,ot=I.useCallback(async he=>{throw Re.error("Deprecated function called: Use addProduct."),new Error("Deprecated function called.")},[]),xt=I.useCallback(async(he,me)=>{Re.error("Deprecated function called: Use updateProduct.")},[]),Dt=I.useCallback(async(he,me)=>{Re.error("Deprecated function called: Use updateProduct/ProductService.")},[]),Pt=I.useCallback(async he=>{Re.error("Deprecated function called: Use deleteProduct.")},[]),kr=I.useCallback(async he=>{try{await q.addSampleCheckout(he),Re.success("Sample checked out!")}catch(me){throw console.error("Error adding sample checkout:",me),Re.error(me.message),me}},[q.addSampleCheckout]),Cn=I.useCallback(async he=>{try{await q.returnSampleCheckout(he),Re.success("Sample returned!")}catch(me){throw console.error("Error updating sample checkout:",me),Re.error(me.message),me}},[q.returnSampleCheckout]),fr=I.useCallback(async he=>{try{await q.extendSampleCheckout(he.id),Re.success("Checkout extended by 2 days!")}catch(me){throw console.error("Error extending sample checkout:",me),Re.error(me.message),me}},[q.extendSampleCheckout]),Qi=I.useCallback(async he=>{try{await q.patchSampleCheckout({id:he.id,data:{isSelected:!he.isSelected}}),Re.success(he.isSelected?"Sample deselected.":"Sample selected!")}catch(me){console.error("Error toggling selection:",me),Re.error("Failed to update selection.")}},[q.patchSampleCheckout]),Fn=I.useCallback(async he=>{try{await ie.addQuote(he),Re.success("Quote added successfully!")}catch(me){throw console.error("Error adding quote:",me),Re.error(me.message),me}},[ie.addQuote]),il=I.useCallback(async he=>{try{await ie.updateQuote(he),Re.success("Quote updated!")}catch(me){throw console.error("Error updating quote:",me),Re.error(me.message),me}},[ie.updateQuote]),We=I.useCallback(async he=>{try{await ie.acceptQuote(he),Re.success("Quote accepted and project status updated!")}catch(me){throw console.error("Error accepting quote:",me),Re.error(me.message),me}},[ie.acceptQuote]),Je=I.useCallback(async he=>{try{await Q.saveJobDetails.mutateAsync(he),Re.success("Job details saved!")}catch(me){throw console.error("Error saving job details:",me),Re.error(me.message),me}},[Q.saveJobDetails]),rt=I.useCallback(async he=>{try{await Y.addChangeOrder(he),Re.success("Change order added!")}catch(me){throw console.error("Error adding change order:",me),Re.error(me.message),me}},[Y.addChangeOrder]),_t=I.useCallback(async(he,me)=>{try{await Y.updateChangeOrder({id:he,data:me}),Re.success("Change order updated!")}catch(Fe){throw console.error("Error updating change order:",Fe),Re.error(Fe.message),Fe}},[Y.updateChangeOrder]),Ut=I.useCallback(async he=>{try{await Y.deleteChangeOrder(he)}catch(me){throw console.error("Error deleting change order:",me),me}},[Y.deleteChangeOrder]),ir=I.useCallback(async he=>{try{await ee.addMaterialOrder(he),Re.success("Material order created!")}catch(me){throw console.error("Error adding material order:",me),Re.error(me.message),me}},[ee.addMaterialOrder]),tr=I.useCallback(async(he,me)=>{try{await ee.updateMaterialOrder({id:he,data:me}),Re.success("Material order updated!")}catch(Fe){throw console.error("Error updating material order:",Fe),Re.error(Fe.message),Fe}},[ee.updateMaterialOrder]),$t=I.useCallback(async he=>{try{await ee.deleteMaterialOrder(he),Re.success("Material order deleted!")}catch(me){throw console.error("Error deleting material order:",me),Re.error(me.message),me}},[ee.deleteMaterialOrder]),_r=I.useCallback(async(he,me)=>{try{await ee.receiveMaterialOrder({id:he,data:me}),Re.success("Order received!")}catch(Fe){throw console.error("Error receiving material order:",Fe),Re.error(Fe.message),Fe}},[ee.receiveMaterialOrder]),Jt=I.useCallback(async(he,me)=>{try{await ee.reportMaterialOrderDamage({id:he,data:me}),Re.success("Damage reported & replacement ordered!")}catch(Fe){throw console.error("Error reporting damage:",Fe),Re.error(Fe.message),Fe}},[ee.reportMaterialOrderDamage]),Hn=I.useCallback(he=>{r.setQueryData(["jobs"],me=>me?me.map(Fe=>Fe.id===he.id?he:Fe):[he])},[r]),ue=I.useCallback(async(he,me)=>{try{const Fe=await p8e(he,me);d(it=>it?{...it,...Fe}:null),Re.success("Profile updated successfully!")}catch(Fe){throw console.error("Error updating profile:",Fe),Re.error("Failed to update profile."),Fe}},[]),fe=I.useCallback(async he=>{try{const{avatarUrl:me}=await m8e(he);d(Fe=>Fe?{...Fe,avatarUrl:me}:null),Re.success("Avatar uploaded successfully!")}catch(me){throw console.error("Error uploading avatar:",me),Re.error("Failed to upload avatar."),me}},[]),ye=I.useCallback(async()=>{try{await g8e(),d(he=>he?{...he,avatarUrl:null}:null),Re.success("Avatar removed.")}catch(he){console.error("Error removing avatar:",he),Re.error("Failed to remove avatar.")}},[]),ke={customers:C,projects:j,samples:[],sampleCheckouts:de,installers:O,quotes:H,jobs:X,changeOrders:te,materialOrders:pe,vendors:L,users:f,products:b,isLoading:o||S||A||P||D||B||z||W||J||_e||G,currentUser:c,systemBranding:a,refreshBranding:er,isLayoutEditMode:m,toggleLayoutEditMode:kt,updateCurrentUserProfile:ue,uploadCurrentUserAvatar:fe,deleteCurrentUserAvatar:ye,saveCurrentUserPreferences:ht,customerHistory:ne,fetchCustomerHistory:Se,projectHistory:re,fetchProjectHistory:ae,quotesHistory:ge,fetchQuotesHistory:Ee,installerHistory:V,fetchInstallerHistory:Ae,vendorHistory:Pe,fetchVendorHistory:ze,sampleHistory:De,fetchSampleHistory:$e,materialOrderHistory:et,fetchMaterialOrderHistory:ut,fetchSamples:we,addSample:ot,updateSample:xt,deleteSample:Pt,toggleSampleDiscontinued:Dt,fetchProducts:Lt,addProduct:dr,updateProduct:Gt,deleteProduct:qe,addVariant:Xe,addVariantsBatch:Te,updateVariant:He,deleteVariant:je,addSampleCheckout:kr,updateSampleCheckout:Cn,extendSampleCheckout:fr,toggleSampleSelection:Qi,addQuote:Fn,updateQuote:il,acceptQuote:We,saveJobDetails:Je,addChangeOrder:rt,updateChangeOrder:_t,deleteChangeOrder:Ut,addMaterialOrder:ir,updateMaterialOrder:tr,deleteMaterialOrder:$t,receiveMaterialOrder:_r,reportMaterialOrderDamage:Jt,updateJob:Hn,unreadCount:y,refreshNotifications:async()=>r.invalidateQueries({queryKey:["notifications","unreadCount"]})};return u.jsx(Coe.Provider,{value:ke,children:e})},Xr=()=>{const e=I.useContext(Coe);if(e===void 0)throw new Error("useData must be used within a DataProvider");return e},T8e="modulepreload",I8e=function(e){return"/"+e},aG={},uC=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(r.map(l=>{if(l=I8e(l),l in aG)return;aG[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":T8e,c||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),c)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */const O8e=e=>{const t=new Map;t.set("web",{name:"web"});const r=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t},n=(a,s)=>{r.platforms.set(a,s)},i=a=>{r.platforms.has(a)&&(r.currentPlatform=r.platforms.get(a))};return r.addPlatform=n,r.setPlatform=i,r},P8e=e=>e.CapacitorPlatforms=O8e(e),koe=P8e(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});koe.addPlatform;koe.setPlatform;var yy;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(yy||(yy={}));let Qj=class extends Error{constructor(t,r){super(t),this.message=t,this.code=r}};const R8e=e=>{var t,r;return e!=null&&e.androidBridge?"android":!((r=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},j8e=e=>{var t,r,n,i,a;const s=e.CapacitorCustomPlatform||null,o=e.Capacitor||{},l=o.Plugins=o.Plugins||{},c=e.CapacitorPlatforms,d=()=>s!==null?s.name:R8e(e),f=((t=c==null?void 0:c.currentPlatform)===null||t===void 0?void 0:t.getPlatform)||d,p=()=>f()!=="web",m=((r=c==null?void 0:c.currentPlatform)===null||r===void 0?void 0:r.isNativePlatform)||p,x=O=>{const D=A.get(O);return!!(D!=null&&D.platforms.has(f())||S(O))},y=((n=c==null?void 0:c.currentPlatform)===null||n===void 0?void 0:n.isPluginAvailable)||x,b=O=>{var D;return(D=o.PluginHeaders)===null||D===void 0?void 0:D.find(L=>L.name===O)},S=((i=c==null?void 0:c.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||b,_=O=>e.console.error(O),C=(O,D,L)=>Promise.reject(`${L} does not have an implementation of "${D}".`),A=new Map,j=(O,D={})=>{const L=A.get(O);if(L)return console.warn(`Capacitor plugin "${O}" already registered. Cannot register plugins twice.`),L.proxy;const B=f(),H=S(O);let z;const ie=async()=>(!z&&B in D?z=typeof D[B]=="function"?z=await D[B]():z=D[B]:s!==null&&!z&&"web"in D&&(z=typeof D.web=="function"?z=await D.web():z=D.web),z),X=(pe,_e)=>{var ee,de;if(H){const G=H==null?void 0:H.methods.find(q=>_e===q.name);if(G)return G.rtype==="promise"?q=>o.nativePromise(O,_e.toString(),q):(q,ne)=>o.nativeCallback(O,_e.toString(),q,ne);if(pe)return(ee=pe[_e])===null||ee===void 0?void 0:ee.bind(pe)}else{if(pe)return(de=pe[_e])===null||de===void 0?void 0:de.bind(pe);throw new Qj(`"${O}" plugin is not implemented on ${B}`,yy.Unimplemented)}},W=pe=>{let _e;const ee=(...de)=>{const G=ie().then(q=>{const ne=X(q,pe);if(ne){const Se=ne(...de);return _e=Se==null?void 0:Se.remove,Se}else throw new Qj(`"${O}.${pe}()" is not implemented on ${B}`,yy.Unimplemented)});return pe==="addListener"&&(G.remove=async()=>_e()),G};return ee.toString=()=>`${pe.toString()}() { [capacitor code] }`,Object.defineProperty(ee,"name",{value:pe,writable:!1,configurable:!1}),ee},Q=W("addListener"),te=W("removeListener"),J=(pe,_e)=>{const ee=Q({eventName:pe},_e),de=async()=>{const q=await ee;te({eventName:pe,callbackId:q},_e)},G=new Promise(q=>ee.then(()=>q({remove:de})));return G.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await de()},G},Y=new Proxy({},{get(pe,_e){switch(_e){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return H?J:Q;case"removeListener":return te;default:return W(_e)}}});return l[O]=Y,A.set(O,{name:O,proxy:Y,platforms:new Set([...Object.keys(D),...H?[B]:[]])}),Y},P=((a=c==null?void 0:c.currentPlatform)===null||a===void 0?void 0:a.registerPlugin)||j;return o.convertFileSrc||(o.convertFileSrc=O=>O),o.getPlatform=f,o.handleError=_,o.isNativePlatform=m,o.isPluginAvailable=y,o.pluginMethodNoop=C,o.registerPlugin=P,o.Exception=Qj,o.DEBUG=!!o.DEBUG,o.isLoggingEnabled=!!o.isLoggingEnabled,o.platform=o.getPlatform(),o.isNative=o.isNativePlatform(),o},D8e=e=>e.Capacitor=j8e(e),fT=D8e(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),M8e=fT.registerPlugin;fT.Plugins;let TAt=class{constructor(t){this.listeners={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,r){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(r);const i=this.windowListeners[t];i&&!i.registered&&this.addWindowListener(i);const a=async()=>this.removeListener(t,r),s=Promise.resolve({remove:a});return Object.defineProperty(s,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await a()}}),s}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,r){const n=this.listeners[t];n&&n.forEach(i=>i(r))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,r){this.windowListeners[r]={registered:!1,windowEventName:t,pluginEventName:r,handler:n=>{this.notifyListeners(r,n)}}}unimplemented(t="not implemented"){return new fT.Exception(t,yy.Unimplemented)}unavailable(t="not available"){return new fT.Exception(t,yy.Unavailable)}async removeListener(t,r){const n=this.listeners[t];if(!n)return;const i=n.indexOf(r);this.listeners[t].splice(i,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}};var sG;(function(e){e[e.NONE=0]="NONE",e[e.TOUCH_ID=1]="TOUCH_ID",e[e.FACE_ID=2]="FACE_ID",e[e.FINGERPRINT=3]="FINGERPRINT",e[e.FACE_AUTHENTICATION=4]="FACE_AUTHENTICATION",e[e.IRIS_AUTHENTICATION=5]="IRIS_AUTHENTICATION",e[e.MULTIPLE=6]="MULTIPLE"})(sG||(sG={}));var oG;(function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",e[e.BIOMETRICS_UNAVAILABLE=1]="BIOMETRICS_UNAVAILABLE",e[e.USER_LOCKOUT=2]="USER_LOCKOUT",e[e.BIOMETRICS_NOT_ENROLLED=3]="BIOMETRICS_NOT_ENROLLED",e[e.USER_TEMPORARY_LOCKOUT=4]="USER_TEMPORARY_LOCKOUT",e[e.AUTHENTICATION_FAILED=10]="AUTHENTICATION_FAILED",e[e.APP_CANCEL=11]="APP_CANCEL",e[e.INVALID_CONTEXT=12]="INVALID_CONTEXT",e[e.NOT_INTERACTIVE=13]="NOT_INTERACTIVE",e[e.PASSCODE_NOT_SET=14]="PASSCODE_NOT_SET",e[e.SYSTEM_CANCEL=15]="SYSTEM_CANCEL",e[e.USER_CANCEL=16]="USER_CANCEL",e[e.USER_FALLBACK=17]="USER_FALLBACK"})(oG||(oG={}));const lG=M8e("NativeBiometric",{web:()=>uC(()=>import("./web-D_G29ctr.js"),[]).then(e=>new e.NativeBiometricWeb)});/*! Capacitor: https://capacitorjs.com/ - MIT License */const F8e=e=>{const t=new Map;t.set("web",{name:"web"});const r=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t},n=(a,s)=>{r.platforms.set(a,s)},i=a=>{r.platforms.has(a)&&(r.currentPlatform=r.platforms.get(a))};return r.addPlatform=n,r.setPlatform=i,r},L8e=e=>e.CapacitorPlatforms=F8e(e),_oe=L8e(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});_oe.addPlatform;_oe.setPlatform;var by;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(by||(by={}));class Jj extends Error{constructor(t,r,n){super(t),this.message=t,this.code=r,this.data=n}}const B8e=e=>{var t,r;return e!=null&&e.androidBridge?"android":!((r=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},U8e=e=>{var t,r,n,i,a;const s=e.CapacitorCustomPlatform||null,o=e.Capacitor||{},l=o.Plugins=o.Plugins||{},c=e.CapacitorPlatforms,d=()=>s!==null?s.name:B8e(e),f=((t=c==null?void 0:c.currentPlatform)===null||t===void 0?void 0:t.getPlatform)||d,p=()=>f()!=="web",m=((r=c==null?void 0:c.currentPlatform)===null||r===void 0?void 0:r.isNativePlatform)||p,x=O=>{const D=A.get(O);return!!(D!=null&&D.platforms.has(f())||S(O))},y=((n=c==null?void 0:c.currentPlatform)===null||n===void 0?void 0:n.isPluginAvailable)||x,b=O=>{var D;return(D=o.PluginHeaders)===null||D===void 0?void 0:D.find(L=>L.name===O)},S=((i=c==null?void 0:c.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||b,_=O=>e.console.error(O),C=(O,D,L)=>Promise.reject(`${L} does not have an implementation of "${D}".`),A=new Map,j=(O,D={})=>{const L=A.get(O);if(L)return console.warn(`Capacitor plugin "${O}" already registered. Cannot register plugins twice.`),L.proxy;const B=f(),H=S(O);let z;const ie=async()=>(!z&&B in D?z=typeof D[B]=="function"?z=await D[B]():z=D[B]:s!==null&&!z&&"web"in D&&(z=typeof D.web=="function"?z=await D.web():z=D.web),z),X=(pe,_e)=>{var ee,de;if(H){const G=H==null?void 0:H.methods.find(q=>_e===q.name);if(G)return G.rtype==="promise"?q=>o.nativePromise(O,_e.toString(),q):(q,ne)=>o.nativeCallback(O,_e.toString(),q,ne);if(pe)return(ee=pe[_e])===null||ee===void 0?void 0:ee.bind(pe)}else{if(pe)return(de=pe[_e])===null||de===void 0?void 0:de.bind(pe);throw new Jj(`"${O}" plugin is not implemented on ${B}`,by.Unimplemented)}},W=pe=>{let _e;const ee=(...de)=>{const G=ie().then(q=>{const ne=X(q,pe);if(ne){const Se=ne(...de);return _e=Se==null?void 0:Se.remove,Se}else throw new Jj(`"${O}.${pe}()" is not implemented on ${B}`,by.Unimplemented)});return pe==="addListener"&&(G.remove=async()=>_e()),G};return ee.toString=()=>`${pe.toString()}() { [capacitor code] }`,Object.defineProperty(ee,"name",{value:pe,writable:!1,configurable:!1}),ee},Q=W("addListener"),te=W("removeListener"),J=(pe,_e)=>{const ee=Q({eventName:pe},_e),de=async()=>{const q=await ee;te({eventName:pe,callbackId:q},_e)},G=new Promise(q=>ee.then(()=>q({remove:de})));return G.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await de()},G},Y=new Proxy({},{get(pe,_e){switch(_e){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return H?J:Q;case"removeListener":return te;default:return W(_e)}}});return l[O]=Y,A.set(O,{name:O,proxy:Y,platforms:new Set([...Object.keys(D),...H?[B]:[]])}),Y},P=((a=c==null?void 0:c.currentPlatform)===null||a===void 0?void 0:a.registerPlugin)||j;return o.convertFileSrc||(o.convertFileSrc=O=>O),o.getPlatform=f,o.handleError=_,o.isNativePlatform=m,o.isPluginAvailable=y,o.pluginMethodNoop=C,o.registerPlugin=P,o.Exception=Jj,o.DEBUG=!!o.DEBUG,o.isLoggingEnabled=!!o.isLoggingEnabled,o.platform=o.getPlatform(),o.isNative=o.isNativePlatform(),o},$8e=e=>e.Capacitor=U8e(e),lx=$8e(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),z4=lx.registerPlugin;lx.Plugins;class Noe{constructor(t){this.listeners={},this.retainedEventArguments={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,r){let n=!1;this.listeners[t]||(this.listeners[t]=[],n=!0),this.listeners[t].push(r);const a=this.windowListeners[t];a&&!a.registered&&this.addWindowListener(a),n&&this.sendRetainedArgumentsForEvent(t);const s=async()=>this.removeListener(t,r);return Promise.resolve({remove:s})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,r,n){const i=this.listeners[t];if(!i){if(n){let a=this.retainedEventArguments[t];a||(a=[]),a.push(r),this.retainedEventArguments[t]=a}return}i.forEach(a=>a(r))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,r){this.windowListeners[r]={registered:!1,windowEventName:t,pluginEventName:r,handler:n=>{this.notifyListeners(r,n)}}}unimplemented(t="not implemented"){return new lx.Exception(t,by.Unimplemented)}unavailable(t="not available"){return new lx.Exception(t,by.Unavailable)}async removeListener(t,r){const n=this.listeners[t];if(!n)return;const i=n.indexOf(r);this.listeners[t].splice(i,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const r=this.retainedEventArguments[t];r&&(delete this.retainedEventArguments[t],r.forEach(n=>{this.notifyListeners(t,n)}))}}const cG=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),uG=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class z8e extends Noe{async getCookies(){const t=document.cookie,r={};return t.split(";").forEach(n=>{if(n.length<=0)return;let[i,a]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=uG(i).trim(),a=uG(a).trim(),r[i]=a}),r}async setCookie(t){try{const r=cG(t.key),n=cG(t.value),i=`; expires=${(t.expires||"").replace("expires=","")}`,a=(t.path||"/").replace("path=",""),s=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${r}=${n||""}${i}; path=${a}; ${s};`}catch(r){return Promise.reject(r)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const r of t)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}z4("CapacitorCookies",{web:()=>new z8e});const H8e=async e=>new Promise((t,r)=>{const n=new FileReader;n.onload=()=>{const i=n.result;t(i.indexOf(",")>=0?i.split(",")[1]:i)},n.onerror=i=>r(i),n.readAsDataURL(e)}),W8e=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(i=>i.toLocaleLowerCase()).reduce((i,a,s)=>(i[a]=e[t[s]],i),{})},V8e=(e,t=!0)=>e?Object.entries(e).reduce((n,i)=>{const[a,s]=i;let o,l;return Array.isArray(s)?(l="",s.forEach(c=>{o=t?encodeURIComponent(c):c,l+=`${a}=${o}&`}),l.slice(0,-1)):(o=t?encodeURIComponent(s):s,l=`${a}=${o}`),`${n}&${l}`},"").substr(1):null,q8e=(e,t={})=>{const r=Object.assign({method:e.method||"GET",headers:e.headers},t),i=W8e(e.headers)["content-type"]||"";if(typeof e.data=="string")r.body=e.data;else if(i.includes("application/x-www-form-urlencoded")){const a=new URLSearchParams;for(const[s,o]of Object.entries(e.data||{}))a.set(s,o);r.body=a.toString()}else if(i.includes("multipart/form-data")||e.data instanceof FormData){const a=new FormData;if(e.data instanceof FormData)e.data.forEach((o,l)=>{a.append(l,o)});else for(const o of Object.keys(e.data))a.append(o,e.data[o]);r.body=a;const s=new Headers(r.headers);s.delete("content-type"),r.headers=s}else(i.includes("application/json")||typeof e.data=="object")&&(r.body=JSON.stringify(e.data));return r};class G8e extends Noe{async request(t){const r=q8e(t,t.webFetchExtra),n=V8e(t.params,t.shouldEncodeUrlParams),i=n?`${t.url}?${n}`:t.url,a=await fetch(i,r),s=a.headers.get("content-type")||"";let{responseType:o="text"}=a.ok?t:{};s.includes("application/json")&&(o="json");let l,c;switch(o){case"arraybuffer":case"blob":c=await a.blob(),l=await H8e(c);break;case"json":l=await a.json();break;case"document":case"text":default:l=await a.text()}const d={};return a.headers.forEach((f,p)=>{d[p]=f}),{data:l,headers:d,status:a.status,url:a.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}z4("CapacitorHttp",{web:()=>new G8e});const hT=z4("App",{web:()=>uC(()=>import("./web-D_MXsdvz.js"),[]).then(e=>new e.AppWeb)}),Qf=z4("Preferences",{web:()=>uC(()=>import("./web-CL-NS_8i.js"),[]).then(e=>new e.PreferencesWeb)});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8e=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Aoe=(...e)=>e.filter((t,r,n)=>!!t&&n.indexOf(t)===r).join(" ");/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var X8e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8e=I.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:s,...o},l)=>I.createElement("svg",{ref:l,...X8e,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:Aoe("lucide",i),...o},[...s.map(([c,d])=>I.createElement(c,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=(e,t)=>{const r=I.forwardRef(({className:n,...i},a)=>I.createElement(Y8e,{ref:a,iconNode:t,className:Aoe(`lucide-${K8e(e)}`,n),...i}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dG=mt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8e=mt("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8e=mt("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8e=mt("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=mt("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=mt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=mt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eFe=mt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=mt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tFe=mt("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rFe=mt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nFe=mt("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=mt("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Toe=mt("Brush",[["path",{d:"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08",key:"1styjt"}],["path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z",key:"z0l1mu"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iFe=mt("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=mt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=mt("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=mt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aFe=mt("CameraOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16",key:"qmtpty"}],["path",{d:"M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5",key:"1ufyfc"}],["path",{d:"M14.121 15.121A3 3 0 1 1 9.88 10.88",key:"11zox6"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=mt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=mt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=mt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fG=mt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=mt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=mt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sFe=mt("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=mt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=mt("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=mt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=mt("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=mt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oFe=mt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lFe=mt("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=mt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=mt("CloudDownload",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m8 17 4 4 4-4",key:"1ul180"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ioe=mt("CloudUpload",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cFe=mt("CopyPlus",[["line",{x1:"15",x2:"15",y1:"12",y2:"18",key:"1p7wdc"}],["line",{x1:"12",x2:"18",y1:"15",y2:"15",key:"1nscbv"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=mt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=mt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=mt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=mt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uFe=mt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ooe=mt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=mt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dFe=mt("FilePen",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fFe=mt("FileSliders",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M10 11v2",key:"1s651w"}],["path",{d:"M8 17h8",key:"wh5c61"}],["path",{d:"M14 16v2",key:"12fp5e"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hFe=mt("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=mt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pFe=mt("FileType",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 13v-1h6v1",key:"1bb014"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M11 18h2",key:"12mj7e"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Poe=mt("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=mt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=mt("Fingerprint",[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8=mt("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hG=mt("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mFe=mt("GitCommitHorizontal",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=mt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pG=mt("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gFe=mt("Hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=mt("HardHat",[["path",{d:"M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z",key:"1dej2m"}],["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xFe=mt("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vFe=mt("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yFe=mt("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=mt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Roe=mt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=mt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mG=mt("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bFe=mt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wFe=mt("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=mt("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const joe=mt("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=mt("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SFe=mt("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EFe=mt("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CFe=mt("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=mt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=mt("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=mt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Doe=mt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gG=mt("MailX",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h9",key:"1j9vog"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m17 17 4 4",key:"1b3523"}],["path",{d:"m21 17-4 4",key:"uinynz"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=mt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=mt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kFe=mt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Moe=mt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=mt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Fe=mt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NFe=mt("MousePointerClick",[["path",{d:"m9 9 5 12 1.8-5.2L21 14Z",key:"1b76lo"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=mt("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AFe=mt("PackagePlus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=mt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Foe=mt("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=mt("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xG=mt("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=mt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TFe=mt("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IFe=mt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=mt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=mt("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=mt("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=mt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=mt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=mt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OFe=mt("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=mt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=mt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PFe=mt("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RFe=mt("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=mt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jFe=mt("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Loe=mt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=mt("SquareCheckBig",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=mt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Boe=mt("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uoe=mt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C8=mt("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DFe=mt("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=mt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=mt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=mt("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=mt("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=mt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MFe=mt("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FFe=mt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=mt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=mt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=mt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LFe=mt("ZapOff",[["path",{d:"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317",key:"193nxd"}],["path",{d:"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773",key:"27a7lr"}],["path",{d:"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643",key:"1e0qe9"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $oe=mt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),BFe=({onUnlock:e})=>{const t=async()=>{await tm.signOut(),window.location.href="/auth"},r=document.title||"Subfloor";return u.jsxs("div",{className:"fixed inset-0 z-[9999] bg-slate-900 flex flex-col items-center justify-center p-6 text-white",children:[u.jsx("div",{className:"w-24 h-24 bg-slate-800 rounded-full flex items-center justify-center mb-8 shadow-xl border border-slate-700",children:u.jsx(w8,{className:"w-12 h-12 text-blue-500"})}),u.jsxs("h1",{className:"text-2xl font-bold mb-2",children:[r," is Locked"]}),u.jsx("p",{className:"text-slate-400 mb-12 text-center",children:"Verify your identity to resume your session"}),u.jsxs("button",{onClick:e,className:"w-full max-w-xs bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-6 rounded-xl shadow-lg transition-all active:scale-95 flex items-center justify-center gap-3 mb-4",children:[u.jsx(w8,{className:"w-6 h-6"}),u.jsx("span",{children:"Unlock with Biometrics"})]}),u.jsxs("button",{onClick:t,className:"text-slate-400 hover:text-white flex items-center gap-2 py-4",children:[u.jsx(Doe,{className:"w-4 h-4"}),u.jsx("span",{children:"Log Out"})]})]})},zoe=I.createContext({}),Zj=5*60*1e3,eD="biometrics_enabled",F1="bio_last_active_timestamp",UFe=({children:e})=>{const{user:t}=Xr(),[r,n]=I.useState(!1),[i,a]=I.useState(!1),s=I.useRef(null);I.useEffect(()=>{(async()=>{const{value:p}=await Qf.get({key:eD}),m=p==="true";if(a(m),m){const{value:x}=await Qf.get({key:F1});if(x){const y=parseInt(x,10),b=Date.now()-y;b>Zj&&(console.log(`[Bio] Boot Lock: Inactive for ${Math.round(b/1e3)}s`),n(!0))}}})()},[]),I.useEffect(()=>{if(!lx.isNativePlatform())return;const f=hT.addListener("appStateChange",async({isActive:p})=>{if(i)if(!p)await Qf.set({key:F1,value:Date.now().toString()});else{const{value:m}=await Qf.get({key:F1});if(m){const x=Date.now()-parseInt(m,10);x>Zj&&(console.log(`[Bio] Resume Lock: Inactive for ${Math.round(x/1e3)}s`),n(!0))}}});return()=>{f.then(p=>p.remove())}},[i]);const o=()=>{!i||r||(s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{console.log("[Bio] Idle Lock: Screen left on too long"),n(!0)},Zj),Qf.set({key:F1,value:Date.now().toString()}))};I.useEffect(()=>{if(i)return window.addEventListener("touchstart",o),window.addEventListener("click",o),window.addEventListener("keypress",o),o(),()=>{window.removeEventListener("touchstart",o),window.removeEventListener("click",o),window.removeEventListener("keypress",o),s.current&&clearTimeout(s.current)}},[i,r]);const l=async()=>{try{await lG.verifyIdentity({reason:"Unlock Subfloor",title:"Verify Identity",subtitle:"Unlock App",description:"Please authenticate to continue"}),n(!1),o(),Qf.set({key:F1,value:Date.now().toString()})}catch(f){console.error("[Bio] Scan failed or cancelled",f)}},c=async()=>{try{return(await lG.isAvailable()).isAvailable?(await Qf.set({key:eD,value:"true"}),await Qf.set({key:F1,value:Date.now().toString()}),a(!0),!0):(alert("Biometrics not available on this device"),!1)}catch(f){return console.error(f),!1}},d=async()=>{await Qf.set({key:eD,value:"false"}),a(!1),n(!1)};return I.useEffect(()=>{r&&l()},[r]),u.jsxs(zoe.Provider,{value:{isEnabled:i,enableBiometrics:c,disableBiometrics:d},children:[r&&u.jsx(BFe,{onUnlock:l}),e]})},$Fe=()=>I.useContext(zoe),zFe=()=>{const[e,t]=I.useState([]),r=n=>{t(i=>[n,...i].slice(0,4))};return I.useEffect(()=>{if(!lx.isNativePlatform())return;(async()=>{try{const{PushNotifications:i}=await uC(async()=>{const{PushNotifications:s}=await import("./index-5S7dva9z.js");return{PushNotifications:s}},[]);if(r("Checking Perms..."),(await i.checkPermissions()).receive!=="granted"&&(await i.requestPermissions()).receive!=="granted"){r("User DENIED");return}r("Registering..."),await i.register(),await i.removeAllListeners(),await i.addListener("registration",async s=>{r(`TOKEN: ${s.value.substring(0,6)}...`);try{await fetch(rr("/api/notifications/register-device"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s.value,platform:"android",model:navigator.userAgent}),credentials:"include"}),r("SERVER SENT OK")}catch(o){r(`API FAIL: ${o.message}`)}}),await i.addListener("registrationError",s=>{r(`REG FAIL: ${JSON.stringify(s)}`)})}catch(i){console.error("Push Init Failed:",i),r(`INIT ERR: ${i.message}`)}})()},[]),e.length===0?null:u.jsx("div",{style:{position:"fixed",top:60,left:10,zIndex:999999,backgroundColor:"rgba(200, 0, 0, 0.8)",color:"white",padding:8,fontSize:10,fontWeight:"bold",pointerEvents:"none",borderRadius:4},children:e.map((n,i)=>u.jsx("div",{children:n},i))})},vG=e=>{switch(e){case"customers":return u.jsx(pc,{className:"w-6 h-6 text-gray-400"});case"projects":return u.jsx(zh,{className:"w-6 h-6 text-gray-400"});case"installers":return u.jsx(Sb,{className:"w-6 h-6 text-gray-400"});case"samples":return u.jsx(Ed,{className:"w-6 h-6 text-gray-400"});default:return null}},HFe=(e,t)=>{const r=encodeURIComponent(t);switch(e){case"customers":return`/customers?search=${r}`;case"installers":return`/installers?search=${r}`;case"samples":return`/samples?search=${r}`;case"projects":return`/dashboard?search=${r}`;default:return"#"}},WFe=()=>{const[e,t]=I.useState(""),[r,n]=I.useState(null),[i,a]=I.useState(!1),[s,o]=I.useState(!1),l=I.useRef(null);wu(),I.useEffect(()=>{if(e.length<2){n(null),o(!1);return}a(!0);const f=setTimeout(()=>{fetch(rr(`/api/search?q=${e}`),{credentials:"include"}).then(p=>p.json()).then(p=>{n(p),o(!0)}).catch(console.error).finally(()=>a(!1))},300);return()=>clearTimeout(f)},[e]),I.useEffect(()=>{const f=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const c=()=>{t(""),n(null),o(!1)},d=r?Object.values(r).reduce((f,p)=>f+(Array.isArray(p)?p.length:0),0):0;return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"relative w-full md:w-64",ref:l,children:[u.jsxs("div",{className:"relative",children:[u.jsx(Yo,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),u.jsx("input",{type:"text",placeholder:"Search anything...",value:e,onChange:f=>t(f.target.value),onFocus:()=>e.length>1&&o(!0),className:"w-full bg-background text-text-primary pl-10 pr-4 py-2 rounded-lg border border-border focus:outline-none focus:ring-2 focus:ring-primary"})]}),s&&u.jsx("div",{className:"fixed inset-x-0 bottom-0 top-[72px] md:absolute md:top-full md:bottom-auto md:mt-2 w-full md:w-96 bg-surface md:rounded-lg shadow-lg border-t md:border border-border z-50 overflow-y-auto",children:i?u.jsxs("div",{className:"p-8 text-center text-gray-400 flex flex-col items-center gap-2",children:[u.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"}),u.jsx("span",{children:"Searching..."})]}):d>0&&r?u.jsx("div",{children:Object.entries(r).map(([f,p])=>{if(!Array.isArray(p)||p.length===0)return null;const m=p.slice(0,3),x=p.length>3;return u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-bold uppercase text-text-secondary px-4 pt-4 pb-2 border-b border-border bg-background/50",children:f}),u.jsx("ul",{children:m.map(y=>u.jsx("li",{children:f==="samples"?u.jsxs(ui,{to:`/samples?open=${y.id}`,onClick:c,className:"flex items-center gap-4 p-5 md:p-3 hover:bg-background transition-colors border-b border-border/50",children:[y.image?u.jsx("div",{className:"w-10 h-10 rounded-md bg-background border border-border shrink-0 overflow-hidden",children:u.jsx("img",{src:Ma(y.image),alt:y.title,className:"w-full h-full object-cover"})}):vG(f),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-lg md:text-base text-text-primary",children:y.title}),y.subtitle&&u.jsx("p",{className:"text-sm md:text-xs text-text-secondary",children:y.subtitle})]})]}):u.jsxs(ui,{to:y.path,onClick:c,className:"flex items-center gap-4 p-5 md:p-3 hover:bg-background transition-colors border-b border-border/50",children:[vG(f),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-lg md:text-base text-text-primary",children:y.title}),y.subtitle&&u.jsx("p",{className:"text-sm md:text-xs text-text-secondary",children:y.subtitle})]})]})},`${f}-${y.id}`))}),x&&u.jsxs(ui,{to:HFe(f,e),onClick:c,className:"flex items-center justify-center gap-2 p-3 text-sm font-bold text-primary hover:bg-background/50 transition-colors border-b border-border/50",children:["View All ",f," ",u.jsx(am,{className:"w-4 h-4"})]})]},f)})}):u.jsxs("div",{className:"p-4 text-center text-gray-400",children:['No results found for "',e,'".']})})]})})};var Hoe={exports:{}},Woe={exports:{}};(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(r,n){return r<<n|r>>>32-n},rotr:function(r,n){return r<<32-n|r>>>n},endian:function(r){if(r.constructor==Number)return t.rotl(r,8)&16711935|t.rotl(r,24)&4278255360;for(var n=0;n<r.length;n++)r[n]=t.endian(r[n]);return r},randomBytes:function(r){for(var n=[];r>0;r--)n.push(Math.floor(Math.random()*256));return n},bytesToWords:function(r){for(var n=[],i=0,a=0;i<r.length;i++,a+=8)n[a>>>5]|=r[i]<<24-a%32;return n},wordsToBytes:function(r){for(var n=[],i=0;i<r.length*32;i+=8)n.push(r[i>>>5]>>>24-i%32&255);return n},bytesToHex:function(r){for(var n=[],i=0;i<r.length;i++)n.push((r[i]>>>4).toString(16)),n.push((r[i]&15).toString(16));return n.join("")},hexToBytes:function(r){for(var n=[],i=0;i<r.length;i+=2)n.push(parseInt(r.substr(i,2),16));return n},bytesToBase64:function(r){for(var n=[],i=0;i<r.length;i+=3)for(var a=r[i]<<16|r[i+1]<<8|r[i+2],s=0;s<4;s++)i*8+s*6<=r.length*8?n.push(e.charAt(a>>>6*(3-s)&63)):n.push("=");return n.join("")},base64ToBytes:function(r){r=r.replace(/[^A-Z0-9+\/]/ig,"");for(var n=[],i=0,a=0;i<r.length;a=++i%4)a!=0&&n.push((e.indexOf(r.charAt(i-1))&Math.pow(2,-2*a+8)-1)<<a*2|e.indexOf(r.charAt(i))>>>6-a*2);return n}};Woe.exports=t})();var VFe=Woe.exports,k8={utf8:{stringToBytes:function(e){return k8.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(k8.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(e.charCodeAt(r)&255);return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}},yG=k8;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var qFe=function(e){return e!=null&&(Voe(e)||GFe(e)||!!e._isBuffer)};function Voe(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function GFe(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&Voe(e.slice(0,0))}(function(){var e=VFe,t=yG.utf8,r=qFe,n=yG.bin,i=function(a,s){a.constructor==String?s&&s.encoding==="binary"?a=n.stringToBytes(a):a=t.stringToBytes(a):r(a)?a=Array.prototype.slice.call(a,0):!Array.isArray(a)&&a.constructor!==Uint8Array&&(a=a.toString());for(var o=e.bytesToWords(a),l=a.length*8,c=1732584193,d=-271733879,f=-1732584194,p=271733878,m=0;m<o.length;m++)o[m]=(o[m]<<8|o[m]>>>24)&16711935|(o[m]<<24|o[m]>>>8)&4278255360;o[l>>>5]|=128<<l%32,o[(l+64>>>9<<4)+14]=l;for(var x=i._ff,y=i._gg,b=i._hh,S=i._ii,m=0;m<o.length;m+=16){var _=c,C=d,A=f,j=p;c=x(c,d,f,p,o[m+0],7,-680876936),p=x(p,c,d,f,o[m+1],12,-389564586),f=x(f,p,c,d,o[m+2],17,606105819),d=x(d,f,p,c,o[m+3],22,-1044525330),c=x(c,d,f,p,o[m+4],7,-176418897),p=x(p,c,d,f,o[m+5],12,1200080426),f=x(f,p,c,d,o[m+6],17,-1473231341),d=x(d,f,p,c,o[m+7],22,-45705983),c=x(c,d,f,p,o[m+8],7,1770035416),p=x(p,c,d,f,o[m+9],12,-1958414417),f=x(f,p,c,d,o[m+10],17,-42063),d=x(d,f,p,c,o[m+11],22,-1990404162),c=x(c,d,f,p,o[m+12],7,1804603682),p=x(p,c,d,f,o[m+13],12,-40341101),f=x(f,p,c,d,o[m+14],17,-1502002290),d=x(d,f,p,c,o[m+15],22,1236535329),c=y(c,d,f,p,o[m+1],5,-165796510),p=y(p,c,d,f,o[m+6],9,-1069501632),f=y(f,p,c,d,o[m+11],14,643717713),d=y(d,f,p,c,o[m+0],20,-373897302),c=y(c,d,f,p,o[m+5],5,-701558691),p=y(p,c,d,f,o[m+10],9,38016083),f=y(f,p,c,d,o[m+15],14,-660478335),d=y(d,f,p,c,o[m+4],20,-405537848),c=y(c,d,f,p,o[m+9],5,568446438),p=y(p,c,d,f,o[m+14],9,-1019803690),f=y(f,p,c,d,o[m+3],14,-187363961),d=y(d,f,p,c,o[m+8],20,1163531501),c=y(c,d,f,p,o[m+13],5,-1444681467),p=y(p,c,d,f,o[m+2],9,-51403784),f=y(f,p,c,d,o[m+7],14,1735328473),d=y(d,f,p,c,o[m+12],20,-1926607734),c=b(c,d,f,p,o[m+5],4,-378558),p=b(p,c,d,f,o[m+8],11,-2022574463),f=b(f,p,c,d,o[m+11],16,1839030562),d=b(d,f,p,c,o[m+14],23,-35309556),c=b(c,d,f,p,o[m+1],4,-1530992060),p=b(p,c,d,f,o[m+4],11,1272893353),f=b(f,p,c,d,o[m+7],16,-155497632),d=b(d,f,p,c,o[m+10],23,-1094730640),c=b(c,d,f,p,o[m+13],4,681279174),p=b(p,c,d,f,o[m+0],11,-358537222),f=b(f,p,c,d,o[m+3],16,-722521979),d=b(d,f,p,c,o[m+6],23,76029189),c=b(c,d,f,p,o[m+9],4,-640364487),p=b(p,c,d,f,o[m+12],11,-421815835),f=b(f,p,c,d,o[m+15],16,530742520),d=b(d,f,p,c,o[m+2],23,-995338651),c=S(c,d,f,p,o[m+0],6,-198630844),p=S(p,c,d,f,o[m+7],10,1126891415),f=S(f,p,c,d,o[m+14],15,-1416354905),d=S(d,f,p,c,o[m+5],21,-57434055),c=S(c,d,f,p,o[m+12],6,1700485571),p=S(p,c,d,f,o[m+3],10,-1894986606),f=S(f,p,c,d,o[m+10],15,-1051523),d=S(d,f,p,c,o[m+1],21,-2054922799),c=S(c,d,f,p,o[m+8],6,1873313359),p=S(p,c,d,f,o[m+15],10,-30611744),f=S(f,p,c,d,o[m+6],15,-1560198380),d=S(d,f,p,c,o[m+13],21,1309151649),c=S(c,d,f,p,o[m+4],6,-145523070),p=S(p,c,d,f,o[m+11],10,-1120210379),f=S(f,p,c,d,o[m+2],15,718787259),d=S(d,f,p,c,o[m+9],21,-343485551),c=c+_>>>0,d=d+C>>>0,f=f+A>>>0,p=p+j>>>0}return e.endian([c,d,f,p])};i._ff=function(a,s,o,l,c,d,f){var p=a+(s&o|~s&l)+(c>>>0)+f;return(p<<d|p>>>32-d)+s},i._gg=function(a,s,o,l,c,d,f){var p=a+(s&l|o&~l)+(c>>>0)+f;return(p<<d|p>>>32-d)+s},i._hh=function(a,s,o,l,c,d,f){var p=a+(s^o^l)+(c>>>0)+f;return(p<<d|p>>>32-d)+s},i._ii=function(a,s,o,l,c,d,f){var p=a+(o^(s|~l))+(c>>>0)+f;return(p<<d|p>>>32-d)+s},i._blocksize=16,i._digestsize=16,Hoe.exports=function(a,s){if(a==null)throw new Error("Illegal argument "+a);var o=e.wordsToBytes(i(a,s));return s&&s.asBytes?o:s&&s.asString?n.bytesToString(o):e.bytesToHex(o)}})();var KFe=Hoe.exports;const XFe=Vs(KFe);function AS(e){const t=e.trim().toLowerCase();return XFe(t)}const YFe=()=>{const{currentUser:e,isLayoutEditMode:t,toggleLayoutEditMode:r,unreadCount:n,refreshNotifications:i}=Xr(),a=Fl(),[s,o]=I.useState(""),[l,c]=I.useState(!1),[d,f]=I.useState([]),p=I.useRef(null),m=a.pathname.startsWith("/projects/");I.useEffect(()=>{if(e!=null&&e.avatarUrl)o(Ma(e.avatarUrl));else if(e!=null&&e.email){const S=AS(e.email);o(`https://www.gravatar.com/avatar/${S}?s=40&d=mp`)}},[e,e==null?void 0:e.avatarUrl]),I.useEffect(()=>{const S=_=>{p.current&&!p.current.contains(_.target)&&c(!1)};return document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[]),I.useEffect(()=>{l&&(u6e().then(f),i())},[l,i]);const x=async()=>{await tm.signOut(),window.location.href="/auth"};if(!e)return null;const y=e.firstName?`${e.firstName} ${e.lastName||""}`:e.email,b=async S=>{S.isRead||(await f6e(S.id),i()),c(!1)};return u.jsxs("div",{className:"relative",ref:p,children:[u.jsxs("button",{onClick:()=>c(!l),className:"flex items-center space-x-3 text-text-primary hover:text-primary p-1 pr-3 rounded-full hover:bg-surface-container-high transition-colors border border-transparent hover:border-outline/10 group",children:[n>0&&u.jsx("span",{className:"absolute top-0 left-0 -mt-1 -ml-1 w-5 h-5 bg-error-container text-error rounded-full text-[10px] flex items-center justify-center font-bold border border-surface z-10 shadow-sm",children:n>9?"9+":n}),u.jsx("img",{src:s,alt:"User Avatar",className:"w-8 h-8 rounded-full bg-surface-container-highest border border-outline/20 object-cover"}),u.jsx("span",{className:"hidden sm:inline text-sm font-bold group-hover:text-primary transition-colors",children:y})]}),l&&u.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-surface-container-high rounded-xl shadow-xl z-50 border border-outline/10 overflow-hidden ring-1 ring-black/5",children:[u.jsxs("div",{className:"p-3 border-b border-outline/10 bg-surface-container-low flex justify-between items-center",children:[u.jsx("span",{className:"text-xs font-bold text-text-secondary uppercase tracking-wider",children:"Notifications"}),n>0&&u.jsxs("button",{onClick:async()=>{await h6e(),i(),c(!1)},className:"text-xs text-primary hover:text-primary-hover font-medium flex items-center gap-1",children:[u.jsx(pd,{size:12})," Mark all read"]})]}),u.jsx("div",{className:"max-h-60 overflow-y-auto",children:d.length===0?u.jsx("div",{className:"p-8 text-center text-text-secondary text-sm italic opacity-70",children:"No notifications"}):d.map(S=>u.jsx(ui,{to:S.linkUrl,onClick:()=>b(S),className:`block p-3 border-b border-outline/10 hover:bg-surface-container-highest transition-colors ${S.isRead?"border-l-4 border-l-transparent":"bg-primary-container/10 border-l-4 border-l-primary"}`,children:u.jsxs("div",{className:"flex gap-3",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-primary text-on-primary flex items-center justify-center text-xs font-bold flex-shrink-0 shadow-sm",children:S.senderInitial||"?"}),u.jsxs("div",{children:[u.jsx("p",{className:`text-sm text-text-primary line-clamp-2 ${S.isRead?"":"font-medium"}`,children:S.message}),u.jsx("p",{className:"text-[10px] text-text-tertiary mt-1",children:new Date(S.createdAt).toLocaleDateString()})]})]})},S.id))}),u.jsxs("div",{className:"p-2 border-t border-outline/10 bg-surface-container-low",children:[m&&u.jsx("button",{onClick:()=>{r(),c(!1)},className:"w-full flex items-center px-3 py-2 text-sm text-text-primary rounded-lg hover:bg-surface-container-highest transition-colors",children:t?u.jsxs(u.Fragment,{children:[u.jsx(V4,{size:16,className:"mr-3 text-error"}),u.jsx("span",{children:"Exit Edit Mode"})]}):u.jsxs(u.Fragment,{children:[u.jsx(pC,{size:16,className:"mr-3 text-primary"}),u.jsx("span",{children:"Edit Page Layout"})]})}),u.jsxs("button",{onClick:x,className:"w-full flex items-center px-3 py-2 text-sm text-text-primary rounded-lg hover:bg-surface-container-highest transition-colors mt-1",children:[u.jsx(Doe,{size:16,className:"mr-3"}),u.jsx("span",{children:"Logout"})]})]})]})]})},QFe=()=>{const e=Fl(),{isLayoutEditMode:t,toggleLayoutEditMode:r}=Xr();return I.useEffect(()=>{t&&r()},[e.pathname]),null},JFe=20,ZFe=()=>{var y;const{currentUser:e}=Xr(),t=(y=e==null?void 0:e.roles)==null?void 0:y.includes("Admin"),{toasts:r,handlers:n}=Sse(),{startPause:i,endPause:a}=n,[s,o]=I.useState([]),[l,c]=I.useState(!1),[d,f]=I.useState(null);I.useEffect(()=>{if(!t)return;(async()=>{try{const S=await fetch(rr("/api/system/check-remote"),{credentials:"include"});if(S.ok){const _=await S.json();_.isUpdateAvailable&&f({version:_.latestVersion,url:_.releaseNotesUrl})}}catch(S){console.error("Failed to check for updates:",S)}})()},[t]),I.useEffect(()=>{r.forEach(b=>{o(S=>{if(S.find(C=>C.id===b.id))return S;let _=b.message;return typeof _=="function"&&(_="Custom Component Message"),[{id:b.id,message:_,type:b.type,time:new Date},...S].slice(0,JFe)})})},[r]);const p=r.filter(b=>b.visible)[0],m=b=>{switch(b){case"success":return"text-green-500";case"error":return"text-red-500";case"loading":return"text-blue-500";default:return"text-text-secondary"}},x=b=>{switch(b){case"success":return u.jsx(W4,{size:14,className:"text-green-500"});case"error":return u.jsx(dC,{size:14,className:"text-red-500"});case"loading":return u.jsx(dG,{size:14,className:"text-blue-500 animate-pulse"});default:return u.jsx(bFe,{size:14,className:"text-text-secondary"})}};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"hidden md:flex relative z-50 mr-4",onMouseEnter:i,onMouseLeave:a,children:[u.jsxs("div",{onClick:()=>c(!l),className:`
                        cursor-pointer flex items-center gap-3 px-4 py-2 rounded-lg border transition-all duration-300 w-80 h-10 overflow-hidden relative
                        ${p?"bg-surface border-primary shadow-sm":"bg-surface/50 border-transparent hover:bg-surface hover:border-border"}
                    `,children:[u.jsx("div",{className:"flex-shrink-0",children:p?x(p.type):d?u.jsx(_S,{size:14,className:"text-blue-500 animate-bounce"}):u.jsx(dG,{size:14,className:"text-text-tertiary"})}),u.jsx("div",{className:"flex-1 text-sm font-medium truncate relative",children:u.jsx("div",{className:"animate-in slide-in-from-bottom-2 fade-in duration-300",children:p?u.jsx("span",{className:m(p.type),children:p.message}):d?u.jsxs("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline font-bold flex items-center gap-1",onClick:b=>b.stopPropagation(),children:["Update Available: v",d.version]}):u.jsx("span",{className:"text-text-tertiary",children:"System Ready"})},(p==null?void 0:p.id)||(d?"update":"idle"))}),u.jsx(gs,{size:14,className:`text-text-tertiary transition-transform ${l?"rotate-180":""}`})]}),l&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1)}),u.jsxs("div",{className:"absolute top-full right-0 mt-2 w-96 bg-surface border border-border rounded-lg shadow-xl z-50 overflow-hidden flex flex-col max-h-[500px]",children:[u.jsxs("div",{className:"p-3 border-b border-border bg-background flex justify-between items-center",children:[u.jsx("span",{className:"text-xs font-bold text-text-secondary uppercase tracking-wider",children:"System Log"}),u.jsx("button",{onClick:()=>o([]),className:"text-xs text-text-tertiary hover:text-red-500",children:"Clear"})]}),u.jsx("div",{className:"overflow-y-auto flex-1",children:s.length===0?u.jsx("div",{className:"p-8 text-center text-text-tertiary text-sm",children:"No recent activity"}):s.map(b=>u.jsxs("div",{className:"p-3 border-b border-border last:border-0 hover:bg-background/50 flex gap-3",children:[u.jsx("div",{className:"mt-0.5",children:x(b.type)}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"text-sm text-text-primary break-words",children:b.message}),u.jsxs("div",{className:"text-[10px] text-text-tertiary mt-1 flex items-center gap-1",children:[u.jsx(gd,{size:10}),b.time.toLocaleTimeString()]})]})]},b.id))})]})]})]}),u.jsxs("div",{className:"md:hidden fixed top-0 left-0 right-0 z-[100] p-4 flex flex-col gap-2 pointer-events-none",children:[d&&!p&&u.jsxs("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"pointer-events-auto bg-blue-600 text-white shadow-lg rounded-lg p-3 flex items-center gap-3 animate-in slide-in-from-top-2 fade-in",children:[u.jsx(_S,{size:16}),u.jsxs("div",{className:"text-sm font-bold flex-1",children:["New Version v",d.version," is available!"]})]}),r.filter(b=>b.visible).map(b=>u.jsxs("div",{className:"pointer-events-auto bg-surface shadow-lg border border-border rounded-lg p-3 flex items-center gap-3 animate-in slide-in-from-top-2 fade-in",children:[x(b.type),u.jsx("div",{className:"text-sm font-medium flex-1 text-text-primary",children:b.message})]},b.id))]})]})},e5e=()=>{const[e,t]=I.useState(!1),{systemBranding:r}=Xr(),n=()=>u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"mb-8 flex items-center justify-between h-16 px-2",children:[r!=null&&r.logoUrl?u.jsx("img",{src:Ma(r.logoUrl),alt:"Company Logo",className:"max-h-16 lg:max-h-12 max-w-full object-contain"}):u.jsx("h1",{className:"text-3xl lg:text-2xl font-bold text-primary",children:"Subfloor"}),u.jsx("button",{onClick:()=>t(!1),className:"lg:hidden p-2 text-text-secondary hover:text-text-primary",children:u.jsx(tn,{className:"w-8 h-8"})})]}),u.jsxs("nav",{className:"flex flex-col space-y-4 lg:space-y-2 flex-grow",children:[u.jsxs(Gl,{to:"/",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,end:!0,children:[u.jsx(Roe,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Dashboard"})]}),u.jsxs(Gl,{to:"/customers",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(hx,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Customers"})]}),u.jsxs(Gl,{to:"/installers",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(Sb,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Installers"})]}),u.jsxs(Gl,{to:"/samples",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(Ed,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Sample Library"})]}),u.jsxs(Gl,{to:"/vendors",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(cx,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Vendor Directory"})]}),u.jsxs(Gl,{to:"/orders",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(z0,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Orders"})]}),u.jsxs(Gl,{to:"/import",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(pT,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Import Data"})]}),u.jsxs(Gl,{to:"/kb",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(rFe,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Knowledge Base"})]}),u.jsxs(Gl,{to:"/calendar",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(Cu,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Calendar"})]}),u.jsxs(Gl,{to:"/reports",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(lFe,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Reports"})]}),u.jsxs(Gl,{to:"/messages",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(E8,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Messages"})]})]}),u.jsx("div",{className:"mt-auto",children:u.jsxs(Gl,{to:"/settings",onClick:()=>t(!1),className:({isActive:i})=>`flex items-center space-x-4 px-4 py-3 lg:px-4 lg:py-2 rounded-full transition-colors ${i?"bg-primary-container text-on-primary-container font-semibold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary font-medium"}`,children:[u.jsx(pC,{className:"w-8 h-8 lg:w-6 lg:h-6"}),u.jsx("span",{className:"text-xl lg:text-base",children:"Settings"})]})})]});return u.jsxs("div",{className:"flex h-screen bg-background text-text-primary",children:[u.jsx(QFe,{}),u.jsx("aside",{className:"hidden lg:flex w-64 bg-background p-6 flex-col shrink-0",children:u.jsx(n,{})}),e&&u.jsxs(u.Fragment,{children:[u.jsx("div",{id:"sidebar-overlay",className:"fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden",onClick:()=>t(!1)}),u.jsx("aside",{className:"fixed top-0 left-0 w-full h-full bg-background p-6 flex flex-col z-30 lg:hidden overflow-y-auto",children:u.jsx(n,{})})]}),u.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[u.jsxs("header",{className:"bg-background border-b border-surface-container-high/50 p-4 flex justify-between items-center z-10 text-text-primary",children:[u.jsx("button",{className:"p-2 rounded-md hover:bg-background lg:hidden",onClick:()=>t(!0),children:u.jsx(Moe,{className:"w-6 h-6"})}),u.jsx("div",{className:"flex-1 flex justify-center lg:justify-start md:ml-4 min-w-0 px-2",children:u.jsx(WFe,{})}),u.jsxs("div",{className:"flex items-center gap-2 md:gap-4 flex-shrink-0",children:[u.jsx("div",{className:"hidden xl:block",children:u.jsx(ZFe,{})}),u.jsx(YFe,{})]})]}),u.jsx("main",{className:"flex-1 overflow-y-auto lg:p-8",children:u.jsx(xie,{})})]})]})},Dv=["Flooring","Tile","Kitchen Remodel","Bathroom Remodel","New Construction","Other"],t5e=["Managed Installation","Materials Only Sale","Unmanaged Installer"],gh=["SF","SY","LF","Carton","Sheet","Roll","Piece","Box","Each"],Ey=["Tile","LVP","LVT","Laminate","Sheet Product","Carpet","Quartz","Dekton"];var sr=(e=>(e.NEW="New",e.SAMPLE_CHECKOUT="Sample Checkout",e.AWAITING_DECISION="Awaiting Decision",e.QUOTING="Quoting",e.ACCEPTED="Accepted",e.SCHEDULED="Scheduled",e.COMPLETED="Completed",e.CANCELLED="Cancelled",e.CLOSED="Closed",e))(sr||{}),ml=(e=>(e.SENT="Sent",e.ACCEPTED="Accepted",e.REJECTED="Rejected",e))(ml||{});const qoe=({onCustomerSelect:e,onRequestNewCustomer:t})=>{const{data:r=[],isLoading:n}=Xx(),[i,a]=I.useState(""),s=I.useMemo(()=>i.length<1||!r?[]:r.filter(l=>l.fullName.toLowerCase().includes(i.toLowerCase())||l.email&&l.email.toLowerCase().includes(i.toLowerCase())),[i,r]),o=l=>{e(l),a("")};return u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",placeholder:"Search by name or email...",value:i,onChange:l=>a(l.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"}),i.length>0&&u.jsxs("div",{className:"absolute z-10 w-full bg-surface-container-high border border-outline/20 rounded-lg mt-1 shadow-xl max-h-60 overflow-y-auto",children:[n&&u.jsxs("div",{className:"p-3 text-text-secondary flex items-center gap-2",children:[u.jsx(q4,{size:16,className:"animate-spin"})," Searching..."]}),!n&&s.map(l=>u.jsxs("div",{onClick:()=>o(l),className:"px-4 py-3 hover:bg-primary-container/30 cursor-pointer border-b border-outline/10 text-text-primary",children:[u.jsx("p",{className:"font-semibold",children:l.fullName}),u.jsx("p",{className:"text-sm text-text-secondary",children:l.email})]},l.id)),u.jsxs("div",{onClick:()=>t(i),className:"p-3 hover:bg-primary-container/30 cursor-pointer flex items-center gap-2 text-primary font-semibold",children:[u.jsx(FFe,{size:18}),s.length>0?`Or create new customer "${i}"`:`Create new customer "${i}"`]})]})]})},r5e=({customer:e,onProjectSelect:t})=>{const{projects:r,addProject:n}=Xr(),[i,a]=I.useState(!1),[s,o]=I.useState(""),[l,c]=I.useState(Dv[0]),d=I.useMemo(()=>r.filter(p=>p.customerId===e.id),[r,e.id]),f=async p=>{if(p.preventDefault(),!s){alert("Please provide a name for the new project.");return}try{const m=await n({customerId:e.id,projectName:s,projectType:l,status:sr.NEW});t(m),a(!1)}catch(m){console.error("Failed to create project",m)}};return i?u.jsxs("form",{onSubmit:f,className:"p-4 bg-background rounded-lg border border-border space-y-4",children:[u.jsxs("h4",{className:"font-semibold text-text-primary",children:["Create New Project for ",e.fullName]}),u.jsx("input",{type:"text",placeholder:"Project Name (e.g., 'Master Bedroom')",required:!0,value:s,onChange:p=>o(p.target.value),className:"w-full p-2 bg-surface border-border rounded text-text-primary"}),u.jsx("select",{value:l,onChange:p=>c(p.target.value),className:"w-full p-2 bg-surface border-border rounded text-text-primary",children:Dv.map(p=>u.jsx("option",{value:p,children:p},p))}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:()=>a(!1),className:"py-2 px-4 bg-secondary hover:bg-secondary-hover rounded text-on-secondary",children:"Cancel"}),u.jsx("button",{type:"submit",className:"py-2 px-4 bg-primary hover:bg-primary-hover rounded text-on-primary",children:"Create Project"})]})]}):u.jsxs("div",{className:"space-y-3",children:[d.length>0?d.map(p=>u.jsxs("div",{onClick:()=>t(p),className:"p-3 bg-background rounded-lg border border-transparent hover:border-accent cursor-pointer transition-colors",children:[u.jsx("p",{className:"font-semibold text-text-primary",children:p.projectName}),u.jsxs("p",{className:"text-sm text-text-secondary",children:[p.projectType," - ",u.jsx("span",{className:"italic",children:p.status})]})]},p.id)):u.jsx("p",{className:"text-text-secondary text-center py-4",children:"This customer has no existing projects."}),u.jsxs("button",{onClick:()=>a(!0),className:"w-full p-3 mt-2 bg-background hover:bg-surface rounded-lg flex items-center justify-center gap-2 text-accent font-semibold transition-colors border border-dashed border-border",children:[u.jsx(hu,{size:18}),"Create New Project"]})]})};var Xt;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Xt||(Xt={}));var bG=new Map([[Xt.QR_CODE,"QR_CODE"],[Xt.AZTEC,"AZTEC"],[Xt.CODABAR,"CODABAR"],[Xt.CODE_39,"CODE_39"],[Xt.CODE_93,"CODE_93"],[Xt.CODE_128,"CODE_128"],[Xt.DATA_MATRIX,"DATA_MATRIX"],[Xt.MAXICODE,"MAXICODE"],[Xt.ITF,"ITF"],[Xt.EAN_13,"EAN_13"],[Xt.EAN_8,"EAN_8"],[Xt.PDF_417,"PDF_417"],[Xt.RSS_14,"RSS_14"],[Xt.RSS_EXPANDED,"RSS_EXPANDED"],[Xt.UPC_A,"UPC_A"],[Xt.UPC_E,"UPC_E"],[Xt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),wG;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(wG||(wG={}));function n5e(e){return Object.values(Xt).includes(e)}var gT;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(gT||(gT={}));var i5e=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[gT.SCAN_TYPE_CAMERA,gT.SCAN_TYPE_FILE],e}(),Goe=function(){function e(t,r){this.format=t,this.formatName=r}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!bG.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,bG.get(t))},e}(),SG=function(){function e(){}return e.createFromText=function(t){var r={text:t};return{decodedText:t,result:r}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),_8;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(_8||(_8={}));var a5e=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:_8.UNKWOWN_ERROR}},e}(),s5e=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,r){(this.verbose||r===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function rh(e){return typeof e>"u"||e===null}var wv=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),Koe=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,r){if(typeof t!="object"){var n=typeof t;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],a=new Set(i),s=Object.keys(t),o=0,l=s;o<l.length;o++){var c=l[o];if(a.has(c))return r.logError("".concat(c," is not supported videoConstaints."),!0),!1}return!0},e}(),N8={exports:{}};(function(e,t){(function(r,n){n(t)})(Ve,function(r){function n(se){return se==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(se,h){se.__proto__=h}||function(se,h){for(var g in h)h.hasOwnProperty(g)&&(se[g]=h[g])};function a(se,h){i(se,h);function g(){this.constructor=se}se.prototype=h===null?Object.create(h):(g.prototype=h.prototype,new g)}function s(se,h){var g=Object.setPrototypeOf;g?g(se,h):se.__proto__=h}function o(se,h){h===void 0&&(h=se.constructor);var g=Error.captureStackTrace;g&&g(se,h)}var l=function(se){a(h,se);function h(g){var v=this.constructor,E=se.call(this,g)||this;return Object.defineProperty(E,"name",{value:v.name,enumerable:!1}),s(E,v.prototype),o(E),E}return h}(Error);class c extends l{constructor(h=void 0){super(h),this.message=h}getKind(){return this.constructor.kind}}c.kind="Exception";class d extends c{}d.kind="ArgumentException";class f extends c{}f.kind="IllegalArgumentException";class p{constructor(h){if(this.binarizer=h,h===null)throw new f("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(h,g){return this.binarizer.getBlackRow(h,g)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(h,g,v,E){const k=this.binarizer.getLuminanceSource().crop(h,g,v,E);return new p(this.binarizer.createBinarizer(k))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const h=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new p(this.binarizer.createBinarizer(h))}rotateCounterClockwise45(){const h=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new p(this.binarizer.createBinarizer(h))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class m extends c{static getChecksumInstance(){return new m}}m.kind="ChecksumException";class x{constructor(h){this.source=h}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class y{static arraycopy(h,g,v,E,k){for(;k--;)v[E++]=h[g++]}static currentTimeMillis(){return Date.now()}}class b extends c{}b.kind="IndexOutOfBoundsException";class S extends b{constructor(h=void 0,g=void 0){super(g),this.index=h,this.message=g}}S.kind="ArrayIndexOutOfBoundsException";class _{static fill(h,g){for(let v=0,E=h.length;v<E;v++)h[v]=g}static fillWithin(h,g,v,E){_.rangeCheck(h.length,g,v);for(let k=g;k<v;k++)h[k]=E}static rangeCheck(h,g,v){if(g>v)throw new f("fromIndex("+g+") > toIndex("+v+")");if(g<0)throw new S(g);if(v>h)throw new S(v)}static asList(...h){return h}static create(h,g,v){return Array.from({length:h}).map(k=>Array.from({length:g}).fill(v))}static createInt32Array(h,g,v){return Array.from({length:h}).map(k=>Int32Array.from({length:g}).fill(v))}static equals(h,g){if(!h||!g||!h.length||!g.length||h.length!==g.length)return!1;for(let v=0,E=h.length;v<E;v++)if(h[v]!==g[v])return!1;return!0}static hashCode(h){if(h===null)return 0;let g=1;for(const v of h)g=31*g+v;return g}static fillUint8Array(h,g){for(let v=0;v!==h.length;v++)h[v]=g}static copyOf(h,g){return h.slice(0,g)}static copyOfUint8Array(h,g){if(h.length<=g){const v=new Uint8Array(g);return v.set(h),v}return h.slice(0,g)}static copyOfRange(h,g,v){const E=v-g,k=new Int32Array(E);return y.arraycopy(h,g,k,0,E),k}static binarySearch(h,g,v){v===void 0&&(v=_.numberComparator);let E=0,k=h.length-1;for(;E<=k;){const T=k+E>>1,R=v(g,h[T]);if(R>0)E=T+1;else if(R<0)k=T-1;else return T}return-E-1}static numberComparator(h,g){return h-g}}class C{static numberOfTrailingZeros(h){let g;if(h===0)return 32;let v=31;return g=h<<16,g!==0&&(v-=16,h=g),g=h<<8,g!==0&&(v-=8,h=g),g=h<<4,g!==0&&(v-=4,h=g),g=h<<2,g!==0&&(v-=2,h=g),v-(h<<1>>>31)}static numberOfLeadingZeros(h){if(h===0)return 32;let g=1;return h>>>16||(g+=16,h<<=16),h>>>24||(g+=8,h<<=8),h>>>28||(g+=4,h<<=4),h>>>30||(g+=2,h<<=2),g-=h>>>31,g}static toHexString(h){return h.toString(16)}static toBinaryString(h){return String(parseInt(String(h),2))}static bitCount(h){return h=h-(h>>>1&1431655765),h=(h&858993459)+(h>>>2&858993459),h=h+(h>>>4)&252645135,h=h+(h>>>8),h=h+(h>>>16),h&63}static truncDivision(h,g){return Math.trunc(h/g)}static parseInt(h,g=void 0){return parseInt(h,g)}}C.MIN_VALUE_32_BITS=-2147483648,C.MAX_VALUE=Number.MAX_SAFE_INTEGER;class A{constructor(h,g){h===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=h,g==null?this.bits=A.makeArray(h):this.bits=g)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(h){if(h>this.bits.length*32){const g=A.makeArray(h);y.arraycopy(this.bits,0,g,0,this.bits.length),this.bits=g}}get(h){return(this.bits[Math.floor(h/32)]&1<<(h&31))!==0}set(h){this.bits[Math.floor(h/32)]|=1<<(h&31)}flip(h){this.bits[Math.floor(h/32)]^=1<<(h&31)}getNextSet(h){const g=this.size;if(h>=g)return g;const v=this.bits;let E=Math.floor(h/32),k=v[E];k&=~((1<<(h&31))-1);const T=v.length;for(;k===0;){if(++E===T)return g;k=v[E]}const R=E*32+C.numberOfTrailingZeros(k);return R>g?g:R}getNextUnset(h){const g=this.size;if(h>=g)return g;const v=this.bits;let E=Math.floor(h/32),k=~v[E];k&=~((1<<(h&31))-1);const T=v.length;for(;k===0;){if(++E===T)return g;k=~v[E]}const R=E*32+C.numberOfTrailingZeros(k);return R>g?g:R}setBulk(h,g){this.bits[Math.floor(h/32)]=g}setRange(h,g){if(g<h||h<0||g>this.size)throw new f;if(g===h)return;g--;const v=Math.floor(h/32),E=Math.floor(g/32),k=this.bits;for(let T=v;T<=E;T++){const R=T>v?0:h&31,U=(2<<(T<E?31:g&31))-(1<<R);k[T]|=U}}clear(){const h=this.bits.length,g=this.bits;for(let v=0;v<h;v++)g[v]=0}isRange(h,g,v){if(g<h||h<0||g>this.size)throw new f;if(g===h)return!0;g--;const E=Math.floor(h/32),k=Math.floor(g/32),T=this.bits;for(let R=E;R<=k;R++){const F=R>E?0:h&31,Z=(2<<(R<k?31:g&31))-(1<<F)&4294967295;if((T[R]&Z)!==(v?Z:0))return!1}return!0}appendBit(h){this.ensureCapacity(this.size+1),h&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(h,g){if(g<0||g>32)throw new f("Num bits must be between 0 and 32");this.ensureCapacity(this.size+g);for(let v=g;v>0;v--)this.appendBit((h>>v-1&1)===1)}appendBitArray(h){const g=h.size;this.ensureCapacity(this.size+g);for(let v=0;v<g;v++)this.appendBit(h.get(v))}xor(h){if(this.size!==h.size)throw new f("Sizes don't match");const g=this.bits;for(let v=0,E=g.length;v<E;v++)g[v]^=h.bits[v]}toBytes(h,g,v,E){for(let k=0;k<E;k++){let T=0;for(let R=0;R<8;R++)this.get(h)&&(T|=1<<7-R),h++;g[v+k]=T}}getBitArray(){return this.bits}reverse(){const h=new Int32Array(this.bits.length),g=Math.floor((this.size-1)/32),v=g+1,E=this.bits;for(let k=0;k<v;k++){let T=E[k];T=T>>1&1431655765|(T&1431655765)<<1,T=T>>2&858993459|(T&858993459)<<2,T=T>>4&252645135|(T&252645135)<<4,T=T>>8&16711935|(T&16711935)<<8,T=T>>16&65535|(T&65535)<<16,h[g-k]=T}if(this.size!==v*32){const k=v*32-this.size;let T=h[0]>>>k;for(let R=1;R<v;R++){const F=h[R];T|=F<<32-k,h[R-1]=T,T=F>>>k}h[v-1]=T}this.bits=h}static makeArray(h){return new Int32Array(Math.floor((h+31)/32))}equals(h){if(!(h instanceof A))return!1;const g=h;return this.size===g.size&&_.equals(this.bits,g.bits)}hashCode(){return 31*this.size+_.hashCode(this.bits)}toString(){let h="";for(let g=0,v=this.size;g<v;g++)g&7||(h+=" "),h+=this.get(g)?"X":".";return h}clone(){return new A(this.size,this.bits.slice())}}var j;(function(se){se[se.OTHER=0]="OTHER",se[se.PURE_BARCODE=1]="PURE_BARCODE",se[se.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",se[se.TRY_HARDER=3]="TRY_HARDER",se[se.CHARACTER_SET=4]="CHARACTER_SET",se[se.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",se[se.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",se[se.ASSUME_GS1=7]="ASSUME_GS1",se[se.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",se[se.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",se[se.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(j||(j={}));var P=j;class O extends c{static getFormatInstance(){return new O}}O.kind="FormatException";var D;(function(se){se[se.Cp437=0]="Cp437",se[se.ISO8859_1=1]="ISO8859_1",se[se.ISO8859_2=2]="ISO8859_2",se[se.ISO8859_3=3]="ISO8859_3",se[se.ISO8859_4=4]="ISO8859_4",se[se.ISO8859_5=5]="ISO8859_5",se[se.ISO8859_6=6]="ISO8859_6",se[se.ISO8859_7=7]="ISO8859_7",se[se.ISO8859_8=8]="ISO8859_8",se[se.ISO8859_9=9]="ISO8859_9",se[se.ISO8859_10=10]="ISO8859_10",se[se.ISO8859_11=11]="ISO8859_11",se[se.ISO8859_13=12]="ISO8859_13",se[se.ISO8859_14=13]="ISO8859_14",se[se.ISO8859_15=14]="ISO8859_15",se[se.ISO8859_16=15]="ISO8859_16",se[se.SJIS=16]="SJIS",se[se.Cp1250=17]="Cp1250",se[se.Cp1251=18]="Cp1251",se[se.Cp1252=19]="Cp1252",se[se.Cp1256=20]="Cp1256",se[se.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",se[se.UTF8=22]="UTF8",se[se.ASCII=23]="ASCII",se[se.Big5=24]="Big5",se[se.GB18030=25]="GB18030",se[se.EUC_KR=26]="EUC_KR"})(D||(D={}));class L{constructor(h,g,v,...E){this.valueIdentifier=h,this.name=v,typeof g=="number"?this.values=Int32Array.from([g]):this.values=g,this.otherEncodingNames=E,L.VALUE_IDENTIFIER_TO_ECI.set(h,this),L.NAME_TO_ECI.set(v,this);const k=this.values;for(let T=0,R=k.length;T!==R;T++){const F=k[T];L.VALUES_TO_ECI.set(F,this)}for(const T of E)L.NAME_TO_ECI.set(T,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(h){if(h<0||h>=900)throw new O("incorect value");const g=L.VALUES_TO_ECI.get(h);if(g===void 0)throw new O("incorect value");return g}static getCharacterSetECIByName(h){const g=L.NAME_TO_ECI.get(h);if(g===void 0)throw new O("incorect value");return g}equals(h){if(!(h instanceof L))return!1;const g=h;return this.getName()===g.getName()}}L.VALUE_IDENTIFIER_TO_ECI=new Map,L.VALUES_TO_ECI=new Map,L.NAME_TO_ECI=new Map,L.Cp437=new L(D.Cp437,Int32Array.from([0,2]),"Cp437"),L.ISO8859_1=new L(D.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),L.ISO8859_2=new L(D.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),L.ISO8859_3=new L(D.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),L.ISO8859_4=new L(D.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),L.ISO8859_5=new L(D.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),L.ISO8859_6=new L(D.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),L.ISO8859_7=new L(D.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),L.ISO8859_8=new L(D.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),L.ISO8859_9=new L(D.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),L.ISO8859_10=new L(D.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),L.ISO8859_11=new L(D.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),L.ISO8859_13=new L(D.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),L.ISO8859_14=new L(D.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),L.ISO8859_15=new L(D.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),L.ISO8859_16=new L(D.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),L.SJIS=new L(D.SJIS,20,"SJIS","Shift_JIS"),L.Cp1250=new L(D.Cp1250,21,"Cp1250","windows-1250"),L.Cp1251=new L(D.Cp1251,22,"Cp1251","windows-1251"),L.Cp1252=new L(D.Cp1252,23,"Cp1252","windows-1252"),L.Cp1256=new L(D.Cp1256,24,"Cp1256","windows-1256"),L.UnicodeBigUnmarked=new L(D.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),L.UTF8=new L(D.UTF8,26,"UTF8","UTF-8"),L.ASCII=new L(D.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),L.Big5=new L(D.Big5,28,"Big5"),L.GB18030=new L(D.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),L.EUC_KR=new L(D.EUC_KR,30,"EUC_KR","EUC-KR");class B extends c{}B.kind="UnsupportedOperationException";class H{static decode(h,g){const v=this.encodingName(g);return this.customDecoder?this.customDecoder(h,v):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(v)?this.decodeFallback(h,v):new TextDecoder(v).decode(h)}static shouldDecodeOnFallback(h){return!H.isBrowser()&&h==="ISO-8859-1"}static encode(h,g){const v=this.encodingName(g);return this.customEncoder?this.customEncoder(h,v):typeof TextEncoder>"u"?this.encodeFallback(h):new TextEncoder().encode(h)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(h){return typeof h=="string"?h:h.getName()}static encodingCharacterSet(h){return h instanceof L?h:L.getCharacterSetECIByName(h)}static decodeFallback(h,g){const v=this.encodingCharacterSet(g);if(H.isDecodeFallbackSupported(v)){let E="";for(let k=0,T=h.length;k<T;k++){let R=h[k].toString(16);R.length<2&&(R="0"+R),E+="%"+R}return decodeURIComponent(E)}if(v.equals(L.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(h.buffer));throw new B(`Encoding ${this.encodingName(g)} not supported by fallback.`)}static isDecodeFallbackSupported(h){return h.equals(L.UTF8)||h.equals(L.ISO8859_1)||h.equals(L.ASCII)}static encodeFallback(h){const v=btoa(unescape(encodeURIComponent(h))).split(""),E=[];for(let k=0;k<v.length;k++)E.push(v[k].charCodeAt(0));return new Uint8Array(E)}}class z{static castAsNonUtf8Char(h,g=null){const v=g?g.getName():this.ISO88591;return H.decode(new Uint8Array([h]),v)}static guessEncoding(h,g){if(g!=null&&g.get(P.CHARACTER_SET)!==void 0)return g.get(P.CHARACTER_SET).toString();const v=h.length;let E=!0,k=!0,T=!0,R=0,F=0,U=0,Z=0,oe=0,xe=0,Oe=0,ce=0,be=0,Ne=0,Be=0;const lt=h.length>3&&h[0]===239&&h[1]===187&&h[2]===191;for(let gt=0;gt<v&&(E||k||T);gt++){const vt=h[gt]&255;T&&(R>0?vt&128?R--:T=!1:vt&128&&(vt&64?(R++,vt&32?(R++,vt&16?(R++,vt&8?T=!1:Z++):U++):F++):T=!1)),E&&(vt>127&&vt<160?E=!1:vt>159&&(vt<192||vt===215||vt===247)&&Be++),k&&(oe>0?vt<64||vt===127||vt>252?k=!1:oe--:vt===128||vt===160||vt>239?k=!1:vt>160&&vt<224?(xe++,ce=0,Oe++,Oe>be&&(be=Oe)):vt>127?(oe++,Oe=0,ce++,ce>Ne&&(Ne=ce)):(Oe=0,ce=0))}return T&&R>0&&(T=!1),k&&oe>0&&(k=!1),T&&(lt||F+U+Z>0)?z.UTF8:k&&(z.ASSUME_SHIFT_JIS||be>=3||Ne>=3)?z.SHIFT_JIS:E&&k?be===2&&xe===2||Be*10>=v?z.SHIFT_JIS:z.ISO88591:E?z.ISO88591:k?z.SHIFT_JIS:T?z.UTF8:z.PLATFORM_DEFAULT_ENCODING}static format(h,...g){let v=-1;function E(T,R,F,U,Z,oe){if(T==="%%")return"%";if(g[++v]===void 0)return;T=U?parseInt(U.substr(1)):void 0;let xe=Z?parseInt(Z.substr(1)):void 0,Oe;switch(oe){case"s":Oe=g[v];break;case"c":Oe=g[v][0];break;case"f":Oe=parseFloat(g[v]).toFixed(T);break;case"p":Oe=parseFloat(g[v]).toPrecision(T);break;case"e":Oe=parseFloat(g[v]).toExponential(T);break;case"x":Oe=parseInt(g[v]).toString(xe||16);break;case"d":Oe=parseFloat(parseInt(g[v],xe||10).toPrecision(T)).toFixed(0);break}Oe=typeof Oe=="object"?JSON.stringify(Oe):(+Oe).toString(xe);let ce=parseInt(F),be=F&&F[0]+""=="0"?"0":" ";for(;Oe.length<ce;)Oe=R!==void 0?Oe+be:be+Oe;return Oe}let k=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return h.replace(k,E)}static getBytes(h,g){return H.encode(h,g)}static getCharCode(h,g=0){return h.charCodeAt(g)}static getCharAt(h){return String.fromCharCode(h)}}z.SHIFT_JIS=L.SJIS.getName(),z.GB2312="GB2312",z.ISO88591=L.ISO8859_1.getName(),z.EUC_JP="EUC_JP",z.UTF8=L.UTF8.getName(),z.PLATFORM_DEFAULT_ENCODING=z.UTF8,z.ASSUME_SHIFT_JIS=!1;class ie{constructor(h=""){this.value=h}enableDecoding(h){return this.encoding=h,this}append(h){return typeof h=="string"?this.value+=h.toString():this.encoding?this.value+=z.castAsNonUtf8Char(h,this.encoding):this.value+=String.fromCharCode(h),this}appendChars(h,g,v){for(let E=g;g<g+v;E++)this.append(h[E]);return this}length(){return this.value.length}charAt(h){return this.value.charAt(h)}deleteCharAt(h){this.value=this.value.substr(0,h)+this.value.substring(h+1)}setCharAt(h,g){this.value=this.value.substr(0,h)+g+this.value.substr(h+1)}substring(h,g){return this.value.substring(h,g)}setLengthToZero(){this.value=""}toString(){return this.value}insert(h,g){this.value=this.value.substr(0,h)+g+this.value.substr(h+g.length)}}class X{constructor(h,g,v,E){if(this.width=h,this.height=g,this.rowSize=v,this.bits=E,g==null&&(g=h),this.height=g,h<1||g<1)throw new f("Both dimensions must be greater than 0");v==null&&(v=Math.floor((h+31)/32)),this.rowSize=v,E==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(h){const g=h.length,v=h[0].length,E=new X(v,g);for(let k=0;k<g;k++){const T=h[k];for(let R=0;R<v;R++)T[R]&&E.set(R,k)}return E}static parseFromString(h,g,v){if(h===null)throw new f("stringRepresentation cannot be null");const E=new Array(h.length);let k=0,T=0,R=-1,F=0,U=0;for(;U<h.length;)if(h.charAt(U)===`
`||h.charAt(U)==="\r"){if(k>T){if(R===-1)R=k-T;else if(k-T!==R)throw new f("row lengths do not match");T=k,F++}U++}else if(h.substring(U,U+g.length)===g)U+=g.length,E[k]=!0,k++;else if(h.substring(U,U+v.length)===v)U+=v.length,E[k]=!1,k++;else throw new f("illegal character encountered: "+h.substring(U));if(k>T){if(R===-1)R=k-T;else if(k-T!==R)throw new f("row lengths do not match");F++}const Z=new X(R,F);for(let oe=0;oe<k;oe++)E[oe]&&Z.set(Math.floor(oe%R),Math.floor(oe/R));return Z}get(h,g){const v=g*this.rowSize+Math.floor(h/32);return(this.bits[v]>>>(h&31)&1)!==0}set(h,g){const v=g*this.rowSize+Math.floor(h/32);this.bits[v]|=1<<(h&31)&4294967295}unset(h,g){const v=g*this.rowSize+Math.floor(h/32);this.bits[v]&=~(1<<(h&31)&4294967295)}flip(h,g){const v=g*this.rowSize+Math.floor(h/32);this.bits[v]^=1<<(h&31)&4294967295}xor(h){if(this.width!==h.getWidth()||this.height!==h.getHeight()||this.rowSize!==h.getRowSize())throw new f("input matrix dimensions do not match");const g=new A(Math.floor(this.width/32)+1),v=this.rowSize,E=this.bits;for(let k=0,T=this.height;k<T;k++){const R=k*v,F=h.getRow(k,g).getBitArray();for(let U=0;U<v;U++)E[R+U]^=F[U]}}clear(){const h=this.bits,g=h.length;for(let v=0;v<g;v++)h[v]=0}setRegion(h,g,v,E){if(g<0||h<0)throw new f("Left and top must be nonnegative");if(E<1||v<1)throw new f("Height and width must be at least 1");const k=h+v,T=g+E;if(T>this.height||k>this.width)throw new f("The region must fit inside the matrix");const R=this.rowSize,F=this.bits;for(let U=g;U<T;U++){const Z=U*R;for(let oe=h;oe<k;oe++)F[Z+Math.floor(oe/32)]|=1<<(oe&31)&4294967295}}getRow(h,g){g==null||g.getSize()<this.width?g=new A(this.width):g.clear();const v=this.rowSize,E=this.bits,k=h*v;for(let T=0;T<v;T++)g.setBulk(T*32,E[k+T]);return g}setRow(h,g){y.arraycopy(g.getBitArray(),0,this.bits,h*this.rowSize,this.rowSize)}rotate180(){const h=this.getWidth(),g=this.getHeight();let v=new A(h),E=new A(h);for(let k=0,T=Math.floor((g+1)/2);k<T;k++)v=this.getRow(k,v),E=this.getRow(g-1-k,E),v.reverse(),E.reverse(),this.setRow(k,E),this.setRow(g-1-k,v)}getEnclosingRectangle(){const h=this.width,g=this.height,v=this.rowSize,E=this.bits;let k=h,T=g,R=-1,F=-1;for(let U=0;U<g;U++)for(let Z=0;Z<v;Z++){const oe=E[U*v+Z];if(oe!==0){if(U<T&&(T=U),U>F&&(F=U),Z*32<k){let xe=0;for(;!(oe<<31-xe&4294967295);)xe++;Z*32+xe<k&&(k=Z*32+xe)}if(Z*32+31>R){let xe=31;for(;!(oe>>>xe);)xe--;Z*32+xe>R&&(R=Z*32+xe)}}}return R<k||F<T?null:Int32Array.from([k,T,R-k+1,F-T+1])}getTopLeftOnBit(){const h=this.rowSize,g=this.bits;let v=0;for(;v<g.length&&g[v]===0;)v++;if(v===g.length)return null;const E=v/h;let k=v%h*32;const T=g[v];let R=0;for(;!(T<<31-R&4294967295);)R++;return k+=R,Int32Array.from([k,E])}getBottomRightOnBit(){const h=this.rowSize,g=this.bits;let v=g.length-1;for(;v>=0&&g[v]===0;)v--;if(v<0)return null;const E=Math.floor(v/h);let k=Math.floor(v%h)*32;const T=g[v];let R=31;for(;!(T>>>R);)R--;return k+=R,Int32Array.from([k,E])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(h){if(!(h instanceof X))return!1;const g=h;return this.width===g.width&&this.height===g.height&&this.rowSize===g.rowSize&&_.equals(this.bits,g.bits)}hashCode(){let h=this.width;return h=31*h+this.width,h=31*h+this.height,h=31*h+this.rowSize,h=31*h+_.hashCode(this.bits),h}toString(h="X ",g="  ",v=`
`){return this.buildToString(h,g,v)}buildToString(h,g,v){let E=new ie;for(let k=0,T=this.height;k<T;k++){for(let R=0,F=this.width;R<F;R++)E.append(this.get(R,k)?h:g);E.append(v)}return E.toString()}clone(){return new X(this.width,this.height,this.rowSize,this.bits.slice())}}class W extends c{static getNotFoundInstance(){return new W}}W.kind="NotFoundException";class Q extends x{constructor(h){super(h),this.luminances=Q.EMPTY,this.buckets=new Int32Array(Q.LUMINANCE_BUCKETS)}getBlackRow(h,g){const v=this.getLuminanceSource(),E=v.getWidth();g==null||g.getSize()<E?g=new A(E):g.clear(),this.initArrays(E);const k=v.getRow(h,this.luminances),T=this.buckets;for(let F=0;F<E;F++)T[(k[F]&255)>>Q.LUMINANCE_SHIFT]++;const R=Q.estimateBlackPoint(T);if(E<3)for(let F=0;F<E;F++)(k[F]&255)<R&&g.set(F);else{let F=k[0]&255,U=k[1]&255;for(let Z=1;Z<E-1;Z++){const oe=k[Z+1]&255;(U*4-F-oe)/2<R&&g.set(Z),F=U,U=oe}}return g}getBlackMatrix(){const h=this.getLuminanceSource(),g=h.getWidth(),v=h.getHeight(),E=new X(g,v);this.initArrays(g);const k=this.buckets;for(let F=1;F<5;F++){const U=Math.floor(v*F/5),Z=h.getRow(U,this.luminances),oe=Math.floor(g*4/5);for(let xe=Math.floor(g/5);xe<oe;xe++){const Oe=Z[xe]&255;k[Oe>>Q.LUMINANCE_SHIFT]++}}const T=Q.estimateBlackPoint(k),R=h.getMatrix();for(let F=0;F<v;F++){const U=F*g;for(let Z=0;Z<g;Z++)(R[U+Z]&255)<T&&E.set(Z,F)}return E}createBinarizer(h){return new Q(h)}initArrays(h){this.luminances.length<h&&(this.luminances=new Uint8ClampedArray(h));const g=this.buckets;for(let v=0;v<Q.LUMINANCE_BUCKETS;v++)g[v]=0}static estimateBlackPoint(h){const g=h.length;let v=0,E=0,k=0;for(let Z=0;Z<g;Z++)h[Z]>k&&(E=Z,k=h[Z]),h[Z]>v&&(v=h[Z]);let T=0,R=0;for(let Z=0;Z<g;Z++){const oe=Z-E,xe=h[Z]*oe*oe;xe>R&&(T=Z,R=xe)}if(E>T){const Z=E;E=T,T=Z}if(T-E<=g/16)throw new W;let F=T-1,U=-1;for(let Z=T-1;Z>E;Z--){const oe=Z-E,xe=oe*oe*(T-Z)*(v-h[Z]);xe>U&&(F=Z,U=xe)}return F<<Q.LUMINANCE_SHIFT}}Q.LUMINANCE_BITS=5,Q.LUMINANCE_SHIFT=8-Q.LUMINANCE_BITS,Q.LUMINANCE_BUCKETS=1<<Q.LUMINANCE_BITS,Q.EMPTY=Uint8ClampedArray.from([0]);class te extends Q{constructor(h){super(h),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const h=this.getLuminanceSource(),g=h.getWidth(),v=h.getHeight();if(g>=te.MINIMUM_DIMENSION&&v>=te.MINIMUM_DIMENSION){const E=h.getMatrix();let k=g>>te.BLOCK_SIZE_POWER;g&te.BLOCK_SIZE_MASK&&k++;let T=v>>te.BLOCK_SIZE_POWER;v&te.BLOCK_SIZE_MASK&&T++;const R=te.calculateBlackPoints(E,k,T,g,v),F=new X(g,v);te.calculateThresholdForBlock(E,k,T,g,v,R,F),this.matrix=F}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(h){return new te(h)}static calculateThresholdForBlock(h,g,v,E,k,T,R){const F=k-te.BLOCK_SIZE,U=E-te.BLOCK_SIZE;for(let Z=0;Z<v;Z++){let oe=Z<<te.BLOCK_SIZE_POWER;oe>F&&(oe=F);const xe=te.cap(Z,2,v-3);for(let Oe=0;Oe<g;Oe++){let ce=Oe<<te.BLOCK_SIZE_POWER;ce>U&&(ce=U);const be=te.cap(Oe,2,g-3);let Ne=0;for(let lt=-2;lt<=2;lt++){const gt=T[xe+lt];Ne+=gt[be-2]+gt[be-1]+gt[be]+gt[be+1]+gt[be+2]}const Be=Ne/25;te.thresholdBlock(h,ce,oe,Be,E,R)}}}static cap(h,g,v){return h<g?g:h>v?v:h}static thresholdBlock(h,g,v,E,k,T){for(let R=0,F=v*k+g;R<te.BLOCK_SIZE;R++,F+=k)for(let U=0;U<te.BLOCK_SIZE;U++)(h[F+U]&255)<=E&&T.set(g+U,v+R)}static calculateBlackPoints(h,g,v,E,k){const T=k-te.BLOCK_SIZE,R=E-te.BLOCK_SIZE,F=new Array(v);for(let U=0;U<v;U++){F[U]=new Int32Array(g);let Z=U<<te.BLOCK_SIZE_POWER;Z>T&&(Z=T);for(let oe=0;oe<g;oe++){let xe=oe<<te.BLOCK_SIZE_POWER;xe>R&&(xe=R);let Oe=0,ce=255,be=0;for(let Be=0,lt=Z*E+xe;Be<te.BLOCK_SIZE;Be++,lt+=E){for(let gt=0;gt<te.BLOCK_SIZE;gt++){const vt=h[lt+gt]&255;Oe+=vt,vt<ce&&(ce=vt),vt>be&&(be=vt)}if(be-ce>te.MIN_DYNAMIC_RANGE)for(Be++,lt+=E;Be<te.BLOCK_SIZE;Be++,lt+=E)for(let gt=0;gt<te.BLOCK_SIZE;gt++)Oe+=h[lt+gt]&255}let Ne=Oe>>te.BLOCK_SIZE_POWER*2;if(be-ce<=te.MIN_DYNAMIC_RANGE&&(Ne=ce/2,U>0&&oe>0)){const Be=(F[U-1][oe]+2*F[U][oe-1]+F[U-1][oe-1])/4;ce<Be&&(Ne=Be)}F[U][oe]=Ne}}return F}}te.BLOCK_SIZE_POWER=3,te.BLOCK_SIZE=1<<te.BLOCK_SIZE_POWER,te.BLOCK_SIZE_MASK=te.BLOCK_SIZE-1,te.MINIMUM_DIMENSION=te.BLOCK_SIZE*5,te.MIN_DYNAMIC_RANGE=24;class J{constructor(h,g){this.width=h,this.height=g}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(h,g,v,E){throw new B("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new B("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new B("This luminance source does not support rotation by 45 degrees.")}toString(){const h=new Uint8ClampedArray(this.width);let g=new ie;for(let v=0;v<this.height;v++){const E=this.getRow(v,h);for(let k=0;k<this.width;k++){const T=E[k]&255;let R;T<64?R="#":T<128?R="+":T<192?R=".":R=" ",g.append(R)}g.append(`
`)}return g.toString()}}class Y extends J{constructor(h){super(h.getWidth(),h.getHeight()),this.delegate=h}getRow(h,g){const v=this.delegate.getRow(h,g),E=this.getWidth();for(let k=0;k<E;k++)v[k]=255-(v[k]&255);return v}getMatrix(){const h=this.delegate.getMatrix(),g=this.getWidth()*this.getHeight(),v=new Uint8ClampedArray(g);for(let E=0;E<g;E++)v[E]=255-(h[E]&255);return v}isCropSupported(){return this.delegate.isCropSupported()}crop(h,g,v,E){return new Y(this.delegate.crop(h,g,v,E))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Y(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Y(this.delegate.rotateCounterClockwise45())}}class pe extends J{constructor(h){super(h.width,h.height),this.canvas=h,this.tempCanvasElement=null,this.buffer=pe.makeBufferFromCanvasImageData(h)}static makeBufferFromCanvasImageData(h){const g=h.getContext("2d").getImageData(0,0,h.width,h.height);return pe.toGrayscaleBuffer(g.data,h.width,h.height)}static toGrayscaleBuffer(h,g,v){const E=new Uint8ClampedArray(g*v);for(let k=0,T=0,R=h.length;k<R;k+=4,T++){let F;if(h[k+3]===0)F=255;else{const Z=h[k],oe=h[k+1],xe=h[k+2];F=306*Z+601*oe+117*xe+512>>10}E[T]=F}return E}getRow(h,g){if(h<0||h>=this.getHeight())throw new f("Requested row is outside the image: "+h);const v=this.getWidth(),E=h*v;return g===null?g=this.buffer.slice(E,E+v):(g.length<v&&(g=new Uint8ClampedArray(v)),g.set(this.buffer.slice(E,E+v))),g}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(h,g,v,E){return super.crop(h,g,v,E),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const h=this.canvas.ownerDocument.createElement("canvas");h.width=this.canvas.width,h.height=this.canvas.height,this.tempCanvasElement=h}return this.tempCanvasElement}rotate(h){const g=this.getTempCanvasElement(),v=g.getContext("2d"),E=h*pe.DEGREE_TO_RADIANS,k=this.canvas.width,T=this.canvas.height,R=Math.ceil(Math.abs(Math.cos(E))*k+Math.abs(Math.sin(E))*T),F=Math.ceil(Math.abs(Math.sin(E))*k+Math.abs(Math.cos(E))*T);return g.width=R,g.height=F,v.translate(R/2,F/2),v.rotate(E),v.drawImage(this.canvas,k/-2,T/-2),this.buffer=pe.makeBufferFromCanvasImageData(g),this}invert(){return new Y(this)}}pe.DEGREE_TO_RADIANS=Math.PI/180;class _e{constructor(h,g,v){this.deviceId=h,this.label=g,this.kind="videoinput",this.groupId=v||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ee=(globalThis||Ve||self||window||void 0)&&(globalThis||Ve||self||window||void 0).__awaiter||function(se,h,g,v){function E(k){return k instanceof g?k:new g(function(T){T(k)})}return new(g||(g=Promise))(function(k,T){function R(Z){try{U(v.next(Z))}catch(oe){T(oe)}}function F(Z){try{U(v.throw(Z))}catch(oe){T(oe)}}function U(Z){Z.done?k(Z.value):E(Z.value).then(R,F)}U((v=v.apply(se,h||[])).next())})};class de{constructor(h,g=500,v){this.reader=h,this.timeBetweenScansMillis=g,this._hints=v,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(h){this._timeBetweenDecodingAttempts=h<0?0:h}set hints(h){this._hints=h||null}get hints(){return this._hints}listVideoInputDevices(){return ee(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const h=yield navigator.mediaDevices.enumerateDevices(),g=[];for(const v of h){const E=v.kind==="video"?"videoinput":v.kind;if(E!=="videoinput")continue;const k=v.deviceId||v.id,T=v.label||`Video device ${g.length+1}`,R=v.groupId,F={deviceId:k,label:T,kind:E,groupId:R};g.push(F)}return g})}getVideoInputDevices(){return ee(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(g=>new _e(g.deviceId,g.label))})}findDeviceById(h){return ee(this,void 0,void 0,function*(){const g=yield this.listVideoInputDevices();return g?g.find(v=>v.deviceId===h):null})}decodeFromInputVideoDevice(h,g){return ee(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(h,g)})}decodeOnceFromVideoDevice(h,g){return ee(this,void 0,void 0,function*(){this.reset();let v;h?v={deviceId:{exact:h}}:v={facingMode:"environment"};const E={video:v};return yield this.decodeOnceFromConstraints(E,g)})}decodeOnceFromConstraints(h,g){return ee(this,void 0,void 0,function*(){const v=yield navigator.mediaDevices.getUserMedia(h);return yield this.decodeOnceFromStream(v,g)})}decodeOnceFromStream(h,g){return ee(this,void 0,void 0,function*(){this.reset();const v=yield this.attachStreamToVideo(h,g);return yield this.decodeOnce(v)})}decodeFromInputVideoDeviceContinuously(h,g,v){return ee(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(h,g,v)})}decodeFromVideoDevice(h,g,v){return ee(this,void 0,void 0,function*(){let E;h?E={deviceId:{exact:h}}:E={facingMode:"environment"};const k={video:E};return yield this.decodeFromConstraints(k,g,v)})}decodeFromConstraints(h,g,v){return ee(this,void 0,void 0,function*(){const E=yield navigator.mediaDevices.getUserMedia(h);return yield this.decodeFromStream(E,g,v)})}decodeFromStream(h,g,v){return ee(this,void 0,void 0,function*(){this.reset();const E=yield this.attachStreamToVideo(h,g);return yield this.decodeContinuously(E,v)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(h,g){return ee(this,void 0,void 0,function*(){const v=this.prepareVideoElement(g);return this.addVideoSource(v,h),this.videoElement=v,this.stream=h,yield this.playVideoOnLoadAsync(v),v})}playVideoOnLoadAsync(h){return new Promise((g,v)=>this.playVideoOnLoad(h,()=>g()))}playVideoOnLoad(h,g){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(h),h.addEventListener("ended",this.videoEndedListener),h.addEventListener("canplay",this.videoCanPlayListener),h.addEventListener("playing",g),this.tryPlayVideo(h)}isVideoPlaying(h){return h.currentTime>0&&!h.paused&&!h.ended&&h.readyState>2}tryPlayVideo(h){return ee(this,void 0,void 0,function*(){if(this.isVideoPlaying(h)){console.warn("Trying to play video that is already playing.");return}try{yield h.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(h,g){const v=document.getElementById(h);if(!v)throw new d(`element with id '${h}' not found`);if(v.nodeName.toLowerCase()!==g.toLowerCase())throw new d(`element with id '${h}' must be an ${g} element`);return v}decodeFromImage(h,g){if(!h&&!g)throw new d("either imageElement with a src set or an url must be provided");return g&&!h?this.decodeFromImageUrl(g):this.decodeFromImageElement(h)}decodeFromVideo(h,g){if(!h&&!g)throw new d("Either an element with a src set or an URL must be provided");return g&&!h?this.decodeFromVideoUrl(g):this.decodeFromVideoElement(h)}decodeFromVideoContinuously(h,g,v){if(h===void 0&&g===void 0)throw new d("Either an element with a src set or an URL must be provided");return g&&!h?this.decodeFromVideoUrlContinuously(g,v):this.decodeFromVideoElementContinuously(h,v)}decodeFromImageElement(h){if(!h)throw new d("An image element must be provided.");this.reset();const g=this.prepareImageElement(h);this.imageElement=g;let v;return this.isImageLoaded(g)?v=this.decodeOnce(g,!1,!0):v=this._decodeOnLoadImage(g),v}decodeFromVideoElement(h){const g=this._decodeFromVideoElementSetup(h);return this._decodeOnLoadVideo(g)}decodeFromVideoElementContinuously(h,g){const v=this._decodeFromVideoElementSetup(h);return this._decodeOnLoadVideoContinuously(v,g)}_decodeFromVideoElementSetup(h){if(!h)throw new d("A video element must be provided.");this.reset();const g=this.prepareVideoElement(h);return this.videoElement=g,g}decodeFromImageUrl(h){if(!h)throw new d("An URL must be provided.");this.reset();const g=this.prepareImageElement();this.imageElement=g;const v=this._decodeOnLoadImage(g);return g.src=h,v}decodeFromVideoUrl(h){if(!h)throw new d("An URL must be provided.");this.reset();const g=this.prepareVideoElement(),v=this.decodeFromVideoElement(g);return g.src=h,v}decodeFromVideoUrlContinuously(h,g){if(!h)throw new d("An URL must be provided.");this.reset();const v=this.prepareVideoElement(),E=this.decodeFromVideoElementContinuously(v,g);return v.src=h,E}_decodeOnLoadImage(h){return new Promise((g,v)=>{this.imageLoadedListener=()=>this.decodeOnce(h,!1,!0).then(g,v),h.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(h){return ee(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(h),yield this.decodeOnce(h)})}_decodeOnLoadVideoContinuously(h,g){return ee(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(h),this.decodeContinuously(h,g)})}isImageLoaded(h){return!(!h.complete||h.naturalWidth===0)}prepareImageElement(h){let g;return typeof h>"u"&&(g=document.createElement("img"),g.width=200,g.height=200),typeof h=="string"&&(g=this.getMediaElement(h,"img")),h instanceof HTMLImageElement&&(g=h),g}prepareVideoElement(h){let g;return!h&&typeof document<"u"&&(g=document.createElement("video"),g.width=200,g.height=200),typeof h=="string"&&(g=this.getMediaElement(h,"video")),h instanceof HTMLVideoElement&&(g=h),g.setAttribute("autoplay","true"),g.setAttribute("muted","true"),g.setAttribute("playsinline","true"),g}decodeOnce(h,g=!0,v=!0){this._stopAsyncDecode=!1;const E=(k,T)=>{if(this._stopAsyncDecode){T(new W("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const R=this.decode(h);k(R)}catch(R){const F=g&&R instanceof W,Z=(R instanceof m||R instanceof O)&&v;if(F||Z)return setTimeout(E,this._timeBetweenDecodingAttempts,k,T);T(R)}};return new Promise((k,T)=>E(k,T))}decodeContinuously(h,g){this._stopContinuousDecode=!1;const v=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const E=this.decode(h);g(E,null),setTimeout(v,this.timeBetweenScansMillis)}catch(E){g(null,E);const k=E instanceof m||E instanceof O,T=E instanceof W;(k||T)&&setTimeout(v,this._timeBetweenDecodingAttempts)}};v()}decode(h){const g=this.createBinaryBitmap(h);return this.decodeBitmap(g)}_isHTMLVideoElement(h){return h.videoWidth!==0}drawFrameOnCanvas(h,g,v){g||(g={sx:0,sy:0,sWidth:h.videoWidth,sHeight:h.videoHeight,dx:0,dy:0,dWidth:h.videoWidth,dHeight:h.videoHeight}),v||(v=this.captureCanvasContext),v.drawImage(h,g.sx,g.sy,g.sWidth,g.sHeight,g.dx,g.dy,g.dWidth,g.dHeight)}drawImageOnCanvas(h,g,v=this.captureCanvasContext){g||(g={sx:0,sy:0,sWidth:h.naturalWidth,sHeight:h.naturalHeight,dx:0,dy:0,dWidth:h.naturalWidth,dHeight:h.naturalHeight}),v||(v=this.captureCanvasContext),v.drawImage(h,g.sx,g.sy,g.sWidth,g.sHeight,g.dx,g.dy,g.dWidth,g.dHeight)}createBinaryBitmap(h){this.getCaptureCanvasContext(h),this._isHTMLVideoElement(h)?this.drawFrameOnCanvas(h):this.drawImageOnCanvas(h);const g=this.getCaptureCanvas(h),v=new pe(g),E=new te(v);return new p(E)}getCaptureCanvasContext(h){if(!this.captureCanvasContext){const v=this.getCaptureCanvas(h).getContext("2d");this.captureCanvasContext=v}return this.captureCanvasContext}getCaptureCanvas(h){if(!this.captureCanvas){const g=this.createCaptureCanvas(h);this.captureCanvas=g}return this.captureCanvas}decodeBitmap(h){return this.reader.decode(h,this._hints)}createCaptureCanvas(h){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const g=document.createElement("canvas");let v,E;return typeof h<"u"&&(h instanceof HTMLVideoElement?(v=h.videoWidth,E=h.videoHeight):h instanceof HTMLImageElement&&(v=h.naturalWidth||h.width,E=h.naturalHeight||h.height)),g.style.width=v+"px",g.style.height=E+"px",g.width=v,g.height=E,g}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(h=>h.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(h,g){try{h.srcObject=g}catch{h.src=URL.createObjectURL(g)}}cleanVideoSource(h){try{h.srcObject=null}catch{h.src=""}this.videoElement.removeAttribute("src")}}class G{constructor(h,g,v=g==null?0:8*g.length,E,k,T=y.currentTimeMillis()){this.text=h,this.rawBytes=g,this.numBits=v,this.resultPoints=E,this.format=k,this.timestamp=T,this.text=h,this.rawBytes=g,v==null?this.numBits=g==null?0:8*g.length:this.numBits=v,this.resultPoints=E,this.format=k,this.resultMetadata=null,T==null?this.timestamp=y.currentTimeMillis():this.timestamp=T}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(h,g){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(h,g)}putAllMetadata(h){h!==null&&(this.resultMetadata===null?this.resultMetadata=h:this.resultMetadata=new Map(h))}addResultPoints(h){const g=this.resultPoints;if(g===null)this.resultPoints=h;else if(h!==null&&h.length>0){const v=new Array(g.length+h.length);y.arraycopy(g,0,v,0,g.length),y.arraycopy(h,0,v,g.length,h.length),this.resultPoints=v}}getTimestamp(){return this.timestamp}toString(){return this.text}}var q;(function(se){se[se.AZTEC=0]="AZTEC",se[se.CODABAR=1]="CODABAR",se[se.CODE_39=2]="CODE_39",se[se.CODE_93=3]="CODE_93",se[se.CODE_128=4]="CODE_128",se[se.DATA_MATRIX=5]="DATA_MATRIX",se[se.EAN_8=6]="EAN_8",se[se.EAN_13=7]="EAN_13",se[se.ITF=8]="ITF",se[se.MAXICODE=9]="MAXICODE",se[se.PDF_417=10]="PDF_417",se[se.QR_CODE=11]="QR_CODE",se[se.RSS_14=12]="RSS_14",se[se.RSS_EXPANDED=13]="RSS_EXPANDED",se[se.UPC_A=14]="UPC_A",se[se.UPC_E=15]="UPC_E",se[se.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(q||(q={}));var ne=q,Se;(function(se){se[se.OTHER=0]="OTHER",se[se.ORIENTATION=1]="ORIENTATION",se[se.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",se[se.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",se[se.ISSUE_NUMBER=4]="ISSUE_NUMBER",se[se.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",se[se.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",se[se.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",se[se.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",se[se.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",se[se.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Se||(Se={}));var re=Se;class ae{constructor(h,g,v,E,k=-1,T=-1){this.rawBytes=h,this.text=g,this.byteSegments=v,this.ecLevel=E,this.structuredAppendSequenceNumber=k,this.structuredAppendParity=T,this.numBits=h==null?0:8*h.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(h){this.numBits=h}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(h){this.errorsCorrected=h}getErasures(){return this.erasures}setErasures(h){this.erasures=h}getOther(){return this.other}setOther(h){this.other=h}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ge{exp(h){return this.expTable[h]}log(h){if(h===0)throw new f;return this.logTable[h]}static addOrSubtract(h,g){return h^g}}class Ee{constructor(h,g){if(g.length===0)throw new f;this.field=h;const v=g.length;if(v>1&&g[0]===0){let E=1;for(;E<v&&g[E]===0;)E++;E===v?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(v-E),y.arraycopy(g,E,this.coefficients,0,this.coefficients.length))}else this.coefficients=g}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(h){return this.coefficients[this.coefficients.length-1-h]}evaluateAt(h){if(h===0)return this.getCoefficient(0);const g=this.coefficients;let v;if(h===1){v=0;for(let T=0,R=g.length;T!==R;T++){const F=g[T];v=ge.addOrSubtract(v,F)}return v}v=g[0];const E=g.length,k=this.field;for(let T=1;T<E;T++)v=ge.addOrSubtract(k.multiply(h,v),g[T]);return v}addOrSubtract(h){if(!this.field.equals(h.field))throw new f("GenericGFPolys do not have same GenericGF field");if(this.isZero())return h;if(h.isZero())return this;let g=this.coefficients,v=h.coefficients;if(g.length>v.length){const T=g;g=v,v=T}let E=new Int32Array(v.length);const k=v.length-g.length;y.arraycopy(v,0,E,0,k);for(let T=k;T<v.length;T++)E[T]=ge.addOrSubtract(g[T-k],v[T]);return new Ee(this.field,E)}multiply(h){if(!this.field.equals(h.field))throw new f("GenericGFPolys do not have same GenericGF field");if(this.isZero()||h.isZero())return this.field.getZero();const g=this.coefficients,v=g.length,E=h.coefficients,k=E.length,T=new Int32Array(v+k-1),R=this.field;for(let F=0;F<v;F++){const U=g[F];for(let Z=0;Z<k;Z++)T[F+Z]=ge.addOrSubtract(T[F+Z],R.multiply(U,E[Z]))}return new Ee(R,T)}multiplyScalar(h){if(h===0)return this.field.getZero();if(h===1)return this;const g=this.coefficients.length,v=this.field,E=new Int32Array(g),k=this.coefficients;for(let T=0;T<g;T++)E[T]=v.multiply(k[T],h);return new Ee(v,E)}multiplyByMonomial(h,g){if(h<0)throw new f;if(g===0)return this.field.getZero();const v=this.coefficients,E=v.length,k=new Int32Array(E+h),T=this.field;for(let R=0;R<E;R++)k[R]=T.multiply(v[R],g);return new Ee(T,k)}divide(h){if(!this.field.equals(h.field))throw new f("GenericGFPolys do not have same GenericGF field");if(h.isZero())throw new f("Divide by 0");const g=this.field;let v=g.getZero(),E=this;const k=h.getCoefficient(h.getDegree()),T=g.inverse(k);for(;E.getDegree()>=h.getDegree()&&!E.isZero();){const R=E.getDegree()-h.getDegree(),F=g.multiply(E.getCoefficient(E.getDegree()),T),U=h.multiplyByMonomial(R,F),Z=g.buildMonomial(R,F);v=v.addOrSubtract(Z),E=E.addOrSubtract(U)}return[v,E]}toString(){let h="";for(let g=this.getDegree();g>=0;g--){let v=this.getCoefficient(g);if(v!==0){if(v<0?(h+=" - ",v=-v):h.length>0&&(h+=" + "),g===0||v!==1){const E=this.field.log(v);E===0?h+="1":E===1?h+="a":(h+="a^",h+=E)}g!==0&&(g===1?h+="x":(h+="x^",h+=g))}}return h}}class V extends c{}V.kind="ArithmeticException";class Ae extends ge{constructor(h,g,v){super(),this.primitive=h,this.size=g,this.generatorBase=v;const E=new Int32Array(g);let k=1;for(let R=0;R<g;R++)E[R]=k,k*=2,k>=g&&(k^=h,k&=g-1);this.expTable=E;const T=new Int32Array(g);for(let R=0;R<g-1;R++)T[E[R]]=R;this.logTable=T,this.zero=new Ee(this,Int32Array.from([0])),this.one=new Ee(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(h,g){if(h<0)throw new f;if(g===0)return this.zero;const v=new Int32Array(h+1);return v[0]=g,new Ee(this,v)}inverse(h){if(h===0)throw new V;return this.expTable[this.size-this.logTable[h]-1]}multiply(h,g){return h===0||g===0?0:this.expTable[(this.logTable[h]+this.logTable[g])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+C.toHexString(this.primitive)+","+this.size+")"}equals(h){return h===this}}Ae.AZTEC_DATA_12=new Ae(4201,4096,1),Ae.AZTEC_DATA_10=new Ae(1033,1024,1),Ae.AZTEC_DATA_6=new Ae(67,64,1),Ae.AZTEC_PARAM=new Ae(19,16,1),Ae.QR_CODE_FIELD_256=new Ae(285,256,0),Ae.DATA_MATRIX_FIELD_256=new Ae(301,256,1),Ae.AZTEC_DATA_8=Ae.DATA_MATRIX_FIELD_256,Ae.MAXICODE_FIELD_64=Ae.AZTEC_DATA_6;class Pe extends c{}Pe.kind="ReedSolomonException";class ze extends c{}ze.kind="IllegalStateException";class De{constructor(h){this.field=h}decode(h,g){const v=this.field,E=new Ee(v,h),k=new Int32Array(g);let T=!0;for(let Oe=0;Oe<g;Oe++){const ce=E.evaluateAt(v.exp(Oe+v.getGeneratorBase()));k[k.length-1-Oe]=ce,ce!==0&&(T=!1)}if(T)return;const R=new Ee(v,k),F=this.runEuclideanAlgorithm(v.buildMonomial(g,1),R,g),U=F[0],Z=F[1],oe=this.findErrorLocations(U),xe=this.findErrorMagnitudes(Z,oe);for(let Oe=0;Oe<oe.length;Oe++){const ce=h.length-1-v.log(oe[Oe]);if(ce<0)throw new Pe("Bad error location");h[ce]=Ae.addOrSubtract(h[ce],xe[Oe])}}runEuclideanAlgorithm(h,g,v){if(h.getDegree()<g.getDegree()){const Oe=h;h=g,g=Oe}const E=this.field;let k=h,T=g,R=E.getZero(),F=E.getOne();for(;T.getDegree()>=(v/2|0);){let Oe=k,ce=R;if(k=T,R=F,k.isZero())throw new Pe("r_{i-1} was zero");T=Oe;let be=E.getZero();const Ne=k.getCoefficient(k.getDegree()),Be=E.inverse(Ne);for(;T.getDegree()>=k.getDegree()&&!T.isZero();){const lt=T.getDegree()-k.getDegree(),gt=E.multiply(T.getCoefficient(T.getDegree()),Be);be=be.addOrSubtract(E.buildMonomial(lt,gt)),T=T.addOrSubtract(k.multiplyByMonomial(lt,gt))}if(F=be.multiply(R).addOrSubtract(ce),T.getDegree()>=k.getDegree())throw new ze("Division algorithm failed to reduce polynomial?")}const U=F.getCoefficient(0);if(U===0)throw new Pe("sigmaTilde(0) was zero");const Z=E.inverse(U),oe=F.multiplyScalar(Z),xe=T.multiplyScalar(Z);return[oe,xe]}findErrorLocations(h){const g=h.getDegree();if(g===1)return Int32Array.from([h.getCoefficient(1)]);const v=new Int32Array(g);let E=0;const k=this.field;for(let T=1;T<k.getSize()&&E<g;T++)h.evaluateAt(T)===0&&(v[E]=k.inverse(T),E++);if(E!==g)throw new Pe("Error locator degree does not match number of roots");return v}findErrorMagnitudes(h,g){const v=g.length,E=new Int32Array(v),k=this.field;for(let T=0;T<v;T++){const R=k.inverse(g[T]);let F=1;for(let U=0;U<v;U++)if(T!==U){const Z=k.multiply(g[U],R),oe=Z&1?Z&-2:Z|1;F=k.multiply(F,oe)}E[T]=k.multiply(h.evaluateAt(R),k.inverse(F)),k.getGeneratorBase()!==0&&(E[T]=k.multiply(E[T],R))}return E}}var $e;(function(se){se[se.UPPER=0]="UPPER",se[se.LOWER=1]="LOWER",se[se.MIXED=2]="MIXED",se[se.DIGIT=3]="DIGIT",se[se.PUNCT=4]="PUNCT",se[se.BINARY=5]="BINARY"})($e||($e={}));class et{decode(h){this.ddata=h;let g=h.getBits(),v=this.extractBits(g),E=this.correctBits(v),k=et.convertBoolArrayToByteArray(E),T=et.getEncodedData(E),R=new ae(k,T,null,null);return R.setNumBits(E.length),R}static highLevelDecode(h){return this.getEncodedData(h)}static getEncodedData(h){let g=h.length,v=$e.UPPER,E=$e.UPPER,k="",T=0;for(;T<g;)if(E===$e.BINARY){if(g-T<5)break;let R=et.readCode(h,T,5);if(T+=5,R===0){if(g-T<11)break;R=et.readCode(h,T,11)+31,T+=11}for(let F=0;F<R;F++){if(g-T<8){T=g;break}const U=et.readCode(h,T,8);k+=z.castAsNonUtf8Char(U),T+=8}E=v}else{let R=E===$e.DIGIT?4:5;if(g-T<R)break;let F=et.readCode(h,T,R);T+=R;let U=et.getCharacter(E,F);U.startsWith("CTRL_")?(v=E,E=et.getTable(U.charAt(5)),U.charAt(6)==="L"&&(v=E)):(k+=U,E=v)}return k}static getTable(h){switch(h){case"L":return $e.LOWER;case"P":return $e.PUNCT;case"M":return $e.MIXED;case"D":return $e.DIGIT;case"B":return $e.BINARY;case"U":default:return $e.UPPER}}static getCharacter(h,g){switch(h){case $e.UPPER:return et.UPPER_TABLE[g];case $e.LOWER:return et.LOWER_TABLE[g];case $e.MIXED:return et.MIXED_TABLE[g];case $e.PUNCT:return et.PUNCT_TABLE[g];case $e.DIGIT:return et.DIGIT_TABLE[g];default:throw new ze("Bad table")}}correctBits(h){let g,v;this.ddata.getNbLayers()<=2?(v=6,g=Ae.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(v=8,g=Ae.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(v=10,g=Ae.AZTEC_DATA_10):(v=12,g=Ae.AZTEC_DATA_12);let E=this.ddata.getNbDatablocks(),k=h.length/v;if(k<E)throw new O;let T=h.length%v,R=new Int32Array(k);for(let xe=0;xe<k;xe++,T+=v)R[xe]=et.readCode(h,T,v);try{new De(g).decode(R,k-E)}catch(xe){throw new O(xe)}let F=(1<<v)-1,U=0;for(let xe=0;xe<E;xe++){let Oe=R[xe];if(Oe===0||Oe===F)throw new O;(Oe===1||Oe===F-1)&&U++}let Z=new Array(E*v-U),oe=0;for(let xe=0;xe<E;xe++){let Oe=R[xe];if(Oe===1||Oe===F-1)Z.fill(Oe>1,oe,oe+v-1),oe+=v-1;else for(let ce=v-1;ce>=0;--ce)Z[oe++]=(Oe&1<<ce)!==0}return Z}extractBits(h){let g=this.ddata.isCompact(),v=this.ddata.getNbLayers(),E=(g?11:14)+v*4,k=new Int32Array(E),T=new Array(this.totalBitsInLayer(v,g));if(g)for(let R=0;R<k.length;R++)k[R]=R;else{let R=E+1+2*C.truncDivision(C.truncDivision(E,2)-1,15),F=E/2,U=C.truncDivision(R,2);for(let Z=0;Z<F;Z++){let oe=Z+C.truncDivision(Z,15);k[F-Z-1]=U-oe-1,k[F+Z]=U+oe+1}}for(let R=0,F=0;R<v;R++){let U=(v-R)*4+(g?9:12),Z=R*2,oe=E-1-Z;for(let xe=0;xe<U;xe++){let Oe=xe*2;for(let ce=0;ce<2;ce++)T[F+Oe+ce]=h.get(k[Z+ce],k[Z+xe]),T[F+2*U+Oe+ce]=h.get(k[Z+xe],k[oe-ce]),T[F+4*U+Oe+ce]=h.get(k[oe-ce],k[oe-xe]),T[F+6*U+Oe+ce]=h.get(k[oe-xe],k[Z+ce])}F+=U*8}return T}static readCode(h,g,v){let E=0;for(let k=g;k<g+v;k++)E<<=1,h[k]&&(E|=1);return E}static readByte(h,g){let v=h.length-g;return v>=8?et.readCode(h,g,8):et.readCode(h,g,v)<<8-v}static convertBoolArrayToByteArray(h){let g=new Uint8Array((h.length+7)/8);for(let v=0;v<g.length;v++)g[v]=et.readByte(h,8*v);return g}totalBitsInLayer(h,g){return((g?88:112)+16*h)*h}}et.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],et.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],et.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],et.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],et.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ut{constructor(){}static round(h){return h===NaN?0:h<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:h>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:h+(h<0?-.5:.5)|0}static distance(h,g,v,E){const k=h-v,T=g-E;return Math.sqrt(k*k+T*T)}static sum(h){let g=0;for(let v=0,E=h.length;v!==E;v++){const k=h[v];g+=k}return g}}class kt{static floatToIntBits(h){return h}}kt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ht{constructor(h,g){this.x=h,this.y=g}getX(){return this.x}getY(){return this.y}equals(h){if(h instanceof ht){const g=h;return this.x===g.x&&this.y===g.y}return!1}hashCode(){return 31*kt.floatToIntBits(this.x)+kt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(h){const g=this.distance(h[0],h[1]),v=this.distance(h[1],h[2]),E=this.distance(h[0],h[2]);let k,T,R;if(v>=g&&v>=E?(T=h[0],k=h[1],R=h[2]):E>=v&&E>=g?(T=h[1],k=h[0],R=h[2]):(T=h[2],k=h[0],R=h[1]),this.crossProductZ(k,T,R)<0){const F=k;k=R,R=F}h[0]=k,h[1]=T,h[2]=R}static distance(h,g){return ut.distance(h.x,h.y,g.x,g.y)}static crossProductZ(h,g,v){const E=g.x,k=g.y;return(v.x-E)*(h.y-k)-(v.y-k)*(h.x-E)}}class jr{constructor(h,g){this.bits=h,this.points=g}getBits(){return this.bits}getPoints(){return this.points}}class er extends jr{constructor(h,g,v,E,k){super(h,g),this.compact=v,this.nbDatablocks=E,this.nbLayers=k}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ct{constructor(h,g,v,E){this.image=h,this.height=h.getHeight(),this.width=h.getWidth(),g==null&&(g=ct.INIT_SIZE),v==null&&(v=h.getWidth()/2|0),E==null&&(E=h.getHeight()/2|0);const k=g/2|0;if(this.leftInit=v-k,this.rightInit=v+k,this.upInit=E-k,this.downInit=E+k,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new W}detect(){let h=this.leftInit,g=this.rightInit,v=this.upInit,E=this.downInit,k=!1,T=!0,R=!1,F=!1,U=!1,Z=!1,oe=!1;const xe=this.width,Oe=this.height;for(;T;){T=!1;let ce=!0;for(;(ce||!F)&&g<xe;)ce=this.containsBlackPoint(v,E,g,!1),ce?(g++,T=!0,F=!0):F||g++;if(g>=xe){k=!0;break}let be=!0;for(;(be||!U)&&E<Oe;)be=this.containsBlackPoint(h,g,E,!0),be?(E++,T=!0,U=!0):U||E++;if(E>=Oe){k=!0;break}let Ne=!0;for(;(Ne||!Z)&&h>=0;)Ne=this.containsBlackPoint(v,E,h,!1),Ne?(h--,T=!0,Z=!0):Z||h--;if(h<0){k=!0;break}let Be=!0;for(;(Be||!oe)&&v>=0;)Be=this.containsBlackPoint(h,g,v,!0),Be?(v--,T=!0,oe=!0):oe||v--;if(v<0){k=!0;break}T&&(R=!0)}if(!k&&R){const ce=g-h;let be=null;for(let gt=1;be===null&&gt<ce;gt++)be=this.getBlackPointOnSegment(h,E-gt,h+gt,E);if(be==null)throw new W;let Ne=null;for(let gt=1;Ne===null&&gt<ce;gt++)Ne=this.getBlackPointOnSegment(h,v+gt,h+gt,v);if(Ne==null)throw new W;let Be=null;for(let gt=1;Be===null&&gt<ce;gt++)Be=this.getBlackPointOnSegment(g,v+gt,g-gt,v);if(Be==null)throw new W;let lt=null;for(let gt=1;lt===null&&gt<ce;gt++)lt=this.getBlackPointOnSegment(g,E-gt,g-gt,E);if(lt==null)throw new W;return this.centerEdges(lt,be,Be,Ne)}else throw new W}getBlackPointOnSegment(h,g,v,E){const k=ut.round(ut.distance(h,g,v,E)),T=(v-h)/k,R=(E-g)/k,F=this.image;for(let U=0;U<k;U++){const Z=ut.round(h+U*T),oe=ut.round(g+U*R);if(F.get(Z,oe))return new ht(Z,oe)}return null}centerEdges(h,g,v,E){const k=h.getX(),T=h.getY(),R=g.getX(),F=g.getY(),U=v.getX(),Z=v.getY(),oe=E.getX(),xe=E.getY(),Oe=ct.CORR;return k<this.width/2?[new ht(oe-Oe,xe+Oe),new ht(R+Oe,F+Oe),new ht(U-Oe,Z-Oe),new ht(k+Oe,T-Oe)]:[new ht(oe+Oe,xe+Oe),new ht(R+Oe,F-Oe),new ht(U-Oe,Z+Oe),new ht(k-Oe,T-Oe)]}containsBlackPoint(h,g,v,E){const k=this.image;if(E){for(let T=h;T<=g;T++)if(k.get(T,v))return!0}else for(let T=h;T<=g;T++)if(k.get(v,T))return!0;return!1}}ct.INIT_SIZE=10,ct.CORR=1;class qt{static checkAndNudgePoints(h,g){const v=h.getWidth(),E=h.getHeight();let k=!0;for(let T=0;T<g.length&&k;T+=2){const R=Math.floor(g[T]),F=Math.floor(g[T+1]);if(R<-1||R>v||F<-1||F>E)throw new W;k=!1,R===-1?(g[T]=0,k=!0):R===v&&(g[T]=v-1,k=!0),F===-1?(g[T+1]=0,k=!0):F===E&&(g[T+1]=E-1,k=!0)}k=!0;for(let T=g.length-2;T>=0&&k;T-=2){const R=Math.floor(g[T]),F=Math.floor(g[T+1]);if(R<-1||R>v||F<-1||F>E)throw new W;k=!1,R===-1?(g[T]=0,k=!0):R===v&&(g[T]=v-1,k=!0),F===-1?(g[T+1]=0,k=!0):F===E&&(g[T+1]=E-1,k=!0)}}}class Lt{constructor(h,g,v,E,k,T,R,F,U){this.a11=h,this.a21=g,this.a31=v,this.a12=E,this.a22=k,this.a32=T,this.a13=R,this.a23=F,this.a33=U}static quadrilateralToQuadrilateral(h,g,v,E,k,T,R,F,U,Z,oe,xe,Oe,ce,be,Ne){const Be=Lt.quadrilateralToSquare(h,g,v,E,k,T,R,F);return Lt.squareToQuadrilateral(U,Z,oe,xe,Oe,ce,be,Ne).times(Be)}transformPoints(h){const g=h.length,v=this.a11,E=this.a12,k=this.a13,T=this.a21,R=this.a22,F=this.a23,U=this.a31,Z=this.a32,oe=this.a33;for(let xe=0;xe<g;xe+=2){const Oe=h[xe],ce=h[xe+1],be=k*Oe+F*ce+oe;h[xe]=(v*Oe+T*ce+U)/be,h[xe+1]=(E*Oe+R*ce+Z)/be}}transformPointsWithValues(h,g){const v=this.a11,E=this.a12,k=this.a13,T=this.a21,R=this.a22,F=this.a23,U=this.a31,Z=this.a32,oe=this.a33,xe=h.length;for(let Oe=0;Oe<xe;Oe++){const ce=h[Oe],be=g[Oe],Ne=k*ce+F*be+oe;h[Oe]=(v*ce+T*be+U)/Ne,g[Oe]=(E*ce+R*be+Z)/Ne}}static squareToQuadrilateral(h,g,v,E,k,T,R,F){const U=h-v+k-R,Z=g-E+T-F;if(U===0&&Z===0)return new Lt(v-h,k-v,h,E-g,T-E,g,0,0,1);{const oe=v-k,xe=R-k,Oe=E-T,ce=F-T,be=oe*ce-xe*Oe,Ne=(U*ce-xe*Z)/be,Be=(oe*Z-U*Oe)/be;return new Lt(v-h+Ne*v,R-h+Be*R,h,E-g+Ne*E,F-g+Be*F,g,Ne,Be,1)}}static quadrilateralToSquare(h,g,v,E,k,T,R,F){return Lt.squareToQuadrilateral(h,g,v,E,k,T,R,F).buildAdjoint()}buildAdjoint(){return new Lt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(h){return new Lt(this.a11*h.a11+this.a21*h.a12+this.a31*h.a13,this.a11*h.a21+this.a21*h.a22+this.a31*h.a23,this.a11*h.a31+this.a21*h.a32+this.a31*h.a33,this.a12*h.a11+this.a22*h.a12+this.a32*h.a13,this.a12*h.a21+this.a22*h.a22+this.a32*h.a23,this.a12*h.a31+this.a22*h.a32+this.a32*h.a33,this.a13*h.a11+this.a23*h.a12+this.a33*h.a13,this.a13*h.a21+this.a23*h.a22+this.a33*h.a23,this.a13*h.a31+this.a23*h.a32+this.a33*h.a33)}}class dr extends qt{sampleGrid(h,g,v,E,k,T,R,F,U,Z,oe,xe,Oe,ce,be,Ne,Be,lt,gt){const vt=Lt.quadrilateralToQuadrilateral(E,k,T,R,F,U,Z,oe,xe,Oe,ce,be,Ne,Be,lt,gt);return this.sampleGridWithTransform(h,g,v,vt)}sampleGridWithTransform(h,g,v,E){if(g<=0||v<=0)throw new W;const k=new X(g,v),T=new Float32Array(2*g);for(let R=0;R<v;R++){const F=T.length,U=R+.5;for(let Z=0;Z<F;Z+=2)T[Z]=Z/2+.5,T[Z+1]=U;E.transformPoints(T),qt.checkAndNudgePoints(h,T);try{for(let Z=0;Z<F;Z+=2)h.get(Math.floor(T[Z]),Math.floor(T[Z+1]))&&k.set(Z/2,R)}catch{throw new W}}return k}}class Gt{static setGridSampler(h){Gt.gridSampler=h}static getInstance(){return Gt.gridSampler}}Gt.gridSampler=new dr;class qe{constructor(h,g){this.x=h,this.y=g}toResultPoint(){return new ht(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Xe{constructor(h){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=h}detect(){return this.detectMirror(!1)}detectMirror(h){let g=this.getMatrixCenter(),v=this.getBullsEyeCorners(g);if(h){let T=v[0];v[0]=v[2],v[2]=T}this.extractParameters(v);let E=this.sampleGrid(this.image,v[this.shift%4],v[(this.shift+1)%4],v[(this.shift+2)%4],v[(this.shift+3)%4]),k=this.getMatrixCornerPoints(v);return new er(E,k,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(h){if(!this.isValidPoint(h[0])||!this.isValidPoint(h[1])||!this.isValidPoint(h[2])||!this.isValidPoint(h[3]))throw new W;let g=2*this.nbCenterLayers,v=new Int32Array([this.sampleLine(h[0],h[1],g),this.sampleLine(h[1],h[2],g),this.sampleLine(h[2],h[3],g),this.sampleLine(h[3],h[0],g)]);this.shift=this.getRotation(v,g);let E=0;for(let T=0;T<4;T++){let R=v[(this.shift+T)%4];this.compact?(E<<=7,E+=R>>1&127):(E<<=10,E+=(R>>2&992)+(R>>1&31))}let k=this.getCorrectedParameterData(E,this.compact);this.compact?(this.nbLayers=(k>>6)+1,this.nbDataBlocks=(k&63)+1):(this.nbLayers=(k>>11)+1,this.nbDataBlocks=(k&2047)+1)}getRotation(h,g){let v=0;h.forEach((E,k,T)=>{let R=(E>>g-2<<1)+(E&1);v=(v<<3)+R}),v=((v&1)<<11)+(v>>1);for(let E=0;E<4;E++)if(C.bitCount(v^this.EXPECTED_CORNER_BITS[E])<=2)return E;throw new W}getCorrectedParameterData(h,g){let v,E;g?(v=7,E=2):(v=10,E=4);let k=v-E,T=new Int32Array(v);for(let F=v-1;F>=0;--F)T[F]=h&15,h>>=4;try{new De(Ae.AZTEC_PARAM).decode(T,k)}catch{throw new W}let R=0;for(let F=0;F<E;F++)R=(R<<4)+T[F];return R}getBullsEyeCorners(h){let g=h,v=h,E=h,k=h,T=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let oe=this.getFirstDifferent(g,T,1,-1),xe=this.getFirstDifferent(v,T,1,1),Oe=this.getFirstDifferent(E,T,-1,1),ce=this.getFirstDifferent(k,T,-1,-1);if(this.nbCenterLayers>2){let be=this.distancePoint(ce,oe)*this.nbCenterLayers/(this.distancePoint(k,g)*(this.nbCenterLayers+2));if(be<.75||be>1.25||!this.isWhiteOrBlackRectangle(oe,xe,Oe,ce))break}g=oe,v=xe,E=Oe,k=ce,T=!T}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new W;this.compact=this.nbCenterLayers===5;let R=new ht(g.getX()+.5,g.getY()-.5),F=new ht(v.getX()+.5,v.getY()+.5),U=new ht(E.getX()-.5,E.getY()+.5),Z=new ht(k.getX()-.5,k.getY()-.5);return this.expandSquare([R,F,U,Z],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let h,g,v,E;try{let R=new ct(this.image).detect();h=R[0],g=R[1],v=R[2],E=R[3]}catch{let F=this.image.getWidth()/2,U=this.image.getHeight()/2;h=this.getFirstDifferent(new qe(F+7,U-7),!1,1,-1).toResultPoint(),g=this.getFirstDifferent(new qe(F+7,U+7),!1,1,1).toResultPoint(),v=this.getFirstDifferent(new qe(F-7,U+7),!1,-1,1).toResultPoint(),E=this.getFirstDifferent(new qe(F-7,U-7),!1,-1,-1).toResultPoint()}let k=ut.round((h.getX()+E.getX()+g.getX()+v.getX())/4),T=ut.round((h.getY()+E.getY()+g.getY()+v.getY())/4);try{let R=new ct(this.image,15,k,T).detect();h=R[0],g=R[1],v=R[2],E=R[3]}catch{h=this.getFirstDifferent(new qe(k+7,T-7),!1,1,-1).toResultPoint(),g=this.getFirstDifferent(new qe(k+7,T+7),!1,1,1).toResultPoint(),v=this.getFirstDifferent(new qe(k-7,T+7),!1,-1,1).toResultPoint(),E=this.getFirstDifferent(new qe(k-7,T-7),!1,-1,-1).toResultPoint()}return k=ut.round((h.getX()+E.getX()+g.getX()+v.getX())/4),T=ut.round((h.getY()+E.getY()+g.getY()+v.getY())/4),new qe(k,T)}getMatrixCornerPoints(h){return this.expandSquare(h,2*this.nbCenterLayers,this.getDimension())}sampleGrid(h,g,v,E,k){let T=Gt.getInstance(),R=this.getDimension(),F=R/2-this.nbCenterLayers,U=R/2+this.nbCenterLayers;return T.sampleGrid(h,R,R,F,F,U,F,U,U,F,U,g.getX(),g.getY(),v.getX(),v.getY(),E.getX(),E.getY(),k.getX(),k.getY())}sampleLine(h,g,v){let E=0,k=this.distanceResultPoint(h,g),T=k/v,R=h.getX(),F=h.getY(),U=T*(g.getX()-h.getX())/k,Z=T*(g.getY()-h.getY())/k;for(let oe=0;oe<v;oe++)this.image.get(ut.round(R+oe*U),ut.round(F+oe*Z))&&(E|=1<<v-oe-1);return E}isWhiteOrBlackRectangle(h,g,v,E){let k=3;h=new qe(h.getX()-k,h.getY()+k),g=new qe(g.getX()-k,g.getY()-k),v=new qe(v.getX()+k,v.getY()-k),E=new qe(E.getX()+k,E.getY()+k);let T=this.getColor(E,h);if(T===0)return!1;let R=this.getColor(h,g);return R!==T||(R=this.getColor(g,v),R!==T)?!1:(R=this.getColor(v,E),R===T)}getColor(h,g){let v=this.distancePoint(h,g),E=(g.getX()-h.getX())/v,k=(g.getY()-h.getY())/v,T=0,R=h.getX(),F=h.getY(),U=this.image.get(h.getX(),h.getY()),Z=Math.ceil(v);for(let xe=0;xe<Z;xe++)R+=E,F+=k,this.image.get(ut.round(R),ut.round(F))!==U&&T++;let oe=T/v;return oe>.1&&oe<.9?0:oe<=.1===U?1:-1}getFirstDifferent(h,g,v,E){let k=h.getX()+v,T=h.getY()+E;for(;this.isValid(k,T)&&this.image.get(k,T)===g;)k+=v,T+=E;for(k-=v,T-=E;this.isValid(k,T)&&this.image.get(k,T)===g;)k+=v;for(k-=v;this.isValid(k,T)&&this.image.get(k,T)===g;)T+=E;return T-=E,new qe(k,T)}expandSquare(h,g,v){let E=v/(2*g),k=h[0].getX()-h[2].getX(),T=h[0].getY()-h[2].getY(),R=(h[0].getX()+h[2].getX())/2,F=(h[0].getY()+h[2].getY())/2,U=new ht(R+E*k,F+E*T),Z=new ht(R-E*k,F-E*T);k=h[1].getX()-h[3].getX(),T=h[1].getY()-h[3].getY(),R=(h[1].getX()+h[3].getX())/2,F=(h[1].getY()+h[3].getY())/2;let oe=new ht(R+E*k,F+E*T),xe=new ht(R-E*k,F-E*T);return[U,oe,Z,xe]}isValid(h,g){return h>=0&&h<this.image.getWidth()&&g>0&&g<this.image.getHeight()}isValidPoint(h){let g=ut.round(h.getX()),v=ut.round(h.getY());return this.isValid(g,v)}distancePoint(h,g){return ut.distance(h.getX(),h.getY(),g.getX(),g.getY())}distanceResultPoint(h,g){return ut.distance(h.getX(),h.getY(),g.getX(),g.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(C.truncDivision(this.nbLayers-4,8)+1)+15}}class Te{decode(h,g=null){let v=null,E=new Xe(h.getBlackMatrix()),k=null,T=null;try{let Z=E.detectMirror(!1);k=Z.getPoints(),this.reportFoundResultPoints(g,k),T=new et().decode(Z)}catch(Z){v=Z}if(T==null)try{let Z=E.detectMirror(!0);k=Z.getPoints(),this.reportFoundResultPoints(g,k),T=new et().decode(Z)}catch(Z){throw v??Z}let R=new G(T.getText(),T.getRawBytes(),T.getNumBits(),k,ne.AZTEC,y.currentTimeMillis()),F=T.getByteSegments();F!=null&&R.putMetadata(re.BYTE_SEGMENTS,F);let U=T.getECLevel();return U!=null&&R.putMetadata(re.ERROR_CORRECTION_LEVEL,U),R}reportFoundResultPoints(h,g){if(h!=null){let v=h.get(P.NEED_RESULT_POINT_CALLBACK);v!=null&&g.forEach((E,k,T)=>{v.foundPossibleResultPoint(E)})}}reset(){}}class He extends de{constructor(h=500){super(new Te,h)}}class je{decode(h,g){try{return this.doDecode(h,g)}catch{if(g&&g.get(P.TRY_HARDER)===!0&&h.isRotateSupported()){const k=h.rotateCounterClockwise(),T=this.doDecode(k,g),R=T.getResultMetadata();let F=270;R!==null&&R.get(re.ORIENTATION)===!0&&(F=F+R.get(re.ORIENTATION)%360),T.putMetadata(re.ORIENTATION,F);const U=T.getResultPoints();if(U!==null){const Z=k.getHeight();for(let oe=0;oe<U.length;oe++)U[oe]=new ht(Z-U[oe].getY()-1,U[oe].getX())}return T}else throw new W}}reset(){}doDecode(h,g){const v=h.getWidth(),E=h.getHeight();let k=new A(v);const T=g&&g.get(P.TRY_HARDER)===!0,R=Math.max(1,E>>(T?8:5));let F;T?F=E:F=15;const U=Math.trunc(E/2);for(let Z=0;Z<F;Z++){const oe=Math.trunc((Z+1)/2),xe=(Z&1)===0,Oe=U+R*(xe?oe:-oe);if(Oe<0||Oe>=E)break;try{k=h.getBlackRow(Oe,k)}catch{continue}for(let ce=0;ce<2;ce++){if(ce===1&&(k.reverse(),g&&g.get(P.NEED_RESULT_POINT_CALLBACK)===!0)){const be=new Map;g.forEach((Ne,Be)=>be.set(Be,Ne)),be.delete(P.NEED_RESULT_POINT_CALLBACK),g=be}try{const be=this.decodeRow(Oe,k,g);if(ce===1){be.putMetadata(re.ORIENTATION,180);const Ne=be.getResultPoints();Ne!==null&&(Ne[0]=new ht(v-Ne[0].getX()-1,Ne[0].getY()),Ne[1]=new ht(v-Ne[1].getX()-1,Ne[1].getY()))}return be}catch{}}}throw new W}static recordPattern(h,g,v){const E=v.length;for(let U=0;U<E;U++)v[U]=0;const k=h.getSize();if(g>=k)throw new W;let T=!h.get(g),R=0,F=g;for(;F<k;){if(h.get(F)!==T)v[R]++;else{if(++R===E)break;v[R]=1,T=!T}F++}if(!(R===E||R===E-1&&F===k))throw new W}static recordPatternInReverse(h,g,v){let E=v.length,k=h.get(g);for(;g>0&&E>=0;)h.get(--g)!==k&&(E--,k=!k);if(E>=0)throw new W;je.recordPattern(h,g+1,v)}static patternMatchVariance(h,g,v){const E=h.length;let k=0,T=0;for(let U=0;U<E;U++)k+=h[U],T+=g[U];if(k<T)return Number.POSITIVE_INFINITY;const R=k/T;v*=R;let F=0;for(let U=0;U<E;U++){const Z=h[U],oe=g[U]*R,xe=Z>oe?Z-oe:oe-Z;if(xe>v)return Number.POSITIVE_INFINITY;F+=xe}return F/k}}class we extends je{static findStartPattern(h){const g=h.getSize(),v=h.getNextSet(0);let E=0,k=Int32Array.from([0,0,0,0,0,0]),T=v,R=!1;const F=6;for(let U=v;U<g;U++)if(h.get(U)!==R)k[E]++;else{if(E===F-1){let Z=we.MAX_AVG_VARIANCE,oe=-1;for(let xe=we.CODE_START_A;xe<=we.CODE_START_C;xe++){const Oe=je.patternMatchVariance(k,we.CODE_PATTERNS[xe],we.MAX_INDIVIDUAL_VARIANCE);Oe<Z&&(Z=Oe,oe=xe)}if(oe>=0&&h.isRange(Math.max(0,T-(U-T)/2),T,!1))return Int32Array.from([T,U,oe]);T+=k[0]+k[1],k=k.slice(2,k.length-1),k[E-1]=0,k[E]=0,E--}else E++;k[E]=1,R=!R}throw new W}static decodeCode(h,g,v){je.recordPattern(h,v,g);let E=we.MAX_AVG_VARIANCE,k=-1;for(let T=0;T<we.CODE_PATTERNS.length;T++){const R=we.CODE_PATTERNS[T],F=this.patternMatchVariance(g,R,we.MAX_INDIVIDUAL_VARIANCE);F<E&&(E=F,k=T)}if(k>=0)return k;throw new W}decodeRow(h,g,v){const E=v&&v.get(P.ASSUME_GS1)===!0,k=we.findStartPattern(g),T=k[2];let R=0;const F=new Uint8Array(20);F[R++]=T;let U;switch(T){case we.CODE_START_A:U=we.CODE_CODE_A;break;case we.CODE_START_B:U=we.CODE_CODE_B;break;case we.CODE_START_C:U=we.CODE_CODE_C;break;default:throw new O}let Z=!1,oe=!1,xe="",Oe=k[0],ce=k[1];const be=Int32Array.from([0,0,0,0,0,0]);let Ne=0,Be=0,lt=T,gt=0,vt=!0,Zt=!1,Br=!1;for(;!Z;){const An=oe;switch(oe=!1,Ne=Be,Be=we.decodeCode(g,be,ce),F[R++]=Be,Be!==we.CODE_STOP&&(vt=!0),Be!==we.CODE_STOP&&(gt++,lt+=gt*Be),Oe=ce,ce+=be.reduce((XP,mk)=>XP+mk,0),Be){case we.CODE_START_A:case we.CODE_START_B:case we.CODE_START_C:throw new O}switch(U){case we.CODE_CODE_A:if(Be<64)Br===Zt?xe+=String.fromCharCode(32+Be):xe+=String.fromCharCode(32+Be+128),Br=!1;else if(Be<96)Br===Zt?xe+=String.fromCharCode(Be-64):xe+=String.fromCharCode(Be+64),Br=!1;else switch(Be!==we.CODE_STOP&&(vt=!1),Be){case we.CODE_FNC_1:E&&(xe.length===0?xe+="]C1":xe+="");break;case we.CODE_FNC_2:case we.CODE_FNC_3:break;case we.CODE_FNC_4_A:!Zt&&Br?(Zt=!0,Br=!1):Zt&&Br?(Zt=!1,Br=!1):Br=!0;break;case we.CODE_SHIFT:oe=!0,U=we.CODE_CODE_B;break;case we.CODE_CODE_B:U=we.CODE_CODE_B;break;case we.CODE_CODE_C:U=we.CODE_CODE_C;break;case we.CODE_STOP:Z=!0;break}break;case we.CODE_CODE_B:if(Be<96)Br===Zt?xe+=String.fromCharCode(32+Be):xe+=String.fromCharCode(32+Be+128),Br=!1;else switch(Be!==we.CODE_STOP&&(vt=!1),Be){case we.CODE_FNC_1:E&&(xe.length===0?xe+="]C1":xe+="");break;case we.CODE_FNC_2:case we.CODE_FNC_3:break;case we.CODE_FNC_4_B:!Zt&&Br?(Zt=!0,Br=!1):Zt&&Br?(Zt=!1,Br=!1):Br=!0;break;case we.CODE_SHIFT:oe=!0,U=we.CODE_CODE_A;break;case we.CODE_CODE_A:U=we.CODE_CODE_A;break;case we.CODE_CODE_C:U=we.CODE_CODE_C;break;case we.CODE_STOP:Z=!0;break}break;case we.CODE_CODE_C:if(Be<100)Be<10&&(xe+="0"),xe+=Be;else switch(Be!==we.CODE_STOP&&(vt=!1),Be){case we.CODE_FNC_1:E&&(xe.length===0?xe+="]C1":xe+="");break;case we.CODE_CODE_A:U=we.CODE_CODE_A;break;case we.CODE_CODE_B:U=we.CODE_CODE_B;break;case we.CODE_STOP:Z=!0;break}break}An&&(U=U===we.CODE_CODE_A?we.CODE_CODE_B:we.CODE_CODE_A)}const Xs=ce-Oe;if(ce=g.getNextUnset(ce),!g.isRange(ce,Math.min(g.getSize(),ce+(ce-Oe)/2),!1))throw new W;if(lt-=gt*Ne,lt%103!==Ne)throw new m;const Di=xe.length;if(Di===0)throw new W;Di>0&&vt&&(U===we.CODE_CODE_C?xe=xe.substring(0,Di-2):xe=xe.substring(0,Di-1));const Wa=(k[1]+k[0])/2,ti=Oe+Xs/2,Mi=F.length,is=new Uint8Array(Mi);for(let An=0;An<Mi;An++)is[An]=F[An];const Ou=[new ht(Wa,h),new ht(ti,h)];return new G(xe,is,0,Ou,ne.CODE_128,new Date().getTime())}}we.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],we.MAX_AVG_VARIANCE=.25,we.MAX_INDIVIDUAL_VARIANCE=.7,we.CODE_SHIFT=98,we.CODE_CODE_C=99,we.CODE_CODE_B=100,we.CODE_CODE_A=101,we.CODE_FNC_1=102,we.CODE_FNC_2=97,we.CODE_FNC_3=96,we.CODE_FNC_4_A=101,we.CODE_FNC_4_B=100,we.CODE_START_A=103,we.CODE_START_B=104,we.CODE_START_C=105,we.CODE_STOP=106;class ot extends je{constructor(h=!1,g=!1){super(),this.usingCheckDigit=h,this.extendedMode=g,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(h,g,v){let E=this.counters;E.fill(0),this.decodeRowResult="";let k=ot.findAsteriskPattern(g,E),T=g.getNextSet(k[1]),R=g.getSize(),F,U;do{ot.recordPattern(g,T,E);let be=ot.toNarrowWidePattern(E);if(be<0)throw new W;F=ot.patternToChar(be),this.decodeRowResult+=F,U=T;for(let Ne of E)T+=Ne;T=g.getNextSet(T)}while(F!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let Z=0;for(let be of E)Z+=be;let oe=T-U-Z;if(T!==R&&oe*2<Z)throw new W;if(this.usingCheckDigit){let be=this.decodeRowResult.length-1,Ne=0;for(let Be=0;Be<be;Be++)Ne+=ot.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Be));if(this.decodeRowResult.charAt(be)!==ot.ALPHABET_STRING.charAt(Ne%43))throw new m;this.decodeRowResult=this.decodeRowResult.substring(0,be)}if(this.decodeRowResult.length===0)throw new W;let xe;this.extendedMode?xe=ot.decodeExtended(this.decodeRowResult):xe=this.decodeRowResult;let Oe=(k[1]+k[0])/2,ce=U+Z/2;return new G(xe,null,0,[new ht(Oe,h),new ht(ce,h)],ne.CODE_39,new Date().getTime())}static findAsteriskPattern(h,g){let v=h.getSize(),E=h.getNextSet(0),k=0,T=E,R=!1,F=g.length;for(let U=E;U<v;U++)if(h.get(U)!==R)g[k]++;else{if(k===F-1){if(this.toNarrowWidePattern(g)===ot.ASTERISK_ENCODING&&h.isRange(Math.max(0,T-Math.floor((U-T)/2)),T,!1))return[T,U];T+=g[0]+g[1],g.copyWithin(0,2,2+k-1),g[k-1]=0,g[k]=0,k--}else k++;g[k]=1,R=!R}throw new W}static toNarrowWidePattern(h){let g=h.length,v=0,E;do{let k=2147483647;for(let F of h)F<k&&F>v&&(k=F);v=k,E=0;let T=0,R=0;for(let F=0;F<g;F++){let U=h[F];U>v&&(R|=1<<g-1-F,E++,T+=U)}if(E===3){for(let F=0;F<g&&E>0;F++){let U=h[F];if(U>v&&(E--,U*2>=T))return-1}return R}}while(E>3);return-1}static patternToChar(h){for(let g=0;g<ot.CHARACTER_ENCODINGS.length;g++)if(ot.CHARACTER_ENCODINGS[g]===h)return ot.ALPHABET_STRING.charAt(g);if(h===ot.ASTERISK_ENCODING)return"*";throw new W}static decodeExtended(h){let g=h.length,v="";for(let E=0;E<g;E++){let k=h.charAt(E);if(k==="+"||k==="$"||k==="%"||k==="/"){let T=h.charAt(E+1),R="\0";switch(k){case"+":if(T>="A"&&T<="Z")R=String.fromCharCode(T.charCodeAt(0)+32);else throw new O;break;case"$":if(T>="A"&&T<="Z")R=String.fromCharCode(T.charCodeAt(0)-64);else throw new O;break;case"%":if(T>="A"&&T<="E")R=String.fromCharCode(T.charCodeAt(0)-38);else if(T>="F"&&T<="J")R=String.fromCharCode(T.charCodeAt(0)-11);else if(T>="K"&&T<="O")R=String.fromCharCode(T.charCodeAt(0)+16);else if(T>="P"&&T<="T")R=String.fromCharCode(T.charCodeAt(0)+43);else if(T==="U")R="\0";else if(T==="V")R="@";else if(T==="W")R="`";else if(T==="X"||T==="Y"||T==="Z")R="";else throw new O;break;case"/":if(T>="A"&&T<="O")R=String.fromCharCode(T.charCodeAt(0)-32);else if(T==="Z")R=":";else throw new O;break}v+=R,E++}else v+=k}return v}}ot.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ot.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ot.ASTERISK_ENCODING=148;class xt extends je{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(h,g,v){let E=this.decodeStart(g),k=this.decodeEnd(g),T=new ie;xt.decodeMiddle(g,E[1],k[0],T);let R=T.toString(),F=null;v!=null&&(F=v.get(P.ALLOWED_LENGTHS)),F==null&&(F=xt.DEFAULT_ALLOWED_LENGTHS);let U=R.length,Z=!1,oe=0;for(let ce of F){if(U===ce){Z=!0;break}ce>oe&&(oe=ce)}if(!Z&&U>oe&&(Z=!0),!Z)throw new O;const xe=[new ht(E[1],h),new ht(k[0],h)];return new G(R,null,0,xe,ne.ITF,new Date().getTime())}static decodeMiddle(h,g,v,E){let k=new Int32Array(10),T=new Int32Array(5),R=new Int32Array(5);for(k.fill(0),T.fill(0),R.fill(0);g<v;){je.recordPattern(h,g,k);for(let U=0;U<5;U++){let Z=2*U;T[U]=k[Z],R[U]=k[Z+1]}let F=xt.decodeDigit(T);E.append(F.toString()),F=this.decodeDigit(R),E.append(F.toString()),k.forEach(function(U){g+=U})}}decodeStart(h){let g=xt.skipWhiteSpace(h),v=xt.findGuardPattern(h,g,xt.START_PATTERN);return this.narrowLineWidth=(v[1]-v[0])/4,this.validateQuietZone(h,v[0]),v}validateQuietZone(h,g){let v=this.narrowLineWidth*10;v=v<g?v:g;for(let E=g-1;v>0&&E>=0&&!h.get(E);E--)v--;if(v!==0)throw new W}static skipWhiteSpace(h){const g=h.getSize(),v=h.getNextSet(0);if(v===g)throw new W;return v}decodeEnd(h){h.reverse();try{let g=xt.skipWhiteSpace(h),v;try{v=xt.findGuardPattern(h,g,xt.END_PATTERN_REVERSED[0])}catch(k){k instanceof W&&(v=xt.findGuardPattern(h,g,xt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(h,v[0]);let E=v[0];return v[0]=h.getSize()-v[1],v[1]=h.getSize()-E,v}finally{h.reverse()}}static findGuardPattern(h,g,v){let E=v.length,k=new Int32Array(E),T=h.getSize(),R=!1,F=0,U=g;k.fill(0);for(let Z=g;Z<T;Z++)if(h.get(Z)!==R)k[F]++;else{if(F===E-1){if(je.patternMatchVariance(k,v,xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE)return[U,Z];U+=k[0]+k[1],y.arraycopy(k,2,k,0,F-1),k[F-1]=0,k[F]=0,F--}else F++;k[F]=1,R=!R}throw new W}static decodeDigit(h){let g=xt.MAX_AVG_VARIANCE,v=-1,E=xt.PATTERNS.length;for(let k=0;k<E;k++){let T=xt.PATTERNS[k],R=je.patternMatchVariance(h,T,xt.MAX_INDIVIDUAL_VARIANCE);R<g?(g=R,v=k):R===g&&(v=-1)}if(v>=0)return v%10;throw new W}}xt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],xt.MAX_AVG_VARIANCE=.38,xt.MAX_INDIVIDUAL_VARIANCE=.5,xt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],xt.START_PATTERN=Int32Array.from([1,1,1,1]),xt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Dt extends je{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(h){let g=!1,v,E=0,k=Int32Array.from([0,0,0]);for(;!g;){k=Int32Array.from([0,0,0]),v=Dt.findGuardPattern(h,E,!1,this.START_END_PATTERN,k);let T=v[0];E=v[1];let R=T-(E-T);R>=0&&(g=h.isRange(R,T,!1))}return v}static checkChecksum(h){return Dt.checkStandardUPCEANChecksum(h)}static checkStandardUPCEANChecksum(h){let g=h.length;if(g===0)return!1;let v=parseInt(h.charAt(g-1),10);return Dt.getStandardUPCEANChecksum(h.substring(0,g-1))===v}static getStandardUPCEANChecksum(h){let g=h.length,v=0;for(let E=g-1;E>=0;E-=2){let k=h.charAt(E).charCodeAt(0)-48;if(k<0||k>9)throw new O;v+=k}v*=3;for(let E=g-2;E>=0;E-=2){let k=h.charAt(E).charCodeAt(0)-48;if(k<0||k>9)throw new O;v+=k}return(1e3-v)%10}static decodeEnd(h,g){return Dt.findGuardPattern(h,g,!1,Dt.START_END_PATTERN,new Int32Array(Dt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(h,g,v,E){return this.findGuardPattern(h,g,v,E,new Int32Array(E.length))}static findGuardPattern(h,g,v,E,k){let T=h.getSize();g=v?h.getNextUnset(g):h.getNextSet(g);let R=0,F=g,U=E.length,Z=v;for(let oe=g;oe<T;oe++)if(h.get(oe)!==Z)k[R]++;else{if(R===U-1){if(je.patternMatchVariance(k,E,Dt.MAX_INDIVIDUAL_VARIANCE)<Dt.MAX_AVG_VARIANCE)return Int32Array.from([F,oe]);F+=k[0]+k[1];let xe=k.slice(2,k.length-1);for(let Oe=0;Oe<R-1;Oe++)k[Oe]=xe[Oe];k[R-1]=0,k[R]=0,R--}else R++;k[R]=1,Z=!Z}throw new W}static decodeDigit(h,g,v,E){this.recordPattern(h,v,g);let k=this.MAX_AVG_VARIANCE,T=-1,R=E.length;for(let F=0;F<R;F++){let U=E[F],Z=je.patternMatchVariance(g,U,Dt.MAX_INDIVIDUAL_VARIANCE);Z<k&&(k=Z,T=F)}if(T>=0)return T;throw new W}}Dt.MAX_AVG_VARIANCE=.48,Dt.MAX_INDIVIDUAL_VARIANCE=.7,Dt.START_END_PATTERN=Int32Array.from([1,1,1]),Dt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Dt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Dt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Pt{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(h,g,v){let E=this.decodeRowStringBuffer,k=this.decodeMiddle(g,v,E),T=E.toString(),R=Pt.parseExtensionString(T),F=[new ht((v[0]+v[1])/2,h),new ht(k,h)],U=new G(T,null,0,F,ne.UPC_EAN_EXTENSION,new Date().getTime());return R!=null&&U.putAllMetadata(R),U}decodeMiddle(h,g,v){let E=this.decodeMiddleCounters;E[0]=0,E[1]=0,E[2]=0,E[3]=0;let k=h.getSize(),T=g[1],R=0;for(let U=0;U<5&&T<k;U++){let Z=Dt.decodeDigit(h,E,T,Dt.L_AND_G_PATTERNS);v+=String.fromCharCode(48+Z%10);for(let oe of E)T+=oe;Z>=10&&(R|=1<<4-U),U!==4&&(T=h.getNextSet(T),T=h.getNextUnset(T))}if(v.length!==5)throw new W;let F=this.determineCheckDigit(R);if(Pt.extensionChecksum(v.toString())!==F)throw new W;return T}static extensionChecksum(h){let g=h.length,v=0;for(let E=g-2;E>=0;E-=2)v+=h.charAt(E).charCodeAt(0)-48;v*=3;for(let E=g-1;E>=0;E-=2)v+=h.charAt(E).charCodeAt(0)-48;return v*=3,v%10}determineCheckDigit(h){for(let g=0;g<10;g++)if(h===this.CHECK_DIGIT_ENCODINGS[g])return g;throw new W}static parseExtensionString(h){if(h.length!==5)return null;let g=Pt.parseExtension5String(h);return g==null?null:new Map([[re.SUGGESTED_PRICE,g]])}static parseExtension5String(h){let g;switch(h.charAt(0)){case"0":g="";break;case"5":g="$";break;case"9":switch(h){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}g="";break;default:g="";break}let v=parseInt(h.substring(1)),E=(v/100).toString(),k=v%100,T=k<10?"0"+k:k.toString();return g+E+"."+T}}class kr{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(h,g,v){let E=this.decodeRowStringBuffer,k=this.decodeMiddle(g,v,E),T=E.toString(),R=kr.parseExtensionString(T),F=[new ht((v[0]+v[1])/2,h),new ht(k,h)],U=new G(T,null,0,F,ne.UPC_EAN_EXTENSION,new Date().getTime());return R!=null&&U.putAllMetadata(R),U}decodeMiddle(h,g,v){let E=this.decodeMiddleCounters;E[0]=0,E[1]=0,E[2]=0,E[3]=0;let k=h.getSize(),T=g[1],R=0;for(let F=0;F<2&&T<k;F++){let U=Dt.decodeDigit(h,E,T,Dt.L_AND_G_PATTERNS);v+=String.fromCharCode(48+U%10);for(let Z of E)T+=Z;U>=10&&(R|=1<<1-F),F!==1&&(T=h.getNextSet(T),T=h.getNextUnset(T))}if(v.length!==2)throw new W;if(parseInt(v.toString())%4!==R)throw new W;return T}static parseExtensionString(h){return h.length!==2?null:new Map([[re.ISSUE_NUMBER,parseInt(h)]])}}class Cn{static decodeRow(h,g,v){let E=Dt.findGuardPattern(g,v,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Pt().decodeRow(h,g,E)}catch{return new kr().decodeRow(h,g,E)}}}Cn.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class fr extends Dt{constructor(){super(),this.decodeRowStringBuffer="",fr.L_AND_G_PATTERNS=fr.L_PATTERNS.map(h=>Int32Array.from(h));for(let h=10;h<20;h++){let g=fr.L_PATTERNS[h-10],v=new Int32Array(g.length);for(let E=0;E<g.length;E++)v[E]=g[g.length-E-1];fr.L_AND_G_PATTERNS[h]=v}}decodeRow(h,g,v){let E=fr.findStartGuardPattern(g),k=v==null?null:v.get(P.NEED_RESULT_POINT_CALLBACK);if(k!=null){const vt=new ht((E[0]+E[1])/2,h);k.foundPossibleResultPoint(vt)}let T=this.decodeMiddle(g,E,this.decodeRowStringBuffer),R=T.rowOffset,F=T.resultString;if(k!=null){const vt=new ht(R,h);k.foundPossibleResultPoint(vt)}let U=this.decodeEnd(g,R);if(k!=null){const vt=new ht((U[0]+U[1])/2,h);k.foundPossibleResultPoint(vt)}let Z=U[1],oe=Z+(Z-U[0]);if(oe>=g.getSize()||!g.isRange(Z,oe,!1))throw new W;let xe=F.toString();if(xe.length<8)throw new O;if(!fr.checkChecksum(xe))throw new m;let Oe=(E[1]+E[0])/2,ce=(U[1]+U[0])/2,be=this.getBarcodeFormat(),Ne=[new ht(Oe,h),new ht(ce,h)],Be=new G(xe,null,0,Ne,be,new Date().getTime()),lt=0;try{let vt=Cn.decodeRow(h,g,U[1]);Be.putMetadata(re.UPC_EAN_EXTENSION,vt.getText()),Be.putAllMetadata(vt.getResultMetadata()),Be.addResultPoints(vt.getResultPoints()),lt=vt.getText().length}catch{}let gt=v==null?null:v.get(P.ALLOWED_EAN_EXTENSIONS);if(gt!=null){let vt=!1;for(let Zt in gt)if(lt.toString()===Zt){vt=!0;break}if(!vt)throw new W}return Be}decodeEnd(h,g){return fr.findGuardPattern(h,g,!1,fr.START_END_PATTERN,new Int32Array(fr.START_END_PATTERN.length).fill(0))}static checkChecksum(h){return fr.checkStandardUPCEANChecksum(h)}static checkStandardUPCEANChecksum(h){let g=h.length;if(g===0)return!1;let v=parseInt(h.charAt(g-1),10);return fr.getStandardUPCEANChecksum(h.substring(0,g-1))===v}static getStandardUPCEANChecksum(h){let g=h.length,v=0;for(let E=g-1;E>=0;E-=2){let k=h.charAt(E).charCodeAt(0)-48;if(k<0||k>9)throw new O;v+=k}v*=3;for(let E=g-2;E>=0;E-=2){let k=h.charAt(E).charCodeAt(0)-48;if(k<0||k>9)throw new O;v+=k}return(1e3-v)%10}}class Qi extends fr{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(h,g,v){let E=this.decodeMiddleCounters;E[0]=0,E[1]=0,E[2]=0,E[3]=0;let k=h.getSize(),T=g[1],R=0;for(let U=0;U<6&&T<k;U++){let Z=fr.decodeDigit(h,E,T,fr.L_AND_G_PATTERNS);v+=String.fromCharCode(48+Z%10);for(let oe of E)T+=oe;Z>=10&&(R|=1<<5-U)}v=Qi.determineFirstDigit(v,R),T=fr.findGuardPattern(h,T,!0,fr.MIDDLE_PATTERN,new Int32Array(fr.MIDDLE_PATTERN.length).fill(0))[1];for(let U=0;U<6&&T<k;U++){let Z=fr.decodeDigit(h,E,T,fr.L_PATTERNS);v+=String.fromCharCode(48+Z);for(let oe of E)T+=oe}return{rowOffset:T,resultString:v}}getBarcodeFormat(){return ne.EAN_13}static determineFirstDigit(h,g){for(let v=0;v<10;v++)if(g===this.FIRST_DIGIT_ENCODINGS[v])return h=String.fromCharCode(48+v)+h,h;throw new W}}Qi.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Fn extends fr{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(h,g,v){const E=this.decodeMiddleCounters;E[0]=0,E[1]=0,E[2]=0,E[3]=0;let k=h.getSize(),T=g[1];for(let F=0;F<4&&T<k;F++){let U=fr.decodeDigit(h,E,T,fr.L_PATTERNS);v+=String.fromCharCode(48+U);for(let Z of E)T+=Z}T=fr.findGuardPattern(h,T,!0,fr.MIDDLE_PATTERN,new Int32Array(fr.MIDDLE_PATTERN.length).fill(0))[1];for(let F=0;F<4&&T<k;F++){let U=fr.decodeDigit(h,E,T,fr.L_PATTERNS);v+=String.fromCharCode(48+U);for(let Z of E)T+=Z}return{rowOffset:T,resultString:v}}getBarcodeFormat(){return ne.EAN_8}}class il extends fr{constructor(){super(...arguments),this.ean13Reader=new Qi}getBarcodeFormat(){return ne.UPC_A}decode(h,g){return this.maybeReturnResult(this.ean13Reader.decode(h))}decodeRow(h,g,v){return this.maybeReturnResult(this.ean13Reader.decodeRow(h,g,v))}decodeMiddle(h,g,v){return this.ean13Reader.decodeMiddle(h,g,v)}maybeReturnResult(h){let g=h.getText();if(g.charAt(0)==="0"){let v=new G(g.substring(1),null,null,h.getResultPoints(),ne.UPC_A);return h.getResultMetadata()!=null&&v.putAllMetadata(h.getResultMetadata()),v}else throw new W}reset(){this.ean13Reader.reset()}}class We extends fr{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(h,g,v){const E=this.decodeMiddleCounters.map(U=>U);E[0]=0,E[1]=0,E[2]=0,E[3]=0;const k=h.getSize();let T=g[1],R=0;for(let U=0;U<6&&T<k;U++){const Z=We.decodeDigit(h,E,T,We.L_AND_G_PATTERNS);v+=String.fromCharCode(48+Z%10);for(let oe of E)T+=oe;Z>=10&&(R|=1<<5-U)}let F=We.determineNumSysAndCheckDigit(v,R);return{rowOffset:T,resultString:F}}decodeEnd(h,g){return We.findGuardPatternWithoutCounters(h,g,!0,We.MIDDLE_END_PATTERN)}checkChecksum(h){return fr.checkChecksum(We.convertUPCEtoUPCA(h))}static determineNumSysAndCheckDigit(h,g){for(let v=0;v<=1;v++)for(let E=0;E<10;E++)if(g===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[v][E]){let k=String.fromCharCode(48+v),T=String.fromCharCode(48+E);return k+h+T}throw W.getNotFoundInstance()}getBarcodeFormat(){return ne.UPC_E}static convertUPCEtoUPCA(h){const g=h.slice(1,7).split("").map(k=>k.charCodeAt(0)),v=new ie;v.append(h.charAt(0));let E=g[5];switch(E){case 0:case 1:case 2:v.appendChars(g,0,2),v.append(E),v.append("0000"),v.appendChars(g,2,3);break;case 3:v.appendChars(g,0,3),v.append("00000"),v.appendChars(g,3,2);break;case 4:v.appendChars(g,0,4),v.append("00000"),v.append(g[4]);break;default:v.appendChars(g,0,5),v.append("0000"),v.append(E);break}return h.length>=8&&v.append(h.charAt(7)),v.toString()}}We.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),We.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Je extends je{constructor(h){super();let g=h==null?null:h.get(P.POSSIBLE_FORMATS),v=[];n(g)?(v.push(new Qi),v.push(new il),v.push(new Fn),v.push(new We)):(g.indexOf(ne.EAN_13)>-1&&v.push(new Qi),g.indexOf(ne.UPC_A)>-1&&v.push(new il),g.indexOf(ne.EAN_8)>-1&&v.push(new Fn),g.indexOf(ne.UPC_E)>-1&&v.push(new We)),this.readers=v}decodeRow(h,g,v){for(let E of this.readers)try{const k=E.decodeRow(h,g,v),T=k.getBarcodeFormat()===ne.EAN_13&&k.getText().charAt(0)==="0",R=v==null?null:v.get(P.POSSIBLE_FORMATS),F=R==null||R.includes(ne.UPC_A);if(T&&F){const U=k.getRawBytes(),Z=new G(k.getText().substring(1),U,U?U.length:null,k.getResultPoints(),ne.UPC_A);return Z.putAllMetadata(k.getResultMetadata()),Z}return k}catch{}throw new W}reset(){for(let h of this.readers)h.reset()}}class rt extends je{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(h,g){for(let v=0;v<g.length;v++)if(je.patternMatchVariance(h,g[v],rt.MAX_INDIVIDUAL_VARIANCE)<rt.MAX_AVG_VARIANCE)return v;throw new W}static count(h){return ut.sum(new Int32Array(h))}static increment(h,g){let v=0,E=g[0];for(let k=1;k<h.length;k++)g[k]>E&&(E=g[k],v=k);h[v]++}static decrement(h,g){let v=0,E=g[0];for(let k=1;k<h.length;k++)g[k]<E&&(E=g[k],v=k);h[v]--}static isFinderPattern(h){let g=h[0]+h[1],v=g+h[2]+h[3],E=g/v;if(E>=rt.MIN_FINDER_PATTERN_RATIO&&E<=rt.MAX_FINDER_PATTERN_RATIO){let k=Number.MAX_SAFE_INTEGER,T=Number.MIN_SAFE_INTEGER;for(let R of h)R>T&&(T=R),R<k&&(k=R);return T<10*k}return!1}}rt.MAX_AVG_VARIANCE=.2,rt.MAX_INDIVIDUAL_VARIANCE=.45,rt.MIN_FINDER_PATTERN_RATIO=9.5/12,rt.MAX_FINDER_PATTERN_RATIO=12.5/14;class _t{constructor(h,g){this.value=h,this.checksumPortion=g}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(h){if(!(h instanceof _t))return!1;const g=h;return this.value===g.value&&this.checksumPortion===g.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ut{constructor(h,g,v,E,k){this.value=h,this.startEnd=g,this.value=h,this.startEnd=g,this.resultPoints=new Array,this.resultPoints.push(new ht(v,k)),this.resultPoints.push(new ht(E,k))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(h){if(!(h instanceof Ut))return!1;const g=h;return this.value===g.value}hashCode(){return this.value}}class ir{constructor(){}static getRSSvalue(h,g,v){let E=0;for(let F of h)E+=F;let k=0,T=0,R=h.length;for(let F=0;F<R-1;F++){let U;for(U=1,T|=1<<F;U<h[F];U++,T&=~(1<<F)){let Z=ir.combins(E-U-1,R-F-2);if(v&&T===0&&E-U-(R-F-1)>=R-F-1&&(Z-=ir.combins(E-U-(R-F),R-F-2)),R-F-1>1){let oe=0;for(let xe=E-U-(R-F-2);xe>g;xe--)oe+=ir.combins(E-U-xe-1,R-F-3);Z-=oe*(R-1-F)}else E-U>g&&Z--;k+=Z}E-=U}return k}static combins(h,g){let v,E;h-g>g?(E=g,v=h-g):(E=h-g,v=g);let k=1,T=1;for(let R=h;R>v;R--)k*=R,T<=E&&(k/=T,T++);for(;T<=E;)k/=T,T++;return k}}class tr{static buildBitArray(h){let g=h.length*2-1;h[h.length-1].getRightChar()==null&&(g-=1);let v=12*g,E=new A(v),k=0,R=h[0].getRightChar().getValue();for(let F=11;F>=0;--F)R&1<<F&&E.set(k),k++;for(let F=1;F<h.length;++F){let U=h[F],Z=U.getLeftChar().getValue();for(let oe=11;oe>=0;--oe)Z&1<<oe&&E.set(k),k++;if(U.getRightChar()!=null){let oe=U.getRightChar().getValue();for(let xe=11;xe>=0;--xe)oe&1<<xe&&E.set(k),k++}}return E}}class $t{constructor(h,g){g?this.decodedInformation=null:(this.finished=h,this.decodedInformation=g)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class _r{constructor(h){this.newPosition=h}getNewPosition(){return this.newPosition}}class Jt extends _r{constructor(h,g){super(h),this.value=g}getValue(){return this.value}isFNC1(){return this.value===Jt.FNC1}}Jt.FNC1="$";class Hn extends _r{constructor(h,g,v){super(h),v?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=g}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class ue extends _r{constructor(h,g,v){if(super(h),g<0||g>10||v<0||v>10)throw new O;this.firstDigit=g,this.secondDigit=v}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===ue.FNC1}isSecondDigitFNC1(){return this.secondDigit===ue.FNC1}isAnyFNC1(){return this.firstDigit===ue.FNC1||this.secondDigit===ue.FNC1}}ue.FNC1=10;class fe{constructor(){}static parseFieldsInGeneralPurpose(h){if(!h)return null;if(h.length<2)throw new W;let g=h.substring(0,2);for(let k of fe.TWO_DIGIT_DATA_LENGTH)if(k[0]===g)return k[1]===fe.VARIABLE_LENGTH?fe.processVariableAI(2,k[2],h):fe.processFixedAI(2,k[1],h);if(h.length<3)throw new W;let v=h.substring(0,3);for(let k of fe.THREE_DIGIT_DATA_LENGTH)if(k[0]===v)return k[1]===fe.VARIABLE_LENGTH?fe.processVariableAI(3,k[2],h):fe.processFixedAI(3,k[1],h);for(let k of fe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(k[0]===v)return k[1]===fe.VARIABLE_LENGTH?fe.processVariableAI(4,k[2],h):fe.processFixedAI(4,k[1],h);if(h.length<4)throw new W;let E=h.substring(0,4);for(let k of fe.FOUR_DIGIT_DATA_LENGTH)if(k[0]===E)return k[1]===fe.VARIABLE_LENGTH?fe.processVariableAI(4,k[2],h):fe.processFixedAI(4,k[1],h);throw new W}static processFixedAI(h,g,v){if(v.length<h)throw new W;let E=v.substring(0,h);if(v.length<h+g)throw new W;let k=v.substring(h,h+g),T=v.substring(h+g),R="("+E+")"+k,F=fe.parseFieldsInGeneralPurpose(T);return F==null?R:R+F}static processVariableAI(h,g,v){let E=v.substring(0,h),k;v.length<h+g?k=v.length:k=h+g;let T=v.substring(h,k),R=v.substring(k),F="("+E+")"+T,U=fe.parseFieldsInGeneralPurpose(R);return U==null?F:F+U}}fe.VARIABLE_LENGTH=[],fe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",fe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",fe.VARIABLE_LENGTH,20],["22",fe.VARIABLE_LENGTH,29],["30",fe.VARIABLE_LENGTH,8],["37",fe.VARIABLE_LENGTH,8],["90",fe.VARIABLE_LENGTH,30],["91",fe.VARIABLE_LENGTH,30],["92",fe.VARIABLE_LENGTH,30],["93",fe.VARIABLE_LENGTH,30],["94",fe.VARIABLE_LENGTH,30],["95",fe.VARIABLE_LENGTH,30],["96",fe.VARIABLE_LENGTH,30],["97",fe.VARIABLE_LENGTH,3],["98",fe.VARIABLE_LENGTH,30],["99",fe.VARIABLE_LENGTH,30]],fe.THREE_DIGIT_DATA_LENGTH=[["240",fe.VARIABLE_LENGTH,30],["241",fe.VARIABLE_LENGTH,30],["242",fe.VARIABLE_LENGTH,6],["250",fe.VARIABLE_LENGTH,30],["251",fe.VARIABLE_LENGTH,30],["253",fe.VARIABLE_LENGTH,17],["254",fe.VARIABLE_LENGTH,20],["400",fe.VARIABLE_LENGTH,30],["401",fe.VARIABLE_LENGTH,30],["402",17],["403",fe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",fe.VARIABLE_LENGTH,20],["421",fe.VARIABLE_LENGTH,15],["422",3],["423",fe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],fe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",fe.VARIABLE_LENGTH,15],["391",fe.VARIABLE_LENGTH,18],["392",fe.VARIABLE_LENGTH,15],["393",fe.VARIABLE_LENGTH,18],["703",fe.VARIABLE_LENGTH,30]],fe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",fe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",fe.VARIABLE_LENGTH,20],["8003",fe.VARIABLE_LENGTH,30],["8004",fe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",fe.VARIABLE_LENGTH,30],["8008",fe.VARIABLE_LENGTH,12],["8018",18],["8020",fe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",fe.VARIABLE_LENGTH,70],["8200",fe.VARIABLE_LENGTH,70]];class ye{constructor(h){this.buffer=new ie,this.information=h}decodeAllCodes(h,g){let v=g,E=null;do{let k=this.decodeGeneralPurposeField(v,E),T=fe.parseFieldsInGeneralPurpose(k.getNewString());if(T!=null&&h.append(T),k.isRemaining()?E=""+k.getRemainingValue():E=null,v===k.getNewPosition())break;v=k.getNewPosition()}while(!0);return h.toString()}isStillNumeric(h){if(h+7>this.information.getSize())return h+4<=this.information.getSize();for(let g=h;g<h+3;++g)if(this.information.get(g))return!0;return this.information.get(h+3)}decodeNumeric(h){if(h+7>this.information.getSize()){let k=this.extractNumericValueFromBitArray(h,4);return k===0?new ue(this.information.getSize(),ue.FNC1,ue.FNC1):new ue(this.information.getSize(),k-1,ue.FNC1)}let g=this.extractNumericValueFromBitArray(h,7),v=(g-8)/11,E=(g-8)%11;return new ue(h+7,v,E)}extractNumericValueFromBitArray(h,g){return ye.extractNumericValueFromBitArray(this.information,h,g)}static extractNumericValueFromBitArray(h,g,v){let E=0;for(let k=0;k<v;++k)h.get(g+k)&&(E|=1<<v-k-1);return E}decodeGeneralPurposeField(h,g){this.buffer.setLengthToZero(),g!=null&&this.buffer.append(g),this.current.setPosition(h);let v=this.parseBlocks();return v!=null&&v.isRemaining()?new Hn(this.current.getPosition(),this.buffer.toString(),v.getRemainingValue()):new Hn(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let h,g;do{let v=this.current.getPosition();if(this.current.isAlpha()?(g=this.parseAlphaBlock(),h=g.isFinished()):this.current.isIsoIec646()?(g=this.parseIsoIec646Block(),h=g.isFinished()):(g=this.parseNumericBlock(),h=g.isFinished()),!(v!==this.current.getPosition())&&!h)break}while(!h);return g.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let h=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(h.getNewPosition()),h.isFirstDigitFNC1()){let g;return h.isSecondDigitFNC1()?g=new Hn(this.current.getPosition(),this.buffer.toString()):g=new Hn(this.current.getPosition(),this.buffer.toString(),h.getSecondDigit()),new $t(!0,g)}if(this.buffer.append(h.getFirstDigit()),h.isSecondDigitFNC1()){let g=new Hn(this.current.getPosition(),this.buffer.toString());return new $t(!0,g)}this.buffer.append(h.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new $t(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let h=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(h.getNewPosition()),h.isFNC1()){let g=new Hn(this.current.getPosition(),this.buffer.toString());return new $t(!0,g)}this.buffer.append(h.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new $t(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let h=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(h.getNewPosition()),h.isFNC1()){let g=new Hn(this.current.getPosition(),this.buffer.toString());return new $t(!0,g)}this.buffer.append(h.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new $t(!1)}isStillIsoIec646(h){if(h+5>this.information.getSize())return!1;let g=this.extractNumericValueFromBitArray(h,5);if(g>=5&&g<16)return!0;if(h+7>this.information.getSize())return!1;let v=this.extractNumericValueFromBitArray(h,7);if(v>=64&&v<116)return!0;if(h+8>this.information.getSize())return!1;let E=this.extractNumericValueFromBitArray(h,8);return E>=232&&E<253}decodeIsoIec646(h){let g=this.extractNumericValueFromBitArray(h,5);if(g===15)return new Jt(h+5,Jt.FNC1);if(g>=5&&g<15)return new Jt(h+5,"0"+(g-5));let v=this.extractNumericValueFromBitArray(h,7);if(v>=64&&v<90)return new Jt(h+7,""+(v+1));if(v>=90&&v<116)return new Jt(h+7,""+(v+7));let E=this.extractNumericValueFromBitArray(h,8),k;switch(E){case 232:k="!";break;case 233:k='"';break;case 234:k="%";break;case 235:k="&";break;case 236:k="'";break;case 237:k="(";break;case 238:k=")";break;case 239:k="*";break;case 240:k="+";break;case 241:k=",";break;case 242:k="-";break;case 243:k=".";break;case 244:k="/";break;case 245:k=":";break;case 246:k=";";break;case 247:k="<";break;case 248:k="=";break;case 249:k=">";break;case 250:k="?";break;case 251:k="_";break;case 252:k=" ";break;default:throw new O}return new Jt(h+8,k)}isStillAlpha(h){if(h+5>this.information.getSize())return!1;let g=this.extractNumericValueFromBitArray(h,5);if(g>=5&&g<16)return!0;if(h+6>this.information.getSize())return!1;let v=this.extractNumericValueFromBitArray(h,6);return v>=16&&v<63}decodeAlphanumeric(h){let g=this.extractNumericValueFromBitArray(h,5);if(g===15)return new Jt(h+5,Jt.FNC1);if(g>=5&&g<15)return new Jt(h+5,"0"+(g-5));let v=this.extractNumericValueFromBitArray(h,6);if(v>=32&&v<58)return new Jt(h+6,""+(v+33));let E;switch(v){case 58:E="*";break;case 59:E=",";break;case 60:E="-";break;case 61:E=".";break;case 62:E="/";break;default:throw new ze("Decoding invalid alphanumeric value: "+v)}return new Jt(h+6,E)}isAlphaTo646ToAlphaLatch(h){if(h+1>this.information.getSize())return!1;for(let g=0;g<5&&g+h<this.information.getSize();++g)if(g===2){if(!this.information.get(h+2))return!1}else if(this.information.get(h+g))return!1;return!0}isAlphaOr646ToNumericLatch(h){if(h+3>this.information.getSize())return!1;for(let g=h;g<h+3;++g)if(this.information.get(g))return!1;return!0}isNumericToAlphaNumericLatch(h){if(h+1>this.information.getSize())return!1;for(let g=0;g<4&&g+h<this.information.getSize();++g)if(this.information.get(h+g))return!1;return!0}}class ke{constructor(h){this.information=h,this.generalDecoder=new ye(h)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class he extends ke{constructor(h){super(h)}encodeCompressedGtin(h,g){h.append("(01)");let v=h.length();h.append("9"),this.encodeCompressedGtinWithoutAI(h,g,v)}encodeCompressedGtinWithoutAI(h,g,v){for(let E=0;E<4;++E){let k=this.getGeneralDecoder().extractNumericValueFromBitArray(g+10*E,10);k/100===0&&h.append("0"),k/10===0&&h.append("0"),h.append(k)}he.appendCheckDigit(h,v)}static appendCheckDigit(h,g){let v=0;for(let E=0;E<13;E++){let k=h.charAt(E+g).charCodeAt(0)-48;v+=E&1?k:3*k}v=10-v%10,v===10&&(v=0),h.append(v)}}he.GTIN_SIZE=40;class me extends he{constructor(h){super(h)}parseInformation(){let h=new ie;h.append("(01)");let g=h.length(),v=this.getGeneralDecoder().extractNumericValueFromBitArray(me.HEADER_SIZE,4);return h.append(v),this.encodeCompressedGtinWithoutAI(h,me.HEADER_SIZE+4,g),this.getGeneralDecoder().decodeAllCodes(h,me.HEADER_SIZE+44)}}me.HEADER_SIZE=4;class Fe extends ke{constructor(h){super(h)}parseInformation(){let h=new ie;return this.getGeneralDecoder().decodeAllCodes(h,Fe.HEADER_SIZE)}}Fe.HEADER_SIZE=5;class it extends he{constructor(h){super(h)}encodeCompressedWeight(h,g,v){let E=this.getGeneralDecoder().extractNumericValueFromBitArray(g,v);this.addWeightCode(h,E);let k=this.checkWeight(E),T=1e5;for(let R=0;R<5;++R)k/T===0&&h.append("0"),T/=10;h.append(k)}}class Ge extends it{constructor(h){super(h)}parseInformation(){if(this.getInformation().getSize()!=Ge.HEADER_SIZE+it.GTIN_SIZE+Ge.WEIGHT_SIZE)throw new W;let h=new ie;return this.encodeCompressedGtin(h,Ge.HEADER_SIZE),this.encodeCompressedWeight(h,Ge.HEADER_SIZE+it.GTIN_SIZE,Ge.WEIGHT_SIZE),h.toString()}}Ge.HEADER_SIZE=5,Ge.WEIGHT_SIZE=15;class Ye extends Ge{constructor(h){super(h)}addWeightCode(h,g){h.append("(3103)")}checkWeight(h){return h}}class Ze extends Ge{constructor(h){super(h)}addWeightCode(h,g){g<1e4?h.append("(3202)"):h.append("(3203)")}checkWeight(h){return h<1e4?h:h-1e4}}class wt extends he{constructor(h){super(h)}parseInformation(){if(this.getInformation().getSize()<wt.HEADER_SIZE+he.GTIN_SIZE)throw new W;let h=new ie;this.encodeCompressedGtin(h,wt.HEADER_SIZE);let g=this.getGeneralDecoder().extractNumericValueFromBitArray(wt.HEADER_SIZE+he.GTIN_SIZE,wt.LAST_DIGIT_SIZE);h.append("(392"),h.append(g),h.append(")");let v=this.getGeneralDecoder().decodeGeneralPurposeField(wt.HEADER_SIZE+he.GTIN_SIZE+wt.LAST_DIGIT_SIZE,null);return h.append(v.getNewString()),h.toString()}}wt.HEADER_SIZE=8,wt.LAST_DIGIT_SIZE=2;class At extends he{constructor(h){super(h)}parseInformation(){if(this.getInformation().getSize()<At.HEADER_SIZE+he.GTIN_SIZE)throw new W;let h=new ie;this.encodeCompressedGtin(h,At.HEADER_SIZE);let g=this.getGeneralDecoder().extractNumericValueFromBitArray(At.HEADER_SIZE+he.GTIN_SIZE,At.LAST_DIGIT_SIZE);h.append("(393"),h.append(g),h.append(")");let v=this.getGeneralDecoder().extractNumericValueFromBitArray(At.HEADER_SIZE+he.GTIN_SIZE+At.LAST_DIGIT_SIZE,At.FIRST_THREE_DIGITS_SIZE);v/100==0&&h.append("0"),v/10==0&&h.append("0"),h.append(v);let E=this.getGeneralDecoder().decodeGeneralPurposeField(At.HEADER_SIZE+he.GTIN_SIZE+At.LAST_DIGIT_SIZE+At.FIRST_THREE_DIGITS_SIZE,null);return h.append(E.getNewString()),h.toString()}}At.HEADER_SIZE=8,At.LAST_DIGIT_SIZE=2,At.FIRST_THREE_DIGITS_SIZE=10;class dt extends it{constructor(h,g,v){super(h),this.dateCode=v,this.firstAIdigits=g}parseInformation(){if(this.getInformation().getSize()!=dt.HEADER_SIZE+dt.GTIN_SIZE+dt.WEIGHT_SIZE+dt.DATE_SIZE)throw new W;let h=new ie;return this.encodeCompressedGtin(h,dt.HEADER_SIZE),this.encodeCompressedWeight(h,dt.HEADER_SIZE+dt.GTIN_SIZE,dt.WEIGHT_SIZE),this.encodeCompressedDate(h,dt.HEADER_SIZE+dt.GTIN_SIZE+dt.WEIGHT_SIZE),h.toString()}encodeCompressedDate(h,g){let v=this.getGeneralDecoder().extractNumericValueFromBitArray(g,dt.DATE_SIZE);if(v==38400)return;h.append("("),h.append(this.dateCode),h.append(")");let E=v%32;v/=32;let k=v%12+1;v/=12;let T=v;T/10==0&&h.append("0"),h.append(T),k/10==0&&h.append("0"),h.append(k),E/10==0&&h.append("0"),h.append(E)}addWeightCode(h,g){h.append("("),h.append(this.firstAIdigits),h.append(g/1e5),h.append(")")}checkWeight(h){return h%1e5}}dt.HEADER_SIZE=8,dt.WEIGHT_SIZE=20,dt.DATE_SIZE=16;function St(se){try{if(se.get(1))return new me(se);if(!se.get(2))return new Fe(se);switch(ye.extractNumericValueFromBitArray(se,1,4)){case 4:return new Ye(se);case 5:return new Ze(se)}switch(ye.extractNumericValueFromBitArray(se,1,5)){case 12:return new wt(se);case 13:return new At(se)}switch(ye.extractNumericValueFromBitArray(se,1,7)){case 56:return new dt(se,"310","11");case 57:return new dt(se,"320","11");case 58:return new dt(se,"310","13");case 59:return new dt(se,"320","13");case 60:return new dt(se,"310","15");case 61:return new dt(se,"320","15");case 62:return new dt(se,"310","17");case 63:return new dt(se,"320","17")}}catch(h){throw console.log(h),new ze("unknown decoder: "+se)}}class Ot{constructor(h,g,v,E){this.leftchar=h,this.rightchar=g,this.finderpattern=v,this.maybeLast=E}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(h,g){return h instanceof Ot?Ot.equalsOrNull(h.leftchar,g.leftchar)&&Ot.equalsOrNull(h.rightchar,g.rightchar)&&Ot.equalsOrNull(h.finderpattern,g.finderpattern):!1}static equalsOrNull(h,g){return h===null?g===null:Ot.equals(h,g)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Kt{constructor(h,g,v){this.pairs=h,this.rowNumber=g,this.wasReversed=v}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(h){return this.checkEqualitity(this,h)}toString(){return"{ "+this.pairs+" }"}equals(h,g){return h instanceof Kt?this.checkEqualitity(h,g)&&h.wasReversed===g.wasReversed:!1}checkEqualitity(h,g){if(!h||!g)return;let v;return h.forEach((E,k)=>{g.forEach(T=>{E.getLeftChar().getValue()===T.getLeftChar().getValue()&&E.getRightChar().getValue()===T.getRightChar().getValue()&&E.getFinderPatter().getValue()===T.getFinderPatter().getValue()&&(v=!0)})}),v}}class at extends rt{constructor(h){super(...arguments),this.pairs=new Array(at.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=h===!0}decodeRow(h,g,v){this.pairs.length=0,this.startFromEven=!1;try{return at.constructResult(this.decodeRow2pairs(h,g))}catch(E){this.verbose&&console.log(E)}return this.pairs.length=0,this.startFromEven=!0,at.constructResult(this.decodeRow2pairs(h,g))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(h,g){let v=!1;for(;!v;)try{this.pairs.push(this.retrieveNextPair(g,this.pairs,h))}catch(k){if(k instanceof W){if(!this.pairs.length)throw new W;v=!0}}if(this.checkChecksum())return this.pairs;let E;if(this.rows.length?E=!0:E=!1,this.storeRow(h,!1),E){let k=this.checkRowsBoolean(!1);if(k!=null||(k=this.checkRowsBoolean(!0),k!=null))return k}throw new W}checkRowsBoolean(h){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,h&&(this.rows=this.rows.reverse());let g=null;try{g=this.checkRows(new Array,0)}catch(v){this.verbose&&console.log(v)}return h&&(this.rows=this.rows.reverse()),g}checkRows(h,g){for(let v=g;v<this.rows.length;v++){let E=this.rows[v];this.pairs.length=0;for(let T of h)this.pairs.push(T.getPairs());if(this.pairs.push(E.getPairs()),!at.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let k=new Array(h);k.push(E);try{return this.checkRows(k,v+1)}catch(T){this.verbose&&console.log(T)}}throw new W}static isValidSequence(h){for(let g of at.FINDER_PATTERN_SEQUENCES){if(h.length>g.length)continue;let v=!0;for(let E=0;E<h.length;E++)if(h[E].getFinderPattern().getValue()!=g[E]){v=!1;break}if(v)return!0}return!1}storeRow(h,g){let v=0,E=!1,k=!1;for(;v<this.rows.length;){let T=this.rows[v];if(T.getRowNumber()>h){k=T.isEquivalent(this.pairs);break}E=T.isEquivalent(this.pairs),v++}k||E||at.isPartialRow(this.pairs,this.rows)||(this.rows.push(v,new Kt(this.pairs,h,g)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(h,g){for(let v of g)if(v.getPairs().length!==h.length){for(let E of v.getPairs())for(let k of h)if(Ot.equals(E,k))break}}static isPartialRow(h,g){for(let v of g){let E=!0;for(let k of h){let T=!1;for(let R of v.getPairs())if(k.equals(R)){T=!0;break}if(!T){E=!1;break}}if(E)return!0}return!1}getRows(){return this.rows}static constructResult(h){let g=tr.buildBitArray(h),E=St(g).parseInformation(),k=h[0].getFinderPattern().getResultPoints(),T=h[h.length-1].getFinderPattern().getResultPoints(),R=[k[0],k[1],T[0],T[1]];return new G(E,null,null,R,ne.RSS_EXPANDED,null)}checkChecksum(){let h=this.pairs.get(0),g=h.getLeftChar(),v=h.getRightChar();if(v==null)return!1;let E=v.getChecksumPortion(),k=2;for(let R=1;R<this.pairs.size();++R){let F=this.pairs.get(R);E+=F.getLeftChar().getChecksumPortion(),k++;let U=F.getRightChar();U!=null&&(E+=U.getChecksumPortion(),k++)}return E%=211,211*(k-4)+E==g.getValue()}static getNextSecondBar(h,g){let v;return h.get(g)?(v=h.getNextUnset(g),v=h.getNextSet(v)):(v=h.getNextSet(g),v=h.getNextUnset(v)),v}retrieveNextPair(h,g,v){let E=g.length%2==0;this.startFromEven&&(E=!E);let k,T=!0,R=-1;do this.findNextPair(h,g,R),k=this.parseFoundFinderPattern(h,v,E),k==null?R=at.getNextSecondBar(h,this.startEnd[0]):T=!1;while(T);let F=this.decodeDataCharacter(h,k,E,!0);if(!this.isEmptyPair(g)&&g[g.length-1].mustBeLast())throw new W;let U;try{U=this.decodeDataCharacter(h,k,E,!1)}catch(Z){U=null,this.verbose&&console.log(Z)}return new Ot(F,U,k,!0)}isEmptyPair(h){return h.length===0}findNextPair(h,g,v){let E=this.getDecodeFinderCounters();E[0]=0,E[1]=0,E[2]=0,E[3]=0;let k=h.getSize(),T;v>=0?T=v:this.isEmptyPair(g)?T=0:T=g[g.length-1].getFinderPattern().getStartEnd()[1];let R=g.length%2!=0;this.startFromEven&&(R=!R);let F=!1;for(;T<k&&(F=!h.get(T),!!F);)T++;let U=0,Z=T;for(let oe=T;oe<k;oe++)if(h.get(oe)!=F)E[U]++;else{if(U==3){if(R&&at.reverseCounters(E),at.isFinderPattern(E)){this.startEnd[0]=Z,this.startEnd[1]=oe;return}R&&at.reverseCounters(E),Z+=E[0]+E[1],E[0]=E[2],E[1]=E[3],E[2]=0,E[3]=0,U--}else U++;E[U]=1,F=!F}throw new W}static reverseCounters(h){let g=h.length;for(let v=0;v<g/2;++v){let E=h[v];h[v]=h[g-v-1],h[g-v-1]=E}}parseFoundFinderPattern(h,g,v){let E,k,T;if(v){let U=this.startEnd[0]-1;for(;U>=0&&!h.get(U);)U--;U++,E=this.startEnd[0]-U,k=U,T=this.startEnd[1]}else k=this.startEnd[0],T=h.getNextUnset(this.startEnd[1]+1),E=T-this.startEnd[1];let R=this.getDecodeFinderCounters();y.arraycopy(R,0,R,1,R.length-1),R[0]=E;let F;try{F=this.parseFinderValue(R,at.FINDER_PATTERNS)}catch{return null}return new Ut(F,[k,T],k,T,g)}decodeDataCharacter(h,g,v,E){let k=this.getDataCharacterCounters();for(let ti=0;ti<k.length;ti++)k[ti]=0;if(E)at.recordPatternInReverse(h,g.getStartEnd()[0],k);else{at.recordPattern(h,g.getStartEnd()[1],k);for(let ti=0,Mi=k.length-1;ti<Mi;ti++,Mi--){let is=k[ti];k[ti]=k[Mi],k[Mi]=is}}let T=17,R=ut.sum(new Int32Array(k))/T,F=(g.getStartEnd()[1]-g.getStartEnd()[0])/15;if(Math.abs(R-F)/F>.3)throw new W;let U=this.getOddCounts(),Z=this.getEvenCounts(),oe=this.getOddRoundingErrors(),xe=this.getEvenRoundingErrors();for(let ti=0;ti<k.length;ti++){let Mi=1*k[ti]/R,is=Mi+.5;if(is<1){if(Mi<.3)throw new W;is=1}else if(is>8){if(Mi>8.7)throw new W;is=8}let Ou=ti/2;ti&1?(Z[Ou]=is,xe[Ou]=Mi-is):(U[Ou]=is,oe[Ou]=Mi-is)}this.adjustOddEvenCounts(T);let Oe=4*g.getValue()+(v?0:2)+(E?0:1)-1,ce=0,be=0;for(let ti=U.length-1;ti>=0;ti--){if(at.isNotA1left(g,v,E)){let Mi=at.WEIGHTS[Oe][2*ti];be+=U[ti]*Mi}ce+=U[ti]}let Ne=0;for(let ti=Z.length-1;ti>=0;ti--)if(at.isNotA1left(g,v,E)){let Mi=at.WEIGHTS[Oe][2*ti+1];Ne+=Z[ti]*Mi}let Be=be+Ne;if(ce&1||ce>13||ce<4)throw new W;let lt=(13-ce)/2,gt=at.SYMBOL_WIDEST[lt],vt=9-gt,Zt=ir.getRSSvalue(U,gt,!0),Br=ir.getRSSvalue(Z,vt,!1),Xs=at.EVEN_TOTAL_SUBSET[lt],Di=at.GSUM[lt],Wa=Zt*Xs+Br+Di;return new _t(Wa,Be)}static isNotA1left(h,g,v){return!(h.getValue()==0&&g&&v)}adjustOddEvenCounts(h){let g=ut.sum(new Int32Array(this.getOddCounts())),v=ut.sum(new Int32Array(this.getEvenCounts())),E=!1,k=!1;g>13?k=!0:g<4&&(E=!0);let T=!1,R=!1;v>13?R=!0:v<4&&(T=!0);let F=g+v-h,U=(g&1)==1,Z=(v&1)==0;if(F==1)if(U){if(Z)throw new W;k=!0}else{if(!Z)throw new W;R=!0}else if(F==-1)if(U){if(Z)throw new W;E=!0}else{if(!Z)throw new W;T=!0}else if(F==0){if(U){if(!Z)throw new W;g<v?(E=!0,R=!0):(k=!0,T=!0)}else if(Z)throw new W}else throw new W;if(E){if(k)throw new W;at.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(k&&at.decrement(this.getOddCounts(),this.getOddRoundingErrors()),T){if(R)throw new W;at.increment(this.getEvenCounts(),this.getOddRoundingErrors())}R&&at.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}at.SYMBOL_WIDEST=[7,5,4,3,1],at.EVEN_TOTAL_SUBSET=[4,20,52,104,204],at.GSUM=[0,348,1388,2948,3988],at.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],at.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],at.FINDER_PAT_A=0,at.FINDER_PAT_B=1,at.FINDER_PAT_C=2,at.FINDER_PAT_D=3,at.FINDER_PAT_E=4,at.FINDER_PAT_F=5,at.FINDER_PATTERN_SEQUENCES=[[at.FINDER_PAT_A,at.FINDER_PAT_A],[at.FINDER_PAT_A,at.FINDER_PAT_B,at.FINDER_PAT_B],[at.FINDER_PAT_A,at.FINDER_PAT_C,at.FINDER_PAT_B,at.FINDER_PAT_D],[at.FINDER_PAT_A,at.FINDER_PAT_E,at.FINDER_PAT_B,at.FINDER_PAT_D,at.FINDER_PAT_C],[at.FINDER_PAT_A,at.FINDER_PAT_E,at.FINDER_PAT_B,at.FINDER_PAT_D,at.FINDER_PAT_D,at.FINDER_PAT_F],[at.FINDER_PAT_A,at.FINDER_PAT_E,at.FINDER_PAT_B,at.FINDER_PAT_D,at.FINDER_PAT_E,at.FINDER_PAT_F,at.FINDER_PAT_F],[at.FINDER_PAT_A,at.FINDER_PAT_A,at.FINDER_PAT_B,at.FINDER_PAT_B,at.FINDER_PAT_C,at.FINDER_PAT_C,at.FINDER_PAT_D,at.FINDER_PAT_D],[at.FINDER_PAT_A,at.FINDER_PAT_A,at.FINDER_PAT_B,at.FINDER_PAT_B,at.FINDER_PAT_C,at.FINDER_PAT_C,at.FINDER_PAT_D,at.FINDER_PAT_E,at.FINDER_PAT_E],[at.FINDER_PAT_A,at.FINDER_PAT_A,at.FINDER_PAT_B,at.FINDER_PAT_B,at.FINDER_PAT_C,at.FINDER_PAT_C,at.FINDER_PAT_D,at.FINDER_PAT_E,at.FINDER_PAT_F,at.FINDER_PAT_F],[at.FINDER_PAT_A,at.FINDER_PAT_A,at.FINDER_PAT_B,at.FINDER_PAT_B,at.FINDER_PAT_C,at.FINDER_PAT_D,at.FINDER_PAT_D,at.FINDER_PAT_E,at.FINDER_PAT_E,at.FINDER_PAT_F,at.FINDER_PAT_F]],at.MAX_PAIRS=11;class Xn extends _t{constructor(h,g,v){super(h,g),this.count=0,this.finderPattern=v}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Hr extends rt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(h,g,v){const E=this.decodePair(g,!1,h,v);Hr.addOrTally(this.possibleLeftPairs,E),g.reverse();let k=this.decodePair(g,!0,h,v);Hr.addOrTally(this.possibleRightPairs,k),g.reverse();for(let T of this.possibleLeftPairs)if(T.getCount()>1){for(let R of this.possibleRightPairs)if(R.getCount()>1&&Hr.checkChecksum(T,R))return Hr.constructResult(T,R)}throw new W}static addOrTally(h,g){if(g==null)return;let v=!1;for(let E of h)if(E.getValue()===g.getValue()){E.incrementCount(),v=!0;break}v||h.push(g)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(h,g){let v=4537077*h.getValue()+g.getValue(),E=new String(v).toString(),k=new ie;for(let U=13-E.length;U>0;U--)k.append("0");k.append(E);let T=0;for(let U=0;U<13;U++){let Z=k.charAt(U).charCodeAt(0)-48;T+=U&1?Z:3*Z}T=10-T%10,T===10&&(T=0),k.append(T.toString());let R=h.getFinderPattern().getResultPoints(),F=g.getFinderPattern().getResultPoints();return new G(k.toString(),null,0,[R[0],R[1],F[0],F[1]],ne.RSS_14,new Date().getTime())}static checkChecksum(h,g){let v=(h.getChecksumPortion()+16*g.getChecksumPortion())%79,E=9*h.getFinderPattern().getValue()+g.getFinderPattern().getValue();return E>72&&E--,E>8&&E--,v===E}decodePair(h,g,v,E){try{let k=this.findFinderPattern(h,g),T=this.parseFoundFinderPattern(h,v,g,k),R=E==null?null:E.get(P.NEED_RESULT_POINT_CALLBACK);if(R!=null){let Z=(k[0]+k[1])/2;g&&(Z=h.getSize()-1-Z),R.foundPossibleResultPoint(new ht(Z,v))}let F=this.decodeDataCharacter(h,T,!0),U=this.decodeDataCharacter(h,T,!1);return new Xn(1597*F.getValue()+U.getValue(),F.getChecksumPortion()+4*U.getChecksumPortion(),T)}catch{return null}}decodeDataCharacter(h,g,v){let E=this.getDataCharacterCounters();for(let Ne=0;Ne<E.length;Ne++)E[Ne]=0;if(v)je.recordPatternInReverse(h,g.getStartEnd()[0],E);else{je.recordPattern(h,g.getStartEnd()[1]+1,E);for(let Ne=0,Be=E.length-1;Ne<Be;Ne++,Be--){let lt=E[Ne];E[Ne]=E[Be],E[Be]=lt}}let k=v?16:15,T=ut.sum(new Int32Array(E))/k,R=this.getOddCounts(),F=this.getEvenCounts(),U=this.getOddRoundingErrors(),Z=this.getEvenRoundingErrors();for(let Ne=0;Ne<E.length;Ne++){let Be=E[Ne]/T,lt=Math.floor(Be+.5);lt<1?lt=1:lt>8&&(lt=8);let gt=Math.floor(Ne/2);Ne&1?(F[gt]=lt,Z[gt]=Be-lt):(R[gt]=lt,U[gt]=Be-lt)}this.adjustOddEvenCounts(v,k);let oe=0,xe=0;for(let Ne=R.length-1;Ne>=0;Ne--)xe*=9,xe+=R[Ne],oe+=R[Ne];let Oe=0,ce=0;for(let Ne=F.length-1;Ne>=0;Ne--)Oe*=9,Oe+=F[Ne],ce+=F[Ne];let be=xe+3*Oe;if(v){if(oe&1||oe>12||oe<4)throw new W;let Ne=(12-oe)/2,Be=Hr.OUTSIDE_ODD_WIDEST[Ne],lt=9-Be,gt=ir.getRSSvalue(R,Be,!1),vt=ir.getRSSvalue(F,lt,!0),Zt=Hr.OUTSIDE_EVEN_TOTAL_SUBSET[Ne],Br=Hr.OUTSIDE_GSUM[Ne];return new _t(gt*Zt+vt+Br,be)}else{if(ce&1||ce>10||ce<4)throw new W;let Ne=(10-ce)/2,Be=Hr.INSIDE_ODD_WIDEST[Ne],lt=9-Be,gt=ir.getRSSvalue(R,Be,!0),vt=ir.getRSSvalue(F,lt,!1),Zt=Hr.INSIDE_ODD_TOTAL_SUBSET[Ne],Br=Hr.INSIDE_GSUM[Ne];return new _t(vt*Zt+gt+Br,be)}}findFinderPattern(h,g){let v=this.getDecodeFinderCounters();v[0]=0,v[1]=0,v[2]=0,v[3]=0;let E=h.getSize(),k=!1,T=0;for(;T<E&&(k=!h.get(T),g!==k);)T++;let R=0,F=T;for(let U=T;U<E;U++)if(h.get(U)!==k)v[R]++;else{if(R===3){if(rt.isFinderPattern(v))return[F,U];F+=v[0]+v[1],v[0]=v[2],v[1]=v[3],v[2]=0,v[3]=0,R--}else R++;v[R]=1,k=!k}throw new W}parseFoundFinderPattern(h,g,v,E){let k=h.get(E[0]),T=E[0]-1;for(;T>=0&&k!==h.get(T);)T--;T++;const R=E[0]-T,F=this.getDecodeFinderCounters(),U=new Int32Array(F.length);y.arraycopy(F,0,U,1,F.length-1),U[0]=R;const Z=this.parseFinderValue(U,Hr.FINDER_PATTERNS);let oe=T,xe=E[1];return v&&(oe=h.getSize()-1-oe,xe=h.getSize()-1-xe),new Ut(Z,[T,E[1]],oe,xe,g)}adjustOddEvenCounts(h,g){let v=ut.sum(new Int32Array(this.getOddCounts())),E=ut.sum(new Int32Array(this.getEvenCounts())),k=!1,T=!1,R=!1,F=!1;h?(v>12?T=!0:v<4&&(k=!0),E>12?F=!0:E<4&&(R=!0)):(v>11?T=!0:v<5&&(k=!0),E>10?F=!0:E<4&&(R=!0));let U=v+E-g,Z=(v&1)===(h?1:0),oe=(E&1)===1;if(U===1)if(Z){if(oe)throw new W;T=!0}else{if(!oe)throw new W;F=!0}else if(U===-1)if(Z){if(oe)throw new W;k=!0}else{if(!oe)throw new W;R=!0}else if(U===0){if(Z){if(!oe)throw new W;v<E?(k=!0,F=!0):(T=!0,R=!0)}else if(oe)throw new W}else throw new W;if(k){if(T)throw new W;rt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(T&&rt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),R){if(F)throw new W;rt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}F&&rt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Hr.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Hr.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Hr.OUTSIDE_GSUM=[0,161,961,2015,2715],Hr.INSIDE_GSUM=[0,336,1036,1516],Hr.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Hr.INSIDE_ODD_WIDEST=[2,4,6,8],Hr.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class No extends je{constructor(h,g){super(),this.readers=[],this.verbose=g===!0;const v=h?h.get(P.POSSIBLE_FORMATS):null,E=h&&h.get(P.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;v?((v.includes(ne.EAN_13)||v.includes(ne.UPC_A)||v.includes(ne.EAN_8)||v.includes(ne.UPC_E))&&this.readers.push(new Je(h)),v.includes(ne.CODE_39)&&this.readers.push(new ot(E)),v.includes(ne.CODE_128)&&this.readers.push(new we),v.includes(ne.ITF)&&this.readers.push(new xt),v.includes(ne.RSS_14)&&this.readers.push(new Hr),v.includes(ne.RSS_EXPANDED)&&this.readers.push(new at(this.verbose))):(this.readers.push(new Je(h)),this.readers.push(new ot),this.readers.push(new Je(h)),this.readers.push(new we),this.readers.push(new xt),this.readers.push(new Hr),this.readers.push(new at(this.verbose)))}decodeRow(h,g,v){for(let E=0;E<this.readers.length;E++)try{return this.readers[E].decodeRow(h,g,v)}catch{}throw new W}reset(){this.readers.forEach(h=>h.reset())}}class kd extends de{constructor(h=500,g){super(new No(g),h,g)}}class yn{constructor(h,g,v){this.ecCodewords=h,this.ecBlocks=[g],v&&this.ecBlocks.push(v)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class rn{constructor(h,g){this.count=h,this.dataCodewords=g}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class nn{constructor(h,g,v,E,k,T){this.versionNumber=h,this.symbolSizeRows=g,this.symbolSizeColumns=v,this.dataRegionSizeRows=E,this.dataRegionSizeColumns=k,this.ecBlocks=T;let R=0;const F=T.getECCodewords(),U=T.getECBlocks();for(let Z of U)R+=Z.getCount()*(Z.getDataCodewords()+F);this.totalCodewords=R}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(h,g){if(h&1||g&1)throw new O;for(let v of nn.VERSIONS)if(v.symbolSizeRows===h&&v.symbolSizeColumns===g)return v;throw new O}toString(){return""+this.versionNumber}static buildVersions(){return[new nn(1,10,10,8,8,new yn(5,new rn(1,3))),new nn(2,12,12,10,10,new yn(7,new rn(1,5))),new nn(3,14,14,12,12,new yn(10,new rn(1,8))),new nn(4,16,16,14,14,new yn(12,new rn(1,12))),new nn(5,18,18,16,16,new yn(14,new rn(1,18))),new nn(6,20,20,18,18,new yn(18,new rn(1,22))),new nn(7,22,22,20,20,new yn(20,new rn(1,30))),new nn(8,24,24,22,22,new yn(24,new rn(1,36))),new nn(9,26,26,24,24,new yn(28,new rn(1,44))),new nn(10,32,32,14,14,new yn(36,new rn(1,62))),new nn(11,36,36,16,16,new yn(42,new rn(1,86))),new nn(12,40,40,18,18,new yn(48,new rn(1,114))),new nn(13,44,44,20,20,new yn(56,new rn(1,144))),new nn(14,48,48,22,22,new yn(68,new rn(1,174))),new nn(15,52,52,24,24,new yn(42,new rn(2,102))),new nn(16,64,64,14,14,new yn(56,new rn(2,140))),new nn(17,72,72,16,16,new yn(36,new rn(4,92))),new nn(18,80,80,18,18,new yn(48,new rn(4,114))),new nn(19,88,88,20,20,new yn(56,new rn(4,144))),new nn(20,96,96,22,22,new yn(68,new rn(4,174))),new nn(21,104,104,24,24,new yn(56,new rn(6,136))),new nn(22,120,120,18,18,new yn(68,new rn(6,175))),new nn(23,132,132,20,20,new yn(62,new rn(8,163))),new nn(24,144,144,22,22,new yn(62,new rn(8,156),new rn(2,155))),new nn(25,8,18,6,16,new yn(7,new rn(1,5))),new nn(26,8,32,6,14,new yn(11,new rn(1,10))),new nn(27,12,26,10,24,new yn(14,new rn(1,16))),new nn(28,12,36,10,16,new yn(18,new rn(1,22))),new nn(29,16,36,14,16,new yn(24,new rn(1,32))),new nn(30,16,48,14,22,new yn(28,new rn(1,49)))]}}nn.VERSIONS=nn.buildVersions();class Ao{constructor(h){const g=h.getHeight();if(g<8||g>144||g&1)throw new O;this.version=Ao.readVersion(h),this.mappingBitMatrix=this.extractDataRegion(h),this.readMappingMatrix=new X(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(h){const g=h.getHeight(),v=h.getWidth();return nn.getVersionForDimensions(g,v)}readCodewords(){const h=new Int8Array(this.version.getTotalCodewords());let g=0,v=4,E=0;const k=this.mappingBitMatrix.getHeight(),T=this.mappingBitMatrix.getWidth();let R=!1,F=!1,U=!1,Z=!1;do if(v===k&&E===0&&!R)h[g++]=this.readCorner1(k,T)&255,v-=2,E+=2,R=!0;else if(v===k-2&&E===0&&T&3&&!F)h[g++]=this.readCorner2(k,T)&255,v-=2,E+=2,F=!0;else if(v===k+4&&E===2&&!(T&7)&&!U)h[g++]=this.readCorner3(k,T)&255,v-=2,E+=2,U=!0;else if(v===k-2&&E===0&&(T&7)===4&&!Z)h[g++]=this.readCorner4(k,T)&255,v-=2,E+=2,Z=!0;else{do v<k&&E>=0&&!this.readMappingMatrix.get(E,v)&&(h[g++]=this.readUtah(v,E,k,T)&255),v-=2,E+=2;while(v>=0&&E<T);v+=1,E+=3;do v>=0&&E<T&&!this.readMappingMatrix.get(E,v)&&(h[g++]=this.readUtah(v,E,k,T)&255),v+=2,E-=2;while(v<k&&E>=0);v+=3,E+=1}while(v<k||E<T);if(g!==this.version.getTotalCodewords())throw new O;return h}readModule(h,g,v,E){return h<0&&(h+=v,g+=4-(v+4&7)),g<0&&(g+=E,h+=4-(E+4&7)),this.readMappingMatrix.set(g,h),this.mappingBitMatrix.get(g,h)}readUtah(h,g,v,E){let k=0;return this.readModule(h-2,g-2,v,E)&&(k|=1),k<<=1,this.readModule(h-2,g-1,v,E)&&(k|=1),k<<=1,this.readModule(h-1,g-2,v,E)&&(k|=1),k<<=1,this.readModule(h-1,g-1,v,E)&&(k|=1),k<<=1,this.readModule(h-1,g,v,E)&&(k|=1),k<<=1,this.readModule(h,g-2,v,E)&&(k|=1),k<<=1,this.readModule(h,g-1,v,E)&&(k|=1),k<<=1,this.readModule(h,g,v,E)&&(k|=1),k}readCorner1(h,g){let v=0;return this.readModule(h-1,0,h,g)&&(v|=1),v<<=1,this.readModule(h-1,1,h,g)&&(v|=1),v<<=1,this.readModule(h-1,2,h,g)&&(v|=1),v<<=1,this.readModule(0,g-2,h,g)&&(v|=1),v<<=1,this.readModule(0,g-1,h,g)&&(v|=1),v<<=1,this.readModule(1,g-1,h,g)&&(v|=1),v<<=1,this.readModule(2,g-1,h,g)&&(v|=1),v<<=1,this.readModule(3,g-1,h,g)&&(v|=1),v}readCorner2(h,g){let v=0;return this.readModule(h-3,0,h,g)&&(v|=1),v<<=1,this.readModule(h-2,0,h,g)&&(v|=1),v<<=1,this.readModule(h-1,0,h,g)&&(v|=1),v<<=1,this.readModule(0,g-4,h,g)&&(v|=1),v<<=1,this.readModule(0,g-3,h,g)&&(v|=1),v<<=1,this.readModule(0,g-2,h,g)&&(v|=1),v<<=1,this.readModule(0,g-1,h,g)&&(v|=1),v<<=1,this.readModule(1,g-1,h,g)&&(v|=1),v}readCorner3(h,g){let v=0;return this.readModule(h-1,0,h,g)&&(v|=1),v<<=1,this.readModule(h-1,g-1,h,g)&&(v|=1),v<<=1,this.readModule(0,g-3,h,g)&&(v|=1),v<<=1,this.readModule(0,g-2,h,g)&&(v|=1),v<<=1,this.readModule(0,g-1,h,g)&&(v|=1),v<<=1,this.readModule(1,g-3,h,g)&&(v|=1),v<<=1,this.readModule(1,g-2,h,g)&&(v|=1),v<<=1,this.readModule(1,g-1,h,g)&&(v|=1),v}readCorner4(h,g){let v=0;return this.readModule(h-3,0,h,g)&&(v|=1),v<<=1,this.readModule(h-2,0,h,g)&&(v|=1),v<<=1,this.readModule(h-1,0,h,g)&&(v|=1),v<<=1,this.readModule(0,g-2,h,g)&&(v|=1),v<<=1,this.readModule(0,g-1,h,g)&&(v|=1),v<<=1,this.readModule(1,g-1,h,g)&&(v|=1),v<<=1,this.readModule(2,g-1,h,g)&&(v|=1),v<<=1,this.readModule(3,g-1,h,g)&&(v|=1),v}extractDataRegion(h){const g=this.version.getSymbolSizeRows(),v=this.version.getSymbolSizeColumns();if(h.getHeight()!==g)throw new f("Dimension of bitMatrix must match the version size");const E=this.version.getDataRegionSizeRows(),k=this.version.getDataRegionSizeColumns(),T=g/E|0,R=v/k|0,F=T*E,U=R*k,Z=new X(U,F);for(let oe=0;oe<T;++oe){const xe=oe*E;for(let Oe=0;Oe<R;++Oe){const ce=Oe*k;for(let be=0;be<E;++be){const Ne=oe*(E+2)+1+be,Be=xe+be;for(let lt=0;lt<k;++lt){const gt=Oe*(k+2)+1+lt;if(h.get(gt,Ne)){const vt=ce+lt;Z.set(vt,Be)}}}}}return Z}}class m1{constructor(h,g){this.numDataCodewords=h,this.codewords=g}static getDataBlocks(h,g){const v=g.getECBlocks();let E=0;const k=v.getECBlocks();for(let be of k)E+=be.getCount();const T=new Array(E);let R=0;for(let be of k)for(let Ne=0;Ne<be.getCount();Ne++){const Be=be.getDataCodewords(),lt=v.getECCodewords()+Be;T[R++]=new m1(Be,new Uint8Array(lt))}const U=T[0].codewords.length-v.getECCodewords(),Z=U-1;let oe=0;for(let be=0;be<Z;be++)for(let Ne=0;Ne<R;Ne++)T[Ne].codewords[be]=h[oe++];const xe=g.getVersionNumber()===24,Oe=xe?8:R;for(let be=0;be<Oe;be++)T[be].codewords[U-1]=h[oe++];const ce=T[0].codewords.length;for(let be=U;be<ce;be++)for(let Ne=0;Ne<R;Ne++){const Be=xe?(Ne+8)%R:Ne,lt=xe&&Be>7?be-1:be;T[Be].codewords[lt]=h[oe++]}if(oe!==h.length)throw new f;return T}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class g1{constructor(h){this.bytes=h,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(h){if(h<1||h>32||h>this.available())throw new f(""+h);let g=0,v=this.bitOffset,E=this.byteOffset;const k=this.bytes;if(v>0){const T=8-v,R=h<T?h:T,F=T-R,U=255>>8-R<<F;g=(k[E]&U)>>F,h-=R,v+=R,v===8&&(v=0,E++)}if(h>0){for(;h>=8;)g=g<<8|k[E]&255,E++,h-=8;if(h>0){const T=8-h,R=255>>T<<T;g=g<<h|(k[E]&R)>>T,v+=h}}return this.bitOffset=v,this.byteOffset=E,g}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Ji;(function(se){se[se.PAD_ENCODE=0]="PAD_ENCODE",se[se.ASCII_ENCODE=1]="ASCII_ENCODE",se[se.C40_ENCODE=2]="C40_ENCODE",se[se.TEXT_ENCODE=3]="TEXT_ENCODE",se[se.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",se[se.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",se[se.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ji||(Ji={}));class kc{static decode(h){const g=new g1(h),v=new ie,E=new ie,k=new Array;let T=Ji.ASCII_ENCODE;do if(T===Ji.ASCII_ENCODE)T=this.decodeAsciiSegment(g,v,E);else{switch(T){case Ji.C40_ENCODE:this.decodeC40Segment(g,v);break;case Ji.TEXT_ENCODE:this.decodeTextSegment(g,v);break;case Ji.ANSIX12_ENCODE:this.decodeAnsiX12Segment(g,v);break;case Ji.EDIFACT_ENCODE:this.decodeEdifactSegment(g,v);break;case Ji.BASE256_ENCODE:this.decodeBase256Segment(g,v,k);break;default:throw new O}T=Ji.ASCII_ENCODE}while(T!==Ji.PAD_ENCODE&&g.available()>0);return E.length()>0&&v.append(E.toString()),new ae(h,v.toString(),k.length===0?null:k,null)}static decodeAsciiSegment(h,g,v){let E=!1;do{let k=h.readBits(8);if(k===0)throw new O;if(k<=128)return E&&(k+=128),g.append(String.fromCharCode(k-1)),Ji.ASCII_ENCODE;if(k===129)return Ji.PAD_ENCODE;if(k<=229){const T=k-130;T<10&&g.append("0"),g.append(""+T)}else switch(k){case 230:return Ji.C40_ENCODE;case 231:return Ji.BASE256_ENCODE;case 232:g.append("");break;case 233:case 234:break;case 235:E=!0;break;case 236:g.append("[)>05"),v.insert(0,"");break;case 237:g.append("[)>06"),v.insert(0,"");break;case 238:return Ji.ANSIX12_ENCODE;case 239:return Ji.TEXT_ENCODE;case 240:return Ji.EDIFACT_ENCODE;case 241:break;default:if(k!==254||h.available()!==0)throw new O;break}}while(h.available()>0);return Ji.ASCII_ENCODE}static decodeC40Segment(h,g){let v=!1;const E=[];let k=0;do{if(h.available()===8)return;const T=h.readBits(8);if(T===254)return;this.parseTwoBytes(T,h.readBits(8),E);for(let R=0;R<3;R++){const F=E[R];switch(k){case 0:if(F<3)k=F+1;else if(F<this.C40_BASIC_SET_CHARS.length){const U=this.C40_BASIC_SET_CHARS[F];v?(g.append(String.fromCharCode(U.charCodeAt(0)+128)),v=!1):g.append(U)}else throw new O;break;case 1:v?(g.append(String.fromCharCode(F+128)),v=!1):g.append(String.fromCharCode(F)),k=0;break;case 2:if(F<this.C40_SHIFT2_SET_CHARS.length){const U=this.C40_SHIFT2_SET_CHARS[F];v?(g.append(String.fromCharCode(U.charCodeAt(0)+128)),v=!1):g.append(U)}else switch(F){case 27:g.append("");break;case 30:v=!0;break;default:throw new O}k=0;break;case 3:v?(g.append(String.fromCharCode(F+224)),v=!1):g.append(String.fromCharCode(F+96)),k=0;break;default:throw new O}}}while(h.available()>0)}static decodeTextSegment(h,g){let v=!1,E=[],k=0;do{if(h.available()===8)return;const T=h.readBits(8);if(T===254)return;this.parseTwoBytes(T,h.readBits(8),E);for(let R=0;R<3;R++){const F=E[R];switch(k){case 0:if(F<3)k=F+1;else if(F<this.TEXT_BASIC_SET_CHARS.length){const U=this.TEXT_BASIC_SET_CHARS[F];v?(g.append(String.fromCharCode(U.charCodeAt(0)+128)),v=!1):g.append(U)}else throw new O;break;case 1:v?(g.append(String.fromCharCode(F+128)),v=!1):g.append(String.fromCharCode(F)),k=0;break;case 2:if(F<this.TEXT_SHIFT2_SET_CHARS.length){const U=this.TEXT_SHIFT2_SET_CHARS[F];v?(g.append(String.fromCharCode(U.charCodeAt(0)+128)),v=!1):g.append(U)}else switch(F){case 27:g.append("");break;case 30:v=!0;break;default:throw new O}k=0;break;case 3:if(F<this.TEXT_SHIFT3_SET_CHARS.length){const U=this.TEXT_SHIFT3_SET_CHARS[F];v?(g.append(String.fromCharCode(U.charCodeAt(0)+128)),v=!1):g.append(U),k=0}else throw new O;break;default:throw new O}}}while(h.available()>0)}static decodeAnsiX12Segment(h,g){const v=[];do{if(h.available()===8)return;const E=h.readBits(8);if(E===254)return;this.parseTwoBytes(E,h.readBits(8),v);for(let k=0;k<3;k++){const T=v[k];switch(T){case 0:g.append("\r");break;case 1:g.append("*");break;case 2:g.append(">");break;case 3:g.append(" ");break;default:if(T<14)g.append(String.fromCharCode(T+44));else if(T<40)g.append(String.fromCharCode(T+51));else throw new O;break}}}while(h.available()>0)}static parseTwoBytes(h,g,v){let E=(h<<8)+g-1,k=Math.floor(E/1600);v[0]=k,E-=k*1600,k=Math.floor(E/40),v[1]=k,v[2]=E-k*40}static decodeEdifactSegment(h,g){do{if(h.available()<=16)return;for(let v=0;v<4;v++){let E=h.readBits(6);if(E===31){const k=8-h.getBitOffset();k!==8&&h.readBits(k);return}E&32||(E|=64),g.append(String.fromCharCode(E))}}while(h.available()>0)}static decodeBase256Segment(h,g,v){let E=1+h.getByteOffset();const k=this.unrandomize255State(h.readBits(8),E++);let T;if(k===0?T=h.available()/8|0:k<250?T=k:T=250*(k-249)+this.unrandomize255State(h.readBits(8),E++),T<0)throw new O;const R=new Uint8Array(T);for(let F=0;F<T;F++){if(h.available()<8)throw new O;R[F]=this.unrandomize255State(h.readBits(8),E++)}v.push(R);try{g.append(H.decode(R,z.ISO88591))}catch(F){throw new ze("Platform does not support required encoding: "+F.message)}}static unrandomize255State(h,g){const v=149*g%255+1,E=h-v;return E>=0?E:E+256}}kc.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],kc.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],kc.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],kc.TEXT_SHIFT2_SET_CHARS=kc.C40_SHIFT2_SET_CHARS,kc.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class $P{constructor(){this.rsDecoder=new De(Ae.DATA_MATRIX_FIELD_256)}decode(h){const g=new Ao(h),v=g.getVersion(),E=g.readCodewords(),k=m1.getDataBlocks(E,v);let T=0;for(let U of k)T+=U.getNumDataCodewords();const R=new Uint8Array(T),F=k.length;for(let U=0;U<F;U++){const Z=k[U],oe=Z.getCodewords(),xe=Z.getNumDataCodewords();this.correctErrors(oe,xe);for(let Oe=0;Oe<xe;Oe++)R[Oe*F+U]=oe[Oe]}return kc.decode(R)}correctErrors(h,g){const v=new Int32Array(h);try{this.rsDecoder.decode(v,h.length-g)}catch{throw new m}for(let E=0;E<g;E++)h[E]=v[E]}}class Ri{constructor(h){this.image=h,this.rectangleDetector=new ct(this.image)}detect(){const h=this.rectangleDetector.detect();let g=this.detectSolid1(h);if(g=this.detectSolid2(g),g[3]=this.correctTopRight(g),!g[3])throw new W;g=this.shiftToModuleCenter(g);const v=g[0],E=g[1],k=g[2],T=g[3];let R=this.transitionsBetween(v,T)+1,F=this.transitionsBetween(k,T)+1;(R&1)===1&&(R+=1),(F&1)===1&&(F+=1),4*R<7*F&&4*F<7*R&&(R=F=Math.max(R,F));let U=Ri.sampleGrid(this.image,v,E,k,T,R,F);return new jr(U,[v,E,k,T])}static shiftPoint(h,g,v){let E=(g.getX()-h.getX())/(v+1),k=(g.getY()-h.getY())/(v+1);return new ht(h.getX()+E,h.getY()+k)}static moveAway(h,g,v){let E=h.getX(),k=h.getY();return E<g?E-=1:E+=1,k<v?k-=1:k+=1,new ht(E,k)}detectSolid1(h){let g=h[0],v=h[1],E=h[3],k=h[2],T=this.transitionsBetween(g,v),R=this.transitionsBetween(v,E),F=this.transitionsBetween(E,k),U=this.transitionsBetween(k,g),Z=T,oe=[k,g,v,E];return Z>R&&(Z=R,oe[0]=g,oe[1]=v,oe[2]=E,oe[3]=k),Z>F&&(Z=F,oe[0]=v,oe[1]=E,oe[2]=k,oe[3]=g),Z>U&&(oe[0]=E,oe[1]=k,oe[2]=g,oe[3]=v),oe}detectSolid2(h){let g=h[0],v=h[1],E=h[2],k=h[3],T=this.transitionsBetween(g,k),R=Ri.shiftPoint(v,E,(T+1)*4),F=Ri.shiftPoint(E,v,(T+1)*4),U=this.transitionsBetween(R,g),Z=this.transitionsBetween(F,k);return U<Z?(h[0]=g,h[1]=v,h[2]=E,h[3]=k):(h[0]=v,h[1]=E,h[2]=k,h[3]=g),h}correctTopRight(h){let g=h[0],v=h[1],E=h[2],k=h[3],T=this.transitionsBetween(g,k),R=this.transitionsBetween(v,k),F=Ri.shiftPoint(g,v,(R+1)*4),U=Ri.shiftPoint(E,v,(T+1)*4);T=this.transitionsBetween(F,k),R=this.transitionsBetween(U,k);let Z=new ht(k.getX()+(E.getX()-v.getX())/(T+1),k.getY()+(E.getY()-v.getY())/(T+1)),oe=new ht(k.getX()+(g.getX()-v.getX())/(R+1),k.getY()+(g.getY()-v.getY())/(R+1));if(!this.isValid(Z))return this.isValid(oe)?oe:null;if(!this.isValid(oe))return Z;let xe=this.transitionsBetween(F,Z)+this.transitionsBetween(U,Z),Oe=this.transitionsBetween(F,oe)+this.transitionsBetween(U,oe);return xe>Oe?Z:oe}shiftToModuleCenter(h){let g=h[0],v=h[1],E=h[2],k=h[3],T=this.transitionsBetween(g,k)+1,R=this.transitionsBetween(E,k)+1,F=Ri.shiftPoint(g,v,R*4),U=Ri.shiftPoint(E,v,T*4);T=this.transitionsBetween(F,k)+1,R=this.transitionsBetween(U,k)+1,(T&1)===1&&(T+=1),(R&1)===1&&(R+=1);let Z=(g.getX()+v.getX()+E.getX()+k.getX())/4,oe=(g.getY()+v.getY()+E.getY()+k.getY())/4;g=Ri.moveAway(g,Z,oe),v=Ri.moveAway(v,Z,oe),E=Ri.moveAway(E,Z,oe),k=Ri.moveAway(k,Z,oe);let xe,Oe;return F=Ri.shiftPoint(g,v,R*4),F=Ri.shiftPoint(F,k,T*4),xe=Ri.shiftPoint(v,g,R*4),xe=Ri.shiftPoint(xe,E,T*4),U=Ri.shiftPoint(E,k,R*4),U=Ri.shiftPoint(U,v,T*4),Oe=Ri.shiftPoint(k,E,R*4),Oe=Ri.shiftPoint(Oe,g,T*4),[F,xe,U,Oe]}isValid(h){return h.getX()>=0&&h.getX()<this.image.getWidth()&&h.getY()>0&&h.getY()<this.image.getHeight()}static sampleGrid(h,g,v,E,k,T,R){return Gt.getInstance().sampleGrid(h,T,R,.5,.5,T-.5,.5,T-.5,R-.5,.5,R-.5,g.getX(),g.getY(),k.getX(),k.getY(),E.getX(),E.getY(),v.getX(),v.getY())}transitionsBetween(h,g){let v=Math.trunc(h.getX()),E=Math.trunc(h.getY()),k=Math.trunc(g.getX()),T=Math.trunc(g.getY()),R=Math.abs(T-E)>Math.abs(k-v);if(R){let be=v;v=E,E=be,be=k,k=T,T=be}let F=Math.abs(k-v),U=Math.abs(T-E),Z=-F/2,oe=E<T?1:-1,xe=v<k?1:-1,Oe=0,ce=this.image.get(R?E:v,R?v:E);for(let be=v,Ne=E;be!==k;be+=xe){let Be=this.image.get(R?Ne:be,R?be:Ne);if(Be!==ce&&(Oe++,ce=Be),Z+=U,Z>0){if(Ne===T)break;Ne+=oe,Z-=F}}return Oe}}class Ul{constructor(){this.decoder=new $P}decode(h,g=null){let v,E;if(g!=null&&g.has(P.PURE_BARCODE)){const U=Ul.extractPureBits(h.getBlackMatrix());v=this.decoder.decode(U),E=Ul.NO_POINTS}else{const U=new Ri(h.getBlackMatrix()).detect();v=this.decoder.decode(U.getBits()),E=U.getPoints()}const k=v.getRawBytes(),T=new G(v.getText(),k,8*k.length,E,ne.DATA_MATRIX,y.currentTimeMillis()),R=v.getByteSegments();R!=null&&T.putMetadata(re.BYTE_SEGMENTS,R);const F=v.getECLevel();return F!=null&&T.putMetadata(re.ERROR_CORRECTION_LEVEL,F),T}reset(){}static extractPureBits(h){const g=h.getTopLeftOnBit(),v=h.getBottomRightOnBit();if(g==null||v==null)throw new W;const E=this.moduleSize(g,h);let k=g[1];const T=v[1];let R=g[0];const U=(v[0]-R+1)/E,Z=(T-k+1)/E;if(U<=0||Z<=0)throw new W;const oe=E/2;k+=oe,R+=oe;const xe=new X(U,Z);for(let Oe=0;Oe<Z;Oe++){const ce=k+Oe*E;for(let be=0;be<U;be++)h.get(R+be*E,ce)&&xe.set(be,Oe)}return xe}static moduleSize(h,g){const v=g.getWidth();let E=h[0];const k=h[1];for(;E<v&&g.get(E,k);)E++;if(E===v)throw new W;const T=E-h[0];if(T===0)throw new W;return T}}Ul.NO_POINTS=[];class nk extends de{constructor(h=500){super(new Ul,h)}}var xp;(function(se){se[se.L=0]="L",se[se.M=1]="M",se[se.Q=2]="Q",se[se.H=3]="H"})(xp||(xp={}));class Zn{constructor(h,g,v){this.value=h,this.stringValue=g,this.bits=v,Zn.FOR_BITS.set(v,this),Zn.FOR_VALUE.set(h,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(h){switch(h){case"L":return Zn.L;case"M":return Zn.M;case"Q":return Zn.Q;case"H":return Zn.H;default:throw new d(h+"not available")}}toString(){return this.stringValue}equals(h){if(!(h instanceof Zn))return!1;const g=h;return this.value===g.value}static forBits(h){if(h<0||h>=Zn.FOR_BITS.size)throw new f;return Zn.FOR_BITS.get(h)}}Zn.FOR_BITS=new Map,Zn.FOR_VALUE=new Map,Zn.L=new Zn(xp.L,"L",1),Zn.M=new Zn(xp.M,"M",0),Zn.Q=new Zn(xp.Q,"Q",3),Zn.H=new Zn(xp.H,"H",2);class za{constructor(h){this.errorCorrectionLevel=Zn.forBits(h>>3&3),this.dataMask=h&7}static numBitsDiffering(h,g){return C.bitCount(h^g)}static decodeFormatInformation(h,g){const v=za.doDecodeFormatInformation(h,g);return v!==null?v:za.doDecodeFormatInformation(h^za.FORMAT_INFO_MASK_QR,g^za.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(h,g){let v=Number.MAX_SAFE_INTEGER,E=0;for(const k of za.FORMAT_INFO_DECODE_LOOKUP){const T=k[0];if(T===h||T===g)return new za(k[1]);let R=za.numBitsDiffering(h,T);R<v&&(E=k[1],v=R),h!==g&&(R=za.numBitsDiffering(g,T),R<v&&(E=k[1],v=R))}return v<=3?new za(E):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(h){if(!(h instanceof za))return!1;const g=h;return this.errorCorrectionLevel===g.errorCorrectionLevel&&this.dataMask===g.dataMask}}za.FORMAT_INFO_MASK_QR=21522,za.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Qe{constructor(h,...g){this.ecCodewordsPerBlock=h,this.ecBlocks=g}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let h=0;const g=this.ecBlocks;for(const v of g)h+=v.getCount();return h}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Ie{constructor(h,g){this.count=h,this.dataCodewords=g}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ar{constructor(h,g,...v){this.versionNumber=h,this.alignmentPatternCenters=g,this.ecBlocks=v;let E=0;const k=v[0].getECCodewordsPerBlock(),T=v[0].getECBlocks();for(const R of T)E+=R.getCount()*(R.getDataCodewords()+k);this.totalCodewords=E}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(h){return this.ecBlocks[h.getValue()]}static getProvisionalVersionForDimension(h){if(h%4!==1)throw new O;try{return this.getVersionForNumber((h-17)/4)}catch{throw new O}}static getVersionForNumber(h){if(h<1||h>40)throw new f;return ar.VERSIONS[h-1]}static decodeVersionInformation(h){let g=Number.MAX_SAFE_INTEGER,v=0;for(let E=0;E<ar.VERSION_DECODE_INFO.length;E++){const k=ar.VERSION_DECODE_INFO[E];if(k===h)return ar.getVersionForNumber(E+7);const T=za.numBitsDiffering(h,k);T<g&&(v=E+7,g=T)}return g<=3?ar.getVersionForNumber(v):null}buildFunctionPattern(){const h=this.getDimensionForVersion(),g=new X(h);g.setRegion(0,0,9,9),g.setRegion(h-8,0,8,9),g.setRegion(0,h-8,9,8);const v=this.alignmentPatternCenters.length;for(let E=0;E<v;E++){const k=this.alignmentPatternCenters[E]-2;for(let T=0;T<v;T++)E===0&&(T===0||T===v-1)||E===v-1&&T===0||g.setRegion(this.alignmentPatternCenters[T]-2,k,5,5)}return g.setRegion(6,9,1,h-17),g.setRegion(9,6,h-17,1),this.versionNumber>6&&(g.setRegion(h-11,0,3,6),g.setRegion(0,h-11,6,3)),g}toString(){return""+this.versionNumber}}ar.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ar.VERSIONS=[new ar(1,new Int32Array(0),new Qe(7,new Ie(1,19)),new Qe(10,new Ie(1,16)),new Qe(13,new Ie(1,13)),new Qe(17,new Ie(1,9))),new ar(2,Int32Array.from([6,18]),new Qe(10,new Ie(1,34)),new Qe(16,new Ie(1,28)),new Qe(22,new Ie(1,22)),new Qe(28,new Ie(1,16))),new ar(3,Int32Array.from([6,22]),new Qe(15,new Ie(1,55)),new Qe(26,new Ie(1,44)),new Qe(18,new Ie(2,17)),new Qe(22,new Ie(2,13))),new ar(4,Int32Array.from([6,26]),new Qe(20,new Ie(1,80)),new Qe(18,new Ie(2,32)),new Qe(26,new Ie(2,24)),new Qe(16,new Ie(4,9))),new ar(5,Int32Array.from([6,30]),new Qe(26,new Ie(1,108)),new Qe(24,new Ie(2,43)),new Qe(18,new Ie(2,15),new Ie(2,16)),new Qe(22,new Ie(2,11),new Ie(2,12))),new ar(6,Int32Array.from([6,34]),new Qe(18,new Ie(2,68)),new Qe(16,new Ie(4,27)),new Qe(24,new Ie(4,19)),new Qe(28,new Ie(4,15))),new ar(7,Int32Array.from([6,22,38]),new Qe(20,new Ie(2,78)),new Qe(18,new Ie(4,31)),new Qe(18,new Ie(2,14),new Ie(4,15)),new Qe(26,new Ie(4,13),new Ie(1,14))),new ar(8,Int32Array.from([6,24,42]),new Qe(24,new Ie(2,97)),new Qe(22,new Ie(2,38),new Ie(2,39)),new Qe(22,new Ie(4,18),new Ie(2,19)),new Qe(26,new Ie(4,14),new Ie(2,15))),new ar(9,Int32Array.from([6,26,46]),new Qe(30,new Ie(2,116)),new Qe(22,new Ie(3,36),new Ie(2,37)),new Qe(20,new Ie(4,16),new Ie(4,17)),new Qe(24,new Ie(4,12),new Ie(4,13))),new ar(10,Int32Array.from([6,28,50]),new Qe(18,new Ie(2,68),new Ie(2,69)),new Qe(26,new Ie(4,43),new Ie(1,44)),new Qe(24,new Ie(6,19),new Ie(2,20)),new Qe(28,new Ie(6,15),new Ie(2,16))),new ar(11,Int32Array.from([6,30,54]),new Qe(20,new Ie(4,81)),new Qe(30,new Ie(1,50),new Ie(4,51)),new Qe(28,new Ie(4,22),new Ie(4,23)),new Qe(24,new Ie(3,12),new Ie(8,13))),new ar(12,Int32Array.from([6,32,58]),new Qe(24,new Ie(2,92),new Ie(2,93)),new Qe(22,new Ie(6,36),new Ie(2,37)),new Qe(26,new Ie(4,20),new Ie(6,21)),new Qe(28,new Ie(7,14),new Ie(4,15))),new ar(13,Int32Array.from([6,34,62]),new Qe(26,new Ie(4,107)),new Qe(22,new Ie(8,37),new Ie(1,38)),new Qe(24,new Ie(8,20),new Ie(4,21)),new Qe(22,new Ie(12,11),new Ie(4,12))),new ar(14,Int32Array.from([6,26,46,66]),new Qe(30,new Ie(3,115),new Ie(1,116)),new Qe(24,new Ie(4,40),new Ie(5,41)),new Qe(20,new Ie(11,16),new Ie(5,17)),new Qe(24,new Ie(11,12),new Ie(5,13))),new ar(15,Int32Array.from([6,26,48,70]),new Qe(22,new Ie(5,87),new Ie(1,88)),new Qe(24,new Ie(5,41),new Ie(5,42)),new Qe(30,new Ie(5,24),new Ie(7,25)),new Qe(24,new Ie(11,12),new Ie(7,13))),new ar(16,Int32Array.from([6,26,50,74]),new Qe(24,new Ie(5,98),new Ie(1,99)),new Qe(28,new Ie(7,45),new Ie(3,46)),new Qe(24,new Ie(15,19),new Ie(2,20)),new Qe(30,new Ie(3,15),new Ie(13,16))),new ar(17,Int32Array.from([6,30,54,78]),new Qe(28,new Ie(1,107),new Ie(5,108)),new Qe(28,new Ie(10,46),new Ie(1,47)),new Qe(28,new Ie(1,22),new Ie(15,23)),new Qe(28,new Ie(2,14),new Ie(17,15))),new ar(18,Int32Array.from([6,30,56,82]),new Qe(30,new Ie(5,120),new Ie(1,121)),new Qe(26,new Ie(9,43),new Ie(4,44)),new Qe(28,new Ie(17,22),new Ie(1,23)),new Qe(28,new Ie(2,14),new Ie(19,15))),new ar(19,Int32Array.from([6,30,58,86]),new Qe(28,new Ie(3,113),new Ie(4,114)),new Qe(26,new Ie(3,44),new Ie(11,45)),new Qe(26,new Ie(17,21),new Ie(4,22)),new Qe(26,new Ie(9,13),new Ie(16,14))),new ar(20,Int32Array.from([6,34,62,90]),new Qe(28,new Ie(3,107),new Ie(5,108)),new Qe(26,new Ie(3,41),new Ie(13,42)),new Qe(30,new Ie(15,24),new Ie(5,25)),new Qe(28,new Ie(15,15),new Ie(10,16))),new ar(21,Int32Array.from([6,28,50,72,94]),new Qe(28,new Ie(4,116),new Ie(4,117)),new Qe(26,new Ie(17,42)),new Qe(28,new Ie(17,22),new Ie(6,23)),new Qe(30,new Ie(19,16),new Ie(6,17))),new ar(22,Int32Array.from([6,26,50,74,98]),new Qe(28,new Ie(2,111),new Ie(7,112)),new Qe(28,new Ie(17,46)),new Qe(30,new Ie(7,24),new Ie(16,25)),new Qe(24,new Ie(34,13))),new ar(23,Int32Array.from([6,30,54,78,102]),new Qe(30,new Ie(4,121),new Ie(5,122)),new Qe(28,new Ie(4,47),new Ie(14,48)),new Qe(30,new Ie(11,24),new Ie(14,25)),new Qe(30,new Ie(16,15),new Ie(14,16))),new ar(24,Int32Array.from([6,28,54,80,106]),new Qe(30,new Ie(6,117),new Ie(4,118)),new Qe(28,new Ie(6,45),new Ie(14,46)),new Qe(30,new Ie(11,24),new Ie(16,25)),new Qe(30,new Ie(30,16),new Ie(2,17))),new ar(25,Int32Array.from([6,32,58,84,110]),new Qe(26,new Ie(8,106),new Ie(4,107)),new Qe(28,new Ie(8,47),new Ie(13,48)),new Qe(30,new Ie(7,24),new Ie(22,25)),new Qe(30,new Ie(22,15),new Ie(13,16))),new ar(26,Int32Array.from([6,30,58,86,114]),new Qe(28,new Ie(10,114),new Ie(2,115)),new Qe(28,new Ie(19,46),new Ie(4,47)),new Qe(28,new Ie(28,22),new Ie(6,23)),new Qe(30,new Ie(33,16),new Ie(4,17))),new ar(27,Int32Array.from([6,34,62,90,118]),new Qe(30,new Ie(8,122),new Ie(4,123)),new Qe(28,new Ie(22,45),new Ie(3,46)),new Qe(30,new Ie(8,23),new Ie(26,24)),new Qe(30,new Ie(12,15),new Ie(28,16))),new ar(28,Int32Array.from([6,26,50,74,98,122]),new Qe(30,new Ie(3,117),new Ie(10,118)),new Qe(28,new Ie(3,45),new Ie(23,46)),new Qe(30,new Ie(4,24),new Ie(31,25)),new Qe(30,new Ie(11,15),new Ie(31,16))),new ar(29,Int32Array.from([6,30,54,78,102,126]),new Qe(30,new Ie(7,116),new Ie(7,117)),new Qe(28,new Ie(21,45),new Ie(7,46)),new Qe(30,new Ie(1,23),new Ie(37,24)),new Qe(30,new Ie(19,15),new Ie(26,16))),new ar(30,Int32Array.from([6,26,52,78,104,130]),new Qe(30,new Ie(5,115),new Ie(10,116)),new Qe(28,new Ie(19,47),new Ie(10,48)),new Qe(30,new Ie(15,24),new Ie(25,25)),new Qe(30,new Ie(23,15),new Ie(25,16))),new ar(31,Int32Array.from([6,30,56,82,108,134]),new Qe(30,new Ie(13,115),new Ie(3,116)),new Qe(28,new Ie(2,46),new Ie(29,47)),new Qe(30,new Ie(42,24),new Ie(1,25)),new Qe(30,new Ie(23,15),new Ie(28,16))),new ar(32,Int32Array.from([6,34,60,86,112,138]),new Qe(30,new Ie(17,115)),new Qe(28,new Ie(10,46),new Ie(23,47)),new Qe(30,new Ie(10,24),new Ie(35,25)),new Qe(30,new Ie(19,15),new Ie(35,16))),new ar(33,Int32Array.from([6,30,58,86,114,142]),new Qe(30,new Ie(17,115),new Ie(1,116)),new Qe(28,new Ie(14,46),new Ie(21,47)),new Qe(30,new Ie(29,24),new Ie(19,25)),new Qe(30,new Ie(11,15),new Ie(46,16))),new ar(34,Int32Array.from([6,34,62,90,118,146]),new Qe(30,new Ie(13,115),new Ie(6,116)),new Qe(28,new Ie(14,46),new Ie(23,47)),new Qe(30,new Ie(44,24),new Ie(7,25)),new Qe(30,new Ie(59,16),new Ie(1,17))),new ar(35,Int32Array.from([6,30,54,78,102,126,150]),new Qe(30,new Ie(12,121),new Ie(7,122)),new Qe(28,new Ie(12,47),new Ie(26,48)),new Qe(30,new Ie(39,24),new Ie(14,25)),new Qe(30,new Ie(22,15),new Ie(41,16))),new ar(36,Int32Array.from([6,24,50,76,102,128,154]),new Qe(30,new Ie(6,121),new Ie(14,122)),new Qe(28,new Ie(6,47),new Ie(34,48)),new Qe(30,new Ie(46,24),new Ie(10,25)),new Qe(30,new Ie(2,15),new Ie(64,16))),new ar(37,Int32Array.from([6,28,54,80,106,132,158]),new Qe(30,new Ie(17,122),new Ie(4,123)),new Qe(28,new Ie(29,46),new Ie(14,47)),new Qe(30,new Ie(49,24),new Ie(10,25)),new Qe(30,new Ie(24,15),new Ie(46,16))),new ar(38,Int32Array.from([6,32,58,84,110,136,162]),new Qe(30,new Ie(4,122),new Ie(18,123)),new Qe(28,new Ie(13,46),new Ie(32,47)),new Qe(30,new Ie(48,24),new Ie(14,25)),new Qe(30,new Ie(42,15),new Ie(32,16))),new ar(39,Int32Array.from([6,26,54,82,110,138,166]),new Qe(30,new Ie(20,117),new Ie(4,118)),new Qe(28,new Ie(40,47),new Ie(7,48)),new Qe(30,new Ie(43,24),new Ie(22,25)),new Qe(30,new Ie(10,15),new Ie(67,16))),new ar(40,Int32Array.from([6,30,58,86,114,142,170]),new Qe(30,new Ie(19,118),new Ie(6,119)),new Qe(28,new Ie(18,47),new Ie(31,48)),new Qe(30,new Ie(34,24),new Ie(34,25)),new Qe(30,new Ie(20,15),new Ie(61,16)))];var Zi;(function(se){se[se.DATA_MASK_000=0]="DATA_MASK_000",se[se.DATA_MASK_001=1]="DATA_MASK_001",se[se.DATA_MASK_010=2]="DATA_MASK_010",se[se.DATA_MASK_011=3]="DATA_MASK_011",se[se.DATA_MASK_100=4]="DATA_MASK_100",se[se.DATA_MASK_101=5]="DATA_MASK_101",se[se.DATA_MASK_110=6]="DATA_MASK_110",se[se.DATA_MASK_111=7]="DATA_MASK_111"})(Zi||(Zi={}));class Gs{constructor(h,g){this.value=h,this.isMasked=g}unmaskBitMatrix(h,g){for(let v=0;v<g;v++)for(let E=0;E<g;E++)this.isMasked(v,E)&&h.flip(E,v)}}Gs.values=new Map([[Zi.DATA_MASK_000,new Gs(Zi.DATA_MASK_000,(se,h)=>(se+h&1)===0)],[Zi.DATA_MASK_001,new Gs(Zi.DATA_MASK_001,(se,h)=>(se&1)===0)],[Zi.DATA_MASK_010,new Gs(Zi.DATA_MASK_010,(se,h)=>h%3===0)],[Zi.DATA_MASK_011,new Gs(Zi.DATA_MASK_011,(se,h)=>(se+h)%3===0)],[Zi.DATA_MASK_100,new Gs(Zi.DATA_MASK_100,(se,h)=>(Math.floor(se/2)+Math.floor(h/3)&1)===0)],[Zi.DATA_MASK_101,new Gs(Zi.DATA_MASK_101,(se,h)=>se*h%6===0)],[Zi.DATA_MASK_110,new Gs(Zi.DATA_MASK_110,(se,h)=>se*h%6<3)],[Zi.DATA_MASK_111,new Gs(Zi.DATA_MASK_111,(se,h)=>(se+h+se*h%3&1)===0)]]);class vp{constructor(h){const g=h.getHeight();if(g<21||(g&3)!==1)throw new O;this.bitMatrix=h}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let h=0;for(let k=0;k<6;k++)h=this.copyBit(k,8,h);h=this.copyBit(7,8,h),h=this.copyBit(8,8,h),h=this.copyBit(8,7,h);for(let k=5;k>=0;k--)h=this.copyBit(8,k,h);const g=this.bitMatrix.getHeight();let v=0;const E=g-7;for(let k=g-1;k>=E;k--)v=this.copyBit(8,k,v);for(let k=g-8;k<g;k++)v=this.copyBit(k,8,v);if(this.parsedFormatInfo=za.decodeFormatInformation(h,v),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new O}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const h=this.bitMatrix.getHeight(),g=Math.floor((h-17)/4);if(g<=6)return ar.getVersionForNumber(g);let v=0;const E=h-11;for(let T=5;T>=0;T--)for(let R=h-9;R>=E;R--)v=this.copyBit(R,T,v);let k=ar.decodeVersionInformation(v);if(k!==null&&k.getDimensionForVersion()===h)return this.parsedVersion=k,k;v=0;for(let T=5;T>=0;T--)for(let R=h-9;R>=E;R--)v=this.copyBit(T,R,v);if(k=ar.decodeVersionInformation(v),k!==null&&k.getDimensionForVersion()===h)return this.parsedVersion=k,k;throw new O}copyBit(h,g,v){return(this.isMirror?this.bitMatrix.get(g,h):this.bitMatrix.get(h,g))?v<<1|1:v<<1}readCodewords(){const h=this.readFormatInformation(),g=this.readVersion(),v=Gs.values.get(h.getDataMask()),E=this.bitMatrix.getHeight();v.unmaskBitMatrix(this.bitMatrix,E);const k=g.buildFunctionPattern();let T=!0;const R=new Uint8Array(g.getTotalCodewords());let F=0,U=0,Z=0;for(let oe=E-1;oe>0;oe-=2){oe===6&&oe--;for(let xe=0;xe<E;xe++){const Oe=T?E-1-xe:xe;for(let ce=0;ce<2;ce++)k.get(oe-ce,Oe)||(Z++,U<<=1,this.bitMatrix.get(oe-ce,Oe)&&(U|=1),Z===8&&(R[F++]=U,Z=0,U=0))}T=!T}if(F!==g.getTotalCodewords())throw new O;return R}remask(){if(this.parsedFormatInfo===null)return;const h=Gs.values[this.parsedFormatInfo.getDataMask()],g=this.bitMatrix.getHeight();h.unmaskBitMatrix(this.bitMatrix,g)}setMirror(h){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=h}mirror(){const h=this.bitMatrix;for(let g=0,v=h.getWidth();g<v;g++)for(let E=g+1,k=h.getHeight();E<k;E++)h.get(g,E)!==h.get(E,g)&&(h.flip(E,g),h.flip(g,E))}}class x1{constructor(h,g){this.numDataCodewords=h,this.codewords=g}static getDataBlocks(h,g,v){if(h.length!==g.getTotalCodewords())throw new f;const E=g.getECBlocksForLevel(v);let k=0;const T=E.getECBlocks();for(const ce of T)k+=ce.getCount();const R=new Array(k);let F=0;for(const ce of T)for(let be=0;be<ce.getCount();be++){const Ne=ce.getDataCodewords(),Be=E.getECCodewordsPerBlock()+Ne;R[F++]=new x1(Ne,new Uint8Array(Be))}const U=R[0].codewords.length;let Z=R.length-1;for(;Z>=0&&R[Z].codewords.length!==U;)Z--;Z++;const oe=U-E.getECCodewordsPerBlock();let xe=0;for(let ce=0;ce<oe;ce++)for(let be=0;be<F;be++)R[be].codewords[ce]=h[xe++];for(let ce=Z;ce<F;ce++)R[ce].codewords[oe]=h[xe++];const Oe=R[0].codewords.length;for(let ce=oe;ce<Oe;ce++)for(let be=0;be<F;be++){const Ne=be<Z?ce:ce+1;R[be].codewords[Ne]=h[xe++]}return R}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var To;(function(se){se[se.TERMINATOR=0]="TERMINATOR",se[se.NUMERIC=1]="NUMERIC",se[se.ALPHANUMERIC=2]="ALPHANUMERIC",se[se.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",se[se.BYTE=4]="BYTE",se[se.ECI=5]="ECI",se[se.KANJI=6]="KANJI",se[se.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",se[se.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",se[se.HANZI=9]="HANZI"})(To||(To={}));class mr{constructor(h,g,v,E){this.value=h,this.stringValue=g,this.characterCountBitsForVersions=v,this.bits=E,mr.FOR_BITS.set(E,this),mr.FOR_VALUE.set(h,this)}static forBits(h){const g=mr.FOR_BITS.get(h);if(g===void 0)throw new f;return g}getCharacterCountBits(h){const g=h.getVersionNumber();let v;return g<=9?v=0:g<=26?v=1:v=2,this.characterCountBitsForVersions[v]}getValue(){return this.value}getBits(){return this.bits}equals(h){if(!(h instanceof mr))return!1;const g=h;return this.value===g.value}toString(){return this.stringValue}}mr.FOR_BITS=new Map,mr.FOR_VALUE=new Map,mr.TERMINATOR=new mr(To.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),mr.NUMERIC=new mr(To.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),mr.ALPHANUMERIC=new mr(To.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),mr.STRUCTURED_APPEND=new mr(To.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),mr.BYTE=new mr(To.BYTE,"BYTE",Int32Array.from([8,16,16]),4),mr.ECI=new mr(To.ECI,"ECI",Int32Array.from([0,0,0]),7),mr.KANJI=new mr(To.KANJI,"KANJI",Int32Array.from([8,10,12]),8),mr.FNC1_FIRST_POSITION=new mr(To.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),mr.FNC1_SECOND_POSITION=new mr(To.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),mr.HANZI=new mr(To.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class gi{static decode(h,g,v,E){const k=new g1(h);let T=new ie;const R=new Array;let F=-1,U=-1;try{let Z=null,oe=!1,xe;do{if(k.available()<4)xe=mr.TERMINATOR;else{const Oe=k.readBits(4);xe=mr.forBits(Oe)}switch(xe){case mr.TERMINATOR:break;case mr.FNC1_FIRST_POSITION:case mr.FNC1_SECOND_POSITION:oe=!0;break;case mr.STRUCTURED_APPEND:if(k.available()<16)throw new O;F=k.readBits(8),U=k.readBits(8);break;case mr.ECI:const Oe=gi.parseECIValue(k);if(Z=L.getCharacterSetECIByValue(Oe),Z===null)throw new O;break;case mr.HANZI:const ce=k.readBits(4),be=k.readBits(xe.getCharacterCountBits(g));ce===gi.GB2312_SUBSET&&gi.decodeHanziSegment(k,T,be);break;default:const Ne=k.readBits(xe.getCharacterCountBits(g));switch(xe){case mr.NUMERIC:gi.decodeNumericSegment(k,T,Ne);break;case mr.ALPHANUMERIC:gi.decodeAlphanumericSegment(k,T,Ne,oe);break;case mr.BYTE:gi.decodeByteSegment(k,T,Ne,Z,R,E);break;case mr.KANJI:gi.decodeKanjiSegment(k,T,Ne);break;default:throw new O}break}}while(xe!==mr.TERMINATOR)}catch{throw new O}return new ae(h,T.toString(),R.length===0?null:R,v===null?null:v.toString(),F,U)}static decodeHanziSegment(h,g,v){if(v*13>h.available())throw new O;const E=new Uint8Array(2*v);let k=0;for(;v>0;){const T=h.readBits(13);let R=T/96<<8&4294967295|T%96;R<959?R+=41377:R+=42657,E[k]=R>>8&255,E[k+1]=R&255,k+=2,v--}try{g.append(H.decode(E,z.GB2312))}catch(T){throw new O(T)}}static decodeKanjiSegment(h,g,v){if(v*13>h.available())throw new O;const E=new Uint8Array(2*v);let k=0;for(;v>0;){const T=h.readBits(13);let R=T/192<<8&4294967295|T%192;R<7936?R+=33088:R+=49472,E[k]=R>>8,E[k+1]=R,k+=2,v--}try{g.append(H.decode(E,z.SHIFT_JIS))}catch(T){throw new O(T)}}static decodeByteSegment(h,g,v,E,k,T){if(8*v>h.available())throw new O;const R=new Uint8Array(v);for(let U=0;U<v;U++)R[U]=h.readBits(8);let F;E===null?F=z.guessEncoding(R,T):F=E.getName();try{g.append(H.decode(R,F))}catch(U){throw new O(U)}k.push(R)}static toAlphaNumericChar(h){if(h>=gi.ALPHANUMERIC_CHARS.length)throw new O;return gi.ALPHANUMERIC_CHARS[h]}static decodeAlphanumericSegment(h,g,v,E){const k=g.length();for(;v>1;){if(h.available()<11)throw new O;const T=h.readBits(11);g.append(gi.toAlphaNumericChar(Math.floor(T/45))),g.append(gi.toAlphaNumericChar(T%45)),v-=2}if(v===1){if(h.available()<6)throw new O;g.append(gi.toAlphaNumericChar(h.readBits(6)))}if(E)for(let T=k;T<g.length();T++)g.charAt(T)==="%"&&(T<g.length()-1&&g.charAt(T+1)==="%"?g.deleteCharAt(T+1):g.setCharAt(T,""))}static decodeNumericSegment(h,g,v){for(;v>=3;){if(h.available()<10)throw new O;const E=h.readBits(10);if(E>=1e3)throw new O;g.append(gi.toAlphaNumericChar(Math.floor(E/100))),g.append(gi.toAlphaNumericChar(Math.floor(E/10)%10)),g.append(gi.toAlphaNumericChar(E%10)),v-=3}if(v===2){if(h.available()<7)throw new O;const E=h.readBits(7);if(E>=100)throw new O;g.append(gi.toAlphaNumericChar(Math.floor(E/10))),g.append(gi.toAlphaNumericChar(E%10))}else if(v===1){if(h.available()<4)throw new O;const E=h.readBits(4);if(E>=10)throw new O;g.append(gi.toAlphaNumericChar(E))}}static parseECIValue(h){const g=h.readBits(8);if(!(g&128))return g&127;if((g&192)===128){const v=h.readBits(8);return(g&63)<<8&4294967295|v}if((g&224)===192){const v=h.readBits(16);return(g&31)<<16&4294967295|v}throw new O}}gi.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",gi.GB2312_SUBSET=1;class zb{constructor(h){this.mirrored=h}isMirrored(){return this.mirrored}applyMirroredCorrection(h){if(!this.mirrored||h===null||h.length<3)return;const g=h[0];h[0]=h[2],h[2]=g}}class ik{constructor(){this.rsDecoder=new De(Ae.QR_CODE_FIELD_256)}decodeBooleanArray(h,g){return this.decodeBitMatrix(X.parseFromBooleanArray(h),g)}decodeBitMatrix(h,g){const v=new vp(h);let E=null;try{return this.decodeBitMatrixParser(v,g)}catch(k){E=k}try{v.remask(),v.setMirror(!0),v.readVersion(),v.readFormatInformation(),v.mirror();const k=this.decodeBitMatrixParser(v,g);return k.setOther(new zb(!0)),k}catch(k){throw E!==null?E:k}}decodeBitMatrixParser(h,g){const v=h.readVersion(),E=h.readFormatInformation().getErrorCorrectionLevel(),k=h.readCodewords(),T=x1.getDataBlocks(k,v,E);let R=0;for(const Z of T)R+=Z.getNumDataCodewords();const F=new Uint8Array(R);let U=0;for(const Z of T){const oe=Z.getCodewords(),xe=Z.getNumDataCodewords();this.correctErrors(oe,xe);for(let Oe=0;Oe<xe;Oe++)F[U++]=oe[Oe]}return gi.decode(F,v,E,g)}correctErrors(h,g){const v=new Int32Array(h);try{this.rsDecoder.decode(v,h.length-g)}catch{throw new m}for(let E=0;E<g;E++)h[E]=v[E]}}class v1 extends ht{constructor(h,g,v){super(h,g),this.estimatedModuleSize=v}aboutEquals(h,g,v){if(Math.abs(g-this.getY())<=h&&Math.abs(v-this.getX())<=h){const E=Math.abs(h-this.estimatedModuleSize);return E<=1||E<=this.estimatedModuleSize}return!1}combineEstimate(h,g,v){const E=(this.getX()+g)/2,k=(this.getY()+h)/2,T=(this.estimatedModuleSize+v)/2;return new v1(E,k,T)}}class y1{constructor(h,g,v,E,k,T,R){this.image=h,this.startX=g,this.startY=v,this.width=E,this.height=k,this.moduleSize=T,this.resultPointCallback=R,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const h=this.startX,g=this.height,v=this.width,E=h+v,k=this.startY+g/2,T=new Int32Array(3),R=this.image;for(let F=0;F<g;F++){const U=k+(F&1?-Math.floor((F+1)/2):Math.floor((F+1)/2));T[0]=0,T[1]=0,T[2]=0;let Z=h;for(;Z<E&&!R.get(Z,U);)Z++;let oe=0;for(;Z<E;){if(R.get(Z,U))if(oe===1)T[1]++;else if(oe===2){if(this.foundPatternCross(T)){const xe=this.handlePossibleCenter(T,U,Z);if(xe!==null)return xe}T[0]=T[2],T[1]=1,T[2]=0,oe=1}else T[++oe]++;else oe===1&&oe++,T[oe]++;Z++}if(this.foundPatternCross(T)){const xe=this.handlePossibleCenter(T,U,E);if(xe!==null)return xe}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new W}static centerFromEnd(h,g){return g-h[2]-h[1]/2}foundPatternCross(h){const g=this.moduleSize,v=g/2;for(let E=0;E<3;E++)if(Math.abs(g-h[E])>=v)return!1;return!0}crossCheckVertical(h,g,v,E){const k=this.image,T=k.getHeight(),R=this.crossCheckStateCount;R[0]=0,R[1]=0,R[2]=0;let F=h;for(;F>=0&&k.get(g,F)&&R[1]<=v;)R[1]++,F--;if(F<0||R[1]>v)return NaN;for(;F>=0&&!k.get(g,F)&&R[0]<=v;)R[0]++,F--;if(R[0]>v)return NaN;for(F=h+1;F<T&&k.get(g,F)&&R[1]<=v;)R[1]++,F++;if(F===T||R[1]>v)return NaN;for(;F<T&&!k.get(g,F)&&R[2]<=v;)R[2]++,F++;if(R[2]>v)return NaN;const U=R[0]+R[1]+R[2];return 5*Math.abs(U-E)>=2*E?NaN:this.foundPatternCross(R)?y1.centerFromEnd(R,F):NaN}handlePossibleCenter(h,g,v){const E=h[0]+h[1]+h[2],k=y1.centerFromEnd(h,v),T=this.crossCheckVertical(g,k,2*h[1],E);if(!isNaN(T)){const R=(h[0]+h[1]+h[2])/3;for(const U of this.possibleCenters)if(U.aboutEquals(R,T,k))return U.combineEstimate(T,k,R);const F=new v1(k,T,R);this.possibleCenters.push(F),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(F)}return null}}class Hb extends ht{constructor(h,g,v,E){super(h,g),this.estimatedModuleSize=v,this.count=E,E===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(h,g,v){if(Math.abs(g-this.getY())<=h&&Math.abs(v-this.getX())<=h){const E=Math.abs(h-this.estimatedModuleSize);return E<=1||E<=this.estimatedModuleSize}return!1}combineEstimate(h,g,v){const E=this.count+1,k=(this.count*this.getX()+g)/E,T=(this.count*this.getY()+h)/E,R=(this.count*this.estimatedModuleSize+v)/E;return new Hb(k,T,R,E)}}class zP{constructor(h){this.bottomLeft=h[0],this.topLeft=h[1],this.topRight=h[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class pa{constructor(h,g){this.image=h,this.resultPointCallback=g,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=g}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(h){const g=h!=null&&h.get(P.TRY_HARDER)!==void 0,v=h!=null&&h.get(P.PURE_BARCODE)!==void 0,E=this.image,k=E.getHeight(),T=E.getWidth();let R=Math.floor(3*k/(4*pa.MAX_MODULES));(R<pa.MIN_SKIP||g)&&(R=pa.MIN_SKIP);let F=!1;const U=new Int32Array(5);for(let oe=R-1;oe<k&&!F;oe+=R){U[0]=0,U[1]=0,U[2]=0,U[3]=0,U[4]=0;let xe=0;for(let Oe=0;Oe<T;Oe++)if(E.get(Oe,oe))(xe&1)===1&&xe++,U[xe]++;else if(xe&1)U[xe]++;else if(xe===4)if(pa.foundPatternCross(U)){if(this.handlePossibleCenter(U,oe,Oe,v)===!0)if(R=2,this.hasSkipped===!0)F=this.haveMultiplyConfirmedCenters();else{const be=this.findRowSkip();be>U[2]&&(oe+=be-U[2]-R,Oe=T-1)}else{U[0]=U[2],U[1]=U[3],U[2]=U[4],U[3]=1,U[4]=0,xe=3;continue}xe=0,U[0]=0,U[1]=0,U[2]=0,U[3]=0,U[4]=0}else U[0]=U[2],U[1]=U[3],U[2]=U[4],U[3]=1,U[4]=0,xe=3;else U[++xe]++;pa.foundPatternCross(U)&&this.handlePossibleCenter(U,oe,T,v)===!0&&(R=U[0],this.hasSkipped&&(F=this.haveMultiplyConfirmedCenters()))}const Z=this.selectBestPatterns();return ht.orderBestPatterns(Z),new zP(Z)}static centerFromEnd(h,g){return g-h[4]-h[3]-h[2]/2}static foundPatternCross(h){let g=0;for(let k=0;k<5;k++){const T=h[k];if(T===0)return!1;g+=T}if(g<7)return!1;const v=g/7,E=v/2;return Math.abs(v-h[0])<E&&Math.abs(v-h[1])<E&&Math.abs(3*v-h[2])<3*E&&Math.abs(v-h[3])<E&&Math.abs(v-h[4])<E}getCrossCheckStateCount(){const h=this.crossCheckStateCount;return h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h}crossCheckDiagonal(h,g,v,E){const k=this.getCrossCheckStateCount();let T=0;const R=this.image;for(;h>=T&&g>=T&&R.get(g-T,h-T);)k[2]++,T++;if(h<T||g<T)return!1;for(;h>=T&&g>=T&&!R.get(g-T,h-T)&&k[1]<=v;)k[1]++,T++;if(h<T||g<T||k[1]>v)return!1;for(;h>=T&&g>=T&&R.get(g-T,h-T)&&k[0]<=v;)k[0]++,T++;if(k[0]>v)return!1;const F=R.getHeight(),U=R.getWidth();for(T=1;h+T<F&&g+T<U&&R.get(g+T,h+T);)k[2]++,T++;if(h+T>=F||g+T>=U)return!1;for(;h+T<F&&g+T<U&&!R.get(g+T,h+T)&&k[3]<v;)k[3]++,T++;if(h+T>=F||g+T>=U||k[3]>=v)return!1;for(;h+T<F&&g+T<U&&R.get(g+T,h+T)&&k[4]<v;)k[4]++,T++;if(k[4]>=v)return!1;const Z=k[0]+k[1]+k[2]+k[3]+k[4];return Math.abs(Z-E)<2*E&&pa.foundPatternCross(k)}crossCheckVertical(h,g,v,E){const k=this.image,T=k.getHeight(),R=this.getCrossCheckStateCount();let F=h;for(;F>=0&&k.get(g,F);)R[2]++,F--;if(F<0)return NaN;for(;F>=0&&!k.get(g,F)&&R[1]<=v;)R[1]++,F--;if(F<0||R[1]>v)return NaN;for(;F>=0&&k.get(g,F)&&R[0]<=v;)R[0]++,F--;if(R[0]>v)return NaN;for(F=h+1;F<T&&k.get(g,F);)R[2]++,F++;if(F===T)return NaN;for(;F<T&&!k.get(g,F)&&R[3]<v;)R[3]++,F++;if(F===T||R[3]>=v)return NaN;for(;F<T&&k.get(g,F)&&R[4]<v;)R[4]++,F++;if(R[4]>=v)return NaN;const U=R[0]+R[1]+R[2]+R[3]+R[4];return 5*Math.abs(U-E)>=2*E?NaN:pa.foundPatternCross(R)?pa.centerFromEnd(R,F):NaN}crossCheckHorizontal(h,g,v,E){const k=this.image,T=k.getWidth(),R=this.getCrossCheckStateCount();let F=h;for(;F>=0&&k.get(F,g);)R[2]++,F--;if(F<0)return NaN;for(;F>=0&&!k.get(F,g)&&R[1]<=v;)R[1]++,F--;if(F<0||R[1]>v)return NaN;for(;F>=0&&k.get(F,g)&&R[0]<=v;)R[0]++,F--;if(R[0]>v)return NaN;for(F=h+1;F<T&&k.get(F,g);)R[2]++,F++;if(F===T)return NaN;for(;F<T&&!k.get(F,g)&&R[3]<v;)R[3]++,F++;if(F===T||R[3]>=v)return NaN;for(;F<T&&k.get(F,g)&&R[4]<v;)R[4]++,F++;if(R[4]>=v)return NaN;const U=R[0]+R[1]+R[2]+R[3]+R[4];return 5*Math.abs(U-E)>=E?NaN:pa.foundPatternCross(R)?pa.centerFromEnd(R,F):NaN}handlePossibleCenter(h,g,v,E){const k=h[0]+h[1]+h[2]+h[3]+h[4];let T=pa.centerFromEnd(h,v),R=this.crossCheckVertical(g,Math.floor(T),h[2],k);if(!isNaN(R)&&(T=this.crossCheckHorizontal(Math.floor(T),Math.floor(R),h[2],k),!isNaN(T)&&(!E||this.crossCheckDiagonal(Math.floor(R),Math.floor(T),h[2],k)))){const F=k/7;let U=!1;const Z=this.possibleCenters;for(let oe=0,xe=Z.length;oe<xe;oe++){const Oe=Z[oe];if(Oe.aboutEquals(F,R,T)){Z[oe]=Oe.combineEstimate(R,T,F),U=!0;break}}if(!U){const oe=new Hb(T,R,F);Z.push(oe),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(oe)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let g=null;for(const v of this.possibleCenters)if(v.getCount()>=pa.CENTER_QUORUM)if(g==null)g=v;else return this.hasSkipped=!0,Math.floor((Math.abs(g.getX()-v.getX())-Math.abs(g.getY()-v.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let h=0,g=0;const v=this.possibleCenters.length;for(const T of this.possibleCenters)T.getCount()>=pa.CENTER_QUORUM&&(h++,g+=T.getEstimatedModuleSize());if(h<3)return!1;const E=g/v;let k=0;for(const T of this.possibleCenters)k+=Math.abs(T.getEstimatedModuleSize()-E);return k<=.05*g}selectBestPatterns(){const h=this.possibleCenters.length;if(h<3)throw new W;const g=this.possibleCenters;let v;if(h>3){let E=0,k=0;for(const F of this.possibleCenters){const U=F.getEstimatedModuleSize();E+=U,k+=U*U}v=E/h;let T=Math.sqrt(k/h-v*v);g.sort((F,U)=>{const Z=Math.abs(U.getEstimatedModuleSize()-v),oe=Math.abs(F.getEstimatedModuleSize()-v);return Z<oe?-1:Z>oe?1:0});const R=Math.max(.2*v,T);for(let F=0;F<g.length&&g.length>3;F++){const U=g[F];Math.abs(U.getEstimatedModuleSize()-v)>R&&(g.splice(F,1),F--)}}if(g.length>3){let E=0;for(const k of g)E+=k.getEstimatedModuleSize();v=E/g.length,g.sort((k,T)=>{if(T.getCount()===k.getCount()){const R=Math.abs(T.getEstimatedModuleSize()-v),F=Math.abs(k.getEstimatedModuleSize()-v);return R<F?1:R>F?-1:0}else return T.getCount()-k.getCount()}),g.splice(3)}return[g[0],g[1],g[2]]}}pa.CENTER_QUORUM=2,pa.MIN_SKIP=3,pa.MAX_MODULES=57;class vm{constructor(h){this.image=h}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(h){this.resultPointCallback=h==null?null:h.get(P.NEED_RESULT_POINT_CALLBACK);const v=new pa(this.image,this.resultPointCallback).find(h);return this.processFinderPatternInfo(v)}processFinderPatternInfo(h){const g=h.getTopLeft(),v=h.getTopRight(),E=h.getBottomLeft(),k=this.calculateModuleSize(g,v,E);if(k<1)throw new W("No pattern found in proccess finder.");const T=vm.computeDimension(g,v,E,k),R=ar.getProvisionalVersionForDimension(T),F=R.getDimensionForVersion()-7;let U=null;if(R.getAlignmentPatternCenters().length>0){const Oe=v.getX()-g.getX()+E.getX(),ce=v.getY()-g.getY()+E.getY(),be=1-3/F,Ne=Math.floor(g.getX()+be*(Oe-g.getX())),Be=Math.floor(g.getY()+be*(ce-g.getY()));for(let lt=4;lt<=16;lt<<=1)try{U=this.findAlignmentInRegion(k,Ne,Be,lt);break}catch(gt){if(!(gt instanceof W))throw gt}}const Z=vm.createTransform(g,v,E,U,T),oe=vm.sampleGrid(this.image,Z,T);let xe;return U===null?xe=[E,g,v]:xe=[E,g,v,U],new jr(oe,xe)}static createTransform(h,g,v,E,k){const T=k-3.5;let R,F,U,Z;return E!==null?(R=E.getX(),F=E.getY(),U=T-3,Z=U):(R=g.getX()-h.getX()+v.getX(),F=g.getY()-h.getY()+v.getY(),U=T,Z=T),Lt.quadrilateralToQuadrilateral(3.5,3.5,T,3.5,U,Z,3.5,T,h.getX(),h.getY(),g.getX(),g.getY(),R,F,v.getX(),v.getY())}static sampleGrid(h,g,v){return Gt.getInstance().sampleGridWithTransform(h,v,v,g)}static computeDimension(h,g,v,E){const k=ut.round(ht.distance(h,g)/E),T=ut.round(ht.distance(h,v)/E);let R=Math.floor((k+T)/2)+7;switch(R&3){case 0:R++;break;case 2:R--;break;case 3:throw new W("Dimensions could be not found.")}return R}calculateModuleSize(h,g,v){return(this.calculateModuleSizeOneWay(h,g)+this.calculateModuleSizeOneWay(h,v))/2}calculateModuleSizeOneWay(h,g){const v=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(h.getX()),Math.floor(h.getY()),Math.floor(g.getX()),Math.floor(g.getY())),E=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(g.getX()),Math.floor(g.getY()),Math.floor(h.getX()),Math.floor(h.getY()));return isNaN(v)?E/7:isNaN(E)?v/7:(v+E)/14}sizeOfBlackWhiteBlackRunBothWays(h,g,v,E){let k=this.sizeOfBlackWhiteBlackRun(h,g,v,E),T=1,R=h-(v-h);R<0?(T=h/(h-R),R=0):R>=this.image.getWidth()&&(T=(this.image.getWidth()-1-h)/(R-h),R=this.image.getWidth()-1);let F=Math.floor(g-(E-g)*T);return T=1,F<0?(T=g/(g-F),F=0):F>=this.image.getHeight()&&(T=(this.image.getHeight()-1-g)/(F-g),F=this.image.getHeight()-1),R=Math.floor(h+(R-h)*T),k+=this.sizeOfBlackWhiteBlackRun(h,g,R,F),k-1}sizeOfBlackWhiteBlackRun(h,g,v,E){const k=Math.abs(E-g)>Math.abs(v-h);if(k){let Oe=h;h=g,g=Oe,Oe=v,v=E,E=Oe}const T=Math.abs(v-h),R=Math.abs(E-g);let F=-T/2;const U=h<v?1:-1,Z=g<E?1:-1;let oe=0;const xe=v+U;for(let Oe=h,ce=g;Oe!==xe;Oe+=U){const be=k?ce:Oe,Ne=k?Oe:ce;if(oe===1===this.image.get(be,Ne)){if(oe===2)return ut.distance(Oe,ce,h,g);oe++}if(F+=R,F>0){if(ce===E)break;ce+=Z,F-=T}}return oe===2?ut.distance(v+U,E,h,g):NaN}findAlignmentInRegion(h,g,v,E){const k=Math.floor(E*h),T=Math.max(0,g-k),R=Math.min(this.image.getWidth()-1,g+k);if(R-T<h*3)throw new W("Alignment top exceeds estimated module size.");const F=Math.max(0,v-k),U=Math.min(this.image.getHeight()-1,v+k);if(U-F<h*3)throw new W("Alignment bottom exceeds estimated module size.");return new y1(this.image,T,F,R-T,U-F,h,this.resultPointCallback).find()}}class _d{constructor(){this.decoder=new ik}getDecoder(){return this.decoder}decode(h,g){let v,E;if(g!=null&&g.get(P.PURE_BARCODE)!==void 0){const F=_d.extractPureBits(h.getBlackMatrix());v=this.decoder.decodeBitMatrix(F,g),E=_d.NO_POINTS}else{const F=new vm(h.getBlackMatrix()).detect(g);v=this.decoder.decodeBitMatrix(F.getBits(),g),E=F.getPoints()}v.getOther()instanceof zb&&v.getOther().applyMirroredCorrection(E);const k=new G(v.getText(),v.getRawBytes(),void 0,E,ne.QR_CODE,void 0),T=v.getByteSegments();T!==null&&k.putMetadata(re.BYTE_SEGMENTS,T);const R=v.getECLevel();return R!==null&&k.putMetadata(re.ERROR_CORRECTION_LEVEL,R),v.hasStructuredAppend()&&(k.putMetadata(re.STRUCTURED_APPEND_SEQUENCE,v.getStructuredAppendSequenceNumber()),k.putMetadata(re.STRUCTURED_APPEND_PARITY,v.getStructuredAppendParity())),k}reset(){}static extractPureBits(h){const g=h.getTopLeftOnBit(),v=h.getBottomRightOnBit();if(g===null||v===null)throw new W;const E=this.moduleSize(g,h);let k=g[1],T=v[1],R=g[0],F=v[0];if(R>=F||k>=T)throw new W;if(T-k!==F-R&&(F=R+(T-k),F>=h.getWidth()))throw new W;const U=Math.round((F-R+1)/E),Z=Math.round((T-k+1)/E);if(U<=0||Z<=0)throw new W;if(Z!==U)throw new W;const oe=Math.floor(E/2);k+=oe,R+=oe;const xe=R+Math.floor((U-1)*E)-F;if(xe>0){if(xe>oe)throw new W;R-=xe}const Oe=k+Math.floor((Z-1)*E)-T;if(Oe>0){if(Oe>oe)throw new W;k-=Oe}const ce=new X(U,Z);for(let be=0;be<Z;be++){const Ne=k+Math.floor(be*E);for(let Be=0;Be<U;Be++)h.get(R+Math.floor(Be*E),Ne)&&ce.set(Be,be)}return ce}static moduleSize(h,g){const v=g.getHeight(),E=g.getWidth();let k=h[0],T=h[1],R=!0,F=0;for(;k<E&&T<v;){if(R!==g.get(k,T)){if(++F===5)break;R=!R}k++,T++}if(k===E||T===v)throw new W;return(k-h[0])/7}}_d.NO_POINTS=new Array;class Nr{PDF417Common(){}static getBitCountSum(h){return ut.sum(h)}static toIntArray(h){if(h==null||!h.length)return Nr.EMPTY_INT_ARRAY;const g=new Int32Array(h.length);let v=0;for(const E of h)g[v++]=E;return g}static getCodeword(h){const g=_.binarySearch(Nr.SYMBOL_TABLE,h&262143);return g<0?-1:(Nr.CODEWORD_TABLE[g]-1)%Nr.NUMBER_OF_CODEWORDS}}Nr.NUMBER_OF_CODEWORDS=929,Nr.MAX_CODEWORDS_IN_BARCODE=Nr.NUMBER_OF_CODEWORDS-1,Nr.MIN_ROWS_IN_BARCODE=3,Nr.MAX_ROWS_IN_BARCODE=90,Nr.MODULES_IN_CODEWORD=17,Nr.MODULES_IN_STOP_PATTERN=18,Nr.BARS_IN_MODULE=8,Nr.EMPTY_INT_ARRAY=new Int32Array([]),Nr.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Nr.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class HP{constructor(h,g){this.bits=h,this.points=g}getBits(){return this.bits}getPoints(){return this.points}}class Wr{static detectMultiple(h,g,v){let E=h.getBlackMatrix(),k=Wr.detect(v,E);return k.length||(E=E.clone(),E.rotate180(),k=Wr.detect(v,E)),new HP(E,k)}static detect(h,g){const v=new Array;let E=0,k=0,T=!1;for(;E<g.getHeight();){const R=Wr.findVertices(g,E,k);if(R[0]==null&&R[3]==null){if(!T)break;T=!1,k=0;for(const F of v)F[1]!=null&&(E=Math.trunc(Math.max(E,F[1].getY()))),F[3]!=null&&(E=Math.max(E,Math.trunc(F[3].getY())));E+=Wr.ROW_STEP;continue}if(T=!0,v.push(R),!h)break;R[2]!=null?(k=Math.trunc(R[2].getX()),E=Math.trunc(R[2].getY())):(k=Math.trunc(R[4].getX()),E=Math.trunc(R[4].getY()))}return v}static findVertices(h,g,v){const E=h.getHeight(),k=h.getWidth(),T=new Array(8);return Wr.copyToResult(T,Wr.findRowsWithPattern(h,E,k,g,v,Wr.START_PATTERN),Wr.INDEXES_START_PATTERN),T[4]!=null&&(v=Math.trunc(T[4].getX()),g=Math.trunc(T[4].getY())),Wr.copyToResult(T,Wr.findRowsWithPattern(h,E,k,g,v,Wr.STOP_PATTERN),Wr.INDEXES_STOP_PATTERN),T}static copyToResult(h,g,v){for(let E=0;E<v.length;E++)h[v[E]]=g[E]}static findRowsWithPattern(h,g,v,E,k,T){const R=new Array(4);let F=!1;const U=new Int32Array(T.length);for(;E<g;E+=Wr.ROW_STEP){let oe=Wr.findGuardPattern(h,k,E,v,!1,T,U);if(oe!=null){for(;E>0;){const xe=Wr.findGuardPattern(h,k,--E,v,!1,T,U);if(xe!=null)oe=xe;else{E++;break}}R[0]=new ht(oe[0],E),R[1]=new ht(oe[1],E),F=!0;break}}let Z=E+1;if(F){let oe=0,xe=Int32Array.from([Math.trunc(R[0].getX()),Math.trunc(R[1].getX())]);for(;Z<g;Z++){const Oe=Wr.findGuardPattern(h,xe[0],Z,v,!1,T,U);if(Oe!=null&&Math.abs(xe[0]-Oe[0])<Wr.MAX_PATTERN_DRIFT&&Math.abs(xe[1]-Oe[1])<Wr.MAX_PATTERN_DRIFT)xe=Oe,oe=0;else{if(oe>Wr.SKIPPED_ROW_COUNT_MAX)break;oe++}}Z-=oe+1,R[2]=new ht(xe[0],Z),R[3]=new ht(xe[1],Z)}return Z-E<Wr.BARCODE_MIN_HEIGHT&&_.fill(R,null),R}static findGuardPattern(h,g,v,E,k,T,R){_.fillWithin(R,0,R.length,0);let F=g,U=0;for(;h.get(F,v)&&F>0&&U++<Wr.MAX_PIXEL_DRIFT;)F--;let Z=F,oe=0,xe=T.length;for(let Oe=k;Z<E;Z++)if(h.get(Z,v)!==Oe)R[oe]++;else{if(oe===xe-1){if(Wr.patternMatchVariance(R,T,Wr.MAX_INDIVIDUAL_VARIANCE)<Wr.MAX_AVG_VARIANCE)return new Int32Array([F,Z]);F+=R[0]+R[1],y.arraycopy(R,2,R,0,oe-1),R[oe-1]=0,R[oe]=0,oe--}else oe++;R[oe]=1,Oe=!Oe}return oe===xe-1&&Wr.patternMatchVariance(R,T,Wr.MAX_INDIVIDUAL_VARIANCE)<Wr.MAX_AVG_VARIANCE?new Int32Array([F,Z-1]):null}static patternMatchVariance(h,g,v){let E=h.length,k=0,T=0;for(let U=0;U<E;U++)k+=h[U],T+=g[U];if(k<T)return 1/0;let R=k/T;v*=R;let F=0;for(let U=0;U<E;U++){let Z=h[U],oe=g[U]*R,xe=Z>oe?Z-oe:oe-Z;if(xe>v)return 1/0;F+=xe}return F/k}}Wr.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Wr.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Wr.MAX_AVG_VARIANCE=.42,Wr.MAX_INDIVIDUAL_VARIANCE=.8,Wr.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Wr.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Wr.MAX_PIXEL_DRIFT=3,Wr.MAX_PATTERN_DRIFT=5,Wr.SKIPPED_ROW_COUNT_MAX=25,Wr.ROW_STEP=5,Wr.BARCODE_MIN_HEIGHT=10;class Ha{constructor(h,g){if(g.length===0)throw new f;this.field=h;let v=g.length;if(v>1&&g[0]===0){let E=1;for(;E<v&&g[E]===0;)E++;E===v?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(v-E),y.arraycopy(g,E,this.coefficients,0,this.coefficients.length))}else this.coefficients=g}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(h){return this.coefficients[this.coefficients.length-1-h]}evaluateAt(h){if(h===0)return this.getCoefficient(0);if(h===1){let E=0;for(let k of this.coefficients)E=this.field.add(E,k);return E}let g=this.coefficients[0],v=this.coefficients.length;for(let E=1;E<v;E++)g=this.field.add(this.field.multiply(h,g),this.coefficients[E]);return g}add(h){if(!this.field.equals(h.field))throw new f("ModulusPolys do not have same ModulusGF field");if(this.isZero())return h;if(h.isZero())return this;let g=this.coefficients,v=h.coefficients;if(g.length>v.length){let T=g;g=v,v=T}let E=new Int32Array(v.length),k=v.length-g.length;y.arraycopy(v,0,E,0,k);for(let T=k;T<v.length;T++)E[T]=this.field.add(g[T-k],v[T]);return new Ha(this.field,E)}subtract(h){if(!this.field.equals(h.field))throw new f("ModulusPolys do not have same ModulusGF field");return h.isZero()?this:this.add(h.negative())}multiply(h){return h instanceof Ha?this.multiplyOther(h):this.multiplyScalar(h)}multiplyOther(h){if(!this.field.equals(h.field))throw new f("ModulusPolys do not have same ModulusGF field");if(this.isZero()||h.isZero())return new Ha(this.field,new Int32Array([0]));let g=this.coefficients,v=g.length,E=h.coefficients,k=E.length,T=new Int32Array(v+k-1);for(let R=0;R<v;R++){let F=g[R];for(let U=0;U<k;U++)T[R+U]=this.field.add(T[R+U],this.field.multiply(F,E[U]))}return new Ha(this.field,T)}negative(){let h=this.coefficients.length,g=new Int32Array(h);for(let v=0;v<h;v++)g[v]=this.field.subtract(0,this.coefficients[v]);return new Ha(this.field,g)}multiplyScalar(h){if(h===0)return new Ha(this.field,new Int32Array([0]));if(h===1)return this;let g=this.coefficients.length,v=new Int32Array(g);for(let E=0;E<g;E++)v[E]=this.field.multiply(this.coefficients[E],h);return new Ha(this.field,v)}multiplyByMonomial(h,g){if(h<0)throw new f;if(g===0)return new Ha(this.field,new Int32Array([0]));let v=this.coefficients.length,E=new Int32Array(v+h);for(let k=0;k<v;k++)E[k]=this.field.multiply(this.coefficients[k],g);return new Ha(this.field,E)}toString(){let h=new ie;for(let g=this.getDegree();g>=0;g--){let v=this.getCoefficient(g);v!==0&&(v<0?(h.append(" - "),v=-v):h.length()>0&&h.append(" + "),(g===0||v!==1)&&h.append(v),g!==0&&(g===1?h.append("x"):(h.append("x^"),h.append(g))))}return h.toString()}}class WP{add(h,g){return(h+g)%this.modulus}subtract(h,g){return(this.modulus+h-g)%this.modulus}exp(h){return this.expTable[h]}log(h){if(h===0)throw new f;return this.logTable[h]}inverse(h){if(h===0)throw new V;return this.expTable[this.modulus-this.logTable[h]-1]}multiply(h,g){return h===0||g===0?0:this.expTable[(this.logTable[h]+this.logTable[g])%(this.modulus-1)]}getSize(){return this.modulus}equals(h){return h===this}}class Wb extends WP{constructor(h,g){super(),this.modulus=h,this.expTable=new Int32Array(h),this.logTable=new Int32Array(h);let v=1;for(let E=0;E<h;E++)this.expTable[E]=v,v=v*g%h;for(let E=0;E<h-1;E++)this.logTable[this.expTable[E]]=E;this.zero=new Ha(this,new Int32Array([0])),this.one=new Ha(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(h,g){if(h<0)throw new f;if(g===0)return this.zero;let v=new Int32Array(h+1);return v[0]=g,new Ha(this,v)}}Wb.PDF417_GF=new Wb(Nr.NUMBER_OF_CODEWORDS,3);class ak{constructor(){this.field=Wb.PDF417_GF}decode(h,g,v){let E=new Ha(this.field,h),k=new Int32Array(g),T=!1;for(let ce=g;ce>0;ce--){let be=E.evaluateAt(this.field.exp(ce));k[g-ce]=be,be!==0&&(T=!0)}if(!T)return 0;let R=this.field.getOne();if(v!=null)for(const ce of v){let be=this.field.exp(h.length-1-ce),Ne=new Ha(this.field,new Int32Array([this.field.subtract(0,be),1]));R=R.multiply(Ne)}let F=new Ha(this.field,k),U=this.runEuclideanAlgorithm(this.field.buildMonomial(g,1),F,g),Z=U[0],oe=U[1],xe=this.findErrorLocations(Z),Oe=this.findErrorMagnitudes(oe,Z,xe);for(let ce=0;ce<xe.length;ce++){let be=h.length-1-this.field.log(xe[ce]);if(be<0)throw m.getChecksumInstance();h[be]=this.field.subtract(h[be],Oe[ce])}return xe.length}runEuclideanAlgorithm(h,g,v){if(h.getDegree()<g.getDegree()){let xe=h;h=g,g=xe}let E=h,k=g,T=this.field.getZero(),R=this.field.getOne();for(;k.getDegree()>=Math.round(v/2);){let xe=E,Oe=T;if(E=k,T=R,E.isZero())throw m.getChecksumInstance();k=xe;let ce=this.field.getZero(),be=E.getCoefficient(E.getDegree()),Ne=this.field.inverse(be);for(;k.getDegree()>=E.getDegree()&&!k.isZero();){let Be=k.getDegree()-E.getDegree(),lt=this.field.multiply(k.getCoefficient(k.getDegree()),Ne);ce=ce.add(this.field.buildMonomial(Be,lt)),k=k.subtract(E.multiplyByMonomial(Be,lt))}R=ce.multiply(T).subtract(Oe).negative()}let F=R.getCoefficient(0);if(F===0)throw m.getChecksumInstance();let U=this.field.inverse(F),Z=R.multiply(U),oe=k.multiply(U);return[Z,oe]}findErrorLocations(h){let g=h.getDegree(),v=new Int32Array(g),E=0;for(let k=1;k<this.field.getSize()&&E<g;k++)h.evaluateAt(k)===0&&(v[E]=this.field.inverse(k),E++);if(E!==g)throw m.getChecksumInstance();return v}findErrorMagnitudes(h,g,v){let E=g.getDegree(),k=new Int32Array(E);for(let U=1;U<=E;U++)k[E-U]=this.field.multiply(U,g.getCoefficient(U));let T=new Ha(this.field,k),R=v.length,F=new Int32Array(R);for(let U=0;U<R;U++){let Z=this.field.inverse(v[U]),oe=this.field.subtract(0,h.evaluateAt(Z)),xe=this.field.inverse(T.evaluateAt(Z));F[U]=this.field.multiply(oe,xe)}return F}}class Pf{constructor(h,g,v,E,k){h instanceof Pf?this.constructor_2(h):this.constructor_1(h,g,v,E,k)}constructor_1(h,g,v,E,k){const T=g==null||v==null,R=E==null||k==null;if(T&&R)throw new W;T?(g=new ht(0,E.getY()),v=new ht(0,k.getY())):R&&(E=new ht(h.getWidth()-1,g.getY()),k=new ht(h.getWidth()-1,v.getY())),this.image=h,this.topLeft=g,this.bottomLeft=v,this.topRight=E,this.bottomRight=k,this.minX=Math.trunc(Math.min(g.getX(),v.getX())),this.maxX=Math.trunc(Math.max(E.getX(),k.getX())),this.minY=Math.trunc(Math.min(g.getY(),E.getY())),this.maxY=Math.trunc(Math.max(v.getY(),k.getY()))}constructor_2(h){this.image=h.image,this.topLeft=h.getTopLeft(),this.bottomLeft=h.getBottomLeft(),this.topRight=h.getTopRight(),this.bottomRight=h.getBottomRight(),this.minX=h.getMinX(),this.maxX=h.getMaxX(),this.minY=h.getMinY(),this.maxY=h.getMaxY()}static merge(h,g){return h==null?g:g==null?h:new Pf(h.image,h.topLeft,h.bottomLeft,g.topRight,g.bottomRight)}addMissingRows(h,g,v){let E=this.topLeft,k=this.bottomLeft,T=this.topRight,R=this.bottomRight;if(h>0){let F=v?this.topLeft:this.topRight,U=Math.trunc(F.getY()-h);U<0&&(U=0);let Z=new ht(F.getX(),U);v?E=Z:T=Z}if(g>0){let F=v?this.bottomLeft:this.bottomRight,U=Math.trunc(F.getY()+g);U>=this.image.getHeight()&&(U=this.image.getHeight()-1);let Z=new ht(F.getX(),U);v?k=Z:R=Z}return new Pf(this.image,E,k,T,R)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class fi{constructor(h,g,v,E){this.columnCount=h,this.errorCorrectionLevel=E,this.rowCountUpperPart=g,this.rowCountLowerPart=v,this.rowCount=g+v}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ln{constructor(){this.buffer=""}static form(h,g){let v=-1;function E(T,R,F,U,Z,oe){if(T==="%%")return"%";if(g[++v]===void 0)return;T=U?parseInt(U.substr(1)):void 0;let xe=Z?parseInt(Z.substr(1)):void 0,Oe;switch(oe){case"s":Oe=g[v];break;case"c":Oe=g[v][0];break;case"f":Oe=parseFloat(g[v]).toFixed(T);break;case"p":Oe=parseFloat(g[v]).toPrecision(T);break;case"e":Oe=parseFloat(g[v]).toExponential(T);break;case"x":Oe=parseInt(g[v]).toString(xe||16);break;case"d":Oe=parseFloat(parseInt(g[v],xe||10).toPrecision(T)).toFixed(0);break}Oe=typeof Oe=="object"?JSON.stringify(Oe):(+Oe).toString(xe);let ce=parseInt(F),be=F&&F[0]+""=="0"?"0":" ";for(;Oe.length<ce;)Oe=R!==void 0?Oe+be:be+Oe;return Oe}let k=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return h.replace(k,E)}format(h,...g){this.buffer+=Ln.form(h,g)}toString(){return this.buffer}}class ym{constructor(h){this.boundingBox=new Pf(h),this.codewords=new Array(h.getMaxY()-h.getMinY()+1)}getCodewordNearby(h){let g=this.getCodeword(h);if(g!=null)return g;for(let v=1;v<ym.MAX_NEARBY_DISTANCE;v++){let E=this.imageRowToCodewordIndex(h)-v;if(E>=0&&(g=this.codewords[E],g!=null)||(E=this.imageRowToCodewordIndex(h)+v,E<this.codewords.length&&(g=this.codewords[E],g!=null)))return g}return null}imageRowToCodewordIndex(h){return h-this.boundingBox.getMinY()}setCodeword(h,g){this.codewords[this.imageRowToCodewordIndex(h)]=g}getCodeword(h){return this.codewords[this.imageRowToCodewordIndex(h)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const h=new Ln;let g=0;for(const v of this.codewords){if(v==null){h.format("%3d:    |   %n",g++);continue}h.format("%3d: %3d|%3d%n",g++,v.getRowNumber(),v.getValue())}return h.toString()}}ym.MAX_NEARBY_DISTANCE=5;class bm{constructor(){this.values=new Map}setValue(h){h=Math.trunc(h);let g=this.values.get(h);g==null&&(g=0),g++,this.values.set(h,g)}getValue(){let h=-1,g=new Array;for(const[v,E]of this.values.entries()){const k={getKey:()=>v,getValue:()=>E};k.getValue()>h?(h=k.getValue(),g=[],g.push(k.getKey())):k.getValue()===h&&g.push(k.getKey())}return Nr.toIntArray(g)}getConfidence(h){return this.values.get(h)}}class sk extends ym{constructor(h,g){super(h),this._isLeft=g}setRowNumbers(){for(let h of this.getCodewords())h!=null&&h.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(h){let g=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(g,h);let v=this.getBoundingBox(),E=this._isLeft?v.getTopLeft():v.getTopRight(),k=this._isLeft?v.getBottomLeft():v.getBottomRight(),T=this.imageRowToCodewordIndex(Math.trunc(E.getY())),R=this.imageRowToCodewordIndex(Math.trunc(k.getY())),F=-1,U=1,Z=0;for(let oe=T;oe<R;oe++){if(g[oe]==null)continue;let xe=g[oe],Oe=xe.getRowNumber()-F;if(Oe===0)Z++;else if(Oe===1)U=Math.max(U,Z),Z=1,F=xe.getRowNumber();else if(Oe<0||xe.getRowNumber()>=h.getRowCount()||Oe>oe)g[oe]=null;else{let ce;U>2?ce=(U-2)*Oe:ce=Oe;let be=ce>=oe;for(let Ne=1;Ne<=ce&&!be;Ne++)be=g[oe-Ne]!=null;be?g[oe]=null:(F=xe.getRowNumber(),Z=1)}}}getRowHeights(){let h=this.getBarcodeMetadata();if(h==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(h);let g=new Int32Array(h.getRowCount());for(let v of this.getCodewords())if(v!=null){let E=v.getRowNumber();if(E>=g.length)continue;g[E]++}return g}adjustIncompleteIndicatorColumnRowNumbers(h){let g=this.getBoundingBox(),v=this._isLeft?g.getTopLeft():g.getTopRight(),E=this._isLeft?g.getBottomLeft():g.getBottomRight(),k=this.imageRowToCodewordIndex(Math.trunc(v.getY())),T=this.imageRowToCodewordIndex(Math.trunc(E.getY())),R=this.getCodewords(),F=-1;for(let U=k;U<T;U++){if(R[U]==null)continue;let Z=R[U];Z.setRowNumberAsRowIndicatorColumn();let oe=Z.getRowNumber()-F;oe===0||(oe===1?F=Z.getRowNumber():Z.getRowNumber()>=h.getRowCount()?R[U]=null:F=Z.getRowNumber())}}getBarcodeMetadata(){let h=this.getCodewords(),g=new bm,v=new bm,E=new bm,k=new bm;for(let R of h){if(R==null)continue;R.setRowNumberAsRowIndicatorColumn();let F=R.getValue()%30,U=R.getRowNumber();switch(this._isLeft||(U+=2),U%3){case 0:v.setValue(F*3+1);break;case 1:k.setValue(F/3),E.setValue(F%3);break;case 2:g.setValue(F+1);break}}if(g.getValue().length===0||v.getValue().length===0||E.getValue().length===0||k.getValue().length===0||g.getValue()[0]<1||v.getValue()[0]+E.getValue()[0]<Nr.MIN_ROWS_IN_BARCODE||v.getValue()[0]+E.getValue()[0]>Nr.MAX_ROWS_IN_BARCODE)return null;let T=new fi(g.getValue()[0],v.getValue()[0],E.getValue()[0],k.getValue()[0]);return this.removeIncorrectCodewords(h,T),T}removeIncorrectCodewords(h,g){for(let v=0;v<h.length;v++){let E=h[v];if(h[v]==null)continue;let k=E.getValue()%30,T=E.getRowNumber();if(T>g.getRowCount()){h[v]=null;continue}switch(this._isLeft||(T+=2),T%3){case 0:k*3+1!==g.getRowCountUpperPart()&&(h[v]=null);break;case 1:(Math.trunc(k/3)!==g.getErrorCorrectionLevel()||k%3!==g.getRowCountLowerPart())&&(h[v]=null);break;case 2:k+1!==g.getColumnCount()&&(h[v]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class wm{constructor(h,g){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=h,this.barcodeColumnCount=h.getColumnCount(),this.boundingBox=g,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let h=Nr.MAX_CODEWORDS_IN_BARCODE,g;do g=h,h=this.adjustRowNumbersAndGetCount();while(h>0&&h<g);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(h){h!=null&&h.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let h=this.adjustRowNumbersByRow();if(h===0)return 0;for(let g=1;g<this.barcodeColumnCount+1;g++){let v=this.detectionResultColumns[g].getCodewords();for(let E=0;E<v.length;E++)v[E]!=null&&(v[E].hasValidRowNumber()||this.adjustRowNumbers(g,E,v))}return h}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let h=this.detectionResultColumns[0].getCodewords(),g=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let v=0;v<h.length;v++)if(h[v]!=null&&g[v]!=null&&h[v].getRowNumber()===g[v].getRowNumber())for(let E=1;E<=this.barcodeColumnCount;E++){let k=this.detectionResultColumns[E].getCodewords()[v];k!=null&&(k.setRowNumber(h[v].getRowNumber()),k.hasValidRowNumber()||(this.detectionResultColumns[E].getCodewords()[v]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let h=0,g=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let v=0;v<g.length;v++){if(g[v]==null)continue;let E=g[v].getRowNumber(),k=0;for(let T=this.barcodeColumnCount+1;T>0&&k<this.ADJUST_ROW_NUMBER_SKIP;T--){let R=this.detectionResultColumns[T].getCodewords()[v];R!=null&&(k=wm.adjustRowNumberIfValid(E,k,R),R.hasValidRowNumber()||h++)}}return h}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let h=0,g=this.detectionResultColumns[0].getCodewords();for(let v=0;v<g.length;v++){if(g[v]==null)continue;let E=g[v].getRowNumber(),k=0;for(let T=1;T<this.barcodeColumnCount+1&&k<this.ADJUST_ROW_NUMBER_SKIP;T++){let R=this.detectionResultColumns[T].getCodewords()[v];R!=null&&(k=wm.adjustRowNumberIfValid(E,k,R),R.hasValidRowNumber()||h++)}}return h}static adjustRowNumberIfValid(h,g,v){return v==null||v.hasValidRowNumber()||(v.isValidRowNumber(h)?(v.setRowNumber(h),g=0):++g),g}adjustRowNumbers(h,g,v){if(!this.detectionResultColumns[h-1])return;let E=v[g],k=this.detectionResultColumns[h-1].getCodewords(),T=k;this.detectionResultColumns[h+1]!=null&&(T=this.detectionResultColumns[h+1].getCodewords());let R=new Array(14);R[2]=k[g],R[3]=T[g],g>0&&(R[0]=v[g-1],R[4]=k[g-1],R[5]=T[g-1]),g>1&&(R[8]=v[g-2],R[10]=k[g-2],R[11]=T[g-2]),g<v.length-1&&(R[1]=v[g+1],R[6]=k[g+1],R[7]=T[g+1]),g<v.length-2&&(R[9]=v[g+2],R[12]=k[g+2],R[13]=T[g+2]);for(let F of R)if(wm.adjustRowNumber(E,F))return}static adjustRowNumber(h,g){return g==null?!1:g.hasValidRowNumber()&&g.getBucket()===h.getBucket()?(h.setRowNumber(g.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(h){this.boundingBox=h}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(h,g){this.detectionResultColumns[h]=g}getDetectionResultColumn(h){return this.detectionResultColumns[h]}toString(){let h=this.detectionResultColumns[0];h==null&&(h=this.detectionResultColumns[this.barcodeColumnCount+1]);let g=new Ln;for(let v=0;v<h.getCodewords().length;v++){g.format("CW %3d:",v);for(let E=0;E<this.barcodeColumnCount+2;E++){if(this.detectionResultColumns[E]==null){g.format("    |   ");continue}let k=this.detectionResultColumns[E].getCodewords()[v];if(k==null){g.format("    |   ");continue}g.format(" %3d|%3d",k.getRowNumber(),k.getValue())}g.format("%n")}return g.toString()}}class Sm{constructor(h,g,v,E){this.rowNumber=Sm.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(h),this.endX=Math.trunc(g),this.bucket=Math.trunc(v),this.value=Math.trunc(E)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(h){return h!==Sm.BARCODE_ROW_UNKNOWN&&this.bucket===h%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(h){this.rowNumber=h}toString(){return this.rowNumber+"|"+this.value}}Sm.BARCODE_ROW_UNKNOWN=-1;class Ks{static initialize(){for(let h=0;h<Nr.SYMBOL_TABLE.length;h++){let g=Nr.SYMBOL_TABLE[h],v=g&1;for(let E=0;E<Nr.BARS_IN_MODULE;E++){let k=0;for(;(g&1)===v;)k+=1,g>>=1;v=g&1,Ks.RATIOS_TABLE[h]||(Ks.RATIOS_TABLE[h]=new Array(Nr.BARS_IN_MODULE)),Ks.RATIOS_TABLE[h][Nr.BARS_IN_MODULE-E-1]=Math.fround(k/Nr.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(h){let g=Ks.getDecodedCodewordValue(Ks.sampleBitCounts(h));return g!==-1?g:Ks.getClosestDecodedValue(h)}static sampleBitCounts(h){let g=ut.sum(h),v=new Int32Array(Nr.BARS_IN_MODULE),E=0,k=0;for(let T=0;T<Nr.MODULES_IN_CODEWORD;T++){let R=g/(2*Nr.MODULES_IN_CODEWORD)+T*g/Nr.MODULES_IN_CODEWORD;k+h[E]<=R&&(k+=h[E],E++),v[E]++}return v}static getDecodedCodewordValue(h){let g=Ks.getBitValue(h);return Nr.getCodeword(g)===-1?-1:g}static getBitValue(h){let g=0;for(let v=0;v<h.length;v++)for(let E=0;E<h[v];E++)g=g<<1|(v%2===0?1:0);return Math.trunc(g)}static getClosestDecodedValue(h){let g=ut.sum(h),v=new Array(Nr.BARS_IN_MODULE);if(g>1)for(let T=0;T<v.length;T++)v[T]=Math.fround(h[T]/g);let E=kt.MAX_VALUE,k=-1;this.bSymbolTableReady||Ks.initialize();for(let T=0;T<Ks.RATIOS_TABLE.length;T++){let R=0,F=Ks.RATIOS_TABLE[T];for(let U=0;U<Nr.BARS_IN_MODULE;U++){let Z=Math.fround(F[U]-v[U]);if(R+=Math.fround(Z*Z),R>=E)break}R<E&&(E=R,k=Nr.SYMBOL_TABLE[T])}return k}}Ks.bSymbolTableReady=!1,Ks.RATIOS_TABLE=new Array(Nr.SYMBOL_TABLE.length).map(se=>new Array(Nr.BARS_IN_MODULE));class Vb{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(h){this.segmentIndex=h}getFileId(){return this.fileId}setFileId(h){this.fileId=h}getOptionalData(){return this.optionalData}setOptionalData(h){this.optionalData=h}isLastSegment(){return this.lastSegment}setLastSegment(h){this.lastSegment=h}getSegmentCount(){return this.segmentCount}setSegmentCount(h){this.segmentCount=h}getSender(){return this.sender||null}setSender(h){this.sender=h}getAddressee(){return this.addressee||null}setAddressee(h){this.addressee=h}getFileName(){return this.fileName}setFileName(h){this.fileName=h}getFileSize(){return this.fileSize}setFileSize(h){this.fileSize=h}getChecksum(){return this.checksum}setChecksum(h){this.checksum=h}getTimestamp(){return this.timestamp}setTimestamp(h){this.timestamp=h}}class ok{static parseLong(h,g=void 0){return parseInt(h,g)}}class Na extends c{}Na.kind="NullPointerException";class qb{writeBytes(h){this.writeBytesOffset(h,0,h.length)}writeBytesOffset(h,g,v){if(h==null)throw new Na;if(g<0||g>h.length||v<0||g+v>h.length||g+v<0)throw new b;if(v===0)return;for(let E=0;E<v;E++)this.write(h[g+E])}flush(){}close(){}}class Rf extends c{}class lk extends qb{constructor(h=32){if(super(),this.count=0,h<0)throw new f("Negative initial size: "+h);this.buf=new Uint8Array(h)}ensureCapacity(h){h-this.buf.length>0&&this.grow(h)}grow(h){let v=this.buf.length<<1;if(v-h<0&&(v=h),v<0){if(h<0)throw new Rf;v=C.MAX_VALUE}this.buf=_.copyOfUint8Array(this.buf,v)}write(h){this.ensureCapacity(this.count+1),this.buf[this.count]=h,this.count+=1}writeBytesOffset(h,g,v){if(g<0||g>h.length||v<0||g+v-h.length>0)throw new b;this.ensureCapacity(this.count+v),y.arraycopy(h,g,this.buf,this.count,v),this.count+=v}writeTo(h){h.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return _.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(h){return h?typeof h=="string"?this.toString_string(h):this.toString_number(h):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(h){return new String(this.buf).toString()}toString_number(h){return new String(this.buf).toString()}close(){}}var Bn;(function(se){se[se.ALPHA=0]="ALPHA",se[se.LOWER=1]="LOWER",se[se.MIXED=2]="MIXED",se[se.PUNCT=3]="PUNCT",se[se.ALPHA_SHIFT=4]="ALPHA_SHIFT",se[se.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Bn||(Bn={}));function Io(){if(typeof window<"u")return window.BigInt||null;if(typeof Ve<"u")return Ve.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Em;function Tu(se){if(typeof Em>"u"&&(Em=Io()),Em===null)throw new Error("BigInt is not supported!");return Em(se)}function ck(){let se=[];se[0]=Tu(1);let h=Tu(900);se[1]=h;for(let g=2;g<16;g++)se[g]=se[g-1]*h;return se}class tt{static decode(h,g){let v=new ie(""),E=L.ISO8859_1;v.enableDecoding(E);let k=1,T=h[k++],R=new Vb;for(;k<h[0];){switch(T){case tt.TEXT_COMPACTION_MODE_LATCH:k=tt.textCompaction(h,k,v);break;case tt.BYTE_COMPACTION_MODE_LATCH:case tt.BYTE_COMPACTION_MODE_LATCH_6:k=tt.byteCompaction(T,h,E,k,v);break;case tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(h[k++]);break;case tt.NUMERIC_COMPACTION_MODE_LATCH:k=tt.numericCompaction(h,k,v);break;case tt.ECI_CHARSET:L.getCharacterSetECIByValue(h[k++]);break;case tt.ECI_GENERAL_PURPOSE:k+=2;break;case tt.ECI_USER_DEFINED:k++;break;case tt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:k=tt.decodeMacroBlock(h,k,R);break;case tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case tt.MACRO_PDF417_TERMINATOR:throw new O;default:k--,k=tt.textCompaction(h,k,v);break}if(k<h.length)T=h[k++];else throw O.getFormatInstance()}if(v.length()===0)throw O.getFormatInstance();let F=new ae(null,v.toString(),null,g);return F.setOther(R),F}static decodeMacroBlock(h,g,v){if(g+tt.NUMBER_OF_SEQUENCE_CODEWORDS>h[0])throw O.getFormatInstance();let E=new Int32Array(tt.NUMBER_OF_SEQUENCE_CODEWORDS);for(let R=0;R<tt.NUMBER_OF_SEQUENCE_CODEWORDS;R++,g++)E[R]=h[g];v.setSegmentIndex(C.parseInt(tt.decodeBase900toBase10(E,tt.NUMBER_OF_SEQUENCE_CODEWORDS)));let k=new ie;g=tt.textCompaction(h,g,k),v.setFileId(k.toString());let T=-1;for(h[g]===tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(T=g+1);g<h[0];)switch(h[g]){case tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(g++,h[g]){case tt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let R=new ie;g=tt.textCompaction(h,g+1,R),v.setFileName(R.toString());break;case tt.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let F=new ie;g=tt.textCompaction(h,g+1,F),v.setSender(F.toString());break;case tt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let U=new ie;g=tt.textCompaction(h,g+1,U),v.setAddressee(U.toString());break;case tt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let Z=new ie;g=tt.numericCompaction(h,g+1,Z),v.setSegmentCount(C.parseInt(Z.toString()));break;case tt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let oe=new ie;g=tt.numericCompaction(h,g+1,oe),v.setTimestamp(ok.parseLong(oe.toString()));break;case tt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let xe=new ie;g=tt.numericCompaction(h,g+1,xe),v.setChecksum(C.parseInt(xe.toString()));break;case tt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Oe=new ie;g=tt.numericCompaction(h,g+1,Oe),v.setFileSize(ok.parseLong(Oe.toString()));break;default:throw O.getFormatInstance()}break;case tt.MACRO_PDF417_TERMINATOR:g++,v.setLastSegment(!0);break;default:throw O.getFormatInstance()}if(T!==-1){let R=g-T;v.isLastSegment()&&R--,v.setOptionalData(_.copyOfRange(h,T,T+R))}return g}static textCompaction(h,g,v){let E=new Int32Array((h[0]-g)*2),k=new Int32Array((h[0]-g)*2),T=0,R=!1;for(;g<h[0]&&!R;){let F=h[g++];if(F<tt.TEXT_COMPACTION_MODE_LATCH)E[T]=F/30,E[T+1]=F%30,T+=2;else switch(F){case tt.TEXT_COMPACTION_MODE_LATCH:E[T++]=tt.TEXT_COMPACTION_MODE_LATCH;break;case tt.BYTE_COMPACTION_MODE_LATCH:case tt.BYTE_COMPACTION_MODE_LATCH_6:case tt.NUMERIC_COMPACTION_MODE_LATCH:case tt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case tt.MACRO_PDF417_TERMINATOR:g--,R=!0;break;case tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:E[T]=tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,F=h[g++],k[T]=F,T++;break}}return tt.decodeTextCompaction(E,k,T,v),g}static decodeTextCompaction(h,g,v,E){let k=Bn.ALPHA,T=Bn.ALPHA,R=0;for(;R<v;){let F=h[R],U="";switch(k){case Bn.ALPHA:if(F<26)U=String.fromCharCode(65+F);else switch(F){case 26:U=" ";break;case tt.LL:k=Bn.LOWER;break;case tt.ML:k=Bn.MIXED;break;case tt.PS:T=k,k=Bn.PUNCT_SHIFT;break;case tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:E.append(g[R]);break;case tt.TEXT_COMPACTION_MODE_LATCH:k=Bn.ALPHA;break}break;case Bn.LOWER:if(F<26)U=String.fromCharCode(97+F);else switch(F){case 26:U=" ";break;case tt.AS:T=k,k=Bn.ALPHA_SHIFT;break;case tt.ML:k=Bn.MIXED;break;case tt.PS:T=k,k=Bn.PUNCT_SHIFT;break;case tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:E.append(g[R]);break;case tt.TEXT_COMPACTION_MODE_LATCH:k=Bn.ALPHA;break}break;case Bn.MIXED:if(F<tt.PL)U=tt.MIXED_CHARS[F];else switch(F){case tt.PL:k=Bn.PUNCT;break;case 26:U=" ";break;case tt.LL:k=Bn.LOWER;break;case tt.AL:k=Bn.ALPHA;break;case tt.PS:T=k,k=Bn.PUNCT_SHIFT;break;case tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:E.append(g[R]);break;case tt.TEXT_COMPACTION_MODE_LATCH:k=Bn.ALPHA;break}break;case Bn.PUNCT:if(F<tt.PAL)U=tt.PUNCT_CHARS[F];else switch(F){case tt.PAL:k=Bn.ALPHA;break;case tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:E.append(g[R]);break;case tt.TEXT_COMPACTION_MODE_LATCH:k=Bn.ALPHA;break}break;case Bn.ALPHA_SHIFT:if(k=T,F<26)U=String.fromCharCode(65+F);else switch(F){case 26:U=" ";break;case tt.TEXT_COMPACTION_MODE_LATCH:k=Bn.ALPHA;break}break;case Bn.PUNCT_SHIFT:if(k=T,F<tt.PAL)U=tt.PUNCT_CHARS[F];else switch(F){case tt.PAL:k=Bn.ALPHA;break;case tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:E.append(g[R]);break;case tt.TEXT_COMPACTION_MODE_LATCH:k=Bn.ALPHA;break}break}U!==""&&E.append(U),R++}}static byteCompaction(h,g,v,E,k){let T=new lk,R=0,F=0,U=!1;switch(h){case tt.BYTE_COMPACTION_MODE_LATCH:let Z=new Int32Array(6),oe=g[E++];for(;E<g[0]&&!U;)switch(Z[R++]=oe,F=900*F+oe,oe=g[E++],oe){case tt.TEXT_COMPACTION_MODE_LATCH:case tt.BYTE_COMPACTION_MODE_LATCH:case tt.NUMERIC_COMPACTION_MODE_LATCH:case tt.BYTE_COMPACTION_MODE_LATCH_6:case tt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case tt.MACRO_PDF417_TERMINATOR:E--,U=!0;break;default:if(R%5===0&&R>0){for(let xe=0;xe<6;++xe)T.write(Number(Tu(F)>>Tu(8*(5-xe))));F=0,R=0}break}E===g[0]&&oe<tt.TEXT_COMPACTION_MODE_LATCH&&(Z[R++]=oe);for(let xe=0;xe<R;xe++)T.write(Z[xe]);break;case tt.BYTE_COMPACTION_MODE_LATCH_6:for(;E<g[0]&&!U;){let xe=g[E++];if(xe<tt.TEXT_COMPACTION_MODE_LATCH)R++,F=900*F+xe;else switch(xe){case tt.TEXT_COMPACTION_MODE_LATCH:case tt.BYTE_COMPACTION_MODE_LATCH:case tt.NUMERIC_COMPACTION_MODE_LATCH:case tt.BYTE_COMPACTION_MODE_LATCH_6:case tt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case tt.MACRO_PDF417_TERMINATOR:E--,U=!0;break}if(R%5===0&&R>0){for(let Oe=0;Oe<6;++Oe)T.write(Number(Tu(F)>>Tu(8*(5-Oe))));F=0,R=0}}break}return k.append(H.decode(T.toByteArray(),v)),E}static numericCompaction(h,g,v){let E=0,k=!1,T=new Int32Array(tt.MAX_NUMERIC_CODEWORDS);for(;g<h[0]&&!k;){let R=h[g++];if(g===h[0]&&(k=!0),R<tt.TEXT_COMPACTION_MODE_LATCH)T[E]=R,E++;else switch(R){case tt.TEXT_COMPACTION_MODE_LATCH:case tt.BYTE_COMPACTION_MODE_LATCH:case tt.BYTE_COMPACTION_MODE_LATCH_6:case tt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case tt.MACRO_PDF417_TERMINATOR:g--,k=!0;break}(E%tt.MAX_NUMERIC_CODEWORDS===0||R===tt.NUMERIC_COMPACTION_MODE_LATCH||k)&&E>0&&(v.append(tt.decodeBase900toBase10(T,E)),E=0)}return g}static decodeBase900toBase10(h,g){let v=Tu(0);for(let k=0;k<g;k++)v+=tt.EXP900[g-k-1]*Tu(h[k]);let E=v.toString();if(E.charAt(0)!=="1")throw new O;return E.substring(1)}}tt.TEXT_COMPACTION_MODE_LATCH=900,tt.BYTE_COMPACTION_MODE_LATCH=901,tt.NUMERIC_COMPACTION_MODE_LATCH=902,tt.BYTE_COMPACTION_MODE_LATCH_6=924,tt.ECI_USER_DEFINED=925,tt.ECI_GENERAL_PURPOSE=926,tt.ECI_CHARSET=927,tt.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,tt.MACRO_PDF417_TERMINATOR=922,tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,tt.MAX_NUMERIC_CODEWORDS=15,tt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,tt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,tt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,tt.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,tt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,tt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,tt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,tt.PL=25,tt.LL=27,tt.AS=27,tt.ML=28,tt.AL=28,tt.PS=29,tt.PAL=29,tt.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,tt.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",tt.EXP900=Io()?ck():[],tt.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Yr{constructor(){}static decode(h,g,v,E,k,T,R){let F=new Pf(h,g,v,E,k),U=null,Z=null,oe;for(let ce=!0;;ce=!1){if(g!=null&&(U=Yr.getRowIndicatorColumn(h,F,g,!0,T,R)),E!=null&&(Z=Yr.getRowIndicatorColumn(h,F,E,!1,T,R)),oe=Yr.merge(U,Z),oe==null)throw W.getNotFoundInstance();let be=oe.getBoundingBox();if(ce&&be!=null&&(be.getMinY()<F.getMinY()||be.getMaxY()>F.getMaxY()))F=be;else break}oe.setBoundingBox(F);let xe=oe.getBarcodeColumnCount()+1;oe.setDetectionResultColumn(0,U),oe.setDetectionResultColumn(xe,Z);let Oe=U!=null;for(let ce=1;ce<=xe;ce++){let be=Oe?ce:xe-ce;if(oe.getDetectionResultColumn(be)!==void 0)continue;let Ne;be===0||be===xe?Ne=new sk(F,be===0):Ne=new ym(F),oe.setDetectionResultColumn(be,Ne);let Be=-1,lt=Be;for(let gt=F.getMinY();gt<=F.getMaxY();gt++){if(Be=Yr.getStartColumn(oe,be,gt,Oe),Be<0||Be>F.getMaxX()){if(lt===-1)continue;Be=lt}let vt=Yr.detectCodeword(h,F.getMinX(),F.getMaxX(),Oe,Be,gt,T,R);vt!=null&&(Ne.setCodeword(gt,vt),lt=Be,T=Math.min(T,vt.getWidth()),R=Math.max(R,vt.getWidth()))}}return Yr.createDecoderResult(oe)}static merge(h,g){if(h==null&&g==null)return null;let v=Yr.getBarcodeMetadata(h,g);if(v==null)return null;let E=Pf.merge(Yr.adjustBoundingBox(h),Yr.adjustBoundingBox(g));return new wm(v,E)}static adjustBoundingBox(h){if(h==null)return null;let g=h.getRowHeights();if(g==null)return null;let v=Yr.getMax(g),E=0;for(let R of g)if(E+=v-R,R>0)break;let k=h.getCodewords();for(let R=0;E>0&&k[R]==null;R++)E--;let T=0;for(let R=g.length-1;R>=0&&(T+=v-g[R],!(g[R]>0));R--);for(let R=k.length-1;T>0&&k[R]==null;R--)T--;return h.getBoundingBox().addMissingRows(E,T,h.isLeft())}static getMax(h){let g=-1;for(let v of h)g=Math.max(g,v);return g}static getBarcodeMetadata(h,g){let v;if(h==null||(v=h.getBarcodeMetadata())==null)return g==null?null:g.getBarcodeMetadata();let E;return g==null||(E=g.getBarcodeMetadata())==null?v:v.getColumnCount()!==E.getColumnCount()&&v.getErrorCorrectionLevel()!==E.getErrorCorrectionLevel()&&v.getRowCount()!==E.getRowCount()?null:v}static getRowIndicatorColumn(h,g,v,E,k,T){let R=new sk(g,E);for(let F=0;F<2;F++){let U=F===0?1:-1,Z=Math.trunc(Math.trunc(v.getX()));for(let oe=Math.trunc(Math.trunc(v.getY()));oe<=g.getMaxY()&&oe>=g.getMinY();oe+=U){let xe=Yr.detectCodeword(h,0,h.getWidth(),E,Z,oe,k,T);xe!=null&&(R.setCodeword(oe,xe),E?Z=xe.getStartX():Z=xe.getEndX())}}return R}static adjustCodewordCount(h,g){let v=g[0][1],E=v.getValue(),k=h.getBarcodeColumnCount()*h.getBarcodeRowCount()-Yr.getNumberOfECCodeWords(h.getBarcodeECLevel());if(E.length===0){if(k<1||k>Nr.MAX_CODEWORDS_IN_BARCODE)throw W.getNotFoundInstance();v.setValue(k)}else E[0]!==k&&v.setValue(k)}static createDecoderResult(h){let g=Yr.createBarcodeMatrix(h);Yr.adjustCodewordCount(h,g);let v=new Array,E=new Int32Array(h.getBarcodeRowCount()*h.getBarcodeColumnCount()),k=[],T=new Array;for(let F=0;F<h.getBarcodeRowCount();F++)for(let U=0;U<h.getBarcodeColumnCount();U++){let Z=g[F][U+1].getValue(),oe=F*h.getBarcodeColumnCount()+U;Z.length===0?v.push(oe):Z.length===1?E[oe]=Z[0]:(T.push(oe),k.push(Z))}let R=new Array(k.length);for(let F=0;F<R.length;F++)R[F]=k[F];return Yr.createDecoderResultFromAmbiguousValues(h.getBarcodeECLevel(),E,Nr.toIntArray(v),Nr.toIntArray(T),R)}static createDecoderResultFromAmbiguousValues(h,g,v,E,k){let T=new Int32Array(E.length),R=100;for(;R-- >0;){for(let F=0;F<T.length;F++)g[E[F]]=k[F][T[F]];try{return Yr.decodeCodewords(g,h,v)}catch(F){if(!(F instanceof m))throw F}if(T.length===0)throw m.getChecksumInstance();for(let F=0;F<T.length;F++)if(T[F]<k[F].length-1){T[F]++;break}else if(T[F]=0,F===T.length-1)throw m.getChecksumInstance()}throw m.getChecksumInstance()}static createBarcodeMatrix(h){let g=Array.from({length:h.getBarcodeRowCount()},()=>new Array(h.getBarcodeColumnCount()+2));for(let E=0;E<g.length;E++)for(let k=0;k<g[E].length;k++)g[E][k]=new bm;let v=0;for(let E of h.getDetectionResultColumns()){if(E!=null){for(let k of E.getCodewords())if(k!=null){let T=k.getRowNumber();if(T>=0){if(T>=g.length)continue;g[T][v].setValue(k.getValue())}}}v++}return g}static isValidBarcodeColumn(h,g){return g>=0&&g<=h.getBarcodeColumnCount()+1}static getStartColumn(h,g,v,E){let k=E?1:-1,T=null;if(Yr.isValidBarcodeColumn(h,g-k)&&(T=h.getDetectionResultColumn(g-k).getCodeword(v)),T!=null)return E?T.getEndX():T.getStartX();if(T=h.getDetectionResultColumn(g).getCodewordNearby(v),T!=null)return E?T.getStartX():T.getEndX();if(Yr.isValidBarcodeColumn(h,g-k)&&(T=h.getDetectionResultColumn(g-k).getCodewordNearby(v)),T!=null)return E?T.getEndX():T.getStartX();let R=0;for(;Yr.isValidBarcodeColumn(h,g-k);){g-=k;for(let F of h.getDetectionResultColumn(g).getCodewords())if(F!=null)return(E?F.getEndX():F.getStartX())+k*R*(F.getEndX()-F.getStartX());R++}return E?h.getBoundingBox().getMinX():h.getBoundingBox().getMaxX()}static detectCodeword(h,g,v,E,k,T,R,F){k=Yr.adjustCodewordStartColumn(h,g,v,E,k,T);let U=Yr.getModuleBitCount(h,g,v,E,k,T);if(U==null)return null;let Z,oe=ut.sum(U);if(E)Z=k+oe;else{for(let ce=0;ce<U.length/2;ce++){let be=U[ce];U[ce]=U[U.length-1-ce],U[U.length-1-ce]=be}Z=k,k=Z-oe}if(!Yr.checkCodewordSkew(oe,R,F))return null;let xe=Ks.getDecodedValue(U),Oe=Nr.getCodeword(xe);return Oe===-1?null:new Sm(k,Z,Yr.getCodewordBucketNumber(xe),Oe)}static getModuleBitCount(h,g,v,E,k,T){let R=k,F=new Int32Array(8),U=0,Z=E?1:-1,oe=E;for(;(E?R<v:R>=g)&&U<F.length;)h.get(R,T)===oe?(F[U]++,R+=Z):(U++,oe=!oe);return U===F.length||R===(E?v:g)&&U===F.length-1?F:null}static getNumberOfECCodeWords(h){return 2<<h}static adjustCodewordStartColumn(h,g,v,E,k,T){let R=k,F=E?-1:1;for(let U=0;U<2;U++){for(;(E?R>=g:R<v)&&E===h.get(R,T);){if(Math.abs(k-R)>Yr.CODEWORD_SKEW_SIZE)return k;R+=F}F=-F,E=!E}return R}static checkCodewordSkew(h,g,v){return g-Yr.CODEWORD_SKEW_SIZE<=h&&h<=v+Yr.CODEWORD_SKEW_SIZE}static decodeCodewords(h,g,v){if(h.length===0)throw O.getFormatInstance();let E=1<<g+1,k=Yr.correctErrors(h,v,E);Yr.verifyCodewordCount(h,E);let T=tt.decode(h,""+g);return T.setErrorsCorrected(k),T.setErasures(v.length),T}static correctErrors(h,g,v){if(g!=null&&g.length>v/2+Yr.MAX_ERRORS||v<0||v>Yr.MAX_EC_CODEWORDS)throw m.getChecksumInstance();return Yr.errorCorrection.decode(h,v,g)}static verifyCodewordCount(h,g){if(h.length<4)throw O.getFormatInstance();let v=h[0];if(v>h.length)throw O.getFormatInstance();if(v===0)if(g<h.length)h[0]=h.length-g;else throw O.getFormatInstance()}static getBitCountForCodeword(h){let g=new Int32Array(8),v=0,E=g.length-1;for(;!((h&1)!==v&&(v=h&1,E--,E<0));)g[E]++,h>>=1;return g}static getCodewordBucketNumber(h){return h instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(h):this.getCodewordBucketNumber_number(h)}static getCodewordBucketNumber_number(h){return Yr.getCodewordBucketNumber(Yr.getBitCountForCodeword(h))}static getCodewordBucketNumber_Int32Array(h){return(h[0]-h[2]+h[4]-h[6]+9)%9}static toString(h){let g=new Ln;for(let v=0;v<h.length;v++){g.format("Row %2d: ",v);for(let E=0;E<h[v].length;E++){let k=h[v][E];k.getValue().length===0?g.format("        ",null):g.format("%4d(%2d)",k.getValue()[0],k.getConfidence(k.getValue()[0]))}g.format("%n")}return g.toString()}}Yr.CODEWORD_SKEW_SIZE=2,Yr.MAX_ERRORS=3,Yr.MAX_EC_CODEWORDS=512,Yr.errorCorrection=new ak;class Aa{decode(h,g=null){let v=Aa.decode(h,g,!1);if(v==null||v.length===0||v[0]==null)throw W.getNotFoundInstance();return v[0]}decodeMultiple(h,g=null){try{return Aa.decode(h,g,!0)}catch(v){throw v instanceof O||v instanceof m?W.getNotFoundInstance():v}}static decode(h,g,v){const E=new Array,k=Wr.detectMultiple(h,g,v);for(const T of k.getPoints()){const R=Yr.decode(k.getBits(),T[4],T[5],T[6],T[7],Aa.getMinCodewordWidth(T),Aa.getMaxCodewordWidth(T)),F=new G(R.getText(),R.getRawBytes(),void 0,T,ne.PDF_417);F.putMetadata(re.ERROR_CORRECTION_LEVEL,R.getECLevel());const U=R.getOther();U!=null&&F.putMetadata(re.PDF417_EXTRA_METADATA,U),E.push(F)}return E.map(T=>T)}static getMaxWidth(h,g){return h==null||g==null?0:Math.trunc(Math.abs(h.getX()-g.getX()))}static getMinWidth(h,g){return h==null||g==null?C.MAX_VALUE:Math.trunc(Math.abs(h.getX()-g.getX()))}static getMaxCodewordWidth(h){return Math.floor(Math.max(Math.max(Aa.getMaxWidth(h[0],h[4]),Aa.getMaxWidth(h[6],h[2])*Nr.MODULES_IN_CODEWORD/Nr.MODULES_IN_STOP_PATTERN),Math.max(Aa.getMaxWidth(h[1],h[5]),Aa.getMaxWidth(h[7],h[3])*Nr.MODULES_IN_CODEWORD/Nr.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(h){return Math.floor(Math.min(Math.min(Aa.getMinWidth(h[0],h[4]),Aa.getMinWidth(h[6],h[2])*Nr.MODULES_IN_CODEWORD/Nr.MODULES_IN_STOP_PATTERN),Math.min(Aa.getMinWidth(h[1],h[5]),Aa.getMinWidth(h[7],h[3])*Nr.MODULES_IN_CODEWORD/Nr.MODULES_IN_STOP_PATTERN)))}reset(){}}class rs extends c{}rs.kind="ReaderException";class uk{constructor(h,g){this.verbose=h===!0,g&&this.setHints(g)}decode(h,g){return g&&this.setHints(g),this.decodeInternal(h)}decodeWithState(h){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(h)}setHints(h){this.hints=h;const g=!n(h)&&h.get(P.TRY_HARDER)===!0,v=n(h)?null:h.get(P.POSSIBLE_FORMATS),E=new Array;if(!n(v)){const k=v.some(T=>T===ne.UPC_A||T===ne.UPC_E||T===ne.EAN_13||T===ne.EAN_8||T===ne.CODABAR||T===ne.CODE_39||T===ne.CODE_93||T===ne.CODE_128||T===ne.ITF||T===ne.RSS_14||T===ne.RSS_EXPANDED);k&&!g&&E.push(new No(h,this.verbose)),v.includes(ne.QR_CODE)&&E.push(new _d),v.includes(ne.DATA_MATRIX)&&E.push(new Ul),v.includes(ne.AZTEC)&&E.push(new Te),v.includes(ne.PDF_417)&&E.push(new Aa),k&&g&&E.push(new No(h,this.verbose))}E.length===0&&(g||E.push(new No(h,this.verbose)),E.push(new _d),E.push(new Ul),E.push(new Te),E.push(new Aa),g&&E.push(new No(h,this.verbose))),this.readers=E}reset(){if(this.readers!==null)for(const h of this.readers)h.reset()}decodeInternal(h){if(this.readers===null)throw new rs("No readers where selected, nothing can be read.");for(const g of this.readers)try{return g.decode(h,this.hints)}catch(v){if(v instanceof rs)continue}throw new W("No MultiFormat Readers were able to detect the code.")}}class al extends de{constructor(h=null,g=500){const v=new uk;v.setHints(h),super(v,g)}decodeBitmap(h){return this.reader.decodeWithState(h)}}class VP extends de{constructor(h=500){super(new Aa,h)}}class dk extends de{constructor(h=500){super(new _d,h)}}var _c;(function(se){se[se.ERROR_CORRECTION=0]="ERROR_CORRECTION",se[se.CHARACTER_SET=1]="CHARACTER_SET",se[se.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",se[se.MIN_SIZE=3]="MIN_SIZE",se[se.MAX_SIZE=4]="MAX_SIZE",se[se.MARGIN=5]="MARGIN",se[se.PDF417_COMPACT=6]="PDF417_COMPACT",se[se.PDF417_COMPACTION=7]="PDF417_COMPACTION",se[se.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",se[se.AZTEC_LAYERS=9]="AZTEC_LAYERS",se[se.QR_VERSION=10]="QR_VERSION"})(_c||(_c={}));var ji=_c;class Cm{constructor(h){this.field=h,this.cachedGenerators=[],this.cachedGenerators.push(new Ee(h,Int32Array.from([1])))}buildGenerator(h){const g=this.cachedGenerators;if(h>=g.length){let v=g[g.length-1];const E=this.field;for(let k=g.length;k<=h;k++){const T=v.multiply(new Ee(E,Int32Array.from([1,E.exp(k-1+E.getGeneratorBase())])));g.push(T),v=T}}return g[h]}encode(h,g){if(g===0)throw new f("No error correction bytes");const v=h.length-g;if(v<=0)throw new f("No data bytes provided");const E=this.buildGenerator(g),k=new Int32Array(v);y.arraycopy(h,0,k,0,v);let T=new Ee(this.field,k);T=T.multiplyByMonomial(g,1);const F=T.divide(E)[1].getCoefficients(),U=g-F.length;for(let Z=0;Z<U;Z++)h[v+Z]=0;y.arraycopy(F,0,h,v+U,F.length)}}class Lr{constructor(){}static applyMaskPenaltyRule1(h){return Lr.applyMaskPenaltyRule1Internal(h,!0)+Lr.applyMaskPenaltyRule1Internal(h,!1)}static applyMaskPenaltyRule2(h){let g=0;const v=h.getArray(),E=h.getWidth(),k=h.getHeight();for(let T=0;T<k-1;T++){const R=v[T];for(let F=0;F<E-1;F++){const U=R[F];U===R[F+1]&&U===v[T+1][F]&&U===v[T+1][F+1]&&g++}}return Lr.N2*g}static applyMaskPenaltyRule3(h){let g=0;const v=h.getArray(),E=h.getWidth(),k=h.getHeight();for(let T=0;T<k;T++)for(let R=0;R<E;R++){const F=v[T];R+6<E&&F[R]===1&&F[R+1]===0&&F[R+2]===1&&F[R+3]===1&&F[R+4]===1&&F[R+5]===0&&F[R+6]===1&&(Lr.isWhiteHorizontal(F,R-4,R)||Lr.isWhiteHorizontal(F,R+7,R+11))&&g++,T+6<k&&v[T][R]===1&&v[T+1][R]===0&&v[T+2][R]===1&&v[T+3][R]===1&&v[T+4][R]===1&&v[T+5][R]===0&&v[T+6][R]===1&&(Lr.isWhiteVertical(v,R,T-4,T)||Lr.isWhiteVertical(v,R,T+7,T+11))&&g++}return g*Lr.N3}static isWhiteHorizontal(h,g,v){g=Math.max(g,0),v=Math.min(v,h.length);for(let E=g;E<v;E++)if(h[E]===1)return!1;return!0}static isWhiteVertical(h,g,v,E){v=Math.max(v,0),E=Math.min(E,h.length);for(let k=v;k<E;k++)if(h[k][g]===1)return!1;return!0}static applyMaskPenaltyRule4(h){let g=0;const v=h.getArray(),E=h.getWidth(),k=h.getHeight();for(let F=0;F<k;F++){const U=v[F];for(let Z=0;Z<E;Z++)U[Z]===1&&g++}const T=h.getHeight()*h.getWidth();return Math.floor(Math.abs(g*2-T)*10/T)*Lr.N4}static getDataMaskBit(h,g,v){let E,k;switch(h){case 0:E=v+g&1;break;case 1:E=v&1;break;case 2:E=g%3;break;case 3:E=(v+g)%3;break;case 4:E=Math.floor(v/2)+Math.floor(g/3)&1;break;case 5:k=v*g,E=(k&1)+k%3;break;case 6:k=v*g,E=(k&1)+k%3&1;break;case 7:k=v*g,E=k%3+(v+g&1)&1;break;default:throw new f("Invalid mask pattern: "+h)}return E===0}static applyMaskPenaltyRule1Internal(h,g){let v=0;const E=g?h.getHeight():h.getWidth(),k=g?h.getWidth():h.getHeight(),T=h.getArray();for(let R=0;R<E;R++){let F=0,U=-1;for(let Z=0;Z<k;Z++){const oe=g?T[R][Z]:T[Z][R];oe===U?F++:(F>=5&&(v+=Lr.N1+(F-5)),F=1,U=oe)}F>=5&&(v+=Lr.N1+(F-5))}return v}}Lr.N1=3,Lr.N2=3,Lr.N3=40,Lr.N4=10;class $l{constructor(h,g){this.width=h,this.height=g;const v=new Array(g);for(let E=0;E!==g;E++)v[E]=new Uint8Array(h);this.bytes=v}getHeight(){return this.height}getWidth(){return this.width}get(h,g){return this.bytes[g][h]}getArray(){return this.bytes}setNumber(h,g,v){this.bytes[g][h]=v}setBoolean(h,g,v){this.bytes[g][h]=v?1:0}clear(h){for(const g of this.bytes)_.fill(g,h)}equals(h){if(!(h instanceof $l))return!1;const g=h;if(this.width!==g.width||this.height!==g.height)return!1;for(let v=0,E=this.height;v<E;++v){const k=this.bytes[v],T=g.bytes[v];for(let R=0,F=this.width;R<F;++R)if(k[R]!==T[R])return!1}return!0}toString(){const h=new ie;for(let g=0,v=this.height;g<v;++g){const E=this.bytes[g];for(let k=0,T=this.width;k<T;++k)switch(E[k]){case 0:h.append(" 0");break;case 1:h.append(" 1");break;default:h.append("  ");break}h.append(`
`)}return h.toString()}}class Iu{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const h=new ie;return h.append(`<<
`),h.append(" mode: "),h.append(this.mode?this.mode.toString():"null"),h.append(`
 ecLevel: `),h.append(this.ecLevel?this.ecLevel.toString():"null"),h.append(`
 version: `),h.append(this.version?this.version.toString():"null"),h.append(`
 maskPattern: `),h.append(this.maskPattern.toString()),this.matrix?(h.append(`
 matrix:
`),h.append(this.matrix.toString())):h.append(`
 matrix: null
`),h.append(`>>
`),h.toString()}setMode(h){this.mode=h}setECLevel(h){this.ecLevel=h}setVersion(h){this.version=h}setMaskPattern(h){this.maskPattern=h}setMatrix(h){this.matrix=h}static isValidMaskPattern(h){return h>=0&&h<Iu.NUM_MASK_PATTERNS}}Iu.NUM_MASK_PATTERNS=8;class ei extends c{}ei.kind="WriterException";class gr{constructor(){}static clearMatrix(h){h.clear(255)}static buildMatrix(h,g,v,E,k){gr.clearMatrix(k),gr.embedBasicPatterns(v,k),gr.embedTypeInfo(g,E,k),gr.maybeEmbedVersionInfo(v,k),gr.embedDataBits(h,E,k)}static embedBasicPatterns(h,g){gr.embedPositionDetectionPatternsAndSeparators(g),gr.embedDarkDotAtLeftBottomCorner(g),gr.maybeEmbedPositionAdjustmentPatterns(h,g),gr.embedTimingPatterns(g)}static embedTypeInfo(h,g,v){const E=new A;gr.makeTypeInfoBits(h,g,E);for(let k=0,T=E.getSize();k<T;++k){const R=E.get(E.getSize()-1-k),F=gr.TYPE_INFO_COORDINATES[k],U=F[0],Z=F[1];if(v.setBoolean(U,Z,R),k<8){const oe=v.getWidth()-k-1;v.setBoolean(oe,8,R)}else{const xe=v.getHeight()-7+(k-8);v.setBoolean(8,xe,R)}}}static maybeEmbedVersionInfo(h,g){if(h.getVersionNumber()<7)return;const v=new A;gr.makeVersionInfoBits(h,v);let E=6*3-1;for(let k=0;k<6;++k)for(let T=0;T<3;++T){const R=v.get(E);E--,g.setBoolean(k,g.getHeight()-11+T,R),g.setBoolean(g.getHeight()-11+T,k,R)}}static embedDataBits(h,g,v){let E=0,k=-1,T=v.getWidth()-1,R=v.getHeight()-1;for(;T>0;){for(T===6&&(T-=1);R>=0&&R<v.getHeight();){for(let F=0;F<2;++F){const U=T-F;if(!gr.isEmpty(v.get(U,R)))continue;let Z;E<h.getSize()?(Z=h.get(E),++E):Z=!1,g!==255&&Lr.getDataMaskBit(g,U,R)&&(Z=!Z),v.setBoolean(U,R,Z)}R+=k}k=-k,R+=k,T-=2}if(E!==h.getSize())throw new ei("Not all bits consumed: "+E+"/"+h.getSize())}static findMSBSet(h){return 32-C.numberOfLeadingZeros(h)}static calculateBCHCode(h,g){if(g===0)throw new f("0 polynomial");const v=gr.findMSBSet(g);for(h<<=v-1;gr.findMSBSet(h)>=v;)h^=g<<gr.findMSBSet(h)-v;return h}static makeTypeInfoBits(h,g,v){if(!Iu.isValidMaskPattern(g))throw new ei("Invalid mask pattern");const E=h.getBits()<<3|g;v.appendBits(E,5);const k=gr.calculateBCHCode(E,gr.TYPE_INFO_POLY);v.appendBits(k,10);const T=new A;if(T.appendBits(gr.TYPE_INFO_MASK_PATTERN,15),v.xor(T),v.getSize()!==15)throw new ei("should not happen but we got: "+v.getSize())}static makeVersionInfoBits(h,g){g.appendBits(h.getVersionNumber(),6);const v=gr.calculateBCHCode(h.getVersionNumber(),gr.VERSION_INFO_POLY);if(g.appendBits(v,12),g.getSize()!==18)throw new ei("should not happen but we got: "+g.getSize())}static isEmpty(h){return h===255}static embedTimingPatterns(h){for(let g=8;g<h.getWidth()-8;++g){const v=(g+1)%2;gr.isEmpty(h.get(g,6))&&h.setNumber(g,6,v),gr.isEmpty(h.get(6,g))&&h.setNumber(6,g,v)}}static embedDarkDotAtLeftBottomCorner(h){if(h.get(8,h.getHeight()-8)===0)throw new ei;h.setNumber(8,h.getHeight()-8,1)}static embedHorizontalSeparationPattern(h,g,v){for(let E=0;E<8;++E){if(!gr.isEmpty(v.get(h+E,g)))throw new ei;v.setNumber(h+E,g,0)}}static embedVerticalSeparationPattern(h,g,v){for(let E=0;E<7;++E){if(!gr.isEmpty(v.get(h,g+E)))throw new ei;v.setNumber(h,g+E,0)}}static embedPositionAdjustmentPattern(h,g,v){for(let E=0;E<5;++E){const k=gr.POSITION_ADJUSTMENT_PATTERN[E];for(let T=0;T<5;++T)v.setNumber(h+T,g+E,k[T])}}static embedPositionDetectionPattern(h,g,v){for(let E=0;E<7;++E){const k=gr.POSITION_DETECTION_PATTERN[E];for(let T=0;T<7;++T)v.setNumber(h+T,g+E,k[T])}}static embedPositionDetectionPatternsAndSeparators(h){const g=gr.POSITION_DETECTION_PATTERN[0].length;gr.embedPositionDetectionPattern(0,0,h),gr.embedPositionDetectionPattern(h.getWidth()-g,0,h),gr.embedPositionDetectionPattern(0,h.getWidth()-g,h);const v=8;gr.embedHorizontalSeparationPattern(0,v-1,h),gr.embedHorizontalSeparationPattern(h.getWidth()-v,v-1,h),gr.embedHorizontalSeparationPattern(0,h.getWidth()-v,h);const E=7;gr.embedVerticalSeparationPattern(E,0,h),gr.embedVerticalSeparationPattern(h.getHeight()-E-1,0,h),gr.embedVerticalSeparationPattern(E,h.getHeight()-E,h)}static maybeEmbedPositionAdjustmentPatterns(h,g){if(h.getVersionNumber()<2)return;const v=h.getVersionNumber()-1,E=gr.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[v];for(let k=0,T=E.length;k!==T;k++){const R=E[k];if(R>=0)for(let F=0;F!==T;F++){const U=E[F];U>=0&&gr.isEmpty(g.get(U,R))&&gr.embedPositionAdjustmentPattern(U-2,R-2,g)}}}}gr.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),gr.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),gr.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),gr.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),gr.VERSION_INFO_POLY=7973,gr.TYPE_INFO_POLY=1335,gr.TYPE_INFO_MASK_PATTERN=21522;class qP{constructor(h,g){this.dataBytes=h,this.errorCorrectionBytes=g}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class hi{constructor(){}static calculateMaskPenalty(h){return Lr.applyMaskPenaltyRule1(h)+Lr.applyMaskPenaltyRule2(h)+Lr.applyMaskPenaltyRule3(h)+Lr.applyMaskPenaltyRule4(h)}static encode(h,g,v=null){let E=hi.DEFAULT_BYTE_MODE_ENCODING;const k=v!==null&&v.get(ji.CHARACTER_SET)!==void 0;k&&(E=v.get(ji.CHARACTER_SET).toString());const T=this.chooseMode(h,E),R=new A;if(T===mr.BYTE&&(k||hi.DEFAULT_BYTE_MODE_ENCODING!==E)){const gt=L.getCharacterSetECIByName(E);gt!==void 0&&this.appendECI(gt,R)}this.appendModeInfo(T,R);const F=new A;this.appendBytes(h,T,F,E);let U;if(v!==null&&v.get(ji.QR_VERSION)!==void 0){const gt=Number.parseInt(v.get(ji.QR_VERSION).toString(),10);U=ar.getVersionForNumber(gt);const vt=this.calculateBitsNeeded(T,R,F,U);if(!this.willFit(vt,U,g))throw new ei("Data too big for requested version")}else U=this.recommendVersion(g,T,R,F);const Z=new A;Z.appendBitArray(R);const oe=T===mr.BYTE?F.getSizeInBytes():h.length;this.appendLengthInfo(oe,U,T,Z),Z.appendBitArray(F);const xe=U.getECBlocksForLevel(g),Oe=U.getTotalCodewords()-xe.getTotalECCodewords();this.terminateBits(Oe,Z);const ce=this.interleaveWithECBytes(Z,U.getTotalCodewords(),Oe,xe.getNumBlocks()),be=new Iu;be.setECLevel(g),be.setMode(T),be.setVersion(U);const Ne=U.getDimensionForVersion(),Be=new $l(Ne,Ne),lt=this.chooseMaskPattern(ce,g,U,Be);return be.setMaskPattern(lt),gr.buildMatrix(ce,g,U,lt,Be),be.setMatrix(Be),be}static recommendVersion(h,g,v,E){const k=this.calculateBitsNeeded(g,v,E,ar.getVersionForNumber(1)),T=this.chooseVersion(k,h),R=this.calculateBitsNeeded(g,v,E,T);return this.chooseVersion(R,h)}static calculateBitsNeeded(h,g,v,E){return g.getSize()+h.getCharacterCountBits(E)+v.getSize()}static getAlphanumericCode(h){return h<hi.ALPHANUMERIC_TABLE.length?hi.ALPHANUMERIC_TABLE[h]:-1}static chooseMode(h,g=null){if(L.SJIS.getName()===g&&this.isOnlyDoubleByteKanji(h))return mr.KANJI;let v=!1,E=!1;for(let k=0,T=h.length;k<T;++k){const R=h.charAt(k);if(hi.isDigit(R))v=!0;else if(this.getAlphanumericCode(R.charCodeAt(0))!==-1)E=!0;else return mr.BYTE}return E?mr.ALPHANUMERIC:v?mr.NUMERIC:mr.BYTE}static isOnlyDoubleByteKanji(h){let g;try{g=H.encode(h,L.SJIS)}catch{return!1}const v=g.length;if(v%2!==0)return!1;for(let E=0;E<v;E+=2){const k=g[E]&255;if((k<129||k>159)&&(k<224||k>235))return!1}return!0}static chooseMaskPattern(h,g,v,E){let k=Number.MAX_SAFE_INTEGER,T=-1;for(let R=0;R<Iu.NUM_MASK_PATTERNS;R++){gr.buildMatrix(h,g,v,R,E);let F=this.calculateMaskPenalty(E);F<k&&(k=F,T=R)}return T}static chooseVersion(h,g){for(let v=1;v<=40;v++){const E=ar.getVersionForNumber(v);if(hi.willFit(h,E,g))return E}throw new ei("Data too big")}static willFit(h,g,v){const E=g.getTotalCodewords(),T=g.getECBlocksForLevel(v).getTotalECCodewords(),R=E-T,F=(h+7)/8;return R>=F}static terminateBits(h,g){const v=h*8;if(g.getSize()>v)throw new ei("data bits cannot fit in the QR Code"+g.getSize()+" > "+v);for(let T=0;T<4&&g.getSize()<v;++T)g.appendBit(!1);const E=g.getSize()&7;if(E>0)for(let T=E;T<8;T++)g.appendBit(!1);const k=h-g.getSizeInBytes();for(let T=0;T<k;++T)g.appendBits(T&1?17:236,8);if(g.getSize()!==v)throw new ei("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(h,g,v,E,k,T){if(E>=v)throw new ei("Block ID too large");const R=h%v,F=v-R,U=Math.floor(h/v),Z=U+1,oe=Math.floor(g/v),xe=oe+1,Oe=U-oe,ce=Z-xe;if(Oe!==ce)throw new ei("EC bytes mismatch");if(v!==F+R)throw new ei("RS blocks mismatch");if(h!==(oe+Oe)*F+(xe+ce)*R)throw new ei("Total bytes mismatch");E<F?(k[0]=oe,T[0]=Oe):(k[0]=xe,T[0]=ce)}static interleaveWithECBytes(h,g,v,E){if(h.getSizeInBytes()!==v)throw new ei("Number of bits and data bytes does not match");let k=0,T=0,R=0;const F=new Array;for(let Z=0;Z<E;++Z){const oe=new Int32Array(1),xe=new Int32Array(1);hi.getNumDataBytesAndNumECBytesForBlockID(g,v,E,Z,oe,xe);const Oe=oe[0],ce=new Uint8Array(Oe);h.toBytes(8*k,ce,0,Oe);const be=hi.generateECBytes(ce,xe[0]);F.push(new qP(ce,be)),T=Math.max(T,Oe),R=Math.max(R,be.length),k+=oe[0]}if(v!==k)throw new ei("Data bytes does not match offset");const U=new A;for(let Z=0;Z<T;++Z)for(const oe of F){const xe=oe.getDataBytes();Z<xe.length&&U.appendBits(xe[Z],8)}for(let Z=0;Z<R;++Z)for(const oe of F){const xe=oe.getErrorCorrectionBytes();Z<xe.length&&U.appendBits(xe[Z],8)}if(g!==U.getSizeInBytes())throw new ei("Interleaving error: "+g+" and "+U.getSizeInBytes()+" differ.");return U}static generateECBytes(h,g){const v=h.length,E=new Int32Array(v+g);for(let T=0;T<v;T++)E[T]=h[T]&255;new Cm(Ae.QR_CODE_FIELD_256).encode(E,g);const k=new Uint8Array(g);for(let T=0;T<g;T++)k[T]=E[v+T];return k}static appendModeInfo(h,g){g.appendBits(h.getBits(),4)}static appendLengthInfo(h,g,v,E){const k=v.getCharacterCountBits(g);if(h>=1<<k)throw new ei(h+" is bigger than "+((1<<k)-1));E.appendBits(h,k)}static appendBytes(h,g,v,E){switch(g){case mr.NUMERIC:hi.appendNumericBytes(h,v);break;case mr.ALPHANUMERIC:hi.appendAlphanumericBytes(h,v);break;case mr.BYTE:hi.append8BitBytes(h,v,E);break;case mr.KANJI:hi.appendKanjiBytes(h,v);break;default:throw new ei("Invalid mode: "+g)}}static getDigit(h){return h.charCodeAt(0)-48}static isDigit(h){const g=hi.getDigit(h);return g>=0&&g<=9}static appendNumericBytes(h,g){const v=h.length;let E=0;for(;E<v;){const k=hi.getDigit(h.charAt(E));if(E+2<v){const T=hi.getDigit(h.charAt(E+1)),R=hi.getDigit(h.charAt(E+2));g.appendBits(k*100+T*10+R,10),E+=3}else if(E+1<v){const T=hi.getDigit(h.charAt(E+1));g.appendBits(k*10+T,7),E+=2}else g.appendBits(k,4),E++}}static appendAlphanumericBytes(h,g){const v=h.length;let E=0;for(;E<v;){const k=hi.getAlphanumericCode(h.charCodeAt(E));if(k===-1)throw new ei;if(E+1<v){const T=hi.getAlphanumericCode(h.charCodeAt(E+1));if(T===-1)throw new ei;g.appendBits(k*45+T,11),E+=2}else g.appendBits(k,6),E++}}static append8BitBytes(h,g,v){let E;try{E=H.encode(h,v)}catch(k){throw new ei(k)}for(let k=0,T=E.length;k!==T;k++){const R=E[k];g.appendBits(R,8)}}static appendKanjiBytes(h,g){let v;try{v=H.encode(h,L.SJIS)}catch(k){throw new ei(k)}const E=v.length;for(let k=0;k<E;k+=2){const T=v[k]&255,R=v[k+1]&255,F=T<<8&4294967295|R;let U=-1;if(F>=33088&&F<=40956?U=F-33088:F>=57408&&F<=60351&&(U=F-49472),U===-1)throw new ei("Invalid byte sequence");const Z=(U>>8)*192+(U&255);g.appendBits(Z,13)}}static appendECI(h,g){g.appendBits(mr.ECI.getBits(),4),g.appendBits(h.getValue(),8)}}hi.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),hi.DEFAULT_BYTE_MODE_ENCODING=L.UTF8.getName();class jf{write(h,g,v,E=null){if(h.length===0)throw new f("Found empty contents");if(g<0||v<0)throw new f("Requested dimensions are too small: "+g+"x"+v);let k=Zn.L,T=jf.QUIET_ZONE_SIZE;E!==null&&(E.get(ji.ERROR_CORRECTION)!==void 0&&(k=Zn.fromString(E.get(ji.ERROR_CORRECTION).toString())),E.get(ji.MARGIN)!==void 0&&(T=Number.parseInt(E.get(ji.MARGIN).toString(),10)));const R=hi.encode(h,k,E);return this.renderResult(R,g,v,T)}writeToDom(h,g,v,E,k=null){typeof h=="string"&&(h=document.querySelector(h));const T=this.write(g,v,E,k);h&&h.appendChild(T)}renderResult(h,g,v,E){const k=h.getMatrix();if(k===null)throw new ze;const T=k.getWidth(),R=k.getHeight(),F=T+E*2,U=R+E*2,Z=Math.max(g,F),oe=Math.max(v,U),xe=Math.min(Math.floor(Z/F),Math.floor(oe/U)),Oe=Math.floor((Z-T*xe)/2),ce=Math.floor((oe-R*xe)/2),be=this.createSVGElement(Z,oe);for(let Ne=0,Be=ce;Ne<R;Ne++,Be+=xe)for(let lt=0,gt=Oe;lt<T;lt++,gt+=xe)if(k.get(lt,Ne)===1){const vt=this.createSvgRectElement(gt,Be,xe,xe);be.appendChild(vt)}return be}createSVGElement(h,g){const v=document.createElementNS(jf.SVG_NS,"svg");return v.setAttributeNS(null,"height",h.toString()),v.setAttributeNS(null,"width",g.toString()),v}createSvgRectElement(h,g,v,E){const k=document.createElementNS(jf.SVG_NS,"rect");return k.setAttributeNS(null,"x",h.toString()),k.setAttributeNS(null,"y",g.toString()),k.setAttributeNS(null,"height",v.toString()),k.setAttributeNS(null,"width",E.toString()),k.setAttributeNS(null,"fill","#000000"),k}}jf.QUIET_ZONE_SIZE=4,jf.SVG_NS="http://www.w3.org/2000/svg";class Df{encode(h,g,v,E,k){if(h.length===0)throw new f("Found empty contents");if(g!==ne.QR_CODE)throw new f("Can only encode QR_CODE, but got "+g);if(v<0||E<0)throw new f(`Requested dimensions are too small: ${v}x${E}`);let T=Zn.L,R=Df.QUIET_ZONE_SIZE;k!==null&&(k.get(ji.ERROR_CORRECTION)!==void 0&&(T=Zn.fromString(k.get(ji.ERROR_CORRECTION).toString())),k.get(ji.MARGIN)!==void 0&&(R=Number.parseInt(k.get(ji.MARGIN).toString(),10)));const F=hi.encode(h,T,k);return Df.renderResult(F,v,E,R)}static renderResult(h,g,v,E){const k=h.getMatrix();if(k===null)throw new ze;const T=k.getWidth(),R=k.getHeight(),F=T+E*2,U=R+E*2,Z=Math.max(g,F),oe=Math.max(v,U),xe=Math.min(Math.floor(Z/F),Math.floor(oe/U)),Oe=Math.floor((Z-T*xe)/2),ce=Math.floor((oe-R*xe)/2),be=new X(Z,oe);for(let Ne=0,Be=ce;Ne<R;Ne++,Be+=xe)for(let lt=0,gt=Oe;lt<T;lt++,gt+=xe)k.get(lt,Ne)===1&&be.setRegion(gt,Be,xe,xe);return be}}Df.QUIET_ZONE_SIZE=4;class b1{encode(h,g,v,E,k){let T;switch(g){case ne.QR_CODE:T=new Df;break;default:throw new f("No encoder available for format "+g)}return T.encode(h,g,v,E,k)}}class Ts extends J{constructor(h,g,v,E,k,T,R,F){if(super(T,R),this.yuvData=h,this.dataWidth=g,this.dataHeight=v,this.left=E,this.top=k,E+T>g||k+R>v)throw new f("Crop rectangle does not fit within image data.");F&&this.reverseHorizontal(T,R)}getRow(h,g){if(h<0||h>=this.getHeight())throw new f("Requested row is outside the image: "+h);const v=this.getWidth();(g==null||g.length<v)&&(g=new Uint8ClampedArray(v));const E=(h+this.top)*this.dataWidth+this.left;return y.arraycopy(this.yuvData,E,g,0,v),g}getMatrix(){const h=this.getWidth(),g=this.getHeight();if(h===this.dataWidth&&g===this.dataHeight)return this.yuvData;const v=h*g,E=new Uint8ClampedArray(v);let k=this.top*this.dataWidth+this.left;if(h===this.dataWidth)return y.arraycopy(this.yuvData,k,E,0,v),E;for(let T=0;T<g;T++){const R=T*h;y.arraycopy(this.yuvData,k,E,R,h),k+=this.dataWidth}return E}isCropSupported(){return!0}crop(h,g,v,E){return new Ts(this.yuvData,this.dataWidth,this.dataHeight,this.left+h,this.top+g,v,E,!1)}renderThumbnail(){const h=this.getWidth()/Ts.THUMBNAIL_SCALE_FACTOR,g=this.getHeight()/Ts.THUMBNAIL_SCALE_FACTOR,v=new Int32Array(h*g),E=this.yuvData;let k=this.top*this.dataWidth+this.left;for(let T=0;T<g;T++){const R=T*h;for(let F=0;F<h;F++){const U=E[k+F*Ts.THUMBNAIL_SCALE_FACTOR]&255;v[R+F]=4278190080|U*65793}k+=this.dataWidth*Ts.THUMBNAIL_SCALE_FACTOR}return v}getThumbnailWidth(){return this.getWidth()/Ts.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Ts.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(h,g){const v=this.yuvData;for(let E=0,k=this.top*this.dataWidth+this.left;E<g;E++,k+=this.dataWidth){const T=k+h/2;for(let R=k,F=k+h-1;R<T;R++,F--){const U=v[R];v[R]=v[F],v[F]=U}}}invert(){return new Y(this)}}Ts.THUMBNAIL_SCALE_FACTOR=2;class Gb extends J{constructor(h,g,v,E,k,T,R){if(super(g,v),this.dataWidth=E,this.dataHeight=k,this.left=T,this.top=R,h.BYTES_PER_ELEMENT===4){const F=g*v,U=new Uint8ClampedArray(F);for(let Z=0;Z<F;Z++){const oe=h[Z],xe=oe>>16&255,Oe=oe>>7&510,ce=oe&255;U[Z]=(xe+Oe+ce)/4&255}this.luminances=U}else this.luminances=h;if(E===void 0&&(this.dataWidth=g),k===void 0&&(this.dataHeight=v),T===void 0&&(this.left=0),R===void 0&&(this.top=0),this.left+g>this.dataWidth||this.top+v>this.dataHeight)throw new f("Crop rectangle does not fit within image data.")}getRow(h,g){if(h<0||h>=this.getHeight())throw new f("Requested row is outside the image: "+h);const v=this.getWidth();(g==null||g.length<v)&&(g=new Uint8ClampedArray(v));const E=(h+this.top)*this.dataWidth+this.left;return y.arraycopy(this.luminances,E,g,0,v),g}getMatrix(){const h=this.getWidth(),g=this.getHeight();if(h===this.dataWidth&&g===this.dataHeight)return this.luminances;const v=h*g,E=new Uint8ClampedArray(v);let k=this.top*this.dataWidth+this.left;if(h===this.dataWidth)return y.arraycopy(this.luminances,k,E,0,v),E;for(let T=0;T<g;T++){const R=T*h;y.arraycopy(this.luminances,k,E,R,h),k+=this.dataWidth}return E}isCropSupported(){return!0}crop(h,g,v,E){return new Gb(this.luminances,v,E,this.dataWidth,this.dataHeight,this.left+h,this.top+g)}invert(){return new Y(this)}}class Kb extends L{static forName(h){return this.getCharacterSetECIByName(h)}}class w1{}w1.ISO_8859_1=L.ISO8859_1;class S1{isCompact(){return this.compact}setCompact(h){this.compact=h}getSize(){return this.size}setSize(h){this.size=h}getLayers(){return this.layers}setLayers(h){this.layers=h}getCodeWords(){return this.codeWords}setCodeWords(h){this.codeWords=h}getMatrix(){return this.matrix}setMatrix(h){this.matrix=h}}class E1{static singletonList(h){return[h]}static min(h,g){return h.sort(g)[0]}}class fk{constructor(h){this.previous=h}getPrevious(){return this.previous}}class yp extends fk{constructor(h,g,v){super(h),this.value=g,this.bitCount=v}appendTo(h,g){h.appendBits(this.value,this.bitCount)}add(h,g){return new yp(this,h,g)}addBinaryShift(h,g){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new yp(this,h,g)}toString(){let h=this.value&(1<<this.bitCount)-1;return h|=1<<this.bitCount,"<"+C.toBinaryString(h|1<<this.bitCount).substring(1)+">"}}class km extends yp{constructor(h,g,v){super(h,0,0),this.binaryShiftStart=g,this.binaryShiftByteCount=v}appendTo(h,g){for(let v=0;v<this.binaryShiftByteCount;v++)(v===0||v===31&&this.binaryShiftByteCount<=62)&&(h.appendBits(31,5),this.binaryShiftByteCount>62?h.appendBits(this.binaryShiftByteCount-31,16):v===0?h.appendBits(Math.min(this.binaryShiftByteCount,31),5):h.appendBits(this.binaryShiftByteCount-31,5)),h.appendBits(g[this.binaryShiftStart+v],8)}addBinaryShift(h,g){return new km(this,h,g)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Xb(se,h,g){return new km(se,h,g)}function _m(se,h,g){return new yp(se,h,g)}const hk=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ea=0,bp=1,ns=2,Yb=3,zl=4,GP=new yp(null,0,0),Qb=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function KP(se){for(let h of se)_.fill(h,-1);return se[ea][zl]=0,se[bp][zl]=0,se[bp][ea]=28,se[Yb][zl]=0,se[ns][zl]=0,se[ns][ea]=15,se}const pk=KP(_.createInt32Array(6,6));class Nc{constructor(h,g,v,E){this.token=h,this.mode=g,this.binaryShiftByteCount=v,this.bitCount=E}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(h,g){let v=this.bitCount,E=this.token;if(h!==this.mode){let T=Qb[this.mode][h];E=_m(E,T&65535,T>>16),v+=T>>16}let k=h===ns?4:5;return E=_m(E,g,k),new Nc(E,h,0,v+k)}shiftAndAppend(h,g){let v=this.token,E=this.mode===ns?4:5;return v=_m(v,pk[this.mode][h],E),v=_m(v,g,5),new Nc(v,this.mode,0,this.bitCount+E+5)}addBinaryShiftChar(h){let g=this.token,v=this.mode,E=this.bitCount;if(this.mode===zl||this.mode===ns){let R=Qb[v][ea];g=_m(g,R&65535,R>>16),E+=R>>16,v=ea}let k=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,T=new Nc(g,v,this.binaryShiftByteCount+1,E+k);return T.binaryShiftByteCount===2078&&(T=T.endBinaryShift(h+1)),T}endBinaryShift(h){if(this.binaryShiftByteCount===0)return this;let g=this.token;return g=Xb(g,h-this.binaryShiftByteCount,this.binaryShiftByteCount),new Nc(g,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(h){let g=this.bitCount+(Qb[this.mode][h.mode]>>16);return this.binaryShiftByteCount<h.binaryShiftByteCount?g+=Nc.calculateBinaryShiftCost(h)-Nc.calculateBinaryShiftCost(this):this.binaryShiftByteCount>h.binaryShiftByteCount&&h.binaryShiftByteCount>0&&(g+=10),g<=h.bitCount}toBitArray(h){let g=[];for(let E=this.endBinaryShift(h.length).token;E!==null;E=E.getPrevious())g.unshift(E);let v=new A;for(const E of g)E.appendTo(v,h);return v}toString(){return z.format("%s bits=%d bytes=%d",hk[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(h){return h.binaryShiftByteCount>62?21:h.binaryShiftByteCount>31?20:h.binaryShiftByteCount>0?10:0}}Nc.INITIAL_STATE=new Nc(GP,ea,0,0);function wp(se){const h=z.getCharCode(" "),g=z.getCharCode("."),v=z.getCharCode(",");se[ea][h]=1;const E=z.getCharCode("Z"),k=z.getCharCode("A");for(let xe=k;xe<=E;xe++)se[ea][xe]=xe-k+2;se[bp][h]=1;const T=z.getCharCode("z"),R=z.getCharCode("a");for(let xe=R;xe<=T;xe++)se[bp][xe]=xe-R+2;se[ns][h]=1;const F=z.getCharCode("9"),U=z.getCharCode("0");for(let xe=U;xe<=F;xe++)se[ns][xe]=xe-U+2;se[ns][v]=12,se[ns][g]=13;const Z=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let xe=0;xe<Z.length;xe++)se[Yb][z.getCharCode(Z[xe])]=xe;const oe=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let xe=0;xe<oe.length;xe++)z.getCharCode(oe[xe])>0&&(se[zl][z.getCharCode(oe[xe])]=xe);return se}const Jb=wp(_.createInt32Array(5,256));class Nm{constructor(h){this.text=h}encode(){const h=z.getCharCode(" "),g=z.getCharCode(`
`);let v=E1.singletonList(Nc.INITIAL_STATE);for(let k=0;k<this.text.length;k++){let T,R=k+1<this.text.length?this.text[k+1]:0;switch(this.text[k]){case z.getCharCode("\r"):T=R===g?2:0;break;case z.getCharCode("."):T=R===h?3:0;break;case z.getCharCode(","):T=R===h?4:0;break;case z.getCharCode(":"):T=R===h?5:0;break;default:T=0}T>0?(v=Nm.updateStateListForPair(v,k,T),k++):v=this.updateStateListForChar(v,k)}return E1.min(v,(k,T)=>k.getBitCount()-T.getBitCount()).toBitArray(this.text)}updateStateListForChar(h,g){const v=[];for(let E of h)this.updateStateForChar(E,g,v);return Nm.simplifyStates(v)}updateStateForChar(h,g,v){let E=this.text[g]&255,k=Jb[h.getMode()][E]>0,T=null;for(let R=0;R<=zl;R++){let F=Jb[R][E];if(F>0){if(T==null&&(T=h.endBinaryShift(g)),!k||R===h.getMode()||R===ns){const U=T.latchAndAppend(R,F);v.push(U)}if(!k&&pk[h.getMode()][R]>=0){const U=T.shiftAndAppend(R,F);v.push(U)}}}if(h.getBinaryShiftByteCount()>0||Jb[h.getMode()][E]===0){let R=h.addBinaryShiftChar(g);v.push(R)}}static updateStateListForPair(h,g,v){const E=[];for(let k of h)this.updateStateForPair(k,g,v,E);return this.simplifyStates(E)}static updateStateForPair(h,g,v,E){let k=h.endBinaryShift(g);if(E.push(k.latchAndAppend(zl,v)),h.getMode()!==zl&&E.push(k.shiftAndAppend(zl,v)),v===3||v===4){let T=k.latchAndAppend(ns,16-v).latchAndAppend(ns,1);E.push(T)}if(h.getBinaryShiftByteCount()>0){let T=h.addBinaryShiftChar(g).addBinaryShiftChar(g+1);E.push(T)}}static simplifyStates(h){let g=[];for(const v of h){let E=!0;for(const k of g){if(k.isBetterThanOrEqualTo(v)){E=!1;break}v.isBetterThanOrEqualTo(k)&&(g=g.filter(T=>T!==k))}E&&g.push(v)}return g}}class kn{constructor(){}static encodeBytes(h){return kn.encode(h,kn.DEFAULT_EC_PERCENT,kn.DEFAULT_AZTEC_LAYERS)}static encode(h,g,v){let E=new Nm(h).encode(),k=C.truncDivision(E.getSize()*g,100)+11,T=E.getSize()+k,R,F,U,Z,oe;if(v!==kn.DEFAULT_AZTEC_LAYERS){if(R=v<0,F=Math.abs(v),F>(R?kn.MAX_NB_BITS_COMPACT:kn.MAX_NB_BITS))throw new f(z.format("Illegal value %s for layers",v));U=kn.totalBitsInLayer(F,R),Z=kn.WORD_SIZE[F];let vt=U-U%Z;if(oe=kn.stuffBits(E,Z),oe.getSize()+k>vt)throw new f("Data to large for user specified layer");if(R&&oe.getSize()>Z*64)throw new f("Data to large for user specified layer")}else{Z=0,oe=null;for(let vt=0;;vt++){if(vt>kn.MAX_NB_BITS)throw new f("Data too large for an Aztec code");if(R=vt<=3,F=R?vt+1:vt,U=kn.totalBitsInLayer(F,R),T>U)continue;(oe==null||Z!==kn.WORD_SIZE[F])&&(Z=kn.WORD_SIZE[F],oe=kn.stuffBits(E,Z));let Zt=U-U%Z;if(!(R&&oe.getSize()>Z*64)&&oe.getSize()+k<=Zt)break}}let xe=kn.generateCheckWords(oe,U,Z),Oe=oe.getSize()/Z,ce=kn.generateModeMessage(R,F,Oe),be=(R?11:14)+F*4,Ne=new Int32Array(be),Be;if(R){Be=be;for(let vt=0;vt<Ne.length;vt++)Ne[vt]=vt}else{Be=be+1+2*C.truncDivision(C.truncDivision(be,2)-1,15);let vt=C.truncDivision(be,2),Zt=C.truncDivision(Be,2);for(let Br=0;Br<vt;Br++){let Xs=Br+C.truncDivision(Br,15);Ne[vt-Br-1]=Zt-Xs-1,Ne[vt+Br]=Zt+Xs+1}}let lt=new X(Be);for(let vt=0,Zt=0;vt<F;vt++){let Br=(F-vt)*4+(R?9:12);for(let Xs=0;Xs<Br;Xs++){let Di=Xs*2;for(let Wa=0;Wa<2;Wa++)xe.get(Zt+Di+Wa)&&lt.set(Ne[vt*2+Wa],Ne[vt*2+Xs]),xe.get(Zt+Br*2+Di+Wa)&&lt.set(Ne[vt*2+Xs],Ne[be-1-vt*2-Wa]),xe.get(Zt+Br*4+Di+Wa)&&lt.set(Ne[be-1-vt*2-Wa],Ne[be-1-vt*2-Xs]),xe.get(Zt+Br*6+Di+Wa)&&lt.set(Ne[be-1-vt*2-Xs],Ne[vt*2+Wa])}Zt+=Br*8}if(kn.drawModeMessage(lt,R,Be,ce),R)kn.drawBullsEye(lt,C.truncDivision(Be,2),5);else{kn.drawBullsEye(lt,C.truncDivision(Be,2),7);for(let vt=0,Zt=0;vt<C.truncDivision(be,2)-1;vt+=15,Zt+=16)for(let Br=C.truncDivision(Be,2)&1;Br<Be;Br+=2)lt.set(C.truncDivision(Be,2)-Zt,Br),lt.set(C.truncDivision(Be,2)+Zt,Br),lt.set(Br,C.truncDivision(Be,2)-Zt),lt.set(Br,C.truncDivision(Be,2)+Zt)}let gt=new S1;return gt.setCompact(R),gt.setSize(Be),gt.setLayers(F),gt.setCodeWords(Oe),gt.setMatrix(lt),gt}static drawBullsEye(h,g,v){for(let E=0;E<v;E+=2)for(let k=g-E;k<=g+E;k++)h.set(k,g-E),h.set(k,g+E),h.set(g-E,k),h.set(g+E,k);h.set(g-v,g-v),h.set(g-v+1,g-v),h.set(g-v,g-v+1),h.set(g+v,g-v),h.set(g+v,g-v+1),h.set(g+v,g+v-1)}static generateModeMessage(h,g,v){let E=new A;return h?(E.appendBits(g-1,2),E.appendBits(v-1,6),E=kn.generateCheckWords(E,28,4)):(E.appendBits(g-1,5),E.appendBits(v-1,11),E=kn.generateCheckWords(E,40,4)),E}static drawModeMessage(h,g,v,E){let k=C.truncDivision(v,2);if(g)for(let T=0;T<7;T++){let R=k-3+T;E.get(T)&&h.set(R,k-5),E.get(T+7)&&h.set(k+5,R),E.get(20-T)&&h.set(R,k+5),E.get(27-T)&&h.set(k-5,R)}else for(let T=0;T<10;T++){let R=k-5+T+C.truncDivision(T,5);E.get(T)&&h.set(R,k-7),E.get(T+10)&&h.set(k+7,R),E.get(29-T)&&h.set(R,k+7),E.get(39-T)&&h.set(k-7,R)}}static generateCheckWords(h,g,v){let E=h.getSize()/v,k=new Cm(kn.getGF(v)),T=C.truncDivision(g,v),R=kn.bitsToWords(h,v,T);k.encode(R,T-E);let F=g%v,U=new A;U.appendBits(0,F);for(const Z of Array.from(R))U.appendBits(Z,v);return U}static bitsToWords(h,g,v){let E=new Int32Array(v),k,T;for(k=0,T=h.getSize()/g;k<T;k++){let R=0;for(let F=0;F<g;F++)R|=h.get(k*g+F)?1<<g-F-1:0;E[k]=R}return E}static getGF(h){switch(h){case 4:return Ae.AZTEC_PARAM;case 6:return Ae.AZTEC_DATA_6;case 8:return Ae.AZTEC_DATA_8;case 10:return Ae.AZTEC_DATA_10;case 12:return Ae.AZTEC_DATA_12;default:throw new f("Unsupported word size "+h)}}static stuffBits(h,g){let v=new A,E=h.getSize(),k=(1<<g)-2;for(let T=0;T<E;T+=g){let R=0;for(let F=0;F<g;F++)(T+F>=E||h.get(T+F))&&(R|=1<<g-1-F);(R&k)===k?(v.appendBits(R&k,g),T--):R&k?v.appendBits(R,g):(v.appendBits(R|1,g),T--)}return v}static totalBitsInLayer(h,g){return((g?88:112)+16*h)*h}}kn.DEFAULT_EC_PERCENT=33,kn.DEFAULT_AZTEC_LAYERS=0,kn.MAX_NB_BITS=32,kn.MAX_NB_BITS_COMPACT=4,kn.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Am{encode(h,g,v,E){return this.encodeWithHints(h,g,v,E,null)}encodeWithHints(h,g,v,E,k){let T=w1.ISO_8859_1,R=kn.DEFAULT_EC_PERCENT,F=kn.DEFAULT_AZTEC_LAYERS;return k!=null&&(k.has(ji.CHARACTER_SET)&&(T=Kb.forName(k.get(ji.CHARACTER_SET).toString())),k.has(ji.ERROR_CORRECTION)&&(R=C.parseInt(k.get(ji.ERROR_CORRECTION).toString())),k.has(ji.AZTEC_LAYERS)&&(F=C.parseInt(k.get(ji.AZTEC_LAYERS).toString()))),Am.encodeLayers(h,g,v,E,T,R,F)}static encodeLayers(h,g,v,E,k,T,R){if(g!==ne.AZTEC)throw new f("Can only encode AZTEC, but got "+g);let F=kn.encode(z.getBytes(h,k),T,R);return Am.renderResult(F,v,E)}static renderResult(h,g,v){let E=h.getMatrix();if(E==null)throw new ze;let k=E.getWidth(),T=E.getHeight(),R=Math.max(g,k),F=Math.max(v,T),U=Math.min(R/k,F/T),Z=(R-k*U)/2,oe=(F-T*U)/2,xe=new X(R,F);for(let Oe=0,ce=oe;Oe<T;Oe++,ce+=U)for(let be=0,Ne=Z;be<k;be++,Ne+=U)E.get(be,Oe)&&xe.setRegion(Ne,ce,U,U);return xe}}r.AbstractExpandedDecoder=ke,r.ArgumentException=d,r.ArithmeticException=V,r.AztecCode=S1,r.AztecCodeReader=Te,r.AztecCodeWriter=Am,r.AztecDecoder=et,r.AztecDetector=Xe,r.AztecDetectorResult=er,r.AztecEncoder=kn,r.AztecHighLevelEncoder=Nm,r.AztecPoint=qe,r.BarcodeFormat=ne,r.Binarizer=x,r.BinaryBitmap=p,r.BitArray=A,r.BitMatrix=X,r.BitSource=g1,r.BrowserAztecCodeReader=He,r.BrowserBarcodeReader=kd,r.BrowserCodeReader=de,r.BrowserDatamatrixCodeReader=nk,r.BrowserMultiFormatReader=al,r.BrowserPDF417Reader=VP,r.BrowserQRCodeReader=dk,r.BrowserQRCodeSvgWriter=jf,r.CharacterSetECI=L,r.ChecksumException=m,r.Code128Reader=we,r.Code39Reader=ot,r.DataMatrixDecodedBitStreamParser=kc,r.DataMatrixReader=Ul,r.DecodeHintType=P,r.DecoderResult=ae,r.DefaultGridSampler=dr,r.DetectorResult=jr,r.EAN13Reader=Qi,r.EncodeHintType=ji,r.Exception=c,r.FormatException=O,r.GenericGF=Ae,r.GenericGFPoly=Ee,r.GlobalHistogramBinarizer=Q,r.GridSampler=qt,r.GridSamplerInstance=Gt,r.HTMLCanvasElementLuminanceSource=pe,r.HybridBinarizer=te,r.ITFReader=xt,r.IllegalArgumentException=f,r.IllegalStateException=ze,r.InvertedLuminanceSource=Y,r.LuminanceSource=J,r.MathUtils=ut,r.MultiFormatOneDReader=No,r.MultiFormatReader=uk,r.MultiFormatWriter=b1,r.NotFoundException=W,r.OneDReader=je,r.PDF417DecodedBitStreamParser=tt,r.PDF417DecoderErrorCorrection=ak,r.PDF417Reader=Aa,r.PDF417ResultMetadata=Vb,r.PerspectiveTransform=Lt,r.PlanarYUVLuminanceSource=Ts,r.QRCodeByteMatrix=$l,r.QRCodeDataMask=Gs,r.QRCodeDecodedBitStreamParser=gi,r.QRCodeDecoderErrorCorrectionLevel=Zn,r.QRCodeDecoderFormatInformation=za,r.QRCodeEncoder=hi,r.QRCodeEncoderQRCode=Iu,r.QRCodeMaskUtil=Lr,r.QRCodeMatrixUtil=gr,r.QRCodeMode=mr,r.QRCodeReader=_d,r.QRCodeVersion=ar,r.QRCodeWriter=Df,r.RGBLuminanceSource=Gb,r.RSS14Reader=Hr,r.RSSExpandedReader=at,r.ReaderException=rs,r.ReedSolomonDecoder=De,r.ReedSolomonEncoder=Cm,r.ReedSolomonException=Pe,r.Result=G,r.ResultMetadataType=re,r.ResultPoint=ht,r.StringUtils=z,r.UnsupportedOperationException=B,r.VideoInputDevice=_e,r.WhiteRectangleDetector=ct,r.WriterException=ei,r.ZXingArrays=_,r.ZXingCharset=Kb,r.ZXingInteger=C,r.ZXingStandardCharsets=w1,r.ZXingStringBuilder=ie,r.ZXingStringEncoding=H,r.ZXingSystem=y,r.createAbstractExpandedDecoder=St,Object.defineProperty(r,"__esModule",{value:!0})})})(N8,N8.exports);var Ei=N8.exports;const o5e=Vs(Ei),l5e=V5({__proto__:null,default:o5e},[Ei]);var EG=function(){function e(t,r,n){if(this.formatMap=new Map([[Xt.QR_CODE,Ei.BarcodeFormat.QR_CODE],[Xt.AZTEC,Ei.BarcodeFormat.AZTEC],[Xt.CODABAR,Ei.BarcodeFormat.CODABAR],[Xt.CODE_39,Ei.BarcodeFormat.CODE_39],[Xt.CODE_93,Ei.BarcodeFormat.CODE_93],[Xt.CODE_128,Ei.BarcodeFormat.CODE_128],[Xt.DATA_MATRIX,Ei.BarcodeFormat.DATA_MATRIX],[Xt.MAXICODE,Ei.BarcodeFormat.MAXICODE],[Xt.ITF,Ei.BarcodeFormat.ITF],[Xt.EAN_13,Ei.BarcodeFormat.EAN_13],[Xt.EAN_8,Ei.BarcodeFormat.EAN_8],[Xt.PDF_417,Ei.BarcodeFormat.PDF_417],[Xt.RSS_14,Ei.BarcodeFormat.RSS_14],[Xt.RSS_EXPANDED,Ei.BarcodeFormat.RSS_EXPANDED],[Xt.UPC_A,Ei.BarcodeFormat.UPC_A],[Xt.UPC_E,Ei.BarcodeFormat.UPC_E],[Xt.UPC_EAN_EXTENSION,Ei.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!l5e)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var i=this.createZXingFormats(t),a=new Map;a.set(Ei.DecodeHintType.POSSIBLE_FORMATS,i),a.set(Ei.DecodeHintType.TRY_HARDER,!1),this.hints=a}return e.prototype.decodeAsync=function(t){var r=this;return new Promise(function(n,i){try{n(r.decode(t))}catch(a){i(a)}})},e.prototype.decode=function(t){var r=new Ei.MultiFormatReader(this.verbose,this.hints),n=new Ei.HTMLCanvasElementLuminanceSource(t),i=new Ei.BinaryBitmap(new Ei.HybridBinarizer(n)),a=r.decode(i);return{text:a.text,format:Goe.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,i){t.set(r,n)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var r=[],n=0,i=t;n<i.length;n++){var a=i[n];this.formatMap.has(a)?r.push(this.formatMap.get(a)):this.logger.logError("".concat(a," is not supported by")+"ZXingHtml5QrcodeShim")}return r},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),c5e=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},u5e=function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},CG=function(){function e(t,r,n){if(this.formatMap=new Map([[Xt.QR_CODE,"qr_code"],[Xt.AZTEC,"aztec"],[Xt.CODABAR,"codabar"],[Xt.CODE_39,"code_39"],[Xt.CODE_93,"code_93"],[Xt.CODE_128,"code_128"],[Xt.DATA_MATRIX,"data_matrix"],[Xt.ITF,"itf"],[Xt.EAN_13,"ean_13"],[Xt.EAN_8,"ean_8"],[Xt.PDF_417,"pdf417"],[Xt.UPC_A,"upc_a"],[Xt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var i=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return c5e(this,void 0,void 0,function(){var r,n;return u5e(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(t)];case 1:if(r=i.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(r),[2,{text:n.rawValue,format:Goe.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var r=null,n=0,i=0,a=t;i<a.length;i++){var s=a[i],o=s.boundingBox.width*s.boundingBox.height;o>n&&(n=o,r=s)}if(!r)throw"No largest barcode found";return r},e.prototype.createBarcodeDetectorFormats=function(t){for(var r=[],n=0,i=t;n<i.length;n++){var a=i[n];this.formatMap.has(a)?r.push(this.formatMap.get(a)):this.logger.warn("".concat(a," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,i){t.set(r,n)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),kG=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},_G=function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},d5e=function(){function e(t,r,n,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,r&&CG.isSupported()?(this.primaryDecoder=new CG(t,n,i),this.secondaryDecoder=new EG(t,n,i)):this.primaryDecoder=new EG(t,n,i)}return e.prototype.decodeAsync=function(t){return kG(this,void 0,void 0,function(){var r;return _G(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return kG(this,void 0,void 0,function(){var r,n;return _G(this,function(i){switch(i.label){case 0:r=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,i.sent()];case 3:if(n=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw n;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var r=performance.now()-t;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,r=0,n=this.executionResults;r<n.length;r++){var i=n[r];t+=i}var a=t/this.executionResults.length;console.log("".concat(a," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),a9=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xT=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},vT=function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Xoe=function(){function e(t,r){this.name=t,this.track=r}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var r={};r[this.name]=t;var n={advanced:[r]};return this.track.applyConstraints(n)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var r=t[this.name];return r}return null},e}(),f5e=function(e){a9(t,e);function t(r,n){return e.call(this,r,n)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(r){var n={};n[this.name]=r;var i={advanced:[n]};return this.track.applyConstraints(i)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),n=r[this.name];return{min:n.min,max:n.max,step:n.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(Xoe),h5e=function(e){a9(t,e);function t(r){return e.call(this,"zoom",r)||this}return t}(f5e),p5e=function(e){a9(t,e);function t(r){return e.call(this,"torch",r)||this}return t}(Xoe),m5e=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new h5e(this.track)},e.prototype.torchFeature=function(){return new p5e(this.track)},e}(),g5e=function(){function e(t,r,n){this.isClosed=!1,this.parentElement=t,this.mediaStream=r,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var r=document.createElement("video");return r.style.width="".concat(t,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var n=t.surface.clientWidth,i=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(n,i),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,r,n,i){return xT(this,void 0,void 0,function(){var a,s;return vT(this,function(o){switch(o.label){case 0:return a=new e(t,r,i),n.aspectRatio?(s={aspectRatio:n.aspectRatio},[4,a.getFirstTrackOrFail().applyConstraints(s)]):[3,2];case 1:o.sent(),o.label=2;case 2:return a.setupSurface(),[2,a]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var r=this,n=function(){setTimeout(t,200),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return xT(this,void 0,void 0,function(){return vT(this,function(r){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(r,n){var i=t.mediaStream.getVideoTracks(),a=i.length,s=0;t.mediaStream.getVideoTracks().forEach(function(o){t.mediaStream.removeTrack(o),o.stop(),++s,s>=a&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),r())})})},e.prototype.getCapabilities=function(){return new m5e(this.getFirstTrackOrFail())},e}(),x5e=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,r,n){return xT(this,void 0,void 0,function(){return vT(this,function(i){return[2,g5e.create(t,this.mediaStream,r,n)]})})},e.create=function(t){return xT(this,void 0,void 0,function(){var r,n;return vT(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return n=i.sent(),[2,new e(n)]}})})},e}(),NG=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},AG=function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},v5e=function(){function e(){}return e.failIfNotSupported=function(){return NG(this,void 0,void 0,function(){return AG(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return NG(this,void 0,void 0,function(){return AG(this,function(r){return[2,x5e.create(t)]})})},e}(),y5e=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(d){try{c(n.next(d))}catch(f){s(f)}}function l(d){try{c(n.throw(d))}catch(f){s(f)}}function c(d){d.done?a(d.value):i(d.value).then(o,l)}c((n=n.apply(e,t||[])).next())})},b5e=function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},w5e=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=wv.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=wv.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return y5e(this,void 0,void 0,function(){var t,r,n,i,a,s,o;return b5e(this,function(l){switch(l.label){case 0:return t=function(c){for(var d=c.getVideoTracks(),f=0,p=d;f<p.length;f++){var m=p[f];m.enabled=!1,m.stop(),c.removeTrack(m)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=l.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=l.sent(),i=[],a=0,s=n;a<s.length;a++)o=s[a],o.kind==="videoinput"&&i.push({id:o.deviceId,label:o.label});return t(r),[2,i]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,r){var n=function(a){for(var s=[],o=0,l=a;o<l.length;o++){var c=l[o];c.kind==="video"&&s.push({id:c.id,label:c.label})}t(s)},i=MediaStreamTrack;i.getSources(n)})},e}(),ia;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(ia||(ia={}));var S5e=function(){function e(){this.state=ia.NOT_STARTED,this.onGoingTransactionNewState=ia.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===ia.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=ia.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===ia.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=ia.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==ia.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case ia.UNKNOWN:throw"Transition from unknown is not allowed";case ia.NOT_STARTED:this.failIfNewStateIs(t,[ia.PAUSED]);break;case ia.SCANNING:break;case ia.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,r){for(var n=0,i=r;n<i.length;n++){var a=i[n];if(t===a)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),E5e=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===ia.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==ia.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===ia.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===ia.PAUSED},e}(),C5e=function(){function e(){}return e.create=function(){return new E5e(new S5e)},e}(),k5e=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xl=function(e){k5e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(i5e),_5e=function(){function e(t,r){this.logger=r,this.fps=Xl.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Xl.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Koe.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!rh(this.qrbox)},e.create=function(t,r){return new e(t,r)},e}(),N5e=function(){function e(t,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var n;typeof r=="boolean"?this.verbose=r===!0:r&&(n=r,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new s5e(this.verbose),this.qrcode=new d5e(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=C5e.create()}return e.prototype.start=function(t,r,n,i){var a=this;if(!t)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var s;i?s=i:s=this.verbose?this.logger.log:function(){};var o=_5e.create(r,this.logger);this.clearElement();var l=!1;o.videoConstraints&&(o.isMediaStreamConstraintsValid()?l=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var c=l,d=document.getElementById(this.elementId);d.clientWidth?d.clientWidth:Xl.DEFAULT_WIDTH,d.style.position="relative",this.shouldScan=!0,this.element=d;var f=this,p=this.stateManagerProxy.startTransition(ia.SCANNING);return new Promise(function(m,x){var y=c?o.videoConstraints:f.createVideoConstraints(t);if(!y){p.cancel(),x("videoConstraints should be defined");return}var b={};(!c||o.aspectRatio)&&(b.aspectRatio=o.aspectRatio);var S={onRenderSurfaceReady:function(_,C){f.setupUi(_,C,o),f.isScanning=!0,f.foreverScan(o,n,s)}};v5e.failIfNotSupported().then(function(_){_.create(y).then(function(C){return C.render(a.element,b,S).then(function(A){f.renderedCamera=A,p.execute(),m(null)}).catch(function(A){p.cancel(),x(A)})}).catch(function(C){p.cancel(),x(wv.errorGettingUserMedia(C))})}).catch(function(_){p.cancel(),x(wv.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(ia.PAUSED),this.showPausedState(),(rh(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,r=function(){t.stateManagerProxy.directTransition(ia.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(ia.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(t.element){var a=document.getElementById(Xl.SHADED_REGION_ELEMENT_ID);a&&t.element.removeChild(a)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),n(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),r.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,r){return this.scanFileV2(t,r).then(function(n){return n.decodedText})},e.prototype.scanFileV2=function(t,r){var n=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(rh(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,a){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(t);var s=new Image;s.onload=function(){var o=s.width,l=s.height,c=document.getElementById(n.elementId),d=c.clientWidth?c.clientWidth:Xl.DEFAULT_WIDTH,f=Math.max(c.clientHeight?c.clientHeight:l,Xl.FILE_SCAN_MIN_HEIGHT),p=n.computeCanvasDrawConfig(o,l,d,f);if(r){var m=n.createCanvasElement(d,f,"qr-canvas-visible");m.style.display="inline-block",c.appendChild(m);var x=m.getContext("2d");if(!x)throw"Unable to get 2d context from canvas";x.canvas.width=d,x.canvas.height=f,x.drawImage(s,0,0,o,l,p.x,p.y,p.width,p.height)}var y=Xl.FILE_SCAN_HIDDEN_CANVAS_PADDING,b=Math.max(s.width,p.width),S=Math.max(s.height,p.height),_=b+2*y,C=S+2*y,A=n.createCanvasElement(_,C);c.appendChild(A);var j=A.getContext("2d");if(!j)throw"Unable to get 2d context from canvas";j.canvas.width=_,j.canvas.height=C,j.drawImage(s,0,0,o,l,y,y,b,S);try{n.qrcode.decodeRobustlyAsync(A).then(function(P){i(SG.createFromQrcodeResult(P))}).catch(a)}catch(P){a("QR code parse error, error = ".concat(P))}},s.onerror=a,s.onabort=a,s.onstalled=a,s.onsuspend=a,s.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return w5e.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!Koe.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var r=[Xt.QR_CODE,Xt.AZTEC,Xt.CODABAR,Xt.CODE_39,Xt.CODE_93,Xt.CODE_128,Xt.DATA_MATRIX,Xt.MAXICODE,Xt.ITF,Xt.EAN_13,Xt.EAN_8,Xt.PDF_417,Xt.RSS_14,Xt.RSS_EXPANDED,Xt.UPC_A,Xt.UPC_E,Xt.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return r;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],i=0,a=t.formatsToSupport;i<a.length;i++){var s=a[i];n5e(s)?n.push(s):this.logger.warn("Invalid format: ".concat(s," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(rh(t))return!0;if(!rh(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(rh(t.experimentalFeatures))return!0;var r=t.experimentalFeatures;return rh(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,r,n){var i=this,a=n.qrbox;this.validateQrboxConfig(a);var s=this.toQrdimensions(t,r,a),o=function(c){if(c<Xl.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Xl.MIN_QR_BOX_SIZE,"px.")},l=function(c){return c>t&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),c=t),c};o(s.width),o(s.height),s.width=l(s.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,r,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(t,r)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return n},e.prototype.setupUi=function(t,r,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(t,r,n);var i=rh(n.qrbox)?{width:t,height:r}:n.qrbox;this.validateQrboxConfig(i);var a=this.toQrdimensions(t,r,i);a.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var s=n.isShadedBoxEnabled()&&a.height<=r,o={x:0,y:0,width:t,height:r},l=s?this.getShadedRegionBounds(t,r,a):o,c=this.createCanvasElement(l.width,l.height),d={willReadFrequently:!0},f=c.getContext("2d",d);f.canvas.width=l.width,f.canvas.height=l.height,this.element.append(c),s&&this.possiblyInsertShadingElement(this.element,t,r,a),this.createScannerPausedUiElement(this.element),this.qrRegion=l,this.context=f,this.canvasElement=c},e.prototype.createScannerPausedUiElement=function(t){var r=document.createElement("div");r.innerText=wv.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",t.appendChild(r),this.scannerPausedUiElement=r},e.prototype.scanContext=function(t,r){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return t(i.text,SG.createFromQrcodeResult(i)),n.possiblyUpdateShaders(!0),!0}).catch(function(i){n.possiblyUpdateShaders(!1);var a=wv.codeParseError(i);return r(a,a5e.createFrom(a)),!1})},e.prototype.foreverScan=function(t,r,n){var i=this;if(this.shouldScan&&this.renderedCamera){var a=this.renderedCamera.getSurface(),s=a.videoWidth/a.clientWidth,o=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var l=this.qrRegion.width*s,c=this.qrRegion.height*o,d=this.qrRegion.x*s,f=this.qrRegion.y*o;this.context.drawImage(a,d,f,l,c,0,0,this.qrRegion.width,this.qrRegion.height);var p=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(t,r,n)},i.getTimeoutFps(t.fps))};this.scanContext(r,n).then(function(m){!m&&t.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(r,n).finally(function(){p()})):p()}).catch(function(m){i.logger.logError("Error happend while scanning context",m),p()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var r="facingMode",n="deviceId",i={user:!0,environment:!0},a="exact",s=function(x){if(x in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(x,"'")},o=Object.keys(t);if(o.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(o.length," keys");var l=Object.keys(t)[0];if(l!==r&&l!==n)throw"Only '".concat(r,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(l===r){var c=t.facingMode;if(typeof c=="string"){if(s(c))return{facingMode:c}}else if(typeof c=="object")if(a in c){if(s(c["".concat(a)]))return{facingMode:{exact:c["".concat(a)]}}}else throw"'facingMode' should be string or object with"+" ".concat(a," as key.");else{var d=typeof c;throw"Invalid type of 'facingMode' = ".concat(d)}}else{var f=t.deviceId;if(typeof f=="string")return{deviceId:f};if(typeof f=="object"){if(a in f)return{deviceId:{exact:f["".concat(a)]}};throw"'deviceId' should be string or object with"+" ".concat(a," as key.")}else{var p=typeof f;throw"Invalid type of 'deviceId' = ".concat(p)}}}var m=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(m)},e.prototype.computeCanvasDrawConfig=function(t,r,n,i){if(t<=n&&r<=i){var a=(n-t)/2,s=(i-r)/2;return{x:a,y:s,width:t,height:r}}else{var o=t,l=r;return t>n&&(r=n/t*r,t=n),r>i&&(t=i/r*t,r=i),this.logger.log("Image downsampled from "+"".concat(o,"X").concat(l)+" to ".concat(t,"X").concat(r,".")),this.computeCanvasDrawConfig(t,r,n,i)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=t?Xl.BORDER_SHADER_MATCH_COLOR:Xl.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,r,n){var i=t,a=r,s=document.createElement("canvas");return s.style.width="".concat(i,"px"),s.style.height="".concat(a,"px"),s.style.display="none",s.id=rh(n)?"qr-canvas":n,s},e.prototype.getShadedRegionBounds=function(t,r,n){if(n.width>t||n.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-n.width)/2,y:(r-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(t,r,n,i){if(!(r-i.width<1||n-i.height<1)){var a=document.createElement("div");a.style.position="absolute";var s=(r-i.width)/2,o=(n-i.height)/2;if(a.style.borderLeft="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderRight="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderTop="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderBottom="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id="".concat(Xl.SHADED_REGION_ELEMENT_ID),r-i.width<11||n-i.height<11)this.hasBorderShaders=!1;else{var l=5,c=40;this.insertShaderBorders(a,c,l,-l,null,0,!0),this.insertShaderBorders(a,c,l,-l,null,0,!1),this.insertShaderBorders(a,c,l,null,-l,0,!0),this.insertShaderBorders(a,c,l,null,-l,0,!1),this.insertShaderBorders(a,l,c+l,-l,null,-l,!0),this.insertShaderBorders(a,l,c+l,null,-l,-l,!0),this.insertShaderBorders(a,l,c+l,-l,null,-l,!1),this.insertShaderBorders(a,l,c+l,null,-l,-l,!1),this.hasBorderShaders=!0}t.append(a)}},e.prototype.insertShaderBorders=function(t,r,n,i,a,s,o){var l=document.createElement("div");l.style.position="absolute",l.style.backgroundColor=Xl.BORDER_SHADER_DEFAULT_COLOR,l.style.width="".concat(r,"px"),l.style.height="".concat(n,"px"),i!==null&&(l.style.top="".concat(i,"px")),a!==null&&(l.style.bottom="".concat(a,"px")),o?l.style.left="".concat(s,"px"):l.style.right="".concat(s,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(l),t.appendChild(l)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),TG;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(TG||(TG={}));const A5e=({onScanSuccess:e,onClose:t})=>{const[r,n]=I.useState(null),i=I.useRef(null),a=I.useRef(!1),[s,o]=I.useState(!1),[l,c]=I.useState(!1);return I.useEffect(()=>{i.current||(i.current=new N5e("qr-reader"));const d={fps:20,qrbox:{width:250,height:250},aspectRatio:1},f=(x,y)=>{var b;(b=i.current)!=null&&b.isScanning&&i.current.stop(),e(x),t()},p=(x,y)=>{};return(async()=>{var x,y,b;if(!(a.current||(x=i.current)!=null&&x.isScanning)){a.current=!0,n(null);try{const S=i.current;if(!S)return;await S.start({facingMode:"environment"},d,f,p);try{if(typeof S.getRunningTrack=="function"){const _=S.getRunningTrack(),C=((y=_==null?void 0:_.getCapabilities)==null?void 0:y.call(_))||{};C!=null&&C.torch&&o(!0)}}catch(_){console.warn("Torch not supported or error detecting it:",_)}n(null)}catch(S){(b=i.current)!=null&&b.isScanning||(n("Failed to start the camera. Please ensure permissions are granted."),console.error("Scanner error:",S))}finally{a.current=!1}}})(),()=>{i.current&&i.current.isScanning&&i.current.stop().catch(()=>{})}},[e,t]),u.jsxs("div",{className:"bg-black p-4 rounded-lg relative",children:[u.jsx("div",{id:"qr-reader",className:"rounded-lg overflow-hidden"}),s&&u.jsx("button",{onClick:async()=>{var f;const d=!l;try{await((f=i.current)==null?void 0:f.applyVideoConstraints({advanced:[{torch:d}]})),c(d)}catch{Re.error("Flashlight not available")}},className:`absolute top-6 left-6 z-10 p-3 rounded-full shadow-lg transition-colors ${l?"bg-yellow-400 text-black":"bg-black/50 text-white"}`,children:l?u.jsx(LFe,{size:24}):u.jsx($oe,{size:24})}),!r&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:u.jsx("div",{className:"w-[280px] h-[280px] border-4 border-accent rounded-lg shadow-lg relative",style:{boxShadow:"0 0 0 9999px rgba(0,0,0,0.5)"},children:u.jsx("div",{className:"scan-laser"})})}),r&&u.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-80 flex flex-col items-center justify-center text-center p-4",children:[u.jsx(xd,{className:"w-12 h-12 text-red-500 mb-4"}),u.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Camera Error"}),u.jsx("p",{className:"text-sm text-gray-300 mb-6",children:r}),u.jsxs("button",{onClick:()=>window.location.reload(),className:"w-full flex items-center justify-center gap-2 p-3 bg-accent hover:bg-blue-700 rounded-lg text-white font-semibold mb-3",children:[u.jsx(hC,{size:20}),"Try Again"]})]}),u.jsxs("button",{onClick:t,className:"mt-4 w-full flex items-center justify-center gap-2 p-3 bg-red-600 hover:bg-red-700 rounded-lg text-white font-semibold",children:[u.jsx(aFe,{size:20}),"Cancel Scan"]})]})},Yoe=({onItemsChange:e,onRequestNewSample:t,externalSelectedProduct:r})=>{const{products:n,sampleCheckouts:i}=Xr(),[a,s]=I.useState(""),[o,l]=I.useState([]),[c,d]=I.useState(!1),[f,p]=I.useState(null),[m,x]=I.useState(""),[y,b]=I.useState(""),S=I.useMemo(()=>{const O=new Set;return i.forEach(D=>{D.actualReturnDate===null&&O.add(String(D.variantId))}),O},[i]),_=I.useMemo(()=>{if(a.length<2)return[];const O=a.toLowerCase();return n.filter(D=>{var L;return!D.isDiscontinued&&(D.name.toLowerCase().includes(O)||((L=D.manufacturerName)==null?void 0:L.toLowerCase().includes(O))||D.variants.some(B=>B.name&&B.name.toLowerCase().includes(O)||B.sku&&B.sku.toLowerCase().includes(O)))})},[a,n]);I.useEffect(()=>{e(o)},[o,e]),I.useEffect(()=>{if(r)if(p(r),b(""),r.variants.length>0){const O=r.variants.find(D=>D.isMaster);x(O?O.id:r.variants[0].id)}else x("")},[r]);const C=O=>{if(p(O),b(""),O.variants.length>0){const D=O.variants.find(L=>L.isMaster);x(D?D.id:O.variants[0].id)}else x("")},A=()=>{if(!f||!m||!y)return;const O=f.variants.find(H=>H.id===m),D=f.variants.find(H=>H.id===y);if(!O||!D)return;if(S.has(String(O.id))){Re.error("This physical sample is currently checked out.");return}const L={variantId:O.id,interestVariantId:D.id,productName:f.name,variantName:O.name||O.size||"Default",interestName:D.name||D.size||"Default",manufacturerName:f.manufacturerName||"",sampleType:"Board",quantity:1};o.findIndex(H=>H.variantId===L.variantId&&H.interestVariantId===L.interestVariantId)>=0?Re.error("Item already in list."):(l(H=>[...H,L]),Re.success(`Added ${L.interestName}`)),p(null),s("")},j=O=>{l(D=>D.filter((L,B)=>B!==O))},P=O=>{d(!1);let D="",L="";try{if(O.includes("?")){const H=new URL(O);D=H.searchParams.get("variantId")||"",L=H.searchParams.get("productId")||""}else D=O;if(!D&&!L)throw new Error("Could not parse ID");let B;if(L)B=n.find(H=>String(H.id)===String(L));else if(D){if(S.has(String(D))){Re.error("This sample is already checked out!");return}for(const H of n)if(H.variants.some(z=>String(z.id)===String(D))){B=H;break}}if(B){if(p(B),D)x(D),b(D);else{const H=B.variants.find(z=>z.isMaster);H&&x(H.id),b("")}Re.success("Item found!")}else Re.error("Item not found in library.")}catch(B){console.error("Scan Error:",B),Re.error("Invalid QR Code")}};return c?u.jsx(A5e,{onScanSuccess:P,onClose:()=>d(!1)}):u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 h-[500px]",children:[u.jsx("div",{className:"flex flex-col h-full border-r border-border pr-4",children:f?u.jsx("div",{className:"flex flex-col h-full animate-in slide-in-from-right-4 fade-in duration-200",children:u.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border flex-1 flex flex-col gap-4",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-lg text-text-primary",children:f.name}),u.jsx("p",{className:"text-sm text-text-secondary",children:f.manufacturerName}),u.jsx("select",{value:m,onChange:O=>x(O.target.value),className:"hidden",children:f.variants.filter(O=>O.isMaster||O.hasSample).sort((O,D)=>O.isMaster===D.isMaster?0:O.isMaster?-1:1).map(O=>u.jsx("option",{value:O.id,children:O.name},O.id))})]}),u.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[u.jsxs("label",{className:"block text-sm font-bold text-text-primary mb-1",children:["Choose Variant ",u.jsx("span",{className:"text-red-500",children:"*"})]}),f.variants.length===0?u.jsx("p",{className:"text-red-500 text-sm",children:"No variants available."}):u.jsxs("select",{value:y,onChange:O=>b(O.target.value),size:5,className:"w-full flex-1 p-2 bg-background border-2 border-primary/20 focus:border-primary rounded text-text-primary cursor-pointer",children:[u.jsx("option",{value:"",disabled:!0,className:"text-text-tertiary",children:"-- Select an option --"}),f.variants.filter(O=>!O.isMaster).sort((O,D)=>(O.name||"").localeCompare(D.name||"")).map(O=>{const D=S.has(String(O.id));return u.jsxs("option",{value:O.id,disabled:D,className:`py-1 flex justify-between ${D?"text-red-400 opacity-70 bg-red-500/10":""}`,children:[O.name," ",O.size?`(${O.size})`:""," ",D?"(Out)":""]},O.id)})]}),!y&&u.jsxs("p",{className:"text-xs text-amber-600 mt-2 flex items-center gap-1",children:[u.jsx(dC,{size:12})," Selection required"]})]}),u.jsxs("div",{className:"mt-auto pt-4 flex gap-3",children:[u.jsx("button",{onClick:()=>p(null),className:"flex-1 py-3 bg-secondary hover:bg-secondary-hover text-on-secondary font-medium rounded-lg transition-colors",children:"Cancel"}),u.jsx("button",{onClick:A,disabled:!y||S.has(m),className:"flex-[2] py-3 bg-primary hover:bg-primary-hover disabled:bg-gray-400 text-on-primary font-bold rounded-lg shadow-md transition-all whitespace-nowrap",children:y?"Add to List":"Select a Style"})]})]})}):u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"relative mb-4",children:[u.jsx(Yo,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-text-secondary"}),u.jsx("input",{type:"text",autoFocus:!0,placeholder:"Search product lines...",value:a,onChange:O=>s(O.target.value),className:"w-full p-3 pl-10 bg-background border-2 border-border rounded-lg text-text-primary focus:border-primary outline-none"})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto space-y-2",children:[a.length>1&&t&&u.jsxs("div",{onClick:()=>t(a),className:"p-3 mb-2 bg-primary/10 hover:bg-primary/20 border border-primary/30 rounded-lg cursor-pointer flex justify-between items-center group animate-in fade-in",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(hu,{size:20,className:"text-primary"}),u.jsxs("div",{children:[u.jsxs("p",{className:"font-bold text-primary",children:['Create "',a,'"']}),u.jsx("p",{className:"text-xs text-text-secondary",children:"Add this product to library"})]})]}),u.jsx(md,{size:16,className:"text-primary"})]}),a.length<2&&u.jsxs("div",{className:"text-center py-8 text-text-tertiary",children:[u.jsx("p",{children:"Type to search for products..."}),u.jsxs("button",{type:"button",onClick:()=>d(!0),className:"mt-4 flex items-center justify-center gap-2 p-3 bg-surface hover:bg-background border border-border rounded-lg text-primary font-semibold transition-colors mx-auto",children:[u.jsx(OFe,{size:20})," Scan QR Code"]})]}),_.map(O=>u.jsxs("div",{onClick:()=>C(O),className:"p-3 bg-background hover:bg-surface border border-border rounded-lg cursor-pointer flex justify-between items-center group",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-lg text-text-primary",children:O.name}),u.jsx("p",{className:"text-xs text-text-secondary",children:O.manufacturerName})]}),u.jsx(md,{size:16,className:"text-text-tertiary group-hover:text-primary"})]},O.id))]})]})}),u.jsxs("div",{className:"flex flex-col h-full bg-background rounded-lg border border-border p-4",children:[u.jsxs("h4",{className:"font-bold text-text-primary mb-4 border-b border-border pb-2",children:["Checkout List (",o.length,")"]}),u.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-2",children:o.length===0?u.jsx("div",{className:"h-full flex items-center justify-center text-text-tertiary text-sm italic",children:"List is empty. Add items from the left."}):o.map((O,D)=>u.jsxs("div",{className:"bg-surface p-3 rounded border border-border flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-sm text-text-primary",children:O.productName}),u.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[u.jsx("span",{className:"text-xs text-text-secondary",children:"Interested in:"}),u.jsx("span",{className:"text-sm font-bold text-primary",children:O.interestName})]})]}),u.jsx("button",{onClick:()=>j(D),className:"text-text-tertiary hover:text-red-400 p-1",children:u.jsx(tn,{size:16})})]},`${O.variantId}-${D}`))})]})]})},od=({children:e})=>{const t=I.useRef(null);return t.current||(t.current=document.createElement("div")),I.useEffect(()=>{const r=t.current;return document.body.appendChild(r),()=>{document.body.removeChild(r)}},[]),Ml.createPortal(e,t.current)},T5e=({customer:e,project:t,checkoutItems:r,returnDate:n})=>{const{systemBranding:i}=Xr();return!e||!t?null:u.jsxs("div",{id:"printable-summary",className:"p-10 bg-white text-black font-sans hidden print:block",children:[u.jsxs("header",{className:"flex justify-between items-start pb-4 border-b-2 border-gray-300",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:(i==null?void 0:i.companyName)||"Subfloor"}),u.jsx("p",{className:"text-gray-600",children:"Sample Checkout Summary"})]}),u.jsxs("div",{className:"text-right text-sm",children:[u.jsx("p",{className:"font-bold text-base",children:e.fullName}),e.phoneNumber&&u.jsx("p",{className:"text-gray-700",children:e.phoneNumber}),e.email&&u.jsx("p",{className:"text-gray-700",children:e.email})]})]}),u.jsxs("main",{className:"mt-8",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h2",{className:"text-xl font-semibold mb-2 pb-1 border-b border-gray-200",children:"Project Details"}),u.jsxs("p",{children:[u.jsx("strong",{className:"font-semibold",children:"Project Name:"})," ",t.projectName]}),u.jsxs("p",{children:[u.jsx("strong",{className:"font-semibold",children:"Project Type:"})," ",t.projectType]})]}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold mb-2 pb-1 border-b border-gray-200",children:"Samples Checked Out"}),u.jsxs("table",{className:"w-full mt-4 text-left border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b-2 border-gray-300",children:[u.jsx("th",{className:"p-2 font-semibold",children:"Product / Variant"}),u.jsx("th",{className:"p-2 font-semibold",children:"Manufacturer"}),u.jsx("th",{className:"p-2 font-semibold",children:"Sample Type"})]})}),u.jsx("tbody",{children:r.map((a,s)=>u.jsxs("tr",{className:"border-b border-gray-200",children:[u.jsxs("td",{className:"p-2 align-top",children:[u.jsx("div",{className:"font-bold",children:a.productName}),u.jsxs("div",{className:"text-sm text-gray-600",children:["Selected: ",a.interestName]})]}),u.jsx("td",{className:"p-2 align-top",children:a.manufacturerName||"N/A"}),u.jsxs("td",{className:"p-2 align-top",children:[a.sampleType," ",u.jsxs("span",{className:"text-sm text-gray-500",children:["(Qty: ",a.quantity,")"]})]})]},s))})]})]})]}),u.jsxs("footer",{className:"mt-12 pt-4 border-t-2 border-gray-300",children:[u.jsxs("p",{className:"font-bold text-lg",children:["Expected Return Date: ",new Date(n).toLocaleDateString()]}),u.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Please return all samples by the date listed above. Thank you!"})]})]})},Qoe=()=>qs({queryKey:["currentUser"],queryFn:Soe}),IG={fullName:"",email:"",phoneNumber:"",address:""},OG=e=>{if(!e)return e;const t=e.replace(/[^\d]/g,""),r=t.length;return r<4?t:r<7?`(${t.slice(0,3)}) ${t.slice(3)}`:`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,10)}`},PG=(e,t)=>{const r={};e.fullName.trim()||(r.fullName="Full name is required.");const n=/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/;e.email&&!n.test(e.email)&&(r.email="Must be a valid format (e.g., user@domain.com)."),e.email&&e.email!==t&&(r.confirmEmail="Emails do not match.");const i=e.phoneNumber.replace(/[^\d]/g,"");return e.phoneNumber&&i.length!==10&&(r.phoneNumber="Phone number must be exactly 10 digits."),r},s9=({isOpen:e,onClose:t,customer:r,initialData:n,onSaveSuccess:i})=>{const{data:a}=Qoe(),{createCustomer:s,updateCustomer:o,deleteCustomer:l}=soe(),[c,d]=I.useState(IG),[f,p]=I.useState(""),[m,x]=I.useState({}),y=a==null?void 0:a.roles.includes("Admin"),b=r!==null;I.useEffect(()=>{if(e){if(b&&r){const P=r.email||"";d({fullName:r.fullName||"",email:P,phoneNumber:r.phoneNumber?OG(r.phoneNumber):"",address:r.address||""}),p(P)}else d({...IG,fullName:(n==null?void 0:n.fullName)||""}),p("");x({})}},[e,r,b,n]),I.useEffect(()=>{e&&x(PG(c,f))},[c,f,e]);const S=P=>{const{name:O,value:D}=P.target;d(O==="phoneNumber"?L=>({...L,phoneNumber:OG(D)}):L=>({...L,[O]:D}))},_=async P=>{P.preventDefault();const O=PG(c,f);if(Object.keys(O).length>0){x(O),Re.error("Please fix the errors before submitting.");return}const D={...c,phoneNumber:c.phoneNumber.replace(/[^\d]/g,"")};try{if(b&&r)await o.mutateAsync({...r,...D}),Re.success("Customer updated!"),t();else{const L=await s.mutateAsync(D);Re.success("Customer created!"),i&&i(L),t()}}catch{}},C=async()=>{if(r&&window.confirm(`Delete ${r.fullName}?`))try{await l.mutateAsync(r.id),Re.success("Customer deleted."),t()}catch{}};if(!e)return null;const A=s.isPending||o.isPending||l.isPending,j=A||Object.keys(m).length>0;return u.jsx("div",{className:"fixed inset-0 bg-black/75 flex justify-center z-50 overflow-y-auto",children:u.jsxs("div",{className:"bg-surface-container-high w-full min-h-full md:min-h-0 md:h-auto md:max-h-[90vh] md:max-w-md md:rounded-xl shadow-2xl flex flex-col border border-outline/10 md:my-auto relative",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center bg-surface-container-low md:rounded-t-xl",children:[u.jsxs("h2",{className:"text-xl font-bold text-text-primary flex items-center gap-2",children:[u.jsx(pc,{className:"text-primary"}),b?"Edit Customer":"New Customer"]}),u.jsx("button",{onClick:t,className:"p-2 hover:bg-surface-container-highest rounded-full text-text-secondary hover:text-text-primary",children:u.jsx(tn,{size:24})})]}),u.jsxs("form",{onSubmit:_,noValidate:!0,className:"flex flex-col h-full md:h-auto",children:[u.jsxs("div",{className:"p-6 space-y-4 flex-grow overflow-y-auto",children:[u.jsxs("div",{children:[u.jsx("input",{type:"text",name:"fullName",placeholder:"Full Name",value:c.fullName,onChange:S,className:`w-full p-3 bg-surface-container-highest border-b-2 rounded-t-md text-text-primary placeholder-text-secondary focus:outline-none focus:border-primary transition-colors ${m.fullName?"border-error":"border-transparent"}`}),m.fullName&&u.jsx("p",{className:"text-error text-xs mt-1 ml-1 font-medium",children:m.fullName})]}),u.jsxs("div",{children:[u.jsx("input",{type:"email",name:"email",placeholder:"Email (Optional)",value:c.email,onChange:S,className:`w-full p-3 bg-surface-container-highest border-b-2 rounded-t-md text-text-primary placeholder-text-secondary focus:outline-none focus:border-primary transition-colors ${m.email?"border-error":"border-transparent"}`}),m.email&&u.jsx("p",{className:"text-error text-xs mt-1 ml-1 font-medium",children:m.email})]}),c.email&&u.jsxs("div",{children:[u.jsx("input",{type:"email",name:"confirmEmail",placeholder:"Confirm Email",value:f,onChange:P=>p(P.target.value),className:`w-full p-3 bg-surface-container-highest border-b-2 rounded-t-md text-text-primary placeholder-text-secondary focus:outline-none focus:border-primary transition-colors ${m.confirmEmail?"border-error":"border-transparent"}`}),m.confirmEmail&&u.jsx("p",{className:"text-error text-xs mt-1 ml-1 font-medium",children:m.confirmEmail})]}),u.jsxs("div",{children:[u.jsx("input",{type:"tel",name:"phoneNumber",placeholder:"Phone Number",value:c.phoneNumber,onChange:S,className:`w-full p-3 bg-surface-container-highest border-b-2 rounded-t-md text-text-primary placeholder-text-secondary focus:outline-none focus:border-primary transition-colors ${m.phoneNumber?"border-error":"border-transparent"}`,maxLength:14}),m.phoneNumber&&u.jsx("p",{className:"text-error text-xs mt-1 ml-1 font-medium",children:m.phoneNumber})]}),u.jsx("input",{type:"text",name:"address",placeholder:"Address",value:c.address,onChange:S,className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary placeholder-text-secondary focus:outline-none focus:border-primary transition-colors"})]}),u.jsxs("div",{className:"p-4 border-t border-outline/10 bg-surface-container-low md:rounded-b-xl flex justify-end gap-3 shrink-0",children:[u.jsx("button",{type:"button",onClick:t,className:"py-2 px-6 bg-surface hover:bg-surface-container-highest border border-outline/20 rounded-full text-text-primary font-medium transition-colors",disabled:A,children:"Cancel"}),b&&y&&u.jsxs("button",{type:"button",onClick:C,className:"py-2 px-6 bg-error-container hover:bg-error/20 text-error rounded-full font-semibold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed mr-auto transition-colors",disabled:A,children:[u.jsx(wo,{size:16}),l.isPending?"Deleting...":"Delete"]}),u.jsx("button",{type:"submit",className:"py-2 px-6 bg-primary hover:bg-primary-hover rounded-full text-on-primary font-semibold shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-all",disabled:j,children:s.isPending||o.isPending?"Saving...":b?"Save Changes":"Add Customer"})]})]})]})})};function Tr(){return Tr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tr.apply(null,arguments)}function px(e){"@babel/helpers - typeof";return px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},px(e)}function I5e(e,t){if(px(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(px(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Joe(e){var t=I5e(e,"string");return px(t)=="symbol"?t:t+""}function ef(e,t,r){return(t=Joe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Cr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RG(Object(r),!0).forEach(function(n){ef(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function O5e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Joe(n.key),n)}}function P5e(e,t,r){return t&&jG(e.prototype,t),r&&jG(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function A8(e,t){return A8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},A8(e,t)}function R5e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A8(e,t)}function yT(e){return yT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yT(e)}function Zoe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zoe=function(){return!!e})()}function j5e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D5e(e,t){if(t&&(px(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j5e(e)}function M5e(e){var t=Zoe();return function(){var r,n=yT(e);if(t){var i=yT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return D5e(this,r)}}function T8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function F5e(e){if(Array.isArray(e))return T8(e)}function L5e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ele(e,t){if(e){if(typeof e=="string")return T8(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T8(e,t):void 0}}function B5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wo(e){return F5e(e)||L5e(e)||ele(e)||B5e()}function U5e(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function $5e(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var z5e=function(){function e(r){var n=this;this._insertTag=function(i){var a;n.tags.length===0?n.insertionPoint?a=n.insertionPoint.nextSibling:n.prepend?a=n.container.firstChild:a=n.before:a=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,a),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag($5e(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var a=U5e(i);try{a.insertRule(n,a.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},e}(),ro="-ms-",bT="-moz-",qn="-webkit-",tle="comm",o9="rule",l9="decl",H5e="@import",rle="@keyframes",W5e="@layer",V5e=Math.abs,K4=String.fromCharCode,q5e=Object.assign;function G5e(e,t){return Fs(e,0)^45?(((t<<2^Fs(e,0))<<2^Fs(e,1))<<2^Fs(e,2))<<2^Fs(e,3):0}function nle(e){return e.trim()}function K5e(e,t){return(e=t.exec(e))?e[0]:e}function Kn(e,t,r){return e.replace(t,r)}function I8(e,t){return e.indexOf(t)}function Fs(e,t){return e.charCodeAt(t)|0}function TS(e,t,r){return e.slice(t,r)}function Vd(e){return e.length}function c9(e){return e.length}function I_(e,t){return t.push(e),e}function X5e(e,t){return e.map(t).join("")}var X4=1,Cy=1,ile=0,jl=0,ja=0,Cb="";function Y4(e,t,r,n,i,a,s){return{value:e,root:t,parent:r,type:n,props:i,children:a,line:X4,column:Cy,length:s,return:""}}function Ow(e,t){return q5e(Y4("",null,null,"",null,null,0),e,{length:-e.length},t)}function Y5e(){return ja}function Q5e(){return ja=jl>0?Fs(Cb,--jl):0,Cy--,ja===10&&(Cy=1,X4--),ja}function cc(){return ja=jl<ile?Fs(Cb,jl++):0,Cy++,ja===10&&(Cy=1,X4++),ja}function lf(){return Fs(Cb,jl)}function eA(){return jl}function mC(e,t){return TS(Cb,e,t)}function IS(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ale(e){return X4=Cy=1,ile=Vd(Cb=e),jl=0,[]}function sle(e){return Cb="",e}function tA(e){return nle(mC(jl-1,O8(e===91?e+2:e===40?e+1:e)))}function J5e(e){for(;(ja=lf())&&ja<33;)cc();return IS(e)>2||IS(ja)>3?"":" "}function Z5e(e,t){for(;--t&&cc()&&!(ja<48||ja>102||ja>57&&ja<65||ja>70&&ja<97););return mC(e,eA()+(t<6&&lf()==32&&cc()==32))}function O8(e){for(;cc();)switch(ja){case e:return jl;case 34:case 39:e!==34&&e!==39&&O8(ja);break;case 40:e===41&&O8(e);break;case 92:cc();break}return jl}function eLe(e,t){for(;cc()&&e+ja!==57;)if(e+ja===84&&lf()===47)break;return"/*"+mC(t,jl-1)+"*"+K4(e===47?e:cc())}function tLe(e){for(;!IS(lf());)cc();return mC(e,jl)}function rLe(e){return sle(rA("",null,null,null,[""],e=ale(e),0,[0],e))}function rA(e,t,r,n,i,a,s,o,l){for(var c=0,d=0,f=s,p=0,m=0,x=0,y=1,b=1,S=1,_=0,C="",A=i,j=a,P=n,O=C;b;)switch(x=_,_=cc()){case 40:if(x!=108&&Fs(O,f-1)==58){I8(O+=Kn(tA(_),"&","&\f"),"&\f")!=-1&&(S=-1);break}case 34:case 39:case 91:O+=tA(_);break;case 9:case 10:case 13:case 32:O+=J5e(x);break;case 92:O+=Z5e(eA()-1,7);continue;case 47:switch(lf()){case 42:case 47:I_(nLe(eLe(cc(),eA()),t,r),l);break;default:O+="/"}break;case 123*y:o[c++]=Vd(O)*S;case 125*y:case 59:case 0:switch(_){case 0:case 125:b=0;case 59+d:S==-1&&(O=Kn(O,/\f/g,"")),m>0&&Vd(O)-f&&I_(m>32?MG(O+";",n,r,f-1):MG(Kn(O," ","")+";",n,r,f-2),l);break;case 59:O+=";";default:if(I_(P=DG(O,t,r,c,d,i,o,C,A=[],j=[],f),a),_===123)if(d===0)rA(O,t,P,P,A,a,f,o,j);else switch(p===99&&Fs(O,3)===110?100:p){case 100:case 108:case 109:case 115:rA(e,P,P,n&&I_(DG(e,P,P,0,0,i,o,C,i,A=[],f),j),i,j,f,o,n?A:j);break;default:rA(O,P,P,P,[""],j,0,o,j)}}c=d=m=0,y=S=1,C=O="",f=s;break;case 58:f=1+Vd(O),m=x;default:if(y<1){if(_==123)--y;else if(_==125&&y++==0&&Q5e()==125)continue}switch(O+=K4(_),_*y){case 38:S=d>0?1:(O+="\f",-1);break;case 44:o[c++]=(Vd(O)-1)*S,S=1;break;case 64:lf()===45&&(O+=tA(cc())),p=lf(),d=f=Vd(C=O+=tLe(eA())),_++;break;case 45:x===45&&Vd(O)==2&&(y=0)}}return a}function DG(e,t,r,n,i,a,s,o,l,c,d){for(var f=i-1,p=i===0?a:[""],m=c9(p),x=0,y=0,b=0;x<n;++x)for(var S=0,_=TS(e,f+1,f=V5e(y=s[x])),C=e;S<m;++S)(C=nle(y>0?p[S]+" "+_:Kn(_,/&\f/g,p[S])))&&(l[b++]=C);return Y4(e,t,r,i===0?o9:o,l,c,d)}function nLe(e,t,r){return Y4(e,t,r,tle,K4(Y5e()),TS(e,2,-2),0)}function MG(e,t,r,n){return Y4(e,t,r,l9,TS(e,0,n),TS(e,n+1,-1),n)}function Mv(e,t){for(var r="",n=c9(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function iLe(e,t,r,n){switch(e.type){case W5e:if(e.children.length)break;case H5e:case l9:return e.return=e.return||e.value;case tle:return"";case rle:return e.return=e.value+"{"+Mv(e.children,n)+"}";case o9:e.value=e.props.join(",")}return Vd(r=Mv(e.children,n))?e.return=e.value+"{"+r+"}":""}function aLe(e){var t=c9(e);return function(r,n,i,a){for(var s="",o=0;o<t;o++)s+=e[o](r,n,i,a)||"";return s}}function sLe(e){return function(t){t.root||(t=t.return)&&e(t)}}function oLe(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var lLe=function(t,r,n){for(var i=0,a=0;i=a,a=lf(),i===38&&a===12&&(r[n]=1),!IS(a);)cc();return mC(t,jl)},cLe=function(t,r){var n=-1,i=44;do switch(IS(i)){case 0:i===38&&lf()===12&&(r[n]=1),t[n]+=lLe(jl-1,r,n);break;case 2:t[n]+=tA(i);break;case 4:if(i===44){t[++n]=lf()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=K4(i)}while(i=cc());return t},uLe=function(t,r){return sle(cLe(ale(t),r))},FG=new WeakMap,dLe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!FG.get(n))&&!i){FG.set(t,!0);for(var a=[],s=uLe(r,a),o=n.props,l=0,c=0;l<s.length;l++)for(var d=0;d<o.length;d++,c++)t.props[c]=a[l]?s[l].replace(/&\f/g,o[d]):o[d]+" "+s[l]}}},fLe=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function ole(e,t){switch(G5e(e,t)){case 5103:return qn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return qn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return qn+e+bT+e+ro+e+e;case 6828:case 4268:return qn+e+ro+e+e;case 6165:return qn+e+ro+"flex-"+e+e;case 5187:return qn+e+Kn(e,/(\w+).+(:[^]+)/,qn+"box-$1$2"+ro+"flex-$1$2")+e;case 5443:return qn+e+ro+"flex-item-"+Kn(e,/flex-|-self/,"")+e;case 4675:return qn+e+ro+"flex-line-pack"+Kn(e,/align-content|flex-|-self/,"")+e;case 5548:return qn+e+ro+Kn(e,"shrink","negative")+e;case 5292:return qn+e+ro+Kn(e,"basis","preferred-size")+e;case 6060:return qn+"box-"+Kn(e,"-grow","")+qn+e+ro+Kn(e,"grow","positive")+e;case 4554:return qn+Kn(e,/([^-])(transform)/g,"$1"+qn+"$2")+e;case 6187:return Kn(Kn(Kn(e,/(zoom-|grab)/,qn+"$1"),/(image-set)/,qn+"$1"),e,"")+e;case 5495:case 3959:return Kn(e,/(image-set\([^]*)/,qn+"$1$`$1");case 4968:return Kn(Kn(e,/(.+:)(flex-)?(.*)/,qn+"box-pack:$3"+ro+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+qn+e+e;case 4095:case 3583:case 4068:case 2532:return Kn(e,/(.+)-inline(.+)/,qn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Vd(e)-1-t>6)switch(Fs(e,t+1)){case 109:if(Fs(e,t+4)!==45)break;case 102:return Kn(e,/(.+:)(.+)-([^]+)/,"$1"+qn+"$2-$3$1"+bT+(Fs(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~I8(e,"stretch")?ole(Kn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Fs(e,t+1)!==115)break;case 6444:switch(Fs(e,Vd(e)-3-(~I8(e,"!important")&&10))){case 107:return Kn(e,":",":"+qn)+e;case 101:return Kn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+qn+(Fs(e,14)===45?"inline-":"")+"box$3$1"+qn+"$2$3$1"+ro+"$2box$3")+e}break;case 5936:switch(Fs(e,t+11)){case 114:return qn+e+ro+Kn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return qn+e+ro+Kn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return qn+e+ro+Kn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return qn+e+ro+e+e}return e}var hLe=function(t,r,n,i){if(t.length>-1&&!t.return)switch(t.type){case l9:t.return=ole(t.value,t.length);break;case rle:return Mv([Ow(t,{value:Kn(t.value,"@","@"+qn)})],i);case o9:if(t.length)return X5e(t.props,function(a){switch(K5e(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Mv([Ow(t,{props:[Kn(a,/:(read-\w+)/,":"+bT+"$1")]})],i);case"::placeholder":return Mv([Ow(t,{props:[Kn(a,/:(plac\w+)/,":"+qn+"input-$1")]}),Ow(t,{props:[Kn(a,/:(plac\w+)/,":"+bT+"$1")]}),Ow(t,{props:[Kn(a,/:(plac\w+)/,ro+"input-$1")]})],i)}return""})}},pLe=[hLe],mLe=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(y){var b=y.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var i=t.stylisPlugins||pLe,a={},s,o=[];s=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(y){for(var b=y.getAttribute("data-emotion").split(" "),S=1;S<b.length;S++)a[b[S]]=!0;o.push(y)});var l,c=[dLe,fLe];{var d,f=[iLe,sLe(function(y){d.insert(y)})],p=aLe(c.concat(i,f)),m=function(b){return Mv(rLe(b),p)};l=function(b,S,_,C){d=_,m(b?b+"{"+S.styles+"}":S.styles),C&&(x.inserted[S.name]=!0)}}var x={key:r,sheet:new z5e({key:r,container:s,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:l};return x.sheet.hydrate(o),x},lle={exports:{}},li={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _s=typeof Symbol=="function"&&Symbol.for,u9=_s?Symbol.for("react.element"):60103,d9=_s?Symbol.for("react.portal"):60106,Q4=_s?Symbol.for("react.fragment"):60107,J4=_s?Symbol.for("react.strict_mode"):60108,Z4=_s?Symbol.for("react.profiler"):60114,e3=_s?Symbol.for("react.provider"):60109,t3=_s?Symbol.for("react.context"):60110,f9=_s?Symbol.for("react.async_mode"):60111,r3=_s?Symbol.for("react.concurrent_mode"):60111,n3=_s?Symbol.for("react.forward_ref"):60112,i3=_s?Symbol.for("react.suspense"):60113,gLe=_s?Symbol.for("react.suspense_list"):60120,a3=_s?Symbol.for("react.memo"):60115,s3=_s?Symbol.for("react.lazy"):60116,xLe=_s?Symbol.for("react.block"):60121,vLe=_s?Symbol.for("react.fundamental"):60117,yLe=_s?Symbol.for("react.responder"):60118,bLe=_s?Symbol.for("react.scope"):60119;function Ec(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case u9:switch(e=e.type,e){case f9:case r3:case Q4:case Z4:case J4:case i3:return e;default:switch(e=e&&e.$$typeof,e){case t3:case n3:case s3:case a3:case e3:return e;default:return t}}case d9:return t}}}function cle(e){return Ec(e)===r3}li.AsyncMode=f9;li.ConcurrentMode=r3;li.ContextConsumer=t3;li.ContextProvider=e3;li.Element=u9;li.ForwardRef=n3;li.Fragment=Q4;li.Lazy=s3;li.Memo=a3;li.Portal=d9;li.Profiler=Z4;li.StrictMode=J4;li.Suspense=i3;li.isAsyncMode=function(e){return cle(e)||Ec(e)===f9};li.isConcurrentMode=cle;li.isContextConsumer=function(e){return Ec(e)===t3};li.isContextProvider=function(e){return Ec(e)===e3};li.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===u9};li.isForwardRef=function(e){return Ec(e)===n3};li.isFragment=function(e){return Ec(e)===Q4};li.isLazy=function(e){return Ec(e)===s3};li.isMemo=function(e){return Ec(e)===a3};li.isPortal=function(e){return Ec(e)===d9};li.isProfiler=function(e){return Ec(e)===Z4};li.isStrictMode=function(e){return Ec(e)===J4};li.isSuspense=function(e){return Ec(e)===i3};li.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Q4||e===r3||e===Z4||e===J4||e===i3||e===gLe||typeof e=="object"&&e!==null&&(e.$$typeof===s3||e.$$typeof===a3||e.$$typeof===e3||e.$$typeof===t3||e.$$typeof===n3||e.$$typeof===vLe||e.$$typeof===yLe||e.$$typeof===bLe||e.$$typeof===xLe)};li.typeOf=Ec;lle.exports=li;var ule=lle.exports,dle=ule,wLe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},SLe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},fle={};fle[dle.ForwardRef]=wLe;fle[dle.Memo]=SLe;var ELe=!0;function CLe(e,t,r){var n="";return r.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(n+=i+" ")}),n}var hle=function(t,r,n){var i=t.key+"-"+r.name;(n===!1||ELe===!1)&&t.registered[i]===void 0&&(t.registered[i]=r.styles)},kLe=function(t,r,n){hle(t,r,n);var i=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var a=r;do t.insert(r===a?"."+i:"",a,t.sheet,!0),a=a.next;while(a!==void 0)}};function _Le(e){for(var t=0,r,n=0,i=e.length;i>=4;++n,i-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var NLe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ALe=/[A-Z]|^ms/g,TLe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,ple=function(t){return t.charCodeAt(1)===45},LG=function(t){return t!=null&&typeof t!="boolean"},tD=oLe(function(e){return ple(e)?e:e.replace(ALe,"-$&").toLowerCase()}),BG=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(TLe,function(n,i,a){return qd={name:i,styles:a,next:qd},i})}return NLe[t]!==1&&!ple(t)&&typeof r=="number"&&r!==0?r+"px":r};function OS(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var i=r;if(i.anim===1)return qd={name:i.name,styles:i.styles,next:qd},i.name;var a=r;if(a.styles!==void 0){var s=a.next;if(s!==void 0)for(;s!==void 0;)qd={name:s.name,styles:s.styles,next:qd},s=s.next;var o=a.styles+";";return o}return ILe(e,t,r)}case"function":{if(e!==void 0){var l=qd,c=r(e);return qd=l,OS(e,t,c)}break}}var d=r;return d}function ILe(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=OS(e,t,r[i])+";";else for(var a in r){var s=r[a];if(typeof s!="object"){var o=s;LG(o)&&(n+=tD(a)+":"+BG(a,o)+";")}else if(Array.isArray(s)&&typeof s[0]=="string"&&t==null)for(var l=0;l<s.length;l++)LG(s[l])&&(n+=tD(a)+":"+BG(a,s[l])+";");else{var c=OS(e,t,s);switch(a){case"animation":case"animationName":{n+=tD(a)+":"+c+";";break}default:n+=a+"{"+c+"}"}}}return n}var UG=/label:\s*([^\s;{]+)\s*(;|$)/g,qd;function mle(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,i="";qd=void 0;var a=e[0];if(a==null||a.raw===void 0)n=!1,i+=OS(r,t,a);else{var s=a;i+=s[0]}for(var o=1;o<e.length;o++)if(i+=OS(r,t,e[o]),n){var l=a;i+=l[o]}UG.lastIndex=0;for(var c="",d;(d=UG.exec(i))!==null;)c+="-"+d[1];var f=_Le(i)+c;return{name:f,styles:i,next:qd}}var OLe=function(t){return t()},PLe=ay.useInsertionEffect?ay.useInsertionEffect:!1,RLe=PLe||OLe,gle=I.createContext(typeof HTMLElement<"u"?mLe({key:"css"}):null);gle.Provider;var jLe=function(t){return I.forwardRef(function(r,n){var i=I.useContext(gle);return t(r,i,n)})},DLe=I.createContext({}),h9={}.hasOwnProperty,P8="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",MLe=function(t,r){var n={};for(var i in r)h9.call(r,i)&&(n[i]=r[i]);return n[P8]=t,n},FLe=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return hle(r,n,i),RLe(function(){return kLe(r,n,i)}),null},LLe=jLe(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var i=e[P8],a=[n],s="";typeof e.className=="string"?s=CLe(t.registered,a,e.className):e.className!=null&&(s=e.className+" ");var o=mle(a,void 0,I.useContext(DLe));s+=t.key+"-"+o.name;var l={};for(var c in e)h9.call(e,c)&&c!=="css"&&c!==P8&&(l[c]=e[c]);return l.className=s,r&&(l.ref=r),I.createElement(I.Fragment,null,I.createElement(FLe,{cache:t,serialized:o,isStringTag:typeof i=="string"}),I.createElement(i,l))}),BLe=LLe,br=function(t,r){var n=arguments;if(r==null||!h9.call(r,"css"))return I.createElement.apply(void 0,n);var i=n.length,a=new Array(i);a[0]=BLe,a[1]=MLe(t,r);for(var s=2;s<i;s++)a[s]=n[s];return I.createElement.apply(null,a)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(br||(br={}));function p9(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return mle(t)}function ULe(){var e=p9.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function $Le(e){if(Array.isArray(e))return e}function zLe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function HLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eh(e,t){return $Le(e)||zLe(e,t)||ele(e,t)||HLe()}function WLe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function kf(e,t){if(e==null)return{};var r,n,i=WLe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function VLe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const qLe=Math.min,GLe=Math.max,wT=Math.round,O_=Math.floor,ST=e=>({x:e,y:e});function KLe(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function o3(){return typeof window<"u"}function xle(e){return yle(e)?(e.nodeName||"").toLowerCase():"#document"}function Wh(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function vle(e){var t;return(t=(yle(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function yle(e){return o3()?e instanceof Node||e instanceof Wh(e).Node:!1}function XLe(e){return o3()?e instanceof Element||e instanceof Wh(e).Element:!1}function m9(e){return o3()?e instanceof HTMLElement||e instanceof Wh(e).HTMLElement:!1}function $G(e){return!o3()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Wh(e).ShadowRoot}const YLe=new Set(["inline","contents"]);function ble(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=g9(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!YLe.has(i)}function QLe(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const JLe=new Set(["html","body","#document"]);function ZLe(e){return JLe.has(xle(e))}function g9(e){return Wh(e).getComputedStyle(e)}function e7e(e){if(xle(e)==="html")return e;const t=e.assignedSlot||e.parentNode||$G(e)&&e.host||vle(e);return $G(t)?t.host:t}function wle(e){const t=e7e(e);return ZLe(t)?e.ownerDocument?e.ownerDocument.body:e.body:m9(t)&&ble(t)?t:wle(t)}function ET(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=wle(e),a=i===((n=e.ownerDocument)==null?void 0:n.body),s=Wh(i);if(a){const o=R8(s);return t.concat(s,s.visualViewport||[],ble(i)?i:[],o&&r?ET(o):[])}return t.concat(i,ET(i,[],r))}function R8(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function t7e(e){const t=g9(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=m9(e),a=i?e.offsetWidth:r,s=i?e.offsetHeight:n,o=wT(r)!==a||wT(n)!==s;return o&&(r=a,n=s),{width:r,height:n,$:o}}function x9(e){return XLe(e)?e:e.contextElement}function zG(e){const t=x9(e);if(!m9(t))return ST(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:a}=t7e(t);let s=(a?wT(r.width):r.width)/n,o=(a?wT(r.height):r.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const r7e=ST(0);function n7e(e){const t=Wh(e);return!QLe()||!t.visualViewport?r7e:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function i7e(e,t,r){return!1}function HG(e,t,r,n){t===void 0&&(t=!1);const i=e.getBoundingClientRect(),a=x9(e);let s=ST(1);t&&(s=zG(e));const o=i7e()?n7e(a):ST(0);let l=(i.left+o.x)/s.x,c=(i.top+o.y)/s.y,d=i.width/s.x,f=i.height/s.y;if(a){const p=Wh(a),m=n;let x=p,y=R8(x);for(;y&&n&&m!==x;){const b=zG(y),S=y.getBoundingClientRect(),_=g9(y),C=S.left+(y.clientLeft+parseFloat(_.paddingLeft))*b.x,A=S.top+(y.clientTop+parseFloat(_.paddingTop))*b.y;l*=b.x,c*=b.y,d*=b.x,f*=b.y,l+=C,c+=A,x=Wh(y),y=R8(x)}}return KLe({width:d,height:f,x:l,y:c})}function Sle(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function a7e(e,t){let r=null,n;const i=vle(e);function a(){var o;clearTimeout(n),(o=r)==null||o.disconnect(),r=null}function s(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),a();const c=e.getBoundingClientRect(),{left:d,top:f,width:p,height:m}=c;if(o||t(),!p||!m)return;const x=O_(f),y=O_(i.clientWidth-(d+p)),b=O_(i.clientHeight-(f+m)),S=O_(d),C={rootMargin:-x+"px "+-y+"px "+-b+"px "+-S+"px",threshold:GLe(0,qLe(1,l))||1};let A=!0;function j(P){const O=P[0].intersectionRatio;if(O!==l){if(!A)return s();O?s(!1,O):n=setTimeout(()=>{s(!1,1e-7)},1e3)}O===1&&!Sle(c,e.getBoundingClientRect())&&s(),A=!1}try{r=new IntersectionObserver(j,{...C,root:i.ownerDocument})}catch{r=new IntersectionObserver(j,C)}r.observe(e)}return s(!0),a}function s7e(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=x9(e),d=i||a?[...c?ET(c):[],...ET(t)]:[];d.forEach(S=>{i&&S.addEventListener("scroll",r,{passive:!0}),a&&S.addEventListener("resize",r)});const f=c&&o?a7e(c,r):null;let p=-1,m=null;s&&(m=new ResizeObserver(S=>{let[_]=S;_&&_.target===c&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var C;(C=m)==null||C.observe(t)})),r()}),c&&!l&&m.observe(c),m.observe(t));let x,y=l?HG(e):null;l&&b();function b(){const S=HG(e);y&&!Sle(y,S)&&r(),y=S,x=requestAnimationFrame(b)}return r(),()=>{var S;d.forEach(_=>{i&&_.removeEventListener("scroll",r),a&&_.removeEventListener("resize",r)}),f==null||f(),(S=m)==null||S.disconnect(),m=null,l&&cancelAnimationFrame(x)}}var j8=I.useLayoutEffect,o7e=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],CT=function(){};function l7e(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function c7e(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var a=[].concat(n);if(t&&e)for(var s in t)t.hasOwnProperty(s)&&t[s]&&a.push("".concat(l7e(e,s)));return a.filter(function(o){return o}).map(function(o){return String(o).trim()}).join(" ")}var kT=function(t){return v7e(t)?t.filter(Boolean):px(t)==="object"&&t!==null?[t]:[]},Ele=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var r=kf(t,o7e);return Cr({},r)},ca=function(t,r,n){var i=t.cx,a=t.getStyles,s=t.getClassNames,o=t.className;return{css:a(r,t),className:i(n??{},s(r,t),o)}};function l3(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function u7e(e){return l3(e)?window.innerHeight:e.clientHeight}function Cle(e){return l3(e)?window.pageYOffset:e.scrollTop}function _T(e,t){if(l3(e)){window.scrollTo(0,t);return}e.scrollTop=t}function d7e(e){var t=getComputedStyle(e),r=t.position==="absolute",n=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var i=e;i=i.parentElement;)if(t=getComputedStyle(i),!(r&&t.position==="static")&&n.test(t.overflow+t.overflowY+t.overflowX))return i;return document.documentElement}function f7e(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function P_(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:CT,i=Cle(e),a=t-i,s=10,o=0;function l(){o+=s;var c=f7e(o,i,a,r);_T(e,c),o<r?window.requestAnimationFrame(l):n(e)}l()}function WG(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),i=t.offsetHeight/3;n.bottom+i>r.bottom?_T(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+i,e.scrollHeight)):n.top-i<r.top&&_T(e,Math.max(t.offsetTop-i,0))}function h7e(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function VG(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function p7e(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var kle=!1,m7e={get passive(){return kle=!0}},R_=typeof window<"u"?window:{};R_.addEventListener&&R_.removeEventListener&&(R_.addEventListener("p",CT,m7e),R_.removeEventListener("p",CT,!1));var g7e=kle;function x7e(e){return e!=null}function v7e(e){return Array.isArray(e)}function n2(e,t,r){return e?t:r}var y7e=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var a=Object.entries(t).filter(function(s){var o=Eh(s,1),l=o[0];return!n.includes(l)});return a.reduce(function(s,o){var l=Eh(o,2),c=l[0],d=l[1];return s[c]=d,s},{})},b7e=["children","innerProps"],w7e=["children","innerProps"];function S7e(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,i=e.placement,a=e.shouldScroll,s=e.isFixedPosition,o=e.controlHeight,l=d7e(r),c={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return c;var d=l.getBoundingClientRect(),f=d.height,p=r.getBoundingClientRect(),m=p.bottom,x=p.height,y=p.top,b=r.offsetParent.getBoundingClientRect(),S=b.top,_=s?window.innerHeight:u7e(l),C=Cle(l),A=parseInt(getComputedStyle(r).marginBottom,10),j=parseInt(getComputedStyle(r).marginTop,10),P=S-j,O=_-y,D=P+C,L=f-C-y,B=m-_+C+A,H=C+y-j,z=160;switch(i){case"auto":case"bottom":if(O>=x)return{placement:"bottom",maxHeight:t};if(L>=x&&!s)return a&&P_(l,B,z),{placement:"bottom",maxHeight:t};if(!s&&L>=n||s&&O>=n){a&&P_(l,B,z);var ie=s?O-A:L-A;return{placement:"bottom",maxHeight:ie}}if(i==="auto"||s){var X=t,W=s?P:D;return W>=n&&(X=Math.min(W-A-o,t)),{placement:"top",maxHeight:X}}if(i==="bottom")return a&&_T(l,B),{placement:"bottom",maxHeight:t};break;case"top":if(P>=x)return{placement:"top",maxHeight:t};if(D>=x&&!s)return a&&P_(l,H,z),{placement:"top",maxHeight:t};if(!s&&D>=n||s&&P>=n){var Q=t;return(!s&&D>=n||s&&P>=n)&&(Q=s?P-j:D-j),a&&P_(l,H,z),{placement:"top",maxHeight:Q}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return c}function E7e(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var _le=function(t){return t==="auto"?"bottom":t},C7e=function(t,r){var n,i=t.placement,a=t.theme,s=a.borderRadius,o=a.spacing,l=a.colors;return Cr((n={label:"menu"},ef(n,E7e(i),"100%"),ef(n,"position","absolute"),ef(n,"width","100%"),ef(n,"zIndex",1),n),r?{}:{backgroundColor:l.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:o.menuGutter,marginTop:o.menuGutter})},Nle=I.createContext(null),k7e=function(t){var r=t.children,n=t.minMenuHeight,i=t.maxMenuHeight,a=t.menuPlacement,s=t.menuPosition,o=t.menuShouldScrollIntoView,l=t.theme,c=I.useContext(Nle)||{},d=c.setPortalPlacement,f=I.useRef(null),p=I.useState(i),m=Eh(p,2),x=m[0],y=m[1],b=I.useState(null),S=Eh(b,2),_=S[0],C=S[1],A=l.spacing.controlHeight;return j8(function(){var j=f.current;if(j){var P=s==="fixed",O=o&&!P,D=S7e({maxHeight:i,menuEl:j,minHeight:n,placement:a,shouldScroll:O,isFixedPosition:P,controlHeight:A});y(D.maxHeight),C(D.placement),d==null||d(D.placement)}},[i,a,s,o,n,d,A]),r({ref:f,placerProps:Cr(Cr({},t),{},{placement:_||_le(a),maxHeight:x})})},_7e=function(t){var r=t.children,n=t.innerRef,i=t.innerProps;return br("div",Tr({},ca(t,"menu",{menu:!0}),{ref:n},i),r)},N7e=_7e,A7e=function(t,r){var n=t.maxHeight,i=t.theme.spacing.baseUnit;return Cr({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},r?{}:{paddingBottom:i,paddingTop:i})},T7e=function(t){var r=t.children,n=t.innerProps,i=t.innerRef,a=t.isMulti;return br("div",Tr({},ca(t,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:i},n),r)},Ale=function(t,r){var n=t.theme,i=n.spacing.baseUnit,a=n.colors;return Cr({textAlign:"center"},r?{}:{color:a.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},I7e=Ale,O7e=Ale,P7e=function(t){var r=t.children,n=r===void 0?"No options":r,i=t.innerProps,a=kf(t,b7e);return br("div",Tr({},ca(Cr(Cr({},a),{},{children:n,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),n)},R7e=function(t){var r=t.children,n=r===void 0?"Loading...":r,i=t.innerProps,a=kf(t,w7e);return br("div",Tr({},ca(Cr(Cr({},a),{},{children:n,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),n)},j7e=function(t){var r=t.rect,n=t.offset,i=t.position;return{left:r.left,position:i,top:n,width:r.width,zIndex:1}},D7e=function(t){var r=t.appendTo,n=t.children,i=t.controlElement,a=t.innerProps,s=t.menuPlacement,o=t.menuPosition,l=I.useRef(null),c=I.useRef(null),d=I.useState(_le(s)),f=Eh(d,2),p=f[0],m=f[1],x=I.useMemo(function(){return{setPortalPlacement:m}},[]),y=I.useState(null),b=Eh(y,2),S=b[0],_=b[1],C=I.useCallback(function(){if(i){var O=h7e(i),D=o==="fixed"?0:window.pageYOffset,L=O[p]+D;(L!==(S==null?void 0:S.offset)||O.left!==(S==null?void 0:S.rect.left)||O.width!==(S==null?void 0:S.rect.width))&&_({offset:L,rect:O})}},[i,o,p,S==null?void 0:S.offset,S==null?void 0:S.rect.left,S==null?void 0:S.rect.width]);j8(function(){C()},[C]);var A=I.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),i&&l.current&&(c.current=s7e(i,l.current,C,{elementResize:"ResizeObserver"in window}))},[i,C]);j8(function(){A()},[A]);var j=I.useCallback(function(O){l.current=O,A()},[A]);if(!r&&o!=="fixed"||!S)return null;var P=br("div",Tr({ref:j},ca(Cr(Cr({},t),{},{offset:S.offset,position:o,rect:S.rect}),"menuPortal",{"menu-portal":!0}),a),n);return br(Nle.Provider,{value:x},r?Ml.createPortal(P,r):P)},M7e=function(t){var r=t.isDisabled,n=t.isRtl;return{label:"container",direction:n?"rtl":void 0,pointerEvents:r?"none":void 0,position:"relative"}},F7e=function(t){var r=t.children,n=t.innerProps,i=t.isDisabled,a=t.isRtl;return br("div",Tr({},ca(t,"container",{"--is-disabled":i,"--is-rtl":a}),n),r)},L7e=function(t,r){var n=t.theme.spacing,i=t.isMulti,a=t.hasValue,s=t.selectProps.controlShouldRenderValue;return Cr({alignItems:"center",display:i&&a&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},r?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(n.baseUnit*2,"px")})},B7e=function(t){var r=t.children,n=t.innerProps,i=t.isMulti,a=t.hasValue;return br("div",Tr({},ca(t,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":a}),n),r)},U7e=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},$7e=function(t){var r=t.children,n=t.innerProps;return br("div",Tr({},ca(t,"indicatorsContainer",{indicators:!0}),n),r)},qG,z7e=["size"],H7e=["innerProps","isRtl","size"],W7e={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Tle=function(t){var r=t.size,n=kf(t,z7e);return br("svg",Tr({height:r,width:r,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:W7e},n))},v9=function(t){return br(Tle,Tr({size:20},t),br("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},Ile=function(t){return br(Tle,Tr({size:20},t),br("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Ole=function(t,r){var n=t.isFocused,i=t.theme,a=i.spacing.baseUnit,s=i.colors;return Cr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},r?{}:{color:n?s.neutral60:s.neutral20,padding:a*2,":hover":{color:n?s.neutral80:s.neutral40}})},V7e=Ole,q7e=function(t){var r=t.children,n=t.innerProps;return br("div",Tr({},ca(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),r||br(Ile,null))},G7e=Ole,K7e=function(t){var r=t.children,n=t.innerProps;return br("div",Tr({},ca(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),r||br(v9,null))},X7e=function(t,r){var n=t.isDisabled,i=t.theme,a=i.spacing.baseUnit,s=i.colors;return Cr({label:"indicatorSeparator",alignSelf:"stretch",width:1},r?{}:{backgroundColor:n?s.neutral10:s.neutral20,marginBottom:a*2,marginTop:a*2})},Y7e=function(t){var r=t.innerProps;return br("span",Tr({},r,ca(t,"indicatorSeparator",{"indicator-separator":!0})))},Q7e=ULe(qG||(qG=VLe([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),J7e=function(t,r){var n=t.isFocused,i=t.size,a=t.theme,s=a.colors,o=a.spacing.baseUnit;return Cr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},r?{}:{color:n?s.neutral60:s.neutral20,padding:o*2})},rD=function(t){var r=t.delay,n=t.offset;return br("span",{css:p9({animation:"".concat(Q7e," 1s ease-in-out ").concat(r,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Z7e=function(t){var r=t.innerProps,n=t.isRtl,i=t.size,a=i===void 0?4:i,s=kf(t,H7e);return br("div",Tr({},ca(Cr(Cr({},s),{},{innerProps:r,isRtl:n,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),r),br(rD,{delay:0,offset:n}),br(rD,{delay:160,offset:!0}),br(rD,{delay:320,offset:!n}))},e9e=function(t,r){var n=t.isDisabled,i=t.isFocused,a=t.theme,s=a.colors,o=a.borderRadius,l=a.spacing;return Cr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},r?{}:{backgroundColor:n?s.neutral5:s.neutral0,borderColor:n?s.neutral10:i?s.primary:s.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:i?s.primary:s.neutral30}})},t9e=function(t){var r=t.children,n=t.isDisabled,i=t.isFocused,a=t.innerRef,s=t.innerProps,o=t.menuIsOpen;return br("div",Tr({ref:a},ca(t,"control",{control:!0,"control--is-disabled":n,"control--is-focused":i,"control--menu-is-open":o}),s,{"aria-disabled":n||void 0}),r)},r9e=t9e,n9e=["data"],i9e=function(t,r){var n=t.theme.spacing;return r?{}:{paddingBottom:n.baseUnit*2,paddingTop:n.baseUnit*2}},a9e=function(t){var r=t.children,n=t.cx,i=t.getStyles,a=t.getClassNames,s=t.Heading,o=t.headingProps,l=t.innerProps,c=t.label,d=t.theme,f=t.selectProps;return br("div",Tr({},ca(t,"group",{group:!0}),l),br(s,Tr({},o,{selectProps:f,theme:d,getStyles:i,getClassNames:a,cx:n}),c),br("div",null,r))},s9e=function(t,r){var n=t.theme,i=n.colors,a=n.spacing;return Cr({label:"group",cursor:"default",display:"block"},r?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:a.baseUnit*3,paddingRight:a.baseUnit*3,textTransform:"uppercase"})},o9e=function(t){var r=Ele(t);r.data;var n=kf(r,n9e);return br("div",Tr({},ca(t,"groupHeading",{"group-heading":!0}),n))},l9e=a9e,c9e=["innerRef","isDisabled","isHidden","inputClassName"],u9e=function(t,r){var n=t.isDisabled,i=t.value,a=t.theme,s=a.spacing,o=a.colors;return Cr(Cr({visibility:n?"hidden":"visible",transform:i?"translateZ(0)":""},d9e),r?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:o.neutral80})},Ple={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},d9e={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Cr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},Ple)},f9e=function(t){return Cr({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},Ple)},h9e=function(t){var r=t.cx,n=t.value,i=Ele(t),a=i.innerRef,s=i.isDisabled,o=i.isHidden,l=i.inputClassName,c=kf(i,c9e);return br("div",Tr({},ca(t,"input",{"input-container":!0}),{"data-value":n||""}),br("input",Tr({className:r({input:!0},l),ref:a,style:f9e(o),disabled:s},c)))},p9e=h9e,m9e=function(t,r){var n=t.theme,i=n.spacing,a=n.borderRadius,s=n.colors;return Cr({label:"multiValue",display:"flex",minWidth:0},r?{}:{backgroundColor:s.neutral10,borderRadius:a/2,margin:i.baseUnit/2})},g9e=function(t,r){var n=t.theme,i=n.borderRadius,a=n.colors,s=t.cropWithEllipsis;return Cr({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},r?{}:{borderRadius:i/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},x9e=function(t,r){var n=t.theme,i=n.spacing,a=n.borderRadius,s=n.colors,o=t.isFocused;return Cr({alignItems:"center",display:"flex"},r?{}:{borderRadius:a/2,backgroundColor:o?s.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},Rle=function(t){var r=t.children,n=t.innerProps;return br("div",n,r)},v9e=Rle,y9e=Rle;function b9e(e){var t=e.children,r=e.innerProps;return br("div",Tr({role:"button"},r),t||br(v9,{size:14}))}var w9e=function(t){var r=t.children,n=t.components,i=t.data,a=t.innerProps,s=t.isDisabled,o=t.removeProps,l=t.selectProps,c=n.Container,d=n.Label,f=n.Remove;return br(c,{data:i,innerProps:Cr(Cr({},ca(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),a),selectProps:l},br(d,{data:i,innerProps:Cr({},ca(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},r),br(f,{data:i,innerProps:Cr(Cr({},ca(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(r||"option")},o),selectProps:l}))},S9e=w9e,E9e=function(t,r){var n=t.isDisabled,i=t.isFocused,a=t.isSelected,s=t.theme,o=s.spacing,l=s.colors;return Cr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},r?{}:{backgroundColor:a?l.primary:i?l.primary25:"transparent",color:n?l.neutral20:a?l.neutral0:"inherit",padding:"".concat(o.baseUnit*2,"px ").concat(o.baseUnit*3,"px"),":active":{backgroundColor:n?void 0:a?l.primary:l.primary50}})},C9e=function(t){var r=t.children,n=t.isDisabled,i=t.isFocused,a=t.isSelected,s=t.innerRef,o=t.innerProps;return br("div",Tr({},ca(t,"option",{option:!0,"option--is-disabled":n,"option--is-focused":i,"option--is-selected":a}),{ref:s,"aria-disabled":n},o),r)},k9e=C9e,_9e=function(t,r){var n=t.theme,i=n.spacing,a=n.colors;return Cr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},r?{}:{color:a.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},N9e=function(t){var r=t.children,n=t.innerProps;return br("div",Tr({},ca(t,"placeholder",{placeholder:!0}),n),r)},A9e=N9e,T9e=function(t,r){var n=t.isDisabled,i=t.theme,a=i.spacing,s=i.colors;return Cr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},r?{}:{color:n?s.neutral40:s.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},I9e=function(t){var r=t.children,n=t.isDisabled,i=t.innerProps;return br("div",Tr({},ca(t,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),i),r)},O9e=I9e,P9e={ClearIndicator:K7e,Control:r9e,DropdownIndicator:q7e,DownChevron:Ile,CrossIcon:v9,Group:l9e,GroupHeading:o9e,IndicatorsContainer:$7e,IndicatorSeparator:Y7e,Input:p9e,LoadingIndicator:Z7e,Menu:N7e,MenuList:T7e,MenuPortal:D7e,LoadingMessage:R7e,NoOptionsMessage:P7e,MultiValue:S9e,MultiValueContainer:v9e,MultiValueLabel:y9e,MultiValueRemove:b9e,Option:k9e,Placeholder:A9e,SelectContainer:F7e,SingleValue:O9e,ValueContainer:B7e},R9e=function(t){return Cr(Cr({},P9e),t.components)},GG=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function j9e(e,t){return!!(e===t||GG(e)&&GG(t))}function D9e(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!j9e(e[r],t[r]))return!1;return!0}function M9e(e,t){t===void 0&&(t=D9e);var r=null;function n(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(r&&r.lastThis===this&&t(i,r.lastArgs))return r.lastResult;var s=e.apply(this,i);return r={lastResult:s,lastArgs:i,lastThis:this},s}return n.clear=function(){r=null},n}var F9e={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},L9e=function(t){return br("span",Tr({css:F9e},t))},KG=L9e,B9e={guidance:function(t){var r=t.isSearchable,n=t.isMulti,i=t.tabSelectsValue,a=t.context,s=t.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(t["aria-label"]||"Select"," is focused ").concat(r?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var r=t.action,n=t.label,i=n===void 0?"":n,a=t.labels,s=t.isDisabled;switch(r){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return s?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(t){var r=t.context,n=t.focused,i=t.options,a=t.label,s=a===void 0?"":a,o=t.selectValue,l=t.isDisabled,c=t.isSelected,d=t.isAppleDevice,f=function(y,b){return y&&y.length?"".concat(y.indexOf(b)+1," of ").concat(y.length):""};if(r==="value"&&o)return"value ".concat(s," focused, ").concat(f(o,n),".");if(r==="menu"&&d){var p=l?" disabled":"",m="".concat(c?" selected":"").concat(p);return"".concat(s).concat(m,", ").concat(f(i,n),".")}return""},onFilter:function(t){var r=t.inputValue,n=t.resultsMessage;return"".concat(n).concat(r?" for search term "+r:"",".")}},U9e=function(t){var r=t.ariaSelection,n=t.focusedOption,i=t.focusedValue,a=t.focusableOptions,s=t.isFocused,o=t.selectValue,l=t.selectProps,c=t.id,d=t.isAppleDevice,f=l.ariaLiveMessages,p=l.getOptionLabel,m=l.inputValue,x=l.isMulti,y=l.isOptionDisabled,b=l.isSearchable,S=l.menuIsOpen,_=l.options,C=l.screenReaderStatus,A=l.tabSelectsValue,j=l.isLoading,P=l["aria-label"],O=l["aria-live"],D=I.useMemo(function(){return Cr(Cr({},B9e),f||{})},[f]),L=I.useMemo(function(){var W="";if(r&&D.onChange){var Q=r.option,te=r.options,J=r.removedValue,Y=r.removedValues,pe=r.value,_e=function(re){return Array.isArray(re)?null:re},ee=J||Q||_e(pe),de=ee?p(ee):"",G=te||Y||void 0,q=G?G.map(p):[],ne=Cr({isDisabled:ee&&y(ee,o),label:de,labels:q},r);W=D.onChange(ne)}return W},[r,D,y,o,p]),B=I.useMemo(function(){var W="",Q=n||i,te=!!(n&&o&&o.includes(n));if(Q&&D.onFocus){var J={focused:Q,label:p(Q),isDisabled:y(Q,o),isSelected:te,options:a,context:Q===n?"menu":"value",selectValue:o,isAppleDevice:d};W=D.onFocus(J)}return W},[n,i,p,y,D,a,o,d]),H=I.useMemo(function(){var W="";if(S&&_.length&&!j&&D.onFilter){var Q=C({count:a.length});W=D.onFilter({inputValue:m,resultsMessage:Q})}return W},[a,m,S,D,_,C,j]),z=(r==null?void 0:r.action)==="initial-input-focus",ie=I.useMemo(function(){var W="";if(D.guidance){var Q=i?"value":S?"menu":"input";W=D.guidance({"aria-label":P,context:Q,isDisabled:n&&y(n,o),isMulti:x,isSearchable:b,tabSelectsValue:A,isInitialFocus:z})}return W},[P,n,i,x,y,b,S,D,o,A,z]),X=br(I.Fragment,null,br("span",{id:"aria-selection"},L),br("span",{id:"aria-focused"},B),br("span",{id:"aria-results"},H),br("span",{id:"aria-guidance"},ie));return br(I.Fragment,null,br(KG,{id:c},z&&X),br(KG,{"aria-live":O,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!z&&X))},$9e=U9e,D8=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],z9e=new RegExp("["+D8.map(function(e){return e.letters}).join("")+"]","g"),jle={};for(var nD=0;nD<D8.length;nD++)for(var iD=D8[nD],aD=0;aD<iD.letters.length;aD++)jle[iD.letters[aD]]=iD.base;var Dle=function(t){return t.replace(z9e,function(r){return jle[r]})},H9e=M9e(Dle),XG=function(t){return t.replace(/^\s+|\s+$/g,"")},W9e=function(t){return"".concat(t.label," ").concat(t.value)},V9e=function(t){return function(r,n){if(r.data.__isNew__)return!0;var i=Cr({ignoreCase:!0,ignoreAccents:!0,stringify:W9e,trim:!0,matchFrom:"any"},t),a=i.ignoreCase,s=i.ignoreAccents,o=i.stringify,l=i.trim,c=i.matchFrom,d=l?XG(n):n,f=l?XG(o(r)):o(r);return a&&(d=d.toLowerCase(),f=f.toLowerCase()),s&&(d=H9e(d),f=Dle(f)),c==="start"?f.substr(0,d.length)===d:f.indexOf(d)>-1}},q9e=["innerRef"];function G9e(e){var t=e.innerRef,r=kf(e,q9e),n=y7e(r,"onExited","in","enter","exit","appear");return br("input",Tr({ref:t},n,{css:p9({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var K9e=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()};function X9e(e){var t=e.isEnabled,r=e.onBottomArrive,n=e.onBottomLeave,i=e.onTopArrive,a=e.onTopLeave,s=I.useRef(!1),o=I.useRef(!1),l=I.useRef(0),c=I.useRef(null),d=I.useCallback(function(b,S){if(c.current!==null){var _=c.current,C=_.scrollTop,A=_.scrollHeight,j=_.clientHeight,P=c.current,O=S>0,D=A-j-C,L=!1;D>S&&s.current&&(n&&n(b),s.current=!1),O&&o.current&&(a&&a(b),o.current=!1),O&&S>D?(r&&!s.current&&r(b),P.scrollTop=A,L=!0,s.current=!0):!O&&-S>C&&(i&&!o.current&&i(b),P.scrollTop=0,L=!0,o.current=!0),L&&K9e(b)}},[r,n,i,a]),f=I.useCallback(function(b){d(b,b.deltaY)},[d]),p=I.useCallback(function(b){l.current=b.changedTouches[0].clientY},[]),m=I.useCallback(function(b){var S=l.current-b.changedTouches[0].clientY;d(b,S)},[d]),x=I.useCallback(function(b){if(b){var S=g7e?{passive:!1}:!1;b.addEventListener("wheel",f,S),b.addEventListener("touchstart",p,S),b.addEventListener("touchmove",m,S)}},[m,p,f]),y=I.useCallback(function(b){b&&(b.removeEventListener("wheel",f,!1),b.removeEventListener("touchstart",p,!1),b.removeEventListener("touchmove",m,!1))},[m,p,f]);return I.useEffect(function(){if(t){var b=c.current;return x(b),function(){y(b)}}},[t,x,y]),function(b){c.current=b}}var YG=["boxSizing","height","overflow","paddingRight","position"],QG={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function JG(e){e.cancelable&&e.preventDefault()}function ZG(e){e.stopPropagation()}function eK(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function tK(){return"ontouchstart"in window||navigator.maxTouchPoints}var rK=!!(typeof window<"u"&&window.document&&window.document.createElement),Pw=0,L1={capture:!1,passive:!1};function Y9e(e){var t=e.isEnabled,r=e.accountForScrollbars,n=r===void 0?!0:r,i=I.useRef({}),a=I.useRef(null),s=I.useCallback(function(l){if(rK){var c=document.body,d=c&&c.style;if(n&&YG.forEach(function(x){var y=d&&d[x];i.current[x]=y}),n&&Pw<1){var f=parseInt(i.current.paddingRight,10)||0,p=document.body?document.body.clientWidth:0,m=window.innerWidth-p+f||0;Object.keys(QG).forEach(function(x){var y=QG[x];d&&(d[x]=y)}),d&&(d.paddingRight="".concat(m,"px"))}c&&tK()&&(c.addEventListener("touchmove",JG,L1),l&&(l.addEventListener("touchstart",eK,L1),l.addEventListener("touchmove",ZG,L1))),Pw+=1}},[n]),o=I.useCallback(function(l){if(rK){var c=document.body,d=c&&c.style;Pw=Math.max(Pw-1,0),n&&Pw<1&&YG.forEach(function(f){var p=i.current[f];d&&(d[f]=p)}),c&&tK()&&(c.removeEventListener("touchmove",JG,L1),l&&(l.removeEventListener("touchstart",eK,L1),l.removeEventListener("touchmove",ZG,L1)))}},[n]);return I.useEffect(function(){if(t){var l=a.current;return s(l),function(){o(l)}}},[t,s,o]),function(l){a.current=l}}var Q9e=function(t){var r=t.target;return r.ownerDocument.activeElement&&r.ownerDocument.activeElement.blur()},J9e={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Z9e(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,i=n===void 0?!0:n,a=e.onBottomArrive,s=e.onBottomLeave,o=e.onTopArrive,l=e.onTopLeave,c=X9e({isEnabled:i,onBottomArrive:a,onBottomLeave:s,onTopArrive:o,onTopLeave:l}),d=Y9e({isEnabled:r}),f=function(m){c(m),d(m)};return br(I.Fragment,null,r&&br("div",{onClick:Q9e,css:J9e}),t(f))}var eBe={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},tBe=function(t){var r=t.name,n=t.onFocus;return br("input",{required:!0,name:r,tabIndex:-1,"aria-hidden":"true",onFocus:n,css:eBe,value:"",onChange:function(){}})},rBe=tBe;function y9(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function nBe(){return y9(/^iPhone/i)}function Mle(){return y9(/^Mac/i)}function iBe(){return y9(/^iPad/i)||Mle()&&navigator.maxTouchPoints>1}function aBe(){return nBe()||iBe()}function sBe(){return Mle()||aBe()}var oBe=function(t){return t.label},Fle=function(t){return t.label},Lle=function(t){return t.value},lBe=function(t){return!!t.isDisabled},cBe={clearIndicator:G7e,container:M7e,control:e9e,dropdownIndicator:V7e,group:i9e,groupHeading:s9e,indicatorsContainer:U7e,indicatorSeparator:X7e,input:u9e,loadingIndicator:J7e,loadingMessage:O7e,menu:C7e,menuList:A7e,menuPortal:j7e,multiValue:m9e,multiValueLabel:g9e,multiValueRemove:x9e,noOptionsMessage:I7e,option:E9e,placeholder:_9e,singleValue:T9e,valueContainer:L7e},uBe={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},dBe=4,Ble=4,fBe=38,hBe=Ble*2,pBe={baseUnit:Ble,controlHeight:fBe,menuGutter:hBe},sD={borderRadius:dBe,colors:uBe,spacing:pBe},mBe={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:VG(),captureMenuScroll:!VG(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:V9e(),formatGroupLabel:oBe,getOptionLabel:Fle,getOptionValue:Lle,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:lBe,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!p7e(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var r=t.count;return"".concat(r," result").concat(r!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function nK(e,t,r,n){var i=zle(e,t,r),a=Hle(e,t,r),s=$le(e,t),o=NT(e,t);return{type:"option",data:t,isDisabled:i,isSelected:a,label:s,value:o,index:n}}function nA(e,t){return e.options.map(function(r,n){if("options"in r){var i=r.options.map(function(s,o){return nK(e,s,t,o)}).filter(function(s){return aK(e,s)});return i.length>0?{type:"group",data:r,options:i,index:n}:void 0}var a=nK(e,r,t,n);return aK(e,a)?a:void 0}).filter(x7e)}function Ule(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,Wo(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function iK(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,Wo(n.options.map(function(i){return{data:i.data,id:"".concat(t,"-").concat(n.index,"-").concat(i.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function gBe(e,t){return Ule(nA(e,t))}function aK(e,t){var r=e.inputValue,n=r===void 0?"":r,i=t.data,a=t.isSelected,s=t.label,o=t.value;return(!Vle(e)||!a)&&Wle(e,{label:s,value:o,data:i},n)}function xBe(e,t){var r=e.focusedValue,n=e.selectValue,i=n.indexOf(r);if(i>-1){var a=t.indexOf(r);if(a>-1)return r;if(i<t.length)return t[i]}return null}function vBe(e,t){var r=e.focusedOption;return r&&t.indexOf(r)>-1?r:t[0]}var oD=function(t,r){var n,i=(n=t.find(function(a){return a.data===r}))===null||n===void 0?void 0:n.id;return i||null},$le=function(t,r){return t.getOptionLabel(r)},NT=function(t,r){return t.getOptionValue(r)};function zle(e,t,r){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,r):!1}function Hle(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=NT(e,t);return r.some(function(i){return NT(e,i)===n})}function Wle(e,t,r){return e.filterOption?e.filterOption(t,r):!0}var Vle=function(t){var r=t.hideSelectedOptions,n=t.isMulti;return r===void 0?n:r},yBe=1,b9=function(e){R5e(r,e);var t=M5e(r);function r(n){var i;if(O5e(this,r),i=t.call(this,n),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.controlRef=null,i.getControlRef=function(l){i.controlRef=l},i.focusedOptionRef=null,i.getFocusedOptionRef=function(l){i.focusedOptionRef=l},i.menuListRef=null,i.getMenuListRef=function(l){i.menuListRef=l},i.inputRef=null,i.getInputRef=function(l){i.inputRef=l},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(l,c){var d=i.props,f=d.onChange,p=d.name;c.name=p,i.ariaOnChange(l,c),f(l,c)},i.setValue=function(l,c,d){var f=i.props,p=f.closeMenuOnSelect,m=f.isMulti,x=f.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:x}),p&&(i.setState({inputIsHiddenAfterUpdate:!m}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(l,{action:c,option:d})},i.selectOption=function(l){var c=i.props,d=c.blurInputOnSelect,f=c.isMulti,p=c.name,m=i.state.selectValue,x=f&&i.isOptionSelected(l,m),y=i.isOptionDisabled(l,m);if(x){var b=i.getOptionValue(l);i.setValue(m.filter(function(S){return i.getOptionValue(S)!==b}),"deselect-option",l)}else if(!y)f?i.setValue([].concat(Wo(m),[l]),"select-option",l):i.setValue(l,"select-option");else{i.ariaOnChange(l,{action:"select-option",option:l,name:p});return}d&&i.blurInput()},i.removeValue=function(l){var c=i.props.isMulti,d=i.state.selectValue,f=i.getOptionValue(l),p=d.filter(function(x){return i.getOptionValue(x)!==f}),m=n2(c,p,p[0]||null);i.onChange(m,{action:"remove-value",removedValue:l}),i.focusInput()},i.clearValue=function(){var l=i.state.selectValue;i.onChange(n2(i.props.isMulti,[],null),{action:"clear",removedValues:l})},i.popValue=function(){var l=i.props.isMulti,c=i.state.selectValue,d=c[c.length-1],f=c.slice(0,c.length-1),p=n2(l,f,f[0]||null);d&&i.onChange(p,{action:"pop-value",removedValue:d})},i.getFocusedOptionId=function(l){return oD(i.state.focusableOptionsWithIds,l)},i.getFocusableOptionsWithIds=function(){return iK(nA(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];return c7e.apply(void 0,[i.props.classNamePrefix].concat(c))},i.getOptionLabel=function(l){return $le(i.props,l)},i.getOptionValue=function(l){return NT(i.props,l)},i.getStyles=function(l,c){var d=i.props.unstyled,f=cBe[l](c,d);f.boxSizing="border-box";var p=i.props.styles[l];return p?p(f,c):f},i.getClassNames=function(l,c){var d,f;return(d=(f=i.props.classNames)[l])===null||d===void 0?void 0:d.call(f,c)},i.getElementId=function(l){return"".concat(i.state.instancePrefix,"-").concat(l)},i.getComponents=function(){return R9e(i.props)},i.buildCategorizedOptions=function(){return nA(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return Ule(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(l,c){i.setState({ariaSelection:Cr({value:l},c)})},i.onMenuMouseDown=function(l){l.button===0&&(l.stopPropagation(),l.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(l){i.blockOptionHover=!1},i.onControlMouseDown=function(l){if(!l.defaultPrevented){var c=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&i.onMenuClose():c&&i.openMenu("first"):(c&&(i.openAfterFocus=!0),i.focusInput()),l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&l.preventDefault()}},i.onDropdownIndicatorMouseDown=function(l){if(!(l&&l.type==="mousedown"&&l.button!==0)&&!i.props.isDisabled){var c=i.props,d=c.isMulti,f=c.menuIsOpen;i.focusInput(),f?(i.setState({inputIsHiddenAfterUpdate:!d}),i.onMenuClose()):i.openMenu("first"),l.preventDefault()}},i.onClearIndicatorMouseDown=function(l){l&&l.type==="mousedown"&&l.button!==0||(i.clearValue(),l.preventDefault(),i.openAfterFocus=!1,l.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(l){typeof i.props.closeMenuOnScroll=="boolean"?l.target instanceof HTMLElement&&l3(l.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(l)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(l){var c=l.touches,d=c&&c.item(0);d&&(i.initialTouchX=d.clientX,i.initialTouchY=d.clientY,i.userIsDragging=!1)},i.onTouchMove=function(l){var c=l.touches,d=c&&c.item(0);if(d){var f=Math.abs(d.clientX-i.initialTouchX),p=Math.abs(d.clientY-i.initialTouchY),m=5;i.userIsDragging=f>m||p>m}},i.onTouchEnd=function(l){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(l.target)&&i.menuListRef&&!i.menuListRef.contains(l.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(l){i.userIsDragging||i.onControlMouseDown(l)},i.onClearIndicatorTouchEnd=function(l){i.userIsDragging||i.onClearIndicatorMouseDown(l)},i.onDropdownIndicatorTouchEnd=function(l){i.userIsDragging||i.onDropdownIndicatorMouseDown(l)},i.handleInputChange=function(l){var c=i.props.inputValue,d=l.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(d,{action:"input-change",prevInputValue:c}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(l){i.props.onFocus&&i.props.onFocus(l),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(l){var c=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(l),i.onInputChange("",{action:"input-blur",prevInputValue:c}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(l){if(!(i.blockOptionHover||i.state.focusedOption===l)){var c=i.getFocusableOptions(),d=c.indexOf(l);i.setState({focusedOption:l,focusedOptionId:d>-1?i.getFocusedOptionId(l):null})}},i.shouldHideSelectedOptions=function(){return Vle(i.props)},i.onValueInputFocus=function(l){l.preventDefault(),l.stopPropagation(),i.focus()},i.onKeyDown=function(l){var c=i.props,d=c.isMulti,f=c.backspaceRemovesValue,p=c.escapeClearsValue,m=c.inputValue,x=c.isClearable,y=c.isDisabled,b=c.menuIsOpen,S=c.onKeyDown,_=c.tabSelectsValue,C=c.openMenuOnFocus,A=i.state,j=A.focusedOption,P=A.focusedValue,O=A.selectValue;if(!y&&!(typeof S=="function"&&(S(l),l.defaultPrevented))){switch(i.blockOptionHover=!0,l.key){case"ArrowLeft":if(!d||m)return;i.focusValue("previous");break;case"ArrowRight":if(!d||m)return;i.focusValue("next");break;case"Delete":case"Backspace":if(m)return;if(P)i.removeValue(P);else{if(!f)return;d?i.popValue():x&&i.clearValue()}break;case"Tab":if(i.isComposing||l.shiftKey||!b||!_||!j||C&&i.isOptionSelected(j,O))return;i.selectOption(j);break;case"Enter":if(l.keyCode===229)break;if(b){if(!j||i.isComposing)return;i.selectOption(j);break}return;case"Escape":b?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:m}),i.onMenuClose()):x&&p&&i.clearValue();break;case" ":if(m)return;if(!b){i.openMenu("first");break}if(!j)return;i.selectOption(j);break;case"ArrowUp":b?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":b?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!b)return;i.focusOption("pageup");break;case"PageDown":if(!b)return;i.focusOption("pagedown");break;case"Home":if(!b)return;i.focusOption("first");break;case"End":if(!b)return;i.focusOption("last");break;default:return}l.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++yBe),i.state.selectValue=kT(n.value),n.menuIsOpen&&i.state.selectValue.length){var a=i.getFocusableOptionsWithIds(),s=i.buildFocusableOptions(),o=s.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=a,i.state.focusedOption=s[o],i.state.focusedOptionId=oD(a,s[o])}return i}return P5e(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&WG(this.menuListRef,this.focusedOptionRef),sBe()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isDisabled,o=a.menuIsOpen,l=this.state.isFocused;(l&&!s&&i.isDisabled||l&&o&&!i.menuIsOpen)&&this.focusInput(),l&&s&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!l&&!s&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(WG(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,a){this.props.onInputChange(i,a)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var a=this,s=this.state,o=s.selectValue,l=s.isFocused,c=this.buildFocusableOptions(),d=i==="first"?0:c.length-1;if(!this.props.isMulti){var f=c.indexOf(o[0]);f>-1&&(d=f)}this.scrollToFocusedOptionOnUpdate=!(l&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:c[d],focusedOptionId:this.getFocusedOptionId(c[d])},function(){return a.onMenuOpen()})}},{key:"focusValue",value:function(i){var a=this.state,s=a.selectValue,o=a.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var l=s.indexOf(o);o||(l=-1);var c=s.length-1,d=-1;if(s.length){switch(i){case"previous":l===0?d=0:l===-1?d=c:d=l-1;break;case"next":l>-1&&l<c&&(d=l+1);break}this.setState({inputIsHidden:d!==-1,focusedValue:s[d]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",a=this.props.pageSize,s=this.state.focusedOption,o=this.getFocusableOptions();if(o.length){var l=0,c=o.indexOf(s);s||(c=-1),i==="up"?l=c>0?c-1:o.length-1:i==="down"?l=(c+1)%o.length:i==="pageup"?(l=c-a,l<0&&(l=0)):i==="pagedown"?(l=c+a,l>o.length-1&&(l=o.length-1)):i==="last"&&(l=o.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:o[l],focusedValue:null,focusedOptionId:this.getFocusedOptionId(o[l])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(sD):Cr(Cr({},sD),this.props.theme):sD}},{key:"getCommonProps",value:function(){var i=this.clearValue,a=this.cx,s=this.getStyles,o=this.getClassNames,l=this.getValue,c=this.selectOption,d=this.setValue,f=this.props,p=f.isMulti,m=f.isRtl,x=f.options,y=this.hasValue();return{clearValue:i,cx:a,getStyles:s,getClassNames:o,getValue:l,hasValue:y,isMulti:p,isRtl:m,options:x,selectOption:c,selectProps:f,setValue:d,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,a=i.isClearable,s=i.isMulti;return a===void 0?s:a}},{key:"isOptionDisabled",value:function(i,a){return zle(this.props,i,a)}},{key:"isOptionSelected",value:function(i,a){return Hle(this.props,i,a)}},{key:"filterOption",value:function(i,a){return Wle(this.props,i,a)}},{key:"formatOptionLabel",value:function(i,a){if(typeof this.props.formatOptionLabel=="function"){var s=this.props.inputValue,o=this.state.selectValue;return this.props.formatOptionLabel(i,{context:a,inputValue:s,selectValue:o})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,a=i.isDisabled,s=i.isSearchable,o=i.inputId,l=i.inputValue,c=i.tabIndex,d=i.form,f=i.menuIsOpen,p=i.required,m=this.getComponents(),x=m.Input,y=this.state,b=y.inputIsHidden,S=y.ariaSelection,_=this.commonProps,C=o||this.getElementId("input"),A=Cr(Cr(Cr({"aria-autocomplete":"list","aria-expanded":f,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":p,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},f&&{"aria-controls":this.getElementId("listbox")}),!s&&{"aria-readonly":!0}),this.hasValue()?(S==null?void 0:S.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return s?I.createElement(x,Tr({},_,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:C,innerRef:this.getInputRef,isDisabled:a,isHidden:b,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:c,form:d,type:"text",value:l},A)):I.createElement(G9e,Tr({id:C,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:CT,onFocus:this.onInputFocus,disabled:a,tabIndex:c,inputMode:"none",form:d,value:""},A))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,a=this.getComponents(),s=a.MultiValue,o=a.MultiValueContainer,l=a.MultiValueLabel,c=a.MultiValueRemove,d=a.SingleValue,f=a.Placeholder,p=this.commonProps,m=this.props,x=m.controlShouldRenderValue,y=m.isDisabled,b=m.isMulti,S=m.inputValue,_=m.placeholder,C=this.state,A=C.selectValue,j=C.focusedValue,P=C.isFocused;if(!this.hasValue()||!x)return S?null:I.createElement(f,Tr({},p,{key:"placeholder",isDisabled:y,isFocused:P,innerProps:{id:this.getElementId("placeholder")}}),_);if(b)return A.map(function(D,L){var B=D===j,H="".concat(i.getOptionLabel(D),"-").concat(i.getOptionValue(D));return I.createElement(s,Tr({},p,{components:{Container:o,Label:l,Remove:c},isFocused:B,isDisabled:y,key:H,index:L,removeProps:{onClick:function(){return i.removeValue(D)},onTouchEnd:function(){return i.removeValue(D)},onMouseDown:function(ie){ie.preventDefault()}},data:D}),i.formatOptionLabel(D,"value"))});if(S)return null;var O=A[0];return I.createElement(d,Tr({},p,{data:O,isDisabled:y}),this.formatOptionLabel(O,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),a=i.ClearIndicator,s=this.commonProps,o=this.props,l=o.isDisabled,c=o.isLoading,d=this.state.isFocused;if(!this.isClearable()||!a||l||!this.hasValue()||c)return null;var f={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return I.createElement(a,Tr({},s,{innerProps:f,isFocused:d}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),a=i.LoadingIndicator,s=this.commonProps,o=this.props,l=o.isDisabled,c=o.isLoading,d=this.state.isFocused;if(!a||!c)return null;var f={"aria-hidden":"true"};return I.createElement(a,Tr({},s,{innerProps:f,isDisabled:l,isFocused:d}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),a=i.DropdownIndicator,s=i.IndicatorSeparator;if(!a||!s)return null;var o=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused;return I.createElement(s,Tr({},o,{isDisabled:l,isFocused:c}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),a=i.DropdownIndicator;if(!a)return null;var s=this.commonProps,o=this.props.isDisabled,l=this.state.isFocused,c={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return I.createElement(a,Tr({},s,{innerProps:c,isDisabled:o,isFocused:l}))}},{key:"renderMenu",value:function(){var i=this,a=this.getComponents(),s=a.Group,o=a.GroupHeading,l=a.Menu,c=a.MenuList,d=a.MenuPortal,f=a.LoadingMessage,p=a.NoOptionsMessage,m=a.Option,x=this.commonProps,y=this.state.focusedOption,b=this.props,S=b.captureMenuScroll,_=b.inputValue,C=b.isLoading,A=b.loadingMessage,j=b.minMenuHeight,P=b.maxMenuHeight,O=b.menuIsOpen,D=b.menuPlacement,L=b.menuPosition,B=b.menuPortalTarget,H=b.menuShouldBlockScroll,z=b.menuShouldScrollIntoView,ie=b.noOptionsMessage,X=b.onMenuScrollToTop,W=b.onMenuScrollToBottom;if(!O)return null;var Q=function(de,G){var q=de.type,ne=de.data,Se=de.isDisabled,re=de.isSelected,ae=de.label,ge=de.value,Ee=y===ne,V=Se?void 0:function(){return i.onOptionHover(ne)},Ae=Se?void 0:function(){return i.selectOption(ne)},Pe="".concat(i.getElementId("option"),"-").concat(G),ze={id:Pe,onClick:Ae,onMouseMove:V,onMouseOver:V,tabIndex:-1,role:"option","aria-selected":i.state.isAppleDevice?void 0:re};return I.createElement(m,Tr({},x,{innerProps:ze,data:ne,isDisabled:Se,isSelected:re,key:Pe,label:ae,type:q,value:ge,isFocused:Ee,innerRef:Ee?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(de.data,"menu"))},te;if(this.hasOptions())te=this.getCategorizedOptions().map(function(ee){if(ee.type==="group"){var de=ee.data,G=ee.options,q=ee.index,ne="".concat(i.getElementId("group"),"-").concat(q),Se="".concat(ne,"-heading");return I.createElement(s,Tr({},x,{key:ne,data:de,options:G,Heading:o,headingProps:{id:Se,data:ee.data},label:i.formatGroupLabel(ee.data)}),ee.options.map(function(re){return Q(re,"".concat(q,"-").concat(re.index))}))}else if(ee.type==="option")return Q(ee,"".concat(ee.index))});else if(C){var J=A({inputValue:_});if(J===null)return null;te=I.createElement(f,x,J)}else{var Y=ie({inputValue:_});if(Y===null)return null;te=I.createElement(p,x,Y)}var pe={minMenuHeight:j,maxMenuHeight:P,menuPlacement:D,menuPosition:L,menuShouldScrollIntoView:z},_e=I.createElement(k7e,Tr({},x,pe),function(ee){var de=ee.ref,G=ee.placerProps,q=G.placement,ne=G.maxHeight;return I.createElement(l,Tr({},x,pe,{innerRef:de,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:C,placement:q}),I.createElement(Z9e,{captureEnabled:S,onTopArrive:X,onBottomArrive:W,lockEnabled:H},function(Se){return I.createElement(c,Tr({},x,{innerRef:function(ae){i.getMenuListRef(ae),Se(ae)},innerProps:{role:"listbox","aria-multiselectable":x.isMulti,id:i.getElementId("listbox")},isLoading:C,maxHeight:ne,focusedOption:y}),te)}))});return B||L==="fixed"?I.createElement(d,Tr({},x,{appendTo:B,controlElement:this.controlRef,menuPlacement:D,menuPosition:L}),_e):_e}},{key:"renderFormField",value:function(){var i=this,a=this.props,s=a.delimiter,o=a.isDisabled,l=a.isMulti,c=a.name,d=a.required,f=this.state.selectValue;if(d&&!this.hasValue()&&!o)return I.createElement(rBe,{name:c,onFocus:this.onValueInputFocus});if(!(!c||o))if(l)if(s){var p=f.map(function(y){return i.getOptionValue(y)}).join(s);return I.createElement("input",{name:c,type:"hidden",value:p})}else{var m=f.length>0?f.map(function(y,b){return I.createElement("input",{key:"i-".concat(b),name:c,type:"hidden",value:i.getOptionValue(y)})}):I.createElement("input",{name:c,type:"hidden",value:""});return I.createElement("div",null,m)}else{var x=f[0]?this.getOptionValue(f[0]):"";return I.createElement("input",{name:c,type:"hidden",value:x})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,a=this.state,s=a.ariaSelection,o=a.focusedOption,l=a.focusedValue,c=a.isFocused,d=a.selectValue,f=this.getFocusableOptions();return I.createElement($9e,Tr({},i,{id:this.getElementId("live-region"),ariaSelection:s,focusedOption:o,focusedValue:l,isFocused:c,selectValue:d,focusableOptions:f,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),a=i.Control,s=i.IndicatorsContainer,o=i.SelectContainer,l=i.ValueContainer,c=this.props,d=c.className,f=c.id,p=c.isDisabled,m=c.menuIsOpen,x=this.state.isFocused,y=this.commonProps=this.getCommonProps();return I.createElement(o,Tr({},y,{className:d,innerProps:{id:f,onKeyDown:this.onKeyDown},isDisabled:p,isFocused:x}),this.renderLiveRegion(),I.createElement(a,Tr({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:p,isFocused:x,menuIsOpen:m}),I.createElement(l,Tr({},y,{isDisabled:p}),this.renderPlaceholderOrValue(),this.renderInput()),I.createElement(s,Tr({},y,{isDisabled:p}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,a){var s=a.prevProps,o=a.clearFocusValueOnUpdate,l=a.inputIsHiddenAfterUpdate,c=a.ariaSelection,d=a.isFocused,f=a.prevWasFocused,p=a.instancePrefix,m=i.options,x=i.value,y=i.menuIsOpen,b=i.inputValue,S=i.isMulti,_=kT(x),C={};if(s&&(x!==s.value||m!==s.options||y!==s.menuIsOpen||b!==s.inputValue)){var A=y?gBe(i,_):[],j=y?iK(nA(i,_),"".concat(p,"-option")):[],P=o?xBe(a,_):null,O=vBe(a,A),D=oD(j,O);C={selectValue:_,focusedOption:O,focusedOptionId:D,focusableOptionsWithIds:j,focusedValue:P,clearFocusValueOnUpdate:!1}}var L=l!=null&&i!==s?{inputIsHidden:l,inputIsHiddenAfterUpdate:void 0}:{},B=c,H=d&&f;return d&&!H&&(B={value:n2(S,_,_[0]||null),options:_,action:"initial-input-focus"},H=!f),(c==null?void 0:c.action)==="initial-input-focus"&&(B=null),Cr(Cr(Cr({},C),L),{},{prevProps:i,ariaSelection:B,prevWasFocused:H})}}]),r}(I.Component);b9.defaultProps=mBe;var bBe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function qle(e){var t=e.defaultInputValue,r=t===void 0?"":t,n=e.defaultMenuIsOpen,i=n===void 0?!1:n,a=e.defaultValue,s=a===void 0?null:a,o=e.inputValue,l=e.menuIsOpen,c=e.onChange,d=e.onInputChange,f=e.onMenuClose,p=e.onMenuOpen,m=e.value,x=kf(e,bBe),y=I.useState(o!==void 0?o:r),b=Eh(y,2),S=b[0],_=b[1],C=I.useState(l!==void 0?l:i),A=Eh(C,2),j=A[0],P=A[1],O=I.useState(m!==void 0?m:s),D=Eh(O,2),L=D[0],B=D[1],H=I.useCallback(function(J,Y){typeof c=="function"&&c(J,Y),B(J)},[c]),z=I.useCallback(function(J,Y){var pe;typeof d=="function"&&(pe=d(J,Y)),_(pe!==void 0?pe:J)},[d]),ie=I.useCallback(function(){typeof p=="function"&&p(),P(!0)},[p]),X=I.useCallback(function(){typeof f=="function"&&f(),P(!1)},[f]),W=o!==void 0?o:S,Q=l!==void 0?l:j,te=m!==void 0?m:L;return Cr(Cr({},x),{},{inputValue:W,menuIsOpen:Q,onChange:H,onInputChange:z,onMenuClose:X,onMenuOpen:ie,value:te})}var wBe=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],sK=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=String(t).toLowerCase(),a=String(n.getOptionValue(r)).toLowerCase(),s=String(n.getOptionLabel(r)).toLowerCase();return a===i||s===i},lD={formatCreateLabel:function(t){return'Create "'.concat(t,'"')},isValidNewOption:function(t,r,n,i){return!(!t||r.some(function(a){return sK(t,a,i)})||n.some(function(a){return sK(t,a,i)}))},getNewOptionData:function(t,r){return{label:r,value:t,__isNew__:!0}}};function SBe(e){var t=e.allowCreateWhileLoading,r=t===void 0?!1:t,n=e.createOptionPosition,i=n===void 0?"last":n,a=e.formatCreateLabel,s=a===void 0?lD.formatCreateLabel:a,o=e.isValidNewOption,l=o===void 0?lD.isValidNewOption:o,c=e.getNewOptionData,d=c===void 0?lD.getNewOptionData:c,f=e.onCreateOption,p=e.options,m=p===void 0?[]:p,x=e.onChange,y=kf(e,wBe),b=y.getOptionValue,S=b===void 0?Lle:b,_=y.getOptionLabel,C=_===void 0?Fle:_,A=y.inputValue,j=y.isLoading,P=y.isMulti,O=y.value,D=y.name,L=I.useMemo(function(){return l(A,kT(O),m,{getOptionValue:S,getOptionLabel:C})?d(A,s(A)):void 0},[s,d,C,S,A,l,m,O]),B=I.useMemo(function(){return(r||!j)&&L?i==="first"?[L].concat(Wo(m)):[].concat(Wo(m),[L]):m},[r,i,j,L,m]),H=I.useCallback(function(z,ie){if(ie.action!=="select-option")return x(z,ie);var X=Array.isArray(z)?z:[z];if(X[X.length-1]===L){if(f)f(A);else{var W=d(A,A),Q={action:"create-option",name:D,option:W};x(n2(P,[].concat(Wo(kT(O)),[W]),W),Q)}return}x(z,ie)},[d,A,P,D,L,f,x,O]);return Cr(Cr({},y),{},{options:B,onChange:H})}var EBe=I.forwardRef(function(e,t){var r=qle(e),n=SBe(r);return I.createElement(b9,Tr({ref:t},n))}),PS=EBe;const gC=()=>rr("/api/products"),Gle=()=>rr("/api/import/aliases"),Kle=()=>rr("/api/import/aliases/products"),CBe=async()=>{const e=await fetch(Gle());if(!e.ok)throw new Error("Failed to fetch size aliases.");return e.json()},kBe=async(e,t)=>{const r=await fetch(Gle(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({aliasText:e,mappedSize:t})});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to save alias.")}return r.json()},_Be=async()=>{const e=await fetch(Kle());if(!e.ok)throw new Error("Failed to fetch product aliases.");return e.json()},NBe=async(e,t)=>{const r=await fetch(Kle(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({aliasText:e,mappedProductName:t})});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to save product alias.")}return r.json()},ABe=async(e="")=>{if(!e||e.trim()==="")return[];const t=await fetch(`${rr("/api/search")}?q=${encodeURIComponent(e)}&type=products`);if(!t.ok)return[];const r=await t.json();let n=[];return Array.isArray(r)?n=r:r.samples&&(n=r.samples),Array.from(new Set(n.map(a=>a.title||a.name).filter(Boolean)))},TBe=async()=>{const e=await fetch(`${gC()}/sizes`);if(!e.ok)throw new Error("Failed to fetch unique sizes.");return e.json()},w9=async()=>{const e=await fetch(`${gC()}/sizes/stats`);if(!e.ok){const t=await e.text();throw new Error(`Error ${e.status}: ${t||e.statusText}`)}return e.json()},IBe=async(e,t)=>{const r=await fetch(`${gC()}/sizes`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldValue:e,newValue:t})});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to update size value.")}return r.json()},OBe=async e=>{const t=await fetch(`${gC()}/sizes`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:e})});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to delete size value.")}return t.json()},Xle=async e=>{const t=await fetch(`${gC()}/sizes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:e})});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to create size.")}},Yle=e=>{const t=$a(),r=Ir({mutationFn:doe,onSuccess:()=>{t.invalidateQueries({queryKey:["vendors"]}),Re.success("Vendor created."),e==null||e()},onError:a=>Re.error(`Creation failed: ${a.message}`)}),n=Ir({mutationFn:foe,onSuccess:()=>{t.invalidateQueries({queryKey:["vendors"]}),Re.success("Vendor updated."),e==null||e()},onError:a=>Re.error(`Update failed: ${a.message}`)}),i=Ir({mutationFn:hoe,onSuccess:()=>{t.invalidateQueries({queryKey:["vendors"]}),Re.success("Vendor deleted successfully."),e==null||e()},onError:a=>Re.error(`Deletion failed: ${a.message}`)});return{createVendor:r,updateVendor:n,deleteVendor:i}},PBe=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],RBe=e=>{if(!e)return e;const t=e.replace(/[^\d]/g,""),r=t.length;return r<4?t:r<7?`(${t.slice(0,3)}) ${t.slice(3)}`:`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,10)}`},kb=({isOpen:e,onClose:t,vendorToEdit:r,initialVendorType:n})=>{var A;const{data:i}=Qoe(),{data:a=[]}=F4(),{createVendor:s,updateVendor:o,deleteVendor:l}=Yle(t),c=s.isPending||o.isPending,d=l.isPending,[f,p]=I.useState({name:"",vendorType:"Supplier",defaultSupplierId:null,defaultProductType:null,websiteUrl:"",portalUrl:"",address:"",phone:"",orderingEmail:"",claimsEmail:"",repName:"",repPhone:"",repEmail:"",defaultMarkup:null,pricingMethod:null,shippingMethod:"",dedicatedShippingDay:null,notes:""});I.useEffect(()=>{const j={name:"",vendorType:"Supplier",defaultSupplierId:null,defaultProductType:null,websiteUrl:"",portalUrl:"",address:"",phone:"",orderingEmail:"",claimsEmail:"",repName:"",repPhone:"",repEmail:"",defaultMarkup:null,pricingMethod:null,shippingMethod:"",dedicatedShippingDay:null,notes:""};r?p({name:r.name||"",vendorType:r.vendorType||null,defaultSupplierId:r.defaultSupplierId||null,defaultProductType:r.defaultProductType||null,websiteUrl:r.websiteUrl||"",portalUrl:r.portalUrl||"",address:r.address||"",phone:r.phone||"",orderingEmail:r.orderingEmail||"",claimsEmail:r.claimsEmail||"",repName:r.repName||"",repPhone:r.repPhone||"",repEmail:r.repEmail||"",defaultMarkup:r.defaultMarkup??null,pricingMethod:r.pricingMethod??null,shippingMethod:r.shippingMethod||"",dedicatedShippingDay:r.dedicatedShippingDay??null,notes:r.notes||""}):(n&&(j.vendorType=n),p(j))},[r,e,n]);const m=j=>{const{name:P,value:O,type:D}=j.target;if(P==="phone"||P==="repPhone"){const L=O.replace(/[^\d]/g,"");L.length<=10&&p(B=>({...B,[P]:RBe(L)}));return}if(D==="checkbox"){const L=j.target.checked;p(B=>({...B,[P]:L}))}else p(P==="dedicatedShippingDay"||P==="defaultProductType"||P==="vendorType"?L=>({...L,[P]:O===""?null:O}):P==="defaultMarkup"?L=>({...L,[P]:O===""?null:parseFloat(O)}):P==="pricingMethod"?L=>({...L,[P]:O===""?null:O}):L=>({...L,[P]:O}))},x=j=>{j.preventDefault();const P={...f,defaultSupplierId:f.vendorType==="Manufacturer"?f.defaultSupplierId:null};r?o.mutate({...r,...P}):s.mutate(P)},y=()=>{r&&window.confirm(`Are you sure you want to delete vendor "${r.name}"? This action cannot be undone.`)&&l.mutate(r.id)},b=a.filter(j=>(j.vendorType==="Supplier"||j.vendorType==="Both")&&j.id!==(r==null?void 0:r.id)),S=j=>{const P=j.target.value,O=P===""?null:parseInt(P),D=a.find(L=>L.id===O);p(L=>({...L,defaultSupplierId:O,shippingMethod:(D==null?void 0:D.shippingMethod)||L.shippingMethod,dedicatedShippingDay:(D==null?void 0:D.dedicatedShippingDay)??L.dedicatedShippingDay}))},_=()=>{const j=a.find(P=>P.id===f.defaultSupplierId);j&&(p(P=>({...P,address:j.address||P.address,phone:j.phone||P.phone,orderingEmail:j.orderingEmail||P.orderingEmail,claimsEmail:j.claimsEmail||P.claimsEmail,repName:j.repName||P.repName,repPhone:j.repPhone||P.repPhone,repEmail:j.repEmail||P.repEmail,websiteUrl:j.websiteUrl||P.websiteUrl,portalUrl:j.portalUrl||P.portalUrl,shippingMethod:j.shippingMethod||P.shippingMethod,dedicatedShippingDay:j.dedicatedShippingDay??P.dedicatedShippingDay})),Re.success(`Copied contact info from ${j.name}`))};if(!e)return null;const C="w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary placeholder:text-text-tertiary focus:outline-none focus:border-primary transition-colors";return u.jsx("div",{className:"fixed inset-0 bg-black/75 z-[60] overflow-y-auto",children:u.jsx("div",{className:"flex min-h-full items-center justify-center p-0 lg:p-4",children:u.jsxs("div",{className:"bg-surface-container-high w-full min-h-full lg:min-h-0 lg:h-auto lg:max-h-[90vh] lg:max-w-4xl lg:rounded-2xl shadow-2xl flex flex-col border border-outline/10 relative",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center bg-surface-container-low lg:rounded-t-2xl sticky top-0 z-10",children:[u.jsxs("h2",{className:"text-xl font-bold text-text-primary flex items-center gap-2",children:[u.jsx(cx,{className:"text-primary"}),r?"Edit Vendor":"New Vendor"]}),u.jsx("button",{onClick:t,className:"p-2 hover:bg-surface-container-highest rounded-full text-text-secondary hover:text-text-primary transition-colors",children:u.jsx(tn,{size:24})})]}),u.jsxs("form",{onSubmit:x,className:"flex flex-col flex-grow",children:[u.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 overflow-y-auto flex-grow",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-text-tertiary border-b border-outline/10 pb-2",children:"Contact Info"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Vendor Name"}),u.jsx("input",{type:"text",name:"name",value:f.name,onChange:m,className:C,required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Vendor Type"}),u.jsxs("select",{name:"vendorType",value:f.vendorType??"",onChange:m,className:C,children:[u.jsx("option",{value:"Supplier",children:"Supplier"}),u.jsx("option",{value:"Manufacturer",children:"Manufacturer"}),u.jsx("option",{value:"Both",children:"Both"})]})]}),f.vendorType==="Manufacturer"&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Default Supplier / Distributor"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("select",{name:"defaultSupplierId",value:f.defaultSupplierId??"",onChange:S,className:C,children:[u.jsx("option",{value:"",children:"Select a Supplier..."}),b.map(j=>u.jsx("option",{value:j.id,children:j.name},j.id))]}),f.defaultSupplierId&&u.jsx("button",{type:"button",onClick:_,className:"p-3 bg-primary-container text-primary rounded-lg hover:bg-primary hover:text-on-primary transition-all shadow-sm",title:"Copy Address/Phone/Email from Supplier",children:u.jsx(e9,{size:20})})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Default Product Type"}),u.jsxs("select",{name:"defaultProductType",value:f.defaultProductType??"",onChange:m,className:C,children:[u.jsx("option",{value:"",children:"None"}),Ey.map(j=>u.jsx("option",{value:j,children:j},j))]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1 flex items-center gap-1.5",children:[u.jsx(ux,{size:12})," Website"]}),u.jsx("input",{type:"url",name:"websiteUrl",value:f.websiteUrl,onChange:m,placeholder:"https://...",className:C})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1 flex items-center gap-1.5",children:[u.jsx(Zx,{size:12})," Portal"]}),u.jsx("input",{type:"url",name:"portalUrl",value:f.portalUrl,onChange:m,placeholder:"https://...",className:C})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Main Phone"}),u.jsx("input",{type:"tel",name:"phone",value:f.phone,onChange:m,className:C})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Ordering Email"}),u.jsx("input",{type:"email",name:"orderingEmail",value:f.orderingEmail,onChange:m,className:C})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Claims Email"}),u.jsx("input",{type:"email",name:"claimsEmail",value:f.claimsEmail,onChange:m,className:C})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Address"}),u.jsx("textarea",{name:"address",value:f.address,onChange:m,rows:2,className:C})]})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-text-tertiary border-b border-outline/10 pb-2",children:"Representative"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Rep Name"}),u.jsx("input",{type:"text",name:"repName",value:f.repName,onChange:m,className:C})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Rep Phone"}),u.jsx("input",{type:"tel",name:"repPhone",value:f.repPhone,onChange:m,className:C})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Rep Email"}),u.jsx("input",{type:"email",name:"repEmail",value:f.repEmail,onChange:m,className:C})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-text-tertiary border-b border-outline/10 pb-2",children:"Shipping"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Shipping Method"}),u.jsx("input",{type:"text",name:"shippingMethod",value:f.shippingMethod,placeholder:"LTL, UPS, etc.",onChange:m,className:C})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Delivery Day"}),u.jsxs("select",{name:"dedicatedShippingDay",value:f.dedicatedShippingDay??"",onChange:m,className:C,children:[u.jsx("option",{value:"",children:"None"}),PBe.map((j,P)=>u.jsx("option",{value:P,children:j},P))]})]})]}),u.jsxs("div",{className:"bg-surface-container-low p-4 rounded-xl border border-outline/10 space-y-4",children:[u.jsx("h4",{className:"text-xs font-bold uppercase tracking-wider text-text-tertiary border-b border-outline/10 pb-2",children:"Pricing Overrides"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Markup %"}),u.jsx("input",{type:"number",name:"defaultMarkup",value:f.defaultMarkup??"",placeholder:"Use Global",onChange:m,className:C.replace("bg-surface-container-highest","bg-surface-container-high")})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1 ml-1",children:"Method"}),u.jsxs("select",{name:"pricingMethod",value:f.pricingMethod??"",onChange:m,className:C.replace("bg-surface-container-highest","bg-surface-container-high"),children:[u.jsx("option",{value:"",children:"Use Global"}),u.jsx("option",{value:"Markup",children:"Markup"}),u.jsx("option",{value:"Margin",children:"Margin"})]})]})]})]}),u.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[u.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-text-tertiary border-b border-outline/10 pb-2",children:"Internal Notes"}),u.jsx("textarea",{name:"notes",value:f.notes,onChange:m,className:`${C} flex-grow min-h-[300px] resize-none`,placeholder:"Add any specific details about ordering, shipping windows, or claims processes..."})]})]}),u.jsxs("div",{className:"p-4 border-t border-outline/10 bg-surface-container-low lg:rounded-b-2xl flex justify-end gap-3 shrink-0 sticky bottom-0 z-10 lg:static",children:[r&&((A=i==null?void 0:i.roles)==null?void 0:A.includes("Admin"))&&u.jsxs("button",{type:"button",onClick:y,disabled:d,className:"py-2 px-6 bg-error-container hover:bg-error/20 text-error rounded-full font-semibold flex items-center gap-2 disabled:opacity-50 transition-colors mr-auto",children:[u.jsx(wo,{size:16}),u.jsx("span",{children:d?"Deleting...":"Delete"})]}),u.jsx("button",{type:"button",onClick:t,className:"py-2 px-6 bg-surface hover:bg-surface-container-highest border border-outline/20 rounded-full text-text-primary font-medium transition-colors",children:"Cancel"}),u.jsx("button",{type:"submit",className:"py-2 px-6 bg-primary hover:bg-primary-hover rounded-full text-on-primary font-semibold shadow-md transition-all",disabled:c,children:c?r?"Saving...":"Creating...":r?"Save Changes":"Create Vendor"})]})]})]})})})},Ch=(e,t,r)=>{if(e<0||t<0)return 0;if(r==="Markup")return e*(1+t/100);{const n=t/100;return n>=1?0:e/(1-n)}},kh=(e,t,r="Customer")=>e&&e.defaultMarkup!==null&&e.defaultMarkup!==void 0?{percentage:Number(e.defaultMarkup),method:e.pricingMethod||t.calculationMethod}:r==="Installer"?{percentage:t.contractorMarkup,method:t.calculationMethod}:{percentage:t.retailMarkup,method:t.calculationMethod},Qm=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),Qle=({data:e,qrUrl:t})=>u.jsxs("div",{className:"border-2 border-black w-full h-auto p-2 flex flex-col box-border bg-white text-black break-inside-avoid overflow-hidden",children:[u.jsxs("div",{className:"border-b-2 border-black pb-0.5 mb-1 shrink-0",children:[u.jsx("h2",{className:"text-[10px] font-bold uppercase tracking-wide text-gray-600 leading-none",children:e.manufacturer}),u.jsx("h1",{className:"text-xl font-black leading-none mt-0.5 truncate tracking-tight",children:e.name}),e.subName&&u.jsx("h3",{className:"text-base font-bold leading-none mt-0.5 text-gray-900 truncate",children:e.subName})]}),u.jsxs("div",{className:"flex gap-2 items-start",children:[u.jsx("div",{className:"w-1/3 flex-shrink-0",children:u.jsx("img",{src:t,alt:"QR",className:"w-full h-auto object-contain rendering-pixelated"})}),u.jsxs("div",{className:"flex-1 flex flex-col gap-0.5",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[e.sku?u.jsxs("div",{children:[u.jsx("span",{className:"font-bold block text-[10px] uppercase text-gray-500 leading-none mb-0.5",children:"SKU"}),u.jsx("span",{className:"font-mono font-bold text-sm leading-none",children:e.sku})]}):u.jsx("div",{}),e.size&&u.jsxs("div",{className:"text-right",children:[u.jsx("span",{className:"font-bold block text-[10px] uppercase text-gray-500 leading-none mb-0.5",children:"Size"}),u.jsx("span",{className:"font-bold text-sm leading-none",children:e.size})]})]}),(e.retailPrice||e.cartonSize)&&u.jsx("div",{className:"border-t border-gray-300 my-0.5"}),(e.retailPrice||e.cartonSize)&&u.jsxs("div",{className:"flex justify-between items-end",children:[e.retailPrice&&u.jsxs("div",{children:[u.jsx("span",{className:"font-bold block text-[10px] uppercase text-gray-500 leading-none mb-0.5",children:"Retail"}),u.jsxs("div",{className:"flex items-baseline gap-0.5",children:[u.jsxs("span",{className:"text-xl font-black leading-none tracking-tighter",children:["$",e.retailPrice.toFixed(2)]}),u.jsxs("span",{className:"text-[10px] font-bold text-gray-500",children:["/",e.pricingUnit||e.uom||"Unit"]})]})]}),e.cartonSize&&u.jsxs("div",{className:"text-right",children:[u.jsx("span",{className:"font-bold block text-[10px] uppercase text-gray-500 leading-none mb-0.5",children:"Carton"}),u.jsxs("span",{className:"font-bold text-sm leading-none",children:[e.cartonSize," ",e.uom]})]})]})]})]})]});var Jle={exports:{}};(function(e,t){(function(r,n){e.exports=n(I)})(typeof self<"u"?self:Ve,function(r){return function(){var n={155:function(_){_.exports=r}},i={};function a(_){var C=i[_];if(C!==void 0)return C.exports;var A=i[_]={exports:{}};return n[_](A,A.exports,a),A.exports}a.d=function(_,C){for(var A in C)a.o(C,A)&&!a.o(_,A)&&Object.defineProperty(_,A,{enumerable:!0,get:C[A]})},a.o=function(_,C){return Object.prototype.hasOwnProperty.call(_,C)},a.r=function(_){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})};var s={};a.r(s),a.d(s,{useReactToPrint:function(){return S}});var o=a(155);const l="printWindow";function c({level:_="error",messages:C,suppressErrors:A=!1}){A||(_==="error"?console.error(C):_==="warning"?console.warn(C):console.debug(C))}function d(_,C){if(C||!_){const A=document.getElementById(l);A&&document.body.removeChild(A)}}function f(_){return _ instanceof Error?_:new Error("Unknown Error")}function p(_,C){const{documentTitle:A,onAfterPrint:j,onPrintError:P,preserveAfterPrint:O,print:D,suppressErrors:L}=C;setTimeout(()=>{var B,H;if(_.contentWindow){let z=function(){j==null||j(),d(O)};if(_.contentWindow.focus(),D)D(_).then(z).catch(ie=>{P?P("print",f(ie)):c({messages:["An error was thrown by the specified `print` function"],suppressErrors:L})});else{if(_.contentWindow.print){const ie=(H=(B=_.contentDocument)===null||B===void 0?void 0:B.title)!==null&&H!==void 0?H:"",X=_.ownerDocument.title;A&&(_.ownerDocument.title=A,_.contentDocument&&(_.contentDocument.title=A)),_.contentWindow.print(),A&&(_.ownerDocument.title=X,_.contentDocument&&(_.contentDocument.title=ie))}else c({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:L});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(ie=>{var X,W;return((W=(X=navigator.userAgent)!==null&&X!==void 0?X:navigator.vendor)!==null&&W!==void 0?W:"opera"in window&&window.opera).match(ie)})?setTimeout(z,500):z()}}else c({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:L})},500)}function m(_){const C=[],A=document.createTreeWalker(_,NodeFilter.SHOW_ELEMENT,null);let j=A.nextNode();for(;j;)C.push(j),j=A.nextNode();return C}function x(_,C,A){const j=m(_),P=m(C);if(j.length===P.length)for(let O=0;O<j.length;O++){const D=j[O],L=P[O],B=D.shadowRoot;if(B!==null){const H=L.attachShadow({mode:B.mode});H.innerHTML=B.innerHTML,x(B,H,A)}}else c({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",_,C],suppressErrors:A})}const y=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function b(_,C,A,j){var P,O,D,L,B;const{contentNode:H,clonedContentNode:z,clonedImgNodes:ie,clonedVideoNodes:X,numResourcesToLoad:W,originalCanvasNodes:Q}=A,{bodyClass:te,fonts:J,ignoreGlobalStyles:Y,pageStyle:pe,nonce:_e,suppressErrors:ee,copyShadowRoots:de}=j;_.onload=null;const G=(P=_.contentDocument)!==null&&P!==void 0?P:(O=_.contentWindow)===null||O===void 0?void 0:O.document;if(G){const q=G.body.appendChild(z);de&&x(H,q,!!ee),J&&(!((D=_.contentDocument)===null||D===void 0)&&D.fonts&&(!((L=_.contentWindow)===null||L===void 0)&&L.FontFace)?J.forEach(V=>{const Ae=new FontFace(V.family,V.source,{weight:V.weight,style:V.style});_.contentDocument.fonts.add(Ae),Ae.loaded.then(()=>{C(Ae)}).catch(Pe=>{C(Ae,["Failed loading the font:",Ae,"Load error:",f(Pe)])})}):(J.forEach(V=>{C(V)}),c({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:ee})));const ne=pe??y,Se=G.createElement("style");_e&&(Se.setAttribute("nonce",_e),G.head.setAttribute("nonce",_e)),Se.appendChild(G.createTextNode(ne)),G.head.appendChild(Se),te&&G.body.classList.add(...te.split(" "));const re=G.querySelectorAll("canvas");for(let V=0;V<Q.length;++V){const Ae=Q[V],Pe=re[V];if(Pe===void 0){c({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",Ae],suppressErrors:ee});continue}const ze=Pe.getContext("2d");ze&&ze.drawImage(Ae,0,0)}for(let V=0;V<ie.length;V++){const Ae=ie[V],Pe=Ae.getAttribute("src");if(Pe){const ze=new Image;ze.onload=()=>{C(Ae)},ze.onerror=(De,$e,et,ut,kt)=>{C(Ae,["Error loading <img>",Ae,"Error",kt])},ze.src=Pe}else C(Ae,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',Ae])}for(let V=0;V<X.length;V++){const Ae=X[V];Ae.preload="auto";const Pe=Ae.getAttribute("poster");if(Pe){const ze=new Image;ze.onload=()=>{C(Ae)},ze.onerror=(De,$e,et,ut,kt)=>{C(Ae,["Error loading video poster",Pe,"for video",Ae,"Error:",kt])},ze.src=Pe}else Ae.readyState>=2?C(Ae):Ae.src?(Ae.onloadeddata=()=>{C(Ae)},Ae.onerror=(ze,De,$e,et,ut)=>{C(Ae,["Error loading video",Ae,"Error",ut])},Ae.onstalled=()=>{C(Ae,["Loading video stalled, skipping",Ae])}):C(Ae,["Error loading video, `src` is empty",Ae])}const ae="select",ge=H.querySelectorAll(ae),Ee=G.querySelectorAll(ae);for(let V=0;V<ge.length;V++)Ee[V].value=ge[V].value;if(!Y){const V=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let Ae=0,Pe=V.length;Ae<Pe;++Ae){const ze=V[Ae];if(ze.tagName.toLowerCase()==="style"){const De=G.createElement(ze.tagName),$e=ze.sheet;if($e){let et="";try{const ut=$e.cssRules.length;for(let kt=0;kt<ut;++kt)typeof $e.cssRules[kt].cssText=="string"&&(et+=`${$e.cssRules[kt].cssText}\r
`)}catch(ut){c({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",ze,`Original error: ${f(ut).message}`],level:"warning"})}De.setAttribute("id",`react-to-print-${Ae}`),_e&&De.setAttribute("nonce",_e),De.appendChild(G.createTextNode(et)),G.head.appendChild(De)}}else if(ze.getAttribute("href"))if(ze.hasAttribute("disabled"))c({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",ze],level:"warning"}),C(ze);else{const De=G.createElement(ze.tagName);for(let $e=0,et=ze.attributes.length;$e<et;++$e){const ut=ze.attributes[$e];ut&&De.setAttribute(ut.nodeName,(B=ut.nodeValue)!==null&&B!==void 0?B:"")}De.onload=()=>{C(De)},De.onerror=($e,et,ut,kt,ht)=>{C(De,["Failed to load",De,"Error:",ht])},_e&&De.setAttribute("nonce",_e),G.head.appendChild(De)}else c({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",ze],level:"warning"}),C(ze)}}}W===0&&p(_,j)}function S({bodyClass:_,contentRef:C,copyShadowRoots:A,documentTitle:j,fonts:P,ignoreGlobalStyles:O,nonce:D,onAfterPrint:L,onBeforePrint:B,onPrintError:H,pageStyle:z,preserveAfterPrint:ie,print:X,printIframeProps:W,suppressErrors:Q}){return(0,o.useCallback)(J=>{function Y(){const pe={bodyClass:_,contentRef:C,copyShadowRoots:A,documentTitle:j,fonts:P,ignoreGlobalStyles:O,nonce:D,onAfterPrint:L,onPrintError:H,pageStyle:z,preserveAfterPrint:ie,print:X,suppressErrors:Q},_e=function(G){const q=document.createElement("iframe");return q.width=`${document.documentElement.clientWidth}px`,q.height=`${document.documentElement.clientHeight}px`,q.style.position="absolute",q.style.top=`-${document.documentElement.clientHeight+100}px`,q.style.left=`-${document.documentElement.clientWidth+100}px`,q.id=l,q.srcdoc="<!DOCTYPE html>",G&&(G.allow&&(q.allow=G.allow),G.referrerPolicy!==void 0&&(q.referrerPolicy=G.referrerPolicy),G.sandbox!==void 0&&(q.sandbox=G.sandbox)),q}(W),ee=function(G,q){const{contentRef:ne,fonts:Se,ignoreGlobalStyles:re,suppressErrors:ae}=q,ge=function({contentRef:De,optionalContent:$e,suppressErrors:et}){return $e&&typeof $e=="function"?(De&&c({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),$e()):De?De.current:void c({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:et})}({contentRef:ne,optionalContent:G,suppressErrors:ae});if(!ge)return;const Ee=ge.cloneNode(!0),V=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),Ae=Ee.querySelectorAll("img"),Pe=Ee.querySelectorAll("video"),ze=Se?Se.length:0;return{contentNode:ge,clonedContentNode:Ee,clonedImgNodes:Ae,clonedVideoNodes:Pe,numResourcesToLoad:(re?0:V.length)+Ae.length+Pe.length+ze,originalCanvasNodes:ge.querySelectorAll("canvas")}}(J,pe);if(!ee)return void c({messages:["There is nothing to print"],suppressErrors:Q});const de=function(G,q,ne){const{suppressErrors:Se}=G,re=[],ae=[];return function(ge,Ee){re.includes(ge)?c({level:"debug",messages:["Tried to mark a resource that has already been handled",ge],suppressErrors:Se}):(Ee?(c({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...Ee],suppressErrors:Se}),ae.push(ge)):re.push(ge),re.length+ae.length===q&&p(ne,G))}}(pe,ee.numResourcesToLoad,_e);(function(G,q,ne,Se){G.onload=()=>{b(G,q,ne,Se)},document.body.appendChild(G)})(_e,de,ee,pe)}d(ie,!0),B?B().then(()=>{Y()}).catch(pe=>{H==null||H("onBeforePrint",f(pe))}):Y()},[_,C,A,j,P,O,D,L,B,H,z,ie,X,Q])}return s}()})})(Jle);var Zle=Jle.exports;function ece({isOpen:e,onClose:t,selectedProducts:r}){const[n,i]=I.useState([]),a=I.useRef(null),[s,o]=I.useState(!1);I.useEffect(()=>{if(e&&r.length>0){const f=[];r.forEach(p=>{const m=r.length===1;f.push({id:p.id,parentId:p.id,isVariant:!1,selected:m&&p.variants.length===0,data:{id:p.id,name:p.name,manufacturer:p.manufacturerName,isVariant:!1}}),p.variants.forEach(x=>{f.push({id:x.id,parentId:p.id,isVariant:!0,selected:!0,data:{id:x.id,name:p.name,subName:x.name,sku:x.sku,size:x.size,manufacturer:p.manufacturerName,retailPrice:x.retailPrice,uom:x.uom,pricingUnit:x.pricingUnit,cartonSize:x.cartonSize,isVariant:!0}})})}),i(f)}},[e,r]);const l=Zle.useReactToPrint({contentRef:a,documentTitle:`Sample_Labels_${new Date().toISOString().slice(0,10)}`,onBeforeGetContent:async()=>{o(!0),await new Promise(f=>setTimeout(f,500)),o(!1)},pageStyle:`
            @page { size: letter; margin: 0.25in; }
            @media print {
                body { -webkit-print-color-adjust: exact; }
                .print-grid { 
                    display: grid !important;
                    grid-template-columns: repeat(2, 1fr) !important;
                    grid-auto-rows: 3.33in !important;
                    gap: 0.16in !important;
                }
                .break-inside-avoid { page-break-inside: avoid; }
            }
        `}),c=f=>{i(p=>p.map(m=>m.id===f?{...m,selected:!m.selected}:m))};if(!e)return null;const d=n.filter(f=>f.selected).length;return u.jsx("div",{className:"fixed inset-0 bg-scrim/80 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-surface-container-high w-full max-w-6xl h-[90vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden border border-outline/20",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center shrink-0",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-xl font-bold text-text-primary flex items-center gap-2",children:[u.jsx(wy,{className:"text-primary"})," Print Labels"]}),u.jsxs("p",{className:"text-sm text-text-secondary",children:[d," labels queued"]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:t,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors",children:"Cancel"}),u.jsxs("button",{onClick:()=>l(),disabled:d===0||s,className:"flex items-center gap-2 py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all disabled:opacity-50",children:[s?u.jsx($0,{className:"animate-spin"}):u.jsx(wy,{size:20}),"Print Sheets"]})]})]}),u.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[u.jsx("div",{className:"w-1/3 border-r border-outline/10 bg-surface-container overflow-y-auto p-4 space-y-4 scrollbar-thin scrollbar-thumb-surface-container-highest",children:r.map(f=>{const p=n.filter(m=>m.parentId===f.id);return u.jsxs("div",{className:"bg-surface-container-high border border-outline/10 rounded-xl overflow-hidden",children:[u.jsxs("div",{className:"p-3 bg-surface-container-highest border-b border-outline/10 font-bold text-text-primary flex justify-between items-center",children:[u.jsx("span",{children:f.name}),u.jsxs("span",{className:"text-xs font-normal text-text-secondary",children:[p.length," options"]})]}),u.jsx("div",{className:"divide-y divide-outline/10",children:p.map(m=>u.jsxs("div",{onClick:()=>c(m.id),className:`p-3 flex items-center gap-3 cursor-pointer hover:bg-primary-container/20 transition-colors ${m.selected?"bg-primary-container/30":""}`,children:[m.selected?u.jsx(n9,{size:18,className:"text-primary"}):u.jsx(Boe,{size:18,className:"text-text-tertiary"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-sm font-medium truncate ${m.selected?"text-primary":"text-text-secondary"}`,children:m.isVariant?m.data.subName:"Full Line Label"}),m.isVariant&&u.jsx("p",{className:"text-xs text-text-tertiary truncate",children:m.data.sku||"No SKU"})]})]},m.id))})]},f.id)})}),u.jsx("div",{className:"flex-1 bg-surface-variant/30 overflow-y-auto p-8 flex justify-center",children:u.jsx("div",{className:"bg-white shadow-2xl p-[0.25in] min-h-[11in] w-[8.5in] scale-75 origin-top text-black",children:u.jsx("div",{ref:a,className:"print-grid",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gridAutoRows:"3.33in",gap:"0"},children:n.filter(f=>f.selected).map(f=>u.jsx("div",{className:"p-2 w-full h-full flex items-center justify-center border border-dashed border-outline/10 print:border-none break-inside-avoid",children:u.jsx(Qle,{data:f.data,qrUrl:`/api/products/${f.isVariant?"variants/":""}${f.id}/qr`})},f.id))})})})]})]})})}const tce=({initialData:e={},onSave:t,onCancel:r,isSaving:n,saveButtonText:i="Save Changes",existingProduct:a})=>{const{vendors:s,addVendor:o}=Xr(),[l,c]=I.useState({manufacturerId:null,supplierId:null,productType:"",style:"",line:"",sizes:[],finish:"",color:"",sampleFormat:"Loose",boardColors:"",unitCost:null,uom:"",cartonSize:null,sku:"",productUrl:"",...e}),[d,f]=I.useState(""),[p,m]=I.useState(""),[x,y]=I.useState(!1),[b,S]=I.useState([]),[_,C]=I.useState(!1),[A,j]=I.useState("Manufacturer"),[P,O]=I.useState(null),[D,L]=I.useState(!1),[B,H]=I.useState([]);I.useEffect(()=>{(async()=>{try{const ne=await TBe();S(ne.map(re=>({label:re,value:re})));const Se=await Qx();O(Se)}catch(ne){console.error("Failed to fetch data:",ne)}})()},[]),I.useEffect(()=>{var q,ne;if(e.manufacturerId){const Se=(q=s.find(re=>re.id===e.manufacturerId))==null?void 0:q.name;f(Se||"")}if(e.supplierId&&e.supplierId!==e.manufacturerId){y(!0);const Se=(ne=s.find(re=>re.id===e.supplierId))==null?void 0:ne.name;m(Se||"")}},[e,s]);const z=I.useMemo(()=>{var q;return(q=s.find(ne=>ne.id===l.manufacturerId))==null?void 0:q.name},[s,l.manufacturerId]),ie=I.useMemo(()=>{var q;return(q=s.find(ne=>ne.id===l.supplierId))==null?void 0:q.name},[s,l.supplierId]),X=I.useMemo(()=>!d.trim()||d===z?[]:s.filter(q=>(q.vendorType==="Manufacturer"||q.vendorType==="Both")&&q.name.toLowerCase().includes(d.toLowerCase())),[s,d,z]),W=I.useMemo(()=>!p.trim()||p===ie?[]:s.filter(q=>(q.vendorType==="Supplier"||q.vendorType==="Both")&&q.name.toLowerCase().includes(p.toLowerCase())),[s,p,ie]),Q=q=>{c(ne=>({...ne,manufacturerId:q.id,productType:q.defaultProductType||ne.productType||""})),f(q.name)},te=q=>{c(ne=>({...ne,supplierId:q.id})),m(q.name)},J=q=>{const{name:ne,value:Se}=q.target;c(ne==="unitCost"||ne==="cartonSize"?re=>({...re,[ne]:Se===""?null:parseFloat(Se)}):re=>({...re,[ne]:Se}))},Y=I.useCallback(q=>{const ne=l.sizes,re=(q?q.map(ae=>ae.value):[]).map(ae=>ne.find(Ee=>Ee.value===ae)||{value:ae,unitCost:null,cartonSize:null,uom:null});c(ae=>({...ae,sizes:re}))},[l.sizes]),pe=(q,ne,Se)=>{c(re=>{const ae=[...re.sizes];return ne==="unitCost"||ne==="cartonSize"?ae[q]={...ae[q],[ne]:Se===""?null:Number(Se)}:ae[q]={...ae[q],[ne]:Se},{...re,sizes:ae}})},_e=q=>{if(q.preventDefault(),!l.style||!l.productType)return Re.error("Style and Product Type are required.");if(!l.manufacturerId)return Re.error("Please select a manufacturer.");if(x&&!l.supplierId)return Re.error("Please select a supplier.");t(l)},ee=async q=>{await o(q),C(!1)},de=q=>{if(!a)return;const ne=a.variants.find(re=>re.size===q||re.name===q);if(!ne){Re.error("Save changes before printing new variants.");return}const Se={...a,variants:[ne]};H([Se]),L(!0)},G=I.useMemo(()=>{if(!l.unitCost||!P)return null;const q=x?l.supplierId:l.manufacturerId,ne=s.find(ae=>ae.id===q),Se=kh(ne,P,"Customer");return{price:Ch(l.unitCost,Se.percentage,Se.method),details:`${Se.method} ${Se.percentage}% (${ne!=null&&ne.defaultMarkup?"Vendor Override":"Global Default"})`}},[l.unitCost,l.manufacturerId,l.supplierId,x,s,P]);return u.jsxs(u.Fragment,{children:[u.jsxs("form",{onSubmit:_e,children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Manufacturer *"}),u.jsx("input",{type:"text",value:d,onChange:q=>{f(q.target.value),c(ne=>({...ne,manufacturerId:null}))},className:"w-full p-2 bg-background border border-border rounded text-text-primary",required:!0}),X.length>0&&u.jsx("div",{className:"absolute z-20 w-full bg-surface border border-border rounded-b-md mt-1 max-h-40 overflow-y-auto",children:X.map(q=>u.jsx("div",{onClick:()=>Q(q),className:"p-2 hover:bg-background cursor-pointer",children:q.name},q.id))}),d.length>0&&!z&&X.length===0&&u.jsx("div",{className:"absolute z-20 w-full bg-surface border border-border rounded-b-md mt-1",children:u.jsx("div",{onClick:()=>{j("Manufacturer"),C(!0)},className:"p-2 text-accent font-semibold hover:bg-accent hover:text-white cursor-pointer text-center",children:"+ Add New Manufacturer"})})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",id:"add-sample-diff-supplier",checked:x,onChange:q=>y(q.target.checked),className:"h-4 w-4 rounded text-primary focus:ring-primary bg-background border-border"}),u.jsx("label",{htmlFor:"add-sample-diff-supplier",className:"text-sm text-text-secondary",children:"Different Supplier?"})]}),x&&u.jsxs("div",{className:"relative",children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Supplier"}),u.jsx("input",{type:"text",value:p,onChange:q=>{m(q.target.value),c(ne=>({...ne,supplierId:null}))},className:"w-full p-2 bg-background border border-border rounded text-text-primary",required:!0}),W.length>0&&u.jsx("div",{className:"absolute z-10 w-full bg-surface border border-border rounded-b-md mt-1 max-h-40 overflow-y-auto",children:W.map(q=>u.jsx("div",{onClick:()=>te(q),className:"p-2 hover:bg-background cursor-pointer",children:q.name},q.id))}),p.length>0&&!ie&&W.length===0&&u.jsx("div",{className:"absolute z-10 w-full bg-surface border border-border rounded-b-md mt-1",children:u.jsx("div",{onClick:()=>{j("Supplier"),C(!0)},className:"p-2 text-accent font-semibold hover:bg-accent hover:text-white cursor-pointer text-center",children:"+ Add New Supplier"})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Product Type *"}),u.jsxs("select",{name:"productType",value:l.productType,onChange:J,className:"w-full p-2 bg-background border border-border rounded text-text-primary",required:!0,children:[u.jsx("option",{value:"",disabled:!0,children:"-- Select a Type --"}),Ey.map(q=>u.jsx("option",{value:q,children:q},q))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Style *"}),u.jsx("input",{type:"text",name:"style",value:l.style,onChange:J,className:"w-full p-2 bg-background border border-border rounded text-text-primary",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Color"}),u.jsx("input",{type:"text",name:"color",value:l.color,onChange:J,className:"w-full p-2 bg-background border border-border rounded text-text-primary"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Line"}),u.jsx("input",{type:"text",name:"line",value:l.line,onChange:J,className:"w-full p-2 bg-background border border-border rounded text-text-primary"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Finish"}),u.jsx("input",{type:"text",name:"finish",value:l.finish,onChange:J,className:"w-full p-2 bg-background border border-border rounded text-text-primary"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Sizes"}),u.jsx(PS,{isMulti:!0,name:"sizes",options:b,value:l.sizes.map(q=>({label:q.value,value:q.value})),onChange:Y,className:"react-select-container mt-1",classNamePrefix:"react-select",placeholder:"Type or select sizes...",styles:{control:q=>({...q,backgroundColor:"var(--color-background)",borderColor:"var(--color-border)"}),input:q=>({...q,color:"var(--color-text-primary)"}),multiValue:q=>({...q,backgroundColor:"var(--color-primary)"}),multiValueLabel:q=>({...q,color:"var(--color-on-primary)"}),multiValueRemove:q=>({...q,color:"var(--color-on-primary)",":hover":{backgroundColor:"var(--color-primary-hover)",color:"var(--color-on-primary)"}}),menu:q=>({...q,backgroundColor:"var(--color-surface)"}),option:(q,{isFocused:ne,isSelected:Se})=>({...q,backgroundColor:Se?"var(--color-primary)":ne?"var(--color-background)":void 0,color:Se?"var(--color-on-primary)":"var(--color-text-primary)",":active":{...q[":active"],backgroundColor:"var(--color-primary-hover)"}})}})]}),l.sizes.length>0&&u.jsxs("div",{className:"bg-surface p-3 rounded border border-border overflow-x-auto",children:[u.jsx("h4",{className:"text-xs font-semibold text-text-secondary uppercase mb-2",children:"Size Variants Pricing"}),u.jsxs("table",{className:"w-full text-sm text-left",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"text-text-secondary border-b border-border",children:[u.jsx("th",{className:"pb-2 px-2",children:"Size"}),u.jsx("th",{className:"pb-2 px-2",children:"Cost"}),u.jsx("th",{className:"pb-2 px-2",children:"UOM"}),u.jsx("th",{className:"pb-2 px-2",children:"Carton"}),u.jsx("th",{className:"pb-2 px-2 text-right",children:"Actions"})," "]})}),u.jsx("tbody",{children:l.sizes.map((q,ne)=>u.jsxs("tr",{className:"border-b border-border last:border-0",children:[u.jsx("td",{className:"py-2 px-2 font-medium text-text-primary",children:q.value}),u.jsx("td",{className:"py-2 px-2",children:u.jsx("input",{type:"number",step:"0.01",placeholder:l.unitCost?`Def: $${l.unitCost}`:"0.00",value:q.unitCost??"",onChange:Se=>pe(ne,"unitCost",Se.target.value),className:"w-20 p-1 bg-background border border-border rounded text-xs text-text-primary"})}),u.jsx("td",{className:"py-2 px-2",children:u.jsxs("select",{value:q.uom??"",onChange:Se=>pe(ne,"uom",Se.target.value),className:"p-1 bg-background border border-border rounded text-xs text-text-primary w-16",children:[u.jsx("option",{value:"",children:l.uom||"Def"}),gh.map(Se=>u.jsx("option",{value:Se,children:Se},Se))]})}),u.jsx("td",{className:"py-2 px-2",children:u.jsx("input",{type:"number",step:"0.0001",placeholder:l.cartonSize?`Def: ${l.cartonSize}`:"Qty",value:q.cartonSize??"",onChange:Se=>pe(ne,"cartonSize",Se.target.value),className:"w-16 p-1 bg-background border border-border rounded text-xs text-text-primary"})}),u.jsx("td",{className:"py-2 px-2 text-right",children:u.jsx("button",{type:"button",onClick:()=>de(q.value),className:"p-1 text-text-secondary hover:text-primary hover:bg-background rounded",title:"Print Label",disabled:!a,children:u.jsx(mT,{size:16})})})]},ne))})]})]}),u.jsxs("div",{className:"p-3 bg-background rounded border border-border space-y-3",children:[u.jsx("h4",{className:"text-sm font-medium text-text-secondary border-b border-border pb-1 mb-2",children:"Default Pricing"}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Unit Cost ($)"}),u.jsx("input",{type:"number",step:"0.01",min:"0",name:"unitCost",value:l.unitCost??"",onChange:J,className:"w-full p-2 bg-surface border border-border rounded text-sm text-text-primary",placeholder:"0.00"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Unit (UOM)"}),u.jsxs("select",{name:"uom",value:l.uom??"",onChange:J,className:"w-full p-2 bg-surface border border-border rounded text-sm text-text-primary",children:[u.jsx("option",{value:"",children:"-- Unit --"}),gh.map(q=>u.jsx("option",{value:q,children:q},q))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Carton Size"}),u.jsx("input",{type:"number",step:"0.0001",min:"0",name:"cartonSize",value:l.cartonSize??"",onChange:J,className:"w-full p-2 bg-surface border border-border rounded text-sm text-text-primary",placeholder:"Qty per box"})]})]}),G&&u.jsxs("div",{className:"mt-2 p-2 bg-green-900/20 border border-green-800/50 rounded flex justify-between items-center",children:[u.jsx("span",{className:"text-xs text-green-400",children:"Suggested Retail:"}),u.jsxs("div",{className:"text-right",children:[u.jsx("span",{className:"font-bold text-green-400 text-sm",children:Qm(G.price)}),u.jsx("span",{className:"text-[10px] text-gray-500 block",children:G.details})]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"SKU"}),u.jsx("input",{type:"text",name:"sku",value:l.sku,onChange:J,className:"w-full p-2 bg-background border border-border rounded text-text-primary"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-text-secondary",children:"Product URL"}),u.jsx("input",{type:"url",name:"productUrl",value:l.productUrl,onChange:J,className:"w-full p-2 bg-background border border-border rounded text-text-primary"})]})]})]}),u.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-border",children:[u.jsx("button",{type:"button",onClick:r,className:"py-2 px-4 bg-secondary hover:bg-secondary-hover rounded text-on-secondary",children:"Cancel"}),u.jsx("button",{type:"submit",className:"py-2 px-4 bg-primary hover:bg-primary-hover rounded text-on-primary",disabled:n,children:n?"Saving...":i})]})]}),u.jsx(kb,{isOpen:_,onClose:()=>C(!1),onSave:ee,initialVendorType:A}),D&&B.length>0&&u.jsx(ece,{isOpen:D,onClose:()=>L(!1),selectedProducts:B})]})},jBe=({isOpen:e,onClose:t,onSampleCreated:r,initialSearchTerm:n})=>{const{addSample:i}=Xr(),[a,s]=I.useState(!1),o=async l=>{s(!0);try{const{supplierId:c,...d}=l,f=l.supplierId||l.manufacturerId,p={...d,supplierId:f};p.productType!=="Tile"&&(p.sampleFormat=null,p.boardColors="");const m=await i(p);r(m),Re.success(`Sample "${m.style}" created!`),t()}catch(c){console.error("Failed to create sample:",c),Re.error("Could not create sample.")}finally{s(!1)}};return e?u.jsx(u.Fragment,{children:u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[60]",children:u.jsxs("div",{className:"bg-surface-container-high p-8 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-outline/10",onClick:l=>l.stopPropagation(),children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Create New Sample"}),u.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-surface-container-highest text-text-secondary hover:text-text-primary transition-colors",children:u.jsx(tn,{className:"w-6 h-6"})})]}),u.jsx(tce,{initialData:{style:n},onSave:o,onCancel:t,isSaving:a,saveButtonText:"Create & Add"})]})})}):null};var DBe=I.forwardRef(function(e,t){var r=qle(e);return I.createElement(b9,Tr({ref:t},r))}),rce=DBe;const oK=()=>{const e=new Date;return e.setDate(e.getDate()+3),e.toISOString().split("T")[0]},MBe=({isOpen:e,onClose:t})=>{const{addSampleCheckout:r,installers:n}=Xr(),[i,a]=I.useState("PROJECT"),[s,o]=I.useState(null),[l,c]=I.useState(null),[d,f]=I.useState(null),[p,m]=I.useState([]),[x,y]=I.useState(oK()),[b,S]=I.useState(!1),[_,C]=I.useState(!1),[A,j]=I.useState(!1),[P,O]=I.useState(""),[D,L]=I.useState(!1),[B,H]=I.useState(""),[z,ie]=I.useState(null),X=I.useCallback(ee=>{m(ee)},[]),W=()=>{a("PROJECT"),o(null),c(null),f(null),m([]),y(oK()),C(!1),S(!1),j(!1),O(""),L(!1),H(""),ie(null),t()},Q=ee=>{o(ee),c(null),m([])},te=ee=>{O(ee),j(!0)},J=ee=>{H(ee),L(!0)},Y=ee=>{ie(ee),L(!1)},pe=async()=>{if(p.length===0){Re.error("Please add at least one sample.");return}if(!x){Re.error("Please select a return date.");return}if(i==="PROJECT"&&!l){Re.error("Please select a project.");return}if(i==="CUSTOMER"&&!s){Re.error("Please select a customer.");return}if(i==="INSTALLER"&&!d){Re.error("Please select an installer.");return}S(!0);const ee=Re.loading(`Checking out ${p.length} item(s)...`);try{const de=p.map(G=>r({projectId:i==="PROJECT"?l.id:void 0,customerId:i==="CUSTOMER"?s.id:void 0,installerId:i==="INSTALLER"?d.id:void 0,variantId:G.variantId,interestVariantId:G.interestVariantId,sampleType:G.sampleType,quantity:G.quantity,expectedReturnDate:new Date(x).toISOString()}));await Promise.all(de),Re.success(`${p.length} item(s) checked out successfully.`,{id:ee,icon:u.jsx(W4,{className:"text-green-500"})}),C(!0)}catch(de){console.error("Failed to checkout samples:",de),Re.error("An error occurred during checkout.",{id:ee})}finally{S(!1)}};if(!e)return null;const _e=i==="PROJECT"||i==="CUSTOMER"?s:i==="INSTALLER"?d:null;return u.jsx(od,{children:u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"fixed inset-0 bg-scrim/60 z-50 overflow-y-auto",children:[u.jsx("div",{className:"print-only",children:u.jsx(T5e,{customer:_e,project:l,checkoutItems:p,returnDate:x})}),u.jsx("div",{className:"flex min-h-full items-center justify-center p-0 lg:p-4",children:u.jsxs("div",{className:"bg-surface-container-high w-full h-full lg:h-auto lg:max-h-[90vh] lg:max-w-4xl lg:rounded-2xl shadow-2xl flex flex-col border border-outline/20 relative",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center lg:rounded-t-2xl sticky top-0 z-20 no-print bg-surface-container-high",children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"New Sample Checkout"}),u.jsx("button",{onClick:W,className:"p-2 rounded-full hover:bg-surface-container-highest text-text-secondary hover:text-text-primary",children:u.jsx(tn,{className:"w-6 h-6"})})]}),u.jsxs("fieldset",{disabled:_,className:"flex-1 overflow-y-auto p-4 md:p-8 space-y-8",children:[u.jsxs("section",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-4 text-text-primary px-1",children:"Who is this for?"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[u.jsxs("button",{onClick:()=>a("PROJECT"),className:`p-4 rounded-xl border-2 flex flex-col items-center gap-2 transition-all ${i==="PROJECT"?"border-primary bg-primary-container/30 text-primary":"border-outline/20 bg-surface-container text-text-secondary hover:border-primary/50"}`,children:[u.jsx(zh,{size:24}),u.jsx("span",{className:"font-bold",children:"Project"})]}),u.jsxs("button",{onClick:()=>a("CUSTOMER"),className:`p-4 rounded-xl border-2 flex flex-col items-center gap-2 transition-all ${i==="CUSTOMER"?"border-primary bg-primary-container/30 text-primary":"border-outline/20 bg-surface-container text-text-secondary hover:border-primary/50"}`,children:[u.jsx(pc,{size:24}),u.jsx("span",{className:"font-bold",children:"Customer Only"})]}),u.jsxs("button",{onClick:()=>a("INSTALLER"),className:`p-4 rounded-xl border-2 flex flex-col items-center gap-2 transition-all ${i==="INSTALLER"?"border-primary bg-primary-container/30 text-primary":"border-outline/20 bg-surface-container text-text-secondary hover:border-primary/50"}`,children:[u.jsx(Sb,{size:24}),u.jsx("span",{className:"font-bold",children:"Installer"})]})]})]}),u.jsx("section",{children:(i==="PROJECT"||i==="CUSTOMER")&&u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-lg font-semibold mb-3 text-text-primary px-1",children:"1. Customer"}),s?u.jsxs("div",{className:"bg-surface-container p-4 rounded-xl flex justify-between items-center border border-outline/20",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx(pc,{className:"w-6 h-6 text-primary"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-lg text-text-primary",children:s.fullName}),u.jsx("p",{className:"text-sm text-text-secondary",children:s.email})]})]}),!_&&u.jsx("button",{onClick:()=>{o(null),c(null)},className:"text-sm font-semibold text-primary hover:underline no-print",children:"Change"})]}):u.jsx(qoe,{onCustomerSelect:Q,onRequestNewCustomer:te})]})}),i==="PROJECT"&&s&&u.jsxs("section",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-3 text-text-primary px-1",children:"2. Project"}),l?u.jsxs("div",{className:"bg-surface-container p-4 rounded-xl flex justify-between items-center border border-outline/20",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx(zh,{className:"w-6 h-6 text-primary"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-lg text-text-primary",children:l.projectName}),u.jsx("p",{className:"text-sm text-text-secondary",children:l.projectType})]})]}),!_&&u.jsx("button",{onClick:()=>c(null),className:"text-sm font-semibold text-primary hover:underline no-print",children:"Change"})]}):u.jsx(r5e,{customer:s,onProjectSelect:ee=>c(ee)})]}),i==="INSTALLER"&&u.jsxs("section",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-3 text-text-primary px-1",children:"1. Select Installer"}),u.jsx(rce,{options:n.map(ee=>({label:ee.installerName,value:ee})),onChange:ee=>f((ee==null?void 0:ee.value)||null),value:d?{label:d.installerName,value:d}:null,placeholder:"Search installers...",className:"react-select-container",classNamePrefix:"react-select"})]}),(i==="PROJECT"&&l||i==="CUSTOMER"&&s||i==="INSTALLER"&&d)&&u.jsxs("section",{children:[u.jsxs("h3",{className:"text-lg font-semibold mb-3 text-text-primary px-1",children:[i==="PROJECT"?"3.":"2."," Samples & Return Date"]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"returnDate",className:"block text-sm font-medium text-text-secondary mb-2",children:"Expected Return Date"}),u.jsxs("div",{className:"relative",children:[u.jsx(Cu,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-secondary w-5 h-5"}),u.jsx("input",{id:"returnDate",type:"date",value:x,onChange:ee=>y(ee.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg py-2.5 pl-10 pr-4 focus:outline-none focus:ring-2 focus:ring-primary/50 text-text-primary"})]})]}),u.jsx("p",{className:"text-text-secondary mb-4",children:"Search or scan samples to add to the checkout list."}),u.jsx(Yoe,{onItemsChange:X,onRequestNewSample:J,externalSelectedProduct:z})]})]}),u.jsx("div",{className:"p-4 border-t border-outline/10 lg:rounded-b-2xl flex justify-end gap-4 no-print sticky bottom-0 z-20 lg:static bg-surface-container-high",children:_?u.jsxs(u.Fragment,{children:[u.jsx("button",{type:"button",onClick:W,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors font-medium",children:"Close"}),u.jsxs("button",{type:"button",onClick:()=>window.print(),className:"py-3 px-6 rounded-full bg-tertiary hover:bg-tertiary-hover text-on-tertiary flex items-center gap-2 font-semibold shadow-md transition-all",children:[u.jsx(wy,{size:18}),"Print Summary"]})]}):u.jsxs(u.Fragment,{children:[u.jsx("button",{type:"button",onClick:W,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors font-medium",disabled:b,children:"Cancel"}),u.jsx("button",{type:"button",onClick:pe,disabled:!(i==="PROJECT"&&l||i==="CUSTOMER"&&s||i==="INSTALLER"&&d)||p.length===0||b,className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold disabled:opacity-50 disabled:cursor-not-allowed shadow-md",children:b?"Checking Out...":`Finish Checkout (${p.length})`})]})})]})})]}),u.jsx(s9,{isOpen:A,onClose:()=>j(!1),customer:null,initialData:{fullName:P}}),u.jsx(jBe,{isOpen:D,onClose:()=>L(!1),onSampleCreated:Y,initialSearchTerm:B})]})})},FBe="America/Los_Angeles",df=(e,t=FBe,r={month:"short",day:"numeric",year:"numeric"})=>{if(!e)return"-";const n=new Date(e);if(isNaN(n.getTime()))return"Invalid Date";try{return new Intl.DateTimeFormat("en-US",{...r,timeZone:t}).format(n)}catch{return console.warn(`Invalid timezone '${t}', falling back to UTC.`),new Intl.DateTimeFormat("en-US",{...r,timeZone:"UTC"}).format(n)}},LBe=(e,t)=>{for(const r of t){const n=r.variants.find(i=>String(i.id)===String(e.variantId));if(n)return`${r.name} - ${n.name}`}return"Unknown Sample"},BBe=e=>{switch(e){case sr.NEW:return"bg-surface-container text-text-secondary border border-outline";case sr.SCHEDULED:return"bg-primary-container text-primary font-bold";case sr.ACCEPTED:return"bg-success-container text-success font-bold";case sr.QUOTING:return"bg-secondary-container text-on-secondary-container";case sr.SAMPLE_CHECKOUT:return"bg-warning-container text-warning font-bold";case sr.COMPLETED:return"bg-surface text-text-primary border border-outline";case sr.AWAITING_DECISION:return"bg-surface-container-highest text-text-secondary";case sr.CANCELLED:return"bg-error-container text-error";default:return"bg-surface-container text-text-secondary"}},UBe=(e,t)=>{const r=t.filter(l=>l.projectId===e.id&&l.actualReturnDate===null);if(r.length===0)return null;const n=r.sort((l,c)=>new Date(l.expectedReturnDate).getTime()-new Date(c.expectedReturnDate).getTime())[0],i=new Date;i.setHours(0,0,0,0);const a=new Date(n.expectedReturnDate);a.setHours(0,0,0,0);const s=a.getTime()-i.getTime(),o=Math.ceil(s/(1e3*60*60*24));return o===0?{color:"text-warning",text:"Sample due today"}:o<0?{color:"text-error",text:"Sample is overdue"}:null},$Be=({project:e})=>{const{customers:t,sampleCheckouts:r,products:n,updateSampleCheckout:i,extendSampleCheckout:a,jobs:s,installers:o}=Xr(),l=t.find(y=>y.id===e.customerId),c=BBe(e.status),d=UBe(e,r),f=I.useMemo(()=>{const y=s.find(L=>L.projectId===e.id),b=(y==null?void 0:y.appointments)||[];if(b.length===0)return null;const S=[...b].sort((L,B)=>new Date(L.startDate).getTime()-new Date(B.startDate).getTime()),_=S[0].startDate,C=S[S.length-1].endDate,A=S[0].installerId,j=o.find(L=>L.id===A),P=df(_),O=df(C);return{dateString:P===O?P:`${P} - ${O}`,installerName:(j==null?void 0:j.installerName)||(j==null?void 0:j.name)||"Assigned Installer"}},[s,e.id,o]),p=I.useMemo(()=>r.filter(b=>b.projectId===e.id&&b.isSelected).slice(0,4).map(b=>{for(const S of n){if(b.interestVariantId){const C=S.variants.find(A=>String(A.id)===String(b.interestVariantId));if(C)return{url:C.thumbnailUrl||C.imageUrl||S.defaultThumbnailUrl||S.defaultImageUrl,name:C.name}}const _=S.variants.find(C=>String(C.id)===String(b.variantId));if(_)return{url:_.thumbnailUrl||_.imageUrl||S.defaultThumbnailUrl||S.defaultImageUrl,name:_.name}}return null}).filter(Boolean),[r,n,e.id]),m=I.useMemo(()=>r.filter(y=>y.projectId===e.id&&y.actualReturnDate===null),[r,e.id]),x=(y,b)=>{y.stopPropagation(),y.preventDefault(),b()};return u.jsxs(ui,{to:`/projects/${e.id}`,className:"block bg-surface-container-high p-5 rounded-xl shadow-sm hover:shadow-md transition-all duration-300 w-96 flex-shrink-0 border border-outline/10 group",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{className:"min-w-0 pr-2",children:[u.jsx("h3",{className:"font-bold text-lg text-text-primary truncate",children:e.projectName}),u.jsx("p",{className:"text-sm text-text-secondary truncate font-medium",children:l==null?void 0:l.fullName})]}),u.jsxs("div",{className:"flex items-center space-x-2 shrink-0",children:[d&&u.jsx("div",{title:d.text,className:`p-1.5 rounded-full bg-error-container ${d.color}`,children:u.jsx(kS,{size:14})}),u.jsx("div",{className:`text-xs font-semibold px-2 py-1 rounded-full ${c}`,children:e.status})]})]}),f&&u.jsxs("div",{className:"mt-4 flex items-start gap-4 text-sm text-text-secondary",children:[u.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[u.jsx("div",{className:"w-6 h-6 rounded-full bg-primary-container flex items-center justify-center shrink-0",children:u.jsx(Cu,{className:"w-3.5 h-3.5 text-primary"})}),u.jsx("span",{className:"truncate",children:f.dateString})]}),u.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[u.jsx("div",{className:"w-6 h-6 rounded-full bg-primary-container flex items-center justify-center shrink-0",children:u.jsx(Sb,{className:"w-3.5 h-3.5 text-primary"})}),u.jsx("span",{className:"truncate",children:f.installerName})]})]}),m.length>0&&u.jsxs("div",{className:"mt-4 pt-4 border-t border-outline/20",children:[u.jsx("h4",{className:"text-[10px] font-bold uppercase tracking-wider text-text-tertiary mb-3",children:"Active Samples"}),u.jsx("div",{className:"space-y-2.5",children:m.map(y=>{const b=LBe(y,n);return u.jsxs("div",{className:"flex justify-between items-center text-sm group/sample",children:[u.jsx("span",{className:"text-text-primary truncate",title:b,children:b}),u.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover/sample:opacity-100 transition-opacity",children:[u.jsx("button",{onClick:S=>x(S,()=>a(y)),className:"p-1.5 bg-surface hover:bg-surface-hover text-primary rounded-full border border-outline",children:u.jsx(gd,{size:14})}),u.jsx("button",{onClick:S=>x(S,()=>i(y)),className:"p-1.5 bg-primary-container hover:bg-primary text-primary hover:text-on-primary rounded-full",children:u.jsx(i9,{size:14})})]})]},y.id)})})]}),p.length>0&&u.jsx("div",{className:"mt-4 flex gap-2",children:p.map((y,b)=>u.jsx("div",{className:"w-8 h-8 rounded-md bg-surface-container-low border border-outline/20 overflow-hidden shrink-0",title:y==null?void 0:y.name,children:y!=null&&y.url?u.jsx("img",{src:Ma(y.url),alt:(y==null?void 0:y.name)||"Selected variant",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center text-text-tertiary",children:u.jsx(Ed,{size:14})})},b))}),u.jsxs("div",{className:"mt-4 flex justify-between items-center text-xs text-text-secondary pt-3 border-t border-outline/10",children:[u.jsx("span",{className:"bg-surface-container px-2 py-1 rounded-md",children:e.projectType}),u.jsx(md,{className:"w-4 h-4 text-primary group-hover:translate-x-1 transition-transform"})]})]})},AT=({title:e,projects:t})=>u.jsxs("div",{className:"mb-12",children:[e&&u.jsx("h2",{className:"text-2xl font-semibold mb-4 text-text-primary pl-1",children:e}),t.length>0?u.jsx("div",{className:"flex gap-6 overflow-x-auto pb-4 after:content-[''] after:min-w-[1rem]",children:t.map(r=>u.jsx($Be,{project:r},r.id))}):u.jsx("p",{className:"text-text-secondary italic",children:"No projects in this category."})]}),zBe=({order:e,project:t})=>{const r=new Date;r.setHours(0,0,0,0);let n="No ETA",i="text-text-secondary font-medium";if(e.etaDate){const a=e.etaDate.includes("T")?e.etaDate.split("T")[0]:e.etaDate,s=new Date(`${a}T00:00:00`);s.setHours(0,0,0,0);const o=s.getTime()-r.getTime(),l=Math.ceil(o/(1e3*60*60*24));n=s.toLocaleDateString(),l<0?i="text-error font-bold":l===0?i="text-success font-bold":l<=3&&(i="text-warning font-bold")}return u.jsxs(ui,{to:`/projects/${e.projectId}`,className:"block bg-surface-container-high p-5 rounded-xl shadow-sm hover:shadow-md transition-all duration-300 w-80 flex-shrink-0 border border-outline/10 group",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-lg text-text-primary truncate max-w-[180px]",title:t==null?void 0:t.projectName,children:(t==null?void 0:t.projectName)||"Unknown Project"}),u.jsx("p",{className:"text-sm text-text-secondary truncate font-medium",children:e.supplierName||"Unknown Supplier"})]}),u.jsxs("div",{className:`text-[10px] uppercase tracking-wide font-bold px-2 py-1 rounded-full flex items-center gap-1 ${e.status==="Damage Replacement"?"bg-error-container text-error":"bg-primary-container text-primary"}`,children:[e.status==="Damage Replacement"?u.jsx(xd,{size:10}):u.jsx(z0,{size:10}),e.status==="Damage Replacement"?"Repl.":"Order"]})]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-outline/20",children:[u.jsxs("div",{className:"flex justify-between items-center text-sm mb-2",children:[u.jsx("span",{className:"text-text-secondary",children:"ETA:"}),u.jsx("span",{className:i,children:n})]}),u.jsxs("div",{className:"space-y-1.5",children:[e.lineItems.slice(0,2).map(a=>u.jsx("div",{className:"flex justify-between text-xs text-text-secondary",children:u.jsxs("span",{className:"truncate w-3/4",children:[a.quantity," ",a.unit," - ",a.style]})},a.id)),e.lineItems.length>2&&u.jsxs("p",{className:"text-xs text-text-tertiary italic",children:["+",e.lineItems.length-2," more items..."]})]})]}),u.jsx("div",{className:"mt-5 flex justify-end items-center text-sm text-primary font-medium group-hover:translate-x-1 transition-transform",children:u.jsxs("span",{className:"flex items-center gap-1",children:["View ",u.jsx(md,{size:16})]})})]})},HBe=({title:e,orders:t,projects:r})=>u.jsxs("div",{className:"mb-12",children:[u.jsxs("h2",{className:"text-2xl font-semibold mb-4 text-text-primary flex items-center gap-2",children:[u.jsx("div",{className:"p-2 bg-primary-container rounded-full text-primary",children:u.jsx(dx,{size:20})}),e]}),u.jsxs("div",{className:"flex gap-6 overflow-x-auto pb-4 no-scrollbar",children:[t.map(n=>u.jsx(zBe,{order:n,project:r.find(i=>i.id===n.projectId)},n.id)),t.length===0&&u.jsx("p",{className:"text-text-secondary italic",children:"No orders found matching this criteria."})]})]}),WBe=e=>{const{products:t,projects:r,customers:n,installers:i}=Xr(),a=r.find(d=>d.id===e.projectId),s=n.find(d=>d.id===e.customerId),o=i.find(d=>d.id===e.installerId);let l,c;for(const d of t){const f=d.variants.find(p=>String(p.id)===String(e.variantId));if(f){l=d,c=f;break}}return{product:l,variant:c,project:a,customer:s,installer:o}},VBe=({checkout:e,onClick:t})=>{const{extendSampleCheckout:r,updateSampleCheckout:n}=Xr(),{product:i,variant:a,project:s,customer:o,installer:l}=WBe(e);if(!i||!a)return null;const c=async A=>{A.stopPropagation(),await r(e)},d=async A=>{A.stopPropagation(),confirm(`Return "${a.name}"?`)&&await n(e)};let f="bg-surface-container border border-outline text-text-secondary",p="Checked Out";const m=new Date;m.setHours(0,0,0,0);const x=new Date(e.expectedReturnDate);x.setHours(0,0,0,0);const y=new Date(e.checkoutDate),S=Math.ceil((x.getTime()-y.getTime())/(1e3*60*60*24))>3;x<m?(f="bg-error-container text-error font-bold border-none",p="OVERDUE"):x.getTime()===m.getTime()?(f="bg-warning-container text-warning font-bold border-none",p="Due Today"):S?(f="bg-primary-container text-primary font-bold border-none",p="Extended"):p="On Time";const _=a.imageUrl||i.defaultImageUrl,C=`${i.name} - ${a.name}`;return u.jsxs("div",{className:"bg-surface-container-high rounded-xl shadow-sm hover:shadow-md transition-shadow overflow-hidden group flex flex-col cursor-pointer w-80 flex-shrink-0 border border-outline/10",onClick:()=>t(i),children:[u.jsxs("div",{className:"w-full h-48 bg-surface-container-low flex items-center justify-center text-text-secondary relative",children:[_?u.jsx("img",{src:Ma(_),alt:C,className:"w-full h-full object-cover"}):u.jsx("span",{className:"text-sm",children:"No Image"}),u.jsxs("div",{className:`absolute top-3 right-3 px-3 py-1 rounded-full text-xs font-bold shadow-sm flex items-center gap-1 ${f}`,children:[p==="OVERDUE"&&u.jsx(dC,{size:12}),p]})]}),u.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[u.jsx("h3",{className:"font-bold text-base text-text-primary truncate",title:C,children:C}),u.jsx("p",{className:"text-sm text-text-secondary truncate mb-4",children:i.manufacturerName||"N/A"}),u.jsx("div",{className:"flex-grow"}),u.jsxs("div",{className:"mt-auto space-y-3",children:[u.jsxs("div",{className:"flex justify-between items-end text-xs",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-text-secondary block mb-0.5",children:"Checked Out"}),u.jsx("span",{className:"text-text-secondary font-medium block truncate",children:df(e.checkoutDate)})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("span",{className:"text-text-secondary block mb-0.5",children:"Due Date"}),u.jsx("span",{className:"font-bold text-text-primary block truncate",children:df(e.expectedReturnDate)})]})]}),u.jsxs("div",{className:"truncate text-xs",children:[u.jsx("span",{className:"text-text-secondary",children:"For: "}),s?u.jsx(ui,{to:`/projects/${s.id}`,className:"text-accent hover:underline font-medium",onClick:A=>A.stopPropagation(),children:s.projectName}):o?u.jsx(ui,{to:`/customers/${o.id}`,className:"text-accent hover:underline font-medium",onClick:A=>A.stopPropagation(),children:o.fullName}):l?u.jsx(ui,{to:`/installers/${l.id}`,className:"text-accent hover:underline font-medium",onClick:A=>A.stopPropagation(),children:l.installerName}):u.jsx("span",{className:"text-text-tertiary font-medium",children:"Unknown"})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-end pt-3",children:[u.jsx("button",{onClick:c,className:"text-xs font-medium text-primary hover:bg-primary-container/20 py-2 px-4 rounded-full transition-colors",children:"Extend"}),u.jsxs("button",{onClick:d,className:"text-xs font-bold bg-secondary hover:bg-secondary-hover text-on-secondary py-2 px-4 rounded-full shadow-sm flex items-center gap-1 transition-colors",children:[u.jsx(i9,{size:12})," Return"]})]})]})]})]})},nce=({title:e,checkouts:t,onItemClick:r})=>u.jsxs("div",{className:"mb-12",children:[u.jsxs("h2",{className:"text-2xl font-semibold mb-4 text-text-primary flex items-center gap-2",children:[e,t.length>0&&u.jsx("span",{className:"text-sm font-bold bg-primary-container text-on-primary-container px-3 py-1 rounded-full",children:t.length})]}),t.length>0?u.jsx("div",{className:"flex gap-6 overflow-x-auto pb-4 scrollbar-thin scrollbar-thumb-border scrollbar-track-transparent",children:t.map(n=>u.jsx(VBe,{checkout:n,onClick:r},n.id))}):u.jsx("div",{className:"p-8 text-center bg-surface/30 rounded-lg border border-dashed border-border",children:u.jsx("p",{className:"text-text-secondary italic",children:"No samples are currently checked out."})})]});function qBe(e){const t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)}const GBe=new Set(["id","createdAt","updatedAt","jobs","lineItems","userEmail","checkoutProjectId","checkoutProjectName","checkoutCustomerName","checkoutId","imageUrl","color","appointments","isOnHold"]);function KBe(e,t){if(!e||!t)return[];const r=[];("isOnHold"in e||"isOnHold"in t)&&e.isOnHold!==t.isOnHold&&r.push(t.isOnHold?"Job was placed On Hold":"Job was taken Off Hold"),("appointments"in e||"appointments"in t)&&JSON.stringify(e.appointments)!==JSON.stringify(t.appointments)&&r.push("Job schedule was updated.");const n=new Set([...Object.keys(e),...Object.keys(t)]);for(const i of n){if(GBe.has(i))continue;const a=e[i],s=t[i],o=a==null||a===""?null:a,l=s==null||s===""?null:s;if(o===l)continue;const c=qBe(i);o===null?r.push(`'${c}' was set to "${l}"`):l===null?r.push(`'${c}' was cleared (was "${o}")`):typeof o=="boolean"&&typeof l=="boolean"?r.push(`'${c}' changed from "${o?"Yes":"No"}" to "${l?"Yes":"No"}"`):r.push(`'${c}' changed from "${o}" to "${l}"`)}return JSON.stringify(e.lineItems)!==JSON.stringify(t.lineItems)&&r.push("'Line Items' were updated."),r}const _b=({history:e})=>{const t=n=>new Date(n).toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}),r=n=>{const i=n.targetEntity.toLowerCase().replace("_"," ");switch(n.actionType.toUpperCase()){case"CREATE":return`created the ${i}.`;case"UPDATE":return`updated the ${i}.`;case"DELETE":return`deleted the ${i}.`;default:return`${n.actionType.toLowerCase().replace("_"," ")} the ${i}.`}};return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex items-center gap-3 flex-shrink-0",children:[u.jsx(sm,{className:"drag-handle cursor-move text-text-secondary hover:text-text-primary transition-colors",size:20}),u.jsx(Jx,{className:"w-6 h-6 text-primary"}),u.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Change History"})]}),u.jsx("div",{className:"p-4 overflow-y-auto flex-grow bg-surface-container scrollbar-thin scrollbar-thumb-surface-container-highest",children:!e||e.length===0?u.jsx("div",{className:"text-center py-8 text-text-secondary",children:u.jsx("p",{children:"No history available for this item."})}):u.jsx("div",{className:"space-y-4",children:e.map(n=>{var a,s;const i=n.actionType.toUpperCase()==="UPDATE"&&((a=n.details)!=null&&a.before)&&((s=n.details)!=null&&s.after)?KBe(n.details.before,n.details.after):[];return u.jsxs("div",{className:"flex items-start p-3 bg-surface-container-high rounded-xl",children:[u.jsx("div",{className:"flex-shrink-0 mr-3 mt-1",children:u.jsx("span",{className:"flex items-center justify-center h-8 w-8 rounded-full bg-primary-container text-on-primary-container",children:u.jsx(pc,{size:16})})}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("p",{className:"text-sm font-semibold text-text-primary",children:n.userEmail||"Unknown User"}),u.jsx("p",{className:"text-sm text-text-secondary",children:r(n)}),i.length>0&&u.jsx("ul",{className:"mt-2 pl-5 list-disc space-y-1 text-sm text-text-secondary marker:text-primary/50",children:i.map((o,l)=>u.jsx("li",{children:o},l))}),u.jsxs("div",{className:"flex items-center mt-2 text-xs text-text-tertiary",children:[u.jsx(gd,{size:12,className:"mr-1.5"}),u.jsx("span",{children:t(n.createdAt)})]})]})]},n.id)})})})]})},Bm=e=>{if(!e)return"Sample";const t=[];return e.line&&t.push(e.line),e.style&&t.push(e.style),e.color&&t.push(e.color),t.length===0?`Sample #${e.id}`:t.join(" - ")},XBe={manufacturerId:null,supplierId:null,productType:"",style:"",line:"",sizes:[],finish:"",color:"",sampleFormat:"Loose",boardColors:"",sku:"",productUrl:"",unitCost:null,uom:"",cartonSize:null},YBe=({isOpen:e,onClose:t,sample:r})=>{var kt,ht,jr,er;const{currentUser:n,vendors:i,sampleCheckouts:a,projects:s,customers:o,installers:l,fetchSamples:c,updateSample:d,addVendor:f,updateSampleCheckout:p,deleteSample:m,extendSampleCheckout:x,toggleSampleDiscontinued:y,sampleHistory:b,fetchSampleHistory:S}=Xr(),[_,C]=I.useState(!1),[A,j]=I.useState(null),[P,O]=I.useState(null),[D,L]=I.useState(""),[B,H]=I.useState(!1),[z,ie]=I.useState(!1),[X,W]=I.useState(!1),Q=I.useRef(null),te=I.useRef(null),[J,Y]=I.useState("checkouts"),[pe,_e]=I.useState(null),[ee,de]=I.useState(!1),[G,q]=I.useState("general"),[ne,Se]=I.useState(!1);I.useEffect(()=>{(async()=>{try{_e(await Qx())}catch{console.error("Failed to load pricing settings.")}})()},[]);const{checkoutHistory:re,currentCheckout:ae}=I.useMemo(()=>{if(!r)return{checkoutHistory:[],currentCheckout:null};const ct=a.filter(Lt=>Lt.sampleId===r.id).map(Lt=>{let dr="Unknown",Gt="#";if(Lt.projectId){const qe=s.find(Xe=>Xe.id===Lt.projectId);dr=qe?qe.projectName:"Unknown Project",Gt=`/projects/${Lt.projectId}`}else if(Lt.customerId){const qe=o.find(Xe=>Xe.id===Lt.customerId);dr=qe?qe.fullName:"Unknown Customer",Gt=`/customers/${Lt.customerId}`}else if(Lt.installerId){const qe=l.find(Xe=>Xe.id===Lt.installerId);dr=qe?qe.installerName:"Unknown Installer",Gt=`/installers/${Lt.installerId}`}return{...Lt,entityName:dr,entityLink:Gt}}).sort((Lt,dr)=>new Date(dr.checkoutDate).getTime()-new Date(Lt.checkoutDate).getTime()),qt=ct.find(Lt=>!Lt.actualReturnDate)||null;return{checkoutHistory:ct,currentCheckout:qt}},[r,a,s,o,l]),ge=I.useMemo(()=>{if(!r)return XBe;const ct=(r.sizes||[]).map(qt=>{if(typeof qt=="string")return{value:qt,unitCost:null,cartonSize:null,uom:null};const Lt=qt;return{value:Lt.value||Lt.size||"",unitCost:Lt.unitCost,cartonSize:Lt.cartonSize,uom:Lt.uom}});return{manufacturerId:r.manufacturerId||null,supplierId:r.supplierId||null,productType:r.productType||"",style:r.style||"",line:r.line||"",sizes:ct,finish:r.finish||"",color:r.color||"",sampleFormat:r.sampleFormat||"Loose",boardColors:r.boardColors||"",sku:r.sku||"",productUrl:r.productUrl||"",unitCost:r.unitCost||null,uom:r.uom||"",cartonSize:r.cartonSize||null}},[r]);I.useEffect(()=>{e&&r&&(O(r.imageUrl?r.imageUrl:null),j(null),L(""),C(!1),Y("checkouts"),S(r.id))},[r,e,S]);const Ee=ct=>{var Lt;const qt=(Lt=ct.target.files)==null?void 0:Lt[0];if(qt){j(qt);const dr=URL.createObjectURL(qt);O(dr),L("")}},V=async()=>{if(!(!D||!r)){W(!0);try{const ct=await fetch("/api/photos/from-url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:D,entityType:"sample",entityId:r.id})});if(!ct.ok)throw new Error("Failed to import from URL");const qt=await ct.json();O(qt.url),Re.success("Image imported successfully!"),j(null),await c()}catch(ct){console.error(ct),Re.error("Could not import image from URL.")}finally{W(!1)}}},Ae=async ct=>{if(r){H(!0);try{if(await d(r.id,ct),A){const qt=new FormData;if(qt.append("photo",A),qt.append("entityType","sample"),qt.append("entityId",String(r.id)),!(await fetch("/api/photos",{method:"POST",body:qt})).ok)throw new Error("Photo upload failed during edit.")}Re.success(`Sample '${Bm(r)}' updated successfully!`),C(!1)}catch(qt){console.error("Error updating sample:",qt),Re.error("Failed to update sample.")}finally{H(!1)}}},Pe=async()=>{if(!r||!ae){Re.error("Could not find active checkout record to return.");return}try{await p(ae),Re.success(`'${Bm(r)}' has been returned.`),t()}catch(ct){console.error("Failed to return sample:",ct),Re.error("An error occurred while returning the sample.")}},ze=async()=>{if(!r||!ae){Re.error("Could not find active checkout record to extend.");return}try{await x(ae)}catch{Re.error("An error occurred while extending the checkout.")}},De=async()=>{if(r&&window.confirm(`Are you sure you want to permanently delete "${Bm(r)}"? This cannot be undone.`)){ie(!0);try{await m(r.id),Re.success(`Sample "${Bm(r)}" deleted.`),t()}catch(ct){console.error(ct),Re.error(ct.message||"Failed to delete sample.")}finally{ie(!1)}}},$e=()=>{const ct=window.open("","_blank");ct&&te.current&&(ct.document.write("<html><head><title>Print QR Code</title>"),ct.document.write("<style>body { text-align: center; font-family: sans-serif; } img { width: 250px; height: 250px; } </style>"),ct.document.write("</head><body>"),ct.document.write(te.current.innerHTML),ct.document.write("</body></html>"),ct.document.close(),ct.print())},et=()=>{if(!r||!r.unitCost||!pe)return null;const ct=r.supplierId||r.manufacturerId,qt=i.find(qe=>qe.id===ct),Lt=kh(qt,pe,"Customer"),dr=Ch(Number(r.unitCost),Lt.percentage,Lt.method),Gt=r.cartonSize?dr*Number(r.cartonSize):null;return{retailPrice:dr,cartonPrice:Gt,rules:Lt}},ut=async()=>{if(!r)return;const ct=r.isDiscontinued?"restore":"discontinue";if(confirm(`Are you sure you want to ${ct} "${Bm(r)}"?`)){Se(!0);try{await y(r.id,!r.isDiscontinued),t()}catch{}finally{Se(!1)}}};return!e||!r?null:u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-surface-container-high p-6 md:p-10 rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-y-auto border border-outline/10",onClick:ct=>ct.stopPropagation(),children:[u.jsxs("div",{className:"flex justify-between items-start mb-6",children:[u.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:_?"Editing Sample":Bm(r)}),u.jsxs("button",{onClick:_?()=>C(!1):t,className:"p-2 rounded-full hover:bg-surface-container-highest text-text-primary transition-colors",children:[" ",u.jsx(tn,{className:"w-6 h-6"})," "]})]}),_?u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[u.jsxs("div",{className:"lg:col-span-3 space-y-4",children:[u.jsx("div",{className:"w-full aspect-square border-2 border-dashed border-outline/20 rounded-xl bg-surface-container-low flex items-center justify-center",children:P?u.jsx("img",{src:P,alt:"Sample Preview",className:"w-full h-full object-cover rounded"}):u.jsx("span",{className:"text-sm text-text-secondary",children:"No Image"})}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("input",{type:"file",accept:"image/*",ref:Q,onChange:Ee,className:"hidden"}),u.jsx("button",{type:"button",onClick:()=>{var ct;return(ct=Q.current)==null?void 0:ct.click()},className:"w-full py-2 px-4 bg-secondary hover:bg-secondary-hover rounded-full text-on-secondary font-semibold",children:"Upload File..."}),u.jsx("div",{className:"text-center text-xs text-text-secondary",children:"OR"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"url",placeholder:"Paste image URL...",value:D,onChange:ct=>L(ct.target.value),className:"w-full p-2 bg-surface-container-highest border-transparent rounded-lg text-sm text-text-primary focus:ring-2 focus:ring-primary"}),u.jsx("button",{type:"button",onClick:V,disabled:!D||X,className:"p-2 bg-primary hover:bg-primary-hover rounded-full text-on-primary disabled:opacity-50",children:X?"...":u.jsx(fC,{size:16})})]})]})]}),u.jsxs("div",{className:"lg:col-span-9",children:[u.jsx(tce,{initialData:ge,onSave:Ae,onCancel:()=>C(!1),isSaving:B||X,saveButtonText:"Save Changes"}),((kt=n==null?void 0:n.roles)==null?void 0:kt.includes("Admin"))&&u.jsx("div",{className:"mt-6 pt-6 border-t border-outline/10 flex justify-end",children:u.jsxs("button",{type:"button",onClick:De,className:"py-2 px-6 bg-error-container hover:bg-error/20 text-error rounded-full font-semibold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:z,children:[u.jsx(wo,{size:16}),z?"Deleting...":"Delete Sample"]})})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[u.jsx("div",{className:"lg:col-span-3 space-y-4",children:u.jsx("div",{className:"w-full aspect-square border-2 border-dashed border-outline/10 rounded-xl bg-surface-container-low flex items-center justify-center overflow-hidden",children:P?u.jsx("img",{src:P,alt:"Sample Preview",className:"w-full h-full object-cover"}):u.jsx("span",{className:"text-sm text-text-secondary",children:"No Image"})})}),u.jsx("div",{className:"lg:col-span-6 space-y-4",children:u.jsxs("div",{className:"space-y-3 text-text-secondary",children:[u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Manufacturer:"})," ",r.manufacturerName||"N/A"]}),r.supplierId!==r.manufacturerId&&r.supplierName&&u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Supplier:"})," ",r.supplierName]}),u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Product Type:"})," ",r.productType]}),u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Style:"})," ",r.style]}),r.color&&u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Color:"})," ",r.color]}),r.line&&u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Line:"})," ",r.line]}),r.sizes&&r.sizes.length>0&&u.jsxs("div",{className:"mt-2",children:[u.jsx("p",{className:"font-bold text-text-primary mb-1",children:"Available Sizes:"}),u.jsx("ul",{className:"space-y-1 bg-surface-container-low p-3 rounded-xl border border-outline/10",children:r.sizes.map((ct,qt)=>{var qe;const Lt=typeof ct=="string",dr=Lt?ct:ct.value||ct.size||"Unknown Size";let Gt=null;if(!Lt&&ct.unitCost&&pe){const Xe=r.supplierId||r.manufacturerId,Te=i.find(we=>we.id===Xe),He=kh(Te,pe,"Customer"),je=Ch(Number(ct.unitCost),He.percentage,He.method);Gt=Qm(je)}else(qe=et())!=null&&qe.retailPrice&&(Gt=Qm(et().retailPrice));return u.jsxs("li",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"font-medium text-text-primary",children:dr}),Gt&&u.jsxs("span",{className:"text-success font-bold",children:[Gt," ",u.jsxs("span",{className:"text-xs text-text-secondary font-normal",children:["/ ",!Lt&&ct.uom?ct.uom:r.uom]})]})]},qt)})})]}),r.finish&&u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Finish:"})," ",r.finish]}),r.productType==="Tile"&&r.sampleFormat&&u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Format:"})," ",r.sampleFormat," Sample"]}),r.productType==="Tile"&&r.sampleFormat==="Board"&&r.boardColors&&u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Board Colors:"})," ",r.boardColors]}),(r.unitCost||r.cartonSize)&&u.jsxs("div",{className:"mt-2 p-4 bg-surface-container-low rounded-xl border border-outline/10",children:[u.jsx("h5",{className:"text-sm font-semibold text-text-primary border-b border-outline/10 pb-2 mb-2",children:"Pricing & Packaging"}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-sm",children:[r.unitCost!==null&&r.unitCost!==void 0&&u.jsxs("p",{className:"text-text-secondary",children:[u.jsx("strong",{className:"text-text-primary",children:"Cost:"})," ",Qm(r.unitCost)," / ",r.uom]}),pe&&((ht=et())==null?void 0:ht.retailPrice)&&u.jsxs("p",{className:"text-success font-bold",children:["Retail: ",Qm(et().retailPrice)," / ",r.uom]}),r.cartonSize!==null&&r.cartonSize!==void 0&&u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Carton:"})," ",r.cartonSize," ",r.uom]}),pe&&((jr=et())==null?void 0:jr.cartonPrice)&&u.jsxs("p",{className:"col-span-2 mt-2 pt-2 border-t border-outline/10 text-success font-medium",children:["Retail per Carton: ",Qm(et().cartonPrice)]})]})]}),u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"SKU:"})," ",r.sku||"N/A"]}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx("strong",{className:"text-text-primary",children:"Product Link:"})," ",r.productUrl?u.jsxs("a",{href:r.productUrl,target:"_blank",rel:"noopener noreferrer",className:"text-accent hover:underline flex items-center",children:["Visit Site ",u.jsx(Zx,{size:14,className:"ml-1"})]}):"N/A"]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-outline/10",children:[u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx("strong",{className:"text-text-primary",children:"Status:"})," ",u.jsx("span",{className:`font-bold px-3 py-1 rounded-full text-xs ${r.isAvailable?"bg-success-container text-success":"bg-warning-container text-warning"}`,children:r.isAvailable?"Available":"Checked Out"})]}),r.isDiscontinued&&u.jsxs("p",{className:"mt-2 flex items-center gap-2",children:[u.jsx("strong",{className:"text-text-primary",children:"Archived Status:"})," ",u.jsx("span",{className:"font-bold px-3 py-1 rounded-full text-xs bg-error-container text-error",children:"Discontinued"})]})]})]})}),u.jsx("div",{className:"lg:col-span-3 space-y-4",children:u.jsxs("div",{className:"bg-surface-container-low p-6 rounded-xl text-center border border-outline/10",children:[u.jsxs("h4",{className:"font-semibold text-text-primary mb-2 flex items-center justify-center gap-2",children:[u.jsx(mT,{})," Sample QR Code"]}),u.jsxs("div",{ref:te,children:[u.jsx("img",{src:`/api/samples/${r.id}/qr`,alt:"Sample QR Code",className:"w-48 h-48 mx-auto bg-white p-2 rounded-md"}),u.jsxs("p",{className:"text-xs text-text-secondary mt-2 font-mono",children:["ID: ",r.id]}),u.jsx("p",{className:"text-sm font-semibold mt-1 text-text-primary",children:Bm(r)})]}),u.jsxs("button",{type:"button",onClick:$e,className:"mt-4 w-full flex items-center justify-center gap-2 py-2 px-6 bg-secondary hover:bg-secondary-hover rounded-full text-on-secondary font-semibold",children:[u.jsx(wy,{size:16}),"Print"]})]})})]}),u.jsxs("div",{className:"mt-8 border-t border-outline/10 pt-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("div",{className:"flex items-center",children:u.jsx("h3",{className:"text-xl font-semibold text-text-primary flex items-center",children:J==="checkouts"?u.jsxs(u.Fragment,{children:[u.jsx(Cu,{className:"w-6 h-6 mr-2 text-accent"})," Checkout History"]}):u.jsxs(u.Fragment,{children:[u.jsx(Jx,{className:"w-6 h-6 mr-2 text-accent"})," Change History"]})})}),u.jsx("button",{type:"button",onClick:()=>Y(ct=>ct==="checkouts"?"changes":"checkouts"),className:"text-sm text-accent hover:underline",children:J==="checkouts"?"Show Change History":"Show Checkout History"})]}),u.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto pr-2",children:J==="checkouts"?re.length>0?re.map(ct=>u.jsxs("li",{className:"bg-surface-container-low p-3 rounded-xl flex justify-between items-center list-none border border-outline/5",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-semibold text-text-primary",children:["Checked out to ",u.jsx(ui,{to:ct.entityLink,className:"text-accent hover:underline",children:ct.entityName})]}),u.jsxs("p",{className:"text-xs text-text-secondary",children:[new Date(ct.checkoutDate).toLocaleDateString()," ",u.jsx(sFe,{className:"inline w-4 h-4 mx-1"})," ",ct.actualReturnDate?new Date(ct.actualReturnDate).toLocaleDateString():"Present"]})]}),u.jsx("span",{className:`px-3 py-1 text-xs rounded-full font-bold ${ct.actualReturnDate?"bg-surface-container text-text-secondary":"bg-warning-container text-warning"}`,children:ct.actualReturnDate?"Returned":"Active"})]},ct.id)):u.jsx("p",{className:"text-text-secondary text-center py-4",children:"No checkout history for this sample."}):u.jsx(_b,{history:b})})]}),u.jsxs("div",{className:"flex justify-end gap-4 mt-8 border-t border-outline/10 pt-6",children:[((er=n==null?void 0:n.roles)==null?void 0:er.includes("Admin"))&&!_&&u.jsx("div",{className:"mr-auto",children:u.jsxs("button",{type:"button",onClick:ut,disabled:ne||!r.isAvailable&&!r.isDiscontinued,className:`flex items-center py-2 px-6 rounded-full font-semibold transition-colors ${r.isDiscontinued?"bg-success-container text-success hover:bg-success/20":"bg-warning-container text-warning hover:bg-warning/20"}`,children:[u.jsx(CS,{className:"w-4 h-4 mr-2"})," ",r.isDiscontinued?"Restore Sample":"Discontinue Sample"]})}),!_&&u.jsxs("div",{className:"flex items-center gap-4",children:[!r.isAvailable&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{type:"button",onClick:ze,className:"flex items-center py-2 px-6 bg-primary-container hover:bg-primary text-primary hover:text-on-primary font-medium rounded-full transition-colors",children:[u.jsx(gd,{className:"w-4 h-4 mr-2"})," Extend"]}),u.jsxs("button",{type:"button",onClick:Pe,className:"flex items-center py-2 px-6 bg-secondary hover:bg-secondary-hover text-on-secondary font-medium rounded-full shadow-sm transition-colors",children:[u.jsx(i9,{className:"w-4 h-4 mr-2"})," Return Sample"]})]}),u.jsx("button",{type:"button",onClick:t,className:"py-2 px-6 bg-surface hover:bg-surface-container-highest border border-outline/20 text-text-secondary rounded-full font-medium transition-colors",children:"Close"}),u.jsxs("button",{type:"button",onClick:()=>C(!0),className:"flex items-center py-2 px-6 bg-primary hover:bg-primary-hover rounded-full text-on-primary font-semibold shadow-md transition-all",children:[u.jsx(ip,{className:"w-4 h-4 mr-2"})," Edit Sample"]})]})]})]})]})}),u.jsx(kb,{isOpen:ee,onClose:()=>de(!1),onSave:f,initialVendorType:G})]})},QBe=()=>{const{data:e=[]}=np(),{data:t=[]}=lC(),{data:r=[]}=U4(),{samples:n}=Xr(),[i,a]=I.useState("Recap"),[s,o]=I.useState(!0),[l,c]=I.useState(!1),[d,f]=I.useState(null),p=(C,A)=>{const j=C.createdAt?new Date(C.createdAt).getTime():0,P=A.createdAt?new Date(A.createdAt).getTime():0;return(isNaN(P)?0:P)-(isNaN(j)?0:j)},m=I.useMemo(()=>t.filter(C=>!C.actualReturnDate).sort((C,A)=>new Date(C.expectedReturnDate).getTime()-new Date(A.expectedReturnDate).getTime()),[t]),x=I.useMemo(()=>{const C=new Date;C.setHours(0,0,0,0);const A=new Date(C);return A.setDate(C.getDate()+5),r.filter(j=>{if(j.status!=="Ordered"&&j.status!=="Damage Replacement"||!j.etaDate)return!1;const P=j.etaDate.includes("T")?j.etaDate.split("T")[0]:j.etaDate;return new Date(`${P}T00:00:00`)<=A}).sort((j,P)=>{const O=j.etaDate&&j.etaDate.includes("T")?j.etaDate.split("T")[0]:j.etaDate,D=P.etaDate&&P.etaDate.includes("T")?P.etaDate.split("T")[0]:P.etaDate;return new Date(O).getTime()-new Date(D).getTime()})},[r]),y=I.useMemo(()=>{const C={[sr.QUOTING]:1,[sr.ACCEPTED]:2,[sr.SCHEDULED]:3};return e.filter(A=>A.status===sr.QUOTING||A.status===sr.ACCEPTED||A.status===sr.SCHEDULED).sort((A,j)=>{const P=C[A.status],O=C[j.status];return P!==O?P-O:p(A,j)})},[e]),b=I.useMemo(()=>{if(i===sr.CANCELLED)return e.filter(A=>A.status===sr.CANCELLED).sort(p);if(i===sr.COMPLETED)return e.filter(A=>A.status===sr.COMPLETED).sort(p);const C=e.filter(A=>![sr.COMPLETED,sr.CLOSED,sr.CANCELLED].includes(A.status)).sort(p);return i==="All"?C:C.filter(A=>A.status===i)},[e,i]),S=["Recap","All",sr.NEW,sr.SAMPLE_CHECKOUT,sr.AWAITING_DECISION,sr.QUOTING,sr.ACCEPTED,sr.SCHEDULED,sr.COMPLETED,sr.CANCELLED],_=C=>{const A=n.find(j=>{var P;return j.id===parseInt(C.id)||j.sku===((P=C.variants[0])==null?void 0:P.sku)});A&&f(A)};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 px-1",children:[u.jsx("h1",{className:"text-4xl font-bold text-text-primary tracking-tight",children:"Dashboard"}),u.jsxs("button",{onClick:()=>c(!0),className:"bg-primary hover:bg-primary-hover text-on-primary font-semibold py-3 px-6 rounded-full transition-all shadow-lg hover:shadow-xl flex items-center gap-2",children:[u.jsx(AFe,{size:20}),"New Checkout"]})]}),u.jsxs("div",{className:"flex items-center space-x-2 overflow-x-auto pb-2 px-1 no-scrollbar after:content-[''] after:min-w-[1rem]",children:[u.jsx("button",{onClick:()=>o(!s),className:"flex items-center space-x-2 p-2 rounded-full hover:bg-surface-container-high transition-colors cursor-pointer mr-2 text-text-secondary",children:u.jsx(b8,{className:"w-5 h-5 flex-shrink-0"})}),s&&u.jsx("div",{className:"flex space-x-2",children:S.map(C=>u.jsx("button",{onClick:()=>a(C),className:`px-4 py-2 text-sm rounded-full transition-colors flex-shrink-0 font-medium border ${i===C?"bg-primary-container text-on-primary-container border-transparent":"bg-surface text-text-secondary border-outline hover:bg-surface-container-high"}`,children:C},C))})]}),u.jsx("div",{children:i==="Recap"?u.jsxs("div",{children:[u.jsx(nce,{title:"Active Sample Checkouts",checkouts:m,onItemClick:_}),u.jsx(HBe,{title:"Upcoming Deliveries (Next 5 Days)",orders:x,projects:e}),u.jsx(AT,{title:"Active Pipeline",projects:y})]}):u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-semibold mb-4 text-text-primary",children:["Projects: ",i]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.length>0?b.map(C=>u.jsx(ui,{to:`/projects/${C.id}`,children:u.jsx(AT,{title:"",projects:[C]})},C.id)):u.jsxs("p",{className:"text-text-secondary col-span-full text-center py-8",children:['No projects match the filter "',i,'".']})})]})}),u.jsx(MBe,{isOpen:l,onClose:()=>c(!1)}),u.jsx(YBe,{isOpen:!!d,onClose:()=>f(null),sample:d})]})},JBe=({currentBuild:e,requiredBuild:t,downloadUrl:r})=>u.jsx(od,{children:u.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-scrim/80 backdrop-blur-sm",children:u.jsxs("div",{className:"bg-surface-container-high w-full max-w-md rounded-2xl p-8 shadow-2xl border border-error-container text-center animate-in zoom-in-95 duration-200",children:[u.jsx("div",{className:"mx-auto w-16 h-16 bg-error-container rounded-full flex items-center justify-center mb-6",children:u.jsx(xd,{className:"w-8 h-8 text-on-error-container"})}),u.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"Update Required"}),u.jsx("p",{className:"text-text-secondary mb-6 leading-relaxed",children:"This version of the app is outdated and no longer supported by the server. Please download the latest version to continue."}),u.jsxs("div",{className:"bg-surface-container rounded-xl p-4 mb-8 text-sm text-text-secondary border border-outline/20",children:[u.jsxs("div",{className:"flex justify-between mb-1",children:[u.jsx("span",{children:"Your Build:"}),u.jsx("span",{className:"font-mono text-error",children:e})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Required:"}),u.jsxs("span",{className:"font-mono text-tertiary",children:[t,"+"]})]})]}),u.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full py-3 bg-primary hover:bg-primary-hover text-on-primary rounded-full font-semibold transition-transform active:scale-95 shadow-md",children:[u.jsx(_S,{size:20}),"Download Update"]})]})})}),ZBe="Flooring Job Tracker",eUe="A web-based job management application for a flooring store to track a customer's journey from initial sample checkout through quoting, scheduling, and final job closure.",tUe=[],rUe="2.00",nUe=2,iUe=2,aUe="https://github.com/adampdxdotcom/subfloor/releases/download/Android/subfloor-2.00.apk",sUe="https://subfloor.app/update",oUe=!1,lK={name:ZBe,description:eUe,requestFramePermissions:tUe,version:rUe,mobileBuild:nUe,minMobileBuild:iUe,apkDownloadUrl:aUe,releaseNotesUrl:sUe,critical:oUe},lUe=()=>{const[e,t]=I.useState(null);return I.useEffect(()=>{const r=async()=>{var i;try{const a=await fetch(rr("/api/system/info"));if(!a.ok)return;const s=await a.json();if((i=window.Capacitor)==null?void 0:i.isNativePlatform()){const l=await hT.getInfo(),c=parseInt(l.build||"0",10),d=parseInt(s.minMobileBuild||"0",10);if(c<d){console.warn(` Force Update Triggered: Build ${c} < ${d}`),t({current:c,required:d,url:s.apkDownloadUrl||"https://github.com"});return}}s.version&&s.version!==lK.version&&Kr(l=>u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsxs("span",{className:"font-semibold",children:["New update available!",u.jsxs("span",{className:"block text-xs font-normal opacity-75",children:["v",lK.version,"  v",s.version]})]}),u.jsx("button",{onClick:()=>window.location.reload(),className:"bg-primary text-white px-3 py-1.5 rounded text-sm hover:bg-primary-hover transition-colors",children:"Refresh to Update"})]}),{id:"version-update-toast",duration:1/0,position:"bottom-right",icon:"",style:{border:"1px solid #3b82f6",padding:"16px"}})}catch(a){console.warn("Failed to check version:",a)}};r();const n=setInterval(r,15*60*1e3);return()=>clearInterval(n)},[]),e?u.jsx(JBe,{currentBuild:e.current,requiredBuild:e.required,downloadUrl:e.url}):null},cUe=(e,t)=>{if(!e)return"Not Scheduled";const r=new Date(e);if(!t||r.toDateString()===new Date(t).toDateString())return r.toLocaleDateString("en-US",{month:"short",day:"numeric"});const n=new Date(t),i=r.toLocaleString("default",{month:"short"}),a=r.getDate(),s=n.getDate();return`${i} ${a} - ${s}`},uUe=()=>{const{data:e=[]}=Xx(),{data:t=[]}=np(),{data:r=[]}=lC(),[n,i]=I.useState(""),[a,s]=I.useState(!1),o=I.useMemo(()=>{const d=new Set;return r.forEach(f=>{f.actualReturnDate===null&&d.add(f.projectId)}),t.filter(f=>d.has(f.id)).sort((f,p)=>{const m=Math.min(...r.filter(y=>y.projectId===f.id&&!y.actualReturnDate).map(y=>new Date(y.expectedReturnDate).getTime())),x=Math.min(...r.filter(y=>y.projectId===p.id&&!y.actualReturnDate).map(y=>new Date(p.expectedReturnDate).getTime()));return m-x})},[t,r]),l=I.useMemo(()=>{const d={[sr.QUOTING]:1,[sr.ACCEPTED]:2,[sr.SCHEDULED]:3};return t.filter(f=>f.status===sr.QUOTING||f.status===sr.ACCEPTED||f.status===sr.SCHEDULED).sort((f,p)=>{const m=d[f.status],x=d[p.status];if(m!==x)return m-x;const y=f.createdAt?new Date(f.createdAt).getTime():0,b=p.createdAt?new Date(p.createdAt).getTime():0;return(isNaN(b)?0:b)-(isNaN(y)?0:y)})},[t]),c=I.useMemo(()=>{if(!e)return[];const d=n.toLowerCase();return e.filter(f=>{var x,y;const p=(((x=f.fullName)==null?void 0:x.toLowerCase())??"").includes(d),m=(((y=f.email)==null?void 0:y.toLowerCase())??"").includes(d);return p||m}).sort((f,p)=>f.fullName.localeCompare(p.fullName))},[e,n]);return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 px-1",children:[u.jsx("h1",{className:"text-4xl font-bold text-text-primary tracking-tight",children:"Customers"}),u.jsxs("button",{onClick:()=>s(!0),className:"flex items-center justify-center bg-primary hover:bg-primary-hover text-on-primary font-semibold py-3 px-6 rounded-full transition-all shadow-lg hover:shadow-xl md:w-auto w-full",children:[u.jsx(hu,{className:"w-5 h-5 mr-2"}),"Add Customer"]})]}),u.jsxs("div",{className:"relative w-full max-w-2xl",children:[u.jsx(Yo,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-secondary",size:20}),u.jsx("input",{type:"text",placeholder:"Search customers...",value:n,onChange:d=>i(d.target.value),className:"w-full pl-12 pr-6 py-4 bg-surface-container-high border-none rounded-full text-text-primary focus:ring-2 focus:ring-primary/50 outline-none transition-shadow shadow-sm hover:shadow-md placeholder:text-text-tertiary"})]}),n===""&&u.jsxs(u.Fragment,{children:[u.jsx(AT,{title:"Projects with Samples Out",projects:o}),u.jsx(AT,{title:"Projects in Active Pipeline",projects:l}),u.jsx("div",{className:"border-t border-outline/10 my-8"}),u.jsx("h2",{className:"text-2xl font-semibold mb-6 text-text-primary pl-1",children:"All Customers"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[c.map(d=>u.jsxs(ui,{to:`/customers/${d.id}`,className:"block bg-surface-container-high p-6 rounded-xl shadow-sm border border-outline/10 hover:shadow-md hover:-translate-y-1 transition-all duration-300 group",children:[u.jsxs("div",{className:"flex items-center mb-4",children:[u.jsx("div",{className:"w-12 h-12 bg-primary-container rounded-full flex items-center justify-center mr-4 shrink-0 text-primary",children:u.jsx(pc,{className:"w-6 h-6"})}),u.jsx("div",{children:u.jsx("h2",{className:"text-xl font-bold text-text-primary truncate",children:d.fullName})})]}),u.jsxs("div",{className:"space-y-2 text-sm text-text-secondary",children:[u.jsxs("p",{className:"flex items-center",children:[u.jsx(tu,{className:"w-4 h-4 mr-3 shrink-0 opacity-70"})," ",u.jsx("span",{className:"truncate",children:d.email||"N/A"})]}),u.jsxs("p",{className:"flex items-center",children:[u.jsx(I0,{className:"w-4 h-4 mr-3 shrink-0 opacity-70"})," ",u.jsx("span",{className:"truncate",children:d.phoneNumber||"N/A"})]}),u.jsxs("p",{className:"flex items-center",children:[u.jsx(G4,{className:"w-4 h-4 mr-3 shrink-0 opacity-70"})," ",u.jsx("span",{className:"truncate",children:d.address||"N/A"})]})]}),d.jobs&&d.jobs.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"border-t border-outline/10 my-4"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h3",{className:"text-sm font-semibold text-text-secondary flex items-center mb-2",children:[u.jsx(zh,{className:"w-4 h-4 mr-2"}),"Scheduled Jobs"]}),d.jobs.map(f=>u.jsxs("div",{className:"text-xs text-text-secondary grid grid-cols-3 gap-2 items-center",children:[u.jsx("span",{className:"col-span-1 truncate font-medium text-text-primary",children:f.projectName}),u.jsxs("span",{className:"col-span-1 truncate text-center",children:["(",f.installerName||"N/A",")"]}),u.jsx("span",{className:"col-span-1 truncate text-right",children:cUe(f.scheduledStartDate,f.scheduledEndDate)})]},f.projectId))]})]})]},d.id)),n!==""&&c.length===0&&u.jsx("p",{className:"text-text-secondary col-span-full text-center py-8",children:"No customers match your search."})]}),u.jsx(s9,{isOpen:a,onClose:()=>s(!1),customer:null})]})},S9=({title:e,icon:t,actions:r,children:n,defaultOpen:i=!0})=>{const[a,s]=I.useState(i);return u.jsxs("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10",children:[u.jsxs("div",{className:"flex justify-between items-center p-4 cursor-pointer hover:bg-surface-container-highest/50 transition-colors",onClick:()=>s(!a),children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{className:"text-primary mr-4",children:t}),u.jsx("h2",{className:"text-lg font-bold text-text-primary",children:e})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{onClick:o=>o.stopPropagation(),children:r}),u.jsx(gs,{className:`w-6 h-6 text-text-secondary transition-transform duration-300 ${a?"rotate-180":""}`})]})]}),u.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${a?"max-h-[2000px]":"max-h-0"}`,children:u.jsx("div",{className:"px-4 pb-4 pt-2 border-t border-outline/10",children:n})})]})},ice=({sample:e,onStartProject:t})=>{const r=e,n=r.interestVariantThumbnail||r.productThumbnail,i=r.interestVariantName?`${r.interestVariantName} (${r.productName})`:r.productName||`Sample #${e.id}`;return u.jsxs("div",{className:"bg-surface-container-high p-4 rounded-xl shadow-sm border border-outline/10 flex gap-4 transition-all hover:shadow-md relative group",children:[u.jsxs("div",{className:"w-20 h-20 bg-surface-container-low rounded-lg border border-outline/10 flex items-center justify-center shrink-0 overflow-hidden relative",children:[n?u.jsx("img",{src:Ma(n),alt:i,className:"w-full h-full object-cover"}):u.jsx(Ed,{className:"text-text-tertiary w-8 h-8"}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-[10px] text-center py-0.5 truncate",children:e.sampleType||"Sample"})]}),u.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-between py-0.5",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-text-primary text-sm line-clamp-2",title:i,children:i}),u.jsxs("div",{className:"flex items-center gap-1 mt-1.5 text-xs text-text-secondary",children:[u.jsx(Cu,{size:12}),u.jsx("span",{children:df(e.checkoutDate)})]})]}),u.jsx("div",{className:"mt-2",children:e.projectId?u.jsxs("div",{className:"flex items-center gap-1 text-xs text-success font-bold bg-success-container px-3 py-1 rounded-full w-fit",children:[u.jsx(Hh,{size:12}),u.jsx("span",{children:"Linked to Project"})]}):u.jsxs("button",{onClick:a=>{a.preventDefault(),t(e)},className:"text-xs font-bold text-on-primary bg-primary hover:bg-primary-hover px-4 py-2 rounded-full flex items-center gap-1 transition-colors shadow-sm",children:["Start Project ",u.jsx(am,{size:12})]})})]})]})},ace=({isOpen:e,onClose:t,initialCustomer:r,initialInstaller:n,initialProjectName:i,transferSampleId:a})=>{const s=wu(),{data:o=[]}=Cf(),{createProject:l}=ooe(),{createInstaller:c}=X7(),{createCustomer:d}=soe(),[f,p]=I.useState("SELECT_CUSTOMER"),[m,x]=I.useState(null),[y,b]=I.useState(""),[S,_]=I.useState(Dv[0]),[C,A]=I.useState(null),[j,P]=I.useState(""),[O,D]=I.useState(!1),[L,B]=I.useState({installerName:"",contactEmail:"",contactPhone:""}),[H,z]=I.useState(""),[ie,X]=I.useState(""),[W,Q]=I.useState("");I.useEffect(()=>{e&&(r?(x(r),p("CREATE_PROJECT")):(x(null),p("SELECT_CUSTOMER")),A(n||null),P((n==null?void 0:n.installerName)||""),b(i||""),_(Dv[0]),z(""),X(""),Q(""))},[e,r,n,i]);const te=ee=>{x(ee),p("CREATE_PROJECT")},J=ee=>{z(ee),p("CREATE_CUSTOMER")},Y=async ee=>{ee.preventDefault();try{const de=await d.mutateAsync({fullName:H,email:ie||void 0,phoneNumber:W||void 0});x(de),p("CREATE_PROJECT"),Re.success("Customer created!")}catch{Re.error("Failed to create customer.")}},pe=async ee=>{if(ee.preventDefault(),!!m){if(!y){Re.error("Project name is required.");return}try{const de={projectName:y,projectType:S,customerId:m.id,status:"New",finalChoice:null,installerId:C?C.id:void 0},G=await l.mutateAsync(de);a&&await boe([a],G.id),Re.success("Project created successfully!"),t(),s(`/projects/${G.id}`)}catch(de){console.error(de),Re.error("Failed to create project.")}}},_e=async ee=>{ee.preventDefault();try{const de=await c.mutateAsync(L);A(de),P(de.installerName),D(!1)}catch{Re.error("Failed to add installer.")}};return e?u.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-2xl shadow-2xl w-full max-w-xl border border-outline/20 relative",children:[u.jsxs("div",{className:"flex items-center mb-6",children:[f!=="SELECT_CUSTOMER"&&u.jsx("button",{onClick:()=>p("SELECT_CUSTOMER"),className:"text-text-secondary hover:text-text-primary p-2 rounded-full hover:bg-surface-container-highest mr-2",children:u.jsx(hd,{size:20})}),u.jsx("h2",{className:"text-2xl font-bold text-text-primary flex-grow",children:f==="CREATE_CUSTOMER"?"New Customer":"Start New Project"}),u.jsx("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-2 rounded-full hover:bg-surface-container-highest",children:u.jsx(tn,{size:20})})]}),f==="SELECT_CUSTOMER"&&u.jsxs("div",{children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1.5",children:"Select Customer"}),u.jsx(qoe,{onCustomerSelect:te,onRequestNewCustomer:J})]}),u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{onClick:t,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors",children:"Cancel"})})]}),f==="CREATE_CUSTOMER"&&u.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[u.jsx("input",{type:"text",placeholder:"Full Name",value:H,onChange:ee=>z(ee.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",required:!0}),u.jsx("input",{type:"email",placeholder:"Email (Optional)",value:ie,onChange:ee=>X(ee.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"}),u.jsx("input",{type:"tel",placeholder:"Phone (Optional)",value:W,onChange:ee=>Q(ee.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"}),u.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[u.jsx("button",{type:"button",onClick:()=>p("SELECT_CUSTOMER"),className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors",children:"Back"}),u.jsx("button",{type:"submit",className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all",children:"Save & Continue"})]})]}),f==="CREATE_PROJECT"&&m&&u.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[!r&&u.jsxs("div",{className:"flex justify-between items-center bg-surface-container p-3 rounded-lg border border-outline/20 text-sm",children:[u.jsx("span",{className:"text-text-primary font-bold",children:m.fullName}),u.jsx("button",{type:"button",onClick:()=>{x(null),p("SELECT_CUSTOMER")},className:"text-primary hover:underline font-medium",children:"Change"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Project Name"}),u.jsx("input",{type:"text",value:y,onChange:ee=>b(ee.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Project Type"}),u.jsx("select",{value:S,onChange:ee=>_(ee.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",children:Dv.map(ee=>u.jsx("option",{value:ee,children:ee},ee))})]}),O?u.jsxs("div",{className:"bg-surface-container p-4 rounded-lg border border-outline/20",children:[u.jsx("h4",{className:"font-semibold text-md mb-3 text-text-primary",children:"New Installer"}),u.jsx("input",{type:"text",placeholder:"Name",value:L.installerName,onChange:ee=>B({...L,installerName:ee.target.value}),className:"w-full bg-surface-container-low border border-outline/50 rounded-lg px-3 py-2 mb-2 text-sm text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"button",onClick:()=>D(!1),className:"flex-1 py-1.5 px-4 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest text-xs font-medium",children:"Cancel"}),u.jsx("button",{type:"button",onClick:_e,className:"flex-1 py-1.5 px-4 rounded-full bg-primary text-on-primary text-xs font-semibold",children:"Save"})]})]}):u.jsxs("div",{className:"relative",children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Installer (Optional)"}),u.jsx("input",{type:"text",placeholder:"Search installers...",value:j,onChange:ee=>{P(ee.target.value),A(null)},className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",disabled:!!n}),j&&!C&&!n&&u.jsxs("div",{className:"absolute z-10 w-full bg-surface-container-high border border-outline/20 rounded-lg mt-1 max-h-48 overflow-y-auto shadow-xl",children:[o.filter(ee=>ee.installerName.toLowerCase().includes(j.toLowerCase())).map(ee=>u.jsx("div",{onClick:()=>{A(ee),P(ee.installerName)},className:"px-4 py-2 hover:bg-primary-container/30 cursor-pointer text-text-primary",children:ee.installerName},ee.id)),u.jsxs("div",{className:"p-2 border-t border-outline/20 text-center text-primary text-sm cursor-pointer hover:bg-primary-container/30 font-medium",onClick:()=>{B(ee=>({...ee,installerName:j})),D(!0)},children:['+ Add New "',j,'"']})]})]}),u.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[u.jsx("button",{type:"button",onClick:t,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors",children:"Cancel"}),u.jsx("button",{type:"submit",className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all",children:"Create & Transfer"})]})]})]})}):null},dUe=()=>{const{customerId:e}=jx(),{customers:t,projects:r,fetchCustomerHistory:n,customerHistory:i,systemBranding:a}=Xr();wu();const[s,o]=I.useState(!1),[l,c]=I.useState(null),[d,f]=I.useState(""),[p,m]=I.useState([]),[x,y]=I.useState(!1),b=t.find(C=>C.id===parseInt(e||"")),S=r.filter(C=>C.customerId===(b==null?void 0:b.id));if(I.useEffect(()=>{if(e){const C=parseInt(e);n(C),a8e(C).then(m).catch(console.error)}},[e,n]),!b)return u.jsx("div",{className:"text-center text-text-secondary",children:"Customer not found."});const _=C=>{const A=C.productName||"Flooring";f(`${A} Project`),c(C.id),o(!0)};return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-surface-container-high p-8 rounded-xl shadow-sm border border-outline/10",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start",children:[u.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[u.jsx("div",{className:"w-16 h-16 bg-primary-container rounded-full flex items-center justify-center mr-6 text-primary",children:u.jsx(pc,{className:"w-8 h-8"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:b.fullName}),u.jsxs("p",{className:"text-text-secondary",children:["Customer since ",df(b.createdAt,a==null?void 0:a.systemTimezone)]})]})]}),u.jsxs("button",{onClick:()=>y(!0),className:"flex items-center bg-surface-container-highest hover:bg-surface-container border border-outline/20 text-text-primary font-medium py-2 px-4 rounded-lg transition-colors",children:[u.jsx(ip,{className:"w-4 h-4 mr-2"}),"Edit Customer"]})]}),u.jsx("div",{className:"border-t border-outline/10 my-6"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-text-secondary",children:[u.jsxs("p",{className:"flex items-center",children:[u.jsx(tu,{className:"w-5 h-5 mr-3 text-primary opacity-80"})," ",b.email]}),u.jsxs("p",{className:"flex items-center",children:[u.jsx(I0,{className:"w-5 h-5 mr-3 text-primary opacity-80"})," ",b.phoneNumber]}),u.jsxs("p",{className:"flex items-center col-span-full",children:[u.jsx(G4,{className:"w-5 h-5 mr-3 text-primary opacity-80"})," ",b.address]})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h2",{className:"text-2xl font-bold text-text-primary flex items-center gap-3",children:[u.jsx(zh,{className:"w-6 h-6"})," Projects"]}),u.jsxs("button",{onClick:()=>{f(""),c(null),o(!0)},className:"flex items-center bg-primary hover:bg-primary-hover text-on-primary font-semibold py-2 px-4 rounded-full shadow-md transition-colors",children:[u.jsx(hu,{className:"w-5 h-5 mr-2"}),"New Project"]})]}),u.jsx("div",{className:"space-y-4",children:S.length>0?S.map(C=>u.jsxs(ui,{to:`/projects/${C.id}`,className:"flex justify-between items-center bg-surface-container-high p-5 rounded-xl border border-outline/10 shadow-sm hover:shadow-md hover:bg-surface-container-highest transition-all group",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-lg text-text-primary",children:C.projectName}),u.jsxs("p",{className:"text-sm text-text-secondary flex items-center gap-2 mt-1",children:[u.jsx("span",{className:`w-2 h-2 rounded-full ${C.status==="Completed"?"bg-success":"bg-primary"}`}),C.status]})]}),u.jsx(md,{className:"w-6 h-6 text-text-secondary group-hover:text-primary transition-colors"})]},C.id)):u.jsx("p",{className:"text-center text-text-secondary py-4",children:"No projects for this customer yet."})})]}),u.jsxs("div",{children:[u.jsx("div",{className:"flex justify-between items-center mb-6",children:u.jsxs("h2",{className:"text-2xl font-bold text-text-primary flex items-center gap-3",children:[u.jsx(Ed,{className:"w-6 h-6"})," Sample History"]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[p.map(C=>u.jsx(ice,{sample:C,onStartProject:_},C.id)),p.length===0&&u.jsx("p",{className:"col-span-full text-center text-text-secondary py-4",children:"No sample history found."})]})]}),u.jsx("div",{children:u.jsx(S9,{title:"Change History",icon:u.jsx(Jx,{className:"w-6 h-6"}),defaultOpen:!1,children:u.jsx(_b,{history:i})})}),u.jsx(ace,{isOpen:s,onClose:()=>{o(!1),c(null),f("")},initialCustomer:b,initialProjectName:d,transferSampleId:l}),u.jsx(s9,{isOpen:x,onClose:()=>y(!1),customer:b})]})};var sce={exports:{}},xC={},M8={exports:{}};(function(e,t){(function(r,n){n(t)})(Ve,function(r){function n(re){return function(ge,Ee,V,Ae,Pe,ze,De){return re(ge,Ee,De)}}function i(re){return function(ge,Ee,V,Ae){if(!ge||!Ee||typeof ge!="object"||typeof Ee!="object")return re(ge,Ee,V,Ae);var Pe=Ae.get(ge),ze=Ae.get(Ee);if(Pe&&ze)return Pe===Ee&&ze===ge;Ae.set(ge,Ee),Ae.set(Ee,ge);var De=re(ge,Ee,V,Ae);return Ae.delete(ge),Ae.delete(Ee),De}}function a(re,ae){var ge={};for(var Ee in re)ge[Ee]=re[Ee];for(var Ee in ae)ge[Ee]=ae[Ee];return ge}function s(re){return re.constructor===Object||re.constructor==null}function o(re){return typeof re.then=="function"}function l(re,ae){return re===ae||re!==re&&ae!==ae}var c="[object Arguments]",d="[object Boolean]",f="[object Date]",p="[object RegExp]",m="[object Map]",x="[object Number]",y="[object Object]",b="[object Set]",S="[object String]",_=Object.prototype.toString;function C(re){var ae=re.areArraysEqual,ge=re.areDatesEqual,Ee=re.areMapsEqual,V=re.areObjectsEqual,Ae=re.areRegExpsEqual,Pe=re.areSetsEqual,ze=re.createIsNestedEqual,De=ze($e);function $e(et,ut,kt){if(et===ut)return!0;if(!et||!ut||typeof et!="object"||typeof ut!="object")return et!==et&&ut!==ut;if(s(et)&&s(ut))return V(et,ut,De,kt);var ht=Array.isArray(et),jr=Array.isArray(ut);if(ht||jr)return ht===jr&&ae(et,ut,De,kt);var er=_.call(et);return er!==_.call(ut)?!1:er===f?ge(et,ut,De,kt):er===p?Ae(et,ut,De,kt):er===m?Ee(et,ut,De,kt):er===b?Pe(et,ut,De,kt):er===y||er===c?o(et)||o(ut)?!1:V(et,ut,De,kt):er===d||er===x||er===S?l(et.valueOf(),ut.valueOf()):!1}return $e}function A(re,ae,ge,Ee){var V=re.length;if(ae.length!==V)return!1;for(;V-- >0;)if(!ge(re[V],ae[V],V,V,re,ae,Ee))return!1;return!0}var j=i(A);function P(re,ae){return l(re.valueOf(),ae.valueOf())}function O(re,ae,ge,Ee){var V=re.size===ae.size;if(!V)return!1;if(!re.size)return!0;var Ae={},Pe=0;return re.forEach(function(ze,De){if(V){var $e=!1,et=0;ae.forEach(function(ut,kt){!$e&&!Ae[et]&&($e=ge(De,kt,Pe,et,re,ae,Ee)&&ge(ze,ut,De,kt,re,ae,Ee))&&(Ae[et]=!0),et++}),Pe++,V=$e}}),V}var D=i(O),L="_owner",B=Object.prototype.hasOwnProperty;function H(re,ae,ge,Ee){var V=Object.keys(re),Ae=V.length;if(Object.keys(ae).length!==Ae)return!1;for(var Pe;Ae-- >0;){if(Pe=V[Ae],Pe===L){var ze=!!re.$$typeof,De=!!ae.$$typeof;if((ze||De)&&ze!==De)return!1}if(!B.call(ae,Pe)||!ge(re[Pe],ae[Pe],Pe,Pe,re,ae,Ee))return!1}return!0}var z=i(H);function ie(re,ae){return re.source===ae.source&&re.flags===ae.flags}function X(re,ae,ge,Ee){var V=re.size===ae.size;if(!V)return!1;if(!re.size)return!0;var Ae={};return re.forEach(function(Pe,ze){if(V){var De=!1,$e=0;ae.forEach(function(et,ut){!De&&!Ae[$e]&&(De=ge(Pe,et,ze,ut,re,ae,Ee))&&(Ae[$e]=!0),$e++}),V=De}}),V}var W=i(X),Q=Object.freeze({areArraysEqual:A,areDatesEqual:P,areMapsEqual:O,areObjectsEqual:H,areRegExpsEqual:ie,areSetsEqual:X,createIsNestedEqual:n}),te=Object.freeze({areArraysEqual:j,areDatesEqual:P,areMapsEqual:D,areObjectsEqual:z,areRegExpsEqual:ie,areSetsEqual:W,createIsNestedEqual:n}),J=C(Q);function Y(re,ae){return J(re,ae,void 0)}var pe=C(a(Q,{createIsNestedEqual:function(){return l}}));function _e(re,ae){return pe(re,ae,void 0)}var ee=C(te);function de(re,ae){return ee(re,ae,new WeakMap)}var G=C(a(te,{createIsNestedEqual:function(){return l}}));function q(re,ae){return G(re,ae,new WeakMap)}function ne(re){return C(a(Q,re(Q)))}function Se(re){var ae=C(a(te,re(te)));return function(ge,Ee,V){return V===void 0&&(V=new WeakMap),ae(ge,Ee,V)}}r.circularDeepEqual=de,r.circularShallowEqual=q,r.createCustomCircularEqual=Se,r.createCustomEqual=ne,r.deepEqual=Y,r.sameValueZeroEqual=l,r.shallowEqual=_e,Object.defineProperty(r,"__esModule",{value:!0})})})(M8,M8.exports);var E9=M8.exports,F8={exports:{}},wi;function oce(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=oce(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function cK(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=oce(e))&&(n&&(n+=" "),n+=t);return n}F8.exports=cK,wi=F8.exports.clsx=cK;var c3=F8.exports,En={},fUe=function(t,r,n){return t===r?!0:t.className===r.className&&n(t.style,r.style)&&t.width===r.width&&t.autoSize===r.autoSize&&t.cols===r.cols&&t.draggableCancel===r.draggableCancel&&t.draggableHandle===r.draggableHandle&&n(t.verticalCompact,r.verticalCompact)&&n(t.compactType,r.compactType)&&n(t.layout,r.layout)&&n(t.margin,r.margin)&&n(t.containerPadding,r.containerPadding)&&t.rowHeight===r.rowHeight&&t.maxRows===r.maxRows&&t.isBounded===r.isBounded&&t.isDraggable===r.isDraggable&&t.isResizable===r.isResizable&&t.allowOverlap===r.allowOverlap&&t.preventCollision===r.preventCollision&&t.useCSSTransforms===r.useCSSTransforms&&t.transformScale===r.transformScale&&t.isDroppable===r.isDroppable&&n(t.resizeHandles,r.resizeHandles)&&n(t.resizeHandle,r.resizeHandle)&&t.onLayoutChange===r.onLayoutChange&&t.onDragStart===r.onDragStart&&t.onDrag===r.onDrag&&t.onDragStop===r.onDragStop&&t.onResizeStart===r.onResizeStart&&t.onResize===r.onResize&&t.onResizeStop===r.onResizeStop&&t.onDrop===r.onDrop&&n(t.droppingItem,r.droppingItem)&&n(t.innerRef,r.innerRef)};Object.defineProperty(En,"__esModule",{value:!0});En.bottom=C9;En.childrenEqual=mUe;En.cloneLayout=lce;En.cloneLayoutItem=Mg;En.collides=u3;En.compact=uce;En.compactItem=dce;En.compactType=TUe;En.correctBounds=fce;En.fastPositionEqual=gUe;En.fastRGLPropsEqual=void 0;En.getAllCollisions=hce;En.getFirstCollision=fg;En.getLayoutItem=k9;En.getStatics=_9;En.modifyLayout=cce;En.moveElement=a2;En.moveElementAwayFromCollision=B8;En.noop=void 0;En.perc=vUe;En.resizeItemInDirection=CUe;En.setTopLeft=_Ue;En.setTransform=kUe;En.sortLayoutItems=P9;En.sortLayoutItemsByColRow=vce;En.sortLayoutItemsByRowCol=xce;En.synchronizeLayoutWithChildren=NUe;En.validateLayout=AUe;En.withLayoutItem=pUe;var uK=E9,i2=hUe(I);function hUe(e){return e&&e.__esModule?e:{default:e}}function C9(e){let t=0,r;for(let n=0,i=e.length;n<i;n++)r=e[n].y+e[n].h,r>t&&(t=r);return t}function lce(e){const t=Array(e.length);for(let r=0,n=e.length;r<n;r++)t[r]=Mg(e[r]);return t}function cce(e,t){const r=Array(e.length);for(let n=0,i=e.length;n<i;n++)t.i===e[n].i?r[n]=t:r[n]=e[n];return r}function pUe(e,t,r){let n=k9(e,t);return n?(n=r(Mg(n)),e=cce(e,n),[e,n]):[e,null]}function Mg(e){return{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,minW:e.minW,maxW:e.maxW,minH:e.minH,maxH:e.maxH,moved:!!e.moved,static:!!e.static,isDraggable:e.isDraggable,isResizable:e.isResizable,resizeHandles:e.resizeHandles,isBounded:e.isBounded}}function mUe(e,t){return(0,uK.deepEqual)(i2.default.Children.map(e,r=>r==null?void 0:r.key),i2.default.Children.map(t,r=>r==null?void 0:r.key))&&(0,uK.deepEqual)(i2.default.Children.map(e,r=>r==null?void 0:r.props["data-grid"]),i2.default.Children.map(t,r=>r==null?void 0:r.props["data-grid"]))}En.fastRGLPropsEqual=fUe;function gUe(e,t){return e.left===t.left&&e.top===t.top&&e.width===t.width&&e.height===t.height}function u3(e,t){return!(e.i===t.i||e.x+e.w<=t.x||e.x>=t.x+t.w||e.y+e.h<=t.y||e.y>=t.y+t.h)}function uce(e,t,r,n){const i=_9(e),a=P9(e,t),s=Array(e.length);for(let o=0,l=a.length;o<l;o++){let c=Mg(a[o]);c.static||(c=dce(i,c,t,r,a,n),i.push(c)),s[e.indexOf(a[o])]=c,c.moved=!1}return s}const xUe={x:"w",y:"h"};function L8(e,t,r,n){const i=xUe[n];t[n]+=1;const a=e.map(s=>s.i).indexOf(t.i);for(let s=a+1;s<e.length;s++){const o=e[s];if(!o.static){if(o.y>t.y+t.h)break;u3(t,o)&&L8(e,o,r+t[i],n)}}t[n]=r}function dce(e,t,r,n,i,a){const s=r==="vertical",o=r==="horizontal";if(s)for(t.y=Math.min(C9(e),t.y);t.y>0&&!fg(e,t);)t.y--;else if(o)for(;t.x>0&&!fg(e,t);)t.x--;let l;for(;(l=fg(e,t))&&!(r===null&&a);)if(o?L8(i,t,l.x+l.w,"x"):L8(i,t,l.y+l.h,"y"),o&&t.x+t.w>n)for(t.x=n-t.w,t.y++;t.x>0&&!fg(e,t);)t.x--;return t.y=Math.max(t.y,0),t.x=Math.max(t.x,0),t}function fce(e,t){const r=_9(e);for(let n=0,i=e.length;n<i;n++){const a=e[n];if(a.x+a.w>t.cols&&(a.x=t.cols-a.w),a.x<0&&(a.x=0,a.w=t.cols),!a.static)r.push(a);else for(;fg(r,a);)a.y++}return e}function k9(e,t){for(let r=0,n=e.length;r<n;r++)if(e[r].i===t)return e[r]}function fg(e,t){for(let r=0,n=e.length;r<n;r++)if(u3(e[r],t))return e[r]}function hce(e,t){return e.filter(r=>u3(r,t))}function _9(e){return e.filter(t=>t.static)}function a2(e,t,r,n,i,a,s,o,l){if(t.static&&t.isDraggable!==!0||t.y===n&&t.x===r)return e;`${t.i}${String(r)}${String(n)}${t.x}${t.y}`;const c=t.x,d=t.y;typeof r=="number"&&(t.x=r),typeof n=="number"&&(t.y=n),t.moved=!0;let f=P9(e,s);(s==="vertical"&&typeof n=="number"?d>=n:s==="horizontal"&&typeof r=="number"?c>=r:!1)&&(f=f.reverse());const m=hce(f,t),x=m.length>0;if(x&&l)return lce(e);if(x&&a)return`${t.i}`,t.x=c,t.y=d,t.moved=!1,e;for(let y=0,b=m.length;y<b;y++){const S=m[y];`${t.i}${t.x}${t.y}${S.i}${S.x}${S.y}`,!S.moved&&(S.static?e=B8(e,S,t,i,s):e=B8(e,t,S,i,s))}return e}function B8(e,t,r,n,i,a){const s=i==="horizontal",o=i==="vertical",l=t.static;if(n){n=!1;const f={x:s?Math.max(t.x-r.w,0):r.x,y:o?Math.max(t.y-r.h,0):r.y,w:r.w,h:r.h,i:"-1"},p=fg(e,f),m=p&&p.y+p.h>t.y,x=p&&t.x+t.w>p.x;if(p){if(m&&o)return a2(e,r,void 0,t.y+1,n,l,i);if(m&&i==null)return t.y=r.y,r.y=r.y+r.h,e;if(x&&s)return a2(e,t,r.x,void 0,n,l,i)}else return`${r.i}${f.x}${f.y}`,a2(e,r,s?f.x:void 0,o?f.y:void 0,n,l,i)}const c=s?r.x+1:void 0,d=o?r.y+1:void 0;return c==null&&d==null?e:a2(e,r,s?r.x+1:void 0,o?r.y+1:void 0,n,l,i)}function vUe(e){return e*100+"%"}const pce=(e,t,r,n)=>e+r>n?t:r,mce=(e,t,r)=>e<0?t:r,gce=e=>Math.max(0,e),N9=e=>Math.max(0,e),A9=(e,t,r)=>{let{left:n,height:i,width:a}=t;const s=e.top-(i-e.height);return{left:n,width:a,height:mce(s,e.height,i),top:N9(s)}},T9=(e,t,r)=>{let{top:n,left:i,height:a,width:s}=t;return{top:n,height:a,width:pce(e.left,e.width,s,r),left:gce(i)}},I9=(e,t,r)=>{let{top:n,height:i,width:a}=t;const s=e.left-(a-e.width);return{height:i,width:s<0?e.width:pce(e.left,e.width,a,r),top:N9(n),left:gce(s)}},O9=(e,t,r)=>{let{top:n,left:i,height:a,width:s}=t;return{width:s,left:i,height:mce(n,e.height,a),top:N9(n)}},yUe=function(){return A9(arguments.length<=0?void 0:arguments[0],T9(...arguments))},bUe=function(){return A9(arguments.length<=0?void 0:arguments[0],I9(...arguments))},wUe=function(){return O9(arguments.length<=0?void 0:arguments[0],T9(...arguments))},SUe=function(){return O9(arguments.length<=0?void 0:arguments[0],I9(...arguments))},EUe={n:A9,ne:yUe,e:T9,se:wUe,s:O9,sw:SUe,w:I9,nw:bUe};function CUe(e,t,r,n){const i=EUe[e];return i?i(t,{...t,...r},n):r}function kUe(e){let{top:t,left:r,width:n,height:i}=e;const a=`translate(${r}px,${t}px)`;return{transform:a,WebkitTransform:a,MozTransform:a,msTransform:a,OTransform:a,width:`${n}px`,height:`${i}px`,position:"absolute"}}function _Ue(e){let{top:t,left:r,width:n,height:i}=e;return{top:`${t}px`,left:`${r}px`,width:`${n}px`,height:`${i}px`,position:"absolute"}}function P9(e,t){return t==="horizontal"?vce(e):t==="vertical"?xce(e):e}function xce(e){return e.slice(0).sort(function(t,r){return t.y>r.y||t.y===r.y&&t.x>r.x?1:t.y===r.y&&t.x===r.x?0:-1})}function vce(e){return e.slice(0).sort(function(t,r){return t.x>r.x||t.x===r.x&&t.y>r.y?1:-1})}function NUe(e,t,r,n,i){e=e||[];const a=[];i2.default.Children.forEach(t,o=>{if((o==null?void 0:o.key)==null)return;const l=k9(e,String(o.key)),c=o.props["data-grid"];l&&c==null?a.push(Mg(l)):c?a.push(Mg({...c,i:o.key})):a.push(Mg({w:1,h:1,x:0,y:C9(a),i:String(o.key)}))});const s=fce(a,{cols:r});return i?s:uce(s,n,r)}function AUe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Layout";const r=["x","y","w","h"];if(!Array.isArray(e))throw new Error(t+" must be an array!");for(let n=0,i=e.length;n<i;n++){const a=e[n];for(let s=0;s<r.length;s++){const o=r[s],l=a[o];if(typeof l!="number"||Number.isNaN(l))throw new Error(`ReactGridLayout: ${t}[${n}].${o} must be a number! Received: ${l} (${typeof l})`)}if(typeof a.i<"u"&&typeof a.i!="string")throw new Error(`ReactGridLayout: ${t}[${n}].i must be a string! Received: ${a.i} (${typeof a.i})`)}}function TUe(e){const{verticalCompact:t,compactType:r}=e||{};return t===!1?null:r}const IUe=()=>{};En.noop=IUe;var _f={};Object.defineProperty(_f,"__esModule",{value:!0});_f.calcGridColWidth=d3;_f.calcGridItemPosition=OUe;_f.calcGridItemWHPx=U8;_f.calcWH=RUe;_f.calcXY=PUe;_f.clamp=hg;function d3(e){const{margin:t,containerPadding:r,containerWidth:n,cols:i}=e;return(n-t[0]*(i-1)-r[0]*2)/i}function U8(e,t,r){return Number.isFinite(e)?Math.round(t*e+Math.max(0,e-1)*r):e}function OUe(e,t,r,n,i,a){const{margin:s,containerPadding:o,rowHeight:l}=e,c=d3(e),d={};return a&&a.resizing?(d.width=Math.round(a.resizing.width),d.height=Math.round(a.resizing.height)):(d.width=U8(n,c,s[0]),d.height=U8(i,l,s[1])),a&&a.dragging?(d.top=Math.round(a.dragging.top),d.left=Math.round(a.dragging.left)):a&&a.resizing&&typeof a.resizing.top=="number"&&typeof a.resizing.left=="number"?(d.top=Math.round(a.resizing.top),d.left=Math.round(a.resizing.left)):(d.top=Math.round((l+s[1])*r+o[1]),d.left=Math.round((c+s[0])*t+o[0])),d}function PUe(e,t,r,n,i){const{margin:a,containerPadding:s,cols:o,rowHeight:l,maxRows:c}=e,d=d3(e);let f=Math.round((r-s[0])/(d+a[0])),p=Math.round((t-s[1])/(l+a[1]));return f=hg(f,0,o-n),p=hg(p,0,c-i),{x:f,y:p}}function RUe(e,t,r,n,i,a){const{margin:s,maxRows:o,cols:l,rowHeight:c}=e,d=d3(e);let f=Math.round((t+s[0])/(d+s[0])),p=Math.round((r+s[1])/(c+s[1])),m=hg(f,0,l-n),x=hg(p,0,o-i);return["sw","w","nw"].indexOf(a)!==-1&&(m=hg(f,0,l)),["nw","n","ne"].indexOf(a)!==-1&&(x=hg(p,0,o)),{w:m,h:x}}function hg(e,t,r){return Math.max(Math.min(e,r),t)}var f3={},yce={exports:{}},jUe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",DUe=jUe,MUe=DUe;function bce(){}function wce(){}wce.resetWarningCache=bce;var FUe=function(){function e(n,i,a,s,o,l){if(l!==MUe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:wce,resetWarningCache:bce};return r.PropTypes=r,r};yce.exports=FUe();var ap=yce.exports;const zt=Vs(ap);var h3={exports:{}},Sce={},fa={},Nf={};Object.defineProperty(Nf,"__esModule",{value:!0});Nf.dontSetMe=zUe;Nf.findInArray=LUe;Nf.int=$Ue;Nf.isFunction=BUe;Nf.isNum=UUe;function LUe(e,t){for(let r=0,n=e.length;r<n;r++)if(t.apply(t,[e[r],r,e]))return e[r]}function BUe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function UUe(e){return typeof e=="number"&&!isNaN(e)}function $Ue(e){return parseInt(e,10)}function zUe(e,t,r){if(e[t])return new Error(`Invalid prop ${t} passed to ${r} - do not set this, set it on the child.`)}var t1={};Object.defineProperty(t1,"__esModule",{value:!0});t1.browserPrefixToKey=Cce;t1.browserPrefixToStyle=HUe;t1.default=void 0;t1.getPrefix=Ece;const cD=["Moz","Webkit","O","ms"];function Ece(){var r,n;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const t=(n=(r=window.document)==null?void 0:r.documentElement)==null?void 0:n.style;if(!t||e in t)return"";for(let i=0;i<cD.length;i++)if(Cce(e,cD[i])in t)return cD[i];return""}function Cce(e,t){return t?`${t}${WUe(e)}`:e}function HUe(e,t){return t?`-${t.toLowerCase()}-${e}`:e}function WUe(e){let t="",r=!0;for(let n=0;n<e.length;n++)r?(t+=e[n].toUpperCase(),r=!1):e[n]==="-"?r=!0:t+=e[n];return t}t1.default=Ece();Object.defineProperty(fa,"__esModule",{value:!0});fa.addClassName=Nce;fa.addEvent=qUe;fa.addUserSelectStyles=n$e;fa.createCSSTransform=ZUe;fa.createSVGTransform=e$e;fa.getTouch=t$e;fa.getTouchIdentifier=r$e;fa.getTranslation=R9;fa.innerHeight=YUe;fa.innerWidth=QUe;fa.matchesSelector=_ce;fa.matchesSelectorAndParentsTo=VUe;fa.offsetXYFromParent=JUe;fa.outerHeight=KUe;fa.outerWidth=XUe;fa.removeClassName=Ace;fa.removeEvent=GUe;fa.scheduleRemoveUserSelectStyles=i$e;var uc=Nf,dK=kce(t1);function kce(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(kce=function(i,a){if(!a&&i&&i.__esModule)return i;var s,o,l={__proto__:null,default:i};if(i===null||typeof i!="object"&&typeof i!="function")return l;if(s=a?n:r){if(s.has(i))return s.get(i);s.set(i,l)}for(const c in i)c!=="default"&&{}.hasOwnProperty.call(i,c)&&((o=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(i,c))&&(o.get||o.set)?s(l,c,o):l[c]=i[c]);return l})(e,t)}let j_="";function _ce(e,t){return j_||(j_=(0,uc.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(r){return(0,uc.isFunction)(e[r])})),(0,uc.isFunction)(e[j_])?e[j_](t):!1}function VUe(e,t,r){let n=e;do{if(_ce(n,t))return!0;if(n===r)return!1;n=n.parentNode}while(n);return!1}function qUe(e,t,r,n){if(!e)return;const i={capture:!0,...n};e.addEventListener?e.addEventListener(t,r,i):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r}function GUe(e,t,r,n){if(!e)return;const i={capture:!0,...n};e.removeEventListener?e.removeEventListener(t,r,i):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null}function KUe(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,uc.int)(r.borderTopWidth),t+=(0,uc.int)(r.borderBottomWidth),t}function XUe(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,uc.int)(r.borderLeftWidth),t+=(0,uc.int)(r.borderRightWidth),t}function YUe(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,uc.int)(r.paddingTop),t-=(0,uc.int)(r.paddingBottom),t}function QUe(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,uc.int)(r.paddingLeft),t-=(0,uc.int)(r.paddingRight),t}function JUe(e,t,r){const i=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),a=(e.clientX+t.scrollLeft-i.left)/r,s=(e.clientY+t.scrollTop-i.top)/r;return{x:a,y:s}}function ZUe(e,t){const r=R9(e,t,"px");return{[(0,dK.browserPrefixToKey)("transform",dK.default)]:r}}function e$e(e,t){return R9(e,t,"")}function R9(e,t,r){let{x:n,y:i}=e,a=`translate(${n}${r},${i}${r})`;if(t){const s=`${typeof t.x=="string"?t.x:t.x+r}`,o=`${typeof t.y=="string"?t.y:t.y+r}`;a=`translate(${s}, ${o})`+a}return a}function t$e(e,t){return e.targetTouches&&(0,uc.findInArray)(e.targetTouches,r=>t===r.identifier)||e.changedTouches&&(0,uc.findInArray)(e.changedTouches,r=>t===r.identifier)}function r$e(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function n$e(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,e.getElementsByTagName("head")[0].appendChild(t)),e.body&&Nce(e.body,"react-draggable-transparent-selection")}function i$e(e){window.requestAnimationFrame?window.requestAnimationFrame(()=>{fK(e)}):fK(e)}function fK(e){if(e)try{if(e.body&&Ace(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function Nce(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp(`(?:^|\\s)${t}(?!\\S)`))||(e.className+=` ${t}`)}function Ace(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp(`(?:^|\\s)${t}(?!\\S)`,"g"),"")}var Af={};Object.defineProperty(Af,"__esModule",{value:!0});Af.canDragX=o$e;Af.canDragY=l$e;Af.createCoreData=u$e;Af.createDraggableData=d$e;Af.getBoundPosition=a$e;Af.getControlPosition=c$e;Af.snapToGrid=s$e;var Kl=Nf,Sv=fa;function a$e(e,t,r){if(!e.props.bounds)return[t,r];let{bounds:n}=e.props;n=typeof n=="string"?n:f$e(n);const i=j9(e);if(typeof n=="string"){const{ownerDocument:a}=i,s=a.defaultView;let o;if(n==="parent"?o=i.parentNode:o=i.getRootNode().querySelector(n),!(o instanceof s.HTMLElement))throw new Error('Bounds selector "'+n+'" could not find an element.');const l=o,c=s.getComputedStyle(i),d=s.getComputedStyle(l);n={left:-i.offsetLeft+(0,Kl.int)(d.paddingLeft)+(0,Kl.int)(c.marginLeft),top:-i.offsetTop+(0,Kl.int)(d.paddingTop)+(0,Kl.int)(c.marginTop),right:(0,Sv.innerWidth)(l)-(0,Sv.outerWidth)(i)-i.offsetLeft+(0,Kl.int)(d.paddingRight)-(0,Kl.int)(c.marginRight),bottom:(0,Sv.innerHeight)(l)-(0,Sv.outerHeight)(i)-i.offsetTop+(0,Kl.int)(d.paddingBottom)-(0,Kl.int)(c.marginBottom)}}return(0,Kl.isNum)(n.right)&&(t=Math.min(t,n.right)),(0,Kl.isNum)(n.bottom)&&(r=Math.min(r,n.bottom)),(0,Kl.isNum)(n.left)&&(t=Math.max(t,n.left)),(0,Kl.isNum)(n.top)&&(r=Math.max(r,n.top)),[t,r]}function s$e(e,t,r){const n=Math.round(t/e[0])*e[0],i=Math.round(r/e[1])*e[1];return[n,i]}function o$e(e){return e.props.axis==="both"||e.props.axis==="x"}function l$e(e){return e.props.axis==="both"||e.props.axis==="y"}function c$e(e,t,r){const n=typeof t=="number"?(0,Sv.getTouch)(e,t):null;if(typeof t=="number"&&!n)return null;const i=j9(r),a=r.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,Sv.offsetXYFromParent)(n||e,a,r.props.scale)}function u$e(e,t,r){const n=!(0,Kl.isNum)(e.lastX),i=j9(e);return n?{node:i,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:i,deltaX:t-e.lastX,deltaY:r-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:r}}function d$e(e,t){const r=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/r,y:e.state.y+t.deltaY/r,deltaX:t.deltaX/r,deltaY:t.deltaY/r,lastX:e.state.x,lastY:e.state.y}}function f$e(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function j9(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var p3={},m3={};Object.defineProperty(m3,"__esModule",{value:!0});m3.default=h$e;function h$e(){}Object.defineProperty(p3,"__esModule",{value:!0});p3.default=void 0;var uD=Tce(I),jo=D9(ap),p$e=D9(Ml),eo=fa,Rp=Af,dD=Nf,Rw=D9(m3);function D9(e){return e&&e.__esModule?e:{default:e}}function Tce(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(Tce=function(i,a){if(!a&&i&&i.__esModule)return i;var s,o,l={__proto__:null,default:i};if(i===null||typeof i!="object"&&typeof i!="function")return l;if(s=a?n:r){if(s.has(i))return s.get(i);s.set(i,l)}for(const c in i)c!=="default"&&{}.hasOwnProperty.call(i,c)&&((o=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(i,c))&&(o.get||o.set)?s(l,c,o):l[c]=i[c]);return l})(e,t)}function Do(e,t,r){return(t=m$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m$e(e){var t=g$e(e,"string");return typeof t=="symbol"?t:t+""}function g$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const Uu={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let jp=Uu.mouse,g3=class extends uD.Component{constructor(){super(...arguments),Do(this,"dragging",!1),Do(this,"lastX",NaN),Do(this,"lastY",NaN),Do(this,"touchIdentifier",null),Do(this,"mounted",!1),Do(this,"handleDragStart",t=>{if(this.props.onMouseDown(t),!this.props.allowAnyClick&&typeof t.button=="number"&&t.button!==0)return!1;const r=this.findDOMNode();if(!r||!r.ownerDocument||!r.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:n}=r;if(this.props.disabled||!(t.target instanceof n.defaultView.Node)||this.props.handle&&!(0,eo.matchesSelectorAndParentsTo)(t.target,this.props.handle,r)||this.props.cancel&&(0,eo.matchesSelectorAndParentsTo)(t.target,this.props.cancel,r))return;t.type==="touchstart"&&!this.props.allowMobileScroll&&t.preventDefault();const i=(0,eo.getTouchIdentifier)(t);this.touchIdentifier=i;const a=(0,Rp.getControlPosition)(t,i,this);if(a==null)return;const{x:s,y:o}=a,l=(0,Rp.createCoreData)(this,s,o);(0,Rw.default)("DraggableCore: handleDragStart: %j",l),(0,Rw.default)("calling",this.props.onStart),!(this.props.onStart(t,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,eo.addUserSelectStyles)(n),this.dragging=!0,this.lastX=s,this.lastY=o,(0,eo.addEvent)(n,jp.move,this.handleDrag),(0,eo.addEvent)(n,jp.stop,this.handleDragStop))}),Do(this,"handleDrag",t=>{const r=(0,Rp.getControlPosition)(t,this.touchIdentifier,this);if(r==null)return;let{x:n,y:i}=r;if(Array.isArray(this.props.grid)){let o=n-this.lastX,l=i-this.lastY;if([o,l]=(0,Rp.snapToGrid)(this.props.grid,o,l),!o&&!l)return;n=this.lastX+o,i=this.lastY+l}const a=(0,Rp.createCoreData)(this,n,i);if((0,Rw.default)("DraggableCore: handleDrag: %j",a),this.props.onDrag(t,a)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=n,this.lastY=i}),Do(this,"handleDragStop",t=>{if(!this.dragging)return;const r=(0,Rp.getControlPosition)(t,this.touchIdentifier,this);if(r==null)return;let{x:n,y:i}=r;if(Array.isArray(this.props.grid)){let l=n-this.lastX||0,c=i-this.lastY||0;[l,c]=(0,Rp.snapToGrid)(this.props.grid,l,c),n=this.lastX+l,i=this.lastY+c}const a=(0,Rp.createCoreData)(this,n,i);if(this.props.onStop(t,a)===!1||this.mounted===!1)return!1;const o=this.findDOMNode();o&&this.props.enableUserSelectHack&&(0,eo.scheduleRemoveUserSelectStyles)(o.ownerDocument),(0,Rw.default)("DraggableCore: handleDragStop: %j",a),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,o&&((0,Rw.default)("DraggableCore: Removing handlers"),(0,eo.removeEvent)(o.ownerDocument,jp.move,this.handleDrag),(0,eo.removeEvent)(o.ownerDocument,jp.stop,this.handleDragStop))}),Do(this,"onMouseDown",t=>(jp=Uu.mouse,this.handleDragStart(t))),Do(this,"onMouseUp",t=>(jp=Uu.mouse,this.handleDragStop(t))),Do(this,"onTouchStart",t=>(jp=Uu.touch,this.handleDragStart(t))),Do(this,"onTouchEnd",t=>(jp=Uu.touch,this.handleDragStop(t)))}componentDidMount(){this.mounted=!0;const t=this.findDOMNode();t&&(0,eo.addEvent)(t,Uu.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const t=this.findDOMNode();if(t){const{ownerDocument:r}=t;(0,eo.removeEvent)(r,Uu.mouse.move,this.handleDrag),(0,eo.removeEvent)(r,Uu.touch.move,this.handleDrag),(0,eo.removeEvent)(r,Uu.mouse.stop,this.handleDragStop),(0,eo.removeEvent)(r,Uu.touch.stop,this.handleDragStop),(0,eo.removeEvent)(t,Uu.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,eo.scheduleRemoveUserSelectStyles)(r)}}findDOMNode(){var t,r,n;return(t=this.props)!=null&&t.nodeRef?(n=(r=this.props)==null?void 0:r.nodeRef)==null?void 0:n.current:p$e.default.findDOMNode(this)}render(){return uD.cloneElement(uD.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};p3.default=g3;Do(g3,"displayName","DraggableCore");Do(g3,"propTypes",{allowAnyClick:jo.default.bool,allowMobileScroll:jo.default.bool,children:jo.default.node.isRequired,disabled:jo.default.bool,enableUserSelectHack:jo.default.bool,offsetParent:function(e,t){if(e[t]&&e[t].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:jo.default.arrayOf(jo.default.number),handle:jo.default.string,cancel:jo.default.string,nodeRef:jo.default.object,onStart:jo.default.func,onDrag:jo.default.func,onStop:jo.default.func,onMouseDown:jo.default.func,scale:jo.default.number,className:dD.dontSetMe,style:dD.dontSetMe,transform:dD.dontSetMe});Do(g3,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),e.default=void 0;var t=f(I),r=d(ap),n=d(Ml),i=c3,a=fa,s=Af,o=Nf,l=d(p3),c=d(m3);function d(S){return S&&S.__esModule?S:{default:S}}function f(S,_){if(typeof WeakMap=="function")var C=new WeakMap,A=new WeakMap;return(f=function(j,P){if(!P&&j&&j.__esModule)return j;var O,D,L={__proto__:null,default:j};if(j===null||typeof j!="object"&&typeof j!="function")return L;if(O=P?A:C){if(O.has(j))return O.get(j);O.set(j,L)}for(const B in j)B!=="default"&&{}.hasOwnProperty.call(j,B)&&((D=(O=Object.defineProperty)&&Object.getOwnPropertyDescriptor(j,B))&&(D.get||D.set)?O(L,B,D):L[B]=j[B]);return L})(S,_)}function p(){return p=Object.assign?Object.assign.bind():function(S){for(var _=1;_<arguments.length;_++){var C=arguments[_];for(var A in C)({}).hasOwnProperty.call(C,A)&&(S[A]=C[A])}return S},p.apply(null,arguments)}function m(S,_,C){return(_=x(_))in S?Object.defineProperty(S,_,{value:C,enumerable:!0,configurable:!0,writable:!0}):S[_]=C,S}function x(S){var _=y(S,"string");return typeof _=="symbol"?_:_+""}function y(S,_){if(typeof S!="object"||!S)return S;var C=S[Symbol.toPrimitive];if(C!==void 0){var A=C.call(S,_);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(S)}class b extends t.Component{static getDerivedStateFromProps(_,C){let{position:A}=_,{prevPropsPosition:j}=C;return A&&(!j||A.x!==j.x||A.y!==j.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:A,prevPropsPosition:j}),{x:A.x,y:A.y,prevPropsPosition:{...A}}):null}constructor(_){super(_),m(this,"onDragStart",(C,A)=>{if((0,c.default)("Draggable: onDragStart: %j",A),this.props.onStart(C,(0,s.createDraggableData)(this,A))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),m(this,"onDrag",(C,A)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",A);const j=(0,s.createDraggableData)(this,A),P={x:j.x,y:j.y,slackX:0,slackY:0};if(this.props.bounds){const{x:D,y:L}=P;P.x+=this.state.slackX,P.y+=this.state.slackY;const[B,H]=(0,s.getBoundPosition)(this,P.x,P.y);P.x=B,P.y=H,P.slackX=this.state.slackX+(D-P.x),P.slackY=this.state.slackY+(L-P.y),j.x=P.x,j.y=P.y,j.deltaX=P.x-this.state.x,j.deltaY=P.y-this.state.y}if(this.props.onDrag(C,j)===!1)return!1;this.setState(P)}),m(this,"onDragStop",(C,A)=>{if(!this.state.dragging||this.props.onStop(C,(0,s.createDraggableData)(this,A))===!1)return!1;(0,c.default)("Draggable: onDragStop: %j",A);const P={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:D,y:L}=this.props.position;P.x=D,P.y=L}this.setState(P)}),this.state={dragging:!1,dragged:!1,x:_.position?_.position.x:_.defaultPosition.x,y:_.position?_.position.y:_.defaultPosition.y,prevPropsPosition:{..._.position},slackX:0,slackY:0,isElementSVG:!1},_.position&&!(_.onDrag||_.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var _,C;return((C=(_=this.props)==null?void 0:_.nodeRef)==null?void 0:C.current)??n.default.findDOMNode(this)}render(){const{axis:_,bounds:C,children:A,defaultPosition:j,defaultClassName:P,defaultClassNameDragging:O,defaultClassNameDragged:D,position:L,positionOffset:B,scale:H,...z}=this.props;let ie={},X=null;const Q=!!!L||this.state.dragging,te=L||j,J={x:(0,s.canDragX)(this)&&Q?this.state.x:te.x,y:(0,s.canDragY)(this)&&Q?this.state.y:te.y};this.state.isElementSVG?X=(0,a.createSVGTransform)(J,B):ie=(0,a.createCSSTransform)(J,B);const Y=(0,i.clsx)(A.props.className||"",P,{[O]:this.state.dragging,[D]:this.state.dragged});return t.createElement(l.default,p({},z,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(A),{className:Y,style:{...A.props.style,...ie},transform:X}))}}e.default=b,m(b,"displayName","Draggable"),m(b,"propTypes",{...l.default.propTypes,axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:o.dontSetMe,style:o.dontSetMe,transform:o.dontSetMe}),m(b,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(Sce);const{default:Ice,DraggableCore:x$e}=Sce;h3.exports=Ice;h3.exports.default=Ice;h3.exports.DraggableCore=x$e;var Oce=h3.exports,x3={exports:{}},vC={},M9={};M9.__esModule=!0;M9.cloneElement=E$e;var v$e=y$e(I);function y$e(e){return e&&e.__esModule?e:{default:e}}function hK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function pK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hK(Object(r),!0).forEach(function(n){b$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function b$e(e,t,r){return t=w$e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w$e(e){var t=S$e(e,"string");return typeof t=="symbol"?t:String(t)}function S$e(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E$e(e,t){return t.style&&e.props.style&&(t.style=pK(pK({},e.props.style),t.style)),t.className&&e.props.className&&(t.className=e.props.className+" "+t.className),v$e.default.cloneElement(e,t)}var yC={};yC.__esModule=!0;yC.resizableProps=void 0;var sn=C$e(ap);function C$e(e){return e&&e.__esModule?e:{default:e}}var k$e={axis:sn.default.oneOf(["both","x","y","none"]),className:sn.default.string,children:sn.default.element.isRequired,draggableOpts:sn.default.shape({allowAnyClick:sn.default.bool,cancel:sn.default.string,children:sn.default.node,disabled:sn.default.bool,enableUserSelectHack:sn.default.bool,offsetParent:sn.default.node,grid:sn.default.arrayOf(sn.default.number),handle:sn.default.string,nodeRef:sn.default.object,onStart:sn.default.func,onDrag:sn.default.func,onStop:sn.default.func,onMouseDown:sn.default.func,scale:sn.default.number}),height:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];if(i.axis==="both"||i.axis==="y"){var a;return(a=sn.default.number).isRequired.apply(a,r)}return sn.default.number.apply(sn.default,r)},handle:sn.default.oneOfType([sn.default.node,sn.default.func]),handleSize:sn.default.arrayOf(sn.default.number),lockAspectRatio:sn.default.bool,maxConstraints:sn.default.arrayOf(sn.default.number),minConstraints:sn.default.arrayOf(sn.default.number),onResizeStop:sn.default.func,onResizeStart:sn.default.func,onResize:sn.default.func,resizeHandles:sn.default.arrayOf(sn.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:sn.default.number,width:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];if(i.axis==="both"||i.axis==="x"){var a;return(a=sn.default.number).isRequired.apply(a,r)}return sn.default.number.apply(sn.default,r)}};yC.resizableProps=k$e;vC.__esModule=!0;vC.default=void 0;var jw=I$e(I),_$e=Oce,N$e=M9,A$e=yC,T$e=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function Pce(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(Pce=function(i){return i?r:t})(e)}function I$e(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=Pce(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function $8(){return $8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$8.apply(this,arguments)}function O$e(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function mK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function fD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mK(Object(r),!0).forEach(function(n){P$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function P$e(e,t,r){return t=R$e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R$e(e){var t=j$e(e,"string");return typeof t=="symbol"?t:String(t)}function j$e(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D$e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,z8(e,t)}function z8(e,t){return z8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},z8(e,t)}var F9=function(e){D$e(t,e);function t(){for(var n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=e.call.apply(e,[this].concat(a))||this,n.handleRefs={},n.lastHandleRect=null,n.slack=null,n}var r=t.prototype;return r.componentWillUnmount=function(){this.resetData()},r.resetData=function(){this.lastHandleRect=this.slack=null},r.runConstraints=function(i,a){var s=this.props,o=s.minConstraints,l=s.maxConstraints,c=s.lockAspectRatio;if(!o&&!l&&!c)return[i,a];if(c){var d=this.props.width/this.props.height,f=i-this.props.width,p=a-this.props.height;Math.abs(f)>Math.abs(p*d)?a=i/d:i=a*d}var m=i,x=a,y=this.slack||[0,0],b=y[0],S=y[1];return i+=b,a+=S,o&&(i=Math.max(o[0],i),a=Math.max(o[1],a)),l&&(i=Math.min(l[0],i),a=Math.min(l[1],a)),this.slack=[b+(m-i),S+(x-a)],[i,a]},r.resizeHandler=function(i,a){var s=this;return function(o,l){var c=l.node,d=l.deltaX,f=l.deltaY;i==="onResizeStart"&&s.resetData();var p=(s.props.axis==="both"||s.props.axis==="x")&&a!=="n"&&a!=="s",m=(s.props.axis==="both"||s.props.axis==="y")&&a!=="e"&&a!=="w";if(!(!p&&!m)){var x=a[0],y=a[a.length-1],b=c.getBoundingClientRect();if(s.lastHandleRect!=null){if(y==="w"){var S=b.left-s.lastHandleRect.left;d+=S}if(x==="n"){var _=b.top-s.lastHandleRect.top;f+=_}}s.lastHandleRect=b,y==="w"&&(d=-d),x==="n"&&(f=-f);var C=s.props.width+(p?d/s.props.transformScale:0),A=s.props.height+(m?f/s.props.transformScale:0),j=s.runConstraints(C,A);C=j[0],A=j[1];var P=C!==s.props.width||A!==s.props.height,O=typeof s.props[i]=="function"?s.props[i]:null,D=i==="onResize"&&!P;O&&!D&&(o.persist==null||o.persist(),O(o,{node:c,size:{width:C,height:A},handle:a})),i==="onResizeStop"&&s.resetData()}}},r.renderResizeHandle=function(i,a){var s=this.props.handle;if(!s)return jw.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+i,ref:a});if(typeof s=="function")return s(i,a);var o=typeof s.type=="string",l=fD({ref:a},o?{}:{handleAxis:i});return jw.cloneElement(s,l)},r.render=function(){var i=this,a=this.props,s=a.children,o=a.className,l=a.draggableOpts;a.width,a.height,a.handle,a.handleSize,a.lockAspectRatio,a.axis,a.minConstraints,a.maxConstraints,a.onResize,a.onResizeStop,a.onResizeStart;var c=a.resizeHandles;a.transformScale;var d=O$e(a,T$e);return(0,N$e.cloneElement)(s,fD(fD({},d),{},{className:(o?o+" ":"")+"react-resizable",children:[].concat(s.props.children,c.map(function(f){var p,m=(p=i.handleRefs[f])!=null?p:i.handleRefs[f]=jw.createRef();return jw.createElement(_$e.DraggableCore,$8({},l,{nodeRef:m,key:"resizableHandle-"+f,onStop:i.resizeHandler("onResizeStop",f),onStart:i.resizeHandler("onResizeStart",f),onDrag:i.resizeHandler("onResize",f)}),i.renderResizeHandle(f,m))}))}))},t}(jw.Component);vC.default=F9;F9.propTypes=A$e.resizableProps;F9.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var v3={};v3.__esModule=!0;v3.default=void 0;var hD=U$e(I),M$e=Rce(ap),F$e=Rce(vC),L$e=yC,B$e=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function Rce(e){return e&&e.__esModule?e:{default:e}}function jce(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(jce=function(i){return i?r:t})(e)}function U$e(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=jce(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function H8(){return H8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},H8.apply(this,arguments)}function gK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function TT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gK(Object(r),!0).forEach(function(n){$$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $$e(e,t,r){return t=z$e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z$e(e){var t=H$e(e,"string");return typeof t=="symbol"?t:String(t)}function H$e(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W$e(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function V$e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,W8(e,t)}function W8(e,t){return W8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},W8(e,t)}var Dce=function(e){V$e(t,e);function t(){for(var n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=e.call.apply(e,[this].concat(a))||this,n.state={width:n.props.width,height:n.props.height,propsWidth:n.props.width,propsHeight:n.props.height},n.onResize=function(o,l){var c=l.size;n.props.onResize?(o.persist==null||o.persist(),n.setState(c,function(){return n.props.onResize&&n.props.onResize(o,l)})):n.setState(c)},n}t.getDerivedStateFromProps=function(i,a){return a.propsWidth!==i.width||a.propsHeight!==i.height?{width:i.width,height:i.height,propsWidth:i.width,propsHeight:i.height}:null};var r=t.prototype;return r.render=function(){var i=this.props,a=i.handle,s=i.handleSize;i.onResize;var o=i.onResizeStart,l=i.onResizeStop,c=i.draggableOpts,d=i.minConstraints,f=i.maxConstraints,p=i.lockAspectRatio,m=i.axis;i.width,i.height;var x=i.resizeHandles,y=i.style,b=i.transformScale,S=W$e(i,B$e);return hD.createElement(F$e.default,{axis:m,draggableOpts:c,handle:a,handleSize:s,height:this.state.height,lockAspectRatio:p,maxConstraints:f,minConstraints:d,onResizeStart:o,onResize:this.onResize,onResizeStop:l,resizeHandles:x,transformScale:b,width:this.state.width},hD.createElement("div",H8({},S,{style:TT(TT({},y),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},t}(hD.Component);v3.default=Dce;Dce.propTypes=TT(TT({},L$e.resizableProps),{},{children:M$e.default.element});x3.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};x3.exports.Resizable=vC.default;x3.exports.ResizableBox=v3.default;var q$e=x3.exports,_h={};Object.defineProperty(_h,"__esModule",{value:!0});_h.resizeHandleType=_h.resizeHandleAxesType=_h.default=void 0;var fn=Mce(ap),G$e=Mce(I);function Mce(e){return e&&e.__esModule?e:{default:e}}const K$e=_h.resizeHandleAxesType=fn.default.arrayOf(fn.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),X$e=_h.resizeHandleType=fn.default.oneOfType([fn.default.node,fn.default.func]);_h.default={className:fn.default.string,style:fn.default.object,width:fn.default.number,autoSize:fn.default.bool,cols:fn.default.number,draggableCancel:fn.default.string,draggableHandle:fn.default.string,verticalCompact:function(e){e.verticalCompact},compactType:fn.default.oneOf(["vertical","horizontal"]),layout:function(e){var t=e.layout;t!==void 0&&En.validateLayout(t,"layout")},margin:fn.default.arrayOf(fn.default.number),containerPadding:fn.default.arrayOf(fn.default.number),rowHeight:fn.default.number,maxRows:fn.default.number,isBounded:fn.default.bool,isDraggable:fn.default.bool,isResizable:fn.default.bool,allowOverlap:fn.default.bool,preventCollision:fn.default.bool,useCSSTransforms:fn.default.bool,transformScale:fn.default.number,isDroppable:fn.default.bool,resizeHandles:K$e,resizeHandle:X$e,onLayoutChange:fn.default.func,onDragStart:fn.default.func,onDrag:fn.default.func,onDragStop:fn.default.func,onResizeStart:fn.default.func,onResize:fn.default.func,onResizeStop:fn.default.func,onDrop:fn.default.func,droppingItem:fn.default.shape({i:fn.default.string.isRequired,w:fn.default.number.isRequired,h:fn.default.number.isRequired}),children:function(e,t){const r=e[t],n={};G$e.default.Children.forEach(r,function(i){if((i==null?void 0:i.key)!=null){if(n[i.key])throw new Error('Duplicate child key "'+i.key+'" found! This will cause problems in ReactGridLayout.');n[i.key]=!0}})},innerRef:fn.default.any};Object.defineProperty(f3,"__esModule",{value:!0});f3.default=void 0;var B1=L9(I),xK=Ml,Wn=L9(ap),Y$e=Oce,Q$e=q$e,U1=En,Os=_f,vK=_h,J$e=L9(c3);function L9(e){return e&&e.__esModule?e:{default:e}}function Ld(e,t,r){return(t=Z$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z$e(e){var t=eze(e,"string");return typeof t=="symbol"?t:t+""}function eze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class B9 extends B1.default.Component{constructor(){super(...arguments),Ld(this,"state",{resizing:null,dragging:null,className:""}),Ld(this,"elementRef",B1.default.createRef()),Ld(this,"onDragStart",(t,r)=>{let{node:n}=r;const{onDragStart:i,transformScale:a}=this.props;if(!i)return;const s={top:0,left:0},{offsetParent:o}=n;if(!o)return;const l=o.getBoundingClientRect(),c=n.getBoundingClientRect(),d=c.left/a,f=l.left/a,p=c.top/a,m=l.top/a;s.left=d-f+o.scrollLeft,s.top=p-m+o.scrollTop,this.setState({dragging:s});const{x,y}=(0,Os.calcXY)(this.getPositionParams(),s.top,s.left,this.props.w,this.props.h);return i.call(this,this.props.i,x,y,{e:t,node:n,newPosition:s})}),Ld(this,"onDrag",(t,r,n)=>{let{node:i,deltaX:a,deltaY:s}=r;const{onDrag:o}=this.props;if(!o)return;if(!this.state.dragging)throw new Error("onDrag called before onDragStart.");let l=this.state.dragging.top+s,c=this.state.dragging.left+a;const{isBounded:d,i:f,w:p,h:m,containerWidth:x}=this.props,y=this.getPositionParams();if(d){const{offsetParent:C}=i;if(C){const{margin:A,rowHeight:j}=this.props,P=C.clientHeight-(0,Os.calcGridItemWHPx)(m,j,A[1]);l=(0,Os.clamp)(l,0,P);const O=(0,Os.calcGridColWidth)(y),D=x-(0,Os.calcGridItemWHPx)(p,O,A[0]);c=(0,Os.clamp)(c,0,D)}}const b={top:l,left:c};n?this.setState({dragging:b}):(0,xK.flushSync)(()=>{this.setState({dragging:b})});const{x:S,y:_}=(0,Os.calcXY)(y,l,c,p,m);return o.call(this,f,S,_,{e:t,node:i,newPosition:b})}),Ld(this,"onDragStop",(t,r)=>{let{node:n}=r;const{onDragStop:i}=this.props;if(!i)return;if(!this.state.dragging)throw new Error("onDragEnd called before onDragStart.");const{w:a,h:s,i:o}=this.props,{left:l,top:c}=this.state.dragging,d={top:c,left:l};this.setState({dragging:null});const{x:f,y:p}=(0,Os.calcXY)(this.getPositionParams(),c,l,a,s);return i.call(this,o,f,p,{e:t,node:n,newPosition:d})}),Ld(this,"onResizeStop",(t,r,n)=>this.onResizeHandler(t,r,n,"onResizeStop")),Ld(this,"onResizeStart",(t,r,n)=>this.onResizeHandler(t,r,n,"onResizeStart")),Ld(this,"onResize",(t,r,n)=>this.onResizeHandler(t,r,n,"onResize"))}shouldComponentUpdate(t,r){if(this.props.children!==t.children||this.props.droppingPosition!==t.droppingPosition)return!0;const n=(0,Os.calcGridItemPosition)(this.getPositionParams(this.props),this.props.x,this.props.y,this.props.w,this.props.h,this.state),i=(0,Os.calcGridItemPosition)(this.getPositionParams(t),t.x,t.y,t.w,t.h,r);return!(0,U1.fastPositionEqual)(n,i)||this.props.useCSSTransforms!==t.useCSSTransforms}componentDidMount(){this.moveDroppingItem({})}componentDidUpdate(t){this.moveDroppingItem(t)}moveDroppingItem(t){const{droppingPosition:r}=this.props;if(!r)return;const n=this.elementRef.current;if(!n)return;const i=t.droppingPosition||{left:0,top:0},{dragging:a}=this.state,s=a&&r.left!==i.left||r.top!==i.top;if(!a)this.onDragStart(r.e,{node:n,deltaX:r.left,deltaY:r.top});else if(s){const o=r.left-a.left,l=r.top-a.top;this.onDrag(r.e,{node:n,deltaX:o,deltaY:l},!0)}}getPositionParams(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return{cols:t.cols,containerPadding:t.containerPadding,containerWidth:t.containerWidth,margin:t.margin,maxRows:t.maxRows,rowHeight:t.rowHeight}}createStyle(t){const{usePercentages:r,containerWidth:n,useCSSTransforms:i}=this.props;let a;return i?a=(0,U1.setTransform)(t):(a=(0,U1.setTopLeft)(t),r&&(a.left=(0,U1.perc)(t.left/n),a.width=(0,U1.perc)(t.width/n))),a}mixinDraggable(t,r){return B1.default.createElement(Y$e.DraggableCore,{disabled:!r,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:""),scale:this.props.transformScale,nodeRef:this.elementRef},t)}curryResizeHandler(t,r){return(n,i)=>r(n,i,t)}mixinResizable(t,r,n){const{cols:i,minW:a,minH:s,maxW:o,maxH:l,transformScale:c,resizeHandles:d,resizeHandle:f}=this.props,p=this.getPositionParams(),m=(0,Os.calcGridItemPosition)(p,0,0,i,0).width,x=(0,Os.calcGridItemPosition)(p,0,0,a,s),y=(0,Os.calcGridItemPosition)(p,0,0,o,l),b=[x.width,x.height],S=[Math.min(y.width,m),Math.min(y.height,1/0)];return B1.default.createElement(Q$e.Resizable,{draggableOpts:{disabled:!n},className:n?void 0:"react-resizable-hide",width:r.width,height:r.height,minConstraints:b,maxConstraints:S,onResizeStop:this.curryResizeHandler(r,this.onResizeStop),onResizeStart:this.curryResizeHandler(r,this.onResizeStart),onResize:this.curryResizeHandler(r,this.onResize),transformScale:c,resizeHandles:d,handle:f},t)}onResizeHandler(t,r,n,i){let{node:a,size:s,handle:o}=r;const l=this.props[i];if(!l)return;const{x:c,y:d,i:f,maxH:p,minH:m,containerWidth:x}=this.props,{minW:y,maxW:b}=this.props;let S=s;a&&(S=(0,U1.resizeItemInDirection)(o,n,s,x),(0,xK.flushSync)(()=>{this.setState({resizing:i==="onResizeStop"?null:S})}));let{w:_,h:C}=(0,Os.calcWH)(this.getPositionParams(),S.width,S.height,c,d,o);_=(0,Os.clamp)(_,Math.max(y,1),b),C=(0,Os.clamp)(C,m,p),l.call(this,f,_,C,{e:t,node:a,size:S,handle:o})}render(){const{x:t,y:r,w:n,h:i,isDraggable:a,isResizable:s,droppingPosition:o,useCSSTransforms:l}=this.props,c=(0,Os.calcGridItemPosition)(this.getPositionParams(),t,r,n,i,this.state),d=B1.default.Children.only(this.props.children);let f=B1.default.cloneElement(d,{ref:this.elementRef,className:(0,J$e.default)("react-grid-item",d.props.className,this.props.className,{static:this.props.static,resizing:!!this.state.resizing,"react-draggable":a,"react-draggable-dragging":!!this.state.dragging,dropping:!!o,cssTransforms:l}),style:{...this.props.style,...d.props.style,...this.createStyle(c)}});return f=this.mixinResizable(f,c,s),f=this.mixinDraggable(f,a),f}}f3.default=B9;Ld(B9,"propTypes",{children:Wn.default.element,cols:Wn.default.number.isRequired,containerWidth:Wn.default.number.isRequired,rowHeight:Wn.default.number.isRequired,margin:Wn.default.array.isRequired,maxRows:Wn.default.number.isRequired,containerPadding:Wn.default.array.isRequired,x:Wn.default.number.isRequired,y:Wn.default.number.isRequired,w:Wn.default.number.isRequired,h:Wn.default.number.isRequired,minW:function(e,t){const r=e[t];if(typeof r!="number")return new Error("minWidth not Number");if(r>e.w||r>e.maxW)return new Error("minWidth larger than item width/maxWidth")},maxW:function(e,t){const r=e[t];if(typeof r!="number")return new Error("maxWidth not Number");if(r<e.w||r<e.minW)return new Error("maxWidth smaller than item width/minWidth")},minH:function(e,t){const r=e[t];if(typeof r!="number")return new Error("minHeight not Number");if(r>e.h||r>e.maxH)return new Error("minHeight larger than item height/maxHeight")},maxH:function(e,t){const r=e[t];if(typeof r!="number")return new Error("maxHeight not Number");if(r<e.h||r<e.minH)return new Error("maxHeight smaller than item height/minHeight")},i:Wn.default.string.isRequired,resizeHandles:vK.resizeHandleAxesType,resizeHandle:vK.resizeHandleType,onDragStop:Wn.default.func,onDragStart:Wn.default.func,onDrag:Wn.default.func,onResizeStop:Wn.default.func,onResizeStart:Wn.default.func,onResize:Wn.default.func,isDraggable:Wn.default.bool.isRequired,isResizable:Wn.default.bool.isRequired,isBounded:Wn.default.bool.isRequired,static:Wn.default.bool,useCSSTransforms:Wn.default.bool.isRequired,transformScale:Wn.default.number,className:Wn.default.string,handle:Wn.default.string,cancel:Wn.default.string,droppingPosition:Wn.default.shape({e:Wn.default.object.isRequired,left:Wn.default.number.isRequired,top:Wn.default.number.isRequired})});Ld(B9,"defaultProps",{className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0,transformScale:1});Object.defineProperty(xC,"__esModule",{value:!0});xC.default=void 0;var Um=Fce(I),pD=E9,tze=U9(c3),Ur=En,rze=_f,yK=U9(f3),nze=U9(_h);function U9(e){return e&&e.__esModule?e:{default:e}}function Fce(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(Fce=function(i,a){if(!a&&i&&i.__esModule)return i;var s,o,l={__proto__:null,default:i};if(i===null||typeof i!="object"&&typeof i!="function")return l;if(s=a?n:r){if(s.has(i))return s.get(i);s.set(i,l)}for(const c in i)c!=="default"&&{}.hasOwnProperty.call(i,c)&&((o=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(i,c))&&(o.get||o.set)?s(l,c,o):l[c]=i[c]);return l})(e,t)}function io(e,t,r){return(t=ize(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ize(e){var t=aze(e,"string");return typeof t=="symbol"?t:t+""}function aze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const bK="react-grid-layout";let Lce=!1;try{Lce=/firefox/i.test(navigator.userAgent)}catch{}class y3 extends Um.Component{constructor(){super(...arguments),io(this,"state",{activeDrag:null,layout:(0,Ur.synchronizeLayoutWithChildren)(this.props.layout,this.props.children,this.props.cols,(0,Ur.compactType)(this.props),this.props.allowOverlap),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null,resizing:!1,droppingDOMNode:null,children:[]}),io(this,"dragEnterCounter",0),io(this,"onDragStart",(t,r,n,i)=>{let{e:a,node:s}=i;const{layout:o}=this.state,l=(0,Ur.getLayoutItem)(o,t);if(!l)return;const c={w:l.w,h:l.h,x:l.x,y:l.y,placeholder:!0,i:t};return this.setState({oldDragItem:(0,Ur.cloneLayoutItem)(l),oldLayout:o,activeDrag:c}),this.props.onDragStart(o,l,l,null,a,s)}),io(this,"onDrag",(t,r,n,i)=>{let{e:a,node:s}=i;const{oldDragItem:o}=this.state;let{layout:l}=this.state;const{cols:c,allowOverlap:d,preventCollision:f}=this.props,p=(0,Ur.getLayoutItem)(l,t);if(!p)return;const m={w:p.w,h:p.h,x:p.x,y:p.y,placeholder:!0,i:t};l=(0,Ur.moveElement)(l,p,r,n,!0,f,(0,Ur.compactType)(this.props),c,d),this.props.onDrag(l,o,p,m,a,s),this.setState({layout:d?l:(0,Ur.compact)(l,(0,Ur.compactType)(this.props),c),activeDrag:m})}),io(this,"onDragStop",(t,r,n,i)=>{let{e:a,node:s}=i;if(!this.state.activeDrag)return;const{oldDragItem:o}=this.state;let{layout:l}=this.state;const{cols:c,preventCollision:d,allowOverlap:f}=this.props,p=(0,Ur.getLayoutItem)(l,t);if(!p)return;l=(0,Ur.moveElement)(l,p,r,n,!0,d,(0,Ur.compactType)(this.props),c,f);const x=f?l:(0,Ur.compact)(l,(0,Ur.compactType)(this.props),c);this.props.onDragStop(x,o,p,null,a,s);const{oldLayout:y}=this.state;this.setState({activeDrag:null,layout:x,oldDragItem:null,oldLayout:null}),this.onLayoutMaybeChanged(x,y)}),io(this,"onResizeStart",(t,r,n,i)=>{let{e:a,node:s}=i;const{layout:o}=this.state,l=(0,Ur.getLayoutItem)(o,t);l&&(this.setState({oldResizeItem:(0,Ur.cloneLayoutItem)(l),oldLayout:this.state.layout,resizing:!0}),this.props.onResizeStart(o,l,l,null,a,s))}),io(this,"onResize",(t,r,n,i)=>{let{e:a,node:s,size:o,handle:l}=i;const{oldResizeItem:c}=this.state,{layout:d}=this.state,{cols:f,preventCollision:p,allowOverlap:m}=this.props;let x=!1,y,b,S;const[_,C]=(0,Ur.withLayoutItem)(d,t,j=>{let P;return b=j.x,S=j.y,["sw","w","nw","n","ne"].indexOf(l)!==-1&&(["sw","nw","w"].indexOf(l)!==-1&&(b=j.x+(j.w-r),r=j.x!==b&&b<0?j.w:r,b=b<0?0:b),["ne","n","nw"].indexOf(l)!==-1&&(S=j.y+(j.h-n),n=j.y!==S&&S<0?j.h:n,S=S<0?0:S),x=!0),p&&!m&&(P=(0,Ur.getAllCollisions)(d,{...j,w:r,h:n,x:b,y:S}).filter(D=>D.i!==j.i).length>0,P&&(S=j.y,n=j.h,b=j.x,r=j.w,x=!1)),j.w=r,j.h=n,j});if(!C)return;y=_,x&&(y=(0,Ur.moveElement)(_,C,b,S,!0,this.props.preventCollision,(0,Ur.compactType)(this.props),f,m));const A={w:C.w,h:C.h,x:C.x,y:C.y,static:!0,i:t};this.props.onResize(y,c,C,A,a,s),this.setState({layout:m?y:(0,Ur.compact)(y,(0,Ur.compactType)(this.props),f),activeDrag:A})}),io(this,"onResizeStop",(t,r,n,i)=>{let{e:a,node:s}=i;const{layout:o,oldResizeItem:l}=this.state,{cols:c,allowOverlap:d}=this.props,f=(0,Ur.getLayoutItem)(o,t),p=d?o:(0,Ur.compact)(o,(0,Ur.compactType)(this.props),c);this.props.onResizeStop(p,l,f,null,a,s);const{oldLayout:m}=this.state;this.setState({activeDrag:null,layout:p,oldResizeItem:null,oldLayout:null,resizing:!1}),this.onLayoutMaybeChanged(p,m)}),io(this,"onDragOver",t=>{var _;if(t.preventDefault(),t.stopPropagation(),Lce&&!((_=t.nativeEvent.target)!=null&&_.classList.contains(bK)))return!1;const{droppingItem:r,onDropDragOver:n,margin:i,cols:a,rowHeight:s,maxRows:o,width:l,containerPadding:c,transformScale:d}=this.props,f=n==null?void 0:n(t);if(f===!1)return this.state.droppingDOMNode&&this.removeDroppingPlaceholder(),!1;const p={...r,...f},{layout:m}=this.state,x=t.currentTarget.getBoundingClientRect(),y=t.clientX-x.left,b=t.clientY-x.top,S={left:y/d,top:b/d,e:t};if(this.state.droppingDOMNode){if(this.state.droppingPosition){const{left:C,top:A}=this.state.droppingPosition;(C!=y||A!=b)&&this.setState({droppingPosition:S})}}else{const C={cols:a,margin:i,maxRows:o,rowHeight:s,containerWidth:l,containerPadding:c||i},A=(0,rze.calcXY)(C,b,y,p.w,p.h);this.setState({droppingDOMNode:Um.createElement("div",{key:p.i}),droppingPosition:S,layout:[...m,{...p,x:A.x,y:A.y,static:!1,isDraggable:!0}]})}}),io(this,"removeDroppingPlaceholder",()=>{const{droppingItem:t,cols:r}=this.props,{layout:n}=this.state,i=(0,Ur.compact)(n.filter(a=>a.i!==t.i),(0,Ur.compactType)(this.props),r,this.props.allowOverlap);this.setState({layout:i,droppingDOMNode:null,activeDrag:null,droppingPosition:void 0})}),io(this,"onDragLeave",t=>{t.preventDefault(),t.stopPropagation(),this.dragEnterCounter--,this.dragEnterCounter===0&&this.removeDroppingPlaceholder()}),io(this,"onDragEnter",t=>{t.preventDefault(),t.stopPropagation(),this.dragEnterCounter++}),io(this,"onDrop",t=>{t.preventDefault(),t.stopPropagation();const{droppingItem:r}=this.props,{layout:n}=this.state,i=n.find(a=>a.i===r.i);this.dragEnterCounter=0,this.removeDroppingPlaceholder(),this.props.onDrop(n,i,t)})}componentDidMount(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)}static getDerivedStateFromProps(t,r){let n;return r.activeDrag?null:(!(0,pD.deepEqual)(t.layout,r.propsLayout)||t.compactType!==r.compactType?n=t.layout:(0,Ur.childrenEqual)(t.children,r.children)||(n=r.layout),n?{layout:(0,Ur.synchronizeLayoutWithChildren)(n,t.children,t.cols,(0,Ur.compactType)(t),t.allowOverlap),compactType:t.compactType,children:t.children,propsLayout:t.layout}:null)}shouldComponentUpdate(t,r){return this.props.children!==t.children||!(0,Ur.fastRGLPropsEqual)(this.props,t,pD.deepEqual)||this.state.activeDrag!==r.activeDrag||this.state.mounted!==r.mounted||this.state.droppingPosition!==r.droppingPosition}componentDidUpdate(t,r){if(!this.state.activeDrag){const n=this.state.layout,i=r.layout;this.onLayoutMaybeChanged(n,i)}}containerHeight(){if(!this.props.autoSize)return;const t=(0,Ur.bottom)(this.state.layout),r=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return t*this.props.rowHeight+(t-1)*this.props.margin[1]+r*2+"px"}onLayoutMaybeChanged(t,r){r||(r=this.state.layout),(0,pD.deepEqual)(r,t)||this.props.onLayoutChange(t)}placeholder(){const{activeDrag:t}=this.state;if(!t)return null;const{width:r,cols:n,margin:i,containerPadding:a,rowHeight:s,maxRows:o,useCSSTransforms:l,transformScale:c}=this.props;return Um.createElement(yK.default,{w:t.w,h:t.h,x:t.x,y:t.y,i:t.i,className:`react-grid-placeholder ${this.state.resizing?"placeholder-resizing":""}`,containerWidth:r,cols:n,margin:i,containerPadding:a||i,maxRows:o,rowHeight:s,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:l,transformScale:c},Um.createElement("div",null))}processGridItem(t,r){if(!t||!t.key)return;const n=(0,Ur.getLayoutItem)(this.state.layout,String(t.key));if(!n)return null;const{width:i,cols:a,margin:s,containerPadding:o,rowHeight:l,maxRows:c,isDraggable:d,isResizable:f,isBounded:p,useCSSTransforms:m,transformScale:x,draggableCancel:y,draggableHandle:b,resizeHandles:S,resizeHandle:_}=this.props,{mounted:C,droppingPosition:A}=this.state,j=typeof n.isDraggable=="boolean"?n.isDraggable:!n.static&&d,P=typeof n.isResizable=="boolean"?n.isResizable:!n.static&&f,O=n.resizeHandles||S,D=j&&p&&n.isBounded!==!1;return Um.createElement(yK.default,{containerWidth:i,cols:a,margin:s,containerPadding:o||s,maxRows:c,rowHeight:l,cancel:y,handle:b,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:j,isResizable:P,isBounded:D,useCSSTransforms:m&&C,usePercentages:!C,transformScale:x,w:n.w,h:n.h,x:n.x,y:n.y,i:n.i,minH:n.minH,minW:n.minW,maxH:n.maxH,maxW:n.maxW,static:n.static,droppingPosition:r?A:void 0,resizeHandles:O,resizeHandle:_},t)}render(){const{className:t,style:r,isDroppable:n,innerRef:i}=this.props,a=(0,tze.default)(bK,t),s={height:this.containerHeight(),...r};return Um.createElement("div",{ref:i,className:a,style:s,onDrop:n?this.onDrop:Ur.noop,onDragLeave:n?this.onDragLeave:Ur.noop,onDragEnter:n?this.onDragEnter:Ur.noop,onDragOver:n?this.onDragOver:Ur.noop},Um.Children.map(this.props.children,o=>this.processGridItem(o)),n&&this.state.droppingDOMNode&&this.processGridItem(this.state.droppingDOMNode,!0),this.placeholder())}}xC.default=y3;io(y3,"displayName","ReactGridLayout");io(y3,"propTypes",nze.default);io(y3,"defaultProps",{autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isBounded:!1,isDraggable:!0,isResizable:!0,allowOverlap:!1,isDroppable:!1,useCSSTransforms:!0,transformScale:1,verticalCompact:!0,compactType:"vertical",preventCollision:!1,droppingItem:{i:"__dropping-elem__",h:1,w:1},resizeHandles:["se"],onLayoutChange:Ur.noop,onDragStart:Ur.noop,onDrag:Ur.noop,onDragStop:Ur.noop,onResizeStart:Ur.noop,onResize:Ur.noop,onResizeStop:Ur.noop,onDrop:Ur.noop,onDropDragOver:Ur.noop});var b3={},r1={};Object.defineProperty(r1,"__esModule",{value:!0});r1.findOrGenerateResponsiveLayout=lze;r1.getBreakpointFromWidth=sze;r1.getColsFromBreakpoint=oze;r1.sortBreakpoints=$9;var D_=En;function sze(e,t){const r=$9(e);let n=r[0];for(let i=1,a=r.length;i<a;i++){const s=r[i];t>e[s]&&(n=s)}return n}function oze(e,t){if(!t[e])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+e+" is missing!");return t[e]}function lze(e,t,r,n,i,a){if(e[r])return(0,D_.cloneLayout)(e[r]);let s=e[n];const o=$9(t),l=o.slice(o.indexOf(r));for(let c=0,d=l.length;c<d;c++){const f=l[c];if(e[f]){s=e[f];break}}return s=(0,D_.cloneLayout)(s||[]),(0,D_.compact)((0,D_.correctBounds)(s,{cols:i}),a,i)}function $9(e){return Object.keys(e).sort(function(r,n){return e[r]-e[n]})}Object.defineProperty(b3,"__esModule",{value:!0});b3.default=void 0;var wK=Uce(I),ul=Bce(ap),mD=E9,Fv=En,$m=r1,cze=Bce(xC);function Bce(e){return e&&e.__esModule?e:{default:e}}function Uce(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(Uce=function(i,a){if(!a&&i&&i.__esModule)return i;var s,o,l={__proto__:null,default:i};if(i===null||typeof i!="object"&&typeof i!="function")return l;if(s=a?n:r){if(s.has(i))return s.get(i);s.set(i,l)}for(const c in i)c!=="default"&&{}.hasOwnProperty.call(i,c)&&((o=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(i,c))&&(o.get||o.set)?s(l,c,o):l[c]=i[c]);return l})(e,t)}function V8(){return V8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V8.apply(null,arguments)}function IT(e,t,r){return(t=uze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uze(e){var t=dze(e,"string");return typeof t=="symbol"?t:t+""}function dze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const SK=e=>Object.prototype.toString.call(e);function M_(e,t){return e==null?null:Array.isArray(e)?e:e[t]}class z9 extends wK.Component{constructor(){super(...arguments),IT(this,"state",this.generateInitialState()),IT(this,"onLayoutChange",t=>{this.props.onLayoutChange(t,{...this.props.layouts,[this.state.breakpoint]:t})})}generateInitialState(){const{width:t,breakpoints:r,layouts:n,cols:i}=this.props,a=(0,$m.getBreakpointFromWidth)(r,t),s=(0,$m.getColsFromBreakpoint)(a,i),o=this.props.verticalCompact===!1?null:this.props.compactType;return{layout:(0,$m.findOrGenerateResponsiveLayout)(n,r,a,a,s,o),breakpoint:a,cols:s}}static getDerivedStateFromProps(t,r){if(!(0,mD.deepEqual)(t.layouts,r.layouts)){const{breakpoint:n,cols:i}=r;return{layout:(0,$m.findOrGenerateResponsiveLayout)(t.layouts,t.breakpoints,n,n,i,t.compactType),layouts:t.layouts}}return null}componentDidUpdate(t){(this.props.width!=t.width||this.props.breakpoint!==t.breakpoint||!(0,mD.deepEqual)(this.props.breakpoints,t.breakpoints)||!(0,mD.deepEqual)(this.props.cols,t.cols))&&this.onWidthChange(t)}onWidthChange(t){const{breakpoints:r,cols:n,layouts:i,compactType:a}=this.props,s=this.props.breakpoint||(0,$m.getBreakpointFromWidth)(this.props.breakpoints,this.props.width),o=this.state.breakpoint,l=(0,$m.getColsFromBreakpoint)(s,n),c={...i};if(o!==s||t.breakpoints!==r||t.cols!==n){o in c||(c[o]=(0,Fv.cloneLayout)(this.state.layout));let p=(0,$m.findOrGenerateResponsiveLayout)(c,r,s,o,l,a);p=(0,Fv.synchronizeLayoutWithChildren)(p,this.props.children,l,a,this.props.allowOverlap),c[s]=p,this.props.onBreakpointChange(s,l),this.props.onLayoutChange(p,c),this.setState({breakpoint:s,layout:p,cols:l})}const d=M_(this.props.margin,s),f=M_(this.props.containerPadding,s);this.props.onWidthChange(this.props.width,d,l,f)}render(){const{breakpoint:t,breakpoints:r,cols:n,layouts:i,margin:a,containerPadding:s,onBreakpointChange:o,onLayoutChange:l,onWidthChange:c,...d}=this.props;return wK.createElement(cze.default,V8({},d,{margin:M_(a,this.state.breakpoint),containerPadding:M_(s,this.state.breakpoint),onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))}}b3.default=z9;IT(z9,"propTypes",{breakpoint:ul.default.string,breakpoints:ul.default.object,allowOverlap:ul.default.bool,cols:ul.default.object,margin:ul.default.oneOfType([ul.default.array,ul.default.object]),containerPadding:ul.default.oneOfType([ul.default.array,ul.default.object]),layouts(e,t){if(SK(e[t])!=="[object Object]")throw new Error("Layout property must be an object. Received: "+SK(e[t]));Object.keys(e[t]).forEach(r=>{if(!(r in e.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,Fv.validateLayout)(e.layouts[r],"layouts."+r)})},width:ul.default.number.isRequired,onBreakpointChange:ul.default.func,onLayoutChange:ul.default.func,onWidthChange:ul.default.func});IT(z9,"defaultProps",{breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},containerPadding:{lg:null,md:null,sm:null,xs:null,xxs:null},layouts:{},margin:[10,10],allowOverlap:!1,onBreakpointChange:Fv.noop,onLayoutChange:Fv.noop,onWidthChange:Fv.noop});var H9={},$ce=function(){if(typeof Map<"u")return Map;function e(t,r){var n=-1;return t.some(function(i,a){return i[0]===r?(n=a,!0):!1}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var n=e(this.__entries__,r),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(r,n){var i=e(this.__entries__,r);~i?this.__entries__[i][1]=n:this.__entries__.push([r,n])},t.prototype.delete=function(r){var n=this.__entries__,i=e(n,r);~i&&n.splice(i,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var i=0,a=this.__entries__;i<a.length;i++){var s=a[i];r.call(n,s[1],s[0])}},t}()}(),q8=typeof window<"u"&&typeof document<"u"&&window.document===document,OT=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),fze=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(OT):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),hze=2;function pze(e,t){var r=!1,n=!1,i=0;function a(){r&&(r=!1,e()),n&&o()}function s(){fze(a)}function o(){var l=Date.now();if(r){if(l-i<hze)return;n=!0}else r=!0,n=!1,setTimeout(s,t);i=l}return o}var mze=20,gze=["top","right","bottom","left","width","height","size","weight"],xze=typeof MutationObserver<"u",vze=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=pze(this.refresh.bind(this),mze)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,n=r.indexOf(t);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!q8||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),xze?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!q8||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,n=r===void 0?"":r,i=gze.some(function(a){return!!~n.indexOf(a)});i&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),zce=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},ky=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||OT},Hce=w3(0,0,0,0);function PT(e){return parseFloat(e)||0}function EK(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(n,i){var a=e["border-"+i+"-width"];return n+PT(a)},0)}function yze(e){for(var t=["top","right","bottom","left"],r={},n=0,i=t;n<i.length;n++){var a=i[n],s=e["padding-"+a];r[a]=PT(s)}return r}function bze(e){var t=e.getBBox();return w3(0,0,t.width,t.height)}function wze(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return Hce;var n=ky(e).getComputedStyle(e),i=yze(n),a=i.left+i.right,s=i.top+i.bottom,o=PT(n.width),l=PT(n.height);if(n.boxSizing==="border-box"&&(Math.round(o+a)!==t&&(o-=EK(n,"left","right")+a),Math.round(l+s)!==r&&(l-=EK(n,"top","bottom")+s)),!Eze(e)){var c=Math.round(o+a)-t,d=Math.round(l+s)-r;Math.abs(c)!==1&&(o-=c),Math.abs(d)!==1&&(l-=d)}return w3(i.left,i.top,o,l)}var Sze=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof ky(e).SVGGraphicsElement}:function(e){return e instanceof ky(e).SVGElement&&typeof e.getBBox=="function"}}();function Eze(e){return e===ky(e).document.documentElement}function Cze(e){return q8?Sze(e)?bze(e):wze(e):Hce}function kze(e){var t=e.x,r=e.y,n=e.width,i=e.height,a=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,s=Object.create(a.prototype);return zce(s,{x:t,y:r,width:n,height:i,top:r,right:t+n,bottom:i+r,left:t}),s}function w3(e,t,r,n){return{x:e,y:t,width:r,height:n}}var _ze=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=w3(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=Cze(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),Nze=function(){function e(t,r){var n=kze(r);zce(this,{target:t,contentRect:n})}return e}(),Aze=function(){function e(t,r,n){if(this.activeObservations_=[],this.observations_=new $ce,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=n}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof ky(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)||(r.set(t,new _ze(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof ky(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)&&(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new Nze(n.target,n.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),Wce=typeof WeakMap<"u"?new WeakMap:new $ce,Vce=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=vze.getInstance(),n=new Aze(t,r,this);Wce.set(this,n)}return e}();["observe","unobserve","disconnect"].forEach(function(e){Vce.prototype[e]=function(){var t;return(t=Wce.get(this))[e].apply(t,arguments)}});var Tze=function(){return typeof OT.ResizeObserver<"u"?OT.ResizeObserver:Vce}();const Ize=Object.freeze(Object.defineProperty({__proto__:null,default:Tze},Symbol.toStringTag,{value:"Module"})),Oze=fCe(Ize);Object.defineProperty(H9,"__esModule",{value:!0});H9.default=Lze;var F_=qce(I),Pze=W9(ap),Rze=W9(Oze),jze=W9(c3);function W9(e){return e&&e.__esModule?e:{default:e}}function qce(e,t){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(qce=function(i,a){if(!a&&i&&i.__esModule)return i;var s,o,l={__proto__:null,default:i};if(i===null||typeof i!="object"&&typeof i!="function")return l;if(s=a?n:r){if(s.has(i))return s.get(i);s.set(i,l)}for(const c in i)c!=="default"&&{}.hasOwnProperty.call(i,c)&&((o=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(i,c))&&(o.get||o.set)?s(l,c,o):l[c]=i[c]);return l})(e,t)}function G8(){return G8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},G8.apply(null,arguments)}function $1(e,t,r){return(t=Dze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dze(e){var t=Mze(e,"string");return typeof t=="symbol"?t:t+""}function Mze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const Fze="react-grid-layout";function Lze(e){var t;return t=class extends F_.Component{constructor(){super(...arguments),$1(this,"state",{width:1280}),$1(this,"elementRef",F_.createRef()),$1(this,"mounted",!1),$1(this,"resizeObserver",void 0)}componentDidMount(){this.mounted=!0,this.resizeObserver=new Rze.default(i=>{if(this.elementRef.current instanceof HTMLElement){const s=i[0].contentRect.width;this.setState({width:s})}});const n=this.elementRef.current;n instanceof HTMLElement&&this.resizeObserver.observe(n)}componentWillUnmount(){this.mounted=!1;const n=this.elementRef.current;n instanceof HTMLElement&&this.resizeObserver.unobserve(n),this.resizeObserver.disconnect()}render(){const{measureBeforeMount:n,...i}=this.props;return n&&!this.mounted?F_.createElement("div",{className:(0,jze.default)(this.props.className,Fze),style:this.props.style,ref:this.elementRef}):F_.createElement(e,G8({innerRef:this.elementRef},i,this.state))}},$1(t,"defaultProps",{measureBeforeMount:!1}),$1(t,"propTypes",{measureBeforeMount:Pze.default.bool}),t}(function(e){e.exports=xC.default,e.exports.utils=En,e.exports.calculateUtils=_f,e.exports.Responsive=b3.default,e.exports.Responsive.utils=r1,e.exports.WidthProvider=H9.default})(sce);var CK=sce.exports;const Bze=({project:e,onClose:t,onSave:r})=>{const[n,i]=I.useState({projectName:"",projectType:""});I.useEffect(()=>{e&&i({projectName:e.projectName,projectType:e.projectType})},[e]);const a=o=>{const{name:l,value:c}=o.target;i(d=>({...d,[l]:c}))},s=async o=>{if(o.preventDefault(),!n.projectName.trim()){alert("Project name is required.");return}try{await r({id:e.id,...n}),t()}catch(l){console.error("Failed to update project:",l)}};return u.jsx("div",{className:"fixed inset-0 bg-scrim/60 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-2xl shadow-2xl w-full max-w-lg border border-outline/20",onClick:o=>o.stopPropagation(),children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Edit Project Details"}),u.jsx("button",{onClick:t,className:"text-text-secondary hover:text-text-primary p-2 rounded-full hover:bg-surface-container-highest transition-colors",children:u.jsx(tn,{size:20})})]}),u.jsxs("form",{onSubmit:s,children:[u.jsxs("div",{className:"space-y-5",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"projectName",className:"block text-sm font-medium text-text-secondary mb-1.5 ml-1",children:"Project Name"}),u.jsx("input",{type:"text",id:"projectName",name:"projectName",value:n.projectName,onChange:a,className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none transition-all",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"projectType",className:"block text-sm font-medium text-text-secondary mb-1.5 ml-1",children:"Project Type"}),u.jsx("select",{id:"projectType",name:"projectType",value:n.projectType,onChange:a,className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none transition-all cursor-pointer",children:Dv.map(o=>u.jsx("option",{value:o,children:o},o))})]})]}),u.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[u.jsx("button",{type:"button",onClick:t,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors",children:"Cancel"}),u.jsx("button",{type:"submit",className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all active:scale-95",children:"Save Changes"})]})]})]})})},Uze=({changeOrder:e,acceptedQuotes:t,onClose:r,onSave:n})=>{var y;const{currentUser:i}=Xr(),{deleteChangeOrder:a}=J7(),[s,o]=I.useState({description:"",amount:"",type:"Materials",quoteId:void 0}),[l,c]=I.useState(!1),[d,f]=I.useState(!1);I.useEffect(()=>{e&&o({description:e.description,amount:String(e.amount),type:e.type,quoteId:e.quoteId})},[e]);const p=b=>{const{name:S,value:_}=b.target,C=S==="quoteId"?_?parseInt(_,10):null:_;o(A=>({...A,[S]:C}))},m=async b=>{if(b.preventDefault(),!s.description.trim()||!s.amount.trim()){alert("Description and amount are required.");return}c(!0);try{await n({description:s.description,amount:parseFloat(s.amount),type:s.type,quoteId:s.quoteId})}catch(S){console.error("Failed to update change order:",S)}finally{c(!1)}},x=async()=>{if(window.confirm("Are you sure you want to permanently delete this change order?")){f(!0);try{await a(e.id),Re.success("Change order deleted successfully."),r()}catch(b){Re.error(b.message),console.error("Failed to delete change order:",b)}finally{f(!1)}}};return u.jsx("div",{className:"fixed inset-0 bg-scrim/60 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-2xl shadow-2xl w-full max-w-lg border border-outline/20",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Edit Change Order"}),u.jsx("button",{onClick:r,className:"text-text-secondary hover:text-text-primary p-2 rounded-full hover:bg-surface-container-highest transition-colors",children:u.jsx(tn,{size:20})})]}),u.jsxs("form",{onSubmit:m,className:"flex flex-col",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-text-secondary mb-1",children:"Description"}),u.jsx("input",{type:"text",id:"description",name:"description",value:s.description,onChange:p,className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-text-secondary mb-1",children:"Amount"}),u.jsx("input",{type:"number",step:"0.01",id:"amount",name:"amount",value:s.amount,onChange:p,placeholder:"e.g., -50.00",className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-text-secondary mb-1",children:"Type"}),u.jsxs("select",{id:"type",name:"type",value:s.type,onChange:p,className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",children:[u.jsx("option",{value:"Materials",children:"Materials"}),u.jsx("option",{value:"Labor",children:"Labor"})]})]}),t&&t.length>1&&u.jsxs("div",{children:[u.jsx("label",{htmlFor:"quoteId",className:"block text-sm font-medium text-text-secondary mb-1",children:"For Quote"}),u.jsx("select",{id:"quoteId",name:"quoteId",value:s.quoteId||"",onChange:p,className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",children:t.map((b,S)=>u.jsxs("option",{value:b.id,children:["Quote #",S+1]},b.id))})]})]}),u.jsxs("div",{className:"flex items-center gap-3 mt-8",children:[((y=i==null?void 0:i.roles)==null?void 0:y.includes("Admin"))&&u.jsxs("button",{type:"button",onClick:x,disabled:l||d,className:"py-3 px-6 rounded-full bg-error hover:bg-error-hover text-on-error font-semibold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed mr-auto transition-all shadow-md",children:[u.jsx(wo,{size:16}),d?"Deleting...":"Delete"]}),u.jsxs("div",{className:"flex items-center justify-end gap-3 flex-grow",children:[u.jsx("button",{type:"button",onClick:r,disabled:l||d,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors disabled:opacity-50",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:l||d,className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all disabled:opacity-50",children:l?"Saving...":"Save Changes"})]})]})]})]})})},$ze=e=>{switch(e){case sr.SCHEDULED:return"bg-green-500 text-white";case sr.ACCEPTED:return"bg-teal-500 text-white";case sr.QUOTING:return"bg-accent text-on-accent";case sr.SAMPLE_CHECKOUT:return"bg-yellow-500 text-gray-800";case sr.AWAITING_DECISION:return"bg-secondary text-on-secondary";case sr.NEW:return"bg-gray-500 text-white";case sr.COMPLETED:return"bg-indigo-500 text-white";case sr.CANCELLED:return"bg-red-700 text-white";default:return"bg-secondary text-on-secondary"}},zze=({project:e,customer:t,activeInstaller:r,projectLead:n,currentUser:i,updateProject:a,onEdit:s,onDeleteProject:o,isDeleting:l,isLayoutEditMode:c,onSaveLayout:d,onCancelLayout:f,onResetLayout:p})=>{var j,P,O;const{users:m,systemBranding:x}=Xr(),[y,b]=I.useState(!1),S=I.useRef(null);I.useEffect(()=>{const D=L=>{S.current&&!S.current.contains(L.target)&&b(!1)};return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[]);const _=D=>{a({id:e.id,status:D}),b(!1)};sr.NEW,sr.SAMPLE_CHECKOUT,sr.AWAITING_DECISION,sr.QUOTING,sr.ACCEPTED,sr.SCHEDULED,sr.COMPLETED,sr.CANCELLED,sr.CLOSED;const C=t!=null&&t.address?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t.address)}`:"#",A=df(e.createdAt,x==null?void 0:x.systemTimezone);return u.jsxs("div",{className:"bg-surface rounded-lg shadow-md p-6 border border-border",children:[u.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start gap-4 mb-6",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:e.projectName}),c&&u.jsx("button",{onClick:s,className:"p-1.5 text-text-secondary hover:text-text-primary rounded-md bg-background border border-border hover:border-primary transition-all",title:"Edit Project Details",children:u.jsx(fx,{size:16})})]}),u.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[u.jsxs("span",{className:"flex items-center gap-1 text-xs font-medium px-2.5 py-0.5 rounded bg-background border border-border text-text-secondary",children:[u.jsx(C8,{size:12})," ",e.projectType]}),u.jsxs("span",{className:"flex items-center gap-1 text-xs font-medium px-2.5 py-0.5 rounded bg-background border border-border text-text-secondary",children:[u.jsx(Cu,{size:12})," Created: ",A]})]})]}),u.jsxs("div",{className:"flex items-center gap-3 w-full lg:w-auto",children:[c?u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:p,className:"flex items-center px-3 py-2 text-sm font-medium text-yellow-600 bg-yellow-50 hover:bg-yellow-100 rounded-md transition-colors",title:"Reset Default Layout",children:[u.jsx(e1,{size:16,className:"mr-1"})," Reset"]}),u.jsxs("button",{onClick:f,className:"flex items-center px-3 py-2 text-sm font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded-md transition-colors",title:"Cancel Changes",children:[u.jsx(tn,{size:16,className:"mr-1"})," Cancel"]}),u.jsxs("button",{onClick:d,className:"flex items-center px-3 py-2 text-sm font-medium text-white bg-primary hover:bg-primary-hover rounded-md shadow-sm transition-colors",title:"Save Layout Changes",children:[u.jsx(Cs,{size:16,className:"mr-1"})," Save"]})]}):u.jsx(u.Fragment,{children:((j=i==null?void 0:i.roles)==null?void 0:j.includes("Admin"))&&u.jsxs("button",{onClick:o,disabled:l,className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-text-secondary hover:text-red-600 hover:bg-red-50 rounded-md transition-colors border border-transparent hover:border-red-100",children:[u.jsx(wo,{size:16}),l?"Deleting...":"Delete"]})}),u.jsxs("div",{className:"relative",ref:S,children:[u.jsxs("button",{onClick:()=>c&&b(!y),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold uppercase tracking-wide transition-all shadow-sm 
                                ${$ze(e.status)}
                                ${c?"cursor-pointer hover:ring-2 ring-primary ring-offset-1":"cursor-default"}
                            `,children:[e.status.replace(/_/g," "),c&&u.jsx(fx,{size:14,className:"opacity-70"})]}),y&&u.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-surface border border-border rounded-lg shadow-xl z-50 overflow-hidden",children:Object.values(sr).map(D=>u.jsx("button",{onClick:()=>_(D),className:`w-full text-left px-4 py-3 text-sm hover:bg-background transition-colors ${e.status===D?"font-bold text-primary bg-primary/5":"text-text-primary"}`,children:D},D))})]})]})]}),u.jsx("div",{className:"h-px bg-border my-4"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsxs("h3",{className:"text-xs font-bold text-text-tertiary uppercase tracking-wider mb-2 flex items-center gap-1",children:[u.jsx(pc,{size:12})," Customer"]}),u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsx(ui,{to:`/customers/${t==null?void 0:t.id}`,className:"font-semibold text-text-primary text-lg hover:text-primary transition-colors",children:(t==null?void 0:t.fullName)||"Unknown Customer"}),(t==null?void 0:t.phoneNumber)&&u.jsxs("div",{className:"flex items-center text-text-secondary text-sm pt-1",children:[u.jsx("span",{className:"mx-2 text-text-tertiary",children:""}),u.jsx(I0,{size:14,className:"mr-1 text-text-tertiary"}),u.jsx("a",{href:`tel:${t.phoneNumber}`,className:"hover:underline hover:text-primary",children:t.phoneNumber})]})]}),t!=null&&t.address?u.jsxs("a",{href:C,target:"_blank",rel:"noreferrer",className:"flex items-center gap-1.5 text-text-secondary hover:text-primary transition-colors text-sm group",children:[u.jsx(G4,{size:14,className:"text-text-tertiary group-hover:text-primary shrink-0"}),t.address]}):u.jsx("span",{className:"text-text-tertiary text-sm italic pl-5",children:"No address on file"})]}),r&&u.jsxs("div",{className:"space-y-1",children:[u.jsxs("h3",{className:"text-xs font-bold text-text-tertiary uppercase tracking-wider mb-2 flex items-center gap-1",children:[u.jsx(gFe,{size:12})," Installer"]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-xs shadow-sm",style:{backgroundColor:r.color||"#6b7280"},children:r.installerName.substring(0,2).toUpperCase()}),u.jsxs("div",{children:[u.jsx("div",{className:"font-semibold text-text-primary",children:r.installerName}),u.jsx("div",{className:"text-xs text-text-secondary",children:r.contactPhone||r.contactEmail||"No contact info"})]})]})]}),n&&u.jsxs("div",{className:"space-y-1",children:[u.jsxs("h3",{className:"text-xs font-bold text-text-tertiary uppercase tracking-wider mb-2 flex items-center gap-1",children:[u.jsx(zh,{size:12})," Project Lead"]}),u.jsxs("div",{className:"flex items-center gap-3",children:[n.avatarUrl?u.jsx("img",{src:Ma(n.avatarUrl),alt:"Lead",className:"w-8 h-8 rounded-full object-cover shadow-sm"}):u.jsxs("div",{className:"w-8 h-8 rounded-full bg-accent text-on-accent flex items-center justify-center font-bold text-xs",children:[(P=n.firstName)==null?void 0:P[0],(O=n.lastName)==null?void 0:O[0]]}),u.jsxs("div",{children:[u.jsxs("div",{className:"font-semibold text-text-primary",children:[n.firstName," ",n.lastName]}),u.jsx("div",{className:"text-xs text-text-secondary",children:n.email})]})]})]})]})]})},Hze=({selectedProjectId:e,onProjectSelect:t})=>{const{data:r=[],isLoading:n}=np(),{data:i=[],isLoading:a}=Xx(),[s,o]=I.useState(""),[l,c]=I.useState(!1),d=n||a,f=I.useMemo(()=>!r||!i?[]:r.map(x=>{const y=i.find(b=>b.id===x.customerId);return{...x,customerName:y?y.fullName:"Unknown Customer"}}),[r,i]),p=I.useMemo(()=>{if(!s)return f.slice(0,10);const x=s.toLowerCase();return f.filter(y=>y.projectName.toLowerCase().includes(x)||y.customerName.toLowerCase().includes(x))},[s,f]),m=f.find(x=>x.id===e);return u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 cursor-pointer flex justify-between items-center",onClick:()=>c(!l),children:[u.jsx("span",{className:m?"text-text-primary":"text-text-tertiary",children:m?`${m.projectName} (${m.customerName})`:"Select a Project..."}),u.jsx(Yo,{size:18,className:"text-text-secondary"})]}),l&&u.jsxs("div",{className:"absolute z-20 w-full bg-surface-container-high border border-outline/20 rounded-lg mt-1 shadow-xl max-h-72 overflow-y-auto flex flex-col",children:[u.jsx("div",{className:"p-2 sticky top-0 bg-surface-container-high border-b border-outline/10",children:u.jsx("input",{type:"text",placeholder:"Search projects...",autoFocus:!0,className:"w-full bg-surface-container border border-outline/50 rounded-md px-2 py-1 text-sm text-text-primary",value:s,onChange:x=>o(x.target.value)})}),d?u.jsxs("div",{className:"p-4 text-center text-text-secondary text-sm flex items-center justify-center gap-2",children:[u.jsx(q4,{size:16,className:"animate-spin"})," Loading..."]}):p.length===0?u.jsx("div",{className:"p-4 text-center text-text-secondary text-sm",children:"No projects found."}):u.jsx("div",{className:"overflow-y-auto",children:p.map(x=>u.jsxs("div",{onClick:()=>{t(x),c(!1),o("")},className:`px-4 py-3 hover:bg-primary-container/30 cursor-pointer flex justify-between items-center ${e===x.id?"bg-primary-container/50":""}`,children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-text-primary font-medium text-sm",children:x.projectName}),u.jsx("div",{className:"text-text-secondary text-xs",children:x.customerName})]}),e===x.id&&u.jsx(pd,{size:16,className:"text-primary"})]},x.id))})]}),l&&u.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>c(!1)})]})},L_=(e,t,r)=>`${e} - ${t}${r?` (${r})`:""}`,kK=e=>e?new Date(e).toISOString().split("T")[0]:"",RT=({isOpen:e,onClose:t,editingOrder:r=null,initialProjectId:n=null,prefillData:i=null})=>{const{data:a=[]}=wb(),{data:s=[]}=F4(),{data:o=[]}=np();Yle();const{addMaterialOrder:l,updateMaterialOrder:c}=$4();console.log("AddEditMaterialOrderModal Render:",{addMaterialOrderType:typeof l,addMaterialOrderValue:l});const{data:d=[]}=qs({queryKey:["material_orders","history",r==null?void 0:r.id],queryFn:()=>yoe(r.id),enabled:!!r}),[f,p]=I.useState(n),[m,x]=I.useState(null),[y,b]=I.useState(""),[S,_]=I.useState(""),[C,A]=I.useState("Customer"),[j,P]=I.useState([]),[O,D]=I.useState(""),[L,B]=I.useState(null),[H,z]=I.useState(!1),[ie,X]=I.useState(!1),[W,Q]=I.useState(""),te=o.find(V=>V.id===f),J=I.useMemo(()=>s.filter(V=>V.vendorType==="Supplier"||V.vendorType==="Both"),[s]),[Y,pe]=I.useState(null);I.useEffect(()=>{(async()=>{try{pe(await Qx())}catch{console.error("Failed to load pricing settings.")}})()},[]);const _e=I.useMemo(()=>!y.trim()||m?[]:J.filter(V=>V.name.toLowerCase().includes(y.toLowerCase())),[J,y,m]),ee=I.useMemo(()=>{if(O.length<2)return[];const V=O.toLowerCase(),Ae=[];return a.forEach(Pe=>{const ze=(Pe.name||"").toLowerCase().includes(V)||(Pe.manufacturerName||"").toLowerCase().includes(V);Pe.variants.forEach(De=>{const $e=(De.name||"").toLowerCase().includes(V)||(De.sku||"").toLowerCase().includes(V);(ze||$e)&&Ae.push({product:Pe,variant:De})})}),Ae},[a,O]),de=V=>{x(V);const Ae=s.find(Pe=>Pe.id===V);if(b((Ae==null?void 0:Ae.name)||""),(Ae==null?void 0:Ae.dedicatedShippingDay)!==null&&(Ae==null?void 0:Ae.dedicatedShippingDay)!==void 0){const Pe=Ae.dedicatedShippingDay,ze=new Date;let De=Pe-ze.getDay();De<=0&&(De+=7),De<7&&(De+=7);const $e=new Date;$e.setDate(ze.getDate()+De),_(kK($e.toISOString()))}else _("")};I.useEffect(()=>{if(e)if(r){p(r.projectId),x(r.supplierId||null);const V=s.find(Pe=>Pe.id===r.supplierId);b((V==null?void 0:V.name)||""),A(r.purchaserType||"Customer"),_(kK(r.etaDate)),Q(r.notes||"");const Ae=r.lineItems.map(Pe=>{let ze,De;for(const et of a){const ut=et.variants.find(kt=>Number(kt.id)===Pe.variantId||String(kt.id)===String(Pe.variantId));if(ut){ze=et,De=ut;break}}if(!ze||!De)return null;let $e=Pe.unitPriceSold!==null&&Pe.unitPriceSold!==void 0?Pe.unitPriceSold.toFixed(2):Pe.totalCost&&Pe.quantity?(Pe.totalCost/Pe.quantity).toFixed(2):"";return{product:ze,variant:De,quantity:String(Pe.quantity),unit:Pe.unit||De.pricingUnit||De.uom||"SF",totalCost:Pe.totalCost!=null?String(Pe.totalCost):"",unitSellPrice:$e}}).filter(Boolean);P(Ae)}else if(i){p(i.projectId);const V=i.product.supplierId||i.product.manufacturerId,Ae=s.find(ze=>ze.id===V);Ae?de(Ae.id):(x(null),b(""));let Pe="";if(Y&&i.variant.unitCost){const ze=kh(Ae,Y,C);Pe=Ch(Number(i.variant.unitCost),ze.percentage,ze.method).toFixed(2)}else i.variant.retailPrice&&(Pe=Number(i.variant.retailPrice).toFixed(2));P([{product:i.product,variant:i.variant,quantity:"1",unit:i.variant.pricingUnit||i.variant.uom||"SF",totalCost:Pe,unitSellPrice:Pe}])}else p(n),x(null),b(""),A("Customer"),_(""),P([]),Q("")},[r,e,n,a,s,i,Y]);const G=(V,Ae)=>{B({product:V,variant:Ae}),D(L_(V.name,Ae.name,Ae.size))},q=V=>{A(V),Y&&j.length>0&&P(Ae=>Ae.map(Pe=>{if(Pe.variant.unitCost){const ze=Pe.product.supplierId||Pe.product.manufacturerId,De=s.find(ht=>ht.id===ze),$e=kh(De,Y,V),et=Ch(Number(Pe.variant.unitCost),$e.percentage,$e.method),ut=et.toFixed(2),kt=parseFloat(Pe.quantity)||0;return{...Pe,unitSellPrice:ut,totalCost:(kt*et).toFixed(2)}}return Pe}))},ne=()=>{if(L&&!j.some(V=>V.variant.id===L.variant.id)){let V="",Ae=L.variant.pricingUnit||L.variant.uom||"SF";if(Y&&L.variant.unitCost){const Pe=s.find($e=>$e.id===(L.product.supplierId||L.product.manufacturerId)),ze=kh(Pe,Y,C);V=Ch(Number(L.variant.unitCost),ze.percentage,ze.method).toFixed(2)}else L.variant.retailPrice&&(V=Number(L.variant.retailPrice).toFixed(2));if(P(Pe=>[...Pe,{product:L.product,variant:L.variant,quantity:"1",unit:Ae,totalCost:V,unitSellPrice:V}]),!m&&L.product.supplierId)de(L.product.supplierId);else if(!m&&L.product.manufacturerId){const Pe=s.find(ze=>ze.id===L.product.manufacturerId);Pe&&(Pe.vendorType==="Supplier"||Pe.vendorType==="Both")?de(Pe.id):Pe&&Pe.defaultSupplierId&&de(Pe.defaultSupplierId)}D(""),B(null)}},Se=I.useCallback((V,Ae,Pe)=>{P(ze=>{const De=[...ze];De[V][Ae]=Pe;const $e=De[V];if(Ae==="quantity"||Ae==="unitSellPrice"){const et=parseFloat(Ae==="quantity"?Pe:$e.quantity),ut=parseFloat(Ae==="unitSellPrice"?Pe:$e.unitSellPrice||"0");!isNaN(et)&&!isNaN(ut)?De[V].totalCost=(et*ut).toFixed(2):De[V].totalCost=""}return De})},[]),re=V=>{P(Ae=>Ae.filter(Pe=>Pe.variant.id!==V))},ae=I.useCallback(V=>{const Ae=j[V],Pe=Number(Ae.variant.cartonSize||0),ze=parseFloat(Ae.quantity);if(!ze||!Pe)return;const De=Math.ceil(ze/Pe),et=(parseFloat(Ae.unitSellPrice||"0")*Pe).toFixed(2),ut=(De*parseFloat(et)).toFixed(2);P(kt=>{const ht=[...kt];return ht[V]={...ht[V],quantity:String(De),unit:"Carton",unitSellPrice:et,totalCost:ut},ht})},[j]),ge=async V=>{if(V.preventDefault(),!f){Re.error("Please select a project.");return}if(!m){Re.error("Please select a supplier.");return}if(j.length===0){Re.error("Please add at least one line item.");return}X(!0);const Ae=j.map(ze=>({sampleId:ze.variant.id,variantId:ze.variant.id,quantity:parseFloat(ze.quantity)||0,unit:ze.unit,totalCost:ze.totalCost?parseFloat(ze.totalCost):null,unitPriceSold:ze.unitSellPrice?parseFloat(ze.unitSellPrice):null})),Pe={supplierId:m,etaDate:S||null,purchaserType:C,lineItems:Ae,notes:W};console.log("Submitting Order:",{editingOrder:!!r,orderData:Pe});try{r?(console.log("Calling updateMaterialOrder..."),await c({id:r.id,data:Pe}),Re.success("Order updated successfully")):(console.log("Calling addMaterialOrder..."),await l({...Pe,projectId:f}),Re.success("Order created successfully")),t()}catch(ze){console.error("Failed to save order:",ze),Re.error("Failed to save order.")}finally{X(!1)}};if(!e)return null;const Ee=r?"Edit Material Order":"Create Material Order";return u.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/75 overflow-y-auto",children:[u.jsx("div",{className:"block w-full h-full lg:flex lg:items-center lg:justify-center lg:p-4 lg:min-h-full",children:u.jsxs("div",{className:"bg-surface-container-high w-full min-h-full lg:min-h-0 lg:h-auto lg:max-h-[90vh] lg:max-w-4xl lg:rounded-2xl shadow-2xl flex flex-col border border-outline/10 relative",children:[u.jsxs("div",{className:"p-4 md:p-6 border-b border-outline/10 flex justify-between items-center bg-surface-container-low lg:rounded-t-2xl sticky top-0 z-10",children:[u.jsxs("h2",{className:"text-2xl font-bold text-text-primary flex items-center gap-2",children:[u.jsx(dx,{className:"text-primary"}),Ee]}),u.jsx("button",{onClick:t,className:"p-2 hover:bg-surface-container-highest rounded-full text-text-secondary hover:text-text-primary transition-colors",children:u.jsx(tn,{size:24})})]}),u.jsxs("form",{onSubmit:ge,className:"flex flex-col flex-grow",children:[u.jsxs("div",{className:"p-6 overflow-y-auto flex-grow",children:[!n&&!r&&u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Project"}),u.jsx(Hze,{onProjectSelect:V=>p(V.id),selectedProjectId:f})]}),i&&f&&u.jsxs("div",{className:"mb-6 p-4 bg-primary-container/20 border border-primary-container rounded-xl text-sm text-primary flex items-center gap-2",children:[u.jsx(dC,{size:18}),"Order initiated from selected sample in project ",u.jsx("strong",{children:te==null?void 0:te.projectName}),"."]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[u.jsxs("div",{className:"relative md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Supplier"}),u.jsx("input",{type:"text",placeholder:"Search for a supplier...",value:y,onChange:V=>{b(V.target.value),x(null)},className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors",required:!0}),y&&!m&&u.jsxs("div",{className:"absolute z-20 w-full bg-surface-container-highest border border-outline/10 rounded-b-md mt-1 max-h-40 overflow-y-auto shadow-xl",children:[_e.map(V=>u.jsx("div",{onClick:()=>de(V.id),className:"p-2 hover:bg-background cursor-pointer text-text-primary",children:V.name},V.id)),u.jsx("div",{onClick:()=>z(!0),className:"p-2 text-accent font-semibold hover:bg-background hover:text-text-primary cursor-pointer text-center border-t border-border",children:"+ Add New Supplier"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"ETA"}),u.jsx("input",{type:"date",value:S,onChange:V=>_(V.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Purchaser"}),u.jsxs("div",{className:"flex bg-surface-container-highest p-1 rounded-lg border border-outline/10",children:[u.jsx("button",{type:"button",onClick:()=>q("Customer"),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors ${C==="Customer"?"bg-surface shadow-sm text-primary":"text-text-secondary hover:text-text-primary"}`,children:"Customer"}),u.jsx("button",{type:"button",onClick:()=>q("Installer"),className:`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors ${C==="Installer"?"bg-surface shadow-sm text-primary":"text-text-secondary hover:text-text-primary"}`,children:"Installer"})]})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-text-secondary mb-1",children:"Notes"}),u.jsx("textarea",{id:"notes",value:W,onChange:V=>Q(V.target.value),rows:2,className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors",placeholder:"Delivery instructions..."})]})]}),u.jsxs("div",{className:"bg-surface-container-low p-4 rounded-xl border border-outline/10 mb-6",children:[u.jsx("h3",{className:"font-semibold mb-3 text-text-primary",children:"Line Items"}),u.jsx("div",{className:"space-y-2 mb-4",children:j.map((V,Ae)=>{const Pe=Number(V.variant.cartonSize||0),ze=V.variant.uom||"SF";return u.jsxs("div",{className:"bg-surface-container-highest border border-outline/5 p-4 rounded-xl mb-3 relative",children:[u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-[1.5fr,1fr,auto,auto,auto,auto,auto] items-end gap-3 md:gap-2",children:[u.jsxs("div",{className:"flex flex-col overflow-hidden col-span-2 md:col-span-1 pr-6 md:pr-0",children:[u.jsx("label",{className:"text-[9px] text-text-secondary uppercase mb-1",children:"Product"}),u.jsx("span",{className:"text-sm text-text-primary md:truncate font-medium leading-tight",title:L_(V.product.name,V.variant.name,V.variant.size),children:L_(V.product.name,V.variant.name,V.variant.size)})]}),u.jsxs("div",{className:"flex flex-col col-span-2 md:col-span-1",children:[u.jsx("label",{className:"text-[9px] text-text-secondary uppercase mb-1",children:"SKU"}),u.jsx("span",{className:"text-sm text-text-secondary p-1.5 bg-surface-container rounded-md border border-outline/10 truncate",children:V.variant.sku||"-"})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-[9px] text-text-secondary uppercase mb-1",children:"Qty"}),u.jsx("input",{type:"number",placeholder:"Qty",value:V.quantity,onChange:De=>Se(Ae,"quantity",De.target.value),className:"w-full md:w-20 p-1.5 bg-surface-container rounded-md border-transparent text-sm text-text-primary text-center font-bold"})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-[9px] text-text-secondary uppercase mb-1",children:"Unit"}),u.jsx("select",{value:V.unit,onChange:De=>Se(Ae,"unit",De.target.value),className:"w-full md:w-16 p-1.5 bg-surface-container rounded-md border-transparent text-sm appearance-none text-center text-text-primary cursor-pointer font-medium",children:gh.map(De=>u.jsx("option",{value:De,children:De},De))})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-[9px] text-text-secondary uppercase mb-1",children:"Price"}),u.jsx("input",{type:"number",step:"0.01",placeholder:"Price",value:V.unitSellPrice||"",onChange:De=>Se(Ae,"unitSellPrice",De.target.value),className:"w-full md:w-24 p-1.5 bg-surface-container rounded-md border-transparent text-sm font-semibold text-success text-right"})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-[9px] text-text-secondary uppercase mb-1",children:"Total"}),u.jsx("input",{type:"number",step:"0.01",placeholder:"Total",value:V.totalCost,onChange:De=>Se(Ae,"totalCost",De.target.value),className:"w-full md:w-28 p-1.5 bg-surface-container rounded-md border-transparent text-sm text-text-primary font-bold text-right"})]}),u.jsx("button",{type:"button",onClick:()=>re(V.variant.id),className:"absolute top-2 right-2 md:static md:mb-1 text-red-400 hover:text-red-600",children:u.jsx(V4,{size:20})})]}),V.unit!=="Carton"&&Pe>0&&u.jsx("div",{className:"mt-2 flex justify-end",children:u.jsxs("button",{type:"button",onClick:()=>ae(Ae),disabled:parseFloat(V.quantity)<=0,className:"flex items-center text-xs px-3 py-1.5 rounded-full font-bold text-on-secondary bg-secondary hover:bg-secondary-hover shadow-sm transition-colors mt-2 md:mt-0",title:`Click to convert ${V.quantity} ${V.unit} into full cartons`,children:[u.jsx(H4,{size:12,className:"mr-1"}),parseFloat(V.quantity)>0?`Convert to ${Math.ceil(parseFloat(V.quantity)/Pe)} Cartons`:"Convert to Cartons",u.jsxs("span",{className:"opacity-80 font-normal ml-1",children:["(",Pe," ",ze,"/box)"]})]})})]},V.variant.id)})}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("div",{className:"relative flex-grow",children:[u.jsx("input",{type:"text",placeholder:"Search for product to add...",value:O,onChange:V=>{D(V.target.value),B(null)},className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors"}),O&&!L&&u.jsxs("div",{className:"absolute z-10 w-full bg-surface-container-highest border border-outline/10 rounded-b-md mt-1 max-h-60 overflow-y-auto shadow-xl",children:[ee.map(V=>u.jsxs("div",{onClick:()=>G(V.product,V.variant),className:"p-2 hover:bg-background cursor-pointer text-text-primary border-b border-border last:border-0",children:[u.jsx("div",{className:"font-medium",children:L_(V.product.name,V.variant.name,V.variant.size)}),u.jsxs("div",{className:"text-xs text-text-secondary flex justify-between",children:[u.jsx("span",{children:V.product.manufacturerName}),u.jsx("span",{children:V.variant.sku||"No SKU"})]})]},V.variant.id)),ee.length===0&&u.jsx("div",{className:"p-4 text-center text-text-secondary text-sm",children:"No products found."})]})]}),u.jsx("button",{type:"button",onClick:ne,disabled:!L,className:"py-2 px-6 bg-primary hover:bg-primary-hover rounded-full text-on-primary font-semibold disabled:opacity-50 shadow-md",children:"Add Item"})]})]}),r&&u.jsx("div",{className:"mt-6",children:u.jsx(S9,{title:"Change History",icon:u.jsx(Jx,{className:"w-6 h-6"}),defaultOpen:!1,children:u.jsx(_b,{history:d})})})]}),u.jsxs("div",{className:"p-4 md:p-6 border-t border-outline/10 bg-surface-container-low lg:rounded-b-2xl flex justify-end gap-4 shrink-0 sticky bottom-0 z-10 lg:static",children:[u.jsx("button",{type:"button",onClick:t,className:"py-2 px-6 bg-surface hover:bg-surface-container-highest border border-outline/20 rounded-full text-text-secondary font-medium transition-colors",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:ie||!f,className:"py-2 px-6 bg-primary hover:bg-primary-hover rounded-full text-on-primary font-semibold shadow-md disabled:opacity-50 transition-all",children:ie?"Saving...":r?"Save Changes":"Create Order"})]})]})]})}),u.jsx(kb,{isOpen:H,onClose:()=>z(!1),vendorToEdit:null,initialVendorType:"Supplier"})]})},_K=()=>{const e=new Date;e.setDate(e.getDate()+3);const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`},Wze=(e,t)=>`${e} - ${t}`,Vze=({project:e})=>{const{data:t=[]}=wb(),{data:r=[]}=lC(e.id),{createSampleCheckout:n,patchSampleCheckout:i,extendSampleCheckout:a,returnSampleCheckout:s}=woe(),[o,l]=I.useState(!1),[c,d]=I.useState([]),[f,p]=I.useState(_K()),[m,x]=I.useState(!1),[y,b]=I.useState(null),S=I.useMemo(()=>r.filter(H=>H.projectId===e.id).sort((H,z)=>H.isSelected!==z.isSelected?H.isSelected?-1:1:new Date(z.checkoutDate).getTime()-new Date(H.checkoutDate).getTime()),[r,e.id]),_=()=>{d([]),p(_K()),l(!0)},C=()=>{l(!1)},A=I.useCallback(H=>{d(H)},[]),j=async H=>{if(H.preventDefault(),!(c.length===0||!f))try{const z=c.map(ie=>n.mutateAsync({projectId:e.id,variantId:ie.variantId,interestVariantId:ie.interestVariantId,sampleType:ie.sampleType,quantity:ie.quantity,expectedReturnDate:new Date(f).toISOString()}));await Promise.all(z),Re.success(`Checked out ${c.length} sample(s).`),C()}catch(z){console.error("Checkout failed",z),Re.error("Checkout failed.")}},P=async H=>{if(confirm("Are you sure you want to return this sample?"))try{await s.mutateAsync(H)}catch(z){console.error("Return failed:",z),Re.error("Failed to return sample.")}},O=async H=>{try{await a.mutateAsync(H.id)}catch(z){console.error("Extend failed:",z),Re.error("Failed to extend checkout.")}},D=async H=>{try{await i.mutateAsync({id:H.id,data:{isSelected:!H.isSelected}})}catch{Re.error("Failed to update selection.")}},L=H=>{let z,ie;for(const X of t){if(!X.variants)continue;const W=X.variants.find(Q=>String(Q.id)===String(H.variantId));if(W){z=X,ie=W;break}}z&&ie?(b({product:z,variant:ie,projectId:e.id}),x(!0)):Re.error("Could not find product details for ordering.")},B=H=>{for(const z of t){if(!z.variants)continue;const ie=z.variants.find(X=>String(X.id)===String(H.variantId));if(ie)return Wze(z.name,ie.name)}return"Unknown Sample"};return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center flex-shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(sm,{className:"drag-handle cursor-move text-text-secondary hover:text-text-primary transition-colors",size:20}),u.jsx(Ed,{className:"w-6 h-6 text-primary"}),u.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Sample Checkouts"})]}),u.jsxs("button",{onClick:_,className:"bg-primary hover:bg-primary-hover text-on-primary font-semibold py-1 px-4 text-sm rounded-full flex items-center gap-1",children:[u.jsx(hu,{size:16})," Check Out"]})]}),u.jsx("div",{className:"p-4 overflow-y-auto flex-grow",children:u.jsxs("div",{className:"space-y-3",children:[S.map(H=>{const z=B(H);return u.jsxs("div",{className:`bg-surface-container p-3 rounded-xl flex justify-between items-center border-l-4 ${H.isSelected?"border-tertiary bg-tertiary-container/20":"border-transparent"}`,children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-text-primary",children:z}),u.jsxs("p",{className:"text-xs text-text-secondary",children:["Expected Return: ",new Date(H.expectedReturnDate).toLocaleDateString()]}),u.jsxs("div",{className:"mt-2 flex gap-2",children:[u.jsxs("button",{onClick:()=>D(H),className:`text-xs flex items-center gap-1 px-2 py-1 rounded-full border transition-colors ${H.isSelected?"bg-tertiary-container text-on-tertiary-container border-tertiary-container/50":"bg-surface-container-high text-text-secondary border-outline/20 hover:bg-surface-container-highest"}`,children:[u.jsx(DFe,{size:12}),H.isSelected?"Selected Choice":"Select"]}),H.isSelected&&u.jsxs("button",{onClick:()=>L(H),className:"text-xs flex items-center gap-1 px-2 py-1 rounded-full border border-secondary-container/50 bg-secondary-container text-on-secondary-container hover:brightness-105 transition-all",children:[u.jsx(jFe,{size:12})," Order"]})]})]}),H.actualReturnDate?u.jsxs("div",{className:"text-right",children:[u.jsxs("span",{className:"text-sm text-tertiary flex items-center justify-end",children:[u.jsx(pd,{className:"w-4 h-4 mr-1"})," Returned"]}),u.jsx("span",{className:"text-xs text-text-secondary",children:new Date(H.actualReturnDate).toLocaleDateString()})]}):u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{onClick:()=>O(H),className:"text-sm bg-primary hover:bg-primary-hover text-on-primary py-1 px-3 rounded-full flex items-center gap-1",children:[u.jsx(gd,{size:14})," Extend"]}),u.jsx("button",{onClick:()=>P(H),className:"text-sm border border-outline text-text-primary hover:bg-surface-container-highest py-1 px-3 rounded-full",children:"Return"})]})]},H.id)}),S.length===0&&u.jsx("p",{className:"text-text-tertiary text-center py-8 italic text-sm",children:"No samples checked out for this project."})]})}),o&&u.jsx(od,{children:u.jsx("div",{className:"fixed inset-0 bg-scrim/60 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-2xl w-full max-w-3xl border border-outline/20 flex flex-col max-h-[90vh]",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h3",{className:"text-2xl font-bold text-text-primary",children:"Check Out Sample"}),u.jsx("button",{onClick:C,className:"text-text-secondary hover:text-text-primary p-2 rounded-full hover:bg-surface-container-highest",children:u.jsx(tn,{size:20})})]}),u.jsxs("form",{onSubmit:j,className:"flex-1 flex flex-col min-h-0",children:[u.jsxs("div",{className:"space-y-4 flex-1 overflow-y-auto pr-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-text-secondary block mb-2",children:"1. Expected Return Date"}),u.jsx("input",{type:"date",value:f,onChange:H=>p(H.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-text-secondary block mb-2",children:"2. Add Samples"}),u.jsx(Yoe,{onItemsChange:A})]})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-outline/10 mt-4",children:[u.jsx("button",{type:"button",onClick:C,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors",children:"Cancel"}),u.jsxs("button",{type:"submit",disabled:c.length===0||!f,className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:["Check Out (",c.length,")"]})]})]})]})})}),m&&u.jsx(od,{children:u.jsx(RT,{isOpen:m,onClose:()=>x(!1),initialProjectId:e.id,prefillData:y})})]})},NK={installerName:"",contactEmail:"",contactPhone:"",color:"#ffffff",type:"Managed"},V9=({isOpen:e,onClose:t,installer:r,initialData:n})=>{const[i,a]=I.useState(NK),{createInstaller:s,updateInstaller:o,deleteInstaller:l}=X7(),c=s.isPending||o.isPending,d=l.isPending;I.useEffect(()=>{e&&r?a({installerName:r.installerName||"",contactEmail:r.contactEmail||"",contactPhone:r.contactPhone||"",color:r.color||"#ffffff",type:r.type||"Managed"}):e&&!r&&a({...NK,...n})},[e,r,n]);const f=y=>{const{name:b,value:S}=y.target;let _=S;if(b==="contactPhone"){const C=S.replace(/\D/g,"").slice(0,10);C.length<=3?_=C:C.length<=6?_=`${C.slice(0,3)}-${C.slice(3)}`:_=`${C.slice(0,3)}-${C.slice(3,6)}-${C.slice(6)}`}a(C=>({...C,[b]:_}))},p=y=>{y.preventDefault(),r?o.mutate({...r,...i},{onSuccess:()=>{Re.success("Installer updated."),t()}}):s.mutate(i,{onSuccess:()=>{Re.success("Installer created."),t()}})},m=()=>{r&&window.confirm(`Are you sure you want to permanently delete ${r.installerName}? This action cannot be undone.`)&&l.mutate(r.id,{onSuccess:()=>{Re.success("Installer deleted successfully."),t()}})};if(!e)return null;const x="w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary placeholder-text-secondary focus:outline-none focus:border-primary transition-colors";return u.jsx("div",{className:"fixed inset-0 bg-black/75 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-surface-container-high w-full h-full md:h-auto md:max-w-md md:rounded-2xl shadow-2xl flex flex-col border border-outline/10",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center bg-surface-container-low md:rounded-t-2xl",children:[u.jsxs("h2",{className:"text-xl font-bold text-text-primary flex items-center gap-2",children:[u.jsx(Sb,{className:"text-primary"}),r?"Edit Installer":"New Installer"]}),u.jsx("button",{onClick:t,className:"p-2 hover:bg-surface-container-highest rounded-full text-text-secondary hover:text-text-primary transition-colors",children:u.jsx(tn,{size:24})})]}),u.jsxs("form",{onSubmit:p,className:"flex flex-col h-full md:h-auto",children:[u.jsxs("div",{className:"p-6 space-y-4 flex-grow overflow-y-auto",children:[u.jsx("input",{type:"text",name:"installerName",placeholder:"Installer Name",value:i.installerName,onChange:f,className:x,required:!0}),u.jsxs("select",{name:"type",value:i.type,onChange:f,className:`${x} cursor-pointer`,children:[u.jsx("option",{value:"Managed",children:"Managed Installer (Employee)"}),u.jsx("option",{value:"Unmanaged",children:"Unmanaged Installer (Sub)"})]}),u.jsxs("div",{className:"space-y-4 pt-2",children:[u.jsx("input",{type:"email",name:"contactEmail",placeholder:"Contact Email",value:i.contactEmail,onChange:f,className:x}),u.jsx("input",{type:"tel",name:"contactPhone",placeholder:"Contact Phone",value:i.contactPhone,onChange:f,className:x})]}),u.jsx("div",{className:"pt-4 border-t border-outline/10 mt-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("label",{htmlFor:"color",className:"text-sm font-medium text-text-secondary",children:"Calendar Color"}),u.jsx("input",{type:"color",name:"color",value:i.color,onChange:f,className:"h-10 w-20 p-1 bg-surface-container-highest border border-outline/20 rounded-md cursor-pointer"})]})})]}),u.jsxs("div",{className:"p-4 border-t border-outline/10 bg-surface-container-low md:rounded-b-2xl flex justify-end gap-3 shrink-0",children:[r&&u.jsxs("button",{type:"button",onClick:m,className:"py-2 px-6 bg-error-container hover:bg-error/20 text-error rounded-full font-semibold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed mr-auto transition-colors",disabled:c||d,children:[u.jsx(wo,{size:16}),d?"Deleting...":"Delete"]}),u.jsx("button",{type:"submit",className:"py-2 px-6 bg-primary hover:bg-primary-hover rounded-full text-on-primary font-semibold shadow-md transition-all",disabled:c||d,children:c?"Saving...":r?"Save Changes":"Create Installer"})]})]})]})})},qze=e=>{const t=$a(),r=Ir({mutationFn:loe,onSuccess:()=>{t.invalidateQueries({queryKey:["installers"]}),Re.success("Installer created.")},onError:a=>Re.error(`Creation failed: ${a.message}`)}),n=Ir({mutationFn:coe,onSuccess:()=>{t.invalidateQueries({queryKey:["installers"]}),Re.success("Installer updated.")},onError:a=>Re.error(`Update failed: ${a.message}`)}),i=Ir({mutationFn:uoe,onSuccess:()=>{t.invalidateQueries({queryKey:["installers"]}),Re.success("Installer deleted successfully.")},onError:a=>Re.error(`Deletion failed: ${a.message}`)});return{createInstaller:r,updateInstaller:n,deleteInstaller:i}},Gze=({project:e,isModalOpen:t,onCloseModal:r,onOpenEditModal:n,editingQuoteForModal:i})=>{const{systemBranding:a}=Xr(),{data:s=[]}=L4(e.id),{data:o=[]}=Cf(),{addQuote:l,updateQuote:c,acceptQuote:d}=Y7();qze();const[f,p]=I.useState(!1),{data:m=[]}=qs({queryKey:["quotes","history",e.id],queryFn:()=>poe(e.id),enabled:!!e.id&&f}),[x,y]=I.useState(null),[b,S]=I.useState({installationType:"Managed Installation",materialsAmount:"",laborAmount:"",laborDepositPercentage:"50",quoteDetails:""}),[_,C]=I.useState(""),[A,j]=I.useState(null),[P,O]=I.useState(!1),D=I.useMemo(()=>{if(!_)return[];let W="Managed";return b.installationType==="Unmanaged Installer"&&(W="Unmanaged"),o.filter(Q=>Q.installerName.toLowerCase().includes(_.toLowerCase())&&(Q.type===W||!Q.type))},[o,_,b.installationType]);I.useEffect(()=>{if(A){let W="Managed";b.installationType==="Unmanaged Installer"&&(W="Unmanaged"),A.type&&A.type!==W&&(j(null),C(""))}},[b.installationType,A]);const L=I.useMemo(()=>{const W=parseFloat(b.materialsAmount)||0;if(b.installationType==="Managed Installation"){const Q=parseFloat(b.laborAmount)||0,te=parseFloat(b.laborDepositPercentage)||0;return W+Q*(te/100)}return W},[b]);I.useEffect(()=>{if(t)if(i){y(i);const W=o.find(Q=>Q.id===i.installerId);W?(j(W),C(W.installerName)):(j(null),C("")),S({installationType:i.installationType||"Managed Installation",materialsAmount:String(i.materialsAmount||""),laborAmount:String(i.laborAmount||""),laborDepositPercentage:String(i.laborDepositPercentage||"50"),quoteDetails:i.quoteDetails||""})}else y(null),S({installationType:"Managed Installation",materialsAmount:"",laborAmount:"",laborDepositPercentage:"50",quoteDetails:""}),j(null),C("")},[t,i,o]);const B=async W=>{if(W.preventDefault(),(b.installationType==="Managed Installation"||b.installationType==="Unmanaged Installer")&&!A){Kr.error("Please select an installer.");return}const te={projectId:e.id,installerId:(A==null?void 0:A.id)||null,installationType:b.installationType,materialsAmount:parseFloat(b.materialsAmount)||0,laborAmount:b.installationType==="Managed Installation"?parseFloat(b.laborAmount)||0:null,laborDepositPercentage:b.installationType==="Managed Installation"?parseFloat(b.laborDepositPercentage)||50:null,quoteDetails:b.quoteDetails,poNumber:x?x.poNumber:null,status:x?x.status:ml.SENT};try{x?await c({...te,id:x.id}):await l(te),r(),Kr.success(x?"Quote updated":"Quote added")}catch(J){console.error(J),Kr.error("Failed to save quote")}},H=W=>{j(W),C(W.installerName)},z=()=>{O(!0)},ie=async(W,Q,te)=>{W.preventDefault(),W.stopPropagation();try{te===ml.ACCEPTED?await d({id:Q.id,status:te}):await c({id:Q.id,status:te}),Kr.success(`Quote ${te.toLowerCase()}`)}catch(J){console.error(J),Kr.error("Failed to update quote status")}},X=async(W,Q)=>{const te=s.find(J=>J.id===W);te&&te.poNumber!==Q&&(await c({id:W,poNumber:Q}),Kr.success("PO number updated"))};return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center flex-shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(sm,{className:"drag-handle cursor-move text-text-secondary hover:text-text-primary transition-colors",size:20}),u.jsx(au,{className:"w-6 h-6 text-primary"}),u.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Quotes"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{onClick:()=>{y(null),n(null)},className:"bg-primary hover:bg-primary-hover text-on-primary font-semibold py-1 px-4 text-sm rounded-full flex items-center gap-1 transition-all shadow-sm",children:[u.jsx(ac,{size:16})," Add"]}),u.jsx("button",{onClick:()=>p(!f),className:`p-2 rounded-full transition-colors ${f?"bg-primary-container text-primary font-bold":"text-text-secondary hover:text-text-primary hover:bg-surface-container-highest"}`,title:"Toggle Quote History",children:u.jsx(Jx,{size:18})})]})]}),u.jsx("div",{className:"p-4 overflow-y-auto flex-grow scrollbar-thin scrollbar-thumb-surface-container-highest",children:f?u.jsx(_b,{history:m}):u.jsxs("div",{className:"space-y-3",children:[s.map(W=>{const Q=o.find(J=>J.id===W.installerId),te=(Number(W.materialsAmount)||0)+(Number(W.laborAmount)||0);return u.jsx("div",{className:`block bg-surface-container p-3 rounded-xl border-l-4 hover:bg-surface-container-high transition-colors ${W.status===ml.ACCEPTED?"border-tertiary":W.status===ml.REJECTED?"border-error":"border-secondary"}`,children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-bold text-lg text-text-primary",children:["$",te.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),u.jsx("p",{className:"text-sm text-text-secondary font-medium",children:(Q==null?void 0:Q.installerName)||W.installationType}),u.jsxs("p",{className:"text-xs text-text-secondary mt-2 opacity-80",children:["M: $",Number(W.materialsAmount||0).toLocaleString(),", L: $",Number(W.laborAmount||0).toLocaleString()]}),u.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider bg-surface-container-highest text-text-secondary px-2 py-1 rounded-full mt-2 inline-block border border-outline/5",children:W.installationType})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"font-bold text-xs uppercase tracking-widest text-text-primary",children:W.status}),u.jsx("p",{className:"text-[10px] text-text-tertiary mt-1",children:df(W.dateSent,a==null?void 0:a.systemTimezone)}),W.status===ml.SENT&&u.jsxs("div",{className:"flex space-x-2 mt-3 items-center",children:[u.jsx("button",{onClick:()=>n(W),className:"p-2 text-text-secondary hover:text-text-primary hover:bg-surface-container-highest rounded-full transition-colors",title:"Edit Quote",children:u.jsx(ip,{className:"w-4 h-4"})}),u.jsx("button",{onClick:J=>ie(J,W,ml.ACCEPTED),className:"p-2 bg-tertiary text-on-tertiary rounded-full hover:bg-tertiary-hover shadow-sm transition-colors",title:"Accept Quote",children:u.jsx(pd,{className:"w-4 h-4"})}),u.jsx("button",{onClick:J=>ie(J,W,ml.REJECTED),className:"p-2 bg-error text-on-error rounded-full hover:bg-error-hover shadow-sm transition-colors",title:"Reject Quote",children:u.jsx(tn,{className:"w-4 h-4"})})]}),W.status===ml.ACCEPTED&&u.jsxs("div",{className:"mt-3 flex items-center",children:[u.jsx("input",{type:"text",placeholder:"Add PO #",defaultValue:W.poNumber||"",onKeyDown:J=>{J.key==="Enter"&&X(W.id,J.currentTarget.value)},className:"text-xs w-24 p-1.5 bg-surface-container-low border border-outline/50 rounded-lg text-text-primary focus:ring-2 focus:ring-primary/50 outline-none",id:`po-input-${W.id}`}),u.jsx("button",{onClick:()=>{const J=document.getElementById(`po-input-${W.id}`).value;X(W.id,J)},className:"p-1.5 bg-primary text-on-primary rounded-lg hover:bg-primary-hover ml-1 shadow-sm transition-colors",title:"Save PO",children:u.jsx(Cs,{className:"w-3.5 h-3.5"})})]})]})]})},W.id)}),s.length===0&&u.jsx("p",{className:"text-text-tertiary text-center py-8 italic text-sm",children:"No quotes created yet."})]})}),t&&u.jsx(od,{children:u.jsx("div",{className:"fixed inset-0 bg-scrim/60 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-2xl w-full max-w-2xl border border-outline/20 shadow-2xl",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h3",{className:"text-2xl font-bold text-text-primary",children:x?"Edit Quote":"Add New Quote"}),u.jsx("button",{onClick:r,className:"text-text-secondary hover:text-text-primary p-2 rounded-full hover:bg-surface-container-highest transition-colors",children:u.jsx(tn,{size:20})})]}),u.jsxs("form",{onSubmit:B,children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-sm font-semibold text-text-secondary mb-3",children:"Installation Type"}),u.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:t5e.map(W=>u.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer group",children:[u.jsx("input",{type:"radio",name:"installationType",value:W,checked:b.installationType===W,onChange:Q=>S({...b,installationType:Q.target.value}),className:"form-radio h-5 w-5 text-primary bg-surface-container border-outline/50 focus:ring-primary"}),u.jsx("span",{className:"text-text-primary group-hover:text-primary transition-colors",children:W})]},W))})]}),(b.installationType==="Managed Installation"||b.installationType==="Unmanaged Installer")&&u.jsxs("div",{className:"relative mb-6",children:[u.jsx("label",{className:"block text-sm font-semibold text-text-secondary mb-1.5 ml-1",children:"Installer"}),u.jsx("input",{type:"text",placeholder:"Search for an installer...",value:_,onChange:W=>{C(W.target.value),j(null)},className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"}),_&&!A&&u.jsxs("div",{className:"absolute z-10 w-full bg-surface-container-high border border-outline/20 rounded-lg mt-1 max-h-48 overflow-y-auto shadow-xl",children:[D.map(W=>u.jsx("div",{onClick:()=>H(W),className:"px-4 py-2.5 hover:bg-primary-container/30 cursor-pointer text-text-primary transition-colors",children:W.installerName},W.id)),D.length===0&&u.jsxs("div",{className:"p-4 text-center text-text-secondary text-sm",children:["No results. ",u.jsx("button",{type:"button",onClick:z,className:"ml-2 text-primary font-bold hover:underline",children:"Add New"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-text-secondary mb-1.5 ml-1",children:"Materials Cost"}),u.jsx("input",{type:"number",step:"0.01",placeholder:"0.00",value:b.materialsAmount,onChange:W=>S({...b,materialsAmount:W.target.value}),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary focus:ring-2 focus:ring-primary/50 outline-none",required:!0})]}),b.installationType==="Managed Installation"&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-text-secondary mb-1.5 ml-1",children:"Labor Cost"}),u.jsx("input",{type:"number",step:"0.01",placeholder:"0.00",value:b.laborAmount,onChange:W=>S({...b,laborAmount:W.target.value}),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary focus:ring-2 focus:ring-primary/50 outline-none",required:!0})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 items-center",children:[b.installationType==="Managed Installation"&&u.jsxs("div",{className:"relative",children:[u.jsx("label",{className:"block text-sm font-semibold text-text-secondary mb-1.5 ml-1",children:"Installer Deposit %"}),u.jsx("input",{type:"number",value:b.laborDepositPercentage,onChange:W=>S({...b,laborDepositPercentage:W.target.value}),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary focus:ring-2 focus:ring-primary/50 outline-none"}),u.jsx("span",{className:"absolute right-4 top-1/2 mt-3 -translate-y-1/2 text-text-tertiary font-bold",children:"%"})]}),u.jsxs("div",{className:"bg-surface-container p-4 rounded-xl text-center self-end border border-outline/20 shadow-inner",children:[u.jsx("span",{className:"text-xs text-text-secondary uppercase font-bold tracking-wider block mb-1",children:"Required Deposit"}),u.jsxs("span",{className:"text-2xl font-bold text-text-primary",children:["$",L.toFixed(2)]})]})]}),u.jsx("textarea",{placeholder:"Scope of work and specific terms...",value:b.quoteDetails,onChange:W=>S({...b,quoteDetails:W.target.value}),className:"w-full bg-surface-container border border-outline/50 rounded-xl px-4 py-3 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none transition-all",rows:4}),u.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[u.jsx("button",{type:"button",onClick:r,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors font-medium",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:(b.installationType==="Managed Installation"||b.installationType==="Unmanaged Installer")&&!A,className:"py-3 px-8 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-bold shadow-lg transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Save Changes":"Add Quote"})]})]})]})})}),P&&u.jsx(od,{children:u.jsx(V9,{isOpen:P,onClose:()=>{O(!1),C("")},installer:null,initialData:{installerName:_,type:b.installationType==="Unmanaged Installer"?"Unmanaged":"Managed"}})})]})},AK=e=>e?new Date(e).toISOString().split("T")[0]:"";let gD=0;const Kze=({project:e,job:t,quotes:r,changeOrders:n})=>{const{data:i=[],isLoading:a}=Cf(),s=I.useRef(!1),o=$a(),[l,c]=I.useState({projectId:e.id,poNumber:"",depositReceived:!1,contractsReceived:!1,finalPaymentReceived:!1,isOnHold:!1,appointments:[]}),d=I.useMemo(()=>r.filter(B=>B.status===ml.ACCEPTED),[r]),f=I.useMemo(()=>d.length===0?!1:d.some(B=>B.installationType==="Managed Installation"||B.installationType==="Unmanaged Installer"),[d]),p=I.useMemo(()=>d.some(B=>B.installationType==="Managed Installation"),[d]),m=I.useMemo(()=>{const B=d.map(W=>{const Q=(Number(W.materialsAmount)||0)+(Number(W.laborAmount)||0),te=n.filter(G=>G.quoteId===W.id),J=te.reduce((G,q)=>G+(Number(q.amount)||0),0),Y=Q+J,pe=W.installationType==="Managed Installation"?(Number(W.laborDepositPercentage)||0)/100:0,_e=(Number(W.materialsAmount)||0)+(Number(W.laborAmount)||0)*pe,ee=te.reduce((G,q)=>{const ne=Number(q.amount)||0;return G+(q.type==="Materials"?ne:ne*pe)},0),de=_e+ee;return{subtotal:Y,deposit:de}}),H=n.filter(W=>W.quoteId==null).reduce((W,Q)=>W+(Number(Q.amount)||0),0),z=B.reduce((W,Q)=>W+Q.subtotal,0)+H,ie=B.reduce((W,Q)=>W+Q.deposit,0),X=z-ie;return{grandTotal:z,totalDeposit:ie,balanceDue:X}},[d,n]);I.useEffect(()=>{if(t){const B=Array.isArray(t.appointments)&&t.appointments.length>0,H=Array.isArray(l.appointments)&&l.appointments.length>0;if(s.current&&H&&!B)return;c({...t,projectId:e.id,appointments:(t.appointments||[]).map(z=>({...z,_tempId:z.id||gD++}))}),s.current=!0}else s.current||(c({projectId:e.id,poNumber:"",depositReceived:!1,contractsReceived:!1,finalPaymentReceived:!1,isOnHold:!1,appointments:[{_tempId:gD++,appointmentName:"Installation",quoteId:d.length===1?d[0].id:void 0,installerId:d.length===1?d[0].installerId:null,startDate:"",endDate:""}]}),s.current=!0)},[t,e.id,d]),I.useEffect(()=>{if(d.length===1&&l.appointments){const B=d[0].id;l.appointments.some(z=>z.quoteId!==B)&&c(z=>({...z,appointments:(z.appointments||[]).map(ie=>({...ie,quoteId:B,installerId:d[0].installerId}))}))}},[d,l.appointments]);const x=(B,H)=>{c(z=>({...z,[B]:H}))},y=(B,H,z)=>{c(ie=>({...ie,appointments:(ie.appointments||[]).map(X=>X._tempId===B?{...X,[H]:z}:X)}))},b=(B,H)=>{const z=H?parseInt(H):null,ie=d.find(X=>X.id===z);c(X=>({...X,appointments:(X.appointments||[]).map(W=>W._tempId===B?{...W,quoteId:z,installerId:(ie==null?void 0:ie.installerId)||null}:W)}))},S=()=>{var H;const B={_tempId:gD++,appointmentName:`Part ${(((H=l.appointments)==null?void 0:H.length)||0)+1}`,quoteId:d.length===1?d[0].id:void 0,installerId:d.length===1?d[0].installerId:null,startDate:"",endDate:""};c(z=>({...z,appointments:[...z.appointments||[],B]}))},_=B=>{c(H=>({...H,appointments:(H.appointments||[]).filter(z=>z._tempId!==B)}))},C=Ir({mutationFn:moe,onSuccess:()=>{o.invalidateQueries({queryKey:["jobs"]}),o.invalidateQueries({queryKey:["project",e.id]})}}),A=Ir({mutationFn:G6e,onSuccess:()=>{o.invalidateQueries({queryKey:["projects"]}),o.invalidateQueries({queryKey:["project",e.id]})}}),j=async()=>{var W,Q;const B=(W=l.appointments)==null?void 0:W[0],H=e.status===sr.ACCEPTED&&f;if(H&&(!B||!B.startDate)){Re.error("Please enter a Start Date for the first appointment to schedule the job.");return}if(f&&((Q=l.appointments)!=null&&Q.some(te=>!te.quoteId))){Re.error("All appointments must be linked to an Accepted Quote (Scope of Work).");return}if(H&&p&&(!l.depositReceived||!l.contractsReceived)){Re.error("Deposit and Contracts must be marked as received before scheduling a Managed Job.");return}const{appointments:z,...ie}=l,X=(z||[]).map(({_tempId:te,startDate:J,endDate:Y,...pe})=>({...pe,startDate:J&&!J.includes("T")?`${J}T12:00:00`:J,endDate:Y&&!Y.includes("T")?`${Y}T12:00:00`:Y}));try{await C.mutateAsync({...ie,depositAmount:m.totalDeposit,appointments:X}),H&&await A.mutateAsync({id:e.id,status:sr.SCHEDULED}),Re.success("Job details saved successfully.")}catch{Re.error("Failed to save job details. Please try again.")}},P=()=>{x("isOnHold",!l.isOnHold)},O=I.useMemo(()=>{if(!l.appointments||l.appointments.length===0)return null;const B=l.appointments.map(H=>H.endDate?new Date(H.endDate).getTime():0).sort((H,z)=>z-H);return B[0]>0?new Date(B[0]):null},[l.appointments]),D=O?new Date>=O:!1,L=e.status===sr.SCHEDULED||e.status===sr.COMPLETED;return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center flex-shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(sm,{className:"drag-handle cursor-move text-text-secondary hover:text-text-primary transition-colors",size:20}),u.jsx(Cu,{className:"w-6 h-6 text-primary"}),u.jsx("h2",{className:"text-xl font-semibold text-text-primary",children:"Job Details & Scheduling"})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("button",{onClick:P,className:`font-semibold py-2 px-4 rounded-full flex items-center gap-2 transition-colors text-sm ${l.isOnHold?"bg-tertiary-container text-on-tertiary-container":"border border-outline text-text-primary hover:bg-surface-container-highest"}`,children:[u.jsx(xd,{className:"w-4 h-4"})," ",l.isOnHold?"ON HOLD":"Place Hold"]}),u.jsxs("button",{onClick:j,className:"bg-primary hover:bg-primary-hover text-on-primary font-semibold py-2 px-4 rounded-full flex items-center gap-2 text-sm disabled:opacity-50",disabled:C.isPending||A.isPending,children:[C.isPending||A.isPending?u.jsx(q4,{className:"w-4 h-4 animate-spin"}):u.jsx(Cs,{className:"w-4 h-4"}),"Save Details"]})]})]}),u.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6 flex-grow overflow-hidden",children:[u.jsx("div",{className:"space-y-6 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-surface-container-highest",children:f&&u.jsxs("div",{className:"space-y-3",children:[d.length===0&&u.jsxs("div",{className:"p-3 bg-error-container text-error border border-error rounded-lg flex items-center gap-2",children:[u.jsx(xd,{size:20})," Scheduling requires at least one accepted quote."]}),(l.appointments||[]).map(B=>{var H;return d.find(z=>z.id===B.quoteId),u.jsxs("div",{className:"bg-surface-container p-4 rounded-xl border border-outline/20 relative",children:[(((H=l.appointments)==null?void 0:H.length)||0)>1&&u.jsx("button",{onClick:()=>_(B._tempId),className:"absolute -top-2 -right-2 text-text-secondary hover:text-error bg-surface-container-high p-0.5 rounded-full",children:u.jsx(V4,{size:20})}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"col-span-2",children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Appointment Name"}),u.jsx("input",{type:"text",value:B.appointmentName,onChange:z=>y(B._tempId,"appointmentName",z.target.value),className:"w-full bg-surface-container-low border border-outline/50 rounded-lg px-3 py-2 text-sm text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Start Date"}),u.jsx("input",{type:"date",value:AK(B.startDate),onChange:z=>y(B._tempId,"startDate",z.target.value),className:"w-full bg-surface-container-low border border-outline/50 rounded-lg px-3 py-2 text-sm text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"End Date"}),u.jsx("input",{type:"date",value:AK(B.endDate),onChange:z=>y(B._tempId,"endDate",z.target.value),className:"w-full bg-surface-container-low border border-outline/50 rounded-lg px-3 py-2 text-sm text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"})]}),u.jsxs("div",{className:"col-span-2",children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Scope of Work (via Quote)"}),d.length===1?u.jsx("div",{className:"w-full bg-surface-container-low border border-outline/50 rounded-lg px-3 py-2 text-sm text-text-primary font-medium",children:(()=>{const z=d[0],ie=i.find(X=>X.id===z.installerId);return`${(ie==null?void 0:ie.installerName)||"Installer"} ${z.poNumber?`(PO: ${z.poNumber})`:""}`})()}):u.jsxs("select",{value:B.quoteId?String(B.quoteId):"",onChange:z=>b(B._tempId,z.target.value),className:"w-full bg-surface-container-low border border-outline/50 rounded-lg px-3 py-2 text-sm text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none cursor-pointer",disabled:d.length===0,children:[u.jsx("option",{value:"",children:"-- Select Installer (Via Quote) --"}),d.map(z=>{const ie=i.find(te=>te.id===z.installerId),X=ie?ie.installerName:"Unknown Installer",W=z.installationType!=="Managed Installation"?` - ${z.installationType}`:"",Q=z.poNumber?` (PO: ${z.poNumber})`:"";return u.jsx("option",{value:z.id,children:`${X}${Q}${W}`},z.id)})]})]})]})]},B._tempId)}),u.jsxs("button",{onClick:S,className:`w-full flex items-center justify-center gap-2 text-sm font-semibold py-2 border-2 border-dashed rounded-xl transition-colors ${d.length>0?"text-primary hover:text-primary-hover border-outline/30 hover:border-primary/80 hover:bg-primary-container/20":"text-text-tertiary border-outline/20 opacity-50 cursor-not-allowed"}`,disabled:d.length===0,children:[u.jsx(hu,{size:16})," Add Appointment"]})]})}),u.jsxs("div",{className:"space-y-4 flex flex-col overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-surface-container-highest",children:[u.jsxs("div",{className:"bg-surface-container p-4 rounded-xl space-y-2 border border-outline/20",children:[u.jsxs("div",{className:"flex justify-between items-center font-bold text-lg",children:[u.jsx("span",{className:"text-text-primary",children:"Job Grand Total:"}),u.jsxs("span",{className:"text-text-primary",children:["$",m.grandTotal.toFixed(2)]})]}),u.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[u.jsx("span",{className:"text-text-secondary",children:"Total Deposit Required:"}),u.jsxs("span",{className:"text-text-primary",children:["$",m.totalDeposit.toFixed(2)]})]}),u.jsxs("div",{className:"flex justify-between items-center font-bold text-lg border-t-2 border-tertiary/50 pt-2 mt-2",children:[u.jsx("span",{className:"text-text-primary",children:"Balance Due:"}),u.jsxs("span",{className:"text-tertiary",children:["$",m.balanceDue.toFixed(2)]})]})]}),p&&u.jsxs("div",{className:"pt-2 space-y-3 flex-grow",children:[u.jsxs("label",{className:`flex items-center space-x-2 ${L?"cursor-not-allowed opacity-50":"cursor-pointer"}`,children:[u.jsx("input",{type:"checkbox",checked:l.depositReceived||!1,onChange:B=>x("depositReceived",B.target.checked),disabled:L,className:"form-checkbox h-5 w-5 text-primary bg-surface-container border-outline/50 rounded focus:ring-primary"}),u.jsx("span",{className:"text-text-primary",children:"Deposit Received"})]}),u.jsxs("label",{className:`flex items-center space-x-2 ${L?"cursor-not-allowed opacity-50":"cursor-pointer"}`,children:[u.jsx("input",{type:"checkbox",checked:l.contractsReceived||!1,onChange:B=>x("contractsReceived",B.target.checked),disabled:L,className:"form-checkbox h-5 w-5 text-primary bg-surface-container border-outline/50 rounded focus:ring-primary"}),u.jsx("span",{className:"text-text-primary",children:"Contracts Received"})]}),L&&u.jsxs("label",{className:`flex items-center space-x-2 ${D?"cursor-pointer":"cursor-not-allowed opacity-50"}`,title:D?"":`Available after ${O==null?void 0:O.toLocaleDateString()}`,children:[u.jsx("input",{type:"checkbox",checked:l.finalPaymentReceived||!1,onChange:B=>x("finalPaymentReceived",B.target.checked),disabled:!D,className:"form-checkbox h-5 w-5 text-primary bg-surface-container border-outline/50 rounded focus:ring-primary"}),u.jsx("span",{className:"text-text-primary",children:"Final Payment Received"})]})]})]})]})]})},Xze=({project:e,projectChangeOrders:t,acceptedQuotes:r,addChangeOrder:n,onEditChangeOrder:i})=>{const[a,s]=I.useState(""),[o,l]=I.useState(""),[c,d]=I.useState("Materials"),[f,p]=I.useState("");I.useEffect(()=>{r&&r.length>0&&p(String(r[0].id))},[r]);const m=async S=>{if(S.preventDefault(),!a||!o){alert("Please provide a description and an amount.");return}let _;if(f?_=parseInt(f,10):r.length>0&&(_=r[0].id),r.length>1&&!_){alert("Please select which quote this change order applies to.");return}await n({projectId:e.id,quoteId:_,description:a,amount:parseFloat(o),type:c}),s(""),l("")},x=S=>{if(!S||r.length<=1)return null;const _=r.findIndex(C=>C.id===S);return _===-1?"For an unknown quote":`For Quote #${_+1}`},y=r.length>1?"md:grid-cols-4":"md:grid-cols-3",b=r.length>1?"md:col-start-4":"md:col-start-3";return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center flex-shrink-0",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(sm,{className:"drag-handle cursor-move text-text-secondary hover:text-text-primary transition-colors",size:20}),u.jsx(hu,{className:"w-6 h-6 text-primary"}),u.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Change Orders"})]})}),u.jsx("div",{className:"p-4 overflow-y-auto flex-grow",children:u.jsxs("div",{className:"space-y-3",children:[t.map(S=>u.jsxs("div",{className:`flex justify-between items-center p-3 rounded-lg bg-surface-container ${Number(S.amount)>=0?"text-tertiary":"text-error"}`,children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:S.description}),u.jsxs("p",{className:"text-xs text-text-secondary",children:[S.type,x(S.quoteId)&&u.jsx("span",{className:"ml-2 pl-2 border-l border-outline/20",children:x(S.quoteId)})]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsxs("span",{className:"font-bold",children:[Number(S.amount)>=0?"+":"","$",Number(S.amount).toFixed(2)]}),u.jsx("button",{onClick:()=>i(S),className:"ml-4 p-1 text-text-secondary hover:text-text-primary rounded-full hover:bg-surface-container-highest transition-colors",title:"Edit Change Order",children:u.jsx(ip,{size:16})})]})]},S.id)),t.length===0&&u.jsx("p",{className:"text-text-secondary text-center py-4",children:"No change orders added yet."})]})}),u.jsx("div",{className:"p-4 border-t border-outline/10 bg-surface-container-low flex-shrink-0",children:u.jsxs("form",{onSubmit:m,className:`grid grid-cols-1 ${y} gap-4 items-end`,children:[u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Description"}),u.jsx("input",{type:"text",value:a,onChange:S=>s(S.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",required:!0})]}),r.length>1&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"For Quote"}),u.jsx("select",{value:f,onChange:S=>p(S.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",children:r.map((S,_)=>u.jsxs("option",{value:String(S.id),children:["Quote #",_+1]},S.id))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Type"}),u.jsxs("select",{value:c,onChange:S=>d(S.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",children:[u.jsx("option",{value:"Materials",children:"Materials"}),u.jsx("option",{value:"Labor",children:"Labor"})]})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Amount"}),u.jsx("input",{type:"number",step:"0.01",value:o,onChange:S=>l(S.target.value),placeholder:"e.g., -50.00",className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",required:!0})]}),u.jsx("button",{type:"submit",className:`bg-primary hover:bg-primary-hover text-on-primary font-bold py-2.5 px-4 rounded-full transition-all shadow-md active:scale-95 ${b}`,children:"Add"})]})})]})},Yze=({project:e,orders:t,isModalOpen:r,onCloseModal:n,editingOrder:i,onEditOrder:a})=>{const{currentUser:s,systemBranding:o}=Xr(),{data:l=[]}=wb(),{deleteMaterialOrder:c}=$4(),d=async p=>{if(window.confirm("Are you sure you want to delete this material order? This action cannot be undone."))try{await c(p),Re.success("Order deleted successfully.")}catch(m){Re.error("Failed to delete order."),console.error("Failed to delete order:",m)}},f=(p,m)=>{if(!l)return m;const x=l.flatMap(y=>y.variants).find(y=>y.id===String(p));return(x==null?void 0:x.pricingUnit)||m||""};return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center flex-shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(sm,{className:"drag-handle cursor-move text-text-secondary hover:text-text-primary transition-colors",size:20}),u.jsx(dx,{className:"w-6 h-6 text-primary"}),u.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Material Orders"})]}),u.jsx("button",{onClick:()=>a(null),className:"bg-primary hover:bg-primary-hover text-on-primary font-semibold py-1 px-4 text-sm rounded-full",children:"Add Order"})]}),u.jsx("div",{className:"p-4 overflow-y-auto flex-grow scrollbar-thin scrollbar-thumb-surface-container-highest",children:t.length===0?u.jsx("p",{className:"text-text-secondary text-center py-4",children:"No material orders placed yet."}):u.jsx("div",{className:"space-y-4",children:t.map(p=>{var m;return u.jsxs("div",{className:"bg-surface-container p-4 rounded-xl border border-outline/20",children:[u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-text-primary",children:p.supplierName||"N/A"}),u.jsxs("p",{className:"text-xs text-text-secondary",children:["Order Date: ",df(p.orderDate.split("T")[0]+"T12:00:00",o==null?void 0:o.systemTimezone)]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-xs font-medium bg-secondary-container text-on-secondary-container px-2 py-0.5 rounded-full",children:p.status}),u.jsxs("p",{className:"text-xs text-text-secondary",children:["ETA: ",p.etaDate?df(p.etaDate.split("T")[0]+"T12:00:00",o==null?void 0:o.systemTimezone):"N/A"]})]}),u.jsx("button",{onClick:()=>a(p),className:"p-1.5 text-text-secondary hover:text-text-primary rounded-full hover:bg-surface-container-highest",children:u.jsx(ip,{size:16})}),((m=s==null?void 0:s.roles)==null?void 0:m.includes("Admin"))&&u.jsx("button",{onClick:()=>d(p.id),className:"p-1.5 text-error hover:text-error-hover rounded-full hover:bg-error-container/50",children:u.jsx(wo,{size:16})})]})]}),u.jsx("ul",{className:"space-y-2 text-sm border-t border-outline/20 pt-3",children:p.lineItems.map(x=>u.jsxs("li",{className:"flex justify-between items-center text-text-secondary",children:[u.jsxs("span",{children:[x.quantity," ",f(x.sampleId,x.unit)," x ",`${x.style}${x.color?` - ${x.color}`:""}`]}),x.totalCost!=null&&u.jsx("span",{children:Qm(Number(x.totalCost))})]},x.id))})]},p.id)})})}),r&&u.jsx(od,{children:u.jsx(RT,{isOpen:r,onClose:n,editingOrder:i,initialProjectId:e.id})})]})},q9=()=>rr("/api/jobs"),Qze=async e=>{const t=await fetch(`${q9()}/${e}/notes`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch job notes");return t.json()},Jze=async(e,t)=>{const r=await fetch(`${q9()}/${e}/notes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t}),credentials:"include"});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to add note")}return r.json()},Zze=async e=>{const t=`${q9()}/notes/${e}/pin`,r=await fetch(t,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include"});if(!r.ok)throw new Error("Failed to toggle pin");return r.json()},TK=/@\[(product|project|user|customer|installer):([^|]+)\|([^\]]+)\]/g,S3=({content:e})=>{if(!e)return null;const t=[];let r=0,n;for(;(n=TK.exec(e))!==null;){n.index>r&&t.push(e.substring(r,n.index));const[i,a,s,o]=n;a==="project"?t.push(u.jsxs(ui,{to:`/projects/${s}`,className:"inline-flex items-center text-indigo-700 font-medium hover:underline bg-indigo-100 px-1.5 py-0.5 rounded text-xs mx-0.5 align-baseline",children:[" ",o]},n.index)):a==="product"?t.push(u.jsxs(ui,{to:`/samples?search=${encodeURIComponent(o)}`,className:"inline-flex items-center text-teal-700 font-medium hover:underline bg-teal-100 px-1.5 py-0.5 rounded text-xs mx-0.5 align-baseline",children:[" ",o]},n.index)):a==="user"?t.push(u.jsxs("span",{className:"inline-flex items-center text-blue-700 font-medium bg-blue-100 px-1.5 py-0.5 rounded text-xs mx-0.5 align-baseline cursor-default",children:["@",o]},n.index)):a==="customer"?t.push(u.jsxs(ui,{to:`/customers/${s}`,className:"inline-flex items-center text-amber-700 font-medium hover:underline bg-amber-100 px-1.5 py-0.5 rounded text-xs mx-0.5 align-baseline",children:[" ",o]},n.index)):a==="installer"?t.push(u.jsxs(ui,{to:`/installers/${s}`,className:"inline-flex items-center text-pink-700 font-medium hover:underline bg-pink-100 px-1.5 py-0.5 rounded text-xs mx-0.5 align-baseline",children:[" ",o]},n.index)):t.push(i),r=TK.lastIndex}return r<e.length&&t.push(e.substring(r)),u.jsx("span",{className:"whitespace-pre-wrap leading-relaxed",children:t})};function eHe(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function tHe(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function rHe(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function jT(e){return eHe(e)||tHe(e)||rHe()}function su(){return su=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},su.apply(this,arguments)}function nHe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iHe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function aHe(e,t,r){return t&&iHe(e.prototype,t),e}function bn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K8(e,t){return K8=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},K8(e,t)}function sHe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K8(e,t)}function Lv(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Lv=function(r){return typeof r}:Lv=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Lv(e)}function iA(e){return typeof Symbol=="function"&&Lv(Symbol.iterator)==="symbol"?iA=function(r){return Lv(r)}:iA=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":Lv(r)},iA(e)}function oHe(e,t){return t&&(iA(t)==="object"||typeof t=="function")?t:bn(e)}function DT(e){return DT=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},DT(e)}function gn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lHe=function(e,t,r,n,i,a,s,o){if(!e){var l;if(t===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,i,a,s,o],d=0;l=new Error(t.replace(/%s/g,function(){return c[d++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}},cHe=lHe;const _y=Vs(cHe);function uHe(e){if(Array.isArray(e))return e}function dHe(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var s=e[Symbol.iterator](),o;!(n=(o=s.next()).done)&&(r.push(o.value),!(t&&r.length===t));n=!0);}catch(l){i=!0,a=l}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw a}}return r}function fHe(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function MT(e,t){return uHe(e)||dHe(e,t)||fHe()}function hHe(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function pHe(e,t){if(e==null)return{};var r=hHe(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Nb=function(t){return t===Object(t)?Object.keys(t):[]},Gce=function(t){return t===Object(t)?Object.values(t):[]};function Kce(e,t){var r=Object.assign({},e);return aA(e)&&aA(t)&&Nb(t).forEach(function(n){aA(t[n])?n in e?r[n]=Kce(e[n],t[n]):Object.assign(r,ef({},n,t[n])):Object.assign(r,ef({},n,t[n]))}),r}var X8=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.reduce(function(a,s){return Kce(a,s)},t)},mHe=function(t,r){var n=Object.assign({},t);if(r)for(var i=0;i<r.length;i++)delete n[r[i]];return n},aA=function(t){return t===Object(t)&&!(t instanceof Date)&&!Array.isArray(t)},gHe=function(t){return(t||[]).filter(Boolean)},G9=function(t){return t[0]==="&"},xHe=function(t){return!G9(t)},IK=function(t){return t.replace(/-(\w)/g,function(r,n){return n.toUpperCase()})},vHe=function(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=Nb(t),i={},a=0,s=n.length;a<s;a+=1){var o=n[a],l=Object.prototype.toString.call(t[o])!=="[object Object]"||o[0]===":"||o[0]==="@"||r.indexOf(o)>=0;l&&(i[o]=t[o])}return i},Xce=function(t,r){for(var n=r.map(IK),i=Nb(t),a={},s=0,o=i.length;s<o;s+=1){var l=i[s];(r.indexOf(l)>=0||n.indexOf(IK(l))>=0)&&(a[l]=t[l])}return a},yHe=function e(t,r){for(var n=X8.apply(void 0,[{},mHe(t,r)].concat(Wo(Gce(Xce(t,r))))),i=Nb(n).filter(G9),a=0,s=i.length;a<s;a+=1){var o=i[a],l=e(n[o],r);r.indexOf(o)>=0?(delete n[o],n=X8({},n,l)):n[o]=l}return n};function OK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function PK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OK(Object(r),!0).forEach(function(n){ef(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var bHe=["animationName"],Yce=function(t){var r=t.style,n=t.className;return PK(PK({},r?{style:vHe(r,bHe)}:{}),n?{className:n}:{})},Qce=I.createContext(Yce);Qce.Provider;var Jce=function(t){if(t){if(typeof t=="string")return[t];if(!Array.isArray(t)){var r=t;return Nb(t).reduce(function(n,i){return n.concat(r[i]?[i]:[])},[])}}else return[];return t},wHe={},SHe=function(t){return function(r,n){var i=n||wHe;t.memoize=t.memoize||new WeakMap;var a;t.memoize.has(i)?a=t.memoize.get(i):(a={},t.memoize.set(i,a));var s=Jce(r).join(" ");return s in a?a[s]:a[s]=t(r||[],n)}};function RK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function z1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RK(Object(r),!0).forEach(function(n){ef(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var EHe=function(t){var r=t&&Nb(t)[0];return r&&r.split("__")[0].split("--")[0]},CHe=function(t,r,n){if(t){var i=t.split(" ")[0],a=[].concat(Wo(r.length===0?n.map(function(s){return"".concat(i,"--").concat(s.substring(1))}):[]),Wo(r.map(function(s){return"".concat(i,"__").concat(s)})));return r.length===0?[t].concat(Wo(a)):a}};function Zce(e){var t=e.style,r=e.className,n=e.classNames,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yce,a=r||EHe(n)||(t==null?void 0:t.className),s=typeof t=="function"?t:SHe(function(f,p){var m=Jce(f);_y(Array.isArray(m),"First parameter must be a string, an array of strings, a plain object with boolean values, or a falsy value."),_y(!p||aA(p),"Optional second parameter must be a plain object.");var x=m.filter(G9),y=m.filter(xHe),b=y.length>0?function(C){return Gce(Xce(C,y))}:function(C){return[C]},S=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return b(yHe(A,x))},_=CHe(a,y,x);return Zce(z1(z1(z1({},(t||p)&&{style:X8.apply(void 0,[{}].concat(Wo(S(p)),Wo(S(t))))}),_&&{className:_.join(" ")}),n&&{classNames:n}),i)}),o=z1({},typeof t=="function"?t:{style:t}),l=Wo(new Set([].concat(Wo(o.className?o.className.split(" "):[]),Wo(a?a.split(" "):[])))),c=n?gHe(l.map(function(f){return n[f]})):l,d=i(z1(z1({},o),c.length>0?{className:c.join(" ")}:{}));return Object.assign(s,d),s}function jK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Dw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jK(Object(r),!0).forEach(function(n){ef(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var kHe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.reduce(function(i,a){return Dw(Dw(Dw({},i),typeof a=="function"?a:{}),{},{style:Dw(Dw({},i.style),typeof a=="function"?a.style:a)})},{})},K9=function(t,r,n){var i=r.style,a=r.className,s=r.classNames,o=I.useContext(Qce),l=I.useMemo(function(){return Zce({style:i,className:a,classNames:s},o)},[i,a,s,o]);return l(n,t)},sA=function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},Gd={id:"__id__",display:"__display__"},DK=function(t,r){_y(r==="id"||r==="display",'Second arg must be either "id" or "display", got: "'.concat(r,'"'));var n=t.indexOf(Gd.display),i=t.indexOf(Gd.id);return n<0&&(n=null),i<0&&(i=null),_y(n!==null||i!==null,"The markup '".concat(t,"' does not contain either of the placeholders '__id__' or '__display__'")),n!==null&&i!==null?r==="id"&&i<=n||r==="display"&&n<=i?0:1:0},_He=function(t){var r=/^\/(.+)\/(\w+)?$/;return new RegExp(t.map(function(n){var i=r.exec(n.toString()),a=MT(i,3),s=a[1],o=a[2];return _y(!o,"RegExp flags are not supported. Change /".concat(s,"/").concat(o," into /").concat(s,"/")),"(".concat(s,")")}).join("|"),"g")},eue=function(t){var r=0;return t.indexOf("__id__")>=0&&r++,t.indexOf("__display__")>=0&&r++,r},NHe=function(){},bC=function(t,r,n){for(var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NHe,a=_He(r.map(function(j){return j.regex})),s=2,o=r.map(function(j){var P=j.markup,O=s;return s+=eue(P)+1,O}),l,c=0,d=0;(l=a.exec(t))!==null;){var f=o.find(function(j){return!!l[j]}),p=o.indexOf(f),m=r[p],x=m.markup,y=m.displayTransform,b=f+DK(x,"id"),S=f+DK(x,"display"),_=l[b],C=y(_,l[S]),A=t.substring(c,l.index);i(A,c,d),d+=A.length,n(l[0],l.index,d,_,C,p,c),d+=C.length,c=a.lastIndex}c<t.length&&i(t.substring(c),c,d)},Jm=function(t,r){var n="";return bC(t,r,function(i,a,s,o,l){n+=l},function(i){n+=i}),n},Uo=function(t,r,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"START";if(typeof n!="number")return n;var a,s=function(c,d,f){a===void 0&&f+c.length>=n&&(a=d+n-f)},o=function(c,d,f,p,m,x,y){a===void 0&&f+m.length>n&&(i==="NULL"?a=null:a=d+(i==="END"?c.length:0))};return bC(t,r,o,s),a===void 0?t.length:a},P2=function(t,r,n,i){return t.substring(0,r)+i+t.substring(n)},AHe=function(t,r,n,i){var a=n.selectionStartBefore,s=n.selectionEndBefore,o=n.selectionEndAfter,l=Jm(t,i),c=l.length-r.length;a==="undefined"&&(a=o+c),s==="undefined"&&(s=a),a===s&&s===o&&l.length===r.length&&(a=a-1);var d=r.slice(a,o),f=Math.min(a,o),p=s;a===o&&(p=Math.max(s,a+c));var m=Uo(t,i,f,"START"),x=Uo(t,i,p,"END"),y=Uo(t,i,f,"NULL"),b=Uo(t,i,p,"NULL"),S=y===null||b===null,_=P2(t,m,x,d);if(!S){var C=Jm(_,i);if(C!==r){for(f=0;r[f]===C[f];)f++;d=r.slice(f,o),p=l.lastIndexOf(r.substring(o)),m=Uo(t,i,f,"START"),x=Uo(t,i,p,"END"),_=P2(t,m,x,d)}}return _},MK=function(t,r,n){var i=n,a=!1,s=function(l,c,d,f,p,m,x){d<=n&&d+p.length>n&&(i=d,a=!0)};if(bC(t,r,s),a)return i},s2=function(t,r){var n=[];return bC(t,r,function(i,a,s,o,l,c,d){n.push({id:o,display:l,childIndex:c,index:a,plainTextIndex:s})}),n},tue=function(t,r){return"".concat(t,"-").concat(r)},B_=function(t){return Object.values(t).reduce(function(r,n){var i=n.results;return r+i.length},0)},THe=function(t,r){var n=s2(t,r),i=n[n.length-1];return i?i.plainTextIndex+i.display.length:0},IHe=function(t){var r=sA(t),n=t[t.indexOf(Gd.display)+Gd.display.length],i=t[t.indexOf(Gd.id)+Gd.id.length];return new RegExp(r.replace(Gd.display,"([^".concat(sA(n||""),"]+?)")).replace(Gd.id,"([^".concat(sA(i||""),"]+?)")))},zp=function(t){return I.Children.toArray(t).map(function(r){var n=r.props,i=n.markup,a=n.regex,s=n.displayTransform;return{markup:i,regex:a?OHe(a,i):IHe(i),displayTransform:s||function(o,l){return l||o}}})},OHe=function(t,r){var n=new RegExp(t.toString()+"|").exec("").length-1,i=eue(r);return _y(n===i,"Number of capturing groups in RegExp ".concat(t.toString()," (").concat(n,") does not match the number of placeholders in the markup '").concat(r,"' (").concat(i,")")),t},PHe=function(t,r,n){return t.replace(Gd.id,r).replace(Gd.display,n)},RHe=[{base:"A",letters:/(&#65;|&#9398;|&#65313;|&#192;|&#193;|&#194;|&#7846;|&#7844;|&#7850;|&#7848;|&#195;|&#256;|&#258;|&#7856;|&#7854;|&#7860;|&#7858;|&#550;|&#480;|&#196;|&#478;|&#7842;|&#197;|&#506;|&#461;|&#512;|&#514;|&#7840;|&#7852;|&#7862;|&#7680;|&#260;|&#570;|&#11375;|[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F])/g},{base:"AA",letters:/(&#42802;|[\uA732])/g},{base:"AE",letters:/(&#198;|&#508;|&#482;|[\u00C6\u01FC\u01E2])/g},{base:"AO",letters:/(&#42804;|[\uA734])/g},{base:"AU",letters:/(&#42806;|[\uA736])/g},{base:"AV",letters:/(&#42808;|&#42810;|[\uA738\uA73A])/g},{base:"AY",letters:/(&#42812;|[\uA73C])/g},{base:"B",letters:/(&#66;|&#9399;|&#65314;|&#7682;|&#7684;|&#7686;|&#579;|&#386;|&#385;|[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181])/g},{base:"C",letters:/(&#67;|&#9400;|&#65315;|&#262;|&#264;|&#266;|&#268;|&#199;|&#7688;|&#391;|&#571;|&#42814;|[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E])/g},{base:"D",letters:/(&#68;|&#9401;|&#65316;|&#7690;|&#270;|&#7692;|&#7696;|&#7698;|&#7694;|&#272;|&#395;|&#394;|&#393;|&#42873;|&#208;|[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779\u00D0])/g},{base:"DZ",letters:/(&#497;|&#452;|[\u01F1\u01C4])/g},{base:"Dz",letters:/(&#498;|&#453;|[\u01F2\u01C5])/g},{base:"E",letters:/(&#69;|&#9402;|&#65317;|&#200;|&#201;|&#202;|&#7872;|&#7870;|&#7876;|&#7874;|&#7868;|&#274;|&#7700;|&#7702;|&#276;|&#278;|&#203;|&#7866;|&#282;|&#516;|&#518;|&#7864;|&#7878;|&#552;|&#7708;|&#280;|&#7704;|&#7706;|&#400;|&#398;|[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E])/g},{base:"F",letters:/(&#70;|&#9403;|&#65318;|&#7710;|&#401;|&#42875;|[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B])/g},{base:"G",letters:/(&#71;|&#9404;|&#65319;|&#500;|&#284;|&#7712;|&#286;|&#288;|&#486;|&#290;|&#484;|&#403;|&#42912;|&#42877;|&#42878;|[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E])/g},{base:"H",letters:/(&#72;|&#9405;|&#65320;|&#292;|&#7714;|&#7718;|&#542;|&#7716;|&#7720;|&#7722;|&#294;|&#11367;|&#11381;|&#42893;|[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D])/g},{base:"I",letters:/(&#73;|&#9406;|&#65321;|&#204;|&#205;|&#206;|&#296;|&#298;|&#300;|&#304;|&#207;|&#7726;|&#7880;|&#463;|&#520;|&#522;|&#7882;|&#302;|&#7724;|&#407;|[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197])/g},{base:"J",letters:/(&#74;|&#9407;|&#65322;|&#308;|&#584;|[\u004A\u24BF\uFF2A\u0134\u0248])/g},{base:"K",letters:/(&#75;|&#9408;|&#65323;|&#7728;|&#488;|&#7730;|&#310;|&#7732;|&#408;|&#11369;|&#42816;|&#42818;|&#42820;|&#42914;|[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2])/g},{base:"L",letters:/(&#76;|&#9409;|&#65324;|&#319;|&#313;|&#317;|&#7734;|&#7736;|&#315;|&#7740;|&#7738;|&#321;|&#573;|&#11362;|&#11360;|&#42824;|&#42822;|&#42880;|[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780])/g},{base:"LJ",letters:/(&#455;|[\u01C7])/g},{base:"Lj",letters:/(&#456;|[\u01C8])/g},{base:"M",letters:/(&#77;|&#9410;|&#65325;|&#7742;|&#7744;|&#7746;|&#11374;|&#412;|[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C])/g},{base:"N",letters:/(&#78;|&#9411;|&#65326;|&#504;|&#323;|&#209;|&#7748;|&#327;|&#7750;|&#325;|&#7754;|&#7752;|&#544;|&#413;|&#42896;|&#42916;|&#330;|[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4\u014A])/g},{base:"NJ",letters:/(&#458;|[\u01CA])/g},{base:"Nj",letters:/(&#459;|[\u01CB])/g},{base:"O",letters:/(&#79;|&#9412;|&#65327;|&#210;|&#211;|&#212;|&#7890;|&#7888;|&#7894;|&#7892;|&#213;|&#7756;|&#556;|&#7758;|&#332;|&#7760;|&#7762;|&#334;|&#558;|&#560;|&#214;|&#554;|&#7886;|&#336;|&#465;|&#524;|&#526;|&#416;|&#7900;|&#7898;|&#7904;|&#7902;|&#7906;|&#7884;|&#7896;|&#490;|&#492;|&#216;|&#510;|&#390;|&#415;|&#42826;|&#42828;|[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C])/g},{base:"OE",letters:/(&#338;|[\u0152])/g},{base:"OI",letters:/(&#418;|[\u01A2])/g},{base:"OO",letters:/(&#42830;|[\uA74E])/g},{base:"OU",letters:/(&#546;|[\u0222])/g},{base:"P",letters:/(&#80;|&#9413;|&#65328;|&#7764;|&#7766;|&#420;|&#11363;|&#42832;|&#42834;|&#42836;|[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754])/g},{base:"Q",letters:/(&#81;|&#9414;|&#65329;|&#42838;|&#42840;|&#586;|[\u0051\u24C6\uFF31\uA756\uA758\u024A])/g},{base:"R",letters:/(&#82;|&#9415;|&#65330;|&#340;|&#7768;|&#344;|&#528;|&#530;|&#7770;|&#7772;|&#342;|&#7774;|&#588;|&#11364;|&#42842;|&#42918;|&#42882;|[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782])/g},{base:"S",letters:/(&#83;|&#9416;|&#65331;|&#7838;|&#346;|&#7780;|&#348;|&#7776;|&#352;|&#7782;|&#7778;|&#7784;|&#536;|&#350;|&#11390;|&#42920;|&#42884;|[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784])/g},{base:"T",letters:/(&#84;|&#9417;|&#65332;|&#7786;|&#356;|&#7788;|&#538;|&#354;|&#7792;|&#7790;|&#358;|&#428;|&#430;|&#574;|&#42886;|[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786])/g},{base:"TH",letters:/(&#222;|[\u00DE])/g},{base:"TZ",letters:/(&#42792;|[\uA728])/g},{base:"U",letters:/(&#85;|&#9418;|&#65333;|&#217;|&#218;|&#219;|&#360;|&#7800;|&#362;|&#7802;|&#364;|&#220;|&#475;|&#471;|&#469;|&#473;|&#7910;|&#366;|&#368;|&#467;|&#532;|&#534;|&#431;|&#7914;|&#7912;|&#7918;|&#7916;|&#7920;|&#7908;|&#7794;|&#370;|&#7798;|&#7796;|&#580;|[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244])/g},{base:"V",letters:/(&#86;|&#9419;|&#65334;|&#7804;|&#7806;|&#434;|&#42846;|&#581;|[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245])/g},{base:"VY",letters:/(&#42848;|[\uA760])/g},{base:"W",letters:/(&#87;|&#9420;|&#65335;|&#7808;|&#7810;|&#372;|&#7814;|&#7812;|&#7816;|&#11378;|[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72])/g},{base:"X",letters:/(&#88;|&#9421;|&#65336;|&#7818;|&#7820;|[\u0058\u24CD\uFF38\u1E8A\u1E8C])/g},{base:"Y",letters:/(&#89;|&#9422;|&#65337;|&#7922;|&#221;|&#374;|&#7928;|&#562;|&#7822;|&#376;|&#7926;|&#7924;|&#435;|&#590;|&#7934;|[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE])/g},{base:"Z",letters:/(&#90;|&#9423;|&#65338;|&#377;|&#7824;|&#379;|&#381;|&#7826;|&#7828;|&#437;|&#548;|&#11391;|&#11371;|&#42850;|[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762])/g},{base:"a",letters:/(&#97;|&#9424;|&#65345;|&#7834;|&#224;|&#225;|&#226;|&#7847;|&#7845;|&#7851;|&#7849;|&#227;|&#257;|&#259;|&#7857;|&#7855;|&#7861;|&#7859;|&#551;|&#481;|&#228;|&#479;|&#7843;|&#229;|&#507;|&#462;|&#513;|&#515;|&#7841;|&#7853;|&#7863;|&#7681;|&#261;|&#11365;|&#592;|[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250])/g},{base:"aa",letters:/(&#42803;|[\uA733])/g},{base:"ae",letters:/(&#230;|&#509;|&#483;|[\u00E6\u01FD\u01E3])/g},{base:"ao",letters:/(&#42805;|[\uA735])/g},{base:"au",letters:/(&#42807;|[\uA737])/g},{base:"av",letters:/(&#42809;|&#42811;|[\uA739\uA73B])/g},{base:"ay",letters:/(&#42813;|[\uA73D])/g},{base:"b",letters:/(&#98;|&#9425;|&#65346;|&#7683;|&#7685;|&#7687;|&#384;|&#387;|&#595;|[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253])/g},{base:"c",letters:/(&#99;|&#9426;|&#65347;|&#263;|&#265;|&#267;|&#269;|&#231;|&#7689;|&#392;|&#572;|&#42815;|&#8580;|[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184])/g},{base:"d",letters:/(&#100;|&#9427;|&#65348;|&#7691;|&#271;|&#7693;|&#7697;|&#7699;|&#7695;|&#273;|&#396;|&#598;|&#599;|&#42874;|&#240;|[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A\u00F0])/g},{base:"dz",letters:/(&#499;|&#454;|[\u01F3\u01C6])/g},{base:"e",letters:/(&#101;|&#9428;|&#65349;|&#232;|&#233;|&#234;|&#7873;|&#7871;|&#7877;|&#7875;|&#7869;|&#275;|&#7701;|&#7703;|&#277;|&#279;|&#235;|&#7867;|&#283;|&#517;|&#519;|&#7865;|&#7879;|&#553;|&#7709;|&#281;|&#7705;|&#7707;|&#583;|&#603;|&#477;|[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD])/g},{base:"f",letters:/(&#102;|&#9429;|&#65350;|&#7711;|&#402;|&#42876;|[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C])/g},{base:"g",letters:/(&#103;|&#9430;|&#65351;|&#501;|&#285;|&#7713;|&#287;|&#289;|&#487;|&#291;|&#485;|&#608;|&#42913;|&#7545;|&#42879;|[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F])/g},{base:"h",letters:/(&#104;|&#9431;|&#65352;|&#293;|&#7715;|&#7719;|&#543;|&#7717;|&#7721;|&#7723;|&#7830;|&#295;|&#11368;|&#11382;|&#613;|[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265])/g},{base:"hv",letters:/(&#405;|[\u0195])/g},{base:"i",letters:/(&#105;|&#9432;|&#65353;|&#236;|&#237;|&#238;|&#297;|&#299;|&#301;|&#239;|&#7727;|&#7881;|&#464;|&#521;|&#523;|&#7883;|&#303;|&#7725;|&#616;|&#305;|[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131])/g},{base:"ij",letters:/(&#307;|[\u0133])/g},{base:"j",letters:/(&#106;|&#9433;|&#65354;|&#309;|&#496;|&#585;|[\u006A\u24D9\uFF4A\u0135\u01F0\u0249])/g},{base:"k",letters:/(&#107;|&#9434;|&#65355;|&#7729;|&#489;|&#7731;|&#311;|&#7733;|&#409;|&#11370;|&#42817;|&#42819;|&#42821;|&#42915;|[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3])/g},{base:"l",letters:/(&#108;|&#9435;|&#65356;|&#320;|&#314;|&#318;|&#7735;|&#7737;|&#316;|&#7741;|&#7739;|&#322;|&#410;|&#619;|&#11361;|&#42825;|&#42881;|&#42823;|[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u0142\u019A\u026B\u2C61\uA749\uA781\uA747])/g},{base:"lj",letters:/(&#457;|[\u01C9])/g},{base:"m",letters:/(&#109;|&#9436;|&#65357;|&#7743;|&#7745;|&#7747;|&#625;|&#623;|[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F])/g},{base:"n",letters:/(&#110;|&#9437;|&#65358;|&#505;|&#324;|&#241;|&#7749;|&#328;|&#7751;|&#326;|&#7755;|&#7753;|&#414;|&#626;|&#329;|&#42897;|&#42917;|&#331;|[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5\u014B])/g},{base:"nj",letters:/(&#460;|[\u01CC])/g},{base:"o",letters:/(&#111;|&#9438;|&#65359;|&#242;|&#243;|&#244;|&#7891;|&#7889;|&#7895;|&#7893;|&#245;|&#7757;|&#557;|&#7759;|&#333;|&#7761;|&#7763;|&#335;|&#559;|&#561;|&#246;|&#555;|&#7887;|&#337;|&#466;|&#525;|&#527;|&#417;|&#7901;|&#7899;|&#7905;|&#7903;|&#7907;|&#7885;|&#7897;|&#491;|&#493;|&#248;|&#511;|&#596;|&#42827;|&#42829;|&#629;|[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275])/g},{base:"oe",letters:/(&#339;|[\u0153])/g},{base:"oi",letters:/(&#419;|[\u01A3])/g},{base:"ou",letters:/(&#547;|[\u0223])/g},{base:"oo",letters:/(&#42831;|[\uA74F])/g},{base:"p",letters:/(&#112;|&#9439;|&#65360;|&#7765;|&#7767;|&#421;|&#7549;|&#42833;|&#42835;|&#42837;|[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755])/g},{base:"q",letters:/(&#113;|&#9440;|&#65361;|&#587;|&#42839;|&#42841;|[\u0071\u24E0\uFF51\u024B\uA757\uA759])/g},{base:"r",letters:/(&#114;|&#9441;|&#65362;|&#341;|&#7769;|&#345;|&#529;|&#531;|&#7771;|&#7773;|&#343;|&#7775;|&#589;|&#637;|&#42843;|&#42919;|&#42883;|[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783])/g},{base:"s",letters:/(&#115;|&#9442;|&#65363;|&#347;|&#7781;|&#349;|&#7777;|&#353;|&#7783;|&#7779;|&#7785;|&#537;|&#351;|&#575;|&#42921;|&#42885;|&#7835;|&#383;|[\u0073\u24E2\uFF53\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B\u017F])/g},{base:"ss",letters:/(&#223;|[\u00DF])/g},{base:"t",letters:/(&#116;|&#9443;|&#65364;|&#7787;|&#7831;|&#357;|&#7789;|&#539;|&#355;|&#7793;|&#7791;|&#359;|&#429;|&#648;|&#11366;|&#42887;|[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787])/g},{base:"th",letters:/(&#254;|[\u00FE])/g},{base:"tz",letters:/(&#42793;|[\uA729])/g},{base:"u",letters:/(&#117;|&#9444;|&#65365;|&#249;|&#250;|&#251;|&#361;|&#7801;|&#363;|&#7803;|&#365;|&#252;|&#476;|&#472;|&#470;|&#474;|&#7911;|&#367;|&#369;|&#468;|&#533;|&#535;|&#432;|&#7915;|&#7913;|&#7919;|&#7917;|&#7921;|&#7909;|&#7795;|&#371;|&#7799;|&#7797;|&#649;|[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289])/g},{base:"v",letters:/(&#118;|&#9445;|&#65366;|&#7805;|&#7807;|&#651;|&#42847;|&#652;|[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C])/g},{base:"vy",letters:/(&#42849;|[\uA761])/g},{base:"w",letters:/(&#119;|&#9446;|&#65367;|&#7809;|&#7811;|&#373;|&#7815;|&#7813;|&#7832;|&#7817;|&#11379;|[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73])/g},{base:"x",letters:/(&#120;|&#9447;|&#65368;|&#7819;|&#7821;|[\u0078\u24E7\uFF58\u1E8B\u1E8D])/g},{base:"y",letters:/(&#121;|&#9448;|&#65369;|&#7923;|&#253;|&#375;|&#7929;|&#563;|&#7823;|&#255;|&#7927;|&#7833;|&#7925;|&#436;|&#591;|&#7935;|[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF])/g},{base:"z",letters:/(&#122;|&#9449;|&#65370;|&#378;|&#7825;|&#380;|&#382;|&#7827;|&#7829;|&#438;|&#549;|&#576;|&#11372;|&#42851;|[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763])/g}],jHe=function(t){var r=t;return RHe.forEach(function(n){r=r.replace(n.letters,n.base)}),r},FK=function(t){return jHe(t).toLowerCase()},rue=function(t,r,n){return n?FK(t).indexOf(FK(r)):t.toLowerCase().indexOf(r.toLowerCase())},DHe=function(){return!!document.documentMode},Y8=function(t){return typeof t=="number"},MHe=function(t){return t===Object(t)?Object.keys(t):[]},FHe=function(t){for(var r,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];var s=(r=[]).concat.apply(r,i);return Object.keys(t).reduce(function(o,l){return t.hasOwnProperty(l)&&!s.includes(l)&&t[l]!==void 0&&(o[l]=t[l]),o},{})},LHe=["style","className","classNames"];function LK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function BK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LK(Object(r),!0).forEach(function(n){gn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function E3(e,t){var r=function(i){var a=function(l){var c=l.style,d=l.className,f=l.classNames,p=pHe(l,LHe),m=t?t(p):void 0,x=K9(e,{style:c,className:d,classNames:f},m);return Vr.createElement(i,su({},p,{style:x}))},s=i.displayName||i.name||"Component";return a.displayName="defaultStyle(".concat(s,")"),Vr.forwardRef(function(o,l){return a(BK(BK({},o),{},{ref:l}))})};return r}var BHe=function(t,r){return t.hasOwnProperty(r)?t[r]++:t[r]=0,r+"_"+t[r]};function nue(e){var t=e.selectionStart,r=e.selectionEnd,n=e.value,i=n===void 0?"":n,a=e.onCaretPositionChange,s=e.containerRef,o=e.children;e.singleLine;var l=e.style,c=I.useState({left:void 0,top:void 0}),d=MT(c,2),f=d[0],p=d[1],m=I.useState(),x=MT(m,2),y=x[0],b=x[1];I.useEffect(function(){S()});var S=function(){if(y){var X=y.offsetLeft,W=y.offsetTop;if(!(f.left===X&&f.top===W)){var Q={left:X,top:W};p(Q),a(Q)}}},_=zp(o),C;r===t&&(C=Uo(i,_,t,"START"));var A=[],j={},P=A,O=0,D=function(X,W,Q){if(Y8(C)&&C>=W&&C<=W+X.length){var te=C-W;P.push(B(X.substring(0,te),O)),P=[B(X.substring(te),O)]}else P.push(B(X,O));O++},L=function(X,W,Q,te,J,Y,pe){var _e=BHe(j,te);P.push(H(te,J,Y,_e))},B=function(X,W){return Vr.createElement("span",su({},l("substring"),{key:W}),X)},H=function(X,W,Q,te){var J={id:X,display:W,key:te},Y=I.Children.toArray(o)[Q];return Vr.cloneElement(Y,J)},z=function(X){return Vr.createElement("span",su({},l("caret"),{ref:b,key:"caret"}),X)};return bC(i,_,L,D),P.push(" "),P!==A&&A.push(z(P)),Vr.createElement("div",su({},l,{ref:s}),A)}nue.propTypes={selectionStart:zt.number,selectionEnd:zt.number,value:zt.string.isRequired,onCaretPositionChange:zt.func.isRequired,containerRef:zt.oneOfType([zt.func,zt.shape({current:typeof Element>"u"?zt.any:zt.instanceOf(Element)})]),children:zt.oneOfType([zt.element,zt.arrayOf(zt.element)]).isRequired};var UHe=E3({position:"relative",boxSizing:"border-box",width:"100%",color:"transparent",overflow:"hidden",whiteSpace:"pre-wrap",wordWrap:"break-word",border:"1px solid transparent",textAlign:"start","&singleLine":{whiteSpace:"pre",wordWrap:null},substring:{visibility:"hidden"}},function(e){return{"&singleLine":e.singleLine}}),$He=UHe(nue);function iue(e){var t=e.id,r=e.focused,n=e.ignoreAccents,i=e.index,a=e.onClick,s=e.onMouseEnter,o=e.query,l=e.renderSuggestion,c=e.suggestion,d=e.style;e.className,e.classNames;var f={onClick:a,onMouseEnter:s},p=function(){var b=m(),S=x(b);return l?l(c,o,S,i,r):S},m=function(){if(typeof c=="string")return c;var b=c.id,S=c.display;return b===void 0||!S?b:S},x=function(b){var S=rue(b,o,n);return S===-1?Vr.createElement("span",d("display"),b):Vr.createElement("span",d("display"),b.substring(0,S),Vr.createElement("b",d("highlight"),b.substring(S,S+o.length)),b.substring(S+o.length))};return Vr.createElement("li",su({id:t,role:"option","aria-selected":r},f,d),p())}iue.propTypes={id:zt.string.isRequired,query:zt.string.isRequired,index:zt.number.isRequired,ignoreAccents:zt.bool,suggestion:zt.oneOfType([zt.string,zt.shape({id:zt.oneOfType([zt.string,zt.number]).isRequired,display:zt.string})]).isRequired,renderSuggestion:zt.func,focused:zt.bool};var zHe=E3({cursor:"pointer"},function(e){return{"&focused":e.focused}}),HHe=zHe(iue);function WHe(e){var t=e.style,r=e.className,n=e.classNames,i=K9(VHe,{style:t,className:r,classNames:n}),a=i("spinner");return Vr.createElement("div",i,Vr.createElement("div",a,Vr.createElement("div",a(["element","element1"])),Vr.createElement("div",a(["element","element2"])),Vr.createElement("div",a(["element","element3"])),Vr.createElement("div",a(["element","element4"])),Vr.createElement("div",a(["element","element5"]))))}var VHe={};function aue(e){var t=e.id,r=e.suggestions,n=r===void 0?{}:r,i=e.a11ySuggestionsListLabel,a=e.focusIndex,s=e.position,o=e.left,l=e.right,c=e.top,d=e.scrollFocusedIntoView,f=e.isLoading,p=e.isOpened,m=e.onSelect,x=m===void 0?function(){return null}:m,y=e.ignoreAccents,b=e.containerRef,S=e.children,_=e.style,C=e.customSuggestionsContainer,A=e.onMouseDown,j=e.onMouseEnter,P=I.useState(void 0),O=MT(P,2),D=O[0],L=O[1];I.useEffect(function(){if(!(!D||D.offsetHeight>=D.scrollHeight||!d)){var Q=D.scrollTop,te=D.children[a].getBoundingClientRect(),J=te.top,Y=te.bottom,pe=D.getBoundingClientRect(),_e=pe.top;J=J-_e+Q,Y=Y-_e+Q,J<Q?D.scrollTop=J:Y>D.offsetHeight&&(D.scrollTop=Y-D.offsetHeight)}},[a,d,D]);var B=function(){var te=Vr.createElement("ul",su({ref:L,id:t,role:"listbox","aria-label":i},_("list")),Object.values(n).reduce(function(J,Y){var pe=Y.results,_e=Y.queryInfo;return[].concat(jT(J),jT(pe.map(function(ee,de){return H(ee,_e,J.length+de)})))},[]));return C?C(te):te},H=function(te,J,Y){var pe=Y===a,_e=J.childIndex,ee=J.query,de=I.Children.toArray(S)[_e].props.renderSuggestion;return Vr.createElement(HHe,{style:_("item"),key:"".concat(_e,"-").concat(W(te)),id:tue(t,Y),query:ee,index:Y,ignoreAccents:y,renderSuggestion:de,suggestion:te,focused:pe,onClick:function(){return X(te,J)},onMouseEnter:function(){return ie(Y)}})},z=function(){if(f)return Vr.createElement(WHe,{style:_("loadingIndicator")})},ie=function(te,J){j&&j(te)},X=function(te,J){x(te,J)},W=function(te){return typeof te=="string"?te:te.id};return p?Vr.createElement("div",su({},kHe({position:s||"absolute",left:o,right:l,top:c},_),{onMouseDown:A,ref:b}),B(),z()):null}aue.propTypes={id:zt.string.isRequired,suggestions:zt.object.isRequired,a11ySuggestionsListLabel:zt.string,focusIndex:zt.number,position:zt.string,left:zt.number,right:zt.number,top:zt.number,scrollFocusedIntoView:zt.bool,isLoading:zt.bool,isOpened:zt.bool.isRequired,onSelect:zt.func,ignoreAccents:zt.bool,customSuggestionsContainer:zt.func,containerRef:zt.oneOfType([zt.func,zt.shape({current:typeof Element>"u"?zt.any:zt.instanceOf(Element)})])};var qHe=E3({zIndex:1,backgroundColor:"white",marginTop:14,minWidth:100,list:{margin:0,padding:0,listStyleType:"none"}}),GHe=qHe(aue);function UK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function $u(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UK(Object(r),!0).forEach(function(n){gn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KHe(e){var t=XHe();return function(){var n=DT(e),i;if(t){var a=DT(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return oHe(this,i)}}function XHe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var YHe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t instanceof RegExp)return t;var n=r.allowSpaceInQuery,i=sA(t);return new RegExp("(?:^|\\s)(".concat(i,"([^").concat(n?"":"\\s").concat(i,"]*))$"))},QHe=function(t,r){return t instanceof Array?function(n,i){for(var a=[],s=0,o=t.length;s<o;++s){var l=t[s].display||t[s].id;rue(l,n,r)>=0&&a.push(t[s])}return a}:t},H1={TAB:9,RETURN:13,ESC:27,UP:38,DOWN:40},U_=!1,sue={singleLine:zt.bool,allowSpaceInQuery:zt.bool,allowSuggestionsAboveCursor:zt.bool,forceSuggestionsAboveCursor:zt.bool,ignoreAccents:zt.bool,a11ySuggestionsListLabel:zt.string,value:zt.string,onKeyDown:zt.func,customSuggestionsContainer:zt.func,onSelect:zt.func,onBlur:zt.func,onChange:zt.func,suggestionsPortalHost:typeof Element>"u"?zt.any:zt.PropTypes.instanceOf(Element),inputRef:zt.oneOfType([zt.func,zt.shape({current:typeof Element>"u"?zt.any:zt.instanceOf(Element)})]),children:zt.oneOfType([zt.element,zt.arrayOf(zt.element)]).isRequired},X9=function(e){sHe(r,e);var t=KHe(r);function r(n){var i;return nHe(this,r),i=t.call(this,n),gn(bn(i),"setContainerElement",function(a){i.containerElement=a}),gn(bn(i),"getInputProps",function(){var a=i.props,s=a.readOnly,o=a.disabled,l=a.style,c=FHe(i.props,["style","classNames","className"],MHe(sue));return $u($u($u($u({},c),l("input")),{},{value:i.getPlainText(),onScroll:i.updateHighlighterScroll},!s&&!o&&{onChange:i.handleChange,onSelect:i.handleSelect,onKeyDown:i.handleKeyDown,onBlur:i.handleBlur,onCompositionStart:i.handleCompositionStart,onCompositionEnd:i.handleCompositionEnd}),i.isOpened()&&{role:"combobox","aria-controls":i.uuidSuggestionsOverlay,"aria-expanded":!0,"aria-autocomplete":"list","aria-haspopup":"listbox","aria-activedescendant":tue(i.uuidSuggestionsOverlay,i.state.focusIndex)})}),gn(bn(i),"renderControl",function(){var a=i.props,s=a.singleLine,o=a.style,l=i.getInputProps();return Vr.createElement("div",o("control"),i.renderHighlighter(),s?i.renderInput(l):i.renderTextarea(l))}),gn(bn(i),"renderInput",function(a){return Vr.createElement("input",su({type:"text",ref:i.setInputRef},a))}),gn(bn(i),"renderTextarea",function(a){return Vr.createElement("textarea",su({ref:i.setInputRef},a))}),gn(bn(i),"setInputRef",function(a){i.inputElement=a;var s=i.props.inputRef;typeof s=="function"?s(a):s&&(s.current=a)}),gn(bn(i),"setSuggestionsElement",function(a){i.suggestionsElement=a}),gn(bn(i),"renderSuggestionsOverlay",function(){if(!Y8(i.state.selectionStart))return null;var a=i.state.suggestionsPosition,s=a.position,o=a.left,l=a.top,c=a.right,d=Vr.createElement(GHe,{id:i.uuidSuggestionsOverlay,style:i.props.style("suggestions"),position:s,left:o,top:l,right:c,focusIndex:i.state.focusIndex,scrollFocusedIntoView:i.state.scrollFocusedIntoView,containerRef:i.setSuggestionsElement,suggestions:i.state.suggestions,customSuggestionsContainer:i.props.customSuggestionsContainer,onSelect:i.addMention,onMouseDown:i.handleSuggestionsMouseDown,onMouseEnter:i.handleSuggestionsMouseEnter,isLoading:i.isLoading(),isOpened:i.isOpened(),ignoreAccents:i.props.ignoreAccents,a11ySuggestionsListLabel:i.props.a11ySuggestionsListLabel},i.props.children);return i.props.suggestionsPortalHost?UL.createPortal(d,i.props.suggestionsPortalHost):d}),gn(bn(i),"renderHighlighter",function(){var a=i.state,s=a.selectionStart,o=a.selectionEnd,l=i.props,c=l.singleLine,d=l.children,f=l.value,p=l.style;return Vr.createElement($He,{containerRef:i.setHighlighterElement,style:p("highlighter"),value:f,singleLine:c,selectionStart:s,selectionEnd:o,onCaretPositionChange:i.handleCaretPositionChange},d)}),gn(bn(i),"setHighlighterElement",function(a){i.highlighterElement=a}),gn(bn(i),"handleCaretPositionChange",function(a){i.setState({caretPosition:a})}),gn(bn(i),"getPlainText",function(){return Jm(i.props.value||"",zp(i.props.children))}),gn(bn(i),"executeOnChange",function(a){for(var s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];if(i.props.onChange){var c;return(c=i.props).onChange.apply(c,[a].concat(o))}if(i.props.valueLink){var d;return(d=i.props.valueLink).requestChange.apply(d,[a.target.value].concat(o))}}),gn(bn(i),"handleChange",function(a){if(U_=!1,DHe()){var s=document.activeElement&&document.activeElement.contentDocument||document;if(s.activeElement!==a.target)return}var o=i.props.value||"",l=zp(i.props.children),c=a.target.value,d=i.state.selectionStart;d==null&&(d=a.target.selectionStart);var f=i.state.selectionEnd;f==null&&(f=a.target.selectionEnd);var p=AHe(o,c,{selectionStartBefore:d,selectionEndBefore:f,selectionEndAfter:a.target.selectionEnd},l);c=Jm(p,l);var m=a.target.selectionStart,x=a.target.selectionEnd,y=!1,b=MK(o,l,m);b!==void 0&&i.state.selectionEnd>b&&(m=b+(a.nativeEvent.data?a.nativeEvent.data.length:0),x=m,y=!0),i.setState({selectionStart:m,selectionEnd:x,setSelectionAfterMentionChange:y});var S=s2(p,l);a.nativeEvent.isComposing&&m===x&&i.updateMentionsQueries(i.inputElement.value,m);var _={target:{value:p}};i.executeOnChange(_,p,c,S)}),gn(bn(i),"handleSelect",function(a){if(i.setState({selectionStart:a.target.selectionStart,selectionEnd:a.target.selectionEnd}),!U_){var s=i.inputElement;a.target.selectionStart===a.target.selectionEnd?i.updateMentionsQueries(s.value,a.target.selectionStart):i.clearSuggestions(),i.updateHighlighterScroll(),i.props.onSelect(a)}}),gn(bn(i),"handleKeyDown",function(a){var s=B_(i.state.suggestions);if(s===0||!i.suggestionsElement){i.props.onKeyDown(a);return}switch(Object.values(H1).indexOf(a.keyCode)>=0&&(a.preventDefault(),a.stopPropagation()),a.keyCode){case H1.ESC:{i.clearSuggestions();return}case H1.DOWN:{i.shiftFocus(1);return}case H1.UP:{i.shiftFocus(-1);return}case H1.RETURN:{i.selectFocused();return}case H1.TAB:{i.selectFocused();return}default:return}}),gn(bn(i),"shiftFocus",function(a){var s=B_(i.state.suggestions);i.setState({focusIndex:(s+i.state.focusIndex+a)%s,scrollFocusedIntoView:!0})}),gn(bn(i),"selectFocused",function(){var a=i.state,s=a.suggestions,o=a.focusIndex,l=Object.values(s).reduce(function(f,p){var m=p.results,x=p.queryInfo;return[].concat(jT(f),jT(m.map(function(y){return{result:y,queryInfo:x}})))},[])[o],c=l.result,d=l.queryInfo;i.addMention(c,d),i.setState({focusIndex:0})}),gn(bn(i),"handleBlur",function(a){var s=i._suggestionsMouseDown;i._suggestionsMouseDown=!1,s||i.setState({selectionStart:null,selectionEnd:null}),window.setTimeout(function(){i.updateHighlighterScroll()},1),i.props.onBlur(a,s)}),gn(bn(i),"handleSuggestionsMouseDown",function(a){i._suggestionsMouseDown=!0}),gn(bn(i),"handleSuggestionsMouseEnter",function(a){i.setState({focusIndex:a,scrollFocusedIntoView:!1})}),gn(bn(i),"updateSuggestionsPosition",function(){var a=i.state.caretPosition,s=i.props,o=s.suggestionsPortalHost,l=s.allowSuggestionsAboveCursor,c=s.forceSuggestionsAboveCursor;if(!(!a||!i.suggestionsElement)){var d=i.suggestionsElement,f=i.highlighterElement,p=f.getBoundingClientRect(),m=xD(f,"font-size"),x={left:p.left+a.left,top:p.top+a.top+m},y=Math.max(document.documentElement.clientHeight,window.innerHeight||0);if(d){var b={};if(o){b.position="fixed";var S=x.left,_=x.top;S-=xD(d,"margin-left"),_-=xD(d,"margin-top"),S-=f.scrollLeft,_-=f.scrollTop;var C=Math.max(document.documentElement.clientWidth,window.innerWidth||0);S+d.offsetWidth>C?b.left=Math.max(0,C-d.offsetWidth):b.left=S,l&&_+d.offsetHeight>y&&d.offsetHeight<_-m||c?b.top=Math.max(0,_-d.offsetHeight-m):b.top=_}else{var A=a.left-f.scrollLeft,j=a.top-f.scrollTop;A+d.offsetWidth>i.containerElement.offsetWidth?b.right=0:b.left=A,l&&x.top-f.scrollTop+d.offsetHeight>y&&d.offsetHeight<p.top-m-f.scrollTop||c?b.top=j-d.offsetHeight-m:b.top=j}b.left===i.state.suggestionsPosition.left&&b.top===i.state.suggestionsPosition.top&&b.position===i.state.suggestionsPosition.position||i.setState({suggestionsPosition:b})}}}),gn(bn(i),"updateHighlighterScroll",function(){var a=i.inputElement,s=i.highlighterElement;!a||!s||(s.scrollLeft=a.scrollLeft,s.scrollTop=a.scrollTop,s.height=a.height)}),gn(bn(i),"handleCompositionStart",function(){U_=!0}),gn(bn(i),"handleCompositionEnd",function(){U_=!1}),gn(bn(i),"setSelection",function(a,s){if(!(a===null||s===null)){var o=i.inputElement;if(o.setSelectionRange)o.setSelectionRange(a,s);else if(o.createTextRange){var l=o.createTextRange();l.collapse(!0),l.moveEnd("character",s),l.moveStart("character",a),l.select()}}}),gn(bn(i),"updateMentionsQueries",function(a,s){i._queryId++,i.suggestions={},i.setState({suggestions:{}});var o=i.props.value||"",l=i.props.children,c=zp(l),d=Uo(o,c,s,"NULL");if(d!==null){var f=THe(o.substring(0,d),c),p=a.substring(f,s);Vr.Children.forEach(l,function(m,x){if(m){var y=YHe(m.props.trigger,i.props),b=p.match(y);if(b){var S=f+p.indexOf(b[1],b.index);i.queryData(b[2],x,S,S+b[1].length,a)}}})}}),gn(bn(i),"clearSuggestions",function(){i._queryId++,i.suggestions={},i.setState({suggestions:{},focusIndex:0})}),gn(bn(i),"queryData",function(a,s,o,l,c){var d=i.props,f=d.children,p=d.ignoreAccents,m=I.Children.toArray(f)[s],x=QHe(m.props.data,p),y=x(a,i.updateSuggestions.bind(null,i._queryId,s,a,o,l,c));y instanceof Array&&i.updateSuggestions(i._queryId,s,a,o,l,c,y)}),gn(bn(i),"updateSuggestions",function(a,s,o,l,c,d,f){if(a===i._queryId){i.suggestions=$u($u({},i.suggestions),{},gn({},s,{queryInfo:{childIndex:s,query:o,querySequenceStart:l,querySequenceEnd:c,plainTextValue:d},results:f}));var p=i.state.focusIndex,m=B_(i.suggestions);i.setState({suggestions:i.suggestions,focusIndex:p>=m?Math.max(m-1,0):p})}}),gn(bn(i),"addMention",function(a,s){var o=a.id,l=a.display,c=s.childIndex,d=s.querySequenceStart,f=s.querySequenceEnd,p=s.plainTextValue,m=i.props.value||"",x=zp(i.props.children),y=I.Children.toArray(i.props.children)[c],b=y.props,S=b.markup,_=b.displayTransform,C=b.appendSpaceOnAdd,A=b.onAdd,j=Uo(m,x,d,"START"),P=j+f-d,O=PHe(S,o,l);C&&(O+=" ");var D=P2(m,j,P,O);i.inputElement.focus();var L=_(o,l);C&&(L+=" ");var B=d+L.length;i.setState({selectionStart:B,selectionEnd:B,setSelectionAfterMentionChange:!0});var H={target:{value:D}},z=s2(D,x),ie=P2(p,d,f,L);i.executeOnChange(H,D,ie,z),A&&A(o,l,j,P),i.clearSuggestions()}),gn(bn(i),"isLoading",function(){var a=!1;return Vr.Children.forEach(i.props.children,function(s){a=a||s&&s.props.isLoading}),a}),gn(bn(i),"isOpened",function(){return Y8(i.state.selectionStart)&&(B_(i.state.suggestions)!==0||i.isLoading())}),gn(bn(i),"_queryId",0),i.suggestions={},i.uuidSuggestionsOverlay=Math.random().toString(16).substring(2),i.handleCopy=i.handleCopy.bind(bn(i)),i.handleCut=i.handleCut.bind(bn(i)),i.handlePaste=i.handlePaste.bind(bn(i)),i.state={focusIndex:0,selectionStart:null,selectionEnd:null,suggestions:{},caretPosition:null,suggestionsPosition:{},setSelectionAfterHandlePaste:!1},i}return aHe(r,[{key:"componentDidMount",value:function(){document.addEventListener("copy",this.handleCopy),document.addEventListener("cut",this.handleCut),document.addEventListener("paste",this.handlePaste),this.updateSuggestionsPosition()}},{key:"componentDidUpdate",value:function(i,a){a.suggestionsPosition===this.state.suggestionsPosition&&this.updateSuggestionsPosition(),this.state.setSelectionAfterMentionChange&&(this.setState({setSelectionAfterMentionChange:!1}),this.setSelection(this.state.selectionStart,this.state.selectionEnd)),this.state.setSelectionAfterHandlePaste&&(this.setState({setSelectionAfterHandlePaste:!1}),this.setSelection(this.state.selectionStart,this.state.selectionEnd))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("copy",this.handleCopy),document.removeEventListener("cut",this.handleCut),document.removeEventListener("paste",this.handlePaste)}},{key:"render",value:function(){return Vr.createElement("div",su({ref:this.setContainerElement},this.props.style),this.renderControl(),this.renderSuggestionsOverlay())}},{key:"handlePaste",value:function(i){if(i.target===this.inputElement&&this.supportsClipboardActions(i)){i.preventDefault();var a=this.state,s=a.selectionStart,o=a.selectionEnd,l=this.props,c=l.value,d=l.children,f=zp(d),p=Uo(c,f,s,"START"),m=Uo(c,f,o,"END"),x=i.clipboardData.getData("text/react-mentions"),y=i.clipboardData.getData("text/plain"),b=P2(c,p,m,x||y).replace(/\r/g,""),S=Jm(b,f),_={target:$u($u({},i.target),{},{value:b})};this.executeOnChange(_,b,S,s2(b,f));var C=MK(c,f,s),A=(C||s)+Jm(x||y,f).length;this.setState({selectionStart:A,selectionEnd:A,setSelectionAfterHandlePaste:!0})}}},{key:"saveSelectionToClipboard",value:function(i){var a=this.inputElement.selectionStart,s=this.inputElement.selectionEnd,o=this.props,l=o.children,c=o.value,d=zp(l),f=Uo(c,d,a,"START"),p=Uo(c,d,s,"END");i.clipboardData.setData("text/plain",i.target.value.slice(a,s)),i.clipboardData.setData("text/react-mentions",c.slice(f,p))}},{key:"supportsClipboardActions",value:function(i){return!!i.clipboardData}},{key:"handleCopy",value:function(i){i.target===this.inputElement&&this.supportsClipboardActions(i)&&(i.preventDefault(),this.saveSelectionToClipboard(i))}},{key:"handleCut",value:function(i){if(i.target===this.inputElement&&this.supportsClipboardActions(i)){i.preventDefault(),this.saveSelectionToClipboard(i);var a=this.state,s=a.selectionStart,o=a.selectionEnd,l=this.props,c=l.children,d=l.value,f=zp(c),p=Uo(d,f,s,"START"),m=Uo(d,f,o,"END"),x=[d.slice(0,p),d.slice(m)].join(""),y=Jm(x,f),b={target:$u($u({},i.target),{},{value:y})};this.executeOnChange(b,x,y,s2(d,f))}}}]),r}(Vr.Component);gn(X9,"propTypes",sue);gn(X9,"defaultProps",{ignoreAccents:!1,singleLine:!1,allowSuggestionsAboveCursor:!1,onKeyDown:function(){return null},onSelect:function(){return null},onBlur:function(){return null}});var xD=function(t,r){var n=parseFloat(window.getComputedStyle(t,null).getPropertyValue(r));return isFinite(n)?n:0},JHe=typeof navigator<"u"&&/iPhone|iPad|iPod/i.test(navigator.userAgent),ZHe=E3({position:"relative",overflowY:"visible",input:{display:"block",width:"100%",position:"absolute",margin:0,top:0,left:0,boxSizing:"border-box",backgroundColor:"transparent",fontFamily:"inherit",fontSize:"inherit",letterSpacing:"inherit"},"&multiLine":{input:$u({height:"100%",bottom:0,overflow:"hidden",resize:"none"},JHe?{marginTop:1,marginLeft:-3}:null)}},function(e){var t=e.singleLine;return{"&singleLine":t,"&multiLine":!t}}),eWe=ZHe(X9),tWe={fontWeight:"inherit"},Zm=function(t){var r=t.display,n=t.style,i=t.className,a=t.classNames,s=K9(tWe,{style:n,className:i,classNames:a});return Vr.createElement("strong",s,r)};Zm.propTypes={onAdd:zt.func,onRemove:zt.func,renderSuggestion:zt.func,trigger:zt.oneOfType([zt.string,zt.instanceOf(RegExp)]),markup:zt.string,displayTransform:zt.func,allowSpaceInQuery:zt.bool,isLoading:zt.bool};Zm.defaultProps={trigger:"@",markup:"@[__display__](__id__)",displayTransform:function(t,r){return r||t},onAdd:function(){return null},onRemove:function(){return null},renderSuggestion:null,isLoading:!1,appendSpaceOnAdd:!1};const rWe=()=>qs({queryKey:["users"],queryFn:Z7}),FT=({value:e,onChange:t,placeholder:r,onKeyDown:n,minHeight:i=40,maxHeight:a=120,rightElement:s,singleLine:o=!1})=>{const{data:l=[]}=rWe(),{data:c=[]}=np(),{data:d=[]}=wb(),{data:f=[]}=Xx(),{data:p=[]}=Cf(),m=I.useMemo(()=>l.map(A=>({id:A.userId,display:A.firstName?`${A.firstName} ${A.lastName}`:A.email})),[l]),x=I.useMemo(()=>c.map(A=>({id:String(A.id),display:A.projectName})),[c]),y=I.useMemo(()=>d.map(A=>({id:A.id,display:A.name})),[d]),b=I.useMemo(()=>f.map(A=>({id:String(A.id),display:A.fullName})),[f]),S=I.useMemo(()=>p.map(A=>({id:String(A.id),display:A.installerName})),[p]),_={control:{fontSize:14,fontWeight:"normal"},"&multiLine":{control:{fontFamily:"inherit",minHeight:o?void 0:i,maxHeight:o?void 0:a},highlighter:{padding:12,border:"1px solid transparent"},input:{padding:12,border:"1px solid var(--color-outline-variant, #49454F)",borderRadius:"0.75rem",backgroundColor:"var(--color-surface-container, #1F1B16)",color:"var(--color-text-primary)",overflow:"auto",height:"100%",outline:"none"}},"&singleLine":{display:"inline-block",width:"100%",highlighter:{padding:12,border:"2px solid transparent"},input:{padding:12,border:"1px solid var(--color-outline-variant, #49454F)",borderRadius:"0.75rem",backgroundColor:"var(--color-surface-container, #1F1B16)",color:"var(--color-text-primary)",outline:"none",width:"100%"}},suggestions:{list:{backgroundColor:"var(--color-surface-container-high, #2A2826)",border:"1px solid var(--color-outline, #9C8F83)",borderRadius:"0.75rem",fontSize:12,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.5)",zIndex:99999,width:250,maxHeight:200,overflow:"auto",marginTop:4},item:{padding:"8px 12px",borderBottom:"1px solid var(--color-outline-variant, #49454F)",color:"var(--color-text-secondary)","&focused":{backgroundColor:"var(--color-primary-container, #51443B)",color:"var(--color-on-primary-container, #FFDDB7)"}}}},C=(A,j,P,O,D)=>u.jsx("div",{className:`flex items-center gap-2 ${D?"font-bold":""}`,children:u.jsx("span",{children:P})});return u.jsxs("div",{className:"mention-input-wrapper w-full flex flex-col gap-2",children:[u.jsxs("div",{className:"flex items-end gap-2",children:[u.jsx("div",{className:"flex-1 min-w-0 relative",children:u.jsxs(eWe,{value:e,onChange:A=>t(A.target.value),placeholder:r,style:_,onKeyDown:n,allowSpaceInQuery:!0,className:"flex-1",singleLine:o,suggestionsPortalHost:document.body,children:[u.jsx(Zm,{trigger:"@",data:m,markup:"@[user:__id__|__display__]",style:{backgroundColor:"var(--color-secondary-container)",color:"var(--color-on-secondary-container)",borderRadius:4,padding:"1px 3px"},renderSuggestion:C,displayTransform:(A,j)=>`@${j}`}),u.jsx(Zm,{trigger:"!",data:x,markup:"@[project:__id__|__display__]",style:{backgroundColor:"var(--color-tertiary-container)",color:"var(--color-on-tertiary-container)",borderRadius:4,padding:"1px 3px"},renderSuggestion:C,displayTransform:(A,j)=>` ${j}`}),u.jsx(Zm,{trigger:"#",data:y,markup:"@[product:__id__|__display__]",style:{backgroundColor:"var(--color-primary-container)",color:"var(--color-on-primary-container)",borderRadius:4,padding:"1px 3px"},renderSuggestion:C,displayTransform:(A,j)=>` ${j}`}),u.jsx(Zm,{trigger:"\\",data:b,markup:"@[customer:__id__|__display__]",style:{backgroundColor:"var(--color-error-container)",color:"var(--color-on-error-container)",borderRadius:4,padding:"1px 3px"},renderSuggestion:C,displayTransform:(A,j)=>` ${j}`}),u.jsx(Zm,{trigger:"+",data:S,markup:"@[installer:__id__|__display__]",style:{backgroundColor:"var(--color-surface-variant)",color:"var(--color-on-surface-variant)",borderRadius:4,padding:"1px 3px"},renderSuggestion:C,displayTransform:(A,j)=>` ${j}`})]})}),s&&u.jsx("div",{className:"shrink-0 pb-1",children:s})]}),!o&&u.jsxs("div",{className:"flex flex-wrap gap-3 text-[10px] text-text-secondary px-1",children:[u.jsxs("div",{className:"flex items-center gap-1 cursor-help",title:"Mention a User",children:[u.jsx("span",{className:"font-mono bg-surface-container-highest border border-outline/20 px-1 rounded",children:"@"})," User"]}),u.jsxs("div",{className:"flex items-center gap-1 cursor-help",title:"Link a Project",children:[u.jsx("span",{className:"font-mono bg-surface-container-highest border border-outline/20 px-1 rounded",children:"!"})," Project"]}),u.jsxs("div",{className:"flex items-center gap-1 cursor-help",title:"Link a Product",children:[u.jsx("span",{className:"font-mono bg-surface-container-highest border border-outline/20 px-1 rounded",children:"#"})," Product"]}),u.jsxs("div",{className:"flex items-center gap-1 cursor-help",title:"Link a Customer",children:[u.jsx("span",{className:"font-mono bg-surface-container-highest border border-outline/20 px-1 rounded",children:"\\"})," Customer"]}),u.jsxs("div",{className:"flex items-center gap-1 cursor-help",title:"Link an Installer",children:[u.jsx("span",{className:"font-mono bg-surface-container-highest border border-outline/20 px-1 rounded",children:"+"})," Installer"]})]})]})},nWe=({job:e})=>{const{currentUser:t}=Xr(),[r,n]=I.useState([]),[i,a]=I.useState(""),[s,o]=I.useState(!1),[l,c]=I.useState(!0),d=I.useRef(null);I.useEffect(()=>{let x=!0;const y=async()=>{try{const S=await Qze(e.id);x&&(n(S),c(!1))}catch(S){console.error(S),Re.error("Failed to load notes history.")}};y();const b=setInterval(y,5e3);return()=>{x=!1,clearInterval(b)}},[e.id]),I.useEffect(()=>{d.current&&(d.current.scrollTop=d.current.scrollHeight)},[r]);const f=async x=>{if(x==null||x.preventDefault(),!!i.trim()){o(!0);try{const y=await Jze(e.id,i);n(b=>[...b,y]),a("")}catch(y){console.error(y),Re.error("Failed to send note.")}finally{o(!1)}}},p=x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),f())},m=async x=>{try{await Zze(x),n(y=>y.map(b=>b.id===x?{...b,isPinned:!b.isPinned}:b)),Re.success("Note updated")}catch{Re.error("Failed to pin note")}};return u.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex items-center gap-3 flex-shrink-0",children:[u.jsx(sm,{className:"drag-handle cursor-move text-text-secondary hover:text-text-primary transition-colors",size:20}),u.jsx(_Fe,{size:20,className:"text-primary"}),u.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Job Notes"})]}),u.jsx("div",{ref:d,className:"flex-grow overflow-y-auto p-4 space-y-4 bg-surface-container scrollbar-thin scrollbar-thumb-surface-container-highest",children:l?u.jsx("div",{className:"text-center text-text-secondary py-4 text-sm",children:"Loading timeline..."}):r.length===0?u.jsx("div",{className:"text-center text-text-tertiary py-8 italic text-sm",children:"No notes yet. Start the conversation below."}):r.map(x=>{const y=x.userId===(t==null?void 0:t.userId);return u.jsxs("div",{className:`flex gap-3 group ${y?"flex-row-reverse":""}`,children:[u.jsx("div",{className:"flex-shrink-0 mt-1",children:x.authorAvatar?u.jsx("img",{src:x.authorAvatar,alt:x.authorName,className:"w-8 h-8 rounded-full object-cover border-2 border-surface-container-high"}):u.jsxs(u.Fragment,{children:[u.jsx("img",{src:`https://www.gravatar.com/avatar/${AS(x.authorEmail||x.authorName)}?s=40&d=mp`,alt:x.authorName,className:"w-8 h-8 rounded-full border-2 border-surface-container-high object-cover",onError:b=>{var S;b.target.style.display="none",(S=b.target.nextElementSibling)==null||S.classList.remove("hidden")}}),u.jsx("div",{className:"hidden w-8 h-8 rounded-full bg-primary-container text-on-primary-container flex items-center justify-center text-sm font-bold border-2 border-surface-container-high",children:x.authorName?x.authorName.charAt(0).toUpperCase():"U"})]})}),u.jsxs("div",{className:`flex flex-col max-w-[85%] ${y?"items-end":"items-start"}`,children:[u.jsxs("div",{className:`flex items-baseline gap-2 mb-1 ${y?"flex-row-reverse":""}`,children:[u.jsx("span",{className:"text-xs font-bold text-text-primary",children:x.authorName}),u.jsx("span",{className:"text-[10px] text-text-tertiary",children:x.createdAt?new Date(x.createdAt).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown Date"}),u.jsx("button",{onClick:()=>m(x.id),className:`transition-opacity ${x.isPinned?"opacity-100 text-tertiary":"opacity-0 group-hover:opacity-100 text-text-tertiary hover:text-text-primary"}`,title:x.isPinned?"Unpin from Calendar":"Pin to Calendar",children:u.jsx(TFe,{size:14,fill:x.isPinned?"currentColor":"none"})})]}),u.jsx("div",{className:`p-3 rounded-xl text-sm whitespace-pre-wrap shadow-sm relative ${x.isPinned?"ring-2 ring-tertiary/80":""} ${y?"bg-primary text-on-primary rounded-tr-none":"bg-secondary-container text-on-secondary-container rounded-tl-none"}`,children:u.jsx(S3,{content:x.content})})]})]},x.id)})}),u.jsx("div",{className:"p-3 bg-surface-container-low border-t border-outline/10 flex-shrink-0",children:u.jsxs("form",{onSubmit:f,className:"flex items-end gap-2",children:[u.jsx("div",{className:"flex-1",children:u.jsx(FT,{value:i,onChange:a,onKeyDown:p,placeholder:"Type a note...",minHeight:40})}),u.jsx("button",{type:"submit",disabled:!i.trim()||s,className:"flex-shrink-0 h-[42px] w-[42px] flex items-center justify-center bg-primary hover:bg-primary-hover text-on-primary rounded-full disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm",children:u.jsx(Sy,{size:18})})]})})]})},iWe=async(e,t)=>{const{data:r}=await cr.get(`/api/photos/${e}/${t}`);return r},aWe=(e,t)=>qs({queryKey:["files",e,t],queryFn:()=>iWe(e,t),enabled:!!t}),sWe=(e,t)=>{const r=$a(),n=["files",e,t];return{uploadFiles:Ir({mutationFn:async({files:i,category:a})=>{const s=new FormData;s.append("entityType",e),s.append("entityId",String(t)),s.append("category",a),Array.from(i).forEach(l=>s.append("photos",l));const{data:o}=await cr.post("/api/photos",s,{headers:{"Content-Type":"multipart/form-data"}});return o},onSuccess:()=>r.invalidateQueries({queryKey:n})}),deleteFile:Ir({mutationFn:async i=>{await cr.delete(`/api/photos/${i}`)},onSuccess:()=>r.invalidateQueries({queryKey:n})})}},oue=({imageUrl:e,onClose:t,altText:r="Image Preview"})=>(I.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),Ml.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[99999] bg-black/95 flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:t,children:[u.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex justify-between items-start z-[101] bg-gradient-to-b from-black/50 to-transparent",children:[u.jsx("span",{className:"text-white/70 text-sm font-mono ml-2 mt-1 truncate max-w-[80%]",children:r}),u.jsx("button",{onClick:n=>{n.stopPropagation(),t()},className:"p-2 bg-white/10 hover:bg-white/20 text-white rounded-full transition-colors backdrop-blur-sm",children:u.jsx(tn,{size:24})})]}),u.jsx("div",{className:"relative w-full h-full flex items-center justify-center",onClick:n=>n.stopPropagation(),children:u.jsx("img",{src:e,alt:r,className:"max-w-full max-h-full object-contain shadow-2xl rounded-sm"})})]}),document.body)),oWe=({project:e})=>{const{data:t=[],isLoading:r}=aWe("PROJECT",e.id),{uploadFiles:n,deleteFile:i}=sWe("PROJECT",e.id),[a,s]=I.useState("SITE"),[o,l]=I.useState(new Set),[c,d]=I.useState(!1),[f,p]=I.useState(null),m=I.useRef(null),x=(Array.isArray(t)?t:[]).filter(C=>(C.category||"SITE")===a),y=async C=>{if(C.target.files&&C.target.files.length>0){const A=Re.loading(`Uploading ${a==="SITE"?"photos":"documents"}...`);try{await n.mutateAsync({files:C.target.files,category:a}),Re.success("Upload complete!",{id:A})}catch{Re.error("Upload failed.",{id:A})}m.current&&(m.current.value="")}},b=C=>{l(A=>{const j=new Set(A);return j.has(C)?j.delete(C):j.add(C),j})},S=async()=>{if(!window.confirm(`Delete ${o.size} items?`))return;const C=Re.loading("Deleting...");try{await Promise.all(Array.from(o).map(A=>i.mutateAsync(A))),Re.success("Deleted!",{id:C}),l(new Set),d(!1)}catch{Re.error("Delete failed.",{id:C})}},_=C=>{c?b(C.id):a==="SITE"?p(Ma(C.url)):window.open(Ma(C.url),"_blank")};return u.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[u.jsx("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center shrink-0",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(sm,{size:20,className:"drag-handle text-text-secondary cursor-move hover:text-text-primary shrink-0"}),u.jsxs("h3",{className:"text-xl font-semibold text-text-primary flex items-center gap-2",children:[u.jsx(of,{size:20})," Project Files"]})]})}),u.jsxs("div",{className:"border-b border-outline/10 bg-surface-container-low shrink-0",children:[u.jsxs("div",{className:"flex justify-between items-center px-4 py-2",children:[u.jsxs("div",{className:"flex space-x-2 bg-surface-container-highest p-1 rounded-full",children:[u.jsxs("button",{onClick:()=>{s("SITE"),d(!1)},className:`px-3 py-1 rounded-full text-sm font-medium transition-all flex items-center gap-2 ${a==="SITE"?"bg-primary-container text-on-primary-container shadow-sm":"text-text-secondary hover:text-text-primary"}`,children:[u.jsx(jv,{size:16})," Site Photos"]}),u.jsxs("button",{onClick:()=>{s("DOCUMENT"),d(!1)},className:`px-3 py-1 rounded-full text-sm font-medium transition-all flex items-center gap-2 ${a==="DOCUMENT"?"bg-primary-container text-on-primary-container shadow-sm":"text-text-secondary hover:text-text-primary"}`,children:[u.jsx(au,{size:16})," Documents"]})]}),u.jsx("div",{className:"flex items-center gap-2",children:c?u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:S,disabled:o.size===0,className:"px-3 py-1.5 bg-error hover:bg-error-hover text-on-error text-xs font-bold rounded-full disabled:opacity-50 transition-colors shadow-sm",children:["Delete (",o.size,")"]}),u.jsx("button",{onClick:()=>{d(!1),l(new Set)},className:"px-3 py-1.5 border border-outline text-text-primary hover:bg-surface-container-highest text-xs font-bold rounded-full transition-colors",children:"Cancel"})]}):u.jsxs(u.Fragment,{children:[x.length>0&&u.jsx("button",{onClick:()=>d(!0),className:"px-3 py-1.5 text-xs font-medium text-text-secondary hover:text-text-primary hover:bg-surface-container-highest rounded-full transition-colors",children:"Select"}),u.jsxs("button",{onClick:()=>{var C;return(C=m.current)==null?void 0:C.click()},className:"flex items-center gap-1 px-3 py-1.5 bg-primary text-on-primary text-xs font-bold rounded-full hover:bg-primary-hover shadow-md transition-all",children:[a==="SITE"?u.jsx(jv,{size:14}):u.jsx(au,{size:14})," Add"]})]})})]}),u.jsx("input",{type:"file",multiple:!0,accept:a==="SITE"?"image/*":".pdf,.doc,.docx,.xls,.xlsx,image/*",className:"hidden",ref:m,onChange:y})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-surface-container",children:r?u.jsx("div",{className:"text-center py-8 text-text-secondary text-xs",children:"Loading..."}):x.length===0?u.jsxs("div",{onClick:()=>{var C;return(C=m.current)==null?void 0:C.click()},className:"h-full flex flex-col items-center justify-center text-text-tertiary cursor-pointer hover:bg-surface-container-low border-2 border-dashed border-outline/30 rounded-xl transition-colors p-4",children:[a==="SITE"?u.jsx(jv,{size:32,className:"mb-2 opacity-50"}):u.jsx(au,{size:32,className:"mb-2 opacity-50"}),u.jsxs("span",{className:"text-sm font-medium",children:["No ",a==="SITE"?"photos":"documents"," yet"]}),u.jsx("span",{className:"text-xs",children:"Click to upload"})]}):a==="SITE"?u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2",children:x.map(C=>{const A=o.has(C.id);return u.jsxs("div",{onClick:()=>_(C),className:`relative aspect-square rounded-lg overflow-hidden cursor-pointer group border-2 transition-all ${A?"border-primary ring-2 ring-primary/50":"border-transparent hover:border-outline/50"}`,children:[u.jsx("img",{src:Ma(C.thumbnailUrl||C.url),alt:"Project Site",className:"w-full h-full object-cover",loading:"lazy"}),c&&u.jsx("div",{className:`absolute top-1.5 right-1.5 rounded-full bg-surface p-0.5 ${A?"text-primary":"text-outline"}`,children:u.jsx(Hh,{size:18,fill:A?"currentColor":"none"})}),!c&&u.jsx("div",{className:"absolute inset-0 bg-scrim/0 group-hover:bg-scrim/30 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100",children:u.jsx(kFe,{className:"text-white drop-shadow-md",size:20})})]},C.id)})}):u.jsx("div",{className:"space-y-2",children:x.map(C=>{var O,D;const A=o.has(C.id),j=((O=C.mimeType)==null?void 0:O.includes("pdf"))||C.url.endsWith(".pdf"),P=((D=C.mimeType)==null?void 0:D.includes("image"))||C.thumbnailUrl;return u.jsxs("div",{onClick:()=>c?b(C.id):window.open(Ma(C.url),"_blank"),className:`flex items-center p-3 rounded-xl border transition-all cursor-pointer ${A?"border-primary bg-primary-container/20 shadow-sm":"border-outline/20 bg-surface-container-high hover:border-primary/50"}`,children:[u.jsx("div",{className:"w-10 h-10 rounded-lg bg-surface-container-highest border border-outline/10 flex items-center justify-center mr-3 text-text-secondary shrink-0 overflow-hidden",children:P?u.jsx("img",{src:Ma(C.thumbnailUrl||C.url),className:"w-full h-full object-cover"}):u.jsx(Poe,{size:20,className:j?"text-error":"text-primary"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-text-primary truncate",children:C.fileName||"Untitled Document"}),u.jsx("p",{className:"text-xs text-text-tertiary",children:new Date(C.createdAt).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})})]}),c?u.jsx("div",{className:`shrink-0 ${A?"text-primary":"text-outline"}`,children:u.jsx(Hh,{size:20,fill:A?"currentColor":"none"})}):u.jsx("button",{className:"p-2 text-text-tertiary hover:text-primary transition-colors",children:u.jsx(fC,{size:16})})]},C.id)})})}),f&&u.jsx(oue,{imageUrl:f,onClose:()=>p(null),altText:"Project Photo"})]})},vD=({children:e,isLocked:t,title:r,message:n="Available after Quote Acceptance"})=>t?u.jsxs("div",{className:"relative w-full h-full overflow-hidden flex flex-col",children:[r&&u.jsx("div",{className:"p-4 border-b border-outline/10",children:u.jsx("h3",{className:"font-bold text-xl text-text-secondary opacity-70",children:r})}),u.jsx("div",{className:"flex-1 opacity-40 pointer-events-none filter blur-[1px] p-4 overflow-hidden relative",children:e}),u.jsxs("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center bg-surface-container/30 backdrop-blur-[1px]",children:[u.jsx("div",{className:"bg-surface-container-highest/90 border border-outline/20 p-4 rounded-full shadow-lg mb-2",children:u.jsx(r9,{className:"w-6 h-6 text-text-secondary"})}),u.jsx("p",{className:"font-semibold text-text-secondary text-sm bg-surface-container-highest/80 px-3 py-1 rounded-full border border-outline/20",children:n})]})]}):u.jsx(u.Fragment,{children:e}),lWe=CK.WidthProvider(CK.Responsive),cWe=()=>{var He;const{projectId:e}=jx(),t=wu(),{currentUser:r,isLayoutEditMode:n,toggleLayoutEditMode:i,saveCurrentUserPreferences:a,projectHistory:s,fetchProjectHistory:o,updateJob:l,refreshNotifications:c,users:d}=Xr(),{data:f=[]}=np(),{data:p=[]}=Xx(),{data:m=[]}=L4(),{data:x=[]}=goe(),{data:y=[]}=voe(),{data:b=[]}=U4(),{data:S=[]}=Cf(),_=ooe(),C=Y7(),A=xoe(),j=J7(),P=X7(),[O,D]=I.useState(null),[L,B]=I.useState(!1),[H,z]=I.useState(null),[ie,X]=I.useState(null),[W,Q]=I.useState(null),[te,J]=I.useState(!1),Y=I.useMemo(()=>parseInt(e||"",10),[e]),pe=I.useMemo(()=>f.find(je=>je.id===Y),[f,Y]),_e=I.useMemo(()=>x.find(je=>je.projectId===Y),[x,Y]),ee=I.useMemo(()=>p.find(je=>je.id===(pe==null?void 0:pe.customerId)),[p,pe]),de=m.filter(je=>je.projectId===(pe==null?void 0:pe.id)),G=de.find(je=>je.status==="Accepted"),q=(G==null?void 0:G.installerId)||((He=de.find(je=>je.installerId))==null?void 0:He.installerId),ne=I.useMemo(()=>S.find(je=>je.id===q),[S,q]),Se=I.useMemo(()=>d.find(je=>je.userId===(pe==null?void 0:pe.managerId)),[d,pe]),re=I.useMemo(()=>({lg:[{i:"quotes",x:0,y:0,w:4,h:7,minH:5,minW:3},{i:"sample-checkouts",x:4,y:0,w:4,h:7,minH:4,minW:3},{i:"notes",x:8,y:0,w:4,h:7,minH:4,minW:3},{i:"job-details",x:0,y:7,w:12,h:9,minH:7,minW:6},{i:"material-orders",x:0,y:16,w:6,h:6,minH:4,minW:3},{i:"change-orders",x:6,y:16,w:6,h:6,minH:5,minW:3},{i:"photos",x:0,y:22,w:4,h:5,minH:4,minW:3},{i:"history",x:4,y:22,w:8,h:5,minH:4,minW:6}]}),[]),[ae,ge]=I.useState(re),[Ee,V]=I.useState(ae);I.useEffect(()=>{var we;const je=(we=r==null?void 0:r.preferences)==null?void 0:we.projectLayouts;if(je&&Object.keys(je).length>0){const ot={...re};Object.keys(je).forEach(xt=>{const Dt=je[xt]||[],kr=(re[xt]||[]).filter(Cn=>!Dt.find(fr=>fr.i===Cn.i));ot[xt]=[...Dt,...kr]}),ge(ot)}},[r,re]),I.useEffect(()=>{n&&V(ae)},[n,ae]);const Ae=I.useCallback(async()=>{if(!isNaN(Y)){o(Y);try{if(!_e){const je=await q6e(Y);je&&l(je)}}catch{console.error("Could not load job schedule details.")}}},[Y,o,l,_e]);I.useEffect(()=>{Ae()},[Y,Ae]),I.useEffect(()=>{Y&&!isNaN(Y)&&p6e(Y).then(()=>c())},[Y,c]);const Pe=(je,we)=>{ge(we)},ze=()=>{a({projectLayouts:ae}),Re.success("Layout saved!"),i()},De=()=>{ge(Ee),i()},$e=()=>{window.confirm("Are you sure you want to reset the layout to its default?")&&(ge(re),a({projectLayouts:re}),Re.success("Layout has been reset."),i())},et=je=>{Q(je)},ut=async()=>{if(!(!pe||!ee)&&window.confirm(`Are you sure you want to permanently delete the project "${pe.projectName}"?`)){J(!0);try{await _.deleteProject(pe.id),Re.success("Project deleted successfully."),t(`/customers/${ee.id}`)}catch(je){Re.error(je.message||"Failed to delete project.")}finally{J(!1)}}},kt=async je=>{_e&&await A.saveJobDetails({projectId:pe.id,notes:je})},ht=async je=>_.updateProject(je),jr=async je=>C.addQuote(je),er=async je=>C.updateQuote(je),ct=async je=>A.saveJobDetails(je),qt=async je=>P.addInstaller(je),Lt=async je=>j.addChangeOrder(je),dr=async(je,we)=>j.updateChangeOrder({id:je,data:we});if(!pe)return u.jsx("div",{className:"text-center p-8",children:"Project not found."});const Gt=de.some(je=>je.status===ml.ACCEPTED),qe=de.filter(je=>je.status===ml.ACCEPTED),Xe=y.filter(je=>je.projectId===pe.id),Te=b.filter(je=>je.projectId===pe.id);return u.jsxs("div",{className:"space-y-8",children:[u.jsx(zze,{project:pe,customer:ee,activeInstaller:ne,projectLead:Se,currentUser:r,updateProject:ht,onEdit:()=>B(!0),onDeleteProject:ut,isDeleting:te,isLayoutEditMode:n,onSaveLayout:ze,onCancelLayout:De,onResetLayout:$e}),u.jsxs(lWe,{className:`layout ${n?"edit-mode":""}`,layouts:ae,onLayoutChange:Pe,breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},rowHeight:30,draggableHandle:".drag-handle",isDraggable:n,isResizable:n,children:[u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:u.jsx(Gze,{project:pe,projectQuotes:de,installers:S,addQuote:jr,updateQuote:er,updateProject:ht,addInstaller:qt,saveJobDetails:ct,isModalOpen:O==="quote",onCloseModal:()=>D(null),onOpenEditModal:je=>{z(je),D("quote")},editingQuoteForModal:H})},"quotes"),u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:u.jsx(vD,{isLocked:!Gt,title:"Job Financials & Schedule",children:Gt?u.jsx(Kze,{project:pe,job:_e,quotes:de,changeOrders:Xe,saveJobDetails:ct,updateProject:ht}):u.jsx("div",{className:"h-full w-full bg-surface/50"})})},"job-details"),u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:_e?u.jsx(nWe,{job:_e,onSaveNotes:kt}):u.jsx("div",{className:"flex items-center justify-center h-full text-text-tertiary",children:"Loading notes..."})},"notes"),u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:u.jsx(Vze,{project:pe})},"sample-checkouts"),u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:u.jsx(vD,{isLocked:!Gt,title:"Change Orders",children:Gt?u.jsx(Xze,{project:pe,projectChangeOrders:Xe,acceptedQuotes:qe,addChangeOrder:Lt,onEditChangeOrder:et}):u.jsx("div",{className:"h-full w-full bg-surface/50"})})},"change-orders"),u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:u.jsx(vD,{isLocked:!Gt,title:"Material Orders",children:Gt?u.jsx(Yze,{project:pe,orders:Te,isModalOpen:O==="order",onCloseModal:()=>{D(null),X(null)},editingOrder:ie,onEditOrder:je=>{X(je),D("order")}}):u.jsx("div",{className:"h-full w-full bg-surface/50"})})},"material-orders"),u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:u.jsx(oWe,{project:pe})},"photos"),u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:u.jsx(_b,{history:s})},"history")]}),L&&pe&&u.jsx(Bze,{project:pe,onClose:()=>B(!1),onSave:ht}),W&&u.jsx(Uze,{changeOrder:W,acceptedQuotes:qe,onClose:()=>Q(null),onSave:async je=>{await dr(W.id,je),Q(null)}})]})},$K=({installers:e,users:t,selectedInstallerIds:r,selectedUserIds:n,showDeliveries:i,onInstallerChange:a,onUserChange:s,onShowDeliveriesChange:o})=>{const[l,c]=I.useState(!1),d=I.useRef(null),[f,p]=I.useState("installers"),[m,x]=I.useState(new Set),[y,b]=I.useState(new Set),[S,_]=I.useState(!0);I.useEffect(()=>{l&&(x(new Set(r)),b(new Set(n)),_(i))},[l,r,n,i]),I.useEffect(()=>{const J=Y=>{window.innerWidth>=768&&d.current&&!d.current.contains(Y.target)&&c(!1)};return document.addEventListener("mousedown",J),()=>document.removeEventListener("mousedown",J)},[d]);const C=()=>a(new Set(e.map(J=>J.id))),A=()=>a(new Set),j=J=>a(new Set([J])),P=J=>{const Y=new Set(r);Y.has(J)?Y.delete(J):Y.add(J),a(Y)},O=()=>s(new Set(t.map(J=>J.userId))),D=()=>s(new Set),L=J=>s(new Set([J])),B=J=>{const Y=new Set(n);Y.has(J)?Y.delete(J):Y.add(J),s(Y)},H=J=>{const Y=new Set(m);Y.has(J)?Y.delete(J):Y.add(J),x(Y)},z=J=>{const Y=new Set(y);Y.has(J)?Y.delete(J):Y.add(J),b(Y)},ie=J=>{x(new Set([J]))},X=J=>{b(new Set([J]))},W=()=>{a(m),s(y),o(S),c(!1)},Q=()=>{x(new Set(e.map(J=>J.id))),b(new Set(t.map(J=>J.userId))),_(!0)},te=r.size+n.size;return u.jsxs("div",{className:"relative",ref:d,children:[u.jsxs("button",{onClick:()=>c(!l),className:"flex items-center gap-2 px-4 py-2 rounded-full bg-surface-container-high hover:bg-surface-container-highest transition-colors border border-outline/10 hover:border-outline/20 shadow-sm","aria-label":"Filter calendar",children:[u.jsx(b8,{size:20,className:"text-primary"}),u.jsx("span",{className:"font-medium text-text-primary",children:"Filter"}),te>0&&u.jsx("span",{className:"bg-primary text-on-primary text-xs font-bold rounded-full min-w-[20px] h-5 px-1 flex items-center justify-center",children:te})]}),l&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"hidden md:block absolute top-full right-0 mt-2 w-80 bg-surface-container-high border border-outline/10 rounded-xl shadow-2xl z-20 overflow-hidden ring-1 ring-black/5",children:u.jsxs("div",{className:"max-h-[70vh] overflow-y-auto",children:[u.jsx("div",{className:"p-3 border-b border-outline/10 bg-surface-container-low",children:u.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-surface-container-highest cursor-pointer transition-colors",children:[u.jsx("input",{type:"checkbox",checked:i,onChange:J=>o(J.target.checked),className:"h-5 w-5 rounded border-outline/20 text-primary focus:ring-primary bg-surface-container-highest cursor-pointer"}),u.jsxs("span",{className:"text-sm font-medium text-text-primary flex items-center gap-2",children:[u.jsx(z0,{size:14})," Material Deliveries"]})]})}),u.jsx("div",{className:"p-3 bg-surface-container-highest/50 border-b border-outline/5",children:u.jsx("h4",{className:"font-bold text-text-secondary text-xs uppercase tracking-wider",children:"Installers"})}),u.jsxs("div",{className:"flex justify-between px-3 py-2 bg-surface-container-low border-b border-outline/5",children:[u.jsx("button",{onClick:C,className:"text-xs text-primary font-medium hover:text-primary-hover",children:"Select All"}),u.jsx("button",{onClick:A,className:"text-xs text-text-secondary hover:text-text-primary",children:"Deselect All"})]}),u.jsx("div",{className:"p-2 space-y-1",children:(e||[]).map(J=>u.jsxs("div",{className:"group flex items-center justify-between p-2 rounded-lg hover:bg-surface-container-highest cursor-pointer transition-colors",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("input",{type:"checkbox",checked:r.has(J.id),onChange:()=>P(J.id),className:"h-4 w-4 rounded border-outline/20 text-primary focus:ring-primary bg-surface-container-highest cursor-pointer"}),u.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:J.color||"#6b7280"}}),u.jsx("span",{className:`text-sm ${r.has(J.id)?"text-text-primary font-medium":"text-text-secondary"}`,children:J.installerName})]}),u.jsx("button",{onClick:Y=>{Y.preventDefault(),j(J.id)},className:"opacity-0 group-hover:opacity-100 text-xs text-primary font-bold hover:bg-primary-container px-2 py-0.5 rounded transition-all",children:"Only"})]},`installer-${J.id}`))}),u.jsx("div",{className:"p-3 bg-surface-container-highest/50 border-y border-outline/5 mt-2",children:u.jsx("h4",{className:"font-bold text-text-secondary text-xs uppercase tracking-wider",children:"Users"})}),u.jsxs("div",{className:"flex justify-between px-3 py-2 bg-surface-container-low border-b border-outline/5",children:[u.jsx("button",{onClick:O,className:"text-xs text-primary font-medium hover:text-primary-hover",children:"Select All"}),u.jsx("button",{onClick:D,className:"text-xs text-text-secondary hover:text-text-primary",children:"Deselect All"})]}),u.jsx("div",{className:"p-2 space-y-1",children:(t||[]).map(J=>u.jsxs("div",{className:"group flex items-center justify-between p-2 rounded-lg hover:bg-surface-container-highest cursor-pointer transition-colors",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("input",{type:"checkbox",checked:n.has(J.userId),onChange:()=>B(J.userId),className:"h-4 w-4 rounded border-outline/20 text-primary focus:ring-primary bg-surface-container-highest cursor-pointer"}),u.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:J.color||"#6b7280"}}),u.jsx("span",{className:`text-sm ${n.has(J.userId)?"text-text-primary font-medium":"text-text-secondary"}`,children:J.email})]}),u.jsx("button",{onClick:Y=>{Y.preventDefault(),L(J.userId)},className:"opacity-0 group-hover:opacity-100 text-xs text-primary font-bold hover:bg-primary-container px-2 py-0.5 rounded transition-all",children:"Only"})]},`user-${J.userId}`))})]})}),u.jsxs("div",{className:"md:hidden fixed inset-0 bg-surface-container-low z-50 flex flex-col animate-in slide-in-from-bottom-5 duration-200",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-outline/10 bg-surface-container-high",children:[u.jsxs("h2",{className:"text-xl font-bold text-text-primary flex items-center gap-2",children:[u.jsx(b8,{size:20})," Filter Calendar"]}),u.jsx("button",{onClick:()=>c(!1),className:"p-2 bg-surface-container-highest rounded-full text-text-secondary hover:text-text-primary",children:u.jsx(tn,{size:24})})]}),u.jsxs("div",{className:"flex border-b border-outline/10 bg-surface-container-high",children:[u.jsxs("button",{onClick:()=>p("installers"),className:`flex-1 py-4 font-semibold text-sm uppercase tracking-wide transition-colors ${f==="installers"?"border-b-2 border-primary text-primary":"text-text-secondary"}`,children:["Installers (",m.size,")"]}),u.jsxs("button",{onClick:()=>p("users"),className:`flex-1 py-4 font-semibold text-sm uppercase tracking-wide transition-colors ${f==="users"?"border-b-2 border-primary text-primary":"text-text-secondary"}`,children:["Users (",y.size,")"]})]}),u.jsx("div",{className:"p-4 bg-surface-container-low border-b border-outline/10",children:u.jsxs("div",{className:"flex items-center justify-between bg-surface-container-high p-4 rounded-xl border border-outline/5 shadow-sm",children:[u.jsxs("span",{className:"font-medium text-text-primary flex items-center gap-2",children:[u.jsx(z0,{size:18})," Show Deliveries"]}),u.jsx("div",{className:`w-12 h-7 rounded-full p-1 cursor-pointer transition-colors ${S?"bg-primary":"bg-gray-300"}`,onClick:()=>_(!S),children:u.jsx("div",{className:`bg-white w-5 h-5 rounded-full shadow-md transform transition-transform ${S?"translate-x-5":""}`})})]})}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-surface-container-low",children:[f==="installers"&&u.jsxs("div",{className:"space-y-2",children:[e.map(J=>{const Y=m.has(J.id);return u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>H(J.id),className:`flex-1 flex items-center justify-between p-4 rounded-xl border text-left transition-all ${Y?"bg-primary-container border-primary shadow-sm":"bg-surface-container-high border-outline/10"}`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-4 h-4 rounded-full flex-shrink-0",style:{backgroundColor:J.color||"#6b7280"}}),u.jsx("span",{className:`font-medium ${Y?"text-primary":"text-text-primary"}`,children:J.installerName})]}),Y&&u.jsx(pd,{size:20,className:"text-primary"})]}),u.jsx("button",{onClick:()=>ie(J.id),className:"px-4 font-bold text-xs uppercase tracking-wide text-primary border border-outline/10 rounded-xl hover:bg-primary-container bg-surface-container-high shadow-sm",children:"Only"})]},J.id)}),e.length===0&&u.jsx("p",{className:"text-text-secondary text-center p-4",children:"No installers found."})]}),f==="users"&&u.jsxs("div",{className:"space-y-2",children:[t.map(J=>{const Y=y.has(J.userId);return u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>z(J.userId),className:`flex-1 flex items-center justify-between p-4 rounded-xl border text-left transition-all ${Y?"bg-primary-container border-primary shadow-sm":"bg-surface-container-high border-outline/10"}`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-4 h-4 rounded-full flex-shrink-0",style:{backgroundColor:J.color||"#6b7280"}}),u.jsx("span",{className:`font-medium ${Y?"text-primary":"text-text-primary"}`,children:J.email})]}),Y&&u.jsx(pd,{size:20,className:"text-primary"})]}),u.jsx("button",{onClick:()=>X(J.userId),className:"px-4 font-bold text-xs uppercase tracking-wide text-primary border border-outline/10 rounded-xl hover:bg-primary-container bg-surface-container-high shadow-sm",children:"Only"})]},J.userId)}),t.length===0&&u.jsx("p",{className:"text-text-secondary text-center p-4",children:"No users found."})]})]}),u.jsxs("div",{className:"p-4 bg-surface-container-high border-t border-outline/10 flex gap-3",children:[u.jsxs("button",{onClick:Q,className:"flex-1 py-3 text-text-primary font-medium hover:bg-surface-container-highest rounded-full transition-colors border border-outline/10 flex items-center justify-center gap-2",children:[u.jsx(e1,{size:18})," Reset All"]}),u.jsx("button",{onClick:W,className:"flex-1 py-3 bg-primary text-on-primary font-bold rounded-full shadow-lg hover:bg-primary-hover transition-colors",children:"Apply Filters"})]})]})]})]})},Y9=()=>rr("/api/events"),uWe=async e=>{const t=await fetch(Y9(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create event");return t.json()},dWe=async(e,t)=>{const r=await fetch(`${Y9()}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to update event");return r.json()},fWe=async e=>{if(!(await fetch(`${Y9()}/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete event")};function hWe(e,t){const r=vWe(t);return"formatToParts"in r?mWe(r,e):gWe(r,e)}const pWe={year:0,month:1,day:2,hour:3,minute:4,second:5};function mWe(e,t){try{const r=e.formatToParts(t),n=[];for(let i=0;i<r.length;i++){const a=pWe[r[i].type];a!==void 0&&(n[a]=parseInt(r[i].value,10))}return n}catch(r){if(r instanceof RangeError)return[NaN];throw r}}function gWe(e,t){const r=e.format(t),n=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(r);return[parseInt(n[3],10),parseInt(n[1],10),parseInt(n[2],10),parseInt(n[4],10),parseInt(n[5],10),parseInt(n[6],10)]}const yD={},zK=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),xWe=zK==="06/25/2014, 00:00:00"||zK==="06/25/2014 00:00:00";function vWe(e){return yD[e]||(yD[e]=xWe?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),yD[e]}function Q9(e,t,r,n,i,a,s){const o=new Date(0);return o.setUTCFullYear(e,t,r),o.setUTCHours(n,i,a,s),o}const HK=36e5,yWe=6e4,bD={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function lue(e,t,r){if(!e)return 0;let n=bD.timezoneZ.exec(e);if(n)return 0;let i,a;if(n=bD.timezoneHH.exec(e),n)return i=parseInt(n[1],10),WK(i)?-(i*HK):NaN;if(n=bD.timezoneHHMM.exec(e),n){i=parseInt(n[2],10);const s=parseInt(n[3],10);return WK(i,s)?(a=Math.abs(i)*HK+s*yWe,n[1]==="+"?-a:a):NaN}if(SWe(e)){t=new Date(t||Date.now());const s=bWe(t),o=Q8(s,e);return-wWe(t,o,e)}return NaN}function bWe(e){return Q9(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function Q8(e,t){const r=hWe(e,t),n=Q9(r[0],r[1]-1,r[2],r[3]%24,r[4],r[5],0).getTime();let i=e.getTime();const a=i%1e3;return i-=a>=0?a:1e3+a,n-i}function wWe(e,t,r){let i=e.getTime()-t;const a=Q8(new Date(i),r);if(t===a)return t;i-=a-t;const s=Q8(new Date(i),r);return a===s?a:Math.max(a,s)}function WK(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}const VK={};function SWe(e){if(VK[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),VK[e]=!0,!0}catch{return!1}}function qK(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+e-+t}const cue=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,wD=36e5,GK=6e4,EWe=2,Vo={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:cue};function KK(e,t={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);const r=t.additionalDigits==null?EWe:Number(t.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(Object.prototype.toString.call(e)!=="[object String]")return new Date(NaN);const n=CWe(e),{year:i,restDateString:a}=kWe(n.date,r),s=_We(a,i);if(s===null||isNaN(s.getTime()))return new Date(NaN);if(s){const o=s.getTime();let l=0,c;if(n.time&&(l=NWe(n.time),l===null||isNaN(l)))return new Date(NaN);if(n.timeZone||t.timeZone){if(c=lue(n.timeZone||t.timeZone,new Date(o+l)),isNaN(c))return new Date(NaN)}else c=qK(new Date(o+l)),c=qK(new Date(o+l+c));return new Date(o+l+c)}else return new Date(NaN)}function CWe(e){const t={};let r=Vo.dateTimePattern.exec(e),n;if(r?(t.date=r[1],n=r[3]):(r=Vo.datePattern.exec(e),r?(t.date=r[1],n=r[2]):(t.date=null,n=e)),n){const i=Vo.timeZone.exec(n);i?(t.time=n.replace(i[1],""),t.timeZone=i[1].trim()):t.time=n}return t}function kWe(e,t){if(e){const r=Vo.YYY[t],n=Vo.YYYYY[t];let i=Vo.YYYY.exec(e)||n.exec(e);if(i){const a=i[1];return{year:parseInt(a,10),restDateString:e.slice(a.length)}}if(i=Vo.YY.exec(e)||r.exec(e),i){const a=i[1];return{year:parseInt(a,10)*100,restDateString:e.slice(a.length)}}}return{year:null}}function _We(e,t){if(t===null)return null;let r,n,i;if(!e||!e.length)return r=new Date(0),r.setUTCFullYear(t),r;let a=Vo.MM.exec(e);if(a)return r=new Date(0),n=parseInt(a[1],10)-1,YK(t,n)?(r.setUTCFullYear(t,n),r):new Date(NaN);if(a=Vo.DDD.exec(e),a){r=new Date(0);const s=parseInt(a[1],10);return IWe(t,s)?(r.setUTCFullYear(t,0,s),r):new Date(NaN)}if(a=Vo.MMDD.exec(e),a){r=new Date(0),n=parseInt(a[1],10)-1;const s=parseInt(a[2],10);return YK(t,n,s)?(r.setUTCFullYear(t,n,s),r):new Date(NaN)}if(a=Vo.Www.exec(e),a)return i=parseInt(a[1],10)-1,QK(i)?XK(t,i):new Date(NaN);if(a=Vo.WwwD.exec(e),a){i=parseInt(a[1],10)-1;const s=parseInt(a[2],10)-1;return QK(i,s)?XK(t,i,s):new Date(NaN)}return null}function NWe(e){let t,r,n=Vo.HH.exec(e);if(n)return t=parseFloat(n[1].replace(",",".")),SD(t)?t%24*wD:NaN;if(n=Vo.HHMM.exec(e),n)return t=parseInt(n[1],10),r=parseFloat(n[2].replace(",",".")),SD(t,r)?t%24*wD+r*GK:NaN;if(n=Vo.HHMMSS.exec(e),n){t=parseInt(n[1],10),r=parseInt(n[2],10);const i=parseFloat(n[3].replace(",","."));return SD(t,r,i)?t%24*wD+r*GK+i*1e3:NaN}return null}function XK(e,t,r){t=t||0,r=r||0;const n=new Date(0);n.setUTCFullYear(e,0,4);const i=n.getUTCDay()||7,a=t*7+r+1-i;return n.setUTCDate(n.getUTCDate()+a),n}const AWe=[31,28,31,30,31,30,31,31,30,31,30,31],TWe=[31,29,31,30,31,30,31,31,30,31,30,31];function uue(e){return e%400===0||e%4===0&&e%100!==0}function YK(e,t,r){if(t<0||t>11)return!1;if(r!=null){if(r<1)return!1;const n=uue(e);if(n&&r>TWe[t]||!n&&r>AWe[t])return!1}return!0}function IWe(e,t){if(t<1)return!1;const r=uue(e);return!(r&&t>366||!r&&t>365)}function QK(e,t){return!(e<0||e>52||t!=null&&(t<0||t>6))}function SD(e,t,r){return!(e<0||e>=25||t!=null&&(t<0||t>=60)||r!=null&&(r<0||r>=60))}function $_(e,t,r){if(typeof e=="string"&&!e.match(cue))return KK(e,{...r,timeZone:t});e=KK(e,r);const n=Q9(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()).getTime(),i=lue(t,new Date(n));return new Date(n+i)}const ED=e=>{const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`},W1=e=>{const t=new Date(e);return t.setHours(0,0,0,0),t},z_=(e,t)=>{const r=new Date(e);return t==="material_order_eta"?new Date(r.getTime()+r.getTimezoneOffset()*6e4):r},due=e=>e?e.replace(/@\[\w+:[\w-]+\|([^\]]+)\]/g,"$1"):"",OWe=e=>{if(!e)return"#FFFFFF";const t=e.replace("#",""),r=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),i=parseInt(t.substring(4,6),16);return(.299*r+.587*n+.114*i)/255>.5?"#000000":"#FFFFFF"},fue=(e,t,r,n)=>{var a;if(e.type!=="user_appointment")return e.backgroundColor||"#6b7280";const i=e.fullEvent;if(i&&i.attendees&&i.attendees.length===1){const s=i.attendees[0];if(s.color)return s.color;if(s.attendeeType==="user"){if(n&&n.userId===s.attendeeId)return((a=n.preferences)==null?void 0:a.calendarColor)||"#3B82FF";{const o=(t||[]).find(l=>l.userId===s.attendeeId);return(o==null?void 0:o.color)||"#3B82FF"}}else{const o=(r||[]).find(l=>String(l.id)===s.attendeeId);return(o==null?void 0:o.color)||"#3B82FF"}}return"#3B82FF"},PWe=()=>{const{users:e,currentUser:t,systemBranding:r}=Xr(),{data:n=[]}=Cf(),[i,a]=I.useState([]),[s,o]=I.useState(!0),[l,c]=I.useState(new Date),[d,f]=I.useState(new Set),[p,m]=I.useState(new Set),[x,y]=I.useState(!0),[b,S]=I.useState(!1),[_,C]=I.useState(null),[A,j]=I.useState(null),[P,O]=I.useState(null),[D,L]=I.useState(null);I.useEffect(()=>{n&&n.length>0&&f(new Set(n.map(ge=>ge.id))),e&&e.length>0&&m(new Set(e.map(ge=>ge.userId)))},[n,e]);const B=I.useCallback(async()=>{o(!0);const ge=new URLSearchParams,Ee=Array.from(d);Ee.length>0&&ge.append("installers",Ee.join(","));const V=Array.from(p);V.length>0&&ge.append("users",V.join(","));try{const Ae=await fetch(rr(`/api/calendar/events?${ge.toString()}`),{credentials:"include"});if(!Ae.ok)throw new Error("Failed to fetch calendar events");const Pe=await Ae.json();a(Pe)}catch(Ae){console.error("Error fetching calendar events:",Ae)}finally{o(!1)}},[d,p]);I.useEffect(()=>{B()},[l,B]);const H=new Date(l.getFullYear(),l.getMonth(),1),z=new Date(l.getFullYear(),l.getMonth()+1,0),ie=new Date(H);ie.setDate(ie.getDate()-ie.getDay());const X=new Date(z);X.setDate(X.getDate()+(6-X.getDay()));const W=[];let Q=new Date(ie);for(;Q<=X;)W.push(new Date(Q)),Q.setDate(Q.getDate()+1);const te=new Date(l);te.setDate(l.getDate()-l.getDay());const J=Array.from({length:7},(ge,Ee)=>{const V=new Date(te);return V.setDate(te.getDate()+Ee),V}),Y=ge=>{const Ee=W1(ge);return i.filter(Ae=>{if(!Ae.start||!Ae.end||!x&&Ae.type==="material_order_eta")return!1;const Pe=W1(z_(Ae.start,Ae.type)),ze=W1(z_(Ae.end,Ae.type));return Ee>=Pe&&Ee<=ze}).sort((Ae,Pe)=>{const ze=new Date(Ae.start).getTime(),De=new Date(Pe.start).getTime();if(ze!==De)return ze-De;const $e=new Date(Ae.end).getTime(),et=new Date(Pe.end).getTime(),ut=$e-ze,kt=et-De;return ut!==kt?kt-ut:Ae.id-Pe.id})},pe=ge=>{const Ee=new Date(l);Ee.setMonth(Ee.getMonth()+ge),c(Ee)},_e=ge=>{const Ee=new Date(l);Ee.setDate(Ee.getDate()+ge*7),c(Ee)},ee=ge=>{C(null),j(ge),S(!0)},de=ge=>{C(ge),j(null),S(!0),O(null)},G=ge=>{O(ge)},q=()=>{B()},ne=()=>{S(!1),C(null),j(null),L(null)},Se=ge=>{const Ee=new Date;return ge.getDate()===Ee.getDate()&&ge.getMonth()===Ee.getMonth()&&ge.getFullYear()===Ee.getFullYear()},re=(ge,Ee,V="grid")=>{var qe,Xe,Te;const Ae=W1(z_(ge.start,ge.type)),Pe=W1(z_(ge.end,ge.type)),ze=W1(Ee),De=ze.getTime()===Ae.getTime(),$e=ze.getTime()===Pe.getTime(),et=Ee.getDay()===0,ut=V==="list"||De||et||P!==null,kt=ge.type==="user_appointment",jr=ge.type==="material_order_eta"&&((qe=ge.fullEvent)==null?void 0:qe.status)==="Received",er=ge.type==="appointment"&&((Xe=ge.fullEvent)==null?void 0:Xe.isJobComplete);let ct=ge.type==="appointment"?`${ge.title} (${ge.customerName.split(" ")[0]})`:ge.title;ge.type==="appointment"&&ge.poNumber&&(ct+=` - PO: ${ge.poNumber}`),ct=due(ct);const qt=fue(ge,e||[],n||[],t),Lt=OWe(qt);let dr="block text-xs p-1 truncate relative overflow-hidden mb-1";V==="list"?dr="block text-sm p-2 rounded relative overflow-hidden mb-2":P!==null||De&&$e?dr+=" rounded":De?dr+=" rounded-l":$e&&(dr+=" rounded-r-md"),ge.isOnHold&&(dr+=" on-hold-event");const Gt=ge.isOnHold?{color:"#a0a0a0"}:{backgroundColor:qt,color:Lt};if((jr||er||ge.projectStatus==="Completed")&&!ge.isOnHold&&(Gt.backgroundImage="repeating-linear-gradient(45deg, transparent, transparent 5px, rgba(0,0,0,0.2) 5px, rgba(0,0,0,0.2) 10px)",ct=` ${ct}`),kt){const je=((Te=ge.fullEvent)==null?void 0:Te.isAllDay)?"All Day":new Date(ge.start).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"});return u.jsxs("div",{onClick:we=>{we.stopPropagation(),de(ge.fullEvent)},className:`${dr} cursor-pointer`,style:{backgroundColor:qt,color:Lt},title:ct,children:[u.jsx("span",{className:"font-bold",children:je}),u.jsx("span",{className:"ml-1",children:ut?ct:""})]},ge.appointmentId)}else return u.jsx("div",{className:`${dr} cursor-pointer hover:brightness-110`,style:Gt,title:ct,onClick:He=>{He.stopPropagation(),L(ge)},children:ut?ct:""},ge.appointmentId)};if(s)return u.jsx("div",{className:"text-center p-8",children:"Loading Calendar..."});const ae=2;return u.jsxs("div",{className:"flex flex-col h-full gap-4 md:gap-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4 px-1",children:[u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 md:gap-6 w-full md:w-auto",children:[u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-text-primary tracking-tight",children:"Calendar"})}),u.jsxs("div",{className:"flex flex-row items-center justify-between gap-4 w-full md:w-auto",children:[u.jsxs("div",{className:"flex items-center bg-surface-container-high rounded-full border border-outline/10 p-1 shadow-sm flex-shrink-0",children:[u.jsx("button",{onClick:()=>pe(-1),className:"p-2 rounded-full hover:bg-surface-container-highest text-text-secondary hover:text-text-primary transition-colors",children:u.jsx(fG,{size:20})}),u.jsx("span",{className:"font-bold text-sm md:text-lg px-2 md:px-4 min-w-[120px] md:min-w-[180px] text-center text-text-primary",children:l.toLocaleString("default",{month:"short",year:"numeric"})}),u.jsx("button",{onClick:()=>pe(1),className:"p-2 rounded-full hover:bg-surface-container-highest text-text-secondary hover:text-text-primary transition-colors",children:u.jsx(md,{size:20})})]}),u.jsx("div",{className:"block md:hidden w-full max-w-[200px]",children:u.jsx($K,{installers:n,users:e,selectedInstallerIds:d,selectedUserIds:p,showDeliveries:x,onInstallerChange:f,onUserChange:m,onShowDeliveriesChange:y})})]})]}),u.jsx("div",{className:"hidden md:block w-full md:w-auto",children:u.jsx($K,{installers:n,users:e,selectedInstallerIds:d,selectedUserIds:p,showDeliveries:x,onInstallerChange:f,onUserChange:m,onShowDeliveriesChange:y})})]}),u.jsxs("div",{className:"md:hidden flex-1 flex flex-col gap-4",children:[u.jsxs("div",{className:"flex justify-between items-center bg-surface p-3 rounded-lg border border-border shadow-sm",children:[u.jsxs("button",{onClick:()=>_e(-1),className:"flex items-center text-sm font-medium text-text-secondary hover:text-primary",children:[u.jsx(fG,{size:16,className:"mr-1"})," Prev Week"]}),u.jsxs("span",{className:"text-sm font-bold text-text-primary",children:["Week of ",te.toLocaleDateString(void 0,{month:"short",day:"numeric"})]}),u.jsxs("button",{onClick:()=>_e(1),className:"flex items-center text-sm font-medium text-text-secondary hover:text-primary",children:["Next Week ",u.jsx(md,{size:16,className:"ml-1"})]})]}),u.jsx("div",{className:"space-y-4",children:J.map((ge,Ee)=>{const V=Y(ge),Ae=Se(ge);return u.jsxs("div",{className:`bg-surface border ${Ae?"border-primary":"border-border"} rounded-lg shadow-sm overflow-hidden`,children:[u.jsxs("div",{className:"flex justify-between items-center p-3 bg-background border-b border-border",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:`text-lg font-bold w-8 h-8 flex items-center justify-center rounded-full ${Ae?"bg-primary text-on-primary":"text-text-primary"}`,children:ge.getDate()}),u.jsx("span",{className:"font-semibold text-text-primary",children:ge.toLocaleDateString(void 0,{weekday:"long"})})]}),u.jsx("button",{onClick:()=>ee(ge),className:"p-1.5 bg-secondary/10 text-secondary hover:bg-secondary/20 rounded-md transition-colors",children:u.jsx(ac,{size:18})})]}),u.jsx("div",{className:"p-3 min-h-[60px]",children:V.length>0?V.map(Pe=>re(Pe,ge,"list")):u.jsx("p",{className:"text-sm text-text-tertiary italic",children:"No events scheduled"})})]},Ee)})})]}),u.jsxs("div",{className:"hidden md:flex bg-surface-container-high p-6 rounded-xl shadow-sm border border-outline/10 flex-1 flex-col min-h-0 relative",children:[u.jsx("div",{className:"grid grid-cols-7 text-center font-semibold text-text-primary border-b border-outline/10 pb-2 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(ge=>u.jsx("div",{children:ge},ge))}),u.jsx("div",{className:"grid grid-cols-7 grid-rows-6 flex-1",children:W.map((ge,Ee)=>{const V=Y(ge),Ae=ge.getMonth()===l.getMonth(),Pe=V.slice(0,ae),ze=V.length-ae;return u.jsxs("div",{onClick:()=>ee(ge),className:`border border-outline/10 flex flex-col cursor-pointer transition-colors ${Ae?"hover:bg-surface-container-highest bg-surface-container-low":"bg-surface-container-lowest text-text-secondary opacity-50"}`,children:[u.jsx("span",{className:`font-semibold mb-1 self-start p-1 ml-1 mt-1 ${Se(ge)?"bg-primary text-on-primary rounded-full w-7 h-7 flex items-center justify-center shadow-md":"w-7 h-7 flex items-center justify-center text-text-primary"}`,children:ge.getDate()}),u.jsxs("div",{className:"flex-1 overflow-hidden px-1",children:[Pe.map(De=>re(De,ge)),ze>0&&u.jsxs("div",{onClick:De=>{De.stopPropagation(),G(ge)},className:"text-xs text-text-secondary font-medium hover:text-primary cursor-pointer mt-1 bg-surface/50 rounded p-1 text-center",children:["+ ",ze," More"]})]})]},Ee)})})]}),P&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-2xl shadow-2xl w-full max-w-md max-h-[80vh] flex flex-col border border-outline/10",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-outline/10 pb-2",children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:P.toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"})}),u.jsx("button",{onClick:()=>O(null),className:"text-text-secondary hover:text-text-primary p-2 hover:bg-surface-container-highest rounded-full",children:u.jsx(tn,{size:24})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:Y(P).map(ge=>re(ge,P))}),u.jsx("div",{className:"mt-4 pt-4 border-t border-outline/10 flex justify-end",children:u.jsx("button",{onClick:()=>{O(null),ee(P)},className:"bg-primary hover:bg-primary-hover text-on-primary px-4 py-2 rounded-full text-sm font-semibold shadow-md transition-colors",children:"+ Add New Event"})})]})}),b&&u.jsx(jWe,{isOpen:b,onClose:ne,event:_,selectedDate:A,onSaveSuccess:q}),D&&u.jsx(RWe,{event:D,onClose:()=>L(null),users:e||[],installers:n||[],currentUser:t})]})},RWe=({event:e,onClose:t,users:r,installers:n,currentUser:i})=>{const a=fue(e,r,n,i),s=e.fullEvent||{},o=new Date(e.start),l=new Date(e.end),c=o.toDateString()===l.toDateString()?o.toLocaleDateString([],{weekday:"long",month:"long",day:"numeric"}):`${o.toLocaleDateString([],{month:"short",day:"numeric"})} - ${l.toLocaleDateString([],{month:"short",day:"numeric"})}`;return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",onClick:t,children:u.jsxs("div",{className:"bg-surface-container-high rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden animate-in fade-in zoom-in duration-200 border border-outline/10",onClick:d=>d.stopPropagation(),children:[u.jsx("div",{className:"h-2 w-full",style:{backgroundColor:a}}),u.jsxs("div",{className:"p-5",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-4 h-4 rounded mt-1.5 shrink-0",style:{backgroundColor:a}}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold text-text-primary leading-tight",children:e.title}),u.jsx("p",{className:"text-sm text-text-secondary mt-1",children:c})]})]}),u.jsx("button",{onClick:t,className:"text-text-tertiary hover:text-text-primary p-1 rounded-full hover:bg-surface-container-highest transition-colors",children:u.jsx(tn,{size:20})})]}),u.jsxs("div",{className:"space-y-4 pl-7",children:[e.type==="material_order_eta"?u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-start gap-3 text-sm text-text-secondary",children:[u.jsx(dx,{size:18,className:"text-text-tertiary shrink-0 mt-0.5"}),u.jsxs("div",{children:[u.jsxs("p",{children:[u.jsx("span",{className:"font-medium text-text-primary",children:"Supplier:"})," ",s.supplierName]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-medium text-text-primary",children:"Status:"})," ",s.status]})]})]}),s.items&&Array.isArray(s.items)&&u.jsx("div",{className:"space-y-2 mt-2",children:s.items.map((d,f)=>u.jsxs("div",{className:"flex gap-3 p-2 bg-surface-container-low rounded-lg border border-outline/10",children:[u.jsx("div",{className:"w-10 h-10 bg-surface-container-highest rounded-md border border-outline/10 shrink-0 overflow-hidden",children:d.image?u.jsx("img",{src:Ma(d.image),alt:"",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center text-text-tertiary",children:u.jsx(dx,{size:14})})}),u.jsxs("div",{className:"text-sm overflow-hidden",children:[u.jsx("p",{className:"font-medium text-text-primary truncate",title:d.name,children:d.name}),u.jsxs("p",{className:"text-xs text-text-secondary",children:[d.quantity," ",d.unit]})]})]},f))})]}):u.jsxs(u.Fragment,{children:[s.address&&u.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[u.jsx(G4,{size:18,className:"text-text-tertiary shrink-0 mt-0.5"}),u.jsx("a",{href:`https://maps.google.com/?q=${encodeURIComponent(s.address)}`,target:"_blank",rel:"noreferrer",className:"text-text-primary hover:underline hover:text-primary",children:s.address})]}),u.jsxs("div",{className:"flex items-start gap-3 text-sm text-text-secondary",children:[u.jsx(au,{size:18,className:"text-text-tertiary shrink-0 mt-0.5"}),u.jsxs("div",{children:[u.jsxs("p",{children:[u.jsx("span",{className:"font-medium text-text-primary",children:"Project:"})," ",s.projectName]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-medium text-text-primary",children:"Customer:"})," ",e.customerName]}),s.installerName&&u.jsxs("p",{children:[u.jsx("span",{className:"font-medium text-text-primary",children:"Installer:"})," ",s.installerName]})]})]}),s.pinnedNotes&&u.jsxs("div",{className:"mt-3 p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-md text-sm text-text-primary",children:[u.jsx("p",{className:"text-xs font-bold text-yellow-600 mb-1 flex items-center gap-1",children:" IMPORTANT NOTES"}),u.jsx(S3,{content:s.pinnedNotes})]})]}),u.jsx("div",{className:"pt-2 border-t border-border mt-2",children:u.jsxs(ui,{to:`/projects/${e.id}`,className:"inline-flex items-center gap-2 text-primary hover:text-primary-hover font-semibold text-sm",children:["Open Project Details ",u.jsx(am,{size:16})]})})]})]})]})})},jWe=({isOpen:e,onClose:t,event:r,selectedDate:n,onSaveSuccess:i})=>{var ne,Se;const{users:a,currentUser:s,systemBranding:o}=Xr(),{data:l=[]}=Cf(),c=o==null?void 0:o.systemTimezone,d=!r||s&&r.createdByUserId===s.userId,[f,p]=I.useState(!r),[m,x]=I.useState(""),[y,b]=I.useState(""),[S,_]=I.useState(""),[C,A]=I.useState(""),[j,P]=I.useState("09:00"),[O,D]=I.useState("10:00"),[L,B]=I.useState(!1),[H,z]=I.useState(!1),[ie,X]=I.useState([]),[W,Q]=I.useState(!1),[te,J]=I.useState(!1),Y=Vr.useMemo(()=>[...(a||[]).map(re=>({label:re.email,value:`user-${re.userId}`,type:"user",color:re.color})),...(l||[]).map(re=>({label:re.installerName,value:`installer-${String(re.id)}`,type:"installer",color:re.color}))],[a,l]);I.useEffect(()=>{var re;if(r){x(r.title),b(r.notes||"");const ae=new Date(r.startTime),ge=new Date(r.endTime);if(_(ED(ae)),A(ED(ge)),P(ae.toTimeString().substring(0,5)),D(ge.toTimeString().substring(0,5)),B(r.isAllDay||!1),z(r.isPublic||!1),r.attendees){const Ee=r.attendees.map(V=>{var Ae;if(V.attendeeType==="user"){const Pe=(a||[]).find(De=>De.userId===V.attendeeId);let ze=(Pe==null?void 0:Pe.color)||null;return!ze&&s&&s.userId===V.attendeeId&&(ze=(Ae=s.preferences)==null?void 0:Ae.calendarColor),Pe?{label:Pe.email,value:`user-${Pe.userId}`,type:"user",color:ze}:null}else{const Pe=(l||[]).find(ze=>String(ze.id)===V.attendeeId);return Pe?{label:Pe.installerName,value:`installer-${String(Pe.id)}`,type:"installer",color:Pe.color}:null}}).filter(V=>V!==null);X(Ee)}}else if(n){x(""),b("");const ae=ED(n);_(ae),A(ae),P("09:00"),D("10:00"),B(!1),z(!1),X(s?[{label:s.email,value:`user-${s.userId}`,type:"user",color:(re=s.preferences)==null?void 0:re.calendarColor}]:[])}},[r,n,a,l,s]);const pe=async()=>{if(!m){Re.error("Title is required.");return}Q(!0);try{const re=c||"America/Los_Angeles";let ae,ge;L?(ae=$_(`${S}T00:00:00`,re),ge=$_(`${C}T23:59:59`,re)):(ae=$_(`${S}T${j}:00`,re),ge=$_(`${C}T${O}:00`,re));const Ee={title:m,notes:y,startTime:ae.toISOString(),endTime:ge.toISOString(),isAllDay:L,isPublic:H,jobId:null,attendees:ie.map(V=>({attendeeId:V.value.substring(V.value.indexOf("-")+1),attendeeType:V.type}))};r?await dWe(r.id,Ee):await uWe(Ee),Re.success(r?"Updated!":"Created!"),i(),t()}catch{Re.error("Failed to save.")}finally{Q(!1)}},_e=async()=>{if(!(!r||!window.confirm("Delete this appointment?"))){J(!0);try{await fWe(r.id),Re.success("Deleted."),i(),t()}catch{Re.error("Failed to delete.")}finally{J(!1)}}},ee=async re=>{if(r)try{if(!(await fetch(rr(`/api/events/${r.id}/respond`),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:re}),credentials:"include"})).ok)throw new Error("Failed");Re.success(`Invitation ${re}`),i(),t()}catch{Re.error("Could not update status")}};if(!e)return null;const de=(ne=r==null?void 0:r.attendees)==null?void 0:ne.find(re=>re.attendeeType==="user"&&re.attendeeId===(s==null?void 0:s.userId)),G=(de==null?void 0:de.status)||"pending",q=!!r&&!d&&de&&G==="pending";return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-surface-container-high p-8 rounded-2xl shadow-2xl w-full max-w-lg relative border border-outline/10",children:[u.jsxs("div",{className:"flex justify-between items-start mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:r?f?"Edit Appointment":"Appointment Details":"New Appointment"}),u.jsxs("div",{className:"flex items-center gap-2",children:[r&&!f&&d&&u.jsx("button",{onClick:()=>p(!0),className:"p-2 text-primary hover:bg-surface-container-highest rounded-full transition-colors",title:"Edit",children:u.jsx(fx,{size:18})}),u.jsx("button",{onClick:t,className:"p-2 text-text-secondary hover:text-text-primary rounded-full hover:bg-surface-container-highest transition-colors",children:u.jsx(tn,{size:20})})]})]}),!f&&r?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-1",children:u.jsx("span",{dangerouslySetInnerHTML:{__html:due(r.title)}})}),u.jsxs("div",{className:"flex items-center text-text-secondary text-sm",children:[u.jsx(gd,{size:16,className:"mr-2"}),new Date(r.startTime).toLocaleString([],{dateStyle:"medium",timeStyle:"short"})," - ",new Date(r.endTime).toLocaleString([],{timeStyle:"short"})]}),r.isPublic&&u.jsxs("div",{className:"flex items-center text-xs text-primary mt-1",children:[u.jsx(ux,{size:12,className:"mr-1"})," Public Event"]})]}),u.jsx("div",{className:"bg-surface-container-low p-4 rounded-xl border border-outline/10 max-h-60 overflow-y-auto",children:u.jsx(S3,{content:r.notes||"No notes provided."})}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-semibold text-text-secondary mb-2",children:"Attendees"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:(Se=r.attendees)==null?void 0:Se.map((re,ae)=>{var Pe,ze;const Ee=re.attendeeType==="user"?(Pe=a.find(De=>De.userId===re.attendeeId))==null?void 0:Pe.email:(ze=l.find(De=>String(De.id)===re.attendeeId))==null?void 0:ze.installerName;let V=gd,Ae="text-yellow-500";return re.status==="accepted"&&(V=pd,Ae="text-green-500"),re.status==="declined"&&(V=V4,Ae="text-red-500"),u.jsxs("div",{className:"flex items-center bg-surface-container-highest border border-outline/10 px-3 py-1 rounded-full text-xs",children:[u.jsx(V,{size:12,className:`mr-1 ${Ae}`}),u.jsx("span",{className:"text-text-primary",children:Ee||"Unknown"})]},ae)})})]}),q&&u.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-outline/10",children:[u.jsx("span",{className:"text-sm text-text-secondary self-center mr-auto",children:"You are invited:"}),u.jsx("button",{onClick:()=>ee("declined"),className:"px-4 py-2 text-sm border border-error text-error rounded-full hover:bg-error/10 font-medium transition-colors",children:"Decline"}),u.jsx("button",{onClick:()=>ee("accepted"),className:"px-4 py-2 text-sm bg-success text-on-success rounded-full hover:bg-success-hover font-medium transition-colors",children:"Accept"})]})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Title"}),u.jsx(FT,{value:m,onChange:x,placeholder:"Event Title...",singleLine:!0})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:"Start"}),u.jsx("input",{type:"date",value:S,onChange:re=>_(re.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors mb-2"}),!L&&u.jsx("input",{type:"time",value:j,onChange:re=>P(re.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:"End"}),u.jsx("input",{type:"date",value:C,onChange:re=>A(re.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors mb-2"}),!L&&u.jsx("input",{type:"time",value:O,onChange:re=>D(re.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors"})]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"checkbox",id:"isAllDay",checked:L,onChange:re=>B(re.target.checked),className:"w-4 h-4 text-primary bg-surface-container-highest border-outline/20 rounded focus:ring-primary"}),u.jsx("label",{htmlFor:"isAllDay",className:"text-sm font-medium text-text-primary cursor-pointer",children:"All Day"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"checkbox",id:"isPublic",checked:H,onChange:re=>z(re.target.checked),className:"w-4 h-4 text-primary bg-surface-container-highest border-outline/20 rounded focus:ring-primary"}),u.jsxs("label",{htmlFor:"isPublic",className:"text-sm font-medium text-text-primary cursor-pointer flex items-center",children:[H?u.jsx(ux,{size:14,className:"mr-1"}):u.jsx(r9,{size:14,className:"mr-1"}),H?"Public Event":"Private"]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:"Attendees"}),u.jsx(rce,{isMulti:!0,options:Y,value:ie,onChange:X,className:"react-select-container mt-1",classNamePrefix:"react-select",styles:{control:re=>({...re,backgroundColor:"var(--color-surface-container-highest)",borderColor:"transparent",borderRadius:"0.5rem",padding:"0.2rem"}),input:re=>({...re,color:"var(--color-text-primary)"}),multiValue:re=>({...re,backgroundColor:"var(--color-surface-container-low)"}),multiValueLabel:re=>({...re,color:"var(--color-text-primary)"}),menu:re=>({...re,backgroundColor:"var(--color-surface-container-highest)"}),option:(re,{isFocused:ae,isSelected:ge})=>({...re,backgroundColor:ge?"var(--color-primary)":ae?"var(--color-surface-container-highest)":void 0,color:ge?"var(--color-on-primary)":"var(--color-text-primary)"})}})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Notes"}),u.jsx(FT,{value:y,onChange:b,placeholder:"Add notes...",minHeight:80})]}),u.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[r&&u.jsx("button",{type:"button",onClick:_e,disabled:te,className:"py-2 px-4 bg-error-container hover:bg-error/20 text-error rounded-full font-semibold mr-auto flex items-center justify-center transition-colors",children:u.jsx(wo,{size:16})}),u.jsx("button",{type:"button",onClick:()=>r?p(!1):t(),className:"py-2 px-6 bg-surface hover:bg-surface-container-highest border border-outline/20 rounded-full text-text-secondary font-medium transition-colors",children:"Cancel"}),u.jsx("button",{type:"button",onClick:pe,disabled:W,className:"py-2 px-6 bg-primary hover:bg-primary-hover rounded-full text-on-primary font-bold shadow-md transition-all",children:W?"Saving...":"Save"})]})]})]})})};function V1(e,t,r){let n=r.initialDeps??[],i;function a(){var s,o,l,c;let d;r.key&&((s=r.debug)!=null&&s.call(r))&&(d=Date.now());const f=e();if(!(f.length!==n.length||f.some((x,y)=>n[y]!==x)))return i;n=f;let m;if(r.key&&((o=r.debug)!=null&&o.call(r))&&(m=Date.now()),i=t(...f),r.key&&((l=r.debug)!=null&&l.call(r))){const x=Math.round((Date.now()-d)*100)/100,y=Math.round((Date.now()-m)*100)/100,b=y/16,S=(_,C)=>{for(_=String(_);_.length<C;)_=" "+_;return _};console.info(`%c ${S(y,5)} /${S(x,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*b,120))}deg 100% 31%);`,r==null?void 0:r.key)}return(c=r==null?void 0:r.onChange)==null||c.call(r,i),i}return a.updateDeps=s=>{n=s},a}function JK(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const DWe=(e,t)=>Math.abs(e-t)<1.01,MWe=(e,t,r)=>{let n;return function(...i){e.clearTimeout(n),n=e.setTimeout(()=>t.apply(this,i),r)}},ZK=e=>{const{offsetWidth:t,offsetHeight:r}=e;return{width:t,height:r}},FWe=e=>e,LWe=e=>{const t=Math.max(e.startIndex-e.overscan,0),r=Math.min(e.endIndex+e.overscan,e.count-1),n=[];for(let i=t;i<=r;i++)n.push(i);return n},BWe=(e,t)=>{const r=e.scrollElement;if(!r)return;const n=e.targetWindow;if(!n)return;const i=s=>{const{width:o,height:l}=s;t({width:Math.round(o),height:Math.round(l)})};if(i(ZK(r)),!n.ResizeObserver)return()=>{};const a=new n.ResizeObserver(s=>{const o=()=>{const l=s[0];if(l!=null&&l.borderBoxSize){const c=l.borderBoxSize[0];if(c){i({width:c.inlineSize,height:c.blockSize});return}}i(ZK(r))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return a.observe(r,{box:"border-box"}),()=>{a.unobserve(r)}},eX={passive:!0},tX=typeof window>"u"?!0:"onscrollend"in window,UWe=(e,t)=>{const r=e.scrollElement;if(!r)return;const n=e.targetWindow;if(!n)return;let i=0;const a=e.options.useScrollendEvent&&tX?()=>{}:MWe(n,()=>{t(i,!1)},e.options.isScrollingResetDelay),s=d=>()=>{const{horizontal:f,isRtl:p}=e.options;i=f?r.scrollLeft*(p&&-1||1):r.scrollTop,a(),t(i,d)},o=s(!0),l=s(!1);l(),r.addEventListener("scroll",o,eX);const c=e.options.useScrollendEvent&&tX;return c&&r.addEventListener("scrollend",l,eX),()=>{r.removeEventListener("scroll",o),c&&r.removeEventListener("scrollend",l)}},$We=(e,t,r)=>{if(t!=null&&t.borderBoxSize){const n=t.borderBoxSize[0];if(n)return Math.round(n[r.options.horizontal?"inlineSize":"blockSize"])}return e[r.options.horizontal?"offsetWidth":"offsetHeight"]},zWe=(e,{adjustments:t=0,behavior:r},n)=>{var i,a;const s=e+t;(a=(i=n.scrollElement)==null?void 0:i.scrollTo)==null||a.call(i,{[n.options.horizontal?"left":"top"]:s,behavior:r})};class HWe{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let r=null;const n=()=>r||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:r=new this.targetWindow.ResizeObserver(i=>{i.forEach(a=>{const s=()=>{this._measureElement(a.target,a)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(s):s()})}));return{disconnect:()=>{var i;(i=n())==null||i.disconnect(),r=null},observe:i=>{var a;return(a=n())==null?void 0:a.observe(i,{box:"border-box"})},unobserve:i=>{var a;return(a=n())==null?void 0:a.unobserve(i)}}})(),this.range=null,this.setOptions=r=>{Object.entries(r).forEach(([n,i])=>{typeof i>"u"&&delete r[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:FWe,rangeExtractor:LWe,onChange:()=>{},measureElement:$We,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...r}},this.notify=r=>{var n,i;(i=(n=this.options).onChange)==null||i.call(n,this,r)},this.maybeNotify=V1(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),r=>{this.notify(r)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(r=>r()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var r;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.maybeNotify();return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((r=this.scrollElement)==null?void 0:r.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,a)=>{this.scrollAdjustments=0,this.scrollDirection=a?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=a,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(r,n)=>{const i=new Map,a=new Map;for(let s=n-1;s>=0;s--){const o=r[s];if(i.has(o.lane))continue;const l=a.get(o.lane);if(l==null||o.end>l.end?a.set(o.lane,o):o.end<l.end&&i.set(o.lane,!0),i.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((s,o)=>s.end===o.end?s.index-o.index:s.end-o.end)[0]:void 0},this.getMeasurementOptions=V1(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(r,n,i,a,s)=>(this.pendingMeasuredCacheIndexes=[],{count:r,paddingStart:n,scrollMargin:i,getItemKey:a,enabled:s}),{key:!1}),this.getMeasurements=V1(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:r,paddingStart:n,scrollMargin:i,getItemKey:a,enabled:s},o)=>{if(!s)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(d=>{this.itemSizeCache.set(d.key,d.size)}));const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const c=this.measurementsCache.slice(0,l);for(let d=l;d<r;d++){const f=a(d),p=this.options.lanes===1?c[d-1]:this.getFurthestMeasurement(c,d),m=p?p.end+this.options.gap:n+i,x=o.get(f),y=typeof x=="number"?x:this.options.estimateSize(d),b=m+y,S=p?p.lane:d%this.options.lanes;c[d]={index:d,start:m,size:y,end:b,key:f,lane:S}}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=V1(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(r,n,i,a)=>this.range=r.length>0&&n>0?WWe({measurements:r,outerSize:n,scrollOffset:i,lanes:a}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=V1(()=>{let r=null,n=null;const i=this.calculateRange();return i&&(r=i.startIndex,n=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,r,n]),[this.options.rangeExtractor,this.options.overscan,this.options.count,r,n]},(r,n,i,a,s)=>a===null||s===null?[]:r({startIndex:a,endIndex:s,overscan:n,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=r=>{const n=this.options.indexAttribute,i=r.getAttribute(n);return i?parseInt(i,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(r,n)=>{const i=this.indexFromElement(r),a=this.measurementsCache[i];if(!a)return;const s=a.key,o=this.elementsCache.get(s);o!==r&&(o&&this.observer.unobserve(o),this.observer.observe(r),this.elementsCache.set(s,r)),r.isConnected&&this.resizeItem(i,this.options.measureElement(r,n,this))},this.resizeItem=(r,n)=>{const i=this.measurementsCache[r];if(!i)return;const a=this.itemSizeCache.get(i.key)??i.size,s=n-a;s!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,s,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=s,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,n)),this.notify(!1))},this.measureElement=r=>{if(!r){this.elementsCache.forEach((n,i)=>{n.isConnected||(this.observer.unobserve(n),this.elementsCache.delete(i))});return}this._measureElement(r,void 0)},this.getVirtualItems=V1(()=>[this.getVirtualIndexes(),this.getMeasurements()],(r,n)=>{const i=[];for(let a=0,s=r.length;a<s;a++){const o=r[a],l=n[o];i.push(l)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=r=>{const n=this.getMeasurements();if(n.length!==0)return JK(n[hue(0,n.length-1,i=>JK(n[i]).start,r)])},this.getOffsetForAlignment=(r,n,i=0)=>{const a=this.getSize(),s=this.getScrollOffset();n==="auto"&&(n=r>=s+a?"end":"start"),n==="center"?r+=(i-a)/2:n==="end"&&(r-=a);const o=this.getTotalSize()+this.options.scrollMargin-a;return Math.max(Math.min(o,r),0)},this.getOffsetForIndex=(r,n="auto")=>{r=Math.max(0,Math.min(r,this.options.count-1));const i=this.measurementsCache[r];if(!i)return;const a=this.getSize(),s=this.getScrollOffset();if(n==="auto")if(i.end>=s+a-this.options.scrollPaddingEnd)n="end";else if(i.start<=s+this.options.scrollPaddingStart)n="start";else return[s,n];const o=n==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,n,i.size),n]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(r,{align:n="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(r,n),{adjustments:void 0,behavior:i})},this.scrollToIndex=(r,{align:n="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),r=Math.max(0,Math.min(r,this.options.count-1));let a=0;const s=10,o=c=>{if(!this.targetWindow)return;const d=this.getOffsetForIndex(r,c);if(!d){console.warn("Failed to get offset for index:",r);return}const[f,p]=d;this._scrollToOffset(f,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{const m=this.getScrollOffset(),x=this.getOffsetForIndex(r,p);if(!x){console.warn("Failed to get offset for index:",r);return}DWe(x[0],m)||l(p)})},l=c=>{this.targetWindow&&(a++,a<s?this.targetWindow.requestAnimationFrame(()=>o(c)):console.warn(`Failed to scroll to index ${r} after ${s} attempts.`))};o(n)},this.scrollBy=(r,{behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+r,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var r;const n=this.getMeasurements();let i;if(n.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((r=n[n.length-1])==null?void 0:r.end)??0;else{const a=Array(this.options.lanes).fill(null);let s=n.length-1;for(;s>=0&&a.some(o=>o===null);){const o=n[s];a[o.lane]===null&&(a[o.lane]=o.end),s--}i=Math.max(...a.filter(o=>o!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(r,{adjustments:n,behavior:i})=>{this.options.scrollToFn(r,{behavior:i,adjustments:n},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(t)}}const hue=(e,t,r,n)=>{for(;e<=t;){const i=(e+t)/2|0,a=r(i);if(a<n)e=i+1;else if(a>n)t=i-1;else return i}return e>0?e-1:0};function WWe({measurements:e,outerSize:t,scrollOffset:r,lanes:n}){const i=e.length-1,a=l=>e[l].start;if(e.length<=n)return{startIndex:0,endIndex:i};let s=hue(0,i,a,r),o=s;if(n===1)for(;o<i&&e[o].end<r+t;)o++;else if(n>1){const l=Array(n).fill(0);for(;o<i&&l.some(d=>d<r+t);){const d=e[o];l[d.lane]=d.end,o++}const c=Array(n).fill(r+t);for(;s>=0&&c.some(d=>d>=r);){const d=e[s];c[d.lane]=d.start,s--}s=Math.max(0,s-s%n),o=Math.min(i,o+(n-1-o%n))}return{startIndex:s,endIndex:o}}const rX=typeof document<"u"?I.useLayoutEffect:I.useEffect;function VWe(e){const t=I.useReducer(()=>({}),{})[1],r={...e,onChange:(i,a)=>{var s;a?Ml.flushSync(t):t(),(s=e.onChange)==null||s.call(e,i,a)}},[n]=I.useState(()=>new HWe(r));return n.setOptions(r),rX(()=>n._didMount(),[]),rX(()=>n._willUpdate()),n}function pue(e){return VWe({observeElementRect:BWe,observeElementOffset:UWe,scrollToFn:zWe,...e})}const qWe=()=>{const[e,t]=I.useState(4);return I.useEffect(()=>{const r=()=>{const n=window.innerWidth;n<768?t(1):n<1024?t(2):n<1280?t(3):t(4)};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),e},mue=({initialData:e,onSave:t,onCancel:r,isSaving:n})=>{var de;const{vendors:i,addVendor:a}=Xr(),[s,o]=I.useState((e==null?void 0:e.name)||""),[l,c]=I.useState((e==null?void 0:e.manufacturerId)||""),[d,f]=I.useState((e==null?void 0:e.supplierId)||""),[p,m]=I.useState((e==null?void 0:e.productType)||Ey[0]),[x,y]=I.useState((e==null?void 0:e.description)||""),[b,S]=I.useState((e==null?void 0:e.productLineUrl)||""),[_,C]=I.useState(((de=e==null?void 0:e.variants)==null?void 0:de.some(G=>G.isMaster))||!1),[A,j]=I.useState(null),[P,O]=I.useState(""),[D,L]=I.useState("upload"),[B,H]=I.useState((e==null?void 0:e.defaultImageUrl)||null),[z,ie]=I.useState(!1),[X,W]=I.useState(""),[Q,te]=I.useState(null);I.useEffect(()=>{e!=null&&e.defaultImageUrl&&e.defaultImageUrl.startsWith("http")&&(O(e.defaultImageUrl),L("url"))},[e==null?void 0:e.defaultImageUrl]),I.useEffect(()=>{if(l&&typeof l=="number"){const G=i.find(q=>q.id===l);G&&(G.defaultSupplierId&&f(G.defaultSupplierId),G.defaultProductType&&m(G.defaultProductType))}},[l,i]);const J=G=>i.filter(q=>q.vendorType===G||q.vendorType==="Both").map(q=>({value:q.id,label:q.name})),Y=G=>{var q;(q=G.target.files)!=null&&q[0]&&(j(G.target.files[0]),H(URL.createObjectURL(G.target.files[0])),O(""))},pe=(G,q)=>{W(G),te(q),ie(!0)},_e=async G=>{try{const q={...G,vendorType:Q==="manufacturer"?"Manufacturer":"Supplier"};await a(q),ie(!1),te(null)}catch(q){console.error(q)}},ee=async G=>{if(G.preventDefault(),!s||!l){Re.error("Name and Manufacturer are required.");return}const q=new FormData;q.append("name",s),q.append("manufacturerId",String(l)),d&&q.append("supplierId",String(d)),q.append("productType",p),q.append("description",x),q.append("productLineUrl",b),q.append("hasMasterBoard",String(_)),D==="upload"&&A?q.append("image",A):D==="url"&&P&&q.append("defaultImageUrl",P),await t(q)};return u.jsxs("form",{onSubmit:ee,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"w-full aspect-video bg-background border-2 border-dashed border-border rounded-lg flex items-center justify-center relative overflow-hidden group",children:[B?u.jsx("img",{src:B,alt:"Preview",className:"w-full h-full object-cover"}):u.jsx("span",{className:"text-text-secondary text-sm",children:"Default Product Image"}),u.jsx("div",{className:"absolute inset-0 bg-scrim/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:D==="upload"?u.jsxs("label",{className:"cursor-pointer bg-primary-container text-on-primary-container px-4 py-2 rounded-full text-sm font-bold flex items-center gap-2 shadow-md hover:brightness-110 transition-all",children:[u.jsx(Eb,{size:16})," Change File",u.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Y})]}):null})]}),u.jsxs("div",{className:"flex gap-6 text-sm text-text-secondary",children:[u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"imgType",checked:D==="upload",onChange:()=>L("upload"),className:"form-radio h-4 w-4 text-primary bg-surface-container-low border-outline/50"}),"Upload File"]}),u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"imgType",checked:D==="url",onChange:()=>L("url"),className:"form-radio h-4 w-4 text-primary bg-surface-container-low border-outline/50"}),"Paste URL"]})]}),D==="url"&&u.jsx("input",{type:"text",placeholder:"https://manufacturer.com/image.jpg",value:P,onChange:G=>{O(G.target.value),H(G.target.value)},className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Product Line Name *"}),u.jsx("input",{type:"text",required:!0,value:s,onChange:G=>o(G.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",placeholder:"e.g. Forever Oak Collection"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Manufacturer"}),u.jsx(PS,{isClearable:!0,options:J("Manufacturer"),value:l?J("Manufacturer").find(G=>G.value===l):null,onChange:G=>c(G?G.value:""),onCreateOption:G=>pe(G,"manufacturer"),className:"react-select-container",classNamePrefix:"react-select",placeholder:"Select or Create Manufacturer..."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Preferred Supplier"}),u.jsx(PS,{isClearable:!0,options:J("Supplier"),value:d?J("Supplier").find(G=>G.value===d):null,onChange:G=>f(G?G.value:""),onCreateOption:G=>pe(G,"supplier"),className:"react-select-container",classNamePrefix:"react-select",placeholder:"Select or Create Supplier..."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Product Type *"}),u.jsx("select",{value:p,onChange:G=>m(G.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",children:Ey.map(G=>u.jsx("option",{value:G,children:G},G))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Website URL"}),u.jsx("input",{type:"url",value:b,onChange:G=>S(G.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none",placeholder:"https://manufacturer.com/product"})]}),u.jsxs("div",{className:"flex items-center gap-2 pt-4",children:[u.jsx("input",{type:"checkbox",id:"masterBoard",checked:_,onChange:G=>C(G.target.checked),className:"form-checkbox h-4 w-4 text-primary bg-surface-container-low border-outline/50 rounded-sm focus:ring-primary"}),u.jsx("label",{htmlFor:"masterBoard",className:"text-sm font-medium text-text-primary cursor-pointer",children:'Inventory includes a "Master Board" / Strap Set?'})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Description / Notes"}),u.jsx("textarea",{value:x,onChange:G=>y(G.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none h-24"})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-outline/10",children:[u.jsx("button",{type:"button",onClick:r,className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:n,className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Saving...":u.jsxs(u.Fragment,{children:[u.jsx(Cs,{size:18})," Save Product Line"]})})]}),z&&u.jsx(kb,{isOpen:z,onClose:()=>ie(!1),initialVendorType:Q==="manufacturer"?"Manufacturer":"Supplier",onSave:_e})]})},GWe=({productId:e,productType:t,manufacturerId:r,pricingSettings:n,onClose:i,onSuccess:a})=>{const{vendors:s,addVariantsBatch:o}=Xr(),[l,c]=I.useState({unitCost:"",retailPrice:"",cartonSize:"",wearLayer:"",thickness:"",uom:"SF",pricingUnit:"SF",sku:"",style:"",finish:"",hasSample:!1}),[d,f]=I.useState([]),[p,m]=I.useState([]),[x,y]=I.useState([]),[b,S]=I.useState([]);I.useEffect(()=>{A()},[]);const C=t==="Carpet"||t==="Sheet Product"?{color:"Colors / Styles",size:"Roll Widths",showPackaging:!1,showTechSpecs:!1}:t==="LVP"||t==="LVT"||t==="Laminate"||t==="Hardwood"?{color:"Colors",size:"Plank Sizes",showPackaging:!0,showTechSpecs:!0}:{color:"Colors",size:"Sizes",showPackaging:!0,showTechSpecs:!1},A=async()=>{try{const D=await w9();S(D.map(L=>({label:L.value,value:L.value})))}catch(D){console.error(D)}},j=D=>{const L=parseFloat(D);let B=l.retailPrice;if(!isNaN(L)&&n&&L>0){const H=s.find(X=>X.id===r),z=kh(H,n,"Customer");B=Ch(L,z.percentage,z.method).toFixed(2)}else D===""&&(B="");c({...l,unitCost:D,retailPrice:B})};I.useEffect(()=>{if(d.length===0&&p.length===0){y([]);return}const D=[],L=d.length>0?d:[{label:"",value:""}],B=p.length>0?p:[{label:"",value:""}];L.forEach(H=>{B.forEach(z=>{!H.value&&!z.value||D.push({name:H.value,size:z.value,...l,sku:l.sku,wearLayer:l.wearLayer,thickness:l.thickness,unitCost:parseFloat(l.unitCost)||0,retailPrice:parseFloat(l.retailPrice)||0,cartonSize:parseFloat(l.cartonSize)||0,hasSample:l.hasSample})})}),y(D)},[d,p,l]);const P=async()=>{if(x.length!==0)try{await o(e,x),a([]),i()}catch(D){console.error(D)}},O={control:D=>({...D,backgroundColor:"var(--color-surface)",borderColor:"var(--color-border)",color:"var(--color-text-primary)"}),menu:D=>({...D,backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)",zIndex:9999}),option:(D,L)=>({...D,backgroundColor:L.isFocused?"var(--color-background)":"var(--color-surface)",color:"var(--color-text-primary)",cursor:"pointer"}),multiValue:D=>({...D,backgroundColor:"var(--color-primary)",color:"var(--color-on-primary)"}),multiValueLabel:D=>({...D,color:"var(--color-on-primary)"}),multiValueRemove:D=>({...D,color:"var(--color-on-primary)",":hover":{backgroundColor:"var(--color-primary-hover)",color:"var(--color-on-primary)"}}),input:D=>({...D,color:"var(--color-text-primary)"})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 overflow-y-auto",children:u.jsxs("div",{className:"bg-surface rounded-lg shadow-xl w-full max-w-5xl flex flex-col max-h-[90vh]",children:[u.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-border",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-bold text-text-primary flex items-center gap-2",children:[u.jsx(H4,{size:24,className:"text-primary"}),"Variant Generator"]}),u.jsx("p",{className:"text-text-secondary text-sm mt-1",children:"Cross-multiply lists to create variants in bulk."})]}),u.jsx("button",{onClick:i,className:"text-text-secondary hover:text-text-primary transition-colors",children:u.jsx(tn,{size:24})})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-6 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[u.jsxs("div",{className:"bg-background p-4 rounded-lg border border-border",children:[u.jsx("h3",{className:"font-semibold text-text-primary mb-4 text-sm uppercase tracking-wider",children:"1. Common Pricing & Specs"}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{className:"col-span-2",children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Common SKU (Optional)"}),u.jsx("input",{type:"text",value:l.sku,onChange:D=>c({...l,sku:D.target.value}),className:"w-full p-2 bg-surface border border-border rounded text-text-primary",placeholder:"e.g. Base SKU"})]}),C.showTechSpecs&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Wear Layer"}),u.jsx("input",{type:"text",value:l.wearLayer,onChange:D=>c({...l,wearLayer:D.target.value}),className:"w-full p-2 bg-surface border border-border rounded text-text-primary",placeholder:"20mil"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Thickness"}),u.jsx("input",{type:"text",value:l.thickness,onChange:D=>c({...l,thickness:D.target.value}),className:"w-full p-2 bg-surface border border-border rounded text-text-primary",placeholder:"5mm"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Unit Cost"}),u.jsx("input",{type:"number",step:"0.01",value:l.unitCost,onChange:D=>j(D.target.value),className:"w-full p-2 bg-surface border border-border rounded text-text-primary"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Retail Price"}),u.jsx("input",{type:"number",step:"0.01",value:l.retailPrice,onChange:D=>c({...l,retailPrice:D.target.value}),className:"w-full p-2 bg-surface border border-border rounded text-text-primary"})]}),u.jsxs("div",{className:"col-span-2",children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Pricing Unit"}),u.jsx("select",{value:l.pricingUnit,onChange:D=>c({...l,pricingUnit:D.target.value}),className:"w-full p-2 bg-surface border border-border rounded text-text-primary",children:gh.map(D=>u.jsx("option",{value:D,children:D},D))})]}),C.showPackaging&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"col-span-2 border-t border-border my-1"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Carton Size"}),u.jsx("input",{type:"number",step:"0.01",value:l.cartonSize,onChange:D=>c({...l,cartonSize:D.target.value}),className:"w-full p-2 bg-surface border border-border rounded text-text-primary"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Packaging UOM"}),u.jsx("select",{value:l.uom,onChange:D=>c({...l,uom:D.target.value}),className:"w-full p-2 bg-surface border border-border rounded text-text-primary",children:gh.map(D=>u.jsx("option",{value:D,children:D},D))})]})]}),u.jsx("div",{className:"col-span-2",children:u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:l.hasSample,onChange:D=>c({...l,hasSample:D.target.checked}),className:"rounded border-border bg-surface text-primary focus:ring-primary"}),u.jsx("span",{className:"text-sm text-text-primary",children:"We carry samples for these"})]})})]})]}),u.jsxs("div",{className:"bg-background p-4 rounded-lg border border-border",children:[u.jsx("h3",{className:"font-semibold text-text-primary mb-4 text-sm uppercase tracking-wider",children:"2. Define Lists"}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:C.color}),u.jsx("p",{className:"text-xs text-text-secondary mb-2",children:"Type a name and press Enter"}),u.jsx(PS,{isMulti:!0,placeholder:`e.g. ${C.color.includes("Style")?"Berber, Plush...":"Oak, Maple..."}`,styles:O,onChange:D=>f(D),value:d})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:C.size}),u.jsx("p",{className:"text-xs text-text-secondary mb-2",children:"Select existing or type new"}),u.jsx(PS,{isMulti:!0,placeholder:`e.g. ${C.size.includes("Width")?"12', 15'...":"12x24, Mosaic..."}`,options:b,styles:O,onChange:D=>m(D),value:p})]})]})]}),u.jsxs("div",{className:"lg:col-span-2 flex flex-col h-full",children:[u.jsxs("h3",{className:"font-semibold text-text-primary mb-4 text-sm uppercase tracking-wider flex justify-between items-center",children:[u.jsxs("span",{children:["3. Preview (",x.length," items)"]}),x.length>0&&u.jsx("span",{className:"text-xs text-primary font-normal",children:"Ready to generate"})]}),u.jsx("div",{className:"flex-1 bg-background border border-border rounded-lg overflow-hidden flex flex-col",children:x.length===0?u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-text-secondary p-8 text-center opacity-50",children:[u.jsx(am,{size:48,className:"mb-4"}),u.jsx("p",{className:"text-lg",children:"Enter Data & Lists to see preview"})]}):u.jsx("div",{className:"overflow-auto flex-1",children:u.jsxs("table",{className:"w-full text-left border-collapse",children:[u.jsx("thead",{className:"bg-surface sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-3 text-xs font-medium text-text-secondary border-b border-border",children:C.color}),u.jsx("th",{className:"p-3 text-xs font-medium text-text-secondary border-b border-border",children:"SKU"}),u.jsx("th",{className:"p-3 text-xs font-medium text-text-secondary border-b border-border",children:C.size}),u.jsx("th",{className:"p-3 text-xs font-medium text-text-secondary border-b border-border text-right",children:"Cost"}),u.jsx("th",{className:"p-3 text-xs font-medium text-text-secondary border-b border-border text-right",children:"Retail"}),C.showPackaging&&u.jsx("th",{className:"p-3 text-xs font-medium text-text-secondary border-b border-border",children:"Carton"})]})}),u.jsx("tbody",{children:x.map((D,L)=>u.jsxs("tr",{className:"border-b border-border hover:bg-surface/50",children:[u.jsx("td",{className:"p-3 text-sm text-text-primary font-medium",children:D.name||u.jsx("span",{className:"italic text-text-secondary",children:"--"})}),u.jsx("td",{className:"p-3 text-sm text-text-secondary",children:D.sku||u.jsx("span",{className:"italic text-text-secondary",children:"--"})}),u.jsx("td",{className:"p-3 text-sm text-text-primary",children:D.size||u.jsx("span",{className:"italic text-text-secondary",children:"--"})}),u.jsxs("td",{className:"p-3 text-sm text-text-primary text-right",children:["$",D.unitCost.toFixed(2)," / ",D.pricingUnit]}),u.jsxs("td",{className:"p-3 text-sm text-text-primary text-right",children:["$",D.retailPrice.toFixed(2)," / ",D.pricingUnit]}),C.showPackaging&&u.jsxs("td",{className:"p-3 text-sm text-text-primary",children:[D.cartonSize," ",D.uom]})]},L))})]})})})]})]}),u.jsxs("div",{className:"p-6 border-t border-border flex justify-end gap-3 bg-surface",children:[u.jsx("button",{onClick:i,className:"px-4 py-2 text-text-primary hover:bg-background rounded-md transition-colors",children:"Cancel"}),u.jsxs("button",{onClick:P,disabled:x.length===0,className:"px-6 py-2 bg-primary text-on-primary font-medium rounded-md hover:bg-primary-hover disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[u.jsx(ac,{size:18}),"Generate ",x.length," Variants"]})]})]})})},KWe=({onClose:e,onSave:t,currentPreview:r})=>{const[n,i]=I.useState(null),[a,s]=I.useState(""),[o,l]=I.useState(r||null),c=I.useRef(null),d=m=>{var y;const x=(y=m.target.files)==null?void 0:y[0];x&&(i(x),l(URL.createObjectURL(x)),s(""))},f=m=>{s(m),l(m),i(null)},p=()=>{if(!n&&!a){Re.error("Please select a file or enter a URL");return}t(n,a),e()};return u.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 p-4",children:u.jsxs("div",{className:"bg-surface w-full max-w-md rounded-lg shadow-xl overflow-hidden border border-border animate-in fade-in zoom-in-95 duration-200",children:[u.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border bg-background",children:[u.jsx("h3",{className:"font-bold text-text-primary",children:"Update Variant Image"}),u.jsx("button",{onClick:e,className:"text-text-secondary hover:text-text-primary",children:u.jsx(tn,{size:20})})]}),u.jsxs("div",{className:"p-6",children:[u.jsx("div",{className:"mb-6 flex justify-center",children:u.jsx("div",{className:"w-32 h-32 bg-background border border-border rounded-lg overflow-hidden flex items-center justify-center shadow-inner",children:o?u.jsx("img",{src:o,alt:"Preview",className:"w-full h-full object-cover"}):u.jsx(of,{className:"text-border",size:48})})}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("input",{type:"file",ref:c,accept:"image/*",onChange:d,className:"hidden"}),u.jsxs("button",{onClick:()=>{var m;return(m=c.current)==null?void 0:m.click()},className:"w-full py-4 border border-dashed border-border hover:border-primary rounded-lg flex items-center justify-center gap-3 text-text-secondary hover:text-primary hover:bg-surface transition-colors",children:[u.jsx(Eb,{size:20}),u.jsxs("div",{className:"text-left",children:[u.jsx("p",{className:"text-sm font-medium",children:n?"Change Selected File":"Click to Upload File"}),n&&u.jsx("p",{className:"text-xs text-primary",children:n.name})]})]}),u.jsxs("div",{className:"relative flex items-center py-2",children:[u.jsx("div",{className:"flex-grow border-t border-border"}),u.jsx("span",{className:"flex-shrink-0 mx-4 text-xs text-text-tertiary uppercase",children:"OR Paste URL"}),u.jsx("div",{className:"flex-grow border-t border-border"})]}),u.jsx("input",{type:"text",placeholder:"https://example.com/image.jpg",value:a,onChange:m=>f(m.target.value),className:"w-full p-2 bg-background border border-border rounded focus:border-primary focus:outline-none text-text-primary text-sm"})]})]}),u.jsxs("div",{className:"p-4 border-t border-border bg-background flex justify-end gap-3",children:[u.jsx("button",{onClick:e,className:"px-4 py-2 text-text-secondary hover:text-text-primary text-sm",children:"Cancel"}),u.jsxs("button",{onClick:p,disabled:!n&&!a,className:"px-6 py-2 bg-primary text-on-primary rounded text-sm font-medium hover:bg-primary-hover disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[u.jsx(pd,{size:16})," Apply Image"]})]})]})})},J9=({isOpen:e,onClose:t,product:r})=>{const{products:n,vendors:i,updateProduct:a,deleteProduct:s,addVariant:o,updateVariant:l}=Xr(),{batchUpdateVariants:c,duplicateProduct:d}=K7(),f=n.find(Te=>Te.id===r.id)||r,[p,m]=I.useState(!1),[x,y]=I.useState(!1),[b,S]=I.useState(!1),[_,C]=I.useState(null),[A,j]=I.useState({}),[P,O]=I.useState(!1),[D,L]=I.useState(new Set),[B,H]=I.useState(new Set(["unitCost","retailPrice"])),[z,ie]=I.useState(!1),[X,W]=I.useState([]),[Q,te]=I.useState(!1),[J,Y]=I.useState({file:null,url:null,preview:null}),[pe,_e]=I.useState(null),ee=I.useRef(null),[de,G]=I.useState(null),[q,ne]=I.useState(null),Se=$a(),{mutate:re}=Ir({mutationFn:aoe,onSuccess:()=>{Re.success("Variant deleted."),Se.invalidateQueries({queryKey:["products"]}),Se.invalidateQueries({queryKey:["discontinuedProducts"]})},onError:Te=>{Re.error(Te.message||"Failed to delete variant.")}}),ae=Zle.useReactToPrint({contentRef:ee,documentTitle:`Label_${f.name}`,onAfterPrint:()=>G(null)});I.useEffect(()=>{e&&Qx().then(_e).catch(console.error)},[e]),I.useEffect(()=>{if(de&&ee.current){const Te=setTimeout(()=>{ae()},500);return()=>clearTimeout(Te)}},[de,ae]);const Ee=(()=>{const Te=f.productType;return Te==="Carpet"||Te==="Sheet Product"?{color:"Color / Style",size:"Width",showPackaging:!1,showTechSpecs:!1}:Te==="LVP"||Te==="LVT"||Te==="Laminate"||Te==="Hardwood"?{color:"Color",size:"Plank Size",showPackaging:!0,showTechSpecs:!0}:{color:"Color",size:"Size",showPackaging:!0,showTechSpecs:!1}})();if(!e)return null;const V=Te=>Ma(Te),Ae=async Te=>{y(!0);try{await a(f.id,Te),m(!1)}catch(He){console.error(He)}finally{y(!1)}},Pe=async()=>{if(confirm(`Delete "${f.name}" and ALL its variants?`))try{await s(f.id),t()}catch(Te){console.error(Te)}},ze=async()=>{const Te=!f.isDiscontinued,He=Te?"Discontinue":"Restore";if(confirm(`Are you sure you want to ${He} this product line?`))try{const je=new FormData;je.append("isDiscontinued",String(Te)),await a(f.id,je),Re.success(`Product ${Te?"discontinued":"restored"}.`),Te&&t()}catch(je){console.error(je),Re.error(`Failed to ${He.toLowerCase()} product.`)}},De=async()=>{if(confirm(`Create a copy of "${f.name}"?`))try{await d.mutateAsync(f.id),Re.success("Product line duplicated."),t()}catch(Te){console.error(Te),Re.error("Failed to duplicate product.")}},$e=Te=>{L(He=>{const je=new Set(He);return je.has(Te)?je.delete(Te):je.add(Te),je})},et=()=>{const Te=f.variants.filter(je=>je.id!==_).map(je=>je.id),He=Te.every(je=>D.has(je));L(He?new Set:new Set(Te))},ut=Te=>{H(He=>{const je=new Set(He);return je.has(Te)?je.delete(Te):je.add(Te),je})},kt=(Te,He)=>{let je=[];if(Te==="product")je=[f];else if(Te==="variant"&&He){const we=f.variants.find(ot=>ot.id===He);we&&(je=[{...f,variants:[we]}])}else Te==="batch"&&(je=[{...f,variants:f.variants.filter(we=>D.has(we.id))}]);je.length>0&&(W(je),ie(!0))},ht=async Te=>{if(Te)try{const He=new FormData;He.append("defaultImageUrl",Te),await a(f.id,He),Re.success("Main product image updated!")}catch(He){console.error(He),Re.error("Failed to update main image.")}},jr=()=>{const Te="NEW_"+Date.now();C(Te),O(!1),L(new Set),j({name:"",size:"",sku:"",unitCost:0,retailPrice:0,wearLayer:"",thickness:"",hasSample:!1,cartonSize:0,uom:"SF",pricingUnit:"SF"}),Y({file:null,url:null,preview:null})},er=Te=>{j({name:Te.name,size:Te.size,sku:Te.sku,unitCost:Te.unitCost,retailPrice:Te.retailPrice,wearLayer:Te.wearLayer,thickness:Te.thickness,hasSample:Te.hasSample,cartonSize:Te.cartonSize,uom:Te.uom,pricingUnit:Te.pricingUnit}),C(Te.id);const He=V(Te.imageUrl);Y({file:null,url:null,preview:He||null}),O(!1),L(new Set)},ct=()=>{C(null),j({}),Y({file:null,url:null,preview:null}),L(new Set)},qt=Te=>{confirm("Delete this variant?")&&re(Te)},Lt=Te=>{const He=parseFloat(Te);let je=A.retailPrice||0;if(!isNaN(He)&&pe){const we=i.find(xt=>xt.id===f.manufacturerId),ot=kh(we,pe,"Customer");je=Number(Ch(He,ot.percentage,ot.method).toFixed(2))}else Te===""&&(je=A.retailPrice);j(we=>({...we,unitCost:He,retailPrice:je}))},dr=(Te,He)=>{let je=null;Te?je=URL.createObjectURL(Te):He&&(je=He),Y({file:Te,url:He,preview:je})},Gt=async()=>{if(!A.name)return Re.error("Name is required.");const Te=new FormData;Te.append("name",A.name),A.size&&Te.append("size",A.size),A.sku&&Te.append("sku",A.sku),A.wearLayer&&Te.append("wearLayer",A.wearLayer),A.thickness&&Te.append("thickness",A.thickness),A.unitCost!==void 0&&Te.append("unitCost",String(A.unitCost)),A.retailPrice!==void 0&&Te.append("retailPrice",String(A.retailPrice)),A.hasSample!==void 0&&Te.append("hasSample",String(A.hasSample)),A.cartonSize!==void 0&&Te.append("cartonSize",String(A.cartonSize)),A.uom&&Te.append("uom",A.uom),A.pricingUnit&&Te.append("pricingUnit",A.pricingUnit),J.file?Te.append("image",J.file):J.url&&Te.append("imageUrl",J.url);try{if(_&&!_.startsWith("NEW_"))if(await l(_,Te),P&&D.size>0){const He={},je=we=>we===void 0?null:we;B.has("size")&&(He.size=je(A.size)),B.has("sku")&&(He.sku=je(A.sku)),B.has("wearLayer")&&(He.wearLayer=je(A.wearLayer)),B.has("thickness")&&(He.thickness=je(A.thickness)),B.has("unitCost")&&(He.unitCost=je(A.unitCost)),B.has("retailPrice")&&(He.retailPrice=je(A.retailPrice)),B.has("cartonSize")&&(He.cartonSize=je(A.cartonSize)),B.has("uom")&&(He.uom=je(A.uom)),B.has("pricingUnit")&&(He.pricingUnit=je(A.pricingUnit)),Object.keys(He).length>0&&(await c.mutateAsync({ids:Array.from(D),updates:He}),Re.success(`Updated source + ${D.size} other variants!`))}else Re.success("Variant updated.");else await o(f.id,Te),Re.success("Variant created.");ct(),L(new Set)}catch(He){console.error(He),Re.error(He.message||"Failed to save.")}},qe=Te=>{Re.success(`${Te.length} variants created!`),S(!1)},Xe=(Te,He,je)=>{if(!_||!P)return u.jsx("th",{className:`p-3 ${je||""}`,children:Te});const we=B.has(He);return u.jsx("th",{className:`p-3 ${je||""}`,children:u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("span",{children:Te}),u.jsxs("label",{className:"flex items-center gap-1 text-[10px] font-normal cursor-pointer bg-black/5 px-1 rounded hover:bg-black/10 w-fit",children:[u.jsx("input",{type:"checkbox",className:"w-3 h-3 accent-primary",checked:we,onChange:()=>ut(He)})," Copy"]})]})})};return u.jsxs("div",{className:"fixed inset-0 z-[60] bg-background flex flex-col lg:static lg:z-0 lg:bg-surface-container-high lg:rounded-2xl lg:border lg:border-outline/20 lg:h-[calc(100vh-140px)]",children:[u.jsx("div",{style:{position:"absolute",top:-1e4,left:-1e4},children:u.jsx("div",{ref:ee,className:"p-4 w-[3.5in] h-[2in]",children:de&&u.jsx(Qle,{data:de.data,qrUrl:de.qrUrl})})}),u.jsxs("div",{className:"w-full h-full flex flex-col overflow-hidden",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex items-center",children:[u.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-surface-container-highest text-text-secondary hover:text-text-primary mr-2",children:u.jsx(hd,{size:24})}),u.jsxs("h2",{className:"text-xl font-bold text-text-primary flex items-center gap-2 flex-grow",children:[p?"Edit Product Line":f.name,!p&&f.isDiscontinued&&u.jsx("span",{className:"text-xs font-bold bg-error-container text-on-error-container px-2 py-0.5 rounded-full",children:"DISCONTINUED"})]}),u.jsx("div",{className:"flex items-center gap-2",children:p?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:ze,className:`p-2 rounded border transition-colors ${f.isDiscontinued?"bg-tertiary-container text-on-tertiary-container border-tertiary-container/50":"bg-surface-container-highest hover:bg-error-container/50 text-text-secondary hover:text-error border-outline/20"}`,title:f.isDiscontinued?"Restore to Active Library":"Archive / Discontinue",children:f.isDiscontinued?u.jsx(e1,{size:20}):u.jsx(CS,{size:20})}),u.jsx("button",{onClick:De,className:"p-2 hover:bg-surface-container-highest rounded-full text-text-secondary hover:text-primary",title:"Duplicate Product Line",children:u.jsx(cFe,{size:20})}),u.jsx("button",{onClick:Pe,className:"p-2 hover:bg-surface-container-highest rounded-full text-text-secondary hover:text-error",title:"Permanently Delete",children:u.jsx(wo,{size:24})})]}):u.jsx("button",{onClick:()=>m(!0),className:"p-2 hover:bg-surface-container-highest rounded-full text-text-secondary hover:text-primary",children:u.jsx(fx,{size:24})})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:p?u.jsx(mue,{initialData:f,onSave:Ae,onCancel:()=>m(!1),isSaving:x}):u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[u.jsx("div",{className:"w-48 h-48 bg-surface-container rounded-lg flex-shrink-0 overflow-hidden border border-outline/20",children:f.defaultImageUrl?u.jsx("div",{className:"w-full h-full cursor-zoom-in group relative",onClick:()=>ne({url:V(f.defaultImageUrl),alt:f.name}),children:u.jsx("img",{src:V(f.defaultImageUrl),className:"w-full h-full object-cover transition-transform group-hover:scale-105"})}):u.jsx("div",{className:"w-full h-full flex items-center justify-center text-text-tertiary",children:u.jsx(of,{size:48,className:"opacity-50"})})}),u.jsxs("div",{className:"flex-1 space-y-2",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("span",{className:"block text-text-secondary text-xs uppercase tracking-wide",children:"Manufacturer"}),u.jsx("span",{className:"font-medium text-text-primary",children:f.manufacturerName})]}),u.jsx("div",{className:"flex gap-2",children:u.jsx("button",{onClick:()=>kt("product"),className:"p-2 bg-surface-container-highest hover:bg-surface-variant/30 border border-outline/20 rounded-full text-text-secondary",title:"Print Line Label",children:u.jsx(mT,{size:16})})})]}),u.jsx("p",{className:"text-text-primary mt-1 text-sm",children:f.description||"No description provided."})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-end mb-4",children:[u.jsx("h3",{className:"text-lg font-bold text-text-primary",children:"Product Variants"}),!_&&u.jsxs("div",{className:"flex gap-2",children:[D.size>0&&u.jsxs("button",{onClick:()=>kt("batch"),className:"text-sm flex items-center gap-2 bg-primary text-on-primary px-3 py-1.5 rounded-full font-bold animate-in fade-in",children:[u.jsx(wy,{size:16})," Print Labels (",D.size,")"]}),u.jsx("div",{className:"w-px h-6 bg-outline/20 mx-2"}),u.jsxs("button",{onClick:()=>S(!0),className:"text-sm flex items-center gap-2 bg-surface-container-highest border border-primary-container text-primary px-3 py-1.5 rounded-full",children:[u.jsx(H4,{size:16})," Batch Generator"]}),u.jsxs("button",{onClick:jr,className:"text-sm flex items-center gap-2 bg-secondary-container text-on-secondary-container px-3 py-1.5 rounded-full",children:[u.jsx(ac,{size:16})," Add Variant"]})]})]}),u.jsx("div",{className:"bg-surface-container rounded-lg border border-outline/10 overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm text-left whitespace-nowrap",children:[u.jsx("thead",{className:"bg-surface-container-highest text-text-secondary border-b border-outline/10",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-3 w-12 text-center",children:"Img"}),u.jsx("th",{className:"p-3",children:Ee.color}),Xe(Ee.size,"size"),Ee.showTechSpecs&&Xe("Wear Layer","wearLayer"),Ee.showTechSpecs&&Xe("Thickness","thickness"),Xe("SKU","sku"),Ee.showPackaging&&Xe("Carton Qty","cartonSize"),Ee.showPackaging&&Xe("Unit","uom"),Xe("Cost","unitCost","text-right"),Xe("Pricing Unit","pricingUnit","text-center w-24"),Xe("Retail","retailPrice","text-right"),u.jsx("th",{className:"p-3 text-center",children:"Sample?"}),u.jsx("th",{className:"p-3 text-center",children:"Status"}),u.jsx("th",{className:"p-3 w-24 text-center",children:P?u.jsxs("div",{className:"flex justify-center items-center gap-1",children:[u.jsx("button",{onClick:et,className:"p-1 rounded-md text-primary hover:bg-primary-container/30",title:"Select All",children:u.jsx(n9,{size:18})}),u.jsx("button",{onClick:()=>{O(!1),L(new Set)},className:"p-1 rounded-md text-text-secondary hover:text-error hover:bg-error-container/30",title:"Cancel Selection",children:u.jsx(tn,{size:18})})]}):u.jsx("button",{onClick:()=>O(!0),className:"p-1 rounded-md text-text-secondary hover:text-primary transition-colors",title:"Select Multiple",children:u.jsx(SFe,{size:18})})}),u.jsx("th",{className:"p-3 w-20 text-center",children:"Actions"})]})}),u.jsxs("tbody",{className:"divide-y divide-outline/10",children:[f.variants.map(Te=>_===Te.id?u.jsxs("tr",{className:"bg-primary/5 border-l-4 border-primary",children:[u.jsx("td",{className:"p-2 text-center",children:u.jsx("button",{type:"button",onClick:()=>te(!0),className:"w-8 h-8 rounded border bg-white flex items-center justify-center",children:u.jsx(of,{size:14})})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",placeholder:Ee.color,className:"w-full p-1 border border-primary rounded-md font-bold bg-surface-container",value:A.name||"",onChange:He=>j({...A,name:He.target.value})})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",placeholder:Ee.size,className:"w-full p-1 border border-primary rounded-md bg-surface-container",value:A.size||"",onChange:He=>j({...A,size:He.target.value})})}),Ee.showTechSpecs&&u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",className:"w-full p-1 border border-primary rounded-md bg-surface-container",value:A.wearLayer||"",onChange:He=>j({...A,wearLayer:He.target.value}),placeholder:"20mil"})}),Ee.showTechSpecs&&u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",className:"w-full p-1 border border-primary rounded-md bg-surface-container",value:A.thickness||"",onChange:He=>j({...A,thickness:He.target.value}),placeholder:"5mm"})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",className:"w-full p-1 border border-primary rounded-md bg-surface-container",value:A.sku||"",onChange:He=>j({...A,sku:He.target.value})})}),Ee.showPackaging&&u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"number",className:"w-20 p-1 border border-primary rounded-md bg-surface-container",value:A.cartonSize||"",onChange:He=>j({...A,cartonSize:parseFloat(He.target.value)}),placeholder:"Qty"})}),Ee.showPackaging&&u.jsx("td",{className:"p-2",children:u.jsx("select",{className:"p-1 border border-primary rounded-md text-xs bg-surface-container w-full",value:A.uom||"SF",onChange:He=>j({...A,uom:He.target.value}),children:gh.map(He=>u.jsx("option",{value:He,children:He},He))})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"number",className:"w-full p-1 border border-primary rounded-md text-right bg-surface-container",value:A.unitCost||"",onChange:He=>Lt(He.target.value)})}),u.jsx("td",{className:"p-2",children:u.jsx("select",{className:"w-full p-1 border border-primary rounded-md text-xs bg-surface-container",value:A.pricingUnit||"SF",onChange:He=>j({...A,pricingUnit:He.target.value}),children:gh.map(He=>u.jsx("option",{value:He,children:He},He))})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"number",className:"w-full p-1 border border-primary rounded-md text-right bg-surface-container",value:A.retailPrice||"",onChange:He=>j({...A,retailPrice:Number(He.target.value)})})}),u.jsx("td",{className:"p-2 text-center",children:u.jsx("input",{type:"checkbox",className:"form-checkbox h-4 w-4 text-primary bg-surface-container-low border-outline/50 rounded",checked:A.hasSample??Te.hasSample,onChange:He=>j({...A,hasSample:He.target.checked})})}),u.jsx("td",{className:"p-2 text-center text-xs font-bold text-primary",children:"EDITING"}),u.jsx("td",{className:"p-2 text-center",children:u.jsx("button",{type:"button",onClick:()=>{O(!P)},className:`p-1.5 rounded-md ${P?"bg-secondary-container text-on-secondary-container":"text-text-tertiary"}`,title:"Copy to selected",children:u.jsx(e9,{size:16})})}),u.jsxs("td",{className:"p-2 flex justify-center items-center gap-2",children:[u.jsx("button",{type:"button",onClick:Gt,className:"p-1.5 rounded-md bg-tertiary text-on-tertiary",children:u.jsx(Cs,{size:16})}),u.jsx("button",{type:"button",onClick:ct,className:"p-1.5 rounded-md text-error",children:u.jsx(tn,{size:16})})]})]},Te.id):u.jsxs("tr",{className:`hover:bg-surface-container-highest transition-colors ${D.has(Te.id)?"bg-primary-container/30":""}`,children:[u.jsx("td",{className:"p-2 text-center",children:u.jsx("div",{className:`w-10 h-10 bg-surface-variant rounded overflow-hidden mx-auto border border-outline/10 ${Te.imageUrl?"cursor-zoom-in hover:ring-2 hover:ring-primary/50":""}`,onClick:He=>{Te.imageUrl&&(He.stopPropagation(),ne({url:V(Te.imageUrl),alt:Te.name}))},children:Te.imageUrl?u.jsx("img",{src:V(Te.imageUrl),className:"w-full h-full object-cover"}):null})}),u.jsx("td",{className:"p-3 font-medium text-text-primary",children:Te.name}),u.jsx("td",{className:"p-3 text-text-secondary",children:Te.size||"-"}),Ee.showTechSpecs&&u.jsx("td",{className:"p-3 text-text-secondary",children:Te.wearLayer||"-"}),Ee.showTechSpecs&&u.jsx("td",{className:"p-3 text-text-secondary",children:Te.thickness||"-"}),u.jsx("td",{className:"p-3 text-text-secondary",children:Te.sku||"-"}),Ee.showPackaging&&u.jsx("td",{className:"p-3 text-text-secondary text-xs font-mono",children:Te.cartonSize||"-"}),Ee.showPackaging&&u.jsx("td",{className:"p-3 text-text-secondary text-xs font-mono",children:Te.uom||"-"}),u.jsx("td",{className:"p-3 text-right text-text-secondary",children:Te.unitCost?`$${Number(Te.unitCost).toFixed(2)}`:"-"}),u.jsxs("td",{className:"p-3 text-center text-text-secondary text-xs font-mono bg-black/5 rounded mx-1",children:["/",Te.pricingUnit||Te.uom||"Unit"]}),u.jsx("td",{className:"p-3 text-right text-text-secondary font-medium",children:Te.retailPrice?`$${Number(Te.retailPrice).toFixed(2)}`:"-"}),u.jsx("td",{className:"p-3 text-center",children:u.jsx("div",{className:`w-3 h-3 rounded-full mx-auto ${Te.hasSample?"bg-green-500":"bg-gray-300"}`})}),u.jsx("td",{className:"p-3 text-center text-xs text-text-tertiary",children:Te.hasSample?"Available":"Order Only"}),u.jsx("td",{className:"p-3 text-center",children:P?u.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-primary cursor-pointer",checked:D.has(Te.id),onChange:()=>$e(Te.id)}):u.jsx("button",{type:"button",onClick:()=>kt("variant",Te.id),className:"text-text-secondary hover:text-primary",children:u.jsx(mT,{size:18})})}),u.jsxs("td",{className:"p-3 flex justify-center gap-2 opacity-50 hover:opacity-100 transition-opacity",children:[Te.imageUrl&&u.jsx("button",{type:"button",onClick:()=>ht(Te.imageUrl),className:"text-text-secondary hover:text-yellow-500",title:"Set as Main Image",children:u.jsx(Uoe,{size:16})}),u.jsx("button",{type:"button",onClick:()=>er(Te),className:"text-text-secondary hover:text-primary",children:u.jsx(fx,{size:16})}),u.jsx("button",{type:"button",onClick:()=>qt(Te.id),className:"text-text-secondary hover:text-red-500",children:u.jsx(wo,{size:16})})]})]},Te.id)),(_==null?void 0:_.startsWith("NEW_"))&&u.jsxs("tr",{className:"bg-primary/5 animate-in fade-in",children:[u.jsx("td",{className:"p-2",children:u.jsx("button",{type:"button",onClick:()=>te(!0),className:"w-10 h-10 border rounded-md flex items-center justify-center bg-white",children:u.jsx(of,{size:14})})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{autoFocus:!0,type:"text",className:"w-full p-1 border rounded-md bg-surface-container",placeholder:Ee.color,value:A.name||"",onChange:Te=>j({...A,name:Te.target.value})})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",className:"w-full p-1 border rounded-md bg-surface-container",placeholder:Ee.size,value:A.size||"",onChange:Te=>j({...A,size:Te.target.value})})}),Ee.showTechSpecs&&u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",className:"w-full p-1 border rounded-md bg-surface-container",value:A.wearLayer||"",onChange:Te=>j({...A,wearLayer:Te.target.value}),placeholder:"Wear Layer"})}),Ee.showTechSpecs&&u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",className:"w-full p-1 border rounded-md bg-surface-container",value:A.thickness||"",onChange:Te=>j({...A,thickness:Te.target.value}),placeholder:"Thickness"})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"text",className:"w-full p-1 border rounded-md bg-surface-container",value:A.sku||"",onChange:Te=>j({...A,sku:Te.target.value})})}),Ee.showPackaging&&u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"number",className:"w-20 p-1 border rounded-md bg-surface-container",value:A.cartonSize||"",onChange:Te=>j({...A,cartonSize:parseFloat(Te.target.value)}),placeholder:"Qty"})}),Ee.showPackaging&&u.jsx("td",{className:"p-2",children:u.jsx("select",{className:"w-full p-1 border rounded-md text-xs bg-surface-container",value:A.uom||"SF",onChange:Te=>j({...A,uom:Te.target.value}),children:gh.map(Te=>u.jsx("option",{value:Te,children:Te},Te))})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"number",className:"w-full p-1 border rounded-md text-right bg-surface-container",value:A.unitCost||"",onChange:Te=>Lt(Te.target.value)})}),u.jsx("td",{className:"p-2",children:u.jsx("select",{className:"w-full p-1 border border-primary rounded-md text-xs bg-surface-container",value:A.pricingUnit||"SF",onChange:Te=>j({...A,pricingUnit:Te.target.value}),children:gh.map(Te=>u.jsx("option",{value:Te,children:Te},Te))})}),u.jsx("td",{className:"p-2",children:u.jsx("input",{type:"number",className:"w-full p-1 border border-primary rounded-md text-right bg-surface-container",value:A.retailPrice||"",onChange:Te=>j({...A,retailPrice:Number(Te.target.value)})})}),u.jsx("td",{className:"p-2 text-center",children:u.jsx("input",{type:"checkbox",className:"form-checkbox h-4 w-4 text-primary bg-surface-container-low border-outline/50 rounded",checked:A.hasSample??!0,onChange:Te=>j({...A,hasSample:Te.target.checked})})}),u.jsx("td",{className:"p-2 text-center text-xs font-bold text-green-600",children:"NEW"}),u.jsxs("td",{colSpan:2,className:"p-2 flex justify-center gap-1",children:[u.jsx("button",{type:"button",onClick:Gt,className:"p-1 text-tertiary",children:u.jsx(Cs,{size:18})}),u.jsx("button",{type:"button",onClick:ct,className:"p-1 text-error",children:u.jsx(tn,{size:18})})]})]})]})]})})]})]})}),q&&u.jsx(oue,{imageUrl:q.url,altText:q.alt,onClose:()=>ne(null)}),b&&u.jsx(GWe,{productId:f.id,productType:f.productType,manufacturerId:f.manufacturerId,pricingSettings:pe,onClose:()=>S(!1),onSuccess:qe}),Q&&u.jsx(KWe,{currentPreview:J.preview,onClose:()=>te(!1),onSave:dr}),u.jsx(ece,{isOpen:z,onClose:()=>ie(!1),selectedProducts:X})]})]})},gue=({product:e,pricingSettings:t,onClick:r,showDiscontinuedStyle:n,isSelected:i,isSelectionMode:a})=>{const{vendors:s}=Xr(),l=(()=>{if(!e.variants||e.variants.length===0||!t)return null;const c=e.supplierId||e.manufacturerId,d=s.find(C=>C.id===c),f=kh(d,t,"Customer"),p=e.variants.filter(C=>C.unitCost),m=p.map(C=>Ch(Number(C.unitCost),f.percentage,f.method));if(m.length===0)return null;const x=Math.min(...m),y=Math.max(...m),b=x===y?`$${x.toFixed(2)}`:`$${x.toFixed(2)} - $${y.toFixed(2)}`,S=p.find(C=>C.pricingUnit)||p[0],_=(S==null?void 0:S.pricingUnit)||(S==null?void 0:S.uom)||"Unit";return{priceStr:b,unitLabel:_}})();return u.jsxs("div",{className:`bg-surface-container-high rounded-xl shadow-sm border overflow-hidden group flex flex-col cursor-pointer hover:shadow-md hover:-translate-y-1 transition-all h-full relative
                ${i?"border-primary ring-2 ring-primary/80":"border-outline/10"}
            `,onClick:()=>r(e),children:[(a||i)&&u.jsx("div",{className:"absolute top-2.5 left-2.5 z-10 text-primary",children:i?u.jsx(Hh,{size:24,className:"fill-surface-container-high"}):u.jsx(oFe,{size:24,className:"text-white/80 drop-shadow-md"})}),u.jsxs("div",{className:"w-full h-48 bg-surface-container flex items-center justify-center relative",children:[e.defaultThumbnailUrl||e.defaultImageUrl?u.jsx("img",{src:Ma(e.defaultThumbnailUrl||e.defaultImageUrl),alt:e.name,className:"w-full h-full object-cover",loading:"lazy"}):u.jsxs("div",{className:"text-center p-4",children:[u.jsx("span",{className:"text-4xl opacity-20 font-bold text-text-tertiary block mb-2",children:e.name.substring(0,2).toUpperCase()}),u.jsx("span",{className:"text-xs text-text-secondary",children:"No Image"})]}),u.jsxs("div",{className:"absolute top-2 right-2 bg-scrim/60 text-white text-xs px-2 py-1 rounded-full backdrop-blur-sm",children:[e.variants.length," Variants"]})]}),u.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[u.jsx("h3",{className:"font-bold text-lg text-text-primary truncate",title:e.name,children:e.name}),u.jsx("p",{className:"text-sm text-text-secondary truncate",children:e.manufacturerName||"Unknown Vendor"}),u.jsx("div",{className:"mt-2",children:l?u.jsxs("p",{className:"text-sm font-semibold text-tertiary",children:[l.priceStr," ",u.jsxs("span",{className:"text-text-secondary font-normal text-xs",children:["/ ",l.unitLabel]})]}):u.jsx("p",{className:"text-xs text-text-tertiary italic",children:"No pricing set"})}),u.jsx("div",{className:"flex-grow"}),n&&u.jsx("div",{className:"mb-2 text-center bg-error-container text-on-error-container text-xs font-bold py-1 rounded-full uppercase tracking-wider",children:"Discontinued"}),u.jsxs("div",{className:"flex justify-between items-center mt-4 pt-3 border-t border-outline/10",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs font-semibold bg-surface-container-highest text-text-secondary px-2 py-1 rounded-full",children:e.productType}),e.productLineUrl&&u.jsx("a",{href:e.productLineUrl,target:"_blank",rel:"noreferrer",className:"text-text-tertiary hover:text-primary p-1 rounded-full hover:bg-surface-container-highest transition-colors",title:"Open Product Website",onClick:c=>c.stopPropagation(),children:u.jsx(uFe,{size:14})})]}),u.jsx(md,{size:18,className:"text-text-secondary"})]})]})]})},XWe=()=>{const{data:e=[],isLoading:t}=wb(),{data:r=[]}=lC(),n=K7(),[i,a]=Eie(),s=i.get("search")||"",[o,l]=I.useState(s),[c,d]=I.useState(!1),[f,p]=I.useState(null);I.useEffect(()=>{const J=i.get("search")||"";J!==o&&l(J)},[i]);const m=J=>{const Y=J.target.value;l(Y);const pe=new URLSearchParams(i);Y?pe.set("search",Y):pe.delete("search"),a(pe,{replace:!0})},[x,y]=I.useState("active");I.useEffect(()=>{(async()=>{try{p(await Qx())}catch{console.error("Failed to load pricing settings for library view.")}})()},[]);const[b,S]=I.useState(!1),[_,C]=I.useState(!1),[A,j]=I.useState(null);I.useEffect(()=>{const J=i.get("open");if(J&&e.length>0){const Y=e.find(pe=>String(pe.id)===J);Y&&(j(Y),C(!0))}},[i,e]);const P=()=>{if(C(!1),i.has("open")){const J=new URLSearchParams(i);J.delete("open"),a(J,{replace:!0})}},O=()=>{d(!1)},D=I.useMemo(()=>r.filter(J=>J.actualReturnDate===null).sort((J,Y)=>new Date(J.expectedReturnDate).getTime()-new Date(Y.expectedReturnDate).getTime()),[r]),L=I.useMemo(()=>{let J=e.filter(pe=>x==="active"?!pe.isDiscontinued:pe.isDiscontinued);const Y=o.toLowerCase();return Y?J.filter(pe=>{var G;const _e=pe.name.toLowerCase().includes(Y),ee=(G=pe.manufacturerName)==null?void 0:G.toLowerCase().includes(Y),de=pe.variants.some(q=>q.name&&q.name.toLowerCase().includes(Y)||q.size&&q.size.toLowerCase().includes(Y)||q.sku&&q.sku.toLowerCase().includes(Y));return _e||ee||de}):J},[e,o,x]),B=I.useRef(null),H=qWe(),[z,ie]=I.useState(600);I.useEffect(()=>{const J=()=>{const Y=window.innerHeight-280;ie(Y<400?400:Y)};return J(),window.addEventListener("resize",J),()=>window.removeEventListener("resize",J)},[]);const X=Math.ceil(L.length/H),W=pue({count:X,getScrollElement:()=>B.current,estimateSize:()=>320,overscan:5}),Q=async J=>{S(!0);try{await n.addProduct.mutateAsync(J),Re.success("Product added successfully!"),O()}catch(Y){console.error(Y),Re.error("Failed to add product.")}finally{S(!1)}},te=J=>{j(J),C(!0)};return t?u.jsx("div",{className:"flex items-center justify-center h-64 text-text-secondary",children:"Loading library..."}):_&&A?u.jsx(J9,{isOpen:_,onClose:P,product:A}):u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 px-1 w-full",children:[u.jsx("h1",{className:"text-4xl font-bold text-text-primary tracking-tight",children:"Sample Library"}),u.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-4 w-full md:w-auto",children:[u.jsxs("div",{className:"bg-surface-container-high p-1 rounded-full flex items-center shadow-inner",children:[u.jsxs("button",{onClick:()=>y("active"),className:`flex-1 flex items-center justify-center gap-2 px-6 py-2 rounded-full text-sm font-medium transition-all ${x==="active"?"bg-surface shadow text-primary":"text-text-secondary hover:text-text-primary hover:bg-surface-container-highest"}`,children:[u.jsx(joe,{size:16})," Active"]}),u.jsxs("button",{onClick:()=>y("discontinued"),className:`flex-1 flex items-center justify-center gap-2 px-6 py-2 rounded-full text-sm font-medium transition-all ${x==="discontinued"?"bg-surface shadow text-error":"text-text-secondary hover:text-text-primary hover:bg-surface-container-highest"}`,children:[u.jsx(CS,{size:16})," Discontinued"]})]}),x==="active"&&u.jsxs("button",{onClick:()=>d(!0),className:"flex items-center justify-center bg-primary hover:bg-primary-hover text-on-primary font-semibold py-3 px-6 rounded-full transition-all shadow-lg hover:shadow-xl",children:[u.jsx(hu,{className:"w-5 h-5 mr-2"}),"Add Product"]})]})]}),u.jsxs("div",{className:"relative w-full max-w-2xl",children:[u.jsx(Yo,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-secondary",size:20}),u.jsx("input",{type:"text",placeholder:"Search by style, color, manufacturer, type, or SKU...",value:o,onChange:m,className:"w-full pl-12 pr-6 py-4 bg-surface-container-high border-none rounded-full text-text-primary focus:ring-2 focus:ring-primary/50 outline-none transition-shadow shadow-sm hover:shadow-md placeholder:text-text-tertiary"})]}),o===""&&x==="active"&&D.length>0&&u.jsxs(u.Fragment,{children:[u.jsx(nce,{title:"Currently Checked Out",checkouts:D,onItemClick:te}),u.jsx("div",{className:"border-t border-outline/10 my-8"}),u.jsx("h2",{className:"text-2xl font-semibold mb-6 text-text-primary pl-1",children:"All Products"})]}),u.jsxs("div",{ref:B,className:"overflow-y-auto w-full relative rounded-xl",style:{height:z},children:[u.jsx("div",{style:{height:`${W.getTotalSize()}px`,width:"100%",position:"relative"},children:W.getVirtualItems().map(J=>{const Y=J.index*H,pe=t?[]:L.slice(Y,Y+H);return u.jsxs("div",{"data-index":J.index,ref:W.measureElement,className:"absolute top-0 left-0 w-full flex gap-6 p-4",style:{transform:`translateY(${J.start}px)`},children:[pe.map(_e=>u.jsx("div",{className:"flex-1 min-w-0",children:u.jsx(gue,{product:_e,pricingSettings:f,onClick:te,showDiscontinuedStyle:x==="discontinued"})},_e.id)),pe.length<H&&Array.from({length:H-pe.length}).map((_e,ee)=>u.jsx("div",{className:"flex-1"},`spacer-${ee}`))]},J.key)})}),L.length===0&&u.jsx("p",{className:"text-text-secondary col-span-full text-center py-10",children:"No products found."})]}),c&&u.jsx("div",{className:"fixed inset-0 bg-black/75 flex justify-center z-50 overflow-y-auto",children:u.jsxs("div",{className:"bg-surface-container-high w-full min-h-full md:min-h-0 md:h-auto md:max-h-[90vh] md:max-w-3xl md:rounded-xl shadow-2xl flex flex-col border border-outline/10 md:my-auto relative",onClick:J=>J.stopPropagation(),children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center bg-surface-container-low md:rounded-t-xl",children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Create New Product Line"}),u.jsx("button",{onClick:O,className:"p-2 hover:bg-surface-container-highest rounded-full text-text-secondary hover:text-text-primary",children:u.jsx(tn,{size:24})})]}),u.jsx("div",{className:"p-6 overflow-y-auto flex-grow",children:u.jsx(mue,{onSave:Q,onCancel:O,isSaving:b})})]})})]})},YWe=(e,t)=>{const r=new Date(e),n=new Date(t),i=r.toLocaleString("default",{month:"short"}),a=r.getDate(),s=n.getDate();return a===s?`${i} ${a}`:`${i} ${a} - ${s}`},QWe=()=>{const{data:e=[],isLoading:t}=Cf(),[r,n]=I.useState(!1),[i,a]=I.useState(null),[s,o]=I.useState(""),l=I.useMemo(()=>{if(!e)return[];const p=s.toLowerCase();return e.filter(m=>{var b,S;const x=(((b=m.installerName)==null?void 0:b.toLowerCase())??"").includes(p),y=(((S=m.contactEmail)==null?void 0:S.toLowerCase())??"").includes(p);return x||y})},[e,s]),c=()=>{a(null),n(!0)},d=(p,m)=>{p.preventDefault(),p.stopPropagation(),a(m),n(!0)},f=()=>{n(!1),a(null)};return t?u.jsx("div",{className:"flex items-center justify-center h-64 text-text-secondary",children:"Loading installers..."}):u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 px-1",children:[u.jsx("h1",{className:"text-4xl font-bold text-text-primary tracking-tight",children:"Installers"}),u.jsxs("button",{onClick:c,className:"flex items-center justify-center bg-primary hover:bg-primary-hover text-on-primary font-semibold py-3 px-6 rounded-full transition-all shadow-lg hover:shadow-xl md:w-auto w-full",children:[u.jsx(hu,{className:"w-5 h-5 mr-2"}),"Add Installer"]})]}),u.jsxs("div",{className:"relative w-full max-w-2xl",children:[u.jsx(Yo,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-secondary",size:20}),u.jsx("input",{type:"text",placeholder:"Search installers by name or email...",value:s,onChange:p=>o(p.target.value),className:"w-full pl-12 pr-6 py-4 bg-surface-container-high border-none rounded-full text-text-primary focus:ring-2 focus:ring-primary/50 outline-none transition-shadow shadow-sm hover:shadow-md placeholder:text-text-tertiary"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[l.map(p=>u.jsxs(ui,{to:`/installers/${p.id}`,className:"relative block bg-surface-container-high p-6 rounded-xl shadow-sm border border-outline/10 hover:shadow-md hover:-translate-y-1 transition-all duration-300 group",children:[u.jsxs("div",{className:"flex items-center mb-4",children:[u.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mr-4 shrink-0 shadow-sm border-2 border-surface",style:{backgroundColor:p.color||"#6b7280"},children:u.jsx(pc,{className:"w-6 h-6 text-white"})}),u.jsx("div",{children:u.jsx("h2",{className:"text-xl font-bold text-text-primary truncate",children:p.installerName})})]}),u.jsxs("div",{className:"space-y-2 text-sm text-text-secondary",children:[u.jsxs("p",{className:"flex items-center",children:[u.jsx(tu,{className:"w-4 h-4 mr-3 shrink-0 opacity-70"})," ",u.jsx("span",{className:"truncate",children:p.contactEmail||"N/A"})]}),u.jsxs("p",{className:"flex items-center",children:[u.jsx(I0,{className:"w-4 h-4 mr-3 shrink-0 opacity-70"})," ",u.jsx("span",{className:"truncate",children:p.contactPhone||"N/A"})]})]}),u.jsx("div",{className:"border-t border-outline/10 my-4"}),u.jsxs("div",{className:"mb-4",children:[u.jsxs("h3",{className:"text-sm font-semibold text-text-secondary flex items-center mb-1",children:[u.jsx(Ed,{className:"w-4 h-4 mr-2"}),"Active Samples"]}),u.jsx("p",{className:"text-xs text-text-primary ml-6",children:p.activeSampleCount&&p.activeSampleCount>0?u.jsxs("span",{className:"font-bold text-primary",children:[p.activeSampleCount," items checked out"]}):"No samples checked out"})]}),p.jobs&&p.jobs.length>0&&u.jsx(u.Fragment,{children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h3",{className:"text-sm font-semibold text-text-secondary flex items-center mb-2",children:[u.jsx(zh,{className:"w-4 h-4 mr-2"}),"Scheduled Jobs"]}),p.jobs.map((m,x)=>u.jsxs("div",{className:"text-xs text-text-secondary grid grid-cols-3 gap-2 items-center",children:[u.jsx("span",{className:"col-span-1 truncate font-medium text-text-primary",children:m.projectName}),u.jsxs("span",{className:"col-span-1 truncate text-center",children:["(",m.customerName||"N/A",")"]}),u.jsx("span",{className:"col-span-1 truncate text-right",children:YWe(m.scheduledStartDate,m.scheduledEndDate)})]},`${m.projectId}-${x}`))]})}),u.jsx("button",{onClick:m=>d(m,p),className:"absolute top-4 right-4 text-text-secondary hover:text-primary p-2 rounded-full hover:bg-surface-container-highest transition-colors opacity-0 group-hover:opacity-100",title:"Edit Installer",children:u.jsx(ip,{className:"w-4 h-4"})})]},p.id)),e.length===0&&u.jsx("p",{className:"text-text-secondary col-span-full text-center py-8",children:"No installers have been added yet."}),e.length>0&&l.length===0&&u.jsx("p",{className:"text-text-secondary col-span-full text-center py-8",children:"No installers match your search."})]}),u.jsx(V9,{isOpen:r,onClose:f,installer:i})]})},JWe=(e,t)=>{if(!e)return"Not Scheduled Yet";const r=new Date(e),n=t?new Date(t):null;return!n||r.toDateString()===n.toDateString()?`Scheduled: ${r.toLocaleDateString()}`:`Scheduled: ${r.toLocaleDateString()} - ${n.toLocaleDateString()}`},ZWe=()=>{const{installerId:e}=jx();wu();const{installers:t,isLoading:r,installerHistory:n,fetchInstallerHistory:i}=Xr(),[a,s]=I.useState([]),[o,l]=I.useState(!0),[c,d]=I.useState([]),[f,p]=I.useState(!1),[m,x]=I.useState(null),[y,b]=I.useState(!1),S=t.find(C=>C.id===parseInt(e||""));I.useEffect(()=>{(async()=>{if(e){l(!0);try{const A=await fetch(`/api/projects?installerId=${e}`);if(!A.ok)throw new Error("Failed to fetch projects");const j=await A.json();s(j)}catch(A){console.error("Failed to fetch installer projects:",A),Re.error("Could not load assigned projects.")}finally{l(!1)}}})(),e&&(i(parseInt(e)),s8e(parseInt(e)).then(d).catch(console.error))},[e,i]);const _=C=>{x(C),p(!0)};return r?u.jsx("div",{className:"text-center py-12 text-text-secondary",children:"Loading installer details..."}):S?u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-surface-container-high p-8 rounded-xl shadow-sm border border-outline/10",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mr-6 shadow-sm border-2 border-surface",style:{backgroundColor:S.color||"#4A5568"},children:u.jsx(pc,{className:"w-8 h-8 text-white"})}),u.jsx("div",{children:u.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:S.installerName})})]}),u.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 py-2 px-6 bg-primary-container hover:bg-primary text-primary hover:text-on-primary rounded-full font-semibold transition-all shadow-sm",children:[u.jsx(ip,{size:16}),"Edit"]})]}),u.jsx("div",{className:"border-t border-outline/10 my-6"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-text-secondary",children:[u.jsxs("p",{className:"flex items-center",children:[u.jsx(tu,{className:"w-5 h-5 mr-3 text-primary opacity-80"})," ",S.contactEmail||"N/A"]}),u.jsxs("p",{className:"flex items-center",children:[u.jsx(I0,{className:"w-5 h-5 mr-3 text-primary opacity-80"})," ",S.contactPhone||"N/A"]})]})]}),u.jsx("div",{children:u.jsx(S9,{title:"Change History",icon:u.jsx(Jx,{className:"w-6 h-6"}),defaultOpen:!1,children:u.jsx(_b,{history:n})})}),u.jsxs("div",{children:[u.jsx("div",{className:"flex justify-between items-center mb-6 px-1",children:u.jsxs("h2",{className:"text-2xl font-bold text-text-primary flex items-center gap-3",children:[u.jsx(Ed,{className:"w-6 h-6"})," Sample History"]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[c.map(C=>u.jsx(ice,{sample:C,onStartProject:_},C.id)),c.length===0&&u.jsx("p",{className:"col-span-full text-center text-text-secondary py-8 bg-surface-container-low rounded-xl border border-dashed border-outline/20",children:"No active samples for this installer."})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"flex justify-between items-center mb-6 px-1",children:u.jsxs("h2",{className:"text-2xl font-bold text-text-primary flex items-center gap-3",children:[u.jsx(zh,{className:"w-6 h-6"})," Assigned Projects"]})}),u.jsx("div",{className:"space-y-4",children:o?u.jsx("p",{className:"text-text-secondary",children:"Loading projects..."}):a.length>0?a.map(C=>u.jsxs("div",{className:"bg-surface-container-high p-5 rounded-xl border border-outline/10 shadow-sm flex flex-col md:flex-row justify-between items-start md:items-center gap-4 hover:shadow-md transition-shadow",children:[u.jsxs("div",{children:[u.jsx(ui,{to:`/projects/${C.projectId}`,className:"text-lg font-bold text-text-primary hover:text-primary transition-colors",children:C.projectName}),u.jsxs("p",{className:"text-sm text-text-secondary flex items-center mt-1",children:[u.jsx(pc,{className:"w-4 h-4 mr-2"}),C.customerName]})]}),u.jsxs("div",{className:"text-left md:text-right w-full md:w-auto border-t border-outline/10 md:border-none pt-4 md:pt-0",children:[u.jsxs("p",{className:"text-md font-bold text-success flex items-center md:justify-end",children:[u.jsx(NS,{className:"w-5 h-5 mr-2"}),new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(C.projectTotal)]}),u.jsxs("p",{className:"text-sm text-text-secondary flex items-center md:justify-end mt-1",children:[u.jsx(Cu,{className:"w-4 h-4 mr-2"}),JWe(C.scheduledStartDate,C.scheduledEndDate)]})]})]},C.projectId)):u.jsx("div",{className:"text-center text-text-secondary bg-surface-container-low p-12 rounded-xl border border-dashed border-outline/20",children:u.jsx("p",{children:"No accepted projects assigned to this installer yet."})})})]}),y&&u.jsx(V9,{isOpen:y,onClose:()=>b(!1),installer:S}),u.jsx(ace,{isOpen:f,onClose:()=>{p(!1),x(null)},initialInstaller:S,transferSampleId:m==null?void 0:m.id,initialProjectName:m?`Project for Sample #${m.id}`:""})]}):u.jsx("div",{className:"text-center py-12 text-text-secondary",children:"Installer not found."})},eVe=()=>{const{quoteId:e}=jx(),t=e?parseInt(e,10):void 0,{data:r=[],isLoading:n}=L4(),i=r.find(m=>m.id===t),{data:a=[]}=np(),{data:s=[]}=Xx(),{data:o=[]}=Cf(),l=a.find(m=>m.id===(i==null?void 0:i.projectId)),c=s.find(m=>m.id===(l==null?void 0:l.customerId)),d=o.find(m=>m.id===(i==null?void 0:i.installerId)),f=m=>m===ml.ACCEPTED?{color:"bg-primary-container text-primary",text:"Accepted"}:m===ml.REJECTED?{color:"bg-error-container text-error",text:"Rejected"}:{color:"bg-secondary-container text-text-secondary",text:"Sent"};if(n)return u.jsx("div",{className:"text-center p-8 text-text-secondary",children:"Loading quote details..."});if(!i)return u.jsx("div",{className:"text-center p-8 text-text-secondary",children:"Quote not found."});const p=f(i.status);return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 px-1",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-4xl font-bold text-text-primary tracking-tight",children:"Quote Details"}),l&&c&&u.jsxs("p",{className:"text-md text-text-secondary mt-2",children:["For ",u.jsx(ui,{to:`/projects/${l.id}`,className:"font-semibold text-primary hover:underline",children:l.projectName})]})]}),u.jsx("div",{className:`text-sm font-bold px-4 py-1.5 rounded-full ${p.color}`,children:p.text})]}),u.jsxs("div",{className:"bg-surface-container-high rounded-2xl shadow-sm p-6 md:p-8 border border-outline/10",children:[u.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-lg font-semibold mb-3 text-text-primary flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-primary-container rounded-full text-primary",children:u.jsx(NS,{size:18})}),"Materials Amount"]}),u.jsxs("p",{className:"text-5xl font-bold text-text-primary tracking-tight",children:["$",parseFloat(i.materialsAmount||0).toFixed(2)]}),u.jsxs("h2",{className:"text-lg font-semibold mt-4 mb-3 text-text-primary flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-primary-container rounded-full text-primary",children:u.jsx(NS,{size:18})}),"Labor Amount"]}),u.jsxs("p",{className:"text-5xl font-bold text-text-primary tracking-tight",children:["$",parseFloat(i.laborAmount||0).toFixed(2)]})]}),u.jsxs("div",{children:[u.jsxs("h2",{className:"text-lg font-semibold mb-3 text-text-primary flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-primary-container rounded-full text-primary",children:u.jsx(Sb,{size:18})}),"Assigned Installer"]}),d?u.jsx(ui,{to:`/installers/${d.id}`,className:"text-2xl font-bold text-text-primary hover:text-primary transition-colors",children:d.installerName}):u.jsx("p",{className:"text-2xl font-semibold text-text-secondary",children:"Not Assigned"})]})]}),u.jsx("div",{className:"border-t border-outline/10 my-8"}),u.jsxs("div",{children:[u.jsxs("h2",{className:"text-lg font-semibold mb-4 text-text-primary flex items-center gap-3",children:[u.jsx(au,{className:"w-5 h-5 text-primary"})," Details"]}),u.jsx("div",{className:"bg-surface-container-low p-5 rounded-xl border border-outline/5",children:u.jsx("p",{className:"text-text-primary whitespace-pre-wrap leading-relaxed",children:i.quoteDetails||"No details provided."})})]}),u.jsx("div",{className:"border-t border-outline/10 my-8"}),u.jsxs("div",{children:[u.jsxs("h2",{className:"text-lg font-semibold mb-3 text-text-primary flex items-center gap-3",children:[u.jsx(Cu,{className:"w-5 h-5 text-primary"})," Timeline"]}),u.jsxs("p",{className:"text-text-secondary font-medium",children:["Sent on: ",u.jsx("span",{className:"text-text-primary",children:new Date(i.dateSent).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]})]})},tVe=()=>{const{currentUser:e}=Xr(),[t,r]=I.useState([]),[n,i]=I.useState([]),[a,s]=I.useState(!0),[o,l]=I.useState(""),[c,d]=I.useState(""),[f,p]=I.useState(""),[m,x]=I.useState("User");I.useEffect(()=>{(async()=>{try{s(!0);const[A,j]=await Promise.all([Z7(),v8e()]);r(A.sort((P,O)=>P.email.localeCompare(O.email))),i(j)}catch(A){Kr.error("Could not load user management data."),console.error(A)}finally{s(!1)}})()},[]);const y=async C=>{if(C.preventDefault(),!o){Kr.error("Email is required to send an invitation.");return}try{const A=await f8e(o,c,f,m),j={...A,roles:[m],firstName:c,lastName:f};r([...t,j].sort((P,O)=>P.email.localeCompare(O.email))),Kr.success(`Invitation sent to ${A.email}!`),l(""),d(""),p(""),x("User")}catch(A){Kr.error(`Failed to create user: ${A.message}`)}},b=async C=>{if((e==null?void 0:e.userId)===C.userId){Kr.error("You cannot delete your own account.");return}if(window.confirm(`Are you sure you want to delete user "${C.email}"? This action cannot be undone.`))try{await h8e(C.userId),r(t.filter(A=>A.userId!==C.userId)),Kr.success("User deleted successfully.")}catch(A){Kr.error(`Failed to delete user: ${A.message}`)}},S=(C,A,j)=>{r(P=>P.map(O=>{if(O.userId===C){const D=j?[...O.roles,A]:O.roles.filter(L=>L!==A);return{...O,roles:D}}return O}))},_=async C=>{try{await y8e(C.userId,C.roles),Kr.success(`Roles for ${C.email} updated successfully.`)}catch(A){Kr.error(`Failed to update roles: ${A.message}`)}};return u.jsx("section",{className:"md:bg-surface-container-low md:p-8 md:rounded-2xl md:border md:border-outline/10 max-w-6xl mx-auto transition-all",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-8",children:[u.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[u.jsxs("h3",{className:"text-xl font-bold mb-4 text-text-primary flex items-center gap-2",children:[u.jsx(hx,{className:"w-5 h-5 text-primary"})," Existing Users"]}),a?u.jsx("p",{className:"text-text-secondary",children:"Loading users..."}):u.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto pr-2",children:t.map(C=>u.jsxs("div",{className:"bg-surface-container-highest/30 p-4 rounded-2xl border border-outline/10 hover:border-outline/30 transition-colors",children:[u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[C.avatarUrl?u.jsx("img",{src:C.avatarUrl,alt:C.email,className:"w-12 h-12 rounded-full object-cover border-2 border-surface-container-low shadow-sm"}):u.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold text-lg border-2 border-surface-container-low shadow-sm",children:(C.firstName?C.firstName[0]:C.email[0]).toUpperCase()}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-text-primary text-base",children:C.firstName?`${C.firstName} ${C.lastName}`:"No Name Set"}),u.jsx("p",{className:"text-xs font-medium text-text-secondary",children:C.email})]})]}),u.jsx("button",{onClick:()=>b(C),disabled:(e==null?void 0:e.userId)===C.userId,className:"text-error/80 hover:text-error p-2 rounded-full hover:bg-error/10 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"Delete User",children:u.jsx(wo,{size:18})})]}),u.jsxs("div",{className:"flex flex-wrap items-center gap-4 border-t border-outline/10 pt-3",children:[u.jsx("div",{className:"flex gap-4 items-center",children:n.map(A=>u.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-text-secondary cursor-pointer hover:text-text-primary transition-colors",children:[u.jsx("input",{type:"checkbox",checked:C.roles.includes(A.name),onChange:j=>S(C.userId,A.name,j.target.checked),disabled:(e==null?void 0:e.userId)===C.userId&&A.name==="Admin",className:"w-4 h-4 rounded border-outline/30 text-primary focus:ring-primary bg-surface-container-low"}),A.name]},A.id))}),u.jsxs("button",{onClick:()=>_(C),className:"ml-auto flex items-center gap-2 py-1.5 px-4 text-xs font-bold bg-primary/10 hover:bg-primary hover:text-on-primary text-primary rounded-full transition-all",children:[u.jsx(Cs,{size:14})," Save"]})]})]},C.userId))})]}),u.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[u.jsx("h3",{className:"text-xl font-bold mb-4 text-text-primary",children:"Invite New User"}),u.jsxs("form",{onSubmit:y,className:"space-y-5 bg-surface-container-highest/30 p-6 rounded-2xl border border-outline/10",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-bold text-text-secondary uppercase tracking-wider mb-1",children:["Email Address ",u.jsx("span",{className:"text-error",children:"*"})]}),u.jsx("input",{type:"email",value:o,onChange:C=>l(C.target.value),className:"block w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-lg text-text-primary placeholder:text-text-secondary/50 focus:border-primary focus:outline-none transition-all",placeholder:"new.user@example.com",autoComplete:"off"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-text-secondary uppercase tracking-wider mb-1",children:"First Name"}),u.jsx("input",{type:"text",value:c,onChange:C=>d(C.target.value),className:"block w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-lg text-text-primary placeholder:text-text-secondary/50 focus:border-primary focus:outline-none transition-all",placeholder:"John"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-text-secondary uppercase tracking-wider mb-1",children:"Last Name"}),u.jsx("input",{type:"text",value:f,onChange:C=>p(C.target.value),className:"block w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-lg text-text-primary placeholder:text-text-secondary/50 focus:border-primary focus:outline-none transition-all",placeholder:"Doe"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-text-secondary uppercase tracking-wider mb-1",children:"Initial Role"}),u.jsx("select",{value:m,onChange:C=>x(C.target.value),className:"block w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-lg text-text-primary focus:border-primary focus:outline-none transition-all cursor-pointer",children:n.map(C=>u.jsx("option",{value:C.name,children:C.name},C.id))})]}),u.jsxs("div",{className:"pt-4",children:[u.jsxs("button",{type:"submit",className:"w-full bg-primary hover:bg-primary-hover text-on-primary py-3 px-6 rounded-full font-bold shadow-sm flex items-center justify-center gap-2 transition-all hover:shadow-md",children:[u.jsx(hx,{size:18})," Send Invitation"]}),u.jsx("p",{className:"text-xs text-text-tertiary mt-2 text-center",children:"The user will receive an email with a link to set their password."})]})]})]})]})})},rVe=({primary:e,secondary:t,accent:r,background:n,surface:i})=>{const a={"--preview-primary":e,"--preview-secondary":t,"--preview-accent":r,"--preview-bg":n,"--preview-surface":i};return u.jsxs("div",{className:"w-full h-full min-h-[400px] rounded-xl overflow-hidden border border-border shadow-xl flex flex-col",style:a,children:[u.jsxs("div",{className:"h-6 bg-gray-900 flex items-center px-3 gap-1.5",children:[u.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-500/80"}),u.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-yellow-500/80"}),u.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500/80"})]}),u.jsxs("div",{className:"flex flex-1 overflow-hidden font-sans text-xs",children:[u.jsxs("div",{style:{backgroundColor:"color-mix(in srgb, var(--preview-surface), var(--preview-bg) 50%)"},className:"w-16 sm:w-48 flex flex-col p-3 gap-4",children:[u.jsx("div",{className:"h-8 w-8 sm:w-32 bg-gray-500/20 rounded mb-2 animate-pulse"}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsxs("div",{style:{backgroundColor:"color-mix(in srgb, var(--preview-primary), var(--preview-surface) 85%)",color:"var(--preview-primary)"},className:"p-2 rounded-full flex items-center gap-2 font-bold",children:[u.jsx(Roe,{size:14})," ",u.jsx("span",{className:"hidden sm:inline",children:"Dashboard"})]}),u.jsxs("div",{className:"p-2 rounded-full flex items-center gap-2 hover:bg-black/5 text-gray-400",children:[u.jsx(hx,{size:14})," ",u.jsx("span",{className:"hidden sm:inline",children:"Customers"})]}),u.jsxs("div",{className:"p-2 rounded-full flex items-center gap-2 hover:bg-black/5 text-gray-400",children:[u.jsx(pC,{size:14})," ",u.jsx("span",{className:"hidden sm:inline",children:"Settings"})]})]})]}),u.jsxs("div",{style:{backgroundColor:"var(--preview-bg)"},className:"flex-1 flex flex-col relative",children:[u.jsxs("div",{className:"h-12 flex items-center justify-between px-4 mt-2",children:[u.jsx("h1",{className:"font-bold text-lg",style:{color:"white"},children:"Dashboard"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("div",{style:{backgroundColor:"color-mix(in srgb, var(--preview-surface) 90%, #fff)",color:"gray"},className:"h-8 w-8 rounded-full flex items-center justify-center",children:u.jsx(Yo,{size:14})}),u.jsxs("div",{style:{backgroundColor:"color-mix(in srgb, var(--preview-surface) 90%, #fff)",color:"gray"},className:"h-8 w-8 rounded-full flex items-center justify-center relative",children:[u.jsx(kS,{size:14}),u.jsx("div",{style:{backgroundColor:"var(--preview-accent)"},className:"absolute top-0 right-0 w-2.5 h-2.5 rounded-full border-2 border-white"})]})]})]}),u.jsxs("div",{className:"p-4 space-y-4 overflow-hidden",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{style:{backgroundColor:"color-mix(in srgb, var(--preview-surface) 90%, #fff)"},className:"p-4 rounded-xl shadow-sm",children:[u.jsx("div",{className:"mb-1 text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Active Jobs"}),u.jsx("div",{style:{color:"white"},className:"text-2xl font-bold",children:"12"}),u.jsx("div",{style:{color:"var(--preview-primary)",backgroundColor:"color-mix(in srgb, var(--preview-primary), var(--preview-surface) 85%)"},className:"text-[10px] font-bold mt-2 px-2 py-0.5 rounded-full w-fit",children:"On Track"})]}),u.jsxs("div",{style:{backgroundColor:"color-mix(in srgb, var(--preview-surface) 90%, #fff)"},className:"p-4 rounded-xl shadow-sm",children:[u.jsx("div",{className:"mb-1 text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Pending"}),u.jsx("div",{style:{color:"white"},className:"text-2xl font-bold",children:"5"}),u.jsx("div",{style:{color:"var(--preview-accent)",backgroundColor:"color-mix(in srgb, var(--preview-accent), var(--preview-surface) 85%)"},className:"text-[10px] font-bold mt-2 px-2 py-0.5 rounded-full w-fit",children:"Action Needed"})]})]}),u.jsxs("div",{className:"flex gap-2 mt-4",children:[u.jsx("button",{style:{backgroundColor:"var(--preview-primary)",color:"#fff"},className:"px-4 py-2 rounded-full shadow-md font-bold",children:"Save"}),u.jsx("button",{style:{color:"gray",backgroundColor:"color-mix(in srgb, var(--preview-surface) 90%, #fff)"},className:"px-4 py-2 rounded-full shadow-sm font-medium",children:"Cancel"})]})]}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-t from-black/20 to-transparent pointer-events-none"})]})]})]})},CD=e=>{const t=parseInt(e.substr(1,2),16),r=parseInt(e.substr(3,2),16),n=parseInt(e.substr(5,2),16);return(t*299+r*587+n*114)/1e3>=128?"#000000":"#ffffff"},nVe=()=>{const{systemBranding:e,refreshBranding:t}=Xr(),[r,n]=I.useState("Subfloor"),[i,a]=I.useState("America/Los_Angeles"),[s,o]=I.useState(null),[l,c]=I.useState(null),[d,f]=I.useState("#2563eb"),[p,m]=I.useState("#4b5563"),[x,y]=I.useState("#0d9488"),[b,S]=I.useState("#111827"),[_,C]=I.useState("#1f2937"),[A,j]=I.useState(null),[P,O]=I.useState(null),[D,L]=I.useState(!1),[B,H]=I.useState("#ef4444"),[z,ie]=I.useState("#f59e0b"),[X,W]=I.useState("#10b981"),[Q,te]=I.useState(null),J="";I.useEffect(()=>()=>{A&&URL.revokeObjectURL(A),P&&URL.revokeObjectURL(P)},[A,P]),I.useEffect(()=>{e&&(te({companyName:e.companyName,systemTimezone:e.systemTimezone,primaryColor:e.primaryColor,secondaryColor:e.secondaryColor,accentColor:e.accentColor,backgroundColor:e.backgroundColor,surfaceColor:e.surfaceColor,errorColor:e.errorColor||"#ef4444",warningColor:e.warningColor||"#f59e0b",successColor:e.successColor||"#10b981"}),e.companyName&&n(e.companyName),e.systemTimezone&&a(e.systemTimezone),e.primaryColor&&f(e.primaryColor),e.secondaryColor&&m(e.secondaryColor),e.accentColor&&y(e.accentColor),e.backgroundColor&&S(e.backgroundColor),e.surfaceColor&&C(e.surfaceColor),e.errorColor&&H(e.errorColor),e.warningColor&&ie(e.warningColor),e.successColor&&W(e.successColor))},[e]);const Y=()=>{Q&&window.confirm("Discard unsaved changes and reset to last saved state?")&&(n(Q.companyName||"Subfloor"),a(Q.systemTimezone||"America/Los_Angeles"),f(Q.primaryColor||"#2563eb"),m(Q.secondaryColor||"#4b5563"),y(Q.accentColor||"#0d9488"),S(Q.backgroundColor||"#111827"),C(Q.surfaceColor||"#1f2937"),H(Q.errorColor||"#ef4444"),ie(Q.warningColor||"#f59e0b"),W(Q.successColor||"#10b981"),Kr.success("Reset to last saved settings."))},pe=(de,G)=>{var Se;const q=(Se=de.target.files)==null?void 0:Se[0];if(!q)return;G==="logo"&&A&&URL.revokeObjectURL(A),G==="favicon"&&P&&URL.revokeObjectURL(P);const ne=URL.createObjectURL(q);G==="logo"?(o(q),j(ne)):(c(q),O(ne))},_e=async de=>{if(window.confirm(`Are you sure you want to remove the current ${de}?`))try{await _8e(de),await t(),Kr.success(`${de==="logo"?"Company Logo":"Favicon"} removed.`),de==="logo"?(o(null),A&&URL.revokeObjectURL(A),j(null)):(c(null),P&&URL.revokeObjectURL(P),O(null))}catch(G){console.error(G),Kr.error("Failed to delete branding.")}},ee=async()=>{L(!0);const de=new FormData;s&&de.append("logo",s),l&&de.append("favicon",l),de.append("companyName",r),de.append("systemTimezone",i),de.append("primaryColor",d),de.append("onPrimary",CD(d)),de.append("secondaryColor",p),de.append("onSecondary",CD(p)),de.append("accentColor",x),de.append("onAccent",CD(x)),de.append("backgroundColor",b),de.append("surfaceColor",_),de.append("errorColor",B),de.append("warningColor",z),de.append("successColor",X);try{await C8e(de),await t(),Kr.success("Branding updated successfully!"),o(null),c(null),A&&URL.revokeObjectURL(A),P&&URL.revokeObjectURL(P),j(null),O(null)}catch(G){console.error(G),Kr.error(G.message||"Failed to upload branding.")}finally{L(!1)}};return u.jsxs("section",{children:[u.jsxs("h2",{className:"text-2xl font-bold text-text-primary mb-6 flex items-center gap-3",children:[u.jsx(Toe,{className:"w-7 h-7 text-accent"}),"System Branding"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-0 md:gap-6 mb-8",children:[u.jsxs("div",{className:"py-6 border-b border-outline/10 md:border-b-0 md:bg-surface-container-low md:p-6 md:rounded-xl md:border md:border-outline/10",children:[u.jsxs("h3",{className:"text-lg font-medium text-text-primary mb-2 flex items-center gap-2",children:[u.jsx(cx,{className:"w-5 h-5 text-secondary"})," Company Name"]}),u.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Appears in email footers and titles."}),u.jsx("input",{type:"text",value:r,onChange:de=>n(de.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-all placeholder:text-text-tertiary",placeholder:"e.g. Acme Flooring Co."})]}),u.jsxs("div",{className:"py-6 border-b border-outline/10 md:border-b-0 md:bg-surface-container-low md:p-6 md:rounded-xl md:border md:border-outline/10",children:[u.jsxs("h3",{className:"text-lg font-medium text-text-primary mb-2 flex items-center gap-2",children:[u.jsx(ux,{className:"w-5 h-5 text-secondary"})," System Timezone"]}),u.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Used for all dates and scheduling."}),u.jsxs("select",{value:i,onChange:de=>a(de.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-all cursor-pointer",children:[u.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (US & Canada)"}),u.jsx("option",{value:"America/Denver",children:"Mountain Time (US & Canada)"}),u.jsx("option",{value:"America/Chicago",children:"Central Time (US & Canada)"}),u.jsx("option",{value:"America/New_York",children:"Eastern Time (US & Canada)"}),u.jsx("option",{value:"UTC",children:"UTC (Universal)"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-0 md:gap-8",children:[u.jsxs("div",{className:"py-6 border-b border-outline/10 md:border-b-0 md:bg-surface-container-low md:p-6 md:rounded-xl md:border md:border-outline/10",children:[u.jsx("h3",{className:"text-lg font-medium text-text-primary mb-2",children:"Company Logo"}),u.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Displayed in the top-left of the application sidebar. Transparent PNG recommended."}),u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsx("div",{className:"relative h-32 w-full flex items-center justify-center bg-surface-container-highest rounded-lg border-2 border-dashed border-outline/20 group",children:A?u.jsxs(u.Fragment,{children:[u.jsx("img",{src:A,alt:"New Logo Preview",className:"max-h-24 max-w-full object-contain"}),u.jsx("span",{className:"absolute top-2 right-2 bg-primary-container text-primary text-xs px-2 py-1 rounded-full font-bold",children:"New"})]}):e!=null&&e.logoUrl?u.jsxs(u.Fragment,{children:[u.jsx("img",{src:`${J}${e.logoUrl}`,alt:"Current Logo",className:"max-h-24 max-w-full object-contain"}),u.jsx("button",{onClick:()=>_e("logo"),className:"absolute top-2 right-2 p-2 bg-red-500/80 hover:bg-red-600 text-white rounded transition-opacity opacity-0 group-hover:opacity-100",title:"Remove Logo",children:u.jsx(wo,{size:16})})]}):u.jsx("span",{className:"text-text-secondary",children:"No Logo Set"})}),u.jsx("input",{type:"file",accept:"image/*",onChange:de=>pe(de,"logo"),className:"block w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-on-primary hover:file:bg-primary-hover"})]})]}),u.jsxs("div",{className:"py-6 border-b border-outline/10 md:border-b-0 md:bg-surface-container-low md:p-6 md:rounded-xl md:border md:border-outline/10",children:[u.jsx("h3",{className:"text-lg font-medium text-text-primary mb-2",children:"Browser Favicon"}),u.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Displayed in the browser tab. Square image (PNG or ICO) required."}),u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsx("div",{className:"relative h-32 w-full flex items-center justify-center bg-surface-container-highest rounded-lg border-2 border-dashed border-outline/20 group",children:P?u.jsxs(u.Fragment,{children:[u.jsx("img",{src:P,alt:"New Favicon Preview",className:"w-16 h-16 object-contain"}),u.jsx("span",{className:"absolute top-2 right-2 bg-primary-container text-primary text-xs px-2 py-1 rounded-full font-bold",children:"New"})]}):e!=null&&e.faviconUrl?u.jsxs(u.Fragment,{children:[u.jsx("img",{src:`${J}${e.faviconUrl}`,alt:"Current Favicon",className:"w-16 h-16 object-contain"}),u.jsx("button",{onClick:()=>_e("favicon"),className:"absolute top-2 right-2 p-2 bg-red-500/80 hover:bg-red-600 text-white rounded transition-opacity opacity-0 group-hover:opacity-100",title:"Remove Favicon",children:u.jsx(wo,{size:16})})]}):u.jsx("span",{className:"text-text-secondary text-xs",children:"None"})}),u.jsx("input",{type:"file",accept:".ico,.png",onChange:de=>pe(de,"favicon"),className:"block w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-on-primary hover:file:bg-primary-hover"})]})]})]}),u.jsxs("div",{className:"mt-8 pt-6 border-t border-outline/10",children:[u.jsxs("h3",{className:"text-lg font-medium text-text-primary mb-4 flex items-center gap-2",children:[u.jsx(Foe,{className:"w-5 h-5 text-accent"}),"Theme Colors"]}),u.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-8",children:[u.jsxs("div",{className:"xl:col-span-5 space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[u.jsx("h4",{className:"text-xs font-bold text-text-secondary uppercase tracking-wider",children:"Brand Identity"}),u.jsx(Dp,{label:"Primary Color",value:d,onChange:f}),u.jsx(Dp,{label:"Secondary Color",value:p,onChange:m}),u.jsx(Dp,{label:"Accent Color",value:x,onChange:y})]}),u.jsx("div",{className:"border-t border-outline/10 my-4"}),u.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[u.jsx("h4",{className:"text-xs font-bold text-text-secondary uppercase tracking-wider",children:"Interface Theme"}),u.jsx(Dp,{label:"Page Background",value:b,onChange:S}),u.jsx(Dp,{label:"Card Surface",value:_,onChange:C})]}),u.jsx("div",{className:"border-t border-outline/10 my-4"}),u.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[u.jsx("h4",{className:"text-xs font-bold text-text-secondary uppercase tracking-wider",children:"Status Colors"}),u.jsx(Dp,{label:"Success (Green)",value:X,onChange:W}),u.jsx(Dp,{label:"Warning (Orange)",value:z,onChange:ie}),u.jsx(Dp,{label:"Error (Red)",value:B,onChange:H})]})]}),u.jsx("div",{className:"xl:col-span-7",children:u.jsxs("div",{className:"sticky top-6",children:[u.jsxs("div",{className:"flex justify-between items-end mb-2",children:[u.jsx("h4",{className:"text-xs font-bold text-text-secondary uppercase tracking-wider",children:"Live Preview"}),u.jsx("span",{className:"text-[10px] text-text-secondary bg-surface-container-low border border-outline/10 px-3 py-1 rounded-full",children:"Changes applied on Save"})]}),u.jsxs("div",{className:"mb-4 text-xs text-text-secondary space-y-1",children:[u.jsxs("p",{children:[" ",u.jsx("strong",{children:"Primary:"})," Buttons, Active Tabs, Links"]}),u.jsxs("p",{children:[" ",u.jsx("strong",{children:"Secondary:"})," Borders, Lines, Inactive Icons"]}),u.jsxs("p",{children:[" ",u.jsx("strong",{children:"Accent:"})," Status Badges, Notification Dots"]})]}),u.jsx(rVe,{primary:d,secondary:p,accent:x,background:b,surface:_})]})})]})]}),u.jsxs("div",{className:"mt-8 flex justify-end border-t border-outline/10 pt-4",children:[u.jsxs("button",{onClick:Y,className:"flex items-center gap-2 text-text-secondary hover:text-text-primary font-medium py-2 px-6 rounded-full hover:bg-surface-container-highest mr-auto transition-colors",children:[u.jsx(e1,{size:16})," Reset Changes"]}),u.jsxs("button",{onClick:ee,disabled:D,className:"flex items-center gap-2 bg-primary hover:bg-primary-hover text-on-primary font-bold py-2 px-8 rounded-full shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[u.jsx(Cs,{size:18}),D?"Uploading...":"Save Branding"]})]})]})},Dp=({label:e,value:t,onChange:r})=>u.jsxs("div",{className:"py-3 border-b border-outline/10 md:border-b-0 md:bg-surface-container-low md:p-4 md:rounded-xl md:border md:border-outline/10 flex items-center justify-between group hover:border-primary/50 transition-colors md:shadow-sm",children:[u.jsx("label",{className:"text-sm font-medium text-text-primary",children:e}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-xs text-text-secondary font-mono opacity-50 group-hover:opacity-100 transition-opacity",children:t}),u.jsx("div",{className:"relative w-10 h-10 rounded-full overflow-hidden border-2 border-surface shadow-sm ring-1 ring-outline/10 hover:ring-primary transition-all",children:u.jsx("input",{type:"color",value:t,onChange:n=>r(n.target.value),className:"absolute -top-4 -left-4 w-20 h-20 p-0 border-0 cursor-pointer"})})]})]}),nX=({title:e,endpoint:t,warningMessage:r,icon:n})=>{const[i,a]=I.useState(null),[s,o]=I.useState(!1),l=d=>{d.target.files&&a(d.target.files[0])},c=async d=>{if(d.preventDefault(),!i)return Re.error("Please select a file.");if(!window.confirm(r))return;o(!0);const f=Re.loading(`Restoring ${e}...`),p=new FormData;p.append("backupFile",i);try{const m=await fetch(t,{method:"POST",body:p});if(!m.ok){const x=await m.json();throw new Error(x.error||"Restore failed")}if(Re.success("Restore successful!",{id:f}),t.includes("database")){try{await tm.signOut()}catch{}window.location.href="/auth"}else setTimeout(()=>window.location.reload(),1500)}catch(m){console.error(m),Re.error(m.message,{id:f})}finally{o(!1)}};return u.jsxs("form",{onSubmit:c,className:"flex flex-col h-full",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n&&u.jsx(n,{className:"w-5 h-5 text-text-secondary"}),u.jsx("h3",{className:"font-semibold text-text-primary",children:e})]}),u.jsx("div",{className:"flex-1 bg-background rounded border border-border border-dashed p-4 flex flex-col justify-center items-center gap-2 hover:border-primary transition-colors",children:u.jsx("input",{type:"file",accept:".zip",onChange:l,className:"w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-surface file:text-text-primary hover:file:bg-primary hover:file:text-on-primary"})}),u.jsxs("button",{type:"submit",disabled:!i||s,className:"mt-4 w-full bg-secondary hover:bg-secondary-hover text-on-secondary font-bold py-2 px-4 rounded transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx(Ioe,{size:16}),s?"Restoring...":"Start Restore"]})]})},iVe=()=>{const[e,t]=I.useState(null),[r,n]=I.useState(null),[i,a]=I.useState(!1),s=async o=>{if(o.preventDefault(),!e||!r)return Re.error("Please select both files.");if(!window.confirm("WARNING: You are about to overwrite the ENTIRE system (Database + Images). This cannot be undone. Continue?"))return;a(!0);const l=Re.loading("Starting Full System Restore...");try{Re.loading("Step 1/2: Restoring Images...",{id:l});const c=new FormData;if(c.append("backupFile",r),!(await fetch("/api/restore/images",{method:"POST",body:c})).ok)throw new Error("Image restore failed. Aborting DB restore.");Re.loading("Step 2/2: Restoring Database...",{id:l});const f=new FormData;if(f.append("backupFile",e),!(await fetch("/api/restore/database",{method:"POST",body:f})).ok)throw new Error("Database restore failed.");Re.success("Full System Restore Complete! Redirecting...",{id:l});try{await tm.signOut()}catch{}window.location.href="/auth"}catch(c){console.error(c),Re.error(c.message||"Restore Failed",{id:l})}finally{a(!1)}};return u.jsxs("form",{onSubmit:s,className:"bg-surface-container rounded-xl border border-outline/10 p-6",children:[u.jsx("h3",{className:"text-lg font-bold text-text-primary mb-2 text-center",children:"Full System Restore"}),u.jsx("p",{className:"text-text-secondary text-sm text-center mb-6",children:"Upload both files to restore the entire application state in one go."}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-text-secondary mb-2 flex items-center gap-2",children:[u.jsx(pT,{size:16})," Database File"]}),u.jsx("input",{type:"file",accept:".zip",onChange:o=>o.target.files&&t(o.target.files[0]),className:"w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border file:border-outline file:bg-surface-container-high file:text-text-primary hover:file:bg-primary-container/30 transition-colors cursor-pointer"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-text-secondary mb-2 flex items-center gap-2",children:[u.jsx(of,{size:16})," Images File"]}),u.jsx("input",{type:"file",accept:".zip",onChange:o=>o.target.files&&n(o.target.files[0]),className:"w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border file:border-outline file:bg-surface-container-high file:text-text-primary hover:file:bg-primary-container/30 transition-colors cursor-pointer"})]})]}),u.jsxs("button",{type:"submit",disabled:!e||!r||i,className:"w-full bg-error hover:bg-error-hover text-on-error font-bold py-3 px-6 rounded-full transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[u.jsx(e1,{size:18}),i?"Restoring System...":"Restore Everything"]})]})},aVe=()=>u.jsxs("div",{className:"space-y-8",children:[u.jsxs("section",{className:"py-6 border-b border-outline/10 md:bg-surface-container-low md:p-8 md:rounded-2xl md:shadow-sm md:border md:border-outline/10 md:border-b-outline/10",children:[u.jsxs("h2",{className:"text-xl font-semibold text-text-primary mb-3 flex items-center gap-3",children:[u.jsx(_S,{className:"w-6 h-6 text-primary"}),"Create Backups"]}),u.jsx("p",{className:"text-text-secondary mb-6 text-sm",children:"Download ZIP archives of your critical data. Store these in a safe location."}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("a",{href:"/api/backup/database",download:!0,className:"flex flex-col items-center justify-center p-6 bg-surface-container-highest border border-outline/10 rounded-xl hover:border-primary/50 hover:bg-primary/5 transition-all group",children:[u.jsx(pT,{className:"w-8 h-8 text-primary group-hover:text-primary mb-3"}),u.jsx("span",{className:"font-bold text-text-primary",children:"Database Backup"}),u.jsx("span",{className:"text-xs text-text-secondary",children:"Customers, Projects, Settings"})]}),u.jsxs("a",{href:"/api/backup/images",download:!0,className:"flex flex-col items-center justify-center p-6 bg-surface-container-highest border border-outline/10 rounded-xl hover:border-primary/50 hover:bg-primary/5 transition-all group",children:[u.jsx(of,{className:"w-8 h-8 text-primary group-hover:text-primary mb-3"}),u.jsx("span",{className:"font-bold text-text-primary",children:"Image Library Backup"}),u.jsx("span",{className:"text-xs text-text-secondary",children:"Photos, Logos, Uploads"})]})]})]}),u.jsxs("section",{className:"py-6 md:bg-surface-container-low md:p-8 md:rounded-2xl md:shadow-sm md:border md:border-outline/10",children:[u.jsxs("h2",{className:"text-xl font-semibold text-text-primary mb-3 flex items-center gap-3",children:[u.jsx(e1,{className:"w-6 h-6 text-primary"}),"System Recovery"]}),u.jsxs("div",{className:"bg-error/10 border border-error/20 rounded-xl p-4 mb-8 text-sm text-text-primary flex gap-3 items-start",children:[u.jsx("span",{className:"text-error font-bold",children:"Warning:"})," Restoring will permanently overwrite existing data. Ensure you have a recent backup before proceeding."]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsx("div",{children:u.jsx(nX,{title:"Database Only",icon:pT,endpoint:"/api/restore/database",warningMessage:"Overwrite current database? Current data will be lost."})}),u.jsx("div",{className:"lg:border-l lg:border-outline/10 lg:pl-8",children:u.jsx(nX,{title:"Images Only",icon:of,endpoint:"/api/restore/images",warningMessage:"Overwrite image library? New images may be lost."})})]}),u.jsx("div",{className:"border-t border-outline/10 my-8"}),u.jsx("div",{className:"max-w-2xl mx-auto",children:u.jsx(iVe,{})})]})]}),sVe=()=>{const{currentUser:e,saveCurrentUserPreferences:t,updateCurrentUserProfile:r,uploadCurrentUserAvatar:n,deleteCurrentUserAvatar:i}=Xr(),{isEnabled:a,enableBiometrics:s,disableBiometrics:o}=$Fe(),[l,c]=I.useState("#ffffff"),[d,f]=I.useState(""),[p,m]=I.useState(""),[x,y]=I.useState(""),[b,S]=I.useState(""),[_,C]=I.useState(null),[A,j]=I.useState(!1);I.useEffect(()=>{var Q;(async()=>{try{const te=await fetch(rr("/api/preferences/calendar-token"),{credentials:"include"});if(te.ok){const J=await te.json();C(J.token)}}catch(te){console.error("Failed to fetch calendar token",te)}})(),(Q=e==null?void 0:e.preferences)!=null&&Q.calendarColor&&c(e.preferences.calendarColor),e&&(f(e.firstName||""),m(e.lastName||""))},[e]);const P=W=>{const Q=W.target.value;c(Q)},O=async()=>{if(!e)return;const W={...e.preferences,calendarColor:l};await t(W),Kr.success("Color preference saved!")},D=async()=>{try{const W=await fetch(rr("/api/preferences/calendar-token"),{method:"POST",credentials:"include"});if(W.ok){const Q=await W.json();C(Q.token),Kr.success("Calendar link generated!")}}catch{Kr.error("Failed to generate link")}},L=()=>{const W=(e==null?void 0:e.id)||(e==null?void 0:e.userId);if(!e||!W||!_){Kr.error("User ID not found. Please refresh.");return}const Q=rr("").replace(/\/$/,""),J=`${Q.startsWith("http")?Q:window.location.origin}/api/calendar/feed/${W}/${_}`;navigator.clipboard.writeText(J),j(!0),Kr.success("Link copied to clipboard!"),setTimeout(()=>j(!1),2e3)},B=async()=>{await r(d,p)},H=async W=>{W.target.files&&W.target.files[0]&&await n(W.target.files[0])},z=async()=>{window.confirm("Remove your custom profile picture?")&&await i()},ie=async()=>{if(!x||!b){Kr.error("Please fill in both password fields.");return}try{await x8e(x,b),Kr.success("Password changed successfully!"),y(""),S("")}catch(W){Kr.error(W.message)}},X=async()=>{a?window.confirm("Disable biometric security?")&&(o(),Kr.success("Biometrics disabled")):await s()&&Kr.success("Biometrics enabled!")};return u.jsxs("section",{children:[u.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-6",children:"My Settings"}),u.jsxs("div",{className:"space-y-6 max-w-md",children:[u.jsxs("div",{className:"flex flex-col items-center mb-6",children:[u.jsxs("div",{className:"relative w-28 h-28 mb-4",children:[e!=null&&e.avatarUrl?u.jsx("img",{src:e.avatarUrl,alt:"Profile",className:"w-full h-full rounded-full object-cover border-4 border-surface shadow-md"}):u.jsx("div",{className:"w-full h-full rounded-full bg-surface-container-highest flex items-center justify-center border-4 border-surface shadow-md text-3xl font-bold text-primary",children:d?`${d[0]}${p[0]||""}`.toUpperCase():e==null?void 0:e.email[0].toUpperCase()}),(e==null?void 0:e.avatarUrl)&&u.jsx("button",{onClick:z,className:"absolute top-0 right-0 bg-error-container text-error p-1.5 rounded-full shadow-sm hover:bg-error hover:text-white transition-colors z-10 border-2 border-surface",title:"Remove Picture",children:u.jsx(wo,{size:12})}),u.jsx("label",{htmlFor:"avatar-upload",className:"absolute bottom-0 right-0 bg-primary hover:bg-primary-hover text-on-primary p-2.5 rounded-full cursor-pointer shadow-lg transition-colors border-2 border-surface",children:u.jsx(jv,{size:18})}),u.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",className:"hidden",onChange:H})]}),u.jsx("p",{className:"text-xs text-text-secondary font-medium",children:"Click camera icon to change"})]}),u.jsxs("div",{className:"space-y-5",children:[u.jsx("h3",{className:"text-lg font-bold text-text-primary border-b border-outline/10 pb-2",children:"Profile Information"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"First Name"}),u.jsx("input",{type:"text",value:d,onChange:W=>f(W.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Last Name"}),u.jsx("input",{type:"text",value:p,onChange:W=>m(W.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors"})]})]}),u.jsxs("button",{onClick:B,className:"flex items-center gap-2 py-2 px-6 text-sm bg-primary hover:bg-primary-hover text-on-primary rounded-full font-semibold shadow-sm transition-all hover:shadow-md",children:[u.jsx(Cs,{size:16})," Update Profile"]})]}),u.jsx("h3",{className:"text-lg font-bold text-text-primary border-b border-outline/10 pb-2 pt-6",children:"Security"}),u.jsxs("div",{className:"space-y-5",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Current Password"}),u.jsx("input",{type:"password",value:x,onChange:W=>y(W.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors",placeholder:"Required to verify identity"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"New Password"}),u.jsx("input",{type:"password",value:b,onChange:W=>S(W.target.value),className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-colors",placeholder:"Minimum 8 characters"})]}),u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{onClick:ie,className:"py-2 px-6 text-sm bg-surface-container-high border border-outline/20 text-text-primary hover:bg-surface-container-highest rounded-full font-medium transition-colors",children:"Change Password"})})]}),lx.isNativePlatform()&&u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-lg font-bold text-text-primary border-b border-outline/10 pb-2 pt-6",children:"App Security"}),u.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface-container-low rounded-xl border border-outline/10",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-full ${a?"bg-success-container text-success":"bg-surface-container-highest text-text-secondary"}`,children:u.jsx(w8,{size:24})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-text-primary",children:"Biometric Lock"}),u.jsx("p",{className:"text-xs text-text-secondary",children:"Require Face ID / Fingerprint after 5m inactivity"})]})]}),u.jsx("button",{onClick:X,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${a?"bg-primary":"bg-surface-container-highest"}`,children:u.jsx("span",{className:`${a?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]})]}),u.jsx("h3",{className:"text-lg font-bold text-text-primary border-b border-outline/10 pb-2 pt-6",children:"Preferences"}),u.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface-container-low rounded-xl border border-outline/10",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Foe,{className:"w-6 h-6 text-accent"}),u.jsx("label",{htmlFor:"userColor",className:"font-medium text-text-secondary",children:"My Calendar Color"})]}),u.jsx("div",{className:"relative w-10 h-10 rounded-full overflow-hidden border-2 border-surface shadow-sm ring-1 ring-outline/10 hover:ring-primary transition-all",children:u.jsx("input",{type:"color",id:"userColor",value:l,onChange:P,className:"absolute -top-4 -left-4 w-20 h-20 p-0 border-0 cursor-pointer"})})]}),u.jsx("div",{className:"flex justify-end",children:u.jsxs("button",{onClick:O,className:"flex items-center gap-2 py-2 px-6 text-sm bg-primary hover:bg-primary-hover text-on-primary rounded-full font-semibold shadow-sm transition-all hover:shadow-md",children:[u.jsx(Cs,{size:16})," Save Calendar Color"]})}),u.jsx("h3",{className:"text-lg font-bold text-text-primary border-b border-outline/10 pb-2 pt-6",children:"Calendar Sync"}),u.jsxs("div",{className:"bg-surface-container-low rounded-xl border border-outline/10 p-5",children:[u.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[u.jsx("div",{className:"p-2 bg-primary-container rounded-lg text-primary",children:u.jsx(Cu,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-text-primary",children:"Sync to Phone"}),u.jsx("p",{className:"text-sm text-text-secondary",children:"See your jobs and appointments in Google Calendar, Apple Calendar, or Outlook."})]})]}),_?u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:L,className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-surface-container-highest hover:bg-surface-container-high border border-transparent hover:border-outline/10 text-text-primary rounded-full font-medium transition-all",children:[A?u.jsx(pd,{size:16,className:"text-success"}):u.jsx(e9,{size:16}),A?"Copied!":"Copy Link"]}),u.jsx("button",{onClick:()=>{confirm("Resetting this link will disconnect all current devices. Continue?")&&D()},className:"px-3 py-2 bg-error-container hover:bg-error/20 text-error border border-transparent rounded-full transition-colors",title:"Reset Link",children:u.jsx(hC,{size:16})})]}),u.jsx("p",{className:"text-xs text-text-tertiary",children:`Paste this link into your calendar app's "Subscribe by URL" or "Add Calendar from Internet" section.`})]}):u.jsx("button",{onClick:D,className:"w-full py-2 bg-primary hover:bg-primary-hover text-on-primary rounded-full font-bold transition-colors shadow-md",children:"Generate Sync Link"})]})]})]})},oVe=()=>{const[e,t]=I.useState([]),[r,n]=I.useState(!0),[i,a]=I.useState(null),[s,o]=I.useState(""),[l,c]=I.useState(""),d=I.useCallback(async()=>{try{n(!0);const b=await w9();t(b)}catch(b){Re.error("Could not load sample sizes."),console.error(b)}finally{n(!1)}},[]);I.useEffect(()=>{d()},[d]);const f=b=>{a(b),o(b)},p=()=>{a(null),o("")},m=async b=>{const S=s.trim();if(!S||b===S){p();return}try{await IBe(b,S),Re.success(`Size '${b}' updated to '${S}'.`),p(),await d()}catch(_){Re.error(`Update failed: ${_.message}`)}},x=async b=>{b.preventDefault();const S=l.trim();if(S)try{await Xle(S),Re.success(`Size '${S}' created.`),c(""),await d()}catch(_){Re.error(`Create failed: ${_.message}`)}},y=async b=>{const S=e.find(C=>C.value===b),_=S&&S.usageCount>0?`WARNING: This size is currently in use by ${S.usageCount} variants. Deletion will fail unless usage is 0.`:"";if(window.confirm(`Are you sure you want to delete the size "${b}" from the system? ${_}`))try{await OBe(b),Re.success(`Size '${b}' successfully deleted.`),await d()}catch(C){Re.error(`Delete failed: ${C.message}`)}};return r?u.jsxs("div",{className:"flex items-center justify-center p-8",children:[u.jsx(q4,{className:"animate-spin"})," ",u.jsx("span",{className:"ml-2",children:"Loading sizes..."})]}):u.jsxs("section",{className:"md:bg-surface-container-low md:p-8 md:rounded-2xl md:border md:border-outline/10 max-w-4xl mx-auto transition-all",children:[u.jsx("h2",{className:"text-2xl font-semibold text-text-primary mb-4",children:"Manage Sample Sizes"}),u.jsx("p",{className:"text-text-secondary mb-6 max-w-2xl",children:"Here you can clean up typos or remove unused sample sizes from the suggestion list."}),u.jsxs("form",{onSubmit:x,className:"flex gap-2 mb-6 max-w-md",children:[u.jsx("input",{type:"text",value:l,onChange:b=>c(b.target.value),placeholder:"Add new size (e.g. 24x48)",className:"flex-grow p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-lg text-text-primary placeholder-text-secondary focus:border-primary focus:outline-none transition-all"}),u.jsxs("button",{type:"submit",disabled:!l.trim(),className:"px-6 py-2 bg-primary text-on-primary rounded-full hover:bg-primary-hover disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors font-bold shadow-sm",children:[u.jsx(ac,{size:18}),"Add"]})]}),u.jsxs("div",{className:"max-w-xl space-y-0 divide-y divide-outline/10 border border-outline/10 rounded-xl overflow-hidden",children:[e.map(b=>u.jsxs("div",{className:"bg-surface-container-highest/30 p-4 flex items-center justify-between group hover:bg-surface-container-highest/60 transition-colors",children:[i===b.value?u.jsx("input",{type:"text",value:s,onChange:S=>o(S.target.value),className:"flex-grow p-2 bg-surface-container-high border-b-2 border-primary text-text-primary focus:outline-none",autoFocus:!0}):u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("span",{className:"text-text-primary font-medium",children:b.value}),b.usageCount>0&&u.jsxs("span",{className:"text-xs px-2 py-0.5 bg-surface-container-high text-text-secondary rounded-full border border-outline/10",children:[b.usageCount," variant",b.usageCount!==1?"s":""]})]}),u.jsx("div",{className:"flex items-center gap-2 ml-4",children:i===b.value?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>m(b.value),className:"p-2 text-primary hover:bg-primary/10 rounded-full transition-colors",children:u.jsx(Cs,{size:18})}),u.jsx("button",{onClick:p,className:"p-2 text-error hover:bg-error/10 rounded-full transition-colors",children:u.jsx(tn,{size:18})})]}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>f(b.value),className:"p-2 text-text-secondary hover:text-primary hover:bg-primary/10 rounded-full transition-colors",children:u.jsx(ip,{size:18})}),u.jsx("button",{onClick:()=>y(b.value),disabled:b.usageCount>0,title:b.usageCount>0?"Cannot delete size currently in use":"Delete size",className:`p-2 rounded-full transition-colors ${b.usageCount>0?"text-outline/40 cursor-not-allowed":"text-error/80 hover:text-error hover:bg-error/10"}`,children:u.jsx(wo,{size:18})})]})})]},b.value)),e.length===0&&!r&&u.jsx("p",{className:"text-text-secondary italic text-center py-4",children:"No custom sizes have been created yet."})]})]})},lVe=async e=>{try{return(await cr.post(rr("/api/reports/dashboard/send-test"),{settings:e})).data}catch(t){throw console.error("Error sending test dashboard email:",t),t}},cVe=async(e={})=>{try{return(await cr.get(rr("/api/report-generator/products"),{params:e})).data}catch(t){throw console.error("Error fetching product report:",t),t}},uVe=async(e={})=>{try{return(await cr.get(rr("/api/report-generator/jobs"),{params:e})).data}catch(t){throw console.error("Error fetching job report:",t),t}},dVe=async(e={})=>{try{return(await cr.get(rr("/api/report-generator/installers"),{params:e})).data}catch(t){throw console.error("Error fetching installer report:",t),t}},iX={isEnabled:!1,includeAllUpdates:!0,includePersonalAppointments:!0,personalAppointmentsDays:7,frequency:"daily",includeSamplesDue:!0,includeUpcomingJobs:!0,upcomingJobsDays:7,includePendingQuotes:!0,pendingQuotesDays:14},fVe=()=>{const{currentUser:e,saveCurrentUserPreferences:t,isDataLoading:r}=Xr(),[n,i]=I.useState(iX),[a,s]=I.useState(!0),[o,l]=I.useState(!0),[c,d]=I.useState(!1);I.useEffect(()=>{var x,y;if(!r&&e){const b=((x=e.preferences)==null?void 0:x.dashboardEmail)||{};i({...iX,...b}),s(((y=e.preferences)==null?void 0:y.notifyUpcomingJobs)!==!1),l(!1)}},[e,r]);const f=(x,y)=>{let b=y;x==="personalAppointmentsDays"&&(b=Math.max(1,parseInt(y,10)||1)),i(x==="includeAllUpdates"?S=>({...S,[x]:b,includeSamplesDue:b,includeUpcomingJobs:b,includePendingQuotes:b}):S=>({...S,[x]:b}))},p=async()=>{if(!e){Kr.error("User not found.");return}const x={...e.preferences,dashboardEmail:n,notifyUpcomingJobs:a};await t(x)},m=async()=>{var x,y;d(!0),Kr.loading("Sending test email...");try{await lVe(n),Kr.dismiss(),Kr.success(`Test email sent to ${e==null?void 0:e.email}!`)}catch(b){Kr.dismiss();const S=((y=(x=b.response)==null?void 0:x.data)==null?void 0:y.error)||"An unknown error occurred.";Kr.error(`Failed to send test: ${S}`)}finally{d(!1)}};return o?u.jsx("div",{className:"text-center p-8",children:"Loading settings..."}):u.jsxs("div",{className:"space-y-8 max-w-5xl mx-auto",children:[u.jsxs("section",{className:"md:bg-surface-container-low md:p-8 md:rounded-2xl md:border md:border-outline/10 transition-all",children:[u.jsxs("h2",{className:"text-2xl font-semibold text-text-primary mb-2 flex items-center gap-3",children:[u.jsx(kS,{className:"w-7 h-7 text-accent"}),"My Daily Update Email"]}),u.jsx("p",{className:"text-text-secondary mb-6",children:"Configure a daily summary email with system updates and your personal appointments. This email is sent only to you."}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between py-6 border-b border-outline/10 md:border md:bg-surface-container-highest md:rounded-xl md:p-6 md:border-outline/10",children:[u.jsx("label",{htmlFor:"isEnabled",className:"font-medium text-lg text-text-primary",children:"Receive Daily Update Email"}),u.jsxs("div",{className:"relative inline-block w-14 h-8 align-middle select-none transition duration-200 ease-in",children:[u.jsx("input",{type:"checkbox",id:"isEnabled",checked:n.isEnabled,onChange:x=>f("isEnabled",x.target.checked),className:"peer absolute block w-8 h-8 rounded-full bg-surface border-4 border-outline appearance-none cursor-pointer checked:right-0 checked:border-primary checked:bg-primary transition-all duration-200"}),u.jsx("label",{htmlFor:"isEnabled",className:"block overflow-hidden h-8 rounded-full bg-surface-container-highest border border-outline/20 cursor-pointer peer-checked:bg-primary/20 transition-colors"})]})]}),n.isEnabled&&u.jsx("div",{className:"space-y-6 pt-2",children:u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-medium text-text-primary mb-2",children:"Content to Include"}),u.jsxs("div",{className:"space-y-4 py-4 md:p-6 md:bg-surface-container-highest md:rounded-xl md:border md:border-outline/10",children:[u.jsxs("label",{className:"flex items-center gap-3",children:[u.jsx("input",{type:"checkbox",checked:n.includeAllUpdates,onChange:x=>f("includeAllUpdates",x.target.checked),className:"w-5 h-5 rounded border-outline/30 text-primary focus:ring-primary bg-surface-container-high"}),u.jsx("span",{className:"text-text-primary",children:"Include all system updates (samples, jobs, quotes, etc.)"})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("input",{type:"checkbox",id:"includePersonalAppointments",checked:n.includePersonalAppointments,onChange:x=>f("includePersonalAppointments",x.target.checked),className:"w-5 h-5 rounded border-outline/30 text-primary focus:ring-primary bg-surface-container-high"}),u.jsx("label",{htmlFor:"includePersonalAppointments",className:"text-text-primary",children:"Include my personal appointments for the next"}),u.jsx("input",{type:"number",value:n.personalAppointmentsDays,onChange:x=>f("personalAppointmentsDays",x.target.value),disabled:!n.includePersonalAppointments,className:"w-16 p-1 bg-surface-container-high border border-outline/20 rounded text-center text-text-primary disabled:opacity-50 focus:border-primary focus:outline-none"}),u.jsx("label",{htmlFor:"includePersonalAppointments",className:"text-text-primary",children:"days"})]})]})]})}),u.jsx("div",{className:"flex justify-end items-center gap-4 pt-4 mt-4 border-t border-outline/10",children:u.jsxs("button",{onClick:m,disabled:c,className:"flex items-center gap-2 py-2 px-6 text-sm bg-surface-container-highest hover:bg-surface-container-highest/80 rounded-full text-text-primary font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[u.jsx(Sy,{size:18})," ",c?"Sending...":"Send Test"]})})]})]}),u.jsxs("section",{className:"md:bg-surface-container-low md:p-8 md:rounded-2xl md:border md:border-outline/10 transition-all",children:[u.jsxs("h2",{className:"text-xl font-semibold text-text-primary mb-2 flex items-center gap-3",children:[u.jsx(kS,{className:"w-6 h-6 text-accent"}),"Project Alerts"]}),u.jsxs("div",{className:"py-6 border-b border-outline/10 md:border md:bg-surface-container-highest md:rounded-xl md:p-6 md:border-outline/10 mt-4",children:[u.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:a,onChange:x=>s(x.target.checked),className:"w-5 h-5 rounded border-outline/30 text-primary focus:ring-primary bg-surface-container-high"}),u.jsx("span",{className:"text-text-primary font-medium",children:"Email me 2 days before my jobs start"})]}),u.jsx("p",{className:"text-xs text-text-secondary mt-2 ml-8",children:"If enabled, you will receive an individual email reminder for every project where you are assigned as the Project Lead."})]}),u.jsx("div",{className:"flex justify-end pt-8",children:u.jsxs("button",{onClick:p,className:"flex items-center gap-2 py-3 px-8 text-base bg-primary hover:bg-primary-hover rounded-full text-on-primary font-bold shadow-sm transition-all hover:shadow-md",children:[u.jsx(Cs,{size:18})," Save My Settings"]})})]})]})},H_=()=>({withCredentials:!0,headers:{"Content-Type":"application/json"}}),tv={getAll:async()=>(await cr.get(rr("/api/email-templates"),H_())).data,getByKey:async e=>(await cr.get(rr(`/api/email-templates/${e}`),H_())).data,update:async(e,t)=>(await cr.put(rr(`/api/email-templates/${e}`),t,H_())).data,sendTest:async(e,t)=>{await cr.post(rr(`/api/email-templates/${e}/test`),{email:t},H_())}};var xue={exports:{}},vue={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ny=I;function hVe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pVe=typeof Object.is=="function"?Object.is:hVe,mVe=Ny.useState,gVe=Ny.useEffect,xVe=Ny.useLayoutEffect,vVe=Ny.useDebugValue;function yVe(e,t){var r=t(),n=mVe({inst:{value:r,getSnapshot:t}}),i=n[0].inst,a=n[1];return xVe(function(){i.value=r,i.getSnapshot=t,kD(i)&&a({inst:i})},[e,r,t]),gVe(function(){return kD(i)&&a({inst:i}),e(function(){kD(i)&&a({inst:i})})},[e]),vVe(r),r}function kD(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!pVe(e,r)}catch{return!0}}function bVe(e,t){return t()}var wVe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?bVe:yVe;vue.useSyncExternalStore=Ny.useSyncExternalStore!==void 0?Ny.useSyncExternalStore:wVe;xue.exports=vue;var Z9=xue.exports;function Ds(e){this.content=e}Ds.prototype={constructor:Ds,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,r){var n=r&&r!=e?this.remove(r):this,i=n.find(e),a=n.content.slice();return i==-1?a.push(r||e,t):(a[i+1]=t,r&&(a[i]=r)),new Ds(a)},remove:function(e){var t=this.find(e);if(t==-1)return this;var r=this.content.slice();return r.splice(t,2),new Ds(r)},addToStart:function(e,t){return new Ds([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var r=this.remove(e).content.slice();return r.push(e,t),new Ds(r)},addBefore:function(e,t,r){var n=this.remove(t),i=n.content.slice(),a=n.find(e);return i.splice(a==-1?i.length:a,0,t,r),new Ds(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=Ds.from(e),e.size?new Ds(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=Ds.from(e),e.size?new Ds(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Ds.from(e);for(var r=0;r<e.content.length;r+=2)t=t.remove(e.content[r]);return t},toObject:function(){var e={};return this.forEach(function(t,r){e[t]=r}),e},get size(){return this.content.length>>1}};Ds.from=function(e){if(e instanceof Ds)return e;var t=[];if(e)for(var r in e)t.push(r,e[r]);return new Ds(t)};function yue(e,t,r){for(let n=0;;n++){if(n==e.childCount||n==t.childCount)return e.childCount==t.childCount?null:r;let i=e.child(n),a=t.child(n);if(i==a){r+=i.nodeSize;continue}if(!i.sameMarkup(a))return r;if(i.isText&&i.text!=a.text){for(let s=0;i.text[s]==a.text[s];s++)r++;return r}if(i.content.size||a.content.size){let s=yue(i.content,a.content,r+1);if(s!=null)return s}r+=i.nodeSize}}function bue(e,t,r,n){for(let i=e.childCount,a=t.childCount;;){if(i==0||a==0)return i==a?null:{a:r,b:n};let s=e.child(--i),o=t.child(--a),l=s.nodeSize;if(s==o){r-=l,n-=l;continue}if(!s.sameMarkup(o))return{a:r,b:n};if(s.isText&&s.text!=o.text){let c=0,d=Math.min(s.text.length,o.text.length);for(;c<d&&s.text[s.text.length-c-1]==o.text[o.text.length-c-1];)c++,r--,n--;return{a:r,b:n}}if(s.content.size||o.content.size){let c=bue(s.content,o.content,r-1,n-1);if(c)return c}r-=l,n-=l}}class It{constructor(t,r){if(this.content=t,this.size=r||0,r==null)for(let n=0;n<t.length;n++)this.size+=t[n].nodeSize}nodesBetween(t,r,n,i=0,a){for(let s=0,o=0;o<r;s++){let l=this.content[s],c=o+l.nodeSize;if(c>t&&n(l,i+o,a||null,s)!==!1&&l.content.size){let d=o+1;l.nodesBetween(Math.max(0,t-d),Math.min(l.content.size,r-d),n,i+d)}o=c}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,r,n,i){let a="",s=!0;return this.nodesBetween(t,r,(o,l)=>{let c=o.isText?o.text.slice(Math.max(t,l)-l,r-l):o.isLeaf?i?typeof i=="function"?i(o):i:o.type.spec.leafText?o.type.spec.leafText(o):"":"";o.isBlock&&(o.isLeaf&&c||o.isTextblock)&&n&&(s?s=!1:a+=n),a+=c},0),a}append(t){if(!t.size)return this;if(!this.size)return t;let r=this.lastChild,n=t.firstChild,i=this.content.slice(),a=0;for(r.isText&&r.sameMarkup(n)&&(i[i.length-1]=r.withText(r.text+n.text),a=1);a<t.content.length;a++)i.push(t.content[a]);return new It(i,this.size+t.size)}cut(t,r=this.size){if(t==0&&r==this.size)return this;let n=[],i=0;if(r>t)for(let a=0,s=0;s<r;a++){let o=this.content[a],l=s+o.nodeSize;l>t&&((s<t||l>r)&&(o.isText?o=o.cut(Math.max(0,t-s),Math.min(o.text.length,r-s)):o=o.cut(Math.max(0,t-s-1),Math.min(o.content.size,r-s-1))),n.push(o),i+=o.nodeSize),s=l}return new It(n,i)}cutByIndex(t,r){return t==r?It.empty:t==0&&r==this.content.length?this:new It(this.content.slice(t,r))}replaceChild(t,r){let n=this.content[t];if(n==r)return this;let i=this.content.slice(),a=this.size+r.nodeSize-n.nodeSize;return i[t]=r,new It(i,a)}addToStart(t){return new It([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new It(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(t.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let r=this.content[t];if(!r)throw new RangeError("Index "+t+" out of range for "+this);return r}maybeChild(t){return this.content[t]||null}forEach(t){for(let r=0,n=0;r<this.content.length;r++){let i=this.content[r];t(i,n,r),n+=i.nodeSize}}findDiffStart(t,r=0){return yue(this,t,r)}findDiffEnd(t,r=this.size,n=t.size){return bue(this,t,r,n)}findIndex(t){if(t==0)return W_(0,t);if(t==this.size)return W_(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let r=0,n=0;;r++){let i=this.child(r),a=n+i.nodeSize;if(a>=t)return a==t?W_(r+1,a):W_(r,n);n=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,r){if(!r)return It.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new It(r.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return It.empty;let r,n=0;for(let i=0;i<t.length;i++){let a=t[i];n+=a.nodeSize,i&&a.isText&&t[i-1].sameMarkup(a)?(r||(r=t.slice(0,i)),r[r.length-1]=a.withText(r[r.length-1].text+a.text)):r&&r.push(a)}return new It(r||t,n)}static from(t){if(!t)return It.empty;if(t instanceof It)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new It([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}It.empty=new It([],0);const _D={index:0,offset:0};function W_(e,t){return _D.index=e,_D.offset=t,_D}function LT(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let r=Array.isArray(e);if(Array.isArray(t)!=r)return!1;if(r){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!LT(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!LT(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}let pi=class J8{constructor(t,r){this.type=t,this.attrs=r}addToSet(t){let r,n=!1;for(let i=0;i<t.length;i++){let a=t[i];if(this.eq(a))return t;if(this.type.excludes(a.type))r||(r=t.slice(0,i));else{if(a.type.excludes(this.type))return t;!n&&a.type.rank>this.type.rank&&(r||(r=t.slice(0,i)),r.push(this),n=!0),r&&r.push(a)}}return r||(r=t.slice()),n||r.push(this),r}removeFromSet(t){for(let r=0;r<t.length;r++)if(this.eq(t[r]))return t.slice(0,r).concat(t.slice(r+1));return t}isInSet(t){for(let r=0;r<t.length;r++)if(this.eq(t[r]))return!0;return!1}eq(t){return this==t||this.type==t.type&&LT(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let r in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let n=t.marks[r.type];if(!n)throw new RangeError(`There is no mark type ${r.type} in this schema`);let i=n.create(r.attrs);return n.checkAttrs(i.attrs),i}static sameSet(t,r){if(t==r)return!0;if(t.length!=r.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].eq(r[n]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return J8.none;if(t instanceof J8)return[t];let r=t.slice();return r.sort((n,i)=>n.type.rank-i.type.rank),r}};pi.none=[];class BT extends Error{}class Vt{constructor(t,r,n){this.content=t,this.openStart=r,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,r){let n=Sue(this.content,t+this.openStart,r);return n&&new Vt(n,this.openStart,this.openEnd)}removeBetween(t,r){return new Vt(wue(this.content,t+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,r){if(!r)return Vt.empty;let n=r.openStart||0,i=r.openEnd||0;if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Vt(It.fromJSON(t,r.content),n,i)}static maxOpen(t,r=!0){let n=0,i=0;for(let a=t.firstChild;a&&!a.isLeaf&&(r||!a.type.spec.isolating);a=a.firstChild)n++;for(let a=t.lastChild;a&&!a.isLeaf&&(r||!a.type.spec.isolating);a=a.lastChild)i++;return new Vt(t,n,i)}}Vt.empty=new Vt(It.empty,0,0);function wue(e,t,r){let{index:n,offset:i}=e.findIndex(t),a=e.maybeChild(n),{index:s,offset:o}=e.findIndex(r);if(i==t||a.isText){if(o!=r&&!e.child(s).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(r))}if(n!=s)throw new RangeError("Removing non-flat range");return e.replaceChild(n,a.copy(wue(a.content,t-i-1,r-i-1)))}function Sue(e,t,r,n){let{index:i,offset:a}=e.findIndex(t),s=e.maybeChild(i);if(a==t||s.isText)return n&&!n.canReplace(i,i,r)?null:e.cut(0,t).append(r).append(e.cut(t));let o=Sue(s.content,t-a-1,r,s);return o&&e.replaceChild(i,s.copy(o))}function SVe(e,t,r){if(r.openStart>e.depth)throw new BT("Inserted content deeper than insertion position");if(e.depth-r.openStart!=t.depth-r.openEnd)throw new BT("Inconsistent open depths");return Eue(e,t,r,0)}function Eue(e,t,r,n){let i=e.index(n),a=e.node(n);if(i==t.index(n)&&n<e.depth-r.openStart){let s=Eue(e,t,r,n+1);return a.copy(a.content.replaceChild(i,s))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&e.depth==n&&t.depth==n){let s=e.parent,o=s.content;return Lg(s,o.cut(0,e.parentOffset).append(r.content).append(o.cut(t.parentOffset)))}else{let{start:s,end:o}=EVe(r,e);return Lg(a,kue(e,s,o,t,n))}else return Lg(a,UT(e,t,n))}function Cue(e,t){if(!t.type.compatibleContent(e.type))throw new BT("Cannot join "+t.type.name+" onto "+e.type.name)}function Z8(e,t,r){let n=e.node(r);return Cue(n,t.node(r)),n}function Fg(e,t){let r=t.length-1;r>=0&&e.isText&&e.sameMarkup(t[r])?t[r]=e.withText(t[r].text+e.text):t.push(e)}function R2(e,t,r,n){let i=(t||e).node(r),a=0,s=t?t.index(r):i.childCount;e&&(a=e.index(r),e.depth>r?a++:e.textOffset&&(Fg(e.nodeAfter,n),a++));for(let o=a;o<s;o++)Fg(i.child(o),n);t&&t.depth==r&&t.textOffset&&Fg(t.nodeBefore,n)}function Lg(e,t){return e.type.checkContent(t),e.copy(t)}function kue(e,t,r,n,i){let a=e.depth>i&&Z8(e,t,i+1),s=n.depth>i&&Z8(r,n,i+1),o=[];return R2(null,e,i,o),a&&s&&t.index(i)==r.index(i)?(Cue(a,s),Fg(Lg(a,kue(e,t,r,n,i+1)),o)):(a&&Fg(Lg(a,UT(e,t,i+1)),o),R2(t,r,i,o),s&&Fg(Lg(s,UT(r,n,i+1)),o)),R2(n,null,i,o),new It(o)}function UT(e,t,r){let n=[];if(R2(null,e,r,n),e.depth>r){let i=Z8(e,t,r+1);Fg(Lg(i,UT(e,t,r+1)),n)}return R2(t,null,r,n),new It(n)}function EVe(e,t){let r=t.depth-e.openStart,i=t.node(r).copy(e.content);for(let a=r-1;a>=0;a--)i=t.node(a).copy(It.from(i));return{start:i.resolveNoCache(e.openStart+r),end:i.resolveNoCache(i.content.size-e.openEnd-r)}}class RS{constructor(t,r,n){this.pos=t,this.path=r,this.parentOffset=n,this.depth=r.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,r=this.index(this.depth);if(r==t.childCount)return null;let n=this.pos-this.path[this.path.length-1],i=t.child(r);return n?t.child(r).cut(n):i}get nodeBefore(){let t=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(t).cut(0,r):t==0?null:this.parent.child(t-1)}posAtIndex(t,r){r=this.resolveDepth(r);let n=this.path[r*3],i=r==0?0:this.path[r*3-1]+1;for(let a=0;a<t;a++)i+=n.child(a).nodeSize;return i}marks(){let t=this.parent,r=this.index();if(t.content.size==0)return pi.none;if(this.textOffset)return t.child(r).marks;let n=t.maybeChild(r-1),i=t.maybeChild(r);if(!n){let o=n;n=i,i=o}let a=n.marks;for(var s=0;s<a.length;s++)a[s].type.spec.inclusive===!1&&(!i||!a[s].isInSet(i.marks))&&(a=a[s--].removeFromSet(a));return a}marksAcross(t){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let n=r.marks,i=t.parent.maybeChild(t.index());for(var a=0;a<n.length;a++)n[a].type.spec.inclusive===!1&&(!i||!n[a].isInSet(i.marks))&&(n=n[a--].removeFromSet(n));return n}sharedDepth(t){for(let r=this.depth;r>0;r--)if(this.start(r)<=t&&this.end(r)>=t)return r;return 0}blockRange(t=this,r){if(t.pos<this.pos)return t.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!r||r(this.node(n))))return new $T(this,t,n);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let r=1;r<=this.depth;r++)t+=(t?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return t+":"+this.parentOffset}static resolve(t,r){if(!(r>=0&&r<=t.content.size))throw new RangeError("Position "+r+" out of range");let n=[],i=0,a=r;for(let s=t;;){let{index:o,offset:l}=s.content.findIndex(a),c=a-l;if(n.push(s,o,i+l),!c||(s=s.child(o),s.isText))break;a=c-1,i+=l+1}return new RS(r,n,a)}static resolveCached(t,r){let n=aX.get(t);if(n)for(let a=0;a<n.elts.length;a++){let s=n.elts[a];if(s.pos==r)return s}else aX.set(t,n=new CVe);let i=n.elts[n.i]=RS.resolve(t,r);return n.i=(n.i+1)%kVe,i}}class CVe{constructor(){this.elts=[],this.i=0}}const kVe=12,aX=new WeakMap;class $T{constructor(t,r,n){this.$from=t,this.$to=r,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const _Ve=Object.create(null);let Nh=class eF{constructor(t,r,n,i=pi.none){this.type=t,this.attrs=r,this.marks=i,this.content=n||It.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,r,n,i=0){this.content.nodesBetween(t,r,n,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,r,n,i){return this.content.textBetween(t,r,n,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,r,n){return this.type==t&&LT(this.attrs,r||t.defaultAttrs||_Ve)&&pi.sameSet(this.marks,n||pi.none)}copy(t=null){return t==this.content?this:new eF(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new eF(this.type,this.attrs,this.content,t)}cut(t,r=this.content.size){return t==0&&r==this.content.size?this:this.copy(this.content.cut(t,r))}slice(t,r=this.content.size,n=!1){if(t==r)return Vt.empty;let i=this.resolve(t),a=this.resolve(r),s=n?0:i.sharedDepth(r),o=i.start(s),c=i.node(s).content.cut(i.pos-o,a.pos-o);return new Vt(c,i.depth-s,a.depth-s)}replace(t,r,n){return SVe(this.resolve(t),this.resolve(r),n)}nodeAt(t){for(let r=this;;){let{index:n,offset:i}=r.content.findIndex(t);if(r=r.maybeChild(n),!r)return null;if(i==t||r.isText)return r;t-=i+1}}childAfter(t){let{index:r,offset:n}=this.content.findIndex(t);return{node:this.content.maybeChild(r),index:r,offset:n}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:r,offset:n}=this.content.findIndex(t);if(n<t)return{node:this.content.child(r),index:r,offset:n};let i=this.content.child(r-1);return{node:i,index:r-1,offset:n-i.nodeSize}}resolve(t){return RS.resolveCached(this,t)}resolveNoCache(t){return RS.resolve(this,t)}rangeHasMark(t,r,n){let i=!1;return r>t&&this.nodesBetween(t,r,a=>(n.isInSet(a.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),_ue(this.marks,t)}contentMatchAt(t){let r=this.type.contentMatch.matchFragment(this.content,0,t);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(t,r,n=It.empty,i=0,a=n.childCount){let s=this.contentMatchAt(t).matchFragment(n,i,a),o=s&&s.matchFragment(this.content,r);if(!o||!o.validEnd)return!1;for(let l=i;l<a;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0}canReplaceWith(t,r,n,i){if(i&&!this.type.allowsMarks(i))return!1;let a=this.contentMatchAt(t).matchType(n),s=a&&a.matchFragment(this.content,r);return s?s.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=pi.none;for(let r=0;r<this.marks.length;r++){let n=this.marks[r];n.type.checkAttrs(n.attrs),t=n.addToSet(t)}if(!pi.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let t={type:this.type.name};for(let r in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(r=>r.toJSON())),t}static fromJSON(t,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let n;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=r.marks.map(t.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(r.text,n)}let i=It.fromJSON(t,r.content),a=t.nodeType(r.type).create(r.attrs,i,n);return a.type.checkAttrs(a.attrs),a}};Nh.prototype.text=void 0;class zT extends Nh{constructor(t,r,n,i){if(super(t,r,null,i),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):_ue(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,r){return this.text.slice(t,r)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new zT(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new zT(this.type,this.attrs,t,this.marks)}cut(t=0,r=this.text.length){return t==0&&r==this.text.length?this:this.withText(this.text.slice(t,r))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function _ue(e,t){for(let r=e.length-1;r>=0;r--)t=e[r].type.name+"("+t+")";return t}class mx{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,r){let n=new NVe(t,r);if(n.next==null)return mx.empty;let i=Nue(n);n.next&&n.err("Unexpected trailing text");let a=jVe(RVe(i));return DVe(a,n),a}matchType(t){for(let r=0;r<this.next.length;r++)if(this.next[r].type==t)return this.next[r].next;return null}matchFragment(t,r=0,n=t.childCount){let i=this;for(let a=r;i&&a<n;a++)i=i.matchType(t.child(a).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:r}=this.next[t];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(t){for(let r=0;r<this.next.length;r++)for(let n=0;n<t.next.length;n++)if(this.next[r].type==t.next[n].type)return!0;return!1}fillBefore(t,r=!1,n=0){let i=[this];function a(s,o){let l=s.matchFragment(t,n);if(l&&(!r||l.validEnd))return It.from(o.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:d,next:f}=s.next[c];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let p=a(f,o.concat(d));if(p)return p}}return null}return a(this,[])}findWrapping(t){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==t)return this.wrapCache[n+1];let r=this.computeWrapping(t);return this.wrapCache.push(t,r),r}computeWrapping(t){let r=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let i=n.shift(),a=i.match;if(a.matchType(t)){let s=[];for(let o=i;o.type;o=o.via)s.push(o.type);return s.reverse()}for(let s=0;s<a.next.length;s++){let{type:o,next:l}=a.next[s];!o.isLeaf&&!o.hasRequiredAttrs()&&!(o.name in r)&&(!i.type||l.validEnd)&&(n.push({match:o.contentMatch,type:o,via:i}),r[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function r(n){t.push(n);for(let i=0;i<n.next.length;i++)t.indexOf(n.next[i].next)==-1&&r(n.next[i].next)}return r(this),t.map((n,i)=>{let a=i+(n.validEnd?"*":" ")+" ";for(let s=0;s<n.next.length;s++)a+=(s?", ":"")+n.next[s].type.name+"->"+t.indexOf(n.next[s].next);return a}).join(`
`)}}mx.empty=new mx(!0);class NVe{constructor(t,r){this.string=t,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function Nue(e){let t=[];do t.push(AVe(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function AVe(e){let t=[];do t.push(TVe(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function TVe(e){let t=PVe(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=IVe(e,t);else break;return t}function sX(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function IVe(e,t){let r=sX(e),n=r;return e.eat(",")&&(e.next!="}"?n=sX(e):n=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:t}}function OVe(e,t){let r=e.nodeTypes,n=r[t];if(n)return[n];let i=[];for(let a in r){let s=r[a];s.isInGroup(t)&&i.push(s)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function PVe(e){if(e.eat("(")){let t=Nue(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=OVe(e,e.next).map(r=>(e.inline==null?e.inline=r.isInline:e.inline!=r.isInline&&e.err("Mixing inline and block content"),{type:"name",value:r}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function RVe(e){let t=[[]];return i(a(e,0),r()),t;function r(){return t.push([])-1}function n(s,o,l){let c={term:l,to:o};return t[s].push(c),c}function i(s,o){s.forEach(l=>l.to=o)}function a(s,o){if(s.type=="choice")return s.exprs.reduce((l,c)=>l.concat(a(c,o)),[]);if(s.type=="seq")for(let l=0;;l++){let c=a(s.exprs[l],o);if(l==s.exprs.length-1)return c;i(c,o=r())}else if(s.type=="star"){let l=r();return n(o,l),i(a(s.expr,l),l),[n(l)]}else if(s.type=="plus"){let l=r();return i(a(s.expr,o),l),i(a(s.expr,l),l),[n(l)]}else{if(s.type=="opt")return[n(o)].concat(a(s.expr,o));if(s.type=="range"){let l=o;for(let c=0;c<s.min;c++){let d=r();i(a(s.expr,l),d),l=d}if(s.max==-1)i(a(s.expr,l),l);else for(let c=s.min;c<s.max;c++){let d=r();n(l,d),i(a(s.expr,l),d),l=d}return[n(l)]}else{if(s.type=="name")return[n(o,void 0,s.value)];throw new Error("Unknown expr type")}}}}function Aue(e,t){return t-e}function oX(e,t){let r=[];return n(t),r.sort(Aue);function n(i){let a=e[i];if(a.length==1&&!a[0].term)return n(a[0].to);r.push(i);for(let s=0;s<a.length;s++){let{term:o,to:l}=a[s];!o&&r.indexOf(l)==-1&&n(l)}}}function jVe(e){let t=Object.create(null);return r(oX(e,0));function r(n){let i=[];n.forEach(s=>{e[s].forEach(({term:o,to:l})=>{if(!o)return;let c;for(let d=0;d<i.length;d++)i[d][0]==o&&(c=i[d][1]);oX(e,l).forEach(d=>{c||i.push([o,c=[]]),c.indexOf(d)==-1&&c.push(d)})})});let a=t[n.join(",")]=new mx(n.indexOf(e.length-1)>-1);for(let s=0;s<i.length;s++){let o=i[s][1].sort(Aue);a.next.push({type:i[s][0],next:t[o.join(",")]||r(o)})}return a}}function DVe(e,t){for(let r=0,n=[e];r<n.length;r++){let i=n[r],a=!i.validEnd,s=[];for(let o=0;o<i.next.length;o++){let{type:l,next:c}=i.next[o];s.push(l.name),a&&!(l.isText||l.hasRequiredAttrs())&&(a=!1),n.indexOf(c)==-1&&n.push(c)}a&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Tue(e){let t=Object.create(null);for(let r in e){let n=e[r];if(!n.hasDefault)return null;t[r]=n.default}return t}function Iue(e,t){let r=Object.create(null);for(let n in e){let i=t&&t[n];if(i===void 0){let a=e[n];if(a.hasDefault)i=a.default;else throw new RangeError("No value supplied for attribute "+n)}r[n]=i}return r}function Oue(e,t,r,n){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${r} of type ${i}`);for(let i in e){let a=e[i];a.validate&&a.validate(t[i])}}function Pue(e,t){let r=Object.create(null);if(t)for(let n in t)r[n]=new FVe(e,n,t[n]);return r}let lX=class Rue{constructor(t,r,n){this.name=t,this.schema=r,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=Pue(t,n.attrs),this.defaultAttrs=Tue(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==mx.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:Iue(this.attrs,t)}create(t=null,r,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Nh(this,this.computeAttrs(t),It.from(r),pi.setFrom(n))}createChecked(t=null,r,n){return r=It.from(r),this.checkContent(r),new Nh(this,this.computeAttrs(t),r,pi.setFrom(n))}createAndFill(t=null,r,n){if(t=this.computeAttrs(t),r=It.from(r),r.size){let s=this.contentMatch.fillBefore(r);if(!s)return null;r=s.append(r)}let i=this.contentMatch.matchFragment(r),a=i&&i.fillBefore(It.empty,!0);return a?new Nh(this,t,r.append(a),pi.setFrom(n)):null}validContent(t){let r=this.contentMatch.matchFragment(t);if(!r||!r.validEnd)return!1;for(let n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){Oue(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let r=0;r<t.length;r++)if(!this.allowsMarkType(t[r].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let r;for(let n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?r&&r.push(t[n]):r||(r=t.slice(0,n));return r?r.length?r:pi.none:t}static compile(t,r){let n=Object.create(null);t.forEach((a,s)=>n[a]=new Rue(a,r,s));let i=r.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let a in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function MVe(e,t,r){let n=r.split("|");return i=>{let a=i===null?"null":typeof i;if(n.indexOf(a)<0)throw new RangeError(`Expected value of type ${n} for attribute ${t} on type ${e}, got ${a}`)}}class FVe{constructor(t,r,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?MVe(t,r,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class C3{constructor(t,r,n,i){this.name=t,this.rank=r,this.schema=n,this.spec=i,this.attrs=Pue(t,i.attrs),this.excluded=null;let a=Tue(this.attrs);this.instance=a?new pi(this,a):null}create(t=null){return!t&&this.instance?this.instance:new pi(this,Iue(this.attrs,t))}static compile(t,r){let n=Object.create(null),i=0;return t.forEach((a,s)=>n[a]=new C3(a,i++,r,s)),n}removeFromSet(t){for(var r=0;r<t.length;r++)t[r].type==this&&(t=t.slice(0,r).concat(t.slice(r+1)),r--);return t}isInSet(t){for(let r=0;r<t.length;r++)if(t[r].type==this)return t[r]}checkAttrs(t){Oue(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class jue{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let i in t)r[i]=t[i];r.nodes=Ds.from(t.nodes),r.marks=Ds.from(t.marks||{}),this.nodes=lX.compile(this.spec.nodes,this),this.marks=C3.compile(this.spec.marks,this);let n=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let a=this.nodes[i],s=a.spec.content||"",o=a.spec.marks;if(a.contentMatch=n[s]||(n[s]=mx.parse(s,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet=o=="_"?null:o?cX(this,o.split(" ")):o==""||!a.inlineContent?[]:null}for(let i in this.marks){let a=this.marks[i],s=a.spec.excludes;a.excluded=s==null?[a]:s==""?[]:cX(this,s.split(" "))}this.nodeFromJSON=i=>Nh.fromJSON(this,i),this.markFromJSON=i=>pi.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,r=null,n,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof lX){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(r,n,i)}text(t,r){let n=this.nodes.text;return new zT(n,n.defaultAttrs,t,pi.setFrom(r))}mark(t,r){return typeof t=="string"&&(t=this.marks[t]),t.create(r)}nodeType(t){let r=this.nodes[t];if(!r)throw new RangeError("Unknown node type: "+t);return r}}function cX(e,t){let r=[];for(let n=0;n<t.length;n++){let i=t[n],a=e.marks[i],s=a;if(a)r.push(a);else for(let o in e.marks){let l=e.marks[o];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&r.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[n]+"'")}return r}function LVe(e){return e.tag!=null}function BVe(e){return e.style!=null}let j2=class tF{constructor(t,r){this.schema=t,this.rules=r,this.tags=[],this.styles=[];let n=this.matchedStyles=[];r.forEach(i=>{if(LVe(i))this.tags.push(i);else if(BVe(i)){let a=/[^=]*/.exec(i.style)[0];n.indexOf(a)<0&&n.push(a),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let a=t.nodes[i.node];return a.contentMatch.matchType(a)})}parse(t,r={}){let n=new dX(this,r,!1);return n.addAll(t,pi.none,r.from,r.to),n.finish()}parseSlice(t,r={}){let n=new dX(this,r,!0);return n.addAll(t,pi.none,r.from,r.to),Vt.maxOpen(n.finish())}matchTag(t,r,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let a=this.tags[i];if(zVe(t,a.tag)&&(a.namespace===void 0||t.namespaceURI==a.namespace)&&(!a.context||r.matchesContext(a.context))){if(a.getAttrs){let s=a.getAttrs(t);if(s===!1)continue;a.attrs=s||void 0}return a}}}matchStyle(t,r,n,i){for(let a=i?this.styles.indexOf(i)+1:0;a<this.styles.length;a++){let s=this.styles[a],o=s.style;if(!(o.indexOf(t)!=0||s.context&&!n.matchesContext(s.context)||o.length>t.length&&(o.charCodeAt(t.length)!=61||o.slice(t.length+1)!=r))){if(s.getAttrs){let l=s.getAttrs(r);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(t){let r=[];function n(i){let a=i.priority==null?50:i.priority,s=0;for(;s<r.length;s++){let o=r[s];if((o.priority==null?50:o.priority)<a)break}r.splice(s,0,i)}for(let i in t.marks){let a=t.marks[i].spec.parseDOM;a&&a.forEach(s=>{n(s=fX(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in t.nodes){let a=t.nodes[i].spec.parseDOM;a&&a.forEach(s=>{n(s=fX(s)),s.node||s.ignore||s.mark||(s.node=i)})}return r}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new tF(t,tF.schemaRules(t)))}};const Due={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},UVe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Mue={ol:!0,ul:!0},jS=1,rF=2,D2=4;function uX(e,t,r){return t!=null?(t?jS:0)|(t==="full"?rF:0):e&&e.whitespace=="pre"?jS|rF:r&~D2}class V_{constructor(t,r,n,i,a,s){this.type=t,this.attrs=r,this.marks=n,this.solid=i,this.options=s,this.content=[],this.activeMarks=pi.none,this.match=a||(s&D2?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(It.from(t));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let n=this.type.contentMatch,i;return(i=n.findWrapping(t.type))?(this.match=n,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&jS)){let n=this.content[this.content.length-1],i;if(n&&n.isText&&(i=/[ \t\r\n\u000c]+$/.exec(n.text))){let a=n;n.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=a.withText(a.text.slice(0,a.text.length-i[0].length))}}let r=It.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(It.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!Due.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class dX{constructor(t,r,n){this.parser=t,this.options=r,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let i=r.topNode,a,s=uX(null,r.preserveWhitespace,0)|(n?D2:0);i?a=new V_(i.type,i.attrs,pi.none,!0,r.topMatch||i.type.contentMatch,s):n?a=new V_(null,null,pi.none,!0,null,s):a=new V_(t.schema.topNodeType,null,pi.none,!0,null,s),this.nodes=[a],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,r){t.nodeType==3?this.addTextNode(t,r):t.nodeType==1&&this.addElement(t,r)}addTextNode(t,r){let n=t.nodeValue,i=this.top,a=i.options&rF?"full":this.localPreserveWS||(i.options&jS)>0,{schema:s}=this.parser;if(a==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(n)){if(a)if(a==="full")n=n.replace(/\r\n?/g,`
`);else if(s.linebreakReplacement&&/[\r\n]/.test(n)&&this.top.findWrapping(s.linebreakReplacement.create())){let o=n.split(/\r?\n|\r/);for(let l=0;l<o.length;l++)l&&this.insertNode(s.linebreakReplacement.create(),r,!0),o[l]&&this.insertNode(s.text(o[l]),r,!/\S/.test(o[l]));n=""}else n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],l=t.previousSibling;(!o||l&&l.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(n=n.slice(1))}n&&this.insertNode(s.text(n),r,!/\S/.test(n)),this.findInText(t)}else this.findInside(t)}addElement(t,r,n){let i=this.localPreserveWS,a=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let s=t.nodeName.toLowerCase(),o;Mue.hasOwnProperty(s)&&this.parser.normalizeLists&&$Ve(t);let l=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(o=this.parser.matchTag(t,this,n));e:if(l?l.ignore:UVe.hasOwnProperty(s))this.findInside(t),this.ignoreFallback(t,r);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(t=l.skip);let c,d=this.needsBlock;if(Due.hasOwnProperty(s))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),c=!0,a.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,r);break e}let f=l&&l.skip?r:this.readStyles(t,r);f&&this.addAll(t,f),c&&this.sync(a),this.needsBlock=d}else{let c=this.readStyles(t,r);c&&this.addElementByRule(t,l,c,l.consuming===!1?o:void 0)}this.localPreserveWS=i}leafFallback(t,r){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),r)}ignoreFallback(t,r){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(t,r){let n=t.style;if(n&&n.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let a=this.parser.matchedStyles[i],s=n.getPropertyValue(a);if(s)for(let o=void 0;;){let l=this.parser.matchStyle(a,s,this,o);if(!l)break;if(l.ignore)return null;if(l.clearMark?r=r.filter(c=>!l.clearMark(c)):r=r.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)o=l;else break}}return r}addElementByRule(t,r,n,i){let a,s;if(r.node)if(s=this.parser.schema.nodes[r.node],s.isLeaf)this.insertNode(s.create(r.attrs),n,t.nodeName=="BR")||this.leafFallback(t,n);else{let l=this.enter(s,r.attrs||null,n,r.preserveWhitespace);l&&(a=!0,n=l)}else{let l=this.parser.schema.marks[r.mark];n=n.concat(l.create(r.attrs))}let o=this.top;if(s&&s.isLeaf)this.findInside(t);else if(i)this.addElement(t,n,i);else if(r.getContent)this.findInside(t),r.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l,n,!1));else{let l=t;typeof r.contentElement=="string"?l=t.querySelector(r.contentElement):typeof r.contentElement=="function"?l=r.contentElement(t):r.contentElement&&(l=r.contentElement),this.findAround(t,l,!0),this.addAll(l,n),this.findAround(t,l,!1)}a&&this.sync(o)&&this.open--}addAll(t,r,n,i){let a=n||0;for(let s=n?t.childNodes[n]:t.firstChild,o=i==null?null:t.childNodes[i];s!=o;s=s.nextSibling,++a)this.findAtPoint(t,a),this.addDOM(s,r);this.findAtPoint(t,a)}findPlace(t,r,n){let i,a;for(let s=this.open,o=0;s>=0;s--){let l=this.nodes[s],c=l.findWrapping(t);if(c&&(!i||i.length>c.length+o)&&(i=c,a=l,!c.length))break;if(l.solid){if(n)break;o+=2}}if(!i)return null;this.sync(a);for(let s=0;s<i.length;s++)r=this.enterInner(i[s],null,r,!1);return r}insertNode(t,r,n){if(t.isInline&&this.needsBlock&&!this.top.type){let a=this.textblockFromContext();a&&(r=this.enterInner(a,null,r))}let i=this.findPlace(t,r,n);if(i){this.closeExtra();let a=this.top;a.match&&(a.match=a.match.matchType(t.type));let s=pi.none;for(let o of i.concat(t.marks))(a.type?a.type.allowsMarkType(o.type):hX(o.type,t.type))&&(s=o.addToSet(s));return a.content.push(t.mark(s)),!0}return!1}enter(t,r,n,i){let a=this.findPlace(t.create(r),n,!1);return a&&(a=this.enterInner(t,r,n,!0,i)),a}enterInner(t,r,n,i=!1,a){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(t);let o=uX(t,a,s.options);s.options&D2&&s.content.length==0&&(o|=D2);let l=pi.none;return n=n.filter(c=>(s.type?s.type.allowsMarkType(c.type):hX(c.type,t))?(l=c.addToSet(l),!1):!0),this.nodes.push(new V_(t,r,l,i,null,o)),this.open++,n}closeExtra(t=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let r=this.open;r>=0;r--){if(this.nodes[r]==t)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=jS)}return!1}get currentPos(){this.closeExtra();let t=0;for(let r=this.open;r>=0;r--){let n=this.nodes[r].content;for(let i=n.length-1;i>=0;i--)t+=n[i].nodeSize;r&&t++}return t}findAtPoint(t,r){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==r&&(this.find[n].pos=this.currentPos)}findInside(t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&t.nodeType==1&&t.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(t,r,n){if(t!=r&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&r.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&(this.find[r].pos=this.currentPos-(t.nodeValue.length-this.find[r].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let r=t.split("/"),n=this.options.context,i=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),a=-(n?n.depth+1:0)+(i?0:1),s=(o,l)=>{for(;o>=0;o--){let c=r[o];if(c==""){if(o==r.length-1||o==0)continue;for(;l>=a;l--)if(s(o-1,l))return!0;return!1}else{let d=l>0||l==0&&i?this.nodes[l].type:n&&l>=a?n.node(l-a).type:null;if(!d||d.name!=c&&!d.isInGroup(c))return!1;l--}}return!0};return s(r.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let r=t.depth;r>=0;r--){let n=t.node(r).contentMatchAt(t.indexAfter(r)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}}}function $Ve(e){for(let t=e.firstChild,r=null;t;t=t.nextSibling){let n=t.nodeType==1?t.nodeName.toLowerCase():null;n&&Mue.hasOwnProperty(n)&&r?(r.appendChild(t),t=r):n=="li"?r=t:n&&(r=null)}}function zVe(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function fX(e){let t={};for(let r in e)t[r]=e[r];return t}function hX(e,t){let r=t.schema.nodes;for(let n in r){let i=r[n];if(!i.allowsMarkType(e))continue;let a=[],s=o=>{a.push(o);for(let l=0;l<o.edgeCount;l++){let{type:c,next:d}=o.edge(l);if(c==t||a.indexOf(d)<0&&s(d))return!0}};if(s(i.contentMatch))return!0}}class n1{constructor(t,r){this.nodes=t,this.marks=r}serializeFragment(t,r={},n){n||(n=ND(r).createDocumentFragment());let i=n,a=[];return t.forEach(s=>{if(a.length||s.marks.length){let o=0,l=0;for(;o<a.length&&l<s.marks.length;){let c=s.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(a[o][0])||c.type.spec.spanning===!1)break;o++,l++}for(;o<a.length;)i=a.pop()[1];for(;l<s.marks.length;){let c=s.marks[l++],d=this.serializeMark(c,s.isInline,r);d&&(a.push([c,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(s,r))}),n}serializeNodeInner(t,r){let{dom:n,contentDOM:i}=oA(ND(r),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,r,i)}return n}serializeNode(t,r={}){let n=this.serializeNodeInner(t,r);for(let i=t.marks.length-1;i>=0;i--){let a=this.serializeMark(t.marks[i],t.isInline,r);a&&((a.contentDOM||a.dom).appendChild(n),n=a.dom)}return n}serializeMark(t,r,n={}){let i=this.marks[t.type.name];return i&&oA(ND(n),i(t,r),null,t.attrs)}static renderSpec(t,r,n=null,i){return oA(t,r,n,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new n1(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let r=pX(t.nodes);return r.text||(r.text=n=>n.text),r}static marksFromSchema(t){return pX(t.marks)}}function pX(e){let t={};for(let r in e){let n=e[r].spec.toDOM;n&&(t[r]=n)}return t}function ND(e){return e.document||window.document}const mX=new WeakMap;function HVe(e){let t=mX.get(e);return t===void 0&&mX.set(e,t=WVe(e)),t}function WVe(e){let t=null;function r(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")t||(t=[]),t.push(n);else for(let i=0;i<n.length;i++)r(n[i]);else for(let i in n)r(n[i])}return r(e),t}function oA(e,t,r,n){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],a;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(a=HVe(n))&&a.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(r=i.slice(0,s),i=i.slice(s+1));let o,l=r?e.createElementNS(r,i):e.createElement(i),c=t[1],d=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){d=2;for(let f in c)if(c[f]!=null){let p=f.indexOf(" ");p>0?l.setAttributeNS(f.slice(0,p),f.slice(p+1),c[f]):f=="style"&&l.style?l.style.cssText=c[f]:l.setAttribute(f,c[f])}}for(let f=d;f<t.length;f++){let p=t[f];if(p===0){if(f<t.length-1||f>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:m,contentDOM:x}=oA(e,p,r,n);if(l.appendChild(m),x){if(o)throw new RangeError("Multiple content holes");o=x}}}return{dom:l,contentDOM:o}}const Fue=65535,Lue=Math.pow(2,16);function VVe(e,t){return e+t*Lue}function gX(e){return e&Fue}function qVe(e){return(e-(e&Fue))/Lue}const Bue=1,Uue=2,lA=4,$ue=8;class nF{constructor(t,r,n){this.pos=t,this.delInfo=r,this.recover=n}get deleted(){return(this.delInfo&$ue)>0}get deletedBefore(){return(this.delInfo&(Bue|lA))>0}get deletedAfter(){return(this.delInfo&(Uue|lA))>0}get deletedAcross(){return(this.delInfo&lA)>0}}class ec{constructor(t,r=!1){if(this.ranges=t,this.inverted=r,!t.length&&ec.empty)return ec.empty}recover(t){let r=0,n=gX(t);if(!this.inverted)for(let i=0;i<n;i++)r+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[n*3]+r+qVe(t)}mapResult(t,r=1){return this._map(t,r,!1)}map(t,r=1){return this._map(t,r,!0)}_map(t,r,n){let i=0,a=this.inverted?2:1,s=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let l=this.ranges[o]-(this.inverted?i:0);if(l>t)break;let c=this.ranges[o+a],d=this.ranges[o+s],f=l+c;if(t<=f){let p=c?t==l?-1:t==f?1:r:r,m=l+i+(p<0?0:d);if(n)return m;let x=t==(r<0?l:f)?null:VVe(o/3,t-l),y=t==l?Uue:t==f?Bue:lA;return(r<0?t!=l:t!=f)&&(y|=$ue),new nF(m,y,x)}i+=d-c}return n?t+i:new nF(t+i,0,null)}touches(t,r){let n=0,i=gX(r),a=this.inverted?2:1,s=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let l=this.ranges[o]-(this.inverted?n:0);if(l>t)break;let c=this.ranges[o+a],d=l+c;if(t<=d&&o==i*3)return!0;n+=this.ranges[o+s]-c}return!1}forEach(t){let r=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,a=0;i<this.ranges.length;i+=3){let s=this.ranges[i],o=s-(this.inverted?a:0),l=s+(this.inverted?0:a),c=this.ranges[i+r],d=this.ranges[i+n];t(o,o+c,l,l+d),a+=d-c}}invert(){return new ec(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?ec.empty:new ec(t<0?[0,-t,0]:[0,0,t])}}ec.empty=new ec([]);class DS{constructor(t,r,n=0,i=t?t.length:0){this.mirror=r,this.from=n,this.to=i,this._maps=t||[],this.ownData=!(t||r)}get maps(){return this._maps}slice(t=0,r=this.maps.length){return new DS(this._maps,this.mirror,t,r)}appendMap(t,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(t){for(let r=0,n=this._maps.length;r<t._maps.length;r++){let i=t.getMirror(r);this.appendMap(t._maps[r],i!=null&&i<r?n+i:void 0)}}getMirror(t){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==t)return this.mirror[r+(r%2?-1:1)]}}setMirror(t,r){this.mirror||(this.mirror=[]),this.mirror.push(t,r)}appendMappingInverted(t){for(let r=t.maps.length-1,n=this._maps.length+t._maps.length;r>=0;r--){let i=t.getMirror(r);this.appendMap(t._maps[r].invert(),i!=null&&i>r?n-i-1:void 0)}}invert(){let t=new DS;return t.appendMappingInverted(this),t}map(t,r=1){if(this.mirror)return this._map(t,r,!0);for(let n=this.from;n<this.to;n++)t=this._maps[n].map(t,r);return t}mapResult(t,r=1){return this._map(t,r,!1)}_map(t,r,n){let i=0;for(let a=this.from;a<this.to;a++){let s=this._maps[a],o=s.mapResult(t,r);if(o.recover!=null){let l=this.getMirror(a);if(l!=null&&l>a&&l<this.to){a=l,t=this._maps[l].recover(o.recover);continue}}i|=o.delInfo,t=o.pos}return n?t:new nF(t,i,null)}}const AD=Object.create(null);let ko=class{getMap(){return ec.empty}merge(t){return null}static fromJSON(t,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=AD[r.stepType];if(!n)throw new RangeError(`No step type ${r.stepType} defined`);return n.fromJSON(t,r)}static jsonID(t,r){if(t in AD)throw new RangeError("Duplicate use of step JSON ID "+t);return AD[t]=r,r.prototype.jsonID=t,r}};class Fa{constructor(t,r){this.doc=t,this.failed=r}static ok(t){return new Fa(t,null)}static fail(t){return new Fa(null,t)}static fromReplace(t,r,n,i){try{return Fa.ok(t.replace(r,n,i))}catch(a){if(a instanceof BT)return Fa.fail(a.message);throw a}}}function eB(e,t,r){let n=[];for(let i=0;i<e.childCount;i++){let a=e.child(i);a.content.size&&(a=a.copy(eB(a.content,t,a))),a.isInline&&(a=t(a,r,i)),n.push(a)}return It.fromArray(n)}class g0 extends ko{constructor(t,r,n){super(),this.from=t,this.to=r,this.mark=n}apply(t){let r=t.slice(this.from,this.to),n=t.resolve(this.from),i=n.node(n.sharedDepth(this.to)),a=new Vt(eB(r.content,(s,o)=>!s.isAtom||!o.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),r.openStart,r.openEnd);return Fa.fromReplace(t,this.from,this.to,a)}invert(){return new td(this.from,this.to,this.mark)}map(t){let r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new g0(r.pos,n.pos,this.mark)}merge(t){return t instanceof g0&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new g0(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new g0(r.from,r.to,t.markFromJSON(r.mark))}}ko.jsonID("addMark",g0);class td extends ko{constructor(t,r,n){super(),this.from=t,this.to=r,this.mark=n}apply(t){let r=t.slice(this.from,this.to),n=new Vt(eB(r.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),r.openStart,r.openEnd);return Fa.fromReplace(t,this.from,this.to,n)}invert(){return new g0(this.from,this.to,this.mark)}map(t){let r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new td(r.pos,n.pos,this.mark)}merge(t){return t instanceof td&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new td(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new td(r.from,r.to,t.markFromJSON(r.mark))}}ko.jsonID("removeMark",td);class x0 extends ko{constructor(t,r){super(),this.pos=t,this.mark=r}apply(t){let r=t.nodeAt(this.pos);if(!r)return Fa.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return Fa.fromReplace(t,this.pos,this.pos+1,new Vt(It.from(n),0,r.isLeaf?0:1))}invert(t){let r=t.nodeAt(this.pos);if(r){let n=this.mark.addToSet(r.marks);if(n.length==r.marks.length){for(let i=0;i<r.marks.length;i++)if(!r.marks[i].isInSet(n))return new x0(this.pos,r.marks[i]);return new x0(this.pos,this.mark)}}return new gx(this.pos,this.mark)}map(t){let r=t.mapResult(this.pos,1);return r.deletedAfter?null:new x0(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new x0(r.pos,t.markFromJSON(r.mark))}}ko.jsonID("addNodeMark",x0);class gx extends ko{constructor(t,r){super(),this.pos=t,this.mark=r}apply(t){let r=t.nodeAt(this.pos);if(!r)return Fa.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return Fa.fromReplace(t,this.pos,this.pos+1,new Vt(It.from(n),0,r.isLeaf?0:1))}invert(t){let r=t.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new x0(this.pos,this.mark)}map(t){let r=t.mapResult(this.pos,1);return r.deletedAfter?null:new gx(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new gx(r.pos,t.markFromJSON(r.mark))}}ko.jsonID("removeNodeMark",gx);class xs extends ko{constructor(t,r,n,i=!1){super(),this.from=t,this.to=r,this.slice=n,this.structure=i}apply(t){return this.structure&&iF(t,this.from,this.to)?Fa.fail("Structure replace would overwrite content"):Fa.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new ec([this.from,this.to-this.from,this.slice.size])}invert(t){return new xs(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return r.deletedAcross&&n.deletedAcross?null:new xs(r.pos,Math.max(r.pos,n.pos),this.slice,this.structure)}merge(t){if(!(t instanceof xs)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let r=this.slice.size+t.slice.size==0?Vt.empty:new Vt(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new xs(this.from,this.to+(t.to-t.from),r,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let r=this.slice.size+t.slice.size==0?Vt.empty:new Vt(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new xs(t.from,this.to,r,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new xs(r.from,r.to,Vt.fromJSON(t,r.slice),!!r.structure)}}ko.jsonID("replace",xs);class Ss extends ko{constructor(t,r,n,i,a,s,o=!1){super(),this.from=t,this.to=r,this.gapFrom=n,this.gapTo=i,this.slice=a,this.insert=s,this.structure=o}apply(t){if(this.structure&&(iF(t,this.from,this.gapFrom)||iF(t,this.gapTo,this.to)))return Fa.fail("Structure gap-replace would overwrite content");let r=t.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return Fa.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,r.content);return n?Fa.fromReplace(t,this.from,this.to,n):Fa.fail("Content does not fit in gap")}getMap(){return new ec([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let r=this.gapTo-this.gapFrom;return new Ss(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let r=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),i=this.from==this.gapFrom?r.pos:t.map(this.gapFrom,-1),a=this.to==this.gapTo?n.pos:t.map(this.gapTo,1);return r.deletedAcross&&n.deletedAcross||i<r.pos||a>n.pos?null:new Ss(r.pos,n.pos,i,a,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ss(r.from,r.to,r.gapFrom,r.gapTo,Vt.fromJSON(t,r.slice),r.insert,!!r.structure)}}ko.jsonID("replaceAround",Ss);function iF(e,t,r){let n=e.resolve(t),i=r-t,a=n.depth;for(;i>0&&a>0&&n.indexAfter(a)==n.node(a).childCount;)a--,i--;if(i>0){let s=n.node(a).maybeChild(n.indexAfter(a));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function GVe(e,t,r,n){let i=[],a=[],s,o;e.doc.nodesBetween(t,r,(l,c,d)=>{if(!l.isInline)return;let f=l.marks;if(!n.isInSet(f)&&d.type.allowsMarkType(n.type)){let p=Math.max(c,t),m=Math.min(c+l.nodeSize,r),x=n.addToSet(f);for(let y=0;y<f.length;y++)f[y].isInSet(x)||(s&&s.to==p&&s.mark.eq(f[y])?s.to=m:i.push(s=new td(p,m,f[y])));o&&o.to==p?o.to=m:a.push(o=new g0(p,m,n))}}),i.forEach(l=>e.step(l)),a.forEach(l=>e.step(l))}function KVe(e,t,r,n){let i=[],a=0;e.doc.nodesBetween(t,r,(s,o)=>{if(!s.isInline)return;a++;let l=null;if(n instanceof C3){let c=s.marks,d;for(;d=n.isInSet(c);)(l||(l=[])).push(d),c=d.removeFromSet(c)}else n?n.isInSet(s.marks)&&(l=[n]):l=s.marks;if(l&&l.length){let c=Math.min(o+s.nodeSize,r);for(let d=0;d<l.length;d++){let f=l[d],p;for(let m=0;m<i.length;m++){let x=i[m];x.step==a-1&&f.eq(i[m].style)&&(p=x)}p?(p.to=c,p.step=a):i.push({style:f,from:Math.max(o,t),to:c,step:a})}}}),i.forEach(s=>e.step(new td(s.from,s.to,s.style)))}function tB(e,t,r,n=r.contentMatch,i=!0){let a=e.doc.nodeAt(t),s=[],o=t+1;for(let l=0;l<a.childCount;l++){let c=a.child(l),d=o+c.nodeSize,f=n.matchType(c.type);if(!f)s.push(new xs(o,d,Vt.empty));else{n=f;for(let p=0;p<c.marks.length;p++)r.allowsMarkType(c.marks[p].type)||e.step(new td(o,d,c.marks[p]));if(i&&c.isText&&r.whitespace!="pre"){let p,m=/\r?\n|\r/g,x;for(;p=m.exec(c.text);)x||(x=new Vt(It.from(r.schema.text(" ",r.allowedMarks(c.marks))),0,0)),s.push(new xs(o+p.index,o+p.index+p[0].length,x))}}o=d}if(!n.validEnd){let l=n.fillBefore(It.empty,!0);e.replace(o,o,new Vt(l,0,0))}for(let l=s.length-1;l>=0;l--)e.step(s[l])}function XVe(e,t,r){return(t==0||e.canReplace(t,e.childCount))&&(r==e.childCount||e.canReplace(0,r))}function Ab(e){let r=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth,i=0,a=0;;--n){let s=e.$from.node(n),o=e.$from.index(n)+i,l=e.$to.indexAfter(n)-a;if(n<e.depth&&s.canReplace(o,l,r))return n;if(n==0||s.type.spec.isolating||!XVe(s,o,l))break;o&&(i=1),l<s.childCount&&(a=1)}return null}function YVe(e,t,r){let{$from:n,$to:i,depth:a}=t,s=n.before(a+1),o=i.after(a+1),l=s,c=o,d=It.empty,f=0;for(let x=a,y=!1;x>r;x--)y||n.index(x)>0?(y=!0,d=It.from(n.node(x).copy(d)),f++):l--;let p=It.empty,m=0;for(let x=a,y=!1;x>r;x--)y||i.after(x+1)<i.end(x)?(y=!0,p=It.from(i.node(x).copy(p)),m++):c++;e.step(new Ss(l,c,s,o,new Vt(d.append(p),f,m),d.size-f,!0))}function rB(e,t,r=null,n=e){let i=QVe(e,t),a=i&&JVe(n,t);return a?i.map(xX).concat({type:t,attrs:r}).concat(a.map(xX)):null}function xX(e){return{type:e,attrs:null}}function QVe(e,t){let{parent:r,startIndex:n,endIndex:i}=e,a=r.contentMatchAt(n).findWrapping(t);if(!a)return null;let s=a.length?a[0]:t;return r.canReplaceWith(n,i,s)?a:null}function JVe(e,t){let{parent:r,startIndex:n,endIndex:i}=e,a=r.child(n),s=t.contentMatch.findWrapping(a.type);if(!s)return null;let l=(s.length?s[s.length-1]:t).contentMatch;for(let c=n;l&&c<i;c++)l=l.matchType(r.child(c).type);return!l||!l.validEnd?null:s}function ZVe(e,t,r){let n=It.empty;for(let s=r.length-1;s>=0;s--){if(n.size){let o=r[s].type.contentMatch.matchFragment(n);if(!o||!o.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=It.from(r[s].type.create(r[s].attrs,n))}let i=t.start,a=t.end;e.step(new Ss(i,a,i,a,new Vt(n,0,0),r.length,!0))}function eqe(e,t,r,n,i){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=e.steps.length;e.doc.nodesBetween(t,r,(s,o)=>{let l=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(n,l)&&tqe(e.doc,e.mapping.slice(a).map(o),n)){let c=null;if(n.schema.linebreakReplacement){let m=n.whitespace=="pre",x=!!n.contentMatch.matchType(n.schema.linebreakReplacement);m&&!x?c=!1:!m&&x&&(c=!0)}c===!1&&Hue(e,s,o,a),tB(e,e.mapping.slice(a).map(o,1),n,void 0,c===null);let d=e.mapping.slice(a),f=d.map(o,1),p=d.map(o+s.nodeSize,1);return e.step(new Ss(f,p,f+1,p-1,new Vt(It.from(n.create(l,null,s.marks)),0,0),1,!0)),c===!0&&zue(e,s,o,a),!1}})}function zue(e,t,r,n){t.forEach((i,a)=>{if(i.isText){let s,o=/\r?\n|\r/g;for(;s=o.exec(i.text);){let l=e.mapping.slice(n).map(r+1+a+s.index);e.replaceWith(l,l+1,t.type.schema.linebreakReplacement.create())}}})}function Hue(e,t,r,n){t.forEach((i,a)=>{if(i.type==i.type.schema.linebreakReplacement){let s=e.mapping.slice(n).map(r+1+a);e.replaceWith(s,s+1,t.type.schema.text(`
`))}})}function tqe(e,t,r){let n=e.resolve(t),i=n.index();return n.parent.canReplaceWith(i,i+1,r)}function rqe(e,t,r,n,i){let a=e.doc.nodeAt(t);if(!a)throw new RangeError("No node at given position");r||(r=a.type);let s=r.create(n,null,i||a.marks);if(a.isLeaf)return e.replaceWith(t,t+a.nodeSize,s);if(!r.validContent(a.content))throw new RangeError("Invalid content for node type "+r.name);e.step(new Ss(t,t+a.nodeSize,t+1,t+a.nodeSize-1,new Vt(It.from(s),0,0),1,!0))}function Ah(e,t,r=1,n){let i=e.resolve(t),a=i.depth-r,s=n&&n[n.length-1]||i.parent;if(a<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,d=r-2;c>a;c--,d--){let f=i.node(c),p=i.index(c);if(f.type.spec.isolating)return!1;let m=f.content.cutByIndex(p,f.childCount),x=n&&n[d+1];x&&(m=m.replaceChild(0,x.type.create(x.attrs)));let y=n&&n[d]||f;if(!f.canReplace(p+1,f.childCount)||!y.type.validContent(m))return!1}let o=i.indexAfter(a),l=n&&n[0];return i.node(a).canReplaceWith(o,o,l?l.type:i.node(a+1).type)}function nqe(e,t,r=1,n){let i=e.doc.resolve(t),a=It.empty,s=It.empty;for(let o=i.depth,l=i.depth-r,c=r-1;o>l;o--,c--){a=It.from(i.node(o).copy(a));let d=n&&n[c];s=It.from(d?d.type.create(d.attrs,s):i.node(o).copy(s))}e.step(new xs(t,t,new Vt(a.append(s),r,r),!0))}function om(e,t){let r=e.resolve(t),n=r.index();return Wue(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function iqe(e,t){t.content.size||e.type.compatibleContent(t.type);let r=e.contentMatchAt(e.childCount),{linebreakReplacement:n}=e.type.schema;for(let i=0;i<t.childCount;i++){let a=t.child(i),s=a.type==n?e.type.schema.nodes.text:a.type;if(r=r.matchType(s),!r||!e.type.allowsMarks(a.marks))return!1}return r.validEnd}function Wue(e,t){return!!(e&&t&&!e.isLeaf&&iqe(e,t))}function k3(e,t,r=-1){let n=e.resolve(t);for(let i=n.depth;;i--){let a,s,o=n.index(i);if(i==n.depth?(a=n.nodeBefore,s=n.nodeAfter):r>0?(a=n.node(i+1),o++,s=n.node(i).maybeChild(o)):(a=n.node(i).maybeChild(o-1),s=n.node(i+1)),a&&!a.isTextblock&&Wue(a,s)&&n.node(i).canReplace(o,o+1))return t;if(i==0)break;t=r<0?n.before(i):n.after(i)}}function aqe(e,t,r){let n=null,{linebreakReplacement:i}=e.doc.type.schema,a=e.doc.resolve(t-r),s=a.node().type;if(i&&s.inlineContent){let d=s.whitespace=="pre",f=!!s.contentMatch.matchType(i);d&&!f?n=!1:!d&&f&&(n=!0)}let o=e.steps.length;if(n===!1){let d=e.doc.resolve(t+r);Hue(e,d.node(),d.before(),o)}s.inlineContent&&tB(e,t+r-1,s,a.node().contentMatchAt(a.index()),n==null);let l=e.mapping.slice(o),c=l.map(t-r);if(e.step(new xs(c,l.map(t+r,-1),Vt.empty,!0)),n===!0){let d=e.doc.resolve(c);zue(e,d.node(),d.before(),e.steps.length)}return e}function sqe(e,t,r){let n=e.resolve(t);if(n.parent.canReplaceWith(n.index(),n.index(),r))return t;if(n.parentOffset==0)for(let i=n.depth-1;i>=0;i--){let a=n.index(i);if(n.node(i).canReplaceWith(a,a,r))return n.before(i+1);if(a>0)return null}if(n.parentOffset==n.parent.content.size)for(let i=n.depth-1;i>=0;i--){let a=n.indexAfter(i);if(n.node(i).canReplaceWith(a,a,r))return n.after(i+1);if(a<n.node(i).childCount)return null}return null}function Vue(e,t,r){let n=e.resolve(t);if(!r.content.size)return t;let i=r.content;for(let a=0;a<r.openStart;a++)i=i.firstChild.content;for(let a=1;a<=(r.openStart==0&&r.size?2:1);a++)for(let s=n.depth;s>=0;s--){let o=s==n.depth?0:n.pos<=(n.start(s+1)+n.end(s+1))/2?-1:1,l=n.index(s)+(o>0?1:0),c=n.node(s),d=!1;if(a==1)d=c.canReplace(l,l,i);else{let f=c.contentMatchAt(l).findWrapping(i.firstChild.type);d=f&&c.canReplaceWith(l,l,f[0])}if(d)return o==0?n.pos:o<0?n.before(s+1):n.after(s+1)}return null}function _3(e,t,r=t,n=Vt.empty){if(t==r&&!n.size)return null;let i=e.resolve(t),a=e.resolve(r);return que(i,a,n)?new xs(t,r,n):new oqe(i,a,n).fit()}function que(e,t,r){return!r.openStart&&!r.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),r.content)}class oqe{constructor(t,r,n){this.$from=t,this.$to=r,this.unplaced=n,this.frontier=[],this.placed=It.empty;for(let i=0;i<=t.depth;i++){let a=t.node(i);this.frontier.push({type:a.type,match:a.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=It.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(t<0?this.$to:n.doc.resolve(t));if(!i)return null;let a=this.placed,s=n.depth,o=i.depth;for(;s&&o&&a.childCount==1;)a=a.firstChild.content,s--,o--;let l=new Vt(a,s,o);return t>-1?new Ss(n.pos,t,this.$to.pos,this.$to.end(),l,r):l.size||n.pos!=this.$to.pos?new xs(n.pos,i.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let r=this.unplaced.content,n=0,i=this.unplaced.openEnd;n<t;n++){let a=r.firstChild;if(r.childCount>1&&(i=0),a.type.spec.isolating&&i<=n){t=n;break}r=a.content}for(let r=1;r<=2;r++)for(let n=r==1?t:this.unplaced.openStart;n>=0;n--){let i,a=null;n?(a=TD(this.unplaced.content,n-1).firstChild,i=a.content):i=this.unplaced.content;let s=i.firstChild;for(let o=this.depth;o>=0;o--){let{type:l,match:c}=this.frontier[o],d,f=null;if(r==1&&(s?c.matchType(s.type)||(f=c.fillBefore(It.from(s),!1)):a&&l.compatibleContent(a.type)))return{sliceDepth:n,frontierDepth:o,parent:a,inject:f};if(r==2&&s&&(d=c.findWrapping(s.type)))return{sliceDepth:n,frontierDepth:o,parent:a,wrap:d};if(a&&c.matchType(a.type))break}}}openMore(){let{content:t,openStart:r,openEnd:n}=this.unplaced,i=TD(t,r);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Vt(t,r+1,Math.max(n,i.size+r>=t.size-n?r+1:0)),!0)}dropNode(){let{content:t,openStart:r,openEnd:n}=this.unplaced,i=TD(t,r);if(i.childCount<=1&&r>0){let a=t.size-r<=r+i.size;this.unplaced=new Vt(o2(t,r-1,1),r-1,a?r-1:n)}else this.unplaced=new Vt(o2(t,r,1),r,n)}placeNodes({sliceDepth:t,frontierDepth:r,parent:n,inject:i,wrap:a}){for(;this.depth>r;)this.closeFrontierNode();if(a)for(let y=0;y<a.length;y++)this.openFrontierNode(a[y]);let s=this.unplaced,o=n?n.content:s.content,l=s.openStart-t,c=0,d=[],{match:f,type:p}=this.frontier[r];if(i){for(let y=0;y<i.childCount;y++)d.push(i.child(y));f=f.matchFragment(i)}let m=o.size+t-(s.content.size-s.openEnd);for(;c<o.childCount;){let y=o.child(c),b=f.matchType(y.type);if(!b)break;c++,(c>1||l==0||y.content.size)&&(f=b,d.push(Gue(y.mark(p.allowedMarks(y.marks)),c==1?l:0,c==o.childCount?m:-1)))}let x=c==o.childCount;x||(m=-1),this.placed=l2(this.placed,r,It.from(d)),this.frontier[r].match=f,x&&m<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let y=0,b=o;y<m;y++){let S=b.lastChild;this.frontier.push({type:S.type,match:S.contentMatchAt(S.childCount)}),b=S.content}this.unplaced=x?t==0?Vt.empty:new Vt(o2(s.content,t-1,1),t-1,m<0?s.openEnd:t-1):new Vt(o2(s.content,t,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],r;if(!t.type.isTextblock||!ID(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(t){e:for(let r=Math.min(this.depth,t.depth);r>=0;r--){let{match:n,type:i}=this.frontier[r],a=r<t.depth&&t.end(r+1)==t.pos+(t.depth-(r+1)),s=ID(t,r,i,n,a);if(s){for(let o=r-1;o>=0;o--){let{match:l,type:c}=this.frontier[o],d=ID(t,o,c,l,!0);if(!d||d.childCount)continue e}return{depth:r,fit:s,move:a?t.doc.resolve(t.after(r+1)):t}}}}close(t){let r=this.findCloseLevel(t);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=l2(this.placed,r.depth,r.fit)),t=r.move;for(let n=r.depth+1;n<=t.depth;n++){let i=t.node(n),a=i.type.contentMatch.fillBefore(i.content,!0,t.index(n));this.openFrontierNode(i.type,i.attrs,a)}return t}openFrontierNode(t,r=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=l2(this.placed,this.depth,It.from(t.create(r,n))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(It.empty,!0);r.childCount&&(this.placed=l2(this.placed,this.frontier.length,r))}}function o2(e,t,r){return t==0?e.cutByIndex(r,e.childCount):e.replaceChild(0,e.firstChild.copy(o2(e.firstChild.content,t-1,r)))}function l2(e,t,r){return t==0?e.append(r):e.replaceChild(e.childCount-1,e.lastChild.copy(l2(e.lastChild.content,t-1,r)))}function TD(e,t){for(let r=0;r<t;r++)e=e.firstChild.content;return e}function Gue(e,t,r){if(t<=0)return e;let n=e.content;return t>1&&(n=n.replaceChild(0,Gue(n.firstChild,t-1,n.childCount==1?r-1:0))),t>0&&(n=e.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(e.type.contentMatch.matchFragment(n).fillBefore(It.empty,!0)))),e.copy(n)}function ID(e,t,r,n,i){let a=e.node(t),s=i?e.indexAfter(t):e.index(t);if(s==a.childCount&&!r.compatibleContent(a.type))return null;let o=n.fillBefore(a.content,!0,s);return o&&!lqe(r,a.content,s)?o:null}function lqe(e,t,r){for(let n=r;n<t.childCount;n++)if(!e.allowsMarks(t.child(n).marks))return!0;return!1}function cqe(e){return e.spec.defining||e.spec.definingForContent}function uqe(e,t,r,n){if(!n.size)return e.deleteRange(t,r);let i=e.doc.resolve(t),a=e.doc.resolve(r);if(que(i,a,n))return e.step(new xs(t,r,n));let s=Xue(i,a);s[s.length-1]==0&&s.pop();let o=-(i.depth+1);s.unshift(o);for(let p=i.depth,m=i.pos-1;p>0;p--,m--){let x=i.node(p).type.spec;if(x.defining||x.definingAsContext||x.isolating)break;s.indexOf(p)>-1?o=p:i.before(p)==m&&s.splice(1,0,-p)}let l=s.indexOf(o),c=[],d=n.openStart;for(let p=n.content,m=0;;m++){let x=p.firstChild;if(c.push(x),m==n.openStart)break;p=x.content}for(let p=d-1;p>=0;p--){let m=c[p],x=cqe(m.type);if(x&&!m.sameMarkup(i.node(Math.abs(o)-1)))d=p;else if(x||!m.type.isTextblock)break}for(let p=n.openStart;p>=0;p--){let m=(p+d+1)%(n.openStart+1),x=c[m];if(x)for(let y=0;y<s.length;y++){let b=s[(y+l)%s.length],S=!0;b<0&&(S=!1,b=-b);let _=i.node(b-1),C=i.index(b-1);if(_.canReplaceWith(C,C,x.type,x.marks))return e.replace(i.before(b),S?a.after(b):r,new Vt(Kue(n.content,0,n.openStart,m),m,n.openEnd))}}let f=e.steps.length;for(let p=s.length-1;p>=0&&(e.replace(t,r,n),!(e.steps.length>f));p--){let m=s[p];m<0||(t=i.before(m),r=a.after(m))}}function Kue(e,t,r,n,i){if(t<r){let a=e.firstChild;e=e.replaceChild(0,a.copy(Kue(a.content,t+1,r,n,a)))}if(t>n){let a=i.contentMatchAt(0),s=a.fillBefore(e).append(e);e=s.append(a.matchFragment(s).fillBefore(It.empty,!0))}return e}function dqe(e,t,r,n){if(!n.isInline&&t==r&&e.doc.resolve(t).parent.content.size){let i=sqe(e.doc,t,n.type);i!=null&&(t=r=i)}e.replaceRange(t,r,new Vt(It.from(n),0,0))}function fqe(e,t,r){let n=e.doc.resolve(t),i=e.doc.resolve(r),a=Xue(n,i);for(let s=0;s<a.length;s++){let o=a[s],l=s==a.length-1;if(l&&o==0||n.node(o).type.contentMatch.validEnd)return e.delete(n.start(o),i.end(o));if(o>0&&(l||n.node(o-1).canReplace(n.index(o-1),i.indexAfter(o-1))))return e.delete(n.before(o),i.after(o))}for(let s=1;s<=n.depth&&s<=i.depth;s++)if(t-n.start(s)==n.depth-s&&r>n.end(s)&&i.end(s)-r!=i.depth-s&&n.start(s-1)==i.start(s-1)&&n.node(s-1).canReplace(n.index(s-1),i.index(s-1)))return e.delete(n.before(s),r);e.delete(t,r)}function Xue(e,t){let r=[],n=Math.min(e.depth,t.depth);for(let i=n;i>=0;i--){let a=e.start(i);if(a<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(a==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==a-1)&&r.push(i)}return r}class Bv extends ko{constructor(t,r,n){super(),this.pos=t,this.attr=r,this.value=n}apply(t){let r=t.nodeAt(this.pos);if(!r)return Fa.fail("No node at attribute step's position");let n=Object.create(null);for(let a in r.attrs)n[a]=r.attrs[a];n[this.attr]=this.value;let i=r.type.create(n,null,r.marks);return Fa.fromReplace(t,this.pos,this.pos+1,new Vt(It.from(i),0,r.isLeaf?0:1))}getMap(){return ec.empty}invert(t){return new Bv(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let r=t.mapResult(this.pos,1);return r.deletedAfter?null:new Bv(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Bv(r.pos,r.attr,r.value)}}ko.jsonID("attr",Bv);class MS extends ko{constructor(t,r){super(),this.attr=t,this.value=r}apply(t){let r=Object.create(null);for(let i in t.attrs)r[i]=t.attrs[i];r[this.attr]=this.value;let n=t.type.create(r,t.content,t.marks);return Fa.ok(n)}getMap(){return ec.empty}invert(t){return new MS(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new MS(r.attr,r.value)}}ko.jsonID("docAttr",MS);let Ay=class extends Error{};Ay=function e(t){let r=Error.call(this,t);return r.__proto__=e.prototype,r};Ay.prototype=Object.create(Error.prototype);Ay.prototype.constructor=Ay;Ay.prototype.name="TransformError";class Yue{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new DS}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let r=this.maybeStep(t);if(r.failed)throw new Ay(r.failed);return this}maybeStep(t){let r=t.apply(this.doc);return r.failed||this.addStep(t,r.doc),r}get docChanged(){return this.steps.length>0}addStep(t,r){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=r}replace(t,r=t,n=Vt.empty){let i=_3(this.doc,t,r,n);return i&&this.step(i),this}replaceWith(t,r,n){return this.replace(t,r,new Vt(It.from(n),0,0))}delete(t,r){return this.replace(t,r,Vt.empty)}insert(t,r){return this.replaceWith(t,t,r)}replaceRange(t,r,n){return uqe(this,t,r,n),this}replaceRangeWith(t,r,n){return dqe(this,t,r,n),this}deleteRange(t,r){return fqe(this,t,r),this}lift(t,r){return YVe(this,t,r),this}join(t,r=1){return aqe(this,t,r),this}wrap(t,r){return ZVe(this,t,r),this}setBlockType(t,r=t,n,i=null){return eqe(this,t,r,n,i),this}setNodeMarkup(t,r,n=null,i){return rqe(this,t,r,n,i),this}setNodeAttribute(t,r,n){return this.step(new Bv(t,r,n)),this}setDocAttribute(t,r){return this.step(new MS(t,r)),this}addNodeMark(t,r){return this.step(new x0(t,r)),this}removeNodeMark(t,r){let n=this.doc.nodeAt(t);if(!n)throw new RangeError("No node at position "+t);if(r instanceof pi)r.isInSet(n.marks)&&this.step(new gx(t,r));else{let i=n.marks,a,s=[];for(;a=r.isInSet(i);)s.push(new gx(t,a)),i=a.removeFromSet(i);for(let o=s.length-1;o>=0;o--)this.step(s[o])}return this}split(t,r=1,n){return nqe(this,t,r,n),this}addMark(t,r,n){return GVe(this,t,r,n),this}removeMark(t,r,n){return KVe(this,t,r,n),this}clearIncompatible(t,r,n){return tB(this,t,r,n),this}}const OD=Object.create(null);class pn{constructor(t,r,n){this.$anchor=t,this.$head=r,this.ranges=n||[new hqe(t.min(r),t.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let r=0;r<t.length;r++)if(t[r].$from.pos!=t[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,r=Vt.empty){let n=r.content.lastChild,i=null;for(let o=0;o<r.openEnd;o++)i=n,n=n.lastChild;let a=t.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:l,$to:c}=s[o],d=t.mapping.slice(a);t.replaceRange(d.map(l.pos),d.map(c.pos),o?Vt.empty:r),o==0&&bX(t,a,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,r){let n=t.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:s,$to:o}=i[a],l=t.mapping.slice(n),c=l.map(s.pos),d=l.map(o.pos);a?t.deleteRange(c,d):(t.replaceRangeWith(c,d,r),bX(t,n,r.isInline?-1:1))}}static findFrom(t,r,n=!1){let i=t.parent.inlineContent?new zr(t):rv(t.node(0),t.parent,t.pos,t.index(),r,n);if(i)return i;for(let a=t.depth-1;a>=0;a--){let s=r<0?rv(t.node(0),t.node(a),t.before(a+1),t.index(a),r,n):rv(t.node(0),t.node(a),t.after(a+1),t.index(a)+1,r,n);if(s)return s}return null}static near(t,r=1){return this.findFrom(t,r)||this.findFrom(t,-r)||new dc(t.node(0))}static atStart(t){return rv(t,t,0,0,1)||new dc(t)}static atEnd(t){return rv(t,t,t.content.size,t.childCount,-1)||new dc(t)}static fromJSON(t,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=OD[r.type];if(!n)throw new RangeError(`No selection type ${r.type} defined`);return n.fromJSON(t,r)}static jsonID(t,r){if(t in OD)throw new RangeError("Duplicate use of selection JSON ID "+t);return OD[t]=r,r.prototype.jsonID=t,r}getBookmark(){return zr.between(this.$anchor,this.$head).getBookmark()}}pn.prototype.visible=!0;class hqe{constructor(t,r){this.$from=t,this.$to=r}}let vX=!1;function yX(e){!vX&&!e.parent.inlineContent&&(vX=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class zr extends pn{constructor(t,r=t){yX(t),yX(r),super(t,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,r){let n=t.resolve(r.map(this.head));if(!n.parent.inlineContent)return pn.near(n);let i=t.resolve(r.map(this.anchor));return new zr(i.parent.inlineContent?i:n,n)}replace(t,r=Vt.empty){if(super.replace(t,r),r==Vt.empty){let n=this.$from.marksAcross(this.$to);n&&t.ensureMarks(n)}}eq(t){return t instanceof zr&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new N3(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new zr(t.resolve(r.anchor),t.resolve(r.head))}static create(t,r,n=r){let i=t.resolve(r);return new this(i,n==r?i:t.resolve(n))}static between(t,r,n){let i=t.pos-r.pos;if((!n||i)&&(n=i>=0?1:-1),!r.parent.inlineContent){let a=pn.findFrom(r,n,!0)||pn.findFrom(r,-n,!0);if(a)r=a.$head;else return pn.near(r,n)}return t.parent.inlineContent||(i==0?t=r:(t=(pn.findFrom(t,-n,!0)||pn.findFrom(t,n,!0)).$anchor,t.pos<r.pos!=i<0&&(t=r))),new zr(t,r)}}pn.jsonID("text",zr);class N3{constructor(t,r){this.anchor=t,this.head=r}map(t){return new N3(t.map(this.anchor),t.map(this.head))}resolve(t){return zr.between(t.resolve(this.anchor),t.resolve(this.head))}}class pr extends pn{constructor(t){let r=t.nodeAfter,n=t.node(0).resolve(t.pos+r.nodeSize);super(t,n),this.node=r}map(t,r){let{deleted:n,pos:i}=r.mapResult(this.anchor),a=t.resolve(i);return n?pn.near(a):new pr(a)}content(){return new Vt(It.from(this.node),0,0)}eq(t){return t instanceof pr&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new nB(this.anchor)}static fromJSON(t,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new pr(t.resolve(r.anchor))}static create(t,r){return new pr(t.resolve(r))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}pr.prototype.visible=!1;pn.jsonID("node",pr);class nB{constructor(t){this.anchor=t}map(t){let{deleted:r,pos:n}=t.mapResult(this.anchor);return r?new N3(n,n):new nB(n)}resolve(t){let r=t.resolve(this.anchor),n=r.nodeAfter;return n&&pr.isSelectable(n)?new pr(r):pn.near(r)}}class dc extends pn{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,r=Vt.empty){if(r==Vt.empty){t.delete(0,t.doc.content.size);let n=pn.atStart(t.doc);n.eq(t.selection)||t.setSelection(n)}else super.replace(t,r)}toJSON(){return{type:"all"}}static fromJSON(t){return new dc(t)}map(t){return new dc(t)}eq(t){return t instanceof dc}getBookmark(){return pqe}}pn.jsonID("all",dc);const pqe={map(){return this},resolve(e){return new dc(e)}};function rv(e,t,r,n,i,a=!1){if(t.inlineContent)return zr.create(e,r);for(let s=n-(i>0?0:1);i>0?s<t.childCount:s>=0;s+=i){let o=t.child(s);if(o.isAtom){if(!a&&pr.isSelectable(o))return pr.create(e,r-(i<0?o.nodeSize:0))}else{let l=rv(e,o,r+i,i<0?o.childCount:0,i,a);if(l)return l}r+=o.nodeSize*i}return null}function bX(e,t,r){let n=e.steps.length-1;if(n<t)return;let i=e.steps[n];if(!(i instanceof xs||i instanceof Ss))return;let a=e.mapping.maps[n],s;a.forEach((o,l,c,d)=>{s==null&&(s=d)}),e.setSelection(pn.near(e.doc.resolve(s),r))}const wX=1,q_=2,SX=4;class mqe extends Yue{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|wX)&~q_,this.storedMarks=null,this}get selectionSet(){return(this.updated&wX)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=q_,this}ensureMarks(t){return pi.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&q_)>0}addStep(t,r){super.addStep(t,r),this.updated=this.updated&~q_,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,r=!0){let n=this.selection;return r&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||pi.none))),n.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,r,n){let i=this.doc.type.schema;if(r==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(n==null&&(n=r),!t)return this.deleteRange(r,n);let a=this.storedMarks;if(!a){let s=this.doc.resolve(r);a=n==r?s.marks():s.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,i.text(t,a)),!this.selection.empty&&this.selection.to==r+t.length&&this.setSelection(pn.near(this.selection.$to)),this}}setMeta(t,r){return this.meta[typeof t=="string"?t:t.key]=r,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=SX,this}get scrolledIntoView(){return(this.updated&SX)>0}}function EX(e,t){return!t||!e?e:e.bind(t)}class c2{constructor(t,r,n){this.name=t,this.init=EX(r.init,n),this.apply=EX(r.apply,n)}}const gqe=[new c2("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new c2("selection",{init(e,t){return e.selection||pn.atStart(t.doc)},apply(e){return e.selection}}),new c2("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,r,n){return n.selection.$cursor?e.storedMarks:null}}),new c2("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class PD{constructor(t,r){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=gqe.slice(),r&&r.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new c2(n.key,n.spec.state,n))})}}class Ev{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,r=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=r){let i=this.config.plugins[n];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let r=[t],n=this.applyInner(t),i=null;for(;;){let a=!1;for(let s=0;s<this.config.plugins.length;s++){let o=this.config.plugins[s];if(o.spec.appendTransaction){let l=i?i[s].n:0,c=i?i[s].state:this,d=l<r.length&&o.spec.appendTransaction.call(o,l?r.slice(l):r,c,n);if(d&&n.filterTransaction(d,s)){if(d.setMeta("appendedTransaction",t),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<s?{state:n,n:r.length}:{state:this,n:0})}r.push(d),n=n.applyInner(d),a=!0}i&&(i[s]={state:n,n:r.length})}}if(!a)return{state:n,transactions:r}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new Ev(this.config),n=this.config.fields;for(let i=0;i<n.length;i++){let a=n[i];r[a.name]=a.apply(t,this[a.name],this,r)}return r}get tr(){return new mqe(this)}static create(t){let r=new PD(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new Ev(r);for(let i=0;i<r.fields.length;i++)n[r.fields[i].name]=r.fields[i].init(t,n);return n}reconfigure(t){let r=new PD(this.schema,t.plugins),n=r.fields,i=new Ev(r);for(let a=0;a<n.length;a++){let s=n[a].name;i[s]=this.hasOwnProperty(s)?this[s]:n[a].init(t,i)}return i}toJSON(t){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(n=>n.toJSON())),t&&typeof t=="object")for(let n in t){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[n],a=i.spec.state;a&&a.toJSON&&(r[n]=a.toJSON.call(i,this[i.key]))}return r}static fromJSON(t,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new PD(t.schema,t.plugins),a=new Ev(i);return i.fields.forEach(s=>{if(s.name=="doc")a.doc=Nh.fromJSON(t.schema,r.doc);else if(s.name=="selection")a.selection=pn.fromJSON(a.doc,r.selection);else if(s.name=="storedMarks")r.storedMarks&&(a.storedMarks=r.storedMarks.map(t.schema.markFromJSON));else{if(n)for(let o in n){let l=n[o],c=l.spec.state;if(l.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(r,o)){a[s.name]=c.fromJSON.call(l,t,r[o],a);return}}a[s.name]=s.init(t,a)}}),a}}function Que(e,t,r){for(let n in e){let i=e[n];i instanceof Function?i=i.bind(t):n=="handleDOMEvents"&&(i=Que(i,t,{})),r[n]=i}return r}class Hi{constructor(t){this.spec=t,this.props={},t.props&&Que(t.props,this,this.props),this.key=t.key?t.key.key:Jue("plugin")}getState(t){return t[this.key]}}const RD=Object.create(null);function Jue(e){return e in RD?e+"$"+ ++RD[e]:(RD[e]=0,e+"$")}class Ca{constructor(t="key"){this.key=Jue(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const iB=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function Zue(e,t){let{$cursor:r}=e.selection;return!r||(t?!t.endOfTextblock("backward",e):r.parentOffset>0)?null:r}const ede=(e,t,r)=>{let n=Zue(e,r);if(!n)return!1;let i=aB(n);if(!i){let s=n.blockRange(),o=s&&Ab(s);return o==null?!1:(t&&t(e.tr.lift(s,o).scrollIntoView()),!0)}let a=i.nodeBefore;if(cde(e,i,t,-1))return!0;if(n.parent.content.size==0&&(Ty(a,"end")||pr.isSelectable(a)))for(let s=n.depth;;s--){let o=_3(e.doc,n.before(s),n.after(s),Vt.empty);if(o&&o.slice.size<o.to-o.from){if(t){let l=e.tr.step(o);l.setSelection(Ty(a,"end")?pn.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):pr.create(l.doc,i.pos-a.nodeSize)),t(l.scrollIntoView())}return!0}if(s==1||n.node(s-1).childCount>1)break}return a.isAtom&&i.depth==n.depth-1?(t&&t(e.tr.delete(i.pos-a.nodeSize,i.pos).scrollIntoView()),!0):!1},xqe=(e,t,r)=>{let n=Zue(e,r);if(!n)return!1;let i=aB(n);return i?tde(e,i,t):!1},vqe=(e,t,r)=>{let n=nde(e,r);if(!n)return!1;let i=sB(n);return i?tde(e,i,t):!1};function tde(e,t,r){let n=t.nodeBefore,i=n,a=t.pos-1;for(;!i.isTextblock;a--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let s=t.nodeAfter,o=s,l=t.pos+1;for(;!o.isTextblock;l++){if(o.type.spec.isolating)return!1;let d=o.firstChild;if(!d)return!1;o=d}let c=_3(e.doc,a,l,Vt.empty);if(!c||c.from!=a||c instanceof xs&&c.slice.size>=l-a)return!1;if(r){let d=e.tr.step(c);d.setSelection(zr.create(d.doc,a)),r(d.scrollIntoView())}return!0}function Ty(e,t,r=!1){for(let n=e;n;n=t=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&n.childCount!=1)return!1}return!1}const rde=(e,t,r)=>{let{$head:n,empty:i}=e.selection,a=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",e):n.parentOffset>0)return!1;a=aB(n)}let s=a&&a.nodeBefore;return!s||!pr.isSelectable(s)?!1:(t&&t(e.tr.setSelection(pr.create(e.doc,a.pos-s.nodeSize)).scrollIntoView()),!0)};function aB(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function nde(e,t){let{$cursor:r}=e.selection;return!r||(t?!t.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)?null:r}const ide=(e,t,r)=>{let n=nde(e,r);if(!n)return!1;let i=sB(n);if(!i)return!1;let a=i.nodeAfter;if(cde(e,i,t,1))return!0;if(n.parent.content.size==0&&(Ty(a,"start")||pr.isSelectable(a))){let s=_3(e.doc,n.before(),n.after(),Vt.empty);if(s&&s.slice.size<s.to-s.from){if(t){let o=e.tr.step(s);o.setSelection(Ty(a,"start")?pn.findFrom(o.doc.resolve(o.mapping.map(i.pos)),1):pr.create(o.doc,o.mapping.map(i.pos))),t(o.scrollIntoView())}return!0}}return a.isAtom&&i.depth==n.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+a.nodeSize).scrollIntoView()),!0):!1},ade=(e,t,r)=>{let{$head:n,empty:i}=e.selection,a=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)return!1;a=sB(n)}let s=a&&a.nodeAfter;return!s||!pr.isSelectable(s)?!1:(t&&t(e.tr.setSelection(pr.create(e.doc,a.pos)).scrollIntoView()),!0)};function sB(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let r=e.node(t);if(e.index(t)+1<r.childCount)return e.doc.resolve(e.after(t+1));if(r.type.spec.isolating)break}return null}const yqe=(e,t)=>{let r=e.selection,n=r instanceof pr,i;if(n){if(r.node.isTextblock||!om(e.doc,r.from))return!1;i=r.from}else if(i=k3(e.doc,r.from,-1),i==null)return!1;if(t){let a=e.tr.join(i);n&&a.setSelection(pr.create(a.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(a.scrollIntoView())}return!0},bqe=(e,t)=>{let r=e.selection,n;if(r instanceof pr){if(r.node.isTextblock||!om(e.doc,r.to))return!1;n=r.to}else if(n=k3(e.doc,r.to,1),n==null)return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0},wqe=(e,t)=>{let{$from:r,$to:n}=e.selection,i=r.blockRange(n),a=i&&Ab(i);return a==null?!1:(t&&t(e.tr.lift(i,a).scrollIntoView()),!0)},sde=(e,t)=>{let{$head:r,$anchor:n}=e.selection;return!r.parent.type.spec.code||!r.sameParent(n)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function oB(e){for(let t=0;t<e.edgeCount;t++){let{type:r}=e.edge(t);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const Sqe=(e,t)=>{let{$head:r,$anchor:n}=e.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let i=r.node(-1),a=r.indexAfter(-1),s=oB(i.contentMatchAt(a));if(!s||!i.canReplaceWith(a,a,s))return!1;if(t){let o=r.after(),l=e.tr.replaceWith(o,o,s.createAndFill());l.setSelection(pn.near(l.doc.resolve(o),1)),t(l.scrollIntoView())}return!0},ode=(e,t)=>{let r=e.selection,{$from:n,$to:i}=r;if(r instanceof dc||n.parent.inlineContent||i.parent.inlineContent)return!1;let a=oB(i.parent.contentMatchAt(i.indexAfter()));if(!a||!a.isTextblock)return!1;if(t){let s=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos,o=e.tr.insert(s,a.createAndFill());o.setSelection(zr.create(o.doc,s+1)),t(o.scrollIntoView())}return!0},lde=(e,t)=>{let{$cursor:r}=e.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let a=r.before();if(Ah(e.doc,a))return t&&t(e.tr.split(a).scrollIntoView()),!0}let n=r.blockRange(),i=n&&Ab(n);return i==null?!1:(t&&t(e.tr.lift(n,i).scrollIntoView()),!0)};function Eqe(e){return(t,r)=>{let{$from:n,$to:i}=t.selection;if(t.selection instanceof pr&&t.selection.node.isBlock)return!n.parentOffset||!Ah(t.doc,n.pos)?!1:(r&&r(t.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let a=[],s,o,l=!1,c=!1;for(let m=n.depth;;m--)if(n.node(m).isBlock){l=n.end(m)==n.pos+(n.depth-m),c=n.start(m)==n.pos-(n.depth-m),o=oB(n.node(m-1).contentMatchAt(n.indexAfter(m-1))),a.unshift(l&&o?{type:o}:null),s=m;break}else{if(m==1)return!1;a.unshift(null)}let d=t.tr;(t.selection instanceof zr||t.selection instanceof dc)&&d.deleteSelection();let f=d.mapping.map(n.pos),p=Ah(d.doc,f,a.length,a);if(p||(a[0]=o?{type:o}:null,p=Ah(d.doc,f,a.length,a)),!p)return!1;if(d.split(f,a.length,a),!l&&c&&n.node(s).type!=o){let m=d.mapping.map(n.before(s)),x=d.doc.resolve(m);o&&n.node(s-1).canReplaceWith(x.index(),x.index()+1,o)&&d.setNodeMarkup(d.mapping.map(n.before(s)),o)}return r&&r(d.scrollIntoView()),!0}}const Cqe=Eqe(),kqe=(e,t)=>{let{$from:r,to:n}=e.selection,i,a=r.sharedDepth(n);return a==0?!1:(i=r.before(a),t&&t(e.tr.setSelection(pr.create(e.doc,i))),!0)};function _qe(e,t,r){let n=t.nodeBefore,i=t.nodeAfter,a=t.index();return!n||!i||!n.type.compatibleContent(i.type)?!1:!n.content.size&&t.parent.canReplace(a-1,a)?(r&&r(e.tr.delete(t.pos-n.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(a,a+1)||!(i.isTextblock||om(e.doc,t.pos))?!1:(r&&r(e.tr.join(t.pos).scrollIntoView()),!0)}function cde(e,t,r,n){let i=t.nodeBefore,a=t.nodeAfter,s,o,l=i.type.spec.isolating||a.type.spec.isolating;if(!l&&_qe(e,t,r))return!0;let c=!l&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(s=(o=i.contentMatchAt(i.childCount)).findWrapping(a.type))&&o.matchType(s[0]||a.type).validEnd){if(r){let m=t.pos+a.nodeSize,x=It.empty;for(let S=s.length-1;S>=0;S--)x=It.from(s[S].create(null,x));x=It.from(i.copy(x));let y=e.tr.step(new Ss(t.pos-1,m,t.pos,m,new Vt(x,1,0),s.length,!0)),b=y.doc.resolve(m+2*s.length);b.nodeAfter&&b.nodeAfter.type==i.type&&om(y.doc,b.pos)&&y.join(b.pos),r(y.scrollIntoView())}return!0}let d=a.type.spec.isolating||n>0&&l?null:pn.findFrom(t,1),f=d&&d.$from.blockRange(d.$to),p=f&&Ab(f);if(p!=null&&p>=t.depth)return r&&r(e.tr.lift(f,p).scrollIntoView()),!0;if(c&&Ty(a,"start",!0)&&Ty(i,"end")){let m=i,x=[];for(;x.push(m),!m.isTextblock;)m=m.lastChild;let y=a,b=1;for(;!y.isTextblock;y=y.firstChild)b++;if(m.canReplace(m.childCount,m.childCount,y.content)){if(r){let S=It.empty;for(let C=x.length-1;C>=0;C--)S=It.from(x[C].copy(S));let _=e.tr.step(new Ss(t.pos-x.length,t.pos+a.nodeSize,t.pos+b,t.pos+a.nodeSize-b,new Vt(S,x.length,0),0,!0));r(_.scrollIntoView())}return!0}}return!1}function ude(e){return function(t,r){let n=t.selection,i=e<0?n.$from:n.$to,a=i.depth;for(;i.node(a).isInline;){if(!a)return!1;a--}return i.node(a).isTextblock?(r&&r(t.tr.setSelection(zr.create(t.doc,e<0?i.start(a):i.end(a)))),!0):!1}}const Nqe=ude(-1),Aqe=ude(1);function Tqe(e,t=null){return function(r,n){let{$from:i,$to:a}=r.selection,s=i.blockRange(a),o=s&&rB(s,e,t);return o?(n&&n(r.tr.wrap(s,o).scrollIntoView()),!0):!1}}function CX(e,t=null){return function(r,n){let i=!1;for(let a=0;a<r.selection.ranges.length&&!i;a++){let{$from:{pos:s},$to:{pos:o}}=r.selection.ranges[a];r.doc.nodesBetween(s,o,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(e,t)))if(l.type==e)i=!0;else{let d=r.doc.resolve(c),f=d.index();i=d.parent.canReplaceWith(f,f+1,e)}})}if(!i)return!1;if(n){let a=r.tr;for(let s=0;s<r.selection.ranges.length;s++){let{$from:{pos:o},$to:{pos:l}}=r.selection.ranges[s];a.setBlockType(o,l,e,t)}n(a.scrollIntoView())}return!0}}function lB(...e){return function(t,r,n){for(let i=0;i<e.length;i++)if(e[i](t,r,n))return!0;return!1}}lB(iB,ede,rde);lB(iB,ide,ade);lB(sde,ode,lde,Cqe);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Iqe(e,t=null){return function(r,n){let{$from:i,$to:a}=r.selection,s=i.blockRange(a);if(!s)return!1;let o=n?r.tr:null;return Oqe(o,s,e,t)?(n&&n(o.scrollIntoView()),!0):!1}}function Oqe(e,t,r,n=null){let i=!1,a=t,s=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(r)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let l=s.resolve(t.start-2);a=new $T(l,l,t.depth),t.endIndex<t.parent.childCount&&(t=new $T(t.$from,s.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let o=rB(a,r,n,t);return o?(e&&Pqe(e,t,o,i,r),!0):!1}function Pqe(e,t,r,n,i){let a=It.empty;for(let d=r.length-1;d>=0;d--)a=It.from(r[d].type.create(r[d].attrs,a));e.step(new Ss(t.start-(n?2:0),t.end,t.start,t.end,new Vt(a,0,0),r.length,!0));let s=0;for(let d=0;d<r.length;d++)r[d].type==i&&(s=d+1);let o=r.length-s,l=t.start+r.length-(n?2:0),c=t.parent;for(let d=t.startIndex,f=t.endIndex,p=!0;d<f;d++,p=!1)!p&&Ah(e.doc,l,o)&&(e.split(l,o),l+=2*o),l+=c.child(d).nodeSize;return e}function Rqe(e){return function(t,r){let{$from:n,$to:i}=t.selection,a=n.blockRange(i,s=>s.childCount>0&&s.firstChild.type==e);return a?r?n.node(a.depth-1).type==e?jqe(t,r,e,a):Dqe(t,r,a):!0:!1}}function jqe(e,t,r,n){let i=e.tr,a=n.end,s=n.$to.end(n.depth);a<s&&(i.step(new Ss(a-1,s,a,s,new Vt(It.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new $T(i.doc.resolve(n.$from.pos),i.doc.resolve(s),n.depth));const o=Ab(n);if(o==null)return!1;i.lift(n,o);let l=i.doc.resolve(i.mapping.map(a,-1)-1);return om(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),t(i.scrollIntoView()),!0}function Dqe(e,t,r){let n=e.tr,i=r.parent;for(let m=r.end,x=r.endIndex-1,y=r.startIndex;x>y;x--)m-=i.child(x).nodeSize,n.delete(m-1,m+1);let a=n.doc.resolve(r.start),s=a.nodeAfter;if(n.mapping.map(r.end)!=r.start+a.nodeAfter.nodeSize)return!1;let o=r.startIndex==0,l=r.endIndex==i.childCount,c=a.node(-1),d=a.index(-1);if(!c.canReplace(d+(o?0:1),d+1,s.content.append(l?It.empty:It.from(i))))return!1;let f=a.pos,p=f+s.nodeSize;return n.step(new Ss(f-(o?1:0),p+(l?1:0),f+1,p-1,new Vt((o?It.empty:It.from(i.copy(It.empty))).append(l?It.empty:It.from(i.copy(It.empty))),o?0:1,l?0:1),o?0:1)),t(n.scrollIntoView()),!0}function Mqe(e){return function(t,r){let{$from:n,$to:i}=t.selection,a=n.blockRange(i,c=>c.childCount>0&&c.firstChild.type==e);if(!a)return!1;let s=a.startIndex;if(s==0)return!1;let o=a.parent,l=o.child(s-1);if(l.type!=e)return!1;if(r){let c=l.lastChild&&l.lastChild.type==o.type,d=It.from(c?e.create():null),f=new Vt(It.from(e.create(null,It.from(o.type.create(null,d)))),c?3:1,0),p=a.start,m=a.end;r(t.tr.step(new Ss(p-(c?3:1),m,p,m,f,1,!0)).scrollIntoView())}return!0}}const Bs=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},Iy=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let aF=null;const ah=function(e,t,r){let n=aF||(aF=document.createRange());return n.setEnd(e,r??e.nodeValue.length),n.setStart(e,t||0),n},Fqe=function(){aF=null},xx=function(e,t,r,n){return r&&(kX(e,t,r,n,-1)||kX(e,t,r,n,1))},Lqe=/^(img|br|input|textarea|hr)$/i;function kX(e,t,r,n,i){for(var a;;){if(e==r&&t==n)return!0;if(t==(i<0?0:Zc(e))){let s=e.parentNode;if(!s||s.nodeType!=1||wC(e)||Lqe.test(e.nodeName)||e.contentEditable=="false")return!1;t=Bs(e)+(i<0?0:1),e=s}else if(e.nodeType==1){let s=e.childNodes[t+(i<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((a=s.pmViewDesc)===null||a===void 0)&&a.ignoreForSelection)t+=i;else return!1;else e=s,t=i<0?Zc(e):0}else return!1}}function Zc(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Bqe(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=Zc(e)}else if(e.parentNode&&!wC(e))t=Bs(e),e=e.parentNode;else return null}}function Uqe(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!wC(e))t=Bs(e)+1,e=e.parentNode;else return null}}function $qe(e,t,r){for(let n=t==0,i=t==Zc(e);n||i;){if(e==r)return!0;let a=Bs(e);if(e=e.parentNode,!e)return!1;n=n&&a==0,i=i&&a==Zc(e)}}function wC(e){let t;for(let r=e;r&&!(t=r.pmViewDesc);r=r.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const A3=function(e){return e.focusNode&&xx(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function eg(e,t){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=e,r.key=r.code=t,r}function zqe(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function Hqe(e,t,r){if(e.caretPositionFromPoint)try{let n=e.caretPositionFromPoint(t,r);if(n)return{node:n.offsetNode,offset:Math.min(Zc(n.offsetNode),n.offset)}}catch{}if(e.caretRangeFromPoint){let n=e.caretRangeFromPoint(t,r);if(n)return{node:n.startContainer,offset:Math.min(Zc(n.startContainer),n.startOffset)}}}const ff=typeof navigator<"u"?navigator:null,_X=typeof document<"u"?document:null,lm=ff&&ff.userAgent||"",sF=/Edge\/(\d+)/.exec(lm),dde=/MSIE \d/.exec(lm),oF=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(lm),Al=!!(dde||oF||sF),O0=dde?document.documentMode:oF?+oF[1]:sF?+sF[1]:0,ou=!Al&&/gecko\/(\d+)/i.test(lm);ou&&+(/Firefox\/(\d+)/.exec(lm)||[0,0])[1];const lF=!Al&&/Chrome\/(\d+)/.exec(lm),ys=!!lF,fde=lF?+lF[1]:0,So=!Al&&!!ff&&/Apple Computer/.test(ff.vendor),Oy=So&&(/Mobile\/\w+/.test(lm)||!!ff&&ff.maxTouchPoints>2),Xc=Oy||(ff?/Mac/.test(ff.platform):!1),hde=ff?/Win/.test(ff.platform):!1,xh=/Android \d/.test(lm),SC=!!_X&&"webkitFontSmoothing"in _X.documentElement.style,Wqe=SC?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Vqe(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Jf(e,t){return typeof e=="number"?e:e[t]}function qqe(e){let t=e.getBoundingClientRect(),r=t.width/e.offsetWidth||1,n=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*r,top:t.top,bottom:t.top+e.clientHeight*n}}function NX(e,t,r){let n=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,a=e.dom.ownerDocument;for(let s=r||e.dom;s;){if(s.nodeType!=1){s=Iy(s);continue}let o=s,l=o==a.body,c=l?Vqe(a):qqe(o),d=0,f=0;if(t.top<c.top+Jf(n,"top")?f=-(c.top-t.top+Jf(i,"top")):t.bottom>c.bottom-Jf(n,"bottom")&&(f=t.bottom-t.top>c.bottom-c.top?t.top+Jf(i,"top")-c.top:t.bottom-c.bottom+Jf(i,"bottom")),t.left<c.left+Jf(n,"left")?d=-(c.left-t.left+Jf(i,"left")):t.right>c.right-Jf(n,"right")&&(d=t.right-c.right+Jf(i,"right")),d||f)if(l)a.defaultView.scrollBy(d,f);else{let m=o.scrollLeft,x=o.scrollTop;f&&(o.scrollTop+=f),d&&(o.scrollLeft+=d);let y=o.scrollLeft-m,b=o.scrollTop-x;t={left:t.left-y,top:t.top-b,right:t.right-y,bottom:t.bottom-b}}let p=l?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(p))break;s=p=="absolute"?s.offsetParent:Iy(s)}}function Gqe(e){let t=e.dom.getBoundingClientRect(),r=Math.max(0,t.top),n,i;for(let a=(t.left+t.right)/2,s=r+1;s<Math.min(innerHeight,t.bottom);s+=5){let o=e.root.elementFromPoint(a,s);if(!o||o==e.dom||!e.dom.contains(o))continue;let l=o.getBoundingClientRect();if(l.top>=r-20){n=o,i=l.top;break}}return{refDOM:n,refTop:i,stack:pde(e.dom)}}function pde(e){let t=[],r=e.ownerDocument;for(let n=e;n&&(t.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),e!=r);n=Iy(n));return t}function Kqe({refDOM:e,refTop:t,stack:r}){let n=e?e.getBoundingClientRect().top:0;mde(r,n==0?0:n-t)}function mde(e,t){for(let r=0;r<e.length;r++){let{dom:n,top:i,left:a}=e[r];n.scrollTop!=i+t&&(n.scrollTop=i+t),n.scrollLeft!=a&&(n.scrollLeft=a)}}let q1=null;function Xqe(e){if(e.setActive)return e.setActive();if(q1)return e.focus(q1);let t=pde(e);e.focus(q1==null?{get preventScroll(){return q1={preventScroll:!0},!0}}:void 0),q1||(q1=!1,mde(t,0))}function gde(e,t){let r,n=2e8,i,a=0,s=t.top,o=t.top,l,c;for(let d=e.firstChild,f=0;d;d=d.nextSibling,f++){let p;if(d.nodeType==1)p=d.getClientRects();else if(d.nodeType==3)p=ah(d).getClientRects();else continue;for(let m=0;m<p.length;m++){let x=p[m];if(x.top<=s&&x.bottom>=o){s=Math.max(x.bottom,s),o=Math.min(x.top,o);let y=x.left>t.left?x.left-t.left:x.right<t.left?t.left-x.right:0;if(y<n){r=d,n=y,i=y&&r.nodeType==3?{left:x.right<t.left?x.right:x.left,top:t.top}:t,d.nodeType==1&&y&&(a=f+(t.left>=(x.left+x.right)/2?1:0));continue}}else x.top>t.top&&!l&&x.left<=t.left&&x.right>=t.left&&(l=d,c={left:Math.max(x.left,Math.min(x.right,t.left)),top:x.top});!r&&(t.left>=x.right&&t.top>=x.top||t.left>=x.left&&t.top>=x.bottom)&&(a=f+1)}}return!r&&l&&(r=l,i=c,n=0),r&&r.nodeType==3?Yqe(r,i):!r||n&&r.nodeType==1?{node:e,offset:a}:gde(r,i)}function Yqe(e,t){let r=e.nodeValue.length,n=document.createRange(),i;for(let a=0;a<r;a++){n.setEnd(e,a+1),n.setStart(e,a);let s=Hp(n,1);if(s.top!=s.bottom&&cB(t,s)){i={node:e,offset:a+(t.left>=(s.left+s.right)/2?1:0)};break}}return n.detach(),i||{node:e,offset:0}}function cB(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function Qqe(e,t){let r=e.parentNode;return r&&/^li$/i.test(r.nodeName)&&t.left<e.getBoundingClientRect().left?r:e}function Jqe(e,t,r){let{node:n,offset:i}=gde(t,r),a=-1;if(n.nodeType==1&&!n.firstChild){let s=n.getBoundingClientRect();a=s.left!=s.right&&r.left>(s.left+s.right)/2?1:-1}return e.docView.posFromDOM(n,i,a)}function Zqe(e,t,r,n){let i=-1;for(let a=t,s=!1;a!=e.dom;){let o=e.docView.nearestDesc(a,!0),l;if(!o)return null;if(o.dom.nodeType==1&&(o.node.isBlock&&o.parent||!o.contentDOM)&&((l=o.dom.getBoundingClientRect()).width||l.height)&&(o.node.isBlock&&o.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(o.dom.nodeName)&&(!s&&l.left>n.left||l.top>n.top?i=o.posBefore:(!s&&l.right<n.left||l.bottom<n.top)&&(i=o.posAfter),s=!0),!o.contentDOM&&i<0&&!o.node.isText))return(o.node.isBlock?n.top<(l.top+l.bottom)/2:n.left<(l.left+l.right)/2)?o.posBefore:o.posAfter;a=o.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,r,-1)}function xde(e,t,r){let n=e.childNodes.length;if(n&&r.top<r.bottom)for(let i=Math.max(0,Math.min(n-1,Math.floor(n*(t.top-r.top)/(r.bottom-r.top))-2)),a=i;;){let s=e.childNodes[a];if(s.nodeType==1){let o=s.getClientRects();for(let l=0;l<o.length;l++){let c=o[l];if(cB(t,c))return xde(s,t,c)}}if((a=(a+1)%n)==i)break}return e}function eGe(e,t){let r=e.dom.ownerDocument,n,i=0,a=Hqe(r,t.left,t.top);a&&({node:n,offset:i}=a);let s=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top),o;if(!s||!e.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=e.dom.getBoundingClientRect();if(!cB(t,c)||(s=xde(e.dom,t,c),!s))return null}if(So)for(let c=s;n&&c;c=Iy(c))c.draggable&&(n=void 0);if(s=Qqe(s,t),n){if(ou&&n.nodeType==1&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let d=n.childNodes[i],f;d.nodeName=="IMG"&&(f=d.getBoundingClientRect()).right<=t.left&&f.bottom>t.top&&i++}let c;SC&&i&&n.nodeType==1&&(c=n.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=t.top&&i--,n==e.dom&&i==n.childNodes.length-1&&n.lastChild.nodeType==1&&t.top>n.lastChild.getBoundingClientRect().bottom?o=e.state.doc.content.size:(i==0||n.nodeType!=1||n.childNodes[i-1].nodeName!="BR")&&(o=Zqe(e,n,i,t))}o==null&&(o=Jqe(e,s,t));let l=e.docView.nearestDesc(s,!0);return{pos:o,inside:l?l.posAtStart-l.border:-1}}function AX(e){return e.top<e.bottom||e.left<e.right}function Hp(e,t){let r=e.getClientRects();if(r.length){let n=r[t<0?0:r.length-1];if(AX(n))return n}return Array.prototype.find.call(r,AX)||e.getBoundingClientRect()}const tGe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function vde(e,t,r){let{node:n,offset:i,atom:a}=e.docView.domFromPos(t,r<0?-1:1),s=SC||ou;if(n.nodeType==3)if(s&&(tGe.test(n.nodeValue)||(r<0?!i:i==n.nodeValue.length))){let l=Hp(ah(n,i,i),r);if(ou&&i&&/\s/.test(n.nodeValue[i-1])&&i<n.nodeValue.length){let c=Hp(ah(n,i-1,i-1),-1);if(c.top==l.top){let d=Hp(ah(n,i,i+1),-1);if(d.top!=l.top)return Mw(d,d.left<c.left)}}return l}else{let l=i,c=i,d=r<0?1:-1;return r<0&&!i?(c++,d=-1):r>=0&&i==n.nodeValue.length?(l--,d=1):r<0?l--:c++,Mw(Hp(ah(n,l,c),d),d<0)}if(!e.state.doc.resolve(t-(a||0)).parent.inlineContent){if(a==null&&i&&(r<0||i==Zc(n))){let l=n.childNodes[i-1];if(l.nodeType==1)return jD(l.getBoundingClientRect(),!1)}if(a==null&&i<Zc(n)){let l=n.childNodes[i];if(l.nodeType==1)return jD(l.getBoundingClientRect(),!0)}return jD(n.getBoundingClientRect(),r>=0)}if(a==null&&i&&(r<0||i==Zc(n))){let l=n.childNodes[i-1],c=l.nodeType==3?ah(l,Zc(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Mw(Hp(c,1),!1)}if(a==null&&i<Zc(n)){let l=n.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?ah(l,0,s?0:1):l.nodeType==1?l:null:null;if(c)return Mw(Hp(c,-1),!0)}return Mw(Hp(n.nodeType==3?ah(n):n,-r),r>=0)}function Mw(e,t){if(e.width==0)return e;let r=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:r,right:r}}function jD(e,t){if(e.height==0)return e;let r=t?e.top:e.bottom;return{top:r,bottom:r,left:e.left,right:e.right}}function yde(e,t,r){let n=e.state,i=e.root.activeElement;n!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return r()}finally{n!=t&&e.updateState(n),i!=e.dom&&i&&i.focus()}}function rGe(e,t,r){let n=t.selection,i=r=="up"?n.$from:n.$to;return yde(e,t,()=>{let{node:a}=e.docView.domFromPos(i.pos,r=="up"?-1:1);for(;;){let o=e.docView.nearestDesc(a,!0);if(!o)break;if(o.node.isBlock){a=o.contentDOM||o.dom;break}a=o.dom.parentNode}let s=vde(e,i.pos,1);for(let o=a.firstChild;o;o=o.nextSibling){let l;if(o.nodeType==1)l=o.getClientRects();else if(o.nodeType==3)l=ah(o,0,o.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let d=l[c];if(d.bottom>d.top+1&&(r=="up"?s.top-d.top>(d.bottom-s.top)*2:d.bottom-s.bottom>(s.bottom-d.top)*2))return!1}}return!0})}const nGe=/[\u0590-\u08ac]/;function iGe(e,t,r){let{$head:n}=t.selection;if(!n.parent.isTextblock)return!1;let i=n.parentOffset,a=!i,s=i==n.parent.content.size,o=e.domSelection();return o?!nGe.test(n.parent.textContent)||!o.modify?r=="left"||r=="backward"?a:s:yde(e,t,()=>{let{focusNode:l,focusOffset:c,anchorNode:d,anchorOffset:f}=e.domSelectionRange(),p=o.caretBidiLevel;o.modify("move",r,"character");let m=n.depth?e.docView.domAfterPos(n.before()):e.dom,{focusNode:x,focusOffset:y}=e.domSelectionRange(),b=x&&!m.contains(x.nodeType==1?x:x.parentNode)||l==x&&c==y;try{o.collapse(d,f),l&&(l!=d||c!=f)&&o.extend&&o.extend(l,c)}catch{}return p!=null&&(o.caretBidiLevel=p),b}):n.pos==n.start()||n.pos==n.end()}let TX=null,IX=null,OX=!1;function aGe(e,t,r){return TX==t&&IX==r?OX:(TX=t,IX=r,OX=r=="up"||r=="down"?rGe(e,t,r):iGe(e,t,r))}const lu=0,PX=1,pg=2,hf=3;class EC{constructor(t,r,n,i){this.parent=t,this.children=r,this.dom=n,this.contentDOM=i,this.dirty=lu,n.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,r,n){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let r=0;r<this.children.length;r++)t+=this.children[r].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let r=0,n=this.posAtStart;;r++){let i=this.children[r];if(i==t)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,r,n){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(n<0){let a,s;if(t==this.contentDOM)a=t.childNodes[r-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;a=t.previousSibling}for(;a&&!((s=a.pmViewDesc)&&s.parent==this);)a=a.previousSibling;return a?this.posBeforeChild(s)+s.size:this.posAtStart}else{let a,s;if(t==this.contentDOM)a=t.childNodes[r];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;a=t.nextSibling}for(;a&&!((s=a.pmViewDesc)&&s.parent==this);)a=a.nextSibling;return a?this.posBeforeChild(s):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=r>Bs(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let a=t;;a=a.parentNode){if(a==this.dom){i=!1;break}if(a.previousSibling)break}if(i==null&&r==t.childNodes.length)for(let a=t;;a=a.parentNode){if(a==this.dom){i=!0;break}if(a.nextSibling)break}}return i??n>0?this.posAtEnd:this.posAtStart}nearestDesc(t,r=!1){for(let n=!0,i=t;i;i=i.parentNode){let a=this.getDesc(i),s;if(a&&(!r||a.node))if(n&&(s=a.nodeDOM)&&!(s.nodeType==1?s.contains(t.nodeType==1?t:t.parentNode):s==t))n=!1;else return a}}getDesc(t){let r=t.pmViewDesc;for(let n=r;n;n=n.parent)if(n==this)return r}posFromDOM(t,r,n){for(let i=t;i;i=i.parentNode){let a=this.getDesc(i);if(a)return a.localPosFromDOM(t,r,n)}return-1}descAt(t){for(let r=0,n=0;r<this.children.length;r++){let i=this.children[r],a=n+i.size;if(n==t&&a!=n){for(;!i.border&&i.children.length;)for(let s=0;s<i.children.length;s++){let o=i.children[s];if(o.size){i=o;break}}return i}if(t<a)return i.descAt(t-n-i.border);n=a}}domFromPos(t,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let n=0,i=0;for(let a=0;n<this.children.length;n++){let s=this.children[n],o=a+s.size;if(o>t||s instanceof wde){i=t-a;break}a=o}if(i)return this.children[n].domFromPos(i-this.children[n].border,r);for(let a;n&&!(a=this.children[n-1]).size&&a instanceof bde&&a.side>=0;n--);if(r<=0){let a,s=!0;for(;a=n?this.children[n-1]:null,!(!a||a.dom.parentNode==this.contentDOM);n--,s=!1);return a&&r&&s&&!a.border&&!a.domAtom?a.domFromPos(a.size,r):{node:this.contentDOM,offset:a?Bs(a.dom)+1:0}}else{let a,s=!0;for(;a=n<this.children.length?this.children[n]:null,!(!a||a.dom.parentNode==this.contentDOM);n++,s=!1);return a&&s&&!a.border&&!a.domAtom?a.domFromPos(0,r):{node:this.contentDOM,offset:a?Bs(a.dom):this.contentDOM.childNodes.length}}}parseRange(t,r,n=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,a=-1;for(let s=n,o=0;;o++){let l=this.children[o],c=s+l.size;if(i==-1&&t<=c){let d=s+l.border;if(t>=d&&r<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,r,d);t=s;for(let f=o;f>0;f--){let p=this.children[f-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){i=Bs(p.dom)+1;break}t-=p.size}i==-1&&(i=0)}if(i>-1&&(c>r||o==this.children.length-1)){r=c;for(let d=o+1;d<this.children.length;d++){let f=this.children[d];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){a=Bs(f.dom);break}r+=f.size}a==-1&&(a=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:t,to:r,fromOffset:i,toOffset:a}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[t<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(t)}domAfterPos(t){let{node:r,offset:n}=this.domFromPos(t,0);if(r.nodeType!=1||n==r.childNodes.length)throw new RangeError("No node after pos "+t);return r.childNodes[n]}setSelection(t,r,n,i=!1){let a=Math.min(t,r),s=Math.max(t,r);for(let m=0,x=0;m<this.children.length;m++){let y=this.children[m],b=x+y.size;if(a>x&&s<b)return y.setSelection(t-x-y.border,r-x-y.border,n,i);x=b}let o=this.domFromPos(t,t?-1:1),l=r==t?o:this.domFromPos(r,r?-1:1),c=n.root.getSelection(),d=n.domSelectionRange(),f=!1;if((ou||So)&&t==r){let{node:m,offset:x}=o;if(m.nodeType==3){if(f=!!(x&&m.nodeValue[x-1]==`
`),f&&x==m.nodeValue.length)for(let y=m,b;y;y=y.parentNode){if(b=y.nextSibling){b.nodeName=="BR"&&(o=l={node:b.parentNode,offset:Bs(b)+1});break}let S=y.pmViewDesc;if(S&&S.node&&S.node.isBlock)break}}else{let y=m.childNodes[x-1];f=y&&(y.nodeName=="BR"||y.contentEditable=="false")}}if(ou&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let m=d.focusNode.childNodes[d.focusOffset];m&&m.contentEditable=="false"&&(i=!0)}if(!(i||f&&So)&&xx(o.node,o.offset,d.anchorNode,d.anchorOffset)&&xx(l.node,l.offset,d.focusNode,d.focusOffset))return;let p=!1;if((c.extend||t==r)&&!(f&&ou)){c.collapse(o.node,o.offset);try{t!=r&&c.extend(l.node,l.offset),p=!0}catch{}}if(!p){if(t>r){let x=o;o=l,l=x}let m=document.createRange();m.setEnd(l.node,l.offset),m.setStart(o.node,o.offset),c.removeAllRanges(),c.addRange(m)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,r){for(let n=0,i=0;i<this.children.length;i++){let a=this.children[i],s=n+a.size;if(n==s?t<=s&&r>=n:t<s&&r>n){let o=n+a.border,l=s-a.border;if(t>=o&&r<=l){this.dirty=t==n||r==s?pg:PX,t==o&&r==l&&(a.contentLost||a.dom.parentNode!=this.contentDOM)?a.dirty=hf:a.markDirty(t-o,r-o);return}else a.dirty=a.dom==a.contentDOM&&a.dom.parentNode==this.contentDOM&&!a.children.length?pg:hf}n=s}this.dirty=pg}markParentsDirty(){let t=1;for(let r=this.parent;r;r=r.parent,t++){let n=t==1?pg:PX;r.dirty<n&&(r.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class bde extends EC{constructor(t,r,n,i){let a,s=r.type.toDOM;if(typeof s=="function"&&(s=s(n,()=>{if(!a)return i;if(a.parent)return a.parent.posBeforeChild(a)})),!r.type.spec.raw){if(s.nodeType!=1){let o=document.createElement("span");o.appendChild(s),s=o}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(t,[],s,null),this.widget=r,this.widget=r,a=this}matchesWidget(t){return this.dirty==lu&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let r=this.widget.spec.stopEvent;return r?r(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class sGe extends EC{constructor(t,r,n,i){super(t,[],r,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(t,r){return t!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class vx extends EC{constructor(t,r,n,i,a){super(t,[],n,i),this.mark=r,this.spec=a}static create(t,r,n,i){let a=i.nodeViews[r.type.name],s=a&&a(r,i,n);return(!s||!s.dom)&&(s=n1.renderSpec(document,r.type.spec.toDOM(r,n),null,r.attrs)),new vx(t,r,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&hf||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=hf&&this.mark.eq(t)}markDirty(t,r){if(super.markDirty(t,r),this.dirty!=lu){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=lu}}slice(t,r,n){let i=vx.create(this.parent,this.mark,!0,n),a=this.children,s=this.size;r<s&&(a=uF(a,r,s,n)),t>0&&(a=uF(a,0,t,n));for(let o=0;o<a.length;o++)a[o].parent=i;return i.children=a,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class P0 extends EC{constructor(t,r,n,i,a,s,o,l,c){super(t,[],a,s),this.node=r,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=o}static create(t,r,n,i,a,s){let o=a.nodeViews[r.type.name],l,c=o&&o(r,a,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},n,i),d=c&&c.dom,f=c&&c.contentDOM;if(r.isText){if(!d)d=document.createTextNode(r.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:f}=n1.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!f&&!r.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),r.type.spec.draggable&&(d.draggable=!0));let p=d;return d=Cde(d,n,r),c?l=new oGe(t,r,n,i,d,f||null,p,c,a,s+1):r.isText?new T3(t,r,n,i,d,p,a):new P0(t,r,n,i,d,f||null,p,a,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let n=this.children[r];if(this.dom.contains(n.dom.parentNode)){t.contentElement=n.dom.parentNode;break}}t.contentElement||(t.getContent=()=>It.empty)}return t}matchesNode(t,r,n){return this.dirty==lu&&t.eq(this.node)&&HT(r,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,r){let n=this.node.inlineContent,i=r,a=t.composing?this.localCompositionInfo(t,r):null,s=a&&a.pos>-1?a:null,o=a&&a.pos<0,l=new cGe(this,s&&s.node,t);fGe(this.node,this.innerDeco,(c,d,f)=>{c.spec.marks?l.syncToMarks(c.spec.marks,n,t):c.type.side>=0&&!f&&l.syncToMarks(d==this.node.childCount?pi.none:this.node.child(d).marks,n,t),l.placeWidget(c,t,i)},(c,d,f,p)=>{l.syncToMarks(c.marks,n,t);let m;l.findNodeMatch(c,d,f,p)||o&&t.state.selection.from>i&&t.state.selection.to<i+c.nodeSize&&(m=l.findIndexWithChild(a.node))>-1&&l.updateNodeAt(c,d,f,m,t)||l.updateNextNode(c,d,f,t,p,i)||l.addNode(c,d,f,t,i),i+=c.nodeSize}),l.syncToMarks([],n,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==pg)&&(s&&this.protectLocalComposition(t,s),Sde(this.contentDOM,this.children,t),Oy&&hGe(this.dom))}localCompositionInfo(t,r){let{from:n,to:i}=t.state.selection;if(!(t.state.selection instanceof zr)||n<r||i>r+this.node.content.size)return null;let a=t.input.compositionNode;if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let s=a.nodeValue,o=pGe(this.node.content,s,n-r,i-r);return o<0?null:{node:a,pos:o,text:s}}else return{node:a,pos:-1,text:""}}protectLocalComposition(t,{node:r,pos:n,text:i}){if(this.getDesc(r))return;let a=r;for(;a.parentNode!=this.contentDOM;a=a.parentNode){for(;a.previousSibling;)a.parentNode.removeChild(a.previousSibling);for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling);a.pmViewDesc&&(a.pmViewDesc=void 0)}let s=new sGe(this,a,r,i);t.input.compositionNodes.push(s),this.children=uF(this.children,n,n+i.length,t,s)}update(t,r,n,i){return this.dirty==hf||!t.sameMarkup(this.node)?!1:(this.updateInner(t,r,n,i),!0)}updateInner(t,r,n,i){this.updateOuterDeco(r),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=lu}updateOuterDeco(t){if(HT(t,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=Ede(this.dom,this.nodeDOM,cF(this.outerDeco,this.node,r),cF(t,this.node,r)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function RX(e,t,r,n,i){Cde(n,t,e);let a=new P0(void 0,e,t,r,n,n,n,i,0);return a.contentDOM&&a.updateChildren(i,0),a}class T3 extends P0{constructor(t,r,n,i,a,s,o){super(t,r,n,i,a,null,s,o,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,r,n,i){return this.dirty==hf||this.dirty!=lu&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=lu||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=lu,!0)}inParent(){let t=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,r,n){return t==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(t,r,n)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,r,n){let i=this.node.cut(t,r),a=document.createTextNode(i.text);return new T3(this.parent,i,this.outerDeco,this.innerDeco,a,a,n)}markDirty(t,r){super.markDirty(t,r),this.dom!=this.nodeDOM&&(t==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=hf)}get domAtom(){return!1}isText(t){return this.node.text==t}}class wde extends EC{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==lu&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class oGe extends P0{constructor(t,r,n,i,a,s,o,l,c,d){super(t,r,n,i,a,s,o,c,d),this.spec=l}update(t,r,n,i){if(this.dirty==hf)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let a=this.spec.update(t,r,n);return a&&this.updateInner(t,r,n,i),a}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,r,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,r,n,i){this.spec.setSelection?this.spec.setSelection(t,r,n.root):super.setSelection(t,r,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function Sde(e,t,r){let n=e.firstChild,i=!1;for(let a=0;a<t.length;a++){let s=t[a],o=s.dom;if(o.parentNode==e){for(;o!=n;)n=jX(n),i=!0;n=n.nextSibling}else i=!0,e.insertBefore(o,n);if(s instanceof vx){let l=n?n.previousSibling:e.lastChild;Sde(s.contentDOM,s.children,r),n=l?l.nextSibling:e.firstChild}}for(;n;)n=jX(n),i=!0;i&&r.trackWrites==e&&(r.trackWrites=null)}const M2=function(e){e&&(this.nodeName=e)};M2.prototype=Object.create(null);const mg=[new M2];function cF(e,t,r){if(e.length==0)return mg;let n=r?mg[0]:new M2,i=[n];for(let a=0;a<e.length;a++){let s=e[a].type.attrs;if(s){s.nodeName&&i.push(n=new M2(s.nodeName));for(let o in s){let l=s[o];l!=null&&(r&&i.length==1&&i.push(n=new M2(t.isInline?"span":"div")),o=="class"?n.class=(n.class?n.class+" ":"")+l:o=="style"?n.style=(n.style?n.style+";":"")+l:o!="nodeName"&&(n[o]=l))}}}return i}function Ede(e,t,r,n){if(r==mg&&n==mg)return t;let i=t;for(let a=0;a<n.length;a++){let s=n[a],o=r[a];if(a){let l;o&&o.nodeName==s.nodeName&&i!=e&&(l=i.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(i),o=mg[0]),i=l}lGe(i,o||mg[0],s)}return i}function lGe(e,t,r){for(let n in t)n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)&&e.removeAttribute(n);for(let n in r)n!="class"&&n!="style"&&n!="nodeName"&&r[n]!=t[n]&&e.setAttribute(n,r[n]);if(t.class!=r.class){let n=t.class?t.class.split(" ").filter(Boolean):[],i=r.class?r.class.split(" ").filter(Boolean):[];for(let a=0;a<n.length;a++)i.indexOf(n[a])==-1&&e.classList.remove(n[a]);for(let a=0;a<i.length;a++)n.indexOf(i[a])==-1&&e.classList.add(i[a]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=r.style){if(t.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=n.exec(t.style);)e.style.removeProperty(i[1])}r.style&&(e.style.cssText+=r.style)}}function Cde(e,t,r){return Ede(e,e,mg,cF(t,r,e.nodeType!=1))}function HT(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].type.eq(t[r].type))return!1;return!0}function jX(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class cGe{constructor(t,r,n){this.lock=r,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=uGe(t.node.content,t)}destroyBetween(t,r){if(t!=r){for(let n=t;n<r;n++)this.top.children[n].destroy();this.top.children.splice(t,r-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,r,n){let i=0,a=this.stack.length>>1,s=Math.min(a,t.length);for(;i<s&&(i==a-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<a;)this.destroyRest(),this.top.dirty=lu,this.index=this.stack.pop(),this.top=this.stack.pop(),a--;for(;a<t.length;){this.stack.push(this.top,this.index+1);let o=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(t[a])&&!this.isLocked(c.dom)){o=l;break}}if(o>-1)o>this.index&&(this.changed=!0,this.destroyBetween(this.index,o)),this.top=this.top.children[this.index];else{let l=vx.create(this.top,t[a],r,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,a++}}findNodeMatch(t,r,n,i){let a=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(t,r,n))a=this.top.children.indexOf(s,this.index);else for(let o=this.index,l=Math.min(this.top.children.length,o+5);o<l;o++){let c=this.top.children[o];if(c.matchesNode(t,r,n)&&!this.preMatch.matched.has(c)){a=o;break}}return a<0?!1:(this.destroyBetween(this.index,a),this.index++,!0)}updateNodeAt(t,r,n,i,a){let s=this.top.children[i];return s.dirty==hf&&s.dom==s.contentDOM&&(s.dirty=pg),s.update(t,r,n,a)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let r=t.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let n=t.pmViewDesc;if(n){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==n)return i}return-1}t=r}}updateNextNode(t,r,n,i,a,s){for(let o=this.index;o<this.top.children.length;o++){let l=this.top.children[o];if(l instanceof P0){let c=this.preMatch.matched.get(l);if(c!=null&&c!=a)return!1;let d=l.dom,f,p=this.isLocked(d)&&!(t.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==t.text&&l.dirty!=hf&&HT(r,l.outerDeco));if(!p&&l.update(t,r,n,i))return this.destroyBetween(this.index,o),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!p&&(f=this.recreateWrapper(l,t,r,n,i,s)))return this.destroyBetween(this.index,o),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=pg,f.updateChildren(i,s+1),f.dirty=lu),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,r,n,i,a,s){if(t.dirty||r.isAtom||!t.children.length||!t.node.content.eq(r.content)||!HT(n,t.outerDeco)||!i.eq(t.innerDeco))return null;let o=P0.create(this.top,r,n,i,a,s);if(o.contentDOM){o.children=t.children,t.children=[];for(let l of o.children)l.parent=o}return t.destroy(),o}addNode(t,r,n,i,a){let s=P0.create(this.top,t,r,n,i,a);s.contentDOM&&s.updateChildren(i,a+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(t,r,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let a=new bde(this.top,t,r,n);this.top.children.splice(this.index++,0,a),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],r=this.top;for(;t instanceof vx;)r=t,t=r.children[r.children.length-1];(!t||!(t instanceof T3)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((So||ys)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(t,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(t))this.index++;else{let n=document.createElement(t);t=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),t=="BR"&&(n.className="ProseMirror-trailingBreak");let i=new wde(this.top,[],n,null);r!=this.top?r.children.push(i):r.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function uGe(e,t){let r=t,n=r.children.length,i=e.childCount,a=new Map,s=[];e:for(;i>0;){let o;for(;;)if(n){let c=r.children[n-1];if(c instanceof vx)r=c,n=c.children.length;else{o=c,n--;break}}else{if(r==t)break e;n=r.parent.children.indexOf(r),r=r.parent}let l=o.node;if(l){if(l!=e.child(i-1))break;--i,a.set(o,i),s.push(o)}}return{index:i,matched:a,matches:s.reverse()}}function dGe(e,t){return e.type.side-t.type.side}function fGe(e,t,r,n){let i=t.locals(e),a=0;if(i.length==0){for(let c=0;c<e.childCount;c++){let d=e.child(c);n(d,i,t.forChild(a,d),c),a+=d.nodeSize}return}let s=0,o=[],l=null;for(let c=0;;){let d,f;for(;s<i.length&&i[s].to==a;){let b=i[s++];b.widget&&(d?(f||(f=[d])).push(b):d=b)}if(d)if(f){f.sort(dGe);for(let b=0;b<f.length;b++)r(f[b],c,!!l)}else r(d,c,!!l);let p,m;if(l)m=-1,p=l,l=null;else if(c<e.childCount)m=c,p=e.child(c++);else break;for(let b=0;b<o.length;b++)o[b].to<=a&&o.splice(b--,1);for(;s<i.length&&i[s].from<=a&&i[s].to>a;)o.push(i[s++]);let x=a+p.nodeSize;if(p.isText){let b=x;s<i.length&&i[s].from<b&&(b=i[s].from);for(let S=0;S<o.length;S++)o[S].to<b&&(b=o[S].to);b<x&&(l=p.cut(b-a),p=p.cut(0,b-a),x=b,m=-1)}else for(;s<i.length&&i[s].to<x;)s++;let y=p.isInline&&!p.isLeaf?o.filter(b=>!b.inline):o.slice();n(p,y,t.forChild(a,p),m),a=x}}function hGe(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function pGe(e,t,r,n){for(let i=0,a=0;i<e.childCount&&a<=n;){let s=e.child(i++),o=a;if(a+=s.nodeSize,!s.isText)continue;let l=s.text;for(;i<e.childCount;){let c=e.child(i++);if(a+=c.nodeSize,!c.isText)break;l+=c.text}if(a>=r){if(a>=n&&l.slice(n-t.length-o,n-o)==t)return n-t.length;let c=o<n?l.lastIndexOf(t,n-o-1):-1;if(c>=0&&c+t.length+o>=r)return o+c;if(r==n&&l.length>=n+t.length-o&&l.slice(n-o,n-o+t.length)==t)return n}}return-1}function uF(e,t,r,n,i){let a=[];for(let s=0,o=0;s<e.length;s++){let l=e[s],c=o,d=o+=l.size;c>=r||d<=t?a.push(l):(c<t&&a.push(l.slice(0,t-c,n)),i&&(a.push(i),i=void 0),d>r&&a.push(l.slice(r-c,l.size,n)))}return a}function uB(e,t=null){let r=e.domSelectionRange(),n=e.state.doc;if(!r.focusNode)return null;let i=e.docView.nearestDesc(r.focusNode),a=i&&i.size==0,s=e.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(s<0)return null;let o=n.resolve(s),l,c;if(A3(r)){for(l=s;i&&!i.node;)i=i.parent;let f=i.node;if(i&&f.isAtom&&pr.isSelectable(f)&&i.parent&&!(f.isInline&&$qe(r.focusNode,r.focusOffset,i.dom))){let p=i.posBefore;c=new pr(s==p?o:n.resolve(p))}}else{if(r instanceof e.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let f=s,p=s;for(let m=0;m<r.rangeCount;m++){let x=r.getRangeAt(m);f=Math.min(f,e.docView.posFromDOM(x.startContainer,x.startOffset,1)),p=Math.max(p,e.docView.posFromDOM(x.endContainer,x.endOffset,-1))}if(f<0)return null;[l,s]=p==e.state.selection.anchor?[p,f]:[f,p],o=n.resolve(s)}else l=e.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(l<0)return null}let d=n.resolve(l);if(!c){let f=t=="pointer"||e.state.selection.head<o.pos&&!a?1:-1;c=dB(e,d,o,f)}return c}function kde(e){return e.editable?e.hasFocus():Nde(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Th(e,t=!1){let r=e.state.selection;if(_de(e,r),!!kde(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&ys){let n=e.domSelectionRange(),i=e.domObserver.currentSelection;if(n.anchorNode&&i.anchorNode&&xx(n.anchorNode,n.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)gGe(e);else{let{anchor:n,head:i}=r,a,s;DX&&!(r instanceof zr)&&(r.$from.parent.inlineContent||(a=MX(e,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(s=MX(e,r.to))),e.docView.setSelection(n,i,e,t),DX&&(a&&FX(a),s&&FX(s)),r.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&mGe(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const DX=So||ys&&fde<63;function MX(e,t){let{node:r,offset:n}=e.docView.domFromPos(t,0),i=n<r.childNodes.length?r.childNodes[n]:null,a=n?r.childNodes[n-1]:null;if(So&&i&&i.contentEditable=="false")return DD(i);if((!i||i.contentEditable=="false")&&(!a||a.contentEditable=="false")){if(i)return DD(i);if(a)return DD(a)}}function DD(e){return e.contentEditable="true",So&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function FX(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function mGe(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let r=e.domSelectionRange(),n=r.anchorNode,i=r.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(r.anchorNode!=n||r.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!kde(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function gGe(e){let t=e.domSelection();if(!t)return;let r=e.cursorWrapper.dom,n=r.nodeName=="IMG";n?t.collapse(r.parentNode,Bs(r)+1):t.collapse(r,0),!n&&!e.state.selection.visible&&Al&&O0<=11&&(r.disabled=!0,r.disabled=!1)}function _de(e,t){if(t instanceof pr){let r=e.docView.descAt(t.from);r!=e.lastSelectedViewDesc&&(LX(e),r&&r.selectNode(),e.lastSelectedViewDesc=r)}else LX(e)}function LX(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function dB(e,t,r,n){return e.someProp("createSelectionBetween",i=>i(e,t,r))||zr.between(t,r,n)}function BX(e){return e.editable&&!e.hasFocus()?!1:Nde(e)}function Nde(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function xGe(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),r=e.domSelectionRange();return xx(t.node,t.offset,r.anchorNode,r.anchorOffset)}function dF(e,t){let{$anchor:r,$head:n}=e.selection,i=t>0?r.max(n):r.min(n),a=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return a&&pn.findFrom(a,t)}function Gp(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function UX(e,t,r){let n=e.state.selection;if(n instanceof zr)if(r.indexOf("s")>-1){let{$head:i}=n,a=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;let s=e.state.doc.resolve(i.pos+a.nodeSize*(t<0?-1:1));return Gp(e,new zr(n.$anchor,s))}else if(n.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=dF(e.state,t);return i&&i instanceof pr?Gp(e,i):!1}else if(!(Xc&&r.indexOf("m")>-1)){let i=n.$head,a=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,s;if(!a||a.isText)return!1;let o=t<0?i.pos-a.nodeSize:i.pos;return a.isAtom||(s=e.docView.descAt(o))&&!s.contentDOM?pr.isSelectable(a)?Gp(e,new pr(t<0?e.state.doc.resolve(i.pos-a.nodeSize):i)):SC?Gp(e,new zr(e.state.doc.resolve(t<0?o:o+a.nodeSize))):!1:!1}}else return!1;else{if(n instanceof pr&&n.node.isInline)return Gp(e,new zr(t>0?n.$to:n.$from));{let i=dF(e.state,t);return i?Gp(e,i):!1}}}function WT(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function F2(e,t){let r=e.pmViewDesc;return r&&r.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function G1(e,t){return t<0?vGe(e):yGe(e)}function vGe(e){let t=e.domSelectionRange(),r=t.focusNode,n=t.focusOffset;if(!r)return;let i,a,s=!1;for(ou&&r.nodeType==1&&n<WT(r)&&F2(r.childNodes[n],-1)&&(s=!0);;)if(n>0){if(r.nodeType!=1)break;{let o=r.childNodes[n-1];if(F2(o,-1))i=r,a=--n;else if(o.nodeType==3)r=o,n=r.nodeValue.length;else break}}else{if(Ade(r))break;{let o=r.previousSibling;for(;o&&F2(o,-1);)i=r.parentNode,a=Bs(o),o=o.previousSibling;if(o)r=o,n=WT(r);else{if(r=r.parentNode,r==e.dom)break;n=0}}}s?fF(e,r,n):i&&fF(e,i,a)}function yGe(e){let t=e.domSelectionRange(),r=t.focusNode,n=t.focusOffset;if(!r)return;let i=WT(r),a,s;for(;;)if(n<i){if(r.nodeType!=1)break;let o=r.childNodes[n];if(F2(o,1))a=r,s=++n;else break}else{if(Ade(r))break;{let o=r.nextSibling;for(;o&&F2(o,1);)a=o.parentNode,s=Bs(o)+1,o=o.nextSibling;if(o)r=o,n=0,i=WT(r);else{if(r=r.parentNode,r==e.dom)break;n=i=0}}}a&&fF(e,a,s)}function Ade(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function bGe(e,t){for(;e&&t==e.childNodes.length&&!wC(e);)t=Bs(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let r=e.childNodes[t];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;e=r,t=0}}function wGe(e,t){for(;e&&!t&&!wC(e);)t=Bs(e),e=e.parentNode;for(;e&&t;){let r=e.childNodes[t-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;e=r,t=e.childNodes.length}}function fF(e,t,r){if(t.nodeType!=3){let a,s;(s=bGe(t,r))?(t=s,r=0):(a=wGe(t,r))&&(t=a,r=a.nodeValue.length)}let n=e.domSelection();if(!n)return;if(A3(n)){let a=document.createRange();a.setEnd(t,r),a.setStart(t,r),n.removeAllRanges(),n.addRange(a)}else n.extend&&n.extend(t,r);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&Th(e)},50)}function $X(e,t){let r=e.state.doc.resolve(t);if(!(ys||hde)&&r.parent.inlineContent){let i=e.coordsAtPos(t);if(t>r.start()){let a=e.coordsAtPos(t-1),s=(a.top+a.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(a.left-i.left)>1)return a.left<i.left?"ltr":"rtl"}if(t<r.end()){let a=e.coordsAtPos(t+1),s=(a.top+a.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(a.left-i.left)>1)return a.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function zX(e,t,r){let n=e.state.selection;if(n instanceof zr&&!n.empty||r.indexOf("s")>-1||Xc&&r.indexOf("m")>-1)return!1;let{$from:i,$to:a}=n;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let s=dF(e.state,t);if(s&&s instanceof pr)return Gp(e,s)}if(!i.parent.inlineContent){let s=t<0?i:a,o=n instanceof dc?pn.near(s,t):pn.findFrom(s,t);return o?Gp(e,o):!1}return!1}function HX(e,t){if(!(e.state.selection instanceof zr))return!0;let{$head:r,$anchor:n,empty:i}=e.state.selection;if(!r.sameParent(n))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let a=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(a&&!a.isText){let s=e.state.tr;return t<0?s.delete(r.pos-a.nodeSize,r.pos):s.delete(r.pos,r.pos+a.nodeSize),e.dispatch(s),!0}return!1}function WX(e,t,r){e.domObserver.stop(),t.contentEditable=r,e.domObserver.start()}function SGe(e){if(!So||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:r}=e.domSelectionRange();if(t&&t.nodeType==1&&r==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let n=t.firstChild;WX(e,n,"true"),setTimeout(()=>WX(e,n,"false"),20)}return!1}function EGe(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function CGe(e,t){let r=t.keyCode,n=EGe(t);if(r==8||Xc&&r==72&&n=="c")return HX(e,-1)||G1(e,-1);if(r==46&&!t.shiftKey||Xc&&r==68&&n=="c")return HX(e,1)||G1(e,1);if(r==13||r==27)return!0;if(r==37||Xc&&r==66&&n=="c"){let i=r==37?$X(e,e.state.selection.from)=="ltr"?-1:1:-1;return UX(e,i,n)||G1(e,i)}else if(r==39||Xc&&r==70&&n=="c"){let i=r==39?$X(e,e.state.selection.from)=="ltr"?1:-1:1;return UX(e,i,n)||G1(e,i)}else{if(r==38||Xc&&r==80&&n=="c")return zX(e,-1,n)||G1(e,-1);if(r==40||Xc&&r==78&&n=="c")return SGe(e)||zX(e,1,n)||G1(e,1);if(n==(Xc?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function fB(e,t){e.someProp("transformCopied",m=>{t=m(t,e)});let r=[],{content:n,openStart:i,openEnd:a}=t;for(;i>1&&a>1&&n.childCount==1&&n.firstChild.childCount==1;){i--,a--;let m=n.firstChild;r.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),n=m.content}let s=e.someProp("clipboardSerializer")||n1.fromSchema(e.state.schema),o=jde(),l=o.createElement("div");l.appendChild(s.serializeFragment(n,{document:o}));let c=l.firstChild,d,f=0;for(;c&&c.nodeType==1&&(d=Rde[c.nodeName.toLowerCase()]);){for(let m=d.length-1;m>=0;m--){let x=o.createElement(d[m]);for(;l.firstChild;)x.appendChild(l.firstChild);l.appendChild(x),f++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${a}${f?` -${f}`:""} ${JSON.stringify(r)}`);let p=e.someProp("clipboardTextSerializer",m=>m(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:p,slice:t}}function Tde(e,t,r,n,i){let a=i.parent.type.spec.code,s,o;if(!r&&!t)return null;let l=!!t&&(n||a||!r);if(l){if(e.someProp("transformPastedText",p=>{t=p(t,a||n,e)}),a)return o=new Vt(It.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",p=>{o=p(o,e,!0)}),o;let f=e.someProp("clipboardTextParser",p=>p(t,i,n,e));if(f)o=f;else{let p=i.marks(),{schema:m}=e.state,x=n1.fromSchema(m);s=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(y=>{let b=s.appendChild(document.createElement("p"));y&&b.appendChild(x.serializeNode(m.text(y,p)))})}}else e.someProp("transformPastedHTML",f=>{r=f(r,e)}),s=AGe(r),SC&&TGe(s);let c=s&&s.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let f=+d[3];f>0;f--){let p=s.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;s=p}if(o||(o=(e.someProp("clipboardParser")||e.someProp("domParser")||j2.fromSchema(e.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||d),context:i,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!kGe.test(p.parentNode.nodeName)?{ignore:!0}:null}})),d)o=IGe(VX(o,+d[1],+d[2]),d[4]);else if(o=Vt.maxOpen(_Ge(o.content,i),!0),o.openStart||o.openEnd){let f=0,p=0;for(let m=o.content.firstChild;f<o.openStart&&!m.type.spec.isolating;f++,m=m.firstChild);for(let m=o.content.lastChild;p<o.openEnd&&!m.type.spec.isolating;p++,m=m.lastChild);o=VX(o,f,p)}return e.someProp("transformPasted",f=>{o=f(o,e,l)}),o}const kGe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function _Ge(e,t){if(e.childCount<2)return e;for(let r=t.depth;r>=0;r--){let i=t.node(r).contentMatchAt(t.index(r)),a,s=[];if(e.forEach(o=>{if(!s)return;let l=i.findWrapping(o.type),c;if(!l)return s=null;if(c=s.length&&a.length&&Ode(l,a,o,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=Pde(s[s.length-1],a.length));let d=Ide(o,l);s.push(d),i=i.matchType(d.type),a=l}}),s)return It.from(s)}return e}function Ide(e,t,r=0){for(let n=t.length-1;n>=r;n--)e=t[n].create(null,It.from(e));return e}function Ode(e,t,r,n,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let a=Ode(e,t,r,n.lastChild,i+1);if(a)return n.copy(n.content.replaceChild(n.childCount-1,a));if(n.contentMatchAt(n.childCount).matchType(i==e.length-1?r.type:e[i+1]))return n.copy(n.content.append(It.from(Ide(r,e,i+1))))}}function Pde(e,t){if(t==0)return e;let r=e.content.replaceChild(e.childCount-1,Pde(e.lastChild,t-1)),n=e.contentMatchAt(e.childCount).fillBefore(It.empty,!0);return e.copy(r.append(n))}function hF(e,t,r,n,i,a){let s=t<0?e.firstChild:e.lastChild,o=s.content;return e.childCount>1&&(a=0),i<n-1&&(o=hF(o,t,r,n,i+1,a)),i>=r&&(o=t<0?s.contentMatchAt(0).fillBefore(o,a<=i).append(o):o.append(s.contentMatchAt(s.childCount).fillBefore(It.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(o))}function VX(e,t,r){return t<e.openStart&&(e=new Vt(hF(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),r<e.openEnd&&(e=new Vt(hF(e.content,1,r,e.openEnd,0,0),e.openStart,r)),e}const Rde={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let qX=null;function jde(){return qX||(qX=document.implementation.createHTMLDocument("title"))}let MD=null;function NGe(e){let t=window.trustedTypes;return t?(MD||(MD=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),MD.createHTML(e)):e}function AGe(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let r=jde().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(e),i;if((i=n&&Rde[n[1].toLowerCase()])&&(e=i.map(a=>"<"+a+">").join("")+e+i.map(a=>"</"+a+">").reverse().join("")),r.innerHTML=NGe(e),i)for(let a=0;a<i.length;a++)r=r.querySelector(i[a])||r;return r}function TGe(e){let t=e.querySelectorAll(ys?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<t.length;r++){let n=t[r];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),n)}}function IGe(e,t){if(!e.size)return e;let r=e.content.firstChild.type.schema,n;try{n=JSON.parse(t)}catch{return e}let{content:i,openStart:a,openEnd:s}=e;for(let o=n.length-2;o>=0;o-=2){let l=r.nodes[n[o]];if(!l||l.hasRequiredAttrs())break;i=It.from(l.create(n[o+1],i)),a++,s++}return new Vt(i,a,s)}const Qo={},Jo={},OGe={touchstart:!0,touchmove:!0};class PGe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function RGe(e){for(let t in Qo){let r=Qo[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=n=>{DGe(e,n)&&!hB(e,n)&&(e.editable||!(n.type in Jo))&&r(e,n)},OGe[t]?{passive:!0}:void 0)}So&&e.dom.addEventListener("input",()=>null),pF(e)}function v0(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function jGe(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function pF(e){e.someProp("handleDOMEvents",t=>{for(let r in t)e.input.eventHandlers[r]||e.dom.addEventListener(r,e.input.eventHandlers[r]=n=>hB(e,n))})}function hB(e,t){return e.someProp("handleDOMEvents",r=>{let n=r[t.type];return n?n(e,t)||t.defaultPrevented:!1})}function DGe(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let r=t.target;r!=e.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(t))return!1;return!0}function MGe(e,t){!hB(e,t)&&Qo[t.type]&&(e.editable||!(t.type in Jo))&&Qo[t.type](e,t)}Jo.keydown=(e,t)=>{let r=t;if(e.input.shiftKey=r.keyCode==16||r.shiftKey,!Mde(e,r)&&(e.input.lastKeyCode=r.keyCode,e.input.lastKeyCodeTime=Date.now(),!(xh&&ys&&r.keyCode==13)))if(r.keyCode!=229&&e.domObserver.forceFlush(),Oy&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let n=Date.now();e.input.lastIOSEnter=n,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==n&&(e.someProp("handleKeyDown",i=>i(e,eg(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",n=>n(e,r))||CGe(e,r)?r.preventDefault():v0(e,"key")};Jo.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};Jo.keypress=(e,t)=>{let r=t;if(Mde(e,r)||!r.charCode||r.ctrlKey&&!r.altKey||Xc&&r.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,r))){r.preventDefault();return}let n=e.state.selection;if(!(n instanceof zr)||!n.$from.sameParent(n.$to)){let i=String.fromCharCode(r.charCode),a=()=>e.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",s=>s(e,n.$from.pos,n.$to.pos,i,a))&&e.dispatch(a()),r.preventDefault()}};function I3(e){return{left:e.clientX,top:e.clientY}}function FGe(e,t){let r=t.x-e.clientX,n=t.y-e.clientY;return r*r+n*n<100}function pB(e,t,r,n,i){if(n==-1)return!1;let a=e.state.doc.resolve(n);for(let s=a.depth+1;s>0;s--)if(e.someProp(t,o=>s>a.depth?o(e,r,a.nodeAfter,a.before(s),i,!0):o(e,r,a.node(s),a.before(s),i,!1)))return!0;return!1}function Uv(e,t,r){if(e.focused||e.focus(),e.state.selection.eq(t))return;let n=e.state.tr.setSelection(t);n.setMeta("pointer",!0),e.dispatch(n)}function LGe(e,t){if(t==-1)return!1;let r=e.state.doc.resolve(t),n=r.nodeAfter;return n&&n.isAtom&&pr.isSelectable(n)?(Uv(e,new pr(r)),!0):!1}function BGe(e,t){if(t==-1)return!1;let r=e.state.selection,n,i;r instanceof pr&&(n=r.node);let a=e.state.doc.resolve(t);for(let s=a.depth+1;s>0;s--){let o=s>a.depth?a.nodeAfter:a.node(s);if(pr.isSelectable(o)){n&&r.$from.depth>0&&s>=r.$from.depth&&a.before(r.$from.depth+1)==r.$from.pos?i=a.before(r.$from.depth):i=a.before(s);break}}return i!=null?(Uv(e,pr.create(e.state.doc,i)),!0):!1}function UGe(e,t,r,n,i){return pB(e,"handleClickOn",t,r,n)||e.someProp("handleClick",a=>a(e,t,n))||(i?BGe(e,r):LGe(e,r))}function $Ge(e,t,r,n){return pB(e,"handleDoubleClickOn",t,r,n)||e.someProp("handleDoubleClick",i=>i(e,t,n))}function zGe(e,t,r,n){return pB(e,"handleTripleClickOn",t,r,n)||e.someProp("handleTripleClick",i=>i(e,t,n))||HGe(e,r,n)}function HGe(e,t,r){if(r.button!=0)return!1;let n=e.state.doc;if(t==-1)return n.inlineContent?(Uv(e,zr.create(n,0,n.content.size)),!0):!1;let i=n.resolve(t);for(let a=i.depth+1;a>0;a--){let s=a>i.depth?i.nodeAfter:i.node(a),o=i.before(a);if(s.inlineContent)Uv(e,zr.create(n,o+1,o+1+s.content.size));else if(pr.isSelectable(s))Uv(e,pr.create(n,o));else continue;return!0}}function mB(e){return VT(e)}const Dde=Xc?"metaKey":"ctrlKey";Qo.mousedown=(e,t)=>{let r=t;e.input.shiftKey=r.shiftKey;let n=mB(e),i=Date.now(),a="singleClick";i-e.input.lastClick.time<500&&FGe(r,e.input.lastClick)&&!r[Dde]&&e.input.lastClick.button==r.button&&(e.input.lastClick.type=="singleClick"?a="doubleClick":e.input.lastClick.type=="doubleClick"&&(a="tripleClick")),e.input.lastClick={time:i,x:r.clientX,y:r.clientY,type:a,button:r.button};let s=e.posAtCoords(I3(r));s&&(a=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new WGe(e,s,r,!!n)):(a=="doubleClick"?$Ge:zGe)(e,s.pos,s.inside,r)?r.preventDefault():v0(e,"pointer"))};class WGe{constructor(t,r,n,i){this.view=t,this.pos=r,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!n[Dde],this.allowDefault=n.shiftKey;let a,s;if(r.inside>-1)a=t.state.doc.nodeAt(r.inside),s=r.inside;else{let d=t.state.doc.resolve(r.pos);a=d.parent,s=d.depth?d.before():0}const o=i?null:n.target,l=o?t.docView.nearestDesc(o,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=t.state;(n.button==0&&a.type.spec.draggable&&a.type.spec.selectable!==!1||c instanceof pr&&c.from<=s&&c.to>s)&&(this.mightDrag={node:a,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&ou&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),v0(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Th(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(I3(t))),this.updateAllowDefault(t),this.allowDefault||!r?v0(this.view,"pointer"):UGe(this.view,r.pos,r.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||So&&this.mightDrag&&!this.mightDrag.node.isAtom||ys&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(Uv(this.view,pn.near(this.view.state.doc.resolve(r.pos))),t.preventDefault()):v0(this.view,"pointer")}move(t){this.updateAllowDefault(t),v0(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}Qo.touchstart=e=>{e.input.lastTouch=Date.now(),mB(e),v0(e,"pointer")};Qo.touchmove=e=>{e.input.lastTouch=Date.now(),v0(e,"pointer")};Qo.contextmenu=e=>mB(e);function Mde(e,t){return e.composing?!0:So&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const VGe=xh?5e3:-1;Jo.compositionstart=Jo.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,r=t.selection.$to;if(t.selection instanceof zr&&(t.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)||ys&&hde&&qGe(e)))e.markCursor=e.state.storedMarks||r.marks(),VT(e,!0),e.markCursor=null;else if(VT(e,!t.selection.empty),ou&&t.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=e.domSelectionRange();for(let i=n.focusNode,a=n.focusOffset;i&&i.nodeType==1&&a!=0;){let s=a<0?i.lastChild:i.childNodes[a-1];if(!s)break;if(s.nodeType==3){let o=e.domSelection();o&&o.collapse(s,s.nodeValue.length);break}else i=s,a=-1}}e.input.composing=!0}Fde(e,VGe)};function qGe(e){let{focusNode:t,focusOffset:r}=e.domSelectionRange();if(!t||t.nodeType!=1||r>=t.childNodes.length)return!1;let n=t.childNodes[r];return n.nodeType==1&&n.contentEditable=="false"}Jo.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,Fde(e,20))};function Fde(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>VT(e),t))}function Lde(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=KGe());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function GGe(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let r=Bqe(t.focusNode,t.focusOffset),n=Uqe(t.focusNode,t.focusOffset);if(r&&n&&r!=n){let i=n.pmViewDesc,a=e.domObserver.lastChangedTextNode;if(r==a||n==a)return a;if(!i||!i.isText(n.nodeValue))return n;if(e.input.compositionNode==n){let s=r.pmViewDesc;if(!(!s||!s.isText(r.nodeValue)))return n}}return r||n}function KGe(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function VT(e,t=!1){if(!(xh&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),Lde(e),t||e.docView&&e.docView.dirty){let r=uB(e),n=e.state.selection;return r&&!r.eq(n)?e.dispatch(e.state.tr.setSelection(r)):(e.markCursor||t)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function XGe(e,t){if(!e.dom.parentNode)return;let r=e.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(t),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),e.focus()},50)}const FS=Al&&O0<15||Oy&&Wqe<604;Qo.copy=Jo.cut=(e,t)=>{let r=t,n=e.state.selection,i=r.type=="cut";if(n.empty)return;let a=FS?null:r.clipboardData,s=n.content(),{dom:o,text:l}=fB(e,s);a?(r.preventDefault(),a.clearData(),a.setData("text/html",o.innerHTML),a.setData("text/plain",l)):XGe(e,o),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function YGe(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function QGe(e,t){if(!e.dom.parentNode)return;let r=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,n=e.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),n.parentNode&&n.parentNode.removeChild(n),r?LS(e,n.value,null,i,t):LS(e,n.textContent,n.innerHTML,i,t)},50)}function LS(e,t,r,n,i){let a=Tde(e,t,r,n,e.state.selection.$from);if(e.someProp("handlePaste",l=>l(e,i,a||Vt.empty)))return!0;if(!a)return!1;let s=YGe(a),o=s?e.state.tr.replaceSelectionWith(s,n):e.state.tr.replaceSelection(a);return e.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Bde(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let r=e.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}Jo.paste=(e,t)=>{let r=t;if(e.composing&&!xh)return;let n=FS?null:r.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;n&&LS(e,Bde(n),n.getData("text/html"),i,r)?r.preventDefault():QGe(e,r)};class Ude{constructor(t,r,n){this.slice=t,this.move=r,this.node=n}}const JGe=Xc?"altKey":"ctrlKey";function $de(e,t){let r=e.someProp("dragCopies",n=>!n(t));return r??!t[JGe]}Qo.dragstart=(e,t)=>{let r=t,n=e.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let i=e.state.selection,a=i.empty?null:e.posAtCoords(I3(r)),s;if(!(a&&a.pos>=i.from&&a.pos<=(i instanceof pr?i.to-1:i.to))){if(n&&n.mightDrag)s=pr.create(e.state.doc,n.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let f=e.docView.nearestDesc(r.target,!0);f&&f.node.type.spec.draggable&&f!=e.docView&&(s=pr.create(e.state.doc,f.posBefore))}}let o=(s||e.state.selection).content(),{dom:l,text:c,slice:d}=fB(e,o);(!r.dataTransfer.files.length||!ys||fde>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(FS?"Text":"text/html",l.innerHTML),r.dataTransfer.effectAllowed="copyMove",FS||r.dataTransfer.setData("text/plain",c),e.dragging=new Ude(d,$de(e,r),s)};Qo.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};Jo.dragover=Jo.dragenter=(e,t)=>t.preventDefault();Jo.drop=(e,t)=>{try{ZGe(e,t,e.dragging)}finally{e.dragging=null}};function ZGe(e,t,r){if(!t.dataTransfer)return;let n=e.posAtCoords(I3(t));if(!n)return;let i=e.state.doc.resolve(n.pos),a=r&&r.slice;a?e.someProp("transformPasted",m=>{a=m(a,e,!1)}):a=Tde(e,Bde(t.dataTransfer),FS?null:t.dataTransfer.getData("text/html"),!1,i);let s=!!(r&&$de(e,t));if(e.someProp("handleDrop",m=>m(e,t,a||Vt.empty,s))){t.preventDefault();return}if(!a)return;t.preventDefault();let o=a?Vue(e.state.doc,i.pos,a):i.pos;o==null&&(o=i.pos);let l=e.state.tr;if(s){let{node:m}=r;m?m.replace(l):l.deleteSelection()}let c=l.mapping.map(o),d=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,f=l.doc;if(d?l.replaceRangeWith(c,c,a.content.firstChild):l.replaceRange(c,c,a),l.doc.eq(f))return;let p=l.doc.resolve(c);if(d&&pr.isSelectable(a.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(a.content.firstChild))l.setSelection(new pr(p));else{let m=l.mapping.map(o);l.mapping.maps[l.mapping.maps.length-1].forEach((x,y,b,S)=>m=S),l.setSelection(dB(e,p,l.doc.resolve(m)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))}Qo.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Th(e)},20))};Qo.blur=(e,t)=>{let r=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),r.relatedTarget&&e.dom.contains(r.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};Qo.beforeinput=(e,t)=>{if(ys&&xh&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:n}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=n||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",a=>a(e,eg(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in Jo)Qo[e]=Jo[e];function BS(e,t){if(e==t)return!0;for(let r in e)if(e[r]!==t[r])return!1;for(let r in t)if(!(r in e))return!1;return!0}class qT{constructor(t,r){this.toDOM=t,this.spec=r||Bg,this.side=this.spec.side||0}map(t,r,n,i){let{pos:a,deleted:s}=t.mapResult(r.from+i,this.side<0?-1:1);return s?null:new xo(a-n,a-n,this)}valid(){return!0}eq(t){return this==t||t instanceof qT&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&BS(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class R0{constructor(t,r){this.attrs=t,this.spec=r||Bg}map(t,r,n,i){let a=t.map(r.from+i,this.spec.inclusiveStart?-1:1)-n,s=t.map(r.to+i,this.spec.inclusiveEnd?1:-1)-n;return a>=s?null:new xo(a,s,this)}valid(t,r){return r.from<r.to}eq(t){return this==t||t instanceof R0&&BS(this.attrs,t.attrs)&&BS(this.spec,t.spec)}static is(t){return t.type instanceof R0}destroy(){}}class gB{constructor(t,r){this.attrs=t,this.spec=r||Bg}map(t,r,n,i){let a=t.mapResult(r.from+i,1);if(a.deleted)return null;let s=t.mapResult(r.to+i,-1);return s.deleted||s.pos<=a.pos?null:new xo(a.pos-n,s.pos-n,this)}valid(t,r){let{index:n,offset:i}=t.content.findIndex(r.from),a;return i==r.from&&!(a=t.child(n)).isText&&i+a.nodeSize==r.to}eq(t){return this==t||t instanceof gB&&BS(this.attrs,t.attrs)&&BS(this.spec,t.spec)}destroy(){}}class xo{constructor(t,r,n){this.from=t,this.to=r,this.type=n}copy(t,r){return new xo(t,r,this.type)}eq(t,r=0){return this.type.eq(t.type)&&this.from+r==t.from&&this.to+r==t.to}map(t,r,n){return this.type.map(t,this,r,n)}static widget(t,r,n){return new xo(t,t,new qT(r,n))}static inline(t,r,n,i){return new xo(t,r,new R0(n,i))}static node(t,r,n,i){return new xo(t,r,new gB(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof R0}get widget(){return this.type instanceof qT}}const nv=[],Bg={};class Bi{constructor(t,r){this.local=t.length?t:nv,this.children=r.length?r:nv}static create(t,r){return r.length?GT(r,t,0,Bg):ao}find(t,r,n){let i=[];return this.findInner(t??0,r??1e9,i,0,n),i}findInner(t,r,n,i,a){for(let s=0;s<this.local.length;s++){let o=this.local[s];o.from<=r&&o.to>=t&&(!a||a(o.spec))&&n.push(o.copy(o.from+i,o.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<r&&this.children[s+1]>t){let o=this.children[s]+1;this.children[s+2].findInner(t-o,r-o,n,i+o,a)}}map(t,r,n){return this==ao||t.maps.length==0?this:this.mapInner(t,r,0,0,n||Bg)}mapInner(t,r,n,i,a){let s;for(let o=0;o<this.local.length;o++){let l=this.local[o].map(t,n,i);l&&l.type.valid(r,l)?(s||(s=[])).push(l):a.onRemove&&a.onRemove(this.local[o].spec)}return this.children.length?eKe(this.children,s||[],t,r,n,i,a):s?new Bi(s.sort(Ug),nv):ao}add(t,r){return r.length?this==ao?Bi.create(t,r):this.addInner(t,r,0):this}addInner(t,r,n){let i,a=0;t.forEach((o,l)=>{let c=l+n,d;if(d=Hde(r,o,c)){for(i||(i=this.children.slice());a<i.length&&i[a]<l;)a+=3;i[a]==l?i[a+2]=i[a+2].addInner(o,d,c+1):i.splice(a,0,l,l+o.nodeSize,GT(d,o,c+1,Bg)),a+=3}});let s=zde(a?Wde(r):r,-n);for(let o=0;o<s.length;o++)s[o].type.valid(t,s[o])||s.splice(o--,1);return new Bi(s.length?this.local.concat(s).sort(Ug):this.local,i||this.children)}remove(t){return t.length==0||this==ao?this:this.removeInner(t,0)}removeInner(t,r){let n=this.children,i=this.local;for(let a=0;a<n.length;a+=3){let s,o=n[a]+r,l=n[a+1]+r;for(let d=0,f;d<t.length;d++)(f=t[d])&&f.from>o&&f.to<l&&(t[d]=null,(s||(s=[])).push(f));if(!s)continue;n==this.children&&(n=this.children.slice());let c=n[a+2].removeInner(s,o+1);c!=ao?n[a+2]=c:(n.splice(a,3),a-=3)}if(i.length){for(let a=0,s;a<t.length;a++)if(s=t[a])for(let o=0;o<i.length;o++)i[o].eq(s,r)&&(i==this.local&&(i=this.local.slice()),i.splice(o--,1))}return n==this.children&&i==this.local?this:i.length||n.length?new Bi(i,n):ao}forChild(t,r){if(this==ao)return this;if(r.isLeaf)return Bi.empty;let n,i;for(let o=0;o<this.children.length;o+=3)if(this.children[o]>=t){this.children[o]==t&&(n=this.children[o+2]);break}let a=t+1,s=a+r.content.size;for(let o=0;o<this.local.length;o++){let l=this.local[o];if(l.from<s&&l.to>a&&l.type instanceof R0){let c=Math.max(a,l.from)-a,d=Math.min(s,l.to)-a;c<d&&(i||(i=[])).push(l.copy(c,d))}}if(i){let o=new Bi(i.sort(Ug),nv);return n?new t0([o,n]):o}return n||ao}eq(t){if(this==t)return!0;if(!(t instanceof Bi)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(t.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=t.children[r]||this.children[r+1]!=t.children[r+1]||!this.children[r+2].eq(t.children[r+2]))return!1;return!0}locals(t){return xB(this.localsInner(t))}localsInner(t){if(this==ao)return nv;if(t.inlineContent||!this.local.some(R0.is))return this.local;let r=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof R0||r.push(this.local[n]);return r}forEachSet(t){t(this)}}Bi.empty=new Bi([],[]);Bi.removeOverlap=xB;const ao=Bi.empty;class t0{constructor(t){this.members=t}map(t,r){const n=this.members.map(i=>i.map(t,r,Bg));return t0.from(n)}forChild(t,r){if(r.isLeaf)return Bi.empty;let n=[];for(let i=0;i<this.members.length;i++){let a=this.members[i].forChild(t,r);a!=ao&&(a instanceof t0?n=n.concat(a.members):n.push(a))}return t0.from(n)}eq(t){if(!(t instanceof t0)||t.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(t.members[r]))return!1;return!0}locals(t){let r,n=!0;for(let i=0;i<this.members.length;i++){let a=this.members[i].localsInner(t);if(a.length)if(!r)r=a;else{n&&(r=r.slice(),n=!1);for(let s=0;s<a.length;s++)r.push(a[s])}}return r?xB(n?r:r.sort(Ug)):nv}static from(t){switch(t.length){case 0:return ao;case 1:return t[0];default:return new t0(t.every(r=>r instanceof Bi)?t:t.reduce((r,n)=>r.concat(n instanceof Bi?n:n.members),[]))}}forEachSet(t){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(t)}}function eKe(e,t,r,n,i,a,s){let o=e.slice();for(let c=0,d=a;c<r.maps.length;c++){let f=0;r.maps[c].forEach((p,m,x,y)=>{let b=y-x-(m-p);for(let S=0;S<o.length;S+=3){let _=o[S+1];if(_<0||p>_+d-f)continue;let C=o[S]+d-f;m>=C?o[S+1]=p<=C?-2:-1:p>=d&&b&&(o[S]+=b,o[S+1]+=b)}f+=b}),d=r.maps[c].map(d,-1)}let l=!1;for(let c=0;c<o.length;c+=3)if(o[c+1]<0){if(o[c+1]==-2){l=!0,o[c+1]=-1;continue}let d=r.map(e[c]+a),f=d-i;if(f<0||f>=n.content.size){l=!0;continue}let p=r.map(e[c+1]+a,-1),m=p-i,{index:x,offset:y}=n.content.findIndex(f),b=n.maybeChild(x);if(b&&y==f&&y+b.nodeSize==m){let S=o[c+2].mapInner(r,b,d+1,e[c]+a+1,s);S!=ao?(o[c]=f,o[c+1]=m,o[c+2]=S):(o[c+1]=-2,l=!0)}else l=!0}if(l){let c=tKe(o,e,t,r,i,a,s),d=GT(c,n,0,s);t=d.local;for(let f=0;f<o.length;f+=3)o[f+1]<0&&(o.splice(f,3),f-=3);for(let f=0,p=0;f<d.children.length;f+=3){let m=d.children[f];for(;p<o.length&&o[p]<m;)p+=3;o.splice(p,0,d.children[f],d.children[f+1],d.children[f+2])}}return new Bi(t.sort(Ug),o)}function zde(e,t){if(!t||!e.length)return e;let r=[];for(let n=0;n<e.length;n++){let i=e[n];r.push(new xo(i.from+t,i.to+t,i.type))}return r}function tKe(e,t,r,n,i,a,s){function o(l,c){for(let d=0;d<l.local.length;d++){let f=l.local[d].map(n,i,c);f?r.push(f):s.onRemove&&s.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)o(l.children[d+2],l.children[d]+c+1)}for(let l=0;l<e.length;l+=3)e[l+1]==-1&&o(e[l+2],t[l]+a+1);return r}function Hde(e,t,r){if(t.isLeaf)return null;let n=r+t.nodeSize,i=null;for(let a=0,s;a<e.length;a++)(s=e[a])&&s.from>r&&s.to<n&&((i||(i=[])).push(s),e[a]=null);return i}function Wde(e){let t=[];for(let r=0;r<e.length;r++)e[r]!=null&&t.push(e[r]);return t}function GT(e,t,r,n){let i=[],a=!1;t.forEach((o,l)=>{let c=Hde(e,o,l+r);if(c){a=!0;let d=GT(c,o,r+l+1,n);d!=ao&&i.push(l,l+o.nodeSize,d)}});let s=zde(a?Wde(e):e,-r).sort(Ug);for(let o=0;o<s.length;o++)s[o].type.valid(t,s[o])||(n.onRemove&&n.onRemove(s[o].spec),s.splice(o--,1));return s.length||i.length?new Bi(s,i):ao}function Ug(e,t){return e.from-t.from||e.to-t.to}function xB(e){let t=e;for(let r=0;r<t.length-1;r++){let n=t[r];if(n.from!=n.to)for(let i=r+1;i<t.length;i++){let a=t[i];if(a.from==n.from){a.to!=n.to&&(t==e&&(t=e.slice()),t[i]=a.copy(a.from,n.to),GX(t,i+1,a.copy(n.to,a.to)));continue}else{a.from<n.to&&(t==e&&(t=e.slice()),t[r]=n.copy(n.from,a.from),GX(t,i,n.copy(a.from,n.to)));break}}}return t}function GX(e,t,r){for(;t<e.length&&Ug(r,e[t])>0;)t++;e.splice(t,0,r)}function FD(e){let t=[];return e.someProp("decorations",r=>{let n=r(e.state);n&&n!=ao&&t.push(n)}),e.cursorWrapper&&t.push(Bi.create(e.state.doc,[e.cursorWrapper.deco])),t0.from(t)}const rKe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},nKe=Al&&O0<=11;class iKe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class aKe{constructor(t,r){this.view=t,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new iKe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let i=0;i<n.length;i++)this.queue.push(n[i]);Al&&O0<=11&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),nKe&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,rKe)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let r=0;r<t.length;r++)this.queue.push(t[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(BX(this.view)){if(this.suppressingSelectionUpdates)return Th(this.view);if(Al&&O0<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&xx(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let r=new Set,n;for(let a=t.focusNode;a;a=Iy(a))r.add(a);for(let a=t.anchorNode;a;a=Iy(a))if(r.has(a)){n=a;break}let i=n&&this.view.docView.nearestDesc(n);if(i&&i.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&BX(t)&&!this.ignoreSelectionChange(n),a=-1,s=-1,o=!1,l=[];if(t.editable)for(let d=0;d<r.length;d++){let f=this.registerMutation(r[d],l);f&&(a=a<0?f.from:Math.min(f.from,a),s=s<0?f.to:Math.max(f.to,s),f.typeOver&&(o=!0))}if(ou&&l.length){let d=l.filter(f=>f.nodeName=="BR");if(d.length==2){let[f,p]=d;f.parentNode&&f.parentNode.parentNode==p.parentNode?p.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let p of d){let m=p.parentNode;m&&m.nodeName=="LI"&&(!f||lKe(t,f)!=m)&&p.remove()}}}else if((ys||So)&&l.some(d=>d.nodeName=="BR")&&(t.input.lastKeyCode==8||t.input.lastKeyCode==46)){for(let d of l)if(d.nodeName=="BR"&&d.parentNode){let f=d.nextSibling;f&&f.nodeType==1&&f.contentEditable=="false"&&d.parentNode.removeChild(d)}}let c=null;a<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&A3(n)&&(c=uB(t))&&c.eq(pn.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Th(t),this.currentSelection.set(n),t.scrollToSelection()):(a>-1||i)&&(a>-1&&(t.docView.markDirty(a,s),sKe(t)),this.handleDOMChange(a,s,o,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(n)||Th(t),this.currentSelection.set(n))}registerMutation(t,r){if(r.indexOf(t.target)>-1)return null;let n=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(n==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!n||n.ignoreMutation(t))return null;if(t.type=="childList"){for(let d=0;d<t.addedNodes.length;d++){let f=t.addedNodes[d];r.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(t.target))return{from:n.posBefore,to:n.posAfter};let i=t.previousSibling,a=t.nextSibling;if(Al&&O0<=11&&t.addedNodes.length)for(let d=0;d<t.addedNodes.length;d++){let{previousSibling:f,nextSibling:p}=t.addedNodes[d];(!f||Array.prototype.indexOf.call(t.addedNodes,f)<0)&&(i=f),(!p||Array.prototype.indexOf.call(t.addedNodes,p)<0)&&(a=p)}let s=i&&i.parentNode==t.target?Bs(i)+1:0,o=n.localPosFromDOM(t.target,s,-1),l=a&&a.parentNode==t.target?Bs(a):t.target.childNodes.length,c=n.localPosFromDOM(t.target,l,1);return{from:o,to:c}}else return t.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=t.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let KX=new WeakMap,XX=!1;function sKe(e){if(!KX.has(e)&&(KX.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=ou,XX)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),XX=!0}}function YX(e,t){let r=t.startContainer,n=t.startOffset,i=t.endContainer,a=t.endOffset,s=e.domAtPos(e.state.selection.anchor);return xx(s.node,s.offset,i,a)&&([r,n,i,a]=[i,a,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:a}}function oKe(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return YX(e,i)}let r;function n(i){i.preventDefault(),i.stopImmediatePropagation(),r=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",n,!0),r?YX(e,r):null}function lKe(e,t){for(let r=t.parentNode;r&&r!=e.dom;r=r.parentNode){let n=e.docView.nearestDesc(r,!0);if(n&&n.node.isBlock)return r}return null}function cKe(e,t,r){let{node:n,fromOffset:i,toOffset:a,from:s,to:o}=e.docView.parseRange(t,r),l=e.domSelectionRange(),c,d=l.anchorNode;if(d&&e.dom.contains(d.nodeType==1?d:d.parentNode)&&(c=[{node:d,offset:l.anchorOffset}],A3(l)||c.push({node:l.focusNode,offset:l.focusOffset})),ys&&e.input.lastKeyCode===8)for(let b=a;b>i;b--){let S=n.childNodes[b-1],_=S.pmViewDesc;if(S.nodeName=="BR"&&!_){a=b;break}if(!_||_.size)break}let f=e.state.doc,p=e.someProp("domParser")||j2.fromSchema(e.state.schema),m=f.resolve(s),x=null,y=p.parse(n,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:i,to:a,preserveWhitespace:m.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:uKe,context:m});if(c&&c[0].pos!=null){let b=c[0].pos,S=c[1]&&c[1].pos;S==null&&(S=b),x={anchor:b+s,head:S+s}}return{doc:y,sel:x,from:s,to:o}}function uKe(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(So&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(e.parentNode.lastChild==e||So&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const dKe=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function fKe(e,t,r,n,i){let a=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let O=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,D=uB(e,O);if(D&&!e.state.selection.eq(D)){if(ys&&xh&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",B=>B(e,eg(13,"Enter"))))return;let L=e.state.tr.setSelection(D);O=="pointer"?L.setMeta("pointer",!0):O=="key"&&L.scrollIntoView(),a&&L.setMeta("composition",a),e.dispatch(L)}return}let s=e.state.doc.resolve(t),o=s.sharedDepth(r);t=s.before(o+1),r=e.state.doc.resolve(r).after(o+1);let l=e.state.selection,c=cKe(e,t,r),d=e.state.doc,f=d.slice(c.from,c.to),p,m;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(p=e.state.selection.to,m="end"):(p=e.state.selection.from,m="start"),e.input.lastKeyCode=null;let x=mKe(f.content,c.doc.content,c.from,p,m);if(x&&e.input.domChangeCount++,(Oy&&e.input.lastIOSEnter>Date.now()-225||xh)&&i.some(O=>O.nodeType==1&&!dKe.test(O.nodeName))&&(!x||x.endA>=x.endB)&&e.someProp("handleKeyDown",O=>O(e,eg(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!x)if(n&&l instanceof zr&&!l.empty&&l.$head.sameParent(l.$anchor)&&!e.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))x={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let O=QX(e,e.state.doc,c.sel);if(O&&!O.eq(e.state.selection)){let D=e.state.tr.setSelection(O);a&&D.setMeta("composition",a),e.dispatch(D)}}return}e.state.selection.from<e.state.selection.to&&x.start==x.endB&&e.state.selection instanceof zr&&(x.start>e.state.selection.from&&x.start<=e.state.selection.from+2&&e.state.selection.from>=c.from?x.start=e.state.selection.from:x.endA<e.state.selection.to&&x.endA>=e.state.selection.to-2&&e.state.selection.to<=c.to&&(x.endB+=e.state.selection.to-x.endA,x.endA=e.state.selection.to)),Al&&O0<=11&&x.endB==x.start+1&&x.endA==x.start&&x.start>c.from&&c.doc.textBetween(x.start-c.from-1,x.start-c.from+1)==" "&&(x.start--,x.endA--,x.endB--);let y=c.doc.resolveNoCache(x.start-c.from),b=c.doc.resolveNoCache(x.endB-c.from),S=d.resolve(x.start),_=y.sameParent(b)&&y.parent.inlineContent&&S.end()>=x.endA;if((Oy&&e.input.lastIOSEnter>Date.now()-225&&(!_||i.some(O=>O.nodeName=="DIV"||O.nodeName=="P"))||!_&&y.pos<c.doc.content.size&&(!y.sameParent(b)||!y.parent.inlineContent)&&y.pos<b.pos&&!/\S/.test(c.doc.textBetween(y.pos,b.pos,"","")))&&e.someProp("handleKeyDown",O=>O(e,eg(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>x.start&&pKe(d,x.start,x.endA,y,b)&&e.someProp("handleKeyDown",O=>O(e,eg(8,"Backspace")))){xh&&ys&&e.domObserver.suppressSelectionUpdates();return}ys&&x.endB==x.start&&(e.input.lastChromeDelete=Date.now()),xh&&!_&&y.start()!=b.start()&&b.parentOffset==0&&y.depth==b.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==x.endA&&(x.endB-=2,b=c.doc.resolveNoCache(x.endB-c.from),setTimeout(()=>{e.someProp("handleKeyDown",function(O){return O(e,eg(13,"Enter"))})},20));let C=x.start,A=x.endA,j=O=>{let D=O||e.state.tr.replace(C,A,c.doc.slice(x.start-c.from,x.endB-c.from));if(c.sel){let L=QX(e,D.doc,c.sel);L&&!(ys&&e.composing&&L.empty&&(x.start!=x.endB||e.input.lastChromeDelete<Date.now()-100)&&(L.head==C||L.head==D.mapping.map(A)-1)||Al&&L.empty&&L.head==C)&&D.setSelection(L)}return a&&D.setMeta("composition",a),D.scrollIntoView()},P;if(_)if(y.pos==b.pos){Al&&O0<=11&&y.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Th(e),20));let O=j(e.state.tr.delete(C,A)),D=d.resolve(x.start).marksAcross(d.resolve(x.endA));D&&O.ensureMarks(D),e.dispatch(O)}else if(x.endA==x.endB&&(P=hKe(y.parent.content.cut(y.parentOffset,b.parentOffset),S.parent.content.cut(S.parentOffset,x.endA-S.start())))){let O=j(e.state.tr);P.type=="add"?O.addMark(C,A,P.mark):O.removeMark(C,A,P.mark),e.dispatch(O)}else if(y.parent.child(y.index()).isText&&y.index()==b.index()-(b.textOffset?0:1)){let O=y.parent.textBetween(y.parentOffset,b.parentOffset),D=()=>j(e.state.tr.insertText(O,C,A));e.someProp("handleTextInput",L=>L(e,C,A,O,D))||e.dispatch(D())}else e.dispatch(j());else e.dispatch(j())}function QX(e,t,r){return Math.max(r.anchor,r.head)>t.content.size?null:dB(e,t.resolve(r.anchor),t.resolve(r.head))}function hKe(e,t){let r=e.firstChild.marks,n=t.firstChild.marks,i=r,a=n,s,o,l;for(let d=0;d<n.length;d++)i=n[d].removeFromSet(i);for(let d=0;d<r.length;d++)a=r[d].removeFromSet(a);if(i.length==1&&a.length==0)o=i[0],s="add",l=d=>d.mark(o.addToSet(d.marks));else if(i.length==0&&a.length==1)o=a[0],s="remove",l=d=>d.mark(o.removeFromSet(d.marks));else return null;let c=[];for(let d=0;d<t.childCount;d++)c.push(l(t.child(d)));if(It.from(c).eq(e))return{mark:o,type:s}}function pKe(e,t,r,n,i){if(r-t<=i.pos-n.pos||LD(n,!0,!1)<i.pos)return!1;let a=e.resolve(t);if(!n.parent.isTextblock){let o=a.nodeAfter;return o!=null&&r==t+o.nodeSize}if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;let s=e.resolve(LD(a,!0,!0));return!s.parent.isTextblock||s.pos>r||LD(s,!0,!1)<r?!1:n.parent.content.cut(n.parentOffset).eq(s.parent.content)}function LD(e,t,r){let n=e.depth,i=t?e.end():e.pos;for(;n>0&&(t||e.indexAfter(n)==e.node(n).childCount);)n--,i++,t=!1;if(r){let a=e.node(n).maybeChild(e.indexAfter(n));for(;a&&!a.isLeaf;)a=a.firstChild,i++}return i}function mKe(e,t,r,n,i){let a=e.findDiffStart(t,r);if(a==null)return null;let{a:s,b:o}=e.findDiffEnd(t,r+e.size,r+t.size);if(i=="end"){let l=Math.max(0,a-Math.min(s,o));n-=s+l-a}if(s<a&&e.size<t.size){let l=n<=a&&n>=s?a-n:0;a-=l,a&&a<t.size&&JX(t.textBetween(a-1,a+1))&&(a+=l?1:-1),o=a+(o-s),s=a}else if(o<a){let l=n<=a&&n>=o?a-n:0;a-=l,a&&a<e.size&&JX(e.textBetween(a-1,a+1))&&(a+=l?1:-1),s=a+(s-o),o=a}return{start:a,endA:s,endB:o}}function JX(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),r=e.charCodeAt(1);return t>=56320&&t<=57343&&r>=55296&&r<=56319}class Vde{constructor(t,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new PGe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(nY),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=tY(this),eY(this),this.nodeViews=rY(this),this.docView=RX(this.state.doc,ZX(this),FD(this),this.dom,this),this.domObserver=new aKe(this,(n,i,a,s)=>fKe(this,n,i,a,s)),this.domObserver.start(),RGe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let r in t)this._props[r]=t[r];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&pF(this);let r=this._props;this._props=t,t.plugins&&(t.plugins.forEach(nY),this.directPlugins=t.plugins),this.updateStateInner(t.state,r)}setProps(t){let r={};for(let n in this._props)r[n]=this._props[n];r.state=this.state;for(let n in t)r[n]=t[n];this.update(r)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,r){var n;let i=this.state,a=!1,s=!1;t.storedMarks&&this.composing&&(Lde(this),s=!0),this.state=t;let o=i.plugins!=t.plugins||this._props.plugins!=r.plugins;if(o||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let m=rY(this);xKe(m,this.nodeViews)&&(this.nodeViews=m,a=!0)}(o||r.handleDOMEvents!=this._props.handleDOMEvents)&&pF(this),this.editable=tY(this),eY(this);let l=FD(this),c=ZX(this),d=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=a||!this.docView.matchesNode(t.doc,c,l);(f||!t.selection.eq(i.selection))&&(s=!0);let p=d=="preserve"&&s&&this.dom.style.overflowAnchor==null&&Gqe(this);if(s){this.domObserver.stop();let m=f&&(Al||ys)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&gKe(i.selection,t.selection);if(f){let x=ys?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=GGe(this)),(a||!this.docView.update(t.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=RX(t.doc,c,l,this.dom,this)),x&&!this.trackWrites&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&xGe(this))?Th(this,m):(_de(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((n=this.dragging)===null||n===void 0)&&n.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():p&&Kqe(p)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof pr){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&NX(this,r.getBoundingClientRect(),t)}else NX(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let n=this.pluginViews[r];n.update&&n.update(this,t)}}updateDraggedNode(t,r){let n=t.node,i=-1;if(this.state.doc.nodeAt(n.from)==n.node)i=n.from;else{let a=n.from+(this.state.doc.content.size-r.doc.content.size);(a>0&&this.state.doc.nodeAt(a))==n.node&&(i=a)}this.dragging=new Ude(t.slice,t.move,i<0?void 0:pr.create(this.state.doc,i))}someProp(t,r){let n=this._props&&this._props[t],i;if(n!=null&&(i=r?r(n):n))return i;for(let s=0;s<this.directPlugins.length;s++){let o=this.directPlugins[s].props[t];if(o!=null&&(i=r?r(o):o))return i}let a=this.state.plugins;if(a)for(let s=0;s<a.length;s++){let o=a[s].props[t];if(o!=null&&(i=r?r(o):o))return i}}hasFocus(){if(Al){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Xqe(this.dom),Th(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return t||document}updateRoot(){this._root=null}posAtCoords(t){return eGe(this,t)}coordsAtPos(t,r=1){return vde(this,t,r)}domAtPos(t,r=0){return this.docView.domFromPos(t,r)}nodeDOM(t){let r=this.docView.descAt(t);return r?r.nodeDOM:null}posAtDOM(t,r,n=-1){let i=this.docView.posFromDOM(t,r,n);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,r){return aGe(this,r||this.state,t)}pasteHTML(t,r){return LS(this,"",t,!1,r||new ClipboardEvent("paste"))}pasteText(t,r){return LS(this,t,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(t){return fB(this,t)}destroy(){this.docView&&(jGe(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],FD(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Fqe())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return MGe(this,t)}domSelectionRange(){let t=this.domSelection();return t?So&&this.root.nodeType===11&&zqe(this.dom.ownerDocument)==this.dom&&oKe(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}Vde.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function ZX(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(e.state)),r)for(let n in r)n=="class"?t.class+=" "+r[n]:n=="style"?t.style=(t.style?t.style+";":"")+r[n]:!t[n]&&n!="contenteditable"&&n!="nodeName"&&(t[n]=String(r[n]))}),t.translate||(t.translate="no"),[xo.node(0,e.state.doc.content.size,t)]}function eY(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:xo.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function tY(e){return!e.someProp("editable",t=>t(e.state)===!1)}function gKe(e,t){let r=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(r)!=t.$anchor.start(r)}function rY(e){let t=Object.create(null);function r(n){for(let i in n)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=n[i])}return e.someProp("nodeViews",r),e.someProp("markViews",r),t}function xKe(e,t){let r=0,n=0;for(let i in e){if(e[i]!=t[i])return!0;r++}for(let i in t)n++;return r!=n}function nY(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var H0={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},KT={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},vKe=typeof navigator<"u"&&/Mac/.test(navigator.platform),yKe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Us=0;Us<10;Us++)H0[48+Us]=H0[96+Us]=String(Us);for(var Us=1;Us<=24;Us++)H0[Us+111]="F"+Us;for(var Us=65;Us<=90;Us++)H0[Us]=String.fromCharCode(Us+32),KT[Us]=String.fromCharCode(Us);for(var BD in H0)KT.hasOwnProperty(BD)||(KT[BD]=H0[BD]);function bKe(e){var t=vKe&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||yKe&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",r=!t&&e.key||(e.shiftKey?KT:H0)[e.keyCode]||e.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}const wKe=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),SKe=typeof navigator<"u"&&/Win/.test(navigator.platform);function EKe(e){let t=e.split(/-(?!$)/),r=t[t.length-1];r=="Space"&&(r=" ");let n,i,a,s;for(let o=0;o<t.length-1;o++){let l=t[o];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))a=!0;else if(/^mod$/i.test(l))wKe?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return n&&(r="Alt-"+r),i&&(r="Ctrl-"+r),s&&(r="Meta-"+r),a&&(r="Shift-"+r),r}function CKe(e){let t=Object.create(null);for(let r in e)t[EKe(r)]=e[r];return t}function UD(e,t,r=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),r&&t.shiftKey&&(e="Shift-"+e),e}function kKe(e){return new Hi({props:{handleKeyDown:qde(e)}})}function qde(e){let t=CKe(e);return function(r,n){let i=bKe(n),a,s=t[UD(i,n)];if(s&&s(r.state,r.dispatch,r))return!0;if(i.length==1&&i!=" "){if(n.shiftKey){let o=t[UD(i,n,!1)];if(o&&o(r.state,r.dispatch,r))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(SKe&&n.ctrlKey&&n.altKey)&&(a=H0[n.keyCode])&&a!=i){let o=t[UD(a,n)];if(o&&o(r.state,r.dispatch,r))return!0}}return!1}}var _Ke=Object.defineProperty,vB=(e,t)=>{for(var r in t)_Ke(e,r,{get:t[r],enumerable:!0})};function O3(e){const{state:t,transaction:r}=e;let{selection:n}=r,{doc:i}=r,{storedMarks:a}=r;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return a},get selection(){return n},get doc(){return i},get tr(){return n=r.selection,i=r.doc,a=r.storedMarks,r}}}var P3=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:n}=t,{tr:i}=r,a=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([s,o])=>[s,(...c)=>{const d=o(...c)(a);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&n.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:n,state:i}=this,{view:a}=n,s=[],o=!!e,l=e||i.tr,c=()=>(!o&&t&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(l),s.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,p])=>[f,(...x)=>{const y=this.buildProps(l,t),b=p(...x)(y);return s.push(b),d}])),run:c};return d}createCan(e){const{rawCommands:t,state:r}=this,n=!1,i=e||r.tr,a=this.buildProps(i,n);return{...Object.fromEntries(Object.entries(t).map(([o,l])=>[o,(...c)=>l(...c)({...a,dispatch:void 0})])),chain:()=>this.createChain(i,n)}}buildProps(e,t=!0){const{rawCommands:r,editor:n,state:i}=this,{view:a}=n,s={tr:e,editor:n,view:a,state:O3({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([o,l])=>[o,(...c)=>l(...c)(s)]))}};return s}},Gde={};vB(Gde,{blur:()=>NKe,clearContent:()=>AKe,clearNodes:()=>TKe,command:()=>IKe,createParagraphNear:()=>OKe,cut:()=>PKe,deleteCurrentNode:()=>RKe,deleteNode:()=>jKe,deleteRange:()=>DKe,deleteSelection:()=>MKe,enter:()=>FKe,exitCode:()=>LKe,extendMarkRange:()=>BKe,first:()=>UKe,focus:()=>$Ke,forEach:()=>zKe,insertContent:()=>HKe,insertContentAt:()=>qKe,joinBackward:()=>XKe,joinDown:()=>KKe,joinForward:()=>YKe,joinItemBackward:()=>QKe,joinItemForward:()=>JKe,joinTextblockBackward:()=>ZKe,joinTextblockForward:()=>eXe,joinUp:()=>GKe,keyboardShortcut:()=>rXe,lift:()=>nXe,liftEmptyBlock:()=>iXe,liftListItem:()=>aXe,newlineInCode:()=>sXe,resetAttributes:()=>oXe,scrollIntoView:()=>lXe,selectAll:()=>cXe,selectNodeBackward:()=>uXe,selectNodeForward:()=>dXe,selectParentNode:()=>fXe,selectTextblockEnd:()=>hXe,selectTextblockStart:()=>pXe,setContent:()=>mXe,setMark:()=>DXe,setMeta:()=>MXe,setNode:()=>FXe,setNodeSelection:()=>LXe,setTextDirection:()=>BXe,setTextSelection:()=>UXe,sinkListItem:()=>$Xe,splitBlock:()=>zXe,splitListItem:()=>HXe,toggleList:()=>WXe,toggleMark:()=>VXe,toggleNode:()=>qXe,toggleWrap:()=>GXe,undoInputRule:()=>KXe,unsetAllMarks:()=>XXe,unsetMark:()=>YXe,unsetTextDirection:()=>QXe,updateAttributes:()=>JXe,wrapIn:()=>ZXe,wrapInList:()=>eYe});var NKe=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var r;e.isDestroyed||(t.dom.blur(),(r=window==null?void 0:window.getSelection())==null||r.removeAllRanges())}),!0),AKe=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),TKe=()=>({state:e,tr:t,dispatch:r})=>{const{selection:n}=t,{ranges:i}=n;return r&&i.forEach(({$from:a,$to:s})=>{e.doc.nodesBetween(a.pos,s.pos,(o,l)=>{if(o.type.isText)return;const{doc:c,mapping:d}=t,f=c.resolve(d.map(l)),p=c.resolve(d.map(l+o.nodeSize)),m=f.blockRange(p);if(!m)return;const x=Ab(m);if(o.type.isTextblock){const{defaultType:y}=f.parent.contentMatchAt(f.index());t.setNodeMarkup(m.start,y)}(x||x===0)&&t.lift(m,x)})}),!0},IKe=e=>t=>e(t),OKe=()=>({state:e,dispatch:t})=>ode(e,t),PKe=(e,t)=>({editor:r,tr:n})=>{const{state:i}=r,a=i.doc.slice(e.from,e.to);n.deleteRange(e.from,e.to);const s=n.mapping.map(t);return n.insert(s,a.content),n.setSelection(new zr(n.doc.resolve(Math.max(s-1,0)))),!0},RKe=()=>({tr:e,dispatch:t})=>{const{selection:r}=e,n=r.$anchor.node();if(n.content.size>0)return!1;const i=e.selection.$anchor;for(let a=i.depth;a>0;a-=1)if(i.node(a).type===n.type){if(t){const o=i.before(a),l=i.after(a);e.delete(o,l).scrollIntoView()}return!0}return!1};function Ba(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}var jKe=e=>({tr:t,state:r,dispatch:n})=>{const i=Ba(e,r.schema),a=t.selection.$anchor;for(let s=a.depth;s>0;s-=1)if(a.node(s).type===i){if(n){const l=a.before(s),c=a.after(s);t.delete(l,c).scrollIntoView()}return!0}return!1},DKe=e=>({tr:t,dispatch:r})=>{const{from:n,to:i}=e;return r&&t.delete(n,i),!0},MKe=()=>({state:e,dispatch:t})=>iB(e,t),FKe=()=>({commands:e})=>e.keyboardShortcut("Enter"),LKe=()=>({state:e,dispatch:t})=>Sqe(e,t);function yB(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function XT(e,t,r={strict:!0}){const n=Object.keys(t);return n.length?n.every(i=>r.strict?t[i]===e[i]:yB(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function Kde(e,t,r={}){return e.find(n=>n.type===t&&XT(Object.fromEntries(Object.keys(r).map(i=>[i,n.attrs[i]])),r))}function iY(e,t,r={}){return!!Kde(e,t,r)}function bB(e,t,r){var n;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if((!i.node||!i.node.marks.some(d=>d.type===t))&&(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(d=>d.type===t)||(r=r||((n=i.node.marks[0])==null?void 0:n.attrs),!Kde([...i.node.marks],t,r)))return;let s=i.index,o=e.start()+i.offset,l=s+1,c=o+i.node.nodeSize;for(;s>0&&iY([...e.parent.child(s-1).marks],t,r);)s-=1,o-=e.parent.child(s).nodeSize;for(;l<e.parent.childCount&&iY([...e.parent.child(l).marks],t,r);)c+=e.parent.child(l).nodeSize,l+=1;return{from:o,to:c}}function sp(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}var BKe=(e,t={})=>({tr:r,state:n,dispatch:i})=>{const a=sp(e,n.schema),{doc:s,selection:o}=r,{$from:l,from:c,to:d}=o;if(i){const f=bB(l,a,t);if(f&&f.from<=c&&f.to>=d){const p=zr.create(s,f.from,f.to);r.setSelection(p)}}return!0},UKe=e=>t=>{const r=typeof e=="function"?e(t):e;for(let n=0;n<r.length;n+=1)if(r[n](t))return!0;return!1};function Xde(e){return e instanceof zr}function gg(e=0,t=0,r=0){return Math.min(Math.max(e,t),r)}function Yde(e,t=null){if(!t)return null;const r=pn.atStart(e),n=pn.atEnd(e);if(t==="start"||t===!0)return r;if(t==="end")return n;const i=r.from,a=n.to;return t==="all"?zr.create(e,gg(0,i,a),gg(e.content.size,i,a)):zr.create(e,gg(t,i,a),gg(t,i,a))}function Qde(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function R3(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var $Ke=(e=null,t={})=>({editor:r,view:n,tr:i,dispatch:a})=>{t={scrollIntoView:!0,...t};const s=()=>{(R3()||Qde())&&n.dom.focus(),requestAnimationFrame(()=>{r.isDestroyed||(n.focus(),t!=null&&t.scrollIntoView&&r.commands.scrollIntoView())})};if(n.hasFocus()&&e===null||e===!1)return!0;if(a&&e===null&&!Xde(r.state.selection))return s(),!0;const o=Yde(i.doc,e)||r.state.selection,l=r.state.selection.eq(o);return a&&(l||i.setSelection(o),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},zKe=(e,t)=>r=>e.every((n,i)=>t(n,{...r,index:i})),HKe=(e,t)=>({tr:r,commands:n})=>n.insertContentAt({from:r.selection.from,to:r.selection.to},e,t),Jde=e=>{const t=e.childNodes;for(let r=t.length-1;r>=0;r-=1){const n=t[r];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?e.removeChild(n):n.nodeType===1&&Jde(n)}return e};function G_(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,r=new window.DOMParser().parseFromString(t,"text/html").body;return Jde(r)}function US(e,t,r){if(e instanceof Nh||e instanceof It)return e;r={slice:!0,parseOptions:{},...r};const n=typeof e=="object"&&e!==null,i=typeof e=="string";if(n)try{if(Array.isArray(e)&&e.length>0)return It.fromArray(e.map(o=>t.nodeFromJSON(o)));const s=t.nodeFromJSON(e);return r.errorOnInvalidContent&&s.check(),s}catch(a){if(r.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:a});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",a),US("",t,r)}if(i){if(r.errorOnInvalidContent){let s=!1,o="";const l=new jue({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,o=typeof c=="string"?c:c.outerHTML,null)}]}})});if(r.slice?j2.fromSchema(l).parseSlice(G_(e),r.parseOptions):j2.fromSchema(l).parse(G_(e),r.parseOptions),r.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${o}`)})}const a=j2.fromSchema(t);return r.slice?a.parseSlice(G_(e),r.parseOptions).content:a.parse(G_(e),r.parseOptions)}return US("",t,r)}function WKe(e,t,r){const n=e.steps.length-1;if(n<t)return;const i=e.steps[n];if(!(i instanceof xs||i instanceof Ss))return;const a=e.mapping.maps[n];let s=0;a.forEach((o,l,c,d)=>{s===0&&(s=d)}),e.setSelection(pn.near(e.doc.resolve(s),r))}var VKe=e=>!("type"in e),qKe=(e,t,r)=>({tr:n,dispatch:i,editor:a})=>{var s;if(i){r={parseOptions:a.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let o;const l=b=>{a.emit("contentError",{editor:a,error:b,disableCollaboration:()=>{"collaboration"in a.storage&&typeof a.storage.collaboration=="object"&&a.storage.collaboration&&(a.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...r.parseOptions};if(!r.errorOnInvalidContent&&!a.options.enableContentCheck&&a.options.emitContentError)try{US(t,a.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(b){l(b)}try{o=US(t,a.schema,{parseOptions:c,errorOnInvalidContent:(s=r.errorOnInvalidContent)!=null?s:a.options.enableContentCheck})}catch(b){return l(b),!1}let{from:d,to:f}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},p=!0,m=!0;if((VKe(o)?o:[o]).forEach(b=>{b.check(),p=p?b.isText&&b.marks.length===0:!1,m=m?b.isBlock:!1}),d===f&&m){const{parent:b}=n.doc.resolve(d);b.isTextblock&&!b.type.spec.code&&!b.childCount&&(d-=1,f+=1)}let y;if(p){if(Array.isArray(t))y=t.map(b=>b.text||"").join("");else if(t instanceof It){let b="";t.forEach(S=>{S.text&&(b+=S.text)}),y=b}else typeof t=="object"&&t&&t.text?y=t.text:y=t;n.insertText(y,d,f)}else{y=o;const b=n.doc.resolve(d),S=b.node(),_=b.parentOffset===0,C=S.isText||S.isTextblock,A=S.content.size>0;_&&C&&A&&(d=Math.max(0,d-1)),n.replaceWith(d,f,y)}r.updateSelection&&WKe(n,n.steps.length-1,-1),r.applyInputRules&&n.setMeta("applyInputRules",{from:d,text:y}),r.applyPasteRules&&n.setMeta("applyPasteRules",{from:d,text:y})}return!0},GKe=()=>({state:e,dispatch:t})=>yqe(e,t),KKe=()=>({state:e,dispatch:t})=>bqe(e,t),XKe=()=>({state:e,dispatch:t})=>ede(e,t),YKe=()=>({state:e,dispatch:t})=>ide(e,t),QKe=()=>({state:e,dispatch:t,tr:r})=>{try{const n=k3(e.doc,e.selection.$from.pos,-1);return n==null?!1:(r.join(n,2),t&&t(r),!0)}catch{return!1}},JKe=()=>({state:e,dispatch:t,tr:r})=>{try{const n=k3(e.doc,e.selection.$from.pos,1);return n==null?!1:(r.join(n,2),t&&t(r),!0)}catch{return!1}},ZKe=()=>({state:e,dispatch:t})=>xqe(e,t),eXe=()=>({state:e,dispatch:t})=>vqe(e,t);function Zde(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function tXe(e){const t=e.split(/-(?!$)/);let r=t[t.length-1];r==="Space"&&(r=" ");let n,i,a,s;for(let o=0;o<t.length-1;o+=1){const l=t[o];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))a=!0;else if(/^mod$/i.test(l))R3()||Zde()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return n&&(r=`Alt-${r}`),i&&(r=`Ctrl-${r}`),s&&(r=`Meta-${r}`),a&&(r=`Shift-${r}`),r}var rXe=e=>({editor:t,view:r,tr:n,dispatch:i})=>{const a=tXe(e).split(/-(?!$)/),s=a.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),o=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{r.someProp("handleKeyDown",c=>c(r,o))});return l==null||l.steps.forEach(c=>{const d=c.map(n.mapping);d&&i&&n.maybeStep(d)}),!0};function W0(e,t,r={}){const{from:n,to:i,empty:a}=e.selection,s=t?Ba(t,e.schema):null,o=[];e.doc.nodesBetween(n,i,(f,p)=>{if(f.isText)return;const m=Math.max(n,p),x=Math.min(i,p+f.nodeSize);o.push({node:f,from:m,to:x})});const l=i-n,c=o.filter(f=>s?s.name===f.node.type.name:!0).filter(f=>XT(f.node.attrs,r,{strict:!1}));return a?!!c.length:c.reduce((f,p)=>f+p.to-p.from,0)>=l}var nXe=(e,t={})=>({state:r,dispatch:n})=>{const i=Ba(e,r.schema);return W0(r,i,t)?wqe(r,n):!1},iXe=()=>({state:e,dispatch:t})=>lde(e,t),aXe=e=>({state:t,dispatch:r})=>{const n=Ba(e,t.schema);return Rqe(n)(t,r)},sXe=()=>({state:e,dispatch:t})=>sde(e,t);function j3(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function aY(e,t){const r=typeof t=="string"?[t]:t;return Object.keys(e).reduce((n,i)=>(r.includes(i)||(n[i]=e[i]),n),{})}var oXe=(e,t)=>({tr:r,state:n,dispatch:i})=>{let a=null,s=null;const o=j3(typeof e=="string"?e:e.name,n.schema);if(!o)return!1;o==="node"&&(a=Ba(e,n.schema)),o==="mark"&&(s=sp(e,n.schema));let l=!1;return r.selection.ranges.forEach(c=>{n.doc.nodesBetween(c.$from.pos,c.$to.pos,(d,f)=>{a&&a===d.type&&(l=!0,i&&r.setNodeMarkup(f,void 0,aY(d.attrs,t))),s&&d.marks.length&&d.marks.forEach(p=>{s===p.type&&(l=!0,i&&r.addMark(f,f+d.nodeSize,s.create(aY(p.attrs,t))))})})}),l},lXe=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),cXe=()=>({tr:e,dispatch:t})=>{if(t){const r=new dc(e.doc);e.setSelection(r)}return!0},uXe=()=>({state:e,dispatch:t})=>rde(e,t),dXe=()=>({state:e,dispatch:t})=>ade(e,t),fXe=()=>({state:e,dispatch:t})=>kqe(e,t),hXe=()=>({state:e,dispatch:t})=>Aqe(e,t),pXe=()=>({state:e,dispatch:t})=>Nqe(e,t);function mF(e,t,r={},n={}){return US(e,t,{slice:!1,parseOptions:r,errorOnInvalidContent:n.errorOnInvalidContent})}var mXe=(e,{errorOnInvalidContent:t,emitUpdate:r=!0,parseOptions:n={}}={})=>({editor:i,tr:a,dispatch:s,commands:o})=>{const{doc:l}=a;if(n.preserveWhitespace!=="full"){const c=mF(e,i.schema,n,{errorOnInvalidContent:t??i.options.enableContentCheck});return s&&a.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!r),!0}return s&&a.setMeta("preventUpdate",!r),o.insertContentAt({from:0,to:l.content.size},e,{parseOptions:n,errorOnInvalidContent:t??i.options.enableContentCheck})};function efe(e,t){const r=sp(t,e.schema),{from:n,to:i,empty:a}=e.selection,s=[];a?(e.storedMarks&&s.push(...e.storedMarks),s.push(...e.selection.$head.marks())):e.doc.nodesBetween(n,i,l=>{s.push(...l.marks)});const o=s.find(l=>l.type.name===r.name);return o?{...o.attrs}:{}}function tfe(e,t){const r=new Yue(e);return t.forEach(n=>{n.steps.forEach(i=>{r.step(i)})}),r}function gXe(e){for(let t=0;t<e.edgeCount;t+=1){const{type:r}=e.edge(t);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function xXe(e,t,r){const n=[];return e.nodesBetween(t.from,t.to,(i,a)=>{r(i)&&n.push({node:i,pos:a})}),n}function vXe(e,t){for(let r=e.depth;r>0;r-=1){const n=e.node(r);if(t(n))return{pos:r>0?e.before(r):0,start:e.start(r),depth:r,node:n}}}function D3(e){return t=>vXe(t.$from,e)}function xr(e,t,r){return e.config[t]===void 0&&e.parent?xr(e.parent,t,r):typeof e.config[t]=="function"?e.config[t].bind({...r,parent:e.parent?xr(e.parent,t,r):null}):e.config[t]}function wB(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},n=xr(t,"addExtensions",r);return n?[t,...wB(n())]:t}).flat(10)}function SB(e,t){const r=n1.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(r),i.innerHTML}function rfe(e){return typeof e=="function"}function ni(e,t=void 0,...r){return rfe(e)?t?e.bind(t)(...r):e(...r):e}function yXe(e={}){return Object.keys(e).length===0&&e.constructor===Object}function Py(e){const t=e.filter(i=>i.type==="extension"),r=e.filter(i=>i.type==="node"),n=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:r,markExtensions:n}}function nfe(e){const t=[],{nodeExtensions:r,markExtensions:n}=Py(e),i=[...r,...n],a={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(s=>{const o={name:s.name,options:s.options,storage:s.storage,extensions:i},l=xr(s,"addGlobalAttributes",o);if(!l)return;l().forEach(d=>{d.types.forEach(f=>{Object.entries(d.attributes).forEach(([p,m])=>{t.push({type:f,name:p,attribute:{...a,...m}})})})})}),i.forEach(s=>{const o={name:s.name,options:s.options,storage:s.storage},l=xr(s,"addAttributes",o);if(!l)return;const c=l();Object.entries(c).forEach(([d,f])=>{const p={...a,...f};typeof(p==null?void 0:p.default)=="function"&&(p.default=p.default()),p!=null&&p.isRequired&&(p==null?void 0:p.default)===void 0&&delete p.default,t.push({type:s.name,name:d,attribute:p})})}),t}function Ii(...e){return e.filter(t=>!!t).reduce((t,r)=>{const n={...t};return Object.entries(r).forEach(([i,a])=>{if(!n[i]){n[i]=a;return}if(i==="class"){const o=a?String(a).split(" "):[],l=n[i]?n[i].split(" "):[],c=o.filter(d=>!l.includes(d));n[i]=[...l,...c].join(" ")}else if(i==="style"){const o=a?a.split(";").map(d=>d.trim()).filter(Boolean):[],l=n[i]?n[i].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;l.forEach(d=>{const[f,p]=d.split(":").map(m=>m.trim());c.set(f,p)}),o.forEach(d=>{const[f,p]=d.split(":").map(m=>m.trim());c.set(f,p)}),n[i]=Array.from(c.entries()).map(([d,f])=>`${d}: ${f}`).join("; ")}else n[i]=a}),n},{})}function $S(e,t){return t.filter(r=>r.type===e.type.name).filter(r=>r.attribute.rendered).map(r=>r.attribute.renderHTML?r.attribute.renderHTML(e.attrs)||{}:{[r.name]:e.attrs[r.name]}).reduce((r,n)=>Ii(r,n),{})}function bXe(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function sY(e,t){return"style"in e?e:{...e,getAttrs:r=>{const n=e.getAttrs?e.getAttrs(r):e.attrs;if(n===!1)return!1;const i=t.reduce((a,s)=>{const o=s.attribute.parseHTML?s.attribute.parseHTML(r):bXe(r.getAttribute(s.name));return o==null?a:{...a,[s.name]:o}},{});return{...n,...i}}}}function oY(e){return Object.fromEntries(Object.entries(e).filter(([t,r])=>t==="attrs"&&yXe(r)?!1:r!=null))}function lY(e){var t,r;const n={};return!((t=e==null?void 0:e.attribute)!=null&&t.isRequired)&&"default"in((e==null?void 0:e.attribute)||{})&&(n.default=e.attribute.default),((r=e==null?void 0:e.attribute)==null?void 0:r.validate)!==void 0&&(n.validate=e.attribute.validate),[e.name,n]}function wXe(e,t){var r;const n=nfe(e),{nodeExtensions:i,markExtensions:a}=Py(e),s=(r=i.find(c=>xr(c,"topNode")))==null?void 0:r.name,o=Object.fromEntries(i.map(c=>{const d=n.filter(S=>S.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:t},p=e.reduce((S,_)=>{const C=xr(_,"extendNodeSchema",f);return{...S,...C?C(c):{}}},{}),m=oY({...p,content:ni(xr(c,"content",f)),marks:ni(xr(c,"marks",f)),group:ni(xr(c,"group",f)),inline:ni(xr(c,"inline",f)),atom:ni(xr(c,"atom",f)),selectable:ni(xr(c,"selectable",f)),draggable:ni(xr(c,"draggable",f)),code:ni(xr(c,"code",f)),whitespace:ni(xr(c,"whitespace",f)),linebreakReplacement:ni(xr(c,"linebreakReplacement",f)),defining:ni(xr(c,"defining",f)),isolating:ni(xr(c,"isolating",f)),attrs:Object.fromEntries(d.map(lY))}),x=ni(xr(c,"parseHTML",f));x&&(m.parseDOM=x.map(S=>sY(S,d)));const y=xr(c,"renderHTML",f);y&&(m.toDOM=S=>y({node:S,HTMLAttributes:$S(S,d)}));const b=xr(c,"renderText",f);return b&&(m.toText=b),[c.name,m]})),l=Object.fromEntries(a.map(c=>{const d=n.filter(b=>b.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:t},p=e.reduce((b,S)=>{const _=xr(S,"extendMarkSchema",f);return{...b,..._?_(c):{}}},{}),m=oY({...p,inclusive:ni(xr(c,"inclusive",f)),excludes:ni(xr(c,"excludes",f)),group:ni(xr(c,"group",f)),spanning:ni(xr(c,"spanning",f)),code:ni(xr(c,"code",f)),attrs:Object.fromEntries(d.map(lY))}),x=ni(xr(c,"parseHTML",f));x&&(m.parseDOM=x.map(b=>sY(b,d)));const y=xr(c,"renderHTML",f);return y&&(m.toDOM=b=>y({mark:b,HTMLAttributes:$S(b,d)})),[c.name,m]}));return new jue({topNode:s,nodes:o,marks:l})}function SXe(e){const t=e.filter((r,n)=>e.indexOf(r)!==n);return Array.from(new Set(t))}function EB(e){return e.sort((r,n)=>{const i=xr(r,"priority")||100,a=xr(n,"priority")||100;return i>a?-1:i<a?1:0})}function ife(e){const t=EB(wB(e)),r=SXe(t.map(n=>n.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(n=>`'${n}'`).join(", ")}]. This can lead to issues.`),t}function afe(e,t,r){const{from:n,to:i}=t,{blockSeparator:a=`

`,textSerializers:s={}}=r||{};let o="";return e.nodesBetween(n,i,(l,c,d,f)=>{var p;l.isBlock&&c>n&&(o+=a);const m=s==null?void 0:s[l.type.name];if(m)return d&&(o+=m({node:l,pos:c,parent:d,index:f,range:t})),!1;l.isText&&(o+=(p=l==null?void 0:l.text)==null?void 0:p.slice(Math.max(n,c)-c,i-c))}),o}function EXe(e,t){const r={from:0,to:e.content.size};return afe(e,r,t)}function sfe(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,r])=>[t,r.spec.toText]))}function CXe(e,t){const r=Ba(t,e.schema),{from:n,to:i}=e.selection,a=[];e.doc.nodesBetween(n,i,o=>{a.push(o)});const s=a.reverse().find(o=>o.type.name===r.name);return s?{...s.attrs}:{}}function ofe(e,t){const r=j3(typeof t=="string"?t:t.name,e.schema);return r==="node"?CXe(e,t):r==="mark"?efe(e,t):{}}function kXe(e,t=JSON.stringify){const r={};return e.filter(n=>{const i=t(n);return Object.prototype.hasOwnProperty.call(r,i)?!1:r[i]=!0})}function _Xe(e){const t=kXe(e);return t.length===1?t:t.filter((r,n)=>!t.filter((a,s)=>s!==n).some(a=>r.oldRange.from>=a.oldRange.from&&r.oldRange.to<=a.oldRange.to&&r.newRange.from>=a.newRange.from&&r.newRange.to<=a.newRange.to))}function lfe(e){const{mapping:t,steps:r}=e,n=[];return t.maps.forEach((i,a)=>{const s=[];if(i.ranges.length)i.forEach((o,l)=>{s.push({from:o,to:l})});else{const{from:o,to:l}=r[a];if(o===void 0||l===void 0)return;s.push({from:o,to:l})}s.forEach(({from:o,to:l})=>{const c=t.slice(a).map(o,-1),d=t.slice(a).map(l),f=t.invert().map(c,-1),p=t.invert().map(d);n.push({oldRange:{from:f,to:p},newRange:{from:c,to:d}})})}),_Xe(n)}function CB(e,t,r){const n=[];return e===t?r.resolve(e).marks().forEach(i=>{const a=r.resolve(e),s=bB(a,i.type);s&&n.push({mark:i,...s})}):r.nodesBetween(e,t,(i,a)=>{!i||(i==null?void 0:i.nodeSize)===void 0||n.push(...i.marks.map(s=>({from:a,to:a+i.nodeSize,mark:s})))}),n}var NXe=(e,t,r,n=20)=>{const i=e.doc.resolve(r);let a=n,s=null;for(;a>0&&s===null;){const o=i.node(a);(o==null?void 0:o.type.name)===t?s=o:a-=1}return[s,a]};function $D(e,t){return t.nodes[e]||t.marks[e]||null}function cA(e,t,r){return Object.fromEntries(Object.entries(r).filter(([n])=>{const i=e.find(a=>a.type===t&&a.name===n);return i?i.attribute.keepOnSplit:!1}))}var AXe=(e,t=500)=>{let r="";const n=e.parentOffset;return e.parent.nodesBetween(Math.max(0,n-t),n,(i,a,s,o)=>{var l,c;const d=((c=(l=i.type.spec).toText)==null?void 0:c.call(l,{node:i,pos:a,parent:s,index:o}))||i.textContent||"%leaf%";r+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,n-a))}),r};function gF(e,t,r={}){const{empty:n,ranges:i}=e.selection,a=t?sp(t,e.schema):null;if(n)return!!(e.storedMarks||e.selection.$from.marks()).filter(f=>a?a.name===f.type.name:!0).find(f=>XT(f.attrs,r,{strict:!1}));let s=0;const o=[];if(i.forEach(({$from:f,$to:p})=>{const m=f.pos,x=p.pos;e.doc.nodesBetween(m,x,(y,b)=>{if(!y.isText&&!y.marks.length)return;const S=Math.max(m,b),_=Math.min(x,b+y.nodeSize),C=_-S;s+=C,o.push(...y.marks.map(A=>({mark:A,from:S,to:_})))})}),s===0)return!1;const l=o.filter(f=>a?a.name===f.mark.type.name:!0).filter(f=>XT(f.mark.attrs,r,{strict:!1})).reduce((f,p)=>f+p.to-p.from,0),c=o.filter(f=>a?f.mark.type!==a&&f.mark.type.excludes(a):!0).reduce((f,p)=>f+p.to-p.from,0);return(l>0?l+c:l)>=s}function TXe(e,t,r={}){if(!t)return W0(e,null,r)||gF(e,null,r);const n=j3(t,e.schema);return n==="node"?W0(e,t,r):n==="mark"?gF(e,t,r):!1}var IXe=(e,t)=>{const{$from:r,$to:n,$anchor:i}=e.selection;if(t){const a=D3(o=>o.type.name===t)(e.selection);if(!a)return!1;const s=e.doc.resolve(a.pos+1);return i.pos+1===s.end()}return!(n.parentOffset<n.parent.nodeSize-2||r.pos!==n.pos)},OXe=e=>{const{$from:t,$to:r}=e.selection;return!(t.parentOffset>0||t.pos!==r.pos)};function cY(e,t){return Array.isArray(t)?t.some(r=>(typeof r=="string"?r:r.name)===e.name):t}function uY(e,t){const{nodeExtensions:r}=Py(t),n=r.find(s=>s.name===e);if(!n)return!1;const i={name:n.name,options:n.options,storage:n.storage},a=ni(xr(n,"group",i));return typeof a!="string"?!1:a.split(" ").includes("list")}function M3(e,{checkChildren:t=!0,ignoreWhitespace:r=!1}={}){var n;if(r){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((n=e.text)!=null?n:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let i=!0;return e.content.forEach(a=>{i!==!1&&(M3(a,{ignoreWhitespace:r,checkChildren:t})||(i=!1))}),i}return!1}function cfe(e){return e instanceof pr}var ufe=class dfe{constructor(t){this.position=t}static fromJSON(t){return new dfe(t.position)}toJSON(){return{position:this.position}}};function PXe(e,t){const r=t.mapping.mapResult(e.position);return{position:new ufe(r.pos),mapResult:r}}function RXe(e){return new ufe(e)}function jXe(e,t,r){var n;const{selection:i}=t;let a=null;if(Xde(i)&&(a=i.$cursor),a){const o=(n=e.storedMarks)!=null?n:a.marks();return a.parent.type.allowsMarkType(r)&&(!!r.isInSet(o)||!o.some(c=>c.type.excludes(r)))}const{ranges:s}=i;return s.some(({$from:o,$to:l})=>{let c=o.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(r):!1;return e.doc.nodesBetween(o.pos,l.pos,(d,f,p)=>{if(c)return!1;if(d.isInline){const m=!p||p.type.allowsMarkType(r),x=!!r.isInSet(d.marks)||!d.marks.some(y=>y.type.excludes(r));c=m&&x}return!c}),c})}var DXe=(e,t={})=>({tr:r,state:n,dispatch:i})=>{const{selection:a}=r,{empty:s,ranges:o}=a,l=sp(e,n.schema);if(i)if(s){const c=efe(n,l);r.addStoredMark(l.create({...c,...t}))}else o.forEach(c=>{const d=c.$from.pos,f=c.$to.pos;n.doc.nodesBetween(d,f,(p,m)=>{const x=Math.max(m,d),y=Math.min(m+p.nodeSize,f);p.marks.find(S=>S.type===l)?p.marks.forEach(S=>{l===S.type&&r.addMark(x,y,l.create({...S.attrs,...t}))}):r.addMark(x,y,l.create(t))})});return jXe(n,r,l)},MXe=(e,t)=>({tr:r})=>(r.setMeta(e,t),!0),FXe=(e,t={})=>({state:r,dispatch:n,chain:i})=>{const a=Ba(e,r.schema);let s;return r.selection.$anchor.sameParent(r.selection.$head)&&(s=r.selection.$anchor.parent.attrs),a.isTextblock?i().command(({commands:o})=>CX(a,{...s,...t})(r)?!0:o.clearNodes()).command(({state:o})=>CX(a,{...s,...t})(o,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},LXe=e=>({tr:t,dispatch:r})=>{if(r){const{doc:n}=t,i=gg(e,0,n.content.size),a=pr.create(n,i);t.setSelection(a)}return!0},BXe=(e,t)=>({tr:r,state:n,dispatch:i})=>{const{selection:a}=n;let s,o;return typeof t=="number"?(s=t,o=t):t&&"from"in t&&"to"in t?(s=t.from,o=t.to):(s=a.from,o=a.to),i&&r.doc.nodesBetween(s,o,(l,c)=>{l.isText||r.setNodeMarkup(c,void 0,{...l.attrs,dir:e})}),!0},UXe=e=>({tr:t,dispatch:r})=>{if(r){const{doc:n}=t,{from:i,to:a}=typeof e=="number"?{from:e,to:e}:e,s=zr.atStart(n).from,o=zr.atEnd(n).to,l=gg(i,s,o),c=gg(a,s,o),d=zr.create(n,l,c);t.setSelection(d)}return!0},$Xe=e=>({state:t,dispatch:r})=>{const n=Ba(e,t.schema);return Mqe(n)(t,r)};function dY(e,t){const r=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(r){const n=r.filter(i=>t==null?void 0:t.includes(i.type.name));e.tr.ensureMarks(n)}}var zXe=({keepMarks:e=!0}={})=>({tr:t,state:r,dispatch:n,editor:i})=>{const{selection:a,doc:s}=t,{$from:o,$to:l}=a,c=i.extensionManager.attributes,d=cA(c,o.node().type.name,o.node().attrs);if(a instanceof pr&&a.node.isBlock)return!o.parentOffset||!Ah(s,o.pos)?!1:(n&&(e&&dY(r,i.extensionManager.splittableMarks),t.split(o.pos).scrollIntoView()),!0);if(!o.parent.isBlock)return!1;const f=l.parentOffset===l.parent.content.size,p=o.depth===0?void 0:gXe(o.node(-1).contentMatchAt(o.indexAfter(-1)));let m=f&&p?[{type:p,attrs:d}]:void 0,x=Ah(t.doc,t.mapping.map(o.pos),1,m);if(!m&&!x&&Ah(t.doc,t.mapping.map(o.pos),1,p?[{type:p}]:void 0)&&(x=!0,m=p?[{type:p,attrs:d}]:void 0),n){if(x&&(a instanceof zr&&t.deleteSelection(),t.split(t.mapping.map(o.pos),1,m),p&&!f&&!o.parentOffset&&o.parent.type!==p)){const y=t.mapping.map(o.before()),b=t.doc.resolve(y);o.node(-1).canReplaceWith(b.index(),b.index()+1,p)&&t.setNodeMarkup(t.mapping.map(o.before()),p)}e&&dY(r,i.extensionManager.splittableMarks),t.scrollIntoView()}return x},HXe=(e,t={})=>({tr:r,state:n,dispatch:i,editor:a})=>{var s;const o=Ba(e,n.schema),{$from:l,$to:c}=n.selection,d=n.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(c))return!1;const f=l.node(-1);if(f.type!==o)return!1;const p=a.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==o||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let S=It.empty;const _=l.index(-1)?1:l.index(-2)?2:3;for(let D=l.depth-_;D>=l.depth-3;D-=1)S=It.from(l.node(D).copy(S));const C=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,A={...cA(p,l.node().type.name,l.node().attrs),...t},j=((s=o.contentMatch.defaultType)==null?void 0:s.createAndFill(A))||void 0;S=S.append(It.from(o.createAndFill(null,j)||void 0));const P=l.before(l.depth-(_-1));r.replace(P,l.after(-C),new Vt(S,4-_,0));let O=-1;r.doc.nodesBetween(P,r.doc.content.size,(D,L)=>{if(O>-1)return!1;D.isTextblock&&D.content.size===0&&(O=L+1)}),O>-1&&r.setSelection(zr.near(r.doc.resolve(O))),r.scrollIntoView()}return!0}const m=c.pos===l.end()?f.contentMatchAt(0).defaultType:null,x={...cA(p,f.type.name,f.attrs),...t},y={...cA(p,l.node().type.name,l.node().attrs),...t};r.delete(l.pos,c.pos);const b=m?[{type:o,attrs:x},{type:m,attrs:y}]:[{type:o,attrs:x}];if(!Ah(r.doc,l.pos,2))return!1;if(i){const{selection:S,storedMarks:_}=n,{splittableMarks:C}=a.extensionManager,A=_||S.$to.parentOffset&&S.$from.marks();if(r.split(l.pos,2,b).scrollIntoView(),!A||!i)return!0;const j=A.filter(P=>C.includes(P.type.name));r.ensureMarks(j)}return!0},zD=(e,t)=>{const r=D3(s=>s.type===t)(e.selection);if(!r)return!0;const n=e.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(n===void 0)return!0;const i=e.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&om(e.doc,r.pos)&&e.join(r.pos),!0},HD=(e,t)=>{const r=D3(s=>s.type===t)(e.selection);if(!r)return!0;const n=e.doc.resolve(r.start).after(r.depth);if(n===void 0)return!0;const i=e.doc.nodeAt(n);return r.node.type===(i==null?void 0:i.type)&&om(e.doc,n)&&e.join(n),!0},WXe=(e,t,r,n={})=>({editor:i,tr:a,state:s,dispatch:o,chain:l,commands:c,can:d})=>{const{extensions:f,splittableMarks:p}=i.extensionManager,m=Ba(e,s.schema),x=Ba(t,s.schema),{selection:y,storedMarks:b}=s,{$from:S,$to:_}=y,C=S.blockRange(_),A=b||y.$to.parentOffset&&y.$from.marks();if(!C)return!1;const j=D3(P=>uY(P.type.name,f))(y);if(C.depth>=1&&j&&C.depth-j.depth<=1){if(j.node.type===m)return c.liftListItem(x);if(uY(j.node.type.name,f)&&m.validContent(j.node.content)&&o)return l().command(()=>(a.setNodeMarkup(j.pos,m),!0)).command(()=>zD(a,m)).command(()=>HD(a,m)).run()}return!r||!A||!o?l().command(()=>d().wrapInList(m,n)?!0:c.clearNodes()).wrapInList(m,n).command(()=>zD(a,m)).command(()=>HD(a,m)).run():l().command(()=>{const P=d().wrapInList(m,n),O=A.filter(D=>p.includes(D.type.name));return a.ensureMarks(O),P?!0:c.clearNodes()}).wrapInList(m,n).command(()=>zD(a,m)).command(()=>HD(a,m)).run()},VXe=(e,t={},r={})=>({state:n,commands:i})=>{const{extendEmptyMarkRange:a=!1}=r,s=sp(e,n.schema);return gF(n,s,t)?i.unsetMark(s,{extendEmptyMarkRange:a}):i.setMark(s,t)},qXe=(e,t,r={})=>({state:n,commands:i})=>{const a=Ba(e,n.schema),s=Ba(t,n.schema),o=W0(n,a,r);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),o?i.setNode(s,l):i.setNode(a,{...l,...r})},GXe=(e,t={})=>({state:r,commands:n})=>{const i=Ba(e,r.schema);return W0(r,i,t)?n.lift(i):n.wrapIn(i,t)},KXe=()=>({state:e,dispatch:t})=>{const r=e.plugins;for(let n=0;n<r.length;n+=1){const i=r[n];let a;if(i.spec.isInputRules&&(a=i.getState(e))){if(t){const s=e.tr,o=a.transform;for(let l=o.steps.length-1;l>=0;l-=1)s.step(o.steps[l].invert(o.docs[l]));if(a.text){const l=s.doc.resolve(a.from).marks();s.replaceWith(a.from,a.to,e.schema.text(a.text,l))}else s.delete(a.from,a.to)}return!0}}return!1},XXe=()=>({tr:e,dispatch:t})=>{const{selection:r}=e,{empty:n,ranges:i}=r;return n||t&&i.forEach(a=>{e.removeMark(a.$from.pos,a.$to.pos)}),!0},YXe=(e,t={})=>({tr:r,state:n,dispatch:i})=>{var a;const{extendEmptyMarkRange:s=!1}=t,{selection:o}=r,l=sp(e,n.schema),{$from:c,empty:d,ranges:f}=o;if(!i)return!0;if(d&&s){let{from:p,to:m}=o;const x=(a=c.marks().find(b=>b.type===l))==null?void 0:a.attrs,y=bB(c,l,x);y&&(p=y.from,m=y.to),r.removeMark(p,m,l)}else f.forEach(p=>{r.removeMark(p.$from.pos,p.$to.pos,l)});return r.removeStoredMark(l),!0},QXe=e=>({tr:t,state:r,dispatch:n})=>{const{selection:i}=r;let a,s;return typeof e=="number"?(a=e,s=e):e&&"from"in e&&"to"in e?(a=e.from,s=e.to):(a=i.from,s=i.to),n&&t.doc.nodesBetween(a,s,(o,l)=>{if(o.isText)return;const c={...o.attrs};delete c.dir,t.setNodeMarkup(l,void 0,c)}),!0},JXe=(e,t={})=>({tr:r,state:n,dispatch:i})=>{let a=null,s=null;const o=j3(typeof e=="string"?e:e.name,n.schema);if(!o)return!1;o==="node"&&(a=Ba(e,n.schema)),o==="mark"&&(s=sp(e,n.schema));let l=!1;return r.selection.ranges.forEach(c=>{const d=c.$from.pos,f=c.$to.pos;let p,m,x,y;r.selection.empty?n.doc.nodesBetween(d,f,(b,S)=>{a&&a===b.type&&(l=!0,x=Math.max(S,d),y=Math.min(S+b.nodeSize,f),p=S,m=b)}):n.doc.nodesBetween(d,f,(b,S)=>{S<d&&a&&a===b.type&&(l=!0,x=Math.max(S,d),y=Math.min(S+b.nodeSize,f),p=S,m=b),S>=d&&S<=f&&(a&&a===b.type&&(l=!0,i&&r.setNodeMarkup(S,void 0,{...b.attrs,...t})),s&&b.marks.length&&b.marks.forEach(_=>{if(s===_.type&&(l=!0,i)){const C=Math.max(S,d),A=Math.min(S+b.nodeSize,f);r.addMark(C,A,s.create({..._.attrs,...t}))}}))}),m&&(p!==void 0&&i&&r.setNodeMarkup(p,void 0,{...m.attrs,...t}),s&&m.marks.length&&m.marks.forEach(b=>{s===b.type&&i&&r.addMark(x,y,s.create({...b.attrs,...t}))}))}),l},ZXe=(e,t={})=>({state:r,dispatch:n})=>{const i=Ba(e,r.schema);return Tqe(i,t)(r,n)},eYe=(e,t={})=>({state:r,dispatch:n})=>{const i=Ba(e,r.schema);return Iqe(i,t)(r,n)},tYe=class{constructor(){this.callbacks={}}on(t,r){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(r),this}emit(t,...r){const n=this.callbacks[t];return n&&n.forEach(i=>i.apply(this,r)),this}off(t,r){const n=this.callbacks[t];return n&&(r?this.callbacks[t]=n.filter(i=>i!==r):delete this.callbacks[t]),this}once(t,r){const n=(...i)=>{this.off(t,n),r.apply(this,i)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},F3=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},rYe=(e,t)=>{if(yB(t))return t.exec(e);const r=t(e);if(!r)return null;const n=[r.text];return n.index=r.index,n.input=e,n.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(r.replaceWith)),n};function K_(e){var t;const{editor:r,from:n,to:i,text:a,rules:s,plugin:o}=e,{view:l}=r;if(l.composing)return!1;const c=l.state.doc.resolve(n);if(c.parent.type.spec.code||(t=c.nodeBefore||c.nodeAfter)!=null&&t.marks.find(p=>p.type.spec.code))return!1;let d=!1;const f=AXe(c)+a;return s.forEach(p=>{if(d)return;const m=rYe(f,p.find);if(!m)return;const x=l.state.tr,y=O3({state:l.state,transaction:x}),b={from:n-(m[0].length-a.length),to:i},{commands:S,chain:_,can:C}=new P3({editor:r,state:y});p.handler({state:y,range:b,match:m,commands:S,chain:_,can:C})===null||!x.steps.length||(p.undoable&&x.setMeta(o,{transform:x,from:n,to:i,text:a}),l.dispatch(x),d=!0)}),d}function nYe(e){const{editor:t,rules:r}=e,n=new Hi({state:{init(){return null},apply(i,a,s){const o=i.getMeta(n);if(o)return o;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=SB(It.from(d),s.schema);const{from:f}=l,p=f+d.length;K_({editor:t,from:f,to:p,text:d,rules:r,plugin:n})}),i.selectionSet||i.docChanged?null:a}},props:{handleTextInput(i,a,s,o){return K_({editor:t,from:a,to:s,text:o,rules:r,plugin:n})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:a}=i.state.selection;a&&K_({editor:t,from:a.pos,to:a.pos,text:"",rules:r,plugin:n})}),!1)},handleKeyDown(i,a){if(a.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?K_({editor:t,from:s.pos,to:s.pos,text:`
`,rules:r,plugin:n}):!1}},isInputRules:!0});return n}function iYe(e){return Object.prototype.toString.call(e).slice(8,-1)}function X_(e){return iYe(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function ffe(e,t){const r={...e};return X_(e)&&X_(t)&&Object.keys(t).forEach(n=>{X_(t[n])&&X_(e[n])?r[n]=ffe(e[n],t[n]):r[n]=t[n]}),r}var kB=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...ni(xr(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...ni(xr(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>ffe(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},i1=class hfe extends kB{constructor(){super(...arguments),this.type="mark"}static create(t={}){const r=typeof t=="function"?t():t;return new hfe(r)}static handleExit({editor:t,mark:r}){const{tr:n}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(c=>(c==null?void 0:c.type.name)===r.name))return!1;const l=s.find(c=>(c==null?void 0:c.type.name)===r.name);return l&&n.removeStoredMark(l),n.insertText(" ",i.pos),t.view.dispatch(n),!0}return!1}configure(t){return super.configure(t)}extend(t){const r=typeof t=="function"?t():t;return super.extend(r)}};function aYe(e){return typeof e=="number"}var sYe=class{constructor(e){this.find=e.find,this.handler=e.handler}},oYe=(e,t,r)=>{if(yB(t))return[...e.matchAll(t)];const n=t(e,r);return n?n.map(i=>{const a=[i.text];return a.index=i.index,a.input=e,a.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),a.push(i.replaceWith)),a}):[]};function lYe(e){const{editor:t,state:r,from:n,to:i,rule:a,pasteEvent:s,dropEvent:o}=e,{commands:l,chain:c,can:d}=new P3({editor:t,state:r}),f=[];return r.doc.nodesBetween(n,i,(m,x)=>{var y,b,S,_,C;if((b=(y=m.type)==null?void 0:y.spec)!=null&&b.code||!(m.isText||m.isTextblock||m.isInline))return;const A=(C=(_=(S=m.content)==null?void 0:S.size)!=null?_:m.nodeSize)!=null?C:0,j=Math.max(n,x),P=Math.min(i,x+A);if(j>=P)return;const O=m.isText?m.text||"":m.textBetween(j-x,P-x,void 0,"");oYe(O,a.find,s).forEach(L=>{if(L.index===void 0)return;const B=j+L.index+1,H=B+L[0].length,z={from:r.tr.mapping.map(B),to:r.tr.mapping.map(H)},ie=a.handler({state:r,range:z,match:L,commands:l,chain:c,can:d,pasteEvent:s,dropEvent:o});f.push(ie)})}),f.every(m=>m!==null)}var Y_=null,cYe=e=>{var t;const r=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=r.clipboardData)==null||t.setData("text/html",e),r};function uYe(e){const{editor:t,rules:r}=e;let n=null,i=!1,a=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,o;try{o=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{o=null}const l=({state:d,from:f,to:p,rule:m,pasteEvt:x})=>{const y=d.tr,b=O3({state:d,transaction:y});if(!(!lYe({editor:t,state:b,from:Math.max(f-1,0),to:p.b-1,rule:m,pasteEvent:x,dropEvent:o})||!y.steps.length)){try{o=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{o=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,y}};return r.map(d=>new Hi({view(f){const p=x=>{var y;n=(y=f.dom.parentElement)!=null&&y.contains(x.target)?f.dom.parentElement:null,n&&(Y_=t)},m=()=>{Y_&&(Y_=null)};return window.addEventListener("dragstart",p),window.addEventListener("dragend",m),{destroy(){window.removeEventListener("dragstart",p),window.removeEventListener("dragend",m)}}},props:{handleDOMEvents:{drop:(f,p)=>{if(a=n===f.dom.parentElement,o=p,!a){const m=Y_;m!=null&&m.isEditable&&setTimeout(()=>{const x=m.state.selection;x&&m.commands.deleteRange({from:x.from,to:x.to})},10)}return!1},paste:(f,p)=>{var m;const x=(m=p.clipboardData)==null?void 0:m.getData("text/html");return s=p,i=!!(x!=null&&x.includes("data-pm-slice")),!1}}},appendTransaction:(f,p,m)=>{const x=f[0],y=x.getMeta("uiEvent")==="paste"&&!i,b=x.getMeta("uiEvent")==="drop"&&!a,S=x.getMeta("applyPasteRules"),_=!!S;if(!y&&!b&&!_)return;if(_){let{text:j}=S;typeof j=="string"?j=j:j=SB(It.from(j),m.schema);const{from:P}=S,O=P+j.length,D=cYe(j);return l({rule:d,state:m,from:P,to:{b:O},pasteEvt:D})}const C=p.doc.content.findDiffStart(m.doc.content),A=p.doc.content.findDiffEnd(m.doc.content);if(!(!aYe(C)||!A||C===A.b))return l({rule:d,state:m,from:C,to:A,pasteEvt:s})}}))}var L3=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.baseExtensions=e,this.extensions=ife(e),this.schema=wXe(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:$D(t.name,this.schema)},n=xr(t,"addCommands",r);return n?{...e,...n()}:e},{})}get plugins(){const{editor:e}=this;return EB([...this.extensions].reverse()).flatMap(n=>{const i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:$D(n.name,this.schema)},a=[],s=xr(n,"addKeyboardShortcuts",i);let o={};if(n.type==="mark"&&xr(n,"exitable",i)&&(o.ArrowRight=()=>i1.handleExit({editor:e,mark:n})),s){const p=Object.fromEntries(Object.entries(s()).map(([m,x])=>[m,()=>x({editor:e})]));o={...o,...p}}const l=kKe(o);a.push(l);const c=xr(n,"addInputRules",i);if(cY(n,e.options.enableInputRules)&&c){const p=c();if(p&&p.length){const m=nYe({editor:e,rules:p}),x=Array.isArray(m)?m:[m];a.push(...x)}}const d=xr(n,"addPasteRules",i);if(cY(n,e.options.enablePasteRules)&&d){const p=d();if(p&&p.length){const m=uYe({editor:e,rules:p});a.push(...m)}}const f=xr(n,"addProseMirrorPlugins",i);if(f){const p=f();a.push(...p)}return a})}get attributes(){return nfe(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Py(this.extensions);return Object.fromEntries(t.filter(r=>!!xr(r,"addNodeView")).map(r=>{const n=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:Ba(r.name,this.schema)},a=xr(r,"addNodeView",i);if(!a)return[];const s=a();if(!s)return[];const o=(l,c,d,f,p)=>{const m=$S(l,n);return s({node:l,view:c,getPos:d,decorations:f,innerDecorations:p,editor:e,extension:r,HTMLAttributes:m})};return[r.name,o]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=Py(this.extensions);return Object.fromEntries(t.filter(r=>!!xr(r,"addMarkView")).map(r=>{const n=this.attributes.filter(o=>o.type===r.name),i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:sp(r.name,this.schema)},a=xr(r,"addMarkView",i);if(!a)return[];const s=(o,l,c)=>{const d=$S(o,n);return a()({mark:o,view:l,inline:c,editor:e,extension:r,HTMLAttributes:d,updateAttributes:f=>{kYe(o,e,f)}})};return[r.name,s]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var r;const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:$D(t.name,this.schema)};t.type==="mark"&&((r=ni(xr(t,"keepOnSplit",n)))==null||r)&&this.splittableMarks.push(t.name);const i=xr(t,"onBeforeCreate",n),a=xr(t,"onCreate",n),s=xr(t,"onUpdate",n),o=xr(t,"onSelectionUpdate",n),l=xr(t,"onTransaction",n),c=xr(t,"onFocus",n),d=xr(t,"onBlur",n),f=xr(t,"onDestroy",n);i&&this.editor.on("beforeCreate",i),a&&this.editor.on("create",a),s&&this.editor.on("update",s),o&&this.editor.on("selectionUpdate",o),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),d&&this.editor.on("blur",d),f&&this.editor.on("destroy",f)})}};L3.resolve=ife;L3.sort=EB;L3.flatten=wB;var dYe={};vB(dYe,{ClipboardTextSerializer:()=>mfe,Commands:()=>gfe,Delete:()=>xfe,Drop:()=>vfe,Editable:()=>yfe,FocusEvents:()=>wfe,Keymap:()=>Sfe,Paste:()=>Efe,Tabindex:()=>Cfe,TextDirection:()=>kfe,focusEventsPluginKey:()=>bfe});var ha=class pfe extends kB{constructor(){super(...arguments),this.type="extension"}static create(t={}){const r=typeof t=="function"?t():t;return new pfe(r)}configure(t){return super.configure(t)}extend(t){const r=typeof t=="function"?t():t;return super.extend(r)}},mfe=ha.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Hi({key:new Ca("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:r}=e,{doc:n,selection:i}=t,{ranges:a}=i,s=Math.min(...a.map(d=>d.$from.pos)),o=Math.max(...a.map(d=>d.$to.pos)),l=sfe(r);return afe(n,{from:s,to:o},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),gfe=ha.create({name:"commands",addCommands(){return{...Gde}}}),xfe=ha.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var r,n,i;const a=()=>{var s,o,l,c;if((c=(l=(o=(s=this.editor.options.coreExtensionOptions)==null?void 0:s.delete)==null?void 0:o.filterTransaction)==null?void 0:l.call(o,e))!=null?c:e.getMeta("y-sync$"))return;const d=tfe(e.before,[e,...t]);lfe(d).forEach(m=>{d.mapping.mapResult(m.oldRange.from).deletedAfter&&d.mapping.mapResult(m.oldRange.to).deletedBefore&&d.before.nodesBetween(m.oldRange.from,m.oldRange.to,(x,y)=>{const b=y+x.nodeSize-2,S=m.oldRange.from<=y&&b<=m.oldRange.to;this.editor.emit("delete",{type:"node",node:x,from:y,to:b,newFrom:d.mapping.map(y),newTo:d.mapping.map(b),deletedRange:m.oldRange,newRange:m.newRange,partial:!S,editor:this.editor,transaction:e,combinedTransform:d})})});const p=d.mapping;d.steps.forEach((m,x)=>{var y,b;if(m instanceof td){const S=p.slice(x).map(m.from,-1),_=p.slice(x).map(m.to),C=p.invert().map(S,-1),A=p.invert().map(_),j=(y=d.doc.nodeAt(S-1))==null?void 0:y.marks.some(O=>O.eq(m.mark)),P=(b=d.doc.nodeAt(_))==null?void 0:b.marks.some(O=>O.eq(m.mark));this.editor.emit("delete",{type:"mark",mark:m.mark,from:m.from,to:m.to,deletedRange:{from:C,to:A},newRange:{from:S,to:_},partial:!!(P||j),editor:this.editor,transaction:e,combinedTransform:d})}})};(i=(n=(r=this.editor.options.coreExtensionOptions)==null?void 0:r.delete)==null?void 0:n.async)==null||i?setTimeout(a,0):a()}}),vfe=ha.create({name:"drop",addProseMirrorPlugins(){return[new Hi({key:new Ca("tiptapDrop"),props:{handleDrop:(e,t,r,n)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:r,moved:n})}}})]}}),yfe=ha.create({name:"editable",addProseMirrorPlugins(){return[new Hi({key:new Ca("editable"),props:{editable:()=>this.editor.options.editable}})]}}),bfe=new Ca("focusEvents"),wfe=ha.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new Hi({key:bfe,props:{handleDOMEvents:{focus:(t,r)=>{e.isFocused=!0;const n=e.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return t.dispatch(n),!1},blur:(t,r)=>{e.isFocused=!1;const n=e.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return t.dispatch(n),!1}}}})]}}),Sfe=ha.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:o})=>{const{selection:l,doc:c}=o,{empty:d,$anchor:f}=l,{pos:p,parent:m}=f,x=f.parent.isTextblock&&p>0?o.doc.resolve(p-1):f,y=x.parent.type.spec.isolating,b=f.pos-f.parentOffset,S=y&&x.parent.childCount===1?b===f.pos:pn.atStart(c).from===p;return!d||!m.type.isTextblock||m.textContent.length||!S||S&&f.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...n},a={...n,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return R3()||Zde()?a:i},addProseMirrorPlugins(){return[new Hi({key:new Ca("clearDocument"),appendTransaction:(e,t,r)=>{if(e.some(y=>y.getMeta("composition")))return;const n=e.some(y=>y.docChanged)&&!t.doc.eq(r.doc),i=e.some(y=>y.getMeta("preventClearDocument"));if(!n||i)return;const{empty:a,from:s,to:o}=t.selection,l=pn.atStart(t.doc).from,c=pn.atEnd(t.doc).to;if(a||!(s===l&&o===c)||!M3(r.doc))return;const p=r.tr,m=O3({state:r,transaction:p}),{commands:x}=new P3({editor:this.editor,state:m});if(x.clearNodes(),!!p.steps.length)return p}})]}}),Efe=ha.create({name:"paste",addProseMirrorPlugins(){return[new Hi({key:new Ca("tiptapPaste"),props:{handlePaste:(e,t,r)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:r})}}})]}}),Cfe=ha.create({name:"tabindex",addProseMirrorPlugins(){return[new Hi({key:new Ca("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),kfe=ha.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:e}=Py(this.extensions);return[{types:e.filter(t=>t.name!=="text").map(t=>t.name),attributes:{dir:{default:this.options.direction,parseHTML:t=>{const r=t.getAttribute("dir");return r&&(r==="ltr"||r==="rtl"||r==="auto")?r:this.options.direction},renderHTML:t=>t.dir?{dir:t.dir}:{}}}}]},addProseMirrorPlugins(){return[new Hi({key:new Ca("textDirection"),props:{attributes:()=>{const e=this.options.direction;return e?{dir:e}:{}}}})]}}),fYe=class iv{constructor(t,r,n=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=t,this.editor=r,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let r=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}r=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:r,to:n},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),r=this.resolvedPos.doc.resolve(t);return new iv(r,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new iv(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new iv(t,this.editor)}get children(){const t=[];return this.node.content.forEach((r,n)=>{const i=r.isBlock&&!r.isTextblock,a=r.isAtom&&!r.isText,s=this.pos+n+(a?0:1);if(s<0||s>this.resolvedPos.doc.nodeSize-2)return;const o=this.resolvedPos.doc.resolve(s);if(!i&&o.depth<=this.depth)return;const l=new iv(o,this.editor,i,i?r:null);i&&(l.actualDepth=this.depth+1),t.push(new iv(o,this.editor,i,i?r:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,r={}){let n=null,i=this.parent;for(;i&&!n;){if(i.node.type.name===t)if(Object.keys(r).length>0){const a=i.node.attrs,s=Object.keys(r);for(let o=0;o<s.length;o+=1){const l=s[o];if(a[l]!==r[l])break}}else n=i;i=i.parent}return n}querySelector(t,r={}){return this.querySelectorAll(t,r,!0)[0]||null}querySelectorAll(t,r={},n=!1){let i=[];if(!this.children||this.children.length===0)return i;const a=Object.keys(r);return this.children.forEach(s=>{n&&i.length>0||(s.node.type.name===t&&a.every(l=>r[l]===s.node.attrs[l])&&i.push(s),!(n&&i.length>0)&&(i=i.concat(s.querySelectorAll(t,r,n))))}),i}setAttribute(t){const{tr:r}=this.editor.state;r.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(r)}},hYe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function pYe(e,t,r){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}var mYe=class extends tYe{constructor(e={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:PXe,createMappablePosition:RXe},this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:i,moved:a})=>this.options.onDrop(n,i,a)),this.on("paste",({event:n,slice:i})=>this.options.onPaste(n,i)),this.on("delete",this.options.onDelete);const t=this.createDoc(),r=Yde(t,this.options.autofocus);this.editorState=Ev.create({doc:t,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e!=null&&e.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=pYe(hYe,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(this.editorView)return this.editorView[t];if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const r=rfe(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(i=>{const a=typeof i=="string"?`${i}$`:i.key;r=r.filter(s=>!s.key.startsWith(a))}),t.length===r.length)return;const n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}createExtensionManager(){var e,t;const n=[...this.options.enableCoreExtensions?[yfe,mfe.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),gfe,wfe,Sfe,Cfe,vfe,Efe,xfe,kfe.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new L3(n,this)}createCommandManager(){this.commandManager=new P3({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=mF(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(r=>r.name!=="collaboration"),this.createExtensionManager()}}),e=mF(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new Vde(e,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)==null?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.prependClass(),this.injectCSS();const n=this.view.dom;n.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(c=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(c)});return}const{state:t,transactions:r}=this.state.applyTransaction(e),n=!this.state.selection.eq(t.selection),i=r.includes(e),a=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:r.slice(1)}),n&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=r.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),o=s==null?void 0:s.getMeta("focus"),l=s==null?void 0:s.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:s}),l&&this.emit("blur",{editor:this,event:l.event,transaction:s}),!(e.getMeta("preventUpdate")||!r.some(c=>c.docChanged)||a.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:r.slice(1)})}getAttributes(e){return ofe(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,n=typeof e=="string"?t:e;return TXe(this.state,r,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return SB(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return EXe(this.state.doc,{blockSeparator:t,textSerializers:{...sfe(this.schema),...r}})}get isEmpty(){return M3(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var r;return((r=this.$doc)==null?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)==null?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new fYe(t,this)}get $doc(){return this.$pos(0)}};function Ry(e){return new F3({find:e.find,handler:({state:t,range:r,match:n})=>{const i=ni(e.getAttributes,void 0,n);if(i===!1||i===null)return null;const{tr:a}=t,s=n[n.length-1],o=n[0];if(s){const l=o.search(/\S/),c=r.from+o.indexOf(s),d=c+s.length;if(CB(r.from,r.to,t.doc).filter(m=>m.mark.type.excluded.find(y=>y===e.type&&y!==m.mark.type)).filter(m=>m.to>c).length)return null;d<r.to&&a.delete(d,r.to),c>r.from&&a.delete(r.from+l,c);const p=r.from+l+s.length;a.addMark(r.from+l,p,e.type.create(i||{})),a.removeStoredMark(e.type)}},undoable:e.undoable})}function _fe(e){return new F3({find:e.find,handler:({state:t,range:r,match:n})=>{const i=ni(e.getAttributes,void 0,n)||{},{tr:a}=t,s=r.from;let o=r.to;const l=e.type.create(i);if(n[1]){const c=n[0].lastIndexOf(n[1]);let d=s+c;d>o?d=o:o=d+n[1].length;const f=n[0][n[0].length-1];a.insertText(f,s+n[0].length-1),a.replaceWith(d,o,l)}else if(n[0]){const c=e.type.isInline?s:s-1;a.insert(c,e.type.create(i)).delete(a.mapping.map(s),a.mapping.map(o))}a.scrollIntoView()},undoable:e.undoable})}function xF(e){return new F3({find:e.find,handler:({state:t,range:r,match:n})=>{const i=t.doc.resolve(r.from),a=ni(e.getAttributes,void 0,n)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(r.from,r.to).setBlockType(r.from,r.from,e.type,a)},undoable:e.undoable})}function jy(e){return new F3({find:e.find,handler:({state:t,range:r,match:n,chain:i})=>{const a=ni(e.getAttributes,void 0,n)||{},s=t.tr.delete(r.from,r.to),l=s.doc.resolve(r.from).blockRange(),c=l&&rB(l,e.type,a);if(!c)return null;if(s.wrap(l,c),e.keepMarks&&e.editor){const{selection:f,storedMarks:p}=t,{splittableMarks:m}=e.editor.extensionManager,x=p||f.$to.parentOffset&&f.$from.marks();if(x){const y=x.filter(b=>m.includes(b.type.name));s.ensureMarks(y)}}if(e.keepAttributes){const f=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,a).run()}const d=s.doc.resolve(r.from-1).nodeBefore;d&&d.type===e.type&&om(s.doc,r.from-1)&&(!e.joinPredicate||e.joinPredicate(n,d))&&s.join(r.from-1)},undoable:e.undoable})}var gYe=e=>"touches"in e,xYe=class{constructor(e){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.lastEditableState=void 0,this.handleMap=new Map,this.handleMouseMove=o=>{if(!this.isResizing||!this.activeHandle)return;const l=o.clientX-this.startX,c=o.clientY-this.startY;this.handleResize(l,c)},this.handleTouchMove=o=>{if(!this.isResizing||!this.activeHandle)return;const l=o.touches[0];if(!l)return;const c=l.clientX-this.startX,d=l.clientY-this.startY;this.handleResize(c,d)},this.handleMouseUp=()=>{if(!this.isResizing)return;const o=this.element.offsetWidth,l=this.element.offsetHeight;this.onCommit(o,l),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=o=>{o.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=o=>{o.key==="Shift"&&(this.isShiftKeyPressed=!1)};var t,r,n,i,a,s;this.node=e.node,this.editor=e.editor,this.element=e.element,this.contentElement=e.contentElement,this.getPos=e.getPos,this.onResize=e.onResize,this.onCommit=e.onCommit,this.onUpdate=e.onUpdate,(t=e.options)!=null&&t.min&&(this.minSize={...this.minSize,...e.options.min}),(r=e.options)!=null&&r.max&&(this.maxSize=e.options.max),(n=e==null?void 0:e.options)!=null&&n.directions&&(this.directions=e.options.directions),(i=e.options)!=null&&i.preserveAspectRatio&&(this.preserveAspectRatio=e.options.preserveAspectRatio),(a=e.options)!=null&&a.className&&(this.classNames={container:e.options.className.container||"",wrapper:e.options.className.wrapper||"",handle:e.options.className.handle||"",resizing:e.options.className.resizing||""}),(s=e.options)!=null&&s.createCustomHandle&&(this.createCustomHandle=e.options.createCustomHandle),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles(),this.editor.on("update",this.handleEditorUpdate.bind(this))}get dom(){return this.container}get contentDOM(){return this.contentElement}handleEditorUpdate(){const e=this.editor.isEditable;e!==this.lastEditableState&&(this.lastEditableState=e,e?e&&this.handleMap.size===0&&this.attachHandles():this.removeHandles())}update(e,t,r){return e.type!==this.node.type?!1:(this.node=e,this.onUpdate?this.onUpdate(e,t,r):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.editor.off("update",this.handleEditorUpdate.bind(this)),this.container.remove()}createContainer(){const e=document.createElement("div");return e.dataset.resizeContainer="",e.dataset.node=this.node.type.name,e.style.display="flex",this.classNames.container&&(e.className=this.classNames.container),e.appendChild(this.wrapper),e}createWrapper(){const e=document.createElement("div");return e.style.position="relative",e.style.display="block",e.dataset.resizeWrapper="",this.classNames.wrapper&&(e.className=this.classNames.wrapper),e.appendChild(this.element),e}createHandle(e){const t=document.createElement("div");return t.dataset.resizeHandle=e,t.style.position="absolute",this.classNames.handle&&(t.className=this.classNames.handle),t}positionHandle(e,t){const r=t.includes("top"),n=t.includes("bottom"),i=t.includes("left"),a=t.includes("right");r&&(e.style.top="0"),n&&(e.style.bottom="0"),i&&(e.style.left="0"),a&&(e.style.right="0"),(t==="top"||t==="bottom")&&(e.style.left="0",e.style.right="0"),(t==="left"||t==="right")&&(e.style.top="0",e.style.bottom="0")}attachHandles(){this.directions.forEach(e=>{let t;this.createCustomHandle?t=this.createCustomHandle(e):t=this.createHandle(e),t instanceof HTMLElement||(console.warn(`[ResizableNodeView] createCustomHandle("${e}") did not return an HTMLElement. Falling back to default handle.`),t=this.createHandle(e)),this.createCustomHandle||this.positionHandle(t,e),t.addEventListener("mousedown",r=>this.handleResizeStart(r,e)),t.addEventListener("touchstart",r=>this.handleResizeStart(r,e)),this.handleMap.set(e,t),this.wrapper.appendChild(t)})}removeHandles(){this.handleMap.forEach(e=>e.remove()),this.handleMap.clear()}applyInitialSize(){const e=this.node.attrs.width,t=this.node.attrs.height;e?(this.element.style.width=`${e}px`,this.initialWidth=e):this.initialWidth=this.element.offsetWidth,t?(this.element.style.height=`${t}px`,this.initialHeight=t):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(e,t){e.preventDefault(),e.stopPropagation(),this.isResizing=!0,this.activeHandle=t,gYe(e)?(this.startX=e.touches[0].clientX,this.startY=e.touches[0].clientY):(this.startX=e.clientX,this.startY=e.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(e,t){if(!this.activeHandle)return;const r=this.preserveAspectRatio||this.isShiftKeyPressed,{width:n,height:i}=this.calculateNewDimensions(this.activeHandle,e,t),a=this.applyConstraints(n,i,r);this.element.style.width=`${a.width}px`,this.element.style.height=`${a.height}px`,this.onResize&&this.onResize(a.width,a.height)}calculateNewDimensions(e,t,r){let n=this.startWidth,i=this.startHeight;const a=e.includes("right"),s=e.includes("left"),o=e.includes("bottom"),l=e.includes("top");return a?n=this.startWidth+t:s&&(n=this.startWidth-t),o?i=this.startHeight+r:l&&(i=this.startHeight-r),(e==="right"||e==="left")&&(n=this.startWidth+(a?t:-t)),(e==="top"||e==="bottom")&&(i=this.startHeight+(o?r:-r)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(n,i,e):{width:n,height:i}}applyConstraints(e,t,r){var n,i,a,s;if(!r){let c=Math.max(this.minSize.width,e),d=Math.max(this.minSize.height,t);return(n=this.maxSize)!=null&&n.width&&(c=Math.min(this.maxSize.width,c)),(i=this.maxSize)!=null&&i.height&&(d=Math.min(this.maxSize.height,d)),{width:c,height:d}}let o=e,l=t;return o<this.minSize.width&&(o=this.minSize.width,l=o/this.aspectRatio),l<this.minSize.height&&(l=this.minSize.height,o=l*this.aspectRatio),(a=this.maxSize)!=null&&a.width&&o>this.maxSize.width&&(o=this.maxSize.width,l=o/this.aspectRatio),(s=this.maxSize)!=null&&s.height&&l>this.maxSize.height&&(l=this.maxSize.height,o=l*this.aspectRatio),{width:o,height:l}}applyAspectRatio(e,t,r){const n=r==="left"||r==="right",i=r==="top"||r==="bottom";return n?{width:e,height:e/this.aspectRatio}:i?{width:t*this.aspectRatio,height:t}:{width:e,height:e/this.aspectRatio}}};function vYe(e,t){const{selection:r}=e,{$from:n}=r;if(r instanceof pr){const a=n.index();return n.parent.canReplaceWith(a,a+1,t)}let i=n.depth;for(;i>=0;){const a=n.index(i);if(n.node(i).contentMatchAt(a).matchType(t))return!0;i-=1}return!1}function yYe(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}var bYe={};vB(bYe,{createAtomBlockMarkdownSpec:()=>wYe,createBlockMarkdownSpec:()=>SYe,createInlineMarkdownSpec:()=>Nfe,parseAttributes:()=>_B,parseIndentedBlocks:()=>vF,renderNestedMarkdownContent:()=>AB,serializeAttributes:()=>NB});function _B(e){if(!(e!=null&&e.trim()))return{};const t={},r=[],n=e.replace(/["']([^"']*)["']/g,c=>(r.push(c),`__QUOTED_${r.length-1}__`)),i=n.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const c=i.map(d=>d.trim().slice(1));t.class=c.join(" ")}const a=n.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);a&&(t.id=a[1]);const s=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(n.matchAll(s)).forEach(([,c,d])=>{var f;const p=parseInt(((f=d.match(/__QUOTED_(\d+)__/))==null?void 0:f[1])||"0",10),m=r[p];m&&(t[c]=m.slice(1,-1))});const l=n.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(d=>{d.match(/^[a-zA-Z][\w-]*$/)&&(t[d]=!0)}),t}function NB(e){if(!e||Object.keys(e).length===0)return"";const t=[];return e.class&&String(e.class).split(/\s+/).filter(Boolean).forEach(n=>t.push(`.${n}`)),e.id&&t.push(`#${e.id}`),Object.entries(e).forEach(([r,n])=>{r==="class"||r==="id"||(n===!0?t.push(r):n!==!1&&n!=null&&t.push(`${r}="${String(n)}"`))}),t.join(" ")}function wYe(e){const{nodeName:t,name:r,parseAttributes:n=_B,serializeAttributes:i=NB,defaultAttributes:a={},requiredAttributes:s=[],allowedAttributes:o}=e,l=r||t,c=d=>{if(!o)return d;const f={};return o.forEach(p=>{p in d&&(f[p]=d[p])}),f};return{parseMarkdown:(d,f)=>{const p={...a,...d.attributes};return f.createNode(t,p,[])},markdownTokenizer:{name:t,level:"block",start(d){var f;const p=new RegExp(`^:::${l}(?:\\s|$)`,"m"),m=(f=d.match(p))==null?void 0:f.index;return m!==void 0?m:-1},tokenize(d,f,p){const m=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),x=d.match(m);if(!x)return;const y=x[1]||"",b=n(y);if(!s.find(_=>!(_ in b)))return{type:t,raw:x[0],attributes:b}}},renderMarkdown:d=>{const f=c(d.attrs||{}),p=i(f),m=p?` {${p}}`:"";return`:::${l}${m} :::`}}}function SYe(e){const{nodeName:t,name:r,getContent:n,parseAttributes:i=_B,serializeAttributes:a=NB,defaultAttributes:s={},content:o="block",allowedAttributes:l}=e,c=r||t,d=f=>{if(!l)return f;const p={};return l.forEach(m=>{m in f&&(p[m]=f[m])}),p};return{parseMarkdown:(f,p)=>{let m;if(n){const y=n(f);m=typeof y=="string"?[{type:"text",text:y}]:y}else o==="block"?m=p.parseChildren(f.tokens||[]):m=p.parseInline(f.tokens||[]);const x={...s,...f.attributes};return p.createNode(t,x,m)},markdownTokenizer:{name:t,level:"block",start(f){var p;const m=new RegExp(`^:::${c}`,"m"),x=(p=f.match(m))==null?void 0:p.index;return x!==void 0?x:-1},tokenize(f,p,m){var x;const y=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),b=f.match(y);if(!b)return;const[S,_=""]=b,C=i(_);let A=1;const j=S.length;let P="";const O=/^:::([\w-]*)(\s.*)?/gm,D=f.slice(j);for(O.lastIndex=0;;){const L=O.exec(D);if(L===null)break;const B=L.index,H=L[1];if(!((x=L[2])!=null&&x.endsWith(":::"))){if(H)A+=1;else if(A-=1,A===0){const z=D.slice(0,B);P=z.trim();const ie=f.slice(0,j+B+L[0].length);let X=[];if(P)if(o==="block")for(X=m.blockTokens(z),X.forEach(W=>{W.text&&(!W.tokens||W.tokens.length===0)&&(W.tokens=m.inlineTokens(W.text))});X.length>0;){const W=X[X.length-1];if(W.type==="paragraph"&&(!W.text||W.text.trim()===""))X.pop();else break}else X=m.inlineTokens(P);return{type:t,raw:ie,attributes:C,content:P,tokens:X}}}}}},renderMarkdown:(f,p)=>{const m=d(f.attrs||{}),x=a(m),y=x?` {${x}}`:"",b=p.renderChildren(f.content||[],`

`);return`:::${c}${y}

${b}

:::`}}}function EYe(e){if(!e.trim())return{};const t={},r=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let n=r.exec(e);for(;n!==null;){const[,i,a,s]=n;t[i]=a||s,n=r.exec(e)}return t}function CYe(e){return Object.entries(e).filter(([,t])=>t!=null).map(([t,r])=>`${t}="${r}"`).join(" ")}function Nfe(e){const{nodeName:t,name:r,getContent:n,parseAttributes:i=EYe,serializeAttributes:a=CYe,defaultAttributes:s={},selfClosing:o=!1,allowedAttributes:l}=e,c=r||t,d=p=>{if(!l)return p;const m={};return l.forEach(x=>{const y=typeof x=="string"?x:x.name,b=typeof x=="string"?void 0:x.skipIfDefault;if(y in p){const S=p[y];if(b!==void 0&&S===b)return;m[y]=S}}),m},f=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(p,m)=>{const x={...s,...p.attributes};if(o)return m.createNode(t,x);const y=n?n(p):p.content||"";return y?m.createNode(t,x,[m.createTextNode(y)]):m.createNode(t,x,[])},markdownTokenizer:{name:t,level:"inline",start(p){const m=o?new RegExp(`\\[${f}\\s*[^\\]]*\\]`):new RegExp(`\\[${f}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${f}\\]`),x=p.match(m),y=x==null?void 0:x.index;return y!==void 0?y:-1},tokenize(p,m,x){const y=o?new RegExp(`^\\[${f}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${f}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${f}\\]`),b=p.match(y);if(!b)return;let S="",_="";if(o){const[,A]=b;_=A}else{const[,A,j]=b;_=A,S=j||""}const C=i(_.trim());return{type:t,raw:b[0],content:S.trim(),attributes:C}}},renderMarkdown:p=>{let m="";n?m=n(p):p.content&&p.content.length>0&&(m=p.content.filter(S=>S.type==="text").map(S=>S.text).join(""));const x=d(p.attrs||{}),y=a(x),b=y?` ${y}`:"";return o?`[${c}${b}]`:`[${c}${b}]${m}[/${c}]`}}}function vF(e,t,r){var n,i,a,s;const o=e.split(`
`),l=[];let c="",d=0;const f=t.baseIndentSize||2;for(;d<o.length;){const p=o[d],m=p.match(t.itemPattern);if(!m){if(l.length>0)break;if(p.trim()===""){d+=1,c=`${c}${p}
`;continue}else return}const x=t.extractItemData(m),{indentLevel:y,mainContent:b}=x;c=`${c}${p}
`;const S=[b];for(d+=1;d<o.length;){const j=o[d];if(j.trim()===""){const O=o.slice(d+1).findIndex(B=>B.trim()!=="");if(O===-1)break;if((((i=(n=o[d+1+O].match(/^(\s*)/))==null?void 0:n[1])==null?void 0:i.length)||0)>y){S.push(j),c=`${c}${j}
`,d+=1;continue}else break}if((((s=(a=j.match(/^(\s*)/))==null?void 0:a[1])==null?void 0:s.length)||0)>y)S.push(j),c=`${c}${j}
`,d+=1;else break}let _;const C=S.slice(1);if(C.length>0){const j=C.map(P=>P.slice(y+f)).join(`
`);j.trim()&&(t.customNestedParser?_=t.customNestedParser(j):_=r.blockTokens(j))}const A=t.createToken(x,_);l.push(A)}if(l.length!==0)return{items:l,raw:c}}function AB(e,t,r,n){if(!e||!Array.isArray(e.content))return"";const i=typeof r=="function"?r(n):r,[a,...s]=e.content,o=t.renderChildren([a]),l=[`${i}${o}`];return s&&s.length>0&&s.forEach(c=>{const d=t.renderChildren([c]);if(d){const f=d.split(`
`).map(p=>p?t.indent(p):"").join(`
`);l.push(f)}}),l.join(`
`)}function kYe(e,t,r={}){const{state:n}=t,{doc:i,tr:a}=n,s=e;i.descendants((o,l)=>{const c=a.mapping.map(l),d=a.mapping.map(l)+o.nodeSize;let f=null;if(o.marks.forEach(m=>{if(m!==s)return!1;f=m}),!f)return;let p=!1;if(Object.keys(r).forEach(m=>{r[m]!==f.attrs[m]&&(p=!0)}),p){const m=e.type.create({...e.attrs,...r});a.removeMark(c,d,e.type),a.addMark(c,d,m)}}),a.docChanged&&t.view.dispatch(a)}var rl=class Afe extends kB{constructor(){super(...arguments),this.type="node"}static create(t={}){const r=typeof t=="function"?t():t;return new Afe(r)}configure(t){return super.configure(t)}extend(t){const r=typeof t=="function"?t():t;return super.extend(r)}},_Ye=class{constructor(e,t,r){this.isDragging=!1,this.component=e,this.editor=t.editor,this.options={stopEvent:null,ignoreMutation:null,...r},this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.innerDecorations=t.innerDecorations,this.view=t.view,this.HTMLAttributes=t.HTMLAttributes,this.getPos=t.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var t,r,n,i,a,s,o;const{view:l}=this.editor,c=e.target,d=c.nodeType===3?(t=c.parentElement)==null?void 0:t.closest("[data-drag-handle]"):c.closest("[data-drag-handle]");if(!this.dom||(r=this.contentDOM)!=null&&r.contains(c)||!d)return;let f=0,p=0;if(this.dom!==d){const _=this.dom.getBoundingClientRect(),C=d.getBoundingClientRect(),A=(i=e.offsetX)!=null?i:(n=e.nativeEvent)==null?void 0:n.offsetX,j=(s=e.offsetY)!=null?s:(a=e.nativeEvent)==null?void 0:a.offsetY;f=C.x-_.x+A,p=C.y-_.y+j}const m=this.dom.cloneNode(!0);try{const _=this.dom.getBoundingClientRect();m.style.width=`${Math.round(_.width)}px`,m.style.height=`${Math.round(_.height)}px`,m.style.boxSizing="border-box",m.style.pointerEvents="none"}catch{}let x=null;try{x=document.createElement("div"),x.style.position="absolute",x.style.top="-9999px",x.style.left="-9999px",x.style.pointerEvents="none",x.appendChild(m),document.body.appendChild(x),(o=e.dataTransfer)==null||o.setDragImage(m,f,p)}finally{x&&setTimeout(()=>{try{x==null||x.remove()}catch{}},0)}const y=this.getPos();if(typeof y!="number")return;const b=pr.create(l.state.doc,y),S=l.state.tr.setSelection(b);l.dispatch(S)}stopEvent(e){var t;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const r=e.target;if(!(this.dom.contains(r)&&!((t=this.contentDOM)!=null&&t.contains(r))))return!1;const i=e.type.startsWith("drag"),a=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!a&&!i)return!0;const{isEditable:o}=this.editor,{isDragging:l}=this,c=!!this.node.type.spec.draggable,d=pr.isSelectable(this.node),f=e.type==="copy",p=e.type==="paste",m=e.type==="cut",x=e.type==="mousedown";if(!c&&d&&i&&e.target===this.dom&&e.preventDefault(),c&&i&&!l&&e.target===this.dom)return e.preventDefault(),!1;if(c&&o&&!l&&x){const y=r.closest("[data-drag-handle]");y&&(this.dom===y||this.dom.contains(y))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(l||a||f||p||m||x&&d)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(R3()||Qde())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:t})=>{const r=this.getPos();return typeof r!="number"?!1:(t.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if(typeof e!="number")return;const t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}};function yx(e){return new sYe({find:e.find,handler:({state:t,range:r,match:n,pasteEvent:i})=>{const a=ni(e.getAttributes,void 0,n,i);if(a===!1||a===null)return null;const{tr:s}=t,o=n[n.length-1],l=n[0];let c=r.to;if(o){const d=l.search(/\S/),f=r.from+l.indexOf(o),p=f+o.length;if(CB(r.from,r.to,t.doc).filter(x=>x.mark.type.excluded.find(b=>b===e.type&&b!==x.mark.type)).filter(x=>x.to>f).length)return null;p<r.to&&s.delete(p,r.to),f>r.from&&s.delete(r.from+d,f),c=r.from+d+o.length,s.addMark(r.from+d,c,e.type.create(a||{})),s.removeStoredMark(e.type)}}})}var NYe=Object.getOwnPropertyNames,AYe=Object.getOwnPropertySymbols,TYe=Object.prototype.hasOwnProperty;function fY(e,t){return function(n,i,a){return e(n,i,a)&&t(n,i,a)}}function Q_(e){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,i);var a=i.cache,s=a.get(r),o=a.get(n);if(s&&o)return s===n&&o===r;a.set(r,n),a.set(n,r);var l=e(r,n,i);return a.delete(r),a.delete(n),l}}function IYe(e){return e!=null?e[Symbol.toStringTag]:void 0}function hY(e){return NYe(e).concat(AYe(e))}var OYe=Object.hasOwn||function(e,t){return TYe.call(e,t)};function a1(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var PYe="__v",RYe="__o",jYe="_owner",pY=Object.getOwnPropertyDescriptor,mY=Object.keys;function DYe(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function MYe(e,t){return a1(e.getTime(),t.getTime())}function FYe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function LYe(e,t){return e===t}function gY(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var i=new Array(n),a=e.entries(),s,o,l=0;(s=a.next())&&!s.done;){for(var c=t.entries(),d=!1,f=0;(o=c.next())&&!o.done;){if(i[f]){f++;continue}var p=s.value,m=o.value;if(r.equals(p[0],m[0],l,f,e,t,r)&&r.equals(p[1],m[1],p[0],m[0],e,t,r)){d=i[f]=!0;break}f++}if(!d)return!1;l++}return!0}var BYe=a1;function UYe(e,t,r){var n=mY(e),i=n.length;if(mY(t).length!==i)return!1;for(;i-- >0;)if(!Tfe(e,t,r,n[i]))return!1;return!0}function Fw(e,t,r){var n=hY(e),i=n.length;if(hY(t).length!==i)return!1;for(var a,s,o;i-- >0;)if(a=n[i],!Tfe(e,t,r,a)||(s=pY(e,a),o=pY(t,a),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function $Ye(e,t){return a1(e.valueOf(),t.valueOf())}function zYe(e,t){return e.source===t.source&&e.flags===t.flags}function xY(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var i=new Array(n),a=e.values(),s,o;(s=a.next())&&!s.done;){for(var l=t.values(),c=!1,d=0;(o=l.next())&&!o.done;){if(!i[d]&&r.equals(s.value,o.value,s.value,o.value,e,t,r)){c=i[d]=!0;break}d++}if(!c)return!1}return!0}function HYe(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function WYe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function Tfe(e,t,r,n){return(n===jYe||n===RYe||n===PYe)&&(e.$$typeof||t.$$typeof)?!0:OYe(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var VYe="[object Arguments]",qYe="[object Boolean]",GYe="[object Date]",KYe="[object Error]",XYe="[object Map]",YYe="[object Number]",QYe="[object Object]",JYe="[object RegExp]",ZYe="[object Set]",eQe="[object String]",tQe="[object URL]",rQe=Array.isArray,vY=typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView:null,yY=Object.assign,nQe=Object.prototype.toString.call.bind(Object.prototype.toString);function iQe(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,i=e.areFunctionsEqual,a=e.areMapsEqual,s=e.areNumbersEqual,o=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,p=e.areUrlsEqual,m=e.unknownTagComparators;return function(y,b,S){if(y===b)return!0;if(y==null||b==null)return!1;var _=typeof y;if(_!==typeof b)return!1;if(_!=="object")return _==="number"?s(y,b,S):_==="function"?i(y,b,S):!1;var C=y.constructor;if(C!==b.constructor)return!1;if(C===Object)return o(y,b,S);if(rQe(y))return t(y,b,S);if(vY!=null&&vY(y))return f(y,b,S);if(C===Date)return r(y,b,S);if(C===RegExp)return c(y,b,S);if(C===Map)return a(y,b,S);if(C===Set)return d(y,b,S);var A=nQe(y);if(A===GYe)return r(y,b,S);if(A===JYe)return c(y,b,S);if(A===XYe)return a(y,b,S);if(A===ZYe)return d(y,b,S);if(A===QYe)return typeof y.then!="function"&&typeof b.then!="function"&&o(y,b,S);if(A===tQe)return p(y,b,S);if(A===KYe)return n(y,b,S);if(A===VYe)return o(y,b,S);if(A===qYe||A===YYe||A===eQe)return l(y,b,S);if(m){var j=m[A];if(!j){var P=IYe(y);P&&(j=m[P])}if(j)return j(y,b,S)}return!1}}function aQe(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,i={areArraysEqual:n?Fw:DYe,areDatesEqual:MYe,areErrorsEqual:FYe,areFunctionsEqual:LYe,areMapsEqual:n?fY(gY,Fw):gY,areNumbersEqual:BYe,areObjectsEqual:n?Fw:UYe,arePrimitiveWrappersEqual:$Ye,areRegExpsEqual:zYe,areSetsEqual:n?fY(xY,Fw):xY,areTypedArraysEqual:n?Fw:HYe,areUrlsEqual:WYe,unknownTagComparators:void 0};if(r&&(i=yY({},i,r(i))),t){var a=Q_(i.areArraysEqual),s=Q_(i.areMapsEqual),o=Q_(i.areObjectsEqual),l=Q_(i.areSetsEqual);i=yY({},i,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:l})}return i}function sQe(e){return function(t,r,n,i,a,s,o){return e(t,r,o)}}function oQe(e){var t=e.circular,r=e.comparator,n=e.createState,i=e.equals,a=e.strict;if(n)return function(l,c){var d=n(),f=d.cache,p=f===void 0?t?new WeakMap:void 0:f,m=d.meta;return r(l,c,{cache:p,equals:i,meta:m,strict:a})};if(t)return function(l,c){return r(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var s={cache:void 0,equals:i,meta:void 0,strict:a};return function(l,c){return r(l,c,s)}}var lQe=cm();cm({strict:!0});cm({circular:!0});cm({circular:!0,strict:!0});cm({createInternalComparator:function(){return a1}});cm({strict:!0,createInternalComparator:function(){return a1}});cm({circular:!0,createInternalComparator:function(){return a1}});cm({circular:!0,createInternalComparator:function(){return a1},strict:!0});function cm(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,i=e.createState,a=e.strict,s=a===void 0?!1:a,o=aQe(e),l=iQe(o),c=n?n(l):sQe(l);return oQe({circular:r,comparator:l,createState:i,equals:c,strict:s})}var Ife={exports:{}},Ofe={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B3=I,cQe=Z9;function uQe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var dQe=typeof Object.is=="function"?Object.is:uQe,fQe=cQe.useSyncExternalStore,hQe=B3.useRef,pQe=B3.useEffect,mQe=B3.useMemo,gQe=B3.useDebugValue;Ofe.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var a=hQe(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=mQe(function(){function l(m){if(!c){if(c=!0,d=m,m=n(m),i!==void 0&&s.hasValue){var x=s.value;if(i(x,m))return f=x}return f=m}if(x=f,dQe(d,m))return x;var y=n(m);return i!==void 0&&i(x,y)?(d=m,x):(d=m,f=y)}var c=!1,d,f,p=r===void 0?null:r;return[function(){return l(t())},p===null?void 0:function(){return l(p())}]},[t,r,n,i]);var o=fQe(e,a[0],a[1]);return pQe(function(){s.hasValue=!0,s.value=o},[o]),gQe(o),o};Ife.exports=Ofe;var Pfe=Ife.exports,xQe=(...e)=>t=>{e.forEach(r=>{typeof r=="function"?r(t):r&&(r.current=t)})},vQe=({contentComponent:e})=>{const t=Z9.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return u.jsx(u.Fragment,{children:Object.values(t)})};function yQe(){const e=new Set;let t={};return{subscribe(r){return e.add(r),()=>{e.delete(r)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(r,n){t={...t,[r]:UL.createPortal(n.reactElement,n.element,r)},e.forEach(i=>i())},removeRenderer(r){const n={...t};delete n[r],t=n,e.forEach(i=>i())}}}var bQe=class extends Vr.Component{constructor(e){var t;super(e),this.editorContentRef=Vr.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(e.view.dom),e.setOptions({element:t}),e.contentComponent=yQe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((e=t.view.dom)!=null&&e.firstChild))return;const r=document.createElement("div");r.append(t.view.dom),t.setOptions({element:r})}catch{}}}render(){const{editor:e,innerRef:t,...r}=this.props;return u.jsxs(u.Fragment,{children:[u.jsx("div",{ref:xQe(t,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&u.jsx(vQe,{contentComponent:e.contentComponent})]})}},wQe=I.forwardRef((e,t)=>{const r=Vr.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return Vr.createElement(bQe,{key:r,innerRef:t,...e})}),SQe=Vr.memo(wQe),EQe=typeof window<"u"?I.useLayoutEffect:I.useEffect,CQe=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(n=>n())},r=this.editor;return r.on("transaction",t),()=>{r.off("transaction",t)}}}};function kQe(e){var t;const[r]=I.useState(()=>new CQe(e.editor)),n=Pfe.useSyncExternalStoreWithSelector(r.subscribe,r.getSnapshot,r.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:lQe);return EQe(()=>r.watch(e.editor),[e.editor,r]),I.useDebugValue(n),n}var _Qe=!1,yF=typeof window>"u",NQe=yF||!!(typeof window<"u"&&window.next),AQe=class Rfe{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(r=>r())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?yF||NQe?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...n)=>{var i,a;return(a=(i=this.options.current).onBeforeCreate)==null?void 0:a.call(i,...n)},onBlur:(...n)=>{var i,a;return(a=(i=this.options.current).onBlur)==null?void 0:a.call(i,...n)},onCreate:(...n)=>{var i,a;return(a=(i=this.options.current).onCreate)==null?void 0:a.call(i,...n)},onDestroy:(...n)=>{var i,a;return(a=(i=this.options.current).onDestroy)==null?void 0:a.call(i,...n)},onFocus:(...n)=>{var i,a;return(a=(i=this.options.current).onFocus)==null?void 0:a.call(i,...n)},onSelectionUpdate:(...n)=>{var i,a;return(a=(i=this.options.current).onSelectionUpdate)==null?void 0:a.call(i,...n)},onTransaction:(...n)=>{var i,a;return(a=(i=this.options.current).onTransaction)==null?void 0:a.call(i,...n)},onUpdate:(...n)=>{var i,a;return(a=(i=this.options.current).onUpdate)==null?void 0:a.call(i,...n)},onContentError:(...n)=>{var i,a;return(a=(i=this.options.current).onContentError)==null?void 0:a.call(i,...n)},onDrop:(...n)=>{var i,a;return(a=(i=this.options.current).onDrop)==null?void 0:a.call(i,...n)},onPaste:(...n)=>{var i,a;return(a=(i=this.options.current).onPaste)==null?void 0:a.call(i,...n)},onDelete:(...n)=>{var i,a;return(a=(i=this.options.current).onDelete)==null?void 0:a.call(i,...n)}};return new mYe(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,r){return Object.keys(t).every(n=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)?!0:n==="extensions"&&t.extensions&&r.extensions?t.extensions.length!==r.extensions.length?!1:t.extensions.every((i,a)=>{var s;return i===((s=r.extensions)==null?void 0:s[a])}):t[n]===r[n])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?Rfe.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((n,i)=>n===t[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,r=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){r&&r.setOptions(this.options.current);return}r&&!r.isDestroyed&&(r.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function TQe(e={},t=[]){const r=I.useRef(e);r.current=e;const[n]=I.useState(()=>new AQe(r)),i=Z9.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return I.useDebugValue(i),I.useEffect(n.onRender(t)),kQe({editor:i,selector:({transactionNumber:a})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&a===0?0:a+1}),i}var IQe=I.createContext({editor:null});IQe.Consumer;var jfe=I.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),OQe=()=>I.useContext(jfe),PQe=Vr.forwardRef((e,t)=>{const{onDragStart:r}=OQe(),n=e.as||"div";return u.jsx(n,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...e.style}})});function bY(e){return!!(typeof e=="function"&&e.prototype&&e.prototype.isReactComponent)}function wY(e){return!!(typeof e=="object"&&e.$$typeof&&(e.$$typeof.toString()==="Symbol(react.forward_ref)"||e.$$typeof.description==="react.forward_ref"))}function RQe(e){return!!(typeof e=="object"&&e.$$typeof&&(e.$$typeof.toString()==="Symbol(react.memo)"||e.$$typeof.description==="react.memo"))}function jQe(e){if(bY(e)||wY(e))return!0;if(RQe(e)){const t=e.type;if(t)return bY(t)||wY(t)}return!1}function DQe(){try{if(I.version)return parseInt(I.version.split(".")[0],10)>=19}catch{}return!1}var Dfe=class{constructor(e,{editor:t,props:r={},as:n="div",className:i=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=t,this.props=r,this.element=document.createElement(n),this.element.classList.add("react-renderer"),i&&this.element.classList.add(...i.split(" ")),this.editor.isInitialized?Ml.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.render()})}render(){var e;const t=this.component,r=this.props,n=this.editor,i=DQe(),a=jQe(t),s={...r};s.ref&&!(i||a)&&delete s.ref,!s.ref&&(i||a)&&(s.ref=o=>{this.ref=o}),this.reactElement=u.jsx(t,{...s}),(e=n==null?void 0:n.contentComponent)==null||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;const t=this.editor;(e=t==null?void 0:t.contentComponent)==null||e.removeRenderer(this.id);try{this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}catch{}}updateAttributes(e){Object.keys(e).forEach(t=>{this.element.setAttribute(t,e[t])})}};Vr.createContext({markViewContentRef:()=>{}});var MQe=class extends _Ye{constructor(e,t,r){if(super(e,t,r),this.selectionRafId=null,!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const n=this.dom.querySelector("[data-node-view-content]");if(!n)return;n.appendChild(this.contentDOMElement)}}mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(l={})=>this.updateAttributes(l),deleteNode:()=>this.deleteNode(),ref:I.createRef()};if(!this.component.displayName){const l=c=>c.charAt(0).toUpperCase()+c.substring(1);this.component.displayName=l(this.extension.name)}const n={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:l=>{l&&this.contentDOMElement&&l.firstChild!==this.contentDOMElement&&(l.hasAttribute("data-node-view-wrapper")&&l.removeAttribute("data-node-view-wrapper"),l.appendChild(this.contentDOMElement))}},i=this.component,a=I.memo(l=>u.jsx(jfe.Provider,{value:n,children:I.createElement(i,l)}));a.displayName="ReactNodeView";let s=this.node.isInline?"span":"div";this.options.as&&(s=this.options.as);const{className:o=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new Dfe(a,{editor:this.editor,props:e,as:s,className:`node-${this.node.type.name} ${o}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!((e=this.renderer.element.firstElementChild)!=null&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){this.selectionRafId&&(cancelAnimationFrame(this.selectionRafId),this.selectionRafId=null),this.selectionRafId=requestAnimationFrame(()=>{this.selectionRafId=null;const{from:e,to:t}=this.editor.state.selection,r=this.getPos();if(typeof r=="number")if(e<=r&&t>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}})}update(e,t,r){const n=i=>{this.renderer.updateProps(i),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const i=this.node,a=this.decorations,s=this.innerDecorations;return this.node=e,this.decorations=t,this.innerDecorations=r,this.options.update({oldNode:i,oldDecorations:a,newNode:e,newDecorations:t,oldInnerDecorations:s,innerDecorations:r,updateProps:()=>n({node:e,decorations:t,innerDecorations:r})})}return e===this.node&&this.decorations===t&&this.innerDecorations===r||(this.node=e,this.decorations=t,this.innerDecorations=r,n({node:e,decorations:t,innerDecorations:r})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null,this.selectionRafId&&(cancelAnimationFrame(this.selectionRafId),this.selectionRafId=null)}updateElementAttributes(){if(this.options.attrs){let e={};if(typeof this.options.attrs=="function"){const t=this.editor.extensionManager.attributes,r=$S(this.node,t);e=this.options.attrs({node:this.node,HTMLAttributes:r})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}};function FQe(e,t){return r=>r.editor.contentComponent?new MQe(e,r,t):{}}var YT=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:r,...n}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,n,r]},LQe=/^\s*>\s$/,BQe=rl.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return YT("blockquote",{...Ii(this.options.HTMLAttributes,e),children:YT("slot",{})})},parseMarkdown:(e,t)=>t.createNode("blockquote",void 0,t.parseChildren(e.tokens||[])),renderMarkdown:(e,t)=>{if(!e.content)return"";const r=">",n=[];return e.content.forEach(i=>{const o=t.renderChildren([i]).split(`
`).map(l=>l.trim()===""?r:`${r} ${l}`);n.push(o.join(`
`))}),n.join(`
${r}
`)},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[jy({find:LQe,type:this.type})]}}),UQe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,$Qe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,zQe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,HQe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,WQe=i1.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return YT("strong",{...Ii(this.options.HTMLAttributes,e),children:YT("slot",{})})},markdownTokenName:"strong",parseMarkdown:(e,t)=>t.applyMark("bold",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`**${t.renderChildren(e)}**`,addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ry({find:UQe,type:this.type}),Ry({find:zQe,type:this.type})]},addPasteRules(){return[yx({find:$Qe,type:this.type}),yx({find:HQe,type:this.type})]}}),VQe=/(^|[^`])`([^`]+)`(?!`)$/,qQe=/(^|[^`])`([^`]+)`(?!`)/g,GQe=i1.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",Ii(this.options.HTMLAttributes,e),0]},markdownTokenName:"codespan",parseMarkdown:(e,t)=>t.applyMark("code",[{type:"text",text:e.text||""}]),renderMarkdown:(e,t)=>e.content?`\`${t.renderChildren(e.content)}\``:"",addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ry({find:VQe,type:this.type})]},addPasteRules(){return[yx({find:qQe,type:this.type})]}}),WD=4,KQe=/^```([a-z]+)?[\s\n]$/,XQe=/^~~~([a-z]+)?[\s\n]$/,YQe=rl.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:WD,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:r}=this.options;if(!r)return null;const a=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(s=>s.startsWith(r)).map(s=>s.replace(r,""))[0];return a||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",Ii(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(e,t)=>{var r;return((r=e.raw)==null?void 0:r.startsWith("```"))===!1&&e.codeBlockStyle!=="indented"?[]:t.createNode("codeBlock",{language:e.lang||null},e.text?[t.createTextNode(e.text)]:[])},renderMarkdown:(e,t)=>{var r;let n="";const i=((r=e.attrs)==null?void 0:r.language)||"";return e.content?n=[`\`\`\`${i}`,t.renderChildren(e.content),"```"].join(`
`):n=`\`\`\`${i}

\`\`\``,n},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,r=t.pos===1;return!e||t.parent.type.name!==this.name?!1:r||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const r=(t=this.options.tabSize)!=null?t:WD,{state:n}=e,{selection:i}=n,{$from:a,empty:s}=i;if(a.parent.type!==this.type)return!1;const o=" ".repeat(r);return s?e.commands.insertContent(o):e.commands.command(({tr:l})=>{const{from:c,to:d}=i,m=n.doc.textBetween(c,d,`
`,`
`).split(`
`).map(x=>o+x).join(`
`);return l.replaceWith(c,d,n.schema.text(m)),!0})},"Shift-Tab":({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const r=(t=this.options.tabSize)!=null?t:WD,{state:n}=e,{selection:i}=n,{$from:a,empty:s}=i;return a.parent.type!==this.type?!1:s?e.commands.command(({tr:o})=>{var l;const{pos:c}=a,d=a.start(),f=a.end(),m=n.doc.textBetween(d,f,`
`,`
`).split(`
`);let x=0,y=0;const b=c-d;for(let P=0;P<m.length;P+=1){if(y+m[P].length>=b){x=P;break}y+=m[P].length+1}const _=((l=m[x].match(/^ */))==null?void 0:l[0])||"",C=Math.min(_.length,r);if(C===0)return!0;let A=d;for(let P=0;P<x;P+=1)A+=m[P].length+1;return o.delete(A,A+C),c-A<=C&&o.setSelection(zr.create(o.doc,A)),!0}):e.commands.command(({tr:o})=>{const{from:l,to:c}=i,p=n.doc.textBetween(l,c,`
`,`
`).split(`
`).map(m=>{var x;const y=((x=m.match(/^ */))==null?void 0:x[0])||"",b=Math.min(y.length,r);return m.slice(b)}).join(`
`);return o.replaceWith(l,c,n.schema.text(p)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:r}=t,{$from:n,empty:i}=r;if(!i||n.parent.type!==this.type)return!1;const a=n.parentOffset===n.parent.nodeSize-2,s=n.parent.textContent.endsWith(`

`);return!a||!s?!1:e.chain().command(({tr:o})=>(o.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:r,doc:n}=t,{$from:i,empty:a}=r;if(!a||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const o=i.after();return o===void 0?!1:n.nodeAt(o)?e.commands.command(({tr:c})=>(c.setSelection(pn.near(n.resolve(o))),!0)):e.commands.exitCode()}}},addInputRules(){return[xF({find:KQe,type:this.type,getAttributes:e=>({language:e[1]})}),xF({find:XQe,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new Hi({key:new Ca("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const r=t.clipboardData.getData("text/plain"),n=t.clipboardData.getData("vscode-editor-data"),i=n?JSON.parse(n):void 0,a=i==null?void 0:i.mode;if(!r||!a)return!1;const{tr:s,schema:o}=e.state,l=o.text(r.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:a},l)),s.selection.$from.parent.type!==this.type&&s.setSelection(zr.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),e.dispatch(s),!0}}})]}}),QQe=rl.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`

`):""}),JQe=rl.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",Ii(this.options.HTMLAttributes,e)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:r,editor:n})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:i,storedMarks:a}=r;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:o}=n.extensionManager,l=a||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:c,dispatch:d})=>{if(d&&l&&s){const f=l.filter(p=>o.includes(p.type.name));c.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Mfe=rl.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,Ii(this.options.HTMLAttributes,t),0]},parseMarkdown:(e,t)=>t.createNode("heading",{level:e.depth||1},t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>{var r;const n=(r=e.attrs)!=null&&r.level?parseInt(e.attrs.level,10):1,i="#".repeat(n);return e.content?`${i} ${t.renderChildren(e.content)}`:""},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>xF({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),ZQe=Mfe,eJe=rl.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",Ii(this.options.HTMLAttributes,e)]},markdownTokenName:"hr",parseMarkdown:(e,t)=>t.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!vYe(t,t.schema.nodes[this.name]))return!1;const{selection:r}=t,{$to:n}=r,i=e();return cfe(r)?i.insertContentAt(n.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:a,tr:s,dispatch:o})=>{if(o){const{$to:l}=s.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?s.setSelection(zr.create(s.doc,l.pos+1)):l.nodeAfter.isBlock?s.setSelection(pr.create(s.doc,l.pos)):s.setSelection(zr.create(s.doc,l.pos));else{const d=a.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,f=d==null?void 0:d.create();f&&(s.insert(c,f),s.setSelection(zr.create(s.doc,c+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[_fe({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),tJe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,rJe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,nJe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,iJe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,aJe=i1.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",Ii(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(e,t)=>t.applyMark("italic",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`*${t.renderChildren(e)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ry({find:tJe,type:this.type}),Ry({find:nJe,type:this.type})]},addPasteRules(){return[yx({find:rJe,type:this.type}),yx({find:iJe,type:this.type})]}});const sJe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",oJe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",bF="numeric",wF="ascii",SF="alpha",L2="asciinumeric",u2="alphanumeric",EF="domain",Ffe="emoji",lJe="scheme",cJe="slashscheme",VD="whitespace";function uJe(e,t){return e in t||(t[e]=[]),t[e]}function xg(e,t,r){t[bF]&&(t[L2]=!0,t[u2]=!0),t[wF]&&(t[L2]=!0,t[SF]=!0),t[L2]&&(t[u2]=!0),t[SF]&&(t[u2]=!0),t[u2]&&(t[EF]=!0),t[Ffe]&&(t[EF]=!0);for(const n in t){const i=uJe(n,r);i.indexOf(e)<0&&i.push(e)}}function dJe(e,t){const r={};for(const n in t)t[n].indexOf(e)>=0&&(r[n]=!0);return r}function xl(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}xl.groups={};xl.prototype={accepts(){return!!this.t},go(e){const t=this,r=t.j[e];if(r)return r;for(let n=0;n<t.jr.length;n++){const i=t.jr[n][0],a=t.jr[n][1];if(a&&i.test(e))return a}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,r,n){for(let i=0;i<e.length;i++)this.tt(e[i],t,r,n)},tr(e,t,r,n){n=n||xl.groups;let i;return t&&t.j?i=t:(i=new xl(t),r&&n&&xg(t,r,n)),this.jr.push([e,i]),i},ts(e,t,r,n){let i=this;const a=e.length;if(!a)return i;for(let s=0;s<a-1;s++)i=i.tt(e[s]);return i.tt(e[a-1],t,r,n)},tt(e,t,r,n){n=n||xl.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const a=t;let s,o=i.go(e);if(o?(s=new xl,Object.assign(s.j,o.j),s.jr.push.apply(s.jr,o.jr),s.jd=o.jd,s.t=o.t):s=new xl,a){if(n)if(s.t&&typeof s.t=="string"){const l=Object.assign(dJe(s.t,n),r);xg(a,l,n)}else r&&xg(a,r,n);s.t=a}return i.j[e]=s,s}};const dn=(e,t,r,n,i)=>e.ta(t,r,n,i),ra=(e,t,r,n,i)=>e.tr(t,r,n,i),SY=(e,t,r,n,i)=>e.ts(t,r,n,i),Rt=(e,t,r,n,i)=>e.tt(t,r,n,i),nh="WORD",CF="UWORD",Lfe="ASCIINUMERICAL",Bfe="ALPHANUMERICAL",zS="LOCALHOST",kF="TLD",_F="UTLD",uA="SCHEME",av="SLASH_SCHEME",TB="NUM",NF="WS",IB="NL",B2="OPENBRACE",U2="CLOSEBRACE",QT="OPENBRACKET",JT="CLOSEBRACKET",ZT="OPENPAREN",eI="CLOSEPAREN",tI="OPENANGLEBRACKET",rI="CLOSEANGLEBRACKET",nI="FULLWIDTHLEFTPAREN",iI="FULLWIDTHRIGHTPAREN",aI="LEFTCORNERBRACKET",sI="RIGHTCORNERBRACKET",oI="LEFTWHITECORNERBRACKET",lI="RIGHTWHITECORNERBRACKET",cI="FULLWIDTHLESSTHAN",uI="FULLWIDTHGREATERTHAN",dI="AMPERSAND",fI="APOSTROPHE",hI="ASTERISK",Kp="AT",pI="BACKSLASH",mI="BACKTICK",gI="CARET",r0="COLON",OB="COMMA",xI="DOLLAR",Bd="DOT",vI="EQUALS",PB="EXCLAMATION",Hc="HYPHEN",$2="PERCENT",yI="PIPE",bI="PLUS",wI="POUND",z2="QUERY",RB="QUOTE",Ufe="FULLWIDTHMIDDLEDOT",jB="SEMI",Ud="SLASH",H2="TILDE",SI="UNDERSCORE",$fe="EMOJI",EI="SYM";var zfe=Object.freeze({__proto__:null,ALPHANUMERICAL:Bfe,AMPERSAND:dI,APOSTROPHE:fI,ASCIINUMERICAL:Lfe,ASTERISK:hI,AT:Kp,BACKSLASH:pI,BACKTICK:mI,CARET:gI,CLOSEANGLEBRACKET:rI,CLOSEBRACE:U2,CLOSEBRACKET:JT,CLOSEPAREN:eI,COLON:r0,COMMA:OB,DOLLAR:xI,DOT:Bd,EMOJI:$fe,EQUALS:vI,EXCLAMATION:PB,FULLWIDTHGREATERTHAN:uI,FULLWIDTHLEFTPAREN:nI,FULLWIDTHLESSTHAN:cI,FULLWIDTHMIDDLEDOT:Ufe,FULLWIDTHRIGHTPAREN:iI,HYPHEN:Hc,LEFTCORNERBRACKET:aI,LEFTWHITECORNERBRACKET:oI,LOCALHOST:zS,NL:IB,NUM:TB,OPENANGLEBRACKET:tI,OPENBRACE:B2,OPENBRACKET:QT,OPENPAREN:ZT,PERCENT:$2,PIPE:yI,PLUS:bI,POUND:wI,QUERY:z2,QUOTE:RB,RIGHTCORNERBRACKET:sI,RIGHTWHITECORNERBRACKET:lI,SCHEME:uA,SEMI:jB,SLASH:Ud,SLASH_SCHEME:av,SYM:EI,TILDE:H2,TLD:kF,UNDERSCORE:SI,UTLD:_F,UWORD:CF,WORD:nh,WS:NF});const Zf=/[a-z]/,Lw=new RegExp("\\p{L}","u"),qD=new RegExp("\\p{Emoji}","u"),eh=/\d/,GD=/\s/,EY="\r",KD=`
`,fJe="",hJe="",XD="";let J_=null,Z_=null;function pJe(e=[]){const t={};xl.groups=t;const r=new xl;J_==null&&(J_=CY(sJe)),Z_==null&&(Z_=CY(oJe)),Rt(r,"'",fI),Rt(r,"{",B2),Rt(r,"}",U2),Rt(r,"[",QT),Rt(r,"]",JT),Rt(r,"(",ZT),Rt(r,")",eI),Rt(r,"<",tI),Rt(r,">",rI),Rt(r,"",nI),Rt(r,"",iI),Rt(r,"",aI),Rt(r,"",sI),Rt(r,"",oI),Rt(r,"",lI),Rt(r,"",cI),Rt(r,"",uI),Rt(r,"&",dI),Rt(r,"*",hI),Rt(r,"@",Kp),Rt(r,"`",mI),Rt(r,"^",gI),Rt(r,":",r0),Rt(r,",",OB),Rt(r,"$",xI),Rt(r,".",Bd),Rt(r,"=",vI),Rt(r,"!",PB),Rt(r,"-",Hc),Rt(r,"%",$2),Rt(r,"|",yI),Rt(r,"+",bI),Rt(r,"#",wI),Rt(r,"?",z2),Rt(r,'"',RB),Rt(r,"/",Ud),Rt(r,";",jB),Rt(r,"~",H2),Rt(r,"_",SI),Rt(r,"\\",pI),Rt(r,"",Ufe);const n=ra(r,eh,TB,{[bF]:!0});ra(n,eh,n);const i=ra(n,Zf,Lfe,{[L2]:!0}),a=ra(n,Lw,Bfe,{[u2]:!0}),s=ra(r,Zf,nh,{[wF]:!0});ra(s,eh,i),ra(s,Zf,s),ra(i,eh,i),ra(i,Zf,i);const o=ra(r,Lw,CF,{[SF]:!0});ra(o,Zf),ra(o,eh,a),ra(o,Lw,o),ra(a,eh,a),ra(a,Zf),ra(a,Lw,a);const l=Rt(r,KD,IB,{[VD]:!0}),c=Rt(r,EY,NF,{[VD]:!0}),d=ra(r,GD,NF,{[VD]:!0});Rt(r,XD,d),Rt(c,KD,l),Rt(c,XD,d),ra(c,GD,d),Rt(d,EY),Rt(d,KD),ra(d,GD,d),Rt(d,XD,d);const f=ra(r,qD,$fe,{[Ffe]:!0});Rt(f,"#"),ra(f,qD,f),Rt(f,fJe,f);const p=Rt(f,hJe);Rt(p,"#"),ra(p,qD,f);const m=[[Zf,s],[eh,i]],x=[[Zf,null],[Lw,o],[eh,a]];for(let y=0;y<J_.length;y++)Mp(r,J_[y],kF,nh,m);for(let y=0;y<Z_.length;y++)Mp(r,Z_[y],_F,CF,x);xg(kF,{tld:!0,ascii:!0},t),xg(_F,{utld:!0,alpha:!0},t),Mp(r,"file",uA,nh,m),Mp(r,"mailto",uA,nh,m),Mp(r,"http",av,nh,m),Mp(r,"https",av,nh,m),Mp(r,"ftp",av,nh,m),Mp(r,"ftps",av,nh,m),xg(uA,{scheme:!0,ascii:!0},t),xg(av,{slashscheme:!0,ascii:!0},t),e=e.sort((y,b)=>y[0]>b[0]?1:-1);for(let y=0;y<e.length;y++){const b=e[y][0],_=e[y][1]?{[lJe]:!0}:{[cJe]:!0};b.indexOf("-")>=0?_[EF]=!0:Zf.test(b)?eh.test(b)?_[L2]=!0:_[wF]=!0:_[bF]=!0,SY(r,b,b,_)}return SY(r,"localhost",zS,{ascii:!0}),r.jd=new xl(EI),{start:r,tokens:Object.assign({groups:t},zfe)}}function Hfe(e,t){const r=mJe(t.replace(/[A-Z]/g,o=>o.toLowerCase())),n=r.length,i=[];let a=0,s=0;for(;s<n;){let o=e,l=null,c=0,d=null,f=-1,p=-1;for(;s<n&&(l=o.go(r[s]));)o=l,o.accepts()?(f=0,p=0,d=o):f>=0&&(f+=r[s].length,p++),c+=r[s].length,a+=r[s].length,s++;a-=f,s-=p,c-=f,i.push({t:d.t,v:t.slice(a-c,a),s:a-c,e:a})}return i}function mJe(e){const t=[],r=e.length;let n=0;for(;n<r;){let i=e.charCodeAt(n),a,s=i<55296||i>56319||n+1===r||(a=e.charCodeAt(n+1))<56320||a>57343?e[n]:e.slice(n,n+2);t.push(s),n+=s.length}return t}function Mp(e,t,r,n,i){let a;const s=t.length;for(let o=0;o<s-1;o++){const l=t[o];e.j[l]?a=e.j[l]:(a=new xl(n),a.jr=i.slice(),e.j[l]=a),e=a}return a=new xl(r),a.jr=i.slice(),e.j[t[s-1]]=a,a}function CY(e){const t=[],r=[];let n=0,i="0123456789";for(;n<e.length;){let a=0;for(;i.indexOf(e[n+a])>=0;)a++;if(a>0){t.push(r.join(""));for(let s=parseInt(e.substring(n,n+a),10);s>0;s--)r.pop();n+=a}else r.push(e[n]),n++}return t}const HS={defaultProtocol:"http",events:null,format:kY,formatHref:kY,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function DB(e,t=null){let r=Object.assign({},HS);e&&(r=Object.assign(r,e instanceof DB?e.o:e));const n=r.ignoreTags,i=[];for(let a=0;a<n.length;a++)i.push(n[a].toUpperCase());this.o=r,t&&(this.defaultRender=t),this.ignoreTags=i}DB.prototype={o:HS,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,r){const n=t!=null;let i=this.o[e];return i&&(typeof i=="object"?(i=r.t in i?i[r.t]:HS[e],typeof i=="function"&&n&&(i=i(t,r))):typeof i=="function"&&n&&(i=i(t,r.t,r)),i)},getObj(e,t,r){let n=this.o[e];return typeof n=="function"&&t!=null&&(n=n(t,r.t,r)),n},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function kY(e){return e}function Wfe(e,t){this.t="token",this.v=e,this.tk=t}Wfe.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),r=e.get("truncate",t,this),n=e.get("format",t,this);return r&&n.length>r?n.substring(0,r)+"":n},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=HS.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,r=this.toHref(e.get("defaultProtocol")),n=e.get("formatHref",r,this),i=e.get("tagName",r,t),a=this.toFormattedString(e),s={},o=e.get("className",r,t),l=e.get("target",r,t),c=e.get("rel",r,t),d=e.getObj("attributes",r,t),f=e.getObj("events",r,t);return s.href=n,o&&(s.class=o),l&&(s.target=l),c&&(s.rel=c),d&&Object.assign(s,d),{tagName:i,attributes:s,content:a,eventListeners:f}}};function U3(e,t){class r extends Wfe{constructor(i,a){super(i,a),this.t=e}}for(const n in t)r.prototype[n]=t[n];return r.t=e,r}const _Y=U3("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),NY=U3("text"),gJe=U3("nl"),eN=U3("url",{isLink:!0,toHref(e=HS.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==zS&&e[1].t===r0}}),Rc=e=>new xl(e);function xJe({groups:e}){const t=e.domain.concat([dI,hI,Kp,pI,mI,gI,xI,vI,Hc,TB,$2,yI,bI,wI,Ud,EI,H2,SI]),r=[fI,r0,OB,Bd,PB,$2,z2,RB,jB,tI,rI,B2,U2,JT,QT,ZT,eI,nI,iI,aI,sI,oI,lI,cI,uI],n=[dI,fI,hI,pI,mI,gI,xI,vI,Hc,B2,U2,$2,yI,bI,wI,z2,Ud,EI,H2,SI],i=Rc(),a=Rt(i,H2);dn(a,n,a),dn(a,e.domain,a);const s=Rc(),o=Rc(),l=Rc();dn(i,e.domain,s),dn(i,e.scheme,o),dn(i,e.slashscheme,l),dn(s,n,a),dn(s,e.domain,s);const c=Rt(s,Kp);Rt(a,Kp,c),Rt(o,Kp,c),Rt(l,Kp,c);const d=Rt(a,Bd);dn(d,n,a),dn(d,e.domain,a);const f=Rc();dn(c,e.domain,f),dn(f,e.domain,f);const p=Rt(f,Bd);dn(p,e.domain,f);const m=Rc(_Y);dn(p,e.tld,m),dn(p,e.utld,m),Rt(c,zS,m);const x=Rt(f,Hc);Rt(x,Hc,x),dn(x,e.domain,f),dn(m,e.domain,f),Rt(m,Bd,p),Rt(m,Hc,x);const y=Rt(m,r0);dn(y,e.numeric,_Y);const b=Rt(s,Hc),S=Rt(s,Bd);Rt(b,Hc,b),dn(b,e.domain,s),dn(S,n,a),dn(S,e.domain,s);const _=Rc(eN);dn(S,e.tld,_),dn(S,e.utld,_),dn(_,e.domain,s),dn(_,n,a),Rt(_,Bd,S),Rt(_,Hc,b),Rt(_,Kp,c);const C=Rt(_,r0),A=Rc(eN);dn(C,e.numeric,A);const j=Rc(eN),P=Rc();dn(j,t,j),dn(j,r,P),dn(P,t,j),dn(P,r,P),Rt(_,Ud,j),Rt(A,Ud,j);const O=Rt(o,r0),D=Rt(l,r0),L=Rt(D,Ud),B=Rt(L,Ud);dn(o,e.domain,s),Rt(o,Bd,S),Rt(o,Hc,b),dn(l,e.domain,s),Rt(l,Bd,S),Rt(l,Hc,b),dn(O,e.domain,j),Rt(O,Ud,j),Rt(O,z2,j),dn(B,e.domain,j),dn(B,t,j),Rt(B,Ud,j);const H=[[B2,U2],[QT,JT],[ZT,eI],[tI,rI],[nI,iI],[aI,sI],[oI,lI],[cI,uI]];for(let z=0;z<H.length;z++){const[ie,X]=H[z],W=Rt(j,ie);Rt(P,ie,W),Rt(W,X,j);const Q=Rc(eN);dn(W,t,Q);const te=Rc();dn(W,r),dn(Q,t,Q),dn(Q,r,te),dn(te,t,Q),dn(te,r,te),Rt(Q,X,j),Rt(te,X,j)}return Rt(i,zS,_),Rt(i,IB,gJe),{start:i,tokens:zfe}}function vJe(e,t,r){let n=r.length,i=0,a=[],s=[];for(;i<n;){let o=e,l=null,c=null,d=0,f=null,p=-1;for(;i<n&&!(l=o.go(r[i].t));)s.push(r[i++]);for(;i<n&&(c=l||o.go(r[i].t));)l=null,o=c,o.accepts()?(p=0,f=o):p>=0&&p++,i++,d++;if(p<0)i-=d,i<n&&(s.push(r[i]),i++);else{s.length>0&&(a.push(YD(NY,t,s)),s=[]),i-=p,d-=p;const m=f.t,x=r.slice(i-d,i);a.push(YD(m,t,x))}}return s.length>0&&a.push(YD(NY,t,s)),a}function YD(e,t,r){const n=r[0].s,i=r[r.length-1].e,a=t.slice(n,i);return new e(a,r)}const yJe=typeof console<"u"&&console&&console.warn||(()=>{}),bJe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Ci={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function wJe(){return xl.groups={},Ci.scanner=null,Ci.parser=null,Ci.tokenQueue=[],Ci.pluginQueue=[],Ci.customSchemes=[],Ci.initialized=!1,Ci}function AY(e,t=!1){if(Ci.initialized&&yJe(`linkifyjs: already initialized - will not register custom scheme "${e}" ${bJe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Ci.customSchemes.push([e,t])}function SJe(){Ci.scanner=pJe(Ci.customSchemes);for(let e=0;e<Ci.tokenQueue.length;e++)Ci.tokenQueue[e][1]({scanner:Ci.scanner});Ci.parser=xJe(Ci.scanner.tokens);for(let e=0;e<Ci.pluginQueue.length;e++)Ci.pluginQueue[e][1]({scanner:Ci.scanner,parser:Ci.parser});return Ci.initialized=!0,Ci}function MB(e){return Ci.initialized||SJe(),vJe(Ci.parser.start,e,Hfe(Ci.scanner.start,e))}MB.scan=Hfe;function Vfe(e,t=null,r=null){if(t&&typeof t=="object"){if(r)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);r=t,t=null}const n=new DB(r),i=MB(e),a=[];for(let s=0;s<i.length;s++){const o=i[s];o.isLink&&(!t||o.t===t)&&n.check(o)&&a.push(o.toFormattedObject(n))}return a}var FB="[\0- -\u2029]",EJe=new RegExp(FB),CJe=new RegExp(`${FB}$`),kJe=new RegExp(FB,"g");function _Je(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function NJe(e){return new Hi({key:new Ca("autolink"),appendTransaction:(t,r,n)=>{const i=t.some(c=>c.docChanged)&&!r.doc.eq(n.doc),a=t.some(c=>c.getMeta("preventAutolink"));if(!i||a)return;const{tr:s}=n,o=tfe(r.doc,[...t]);if(lfe(o).forEach(({newRange:c})=>{const d=xXe(n.doc,c,m=>m.isTextblock);let f,p;if(d.length>1)f=d[0],p=n.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(d.length){const m=n.doc.textBetween(c.from,c.to," "," ");if(!CJe.test(m))return;f=d[0],p=n.doc.textBetween(f.pos,c.to,void 0," ")}if(f&&p){const m=p.split(EJe).filter(Boolean);if(m.length<=0)return!1;const x=m[m.length-1],y=f.pos+p.lastIndexOf(x);if(!x)return!1;const b=MB(x).map(S=>S.toObject(e.defaultProtocol));if(!_Je(b))return!1;b.filter(S=>S.isLink).map(S=>({...S,from:y+S.start+1,to:y+S.end+1})).filter(S=>n.schema.marks.code?!n.doc.rangeHasMark(S.from,S.to,n.schema.marks.code):!0).filter(S=>e.validate(S.value)).filter(S=>e.shouldAutoLink(S.value)).forEach(S=>{CB(S.from,S.to,n.doc).some(_=>_.mark.type===e.type)||s.addMark(S.from,S.to,e.type.create({href:S.href}))})}}),!!s.steps.length)return s}})}function AJe(e){return new Hi({key:new Ca("handleClickLink"),props:{handleClick:(t,r,n)=>{var i,a;if(n.button!==0||!t.editable)return!1;let s=!1;if(e.enableClickSelection&&(s=e.editor.commands.extendMarkRange(e.type.name)),e.openOnClick){let o=null;if(n.target instanceof HTMLAnchorElement)o=n.target;else{let f=n.target;const p=[];for(;f.nodeName!=="DIV";)p.push(f),f=f.parentNode;o=p.find(m=>m.nodeName==="A")}if(!o)return s;const l=ofe(t.state,e.type.name),c=(i=o==null?void 0:o.href)!=null?i:l.href,d=(a=o==null?void 0:o.target)!=null?a:l.target;o&&c&&(window.open(c,d),s=!0)}return s}}})}function TJe(e){return new Hi({key:new Ca("handlePasteLink"),props:{handlePaste:(t,r,n)=>{const{shouldAutoLink:i}=e,{state:a}=t,{selection:s}=a,{empty:o}=s;if(o)return!1;let l="";n.content.forEach(d=>{l+=d.textContent});const c=Vfe(l,{defaultProtocol:e.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!c||i!==void 0&&!i(c.href)?!1:e.editor.commands.setMark(e.type,{href:c.href})}}})}function zm(e,t){const r=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(n=>{const i=typeof n=="string"?n:n.scheme;i&&r.push(i)}),!e||e.replace(kJe,"").match(new RegExp(`^(?:(?:${r.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var qfe=i1.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){AY(e);return}AY(e.scheme,e.optionalSlashes)})},onDestroy(){wJe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!zm(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:r=>!!zm(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!zm(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Ii(this.options.HTMLAttributes,e),0]:["a",Ii(this.options.HTMLAttributes,{...e,href:""}),0]},markdownTokenName:"link",parseMarkdown:(e,t)=>t.applyMark("link",t.parseInline(e.tokens||[]),{href:e.href,title:e.title||null}),renderMarkdown:(e,t)=>{var r;const n=((r=e.attrs)==null?void 0:r.href)||"";return`[${t.renderChildren(e)}](${n})`},addCommands(){return{setLink:e=>({chain:t})=>{const{href:r}=e;return this.options.isAllowedUri(r,{defaultValidate:n=>!!zm(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:r}=e||{};return r&&!this.options.isAllowedUri(r,{defaultValidate:n=>!!zm(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[yx({find:e=>{const t=[];if(e){const{protocols:r,defaultProtocol:n}=this.options,i=Vfe(e).filter(a=>a.isLink&&this.options.isAllowedUri(a.value,{defaultValidate:s=>!!zm(s,r),protocols:r,defaultProtocol:n}));i.length&&i.forEach(a=>{this.options.shouldAutoLink(a.value)&&t.push({text:a.value,data:{href:a.href},index:a.start})})}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:r}=this.options;return this.options.autolink&&e.push(NJe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:i=>!!zm(i,t),protocols:t,defaultProtocol:r}),shouldAutoLink:this.options.shouldAutoLink})),e.push(AJe({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(TJe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),e}}),IJe=qfe,OJe=Object.defineProperty,PJe=(e,t)=>{for(var r in t)OJe(e,r,{get:t[r],enumerable:!0})},RJe="listItem",TY="textStyle",IY=/^\s*([-+*])\s$/,Gfe=rl.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",Ii(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>e.type!=="list"||e.ordered?[]:{type:"bulletList",content:e.items?t.parseChildren(e.items):[]},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(RJe,this.editor.getAttributes(TY)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=jy({find:IY,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=jy({find:IY,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(TY),editor:this.editor})),[e]}}),Kfe=rl.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",Ii(this.options.HTMLAttributes,e),0]},markdownTokenName:"list_item",parseMarkdown:(e,t)=>{if(e.type!=="list_item")return[];let r=[];if(e.tokens&&e.tokens.length>0)if(e.tokens.some(i=>i.type==="paragraph"))r=t.parseChildren(e.tokens);else{const i=e.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(r=[{type:"paragraph",content:t.parseInline(i.tokens)}],e.tokens.length>1){const s=e.tokens.slice(1),o=t.parseChildren(s);r.push(...o)}}else r=t.parseChildren(e.tokens)}return r.length===0&&(r=[{type:"paragraph",content:[]}]),{type:"listItem",content:r}},renderMarkdown:(e,t,r)=>AB(e,t,n=>n.parentType==="bulletList"?"- ":n.parentType==="orderedList"?`${n.index+1}. `:"- ",r),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),jJe={};PJe(jJe,{findListItemPos:()=>CC,getNextListDepth:()=>LB,handleBackspace:()=>AF,handleDelete:()=>TF,hasListBefore:()=>Xfe,hasListItemAfter:()=>DJe,hasListItemBefore:()=>Yfe,listItemHasSubList:()=>Qfe,nextListIsDeeper:()=>Jfe,nextListIsHigher:()=>Zfe});var CC=(e,t)=>{const{$from:r}=t.selection,n=Ba(e,t.schema);let i=null,a=r.depth,s=r.pos,o=null;for(;a>0&&o===null;)i=r.node(a),i.type===n?o=a:(a-=1,s-=1);return o===null?null:{$pos:t.doc.resolve(s),depth:o}},LB=(e,t)=>{const r=CC(e,t);if(!r)return!1;const[,n]=NXe(t,e,r.$pos.pos+4);return n},Xfe=(e,t,r)=>{const{$anchor:n}=e.selection,i=Math.max(0,n.pos-2),a=e.doc.resolve(i).node();return!(!a||!r.includes(a.type.name))},Yfe=(e,t)=>{var r;const{$anchor:n}=t.selection,i=t.doc.resolve(n.pos-2);return!(i.index()===0||((r=i.nodeBefore)==null?void 0:r.type.name)!==e)},Qfe=(e,t,r)=>{if(!r)return!1;const n=Ba(e,t.schema);let i=!1;return r.descendants(a=>{a.type===n&&(i=!0)}),i},AF=(e,t,r)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!W0(e.state,t)&&Xfe(e.state,t,r)){const{$anchor:o}=e.state.selection,l=e.state.doc.resolve(o.before()-1),c=[];l.node().descendants((p,m)=>{p.type.name===t&&c.push({node:p,pos:m})});const d=c.at(-1);if(!d)return!1;const f=e.state.doc.resolve(l.start()+d.pos+1);return e.chain().cut({from:o.start()-1,to:o.end()+1},f.end()).joinForward().run()}if(!W0(e.state,t)||!OXe(e.state))return!1;const n=CC(t,e.state);if(!n)return!1;const a=e.state.doc.resolve(n.$pos.pos-2).node(n.depth),s=Qfe(t,e.state,a);return Yfe(t,e.state)&&!s?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},Jfe=(e,t)=>{const r=LB(e,t),n=CC(e,t);return!n||!r?!1:r>n.depth},Zfe=(e,t)=>{const r=LB(e,t),n=CC(e,t);return!n||!r?!1:r<n.depth},TF=(e,t)=>{if(!W0(e.state,t)||!IXe(e.state,t))return!1;const{selection:r}=e.state,{$from:n,$to:i}=r;return!r.empty&&n.sameParent(i)?!1:Jfe(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():Zfe(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},DJe=(e,t)=>{var r;const{$anchor:n}=t.selection,i=t.doc.resolve(n.pos-n.parentOffset-2);return!(i.index()===i.parent.childCount-1||((r=i.nodeAfter)==null?void 0:r.type.name)!==e)},ehe=ha.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:r})=>{e.state.schema.nodes[r]!==void 0&&TF(e,r)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:r})=>{e.state.schema.nodes[r]!==void 0&&TF(e,r)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{e.state.schema.nodes[r]!==void 0&&AF(e,r,n)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{e.state.schema.nodes[r]!==void 0&&AF(e,r,n)&&(t=!0)}),t}}}}),OY=/^(\s*)(\d+)\.\s+(.*)$/,MJe=/^\s/;function FJe(e){const t=[];let r=0,n=0;for(;r<e.length;){const i=e[r],a=i.match(OY);if(!a)break;const[,s,o,l]=a,c=s.length;let d=l,f=r+1;const p=[i];for(;f<e.length;){const m=e[f];if(m.match(OY))break;if(m.trim()==="")p.push(m),d+=`
`,f+=1;else if(m.match(MJe))p.push(m),d+=`
${m.slice(c+2)}`,f+=1;else break}t.push({indent:c,number:parseInt(o,10),content:d.trim(),raw:p.join(`
`)}),n=f,r=f}return[t,n]}function the(e,t,r){var n;const i=[];let a=0;for(;a<e.length;){const s=e[a];if(s.indent===t){const o=s.content.split(`
`),l=((n=o[0])==null?void 0:n.trim())||"",c=[];l&&c.push({type:"paragraph",raw:l,tokens:r.inlineTokens(l)});const d=o.slice(1).join(`
`).trim();if(d){const m=r.blockTokens(d);c.push(...m)}let f=a+1;const p=[];for(;f<e.length&&e[f].indent>t;)p.push(e[f]),f+=1;if(p.length>0){const m=Math.min(...p.map(y=>y.indent)),x=the(p,m,r);c.push({type:"list",ordered:!0,start:p[0].number,items:x,raw:p.map(y=>y.raw).join(`
`)})}i.push({type:"list_item",raw:s.raw,tokens:c}),a=f}else a+=1}return i}function LJe(e,t){return e.map(r=>{if(r.type!=="list_item")return t.parseChildren([r])[0];const n=[];return r.tokens&&r.tokens.length>0&&r.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")n.push(...t.parseChildren([i]));else if(i.type==="text"&&i.tokens){const a=t.parseChildren([i]);n.push({type:"paragraph",content:a})}else{const a=t.parseChildren([i]);a.length>0&&n.push(...a)}}),{type:"listItem",content:n}})}var BJe="listItem",PY="textStyle",RY=/^(\d+)\.\s$/,rhe=rl.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...r}=e;return t===1?["ol",Ii(this.options.HTMLAttributes,r),0]:["ol",Ii(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>{if(e.type!=="list"||!e.ordered)return[];const r=e.start||1,n=e.items?LJe(e.items,t):[];return r!==1?{type:"orderedList",attrs:{start:r},content:n}:{type:"orderedList",content:n}},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:e=>{const t=e.match(/^(\s*)(\d+)\.\s+/),r=t==null?void 0:t.index;return r!==void 0?r:-1},tokenize:(e,t,r)=>{var n;const i=e.split(`
`),[a,s]=FJe(i);if(a.length===0)return;const o=the(a,0,r);return o.length===0?void 0:{type:"list",ordered:!0,start:((n=a[0])==null?void 0:n.number)||1,items:o,raw:i.slice(0,s).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(BJe,this.editor.getAttributes(PY)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=jy({find:RY,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,r)=>r.childCount+r.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=jy({find:RY,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(PY)}),joinPredicate:(t,r)=>r.childCount+r.attrs.start===+t[1],editor:this.editor})),[e]}}),UJe=/^\s*(\[([( |x])?\])\s$/,$Je=rl.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",Ii(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(e,t)=>{const r=[];if(e.tokens&&e.tokens.length>0?r.push(t.createNode("paragraph",{},t.parseInline(e.tokens))):e.text?r.push(t.createNode("paragraph",{},[t.createNode("text",{text:e.text})])):r.push(t.createNode("paragraph",{},[])),e.nestedTokens&&e.nestedTokens.length>0){const n=t.parseChildren(e.nestedTokens);r.push(...n)}return t.createNode("taskItem",{checked:e.checked||!1},r)},renderMarkdown:(e,t)=>{var r;const i=`- [${(r=e.attrs)!=null&&r.checked?"x":" "}] `;return AB(e,t,i)},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:r,editor:n})=>{const i=document.createElement("li"),a=document.createElement("label"),s=document.createElement("span"),o=document.createElement("input"),l=document.createElement("div"),c=d=>{var f,p;o.ariaLabel=((p=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:p.call(f,d,o.checked))||`Task item checkbox for ${d.textContent||"empty task item"}`};return c(e),a.contentEditable="false",o.type="checkbox",o.addEventListener("mousedown",d=>d.preventDefault()),o.addEventListener("change",d=>{if(!n.isEditable&&!this.options.onReadOnlyChecked){o.checked=!o.checked;return}const{checked:f}=d.target;n.isEditable&&typeof r=="function"&&n.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const m=r();if(typeof m!="number")return!1;const x=p.doc.nodeAt(m);return p.setNodeMarkup(m,void 0,{...x==null?void 0:x.attrs,checked:f}),!0}).run(),!n.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,f)||(o.checked=!o.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([d,f])=>{i.setAttribute(d,f)}),i.dataset.checked=e.attrs.checked,o.checked=e.attrs.checked,a.append(o,s),i.append(a,l),Object.entries(t).forEach(([d,f])=>{i.setAttribute(d,f)}),{dom:i,contentDOM:l,update:d=>d.type!==this.type?!1:(i.dataset.checked=d.attrs.checked,o.checked=d.attrs.checked,c(d),!0)}}},addInputRules(){return[jy({find:UJe,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),zJe=rl.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",Ii(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},parseMarkdown:(e,t)=>t.createNode("taskList",{},t.parseChildren(e.items||[])),renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(e){var t;const r=(t=e.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:t.index;return r!==void 0?r:-1},tokenize(e,t,r){const n=a=>{const s=vF(a,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,l)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:r.inlineTokens(o.mainContent),nestedTokens:l}),customNestedParser:n},r);return s?[{type:"taskList",raw:s.raw,items:s.items}]:r.blockTokens(a)},i=vF(e,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,s)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:r.inlineTokens(a.mainContent),nestedTokens:s}),customNestedParser:n},r);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});ha.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(Gfe.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(Kfe.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(ehe.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(rhe.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push($Je.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(zJe.configure(this.options.taskList)),e}});var HJe=rl.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",Ii(this.options.HTMLAttributes,e),0]},parseMarkdown:(e,t)=>{const r=e.tokens||[];return r.length===1&&r[0].type==="image"?t.parseChildren([r[0]]):t.createNode("paragraph",void 0,t.parseInline(r))},renderMarkdown:(e,t)=>!e||!Array.isArray(e.content)?"":t.renderChildren(e.content),addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),WJe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,VJe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,qJe=i1.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",Ii(this.options.HTMLAttributes,e),0]},markdownTokenName:"del",parseMarkdown:(e,t)=>t.applyMark("strike",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`~~${t.renderChildren(e)}~~`,addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ry({find:WJe,type:this.type})]},addPasteRules(){return[yx({find:VJe,type:this.type})]}}),GJe=rl.create({name:"text",group:"inline",parseMarkdown:e=>({type:"text",text:e.text||""}),renderMarkdown:e=>e.text||""}),KJe=i1.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",Ii(this.options.HTMLAttributes,e),0]},parseMarkdown(e,t){return t.applyMark(this.name||"underline",t.parseInline(e.tokens||[]))},renderMarkdown(e,t){return`++${t.renderChildren(e)}++`},markdownTokenizer:{name:"underline",level:"inline",start(e){return e.indexOf("++")},tokenize(e,t,r){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(e);if(!i)return;const a=i[2].trim();return{type:"underline",raw:i[0],text:a,tokens:r.inlineTokens(a)}}},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function XJe(e={}){return new Hi({view(t){return new YJe(t,e)}})}class YJe{constructor(t,r){var n;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=r.width)!==null&&n!==void 0?n:1,this.color=r.color===!1?void 0:r.color||"black",this.class=r.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let a=s=>{this[i](s)};return t.dom.addEventListener(i,a),{name:i,handler:a}})}destroy(){this.handlers.forEach(({name:t,handler:r})=>this.editorView.dom.removeEventListener(t,r))}update(t,r){this.cursorPos!=null&&r.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),r=!t.parent.inlineContent,n,i=this.editorView.dom,a=i.getBoundingClientRect(),s=a.width/i.offsetWidth,o=a.height/i.offsetHeight;if(r){let f=t.nodeBefore,p=t.nodeAfter;if(f||p){let m=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(m){let x=m.getBoundingClientRect(),y=f?x.bottom:x.top;f&&p&&(y=(y+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let b=this.width/2*o;n={left:x.left,right:x.right,top:y-b,bottom:y+b}}}}if(!n){let f=this.editorView.coordsAtPos(this.cursorPos),p=this.width/2*s;n={left:f.left-p,right:f.left+p,top:f.top,bottom:f.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r);let c,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,d=-pageYOffset;else{let f=l.getBoundingClientRect(),p=f.width/l.offsetWidth,m=f.height/l.offsetHeight;c=f.left-l.scrollLeft*p,d=f.top-l.scrollTop*m}this.element.style.left=(n.left-c)/s+"px",this.element.style.top=(n.top-d)/o+"px",this.element.style.width=(n.right-n.left)/s+"px",this.element.style.height=(n.bottom-n.top)/o+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let r=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),n=r&&r.inside>=0&&this.editorView.state.doc.nodeAt(r.inside),i=n&&n.type.spec.disableDropCursor,a=typeof i=="function"?i(this.editorView,r,t):i;if(r&&!a){let s=r.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let o=Vue(this.editorView.state.doc,s,this.editorView.dragging.slice);o!=null&&(s=o)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class oa extends pn{constructor(t){super(t,t)}map(t,r){let n=t.resolve(r.map(this.head));return oa.valid(n)?new oa(n):pn.near(n)}content(){return Vt.empty}eq(t){return t instanceof oa&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new oa(t.resolve(r.pos))}getBookmark(){return new BB(this.anchor)}static valid(t){let r=t.parent;if(r.isTextblock||!QJe(t)||!JJe(t))return!1;let n=r.type.spec.allowGapCursor;if(n!=null)return n;let i=r.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,r,n=!1){e:for(;;){if(!n&&oa.valid(t))return t;let i=t.pos,a=null;for(let s=t.depth;;s--){let o=t.node(s);if(r>0?t.indexAfter(s)<o.childCount:t.index(s)>0){a=o.child(r>0?t.indexAfter(s):t.index(s)-1);break}else if(s==0)return null;i+=r;let l=t.doc.resolve(i);if(oa.valid(l))return l}for(;;){let s=r>0?a.firstChild:a.lastChild;if(!s){if(a.isAtom&&!a.isText&&!pr.isSelectable(a)){t=t.doc.resolve(i+a.nodeSize*r),n=!1;continue e}break}a=s,i+=r;let o=t.doc.resolve(i);if(oa.valid(o))return o}return null}}}oa.prototype.visible=!1;oa.findFrom=oa.findGapCursorFrom;pn.jsonID("gapcursor",oa);class BB{constructor(t){this.pos=t}map(t){return new BB(t.map(this.pos))}resolve(t){let r=t.resolve(this.pos);return oa.valid(r)?new oa(r):pn.near(r)}}function nhe(e){return e.isAtom||e.spec.isolating||e.spec.createGapCursor}function QJe(e){for(let t=e.depth;t>=0;t--){let r=e.index(t),n=e.node(t);if(r==0){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||nhe(i.type))return!0;if(i.inlineContent)return!1}}return!0}function JJe(e){for(let t=e.depth;t>=0;t--){let r=e.indexAfter(t),n=e.node(t);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let i=n.child(r);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||nhe(i.type))return!0;if(i.inlineContent)return!1}}return!0}function ZJe(){return new Hi({props:{decorations:nZe,createSelectionBetween(e,t,r){return t.pos==r.pos&&oa.valid(r)?new oa(r):null},handleClick:tZe,handleKeyDown:eZe,handleDOMEvents:{beforeinput:rZe}}})}const eZe=qde({ArrowLeft:tN("horiz",-1),ArrowRight:tN("horiz",1),ArrowUp:tN("vert",-1),ArrowDown:tN("vert",1)});function tN(e,t){const r=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(n,i,a){let s=n.selection,o=t>0?s.$to:s.$from,l=s.empty;if(s instanceof zr){if(!a.endOfTextblock(r)||o.depth==0)return!1;l=!1,o=n.doc.resolve(t>0?o.after():o.before())}let c=oa.findGapCursorFrom(o,t,l);return c?(i&&i(n.tr.setSelection(new oa(c))),!0):!1}}function tZe(e,t,r){if(!e||!e.editable)return!1;let n=e.state.doc.resolve(t);if(!oa.valid(n))return!1;let i=e.posAtCoords({left:r.clientX,top:r.clientY});return i&&i.inside>-1&&pr.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new oa(n))),!0)}function rZe(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof oa))return!1;let{$from:r}=e.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(e.state.schema.nodes.text);if(!n)return!1;let i=It.empty;for(let s=n.length-1;s>=0;s--)i=It.from(n[s].createAndFill(null,i));let a=e.state.tr.replace(r.pos,r.pos,new Vt(i,0,0));return a.setSelection(zr.near(a.doc.resolve(r.pos+1))),e.dispatch(a),!1}function nZe(e){if(!(e.selection instanceof oa))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",Bi.create(e.doc,[xo.widget(e.selection.head,t,{key:"gapcursor"})])}var CI=200,Es=function(){};Es.prototype.append=function(t){return t.length?(t=Es.from(t),!this.length&&t||t.length<CI&&this.leafAppend(t)||this.length<CI&&t.leafPrepend(this)||this.appendInner(t)):this};Es.prototype.prepend=function(t){return t.length?Es.from(t).append(this):this};Es.prototype.appendInner=function(t){return new iZe(this,t)};Es.prototype.slice=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=this.length),t>=r?Es.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,r))};Es.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Es.prototype.forEach=function(t,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length),r<=n?this.forEachInner(t,r,n,0):this.forEachInvertedInner(t,r,n,0)};Es.prototype.map=function(t,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length);var i=[];return this.forEach(function(a,s){return i.push(t(a,s))},r,n),i};Es.from=function(t){return t instanceof Es?t:t&&t.length?new ihe(t):Es.empty};var ihe=function(e){function t(n){e.call(this),this.values=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,a){return i==0&&a==this.length?this:new t(this.values.slice(i,a))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,a,s,o){for(var l=a;l<s;l++)if(i(this.values[l],o+l)===!1)return!1},t.prototype.forEachInvertedInner=function(i,a,s,o){for(var l=a-1;l>=s;l--)if(i(this.values[l],o+l)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=CI)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=CI)return new t(i.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(t.prototype,r),t}(Es);Es.empty=new ihe([]);var iZe=function(e){function t(r,n){e.call(this),this.left=r,this.right=n,this.length=r.length+n.length,this.depth=Math.max(r.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},t.prototype.forEachInner=function(n,i,a,s){var o=this.left.length;if(i<o&&this.left.forEachInner(n,i,Math.min(a,o),s)===!1||a>o&&this.right.forEachInner(n,Math.max(i-o,0),Math.min(this.length,a)-o,s+o)===!1)return!1},t.prototype.forEachInvertedInner=function(n,i,a,s){var o=this.left.length;if(i>o&&this.right.forEachInvertedInner(n,i-o,Math.max(a,o)-o,s+o)===!1||a<o&&this.left.forEachInvertedInner(n,Math.min(i,o),a,s)===!1)return!1},t.prototype.sliceInner=function(n,i){if(n==0&&i==this.length)return this;var a=this.left.length;return i<=a?this.left.slice(n,i):n>=a?this.right.slice(n-a,i-a):this.left.slice(n,a).append(this.right.slice(0,i-a))},t.prototype.leafAppend=function(n){var i=this.right.leafAppend(n);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(n){var i=this.left.leafPrepend(n);if(i)return new t(i,this.right)},t.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new t(this.left,new t(this.right,n)):new t(this,n)},t}(Es);const aZe=500;class Yu{constructor(t,r){this.items=t,this.eventCount=r}popEvent(t,r){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let i,a;r&&(i=this.remapping(n,this.items.length),a=i.maps.length);let s=t.tr,o,l,c=[],d=[];return this.items.forEach((f,p)=>{if(!f.step){i||(i=this.remapping(n,p+1),a=i.maps.length),a--,d.push(f);return}if(i){d.push(new $d(f.map));let m=f.step.map(i.slice(a)),x;m&&s.maybeStep(m).doc&&(x=s.mapping.maps[s.mapping.maps.length-1],c.push(new $d(x,void 0,void 0,c.length+d.length))),a--,x&&i.appendMap(x,a)}else s.maybeStep(f.step);if(f.selection)return o=i?f.selection.map(i.slice(a)):f.selection,l=new Yu(this.items.slice(0,n).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:o}}addTransform(t,r,n,i){let a=[],s=this.eventCount,o=this.items,l=!i&&o.length?o.get(o.length-1):null;for(let d=0;d<t.steps.length;d++){let f=t.steps[d].invert(t.docs[d]),p=new $d(t.mapping.maps[d],f,r),m;(m=l&&l.merge(p))&&(p=m,d?a.pop():o=o.slice(0,o.length-1)),a.push(p),r&&(s++,r=void 0),i||(l=p)}let c=s-n.depth;return c>oZe&&(o=sZe(o,c),s-=c),new Yu(o.append(a),s)}remapping(t,r){let n=new DS;return this.items.forEach((i,a)=>{let s=i.mirrorOffset!=null&&a-i.mirrorOffset>=t?n.maps.length-i.mirrorOffset:void 0;n.appendMap(i.map,s)},t,r),n}addMaps(t){return this.eventCount==0?this:new Yu(this.items.append(t.map(r=>new $d(r))),this.eventCount)}rebased(t,r){if(!this.eventCount)return this;let n=[],i=Math.max(0,this.items.length-r),a=t.mapping,s=t.steps.length,o=this.eventCount;this.items.forEach(p=>{p.selection&&o--},i);let l=r;this.items.forEach(p=>{let m=a.getMirror(--l);if(m==null)return;s=Math.min(s,m);let x=a.maps[m];if(p.step){let y=t.steps[m].invert(t.docs[m]),b=p.selection&&p.selection.map(a.slice(l+1,m));b&&o++,n.push(new $d(x,y,b))}else n.push(new $d(x))},i);let c=[];for(let p=r;p<s;p++)c.push(new $d(a.maps[p]));let d=this.items.slice(0,i).append(c).append(n),f=new Yu(d,o);return f.emptyItemCount()>aZe&&(f=f.compress(this.items.length-n.length)),f}emptyItemCount(){let t=0;return this.items.forEach(r=>{r.step||t++}),t}compress(t=this.items.length){let r=this.remapping(0,t),n=r.maps.length,i=[],a=0;return this.items.forEach((s,o)=>{if(o>=t)i.push(s),s.selection&&a++;else if(s.step){let l=s.step.map(r.slice(n)),c=l&&l.getMap();if(n--,c&&r.appendMap(c,n),l){let d=s.selection&&s.selection.map(r.slice(n));d&&a++;let f=new $d(c.invert(),l,d),p,m=i.length-1;(p=i.length&&i[m].merge(f))?i[m]=p:i.push(f)}}else s.map&&n--},this.items.length,0),new Yu(Es.from(i.reverse()),a)}}Yu.empty=new Yu(Es.empty,0);function sZe(e,t){let r;return e.forEach((n,i)=>{if(n.selection&&t--==0)return r=i,!1}),e.slice(r)}class $d{constructor(t,r,n,i){this.map=t,this.step=r,this.selection=n,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let r=t.step.merge(this.step);if(r)return new $d(r.getMap().invert(),r,this.selection)}}}class Xp{constructor(t,r,n,i,a){this.done=t,this.undone=r,this.prevRanges=n,this.prevTime=i,this.prevComposition=a}}const oZe=20;function lZe(e,t,r,n){let i=r.getMeta($g),a;if(i)return i.historyState;r.getMeta(dZe)&&(e=new Xp(e.done,e.undone,null,0,-1));let s=r.getMeta("appendedTransaction");if(r.steps.length==0)return e;if(s&&s.getMeta($g))return s.getMeta($g).redo?new Xp(e.done.addTransform(r,void 0,n,dA(t)),e.undone,jY(r.mapping.maps),e.prevTime,e.prevComposition):new Xp(e.done,e.undone.addTransform(r,void 0,n,dA(t)),null,e.prevTime,e.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let o=r.getMeta("composition"),l=e.prevTime==0||!s&&e.prevComposition!=o&&(e.prevTime<(r.time||0)-n.newGroupDelay||!cZe(r,e.prevRanges)),c=s?QD(e.prevRanges,r.mapping):jY(r.mapping.maps);return new Xp(e.done.addTransform(r,l?t.selection.getBookmark():void 0,n,dA(t)),Yu.empty,c,r.time,o??e.prevComposition)}else return(a=r.getMeta("rebased"))?new Xp(e.done.rebased(r,a),e.undone.rebased(r,a),QD(e.prevRanges,r.mapping),e.prevTime,e.prevComposition):new Xp(e.done.addMaps(r.mapping.maps),e.undone.addMaps(r.mapping.maps),QD(e.prevRanges,r.mapping),e.prevTime,e.prevComposition)}function cZe(e,t){if(!t)return!1;if(!e.docChanged)return!0;let r=!1;return e.mapping.maps[0].forEach((n,i)=>{for(let a=0;a<t.length;a+=2)n<=t[a+1]&&i>=t[a]&&(r=!0)}),r}function jY(e){let t=[];for(let r=e.length-1;r>=0&&t.length==0;r--)e[r].forEach((n,i,a,s)=>t.push(a,s));return t}function QD(e,t){if(!e)return null;let r=[];for(let n=0;n<e.length;n+=2){let i=t.map(e[n],1),a=t.map(e[n+1],-1);i<=a&&r.push(i,a)}return r}function uZe(e,t,r){let n=dA(t),i=$g.get(t).spec.config,a=(r?e.undone:e.done).popEvent(t,n);if(!a)return null;let s=a.selection.resolve(a.transform.doc),o=(r?e.done:e.undone).addTransform(a.transform,t.selection.getBookmark(),i,n),l=new Xp(r?o:a.remaining,r?a.remaining:o,null,0,-1);return a.transform.setSelection(s).setMeta($g,{redo:r,historyState:l})}let JD=!1,DY=null;function dA(e){let t=e.plugins;if(DY!=t){JD=!1,DY=t;for(let r=0;r<t.length;r++)if(t[r].spec.historyPreserveItems){JD=!0;break}}return JD}const $g=new Ca("history"),dZe=new Ca("closeHistory");function fZe(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Hi({key:$g,state:{init(){return new Xp(Yu.empty,Yu.empty,null,0,-1)},apply(t,r,n){return lZe(r,n,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,r){let n=r.inputType,i=n=="historyUndo"?she:n=="historyRedo"?ohe:null;return!i||!t.editable?!1:(r.preventDefault(),i(t.state,t.dispatch))}}}})}function ahe(e,t){return(r,n)=>{let i=$g.getState(r);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(n){let a=uZe(i,r,e);a&&n(t?a.scrollIntoView():a)}return!0}}const she=ahe(!1,!0),ohe=ahe(!0,!0);ha.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc;if(((e==null?void 0:e.mode)||this.options.mode)==="textSize"){const n=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(n)}return t.nodeSize},this.storage.words=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc,r=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(r)}},addProseMirrorPlugins(){let e=!1;return[new Hi({key:new Ca("characterCount"),appendTransaction:(t,r,n)=>{if(e)return;const i=this.options.limit;if(i==null||i===0){e=!0;return}const a=this.storage.characters({node:n.doc});if(a>i){const s=a-i,o=0,l=s;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const c=n.tr.deleteRange(o,l);return e=!0,c}e=!0},filterTransaction:(t,r)=>{const n=this.options.limit;if(!t.docChanged||n===0||n===null||n===void 0)return!0;const i=this.storage.characters({node:r.doc}),a=this.storage.characters({node:t.doc});if(a<=n||i>n&&a>n&&a<=i)return!0;if(i>n&&a>n&&a>i||!t.getMeta("paste"))return!1;const o=t.selection.$head.pos,l=a-n,c=o-l,d=o;return t.deleteRange(c,d),!(this.storage.characters({node:t.doc})>n)}})]}});var hZe=ha.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[XJe(this.options)]}});ha.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Hi({key:new Ca("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:r,isFocused:n}=this.editor,{anchor:i}=t,a=[];if(!r||!n)return Bi.create(e,[]);let s=0;this.options.mode==="deepest"&&e.descendants((l,c)=>{if(l.isText)return;if(!(i>=c&&i<=c+l.nodeSize-1))return!1;s+=1});let o=0;return e.descendants((l,c)=>{if(l.isText||!(i>=c&&i<=c+l.nodeSize-1))return!1;if(o+=1,this.options.mode==="deepest"&&s-o>0||this.options.mode==="shallowest"&&o>1)return this.options.mode==="deepest";a.push(xo.node(c,c+l.nodeSize,{class:this.options.className}))}),Bi.create(e,a)}}})]}});var pZe=ha.create({name:"gapCursor",addProseMirrorPlugins(){return[ZJe()]},extendNodeSchema(e){var t;const r={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=ni(xr(e,"allowGapCursor",r)))!=null?t:null}}});ha.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Hi({key:new Ca("placeholder"),props:{decorations:({doc:e,selection:t})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=t,i=[];if(!r)return null;const a=this.editor.isEmpty;return e.descendants((s,o)=>{const l=n>=o&&n<=o+s.nodeSize,c=!s.isLeaf&&M3(s);if((l||!this.options.showOnlyCurrent)&&c){const d=[this.options.emptyNodeClass];a&&d.push(this.options.emptyEditorClass);const f=xo.node(o,o+s.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:s,pos:o,hasAnchor:l}):this.options.placeholder});i.push(f)}return this.options.includeChildren}),Bi.create(e,i)}}})]}});ha.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new Hi({key:new Ca("selection"),props:{decorations(r){return r.selection.empty||e.isFocused||!e.isEditable||cfe(r.selection)||e.view.dragging?null:Bi.create(r.doc,[xo.inline(r.selection.from,r.selection.to,{class:t.className})])}}})]}});function MY({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||(t==null?void 0:t.type)===e}var mZe=ha.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var e;const t=new Ca(this.name),r=this.options.node||((e=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:e.name)||"paragraph",n=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(r).includes(i.name));return[new Hi({key:t,appendTransaction:(i,a,s)=>{const{doc:o,tr:l,schema:c}=s,d=t.getState(s),f=o.content.size,p=c.nodes[r];if(d)return l.insert(f,p.create())},state:{init:(i,a)=>{const s=a.tr.doc.lastChild;return!MY({node:s,types:n})},apply:(i,a)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return a;const s=i.doc.lastChild;return!MY({node:s,types:n})}}})]}}),gZe=ha.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>she(e,t),redo:()=>({state:e,dispatch:t})=>ohe(e,t)}},addProseMirrorPlugins(){return[fZe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),xZe=ha.create({name:"starterKit",addExtensions(){var e,t,r,n;const i=[];return this.options.bold!==!1&&i.push(WQe.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(BQe.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(Gfe.configure(this.options.bulletList)),this.options.code!==!1&&i.push(GQe.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(YQe.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(QQe.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(hZe.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(pZe.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(JQe.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(Mfe.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(gZe.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(eJe.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(aJe.configure(this.options.italic)),this.options.listItem!==!1&&i.push(Kfe.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(ehe.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&i.push(qfe.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&i.push(rhe.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(HJe.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(qJe.configure(this.options.strike)),this.options.text!==!1&&i.push(GJe.configure(this.options.text)),this.options.underline!==!1&&i.push(KJe.configure((r=this.options)==null?void 0:r.underline)),this.options.trailingNode!==!1&&i.push(mZe.configure((n=this.options)==null?void 0:n.trailingNode)),i}}),vZe=xZe,yZe=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,bZe=rl.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",Ii(this.options.HTMLAttributes,e)]},parseMarkdown:(e,t)=>t.createNode("image",{src:e.href,title:e.title,alt:e.text}),renderMarkdown:e=>{var t,r,n,i,a,s;const o=(r=(t=e.attrs)==null?void 0:t.src)!=null?r:"",l=(i=(n=e.attrs)==null?void 0:n.alt)!=null?i:"",c=(s=(a=e.attrs)==null?void 0:a.title)!=null?s:"";return c?`![${l}](${o} "${c}")`:`![${l}](${o})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u")return null;const{directions:e,minWidth:t,minHeight:r,alwaysPreserveAspectRatio:n}=this.options.resize;return({node:i,getPos:a,HTMLAttributes:s,editor:o})=>{const l=document.createElement("img");Object.entries(s).forEach(([f,p])=>{if(p!=null)switch(f){case"width":case"height":break;default:l.setAttribute(f,p);break}}),l.src=s.src;const c=new xYe({element:l,editor:o,node:i,getPos:a,onResize:(f,p)=>{l.style.width=`${f}px`,l.style.height=`${p}px`},onCommit:(f,p)=>{const m=a();m!==void 0&&this.editor.chain().setNodeSelection(m).updateAttributes(this.name,{width:f,height:p}).run()},onUpdate:(f,p,m)=>f.type===i.type,options:{directions:e,min:{width:t,height:r},preserveAspectRatio:n===!0}}),d=c.dom;return d.style.visibility="hidden",d.style.pointerEvents="none",l.onload=()=>{d.style.visibility="",d.style.pointerEvents=""},c}},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[_fe({find:yZe,type:this.type,getAttributes:e=>{const[,,t,r,n]=e;return{src:r,alt:t,title:n}}})]}}),wZe=bZe,SZe=ha.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{const t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.map(r=>t.updateAttributes(r,{textAlign:e})).some(r=>r):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).some(t=>t),toggleTextAlign:e=>({editor:t,commands:r})=>this.options.alignments.includes(e)?t.isActive({textAlign:e})?r.unsetTextAlign():r.setTextAlign(e):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),EZe=SZe;function CZe(e){var t;const{char:r,allowSpaces:n,allowToIncludeChar:i,allowedPrefixes:a,startOfLine:s,$position:o}=e,l=n&&!i,c=yYe(r),d=new RegExp(`\\s${c}$`),f=s?"^":"",p=i?"":c,m=l?new RegExp(`${f}${c}.*?(?=\\s${p}|$)`,"gm"):new RegExp(`${f}(?:^)?${c}[^\\s${p}]*`,"gm"),x=((t=o.nodeBefore)==null?void 0:t.isText)&&o.nodeBefore.text;if(!x)return null;const y=o.pos-x.length,b=Array.from(x.matchAll(m)).pop();if(!b||b.input===void 0||b.index===void 0)return null;const S=b.input.slice(Math.max(0,b.index-1),b.index),_=new RegExp(`^[${a==null?void 0:a.join("")}\0]?$`).test(S);if(a!==null&&!_)return null;const C=y+b.index;let A=C+b[0].length;return l&&d.test(x.slice(A-1,A+1))&&(b[0]+=" ",A+=1),C<o.pos&&A>=o.pos?{range:{from:C,to:A},query:b[0].slice(r.length),text:b[0]}:null}var kZe=new Ca("suggestion");function _Ze({pluginKey:e=kZe,editor:t,char:r="@",allowSpaces:n=!1,allowToIncludeChar:i=!1,allowedPrefixes:a=[" "],startOfLine:s=!1,decorationTag:o="span",decorationClass:l="suggestion",decorationContent:c="",decorationEmptyClass:d="is-empty",command:f=()=>null,items:p=()=>[],render:m=()=>({}),allow:x=()=>!0,findSuggestionMatch:y=CZe}){let b;const S=m==null?void 0:m(),_=()=>{const P=t.state.selection.$anchor.pos,O=t.view.coordsAtPos(P),{top:D,right:L,bottom:B,left:H}=O;try{return new DOMRect(H,D,L-H,B-D)}catch{return null}},C=(P,O)=>O?()=>{const D=e.getState(t.state),L=D==null?void 0:D.decorationId,B=P.dom.querySelector(`[data-decoration-id="${L}"]`);return(B==null?void 0:B.getBoundingClientRect())||null}:_;function A(P,O){var D;try{const B=e.getState(P.state),H=B!=null&&B.decorationId?P.dom.querySelector(`[data-decoration-id="${B.decorationId}"]`):null,z={editor:t,range:(B==null?void 0:B.range)||{from:0,to:0},query:(B==null?void 0:B.query)||null,text:(B==null?void 0:B.text)||null,items:[],command:ie=>f({editor:t,range:(B==null?void 0:B.range)||{from:0,to:0},props:ie}),decorationNode:H,clientRect:C(P,H)};(D=S==null?void 0:S.onExit)==null||D.call(S,z)}catch{}const L=P.state.tr.setMeta(O,{exit:!0});P.dispatch(L)}const j=new Hi({key:e,view(){return{update:async(P,O)=>{var D,L,B,H,z,ie,X;const W=(D=this.key)==null?void 0:D.getState(O),Q=(L=this.key)==null?void 0:L.getState(P.state),te=W.active&&Q.active&&W.range.from!==Q.range.from,J=!W.active&&Q.active,Y=W.active&&!Q.active,pe=!J&&!Y&&W.query!==Q.query,_e=J||te&&pe,ee=pe||te,de=Y||te&&pe;if(!_e&&!ee&&!de)return;const G=de&&!_e?W:Q,q=P.dom.querySelector(`[data-decoration-id="${G.decorationId}"]`);b={editor:t,range:G.range,query:G.query,text:G.text,items:[],command:ne=>f({editor:t,range:G.range,props:ne}),decorationNode:q,clientRect:C(P,q)},_e&&((B=S==null?void 0:S.onBeforeStart)==null||B.call(S,b)),ee&&((H=S==null?void 0:S.onBeforeUpdate)==null||H.call(S,b)),(ee||_e)&&(b.items=await p({editor:t,query:G.query})),de&&((z=S==null?void 0:S.onExit)==null||z.call(S,b)),ee&&((ie=S==null?void 0:S.onUpdate)==null||ie.call(S,b)),_e&&((X=S==null?void 0:S.onStart)==null||X.call(S,b))},destroy:()=>{var P;b&&((P=S==null?void 0:S.onExit)==null||P.call(S,b))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply(P,O,D,L){const{isEditable:B}=t,{composing:H}=t.view,{selection:z}=P,{empty:ie,from:X}=z,W={...O},Q=P.getMeta(e);if(Q&&Q.exit)return W.active=!1,W.decorationId=null,W.range={from:0,to:0},W.query=null,W.text=null,W;if(W.composing=H,B&&(ie||t.view.composing)){(X<O.range.from||X>O.range.to)&&!H&&!O.composing&&(W.active=!1);const te=y({char:r,allowSpaces:n,allowToIncludeChar:i,allowedPrefixes:a,startOfLine:s,$position:z.$from}),J=`id_${Math.floor(Math.random()*4294967295)}`;te&&x({editor:t,state:L,range:te.range,isActive:O.active})?(W.active=!0,W.decorationId=O.decorationId?O.decorationId:J,W.range=te.range,W.query=te.query,W.text=te.text):W.active=!1}else W.active=!1;return W.active||(W.decorationId=null,W.range={from:0,to:0},W.query=null,W.text=null),W}},props:{handleKeyDown(P,O){var D,L,B,H;const{active:z,range:ie}=j.getState(P.state);if(!z)return!1;if(O.key==="Escape"||O.key==="Esc"){const W=j.getState(P.state),Q=(D=b==null?void 0:b.decorationNode)!=null?D:null,te=Q??(W!=null&&W.decorationId?P.dom.querySelector(`[data-decoration-id="${W.decorationId}"]`):null);if(((L=S==null?void 0:S.onKeyDown)==null?void 0:L.call(S,{view:P,event:O,range:W.range}))||!1)return!0;const Y={editor:t,range:W.range,query:W.query,text:W.text,items:[],command:pe=>f({editor:t,range:W.range,props:pe}),decorationNode:te,clientRect:te?()=>te.getBoundingClientRect()||null:null};return(B=S==null?void 0:S.onExit)==null||B.call(S,Y),A(P,e),!0}return((H=S==null?void 0:S.onKeyDown)==null?void 0:H.call(S,{view:P,event:O,range:ie}))||!1},decorations(P){const{active:O,range:D,decorationId:L,query:B}=j.getState(P);if(!O)return null;const H=!(B!=null&&B.length),z=[l];return H&&z.push(d),Bi.create(P.doc,[xo.inline(D.from,D.to,{nodeName:o,class:z.join(" "),"data-decoration-id":L,"data-decoration-content":c})])}}});return j}function NZe({editor:e,overrideSuggestionOptions:t,extensionName:r,char:n="@"}){const i=new Ca;return{editor:e,char:n,pluginKey:i,command:({editor:a,range:s,props:o})=>{var l,c,d;const f=a.view.state.selection.$to.nodeAfter;((l=f==null?void 0:f.text)==null?void 0:l.startsWith(" "))&&(s.to+=1),a.chain().focus().insertContentAt(s,[{type:r,attrs:{...o,mentionSuggestionChar:n}},{type:"text",text:" "}]).run(),(d=(c=a.view.dom.ownerDocument.defaultView)==null?void 0:c.getSelection())==null||d.collapseToEnd()},allow:({state:a,range:s})=>{const o=a.doc.resolve(s.from),l=a.schema.nodes[r];return!!o.parent.type.contentMatch.matchType(l)},...t}}function lhe(e){return(e.options.suggestions.length?e.options.suggestions:[e.options.suggestion]).map(t=>NZe({editor:e.editor,overrideSuggestionOptions:t,extensionName:e.name,char:t.char}))}function FY(e,t){const r=lhe(e),n=r.find(i=>i.char===t);return n||(r.length?r[0]:null)}var AZe=rl.create({name:"mention",priority:101,addOptions(){return{HTMLAttributes:{},renderText({node:e,suggestion:t}){var r,n;return`${(r=t==null?void 0:t.char)!=null?r:"@"}${(n=e.attrs.label)!=null?n:e.attrs.id}`},deleteTriggerWithBackspace:!1,renderHTML({options:e,node:t,suggestion:r}){var n,i;return["span",Ii(this.HTMLAttributes,e.HTMLAttributes),`${(n=r==null?void 0:r.char)!=null?n:"@"}${(i=t.attrs.label)!=null?i:t.attrs.id}`]},suggestions:[],suggestion:{}}},group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes(){return{id:{default:null,parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>e.id?{"data-id":e.id}:{}},label:{default:null,parseHTML:e=>e.getAttribute("data-label"),renderHTML:e=>e.label?{"data-label":e.label}:{}},mentionSuggestionChar:{default:"@",parseHTML:e=>e.getAttribute("data-mention-suggestion-char"),renderHTML:e=>({"data-mention-suggestion-char":e.mentionSuggestionChar})}}},parseHTML(){return[{tag:`span[data-type="${this.name}"]`}]},renderHTML({node:e,HTMLAttributes:t}){const r=FY(this,e.attrs.mentionSuggestionChar);if(this.options.renderLabel!==void 0)return console.warn("renderLabel is deprecated use renderText and renderHTML instead"),["span",Ii({"data-type":this.name},this.options.HTMLAttributes,t),this.options.renderLabel({options:this.options,node:e,suggestion:r})];const n={...this.options};n.HTMLAttributes=Ii({"data-type":this.name},this.options.HTMLAttributes,t);const i=this.options.renderHTML({options:n,node:e,suggestion:r});return typeof i=="string"?["span",Ii({"data-type":this.name},this.options.HTMLAttributes,t),i]:i},...Nfe({nodeName:"mention",name:"@",selfClosing:!0,allowedAttributes:["id","label",{name:"mentionSuggestionChar",skipIfDefault:"@"}],parseAttributes:e=>{const t={},r=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let n=r.exec(e);for(;n!==null;){const[,i,a,s]=n,o=a??s;t[i==="char"?"mentionSuggestionChar":i]=o,n=r.exec(e)}return t},serializeAttributes:e=>Object.entries(e).filter(([,t])=>t!=null).map(([t,r])=>`${t==="mentionSuggestionChar"?"char":t}="${r}"`).join(" ")}),renderText({node:e}){const t={options:this.options,node:e,suggestion:FY(this,e.attrs.mentionSuggestionChar)};return this.options.renderLabel!==void 0?(console.warn("renderLabel is deprecated use renderText and renderHTML instead"),this.options.renderLabel(t)):this.options.renderText(t)},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command(({tr:e,state:t})=>{let r=!1;const{selection:n}=t,{empty:i,anchor:a}=n;if(!i)return!1;let s=new Nh,o=0;return t.doc.nodesBetween(a-1,a,(l,c)=>{if(l.type.name===this.name)return r=!0,s=l,o=c,!1}),r&&e.insertText(this.options.deleteTriggerWithBackspace?"":s.attrs.mentionSuggestionChar,o,o+s.nodeSize),r})}},addProseMirrorPlugins(){return lhe(this).map(_Ze)}}),TZe=AZe,Tl="top",pu="bottom",mu="right",Il="left",UB="auto",kC=[Tl,pu,mu,Il],Dy="start",WS="end",IZe="clippingParents",che="viewport",Bw="popper",OZe="reference",LY=kC.reduce(function(e,t){return e.concat([t+"-"+Dy,t+"-"+WS])},[]),uhe=[].concat(kC,[UB]).reduce(function(e,t){return e.concat([t,t+"-"+Dy,t+"-"+WS])},[]),PZe="beforeRead",RZe="read",jZe="afterRead",DZe="beforeMain",MZe="main",FZe="afterMain",LZe="beforeWrite",BZe="write",UZe="afterWrite",$Ze=[PZe,RZe,jZe,DZe,MZe,FZe,LZe,BZe,UZe];function pf(e){return e?(e.nodeName||"").toLowerCase():null}function mc(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function bx(e){var t=mc(e).Element;return e instanceof t||e instanceof Element}function cu(e){var t=mc(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function $B(e){if(typeof ShadowRoot>"u")return!1;var t=mc(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function zZe(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},i=t.attributes[r]||{},a=t.elements[r];!cu(a)||!pf(a)||(Object.assign(a.style,n),Object.keys(i).forEach(function(s){var o=i[s];o===!1?a.removeAttribute(s):a.setAttribute(s,o===!0?"":o)}))})}function HZe(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var i=t.elements[n],a=t.attributes[n]||{},s=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),o=s.reduce(function(l,c){return l[c]="",l},{});!cu(i)||!pf(i)||(Object.assign(i.style,o),Object.keys(a).forEach(function(l){i.removeAttribute(l)}))})}}const dhe={name:"applyStyles",enabled:!0,phase:"write",fn:zZe,effect:HZe,requires:["computeStyles"]};function cf(e){return e.split("-")[0]}var zg=Math.max,kI=Math.min,My=Math.round;function IF(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function fhe(){return!/^((?!chrome|android).)*safari/i.test(IF())}function Fy(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),i=1,a=1;t&&cu(e)&&(i=e.offsetWidth>0&&My(n.width)/e.offsetWidth||1,a=e.offsetHeight>0&&My(n.height)/e.offsetHeight||1);var s=bx(e)?mc(e):window,o=s.visualViewport,l=!fhe()&&r,c=(n.left+(l&&o?o.offsetLeft:0))/i,d=(n.top+(l&&o?o.offsetTop:0))/a,f=n.width/i,p=n.height/a;return{width:f,height:p,top:d,right:c+f,bottom:d+p,left:c,x:c,y:d}}function zB(e){var t=Fy(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function hhe(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&$B(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Vh(e){return mc(e).getComputedStyle(e)}function WZe(e){return["table","td","th"].indexOf(pf(e))>=0}function um(e){return((bx(e)?e.ownerDocument:e.document)||window.document).documentElement}function $3(e){return pf(e)==="html"?e:e.assignedSlot||e.parentNode||($B(e)?e.host:null)||um(e)}function BY(e){return!cu(e)||Vh(e).position==="fixed"?null:e.offsetParent}function VZe(e){var t=/firefox/i.test(IF()),r=/Trident/i.test(IF());if(r&&cu(e)){var n=Vh(e);if(n.position==="fixed")return null}var i=$3(e);for($B(i)&&(i=i.host);cu(i)&&["html","body"].indexOf(pf(i))<0;){var a=Vh(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function _C(e){for(var t=mc(e),r=BY(e);r&&WZe(r)&&Vh(r).position==="static";)r=BY(r);return r&&(pf(r)==="html"||pf(r)==="body"&&Vh(r).position==="static")?t:r||VZe(e)||t}function HB(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function W2(e,t,r){return zg(e,kI(t,r))}function qZe(e,t,r){var n=W2(e,t,r);return n>r?r:n}function phe(){return{top:0,right:0,bottom:0,left:0}}function mhe(e){return Object.assign({},phe(),e)}function ghe(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var GZe=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,mhe(typeof t!="number"?t:ghe(t,kC))};function KZe(e){var t,r=e.state,n=e.name,i=e.options,a=r.elements.arrow,s=r.modifiersData.popperOffsets,o=cf(r.placement),l=HB(o),c=[Il,mu].indexOf(o)>=0,d=c?"height":"width";if(!(!a||!s)){var f=GZe(i.padding,r),p=zB(a),m=l==="y"?Tl:Il,x=l==="y"?pu:mu,y=r.rects.reference[d]+r.rects.reference[l]-s[l]-r.rects.popper[d],b=s[l]-r.rects.reference[l],S=_C(a),_=S?l==="y"?S.clientHeight||0:S.clientWidth||0:0,C=y/2-b/2,A=f[m],j=_-p[d]-f[x],P=_/2-p[d]/2+C,O=W2(A,P,j),D=l;r.modifiersData[n]=(t={},t[D]=O,t.centerOffset=O-P,t)}}function XZe(e){var t=e.state,r=e.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||hhe(t.elements.popper,i)&&(t.elements.arrow=i))}const YZe={name:"arrow",enabled:!0,phase:"main",fn:KZe,effect:XZe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ly(e){return e.split("-")[1]}var QZe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function JZe(e,t){var r=e.x,n=e.y,i=t.devicePixelRatio||1;return{x:My(r*i)/i||0,y:My(n*i)/i||0}}function UY(e){var t,r=e.popper,n=e.popperRect,i=e.placement,a=e.variation,s=e.offsets,o=e.position,l=e.gpuAcceleration,c=e.adaptive,d=e.roundOffsets,f=e.isFixed,p=s.x,m=p===void 0?0:p,x=s.y,y=x===void 0?0:x,b=typeof d=="function"?d({x:m,y}):{x:m,y};m=b.x,y=b.y;var S=s.hasOwnProperty("x"),_=s.hasOwnProperty("y"),C=Il,A=Tl,j=window;if(c){var P=_C(r),O="clientHeight",D="clientWidth";if(P===mc(r)&&(P=um(r),Vh(P).position!=="static"&&o==="absolute"&&(O="scrollHeight",D="scrollWidth")),P=P,i===Tl||(i===Il||i===mu)&&a===WS){A=pu;var L=f&&P===j&&j.visualViewport?j.visualViewport.height:P[O];y-=L-n.height,y*=l?1:-1}if(i===Il||(i===Tl||i===pu)&&a===WS){C=mu;var B=f&&P===j&&j.visualViewport?j.visualViewport.width:P[D];m-=B-n.width,m*=l?1:-1}}var H=Object.assign({position:o},c&&QZe),z=d===!0?JZe({x:m,y},mc(r)):{x:m,y};if(m=z.x,y=z.y,l){var ie;return Object.assign({},H,(ie={},ie[A]=_?"0":"",ie[C]=S?"0":"",ie.transform=(j.devicePixelRatio||1)<=1?"translate("+m+"px, "+y+"px)":"translate3d("+m+"px, "+y+"px, 0)",ie))}return Object.assign({},H,(t={},t[A]=_?y+"px":"",t[C]=S?m+"px":"",t.transform="",t))}function ZZe(e){var t=e.state,r=e.options,n=r.gpuAcceleration,i=n===void 0?!0:n,a=r.adaptive,s=a===void 0?!0:a,o=r.roundOffsets,l=o===void 0?!0:o,c={placement:cf(t.placement),variation:Ly(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,UY(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,UY(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const eet={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ZZe,data:{}};var rN={passive:!0};function tet(e){var t=e.state,r=e.instance,n=e.options,i=n.scroll,a=i===void 0?!0:i,s=n.resize,o=s===void 0?!0:s,l=mc(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&c.forEach(function(d){d.addEventListener("scroll",r.update,rN)}),o&&l.addEventListener("resize",r.update,rN),function(){a&&c.forEach(function(d){d.removeEventListener("scroll",r.update,rN)}),o&&l.removeEventListener("resize",r.update,rN)}}const ret={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:tet,data:{}};var net={left:"right",right:"left",bottom:"top",top:"bottom"};function fA(e){return e.replace(/left|right|bottom|top/g,function(t){return net[t]})}var iet={start:"end",end:"start"};function $Y(e){return e.replace(/start|end/g,function(t){return iet[t]})}function WB(e){var t=mc(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function VB(e){return Fy(um(e)).left+WB(e).scrollLeft}function aet(e,t){var r=mc(e),n=um(e),i=r.visualViewport,a=n.clientWidth,s=n.clientHeight,o=0,l=0;if(i){a=i.width,s=i.height;var c=fhe();(c||!c&&t==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:a,height:s,x:o+VB(e),y:l}}function set(e){var t,r=um(e),n=WB(e),i=(t=e.ownerDocument)==null?void 0:t.body,a=zg(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=zg(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),o=-n.scrollLeft+VB(e),l=-n.scrollTop;return Vh(i||r).direction==="rtl"&&(o+=zg(r.clientWidth,i?i.clientWidth:0)-a),{width:a,height:s,x:o,y:l}}function qB(e){var t=Vh(e),r=t.overflow,n=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function xhe(e){return["html","body","#document"].indexOf(pf(e))>=0?e.ownerDocument.body:cu(e)&&qB(e)?e:xhe($3(e))}function V2(e,t){var r;t===void 0&&(t=[]);var n=xhe(e),i=n===((r=e.ownerDocument)==null?void 0:r.body),a=mc(n),s=i?[a].concat(a.visualViewport||[],qB(n)?n:[]):n,o=t.concat(s);return i?o:o.concat(V2($3(s)))}function OF(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function oet(e,t){var r=Fy(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function zY(e,t,r){return t===che?OF(aet(e,r)):bx(t)?oet(t,r):OF(set(um(e)))}function cet(e){var t=V2($3(e)),r=["absolute","fixed"].indexOf(Vh(e).position)>=0,n=r&&cu(e)?_C(e):e;return bx(n)?t.filter(function(i){return bx(i)&&hhe(i,n)&&pf(i)!=="body"}):[]}function uet(e,t,r,n){var i=t==="clippingParents"?cet(e):[].concat(t),a=[].concat(i,[r]),s=a[0],o=a.reduce(function(l,c){var d=zY(e,c,n);return l.top=zg(d.top,l.top),l.right=kI(d.right,l.right),l.bottom=kI(d.bottom,l.bottom),l.left=zg(d.left,l.left),l},zY(e,s,n));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function vhe(e){var t=e.reference,r=e.element,n=e.placement,i=n?cf(n):null,a=n?Ly(n):null,s=t.x+t.width/2-r.width/2,o=t.y+t.height/2-r.height/2,l;switch(i){case Tl:l={x:s,y:t.y-r.height};break;case pu:l={x:s,y:t.y+t.height};break;case mu:l={x:t.x+t.width,y:o};break;case Il:l={x:t.x-r.width,y:o};break;default:l={x:t.x,y:t.y}}var c=i?HB(i):null;if(c!=null){var d=c==="y"?"height":"width";switch(a){case Dy:l[c]=l[c]-(t[d]/2-r[d]/2);break;case WS:l[c]=l[c]+(t[d]/2-r[d]/2);break}}return l}function VS(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=n===void 0?e.placement:n,a=r.strategy,s=a===void 0?e.strategy:a,o=r.boundary,l=o===void 0?IZe:o,c=r.rootBoundary,d=c===void 0?che:c,f=r.elementContext,p=f===void 0?Bw:f,m=r.altBoundary,x=m===void 0?!1:m,y=r.padding,b=y===void 0?0:y,S=mhe(typeof b!="number"?b:ghe(b,kC)),_=p===Bw?OZe:Bw,C=e.rects.popper,A=e.elements[x?_:p],j=uet(bx(A)?A:A.contextElement||um(e.elements.popper),l,d,s),P=Fy(e.elements.reference),O=vhe({reference:P,element:C,placement:i}),D=OF(Object.assign({},C,O)),L=p===Bw?D:P,B={top:j.top-L.top+S.top,bottom:L.bottom-j.bottom+S.bottom,left:j.left-L.left+S.left,right:L.right-j.right+S.right},H=e.modifiersData.offset;if(p===Bw&&H){var z=H[i];Object.keys(B).forEach(function(ie){var X=[mu,pu].indexOf(ie)>=0?1:-1,W=[Tl,pu].indexOf(ie)>=0?"y":"x";B[ie]+=z[W]*X})}return B}function det(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=r.boundary,a=r.rootBoundary,s=r.padding,o=r.flipVariations,l=r.allowedAutoPlacements,c=l===void 0?uhe:l,d=Ly(n),f=d?o?LY:LY.filter(function(x){return Ly(x)===d}):kC,p=f.filter(function(x){return c.indexOf(x)>=0});p.length===0&&(p=f);var m=p.reduce(function(x,y){return x[y]=VS(e,{placement:y,boundary:i,rootBoundary:a,padding:s})[cf(y)],x},{});return Object.keys(m).sort(function(x,y){return m[x]-m[y]})}function fet(e){if(cf(e)===UB)return[];var t=fA(e);return[$Y(e),t,$Y(t)]}function het(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var i=r.mainAxis,a=i===void 0?!0:i,s=r.altAxis,o=s===void 0?!0:s,l=r.fallbackPlacements,c=r.padding,d=r.boundary,f=r.rootBoundary,p=r.altBoundary,m=r.flipVariations,x=m===void 0?!0:m,y=r.allowedAutoPlacements,b=t.options.placement,S=cf(b),_=S===b,C=l||(_||!x?[fA(b)]:fet(b)),A=[b].concat(C).reduce(function(G,q){return G.concat(cf(q)===UB?det(t,{placement:q,boundary:d,rootBoundary:f,padding:c,flipVariations:x,allowedAutoPlacements:y}):q)},[]),j=t.rects.reference,P=t.rects.popper,O=new Map,D=!0,L=A[0],B=0;B<A.length;B++){var H=A[B],z=cf(H),ie=Ly(H)===Dy,X=[Tl,pu].indexOf(z)>=0,W=X?"width":"height",Q=VS(t,{placement:H,boundary:d,rootBoundary:f,altBoundary:p,padding:c}),te=X?ie?mu:Il:ie?pu:Tl;j[W]>P[W]&&(te=fA(te));var J=fA(te),Y=[];if(a&&Y.push(Q[z]<=0),o&&Y.push(Q[te]<=0,Q[J]<=0),Y.every(function(G){return G})){L=H,D=!1;break}O.set(H,Y)}if(D)for(var pe=x?3:1,_e=function(q){var ne=A.find(function(Se){var re=O.get(Se);if(re)return re.slice(0,q).every(function(ae){return ae})});if(ne)return L=ne,"break"},ee=pe;ee>0;ee--){var de=_e(ee);if(de==="break")break}t.placement!==L&&(t.modifiersData[n]._skip=!0,t.placement=L,t.reset=!0)}}const pet={name:"flip",enabled:!0,phase:"main",fn:het,requiresIfExists:["offset"],data:{_skip:!1}};function HY(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function WY(e){return[Tl,mu,pu,Il].some(function(t){return e[t]>=0})}function met(e){var t=e.state,r=e.name,n=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,s=VS(t,{elementContext:"reference"}),o=VS(t,{altBoundary:!0}),l=HY(s,n),c=HY(o,i,a),d=WY(l),f=WY(c);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":f})}const get={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:met};function xet(e,t,r){var n=cf(e),i=[Il,Tl].indexOf(n)>=0?-1:1,a=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,s=a[0],o=a[1];return s=s||0,o=(o||0)*i,[Il,mu].indexOf(n)>=0?{x:o,y:s}:{x:s,y:o}}function vet(e){var t=e.state,r=e.options,n=e.name,i=r.offset,a=i===void 0?[0,0]:i,s=uhe.reduce(function(d,f){return d[f]=xet(f,t.rects,a),d},{}),o=s[t.placement],l=o.x,c=o.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[n]=s}const yet={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:vet};function bet(e){var t=e.state,r=e.name;t.modifiersData[r]=vhe({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const wet={name:"popperOffsets",enabled:!0,phase:"read",fn:bet,data:{}};function Eet(e){return e==="x"?"y":"x"}function Cet(e){var t=e.state,r=e.options,n=e.name,i=r.mainAxis,a=i===void 0?!0:i,s=r.altAxis,o=s===void 0?!1:s,l=r.boundary,c=r.rootBoundary,d=r.altBoundary,f=r.padding,p=r.tether,m=p===void 0?!0:p,x=r.tetherOffset,y=x===void 0?0:x,b=VS(t,{boundary:l,rootBoundary:c,padding:f,altBoundary:d}),S=cf(t.placement),_=Ly(t.placement),C=!_,A=HB(S),j=Eet(A),P=t.modifiersData.popperOffsets,O=t.rects.reference,D=t.rects.popper,L=typeof y=="function"?y(Object.assign({},t.rects,{placement:t.placement})):y,B=typeof L=="number"?{mainAxis:L,altAxis:L}:Object.assign({mainAxis:0,altAxis:0},L),H=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,z={x:0,y:0};if(P){if(a){var ie,X=A==="y"?Tl:Il,W=A==="y"?pu:mu,Q=A==="y"?"height":"width",te=P[A],J=te+b[X],Y=te-b[W],pe=m?-D[Q]/2:0,_e=_===Dy?O[Q]:D[Q],ee=_===Dy?-D[Q]:-O[Q],de=t.elements.arrow,G=m&&de?zB(de):{width:0,height:0},q=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:phe(),ne=q[X],Se=q[W],re=W2(0,O[Q],G[Q]),ae=C?O[Q]/2-pe-re-ne-B.mainAxis:_e-re-ne-B.mainAxis,ge=C?-O[Q]/2+pe+re+Se+B.mainAxis:ee+re+Se+B.mainAxis,Ee=t.elements.arrow&&_C(t.elements.arrow),V=Ee?A==="y"?Ee.clientTop||0:Ee.clientLeft||0:0,Ae=(ie=H==null?void 0:H[A])!=null?ie:0,Pe=te+ae-Ae-V,ze=te+ge-Ae,De=W2(m?kI(J,Pe):J,te,m?zg(Y,ze):Y);P[A]=De,z[A]=De-te}if(o){var $e,et=A==="x"?Tl:Il,ut=A==="x"?pu:mu,kt=P[j],ht=j==="y"?"height":"width",jr=kt+b[et],er=kt-b[ut],ct=[Tl,Il].indexOf(S)!==-1,qt=($e=H==null?void 0:H[j])!=null?$e:0,Lt=ct?jr:kt-O[ht]-D[ht]-qt+B.altAxis,dr=ct?kt+O[ht]+D[ht]-qt-B.altAxis:er,Gt=m&&ct?qZe(Lt,kt,dr):W2(m?Lt:jr,kt,m?dr:er);P[j]=Gt,z[j]=Gt-kt}t.modifiersData[n]=z}}const ket={name:"preventOverflow",enabled:!0,phase:"main",fn:Cet,requiresIfExists:["offset"]};function _et(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Net(e){return e===mc(e)||!cu(e)?WB(e):_et(e)}function Aet(e){var t=e.getBoundingClientRect(),r=My(t.width)/e.offsetWidth||1,n=My(t.height)/e.offsetHeight||1;return r!==1||n!==1}function Tet(e,t,r){r===void 0&&(r=!1);var n=cu(t),i=cu(t)&&Aet(t),a=um(t),s=Fy(e,i,r),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!r)&&((pf(t)!=="body"||qB(a))&&(o=Net(t)),cu(t)?(l=Fy(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):a&&(l.x=VB(a))),{x:s.left+o.scrollLeft-l.x,y:s.top+o.scrollTop-l.y,width:s.width,height:s.height}}function Iet(e){var t=new Map,r=new Set,n=[];e.forEach(function(a){t.set(a.name,a)});function i(a){r.add(a.name);var s=[].concat(a.requires||[],a.requiresIfExists||[]);s.forEach(function(o){if(!r.has(o)){var l=t.get(o);l&&i(l)}}),n.push(a)}return e.forEach(function(a){r.has(a.name)||i(a)}),n}function Oet(e){var t=Iet(e);return $Ze.reduce(function(r,n){return r.concat(t.filter(function(i){return i.phase===n}))},[])}function Pet(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function Ret(e){var t=e.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var VY={placement:"bottom",modifiers:[],strategy:"absolute"};function qY(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function jet(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,i=t.defaultOptions,a=i===void 0?VY:i;return function(o,l,c){c===void 0&&(c=a);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},VY,a),modifiersData:{},elements:{reference:o,popper:l},attributes:{},styles:{}},f=[],p=!1,m={state:d,setOptions:function(S){var _=typeof S=="function"?S(d.options):S;y(),d.options=Object.assign({},a,d.options,_),d.scrollParents={reference:bx(o)?V2(o):o.contextElement?V2(o.contextElement):[],popper:V2(l)};var C=Oet(Ret([].concat(n,d.options.modifiers)));return d.orderedModifiers=C.filter(function(A){return A.enabled}),x(),m.update()},forceUpdate:function(){if(!p){var S=d.elements,_=S.reference,C=S.popper;if(qY(_,C)){d.rects={reference:Tet(_,_C(C),d.options.strategy==="fixed"),popper:zB(C)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(B){return d.modifiersData[B.name]=Object.assign({},B.data)});for(var A=0;A<d.orderedModifiers.length;A++){if(d.reset===!0){d.reset=!1,A=-1;continue}var j=d.orderedModifiers[A],P=j.fn,O=j.options,D=O===void 0?{}:O,L=j.name;typeof P=="function"&&(d=P({state:d,options:D,name:L,instance:m})||d)}}}},update:Pet(function(){return new Promise(function(b){m.forceUpdate(),b(d)})}),destroy:function(){y(),p=!0}};if(!qY(o,l))return m;m.setOptions(c).then(function(b){!p&&c.onFirstUpdate&&c.onFirstUpdate(b)});function x(){d.orderedModifiers.forEach(function(b){var S=b.name,_=b.options,C=_===void 0?{}:_,A=b.effect;if(typeof A=="function"){var j=A({state:d,name:S,instance:m,options:C}),P=function(){};f.push(j||P)}})}function y(){f.forEach(function(b){return b()}),f=[]}return m}}var Det=[ret,wet,eet,dhe,yet,pet,ket,YZe,get],Met=jet({defaultModifiers:Det}),Fet="tippy-box",yhe="tippy-content",Let="tippy-backdrop",bhe="tippy-arrow",whe="tippy-svg-arrow",qm={passive:!0,capture:!0},She=function(){return document.body};function ZD(e,t,r){if(Array.isArray(e)){var n=e[t];return n??(Array.isArray(r)?r[t]:r)}return e}function GB(e,t){var r={}.toString.call(e);return r.indexOf("[object")===0&&r.indexOf(t+"]")>-1}function Ehe(e,t){return typeof e=="function"?e.apply(void 0,t):e}function GY(e,t){if(t===0)return e;var r;return function(n){clearTimeout(r),r=setTimeout(function(){e(n)},t)}}function Bet(e){return e.split(/\s+/).filter(Boolean)}function sv(e){return[].concat(e)}function KY(e,t){e.indexOf(t)===-1&&e.push(t)}function Uet(e){return e.filter(function(t,r){return e.indexOf(t)===r})}function $et(e){return e.split("-")[0]}function _I(e){return[].slice.call(e)}function XY(e){return Object.keys(e).reduce(function(t,r){return e[r]!==void 0&&(t[r]=e[r]),t},{})}function q2(){return document.createElement("div")}function z3(e){return["Element","Fragment"].some(function(t){return GB(e,t)})}function zet(e){return GB(e,"NodeList")}function Het(e){return GB(e,"MouseEvent")}function Wet(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function Vet(e){return z3(e)?[e]:zet(e)?_I(e):Array.isArray(e)?e:_I(document.querySelectorAll(e))}function eM(e,t){e.forEach(function(r){r&&(r.style.transitionDuration=t+"ms")})}function YY(e,t){e.forEach(function(r){r&&r.setAttribute("data-state",t)})}function qet(e){var t,r=sv(e),n=r[0];return n!=null&&(t=n.ownerDocument)!=null&&t.body?n.ownerDocument:document}function Get(e,t){var r=t.clientX,n=t.clientY;return e.every(function(i){var a=i.popperRect,s=i.popperState,o=i.props,l=o.interactiveBorder,c=$et(s.placement),d=s.modifiersData.offset;if(!d)return!0;var f=c==="bottom"?d.top.y:0,p=c==="top"?d.bottom.y:0,m=c==="right"?d.left.x:0,x=c==="left"?d.right.x:0,y=a.top-n+f>l,b=n-a.bottom-p>l,S=a.left-r+m>l,_=r-a.right-x>l;return y||b||S||_})}function tM(e,t,r){var n=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){e[n](i,r)})}function QY(e,t){for(var r=t;r;){var n;if(e.contains(r))return!0;r=r.getRootNode==null||(n=r.getRootNode())==null?void 0:n.host}return!1}var Kd={isTouch:!1},JY=0;function Ket(){Kd.isTouch||(Kd.isTouch=!0,window.performance&&document.addEventListener("mousemove",Che))}function Che(){var e=performance.now();e-JY<20&&(Kd.isTouch=!1,document.removeEventListener("mousemove",Che)),JY=e}function Xet(){var e=document.activeElement;if(Wet(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function Yet(){document.addEventListener("touchstart",Ket,qm),window.addEventListener("blur",Xet)}var Qet=typeof window<"u"&&typeof document<"u",Jet=Qet?!!window.msCrypto:!1,Zet={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},ett={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},rd=Object.assign({appendTo:She,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Zet,ett),ttt=Object.keys(rd),rtt=function(t){var r=Object.keys(t);r.forEach(function(n){rd[n]=t[n]})};function khe(e){var t=e.plugins||[],r=t.reduce(function(n,i){var a=i.name,s=i.defaultValue;if(a){var o;n[a]=e[a]!==void 0?e[a]:(o=rd[a])!=null?o:s}return n},{});return Object.assign({},e,r)}function ntt(e,t){var r=t?Object.keys(khe(Object.assign({},rd,{plugins:t}))):ttt,n=r.reduce(function(i,a){var s=(e.getAttribute("data-tippy-"+a)||"").trim();if(!s)return i;if(a==="content")i[a]=s;else try{i[a]=JSON.parse(s)}catch{i[a]=s}return i},{});return n}function ZY(e,t){var r=Object.assign({},t,{content:Ehe(t.content,[e])},t.ignoreAttributes?{}:ntt(e,t.plugins));return r.aria=Object.assign({},rd.aria,r.aria),r.aria={expanded:r.aria.expanded==="auto"?t.interactive:r.aria.expanded,content:r.aria.content==="auto"?t.interactive?null:"describedby":r.aria.content},r}var itt=function(){return"innerHTML"};function PF(e,t){e[itt()]=t}function eQ(e){var t=q2();return e===!0?t.className=bhe:(t.className=whe,z3(e)?t.appendChild(e):PF(t,e)),t}function tQ(e,t){z3(t.content)?(PF(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?PF(e,t.content):e.textContent=t.content)}function RF(e){var t=e.firstElementChild,r=_I(t.children);return{box:t,content:r.find(function(n){return n.classList.contains(yhe)}),arrow:r.find(function(n){return n.classList.contains(bhe)||n.classList.contains(whe)}),backdrop:r.find(function(n){return n.classList.contains(Let)})}}function _he(e){var t=q2(),r=q2();r.className=Fet,r.setAttribute("data-state","hidden"),r.setAttribute("tabindex","-1");var n=q2();n.className=yhe,n.setAttribute("data-state","hidden"),tQ(n,e.props),t.appendChild(r),r.appendChild(n),i(e.props,e.props);function i(a,s){var o=RF(t),l=o.box,c=o.content,d=o.arrow;s.theme?l.setAttribute("data-theme",s.theme):l.removeAttribute("data-theme"),typeof s.animation=="string"?l.setAttribute("data-animation",s.animation):l.removeAttribute("data-animation"),s.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?l.setAttribute("role",s.role):l.removeAttribute("role"),(a.content!==s.content||a.allowHTML!==s.allowHTML)&&tQ(c,e.props),s.arrow?d?a.arrow!==s.arrow&&(l.removeChild(d),l.appendChild(eQ(s.arrow))):l.appendChild(eQ(s.arrow)):d&&l.removeChild(d)}return{popper:t,onUpdate:i}}_he.$$tippy=!0;var att=1,nN=[],rM=[];function stt(e,t){var r=ZY(e,Object.assign({},rd,khe(XY(t)))),n,i,a,s=!1,o=!1,l=!1,c=!1,d,f,p,m=[],x=GY(Pe,r.interactiveDebounce),y,b=att++,S=null,_=Uet(r.plugins),C={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},A={id:b,reference:e,popper:q2(),popperInstance:S,props:r,state:C,plugins:_,clearDelayTimeouts:Lt,setProps:dr,setContent:Gt,show:qe,hide:Xe,hideWithInteractivity:Te,enable:ct,disable:qt,unmount:He,destroy:je};if(!r.render)return A;var j=r.render(A),P=j.popper,O=j.onUpdate;P.setAttribute("data-tippy-root",""),P.id="tippy-"+A.id,A.popper=P,e._tippy=A,P._tippy=A;var D=_.map(function(we){return we.fn(A)}),L=e.hasAttribute("aria-expanded");return Ee(),pe(),te(),J("onCreate",[A]),r.showOnCreate&&jr(),P.addEventListener("mouseenter",function(){A.props.interactive&&A.state.isVisible&&A.clearDelayTimeouts()}),P.addEventListener("mouseleave",function(){A.props.interactive&&A.props.trigger.indexOf("mouseenter")>=0&&X().addEventListener("mousemove",x)}),A;function B(){var we=A.props.touch;return Array.isArray(we)?we:[we,0]}function H(){return B()[0]==="hold"}function z(){var we;return!!((we=A.props.render)!=null&&we.$$tippy)}function ie(){return y||e}function X(){var we=ie().parentNode;return we?qet(we):document}function W(){return RF(P)}function Q(we){return A.state.isMounted&&!A.state.isVisible||Kd.isTouch||d&&d.type==="focus"?0:ZD(A.props.delay,we?0:1,rd.delay)}function te(we){we===void 0&&(we=!1),P.style.pointerEvents=A.props.interactive&&!we?"":"none",P.style.zIndex=""+A.props.zIndex}function J(we,ot,xt){if(xt===void 0&&(xt=!0),D.forEach(function(Pt){Pt[we]&&Pt[we].apply(Pt,ot)}),xt){var Dt;(Dt=A.props)[we].apply(Dt,ot)}}function Y(){var we=A.props.aria;if(we.content){var ot="aria-"+we.content,xt=P.id,Dt=sv(A.props.triggerTarget||e);Dt.forEach(function(Pt){var kr=Pt.getAttribute(ot);if(A.state.isVisible)Pt.setAttribute(ot,kr?kr+" "+xt:xt);else{var Cn=kr&&kr.replace(xt,"").trim();Cn?Pt.setAttribute(ot,Cn):Pt.removeAttribute(ot)}})}}function pe(){if(!(L||!A.props.aria.expanded)){var we=sv(A.props.triggerTarget||e);we.forEach(function(ot){A.props.interactive?ot.setAttribute("aria-expanded",A.state.isVisible&&ot===ie()?"true":"false"):ot.removeAttribute("aria-expanded")})}}function _e(){X().removeEventListener("mousemove",x),nN=nN.filter(function(we){return we!==x})}function ee(we){if(!(Kd.isTouch&&(l||we.type==="mousedown"))){var ot=we.composedPath&&we.composedPath()[0]||we.target;if(!(A.props.interactive&&QY(P,ot))){if(sv(A.props.triggerTarget||e).some(function(xt){return QY(xt,ot)})){if(Kd.isTouch||A.state.isVisible&&A.props.trigger.indexOf("click")>=0)return}else J("onClickOutside",[A,we]);A.props.hideOnClick===!0&&(A.clearDelayTimeouts(),A.hide(),o=!0,setTimeout(function(){o=!1}),A.state.isMounted||ne())}}}function de(){l=!0}function G(){l=!1}function q(){var we=X();we.addEventListener("mousedown",ee,!0),we.addEventListener("touchend",ee,qm),we.addEventListener("touchstart",G,qm),we.addEventListener("touchmove",de,qm)}function ne(){var we=X();we.removeEventListener("mousedown",ee,!0),we.removeEventListener("touchend",ee,qm),we.removeEventListener("touchstart",G,qm),we.removeEventListener("touchmove",de,qm)}function Se(we,ot){ae(we,function(){!A.state.isVisible&&P.parentNode&&P.parentNode.contains(P)&&ot()})}function re(we,ot){ae(we,ot)}function ae(we,ot){var xt=W().box;function Dt(Pt){Pt.target===xt&&(tM(xt,"remove",Dt),ot())}if(we===0)return ot();tM(xt,"remove",f),tM(xt,"add",Dt),f=Dt}function ge(we,ot,xt){xt===void 0&&(xt=!1);var Dt=sv(A.props.triggerTarget||e);Dt.forEach(function(Pt){Pt.addEventListener(we,ot,xt),m.push({node:Pt,eventType:we,handler:ot,options:xt})})}function Ee(){H()&&(ge("touchstart",Ae,{passive:!0}),ge("touchend",ze,{passive:!0})),Bet(A.props.trigger).forEach(function(we){if(we!=="manual")switch(ge(we,Ae),we){case"mouseenter":ge("mouseleave",ze);break;case"focus":ge(Jet?"focusout":"blur",De);break;case"focusin":ge("focusout",De);break}})}function V(){m.forEach(function(we){var ot=we.node,xt=we.eventType,Dt=we.handler,Pt=we.options;ot.removeEventListener(xt,Dt,Pt)}),m=[]}function Ae(we){var ot,xt=!1;if(!(!A.state.isEnabled||$e(we)||o)){var Dt=((ot=d)==null?void 0:ot.type)==="focus";d=we,y=we.currentTarget,pe(),!A.state.isVisible&&Het(we)&&nN.forEach(function(Pt){return Pt(we)}),we.type==="click"&&(A.props.trigger.indexOf("mouseenter")<0||s)&&A.props.hideOnClick!==!1&&A.state.isVisible?xt=!0:jr(we),we.type==="click"&&(s=!xt),xt&&!Dt&&er(we)}}function Pe(we){var ot=we.target,xt=ie().contains(ot)||P.contains(ot);if(!(we.type==="mousemove"&&xt)){var Dt=ht().concat(P).map(function(Pt){var kr,Cn=Pt._tippy,fr=(kr=Cn.popperInstance)==null?void 0:kr.state;return fr?{popperRect:Pt.getBoundingClientRect(),popperState:fr,props:r}:null}).filter(Boolean);Get(Dt,we)&&(_e(),er(we))}}function ze(we){var ot=$e(we)||A.props.trigger.indexOf("click")>=0&&s;if(!ot){if(A.props.interactive){A.hideWithInteractivity(we);return}er(we)}}function De(we){A.props.trigger.indexOf("focusin")<0&&we.target!==ie()||A.props.interactive&&we.relatedTarget&&P.contains(we.relatedTarget)||er(we)}function $e(we){return Kd.isTouch?H()!==we.type.indexOf("touch")>=0:!1}function et(){ut();var we=A.props,ot=we.popperOptions,xt=we.placement,Dt=we.offset,Pt=we.getReferenceClientRect,kr=we.moveTransition,Cn=z()?RF(P).arrow:null,fr=Pt?{getBoundingClientRect:Pt,contextElement:Pt.contextElement||ie()}:e,Qi={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(We){var Je=We.state;if(z()){var rt=W(),_t=rt.box;["placement","reference-hidden","escaped"].forEach(function(Ut){Ut==="placement"?_t.setAttribute("data-placement",Je.placement):Je.attributes.popper["data-popper-"+Ut]?_t.setAttribute("data-"+Ut,""):_t.removeAttribute("data-"+Ut)}),Je.attributes.popper={}}}},Fn=[{name:"offset",options:{offset:Dt}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!kr}},Qi];z()&&Cn&&Fn.push({name:"arrow",options:{element:Cn,padding:3}}),Fn.push.apply(Fn,(ot==null?void 0:ot.modifiers)||[]),A.popperInstance=Met(fr,P,Object.assign({},ot,{placement:xt,onFirstUpdate:p,modifiers:Fn}))}function ut(){A.popperInstance&&(A.popperInstance.destroy(),A.popperInstance=null)}function kt(){var we=A.props.appendTo,ot,xt=ie();A.props.interactive&&we===She||we==="parent"?ot=xt.parentNode:ot=Ehe(we,[xt]),ot.contains(P)||ot.appendChild(P),A.state.isMounted=!0,et()}function ht(){return _I(P.querySelectorAll("[data-tippy-root]"))}function jr(we){A.clearDelayTimeouts(),we&&J("onTrigger",[A,we]),q();var ot=Q(!0),xt=B(),Dt=xt[0],Pt=xt[1];Kd.isTouch&&Dt==="hold"&&Pt&&(ot=Pt),ot?n=setTimeout(function(){A.show()},ot):A.show()}function er(we){if(A.clearDelayTimeouts(),J("onUntrigger",[A,we]),!A.state.isVisible){ne();return}if(!(A.props.trigger.indexOf("mouseenter")>=0&&A.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(we.type)>=0&&s)){var ot=Q(!1);ot?i=setTimeout(function(){A.state.isVisible&&A.hide()},ot):a=requestAnimationFrame(function(){A.hide()})}}function ct(){A.state.isEnabled=!0}function qt(){A.hide(),A.state.isEnabled=!1}function Lt(){clearTimeout(n),clearTimeout(i),cancelAnimationFrame(a)}function dr(we){if(!A.state.isDestroyed){J("onBeforeUpdate",[A,we]),V();var ot=A.props,xt=ZY(e,Object.assign({},ot,XY(we),{ignoreAttributes:!0}));A.props=xt,Ee(),ot.interactiveDebounce!==xt.interactiveDebounce&&(_e(),x=GY(Pe,xt.interactiveDebounce)),ot.triggerTarget&&!xt.triggerTarget?sv(ot.triggerTarget).forEach(function(Dt){Dt.removeAttribute("aria-expanded")}):xt.triggerTarget&&e.removeAttribute("aria-expanded"),pe(),te(),O&&O(ot,xt),A.popperInstance&&(et(),ht().forEach(function(Dt){requestAnimationFrame(Dt._tippy.popperInstance.forceUpdate)})),J("onAfterUpdate",[A,we])}}function Gt(we){A.setProps({content:we})}function qe(){var we=A.state.isVisible,ot=A.state.isDestroyed,xt=!A.state.isEnabled,Dt=Kd.isTouch&&!A.props.touch,Pt=ZD(A.props.duration,0,rd.duration);if(!(we||ot||xt||Dt)&&!ie().hasAttribute("disabled")&&(J("onShow",[A],!1),A.props.onShow(A)!==!1)){if(A.state.isVisible=!0,z()&&(P.style.visibility="visible"),te(),q(),A.state.isMounted||(P.style.transition="none"),z()){var kr=W(),Cn=kr.box,fr=kr.content;eM([Cn,fr],0)}p=function(){var Fn;if(!(!A.state.isVisible||c)){if(c=!0,P.offsetHeight,P.style.transition=A.props.moveTransition,z()&&A.props.animation){var il=W(),We=il.box,Je=il.content;eM([We,Je],Pt),YY([We,Je],"visible")}Y(),pe(),KY(rM,A),(Fn=A.popperInstance)==null||Fn.forceUpdate(),J("onMount",[A]),A.props.animation&&z()&&re(Pt,function(){A.state.isShown=!0,J("onShown",[A])})}},kt()}}function Xe(){var we=!A.state.isVisible,ot=A.state.isDestroyed,xt=!A.state.isEnabled,Dt=ZD(A.props.duration,1,rd.duration);if(!(we||ot||xt)&&(J("onHide",[A],!1),A.props.onHide(A)!==!1)){if(A.state.isVisible=!1,A.state.isShown=!1,c=!1,s=!1,z()&&(P.style.visibility="hidden"),_e(),ne(),te(!0),z()){var Pt=W(),kr=Pt.box,Cn=Pt.content;A.props.animation&&(eM([kr,Cn],Dt),YY([kr,Cn],"hidden"))}Y(),pe(),A.props.animation?z()&&Se(Dt,A.unmount):A.unmount()}}function Te(we){X().addEventListener("mousemove",x),KY(nN,x),x(we)}function He(){A.state.isVisible&&A.hide(),A.state.isMounted&&(ut(),ht().forEach(function(we){we._tippy.unmount()}),P.parentNode&&P.parentNode.removeChild(P),rM=rM.filter(function(we){return we!==A}),A.state.isMounted=!1,J("onHidden",[A]))}function je(){A.state.isDestroyed||(A.clearDelayTimeouts(),A.unmount(),V(),delete e._tippy,A.state.isDestroyed=!0,J("onDestroy",[A]))}}function NC(e,t){t===void 0&&(t={});var r=rd.plugins.concat(t.plugins||[]);Yet();var n=Object.assign({},t,{plugins:r}),i=Vet(e),a=i.reduce(function(s,o){var l=o&&stt(o,n);return l&&s.push(l),s},[]);return z3(e)?a[0]:a}NC.defaultProps=rd;NC.setDefaultProps=rtt;NC.currentInput=Kd;Object.assign({},dhe,{effect:function(t){var r=t.state,n={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(r.elements.popper.style,n.popper),r.styles=n,r.elements.arrow&&Object.assign(r.elements.arrow.style,n.arrow)}});NC.setDefaultProps({render:_he});const ott=I.forwardRef((e,t)=>{const[r,n]=I.useState(0),i=d=>{const f=e.items[d];f&&e.command({id:f.id,label:f.label,anchor:f.anchor})},a=()=>{n((r+e.items.length-1)%e.items.length)},s=()=>{n((r+1)%e.items.length)},o=()=>{i(r)};I.useEffect(()=>n(0),[e.items]),I.useImperativeHandle(t,()=>({onKeyDown:({event:d})=>d.key==="ArrowUp"?(a(),!0):d.key==="ArrowDown"?(s(),!0):d.key==="Enter"?(o(),!0):!1}));const l=e.query||"",c=e.items.length>0;return u.jsx("div",{className:"bg-surface border border-border rounded-lg shadow-xl overflow-hidden min-w-[200px] z-50 flex flex-col",children:c?e.items.map((d,f)=>u.jsxs("button",{className:`flex items-center gap-2 text-left px-3 py-2 text-sm w-full transition-colors ${f===r?"bg-primary text-on-primary":"bg-surface text-text-primary hover:bg-background"}`,onClick:()=>i(f),children:[d.type==="section"?u.jsx(xFe,{size:14,className:f===r?"text-on-primary":"text-text-secondary"}):u.jsx(au,{size:14,className:f===r?"text-on-primary":"text-text-secondary"}),u.jsxs("div",{className:"flex flex-col min-w-0",children:[u.jsx("span",{className:"truncate font-medium",children:d.label}),d.type==="section"&&u.jsx("span",{className:"text-[10px] opacity-70",children:"Section"})]})]},f)):u.jsx("div",{className:"px-3 py-2 text-sm text-text-secondary italic",children:l.length===0?"Start typing to search...":"No articles found."})})}),ltt={items:async({query:e})=>{if(!e)return[];try{return(await cr.get(`/api/kb/search?q=${e}`)).data.slice(0,5)}catch(t){return console.error(t),[]}},render:()=>{let e,t;return{onStart:r=>{e=new Dfe(ott,{props:r,editor:r.editor}),r.clientRect&&(t=NC("body",{getReferenceClientRect:r.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"}))},onUpdate(r){e.updateProps(r),e.updateProps({query:r.query}),r.clientRect&&t[0].setProps({getReferenceClientRect:r.clientRect})},onKeyDown(r){var n;return r.event.key==="Escape"?(t[0].hide(),!0):(n=e.ref)==null?void 0:n.onKeyDown(r)},onExit(){t[0].destroy(),e.destroy()}}}};function ctt({onClose:e,onSelect:t}){const[r,n]=I.useState("upload"),[i,a]=I.useState("KB"),[s,o]=I.useState([]),[l,c]=I.useState(!1),[d,f]=I.useState(!1);I.useEffect(()=>{r==="library"&&p()},[r,i]);const p=async()=>{c(!0);try{const x=await cr.get(`/api/kb/images?source=${i}`);o(x.data)}catch(x){console.error(x)}finally{c(!1)}},m=async x=>{var S;const y=(S=x.target.files)==null?void 0:S[0];if(!y)return;const b=new FormData;b.append("file",y),f(!0);try{const _=await cr.post("/api/kb/images",b,{headers:{"Content-Type":"multipart/form-data"}});t(_.data.url)}catch(_){console.error(_),Re.error("Upload failed")}finally{f(!1)}};return u.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:e,children:u.jsxs("div",{className:"bg-surface border border-border w-full max-w-2xl h-[600px] flex flex-col rounded-xl shadow-2xl overflow-hidden",onClick:x=>x.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border bg-background",children:[u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:()=>n("upload"),className:`px-3 py-1 text-sm font-bold rounded-full transition-colors ${r==="upload"?"bg-primary text-on-primary":"text-text-secondary hover:bg-surface"}`,children:"Upload New"}),u.jsx("button",{onClick:()=>n("library"),className:`px-3 py-1 text-sm font-bold rounded-full transition-colors ${r==="library"?"bg-primary text-on-primary":"text-text-secondary hover:bg-surface"}`,children:"Library"})]}),r==="library"&&u.jsxs("select",{className:"bg-background border border-border rounded px-2 py-1 text-xs",value:i,onChange:x=>a(x.target.value),children:[u.jsx("option",{value:"KB",children:"KB Assets"}),u.jsx("option",{value:"PROJECT",children:"Job Photos"}),u.jsx("option",{value:"ALL",children:"All Images"})]}),u.jsx("button",{onClick:e,className:"text-text-secondary hover:text-text-primary",children:u.jsx(tn,{size:20})})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-surface",children:[r==="upload"&&u.jsx("div",{className:"h-full flex flex-col items-center justify-center border-2 border-dashed border-border rounded-xl bg-background/50 hover:bg-background/80 transition-colors",children:d?u.jsxs("div",{className:"text-center",children:[u.jsx($0,{className:"animate-spin mx-auto mb-2 text-primary",size:48}),u.jsx("p",{className:"text-text-secondary font-medium",children:"Optimizing & Uploading..."})]}):u.jsxs("label",{className:"cursor-pointer text-center p-12 w-full h-full flex flex-col items-center justify-center",children:[u.jsx("div",{className:"bg-primary/10 p-4 rounded-full mb-4 text-primary",children:u.jsx(Eb,{size:32})}),u.jsx("h3",{className:"text-lg font-bold text-text-primary",children:"Click to Upload"}),u.jsx("p",{className:"text-text-secondary text-sm mt-2",children:"Images, PDFs, Docs supported"}),u.jsx("input",{type:"file",className:"hidden",accept:"*",onChange:m})]})}),r==="library"&&u.jsx("div",{children:l?u.jsx("div",{className:"flex justify-center p-12",children:u.jsx($0,{className:"animate-spin text-primary"})}):s.length===0?u.jsx("div",{className:"text-center py-12 text-text-tertiary",children:"No images found."}):u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-4",children:s.map(x=>{var y;return u.jsxs("button",{onClick:()=>t(x.url),className:"group relative aspect-square rounded-lg overflow-hidden border border-border hover:border-primary focus:ring-2 ring-primary focus:outline-none",children:[(y=x.mimeType)!=null&&y.startsWith("image/")||x.url.match(/\.(jpeg|jpg|gif|png|webp)$/i)?u.jsx("img",{src:x.thumbnailUrl||x.url,alt:"",className:"w-full h-full object-cover transition-transform group-hover:scale-110"}):u.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-surface-hover text-text-secondary",children:[u.jsx(au,{size:48,className:"mb-2"}),u.jsx("span",{className:"text-xs px-2 text-center truncate w-full",children:x.fileName||"Document"})]}),u.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:u.jsx("span",{className:"text-white text-xs font-bold bg-black/50 px-2 py-1 rounded",children:"Select"})})]},x.id)})})})]})]})})}function utt(e){const{node:t,updateAttributes:r,selected:n}=e,[i,a]=I.useState(!1),s=I.useRef(null),o=I.useRef(0),l=I.useRef(0),c=S=>{S.preventDefault(),S.stopPropagation(),s.current&&(a(!0),o.current=S.clientX,l.current=s.current.offsetWidth,document.addEventListener("mousemove",d),document.addEventListener("mouseup",f))},d=I.useCallback(S=>{const C=S.clientX-o.current,A=Math.max(100,l.current+C);r({width:A})},[r]),f=I.useCallback(()=>{a(!1),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",f)},[d]),p=S=>{S.stopPropagation(),s.current&&(a(!0),o.current=S.touches[0].clientX,l.current=s.current.offsetWidth,document.addEventListener("touchmove",m,{passive:!1}),document.addEventListener("touchend",x))},m=I.useCallback(S=>{S.preventDefault();const C=S.touches[0].clientX-o.current,A=Math.max(100,l.current+C);r({width:A})},[r]),x=I.useCallback(()=>{a(!1),document.removeEventListener("touchmove",m),document.removeEventListener("touchend",x)},[m]),y=t.attrs.align||"center";let b={};return y==="left"?b={float:"left",marginRight:"1rem"}:y==="right"?b={float:"right",marginLeft:"1rem"}:b={display:"block",marginLeft:"auto",marginRight:"auto",textAlign:"center"},u.jsxs(PQe,{className:"relative transition-all my-4 mb-8",style:b,children:[u.jsxs("div",{className:`relative inline-block group ${n||i?"ring-2 ring-primary rounded":""}`,children:[u.jsx("img",{ref:s,src:t.attrs.src,alt:t.attrs.alt,title:t.attrs.title,width:t.attrs.width,className:"block rounded max-w-full h-auto"}),u.jsx("div",{className:`absolute bottom-2 right-2 w-6 h-6 md:w-4 md:h-4 bg-primary border-2 border-white rounded-full cursor-nwse-resize shadow-md
                        ${n||i?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity`,onMouseDown:c,onTouchStart:p}),i&&u.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded pointer-events-none",children:[t.attrs.width,"px"]})]}),(n||t.attrs.caption)&&u.jsx("div",{className:`text-center mt-2 ${n?"opacity-100":"opacity-70"} transition-opacity`,children:u.jsx("input",{className:"bg-transparent text-center text-sm text-text-secondary placeholder-text-tertiary border-none focus:ring-0 focus:outline-none w-full italic",placeholder:"Add a caption...",value:t.attrs.caption||"",onChange:S=>r({caption:S.target.value}),onMouseDown:S=>S.stopPropagation(),onClick:S=>S.stopPropagation()})})]})}const dtt=`
  .ProseMirror p { margin-bottom: 0.75em; line-height: 1.6; overflow-wrap: break-word; }
  .ProseMirror p:empty::before { content: " "; display: inline-block; }
  .ProseMirror h1 { font-size: 1.75em; font-weight: 800; margin-top: 1.5em; margin-bottom: 0.5em; color: var(--color-text-primary); }
  .ProseMirror h2 { font-size: 1.4em; font-weight: 700; margin-top: 1.25em; margin-bottom: 0.5em; color: var(--color-text-primary); }
  .ProseMirror h3 { font-size: 1.2em; font-weight: 600; margin-top: 1em; margin-bottom: 0.5em; color: var(--color-text-primary); }
  .ProseMirror ul { list-style-type: disc; padding-left: 1.5em; margin-bottom: 1em; }
  .ProseMirror ol { list-style-type: decimal; padding-left: 1.5em; margin-bottom: 1em; }
  .ProseMirror a { color: var(--color-primary); text-decoration: underline; cursor: pointer; }
  .ProseMirror img { max-width: 100%; height: auto; border-radius: 0.5rem; margin: 1em 0; display: inline-block; }
  
  /* Style for the Wiki Link Bubble inside the Editor */
  .ProseMirror .kb-mention {
      color: var(--color-primary);
      background-color: color-mix(in srgb, var(--color-primary), white 85%); 
      padding: 0.1rem 0.3rem;
      border-radius: 0.3rem;
      font-weight: 600;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.2s;
      /* FIX: Allow chips to wrap on mobile */
      white-space: normal;
      display: inline-block;
      margin-bottom: 2px;
  }
  .ProseMirror .kb-mention:hover {
      background-color: var(--color-primary);
      color: var(--color-on-primary);
  }
  .ProseMirror:focus { outline: none; }

  /* Text Alignment Styles */
  .ProseMirror p.is-right { text-align: right; }
  .ProseMirror p.is-center { text-align: center; }
  .ProseMirror p.is-left { text-align: left; }
`,ftt=({editor:e,onOpenMedia:t})=>{if(!e)return null;const r=s=>`p-2 rounded hover:bg-surface transition-colors ${s?"text-primary bg-primary/10":"text-text-secondary"}`,n=()=>{const s=e.getAttributes("link").href,o=window.prompt("URL",s);if(o!==null){if(o===""){e.chain().focus().extendMarkRange("link").unsetLink().run();return}e.chain().focus().extendMarkRange("link").setLink({href:o}).run()}},i=s=>{e.isActive("image")?e.chain().focus().updateAttributes("image",{align:s}).run():e.chain().focus().setTextAlign(s).run()},a=s=>e.isActive("image")?e.getAttributes("image").align===s:e.isActive({textAlign:s});return u.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-border p-2 bg-background z-10",children:[u.jsx("button",{onClick:()=>e.chain().focus().toggleBold().run(),className:r(e.isActive("bold"))+" shrink-0",title:"Bold",children:u.jsx(tFe,{size:18})}),u.jsx("button",{onClick:()=>e.chain().focus().toggleItalic().run(),className:r(e.isActive("italic"))+" shrink-0",title:"Italic",children:u.jsx(wFe,{size:18})}),u.jsx("button",{onClick:n,className:r(e.isActive("link"))+" shrink-0",title:"Add Link",children:u.jsx(Zx,{size:18})}),u.jsx("button",{onClick:t,className:r(!1)+" shrink-0",title:"Insert Image",children:u.jsx(of,{size:18})}),u.jsx("div",{className:"w-px h-6 bg-border mx-2 shrink-0"}),u.jsx("button",{onClick:()=>e.chain().focus().toggleHeading({level:1}).run(),className:r(e.isActive("heading",{level:1}))+" shrink-0",title:"Heading 1",children:u.jsx(vFe,{size:18})}),u.jsx("button",{onClick:()=>e.chain().focus().toggleHeading({level:2}).run(),className:r(e.isActive("heading",{level:2}))+" shrink-0",title:"Heading 2",children:u.jsx(yFe,{size:18})}),u.jsx("div",{className:"w-px h-6 bg-border mx-2 shrink-0"}),u.jsx("button",{onClick:()=>i("left"),className:r(a("left"))+" shrink-0",title:"Align Left",children:u.jsx(J8e,{size:18})}),u.jsx("button",{onClick:()=>i("center"),className:r(a("center"))+" shrink-0",title:"Align Center",children:u.jsx(Q8e,{size:18})}),u.jsx("button",{onClick:()=>i("right"),className:r(a("right"))+" shrink-0",title:"Align Right",children:u.jsx(Z8e,{size:18})}),u.jsx("div",{className:"w-px h-6 bg-border mx-2 shrink-0"}),u.jsx("button",{onClick:()=>e.chain().focus().toggleBulletList().run(),className:r(e.isActive("bulletList"))+" shrink-0",title:"Bullet List",children:u.jsx(CFe,{size:18})}),u.jsx("button",{onClick:()=>e.chain().focus().toggleOrderedList().run(),className:r(e.isActive("orderedList"))+" shrink-0",title:"Ordered List",children:u.jsx(EFe,{size:18})})]})},Nhe=({content:e,onChange:t,editable:r=!0})=>{const[n,i]=I.useState(!1),a=TQe({extensions:[vZe.configure({heading:!1,codeBlock:!1}),ZQe.configure({levels:[1,2,3]}).extend({addAttributes(){return{id:{default:null,parseHTML:o=>o.getAttribute("id"),renderHTML:o=>o.id?{id:o.id}:{}}}}}),IJe.configure({openOnClick:!1}),EZe.configure({types:["heading","paragraph"]}),wZe.extend({addAttributes(){var o;return{...(o=this.parent)==null?void 0:o.call(this),width:{default:null,parseHTML:l=>l.getAttribute("width"),renderHTML:l=>({width:l.width})},align:{default:"center",parseHTML:l=>l.getAttribute("align"),renderHTML:l=>({align:l.align})},caption:{default:"",parseHTML:l=>l.getAttribute("data-caption"),renderHTML:l=>({"data-caption":l.caption})}}},addNodeView(){return FQe(utt)}}).configure({inline:!0}),TZe.configure({HTMLAttributes:{class:"kb-mention"},suggestion:{...ltt,char:"[[",allowSpaces:!0},addAttributes(){return{id:{default:null},anchor:{default:null,parseHTML:o=>o.getAttribute("data-anchor"),renderHTML:o=>({"data-anchor":o.anchor})},label:{default:null,parseHTML:o=>o.getAttribute("data-label"),renderHTML:o=>({"data-label":o.label})}}},renderText({node:o}){return`${o.attrs.label??o.attrs.id}`}})],content:e,editable:r,onUpdate:({editor:o})=>{t(o.getHTML())},editorProps:{attributes:{class:"h-full outline-none text-text-primary"},handlePaste:(o,l,c)=>{var f;const d=(f=l.clipboardData)==null?void 0:f.items[0];if((d==null?void 0:d.kind)==="file"){l.preventDefault();const p=d.getAsFile();return p&&s(p,o),!0}return!1},handleDrop:(o,l,c,d)=>{if(!d&&l.dataTransfer&&l.dataTransfer.files&&l.dataTransfer.files[0]){const f=l.dataTransfer.files[0];return l.preventDefault(),s(f,o),!0}return!1}}}),s=async(o,l)=>{const c=o.type.startsWith("image/"),d=Re.loading(c?"Uploading image...":"Uploading file..."),f=new FormData;f.append("file",o);try{const p=await cr.post("/api/kb/images",f,{headers:{"Content-Type":"multipart/form-data"}}),{url:m}=p.data,{schema:x}=l.state;if(c){const y=x.nodes.image.create({src:m}),b=l.state.tr.replaceSelectionWith(y);l.dispatch(b)}else{const y=x.marks.link.create({href:m}),b=x.text(` ${o.name}`,[y]),S=l.state.tr.replaceSelectionWith(b);l.dispatch(S)}Re.success("Uploaded!",{id:d})}catch(p){console.error(p),Re.error("Upload failed",{id:d})}};return u.jsxs("div",{className:`border border-border rounded-lg overflow-hidden h-full flex flex-col ${r?"bg-surface":"bg-transparent border-0"}`,children:[u.jsx("style",{children:dtt}),r&&u.jsx(ftt,{editor:a,onOpenMedia:()=>i(!0)}),u.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-6 cursor-text",onClick:()=>a==null?void 0:a.commands.focus(),children:u.jsx(SQe,{editor:a})}),n&&u.jsx(ctt,{onClose:()=>i(!1),onSelect:o=>{o.match(/\.(jpeg|jpg|gif|png|webp|svg|bmp)$/i)!=null?a==null||a.chain().focus().setImage({src:o}).run():a==null||a.chain().focus().insertContent(`<a href="${o}" target="_blank"> Attachment</a> `).run(),i(!1)}})]})},htt=({templateKey:e,onClose:t,onSave:r})=>{const[n,i]=I.useState(null),[a,s]=I.useState(""),[o,l]=I.useState(""),[c,d]=I.useState(!0),[f,p]=I.useState(!1),[m,x]=I.useState(""),[y,b]=I.useState(!1);I.useEffect(()=>{e&&S()},[e]);const S=async()=>{if(e){d(!0);try{const j=await tv.getByKey(e);i(j),s(j.subject),l(j.body_content||"<p>Start typing to override the system default...</p>")}catch(j){console.error(j)}finally{d(!1)}}},_=async()=>{if(e){p(!0);try{await tv.update(e,{subject:a,body_content:o}),r(),t()}catch(j){console.error(j),alert("Failed to save template")}finally{p(!1)}}},C=async()=>{if(confirm("Are you sure? This will delete your custom template and revert to the system default file.")&&e){p(!0);try{await tv.update(e,{subject:(n==null?void 0:n.subject)||"",body_content:null}),r(),t()}catch(j){console.error(j)}finally{p(!1)}}},A=async()=>{if(!(!m||!e))try{await tv.update(e,{subject:a,body_content:o}),await tv.sendTest(e,m),alert(`Test email sent to ${m}`),b(!1)}catch{alert("Failed to send test email")}};return e?u.jsx(od,{children:u.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6",children:[u.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),u.jsxs("div",{className:"relative w-full max-w-4xl bg-surface rounded-xl shadow-2xl flex flex-col max-h-[90vh]",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border bg-surface-highlight rounded-t-xl",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:c?"Loading...":`Edit: ${n==null?void 0:n.description}`}),u.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Customize the email content. Leave empty to use system default."})]}),u.jsx("button",{onClick:t,className:"p-2 hover:bg-black/5 rounded-full text-text-secondary",children:u.jsx(tn,{size:20})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:c?u.jsx("div",{className:"flex justify-center p-12",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Subject Line"}),u.jsx("input",{type:"text",value:a,onChange:j=>s(j.target.value),className:"w-full p-2 bg-background border border-border rounded-lg text-text-primary focus:ring-2 focus:ring-primary focus:border-transparent outline-none"})]}),(n==null?void 0:n.available_variables)&&n.available_variables.length>0&&u.jsxs("div",{className:"p-3 bg-blue-50/50 border border-blue-100 rounded-lg text-sm text-text-secondary",children:[u.jsx("span",{className:"font-semibold text-blue-600 block mb-1",children:"Available Variables:"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:n.available_variables.map(j=>u.jsx("code",{className:"px-1.5 py-0.5 bg-white border border-blue-200 rounded text-blue-800 text-xs cursor-pointer hover:bg-blue-50",onClick:()=>{navigator.clipboard.writeText(`{{${j}}}`),alert(`Copied {{${j}}} to clipboard!`)},title:"Click to copy",children:`{{${j}}}`},j))})]}),u.jsx("div",{className:"border border-border rounded-lg overflow-hidden min-h-[400px] flex flex-col",children:u.jsx(Nhe,{content:o,onChange:l,placeholder:"Write your email content here..."})})]})}),u.jsxs("div",{className:"p-4 border-t border-border bg-surface-highlight rounded-b-xl flex justify-between items-center",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:C,className:"flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Revert to original system template",children:[u.jsx(hC,{size:16}),u.jsx("span",{className:"hidden sm:inline",children:"Reset to Default"})]}),u.jsx("div",{className:"relative flex items-center",children:y?u.jsxs("div",{className:"flex items-center gap-2 bg-background border border-border rounded-lg p-1 animate-in fade-in slide-in-from-left-5",children:[u.jsx("input",{type:"email",placeholder:"your@email.com",value:m,onChange:j=>x(j.target.value),className:"text-sm bg-transparent outline-none px-2 w-48 text-text-primary"}),u.jsx("button",{onClick:A,className:"p-1.5 bg-primary text-white rounded hover:bg-primary-hover",children:u.jsx(Sy,{size:14})}),u.jsx("button",{onClick:()=>b(!1),className:"p-1.5 text-text-secondary hover:text-text-primary",children:u.jsx(tn,{size:14})})]}):u.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 px-3 py-2 text-sm text-text-secondary hover:bg-black/5 rounded-lg transition-colors",children:[u.jsx(Sy,{size:16}),u.jsx("span",{className:"hidden sm:inline",children:"Send Test"})]})})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-text-secondary hover:text-text-primary transition-colors",children:"Cancel"}),u.jsx("button",{onClick:_,disabled:f||c,className:"flex items-center gap-2 px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-hover transition-colors font-medium disabled:opacity-50",children:f?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white/30 border-t-white"}),"Saving..."]}):u.jsxs(u.Fragment,{children:[u.jsx(Cs,{size:18}),"Save Template"]})})]})]})]})]})}):null},ptt={dailyUpdateTime:"07:00",timezone:"America/New_York",pastDueReminders:{isEnabled:!1,frequencyDays:2},upcomingJobReminders:{isEnabled:!1}},mtt=["America/New_York","America/Chicago","America/Denver","America/Los_Angeles","America/Phoenix","America/Anchorage","Pacific/Honolulu"],gtt=()=>{var b;const[e,t]=I.useState(ptt),[r,n]=I.useState({emailUser:"",emailPass:""}),[i,a]=I.useState(!1),[s,o]=I.useState(!0),[l,c]=I.useState([]),[d,f]=I.useState(null);I.useEffect(()=>{(async()=>{try{const[_,C]=await Promise.all([uT("email"),uT("email_settings")]);t(A=>({...A,..._,dailyUpdateTime:_.dailyUpdateTime||A.dailyUpdateTime,timezone:_.timezone||A.timezone,pastDueReminders:{...A.pastDueReminders,..._.pastDueReminders||{}},upcomingJobReminders:{isEnabled:!1,..._.upcomingJobReminders||{}}})),n({emailUser:C.emailUser||"",emailPass:C.emailPass||""})}catch(_){console.error("Failed to fetch system email settings:",_),Kr.error("Could not load system email settings.")}finally{o(!1)}})(),p()},[]);const p=async()=>{try{const S=await tv.getAll();c(S)}catch(S){console.error("Failed to fetch email templates:",S)}},m=(S,_)=>{if(S.startsWith("pastDueReminders.")){const C=S.split(".")[1];let A=_;C==="frequencyDays"&&(A=Math.max(1,parseInt(_,10)||1)),t(j=>({...j,pastDueReminders:{...j.pastDueReminders,[C]:A}}))}else if(S.startsWith("upcomingJobReminders.")){const C=S.split(".")[1];t(A=>({...A,upcomingJobReminders:{...A.upcomingJobReminders||{isEnabled:!1},[C]:_}}))}else t(C=>({...C,[S]:_}))},x=async()=>{const S=Kr.loading("Sending test email...");try{await S8e(),Kr.success("Test email sent!",{id:S})}catch{Kr.error("Failed to send test email.",{id:S})}},y=async()=>{try{await Promise.all([y8("email",e),y8("email_settings",r)]),Kr.success("System email settings saved successfully!")}catch(S){console.error("Failed to save system email settings:",S),Kr.error("Failed to save system email settings.")}};return s?u.jsx("div",{className:"p-4 text-center text-text-secondary",children:"Loading system settings..."}):u.jsxs("section",{className:"md:bg-surface-container-low md:p-8 md:rounded-2xl md:border md:border-outline/10 max-w-5xl mx-auto transition-all",children:[u.jsxs("h2",{className:"text-2xl font-semibold text-text-primary mb-2 flex items-center gap-3",children:[u.jsx(tu,{className:"w-7 h-7 text-accent"}),"System-Wide Email Settings"]}),u.jsx("p",{className:"text-text-secondary mb-6",children:"These settings are global and affect all users and automated emails sent to customers."}),u.jsxs("div",{className:"space-y-6 pt-6 mb-8",children:[u.jsxs("h3",{className:"text-lg font-medium text-text-primary mb-2 flex items-center gap-2",children:[u.jsx(r9,{className:"w-4 h-4 text-secondary"})," SMTP Credentials (Gmail)"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Gmail Address"}),u.jsx("input",{type:"email",value:r.emailUser,onChange:S=>n(_=>({..._,emailUser:S.target.value})),placeholder:"company@gmail.com",className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-all placeholder:text-text-tertiary"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"App Password"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:i?"text":"password",value:r.emailPass,onChange:S=>n(_=>({..._,emailPass:S.target.value})),placeholder:r.emailPass==="********"?"********":"Enter App Password",className:"w-full p-3 bg-surface-container-highest border-b-2 border-transparent rounded-t-md text-text-primary focus:outline-none focus:border-primary transition-all pr-10"}),u.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-text-secondary hover:text-text-primary",children:i?u.jsx(Ooe,{size:16}):u.jsx(t9,{size:16})})]}),u.jsx("p",{className:"text-xs text-text-tertiary mt-1",children:'Use an "App Password" generated from your Google Account settings, not your login password.'})]})]}),u.jsx("div",{className:"mt-2 flex justify-end",children:u.jsxs("button",{onClick:x,type:"button",className:"text-sm flex items-center gap-2 text-primary hover:text-primary-hover font-bold bg-primary/5 hover:bg-primary/10 px-4 py-2 rounded-full transition-colors",children:[u.jsx(Sy,{size:16})," Send Test Email"]})})]}),u.jsxs("div",{className:"space-y-6 border-t border-outline/10 pt-6 mb-8",children:[u.jsxs("h3",{className:"text-lg font-medium text-text-primary mb-2 flex items-center gap-2",children:[u.jsx(gd,{className:"w-4 h-4 text-secondary"})," Company Communication Schedule"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"p-4 bg-surface-container-highest rounded-xl border border-outline/10 flex flex-col gap-2",children:[u.jsx("label",{className:"text-sm font-medium text-text-secondary",children:"Send daily updates at:"}),u.jsx("input",{type:"time",value:e.dailyUpdateTime||"07:00",onChange:S=>t(_=>({..._,dailyUpdateTime:S.target.value})),className:"p-2 bg-surface-container-low border border-outline/10 rounded-lg text-text-primary cursor-pointer w-full focus:border-primary focus:outline-none"})]}),u.jsxs("div",{className:"p-4 bg-surface-container-highest rounded-xl border border-outline/10 flex flex-col gap-2",children:[u.jsxs("label",{className:"text-sm font-medium text-text-secondary flex items-center gap-2",children:[u.jsx(ux,{size:14})," Server Timezone"]}),u.jsx("select",{value:e.timezone||"America/New_York",onChange:S=>t(_=>({..._,timezone:S.target.value})),className:"p-2 bg-surface-container-low border border-outline/10 rounded-lg text-text-primary w-full focus:border-primary focus:outline-none",children:mtt.map(S=>u.jsx("option",{value:S,children:S},S))})]})]})]}),u.jsxs("div",{className:"space-y-4 border-t border-outline/10 pt-6 mb-8",children:[u.jsx("h3",{className:"text-lg font-medium text-text-primary mb-2",children:"Customer Automations"}),u.jsxs("div",{className:"flex items-center justify-between py-4 border-b border-outline/10 md:bg-surface-container-highest md:border md:rounded-xl md:p-6 md:border-outline/10",children:[u.jsx("label",{htmlFor:"pastDueIsEnabled",className:"font-medium text-text-primary",children:"Enable Past Due Reminders"}),u.jsxs("div",{className:"relative inline-block w-14 h-8 align-middle select-none transition duration-200 ease-in",children:[u.jsx("input",{type:"checkbox",id:"pastDueIsEnabled",checked:e.pastDueReminders.isEnabled,onChange:S=>m("pastDueReminders.isEnabled",S.target.checked),className:"peer absolute block w-8 h-8 rounded-full bg-surface border-4 border-outline appearance-none cursor-pointer checked:right-0 checked:border-primary checked:bg-primary transition-all duration-200"}),u.jsx("label",{htmlFor:"pastDueIsEnabled",className:"block overflow-hidden h-8 rounded-full bg-surface-container-highest border border-outline/20 cursor-pointer peer-checked:bg-primary/20 transition-colors"})]})]}),e.pastDueReminders.isEnabled&&u.jsx("div",{className:"p-4 bg-surface-container-highest/50 rounded-xl border border-outline/10 ml-4 border-l-4 border-l-primary",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("label",{htmlFor:"pastDueFrequencyDays",className:"text-text-secondary",children:"Send reminder every"}),u.jsx("input",{type:"number",id:"pastDueFrequencyDays",value:e.pastDueReminders.frequencyDays,onChange:S=>m("pastDueReminders.frequencyDays",S.target.value),className:"w-20 p-1 bg-surface-container-low border border-outline/20 rounded text-text-primary text-center focus:border-primary focus:outline-none"}),u.jsx("label",{htmlFor:"pastDueFrequencyDays",className:"text-text-secondary",children:"days for overdue samples."})]})}),u.jsxs("div",{className:"flex items-center justify-between py-4 border-b border-outline/10 md:bg-surface-container-highest md:border md:rounded-xl md:p-6 md:border-outline/10",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("label",{htmlFor:"upcomingJobIsEnabled",className:"font-medium text-text-primary flex items-center gap-2",children:["Enable Upcoming Job Reminders ",u.jsx(Cu,{size:16,className:"text-primary"})]}),u.jsx("span",{className:"text-sm text-text-secondary mt-1",children:"Automatically emails customers 2 business days before a job starts."})]}),u.jsxs("div",{className:"relative inline-block w-14 h-8 align-middle select-none transition duration-200 ease-in",children:[u.jsx("input",{type:"checkbox",id:"upcomingJobIsEnabled",checked:((b=e.upcomingJobReminders)==null?void 0:b.isEnabled)||!1,onChange:S=>m("upcomingJobReminders.isEnabled",S.target.checked),className:"peer absolute block w-8 h-8 rounded-full bg-surface border-4 border-outline appearance-none cursor-pointer checked:right-0 checked:border-primary checked:bg-primary transition-all duration-200"}),u.jsx("label",{htmlFor:"upcomingJobIsEnabled",className:"block overflow-hidden h-8 rounded-full bg-surface-container-highest border border-outline/20 cursor-pointer peer-checked:bg-primary/20 transition-colors"})]})]})]}),u.jsxs("div",{className:"space-y-6 border-t border-outline/10 pt-6",children:[u.jsxs("h3",{className:"text-lg font-medium text-text-primary mb-2 flex items-center gap-2",children:[u.jsx(dFe,{className:"w-4 h-4 text-secondary"})," Message Templates"]}),u.jsx("p",{className:"text-sm text-text-secondary",children:"Customize the automated emails sent by the system."}),u.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[l.map(S=>u.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface-container-highest border border-outline/10 rounded-xl hover:border-primary/50 transition-colors group",children:[u.jsxs("div",{children:[u.jsx("div",{className:"font-medium text-text-primary",children:S.description}),u.jsxs("div",{className:"text-xs text-text-secondary mt-0.5",children:["Subject: ",S.subject]})]}),u.jsx("button",{onClick:()=>f(S.key),className:"px-4 py-2 text-sm font-bold text-primary bg-surface-container-low border border-outline/10 rounded-full hover:bg-primary hover:text-on-primary transition-all opacity-100 md:opacity-0 md:group-hover:opacity-100",children:"Edit"})]},S.key)),l.length===0&&u.jsx("div",{className:"text-sm text-text-secondary italic p-4 text-center",children:"No templates loaded."})]})]}),u.jsx("div",{className:"mt-8 pt-6 border-t border-outline/10 flex justify-end",children:u.jsxs("button",{onClick:y,className:"flex items-center gap-2 py-3 px-8 text-base bg-primary hover:bg-primary-hover text-on-primary rounded-full font-bold shadow-sm transition-all hover:shadow-md",children:[u.jsx(Cs,{size:18})," Save System Settings"]})}),d&&u.jsx(htt,{templateKey:d,onClose:()=>f(null),onSave:p})]})},xtt=()=>{const[e,t]=I.useState(!0),[r,n]=I.useState(!1),[i,a]=I.useState({retailMarkup:40,contractorMarkup:20,calculationMethod:"Markup"});I.useEffect(()=>{(async()=>{try{const c=await Qx();a({retailMarkup:c.retailMarkup??40,contractorMarkup:c.contractorMarkup??20,calculationMethod:c.calculationMethod??"Markup"})}catch(c){console.error("Failed to load pricing settings:",c),Re.error("Could not load pricing configuration.")}finally{t(!1)}})()},[]);const s=async()=>{n(!0);try{await E8e(i),Re.success("Pricing configuration saved.")}catch(l){console.error("Failed to save pricing:",l),Re.error("Failed to save changes.")}finally{n(!1)}},o=(l,c)=>{if(i.calculationMethod==="Markup")return(l*(1+c/100)).toFixed(2);{const d=c/100;return d>=1?"Error":(l/(1-d)).toFixed(2)}};return e?u.jsx("div",{className:"p-6 text-center text-text-secondary",children:"Loading configuration..."}):u.jsxs("section",{className:"md:bg-surface-container-low md:p-8 md:rounded-2xl md:border md:border-outline/10 max-w-4xl mx-auto transition-all",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-8 md:mb-8 pb-4 border-b border-outline/10",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-surface-container-high flex items-center justify-center text-primary",children:u.jsx(NS,{size:24,className:"text-primary"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Pricing Configuration"}),u.jsx("p",{className:"text-sm text-text-secondary",children:"Set the global defaults for product pricing."})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12",children:[u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Calculation Method"}),u.jsxs("div",{className:"flex bg-surface-container-highest p-1 rounded-full border border-outline/10",children:[u.jsx("button",{onClick:()=>a({...i,calculationMethod:"Markup"}),className:`flex-1 py-2 px-4 rounded-full text-sm font-bold transition-all ${i.calculationMethod==="Markup"?"bg-primary text-on-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,children:"Markup"}),u.jsx("button",{onClick:()=>a({...i,calculationMethod:"Margin"}),className:`flex-1 py-2 px-4 rounded-full text-sm font-bold transition-all ${i.calculationMethod==="Margin"?"bg-primary text-on-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,children:"Margin"})]}),u.jsx("p",{className:"text-xs text-text-secondary mt-2",children:i.calculationMethod==="Markup"?"Cost + (Cost  %)":"Cost  (100% - %)"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Default Retail Percentage"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"number",value:i.retailMarkup,onChange:l=>a({...i,retailMarkup:parseFloat(l.target.value)||0}),className:"w-full bg-surface-container-highest border-b-2 border-transparent rounded-t-lg py-3 pl-4 pr-10 text-text-primary focus:border-primary focus:outline-none transition-all"}),u.jsx("div",{className:"absolute right-3 top-2.5 text-text-secondary",children:u.jsx(xG,{size:16})})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Default Contractor Percentage"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"number",value:i.contractorMarkup,onChange:l=>a({...i,contractorMarkup:parseFloat(l.target.value)||0}),className:"w-full bg-surface-container-highest border-b-2 border-transparent rounded-t-lg py-3 pl-4 pr-10 text-text-primary focus:border-primary focus:outline-none transition-all"}),u.jsx("div",{className:"absolute right-3 top-2.5 text-text-secondary",children:u.jsx(xG,{size:16})})]})]}),u.jsxs("button",{onClick:s,disabled:r,className:"flex items-center justify-center w-full py-3 px-6 bg-primary hover:bg-primary-hover text-on-primary font-bold rounded-full transition-colors disabled:opacity-50 shadow-sm",children:[u.jsx(Cs,{size:18,className:"mr-2"}),r?"Saving...":"Save Configuration"]})]}),u.jsxs("div",{className:"bg-surface-container-highest rounded-2xl border border-outline/10 p-6 flex flex-col justify-center",children:[u.jsxs("h3",{className:"text-sm font-bold text-text-primary mb-4 flex items-center gap-2",children:[u.jsx(H4,{size:16,className:"text-accent"})," Live Example"]}),u.jsxs("div",{className:"space-y-6 text-sm",children:[u.jsxs("div",{className:"p-4 bg-surface-container-low rounded-xl border border-outline/10 text-center",children:[u.jsx("p",{className:"text-text-secondary mb-1",children:"If Unit Cost is:"}),u.jsx("p",{className:"text-xl font-bold text-text-primary",children:"$100.00"})]}),u.jsxs("div",{className:"space-y-6 px-4",children:[u.jsxs("div",{className:"flex justify-between items-center border-b border-outline/10 pb-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-text-secondary text-xs uppercase tracking-wider mb-1",children:"Retail Price"}),u.jsxs("p",{className:"text-xs text-text-secondary",children:[i.calculationMethod," of ",i.retailMarkup,"%"]})]}),u.jsxs("p",{className:"text-2xl font-bold text-primary",children:["$",o(100,i.retailMarkup)]})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-text-secondary text-xs uppercase tracking-wider mb-1",children:"Contractor Price"}),u.jsxs("p",{className:"text-xs text-text-secondary",children:[i.calculationMethod," of ",i.contractorMarkup,"%"]})]}),u.jsxs("p",{className:"text-2xl font-bold text-secondary",children:["$",o(100,i.contractorMarkup)]})]})]})]})]})]})]})},rQ=[{version:"Version 2.0",date:"December 27, 2025",title:"Establish Update Notifications",type:"feature",changes:["Created a system that checks in to a central location to determine if an update is available.","Users are presented with a link to update instructions.","Image downloads from Github."]},{version:"Session 34",date:"Current",title:"System Email Customization",type:"feature",changes:["Added 'Message Templates' to Settings > Communications.","Implemented a full Rich Text Editor for system emails.","Added variable support (e.g., {{customer_name}}) for dynamic content.","Created database-backed template storage with file-system fallbacks."]},{version:"Session 33",date:"Recent",title:"Connected Operating System",type:"major",changes:["Universal Search 2.0: Smart detection of products vs variants.","iCal Subscription: Sync Job/Delivery schedule to Google/Apple Calendar.","Pinned Job Notes: Highlight critical info (Gate Codes) in chat and calendar.","Dashboard Logistics: Visual 'Selected Variants' gallery and Date Ranges on cards.","Interactive Calendar Pop-ups: Preview events without page reloads."]},{version:"Session 32.5",date:"Mobile Sprint",title:"Native Android & Hardware Integration",type:"infrastructure",changes:["Native Android App (Capacitor) released.","Hardware Integration: 'Notch' handling, Safe Area layouts, and Back Button logic.","Warehouse Scanner: Rear-camera optimization, Flashlight toggle, and Laser UI.","Offline-Ready Architecture: 'Server Connect' screen for dynamic API URLs."]},{version:"Session 31",date:"Mobile Sprint",title:"Mobile UX & Calendar Overhaul",type:"feature",changes:["Mobile Agenda View: Replaced grid with a touch-friendly list for phones.","Advanced Filtering: Full-screen mobile filter for Users/Installers.","Full-Screen Sheets: Standardized modal interactions for small screens."]},{version:"Session 30",date:"Logistics Sprint",title:"Warehouse & Mobile Operations",type:"major",changes:["App-ification: Viewport locking and touch optimizations.","Receive Order 2.0: Mobile-first photo upload and file accumulation.","Mobile Dashboard: Expanded touch targets and simplified cards.","Fixed Timezone bugs causing dates to appear as 'Yesterday'."]},{version:"Session 29",date:"Workflow Sprint",title:"Advanced Logistics & Financials",type:"feature",changes:["Interest Tracking: Link specific colors to generic sample boards.","'Early Access' Jobs: Create notes/photos before a quote is accepted.","Financial Integration: Link Appointments to specific PO Numbers.","Direct Checkouts: Assign samples to Leads or Installers without a Project."]},{version:"Session 28",date:"Automation Sprint",title:"Automated Reminders & Printing",type:"feature",changes:["Automated Job Reminders: T-Minus 2 Day alerts for customers.","Team Calendar: Invite system with Accept/Decline status.","Printing Infrastructure: Unified Print Queue for labels/QR codes."]},{version:"Session 27",date:"Scheduling Sprint",title:"Robust Team Scheduling",type:"major",changes:["Fixed critical data-loss bug in Job Details save.","Event Visibility Rules: Public vs Private vs Invited.","Installer Management: Managed vs Unmanaged (Subcontractor) types."]},{version:"Session 26",date:"Data Sprint",title:"Supply Chain & Smart Forms",type:"feature",changes:["Supply Chain Logic: Auto-link Brands to Default Suppliers.","Smart Forms: Dynamic inputs for Tile (Packaging) vs Carpet (Rolls).","System Status Ticker: Real-time feedback bar in the header.","Vendor CRM: Digital footprint tracking (Portals/Websites)."]},{version:"Session 25",date:"Stability Sprint",title:"Infrastructure Repairs",type:"fix",changes:["Fixed Production File Upload paths.","Product Duplication: Deep-copy product lines and variants.","Unified Modals: Standardized Installer and Product editing.","Restored 'On-the-Fly' creation in Quick Checkout."]},{version:"Session 24",date:"Feature Sprint",title:"Knowledge Base (Wiki)",type:"major",changes:["Full CMS: Rich text editor with image resizing and tables.","Smart Linking: Use '[[' to link between articles.","Version History: 'Time Machine' to revert content changes.","Mobile-First Reading Experience."]},{version:"Session 21",date:"DevOps",title:"Zero-Config Setup",type:"infrastructure",changes:["Self-Healing Infrastructure.","First-Run Wizard for Admin setup.","Dynamic Database Initialization."]},{version:"Session 20",date:"Performance",title:"Performance Architecture",type:"infrastructure",changes:["React Query Migration: Instant cache-based navigation.","Virtualization: Rendering thousands of rows with zero lag.","Image Optimization Pipeline (Sharp)."]},{version:"Session 19",date:"Feature Sprint",title:"Intelligence & Collaboration",type:"major",changes:["Universal Import Tool: Excel/CSV parsing with column mapping.","Central Messaging: Direct Chat and Notifications.","Smart Mentions: Use @User, !Project, #Product in text.","Business Intelligence: Revenue trends and charts."]},{version:"Session 16",date:"Production",title:"Production Build",type:"infrastructure",changes:["Discontinued Samples subsystem.","Monolith Container architecture.","Hardened Backup & Restore tools."]},{version:"Session 15",date:"UI Sprint",title:"Branding & Theming",type:"feature",changes:["White-Label Engine: Custom Logo and Favicon uploads.","Theme Engine: Semantic CSS variables for Light/Dark modes.","System-wide UI refactor ('The Scrub')."]},{version:"Session 14",date:"Feature Sprint",title:"User Identity & Pricing",type:"major",changes:["User Profiles: Avatars and Name management.","Pricing Engine: Cost vs Retail with Markup/Margin logic.","Product Variants: Advanced packaging data (Cartons/SF).","Advanced Material Ordering with Unit Conversion."]},{version:"Session 13",date:"Feature Sprint",title:"Email Automation",type:"feature",changes:["Internal Daily Update emails.","Automated Customer Reminders (Due Tomorrow/Past Due).","System vs User Preference architecture split."]},{version:"Session 12",date:"Feature Sprint",title:"Calendar & Appointments",type:"major",changes:["User-Specific Calendar Colors.","Multi-Entity Attendees (Users + Installers).","Unified Calendar Filter."]},{version:"Session 11",date:"UI Sprint",title:"Project Dashboard Refactor",type:"feature",changes:["Draggable/Resizable Dashboard Widgets.","Edit Mode with user preference persistence.","Grid Layout implementation."]},{version:"Session 10",date:"Data Sprint",title:"Intelligent Sample Data",type:"major",changes:["Multi-Size Bubble Selector.","Administrative Size Management.","Massive refactor of Sample Data Model."]},{version:"Session 9",date:"UI Sprint",title:"Scheduling Refactor",type:"major",changes:["Job Appointments Table (Multi-day jobs).","Dashboard Carousels (Active Pipeline).","Installer Search."]},{version:"Session 8",date:"Security Sprint",title:"RBAC & Auditing",type:"major",changes:["Role-Based Access Control (Admin vs User).","User Management UI.","Full-Stack Auditing System.","Customer Creation validation overhaul."]},{version:"Session 7",date:"Stability Sprint",title:"Full-Stack Stabilization",type:"fix",changes:["Fixed Quote Acceptance workflow.","Solved 'Reload Loop' (Caddy/Vite websocket fix).","Unified 'On-the-Fly' creation UI."]},{version:"Session 6",date:"Auth Sprint",title:"Authentication",type:"infrastructure",changes:["Implemented SuperTokens for secure login.","Transitioned from single-user to multi-user architecture."]},{version:"Session 5",date:"Feature Sprint",title:"Vendor Management",type:"major",changes:["Dedicated Vendor Directory.","Intelligent Autofill for Orders.","Deep integration with Products and Samples."]},{version:"Session 4",date:"Ops Sprint",title:"Backup & Restore",type:"feature",changes:["Full Database Backup/Restore tools.","Image Archive handling.","Extend Checkout functionality."]},{version:"Session 3",date:"Foundational",title:"Core Architecture",type:"major",changes:["Full-Stack Refactor (Service Layer).","Quick Checkout & QR Code System.","Installation Types logic.","Mobile Responsiveness."]}],vtt={major:Uoe,feature:$oe,fix:iFe,infrastructure:pC},ytt={major:"text-on-tertiary-container bg-tertiary-container border-tertiary-container/50",feature:"text-on-secondary-container bg-secondary-container border-secondary-container/50",fix:"text-on-primary-container bg-primary-container border-primary-container/50",infrastructure:"text-text-secondary bg-surface-container-highest border-outline/50"},btt=()=>{const[e,t]=I.useState(""),r=I.useMemo(()=>{if(!e)return rQ;const n=e.toLowerCase();return rQ.filter(i=>i.title.toLowerCase().includes(n)||i.version.toLowerCase().includes(n)||i.changes.some(a=>a.toLowerCase().includes(n)))},[e]);return u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"mb-8 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"System Updates"}),u.jsx("p",{className:"text-text-secondary",children:"Track the evolution of the platform."})]}),u.jsxs("div",{className:"relative w-full md:w-80",children:[u.jsx(Yo,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-secondary",size:20}),u.jsx("input",{type:"text",placeholder:"Search changes...",value:e,onChange:n=>t(n.target.value),className:"w-full pl-12 pr-6 py-3 bg-surface-container-high border-none rounded-full text-text-primary focus:ring-2 focus:ring-primary/50 outline-none transition-shadow shadow-sm hover:shadow-md placeholder:text-text-tertiary"})]})]}),u.jsxs("div",{className:"relative border-l-2 border-outline/10 ml-3 md:ml-6 space-y-12 pb-12",children:[r.map((n,i)=>{const a=vtt[n.type]||mFe,s=i===0&&!e;return u.jsxs("div",{className:"relative pl-6 md:pl-12",children:[u.jsx("div",{className:`absolute -left-[9px] top-0 md:top-6 w-5 h-5 rounded-full border-2 border-surface flex items-center justify-center z-10 ${s?"bg-primary scale-125":"bg-surface-container-highest text-text-secondary border-outline/20"}`,children:s?u.jsx("div",{className:"w-2 h-2 bg-on-primary rounded-full animate-pulse"}):null}),u.jsxs("div",{className:`group relative transition-all md:p-6 md:rounded-2xl md:border ${s?"md:bg-surface-container-high md:border-primary/40 md:shadow-lg md:shadow-primary/10":"md:bg-surface-container-low md:border-outline/10 hover:md:border-primary/40 hover:md:shadow-md"}`,children:[u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-2 md:gap-4 mb-3 md:mb-4",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[u.jsxs("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full border capitalize flex items-center gap-1.5 ${ytt[n.type]}`,children:[u.jsx(a,{size:12}),n.type]}),u.jsx("span",{className:"text-sm font-mono text-text-tertiary",children:n.version})]}),u.jsx("h3",{className:"text-lg font-bold text-text-primary mt-1",children:n.title})]}),u.jsx("div",{className:"text-xs md:text-sm text-text-secondary font-medium bg-surface-container-highest self-start md:self-auto px-3 py-1 rounded-lg border border-outline/10",children:n.date})]}),u.jsx("ul",{className:"space-y-3 md:space-y-2 pl-1",children:n.changes.map((o,l)=>u.jsxs("li",{className:"flex items-start gap-3 text-text-secondary group-hover:text-text-primary transition-colors",children:[u.jsx("span",{className:"mt-2.5 md:mt-2 w-1.5 h-1.5 rounded-full bg-outline/30 group-hover:bg-primary shrink-0 transition-colors"}),u.jsx("span",{className:"leading-relaxed",children:o})]},l))})]})]},n.version)}),r.length===0&&u.jsx("div",{className:"pl-12 text-text-secondary italic",children:"No updates found matching your search."})]})]})},wtt=async()=>{const e=await fetch(rr("/api/media"),{headers:{"Content-Type":"application/json"}});if(!e.ok){const t=await e.json().catch(()=>({error:"Failed to fetch media assets"}));throw new Error(t.error)}return e.json()},Stt=async e=>{const t=await fetch(rr("/api/media"),{method:"POST",body:e});if(!t.ok){const r=await t.json().catch(()=>({error:"Failed to upload media asset"}));throw new Error(r.error)}return t.json()},Ett=async e=>{const t=await fetch(rr(`/api/media/${e}`),{method:"DELETE"});if(!t.ok){const r=await t.json().catch(()=>({error:"Failed to delete media asset"}));throw new Error(r.error)}},Ctt=()=>qs({queryKey:["mediaAssets"],queryFn:wtt,staleTime:1e3*60*5}),ktt=()=>{const e=$a();return Ir({mutationFn:t=>Stt(t),onSuccess:()=>{Re.success("Media asset uploaded successfully!"),e.invalidateQueries({queryKey:["mediaAssets"]})},onError:t=>{Re.error(`Upload failed: ${t.message}`)}})},_tt=()=>{const e=$a();return Ir({mutationFn:t=>Ett(t),onSuccess:()=>{Re.success("Media asset deleted."),e.invalidateQueries({queryKey:["mediaAssets"]})},onError:t=>{Re.error(`Delete failed: ${t.message}`)}})},Ntt=({asset:e})=>{const t=e.fileType.startsWith("image/"),r=e.thumbnailPath||e.filePath,n=e.usageCount===0;return u.jsxs("div",{className:"group relative aspect-square flex flex-col rounded-xl border border-outline/10 bg-surface-container-low shadow-sm transition-all hover:shadow-md hover:border-outline/50",children:[u.jsx("div",{className:"relative flex-1 overflow-hidden rounded-t-xl",children:t?u.jsx("img",{src:Ma(r),alt:e.filePath,className:"h-full w-full object-cover"}):u.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center bg-surface-container text-text-secondary",children:[u.jsx(au,{className:"h-1/3 w-1/3 opacity-50"}),u.jsx("span",{className:"mt-2 text-xs font-mono uppercase tracking-widest",children:e.fileType.split("/")[1]||"File"})]})}),u.jsxs("div",{className:"p-2 text-xs",children:[u.jsx("p",{className:"truncate font-mono text-text-secondary",title:e.filePath,children:e.filePath}),u.jsxs("p",{className:`mt-1 flex items-center gap-1.5 font-semibold ${n?"text-text-tertiary":"text-primary"}`,children:[u.jsx(Zx,{size:12}),u.jsxs("span",{children:["In Use: ",e.usageCount]})]})]})]})},Att=["branding","avatars","jobs","products","misc"],Ttt=({isOpen:e,onClose:t})=>{const[r,n]=I.useState(null),[i,a]=I.useState("misc"),[s,o]=I.useState(null),[l,c]=I.useState(!1),d=ktt(),f=S=>{if(S)if(n(S),S.type.startsWith("image/")){const _=new FileReader;_.onloadend=()=>{o(_.result)},_.readAsDataURL(S)}else o(null)},p=I.useCallback(()=>{n(null),o(null),a("misc"),d.reset()},[d]),m=()=>{p(),t()},x=async S=>{if(S.preventDefault(),!r||!i||d.isPending)return;const _=new FormData;_.append("file",r),_.append("category",i),d.mutate(_,{onSuccess:()=>{m()}})},y=(S,_)=>{S.preventDefault(),S.stopPropagation(),c(_)},b=S=>{y(S,!1),S.dataTransfer.files&&S.dataTransfer.files[0]&&f(S.dataTransfer.files[0])};return e?u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-scrim/80 p-4",children:u.jsxs("div",{className:"relative w-full max-w-lg rounded-2xl bg-surface-container-high shadow-xl border border-outline/20",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-outline/10",children:[u.jsx("h2",{className:"text-lg font-bold text-text-primary",children:"Upload New Media"}),u.jsx("button",{onClick:m,className:"rounded-full p-2 hover:bg-surface-container-highest",children:u.jsx(tn,{size:20,className:"text-text-secondary"})})]}),u.jsxs("form",{onSubmit:x,children:[u.jsxs("div",{className:"p-6 space-y-4",children:[u.jsxs("div",{onDragEnter:S=>y(S,!0),onDragLeave:S=>y(S,!1),onDragOver:S=>S.preventDefault(),onDrop:b,className:`relative flex flex-col items-center justify-center rounded-xl border-2 border-dashed p-8 text-center transition-colors
                ${l?"border-primary bg-primary/10":"border-outline/50 bg-surface-container"}`,children:[u.jsx(Ioe,{size:40,className:"text-primary"}),u.jsxs("p",{className:"mt-2 font-semibold text-text-primary",children:["Drag & drop file or"," ",u.jsxs("label",{className:"cursor-pointer text-primary underline hover:text-primary-hover",children:["browse",u.jsx("input",{type:"file",className:"hidden",onChange:S=>{var _;return f(((_=S.target.files)==null?void 0:_[0])||null)}})]})]}),u.jsx("p",{className:"text-xs text-text-secondary",children:"Any file type supported"})]}),r&&u.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-outline/20 bg-surface-container p-3",children:[u.jsx("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-md bg-surface-container-lowest",children:s?u.jsx("img",{src:s,alt:"Preview",className:"h-full w-full rounded-md object-cover"}):u.jsx(Poe,{size:24,className:"text-text-secondary"})}),u.jsxs("div",{className:"flex-1 overflow-hidden",children:[u.jsx("p",{className:"truncate font-medium text-text-primary",children:r.name}),u.jsxs("p",{className:"text-xs text-text-secondary",children:[(r.size/1024).toFixed(2)," KB"]})]}),u.jsx("button",{type:"button",onClick:()=>f(null),className:"rounded-full p-1 text-text-secondary hover:bg-surface-container-highest",children:u.jsx(tn,{size:16})})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"category",className:"mb-1 block text-sm font-medium text-text-secondary",children:"Category"}),u.jsx("select",{id:"category",value:i,onChange:S=>a(S.target.value),className:"w-full rounded-lg border border-outline/50 bg-surface-container px-3 py-2.5 text-text-primary outline-none focus:ring-2 focus:ring-primary/50",children:Att.map(S=>u.jsx("option",{value:S,className:"capitalize",children:S.charAt(0).toUpperCase()+S.slice(1)},S))})]})]}),u.jsxs("div",{className:"flex justify-end gap-3 rounded-b-2xl border-t border-outline/10 bg-surface-container p-4",children:[u.jsx("button",{type:"button",onClick:m,className:"rounded-full border border-outline px-6 py-2.5 text-sm font-semibold text-text-primary transition-colors hover:bg-surface-container-highest",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:!r||!i||d.isPending,className:"flex items-center justify-center rounded-full bg-primary px-6 py-2.5 text-sm font-semibold text-on-primary shadow-sm transition-opacity hover:bg-primary-hover disabled:cursor-not-allowed disabled:opacity-50",children:d.isPending?u.jsxs(u.Fragment,{children:[u.jsx($0,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):"Upload File"})]})]})]})}):null},Itt=({asset:e,onClose:t})=>{const{mutateAsync:r}=_tt(),n=new Date(e.createdAt).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}),i=e.filePath.split("/").pop()||"Unknown File",a=async()=>{let s=`Are you sure you want to delete this file?

This action cannot be undone.`;e.usageCount>0&&(s=` WARNING: This image is currently active in ${e.usageCount} place(s).

Deleting it will break images in those records.

Delete anyhow?`),window.confirm(s)&&(await r(e.id),t())};return u.jsxs("div",{className:`
      /* Mobile: Full Screen Overlay */
      fixed inset-0 z-[60] bg-background flex flex-col
      /* Desktop: Embedded Container (overrides fixed/inset/z-index) */
      md:static md:z-0 md:h-[700px] md:bg-surface-container-low md:rounded-2xl md:border md:border-outline-variant md:overflow-hidden
    `,children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-outline-variant bg-surface md:bg-surface-container-low",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:t,className:"p-2 -ml-2 rounded-full hover:bg-surface-container-highest transition-colors text-on-surface",children:u.jsx(hd,{size:24})}),u.jsx("h3",{className:"text-lg font-semibold text-text-primary truncate max-w-[200px] md:max-w-md",children:i})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-error-container hover:text-error transition-colors text-secondary",title:"Delete File",children:u.jsx(wo,{size:20})}),u.jsx("a",{href:Ma(e.filePath),download:!0,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full hover:bg-surface-container-highest transition-colors text-primary",title:"Open Original",children:u.jsx(fC,{size:20})})]})]}),u.jsx("div",{className:"flex-1 relative overflow-hidden bg-black/5 flex items-center justify-center p-4",children:u.jsx("img",{src:Ma(e.filePath),alt:"Preview",className:"max-w-full max-h-full object-contain shadow-lg rounded-sm"})}),u.jsx("div",{className:"bg-surface-container p-4 md:p-6 border-t border-outline-variant",children:u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-8",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-xs uppercase font-bold tracking-wider",children:[u.jsx(S8,{size:14}),"Category"]}),u.jsx("div",{className:"text-text-primary font-medium capitalize",children:e.category})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-xs uppercase font-bold tracking-wider",children:[u.jsx(pFe,{size:14}),"Type"]}),u.jsx("div",{className:"text-text-primary font-medium uppercase",children:e.fileType.replace(".","")})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-xs uppercase font-bold tracking-wider",children:[u.jsx(Ed,{size:14}),"Usage"]}),u.jsx("div",{className:"text-text-primary font-medium",children:e.usageCount===0?"Unused":`In Use (${e.usageCount})`})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-xs uppercase font-bold tracking-wider",children:[u.jsx(Cu,{size:14}),"Uploaded"]}),u.jsx("div",{className:"text-text-primary font-medium",children:n})]})]})})]})},Ott=()=>{const{data:e,isLoading:t,isError:r,error:n}=Ctt(),[i,a]=I.useState(!1),[s,o]=I.useState(null);return s?u.jsx(Itt,{asset:s,onClose:()=>o(null)}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Media Library"}),u.jsx("p",{className:"mt-1 text-text-secondary",children:"Manage all uploaded images, documents, and other files across the system."})]}),u.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 rounded-full bg-primary px-4 py-2 text-sm font-semibold text-on-primary shadow-sm transition-colors hover:bg-primary-hover",children:[u.jsx(Eb,{size:16}),"Upload Media"]})]}),t&&u.jsx("div",{className:"flex justify-center items-center h-64",children:u.jsx($0,{className:"w-8 h-8 animate-spin text-primary"})}),r&&u.jsxs("div",{className:"rounded-xl border border-error-container bg-error-container/20 p-8 text-center text-on-error-container",children:[u.jsx(xd,{className:"w-12 h-12 mx-auto"}),u.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"Could not load media assets"}),u.jsx("p",{className:"mt-2 text-sm",children:(n==null?void 0:n.message)||"An unknown error occurred."})]}),e&&u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:e.map(l=>u.jsx("div",{onClick:()=>o(l),className:"cursor-pointer transition-transform hover:scale-[1.02] active:scale-95",children:u.jsx(Ntt,{asset:l})},l.id))}),u.jsx(Ttt,{isOpen:i,onClose:()=>a(!1)})]})},Uw=[{id:"personal",label:"My Settings",tabs:[{id:"mySettings",label:"Profile",icon:MFe,adminOnly:!1},{id:"notifications",label:"Notifications",icon:kS,adminOnly:!1}]},{id:"communications",label:"Communications",tabs:[{id:"email",label:"Email Settings",icon:tu,adminOnly:!0}]},{id:"product",label:"Product Management",tabs:[{id:"pricing",label:"Pricing",icon:NS,adminOnly:!0},{id:"data",label:"Data Management",icon:fFe,adminOnly:!0}]},{id:"system",label:"System",tabs:[{id:"media",label:"Media Library",icon:of,adminOnly:!0},{id:"branding",label:"Branding",icon:Toe,adminOnly:!0},{id:"users",label:"Users",icon:hx,adminOnly:!0},{id:"backup",label:"Backup",icon:_S,adminOnly:!0},{id:"changelog",label:"What's New",icon:Loe,adminOnly:!1}]}],Ptt=()=>{var p,m;const{currentUser:e}=Xr(),t=(p=e==null?void 0:e.roles)==null?void 0:p.includes("Admin"),[r,n]=I.useState("mySettings"),i=Uw.flatMap(x=>x.tabs),a=Uw.find(x=>x.tabs.some(y=>y.id===r))||Uw[0],[s,o]=I.useState(!0);I.useEffect(()=>{const x=i.find(y=>y.id===r);x!=null&&x.adminOnly&&!t&&n("mySettings")},[t,r,i]);const l=()=>{switch(r){case"mySettings":return u.jsx(sVe,{});case"notifications":return u.jsx(fVe,{});case"email":return u.jsx(gtt,{});case"pricing":return u.jsx(xtt,{});case"branding":return u.jsx(nVe,{});case"users":return u.jsx(tVe,{});case"data":return u.jsx(oVe,{});case"backup":return u.jsx(aVe,{});case"changelog":return u.jsx(btt,{});case"media":return u.jsx(Ott,{});default:return null}},c=x=>{n(x),o(!1),window.scrollTo({top:0,behavior:"smooth"})},d=()=>{o(!0)},f=(m=i.find(x=>x.id===r))==null?void 0:m.label;return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"px-1 flex items-center gap-4",children:[u.jsx("button",{onClick:d,className:`md:hidden p-2 -ml-2 rounded-full hover:bg-surface-container-highest transition-colors ${s?"hidden":"block"}`,children:u.jsx(hd,{className:"w-6 h-6 text-text-primary"})}),u.jsx("div",{className:`w-12 h-12 bg-primary-container rounded-full flex items-center justify-center flex-shrink-0 text-primary ${s?"flex":"hidden md:flex"}`,children:u.jsx(pC,{className:"w-6 h-6"})}),u.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-text-primary tracking-tight",children:s?"Settings":f})]}),u.jsxs("div",{className:"hidden md:block space-y-6",children:[u.jsx("div",{className:"flex border-b border-outline/10 overflow-x-auto",children:Uw.map(x=>{const y=x.tabs.filter(S=>!S.adminOnly||t);if(y.length===0)return null;const b=a.id===x.id;return u.jsx("button",{onClick:()=>n(y[0].id),className:`px-6 py-3 text-sm font-bold uppercase tracking-wider transition-colors whitespace-nowrap border-b-2 mb-[-2px]
                                    ${b?"text-primary border-primary":"text-text-secondary border-transparent hover:text-text-primary hover:border-outline/20"}`,children:x.label},x.id)})}),u.jsx("div",{className:"flex flex-wrap gap-2",children:a.tabs.map(x=>{if(x.adminOnly&&!t)return null;const y=r===x.id,b=x.icon;return u.jsxs("button",{onClick:()=>n(x.id),className:`flex items-center px-5 py-2 rounded-full text-sm font-medium transition-colors border shadow-sm
                                    ${y?"bg-primary text-on-primary border-transparent":"bg-surface-container-high text-text-secondary border-outline/10 hover:border-primary/50 hover:text-text-primary"}
                                `,children:[b&&u.jsx(b,{className:"w-4 h-4 mr-2"}),x.label]},x.id)})})]}),u.jsx("div",{className:`md:hidden space-y-6 ${s?"block":"hidden"}`,children:Uw.map(x=>{const y=x.tabs.filter(b=>!b.adminOnly||t);return y.length===0?null:u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"px-4 text-xs font-bold text-primary uppercase tracking-wider",children:x.label}),u.jsx("div",{className:"bg-surface-container-low rounded-2xl overflow-hidden shadow-sm border border-outline/10 divide-y divide-outline/10",children:y.map(b=>{const S=b.icon;return u.jsxs("button",{onClick:()=>c(b.id),className:"w-full flex items-center p-4 hover:bg-surface-container-highest transition-colors active:bg-primary/5",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-surface-container flex items-center justify-center mr-4 text-primary",children:S&&u.jsx(S,{className:"w-5 h-5"})}),u.jsx("span",{className:"flex-1 text-left text-base font-medium text-text-primary",children:b.label}),u.jsx(md,{className:"w-5 h-5 text-outline/40"})]},b.id)})})]},x.id)})}),u.jsx("div",{className:`
                bg-surface-container-high rounded-2xl shadow-sm overflow-hidden border border-outline/10 min-h-[400px]
                ${s?"hidden md:block":"block"}
            `,children:u.jsx("div",{className:"p-4 md:p-8",children:u.jsx(l,{})})})]})},Rtt=()=>{const{data:e=[]}=F4(),{vendors:t}=Xr(),r=U6e(),[n,i]=I.useState(!1),[a,s]=I.useState(null),[o,l]=I.useState(""),c=I.useMemo(()=>{if(!o)return e;const m=o.toLowerCase();return e.filter(x=>x.name.toLowerCase().includes(m)||x.repName&&x.repName.toLowerCase().includes(m))},[e,o]),d=m=>{s(null),i(!0)},f=()=>{s(null),i(!1)},p=async m=>{try{if("id"in m){const{id:x,...y}=m;await r.updateVendor.mutateAsync({id:x,data:y}),Re.success("Vendor updated successfully!")}else await r.addVendor.mutateAsync(m),Re.success("Vendor added successfully!");f()}catch(x){console.error("Failed to save vendor:",x),Re.error(x.message||"Failed to save vendor.")}};return u.jsxs("div",{className:"container mx-auto",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 px-1 mb-8",children:[u.jsx("h1",{className:"text-4xl font-bold text-text-primary tracking-tight",children:"Vendor Directory"}),u.jsxs("button",{onClick:()=>d(),className:"flex items-center gap-2 bg-primary hover:bg-primary-hover text-on-primary font-semibold py-3 px-6 rounded-full transition-all shadow-lg hover:shadow-xl",children:[u.jsx(hu,{size:20}),"Add Vendor"]})]}),u.jsxs("div",{className:"relative w-full max-w-2xl mb-8",children:[u.jsx(Yo,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-secondary",size:20}),u.jsx("input",{type:"text",placeholder:"Search by vendor name or rep name...",value:o,onChange:m=>l(m.target.value),className:"w-full pl-12 pr-6 py-4 bg-surface-container-high border-none rounded-full text-text-primary focus:ring-2 focus:ring-primary/50 outline-none transition-shadow shadow-sm hover:shadow-md placeholder:text-text-tertiary"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(m=>{var x;return u.jsx(ui,{to:`/vendors/${m.id}`,className:"bg-surface-container-high rounded-xl shadow-sm border border-outline/10 p-6 flex flex-col justify-between hover:shadow-md transition-all duration-200 group",children:u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary mb-2 group-hover:text-primary truncate flex-1 pr-2 transition-colors",children:m.name}),u.jsxs("div",{className:"flex gap-1",children:[m.portalUrl&&u.jsx("a",{href:m.portalUrl,target:"_blank",rel:"noopener noreferrer",onClick:y=>y.stopPropagation(),className:"p-1.5 text-text-tertiary hover:text-primary hover:bg-primary-container rounded-full transition-colors",title:"Open Dealer Portal",children:u.jsx(Zx,{size:16})}),m.websiteUrl&&u.jsx("a",{href:m.websiteUrl,target:"_blank",rel:"noopener noreferrer",onClick:y=>y.stopPropagation(),className:"p-1.5 text-text-tertiary hover:text-primary hover:bg-primary-container rounded-full transition-colors",title:"Open Website",children:u.jsx(ux,{size:16})})]})]}),u.jsxs("div",{className:"flex items-center flex-wrap gap-2 text-sm text-text-secondary mb-5",children:[(m.vendorType==="Manufacturer"||m.vendorType==="Both")&&u.jsxs("span",{className:"flex items-center gap-1.5 bg-surface-container px-2 py-1 rounded-md border border-outline/10",children:[u.jsx(cx,{size:14})," Manufacturer"]}),(m.vendorType==="Supplier"||m.vendorType==="Both")&&u.jsxs("span",{className:"flex items-center gap-1.5 bg-surface-container px-2 py-1 rounded-md border border-outline/10",children:[u.jsx(z0,{size:14})," Supplier"]}),(m.vendorType==="Manufacturer"||m.vendorType==="Both")&&u.jsxs("span",{className:"flex items-center gap-1.5 bg-primary-container text-primary px-2 py-0.5 rounded-full text-xs font-bold ml-auto",children:[u.jsx(Ed,{size:12})," ",m.sampleCount||0," Samples"]})]}),m.defaultSupplierId&&u.jsxs("div",{className:"mb-4 text-sm text-text-secondary bg-surface-container-low p-3 rounded-lg border border-outline/5",children:["Distributor: ",u.jsx("span",{className:"font-medium text-text-primary",children:(x=t.find(y=>y.id===m.defaultSupplierId))==null?void 0:x.name})]}),u.jsx("p",{className:"text-sm text-text-secondary mb-1",children:m.address}),u.jsx("p",{className:"text-sm text-text-secondary",children:m.phone}),(m.repName||m.repPhone)&&u.jsxs("div",{className:"mt-4 pt-4 border-t border-outline/10",children:[u.jsx("p",{className:"font-semibold text-text-primary",children:m.repName}),u.jsx("p",{className:"text-sm text-text-secondary",children:m.repPhone})]})]})},m.id)})}),c.length===0&&u.jsx("div",{className:"text-center py-10 col-span-full",children:u.jsx("p",{className:"text-text-secondary",children:o?"No vendors match your search.":"No vendors found."})}),u.jsx(kb,{isOpen:n,onClose:f,onSave:p,vendorToEdit:a})]})},jtt=({vendor:e})=>u.jsxs(ui,{to:`/vendors/${e.id}`,className:"block bg-surface p-4 rounded-lg shadow-md hover:shadow-lg hover:bg-background border border-border transition-all duration-300 w-80 flex-shrink-0",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsx("h3",{className:"font-bold text-lg text-text-primary truncate pr-2",children:e.name}),u.jsx(md,{className:"w-5 h-5 text-accent flex-shrink-0"})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs text-text-secondary mb-3",children:[e.vendorType==="Manufacturer"&&u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(cx,{size:12})," Manufacturer"]}),e.vendorType==="Both"&&u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(cx,{size:12})," Mfg & Dist"]}),u.jsxs("span",{className:"flex items-center gap-1 bg-background/50 px-2 py-0.5 rounded-full border border-border",children:[u.jsx(Ed,{size:12})," ",e.sampleCount||0," Products"]})]}),u.jsxs("div",{className:"text-sm text-text-secondary space-y-1",children:[u.jsx("p",{className:"truncate",children:e.repName||"No Rep Listed"}),u.jsx("p",{className:"truncate",children:e.phone||e.orderingEmail||"No Contact Info"})]})]}),Dtt=({title:e,vendors:t})=>t.length===0?null:u.jsxs("div",{className:"mb-8",children:[u.jsx("h2",{className:"text-xl font-bold mb-4 text-text-primary",children:e}),u.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 scrollbar-thin scrollbar-thumb-border scrollbar-track-transparent",children:t.map(r=>u.jsx(jtt,{vendor:r},r.id))})]}),Mtt=()=>{const{vendorId:e}=jx(),{vendors:t,products:r,isLoading:n,updateVendor:i}=Xr(),[a,s]=I.useState(null),[o,l]=I.useState(""),[c,d]=I.useState("All"),[f,p]=I.useState(null),[m,x]=I.useState(!1),[y,b]=I.useState(!1);I.useEffect(()=>{Qx().then(s).catch(console.error)},[]);const S=I.useMemo(()=>t.find(z=>z.id===parseInt(e||"")),[t,e]),_=I.useMemo(()=>S!=null&&S.defaultSupplierId?t.find(z=>z.id===S.defaultSupplierId):null,[S,t]),C=I.useMemo(()=>t.filter(z=>z.defaultSupplierId===(S==null?void 0:S.id)),[S,t]),A=I.useMemo(()=>S?r.filter(z=>z.manufacturerId===S.id):[],[S,r]),j=I.useMemo(()=>{let z=A;if(c!=="All"&&(z=z.filter(ie=>ie.productType===c)),o){const ie=o.toLowerCase();z=z.filter(X=>{const W=X.name.toLowerCase().includes(ie),Q=X.variants.some(te=>te.name&&te.name.toLowerCase().includes(ie)||te.sku&&te.sku.toLowerCase().includes(ie));return W||Q})}return z},[A,c,o]),P=I.useMemo(()=>[...new Set(A.map(z=>z.productType).filter(Boolean))].sort(),[A]),O=z=>{p(z),x(!0)},D=()=>{p(null),x(!1)},L=async z=>{try{await i(z),Re.success("Vendor updated successfully!"),b(!1)}catch(ie){console.error("Failed to save vendor:",ie),Re.error(ie.message||"Failed to save vendor.")}};if(n)return u.jsx("div",{className:"text-center p-8 text-text-secondary",children:"Loading vendor details..."});if(!S)return u.jsx("div",{className:"text-center p-8 text-text-secondary",children:"Vendor not found."});const B=S.vendorType==="Manufacturer"||S.vendorType==="Both",H=S.vendorType==="Supplier"||S.vendorType==="Both";return u.jsxs("div",{className:"container mx-auto space-y-8",children:[u.jsx("div",{className:"bg-surface-container-high p-8 rounded-xl shadow-sm border border-outline/10",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:S.name}),u.jsxs("div",{className:"flex items-center flex-wrap gap-x-4 gap-y-2 text-sm text-text-secondary mt-2 font-medium",children:[B&&u.jsxs("span",{className:"flex items-center gap-2 px-3 py-1 rounded-full bg-surface-container border border-outline/10",children:[u.jsx(cx,{size:14})," Manufacturer"]}),H&&u.jsxs("span",{className:"flex items-center gap-2 px-3 py-1 rounded-full bg-surface-container border border-outline/10",children:[u.jsx(z0,{size:14})," Supplier"]})]})]}),u.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 bg-primary-container hover:bg-primary text-primary hover:text-on-primary font-semibold py-2 px-6 rounded-full transition-all shadow-sm",children:[u.jsx(ip,{size:18}),"Edit Vendor"]})]})}),H&&C.length>0&&u.jsx(Dtt,{title:"Supplied Manufacturers",vendors:C}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:[u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-xl border border-outline/10 shadow-sm",children:[u.jsx("h3",{className:"font-semibold text-xl mb-4 text-text-primary",children:"Contact Information"}),u.jsxs("div",{className:"space-y-3 text-text-secondary",children:[u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Address:"})," ",S.address||"N/A"]}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(I0,{size:14})," ",S.phone||"N/A"]}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(tu,{size:14})," Ordering: ",S.orderingEmail||"N/A"]}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(tu,{size:14})," Claims: ",S.claimsEmail||"N/A"]}),(S.websiteUrl||S.portalUrl)&&u.jsxs("div",{className:"pt-2 mt-2 border-t border-outline/10 space-y-2",children:[S.websiteUrl&&u.jsxs("a",{href:S.websiteUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-primary hover:underline font-medium",children:[u.jsx(ux,{size:14})," Website"]}),S.portalUrl&&u.jsxs("a",{href:S.portalUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-primary hover:underline font-medium",children:[u.jsx(Zx,{size:14})," Dealer Portal"]})]})]})]}),u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-xl border border-outline/10 shadow-sm",children:[u.jsx("h3",{className:"font-semibold text-xl mb-4 text-text-primary",children:"Sales Representative"}),u.jsxs("div",{className:"space-y-3 text-text-secondary",children:[u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(pc,{size:14})," ",S.repName||"N/A"]}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(I0,{size:14})," ",S.repPhone||"N/A"]}),u.jsxs("p",{className:"flex items-center gap-2",children:[u.jsx(tu,{size:14})," ",S.repEmail||"N/A"]})]})]}),u.jsxs("div",{className:"bg-surface-container-high p-6 rounded-xl border border-outline/10 shadow-sm",children:[u.jsx("h3",{className:"font-semibold text-xl mb-4 text-text-primary",children:"Other Details"}),u.jsxs("div",{className:"space-y-3 text-text-secondary",children:[u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Shipping:"})," ",S.shippingMethod||"N/A"]}),_&&u.jsxs("div",{className:"mt-2 p-4 bg-surface-container-low border border-outline/5 rounded-lg",children:[u.jsx("p",{className:"text-xs text-text-tertiary uppercase font-bold mb-1",children:"Fulfilled By"}),u.jsx("p",{className:"text-text-primary font-bold",children:_.name}),_.phone&&u.jsxs("p",{className:"text-sm flex items-center gap-1 mt-1",children:[u.jsx(I0,{size:12})," ",_.phone]}),_.orderingEmail&&u.jsxs("p",{className:"text-sm flex items-center gap-1",children:[u.jsx(tu,{size:12})," ",_.orderingEmail]})]}),u.jsxs("p",{children:[u.jsx("strong",{className:"text-text-primary",children:"Notes:"})," ",S.notes||"N/A"]})]})]})]}),B&&u.jsxs("div",{children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 border-t border-outline/10 pt-8",children:[u.jsxs("h2",{className:"text-3xl font-bold text-text-primary mb-4 md:mb-0",children:["Product Lines (",j.length,")"]}),u.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[u.jsxs("div",{className:"relative flex-grow min-w-[300px]",children:[u.jsx(Yo,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-secondary",size:18}),u.jsx("input",{type:"text",placeholder:"Search style or color...",value:o,onChange:z=>l(z.target.value),className:"w-full bg-surface-container-high border-none rounded-full py-3 pl-12 pr-6 focus:outline-none focus:ring-2 focus:ring-primary/50 shadow-sm"})]}),u.jsxs("select",{value:c,onChange:z=>d(z.target.value),className:"bg-surface-container-high border-none rounded-full py-3 px-6 focus:outline-none focus:ring-2 focus:ring-primary/50 shadow-sm text-text-primary font-medium cursor-pointer",children:[u.jsx("option",{value:"All",children:"All Product Types"}),P.map(z=>u.jsx("option",{value:z,children:z},z))]})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:j.map(z=>u.jsx(gue,{product:z,pricingSettings:a,onClick:O},z.id))}),j.length===0&&A.length>0&&u.jsx("p",{className:"text-center text-text-secondary py-8 col-span-full",children:"No products match your current filters."})]}),m&&f&&u.jsx(J9,{isOpen:m,onClose:D,product:f}),y&&S&&u.jsx(kb,{isOpen:y,onClose:()=>b(!1),onSave:L,vendorToEdit:S})]})},Ftt=({isOpen:e,onClose:t,order:r,onReceive:n,onReportDamage:i})=>{const[a,s]=I.useState("RECEIVE"),[o,l]=I.useState(!1),[c,d]=I.useState(""),[f,p]=I.useState(""),[m,x]=I.useState(!0),[y,b]=I.useState([]),[S,_]=I.useState(new Set),[C,A]=I.useState(""),[j,P]=I.useState("");if(I.useEffect(()=>{e&&(s("RECEIVE"),d(new Date().toISOString().split("T")[0]),p(""),x(!0),_(new Set),A(""),P(""),b([]),l(!1))},[e,r]),!e||!r)return null;const O=r.purchaserType==="Installer"?r.installerEmail?r.installerName:null:r.customerEmail?r.customerName:null,D=!!(r.purchaserType==="Installer"&&r.installerEmail||r.purchaserType==="Customer"&&r.customerEmail),L=X=>{const W=new Set(S);W.has(X)?W.delete(X):W.add(X),_(W)},B=X=>{X.target.files&&X.target.files.length>0&&b(W=>[...W,...Array.from(X.target.files)])},H=X=>{b(W=>W.filter((Q,te)=>te!==X))},z=async X=>{X.preventDefault(),l(!0);try{await n(r.id,{dateReceived:c,notes:f,sendEmailNotification:D&&m,files:y}),t()}catch(W){console.error(W),l(!1)}},ie=async X=>{if(X.preventDefault(),S.size===0)return alert("Please select at least one damaged item.");l(!0);const W=r.lineItems.filter(Q=>S.has(Q.id)).map(Q=>({sampleId:Q.variantId,quantity:Q.quantity,unit:Q.unit||"SF"}));try{await i(r.id,{items:W,replacementEta:C,notes:j,sendEmailNotification:D&&m,files:y}),t()}catch(Q){console.error(Q),l(!1)}};return u.jsx("div",{className:"fixed inset-0 bg-scrim/60 z-50 overflow-y-auto",children:u.jsx("div",{className:"flex min-h-full items-center justify-center p-0 lg:p-4",children:u.jsxs("div",{className:"bg-surface-container-high w-full h-full lg:h-auto lg:max-h-[90vh] lg:max-w-lg lg:rounded-2xl shadow-2xl flex flex-col border border-outline/20 relative",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center lg:rounded-t-2xl sticky top-0 z-10 bg-surface-container-high",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[a==="DAMAGE"?u.jsx(xd,{className:"text-error w-6 h-6"}):u.jsx(z0,{className:"text-primary w-6 h-6"}),u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:a==="DAMAGE"?"Report Damage":"Receive Order"})]}),u.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-surface-container-highest text-text-secondary hover:text-text-primary",children:u.jsx(tn,{size:24})})]}),u.jsxs("div",{className:"p-6 overflow-y-auto flex-grow",children:[a==="RECEIVE"&&u.jsxs("form",{id:"receive-form",onSubmit:z,className:"space-y-4",children:[u.jsxs("p",{className:"text-sm text-text-secondary mb-4",children:["Mark this order as arrived. This will update the status to ",u.jsx("strong",{children:"Received"}),"."]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Date Received"}),u.jsx("input",{type:"date",required:!0,value:c,onChange:X=>d(X.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Notes (Optional)"}),u.jsx("textarea",{value:f,onChange:X=>p(X.target.value),placeholder:"e.g. Left in garage, Box 2 looks slightly crushed...",className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary h-24 resize-none placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Paperwork (Packing Slip / BOL)"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("label",{className:"border border-outline/20 bg-surface-container hover:bg-surface-container-highest rounded-xl p-4 flex flex-col items-center justify-center cursor-pointer transition-colors shadow-sm",children:[u.jsx("input",{type:"file",multiple:!0,accept:".pdf, .png, .jpg, .jpeg",className:"hidden",onChange:B}),u.jsx(S8,{className:"w-6 h-6 text-primary mb-2"}),u.jsx("span",{className:"text-xs font-bold text-text-primary",children:"Upload Files"})]}),u.jsxs("label",{className:"border border-outline/20 bg-surface-container hover:bg-surface-container-highest rounded-xl p-4 flex flex-col items-center justify-center cursor-pointer transition-colors shadow-sm",children:[u.jsx("input",{type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:B}),u.jsx(jv,{className:"w-6 h-6 text-primary mb-2"}),u.jsx("span",{className:"text-xs font-bold text-text-primary",children:"Take Photo"})]})]}),y.length>0&&u.jsx("div",{className:"bg-surface-container border border-outline/20 rounded-xl p-2 space-y-2",children:y.map((X,W)=>u.jsxs("div",{className:"flex items-center justify-between p-2 bg-surface-container-highest rounded-lg shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[X.type.startsWith("image/")?u.jsx("img",{src:URL.createObjectURL(X),alt:"Preview",className:"w-8 h-8 object-cover rounded-md"}):u.jsx(au,{className:"w-8 h-8 text-text-tertiary"}),u.jsx("span",{className:"text-xs font-medium truncate max-w-[150px] md:max-w-[200px]",children:X.name})]}),u.jsx("button",{type:"button",onClick:()=>H(W),className:"text-text-tertiary hover:text-error",children:u.jsx(tn,{size:16})})]},W))})]}),D&&u.jsxs("button",{type:"button",onClick:()=>x(!m),className:`w-full text-left p-4 rounded-lg border-2 transition-all flex items-center gap-4 group ${m?"border-primary bg-primary-container/30":"border-outline/20 bg-surface-container hover:bg-surface-container-highest"}`,children:[u.jsx("div",{className:`p-2 rounded-full ${m?"bg-primary text-on-primary":"bg-secondary-container text-on-secondary-container"}`,children:m?u.jsx(tu,{size:24}):u.jsx(gG,{size:24})}),u.jsxs("div",{children:[u.jsx("p",{className:`font-bold ${m?"text-primary":"text-text-secondary"}`,children:m?"Sending Email Notification":"Email Notification Disabled"}),u.jsx("p",{className:"text-sm text-text-secondary",children:m?`Will notify ${O}`:`Click to enable notification for ${O}`})]})]}),u.jsx("div",{className:"pt-4 flex items-center justify-between",children:u.jsxs("button",{type:"button",onClick:()=>s("DAMAGE"),className:"text-error hover:bg-error-container/30 text-sm font-semibold flex items-center gap-1 px-2 py-1 rounded-full transition-colors",children:[u.jsx(xd,{size:16}),"Report Damage?"]})})]}),a==="DAMAGE"&&u.jsxs("form",{id:"damage-form",onSubmit:ie,className:"space-y-4",children:[u.jsxs("div",{className:"bg-surface-container border border-outline/20 p-3 rounded-xl text-sm text-text-secondary mb-4",children:["This will mark the current order as ",u.jsx("strong",{children:"Received"})," and create a new ",u.jsx("strong",{children:"Replacement Order"})," for the selected items."]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Which items are damaged?"}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border border-outline/20 rounded-xl p-2 bg-surface-container",children:r.lineItems.map(X=>u.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-surface-container-highest rounded-lg cursor-pointer group",children:[u.jsx("input",{type:"checkbox",checked:S.has(X.id),onChange:()=>L(X.id),className:"form-checkbox h-4 w-4 text-primary bg-surface-container-low border-outline/50 rounded-sm focus:ring-primary"}),u.jsxs("div",{className:"text-sm",children:[u.jsxs("span",{className:"font-medium text-text-primary",children:[X.quantity," ",X.unit]}),u.jsx("span",{className:"text-text-secondary mx-2",children:"-"}),u.jsxs("span",{className:"text-text-secondary",children:[X.style," ",X.color?`(${X.color})`:""]})]})]},X.id))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Replacement ETA"}),u.jsx("input",{type:"date",required:!0,value:C,onChange:X=>A(X.target.value),className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Damage Notes"}),u.jsx("textarea",{required:!0,value:j,onChange:X=>P(X.target.value),placeholder:"Describe the damage...",className:"w-full bg-surface-container border border-outline/50 rounded-lg px-4 py-2.5 text-text-primary h-20 resize-none placeholder:text-text-tertiary focus:ring-2 focus:ring-primary/50 outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Damage Photos / Evidence"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[u.jsxs("label",{className:"border border-error-container bg-error-container/30 hover:bg-error-container/50 rounded-xl p-4 flex flex-col items-center justify-center cursor-pointer transition-colors shadow-sm",children:[u.jsx("input",{type:"file",multiple:!0,accept:".pdf, .png, .jpg, .jpeg",className:"hidden",onChange:B}),u.jsx(S8,{className:"w-6 h-6 text-error mb-2"}),u.jsx("span",{className:"text-xs font-bold text-on-error-container",children:"Upload Files"})]}),u.jsxs("label",{className:"border border-error-container bg-error-container/30 hover:bg-error-container/50 rounded-xl p-4 flex flex-col items-center justify-center cursor-pointer transition-colors shadow-sm",children:[u.jsx("input",{type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:B}),u.jsx(jv,{className:"w-6 h-6 text-error mb-2"}),u.jsx("span",{className:"text-xs font-bold text-on-error-container",children:"Take Photo"})]})]}),y.length>0&&u.jsx("div",{className:"bg-surface-container border border-outline/20 rounded-xl p-2 space-y-2",children:y.map((X,W)=>u.jsxs("div",{className:"flex items-center justify-between p-2 bg-surface-container-highest rounded-lg shadow-sm border-l-2 border-error",children:[u.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[X.type.startsWith("image/")?u.jsx("img",{src:URL.createObjectURL(X),alt:"Preview",className:"w-8 h-8 object-cover rounded-md"}):u.jsx(au,{className:"w-8 h-8 text-text-tertiary"}),u.jsx("span",{className:"text-xs font-medium truncate max-w-[150px] md:max-w-[200px]",children:X.name})]}),u.jsx("button",{type:"button",onClick:()=>H(W),className:"text-text-tertiary hover:text-error",children:u.jsx(tn,{size:16})})]},W))})]}),D&&u.jsxs("button",{type:"button",onClick:()=>x(!m),className:`w-full text-left p-4 rounded-lg border-2 transition-all flex items-center gap-4 group ${m?"border-error bg-error-container/30":"border-outline/20 bg-surface-container hover:bg-surface-container-highest"}`,children:[u.jsx("div",{className:`p-2 rounded-full ${m?"bg-error text-on-error":"bg-secondary-container text-on-secondary-container"}`,children:m?u.jsx(tu,{size:24}):u.jsx(gG,{size:24})}),u.jsxs("div",{children:[u.jsx("p",{className:`font-bold ${m?"text-error":"text-text-secondary"}`,children:m?"Sending Damage Alert":"Alert Disabled"}),u.jsx("p",{className:"text-sm text-text-secondary",children:m?`Will notify ${O}`:`Click to enable alert for ${O}`})]})]})]})]}),u.jsx("div",{className:"p-4 border-t border-outline/10 bg-surface-container-high lg:rounded-b-2xl flex justify-end gap-3 shrink-0 sticky bottom-0 z-10 lg:static",children:a==="DAMAGE"?u.jsxs(u.Fragment,{children:[u.jsxs("button",{type:"button",onClick:()=>s("RECEIVE"),className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors flex items-center gap-2",children:[u.jsx(hd,{size:16})," Back"]}),u.jsx("button",{form:"damage-form",type:"submit",disabled:o,className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all disabled:opacity-50",children:o?"Processing...":"Submit Damage Report"})]}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:t,type:"button",className:"py-2.5 px-6 rounded-full border border-outline text-text-primary hover:bg-surface-container-highest transition-colors",children:"Cancel"}),u.jsxs("button",{form:"receive-form",type:"submit",disabled:o,className:"py-3 px-6 rounded-full bg-primary hover:bg-primary-hover text-on-primary font-semibold shadow-md transition-all flex items-center gap-2 disabled:opacity-50",children:[u.jsx(W4,{size:18}),o?"Receiving...":"Mark as Received"]})]})})]})})})},Ltt=()=>{const{data:e=[]}=np(),{data:t=[]}=U4(),r=$4(),[n,i]=I.useState(""),[a,s]=I.useState(null),[o,l]=I.useState(!1),[c,d]=I.useState(null),[f,p]=I.useState(null),[m,x]=I.useState(!1),[y,b]=I.useState(new Set),S=D=>{b(L=>{const B=new Set(L);return B.has(D)?B.delete(D):B.add(D),B})},_=I.useMemo(()=>{const D=[],L=new Map;return t.forEach(B=>{var H;L.has(B.projectId)||L.set(B.projectId,[]),(H=L.get(B.projectId))==null||H.push(B)}),e.forEach(B=>{let H=L.get(B.id)||[];m||(H=H.filter(ie=>ie.status==="Ordered"||ie.status==="Damage Replacement"));const z=!n||B.projectName.toLowerCase().includes(n.toLowerCase())||H.some(ie=>{var X;return(X=ie.supplierName)==null?void 0:X.toLowerCase().includes(n.toLowerCase())});H.length>0&&z&&D.push({project:B,orders:H.sort((ie,X)=>new Date(X.orderDate).getTime()-new Date(ie.orderDate).getTime())})}),D.sort((B,H)=>{const z=B.orders.some(X=>X.status==="Ordered"),ie=H.orders.some(X=>X.status==="Ordered");return z&&!ie?-1:!z&&ie?1:0})},[e,t,n,m]),C=D=>{s(D)},A=D=>{d(D.id),l(!0)},j=()=>{d(null),l(!0)},P=async(D,L)=>{await r.receiveMaterialOrder({id:D,data:L})},O=async(D,L)=>{await r.reportMaterialOrderDamage({id:D,data:L})};return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 px-1",children:[u.jsxs("div",{children:[u.jsxs("h1",{className:"text-4xl font-bold text-text-primary tracking-tight flex items-center gap-3",children:[u.jsx(z0,{className:"text-primary w-8 h-8"})," Order Dashboard"]}),u.jsx("p",{className:"text-text-secondary text-sm mt-1 ml-11 font-medium",children:"Track, receive, and manage material orders."})]}),u.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full md:w-auto mt-4 md:mt-0",children:[u.jsxs("button",{onClick:()=>x(!m),className:"w-full md:w-auto justify-center bg-surface-container-high border border-outline/10 hover:bg-surface-container-highest text-text-secondary font-medium py-3 px-6 rounded-full flex items-center gap-2 transition-colors",children:[m?u.jsx(Ooe,{size:20}):u.jsx(t9,{size:20}),m?"Hide Received":"Show Received"]}),u.jsxs("button",{onClick:j,className:"w-full md:w-auto justify-center bg-primary hover:bg-primary-hover text-on-primary font-semibold py-3 px-6 rounded-full flex items-center gap-2 shadow-lg hover:shadow-xl transition-all",children:[u.jsx(ac,{size:20})," New Order"]})]})]}),u.jsxs("div",{className:"relative w-full max-w-2xl",children:[u.jsx(Yo,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-text-secondary",size:20}),u.jsx("input",{type:"text",placeholder:"Search projects or suppliers...",value:n,onChange:D=>i(D.target.value),className:"w-full pl-12 pr-6 py-4 bg-surface-container-high border-none rounded-full text-text-primary focus:ring-2 focus:ring-primary/50 outline-none transition-shadow shadow-sm hover:shadow-md placeholder:text-text-tertiary"})]}),_.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-text-secondary",children:[u.jsx(dx,{size:48,className:"mb-4 opacity-50"}),u.jsx("p",{className:"text-lg font-medium",children:"No active orders found."}),u.jsx("p",{className:"text-sm",children:"Create a material order from a Job Detail page to see it here."})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:_.map(({project:D,orders:L})=>{var W;const B=y.has(D.id),H=B?L:L.slice(0,2),z=L.length-H.length,X=`${((W=L[0])==null?void 0:W.customerName)||"N/A"}'s Project`;return u.jsxs("div",{className:"bg-surface-container-high border border-outline/10 rounded-xl shadow-sm flex flex-col transition-all duration-200 hover:shadow-md",children:[u.jsxs("div",{className:"p-5 border-b border-outline/10 flex justify-between items-start bg-surface-container-low rounded-t-xl",children:[u.jsxs("div",{className:"min-w-0 pr-2",children:[u.jsx(ui,{to:`/projects/${D.id}`,className:"font-bold text-xl text-primary hover:text-primary-hover hover:underline truncate block",title:"View Project",children:X}),u.jsx("p",{className:"text-xs text-text-secondary truncate",children:D.projectName})]}),u.jsx("button",{onClick:()=>A(D),className:"flex-shrink-0 p-2 bg-surface-container-highest hover:bg-primary-container text-primary rounded-full transition-colors",title:"Add Order",children:u.jsx(ac,{size:18})})]}),u.jsx("div",{className:"p-5 space-y-6 flex-grow",children:H.map(Q=>u.jsxs("div",{className:`relative border-l-4 pl-3 py-1 ${Q.status==="Received"?"border-success":Q.status==="Damage Replacement"?"border-error":"border-primary"}`,children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsx("span",{className:"font-semibold text-text-primary text-sm truncate max-w-[60%]",children:Q.supplierName||"Unknown Supplier"}),u.jsxs("div",{className:"flex items-center",children:[Q.status==="Received"?u.jsxs("span",{className:"text-xs font-bold text-success flex items-center gap-1",children:[u.jsx(W4,{size:12})," Received"]}):Q.status==="Damage Replacement"?u.jsxs("span",{className:"text-xs font-bold text-error flex items-center gap-1",children:[u.jsx(xd,{size:12})," Replacement"]}):u.jsxs("span",{className:"text-xs font-bold text-primary flex items-center gap-1",children:[u.jsx(gd,{size:12})," Ordered"]}),u.jsx("button",{onClick:()=>p(Q),className:"p-1.5 text-text-tertiary hover:text-primary hover:bg-surface-container-highest rounded-full transition-colors ml-2",title:"Edit Order Details",children:u.jsx(fx,{size:12})})]})]}),u.jsxs("div",{className:"flex gap-4 mb-3",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-[10px] uppercase tracking-wide text-text-tertiary block font-bold",children:"Ordered"}),u.jsx("span",{className:"text-sm font-medium text-text-primary",children:new Date(Q.orderDate.split("T")[0]+"T12:00:00").toLocaleDateString()})]}),Q.etaDate&&u.jsxs("div",{children:[u.jsx("span",{className:"text-[10px] uppercase tracking-wide text-text-tertiary block font-bold",children:"ETA"}),u.jsx("span",{className:`text-sm font-medium ${new Date(Q.etaDate.split("T")[0]+"T12:00:00")<new Date&&Q.status!=="Received"?"text-error font-bold":"text-text-primary"}`,children:new Date(Q.etaDate.split("T")[0]+"T12:00:00").toLocaleDateString()})]})]}),u.jsxs("ul",{className:"text-xs text-text-secondary mb-3 bg-surface-container-low p-3 rounded-lg border border-outline/10",children:[Q.lineItems.slice(0,3).map(te=>u.jsx("li",{className:"flex justify-between",children:u.jsxs("span",{className:"truncate w-3/4",children:[te.quantity," ",te.unit," - ",te.style]})},te.id)),Q.lineItems.length>3&&u.jsxs("li",{className:"text-text-tertiary italic",children:["+",Q.lineItems.length-3," more..."]})]}),Q.status!=="Received"&&u.jsxs("button",{onClick:()=>C(Q),className:"w-full py-4 md:py-2 bg-primary hover:bg-primary-hover text-on-primary text-lg md:text-xs font-bold md:font-semibold rounded-full md:rounded-full flex items-center justify-center gap-3 md:gap-2 transition-colors shadow-sm mt-3 md:mt-0",children:[u.jsx(dx,{className:"w-6 h-6 md:w-3.5 md:h-3.5"})," Receive Order"]})]},Q.id))}),L.length>2&&u.jsx("button",{onClick:()=>S(D.id),className:"w-full py-3 border-t border-outline/10 flex items-center justify-center gap-1 text-xs font-semibold text-text-secondary hover:text-primary hover:bg-surface-container-highest transition-colors rounded-b-xl",children:B?u.jsxs(u.Fragment,{children:["Show Less ",u.jsx(lo,{size:14})]}):u.jsxs(u.Fragment,{children:["Show ",z," More ",u.jsx(gs,{size:14})]})})]},D.id)})}),a&&u.jsx(od,{children:u.jsx(Ftt,{isOpen:!!a,onClose:()=>s(null),order:a,onReceive:P,onReportDamage:O})}),o&&u.jsx(od,{children:u.jsx(RT,{isOpen:o,onClose:()=>l(!1),editingOrder:null,initialProjectId:c})}),f&&u.jsx(od,{children:u.jsx(RT,{isOpen:!!f,onClose:()=>p(null),editingOrder:f})})]})},Btt=(e,t)=>{if(!e||e.length===0){alert("No data to export");return}const r=Object.keys(e[0]),n=[r.join(","),...e.map(o=>r.map(l=>{let c=o[l];if(c==null)return"";let d=String(c);return(d.includes(",")||d.includes('"')||d.includes(`
`))&&(d=`"${d.replace(/"/g,'""')}"`),d}).join(","))].join(`
`),i=new Blob([n],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(i),s=document.createElement("a");s.setAttribute("href",a),s.setAttribute("download",`${t}_${new Date().toISOString().split("T")[0]}.csv`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)},nQ=e=>{const t=Number(e)||0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)},Utt=({data:e,sortConfig:t,onSort:r,hiddenColumns:n,showCost:i,onRowClick:a})=>{const s=o=>!n.includes(o);return u.jsxs("table",{className:"min-w-full text-left text-sm whitespace-nowrap",children:[u.jsx("thead",{className:"uppercase tracking-wider border-b-2 border-gray-200 bg-gray-50 print:bg-transparent",children:u.jsxs("tr",{children:[s("manufacturer")&&u.jsx("th",{onClick:()=>r("manufacturer_name"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Manufacturer ",(t==null?void 0:t.key)==="manufacturer_name"&&(t.direction==="asc"?u.jsx(lo,{className:"w-4 h-4"}):u.jsx(gs,{className:"w-4 h-4"}))]})}),s("product")&&u.jsx("th",{onClick:()=>r("product_name"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Product ",(t==null?void 0:t.key)==="product_name"&&(t.direction==="asc"?u.jsx(lo,{className:"w-4 h-4"}):u.jsx(gs,{className:"w-4 h-4"}))]})}),s("style_size")&&u.jsx("th",{onClick:()=>r("variant_size"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Style / Size ",(t==null?void 0:t.key)==="variant_size"&&(t.direction==="asc"?u.jsx(lo,{className:"w-4 h-4"}):u.jsx(gs,{className:"w-4 h-4"}))]})}),s("sku")&&u.jsx("th",{onClick:()=>r("sku"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["SKU ",(t==null?void 0:t.key)==="sku"&&(t.direction==="asc"?u.jsx(lo,{className:"w-4 h-4"}):u.jsx(gs,{className:"w-4 h-4"}))]})}),s("carton")&&u.jsx("th",{onClick:()=>r("carton_size"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Carton ",(t==null?void 0:t.key)==="carton_size"&&(t.direction==="asc"?u.jsx(lo,{className:"w-4 h-4"}):u.jsx(gs,{className:"w-4 h-4"}))]})}),i&&u.jsx("th",{onClick:()=>r("unit_cost"),className:"px-4 py-3 font-semibold text-red-600 print:text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Unit Cost ",(t==null?void 0:t.key)==="unit_cost"&&(t.direction==="asc"?u.jsx(lo,{className:"w-4 h-4"}):u.jsx(gs,{className:"w-4 h-4"}))]})}),s("retail")&&u.jsx("th",{onClick:()=>r("retail_price"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Retail Price ",(t==null?void 0:t.key)==="retail_price"&&(t.direction==="asc"?u.jsx(lo,{className:"w-4 h-4"}):u.jsx(gs,{className:"w-4 h-4"}))]})})]})}),u.jsxs("tbody",{className:"divide-y divide-gray-100",children:[e.map((o,l)=>u.jsxs("tr",{className:"hover:bg-indigo-50 cursor-pointer transition-colors break-inside-avoid",onClick:()=>a(o),children:[s("manufacturer")&&u.jsx("td",{className:"px-4 py-2 text-gray-600",children:o.manufacturer_name}),s("product")&&u.jsxs("td",{className:"px-4 py-2 text-gray-900 font-medium",children:[o.product_name,u.jsx("span",{className:"ml-2 text-xs text-gray-500 bg-gray-100 px-1 rounded",children:o.product_type})]}),s("style_size")&&u.jsxs("td",{className:"px-4 py-2 text-gray-600",children:[o.variant_style&&u.jsx("span",{className:"mr-1",children:o.variant_style}),o.variant_color&&u.jsx("span",{className:"mr-1",children:o.variant_color}),o.variant_size&&u.jsxs("span",{className:"ml-1 text-gray-500",children:["(",o.variant_size,")"]})]}),s("sku")&&u.jsx("td",{className:"px-4 py-2 text-gray-500 font-mono text-xs",children:o.sku||"-"}),s("carton")&&u.jsx("td",{className:"px-4 py-2 text-gray-600 font-mono text-xs",children:o.carton_size?`${o.carton_size} ${o.uom||""}`:"-"}),i&&u.jsxs("td",{className:"px-4 py-2 text-red-600 print:text-gray-900 font-mono",children:[nQ(o.unit_cost)," / ",o.uom]}),s("retail")&&u.jsxs("td",{className:"px-4 py-2 text-gray-900 font-mono font-bold",children:[nQ(o.retail_price)," / ",o.uom]})]},l)),u.jsx("tr",{className:"bg-gray-100 font-bold border-t-2 border-gray-300",children:u.jsxs("td",{colSpan:10,className:"px-4 py-3 text-sm text-gray-600",children:["Showing ",e.length," Variants"]})})]})]})},iN=e=>{const t=Number(e)||0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)},$tt=e=>e?new Date(e).toLocaleDateString():"-",ztt=({data:e,sortConfig:t,onSort:r,hiddenColumns:n,showCost:i,onRowClick:a})=>{const s=o=>!n.includes(o);return u.jsxs("table",{className:"min-w-full text-left text-sm whitespace-nowrap",children:[u.jsx("thead",{className:"uppercase tracking-wider border-b-2 border-gray-200 bg-gray-50 print:bg-transparent",children:u.jsxs("tr",{children:[s("date")&&u.jsx("th",{onClick:()=>r("created_at"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Date ",(t==null?void 0:t.key)==="created_at"&&(t.direction==="asc"?u.jsx(lo,{className:"w-4 h-4"}):u.jsx(gs,{className:"w-4 h-4"}))]})}),s("customer")&&u.jsx("th",{onClick:()=>r("customer_name"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Customer ",(t==null?void 0:t.key)==="customer_name"&&(t.direction==="asc"?u.jsx(lo,{className:"w-4 h-4"}):u.jsx(gs,{className:"w-4 h-4"}))]})}),s("project")&&u.jsx("th",{onClick:()=>r("project_name"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Project ",(t==null?void 0:t.key)==="project_name"&&(t.direction==="asc"?u.jsx(lo,{className:"w-4 h-4"}):u.jsx(gs,{className:"w-4 h-4"}))]})}),s("status")&&u.jsx("th",{onClick:()=>r("status"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Status ",(t==null?void 0:t.key)==="status"&&(t.direction==="asc"?u.jsx(lo,{className:"w-4 h-4"}):u.jsx(gs,{className:"w-4 h-4"}))]})}),i&&u.jsx("th",{className:"px-4 py-3 font-semibold text-red-600",children:"Est. Cost"}),s("total")&&u.jsx("th",{onClick:()=>r("total_value"),className:"px-4 py-3 font-semibold text-gray-900 text-right cursor-pointer hover:bg-gray-100 select-none flex justify-end",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Total Value ",(t==null?void 0:t.key)==="total_value"&&(t.direction==="asc"?u.jsx(lo,{className:"w-4 h-4"}):u.jsx(gs,{className:"w-4 h-4"}))]})})]})}),u.jsxs("tbody",{className:"divide-y divide-gray-100",children:[e.map((o,l)=>u.jsxs("tr",{className:"hover:bg-indigo-50 cursor-pointer transition-colors break-inside-avoid",onClick:()=>a(o),children:[s("date")&&u.jsx("td",{className:"px-4 py-2 text-gray-600",children:$tt(o.created_at)}),s("customer")&&u.jsx("td",{className:"px-4 py-2 text-gray-900 font-medium",children:o.customer_name}),s("project")&&u.jsx("td",{className:"px-4 py-2 text-gray-600",children:o.project_name}),s("status")&&u.jsx("td",{className:"px-4 py-2",children:u.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700 border border-gray-300",children:o.status})}),i&&u.jsx("td",{className:"px-4 py-2 text-red-600 font-mono",children:iN(Number(o.material_cost)+Number(o.labor_cost))}),s("total")&&u.jsx("td",{className:"px-4 py-2 text-gray-900 font-mono font-bold text-right",children:Number(o.total_value)>0?iN(o.total_value):"-"})]},l)),u.jsx("tr",{className:"bg-gray-100 font-bold border-t-2 border-gray-300",children:u.jsxs("td",{colSpan:100,className:"px-4 py-3 text-right flex justify-between",children:[u.jsx("span",{children:"TOTAL PIPELINE:"}),u.jsxs("div",{className:"flex gap-4",children:[i&&u.jsx("span",{className:"font-mono text-red-700",children:iN(e.reduce((o,l)=>o+(Number(l.material_cost)+Number(l.labor_cost)),0))}),s("total")&&u.jsx("span",{className:"font-mono text-lg",children:iN(e.reduce((o,l)=>o+Number(l.total_value),0))})]})]})})]})]})},iQ=e=>{const t=Number(e)||0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)},Htt=({data:e,sortConfig:t,onSort:r,hiddenColumns:n,onRowClick:i})=>{const a=s=>!n.includes(s);return u.jsxs("table",{className:"min-w-full text-left text-sm whitespace-nowrap",children:[u.jsx("thead",{className:"uppercase tracking-wider border-b-2 border-gray-200 bg-gray-50 print:bg-transparent",children:u.jsxs("tr",{children:[a("installer")&&u.jsx("th",{onClick:()=>r("installer_name"),className:"px-4 py-3 font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Installer Name ",(t==null?void 0:t.key)==="installer_name"&&(t.direction==="asc"?u.jsx(lo,{className:"w-4 h-4"}):u.jsx(gs,{className:"w-4 h-4"}))]})}),a("jobs")&&u.jsx("th",{onClick:()=>r("appointment_count"),className:"px-4 py-3 font-semibold text-gray-900 text-center cursor-pointer hover:bg-gray-100 select-none",children:u.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Jobs (Period) ",(t==null?void 0:t.key)==="appointment_count"&&(t.direction==="asc"?u.jsx(lo,{className:"w-4 h-4"}):u.jsx(gs,{className:"w-4 h-4"}))]})}),a("labor")&&u.jsx("th",{onClick:()=>r("total_labor_value"),className:"px-4 py-3 font-semibold text-gray-900 text-right cursor-pointer hover:bg-gray-100 select-none flex justify-end",children:u.jsxs("div",{className:"flex items-center gap-1",children:["Labor Value ",(t==null?void 0:t.key)==="total_labor_value"&&(t.direction==="asc"?u.jsx(lo,{className:"w-4 h-4"}):u.jsx(gs,{className:"w-4 h-4"}))]})})]})}),u.jsxs("tbody",{className:"divide-y divide-gray-100",children:[e.map((s,o)=>u.jsxs("tr",{className:"hover:bg-indigo-50 cursor-pointer transition-colors break-inside-avoid",onClick:()=>i(s),children:[a("installer")&&u.jsxs("td",{className:"px-4 py-3 text-gray-900 font-medium flex items-center gap-2",children:[u.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:s.color||"#ccc"}}),s.installer_name]}),a("jobs")&&u.jsx("td",{className:"px-4 py-3 text-center text-gray-600",children:s.appointment_count}),a("labor")&&u.jsx("td",{className:"px-4 py-3 text-right text-gray-900 font-mono font-bold",children:iQ(s.total_labor_value)})]},o)),u.jsx("tr",{className:"bg-gray-100 font-bold border-t-2 border-gray-300",children:u.jsx("td",{colSpan:10,className:"px-4 py-3",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{children:"TOTALS:"}),a("labor")&&u.jsx("span",{className:"font-mono text-lg text-gray-900",children:iQ(e.reduce((s,o)=>s+Number(o.total_labor_value),0))})]})})})]})]})};var Wtt=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function KB(e){if(typeof e!="string")return!1;var t=Wtt;return t.includes(e)}var Vtt=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],qtt=new Set(Vtt);function Ahe(e){return typeof e!="string"?!1:qtt.has(e)}function The(e){return typeof e=="string"&&e.startsWith("data-")}function qh(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(Ahe(r)||The(r))&&(t[r]=e[r]);return t}function XB(e){if(e==null)return null;if(I.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return qh(t)}return typeof e=="object"&&!Array.isArray(e)?qh(e):null}function gu(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(Ahe(r)||The(r)||KB(r))&&(t[r]=e[r]);return t}var Gtt=["children","width","height","viewBox","className","style","title","desc"];function jF(){return jF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jF.apply(null,arguments)}function Ktt(e,t){if(e==null)return{};var r,n,i=Xtt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Xtt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ihe=I.forwardRef((e,t)=>{var{children:r,width:n,height:i,viewBox:a,className:s,style:o,title:l,desc:c}=e,d=Ktt(e,Gtt),f=a||{width:n,height:i,x:0,y:0},p=wi("recharts-surface",s);return I.createElement("svg",jF({},gu(d),{className:p,width:n,height:i,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),I.createElement("title",null,l),I.createElement("desc",null,c),r)}),Ytt=["children","className"];function DF(){return DF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DF.apply(null,arguments)}function Qtt(e,t){if(e==null)return{};var r,n,i=Jtt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Jtt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Gh=I.forwardRef((e,t)=>{var{children:r,className:n}=e,i=Qtt(e,Ytt),a=wi("recharts-layer",n);return I.createElement("g",DF({className:a},gu(i),{ref:t}),r)}),Ztt=I.createContext(null);function yi(e){return function(){return e}}const Ohe=Math.cos,NI=Math.sin,Cd=Math.sqrt,AI=Math.PI,H3=2*AI,MF=Math.PI,FF=2*MF,Gm=1e-6,ert=FF-Gm;function Phe(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function trt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Phe;const r=10**t;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class rrt{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Phe:trt(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,a,s){this._append`C${+t},${+r},${+n},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(t,r,n,i,a){if(t=+t,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=n-t,c=i-r,d=s-t,f=o-r,p=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>Gm)if(!(Math.abs(f*l-c*d)>Gm)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-s,x=i-o,y=l*l+c*c,b=m*m+x*x,S=Math.sqrt(y),_=Math.sqrt(p),C=a*Math.tan((MF-Math.acos((y+p-b)/(2*S*_)))/2),A=C/_,j=C/S;Math.abs(A-1)>Gm&&this._append`L${t+A*d},${r+A*f}`,this._append`A${a},${a},0,0,${+(f*m>d*x)},${this._x1=t+j*l},${this._y1=r+j*c}`}}arc(t,r,n,i,a,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(i),l=n*Math.sin(i),c=t+o,d=r+l,f=1^s,p=s?i-a:a-i;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>Gm||Math.abs(this._y1-d)>Gm)&&this._append`L${c},${d}`,n&&(p<0&&(p=p%FF+FF),p>ert?this._append`A${n},${n},0,1,${f},${t-o},${r-l}A${n},${n},0,1,${f},${this._x1=c},${this._y1=d}`:p>Gm&&this._append`A${n},${n},0,${+(p>=MF)},${f},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function YB(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new rrt(t)}function QB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Rhe(e){this._context=e}Rhe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function W3(e){return new Rhe(e)}function jhe(e){return e[0]}function Dhe(e){return e[1]}function Mhe(e,t){var r=yi(!0),n=null,i=W3,a=null,s=YB(o);e=typeof e=="function"?e:e===void 0?jhe:yi(e),t=typeof t=="function"?t:t===void 0?Dhe:yi(t);function o(l){var c,d=(l=QB(l)).length,f,p=!1,m;for(n==null&&(a=i(m=s())),c=0;c<=d;++c)!(c<d&&r(f=l[c],c,l))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(f,c,l),+t(f,c,l));if(m)return a=null,m+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:yi(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:yi(+l),o):t},o.defined=function(l){return arguments.length?(r=typeof l=="function"?l:yi(!!l),o):r},o.curve=function(l){return arguments.length?(i=l,n!=null&&(a=i(n)),o):i},o.context=function(l){return arguments.length?(l==null?n=a=null:a=i(n=l),o):n},o}function aN(e,t,r){var n=null,i=yi(!0),a=null,s=W3,o=null,l=YB(c);e=typeof e=="function"?e:e===void 0?jhe:yi(+e),t=typeof t=="function"?t:yi(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?Dhe:yi(+r);function c(f){var p,m,x,y=(f=QB(f)).length,b,S=!1,_,C=new Array(y),A=new Array(y);for(a==null&&(o=s(_=l())),p=0;p<=y;++p){if(!(p<y&&i(b=f[p],p,f))===S)if(S=!S)m=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),x=p-1;x>=m;--x)o.point(C[x],A[x]);o.lineEnd(),o.areaEnd()}S&&(C[p]=+e(b,p,f),A[p]=+t(b,p,f),o.point(n?+n(b,p,f):C[p],r?+r(b,p,f):A[p]))}if(_)return o=null,_+""||null}function d(){return Mhe().defined(i).curve(s).context(a)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:yi(+f),n=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:yi(+f),c):e},c.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:yi(+f),c):n},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:yi(+f),r=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:yi(+f),c):t},c.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:yi(+f),c):r},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(r)},c.lineX1=function(){return d().x(n).y(t)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:yi(!!f),c):i},c.curve=function(f){return arguments.length?(s=f,a!=null&&(o=s(a)),c):s},c.context=function(f){return arguments.length?(f==null?a=o=null:o=s(a=f),c):a},c}class Fhe{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function nrt(e){return new Fhe(e,!0)}function irt(e){return new Fhe(e,!1)}const JB={draw(e,t){const r=Cd(t/AI);e.moveTo(r,0),e.arc(0,0,r,0,H3)}},art={draw(e,t){const r=Cd(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Lhe=Cd(1/3),srt=Lhe*2,ort={draw(e,t){const r=Cd(t/srt),n=r*Lhe;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},lrt={draw(e,t){const r=Cd(t),n=-r/2;e.rect(n,n,r,r)}},crt=.8908130915292852,Bhe=NI(AI/10)/NI(7*AI/10),urt=NI(H3/10)*Bhe,drt=-Ohe(H3/10)*Bhe,frt={draw(e,t){const r=Cd(t*crt),n=urt*r,i=drt*r;e.moveTo(0,-r),e.lineTo(n,i);for(let a=1;a<5;++a){const s=H3*a/5,o=Ohe(s),l=NI(s);e.lineTo(l*r,-o*r),e.lineTo(o*n-l*i,l*n+o*i)}e.closePath()}},nM=Cd(3),hrt={draw(e,t){const r=-Cd(t/(nM*3));e.moveTo(0,r*2),e.lineTo(-nM*r,-r),e.lineTo(nM*r,-r),e.closePath()}},jc=-.5,Dc=Cd(3)/2,LF=1/Cd(12),prt=(LF/2+1)*3,mrt={draw(e,t){const r=Cd(t/prt),n=r/2,i=r*LF,a=n,s=r*LF+r,o=-a,l=s;e.moveTo(n,i),e.lineTo(a,s),e.lineTo(o,l),e.lineTo(jc*n-Dc*i,Dc*n+jc*i),e.lineTo(jc*a-Dc*s,Dc*a+jc*s),e.lineTo(jc*o-Dc*l,Dc*o+jc*l),e.lineTo(jc*n+Dc*i,jc*i-Dc*n),e.lineTo(jc*a+Dc*s,jc*s-Dc*a),e.lineTo(jc*o+Dc*l,jc*l-Dc*o),e.closePath()}};function grt(e,t){let r=null,n=YB(i);e=typeof e=="function"?e:yi(e||JB),t=typeof t=="function"?t:yi(t===void 0?64:+t);function i(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:yi(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:yi(+a),i):t},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function TI(){}function II(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Uhe(e){this._context=e}Uhe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:II(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:II(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function xrt(e){return new Uhe(e)}function $he(e){this._context=e}$he.prototype={areaStart:TI,areaEnd:TI,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:II(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function vrt(e){return new $he(e)}function zhe(e){this._context=e}zhe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:II(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function yrt(e){return new zhe(e)}function Hhe(e){this._context=e}Hhe.prototype={areaStart:TI,areaEnd:TI,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function brt(e){return new Hhe(e)}function aQ(e){return e<0?-1:1}function sQ(e,t,r){var n=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(n||i<0&&-0),s=(r-e._y1)/(i||n<0&&-0),o=(a*i+s*n)/(n+i);return(aQ(a)+aQ(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function oQ(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function iM(e,t,r){var n=e._x0,i=e._y0,a=e._x1,s=e._y1,o=(a-n)/3;e._context.bezierCurveTo(n+o,i+o*t,a-o,s-o*r,a,s)}function OI(e){this._context=e}OI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:iM(this,this._t0,oQ(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,iM(this,oQ(this,r=sQ(this,e,t)),r);break;default:iM(this,this._t0,r=sQ(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function Whe(e){this._context=new Vhe(e)}(Whe.prototype=Object.create(OI.prototype)).point=function(e,t){OI.prototype.point.call(this,t,e)};function Vhe(e){this._context=e}Vhe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,a){this._context.bezierCurveTo(t,e,n,r,a,i)}};function wrt(e){return new OI(e)}function Srt(e){return new Whe(e)}function qhe(e){this._context=e}qhe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=lQ(e),i=lQ(t),a=0,s=1;s<r;++a,++s)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function lQ(e){var t,r=e.length-1,n,i=new Array(r),a=new Array(r),s=new Array(r);for(i[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,s[t]-=n*s[t-1];for(i[r-1]=s[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(s[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function Ert(e){return new qhe(e)}function V3(e,t){this._context=e,this._t=t}V3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Crt(e){return new V3(e,.5)}function krt(e){return new V3(e,0)}function _rt(e){return new V3(e,1)}function By(e,t){if((s=e.length)>1)for(var r=1,n,i,a=e[t[0]],s,o=a.length;r<s;++r)for(i=a,a=e[t[r]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function BF(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Nrt(e,t){return e[t]}function Art(e){const t=[];return t.key=e,t}function Trt(){var e=yi([]),t=BF,r=By,n=Nrt;function i(a){var s=Array.from(e.apply(this,arguments),Art),o,l=s.length,c=-1,d;for(const f of a)for(o=0,++c;o<l;++o)(s[o][c]=[0,+n(f,s[o].key,c,a)]).data=f;for(o=0,d=QB(t(s));o<l;++o)s[d[o]].index=o;return r(s,d),s}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:yi(Array.from(a)),i):e},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:yi(+a),i):n},i.order=function(a){return arguments.length?(t=a==null?BF:typeof a=="function"?a:yi(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(r=a??By,i):r},i}function Irt(e,t){if((n=e.length)>0){for(var r,n,i=0,a=e[0].length,s;i<a;++i){for(s=r=0;r<n;++r)s+=e[r][i][1]||0;if(s)for(r=0;r<n;++r)e[r][i][1]/=s}By(e,t)}}function Ort(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,a=n.length;r<a;++r){for(var s=0,o=0;s<i;++s)o+=e[s][r][1]||0;n[r][1]+=n[r][0]=-o/2}By(e,t)}}function Prt(e,t){if(!(!((s=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,a,s;n<a;++n){for(var o=0,l=0,c=0;o<s;++o){for(var d=e[t[o]],f=d[n][1]||0,p=d[n-1][1]||0,m=(f-p)/2,x=0;x<o;++x){var y=e[t[x]],b=y[n][1]||0,S=y[n-1][1]||0;m+=b-S}l+=f,c+=m*f}i[n-1][1]+=i[n-1][0]=r,l&&(r-=c/l)}i[n-1][1]+=i[n-1][0]=r,By(e,t)}}var q3={},Ghe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Ghe);var ZB={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(ZB);var G3={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(G3);var K3={},Khe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(Khe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Khe,r=G3;function n(i){if(Array.isArray(i))return i.map(r.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const a=[],s=i.length;if(s===0)return a;let o=0,l="",c="",d=!1;for(i.charCodeAt(0)===46&&(a.push(""),o++);o<s;){const f=i[o];c?f==="\\"&&o+1<s?(o++,l+=i[o]):f===c?c="":l+=f:d?f==='"'||f==="'"?c=f:f==="]"?(d=!1,a.push(l),l=""):l+=f:f==="["?(d=!0,l&&(a.push(l),l="")):f==="."?l&&(a.push(l),l=""):l+=f,o++}return l&&a.push(l),a}e.toPath=n})(K3);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ghe,r=ZB,n=G3,i=K3;function a(o,l,c){if(o==null)return c;switch(typeof l){case"string":{if(t.isUnsafeProperty(l))return c;const d=o[l];return d===void 0?r.isDeepKey(l)?a(o,i.toPath(l),c):c:d}case"number":case"symbol":{typeof l=="number"&&(l=n.toKey(l));const d=o[l];return d===void 0?c:d}default:{if(Array.isArray(l))return s(o,l,c);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),t.isUnsafeProperty(l))return c;const d=o[l];return d===void 0?c:d}}}function s(o,l,c){if(l.length===0)return c;let d=o;for(let f=0;f<l.length;f++){if(d==null||t.isUnsafeProperty(l[f]))return c;d=d[l[f]]}return d===void 0?c:d}e.get=a})(q3);var Rrt=q3.get;const Uy=Vs(Rrt);var yl=e=>e===0?0:e>0?1:-1,vd=e=>typeof e=="number"&&e!=+e,Kh=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ur=e=>(typeof e=="number"||e instanceof Number)&&!vd(e),mf=e=>ur(e)||typeof e=="string",jrt=0,qS=e=>{var t=++jrt;return"".concat(e||"").concat(t)},yd=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ur(t)&&typeof t!="string")return n;var a;if(Kh(t)){if(r==null)return n;var s=t.indexOf("%");a=r*parseFloat(t.slice(0,s))/100}else a=+t;return vd(a)&&(a=n),i&&r!=null&&a>r&&(a=r),a},Xhe=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function Ms(e,t,r){return ur(e)&&ur(t)?e+r*(t-e):t}function Drt(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Uy(n,t))===r)}var ks=e=>e===null||typeof e>"u",AC=e=>ks(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function Mrt(e){return e!=null}function TC(){}var Frt=["type","size","sizeType"];function UF(){return UF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},UF.apply(null,arguments)}function cQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function uQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cQ(Object(r),!0).forEach(function(n){Lrt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lrt(e,t,r){return(t=Brt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Brt(e){var t=Urt(e,"string");return typeof t=="symbol"?t:t+""}function Urt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $rt(e,t){if(e==null)return{};var r,n,i=zrt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function zrt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Yhe={symbolCircle:JB,symbolCross:art,symbolDiamond:ort,symbolSquare:lrt,symbolStar:frt,symbolTriangle:hrt,symbolWye:mrt},Hrt=Math.PI/180,Wrt=e=>{var t="symbol".concat(AC(e));return Yhe[t]||JB},Vrt=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*Hrt;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},qrt=(e,t)=>{Yhe["symbol".concat(AC(e))]=t},Qhe=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,i=$rt(e,Frt),a=uQ(uQ({},i),{},{type:t,size:r,sizeType:n}),s="circle";typeof t=="string"&&(s=t);var o=()=>{var p=Wrt(s),m=grt().type(p).size(Vrt(r,n,s)),x=m();if(x!==null)return x},{className:l,cx:c,cy:d}=a,f=gu(a);return ur(c)&&ur(d)&&ur(r)?I.createElement("path",UF({},f,{className:wi("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(d,")"),d:o()})):null};Qhe.registerSymbol=qrt;var Jhe=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,Grt=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(I.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{KB(i)&&(n[i]=a=>r[i](r,a))}),n},Krt=(e,t,r)=>n=>(e(t,r,n),null),eU=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(i=>{var a=e[i];KB(i)&&typeof a=="function"&&(n||(n={}),n[i]=Krt(a,t,r))}),n};function dQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Xrt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dQ(Object(r),!0).forEach(function(n){Yrt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yrt(e,t,r){return(t=Qrt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qrt(e){var t=Jrt(e,"string");return typeof t=="symbol"?t:t+""}function Jrt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cc(e,t){var r=Xrt({},e),n=t,i=Object.keys(t),a=i.reduce((s,o)=>(s[o]===void 0&&n[o]!==void 0&&(s[o]=n[o]),s),r);return a}var Zhe={},epe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const i=new Map;for(let a=0;a<r.length;a++){const s=r[a],o=n(s);i.has(o)||i.set(o,s)}return Array.from(i.values())}e.uniqBy=t})(epe);var tU={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(tU);var tpe={},X3={},rpe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(rpe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rpe;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(X3);var npe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(npe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=X3,r=npe;function n(i){return r.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=n})(tpe);var ipe={},ape={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=q3;function r(n){return function(i){return t.get(i,n)}}e.property=r})(ape);var spe={},rU={},ope={},nU={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(nU);var iU={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(iU);var aU={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(aU);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nU,r=iU,n=aU;function i(d,f,p){return typeof p!="function"?i(d,f,()=>{}):a(d,f,function m(x,y,b,S,_,C){const A=p(x,y,b,S,_,C);return A!==void 0?!!A:a(x,y,m,C)},new Map)}function a(d,f,p,m){if(f===d)return!0;switch(typeof f){case"object":return s(d,f,p,m);case"function":return Object.keys(f).length>0?a(d,{...f},p,m):n.eq(d,f);default:return t.isObject(d)?typeof f=="string"?f==="":!0:n.eq(d,f)}}function s(d,f,p,m){if(f==null)return!0;if(Array.isArray(f))return l(d,f,p,m);if(f instanceof Map)return o(d,f,p,m);if(f instanceof Set)return c(d,f,p,m);const x=Object.keys(f);if(d==null)return x.length===0;if(x.length===0)return!0;if(m!=null&&m.has(f))return m.get(f)===d;m==null||m.set(f,d);try{for(let y=0;y<x.length;y++){const b=x[y];if(!r.isPrimitive(d)&&!(b in d)||f[b]===void 0&&d[b]!==void 0||f[b]===null&&d[b]!==null||!p(d[b],f[b],b,d,f,m))return!1}return!0}finally{m==null||m.delete(f)}}function o(d,f,p,m){if(f.size===0)return!0;if(!(d instanceof Map))return!1;for(const[x,y]of f.entries()){const b=d.get(x);if(p(b,y,x,d,f,m)===!1)return!1}return!0}function l(d,f,p,m){if(f.length===0)return!0;if(!Array.isArray(d))return!1;const x=new Set;for(let y=0;y<f.length;y++){const b=f[y];let S=!1;for(let _=0;_<d.length;_++){if(x.has(_))continue;const C=d[_];let A=!1;if(p(C,b,y,d,f,m)&&(A=!0),A){x.add(_),S=!0;break}}if(!S)return!1}return!0}function c(d,f,p,m){return f.size===0?!0:d instanceof Set?l([...d],[...f],p,m):!1}e.isMatchWith=i,e.isSetMatch=c})(ope);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ope;function r(n,i){return t.isMatchWith(n,i,()=>{})}e.isMatch=r})(rU);var lpe={},sU={},cpe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(cpe);var oU={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(oU);var lU={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",o="[object Date]",l="[object Map]",c="[object Set]",d="[object Array]",f="[object Function]",p="[object ArrayBuffer]",m="[object Object]",x="[object Error]",y="[object DataView]",b="[object Uint8Array]",S="[object Uint8ClampedArray]",_="[object Uint16Array]",C="[object Uint32Array]",A="[object BigUint64Array]",j="[object Int8Array]",P="[object Int16Array]",O="[object Int32Array]",D="[object BigInt64Array]",L="[object Float32Array]",B="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=p,e.arrayTag=d,e.bigInt64ArrayTag=D,e.bigUint64ArrayTag=A,e.booleanTag=i,e.dataViewTag=y,e.dateTag=o,e.errorTag=x,e.float32ArrayTag=L,e.float64ArrayTag=B,e.functionTag=f,e.int16ArrayTag=P,e.int32ArrayTag=O,e.int8ArrayTag=j,e.mapTag=l,e.numberTag=n,e.objectTag=m,e.regexpTag=t,e.setTag=c,e.stringTag=r,e.symbolTag=s,e.uint16ArrayTag=_,e.uint32ArrayTag=C,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=S})(lU);var upe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(upe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cpe,r=oU,n=lU,i=iU,a=upe;function s(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,p,m=new Map,x=void 0){const y=x==null?void 0:x(d,f,p,m);if(y!==void 0)return y;if(i.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const b=new Array(d.length);m.set(d,b);for(let S=0;S<d.length;S++)b[S]=o(d[S],S,p,m,x);return Object.hasOwn(d,"index")&&(b.index=d.index),Object.hasOwn(d,"input")&&(b.input=d.input),b}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const b=new RegExp(d.source,d.flags);return b.lastIndex=d.lastIndex,b}if(d instanceof Map){const b=new Map;m.set(d,b);for(const[S,_]of d)b.set(S,o(_,S,p,m,x));return b}if(d instanceof Set){const b=new Set;m.set(d,b);for(const S of d)b.add(o(S,void 0,p,m,x));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(a.isTypedArray(d)){const b=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,b);for(let S=0;S<d.length;S++)b[S]=o(d[S],S,p,m,x);return b}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const b=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,b),l(b,d,p,m,x),b}if(typeof File<"u"&&d instanceof File){const b=new File([d],d.name,{type:d.type});return m.set(d,b),l(b,d,p,m,x),b}if(typeof Blob<"u"&&d instanceof Blob){const b=new Blob([d],{type:d.type});return m.set(d,b),l(b,d,p,m,x),b}if(d instanceof Error){const b=new d.constructor;return m.set(d,b),b.message=d.message,b.name=d.name,b.stack=d.stack,b.cause=d.cause,l(b,d,p,m,x),b}if(d instanceof Boolean){const b=new Boolean(d.valueOf());return m.set(d,b),l(b,d,p,m,x),b}if(d instanceof Number){const b=new Number(d.valueOf());return m.set(d,b),l(b,d,p,m,x),b}if(d instanceof String){const b=new String(d.valueOf());return m.set(d,b),l(b,d,p,m,x),b}if(typeof d=="object"&&c(d)){const b=Object.create(Object.getPrototypeOf(d));return m.set(d,b),l(b,d,p,m,x),b}return d}function l(d,f,p=d,m,x){const y=[...Object.keys(f),...t.getSymbols(f)];for(let b=0;b<y.length;b++){const S=y[b],_=Object.getOwnPropertyDescriptor(d,S);(_==null||_.writable)&&(d[S]=o(f[S],S,p,m,x))}}function c(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=s,e.cloneDeepWithImpl=o,e.copyProperties=l})(sU);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sU;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(lpe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rU,r=lpe;function n(i){return i=r.cloneDeep(i),a=>t.isMatch(a,i)}e.matches=n})(spe);var dpe={},fpe={},hpe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sU,r=lU;function n(i,a){return t.cloneDeepWith(i,(s,o,l,c)=>{const d=a==null?void 0:a(s,o,l,c);if(d!==void 0)return d;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new i.constructor(i==null?void 0:i.valueOf());return t.copyProperties(f,i),f}case r.argumentsTag:{const f={};return t.copyProperties(f,i),f.length=i.length,f[Symbol.iterator]=i[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n})(hpe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hpe;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(fpe);var ppe={},cU={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(cU);var mpe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oU;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(mpe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZB,r=cU,n=mpe,i=K3;function a(s,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&t.isDeepKey(o)&&(s==null?void 0:s[o])==null?l=i.toPath(o):l=[o],l.length===0)return!1;let c=s;for(let d=0;d<l.length;d++){const f=l[d];if((c==null||!Object.hasOwn(c,f))&&!((Array.isArray(c)||n.isArguments(c))&&r.isIndex(f)&&f<c.length))return!1;c=c[f]}return!0}e.has=a})(ppe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rU,r=G3,n=fpe,i=q3,a=ppe;function s(o,l){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return l=n.cloneDeep(l),function(c){const d=i.get(c,o);return d===void 0?a.has(c,o):l===void 0?d===void 0:t.isMatch(d,l)}}e.matchesProperty=s})(dpe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tU,r=ape,n=spe,i=dpe;function a(s){if(s==null)return t.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):n.matches(s);case"string":case"symbol":case"number":return r.property(s)}}e.iteratee=a})(ipe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=epe,r=tU,n=tpe,i=ipe;function a(s,o=r.identity){return n.isArrayLikeObject(s)?t.uniqBy(Array.from(s),i.iteratee(o)):[]}e.uniqBy=a})(Zhe);var Zrt=Zhe.uniqBy;const fQ=Vs(Zrt);function ent(e,t,r){return t===!0?fQ(e,r):typeof t=="function"?fQ(e,t):e}var uU=I.createContext(null),tnt=e=>e,ka=()=>{var e=I.useContext(uU);return e?e.store.dispatch:tnt},hA=()=>{},rnt=()=>hA,nnt=(e,t)=>e===t;function wr(e){var t=I.useContext(uU);return Pfe.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:rnt,t?t.store.getState:hA,t?t.store.getState:hA,t?e:hA,nnt)}function int(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function ant(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function snt(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var hQ=e=>Array.isArray(e)?e:[e];function ont(e){const t=Array.isArray(e[0])?e[0]:e;return snt(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function lnt(e,t){const r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var cnt=class{constructor(e){this.value=e}deref(){return this.value}},unt=typeof WeakRef<"u"?WeakRef:cnt,dnt=0,pQ=1;function sN(){return{s:dnt,v:void 0,o:null,p:null}}function gpe(e,t={}){let r=sN();const{resultEqualityCheck:n}=t;let i,a=0;function s(){var f;let o=r;const{length:l}=arguments;for(let p=0,m=l;p<m;p++){const x=arguments[p];if(typeof x=="function"||typeof x=="object"&&x!==null){let y=o.o;y===null&&(o.o=y=new WeakMap);const b=y.get(x);b===void 0?(o=sN(),y.set(x,o)):o=b}else{let y=o.p;y===null&&(o.p=y=new Map);const b=y.get(x);b===void 0?(o=sN(),y.set(x,o)):o=b}}const c=o;let d;if(o.s===pQ)d=o.v;else if(d=e.apply(null,arguments),a++,n){const p=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;p!=null&&n(p,d)&&(d=p,a!==0&&a--),i=typeof d=="object"&&d!==null||typeof d=="function"?new unt(d):d}return c.s=pQ,c.v=d,d}return s.clearCache=()=>{r=sN(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function fnt(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...i)=>{let a=0,s=0,o,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),int(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const d={...r,...l},{memoize:f,memoizeOptions:p=[],argsMemoize:m=gpe,argsMemoizeOptions:x=[]}=d,y=hQ(p),b=hQ(x),S=ont(i),_=f(function(){return a++,c.apply(null,arguments)},...y),C=m(function(){s++;const j=lnt(S,arguments);return o=_.apply(null,j),o},...b);return Object.assign(C,{resultFunc:c,memoizedResultFunc:_,dependencies:S,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:f,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var st=fnt(gpe),hnt=Object.assign((e,t=st)=>{ant(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((s,o,l)=>(s[r[l]]=o,s),{}))},{withTypes:()=>hnt}),xpe={},vpe={},ype={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,a)=>{if(n!==i){const s=t(n),o=t(i);if(s===o&&s===0){if(n<i)return a==="desc"?1:-1;if(n>i)return a==="desc"?-1:1}return a==="desc"?o-s:s-o}return 0};e.compareValues=r})(ype);var bpe={},dU={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(dU);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dU,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||s!=null&&Object.hasOwn(s,a)}e.isKey=i})(bpe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ype,r=bpe,n=K3;function i(a,s,o,l){if(a==null)return[];o=l?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(m=>String(m));const c=(m,x)=>{let y=m;for(let b=0;b<x.length&&y!=null;++b)y=y[x[b]];return y},d=(m,x)=>x==null||m==null?x:typeof m=="object"&&"key"in m?Object.hasOwn(x,m.key)?x[m.key]:c(x,m.path):typeof m=="function"?m(x):Array.isArray(m)?c(x,m):typeof x=="object"?x[m]:x,f=s.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:n.toPath(m)}));return a.map(m=>({original:m,criteria:f.map(x=>d(x,m))})).slice().sort((m,x)=>{for(let y=0;y<f.length;y++){const b=t.compareValues(m.criteria[y],x.criteria[y],o[y]);if(b!==0)return b}return 0}).map(m=>m.original)}e.orderBy=i})(vpe);var wpe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const i=[],a=Math.floor(n),s=(o,l)=>{for(let c=0;c<o.length;c++){const d=o[c];Array.isArray(d)&&l<a?s(d,l+1):i.push(d)}};return s(r,0),i}e.flatten=t})(wpe);var fU={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cU,r=X3,n=nU,i=aU;function a(s,o,l){return n.isObject(l)&&(typeof o=="number"&&r.isArrayLike(l)&&t.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?i.eq(l[o],s):!1}e.isIterateeCall=a})(fU);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vpe,r=wpe,n=fU;function i(a,...s){const o=s.length;return o>1&&n.isIterateeCall(a,s[0],s[1])?s=[]:o>2&&n.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),t.orderBy(a,r.flatten(s),["asc"])}e.sortBy=i})(xpe);var pnt=xpe.sortBy;const Y3=Vs(pnt);var Spe=e=>e.legend.settings,mnt=e=>e.legend.size,gnt=e=>e.legend.payload;st([gnt,Spe],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Y3(n,r):n});var oN=1;function xnt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=I.useState({height:0,left:0,top:0,width:0}),n=I.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-t.height)>oN||Math.abs(s.left-t.left)>oN||Math.abs(s.top-t.top)>oN||Math.abs(s.width-t.width)>oN)&&r({height:s.height,left:s.left,top:s.top,width:s.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Rs(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var vnt=typeof Symbol=="function"&&Symbol.observable||"@@observable",mQ=vnt,aM=()=>Math.random().toString(36).substring(7).split("").join("."),ynt={INIT:`@@redux/INIT${aM()}`,REPLACE:`@@redux/REPLACE${aM()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${aM()}`},PI=ynt;function hU(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Epe(e,t,r){if(typeof e!="function")throw new Error(Rs(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Rs(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Rs(1));return r(Epe)(e,t)}let n=e,i=t,a=new Map,s=a,o=0,l=!1;function c(){s===a&&(s=new Map,a.forEach((b,S)=>{s.set(S,b)}))}function d(){if(l)throw new Error(Rs(3));return i}function f(b){if(typeof b!="function")throw new Error(Rs(4));if(l)throw new Error(Rs(5));let S=!0;c();const _=o++;return s.set(_,b),function(){if(S){if(l)throw new Error(Rs(6));S=!1,c(),s.delete(_),a=null}}}function p(b){if(!hU(b))throw new Error(Rs(7));if(typeof b.type>"u")throw new Error(Rs(8));if(typeof b.type!="string")throw new Error(Rs(17));if(l)throw new Error(Rs(9));try{l=!0,i=n(i,b)}finally{l=!1}return(a=s).forEach(_=>{_()}),b}function m(b){if(typeof b!="function")throw new Error(Rs(10));n=b,p({type:PI.REPLACE})}function x(){const b=f;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(Rs(11));function _(){const A=S;A.next&&A.next(d())}return _(),{unsubscribe:b(_)}},[mQ](){return this}}}return p({type:PI.INIT}),{dispatch:p,subscribe:f,getState:d,replaceReducer:m,[mQ]:x}}function bnt(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:PI.INIT})>"u")throw new Error(Rs(12));if(typeof r(void 0,{type:PI.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Rs(13))})}function Cpe(e){const t=Object.keys(e),r={};for(let a=0;a<t.length;a++){const s=t[a];typeof e[s]=="function"&&(r[s]=e[s])}const n=Object.keys(r);let i;try{bnt(r)}catch(a){i=a}return function(s={},o){if(i)throw i;let l=!1;const c={};for(let d=0;d<n.length;d++){const f=n[d],p=r[f],m=s[f],x=p(m,o);if(typeof x>"u")throw o&&o.type,new Error(Rs(14));c[f]=x,l=l||x!==m}return l=l||n.length!==Object.keys(s).length,l?c:s}}function RI(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function wnt(...e){return t=>(r,n)=>{const i=t(r,n);let a=()=>{throw new Error(Rs(15))};const s={getState:i.getState,dispatch:(l,...c)=>a(l,...c)},o=e.map(l=>l(s));return a=RI(...o)(i.dispatch),{...i,dispatch:a}}}function kpe(e){return hU(e)&&"type"in e&&typeof e.type=="string"}var _pe=Symbol.for("immer-nothing"),gQ=Symbol.for("immer-draftable"),Zo=Symbol.for("immer-state");function Qu(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var sc=Object,$y=sc.getPrototypeOf,jI="constructor",Q3="prototype",$F="configurable",DI="enumerable",pA="writable",GS="value",Xh=e=>!!e&&!!e[Zo];function gf(e){var t;return e?Npe(e)||J3(e)||!!e[gQ]||!!((t=e[jI])!=null&&t[gQ])||Z3(e)||eP(e):!1}var Snt=sc[Q3][jI].toString(),xQ=new WeakMap;function Npe(e){if(!e||!pU(e))return!1;const t=$y(e);if(t===null||t===sc[Q3])return!0;const r=sc.hasOwnProperty.call(t,jI)&&t[jI];if(r===Object)return!0;if(!ov(r))return!1;let n=xQ.get(r);return n===void 0&&(n=Function.toString.call(r),xQ.set(r,n)),n===Snt}function IC(e,t,r=!0){OC(e)===0?(r?Reflect.ownKeys(e):sc.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function OC(e){const t=e[Zo];return t?t.type_:J3(e)?1:Z3(e)?2:eP(e)?3:0}var vQ=(e,t,r=OC(e))=>r===2?e.has(t):sc[Q3].hasOwnProperty.call(e,t),zF=(e,t,r=OC(e))=>r===2?e.get(t):e[t],MI=(e,t,r,n=OC(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function Ent(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var J3=Array.isArray,Z3=e=>e instanceof Map,eP=e=>e instanceof Set,pU=e=>typeof e=="object",ov=e=>typeof e=="function",sM=e=>typeof e=="boolean",oh=e=>e.copy_||e.base_,mU=e=>e.modified_?e.copy_:e.base_;function HF(e,t){if(Z3(e))return new Map(e);if(eP(e))return new Set(e);if(J3(e))return Array[Q3].slice.call(e);const r=Npe(e);if(t===!0||t==="class_only"&&!r){const n=sc.getOwnPropertyDescriptors(e);delete n[Zo];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const s=i[a],o=n[s];o[pA]===!1&&(o[pA]=!0,o[$F]=!0),(o.get||o.set)&&(n[s]={[$F]:!0,[pA]:!0,[DI]:o[DI],[GS]:e[s]})}return sc.create($y(e),n)}else{const n=$y(e);if(n!==null&&r)return{...e};const i=sc.create(n);return sc.assign(i,e)}}function gU(e,t=!1){return tP(e)||Xh(e)||(OC(e)>1&&sc.defineProperties(e,{set:lN,add:lN,clear:lN,delete:lN}),sc.freeze(e),t&&IC(e,(r,n)=>{gU(n,!0)},!1)),e}function Cnt(){Qu(2)}var lN={[GS]:Cnt};function tP(e){return e===null||!pU(e)?!0:sc.isFrozen(e)}var FI="MapSet",WF="Patches",Ape={};function zy(e){const t=Ape[e];return t||Qu(0,e),t}var knt=e=>!!Ape[e],KS,Tpe=()=>KS,_nt=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:knt(FI)?zy(FI):void 0});function yQ(e,t){t&&(e.patchPlugin_=zy(WF),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function VF(e){qF(e),e.drafts_.forEach(Nnt),e.drafts_=null}function qF(e){e===KS&&(KS=e.parent_)}var bQ=e=>KS=_nt(KS,e);function Nnt(e){const t=e[Zo];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function wQ(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[Zo].modified_&&(VF(t),Qu(4)),gf(e)&&(e=SQ(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(r[Zo].base_,e,t)}else e=SQ(t,r);return Ant(t,e,!0),VF(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==_pe?e:void 0}function SQ(e,t){if(tP(t))return t;const r=t[Zo];if(!r)return xU(t,e.handledSet_,e);if(!rP(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);Ppe(r,e)}return r.copy_}function Ant(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&gU(t,r)}function Ipe(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var rP=(e,t)=>e.scope_===t,Tnt=[];function Ope(e,t,r,n){const i=oh(e),a=e.type_;if(n!==void 0&&zF(i,n,a)===t){MI(i,n,r,a);return}if(!e.draftLocations_){const o=e.draftLocations_=new Map;IC(i,(l,c)=>{if(Xh(c)){const d=o.get(c)||[];d.push(l),o.set(c,d)}})}const s=e.draftLocations_.get(t)??Tnt;for(const o of s)MI(i,o,r,a)}function Int(e,t,r){e.callbacks_.push(function(i){var o;const a=t;if(!a||!rP(a,i))return;(o=i.mapSetPlugin_)==null||o.fixSetContents(a);const s=mU(a);Ope(e,a.draft_??a,s,r),Ppe(a,i)})}function Ppe(e,t){var n;if(e.modified_&&!e.finalized_&&(e.type_===3||(((n=e.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:i}=t;if(i){const a=i.getPath(e);a&&i.generatePatches_(e,a,t)}Ipe(e)}}function Ont(e,t,r){const{scope_:n}=e;if(Xh(r)){const i=r[Zo];rP(i,n)&&i.callbacks_.push(function(){mA(e);const s=mU(i);Ope(e,r,s,t)})}else gf(r)&&e.callbacks_.push(function(){const a=oh(e);zF(a,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&xU(zF(e.copy_,t,e.type_),n.handledSet_,n)})}function xU(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||Xh(e)||t.has(e)||!gf(e)||tP(e)||(t.add(e),IC(e,(n,i)=>{if(Xh(i)){const a=i[Zo];if(rP(a,r)){const s=mU(a);MI(e,n,s,e.type_),Ipe(a)}}else gf(i)&&xU(i,t,r)})),e}function Pnt(e,t){const r=J3(e),n={type_:r?1:0,scope_:t?t.scope_:Tpe(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,a=vU;r&&(i=[n],a=XS);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return n.draft_=o,n.revoke_=s,[o,n]}var vU={get(e,t){if(t===Zo)return e;const r=oh(e);if(!vQ(r,t,e.type_))return Rnt(e,r,t);const n=r[t];if(e.finalized_||!gf(n))return n;if(n===oM(e.base_,t)){mA(e);const i=e.type_===1?+t:t,a=KF(e.scope_,n,e,i);return e.copy_[i]=a}return n},has(e,t){return t in oh(e)},ownKeys(e){return Reflect.ownKeys(oh(e))},set(e,t,r){const n=Rpe(oh(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=oM(oh(e),t),a=i==null?void 0:i[Zo];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(Ent(r,i)&&(r!==void 0||vQ(e.base_,t,e.type_)))return!0;mA(e),GF(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),Ont(e,t,r)),!0},deleteProperty(e,t){return mA(e),oM(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),GF(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=oh(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[pA]:!0,[$F]:e.type_!==1||t!=="length",[DI]:n[DI],[GS]:r[t]}},defineProperty(){Qu(11)},getPrototypeOf(e){return $y(e.base_)},setPrototypeOf(){Qu(12)}},XS={};IC(vU,(e,t)=>{XS[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}});XS.deleteProperty=function(e,t){return XS.set.call(this,e,t,void 0)};XS.set=function(e,t,r){return vU.set.call(this,e[0],t,r,e[0])};function oM(e,t){const r=e[Zo];return(r?oh(r):e)[t]}function Rnt(e,t,r){var i;const n=Rpe(t,r);return n?GS in n?n[GS]:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function Rpe(e,t){if(!(t in e))return;let r=$y(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=$y(r)}}function GF(e){e.modified_||(e.modified_=!0,e.parent_&&GF(e.parent_))}function mA(e){e.copy_||(e.assigned_=new Map,e.copy_=HF(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var jnt=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,i)=>{if(ov(r)&&!ov(n)){const s=n;n=r;const o=this;return function(c=s,...d){return o.produce(c,f=>n.call(this,f,...d))}}ov(n)||Qu(6),i!==void 0&&!ov(i)&&Qu(7);let a;if(gf(r)){const s=bQ(this),o=KF(s,r,void 0);let l=!0;try{a=n(o),l=!1}finally{l?VF(s):qF(s)}return yQ(s,i),wQ(a,s)}else if(!r||!pU(r)){if(a=n(r),a===void 0&&(a=r),a===_pe&&(a=void 0),this.autoFreeze_&&gU(a,!0),i){const s=[],o=[];zy(WF).generateReplacementPatches_(r,a,{patches_:s,inversePatches_:o}),i(s,o)}return a}else Qu(1,r)},this.produceWithPatches=(r,n)=>{if(ov(r))return(o,...l)=>this.produceWithPatches(o,c=>r(c,...l));let i,a;return[this.produce(r,n,(o,l)=>{i=o,a=l}),i,a]},sM(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),sM(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),sM(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){gf(t)||Qu(8),Xh(t)&&(t=ld(t));const r=bQ(this),n=KF(r,t,void 0);return n[Zo].isManual_=!0,qF(r),n}finishDraft(t,r){const n=t&&t[Zo];(!n||!n.isManual_)&&Qu(9);const{scope_:i}=n;return yQ(i,r),wQ(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const a=r[n];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}n>-1&&(r=r.slice(n+1));const i=zy(WF).applyPatches_;return Xh(t)?i(t,r):this.produce(t,a=>i(a,r))}};function KF(e,t,r,n){const[i,a]=Z3(t)?zy(FI).proxyMap_(t,r):eP(t)?zy(FI).proxySet_(t,r):Pnt(t,r);return((r==null?void 0:r.scope_)??Tpe()).drafts_.push(i),a.callbacks_=(r==null?void 0:r.callbacks_)??[],a.key_=n,r&&n!==void 0?Int(r,a,n):a.callbacks_.push(function(l){var d;(d=l.mapSetPlugin_)==null||d.fixSetContents(a);const{patchPlugin_:c}=l;a.modified_&&c&&c.generatePatches_(a,[],l)}),i}function ld(e){return Xh(e)||Qu(10,e),jpe(e)}function jpe(e){if(!gf(e)||tP(e))return e;const t=e[Zo];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=HF(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=HF(e,!0);return IC(r,(i,a)=>{MI(r,i,jpe(a))},n),t&&(t.finalized_=!1),r}var Dnt=new jnt,Dpe=Dnt.produce;function Mpe(e){return({dispatch:r,getState:n})=>i=>a=>typeof a=="function"?a(r,n,e):i(a)}var Mnt=Mpe(),Fnt=Mpe,Lnt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?RI:RI.apply(null,arguments)};function xu(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(fc(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>kpe(n)&&n.type===e,r}var Fpe=class d2 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,d2.prototype)}static get[Symbol.species](){return d2}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new d2(...t[0].concat(this)):new d2(...t.concat(this))}};function EQ(e){return gf(e)?Dpe(e,()=>{}):e}function cN(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function Bnt(e){return typeof e=="boolean"}var Unt=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=t??{};let s=new Fpe;return r&&(Bnt(r)?s.push(Mnt):s.push(Fnt(r.extraArgument))),s},Lpe="RTK_autoBatch",Fi=()=>e=>({payload:e,meta:{[Lpe]:!0}}),CQ=e=>t=>{setTimeout(t,e)},Bpe=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,a=!1,s=!1;const o=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:CQ(10):e.type==="callback"?e.queueNotification:CQ(e.timeout),c=()=>{s=!1,a&&(a=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>i&&d(),p=n.subscribe(f);return o.add(d),()=>{p(),o.delete(d)}},dispatch(d){var f;try{return i=!((f=d==null?void 0:d.meta)!=null&&f[Lpe]),a=!i,a&&(s||(s=!0,l(c))),n.dispatch(d)}finally{i=!0}}})},$nt=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new Fpe(e);return n&&i.push(Bpe(typeof n=="object"?n:void 0)),i};function znt(e){const t=Unt(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(hU(r))o=Cpe(r);else throw new Error(fc(1));let l;typeof n=="function"?l=n(t):l=t();let c=RI;i&&(c=Lnt({trace:!1,...typeof i=="object"&&i}));const d=wnt(...l),f=$nt(d);let p=typeof s=="function"?s(f):f();const m=c(...p);return Epe(o,a,m)}function Upe(e){const t={},r=[];let n;const i={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(fc(28));if(o in t)throw new Error(fc(29));return t[o]=s,i},addAsyncThunk(a,s){return s.pending&&(t[a.pending.type]=s.pending),s.rejected&&(t[a.rejected.type]=s.rejected),s.fulfilled&&(t[a.fulfilled.type]=s.fulfilled),s.settled&&r.push({matcher:a.settled,reducer:s.settled}),i},addMatcher(a,s){return r.push({matcher:a,reducer:s}),i},addDefaultCase(a){return n=a,i}};return e(i),[t,r,n]}function Hnt(e){return typeof e=="function"}function Wnt(e,t){let[r,n,i]=Upe(t),a;if(Hnt(e))a=()=>EQ(e());else{const o=EQ(e);a=()=>o}function s(o=a(),l){let c=[r[l.type],...n.filter(({matcher:d})=>d(l)).map(({reducer:d})=>d)];return c.filter(d=>!!d).length===0&&(c=[i]),c.reduce((d,f)=>{if(f)if(Xh(d)){const m=f(d,l);return m===void 0?d:m}else{if(gf(d))return Dpe(d,p=>f(p,l));{const p=f(d,l);if(p===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return d},o)}return s.getInitialState=a,s}var Vnt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",qnt=(e=21)=>{let t="",r=e;for(;r--;)t+=Vnt[Math.random()*64|0];return t},Gnt=Symbol.for("rtk-slice-createasyncthunk");function Knt(e,t){return`${e}/${t}`}function Xnt({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[Gnt];return function(i){const{name:a,reducerPath:s=a}=i;if(!a)throw new Error(fc(11));const o=(typeof i.reducers=="function"?i.reducers(Qnt()):i.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(A,j){const P=typeof A=="string"?A:A.type;if(!P)throw new Error(fc(12));if(P in c.sliceCaseReducersByType)throw new Error(fc(13));return c.sliceCaseReducersByType[P]=j,d},addMatcher(A,j){return c.sliceMatchers.push({matcher:A,reducer:j}),d},exposeAction(A,j){return c.actionCreators[A]=j,d},exposeCaseReducer(A,j){return c.sliceCaseReducersByName[A]=j,d}};l.forEach(A=>{const j=o[A],P={reducerName:A,type:Knt(a,A),createNotation:typeof i.reducers=="function"};Znt(j)?tit(P,j,d,t):Jnt(P,j,d)});function f(){const[A={},j=[],P=void 0]=typeof i.extraReducers=="function"?Upe(i.extraReducers):[i.extraReducers],O={...A,...c.sliceCaseReducersByType};return Wnt(i.initialState,D=>{for(let L in O)D.addCase(L,O[L]);for(let L of c.sliceMatchers)D.addMatcher(L.matcher,L.reducer);for(let L of j)D.addMatcher(L.matcher,L.reducer);P&&D.addDefaultCase(P)})}const p=A=>A,m=new Map,x=new WeakMap;let y;function b(A,j){return y||(y=f()),y(A,j)}function S(){return y||(y=f()),y.getInitialState()}function _(A,j=!1){function P(D){let L=D[A];return typeof L>"u"&&j&&(L=cN(x,P,S)),L}function O(D=p){const L=cN(m,j,()=>new WeakMap);return cN(L,D,()=>{const B={};for(const[H,z]of Object.entries(i.selectors??{}))B[H]=Ynt(z,D,()=>cN(x,D,S),j);return B})}return{reducerPath:A,getSelectors:O,get selectors(){return O(P)},selectSlice:P}}const C={name:a,reducer:b,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:S,..._(s),injectInto(A,{reducerPath:j,...P}={}){const O=j??s;return A.inject({reducerPath:O,reducer:b},P),{...C,..._(O,!0)}}};return C}}function Ynt(e,t,r,n){function i(a,...s){let o=t(a);return typeof o>"u"&&n&&(o=r()),e(o,...s)}return i.unwrapped=e,i}var Ll=Xnt();function Qnt(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Jnt({type:e,reducerName:t,createNotation:r},n,i){let a,s;if("reducer"in n){if(r&&!eit(n))throw new Error(fc(17));a=n.reducer,s=n.prepare}else a=n;i.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,s?xu(e,s):xu(e))}function Znt(e){return e._reducerDefinitionType==="asyncThunk"}function eit(e){return e._reducerDefinitionType==="reducerWithPrepare"}function tit({type:e,reducerName:t},r,n,i){if(!i)throw new Error(fc(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:l,settled:c,options:d}=r,f=i(e,a,d);n.exposeAction(t,f),s&&n.addCase(f.fulfilled,s),o&&n.addCase(f.pending,o),l&&n.addCase(f.rejected,l),c&&n.addMatcher(f.settled,c),n.exposeCaseReducer(t,{fulfilled:s||uN,pending:o||uN,rejected:l||uN,settled:c||uN})}function uN(){}var rit="task",$pe="listener",zpe="completed",yU="cancelled",nit=`task-${yU}`,iit=`task-${zpe}`,XF=`${$pe}-${yU}`,ait=`${$pe}-${zpe}`,nP=class{constructor(e){HR(this,"name","TaskAbortError");HR(this,"message");this.code=e,this.message=`${rit} ${yU} (reason: ${e})`}},bU=(e,t)=>{if(typeof e!="function")throw new TypeError(fc(32))},LI=()=>{},Hpe=(e,t=LI)=>(e.catch(t),e),Wpe=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Hg=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Wg=e=>{if(e.aborted){const{reason:t}=e;throw new nP(t)}};function Vpe(e,t){let r=LI;return new Promise((n,i)=>{const a=()=>i(new nP(e.reason));if(e.aborted){a();return}r=Wpe(e,a),t.finally(()=>r()).then(n,i)}).finally(()=>{r=LI})}var sit=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof nP?"cancelled":"rejected",error:r}}finally{t==null||t()}},BI=e=>t=>Hpe(Vpe(e,t).then(r=>(Wg(e),r))),qpe=e=>{const t=BI(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:$v}=Object,kQ={},iP="listenerMiddleware",oit=(e,t)=>{const r=n=>Wpe(e,()=>Hg(n,e.reason));return(n,i)=>{bU(n);const a=new AbortController;r(a);const s=sit(async()=>{Wg(e),Wg(a.signal);const o=await n({pause:BI(a.signal),delay:qpe(a.signal),signal:a.signal});return Wg(a.signal),o},()=>Hg(a,iit));return i!=null&&i.autoJoin&&t.push(s.catch(LI)),{result:BI(e)(s),cancel(){Hg(a,nit)}}}},lit=(e,t)=>{const r=async(n,i)=>{Wg(t);let a=()=>{};const o=[new Promise((l,c)=>{let d=e({predicate:n,effect:(f,p)=>{p.unsubscribe(),l([f,p.getState(),p.getOriginalState()])}});a=()=>{d(),c()}})];i!=null&&o.push(new Promise(l=>setTimeout(l,i,null)));try{const l=await Vpe(t,Promise.race(o));return Wg(t),l}finally{a()}};return(n,i)=>Hpe(r(n,i))},Gpe=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:a}=e;if(t)i=xu(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(fc(21));return bU(a),{predicate:i,type:t,effect:a}},Kpe=$v(e=>{const{type:t,predicate:r,effect:n}=Gpe(e);return{id:qnt(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(fc(22))}}},{withTypes:()=>Kpe}),_Q=(e,t)=>{const{type:r,effect:n,predicate:i}=Gpe(t);return Array.from(e.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===i)&&a.effect===n)},YF=e=>{e.pending.forEach(t=>{Hg(t,XF)})},cit=(e,t)=>()=>{for(const r of t.keys())YF(r);e.clear()},NQ=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Xpe=$v(xu(`${iP}/add`),{withTypes:()=>Xpe}),uit=xu(`${iP}/removeAll`),Ype=$v(xu(`${iP}/remove`),{withTypes:()=>Ype}),dit=(...e)=>{console.error(`${iP}/error`,...e)},PC=(e={})=>{const t=new Map,r=new Map,n=m=>{const x=r.get(m)??0;r.set(m,x+1)},i=m=>{const x=r.get(m)??1;x===1?r.delete(m):r.set(m,x-1)},{extra:a,onError:s=dit}=e;bU(s);const o=m=>(m.unsubscribe=()=>t.delete(m.id),t.set(m.id,m),x=>{m.unsubscribe(),x!=null&&x.cancelActive&&YF(m)}),l=m=>{const x=_Q(t,m)??Kpe(m);return o(x)};$v(l,{withTypes:()=>l});const c=m=>{const x=_Q(t,m);return x&&(x.unsubscribe(),m.cancelActive&&YF(x)),!!x};$v(c,{withTypes:()=>c});const d=async(m,x,y,b)=>{const S=new AbortController,_=lit(l,S.signal),C=[];try{m.pending.add(S),n(m),await Promise.resolve(m.effect(x,$v({},y,{getOriginalState:b,condition:(A,j)=>_(A,j).then(Boolean),take:_,delay:qpe(S.signal),pause:BI(S.signal),extra:a,signal:S.signal,fork:oit(S.signal,C),unsubscribe:m.unsubscribe,subscribe:()=>{t.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((A,j,P)=>{A!==S&&(Hg(A,XF),P.delete(A))})},cancel:()=>{Hg(S,XF),m.pending.delete(S)},throwIfCancelled:()=>{Wg(S.signal)}})))}catch(A){A instanceof nP||NQ(s,A,{raisedBy:"effect"})}finally{await Promise.all(C),Hg(S,ait),i(m),m.pending.delete(S)}},f=cit(t,r);return{middleware:m=>x=>y=>{if(!kpe(y))return x(y);if(Xpe.match(y))return l(y.payload);if(uit.match(y)){f();return}if(Ype.match(y))return c(y.payload);let b=m.getState();const S=()=>{if(b===kQ)throw new Error(fc(23));return b};let _;try{if(_=x(y),t.size>0){const C=m.getState(),A=Array.from(t.values());for(const j of A){let P=!1;try{P=j.predicate(y,C,b)}catch(O){P=!1,NQ(s,O,{raisedBy:"predicate"})}P&&d(j,y,m,S)}}}finally{b=kQ}return _},startListening:l,stopListening:c,clearListeners:f}};function fc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var fit={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Qpe=Ll({name:"chartLayout",initialState:fit,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,i,a;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:hit,setLayout:pit,setChartSize:mit,setScale:git}=Qpe.actions,xit=Qpe.reducer;function Jpe(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function AQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Cv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AQ(Object(r),!0).forEach(function(n){vit(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vit(e,t,r){return(t=yit(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yit(e){var t=bit(e,"string");return typeof t=="symbol"?t:t+""}function bit(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vo(e,t,r){return ks(e)||ks(t)?r:mf(t)?Uy(e,t,r):typeof t=="function"?t(e):r}var wit=(e,t,r)=>{if(t&&r){var{width:n,height:i}=r,{align:a,verticalAlign:s,layout:o}=t;if((o==="vertical"||o==="horizontal"&&s==="middle")&&a!=="center"&&ur(e[a]))return Cv(Cv({},e),{},{[a]:e[a]+(n||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&s!=="middle"&&ur(e[s]))return Cv(Cv({},e),{},{[s]:e[s]+(i||0)})}return e},s1=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Zpe=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var i,a,s=e.map(o=>(o.coordinate===t&&(i=!0),o.coordinate===r&&(a=!0),o.coordinate));return i||s.push(t),a||s.push(r),s},e0e=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:i,range:a,scale:s,realScaleType:o,isCategorical:l,categoricalDomain:c,tickCount:d,ticks:f,niceTicks:p,axisType:m}=e;if(!s)return null;var x=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,y=i==="category"&&s.bandwidth?s.bandwidth()/x:0;if(y=m==="angleAxis"&&a&&a.length>=2?yl(a[0]-a[1])*2*y:y,f||p){var b=(f||p||[]).map((S,_)=>{var C=n?n.indexOf(S):S;return{coordinate:s(C)+y,value:S,offset:y,index:_}});return b.filter(S=>!vd(S.coordinate))}return l&&c?c.map((S,_)=>({coordinate:s(S)+y,value:S,index:_,offset:y})):s.ticks&&d!=null?s.ticks(d).map((S,_)=>({coordinate:s(S)+y,value:S,offset:y,index:_})):s.domain().map((S,_)=>({coordinate:s(S)+y,value:n?n[S]:S,index:_,offset:y}))},TQ=1e-4,Sit=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),i=Math.min(n[0],n[1])-TQ,a=Math.max(n[0],n[1])+TQ,s=e(t[0]),o=e(t[r-1]);(s<i||s>a||o<i||o>a)&&e.domain([t[0],t[r-1]])}},Eit=(e,t)=>{if(!t||t.length!==2||!ur(t[0])||!ur(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!ur(e[0])||e[0]<r)&&(i[0]=r),(!ur(e[1])||e[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},Cit=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,a=0,s=0;s<t;++s){var o=vd(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=i,e[s][r][1]=i+o,i=e[s][r][1]):(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1])}},kit=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,a=0;a<t;++a){var s=vd(e[a][r][1])?e[a][r][0]:e[a][r][1];s>=0?(e[a][r][0]=i,e[a][r][1]=i+s,i=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},_it={sign:Cit,expand:Irt,none:By,silhouette:Ort,wiggle:Prt,positive:kit},Nit=(e,t,r)=>{var n=_it[r],i=Trt().keys(t).value((a,s)=>Number(vo(a,s,0))).order(BF).offset(n);return i(e)};function Ait(e){return e==null?void 0:String(e)}var IQ=e=>{var{axis:t,ticks:r,offset:n,bandSize:i,entry:a,index:s}=e;if(t.type==="category")return r[s]?r[s].coordinate+n:null;var o=vo(a,t.dataKey,t.scale.domain()[s]);return ks(o)?null:t.scale(o)-i/2+n},Tit=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},Iit=e=>{var t=e.flat(2).filter(ur);return[Math.min(...t),Math.max(...t)]},Oit=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],Pit=(e,t,r)=>{if(e!=null)return Oit(Object.keys(e).reduce((n,i)=>{var a=e[i],{stackedData:s}=a,o=s.reduce((l,c)=>{var d=Jpe(c,t,r),f=Iit(d);return[Math.min(l[0],f[0]),Math.max(l[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},OQ=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,PQ=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,UI=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var i=Y3(t,d=>d.coordinate),a=1/0,s=1,o=i.length;s<o;s++){var l=i[s],c=i[s-1];a=Math.min((l.coordinate||0)-(c.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function RQ(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:i,name:a}=e;return Cv(Cv({},t),{},{dataKey:r,payload:n,value:i,name:a})}function t0e(e,t){if(e)return String(e);if(typeof t=="string")return t}var Rit=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},jit=(e,t)=>t==="centric"?e.angle:e.radius,op=e=>e.layout.width,lp=e=>e.layout.height,Dit=e=>e.layout.scale,r0e=e=>e.layout.margin,aP=st(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),sP=st(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Mit="data-recharts-item-index",Fit="data-recharts-item-data-key",RC=60;function jQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function dN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jQ(Object(r),!0).forEach(function(n){Lit(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lit(e,t,r){return(t=Bit(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bit(e){var t=Uit(e,"string");return typeof t=="symbol"?t:t+""}function Uit(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $it=e=>e.brush.height;function zit(e){var t=sP(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:RC;return r+i}return r},0)}function Hit(e){var t=sP(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:RC;return r+i}return r},0)}function Wit(e){var t=aP(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function Vit(e){var t=aP(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Ns=st([op,lp,r0e,$it,zit,Hit,Wit,Vit,Spe,mnt],(e,t,r,n,i,a,s,o,l,c)=>{var d={left:(r.left||0)+i,right:(r.right||0)+a},f={top:(r.top||0)+s,bottom:(r.bottom||0)+o},p=dN(dN({},f),d),m=p.bottom;p.bottom+=n,p=wit(p,l,c);var x=e-p.left-p.right,y=t-p.top-p.bottom;return dN(dN({brushBottom:m},p),{},{width:Math.max(x,0),height:Math.max(y,0)})}),qit=st(Ns,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),wU=st(op,lp,(e,t)=>({x:0,y:0,width:e,height:t})),Git=I.createContext(null),Bl=()=>I.useContext(Git)!=null,oP=e=>e.brush,lP=st([oP,Ns,r0e],(e,t,r)=>({height:e.height,x:ur(e.x)?e.x:t.left,y:ur(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:ur(e.width)?e.width:t.width})),n0e={},i0e={},a0e={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:i,edges:a}={}){let s,o=null;const l=a!=null&&a.includes("leading"),c=a==null||a.includes("trailing"),d=()=>{o!==null&&(r.apply(s,o),s=void 0,o=null)},f=()=>{c&&d(),y()};let p=null;const m=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,f()},n)},x=()=>{p!==null&&(clearTimeout(p),p=null)},y=()=>{x(),s=void 0,o=null},b=()=>{d()},S=function(..._){if(i!=null&&i.aborted)return;s=this,o=_;const C=p==null;m(),l&&C&&d()};return S.schedule=m,S.cancel=y,S.flush=b,i==null||i.addEventListener("abort",y,{once:!0}),S}e.debounce=t})(a0e);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=a0e;function r(n,i=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:o=!0,maxWait:l}=a,c=Array(2);s&&(c[0]="leading"),o&&(c[1]="trailing");let d,f=null;const p=t.debounce(function(...y){d=n.apply(this,y),f=null},i,{edges:c}),m=function(...y){return l!=null&&(f===null&&(f=Date.now()),Date.now()-f>=l)?(d=n.apply(this,y),f=Date.now(),p.cancel(),p.schedule(),d):(p.apply(this,y),d)},x=()=>(p.flush(),d);return m.cancel=p.cancel,m.flush=x,m}e.debounce=r})(i0e);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=i0e;function r(n,i=0,a={}){const{leading:s=!0,trailing:o=!0}=a;return t.debounce(n,i,{leading:s,maxWait:i,trailing:o})}e.throttle=r})(n0e);var Kit=n0e.throttle;const Xit=Vs(Kit);var $I=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(r.replace(/%s/g,()=>i[s++]))}},s0e=(e,t,r)=>{var{width:n="100%",height:i="100%",aspect:a,maxHeight:s}=r,o=Kh(n)?e:Number(n),l=Kh(i)?t:Number(i);return a&&a>0&&(o?l=o/a:l&&(o=l*a),s&&l!=null&&l>s&&(l=s)),{calculatedWidth:o,calculatedHeight:l}},Yit={width:0,height:0,overflow:"visible"},Qit={width:0,overflowX:"visible"},Jit={height:0,overflowY:"visible"},Zit={},eat=e=>{var{width:t,height:r}=e,n=Kh(t),i=Kh(r);return n&&i?Yit:n?Qit:i?Jit:Zit};function tat(e){var{width:t,height:r,aspect:n}=e,i=t,a=r;return i===void 0&&a===void 0?(i="100%",a="100%"):i===void 0?i=n&&n>0?void 0:"100%":a===void 0&&(a=n&&n>0?void 0:"100%"),{width:i,height:a}}function Ea(e){return Number.isFinite(e)}function xf(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function QF(){return QF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},QF.apply(null,arguments)}function DQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function MQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DQ(Object(r),!0).forEach(function(n){rat(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rat(e,t,r){return(t=nat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nat(e){var t=iat(e,"string");return typeof t=="symbol"?t:t+""}function iat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var o0e=I.createContext({width:-1,height:-1});function aat(e){return xf(e.width)&&xf(e.height)}function l0e(e){var{children:t,width:r,height:n}=e,i=I.useMemo(()=>({width:r,height:n}),[r,n]);return aat(i)?I.createElement(o0e.Provider,{value:i},t):null}var SU=()=>I.useContext(o0e),sat=I.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:i,height:a,minWidth:s=0,minHeight:o,maxHeight:l,children:c,debounce:d=0,id:f,className:p,onResize:m,style:x={}}=e,y=I.useRef(null),b=I.useRef();b.current=m,I.useImperativeHandle(t,()=>y.current);var[S,_]=I.useState({containerWidth:n.width,containerHeight:n.height}),C=I.useCallback((D,L)=>{_(B=>{var H=Math.round(D),z=Math.round(L);return B.containerWidth===H&&B.containerHeight===z?B:{containerWidth:H,containerHeight:z}})},[]);I.useEffect(()=>{if(y.current==null||typeof ResizeObserver>"u")return TC;var D=z=>{var ie,{width:X,height:W}=z[0].contentRect;C(X,W),(ie=b.current)===null||ie===void 0||ie.call(b,X,W)};d>0&&(D=Xit(D,d,{trailing:!0,leading:!1}));var L=new ResizeObserver(D),{width:B,height:H}=y.current.getBoundingClientRect();return C(B,H),L.observe(y.current),()=>{L.disconnect()}},[C,d]);var{containerWidth:A,containerHeight:j}=S;$I(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:P,calculatedHeight:O}=s0e(A,j,{width:i,height:a,aspect:r,maxHeight:l});return $I(P!=null&&P>0||O!=null&&O>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,O,i,a,s,o,r),I.createElement("div",{id:f?"".concat(f):void 0,className:wi("recharts-responsive-container",p),style:MQ(MQ({},x),{},{width:i,height:a,minWidth:s,minHeight:o,maxHeight:l}),ref:y},I.createElement("div",{style:eat({width:i,height:a})},I.createElement(l0e,{width:P,height:O},c)))}),oat=I.forwardRef((e,t)=>{var r=SU();if(xf(r.width)&&xf(r.height))return e.children;var{width:n,height:i}=tat({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:a,calculatedHeight:s}=s0e(void 0,void 0,{width:n,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return ur(a)&&ur(s)?I.createElement(l0e,{width:a,height:s},e.children):I.createElement(sat,QF({},e,{width:n,height:i,ref:t}))});function c0e(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var cP=()=>{var e,t=Bl(),r=wr(qit),n=wr(lP),i=(e=wr(oP))===null||e===void 0?void 0:e.padding;return!t||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},lat={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},u0e=()=>{var e;return(e=wr(Ns))!==null&&e!==void 0?e:lat},d0e=()=>wr(op),f0e=()=>wr(lp),ci=e=>e.layout.layoutType,uP=()=>wr(ci),cat=()=>{var e=uP();return e!==void 0},dP=e=>{var t=ka(),r=Bl(),{width:n,height:i}=e,a=SU(),s=n,o=i;return a&&(s=a.width>0?a.width:n,o=a.height>0?a.height:i),I.useEffect(()=>{!r&&xf(s)&&xf(o)&&t(mit({width:s,height:o}))},[t,r,s,o]),null},h0e=Symbol.for("immer-nothing"),FQ=Symbol.for("immer-draftable"),gc=Symbol.for("immer-state");function Ju(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var YS=Object.getPrototypeOf;function Hy(e){return!!e&&!!e[gc]}function wx(e){var t;return e?p0e(e)||Array.isArray(e)||!!e[FQ]||!!((t=e.constructor)!=null&&t[FQ])||jC(e)||hP(e):!1}var uat=Object.prototype.constructor.toString(),LQ=new WeakMap;function p0e(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=LQ.get(r);return n===void 0&&(n=Function.toString.call(r),LQ.set(r,n)),n===uat}function zI(e,t,r=!0){fP(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function fP(e){const t=e[gc];return t?t.type_:Array.isArray(e)?1:jC(e)?2:hP(e)?3:0}function JF(e,t){return fP(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function m0e(e,t,r){const n=fP(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function dat(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function jC(e){return e instanceof Map}function hP(e){return e instanceof Set}function Km(e){return e.copy_||e.base_}function ZF(e,t){if(jC(e))return new Map(e);if(hP(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=p0e(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[gc];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const s=i[a],o=n[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[s]})}return Object.create(YS(e),n)}else{const n=YS(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function EU(e,t=!1){return pP(e)||Hy(e)||!wx(e)||(fP(e)>1&&Object.defineProperties(e,{set:fN,add:fN,clear:fN,delete:fN}),Object.freeze(e),t&&Object.values(e).forEach(r=>EU(r,!0))),e}function fat(){Ju(2)}var fN={value:fat};function pP(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var hat={};function Sx(e){const t=hat[e];return t||Ju(0,e),t}var QS;function g0e(){return QS}function pat(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function BQ(e,t){t&&(Sx("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function e5(e){t5(e),e.drafts_.forEach(mat),e.drafts_=null}function t5(e){e===QS&&(QS=e.parent_)}function UQ(e){return QS=pat(QS,e)}function mat(e){const t=e[gc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function $Q(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[gc].modified_&&(e5(t),Ju(4)),wx(e)&&(e=HI(t,e),t.parent_||WI(t,e)),t.patches_&&Sx("Patches").generateReplacementPatches_(r[gc].base_,e,t.patches_,t.inversePatches_)):e=HI(t,r,[]),e5(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==h0e?e:void 0}function HI(e,t,r){if(pP(t))return t;const n=e.immer_.shouldUseStrictIteration(),i=t[gc];if(!i)return zI(t,(a,s)=>zQ(e,i,t,a,s,r),n),t;if(i.scope_!==e)return t;if(!i.modified_)return WI(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,o=!1;i.type_===3&&(s=new Set(a),a.clear(),o=!0),zI(s,(l,c)=>zQ(e,i,a,l,c,r,o),n),WI(e,a,!1),r&&e.patches_&&Sx("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function zQ(e,t,r,n,i,a,s){if(i==null||typeof i!="object"&&!s)return;const o=pP(i);if(!(o&&!s)){if(Hy(i)){const l=a&&t&&t.type_!==3&&!JF(t.assigned_,n)?a.concat(n):void 0,c=HI(e,i,l);if(m0e(r,n,c),Hy(c))e.canAutoFreeze_=!1;else return}else s&&r.add(i);if(wx(i)&&!o){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===i&&o)return;HI(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(jC(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&WI(e,i)}}}function WI(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&EU(t,r)}function gat(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:g0e(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,a=CU;r&&(i=[n],a=JS);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return n.draft_=o,n.revoke_=s,o}var CU={get(e,t){if(t===gc)return e;const r=Km(e);if(!JF(r,t))return xat(e,r,t);const n=r[t];return e.finalized_||!wx(n)?n:n===lM(e.base_,t)?(cM(e),e.copy_[t]=n5(n,e)):n},has(e,t){return t in Km(e)},ownKeys(e){return Reflect.ownKeys(Km(e))},set(e,t,r){const n=x0e(Km(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=lM(Km(e),t),a=i==null?void 0:i[gc];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(dat(r,i)&&(r!==void 0||JF(e.base_,t)))return!0;cM(e),r5(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return lM(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,cM(e),r5(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Km(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Ju(11)},getPrototypeOf(e){return YS(e.base_)},setPrototypeOf(){Ju(12)}},JS={};zI(CU,(e,t)=>{JS[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});JS.deleteProperty=function(e,t){return JS.set.call(this,e,t,void 0)};JS.set=function(e,t,r){return CU.set.call(this,e[0],t,r,e[0])};function lM(e,t){const r=e[gc];return(r?Km(r):e)[t]}function xat(e,t,r){var i;const n=x0e(t,r);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function x0e(e,t){if(!(t in e))return;let r=YS(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=YS(r)}}function r5(e){e.modified_||(e.modified_=!0,e.parent_&&r5(e.parent_))}function cM(e){e.copy_||(e.copy_=ZF(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var vat=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const a=r;r=t;const s=this;return function(l=a,...c){return s.produce(l,d=>r.call(this,d,...c))}}typeof r!="function"&&Ju(6),n!==void 0&&typeof n!="function"&&Ju(7);let i;if(wx(t)){const a=UQ(this),s=n5(t,void 0);let o=!0;try{i=r(s),o=!1}finally{o?e5(a):t5(a)}return BQ(a,n),$Q(i,a)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===h0e&&(i=void 0),this.autoFreeze_&&EU(i,!0),n){const a=[],s=[];Sx("Patches").generateReplacementPatches_(t,i,a,s),n(a,s)}return i}else Ju(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(s,...o)=>this.produceWithPatches(s,l=>t(l,...o));let n,i;return[this.produce(t,r,(s,o)=>{n=s,i=o}),n,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){wx(e)||Ju(8),Hy(e)&&(e=yat(e));const t=UQ(this),r=n5(e,void 0);return r[gc].isManual_=!0,t5(t),r}finishDraft(e,t){const r=e&&e[gc];(!r||!r.isManual_)&&Ju(9);const{scope_:n}=r;return BQ(n,t),$Q(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=Sx("Patches").applyPatches_;return Hy(e)?n(e,t):this.produce(e,i=>n(i,t))}};function n5(e,t){const r=jC(e)?Sx("MapSet").proxyMap_(e,t):hP(e)?Sx("MapSet").proxySet_(e,t):gat(e,t);return(t?t.scope_:g0e()).drafts_.push(r),r}function yat(e){return Hy(e)||Ju(10,e),v0e(e)}function v0e(e){if(!wx(e)||pP(e))return e;const t=e[gc];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=ZF(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=ZF(e,!0);return zI(r,(i,a)=>{m0e(r,i,v0e(a))},n),t&&(t.finalized_=!1),r}var bat=new vat;bat.produce;var wat={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},y0e=Ll({name:"legend",initialState:wat,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Fi()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,i=ld(e).payload.indexOf(r);i>-1&&(e.payload[i]=n)},prepare:Fi()},removeLegendPayload:{reducer(e,t){var r=ld(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Fi()}}}),{setLegendSize:MAt,setLegendSettings:FAt,addLegendPayload:Sat,replaceLegendPayload:Eat,removeLegendPayload:Cat}=y0e.actions,kat=y0e.reducer;function i5(){return i5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i5.apply(null,arguments)}function HQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function uM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HQ(Object(r),!0).forEach(function(n){_at(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _at(e,t,r){return(t=Nat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nat(e){var t=Aat(e,"string");return typeof t=="symbol"?t:t+""}function Aat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tat(e){return Array.isArray(e)&&mf(e[0])&&mf(e[1])?e.join(" ~ "):e}var Iat=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:i={},payload:a,formatter:s,itemSorter:o,wrapperClassName:l,labelClassName:c,label:d,labelFormatter:f,accessibilityLayer:p=!1}=e,m=()=>{if(a&&a.length){var j={padding:0,margin:0},P=(o?Y3(a,o):a).map((O,D)=>{if(O.type==="none")return null;var L=O.formatter||s||Tat,{value:B,name:H}=O,z=B,ie=H;if(L){var X=L(B,H,O,D,a);if(Array.isArray(X))[z,ie]=X;else if(X!=null)z=X;else return null}var W=uM({display:"block",paddingTop:4,paddingBottom:4,color:O.color||"#000"},n);return I.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(D),style:W},mf(ie)?I.createElement("span",{className:"recharts-tooltip-item-name"},ie):null,mf(ie)?I.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,I.createElement("span",{className:"recharts-tooltip-item-value"},z),I.createElement("span",{className:"recharts-tooltip-item-unit"},O.unit||""))});return I.createElement("ul",{className:"recharts-tooltip-item-list",style:j},P)}return null},x=uM({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),y=uM({margin:0},i),b=!ks(d),S=b?d:"",_=wi("recharts-default-tooltip",l),C=wi("recharts-tooltip-label",c);b&&f&&a!==void 0&&a!==null&&(S=f(d,a));var A=p?{role:"status","aria-live":"assertive"}:{};return I.createElement("div",i5({className:_,style:x},A),I.createElement("p",{className:C,style:y},I.isValidElement(S)?S:"".concat(S)),m())},$w="recharts-tooltip-wrapper",Oat={visibility:"hidden"};function Pat(e){var{coordinate:t,translateX:r,translateY:n}=e;return wi($w,{["".concat($w,"-right")]:ur(r)&&t&&ur(t.x)&&r>=t.x,["".concat($w,"-left")]:ur(r)&&t&&ur(t.x)&&r<t.x,["".concat($w,"-bottom")]:ur(n)&&t&&ur(t.y)&&n>=t.y,["".concat($w,"-top")]:ur(n)&&t&&ur(t.y)&&n<t.y})}function WQ(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:l,viewBoxDimension:c}=e;if(a&&ur(a[n]))return a[n];var d=r[n]-o-(i>0?i:0),f=r[n]+i;if(t[n])return s[n]?d:f;var p=l[n];if(p==null)return 0;if(s[n]){var m=d,x=p;return m<x?Math.max(f,p):Math.max(d,p)}if(c==null)return 0;var y=f+o,b=p+c;return y>b?Math.max(d,p):Math.max(f,p)}function Rat(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function jat(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:i,reverseDirection:a,tooltipBox:s,useTranslate3d:o,viewBox:l}=e,c,d,f;return s.height>0&&s.width>0&&r?(d=WQ({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),f=WQ({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),c=Rat({translateX:d,translateY:f,useTranslate3d:o})):c=Oat,{cssProperties:c,cssClasses:Pat({translateX:d,translateY:f,coordinate:r})}}function VQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function hN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VQ(Object(r),!0).forEach(function(n){a5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function a5(e,t,r){return(t=Dat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dat(e){var t=Mat(e,"string");return typeof t=="symbol"?t:t+""}function Mat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Fat extends I.PureComponent{constructor(){super(...arguments),a5(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),a5(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:l,offset:c,position:d,reverseDirection:f,useTranslate3d:p,viewBox:m,wrapperStyle:x,lastBoundingBox:y,innerRef:b,hasPortalFromProps:S}=this.props,{cssClasses:_,cssProperties:C}=jat({allowEscapeViewBox:r,coordinate:s,offsetTopLeft:c,position:d,reverseDirection:f,tooltipBox:{height:y.height,width:y.width},useTranslate3d:p,viewBox:m}),A=S?{}:hN(hN({transition:l&&t?"transform ".concat(n,"ms ").concat(i):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),j=hN(hN({},A),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},x);return I.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:_,style:j,ref:b},a)}}var Lat=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Tb={devToolsEnabled:!1,isSsr:Lat()},b0e=()=>{var e;return(e=wr(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function s5(){return s5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s5.apply(null,arguments)}function qQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function GQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qQ(Object(r),!0).forEach(function(n){Bat(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bat(e,t,r){return(t=Uat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uat(e){var t=$at(e,"string");return typeof t=="symbol"?t:t+""}function $at(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KQ={curveBasisClosed:vrt,curveBasisOpen:yrt,curveBasis:xrt,curveBumpX:nrt,curveBumpY:irt,curveLinearClosed:brt,curveLinear:W3,curveMonotoneX:wrt,curveMonotoneY:Srt,curveNatural:Ert,curveStep:Crt,curveStepAfter:_rt,curveStepBefore:krt},VI=e=>Ea(e.x)&&Ea(e.y),XQ=e=>e.base!=null&&VI(e.base)&&VI(e),zw=e=>e.x,Hw=e=>e.y,zat=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(AC(e));return(r==="curveMonotone"||r==="curveBump")&&t?KQ["".concat(r).concat(t==="vertical"?"Y":"X")]:KQ[r]||W3},Hat=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:i,connectNulls:a=!1}=e,s=zat(t,i),o=a?r.filter(VI):r,l;if(Array.isArray(n)){var c=r.map((m,x)=>GQ(GQ({},m),{},{base:n[x]}));i==="vertical"?l=aN().y(Hw).x1(zw).x0(m=>m.base.x):l=aN().x(zw).y1(Hw).y0(m=>m.base.y);var d=l.defined(XQ).curve(s),f=a?c.filter(XQ):c;return d(f)}i==="vertical"&&ur(n)?l=aN().y(Hw).x1(zw).x0(n):ur(n)?l=aN().x(zw).y1(Hw).y0(n):l=Mhe().x(zw).y(Hw);var p=l.defined(VI).curve(s);return p(o)},w0e=e=>{var{className:t,points:r,path:n,pathRef:i}=e;if((!r||!r.length)&&!n)return null;var a=r&&r.length?Hat(e):n;return I.createElement("path",s5({},qh(e),Grt(e),{className:wi("recharts-curve",t),d:a===null?void 0:a,ref:i}))},Wat=["x","y","top","left","width","height","className"];function o5(){return o5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o5.apply(null,arguments)}function YQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Vat(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YQ(Object(r),!0).forEach(function(n){qat(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qat(e,t,r){return(t=Gat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gat(e){var t=Kat(e,"string");return typeof t=="symbol"?t:t+""}function Kat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xat(e,t){if(e==null)return{};var r,n,i=Yat(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Yat(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Qat=(e,t,r,n,i,a)=>"M".concat(e,",").concat(i,"v").concat(n,"M").concat(a,",").concat(t,"h").concat(r),Jat=e=>{var{x:t=0,y:r=0,top:n=0,left:i=0,width:a=0,height:s=0,className:o}=e,l=Xat(e,Wat),c=Vat({x:t,y:r,top:n,left:i,width:a,height:s},l);return!ur(t)||!ur(r)||!ur(a)||!ur(s)||!ur(n)||!ur(i)?null:I.createElement("path",o5({},gu(c),{className:wi("recharts-cross",o),d:Qat(t,r,a,s,n,i)}))};function Zat(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function QQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function JQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QQ(Object(r),!0).forEach(function(n){est(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function est(e,t,r){return(t=tst(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tst(e){var t=rst(e,"string");return typeof t=="symbol"?t:t+""}function rst(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nst=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),S0e=(e,t,r)=>e.map(n=>"".concat(nst(n)," ").concat(t,"ms ").concat(r)).join(","),ist=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(i=>n.includes(i))),ZS=(e,t)=>Object.keys(t).reduce((r,n)=>JQ(JQ({},r),{},{[n]:e(n,t[n])}),{});function ZQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ga(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZQ(Object(r),!0).forEach(function(n){ast(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ast(e,t,r){return(t=sst(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sst(e){var t=ost(e,"string");return typeof t=="symbol"?t:t+""}function ost(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qI=(e,t,r)=>e+(t-e)*r,l5=e=>{var{from:t,to:r}=e;return t!==r},E0e=(e,t,r)=>{var n=ZS((i,a)=>{if(l5(a)){var[s,o]=e(a.from,a.to,a.velocity);return Ga(Ga({},a),{},{from:s,velocity:o})}return a},t);return r<1?ZS((i,a)=>l5(a)?Ga(Ga({},a),{},{velocity:qI(a.velocity,n[i].velocity,r),from:qI(a.from,n[i].from,r)}):a,t):E0e(e,n,r-1)};function lst(e,t,r,n,i,a){var s,o=n.reduce((p,m)=>Ga(Ga({},p),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),l=()=>ZS((p,m)=>m.from,o),c=()=>!Object.values(o).filter(l5).length,d=null,f=p=>{s||(s=p);var m=p-s,x=m/r.dt;o=E0e(r,o,x),i(Ga(Ga(Ga({},e),t),l())),s=p,c()||(d=a.setTimeout(f))};return()=>(d=a.setTimeout(f),()=>{var p;(p=d)===null||p===void 0||p()})}function cst(e,t,r,n,i,a,s){var o=null,l=i.reduce((f,p)=>Ga(Ga({},f),{},{[p]:[e[p],t[p]]}),{}),c,d=f=>{c||(c=f);var p=(f-c)/n,m=ZS((y,b)=>qI(...b,r(p)),l);if(a(Ga(Ga(Ga({},e),t),m)),p<1)o=s.setTimeout(d);else{var x=ZS((y,b)=>qI(...b,r(1)),l);a(Ga(Ga(Ga({},e),t),x))}};return()=>(o=s.setTimeout(d),()=>{var f;(f=o)===null||f===void 0||f()})}const ust=(e,t,r,n,i,a)=>{var s=ist(e,t);return r==null?()=>(i(Ga(Ga({},e),t)),()=>{}):r.isStepper===!0?lst(e,t,r,s,i,a):cst(e,t,r,n,s,i,a)};var GI=1e-4,C0e=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],k0e=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),eJ=(e,t)=>r=>{var n=C0e(e,t);return k0e(n,r)},dst=(e,t)=>r=>{var n=C0e(e,t),i=[...n.map((a,s)=>a*s).slice(1),0];return k0e(i,r)},fst=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i,a=r[0].split("(");if(a[0]==="cubic-bezier"&&((i=a[1])===null||i===void 0?void 0:i.split(")")[0].split(",").length)===4){var s=a[1].split(")")[0].split(",").map(o=>parseFloat(o));return[s[0],s[1],s[2],s[3]]}}}return r.length===4?r:[0,0,1,1]},hst=(e,t,r,n)=>{var i=eJ(e,r),a=eJ(t,n),s=dst(e,r),o=c=>c>1?1:c<0?0:c,l=c=>{for(var d=c>1?1:c,f=d,p=0;p<8;++p){var m=i(f)-d,x=s(f);if(Math.abs(m-d)<GI||x<GI)return a(f);f=o(f-m/x)}return a(f)};return l.isStepper=!1,l},tJ=function(){return hst(...fst(...arguments))},pst=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=t,a=(s,o,l)=>{var c=-(s-o)*r,d=l*n,f=l+(c-d)*i/1e3,p=l*i/1e3+s;return Math.abs(p-o)<GI&&Math.abs(f)<GI?[o,0]:[p,f]};return a.isStepper=!0,a.dt=i,a},mst=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return tJ(e);case"spring":return pst();default:if(e.split("(")[0]==="cubic-bezier")return tJ(e)}return typeof e=="function"?e:null};function gst(e){var t,r=()=>null,n=!1,i=null,a=s=>{if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,[l,...c]=o;if(typeof l=="number"){i=e.setTimeout(a.bind(null,c),l);return}a(l),i=e.setTimeout(a.bind(null,c));return}typeof s=="string"&&(t=s,r(t)),typeof s=="object"&&(t=s,r(t)),typeof s=="function"&&s()}};return{stop:()=>{n=!0},start:s=>{n=!1,i&&(i(),i=null),a(s)},subscribe:s=>(r=s,()=>{r=()=>null}),getTimeoutController:()=>e}}class xst{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,a=s=>{s-n>=r?t(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function vst(){return gst(new xst)}var yst=I.createContext(vst);function bst(e,t){var r=I.useContext(yst);return I.useMemo(()=>t??r(e),[e,t,r])}var wst={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},rJ={t:0},dM={t:1};function kU(e){var t=Cc(e,wst),{isActive:r,canBegin:n,duration:i,easing:a,begin:s,onAnimationEnd:o,onAnimationStart:l,children:c}=t,d=r==="auto"?!Tb.isSsr:r,f=bst(t.animationId,t.animationManager),[p,m]=I.useState(d?rJ:dM),x=I.useRef(null);return I.useEffect(()=>{d||m(dM)},[d]),I.useEffect(()=>{if(!d||!n)return TC;var y=ust(rJ,dM,mst(a),i,m,f.getTimeoutController()),b=()=>{x.current=y()};return f.start([l,s,b,i,o]),()=>{f.stop(),x.current&&x.current(),o()}},[d,n,i,a,s,l,o,f]),c(p.t)}function _U(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=I.useRef(qS(t)),n=I.useRef(e);return n.current!==e&&(r.current=qS(t),n.current=e),r.current}var Sst=["radius"],Est=["radius"];function nJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function iJ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nJ(Object(r),!0).forEach(function(n){Cst(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cst(e,t,r){return(t=kst(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kst(e){var t=_st(e,"string");return typeof t=="symbol"?t:t+""}function _st(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KI(){return KI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},KI.apply(null,arguments)}function aJ(e,t){if(e==null)return{};var r,n,i=Nst(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Nst(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var sJ=(e,t,r,n,i)=>{var a=Math.min(Math.abs(r)/2,Math.abs(n)/2),s=n>=0?1:-1,o=r>=0?1:-1,l=n>=0&&r>=0||n<0&&r<0?1:0,c;if(a>0&&i instanceof Array){for(var d=[0,0,0,0],f=0,p=4;f<p;f++)d[f]=i[f]>a?a:i[f];c="M".concat(e,",").concat(t+s*d[0]),d[0]>0&&(c+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(l,",").concat(e+o*d[0],",").concat(t)),c+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(c+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(l,`,
        `).concat(e+r,",").concat(t+s*d[1])),c+="L ".concat(e+r,",").concat(t+n-s*d[2]),d[2]>0&&(c+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(l,`,
        `).concat(e+r-o*d[2],",").concat(t+n)),c+="L ".concat(e+o*d[3],",").concat(t+n),d[3]>0&&(c+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(l,`,
        `).concat(e,",").concat(t+n-s*d[3])),c+="Z"}else if(a>0&&i===+i&&i>0){var m=Math.min(a,i);c="M ".concat(e,",").concat(t+s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(e+o*m,",").concat(t,`
            L `).concat(e+r-o*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(e+r,",").concat(t+s*m,`
            L `).concat(e+r,",").concat(t+n-s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(e+r-o*m,",").concat(t+n,`
            L `).concat(e+o*m,",").concat(t+n,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(e,",").concat(t+n-s*m," Z")}else c="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return c},oJ={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},_0e=e=>{var t=Cc(e,oJ),r=I.useRef(null),[n,i]=I.useState(-1);I.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var te=r.current.getTotalLength();te&&i(te)}catch{}},[]);var{x:a,y:s,width:o,height:l,radius:c,className:d}=t,{animationEasing:f,animationDuration:p,animationBegin:m,isAnimationActive:x,isUpdateAnimationActive:y}=t,b=I.useRef(o),S=I.useRef(l),_=I.useRef(a),C=I.useRef(s),A=I.useMemo(()=>({x:a,y:s,width:o,height:l,radius:c}),[a,s,o,l,c]),j=_U(A,"rectangle-");if(a!==+a||s!==+s||o!==+o||l!==+l||o===0||l===0)return null;var P=wi("recharts-rectangle",d);if(!y){var O=gu(t),{radius:D}=O,L=aJ(O,Sst);return I.createElement("path",KI({},L,{radius:typeof c=="number"?c:void 0,className:P,d:sJ(a,s,o,l,c)}))}var B=b.current,H=S.current,z=_.current,ie=C.current,X="0px ".concat(n===-1?1:n,"px"),W="".concat(n,"px 0px"),Q=S0e(["strokeDasharray"],p,typeof f=="string"?f:oJ.animationEasing);return I.createElement(kU,{animationId:j,key:j,canBegin:n>0,duration:p,easing:f,isActive:y,begin:m},te=>{var J=Ms(B,o,te),Y=Ms(H,l,te),pe=Ms(z,a,te),_e=Ms(ie,s,te);r.current&&(b.current=J,S.current=Y,_.current=pe,C.current=_e);var ee;x?te>0?ee={transition:Q,strokeDasharray:W}:ee={strokeDasharray:X}:ee={strokeDasharray:W};var de=gu(t),{radius:G}=de,q=aJ(de,Est);return I.createElement("path",KI({},q,{radius:typeof c=="number"?c:void 0,className:P,d:sJ(pe,_e,J,Y,c),ref:r,style:iJ(iJ({},ee),t.style)}))})};function lJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function cJ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lJ(Object(r),!0).forEach(function(n){Ast(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ast(e,t,r){return(t=Tst(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tst(e){var t=Ist(e,"string");return typeof t=="symbol"?t:t+""}function Ist(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var XI=Math.PI/180,Ost=e=>e*180/Math.PI,zs=(e,t,r,n)=>({x:e+Math.cos(-XI*n)*r,y:t+Math.sin(-XI*n)*r}),Pst=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Rst=(e,t)=>{var{x:r,y:n}=e,{x:i,y:a}=t;return Math.sqrt((r-i)**2+(n-a)**2)},jst=(e,t)=>{var{x:r,y:n}=e,{cx:i,cy:a}=t,s=Rst({x:r,y:n},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var o=(r-i)/s,l=Math.acos(o);return n>a&&(l=2*Math.PI-l),{radius:s,angle:Ost(l),angleInRadian:l}},Dst=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),i=Math.floor(r/360),a=Math.min(n,i);return{startAngle:t-a*360,endAngle:r-a*360}},Mst=(e,t)=>{var{startAngle:r,endAngle:n}=t,i=Math.floor(r/360),a=Math.floor(n/360),s=Math.min(i,a);return e+s*360},Fst=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:i,angle:a}=jst({x:r,y:n},t),{innerRadius:s,outerRadius:o}=t;if(i<s||i>o||i===0)return null;var{startAngle:l,endAngle:c}=Dst(t),d=a,f;if(l<=c){for(;d>c;)d-=360;for(;d<l;)d+=360;f=d>=l&&d<=c}else{for(;d>l;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=l}return f?cJ(cJ({},t),{},{radius:i,angle:Mst(d,t)}):null};function N0e(e){var{cx:t,cy:r,radius:n,startAngle:i,endAngle:a}=e,s=zs(t,r,n,i),o=zs(t,r,n,a);return{points:[s,o],cx:t,cy:r,radius:n,startAngle:i,endAngle:a}}function c5(){return c5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c5.apply(null,arguments)}var Lst=(e,t)=>{var r=yl(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},pN=e=>{var{cx:t,cy:r,radius:n,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:l}=e,c=o*(s?1:-1)+n,d=Math.asin(o/c)/XI,f=l?i:i+a*d,p=zs(t,r,c,f),m=zs(t,r,n,f),x=l?i-a*d:i,y=zs(t,r,c*Math.cos(d*XI),x);return{center:p,circleTangency:m,lineTangency:y,theta:d}},A0e=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:a,endAngle:s}=e,o=Lst(a,s),l=a+o,c=zs(t,r,i,a),d=zs(t,r,i,l),f="M ".concat(c.x,",").concat(c.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(a>l),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var p=zs(t,r,n,a),m=zs(t,r,n,l);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(a<=l),`,
            `).concat(p.x,",").concat(p.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},Bst=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:l,endAngle:c}=e,d=yl(c-l),{circleTangency:f,lineTangency:p,theta:m}=pN({cx:t,cy:r,radius:i,angle:l,sign:d,cornerRadius:a,cornerIsExternal:o}),{circleTangency:x,lineTangency:y,theta:b}=pN({cx:t,cy:r,radius:i,angle:c,sign:-d,cornerRadius:a,cornerIsExternal:o}),S=o?Math.abs(l-c):Math.abs(l-c)-m-b;if(S<0)return s?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):A0e({cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:l,endAngle:c});var _="M ".concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(S>180),",").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
  `);if(n>0){var{circleTangency:C,lineTangency:A,theta:j}=pN({cx:t,cy:r,radius:n,angle:l,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:P,lineTangency:O,theta:D}=pN({cx:t,cy:r,radius:n,angle:c,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),L=o?Math.abs(l-c):Math.abs(l-c)-j-D;if(L<0&&a===0)return"".concat(_,"L").concat(t,",").concat(r,"Z");_+="L".concat(O.x,",").concat(O.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(L>180),",").concat(+(d>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(A.x,",").concat(A.y,"Z")}else _+="L".concat(t,",").concat(r,"Z");return _},Ust={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},T0e=e=>{var t=Cc(e,Ust),{cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d,className:f}=t;if(a<i||c===d)return null;var p=wi("recharts-sector",f),m=a-i,x=yd(s,m,0,!0),y;return x>0&&Math.abs(c-d)<360?y=Bst({cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:Math.min(x,m/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}):y=A0e({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:c,endAngle:d}),I.createElement("path",c5({},gu(t),{className:p,d:y}))};function $st(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(Jhe(t)){if(e==="centric"){var{cx:n,cy:i,innerRadius:a,outerRadius:s,angle:o}=t,l=zs(n,i,a,o),c=zs(n,i,s,o);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return N0e(t)}}var I0e={},O0e={},P0e={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dU;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(P0e);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P0e;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(O0e);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fU,r=O0e;function n(i,a,s){s&&typeof s!="number"&&t.isIterateeCall(i,a,s)&&(a=s=void 0),i=r.toFinite(i),a===void 0?(a=i,i=0):a=r.toFinite(a),s=s===void 0?i<a?1:-1:r.toFinite(s);const o=Math.max(Math.ceil((a-i)/(s||1)),0),l=new Array(o);for(let c=0;c<o;c++)l[c]=i,i+=s;return l}e.range=n})(I0e);var zst=I0e.range;const R0e=Vs(zst);function j0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Hst(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function NU(e){let t,r,n;e.length!==2?(t=j0,r=(o,l)=>j0(e(o),l),n=(o,l)=>e(o)-l):(t=e===j0||e===Hst?e:Wst,r=e,n=e);function i(o,l,c=0,d=o.length){if(c<d){if(t(l,l)!==0)return d;do{const f=c+d>>>1;r(o[f],l)<0?c=f+1:d=f}while(c<d)}return c}function a(o,l,c=0,d=o.length){if(c<d){if(t(l,l)!==0)return d;do{const f=c+d>>>1;r(o[f],l)<=0?c=f+1:d=f}while(c<d)}return c}function s(o,l,c=0,d=o.length){const f=i(o,l,c,d-1);return f>c&&n(o[f-1],l)>-n(o[f],l)?f-1:f}return{left:i,center:s,right:a}}function Wst(){return 0}function j0e(e){return e===null?NaN:+e}function*Vst(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const qst=NU(j0),DC=qst.right;NU(j0e).center;class uJ extends Map{constructor(t,r=Xst){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(dJ(this,t))}has(t){return super.has(dJ(this,t))}set(t,r){return super.set(Gst(this,t),r)}delete(t){return super.delete(Kst(this,t))}}function dJ({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Gst({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Kst({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Xst(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Yst(e=j0){if(e===j0)return D0e;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function D0e(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Qst=Math.sqrt(50),Jst=Math.sqrt(10),Zst=Math.sqrt(2);function YI(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),s=a>=Qst?10:a>=Jst?5:a>=Zst?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/s,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*s,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=r&&r<2?YI(e,t,r*2):[o,l,c]}function u5(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,a,s]=n?YI(t,e,r):YI(e,t,r);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(n)if(s<0)for(let c=0;c<o;++c)l[c]=(a-c)/-s;else for(let c=0;c<o;++c)l[c]=(a-c)*s;else if(s<0)for(let c=0;c<o;++c)l[c]=(i+c)/-s;else for(let c=0;c<o;++c)l[c]=(i+c)*s;return l}function d5(e,t,r){return t=+t,e=+e,r=+r,YI(e,t,r)[2]}function f5(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?d5(t,e,r):d5(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function fJ(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function hJ(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function M0e(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?D0e:Yst(i);n>r;){if(n-r>600){const l=n-r+1,c=t-r+1,d=Math.log(l),f=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*f*(l-f)/l)*(c-l/2<0?-1:1),m=Math.max(r,Math.floor(t-c*f/l+p)),x=Math.min(n,Math.floor(t+(l-c)*f/l+p));M0e(e,t,m,x,i)}const a=e[t];let s=r,o=n;for(Ww(e,r,t),i(e[n],a)>0&&Ww(e,r,n);s<o;){for(Ww(e,s,o),++s,--o;i(e[s],a)<0;)++s;for(;i(e[o],a)>0;)--o}i(e[r],a)===0?Ww(e,r,o):(++o,Ww(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function Ww(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function eot(e,t,r){if(e=Float64Array.from(Vst(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return hJ(e);if(t>=1)return fJ(e);var n,i=(n-1)*t,a=Math.floor(i),s=fJ(M0e(e,a).subarray(0,a+1)),o=hJ(e.subarray(a+1));return s+(o-s)*(i-a)}}function tot(e,t,r=j0e){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,a=Math.floor(i),s=+r(e[a],a,e),o=+r(e[a+1],a+1,e);return s+(o-s)*(i-a)}}function rot(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(i);++n<i;)a[n]=e+n*r;return a}function ku(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function cp(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const h5=Symbol("implicit");function AU(){var e=new uJ,t=[],r=[],n=h5;function i(a){let s=e.get(a);if(s===void 0){if(n!==h5)return n;e.set(a,s=t.push(a)-1)}return r[s%r.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new uJ;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return AU(t,r).unknown(n)},ku.apply(i,arguments),i}function TU(){var e=AU().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,a,s,o=!1,l=0,c=0,d=.5;delete e.unknown;function f(){var p=t().length,m=i<n,x=m?i:n,y=m?n:i;a=(y-x)/Math.max(1,p-l+c*2),o&&(a=Math.floor(a)),x+=(y-x-a*(p-l))*d,s=a*(1-l),o&&(x=Math.round(x),s=Math.round(s));var b=rot(p).map(function(S){return x+a*S});return r(m?b.reverse():b)}return e.domain=function(p){return arguments.length?(t(p),f()):t()},e.range=function(p){return arguments.length?([n,i]=p,n=+n,i=+i,f()):[n,i]},e.rangeRound=function(p){return[n,i]=p,n=+n,i=+i,o=!0,f()},e.bandwidth=function(){return s},e.step=function(){return a},e.round=function(p){return arguments.length?(o=!!p,f()):o},e.padding=function(p){return arguments.length?(l=Math.min(1,c=+p),f()):l},e.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),f()):l},e.paddingOuter=function(p){return arguments.length?(c=+p,f()):c},e.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),f()):d},e.copy=function(){return TU(t(),[n,i]).round(o).paddingInner(l).paddingOuter(c).align(d)},ku.apply(f(),arguments)}function F0e(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return F0e(t())},e}function not(){return F0e(TU.apply(null,arguments).paddingInner(1))}function IU(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function L0e(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function MC(){}var eE=.7,QI=1/eE,zv="\\s*([+-]?\\d+)\\s*",tE="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",uf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iot=/^#([0-9a-f]{3,8})$/,aot=new RegExp(`^rgb\\(${zv},${zv},${zv}\\)$`),sot=new RegExp(`^rgb\\(${uf},${uf},${uf}\\)$`),oot=new RegExp(`^rgba\\(${zv},${zv},${zv},${tE}\\)$`),lot=new RegExp(`^rgba\\(${uf},${uf},${uf},${tE}\\)$`),cot=new RegExp(`^hsl\\(${tE},${uf},${uf}\\)$`),uot=new RegExp(`^hsla\\(${tE},${uf},${uf},${tE}\\)$`),pJ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};IU(MC,rE,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:mJ,formatHex:mJ,formatHex8:dot,formatHsl:fot,formatRgb:gJ,toString:gJ});function mJ(){return this.rgb().formatHex()}function dot(){return this.rgb().formatHex8()}function fot(){return B0e(this).formatHsl()}function gJ(){return this.rgb().formatRgb()}function rE(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=iot.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?xJ(t):r===3?new bl(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?mN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?mN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=aot.exec(e))?new bl(t[1],t[2],t[3],1):(t=sot.exec(e))?new bl(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=oot.exec(e))?mN(t[1],t[2],t[3],t[4]):(t=lot.exec(e))?mN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=cot.exec(e))?bJ(t[1],t[2]/100,t[3]/100,1):(t=uot.exec(e))?bJ(t[1],t[2]/100,t[3]/100,t[4]):pJ.hasOwnProperty(e)?xJ(pJ[e]):e==="transparent"?new bl(NaN,NaN,NaN,0):null}function xJ(e){return new bl(e>>16&255,e>>8&255,e&255,1)}function mN(e,t,r,n){return n<=0&&(e=t=r=NaN),new bl(e,t,r,n)}function hot(e){return e instanceof MC||(e=rE(e)),e?(e=e.rgb(),new bl(e.r,e.g,e.b,e.opacity)):new bl}function p5(e,t,r,n){return arguments.length===1?hot(e):new bl(e,t,r,n??1)}function bl(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}IU(bl,p5,L0e(MC,{brighter(e){return e=e==null?QI:Math.pow(QI,e),new bl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?eE:Math.pow(eE,e),new bl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new bl(Vg(this.r),Vg(this.g),Vg(this.b),JI(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vJ,formatHex:vJ,formatHex8:pot,formatRgb:yJ,toString:yJ}));function vJ(){return`#${vg(this.r)}${vg(this.g)}${vg(this.b)}`}function pot(){return`#${vg(this.r)}${vg(this.g)}${vg(this.b)}${vg((isNaN(this.opacity)?1:this.opacity)*255)}`}function yJ(){const e=JI(this.opacity);return`${e===1?"rgb(":"rgba("}${Vg(this.r)}, ${Vg(this.g)}, ${Vg(this.b)}${e===1?")":`, ${e})`}`}function JI(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Vg(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function vg(e){return e=Vg(e),(e<16?"0":"")+e.toString(16)}function bJ(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Zu(e,t,r,n)}function B0e(e){if(e instanceof Zu)return new Zu(e.h,e.s,e.l,e.opacity);if(e instanceof MC||(e=rE(e)),!e)return new Zu;if(e instanceof Zu)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),s=NaN,o=a-i,l=(a+i)/2;return o?(t===a?s=(r-n)/o+(r<n)*6:r===a?s=(n-t)/o+2:s=(t-r)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new Zu(s,o,l,e.opacity)}function mot(e,t,r,n){return arguments.length===1?B0e(e):new Zu(e,t,r,n??1)}function Zu(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}IU(Zu,mot,L0e(MC,{brighter(e){return e=e==null?QI:Math.pow(QI,e),new Zu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?eE:Math.pow(eE,e),new Zu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new bl(fM(e>=240?e-240:e+120,i,n),fM(e,i,n),fM(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Zu(wJ(this.h),gN(this.s),gN(this.l),JI(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=JI(this.opacity);return`${e===1?"hsl(":"hsla("}${wJ(this.h)}, ${gN(this.s)*100}%, ${gN(this.l)*100}%${e===1?")":`, ${e})`}`}}));function wJ(e){return e=(e||0)%360,e<0?e+360:e}function gN(e){return Math.max(0,Math.min(1,e||0))}function fM(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const OU=e=>()=>e;function got(e,t){return function(r){return e+r*t}}function xot(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function vot(e){return(e=+e)==1?U0e:function(t,r){return r-t?xot(t,r,e):OU(isNaN(t)?r:t)}}function U0e(e,t){var r=t-e;return r?got(e,r):OU(isNaN(e)?t:e)}const SJ=function e(t){var r=vot(t);function n(i,a){var s=r((i=p5(i)).r,(a=p5(a)).r),o=r(i.g,a.g),l=r(i.b,a.b),c=U0e(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=o(d),i.b=l(d),i.opacity=c(d),i+""}}return n.gamma=e,n}(1);function yot(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=e[i]*(1-a)+t[i]*a;return n}}function bot(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function wot(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),a=new Array(r),s;for(s=0;s<n;++s)i[s]=Ib(e[s],t[s]);for(;s<r;++s)a[s]=t[s];return function(o){for(s=0;s<n;++s)a[s]=i[s](o);return a}}function Sot(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function ZI(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Eot(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=Ib(e[i],t[i]):n[i]=t[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var m5=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hM=new RegExp(m5.source,"g");function Cot(e){return function(){return e}}function kot(e){return function(t){return e(t)+""}}function _ot(e,t){var r=m5.lastIndex=hM.lastIndex=0,n,i,a,s=-1,o=[],l=[];for(e=e+"",t=t+"";(n=m5.exec(e))&&(i=hM.exec(t));)(a=i.index)>r&&(a=t.slice(r,a),o[s]?o[s]+=a:o[++s]=a),(n=n[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:ZI(n,i)})),r=hM.lastIndex;return r<t.length&&(a=t.slice(r),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?kot(l[0].x):Cot(t):(t=l.length,function(c){for(var d=0,f;d<t;++d)o[(f=l[d]).i]=f.x(c);return o.join("")})}function Ib(e,t){var r=typeof t,n;return t==null||r==="boolean"?OU(t):(r==="number"?ZI:r==="string"?(n=rE(t))?(t=n,SJ):_ot:t instanceof rE?SJ:t instanceof Date?Sot:bot(t)?yot:Array.isArray(t)?wot:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Eot:ZI)(e,t)}function PU(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Not(e,t){t===void 0&&(t=e,e=Ib);for(var r=0,n=t.length-1,i=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(i,i=t[++r]);return function(s){var o=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return a[o](s-o)}}function Aot(e){return function(){return e}}function eO(e){return+e}var EJ=[0,1];function qo(e){return e}function g5(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Aot(isNaN(t)?NaN:.5)}function Tot(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function Iot(e,t,r){var n=e[0],i=e[1],a=t[0],s=t[1];return i<n?(n=g5(i,n),a=r(s,a)):(n=g5(n,i),a=r(a,s)),function(o){return a(n(o))}}function Oot(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),a=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)i[s]=g5(e[s],e[s+1]),a[s]=r(t[s],t[s+1]);return function(o){var l=DC(e,o,1,n)-1;return a[l](i[l](o))}}function FC(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function mP(){var e=EJ,t=EJ,r=Ib,n,i,a,s=qo,o,l,c;function d(){var p=Math.min(e.length,t.length);return s!==qo&&(s=Tot(e[0],e[p-1])),o=p>2?Oot:Iot,l=c=null,f}function f(p){return p==null||isNaN(p=+p)?a:(l||(l=o(e.map(n),t,r)))(n(s(p)))}return f.invert=function(p){return s(i((c||(c=o(t,e.map(n),ZI)))(p)))},f.domain=function(p){return arguments.length?(e=Array.from(p,eO),d()):e.slice()},f.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},f.rangeRound=function(p){return t=Array.from(p),r=PU,d()},f.clamp=function(p){return arguments.length?(s=p?!0:qo,d()):s!==qo},f.interpolate=function(p){return arguments.length?(r=p,d()):r},f.unknown=function(p){return arguments.length?(a=p,f):a},function(p,m){return n=p,i=m,d()}}function RU(){return mP()(qo,qo)}function Pot(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function tO(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Wy(e){return e=tO(Math.abs(e)),e?e[1]:NaN}function Rot(e,t){return function(r,n){for(var i=r.length,a=[],s=0,o=e[0],l=0;i>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),a.push(r.substring(i-=o,i+o)),!((l+=o+1)>n));)o=e[s=(s+1)%e.length];return a.reverse().join(t)}}function jot(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Dot=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nE(e){if(!(t=Dot.exec(e)))throw new Error("invalid format: "+e);var t;return new jU({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}nE.prototype=jU.prototype;function jU(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}jU.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Mot(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var $0e;function Fot(e,t){var r=tO(e,t);if(!r)return e+"";var n=r[0],i=r[1],a=i-($0e=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+tO(e,Math.max(0,t+a-1))[0]}function CJ(e,t){var r=tO(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const kJ={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Pot,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>CJ(e*100,t),r:CJ,s:Fot,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function _J(e){return e}var NJ=Array.prototype.map,AJ=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Lot(e){var t=e.grouping===void 0||e.thousands===void 0?_J:Rot(NJ.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?_J:jot(NJ.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(f){f=nE(f);var p=f.fill,m=f.align,x=f.sign,y=f.symbol,b=f.zero,S=f.width,_=f.comma,C=f.precision,A=f.trim,j=f.type;j==="n"?(_=!0,j="g"):kJ[j]||(C===void 0&&(C=12),A=!0,j="g"),(b||p==="0"&&m==="=")&&(b=!0,p="0",m="=");var P=y==="$"?r:y==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",O=y==="$"?n:/[%p]/.test(j)?s:"",D=kJ[j],L=/[defgprs%]/.test(j);C=C===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function B(H){var z=P,ie=O,X,W,Q;if(j==="c")ie=D(H)+ie,H="";else{H=+H;var te=H<0||1/H<0;if(H=isNaN(H)?l:D(Math.abs(H),C),A&&(H=Mot(H)),te&&+H==0&&x!=="+"&&(te=!1),z=(te?x==="("?x:o:x==="-"||x==="("?"":x)+z,ie=(j==="s"?AJ[8+$0e/3]:"")+ie+(te&&x==="("?")":""),L){for(X=-1,W=H.length;++X<W;)if(Q=H.charCodeAt(X),48>Q||Q>57){ie=(Q===46?i+H.slice(X+1):H.slice(X))+ie,H=H.slice(0,X);break}}}_&&!b&&(H=t(H,1/0));var J=z.length+H.length+ie.length,Y=J<S?new Array(S-J+1).join(p):"";switch(_&&b&&(H=t(Y+H,Y.length?S-ie.length:1/0),Y=""),m){case"<":H=z+H+ie+Y;break;case"=":H=z+Y+H+ie;break;case"^":H=Y.slice(0,J=Y.length>>1)+z+H+ie+Y.slice(J);break;default:H=Y+z+H+ie;break}return a(H)}return B.toString=function(){return f+""},B}function d(f,p){var m=c((f=nE(f),f.type="f",f)),x=Math.max(-8,Math.min(8,Math.floor(Wy(p)/3)))*3,y=Math.pow(10,-x),b=AJ[8+x/3];return function(S){return m(y*S)+b}}return{format:c,formatPrefix:d}}var xN,DU,z0e;Bot({thousands:",",grouping:[3],currency:["$",""]});function Bot(e){return xN=Lot(e),DU=xN.format,z0e=xN.formatPrefix,xN}function Uot(e){return Math.max(0,-Wy(Math.abs(e)))}function $ot(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Wy(t)/3)))*3-Wy(Math.abs(e)))}function zot(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Wy(t)-Wy(e))+1}function H0e(e,t,r,n){var i=f5(e,t,r),a;switch(n=nE(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=$ot(i,s))&&(n.precision=a),z0e(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=zot(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=Uot(i))&&(n.precision=a-(n.type==="%")*2);break}}return DU(n)}function dm(e){var t=e.domain;return e.ticks=function(r){var n=t();return u5(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return H0e(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,a=n.length-1,s=n[i],o=n[a],l,c,d=10;for(o<s&&(c=s,s=o,o=c,c=i,i=a,a=c);d-- >0;){if(c=d5(s,o,r),c===l)return n[i]=s,n[a]=o,t(n);if(c>0)s=Math.floor(s/c)*c,o=Math.ceil(o/c)*c;else if(c<0)s=Math.ceil(s*c)/c,o=Math.floor(o*c)/c;else break;l=c}return e},e}function W0e(){var e=RU();return e.copy=function(){return FC(e,W0e())},ku.apply(e,arguments),dm(e)}function V0e(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,eO),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return V0e(e).unknown(t)},e=arguments.length?Array.from(e,eO):[0,1],dm(r)}function q0e(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],a=e[n],s;return a<i&&(s=r,r=n,n=s,s=i,i=a,a=s),e[r]=t.floor(i),e[n]=t.ceil(a),e}function TJ(e){return Math.log(e)}function IJ(e){return Math.exp(e)}function Hot(e){return-Math.log(-e)}function Wot(e){return-Math.exp(-e)}function Vot(e){return isFinite(e)?+("1e"+e):e<0?0:e}function qot(e){return e===10?Vot:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Got(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function OJ(e){return(t,r)=>-e(-t,r)}function MU(e){const t=e(TJ,IJ),r=t.domain;let n=10,i,a;function s(){return i=Got(n),a=qot(n),r()[0]<0?(i=OJ(i),a=OJ(a),e(Hot,Wot)):e(TJ,IJ),t}return t.base=function(o){return arguments.length?(n=+o,s()):n},t.domain=function(o){return arguments.length?(r(o),s()):r()},t.ticks=o=>{const l=r();let c=l[0],d=l[l.length-1];const f=d<c;f&&([c,d]=[d,c]);let p=i(c),m=i(d),x,y;const b=o==null?10:+o;let S=[];if(!(n%1)&&m-p<b){if(p=Math.floor(p),m=Math.ceil(m),c>0){for(;p<=m;++p)for(x=1;x<n;++x)if(y=p<0?x/a(-p):x*a(p),!(y<c)){if(y>d)break;S.push(y)}}else for(;p<=m;++p)for(x=n-1;x>=1;--x)if(y=p>0?x/a(-p):x*a(p),!(y<c)){if(y>d)break;S.push(y)}S.length*2<b&&(S=u5(c,d,b))}else S=u5(p,m,Math.min(m-p,b)).map(a);return f?S.reverse():S},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=nE(l)).precision==null&&(l.trim=!0),l=DU(l)),o===1/0)return l;const c=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/a(Math.round(i(d)));return f*n<n-.5&&(f*=n),f<=c?l(d):""}},t.nice=()=>r(q0e(r(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),t}function G0e(){const e=MU(mP()).domain([1,10]);return e.copy=()=>FC(e,G0e()).base(e.base()),ku.apply(e,arguments),e}function PJ(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function RJ(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function FU(e){var t=1,r=e(PJ(t),RJ(t));return r.constant=function(n){return arguments.length?e(PJ(t=+n),RJ(t)):t},dm(r)}function K0e(){var e=FU(mP());return e.copy=function(){return FC(e,K0e()).constant(e.constant())},ku.apply(e,arguments)}function jJ(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Kot(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Xot(e){return e<0?-e*e:e*e}function LU(e){var t=e(qo,qo),r=1;function n(){return r===1?e(qo,qo):r===.5?e(Kot,Xot):e(jJ(r),jJ(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},dm(t)}function BU(){var e=LU(mP());return e.copy=function(){return FC(e,BU()).exponent(e.exponent())},ku.apply(e,arguments),e}function Yot(){return BU.apply(null,arguments).exponent(.5)}function DJ(e){return Math.sign(e)*e*e}function Qot(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function X0e(){var e=RU(),t=[0,1],r=!1,n;function i(a){var s=Qot(e(a));return isNaN(s)?n:r?Math.round(s):s}return i.invert=function(a){return e.invert(DJ(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,eO)).map(DJ)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return X0e(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},ku.apply(i,arguments),dm(i)}function Y0e(){var e=[],t=[],r=[],n;function i(){var s=0,o=Math.max(1,t.length);for(r=new Array(o-1);++s<o;)r[s-1]=tot(e,s/o);return a}function a(s){return s==null||isNaN(s=+s)?n:t[DC(r,s)]}return a.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(j0),i()},a.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return Y0e().domain(e).range(t).unknown(n)},ku.apply(a,arguments)}function Q0e(){var e=0,t=1,r=1,n=[.5],i=[0,1],a;function s(l){return l!=null&&l<=l?i[DC(n,l,0,r)]:a}function o(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},s.range=function(l){return arguments.length?(r=(i=Array.from(l)).length-1,o()):i.slice()},s.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[e,n[0]]:c>=r?[n[r-1],t]:[n[c-1],n[c]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return n.slice()},s.copy=function(){return Q0e().domain([e,t]).range(i).unknown(a)},ku.apply(dm(s),arguments)}function J0e(){var e=[.5],t=[0,1],r,n=1;function i(a){return a!=null&&a<=a?t[DC(e,a,0,n)]:r}return i.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return J0e().domain(e).range(t).unknown(r)},ku.apply(i,arguments)}const pM=new Date,mM=new Date;function Ja(e,t,r,n){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const l=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let c;do l.push(c=new Date(+a)),t(a,o),e(a);while(c<a&&a<s);return l},i.filter=a=>Ja(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!a(s););else for(;--o>=0;)for(;t(s,1),!a(s););}),r&&(i.count=(a,s)=>(pM.setTime(+a),mM.setTime(+s),e(pM),e(mM),Math.floor(r(pM,mM))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?s=>n(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const rO=Ja(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);rO.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ja(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):rO);rO.range;const vh=1e3,ru=vh*60,yh=ru*60,Yh=yh*24,UU=Yh*7,MJ=Yh*30,gM=Yh*365,yg=Ja(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*vh)},(e,t)=>(t-e)/vh,e=>e.getUTCSeconds());yg.range;const $U=Ja(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*vh)},(e,t)=>{e.setTime(+e+t*ru)},(e,t)=>(t-e)/ru,e=>e.getMinutes());$U.range;const zU=Ja(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ru)},(e,t)=>(t-e)/ru,e=>e.getUTCMinutes());zU.range;const HU=Ja(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*vh-e.getMinutes()*ru)},(e,t)=>{e.setTime(+e+t*yh)},(e,t)=>(t-e)/yh,e=>e.getHours());HU.range;const WU=Ja(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*yh)},(e,t)=>(t-e)/yh,e=>e.getUTCHours());WU.range;const LC=Ja(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ru)/Yh,e=>e.getDate()-1);LC.range;const gP=Ja(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Yh,e=>e.getUTCDate()-1);gP.range;const Z0e=Ja(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Yh,e=>Math.floor(e/Yh));Z0e.range;function o1(e){return Ja(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*ru)/UU)}const xP=o1(0),nO=o1(1),Jot=o1(2),Zot=o1(3),Vy=o1(4),elt=o1(5),tlt=o1(6);xP.range;nO.range;Jot.range;Zot.range;Vy.range;elt.range;tlt.range;function l1(e){return Ja(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/UU)}const vP=l1(0),iO=l1(1),rlt=l1(2),nlt=l1(3),qy=l1(4),ilt=l1(5),alt=l1(6);vP.range;iO.range;rlt.range;nlt.range;qy.range;ilt.range;alt.range;const VU=Ja(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());VU.range;const qU=Ja(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());qU.range;const Qh=Ja(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Qh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ja(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Qh.range;const Jh=Ja(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Jh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ja(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Jh.range;function eme(e,t,r,n,i,a){const s=[[yg,1,vh],[yg,5,5*vh],[yg,15,15*vh],[yg,30,30*vh],[a,1,ru],[a,5,5*ru],[a,15,15*ru],[a,30,30*ru],[i,1,yh],[i,3,3*yh],[i,6,6*yh],[i,12,12*yh],[n,1,Yh],[n,2,2*Yh],[r,1,UU],[t,1,MJ],[t,3,3*MJ],[e,1,gM]];function o(c,d,f){const p=d<c;p&&([c,d]=[d,c]);const m=f&&typeof f.range=="function"?f:l(c,d,f),x=m?m.range(c,+d+1):[];return p?x.reverse():x}function l(c,d,f){const p=Math.abs(d-c)/f,m=NU(([,,b])=>b).right(s,p);if(m===s.length)return e.every(f5(c/gM,d/gM,f));if(m===0)return rO.every(Math.max(f5(c,d,f),1));const[x,y]=s[p/s[m-1][2]<s[m][2]/p?m-1:m];return x.every(y)}return[o,l]}const[slt,olt]=eme(Jh,qU,vP,Z0e,WU,zU),[llt,clt]=eme(Qh,VU,xP,LC,HU,$U);function xM(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function vM(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Vw(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function ult(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,a=e.days,s=e.shortDays,o=e.months,l=e.shortMonths,c=qw(i),d=Gw(i),f=qw(a),p=Gw(a),m=qw(s),x=Gw(s),y=qw(o),b=Gw(o),S=qw(l),_=Gw(l),C={a:te,A:J,b:Y,B:pe,c:null,d:zJ,e:zJ,f:Rlt,g:Hlt,G:Vlt,H:Ilt,I:Olt,j:Plt,L:tme,m:jlt,M:Dlt,p:_e,q:ee,Q:VJ,s:qJ,S:Mlt,u:Flt,U:Llt,V:Blt,w:Ult,W:$lt,x:null,X:null,y:zlt,Y:Wlt,Z:qlt,"%":WJ},A={a:de,A:G,b:q,B:ne,c:null,d:HJ,e:HJ,f:Ylt,g:sct,G:lct,H:Glt,I:Klt,j:Xlt,L:nme,m:Qlt,M:Jlt,p:Se,q:re,Q:VJ,s:qJ,S:Zlt,u:ect,U:tct,V:rct,w:nct,W:ict,x:null,X:null,y:act,Y:oct,Z:cct,"%":WJ},j={a:B,A:H,b:z,B:ie,c:X,d:UJ,e:UJ,f:_lt,g:BJ,G:LJ,H:$J,I:$J,j:Slt,L:klt,m:wlt,M:Elt,p:L,q:blt,Q:Alt,s:Tlt,S:Clt,u:mlt,U:glt,V:xlt,w:plt,W:vlt,x:W,X:Q,y:BJ,Y:LJ,Z:ylt,"%":Nlt};C.x=P(r,C),C.X=P(n,C),C.c=P(t,C),A.x=P(r,A),A.X=P(n,A),A.c=P(t,A);function P(ae,ge){return function(Ee){var V=[],Ae=-1,Pe=0,ze=ae.length,De,$e,et;for(Ee instanceof Date||(Ee=new Date(+Ee));++Ae<ze;)ae.charCodeAt(Ae)===37&&(V.push(ae.slice(Pe,Ae)),($e=FJ[De=ae.charAt(++Ae)])!=null?De=ae.charAt(++Ae):$e=De==="e"?" ":"0",(et=ge[De])&&(De=et(Ee,$e)),V.push(De),Pe=Ae+1);return V.push(ae.slice(Pe,Ae)),V.join("")}}function O(ae,ge){return function(Ee){var V=Vw(1900,void 0,1),Ae=D(V,ae,Ee+="",0),Pe,ze;if(Ae!=Ee.length)return null;if("Q"in V)return new Date(V.Q);if("s"in V)return new Date(V.s*1e3+("L"in V?V.L:0));if(ge&&!("Z"in V)&&(V.Z=0),"p"in V&&(V.H=V.H%12+V.p*12),V.m===void 0&&(V.m="q"in V?V.q:0),"V"in V){if(V.V<1||V.V>53)return null;"w"in V||(V.w=1),"Z"in V?(Pe=vM(Vw(V.y,0,1)),ze=Pe.getUTCDay(),Pe=ze>4||ze===0?iO.ceil(Pe):iO(Pe),Pe=gP.offset(Pe,(V.V-1)*7),V.y=Pe.getUTCFullYear(),V.m=Pe.getUTCMonth(),V.d=Pe.getUTCDate()+(V.w+6)%7):(Pe=xM(Vw(V.y,0,1)),ze=Pe.getDay(),Pe=ze>4||ze===0?nO.ceil(Pe):nO(Pe),Pe=LC.offset(Pe,(V.V-1)*7),V.y=Pe.getFullYear(),V.m=Pe.getMonth(),V.d=Pe.getDate()+(V.w+6)%7)}else("W"in V||"U"in V)&&("w"in V||(V.w="u"in V?V.u%7:"W"in V?1:0),ze="Z"in V?vM(Vw(V.y,0,1)).getUTCDay():xM(Vw(V.y,0,1)).getDay(),V.m=0,V.d="W"in V?(V.w+6)%7+V.W*7-(ze+5)%7:V.w+V.U*7-(ze+6)%7);return"Z"in V?(V.H+=V.Z/100|0,V.M+=V.Z%100,vM(V)):xM(V)}}function D(ae,ge,Ee,V){for(var Ae=0,Pe=ge.length,ze=Ee.length,De,$e;Ae<Pe;){if(V>=ze)return-1;if(De=ge.charCodeAt(Ae++),De===37){if(De=ge.charAt(Ae++),$e=j[De in FJ?ge.charAt(Ae++):De],!$e||(V=$e(ae,Ee,V))<0)return-1}else if(De!=Ee.charCodeAt(V++))return-1}return V}function L(ae,ge,Ee){var V=c.exec(ge.slice(Ee));return V?(ae.p=d.get(V[0].toLowerCase()),Ee+V[0].length):-1}function B(ae,ge,Ee){var V=m.exec(ge.slice(Ee));return V?(ae.w=x.get(V[0].toLowerCase()),Ee+V[0].length):-1}function H(ae,ge,Ee){var V=f.exec(ge.slice(Ee));return V?(ae.w=p.get(V[0].toLowerCase()),Ee+V[0].length):-1}function z(ae,ge,Ee){var V=S.exec(ge.slice(Ee));return V?(ae.m=_.get(V[0].toLowerCase()),Ee+V[0].length):-1}function ie(ae,ge,Ee){var V=y.exec(ge.slice(Ee));return V?(ae.m=b.get(V[0].toLowerCase()),Ee+V[0].length):-1}function X(ae,ge,Ee){return D(ae,t,ge,Ee)}function W(ae,ge,Ee){return D(ae,r,ge,Ee)}function Q(ae,ge,Ee){return D(ae,n,ge,Ee)}function te(ae){return s[ae.getDay()]}function J(ae){return a[ae.getDay()]}function Y(ae){return l[ae.getMonth()]}function pe(ae){return o[ae.getMonth()]}function _e(ae){return i[+(ae.getHours()>=12)]}function ee(ae){return 1+~~(ae.getMonth()/3)}function de(ae){return s[ae.getUTCDay()]}function G(ae){return a[ae.getUTCDay()]}function q(ae){return l[ae.getUTCMonth()]}function ne(ae){return o[ae.getUTCMonth()]}function Se(ae){return i[+(ae.getUTCHours()>=12)]}function re(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var ge=P(ae+="",C);return ge.toString=function(){return ae},ge},parse:function(ae){var ge=O(ae+="",!1);return ge.toString=function(){return ae},ge},utcFormat:function(ae){var ge=P(ae+="",A);return ge.toString=function(){return ae},ge},utcParse:function(ae){var ge=O(ae+="",!0);return ge.toString=function(){return ae},ge}}}var FJ={"-":"",_:" ",0:"0"},As=/^\s*\d+/,dlt=/^%/,flt=/[\\^$*+?|[\]().{}]/g;function zn(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(t)+i:i)}function hlt(e){return e.replace(flt,"\\$&")}function qw(e){return new RegExp("^(?:"+e.map(hlt).join("|")+")","i")}function Gw(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function plt(e,t,r){var n=As.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function mlt(e,t,r){var n=As.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function glt(e,t,r){var n=As.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function xlt(e,t,r){var n=As.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function vlt(e,t,r){var n=As.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function LJ(e,t,r){var n=As.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function BJ(e,t,r){var n=As.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function ylt(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function blt(e,t,r){var n=As.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function wlt(e,t,r){var n=As.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function UJ(e,t,r){var n=As.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Slt(e,t,r){var n=As.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function $J(e,t,r){var n=As.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Elt(e,t,r){var n=As.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Clt(e,t,r){var n=As.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function klt(e,t,r){var n=As.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function _lt(e,t,r){var n=As.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Nlt(e,t,r){var n=dlt.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Alt(e,t,r){var n=As.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Tlt(e,t,r){var n=As.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function zJ(e,t){return zn(e.getDate(),t,2)}function Ilt(e,t){return zn(e.getHours(),t,2)}function Olt(e,t){return zn(e.getHours()%12||12,t,2)}function Plt(e,t){return zn(1+LC.count(Qh(e),e),t,3)}function tme(e,t){return zn(e.getMilliseconds(),t,3)}function Rlt(e,t){return tme(e,t)+"000"}function jlt(e,t){return zn(e.getMonth()+1,t,2)}function Dlt(e,t){return zn(e.getMinutes(),t,2)}function Mlt(e,t){return zn(e.getSeconds(),t,2)}function Flt(e){var t=e.getDay();return t===0?7:t}function Llt(e,t){return zn(xP.count(Qh(e)-1,e),t,2)}function rme(e){var t=e.getDay();return t>=4||t===0?Vy(e):Vy.ceil(e)}function Blt(e,t){return e=rme(e),zn(Vy.count(Qh(e),e)+(Qh(e).getDay()===4),t,2)}function Ult(e){return e.getDay()}function $lt(e,t){return zn(nO.count(Qh(e)-1,e),t,2)}function zlt(e,t){return zn(e.getFullYear()%100,t,2)}function Hlt(e,t){return e=rme(e),zn(e.getFullYear()%100,t,2)}function Wlt(e,t){return zn(e.getFullYear()%1e4,t,4)}function Vlt(e,t){var r=e.getDay();return e=r>=4||r===0?Vy(e):Vy.ceil(e),zn(e.getFullYear()%1e4,t,4)}function qlt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+zn(t/60|0,"0",2)+zn(t%60,"0",2)}function HJ(e,t){return zn(e.getUTCDate(),t,2)}function Glt(e,t){return zn(e.getUTCHours(),t,2)}function Klt(e,t){return zn(e.getUTCHours()%12||12,t,2)}function Xlt(e,t){return zn(1+gP.count(Jh(e),e),t,3)}function nme(e,t){return zn(e.getUTCMilliseconds(),t,3)}function Ylt(e,t){return nme(e,t)+"000"}function Qlt(e,t){return zn(e.getUTCMonth()+1,t,2)}function Jlt(e,t){return zn(e.getUTCMinutes(),t,2)}function Zlt(e,t){return zn(e.getUTCSeconds(),t,2)}function ect(e){var t=e.getUTCDay();return t===0?7:t}function tct(e,t){return zn(vP.count(Jh(e)-1,e),t,2)}function ime(e){var t=e.getUTCDay();return t>=4||t===0?qy(e):qy.ceil(e)}function rct(e,t){return e=ime(e),zn(qy.count(Jh(e),e)+(Jh(e).getUTCDay()===4),t,2)}function nct(e){return e.getUTCDay()}function ict(e,t){return zn(iO.count(Jh(e)-1,e),t,2)}function act(e,t){return zn(e.getUTCFullYear()%100,t,2)}function sct(e,t){return e=ime(e),zn(e.getUTCFullYear()%100,t,2)}function oct(e,t){return zn(e.getUTCFullYear()%1e4,t,4)}function lct(e,t){var r=e.getUTCDay();return e=r>=4||r===0?qy(e):qy.ceil(e),zn(e.getUTCFullYear()%1e4,t,4)}function cct(){return"+0000"}function WJ(){return"%"}function VJ(e){return+e}function qJ(e){return Math.floor(+e/1e3)}var K1,ame,sme;uct({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function uct(e){return K1=ult(e),ame=K1.format,K1.parse,sme=K1.utcFormat,K1.utcParse,K1}function dct(e){return new Date(e)}function fct(e){return e instanceof Date?+e:+new Date(+e)}function GU(e,t,r,n,i,a,s,o,l,c){var d=RU(),f=d.invert,p=d.domain,m=c(".%L"),x=c(":%S"),y=c("%I:%M"),b=c("%I %p"),S=c("%a %d"),_=c("%b %d"),C=c("%B"),A=c("%Y");function j(P){return(l(P)<P?m:o(P)<P?x:s(P)<P?y:a(P)<P?b:n(P)<P?i(P)<P?S:_:r(P)<P?C:A)(P)}return d.invert=function(P){return new Date(f(P))},d.domain=function(P){return arguments.length?p(Array.from(P,fct)):p().map(dct)},d.ticks=function(P){var O=p();return e(O[0],O[O.length-1],P??10)},d.tickFormat=function(P,O){return O==null?j:c(O)},d.nice=function(P){var O=p();return(!P||typeof P.range!="function")&&(P=t(O[0],O[O.length-1],P??10)),P?p(q0e(O,P)):d},d.copy=function(){return FC(d,GU(e,t,r,n,i,a,s,o,l,c))},d}function hct(){return ku.apply(GU(llt,clt,Qh,VU,xP,LC,HU,$U,yg,ame).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function pct(){return ku.apply(GU(slt,olt,Jh,qU,vP,gP,WU,zU,yg,sme).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function yP(){var e=0,t=1,r,n,i,a,s=qo,o=!1,l;function c(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(a(f)-r)*i,o?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([e,t]=f,r=a(e=+e),n=a(t=+t),i=r===n?0:1/(n-r),c):[e,t]},c.clamp=function(f){return arguments.length?(o=!!f,c):o},c.interpolator=function(f){return arguments.length?(s=f,c):s};function d(f){return function(p){var m,x;return arguments.length?([m,x]=p,s=f(m,x),c):[s(0),s(1)]}}return c.range=d(Ib),c.rangeRound=d(PU),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return a=f,r=f(e),n=f(t),i=r===n?0:1/(n-r),c}}function fm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function ome(){var e=dm(yP()(qo));return e.copy=function(){return fm(e,ome())},cp.apply(e,arguments)}function lme(){var e=MU(yP()).domain([1,10]);return e.copy=function(){return fm(e,lme()).base(e.base())},cp.apply(e,arguments)}function cme(){var e=FU(yP());return e.copy=function(){return fm(e,cme()).constant(e.constant())},cp.apply(e,arguments)}function KU(){var e=LU(yP());return e.copy=function(){return fm(e,KU()).exponent(e.exponent())},cp.apply(e,arguments)}function mct(){return KU.apply(null,arguments).exponent(.5)}function ume(){var e=[],t=qo;function r(n){if(n!=null&&!isNaN(n=+n))return t((DC(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(j0),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>eot(e,a/n))},r.copy=function(){return ume(t).domain(e)},cp.apply(r,arguments)}function bP(){var e=0,t=.5,r=1,n=1,i,a,s,o,l,c=qo,d,f=!1,p;function m(y){return isNaN(y=+y)?p:(y=.5+((y=+d(y))-a)*(n*y<n*a?o:l),c(f?Math.max(0,Math.min(1,y)):y))}m.domain=function(y){return arguments.length?([e,t,r]=y,i=d(e=+e),a=d(t=+t),s=d(r=+r),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),n=a<i?-1:1,m):[e,t,r]},m.clamp=function(y){return arguments.length?(f=!!y,m):f},m.interpolator=function(y){return arguments.length?(c=y,m):c};function x(y){return function(b){var S,_,C;return arguments.length?([S,_,C]=b,c=Not(y,[S,_,C]),m):[c(0),c(.5),c(1)]}}return m.range=x(Ib),m.rangeRound=x(PU),m.unknown=function(y){return arguments.length?(p=y,m):p},function(y){return d=y,i=y(e),a=y(t),s=y(r),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),n=a<i?-1:1,m}}function dme(){var e=dm(bP()(qo));return e.copy=function(){return fm(e,dme())},cp.apply(e,arguments)}function fme(){var e=MU(bP()).domain([.1,1,10]);return e.copy=function(){return fm(e,fme()).base(e.base())},cp.apply(e,arguments)}function hme(){var e=FU(bP());return e.copy=function(){return fm(e,hme()).constant(e.constant())},cp.apply(e,arguments)}function XU(){var e=LU(bP());return e.copy=function(){return fm(e,XU()).exponent(e.exponent())},cp.apply(e,arguments)}function gct(){return XU.apply(null,arguments).exponent(.5)}const f2=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:TU,scaleDiverging:dme,scaleDivergingLog:fme,scaleDivergingPow:XU,scaleDivergingSqrt:gct,scaleDivergingSymlog:hme,scaleIdentity:V0e,scaleImplicit:h5,scaleLinear:W0e,scaleLog:G0e,scaleOrdinal:AU,scalePoint:not,scalePow:BU,scaleQuantile:Y0e,scaleQuantize:Q0e,scaleRadial:X0e,scaleSequential:ome,scaleSequentialLog:lme,scaleSequentialPow:KU,scaleSequentialQuantile:ume,scaleSequentialSqrt:mct,scaleSequentialSymlog:cme,scaleSqrt:Yot,scaleSymlog:K0e,scaleThreshold:J0e,scaleTime:hct,scaleUtc:pct,tickFormat:H0e},Symbol.toStringTag,{value:"Module"}));var hm=e=>e.chartData,xct=st([hm],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),YU=(e,t,r,n)=>n?xct(e):hm(e);function V0(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Ea(t)&&Ea(r))return!0}return!1}function GJ(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function pme(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,i,a;if(Ea(r))i=r;else if(typeof r=="function")return;if(Ea(n))a=n;else if(typeof n=="function")return;var s=[i,a];if(V0(s))return s}}function vct(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(V0(n))return GJ(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[i,a]=e,s,o;if(i==="auto")t!=null&&(s=Math.min(...t));else if(ur(i))s=i;else if(typeof i=="function")try{t!=null&&(s=i(t==null?void 0:t[0]))}catch{}else if(typeof i=="string"&&OQ.test(i)){var l=OQ.exec(i);if(l==null||t==null)s=void 0;else{var c=+l[1];s=t[0]-c}}else s=t==null?void 0:t[0];if(a==="auto")t!=null&&(o=Math.max(...t));else if(ur(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t==null?void 0:t[1]))}catch{}else if(typeof a=="string"&&PQ.test(a)){var d=PQ.exec(a);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t==null?void 0:t[1];var p=[s,o];if(V0(p))return t==null?p:GJ(p,t,r)}}}var Ob=1e9,yct={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},JU,$i=!0,vu="[DecimalError] ",qg=vu+"Invalid argument: ",QU=vu+"Exponent out of range: ",Pb=Math.floor,Xm=Math.pow,bct=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,tc,hs=1e7,Ni=7,mme=9007199254740991,aO=Pb(mme/Ni),Qt={};Qt.absoluteValue=Qt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Qt.comparedTo=Qt.cmp=function(e){var t,r,n,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(n=a.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};Qt.decimalPlaces=Qt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ni;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Qt.dividedBy=Qt.div=function(e){return Ih(this,new this.constructor(e))};Qt.dividedToIntegerBy=Qt.idiv=function(e){var t=this,r=t.constructor;return mi(Ih(t,new r(e),0,1),r.precision)};Qt.equals=Qt.eq=function(e){return!this.cmp(e)};Qt.exponent=function(){return La(this)};Qt.greaterThan=Qt.gt=function(e){return this.cmp(e)>0};Qt.greaterThanOrEqualTo=Qt.gte=function(e){return this.cmp(e)>=0};Qt.isInteger=Qt.isint=function(){return this.e>this.d.length-2};Qt.isNegative=Qt.isneg=function(){return this.s<0};Qt.isPositive=Qt.ispos=function(){return this.s>0};Qt.isZero=function(){return this.s===0};Qt.lessThan=Qt.lt=function(e){return this.cmp(e)<0};Qt.lessThanOrEqualTo=Qt.lte=function(e){return this.cmp(e)<1};Qt.logarithm=Qt.log=function(e){var t,r=this,n=r.constructor,i=n.precision,a=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(tc))throw Error(vu+"NaN");if(r.s<1)throw Error(vu+(r.s?"NaN":"-Infinity"));return r.eq(tc)?new n(0):($i=!1,t=Ih(iE(r,a),iE(e,a),a),$i=!0,mi(t,i))};Qt.minus=Qt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?vme(t,e):gme(t,(e.s=-e.s,e))};Qt.modulo=Qt.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(vu+"NaN");return r.s?($i=!1,t=Ih(r,e,0,1).times(e),$i=!0,r.minus(t)):mi(new n(r),i)};Qt.naturalExponential=Qt.exp=function(){return xme(this)};Qt.naturalLogarithm=Qt.ln=function(){return iE(this)};Qt.negated=Qt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Qt.plus=Qt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?gme(t,e):vme(t,(e.s=-e.s,e))};Qt.precision=Qt.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(qg+e);if(t=La(i)+1,n=i.d.length-1,r=n*Ni+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Qt.squareRoot=Qt.sqrt=function(){var e,t,r,n,i,a,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(vu+"NaN")}for(e=La(o),$i=!1,i=Math.sqrt(+o),i==0||i==1/0?(t=tf(o.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Pb((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(i.toString()),r=l.precision,i=s=r+3;;)if(a=n,n=a.plus(Ih(o,a,s+2)).times(.5),tf(a.d).slice(0,s)===(t=tf(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),i==s&&t=="4999"){if(mi(a,r+1,0),a.times(a).eq(o)){n=a;break}}else if(t!="9999")break;s+=4}return $i=!0,mi(n,r)};Qt.times=Qt.mul=function(e){var t,r,n,i,a,s,o,l,c,d=this,f=d.constructor,p=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,l=p.length,c=m.length,l<c&&(a=p,p=m,m=a,s=l,l=c,c=s),a=[],s=l+c,n=s;n--;)a.push(0);for(n=c;--n>=0;){for(t=0,i=l+n;i>n;)o=a[i]+m[n]*p[i-n-1]+t,a[i--]=o%hs|0,t=o/hs|0;a[i]=(a[i]+t)%hs|0}for(;!a[--s];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,$i?mi(e,f.precision):e};Qt.toDecimalPlaces=Qt.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(vf(e,0,Ob),t===void 0?t=n.rounding:vf(t,0,8),mi(r,e+La(r)+1,t))};Qt.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=Ex(n,!0):(vf(e,0,Ob),t===void 0?t=i.rounding:vf(t,0,8),n=mi(new i(n),e+1,t),r=Ex(n,!0,e+1)),r};Qt.toFixed=function(e,t){var r,n,i=this,a=i.constructor;return e===void 0?Ex(i):(vf(e,0,Ob),t===void 0?t=a.rounding:vf(t,0,8),n=mi(new a(i),e+La(i)+1,t),r=Ex(n.abs(),!1,e+La(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Qt.toInteger=Qt.toint=function(){var e=this,t=e.constructor;return mi(new t(e),La(e)+1,t.rounding)};Qt.toNumber=function(){return+this};Qt.toPower=Qt.pow=function(e){var t,r,n,i,a,s,o=this,l=o.constructor,c=12,d=+(e=new l(e));if(!e.s)return new l(tc);if(o=new l(o),!o.s){if(e.s<1)throw Error(vu+"Infinity");return o}if(o.eq(tc))return o;if(n=l.precision,e.eq(tc))return mi(o,n);if(t=e.e,r=e.d.length-1,s=t>=r,a=o.s,s){if((r=d<0?-d:d)<=mme){for(i=new l(tc),t=Math.ceil(n/Ni+4),$i=!1;r%2&&(i=i.times(o),XJ(i.d,t)),r=Pb(r/2),r!==0;)o=o.times(o),XJ(o.d,t);return $i=!0,e.s<0?new l(tc).div(i):mi(i,n)}}else if(a<0)throw Error(vu+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,$i=!1,i=e.times(iE(o,n+c)),$i=!0,i=xme(i),i.s=a,i};Qt.toPrecision=function(e,t){var r,n,i=this,a=i.constructor;return e===void 0?(r=La(i),n=Ex(i,r<=a.toExpNeg||r>=a.toExpPos)):(vf(e,1,Ob),t===void 0?t=a.rounding:vf(t,0,8),i=mi(new a(i),e,t),r=La(i),n=Ex(i,e<=r||r<=a.toExpNeg,e)),n};Qt.toSignificantDigits=Qt.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(vf(e,1,Ob),t===void 0?t=n.rounding:vf(t,0,8)),mi(new n(r),e,t)};Qt.toString=Qt.valueOf=Qt.val=Qt.toJSON=Qt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=La(e),r=e.constructor;return Ex(e,t<=r.toExpNeg||t>=r.toExpPos)};function gme(e,t){var r,n,i,a,s,o,l,c,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),$i?mi(t,f):t;if(l=e.d,c=t.d,s=e.e,i=t.e,l=l.slice(),a=s-i,a){for(a<0?(n=l,a=-a,o=c.length):(n=c,i=s,o=l.length),s=Math.ceil(f/Ni),o=s>o?s+1:o+1,a>o&&(a=o,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(o=l.length,a=c.length,o-a<0&&(a=o,n=c,c=l,l=n),r=0;a;)r=(l[--a]=l[a]+c[a]+r)/hs|0,l[a]%=hs;for(r&&(l.unshift(r),++i),o=l.length;l[--o]==0;)l.pop();return t.d=l,t.e=i,$i?mi(t,f):t}function vf(e,t,r){if(e!==~~e||e<t||e>r)throw Error(qg+e)}function tf(e){var t,r,n,i=e.length-1,a="",s=e[0];if(i>0){for(a+=s,t=1;t<i;t++)n=e[t]+"",r=Ni-n.length,r&&(a+=Yp(r)),a+=n;s=e[t],n=s+"",r=Ni-n.length,r&&(a+=Yp(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var Ih=function(){function e(n,i){var a,s=0,o=n.length;for(n=n.slice();o--;)a=n[o]*i+s,n[o]=a%hs|0,s=a/hs|0;return s&&n.unshift(s),n}function t(n,i,a,s){var o,l;if(a!=s)l=a>s?1:-1;else for(o=l=0;o<a;o++)if(n[o]!=i[o]){l=n[o]>i[o]?1:-1;break}return l}function r(n,i,a){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*hs+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s){var o,l,c,d,f,p,m,x,y,b,S,_,C,A,j,P,O,D,L=n.constructor,B=n.s==i.s?1:-1,H=n.d,z=i.d;if(!n.s)return new L(n);if(!i.s)throw Error(vu+"Division by zero");for(l=n.e-i.e,O=z.length,j=H.length,m=new L(B),x=m.d=[],c=0;z[c]==(H[c]||0);)++c;if(z[c]>(H[c]||0)&&--l,a==null?_=a=L.precision:s?_=a+(La(n)-La(i))+1:_=a,_<0)return new L(0);if(_=_/Ni+2|0,c=0,O==1)for(d=0,z=z[0],_++;(c<j||d)&&_--;c++)C=d*hs+(H[c]||0),x[c]=C/z|0,d=C%z|0;else{for(d=hs/(z[0]+1)|0,d>1&&(z=e(z,d),H=e(H,d),O=z.length,j=H.length),A=O,y=H.slice(0,O),b=y.length;b<O;)y[b++]=0;D=z.slice(),D.unshift(0),P=z[0],z[1]>=hs/2&&++P;do d=0,o=t(z,y,O,b),o<0?(S=y[0],O!=b&&(S=S*hs+(y[1]||0)),d=S/P|0,d>1?(d>=hs&&(d=hs-1),f=e(z,d),p=f.length,b=y.length,o=t(f,y,p,b),o==1&&(d--,r(f,O<p?D:z,p))):(d==0&&(o=d=1),f=z.slice()),p=f.length,p<b&&f.unshift(0),r(y,f,b),o==-1&&(b=y.length,o=t(z,y,O,b),o<1&&(d++,r(y,O<b?D:z,b))),b=y.length):o===0&&(d++,y=[0]),x[c++]=d,o&&y[0]?y[b++]=H[A]||0:(y=[H[A]],b=1);while((A++<j||y[0]!==void 0)&&_--)}return x[0]||x.shift(),m.e=l,mi(m,s?a+La(m)+1:a)}}();function xme(e,t){var r,n,i,a,s,o,l=0,c=0,d=e.constructor,f=d.precision;if(La(e)>16)throw Error(QU+La(e));if(!e.s)return new d(tc);for($i=!1,o=f,s=new d(.03125);e.abs().gte(.1);)e=e.times(s),c+=5;for(n=Math.log(Xm(2,c))/Math.LN10*2+5|0,o+=n,r=i=a=new d(tc),d.precision=o;;){if(i=mi(i.times(e),o),r=r.times(++l),s=a.plus(Ih(i,r,o)),tf(s.d).slice(0,o)===tf(a.d).slice(0,o)){for(;c--;)a=mi(a.times(a),o);return d.precision=f,t==null?($i=!0,mi(a,f)):a}a=s}}function La(e){for(var t=e.e*Ni,r=e.d[0];r>=10;r/=10)t++;return t}function yM(e,t,r){if(t>e.LN10.sd())throw $i=!0,r&&(e.precision=r),Error(vu+"LN10 precision limit exceeded");return mi(new e(e.LN10),t)}function Yp(e){for(var t="";e--;)t+="0";return t}function iE(e,t){var r,n,i,a,s,o,l,c,d,f=1,p=10,m=e,x=m.d,y=m.constructor,b=y.precision;if(m.s<1)throw Error(vu+(m.s?"NaN":"-Infinity"));if(m.eq(tc))return new y(0);if(t==null?($i=!1,c=b):c=t,m.eq(10))return t==null&&($i=!0),yM(y,c);if(c+=p,y.precision=c,r=tf(x),n=r.charAt(0),a=La(m),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=tf(m.d),n=r.charAt(0),f++;a=La(m),n>1?(m=new y("0."+r),a++):m=new y(n+"."+r.slice(1))}else return l=yM(y,c+2,b).times(a+""),m=iE(new y(n+"."+r.slice(1)),c-p).plus(l),y.precision=b,t==null?($i=!0,mi(m,b)):m;for(o=s=m=Ih(m.minus(tc),m.plus(tc),c),d=mi(m.times(m),c),i=3;;){if(s=mi(s.times(d),c),l=o.plus(Ih(s,new y(i),c)),tf(l.d).slice(0,c)===tf(o.d).slice(0,c))return o=o.times(2),a!==0&&(o=o.plus(yM(y,c+2,b).times(a+""))),o=Ih(o,new y(f),c),y.precision=b,t==null?($i=!0,mi(o,b)):o;o=l,i+=2}}function KJ(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=Pb(r/Ni),e.d=[],n=(r+1)%Ni,r<0&&(n+=Ni),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=Ni;n<i;)e.d.push(+t.slice(n,n+=Ni));t=t.slice(n),n=Ni-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),$i&&(e.e>aO||e.e<-aO))throw Error(QU+r)}else e.s=0,e.e=0,e.d=[0];return e}function mi(e,t,r){var n,i,a,s,o,l,c,d,f=e.d;for(s=1,a=f[0];a>=10;a/=10)s++;if(n=t-s,n<0)n+=Ni,i=t,c=f[d=0];else{if(d=Math.ceil((n+1)/Ni),a=f.length,d>=a)return e;for(c=a=f[d],s=1;a>=10;a/=10)s++;n%=Ni,i=n-Ni+s}if(r!==void 0&&(a=Xm(10,s-i-1),o=c/a%10|0,l=t<0||f[d+1]!==void 0||c%a,l=r<4?(o||l)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||l||r==6&&(n>0?i>0?c/Xm(10,s-i):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return l?(a=La(e),f.length=1,t=t-a-1,f[0]=Xm(10,(Ni-t%Ni)%Ni),e.e=Pb(-t/Ni)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,a=1,d--):(f.length=d+1,a=Xm(10,Ni-n),f[d]=i>0?(c/Xm(10,s-i)%Xm(10,i)|0)*a:0),l)for(;;)if(d==0){(f[0]+=a)==hs&&(f[0]=1,++e.e);break}else{if(f[d]+=a,f[d]!=hs)break;f[d--]=0,a=1}for(n=f.length;f[--n]===0;)f.pop();if($i&&(e.e>aO||e.e<-aO))throw Error(QU+La(e));return e}function vme(e,t){var r,n,i,a,s,o,l,c,d,f,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),$i?mi(t,m):t;if(l=e.d,f=t.d,n=t.e,c=e.e,l=l.slice(),s=c-n,s){for(d=s<0,d?(r=l,s=-s,o=f.length):(r=f,n=c,o=l.length),i=Math.max(Math.ceil(m/Ni),o)+2,s>i&&(s=i,r.length=1),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else{for(i=l.length,o=f.length,d=i<o,d&&(o=i),i=0;i<o;i++)if(l[i]!=f[i]){d=l[i]<f[i];break}s=0}for(d&&(r=l,l=f,f=r,t.s=-t.s),o=l.length,i=f.length-o;i>0;--i)l[o++]=0;for(i=f.length;i>s;){if(l[--i]<f[i]){for(a=i;a&&l[--a]===0;)l[a]=hs-1;--l[a],l[i]+=hs}l[i]-=f[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,$i?mi(t,m):t):new p(0)}function Ex(e,t,r){var n,i=La(e),a=tf(e.d),s=a.length;return t?(r&&(n=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+Yp(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Yp(-i-1)+a,r&&(n=r-s)>0&&(a+=Yp(n))):i>=s?(a+=Yp(i+1-s),r&&(n=r-i-1)>0&&(a=a+"."+Yp(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(a+="."),a+=Yp(n))),e.s<0?"-"+a:a}function XJ(e,t){if(e.length>t)return e.length=t,!0}function yme(e){var t,r,n;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(qg+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return KJ(s,a.toString())}else if(typeof a!="string")throw Error(qg+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,bct.test(a))KJ(s,a);else throw Error(qg+a)}if(i.prototype=Qt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=yme,i.config=i.set=wct,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function wct(e){if(!e||typeof e!="object")throw Error(vu+"Object expected");var t,r,n,i=["precision",1,Ob,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(Pb(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(qg+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(qg+r+": "+n);return this}var JU=yme(yct);tc=new JU(1);const ai=JU;var Sct=e=>e,bme={},wme=e=>e===bme,YJ=e=>function t(){return arguments.length===0||arguments.length===1&&wme(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Sme=(e,t)=>e===1?t:YJ(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=n.filter(s=>s!==bme).length;return a>=e?t(...n):Sme(e-a,YJ(function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];var c=n.map(d=>wme(d)?o.shift():d);return t(...c,...o)}))}),Ect=e=>Sme(e.length,e),x5=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},Cct=Ect((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),kct=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return Sct;var i=r.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce((o,l)=>l(o),a(...arguments))}},v5=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function Eme(e){var t;return e===0?t=1:t=Math.floor(new ai(e).abs().log(10).toNumber())+1,t}function Cme(e,t,r){for(var n=new ai(e),i=0,a=[];n.lt(t)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}var kme=e=>{var[t,r]=e,[n,i]=[t,r];return t>r&&([n,i]=[r,t]),[n,i]},_me=(e,t,r)=>{if(e.lte(0))return new ai(0);var n=Eme(e.toNumber()),i=new ai(10).pow(n),a=e.div(i),s=n!==1?.05:.1,o=new ai(Math.ceil(a.div(s).toNumber())).add(r).mul(s),l=o.mul(i);return t?new ai(l.toNumber()):new ai(Math.ceil(l.toNumber()))},_ct=(e,t,r)=>{var n=new ai(1),i=new ai(e);if(!i.isint()&&r){var a=Math.abs(e);a<1?(n=new ai(10).pow(Eme(e)-1),i=new ai(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new ai(Math.floor(e)))}else e===0?i=new ai(Math.floor((t-1)/2)):r||(i=new ai(Math.floor(e)));var s=Math.floor((t-1)/2),o=kct(Cct(l=>i.add(new ai(l-s).mul(n)).toNumber()),x5);return o(0,t)},Nme=function(t,r,n,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ai(0),tickMin:new ai(0),tickMax:new ai(0)};var s=_me(new ai(r).sub(t).div(n-1),i,a),o;t<=0&&r>=0?o=new ai(0):(o=new ai(t).add(r).div(2),o=o.sub(new ai(o).mod(s)));var l=Math.ceil(o.sub(t).div(s).toNumber()),c=Math.ceil(new ai(r).sub(o).div(s).toNumber()),d=l+c+1;return d>n?Nme(t,r,n,i,a+1):(d<n&&(c=r>0?c+(n-d):c,l=r>0?l:l+(n-d)),{step:s,tickMin:o.sub(new ai(l).mul(s)),tickMax:o.add(new ai(c).mul(s))})},Nct=function(t){var[r,n]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[o,l]=kme([r,n]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...x5(0,i-1).map(()=>1/0)]:[...x5(0,i-1).map(()=>-1/0),l];return r>n?v5(c):c}if(o===l)return _ct(o,i,a);var{step:d,tickMin:f,tickMax:p}=Nme(o,l,s,a,0),m=Cme(f,p.add(new ai(.1).mul(d)),d);return r>n?v5(m):m},Act=function(t,r){var[n,i]=t,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=kme([n,i]);if(s===-1/0||o===1/0)return[n,i];if(s===o)return[s];var l=Math.max(r,2),c=_me(new ai(o).sub(s).div(l-1),a,0),d=[...Cme(new ai(s),new ai(o),c),o];return a===!1&&(d=d.map(f=>Math.round(f))),n>i?v5(d):d},Ame=e=>e.rootProps.maxBarSize,Tct=e=>e.rootProps.barGap,Tme=e=>e.rootProps.barCategoryGap,Ict=e=>e.rootProps.barSize,wP=e=>e.rootProps.stackOffset,Ime=e=>e.rootProps.reverseStackOrder,ZU=e=>e.options.chartName,e$=e=>e.rootProps.syncId,Ome=e=>e.rootProps.syncMethod,t$=e=>e.options.eventEmitter,Go={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},fh={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Ql={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},SP=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},Oct={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:fh.angleAxisId,includeHidden:!1,name:void 0,reversed:fh.reversed,scale:fh.scale,tick:fh.tick,tickCount:void 0,ticks:void 0,type:fh.type,unit:void 0},Pct={allowDataOverflow:Ql.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ql.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ql.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ql.scale,tick:Ql.tick,tickCount:Ql.tickCount,ticks:void 0,type:Ql.type,unit:void 0},Rct={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:fh.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:fh.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:fh.scale,tick:fh.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},jct={allowDataOverflow:Ql.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ql.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ql.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ql.scale,tick:Ql.tick,tickCount:Ql.tickCount,ticks:void 0,type:"category",unit:void 0},r$=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Rct:Oct,n$=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?jct:Pct,EP=e=>e.polarOptions,i$=st([op,lp,Ns],Pst),Pme=st([EP,i$],(e,t)=>{if(e!=null)return yd(e.innerRadius,t,0)}),Rme=st([EP,i$],(e,t)=>{if(e!=null)return yd(e.outerRadius,t,t*.8)}),Dct=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},jme=st([EP],Dct);st([r$,jme],SP);var Dme=st([i$,Pme,Rme],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});st([n$,Dme],SP);var Mme=st([ci,EP,Pme,Rme,op,lp],(e,t,r,n,i,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:s,cy:o,startAngle:l,endAngle:c}=t;return{cx:yd(s,i,i/2),cy:yd(o,a,a/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:c,clockWise:!1}}}),Za=(e,t)=>t,CP=(e,t,r)=>r;function a$(e){return e==null?void 0:e.id}function Fme(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:i,dataKey:a}=r,s=new Map;return e.forEach(o=>{var l,c=(l=o.data)!==null&&l!==void 0?l:n;if(!(c==null||c.length===0)){var d=a$(o);c.forEach((f,p)=>{var m=a==null||i?p:String(vo(f,a,null)),x=vo(f,o.dataKey,0),y;s.has(m)?y=s.get(m):y={},Object.assign(y,{[d]:x}),s.set(m,y)})}}),Array.from(s.values())}function kP(e){return e.stackId!=null&&e.dataKey!=null}var _P=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function NP(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function Mct(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var es=e=>{var t=ci(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Rb=e=>e.tooltip.settings.axisId;function QJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function sO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QJ(Object(r),!0).forEach(function(n){Fct(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QJ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fct(e,t,r){return(t=Lct(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lct(e){var t=Bct(e,"string");return typeof t=="symbol"?t:t+""}function Bct(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var y5=[0,"auto"],cs={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Lme=(e,t)=>e.cartesianAxis.xAxis[t],up=(e,t)=>{var r=Lme(e,t);return r??cs},us={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:y5,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:RC},Bme=(e,t)=>e.cartesianAxis.yAxis[t],dp=(e,t)=>{var r=Bme(e,t);return r??us},Uct={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},s$=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??Uct},nl=(e,t,r)=>{switch(t){case"xAxis":return up(e,r);case"yAxis":return dp(e,r);case"zAxis":return s$(e,r);case"angleAxis":return r$(e,r);case"radiusAxis":return n$(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},$ct=(e,t,r)=>{switch(t){case"xAxis":return up(e,r);case"yAxis":return dp(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},BC=(e,t,r)=>{switch(t){case"xAxis":return up(e,r);case"yAxis":return dp(e,r);case"angleAxis":return r$(e,r);case"radiusAxis":return n$(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Ume=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function $me(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var o$=e=>e.graphicalItems.cartesianItems,zct=st([Za,CP],$me),zme=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),UC=st([o$,nl,zct],zme,{memoizeOptions:{resultEqualityCheck:NP}}),Hme=st([UC],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(kP)),Wme=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Hct=st([UC],Wme),Vme=e=>e.map(t=>t.data).filter(Boolean).flat(1),Wct=st([UC],Vme,{memoizeOptions:{resultEqualityCheck:NP}}),qme=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=t;return e.length>0?e:r.slice(n,i+1)},l$=st([Wct,YU],qme),Gme=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:vo(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(i=>({value:vo(i,n)}))):e.map(n=>({value:n})),AP=st([l$,nl,UC],Gme);function Kme(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function gA(e){if(mf(e)||e instanceof Date){var t=Number(e);if(Ea(t))return t}}function JJ(e){if(Array.isArray(e)){var t=[gA(e[0]),gA(e[1])];return V0(t)?t:void 0}var r=gA(e);if(r!=null)return[r,r]}function Zh(e){return e.map(gA).filter(Mrt)}function Vct(e,t,r){return!r||typeof t!="number"||vd(t)?[]:r.length?Zh(r.flatMap(n=>{var i=vo(e,n.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!Ea(a)||!Ea(s)))return[t-a,t+s]})):[]}var ts=e=>{var t=es(e),r=Rb(e);return BC(e,t,r)},$C=st([ts],e=>e==null?void 0:e.dataKey),qct=st([Hme,YU,ts],Fme),Xme=(e,t,r,n)=>{var i={},a=t.reduce((s,o)=>(o.stackId==null||(s[o.stackId]==null&&(s[o.stackId]=[]),s[o.stackId].push(o)),s),i);return Object.fromEntries(Object.entries(a).map(s=>{var[o,l]=s,c=n?[...l].reverse():l,d=c.map(a$);return[o,{stackedData:Nit(e,d,r),graphicalItems:c}]}))},b5=st([qct,Hme,wP,Ime],Xme),Yme=(e,t,r,n)=>{var{dataStartIndex:i,dataEndIndex:a}=t;if(n==null&&r!=="zAxis"){var s=Pit(e,i,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},Gct=st([nl],e=>e.allowDataOverflow),c$=e=>{var t;if(e==null||!("domain"in e))return y5;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Zh(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:y5},Qme=st([nl],c$),Jme=st([Qme,Gct],pme),Kct=st([b5,hm,Za,Jme],Yme,{memoizeOptions:{resultEqualityCheck:_P}}),u$=e=>e.errorBars,Xct=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>Kme(r,n)),oO=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),o=Math.max(...a);return[s,o]}},Zme=(e,t,r,n,i)=>{var a,s;if(r.length>0&&e.forEach(o=>{r.forEach(l=>{var c,d,f=(c=n[l.id])===null||c===void 0?void 0:c.filter(S=>Kme(i,S)),p=vo(o,(d=t.dataKey)!==null&&d!==void 0?d:l.dataKey),m=Vct(o,p,f);if(m.length>=2){var x=Math.min(...m),y=Math.max(...m);(a==null||x<a)&&(a=x),(s==null||y>s)&&(s=y)}var b=JJ(p);b!=null&&(a=a==null?b[0]:Math.min(a,b[0]),s=s==null?b[1]:Math.max(s,b[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(o=>{var l=JJ(vo(o,t.dataKey));l!=null&&(a=a==null?l[0]:Math.min(a,l[0]),s=s==null?l[1]:Math.max(s,l[1]))}),Ea(a)&&Ea(s))return[a,s]},Yct=st([l$,nl,Hct,u$,Za],Zme,{memoizeOptions:{resultEqualityCheck:_P}});function Qct(e){var{value:t}=e;if(mf(t)||t instanceof Date)return t}var Jct=(e,t,r)=>{var n=e.map(Qct).filter(i=>i!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&Xhe(n))?R0e(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},ege=e=>e.referenceElements.dots,jb=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),Zct=st([ege,Za,CP],jb),tge=e=>e.referenceElements.areas,eut=st([tge,Za,CP],jb),rge=e=>e.referenceElements.lines,tut=st([rge,Za,CP],jb),nge=(e,t)=>{var r=Zh(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},rut=st(Zct,Za,nge),ige=(e,t)=>{var r=Zh(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},nut=st([eut,Za],ige);function iut(e){var t;if(e.x!=null)return Zh([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:Zh(r)}function aut(e){var t;if(e.y!=null)return Zh([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:Zh(r)}var age=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?iut(n):aut(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},sut=st([tut,Za],age),out=st(rut,sut,nut,(e,t,r)=>oO(e,r,t)),sge=(e,t,r,n,i,a,s,o)=>{if(r!=null)return r;var l=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",c=l?oO(n,a,i):oO(a,i);return vct(t,c,e.allowDataOverflow)},lut=st([nl,Qme,Jme,Kct,Yct,out,ci,Za],sge,{memoizeOptions:{resultEqualityCheck:_P}}),cut=[0,1],oge=(e,t,r,n,i,a,s)=>{if(!((e==null||r==null||r.length===0)&&s===void 0)){var{dataKey:o,type:l}=e,c=s1(t,a);if(c&&o==null){var d;return R0e(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return l==="category"?Jct(n,e,c):i==="expand"?cut:s}},d$=st([nl,ci,l$,AP,wP,Za,lut],oge),lge=(e,t,r,n,i)=>{if(e!=null){var{scale:a,type:s}=e;if(a==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":s==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(AC(a));return o in f2?o:"point"}}},zC=st([nl,ci,Ume,ZU,Za],lge);function uut(e){if(e!=null){if(e in f2)return f2[e]();var t="scale".concat(AC(e));if(t in f2)return f2[t]()}}function f$(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var i=uut(t);if(i!=null){var a=i.domain(r).range(n);return Sit(a),a}}}var cge=(e,t,r)=>{var n=c$(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&V0(e))return Nct(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&V0(e))return Act(e,t.tickCount,t.allowDecimals)}},h$=st([d$,BC,zC],cge),uge=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&V0(t)&&Array.isArray(r)&&r.length>0){var i=t[0],a=r[0],s=t[1],o=r[r.length-1];return[Math.min(i,a),Math.max(s,o)]}return t},dut=st([nl,d$,h$,Za],uge),fut=st(AP,nl,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Zh(e.map(o=>o.value))).sort((o,l)=>o-l);if(n.length<2)return 1/0;var i=n[n.length-1]-n[0];if(i===0)return 1/0;for(var a=0;a<n.length-1;a++){var s=n[a+1]-n[a];r=Math.min(r,s)}return r/i}}),dge=st(fut,ci,Tme,Ns,(e,t,r,n)=>n,(e,t,r,n,i)=>{if(!Ea(e))return 0;var a=t==="vertical"?n.height:n.width;if(i==="gap")return e*a/2;if(i==="no-gap"){var s=yd(r,e*a),o=e*a/2;return o-s-(o-s)/a*s}return 0}),hut=(e,t)=>{var r=up(e,t);return r==null||typeof r.padding!="string"?0:dge(e,"xAxis",t,r.padding)},put=(e,t)=>{var r=dp(e,t);return r==null||typeof r.padding!="string"?0:dge(e,"yAxis",t,r.padding)},mut=st(up,hut,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((r=i.left)!==null&&r!==void 0?r:0)+t,right:((n=i.right)!==null&&n!==void 0?n:0)+t}}),gut=st(dp,put,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((r=i.top)!==null&&r!==void 0?r:0)+t,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+t}}),xut=st([Ns,mut,lP,oP,(e,t,r)=>r],(e,t,r,n,i)=>{var{padding:a}=n;return i?[a.left,r.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),vut=st([Ns,ci,gut,lP,oP,(e,t,r)=>r],(e,t,r,n,i,a)=>{var{padding:s}=i;return a?[n.height-s.bottom,s.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),HC=(e,t,r,n)=>{var i;switch(t){case"xAxis":return xut(e,r,n);case"yAxis":return vut(e,r,n);case"zAxis":return(i=s$(e,r))===null||i===void 0?void 0:i.range;case"angleAxis":return jme(e);case"radiusAxis":return Dme(e,r);default:return}},fge=st([nl,HC],SP),Db=st([nl,zC,dut,fge],f$);st([UC,u$,Za],Xct);function hge(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var TP=(e,t)=>t,IP=(e,t,r)=>r,yut=st(aP,TP,IP,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(hge)),but=st(sP,TP,IP,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(hge)),pge=(e,t)=>({width:e.width,height:t.height}),wut=(e,t)=>{var r=typeof t.width=="number"?t.width:RC;return{width:r,height:e.height}},mge=st(Ns,up,pge),Sut=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},Eut=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},Cut=st(lp,Ns,yut,TP,IP,(e,t,r,n,i)=>{var a={},s;return r.forEach(o=>{var l=pge(t,o);s==null&&(s=Sut(t,n,e));var c=n==="top"&&!i||n==="bottom"&&i;a[o.id]=s-Number(c)*l.height,s+=(c?-1:1)*l.height}),a}),kut=st(op,Ns,but,TP,IP,(e,t,r,n,i)=>{var a={},s;return r.forEach(o=>{var l=wut(t,o);s==null&&(s=Eut(t,n,e));var c=n==="left"&&!i||n==="right"&&i;a[o.id]=s-Number(c)*l.width,s+=(c?-1:1)*l.width}),a}),_ut=(e,t)=>{var r=up(e,t);if(r!=null)return Cut(e,r.orientation,r.mirror)},Nut=st([Ns,up,_ut,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r==null?void 0:r[n];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),Aut=(e,t)=>{var r=dp(e,t);if(r!=null)return kut(e,r.orientation,r.mirror)},Tut=st([Ns,dp,Aut,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r==null?void 0:r[n];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),gge=st(Ns,dp,(e,t)=>{var r=typeof t.width=="number"?t.width:RC;return{width:r,height:e.height}}),ZJ=(e,t,r)=>{switch(t){case"xAxis":return mge(e,r).width;case"yAxis":return gge(e,r).height;default:return}},xge=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=r,o=s1(e,n),l=t.map(c=>c.value);if(s&&o&&a==="category"&&i&&Xhe(l))return l}},p$=st([ci,AP,nl,Za],xge),vge=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:a}=r,s=s1(e,n);if(s&&(i==="number"||a!=="auto"))return t.map(o=>o.value)}},m$=st([ci,AP,BC,Za],vge),eZ=st([ci,$ct,zC,Db,p$,m$,HC,h$,Za],(e,t,r,n,i,a,s,o,l)=>{if(t!=null){var c=s1(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:a,duplicateDomain:i,isCategorical:c,niceTicks:o,range:s,realScaleType:r,scale:n}}}),Iut=(e,t,r,n,i,a,s,o,l)=>{if(!(t==null||n==null)){var c=s1(e,l),{type:d,ticks:f,tickCount:p}=t,m=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,x=d==="category"&&n.bandwidth?n.bandwidth()/m:0;x=l==="angleAxis"&&a!=null&&a.length>=2?yl(a[0]-a[1])*2*x:x;var y=f||i;if(y){var b=y.map((S,_)=>{var C=s?s.indexOf(S):S;return{index:_,coordinate:n(C)+x,value:S,offset:x}});return b.filter(S=>Ea(S.coordinate))}return c&&o?o.map((S,_)=>({coordinate:n(S)+x,value:S,index:_,offset:x})).filter(S=>Ea(S.coordinate)):n.ticks?n.ticks(p).map(S=>({coordinate:n(S)+x,value:S,offset:x})):n.domain().map((S,_)=>({coordinate:n(S)+x,value:s?s[S]:S,index:_,offset:x}))}},yge=st([ci,BC,zC,Db,h$,HC,p$,m$,Za],Iut),Out=(e,t,r,n,i,a,s)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=s1(e,s),{tickCount:l}=t,c=0;return c=s==="angleAxis"&&(n==null?void 0:n.length)>=2?yl(n[0]-n[1])*2*c:c,o&&a?a.map((d,f)=>({coordinate:r(d)+c,value:d,index:f,offset:c})):r.ticks?r.ticks(l).map(d=>({coordinate:r(d)+c,value:d,offset:c})):r.domain().map((d,f)=>({coordinate:r(d)+c,value:i?i[d]:d,index:f,offset:c}))}},Gy=st([ci,BC,Db,HC,p$,m$,Za],Out),Ky=st(nl,Db,(e,t)=>{if(!(e==null||t==null))return sO(sO({},e),{},{scale:t})}),Put=st([nl,zC,d$,fge],f$);st((e,t,r)=>s$(e,r),Put,(e,t)=>{if(!(e==null||t==null))return sO(sO({},e),{},{scale:t})});var Rut=st([ci,aP,sP],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),bge=e=>e.options.defaultTooltipEventType,wge=e=>e.options.validateTooltipEventTypes;function Sge(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function g$(e,t){var r=bge(e),n=wge(e);return Sge(t,r,n)}function jut(e){return wr(t=>g$(t,e))}var Ege=(e,t)=>{var r,n=Number(t);if(!(vd(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},Dut=e=>e.tooltip.settings,n0={active:!1,index:null,dataKey:void 0,coordinate:void 0},Mut={itemInteraction:{click:n0,hover:n0},axisInteraction:{click:n0,hover:n0},keyboardInteraction:n0,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Cge=Ll({name:"tooltip",initialState:Mut,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Fi()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,i=ld(e).tooltipItemPayloads.indexOf(r);i>-1&&(e.tooltipItemPayloads[i]=n)},prepare:Fi()},removeTooltipEntrySettings:{reducer(e,t){var r=ld(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Fi()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Fut,replaceTooltipEntrySettings:Lut,removeTooltipEntrySettings:But,setTooltipSettingsState:Uut,setActiveMouseOverItemIndex:kge,mouseLeaveItem:$ut,mouseLeaveChart:_ge,setActiveClickItemIndex:zut,setMouseOverAxisIndex:Nge,setMouseClickAxisIndex:Hut,setSyncInteraction:w5,setKeyboardInteraction:S5}=Cge.actions,Wut=Cge.reducer;function tZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function vN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tZ(Object(r),!0).forEach(function(n){Vut(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vut(e,t,r){return(t=qut(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qut(e){var t=Gut(e,"string");return typeof t=="symbol"?t:t+""}function Gut(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kut(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Xut(e){return e.index!=null}var Age=(e,t,r,n)=>{if(t==null)return n0;var i=Kut(e,t,r);if(i==null)return n0;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(Xut(i)){if(a)return vN(vN({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return vN(vN({},n0),{},{coordinate:i.coordinate})};function Yut(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function Qut(e,t){var r=Yut(e),n=t[0],i=t[1];if(r===void 0)return!1;var a=Math.min(n,i),s=Math.max(n,i);return r>=a&&r<=s}function Jut(e,t,r){if(r==null||t==null)return!0;var n=vo(e,t);return n==null||!V0(r)?!0:Qut(n,r)}var x$=(e,t,r,n)=>{var i=e==null?void 0:e.index;if(i==null)return null;var a=Number(i);if(!Ea(a))return i;var s=0,o=1/0;t.length>0&&(o=t.length-1);var l=Math.max(s,Math.min(a,o)),c=t[l];return c==null||Jut(c,r,n)?String(l):null},Tge=(e,t,r,n,i,a,s,o)=>{if(!(a==null||o==null)){var l=s[0],c=l==null?void 0:o(l.positions,a);if(c!=null)return c;var d=i==null?void 0:i[Number(a)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},Ige=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return r==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var s;return((s=a.settings)===null||s===void 0?void 0:s.dataKey)===i})},WC=e=>e.options.tooltipPayloadSearcher,Mb=e=>e.tooltip;function rZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function nZ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rZ(Object(r),!0).forEach(function(n){Zut(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zut(e,t,r){return(t=edt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function edt(e){var t=tdt(e,"string");return typeof t=="symbol"?t:t+""}function tdt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rdt(e,t){return e??t}var Oge=(e,t,r,n,i,a,s)=>{if(!(t==null||a==null)){var{chartData:o,computedData:l,dataStartIndex:c,dataEndIndex:d}=r,f=[];return e.reduce((p,m)=>{var x,{dataDefinedOnItem:y,settings:b}=m,S=rdt(y,o),_=Array.isArray(S)?Jpe(S,c,d):S,C=(x=b==null?void 0:b.dataKey)!==null&&x!==void 0?x:n,A=b==null?void 0:b.nameKey,j;if(n&&Array.isArray(_)&&!Array.isArray(_[0])&&s==="axis"?j=Drt(_,n,i):j=a(_,t,l,A),Array.isArray(j))j.forEach(O=>{var D=nZ(nZ({},b),{},{name:O.name,unit:O.unit,color:void 0,fill:void 0});p.push(RQ({tooltipEntrySettings:D,dataKey:O.dataKey,payload:O.payload,value:vo(O.payload,O.dataKey),name:O.name}))});else{var P;p.push(RQ({tooltipEntrySettings:b,dataKey:C,payload:j,value:vo(j,C),name:(P=vo(j,A))!==null&&P!==void 0?P:b==null?void 0:b.name}))}return p},f)}},v$=st([ts,ci,Ume,ZU,es],lge),ndt=st([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),idt=st([es,Rb],$me),VC=st([ndt,ts,idt],zme,{memoizeOptions:{resultEqualityCheck:NP}}),adt=st([VC],e=>e.filter(kP)),sdt=st([VC],Vme,{memoizeOptions:{resultEqualityCheck:NP}}),Fb=st([sdt,hm],qme),odt=st([adt,hm,ts],Fme),y$=st([Fb,ts,VC],Gme),Pge=st([ts],c$),ldt=st([ts],e=>e.allowDataOverflow),Rge=st([Pge,ldt],pme),cdt=st([VC],e=>e.filter(kP)),udt=st([odt,cdt,wP,Ime],Xme),ddt=st([udt,hm,es,Rge],Yme),fdt=st([VC],Wme),hdt=st([Fb,ts,fdt,u$,es],Zme,{memoizeOptions:{resultEqualityCheck:_P}}),pdt=st([ege,es,Rb],jb),mdt=st([pdt,es],nge),gdt=st([tge,es,Rb],jb),xdt=st([gdt,es],ige),vdt=st([rge,es,Rb],jb),ydt=st([vdt,es],age),bdt=st([mdt,ydt,xdt],oO),wdt=st([ts,Pge,Rge,ddt,hdt,bdt,ci,es],sge),qC=st([ts,ci,Fb,y$,wP,es,wdt],oge),Sdt=st([qC,ts,v$],cge),Edt=st([ts,qC,Sdt,es],uge),jge=e=>{var t=es(e),r=Rb(e),n=!1;return HC(e,t,r,n)},Dge=st([ts,jge],SP),Mge=st([ts,v$,Edt,Dge],f$),Cdt=st([ci,y$,ts,es],xge),kdt=st([ci,y$,ts,es],vge),_dt=(e,t,r,n,i,a,s,o)=>{if(t){var{type:l}=t,c=s1(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=l==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?yl(i[0]-i[1])*2*f:f,c&&s?s.map((p,m)=>({coordinate:n(p)+f,value:p,index:m,offset:f})):n.domain().map((p,m)=>({coordinate:n(p)+f,value:a?a[p]:p,index:m,offset:f}))}}},fp=st([ci,ts,v$,Mge,jge,Cdt,kdt,es],_dt),b$=st([bge,wge,Dut],(e,t,r)=>Sge(r.shared,e,t)),Fge=e=>e.tooltip.settings.trigger,w$=e=>e.tooltip.settings.defaultIndex,OP=st([Mb,b$,Fge,w$],Age),Xy=st([OP,Fb,$C,qC],x$),Lge=st([fp,Xy],Ege),Bge=st([OP],e=>{if(e)return e.dataKey}),Uge=st([Mb,b$,Fge,w$],Ige),Ndt=st([op,lp,ci,Ns,fp,w$,Uge,WC],Tge),Adt=st([OP,Ndt],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),Tdt=st([OP],e=>e.active),Idt=st([Uge,Xy,hm,$C,Lge,WC,b$],Oge);st([Idt],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function iZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function aZ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iZ(Object(r),!0).forEach(function(n){Odt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Odt(e,t,r){return(t=Pdt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pdt(e){var t=Rdt(e,"string");return typeof t=="symbol"?t:t+""}function Rdt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jdt=()=>wr(ts),Ddt=()=>{var e=jdt(),t=wr(fp),r=wr(Mge);return UI(!e||!r?void 0:aZ(aZ({},e),{},{scale:r}),t)};function sZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function X1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sZ(Object(r),!0).forEach(function(n){Mdt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mdt(e,t,r){return(t=Fdt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fdt(e){var t=Ldt(e,"string");return typeof t=="symbol"?t:t+""}function Ldt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bdt=(e,t,r,n)=>{var i=t.find(a=>a&&a.index===r);if(i){if(e==="horizontal")return{x:i.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},Udt=(e,t,r,n)=>{var i=t.find(c=>c&&c.index===r);if(i){if(e==="centric"){var a=i.coordinate,{radius:s}=n;return X1(X1(X1({},n),zs(n.cx,n.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:l}=n;return X1(X1(X1({},n),zs(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function $dt(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var $ge=(e,t,r,n,i)=>{var a,s=-1,o=(a=t==null?void 0:t.length)!==null&&a!==void 0?a:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var l=0;l<o;l++){var c=l>0?r[l-1].coordinate:r[o-1].coordinate,d=r[l].coordinate,f=l>=o-1?r[0].coordinate:r[l+1].coordinate,p=void 0;if(yl(d-c)!==yl(f-d)){var m=[];if(yl(f-d)===yl(i[1]-i[0])){p=f;var x=d+i[1]-i[0];m[0]=Math.min(x,(x+c)/2),m[1]=Math.max(x,(x+c)/2)}else{p=c;var y=f+i[1]-i[0];m[0]=Math.min(d,(y+d)/2),m[1]=Math.max(d,(y+d)/2)}var b=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(e>b[0]&&e<=b[1]||e>=m[0]&&e<=m[1]){({index:s}=r[l]);break}}else{var S=Math.min(c,f),_=Math.max(c,f);if(e>(S+d)/2&&e<=(_+d)/2){({index:s}=r[l]);break}}}else if(t){for(var C=0;C<o;C++)if(C===0&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C>0&&C<o-1&&e>(t[C].coordinate+t[C-1].coordinate)/2&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C===o-1&&e>(t[C].coordinate+t[C-1].coordinate)/2){({index:s}=t[C]);break}}return s},zdt=()=>wr(ZU),S$=(e,t)=>t,zge=(e,t,r)=>r,E$=(e,t,r,n)=>n,Hdt=st(fp,e=>Y3(e,t=>t.coordinate)),C$=st([Mb,S$,zge,E$],Age),k$=st([C$,Fb,$C,qC],x$),Wdt=(e,t,r)=>{if(t!=null){var n=Mb(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},Hge=st([Mb,S$,zge,E$],Ige),lO=st([op,lp,ci,Ns,fp,E$,Hge,WC],Tge),Vdt=st([C$,lO],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),Wge=st([fp,k$],Ege),qdt=st([Hge,k$,hm,$C,Wge,WC,S$],Oge),Gdt=st([C$,k$],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),Kdt=(e,t,r,n,i,a,s)=>{if(!(!e||!r||!n||!i)&&$dt(e,s)){var o=Rit(e,t),l=$ge(o,a,i,r,n),c=Bdt(t,i,l,e);return{activeIndex:String(l),activeCoordinate:c}}},Xdt=(e,t,r,n,i,a,s)=>{if(!(!e||!n||!i||!a||!r)){var o=Fst(e,r);if(o){var l=jit(o,t),c=$ge(l,s,a,n,i),d=Udt(t,a,c,o);return{activeIndex:String(c),activeCoordinate:d}}}},Ydt=(e,t,r,n,i,a,s,o)=>{if(!(!e||!t||!n||!i||!a))return t==="horizontal"||t==="vertical"?Kdt(e,t,n,i,a,s,o):Xdt(e,t,r,n,i,a,s)},Qdt=st(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),Jdt=st(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(Go)),r=Array.from(new Set(t));return r.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:Mct}});function oZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function lZ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oZ(Object(r),!0).forEach(function(n){Zdt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zdt(e,t,r){return(t=eft(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eft(e){var t=tft(e,"string");return typeof t=="symbol"?t:t+""}function tft(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rft={},nft={zIndexMap:Object.values(Go).reduce((e,t)=>lZ(lZ({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),rft)},ift=new Set(Object.values(Go));function aft(e){return ift.has(e)}var Vge=Ll({name:"zIndex",initialState:nft,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Fi()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!aft(r)&&delete e.zIndexMap[r])},prepare:Fi()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:i}=t.payload;e.zIndexMap[r]?i?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:i?void 0:n,panoramaElementId:i?n:void 0}},prepare:Fi()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:Fi()}}}),{registerZIndexPortal:sft,unregisterZIndexPortal:oft,registerZIndexPortalId:lft,unregisterZIndexPortalId:cft}=Vge.actions,uft=Vge.reducer;function hp(e){var{zIndex:t,children:r}=e,n=cat(),i=n&&t!==void 0&&t!==0,a=Bl(),s=ka();I.useLayoutEffect(()=>i?(s(sft({zIndex:t})),()=>{s(oft({zIndex:t}))}):TC,[s,t,i]);var o=wr(c=>Qdt(c,t,a));if(!i)return r;if(!o)return null;var l=document.getElementById(o);return l?Ml.createPortal(r,l):null}function E5(){return E5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E5.apply(null,arguments)}function cZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function yN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cZ(Object(r),!0).forEach(function(n){dft(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dft(e,t,r){return(t=fft(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fft(e){var t=hft(e,"string");return typeof t=="symbol"?t:t+""}function hft(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pft(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return I.isValidElement(t)?I.cloneElement(t,n):I.createElement(r,n)}function mft(e){var t,{coordinate:r,payload:n,index:i,offset:a,tooltipAxisBandSize:s,layout:o,cursor:l,tooltipEventType:c,chartName:d}=e,f=r,p=n,m=i;if(!l||!f||d!=="ScatterChart"&&c!=="axis")return null;var x,y,b;if(d==="ScatterChart")x=f,y=Jat,b=Go.cursorLine;else if(d==="BarChart")x=Zat(o,f,a,s),y=_0e,b=Go.cursorRectangle;else if(o==="radial"&&Jhe(f)){var{cx:S,cy:_,radius:C,startAngle:A,endAngle:j}=N0e(f);x={cx:S,cy:_,startAngle:A,endAngle:j,innerRadius:C,outerRadius:C},y=T0e,b=Go.cursorLine}else x={points:$st(o,f,a)},y=w0e,b=Go.cursorLine;var P=typeof l=="object"&&"className"in l?l.className:void 0,O=yN(yN(yN(yN({stroke:"#ccc",pointerEvents:"none"},a),x),XB(l)),{},{payload:p,payloadIndex:m,className:wi("recharts-tooltip-cursor",P)});return I.createElement(hp,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:b},I.createElement(pft,{cursor:l,cursorComp:y,cursorProps:O}))}function gft(e){var t=Ddt(),r=u0e(),n=uP(),i=zdt();return t==null||r==null||n==null||i==null?null:I.createElement(mft,E5({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:i}))}var qge=I.createContext(null),xft=()=>I.useContext(qge),Gge={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function a(l,c,d,f,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new i(d,f||l,p),x=r?r+c:c;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],m]:l._events[x].push(m):(l._events[x]=m,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],d,f;if(this._eventsCount===0)return c;for(f in d=this._events)t.call(d,f)&&c.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},o.prototype.listeners=function(c){var d=r?r+c:c,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,m=f.length,x=new Array(m);p<m;p++)x[p]=f[p].fn;return x},o.prototype.listenerCount=function(c){var d=r?r+c:c,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(c,d,f,p,m,x){var y=r?r+c:c;if(!this._events[y])return!1;var b=this._events[y],S=arguments.length,_,C;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),S){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,f),!0;case 4:return b.fn.call(b.context,d,f,p),!0;case 5:return b.fn.call(b.context,d,f,p,m),!0;case 6:return b.fn.call(b.context,d,f,p,m,x),!0}for(C=1,_=new Array(S-1);C<S;C++)_[C-1]=arguments[C];b.fn.apply(b.context,_)}else{var A=b.length,j;for(C=0;C<A;C++)switch(b[C].once&&this.removeListener(c,b[C].fn,void 0,!0),S){case 1:b[C].fn.call(b[C].context);break;case 2:b[C].fn.call(b[C].context,d);break;case 3:b[C].fn.call(b[C].context,d,f);break;case 4:b[C].fn.call(b[C].context,d,f,p);break;default:if(!_)for(j=1,_=new Array(S-1);j<S;j++)_[j-1]=arguments[j];b[C].fn.apply(b[C].context,_)}}return!0},o.prototype.on=function(c,d,f){return a(this,c,d,f,!1)},o.prototype.once=function(c,d,f){return a(this,c,d,f,!0)},o.prototype.removeListener=function(c,d,f,p){var m=r?r+c:c;if(!this._events[m])return this;if(!d)return s(this,m),this;var x=this._events[m];if(x.fn)x.fn===d&&(!p||x.once)&&(!f||x.context===f)&&s(this,m);else{for(var y=0,b=[],S=x.length;y<S;y++)(x[y].fn!==d||p&&!x[y].once||f&&x[y].context!==f)&&b.push(x[y]);b.length?this._events[m]=b.length===1?b[0]:b:s(this,m)}return this},o.prototype.removeAllListeners=function(c){var d;return c?(d=r?r+c:c,this._events[d]&&s(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(Gge);var vft=Gge.exports;const yft=Vs(vft);var aE=new yft,C5="recharts.syncEvent.tooltip",uZ="recharts.syncEvent.brush";function bft(e,t){if(t){var r=Number.parseInt(t,10);if(!vd(r))return e==null?void 0:e[r]}}var wft={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Kge=Ll({name:"options",initialState:wft,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Sft=Kge.reducer,{createEventEmitter:Eft}=Kge.actions;function Cft(e){return e.tooltip.syncInteraction}var kft={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Xge=Ll({name:"chartData",initialState:kft,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:dZ,setDataStartEndIndexes:_ft,setComputedData:LAt}=Xge.actions,Nft=Xge.reducer,Aft=["x","y"];function fZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Y1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fZ(Object(r),!0).forEach(function(n){Tft(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tft(e,t,r){return(t=Ift(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ift(e){var t=Oft(e,"string");return typeof t=="symbol"?t:t+""}function Oft(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pft(e,t){if(e==null)return{};var r,n,i=Rft(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Rft(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function jft(){var e=wr(e$),t=wr(t$),r=ka(),n=wr(Ome),i=wr(fp),a=uP(),s=cP(),o=wr(l=>l.rootProps.className);I.useEffect(()=>{if(e==null)return TC;var l=(c,d,f)=>{if(t!==f&&e===c){if(n==="index"){var p;if(s&&d!==null&&d!==void 0&&(p=d.payload)!==null&&p!==void 0&&p.coordinate&&d.payload.sourceViewBox){var m=d.payload.coordinate,{x,y}=m,b=Pft(m,Aft),{x:S,y:_,width:C,height:A}=d.payload.sourceViewBox,j=Y1(Y1({},b),{},{x:s.x+(C?(x-S)/C:0)*s.width,y:s.y+(A?(y-_)/A:0)*s.height});r(Y1(Y1({},d),{},{payload:Y1(Y1({},d.payload),{},{coordinate:j})}))}else r(d);return}if(i!=null){var P;if(typeof n=="function"){var O={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},D=n(i,O);P=i[D]}else n==="value"&&(P=i.find(Q=>String(Q.value)===d.payload.label));var{coordinate:L}=d.payload;if(P==null||d.payload.active===!1||L==null||s==null){r(w5({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:B,y:H}=L,z=Math.min(B,s.x+s.width),ie=Math.min(H,s.y+s.height),X={x:a==="horizontal"?P.coordinate:z,y:a==="horizontal"?ie:P.coordinate},W=w5({active:d.payload.active,coordinate:X,dataKey:d.payload.dataKey,index:String(P.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox});r(W)}}};return aE.on(C5,l),()=>{aE.off(C5,l)}},[o,r,t,e,n,i,a,s])}function Dft(){var e=wr(e$),t=wr(t$),r=ka();I.useEffect(()=>{if(e==null)return TC;var n=(i,a,s)=>{t!==s&&e===i&&r(_ft(a))};return aE.on(uZ,n),()=>{aE.off(uZ,n)}},[r,t,e])}function Mft(){var e=ka();I.useEffect(()=>{e(Eft())},[e]),jft(),Dft()}function Fft(e,t,r,n,i,a){var s=wr(m=>Wdt(m,e,t)),o=wr(t$),l=wr(e$),c=wr(Ome),d=wr(Cft),f=d==null?void 0:d.active,p=cP();I.useEffect(()=>{if(!f&&l!=null&&o!=null){var m=w5({active:a,coordinate:r,dataKey:s,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:p});aE.emit(C5,l,m,o)}},[f,r,s,i,n,o,l,c,a,p])}function hZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function pZ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hZ(Object(r),!0).forEach(function(n){Lft(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lft(e,t,r){return(t=Bft(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bft(e){var t=Uft(e,"string");return typeof t=="symbol"?t:t+""}function Uft(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $ft(e){return e.dataKey}function zft(e,t){return I.isValidElement(e)?I.cloneElement(e,t):typeof e=="function"?I.createElement(e,t):I.createElement(Iat,t)}var mZ=[],Hft={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Tb.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Wft(e){var t,r,n=Cc(e,Hft),{active:i,allowEscapeViewBox:a,animationDuration:s,animationEasing:o,content:l,filterNull:c,isAnimationActive:d,offset:f,payloadUniqBy:p,position:m,reverseDirection:x,useTranslate3d:y,wrapperStyle:b,cursor:S,shared:_,trigger:C,defaultIndex:A,portal:j,axisId:P}=n,O=ka(),D=typeof A=="number"?String(A):A;I.useEffect(()=>{O(Uut({shared:_,trigger:C,axisId:P,active:i,defaultIndex:D}))},[O,_,C,P,i,D]);var L=cP(),B=b0e(),H=jut(_),{activeIndex:z,isActive:ie}=(t=wr(Se=>Gdt(Se,H,C,D)))!==null&&t!==void 0?t:{},X=wr(Se=>qdt(Se,H,C,D)),W=wr(Se=>Wge(Se,H,C,D)),Q=wr(Se=>Vdt(Se,H,C,D)),te=X,J=xft(),Y=(r=i??ie)!==null&&r!==void 0?r:!1,[pe,_e]=xnt([te,Y]),ee=H==="axis"?W:void 0;Fft(H,C,Q,ee,z,Y);var de=j??J;if(de==null||L==null||H==null)return null;var G=te??mZ;Y||(G=mZ),c&&G.length&&(G=ent(G.filter(Se=>Se.value!=null&&(Se.hide!==!0||n.includeHidden)),p,$ft));var q=G.length>0,ne=I.createElement(Fat,{allowEscapeViewBox:a,animationDuration:s,animationEasing:o,isAnimationActive:d,active:Y,coordinate:Q,hasPayload:q,offset:f,position:m,reverseDirection:x,useTranslate3d:y,viewBox:L,wrapperStyle:b,lastBoundingBox:pe,innerRef:_e,hasPortalFromProps:!!j},zft(l,pZ(pZ({},n),{},{payload:G,label:ee,active:Y,activeIndex:z,coordinate:Q,accessibilityLayer:B})));return I.createElement(I.Fragment,null,Ml.createPortal(ne,de),Y&&I.createElement(gft,{cursor:S,tooltipEventType:H,coordinate:Q,payload:G,index:z}))}var _$=e=>null;_$.displayName="Cell";function Vft(e,t,r){return(t=qft(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qft(e){var t=Gft(e,"string");return typeof t=="symbol"?t:t+""}function Gft(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Kft{constructor(t){Vft(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function gZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Xft(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gZ(Object(r),!0).forEach(function(n){Yft(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yft(e,t,r){return(t=Qft(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qft(e){var t=Jft(e,"string");return typeof t=="symbol"?t:t+""}function Jft(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zft={cacheSize:2e3,enableCache:!0},Yge=Xft({},Zft),xZ=new Kft(Yge.cacheSize),eht={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},vZ="recharts_measurement_span";function tht(e,t){var r=t.fontSize||"",n=t.fontFamily||"",i=t.fontWeight||"",a=t.fontStyle||"",s=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o)}var yZ=(e,t)=>{try{var r=document.getElementById(vZ);r||(r=document.createElement("span"),r.setAttribute("id",vZ),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,eht,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},G2=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Tb.isSsr)return{width:0,height:0};if(!Yge.enableCache)return yZ(t,r);var n=tht(t,r),i=xZ.get(n);if(i)return i;var a=yZ(t,r);return xZ.set(n,a),a},bZ=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,wZ=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,rht=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,nht=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Qge={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},iht=Object.keys(Qge),kv="NaN";function aht(e,t){return e*Qge[t]}class hl{static parse(t){var r,[,n,i]=(r=nht.exec(t))!==null&&r!==void 0?r:[];return new hl(parseFloat(n),i??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,vd(t)&&(this.unit=""),r!==""&&!rht.test(r)&&(this.num=NaN,this.unit=""),iht.includes(r)&&(this.num=aht(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new hl(NaN,""):new hl(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new hl(NaN,""):new hl(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new hl(NaN,""):new hl(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new hl(NaN,""):new hl(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return vd(this.num)}}function Jge(e){if(e.includes(kv))return kv;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,i,a]=(r=bZ.exec(t))!==null&&r!==void 0?r:[],s=hl.parse(n??""),o=hl.parse(a??""),l=i==="*"?s.multiply(o):s.divide(o);if(l.isNaN())return kv;t=t.replace(bZ,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,d,f,p]=(c=wZ.exec(t))!==null&&c!==void 0?c:[],m=hl.parse(d??""),x=hl.parse(p??""),y=f==="+"?m.add(x):m.subtract(x);if(y.isNaN())return kv;t=t.replace(wZ,y.toString())}return t}var SZ=/\(([^()]*)\)/;function sht(e){for(var t=e,r;(r=SZ.exec(t))!=null;){var[,n]=r;t=t.replace(SZ,Jge(n))}return t}function oht(e){var t=e.replace(/\s+/g,"");return t=sht(t),t=Jge(t),t}function lht(e){try{return oht(e)}catch{return kv}}function bM(e){var t=lht(e.slice(5,-1));return t===kv?"":t}var cht=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],uht=["dx","dy","angle","className","breakAll"];function k5(){return k5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k5.apply(null,arguments)}function EZ(e,t){if(e==null)return{};var r,n,i=dht(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function dht(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Zge=/[ \f\n\r\t\v\u2028\u2029]+/,exe=e=>{var{children:t,breakAll:r,style:n}=e;try{var i=[];ks(t)||(r?i=t.toString().split(""):i=t.toString().split(Zge));var a=i.map(o=>({word:o,width:G2(o,n).width})),s=r?0:G2("",n).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function fht(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var txe=(e,t,r,n)=>e.reduce((i,a)=>{var{word:s,width:o}=a,l=i[i.length-1];if(l&&o!=null&&(t==null||n||l.width+o+r<Number(t)))l.words.push(s),l.width+=o+r;else{var c={words:[s],width:o};i.push(c)}return i},[]),rxe=e=>e.reduce((t,r)=>t.width>r.width?t:r),hht="",CZ=(e,t,r,n,i,a,s,o)=>{var l=e.slice(0,t),c=exe({breakAll:r,style:n,children:l+hht});if(!c)return[!1,[]];var d=txe(c.wordsWithComputedWidth,a,s,o),f=d.length>i||rxe(d).width>Number(a);return[f,d]},pht=(e,t,r,n,i)=>{var{maxLines:a,children:s,style:o,breakAll:l}=e,c=ur(a),d=String(s),f=txe(t,n,r,i);if(!c||i)return f;var p=f.length>a||rxe(f).width>Number(n);if(!p)return f;for(var m=0,x=d.length-1,y=0,b;m<=x&&y<=d.length-1;){var S=Math.floor((m+x)/2),_=S-1,[C,A]=CZ(d,_,l,o,a,n,r,i),[j]=CZ(d,S,l,o,a,n,r,i);if(!C&&!j&&(m=S+1),C&&j&&(x=S-1),!C&&j){b=A;break}y++}return b||f},kZ=e=>{var t=ks(e)?[]:e.toString().split(Zge);return[{words:t,width:void 0}]},mht=e=>{var{width:t,scaleToFit:r,children:n,style:i,breakAll:a,maxLines:s}=e;if((t||r)&&!Tb.isSsr){var o,l,c=exe({breakAll:a,children:n,style:i});if(c){var{wordsWithComputedWidth:d,spaceWidth:f}=c;o=d,l=f}else return kZ(n);return pht({breakAll:a,children:n,maxLines:s,style:i},o,l,t,!!r)}return kZ(n)},nxe="#808080",ght={angle:0,breakAll:!1,capHeight:"0.71em",fill:nxe,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},N$=I.forwardRef((e,t)=>{var r=Cc(e,ght),{x:n,y:i,lineHeight:a,capHeight:s,fill:o,scaleToFit:l,textAnchor:c,verticalAnchor:d}=r,f=EZ(r,cht),p=I.useMemo(()=>mht({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:l,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,l,f.style,f.width]),{dx:m,dy:x,angle:y,className:b,breakAll:S}=f,_=EZ(f,uht);if(!mf(n)||!mf(i)||p.length===0)return null;var C=Number(n)+(ur(m)?m:0),A=Number(i)+(ur(x)?x:0);if(!Ea(C)||!Ea(A))return null;var j;switch(d){case"start":j=bM("calc(".concat(s,")"));break;case"middle":j=bM("calc(".concat((p.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:j=bM("calc(".concat(p.length-1," * -").concat(a,")"));break}var P=[];if(l){var O=p[0].width,{width:D}=f;P.push("scale(".concat(ur(D)&&ur(O)?D/O:1,")"))}return y&&P.push("rotate(".concat(y,", ").concat(C,", ").concat(A,")")),P.length&&(_.transform=P.join(" ")),I.createElement("text",k5({},gu(_),{ref:t,x:C,y:A,className:wi("recharts-text",b),textAnchor:c,fill:o.includes("url")?nxe:o}),p.map((L,B)=>{var H=L.words.join(S?"":" ");return I.createElement("tspan",{x:C,dy:B===0?j:a,key:"".concat(H,"-").concat(B)},H)}))});N$.displayName="Text";var xht=["labelRef"];function vht(e,t){if(e==null)return{};var r,n,i=yht(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function yht(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function _Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ya(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_Z(Object(r),!0).forEach(function(n){bht(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_Z(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bht(e,t,r){return(t=wht(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wht(e){var t=Sht(e,"string");return typeof t=="symbol"?t:t+""}function Sht(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hh(){return hh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hh.apply(null,arguments)}var ixe=I.createContext(null),Eht=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:i,width:a,height:s,children:o}=e,l=I.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:i,width:a,height:s}),[t,r,n,i,a,s]);return I.createElement(ixe.Provider,{value:l},o)},axe=()=>{var e=I.useContext(ixe),t=cP();return e||c0e(t)},Cht=I.createContext(null),kht=()=>{var e=I.useContext(Cht),t=wr(Mme);return e||t},_ht=e=>{var{value:t,formatter:r}=e,n=ks(e.children)?t:e.children;return typeof r=="function"?r(n):n},A$=e=>e!=null&&typeof e=="function",Nht=(e,t)=>{var r=yl(t-e),n=Math.min(Math.abs(t-e),360);return r*n},Aht=(e,t,r,n,i)=>{var{offset:a,className:s}=e,{cx:o,cy:l,innerRadius:c,outerRadius:d,startAngle:f,endAngle:p,clockWise:m}=i,x=(c+d)/2,y=Nht(f,p),b=y>=0?1:-1,S,_;switch(t){case"insideStart":S=f+b*a,_=m;break;case"insideEnd":S=p-b*a,_=!m;break;case"end":S=p+b*a,_=m;break;default:throw new Error("Unsupported position ".concat(t))}_=y<=0?_:!_;var C=zs(o,l,x,S),A=zs(o,l,x,S+(_?1:-1)*359),j="M".concat(C.x,",").concat(C.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(_?0:1,`,
    `).concat(A.x,",").concat(A.y),P=ks(e.id)?qS("recharts-radial-line-"):e.id;return I.createElement("text",hh({},n,{dominantBaseline:"central",className:wi("recharts-radial-bar-label",s)}),I.createElement("defs",null,I.createElement("path",{id:P,d:j})),I.createElement("textPath",{xlinkHref:"#".concat(P)},r))},Tht=(e,t,r)=>{var{cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:o,endAngle:l}=e,c=(o+l)/2;if(r==="outside"){var{x:d,y:f}=zs(n,i,s+t,c);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var p=(a+s)/2,{x:m,y:x}=zs(n,i,p,c);return{x:m,y:x,textAnchor:"middle",verticalAnchor:"middle"}},_5=e=>"cx"in e&&ur(e.cx),Iht=(e,t)=>{var{parentViewBox:r,offset:n,position:i}=e,a;r!=null&&!_5(r)&&(a=r);var{x:s,y:o,upperWidth:l,lowerWidth:c,height:d}=t,f=s,p=s+(l-c)/2,m=(f+p)/2,x=(l+c)/2,y=f+l/2,b=d>=0?1:-1,S=b*n,_=b>0?"end":"start",C=b>0?"start":"end",A=l>=0?1:-1,j=A*n,P=A>0?"end":"start",O=A>0?"start":"end";if(i==="top"){var D={x:f+l/2,y:o-S,textAnchor:"middle",verticalAnchor:_};return ya(ya({},D),a?{height:Math.max(o-a.y,0),width:l}:{})}if(i==="bottom"){var L={x:p+c/2,y:o+d+S,textAnchor:"middle",verticalAnchor:C};return ya(ya({},L),a?{height:Math.max(a.y+a.height-(o+d),0),width:c}:{})}if(i==="left"){var B={x:m-j,y:o+d/2,textAnchor:P,verticalAnchor:"middle"};return ya(ya({},B),a?{width:Math.max(B.x-a.x,0),height:d}:{})}if(i==="right"){var H={x:m+x+j,y:o+d/2,textAnchor:O,verticalAnchor:"middle"};return ya(ya({},H),a?{width:Math.max(a.x+a.width-H.x,0),height:d}:{})}var z=a?{width:x,height:d}:{};return i==="insideLeft"?ya({x:m+j,y:o+d/2,textAnchor:O,verticalAnchor:"middle"},z):i==="insideRight"?ya({x:m+x-j,y:o+d/2,textAnchor:P,verticalAnchor:"middle"},z):i==="insideTop"?ya({x:f+l/2,y:o+S,textAnchor:"middle",verticalAnchor:C},z):i==="insideBottom"?ya({x:p+c/2,y:o+d-S,textAnchor:"middle",verticalAnchor:_},z):i==="insideTopLeft"?ya({x:f+j,y:o+S,textAnchor:O,verticalAnchor:C},z):i==="insideTopRight"?ya({x:f+l-j,y:o+S,textAnchor:P,verticalAnchor:C},z):i==="insideBottomLeft"?ya({x:p+j,y:o+d-S,textAnchor:O,verticalAnchor:_},z):i==="insideBottomRight"?ya({x:p+c-j,y:o+d-S,textAnchor:P,verticalAnchor:_},z):i&&typeof i=="object"&&(ur(i.x)||Kh(i.x))&&(ur(i.y)||Kh(i.y))?ya({x:s+yd(i.x,x),y:o+yd(i.y,d),textAnchor:"end",verticalAnchor:"end"},z):ya({x:y,y:o+d/2,textAnchor:"middle",verticalAnchor:"middle"},z)},Oht={angle:0,offset:5,zIndex:Go.label,position:"middle",textBreakAll:!1};function Qp(e){var t=Cc(e,Oht),{viewBox:r,position:n,value:i,children:a,content:s,className:o="",textBreakAll:l,labelRef:c}=t,d=kht(),f=axe(),p=n==="center"?f:d??f,m,x,y;if(r==null?m=p:_5(r)?m=r:m=c0e(r),!m||ks(i)&&ks(a)&&!I.isValidElement(s)&&typeof s!="function")return null;var b=ya(ya({},t),{},{viewBox:m});if(I.isValidElement(s)){var{labelRef:S}=b,_=vht(b,xht);return I.cloneElement(s,_)}if(typeof s=="function"){if(x=I.createElement(s,b),I.isValidElement(x))return x}else x=_ht(t);var C=gu(t);if(_5(m)){if(n==="insideStart"||n==="insideEnd"||n==="end")return Aht(t,n,x,C,m);y=Tht(m,t.offset,t.position)}else y=Iht(t,m);return I.createElement(hp,{zIndex:t.zIndex},I.createElement(N$,hh({ref:c,className:wi("recharts-label",o)},C,y,{textAnchor:fht(C.textAnchor)?C.textAnchor:y.textAnchor,breakAll:l}),x))}Qp.displayName="Label";var Pht=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?I.createElement(Qp,hh({key:"label-implicit"},n)):mf(e)?I.createElement(Qp,hh({key:"label-implicit",value:e},n)):I.isValidElement(e)?e.type===Qp?I.cloneElement(e,ya({key:"label-implicit"},n)):I.createElement(Qp,hh({key:"label-implicit",content:e},n)):A$(e)?I.createElement(Qp,hh({key:"label-implicit",content:e},n)):e&&typeof e=="object"?I.createElement(Qp,hh({},e,{key:"label-implicit"},n)):null};function Rht(e){var{label:t,labelRef:r}=e,n=axe();return Pht(t,n,r)||null}var sxe={},oxe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(oxe);var lxe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(lxe);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oxe,r=lxe,n=X3;function i(a){if(n.isArrayLike(a))return t.last(r.toArray(a))}e.last=i})(sxe);var jht=sxe.last;const Dht=Vs(jht);var Mht=["valueAccessor"],Fht=["dataKey","clockWise","id","textBreakAll","zIndex"];function cO(){return cO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cO.apply(null,arguments)}function NZ(e,t){if(e==null)return{};var r,n,i=Lht(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Lht(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Bht=e=>Array.isArray(e.value)?Dht(e.value):e.value,cxe=I.createContext(void 0),Uht=cxe.Provider,uxe=I.createContext(void 0);uxe.Provider;function $ht(){return I.useContext(cxe)}function zht(){return I.useContext(uxe)}function xA(e){var{valueAccessor:t=Bht}=e,r=NZ(e,Mht),{dataKey:n,clockWise:i,id:a,textBreakAll:s,zIndex:o}=r,l=NZ(r,Fht),c=$ht(),d=zht(),f=c||d;return!f||!f.length?null:I.createElement(hp,{zIndex:o??Go.label},I.createElement(Gh,{className:"recharts-label-list"},f.map((p,m)=>{var x,y=ks(n)?t(p,m):vo(p&&p.payload,n),b=ks(a)?{}:{id:"".concat(a,"-").concat(m)};return I.createElement(Qp,cO({key:"label-".concat(m)},gu(p),l,b,{fill:(x=r.fill)!==null&&x!==void 0?x:p.fill,parentViewBox:p.parentViewBox,value:y,textBreakAll:s,viewBox:p.viewBox,index:m,zIndex:0}))})))}xA.displayName="LabelList";function Hht(e){var{label:t}=e;return t?t===!0?I.createElement(xA,{key:"labelList-implicit"}):I.isValidElement(t)||A$(t)?I.createElement(xA,{key:"labelList-implicit",content:t}):typeof t=="object"?I.createElement(xA,cO({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var Wht={radiusAxis:{},angleAxis:{}},dxe=Ll({name:"polarAxis",initialState:Wht,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:BAt,removeRadiusAxis:UAt,addAngleAxis:$At,removeAngleAxis:zAt}=dxe.actions,Vht=dxe.reducer,AZ=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",TZ=null,wM=null,fxe=e=>{if(e===TZ&&Array.isArray(wM))return wM;var t=[];return I.Children.forEach(e,r=>{ks(r)||(ule.isFragment(r)?t=t.concat(fxe(r.props.children)):t.push(r))}),wM=t,TZ=e,t};function qht(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(i=>AZ(i)):n=[AZ(t)],fxe(e).forEach(i=>{var a=Uy(i,"type.displayName")||Uy(i,"type.name");a&&n.indexOf(a)!==-1&&r.push(i)}),r}var hxe={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var i;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const a=r[Symbol.toStringTag];return a==null||!((i=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&i.writable)?!1:r.toString()===`[object ${a}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(hxe);var Ght=hxe.isPlainObject;const Kht=Vs(Ght);function IZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function OZ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IZ(Object(r),!0).forEach(function(n){Xht(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xht(e,t,r){return(t=Yht(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yht(e){var t=Qht(e,"string");return typeof t=="symbol"?t:t+""}function Qht(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uO(){return uO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uO.apply(null,arguments)}var PZ=(e,t,r,n,i)=>{var a=r-n,s;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+r,",").concat(t),s+="L ".concat(e+r-a/2,",").concat(t+i),s+="L ".concat(e+r-a/2-n,",").concat(t+i),s+="L ".concat(e,",").concat(t," Z"),s},Jht={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Zht=e=>{var t=Cc(e,Jht),{x:r,y:n,upperWidth:i,lowerWidth:a,height:s,className:o}=t,{animationEasing:l,animationDuration:c,animationBegin:d,isUpdateAnimationActive:f}=t,p=I.useRef(null),[m,x]=I.useState(-1),y=I.useRef(i),b=I.useRef(a),S=I.useRef(s),_=I.useRef(r),C=I.useRef(n),A=_U(e,"trapezoid-");if(I.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var X=p.current.getTotalLength();X&&x(X)}catch{}},[]),r!==+r||n!==+n||i!==+i||a!==+a||s!==+s||i===0&&a===0||s===0)return null;var j=wi("recharts-trapezoid",o);if(!f)return I.createElement("g",null,I.createElement("path",uO({},gu(t),{className:j,d:PZ(r,n,i,a,s)})));var P=y.current,O=b.current,D=S.current,L=_.current,B=C.current,H="0px ".concat(m===-1?1:m,"px"),z="".concat(m,"px 0px"),ie=S0e(["strokeDasharray"],c,l);return I.createElement(kU,{animationId:A,key:A,canBegin:m>0,duration:c,easing:l,isActive:f,begin:d},X=>{var W=Ms(P,i,X),Q=Ms(O,a,X),te=Ms(D,s,X),J=Ms(L,r,X),Y=Ms(B,n,X);p.current&&(y.current=W,b.current=Q,S.current=te,_.current=J,C.current=Y);var pe=X>0?{transition:ie,strokeDasharray:z}:{strokeDasharray:H};return I.createElement("path",uO({},gu(t),{className:j,d:PZ(J,Y,W,Q,te),ref:p,style:OZ(OZ({},pe),t.style)}))})},ept=["option","shapeType","propTransformer","activeClassName"];function tpt(e,t){if(e==null)return{};var r,n,i=rpt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function rpt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function RZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function dO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RZ(Object(r),!0).forEach(function(n){npt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function npt(e,t,r){return(t=ipt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ipt(e){var t=apt(e,"string");return typeof t=="symbol"?t:t+""}function apt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function spt(e,t){return dO(dO({},t),e)}function opt(e,t){return e==="symbols"}function jZ(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return I.createElement(_0e,r);case"trapezoid":return I.createElement(Zht,r);case"sector":return I.createElement(T0e,r);case"symbols":if(opt(t))return I.createElement(Qhe,r);break;case"curve":return I.createElement(w0e,r);default:return null}}function lpt(e){return I.isValidElement(e)?e.props:e}function cpt(e){var{option:t,shapeType:r,propTransformer:n=spt,activeClassName:i="recharts-active-shape"}=e,a=tpt(e,ept),s;if(I.isValidElement(t))s=I.cloneElement(t,dO(dO({},a),lpt(t)));else if(typeof t=="function")s=t(a);else if(Kht(t)&&typeof t!="boolean"){var o=n(t,a);s=I.createElement(jZ,{shapeType:r,elementProps:o})}else{var l=a;s=I.createElement(jZ,{shapeType:r,elementProps:l})}return a.isActive?I.createElement(Gh,{className:i},s):s}var pxe=(e,t)=>{var r=ka();return(n,i)=>a=>{e==null||e(n,i,a),r(kge({activeIndex:String(i),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},mxe=e=>{var t=ka();return(r,n)=>i=>{e==null||e(r,n,i),t($ut())}},gxe=(e,t)=>{var r=ka();return(n,i)=>a=>{e==null||e(n,i,a),r(zut({activeIndex:String(i),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function upt(e){var{tooltipEntrySettings:t}=e,r=ka(),n=Bl(),i=I.useRef(null);return I.useLayoutEffect(()=>{n||(i.current===null?r(Fut(t)):i.current!==t&&r(Lut({prev:i.current,next:t})),i.current=t)},[t,r,n]),I.useLayoutEffect(()=>()=>{i.current&&(r(But(i.current)),i.current=null)},[r]),null}function dpt(e){var{legendPayload:t}=e,r=ka(),n=Bl(),i=I.useRef(null);return I.useLayoutEffect(()=>{n||(i.current===null?r(Sat(t)):i.current!==t&&r(Eat({prev:i.current,next:t})),i.current=t)},[r,n,t]),I.useLayoutEffect(()=>()=>{i.current&&(r(Cat(i.current)),i.current=null)},[r]),null}var SM,fpt=()=>{var[e]=I.useState(()=>qS("uid-"));return e},hpt=(SM=ay.useId)!==null&&SM!==void 0?SM:fpt;function xxe(e,t){var r=hpt();return t||(e?"".concat(e,"-").concat(r):r)}var ppt=I.createContext(void 0),mpt=e=>{var{id:t,type:r,children:n}=e,i=xxe("recharts-".concat(r),t);return I.createElement(ppt.Provider,{value:i},n(i))},gpt={cartesianItems:[],polarItems:[]},vxe=Ll({name:"graphicalItems",initialState:gpt,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Fi()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,i=ld(e).cartesianItems.indexOf(r);i>-1&&(e.cartesianItems[i]=n)},prepare:Fi()},removeCartesianGraphicalItem:{reducer(e,t){var r=ld(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Fi()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Fi()},removePolarGraphicalItem:{reducer(e,t){var r=ld(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Fi()}}}),{addCartesianGraphicalItem:xpt,replaceCartesianGraphicalItem:vpt,removeCartesianGraphicalItem:ypt,addPolarGraphicalItem:HAt,removePolarGraphicalItem:WAt}=vxe.actions,bpt=vxe.reducer,wpt=e=>{var t=ka(),r=I.useRef(null);return I.useLayoutEffect(()=>{r.current===null?t(xpt(e)):r.current!==e&&t(vpt({prev:r.current,next:e})),r.current=e},[t,e]),I.useLayoutEffect(()=>()=>{r.current&&(t(ypt(r.current)),r.current=null)},[t]),null},Spt=I.memo(wpt);function DZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function MZ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DZ(Object(r),!0).forEach(function(n){Ept(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ept(e,t,r){return(t=Cpt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cpt(e){var t=kpt(e,"string");return typeof t=="symbol"?t:t+""}function kpt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _pt={xAxis:{},yAxis:{},zAxis:{}},yxe=Ll({name:"cartesianAxis",initialState:_pt,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Fi()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Fi()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Fi()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Fi()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Fi()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Fi()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Fi()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Fi()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Fi()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,i=e.yAxis[r];if(i){var a=i.widthHistory||[];if(a.length===3&&a[0]===a[2]&&n===a[1]&&n!==i.width&&Math.abs(n-a[0])<=1)return;var s=[...a,n].slice(-3);e.yAxis[r]=MZ(MZ({},e.yAxis[r]),{},{width:n,widthHistory:s})}}}}),{addXAxis:Npt,replaceXAxis:Apt,removeXAxis:Tpt,addYAxis:Ipt,replaceYAxis:Opt,removeYAxis:Ppt,addZAxis:VAt,replaceZAxis:qAt,removeZAxis:GAt,updateYAxisWidth:Rpt}=yxe.actions,jpt=yxe.reducer,Dpt=st([Ns],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),Mpt=st([Dpt,op,lp],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),bxe=()=>wr(Mpt),Fpt="Invariant failed";function Lpt(e,t){throw new Error(Fpt)}var Bpt=["x","y"];function N5(){return N5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N5.apply(null,arguments)}function FZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Kw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FZ(Object(r),!0).forEach(function(n){Upt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Upt(e,t,r){return(t=$pt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $pt(e){var t=zpt(e,"string");return typeof t=="symbol"?t:t+""}function zpt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hpt(e,t){if(e==null)return{};var r,n,i=Wpt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Wpt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Vpt(e,t){var{x:r,y:n}=e,i=Hpt(e,Bpt),a="".concat(r),s=parseInt(a,10),o="".concat(n),l=parseInt(o,10),c="".concat(t.height||i.height),d=parseInt(c,10),f="".concat(t.width||i.width),p=parseInt(f,10);return Kw(Kw(Kw(Kw(Kw({},t),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:d,width:p,name:t.name,radius:t.radius})}function fO(e){return I.createElement(cpt,N5({shapeType:"rectangle",propTransformer:Vpt,activeClassName:"recharts-active-bar"},e))}var qpt=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,i)=>{if(ur(t))return t;var a=ur(n)||ks(n);return a?t(n,i):(a||Lpt(),r)}},Gpt={},wxe=Ll({name:"errorBars",initialState:Gpt,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:i}=t.payload;e[r]&&(e[r]=e[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?i:a))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:KAt,replaceErrorBar:XAt,removeErrorBar:YAt}=wxe.actions,Kpt=wxe.reducer,Xpt=["children"];function Ypt(e,t){if(e==null)return{};var r,n,i=Qpt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Qpt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Jpt={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Zpt=I.createContext(Jpt);function e0t(e){var{children:t}=e,r=Ypt(e,Xpt);return I.createElement(Zpt.Provider,{value:r},t)}function Sxe(e,t){var r,n,i=wr(c=>up(c,e)),a=wr(c=>dp(c,t)),s=(r=i==null?void 0:i.allowDataOverflow)!==null&&r!==void 0?r:cs.allowDataOverflow,o=(n=a==null?void 0:a.allowDataOverflow)!==null&&n!==void 0?n:us.allowDataOverflow,l=s||o;return{needClip:l,needClipX:s,needClipY:o}}function t0t(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,i=bxe(),{needClipX:a,needClipY:s,needClip:o}=Sxe(t,r);if(!o||!i)return null;var{x:l,y:c,width:d,height:f}=i;return I.createElement("clipPath",{id:"clipPath-".concat(n)},I.createElement("rect",{x:a?l:l-d/2,y:s?c:c-f/2,width:a?d:d*2,height:s?f:f*2}))}function r0t(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Ea(e.zIndex)?e.zIndex:t}var n0t={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GC=I;function i0t(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var a0t=typeof Object.is=="function"?Object.is:i0t,s0t=GC.useSyncExternalStore,o0t=GC.useRef,l0t=GC.useEffect,c0t=GC.useMemo,u0t=GC.useDebugValue;n0t.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var a=o0t(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=c0t(function(){function l(m){if(!c){if(c=!0,d=m,m=n(m),i!==void 0&&s.hasValue){var x=s.value;if(i(x,m))return f=x}return f=m}if(x=f,a0t(d,m))return x;var y=n(m);return i!==void 0&&i(x,y)?(d=m,x):(d=m,f=y)}var c=!1,d,f,p=r===void 0?null:r;return[function(){return l(t())},p===null?void 0:function(){return l(p())}]},[t,r,n,i]);var o=s0t(e,a[0],a[1]);return l0t(function(){s.hasValue=!0,s.value=o},[o]),u0t(o),o};function d0t(e){e()}function f0t(){let e=null,t=null;return{clear(){e=null,t=null},notify(){d0t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var LZ={notify(){},get:()=>[]};function h0t(e,t){let r,n=LZ,i=0,a=!1;function s(y){d();const b=n.subscribe(y);let S=!1;return()=>{S||(S=!0,b(),f())}}function o(){n.notify()}function l(){x.onStateChange&&x.onStateChange()}function c(){return a}function d(){i++,r||(r=e.subscribe(l),n=f0t())}function f(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=LZ)}function p(){a||(a=!0,d())}function m(){a&&(a=!1,f())}const x={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:c,trySubscribe:p,tryUnsubscribe:m,getListeners:()=>n};return x}var p0t=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",m0t=p0t(),g0t=()=>typeof navigator<"u"&&navigator.product==="ReactNative",x0t=g0t(),v0t=()=>m0t||x0t?I.useLayoutEffect:I.useEffect,y0t=v0t();function BZ(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function b0t(e,t){if(BZ(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i])||!BZ(e[r[i]],t[r[i]]))return!1;return!0}var EM=Symbol.for("react-redux-context"),CM=typeof globalThis<"u"?globalThis:{};function w0t(){if(!I.createContext)return{};const e=CM[EM]??(CM[EM]=new Map);let t=e.get(I.createContext);return t||(t=I.createContext(null),e.set(I.createContext,t)),t}var S0t=w0t();function E0t(e){const{children:t,context:r,serverState:n,store:i}=e,a=I.useMemo(()=>{const l=h0t(i);return{store:i,subscription:l,getServerState:n?()=>n:void 0}},[i,n]),s=I.useMemo(()=>i.getState(),[i]);y0t(()=>{const{subscription:l}=a;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),s!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[a,s]);const o=r||S0t;return I.createElement(o.Provider,{value:a},t)}var C0t=E0t,k0t=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function _0t(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function T$(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(k0t.has(n)){if(e[n]==null&&t[n]==null)continue;if(!b0t(e[n],t[n]))return!1}else if(!_0t(e[n],t[n]))return!1;return!0}var N0t=["onMouseEnter","onMouseLeave","onClick"],A0t=["value","background","tooltipPosition"],T0t=["id"],I0t=["onMouseEnter","onClick","onMouseLeave"];function ep(){return ep=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ep.apply(null,arguments)}function UZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ho(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UZ(Object(r),!0).forEach(function(n){O0t(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function O0t(e,t,r){return(t=P0t(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P0t(e){var t=R0t(e,"string");return typeof t=="symbol"?t:t+""}function R0t(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hO(e,t){if(e==null)return{};var r,n,i=j0t(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function j0t(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var D0t=e=>{var{dataKey:t,name:r,fill:n,legendType:i,hide:a}=e;return[{inactive:a,dataKey:t,type:i,color:n,value:t0e(r,t),payload:e}]},M0t=I.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:i,name:a,hide:s,unit:o,tooltipType:l}=e,c={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:t0e(a,t),hide:s,type:l,color:i,unit:o}};return I.createElement(upt,{tooltipEntrySettings:c})});function F0t(e){var t=wr(Xy),{data:r,dataKey:n,background:i,allOtherBarProps:a}=e,{onMouseEnter:s,onMouseLeave:o,onClick:l}=a,c=hO(a,N0t),d=pxe(s,n),f=mxe(o),p=gxe(l,n);if(!i||r==null)return null;var m=XB(i);return I.createElement(hp,{zIndex:r0t(i,Go.barBackground)},r.map((x,y)=>{var{value:b,background:S,tooltipPosition:_}=x,C=hO(x,A0t);if(!S)return null;var A=d(x,y),j=f(x,y),P=p(x,y),O=Ho(Ho(Ho(Ho(Ho({option:i,isActive:String(y)===t},C),{},{fill:"#eee"},S),m),eU(c,x,y)),{},{onMouseEnter:A,onMouseLeave:j,onClick:P,dataKey:n,index:y,className:"recharts-bar-background-rectangle"});return I.createElement(fO,ep({key:"background-bar-".concat(y)},O))}))}function L0t(e){var{showLabels:t,children:r,rects:n}=e,i=n==null?void 0:n.map(a=>{var s={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return Ho(Ho({},s),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:s,fill:a.fill})});return I.createElement(Uht,{value:t?i:void 0},r)}function B0t(e){var{shape:t,activeBar:r,baseProps:n,entry:i,index:a,dataKey:s}=e,o=wr(Xy),l=wr(Bge),c=r&&String(a)===o&&(l==null||s===l),d=c?r:t;return c?I.createElement(hp,{zIndex:Go.activeBar},I.createElement(fO,ep({},n,{name:String(n.name)},i,{isActive:c,option:d,index:a,dataKey:s}))):I.createElement(fO,ep({},n,{name:String(n.name)},i,{isActive:c,option:d,index:a,dataKey:s}))}function U0t(e){var{shape:t,baseProps:r,entry:n,index:i,dataKey:a}=e;return I.createElement(fO,ep({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:i,dataKey:a}))}function $0t(e){var t,{data:r,props:n}=e,i=(t=qh(n))!==null&&t!==void 0?t:{},{id:a}=i,s=hO(i,T0t),{shape:o,dataKey:l,activeBar:c}=n,{onMouseEnter:d,onClick:f,onMouseLeave:p}=n,m=hO(n,I0t),x=pxe(d,l),y=mxe(p),b=gxe(f,l);return r?I.createElement(I.Fragment,null,r.map((S,_)=>I.createElement(Gh,ep({key:"rectangle-".concat(S==null?void 0:S.x,"-").concat(S==null?void 0:S.y,"-").concat(S==null?void 0:S.value,"-").concat(_),className:"recharts-bar-rectangle"},eU(m,S,_),{onMouseEnter:x(S,_),onMouseLeave:y(S,_),onClick:b(S,_)}),c?I.createElement(B0t,{shape:o,activeBar:c,baseProps:s,entry:S,index:_,dataKey:l}):I.createElement(U0t,{shape:o,baseProps:s,entry:S,index:_,dataKey:l})))):null}function z0t(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:l,onAnimationEnd:c,onAnimationStart:d}=t,f=r.current,p=_U(t,"recharts-bar-"),[m,x]=I.useState(!1),y=!m,b=I.useCallback(()=>{typeof c=="function"&&c(),x(!1)},[c]),S=I.useCallback(()=>{typeof d=="function"&&d(),x(!0)},[d]);return I.createElement(L0t,{showLabels:y,rects:n},I.createElement(kU,{animationId:p,begin:s,duration:o,isActive:a,easing:l,onAnimationEnd:b,onAnimationStart:S,key:p},_=>{var C=_===1?n:n==null?void 0:n.map((A,j)=>{var P=f&&f[j];if(P)return Ho(Ho({},A),{},{x:Ms(P.x,A.x,_),y:Ms(P.y,A.y,_),width:Ms(P.width,A.width,_),height:Ms(P.height,A.height,_)});if(i==="horizontal"){var O=Ms(0,A.height,_),D=Ms(A.stackedBarStart,A.y,_);return Ho(Ho({},A),{},{y:D,height:O})}var L=Ms(0,A.width,_),B=Ms(A.stackedBarStart,A.x,_);return Ho(Ho({},A),{},{width:L,x:B})});return _>0&&(r.current=C??null),C==null?null:I.createElement(Gh,null,I.createElement($0t,{props:t,data:C}))}),I.createElement(Hht,{label:t.label}),t.children)}function H0t(e){var t=I.useRef(null);return I.createElement(z0t,{previousRectanglesRef:t,props:e})}var Exe=0,W0t=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:vo(e,t)}};class V0t extends I.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:i,xAxisId:a,yAxisId:s,needClip:o,background:l,id:c}=this.props;if(t||r==null)return null;var d=wi("recharts-bar",i),f=c;return I.createElement(Gh,{className:d,id:c},o&&I.createElement("defs",null,I.createElement(t0t,{clipPathId:f,xAxisId:a,yAxisId:s})),I.createElement(Gh,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},I.createElement(F0t,{data:r,dataKey:n,background:l,allOtherBarProps:this.props}),I.createElement(H0t,this.props)))}}var q0t={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Exe,xAxisId:0,yAxisId:0,zIndex:Go.bar};function G0t(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:l,animationEasing:c,isAnimationActive:d}=e,{needClip:f}=Sxe(t,r),p=uP(),m=Bl(),x=qht(e.children,_$),y=wr(_=>wmt(_,t,r,m,e.id,x));if(p!=="vertical"&&p!=="horizontal")return null;var b,S=y==null?void 0:y[0];return S==null||S.height==null||S.width==null?b=0:b=p==="vertical"?S.height/2:S.width/2,I.createElement(e0t,{xAxisId:t,yAxisId:r,data:y,dataPointFormatter:W0t,errorBarOffset:b},I.createElement(V0t,ep({},e,{layout:p,needClip:f,data:y,xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:l,animationEasing:c,isAnimationActive:d})))}function K0t(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:i,bandSize:a,xAxis:s,yAxis:o,xAxisTicks:l,yAxisTicks:c,stackedData:d,displayedData:f,offset:p,cells:m,parentViewBox:x,dataStartIndex:y}=e,b=t==="horizontal"?o:s,S=d?b.scale.domain():null,_=Tit({numericAxis:b}),C=b.scale(_);return f.map((A,j)=>{var P,O,D,L,B,H;d?P=Eit(d[j+y],S):(P=vo(A,r),Array.isArray(P)||(P=[_,P]));var z=qpt(n,Exe)(P[1],j);if(t==="horizontal"){var ie,[X,W]=[o.scale(P[0]),o.scale(P[1])];O=IQ({axis:s,ticks:l,bandSize:a,offset:i.offset,entry:A,index:j}),D=(ie=W??X)!==null&&ie!==void 0?ie:void 0,L=i.size;var Q=X-W;if(B=vd(Q)?0:Q,H={x:O,y:p.top,width:L,height:p.height},Math.abs(z)>0&&Math.abs(B)<Math.abs(z)){var te=yl(B||z)*(Math.abs(z)-Math.abs(B));D-=te,B+=te}}else{var[J,Y]=[s.scale(P[0]),s.scale(P[1])];if(O=J,D=IQ({axis:o,ticks:c,bandSize:a,offset:i.offset,entry:A,index:j}),L=Y-J,B=i.size,H={x:p.left,y:D,width:p.width,height:B},Math.abs(z)>0&&Math.abs(L)<Math.abs(z)){var pe=yl(L||z)*(Math.abs(z)-Math.abs(L));L+=pe}}if(O==null||D==null||L==null||B==null)return null;var _e=Ho(Ho({},A),{},{stackedBarStart:C,x:O,y:D,width:L,height:B,value:d?P:P[1],payload:A,background:H,tooltipPosition:{x:O+L/2,y:D+B/2},parentViewBox:x},m&&m[j]&&m[j].props);return _e}).filter(Boolean)}function X0t(e){var t=Cc(e,q0t),r=Bl();return I.createElement(mpt,{id:t.id,type:"bar"},n=>I.createElement(I.Fragment,null,I.createElement(dpt,{legendPayload:D0t(t)}),I.createElement(M0t,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),I.createElement(Spt,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:Ait(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),I.createElement(hp,{zIndex:t.zIndex},I.createElement(G0t,ep({},t,{id:n})))))}var Cxe=I.memo(X0t,T$);Cxe.displayName="Bar";function $Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function bN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$Z(Object(r),!0).forEach(function(n){Y0t(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$Z(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Y0t(e,t,r){return(t=Q0t(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q0t(e){var t=J0t(e,"string");return typeof t=="symbol"?t:t+""}function J0t(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Z0t=(e,t)=>t,emt=(e,t,r)=>r,tmt=(e,t,r,n)=>n,rmt=(e,t,r,n,i)=>i,KC=st([o$,rmt],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),nmt=st([KC],e=>e==null?void 0:e.maxBarSize),imt=(e,t,r,n,i,a)=>a,zZ=(e,t,r)=>{var n=r??e;if(!ks(n))return yd(n,t,0)},amt=st([ci,o$,Z0t,emt,tmt],(e,t,r,n,i)=>t.filter(a=>e==="horizontal"?a.xAxisId===r:a.yAxisId===n).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),smt=(e,t,r,n)=>{var i=ci(e);return i==="horizontal"?b5(e,"yAxis",r,n):b5(e,"xAxis",t,n)},omt=(e,t,r)=>{var n=ci(e);return n==="horizontal"?ZJ(e,"xAxis",t):ZJ(e,"yAxis",r)},lmt=(e,t,r)=>{var n={},i=e.filter(kP),a=e.filter(c=>c.stackId==null),s=i.reduce((c,d)=>(c[d.stackId]||(c[d.stackId]=[]),c[d.stackId].push(d),c),n),o=Object.entries(s).map(c=>{var[d,f]=c,p=f.map(x=>x.dataKey),m=zZ(t,r,f[0].barSize);return{stackId:d,dataKeys:p,barSize:m}}),l=a.map(c=>{var d=[c.dataKey].filter(p=>p!=null),f=zZ(t,r,c.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...o,...l]},cmt=st([amt,Ict,omt],lmt),umt=(e,t,r,n,i)=>{var a,s,o=KC(e,t,r,n,i);if(o!=null){var l=ci(e),c=Ame(e),{maxBarSize:d}=o,f=ks(d)?c:d,p,m;return l==="horizontal"?(p=Ky(e,"xAxis",t,n),m=Gy(e,"xAxis",t,n)):(p=Ky(e,"yAxis",r,n),m=Gy(e,"yAxis",r,n)),(a=(s=UI(p,m,!0))!==null&&s!==void 0?s:f)!==null&&a!==void 0?a:0}},kxe=(e,t,r,n)=>{var i=ci(e),a,s;return i==="horizontal"?(a=Ky(e,"xAxis",t,n),s=Gy(e,"xAxis",t,n)):(a=Ky(e,"yAxis",r,n),s=Gy(e,"yAxis",r,n)),UI(a,s)};function dmt(e,t,r,n,i){var a=n.length;if(!(a<1)){var s=yd(e,r,0,!0),o,l=[];if(Ea(n[0].barSize)){var c=!1,d=r/a,f=n.reduce((S,_)=>S+(_.barSize||0),0);f+=(a-1)*s,f>=r&&(f-=(a-1)*s,s=0),f>=r&&d>0&&(c=!0,d*=.9,f=a*d);var p=(r-f)/2>>0,m={offset:p-s,size:0};o=n.reduce((S,_)=>{var C,A={stackId:_.stackId,dataKeys:_.dataKeys,position:{offset:m.offset+m.size+s,size:c?d:(C=_.barSize)!==null&&C!==void 0?C:0}},j=[...S,A];return m=j[j.length-1].position,j},l)}else{var x=yd(t,r,0,!0);r-2*x-(a-1)*s<=0&&(s=0);var y=(r-2*x-(a-1)*s)/a;y>1&&(y>>=0);var b=Ea(i)?Math.min(y,i):y;o=n.reduce((S,_,C)=>[...S,{stackId:_.stackId,dataKeys:_.dataKeys,position:{offset:x+(y+s)*C+(y-b)/2,size:b}}],l)}return o}}var fmt=(e,t,r,n,i,a,s)=>{var o=ks(s)?t:s,l=dmt(r,n,i!==a?i:a,e,o);return i!==a&&l!=null&&(l=l.map(c=>bN(bN({},c),{},{position:bN(bN({},c.position),{},{offset:c.position.offset-i/2})}))),l},hmt=st([cmt,Ame,Tct,Tme,umt,kxe,nmt],fmt),pmt=(e,t,r,n)=>Ky(e,"xAxis",t,n),mmt=(e,t,r,n)=>Ky(e,"yAxis",r,n),gmt=(e,t,r,n)=>Gy(e,"xAxis",t,n),xmt=(e,t,r,n)=>Gy(e,"yAxis",r,n),vmt=st([hmt,KC],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),ymt=(e,t)=>{var r=a$(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var i=e[n];if(i){var{stackedData:a}=i;if(a)return a.find(s=>s.key===r)}}}},bmt=st([smt,KC],ymt),wmt=st([Ns,wU,pmt,mmt,gmt,xmt,vmt,ci,YU,kxe,bmt,KC,imt],(e,t,r,n,i,a,s,o,l,c,d,f,p)=>{var{chartData:m,dataStartIndex:x,dataEndIndex:y}=l;if(!(f==null||s==null||t==null||o!=="horizontal"&&o!=="vertical"||r==null||n==null||i==null||a==null||c==null)){var{data:b}=f,S;if(b!=null&&b.length>0?S=b:S=m==null?void 0:m.slice(x,y+1),S!=null)return K0t({layout:o,barSettings:f,pos:s,parentViewBox:t,bandSize:c,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,stackedData:d,displayedData:S,offset:e,cells:p,dataStartIndex:x})}}),Smt=e=>{var{chartData:t}=e,r=ka(),n=Bl();return I.useEffect(()=>n?()=>{}:(r(dZ(t)),()=>{r(dZ(void 0))}),[t,r,n]),null},HZ={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},_xe=Ll({name:"brush",initialState:HZ,reducers:{setBrushSettings(e,t){return t.payload==null?HZ:t.payload}}}),{setBrushSettings:QAt}=_xe.actions,Emt=_xe.reducer;function Cmt(e,t,r){return(t=kmt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kmt(e){var t=_mt(e,"string");return typeof t=="symbol"?t:t+""}function _mt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class I${static create(t){return new I$(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(r){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],i=r[r.length-1];return n<=i?t>=n&&t<=i:t>=i&&t<=n}}Cmt(I$,"EPS",1e-4);function Nmt(e){return(e%180+180)%180}var Amt=function(t){var{width:r,height:n}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=Nmt(i),s=a*Math.PI/180,o=Math.atan(n/r),l=s>o&&s<Math.PI-o?n/Math.sin(s):r/Math.cos(s);return Math.abs(l)},Tmt={dots:[],areas:[],lines:[]},Nxe=Ll({name:"referenceElements",initialState:Tmt,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=ld(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=ld(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=ld(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:JAt,removeDot:ZAt,addArea:eTt,removeArea:tTt,addLine:rTt,removeLine:nTt}=Nxe.actions,Imt=Nxe.reducer,Omt=I.createContext(void 0),Pmt=e=>{var{children:t}=e,[r]=I.useState("".concat(qS("recharts"),"-clip")),n=bxe();if(n==null)return null;var{x:i,y:a,width:s,height:o}=n;return I.createElement(Omt.Provider,{value:r},I.createElement("defs",null,I.createElement("clipPath",{id:r},I.createElement("rect",{x:i,y:a,height:o,width:s}))),t)};function Axe(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function Rmt(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Amt(n,r)}function jmt(e,t,r){var n=r==="width",{x:i,y:a,width:s,height:o}=e;return t===1?{start:n?i:a,end:n?i+s:a+o}:{start:n?i+s:a+o,end:n?i:a}}function pO(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-i)<=0}function Dmt(e,t){return Axe(e,t+1)}function Mmt(e,t,r,n,i){for(var a=(n||[]).slice(),{start:s,end:o}=t,l=0,c=1,d=s,f=function(){var x=n==null?void 0:n[l];if(x===void 0)return{v:Axe(n,c)};var y=l,b,S=()=>(b===void 0&&(b=r(x,y)),b),_=x.coordinate,C=l===0||pO(e,_,S,d,o);C||(l=0,d=s,c+=1),C&&(d=_+e*(S()/2+i),l+=c)},p;c<=a.length;)if(p=f(),p)return p.v;return[]}function WZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function so(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WZ(Object(r),!0).forEach(function(n){Fmt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fmt(e,t,r){return(t=Lmt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lmt(e){var t=Bmt(e,"string");return typeof t=="symbol"?t:t+""}function Bmt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Umt(e,t,r,n,i){for(var a=(n||[]).slice(),s=a.length,{start:o}=t,{end:l}=t,c=function(p){var m=a[p],x,y=()=>(x===void 0&&(x=r(m,p)),x);if(p===s-1){var b=e*(m.coordinate+e*y()/2-l);a[p]=m=so(so({},m),{},{tickCoord:b>0?m.coordinate-b*e:m.coordinate})}else a[p]=m=so(so({},m),{},{tickCoord:m.coordinate});if(m.tickCoord!=null){var S=pO(e,m.tickCoord,y,o,l);S&&(l=m.tickCoord-e*(y()/2+i),a[p]=so(so({},m),{},{isShow:!0}))}},d=s-1;d>=0;d--)c(d);return a}function $mt(e,t,r,n,i,a){var s=(n||[]).slice(),o=s.length,{start:l,end:c}=t;if(a){var d=n[o-1],f=r(d,o-1),p=e*(d.coordinate+e*f/2-c);if(s[o-1]=d=so(so({},d),{},{tickCoord:p>0?d.coordinate-p*e:d.coordinate}),d.tickCoord!=null){var m=pO(e,d.tickCoord,()=>f,l,c);m&&(c=d.tickCoord-e*(f/2+i),s[o-1]=so(so({},d),{},{isShow:!0}))}}for(var x=a?o-1:o,y=function(_){var C=s[_],A,j=()=>(A===void 0&&(A=r(C,_)),A);if(_===0){var P=e*(C.coordinate-e*j()/2-l);s[_]=C=so(so({},C),{},{tickCoord:P<0?C.coordinate-P*e:C.coordinate})}else s[_]=C=so(so({},C),{},{tickCoord:C.coordinate});if(C.tickCoord!=null){var O=pO(e,C.tickCoord,j,l,c);O&&(l=C.tickCoord+e*(j()/2+i),s[_]=so(so({},C),{},{isShow:!0}))}},b=0;b<x;b++)y(b);return s}function O$(e,t,r){var{tick:n,ticks:i,viewBox:a,minTickGap:s,orientation:o,interval:l,tickFormatter:c,unit:d,angle:f}=e;if(!i||!i.length||!n)return[];if(ur(l)||Tb.isSsr){var p;return(p=Dmt(i,ur(l)?l:0))!==null&&p!==void 0?p:[]}var m=[],x=o==="top"||o==="bottom"?"width":"height",y=d&&x==="width"?G2(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=(C,A)=>{var j=typeof c=="function"?c(C.value,A):C.value;return x==="width"?Rmt(G2(j,{fontSize:t,letterSpacing:r}),y,f):G2(j,{fontSize:t,letterSpacing:r})[x]},S=i.length>=2?yl(i[1].coordinate-i[0].coordinate):1,_=jmt(a,S,x);return l==="equidistantPreserveStart"?Mmt(S,_,b,i,s):(l==="preserveStart"||l==="preserveStartEnd"?m=$mt(S,_,b,i,s,l==="preserveStartEnd"):m=Umt(S,_,b,i,s),m.filter(C=>C.isShow))}var zmt=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:a=0}=e,s=0;if(t){Array.from(t).forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>s&&(s=f.width)}});var o=r?r.getBoundingClientRect().width:0,l=i+a,c=s+l+o+(r?n:0);return Math.round(c)}return 0},Hmt=["axisLine","width","height","className","hide","ticks","axisType"];function Wmt(e,t){if(e==null)return{};var r,n,i=Vmt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Vmt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Cx(){return Cx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cx.apply(null,arguments)}function VZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ra(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VZ(Object(r),!0).forEach(function(n){qmt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qmt(e,t,r){return(t=Gmt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gmt(e){var t=Kmt(e,"string");return typeof t=="symbol"?t:t+""}function Kmt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Oh={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Go.axis};function Xmt(e){var{x:t,y:r,width:n,height:i,orientation:a,mirror:s,axisLine:o,otherSvgProps:l}=e;if(!o)return null;var c=Ra(Ra(Ra({},l),qh(o)),{},{fill:"none"});if(a==="top"||a==="bottom"){var d=+(a==="top"&&!s||a==="bottom"&&s);c=Ra(Ra({},c),{},{x1:t,y1:r+d*i,x2:t+n,y2:r+d*i})}else{var f=+(a==="left"&&!s||a==="right"&&s);c=Ra(Ra({},c),{},{x1:t+f*n,y1:r,x2:t+f*n,y2:r+i})}return I.createElement("line",Cx({},c,{className:wi("recharts-cartesian-axis-line",Uy(o,"className"))}))}function Ymt(e,t,r,n,i,a,s,o,l){var c,d,f,p,m,x,y=o?-1:1,b=e.tickSize||s,S=ur(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":c=d=e.coordinate,p=r+ +!o*i,f=p-y*b,x=f-y*l,m=S;break;case"left":f=p=e.coordinate,d=t+ +!o*n,c=d-y*b,m=c-y*l,x=S;break;case"right":f=p=e.coordinate,d=t+ +o*n,c=d+y*b,m=c+y*l,x=S;break;default:c=d=e.coordinate,p=r+ +o*i,f=p+y*b,x=f+y*l,m=S;break}return{line:{x1:c,y1:f,x2:d,y2:p},tick:{x:m,y:x}}}function Qmt(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function Jmt(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function Zmt(e){var{option:t,tickProps:r,value:n}=e,i,a=wi(r.className,"recharts-cartesian-axis-tick-value");if(I.isValidElement(t))i=I.cloneElement(t,Ra(Ra({},r),{},{className:a}));else if(typeof t=="function")i=t(Ra(Ra({},r),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(s=wi(s,t==null?void 0:t.className)),i=I.createElement(N$,Cx({},r,{className:s}),n)}return i}var egt=I.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:i,stroke:a,tickFormatter:s,unit:o,padding:l,tickTextProps:c,orientation:d,mirror:f,x:p,y:m,width:x,height:y,tickSize:b,tickMargin:S,fontSize:_,letterSpacing:C,getTicksConfig:A,events:j,axisType:P}=e,O=O$(Ra(Ra({},A),{},{ticks:r}),_,C),D=Qmt(d,f),L=Jmt(d,f),B=qh(A),H=XB(n),z={};typeof i=="object"&&(z=i);var ie=Ra(Ra({},B),{},{fill:"none"},z),X=O.map(te=>Ra({entry:te},Ymt(te,p,m,x,y,d,b,f,S))),W=X.map(te=>{var{entry:J,line:Y}=te;return I.createElement(Gh,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(J.value,"-").concat(J.coordinate,"-").concat(J.tickCoord)},i&&I.createElement("line",Cx({},ie,Y,{className:wi("recharts-cartesian-axis-tick-line",Uy(i,"className"))})))}),Q=X.map((te,J)=>{var{entry:Y,tick:pe}=te,_e=Ra(Ra(Ra(Ra({textAnchor:D,verticalAnchor:L},B),{},{stroke:"none",fill:a},H),pe),{},{index:J,payload:Y,visibleTicksCount:O.length,tickFormatter:s,padding:l},c);return I.createElement(Gh,Cx({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Y.value,"-").concat(Y.coordinate,"-").concat(Y.tickCoord)},eU(j,Y,J)),n&&I.createElement(Zmt,{option:n,tickProps:_e,value:"".concat(typeof s=="function"?s(Y.value,J):Y.value).concat(o||"")}))});return I.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(P,"-ticks")},Q.length>0&&I.createElement(hp,{zIndex:Go.label},I.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(P,"-tick-labels"),ref:t},Q)),W.length>0&&I.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(P,"-tick-lines")},W))}),tgt=I.forwardRef((e,t)=>{var{axisLine:r,width:n,height:i,className:a,hide:s,ticks:o,axisType:l}=e,c=Wmt(e,Hmt),[d,f]=I.useState(""),[p,m]=I.useState(""),x=I.useRef(null);I.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var b;return zmt({ticks:x.current,label:(b=e.labelRef)===null||b===void 0?void 0:b.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var y=I.useCallback(b=>{if(b){var S=b.getElementsByClassName("recharts-cartesian-axis-tick-value");x.current=S;var _=S[0];if(_){var C=window.getComputedStyle(_),A=C.fontSize,j=C.letterSpacing;(A!==d||j!==p)&&(f(A),m(j))}}},[d,p]);return s||n!=null&&n<=0||i!=null&&i<=0?null:I.createElement(hp,{zIndex:e.zIndex},I.createElement(Gh,{className:wi("recharts-cartesian-axis",a)},I.createElement(Xmt,{x:e.x,y:e.y,width:n,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:qh(e)}),I.createElement(egt,{ref:y,axisType:l,events:c,fontSize:d,getTicksConfig:e,height:e.height,letterSpacing:p,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:o,unit:e.unit,width:e.width,x:e.x,y:e.y}),I.createElement(Eht,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},I.createElement(Rht,{label:e.label,labelRef:e.labelRef}),e.children)))}),P$=I.forwardRef((e,t)=>{var r=Cc(e,Oh);return I.createElement(tgt,Cx({},r,{ref:t}))});P$.displayName="CartesianAxis";var rgt=["x1","y1","x2","y2","key"],ngt=["offset"],igt=["xAxisId","yAxisId"],agt=["xAxisId","yAxisId"];function qZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ho(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qZ(Object(r),!0).forEach(function(n){sgt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qZ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sgt(e,t,r){return(t=ogt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ogt(e){var t=lgt(e,"string");return typeof t=="symbol"?t:t+""}function lgt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bg(){return bg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bg.apply(null,arguments)}function mO(e,t){if(e==null)return{};var r,n,i=cgt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function cgt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ugt=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:i,width:a,height:s,ry:o}=e;return I.createElement("rect",{x:n,y:i,ry:o,width:a,height:s,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Txe(e){var{option:t,lineItemProps:r}=e,n;if(I.isValidElement(t))n=I.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var i,{x1:a,y1:s,x2:o,y2:l,key:c}=r,d=mO(r,rgt),f=(i=qh(d))!==null&&i!==void 0?i:{},{offset:p}=f,m=mO(f,ngt);n=I.createElement("line",bg({},m,{x1:a,y1:s,x2:o,y2:l,fill:"none",key:c}))}return n}function dgt(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=e,o=mO(e,igt),l=i.map((c,d)=>{var f=ho(ho({},o),{},{x1:t,y1:c,x2:t+r,y2:c,key:"line-".concat(d),index:d});return I.createElement(Txe,{key:"line-".concat(d),option:n,lineItemProps:f})});return I.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function fgt(e){var{y:t,height:r,vertical:n=!0,verticalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=e,o=mO(e,agt),l=i.map((c,d)=>{var f=ho(ho({},o),{},{x1:c,y1:t,x2:c,y2:t+r,key:"line-".concat(d),index:d});return I.createElement(Txe,{option:n,lineItemProps:f,key:"line-".concat(d)})});return I.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function hgt(e){var{horizontalFill:t,fillOpacity:r,x:n,y:i,width:a,height:s,horizontalPoints:o,horizontal:l=!0}=e;if(!l||!t||!t.length||o==null)return null;var c=o.map(f=>Math.round(f+i-i)).sort((f,p)=>f-p);i!==c[0]&&c.unshift(0);var d=c.map((f,p)=>{var m=!c[p+1],x=m?i+s-f:c[p+1]-f;if(x<=0)return null;var y=p%t.length;return I.createElement("rect",{key:"react-".concat(p),y:f,x:n,height:x,width:a,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return I.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function pgt(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:i,y:a,width:s,height:o,verticalPoints:l}=e;if(!t||!r||!r.length)return null;var c=l.map(f=>Math.round(f+i-i)).sort((f,p)=>f-p);i!==c[0]&&c.unshift(0);var d=c.map((f,p)=>{var m=!c[p+1],x=m?i+s-f:c[p+1]-f;if(x<=0)return null;var y=p%r.length;return I.createElement("rect",{key:"react-".concat(p),x:f,y:a,width:x,height:o,stroke:"none",fill:r[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return I.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var mgt=(e,t)=>{var{xAxis:r,width:n,height:i,offset:a}=e;return Zpe(O$(ho(ho(ho({},Oh),r),{},{ticks:e0e(r),viewBox:{x:0,y:0,width:n,height:i}})),a.left,a.left+a.width,t)},ggt=(e,t)=>{var{yAxis:r,width:n,height:i,offset:a}=e;return Zpe(O$(ho(ho(ho({},Oh),r),{},{ticks:e0e(r),viewBox:{x:0,y:0,width:n,height:i}})),a.top,a.top+a.height,t)},xgt={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Go.grid};function Ixe(e){var t=d0e(),r=f0e(),n=u0e(),i=ho(ho({},Cc(e,xgt)),{},{x:ur(e.x)?e.x:n.left,y:ur(e.y)?e.y:n.top,width:ur(e.width)?e.width:n.width,height:ur(e.height)?e.height:n.height}),{xAxisId:a,yAxisId:s,x:o,y:l,width:c,height:d,syncWithTicks:f,horizontalValues:p,verticalValues:m}=i,x=Bl(),y=wr(L=>eZ(L,"xAxis",a,x)),b=wr(L=>eZ(L,"yAxis",s,x));if(!xf(c)||!xf(d)||!ur(o)||!ur(l))return null;var S=i.verticalCoordinatesGenerator||mgt,_=i.horizontalCoordinatesGenerator||ggt,{horizontalPoints:C,verticalPoints:A}=i;if((!C||!C.length)&&typeof _=="function"){var j=p&&p.length,P=_({yAxis:b?ho(ho({},b),{},{ticks:j?p:b.ticks}):void 0,width:t??c,height:r??d,offset:n},j?!0:f);$I(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(C=P)}if((!A||!A.length)&&typeof S=="function"){var O=m&&m.length,D=S({xAxis:y?ho(ho({},y),{},{ticks:O?m:y.ticks}):void 0,width:t??c,height:r??d,offset:n},O?!0:f);$I(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(A=D)}return I.createElement(hp,{zIndex:i.zIndex},I.createElement("g",{className:"recharts-cartesian-grid"},I.createElement(ugt,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),I.createElement(hgt,bg({},i,{horizontalPoints:C})),I.createElement(pgt,bg({},i,{verticalPoints:A})),I.createElement(dgt,bg({},i,{offset:n,horizontalPoints:C,xAxis:y,yAxis:b})),I.createElement(fgt,bg({},i,{offset:n,verticalPoints:A,xAxis:y,yAxis:b}))))}Ixe.displayName="CartesianGrid";var vgt=["domain","range"],ygt=["domain","range"];function GZ(e,t){if(e==null)return{};var r,n,i=bgt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function bgt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function KZ(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function Oxe(e,t){if(e===t)return!0;var{domain:r,range:n}=e,i=GZ(e,vgt),{domain:a,range:s}=t,o=GZ(t,ygt);return!KZ(r,a)||!KZ(n,s)?!1:T$(i,o)}var wgt=["dangerouslySetInnerHTML","ticks"],Sgt=["id"];function A5(){return A5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A5.apply(null,arguments)}function XZ(e,t){if(e==null)return{};var r,n,i=Egt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Egt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Cgt(e){var t=ka(),r=I.useRef(null);return I.useLayoutEffect(()=>{r.current===null?t(Npt(e)):r.current!==e&&t(Apt({prev:r.current,next:e})),r.current=e},[e,t]),I.useLayoutEffect(()=>()=>{r.current&&(t(Tpt(r.current)),r.current=null)},[t]),null}var kgt=e=>{var{xAxisId:t,className:r}=e,n=wr(wU),i=Bl(),a="xAxis",s=wr(b=>Db(b,a,t,i)),o=wr(b=>yge(b,a,t,i)),l=wr(b=>mge(b,t)),c=wr(b=>Nut(b,t)),d=wr(b=>Lme(b,t));if(l==null||c==null||d==null)return null;var{dangerouslySetInnerHTML:f,ticks:p}=e,m=XZ(e,wgt),{id:x}=d,y=XZ(d,Sgt);return I.createElement(P$,A5({},m,y,{scale:s,x:c.x,y:c.y,width:l.width,height:l.height,className:wi("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:o,axisType:a}))},_gt={allowDataOverflow:cs.allowDataOverflow,allowDecimals:cs.allowDecimals,allowDuplicatedCategory:cs.allowDuplicatedCategory,angle:cs.angle,axisLine:Oh.axisLine,height:cs.height,hide:!1,includeHidden:cs.includeHidden,interval:cs.interval,minTickGap:cs.minTickGap,mirror:cs.mirror,orientation:cs.orientation,padding:cs.padding,reversed:cs.reversed,scale:cs.scale,tick:cs.tick,tickCount:cs.tickCount,tickLine:Oh.tickLine,tickSize:Oh.tickSize,type:cs.type,xAxisId:0},Ngt=e=>{var t=Cc(e,_gt);return I.createElement(I.Fragment,null,I.createElement(Cgt,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),I.createElement(kgt,t))},Pxe=I.memo(Ngt,Oxe);Pxe.displayName="XAxis";var Agt=["dangerouslySetInnerHTML","ticks"],Tgt=["id"];function T5(){return T5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T5.apply(null,arguments)}function YZ(e,t){if(e==null)return{};var r,n,i=Igt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Igt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ogt(e){var t=ka(),r=I.useRef(null);return I.useLayoutEffect(()=>{r.current===null?t(Ipt(e)):r.current!==e&&t(Opt({prev:r.current,next:e})),r.current=e},[e,t]),I.useLayoutEffect(()=>()=>{r.current&&(t(Ppt(r.current)),r.current=null)},[t]),null}var Pgt=e=>{var{yAxisId:t,className:r,width:n,label:i}=e,a=I.useRef(null),s=I.useRef(null),o=wr(wU),l=Bl(),c=ka(),d="yAxis",f=wr(j=>Db(j,d,t,l)),p=wr(j=>gge(j,t)),m=wr(j=>Tut(j,t)),x=wr(j=>yge(j,d,t,l)),y=wr(j=>Bme(j,t));if(I.useLayoutEffect(()=>{if(!(n!=="auto"||!p||A$(i)||I.isValidElement(i)||y==null)){var j=a.current;if(j){var P=j.getCalculatedWidth();Math.round(p.width)!==Math.round(P)&&c(Rpt({id:t,width:P}))}}},[x,p,c,i,t,n,y]),p==null||m==null||y==null)return null;var{dangerouslySetInnerHTML:b,ticks:S}=e,_=YZ(e,Agt),{id:C}=y,A=YZ(y,Tgt);return I.createElement(P$,T5({},_,A,{ref:a,labelRef:s,scale:f,x:m.x,y:m.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:p.width,height:p.height,className:wi("recharts-".concat(d," ").concat(d),r),viewBox:o,ticks:x,axisType:d}))},Rgt={allowDataOverflow:us.allowDataOverflow,allowDecimals:us.allowDecimals,allowDuplicatedCategory:us.allowDuplicatedCategory,angle:us.angle,axisLine:Oh.axisLine,hide:!1,includeHidden:us.includeHidden,interval:us.interval,minTickGap:us.minTickGap,mirror:us.mirror,orientation:us.orientation,padding:us.padding,reversed:us.reversed,scale:us.scale,tick:us.tick,tickCount:us.tickCount,tickLine:Oh.tickLine,tickSize:Oh.tickSize,type:us.type,width:us.width,yAxisId:0},jgt=e=>{var t=Cc(e,Rgt);return I.createElement(I.Fragment,null,I.createElement(Ogt,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),I.createElement(Pgt,t))},Rxe=I.memo(jgt,Oxe);Rxe.displayName="YAxis";var Dgt=(e,t)=>t,R$=st([Dgt,ci,Mme,es,Dge,fp,Hdt,Ns],Ydt),j$=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},jxe=xu("mouseClick"),Dxe=PC();Dxe.startListening({actionCreator:jxe,effect:(e,t)=>{var r=e.payload,n=R$(t.getState(),j$(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(Hut({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var I5=xu("mouseMove"),Mxe=PC(),wN=null;Mxe.startListening({actionCreator:I5,effect:(e,t)=>{var r=e.payload;wN!==null&&cancelAnimationFrame(wN);var n=j$(r);wN=requestAnimationFrame(()=>{var i=t.getState(),a=g$(i,i.tooltip.settings.shared);if(a==="axis"){var s=R$(i,n);(s==null?void 0:s.activeIndex)!=null?t.dispatch(Nge({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(_ge())}wN=null})}});var QZ={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},Fxe=Ll({name:"rootProps",initialState:QZ,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:QZ.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),Mgt=Fxe.reducer,{updateOptions:Fgt}=Fxe.actions,Lxe=Ll({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:iTt}=Lxe.actions,Lgt=Lxe.reducer,Bxe=xu("keyDown"),Uxe=xu("focus"),D$=PC();D$.startListening({actionCreator:Bxe,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=x$(i,Fb(r),$C(r),qC(r)),o=s==null?-1:Number(s);if(!(!Number.isFinite(o)||o<0)){var l=fp(r);if(a==="Enter"){var c=lO(r,"axis","hover",String(i.index));t.dispatch(S5({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:c}));return}var d=Rut(r),f=d==="left-to-right"?1:-1,p=a==="ArrowRight"?1:-1,m=o+p*f;if(!(l==null||m>=l.length||m<0)){var x=lO(r,"axis","hover",String(m));t.dispatch(S5({active:!0,activeIndex:m.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}}});D$.startListening({actionCreator:Uxe,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var a="0",s=lO(r,"axis","hover",String(a));t.dispatch(S5({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:s}))}}}});var Lc=xu("externalEvent"),$xe=PC(),kM=new Map;$xe.startListening({actionCreator:Lc,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var i=n.type,a=kM.get(i);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var o=t.getState(),l={activeCoordinate:Adt(o),activeDataKey:Bge(o),activeIndex:Xy(o),activeLabel:Lge(o),activeTooltipIndex:Xy(o),isTooltipActive:Tdt(o)};r(l,n)}finally{kM.delete(i)}});kM.set(i,s)}}});var Bgt=st([Mb],e=>e.tooltipItemPayloads),Ugt=st([Bgt,WC,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var i=e.find(o=>o.settings.dataKey===n);if(i!=null){var{positions:a}=i;if(a!=null){var s=t(a,r);return s}}}),zxe=xu("touchMove"),Hxe=PC();Hxe.startListening({actionCreator:zxe,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),i=g$(n,n.tooltip.settings.shared);if(i==="axis"){var a=R$(n,j$({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(Nge({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var s,o=r.touches[0];if(document.elementFromPoint==null)return;var l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute(Mit),d=(s=l.getAttribute(Fit))!==null&&s!==void 0?s:void 0,f=Ugt(t.getState(),c,d);t.dispatch(kge({activeDataKey:d,activeIndex:c,activeCoordinate:f}))}}}});var $gt=Cpe({brush:Emt,cartesianAxis:jpt,chartData:Nft,errorBars:Kpt,graphicalItems:bpt,layout:xit,legend:kat,options:Sft,polarAxis:Vht,polarOptions:Lgt,referenceElements:Imt,rootProps:Mgt,tooltip:Wut,zIndex:uft}),zgt=function(t){return znt({reducer:$gt,preloadedState:t,middleware:r=>{var n;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((n="es6")!==null&&n!==void 0?n:"")}).concat([Dxe.middleware,Mxe.middleware,D$.middleware,$xe.middleware,Hxe.middleware])},enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(Bpe({type:"raf"}))},devTools:Tb.devToolsEnabled})};function Hgt(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,i=Bl(),a=I.useRef(null);if(i)return r;a.current==null&&(a.current=zgt(t));var s=uU;return I.createElement(C0t,{context:s,store:a.current},r)}function Wgt(e){var{layout:t,margin:r}=e,n=ka(),i=Bl();return I.useEffect(()=>{i||(n(pit(t)),n(hit(r)))},[n,i,t,r]),null}var Vgt=I.memo(Wgt,T$);function qgt(e){var t=ka();return I.useEffect(()=>{t(Fgt(e))},[t,e]),null}function JZ(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",i=xxe("".concat(n).concat(t)),a=ka();return I.useLayoutEffect(()=>(a(lft({zIndex:t,elementId:i,isPanorama:r})),()=>{a(cft({zIndex:t,isPanorama:r}))}),[a,t,i,r]),I.createElement("g",{id:i})}function ZZ(e){var{children:t,isPanorama:r}=e,n=wr(Jdt);if(!n||n.length===0)return t;var i=n.filter(s=>s<0),a=n.filter(s=>s>0);return I.createElement(I.Fragment,null,i.map(s=>I.createElement(JZ,{key:s,zIndex:s,isPanorama:r})),t,a.map(s=>I.createElement(JZ,{key:s,zIndex:s,isPanorama:r})))}var Ggt=["children"];function Kgt(e,t){if(e==null)return{};var r,n,i=Xgt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Xgt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function gO(){return gO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gO.apply(null,arguments)}var Ygt={width:"100%",height:"100%",display:"block"},Qgt=I.forwardRef((e,t)=>{var r=d0e(),n=f0e(),i=b0e();if(!xf(r)||!xf(n))return null;var{children:a,otherAttributes:s,title:o,desc:l}=e,c,d;return s!=null&&(typeof s.tabIndex=="number"?c=s.tabIndex:c=i?0:void 0,typeof s.role=="string"?d=s.role:d=i?"application":void 0),I.createElement(Ihe,gO({},s,{title:o,desc:l,role:d,tabIndex:c,width:r,height:n,style:Ygt,ref:t}),a)}),Jgt=e=>{var{children:t}=e,r=wr(lP);if(!r)return null;var{width:n,height:i,y:a,x:s}=r;return I.createElement(Ihe,{width:n,height:i,x:s,y:a},t)},eee=I.forwardRef((e,t)=>{var{children:r}=e,n=Kgt(e,Ggt),i=Bl();return i?I.createElement(Jgt,null,I.createElement(ZZ,{isPanorama:!0},r)):I.createElement(Qgt,gO({ref:t},n),I.createElement(ZZ,{isPanorama:!1},r))});function Zgt(){var e=ka(),[t,r]=I.useState(null),n=wr(Dit);return I.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),a=i.width/t.offsetWidth;Ea(a)&&a!==n&&e(git(a))}},[t,e,n]),r}function tee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ext(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tee(Object(r),!0).forEach(function(n){txt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tee(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function txt(e,t,r){return(t=rxt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rxt(e){var t=nxt(e,"string");return typeof t=="symbol"?t:t+""}function nxt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kx(){return kx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kx.apply(null,arguments)}var ixt=()=>(Mft(),null);function xO(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var axt=I.forwardRef((e,t)=>{var r,n,i=I.useRef(null),[a,s]=I.useState({containerWidth:xO((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:xO((n=e.style)===null||n===void 0?void 0:n.height)}),o=I.useCallback((c,d)=>{s(f=>{var p=Math.round(c),m=Math.round(d);return f.containerWidth===p&&f.containerHeight===m?f:{containerWidth:p,containerHeight:m}})},[]),l=I.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null&&typeof ResizeObserver<"u"){var{width:d,height:f}=c.getBoundingClientRect();o(d,f);var p=x=>{var{width:y,height:b}=x[0].contentRect;o(y,b)},m=new ResizeObserver(p);m.observe(c),i.current=m}},[t,o]);return I.useEffect(()=>()=>{var c=i.current;c!=null&&c.disconnect()},[o]),I.createElement(I.Fragment,null,I.createElement(dP,{width:a.containerWidth,height:a.containerHeight}),I.createElement("div",kx({ref:l},e)))}),sxt=I.forwardRef((e,t)=>{var{width:r,height:n}=e,[i,a]=I.useState({containerWidth:xO(r),containerHeight:xO(n)}),s=I.useCallback((l,c)=>{a(d=>{var f=Math.round(l),p=Math.round(c);return d.containerWidth===f&&d.containerHeight===p?d:{containerWidth:f,containerHeight:p}})},[]),o=I.useCallback(l=>{if(typeof t=="function"&&t(l),l!=null){var{width:c,height:d}=l.getBoundingClientRect();s(c,d)}},[t,s]);return I.createElement(I.Fragment,null,I.createElement(dP,{width:i.containerWidth,height:i.containerHeight}),I.createElement("div",kx({ref:o},e)))}),oxt=I.forwardRef((e,t)=>{var{width:r,height:n}=e;return I.createElement(I.Fragment,null,I.createElement(dP,{width:r,height:n}),I.createElement("div",kx({ref:t},e)))}),lxt=I.forwardRef((e,t)=>{var{width:r,height:n}=e;return Kh(r)||Kh(n)?I.createElement(sxt,kx({},e,{ref:t})):I.createElement(oxt,kx({},e,{ref:t}))});function cxt(e){return e===!0?axt:lxt}var uxt=I.forwardRef((e,t)=>{var{children:r,className:n,height:i,onClick:a,onContextMenu:s,onDoubleClick:o,onMouseDown:l,onMouseEnter:c,onMouseLeave:d,onMouseMove:f,onMouseUp:p,onTouchEnd:m,onTouchMove:x,onTouchStart:y,style:b,width:S,responsive:_,dispatchTouchEvents:C=!0}=e,A=I.useRef(null),j=ka(),[P,O]=I.useState(null),[D,L]=I.useState(null),B=Zgt(),H=SU(),z=(H==null?void 0:H.width)>0?H.width:S,ie=(H==null?void 0:H.height)>0?H.height:i,X=I.useCallback(ae=>{B(ae),typeof t=="function"&&t(ae),O(ae),L(ae),ae!=null&&(A.current=ae)},[B,t,O,L]),W=I.useCallback(ae=>{j(jxe(ae)),j(Lc({handler:a,reactEvent:ae}))},[j,a]),Q=I.useCallback(ae=>{j(I5(ae)),j(Lc({handler:c,reactEvent:ae}))},[j,c]),te=I.useCallback(ae=>{j(_ge()),j(Lc({handler:d,reactEvent:ae}))},[j,d]),J=I.useCallback(ae=>{j(I5(ae)),j(Lc({handler:f,reactEvent:ae}))},[j,f]),Y=I.useCallback(()=>{j(Uxe())},[j]),pe=I.useCallback(ae=>{j(Bxe(ae.key))},[j]),_e=I.useCallback(ae=>{j(Lc({handler:s,reactEvent:ae}))},[j,s]),ee=I.useCallback(ae=>{j(Lc({handler:o,reactEvent:ae}))},[j,o]),de=I.useCallback(ae=>{j(Lc({handler:l,reactEvent:ae}))},[j,l]),G=I.useCallback(ae=>{j(Lc({handler:p,reactEvent:ae}))},[j,p]),q=I.useCallback(ae=>{j(Lc({handler:y,reactEvent:ae}))},[j,y]),ne=I.useCallback(ae=>{C&&j(zxe(ae)),j(Lc({handler:x,reactEvent:ae}))},[j,C,x]),Se=I.useCallback(ae=>{j(Lc({handler:m,reactEvent:ae}))},[j,m]),re=cxt(_);return I.createElement(qge.Provider,{value:P},I.createElement(Ztt.Provider,{value:D},I.createElement(re,{width:z??(b==null?void 0:b.width),height:ie??(b==null?void 0:b.height),className:wi("recharts-wrapper",n),style:ext({position:"relative",cursor:"default",width:z,height:ie},b),onClick:W,onContextMenu:_e,onDoubleClick:ee,onFocus:Y,onKeyDown:pe,onMouseDown:de,onMouseEnter:Q,onMouseLeave:te,onMouseMove:J,onMouseUp:G,onTouchEnd:Se,onTouchMove:ne,onTouchStart:q,ref:X},I.createElement(ixt,null),r)))}),dxt=["width","height","responsive","children","className","style","compact","title","desc"];function fxt(e,t){if(e==null)return{};var r,n,i=hxt(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function hxt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var pxt=I.forwardRef((e,t)=>{var{width:r,height:n,responsive:i,children:a,className:s,style:o,compact:l,title:c,desc:d}=e,f=fxt(e,dxt),p=qh(f);return l?I.createElement(I.Fragment,null,I.createElement(dP,{width:r,height:n}),I.createElement(eee,{otherAttributes:p,title:c,desc:d},a)):I.createElement(uxt,{className:s,style:o,width:r,height:n,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},I.createElement(eee,{otherAttributes:p,title:c,desc:d,ref:t},I.createElement(Pmt,null,a)))});function O5(){return O5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O5.apply(null,arguments)}var mxt={top:5,right:5,bottom:5,left:5},gxt={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:mxt,reverseStackOrder:!1,syncMethod:"index",responsive:!1},xxt=I.forwardRef(function(t,r){var n,i=Cc(t.categoricalChartProps,gxt),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,categoricalChartProps:c}=t,d={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,eventEmitter:void 0};return I.createElement(Hgt,{preloadedState:{options:d},reduxStoreName:(n=c.id)!==null&&n!==void 0?n:a},I.createElement(Smt,{chartData:c.data}),I.createElement(Vgt,{layout:i.layout,margin:i.margin}),I.createElement(qgt,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),I.createElement(pxt,O5({},i,{ref:r})))}),vxt=["axis","item"],yxt=I.forwardRef((e,t)=>I.createElement(xxt,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:vxt,tooltipPayloadSearcher:bft,categoricalChartProps:e,ref:t}));const bxt=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(e),wxt=({data:e,type:t})=>{const r=I.useMemo(()=>{if(!e||e.length===0)return[];if(t==="jobs"){const a=e.reduce((s,o)=>{const l=new Date(o.created_at),c=l.toLocaleDateString("en-US",{month:"short",year:"numeric"}),d=`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}`;return s[d]||(s[d]={name:c,value:0,sortKey:d}),s[d].value+=Number(o.total_value||0),s},{});return Object.values(a).sort((s,o)=>s.sortKey.localeCompare(o.sortKey))}if(t==="installers")return e.filter(a=>Number(a.total_labor_value)>0).map(a=>({name:a.installer_name,value:Number(a.total_labor_value),color:a.color||"#4f46e5"})).sort((a,s)=>s.value-a.value);if(t==="products"){const a=e.reduce((s,o)=>{const l=o.manufacturer_name||"Unknown";return s[l]||(s[l]={name:l,value:0}),s[l].value+=1,s},{});return Object.values(a).sort((s,o)=>o.value-s.value).slice(0,15)}return[]},[e,t]);if(r.length===0)return null;const n=t==="products"?"Count":"Value",i="#4f46e5";return u.jsxs("div",{className:"h-80 w-full bg-white p-4 rounded-lg border border-gray-200 shadow-sm mb-6 print:break-inside-avoid",children:[u.jsxs("h3",{className:"text-sm font-bold text-gray-500 uppercase mb-4",children:[t==="jobs"&&"Revenue Trend (Based on Filters)",t==="installers"&&"Labor Value Distribution",t==="products"&&"Variants by Manufacturer (Top 15)"]}),u.jsx(oat,{width:"100%",height:"100%",children:u.jsxs(yxt,{data:r,margin:{top:5,right:30,left:20,bottom:5},children:[u.jsx(Ixe,{strokeDasharray:"3 3",vertical:!1}),u.jsx(Pxe,{dataKey:"name",tick:{fontSize:12},interval:0,angle:r.length>10?-45:0,textAnchor:r.length>10?"end":"middle",height:r.length>10?60:30}),u.jsx(Rxe,{tickFormatter:a=>t==="products"?a:`$${a/1e3}k`,tick:{fontSize:12}}),u.jsx(Wft,{formatter:a=>[t==="products"?a:bxt(a),n]}),u.jsx(Cxe,{dataKey:"value",fill:i,radius:[4,4,0,0],children:t==="installers"&&r.map((a,s)=>u.jsx(_$,{fill:a.color||i},`cell-${s}`))})]})})]})},ree=e=>e?new Date(e).toLocaleDateString():"-",Sxt=({title:e,dateRange:t})=>{const{systemBranding:r}=Xr(),n=(r==null?void 0:r.logoUrl)||"/logo.png";return u.jsx("div",{className:"hidden print:flex flex-col mb-8 border-b-2 border-gray-800 pb-4",children:u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("img",{src:n,alt:"Logo",className:"h-16 object-contain"}),u.jsxs("div",{className:"text-right",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e}),u.jsxs("p",{className:"text-gray-600 text-sm",children:["Generated: ",new Date().toLocaleDateString()]}),t&&u.jsxs("p",{className:"text-gray-600 text-sm",children:["Period: ",t]})]})]})})},Ext=["unit_cost","retail_price","total_value","material_cost","labor_cost","appointment_count","total_labor_value","carton_size"];function Cxt(){const{vendors:e,products:t,fetchProducts:r}=Xr(),[n,i]=I.useState("products"),[a,s]=I.useState(!1),[o,l]=I.useState(null),[c,d]=I.useState([]),[f,p]=I.useState(null),[m,x]=I.useState(!1),y=wu(),[b,S]=I.useState(!1),[_,C]=I.useState(!0),A=new Date,j=new Date(A.getFullYear(),A.getMonth(),1),[P,O]=I.useState(j.toISOString().split("T")[0]),[D,L]=I.useState(A.toISOString().split("T")[0]),[B,H]=I.useState(""),[z,ie]=I.useState(""),[X,W]=I.useState(null),[Q,te]=I.useState([]),[J,Y]=I.useState(!1),[pe]=I.useState("All"),[_e]=I.useState(""),ee=async()=>{s(!0),l(null),d([]);try{if(n==="products"){const Ee=await cVe({includeDiscontinued:!1,manufacturerId:B,productType:z});d(Ee)}else if(n==="jobs"){const Ee=await uVe({startDate:P,endDate:D,status:pe});d(Ee)}else if(n==="installers"){const Ee=await dVe({startDate:P,endDate:D,installerId:_e});d(Ee)}}catch(Ee){console.error(Ee),l("Failed to load report data. Please try again.")}finally{s(!1)}};I.useEffect(()=>{d([]),l(null),te([])},[n]);const de=()=>{ee()},G=()=>{window.print()},q=()=>{const Ee=n==="products"?"PriceList":n==="jobs"?"JobPipeline":"InstallerActivity";Btt(Se(),Ee)},ne=Ee=>{let V="asc";X&&X.key===Ee&&X.direction==="asc"&&(V="desc"),W({key:Ee,direction:V})},Se=()=>X?[...c].sort((Ee,V)=>{const Ae=Ee[X.key],Pe=V[X.key];if(Ae===null)return 1;if(Pe===null)return-1;if(Ext.includes(X.key)){const ze=parseFloat(Ae)||0,De=parseFloat(Pe)||0;return X.direction==="asc"?ze-De:De-ze}return X.direction==="asc"?String(Ae).localeCompare(String(Pe)):String(Pe).localeCompare(String(Ae))}):c,re=Ee=>{te(V=>V.includes(Ee)?V.filter(Ae=>Ae!==Ee):[...V,Ee])},ae=Ee=>!Q.includes(Ee),ge=async Ee=>{if(n==="jobs")y(`/projects/${Ee.id}`);else if(n==="installers")y(`/installers/${Ee.id}`);else if(n==="products"){t.length===0&&await r();const V=t.find(Ae=>Ae.id===Ee.product_id);V&&(p(V),x(!0))}};return u.jsxs("div",{className:"flex h-full bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden",children:[u.jsxs("div",{className:"w-64 bg-surface-container-low border-r border-outline/10 flex-shrink-0 flex flex-col print:hidden",children:[u.jsx("div",{className:"p-6 border-b border-outline/10",children:u.jsx("h2",{className:"text-lg font-bold text-text-primary",children:"Reports"})}),u.jsxs("nav",{className:"flex-1 p-4 space-y-1",children:[u.jsxs("button",{onClick:()=>i("products"),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-full transition-colors ${n==="products"?"bg-primary-container text-primary font-bold":"text-text-secondary hover:bg-surface-container-highest hover:text-text-primary"}`,children:[u.jsx(au,{className:"mr-3 h-5 w-5"}),"Price List / Inventory"]}),u.jsxs("button",{onClick:()=>i("jobs"),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-full transition-colors ${n==="jobs"?"bg-primary-container text-primary font-bold":"text-text-secondary hover:bg-surface-container-highest hover:text-text-primary"}`,children:[u.jsx(zh,{className:"mr-3 h-5 w-5"}),"Job Pipeline"]}),u.jsxs("button",{onClick:()=>i("installers"),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-full transition-colors ${n==="installers"?"bg-primary-container text-primary font-bold":"text-text-secondary hover:bg-surface-container-highest hover:text-text-primary"}`,children:[u.jsx(hx,{className:"mr-3 h-5 w-5"}),"Installer Activity"]})]})]}),u.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-surface print:block print:h-auto print:overflow-visible",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-outline/10 bg-surface-container-high flex flex-wrap items-end justify-between gap-4 print:hidden",children:[u.jsxs("div",{className:"flex items-end gap-3",children:[n==="products"?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-xs text-text-secondary font-bold uppercase mb-1",children:"Manufacturer"}),u.jsxs("select",{className:"h-10 border border-outline/10 rounded-lg px-3 text-sm bg-surface-container-highest text-text-primary min-w-[160px] focus:outline-none focus:ring-2 focus:ring-primary/50",value:B,onChange:Ee=>H(Ee.target.value),children:[u.jsx("option",{value:"",children:"All Manufacturers"}),e.filter(Ee=>Ee.vendorType!=="Supplier").sort((Ee,V)=>Ee.name.localeCompare(V.name)).map(Ee=>u.jsx("option",{value:Ee.id,children:Ee.name},Ee.id))]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-xs text-text-secondary font-bold uppercase mb-1",children:"Product Type"}),u.jsxs("select",{className:"h-10 border border-outline/10 rounded-lg px-3 text-sm bg-surface-container-highest text-text-primary min-w-[140px] focus:outline-none focus:ring-2 focus:ring-primary/50",value:z,onChange:Ee=>ie(Ee.target.value),children:[u.jsx("option",{value:"",children:"All Types"}),Ey.map(Ee=>u.jsx("option",{value:Ee,children:Ee},Ee))]})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-xs text-text-secondary font-bold uppercase mb-1",children:"From"}),u.jsx("input",{type:"date",className:"h-10 border border-outline/10 rounded-lg px-3 text-sm bg-surface-container-highest text-text-primary focus:outline-none focus:ring-2 focus:ring-primary/50",value:P,onChange:Ee=>O(Ee.target.value)})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-xs text-text-secondary font-bold uppercase mb-1",children:"To"}),u.jsx("input",{type:"date",className:"h-10 border border-outline/10 rounded-lg px-3 text-sm bg-surface-container-highest text-text-primary focus:outline-none focus:ring-2 focus:ring-primary/50",value:D,onChange:Ee=>L(Ee.target.value)})]})]}),u.jsxs("button",{onClick:de,className:"h-10 flex items-center gap-2 px-6 bg-primary text-on-primary text-sm font-bold rounded-full hover:bg-primary-hover shadow-md active:scale-95 transition-all",title:"Run or Refresh Report",children:[u.jsx(IFe,{className:"w-4 h-4"}),"Run"]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"relative",children:[u.jsxs("button",{onClick:()=>Y(!J),className:"h-10 flex items-center gap-2 px-4 bg-surface-container-highest text-text-secondary border border-outline/10 rounded-full hover:bg-surface-container-high shadow-sm text-sm font-medium transition-colors",children:[u.jsx(RFe,{className:"h-4 w-4"}),"Columns"]}),J&&u.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-surface-container-high rounded-xl shadow-xl border border-outline/10 z-50 p-2",children:[u.jsx("div",{className:"text-xs font-bold text-text-secondary uppercase px-2 mb-2",children:"Toggle Columns"}),u.jsxs("div",{className:"space-y-1",children:[n==="products"&&u.jsx(u.Fragment,{children:["Manufacturer","Product","Style_Size","SKU","Carton","Retail"].map(Ee=>u.jsxs("label",{className:"flex items-center px-2 py-2 hover:bg-surface-container-highest rounded-lg cursor-pointer text-text-primary",children:[u.jsx("input",{type:"checkbox",checked:ae(Ee.toLowerCase()),onChange:()=>re(Ee.toLowerCase()),className:"rounded border-outline/20 text-primary mr-2 bg-surface-container-low"}),u.jsx("span",{className:"text-sm",children:Ee.replace("_"," / ")})]},Ee))}),n==="jobs"&&u.jsx(u.Fragment,{children:["Date","Customer","Project","Status","Total"].map(Ee=>u.jsxs("label",{className:"flex items-center px-2 py-2 hover:bg-surface-container-highest rounded-lg cursor-pointer text-text-primary",children:[u.jsx("input",{type:"checkbox",checked:ae(Ee.toLowerCase()),onChange:()=>re(Ee.toLowerCase()),className:"rounded border-outline/20 text-primary mr-2 bg-surface-container-low"}),u.jsx("span",{className:"text-sm",children:Ee})]},Ee))}),n==="installers"&&u.jsx(u.Fragment,{children:["Installer","Jobs","Labor"].map(Ee=>u.jsxs("label",{className:"flex items-center px-2 py-2 hover:bg-surface-container-highest rounded-lg cursor-pointer text-text-primary",children:[u.jsx("input",{type:"checkbox",checked:ae(Ee.toLowerCase()),onChange:()=>re(Ee.toLowerCase()),className:"rounded border-outline/20 text-primary mr-2 bg-surface-container-low"}),u.jsx("span",{className:"text-sm",children:Ee})]},Ee))})]}),u.jsx("div",{className:"fixed inset-0 z-[-1]",onClick:()=>Y(!1)})]})]}),u.jsxs("div",{className:"flex items-center border border-outline/10 rounded-full bg-surface-container-highest shadow-sm overflow-hidden h-10",children:[c.length>0&&u.jsx("button",{onClick:()=>C(!_),className:`p-3 border-r border-outline/10 hover:bg-surface-container-high transition-colors ${_?"text-primary bg-primary-container":"text-text-secondary"}`,title:_?"Hide Chart":"Show Chart",children:u.jsx(eFe,{className:"h-4 w-4"})}),u.jsx("button",{onClick:()=>S(!b),className:`p-3 hover:bg-surface-container-high transition-colors ${b?"text-error bg-error-container":"text-text-secondary"}`,title:b?"Hide Costs":"Show Costs",children:u.jsx(t9,{className:"h-4 w-4"})})]}),c.length>0&&u.jsxs("button",{onClick:q,className:"h-10 flex items-center gap-2 px-4 bg-surface-container-highest text-text-secondary border border-outline/10 rounded-full hover:bg-surface-container-high shadow-sm text-sm font-medium",children:[u.jsx(fC,{className:"h-4 w-4"}),"Export CSV"]}),u.jsxs("button",{onClick:G,className:"h-10 flex items-center gap-2 px-4 bg-secondary text-on-secondary rounded-full hover:bg-secondary-hover shadow-sm text-sm font-medium ml-2",children:[u.jsx(wy,{className:"h-4 w-4"}),"Print"]})]})]}),u.jsxs("div",{className:"flex-1 overflow-auto p-8 print:p-0 print:overflow-visible bg-surface",children:[u.jsx(Sxt,{title:n==="products"?"Product Price List":n==="jobs"?"Job Pipeline Report":"Installer Activity Report",dateRange:P&&D?`${ree(P)} - ${ree(D)}`:void 0}),o&&u.jsxs("div",{className:"mb-4 p-4 bg-error-container border-l-4 border-error text-error rounded-r-lg",children:[u.jsx("p",{className:"font-bold",children:"Error"}),u.jsx("p",{children:o})]}),a?u.jsx("div",{className:"flex justify-center items-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):u.jsxs("div",{className:"min-w-full",children:[_&&c.length>0&&u.jsx(wxt,{data:Se(),type:n}),c.length>0&&n==="products"&&u.jsx(Utt,{data:Se(),sortConfig:X,onSort:ne,hiddenColumns:Q,showCost:b,onRowClick:ge}),c.length>0&&n==="jobs"&&u.jsx(ztt,{data:Se(),sortConfig:X,onSort:ne,hiddenColumns:Q,showCost:b,onRowClick:ge}),c.length>0&&n==="installers"&&u.jsx(Htt,{data:Se(),sortConfig:X,onSort:ne,hiddenColumns:Q,onRowClick:ge}),c.length===0&&!o&&u.jsx("div",{className:"text-center py-12 text-text-tertiary italic border-2 border-dashed border-outline/20 rounded-xl bg-surface-container-low",children:'No data generated. Adjust filters and click "Run Report".'})]})]})]}),m&&f&&u.jsx(J9,{isOpen:m,onClose:()=>x(!1),product:f})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var vO={};vO.version="0.18.5";var Wxe=1252,kxt=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],M$={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},F$=function(e){kxt.indexOf(e)!=-1&&(Wxe=M$[0]=e)};function _xt(){F$(1252)}var nd=function(e){F$(e)};function L$(){nd(1200),_xt()}function nee(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function Nxt(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function Vxe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var h2=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?Nxt(e.slice(2)):t==254&&r==255?Vxe(e.slice(2)):t==65279?e.slice(1):e},SN=function(t){return String.fromCharCode(t)},iee=function(t){return String.fromCharCode(t)},sE,y0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function oE(e){for(var t="",r=0,n=0,i=0,a=0,s=0,o=0,l=0,c=0;c<e.length;)r=e.charCodeAt(c++),a=r>>2,n=e.charCodeAt(c++),s=(r&3)<<4|n>>4,i=e.charCodeAt(c++),o=(n&15)<<2|i>>6,l=i&63,isNaN(n)?o=l=64:isNaN(i)&&(l=64),t+=y0.charAt(a)+y0.charAt(s)+y0.charAt(o)+y0.charAt(l);return t}function xc(e){var t="",r=0,n=0,i=0,a=0,s=0,o=0,l=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<e.length;)a=y0.indexOf(e.charAt(c++)),s=y0.indexOf(e.charAt(c++)),r=a<<2|s>>4,t+=String.fromCharCode(r),o=y0.indexOf(e.charAt(c++)),n=(s&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),l=y0.indexOf(e.charAt(c++)),i=(o&3)<<6|l,l!==64&&(t+=String.fromCharCode(i));return t}var xn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),pp=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function q0(e){return xn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function aee(e){return xn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var rc=function(t){return xn?pp(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function PP(e){if(typeof ArrayBuffer>"u")return rc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function pm(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Axt(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function B$(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return B$(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var vs=xn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:pp(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),i=0;for(t=0,r=0;t<e.length;r+=i,++t)if(i=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function Txt(e){for(var t=[],r=0,n=e.length+250,i=q0(e.length+255),a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s<128)i[r++]=s;else if(s<2048)i[r++]=192|s>>6&31,i[r++]=128|s&63;else if(s>=55296&&s<57344){s=(s&1023)+64;var o=e.charCodeAt(++a)&1023;i[r++]=240|s>>8&7,i[r++]=128|s>>2&63,i[r++]=128|o>>6&15|(s&3)<<4,i[r++]=128|o&63}else i[r++]=224|s>>12&15,i[r++]=128|s>>6&63,i[r++]=128|s&63;r>n&&(t.push(i.slice(0,r)),r=0,i=q0(65535),n=65530)}return t.push(i.slice(0,r)),vs(t)}var Xo=/\u0000/g,p2=/[\u0001-\u0006]/g;function Hv(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function id(e,t){var r=""+e;return r.length>=t?r:sa("0",t-r.length)+r}function U$(e,t){var r=""+e;return r.length>=t?r:sa(" ",t-r.length)+r}function yO(e,t){var r=""+e;return r.length>=t?r:r+sa(" ",t-r.length)}function Ixt(e,t){var r=""+Math.round(e);return r.length>=t?r:sa("0",t-r.length)+r}function Oxt(e,t){var r=""+e;return r.length>=t?r:sa("0",t-r.length)+r}var see=Math.pow(2,32);function Q1(e,t){if(e>see||e<-see)return Ixt(e,t);var r=Math.round(e);return Oxt(r,t)}function bO(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var oee=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],_M=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Pxt(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Rr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},lee={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Rxt={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function wO(e,t,r){for(var n=e<0?-1:1,i=e*n,a=0,s=1,o=0,l=1,c=0,d=0,f=Math.floor(i);c<t&&(f=Math.floor(i),o=f*s+a,d=f*c+l,!(i-f<5e-8));)i=1/(i-f),a=s,s=o,l=c,c=d;if(d>t&&(c>t?(d=l,o=a):(d=c,o=s)),!r)return[0,n*o,d];var p=Math.floor(n*o/d);return[p,n*o-p*d,d]}function wg(e,t,r){if(e>2958465||e<0)return null;var n=e|0,i=Math.floor(86400*(e-n)),a=0,s=[],o={D:n,T:i,u:86400*(e-n)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++n,++o.D)),n===60)s=r?[1317,10,29]:[1900,2,29],a=3;else if(n===0)s=r?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),s=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),n<60&&(a=(a+6)%7),r&&(a=Bxt(l,s))}return o.y=s[0],o.m=s[1],o.d=s[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=a,o}var qxe=new Date(1899,11,31,0,0,0),jxt=qxe.getTime(),Dxt=new Date(1900,2,1,0,0,0);function Gxe(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=Dxt&&(r+=24*60*60*1e3),(r-(jxt+(e.getTimezoneOffset()-qxe.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function $$(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Mxt(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Fxt(e){var t=e<0?12:11,r=$$(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Lxt(e){var t=$$(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function lE(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=Fxt(e):t===10?r=e.toFixed(10).substr(0,12):r=Lxt(e),$$(Mxt(r.toUpperCase()))}function _x(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):lE(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return yu(14,Gxe(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Bxt(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function Uxt(e,t,r,n){var i="",a=0,s=0,o=r.y,l,c=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(t.length){case 1:case 2:l=r.m,c=t.length;break;case 3:return _M[r.m-1][1];case 5:return _M[r.m-1][0];default:return _M[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:l=r.d,c=t.length;break;case 3:return oee[r.q][0];default:return oee[r.q][1]}break;case 104:switch(t.length){case 1:case 2:l=1+(r.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:l=r.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:l=r.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?id(r.S,t.length):(n>=2?s=n===3?1e3:100:s=n===1?10:1,a=Math.round(s*(r.S+r.u)),a>=60*s&&(a=0),t==="s"?a===0?"0":""+a/s:(i=id(a,2+n),t==="ss"?i.substr(0,2):"."+i.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}c=t.length===3?1:2;break;case 101:l=o,c=1;break}var d=c>0?id(l,c):"";return d}function b0(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var Kxe=/%/g;function $xt(e,t,r){var n=t.replace(Kxe,""),i=t.length-n.length;return Ph(e,n,r*Math.pow(10,2*i))+sa("%",i)}function zxt(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Ph(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function Xxe(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Xxe(e,-t);var i=e.indexOf(".");i===-1&&(i=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%i;if(a<0&&(a+=i),r=(t/Math.pow(10,a)).toPrecision(n+1+(i+a)%i),r.indexOf("e")===-1){var s=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+a):r+="E+"+(s-a);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,i)+"."+r.substr(2+i),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,d){return l+c+d.substr(0,(i+a)%i)+"."+d.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Yxe=/# (\?+)( ?)\/( ?)(\d+)/;function Hxt(e,t,r){var n=parseInt(e[4],10),i=Math.round(t*n),a=Math.floor(i/n),s=i-a*n,o=n;return r+(a===0?"":""+a)+" "+(s===0?sa(" ",e[1].length+1+e[4].length):U$(s,e[1].length)+e[2]+"/"+e[3]+id(o,e[4].length))}function Wxt(e,t,r){return r+(t===0?"":""+t)+sa(" ",e[1].length+2+e[4].length)}var Qxe=/^#*0*\.([0#]+)/,Jxe=/\).*[0#]/,Zxe=/\(###\) ###\\?-####/;function $o(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function cee(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function uee(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function Vxt(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function qxt(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Bc(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Jxe)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Bc("n",n,r):"("+Bc("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return zxt(e,t,r);if(t.indexOf("%")!==-1)return $xt(e,t,r);if(t.indexOf("E")!==-1)return Xxe(t,r);if(t.charCodeAt(0)===36)return"$"+Bc(e,t.substr(t.charAt(1)==" "?2:1),r);var i,a,s,o,l=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+Q1(l,t.length);if(t.match(/^[#?]+$/))return i=Q1(r,0),i==="0"&&(i=""),i.length>t.length?i:$o(t.substr(0,t.length-i.length))+i;if(a=t.match(Yxe))return Hxt(a,l,c);if(t.match(/^#+0+$/))return c+Q1(l,t.length-t.indexOf("0"));if(a=t.match(Qxe))return i=cee(r,a[1].length).replace(/^([^\.]+)$/,"$1."+$o(a[1])).replace(/\.$/,"."+$o(a[1])).replace(/\.(\d*)$/,function(x,y){return"."+y+sa("0",$o(a[1]).length-y.length)}),t.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return c+cee(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return c+b0(Q1(l,0));if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Bc(e,t,-r):b0(""+(Math.floor(r)+Vxt(r,a[1].length)))+"."+id(uee(r,a[1].length),a[1].length);if(a=t.match(/^#,#*,#0/))return Bc(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Hv(Bc(e,t.replace(/[\\-]/g,""),r)),s=0,Hv(Hv(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return s<i.length?i.charAt(s++):x==="0"?"0":""}));if(t.match(Zxe))return i=Bc(e,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(a[4].length,7),o=wO(l,Math.pow(10,s)-1,!1),i=""+c,d=Ph("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),i+=d+a[2]+"/"+a[3],d=yO(o[2],s),d.length<a[4].length&&(d=$o(a[4].substr(a[4].length-d.length))+d),i+=d,i;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(a[1].length,a[4].length),7),o=wO(l,Math.pow(10,s)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?U$(o[1],s)+a[2]+"/"+a[3]+yO(o[2],s):sa(" ",2*s+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return i=Q1(r,0),t.length<=i.length?i:$o(t.substr(0,t.length-i.length))+i;if(a=t.match(/^([#0?]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),s=i.indexOf(".");var f=t.indexOf(".")-s,p=t.length-i.length-f;return $o(t.substr(0,f)+i+t.substr(t.length-p))}if(a=t.match(/^00,000\.([#0]*0)$/))return s=uee(r,a[1].length),r<0?"-"+Bc(e,t,-r):b0(qxt(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?id(0,3-x.length):"")+x})+"."+id(s,a[1].length);switch(t){case"###,##0.00":return Bc(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=b0(Q1(l,0));return m!=="0"?c+m:"";case"###,###.00":return Bc(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Bc(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Gxt(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Ph(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function Kxt(e,t,r){var n=t.replace(Kxe,""),i=t.length-n.length;return Ph(e,n,r*Math.pow(10,2*i))+sa("%",i)}function e1e(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+e1e(e,-t);var i=e.indexOf(".");i===-1&&(i=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%i;if(a<0&&(a+=i),r=(t/Math.pow(10,a)).toPrecision(n+1+(i+a)%i),!r.match(/[Ee]/)){var s=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+a):r+="E+"+(s-a),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,d){return l+c+d.substr(0,(i+a)%i)+"."+d.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function jd(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Jxe)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?jd("n",n,r):"("+jd("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Gxt(e,t,r);if(t.indexOf("%")!==-1)return Kxt(e,t,r);if(t.indexOf("E")!==-1)return e1e(t,r);if(t.charCodeAt(0)===36)return"$"+jd(e,t.substr(t.charAt(1)==" "?2:1),r);var i,a,s,o,l=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+id(l,t.length);if(t.match(/^[#?]+$/))return i=""+r,r===0&&(i=""),i.length>t.length?i:$o(t.substr(0,t.length-i.length))+i;if(a=t.match(Yxe))return Wxt(a,l,c);if(t.match(/^#+0+$/))return c+id(l,t.length-t.indexOf("0"));if(a=t.match(Qxe))return i=(""+r).replace(/^([^\.]+)$/,"$1."+$o(a[1])).replace(/\.$/,"."+$o(a[1])),i=i.replace(/\.(\d*)$/,function(x,y){return"."+y+sa("0",$o(a[1]).length-y.length)}),t.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return c+b0(""+l);if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+jd(e,t,-r):b0(""+r)+"."+sa("0",a[1].length);if(a=t.match(/^#,#*,#0/))return jd(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Hv(jd(e,t.replace(/[\\-]/g,""),r)),s=0,Hv(Hv(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return s<i.length?i.charAt(s++):x==="0"?"0":""}));if(t.match(Zxe))return i=jd(e,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(a[4].length,7),o=wO(l,Math.pow(10,s)-1,!1),i=""+c,d=Ph("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),i+=d+a[2]+"/"+a[3],d=yO(o[2],s),d.length<a[4].length&&(d=$o(a[4].substr(a[4].length-d.length))+d),i+=d,i;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(a[1].length,a[4].length),7),o=wO(l,Math.pow(10,s)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?U$(o[1],s)+a[2]+"/"+a[3]+yO(o[2],s):sa(" ",2*s+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return i=""+r,t.length<=i.length?i:$o(t.substr(0,t.length-i.length))+i;if(a=t.match(/^([#0]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),s=i.indexOf(".");var f=t.indexOf(".")-s,p=t.length-i.length-f;return $o(t.substr(0,f)+i+t.substr(t.length-p))}if(a=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+jd(e,t,-r):b0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?id(0,3-x.length):"")+x})+"."+id(0,a[1].length);switch(t){case"###,###":case"##,###":case"#,###":var m=b0(""+l);return m!=="0"?c+m:"";default:if(t.match(/\.[0#?]*$/))return jd(e,t.slice(0,t.lastIndexOf(".")),r)+$o(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Ph(e,t,r){return(r|0)===r?jd(e,t,r):Bc(e,t,r)}function Xxt(e){for(var t=[],r=!1,n=0,i=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(i,n-i),i=n+1}if(t[t.length]=e.substr(i),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var t1e=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Lb(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":bO(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(t1e))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function Yxt(e,t,r,n){for(var i=[],a="",s=0,o="",l="t",c,d,f,p="H";s<e.length;)switch(o=e.charAt(s)){case"G":if(!bO(e,s))throw new Error("unrecognized character "+o+" in "+e);i[i.length]={t:"G",v:"General"},s+=7;break;case'"':for(a="";(f=e.charCodeAt(++s))!==34&&s<e.length;)a+=String.fromCharCode(f);i[i.length]={t:"t",v:a},++s;break;case"\\":var m=e.charAt(++s),x=m==="("||m===")"?m:"t";i[i.length]={t:x,v:m},++s;break;case"_":i[i.length]={t:"t",v:" "},s+=2;break;case"@":i[i.length]={t:"T",v:t},++s;break;case"B":case"b":if(e.charAt(s+1)==="1"||e.charAt(s+1)==="2"){if(c==null&&(c=wg(t,r,e.charAt(s+1)==="2"),c==null))return"";i[i.length]={t:"X",v:e.substr(s,2)},l=o,s+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||c==null&&(c=wg(t,r),c==null))return"";for(a=o;++s<e.length&&e.charAt(s).toLowerCase()===o;)a+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=p),i[i.length]={t:o,v:a},l=o;break;case"A":case"a":case"":var y={t:o,v:o};if(c==null&&(c=wg(t,r)),e.substr(s,3).toUpperCase()==="A/P"?(c!=null&&(y.v=c.H>=12?"P":"A"),y.t="T",p="h",s+=3):e.substr(s,5).toUpperCase()==="AM/PM"?(c!=null&&(y.v=c.H>=12?"PM":"AM"),y.t="T",s+=5,p="h"):e.substr(s,5).toUpperCase()==="/"?(c!=null&&(y.v=c.H>=12?"":""),y.t="T",s+=5,p="h"):(y.t="t",++s),c==null&&y.t==="T")return"";i[i.length]=y,l=o;break;case"[":for(a=o;e.charAt(s++)!=="]"&&s<e.length;)a+=e.charAt(s);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(t1e)){if(c==null&&(c=wg(t,r),c==null))return"";i[i.length]={t:"Z",v:a.toLowerCase()},l=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",Lb(e)||(i[i.length]={t:"t",v:a}));break;case".":if(c!=null){for(a=o;++s<e.length&&(o=e.charAt(s))==="0";)a+=o;i[i.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++s<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(s))>-1;)a+=o;i[i.length]={t:"n",v:a};break;case"?":for(a=o;e.charAt(++s)===o;)a+=o;i[i.length]={t:o,v:a},l=o;break;case"*":++s,(e.charAt(s)==" "||e.charAt(s)=="*")&&++s;break;case"(":case")":i[i.length]={t:n===1?"t":o,v:o},++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;s<e.length&&"0123456789".indexOf(e.charAt(++s))>-1;)a+=e.charAt(s);i[i.length]={t:"D",v:a};break;case" ":i[i.length]={t:o,v:o},++s;break;case"$":i[i.length]={t:"t",v:"$"},++s;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);i[i.length]={t:"t",v:o},++s;break}var b=0,S=0,_;for(s=i.length-1,l="t";s>=0;--s)switch(i[s].t){case"h":case"H":i[s].t=p,l="h",b<1&&(b=1);break;case"s":(_=i[s].v.match(/\.0+$/))&&(S=Math.max(S,_[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":l=i[s].t;break;case"m":l==="s"&&(i[s].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&i[s].v.match(/[Hh]/)&&(b=1),b<2&&i[s].v.match(/[Mm]/)&&(b=2),b<3&&i[s].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var C="",A;for(s=0;s<i.length;++s)switch(i[s].t){case"t":case"T":case" ":case"D":break;case"X":i[s].v="",i[s].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[s].v=Uxt(i[s].t.charCodeAt(0),i[s].v,c,S),i[s].t="t";break;case"n":case"?":for(A=s+1;i[A]!=null&&((o=i[A].t)==="?"||o==="D"||(o===" "||o==="t")&&i[A+1]!=null&&(i[A+1].t==="?"||i[A+1].t==="t"&&i[A+1].v==="/")||i[s].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[A].v==="/"||i[A].v===" "&&i[A+1]!=null&&i[A+1].t=="?"));)i[s].v+=i[A].v,i[A]={v:"",t:";"},++A;C+=i[s].v,s=A-1;break;case"G":i[s].t="t",i[s].v=_x(t,r);break}var j="",P,O;if(C.length>0){C.charCodeAt(0)==40?(P=t<0&&C.charCodeAt(0)===45?-t:t,O=Ph("n",C,P)):(P=t<0&&n>1?-t:t,O=Ph("n",C,P),P<0&&i[0]&&i[0].t=="t"&&(O=O.substr(1),i[0].v="-"+i[0].v)),A=O.length-1;var D=i.length;for(s=0;s<i.length;++s)if(i[s]!=null&&i[s].t!="t"&&i[s].v.indexOf(".")>-1){D=s;break}var L=i.length;if(D===i.length&&O.indexOf("E")===-1){for(s=i.length-1;s>=0;--s)i[s]==null||"n?".indexOf(i[s].t)===-1||(A>=i[s].v.length-1?(A-=i[s].v.length,i[s].v=O.substr(A+1,i[s].v.length)):A<0?i[s].v="":(i[s].v=O.substr(0,A+1),A=-1),i[s].t="t",L=s);A>=0&&L<i.length&&(i[L].v=O.substr(0,A+1)+i[L].v)}else if(D!==i.length&&O.indexOf("E")===-1){for(A=O.indexOf(".")-1,s=D;s>=0;--s)if(!(i[s]==null||"n?".indexOf(i[s].t)===-1)){for(d=i[s].v.indexOf(".")>-1&&s===D?i[s].v.indexOf(".")-1:i[s].v.length-1,j=i[s].v.substr(d+1);d>=0;--d)A>=0&&(i[s].v.charAt(d)==="0"||i[s].v.charAt(d)==="#")&&(j=O.charAt(A--)+j);i[s].v=j,i[s].t="t",L=s}for(A>=0&&L<i.length&&(i[L].v=O.substr(0,A+1)+i[L].v),A=O.indexOf(".")+1,s=D;s<i.length;++s)if(!(i[s]==null||"n?(".indexOf(i[s].t)===-1&&s!==D)){for(d=i[s].v.indexOf(".")>-1&&s===D?i[s].v.indexOf(".")+1:0,j=i[s].v.substr(0,d);d<i[s].v.length;++d)A<O.length&&(j+=O.charAt(A++));i[s].v=j,i[s].t="t",L=s}}}for(s=0;s<i.length;++s)i[s]!=null&&"n?".indexOf(i[s].t)>-1&&(P=n>1&&t<0&&s>0&&i[s-1].v==="-"?-t:t,i[s].v=Ph(i[s].t,i[s].v,P),i[s].t="t");var B="";for(s=0;s!==i.length;++s)i[s]!=null&&(B+=i[s].v);return B}var dee=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function fee(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function Qxt(e,t){var r=Xxt(e),n=r.length,i=r[n-1].indexOf("@");if(n<4&&i>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||i>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=i>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=i>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=i>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var a=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,a];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var s=r[0].match(dee),o=r[1].match(dee);return fee(t,s)?[n,r[0]]:fee(t,o)?[n,r[1]]:[n,r[s!=null&&o!=null?2:1]]}return[n,a]}function yu(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Rr)[e],n==null&&(n=r.table&&r.table[lee[e]]||Rr[lee[e]]),n==null&&(n=Rxt[e]||"General");break}if(bO(n,0))return _x(t,r);t instanceof Date&&(t=Gxe(t,r.date1904));var i=Qxt(n,t);if(bO(i[1]))return _x(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return Yxt(i[1],t,r,i[0])}function Rh(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Rr[r]==null){t<0&&(t=r);continue}if(Rr[r]==e){t=r;break}}t<0&&(t=391)}return Rr[t]=e,t}function RP(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Rh(e[t],t)}function Bb(){Rr=Pxt()}var Jxt={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},r1e=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Zxt(e){var t=typeof e=="number"?Rr[e]:e;return t=t.replace(r1e,"(\\d+)"),new RegExp("^"+t+"$")}function e1t(e,t,r){var n=-1,i=-1,a=-1,s=-1,o=-1,l=-1;(t.match(r1e)||[]).forEach(function(f,p){var m=parseInt(r[p+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=m;break;case"d":a=m;break;case"h":s=m;break;case"s":l=m;break;case"m":s>=0?o=m:i=m;break}}),l>=0&&o==-1&&i>=0&&(o=i,i=-1);var c=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var d=("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return s==-1&&o==-1&&l==-1?c:n==-1&&i==-1&&a==-1?d:c+"T"+d}var t1t=function(){var e={};e.version="1.2.0";function t(){for(var O=0,D=new Array(256),L=0;L!=256;++L)O=L,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,D[L]=O;return typeof Int32Array<"u"?new Int32Array(D):D}var r=t();function n(O){var D=0,L=0,B=0,H=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(B=0;B!=256;++B)H[B]=O[B];for(B=0;B!=256;++B)for(L=O[B],D=256+B;D<4096;D+=256)L=H[D]=L>>>8^O[L&255];var z=[];for(B=1;B!=16;++B)z[B-1]=typeof Int32Array<"u"?H.subarray(B*256,B*256+256):H.slice(B*256,B*256+256);return z}var i=n(r),a=i[0],s=i[1],o=i[2],l=i[3],c=i[4],d=i[5],f=i[6],p=i[7],m=i[8],x=i[9],y=i[10],b=i[11],S=i[12],_=i[13],C=i[14];function A(O,D){for(var L=D^-1,B=0,H=O.length;B<H;)L=L>>>8^r[(L^O.charCodeAt(B++))&255];return~L}function j(O,D){for(var L=D^-1,B=O.length-15,H=0;H<B;)L=C[O[H++]^L&255]^_[O[H++]^L>>8&255]^S[O[H++]^L>>16&255]^b[O[H++]^L>>>24]^y[O[H++]]^x[O[H++]]^m[O[H++]]^p[O[H++]]^f[O[H++]]^d[O[H++]]^c[O[H++]]^l[O[H++]]^o[O[H++]]^s[O[H++]]^a[O[H++]]^r[O[H++]];for(B+=15;H<B;)L=L>>>8^r[(L^O[H++])&255];return~L}function P(O,D){for(var L=D^-1,B=0,H=O.length,z=0,ie=0;B<H;)z=O.charCodeAt(B++),z<128?L=L>>>8^r[(L^z)&255]:z<2048?(L=L>>>8^r[(L^(192|z>>6&31))&255],L=L>>>8^r[(L^(128|z&63))&255]):z>=55296&&z<57344?(z=(z&1023)+64,ie=O.charCodeAt(B++)&1023,L=L>>>8^r[(L^(240|z>>8&7))&255],L=L>>>8^r[(L^(128|z>>2&63))&255],L=L>>>8^r[(L^(128|ie>>6&15|(z&3)<<4))&255],L=L>>>8^r[(L^(128|ie&63))&255]):(L=L>>>8^r[(L^(224|z>>12&15))&255],L=L>>>8^r[(L^(128|z>>6&63))&255],L=L>>>8^r[(L^(128|z&63))&255]);return~L}return e.table=r,e.bstr=A,e.buf=j,e.str=P,e}(),yr=function(){var t={};t.version="1.2.1";function r(ue,fe){for(var ye=ue.split("/"),ke=fe.split("/"),he=0,me=0,Fe=Math.min(ye.length,ke.length);he<Fe;++he){if(me=ye[he].length-ke[he].length)return me;if(ye[he]!=ke[he])return ye[he]<ke[he]?-1:1}return ye.length-ke.length}function n(ue){if(ue.charAt(ue.length-1)=="/")return ue.slice(0,-1).indexOf("/")===-1?ue:n(ue.slice(0,-1));var fe=ue.lastIndexOf("/");return fe===-1?ue:ue.slice(0,fe+1)}function i(ue){if(ue.charAt(ue.length-1)=="/")return i(ue.slice(0,-1));var fe=ue.lastIndexOf("/");return fe===-1?ue:ue.slice(fe+1)}function a(ue,fe){typeof fe=="string"&&(fe=new Date(fe));var ye=fe.getHours();ye=ye<<6|fe.getMinutes(),ye=ye<<5|fe.getSeconds()>>>1,ue.write_shift(2,ye);var ke=fe.getFullYear()-1980;ke=ke<<4|fe.getMonth()+1,ke=ke<<5|fe.getDate(),ue.write_shift(2,ke)}function s(ue){var fe=ue.read_shift(2)&65535,ye=ue.read_shift(2)&65535,ke=new Date,he=ye&31;ye>>>=5;var me=ye&15;ye>>>=4,ke.setMilliseconds(0),ke.setFullYear(ye+1980),ke.setMonth(me-1),ke.setDate(he);var Fe=fe&31;fe>>>=5;var it=fe&63;return fe>>>=6,ke.setHours(fe),ke.setMinutes(it),ke.setSeconds(Fe<<1),ke}function o(ue){Ls(ue,0);for(var fe={},ye=0;ue.l<=ue.length-4;){var ke=ue.read_shift(2),he=ue.read_shift(2),me=ue.l+he,Fe={};switch(ke){case 21589:ye=ue.read_shift(1),ye&1&&(Fe.mtime=ue.read_shift(4)),he>5&&(ye&2&&(Fe.atime=ue.read_shift(4)),ye&4&&(Fe.ctime=ue.read_shift(4))),Fe.mtime&&(Fe.mt=new Date(Fe.mtime*1e3));break}ue.l=me,fe[ke]=Fe}return fe}var l;function c(){return l||(l={})}function d(ue,fe){if(ue[0]==80&&ue[1]==75)return Cn(ue,fe);if((ue[0]|32)==109&&(ue[1]|32)==105)return Ut(ue,fe);if(ue.length<512)throw new Error("CFB file size "+ue.length+" < 512");var ye=3,ke=512,he=0,me=0,Fe=0,it=0,Ge=0,Ye=[],Ze=ue.slice(0,512);Ls(Ze,0);var wt=f(Ze);switch(ye=wt[0],ye){case 3:ke=512;break;case 4:ke=4096;break;case 0:if(wt[1]==0)return Cn(ue,fe);default:throw new Error("Major Version: Expected 3 or 4 saw "+ye)}ke!==512&&(Ze=ue.slice(0,ke),Ls(Ze,28));var At=ue.slice(0,ke);p(Ze,ye);var dt=Ze.read_shift(4,"i");if(ye===3&&dt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+dt);Ze.l+=4,Fe=Ze.read_shift(4,"i"),Ze.l+=4,Ze.chk("00100000","Mini Stream Cutoff Size: "),it=Ze.read_shift(4,"i"),he=Ze.read_shift(4,"i"),Ge=Ze.read_shift(4,"i"),me=Ze.read_shift(4,"i");for(var St=-1,Ot=0;Ot<109&&(St=Ze.read_shift(4,"i"),!(St<0));++Ot)Ye[Ot]=St;var Kt=m(ue,ke);b(Ge,me,Kt,ke,Ye);var at=_(Kt,Fe,Ye,ke);at[Fe].name="!Directory",he>0&&it!==ie&&(at[it].name="!MiniFAT"),at[Ye[0]].name="!FAT",at.fat_addrs=Ye,at.ssz=ke;var Xn={},Hr=[],No=[],kd=[];C(Fe,at,Kt,Hr,he,Xn,No,it),x(No,kd,Hr),Hr.shift();var yn={FileIndex:No,FullPaths:kd};return fe&&fe.raw&&(yn.raw={header:At,sectors:Kt}),yn}function f(ue){if(ue[ue.l]==80&&ue[ue.l+1]==75)return[0,0];ue.chk(X,"Header Signature: "),ue.l+=16;var fe=ue.read_shift(2,"u");return[ue.read_shift(2,"u"),fe]}function p(ue,fe){var ye=9;switch(ue.l+=2,ye=ue.read_shift(2)){case 9:if(fe!=3)throw new Error("Sector Shift: Expected 9 saw "+ye);break;case 12:if(fe!=4)throw new Error("Sector Shift: Expected 12 saw "+ye);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ye)}ue.chk("0600","Mini Sector Shift: "),ue.chk("000000000000","Reserved: ")}function m(ue,fe){for(var ye=Math.ceil(ue.length/fe)-1,ke=[],he=1;he<ye;++he)ke[he-1]=ue.slice(he*fe,(he+1)*fe);return ke[ye-1]=ue.slice(ye*fe),ke}function x(ue,fe,ye){for(var ke=0,he=0,me=0,Fe=0,it=0,Ge=ye.length,Ye=[],Ze=[];ke<Ge;++ke)Ye[ke]=Ze[ke]=ke,fe[ke]=ye[ke];for(;it<Ze.length;++it)ke=Ze[it],he=ue[ke].L,me=ue[ke].R,Fe=ue[ke].C,Ye[ke]===ke&&(he!==-1&&Ye[he]!==he&&(Ye[ke]=Ye[he]),me!==-1&&Ye[me]!==me&&(Ye[ke]=Ye[me])),Fe!==-1&&(Ye[Fe]=ke),he!==-1&&ke!=Ye[ke]&&(Ye[he]=Ye[ke],Ze.lastIndexOf(he)<it&&Ze.push(he)),me!==-1&&ke!=Ye[ke]&&(Ye[me]=Ye[ke],Ze.lastIndexOf(me)<it&&Ze.push(me));for(ke=1;ke<Ge;++ke)Ye[ke]===ke&&(me!==-1&&Ye[me]!==me?Ye[ke]=Ye[me]:he!==-1&&Ye[he]!==he&&(Ye[ke]=Ye[he]));for(ke=1;ke<Ge;++ke)if(ue[ke].type!==0){if(it=ke,it!=Ye[it])do it=Ye[it],fe[ke]=fe[it]+"/"+fe[ke];while(it!==0&&Ye[it]!==-1&&it!=Ye[it]);Ye[ke]=-1}for(fe[0]+="/",ke=1;ke<Ge;++ke)ue[ke].type!==2&&(fe[ke]+="/")}function y(ue,fe,ye){for(var ke=ue.start,he=ue.size,me=[],Fe=ke;ye&&he>0&&Fe>=0;)me.push(fe.slice(Fe*z,Fe*z+z)),he-=z,Fe=tg(ye,Fe*4);return me.length===0?pt(0):vs(me).slice(0,ue.size)}function b(ue,fe,ye,ke,he){var me=ie;if(ue===ie){if(fe!==0)throw new Error("DIFAT chain shorter than expected")}else if(ue!==-1){var Fe=ye[ue],it=(ke>>>2)-1;if(!Fe)return;for(var Ge=0;Ge<it&&(me=tg(Fe,Ge*4))!==ie;++Ge)he.push(me);b(tg(Fe,ke-4),fe-1,ye,ke,he)}}function S(ue,fe,ye,ke,he){var me=[],Fe=[];he||(he=[]);var it=ke-1,Ge=0,Ye=0;for(Ge=fe;Ge>=0;){he[Ge]=!0,me[me.length]=Ge,Fe.push(ue[Ge]);var Ze=ye[Math.floor(Ge*4/ke)];if(Ye=Ge*4&it,ke<4+Ye)throw new Error("FAT boundary crossed: "+Ge+" 4 "+ke);if(!ue[Ze])break;Ge=tg(ue[Ze],Ye)}return{nodes:me,data:Cee([Fe])}}function _(ue,fe,ye,ke){var he=ue.length,me=[],Fe=[],it=[],Ge=[],Ye=ke-1,Ze=0,wt=0,At=0,dt=0;for(Ze=0;Ze<he;++Ze)if(it=[],At=Ze+fe,At>=he&&(At-=he),!Fe[At]){Ge=[];var St=[];for(wt=At;wt>=0;){St[wt]=!0,Fe[wt]=!0,it[it.length]=wt,Ge.push(ue[wt]);var Ot=ye[Math.floor(wt*4/ke)];if(dt=wt*4&Ye,ke<4+dt)throw new Error("FAT boundary crossed: "+wt+" 4 "+ke);if(!ue[Ot]||(wt=tg(ue[Ot],dt),St[wt]))break}me[At]={nodes:it,data:Cee([Ge])}}return me}function C(ue,fe,ye,ke,he,me,Fe,it){for(var Ge=0,Ye=ke.length?2:0,Ze=fe[ue].data,wt=0,At=0,dt;wt<Ze.length;wt+=128){var St=Ze.slice(wt,wt+128);Ls(St,64),At=St.read_shift(2),dt=K$(St,0,At-Ye),ke.push(dt);var Ot={name:dt,type:St.read_shift(1),color:St.read_shift(1),L:St.read_shift(4,"i"),R:St.read_shift(4,"i"),C:St.read_shift(4,"i"),clsid:St.read_shift(16),state:St.read_shift(4,"i"),start:0,size:0},Kt=St.read_shift(2)+St.read_shift(2)+St.read_shift(2)+St.read_shift(2);Kt!==0&&(Ot.ct=A(St,St.l-8));var at=St.read_shift(2)+St.read_shift(2)+St.read_shift(2)+St.read_shift(2);at!==0&&(Ot.mt=A(St,St.l-8)),Ot.start=St.read_shift(4,"i"),Ot.size=St.read_shift(4,"i"),Ot.size<0&&Ot.start<0&&(Ot.size=Ot.type=0,Ot.start=ie,Ot.name=""),Ot.type===5?(Ge=Ot.start,he>0&&Ge!==ie&&(fe[Ge].name="!StreamData")):Ot.size>=4096?(Ot.storage="fat",fe[Ot.start]===void 0&&(fe[Ot.start]=S(ye,Ot.start,fe.fat_addrs,fe.ssz)),fe[Ot.start].name=Ot.name,Ot.content=fe[Ot.start].data.slice(0,Ot.size)):(Ot.storage="minifat",Ot.size<0?Ot.size=0:Ge!==ie&&Ot.start!==ie&&fe[Ge]&&(Ot.content=y(Ot,fe[Ge].data,(fe[it]||{}).data))),Ot.content&&Ls(Ot.content,0),me[dt]=Ot,Fe.push(Ot)}}function A(ue,fe){return new Date((Zl(ue,fe+4)/1e7*Math.pow(2,32)+Zl(ue,fe)/1e7-11644473600)*1e3)}function j(ue,fe){return c(),d(l.readFileSync(ue),fe)}function P(ue,fe){var ye=fe&&fe.type;switch(ye||xn&&Buffer.isBuffer(ue)&&(ye="buffer"),ye||"base64"){case"file":return j(ue,fe);case"base64":return d(rc(xc(ue)),fe);case"binary":return d(rc(ue),fe)}return d(ue,fe)}function O(ue,fe){var ye=fe||{},ke=ye.root||"Root Entry";if(ue.FullPaths||(ue.FullPaths=[]),ue.FileIndex||(ue.FileIndex=[]),ue.FullPaths.length!==ue.FileIndex.length)throw new Error("inconsistent CFB structure");ue.FullPaths.length===0&&(ue.FullPaths[0]=ke+"/",ue.FileIndex[0]={name:ke,type:5}),ye.CLSID&&(ue.FileIndex[0].clsid=ye.CLSID),D(ue)}function D(ue){var fe="Sh33tJ5";if(!yr.find(ue,"/"+fe)){var ye=pt(4);ye[0]=55,ye[1]=ye[3]=50,ye[2]=54,ue.FileIndex.push({name:fe,type:2,content:ye,size:4,L:69,R:69,C:69}),ue.FullPaths.push(ue.FullPaths[0]+fe),L(ue)}}function L(ue,fe){O(ue);for(var ye=!1,ke=!1,he=ue.FullPaths.length-1;he>=0;--he){var me=ue.FileIndex[he];switch(me.type){case 0:ke?ye=!0:(ue.FileIndex.pop(),ue.FullPaths.pop());break;case 1:case 2:case 5:ke=!0,isNaN(me.R*me.L*me.C)&&(ye=!0),me.R>-1&&me.L>-1&&me.R==me.L&&(ye=!0);break;default:ye=!0;break}}if(!(!ye&&!fe)){var Fe=new Date(1987,1,19),it=0,Ge=Object.create?Object.create(null):{},Ye=[];for(he=0;he<ue.FullPaths.length;++he)Ge[ue.FullPaths[he]]=!0,ue.FileIndex[he].type!==0&&Ye.push([ue.FullPaths[he],ue.FileIndex[he]]);for(he=0;he<Ye.length;++he){var Ze=n(Ye[he][0]);ke=Ge[Ze],ke||(Ye.push([Ze,{name:i(Ze).replace("/",""),type:1,clsid:Q,ct:Fe,mt:Fe,content:null}]),Ge[Ze]=!0)}for(Ye.sort(function(dt,St){return r(dt[0],St[0])}),ue.FullPaths=[],ue.FileIndex=[],he=0;he<Ye.length;++he)ue.FullPaths[he]=Ye[he][0],ue.FileIndex[he]=Ye[he][1];for(he=0;he<Ye.length;++he){var wt=ue.FileIndex[he],At=ue.FullPaths[he];if(wt.name=i(At).replace("/",""),wt.L=wt.R=wt.C=-(wt.color=1),wt.size=wt.content?wt.content.length:0,wt.start=0,wt.clsid=wt.clsid||Q,he===0)wt.C=Ye.length>1?1:-1,wt.size=0,wt.type=5;else if(At.slice(-1)=="/"){for(it=he+1;it<Ye.length&&n(ue.FullPaths[it])!=At;++it);for(wt.C=it>=Ye.length?-1:it,it=he+1;it<Ye.length&&n(ue.FullPaths[it])!=n(At);++it);wt.R=it>=Ye.length?-1:it,wt.type=1}else n(ue.FullPaths[he+1]||"")==n(At)&&(wt.R=he+1),wt.type=2}}}function B(ue,fe){var ye=fe||{};if(ye.fileType=="mad")return ir(ue,ye);switch(L(ue),ye.fileType){case"zip":return Qi(ue,ye)}var ke=function(dt){for(var St=0,Ot=0,Kt=0;Kt<dt.FileIndex.length;++Kt){var at=dt.FileIndex[Kt];if(at.content){var Xn=at.content.length;Xn>0&&(Xn<4096?St+=Xn+63>>6:Ot+=Xn+511>>9)}}for(var Hr=dt.FullPaths.length+3>>2,No=St+7>>3,kd=St+127>>7,yn=No+Ot+Hr+kd,rn=yn+127>>7,nn=rn<=109?0:Math.ceil((rn-109)/127);yn+rn+nn+127>>7>rn;)nn=++rn<=109?0:Math.ceil((rn-109)/127);var Ao=[1,nn,rn,kd,Hr,Ot,St,0];return dt.FileIndex[0].size=St<<6,Ao[7]=(dt.FileIndex[0].start=Ao[0]+Ao[1]+Ao[2]+Ao[3]+Ao[4]+Ao[5])+(Ao[6]+7>>3),Ao}(ue),he=pt(ke[7]<<9),me=0,Fe=0;{for(me=0;me<8;++me)he.write_shift(1,W[me]);for(me=0;me<8;++me)he.write_shift(2,0);for(he.write_shift(2,62),he.write_shift(2,3),he.write_shift(2,65534),he.write_shift(2,9),he.write_shift(2,6),me=0;me<3;++me)he.write_shift(2,0);for(he.write_shift(4,0),he.write_shift(4,ke[2]),he.write_shift(4,ke[0]+ke[1]+ke[2]+ke[3]-1),he.write_shift(4,0),he.write_shift(4,4096),he.write_shift(4,ke[3]?ke[0]+ke[1]+ke[2]-1:ie),he.write_shift(4,ke[3]),he.write_shift(-4,ke[1]?ke[0]-1:ie),he.write_shift(4,ke[1]),me=0;me<109;++me)he.write_shift(-4,me<ke[2]?ke[1]+me:-1)}if(ke[1])for(Fe=0;Fe<ke[1];++Fe){for(;me<236+Fe*127;++me)he.write_shift(-4,me<ke[2]?ke[1]+me:-1);he.write_shift(-4,Fe===ke[1]-1?ie:Fe+1)}var it=function(dt){for(Fe+=dt;me<Fe-1;++me)he.write_shift(-4,me+1);dt&&(++me,he.write_shift(-4,ie))};for(Fe=me=0,Fe+=ke[1];me<Fe;++me)he.write_shift(-4,te.DIFSECT);for(Fe+=ke[2];me<Fe;++me)he.write_shift(-4,te.FATSECT);it(ke[3]),it(ke[4]);for(var Ge=0,Ye=0,Ze=ue.FileIndex[0];Ge<ue.FileIndex.length;++Ge)Ze=ue.FileIndex[Ge],Ze.content&&(Ye=Ze.content.length,!(Ye<4096)&&(Ze.start=Fe,it(Ye+511>>9)));for(it(ke[6]+7>>3);he.l&511;)he.write_shift(-4,te.ENDOFCHAIN);for(Fe=me=0,Ge=0;Ge<ue.FileIndex.length;++Ge)Ze=ue.FileIndex[Ge],Ze.content&&(Ye=Ze.content.length,!(!Ye||Ye>=4096)&&(Ze.start=Fe,it(Ye+63>>6)));for(;he.l&511;)he.write_shift(-4,te.ENDOFCHAIN);for(me=0;me<ke[4]<<2;++me){var wt=ue.FullPaths[me];if(!wt||wt.length===0){for(Ge=0;Ge<17;++Ge)he.write_shift(4,0);for(Ge=0;Ge<3;++Ge)he.write_shift(4,-1);for(Ge=0;Ge<12;++Ge)he.write_shift(4,0);continue}Ze=ue.FileIndex[me],me===0&&(Ze.start=Ze.size?Ze.start-1:ie);var At=me===0&&ye.root||Ze.name;if(Ye=2*(At.length+1),he.write_shift(64,At,"utf16le"),he.write_shift(2,Ye),he.write_shift(1,Ze.type),he.write_shift(1,Ze.color),he.write_shift(-4,Ze.L),he.write_shift(-4,Ze.R),he.write_shift(-4,Ze.C),Ze.clsid)he.write_shift(16,Ze.clsid,"hex");else for(Ge=0;Ge<4;++Ge)he.write_shift(4,0);he.write_shift(4,Ze.state||0),he.write_shift(4,0),he.write_shift(4,0),he.write_shift(4,0),he.write_shift(4,0),he.write_shift(4,Ze.start),he.write_shift(4,Ze.size),he.write_shift(4,0)}for(me=1;me<ue.FileIndex.length;++me)if(Ze=ue.FileIndex[me],Ze.size>=4096)if(he.l=Ze.start+1<<9,xn&&Buffer.isBuffer(Ze.content))Ze.content.copy(he,he.l,0,Ze.size),he.l+=Ze.size+511&-512;else{for(Ge=0;Ge<Ze.size;++Ge)he.write_shift(1,Ze.content[Ge]);for(;Ge&511;++Ge)he.write_shift(1,0)}for(me=1;me<ue.FileIndex.length;++me)if(Ze=ue.FileIndex[me],Ze.size>0&&Ze.size<4096)if(xn&&Buffer.isBuffer(Ze.content))Ze.content.copy(he,he.l,0,Ze.size),he.l+=Ze.size+63&-64;else{for(Ge=0;Ge<Ze.size;++Ge)he.write_shift(1,Ze.content[Ge]);for(;Ge&63;++Ge)he.write_shift(1,0)}if(xn)he.l=he.length;else for(;he.l<he.length;)he.write_shift(1,0);return he}function H(ue,fe){var ye=ue.FullPaths.map(function(Ge){return Ge.toUpperCase()}),ke=ye.map(function(Ge){var Ye=Ge.split("/");return Ye[Ye.length-(Ge.slice(-1)=="/"?2:1)]}),he=!1;fe.charCodeAt(0)===47?(he=!0,fe=ye[0].slice(0,-1)+fe):he=fe.indexOf("/")!==-1;var me=fe.toUpperCase(),Fe=he===!0?ye.indexOf(me):ke.indexOf(me);if(Fe!==-1)return ue.FileIndex[Fe];var it=!me.match(p2);for(me=me.replace(Xo,""),it&&(me=me.replace(p2,"!")),Fe=0;Fe<ye.length;++Fe)if((it?ye[Fe].replace(p2,"!"):ye[Fe]).replace(Xo,"")==me||(it?ke[Fe].replace(p2,"!"):ke[Fe]).replace(Xo,"")==me)return ue.FileIndex[Fe];return null}var z=64,ie=-2,X="d0cf11e0a1b11ae1",W=[208,207,17,224,161,177,26,225],Q="00000000000000000000000000000000",te={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:ie,FREESECT:-1,HEADER_SIGNATURE:X,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Q,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function J(ue,fe,ye){c();var ke=B(ue,ye);l.writeFileSync(fe,ke)}function Y(ue){for(var fe=new Array(ue.length),ye=0;ye<ue.length;++ye)fe[ye]=String.fromCharCode(ue[ye]);return fe.join("")}function pe(ue,fe){var ye=B(ue,fe);switch(fe&&fe.type||"buffer"){case"file":return c(),l.writeFileSync(fe.filename,ye),ye;case"binary":return typeof ye=="string"?ye:Y(ye);case"base64":return oE(typeof ye=="string"?ye:Y(ye));case"buffer":if(xn)return Buffer.isBuffer(ye)?ye:pp(ye);case"array":return typeof ye=="string"?rc(ye):ye}return ye}var _e;function ee(ue){try{var fe=ue.InflateRaw,ye=new fe;if(ye._processChunk(new Uint8Array([3,0]),ye._finishFlushFlag),ye.bytesRead)_e=ue;else throw new Error("zlib does not expose bytesRead")}catch(ke){console.error("cannot use native zlib: "+(ke.message||ke))}}function de(ue,fe){if(!_e)return Pt(ue,fe);var ye=_e.InflateRaw,ke=new ye,he=ke._processChunk(ue.slice(ue.l),ke._finishFlushFlag);return ue.l+=ke.bytesRead,he}function G(ue){return _e?_e.deflateRawSync(ue):Xe(ue)}var q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ne=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Se=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function re(ue){var fe=(ue<<1|ue<<11)&139536|(ue<<5|ue<<15)&558144;return(fe>>16|fe>>8|fe)&255}for(var ae=typeof Uint8Array<"u",ge=ae?new Uint8Array(256):[],Ee=0;Ee<256;++Ee)ge[Ee]=re(Ee);function V(ue,fe){var ye=ge[ue&255];return fe<=8?ye>>>8-fe:(ye=ye<<8|ge[ue>>8&255],fe<=16?ye>>>16-fe:(ye=ye<<8|ge[ue>>16&255],ye>>>24-fe))}function Ae(ue,fe){var ye=fe&7,ke=fe>>>3;return(ue[ke]|(ye<=6?0:ue[ke+1]<<8))>>>ye&3}function Pe(ue,fe){var ye=fe&7,ke=fe>>>3;return(ue[ke]|(ye<=5?0:ue[ke+1]<<8))>>>ye&7}function ze(ue,fe){var ye=fe&7,ke=fe>>>3;return(ue[ke]|(ye<=4?0:ue[ke+1]<<8))>>>ye&15}function De(ue,fe){var ye=fe&7,ke=fe>>>3;return(ue[ke]|(ye<=3?0:ue[ke+1]<<8))>>>ye&31}function $e(ue,fe){var ye=fe&7,ke=fe>>>3;return(ue[ke]|(ye<=1?0:ue[ke+1]<<8))>>>ye&127}function et(ue,fe,ye){var ke=fe&7,he=fe>>>3,me=(1<<ye)-1,Fe=ue[he]>>>ke;return ye<8-ke||(Fe|=ue[he+1]<<8-ke,ye<16-ke)||(Fe|=ue[he+2]<<16-ke,ye<24-ke)||(Fe|=ue[he+3]<<24-ke),Fe&me}function ut(ue,fe,ye){var ke=fe&7,he=fe>>>3;return ke<=5?ue[he]|=(ye&7)<<ke:(ue[he]|=ye<<ke&255,ue[he+1]=(ye&7)>>8-ke),fe+3}function kt(ue,fe,ye){var ke=fe&7,he=fe>>>3;return ye=(ye&1)<<ke,ue[he]|=ye,fe+1}function ht(ue,fe,ye){var ke=fe&7,he=fe>>>3;return ye<<=ke,ue[he]|=ye&255,ye>>>=8,ue[he+1]=ye,fe+8}function jr(ue,fe,ye){var ke=fe&7,he=fe>>>3;return ye<<=ke,ue[he]|=ye&255,ye>>>=8,ue[he+1]=ye&255,ue[he+2]=ye>>>8,fe+16}function er(ue,fe){var ye=ue.length,ke=2*ye>fe?2*ye:fe+5,he=0;if(ye>=fe)return ue;if(xn){var me=aee(ke);if(ue.copy)ue.copy(me);else for(;he<ue.length;++he)me[he]=ue[he];return me}else if(ae){var Fe=new Uint8Array(ke);if(Fe.set)Fe.set(ue);else for(;he<ye;++he)Fe[he]=ue[he];return Fe}return ue.length=ke,ue}function ct(ue){for(var fe=new Array(ue),ye=0;ye<ue;++ye)fe[ye]=0;return fe}function qt(ue,fe,ye){var ke=1,he=0,me=0,Fe=0,it=0,Ge=ue.length,Ye=ae?new Uint16Array(32):ct(32);for(me=0;me<32;++me)Ye[me]=0;for(me=Ge;me<ye;++me)ue[me]=0;Ge=ue.length;var Ze=ae?new Uint16Array(Ge):ct(Ge);for(me=0;me<Ge;++me)Ye[he=ue[me]]++,ke<he&&(ke=he),Ze[me]=0;for(Ye[0]=0,me=1;me<=ke;++me)Ye[me+16]=it=it+Ye[me-1]<<1;for(me=0;me<Ge;++me)it=ue[me],it!=0&&(Ze[me]=Ye[it+16]++);var wt=0;for(me=0;me<Ge;++me)if(wt=ue[me],wt!=0)for(it=V(Ze[me],ke)>>ke-wt,Fe=(1<<ke+4-wt)-1;Fe>=0;--Fe)fe[it|Fe<<wt]=wt&15|me<<4;return ke}var Lt=ae?new Uint16Array(512):ct(512),dr=ae?new Uint16Array(32):ct(32);if(!ae){for(var Gt=0;Gt<512;++Gt)Lt[Gt]=0;for(Gt=0;Gt<32;++Gt)dr[Gt]=0}(function(){for(var ue=[],fe=0;fe<32;fe++)ue.push(5);qt(ue,dr,32);var ye=[];for(fe=0;fe<=143;fe++)ye.push(8);for(;fe<=255;fe++)ye.push(9);for(;fe<=279;fe++)ye.push(7);for(;fe<=287;fe++)ye.push(8);qt(ye,Lt,288)})();var qe=function(){for(var fe=ae?new Uint8Array(32768):[],ye=0,ke=0;ye<Se.length-1;++ye)for(;ke<Se[ye+1];++ke)fe[ke]=ye;for(;ke<32768;++ke)fe[ke]=29;var he=ae?new Uint8Array(259):[];for(ye=0,ke=0;ye<ne.length-1;++ye)for(;ke<ne[ye+1];++ke)he[ke]=ye;function me(it,Ge){for(var Ye=0;Ye<it.length;){var Ze=Math.min(65535,it.length-Ye),wt=Ye+Ze==it.length;for(Ge.write_shift(1,+wt),Ge.write_shift(2,Ze),Ge.write_shift(2,~Ze&65535);Ze-- >0;)Ge[Ge.l++]=it[Ye++]}return Ge.l}function Fe(it,Ge){for(var Ye=0,Ze=0,wt=ae?new Uint16Array(32768):[];Ze<it.length;){var At=Math.min(65535,it.length-Ze);if(At<10){for(Ye=ut(Ge,Ye,+(Ze+At==it.length)),Ye&7&&(Ye+=8-(Ye&7)),Ge.l=Ye/8|0,Ge.write_shift(2,At),Ge.write_shift(2,~At&65535);At-- >0;)Ge[Ge.l++]=it[Ze++];Ye=Ge.l*8;continue}Ye=ut(Ge,Ye,+(Ze+At==it.length)+2);for(var dt=0;At-- >0;){var St=it[Ze];dt=(dt<<5^St)&32767;var Ot=-1,Kt=0;if((Ot=wt[dt])&&(Ot|=Ze&-32768,Ot>Ze&&(Ot-=32768),Ot<Ze))for(;it[Ot+Kt]==it[Ze+Kt]&&Kt<250;)++Kt;if(Kt>2){St=he[Kt],St<=22?Ye=ht(Ge,Ye,ge[St+1]>>1)-1:(ht(Ge,Ye,3),Ye+=5,ht(Ge,Ye,ge[St-23]>>5),Ye+=3);var at=St<8?0:St-4>>2;at>0&&(jr(Ge,Ye,Kt-ne[St]),Ye+=at),St=fe[Ze-Ot],Ye=ht(Ge,Ye,ge[St]>>3),Ye-=3;var Xn=St<4?0:St-2>>1;Xn>0&&(jr(Ge,Ye,Ze-Ot-Se[St]),Ye+=Xn);for(var Hr=0;Hr<Kt;++Hr)wt[dt]=Ze&32767,dt=(dt<<5^it[Ze])&32767,++Ze;At-=Kt-1}else St<=143?St=St+48:Ye=kt(Ge,Ye,1),Ye=ht(Ge,Ye,ge[St]),wt[dt]=Ze&32767,++Ze}Ye=ht(Ge,Ye,0)-1}return Ge.l=(Ye+7)/8|0,Ge.l}return function(Ge,Ye){return Ge.length<8?me(Ge,Ye):Fe(Ge,Ye)}}();function Xe(ue){var fe=pt(50+Math.floor(ue.length*1.1)),ye=qe(ue,fe);return fe.slice(0,ye)}var Te=ae?new Uint16Array(32768):ct(32768),He=ae?new Uint16Array(32768):ct(32768),je=ae?new Uint16Array(128):ct(128),we=1,ot=1;function xt(ue,fe){var ye=De(ue,fe)+257;fe+=5;var ke=De(ue,fe)+1;fe+=5;var he=ze(ue,fe)+4;fe+=4;for(var me=0,Fe=ae?new Uint8Array(19):ct(19),it=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ge=1,Ye=ae?new Uint8Array(8):ct(8),Ze=ae?new Uint8Array(8):ct(8),wt=Fe.length,At=0;At<he;++At)Fe[q[At]]=me=Pe(ue,fe),Ge<me&&(Ge=me),Ye[me]++,fe+=3;var dt=0;for(Ye[0]=0,At=1;At<=Ge;++At)Ze[At]=dt=dt+Ye[At-1]<<1;for(At=0;At<wt;++At)(dt=Fe[At])!=0&&(it[At]=Ze[dt]++);var St=0;for(At=0;At<wt;++At)if(St=Fe[At],St!=0){dt=ge[it[At]]>>8-St;for(var Ot=(1<<7-St)-1;Ot>=0;--Ot)je[dt|Ot<<St]=St&7|At<<3}var Kt=[];for(Ge=1;Kt.length<ye+ke;)switch(dt=je[$e(ue,fe)],fe+=dt&7,dt>>>=3){case 16:for(me=3+Ae(ue,fe),fe+=2,dt=Kt[Kt.length-1];me-- >0;)Kt.push(dt);break;case 17:for(me=3+Pe(ue,fe),fe+=3;me-- >0;)Kt.push(0);break;case 18:for(me=11+$e(ue,fe),fe+=7;me-- >0;)Kt.push(0);break;default:Kt.push(dt),Ge<dt&&(Ge=dt);break}var at=Kt.slice(0,ye),Xn=Kt.slice(ye);for(At=ye;At<286;++At)at[At]=0;for(At=ke;At<30;++At)Xn[At]=0;return we=qt(at,Te,286),ot=qt(Xn,He,30),fe}function Dt(ue,fe){if(ue[0]==3&&!(ue[1]&3))return[q0(fe),2];for(var ye=0,ke=0,he=aee(fe||1<<18),me=0,Fe=he.length>>>0,it=0,Ge=0;!(ke&1);){if(ke=Pe(ue,ye),ye+=3,ke>>>1)ke>>1==1?(it=9,Ge=5):(ye=xt(ue,ye),it=we,Ge=ot);else{ye&7&&(ye+=8-(ye&7));var Ye=ue[ye>>>3]|ue[(ye>>>3)+1]<<8;if(ye+=32,Ye>0)for(!fe&&Fe<me+Ye&&(he=er(he,me+Ye),Fe=he.length);Ye-- >0;)he[me++]=ue[ye>>>3],ye+=8;continue}for(;;){!fe&&Fe<me+32767&&(he=er(he,me+32767),Fe=he.length);var Ze=et(ue,ye,it),wt=ke>>>1==1?Lt[Ze]:Te[Ze];if(ye+=wt&15,wt>>>=4,!(wt>>>8&255))he[me++]=wt;else{if(wt==256)break;wt-=257;var At=wt<8?0:wt-4>>2;At>5&&(At=0);var dt=me+ne[wt];At>0&&(dt+=et(ue,ye,At),ye+=At),Ze=et(ue,ye,Ge),wt=ke>>>1==1?dr[Ze]:He[Ze],ye+=wt&15,wt>>>=4;var St=wt<4?0:wt-2>>1,Ot=Se[wt];for(St>0&&(Ot+=et(ue,ye,St),ye+=St),!fe&&Fe<dt&&(he=er(he,dt+100),Fe=he.length);me<dt;)he[me]=he[me-Ot],++me}}}return fe?[he,ye+7>>>3]:[he.slice(0,me),ye+7>>>3]}function Pt(ue,fe){var ye=ue.slice(ue.l||0),ke=Dt(ye,fe);return ue.l+=ke[1],ke[0]}function kr(ue,fe){if(ue)typeof console<"u"&&console.error(fe);else throw new Error(fe)}function Cn(ue,fe){var ye=ue;Ls(ye,0);var ke=[],he=[],me={FileIndex:ke,FullPaths:he};O(me,{root:fe.root});for(var Fe=ye.length-4;(ye[Fe]!=80||ye[Fe+1]!=75||ye[Fe+2]!=5||ye[Fe+3]!=6)&&Fe>=0;)--Fe;ye.l=Fe+4,ye.l+=4;var it=ye.read_shift(2);ye.l+=6;var Ge=ye.read_shift(4);for(ye.l=Ge,Fe=0;Fe<it;++Fe){ye.l+=20;var Ye=ye.read_shift(4),Ze=ye.read_shift(4),wt=ye.read_shift(2),At=ye.read_shift(2),dt=ye.read_shift(2);ye.l+=8;var St=ye.read_shift(4),Ot=o(ye.slice(ye.l+wt,ye.l+wt+At));ye.l+=wt+At+dt;var Kt=ye.l;ye.l=St+4,fr(ye,Ye,Ze,me,Ot),ye.l=Kt}return me}function fr(ue,fe,ye,ke,he){ue.l+=2;var me=ue.read_shift(2),Fe=ue.read_shift(2),it=s(ue);if(me&8257)throw new Error("Unsupported ZIP encryption");for(var Ge=ue.read_shift(4),Ye=ue.read_shift(4),Ze=ue.read_shift(4),wt=ue.read_shift(2),At=ue.read_shift(2),dt="",St=0;St<wt;++St)dt+=String.fromCharCode(ue[ue.l++]);if(At){var Ot=o(ue.slice(ue.l,ue.l+At));(Ot[21589]||{}).mt&&(it=Ot[21589].mt),((he||{})[21589]||{}).mt&&(it=he[21589].mt)}ue.l+=At;var Kt=ue.slice(ue.l,ue.l+Ye);switch(Fe){case 8:Kt=de(ue,Ze);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Fe)}var at=!1;me&8&&(Ge=ue.read_shift(4),Ge==134695760&&(Ge=ue.read_shift(4),at=!0),Ye=ue.read_shift(4),Ze=ue.read_shift(4)),Ye!=fe&&kr(at,"Bad compressed size: "+fe+" != "+Ye),Ze!=ye&&kr(at,"Bad uncompressed size: "+ye+" != "+Ze),$t(ke,dt,Kt,{unsafe:!0,mt:it})}function Qi(ue,fe){var ye=fe||{},ke=[],he=[],me=pt(1),Fe=ye.compression?8:0,it=0,Ge=0,Ye=0,Ze=0,wt=0,At=ue.FullPaths[0],dt=At,St=ue.FileIndex[0],Ot=[],Kt=0;for(Ge=1;Ge<ue.FullPaths.length;++Ge)if(dt=ue.FullPaths[Ge].slice(At.length),St=ue.FileIndex[Ge],!(!St.size||!St.content||dt=="Sh33tJ5")){var at=Ze,Xn=pt(dt.length);for(Ye=0;Ye<dt.length;++Ye)Xn.write_shift(1,dt.charCodeAt(Ye)&127);Xn=Xn.slice(0,Xn.l),Ot[wt]=t1t.buf(St.content,0);var Hr=St.content;Fe==8&&(Hr=G(Hr)),me=pt(30),me.write_shift(4,67324752),me.write_shift(2,20),me.write_shift(2,it),me.write_shift(2,Fe),St.mt?a(me,St.mt):me.write_shift(4,0),me.write_shift(-4,Ot[wt]),me.write_shift(4,Hr.length),me.write_shift(4,St.content.length),me.write_shift(2,Xn.length),me.write_shift(2,0),Ze+=me.length,ke.push(me),Ze+=Xn.length,ke.push(Xn),Ze+=Hr.length,ke.push(Hr),me=pt(46),me.write_shift(4,33639248),me.write_shift(2,0),me.write_shift(2,20),me.write_shift(2,it),me.write_shift(2,Fe),me.write_shift(4,0),me.write_shift(-4,Ot[wt]),me.write_shift(4,Hr.length),me.write_shift(4,St.content.length),me.write_shift(2,Xn.length),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(4,0),me.write_shift(4,at),Kt+=me.l,he.push(me),Kt+=Xn.length,he.push(Xn),++wt}return me=pt(22),me.write_shift(4,101010256),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(2,wt),me.write_shift(2,wt),me.write_shift(4,Kt),me.write_shift(4,Ze),me.write_shift(2,0),vs([vs(ke),vs(he),me])}var Fn={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function il(ue,fe){if(ue.ctype)return ue.ctype;var ye=ue.name||"",ke=ye.match(/\.([^\.]+)$/);return ke&&Fn[ke[1]]||fe&&(ke=(ye=fe).match(/[\.\\]([^\.\\])+$/),ke&&Fn[ke[1]])?Fn[ke[1]]:"application/octet-stream"}function We(ue){for(var fe=oE(ue),ye=[],ke=0;ke<fe.length;ke+=76)ye.push(fe.slice(ke,ke+76));return ye.join(`\r
`)+`\r
`}function Je(ue){var fe=ue.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ye){var Ze=Ye.charCodeAt(0).toString(16).toUpperCase();return"="+(Ze.length==1?"0"+Ze:Ze)});fe=fe.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),fe.charAt(0)==`
`&&(fe="=0D"+fe.slice(1)),fe=fe.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ye=[],ke=fe.split(`\r
`),he=0;he<ke.length;++he){var me=ke[he];if(me.length==0){ye.push("");continue}for(var Fe=0;Fe<me.length;){var it=76,Ge=me.slice(Fe,Fe+it);Ge.charAt(it-1)=="="?it--:Ge.charAt(it-2)=="="?it-=2:Ge.charAt(it-3)=="="&&(it-=3),Ge=me.slice(Fe,Fe+it),Fe+=it,Fe<me.length&&(Ge+="="),ye.push(Ge)}}return ye.join(`\r
`)}function rt(ue){for(var fe=[],ye=0;ye<ue.length;++ye){for(var ke=ue[ye];ye<=ue.length&&ke.charAt(ke.length-1)=="=";)ke=ke.slice(0,ke.length-1)+ue[++ye];fe.push(ke)}for(var he=0;he<fe.length;++he)fe[he]=fe[he].replace(/[=][0-9A-Fa-f]{2}/g,function(me){return String.fromCharCode(parseInt(me.slice(1),16))});return rc(fe.join(`\r
`))}function _t(ue,fe,ye){for(var ke="",he="",me="",Fe,it=0;it<10;++it){var Ge=fe[it];if(!Ge||Ge.match(/^\s*$/))break;var Ye=Ge.match(/^(.*?):\s*([^\s].*)$/);if(Ye)switch(Ye[1].toLowerCase()){case"content-location":ke=Ye[2].trim();break;case"content-type":me=Ye[2].trim();break;case"content-transfer-encoding":he=Ye[2].trim();break}}switch(++it,he.toLowerCase()){case"base64":Fe=rc(xc(fe.slice(it).join("")));break;case"quoted-printable":Fe=rt(fe.slice(it));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+he)}var Ze=$t(ue,ke.slice(ye.length),Fe,{unsafe:!0});me&&(Ze.ctype=me)}function Ut(ue,fe){if(Y(ue.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ye=fe&&fe.root||"",ke=(xn&&Buffer.isBuffer(ue)?ue.toString("binary"):Y(ue)).split(`\r
`),he=0,me="";for(he=0;he<ke.length;++he)if(me=ke[he],!!/^Content-Location:/i.test(me)&&(me=me.slice(me.indexOf("file")),ye||(ye=me.slice(0,me.lastIndexOf("/")+1)),me.slice(0,ye.length)!=ye))for(;ye.length>0&&(ye=ye.slice(0,ye.length-1),ye=ye.slice(0,ye.lastIndexOf("/")+1),me.slice(0,ye.length)!=ye););var Fe=(ke[1]||"").match(/boundary="(.*?)"/);if(!Fe)throw new Error("MAD cannot find boundary");var it="--"+(Fe[1]||""),Ge=[],Ye=[],Ze={FileIndex:Ge,FullPaths:Ye};O(Ze);var wt,At=0;for(he=0;he<ke.length;++he){var dt=ke[he];dt!==it&&dt!==it+"--"||(At++&&_t(Ze,ke.slice(wt,he),ye),wt=he)}return Ze}function ir(ue,fe){var ye=fe||{},ke=ye.boundary||"SheetJS";ke="------="+ke;for(var he=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ke.slice(2)+'"',"","",""],me=ue.FullPaths[0],Fe=me,it=ue.FileIndex[0],Ge=1;Ge<ue.FullPaths.length;++Ge)if(Fe=ue.FullPaths[Ge].slice(me.length),it=ue.FileIndex[Ge],!(!it.size||!it.content||Fe=="Sh33tJ5")){Fe=Fe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Kt){return"_x"+Kt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Kt){return"_u"+Kt.charCodeAt(0).toString(16)+"_"});for(var Ye=it.content,Ze=xn&&Buffer.isBuffer(Ye)?Ye.toString("binary"):Y(Ye),wt=0,At=Math.min(1024,Ze.length),dt=0,St=0;St<=At;++St)(dt=Ze.charCodeAt(St))>=32&&dt<128&&++wt;var Ot=wt>=At*4/5;he.push(ke),he.push("Content-Location: "+(ye.root||"file:///C:/SheetJS/")+Fe),he.push("Content-Transfer-Encoding: "+(Ot?"quoted-printable":"base64")),he.push("Content-Type: "+il(it,Fe)),he.push(""),he.push(Ot?Je(Ze):We(Ze))}return he.push(ke+`--\r
`),he.join(`\r
`)}function tr(ue){var fe={};return O(fe,ue),fe}function $t(ue,fe,ye,ke){var he=ke&&ke.unsafe;he||O(ue);var me=!he&&yr.find(ue,fe);if(!me){var Fe=ue.FullPaths[0];fe.slice(0,Fe.length)==Fe?Fe=fe:(Fe.slice(-1)!="/"&&(Fe+="/"),Fe=(Fe+fe).replace("//","/")),me={name:i(fe),type:2},ue.FileIndex.push(me),ue.FullPaths.push(Fe),he||yr.utils.cfb_gc(ue)}return me.content=ye,me.size=ye?ye.length:0,ke&&(ke.CLSID&&(me.clsid=ke.CLSID),ke.mt&&(me.mt=ke.mt),ke.ct&&(me.ct=ke.ct)),me}function _r(ue,fe){O(ue);var ye=yr.find(ue,fe);if(ye){for(var ke=0;ke<ue.FileIndex.length;++ke)if(ue.FileIndex[ke]==ye)return ue.FileIndex.splice(ke,1),ue.FullPaths.splice(ke,1),!0}return!1}function Jt(ue,fe,ye){O(ue);var ke=yr.find(ue,fe);if(ke){for(var he=0;he<ue.FileIndex.length;++he)if(ue.FileIndex[he]==ke)return ue.FileIndex[he].name=i(ye),ue.FullPaths[he]=ye,!0}return!1}function Hn(ue){L(ue,!0)}return t.find=H,t.read=P,t.parse=d,t.write=pe,t.writeFile=J,t.utils={cfb_new:tr,cfb_add:$t,cfb_del:_r,cfb_mov:Jt,cfb_gc:Hn,ReadShift:K2,CheckField:C1e,prep_blob:Ls,bconcat:vs,use_zlib:ee,_deflateRaw:Xe,_inflateRaw:Pt,consts:te},t}();function r1t(e){return typeof e=="string"?PP(e):Array.isArray(e)?Axt(e):e}function XC(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=PP(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?rf(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var i=new Blob([r1t(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,e);if(typeof saveAs<"u")return saveAs(i,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:e,saveAs:!0});var s=document.createElement("a");if(s.download!=null)return s.download=e,s.href=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=pm(t)),o.write(t),o.close(),t}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+e)}function n1t(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function da(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function hee(e,t){for(var r=[],n=da(e),i=0;i!==n.length;++i)r[e[n[i]][t]]==null&&(r[e[n[i]][t]]=n[i]);return r}function jP(e){for(var t=[],r=da(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function DP(e){for(var t=[],r=da(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function i1t(e){for(var t=[],r=da(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var SO=new Date(1899,11,30,0,0,0);function Qa(e,t){var r=e.getTime(),n=SO.getTime()+(e.getTimezoneOffset()-SO.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var n1e=new Date,a1t=SO.getTime()+(n1e.getTimezoneOffset()-SO.getTimezoneOffset())*6e4,pee=n1e.getTimezoneOffset();function MP(e){var t=new Date;return t.setTime(e*24*60*60*1e3+a1t),t.getTimezoneOffset()!==pee&&t.setTime(t.getTime()+(t.getTimezoneOffset()-pee)*6e4),t}function s1t(e){var t=0,r=0,n=!1,i=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!i)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var a=1;a!=i.length;++a)if(i[a]){switch(r=1,a>3&&(n=!0),i[a].slice(i[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+i[a].slice(i[a].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(i[a],10)}return t}var mee=new Date("2017-02-19T19:06:09.000Z"),i1e=isNaN(mee.getFullYear())?new Date("2/19/17"):mee,o1t=i1e.getFullYear()==2017;function Oi(e,t){var r=new Date(e);if(o1t)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(i1e.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var i=e.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return e.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function Nx(e,t){if(xn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return rf(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return rf(Vxe(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return rf(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return rf(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(a){return r[a]||a})}catch{}for(var n=[],i=0;i!=e.length;++i)n.push(String.fromCharCode(e[i]));return n.join("")}function Pi(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Pi(e[r]));return t}function sa(e,t){for(var r="";r.length<t;)r+=e;return r}function cd(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(i,a){return r=-r,a}),!isNaN(t=Number(n)))?t/r:t}var l1t=["january","february","march","april","may","june","july","august","september","october","november","december"];function Yy(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),i=t.getMonth(),a=t.getDate();if(isNaN(a))return r;var s=e.toLowerCase();if(s.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(s=s.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),s.length>3&&l1t.indexOf(s)==-1)return r}else if(s.match(/[a-z]/))return r;return n<0||n>8099?r:(i>0||a>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var c1t=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,i){if(e||typeof n=="string")return r.split(n);for(var a=r.split(n),s=[a[0]],o=1;o<a.length;++o)s.push(i),s.push(a[o]);return s}}();function a1e(e){return e?e.content&&e.type?Nx(e.content,!0):e.data?h2(e.data):e.asNodeBuffer&&xn?h2(e.asNodeBuffer().toString("binary")):e.asBinary?h2(e.asBinary()):e._data&&e._data.getContent?h2(Nx(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function s1e(e){if(!e)return null;if(e.data)return nee(e.data);if(e.asNodeBuffer&&xn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?nee(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function u1t(e){return e&&e.name.slice(-4)===".bin"?s1e(e):a1e(e)}function Wc(e,t){for(var r=e.FullPaths||da(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),i=n.replace(/\\/g,"/"),a=0;a<r.length;++a){var s=r[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==s||i==s)return e.files?e.files[r[a]]:e.FileIndex[a]}return null}function z$(e,t){var r=Wc(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Ia(e,t,r){if(!r)return u1t(z$(e,t));if(!t)return null;try{return Ia(e,t)}catch{return null}}function nc(e,t,r){if(!r)return a1e(z$(e,t));if(!t)return null;try{return nc(e,t)}catch{return null}}function d1t(e,t,r){return s1e(z$(e,t))}function gee(e){for(var t=e.FullPaths||da(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function ln(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return xn?n=pp(r):n=Txt(r),yr.utils.cfb_add(e,t,n)}yr.utils.cfb_add(e,t,r)}else e.file(t,r)}function H$(){return yr.utils.cfb_new()}function o1e(e,t){switch(t.type){case"base64":return yr.read(e,{type:"base64"});case"binary":return yr.read(e,{type:"binary"});case"buffer":case"array":return yr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function m2(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var i=n.shift();i===".."?r.pop():i!=="."&&r.push(i)}return r.join("/")}var _a=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,f1t=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,xee=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,h1t=/<[^>]*>/g,_o=_a.match(xee)?xee:h1t,p1t=/<\w*:/,m1t=/<(\/?)\w+:/;function Fr(e,t,r){for(var n={},i=0,a=0;i!==e.length&&!((a=e.charCodeAt(i))===32||a===10||a===13);++i);if(t||(n[0]=e.slice(0,i)),i===e.length)return n;var s=e.match(f1t),o=0,l="",c=0,d="",f="",p=1;if(s)for(c=0;c!=s.length;++c){for(f=s[c],a=0;a!=f.length&&f.charCodeAt(a)!==61;++a);for(d=f.slice(0,a).trim();f.charCodeAt(a+1)==32;)++a;for(p=(i=f.charCodeAt(a+1))==34||i==39?1:0,l=f.slice(a+1+p,f.length-p),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=l,n[d.toLowerCase()]=l;else{var m=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[m]&&d.slice(o-3,o)=="ext")continue;n[m]=l,n[m.toLowerCase()]=l}}return n}function Tf(e){return e.replace(m1t,"<$1")}var l1e={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},W$=jP(l1e),Dn=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var i=n+"",a=i.indexOf("<![CDATA[");if(a==-1)return i.replace(e,function(o,l){return l1e[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,l){return String.fromCharCode(parseInt(l,16))});var s=i.indexOf("]]>");return r(i.slice(0,a))+i.slice(a+9,s)+r(i.slice(s+3))}}(),V$=/[&<>'"]/g,g1t=/[\u0000-\u0008\u000b-\u001f]/g;function si(e){var t=e+"";return t.replace(V$,function(r){return W$[r]}).replace(g1t,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function vee(e){return si(e).replace(/ /g,"_x0020_")}var c1e=/[\u0000-\u001f]/g;function q$(e){var t=e+"";return t.replace(V$,function(r){return W$[r]}).replace(/\n/g,"<br/>").replace(c1e,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function x1t(e){var t=e+"";return t.replace(V$,function(r){return W$[r]}).replace(c1e,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var yee=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function v1t(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Ai(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function NM(e){for(var t="",r=0,n=0,i=0,a=0,s=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(i=e.charCodeAt(r++),n>191&&n<224){s=(n&31)<<6,s|=i&63,t+=String.fromCharCode(s);continue}if(a=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(i&63)<<6|a&63);continue}s=e.charCodeAt(r++),o=((n&7)<<18|(i&63)<<12|(a&63)<<6|s&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function bee(e){var t=q0(2*e.length),r,n,i=1,a=0,s=0,o;for(n=0;n<e.length;n+=i)i=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),i=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),i=3):(i=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,s=55296+(r>>>10&1023),r=56320+(r&1023)),s!==0&&(t[a++]=s&255,t[a++]=s>>>8,s=0),t[a++]=r%256,t[a++]=r>>>8;return t.slice(0,a).toString("ucs2")}function wee(e){return pp(e,"binary").toString("utf8")}var EN="foo bar baz",di=xn&&(wee(EN)==NM(EN)&&wee||bee(EN)==NM(EN)&&bee)||NM,rf=xn?function(e){return pp(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,i=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,i=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(i>>18&7))),t.push(String.fromCharCode(144+(i>>12&63))),t.push(String.fromCharCode(128+(i>>6&63))),t.push(String.fromCharCode(128+(i&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},cE=function(){var e={};return function(r,n){var i=r+"|"+(n||"");return e[i]?e[i]:e[i]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),u1e=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<e.length;++i)n=n.replace(e[i][0],e[i][1]);return n}}(),y1t=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),b1t=/<\/?(?:vt:)?variant>/g,w1t=/<(?:vt:)([^>]*)>([\s\S]*)</;function See(e,t){var r=Fr(e),n=e.match(y1t(r.baseType))||[],i=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return i}return n.forEach(function(a){var s=a.replace(b1t,"").match(w1t);s&&i.push({v:di(s[2]),t:s[1]})}),i}var d1e=/(^\s|\s$|\n)/;function $s(e,t){return"<"+e+(t.match(d1e)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function uE(e){return da(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Ft(e,t,r){return"<"+e+(r!=null?uE(r):"")+(t!=null?(t.match(d1e)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function P5(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function S1t(e,t){switch(typeof e){case"string":var r=Ft("vt:lpwstr",si(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Ft((e|0)==e?"vt:i4":"vt:r8",si(String(e)));case"boolean":return Ft("vt:bool",e?"true":"false")}if(e instanceof Date)return Ft("vt:filetime",P5(e));throw new Error("Unable to serialize "+e)}function G$(e){if(xn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return di(pm(B$(e)));throw new Error("Bad input format: expected Buffer or string")}var dE=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Xa={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},c1=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Jl={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function E1t(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),i=e[t+6]&15,a=5;a>=0;--a)i=i*256+e[t+a];return n==2047?i==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,i+=Math.pow(2,52)),r*Math.pow(2,n-52)*i)}function C1t(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,i=0,a=0,s=n?-t:t;isFinite(s)?s==0?i=a=0:(i=Math.floor(Math.log(s)/Math.LN2),a=s*Math.pow(2,52-i),i<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?i=-1022:(a-=Math.pow(2,52),i+=1023)):(i=2047,a=isNaN(t)?26985:0);for(var o=0;o<=5;++o,a/=256)e[r+o]=a&255;e[r+6]=(i&15)<<4|a&15,e[r+7]=i>>4|n}var Eee=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var i=0,a=e[0][n].length;i<a;i+=r)t.push.apply(t,e[0][n].slice(i,i+r));return t},Cee=xn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:pp(t)})):Eee(e)}:Eee,kee=function(e,t,r){for(var n=[],i=t;i<r;i+=2)n.push(String.fromCharCode(bh(e,i)));return n.join("").replace(Xo,"")},K$=xn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Xo,""):kee(e,t,r)}:kee,_ee=function(e,t,r){for(var n=[],i=t;i<t+r;++i)n.push(("0"+e[i].toString(16)).slice(-2));return n.join("")},f1e=xn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):_ee(e,t,r)}:_ee,Nee=function(e,t,r){for(var n=[],i=t;i<r;i++)n.push(String.fromCharCode(lv(e,i)));return n.join("")},YC=xn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):Nee(t,r,n)}:Nee,h1e=function(e,t){var r=Zl(e,t);return r>0?YC(e,t+4,t+4+r-1):""},p1e=h1e,m1e=function(e,t){var r=Zl(e,t);return r>0?YC(e,t+4,t+4+r-1):""},g1e=m1e,x1e=function(e,t){var r=2*Zl(e,t);return r>0?YC(e,t+4,t+4+r-1):""},v1e=x1e,y1e=function(t,r){var n=Zl(t,r);return n>0?K$(t,r+4,r+4+n):""},b1e=y1e,w1e=function(e,t){var r=Zl(e,t);return r>0?YC(e,t+4,t+4+r):""},S1e=w1e,E1e=function(e,t){return E1t(e,t)},EO=E1e,X$=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};xn&&(p1e=function(t,r){if(!Buffer.isBuffer(t))return h1e(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},g1e=function(t,r){if(!Buffer.isBuffer(t))return m1e(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},v1e=function(t,r){if(!Buffer.isBuffer(t))return x1e(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},b1e=function(t,r){if(!Buffer.isBuffer(t))return y1e(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},S1e=function(t,r){if(!Buffer.isBuffer(t))return w1e(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},EO=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):E1e(t,r)},X$=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var lv=function(e,t){return e[t]},bh=function(e,t){return e[t+1]*256+e[t]},k1t=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Zl=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},tg=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},_1t=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function K2(e,t){var r="",n,i,a=[],s,o,l,c;switch(t){case"dbcs":if(c=this.l,xn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(l=0;l<e;++l)r+=String.fromCharCode(bh(this,c)),c+=2;e*=2;break;case"utf8":r=YC(this,this.l,this.l+e);break;case"utf16le":e*=2,r=K$(this,this.l,this.l+e);break;case"wstr":return K2.call(this,e,"dbcs");case"lpstr-ansi":r=p1e(this,this.l),e=4+Zl(this,this.l);break;case"lpstr-cp":r=g1e(this,this.l),e=4+Zl(this,this.l);break;case"lpwstr":r=v1e(this,this.l),e=4+2*Zl(this,this.l);break;case"lpp4":e=4+Zl(this,this.l),r=b1e(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Zl(this,this.l),r=S1e(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(s=lv(this,this.l+e++))!==0;)a.push(SN(s));r=a.join("");break;case"_wstr":for(e=0,r="";(s=bh(this,this.l+e))!==0;)a.push(SN(s)),e+=2;e+=2,r=a.join("");break;case"dbcs-cont":for(r="",c=this.l,l=0;l<e;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return s=lv(this,c),this.l=c+1,o=K2.call(this,e-l,s?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(SN(bh(this,c))),c+=2}r=a.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",c=this.l,l=0;l!=e;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return s=lv(this,c),this.l=c+1,o=K2.call(this,e-l,s?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(SN(lv(this,c))),c+=1}r=a.join("");break;default:switch(e){case 1:return n=lv(this,this.l),this.l++,n;case 2:return n=(t==="i"?k1t:bh)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(n=(e>0?tg:_1t)(this,this.l),this.l+=4,n):(i=Zl(this,this.l),this.l+=4,i);case 8:case-8:if(t==="f")return e==8?i=EO(this,this.l):i=EO([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;e=8;case 16:r=f1e(this,this.l,e);break}}return this.l+=e,r}var N1t=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},A1t=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},T1t=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function I1t(e,t,r){var n=0,i=0;if(r==="dbcs"){for(i=0;i!=t.length;++i)T1t(this,t.charCodeAt(i),this.l+2*i);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=t.length;++i)this[this.l+i]=t.charCodeAt(i)&255;n=t.length}else if(r==="hex"){for(;i<e;++i)this[this.l++]=parseInt(t.slice(2*i,2*i+2),16)||0;return this}else if(r==="utf16le"){var a=Math.min(this.l+e,this.length);for(i=0;i<Math.min(t.length,e);++i){var s=t.charCodeAt(i);this[this.l++]=s&255,this[this.l++]=s>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,N1t(this,t,this.l);break;case 8:if(n=8,r==="f"){C1t(this,t,this.l);break}case 16:break;case-4:n=4,A1t(this,t,this.l);break}return this.l+=n,this}function C1e(e,t){var r=f1e(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Ls(e,t){e.l=t,e.read_shift=K2,e.chk=C1e,e.write_shift=I1t}function Eo(e,t){e.l+=t}function pt(e){var t=q0(e);return Ls(t,0),t}function mp(e,t,r){if(e){var n,i,a;Ls(e,e.l||0);for(var s=e.length,o=0,l=0;e.l<s;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var c=xE[o]||xE[65535];for(n=e.read_shift(1),a=n&127,i=1;i<4&&n&128;++i)a+=((n=e.read_shift(1))&127)<<7*i;l=e.l+a;var d=c.f&&c.f(e,a,r);if(e.l=l,t(d,c,o))return}}}function Ol(){var e=[],t=xn?256:2048,r=function(c){var d=pt(c);return Ls(d,0),d},n=r(t),i=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},a=function(c){return n&&c<n.length-n.l?n:(i(),n=r(Math.max(c+1,t)))},s=function(){return i(),vs(e)},o=function(c){i(),n=c,n.l==null&&(n.l=n.length),a(t)};return{next:a,push:o,end:s,_bufs:e}}function Ct(e,t,r,n){var i=+t,a;if(!isNaN(i)){n||(n=xE[i].p||(r||[]).length||0),a=1+(i>=128?1:0)+1,n>=128&&++a,n>=16384&&++a,n>=2097152&&++a;var s=e.next(a);i<=127?s.write_shift(1,i):(s.write_shift(1,(i&127)+128),s.write_shift(1,i>>7));for(var o=0;o!=4;++o)if(n>=128)s.write_shift(1,(n&127)+128),n>>=7;else{s.write_shift(1,n);break}n>0&&X$(r)&&e.push(r)}}function X2(e,t,r){var n=Pi(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function Aee(e,t,r){var n=Pi(e);return n.s=X2(n.s,t.s,r),n.e=X2(n.e,t.s,r),n}function Y2(e,t){if(e.cRel&&e.c<0)for(e=Pi(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Pi(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Dr(e);return!e.cRel&&e.cRel!=null&&(r=R1t(r)),!e.rRel&&e.rRel!=null&&(r=O1t(r)),r}function AM(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+qi(e.s.c)+":"+(e.e.cRel?"":"$")+qi(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Sa(e.s.r)+":"+(e.e.rRel?"":"$")+Sa(e.e.r):Y2(e.s,t.biff)+":"+Y2(e.e,t.biff)}function Y$(e){return parseInt(P1t(e),10)-1}function Sa(e){return""+(e+1)}function O1t(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function P1t(e){return e.replace(/\$(\d+)$/,"$1")}function Q$(e){for(var t=j1t(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function qi(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function R1t(e){return e.replace(/^([A-Z])/,"$$$1")}function j1t(e){return e.replace(/^\$([A-Z])/,"$1")}function D1t(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Gi(e){for(var t=0,r=0,n=0;n<e.length;++n){var i=e.charCodeAt(n);i>=48&&i<=57?t=10*t+(i-48):i>=65&&i<=90&&(r=26*r+(i-64))}return{c:r-1,r:t-1}}function Dr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Dl(e){var t=e.indexOf(":");return t==-1?{s:Gi(e),e:Gi(e)}:{s:Gi(e.slice(0,t)),e:Gi(e.slice(t+1))}}function en(e,t){return typeof t>"u"||typeof t=="number"?en(e.s,e.e):(typeof e!="string"&&(e=Dr(e)),typeof t!="string"&&(t=Dr(t)),e==t?e:e+":"+t)}function Mn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,i=0,a=e.length;for(r=0;n<a&&!((i=e.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(t.s.c=--r,r=0;n<a&&!((i=e.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;if(t.s.r=--r,n===a||i!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=a&&!((i=e.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(t.e.c=--r,r=0;n!=a&&!((i=e.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;return t.e.r=--r,t}function Tee(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=yu(e.z,r?Qa(t):t)}catch{}try{return e.w=yu((e.XF||{}).numFmtId||(r?14:0),r?Qa(t):t)}catch{return""+t}}function tp(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?gp[e.v]||e.v:t==null?Tee(e,e.v):Tee(e,t))}function mm(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function k1e(e,t,r){var n=r||{},i=e?Array.isArray(e):n.dense,a=e||(i?[]:{}),s=0,o=0;if(a&&n.origin!=null){if(typeof n.origin=="number")s=n.origin;else{var l=typeof n.origin=="string"?Gi(n.origin):n.origin;s=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var d=Mn(a["!ref"]);c.s.c=d.s.c,c.s.r=d.s.r,c.e.c=Math.max(c.e.c,d.e.c),c.e.r=Math.max(c.e.r,d.e.r),s==-1&&(c.e.r=s=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=t[f].length;++p)if(!(typeof t[f][p]>"u")){var m={v:t[f][p]},x=s+f,y=o+p;if(c.s.r>x&&(c.s.r=x),c.s.c>y&&(c.s.c=y),c.e.r<x&&(c.e.r=x),c.e.c<y&&(c.e.c=y),t[f][p]&&typeof t[f][p]=="object"&&!Array.isArray(t[f][p])&&!(t[f][p]instanceof Date))m=t[f][p];else if(Array.isArray(m.v)&&(m.f=t[f][p][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||Rr[14],n.cellDates?(m.t="d",m.w=yu(m.z,Qa(m.v))):(m.t="n",m.v=Qa(m.v),m.w=yu(m.z,m.v))):m.t="s";if(i)a[x]||(a[x]=[]),a[x][y]&&a[x][y].z&&(m.z=a[x][y].z),a[x][y]=m;else{var b=Dr({c:y,r:x});a[b]&&a[b].z&&(m.z=a[b].z),a[b]=m}}}return c.s.c<1e7&&(a["!ref"]=en(c)),a}function Ub(e,t){return k1e(null,e,t)}function M1t(e){return e.read_shift(4,"i")}function ud(e,t){return t||(t=pt(4)),t.write_shift(4,e),t}function yo(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function bs(e,t){var r=!1;return t==null&&(r=!0,t=pt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function F1t(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function L1t(e,t){return t||(t=pt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function J$(e,t){var r=e.l,n=e.read_shift(1),i=yo(e),a=[],s={t:i,h:i};if(n&1){for(var o=e.read_shift(4),l=0;l!=o;++l)a.push(F1t(e));s.r=a}else s.r=[{ich:0,ifnt:0}];return e.l=r+t,s}function B1t(e,t){var r=!1;return t==null&&(r=!0,t=pt(15+4*e.t.length)),t.write_shift(1,0),bs(e.t,t),r?t.slice(0,t.l):t}var U1t=J$;function $1t(e,t){var r=!1;return t==null&&(r=!0,t=pt(23+4*e.t.length)),t.write_shift(1,1),bs(e.t,t),t.write_shift(4,1),L1t({},t),r?t.slice(0,t.l):t}function _u(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function u1(e,t){return t==null&&(t=pt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function d1(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function f1(e,t){return t==null&&(t=pt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var z1t=yo,_1e=bs;function Z$(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function CO(e,t){var r=!1;return t==null&&(r=!0,t=pt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var H1t=yo,R5=Z$,ez=CO;function tz(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var i=n===0?EO([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):tg(t,0)>>2;return r?i/100:i}function N1e(e,t){t==null&&(t=pt(4));var r=0,n=0,i=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?i:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function A1e(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function W1t(e,t){return t||(t=pt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var h1=A1e,$b=W1t;function go(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Ax(e,t){return(t||pt(8)).write_shift(8,e,"f")}function V1t(e){var t={},r=e.read_shift(1),n=r>>>1,i=e.read_shift(1),a=e.read_shift(2,"i"),s=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=i;var c=Gg[i];c&&(t.rgb=hE(c));break;case 2:t.rgb=hE([s,o,l]);break;case 3:t.theme=i;break}return a!=0&&(t.tint=a>0?a/32767:a/32768),t}function kO(e,t){if(t||(t=pt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function q1t(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function G1t(e,t){t||(t=pt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function T1e(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function K1t(e){return T1e(e,1)}function X1t(e){return T1e(e,2)}var rz=2,pl=3,CN=11,Iee=12,_O=19,kN=64,Y1t=65,Q1t=71,J1t=4108,Z1t=4126,ps=80,I1e=81,evt=[ps,I1e],j5={1:{n:"CodePage",t:rz},2:{n:"Category",t:ps},3:{n:"PresentationFormat",t:ps},4:{n:"ByteCount",t:pl},5:{n:"LineCount",t:pl},6:{n:"ParagraphCount",t:pl},7:{n:"SlideCount",t:pl},8:{n:"NoteCount",t:pl},9:{n:"HiddenCount",t:pl},10:{n:"MultimediaClipCount",t:pl},11:{n:"ScaleCrop",t:CN},12:{n:"HeadingPairs",t:J1t},13:{n:"TitlesOfParts",t:Z1t},14:{n:"Manager",t:ps},15:{n:"Company",t:ps},16:{n:"LinksUpToDate",t:CN},17:{n:"CharacterCount",t:pl},19:{n:"SharedDoc",t:CN},22:{n:"HyperlinksChanged",t:CN},23:{n:"AppVersion",t:pl,p:"version"},24:{n:"DigSig",t:Y1t},26:{n:"ContentType",t:ps},27:{n:"ContentStatus",t:ps},28:{n:"Language",t:ps},29:{n:"Version",t:ps},255:{},2147483648:{n:"Locale",t:_O},2147483651:{n:"Behavior",t:_O},1919054434:{}},D5={1:{n:"CodePage",t:rz},2:{n:"Title",t:ps},3:{n:"Subject",t:ps},4:{n:"Author",t:ps},5:{n:"Keywords",t:ps},6:{n:"Comments",t:ps},7:{n:"Template",t:ps},8:{n:"LastAuthor",t:ps},9:{n:"RevNumber",t:ps},10:{n:"EditTime",t:kN},11:{n:"LastPrinted",t:kN},12:{n:"CreatedDate",t:kN},13:{n:"ModifiedDate",t:kN},14:{n:"PageCount",t:pl},15:{n:"WordCount",t:pl},16:{n:"CharCount",t:pl},17:{n:"Thumbnail",t:Q1t},18:{n:"Application",t:ps},19:{n:"DocSecurity",t:pl},255:{},2147483648:{n:"Locale",t:_O},2147483651:{n:"Behavior",t:_O},1919054434:{}},Oee={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},tvt=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function rvt(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var nvt=rvt([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Gg=Pi(nvt),gp={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},O1e={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},M5={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},_N={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function nz(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function ivt(e){var t=nz();if(!e||!e.match)return t;var r={};if((e.match(_o)||[]).forEach(function(n){var i=Fr(n);switch(i[0].replace(p1t,"<")){case"<?xml":break;case"<Types":t.xmlns=i["xmlns"+(i[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[i.Extension]=i.ContentType;break;case"<Override":t[M5[i.ContentType]]!==void 0&&t[M5[i.ContentType]].push(i.PartName);break}}),t.xmlns!==Xa.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function P1e(e,t){var r=i1t(M5),n=[],i;n[n.length]=_a,n[n.length]=Ft("Types",null,{xmlns:Xa.CT,"xmlns:xsd":Xa.xsd,"xmlns:xsi":Xa.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Ft("Default",null,{Extension:l[0],ContentType:l[1]})}));var a=function(l){e[l]&&e[l].length>0&&(i=e[l][0],n[n.length]=Ft("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:_N[l][t.bookType]||_N[l].xlsx}))},s=function(l){(e[l]||[]).forEach(function(c){n[n.length]=Ft("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:_N[l][t.bookType]||_N[l].xlsx})})},o=function(l){(e[l]||[]).forEach(function(c){n[n.length]=Ft("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:r[l][0]})})};return a("workbooks"),s("sheets"),s("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),s("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Sn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function fE(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Q2(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(_o)||[]).forEach(function(i){var a=Fr(i);if(a[0]==="<Relationship"){var s={};s.Type=a.Type,s.Target=a.Target,s.Id=a.Id,a.TargetMode&&(s.TargetMode=a.TargetMode);var o=a.TargetMode==="External"?a.Target:m2(a.Target,t);r[o]=s,n[a.Id]=s}}),r["!id"]=n,r}function Wv(e){var t=[_a,Ft("Relationships",null,{xmlns:Xa.RELS})];return da(e["!id"]).forEach(function(r){t[t.length]=Ft("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function ii(e,t,r,n,i,a){if(i||(i={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,i.Id="rId"+t,i.Type=n,i.Target=r,[Sn.HLINK,Sn.XPATH,Sn.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),e["!id"][i.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][i.Id]=i,e[("/"+i.Target).replace("//","/")]=i,t}var avt="application/vnd.oasis.opendocument.spreadsheet";function svt(e,t){for(var r=G$(e),n,i;n=dE.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(i=Fr(n[0],!1),i.path=="/"&&i.type!==avt)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function ovt(e){var t=[_a];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function Pee(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function lvt(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function cvt(e){var t=[_a];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(Pee(e[r][0],e[r][1])),t.push(lvt("",e[r][0]));return t.push(Pee("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function R1e(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+vO.version+"</meta:generator></office:meta></office:document-meta>"}var uu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],uvt=function(){for(var e=new Array(uu.length),t=0;t<uu.length;++t){var r=uu[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function j1e(e){var t={};e=di(e);for(var r=0;r<uu.length;++r){var n=uu[r],i=e.match(uvt[r]);i!=null&&i.length>0&&(t[n[1]]=Dn(i[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Oi(t[n[1]]))}return t}function TM(e,t,r,n,i){i[e]!=null||t==null||t===""||(i[e]=t,t=si(t),n[n.length]=r?Ft(e,t,r):$s(e,t))}function D1e(e,t){var r=t||{},n=[_a,Ft("cp:coreProperties",null,{"xmlns:cp":Xa.CORE_PROPS,"xmlns:dc":Xa.dc,"xmlns:dcterms":Xa.dcterms,"xmlns:dcmitype":Xa.dcmitype,"xmlns:xsi":Xa.xsi})],i={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&TM("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:P5(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i),e.ModifiedDate!=null&&TM("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:P5(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i));for(var a=0;a!=uu.length;++a){var s=uu[a],o=r.Props&&r.Props[s[1]]!=null?r.Props[s[1]]:e?e[s[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&TM(s[0],o,null,n,i)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Kg=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],M1e=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function F1e(e,t,r,n){var i=[];if(typeof e=="string")i=See(e,n);else for(var a=0;a<e.length;++a)i=i.concat(e[a].map(function(d){return{v:d}}));var s=typeof t=="string"?See(t,n).map(function(d){return d.v}):t,o=0,l=0;if(s.length>0)for(var c=0;c!==i.length;c+=2){switch(l=+i[c+1].v,i[c].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=s.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=l,r.DefinedNames=s.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=s.slice(o,o+l);break}o+=l}}function dvt(e,t,r){var n={};return t||(t={}),e=di(e),Kg.forEach(function(i){var a=(e.match(cE(i[0]))||[])[1];switch(i[2]){case"string":a&&(t[i[1]]=Dn(a));break;case"bool":t[i[1]]=a==="true";break;case"raw":var s=e.match(new RegExp("<"+i[0]+"[^>]*>([\\s\\S]*?)</"+i[0]+">"));s&&s.length>0&&(n[i[1]]=s[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&F1e(n.HeadingPairs,n.TitlesOfParts,t,r),t}function L1e(e){var t=[],r=Ft;return e||(e={}),e.Application="SheetJS",t[t.length]=_a,t[t.length]=Ft("Properties",null,{xmlns:Xa.EXT_PROPS,"xmlns:vt":Xa.vt}),Kg.forEach(function(n){if(e[n[1]]!==void 0){var i;switch(n[2]){case"string":i=si(String(e[n[1]]));break;case"bool":i=e[n[1]]?"true":"false";break}i!==void 0&&(t[t.length]=r(n[0],i))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+si(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var fvt=/<[^>]+>[^<]*/g;function hvt(e,t){var r={},n="",i=e.match(fvt);if(i)for(var a=0;a!=i.length;++a){var s=i[a],o=Fr(s);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Dn(o.name);break;case"</property>":n=null;break;default:if(s.indexOf("<vt:")===0){var l=s.split(">"),c=l[0].slice(4),d=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":r[n]=Dn(d);break;case"bool":r[n]=Ai(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Oi(d);break;case"cy":case"error":r[n]=Dn(d);break;default:if(c.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",s,c,l)}}else if(s.slice(0,2)!=="</"){if(t.WTF)throw new Error(s)}}}return r}function B1e(e){var t=[_a,Ft("Properties",null,{xmlns:Xa.CUST_PROPS,"xmlns:vt":Xa.vt})];if(!e)return t.join("");var r=1;return da(e).forEach(function(i){++r,t[t.length]=Ft("property",S1t(e[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:si(i)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var F5={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},IM;function pvt(e,t,r){IM||(IM=jP(F5)),t=IM[t]||t,e[t]=r}function mvt(e,t){var r=[];return da(F5).map(function(n){for(var i=0;i<uu.length;++i)if(uu[i][1]==n)return uu[i];for(i=0;i<Kg.length;++i)if(Kg[i][1]==n)return Kg[i];throw n}).forEach(function(n){if(e[n[1]]!=null){var i=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),r.push($s(F5[n[1]]||n[1],i))}}),Ft("DocumentProperties",r.join(""),{xmlns:Jl.o})}function gvt(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",i=[];return e&&da(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)){for(var s=0;s<uu.length;++s)if(a==uu[s][1])return;for(s=0;s<Kg.length;++s)if(a==Kg[s][1])return;for(s=0;s<r.length;++s)if(a==r[s])return;var o=e[a],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),i.push(Ft(vee(a),o,{"dt:dt":l}))}}),t&&da(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)&&!(e&&Object.prototype.hasOwnProperty.call(e,a))){var s=t[a],o="string";typeof s=="number"?(o="float",s=String(s)):s===!0||s===!1?(o="boolean",s=s?"1":"0"):s instanceof Date?(o="dateTime.tz",s=s.toISOString()):s=String(s),i.push(Ft(vee(a),s,{"dt:dt":o}))}}),"<"+n+' xmlns="'+Jl.o+'">'+i.join("")+"</"+n+">"}function iz(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function xvt(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),i=(r-n)/Math.pow(2,32);n*=1e7,i*=1e7;var a=n/Math.pow(2,32)|0;a>0&&(n=n%Math.pow(2,32),i+=a);var s=pt(8);return s.write_shift(4,n),s.write_shift(4,i),s}function U1e(e,t,r){var n=e.l,i=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return i}function $1e(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function z1e(e,t,r){return t===31?$1e(e):U1e(e,t,r)}function L5(e,t,r){return z1e(e,t,r===!1?0:4)}function vvt(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return z1e(e,t,0)}function yvt(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var i=e.l;r[n]=e.read_shift(0,"lpwstr").replace(Xo,""),e.l-i&2&&(e.l+=2)}return r}function bvt(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(Xo,"");return r}function wvt(e){var t=e.l,r=NO(e,I1e);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=NO(e,pl);return[r,n]}function Svt(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(wvt(e));return r}function Ree(e,t){for(var r=e.read_shift(4),n={},i=0;i!=r;++i){var a=e.read_shift(4),s=e.read_shift(4);n[a]=e.read_shift(s,t===1200?"utf16le":"utf8").replace(Xo,"").replace(p2,"!"),t===1200&&s%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function H1e(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function Evt(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function NO(e,t,r){var n=e.read_shift(2),i,a=r||{};if(e.l+=2,t!==Iee&&n!==t&&evt.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===Iee?n:t){case 2:return i=e.read_shift(2,"i"),a.raw||(e.l+=2),i;case 3:return i=e.read_shift(4,"i"),i;case 11:return e.read_shift(4)!==0;case 19:return i=e.read_shift(4),i;case 30:return U1e(e,n,4).replace(Xo,"");case 31:return $1e(e);case 64:return iz(e);case 65:return H1e(e);case 71:return Evt(e);case 80:return L5(e,n,!a.raw).replace(Xo,"");case 81:return vvt(e,n).replace(Xo,"");case 4108:return Svt(e);case 4126:case 4127:return n==4127?yvt(e):bvt(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function jee(e,t){var r=pt(4),n=pt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=pt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=xvt(t);break;case 31:case 80:for(n=pt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return vs([r,n])}function Dee(e,t){var r=e.l,n=e.read_shift(4),i=e.read_shift(4),a=[],s=0,o=0,l=-1,c={};for(s=0;s!=i;++s){var d=e.read_shift(4),f=e.read_shift(4);a[s]=[d,f+r]}a.sort(function(_,C){return _[1]-C[1]});var p={};for(s=0;s!=i;++s){if(e.l!==a[s][1]){var m=!0;if(s>0&&t)switch(t[a[s-1][0]].t){case 2:e.l+2===a[s][1]&&(e.l+=2,m=!1);break;case 80:e.l<=a[s][1]&&(e.l=a[s][1],m=!1);break;case 4108:e.l<=a[s][1]&&(e.l=a[s][1],m=!1);break}if((!t||s==0)&&e.l<=a[s][1]&&(m=!1,e.l=a[s][1]),m)throw new Error("Read Error: Expected address "+a[s][1]+" at "+e.l+" :"+s)}if(t){var x=t[a[s][0]];if(p[x.n]=NO(e,x.t,{raw:!0}),x.p==="version"&&(p[x.n]=String(p[x.n]>>16)+"."+("0000"+String(p[x.n]&65535)).slice(-4)),x.n=="CodePage")switch(p[x.n]){case 0:p[x.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:nd(o=p[x.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+p[x.n])}}else if(a[s][0]===1){if(o=p.CodePage=NO(e,rz),nd(o),l!==-1){var y=e.l;e.l=a[l][1],c=Ree(e,o),e.l=y}}else if(a[s][0]===0){if(o===0){l=s,e.l=a[s+1][1];continue}c=Ree(e,o)}else{var b=c[a[s][0]],S;switch(e[e.l]){case 65:e.l+=4,S=H1e(e);break;case 30:e.l+=4,S=L5(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,S=L5(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,S=e.read_shift(4,"i");break;case 19:e.l+=4,S=e.read_shift(4);break;case 5:e.l+=4,S=e.read_shift(8,"f");break;case 11:e.l+=4,S=va(e,4);break;case 64:e.l+=4,S=Oi(iz(e));break;default:throw new Error("unparsed value: "+e[e.l])}p[b]=S}}return e.l=r+n,p}var W1e=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Cvt(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function Mee(e,t,r){var n=pt(8),i=[],a=[],s=8,o=0,l=pt(8),c=pt(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),a.push(l),i.push(c),s+=8+l.length,!t){c=pt(8),c.write_shift(4,0),i.unshift(c);var d=[pt(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(l=pt(8+2*(f.length+1)+(f.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,f.length+1),l.write_shift(0,f,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=vs(d),a.unshift(l),s+=8+l.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(W1e.indexOf(e[o][0])>-1||M1e.indexOf(e[o][0])>-1)&&e[o][1]!=null){var p=e[o][1],m=0;if(t){m=+t[e[o][0]];var x=r[m];if(x.p=="version"&&typeof p=="string"){var y=p.split(".");p=(+y[0]<<16)+(+y[1]||0)}l=jee(x.t,p)}else{var b=Cvt(p);b==-1&&(b=31,p=String(p)),l=jee(b,p)}a.push(l),c=pt(8),c.write_shift(4,t?m:2+o),i.push(c),s+=8+l.length}var S=8*(a.length+1);for(o=0;o<a.length;++o)i[o].write_shift(4,S),S+=a[o].length;return n.write_shift(4,s),n.write_shift(4,a.length),vs([n].concat(i).concat(a))}function Fee(e,t,r){var n=e.content;if(!n)return{};Ls(n,0);var i,a,s,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var c=n.read_shift(4),d=n.read_shift(16);if(d!==yr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(i=n.read_shift(4),i!==1&&i!==2)throw new Error("Unrecognized #Sets: "+i);if(a=n.read_shift(16),o=n.read_shift(4),i===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);i===2&&(s=n.read_shift(16),l=n.read_shift(4));var f=Dee(n,t),p={SystemIdentifier:c};for(var m in f)p[m]=f[m];if(p.FMTID=a,i===1)return p;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var x;try{x=Dee(n,null)}catch{}for(m in x)p[m]=x[m];return p.FMTID=[a,s],p}function Lee(e,t,r,n,i,a){var s=pt(i?68:48),o=[s];s.write_shift(2,65534),s.write_shift(2,0),s.write_shift(4,842412599),s.write_shift(16,yr.utils.consts.HEADER_CLSID,"hex"),s.write_shift(4,i?2:1),s.write_shift(16,t,"hex"),s.write_shift(4,i?68:48);var l=Mee(e,r,n);if(o.push(l),i){var c=Mee(i,null,null);s.write_shift(16,a,"hex"),s.write_shift(4,68+l.length),o.push(c)}return vs(o)}function Fp(e,t){return e.read_shift(t),null}function kvt(e,t){t||(t=pt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function _vt(e,t,r){for(var n=[],i=e.l+t;e.l<i;)n.push(r(e,i-e.l));if(i!==e.l)throw new Error("Slurp error");return n}function va(e,t){return e.read_shift(t)===1}function zo(e,t){return t||(t=pt(2)),t.write_shift(2,+!!e),t}function Oa(e){return e.read_shift(2,"u")}function Gc(e,t){return t||(t=pt(2)),t.write_shift(2,e),t}function V1e(e,t){return _vt(e,t,Oa)}function Nvt(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function q1e(e,t,r){return r||(r=pt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function QC(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),i="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var a=e.read_shift(1);a&&(i="dbcs-cont")}else r.biff==12&&(i="wstr");r.biff>=2&&r.biff<=5&&(i="cpstr");var s=n?e.read_shift(n,i):"";return s}function Avt(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,i=r&8,a=1+(r&1),s=0,o,l={};i&&(s=e.read_shift(2)),n&&(o=e.read_shift(4));var c=a==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,c);return i&&(e.l+=4*s),n&&(e.l+=o),l.t=d,i||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function Tvt(e){var t=e.t||"",r=pt(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=pt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var i=[r,n];return vs(i)}function Tx(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var i=e.read_shift(1);return i===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function JC(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):Tx(e,n,r)}function p1(e,t,r){if(r.biff>5)return JC(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function G1e(e,t,r){return r||(r=pt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function Ivt(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function Ovt(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var i=e.read_shift((n?t-24:t)>>1,"utf16le").replace(Xo,"");return n&&(e.l+=24),i}function Pvt(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var i=e.read_shift(4);if(i===0)return r+n.replace(/\\/g,"/");var a=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var s=e.read_shift(a>>1,"utf16le").replace(Xo,"");return r+s}function Rvt(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Ovt(e);case"0303000000000000c000000000000046":return Pvt(e);default:throw new Error("Unsupported Moniker "+r)}}function NN(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Xo,""):"";return r}function Bee(e,t){t||(t=pt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function jvt(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var i=e.read_shift(2);e.l+=2;var a,s,o,l,c="",d,f;i&16&&(a=NN(e,r-e.l)),i&128&&(s=NN(e,r-e.l)),(i&257)===257&&(o=NN(e,r-e.l)),(i&257)===1&&(l=Rvt(e,r-e.l)),i&8&&(c=NN(e,r-e.l)),i&32&&(d=e.read_shift(16)),i&64&&(f=iz(e)),e.l=r;var p=s||o||l||"";p&&c&&(p+="#"+c),p||(p="#"+c),i&2&&p.charAt(0)=="/"&&p.charAt(1)!="/"&&(p="file://"+p);var m={Target:p};return d&&(m.guid=d),f&&(m.time=f),a&&(m.Tooltip=a),m}function Dvt(e){var t=pt(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var i=n.indexOf("#"),a=i>-1?31:23;switch(n.charAt(0)){case"#":a=28;break;case".":a&=-3;break}t.write_shift(4,2),t.write_shift(4,a);var s=[8,6815827,6619237,4849780,83];for(r=0;r<s.length;++r)t.write_shift(4,s[r]);if(a==28)n=n.slice(1),Bee(n,t);else if(a&2){for(s="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<s.length;++r)t.write_shift(1,parseInt(s[r],16));var o=i>-1?n.slice(0,i):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),a&8&&Bee(i>-1?n.slice(i+1):"",t)}else{for(s="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<s.length;++r)t.write_shift(1,parseInt(s[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(t.write_shift(2,l),t.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)t.write_shift(1,n.charCodeAt(r+3*l)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function K1e(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),i=e.read_shift(1);return[t,r,n,i]}function X1e(e,t){var r=K1e(e);return r[3]=0,r}function If(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function Ix(e,t,r,n){return n||(n=pt(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function Mvt(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function Fvt(e,t,r){return t===0?"":p1(e,t,r)}function Lvt(e,t,r){var n=r.biff>8?4:2,i=e.read_shift(n),a=e.read_shift(n,"i"),s=e.read_shift(n,"i");return[i,a,s]}function Y1e(e){var t=e.read_shift(2),r=tz(e);return[t,r]}function Bvt(e,t,r){e.l+=4,t-=4;var n=e.l+t,i=QC(e,t,r),a=e.read_shift(2);if(n-=e.l,a!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+a);return e.l+=a,i}function FP(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(2);return{s:{c:n,r:t},e:{c:i,r}}}function Q1e(e,t){return t||(t=pt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function J1e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),i=e.read_shift(1);return{s:{c:n,r:t},e:{c:i,r}}}var Uvt=J1e;function Z1e(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function $vt(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function zvt(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function to(e){e.l+=2,e.l+=e.read_shift(2)}var Hvt={0:to,4:to,5:to,6:to,7:zvt,8:to,9:to,10:to,11:to,12:to,13:$vt,14:to,15:to,16:to,17:to,18:to,19:to,20:to,21:Z1e};function Wvt(e,t){for(var r=e.l+t,n=[];e.l<r;){var i=e.read_shift(2);e.l-=2;try{n.push(Hvt[i](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function AN(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function az(e,t,r){var n=1536,i=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,i=8;break;case"biff4":n=4,i=6;break;case"biff3":n=3,i=6;break;case"biff2":n=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=pt(i);return a.write_shift(2,n),a.write_shift(2,t),i>4&&a.write_shift(2,29282),i>6&&a.write_shift(2,1997),i>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function Vvt(e,t){return t===0||e.read_shift(2),1200}function qvt(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,i=p1(e,0,r);return e.read_shift(t+n-e.l),i}function Gvt(e,t){var r=!t||t.biff==8,n=pt(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function Kvt(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function Xvt(e,t,r){var n=e.read_shift(4),i=e.read_shift(1)&3,a=e.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var s=QC(e,0,r);return s.length===0&&(s="Sheet1"),{pos:n,hs:i,dt:a,name:s}}function Yvt(e,t){var r=!t||t.biff>=8?2:1,n=pt(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var i=n.slice(0,n.l);return i.l=n.l,i}function Qvt(e,t){for(var r=e.l+t,n=e.read_shift(4),i=e.read_shift(4),a=[],s=0;s!=i&&e.l<r;++s)a.push(Avt(e));return a.Count=n,a.Unique=i,a}function Jvt(e,t){var r=pt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],i=0;i<e.length;++i)n[i]=Tvt(e[i]);var a=vs([r].concat(n));return a.parts=[r.length].concat(n.map(function(s){return s.length})),a}function Zvt(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function eyt(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function tyt(e){var t=Mvt(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function ryt(e){return e.read_shift(2),e.read_shift(4)}function Uee(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var i=e.read_shift(2);r&&r.biff==2&&(n=1-(i>>15),i&=32767);var a={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[a,i]}function nyt(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2);return{Pos:[t,r],Dim:[n,i],Flags:a,CurTab:s,FirstTab:o,Selected:l,TabRatio:c}}function iyt(){var e=pt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function ayt(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function syt(e){var t=pt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function oyt(){}function lyt(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=QC(e,0,r),n}function cyt(e,t){var r=e.name||"Arial",n=t&&t.biff==5,i=n?15+r.length:16+2*r.length,a=pt(i);return a.write_shift(2,e.sz*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,r.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),a}function uyt(e){var t=If(e);return t.isst=e.read_shift(4),t}function dyt(e,t,r,n){var i=pt(10);return Ix(e,t,n,i),i.write_shift(4,r),i}function fyt(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,i=If(e);r.biff==2&&e.l++;var a=JC(e,n-e.l,r);return i.val=a,i}function hyt(e,t,r,n,i){var a=!i||i.biff==8,s=pt(8+ +a+(1+a)*r.length);return Ix(e,t,n,s),s.write_shift(2,r.length),a&&s.write_shift(1,1),s.write_shift((1+a)*r.length,r,a?"utf16le":"sbcs"),s}function pyt(e,t,r){var n=e.read_shift(2),i=p1(e,0,r);return[n,i]}function myt(e,t,r,n){var i=r&&r.biff==5;n||(n=pt(i?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(i?1:2,t.length),i||n.write_shift(1,1),n.write_shift((i?1:2)*t.length,t,i?"sbcs":"utf16le");var a=n.length>n.l?n.slice(0,n.l):n;return a.l==null&&(a.l=a.length),a}var gyt=p1;function $ee(e,t,r){var n=e.l+t,i=r.biff==8||!r.biff?4:2,a=e.read_shift(i),s=e.read_shift(i),o=e.read_shift(2),l=e.read_shift(2);return e.l=n,{s:{r:a,c:o},e:{r:s,c:l}}}function xyt(e,t){var r=t.biff==8||!t.biff?4:2,n=pt(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function vyt(e){var t=e.read_shift(2),r=e.read_shift(2),n=Y1e(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function yyt(e,t){for(var r=e.l+t-2,n=e.read_shift(2),i=e.read_shift(2),a=[];e.l<r;)a.push(Y1e(e));if(e.l!==r)throw new Error("MulRK read error");var s=e.read_shift(2);if(a.length!=s-i+1)throw new Error("MulRK length mismatch");return{r:n,c:i,C:s,rkrec:a}}function byt(e,t){for(var r=e.l+t-2,n=e.read_shift(2),i=e.read_shift(2),a=[];e.l<r;)a.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var s=e.read_shift(2);if(a.length!=s-i+1)throw new Error("MulBlank length mismatch");return{r:n,c:i,C:s,ixfe:a}}function wyt(e,t,r,n){var i={},a=e.read_shift(4),s=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(2);return i.patternType=tvt[o>>26],n.cellStyles&&(i.alc=a&7,i.fWrap=a>>3&1,i.alcV=a>>4&7,i.fJustLast=a>>7&1,i.trot=a>>8&255,i.cIndent=a>>16&15,i.fShrinkToFit=a>>20&1,i.iReadOrder=a>>22&2,i.fAtrNum=a>>26&1,i.fAtrFnt=a>>27&1,i.fAtrAlc=a>>28&1,i.fAtrBdr=a>>29&1,i.fAtrPat=a>>30&1,i.fAtrProt=a>>31&1,i.dgLeft=s&15,i.dgRight=s>>4&15,i.dgTop=s>>8&15,i.dgBottom=s>>12&15,i.icvLeft=s>>16&127,i.icvRight=s>>23&127,i.grbitDiag=s>>30&3,i.icvTop=o&127,i.icvBottom=o>>7&127,i.icvDiag=o>>14&127,i.dgDiag=o>>21&15,i.icvFore=l&127,i.icvBack=l>>7&127,i.fsxButton=l>>14&1),i}function Syt(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=wyt(e,t,n.fStyle,r),n}function zee(e,t,r,n){var i=r&&r.biff==5;n||(n=pt(i?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var a=0;return e.numFmtId>0&&i&&(a|=1024),n.write_shift(4,a),n.write_shift(4,0),i||n.write_shift(4,0),n.write_shift(2,0),n}function Eyt(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function Cyt(e){var t=pt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function Hee(e,t,r){var n=If(e);(r.biff==2||t==9)&&++e.l;var i=Nvt(e);return n.val=i,n.t=i===!0||i===!1?"b":"e",n}function kyt(e,t,r,n,i,a){var s=pt(8);return Ix(e,t,n,s),q1e(r,a,s),s}function _yt(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=If(e),i=go(e);return n.val=i,n}function Nyt(e,t,r,n){var i=pt(14);return Ix(e,t,n,i),Ax(r,i),i}var Wee=Fvt;function Ayt(e,t,r){var n=e.l+t,i=e.read_shift(2),a=e.read_shift(2);if(r.sbcch=a,a==1025||a==14849)return[a,i];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var s=Tx(e,a),o=[];n>e.l;)o.push(JC(e));return[a,i,s,o]}function Vee(e,t,r){var n=e.read_shift(2),i,a={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(i=Bvt(e,t-2,r)),a.body=i||e.read_shift(t-2),typeof i=="string"&&(a.Name=i),a}var Tyt=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function qee(e,t,r){var n=e.l+t,i=e.read_shift(2),a=e.read_shift(1),s=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),l=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var c=Tx(e,s,r);i&32&&(c=Tyt[c.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||o===0||!(d>0)?[]:WSt(e,d,r,o);return{chKey:a,Name:c,itab:l,rgce:f}}function eve(e,t,r){if(r.biff<8)return Iyt(e,t,r);for(var n=[],i=e.l+t,a=e.read_shift(r.biff>8?4:2);a--!==0;)n.push(Lvt(e,r.biff>8?12:6,r));if(e.l!=i)throw new Error("Bad ExternSheet: "+e.l+" != "+i);return n}function Iyt(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=QC(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function Oyt(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),i=e.read_shift(2),a=Tx(e,n,r),s=Tx(e,i,r);return[a,s]}function Pyt(e,t,r){var n=J1e(e);e.l++;var i=e.read_shift(1);return t-=8,[VSt(e,t,r),i,n]}function Gee(e,t,r){var n=Uvt(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,zSt(e,t,r)]}function Ryt(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function jyt(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),i=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),o=p1(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:i},o,s,a]}}function Dyt(e,t,r){return jyt(e,t,r)}function Myt(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(FP(e));return r}function Fyt(e){var t=pt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)Q1e(e[r],t);return t}function Lyt(e,t,r){if(r&&r.biff<8)return Uyt(e,t,r);var n=Z1e(e),i=Wvt(e,t-22,n[1]);return{cmo:n,ft:i}}var Byt={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var i=e.read_shift(1);return e.l+=i,e.l=r,{fmt:n}}};function Uyt(e,t,r){e.l+=4;var n=e.read_shift(2),i=e.read_shift(2),a=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var s=[];return s.push((Byt[n]||Eo)(e,t,r)),{cmo:[i,n,a],ft:s}}function $yt(e,t,r){var n=e.l,i="";try{e.l+=4;var a=(r.lastobj||{cmo:[0,0]}).cmo[1],s;[0,5,7,11,12,14].indexOf(a)==-1?e.l+=6:s=Ivt(e,6,r);var o=e.read_shift(2);e.read_shift(2),Oa(e,2);var l=e.read_shift(2);e.l+=l;for(var c=1;c<e.lens.length-1;++c){if(e.l-n!=e.lens[c])throw new Error("TxO: bad continue record");var d=e[e.l],f=Tx(e,e.lens[c+1]-e.lens[c]-1);if(i+=f,i.length>=(d?o:2*o))break}if(i.length!==o&&i.length!==o*2)throw new Error("cchText: "+o+" != "+i.length);return e.l=n+t,{t:i}}catch{return e.l=n+t,{t:i}}}function zyt(e,t){var r=FP(e);e.l+=16;var n=jvt(e,t-24);return[r,n]}function Hyt(e){var t=pt(24),r=Gi(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)t.write_shift(1,parseInt(n[i],16));return vs([t,Dvt(e[1])])}function Wyt(e,t){e.read_shift(2);var r=FP(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(Xo,""),[r,n]}function Vyt(e){var t=e[1].Tooltip,r=pt(10+2*(t.length+1));r.write_shift(2,2048);var n=Gi(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var i=0;i<t.length;++i)r.write_shift(2,t.charCodeAt(i));return r.write_shift(2,0),r}function qyt(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=Oee[r]||r,r=e.read_shift(2),t[1]=Oee[r]||r,t}function Gyt(e){return e||(e=pt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function Kyt(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(X1e(e));return r}function Xyt(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(X1e(e));return r}function Yyt(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function tve(e,t,r){if(!r.cellStyles)return Eo(e,t);var n=r&&r.biff>=12?4:2,i=e.read_shift(n),a=e.read_shift(n),s=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(2);n==2&&(e.l+=2);var c={s:i,e:a,w:s,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}function Qyt(e,t){var r=pt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function Jyt(e,t){var r={};return t<32||(e.l+=16,r.header=go(e),r.footer=go(e),e.l+=2),r}function Zyt(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var i=e.read_shift(1);return e.l+=3,i&16&&(n.area=!0),n}function ebt(e){for(var t=pt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var tbt=If,rbt=V1e,nbt=JC;function ibt(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),i={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,i}function abt(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=If(e);++e.l;var i=p1(e,t-7,r);return n.t="str",n.val=i,n}function sbt(e){var t=If(e);++e.l;var r=go(e);return t.t="n",t.val=r,t}function obt(e,t,r){var n=pt(15);return rk(n,e,t),n.write_shift(8,r,"f"),n}function lbt(e){var t=If(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function cbt(e,t,r){var n=pt(9);return rk(n,e,t),n.write_shift(2,r),n}function ubt(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function dbt(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function fbt(e,t,r){var n=e.l+t,i=If(e),a=e.read_shift(2),s=Tx(e,a,r);return e.l=n,i.t="str",i.val=s,i}var hbt=[2,3,48,49,131,139,140,245],B5=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=jP({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var c=[],d=q0(1);switch(l.type){case"base64":d=rc(xc(o));break;case"binary":d=rc(o);break;case"buffer":case"array":d=o;break}Ls(d,0);var f=d.read_shift(1),p=!!(f&136),m=!1,x=!1;switch(f){case 2:break;case 3:break;case 48:m=!0,p=!0;break;case 49:m=!0,p=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var y=0,b=521;f==2&&(y=d.read_shift(2)),d.l+=3,f!=2&&(y=d.read_shift(4)),y>1048576&&(y=1e6),f!=2&&(b=d.read_shift(2));var S=d.read_shift(2),_=l.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(_=e[d[d.l]]),d.l+=1,d.l+=2),x&&(d.l+=36);for(var C=[],A={},j=Math.min(d.length,f==2?521:b-10-(m?264:0)),P=x?32:11;d.l<j&&d[d.l]!=13;)switch(A={},A.name=sE.utils.decode(_,d.slice(d.l,d.l+P)).replace(/[\u0000\r\n].*$/g,""),d.l+=P,A.type=String.fromCharCode(d.read_shift(1)),f!=2&&!x&&(A.offset=d.read_shift(4)),A.len=d.read_shift(1),f==2&&(A.offset=d.read_shift(2)),A.dec=d.read_shift(1),A.name.length&&C.push(A),f!=2&&(d.l+=x?13:14),A.type){case"B":(!m||A.len!=8)&&l.WTF&&console.log("Skipping "+A.name+":"+A.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+A.name+":"+A.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+A.type)}if(d[d.l]!==13&&(d.l=b-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=b;var O=0,D=0;for(c[0]=[],D=0;D!=C.length;++D)c[0][D]=C[D].name;for(;y-- >0;){if(d[d.l]===42){d.l+=S;continue}for(++d.l,c[++O]=[],D=0,D=0;D!=C.length;++D){var L=d.slice(d.l,d.l+C[D].len);d.l+=C[D].len,Ls(L,0);var B=sE.utils.decode(_,L);switch(C[D].type){case"C":B.trim().length&&(c[O][D]=B.replace(/\s+$/,""));break;case"D":B.length===8?c[O][D]=new Date(+B.slice(0,4),+B.slice(4,6)-1,+B.slice(6,8)):c[O][D]=B;break;case"F":c[O][D]=parseFloat(B.trim());break;case"+":case"I":c[O][D]=x?L.read_shift(-4,"i")^2147483648:L.read_shift(4,"i");break;case"L":switch(B.trim().toUpperCase()){case"Y":case"T":c[O][D]=!0;break;case"N":case"F":c[O][D]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+B+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));c[O][D]="##MEMO##"+(x?parseInt(B.trim(),10):L.read_shift(4));break;case"N":B=B.replace(/\u0000/g,"").trim(),B&&B!="."&&(c[O][D]=+B||0);break;case"@":c[O][D]=new Date(L.read_shift(-8,"f")-621356832e5);break;case"T":c[O][D]=new Date((L.read_shift(4)-2440588)*864e5+L.read_shift(4));break;case"Y":c[O][D]=L.read_shift(4,"i")/1e4+L.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[O][D]=-L.read_shift(-8,"f");break;case"B":if(m&&C[D].len==8){c[O][D]=L.read_shift(8,"f");break}case"G":case"P":L.l+=C[D].len;break;case"0":if(C[D].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+C[D].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=C,c}function n(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var d=Ub(r(o,c),c);return d["!cols"]=c.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete c.DBF,d}function i(o,l){try{return mm(n(o,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function s(o,l){var c=l||{};if(+c.codepage>=0&&nd(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var d=Ol(),f=IO(o,{header:1,raw:!0,cellDates:!0}),p=f[0],m=f.slice(1),x=o["!cols"]||[],y=0,b=0,S=0,_=1;for(y=0;y<p.length;++y){if(((x[y]||{}).DBF||{}).name){p[y]=x[y].DBF.name,++S;continue}if(p[y]!=null){if(++S,typeof p[y]=="number"&&(p[y]=p[y].toString(10)),typeof p[y]!="string")throw new Error("DBF Invalid column name "+p[y]+" |"+typeof p[y]+"|");if(p.indexOf(p[y])!==y){for(b=0;b<1024;++b)if(p.indexOf(p[y]+"_"+b)==-1){p[y]+="_"+b;break}}}}var C=Mn(o["!ref"]),A=[],j=[],P=[];for(y=0;y<=C.e.c-C.s.c;++y){var O="",D="",L=0,B=[];for(b=0;b<m.length;++b)m[b][y]!=null&&B.push(m[b][y]);if(B.length==0||p[y]==null){A[y]="?";continue}for(b=0;b<B.length;++b){switch(typeof B[b]){case"number":D="B";break;case"string":D="C";break;case"boolean":D="L";break;case"object":D=B[b]instanceof Date?"D":"C";break;default:D="C"}L=Math.max(L,String(B[b]).length),O=O&&O!=D?"C":D}L>250&&(L=250),D=((x[y]||{}).DBF||{}).type,D=="C"&&x[y].DBF.len>L&&(L=x[y].DBF.len),O=="B"&&D=="N"&&(O="N",P[y]=x[y].DBF.dec,L=x[y].DBF.len),j[y]=O=="C"||D=="N"?L:a[O]||0,_+=j[y],A[y]=O}var H=d.next(32);for(H.write_shift(4,318902576),H.write_shift(4,m.length),H.write_shift(2,296+32*S),H.write_shift(2,_),y=0;y<4;++y)H.write_shift(4,0);for(H.write_shift(4,0|(+t[Wxe]||3)<<8),y=0,b=0;y<p.length;++y)if(p[y]!=null){var z=d.next(32),ie=(p[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);z.write_shift(1,ie,"sbcs"),z.write_shift(1,A[y]=="?"?"C":A[y],"sbcs"),z.write_shift(4,b),z.write_shift(1,j[y]||a[A[y]]||0),z.write_shift(1,P[y]||0),z.write_shift(1,2),z.write_shift(4,0),z.write_shift(1,0),z.write_shift(4,0),z.write_shift(4,0),b+=j[y]||a[A[y]]||0}var X=d.next(264);for(X.write_shift(4,13),y=0;y<65;++y)X.write_shift(4,0);for(y=0;y<m.length;++y){var W=d.next(_);for(W.write_shift(1,0),b=0;b<p.length;++b)if(p[b]!=null)switch(A[b]){case"L":W.write_shift(1,m[y][b]==null?63:m[y][b]?84:70);break;case"B":W.write_shift(8,m[y][b]||0,"f");break;case"N":var Q="0";for(typeof m[y][b]=="number"&&(Q=m[y][b].toFixed(P[b]||0)),S=0;S<j[b]-Q.length;++S)W.write_shift(1,32);W.write_shift(1,Q,"sbcs");break;case"D":m[y][b]?(W.write_shift(4,("0000"+m[y][b].getFullYear()).slice(-4),"sbcs"),W.write_shift(2,("00"+(m[y][b].getMonth()+1)).slice(-2),"sbcs"),W.write_shift(2,("00"+m[y][b].getDate()).slice(-2),"sbcs")):W.write_shift(8,"00000000","sbcs");break;case"C":var te=String(m[y][b]!=null?m[y][b]:"").slice(0,j[b]);for(W.write_shift(1,te,"sbcs"),S=0;S<j[b]-te.length;++S)W.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:i,to_sheet:n,from_sheet:s}}(),rve=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+da(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(p,m){var x=e[m];return typeof x=="number"?iee(x):x},n=function(p,m,x){var y=m.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return y==59?p:iee(y)};e["|"]=254;function i(p,m){switch(m.type){case"base64":return a(xc(p),m);case"binary":return a(p,m);case"buffer":return a(xn&&Buffer.isBuffer(p)?p.toString("binary"):pm(p),m);case"array":return a(Nx(p),m)}throw new Error("Unrecognized type "+m.type)}function a(p,m){var x=p.split(/[\n\r]+/),y=-1,b=-1,S=0,_=0,C=[],A=[],j=null,P={},O=[],D=[],L=[],B=0,H;for(+m.codepage>=0&&nd(+m.codepage);S!==x.length;++S){B=0;var z=x[S].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),ie=z.replace(/;;/g,"\0").split(";").map(function(q){return q.replace(/\u0000/g,";")}),X=ie[0],W;if(z.length>0)switch(X){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":ie[1].charAt(0)=="P"&&A.push(z.slice(3).replace(/;;/g,";"));break;case"C":var Q=!1,te=!1,J=!1,Y=!1,pe=-1,_e=-1;for(_=1;_<ie.length;++_)switch(ie[_].charAt(0)){case"A":break;case"X":b=parseInt(ie[_].slice(1))-1,te=!0;break;case"Y":for(y=parseInt(ie[_].slice(1))-1,te||(b=0),H=C.length;H<=y;++H)C[H]=[];break;case"K":W=ie[_].slice(1),W.charAt(0)==='"'?W=W.slice(1,W.length-1):W==="TRUE"?W=!0:W==="FALSE"?W=!1:isNaN(cd(W))?isNaN(Yy(W).getDate())||(W=Oi(W)):(W=cd(W),j!==null&&Lb(j)&&(W=MP(W))),Q=!0;break;case"E":Y=!0;var ee=Vv(ie[_].slice(1),{r:y,c:b});C[y][b]=[C[y][b],ee];break;case"S":J=!0,C[y][b]=[C[y][b],"S5S"];break;case"G":break;case"R":pe=parseInt(ie[_].slice(1))-1;break;case"C":_e=parseInt(ie[_].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+z)}if(Q&&(C[y][b]&&C[y][b].length==2?C[y][b][0]=W:C[y][b]=W,j=null),J){if(Y)throw new Error("SYLK shared formula cannot have own formula");var de=pe>-1&&C[pe][_e];if(!de||!de[1])throw new Error("SYLK shared formula cannot find base");C[y][b][1]=bve(de[1],{r:y-pe,c:b-_e})}break;case"F":var G=0;for(_=1;_<ie.length;++_)switch(ie[_].charAt(0)){case"X":b=parseInt(ie[_].slice(1))-1,++G;break;case"Y":for(y=parseInt(ie[_].slice(1))-1,H=C.length;H<=y;++H)C[H]=[];break;case"M":B=parseInt(ie[_].slice(1))/20;break;case"F":break;case"G":break;case"P":j=A[parseInt(ie[_].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(L=ie[_].slice(1).split(" "),H=parseInt(L[0],10);H<=parseInt(L[1],10);++H)B=parseInt(L[2],10),D[H-1]=B===0?{hidden:!0}:{wch:B},G0(D[H-1]);break;case"C":b=parseInt(ie[_].slice(1))-1,D[b]||(D[b]={});break;case"R":y=parseInt(ie[_].slice(1))-1,O[y]||(O[y]={}),B>0?(O[y].hpt=B,O[y].hpx=Jy(B)):B===0&&(O[y].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+z)}G<1&&(j=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+z)}}return O.length>0&&(P["!rows"]=O),D.length>0&&(P["!cols"]=D),m&&m.sheetRows&&(C=C.slice(0,m.sheetRows)),[C,P]}function s(p,m){var x=i(p,m),y=x[0],b=x[1],S=Ub(y,m);return da(b).forEach(function(_){S[_]=b[_]}),S}function o(p,m){return mm(s(p,m),m)}function l(p,m,x,y){var b="C;Y"+(x+1)+";X"+(y+1)+";K";switch(p.t){case"n":b+=p.v||0,p.f&&!p.F&&(b+=";E"+dz(p.f,{r:x,c:y}));break;case"b":b+=p.v?"TRUE":"FALSE";break;case"e":b+=p.w||p.v;break;case"d":b+='"'+(p.w||p.v)+'"';break;case"s":b+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function c(p,m){m.forEach(function(x,y){var b="F;W"+(y+1)+" "+(y+1)+" ";x.hidden?b+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=pE(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=mE(x.wpx)),typeof x.wch=="number"&&(b+=Math.round(x.wch))),b.charAt(b.length-1)!=" "&&p.push(b)})}function d(p,m){m.forEach(function(x,y){var b="F;";x.hidden?b+="M0;":x.hpt?b+="M"+20*x.hpt+";":x.hpx&&(b+="M"+20*gE(x.hpx)+";"),b.length>2&&p.push(b+"R"+(y+1))})}function f(p,m){var x=["ID;PWXL;N;E"],y=[],b=Mn(p["!ref"]),S,_=Array.isArray(p),C=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),p["!cols"]&&c(x,p["!cols"]),p["!rows"]&&d(x,p["!rows"]),x.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var A=b.s.r;A<=b.e.r;++A)for(var j=b.s.c;j<=b.e.c;++j){var P=Dr({r:A,c:j});S=_?(p[A]||[])[j]:p[P],!(!S||S.v==null&&(!S.f||S.F))&&y.push(l(S,p,A,j))}return x.join(C)+C+y.join(C)+C+"E"+C}return{to_workbook:o,to_sheet:s,from_sheet:f}}(),nve=function(){function e(a,s){switch(s.type){case"base64":return t(xc(a),s);case"binary":return t(a,s);case"buffer":return t(xn&&Buffer.isBuffer(a)?a.toString("binary"):pm(a),s);case"array":return t(Nx(a),s)}throw new Error("Unrecognized type "+s.type)}function t(a,s){for(var o=a.split(`
`),l=-1,c=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++l]=[],c=0;continue}if(!(l<0)){var p=o[d].trim().split(","),m=p[0],x=p[1];++d;for(var y=o[d]||"";(y.match(/["]/g)||[]).length&1&&d<o.length-1;)y+=`
`+o[++d];switch(y=y.trim(),+m){case-1:if(y==="BOT"){f[++l]=[],c=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?f[l][c]=!0:y==="FALSE"?f[l][c]=!1:isNaN(cd(x))?isNaN(Yy(x).getDate())?f[l][c]=x:f[l][c]=Oi(x):f[l][c]=cd(x),++c;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),f[l][c++]=y!==""?y:null;break}if(y==="EOD")break}}return s&&s.sheetRows&&(f=f.slice(0,s.sheetRows)),f}function r(a,s){return Ub(e(a,s),s)}function n(a,s){return mm(r(a,s),s)}var i=function(){var a=function(l,c,d,f,p){l.push(c),l.push(d+","+f),l.push('"'+p.replace(/"/g,'""')+'"')},s=function(l,c,d,f){l.push(c+","+d),l.push(c==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(l){var c=[],d=Mn(l["!ref"]),f,p=Array.isArray(l);a(c,"TABLE",0,1,"sheetjs"),a(c,"VECTORS",0,d.e.r-d.s.r+1,""),a(c,"TUPLES",0,d.e.c-d.s.c+1,""),a(c,"DATA",0,0,"");for(var m=d.s.r;m<=d.e.r;++m){s(c,-1,0,"BOT");for(var x=d.s.c;x<=d.e.c;++x){var y=Dr({r:m,c:x});if(f=p?(l[m]||[])[x]:l[y],!f){s(c,1,0,"");continue}switch(f.t){case"n":var b=f.w;!b&&f.v!=null&&(b=f.v),b==null?f.f&&!f.F?s(c,1,0,"="+f.f):s(c,1,0,""):s(c,0,b,"V");break;case"b":s(c,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":s(c,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=yu(f.z||Rr[14],Qa(Oi(f.v)))),s(c,0,f.w,"V");break;default:s(c,1,0,"")}}}s(c,-1,0,"EOD");var S=`\r
`,_=c.join(S);return _}}();return{to_workbook:n,to_sheet:r,from_sheet:i}}(),ive=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,p){for(var m=f.split(`
`),x=-1,y=-1,b=0,S=[];b!==m.length;++b){var _=m[b].trim().split(":");if(_[0]==="cell"){var C=Gi(_[1]);if(S.length<=C.r)for(x=S.length;x<=C.r;++x)S[x]||(S[x]=[]);switch(x=C.r,y=C.c,_[2]){case"t":S[x][y]=e(_[3]);break;case"v":S[x][y]=+_[3];break;case"vtf":var A=_[_.length-1];case"vtc":switch(_[3]){case"nl":S[x][y]=!!+_[4];break;default:S[x][y]=+_[4];break}_[2]=="vtf"&&(S[x][y]=[S[x][y],A])}}}return p&&p.sheetRows&&(S=S.slice(0,p.sheetRows)),S}function n(f,p){return Ub(r(f,p),p)}function i(f,p){return mm(n(f,p),p)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),s=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(f){if(!f||!f["!ref"])return"";for(var p=[],m=[],x,y="",b=Dl(f["!ref"]),S=Array.isArray(f),_=b.s.r;_<=b.e.r;++_)for(var C=b.s.c;C<=b.e.c;++C)if(y=Dr({r:_,c:C}),x=S?(f[_]||[])[C]:f[y],!(!x||x.v==null||x.t==="z")){switch(m=["cell",y,"t"],x.t){case"s":case"str":m.push(t(x.v));break;case"n":x.f?(m[2]="vtf",m[3]="n",m[4]=x.v,m[5]=t(x.f)):(m[2]="v",m[3]=x.v);break;case"b":m[2]="vt"+(x.f?"f":"c"),m[3]="nl",m[4]=x.v?"1":"0",m[5]=t(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var A=Qa(Oi(x.v));m[2]="vtc",m[3]="nd",m[4]=""+A,m[5]=x.w||yu(x.z||Rr[14],A);break;case"e":continue}p.push(m.join(":"))}return p.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function d(f){return[a,s,o,s,c(f),l].join(`
`)}return{to_workbook:i,to_sheet:n,from_sheet:d}}(),Qy=function(){function e(d,f,p,m,x){x.raw?f[p][m]=d:d===""||(d==="TRUE"?f[p][m]=!0:d==="FALSE"?f[p][m]=!1:isNaN(cd(d))?isNaN(Yy(d).getDate())?f[p][m]=d:f[p][m]=Oi(d):f[p][m]=cd(d))}function t(d,f){var p=f||{},m=[];if(!d||d.length===0)return m;for(var x=d.split(/[\r\n]/),y=x.length-1;y>=0&&x[y].length===0;)--y;for(var b=10,S=0,_=0;_<=y;++_)S=x[_].indexOf(" "),S==-1?S=x[_].length:S++,b=Math.max(b,S);for(_=0;_<=y;++_){m[_]=[];var C=0;for(e(x[_].slice(0,b).trim(),m,_,C,p),C=1;C<=(x[_].length-b)/10+1;++C)e(x[_].slice(b+(C-1)*10,b+C*10).trim(),m,_,C,p)}return p.sheetRows&&(m=m.slice(0,p.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function i(d){for(var f={},p=!1,m=0,x=0;m<d.length;++m)(x=d.charCodeAt(m))==34?p=!p:!p&&x in r&&(f[x]=(f[x]||0)+1);x=[];for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&x.push([f[m],m]);if(!x.length){f=n;for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&x.push([f[m],m])}return x.sort(function(y,b){return y[0]-b[0]||n[y[1]]-n[b[1]]}),r[x.pop()[1]]||44}function a(d,f){var p=f||{},m="",x=p.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(m=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(m=d.charAt(4),d=d.slice(6)):m=i(d.slice(0,1024)):p&&p.FS?m=p.FS:m=i(d.slice(0,1024));var b=0,S=0,_=0,C=0,A=0,j=m.charCodeAt(0),P=!1,O=0,D=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var L=p.dateNF!=null?Zxt(p.dateNF):null;function B(){var H=d.slice(C,A),z={};if(H.charAt(0)=='"'&&H.charAt(H.length-1)=='"'&&(H=H.slice(1,-1).replace(/""/g,'"')),H.length===0)z.t="z";else if(p.raw)z.t="s",z.v=H;else if(H.trim().length===0)z.t="s",z.v=H;else if(H.charCodeAt(0)==61)H.charCodeAt(1)==34&&H.charCodeAt(H.length-1)==34?(z.t="s",z.v=H.slice(2,-1).replace(/""/g,'"')):A2t(H)?(z.t="n",z.f=H.slice(1)):(z.t="s",z.v=H);else if(H=="TRUE")z.t="b",z.v=!0;else if(H=="FALSE")z.t="b",z.v=!1;else if(!isNaN(_=cd(H)))z.t="n",p.cellText!==!1&&(z.w=H),z.v=_;else if(!isNaN(Yy(H).getDate())||L&&H.match(L)){z.z=p.dateNF||Rr[14];var ie=0;L&&H.match(L)&&(H=e1t(H,p.dateNF,H.match(L)||[]),ie=1),p.cellDates?(z.t="d",z.v=Oi(H,ie)):(z.t="n",z.v=Qa(Oi(H,ie))),p.cellText!==!1&&(z.w=yu(z.z,z.v instanceof Date?Qa(z.v):z.v)),p.cellNF||delete z.z}else z.t="s",z.v=H;if(z.t=="z"||(p.dense?(x[b]||(x[b]=[]),x[b][S]=z):x[Dr({c:S,r:b})]=z),C=A+1,D=d.charCodeAt(C),y.e.c<S&&(y.e.c=S),y.e.r<b&&(y.e.r=b),O==j)++S;else if(S=0,++b,p.sheetRows&&p.sheetRows<=b)return!0}e:for(;A<d.length;++A)switch(O=d.charCodeAt(A)){case 34:D===34&&(P=!P);break;case j:case 10:case 13:if(!P&&B())break e;break}return A-C>0&&B(),x["!ref"]=en(y),x}function s(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?a(d,f):Ub(t(d,f),f)}function o(d,f){var p="",m=f.type=="string"?[0,0,0,0]:yz(d,f);switch(f.type){case"base64":p=xc(d);break;case"binary":p=d;break;case"buffer":f.codepage==65001?p=d.toString("utf8"):f.codepage&&typeof sE<"u"||(p=xn&&Buffer.isBuffer(d)?d.toString("binary"):pm(d));break;case"array":p=Nx(d);break;case"string":p=d;break;default:throw new Error("Unrecognized type "+f.type)}return m[0]==239&&m[1]==187&&m[2]==191?p=di(p.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?p=di(p):f.type=="binary"&&typeof sE<"u",p.slice(0,19)=="socialcalc:version:"?ive.to_sheet(f.type=="string"?p:di(p),f):s(p,f)}function l(d,f){return mm(o(d,f),f)}function c(d){for(var f=[],p=Mn(d["!ref"]),m,x=Array.isArray(d),y=p.s.r;y<=p.e.r;++y){for(var b=[],S=p.s.c;S<=p.e.c;++S){var _=Dr({r:y,c:S});if(m=x?(d[y]||[])[S]:d[_],!m||m.v==null){b.push("          ");continue}for(var C=(m.w||(tp(m),m.w)||"").slice(0,10);C.length<10;)C+=" ";b.push(C+(S===0?" ":""))}f.push(b.join(""))}return f.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}}();function pbt(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var i=rve.to_workbook(e,r);return r.WTF=n,i}catch(a){if(r.WTF=n,!a.message.match(/SYLK bad record ID/)&&n)throw a;return Qy.to_workbook(e,t)}}var Xg=function(){function e(ee,de,G){if(ee){Ls(ee,ee.l||0);for(var q=G.Enum||pe;ee.l<ee.length;){var ne=ee.read_shift(2),Se=q[ne]||q[65535],re=ee.read_shift(2),ae=ee.l+re,ge=Se.f&&Se.f(ee,re,G);if(ee.l=ae,de(ge,Se,ne))return}}}function t(ee,de){switch(de.type){case"base64":return r(rc(xc(ee)),de);case"binary":return r(rc(ee),de);case"buffer":case"array":return r(ee,de)}throw"Unsupported type "+de.type}function r(ee,de){if(!ee)return ee;var G=de||{},q=G.dense?[]:{},ne="Sheet1",Se="",re=0,ae={},ge=[],Ee=[],V={s:{r:0,c:0},e:{r:0,c:0}},Ae=G.sheetRows||0;if(ee[2]==0&&(ee[3]==8||ee[3]==9)&&ee.length>=16&&ee[14]==5&&ee[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(ee[2]==2)G.Enum=pe,e(ee,function($e,et,ut){switch(ut){case 0:G.vers=$e,$e>=4096&&(G.qpro=!0);break;case 6:V=$e;break;case 204:$e&&(Se=$e);break;case 222:Se=$e;break;case 15:case 51:G.qpro||($e[1].v=$e[1].v.slice(1));case 13:case 14:case 16:ut==14&&($e[2]&112)==112&&($e[2]&15)>1&&($e[2]&15)<15&&($e[1].z=G.dateNF||Rr[14],G.cellDates&&($e[1].t="d",$e[1].v=MP($e[1].v))),G.qpro&&$e[3]>re&&(q["!ref"]=en(V),ae[ne]=q,ge.push(ne),q=G.dense?[]:{},V={s:{r:0,c:0},e:{r:0,c:0}},re=$e[3],ne=Se||"Sheet"+(re+1),Se="");var kt=G.dense?(q[$e[0].r]||[])[$e[0].c]:q[Dr($e[0])];if(kt){kt.t=$e[1].t,kt.v=$e[1].v,$e[1].z!=null&&(kt.z=$e[1].z),$e[1].f!=null&&(kt.f=$e[1].f);break}G.dense?(q[$e[0].r]||(q[$e[0].r]=[]),q[$e[0].r][$e[0].c]=$e[1]):q[Dr($e[0])]=$e[1];break}},G);else if(ee[2]==26||ee[2]==14)G.Enum=_e,ee[2]==14&&(G.qpro=!0,ee.l=0),e(ee,function($e,et,ut){switch(ut){case 204:ne=$e;break;case 22:$e[1].v=$e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if($e[3]>re&&(q["!ref"]=en(V),ae[ne]=q,ge.push(ne),q=G.dense?[]:{},V={s:{r:0,c:0},e:{r:0,c:0}},re=$e[3],ne="Sheet"+(re+1)),Ae>0&&$e[0].r>=Ae)break;G.dense?(q[$e[0].r]||(q[$e[0].r]=[]),q[$e[0].r][$e[0].c]=$e[1]):q[Dr($e[0])]=$e[1],V.e.c<$e[0].c&&(V.e.c=$e[0].c),V.e.r<$e[0].r&&(V.e.r=$e[0].r);break;case 27:$e[14e3]&&(Ee[$e[14e3][0]]=$e[14e3][1]);break;case 1537:Ee[$e[0]]=$e[1],$e[0]==re&&(ne=$e[1]);break}},G);else throw new Error("Unrecognized LOTUS BOF "+ee[2]);if(q["!ref"]=en(V),ae[Se||ne]=q,ge.push(Se||ne),!Ee.length)return{SheetNames:ge,Sheets:ae};for(var Pe={},ze=[],De=0;De<Ee.length;++De)ae[ge[De]]?(ze.push(Ee[De]||ge[De]),Pe[Ee[De]]=ae[Ee[De]]||ae[ge[De]]):(ze.push(Ee[De]),Pe[Ee[De]]={"!ref":"A1"});return{SheetNames:ze,Sheets:Pe}}function n(ee,de){var G=de||{};if(+G.codepage>=0&&nd(+G.codepage),G.type=="string")throw new Error("Cannot write WK1 to JS string");var q=Ol(),ne=Mn(ee["!ref"]),Se=Array.isArray(ee),re=[];Bt(q,0,a(1030)),Bt(q,6,l(ne));for(var ae=Math.min(ne.e.r,8191),ge=ne.s.r;ge<=ae;++ge)for(var Ee=Sa(ge),V=ne.s.c;V<=ne.e.c;++V){ge===ne.s.r&&(re[V]=qi(V));var Ae=re[V]+Ee,Pe=Se?(ee[ge]||[])[V]:ee[Ae];if(!(!Pe||Pe.t=="z"))if(Pe.t=="n")(Pe.v|0)==Pe.v&&Pe.v>=-32768&&Pe.v<=32767?Bt(q,13,m(ge,V,Pe.v)):Bt(q,14,y(ge,V,Pe.v));else{var ze=tp(Pe);Bt(q,15,f(ge,V,ze.slice(0,239)))}}return Bt(q,1),q.end()}function i(ee,de){var G=de||{};if(+G.codepage>=0&&nd(+G.codepage),G.type=="string")throw new Error("Cannot write WK3 to JS string");var q=Ol();Bt(q,0,s(ee));for(var ne=0,Se=0;ne<ee.SheetNames.length;++ne)(ee.Sheets[ee.SheetNames[ne]]||{})["!ref"]&&Bt(q,27,Y(ee.SheetNames[ne],Se++));var re=0;for(ne=0;ne<ee.SheetNames.length;++ne){var ae=ee.Sheets[ee.SheetNames[ne]];if(!(!ae||!ae["!ref"])){for(var ge=Mn(ae["!ref"]),Ee=Array.isArray(ae),V=[],Ae=Math.min(ge.e.r,8191),Pe=ge.s.r;Pe<=Ae;++Pe)for(var ze=Sa(Pe),De=ge.s.c;De<=ge.e.c;++De){Pe===ge.s.r&&(V[De]=qi(De));var $e=V[De]+ze,et=Ee?(ae[Pe]||[])[De]:ae[$e];if(!(!et||et.t=="z"))if(et.t=="n")Bt(q,23,B(Pe,De,re,et.v));else{var ut=tp(et);Bt(q,22,O(Pe,De,re,ut.slice(0,239)))}}++re}}return Bt(q,1),q.end()}function a(ee){var de=pt(2);return de.write_shift(2,ee),de}function s(ee){var de=pt(26);de.write_shift(2,4096),de.write_shift(2,4),de.write_shift(4,0);for(var G=0,q=0,ne=0,Se=0;Se<ee.SheetNames.length;++Se){var re=ee.SheetNames[Se],ae=ee.Sheets[re];if(!(!ae||!ae["!ref"])){++ne;var ge=Dl(ae["!ref"]);G<ge.e.r&&(G=ge.e.r),q<ge.e.c&&(q=ge.e.c)}}return G>8191&&(G=8191),de.write_shift(2,G),de.write_shift(1,ne),de.write_shift(1,q),de.write_shift(2,0),de.write_shift(2,0),de.write_shift(1,1),de.write_shift(1,2),de.write_shift(4,0),de.write_shift(4,0),de}function o(ee,de,G){var q={s:{c:0,r:0},e:{c:0,r:0}};return de==8&&G.qpro?(q.s.c=ee.read_shift(1),ee.l++,q.s.r=ee.read_shift(2),q.e.c=ee.read_shift(1),ee.l++,q.e.r=ee.read_shift(2),q):(q.s.c=ee.read_shift(2),q.s.r=ee.read_shift(2),de==12&&G.qpro&&(ee.l+=2),q.e.c=ee.read_shift(2),q.e.r=ee.read_shift(2),de==12&&G.qpro&&(ee.l+=2),q.s.c==65535&&(q.s.c=q.e.c=q.s.r=q.e.r=0),q)}function l(ee){var de=pt(8);return de.write_shift(2,ee.s.c),de.write_shift(2,ee.s.r),de.write_shift(2,ee.e.c),de.write_shift(2,ee.e.r),de}function c(ee,de,G){var q=[{c:0,r:0},{t:"n",v:0},0,0];return G.qpro&&G.vers!=20768?(q[0].c=ee.read_shift(1),q[3]=ee.read_shift(1),q[0].r=ee.read_shift(2),ee.l+=2):(q[2]=ee.read_shift(1),q[0].c=ee.read_shift(2),q[0].r=ee.read_shift(2)),q}function d(ee,de,G){var q=ee.l+de,ne=c(ee,de,G);if(ne[1].t="s",G.vers==20768){ee.l++;var Se=ee.read_shift(1);return ne[1].v=ee.read_shift(Se,"utf8"),ne}return G.qpro&&ee.l++,ne[1].v=ee.read_shift(q-ee.l,"cstr"),ne}function f(ee,de,G){var q=pt(7+G.length);q.write_shift(1,255),q.write_shift(2,de),q.write_shift(2,ee),q.write_shift(1,39);for(var ne=0;ne<q.length;++ne){var Se=G.charCodeAt(ne);q.write_shift(1,Se>=128?95:Se)}return q.write_shift(1,0),q}function p(ee,de,G){var q=c(ee,de,G);return q[1].v=ee.read_shift(2,"i"),q}function m(ee,de,G){var q=pt(7);return q.write_shift(1,255),q.write_shift(2,de),q.write_shift(2,ee),q.write_shift(2,G,"i"),q}function x(ee,de,G){var q=c(ee,de,G);return q[1].v=ee.read_shift(8,"f"),q}function y(ee,de,G){var q=pt(13);return q.write_shift(1,255),q.write_shift(2,de),q.write_shift(2,ee),q.write_shift(8,G,"f"),q}function b(ee,de,G){var q=ee.l+de,ne=c(ee,de,G);if(ne[1].v=ee.read_shift(8,"f"),G.qpro)ee.l=q;else{var Se=ee.read_shift(2);A(ee.slice(ee.l,ee.l+Se),ne),ee.l+=Se}return ne}function S(ee,de,G){var q=de&32768;return de&=-32769,de=(q?ee:0)+(de>=8192?de-16384:de),(q?"":"$")+(G?qi(de):Sa(de))}var _={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},C=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function A(ee,de){Ls(ee,0);for(var G=[],q=0,ne="",Se="",re="",ae="";ee.l<ee.length;){var ge=ee[ee.l++];switch(ge){case 0:G.push(ee.read_shift(8,"f"));break;case 1:Se=S(de[0].c,ee.read_shift(2),!0),ne=S(de[0].r,ee.read_shift(2),!1),G.push(Se+ne);break;case 2:{var Ee=S(de[0].c,ee.read_shift(2),!0),V=S(de[0].r,ee.read_shift(2),!1);Se=S(de[0].c,ee.read_shift(2),!0),ne=S(de[0].r,ee.read_shift(2),!1),G.push(Ee+V+":"+Se+ne)}break;case 3:if(ee.l<ee.length){console.error("WK1 premature formula end");return}break;case 4:G.push("("+G.pop()+")");break;case 5:G.push(ee.read_shift(2));break;case 6:{for(var Ae="";ge=ee[ee.l++];)Ae+=String.fromCharCode(ge);G.push('"'+Ae.replace(/"/g,'""')+'"')}break;case 8:G.push("-"+G.pop());break;case 23:G.push("+"+G.pop());break;case 22:G.push("NOT("+G.pop()+")");break;case 20:case 21:ae=G.pop(),re=G.pop(),G.push(["AND","OR"][ge-20]+"("+re+","+ae+")");break;default:if(ge<32&&C[ge])ae=G.pop(),re=G.pop(),G.push(re+C[ge]+ae);else if(_[ge]){if(q=_[ge][1],q==69&&(q=ee[ee.l++]),q>G.length){console.error("WK1 bad formula parse 0x"+ge.toString(16)+":|"+G.join("|")+"|");return}var Pe=G.slice(-q);G.length-=q,G.push(_[ge][0]+"("+Pe.join(",")+")")}else return ge<=7?console.error("WK1 invalid opcode "+ge.toString(16)):ge<=24?console.error("WK1 unsupported op "+ge.toString(16)):ge<=30?console.error("WK1 invalid opcode "+ge.toString(16)):ge<=115?console.error("WK1 unsupported function opcode "+ge.toString(16)):console.error("WK1 unrecognized opcode "+ge.toString(16))}}G.length==1?de[1].f=""+G[0]:console.error("WK1 bad formula parse |"+G.join("|")+"|")}function j(ee){var de=[{c:0,r:0},{t:"n",v:0},0];return de[0].r=ee.read_shift(2),de[3]=ee[ee.l++],de[0].c=ee[ee.l++],de}function P(ee,de){var G=j(ee);return G[1].t="s",G[1].v=ee.read_shift(de-4,"cstr"),G}function O(ee,de,G,q){var ne=pt(6+q.length);ne.write_shift(2,ee),ne.write_shift(1,G),ne.write_shift(1,de),ne.write_shift(1,39);for(var Se=0;Se<q.length;++Se){var re=q.charCodeAt(Se);ne.write_shift(1,re>=128?95:re)}return ne.write_shift(1,0),ne}function D(ee,de){var G=j(ee);G[1].v=ee.read_shift(2);var q=G[1].v>>1;if(G[1].v&1)switch(q&7){case 0:q=(q>>3)*5e3;break;case 1:q=(q>>3)*500;break;case 2:q=(q>>3)/20;break;case 3:q=(q>>3)/200;break;case 4:q=(q>>3)/2e3;break;case 5:q=(q>>3)/2e4;break;case 6:q=(q>>3)/16;break;case 7:q=(q>>3)/64;break}return G[1].v=q,G}function L(ee,de){var G=j(ee),q=ee.read_shift(4),ne=ee.read_shift(4),Se=ee.read_shift(2);if(Se==65535)return q===0&&ne===3221225472?(G[1].t="e",G[1].v=15):q===0&&ne===3489660928?(G[1].t="e",G[1].v=42):G[1].v=0,G;var re=Se&32768;return Se=(Se&32767)-16446,G[1].v=(1-re*2)*(ne*Math.pow(2,Se+32)+q*Math.pow(2,Se)),G}function B(ee,de,G,q){var ne=pt(14);if(ne.write_shift(2,ee),ne.write_shift(1,G),ne.write_shift(1,de),q==0)return ne.write_shift(4,0),ne.write_shift(4,0),ne.write_shift(2,65535),ne;var Se=0,re=0,ae=0,ge=0;return q<0&&(Se=1,q=-q),re=Math.log2(q)|0,q/=Math.pow(2,re-31),ge=q>>>0,ge&2147483648||(q/=2,++re,ge=q>>>0),q-=ge,ge|=2147483648,ge>>>=0,q*=Math.pow(2,32),ae=q>>>0,ne.write_shift(4,ae),ne.write_shift(4,ge),re+=16383+(Se?32768:0),ne.write_shift(2,re),ne}function H(ee,de){var G=L(ee);return ee.l+=de-14,G}function z(ee,de){var G=j(ee),q=ee.read_shift(4);return G[1].v=q>>6,G}function ie(ee,de){var G=j(ee),q=ee.read_shift(8,"f");return G[1].v=q,G}function X(ee,de){var G=ie(ee);return ee.l+=de-10,G}function W(ee,de){return ee[ee.l+de-1]==0?ee.read_shift(de,"cstr"):""}function Q(ee,de){var G=ee[ee.l++];G>de-1&&(G=de-1);for(var q="";q.length<G;)q+=String.fromCharCode(ee[ee.l++]);return q}function te(ee,de,G){if(!(!G.qpro||de<21)){var q=ee.read_shift(1);ee.l+=17,ee.l+=1,ee.l+=2;var ne=ee.read_shift(de-21,"cstr");return[q,ne]}}function J(ee,de){for(var G={},q=ee.l+de;ee.l<q;){var ne=ee.read_shift(2);if(ne==14e3){for(G[ne]=[0,""],G[ne][0]=ee.read_shift(2);ee[ee.l];)G[ne][1]+=String.fromCharCode(ee[ee.l]),ee.l++;ee.l++}}return G}function Y(ee,de){var G=pt(5+ee.length);G.write_shift(2,14e3),G.write_shift(2,de);for(var q=0;q<ee.length;++q){var ne=ee.charCodeAt(q);G[G.l++]=ne>127?95:ne}return G[G.l++]=0,G}var pe={0:{n:"BOF",f:Oa},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:W},222:{n:"SHEETNAMELP",f:Q},65535:{n:""}},_e={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:P},23:{n:"NUMBER17",f:L},24:{n:"NUMBER18",f:D},25:{n:"FORMULA19",f:H},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:J},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:z},38:{n:"??"},39:{n:"NUMBER27",f:ie},40:{n:"FORMULA28",f:X},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:W},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:te},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:i,to_workbook:t}}();function mbt(e){var t={},r=e.match(_o),n=0,i=!1;if(r)for(;n!=r.length;++n){var a=Fr(r[n]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;t.cp=M$[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=a.val;break;case"<sz":t.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":a.rgb&&(t.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a[0].charCodeAt(1)!==47&&!i)throw new Error("Unrecognized rich format "+a[0])}}return t}var gbt=function(){var e=cE("t"),t=cE("rPr");function r(a){var s=a.match(e);if(!s)return{t:"s",v:""};var o={t:"s",v:Dn(s[1])},l=a.match(t);return l&&(o.s=mbt(l[1])),o}var n=/<(?:\w+:)?r>/g,i=/<\/(?:\w+:)?r>/;return function(s){return s.replace(n,"").split(i).map(r).filter(function(o){return o.v})}}(),xbt=function(){var t=/(\r\n|\n)/g;function r(i,a,s){var o=[];i.u&&o.push("text-decoration: underline;"),i.uval&&o.push("text-underline-style:"+i.uval+";"),i.sz&&o.push("font-size:"+i.sz+"pt;"),i.outline&&o.push("text-effect: outline;"),i.shadow&&o.push("text-shadow: auto;"),a.push('<span style="'+o.join("")+'">'),i.b&&(a.push("<b>"),s.push("</b>")),i.i&&(a.push("<i>"),s.push("</i>")),i.strike&&(a.push("<s>"),s.push("</s>"));var l=i.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(a.push("<"+l+">"),s.push("</"+l+">")),s.push("</span>"),i}function n(i){var a=[[],i.v,[]];return i.v?(i.s&&r(i.s,a[0],a[2]),a[0].join("")+a[1].replace(t,"<br/>")+a[2].join("")):""}return function(a){return a.map(n).join("")}}(),vbt=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,ybt=/<(?:\w+:)?r>/,bbt=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function sz(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Dn(di(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=di(e),r&&(n.h=q$(n.t))):e.match(ybt)&&(n.r=di(e),n.t=Dn(di((e.replace(bbt,"").match(vbt)||[]).join("").replace(_o,""))),r&&(n.h=xbt(gbt(n.r)))),n):{t:""}}var wbt=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Sbt=/<(?:\w+:)?(?:si|sstItem)>/g,Ebt=/<\/(?:\w+:)?(?:si|sstItem)>/;function Cbt(e,t){var r=[],n="";if(!e)return r;var i=e.match(wbt);if(i){n=i[2].replace(Sbt,"").split(Ebt);for(var a=0;a!=n.length;++a){var s=sz(n[a].trim(),t);s!=null&&(r[r.length]=s)}i=Fr(i[1]),r.Count=i.count,r.Unique=i.uniqueCount}return r}var kbt=/^\s|\s$|[\t\n\r]/;function ave(e,t){if(!t.bookSST)return"";var r=[_a];r[r.length]=Ft("sst",null,{xmlns:c1[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var i=e[n],a="<si>";i.r?a+=i.r:(a+="<t",i.t||(i.t=""),i.t.match(kbt)&&(a+=' xml:space="preserve"'),a+=">"+si(i.t)+"</t>"),a+="</si>",r[r.length]=a}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function _bt(e){return[e.read_shift(4),e.read_shift(4)]}function Nbt(e,t){var r=[],n=!1;return mp(e,function(a,s,o){switch(o){case 159:r.Count=a[0],r.Unique=a[1];break;case 19:r.push(a);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(s.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function Abt(e,t){return t||(t=pt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var Tbt=B1t;function Ibt(e){var t=Ol();Ct(t,159,Abt(e));for(var r=0;r<e.length;++r)Ct(t,19,Tbt(e[r]));return Ct(t,160),t.end()}function sve(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function jh(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function Obt(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=jh(e,4),t.U=jh(e,4),t.W=jh(e,4),t}function Pbt(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},i=e.read_shift(4),a=[];i-- >0;)a.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=a,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function Rbt(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(Pbt(e));return t}function jbt(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function Dbt(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=jh(e,4),t.U=jh(e,4),t.W=jh(e,4),t}function Mbt(e){var t=Dbt(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function ove(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var i=!1;switch(n.AlgID){case 26126:case 26127:case 26128:i=n.Flags==36;break;case 26625:i=n.Flags==4;break;case 0:i=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!i)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function lve(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function Fbt(e){var t=jh(e);switch(t.Minor){case 2:return[t.Minor,Lbt(e)];case 3:return[t.Minor,Bbt()];case 4:return[t.Minor,Ubt(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function Lbt(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=ove(e,r),i=lve(e,e.length-e.l);return{t:"Std",h:n,v:i}}function Bbt(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Ubt(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(_o,function(a){var s=Fr(a);switch(Tf(s[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=s[o]});break;case"<dataIntegrity":n.encryptedHmacKey=s.encryptedHmacKey,n.encryptedHmacValue=s.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=s.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(s);break;default:throw s[0]}}),n}function $bt(e,t){var r={},n=r.EncryptionVersionInfo=jh(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var i=e.read_shift(4);return t-=4,r.EncryptionHeader=ove(e,i),t-=i,r.EncryptionVerifier=lve(e,t),r}function zbt(e){var t={},r=t.EncryptionVersionInfo=jh(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function oz(e){var t=0,r,n=sve(e),i=n.length+1,a,s,o,l,c;for(r=q0(i),r[0]=n.length,a=1;a!=i;++a)r[a]=n[a-1];for(a=i-1;a>=0;--a)s=r[a],o=t&16384?1:0,l=t<<1&32767,c=o|l,t=c^s;return t^52811}var cve=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(s){return(s/2|s*128)&255},i=function(s,o){return n(s^o)},a=function(s){for(var o=t[s.length-1],l=104,c=s.length-1;c>=0;--c)for(var d=s[c],f=0;f!=7;++f)d&64&&(o^=r[l]),d*=2,--l;return o};return function(s){for(var o=sve(s),l=a(o),c=o.length,d=q0(16),f=0;f!=16;++f)d[f]=0;var p,m,x;for((c&1)===1&&(p=l>>8,d[c]=i(e[0],p),--c,p=l&255,m=o[o.length-1],d[c]=i(m,p));c>0;)--c,p=l>>8,d[c]=i(o[c],p),--c,p=l&255,d[c]=i(o[c],p);for(c=15,x=15-o.length;x>0;)p=l>>8,d[c]=i(e[x],p),--c,--x,p=l&255,d[c]=i(o[c],p),--c,--x;return d}}(),Hbt=function(e,t,r,n,i){i||(i=t),n||(n=cve(e));var a,s;for(a=0;a!=t.length;++a)s=t[a],s^=n[r],s=(s>>5|s<<3)&255,i[a]=s,++r;return[i,r,n]},Wbt=function(e){var t=0,r=cve(e);return function(n){var i=Hbt("",n,t,r);return t=i[1],i[0]}};function Vbt(e,t,r,n){var i={key:Oa(e),verificationBytes:Oa(e)};return r.password&&(i.verifier=oz(r.password)),n.valid=i.verificationBytes===i.verifier,n.valid&&(n.insitu=Wbt(r.password)),i}function qbt(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=zbt(e):n.Data=$bt(e,t),n}function Gbt(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?qbt(e,t-2,n):Vbt(e,r.biff>=8?t:t-2,r,n),n}var uve=function(){function e(i,a){switch(a.type){case"base64":return t(xc(i),a);case"binary":return t(i,a);case"buffer":return t(xn&&Buffer.isBuffer(i)?i.toString("binary"):pm(i),a);case"array":return t(Nx(i),a)}throw new Error("Unrecognized type "+a.type)}function t(i,a){var s=a||{},o=s.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var p=/\\\w+\b/g,m=0,x,y=-1;x=p.exec(d);){switch(x[0]){case"\\cell":var b=d.slice(m,p.lastIndex-x[0].length);if(b[0]==" "&&(b=b.slice(1)),++y,b.length){var S={v:b,t:"s"};Array.isArray(o)?o[f][y]=S:o[Dr({r:f,c:y})]=S}break}m=p.lastIndex}y>c.e.c&&(c.e.c=y)}),o["!ref"]=en(c),o}function r(i,a){return mm(e(i,a),a)}function n(i){for(var a=["{\\rtf1\\ansi"],s=Mn(i["!ref"]),o,l=Array.isArray(i),c=s.s.r;c<=s.e.r;++c){a.push("\\trowd\\trautofit1");for(var d=s.s.c;d<=s.e.c;++d)a.push("\\cellx"+(d+1));for(a.push("\\pard\\intbl"),d=s.s.c;d<=s.e.c;++d){var f=Dr({r:c,c:d});o=l?(i[c]||[])[d]:i[f],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(tp(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function Kbt(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function hE(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function Xbt(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.max(t,r,n),a=Math.min(t,r,n),s=i-a;if(s===0)return[0,0,t];var o=0,l=0,c=i+a;switch(l=s/(c>1?2-c:c),i){case t:o=((r-n)/s+6)%6;break;case r:o=(n-t)/s+2;break;case n:o=(t-r)/s+4;break}return[o/6,l,c/2]}function Ybt(e){var t=e[0],r=e[1],n=e[2],i=r*2*(n<.5?n:1-n),a=n-i/2,s=[a,a,a],o=6*t,l;if(r!==0)switch(o|0){case 0:case 6:l=i*o,s[0]+=i,s[1]+=l;break;case 1:l=i*(2-o),s[0]+=l,s[1]+=i;break;case 2:l=i*(o-2),s[1]+=i,s[2]+=l;break;case 3:l=i*(4-o),s[1]+=l,s[2]+=i;break;case 4:l=i*(o-4),s[2]+=i,s[0]+=l;break;case 5:l=i*(6-o),s[2]+=l,s[0]+=i;break}for(var c=0;c!=3;++c)s[c]=Math.round(s[c]*255);return s}function AO(e,t){if(t===0)return e;var r=Xbt(Kbt(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),hE(Ybt(r))}var dve=6,Qbt=15,Jbt=1,po=dve;function pE(e){return Math.floor((e+Math.round(128/po)/256)*po)}function mE(e){return Math.floor((e-5)/po*100+.5)/100}function TO(e){return Math.round((e*po+5)/po*256)/256}function OM(e){return TO(mE(pE(e)))}function lz(e){var t=Math.abs(e-OM(e)),r=po;if(t>.005)for(po=Jbt;po<Qbt;++po)Math.abs(e-OM(e))<=t&&(t=Math.abs(e-OM(e)),r=po);po=r}function G0(e){e.width?(e.wpx=pE(e.width),e.wch=mE(e.wpx),e.MDW=po):e.wpx?(e.wch=mE(e.wpx),e.width=TO(e.wch),e.MDW=po):typeof e.wch=="number"&&(e.width=TO(e.wch),e.wpx=pE(e.width),e.MDW=po),e.customWidth&&delete e.customWidth}var Zbt=96,fve=Zbt;function gE(e){return e*96/fve}function Jy(e){return e*fve/96}var ewt={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function twt(e,t,r,n){t.Borders=[];var i={},a=!1;(e[0].match(_o)||[]).forEach(function(s){var o=Fr(s);switch(Tf(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":i={},o.diagonalUp&&(i.diagonalUp=Ai(o.diagonalUp)),o.diagonalDown&&(i.diagonalDown=Ai(o.diagonalDown)),t.Borders.push(i);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in borders")}})}function rwt(e,t,r,n){t.Fills=[];var i={},a=!1;(e[0].match(_o)||[]).forEach(function(s){var o=Fr(s);switch(Tf(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":i={},t.Fills.push(i);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(i),i={};break;case"<patternFill":case"<patternFill>":o.patternType&&(i.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":i.bgColor||(i.bgColor={}),o.indexed&&(i.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(i.bgColor.theme=parseInt(o.theme,10)),o.tint&&(i.bgColor.tint=parseFloat(o.tint)),o.rgb&&(i.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":i.fgColor||(i.fgColor={}),o.theme&&(i.fgColor.theme=parseInt(o.theme,10)),o.tint&&(i.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(i.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fills")}})}function nwt(e,t,r,n){t.Fonts=[];var i={},a=!1;(e[0].match(_o)||[]).forEach(function(s){var o=Fr(s);switch(Tf(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(i),i={};break;case"<name":o.val&&(i.name=di(o.val));break;case"<name/>":case"</name>":break;case"<b":i.bold=o.val?Ai(o.val):1;break;case"<b/>":i.bold=1;break;case"<i":i.italic=o.val?Ai(o.val):1;break;case"<i/>":i.italic=1;break;case"<u":switch(o.val){case"none":i.underline=0;break;case"single":i.underline=1;break;case"double":i.underline=2;break;case"singleAccounting":i.underline=33;break;case"doubleAccounting":i.underline=34;break}break;case"<u/>":i.underline=1;break;case"<strike":i.strike=o.val?Ai(o.val):1;break;case"<strike/>":i.strike=1;break;case"<outline":i.outline=o.val?Ai(o.val):1;break;case"<outline/>":i.outline=1;break;case"<shadow":i.shadow=o.val?Ai(o.val):1;break;case"<shadow/>":i.shadow=1;break;case"<condense":i.condense=o.val?Ai(o.val):1;break;case"<condense/>":i.condense=1;break;case"<extend":i.extend=o.val?Ai(o.val):1;break;case"<extend/>":i.extend=1;break;case"<sz":o.val&&(i.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(i.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(i.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(i.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=M$[parseInt(o.val,10)];break;case"<color":if(i.color||(i.color={}),o.auto&&(i.color.auto=Ai(o.auto)),o.rgb)i.color.rgb=o.rgb.slice(-6);else if(o.indexed){i.color.index=parseInt(o.indexed,10);var l=Gg[i.color.index];i.color.index==81&&(l=Gg[1]),l||(l=Gg[1]),i.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(i.color.theme=parseInt(o.theme,10),o.tint&&(i.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(i.color.rgb=AO(r.themeElements.clrScheme[i.color.theme].rgb,i.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fonts")}})}function iwt(e,t,r){t.NumberFmt=[];for(var n=da(Rr),i=0;i<n.length;++i)t.NumberFmt[n[i]]=Rr[n[i]];var a=e[0].match(_o);if(a)for(i=0;i<a.length;++i){var s=Fr(a[i]);switch(Tf(s[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Dn(di(s.formatCode)),l=parseInt(s.numFmtId,10);if(t.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&t.NumberFmt[l]!=null;--l);t.NumberFmt[l]=o}Rh(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+s[0]+" in numFmts")}}}function awt(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Ft("numFmt",null,{numFmtId:n,formatCode:si(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Ft("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var TN=["numFmtId","fillId","fontId","borderId","xfId"],IN=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function swt(e,t,r){t.CellXf=[];var n,i=!1;(e[0].match(_o)||[]).forEach(function(a){var s=Fr(a),o=0;switch(Tf(s[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=s,delete n[0],o=0;o<TN.length;++o)n[TN[o]]&&(n[TN[o]]=parseInt(n[TN[o]],10));for(o=0;o<IN.length;++o)n[IN[o]]&&(n[IN[o]]=Ai(n[IN[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};s.vertical&&(l.vertical=s.vertical),s.horizontal&&(l.horizontal=s.horizontal),s.textRotation!=null&&(l.textRotation=s.textRotation),s.indent&&(l.indent=s.indent),s.wrapText&&(l.wrapText=Ai(s.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(r&&r.WTF&&!i)throw new Error("unrecognized "+s[0]+" in cellXfs")}})}function owt(e){var t=[];return t[t.length]=Ft("cellXfs",null),e.forEach(function(r){t[t.length]=Ft("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Ft("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var lwt=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,i=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,c){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(t))&&iwt(f,d,c),(f=o.match(i))&&nwt(f,d,l,c),(f=o.match(n))&&rwt(f,d,l,c),(f=o.match(a))&&twt(f,d,l,c),(f=o.match(r))&&swt(f,d,c),d}}();function hve(e,t){var r=[_a,Ft("styleSheet",null,{xmlns:c1[0],"xmlns:vt":Xa.vt})],n;return e.SSF&&(n=awt(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=owt(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function cwt(e,t){var r=e.read_shift(2),n=yo(e);return[r,n]}function uwt(e,t,r){r||(r=pt(6+4*t.length)),r.write_shift(2,e),bs(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function dwt(e,t,r){var n={};n.sz=e.read_shift(2)/20;var i=q1t(e);i.fItalic&&(n.italic=1),i.fCondense&&(n.condense=1),i.fExtend&&(n.extend=1),i.fShadow&&(n.shadow=1),i.fOutline&&(n.outline=1),i.fStrikeout&&(n.strike=1);var a=e.read_shift(2);switch(a===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var s=e.read_shift(1);s!=0&&(n.underline=s);var o=e.read_shift(1);o>0&&(n.family=o);var l=e.read_shift(1);switch(l>0&&(n.charset=l),e.l++,n.color=V1t(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=yo(e),n}function fwt(e,t){t||(t=pt(25+4*32)),t.write_shift(2,e.sz*20),G1t(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),kO(e.color,t);var n=0;return n=2,t.write_shift(1,n),bs(e.name,t),t.length>t.l?t.slice(0,t.l):t}var hwt=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],PM,pwt=Eo;function Kee(e,t){t||(t=pt(4*3+8*7+16*1)),PM||(PM=jP(hwt));var r=PM[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(kO({auto:1},t),kO({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function mwt(e,t){var r=e.l+t,n=e.read_shift(2),i=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:i}}function pve(e,t,r){r||(r=pt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Xw(e,t){return t||(t=pt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var gwt=Eo;function xwt(e,t){return t||(t=pt(51)),t.write_shift(1,0),Xw(null,t),Xw(null,t),Xw(null,t),Xw(null,t),Xw(null,t),t.length>t.l?t.slice(0,t.l):t}function vwt(e,t){return t||(t=pt(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),CO(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function ywt(e,t,r){var n=pt(2052);return n.write_shift(4,e),CO(t,n),CO(r,n),n.length>n.l?n.slice(0,n.l):n}function bwt(e,t,r){var n={};n.NumberFmt=[];for(var i in Rr)n.NumberFmt[i]=Rr[i];n.CellXf=[],n.Fonts=[];var a=[],s=!1;return mp(e,function(l,c,d){switch(d){case 44:n.NumberFmt[l[0]]=l[1],Rh(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(l.color.rgb=AO(t.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:a.push(d),s=!0;break;case 38:a.pop(),s=!1;break;default:if(c.T>0)a.push(d);else if(c.T<0)a.pop();else if(!s||r.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function wwt(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)t[i]!=null&&++r}),r!=0&&(Ct(e,615,ud(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)t[i]!=null&&Ct(e,44,uwt(i,t[i]))}),Ct(e,616))}}function Swt(e){var t=1;Ct(e,611,ud(t)),Ct(e,43,fwt({sz:12,color:{theme:1},name:"Calibri",family:2})),Ct(e,612)}function Ewt(e){var t=2;Ct(e,603,ud(t)),Ct(e,45,Kee({patternType:"none"})),Ct(e,45,Kee({patternType:"gray125"})),Ct(e,604)}function Cwt(e){var t=1;Ct(e,613,ud(t)),Ct(e,46,xwt()),Ct(e,614)}function kwt(e){var t=1;Ct(e,626,ud(t)),Ct(e,47,pve({numFmtId:0},65535)),Ct(e,627)}function _wt(e,t){Ct(e,617,ud(t.length)),t.forEach(function(r){Ct(e,47,pve(r,0))}),Ct(e,618)}function Nwt(e){var t=1;Ct(e,619,ud(t)),Ct(e,48,vwt({xfId:0,name:"Normal"})),Ct(e,620)}function Awt(e){var t=0;Ct(e,505,ud(t)),Ct(e,506)}function Twt(e){var t=0;Ct(e,508,ywt(t,"TableStyleMedium9","PivotStyleMedium4")),Ct(e,509)}function Iwt(e,t){var r=Ol();return Ct(r,278),wwt(r,e.SSF),Swt(r),Ewt(r),Cwt(r),kwt(r),_wt(r,t.cellXfs),Nwt(r),Awt(r),Twt(r),Ct(r,279),r.end()}var Owt=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Pwt(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(_o)||[]).forEach(function(i){var a=Fr(i);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=a.val;break;case"<a:sysClr":n.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(t.themeElements.clrScheme[Owt.indexOf(a[0])]=n,n={}):n.name=a[0].slice(3,a[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function Rwt(){}function jwt(){}var Dwt=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Mwt=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Fwt=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Lwt(e,t,r){t.themeElements={};var n;[["clrScheme",Dwt,Pwt],["fontScheme",Mwt,Rwt],["fmtScheme",Fwt,jwt]].forEach(function(i){if(!(n=e.match(i[1])))throw new Error(i[0]+" not found in themeElements");i[2](n,t,r)})}var Bwt=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function mve(e,t){(!e||e.length===0)&&(e=cz());var r,n={};if(!(r=e.match(Bwt)))throw new Error("themeElements not found in theme");return Lwt(r[0],n,t),n.raw=e,n}function cz(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[_a];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Uwt(e,t,r){var n=e.l+t,i=e.read_shift(4);if(i!==124226){if(!r.cellStyles){e.l=n;return}var a=e.slice(e.l);e.l=n;var s;try{s=o1e(a,{type:"array"})}catch{return}var o=nc(s,"theme/theme/theme1.xml",!0);if(o)return mve(o,r)}}function $wt(e){return e.read_shift(4)}function zwt(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=Hwt(e,4);break;case 2:t.xclrValue=K1e(e);break;case 3:t.xclrValue=$wt(e);break;case 4:e.l+=4;break}return e.l+=8,t}function Hwt(e,t){return Eo(e,t)}function Wwt(e,t){return Eo(e,t)}function Vwt(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=zwt(e);break;case 6:n[1]=Wwt(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function qwt(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var i=e.read_shift(2),a=[];i-- >0;)a.push(Vwt(e,r-e.l));return{ixfe:n,ext:a}}function Gwt(e,t){t.forEach(function(r){switch(r[0]){}})}function Kwt(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:yo(e)}}function Xwt(e){var t=pt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),bs(e.name,t),t.slice(0,t.l)}function Ywt(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function Qwt(e){var t=pt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function Jwt(e,t){var r=pt(8+2*t.length);return r.write_shift(4,e),bs(t,r),r.slice(0,r.l)}function Zwt(e){return e.l+=4,e.read_shift(4)!=0}function e2t(e,t){var r=pt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function t2t(e,t,r){var n={Types:[],Cell:[],Value:[]},i=r||{},a=[],s=!1,o=2;return mp(e,function(l,c,d){switch(d){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:a.push(d),s=!0;break;case 36:a.pop(),s=!1;break;default:if(!c.T){if(!s||i.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function r2t(){var e=Ol();return Ct(e,332),Ct(e,334,ud(1)),Ct(e,335,Xwt({name:"XLDAPR",version:12e4,flags:3496657072})),Ct(e,336),Ct(e,339,Jwt(1,"XLDAPR")),Ct(e,52),Ct(e,35,ud(514)),Ct(e,4096,ud(0)),Ct(e,4097,Gc(1)),Ct(e,36),Ct(e,53),Ct(e,340),Ct(e,337,e2t(1)),Ct(e,51,Qwt([[1,0]])),Ct(e,338),Ct(e,333),e.end()}function n2t(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var i=!1,a=2,s;return e.replace(_o,function(o){var l=Fr(o);switch(Tf(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var c=0;c<n.Types.length;++c)n.Types[c].name==l.name&&(s=n.Types[c]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):a==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;case"<rvb":if(!s)break;s.offsets||(s.offsets=[]),s.offsets.push(+l.i);break;default:if(!i&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function gve(){var e=[_a];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function i2t(e){var t=[];if(!e)return t;var r=1;return(e.match(_o)||[]).forEach(function(n){var i=Fr(n);switch(i[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete i[0],i.i?r=i.i:i.i=r,t.push(i);break}}),t}function a2t(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Dr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function s2t(e,t,r){var n=[];return mp(e,function(a,s,o){switch(o){case 63:n.push(a);break;default:if(!s.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function o2t(e,t,r,n){if(!e)return e;var i=n||{},a=!1;mp(e,function(o,l,c){switch(c){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!l.T){if(!a||i.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}},i)}function l2t(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var _v=1024;function xve(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),i=[Ft("xml",null,{"xmlns:v":Jl.v,"xmlns:o":Jl.o,"xmlns:x":Jl.x,"xmlns:mv":Jl.mv}).replace(/\/>/,">"),Ft("o:shapelayout",Ft("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Ft("v:shapetype",[Ft("v:stroke",null,{joinstyle:"miter"}),Ft("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];_v<e*1e3;)_v+=1e3;return t.forEach(function(a){var s=Gi(a[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Ft("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,c=Ft("v:fill",l,o),d={on:"t",obscured:"t"};++_v,i=i.concat(["<v:shape"+uE({id:"_x0000_s"+_v,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",c,Ft("v:shadow",null,d),Ft("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",$s("x:Anchor",[s.c+1,0,s.r+1,0,s.c+3,20,s.r+5,20].join(",")),$s("x:AutoFill","False"),$s("x:Row",String(s.r)),$s("x:Column",String(s.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function Xee(e,t,r,n){var i=Array.isArray(e),a;t.forEach(function(s){var o=Gi(s.ref);if(i?(e[o.r]||(e[o.r]=[]),a=e[o.r][o.c]):a=e[s.ref],!a){a={t:"z"},i?e[o.r][o.c]=a:e[s.ref]=a;var l=Mn(e["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var c=en(l);c!==e["!ref"]&&(e["!ref"]=c)}a.c||(a.c=[]);var d={a:s.author,t:s.t,r:s.r,T:r};s.h&&(d.h=s.h);for(var f=a.c.length-1;f>=0;--f){if(!r&&a.c[f].T)return;r&&!a.c[f].T&&a.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}a.c.push(d)})}function c2t(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],i=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);i&&i[1]&&i[1].split(/<\/\w*:?author>/).forEach(function(s){if(!(s===""||s.trim()==="")){var o=s.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var a=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(s){if(!(s===""||s.trim()==="")){var o=s.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=Fr(o[0]),c={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=Gi(l.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=s.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),p=!!f&&!!f[1]&&sz(f[1])||{r:"",t:"",h:""};c.r=p.r,p.r=="<t></t>"&&(p.t=p.h=""),c.t=(p.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(c.h=p.h),n.push(c)}}}}),n}function vve(e){var t=[_a,Ft("comments",null,{xmlns:c1[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(i){var a=si(i.a);r.indexOf(a)==-1&&(r.push(a),t.push("<author>"+a+"</author>")),i.T&&i.ID&&r.indexOf("tc="+i.ID)==-1&&(r.push("tc="+i.ID),t.push("<author>tc="+i.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var i=0,a=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?i=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(i=r.indexOf(si(l.a))),a.push(l.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+i+'"><text>'),a.length<=1)t.push($s("t",si(a[0]||"")));else{for(var s=`Comment:
    `+a[0]+`
`,o=1;o<a.length;++o)s+=`Reply:
    `+a[o]+`
`;t.push($s("t",si(s)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function u2t(e,t){var r=[],n=!1,i={},a=0;return e.replace(_o,function(o,l){var c=Fr(o);switch(Tf(c[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":i={author:c.personId,guid:c.id,ref:c.ref,T:1};break;case"</threadedComment>":i.t!=null&&r.push(i);break;case"<text>":case"<text":a=l+o.length;break;case"</text>":i.t=e.slice(a,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return o}),r}function d2t(e,t,r){var n=[_a,Ft("ThreadedComments",null,{xmlns:Xa.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(i){var a="";(i[1]||[]).forEach(function(s,o){if(!s.T){delete s.ID;return}s.a&&t.indexOf(s.a)==-1&&t.push(s.a);var l={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?a=l.id:l.parentId=a,s.ID=l.id,s.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(s.a)).slice(-12)+"}"),n.push(Ft("threadedComment",$s("text",s.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function f2t(e,t){var r=[],n=!1;return e.replace(_o,function(a){var s=Fr(a);switch(Tf(s[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:s.displayname,id:s.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+s[0]+" in threaded comments")}return a}),r}function h2t(e){var t=[_a,Ft("personList",null,{xmlns:Xa.TCMNT,"xmlns:x":c1[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Ft("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function p2t(e){var t={};t.iauthor=e.read_shift(4);var r=h1(e);return t.rfx=r.s,t.ref=Dr(r.s),e.l+=16,t}function m2t(e,t){return t==null&&(t=pt(36)),t.write_shift(4,e[1].iauthor),$b(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var g2t=yo;function x2t(e){return bs(e.slice(0,54))}function v2t(e,t){var r=[],n=[],i={},a=!1;return mp(e,function(o,l,c){switch(c){case 632:n.push(o);break;case 635:i=o;break;case 637:i.t=o.t,i.h=o.h,i.r=o.r;break;case 636:if(i.author=n[i.iauthor],delete i.iauthor,t.sheetRows&&i.rfx&&t.sheetRows<=i.rfx.r)break;i.t||(i.t=""),delete i.rfx,r.push(i);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!a||t.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}}),r}function y2t(e){var t=Ol(),r=[];return Ct(t,628),Ct(t,630),e.forEach(function(n){n[1].forEach(function(i){r.indexOf(i.a)>-1||(r.push(i.a.slice(0,54)),Ct(t,632,x2t(i.a)))})}),Ct(t,631),Ct(t,633),e.forEach(function(n){n[1].forEach(function(i){i.iauthor=r.indexOf(i.a);var a={s:Gi(n[0]),e:Gi(n[0])};Ct(t,635,m2t([a,i])),i.t&&i.t.length>0&&Ct(t,637,$1t(i)),Ct(t,636),delete i.iauthor})}),Ct(t,634),Ct(t,629),t.end()}var b2t="application/vnd.ms-office.vbaProject";function w2t(e){var t=yr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var i=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");yr.utils.cfb_add(t,i,e.FileIndex[n].content)}}),yr.write(t)}function S2t(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var i=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&yr.utils.cfb_add(e,i,t.FileIndex[n].content)}})}var yve=["xlsb","xlsm","xlam","biff8","xla"];function E2t(){return{"!type":"dialog"}}function C2t(){return{"!type":"dialog"}}function k2t(){return{"!type":"macro"}}function _2t(){return{"!type":"macro"}}var Vv=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,i,a,s){var o=!1,l=!1;a.length==0?l=!0:a.charAt(0)=="["&&(l=!0,a=a.slice(1,-1)),s.length==0?o=!0:s.charAt(0)=="["&&(o=!0,s=s.slice(1,-1));var c=a.length>0?parseInt(a,10)|0:0,d=s.length>0?parseInt(s,10)|0:0;return o?d+=t.c:--d,l?c+=t.r:--c,i+(o?"":"$")+qi(d)+(l?"":"$")+Sa(c)}return function(i,a){return t=a,i.replace(e,r)}}(),uz=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,dz=function(){return function(t,r){return t.replace(uz,function(n,i,a,s,o,l){var c=Q$(s)-(a?0:r.c),d=Y$(l)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",p=c==0?"":a?c+1:"["+c+"]";return i+"R"+f+"C"+p})}}();function bve(e,t){return e.replace(uz,function(r,n,i,a,s,o){return n+(i=="$"?i+a:qi(Q$(a)+t.c))+(s=="$"?s+o:Sa(Y$(o)+t.r))})}function N2t(e,t,r){var n=Dl(t),i=n.s,a=Gi(r),s={r:a.r-i.r,c:a.c-i.c};return bve(e,s)}function A2t(e){return e.length!=1}function Yee(e){return e.replace(/_xlfn\./g,"")}function Ta(e){e.l+=1}function K0(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function wve(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Sve(e);r.biff==12&&(n=4)}var i=e.read_shift(n),a=e.read_shift(n),s=K0(e),o=K0(e);return{s:{r:i,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function Sve(e){var t=K0(e),r=K0(e),n=e.read_shift(1),i=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:i,cRel:r[1],rRel:r[2]}}}function T2t(e,t,r){if(r.biff<8)return Sve(e);var n=e.read_shift(r.biff==12?4:2),i=e.read_shift(r.biff==12?4:2),a=K0(e),s=K0(e);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:i,c:s[0],cRel:s[1],rRel:s[2]}}}function Eve(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return I2t(e);var n=e.read_shift(r&&r.biff==12?4:2),i=K0(e);return{r:n,c:i[0],cRel:i[1],rRel:i[2]}}function I2t(e){var t=K0(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function O2t(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function P2t(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return R2t(e);var i=e.read_shift(n>=12?4:2),a=e.read_shift(2),s=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;i>524287;)i-=1048576;if(s==1)for(;a>8191;)a=a-16384;return{r:i,c:a,cRel:s,rRel:o}}function R2t(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,i=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),i==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:i,rRel:n}}function j2t(e,t,r){var n=(e[e.l++]&96)>>5,i=wve(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,i]}function D2t(e,t,r){var n=(e[e.l++]&96)>>5,i=e.read_shift(2,"i"),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}var s=wve(e,a,r);return[n,i,s]}function M2t(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function F2t(e,t,r){var n=(e[e.l++]&96)>>5,i=e.read_shift(2),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}return e.l+=a,[n,i]}function L2t(e,t,r){var n=(e[e.l++]&96)>>5,i=T2t(e,t-1,r);return[n,i]}function B2t(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function Qee(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function U2t(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),i=[],a=0;a<=n;++a)i.push(e.read_shift(r&&r.biff==2?1:2));return i}function $2t(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function z2t(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function H2t(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function W2t(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function Cve(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function V2t(e){return e.read_shift(2),Cve(e)}function q2t(e){return e.read_shift(2),Cve(e)}function G2t(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var i=Eve(e,0,r);return[n,i]}function K2t(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var i=P2t(e,0,r);return[n,i]}function X2t(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var i=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var a=Eve(e,0,r);return[n,i,a]}function Y2t(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var i=e.read_shift(r&&r.biff<=3?1:2);return[ZSt[i],Nve[i],n]}function Q2t(e,t,r){var n=e[e.l++],i=e.read_shift(1),a=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:J2t(e);return[i,(a[0]===0?Nve:JSt)[a[1]]]}function J2t(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function Z2t(e,t,r){e.l+=r&&r.biff==2?3:4}function eSt(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),i=e.read_shift(r&&r.biff==2?1:2);return[n,i]}function tSt(e){return e.l++,gp[e.read_shift(1)]}function rSt(e){return e.l++,e.read_shift(2)}function nSt(e){return e.l++,e.read_shift(1)!==0}function iSt(e){return e.l++,go(e)}function aSt(e,t,r){return e.l++,QC(e,t-1,r)}function sSt(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=va(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=gp[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=go(e);break;case 2:r[1]=p1(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function oSt(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),i=[],a=0;a!=n;++a)i.push((r.biff==12?h1:FP)(e));return i}function lSt(e,t,r){var n=0,i=0;r.biff==12?(n=e.read_shift(4),i=e.read_shift(4)):(i=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--i==0&&(i=256));for(var a=0,s=[];a!=n&&(s[a]=[]);++a)for(var o=0;o!=i;++o)s[a][o]=sSt(e,r.biff);return s}function cSt(e,t,r){var n=e.read_shift(1)>>>5&3,i=!r||r.biff>=8?4:2,a=e.read_shift(i);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,a]}function uSt(e,t,r){if(r.biff==5)return dSt(e);var n=e.read_shift(1)>>>5&3,i=e.read_shift(2),a=e.read_shift(4);return[n,i,a]}function dSt(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function fSt(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var i=e.read_shift(r&&r.biff==2?1:2);return[n,i]}function hSt(e,t,r){var n=e.read_shift(1)>>>5&3,i=e.read_shift(r&&r.biff==2?1:2);return[n,i]}function pSt(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function mSt(e,t,r){var n=(e[e.l++]&96)>>5,i=e.read_shift(2),a=4;if(r)switch(r.biff){case 5:a=15;break;case 12:a=6;break}return e.l+=a,[n,i]}var gSt=Eo,xSt=Eo,vSt=Eo;function ZC(e,t,r){return e.l+=2,[O2t(e)]}function fz(e){return e.l+=6,[]}var ySt=ZC,bSt=fz,wSt=fz,SSt=ZC;function kve(e){return e.l+=2,[Oa(e),e.read_shift(2)&1]}var ESt=ZC,CSt=kve,kSt=fz,_St=ZC,NSt=ZC,ASt=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function TSt(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),i=e.read_shift(2),a=e.read_shift(2),s=ASt[r>>2&31];return{ixti:t,coltype:r&3,rt:s,idx:n,c:i,C:a}}function ISt(e){return e.l+=2,[e.read_shift(4)]}function OSt(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function PSt(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function RSt(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function jSt(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function DSt(e){return e.l+=4,[0,0]}var Jee={1:{n:"PtgExp",f:eSt},2:{n:"PtgTbl",f:vSt},3:{n:"PtgAdd",f:Ta},4:{n:"PtgSub",f:Ta},5:{n:"PtgMul",f:Ta},6:{n:"PtgDiv",f:Ta},7:{n:"PtgPower",f:Ta},8:{n:"PtgConcat",f:Ta},9:{n:"PtgLt",f:Ta},10:{n:"PtgLe",f:Ta},11:{n:"PtgEq",f:Ta},12:{n:"PtgGe",f:Ta},13:{n:"PtgGt",f:Ta},14:{n:"PtgNe",f:Ta},15:{n:"PtgIsect",f:Ta},16:{n:"PtgUnion",f:Ta},17:{n:"PtgRange",f:Ta},18:{n:"PtgUplus",f:Ta},19:{n:"PtgUminus",f:Ta},20:{n:"PtgPercent",f:Ta},21:{n:"PtgParen",f:Ta},22:{n:"PtgMissArg",f:Ta},23:{n:"PtgStr",f:aSt},26:{n:"PtgSheet",f:OSt},27:{n:"PtgEndSheet",f:PSt},28:{n:"PtgErr",f:tSt},29:{n:"PtgBool",f:nSt},30:{n:"PtgInt",f:rSt},31:{n:"PtgNum",f:iSt},32:{n:"PtgArray",f:B2t},33:{n:"PtgFunc",f:Y2t},34:{n:"PtgFuncVar",f:Q2t},35:{n:"PtgName",f:cSt},36:{n:"PtgRef",f:G2t},37:{n:"PtgArea",f:j2t},38:{n:"PtgMemArea",f:fSt},39:{n:"PtgMemErr",f:gSt},40:{n:"PtgMemNoMem",f:xSt},41:{n:"PtgMemFunc",f:hSt},42:{n:"PtgRefErr",f:pSt},43:{n:"PtgAreaErr",f:M2t},44:{n:"PtgRefN",f:K2t},45:{n:"PtgAreaN",f:L2t},46:{n:"PtgMemAreaN",f:RSt},47:{n:"PtgMemNoMemN",f:jSt},57:{n:"PtgNameX",f:uSt},58:{n:"PtgRef3d",f:X2t},59:{n:"PtgArea3d",f:D2t},60:{n:"PtgRefErr3d",f:mSt},61:{n:"PtgAreaErr3d",f:F2t},255:{}},MSt={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},FSt={1:{n:"PtgElfLel",f:kve},2:{n:"PtgElfRw",f:_St},3:{n:"PtgElfCol",f:ySt},6:{n:"PtgElfRwV",f:NSt},7:{n:"PtgElfColV",f:SSt},10:{n:"PtgElfRadical",f:ESt},11:{n:"PtgElfRadicalS",f:kSt},13:{n:"PtgElfColS",f:bSt},15:{n:"PtgElfColSV",f:wSt},16:{n:"PtgElfRadicalLel",f:CSt},25:{n:"PtgList",f:TSt},29:{n:"PtgSxName",f:ISt},255:{}},LSt={0:{n:"PtgAttrNoop",f:DSt},1:{n:"PtgAttrSemi",f:W2t},2:{n:"PtgAttrIf",f:z2t},4:{n:"PtgAttrChoose",f:U2t},8:{n:"PtgAttrGoto",f:$2t},16:{n:"PtgAttrSum",f:Z2t},32:{n:"PtgAttrBaxcel",f:Qee},33:{n:"PtgAttrBaxcel",f:Qee},64:{n:"PtgAttrSpace",f:V2t},65:{n:"PtgAttrSpaceSemi",f:q2t},128:{n:"PtgAttrIfError",f:H2t},255:{}};function ek(e,t,r,n){if(n.biff<8)return Eo(e,t);for(var i=e.l+t,a=[],s=0;s!==r.length;++s)switch(r[s][0]){case"PtgArray":r[s][1]=lSt(e,0,n),a.push(r[s][1]);break;case"PtgMemArea":r[s][2]=oSt(e,r[s][1],n),a.push(r[s][2]);break;case"PtgExp":n&&n.biff==12&&(r[s][1][1]=e.read_shift(4),a.push(r[s][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[s][0]}return t=i-e.l,t!==0&&a.push(Eo(e,t)),a}function tk(e,t,r){for(var n=e.l+t,i,a,s=[];n!=e.l;)t=n-e.l,a=e[e.l],i=Jee[a]||Jee[MSt[a]],(a===24||a===25)&&(i=(a===24?FSt:LSt)[e[e.l+1]]),!i||!i.f?Eo(e,t):s.push([i.n,i.f(e,t,r)]);return s}function BSt(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],i=[],a=0;a<n.length;++a){var s=n[a];if(s)switch(s[0]){case 2:i.push('"'+s[1].replace(/"/g,'""')+'"');break;default:i.push(s[1])}else i.push("")}t.push(i.join(","))}return t.join(";")}var USt={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function $St(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function _ve(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var i="";if(r.biff>8)switch(e[n[0]][0]){case 357:return i=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?i:i+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return i=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?i:i+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return e[n[0]][0][3]?(i=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?i:i+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function Zee(e,t,r){var n=_ve(e,t,r);return n=="#REF"?n:$St(n,r)}function co(e,t,r,n,i){var a=i&&i.biff||8,s={s:{c:0,r:0}},o=[],l,c,d,f=0,p=0,m,x="";if(!e[0]||!e[0][0])return"";for(var y=-1,b="",S=0,_=e[0].length;S<_;++S){var C=e[0][S];switch(C[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),y>=0){switch(e[0][y][1][0]){case 0:b=sa(" ",e[0][y][1][1]);break;case 1:b=sa("\r",e[0][y][1][1]);break;default:if(b="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}c=c+b,y=-1}o.push(c+USt[C[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=X2(C[1][1],s,i),o.push(Y2(d,a));break;case"PtgRefN":d=r?X2(C[1][1],r,i):C[1][1],o.push(Y2(d,a));break;case"PtgRef3d":f=C[1][1],d=X2(C[1][2],s,i),x=Zee(n,f,i),o.push(x+"!"+Y2(d,a));break;case"PtgFunc":case"PtgFuncVar":var A=C[1][0],j=C[1][1];A||(A=0),A&=127;var P=A==0?[]:o.slice(-A);o.length-=A,j==="User"&&(j=P.shift()),o.push(j+"("+P.join(",")+")");break;case"PtgBool":o.push(C[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(C[1]);break;case"PtgNum":o.push(String(C[1]));break;case"PtgStr":o.push('"'+C[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(C[1]);break;case"PtgAreaN":m=Aee(C[1][1],r?{s:r}:s,i),o.push(AM(m,i));break;case"PtgArea":m=Aee(C[1][1],s,i),o.push(AM(m,i));break;case"PtgArea3d":f=C[1][1],m=C[1][2],x=Zee(n,f,i),o.push(x+"!"+AM(m,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=C[1][2];var O=(n.names||[])[p-1]||(n[0]||[])[p],D=O?O.Name:"SH33TJSNAME"+String(p);D&&D.slice(0,6)=="_xlfn."&&!i.xlfn&&(D=D.slice(6)),o.push(D);break;case"PtgNameX":var L=C[1][1];p=C[1][2];var B;if(i.biff<=5)L<0&&(L=-L),n[L]&&(B=n[L][p]);else{var H="";if(((n[L]||[])[0]||[])[0]==14849||(((n[L]||[])[0]||[])[0]==1025?n[L][p]&&n[L][p].itab>0&&(H=n.SheetNames[n[L][p].itab-1]+"!"):H=n.SheetNames[p-1]+"!"),n[L]&&n[L][p])H+=n[L][p].Name;else if(n[0]&&n[0][p])H+=n[0][p].Name;else{var z=(_ve(n,L,i)||"").split(";;");z[p-1]?H=z[p-1]:H+="SH33TJSERRX"}o.push(H);break}B||(B={Name:"SH33TJSERRY"}),o.push(B.Name);break;case"PtgParen":var ie="(",X=")";if(y>=0){switch(b="",e[0][y][1][0]){case 2:ie=sa(" ",e[0][y][1][1])+ie;break;case 3:ie=sa("\r",e[0][y][1][1])+ie;break;case 4:X=sa(" ",e[0][y][1][1])+X;break;case 5:X=sa("\r",e[0][y][1][1])+X;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}y=-1}o.push(ie+o.pop()+X);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:C[1][1],r:C[1][0]};var W={c:r.c,r:r.r};if(n.sharedf[Dr(d)]){var Q=n.sharedf[Dr(d)];o.push(co(Q,s,W,n,i))}else{var te=!1;for(l=0;l!=n.arrayf.length;++l)if(c=n.arrayf[l],!(d.c<c[0].s.c||d.c>c[0].e.c)&&!(d.r<c[0].s.r||d.r>c[0].e.r)){o.push(co(c[1],s,W,n,i)),te=!0;break}te||o.push(C[1])}break;case"PtgArray":o.push("{"+BSt(C[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=S;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+C[1].idx+"[#"+C[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(C));default:throw new Error("Unrecognized Formula Token: "+String(C))}var J=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&y>=0&&J.indexOf(e[0][S][0])==-1){C=e[0][y];var Y=!0;switch(C[1][0]){case 4:Y=!1;case 0:b=sa(" ",C[1][1]);break;case 5:Y=!1;case 1:b=sa("\r",C[1][1]);break;default:if(b="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+C[1][0])}o.push((Y?b:"")+o.pop()+(Y?"":b)),y=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function zSt(e,t,r){var n=e.l+t,i=r.biff==2?1:2,a,s=e.read_shift(i);if(s==65535)return[[],Eo(e,t-2)];var o=tk(e,s,r);return t!==s+i&&(a=ek(e,t-s-i,o,r)),e.l=n,[o,a]}function HSt(e,t,r){var n=e.l+t,i=r.biff==2?1:2,a,s=e.read_shift(i);if(s==65535)return[[],Eo(e,t-2)];var o=tk(e,s,r);return t!==s+i&&(a=ek(e,t-s-i,o,r)),e.l=n,[o,a]}function WSt(e,t,r,n){var i=e.l+t,a=tk(e,n,r),s;return i!==e.l&&(s=ek(e,i-e.l,a,r)),[a,s]}function VSt(e,t,r){var n=e.l+t,i,a=e.read_shift(2),s=tk(e,a,r);return a==65535?[[],Eo(e,t-2)]:(t!==a+2&&(i=ek(e,n-a-2,s,r)),[s,i])}function qSt(e){var t;if(bh(e,e.l+6)!==65535)return[go(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function GSt(e){if(e==null){var t=pt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Ax(e);return Ax(0)}function RM(e,t,r){var n=e.l+t,i=If(e);r.biff==2&&++e.l;var a=qSt(e),s=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=HSt(e,n-e.l,r);return{cell:i,val:a[0],formula:o,shared:s>>3&1,tt:a[1]}}function KSt(e,t,r,n,i){var a=Ix(t,r,i),s=GSt(e.v),o=pt(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var c=pt(e.bf.length),d=0;d<e.bf.length;++d)c[d]=e.bf[d];var f=vs([a,s,o,c]);return f}function LP(e,t,r){var n=e.read_shift(4),i=tk(e,n,r),a=e.read_shift(4),s=a>0?ek(e,a,i,r):null;return[i,s]}var XSt=LP,BP=LP,YSt=LP,QSt=LP,JSt={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Nve={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},ZSt={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function ete(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function eEt(e){var t="of:="+e.replace(uz,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function jM(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function tEt(e){return e.replace(/\./,"!")}var J2={},qv={},Z2=typeof Map<"u";function hz(e,t,r){var n=0,i=e.length;if(r){if(Z2?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var a=Z2?r.get(t):r[t];n<a.length;++n)if(e[a[n]].t===t)return e.Count++,a[n]}}else for(;n<i;++n)if(e[n].t===t)return e.Count++,n;return e[i]={t},e.Count++,e.Unique++,r&&(Z2?(r.has(t)||r.set(t,[]),r.get(t).push(i)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(i))),i}function UP(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(po=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=mE(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=TO(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Yg(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function gm(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],i=60,a=e.length;if(n==null&&r.ssf){for(;i<392;++i)if(r.ssf[i]==null){Rh(t.z,i),r.ssf[i]=t.z,r.revssf[t.z]=n=i;break}}for(i=0;i!=a;++i)if(e[i].numFmtId===n)return i;return e[a]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function Ave(e,t,r,n,i,a){try{n.cellNF&&(e.z=Rr[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Oi(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Rr[t]==null&&Rh(Jxt[t]||"General",t),e.t==="e")e.w=e.w||gp[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=lE(e.v);else if(e.t==="d"){var s=Qa(e.v);(s|0)===s?e.w=s.toString(10):e.w=lE(s)}else{if(e.v===void 0)return"";e.w=_x(e.v,qv)}else e.t==="d"?e.w=yu(t,Qa(e.v),qv):e.w=yu(t,e.v,qv)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=a.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=AO(i.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=i.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=AO(i.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=i.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&a.Fills)throw o}}}function rEt(e,t,r){if(e&&e["!ref"]){var n=Mn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function nEt(e,t){var r=Mn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=en(r))}var iEt=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,aEt=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,sEt=/<(?:\w:)?hyperlink [^>]*>/mg,oEt=/"(\w*:\w*)"/,lEt=/<(?:\w:)?col\b[^>]*[\/]?>/g,cEt=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,uEt=/<(?:\w:)?pageMargins[^>]*\/>/g,Tve=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,dEt=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,fEt=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function hEt(e,t,r,n,i,a,s){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",d="",f=e.match(aEt);f?(c=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):c=d=e;var p=c.match(Tve);p?pz(p[0],o,i,r):(p=c.match(dEt))&&mEt(p[0],p[1]||"",o,i,r);var m=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var x=c.slice(m,m+50).match(oEt);x&&nEt(o,x[1])}var y=c.match(fEt);y&&y[1]&&AEt(y[1],i);var b=[];if(t.cellStyles){var S=c.match(lEt);S&&EEt(b,S)}f&&OEt(f[1],o,t,l,a,s);var _=d.match(cEt);_&&(o["!autofilter"]=kEt(_[0]));var C=[],A=d.match(iEt);if(A)for(m=0;m!=A.length;++m)C[m]=Mn(A[m].slice(A[m].indexOf('"')+1));var j=d.match(sEt);j&&bEt(o,j,n);var P=d.match(uEt);if(P&&(o["!margins"]=wEt(Fr(P[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=en(l)),t.sheetRows>0&&o["!ref"]){var O=Mn(o["!ref"]);t.sheetRows<=+O.e.r&&(O.e.r=t.sheetRows-1,O.e.r>l.e.r&&(O.e.r=l.e.r),O.e.r<O.s.r&&(O.s.r=O.e.r),O.e.c>l.e.c&&(O.e.c=l.e.c),O.e.c<O.s.c&&(O.s.c=O.e.c),o["!fullref"]=o["!ref"],o["!ref"]=en(O))}return b.length>0&&(o["!cols"]=b),C.length>0&&(o["!merges"]=C),o}function pEt(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+en(e[r])+'"/>';return t+"</mergeCells>"}function pz(e,t,r,n){var i=Fr(e);r.Sheets[n]||(r.Sheets[n]={}),i.codeName&&(r.Sheets[n].CodeName=Dn(di(i.codeName)))}function mEt(e,t,r,n,i){pz(e.slice(0,e.indexOf(">")),r,n,i)}function gEt(e,t,r,n,i){var a=!1,s={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var l=t.SheetNames[r];try{t.Workbook&&(l=t.Workbook.Sheets[r].CodeName||l)}catch{}a=!0,s.codeName=rf(si(l))}if(e&&e["!outline"]){var c={summaryBelow:1,summaryRight:1};e["!outline"].above&&(c.summaryBelow=0),e["!outline"].left&&(c.summaryRight=0),o=(o||"")+Ft("outlinePr",null,c)}!a&&!o||(i[i.length]=Ft("sheetPr",o,s))}var xEt=["objects","scenarios","selectLockedCells","selectUnlockedCells"],vEt=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function yEt(e){var t={sheet:1};return xEt.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),vEt.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=oz(e.password).toString(16).toUpperCase()),Ft("sheetProtection",null,t)}function bEt(e,t,r){for(var n=Array.isArray(e),i=0;i!=t.length;++i){var a=Fr(di(t[i]),!0);if(!a.ref)return;var s=((r||{})["!id"]||[])[a.id];s?(a.Target=s.Target,a.location&&(a.Target+="#"+Dn(a.location))):(a.Target="#"+Dn(a.location),s={Target:a.Target,TargetMode:"Internal"}),a.Rel=s,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=Mn(a.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var d=Dr({c,r:l});n?(e[l]||(e[l]=[]),e[l][c]||(e[l][c]={t:"z",v:void 0}),e[l][c].l=a):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=a)}}}function wEt(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function SEt(e){return Yg(e),Ft("pageMargins",null,e)}function EEt(e,t){for(var r=!1,n=0;n!=t.length;++n){var i=Fr(t[n],!0);i.hidden&&(i.hidden=Ai(i.hidden));var a=parseInt(i.min,10)-1,s=parseInt(i.max,10)-1;for(i.outlineLevel&&(i.level=+i.outlineLevel||0),delete i.min,delete i.max,i.width=+i.width,!r&&i.width&&(r=!0,lz(i.width)),G0(i);a<=s;)e[a++]=Pi(i)}}function CEt(e,t){for(var r=["<cols>"],n,i=0;i!=t.length;++i)(n=t[i])&&(r[r.length]=Ft("col",null,UP(i,n)));return r[r.length]="</cols>",r.join("")}function kEt(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function _Et(e,t,r,n){var i=typeof e.ref=="string"?e.ref:en(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,s=Dl(i);s.s.r==s.e.r&&(s.e.r=Dl(t["!ref"]).e.r,i=en(s));for(var o=0;o<a.length;++o){var l=a[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+i;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),Ft("autoFilter",null,{ref:i})}var NEt=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function AEt(e,t){t.Views||(t.Views=[{}]),(e.match(NEt)||[]).forEach(function(r,n){var i=Fr(r);t.Views[n]||(t.Views[n]={}),+i.zoomScale&&(t.Views[n].zoom=+i.zoomScale),Ai(i.rightToLeft)&&(t.Views[n].RTL=!0)})}function TEt(e,t,r,n){var i={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Ft("sheetViews",Ft("sheetView",null,i),{})}function IEt(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var i="",a=e.t,s=e.v;if(e.t!=="z")switch(e.t){case"b":i=e.v?"1":"0";break;case"n":i=""+e.v;break;case"e":i=gp[e.v];break;case"d":n&&n.cellDates?i=Oi(e.v,-1).toISOString():(e=Pi(e),e.t="n",i=""+(e.v=Qa(Oi(e.v)))),typeof e.z>"u"&&(e.z=Rr[14]);break;default:i=e.v;break}var o=$s("v",si(i)),l={r:t},c=gm(n.cellXfs,e,n);switch(c!==0&&(l.s=c),e.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=$s("v",""+hz(n.Strings,e.v,n.revStrings)),l.t="s";break}l.t="str";break}if(e.t!=a&&(e.t=a,e.v=s),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=Ft("f",si(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(l.cm=1),Ft("c",o,l)}var OEt=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,i=/ref=["']([^"']*)["']/,a=cE("v"),s=cE("f");return function(l,c,d,f,p,m){for(var x=0,y="",b=[],S=[],_=0,C=0,A=0,j="",P,O,D=0,L=0,B,H,z=0,ie=0,X=Array.isArray(m.CellXf),W,Q=[],te=[],J=Array.isArray(c),Y=[],pe={},_e=!1,ee=!!d.sheetStubs,de=l.split(t),G=0,q=de.length;G!=q;++G){y=de[G].trim();var ne=y.length;if(ne!==0){var Se=0;e:for(x=0;x<ne;++x)switch(y[x]){case">":if(y[x-1]!="/"){++x;break e}if(d&&d.cellStyles){if(O=Fr(y.slice(Se,x),!0),D=O.r!=null?parseInt(O.r,10):D+1,L=-1,d.sheetRows&&d.sheetRows<D)continue;pe={},_e=!1,O.ht&&(_e=!0,pe.hpt=parseFloat(O.ht),pe.hpx=Jy(pe.hpt)),O.hidden=="1"&&(_e=!0,pe.hidden=!0),O.outlineLevel!=null&&(_e=!0,pe.level=+O.outlineLevel),_e&&(Y[D-1]=pe)}break;case"<":Se=x;break}if(Se>=x)break;if(O=Fr(y.slice(Se,x),!0),D=O.r!=null?parseInt(O.r,10):D+1,L=-1,!(d.sheetRows&&d.sheetRows<D)){f.s.r>D-1&&(f.s.r=D-1),f.e.r<D-1&&(f.e.r=D-1),d&&d.cellStyles&&(pe={},_e=!1,O.ht&&(_e=!0,pe.hpt=parseFloat(O.ht),pe.hpx=Jy(pe.hpt)),O.hidden=="1"&&(_e=!0,pe.hidden=!0),O.outlineLevel!=null&&(_e=!0,pe.level=+O.outlineLevel),_e&&(Y[D-1]=pe)),b=y.slice(x).split(e);for(var re=0;re!=b.length&&b[re].trim().charAt(0)=="<";++re);for(b=b.slice(re),x=0;x!=b.length;++x)if(y=b[x].trim(),y.length!==0){if(S=y.match(r),_=x,C=0,A=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,S!=null&&S.length===2){for(_=0,j=S[1],C=0;C!=j.length&&!((A=j.charCodeAt(C)-64)<1||A>26);++C)_=26*_+A;--_,L=_}else++L;for(C=0;C!=y.length&&y.charCodeAt(C)!==62;++C);if(++C,O=Fr(y.slice(0,C),!0),O.r||(O.r=Dr({r:D-1,c:L})),j=y.slice(C),P={t:""},(S=j.match(a))!=null&&S[1]!==""&&(P.v=Dn(S[1])),d.cellFormula){if((S=j.match(s))!=null&&S[1]!==""){if(P.f=Dn(di(S[1])).replace(/\r\n/g,`
`),d.xlfn||(P.f=Yee(P.f)),S[0].indexOf('t="array"')>-1)P.F=(j.match(i)||[])[1],P.F.indexOf(":")>-1&&Q.push([Mn(P.F),P.F]);else if(S[0].indexOf('t="shared"')>-1){H=Fr(S[0]);var ae=Dn(di(S[1]));d.xlfn||(ae=Yee(ae)),te[parseInt(H.si,10)]=[H,ae,O.r]}}else(S=j.match(/<f[^>]*\/>/))&&(H=Fr(S[0]),te[H.si]&&(P.f=N2t(te[H.si][1],te[H.si][2],O.r)));var ge=Gi(O.r);for(C=0;C<Q.length;++C)ge.r>=Q[C][0].s.r&&ge.r<=Q[C][0].e.r&&ge.c>=Q[C][0].s.c&&ge.c<=Q[C][0].e.c&&(P.F=Q[C][1])}if(O.t==null&&P.v===void 0)if(P.f||P.F)P.v=0,P.t="n";else if(ee)P.t="z";else continue;else P.t=O.t||"n";switch(f.s.c>L&&(f.s.c=L),f.e.c<L&&(f.e.c=L),P.t){case"n":if(P.v==""||P.v==null){if(!ee)continue;P.t="z"}else P.v=parseFloat(P.v);break;case"s":if(typeof P.v>"u"){if(!ee)continue;P.t="z"}else B=J2[parseInt(P.v,10)],P.v=B.t,P.r=B.r,d.cellHTML&&(P.h=B.h);break;case"str":P.t="s",P.v=P.v!=null?di(P.v):"",d.cellHTML&&(P.h=q$(P.v));break;case"inlineStr":S=j.match(n),P.t="s",S!=null&&(B=sz(S[1]))?(P.v=B.t,d.cellHTML&&(P.h=B.h)):P.v="";break;case"b":P.v=Ai(P.v);break;case"d":d.cellDates?P.v=Oi(P.v,1):(P.v=Qa(Oi(P.v,1)),P.t="n");break;case"e":(!d||d.cellText!==!1)&&(P.w=P.v),P.v=O1e[P.v];break}if(z=ie=0,W=null,X&&O.s!==void 0&&(W=m.CellXf[O.s],W!=null&&(W.numFmtId!=null&&(z=W.numFmtId),d.cellStyles&&W.fillId!=null&&(ie=W.fillId))),Ave(P,z,ie,d,p,m),d.cellDates&&X&&P.t=="n"&&Lb(Rr[z])&&(P.t="d",P.v=MP(P.v)),O.cm&&d.xlmeta){var Ee=(d.xlmeta.Cell||[])[+O.cm-1];Ee&&Ee.type=="XLDAPR"&&(P.D=!0)}if(J){var V=Gi(O.r);c[V.r]||(c[V.r]=[]),c[V.r][V.c]=P}else c[O.r]=P}}}}Y.length>0&&(c["!rows"]=Y)}}();function PEt(e,t,r,n){var i=[],a=[],s=Mn(e["!ref"]),o="",l,c="",d=[],f=0,p=0,m=e["!rows"],x=Array.isArray(e),y={r:c},b,S=-1;for(p=s.s.c;p<=s.e.c;++p)d[p]=qi(p);for(f=s.s.r;f<=s.e.r;++f){for(a=[],c=Sa(f),p=s.s.c;p<=s.e.c;++p){l=d[p]+c;var _=x?(e[f]||[])[p]:e[l];_!==void 0&&(o=IEt(_,l,e,t))!=null&&a.push(o)}(a.length>0||m&&m[f])&&(y={r:c},m&&m[f]&&(b=m[f],b.hidden&&(y.hidden=1),S=-1,b.hpx?S=gE(b.hpx):b.hpt&&(S=b.hpt),S>-1&&(y.ht=S,y.customHeight=1),b.level&&(y.outlineLevel=b.level)),i[i.length]=Ft("row",a.join(""),y))}if(m)for(;f<m.length;++f)m&&m[f]&&(y={r:f+1},b=m[f],b.hidden&&(y.hidden=1),S=-1,b.hpx?S=gE(b.hpx):b.hpt&&(S=b.hpt),S>-1&&(y.ht=S,y.customHeight=1),b.level&&(y.outlineLevel=b.level),i[i.length]=Ft("row","",y));return i.join("")}function Ive(e,t,r,n){var i=[_a,Ft("worksheet",null,{xmlns:c1[0],"xmlns:r":Xa.r})],a=r.SheetNames[e],s=0,o="",l=r.Sheets[a];l==null&&(l={});var c=l["!ref"]||"A1",d=Mn(c);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),c=en(d)}n||(n={}),l["!comments"]=[];var f=[];gEt(l,r,e,t,i),i[i.length]=Ft("dimension",null,{ref:c}),i[i.length]=TEt(l,t,e,r),t.sheetFormat&&(i[i.length]=Ft("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(i[i.length]=CEt(l,l["!cols"])),i[s=i.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=PEt(l,t),o.length>0&&(i[i.length]=o)),i.length>s+1&&(i[i.length]="</sheetData>",i[s]=i[s].replace("/>",">")),l["!protect"]&&(i[i.length]=yEt(l["!protect"])),l["!autofilter"]!=null&&(i[i.length]=_Et(l["!autofilter"],l,r,e)),l["!merges"]!=null&&l["!merges"].length>0&&(i[i.length]=pEt(l["!merges"]));var p=-1,m,x=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach(function(y){y[1].Target&&(m={ref:y[0]},y[1].Target.charAt(0)!="#"&&(x=ii(n,-1,si(y[1].Target).replace(/#.*$/,""),Sn.HLINK),m["r:id"]="rId"+x),(p=y[1].Target.indexOf("#"))>-1&&(m.location=si(y[1].Target.slice(p+1))),y[1].Tooltip&&(m.tooltip=si(y[1].Tooltip)),i[i.length]=Ft("hyperlink",null,m))}),i[i.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(i[i.length]=SEt(l["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(i[i.length]=$s("ignoredErrors",Ft("ignoredError",null,{numberStoredAsText:1,sqref:c}))),f.length>0&&(x=ii(n,-1,"../drawings/drawing"+(e+1)+".xml",Sn.DRAW),i[i.length]=Ft("drawing",null,{"r:id":"rId"+x}),l["!drawing"]=f),l["!comments"].length>0&&(x=ii(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Sn.VML),i[i.length]=Ft("legacyDrawing",null,{"r:id":"rId"+x}),l["!legacy"]=x),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function REt(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var i=e.read_shift(2);e.l+=1;var a=e.read_shift(1);return e.l=n,a&7&&(r.level=a&7),a&16&&(r.hidden=!0),a&32&&(r.hpt=i/20),r}function jEt(e,t,r){var n=pt(145),i=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var a=320;i.hpx?a=gE(i.hpx)*20:i.hpt&&(a=i.hpt*20),n.write_shift(2,a),n.write_shift(1,0);var s=0;i.level&&(s|=i.level),i.hidden&&(s|=16),(i.hpx||i.hpt)&&(s|=32),n.write_shift(1,s),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var c={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,p=-1,m=d<<10;m<d+1<<10;++m){c.c=m;var x=Array.isArray(r)?(r[c.r]||[])[c.c]:r[Dr(c)];x&&(f<0&&(f=m),p=m)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,p))}var y=n.l;return n.l=l,n.write_shift(4,o),n.l=y,n.length>n.l?n.slice(0,n.l):n}function DEt(e,t,r,n){var i=jEt(n,r,t);(i.length>17||(t["!rows"]||[])[n])&&Ct(e,0,i)}var MEt=h1,FEt=$b;function LEt(){}function BEt(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=z1t(e),r}function UEt(e,t,r){r==null&&(r=pt(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var i=1;i<3;++i)r.write_shift(1,0);return kO({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),_1e(e,r),r.slice(0,r.l)}function $Et(e){var t=_u(e);return[t]}function zEt(e,t,r){return r==null&&(r=pt(8)),u1(t,r)}function HEt(e){var t=d1(e);return[t]}function WEt(e,t,r){return r==null&&(r=pt(4)),f1(t,r)}function VEt(e){var t=_u(e),r=e.read_shift(1);return[t,r,"b"]}function qEt(e,t,r){return r==null&&(r=pt(9)),u1(t,r),r.write_shift(1,e.v?1:0),r}function GEt(e){var t=d1(e),r=e.read_shift(1);return[t,r,"b"]}function KEt(e,t,r){return r==null&&(r=pt(5)),f1(t,r),r.write_shift(1,e.v?1:0),r}function XEt(e){var t=_u(e),r=e.read_shift(1);return[t,r,"e"]}function YEt(e,t,r){return r==null&&(r=pt(9)),u1(t,r),r.write_shift(1,e.v),r}function QEt(e){var t=d1(e),r=e.read_shift(1);return[t,r,"e"]}function JEt(e,t,r){return r==null&&(r=pt(8)),f1(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function ZEt(e){var t=_u(e),r=e.read_shift(4);return[t,r,"s"]}function eCt(e,t,r){return r==null&&(r=pt(12)),u1(t,r),r.write_shift(4,t.v),r}function tCt(e){var t=d1(e),r=e.read_shift(4);return[t,r,"s"]}function rCt(e,t,r){return r==null&&(r=pt(8)),f1(t,r),r.write_shift(4,t.v),r}function nCt(e){var t=_u(e),r=go(e);return[t,r,"n"]}function iCt(e,t,r){return r==null&&(r=pt(16)),u1(t,r),Ax(e.v,r),r}function Ove(e){var t=d1(e),r=go(e);return[t,r,"n"]}function aCt(e,t,r){return r==null&&(r=pt(12)),f1(t,r),Ax(e.v,r),r}function sCt(e){var t=_u(e),r=tz(e);return[t,r,"n"]}function oCt(e,t,r){return r==null&&(r=pt(12)),u1(t,r),N1e(e.v,r),r}function lCt(e){var t=d1(e),r=tz(e);return[t,r,"n"]}function cCt(e,t,r){return r==null&&(r=pt(8)),f1(t,r),N1e(e.v,r),r}function uCt(e){var t=_u(e),r=J$(e);return[t,r,"is"]}function dCt(e){var t=_u(e),r=yo(e);return[t,r,"str"]}function fCt(e,t,r){return r==null&&(r=pt(12+4*e.v.length)),u1(t,r),bs(e.v,r),r.length>r.l?r.slice(0,r.l):r}function hCt(e){var t=d1(e),r=yo(e);return[t,r,"str"]}function pCt(e,t,r){return r==null&&(r=pt(8+4*e.v.length)),f1(t,r),bs(e.v,r),r.length>r.l?r.slice(0,r.l):r}function mCt(e,t,r){var n=e.l+t,i=_u(e);i.r=r["!row"];var a=e.read_shift(1),s=[i,a,"b"];if(r.cellFormula){e.l+=2;var o=BP(e,n-e.l,r);s[3]=co(o,null,i,r.supbooks,r)}else e.l=n;return s}function gCt(e,t,r){var n=e.l+t,i=_u(e);i.r=r["!row"];var a=e.read_shift(1),s=[i,a,"e"];if(r.cellFormula){e.l+=2;var o=BP(e,n-e.l,r);s[3]=co(o,null,i,r.supbooks,r)}else e.l=n;return s}function xCt(e,t,r){var n=e.l+t,i=_u(e);i.r=r["!row"];var a=go(e),s=[i,a,"n"];if(r.cellFormula){e.l+=2;var o=BP(e,n-e.l,r);s[3]=co(o,null,i,r.supbooks,r)}else e.l=n;return s}function vCt(e,t,r){var n=e.l+t,i=_u(e);i.r=r["!row"];var a=yo(e),s=[i,a,"str"];if(r.cellFormula){e.l+=2;var o=BP(e,n-e.l,r);s[3]=co(o,null,i,r.supbooks,r)}else e.l=n;return s}var yCt=h1,bCt=$b;function wCt(e,t){return t==null&&(t=pt(4)),t.write_shift(4,e),t}function SCt(e,t){var r=e.l+t,n=h1(e),i=Z$(e),a=yo(e),s=yo(e),o=yo(e);e.l=r;var l={rfx:n,relId:i,loc:a,display:o};return s&&(l.Tooltip=s),l}function ECt(e,t){var r=pt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));$b({s:Gi(e[0]),e:Gi(e[0])},r),ez("rId"+t,r);var n=e[1].Target.indexOf("#"),i=n==-1?"":e[1].Target.slice(n+1);return bs(i||"",r),bs(e[1].Tooltip||"",r),bs("",r),r.slice(0,r.l)}function CCt(){}function kCt(e,t,r){var n=e.l+t,i=A1e(e),a=e.read_shift(1),s=[i];if(s[2]=a,r.cellFormula){var o=XSt(e,n-e.l,r);s[1]=o}else e.l=n;return s}function _Ct(e,t,r){var n=e.l+t,i=h1(e),a=[i];if(r.cellFormula){var s=QSt(e,n-e.l,r);a[1]=s,e.l=n}else e.l=n;return a}function NCt(e,t,r){r==null&&(r=pt(18));var n=UP(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var i=0;return t.hidden&&(i|=1),typeof n.width=="number"&&(i|=2),t.level&&(i|=t.level<<8),r.write_shift(2,i),r}var Pve=["left","right","top","bottom","header","footer"];function ACt(e){var t={};return Pve.forEach(function(r){t[r]=go(e)}),t}function TCt(e,t){return t==null&&(t=pt(6*8)),Yg(e),Pve.forEach(function(r){Ax(e[r],t)}),t}function ICt(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function OCt(e,t,r){r==null&&(r=pt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function PCt(e){var t=pt(24);return t.write_shift(4,4),t.write_shift(4,1),$b(e,t),t}function RCt(e,t){return t==null&&(t=pt(16*4+2)),t.write_shift(2,e.password?oz(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function jCt(){}function DCt(){}function MCt(e,t,r,n,i,a,s){if(!e)return e;var o=t||{};n||(n={"!id":{}});var l=o.dense?[]:{},c,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,p=!1,m,x,y,b,S,_,C,A,j,P=[];o.biff=12,o["!row"]=0;var O=0,D=!1,L=[],B={},H=o.supbooks||i.supbooks||[[]];if(H.sharedf=B,H.arrayf=L,H.SheetNames=i.SheetNames||i.Sheets.map(function(J){return J.name}),!o.supbooks&&(o.supbooks=H,i.Names))for(var z=0;z<i.Names.length;++z)H[0][z+1]=i.Names[z];var ie=[],X=[],W=!1;xE[16]={n:"BrtShortReal",f:Ove};var Q;if(mp(e,function(Y,pe,_e){if(!p)switch(_e){case 148:c=Y;break;case 0:m=Y,o.sheetRows&&o.sheetRows<=m.r&&(p=!0),A=Sa(b=m.r),o["!row"]=m.r,(Y.hidden||Y.hpt||Y.level!=null)&&(Y.hpt&&(Y.hpx=Jy(Y.hpt)),X[Y.r]=Y);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(x={t:Y[2]},Y[2]){case"n":x.v=Y[1];break;case"s":C=J2[Y[1]],x.v=C.t,x.r=C.r;break;case"b":x.v=!!Y[1];break;case"e":x.v=Y[1],o.cellText!==!1&&(x.w=gp[x.v]);break;case"str":x.t="s",x.v=Y[1];break;case"is":x.t="s",x.v=Y[1].t;break}if((y=s.CellXf[Y[0].iStyleRef])&&Ave(x,y.numFmtId,null,o,a,s),S=Y[0].c==-1?S+1:Y[0].c,o.dense?(l[b]||(l[b]=[]),l[b][S]=x):l[qi(S)+A]=x,o.cellFormula){for(D=!1,O=0;O<L.length;++O){var ee=L[O];m.r>=ee[0].s.r&&m.r<=ee[0].e.r&&S>=ee[0].s.c&&S<=ee[0].e.c&&(x.F=en(ee[0]),D=!0)}!D&&Y.length>3&&(x.f=Y[3])}if(d.s.r>m.r&&(d.s.r=m.r),d.s.c>S&&(d.s.c=S),d.e.r<m.r&&(d.e.r=m.r),d.e.c<S&&(d.e.c=S),o.cellDates&&y&&x.t=="n"&&Lb(Rr[y.numFmtId])){var de=wg(x.v);de&&(x.t="d",x.v=new Date(de.y,de.m-1,de.d,de.H,de.M,de.S,de.u))}Q&&(Q.type=="XLDAPR"&&(x.D=!0),Q=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;x={t:"z",v:void 0},S=Y[0].c==-1?S+1:Y[0].c,o.dense?(l[b]||(l[b]=[]),l[b][S]=x):l[qi(S)+A]=x,d.s.r>m.r&&(d.s.r=m.r),d.s.c>S&&(d.s.c=S),d.e.r<m.r&&(d.e.r=m.r),d.e.c<S&&(d.e.c=S),Q&&(Q.type=="XLDAPR"&&(x.D=!0),Q=void 0);break;case 176:P.push(Y);break;case 49:Q=((o.xlmeta||{}).Cell||[])[Y-1];break;case 494:var G=n["!id"][Y.relId];for(G?(Y.Target=G.Target,Y.loc&&(Y.Target+="#"+Y.loc),Y.Rel=G):Y.relId==""&&(Y.Target="#"+Y.loc),b=Y.rfx.s.r;b<=Y.rfx.e.r;++b)for(S=Y.rfx.s.c;S<=Y.rfx.e.c;++S)o.dense?(l[b]||(l[b]=[]),l[b][S]||(l[b][S]={t:"z",v:void 0}),l[b][S].l=Y):(_=Dr({c:S,r:b}),l[_]||(l[_]={t:"z",v:void 0}),l[_].l=Y);break;case 426:if(!o.cellFormula)break;L.push(Y),j=o.dense?l[b][S]:l[qi(S)+A],j.f=co(Y[1],d,{r:m.r,c:S},H,o),j.F=en(Y[0]);break;case 427:if(!o.cellFormula)break;B[Dr(Y[0].s)]=Y[1],j=o.dense?l[b][S]:l[qi(S)+A],j.f=co(Y[1],d,{r:m.r,c:S},H,o);break;case 60:if(!o.cellStyles)break;for(;Y.e>=Y.s;)ie[Y.e--]={width:Y.w/256,hidden:!!(Y.flags&1),level:Y.level},W||(W=!0,lz(Y.w/256)),G0(ie[Y.e+1]);break;case 161:l["!autofilter"]={ref:en(Y)};break;case 476:l["!margins"]=Y;break;case 147:i.Sheets[r]||(i.Sheets[r]={}),Y.name&&(i.Sheets[r].CodeName=Y.name),(Y.above||Y.left)&&(l["!outline"]={above:Y.above,left:Y.left});break;case 137:i.Views||(i.Views=[{}]),i.Views[0]||(i.Views[0]={}),Y.RTL&&(i.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!pe.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+_e.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(d.s.r<2e6||c&&(c.e.r>0||c.e.c>0||c.s.r>0||c.s.c>0))&&(l["!ref"]=en(c||d)),o.sheetRows&&l["!ref"]){var te=Mn(l["!ref"]);o.sheetRows<=+te.e.r&&(te.e.r=o.sheetRows-1,te.e.r>d.e.r&&(te.e.r=d.e.r),te.e.r<te.s.r&&(te.s.r=te.e.r),te.e.c>d.e.c&&(te.e.c=d.e.c),te.e.c<te.s.c&&(te.s.c=te.e.c),l["!fullref"]=l["!ref"],l["!ref"]=en(te))}return P.length>0&&(l["!merges"]=P),ie.length>0&&(l["!cols"]=ie),X.length>0&&(l["!rows"]=X),l}function FCt(e,t,r,n,i,a,s){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=Pi(t),t.z=t.z||Rr[14],t.v=Qa(Oi(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var l={r,c:n};switch(l.s=gm(i.cellXfs,t,i),t.l&&a["!links"].push([Dr(l),t.l]),t.c&&a["!comments"].push([Dr(l),t.c]),t.t){case"s":case"str":return i.bookSST?(o=hz(i.Strings,t.v,i.revStrings),l.t="s",l.v=o,s?Ct(e,18,rCt(t,l)):Ct(e,7,eCt(t,l))):(l.t="str",s?Ct(e,17,pCt(t,l)):Ct(e,6,fCt(t,l))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?s?Ct(e,13,cCt(t,l)):Ct(e,2,oCt(t,l)):s?Ct(e,16,aCt(t,l)):Ct(e,5,iCt(t,l)),!0;case"b":return l.t="b",s?Ct(e,15,KEt(t,l)):Ct(e,4,qEt(t,l)),!0;case"e":return l.t="e",s?Ct(e,14,JEt(t,l)):Ct(e,3,YEt(t,l)),!0}return s?Ct(e,12,WEt(t,l)):Ct(e,1,zEt(t,l)),!0}function LCt(e,t,r,n){var i=Mn(t["!ref"]||"A1"),a,s="",o=[];Ct(e,145);var l=Array.isArray(t),c=i.e.r;t["!rows"]&&(c=Math.max(i.e.r,t["!rows"].length-1));for(var d=i.s.r;d<=c;++d){s=Sa(d),DEt(e,t,i,d);var f=!1;if(d<=i.e.r)for(var p=i.s.c;p<=i.e.c;++p){d===i.s.r&&(o[p]=qi(p)),a=o[p]+s;var m=l?(t[d]||[])[p]:t[a];if(!m){f=!1;continue}f=FCt(e,m,d,p,n,t,f)}}Ct(e,146)}function BCt(e,t){!t||!t["!merges"]||(Ct(e,177,wCt(t["!merges"].length)),t["!merges"].forEach(function(r){Ct(e,176,bCt(r))}),Ct(e,178))}function UCt(e,t){!t||!t["!cols"]||(Ct(e,390),t["!cols"].forEach(function(r,n){r&&Ct(e,60,NCt(n,r))}),Ct(e,391))}function $Ct(e,t){!t||!t["!ref"]||(Ct(e,648),Ct(e,649,PCt(Mn(t["!ref"]))),Ct(e,650))}function zCt(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var i=ii(r,-1,n[1].Target.replace(/#.*$/,""),Sn.HLINK);Ct(e,494,ECt(n,i))}}),delete t["!links"]}function HCt(e,t,r,n){if(t["!comments"].length>0){var i=ii(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Sn.VML);Ct(e,551,ez("rId"+i)),t["!legacy"]=i}}function WCt(e,t,r,n){if(t["!autofilter"]){var i=t["!autofilter"],a=typeof i.ref=="string"?i.ref:en(i.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=Dl(a);o.s.r==o.e.r&&(o.e.r=Dl(t["!ref"]).e.r,a=en(o));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Ct(e,161,$b(Mn(a))),Ct(e,162)}}function VCt(e,t,r){Ct(e,133),Ct(e,137,OCt(t,r)),Ct(e,138),Ct(e,134)}function qCt(e,t){t["!protect"]&&Ct(e,535,RCt(t["!protect"]))}function GCt(e,t,r,n){var i=Ol(),a=r.SheetNames[e],s=r.Sheets[a]||{},o=a;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var l=Mn(s["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return s["!links"]=[],s["!comments"]=[],Ct(i,129),(r.vbaraw||s["!outline"])&&Ct(i,147,UEt(o,s["!outline"])),Ct(i,148,FEt(l)),VCt(i,s,r.Workbook),UCt(i,s),LCt(i,s,e,t),qCt(i,s),WCt(i,s,r,e),BCt(i,s),zCt(i,s,n),s["!margins"]&&Ct(i,476,TCt(s["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&$Ct(i,s),HCt(i,s,e,n),Ct(i,130),i.end()}function KCt(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var s=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);s&&(t[+s[1]]=r?+s[2]:s[2])});var i=Dn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){n=a.replace(/<.*?>/g,"")}),[t,i,n]}function XCt(e,t,r,n,i,a){var s=a||{"!type":"chart"};if(!e)return a;var o=0,l=0,c="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var p=KCt(f);d.s.r=d.s.c=0,d.e.c=o,c=qi(o),p[0].forEach(function(m,x){s[c+Sa(x)]={t:"n",v:m,z:p[1]},l=x}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(s["!ref"]=en(d)),s}function YCt(e,t,r,n,i){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},s,o=e.match(Tve);return o&&pz(o[0],a,i,r),(s=e.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=s[1]),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}function QCt(e,t){e.l+=10;var r=yo(e);return{name:r}}function JCt(e,t,r,n,i){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},s=!1;return mp(e,function(l,c,d){switch(d){case 550:a["!rel"]=l;break;case 651:i.Sheets[r]||(i.Sheets[r]={}),l.name&&(i.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!(c.T>0)){if(!(c.T<0)){if(!s||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}var mz=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],ZCt=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],ekt=[],tkt=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function tte(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],i=0;i!=t.length;++i){var a=t[i];if(n[a[0]]==null)n[a[0]]=a[1];else switch(a[2]){case"bool":typeof n[a[0]]=="string"&&(n[a[0]]=Ai(n[a[0]]));break;case"int":typeof n[a[0]]=="string"&&(n[a[0]]=parseInt(n[a[0]],10));break}}}function rte(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Ai(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function Rve(e){rte(e.WBProps,mz),rte(e.CalcPr,tkt),tte(e.WBView,ZCt),tte(e.Sheets,ekt),qv.date1904=Ai(e.WBProps.date1904)}function rkt(e){return!e.Workbook||!e.Workbook.WBProps?"false":Ai(e.Workbook.WBProps.date1904)?"true":"false"}var nkt="][*?/\\".split("");function jve(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return nkt.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function ikt(e,t,r){e.forEach(function(n,i){jve(n);for(var a=0;a<i;++a)if(n==e[a])throw new Error("Duplicate Sheet Name: "+n);if(r){var s=t&&t[i]&&t[i].CodeName||n;if(s.charCodeAt(0)==95&&s.length>22)throw new Error("Bad Code Name: Worksheet"+s)}})}function akt(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];ikt(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)rEt(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var skt=/<\w+:workbook/;function okt(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,i="xmlns",a={},s=0;if(e.replace(_o,function(l,c){var d=Fr(l);switch(Tf(d[0])){case"<?xml":break;case"<workbook":l.match(skt)&&(i="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=d[i];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":mz.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Ai(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=di(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Dn(di(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":a={},a.Name=di(d.name),d.comment&&(a.Comment=d.comment),d.localSheetId&&(a.Sheet=+d.localSheetId),Ai(d.hidden||"0")&&(a.Hidden=!0),s=c+l.length;break;case"</definedName>":a.Ref=Dn(di(e.slice(s,c))),r.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),c1.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return Rve(r),r}function Dve(e){var t=[_a];t[t.length]=Ft("workbook",null,{xmlns:c1[0],"xmlns:r":Xa.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(mz.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Ft("workbookPr",null,n);var i=e.Workbook&&e.Workbook.Sheets||[],a=0;if(i&&i[0]&&i[0].Hidden){for(t[t.length]="<bookViews>",a=0;a!=e.SheetNames.length&&!(!i[a]||!i[a].Hidden);++a);a==e.SheetNames.length&&(a=0),t[t.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",a=0;a!=e.SheetNames.length;++a){var s={name:si(e.SheetNames[a].slice(0,31))};if(s.sheetId=""+(a+1),s["r:id"]="rId"+(a+1),i[a])switch(i[a].Hidden){case 1:s.state="hidden";break;case 2:s.state="veryHidden";break}t[t.length]=Ft("sheet",null,s)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(t[t.length]=Ft("definedName",si(o.Ref),l))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function lkt(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=R5(e),r.name=yo(e),r}function ckt(e,t){return t||(t=pt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),ez(e.strRelID,t),bs(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function ukt(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var i=t>8?yo(e):"";return i.length>0&&(r.CodeName=i),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function dkt(e,t){t||(t=pt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),_1e(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function fkt(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function hkt(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var i=e.read_shift(4),a=H1t(e),s=YSt(e,0,r),o=Z$(e);e.l=n;var l={Name:a,Ptg:s};return i<268435455&&(l.Sheet=i),o&&(l.Comment=o),l}function pkt(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],i=!1;t||(t={}),t.biff=12;var a=[],s=[[]];return s.SheetNames=[],s.XTI=[],xE[16]={n:"BrtFRTArchID$",f:fkt},mp(e,function(l,c,d){switch(d){case 156:s.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(t.SID=l.Sheet),l.Ref=co(l.Ptg,null,null,s,t),delete t.SID,delete l.Ptg,a.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:s[0].length?s.push([d,l]):s[0]=[d,l],s[s.length-1].XTI=[];break;case 362:s.length===0&&(s[0]=[],s[0].XTI=[]),s[s.length-1].XTI=s[s.length-1].XTI.concat(l),s.XTI=s.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),i=!0;break;case 36:n.pop(),i=!1;break;case 37:n.push(d),i=!0;break;case 38:n.pop(),i=!1;break;case 16:break;default:if(!c.T){if(!i||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),Rve(r),r.Names=a,r.supbooks=s,r}function mkt(e,t){Ct(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,i={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Ct(e,156,ckt(i))}Ct(e,144)}function gkt(e,t){t||(t=pt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return bs("SheetJS",t),bs(vO.version,t),bs(vO.version,t),bs("7262",t),t.length>t.l?t.slice(0,t.l):t}function xkt(e,t){t||(t=pt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function vkt(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,i=-1,a=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&i==-1?i=n:r[n].Hidden==1&&a==-1&&(a=n);a>i||(Ct(e,135),Ct(e,158,xkt(i)),Ct(e,136))}}function ykt(e,t){var r=Ol();return Ct(r,131),Ct(r,128,gkt()),Ct(r,153,dkt(e.Workbook&&e.Workbook.WBProps||null)),vkt(r,e),mkt(r,e),Ct(r,132),r.end()}function bkt(e,t,r){return t.slice(-4)===".bin"?pkt(e,r):okt(e,r)}function wkt(e,t,r,n,i,a,s,o){return t.slice(-4)===".bin"?MCt(e,n,r,i,a,s,o):hEt(e,n,r,i,a,s,o)}function Skt(e,t,r,n,i,a,s,o){return t.slice(-4)===".bin"?JCt(e,n,r,i,a):YCt(e,n,r,i,a)}function Ekt(e,t,r,n,i,a,s,o){return t.slice(-4)===".bin"?k2t():_2t()}function Ckt(e,t,r,n,i,a,s,o){return t.slice(-4)===".bin"?E2t():C2t()}function kkt(e,t,r,n){return t.slice(-4)===".bin"?bwt(e,r,n):lwt(e,r,n)}function _kt(e,t,r){return mve(e,r)}function Nkt(e,t,r){return t.slice(-4)===".bin"?Nbt(e,r):Cbt(e,r)}function Akt(e,t,r){return t.slice(-4)===".bin"?v2t(e,r):c2t(e,r)}function Tkt(e,t,r){return t.slice(-4)===".bin"?s2t(e):i2t(e)}function Ikt(e,t,r,n){return r.slice(-4)===".bin"?o2t(e,t,r,n):void 0}function Okt(e,t,r){return t.slice(-4)===".bin"?t2t(e,t,r):n2t(e,t,r)}function Pkt(e,t,r){return(t.slice(-4)===".bin"?ykt:Dve)(e)}function Rkt(e,t,r,n,i){return(t.slice(-4)===".bin"?GCt:Ive)(e,r,n,i)}function jkt(e,t,r){return(t.slice(-4)===".bin"?Iwt:hve)(e,r)}function Dkt(e,t,r){return(t.slice(-4)===".bin"?Ibt:ave)(e,r)}function Mkt(e,t,r){return(t.slice(-4)===".bin"?y2t:vve)(e)}function Fkt(e){return(e.slice(-4)===".bin"?r2t:gve)()}var Mve=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,Fve=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Bu(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var i=e.match(Mve),a,s,o,l;if(i)for(l=0;l!=i.length;++l)a=i[l].match(Fve),(s=a[1].indexOf(":"))===-1?n[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(s+1),n[o]=a[2].slice(1,a[2].length-1));return n}function Lkt(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(Mve),i,a,s,o;if(n)for(o=0;o!=n.length;++o)i=n[o].match(Fve),(a=i[1].indexOf(":"))===-1?r[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?s="xmlns"+i[1].slice(6):s=i[1].slice(a+1),r[s]=i[2].slice(1,i[2].length-1));return r}var eS;function Bkt(e,t){var r=eS[e]||Dn(e);return r==="General"?_x(t):yu(r,t)}function Ukt(e,t,r,n){var i=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":i=Ai(n);break;case"i2":case"int":i=parseInt(n,10);break;case"r4":case"float":i=parseFloat(n);break;case"date":case"dateTime.tz":i=Oi(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Dn(t)]=i}function $kt(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||gp[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=lE(e.v):e.w=_x(e.v):e.w=Bkt(t||"General",e.v)}catch(a){if(r.WTF)throw a}try{var n=eS[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&Lb(n)){var i=wg(e.v);i&&(e.t="d",e.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}catch(a){if(r.WTF)throw a}}}function zkt(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=ewt[n.Pattern]||n.Pattern)}e[t.ID]=t}function Hkt(e,t,r,n,i,a,s,o,l,c){var d="General",f=n.StyleID,p={};c=c||{};var m=[],x=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&s&&(f=s.StyleID);a[f]!==void 0&&(a[f].nf&&(d=a[f].nf),a[f].Interior&&m.push(a[f].Interior),!!a[f].Parent);)f=a[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ai(e);break;case"String":n.t="s",n.r=yee(Dn(e)),n.v=e.indexOf("<")>-1?Dn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Oi(e)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=Dn(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=O1e[e],c.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=yee(t||e));break}if($kt(n,d,c),c.cellFormula!==!1)if(n.Formula){var y=Dn(n.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),n.f=Vv(y,i),delete n.Formula,n.ArrayRange=="RC"?n.F=Vv("RC:RC",i):n.ArrayRange&&(n.F=Vv(n.ArrayRange,i),l.push([Mn(n.F),n.F]))}else for(x=0;x<l.length;++x)i.r>=l[x][0].s.r&&i.r<=l[x][0].e.r&&i.c>=l[x][0].s.c&&i.c<=l[x][0].e.c&&(n.F=l[x][1]);c.cellStyles&&(m.forEach(function(b){!p.patternType&&b.patternType&&(p.patternType=b.patternType)}),n.s=p),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function Wkt(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function DM(e,t){var r=t||{};Bb();var n=h2(G$(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=di(n));var i=n.slice(0,1024).toLowerCase(),a=!1;if(i=i.replace(/".*?"/g,""),(i.indexOf(">")&1023)>Math.min(i.indexOf(",")&1023,i.indexOf(";")&1023)){var s=Pi(r);return s.type="string",Qy.to_workbook(n,s)}if(i.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(et){i.indexOf("<"+et)>=0&&(a=!0)}),a)return T_t(n,r);eS={"General Number":"General","General Date":Rr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Rr[15],"Short Date":Rr[14],"Long Time":Rr[19],"Medium Time":Rr[18],"Short Time":Rr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Rr[2],Standard:Rr[4],Percent:Rr[10],Scientific:Rr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],c,d={},f=[],p=r.dense?[]:{},m="",x={},y={},b=Bu('<Data ss:Type="String">'),S=0,_=0,C=0,A={s:{r:2e6,c:2e6},e:{r:0,c:0}},j={},P={},O="",D=0,L=[],B={},H={},z=0,ie=[],X=[],W={},Q=[],te,J=!1,Y=[],pe=[],_e={},ee=0,de=0,G={Sheets:[],WBProps:{date1904:!1}},q={};dE.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ne="";o=dE.exec(n);)switch(o[3]=(ne=o[3]).toLowerCase()){case"data":if(ne=="data"){if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?Hkt(n.slice(S,o.index),O,b,l[l.length-1][0]=="comment"?W:x,{c:_,r:C},j,Q[_],y,Y,r):(O="",b=Bu(o[0]),S=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(X.length>0&&(x.c=X),(!r.sheetRows||r.sheetRows>C)&&x.v!==void 0&&(r.dense?(p[C]||(p[C]=[]),p[C][_]=x):p[qi(_)+Sa(C)]=x),x.HRef&&(x.l={Target:Dn(x.HRef)},x.HRefScreenTip&&(x.l.Tooltip=x.HRefScreenTip),delete x.HRef,delete x.HRefScreenTip),(x.MergeAcross||x.MergeDown)&&(ee=_+(parseInt(x.MergeAcross,10)|0),de=C+(parseInt(x.MergeDown,10)|0),L.push({s:{c:_,r:C},e:{c:ee,r:de}})),!r.sheetStubs)x.MergeAcross?_=ee+1:++_;else if(x.MergeAcross||x.MergeDown){for(var Se=_;Se<=ee;++Se)for(var re=C;re<=de;++re)(Se>_||re>C)&&(r.dense?(p[re]||(p[re]=[]),p[re][Se]={t:"z"}):p[qi(Se)+Sa(re)]={t:"z"});_=ee+1}else++_;else x=Lkt(o[0]),x.Index&&(_=+x.Index-1),_<A.s.c&&(A.s.c=_),_>A.e.c&&(A.e.c=_),o[0].slice(-2)==="/>"&&++_,X=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(C<A.s.r&&(A.s.r=C),C>A.e.r&&(A.e.r=C),o[0].slice(-2)==="/>"&&(y=Bu(o[0]),y.Index&&(C=+y.Index-1)),_=0,++C):(y=Bu(o[0]),y.Index&&(C=+y.Index-1),_e={},(y.AutoFitHeight=="0"||y.Height)&&(_e.hpx=parseInt(y.Height,10),_e.hpt=gE(_e.hpx),pe[C]=_e),y.Hidden=="1"&&(_e.hidden=!0,pe[C]=_e));break;case"worksheet":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));f.push(m),A.s.r<=A.e.r&&A.s.c<=A.e.c&&(p["!ref"]=en(A),r.sheetRows&&r.sheetRows<=A.e.r&&(p["!fullref"]=p["!ref"],A.e.r=r.sheetRows-1,p["!ref"]=en(A))),L.length&&(p["!merges"]=L),Q.length>0&&(p["!cols"]=Q),pe.length>0&&(p["!rows"]=pe),d[m]=p}else A={s:{r:2e6,c:2e6},e:{r:0,c:0}},C=_=0,l.push([o[3],!1]),c=Bu(o[0]),m=Dn(c.Name),p=r.dense?[]:{},L=[],Y=[],pe=[],q={name:m,Hidden:0},G.Sheets.push(q);break;case"table":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),Q=[],J=!1}break;case"style":o[1]==="/"?zkt(j,P,r):P=Bu(o[0]);break;case"numberformat":P.nf=Dn(Bu(o[0]).Format||"General"),eS[P.nf]&&(P.nf=eS[P.nf]);for(var ae=0;ae!=392&&Rr[ae]!=P.nf;++ae);if(ae==392){for(ae=57;ae!=392;++ae)if(Rr[ae]==null){Rh(P.nf,ae);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(te=Bu(o[0]),te.Hidden&&(te.hidden=!0,delete te.Hidden),te.Width&&(te.wpx=parseInt(te.Width,10)),!J&&te.wpx>10){J=!0,po=dve;for(var ge=0;ge<Q.length;++ge)Q[ge]&&G0(Q[ge])}J&&G0(te),Q[te.Index-1||Q.length]=te;for(var Ee=0;Ee<+te.Span;++Ee)Q[Q.length]=Pi(te);break;case"namedrange":if(o[1]==="/")break;G.Names||(G.Names=[]);var V=Fr(o[0]),Ae={Name:V.Name,Ref:Vv(V.RefersTo.slice(1),{r:0,c:0})};G.Sheets.length>0&&(Ae.Sheet=G.Sheets.length-1),G.Names.push(Ae);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?O+=n.slice(D,o.index):D=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;P.Interior=Bu(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?pvt(B,ne,n.slice(z,o.index)):z=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));Wkt(W),X.push(W)}else l.push([o[3],!1]),c=Bu(o[0]),W={a:c.Author};break;case"autofilter":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Pe=Bu(o[0]);p["!autofilter"]={ref:Vv(Pe.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return ote(n,r);var ze=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ze=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ze=!1}break;case"excelworkbook":switch(o[3]){case"date1904":G.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ze=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:ze=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(z,o.index)){case"SheetHidden":q.Hidden=1;break;case"SheetVeryHidden":q.Hidden=2;break}else z=o.index+o[0].length;break;case"header":p["!margins"]||Yg(p["!margins"]={},"xlml"),isNaN(+Fr(o[0]).Margin)||(p["!margins"].header=+Fr(o[0]).Margin);break;case"footer":p["!margins"]||Yg(p["!margins"]={},"xlml"),isNaN(+Fr(o[0]).Margin)||(p["!margins"].footer=+Fr(o[0]).Margin);break;case"pagemargins":var De=Fr(o[0]);p["!margins"]||Yg(p["!margins"]={},"xlml"),isNaN(+De.Top)||(p["!margins"].top=+De.Top),isNaN(+De.Left)||(p["!margins"].left=+De.Left),isNaN(+De.Right)||(p["!margins"].right=+De.Right),isNaN(+De.Bottom)||(p["!margins"].bottom=+De.Bottom);break;case"displayrighttoleft":G.Views||(G.Views=[]),G.Views[0]||(G.Views[0]={}),G.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ze=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ze=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ze=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ze=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ze=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ze=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ze=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ze=!1}break;case"smarttags":break;default:ze=!1;break}if(ze||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?Ukt(H,ne,ie,n.slice(z,o.index)):(ie=o,z=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var $e={};return!r.bookSheets&&!r.bookProps&&($e.Sheets=d),$e.SheetNames=f,$e.Workbook=G,$e.SSF=Pi(Rr),$e.Props=B,$e.Custprops=H,$e}function U5(e,t){switch(xz(t=t||{}),t.type||"base64"){case"base64":return DM(xc(e),t);case"binary":case"buffer":case"file":return DM(e,t);case"array":return DM(pm(e),t)}}function Vkt(e,t){var r=[];return e.Props&&r.push(mvt(e.Props,t)),e.Custprops&&r.push(gvt(e.Props,e.Custprops)),r.join("")}function qkt(){return""}function Gkt(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,i){var a=[];a.push(Ft("NumberFormat",null,{"ss:Format":si(Rr[n.numFmtId])}));var s={"ss:ID":"s"+(21+i)};r.push(Ft("Style",a.join(""),s))}),Ft("Styles",r.join(""))}function Lve(e){return Ft("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+dz(e.Ref,{r:0,c:0})})}function Kkt(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var i=t[n];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||r.push(Lve(i)))}return Ft("Names",r.join(""))}function Xkt(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var i=n.Workbook.Names,a=[],s=0;s<i.length;++s){var o=i[s];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||a.push(Lve(o)))}return a.join("")}function Ykt(e,t,r,n){if(!e)return"";var i=[];if(e["!margins"]&&(i.push("<PageSetup>"),e["!margins"].header&&i.push(Ft("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&i.push(Ft("Footer",null,{"x:Margin":e["!margins"].footer})),i.push(Ft("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),i.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)i.push(Ft("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<r&&!(n.Workbook.Sheets[a]&&!n.Workbook.Sheets[a].Hidden);++a);a==r&&i.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),e["!protect"]&&(i.push($s("ProtectContents","True")),e["!protect"].objects&&i.push($s("ProtectObjects","True")),e["!protect"].scenarios&&i.push($s("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?i.push($s("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&i.push($s("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(s){e["!protect"][s[0]]&&i.push("<"+s[1]+"/>")})),i.length==0?"":Ft("WorksheetOptions",i.join(""),{xmlns:Jl.x})}function Qkt(e){return e.map(function(t){var r=v1t(t.t||""),n=Ft("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Ft("Comment",n,{"ss:Author":t.a})}).join("")}function Jkt(e,t,r,n,i,a,s){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+si(dz(e.f,s))),e.F&&e.F.slice(0,t.length)==t){var l=Gi(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==s.r?"":"["+(l.r-s.r)+"]")+"C"+(l.c==s.c?"":"["+(l.c-s.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=si(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=si(e.l.Tooltip))),r["!merges"])for(var c=r["!merges"],d=0;d!=c.length;++d)c[d].s.c!=s.c||c[d].s.r!=s.r||(c[d].e.c>c[d].s.c&&(o["ss:MergeAcross"]=c[d].e.c-c[d].s.c),c[d].e.r>c[d].s.r&&(o["ss:MergeDown"]=c[d].e.r-c[d].s.r));var f="",p="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",p=String(e.v);break;case"b":f="Boolean",p=e.v?"1":"0";break;case"e":f="Error",p=gp[e.v];break;case"d":f="DateTime",p=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Rr[14]);break;case"s":f="String",p=x1t(e.v||"");break}var m=gm(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+m),o["ss:Index"]=s.c+1;var x=e.v!=null?p:"",y=e.t=="z"?"":'<Data ss:Type="'+f+'">'+x+"</Data>";return(e.c||[]).length>0&&(y+=Qkt(e.c)),Ft("Cell",y,o)}function Zkt(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Jy(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function e_t(e,t,r,n){if(!e["!ref"])return"";var i=Mn(e["!ref"]),a=e["!merges"]||[],s=0,o=[];e["!cols"]&&e["!cols"].forEach(function(b,S){G0(b);var _=!!b.width,C=UP(S,b),A={"ss:Index":S+1};_&&(A["ss:Width"]=pE(C.width)),b.hidden&&(A["ss:Hidden"]="1"),o.push(Ft("Column",null,A))});for(var l=Array.isArray(e),c=i.s.r;c<=i.e.r;++c){for(var d=[Zkt(c,(e["!rows"]||[])[c])],f=i.s.c;f<=i.e.c;++f){var p=!1;for(s=0;s!=a.length;++s)if(!(a[s].s.c>f)&&!(a[s].s.r>c)&&!(a[s].e.c<f)&&!(a[s].e.r<c)){(a[s].s.c!=f||a[s].s.r!=c)&&(p=!0);break}if(!p){var m={r:c,c:f},x=Dr(m),y=l?(e[c]||[])[f]:e[x];d.push(Jkt(y,x,e,t,r,n,m))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function t_t(e,t,r){var n=[],i=r.SheetNames[e],a=r.Sheets[i],s=a?Xkt(a,t,e,r):"";return s.length>0&&n.push("<Names>"+s+"</Names>"),s=a?e_t(a,t,e,r):"",s.length>0&&n.push("<Table>"+s+"</Table>"),n.push(Ykt(a,t,e,r)),n.join("")}function r_t(e,t){t||(t={}),e.SSF||(e.SSF=Pi(Rr)),e.SSF&&(Bb(),RP(e.SSF),t.revssf=DP(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],gm(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Vkt(e,t)),r.push(qkt()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Ft("Worksheet",t_t(n,t,e),{"ss:Name":si(e.SheetNames[n])}));return r[2]=Gkt(e,t),r[3]=Kkt(e),_a+Ft("Workbook",r.join(""),{xmlns:Jl.ss,"xmlns:o":Jl.o,"xmlns:x":Jl.x,"xmlns:ss":Jl.ss,"xmlns:dt":Jl.dt,"xmlns:html":Jl.html})}function n_t(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=K1t(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=X1t(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var i_t=[60,1084,2066,2165,2175];function a_t(e,t,r,n,i){var a=n,s=[],o=r.slice(r.l,r.l+a);if(i&&i.enc&&i.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:i.enc.insitu(o)}s.push(o),r.l+=a;for(var l=bh(r,r.l),c=$5[l],d=0;c!=null&&i_t.indexOf(l)>-1;)a=bh(r,r.l+2),d=r.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),o=r.slice(d,r.l+4+a),s.push(o),r.l+=4+a,c=$5[l=bh(r,r.l)];var f=vs(s);Ls(f,0);var p=0;f.lens=[];for(var m=0;m<s.length;++m)f.lens.push(p),p+=s[m].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,i)}function Rd(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Rr[n])}catch(a){if(t.WTF)throw a}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||gp[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=lE(e.v):e.w=_x(e.v):e.w=yu(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(a){if(t.WTF)throw a}if(t.cellDates&&n&&e.t=="n"&&Lb(Rr[n]||String(n))){var i=wg(e.v);i&&(e.t="d",e.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}}function ON(e,t,r){return{v:e,ixfe:t,t:r}}function s_t(e,t){var r={opts:{}},n={},i=t.dense?[]:{},a={},s={},o=null,l=[],c="",d={},f,p="",m,x,y,b,S={},_=[],C,A,j=[],P=[],O={Sheets:[],WBProps:{date1904:!1},Views:[{}]},D={},L=function(Xe){return Xe<8?Gg[Xe]:Xe<64&&P[Xe-8]||Gg[Xe]},B=function(Xe,Te,He){var je=Te.XF.data;if(!(!je||!je.patternType||!He||!He.cellStyles)){Te.s={},Te.s.patternType=je.patternType;var we;(we=hE(L(je.icvFore)))&&(Te.s.fgColor={rgb:we}),(we=hE(L(je.icvBack)))&&(Te.s.bgColor={rgb:we})}},H=function(Xe,Te,He){if(!(_e>1)&&!(He.sheetRows&&Xe.r>=He.sheetRows)){if(He.cellStyles&&Te.XF&&Te.XF.data&&B(Xe,Te,He),delete Te.ixfe,delete Te.XF,f=Xe,p=Dr(Xe),(!s||!s.s||!s.e)&&(s={s:{r:0,c:0},e:{r:0,c:0}}),Xe.r<s.s.r&&(s.s.r=Xe.r),Xe.c<s.s.c&&(s.s.c=Xe.c),Xe.r+1>s.e.r&&(s.e.r=Xe.r+1),Xe.c+1>s.e.c&&(s.e.c=Xe.c+1),He.cellFormula&&Te.f){for(var je=0;je<_.length;++je)if(!(_[je][0].s.c>Xe.c||_[je][0].s.r>Xe.r)&&!(_[je][0].e.c<Xe.c||_[je][0].e.r<Xe.r)){Te.F=en(_[je][0]),(_[je][0].s.c!=Xe.c||_[je][0].s.r!=Xe.r)&&delete Te.f,Te.f&&(Te.f=""+co(_[je][1],s,Xe,Y,z));break}}He.dense?(i[Xe.r]||(i[Xe.r]=[]),i[Xe.r][Xe.c]=Te):i[p]=Te}},z={enc:!1,sbcch:0,snames:[],sharedf:S,arrayf:_,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(z.password=t.password);var ie,X=[],W=[],Q=[],te=[],J=!1,Y=[];Y.SheetNames=z.snames,Y.sharedf=z.sharedf,Y.arrayf=z.arrayf,Y.names=[],Y.XTI=[];var pe=0,_e=0,ee=0,de=[],G=[],q;z.codepage=1200,nd(1200);for(var ne=!1;e.l<e.length-1;){var Se=e.l,re=e.read_shift(2);if(re===0&&pe===10)break;var ae=e.l===e.length?0:e.read_shift(2),ge=$5[re];if(ge&&ge.f){if(t.bookSheets&&pe===133&&re!==133)break;if(pe=re,ge.r===2||ge.r==12){var Ee=e.read_shift(2);if(ae-=2,!z.enc&&Ee!==re&&((Ee&255)<<8|Ee>>8)!==re)throw new Error("rt mismatch: "+Ee+"!="+re);ge.r==12&&(e.l+=10,ae-=10)}var V={};if(re===10?V=ge.f(e,ae,z):V=a_t(re,ge,e,ae,z),_e==0&&[9,521,1033,2057].indexOf(pe)===-1)continue;switch(re){case 34:r.opts.Date1904=O.WBProps.date1904=V;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(z.enc||(e.l=0),z.enc=V,!t.password)throw new Error("File is password-protected");if(V.valid==null)throw new Error("Encryption scheme unsupported");if(!V.valid)throw new Error("Password is incorrect");break;case 92:z.lastuser=V;break;case 66:var Ae=Number(V);switch(Ae){case 21010:Ae=1200;break;case 32768:Ae=1e4;break;case 32769:Ae=1252;break}nd(z.codepage=Ae),ne=!0;break;case 317:z.rrtabid=V;break;case 25:z.winlocked=V;break;case 439:r.opts.RefreshAll=V;break;case 12:r.opts.CalcCount=V;break;case 16:r.opts.CalcDelta=V;break;case 17:r.opts.CalcIter=V;break;case 13:r.opts.CalcMode=V;break;case 14:r.opts.CalcPrecision=V;break;case 95:r.opts.CalcSaveRecalc=V;break;case 15:z.CalcRefMode=V;break;case 2211:r.opts.FullCalc=V;break;case 129:V.fDialog&&(i["!type"]="dialog"),V.fBelow||((i["!outline"]||(i["!outline"]={})).above=!0),V.fRight||((i["!outline"]||(i["!outline"]={})).left=!0);break;case 224:j.push(V);break;case 430:Y.push([V]),Y[Y.length-1].XTI=[];break;case 35:case 547:Y[Y.length-1].push(V);break;case 24:case 536:q={Name:V.Name,Ref:co(V.rgce,s,null,Y,z)},V.itab>0&&(q.Sheet=V.itab-1),Y.names.push(q),Y[0]||(Y[0]=[],Y[0].XTI=[]),Y[Y.length-1].push(V),V.Name=="_xlnm._FilterDatabase"&&V.itab>0&&V.rgce&&V.rgce[0]&&V.rgce[0][0]&&V.rgce[0][0][0]=="PtgArea3d"&&(G[V.itab-1]={ref:en(V.rgce[0][0][1][2])});break;case 22:z.ExternCount=V;break;case 23:Y.length==0&&(Y[0]=[],Y[0].XTI=[]),Y[Y.length-1].XTI=Y[Y.length-1].XTI.concat(V),Y.XTI=Y.XTI.concat(V);break;case 2196:if(z.biff<8)break;q!=null&&(q.Comment=V[1]);break;case 18:i["!protect"]=V;break;case 19:V!==0&&z.WTF&&console.error("Password verifier: "+V);break;case 133:a[V.pos]=V,z.snames.push(V.name);break;case 10:{if(--_e)break;if(s.e){if(s.e.r>0&&s.e.c>0){if(s.e.r--,s.e.c--,i["!ref"]=en(s),t.sheetRows&&t.sheetRows<=s.e.r){var Pe=s.e.r;s.e.r=t.sheetRows-1,i["!fullref"]=i["!ref"],i["!ref"]=en(s),s.e.r=Pe}s.e.r++,s.e.c++}X.length>0&&(i["!merges"]=X),W.length>0&&(i["!objects"]=W),Q.length>0&&(i["!cols"]=Q),te.length>0&&(i["!rows"]=te),O.Sheets.push(D)}c===""?d=i:n[c]=i,i=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(z.biff===8&&(z.biff={9:2,521:3,1033:4}[re]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[V.BIFFVer]||8),z.biffguess=V.BIFFVer==0,V.BIFFVer==0&&V.dt==4096&&(z.biff=5,ne=!0,nd(z.codepage=28591)),z.biff==8&&V.BIFFVer==0&&V.dt==16&&(z.biff=2),_e++)break;if(i=t.dense?[]:{},z.biff<8&&!ne&&(ne=!0,nd(z.codepage=t.codepage||1252)),z.biff<5||V.BIFFVer==0&&V.dt==4096){c===""&&(c="Sheet1"),s={s:{r:0,c:0},e:{r:0,c:0}};var ze={pos:e.l-ae,name:c};a[ze.pos]=ze,z.snames.push(c)}else c=(a[Se]||{name:""}).name;V.dt==32&&(i["!type"]="chart"),V.dt==64&&(i["!type"]="macro"),X=[],W=[],z.arrayf=_=[],Q=[],te=[],J=!1,D={Hidden:(a[Se]||{hs:0}).hs,name:c}}break;case 515:case 3:case 2:i["!type"]=="chart"&&(t.dense?(i[V.r]||[])[V.c]:i[Dr({c:V.c,r:V.r})])&&++V.c,C={ixfe:V.ixfe,XF:j[V.ixfe]||{},v:V.val,t:"n"},ee>0&&(C.z=de[C.ixfe>>8&63]),Rd(C,t,r.opts.Date1904),H({c:V.c,r:V.r},C,t);break;case 5:case 517:C={ixfe:V.ixfe,XF:j[V.ixfe],v:V.val,t:V.t},ee>0&&(C.z=de[C.ixfe>>8&63]),Rd(C,t,r.opts.Date1904),H({c:V.c,r:V.r},C,t);break;case 638:C={ixfe:V.ixfe,XF:j[V.ixfe],v:V.rknum,t:"n"},ee>0&&(C.z=de[C.ixfe>>8&63]),Rd(C,t,r.opts.Date1904),H({c:V.c,r:V.r},C,t);break;case 189:for(var De=V.c;De<=V.C;++De){var $e=V.rkrec[De-V.c][0];C={ixfe:$e,XF:j[$e],v:V.rkrec[De-V.c][1],t:"n"},ee>0&&(C.z=de[C.ixfe>>8&63]),Rd(C,t,r.opts.Date1904),H({c:De,r:V.r},C,t)}break;case 6:case 518:case 1030:{if(V.val=="String"){o=V;break}if(C=ON(V.val,V.cell.ixfe,V.tt),C.XF=j[C.ixfe],t.cellFormula){var et=V.formula;if(et&&et[0]&&et[0][0]&&et[0][0][0]=="PtgExp"){var ut=et[0][0][1][0],kt=et[0][0][1][1],ht=Dr({r:ut,c:kt});S[ht]?C.f=""+co(V.formula,s,V.cell,Y,z):C.F=((t.dense?(i[ut]||[])[kt]:i[ht])||{}).F}else C.f=""+co(V.formula,s,V.cell,Y,z)}ee>0&&(C.z=de[C.ixfe>>8&63]),Rd(C,t,r.opts.Date1904),H(V.cell,C,t),o=V}break;case 7:case 519:if(o)o.val=V,C=ON(V,o.cell.ixfe,"s"),C.XF=j[C.ixfe],t.cellFormula&&(C.f=""+co(o.formula,s,o.cell,Y,z)),ee>0&&(C.z=de[C.ixfe>>8&63]),Rd(C,t,r.opts.Date1904),H(o.cell,C,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{_.push(V);var jr=Dr(V[0].s);if(m=t.dense?(i[V[0].s.r]||[])[V[0].s.c]:i[jr],t.cellFormula&&m){if(!o||!jr||!m)break;m.f=""+co(V[1],s,V[0],Y,z),m.F=en(V[0])}}break;case 1212:{if(!t.cellFormula)break;if(p){if(!o)break;S[Dr(o.cell)]=V[0],m=t.dense?(i[o.cell.r]||[])[o.cell.c]:i[Dr(o.cell)],(m||{}).f=""+co(V[0],s,f,Y,z)}}break;case 253:C=ON(l[V.isst].t,V.ixfe,"s"),l[V.isst].h&&(C.h=l[V.isst].h),C.XF=j[C.ixfe],ee>0&&(C.z=de[C.ixfe>>8&63]),Rd(C,t,r.opts.Date1904),H({c:V.c,r:V.r},C,t);break;case 513:t.sheetStubs&&(C={ixfe:V.ixfe,XF:j[V.ixfe],t:"z"},ee>0&&(C.z=de[C.ixfe>>8&63]),Rd(C,t,r.opts.Date1904),H({c:V.c,r:V.r},C,t));break;case 190:if(t.sheetStubs)for(var er=V.c;er<=V.C;++er){var ct=V.ixfe[er-V.c];C={ixfe:ct,XF:j[ct],t:"z"},ee>0&&(C.z=de[C.ixfe>>8&63]),Rd(C,t,r.opts.Date1904),H({c:er,r:V.r},C,t)}break;case 214:case 516:case 4:C=ON(V.val,V.ixfe,"s"),C.XF=j[C.ixfe],ee>0&&(C.z=de[C.ixfe>>8&63]),Rd(C,t,r.opts.Date1904),H({c:V.c,r:V.r},C,t);break;case 0:case 512:_e===1&&(s=V);break;case 252:l=V;break;case 1054:if(z.biff==4){de[ee++]=V[1];for(var qt=0;qt<ee+163&&Rr[qt]!=V[1];++qt);qt>=163&&Rh(V[1],ee+163)}else Rh(V[1],V[0]);break;case 30:{de[ee++]=V;for(var Lt=0;Lt<ee+163&&Rr[Lt]!=V;++Lt);Lt>=163&&Rh(V,ee+163)}break;case 229:X=X.concat(V);break;case 93:W[V.cmo[0]]=z.lastobj=V;break;case 438:z.lastobj.TxO=V;break;case 127:z.lastobj.ImData=V;break;case 440:for(b=V[0].s.r;b<=V[0].e.r;++b)for(y=V[0].s.c;y<=V[0].e.c;++y)m=t.dense?(i[b]||[])[y]:i[Dr({c:y,r:b})],m&&(m.l=V[1]);break;case 2048:for(b=V[0].s.r;b<=V[0].e.r;++b)for(y=V[0].s.c;y<=V[0].e.c;++y)m=t.dense?(i[b]||[])[y]:i[Dr({c:y,r:b})],m&&m.l&&(m.l.Tooltip=V[1]);break;case 28:{if(z.biff<=5&&z.biff>=2)break;m=t.dense?(i[V[0].r]||[])[V[0].c]:i[Dr(V[0])];var dr=W[V[2]];m||(t.dense?(i[V[0].r]||(i[V[0].r]=[]),m=i[V[0].r][V[0].c]={t:"z"}):m=i[Dr(V[0])]={t:"z"},s.e.r=Math.max(s.e.r,V[0].r),s.s.r=Math.min(s.s.r,V[0].r),s.e.c=Math.max(s.e.c,V[0].c),s.s.c=Math.min(s.s.c,V[0].c)),m.c||(m.c=[]),x={a:V[1],t:dr.TxO.t},m.c.push(x)}break;case 2173:Gwt(j[V.ixfe],V.ext);break;case 125:{if(!z.cellStyles)break;for(;V.e>=V.s;)Q[V.e--]={width:V.w/256,level:V.level||0,hidden:!!(V.flags&1)},J||(J=!0,lz(V.w/256)),G0(Q[V.e+1])}break;case 520:{var Gt={};V.level!=null&&(te[V.r]=Gt,Gt.level=V.level),V.hidden&&(te[V.r]=Gt,Gt.hidden=!0),V.hpt&&(te[V.r]=Gt,Gt.hpt=V.hpt,Gt.hpx=Jy(V.hpt))}break;case 38:case 39:case 40:case 41:i["!margins"]||Yg(i["!margins"]={}),i["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[re]]=V;break;case 161:i["!margins"]||Yg(i["!margins"]={}),i["!margins"].header=V.header,i["!margins"].footer=V.footer;break;case 574:V.RTL&&(O.Views[0].RTL=!0);break;case 146:P=V;break;case 2198:ie=V;break;case 140:A=V;break;case 442:c?D.CodeName=V||D.name:O.WBProps.CodeName=V||"ThisWorkbook";break}}else ge||console.error("Missing Info for XLS Record 0x"+re.toString(16)),e.l+=ae}return r.SheetNames=da(a).sort(function(qe,Xe){return Number(qe)-Number(Xe)}).map(function(qe){return a[qe].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&G.forEach(function(qe,Xe){r.Sheets[r.SheetNames[Xe]]["!autofilter"]=qe}),r.Strings=l,r.SSF=Pi(Rr),z.enc&&(r.Encryption=z.enc),ie&&(r.Themes=ie),r.Metadata={},A!==void 0&&(r.Metadata.Country=A),Y.names.length>0&&(O.Names=Y.names),r.Workbook=O,r}var tS={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function o_t(e,t,r){var n=yr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var i=Fee(n,j5,tS.DSI);for(var a in i)t[a]=i[a]}catch(c){if(r.WTF)throw c}var s=yr.find(e,"/!SummaryInformation");if(s&&s.size>0)try{var o=Fee(s,D5,tS.SI);for(var l in o)t[l]==null&&(t[l]=o[l])}catch(c){if(r.WTF)throw c}t.HeadingPairs&&t.TitlesOfParts&&(F1e(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function l_t(e,t){var r=[],n=[],i=[],a=0,s,o=hee(j5,"n"),l=hee(D5,"n");if(e.Props)for(s=da(e.Props),a=0;a<s.length;++a)(Object.prototype.hasOwnProperty.call(o,s[a])?r:Object.prototype.hasOwnProperty.call(l,s[a])?n:i).push([s[a],e.Props[s[a]]]);if(e.Custprops)for(s=da(e.Custprops),a=0;a<s.length;++a)Object.prototype.hasOwnProperty.call(e.Props||{},s[a])||(Object.prototype.hasOwnProperty.call(o,s[a])?r:Object.prototype.hasOwnProperty.call(l,s[a])?n:i).push([s[a],e.Custprops[s[a]]]);var c=[];for(a=0;a<i.length;++a)W1e.indexOf(i[a][0])>-1||M1e.indexOf(i[a][0])>-1||i[a][1]!=null&&c.push(i[a]);n.length&&yr.utils.cfb_add(t,"/SummaryInformation",Lee(n,tS.SI,l,D5)),(r.length||c.length)&&yr.utils.cfb_add(t,"/DocumentSummaryInformation",Lee(r,tS.DSI,o,j5,c.length?c:null,tS.UDI))}function Bve(e,t){t||(t={}),xz(t),L$(),t.codepage&&F$(t.codepage);var r,n;if(e.FullPaths){if(yr.find(e,"/encryption"))throw new Error("File is password-protected");r=yr.find(e,"!CompObj"),n=yr.find(e,"/Workbook")||yr.find(e,"/Book")}else{switch(t.type){case"base64":e=rc(xc(e));break;case"binary":e=rc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Ls(e,0),n={content:e}}var i,a;if(r&&n_t(r),t.bookProps&&!t.bookSheets)i={};else{var s=xn?"buffer":"array";if(n&&n.content)i=s_t(n.content,t);else if((a=yr.find(e,"PerfectOffice_MAIN"))&&a.content)i=Xg.to_workbook(a.content,(t.type=s,t));else if((a=yr.find(e,"NativeContent_MAIN"))&&a.content)i=Xg.to_workbook(a.content,(t.type=s,t));else throw(a=yr.find(e,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&yr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(i.vbaraw=w2t(e))}var o={};return e.FullPaths&&o_t(e,o,t),i.Props=i.Custprops=o,t.bookFiles&&(i.cfb=e),i}function c_t(e,t){var r=t||{},n=yr.utils.cfb_new({root:"R"}),i="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":i="/Workbook",r.biff=8;break;case"biff5":i="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return yr.utils.cfb_add(n,i,Uve(e,r)),r.biff==8&&(e.Props||e.Custprops)&&l_t(e,n),r.biff==8&&e.vbaraw&&S2t(n,yr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var xE={0:{f:REt},1:{f:$Et},2:{f:sCt},3:{f:XEt},4:{f:VEt},5:{f:nCt},6:{f:dCt},7:{f:ZEt},8:{f:vCt},9:{f:xCt},10:{f:mCt},11:{f:gCt},12:{f:HEt},13:{f:lCt},14:{f:QEt},15:{f:GEt},16:{f:Ove},17:{f:hCt},18:{f:tCt},19:{f:J$},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:hkt},40:{},42:{},43:{f:dwt},44:{f:cwt},45:{f:pwt},46:{f:gwt},47:{f:mwt},48:{},49:{f:M1t},50:{},51:{f:Ywt},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:tve},62:{f:uCt},63:{f:a2t},64:{f:jCt},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Eo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:ICt},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:BEt},148:{f:MEt,p:16},151:{f:CCt},152:{},153:{f:ukt},154:{},155:{},156:{f:lkt},157:{},158:{},159:{T:1,f:_bt},160:{T:-1},161:{T:1,f:h1},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:yCt},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Kwt},336:{T:-1},337:{f:Zwt,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:R5},357:{},358:{},359:{},360:{T:1},361:{},362:{f:eve},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:kCt},427:{f:_Ct},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:ACt},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:LEt},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:SCt},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:R5},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:g2t},633:{T:1},634:{T:-1},635:{T:1,f:p2t},636:{T:-1},637:{f:U1t},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:QCt},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:DCt},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},$5={6:{f:RM},10:{f:Fp},12:{f:Oa},13:{f:Oa},14:{f:va},15:{f:va},16:{f:go},17:{f:va},18:{f:va},19:{f:Oa},20:{f:Wee},21:{f:Wee},23:{f:eve},24:{f:qee},25:{f:va},26:{},27:{},28:{f:Dyt},29:{},34:{f:va},35:{f:Vee},38:{f:go},39:{f:go},40:{f:go},41:{f:go},42:{f:va},43:{f:va},47:{f:Gbt},49:{f:lyt},51:{f:Oa},60:{},61:{f:nyt},64:{f:va},65:{f:oyt},66:{f:Oa},77:{},80:{},81:{},82:{},85:{f:Oa},89:{},90:{},91:{},92:{f:qvt},93:{f:Lyt},94:{},95:{f:va},96:{},97:{},99:{f:va},125:{f:tve},128:{f:Eyt},129:{f:Kvt},130:{f:Oa},131:{f:va},132:{f:va},133:{f:Xvt},134:{},140:{f:qyt},141:{f:Oa},144:{},146:{f:Xyt},151:{},152:{},153:{},154:{},155:{},156:{f:Oa},157:{},158:{},160:{f:rbt},161:{f:Jyt},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:yyt},190:{f:byt},193:{f:Fp},197:{},198:{},199:{},200:{},201:{},202:{f:va},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Oa},220:{},221:{f:va},222:{},224:{f:Syt},225:{f:Vvt},226:{f:Fp},227:{},229:{f:Myt},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Qvt},253:{f:uyt},255:{f:Zvt},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:V1e},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:va},353:{f:Fp},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Ayt},431:{f:va},432:{},433:{},434:{},437:{},438:{f:$yt},439:{f:va},440:{f:zyt},441:{},442:{f:JC},443:{},444:{f:Oa},445:{},446:{},448:{f:Fp},449:{f:ryt,r:2},450:{f:Fp},512:{f:$ee},513:{f:tbt},515:{f:_yt},516:{f:fyt},517:{f:Hee},519:{f:nbt},520:{f:eyt},523:{},545:{f:Gee},549:{f:Uee},566:{},574:{f:ayt},638:{f:vyt},659:{},1048:{},1054:{f:pyt},1084:{},1212:{f:Pyt},2048:{f:Wyt},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:AN},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Fp},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Yyt,r:12},2173:{f:qwt,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:va,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Oyt,r:12},2197:{},2198:{f:Uwt,r:12},2199:{},2200:{},2201:{},2202:{f:Ryt,r:12},2203:{f:Fp},2204:{},2205:{},2206:{},2207:{},2211:{f:tyt},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Oa},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Zyt},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Kyt},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:$ee},1:{},2:{f:lbt},3:{f:sbt},4:{f:abt},5:{f:Hee},7:{f:ubt},8:{},9:{f:AN},11:{},22:{f:Oa},30:{f:gyt},31:{},32:{},33:{f:Gee},36:{},37:{f:Uee},50:{f:dbt},62:{},52:{},67:{},68:{f:Oa},69:{},86:{},126:{},127:{f:ibt},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:fbt},223:{},234:{},354:{},421:{},518:{f:RM},521:{f:AN},536:{f:qee},547:{f:Vee},561:{},579:{},1030:{f:RM},1033:{f:AN},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Bt(e,t,r,n){var i=t;if(!isNaN(i)){var a=n||(r||[]).length||0,s=e.next(4);s.write_shift(2,i),s.write_shift(2,a),a>0&&X$(r)&&e.push(r)}}function u_t(e,t,r,n){var i=(r||[]).length||0;if(i<=8224)return Bt(e,t,r,i);var a=t;if(!isNaN(a)){for(var s=r.parts||[],o=0,l=0,c=0;c+(s[o]||8224)<=8224;)c+=s[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,a),d.write_shift(2,c),e.push(r.slice(l,l+c)),l+=c;l<i;){for(d=e.next(4),d.write_shift(2,60),c=0;c+(s[o]||8224)<=8224;)c+=s[o]||8224,o++;d.write_shift(2,c),e.push(r.slice(l,l+c)),l+=c}}}function rk(e,t,r){return e||(e=pt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function d_t(e,t,r,n){var i=pt(9);return rk(i,e,t),q1e(r,n||"b",i),i}function f_t(e,t,r){var n=pt(8+2*r.length);return rk(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function h_t(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var i=t.t=="d"?Qa(Oi(t.v)):t.v;i==(i|0)&&i>=0&&i<65536?Bt(e,2,cbt(r,n,i)):Bt(e,3,obt(r,n,i));return;case"b":case"e":Bt(e,5,d_t(r,n,t.v,t.t));return;case"s":case"str":Bt(e,4,f_t(r,n,(t.v||"").slice(0,255)));return}Bt(e,1,rk(null,r,n))}function p_t(e,t,r,n){var i=Array.isArray(t),a=Mn(t["!ref"]||"A1"),s,o="",l=[];if(a.e.c>255||a.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),s=en(a)}for(var c=a.s.r;c<=a.e.r;++c){o=Sa(c);for(var d=a.s.c;d<=a.e.c;++d){c===a.s.r&&(l[d]=qi(d)),s=l[d]+o;var f=i?(t[c]||[])[d]:t[s];f&&h_t(e,f,c,d)}}}function m_t(e,t){for(var r=t||{},n=Ol(),i=0,a=0;a<e.SheetNames.length;++a)e.SheetNames[a]==r.sheet&&(i=a);if(i==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Bt(n,r.biff==4?1033:r.biff==3?521:9,az(e,16,r)),p_t(n,e.Sheets[e.SheetNames[i]],i,r),Bt(n,10),n.end()}function g_t(e,t,r){Bt(e,49,cyt({sz:12,name:"Arial"},r))}function x_t(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)t[i]!=null&&Bt(e,1054,myt(i,t[i],r))})}function v_t(e,t){var r=pt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Bt(e,2151,r),r=pt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),Q1e(Mn(t["!ref"]||"A1"),r),r.write_shift(4,4),Bt(e,2152,r)}function y_t(e,t){for(var r=0;r<16;++r)Bt(e,224,zee({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){Bt(e,224,zee(n,0,t))})}function b_t(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];Bt(e,440,Hyt(n)),n[1].Tooltip&&Bt(e,2048,Vyt(n))}delete t["!links"]}function w_t(e,t){if(t){var r=0;t.forEach(function(n,i){++r<=256&&n&&Bt(e,125,Qyt(UP(i,n),i))})}}function S_t(e,t,r,n,i){var a=16+gm(i.cellXfs,t,i);if(t.v==null&&!t.bf){Bt(e,513,Ix(r,n,a));return}if(t.bf)Bt(e,6,KSt(t,r,n,i,a));else switch(t.t){case"d":case"n":var s=t.t=="d"?Qa(Oi(t.v)):t.v;Bt(e,515,Nyt(r,n,s,a));break;case"b":case"e":Bt(e,517,kyt(r,n,t.v,a,i,t.t));break;case"s":case"str":if(i.bookSST){var o=hz(i.Strings,t.v,i.revStrings);Bt(e,253,dyt(r,n,o,a))}else Bt(e,516,hyt(r,n,(t.v||"").slice(0,255),a,i));break;default:Bt(e,513,Ix(r,n,a))}}function E_t(e,t,r){var n=Ol(),i=r.SheetNames[e],a=r.Sheets[i]||{},s=(r||{}).Workbook||{},o=(s.Sheets||[])[e]||{},l=Array.isArray(a),c=t.biff==8,d,f="",p=[],m=Mn(a["!ref"]||"A1"),x=c?65536:16384;if(m.e.c>255||m.e.r>=x){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,x-1)}Bt(n,2057,az(r,16,t)),Bt(n,13,Gc(1)),Bt(n,12,Gc(100)),Bt(n,15,zo(!0)),Bt(n,17,zo(!1)),Bt(n,16,Ax(.001)),Bt(n,95,zo(!0)),Bt(n,42,zo(!1)),Bt(n,43,zo(!1)),Bt(n,130,Gc(1)),Bt(n,128,Cyt()),Bt(n,131,zo(!1)),Bt(n,132,zo(!1)),c&&w_t(n,a["!cols"]),Bt(n,512,xyt(m,t)),c&&(a["!links"]=[]);for(var y=m.s.r;y<=m.e.r;++y){f=Sa(y);for(var b=m.s.c;b<=m.e.c;++b){y===m.s.r&&(p[b]=qi(b)),d=p[b]+f;var S=l?(a[y]||[])[b]:a[d];S&&(S_t(n,S,y,b,t),c&&S.l&&a["!links"].push([d,S.l]))}}var _=o.CodeName||o.name||i;return c&&Bt(n,574,syt((s.Views||[])[0])),c&&(a["!merges"]||[]).length&&Bt(n,229,Fyt(a["!merges"])),c&&b_t(n,a),Bt(n,442,G1e(_)),c&&v_t(n,a),Bt(n,10),n.end()}function C_t(e,t,r){var n=Ol(),i=(e||{}).Workbook||{},a=i.Sheets||[],s=i.WBProps||{},o=r.biff==8,l=r.biff==5;if(Bt(n,2057,az(e,5,r)),r.bookType=="xla"&&Bt(n,135),Bt(n,225,o?Gc(1200):null),Bt(n,193,kvt(2)),l&&Bt(n,191),l&&Bt(n,192),Bt(n,226),Bt(n,92,Gvt("SheetJS",r)),Bt(n,66,Gc(o?1200:1252)),o&&Bt(n,353,Gc(0)),o&&Bt(n,448),Bt(n,317,ebt(e.SheetNames.length)),o&&e.vbaraw&&Bt(n,211),o&&e.vbaraw){var c=s.CodeName||"ThisWorkbook";Bt(n,442,G1e(c))}Bt(n,156,Gc(17)),Bt(n,25,zo(!1)),Bt(n,18,zo(!1)),Bt(n,19,Gc(0)),o&&Bt(n,431,zo(!1)),o&&Bt(n,444,Gc(0)),Bt(n,61,iyt()),Bt(n,64,zo(!1)),Bt(n,141,Gc(0)),Bt(n,34,zo(rkt(e)=="true")),Bt(n,14,zo(!0)),o&&Bt(n,439,zo(!1)),Bt(n,218,Gc(0)),g_t(n,e,r),x_t(n,e.SSF,r),y_t(n,r),o&&Bt(n,352,zo(!1));var d=n.end(),f=Ol();o&&Bt(f,140,Gyt()),o&&r.Strings&&u_t(f,252,Jvt(r.Strings)),Bt(f,10);var p=f.end(),m=Ol(),x=0,y=0;for(y=0;y<e.SheetNames.length;++y)x+=(o?12:11)+(o?2:1)*e.SheetNames[y].length;var b=d.length+x+p.length;for(y=0;y<e.SheetNames.length;++y){var S=a[y]||{};Bt(m,133,Yvt({pos:b,hs:S.Hidden||0,dt:0,name:e.SheetNames[y]},r)),b+=t[y].length}var _=m.end();if(x!=_.length)throw new Error("BS8 "+x+" != "+_.length);var C=[];return d.length&&C.push(d),_.length&&C.push(_),p.length&&C.push(p),vs(C)}function k_t(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Pi(Rr)),e&&e.SSF&&(Bb(),RP(e.SSF),r.revssf=DP(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,vz(r),r.cellXfs=[],gm(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var i=0;i<e.SheetNames.length;++i)n[n.length]=E_t(i,r,e);return n.unshift(C_t(e,n,r)),vs(n)}function Uve(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var i=Dl(n["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var a=t||{};switch(a.biff||2){case 8:case 5:return k_t(e,t);case 4:case 3:case 2:return m_t(e,t)}throw new Error("invalid type "+a.bookType+" for BIFF")}function nte(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var i=e.match(/<table/i);if(!i)throw new Error("Invalid HTML: could not find <table>");var a=e.match(/<\/table/i),s=i.index,o=a&&a.index||e.length,l=c1t(e.slice(s,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,d=0,f=0,p=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},x=[];for(s=0;s<l.length;++s){var y=l[s].trim(),b=y.slice(0,3).toLowerCase();if(b=="<tr"){if(++c,r.sheetRows&&r.sheetRows<=c){--c;break}d=0;continue}if(!(b!="<td"&&b!="<th")){var S=y.split(/<\/t[dh]>/i);for(o=0;o<S.length;++o){var _=S[o].trim();if(_.match(/<t[dh]/i)){for(var C=_,A=0;C.charAt(0)=="<"&&(A=C.indexOf(">"))>-1;)C=C.slice(A+1);for(var j=0;j<x.length;++j){var P=x[j];P.s.c==d&&P.s.r<c&&c<=P.e.r&&(d=P.e.c+1,j=-1)}var O=Fr(_.slice(0,_.indexOf(">")));p=O.colspan?+O.colspan:1,((f=+O.rowspan)>1||p>1)&&x.push({s:{r:c,c:d},e:{r:c+(f||1)-1,c:d+p-1}});var D=O.t||O["data-t"]||"";if(!C.length){d+=p;continue}if(C=u1e(C),m.s.r>c&&(m.s.r=c),m.e.r<c&&(m.e.r=c),m.s.c>d&&(m.s.c=d),m.e.c<d&&(m.e.c=d),!C.length){d+=p;continue}var L={t:"s",v:C};r.raw||!C.trim().length||D=="s"||(C==="TRUE"?L={t:"b",v:!0}:C==="FALSE"?L={t:"b",v:!1}:isNaN(cd(C))?isNaN(Yy(C).getDate())||(L={t:"d",v:Oi(C)},r.cellDates||(L={t:"n",v:Qa(L.v)}),L.z=r.dateNF||Rr[14]):L={t:"n",v:cd(C)}),r.dense?(n[c]||(n[c]=[]),n[c][d]=L):n[Dr({r:c,c:d})]=L,d+=p}}}}return n["!ref"]=en(m),x.length&&(n["!merges"]=x),n}function __t(e,t,r,n){for(var i=e["!merges"]||[],a=[],s=t.s.c;s<=t.e.c;++s){for(var o=0,l=0,c=0;c<i.length;++c)if(!(i[c].s.r>r||i[c].s.c>s)&&!(i[c].e.r<r||i[c].e.c<s)){if(i[c].s.r<r||i[c].s.c<s){o=-1;break}o=i[c].e.r-i[c].s.r+1,l=i[c].e.c-i[c].s.c+1;break}if(!(o<0)){var d=Dr({r,c:s}),f=n.dense?(e[r]||[])[s]:e[d],p=f&&f.v!=null&&(f.h||q$(f.w||(tp(f),f.w)||""))||"",m={};o>1&&(m.rowspan=o),l>1&&(m.colspan=l),n.editable?p='<span contenteditable="true">'+p+"</span>":f&&(m["data-t"]=f&&f.t||"z",f.v!=null&&(m["data-v"]=f.v),f.z!=null&&(m["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+f.l.Target+'">'+p+"</a>")),m.id=(n.id||"sjs")+"-"+d,a.push(Ft("td",p,m))}}var x="<tr>";return x+a.join("")+"</tr>"}var N_t='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',A_t="</body></html>";function T_t(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return mm(nte(r[0],t),t);var n=wz();return r.forEach(function(i,a){Sz(n,nte(i,t),"Sheet"+(a+1))}),n}function I_t(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function $ve(e,t){var r=t||{},n=r.header!=null?r.header:N_t,i=r.footer!=null?r.footer:A_t,a=[n],s=Dl(e["!ref"]);r.dense=Array.isArray(e),a.push(I_t(e,s,r));for(var o=s.s.r;o<=s.e.r;++o)a.push(__t(e,s,o,r));return a.push("</table>"+i),a.join("")}function zve(e,t,r){var n=r||{},i=0,a=0;if(n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var s=typeof n.origin=="string"?Gi(n.origin):n.origin;i=s.r,a=s.c}var o=t.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:i,c:a}};if(e["!ref"]){var d=Dl(e["!ref"]);c.s.r=Math.min(c.s.r,d.s.r),c.s.c=Math.min(c.s.c,d.s.c),c.e.r=Math.max(c.e.r,d.e.r),c.e.c=Math.max(c.e.c,d.e.c),i==-1&&(c.e.r=i=d.e.r+1)}var f=[],p=0,m=e["!rows"]||(e["!rows"]=[]),x=0,y=0,b=0,S=0,_=0,C=0;for(e["!cols"]||(e["!cols"]=[]);x<o.length&&y<l;++x){var A=o[x];if(ite(A)){if(n.display)continue;m[y]={hidden:!0}}var j=A.children;for(b=S=0;b<j.length;++b){var P=j[b];if(!(n.display&&ite(P))){var O=P.hasAttribute("data-v")?P.getAttribute("data-v"):P.hasAttribute("v")?P.getAttribute("v"):u1e(P.innerHTML),D=P.getAttribute("data-z")||P.getAttribute("z");for(p=0;p<f.length;++p){var L=f[p];L.s.c==S+a&&L.s.r<y+i&&y+i<=L.e.r&&(S=L.e.c+1-a,p=-1)}C=+P.getAttribute("colspan")||1,((_=+P.getAttribute("rowspan")||1)>1||C>1)&&f.push({s:{r:y+i,c:S+a},e:{r:y+i+(_||1)-1,c:S+a+(C||1)-1}});var B={t:"s",v:O},H=P.getAttribute("data-t")||P.getAttribute("t")||"";O!=null&&(O.length==0?B.t=H||"z":n.raw||O.trim().length==0||H=="s"||(O==="TRUE"?B={t:"b",v:!0}:O==="FALSE"?B={t:"b",v:!1}:isNaN(cd(O))?isNaN(Yy(O).getDate())||(B={t:"d",v:Oi(O)},n.cellDates||(B={t:"n",v:Qa(B.v)}),B.z=n.dateNF||Rr[14]):B={t:"n",v:cd(O)})),B.z===void 0&&D!=null&&(B.z=D);var z="",ie=P.getElementsByTagName("A");if(ie&&ie.length)for(var X=0;X<ie.length&&!(ie[X].hasAttribute("href")&&(z=ie[X].getAttribute("href"),z.charAt(0)!="#"));++X);z&&z.charAt(0)!="#"&&(B.l={Target:z}),n.dense?(e[y+i]||(e[y+i]=[]),e[y+i][S+a]=B):e[Dr({c:S+a,r:y+i})]=B,c.e.c<S+a&&(c.e.c=S+a),S+=C}}++y}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),c.e.r=Math.max(c.e.r,y-1+i),e["!ref"]=en(c),y>=l&&(e["!fullref"]=en((c.e.r=o.length-x+y-1+i,c))),e}function Hve(e,t){var r=t||{},n=r.dense?[]:{};return zve(n,e,t)}function O_t(e,t){return mm(Hve(e,t),t)}function ite(e){var t="",r=P_t(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function P_t(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function R_t(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,i){return Array(parseInt(i,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Dn(t.replace(/<[^>]*>/g,""));return[r]}var ate={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Wve(e,t){var r=t||{},n=G$(e),i=[],a,s,o={name:""},l="",c=0,d,f,p={},m=[],x=r.dense?[]:{},y,b,S={value:""},_="",C=0,A=[],j=-1,P=-1,O={s:{r:1e6,c:1e7},e:{r:0,c:0}},D=0,L={},B=[],H={},z=0,ie=0,X=[],W=1,Q=1,te=[],J={Names:[]},Y={},pe=["",""],_e=[],ee={},de="",G=0,q=!1,ne=!1,Se=0;for(dE.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=dE.exec(n);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"":y[1]==="/"?(O.e.c>=O.s.c&&O.e.r>=O.s.r?x["!ref"]=en(O):x["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=O.e.r&&(x["!fullref"]=x["!ref"],O.e.r=r.sheetRows-1,x["!ref"]=en(O)),B.length&&(x["!merges"]=B),X.length&&(x["!rows"]=X),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),m.push(d.name),p[d.name]=x,ne=!1):y[0].charAt(y[0].length-2)!=="/"&&(d=Fr(y[0],!1),j=P=-1,O.s.r=O.s.c=1e7,O.e.r=O.e.c=0,x=r.dense?[]:{},B=[],X=[],ne=!0);break;case"table-row-group":y[1]==="/"?--D:++D;break;case"table-row":case"":if(y[1]==="/"){j+=W,W=1;break}if(f=Fr(y[0],!1),f.?j=f.-1:j==-1&&(j=0),W=+f["number-rows-repeated"]||1,W<10)for(Se=0;Se<W;++Se)D>0&&(X[j+Se]={level:D});P=-1;break;case"covered-table-cell":y[1]!=="/"&&++P,r.sheetStubs&&(r.dense?(x[j]||(x[j]=[]),x[j][P]={t:"z"}):x[Dr({r:j,c:P})]={t:"z"}),_="",A=[];break;case"table-cell":case"":if(y[0].charAt(y[0].length-2)==="/")++P,S=Fr(y[0],!1),Q=parseInt(S["number-columns-repeated"]||"1",10),b={t:"z",v:null},S.formula&&r.cellFormula!=!1&&(b.f=ete(Dn(S.formula))),(S.||S["value-type"])=="string"&&(b.t="s",b.v=Dn(S["string-value"]||""),r.dense?(x[j]||(x[j]=[]),x[j][P]=b):x[Dr({r:j,c:P})]=b),P+=Q-1;else if(y[1]!=="/"){++P,_="",C=0,A=[],Q=1;var re=W?j+W-1:j;if(P>O.e.c&&(O.e.c=P),P<O.s.c&&(O.s.c=P),j<O.s.r&&(O.s.r=j),re>O.e.r&&(O.e.r=re),S=Fr(y[0],!1),_e=[],ee={},b={t:S.||S["value-type"],v:null},r.cellFormula)if(S.formula&&(S.formula=Dn(S.formula)),S["number-matrix-columns-spanned"]&&S["number-matrix-rows-spanned"]&&(z=parseInt(S["number-matrix-rows-spanned"],10)||0,ie=parseInt(S["number-matrix-columns-spanned"],10)||0,H={s:{r:j,c:P},e:{r:j+z-1,c:P+ie-1}},b.F=en(H),te.push([H,b.F])),S.formula)b.f=ete(S.formula);else for(Se=0;Se<te.length;++Se)j>=te[Se][0].s.r&&j<=te[Se][0].e.r&&P>=te[Se][0].s.c&&P<=te[Se][0].e.c&&(b.F=te[Se][1]);switch((S["number-columns-spanned"]||S["number-rows-spanned"])&&(z=parseInt(S["number-rows-spanned"],10)||0,ie=parseInt(S["number-columns-spanned"],10)||0,H={s:{r:j,c:P},e:{r:j+z-1,c:P+ie-1}},B.push(H)),S["number-columns-repeated"]&&(Q=parseInt(S["number-columns-repeated"],10)),b.t){case"boolean":b.t="b",b.v=Ai(S["boolean-value"]);break;case"float":b.t="n",b.v=parseFloat(S.value);break;case"percentage":b.t="n",b.v=parseFloat(S.value);break;case"currency":b.t="n",b.v=parseFloat(S.value);break;case"date":b.t="d",b.v=Oi(S["date-value"]),r.cellDates||(b.t="n",b.v=Qa(b.v)),b.z="m/d/yy";break;case"time":b.t="n",b.v=s1t(S["time-value"])/86400,r.cellDates&&(b.t="d",b.v=MP(b.v)),b.z="HH:MM:SS";break;case"number":b.t="n",b.v=parseFloat(S.);break;default:if(b.t==="string"||b.t==="text"||!b.t)b.t="s",S["string-value"]!=null&&(_=Dn(S["string-value"]),A=[]);else throw new Error("Unsupported value type "+b.t)}}else{if(q=!1,b.t==="s"&&(b.v=_||"",A.length&&(b.R=A),q=C==0),Y.Target&&(b.l=Y),_e.length>0&&(b.c=_e,_e=[]),_&&r.cellText!==!1&&(b.w=_),q&&(b.t="z",delete b.v),(!q||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=j))for(var ae=0;ae<W;++ae){if(Q=parseInt(S["number-columns-repeated"]||"1",10),r.dense)for(x[j+ae]||(x[j+ae]=[]),x[j+ae][P]=ae==0?b:Pi(b);--Q>0;)x[j+ae][P+Q]=Pi(b);else for(x[Dr({r:j+ae,c:P})]=b;--Q>0;)x[Dr({r:j+ae,c:P+Q})]=Pi(b);O.e.c<=P&&(O.e.c=P)}Q=parseInt(S["number-columns-repeated"]||"1",10),P+=Q-1,Q=0,b={},_="",A=[]}Y={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((a=i.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&i.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((a=i.pop())[0]!==y[3])throw"Bad state: "+a;ee.t=_,A.length&&(ee.R=A),ee.a=de,_e.push(ee)}else y[0].charAt(y[0].length-2)!=="/"&&i.push([y[3],!1]);de="",G=0,_="",C=0,A=[];break;case"creator":y[1]==="/"?de=n.slice(G,y.index):G=y.index+y[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((a=i.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&i.push([y[3],!1]);_="",C=0,A=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(L[o.name]=l,(a=i.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&(l="",o=Fr(y[0],!1),i.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(i[i.length-1][0]){case"time-style":case"date-style":s=Fr(y[0],!1),l+=ate[y[3]][s.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(i[i.length-1][0]){case"time-style":case"date-style":s=Fr(y[0],!1),l+=ate[y[3]][s.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(i[i.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(c,y.index);break}else c=y.index+y[0].length;break;case"named-range":s=Fr(y[0],!1),pe=jM(s["cell-range-address"]);var ge={Name:s.name,Ref:pe[0]+"!"+pe[1]};ne&&(ge.Sheet=m.length),J.Names.push(ge);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(i[i.length-1][0])>-1)break;if(y[1]==="/"&&(!S||!S["string-value"])){var Ee=R_t(n.slice(C,y.index));_=(_.length>0?_+`
`:"")+Ee[0]}else Fr(y[0],!1),C=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{pe=jM(Fr(y[0])["target-range-address"]),p[pe[0]]["!autofilter"]={ref:pe[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(Y=Fr(y[0],!1),!Y.href)break;Y.Target=Dn(Y.href),delete Y.href,Y.Target.charAt(0)=="#"&&Y.Target.indexOf(".")>-1?(pe=jM(Y.Target.slice(1)),Y.Target="#"+pe[0]+"!"+pe[1]):Y.Target.match(/^\.\.[\\\/]/)&&(Y.Target=Y.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(y)}}var V={Sheets:p,SheetNames:m,Workbook:J};return r.bookSheets&&delete V.Sheets,V}function ste(e,t){t=t||{},Wc(e,"META-INF/manifest.xml")&&svt(Ia(e,"META-INF/manifest.xml"),t);var r=nc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=Wve(di(r),t);return Wc(e,"meta.xml")&&(n.Props=j1e(Ia(e,"meta.xml"))),n}function ote(e,t){return Wve(e,t)}var j_t=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+uE({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return _a+t}}(),lte=function(){var e=function(a){return si(a).replace(/  +/g,function(s){return'<text:s text:c="'+s.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(a,s,o){var l=[];l.push('      <table:table table:name="'+si(s.SheetNames[o])+`" table:style-name="ta1">
`);var c=0,d=0,f=Dl(a["!ref"]||"A1"),p=a["!merges"]||[],m=0,x=Array.isArray(a);if(a["!cols"])for(d=0;d<=f.e.c;++d)l.push("        <table:table-column"+(a["!cols"][d]?' table:style-name="co'+a["!cols"][d].ods+'"':"")+`></table:table-column>
`);var y="",b=a["!rows"]||[];for(c=0;c<f.s.r;++c)y=b[c]?' table:style-name="ro'+b[c].ods+'"':"",l.push("        <table:table-row"+y+`></table:table-row>
`);for(;c<=f.e.r;++c){for(y=b[c]?' table:style-name="ro'+b[c].ods+'"':"",l.push("        <table:table-row"+y+`>
`),d=0;d<f.s.c;++d)l.push(t);for(;d<=f.e.c;++d){var S=!1,_={},C="";for(m=0;m!=p.length;++m)if(!(p[m].s.c>d)&&!(p[m].s.r>c)&&!(p[m].e.c<d)&&!(p[m].e.r<c)){(p[m].s.c!=d||p[m].s.r!=c)&&(S=!0),_["table:number-columns-spanned"]=p[m].e.c-p[m].s.c+1,_["table:number-rows-spanned"]=p[m].e.r-p[m].s.r+1;break}if(S){l.push(r);continue}var A=Dr({r:c,c:d}),j=x?(a[c]||[])[d]:a[A];if(j&&j.f&&(_["table:formula"]=si(eEt(j.f)),j.F&&j.F.slice(0,A.length)==A)){var P=Dl(j.F);_["table:number-matrix-columns-spanned"]=P.e.c-P.s.c+1,_["table:number-matrix-rows-spanned"]=P.e.r-P.s.r+1}if(!j){l.push(t);continue}switch(j.t){case"b":C=j.v?"TRUE":"FALSE",_["office:value-type"]="boolean",_["office:boolean-value"]=j.v?"true":"false";break;case"n":C=j.w||String(j.v||0),_["office:value-type"]="float",_["office:value"]=j.v||0;break;case"s":case"str":C=j.v==null?"":j.v,_["office:value-type"]="string";break;case"d":C=j.w||Oi(j.v).toISOString(),_["office:value-type"]="date",_["office:date-value"]=Oi(j.v).toISOString(),_["table:style-name"]="ce1";break;default:l.push(t);continue}var O=e(C);if(j.l&&j.l.Target){var D=j.l.Target;D=D.charAt(0)=="#"?"#"+tEt(D.slice(1)):D,D.charAt(0)!="#"&&!D.match(/^\w+:/)&&(D="../"+D),O=Ft("text:a",O,{"xlink:href":D.replace(/&/g,"&amp;")})}l.push("          "+Ft("table:table-cell",Ft("text:p",O,{}),_)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},i=function(a,s){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var o=0;s.SheetNames.map(function(c){return s.Sheets[c]}).forEach(function(c){if(c&&c["!cols"]){for(var d=0;d<c["!cols"].length;++d)if(c["!cols"][d]){var f=c["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;G0(f),f.ods=o;var p=c["!cols"][d].wpx+"px";a.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),a.push(`  </style:style>
`),++o}}});var l=0;s.SheetNames.map(function(c){return s.Sheets[c]}).forEach(function(c){if(c&&c["!rows"]){for(var d=0;d<c["!rows"].length;++d)if(c["!rows"][d]){c["!rows"][d].ods=l;var f=c["!rows"][d].hpx+"px";a.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),a.push(`  </style:style>
`),++l}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(s,o){var l=[_a],c=uE({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=uE({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+c+d+`>
`),l.push(R1e().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+c+`>
`),i(l,s),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var f=0;f!=s.SheetNames.length;++f)l.push(n(s.Sheets[s.SheetNames[f]],s,f));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function Vve(e,t){if(t.bookType=="fods")return lte(e,t);var r=H$(),n="",i=[],a=[];return n="mimetype",ln(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",ln(r,n,lte(e,t)),i.push([n,"text/xml"]),a.push([n,"ContentFile"]),n="styles.xml",ln(r,n,j_t(e,t)),i.push([n,"text/xml"]),a.push([n,"StylesFile"]),n="meta.xml",ln(r,n,_a+R1e()),i.push([n,"text/xml"]),a.push([n,"MetadataFile"]),n="manifest.rdf",ln(r,n,cvt(a)),i.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",ln(r,n,ovt(i)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Ox(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function z5(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):di(pm(e))}function D_t(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):rc(rf(e))}function M_t(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function X0(e){var t=e.reduce(function(i,a){return i+a.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(i){r.set(i,n),n+=i.length}),r}function cte(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function F_t(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,i=t+13;i>=t;--i)n=n*256+e[i];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function L_t(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,i=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var a=0;i>=1;++a,i/=256)e[t+a]=i&255;e[t+15]|=r>=0?0:128}function vE(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function ri(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function ua(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function $n(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],i=vE(e,r),a=i&7;i=Math.floor(i/8);var s=0,o;if(i==0)break;switch(a){case 0:{for(var l=r[0];e[r[0]++]>=128;);o=e.slice(l,r[0])}break;case 5:s=4,o=e.slice(r[0],r[0]+s),r[0]+=s;break;case 1:s=8,o=e.slice(r[0],r[0]+s),r[0]+=s;break;case 2:s=vE(e,r),o=e.slice(r[0],r[0]+s),r[0]+=s;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(i," at offset ").concat(n))}var c={data:o,type:a};t[i]==null?t[i]=[c]:t[i].push(c)}return t}function Ps(e){var t=[];return e.forEach(function(r,n){r.forEach(function(i){i.data&&(t.push(ri(n*8+i.type)),i.type==2&&t.push(ri(i.data.length)),t.push(i.data))})}),X0(t)}function gz(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function Uc(e){for(var t,r=[],n=[0];n[0]<e.length;){var i=vE(e,n),a=$n(e.slice(n[0],n[0]+i));n[0]+=i;var s={id:ua(a[1][0].data),messages:[]};a[2].forEach(function(o){var l=$n(o.data),c=ua(l[3][0].data);s.messages.push({meta:l,data:e.slice(n[0],n[0]+c)}),n[0]+=c}),(t=a[3])!=null&&t[0]&&(s.merge=ua(a[3][0].data)>>>0>0),r.push(s)}return r}function J1(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:ri(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:ri(+!!r.merge),type:0}]);var i=[];r.messages.forEach(function(s){i.push(s.data),s.meta[3]=[{type:0,data:ri(s.data.length)}],n[2].push({data:Ps(s.meta),type:2})});var a=Ps(n);t.push(ri(a.length)),t.push(a),i.forEach(function(s){return t.push(s)})}),X0(t)}function B_t(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=vE(t,r),i=[];r[0]<t.length;){var a=t[r[0]]&3;if(a==0){var s=t[r[0]++]>>2;if(s<60)++s;else{var o=s-59;s=t[r[0]],o>1&&(s|=t[r[0]+1]<<8),o>2&&(s|=t[r[0]+2]<<16),o>3&&(s|=t[r[0]+3]<<24),s>>>=0,s++,r[0]+=o}i.push(t.slice(r[0],r[0]+s)),r[0]+=s;continue}else{var l=0,c=0;if(a==1?(c=(t[r[0]]>>2&7)+4,l=(t[r[0]++]&224)<<3,l|=t[r[0]++]):(c=(t[r[0]++]>>2)+1,a==2?(l=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(l=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),i=[X0(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(i.push(i[0].slice(-l)),c-=l;c>=i[i.length-1].length;)i.push(i[i.length-1]),c-=i[i.length-1].length;i.push(i[0].slice(-l,-l+c))}}var d=X0(i);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function $c(e){for(var t=[],r=0;r<e.length;){var n=e[r++],i=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(B_t(n,e.slice(r,r+i))),r+=i}if(r!==e.length)throw new Error("data is not a valid framed stream!");return X0(t)}function Z1(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),i=new Uint8Array(4);t.push(i);var a=ri(n),s=a.length;t.push(a),n<=60?(s++,t.push(new Uint8Array([n-1<<2]))):n<=256?(s+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(s+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(s+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(s+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),s+=n,i[0]=0,i[1]=s&255,i[2]=s>>8&255,i[3]=s>>16&255,r+=n}return X0(t)}function U_t(e,t,r,n){var i=Ox(e),a=i.getUint32(4,!0),s=(n>1?12:8)+cte(a&(n>1?3470:398))*4,o=-1,l=-1,c=NaN,d=new Date(2001,0,1);a&512&&(o=i.getUint32(s,!0),s+=4),s+=cte(a&(n>1?12288:4096))*4,a&16&&(l=i.getUint32(s,!0),s+=4),a&32&&(c=i.getFloat64(s,!0),s+=8),a&64&&(d.setTime(d.getTime()+i.getFloat64(s,!0)*1e3),s+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:c>0};break;case 7:f={t:"n",v:c/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(l>-1)f={t:"s",v:t[l]};else if(!isNaN(c))f={t:"n",v:c};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function $_t(e,t,r){var n=Ox(e),i=n.getUint32(8,!0),a=12,s=-1,o=-1,l=NaN,c=NaN,d=new Date(2001,0,1);i&1&&(l=F_t(e,a),a+=16),i&2&&(c=n.getFloat64(a,!0),a+=8),i&4&&(d.setTime(d.getTime()+n.getFloat64(a,!0)*1e3),a+=8),i&8&&(o=n.getUint32(a,!0),a+=4),i&16&&(s=n.getUint32(a,!0),a+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:l};break;case 3:f={t:"s",v:t[o]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:c>0};break;case 7:f={t:"n",v:c/86400};break;case 8:f={t:"e",v:0};break;case 9:if(s>-1)f={t:"s",v:r[s]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(i&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(i&31," : ").concat(e.slice(0,4)))}return f}function MM(e,t){var r=new Uint8Array(32),n=Ox(r),i=12,a=0;switch(r[0]=5,e.t){case"n":r[1]=2,L_t(r,i,e.v),a|=1,i+=16;break;case"b":r[1]=6,n.setFloat64(i,e.v?1:0,!0),a|=2,i+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(i,t.indexOf(e.v),!0),a|=8,i+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,a,!0),r.slice(0,i)}function FM(e,t){var r=new Uint8Array(32),n=Ox(r),i=12,a=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(i,e.v,!0),a|=32,i+=8;break;case"b":r[2]=6,n.setFloat64(i,e.v?1:0,!0),a|=32,i+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(i,t.indexOf(e.v),!0),a|=16,i+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,a,!0),r.slice(0,i)}function z_t(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return U_t(e,t,r,e[0]);case 5:return $_t(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function oo(e){var t=$n(e);return vE(t[1][0].data)}function ute(e,t){var r=$n(t.data),n=ua(r[1][0].data),i=r[3],a=[];return(i||[]).forEach(function(s){var o=$n(s.data),l=ua(o[1][0].data)>>>0;switch(n){case 1:a[l]=z5(o[3][0].data);break;case 8:{var c=e[oo(o[9][0].data)][0],d=$n(c.data),f=e[oo(d[1][0].data)][0],p=ua(f.meta[1][0].data);if(p!=2001)throw new Error("2000 unexpected reference to ".concat(p));var m=$n(f.data);a[l]=m[3].map(function(x){return z5(x.data)}).join("")}break}}),a}function H_t(e,t){var r,n,i,a,s,o,l,c,d,f,p,m,x,y,b=$n(e),S=ua(b[1][0].data)>>>0,_=ua(b[2][0].data)>>>0,C=((n=(r=b[8])==null?void 0:r[0])==null?void 0:n.data)&&ua(b[8][0].data)>0||!1,A,j;if((a=(i=b[7])==null?void 0:i[0])!=null&&a.data&&t!=0)A=(o=(s=b[7])==null?void 0:s[0])==null?void 0:o.data,j=(c=(l=b[6])==null?void 0:l[0])==null?void 0:c.data;else if((f=(d=b[4])==null?void 0:d[0])!=null&&f.data&&t!=1)A=(m=(p=b[4])==null?void 0:p[0])==null?void 0:m.data,j=(y=(x=b[3])==null?void 0:x[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var P=C?4:1,O=Ox(A),D=[],L=0;L<A.length/2;++L){var B=O.getUint16(L*2,!0);B<65535&&D.push([L,B])}if(D.length!=_)throw"Expected ".concat(_," cells, found ").concat(D.length);var H=[];for(L=0;L<D.length-1;++L)H[D[L][0]]=j.subarray(D[L][1]*P,D[L+1][1]*P);return D.length>=1&&(H[D[D.length-1][0]]=j.subarray(D[D.length-1][1]*P)),{R:S,cells:H}}function W_t(e,t){var r,n=$n(t.data),i=(r=n==null?void 0:n[7])!=null&&r[0]?ua(n[7][0].data)>>>0>0?1:0:-1,a=gz(n[5],function(s){return H_t(s,i)});return{nrows:ua(n[4][0].data)>>>0,data:a.reduce(function(s,o){return s[o.R]||(s[o.R]=[]),o.cells.forEach(function(l,c){if(s[o.R][c])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(c));s[o.R][c]=l}),s},[])}}function V_t(e,t,r){var n,i=$n(t.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(ua(i[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(i[6][0].data));if(a.e.c=(ua(i[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(i[7][0].data));r["!ref"]=en(a);var s=$n(i[4][0].data),o=ute(e,e[oo(s[4][0].data)][0]),l=(n=s[17])!=null&&n[0]?ute(e,e[oo(s[17][0].data)][0]):[],c=$n(s[3][0].data),d=0;c[1].forEach(function(f){var p=$n(f.data),m=e[oo(p[2][0].data)][0],x=ua(m.meta[1][0].data);if(x!=6002)throw new Error("6001 unexpected reference to ".concat(x));var y=W_t(e,m);y.data.forEach(function(b,S){b.forEach(function(_,C){var A=Dr({r:d+S,c:C}),j=z_t(_,o,l);j&&(r[A]=j)})}),d+=y.nrows})}function q_t(e,t){var r=$n(t.data),n={"!ref":"A1"},i=e[oo(r[2][0].data)],a=ua(i[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return V_t(e,i[0],n),n}function G_t(e,t){var r,n=$n(t.data),i={name:(r=n[1])!=null&&r[0]?z5(n[1][0].data):"",sheets:[]},a=gz(n[2],oo);return a.forEach(function(s){e[s].forEach(function(o){var l=ua(o.meta[1][0].data);l==6e3&&i.sheets.push(q_t(e,o))})}),i}function K_t(e,t){var r=wz(),n=$n(t.data),i=gz(n[1],oo);if(i.forEach(function(a){e[a].forEach(function(s){var o=ua(s.meta[1][0].data);if(o==2){var l=G_t(e,s);l.sheets.forEach(function(c,d){Sz(r,c,d==0?l.name:l.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function LM(e){var t,r,n,i,a={},s=[];if(e.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var c;try{c=$c(l.content)}catch(f){return console.log("?? "+l.content.length+" "+(f.message||f))}var d;try{d=Uc(c)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){a[f.id]=f.messages,s.push(f.id)})}}),!s.length)throw new Error("File has no messages");var o=((i=(n=(r=(t=a==null?void 0:a[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:i[0].data)&&ua(a[1][0].meta[1][0].data)==1&&a[1][0];if(o||s.forEach(function(l){a[l].forEach(function(c){var d=ua(c.meta[1][0].data)>>>0;if(d==1)if(!o)o=c;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return K_t(a,o)}function X_t(e,t,r){var n,i,a,s;if(!((n=e[6])!=null&&n[0])||!((i=e[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var o=((s=(a=e[8])==null?void 0:a[0])==null?void 0:s.data)&&ua(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,c=Ox(e[7][0].data),d=0,f=[],p=Ox(e[4][0].data),m=0,x=[],y=0;y<t.length;++y){if(t[y]==null){c.setUint16(y*2,65535,!0),p.setUint16(y*2,65535);continue}c.setUint16(y*2,d,!0),p.setUint16(y*2,m,!0);var b,S;switch(typeof t[y]){case"string":b=MM({t:"s",v:t[y]},r),S=FM({t:"s",v:t[y]},r);break;case"number":b=MM({t:"n",v:t[y]},r),S=FM({t:"n",v:t[y]},r);break;case"boolean":b=MM({t:"b",v:t[y]},r),S=FM({t:"b",v:t[y]},r);break;default:throw new Error("Unsupported value "+t[y])}f.push(b),d+=b.length,x.push(S),m+=S.length,++l}for(e[2][0].data=ri(l);y<e[7][0].data.length/2;++y)c.setUint16(y*2,65535,!0),p.setUint16(y*2,65535,!0);return e[6][0].data=X0(f),e[3][0].data=X0(x),l}function Y_t(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Dl(r["!ref"]);n.s.r=n.s.c=0;var i=!1;n.e.c>9&&(i=!0,n.e.c=9),n.e.r>49&&(i=!0,n.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(en(n)));var a=IO(r,{range:n,header:1}),s=["~Sh33tJ5~"];a.forEach(function(de){return de.forEach(function(G){typeof G=="string"&&s.push(G)})});var o={},l=[],c=yr.read(t.numbers,{type:"base64"});c.FileIndex.map(function(de,G){return[de,c.FullPaths[G]]}).forEach(function(de){var G=de[0],q=de[1];if(G.type==2&&G.name.match(/\.iwa/)){var ne=G.content,Se=$c(ne),re=Uc(Se);re.forEach(function(ae){l.push(ae.id),o[ae.id]={deps:[],location:q,type:ua(ae.messages[0].meta[1][0].data)}})}}),l.sort(function(de,G){return de-G});var d=l.filter(function(de){return de>1}).map(function(de){return[de,ri(de)]});c.FileIndex.map(function(de,G){return[de,c.FullPaths[G]]}).forEach(function(de){var G=de[0];if(de[1],!!G.name.match(/\.iwa/)){var q=Uc($c(G.content));q.forEach(function(ne){ne.messages.forEach(function(Se){d.forEach(function(re){ne.messages.some(function(ae){return ua(ae.meta[1][0].data)!=11006&&M_t(ae.data,re[1])})&&o[re[0]].deps.push(ne.id)})})})}});for(var f=yr.find(c,o[1].location),p=Uc($c(f.content)),m,x=0;x<p.length;++x){var y=p[x];y.id==1&&(m=y)}var b=oo($n(m.messages[0].data)[1][0].data);for(f=yr.find(c,o[b].location),p=Uc($c(f.content)),x=0;x<p.length;++x)y=p[x],y.id==b&&(m=y);for(b=oo($n(m.messages[0].data)[2][0].data),f=yr.find(c,o[b].location),p=Uc($c(f.content)),x=0;x<p.length;++x)y=p[x],y.id==b&&(m=y);for(b=oo($n(m.messages[0].data)[2][0].data),f=yr.find(c,o[b].location),p=Uc($c(f.content)),x=0;x<p.length;++x)y=p[x],y.id==b&&(m=y);var S=$n(m.messages[0].data);{S[6][0].data=ri(n.e.r+1),S[7][0].data=ri(n.e.c+1);var _=oo(S[46][0].data),C=yr.find(c,o[_].location),A=Uc($c(C.content));{for(var j=0;j<A.length&&A[j].id!=_;++j);if(A[j].id!=_)throw"Bad ColumnRowUIDMapArchive";var P=$n(A[j].messages[0].data);P[1]=[],P[2]=[],P[3]=[];for(var O=0;O<=n.e.c;++O){var D=[];D[1]=D[2]=[{type:0,data:ri(O+420690)}],P[1].push({type:2,data:Ps(D)}),P[2].push({type:0,data:ri(O)}),P[3].push({type:0,data:ri(O)})}P[4]=[],P[5]=[],P[6]=[];for(var L=0;L<=n.e.r;++L)D=[],D[1]=D[2]=[{type:0,data:ri(L+726270)}],P[4].push({type:2,data:Ps(D)}),P[5].push({type:0,data:ri(L)}),P[6].push({type:0,data:ri(L)});A[j].messages[0].data=Ps(P)}C.content=Z1(J1(A)),C.size=C.content.length,delete S[46];var B=$n(S[4][0].data);{B[7][0].data=ri(n.e.r+1);var H=$n(B[1][0].data),z=oo(H[2][0].data);C=yr.find(c,o[z].location),A=Uc($c(C.content));{if(A[0].id!=z)throw"Bad HeaderStorageBucket";var ie=$n(A[0].messages[0].data);for(L=0;L<a.length;++L){var X=$n(ie[2][0].data);X[1][0].data=ri(L),X[4][0].data=ri(a[L].length),ie[2][L]={type:ie[2][0].type,data:Ps(X)}}A[0].messages[0].data=Ps(ie)}C.content=Z1(J1(A)),C.size=C.content.length;var W=oo(B[2][0].data);C=yr.find(c,o[W].location),A=Uc($c(C.content));{if(A[0].id!=W)throw"Bad HeaderStorageBucket";for(ie=$n(A[0].messages[0].data),O=0;O<=n.e.c;++O)X=$n(ie[2][0].data),X[1][0].data=ri(O),X[4][0].data=ri(n.e.r+1),ie[2][O]={type:ie[2][0].type,data:Ps(X)};A[0].messages[0].data=Ps(ie)}C.content=Z1(J1(A)),C.size=C.content.length;var Q=oo(B[4][0].data);(function(){for(var de=yr.find(c,o[Q].location),G=Uc($c(de.content)),q,ne=0;ne<G.length;++ne){var Se=G[ne];Se.id==Q&&(q=Se)}var re=$n(q.messages[0].data);{re[3]=[];var ae=[];s.forEach(function(V,Ae){ae[1]=[{type:0,data:ri(Ae)}],ae[2]=[{type:0,data:ri(1)}],ae[3]=[{type:2,data:D_t(V)}],re[3].push({type:2,data:Ps(ae)})})}q.messages[0].data=Ps(re);var ge=J1(G),Ee=Z1(ge);de.content=Ee,de.size=de.content.length})();var te=$n(B[3][0].data);{var J=te[1][0];delete te[2];var Y=$n(J.data);{var pe=oo(Y[2][0].data);(function(){for(var de=yr.find(c,o[pe].location),G=Uc($c(de.content)),q,ne=0;ne<G.length;++ne){var Se=G[ne];Se.id==pe&&(q=Se)}var re=$n(q.messages[0].data);{delete re[6],delete te[7];var ae=new Uint8Array(re[5][0].data);re[5]=[];for(var ge=0,Ee=0;Ee<=n.e.r;++Ee){var V=$n(ae);ge+=X_t(V,a[Ee],s),V[1][0].data=ri(Ee),re[5].push({data:Ps(V),type:2})}re[1]=[{type:0,data:ri(n.e.c+1)}],re[2]=[{type:0,data:ri(n.e.r+1)}],re[3]=[{type:0,data:ri(ge)}],re[4]=[{type:0,data:ri(n.e.r+1)}]}q.messages[0].data=Ps(re);var Ae=J1(G),Pe=Z1(Ae);de.content=Pe,de.size=de.content.length})()}J.data=Ps(Y)}B[3][0].data=Ps(te)}S[4][0].data=Ps(B)}m.messages[0].data=Ps(S);var _e=J1(p),ee=Z1(_e);return f.content=ee,f.size=f.content.length,c}function qve(e){return function(r){for(var n=0;n!=e.length;++n){var i=e[n];r[i[0]]===void 0&&(r[i[0]]=i[1]),i[2]==="n"&&(r[i[0]]=Number(r[i[0]]))}}}function xz(e){qve([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function vz(e){qve([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function Q_t(e){return Sn.WS.indexOf(e)>-1?"sheet":e==Sn.CS?"chart":e==Sn.DS?"dialog":e==Sn.MS?"macro":e&&e.length?e:"sheet"}function J_t(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,Q_t(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function Z_t(e,t,r,n,i,a,s,o,l,c,d,f){try{a[n]=Q2(nc(e,r,!0),t);var p=Ia(e,t),m;switch(o){case"sheet":m=wkt(p,t,i,l,a[n],c,d,f);break;case"chart":if(m=Skt(p,t,i,l,a[n],c,d,f),!m||!m["!drawel"])break;var x=m2(m["!drawel"].Target,t),y=fE(x),b=l2t(nc(e,x,!0),Q2(nc(e,y,!0),x)),S=m2(b,x),_=fE(S);m=XCt(nc(e,S,!0),S,l,Q2(nc(e,_,!0),S),c,m);break;case"macro":m=Ekt(p,t,i,l,a[n],c,d,f);break;case"dialog":m=Ckt(p,t,i,l,a[n],c,d,f);break;default:throw new Error("Unrecognized sheet type "+o)}s[n]=m;var C=[];a&&a[n]&&da(a[n]).forEach(function(A){var j="";if(a[n][A].Type==Sn.CMNT){j=m2(a[n][A].Target,t);var P=Akt(Ia(e,j,!0),j,l);if(!P||!P.length)return;Xee(m,P,!1)}a[n][A].Type==Sn.TCMNT&&(j=m2(a[n][A].Target,t),C=C.concat(u2t(Ia(e,j,!0),l)))}),C&&C.length&&Xee(m,C,!0,l.people||[])}catch(A){if(l.WTF)throw A}}function Mc(e){return e.charAt(0)=="/"?e.slice(1):e}function eNt(e,t){if(Bb(),t=t||{},xz(t),Wc(e,"META-INF/manifest.xml")||Wc(e,"objectdata.xml"))return ste(e,t);if(Wc(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof LM<"u"){if(e.FileIndex)return LM(e);var r=yr.utils.cfb_new();return gee(e).forEach(function(X){ln(r,X,d1t(e,X))}),LM(r)}throw new Error("Unsupported NUMBERS file")}if(!Wc(e,"[Content_Types].xml"))throw Wc(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Wc(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=gee(e),i=ivt(nc(e,"[Content_Types].xml")),a=!1,s,o;if(i.workbooks.length===0&&(o="xl/workbook.xml",Ia(e,o,!0)&&i.workbooks.push(o)),i.workbooks.length===0){if(o="xl/workbook.bin",!Ia(e,o,!0))throw new Error("Could not find workbook");i.workbooks.push(o),a=!0}i.workbooks[0].slice(-3)=="bin"&&(a=!0);var l={},c={};if(!t.bookSheets&&!t.bookProps){if(J2=[],i.sst)try{J2=Nkt(Ia(e,Mc(i.sst)),i.sst,t)}catch(X){if(t.WTF)throw X}t.cellStyles&&i.themes.length&&(l=_kt(nc(e,i.themes[0].replace(/^\//,""),!0)||"",i.themes[0],t)),i.style&&(c=kkt(Ia(e,Mc(i.style)),i.style,l,t))}i.links.map(function(X){try{var W=Q2(nc(e,fE(Mc(X))),X);return Ikt(Ia(e,Mc(X)),W,X,t)}catch{}});var d=bkt(Ia(e,Mc(i.workbooks[0])),i.workbooks[0],t),f={},p="";i.coreprops.length&&(p=Ia(e,Mc(i.coreprops[0]),!0),p&&(f=j1e(p)),i.extprops.length!==0&&(p=Ia(e,Mc(i.extprops[0]),!0),p&&dvt(p,f,t)));var m={};(!t.bookSheets||t.bookProps)&&i.custprops.length!==0&&(p=nc(e,Mc(i.custprops[0]),!0),p&&(m=hvt(p,t)));var x={};if((t.bookSheets||t.bookProps)&&(d.Sheets?s=d.Sheets.map(function(W){return W.name}):f.Worksheets&&f.SheetNames.length>0&&(s=f.SheetNames),t.bookProps&&(x.Props=f,x.Custprops=m),t.bookSheets&&typeof s<"u"&&(x.SheetNames=s),t.bookSheets?x.SheetNames:t.bookProps))return x;s={};var y={};t.bookDeps&&i.calcchain&&(y=Tkt(Ia(e,Mc(i.calcchain)),i.calcchain));var b=0,S={},_,C;{var A=d.Sheets;f.Worksheets=A.length,f.SheetNames=[];for(var j=0;j!=A.length;++j)f.SheetNames[j]=A[j].name}var P=a?"bin":"xml",O=i.workbooks[0].lastIndexOf("/"),D=(i.workbooks[0].slice(0,O+1)+"_rels/"+i.workbooks[0].slice(O+1)+".rels").replace(/^\//,"");Wc(e,D)||(D="xl/_rels/workbook."+P+".rels");var L=Q2(nc(e,D,!0),D.replace(/_rels.*/,"s5s"));(i.metadata||[]).length>=1&&(t.xlmeta=Okt(Ia(e,Mc(i.metadata[0])),i.metadata[0],t)),(i.people||[]).length>=1&&(t.people=f2t(Ia(e,Mc(i.people[0])),t)),L&&(L=J_t(L,d.Sheets));var B=Ia(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=f.Worksheets;++b){var H="sheet";if(L&&L[b]?(_="xl/"+L[b][1].replace(/[\/]?xl\//,""),Wc(e,_)||(_=L[b][1]),Wc(e,_)||(_=D.replace(/_rels\/.*$/,"")+L[b][1]),H=L[b][2]):(_="xl/worksheets/sheet"+(b+1-B)+"."+P,_=_.replace(/sheet0\./,"sheet.")),C=_.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(b!=t.sheets)continue e;break;case"string":if(f.SheetNames[b].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var z=!1,ie=0;ie!=t.sheets.length;++ie)typeof t.sheets[ie]=="number"&&t.sheets[ie]==b&&(z=1),typeof t.sheets[ie]=="string"&&t.sheets[ie].toLowerCase()==f.SheetNames[b].toLowerCase()&&(z=1);if(!z)continue e}}Z_t(e,_,C,f.SheetNames[b],b,S,s,H,t,d,l,c)}return x={Directory:i,Workbook:d,Props:f,Custprops:m,Deps:y,Sheets:s,SheetNames:f.SheetNames,Strings:J2,Styles:c,Themes:l,SSF:Pi(Rr)},t&&t.bookFiles&&(e.files?(x.keys=n,x.files=e.files):(x.keys=[],x.files={},e.FullPaths.forEach(function(X,W){X=X.replace(/^Root Entry[\/]/,""),x.keys.push(X),x.files[X]=e.FileIndex[W]}))),t&&t.bookVBA&&(i.vba.length>0?x.vbaraw=Ia(e,Mc(i.vba[0]),!0):i.defaults&&i.defaults.bin===b2t&&(x.vbaraw=Ia(e,"xl/vbaProject.bin",!0))),x}function tNt(e,t){var r=t||{},n="Workbook",i=yr.find(e,n);try{if(n="/!DataSpaces/Version",i=yr.find(e,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(Obt(i.content),n="/!DataSpaces/DataSpaceMap",i=yr.find(e,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=Rbt(i.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",i=yr.find(e,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=jbt(i.content);if(s.length!=1||s[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",i=yr.find(e,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);Mbt(i.content)}catch{}if(n="/EncryptionInfo",i=yr.find(e,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=Fbt(i.content);if(n="/EncryptedPackage",i=yr.find(e,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],i.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],i.content,r.password||"",r);throw new Error("File is password-protected")}function rNt(e,t){return t.bookType=="ods"?Vve(e,t):t.bookType=="numbers"?Y_t(e,t):t.bookType=="xlsb"?nNt(e,t):iNt(e,t)}function nNt(e,t){_v=1024,e&&!e.SSF&&(e.SSF=Pi(Rr)),e&&e.SSF&&(Bb(),RP(e.SSF),t.revssf=DP(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Z2?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=yve.indexOf(t.bookType)>-1,i=nz();vz(t=t||{});var a=H$(),s="",o=0;if(t.cellXfs=[],gm(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),s="docProps/core.xml",ln(a,s,D1e(e.Props,t)),i.coreprops.push(s),ii(t.rels,2,s,Sn.CORE_PROPS),s="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],c=0;c<e.SheetNames.length;++c)(e.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}for(e.Props.Worksheets=e.Props.SheetNames.length,ln(a,s,L1e(e.Props)),i.extprops.push(s),ii(t.rels,3,s,Sn.EXT_PROPS),e.Custprops!==e.Props&&da(e.Custprops||{}).length>0&&(s="docProps/custom.xml",ln(a,s,B1e(e.Custprops)),i.custprops.push(s),ii(t.rels,4,s,Sn.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],p=(f||{})["!type"]||"sheet";switch(p){case"chart":default:s="xl/worksheets/sheet"+o+"."+r,ln(a,s,Rkt(o-1,s,t,e,d)),i.sheets.push(s),ii(t.wbrels,-1,"worksheets/sheet"+o+"."+r,Sn.WS[0])}if(f){var m=f["!comments"],x=!1,y="";m&&m.length>0&&(y="xl/comments"+o+"."+r,ln(a,y,Mkt(m,y)),i.comments.push(y),ii(d,-1,"../comments"+o+"."+r,Sn.CMNT),x=!0),f["!legacy"]&&x&&ln(a,"xl/drawings/vmlDrawing"+o+".vml",xve(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&ln(a,fE(s),Wv(d))}return t.Strings!=null&&t.Strings.length>0&&(s="xl/sharedStrings."+r,ln(a,s,Dkt(t.Strings,s,t)),i.strs.push(s),ii(t.wbrels,-1,"sharedStrings."+r,Sn.SST)),s="xl/workbook."+r,ln(a,s,Pkt(e,s)),i.workbooks.push(s),ii(t.rels,1,s,Sn.WB),s="xl/theme/theme1.xml",ln(a,s,cz(e.Themes,t)),i.themes.push(s),ii(t.wbrels,-1,"theme/theme1.xml",Sn.THEME),s="xl/styles."+r,ln(a,s,jkt(e,s,t)),i.styles.push(s),ii(t.wbrels,-1,"styles."+r,Sn.STY),e.vbaraw&&n&&(s="xl/vbaProject.bin",ln(a,s,e.vbaraw),i.vba.push(s),ii(t.wbrels,-1,"vbaProject.bin",Sn.VBA)),s="xl/metadata."+r,ln(a,s,Fkt(s)),i.metadata.push(s),ii(t.wbrels,-1,"metadata."+r,Sn.XLMETA),ln(a,"[Content_Types].xml",P1e(i,t)),ln(a,"_rels/.rels",Wv(t.rels)),ln(a,"xl/_rels/workbook."+r+".rels",Wv(t.wbrels)),delete t.revssf,delete t.ssf,a}function iNt(e,t){_v=1024,e&&!e.SSF&&(e.SSF=Pi(Rr)),e&&e.SSF&&(Bb(),RP(e.SSF),t.revssf=DP(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Z2?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=yve.indexOf(t.bookType)>-1,i=nz();vz(t=t||{});var a=H$(),s="",o=0;if(t.cellXfs=[],gm(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),s="docProps/core.xml",ln(a,s,D1e(e.Props,t)),i.coreprops.push(s),ii(t.rels,2,s,Sn.CORE_PROPS),s="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],c=0;c<e.SheetNames.length;++c)(e.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}e.Props.Worksheets=e.Props.SheetNames.length,ln(a,s,L1e(e.Props)),i.extprops.push(s),ii(t.rels,3,s,Sn.EXT_PROPS),e.Custprops!==e.Props&&da(e.Custprops||{}).length>0&&(s="docProps/custom.xml",ln(a,s,B1e(e.Custprops)),i.custprops.push(s),ii(t.rels,4,s,Sn.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},p=e.Sheets[e.SheetNames[o-1]],m=(p||{})["!type"]||"sheet";switch(m){case"chart":default:s="xl/worksheets/sheet"+o+"."+r,ln(a,s,Ive(o-1,t,e,f)),i.sheets.push(s),ii(t.wbrels,-1,"worksheets/sheet"+o+"."+r,Sn.WS[0])}if(p){var x=p["!comments"],y=!1,b="";if(x&&x.length>0){var S=!1;x.forEach(function(_){_[1].forEach(function(C){C.T==!0&&(S=!0)})}),S&&(b="xl/threadedComments/threadedComment"+o+"."+r,ln(a,b,d2t(x,d,t)),i.threadedcomments.push(b),ii(f,-1,"../threadedComments/threadedComment"+o+"."+r,Sn.TCMNT)),b="xl/comments"+o+"."+r,ln(a,b,vve(x)),i.comments.push(b),ii(f,-1,"../comments"+o+"."+r,Sn.CMNT),y=!0}p["!legacy"]&&y&&ln(a,"xl/drawings/vmlDrawing"+o+".vml",xve(o,p["!comments"])),delete p["!comments"],delete p["!legacy"]}f["!id"].rId1&&ln(a,fE(s),Wv(f))}return t.Strings!=null&&t.Strings.length>0&&(s="xl/sharedStrings."+r,ln(a,s,ave(t.Strings,t)),i.strs.push(s),ii(t.wbrels,-1,"sharedStrings."+r,Sn.SST)),s="xl/workbook."+r,ln(a,s,Dve(e)),i.workbooks.push(s),ii(t.rels,1,s,Sn.WB),s="xl/theme/theme1.xml",ln(a,s,cz(e.Themes,t)),i.themes.push(s),ii(t.wbrels,-1,"theme/theme1.xml",Sn.THEME),s="xl/styles."+r,ln(a,s,hve(e,t)),i.styles.push(s),ii(t.wbrels,-1,"styles."+r,Sn.STY),e.vbaraw&&n&&(s="xl/vbaProject.bin",ln(a,s,e.vbaraw),i.vba.push(s),ii(t.wbrels,-1,"vbaProject.bin",Sn.VBA)),s="xl/metadata."+r,ln(a,s,gve()),i.metadata.push(s),ii(t.wbrels,-1,"metadata."+r,Sn.XLMETA),d.length>1&&(s="xl/persons/person.xml",ln(a,s,h2t(d)),i.people.push(s),ii(t.wbrels,-1,"persons/person.xml",Sn.PEOPLE)),ln(a,"[Content_Types].xml",P1e(i,t)),ln(a,"_rels/.rels",Wv(t.rels)),ln(a,"xl/_rels/workbook."+r+".rels",Wv(t.wbrels)),delete t.revssf,delete t.ssf,a}function yz(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=xc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function aNt(e,t){return yr.find(e,"EncryptedPackage")?tNt(e,t):Bve(e,t)}function sNt(e,t){var r,n=e,i=t||{};return i.type||(i.type=xn&&Buffer.isBuffer(e)?"buffer":"base64"),r=o1e(n,i),eNt(r,i)}function Gve(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return U5(e.slice(r),t);default:break e}return Qy.to_workbook(e,t)}function oNt(e,t){var r="",n=yz(e,t);switch(t.type){case"base64":r=xc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Nx(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=di(r)),t.type="binary",Gve(r,t)}function lNt(e,t){var r=e;return t.type=="base64"&&(r=xc(r)),r=sE.utils.decode(1200,r.slice(2),"str"),t.type="binary",Gve(r,t)}function cNt(e){return e.match(/[^\x00-\x7F]/)?rf(e):e}function BM(e,t,r,n){return n?(r.type="string",Qy.to_workbook(e,r)):Qy.to_workbook(t,r)}function H5(e,t){L$();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return H5(new Uint8Array(e),(r=Pi(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,i=[0,0,0,0],a=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),qv={},r.dateNF&&(qv.dateNF=r.dateNF),r.type||(r.type=xn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=xn?"buffer":"binary",n=n1t(e),typeof Uint8Array<"u"&&!xn&&(r.type="array")),r.type=="string"&&(a=!0,r.type="binary",r.codepage=65001,n=cNt(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var s=new ArrayBuffer(3),o=new Uint8Array(s);if(o.foo="bar",!o.foo)return r=Pi(r),r.type="array",H5(B$(n),r)}switch((i=yz(n,r))[0]){case 208:if(i[1]===207&&i[2]===17&&i[3]===224&&i[4]===161&&i[5]===177&&i[6]===26&&i[7]===225)return aNt(yr.read(n,r),r);break;case 9:if(i[1]<=8)return Bve(n,r);break;case 60:return U5(n,r);case 73:if(i[1]===73&&i[2]===42&&i[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(i[1]===68)return pbt(n,r);break;case 84:if(i[1]===65&&i[2]===66&&i[3]===76)return nve.to_workbook(n,r);break;case 80:return i[1]===75&&i[2]<9&&i[3]<9?sNt(n,r):BM(e,n,r,a);case 239:return i[3]===60?U5(n,r):BM(e,n,r,a);case 255:if(i[1]===254)return lNt(n,r);if(i[1]===0&&i[2]===2&&i[3]===0)return Xg.to_workbook(n,r);break;case 0:if(i[1]===0&&(i[2]>=2&&i[3]===0||i[2]===0&&(i[3]===8||i[3]===9)))return Xg.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return B5.to_workbook(n,r);case 123:if(i[1]===92&&i[2]===114&&i[3]===116)return uve.to_workbook(n,r);break;case 10:case 13:case 32:return oNt(n,r);case 137:if(i[1]===80&&i[2]===78&&i[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return hbt.indexOf(i[0])>-1&&i[2]<=12&&i[3]<=31?B5.to_workbook(n,r):BM(e,n,r,a)}function Kve(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return XC(t.file,yr.write(e,{type:xn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return yr.write(e,t)}function uNt(e,t){var r=Pi(t||{}),n=rNt(e,r);return dNt(n,r)}function dNt(e,t){var r={},n=xn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var i=e.FullPaths?yr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof i=="string"){if(t.type=="binary"||t.type=="base64")return i;i=new Uint8Array(PP(i))}return t.password&&typeof encrypt_agile<"u"?Kve(encrypt_agile(i,t.password),t):t.type==="file"?XC(t.file,i):t.type=="string"?di(i):i}function fNt(e,t){var r=t||{},n=c_t(e,r);return Kve(n,r)}function Dd(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return oE(rf(n));case"binary":return rf(n);case"string":return e;case"file":return XC(t.file,n,"utf8");case"buffer":return xn?pp(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Dd(n,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function hNt(e,t){switch(t.type){case"base64":return oE(e);case"binary":return e;case"string":return e;case"file":return XC(t.file,e,"binary");case"buffer":return xn?pp(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function PN(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?oE(r):t.type=="string"?di(r):r;case"file":return XC(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function Xve(e,t){L$(),akt(e);var r=Pi(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=Xve(e,r);return r.type="array",PP(n)}var i=0;if(r.sheet&&(typeof r.sheet=="number"?i=r.sheet:i=e.SheetNames.indexOf(r.sheet),!e.SheetNames[i]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Dd(r_t(e,r),r);case"slk":case"sylk":return Dd(rve.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"htm":case"html":return Dd($ve(e.Sheets[e.SheetNames[i]],r),r);case"txt":return hNt(Yve(e.Sheets[e.SheetNames[i]],r),r);case"csv":return Dd(bz(e.Sheets[e.SheetNames[i]],r),r,"\uFEFF");case"dif":return Dd(nve.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"dbf":return PN(B5.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"prn":return Dd(Qy.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"rtf":return Dd(uve.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"eth":return Dd(ive.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"fods":return Dd(Vve(e,r),r);case"wk1":return PN(Xg.sheet_to_wk1(e.Sheets[e.SheetNames[i]],r),r);case"wk3":return PN(Xg.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),PN(Uve(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),fNt(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return uNt(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function pNt(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function mNt(e,t,r){var n={};return n.type="file",n.file=t,pNt(n),Xve(e,n)}function gNt(e,t,r,n,i,a,s,o){var l=Sa(r),c=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,p=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:r,enumerable:!1})}catch{p.__rowNum__=r}else p.__rowNum__=r;if(!s||e[r])for(var m=t.s.c;m<=t.e.c;++m){var x=s?e[r][m]:e[n[m]+l];if(x===void 0||x.t===void 0){if(c===void 0)continue;a[m]!=null&&(p[a[m]]=c);continue}var y=x.v;switch(x.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(a[m]!=null){if(y==null)if(x.t=="e"&&y===null)p[a[m]]=null;else if(c!==void 0)p[a[m]]=c;else if(d&&y===null)p[a[m]]=null;else continue;else p[a[m]]=d&&(x.t!=="n"||x.t==="n"&&o.rawNumbers!==!1)?y:tp(x,y,o);y!=null&&(f=!1)}}return{row:p,isempty:f}}function IO(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,i=1,a=[],s=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},d=c.range!=null?c.range:e["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof d){case"string":l=Mn(d);break;case"number":l=Mn(e["!ref"]),l.s.r=d;break;default:l=d}n>0&&(i=0);var f=Sa(l.s.r),p=[],m=[],x=0,y=0,b=Array.isArray(e),S=l.s.r,_=0,C={};b&&!e[S]&&(e[S]=[]);var A=c.skipHidden&&e["!cols"]||[],j=c.skipHidden&&e["!rows"]||[];for(_=l.s.c;_<=l.e.c;++_)if(!(A[_]||{}).hidden)switch(p[_]=qi(_),r=b?e[S][_]:e[p[_]+f],n){case 1:a[_]=_-l.s.c;break;case 2:a[_]=p[_];break;case 3:a[_]=c.header[_-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=s=tp(r,null,c),y=C[s]||0,!y)C[s]=1;else{do o=s+"_"+y++;while(C[o]);C[s]=y,C[o]=1}a[_]=o}for(S=l.s.r+i;S<=l.e.r;++S)if(!(j[S]||{}).hidden){var P=gNt(e,l,S,p,n,a,b,c);(P.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(m[x++]=P.row)}return m.length=x,m}var dte=/"/g;function xNt(e,t,r,n,i,a,s,o){for(var l=!0,c=[],d="",f=Sa(r),p=t.s.c;p<=t.e.c;++p)if(n[p]){var m=o.dense?(e[r]||[])[p]:e[n[p]+f];if(m==null)d="";else if(m.v!=null){l=!1,d=""+(o.rawNumbers&&m.t=="n"?m.v:tp(m,null,o));for(var x=0,y=0;x!==d.length;++x)if((y=d.charCodeAt(x))===i||y===a||y===34||o.forceQuotes){d='"'+d.replace(dte,'""')+'"';break}d=="ID"&&(d='"ID"')}else m.f!=null&&!m.F?(l=!1,d="="+m.f,d.indexOf(",")>=0&&(d='"'+d.replace(dte,'""')+'"')):d="";c.push(d)}return o.blankrows===!1&&l?null:c.join(s)}function bz(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var i=Mn(e["!ref"]),a=n.FS!==void 0?n.FS:",",s=a.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),c=new RegExp((a=="|"?"\\|":a)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var p=n.skipHidden&&e["!cols"]||[],m=n.skipHidden&&e["!rows"]||[],x=i.s.c;x<=i.e.c;++x)(p[x]||{}).hidden||(f[x]=qi(x));for(var y=0,b=i.s.r;b<=i.e.r;++b)(m[b]||{}).hidden||(d=xNt(e,i,b,f,s,l,a,n),d!=null&&(n.strip&&(d=d.replace(c,"")),(d||n.blankrows!==!1)&&r.push((y++?o:"")+d)));return delete n.dense,r.join("")}function Yve(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=bz(e,t);return r}function vNt(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var i=Mn(e["!ref"]),a="",s=[],o,l=[],c=Array.isArray(e);for(o=i.s.c;o<=i.e.c;++o)s[o]=qi(o);for(var d=i.s.r;d<=i.e.r;++d)for(a=Sa(d),o=i.s.c;o<=i.e.c;++o)if(t=s[o]+a,r=c?(e[d]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=t+"="+n}return l}function Qve(e,t,r){var n=r||{},i=+!n.skipHeader,a=e||{},s=0,o=0;if(a&&n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var l=typeof n.origin=="string"?Gi(n.origin):n.origin;s=l.r,o=l.c}var c,d={s:{c:0,r:0},e:{c:o,r:s+t.length-1+i}};if(a["!ref"]){var f=Mn(a["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),s==-1&&(s=f.e.r+1,d.e.r=s+t.length-1+i)}else s==-1&&(s=0,d.e.r=t.length-1+i);var p=n.header||[],m=0;t.forEach(function(y,b){da(y).forEach(function(S){(m=p.indexOf(S))==-1&&(p[m=p.length]=S);var _=y[S],C="z",A="",j=Dr({c:o+m,r:s+b+i});c=yE(a,j),_&&typeof _=="object"&&!(_ instanceof Date)?a[j]=_:(typeof _=="number"?C="n":typeof _=="boolean"?C="b":typeof _=="string"?C="s":_ instanceof Date?(C="d",n.cellDates||(C="n",_=Qa(_)),A=n.dateNF||Rr[14]):_===null&&n.nullError&&(C="e",_=0),c?(c.t=C,c.v=_,delete c.w,delete c.R,A&&(c.z=A)):a[j]=c={t:C,v:_},A&&(c.z=A))})}),d.e.c=Math.max(d.e.c,o+p.length-1);var x=Sa(s);if(i)for(m=0;m<p.length;++m)a[qi(m+o)+x]={t:"s",v:p[m]};return a["!ref"]=en(d),a}function yNt(e,t){return Qve(null,e,t)}function yE(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Gi(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?yE(e,Dr(t)):yE(e,Dr({r:t,c:r||0}))}function bNt(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function wz(){return{SheetNames:[],Sheets:{}}}function Sz(e,t,r,n){var i=1;if(!r)for(;i<=65535&&e.SheetNames.indexOf(r="Sheet"+i)!=-1;++i,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);i=a&&+a[2]||0;var s=a&&a[1]||r;for(++i;i<=65535&&e.SheetNames.indexOf(r=s+i)!=-1;++i);}if(jve(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function wNt(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=bNt(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function SNt(e,t){return e.z=t,e}function Jve(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function ENt(e,t,r){return Jve(e,"#"+t,r)}function CNt(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function kNt(e,t,r,n){for(var i=typeof t!="string"?t:Mn(t),a=typeof t=="string"?t:en(t),s=i.s.r;s<=i.e.r;++s)for(var o=i.s.c;o<=i.e.c;++o){var l=yE(e,s,o);l.t="n",l.F=a,delete l.v,s==i.s.r&&o==i.s.c&&(l.f=r,n&&(l.D=!0))}return e}var rS={encode_col:qi,encode_row:Sa,encode_cell:Dr,encode_range:en,decode_col:Q$,decode_row:Y$,split_cell:D1t,decode_cell:Gi,decode_range:Dl,format_cell:tp,sheet_add_aoa:k1e,sheet_add_json:Qve,sheet_add_dom:zve,aoa_to_sheet:Ub,json_to_sheet:yNt,table_to_sheet:Hve,table_to_book:O_t,sheet_to_csv:bz,sheet_to_txt:Yve,sheet_to_json:IO,sheet_to_html:$ve,sheet_to_formulae:vNt,sheet_to_row_object_array:IO,sheet_get_cell:yE,book_new:wz,book_append_sheet:Sz,book_set_sheet_visibility:wNt,cell_set_number_format:SNt,cell_set_hyperlink:Jve,cell_set_internal_link:ENt,cell_add_comment:CNt,sheet_set_array_formula:kNt,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Zve=e=>new Promise((t,r)=>{const n=new FileReader;n.onload=i=>{var a;try{const s=(a=i.target)==null?void 0:a.result,o=H5(s,{type:"binary"}),l=o.SheetNames[0],c=o.Sheets[l],d=rS.sheet_to_json(c,{header:1});if(d.length===0){r(new Error("File is empty"));return}const f=d[0],p=rS.sheet_to_json(c);t({fileName:e.name,headers:f,rows:p})}catch(s){r(s)}},n.onerror=i=>r(i),n.readAsBinaryString(e)}),eye=e=>{if(!e)return"";const t=e.trim(),r=/^(\d+(?:\.\d+)?)\s*(?:["']|mm|cm|in)?\s*[xX]\s*(\d+(?:\.\d+)?)\s*(?:["']|mm|cm|in)?$/i,n=t.match(r);return n?`${n[1]}"x${n[2]}"`:t},_Nt=Object.freeze(Object.defineProperty({__proto__:null,normalizeSize:eye,readExcelFile:Zve},Symbol.toStringTag,{value:"Module"})),NNt=({onDataLoaded:e})=>{const[t,r]=I.useState(!1),[n,i]=I.useState(!1),a=async c=>{i(!0);try{const d=await Zve(c),f=[d.headers,...d.rows.map(p=>d.headers.map(m=>p[m]))];if(f.length===0){Re.error("File appears to be empty.");return}e(f,c.name)}catch(d){console.error(d),Re.error(d.message||"Failed to parse file.")}finally{i(!1)}},s=I.useCallback(c=>{c.preventDefault(),c.stopPropagation(),c.type==="dragenter"||c.type==="dragover"?r(!0):c.type==="dragleave"&&r(!1)},[]),o=I.useCallback(c=>{c.preventDefault(),c.stopPropagation(),r(!1),c.dataTransfer.files&&c.dataTransfer.files[0]&&a(c.dataTransfer.files[0])},[]),l=c=>{c.preventDefault(),c.target.files&&c.target.files[0]&&a(c.target.files[0])};return u.jsxs("div",{className:`relative border-2 border-dashed rounded-xl p-12 text-center transition-all ${t?"border-primary bg-primary-container/20 scale-[1.02]":"border-outline/20 bg-surface-container-low hover:bg-surface-container"}`,onDragEnter:s,onDragLeave:s,onDragOver:s,onDrop:o,children:[u.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:l,accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",disabled:n}),u.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 pointer-events-none",children:[u.jsx("div",{className:`p-4 rounded-full shadow-sm transition-colors ${t?"bg-primary-container text-primary":"bg-surface-container-high text-primary/70"}`,children:u.jsx(Eb,{className:`w-8 h-8 ${n?"animate-bounce":""}`})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-lg font-bold text-text-primary",children:n?"Reading file...":"Click to upload or drag and drop"}),u.jsx("p",{className:"text-sm text-text-secondary",children:"Excel (.xlsx) or CSV files"})]})]})]})},fte=[{key:"manufacturer",label:"Manufacturer",required:!1},{key:"productName",label:"Product Name (Line)",required:!0},{key:"variantName",label:"Variant Name (Color)",required:!1},{key:"sku",label:"SKU",required:!1},{key:"size",label:"Size",required:!1},{key:"cartonSize",label:"Carton Size",required:!1},{key:"unitCost",label:"Unit Cost",required:!0},{key:"retailPrice",label:"Retail Price",required:!1}],ANt=e=>typeof e!="string"?e:e.replace(/[\u0000-\u001F\u007F-\u009F]/g,"").trim(),TNt=({rawData:e,fileName:t,onBack:r,onComplete:n,isGeneratingPreview:i,onDefaultsChange:a})=>{var W;const{vendors:s}=Xr(),[o,l]=I.useState({}),[c,d]=I.useState("variant_match"),[f,p]=I.useState([]),[m,x]=I.useState(""),[y,b]=I.useState(""),[S,_]=I.useState(!1),[C,A]=I.useState(""),[j,P]=I.useState(""),O=e.reduce((Q,te)=>Math.max(Q,te.length),0),D=Array.from({length:O},(Q,te)=>te),L=e.find(Q=>Q.length>0)||[];I.useEffect(()=>{cr.get("/api/import/profiles").then(Q=>p(Q.data)).catch(Q=>console.error("Failed to load profiles",Q))},[]);const B=(Q,te)=>{l(J=>({...J,[Q]:te}))},H=Q=>{const te=Q.target.value;A(te);const J=s.find(Y=>Y.id===Number(te));J!=null&&J.defaultProductType&&P(J.defaultProductType)},z=Q=>{const te=Q.target.value;if(x(te),te){const J=f.find(Y=>Y.id===Number(te));if(J){const Y=J.mappingRules;l(Y.mapping||Y),Y.defaults&&(A(Y.defaults.manufacturerId||""),P(Y.defaults.productType||""))}}else l({}),A(""),P("")},ie=async(Q=!1)=>{var J;const te=Q?(J=f.find(Y=>Y.id===Number(m)))==null?void 0:J.profileName:y;if(!te)return Re.error("Enter a profile name first.");try{const Y=await cr.post("/api/import/profiles",{profileName:te,mappingRules:{mapping:o,defaults:{manufacturerId:C,productType:j}}});Re.success(Q?"Profile updated!":"Profile saved!"),p(pe=>[...pe.filter(ee=>ee.id!==Y.data.id),Y.data].sort((ee,de)=>ee.profileName.localeCompare(de.profileName))),Q||(x(String(Y.data.id)),_(!1))}catch(Y){console.error(Y),Re.error("Failed to save profile.")}},X=()=>{const Q=fte.filter(Y=>Y.required&&!o[Y.key]);if(Q.length>0){Re.error(`Missing required fields: ${Q.map(Y=>Y.label).join(", ")}`);return}const te={manufacturerId:C?Number(C):null,productType:j||null};a(te);const J=e.map((Y,pe)=>{const _e={originalRowIndex:pe};return Object.entries(o).forEach(([ee,de])=>{if(de!==""){const G=parseInt(de);if(G>=Y.length)return;let q=Y[G];if(typeof q=="string"&&(q=ANt(q),q===""&&(q=null)),["unitCost","retailPrice","cartonSize"].includes(ee)&&q!==null){typeof q=="string"&&(q=q.replace(/[^0-9.-]+/g,""));const ne=parseFloat(q);q=isNaN(ne)?null:ne}_e[ee]=q}}),_e}).filter(Y=>Y.productName);n(J,c)};return u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[u.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gray-50 flex flex-wrap justify-between items-center gap-4",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Map Columns"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Match your Excel columns to Joblogger fields."})]}),u.jsxs("div",{className:"flex items-center gap-2 bg-white p-2 rounded-lg border border-gray-200 shadow-sm",children:[u.jsx("span",{className:"text-sm font-medium text-gray-700 pl-2",children:"Load Profile:"}),u.jsxs("select",{className:"border-none text-sm focus:ring-0 text-indigo-600 font-bold bg-transparent",value:m,onChange:z,children:[u.jsx("option",{value:"",children:"-- None --"}),f.map(Q=>u.jsx("option",{value:Q.id,children:Q.profileName},Q.id))]})]})]}),u.jsxs("div",{className:"p-8 grid grid-cols-1 lg:grid-cols-2 gap-12",children:[u.jsxs("div",{className:"space-y-6",children:[fte.map(Q=>u.jsxs("div",{className:"flex items-center justify-between group",children:[u.jsxs("label",{className:`text-sm ${Q.required?"font-bold text-gray-900":"text-gray-500"}`,children:[Q.label," ",Q.required&&u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{className:`w-64 text-sm rounded-md shadow-sm border ${o[Q.key]?"border-indigo-300 bg-indigo-50 text-indigo-900":"border-gray-300"}`,value:o[Q.key]||"",onChange:te=>B(Q.key,te.target.value),children:[u.jsx("option",{value:"",children:"(Skip)"}),D.map(te=>u.jsxs("option",{value:String(te),children:["Col ",String.fromCharCode(65+te),L[te]?`: ${String(L[te]).substring(0,20)}`:""]},te))]})]},Q.key)),u.jsxs("div",{className:"pt-6 border-t border-gray-100 mt-6",children:[u.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Import Strategy"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("label",{className:`border p-4 rounded-lg cursor-pointer transition-all ${c==="variant_match"?"border-indigo-500 bg-indigo-50 ring-1 ring-indigo-500":"border-gray-200 hover:border-gray-300"}`,children:[u.jsx("input",{type:"radio",name:"strategy",className:"hidden",checked:c==="variant_match",onChange:()=>d("variant_match")}),u.jsx("div",{className:"font-bold text-sm text-gray-900 mb-1",children:"Variant Match"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Update specific colors/sizes. Best for detailed price lists."})]}),u.jsxs("label",{className:`border p-4 rounded-lg cursor-pointer transition-all ${c==="product_line_match"?"border-indigo-500 bg-indigo-50 ring-1 ring-indigo-500":"border-gray-200 hover:border-gray-300"}`,children:[u.jsx("input",{type:"radio",name:"strategy",className:"hidden",checked:c==="product_line_match",onChange:()=>d("product_line_match")}),u.jsx("div",{className:"font-bold text-sm text-gray-900 mb-1",children:"Line Match"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Update ALL variants of a product to this price. Best for generic price lists."})]})]})]})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-indigo-50 rounded-xl p-6 border border-indigo-100",children:[u.jsx("h3",{className:"font-bold text-indigo-900 mb-2",children:"Global Defaults"}),u.jsxs("p",{className:"text-xs text-indigo-700 mb-4",children:["If the CSV is missing this data, use these values for ",u.jsx("strong",{children:"New Products"}),"."]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-indigo-800 uppercase mb-1",children:"Manufacturer"}),u.jsxs("select",{className:"w-full text-sm rounded border-indigo-200",value:C,onChange:H,children:[u.jsx("option",{value:"",children:"-- None (Use CSV) --"}),s.sort((Q,te)=>Q.name.localeCompare(te.name)).map(Q=>u.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-indigo-800 uppercase mb-1",children:"Product Type"}),u.jsxs("select",{className:"w-full text-sm rounded border-indigo-200",value:j,onChange:Q=>P(Q.target.value),children:[u.jsx("option",{value:"",children:"-- None --"}),Ey.map(Q=>u.jsx("option",{value:Q,children:Q},Q))]})]})]})]}),u.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200 h-fit",children:[u.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Save this Mapping"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"If you receive this file format regularly, save it as a profile to auto-fill these fields next time."}),m&&!S&&u.jsxs("button",{onClick:()=>ie(!0),className:"w-full mb-3 text-sm font-bold text-indigo-700 bg-indigo-100 hover:bg-indigo-200 py-2 rounded flex items-center justify-center gap-2 transition-colors",children:[u.jsx(hC,{size:16}),' Update "',(W=f.find(Q=>Q.id===Number(m)))==null?void 0:W.profileName,'"']}),S?u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",placeholder:"Profile Name",className:"flex-1 text-sm rounded border-gray-300",value:y,onChange:Q=>b(Q.target.value)}),u.jsx("button",{onClick:()=>ie(!1),className:"bg-indigo-600 text-white px-3 rounded text-xs font-bold",children:"Save"}),u.jsx("button",{onClick:()=>_(!1),className:"text-gray-500 px-2",children:u.jsx(tn,{size:16})})]}):u.jsxs("button",{onClick:()=>_(!0),className:"text-sm font-medium text-indigo-600 hover:text-indigo-800 flex items-center gap-2",children:[u.jsx(Cs,{size:16})," Save as New Profile"]}),u.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[u.jsx("h4",{className:"font-bold text-xs text-gray-400 uppercase tracking-wide mb-2",children:"Sample Data (First Data Row)"}),u.jsx("div",{className:"space-y-2 text-xs font-mono text-gray-600",children:D.slice(0,8).map(Q=>u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("span",{className:"font-bold text-gray-400 w-8",children:["Col ",String.fromCharCode(65+Q)]}),u.jsx("span",{className:"truncate",children:L[Q]||u.jsx("i",{className:"text-gray-300",children:"(empty)"})})]},Q))})]})]})]})]}),u.jsxs("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex justify-between",children:[u.jsxs("button",{onClick:r,className:"text-gray-600 hover:text-gray-900 font-medium flex items-center gap-2",children:[u.jsx(hd,{size:16})," Back"]}),u.jsx("button",{onClick:X,disabled:i,className:"bg-indigo-600 text-white px-6 py-2 rounded-lg shadow-sm hover:bg-indigo-700 font-bold flex items-center gap-2 disabled:bg-indigo-400 disabled:cursor-not-allowed",children:i?u.jsx(u.Fragment,{children:"Processing..."}):u.jsxs(u.Fragment,{children:["Preview Updates ",u.jsx(am,{size:16})]})})]})]})},Yw=e=>!e&&e!==0?"-":`$${Number(e).toFixed(2)}`,INt=({results:e,onExecute:t,isExecuting:r,onBack:n})=>{const[i,a]=I.useState([]);I.useEffect(()=>{const x=e.map(y=>({...y,isSkipped:y.status==="error",hasSample:!1}));x.sort((y,b)=>{const S=_=>_==="error"?0:_==="new"?1:_==="update"?2:3;return S(y.status)-S(b.status)}),a(x)},[e]);const s=x=>{a(y=>{const b=[...y];return b[x].isSkipped=!b[x].isSkipped,b})},o=x=>{a(y=>{const b=[...y];return b[x].hasSample=!b[x].hasSample,b})},l=(x,y)=>{a(b=>{const S=[...b];return S[x].productName=y,S})},c=x=>{a(y=>{let b=[...y];if(x==="all")b=b.map(S=>({...S,hasSample:!0}));else if(x==="none")b=b.map(S=>({...S,hasSample:!1}));else if(x==="line_board"){const S=new Set(b.map(j=>j.productName)),_=new Set(b.filter(j=>j.isMaster).map(j=>j.productName));b=[...[...S].filter(j=>!_.has(j)).map(j=>({productName:j,variantName:"Master Sample",sku:"",unitCost:0,retailPrice:0,status:"new",isSkipped:!1,hasSample:!0,isMaster:!0,message:"Generated Line Board",details:{matchType:"generated"}})),...b]}return b})},d=i.filter(x=>!x.isSkipped),f={updates:d.filter(x=>x.status==="update").length,matches:d.filter(x=>x.status==="match").length,new:d.filter(x=>x.status==="new").length,samples:d.filter(x=>x.hasSample).length,errors:i.filter(x=>x.status==="error").length},p=I.useRef(null),m=pue({count:i.length,getScrollElement:()=>p.current,estimateSize:()=>60,overscan:10});return u.jsxs("div",{className:"bg-surface-container-high rounded-xl shadow-sm border border-outline/20 overflow-hidden flex flex-col h-[600px]",children:[u.jsxs("div",{className:"p-6 border-b border-outline/10 bg-surface-container-low flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Review Changes"}),u.jsx("p",{className:"text-sm text-text-secondary",children:"Review prices and select which items to add to inventory."})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-success-container text-success rounded-full text-xs font-bold uppercase",children:[u.jsx(Hh,{size:14})," ",f.updates," Updates"]}),u.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-surface-container-highest text-text-secondary rounded-full text-xs font-bold uppercase border border-outline/20",children:[u.jsx(Hh,{size:14})," ",f.matches," Matched (No Change)"]}),u.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-primary-container text-primary rounded-full text-xs font-bold uppercase",children:[u.jsx(hu,{size:14})," ",f.new," New"]}),u.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-tertiary-container text-tertiary rounded-full text-xs font-bold uppercase",children:[u.jsx(joe,{size:14})," ",f.samples," Samples"]})]})]}),u.jsx("div",{ref:p,className:"flex-1 overflow-auto bg-surface-container relative",children:u.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[u.jsx("thead",{className:"bg-surface-container-low text-text-secondary uppercase text-xs sticky top-0 z-10 border-b border-outline/10 shadow-sm",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-3 font-bold w-24",children:"Action"}),u.jsx("th",{className:"p-3 font-bold",children:"Product Match (Editable)"}),u.jsx("th",{className:"p-3 font-bold",children:"SKU / Details"}),u.jsx("th",{className:"p-3 font-bold",children:"Spec Changes"}),u.jsx("th",{className:"p-3 font-bold w-48 bg-surface-container-highest/50",children:u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("span",{children:"Physical Sample"}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:()=>c("all"),className:"px-1.5 py-0.5 text-[10px] bg-outline/10 hover:bg-outline/20 rounded text-text-primary",children:"All"}),u.jsx("button",{onClick:()=>c("none"),className:"px-1.5 py-0.5 text-[10px] bg-outline/10 hover:bg-outline/20 rounded text-text-primary",children:"None"}),u.jsxs("button",{onClick:()=>c("line_board"),className:"px-1.5 py-0.5 text-[10px] bg-tertiary-container text-tertiary hover:brightness-110 rounded flex items-center gap-1",children:[u.jsx(hu,{size:10})," Line Bd"]})]})]})}),u.jsx("th",{className:"p-3 font-bold text-right",children:"Old Cost"}),u.jsx("th",{className:"p-3 font-bold text-right",children:"New Cost"}),u.jsx("th",{className:"p-3 font-bold text-right",children:"Diff"})]})}),u.jsxs("tbody",{className:"divide-y divide-outline/10",children:[m.getVirtualItems().length>0&&u.jsx("tr",{children:u.jsx("td",{style:{height:`${m.getVirtualItems()[0].start}px`},colSpan:8})}),m.getVirtualItems().map(x=>{var S,_,C;const y=i[x.index],b=x.index;return u.jsx(Vr.Fragment,{children:u.jsxs("tr",{"data-index":x.index,ref:m.measureElement,className:`hover:bg-surface-container-highest transition-colors ${y.isSkipped?"opacity-50 grayscale":""} ${y.isMaster?"bg-tertiary-container/10":""}`,children:[u.jsx("td",{className:"p-3",children:u.jsx("button",{onClick:()=>s(b),className:`text-xs font-bold px-2 py-1 rounded-lg border transition-all w-full text-center
                                                ${y.isSkipped?"bg-surface-container-highest text-text-secondary border-outline/20":y.status==="update"?"bg-success-container text-success border-success/30":y.status==="new"?"bg-primary-container text-primary border-primary/30":y.status==="match"?"bg-surface-container text-text-tertiary border-outline/20 opacity-70":"bg-error-container text-error border-error/30 cursor-default"}`,disabled:y.status==="error",children:y.isSkipped?"SKIP":y.status==="match"?"MATCH":y.status.toUpperCase()})}),u.jsxs("td",{className:"p-3",children:[u.jsx("input",{type:"text",className:"font-medium text-text-primary bg-transparent border-b border-transparent hover:border-outline focus:border-primary focus:outline-none w-full transition-colors",value:y.productName,onChange:A=>l(b,A.target.value),disabled:y.isSkipped}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[y.isMaster&&u.jsx("span",{className:"text-[10px] font-bold bg-tertiary text-on-tertiary px-1.5 py-0.5 rounded",children:"MASTER"}),y.variantName&&u.jsx("div",{className:"text-xs text-text-secondary",children:y.variantName})]}),y.status==="error"&&u.jsx("div",{className:"text-xs text-error font-bold mt-1",children:y.message})]}),u.jsx("td",{className:"p-3 text-text-secondary font-mono text-xs",children:y.sku||"-"}),u.jsx("td",{className:"p-3 text-xs",children:((S=y.affectedVariants)==null?void 0:S.length)>0&&((_=y.affectedVariants[0].changes)==null?void 0:_.length)>0?u.jsx("ul",{className:"list-disc pl-4 space-y-0.5",children:y.affectedVariants[0].changes.filter(A=>A!=="Cost").map((A,j)=>u.jsx("li",{className:"text-tertiary font-medium",children:A},j))}):u.jsx("span",{className:"text-text-secondary opacity-30",children:"-"})}),u.jsx("td",{className:"p-3 bg-surface-container-highest/20 text-center",children:u.jsx("button",{onClick:()=>o(b),disabled:y.isSkipped,className:`p-1 rounded transition-colors ${y.hasSample?"text-primary":"text-outline/40 hover:text-outline"}`,children:y.hasSample?u.jsx(n9,{size:20}):u.jsx(Boe,{size:20})})}),y.affectedVariants&&y.affectedVariants.length===1?u.jsxs(u.Fragment,{children:[u.jsx("td",{className:"p-3 text-right text-text-secondary",children:Yw(y.affectedVariants[0].oldCost)}),u.jsx("td",{className:"p-3 text-right font-bold text-text-primary",children:Yw(y.unitCost)}),u.jsx("td",{className:"p-3 text-right",children:(()=>{const A=Number(y.unitCost)-Number(y.affectedVariants[0].oldCost);return A>0?u.jsxs("span",{className:"text-error text-xs",children:["+",Yw(A)]}):A<0?u.jsx("span",{className:"text-success text-xs",children:Yw(A)}):u.jsx("span",{className:"text-text-secondary",children:"-"})})()})]}):y.status==="new"?u.jsxs(u.Fragment,{children:[u.jsx("td",{className:"p-3 text-right text-text-secondary",children:"-"}),u.jsx("td",{className:"p-3 text-right font-bold text-primary",children:Yw(y.unitCost)}),u.jsx("td",{className:"p-3 text-right text-primary text-xs",children:"NEW"})]}):u.jsx("td",{colSpan:3,className:"p-3 text-center text-xs text-text-secondary italic",children:((C=y.affectedVariants)==null?void 0:C.length)>1?`Updating ${y.affectedVariants.length} variants`:"-"})]})},x.key)}),m.getVirtualItems().length>0&&u.jsx("tr",{children:u.jsx("td",{style:{height:`${m.getTotalSize()-m.getVirtualItems()[m.getVirtualItems().length-1].end}px`},colSpan:8})})]})]})}),u.jsxs("div",{className:"p-6 border-t border-outline/10 bg-surface-container-low flex justify-between items-center",children:[u.jsx("button",{onClick:n,className:"text-text-secondary hover:text-text-primary font-bold text-sm",disabled:r,children:"Back to Mapping"}),u.jsx("button",{onClick:()=>t(d),disabled:r||f.updates===0&&f.new===0,className:`flex items-center gap-2 px-6 py-3 rounded-full shadow-md font-bold text-on-primary transition-all ${r?"bg-surface-container-highest text-text-secondary cursor-not-allowed":"bg-primary hover:bg-primary-hover active:scale-95"}`,children:r?"Importing...":u.jsxs(u.Fragment,{children:["Import ",u.jsx("span",{className:"bg-white/20 px-1.5 rounded text-sm",children:f.updates+f.new})," Items"]})})]})]})},ONt=({onFileSelect:e})=>{const t=I.useRef(null),r=s=>{s.preventDefault(),s.stopPropagation()},n=s=>{s.preventDefault(),s.stopPropagation(),s.dataTransfer.files&&s.dataTransfer.files[0]&&a(s.dataTransfer.files[0])},i=s=>{s.target.files&&s.target.files[0]&&a(s.target.files[0])},a=s=>{["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(s.type)||s.name.endsWith(".xlsx")||s.name.endsWith(".xls")?e(s):Re.error("Please upload a valid Excel file (.xlsx, .xls)")};return u.jsxs("div",{className:"flex flex-col items-center justify-center w-full max-w-2xl mx-auto mt-8",children:[u.jsxs("div",{className:"w-full p-10 bg-surface-container-high border-2 border-dashed border-outline/20 rounded-2xl hover:border-primary hover:bg-surface-container-highest transition-all cursor-pointer shadow-sm group",onDragOver:r,onDrop:n,onClick:()=>{var s;return(s=t.current)==null?void 0:s.click()},children:[u.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[u.jsx("div",{className:"p-4 bg-primary-container rounded-full group-hover:brightness-110 transition-colors",children:u.jsx(Eb,{className:"w-8 h-8 text-primary"})}),u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-xl font-bold text-text-primary",children:"Drop your messy Excel file here"}),u.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"or click to browse (.xlsx, .xls)"})]})]}),u.jsx("input",{ref:t,type:"file",className:"hidden",accept:".xlsx,.xls",onChange:i})]}),u.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4 w-full text-center",children:[u.jsxs("div",{className:"bg-surface-container-high p-4 rounded-xl border border-outline/10",children:[u.jsx("div",{className:"font-bold text-text-primary mb-1",children:"1. Upload"}),u.jsx("p",{className:"text-xs text-text-secondary",children:"Import the raw vendor file"})]}),u.jsxs("div",{className:"bg-surface-container-high p-4 rounded-xl border border-outline/10",children:[u.jsx("div",{className:"font-bold text-text-primary mb-1",children:"2. Scan"}),u.jsx("p",{className:"text-xs text-text-secondary",children:"Auto-detect sizes from descriptions"})]}),u.jsxs("div",{className:"bg-surface-container-high p-4 rounded-xl border border-outline/10",children:[u.jsx("div",{className:"font-bold text-text-primary mb-1",children:"3. Clean"}),u.jsx("p",{className:"text-xs text-text-secondary",children:"Review, standardize, and import"})]})]})]})},PNt=({data:e,onConfirm:t,onBack:r,isBrainLoading:n})=>{const[i,a]=Vr.useState(null),s=e.rows.slice(0,5);return u.jsxs("div",{className:"w-full max-w-5xl mx-auto bg-surface-container-high rounded-xl shadow-sm border border-outline/20 overflow-hidden flex flex-col h-[600px]",children:[u.jsxs("div",{className:"p-6 border-b border-outline/10 bg-surface-container-low flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Select Description Column"}),u.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Which column contains the product name and size info?"})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-bold text-text-secondary hover:text-text-primary transition-colors",children:"Back"}),u.jsx("button",{disabled:!i||n,onClick:()=>i&&t(i),className:`flex items-center gap-2 px-6 py-2 rounded-full text-sm font-bold transition-all ${i&&!n?"bg-primary text-on-primary hover:bg-primary-hover shadow-sm":"bg-surface-container-highest text-text-secondary cursor-not-allowed"}`,children:n?u.jsxs(u.Fragment,{children:[u.jsx($0,{className:"w-4 h-4 animate-spin"})," Loading Memory..."]}):u.jsxs(u.Fragment,{children:["Next: Clean Sizes ",u.jsx(am,{className:"w-4 h-4"})]})})]})]}),u.jsx("div",{className:"overflow-auto flex-1 p-6",children:u.jsxs("table",{className:"min-w-full text-sm text-left border-collapse",children:[u.jsx("thead",{className:"text-xs uppercase bg-surface-container sticky top-0 z-10",children:u.jsx("tr",{children:e.headers.map(o=>u.jsx("th",{scope:"col",className:`px-6 py-4 cursor-pointer hover:bg-surface-container-highest border-b-2 transition-colors ${i===o?"bg-primary-container border-primary text-primary":"border-outline/10 text-text-secondary"}`,onClick:()=>a(o),children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"radio",checked:i===o,onChange:()=>a(o),className:"w-4 h-4 text-primary bg-surface-container border-outline focus:ring-primary accent-primary"}),u.jsx("span",{className:"font-bold tracking-wide",children:o})]})},o))})}),u.jsx("tbody",{className:"divide-y divide-outline/10",children:s.map((o,l)=>u.jsx("tr",{className:"bg-surface-container-high hover:bg-surface-container-highest transition-colors",children:e.headers.map(c=>{var d;return u.jsx("td",{className:`px-6 py-4 text-text-secondary ${i===c?"bg-primary-container/20 text-text-primary font-medium":""}`,children:u.jsx("div",{className:"truncate max-w-[200px]",children:((d=o[c])==null?void 0:d.toString())||""})},`${l}-${c}`)})},l))})]})})]})},hte=({rows:e,knownSizes:t,setRows:r,setKnownSizes:n,onExport:i,onReset:a,mode:s,knownProductAliases:o})=>{const[l,c]=I.useState("ALL"),[d,f]=I.useState(null),[p,m]=I.useState(null),[x,y]=I.useState(""),[b,S]=I.useState(""),[_,C]=I.useState([]),A=I.useRef(null),j=X=>s==="SIZES"?{targetText:X.sizeTargetText||"",status:X.sizeStatus||"UNKNOWN",value:X.extractedSize||""}:s==="NAMES"?{targetText:X.nameTargetText||"",status:X.nameStatus||"UNKNOWN",value:X.extractedName||""}:s==="PRICES"?{targetText:X.priceTargetText||"",status:X.priceStatus||"UNKNOWN",value:X.extractedPrice||""}:{targetText:"",status:"UNKNOWN",value:""};I.useEffect(()=>{if(s!=="NAMES"){C([]);return}const X=setTimeout(()=>{if(!b){C([]);return}ABe(b).then(W=>{C(W)})},300);return()=>clearTimeout(X)},[b,s]);const P=I.useMemo(()=>({total:e.length,matched:e.filter(X=>j(X).status==="MATCHED").length,unknown:e.filter(X=>j(X).status==="UNKNOWN"||j(X).status==="NEW").length}),[e,s]),O=I.useMemo(()=>{let X=e.filter(W=>{const{status:Q}=j(W);return l==="ALL"?!0:l==="MATCHED"?Q==="MATCHED":l==="UNKNOWN"?Q==="UNKNOWN"||Q==="NEW":!0});if(s==="NAMES"){const W=new Map;return X.forEach(Q=>{const te=j(Q).targetText;te&&!W.has(te)?W.set(te,{...Q,count:1}):te&&W.get(te).count++}),Array.from(W.values())}return X},[e,l,s]);I.useEffect(()=>{const X=W=>{if(W.target.closest(".selection-tooltip"))return;const Q=window.getSelection();(!Q||Q.isCollapsed)&&f(null)};return document.addEventListener("mousedown",X),()=>document.removeEventListener("mousedown",X)},[]);const D=(X,W)=>{const Q=window.getSelection();if(!Q||Q.isCollapsed)return;const te=Q.toString().trim();if(te.length>0){const J=Q.getRangeAt(0).getBoundingClientRect();f({id:W,text:te,x:J.left+J.width/2,y:J.top-10})}},L=()=>{var X;d&&(r(W=>W.map(Q=>{if(Q.id!==d.id)return Q;const te=t.some(J=>J.label.toLowerCase()===d.text.toLowerCase());return{...Q,extractedSize:d.text,sizeSelectionSource:d.text,sizeStatus:te?"MATCHED":"NEW",manualOverride:!0}})),f(null),(X=window.getSelection())==null||X.removeAllRanges())},B=(X,W,Q)=>{r(s==="NAMES"?te=>te.map(J=>j(J).targetText===Q?{...J,extractedName:W,nameStatus:W?"NEW":"UNKNOWN",manualOverride:!0}:J):te=>te.map(J=>{if(J.id!==X)return J;const Y=W.toLowerCase().trim(),pe=t.some(_e=>_e.label.toLowerCase()===Y);return{...J,extractedSize:W,sizeStatus:pe?"MATCHED":"NEW",manualOverride:!0}}))},H=X=>{const{value:W,targetText:Q}=j(X);if(!W)return;const te=W.trim();if(s==="NAMES"){const ne=Q;NBe(ne,te).then(()=>Re.success(`Learned: "${ne}" -> "${te}"`)).catch(()=>Re.error("Failed to save naming rule")),r(Se=>Se.map(re=>j(re).targetText===ne?{...re,extractedName:te,nameStatus:"MATCHED"}:re));return}const J=t.findIndex(ne=>ne.label.toLowerCase()===te.toLowerCase());let Y=[...t];const pe=[];if(X.sizeSelectionSource&&X.sizeSelectionSource.toLowerCase()!==te.toLowerCase()&&pe.push(X.sizeSelectionSource),J>=0){const ne=Y[J],Se=pe.filter(re=>{var ae;return!((ae=ne.matchers)!=null&&ae.some(ge=>ge.toLowerCase()===re.toLowerCase()))&&re.toLowerCase()!==ne.label.toLowerCase()});Se.length>0&&(Y[J]={...ne,matchers:[...ne.matchers||[],...Se]})}else Y.push({id:Date.now().toString(),label:te,matchers:pe});n(Y);const _e=X.sizeSelectionSource||Q;_e&&_e.toLowerCase()!==te.toLowerCase()&&kBe(_e,te).then(()=>Re.success(`Learned: "${_e}" = "${te}"`)).catch(()=>Re.error("Failed to save rule.")),Xle(te).catch(()=>{});const ee=[te,...pe],G=te.replace(/["']/g,"").split("x");let q=null;G.length===2&&!isNaN(parseFloat(G[0]))&&(q=new RegExp(`\\b${G[0].trim()}\\s*x\\s*${G[1].trim()}\\b`,"i")),r(ne=>ne.map(Se=>{const{status:re,value:ae,targetText:ge}=j(Se);if(ae===te)return{...Se,sizeStatus:"MATCHED"};if(re==="NEW"&&(ae==null?void 0:ae.toLowerCase())===te.toLowerCase())return{...Se,extractedSize:te,sizeStatus:"MATCHED"};if(re==="UNKNOWN"||!ae){const Ee=(ge||"").toLowerCase();if(ee.some(V=>Ee.includes(V.toLowerCase())))return{...Se,extractedSize:te,sizeStatus:"MATCHED"};if(q&&q.test(ge||""))return{...Se,extractedSize:te,sizeStatus:"MATCHED"}}return Se}))},z=X=>{m(X.id),y(X.label)},ie=(X,W)=>{if(p!==X)return;const Q=x.trim();if(!Q){m(null);return}if(Q===W){m(null);return}n(te=>te.map(J=>J.id===X?{...J,label:Q}:J)),r(te=>te.map(J=>J.extractedSize===W?{...J,extractedSize:Q}:J)),m(null)};return u.jsxs("div",{className:"flex flex-col h-screen max-h-[85vh] bg-surface-container-high rounded-xl shadow-sm border border-outline/20 overflow-hidden relative",children:[d&&u.jsxs("div",{className:"fixed z-50 transform -translate-x-1/2 -translate-y-full mb-2 selection-tooltip",style:{left:d.x,top:d.y},children:[u.jsxs("button",{onClick:L,className:"bg-text-primary text-background text-xs font-bold py-1.5 px-3 rounded-lg shadow-lg flex items-center gap-1 hover:brightness-110 transition-colors",children:[u.jsx(NFe,{className:"w-3 h-3"}),"Set as Size"]}),u.jsx("div",{className:"w-2 h-2 bg-text-primary transform rotate-45 absolute bottom-[-4px] left-1/2 -translate-x-1/2"})]}),u.jsx("div",{className:"p-4 border-b border-outline/10 bg-surface-container-low flex flex-wrap gap-4 justify-between items-center",children:u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>c("ALL"),className:`px-3 py-1.5 text-sm font-bold rounded-full transition-colors border ${l==="ALL"?"bg-primary-container text-primary border-primary":"text-text-secondary border-transparent hover:bg-surface-container-highest"}`,children:["All (",P.total,")"]}),u.jsxs("button",{onClick:()=>c("MATCHED"),className:`px-3 py-1.5 text-sm font-bold rounded-full transition-colors border ${l==="MATCHED"?"bg-success-container text-success border-success":"text-text-secondary border-transparent hover:bg-surface-container-highest"}`,children:["Matched (",P.matched,")"]}),u.jsxs("button",{onClick:()=>c("UNKNOWN"),className:`px-3 py-1.5 text-sm font-bold rounded-full transition-colors border ${l==="UNKNOWN"?"bg-warning-container text-warning border-warning":"text-text-secondary border-transparent hover:bg-surface-container-highest"}`,children:["Review Needed (",P.unknown,")"]})]})}),u.jsxs("div",{className:"flex flex-1 overflow-hidden relative",ref:A,children:[u.jsx("div",{className:"flex-1 overflow-auto bg-surface-container",children:u.jsxs("table",{className:"min-w-full divide-y divide-outline/10",children:[u.jsx("thead",{className:"bg-surface-container sticky top-0 z-10 shadow-sm",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-text-secondary uppercase tracking-wider",children:"Original Description"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-text-secondary uppercase tracking-wider w-48",children:s==="SIZES"?"Extracted Size":s==="NAMES"?"Mapped Name":"Clean Price"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-text-secondary uppercase tracking-wider w-32",children:"Status"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-text-secondary uppercase tracking-wider w-32",children:"Actions"})]})}),u.jsxs("tbody",{className:"bg-surface-container-high divide-y divide-outline/10",children:[O.map(X=>{const{targetText:W,status:Q,value:te}=j(X);return u.jsxs("tr",{className:`group/row transition-colors ${Q==="UNKNOWN"?"bg-warning-container/5":"hover:bg-surface-container-highest/30"}`,children:[u.jsxs("td",{className:"px-6 py-4 text-sm text-text-primary break-words max-w-md cursor-text relative",onMouseUp:J=>D(J,X.id),children:[u.jsx("span",{className:"font-medium opacity-90",children:W}),X.count>1&&u.jsxs("span",{className:"ml-3 inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-bold bg-surface-container-highest text-text-secondary border border-outline/10 shadow-sm",children:["x",X.count]})]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("input",{type:"text",value:te,onChange:J=>B(X.id,J.target.value,W),onDragOver:J=>{J.preventDefault(),J.dataTransfer.dropEffect="copy"},onDrop:J=>{J.preventDefault();const Y=J.dataTransfer.getData("application/size")||J.dataTransfer.getData("application/product-name");Y&&B(X.id,Y,W)},className:`w-full px-4 py-2 text-sm border rounded-full focus:ring-2 focus:ring-offset-0 outline-none transition-all shadow-sm ${Q==="MATCHED"?"border-success/30 bg-success-container/30 text-text-primary focus:ring-success/50":Q==="NEW"?"border-primary/30 bg-primary-container/30 text-text-primary focus:ring-primary/50":"border-transparent bg-surface-container-highest text-text-primary focus:bg-surface-container focus:border-primary/30 focus:ring-primary/50"}`,placeholder:s==="NAMES"?"Drag or type name...":"?"})}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[Q==="MATCHED"&&u.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-success-container text-success",children:[u.jsx(pd,{className:"w-3 h-3 mr-1"})," Match"]}),Q==="NEW"&&u.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-primary-container text-primary",children:[u.jsx(dC,{className:"w-3 h-3 mr-1"})," New Entry"]}),Q==="UNKNOWN"&&u.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-warning-container text-warning",children:[u.jsx(tn,{className:"w-3 h-3 mr-1"})," Missing"]})]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-text-secondary",children:(Q==="NEW"||Q==="MATCHED"&&X.manualOverride)&&u.jsx("button",{onClick:()=>H(X),className:"text-primary hover:text-primary-hover flex items-center text-xs font-bold uppercase tracking-wide",title:X.manualOverride?`Update rule for "${te}"`:`Add "${te}" to memory`,children:X.manualOverride?u.jsxs(u.Fragment,{children:[u.jsx(hC,{className:"w-3 h-3 mr-1"})," Change Rule"]}):u.jsxs(u.Fragment,{children:[u.jsx(ac,{className:"w-3 h-3 mr-1"})," Learn Rule"]})})})]},`${X.id}-${s}`)}),O.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"px-6 py-12 text-center text-text-secondary",children:"No rows found for this filter."})})]})]})}),s==="SIZES"&&u.jsxs("div",{className:"w-64 bg-surface-container-high border-l border-outline/10 flex flex-col shadow-xl z-20",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 bg-surface-container-low",children:[u.jsxs("h3",{className:"font-bold text-text-primary flex items-center gap-2",children:[u.jsx(Cs,{className:"w-4 h-4"})," Known Sizes"]}),u.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Drag size to row to apply."})]}),u.jsx("div",{className:"overflow-y-auto flex-1 p-2 space-y-1",children:t.map(X=>u.jsx("div",{draggable:!p,onDragStart:W=>{W.dataTransfer.setData("application/size",X.label),W.dataTransfer.effectAllowed="copy"},className:`group flex items-center justify-between px-3 py-2 text-sm text-text-primary bg-surface-container-highest rounded-lg hover:bg-surface-container transition-colors ${p?"":"cursor-grab active:cursor-grabbing"}`,children:p===X.id?u.jsx("input",{autoFocus:!0,value:x,onChange:W=>y(W.target.value),onBlur:()=>ie(X.id,X.label),onKeyDown:W=>{W.key==="Enter"&&ie(X.id,X.label),W.key==="Escape"&&m(null)},className:"w-full bg-surface-container border border-primary rounded px-1 py-0.5 outline-none text-sm text-text-primary"}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center flex-1 gap-2 overflow-hidden",children:[u.jsx(pG,{className:"w-3 h-3 text-text-secondary flex-shrink-0"}),u.jsx("span",{className:"font-mono cursor-pointer hover:text-primary truncate",onClick:()=>z(X),title:"Click to edit",children:X.label})]}),u.jsx("button",{onClick:W=>{W.stopPropagation(),n(Q=>Q.filter(te=>te.id!==X.id))},className:"opacity-0 group-hover:opacity-100 text-text-secondary hover:text-error ml-2",children:u.jsx(tn,{className:"w-3 h-3"})})]})},X.id))}),u.jsx("div",{className:"p-4 border-t border-outline/10 bg-surface-container-low",children:u.jsxs("form",{onSubmit:X=>{X.preventDefault();const Q=X.target.elements.namedItem("newSize");Q.value&&(H({id:Date.now().toString(),extractedSize:Q.value,sizeTargetText:Q.value,sizeStatus:"NEW"}),Q.value="")},className:"flex gap-2",children:[u.jsx("input",{name:"newSize",className:"flex-1 px-3 py-1.5 text-sm bg-surface-container border border-outline/20 rounded-md text-text-primary focus:border-primary focus:ring-1 focus:ring-primary outline-none",placeholder:"Add size..."}),u.jsx("button",{type:"submit",className:"p-1.5 bg-primary text-on-primary rounded-md hover:bg-primary-hover",children:u.jsx(ac,{className:"w-4 h-4"})})]})})]}),s==="NAMES"&&u.jsxs("div",{className:"w-72 bg-surface-container-high border-l border-outline/10 flex flex-col shadow-xl z-20",children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 bg-surface-container-low space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("h3",{className:"font-bold text-text-primary flex items-center gap-2",children:[u.jsx(nFe,{className:"w-4 h-4"})," Existing Products"]}),u.jsx("span",{className:"text-[10px] bg-surface-container-highest px-2 py-0.5 rounded-full text-text-secondary font-mono",children:_.length})]}),u.jsxs("div",{className:"relative group",children:[u.jsx(Yo,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-text-secondary group-focus-within:text-primary transition-colors"}),u.jsx("input",{value:b,onChange:X=>S(X.target.value),placeholder:"Search products...",className:"w-full pl-9 pr-3 py-2 text-sm bg-surface-container border border-transparent focus:border-primary/20 rounded-lg text-text-primary focus:bg-surface-container-high focus:ring-2 focus:ring-primary/20 outline-none transition-all"})]})]}),u.jsxs("div",{className:"overflow-y-auto flex-1 p-2 space-y-1",children:[_.map((X,W)=>u.jsx("div",{draggable:!0,onDragStart:Q=>{Q.dataTransfer.setData("application/product-name",X),Q.dataTransfer.effectAllowed="copy"},className:"group flex items-center justify-between px-3 py-2 text-sm text-text-primary bg-surface-container-highest rounded-lg hover:bg-surface-container transition-colors cursor-grab active:cursor-grabbing border border-transparent hover:border-outline/10",children:u.jsxs("div",{className:"flex items-center flex-1 gap-2 overflow-hidden",children:[u.jsx(pG,{className:"w-3 h-3 text-text-secondary flex-shrink-0 opacity-50 group-hover:opacity-100 transition-opacity"}),u.jsx("span",{className:"font-medium truncate",children:X})]})},W)),_.length===0&&u.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center text-text-secondary px-6",children:[u.jsx(Yo,{className:"w-8 h-8 mb-2 opacity-20"}),u.jsxs("p",{className:"text-xs",children:['No products found matching "',b,'"']})]})]})]})]})]})},RNt=({onClose:e,onComplete:t,initialData:r,fileName:n})=>{const[i,a]=I.useState("upload"),[s,o]=I.useState(null),[l,c]=I.useState({description:null}),[d,f]=I.useState([]),[p,m]=I.useState({}),[x,y]=I.useState([]),[b,S]=I.useState([]),[_,C]=I.useState([]),[A,j]=I.useState(!0),[P,O]=I.useState(!1);I.useEffect(()=>{if(r&&r.length>0&&i==="upload"){const X=r[0],Q=r.slice(1).map(te=>{const J={};return X.forEach((Y,pe)=>{J[Y]=te[pe]}),J});o({name:n||"Uploaded File",headers:X,rows:Q}),f(Q.map((te,J)=>({id:J.toString(),originalData:te,sizeStatus:"UNKNOWN",nameStatus:"UNKNOWN"}))),a("selectColumn")}},[r,n]),I.useEffect(()=>{const X=d.some(W=>W.manualOverride);O(X)},[d]),I.useEffect(()=>{(async()=>{j(!0);try{const W=await w9(),Q=await CBe(),te=await _Be(),J=await(void 0)();S(te||[]);const Y=te.map(pe=>({searchText:pe.aliasText.toLowerCase(),resultText:pe.mappedProductName}));if(J.forEach(pe=>{Y.push({searchText:pe.toLowerCase(),resultText:pe})}),Y.sort((pe,_e)=>_e.searchText.length-pe.searchText.length),C(Y),Array.isArray(W)){const pe=W.map(_e=>{const ee=Q.filter(de=>de.mappedSize===_e.value).map(de=>de.aliasText);return{id:_e.value,label:_e.value,matchers:ee}});y(pe)}}catch(W){console.error("Failed to load cleaner brain:",W)}finally{j(!1)}})()},[]);const D=X=>{},L=X=>{s&&(c({description:X}),f(W=>W.map((Q,te)=>{var ee;const Y=((ee=Q.originalData[X])==null?void 0:ee.toString())||"";let pe=Q.extractedSize||eye(Y),_e=Q.sizeStatus||"UNKNOWN";if(_e==="UNKNOWN")if(x.some(G=>G.label.toLowerCase()===pe.toLowerCase()))_e="MATCHED";else{const G=x.find(q=>{var ne;return(ne=q.matchers)==null?void 0:ne.some(Se=>Y.toLowerCase().includes(Se.toLowerCase()))});G&&(pe=G.label,_e="MATCHED")}return{...Q,sizeTargetText:Y,extractedSize:pe,sizeStatus:_e,nameTargetText:Y}})),a("cleanSizes"))},B=()=>{const X=l.description;X&&(f(W=>W.map(Q=>{var pe;const te=((pe=Q.originalData[X])==null?void 0:pe.toString())||"";let J=Q.extractedName||te.trim(),Y=Q.nameStatus||"UNKNOWN";if(Y==="UNKNOWN"){const _e=te.trim().toLowerCase(),ee=_.find(de=>_e.includes(de.searchText));ee&&(J=ee.resultText,Y="MATCHED")}return{...Q,extractedName:J,nameStatus:Y}})),a("cleanNames"))},H=()=>{if(!s){e();return}const X=s.rows.map((W,Q)=>{const te=p[Q.toString()]||{},J={...W};return Object.keys(te).forEach(Y=>{J[Y]=te[Y]}),J});t(X),e()},z=()=>{confirm("Start over with a new file?")&&(a("upload"),o(null),c({description:null}),m({}),f([]))},ie=()=>{const X=()=>{switch(i){case"upload":return"Step 1: Upload your messy vendor file.";case"selectColumn":return"Step 2: Identify the description column.";case"cleanSizes":return"Step 3: Clean & verify product sizes.";case"cleanNames":return"Step 4: Clean & verify product names.";default:return""}};return u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-outline/10 bg-surface-container-high",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Spreadsheet Cleaner"}),u.jsx("p",{className:"text-text-secondary text-sm",children:X()})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[i==="cleanSizes"&&u.jsxs("button",{onClick:B,className:"flex items-center gap-2 px-5 py-2.5 rounded-full font-bold bg-primary text-on-primary hover:bg-primary-hover shadow-md transition-all",children:["Next: Clean Names ",u.jsx(am,{size:18})]}),i==="cleanNames"&&u.jsxs("button",{onClick:H,className:"flex items-center gap-2 px-5 py-2.5 rounded-full font-bold bg-primary text-on-primary hover:bg-primary-hover shadow-md transition-all",children:["Finish Cleaning ",u.jsx(pd,{size:18})]}),u.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-surface-container-highest text-text-secondary transition-colors",children:u.jsx(tn,{size:24})})]})]})};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 md:p-8",children:u.jsxs("div",{className:"w-full max-w-6xl h-full max-h-[90vh] bg-surface-container rounded-2xl shadow-2xl overflow-hidden flex flex-col animate-in fade-in zoom-in-95 duration-200",children:[ie(),u.jsxs("div",{className:"flex-1 overflow-auto bg-surface-container p-6",children:[i==="upload"&&u.jsx("div",{className:"h-full flex flex-col items-center justify-center",children:u.jsx(ONt,{onFileSelect:X=>{uC(async()=>{const{readExcelFile:W}=await Promise.resolve().then(()=>_Nt);return{readExcelFile:W}},void 0).then(({readExcelFile:W})=>{W(X).then(D).catch(Q=>alert(Q.message))})}})}),i==="selectColumn"&&s&&u.jsx(PNt,{data:s,onConfirm:L,onBack:()=>a("upload"),isBrainLoading:A}),i==="cleanSizes"&&u.jsx(hte,{rows:d,knownSizes:x,setRows:X=>{f(W=>{const Q=typeof X=="function"?X(W):X,te=l.description;return te&&m(J=>{let Y={...J};return Q.forEach(pe=>{const _e=pe.id;Y[_e]||(Y[_e]={}),pe.extractedSize&&(Y[_e][te]=pe.extractedSize)}),Y}),Q})},setKnownSizes:y,onExport:B,onReset:z,mode:"SIZES",knownProductAliases:b}),i==="cleanNames"&&u.jsx(hte,{rows:d,knownSizes:x,setRows:X=>{f(W=>{const Q=typeof X=="function"?X(W):X,te=l.description;return te&&m(J=>{let Y={...J};return Q.forEach(pe=>{const _e=pe.id;Y[_e]||(Y[_e]={}),pe.extractedName&&(Y[_e][te]=pe.extractedName)}),Y}),Q})},setKnownSizes:y,onExport:H,onReset:z,mode:"NAMES",knownProductAliases:b})]})]})})},jNt=()=>{var D;const[e,t]=I.useState(1),[r,n]=I.useState(!1),[i,a]=I.useState(null),[s,o]=I.useState(null),[l,c]=I.useState([]),[d,f]=I.useState(!1),[p,m]=I.useState("variant_match"),[x,y]=I.useState({}),b=(L,B)=>{a(L),o(B)},S=()=>{n(!0)},_=()=>{!i||i.length<2||(a(L=>L?L.slice(1):[]),Re.success("Top row removed."))},C=()=>{a(null),o(null)},A=L=>{if(!L||L.length===0)return;const B=i?i[0]:Object.keys(L[0]),H=L.map(ie=>B.map(X=>ie[X])),z=[B,...H];a(z),n(!1),t(2)},j=()=>{const L=["Manufacturer","Collection","Color","Item Description","SKU","Cost"],B=[["Global Floors","Nebula Series","Stardust","Nebula Stardust Tile 12x24 Matte","NB-100",3.49],["Global Floors","Nebula Series","Cosmos","Nebula Cosmos Tile 12x24 Matte","NB-101",3.49],["Global Floors","Rustic Woods","Oak Natural","LVP Plank 7 inch x 48 inch Click","RW-200",2.99],["Global Floors","Rustic Woods","Oak Dark","LVP Plank 7 inch x 48 inch Click","RW-201",2.99],["Global Floors","Metro Subway","White Gloss","Ceramic Wall Tile 3 by 6","MT-300",.89]],H=rS.aoa_to_sheet([L,...B]),z=rS.book_new();rS.book_append_sheet(z,H,"Inventory"),mNt(z,"messy_vendor_file.xlsx")},P=async(L,B)=>{f(!0),m(B);try{const H=await cr.post("/api/import/preview",{mappedRows:L,strategy:B,defaults:x});c(H.data),t(3)}catch(H){console.error(H),Re.error("Failed to generate preview.")}finally{f(!1)}},O=async L=>{if(confirm("Are you sure you want to apply these changes to the database?")){f(!0);try{const B=await cr.post("/api/import/execute",{previewResults:L,strategy:p,defaults:x});Re.success(`Import complete! ${B.data.updates} updated, ${B.data.created} created.`),t(1),a(null),o(null)}catch(B){console.error(B),Re.error("Import failed. Check console for details.")}finally{f(!1)}}};return u.jsxs("div",{className:"space-y-8",children:[u.jsx("div",{className:"bg-surface-container-high p-8 rounded-xl shadow-sm border border-outline/10",children:u.jsxs("div",{children:[u.jsx("h1",{className:"text-4xl font-bold text-text-primary tracking-tight",children:"Import Inventory"}),u.jsx("p",{className:"text-text-secondary mt-1 font-medium",children:"Upload vendor price lists to update products in bulk."})]})}),u.jsxs("div",{className:"bg-surface-container-high rounded-xl shadow-sm border border-outline/10 overflow-hidden",children:[u.jsx("div",{className:"bg-surface-container-low border-b border-outline/10 p-8",children:u.jsxs("div",{className:"flex items-center justify-between max-w-3xl mx-auto",children:[u.jsxs("div",{className:`flex flex-col items-center transition-colors ${e>=1?"text-primary":"text-text-secondary"}`,children:[u.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold mb-2 transition-colors ${e>=1?"bg-primary-container text-primary":"bg-surface-container-highest text-text-tertiary border border-outline/10"}`,children:e>1?u.jsx(Hh,{size:24}):"1"}),u.jsx("span",{className:"text-sm font-medium",children:"Upload & Clean"})]}),u.jsx("div",{className:`flex-1 h-0.5 mx-4 transition-colors ${e>1?"bg-primary":"bg-outline/20"}`}),u.jsxs("div",{className:`flex flex-col items-center transition-colors ${e>=2?"text-primary":"text-text-secondary"}`,children:[u.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold mb-2 transition-colors ${e>=2?"bg-primary-container text-primary":"bg-surface-container-highest text-text-tertiary border border-outline/10"}`,children:e>2?u.jsx(Hh,{size:24}):"2"}),u.jsx("span",{className:"text-sm font-medium",children:"Map Columns"})]}),u.jsx("div",{className:`flex-1 h-0.5 mx-4 transition-colors ${e>2?"bg-primary":"bg-outline/20"}`}),u.jsxs("div",{className:`flex flex-col items-center transition-colors ${e>=3?"text-primary":"text-text-secondary"}`,children:[u.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold mb-2 transition-colors ${e>=3?"bg-primary-container text-primary":"bg-surface-container-highest text-text-tertiary border border-outline/10"}`,children:"3"}),u.jsx("span",{className:"text-sm font-medium",children:"Review & Import"})]})]})}),u.jsxs("div",{className:"p-8",children:[e===1&&!i&&u.jsxs("div",{className:"max-w-2xl mx-auto space-y-8",children:[u.jsx("div",{className:"bg-surface-container-low rounded-2xl border border-outline/10 p-1 shadow-sm",children:u.jsx(NNt,{onDataLoaded:b})}),u.jsx("div",{className:"flex flex-col md:flex-row gap-4 justify-center items-center text-center md:text-left",children:u.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2 text-sm text-text-secondary hover:text-primary transition-colors",children:[u.jsx(fC,{size:16})," Download Test File"]})})]}),e===1&&i&&u.jsxs("div",{className:"space-y-6 w-full animate-in fade-in slide-in-from-bottom-4 duration-500",children:[u.jsxs("div",{className:"bg-surface-container rounded-xl p-4 border border-outline/10 flex flex-wrap gap-4 justify-between items-center shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-success-container rounded-lg text-success",children:u.jsx(hFe,{size:24})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-text-primary text-lg",children:s}),u.jsxs("p",{className:"text-sm text-text-secondary",children:[i.length," rows detected"]})]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:_,className:"px-4 py-2 text-sm font-bold text-error bg-error-container/20 hover:bg-error-container/40 rounded-lg transition-colors border border-error/20",children:"Remove Top Row"}),u.jsx("div",{className:"h-8 w-px bg-outline/20 mx-2"}),u.jsx("button",{onClick:C,className:"px-4 py-2 text-sm font-bold text-text-secondary hover:bg-surface-container-high rounded-lg transition-colors",children:"Cancel"}),u.jsxs("button",{onClick:S,className:"px-6 py-2 text-sm font-bold text-on-primary bg-primary hover:bg-primary-hover rounded-full shadow-md transition-all active:scale-95 flex items-center gap-2",children:["Next: Clean Data ",u.jsx(Loe,{size:16})]})]})]}),u.jsxs("div",{className:"bg-surface-container rounded-xl border border-outline/10 overflow-hidden shadow-sm",children:[u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left text-sm",children:[u.jsx("thead",{className:"bg-surface-container-high border-b border-outline/10 text-text-secondary uppercase text-xs",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-3 w-12 text-center",children:"#"}),(D=i[0])==null?void 0:D.map((L,B)=>u.jsx("th",{className:"p-3 font-bold border-r border-outline/5 last:border-0 whitespace-nowrap",children:B<5?`Col ${String.fromCharCode(65+B)}`:`Col ${B}`},B))]})}),u.jsx("tbody",{className:"divide-y divide-outline/5",children:i.slice(0,8).map((L,B)=>u.jsxs("tr",{className:"hover:bg-surface-container-high/50 transition-colors",children:[u.jsx("td",{className:"p-3 text-center text-text-secondary text-xs font-mono border-r border-outline/5",children:B+1}),L.map((H,z)=>u.jsx("td",{className:"p-3 text-text-primary border-r border-outline/5 last:border-0 max-w-xs truncate",children:H},z))]},B))})]})}),u.jsxs("div",{className:"p-3 bg-surface-container-low border-t border-outline/10 text-center text-xs text-text-secondary",children:["Showing first 8 rows of ",i.length]})]})]}),e===2&&u.jsx(TNt,{rawData:i||[],fileName:s||"Unknown File",onBack:()=>t(1),onComplete:P,isGeneratingPreview:d,onDefaultsChange:y}),e===3&&u.jsx(INt,{results:l,onExecute:O,isExecuting:d,onBack:()=>t(2)})]})]}),r&&u.jsx(RNt,{onClose:()=>n(!1),onComplete:A,initialData:i||void 0,fileName:s||void 0})]})},pte=()=>{const{partnerId:e}=jx(),t=wu(),{currentUser:r,refreshNotifications:n}=Xr(),[i,a]=I.useState([]),[s,o]=I.useState(null),[l,c]=I.useState([]),[d,f]=I.useState(""),[p,m]=I.useState("inbox"),[x,y]=I.useState(""),[b,S]=I.useState(!1),[_,C]=I.useState([]),A=I.useRef(null),j=X=>X?X.replace(/@\[(\w+):[^|]+\|([^\]]+)\]/g,(W,Q,te)=>Q==="user"?`@${te}`:Q==="project"?` ${te}`:Q==="product"?` ${te}`:Q==="customer"?` ${te}`:Q==="installer"?` ${te}`:te):"No messages yet";I.useEffect(()=>{if(!e){o(null);return}/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test(e)?o(e):cr.post(`/api/messages/start/${e}`).then(W=>{t(`/messages/${W.data.conversationId}`,{replace:!0})}).catch(W=>{console.error("Failed to resolve conversation",W),t("/messages")})},[e,t]);const P=async()=>{try{const X=await cr.get("/api/messages/conversations",{params:{archived:p==="archived"}});a(X.data)}catch(X){console.error("Failed to load conversations",X)}},O=async()=>{if(s)try{const X=await cr.get(`/api/messages/${s}`);c(X.data),a(W=>W.map(Q=>Q.conversationId===s?{...Q,unreadCount:0}:Q)),n()}catch(X){console.error("Failed to load messages",X)}};I.useEffect(()=>{P(),s&&O();const X=setInterval(()=>{P(),s&&O()},5e3);return()=>clearInterval(X)},[s,p]),I.useEffect(()=>{A.current&&(A.current.scrollTop=A.current.scrollHeight)},[l]);const D=X=>{if(X==null||X.preventDefault(),!d.trim()||!s)return;const W=/@\[user:([^|]+)\|([^\]]+)\]/g;let Q;const te=new Set;for(;(Q=W.exec(d))!==null;)te.add(Q[1]);if(te.size===0){L();return}const J=i.find(de=>de.conversationId===s);if(!J){L();return}const Y=new Set(J.participants.map(de=>de.userId));r&&Y.add(r.userId);const pe=[];let _e;const ee=/@\[user:([^|]+)\|([^\]]+)\]/g;for(;(_e=ee.exec(d))!==null;){const de=_e[1],G=_e[2];Y.has(de)||pe.push(G)}pe.length>0?(C(pe),S(!0)):L()},L=async()=>{if(s)try{await cr.post(`/api/messages/${s}`,{content:d}),f(""),S(!1),C([]),O(),P()}catch(X){console.error(X)}},B=async()=>{if(!s)return;const X=i.find(Q=>Q.conversationId===s);if(!X)return;const W=!X.isArchived;try{await cr.patch(`/api/messages/${s}/archive`,{isArchived:W}),a(Q=>Q.filter(te=>te.conversationId!==s)),W?(o(null),t("/messages")):P()}catch(Q){console.error(Q)}},H=X=>{X.key==="Enter"&&!X.shiftKey&&(X.preventDefault(),D())},z=i.find(X=>X.conversationId===s)||null,ie=i.filter(X=>X.title.toLowerCase().includes(x.toLowerCase()));return u.jsxs("div",{className:"flex bg-surface-container-high rounded-2xl shadow-sm border border-outline/10 overflow-hidden h-full",children:[u.jsxs("div",{className:`
                bg-surface-container-low border-r border-outline/10 flex-col 
                ${s?"hidden md:flex":"flex w-full"} 
                md:w-80
            `,children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("h2",{className:"text-lg font-bold text-text-primary flex items-center gap-2",children:[u.jsx(E8,{className:"w-5 h-5 text-primary"}),"Messages"]}),u.jsxs("div",{className:"flex bg-surface-container-high rounded-full p-1 border border-outline/10 shadow-sm",children:[u.jsx("button",{onClick:()=>m("inbox"),className:`p-1.5 rounded-full transition-colors ${p==="inbox"?"bg-primary-container text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,title:"Inbox",children:u.jsx(mG,{size:16})}),u.jsx("button",{onClick:()=>m("archived"),className:`p-1.5 rounded-full transition-colors ${p==="archived"?"bg-primary-container text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,title:"Archived",children:u.jsx(CS,{size:16})})]})]}),u.jsxs("div",{className:"relative",children:[u.jsx(Yo,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-secondary",size:16}),u.jsx("input",{type:"text",placeholder:"Search...",className:"w-full pl-10 pr-4 py-2 bg-surface-container-highest border-none rounded-full text-sm text-text-primary focus:ring-2 focus:ring-primary/50 outline-none transition-shadow shadow-sm",value:x,onChange:X=>y(X.target.value)})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:[ie.map(X=>{var J;const W=s===X.conversationId,Q=((J=X.participants[0])==null?void 0:J.avatarUrl)||`https://www.gravatar.com/avatar/${AS(X.title)}?s=40&d=mp`,te=X.participants.length>1;return u.jsxs("div",{onClick:()=>t(`/messages/${X.conversationId}`),className:`flex items-center gap-3 p-3 cursor-pointer rounded-xl transition-all ${W?"bg-primary-container text-on-primary-container":"hover:bg-surface-container-highest text-text-secondary"}`,children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:Q,className:"w-10 h-10 rounded-full bg-surface-container-highest object-cover border border-outline/10"}),te&&u.jsx("div",{className:"absolute -bottom-1 -right-1 bg-surface-container rounded-full p-0.5 border border-outline/10 shadow-sm",children:u.jsx(hx,{size:12,className:"text-text-secondary"})})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("p",{className:`font-bold truncate text-sm ${W?"text-primary":"text-text-primary"}`,children:X.title}),X.unreadCount>0&&u.jsx("span",{className:"bg-error-container text-error text-[10px] px-1.5 py-0.5 rounded-full font-bold shadow-sm",children:X.unreadCount})]}),u.jsx("p",{className:`text-xs truncate ${X.unreadCount>0?"text-text-primary font-bold":"opacity-80"}`,children:j(X.lastMessage)})]})]},X.conversationId)}),x.length>1&&u.jsx(DNt,{query:x,navigate:t}),ie.length===0&&x.length<2&&u.jsx("div",{className:"text-center p-8 text-text-tertiary text-sm",children:p==="inbox"?"No active conversations.":"No archived conversations."})]})]}),u.jsxs("div",{className:`
                flex-col bg-surface relative 
                ${s?"flex w-full":"hidden md:flex"} 
                flex-1
            `,children:[u.jsx("div",{className:"absolute inset-0 opacity-[0.02] pointer-events-none bg-[radial-gradient(#000_1px,transparent_1px)] [background-size:16px_16px]"}),s?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex items-center justify-between bg-surface-container-high shadow-sm z-10",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:()=>t("/messages"),className:"md:hidden p-2 -ml-2 text-text-secondary hover:text-text-primary",children:u.jsx(hd,{size:20})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-text-primary text-lg leading-tight",children:(z==null?void 0:z.title)||"Loading..."}),(z==null?void 0:z.type)==="GROUP"&&u.jsxs("p",{className:"text-xs text-text-secondary",children:[z.participants.length+1," participants"]})]})]}),u.jsx("button",{onClick:B,className:"p-2 text-text-secondary hover:text-primary transition-colors rounded-full hover:bg-surface-container-highest",title:z!=null&&z.isArchived?"Unarchive":"Archive",children:z!=null&&z.isArchived?u.jsx(mG,{size:20}):u.jsx(CS,{size:20})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 z-0",ref:A,children:l.map(X=>{const W=X.senderId===(r==null?void 0:r.userId);return u.jsxs("div",{className:`flex ${W?"justify-end":"justify-start"}`,children:[!W&&u.jsx("img",{src:X.senderAvatar||`https://www.gravatar.com/avatar/${AS(X.senderName)}?s=40&d=mp`,className:"w-8 h-8 rounded-full mr-2 self-end mb-1 border border-outline/10 shadow-sm",title:X.senderName}),u.jsxs("div",{className:`max-w-[75%] px-4 py-3 rounded-2xl shadow-sm text-sm ${W?"bg-primary text-on-primary rounded-br-none":"bg-surface-container-highest text-text-primary rounded-bl-none"}`,children:[!W&&(z==null?void 0:z.type)==="GROUP"&&u.jsx("p",{className:"text-[10px] font-bold opacity-70 mb-1",children:X.senderName}),u.jsx(S3,{content:X.content}),u.jsx("p",{className:`text-[10px] mt-1 text-right ${W?"opacity-70":"text-text-secondary"}`,children:new Date(X.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},X.id)})}),u.jsx("form",{onSubmit:D,className:"p-4 bg-surface-container-high border-t border-outline/10 z-10",children:u.jsx(FT,{value:d,onChange:f,placeholder:"Type a message... Use @ to mention",onKeyDown:H,rightElement:u.jsx("button",{type:"submit",disabled:!d.trim(),className:"bg-primary text-on-primary p-2 rounded-full hover:bg-primary-hover transition-colors h-10 w-10 flex items-center justify-center shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:u.jsx(Sy,{size:18})})})})]}):u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-text-tertiary opacity-40",children:[u.jsx(E8,{size:64,className:"mb-4 bg-surface-container-highest p-6 rounded-full"}),u.jsx("p",{className:"text-lg font-medium",children:"Select a conversation"})]})]}),b&&u.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:u.jsx("div",{className:"bg-surface-container-high rounded-2xl shadow-2xl max-w-md w-full border border-outline/10 animate-in fade-in zoom-in duration-200",children:u.jsxs("div",{className:"p-8",children:[u.jsxs("div",{className:"flex items-center gap-3 text-warning mb-4",children:[u.jsx("div",{className:"bg-warning-container p-2 rounded-full",children:u.jsx(xd,{size:24})}),u.jsx("h3",{className:"text-lg font-bold text-text-primary",children:"Add Users to Chat?"})]}),u.jsxs("p",{className:"text-text-secondary mb-4",children:["You mentioned ",u.jsx("strong",{children:_.join(", ")}),"."]}),u.jsxs("p",{className:"text-text-secondary mb-6 text-sm bg-surface-container-low p-4 rounded-xl border border-outline/5",children:[" ",u.jsx("strong",{children:"Note:"})," By sending this message, they will be added to this conversation and will be able to see the ",u.jsx("strong",{children:"entire chat history"}),"."]}),u.jsxs("div",{className:"flex gap-3 justify-end",children:[u.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 text-sm font-medium text-text-secondary hover:bg-surface-container-highest rounded-full transition-colors",children:"Cancel"}),u.jsx("button",{onClick:L,className:"px-6 py-2 text-sm font-bold bg-primary text-on-primary rounded-full hover:bg-primary-hover shadow-md transition-colors",children:"Confirm & Add"})]})]})})})]})},DNt=({query:e,navigate:t})=>{const[r,n]=I.useState([]);return I.useEffect(()=>{const a=setTimeout(async()=>{try{const s=await cr.get(`/api/messages/search-users?query=${e}`);n(s.data)}catch{}},300);return()=>clearTimeout(a)},[e]),r.length===0?null:u.jsxs("div",{className:"mt-2 border-t border-outline/10 pt-2 px-2",children:[u.jsx("p",{className:"px-4 text-xs font-bold text-text-tertiary mb-1 uppercase tracking-wider",children:"Start New Chat"}),r.map(i=>u.jsxs("div",{onClick:()=>{cr.post(`/api/messages/start/${i.userId}`).then(a=>{t(`/messages/${a.data.conversationId}`)})},className:"flex items-center gap-3 p-3 cursor-pointer hover:bg-surface-container-highest rounded-xl transition-colors",children:[u.jsx("img",{src:i.avatarUrl||`https://www.gravatar.com/avatar/${AS(i.email)}?s=40&d=mp`,className:"w-8 h-8 rounded-full bg-surface-container-highest"}),u.jsxs("div",{children:[u.jsxs("p",{className:"text-sm font-medium text-text-primary",children:[i.firstName," ",i.lastName]}),u.jsx("p",{className:"text-xs text-text-secondary",children:i.email})]})]},i.userId))]})};function MNt(){const[e,t]=I.useState(1),[r,n]=I.useState(!1),[i,a]=I.useState(null),[s,o]=I.useState(!0),[l,c]=I.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",companyName:"",publicUrl:window.location.origin});I.useEffect(()=>{fetch("/api/setup/status").then(y=>y.json()).then(y=>{y.isSupertokensSecure===!1&&o(!1)}).catch(console.error)},[]);const d=y=>{c(b=>({...b,[y.target.name]:y.target.value}))},f=()=>{if(e===1){if(!l.firstName||!l.lastName||!l.email||!l.password){a("All fields are required.");return}if(l.password!==l.confirmPassword){a("Passwords do not match.");return}if(l.password.length<8){a("Password must be at least 8 characters.");return}}a(null),t(2)},p=async()=>{if(!l.companyName||!l.publicUrl){a("Company Name and System URL are required.");return}n(!0),a(null);try{const y=await fetch("/api/setup/init",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),b=await y.json();if(!y.ok)throw new Error(b.error||"Setup failed");window.location.href="/auth"}catch(y){a(y.message),n(!1)}},m="w-full bg-neutral-800/50 border border-neutral-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-transparent placeholder-neutral-500",x="block text-sm font-medium text-neutral-400 mb-1.5";return u.jsx("div",{className:"min-h-screen bg-neutral-950 flex items-center justify-center p-4 font-sans text-neutral-200",children:u.jsxs("div",{className:"w-full max-w-lg",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-neutral-100 mb-2 tracking-tight",children:"Welcome to Subfloor"}),u.jsx("p",{className:"text-neutral-400",children:"Let's get your system ready for business."})]}),!s&&u.jsxs("div",{className:"mb-6 bg-warning-container/20 border border-warning/30 rounded-xl p-4 flex items-start gap-3",children:[u.jsx(xd,{className:"w-5 h-5 text-warning flex-shrink-0 mt-0.5"}),u.jsxs("div",{className:"text-sm text-neutral-200",children:[u.jsx("strong",{className:"block text-warning mb-1 font-bold",children:"Security Warning: No API Key Detected"}),"Your authentication service is running in insecure mode. Please add ",u.jsx("code",{className:"bg-black/30 px-1 rounded",children:"SUPERTOKENS_API_KEY"})," to your environment variables and restart."]})]}),u.jsxs("div",{className:"bg-neutral-900 border border-neutral-800 rounded-2xl shadow-2xl overflow-hidden",children:[u.jsxs("div",{className:"p-6 border-b border-neutral-800",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-colors ${e>=1?"bg-primary text-on-primary shadow-sm":"bg-neutral-800 text-neutral-500"}`,children:"1"}),u.jsx("div",{className:`h-1 w-8 transition-colors ${e>=2?"bg-primary":"bg-neutral-800"}`}),u.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-colors ${e>=2?"bg-primary text-on-primary shadow-sm":"bg-neutral-800 text-neutral-500"}`,children:"2"})]}),u.jsx("span",{className:"text-sm font-bold text-neutral-500 uppercase tracking-wider",children:e===1?"Create Admin":"System Config"})]}),u.jsx("h2",{className:"text-xl font-bold text-neutral-100",children:e===1?"Create Admin Account":"Company Settings"}),u.jsx("p",{className:"text-sm text-neutral-400 mt-1 font-medium",children:e===1?"This user will have full access to all settings.":"Configure how your team will access the system."})]}),u.jsxs("div",{className:"p-6 space-y-4",children:[i&&u.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg text-sm text-red-300",children:i}),e===1?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"firstName",className:x,children:"First Name"}),u.jsx("input",{id:"firstName",name:"firstName",type:"text",value:l.firstName,onChange:d,className:m,placeholder:"Jane"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"lastName",className:x,children:"Last Name"}),u.jsx("input",{id:"lastName",name:"lastName",type:"text",value:l.lastName,onChange:d,className:m,placeholder:"Doe"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:x,children:"Email Address"}),u.jsx("input",{id:"email",name:"email",type:"email",value:l.email,onChange:d,className:m,placeholder:"admin@company.com"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:x,children:"Password"}),u.jsx("input",{id:"password",name:"password",type:"password",value:l.password,onChange:d,className:m})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"confirmPassword",className:x,children:"Confirm"}),u.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:l.confirmPassword,onChange:d,className:m})]})]}),u.jsxs("button",{onClick:f,className:"w-full mt-4 bg-primary hover:bg-primary-hover text-on-primary font-bold py-3 px-6 rounded-full transition-all shadow-md flex items-center justify-center",children:["Next Step ",u.jsx(am,{className:"w-4 h-4 ml-2"})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"companyName",className:x,children:"Company Name"}),u.jsx("input",{id:"companyName",name:"companyName",type:"text",value:l.companyName,onChange:d,className:m,placeholder:"My Flooring Co."}),u.jsx("p",{className:"text-xs text-neutral-500 mt-1 font-medium",children:"This will appear on emails and invoices."})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"publicUrl",className:x,children:"System URL"}),u.jsx("input",{id:"publicUrl",name:"publicUrl",type:"text",value:l.publicUrl,onChange:d,className:m}),u.jsxs("div",{className:"flex items-start gap-2 mt-3 bg-neutral-950/50 p-3 rounded-xl border border-neutral-800/50",children:[u.jsx(Hh,{className:"w-4 h-4 text-success mt-0.5 flex-shrink-0"}),u.jsxs("p",{className:"text-xs text-neutral-400 leading-relaxed font-medium",children:["We detected ",u.jsx("strong",{children:window.location.origin}),". Only change this if you are using a proxy or custom domain."]})]})]}),u.jsxs("div",{className:"flex gap-3 mt-6",children:[u.jsx("button",{onClick:()=>t(1),className:"w-1/3 py-3 px-4 text-neutral-400 font-bold hover:text-neutral-100 hover:bg-neutral-800 rounded-full transition-colors",children:"Back"}),u.jsxs("button",{onClick:p,disabled:r,className:"w-2/3 bg-success hover:bg-success-hover text-on-success font-bold py-3 px-6 rounded-full transition-all shadow-md flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:[r?u.jsx($0,{className:"w-5 h-5 animate-spin mr-2"}):u.jsx(PFe,{className:"w-5 h-5 mr-2"}),"Initialize System"]})]})]})]})]})]})})}const tye=`
  .kb-read-content h1 { font-size: 1.75em; font-weight: 800; margin-top: 1.5em; margin-bottom: 0.5em; color: var(--color-text-primary); scroll-margin-top: 2rem; }
  .kb-read-content h2 { font-size: 1.4em; font-weight: 700; margin-top: 1.25em; margin-bottom: 0.5em; color: var(--color-text-primary); scroll-margin-top: 2rem; }
  .kb-read-content h3 { font-size: 1.2em; font-weight: 600; margin-top: 1em; margin-bottom: 0.5em; color: var(--color-text-primary); scroll-margin-top: 2rem; }
  .kb-read-content p { margin-bottom: 0.75em; line-height: 1.6; color: var(--color-text-primary); overflow-wrap: break-word; }
  .kb-read-content p:empty::before { content: " "; display: inline-block; }
  .kb-read-content ul { list-style-type: disc; padding-left: 1.5em; margin-bottom: 1em; color: var(--color-text-primary); }
  .kb-read-content ol { list-style-type: decimal; padding-left: 1.5em; margin-bottom: 1em; color: var(--color-text-primary); }
  .kb-read-content a { color: var(--color-primary); text-decoration: underline; cursor: pointer; }
  .kb-read-content strong { font-weight: bold; color: var(--color-text-primary); }
  
  /* FILE ATTACHMENT LINKS */
  .kb-read-content a[href*="/uploads/"] {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background-color: var(--color-surface);
      border: 1px solid var(--color-border);
      padding: 0.25rem 0.75rem;
      border-radius: 999px;
      text-decoration: none;
      font-weight: 500;
      font-size: 0.9em;
      transition: all 0.2s;
      margin: 0.25rem 0;
  }
  .kb-read-content a[href*="/uploads/"]:hover {
      border-color: var(--color-primary);
      background-color: color-mix(in srgb, var(--color-primary), transparent 95%);
  }
  
  /* CAPTION & FIGURE STYLES */
  .kb-read-content figure { display: table; margin: 1.5em auto; max-width: 100%; }
  .kb-read-content figcaption { text-align: center; font-size: 0.85em; color: var(--color-text-secondary); font-style: italic; margin-top: 0.5em; width: 100%; }
  .kb-read-content figure img { margin: 0 !important; float: none !important; display: block; }
  
  /* IMAGE STYLES */
  .kb-read-content img { 
      max-width: 100%; 
      height: auto; 
      border-radius: 0.5rem; 
      margin: 1.5em auto; 
      display: block;    
      cursor: zoom-in; 
      box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); 
  }
  .kb-read-content img[align="left"] { 
      float: left; margin: 0.5em 1.5em 1em 0; display: inline-block; 
  }
  .kb-read-content img[align="right"] { 
      float: right; margin: 0.5em 0 1em 1.5em; display: inline-block; 
  }
  .kb-read-content img[align="center"] { display: block; margin: 1.5em auto; }
  
  /* WIKI LINKS */
  .kb-read-content .kb-mention {
      color: var(--color-primary);
      background-color: color-mix(in srgb, var(--color-primary), white 85%);
      padding: 0.1rem 0.3rem;
      border-radius: 0.3rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
  }
  .kb-read-content .kb-mention:hover {
      background-color: var(--color-primary);
      color: var(--color-on-primary);
  }
`;function FNt({articleId:e,onClose:t,onRestore:r}){const[n,i]=I.useState([]),[a,s]=I.useState(null),[o,l]=I.useState(!0),[c,d]=I.useState(!1);I.useEffect(()=>{f()},[e]);const f=async()=>{try{const x=await cr.get(`/api/kb/articles/${e}/history`);i(x.data),window.innerWidth>=768&&x.data.length>0&&s(x.data[0])}catch(x){console.error(x),Re.error("Failed to load history")}finally{l(!1)}},p=x=>{s(x),d(!0)},m=()=>{a&&(r(a.previousContent),Re.success("Content restored. Please Save to confirm."))};return u.jsxs("div",{className:"flex flex-col h-full bg-surface",children:[u.jsx("style",{children:tye}),u.jsx("div",{className:"p-4 border-b border-border bg-background flex justify-between items-center",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{onClick:t,className:"text-text-secondary hover:text-text-primary flex items-center gap-1 text-sm",children:[u.jsx(hd,{size:16})," Back"]}),u.jsx("span",{className:"text-border",children:"|"}),u.jsxs("h2",{className:"font-bold text-lg flex items-center gap-2 text-text-primary",children:[u.jsx(gd,{size:18,className:"text-primary"})," History"]})]})}),u.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[u.jsxs("div",{className:`
                    w-full md:w-80 border-r border-border bg-background/50 overflow-y-auto p-2
                    ${c?"hidden md:block":"block"}
                `,children:[u.jsx("h3",{className:"text-xs font-bold text-text-tertiary uppercase tracking-wider mb-2 px-2 mt-2",children:"Revisions"}),n.length===0&&!o&&u.jsx("div",{className:"p-4 text-center text-text-secondary text-sm",children:"No history found."}),n.map(x=>u.jsxs("button",{onClick:()=>p(x),className:`w-full text-left p-3 rounded-lg mb-1 transition-colors border group relative ${(a==null?void 0:a.id)===x.id?"bg-primary/10 border-primary/50 ring-1 ring-primary":"bg-surface border-transparent hover:border-border"}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-6 h-6 rounded-full bg-surface-hover flex items-center justify-center text-text-secondary",children:u.jsx(pc,{size:12})}),u.jsx("span",{className:"text-xs font-bold text-text-primary truncate max-w-[120px]",children:x.authorName||"Unknown"})]}),u.jsx("span",{className:"text-[10px] text-text-tertiary",children:new Date(x.createdAt).toLocaleDateString()})]}),u.jsxs("div",{className:"text-xs text-text-secondary pl-8 flex justify-between items-center",children:[u.jsx("span",{children:new Date(x.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),u.jsx(md,{size:14,className:"opacity-0 group-hover:opacity-100 md:hidden text-primary"})]})]},x.id))]}),u.jsx("div",{className:`
                    flex-1 flex flex-col bg-surface absolute inset-0 md:static z-10 md:z-auto
                    ${c?"block":"hidden md:flex"}
                `,children:a?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"p-3 border-b border-border bg-background/50 flex justify-between items-center shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>d(!1),className:"md:hidden p-1 -ml-1 text-text-secondary",children:u.jsx(hd,{size:18})}),u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("span",{className:"text-xs font-bold text-text-primary",children:["Snapshot from ",new Date(a.createdAt).toLocaleString()]}),u.jsxs("span",{className:"text-[10px] text-text-tertiary md:hidden",children:["By ",a.authorName]})]})]}),u.jsxs("button",{onClick:m,className:"flex items-center gap-2 bg-primary text-on-primary px-3 py-1.5 rounded text-sm font-bold hover:bg-primary-hover shadow-sm",children:[u.jsx(e1,{size:14})," ",u.jsx("span",{className:"hidden sm:inline",children:"Restore"})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-8",children:u.jsx("div",{className:"kb-read-content opacity-90",dangerouslySetInnerHTML:{__html:a.previousContent}})})]}):u.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-text-tertiary p-4 text-center",children:[u.jsx(gd,{size:48,className:"mb-4 opacity-20"}),u.jsx("p",{children:"Select a revision from the list to preview."})]})})]})]})}const LNt=({onClose:e,onSave:t})=>{const[r,n]=I.useState("");return u.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:e,children:u.jsxs("div",{className:"bg-surface border border-border p-6 rounded-lg w-full max-w-sm shadow-xl",onClick:i=>i.stopPropagation(),children:[u.jsx("h3",{className:"font-bold text-text-primary mb-4",children:"New Category"}),u.jsx("input",{autoFocus:!0,className:"w-full bg-background border border-border rounded p-2 text-text-primary mb-4 focus:ring-2 focus:ring-primary outline-none",placeholder:"e.g. Installation Guides",value:r,onChange:i=>n(i.target.value),onKeyDown:i=>i.key==="Enter"&&t(r)}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{onClick:e,className:"px-3 py-1.5 text-text-secondary hover:text-text-primary",children:"Cancel"}),u.jsx("button",{onClick:()=>t(r),disabled:!r,className:"px-3 py-1.5 bg-primary text-on-primary rounded font-bold hover:bg-primary-hover disabled:opacity-50",children:"Create"})]})]})})},BNt=e=>e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""),UNt=e=>{const r=new DOMParser().parseFromString(e,"text/html");return r.querySelectorAll("h1, h2, h3").forEach(n=>{n.id||(n.id=BNt(n.textContent||""))}),r.body.innerHTML},mte=e=>{const r=new DOMParser().parseFromString(e,"text/html"),n=[];return r.querySelectorAll("h1, h2, h3").forEach(i=>{i.id&&i.textContent&&n.push({id:i.id,text:i.textContent,level:parseInt(i.tagName.substring(1))})}),n};function $Nt(){var q,ne,Se;const{currentUser:e}=Xr(),t=(q=e==null?void 0:e.roles)==null?void 0:q.includes("Admin"),[r,n]=I.useState("list"),[i,a]=I.useState([]),[s,o]=I.useState(null),[l,c]=I.useState([]),[d,f]=I.useState(""),[p,m]=I.useState(null),[x,y]=I.useState(!1),[b,S]=I.useState(null),[_,C]=I.useState(!1),[A,j]=I.useState(""),[P,O]=I.useState(""),[D,L]=I.useState(""),[B,H]=I.useState([]),[z,ie]=I.useState(""),[X,W]=I.useState([]);I.useEffect(()=>{Q()},[]),I.useEffect(()=>{const re=setTimeout(()=>{d?te(null,d):s&&te(s)},300);return()=>clearTimeout(re)},[s,d]),I.useEffect(()=>{s&&f("")},[s]),I.useEffect(()=>{if(p&&b){const re=setTimeout(()=>{const ae=document.getElementById(b);ae&&(ae.scrollIntoView({behavior:"smooth",block:"start"}),S(null))},300);return()=>clearTimeout(re)}},[p,b]),I.useEffect(()=>{r==="read"&&p&&setTimeout(()=>{const re=document.querySelector(".kb-read-content");re&&(re.querySelectorAll("img").forEach(ae=>{const ge=ae.getAttribute("src");ge&&!ge.startsWith("http")&&(ae.src=Ma(ge))}),re.querySelectorAll("img[data-caption]").forEach(ae=>{if(ae.parentElement.tagName==="FIGURE")return;const ge=ae.getAttribute("data-caption");if(!ge)return;const Ee=document.createElement("figure"),V=document.createElement("figcaption");V.innerText=ge;const Ae=ae.getAttribute("align");Ae==="left"?(Ee.style.float="left",Ee.style.margin="0.5em 1.5em 1em 0"):Ae==="right"&&(Ee.style.float="right",Ee.style.margin="0.5em 0 1em 1.5em"),ae.parentNode.insertBefore(Ee,ae),Ee.appendChild(ae),Ee.appendChild(V)}))},100)},[r,p]);const Q=async()=>{try{const re=await cr.get(rr("/api/kb/categories"),{withCredentials:!0});a(re.data),!s&&re.data.length>0&&o(re.data[0].id)}catch(re){console.error(re)}},te=async(re,ae)=>{try{let ge="/api/kb/search";if(ae)ge+=`?q=${encodeURIComponent(ae)}`;else if(re)ge+=`?cat=${re}`;else return;const Ee=await cr.get(rr(ge),{withCredentials:!0});c(Ee.data)}catch(ge){console.error(ge)}},J=async re=>{try{await cr.post(rr("/api/kb/categories"),{name:re},{withCredentials:!0}),Re.success("Category created"),Q(),y(!1)}catch{Re.error("Failed to create category")}},Y=(re="")=>{j(re),O("<p>Start writing...</p>"),L(s||""),H([]),m(null),f(""),n("edit")},pe=re=>{m(null),cr.get(rr(`/api/kb/articles/${re.id}`),{withCredentials:!0}).then(ae=>{m(ae.data),W(mte(ae.data.content)),n("read")})},_e=()=>{p&&(j(p.title),O(p.content||""),L(p.category_id||""),H(p.tags||[]),n("edit"))},ee=async()=>{if(!A)return Re.error("Title is required");if(!D)return Re.error("Category is required");const re=UNt(P);try{const ae={title:A,content:re,categoryId:Number(D),isPublished:!0,tags:B};if(p!=null&&p.id){const ge=await cr.put(rr(`/api/kb/articles/${p.id}`),ae,{withCredentials:!0});Re.success("Article updated"),m({...p,id:p==null?void 0:p.id,title:A,content:re,tags:B,updated_at:ge.data.updated_at})}else{const ge=await cr.post(rr("/api/kb/articles"),ae,{withCredentials:!0});Re.success("Article created"),m({...ge.data,author_name:e==null?void 0:e.firstName,title:A,content:re,tags:B})}te(Number(D)),o(Number(D)),W(mte(re)),n("read")}catch(ae){console.error(ae),Re.error("Failed to save")}},de=()=>{z&&!B.includes(z.trim())&&(H([...B,z.trim()]),ie(""))},G=re=>{O(re),H((p==null?void 0:p.tags)||[]),n("edit")};return u.jsxs("div",{className:"h-full flex flex-col",children:[u.jsx("div",{className:"bg-surface-container-high p-8 rounded-xl shadow-sm mb-6 border border-outline/10 flex-shrink-0",children:u.jsxs("div",{children:[u.jsx("h1",{className:"text-4xl font-bold text-text-primary tracking-tight",children:"Knowledge Base"}),u.jsx("p",{className:"text-text-secondary mt-1 font-medium",children:"Manage documentation, guides, and internal resources."})]})}),u.jsxs("div",{className:"flex-1 flex min-h-0 bg-surface-container-high border border-outline/10 rounded-xl overflow-hidden shadow-sm relative",children:[u.jsxs("div",{className:`border-r border-outline/10 bg-surface-container-low flex flex-col transition-all duration-200 
                    ${_?"absolute inset-0 z-50 w-full":"hidden md:flex w-64"}
                `,children:[u.jsxs("div",{className:"p-4 border-b border-outline/10 flex justify-between items-center bg-surface-container-low",children:[u.jsxs("h2",{className:"font-bold text-text-primary flex items-center gap-2",children:[u.jsx(hG,{className:"text-primary w-5 h-5"})," Library"]}),u.jsxs("div",{className:"flex items-center gap-2",children:[t&&u.jsx("button",{onClick:()=>y(!0),className:"text-primary hover:bg-primary-container p-2 rounded-full transition-colors",title:"New Category",children:u.jsx(ac,{size:18})}),u.jsx("button",{onClick:()=>C(!1),className:"md:hidden text-text-secondary p-1",children:u.jsx(tn,{size:20})})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:[i.length===0&&u.jsx("div",{className:"text-sm text-text-tertiary p-4 text-center",children:"No categories yet."}),i.map(re=>u.jsxs("div",{children:[u.jsxs("button",{onClick:()=>{o(re.id)},className:`w-full flex items-center gap-2 px-3 py-2 text-sm rounded-md transition-colors ${s===re.id?"bg-primary-container text-primary font-bold":"text-text-secondary hover:bg-surface-container-high hover:text-text-primary"}`,children:[u.jsx(hG,{size:16,className:s===re.id?"text-primary":"text-text-tertiary"}),u.jsx("span",{className:"truncate",children:re.name})]}),s===re.id&&u.jsxs("div",{className:"ml-4 border-l border-outline/20 pl-2 mt-1 space-y-0.5",children:[l.map(ae=>u.jsx("button",{onClick:()=>{pe(ae),C(!1)},className:`block w-full text-left px-2 py-1.5 text-xs truncate rounded-md ${(p==null?void 0:p.id)===ae.id?"text-primary bg-primary-container/30 font-medium":"text-text-secondary hover:text-text-primary hover:bg-surface-container-high"}`,children:ae.title},ae.id)),l.length===0&&u.jsx("div",{className:"text-[10px] text-text-tertiary px-2 py-1 italic",children:"No articles"})]})]},re.id))]})]}),u.jsxs("div",{className:"flex-1 flex flex-col bg-surface",children:[r==="list"&&u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"p-4 md:p-6 border-b border-outline/10 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-surface-container-high",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:()=>C(!0),className:"md:hidden text-primary hover:bg-primary/10 p-1 rounded",children:u.jsx(Moe,{size:24})}),u.jsx("div",{children:d?u.jsx("h1",{className:"text-xl md:text-2xl font-bold text-text-primary",children:"Search Results"}):u.jsxs(u.Fragment,{children:[u.jsx("h1",{className:"text-xl md:text-2xl font-bold text-text-primary",children:((ne=i.find(re=>re.id===s))==null?void 0:ne.name)||"Library"}),u.jsxs("p",{className:"text-text-secondary text-xs md:text-sm font-medium",children:[l.length," articles"]})]})})]}),t&&s&&u.jsx("button",{onClick:()=>Y(),className:"md:hidden text-primary bg-primary/10 p-2 rounded-full",children:u.jsx(ac,{size:20})})]}),u.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[u.jsxs("div",{className:"relative w-full md:w-64 lg:w-80",children:[u.jsx(Yo,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-tertiary",size:16}),u.jsx("input",{className:"w-full bg-surface-container-highest border-none rounded-full pl-9 pr-4 py-2 text-sm focus:ring-2 focus:ring-primary/50 outline-none transition-shadow shadow-sm",placeholder:"Search...",value:d,onChange:re=>f(re.target.value)})]}),t&&s&&u.jsxs("button",{onClick:()=>Y(),className:"hidden md:flex items-center gap-2 bg-primary text-on-primary px-4 py-2 rounded-full font-bold shadow-md hover:bg-primary-hover transition-colors",children:[u.jsx(ac,{size:18})," New Article"]})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-surface",children:[t&&d&&u.jsxs("button",{onClick:()=>Y(d),className:"w-full mb-4 p-4 border border-dashed border-primary/50 bg-primary-container/20 rounded-xl flex items-center justify-center gap-2 text-primary font-bold hover:bg-primary-container/40 transition-colors",children:[u.jsx(ac,{size:18}),'Create new article: "',d,'"']}),l.length===0?u.jsx("div",{className:"text-center py-8 text-text-tertiary",children:!t&&u.jsx("p",{children:"No articles found."})}):u.jsx("div",{className:"grid grid-cols-1 gap-4",children:l.map(re=>u.jsxs("div",{onClick:()=>pe(re),className:"p-5 rounded-xl border border-outline/10 bg-surface-container-high hover:border-primary hover:shadow-md transition-all cursor-pointer group",children:[u.jsx("h3",{className:"font-bold text-lg text-text-primary group-hover:text-primary mb-1",children:re.title}),u.jsxs("div",{className:"flex items-center gap-4 text-xs text-text-secondary",children:[u.jsxs("span",{className:"font-medium",children:["Updated ",new Date(re.updated_at).toLocaleDateString()]}),re.tags&&re.tags.length>0&&u.jsxs("span",{className:"flex items-center gap-1 bg-surface-container px-2 py-0.5 rounded-full",children:[u.jsx(C8,{size:12})," ",re.tags.join(", ")]})]})]},re.id))})]})]}),r==="read"&&p&&u.jsxs("div",{className:"flex flex-col h-full relative bg-surface",children:[u.jsxs("div",{className:"p-6 border-b border-outline/10 flex justify-between items-start bg-surface-container-high",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsxs("button",{onClick:()=>n("list"),className:"text-sm text-text-secondary hover:text-text-primary flex items-center gap-1 font-medium",children:[u.jsx(hd,{size:14})," Back"]}),u.jsx("span",{className:"text-border",children:"|"}),u.jsx("span",{className:"text-xs text-primary font-bold uppercase tracking-wider bg-primary-container px-2 py-0.5 rounded",children:(Se=i.find(re=>re.id===p.category_id))==null?void 0:Se.name})]}),u.jsx("h1",{className:"text-3xl font-bold text-text-primary tracking-tight",children:p.title}),u.jsxs("p",{className:"text-xs text-text-secondary mt-2 font-medium",children:["Last updated ",new Date(p.updated_at).toLocaleDateString()]})]}),t&&u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>n("history"),className:"p-2 text-text-secondary hover:text-primary hover:bg-surface-container-highest rounded-full transition-all",title:"View History",children:u.jsx(Jx,{size:20})}),u.jsx("button",{onClick:_e,className:"p-2 text-text-secondary hover:text-primary hover:bg-surface-container-highest rounded-full transition-all",title:"Edit Article",children:u.jsx(fx,{size:20})})]})]}),u.jsxs("div",{className:"flex-1 overflow-hidden flex bg-surface",children:[u.jsxs("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 flow-root",onClick:re=>{var ge;if(re.target instanceof HTMLImageElement){window.open(re.target.src,"_blank");return}const ae=re.target.closest(".kb-mention");if(ae){const Ee=ae.getAttribute("data-id"),V=ae.getAttribute("data-anchor");if(Ee){if(Number(Ee)===p.id&&V){(ge=document.getElementById(V))==null||ge.scrollIntoView({behavior:"smooth"});return}Number(Ee)!==p.id&&(V&&S(V),pe({id:Ee}))}}},children:[u.jsx("style",{children:tye}),u.jsx("div",{className:"kb-read-content max-w-3xl mx-auto",dangerouslySetInnerHTML:{__html:p.content}})]}),X.length>0&&u.jsxs("div",{className:"w-64 border-l border-outline/10 bg-surface-container-low p-6 hidden xl:block overflow-y-auto",children:[u.jsx("h4",{className:"font-bold text-text-secondary text-xs uppercase tracking-wider mb-4",children:"On this page"}),u.jsx("div",{className:"space-y-2 border-l border-outline/20",children:X.map((re,ae)=>u.jsxs("div",{className:"group flex items-center justify-between pl-3 hover:border-l hover:-ml-[1px] hover:border-primary transition-all",children:[u.jsx("a",{href:`#${re.id}`,className:`block text-xs hover:text-primary truncate ${re.level===3?"ml-2 text-text-tertiary":"text-text-secondary font-medium"}`,children:re.text}),u.jsx("button",{onClick:ge=>{ge.preventDefault(),navigator.clipboard.writeText(`${window.location.href}#${re.id}`),Re.success("Section link copied!")},className:"opacity-0 group-hover:opacity-100 p-1 text-text-tertiary hover:text-primary transition-opacity",title:"Copy Link to Section",children:u.jsx(Zx,{size:12})})]},ae))})]})]})]}),r==="history"&&p&&u.jsx(FNt,{articleId:p.id,onClose:()=>n("read"),onRestore:G}),r==="edit"&&u.jsxs("div",{className:"flex flex-col h-full bg-surface",children:[u.jsxs("div",{className:"p-6 border-b border-outline/10 flex justify-between items-start bg-surface-container-high",children:[u.jsxs("div",{className:"w-full mr-4",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2 h-6",children:[u.jsxs("button",{onClick:()=>n(p?"read":"list"),className:"text-sm text-text-secondary hover:text-text-primary flex items-center gap-1 font-medium",children:[u.jsx(hd,{size:14})," Cancel"]}),u.jsx("span",{className:"text-border",children:"|"}),u.jsxs("select",{value:D,onChange:re=>L(re.target.value),className:"bg-transparent text-xs font-bold uppercase tracking-wider text-primary border-none outline-none cursor-pointer hover:bg-primary-container rounded px-1 -ml-1 transition-colors",children:[u.jsx("option",{value:"",disabled:!0,children:"Select Category"}),i.map(re=>u.jsx("option",{value:re.id,children:re.name},re.id))]})]}),u.jsx("input",{type:"text",placeholder:"Article Title",className:"w-full text-3xl font-bold bg-transparent border-none outline-none placeholder-text-tertiary text-text-primary p-0 m-0 focus:ring-0 tracking-tight",value:A,onChange:re=>j(re.target.value)}),u.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[B.map(re=>u.jsxs("span",{className:"text-xs bg-primary-container text-primary px-2 py-0.5 rounded-full flex items-center gap-1 font-medium",children:[re,u.jsx("button",{onClick:()=>H(B.filter(ae=>ae!==re)),children:u.jsx(tn,{size:12})})]},re)),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(C8,{size:14,className:"text-text-tertiary"}),u.jsx("input",{className:"bg-transparent border-none outline-none text-xs text-text-primary placeholder-text-tertiary min-w-[80px]",placeholder:"Add tag...",value:z,onChange:re=>ie(re.target.value),onKeyDown:re=>re.key==="Enter"&&de()})]})]})]}),u.jsx("div",{className:"flex-shrink-0",children:u.jsxs("button",{onClick:ee,className:"flex items-center gap-2 bg-primary text-on-primary px-6 py-2 rounded-full font-bold shadow-md hover:bg-primary-hover transition-colors",children:[u.jsx(Cs,{size:18})," Save"]})})]}),u.jsx("div",{className:"flex-1 overflow-hidden p-0 md:p-8 w-full flex flex-col",children:u.jsx(Nhe,{content:P,onChange:O})})]})]})]}),x&&u.jsx(LNt,{onClose:()=>y(!1),onSave:J})]})}function zNt(){const[e,t]=I.useState(""),[r,n]=I.useState(""),i=()=>{let a=e.trim();if(a){!a.startsWith("http://")&&!a.startsWith("https://")&&(a=`https://${a}`),a=a.replace(/\/$/,"");try{new URL(a)}catch{n("Invalid URL format. Must be like: https://flooring.mycompany.com");return}console.log(" SAVING SERVER URL:",a),localStorage.setItem(v8,a),window.location.reload()}};return u.jsx("div",{className:"min-h-screen bg-neutral-950 flex items-center justify-center p-4 font-sans text-neutral-200",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-neutral-100 mb-2 tracking-tight",children:"Connect to Server"}),u.jsx("p",{className:"text-neutral-400",children:"Enter your server address to connect."})]}),u.jsxs("div",{className:"bg-neutral-900 border border-neutral-800 rounded-2xl shadow-2xl p-6",children:[u.jsx("label",{className:"block text-sm font-medium text-neutral-400 mb-1.5",children:"Server URL"}),u.jsx("input",{type:"url",value:e,onChange:a=>{t(a.target.value),n("")},placeholder:"https://subfloor.mycompany.com",className:"w-full bg-neutral-800/50 border border-neutral-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-transparent placeholder-neutral-500"}),r&&u.jsx("p",{className:"text-red-400 text-sm mt-2",children:r}),u.jsx("button",{onClick:i,className:"mt-6 w-full bg-primary hover:bg-primary-hover text-on-primary font-semibold py-3 px-6 rounded-full transition-all shadow-lg hover:shadow-xl flex items-center justify-center",children:"Connect"}),u.jsx("button",{onClick:()=>{localStorage.removeItem(v8),window.location.reload()},className:"mt-4 w-full text-neutral-500 text-sm hover:text-neutral-300 transition-colors",children:"Clear Saved Server"})]})]})})}const HNt=()=>{const e=wu(),t=Fl();return I.useEffect(()=>{var i;if(!((i=window.Capacitor)==null?void 0:i.isNativePlatform()))return;const n=hT.addListener("backButton",({canGoBack:a})=>{const s=document.querySelector('[aria-label="Close modal"]');if(s&&s.offsetParent!==null){s.click();return}const o=document.getElementById("sidebar-overlay");if(o){o.click();return}t.pathname==="/"||t.pathname==="/auth"?hT.exitApp():e(-1)});return()=>{n.then(a=>a.remove())}},[e,t]),null},RN=(e,t)=>{let r=parseInt(e.replace("#",""),16),n=Math.round(2.55*t),i=(r>>16)-n,a=(r>>8&255)-n,s=(r&255)-n;return"#"+(16777216+(i<255?i<1?0:i:255)*65536+(a<255?a<1?0:a:255)*256+(s<255?s<1?0:s:255)).toString(16).slice(1)},UM=e=>{const t=parseInt(e.substr(1,2),16),r=parseInt(e.substr(3,2),16),n=parseInt(e.substr(5,2),16);return(t*299+r*587+n*114)/1e3>=128?"#000000":"#ffffff"},WNt=()=>{const{systemBranding:e}=Xr();return Vr.useEffect(()=>{if(e!=null&&e.faviconUrl){const r=document.querySelector("link[rel*='icon']")||document.createElement("link");r.type="image/x-icon",r.rel="icon",r.href=Ma(e.faviconUrl),document.getElementsByTagName("head")[0].appendChild(r)}e!=null&&e.companyName&&(document.title=`Subfloor for ${e.companyName}`);const t=document.documentElement;e!=null&&e.primaryColor&&(t.style.setProperty("--color-primary",e.primaryColor),t.style.setProperty("--color-primary-hover",RN(e.primaryColor,10)),t.style.setProperty("--color-on-primary",UM(e.primaryColor))),e!=null&&e.secondaryColor&&(t.style.setProperty("--color-secondary",e.secondaryColor),t.style.setProperty("--color-secondary-hover",RN(e.secondaryColor,10)),t.style.setProperty("--color-on-secondary",UM(e.secondaryColor))),e!=null&&e.accentColor&&(t.style.setProperty("--color-accent",e.accentColor),t.style.setProperty("--color-accent-hover",RN(e.accentColor,10)),t.style.setProperty("--color-on-accent",UM(e.accentColor))),e!=null&&e.backgroundColor&&t.style.setProperty("--color-background",e.backgroundColor),e!=null&&e.surfaceColor&&t.style.setProperty("--color-surface",e.surfaceColor),e!=null&&e.textPrimaryColor&&t.style.setProperty("--color-text-primary",e.textPrimaryColor),e!=null&&e.textSecondaryColor&&t.style.setProperty("--color-text-secondary",e.textSecondaryColor),e!=null&&e.surfaceColor&&t.style.setProperty("--color-border",RN(e.surfaceColor,-10))},[e]),null};function VNt(){var o;const[e,t]=I.useState(null),[r,n]=I.useState(!1),i=u.jsxs(u.Fragment,{children:[u.jsx(Zje,{position:"bottom-center"}),u.jsx(zFe,{})]}),a=(o=window.Capacitor)==null?void 0:o.isNativePlatform(),s=!!localStorage.getItem("subfloor_server_url");return I.useEffect(()=>{if(a&&!s){t(null);return}fetch(rr("/api/setup/status")).then(l=>l.json()).then(l=>t(l.initialized)).catch(l=>{console.error("Failed to check setup status",l),a?n(!0):t(!0)})},[a,s]),a&&(!s||r)?u.jsxs(u.Fragment,{children:[i,u.jsx(zNt,{})]}):e===null?u.jsxs("div",{className:"flex items-center justify-center h-screen bg-slate-950",children:[i,u.jsx($0,{className:"w-8 h-8 text-blue-500 animate-spin"})]}):e===!1?u.jsx(MNt,{}):u.jsxs(A8e,{children:[i,u.jsx(lUe,{}),u.jsx(WNt,{}),u.jsx(UFe,{children:u.jsxs(bie,{children:[u.jsx(HNt,{}),u.jsxs(vie,{children:[Bae.getSuperTokensRoutesForReactRouterDom($Ae,[Uae.EmailPasswordPreBuiltUI]),u.jsxs(xa,{path:"/",element:u.jsx(tm.SessionAuth,{children:u.jsx(e5e,{})}),children:[u.jsx(xa,{index:!0,element:u.jsx(QBe,{})}),u.jsx(xa,{path:"customers",element:u.jsx(uUe,{})}),u.jsx(xa,{path:"customers/:customerId",element:u.jsx(dUe,{})}),u.jsx(xa,{path:"projects/:projectId",element:u.jsx(cWe,{})}),u.jsx(xa,{path:"samples",element:u.jsx(XWe,{})}),u.jsx(xa,{path:"reports",element:u.jsx(Cxt,{})}),u.jsx(xa,{path:"import",element:u.jsx(jNt,{})}),u.jsx(xa,{path:"messages",element:u.jsx(pte,{})}),u.jsx(xa,{path:"messages/:partnerId",element:u.jsx(pte,{})}),u.jsx(xa,{path:"kb",element:u.jsx($Nt,{})}),u.jsx(xa,{path:"vendors",element:u.jsx(Rtt,{})}),u.jsx(xa,{path:"vendors/:vendorId",element:u.jsx(Mtt,{})}),u.jsx(xa,{path:"orders",element:u.jsx(Ltt,{})}),u.jsx(xa,{path:"installers",element:u.jsx(QWe,{})}),u.jsx(xa,{path:"installers/:installerId",element:u.jsx(ZWe,{})}),u.jsx(xa,{path:"quotes/:quoteId",element:u.jsx(eVe,{})}),u.jsx(xa,{path:"calendar",element:u.jsx(PWe,{})}),u.jsx(xa,{path:"settings",element:u.jsx(Ptt,{})})]})]})]})})]})}var Ez={},Nu={};Object.defineProperty(Nu,"__esModule",{value:!0});var xm=vn,qNt=Ua,GNt=Vx;Nu.SuperTokensWrapper=xm.SuperTokensWrapper;Nu.changeLanguage=xm.changeLanguage;Nu.default=xm.SuperTokensAPIWrapper;Nu.init=xm.init;Nu.isRecipeInitialized=xm.isRecipeInitialized;Nu.loadTranslation=xm.loadTranslation;Nu.redirectToAuth=xm.redirectToAuth;Nu.useUserContext=xm.useUserContext;Nu.getTranslationFunction=qNt.getTranslationFunction;Nu.useTranslation=GNt.useTranslation;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(Nu)})(Ez);const KNt=Vs(Ez);var rye={},Au={};Object.defineProperty(Au,"__esModule",{value:!0});var Vn=zi,XNt=E4,Lp=C4,Of=function(){function e(){}return e.init=function(t){return Lp.EmailPassword.init(t)},e.signOut=function(t){return Vn.__awaiter(this,void 0,void 0,function(){return Vn.__generator(this,function(r){return[2,Lp.EmailPassword.getInstanceOrThrow().signOut({userContext:Vn.getNormalisedUserContext(t==null?void 0:t.userContext)})]})})},e.submitNewPassword=function(t){return Vn.__awaiter(this,void 0,void 0,function(){return Vn.__generator(this,function(r){return[2,Lp.EmailPassword.getInstanceOrThrow().webJSRecipe.submitNewPassword(Vn.__assign(Vn.__assign({},t),{userContext:Vn.getNormalisedUserContext(t.userContext)}))]})})},e.sendPasswordResetEmail=function(t){return Vn.__awaiter(this,void 0,void 0,function(){return Vn.__generator(this,function(r){return[2,Lp.EmailPassword.getInstanceOrThrow().webJSRecipe.sendPasswordResetEmail(Vn.__assign(Vn.__assign({},t),{userContext:Vn.getNormalisedUserContext(t.userContext)}))]})})},e.signUp=function(t){return Vn.__awaiter(this,void 0,void 0,function(){return Vn.__generator(this,function(r){return[2,Lp.EmailPassword.getInstanceOrThrow().webJSRecipe.signUp(Vn.__assign(Vn.__assign({},t),{userContext:Vn.getNormalisedUserContext(t.userContext)}))]})})},e.signIn=function(t){return Vn.__awaiter(this,void 0,void 0,function(){return Vn.__generator(this,function(r){return[2,Lp.EmailPassword.getInstanceOrThrow().webJSRecipe.signIn(Vn.__assign(Vn.__assign({},t),{userContext:Vn.getNormalisedUserContext(t.userContext)}))]})})},e.doesEmailExist=function(t){return Vn.__awaiter(this,void 0,void 0,function(){return Vn.__generator(this,function(r){return[2,Lp.EmailPassword.getInstanceOrThrow().webJSRecipe.doesEmailExist(Vn.__assign(Vn.__assign({},t),{userContext:Vn.getNormalisedUserContext(t.userContext)}))]})})},e.getResetPasswordTokenFromURL=function(t){return Lp.EmailPassword.getInstanceOrThrow().webJSRecipe.getResetPasswordTokenFromURL(Vn.__assign(Vn.__assign({},t),{userContext:Vn.getNormalisedUserContext(t==null?void 0:t.userContext)}))},e.ComponentsOverrideProvider=XNt.Provider,e}(),YNt=Of.init,QNt=Of.signOut,JNt=Of.submitNewPassword,ZNt=Of.sendPasswordResetEmail,eAt=Of.signUp,tAt=Of.signIn,rAt=Of.doesEmailExist,nAt=Of.getResetPasswordTokenFromURL,iAt=Of.ComponentsOverrideProvider;Au.EmailPasswordComponentsOverrideProvider=iAt;Au.default=Of;Au.doesEmailExist=rAt;Au.getResetPasswordTokenFromURL=nAt;Au.init=YNt;Au.sendPasswordResetEmail=ZNt;Au.signIn=tAt;Au.signOut=QNt;Au.signUp=eAt;Au.submitNewPassword=JNt;(function(e){function t(r){for(var n in r)e.hasOwnProperty(n)||(e[n]=r[n])}e.__esModule=!0,t(Au)})(rye);const aAt=Vs(rye);console.log(" SuperTokens Config Loaded");const nye=G7()||window.location.origin,iye=window.location.origin;console.log(" SuperTokens API:",nye);console.log(" SuperTokens Website:",iye);KNt.init({appInfo:{appName:"Subfloor",apiDomain:nye,websiteDomain:iye,apiBasePath:"/api/auth",websiteBasePath:"/auth"},recipeList:[aAt.init({useShadowDom:!1,disableSignUp:!0,style:{container:{border:"1px solid var(--color-border)",backgroundColor:"var(--color-surface)",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",borderRadius:"0.5rem",fontFamily:"inherit"},headerTitle:{color:"var(--color-text-primary)",fontFamily:"inherit"},label:{color:"var(--color-text-secondary)"},input:{backgroundColor:"var(--color-background)",color:"var(--color-text-primary)",border:"1px solid var(--color-border)"},button:{backgroundColor:"var(--color-primary)",color:"var(--color-on-primary)",borderRadius:"0.5rem",fontWeight:"700",border:"none",textTransform:"uppercase"},link:{color:"var(--color-accent)"},superTokensBranding:{display:"none"}}}),M3e.init()]});const sAt=new SDe({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1,refetchOnWindowFocus:!0}}}),aye=document.getElementById("root");if(!aye)throw new Error("Could not find root element to mount to");const oAt=$M.createRoot(aye);oAt.render(u.jsx(Vr.StrictMode,{children:u.jsx(EDe,{client:sAt,children:u.jsx(Ez.SuperTokensWrapper,{children:u.jsx(VNt,{})})})}));export{Noe as W,TAt as a,z4 as r};
