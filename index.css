/* src/index.css */

@tailwind base;
@tailwind components;
@tailwind utilities;

/* === GLOBAL THEME VARIABLES === */
:root {
  /* --- Brand Identity --- */
  /* Primary: Actions, Buttons, Active Links */
  --color-primary: #2563eb; 
  --color-primary-hover: #1d4ed8; /* Usually computed, but settable */
  --color-on-primary: #ffffff;    /* Text on primary buttons */

  /* Secondary: Borders, Icons, Outlines */
  --color-secondary: #4b5563;
  --color-secondary-hover: #374151;
  --color-on-secondary: #ffffff;

  /* Accent: Status, Pills, Notifications */
  --color-accent: #0d9488; 
  --color-accent-hover: #0f766e;
  --color-on-accent: #ffffff;

  /* --- Interface Theme --- */
  --color-background: #111827; /* Page Canvas */
  --color-surface: #1f2937;    /* Cards / Sidebar */
  
  /* --- Typography --- */
  --color-text-primary: #f9fafb; /* Headings */
  --color-text-secondary: #d1d5db; /* Labels / Metadata */
  
  /* --- Derived Variables (The Magic) --- */
  /* Borders now obey the Secondary color */
  --color-border: var(--color-secondary); 
}

/* === UTILITY CLASSES (Connecting CSS Vars to Tailwind) === */
@layer utilities {
  .bg-primary { background-color: var(--color-primary); }
  .bg-primary-hover:hover { background-color: var(--color-primary-hover); }
  .text-primary { color: var(--color-primary); } /* For primary colored text links */
  
  .bg-secondary { background-color: var(--color-secondary); }
  .text-secondary { color: var(--color-text-secondary); } /* Note: Text uses text-secondary var */
  
  .bg-accent { background-color: var(--color-accent); }
  .text-accent { color: var(--color-accent); }
  
  .bg-surface { background-color: var(--color-surface); }
  .bg-background { background-color: var(--color-background); }
  
  .text-text-primary { color: var(--color-text-primary); }
  .text-text-secondary { color: var(--color-text-secondary); }
  
  .border-border { border-color: var(--color-border); }
  
  /* Contrast Text Utilities */
  .text-on-primary { color: var(--color-on-primary); }
  .text-on-secondary { color: var(--color-on-secondary); }
  .text-on-accent { color: var(--color-on-accent); }
}

/* === PRINT STYLES === */
@media screen {
  .print-only { display: none; }
}

@media print {
  body * { visibility: hidden; }
  #printable-summary, #printable-summary * { visibility: visible; }
  #printable-summary {
    position: absolute;
    left: 0; top: 0; width: 100%;
  }
}

/* === COMPONENT OVERRIDES === */

/* On Hold Event Pattern */
.on-hold-event {
  background-color: #404040;
  background-image: repeating-linear-gradient(
    45deg,
    rgba(255, 255, 255, 0.05),
    rgba(255, 255, 255, 0.05) 10px,
    transparent 10px,
    transparent 20px
  );
  color: #a0a0a0;
  border: 1px dashed var(--color-border);
}

/* React-Select Dark Theme Customizations */
.react-select-container .react-select__control {
  background-color: var(--color-background);
  border-color: var(--color-border);
}
.react-select-container .react-select__input-container {
  color: var(--color-text-primary);
}
.react-select-container .react-select__multi-value {
  background-color: var(--color-primary);
}
.react-select-container .react-select__multi-value__label {
  color: var(--color-on-primary);
}
.react-select-container .react-select__multi-value__remove:hover {
  background-color: var(--color-primary-hover);
  color: var(--color-on-primary);
}
.react-select-container .react-select__menu {
  background-color: var(--color-surface);
}
.react-select-container .react-select__option--is-focused {
  background-color: var(--color-background);
}
.react-select-container .react-select__option--is-selected {
  background-color: var(--color-primary);
}

/* React-Grid-Layout Customizations */
.react-grid-item .react-resizable-handle::after {
  content: '';
  position: absolute;
  right: 3px; bottom: 3px; width: 20px; height: 20px;
  background: radial-gradient(circle at 100% 100%, transparent 4px, var(--color-secondary) 4px, var(--color-secondary) 6px, transparent 6px),
              radial-gradient(circle at 100% 100%, transparent 9px, var(--color-secondary) 9px, var(--color-secondary) 11px, transparent 11px);
  transform: rotate(180deg);
  opacity: 0.7;
}
.react-grid-item:hover .react-resizable-handle::after { opacity: 1; }

.layout .drag-handle {
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease-in-out;
}
.layout .react-resizable-handle { display: none; }

.layout.edit-mode .drag-handle {
    opacity: 0.5;
    pointer-events: all;
}
.layout.edit-mode .drag-handle:hover { opacity: 1; }
.layout.edit-mode .react-resizable-handle { display: block; }
.layout.edit-mode .react-grid-item {
    box-shadow: 0 0 0 2px var(--color-primary); /* Use Primary color for edit focus */
}

/* Email Settings Toggle */
.toggle-checkbox:checked {
    right: 0;
    border-color: var(--color-primary);
}
.toggle-checkbox:checked + .toggle-label {
    background-color: var(--color-primary);
}


/* === SUPERTOKENS LOGIN OVERRIDES === */
/* Relies on useShadowDom: false in index.tsx */

/* 1. Main Container */
[data-supertokens~="container"] {
    background-color: var(--color-surface) !important;
    border: 1px solid var(--color-border) !important;
    font-family: inherit !important;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5) !important;
}

/* 2. Text Colors */
[data-supertokens~="headerTitle"],
[data-supertokens~="text"] {
    color: var(--color-text-primary) !important;
}
[data-supertokens~="label"] {
    color: var(--color-text-secondary) !important;
}
[data-supertokens~="link"],
[data-supertokens~="link"]:hover {
    color: var(--color-accent) !important;
}

/* 3. Inputs */
[data-supertokens~="input"] {
    background-color: var(--color-background) !important;
    border-color: var(--color-border) !important;
    color: var(--color-text-primary) !important;
}
[data-supertokens~="input"]:focus {
    border-color: var(--color-primary) !important;
    box-shadow: 0 0 0 1px var(--color-primary) !important;
}

/* 4. Button */
[data-supertokens~="button"] {
    background-color: var(--color-primary) !important;
    color: var(--color-on-primary) !important;
    border-radius: 0.5rem !important;
    text-transform: uppercase;
    font-weight: 700 !important;
    border: none !important;
}
[data-supertokens~="button"]:hover {
    background-color: var(--color-primary-hover) !important;
}

/* 5. REMOVE SIGN UP LINK (Hide the entire subtitle row) */
[data-supertokens~="headerSubtitle"] {
    display: none !important;
}

/* 6. CHANGE TITLE TEXT (CSS Trick) */
/* Hide original "Sign In" text */
[data-supertokens~="headerTitle"] {
    visibility: hidden;
    position: relative;
}
/* Inject new "Welcome Back" text */
[data-supertokens~="headerTitle"]::after {
    content: 'Welcome Back';
    visibility: visible;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    text-align: center;
    color: var(--color-text-primary);
}

/* 7. Hide "Powered by SuperTokens" */
[data-supertokens~="superTokensBranding"] {
    display: none !important;
}

/* 8. Force Page Background (Behind the modal) */
body {
    background-color: var(--color-background);
    color: var(--color-text-primary);
    min-height: 100vh;
}